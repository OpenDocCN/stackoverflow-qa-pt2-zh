# StackOverflow 问答 13662000-13662999

# java - Java字符串到数学方程

> ID：13662001
> 
> 赞同：6
> 
> 时间：2012-12-01T17:47:59.767
> 
> 标签：java

我需要实现功能`public int eval(String infix) {...}` ，当我像这样使用它时：

```
eval("3+2*(4+5)") 
```

我必须收到 21。

算术表达式可以包含“+”、“*”和括号。

那么，如何将其转换为数学方程？**我不能使用非标准库。**

**更新：找到解决方案。**

**它有 2 种方式：波兰表示法和使用 ScriptEngine。**

* * *

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T18:11:26.483

信不信由你，有了JDK1.6，你就可以使用内置的Javascript引擎了。定制以满足您的需求。

确保你有这些进口......

```
import javax.script.ScriptEngineManager;
import javax.script.ScriptEngine; 
```

代码：

```
ScriptEngineManager mgr = new ScriptEngineManager();
ScriptEngine engine = mgr.getEngineByName("JavaScript");
String infix = "3+2*(4+5)";
System.out.println(engine.eval(infix)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T17:56:07.010

首先，您需要对字符串进行标记。本质上，将每个元素分开。将操作与单个数字分开，并将它们存储在某些东西（可能是列表）中。然后只需根据操作顺序进行操作即可。

所以伪代码会是这样的：

```
public int eval(String infix)
{
    create a list of all the elements
    identify which operations you would want to do first
    perform the operations and simplify the list (e.g. if 5x4 were inside parantheses, remove the parantheses and replace it overall with 20.)
    continue the simplification until you have a final result
    return the result
} 
```

可能有更好的方法可以做到这一点，但这里有一个解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T18:31:58.140

```
 static int eval(String infix) {        
        ScriptEngineManager mgr = new ScriptEngineManager();
        ScriptEngine engine = mgr.getEngineByName("JavaScript");    
        String stringResult;
        try {
            stringResult = engine.eval(infix).toString();
            double doubleResult = Double.parseDouble(stringResult);
            int result = (int) doubleResult;        
            return result;
        } catch (ScriptException ex) {
            Logger.getLogger(Ukol4a.class.getName()).log(Level.SEVERE, null, ex);
        }
        return(1);

    } 
```

# php - 如何返回到现在存在图像的上传表单？

> ID：13662002
> 
> 赞同：0
> 
> 时间：2012-12-01T17:47:59.610
> 
> 标签：php, redirect, upload

我创建了一个允许用户上传的表单。我将“动作”作为“动作：upload.php”并且代码运行良好。

但是，在上传后，浏览器会`upload.php`按预期显示输出。我需要添加什么到 upload.php 以便它自动返回到我可以显示最近上传的图像的表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:54:33.963

用途：`header("location:yourpage.php")`在您`upload.php`重定向到`yourpage.php`yourpage.php 可能是您要显示图像的页面的位置

如果您在使用时遇到问题：

```
ob_start();
header("location:yourpage.php") 
```

那应该有帮助

# windows - 替换“<”运算符

> ID：13662004
> 
> 赞同：0
> 
> 时间：2012-12-01T17:48:09.547
> 
> 标签：windows, cmd

在 Windows cmd 中，我使用 < 运算符从文件中读取命令输入。

```
sqlite3 mydatabase.sqlite < command.txt 
```

sqlite3 是一个应用程序，command.txt 的内容是这样的：

```
.backup '..\database_backup\2012-11-30-16-16-28.bak' 
```

每次，我都会生成一个新的 command.txt 文件（因为我应该更改 .bak 文件名），然后我使用 < 运算符将其提供给 sqlite3.exe。有什么方法可以绕过 command.txt 生成并将所有输入参数直接提供给 sqlite3.exe？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:57:43.400

从[文档](http://www.sqlite.org/sqlite.html)中，我会尝试：

```
echo .backup '..\database_backup\2012-11-30-16-16-28.bak' | sqlite3.exe mydatabase.sqlite 
```

这也可能有效：

```
sqlite3.exe mydatabase.sqlite ".backup '..\database_backup\2012-11-30-16-16-28.bak'" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:57:14.997

试试这个：

```
echo ".backup '..\database_backup\2012-11-30-16-16-28.bak'" | sqlite3 mydatabase.sqlite 
```

或这个：

```
sqlite3 -cmd ".backup '..\database_backup\2012-11-30-16-16-28.bak'" mydatabase.sqlite < NUL 
```

# c++ - 在缓冲区对象上运行并通过着色器更改其数据？

> ID：13662005
> 
> 赞同：4
> 
> 时间：2012-12-01T17:48:20.327
> 
> 标签：c++, opengl, shader

有没有办法在缓冲区对象上运行着色器并使用着色器使用其他一些数据对其进行修改？

换句话说：有没有办法在着色器中创建统一的全局变量并且可以修改？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T18:45:33.187

是的，尽管这取决于您的硬件。所有这些机制都需要支持 GL 3.x 或更高版本的硬件。

**变换反馈**

这允许您在一个或多个缓冲区对象中捕获[顶点处理的结果。](http://www.opengl.org/wiki/Vertex_Processing)

这是最粗略的机制，因为每个顶点着色器只能访问它作为输入给出的顶点数据，并且只能写入输出顶点。所以着色器不能访问它之前或之后的顶点。此外，输出量非常有限，GL 3.x 级硬件通常只有 4 个输出值。

您可以使用[几何着色器](http://www.opengl.org/wiki/Geometry_Shader)来提高您的一些阅读和写作能力；反馈发生在 VS 或 GS​​ 之后。

**渲染到缓冲区对象**

[缓冲区纹理](http://www.opengl.org/wiki/Buffer_Texture)是使用缓冲区对象进行存储的纹理。它们就像非常大的一维纹理。

作为纹理，您可以自由地[将它们附加](http://www.opengl.org/wiki/Framebuffer_Object#Attaching_Images)到[帧缓冲区对象](http://www.opengl.org/wiki/Framebuffer_Object)并对其进行渲染。

除了难以渲染到高度为 1 像素的图像之外，这种技术的缺点是您正在处理光栅化器。这并不完全准确。您可以使用`gl_FragCoord`知道您在片段中的位置，但如果您想将显着不同的数据写入图像的不同区域，可能会有困难。

另一个问题是 FBO 大小受视口尺寸的限制，通常在 8192 到 16384 左右。充其量，您可以编写 65536 个单独的浮点数（如果缓冲区纹理使用该`GL_RGBA32F`格式）。因此，您实际上可以写入的数据量非常有限。

**图像加载/存储**

[ARB_shader_image_load_store](http://www.opengl.org/wiki/Image_Load_Store)是 GL 4.2 中的核心，表示着色器任意读取和写入图像数据的能力。结合[缓冲区纹理](http://www.opengl.org/wiki/Buffer_Texture)（使用缓冲区对象作为存储的纹理），您可以任意读取和写入缓冲区对象。

除了硬件要求之外，最大的缺点是没有免费的午餐。通过使用 Image Load Store，您有效地放弃了 OpenGL 的所有[自动内存同步系统](http://www.opengl.org/wiki/Synchronization)。因此，您必须[*手动*](http://www.opengl.org/wiki/Memory_Model#Incoherent_memory_access)[进行所有同步](http://www.opengl.org/wiki/Memory_Model#Incoherent_memory_access)*以进行写入和读取。这是一个很大的痛苦，你可以很容易地把它搞砸并得到未定义的行为，而不知道为什么。它可能在一个平台上工作，但不能在用户的机器上工作。*

 *你必须*非常*小心这些东西。

**着色器存储缓冲区对象**

[着色器存储缓冲区对象](http://www.opengl.org/wiki/Shader_Storage_Buffer_Object)实际上只是来自缓冲区纹理的图像加载/存储，只有[*更好*的界面](http://www.opengl.org/wiki/Interface_Block_%28GLSL%29)。这就像定义结构并访问它们。

与图像加载/存储相同的缺点也适用。此外，SSBO*真的很*新。只有 NVIDIA 实现了它，即使那样，也只能在 beta 驱动程序中实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T17:52:38.190

我不太了解它是如何完成的，但我知道从着色器修改 VBO 称为[Transform Feedback](http://www.opengl.org/wiki/Transform_Feedback)。您需要 OpenGL >=3.0 或 OpenGL >= 2.0 并带有`NV_transform_feedback`or`EXT_transform_feedback`扩展名。

如果您需要更通用的计算能力，您可以尝试做一些[OpenCL/OpenGL 互操作](http://www.cmsoft.com.br/index.php?option=com_content&view=category&layout=blog&id=99&Itemid=150)...*

# java - 中断套接字连接

> ID：13662006
> 
> 赞同：2
> 
> 时间：2012-12-01T17:48:29.340
> 
> 标签：java, sockets

我有一个套接字程序，它通过 PrintWriter(out.write(String str)) 发送文本数据，另一方面 BufferedReader(in.readLine()) 正在接收这个。

如果其中一个客户端断开连接，我想通过某种“超时”来保护我的程序，但我对其进行了测试，并且在工作期间，当客户端关闭时，服务器仍在发送数据并且没有中断也没有套接字关闭。

客户端也一样，我想断开连接并显示信息，例如“服务器不工作”。我该如何处理？

```
// Server
out = new PrintWriter( sock.getOutputStream());
while( true ) {
   this.out.write("Hello");
   this.out.flush();
}

// Client
in = new BufferedReader( new InputStreamReader( sock.getInputStream()));
while (true) {
   in.readLine();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:08:54.630

我认为您的问题是 PrintWriter。请参阅[其文档](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html)：

> 此类中的方法从不抛出 I/O 异常，尽管它的某些构造函数可能会。客户端可以通过调用 checkError() 来查询是否发生了任何错误。

改用[BufferedWriter](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedWriter.html)。

请注意 java.util.Scanner 有同样的问题（如果你在服务器端使用它）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:27:51.747

我刚刚检查过，`PrintWriter.checkError()`方法帮助我解决了我的问题。当客户端断开连接时，方法返回 true。如描述：`Flushes the stream if it's not closed and checks its error state.`

```
// Server
this.out = new PrintWriter(sock.getOutputStream());
while (true) {
   this.out.write("Hello");
   this.out.flush();
   if(this.out.checkError()){
      //...
   }
} 
```

# url - 如何将本地程序连接到服务隧道？

> ID：13662018
> 
> 赞同：0
> 
> 时间：2012-12-01T17:49:24.520
> 
> 标签：url, rabbitmq, connect, cloud-foundry, tunnel

我已经尝试了一周将本地应用程序连接到 CloudFoundry 服务上的远程rabbitMQ，但是 lign: connection = factory.newConnection(); 由于 java.net.SocketTimeoutException：读取超时，总是抛出 IOException 我已正确按照本教程的步骤创建隧道并收集它的信息，但它仍然无法正常工作。这是我用于连接本地应用程序的 lign：

```
String rabbitMQURI = “amqp://ubSGLHE7886x6:pk6NV4xxxxxx@localhost:10100/ve296d42a44794aac92536b362681e92a”;
factory.setUri(rabbitMQURI); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:27:07.827

只是想确保当您尝试将本地 java 应用程序连接到 CF rabbitmq 服务时，您首先通过运行“vmc tunnel servicename”打开了一个隧道。这将为您提供连接属性：用户名、密码、virtual_host(vhost) 和端口（正如 Dan 所说，如果您没有打开其他隧道，它应该从 10000 开始）。您需要使用主机名“localhost”。为了使用它，请确保在您的主机文件中 127.0.0.1 映射到名称“localhost”。

我可以毫无问题地连接到我自己的隧道，这些代码行：

```
 ConnectionFactory factory = new ConnectionFactory();
    factory.setUri("amqp://usd0LnHpwPMvE:p3faI9Ug8E1au@localhost:10000/v51d86f3a7033476695655e42eaa16b1f");
    Connection conn = factory.newConnection();
    Channel channel = conn.createChannel(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:10:55.663

看看[http://support.cloudfoundry.com/entries/20334618-rabbitmq-service-faq](http://support.cloudfoundry.com/entries/20334618-rabbitmq-service-faq)你会看到它说：

**问题：** CloudFoundry.com 之外的应用程序是否可以访问 RabbitMQ 服务？

**答：**目前没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T00:05:04.330

你确定这个端口号是正确的吗？如果您没有任何其他隧道处于活动状态，则默认起始端口为 10000。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-02T18:15:31.713

不幸的是，我相信您不能将 vmc 隧道与 RabbitMQ 服务一起使用，而只能与数据库服务一起使用。我不相信 AMQP 端口被映射。

# qt - 如何在 PyQt4 中为 QTreeWidget 实现 itemChecked 和 itemUnchecked 信号？

> ID：13662020
> 
> 赞同：6
> 
> 时间：2012-12-01T17:49:43.370
> 
> 标签：qt, pyqt, pyqt4, signals-slots, qtreewidget

[QTreeWidget](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/qtreewidget.html)上的 itemChecked 和 itemUncheсked 信号在哪里？

```
Qt Signals: (quote from PyQt4 QTreeWidget documentation page)

void currentItemChanged (QTreeWidgetItem *,QTreeWidgetItem *)
void itemActivated (QTreeWidgetItem *,int)
void itemChanged (QTreeWidgetItem *,int)
void itemClicked (QTreeWidgetItem *,int)
void itemCollapsed (QTreeWidgetItem *)
void itemDoubleClicked (QTreeWidgetItem *,int)
void itemEntered (QTreeWidgetItem *,int)
void itemExpanded (QTreeWidgetItem *)
void itemPressed (QTreeWidgetItem *,int)
void itemSelectionChanged () 
```

目前我这样解决它：

```
self.treeWidget.itemClicked.connect (self.handle)

def handle (item, column): 
    print 'emitted!', item.text(column)
    if item.checkState(column) == QtCore.Qt.Checked:
        # there are a lot of my functions inside which work with item data
        self.handleChecked(item, column)
    elif item.checkState(column) == QtCore.Qt.Unchecked:
        self.handleUnchecked(item, column) 
```

但这对我来说是一个糟糕的解决方案，因为[itemClicked](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/qtreewidget.html#itemClicked)在很多情况下都会发出。它在项目文本上的鼠标左键/右键单击的情况下发出，这是绝对不必要的（我在 self.handleChecked 中有繁重的函数，并且在上下文菜单打开时对它们的不必要调用非常糟糕）。

好吧，我也尝试使用[itemChanged](http://www.riverbankcomputing.com/static/Docs/PyQt4/html/qtreewidget.html#itemChanged)：

```
self.treeWidget.itemChanged.connect (self.handle) 
```

但这样一来情况就更糟了！self.handle 函数递归调用自己到无穷大和更远的地方，因为我在 self.handleChecked 中的函数更改了项目数据，并且这个信号一次又一次地发出。另外，我需要仅在项目复选框切换时发出的信号。

有人可以告诉我，我做错了什么吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-01T20:21:48.087

为避免在使用`itemChanged`信号时出现递归问题，请尝试暂时[阻塞信号](http://qt-project.org/doc/qt-4.8/qobject.html#blockSignals)直到处理程序完成：

```
def handle(self, item, column):
    self.treeWidget.blockSignals(True)
    if item.checkState(column) == QtCore.Qt.Checked:
        self.handleChecked(item, column)
    elif item.checkState(column) == QtCore.Qt.Unchecked:
        self.handleUnchecked(item, column)
    self.treeWidget.blockSignals(False) 
```

**更新**

您问题的另一部分询问仅在检查项目时才发出信号。

一种方法是继承 QTreeWidgetItem 并重新实现它的[setData](http://qt-project.org/doc/qt-4.8/qtreewidgetitem.html#setData)函数：

```
class TreeWidgetItem(QtGui.QTreeWidgetItem):
    def setData(self, column, role, value):
        state = self.checkState(column)
        QtGui.QTreeWidgetItem.setData(self, column, role, value)
        if (role == QtCore.Qt.CheckStateRole and
            state != self.checkState(column)):
            treewidget = self.treeWidget()
            if treewidget is not None:
                treewidget.itemChecked.emit(self, column)

class Window(QtGui.QTreeWidget):
    itemChecked = QtCore.pyqtSignal(object, int)

    def __init__(self, rows, columns):
        QtGui.QTreeWidget.__init__(self)
        self.itemChecked.connect(self.handleItemChecked)

    def handleItemChecked(self, item, column):
        print 'ItemChecked', int(item.checkState(column)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-23T10:11:41.423

要完成@ekhumoro 的答案，并给出更简短的答案（不继承 QTreeWidgetItem）：阻止信号：

```
self.treeWidget.blockSignals(True)
self.treeWidget.blockSignals(False) 
```

并使用

```
self.treeWidget.itemChanged 
```

to connect to what you want. the signal is used when the data is changed (text inside, checked state, ...) and in your function linked to this signal verify if the treeWidget has changed is checked state.

# css - 页脚中的全宽背景图像

> ID：13662021
> 
> 赞同：1
> 
> 时间：2012-12-01T17:08:39.153
> 
> 标签：css, wordpress, footer

我正在使用 960gs（在我的本地环境中）并将这个 CSS 代码插入到我的`footer`div 中：

```
## style.css

#footer{
    background:url("images/footer.png")  repeat-x scroll top transparent; 
    height: 130px; 
    width:100%; 
    overflow:hidden;
}

## footer.php

<div id="footer">   
    <div id="nav" class="container_12">  </div>
    <div id="endfooter" class="container_12">
        <div id="copyright" class="grid_3 alpha"> </div>  
        <div id="design" class="grid_3 omega">  </div>  
    </div> <!-- endfooter -->
</div> <!-- end footer --> 
```

问题是页面没有`footer`以全宽显示 div，背景覆盖整个 div。它仅显示 960 像素的图像。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T03:17:16.960

我花了一段时间才意识到你想要做什么。您正在尝试缩放背景图像，对吗？你不能这样做，至少在 CSS2 中是这样。背景图像不缩放。您可以平铺它们（重复），但不能缩放它们。如果要缩放图像，则必须使用`<img>`标签。

如果您愿意依赖 CSS3 标准，您可以使用[`background-size`](http://www.w3schools.com/cssref/css3_pr_background-size.asp)

```
#footer{
    background:url("images/footer.png")  repeat-x scroll top transparent; 
    background-size:100% 130px;
    height: 130px; 
    width:100%; 
    overflow:hidden;
} 
```

我不能保证，`background-size`但 w3schools 确实声称对浏览器有很好的支持。

# ruby-on-rails - 带有 Ruby 开发工具包的 AWS ItemSearch

> ID：13662023
> 
> 赞同：0
> 
> 时间：2012-12-01T17:50:09.533
> 
> 标签：ruby-on-rails, amazon-web-services

我正在尝试使用 Amazon aws-sdk Gem for Ruby on Rails 进行 ItemSearch，但无法使其工作并且正在努力寻找任何文档（这一切似乎都很旧）

我有以下页面：/app/views/home/index.html.erb：

```
<%= form_tag('/search') do %>
  <%= label_tag(:keywords, 'Search for:') %>
  <%= text_field_tag(:keywords) %>
  <%= submit_tag('Search') %><br/>
  <%= text_area_tag(:result, @result) %>
<% end %> 
```

以下控制器：/app/controllers/home_controller.rb：

```
class HomeController < ApplicationController
  require 'aws-sdk'

  def index
    @result = ''
  end

  def search
    AWS.config( :access_key_id => 'xx', :secret_access_key => 'xx')
    sea = ItemSearch.new('Books', {'Title' => 'ruby programming'} )
    @result = params[:keywords]
    render :action => :index
  end
end 
```

但我得到了错误：

```
uninitialized constant HomeController::ItemSearch 
```

我只是想得到一个结果并将结果显示在页面的文本区域中。

但正如我所说，我能找到的唯一文档似乎更旧。

谁能帮我解决这个问题？或者指向我可以使用的更新的教程？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T20:33:40.207

适用于 Ruby 的 AWS 开发工具包 (aws-sdk gem) 不支持亚马逊产品广告 API。看来您正在尝试从其他一些 gem（也许是 ruby​​-aaws）中使用它的代码。aws-sdk 涵盖 AWS API，但不包括 Amazon API。

# entity-framework - EntityFramework Add-Migration 通过 System.Data.SqlServerCe 使 vwdexpress.exe 崩溃

> ID：13662025
> 
> 赞同：0
> 
> 时间：2012-12-01T17:50:11.997
> 
> 标签：entity-framework, migration, sql-server-ce, visual-web-developer-2010

当我从包管理器控制台运行 EntityFramework 'add-migration' 命令时，Visual Web Developer Express 崩溃。

```
Problem signature:
  Problem Event Name: CLR20r3  
  Problem Signature 01: vwdexpress.exe  
  Problem Signature 02: 10.0.40219.1  
  Problem Signature 03: 4d5f2a69  
  Problem Signature 04: System.Data.SqlServerCe  
  Problem Signature 05: 4.0.8876.1  
  Problem Signature 06: 4fcd17f1  
  Problem Signature 07: 401  
  Problem Signature 08: 17  
  Problem Signature 09: System.Data.SqlServerCe.SqlCe  
  OS Version: 6.1.7601.2.1.0.256.48  
  Locale ID: 1033  

Additional information about the problem:  
  LCID: 1033 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T14:00:26.750

在msdn上得到了回复。重新安装了 SQL Server Compact Edition，迁移已成功搭建。

[http://www.microsoft.com/en-us/download/details.aspx?id=30709](http://www.microsoft.com/en-us/download/details.aspx?id=30709)

# mysql - 删除 MySQL 表中的所有重复行（除 1 外，所有重复行）

> ID：13662026
> 
> 赞同：2
> 
> 时间：2012-12-01T17:50:17.207
> 
> 标签：mysql, sql

> **可能重复：**
> [删除 MySQL 中的重复行](https://stackoverflow.com/questions/3311903/remove-duplicate-rows-in-mysql)

我有一个看起来像这样的表“recipientscore”：

*   收件人ID/消息ID
*   1 / 1
*   2 / 2
*   3 / 2
*   4 / 2
*   5 / 3
*   6 / 4

我想要做的是删除所有出现两次或更多的记录。我不想保留每个重复记录的一个版本。清理后是这样的：

*   收件人ID/消息ID
*   1 / 1
*   5 / 3
*   6 / 4

你对如何做到这一点有想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T17:55:25.793

```
delete from recipientscore
where messageid in
(
   select * from
   (
      select messageid from recipientscore
      group by messageid
      having count(*) > 1
   ) x
) 
```

### [SQLFiddle 演示](http://sqlfiddle.com/#!2/f8e8e/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:57:45.297

'juergen d' 给出的答案是完美的。如果您希望只保留一个唯一行并删除剩余的重复行，您可以尝试此操作。

```
ALTER IGNORE TABLE recipient score  ADD UNIQUE KEY idx1(messageid); 
```

# android - 如何将查询结果保存到单独的表中？

> ID：13662031
> 
> 赞同：1
> 
> 时间：2012-12-01T17:50:55.360
> 
> 标签：android, database, sqlite, save

我有一个数据库，允许用户在数据库中查询书籍。

我正在尝试将查询结果保存为“书签”。用户输入查询，然后能够单击结果以查看该特定书籍的详细信息。

然后有一个菜单选项允许用户将查询“保存”到他们的书签中。保存的查询被插入到数据库表中。Bookmarks 是一个将保存的数据加载为列表视图的活动，允许用户管理他们的书签。

除了保存之外，一切都已设置好并且运行良好。I do not know how, or what would be the best way to get the results from the query into the database when the saved menu option is picked.

标准的 sqlite 插入可以工作，但没有特定的查询结果数据。

部分代码：

```
package com.example.newdatabase;

import android.app.Activity;
import android.content.Intent;
import android.database.Cursor;
import android.database.DatabaseUtils;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.Menu;
import android.view.MenuInflater;
import android.view.MenuItem;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.Toast;

public class DetailView extends Activity
{
    private DBAdapter dbHelper;
    private SimpleCursorAdapter dataAdapter;
    private long rowid;//row for book from position in database
    public static final String BOOKM_ID = "rowid";

@Override
   public void onCreate(Bundle savedInstanceState) 
   {
      super.onCreate(savedInstanceState); 
      setContentView(R.layout.detailviewlist);

  rowid=getIntent().getExtras().getLong(TitleSearch.ROW_ID);//passed from TitleSearch pass the row id

        dbHelper = new DBAdapter(this);
        dbHelper.open();

        //loads data into list 
        displayListView();
   }

private void displayListView()
{
    Cursor cursor=dbHelper.getABOOK(rowid);//cursor and query method only shows one book

    //defines columns to bind
    String [] columns =new String[]
            {
                DBAdapter.KEY_TITLE,
                DBAdapter.KEY_AUTHOR,
                DBAdapter.KEY_EDITION,
                DBAdapter.KEY_PUBLISHER,
                DBAdapter.KEY_DESCRIPTION,
                DBAdapter.KEY_OPAC,
                DBAdapter.KEY_LOCATION,
                DBAdapter.KEY_CALL,
                DBAdapter.KEY_COPIES,
                DBAdapter.KEY_STATUS,

            };

    // the XML defined views which the data will be bound to
      int[] to = new int[] 
      {
        R.id.title,
        R.id.author,
        R.id.edition,
        R.id.publisher,
        R.id.description,
        R.id.subject,
        R.id.location,
        R.id.callnum,
        R.id.copies,
        R.id.status,
      };

    // create the adapter using the cursor pointing to the desired data
      //as well as the layout information
      dataAdapter = new SimpleCursorAdapter(
        this, R.layout.detailbook,
       cursor,
       columns,
        to,
        0);

     ListView listView = (ListView) findViewById(R.id.listView2);
      // Assign adapter to ListView
      listView.setAdapter(dataAdapter);

}
   @Override
    public boolean onCreateOptionsMenu(Menu menu) //save menu
    {
       super.onCreateOptionsMenu(menu);
       MenuInflater inflater = getMenuInflater();
       inflater.inflate(R.menu.savemenu, menu);
       return true;

    }

  /* @Override
    public boolean onOptionsItemSelected(MenuItem item) //lauches the bookmark when saved
    {
       Intent addContact = new Intent(DetailView.this, Bookmark.class);
       startActivity(addContact);
       return super.onOptionsItemSelected(item);
    }*/

   public boolean onOptionsItemSelected(MenuItem item)//menu action
    {

        switch (item.getItemId())
        {
        case R.id.addsave:
            // Single menu item is selected to save book info

            //adds info into bookmark on save click

            //this is where i am having an issue

            Toast.makeText(DetailView.this, "The book has been saved!", Toast.LENGTH_SHORT).show();//feedback for user
            return true;

        default:
            return super.onOptionsItemSelected(item);

        }

    } //end of options
    }//end of detail view 
```

我正在尝试将 getABOOK(rowid) 查询的结果保存到 Bookmarks 使用的数据库表中。

除非有更好的方法来保存结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:04:07.170

我建议在同一个表中添加一个名为 Bookmark 的新列，并在用户选择书签时将书签的时间戳添加到特定行。

现在在书签视图中，您可以简单地查询书签不为空的所有行。

# jquery - jQuery-使某个图像类不受延迟加载的影响

> ID：13662034
> 
> 赞同：0
> 
> 时间：2012-12-01T17:51:14.313
> 
> 标签：jquery, css, lazy-loading, image

我有一个延迟加载插件，它似乎针对我页面上的所有图像。所以当我向下滚动时，图像才会显示出来。

我的问题是我的图像在点击时会发生变化。更具体地说，当单击“投票”图像时，它会被完全相同位置（并且大小相同）的不同“投票”图像替换。

当显示新的“投票”图像时，即使它出现在同一个位置，它最初也不会显示。它只会在您滚动页面（任何方向）时出现。

我想知道是否有办法避免这种情况？我希望无需滚动即可立即显示图像。我想向“投票”按钮添加一个类或 id，以确保延迟加载插件忽略它。

*   我对延迟加载插件知之甚少，因为我不确定它实际上是如何工作的，因为它包含在我正在使用的模板中。虽然我怀疑它针对 img 标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:54:05.570

你可以使用[CSS sprites](http://www.w3schools.com/css/css_image_sprites.asp)来解决这个问题，而不是摆弄延迟加载。

CSS sprites 的基本思想是显示同一图像的不同部分，而不是显示多个不同的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T12:42:15.690

我解决了我在这里遇到的问题。

解决方案在这里：

```
$('img.lazy:not(.notlazy)') 
```

如图：[这里](https://stackoverflow.com/questions/4485903/jquery-select-all-images-except-those-with-a-certain-class)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T11:40:48.067

根据[文档](http://www.appelsiini.net/projects/lazyload)，给延迟加载的图像一个特定的类是个好主意。这样您就可以轻松控制绑定到哪个图像插件。例如：

```
<img class="lazy" src="img/grey.gif" data-original="img/example.jpg" width="640" height="480"> 
```

然后在你的代码中做：

```
$("img.lazy").lazyload(); 
```

由于 Lazy Load 是 jQuery 插件，你可以使用[任何](http://api.jquery.com/category/selectors/)你想要的 jQuery 选择器。

# eclipse - 如何在 jface 的 TableViewer 中使用 TreeNode

> ID：13662035
> 
> 赞同：2
> 
> 时间：2012-12-01T17:51:20.180
> 
> 标签：eclipse, swt, jface, tableviewer

在里面`TableViewer`我想添加树节点的列。我怎样才能实现这种类型的`TableViewer`列展开和折叠。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:16:57.697

为什么不使用[`TreeViewer`](http://www.vogella.com/articles/EclipseJFaceTree/article.html)? [这](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/SWTTreeWithMulticolumns.htm)是一个关于如何使用`Tree`. 使用 a`TreeViewer`与 a 非常相似`TableViewer`。

它看起来类似于：

![在此处输入图像描述](../Images/abda5b133a61f84d5cd1d73eb88f5d07.png)

# java - 线程挂在 DriverManager.getConnection

> ID：13662037
> 
> 赞同：3
> 
> 时间：2012-12-01T17:51:26.177
> 
> 标签：java, postgresql, jdbc

我有一个应该 24/7 运行的多线程程序，有时我会看到一些线程在程序运行一段时间后会挂起，没有异常或错误。它只是不会做任何事情。我运行了一个线程转储以查看问题所在，这是未执行任何操作的线程的相关线程转储

```
"Thread2" prio=6 tid=0x0000000014814000 nid=0xbf8 runnable [0x00000000159fe000]
   java.lang.Thread.State: RUNNABLE
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(Unknown Source)
        at java.net.SocketInputStream.read(Unknown Source)
        at org.postgresql.core.VisibleBufferedInputStream.readMore(VisibleBufferedInputStream.java:143)
        at org.postgresql.core.VisibleBufferedInputStream.ensureBytes(VisibleBufferedInputStream.java:112)
        at org.postgresql.core.VisibleBufferedInputStream.read(VisibleBufferedInputStream.java:71)
        at org.postgresql.core.PGStream.ReceiveChar(PGStream.java:272)
        at org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:269)
        at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:106)
        at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:64)
        at org.postgresql.jdbc2.AbstractJdbc2Connection.<init>(AbstractJdbc2Connection.java:123)
        at org.postgresql.jdbc3.AbstractJdbc3Connection.<init>(AbstractJdbc3Connection.java:28)
        at org.postgresql.jdbc3g.AbstractJdbc3gConnection.<init>(AbstractJdbc3gConnection.java:20)
        at org.postgresql.jdbc4.AbstractJdbc4Connection.<init>(AbstractJdbc4Connection.java:30)
        at org.postgresql.jdbc4.Jdbc4Connection.<init>(Jdbc4Connection.java:22)
        at org.postgresql.Driver.makeConnection(Driver.java:391)
        at org.postgresql.Driver.connect(Driver.java:265)
        at java.sql.DriverManager.getConnection(Unknown Source)
        at java.sql.DriverManager.getConnection(Unknown Source)
        at database.Database.isItInDatabase(Database.java:1108)
        at miner.Miner.run(Miner.java:145)
        at java.lang.Thread.run(Unknown Source) 
```

以下是数据库方法

```
public Boolean isItInDatabase(String userName) throws SQLException
{
    Connection conn = null;
    PreparedStatement pst = null;
    ResultSet rs = null;
    Boolean exists = false;

    try
    {
        Class.forName("org.postgresql.Driver");
        conn = DriverManager.getConnection("jdbc:postgresql://MYSERVERIP:5432/" + database, username, password); //--->>>>>>line 1108
        pst = conn.prepareStatement("SELECT COUNT(*) FROM listing_info where listing_url = ?");
        pst.setString(1, userName);

        rs = pst.executeQuery();
        while (rs.next())
        {
            exists = rs.getBoolean(1);
        }

    }
    catch (Exception e)
    {
        System.out.println(e);
    }
    finally
    {
        pst.close();
        rs.close();
        conn.close();
    }

    return exists;
} 
```

我已经标记了我的数据库文件中第 1108 行的位置。我能做些什么来解决这个问题吗？所以程序不会永远等在那里吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T18:28:50.403

这与数据库无关。那是一个挂起的套接字连接。它发生在套接字连接断开时。阻止它挂起的唯一方法是使用套接字读取超时。看起来有一些用于 postgresql 的[jdbc 驱动程序配置属性可以解决这个问题。](http://jdbc.postgresql.org/documentation/84/connect.html)

# php - 如何使用时间戳和 PHP 在 MySQL 中返回当前月份的数据？

> ID：13662039
> 
> 赞同：1
> 
> 时间：2012-12-01T17:51:29.717
> 
> 标签：php, mysql, timestamp

这应该使用我拥有的 PHP/MySQL 时间戳来处理所有其他数据。基本上我在 MySQL 和 PHP 中使用时间戳功能

我现在使用 MySQL 插入：

`now()`

或 PHP 中的类似内容：

`$date=date("Y-m-d H:i:s");`

这是我的一些数据：

```
Id          AdId    Unique Md5                                              Date                Stamp                                   IP

    61860       207     92cea3a296fdc76bac6fda219xxxxxx     2012-12-01  2012-12-01 17:48:31     74.125.181.xx
    61859       208     abe3aec5c24301db2d5803a310xxxxxx  2012-12-01    2012-12-01 17:48:31     74.125.181.xx
    61858       207     c93c67a013c64df53cbeec9346xxxxxx  2012-12-01    2012-12-01 17:48:11     95.21.xxx.138
    61857       207     596cf87f2405874c7172f6d0dcxxxxxx    2012-12-01  2012-12-01 17:47:54     188.xxx.98.242
    61856       212     bbba41c211e2829d622c55d00dxxxxxx  2012-12-01    2012-12-01 17:47:17     141.xxx.9.40 
```

这是我的疑问之一。基本上我正在尝试使用 207 和本月的时间戳 (2012-12) 获取所有 AdId 的行总数

```
SELECT COUNT(adid) AS hits FROM `ha1`.`adviews` WHERE `adid`='212' AND `stamp`='2012-12' 
```

它返回 0 个结果。我打算这样做：

```
<?php
$currentDate=date("Y-m-d H:i:s");
$currentMonth=date("Y-m");

$trafficsql=mysql_query("SELECT COUNT(adid) AS hits FROM `".$dn."`.`adviews` WHERE `adid`='".$rz["id"]."' AND `stamp`='".$currentMonth"'");
while($vss=mysql_fetch_array($trafficsql)){
    echo $vss["hits"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:01:39.110

您可以在 php 语法中使用以下逻辑:-)

`WHERE MONTH(stamp) = MONTH(CURRENT_DATE) AND` `YEAR(stamp) = YEAR(CURRENT_DATE)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T17:56:11.987

尝试

```
$trafficsql=mysql_query("SELECT COUNT(adid) AS hits FROM `".$dn."`.`adviews` WHERE `adid`='".$rz["id"]."' AND DATE_FORMAT(`stamp`, '%Y-%m')='".$currentMonth"'"); 
```

使用：[DATE_FORMAT()](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:58:21.130

`SELECT COUNT(adid) AS hits FROM ha1.adviews WHERE adid=212 AND stamp>date_sub(now(), interval 1 month)`

假设您的邮票列是日期时间类型

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T17:56:03.110

您可以将时间戳作为字符串进行比较，但随后您需要使用 LIKE

```
SELECT COUNT(adid) AS hits 
FROM `ha1`.`adviews` 
WHERE `adid`='212' AND `stamp` LIKE '2012-12%' 
```

# java - 在条件下结束java线程

> ID：13662042
> 
> 赞同：0
> 
> 时间：2012-12-01T17:52:17.863
> 
> 标签：java, concurrency

这是我在一本书中找到的停车场的一个小*实现。*我想知道如何结束一个java线程。如果经过一段时间后仍然没有免费停车场，我想停止它，在我的情况下是 sleep(500)。

```
import java.util.logging.Level;
import java.util.logging.Logger;

class ParkingLot {

// I assume that parking lot capacity is 4 lots
public static final int MAX_CAPACITY = 4;
private int totalParkedCars = 0;
public synchronized void park(String vehicle) {

    // check if there is a free lot
    while (totalParkedCars >= MAX_CAPACITY) {
        try {
            System.out.println("The parking lot is full " +
                    vehicle + " has to wait.");

            // a time that vehicle will wait for a parking lot to free
            wait(500);
 // ! I wait and if no free lots want to stop thread !
        } catch (InterruptedException e) {
                       Logger.getLogger(ParkingLot.class.getName()).log(Level.SEVERE, 
                    "Sorry for inconvenience :(", e);
        }

    }
    // precondition is true
    System.out.println(vehicle + " has parked");
    totalParkedCars++;
}
public synchronized void leave(String vehicle) {
    totalParkedCars--;
    System.out.println(vehicle + " has left, notify a waiting vehicle.");
    notify();
}
} 
```

车辆等级：

```
import java.util.logging.Level;
import java.util.logging.Logger;

class Vehicle extends Thread {
private ParkingLot parking;
private String name;
private volatile boolean running = true;
public Vehicle(String name, ParkingLot parking) {
    this.name = name;
    this.parking = parking;
    start();
}
public void terminate() {
    running = false;
}
public void run() {
    while (running) {
        System.out.println(this.name + " is ready to park.");
        parking.park(this.name);
        try {
            // Vehicle waits at lot
            sleep(1000);  // TODO: random time to wait                  
        } catch (InterruptedException e) {
            // Will catch and log InterruptedException if happens
            Logger.getLogger(Vehicle.class.getName()).log(Level.SEVERE, this.name, e);
            running = false;
        }

        // Vehicle leaves parking lot
        parking.leave(this.name);   
        running = false;
    }
}
 } 
```

用于测试的类：

```
public class GSTest {
public static void main(String[] args) {
    ParkingLot parkingLot = new ParkingLot();
    new Vehicle("Vehicle_1", parkingLot);
    new Vehicle("Vehicle_2", parkingLot);
    new Vehicle("Vehicle_3", parkingLot);
    new Vehicle("Vehicle_4", parkingLot);
    new Vehicle("Vehicle_5", parkingLot);
    new Vehicle("Vehicle_6", parkingLot);
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:01:07.453

可以在几个层面上给出建议：

1.  使用Java中断机制：当你进入时（或者你已经在睡觉时）调用`yourThread.interrupt()`和在线程内你会得到一个；`InterruptedException``sleep`

2.  不要从外面阻止你的线程；在线程内使用条件；

3.  这将是最好的选择：不要使用无限循环`sleep`; 而是**安排一个重复的任务**，您可以在需要时取消该任务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T17:57:36.670

```
boolean waited = false;

while (totalParkedCars >= MAX_CAPACITY) {
    try {
        System.out.println("The parking lot is full " +
                vehicle + " has to wait.");

        if (!waited) {
            waited = true;
            wait(500);
        } else {
            return;
        }
    } catch (InterruptedException e) {
        // ...
    }
} 
```

很简单。

# backbone.js - strophe.roster（backbone-xmpp 库）和 Strophe.muc 插件冲突

> ID：13662046
> 
> 赞同：1
> 
> 时间：2012-12-01T17:52:33.150
> 
> 标签：backbone.js, strophe

我使用 Strophe.muc 插件和主干 xmpp 的 strophe.roster 插件 ( [backbone-xmpp](https://github.com/ggozad/strophe.plugins) )，如果我同时使用两者，则存在节（有时）将不会由任何指定的处理程序处理。这是因为两个插件都侦听存在节并因此相互阻止吗？

如何将它们彼此隔离，以免它们发生碰撞？

# jquery - 使用jquery检测响应式设计的变化

> ID：13662048
> 
> 赞同：1
> 
> 时间：2012-12-01T17:52:40.637
> 
> 标签：jquery, responsive-design

我需要在支持宽、正常和窄宽度的响应式设计中绕过一些 javascript 代码。在“宽”模式下，我需要绕过代码。我可以写这样的东西：

```
if ($('#page').width() < 1237) {
   ... do the animation stuff
} 
```

有没有更好的方法来避免硬编码像素宽度？

我在想，当调整窗口大小时，我可以将一个类应用于 body 元素......就像：

```
if (width >= 1237) {
    $('body').removeClass('layout-normal').removeClass('layout-ipad').addClass('layout-wide');
}
else if (width >= 980) {
    $('body').removeClass('layout-wide').removeClass('layout-ipad').addClass('layout-normal');
}
else {
    $('body').removeClass('layout-wide').removeClass('layout-normal').addClass('layout-ipad');
} 
```

这将允许我将硬编码的宽度隔离为单个函数，然后我可以编写：

```
 if (!$('#page').hasClass('layout-wide') {
       ... do the animation stuff
    } 
```

但是有没有办法完全避免硬编码像素宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T19:20:00.570

这是我想出的……我的方法是将类应用于特定于每个支持的布局宽度的 body 元素。如果存在媒体查询，我只想应用这些类，所以首先我检查浏览器是否支持它们。这是讨论该问题的线程：

[我需要一种简单的方法来使用 jquery 检测 CSS3 媒体查询支持](https://stackoverflow.com/questions/13665697/i-need-an-easy-way-to-detect-css3-media-query-support-using-jquery)

不幸的是，在这个解决方案中，我需要对我支持的宽度进行硬编码。如果有更好的方法可以做到这一点，请随时发布。目前，这是为了快速获得结果而做出的一个小小的权衡。

这是CSS：

```
/* Add to your main CSS file - used to test for media query support */
@media all and (min-width:1px) {
    .mediatest {position:absolute}
} 
```

这是JavaScript：

```
var $globals = {
    mediaQuerySupport: false
};

function initMediaQueries () {
    // tests for media query support and if it exists, it applies classes to the body element on window resize
    $globals.mediaQuerySupport = false;

    /*
    test if the browser knows about media queries
    create a div, apply the test class, test to see if the computed style is absolute... then delete the div
    */
    var d = document.createElement('div');
    d.className = "mediatest"; // found in main css file
    document.body.appendChild(d);
    if( window.getComputedStyle && window.getComputedStyle(d).position == "absolute") {
        $globals.mediaQuerySupport = true;
    }
    document.body.removeChild(d);

    if ($globals.mediaQuerySupport) {
        // apply a class to the body element now and when window resizes
        setBodyLayout ();
        $(window).resize(function () {
            setBodyLayout();
        });
    }
} // initMediaQueries ()

function mediaQueriesEnabled () {
    return ($globals.mediaQuerySupport);
}

function setBodyLayout () {
    // hard-coded widths for the supported media query layouts - change to your needs
    var width = $(window).width();
    if (width >= 1237) {
        $('body').removeClass('layout-normal').removeClass('layout-ipad').addClass('layout-wide');
    }
    else if (width >= 980) {
        $('body').removeClass('layout-wide').removeClass('layout-ipad').addClass('layout-normal');
    }
    else { // if narrower than 980, its the most narrow width
        $('body').removeClass('layout-wide').removeClass('layout-normal').addClass('layout-ipad');
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T13:46:41.043

这篇文章正是你要找的： [http ://www.xurei-design.be/2013/10/how-to-accurately-detect-responsive-breakpoints/](http://www.xurei-design.be/2013/10/how-to-accurately-detect-responsive-breakpoints/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:59:32.570

> 但是有没有办法完全避免硬编码像素宽度？

媒体查询是最好的方法

```
@media (max-width:767px) {
  .class{}
} 
```

# delphi - TeeChart 快速绘图

> ID：13662051
> 
> 赞同：1
> 
> 时间：2012-12-01T17:53:13.010
> 
> 标签：delphi, teechart

我正在阅读《TeeChart VCL 中的实时图表：添加大量点的另一种方法是使用直接动态数组》，并想问如何跳过 X 轴缓冲区（节省浪费的内存空间），同时它简单包含一个简单的基数 1....n = Num 点序列。而 Num 将位于 > 1 mio 区域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:50:24.553

我认为避免需要 XValues 数组的最简单方法是使用 TCustomTeeFunction，如下例所示：

```
var Series1: TFastLineSeries;
    CustFunci: TCustomTeeFunction;
    MyValues: array of double;

procedure TForm1.FormCreate(Sender: TObject);
var i, nValues: Integer;
begin
  //data
  nValues:=10000;
  SetLength(MyValues, nValues);
  MyValues[0]:=Random(10000);
  for i:=Low(MyValues)+1 to High(MyValues) do
    MyValues[i]:=MyValues[i-1]+Random(10)-4.5;

  //chart
  Chart1.View3D:=false;
  Chart1.Legend.Visible:=false;

  Series1:=Chart1.AddSeries(TFastLineSeries) as TFastLineSeries;

  CustFunci:=TCustomTeeFunction.Create(Self);
  Series1.FunctionType:=CustFunci;
  CustFunci.NumPoints:=nValues;
  CustFunci.OnCalculate:=CustFunciCalculate;
  CustFunci.ReCalculate;
end;

procedure TForm1.CustFunciCalculate(Sender:TCustomTeeFunction; const x:Double; var y:Double);
begin
  y:=MyValues[Round(x)];
end; 
```

# visual-studio-2010 - Visual Studio 2012 - Web.config 在 IIS Express 8 中无效

> ID：13662052
> 
> 赞同：4
> 
> 时间：2012-12-01T17:53:17.300
> 
> 标签：visual-studio-2010, visual-studio-2012, iis-express, iis-8

为了支持在 IIS 7 上安装，我在 web.config 中添加了以下内容：

```
<system.webServer>
  <staticContent>
    <mimeMap fileExtension=".mp4" mimeType="video/mp4" />
  </staticContent>
</system.webServer> 
```

这在 IIS7（和 express）中运行良好，因为默认情况下不包含 .mp4。现在我正在尝试使用 IIS8 Express 在 VS2012 下运行解决方案，没有提供静态内容，而是出现一个错误，即`<staticContent>`.mp4 已经有一个 mimeMap 无效。

如何在仍然保留 IIS7 安装的映射的同时更正此问题？如果我能提供帮助，我宁愿不需要新的项目配置。

编辑：这实际上是现在 VS2010 中的一个问题，因为它看起来像 IIS8 Express 完全取代了 IIS7 Express。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T21:03:32.637

可能有更好的方法来做到这一点，但我所做的是进入 IIS Express 正在使用的 applicationhost.config 文件，并找到并注释掉 mimeMap 设置，如下所示：

```
<!--            <mimeMap fileExtension=".m4v" mimeType="video/mp4" /> -->
<!--            <mimeMap fileExtension=".mp4" mimeType="video/mp4" /> --> 
```

进行此更改后，您可以保留 web.config mimeMap 设置，它将在 IIS7 和 IIS8 Express 上运行。

如果您需要知道 IIS Express 正在使用哪个 applicationhost.config 文件，只需右键单击通知区域图标（任务栏右侧）中的 IISExpress 图标，然后单击“显示所有应用程序”，然后单击站点名称（不是您正在为其开发的站点的 URL），它将在下面显示有关该站点的详细信息，包括配置文件路径。抱歉，如果这看起来微不足道，我很难找到我的配置文件，因为它最终位于远程文件服务器上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-20T15:18:43.293

首先显式删除映射：

```
<system.webServer>
  <staticContent>
    **<remove fileExtension=".mp4" />**
    <mimeMap fileExtension=".mp4" mimeType="video/mp4" />
  </staticContent>
</system.webServer>
```

即使没有要删除的映射，这也有效。

# javascript - JavaScript 解析：JSON 到 Javascript 对象

> ID：13662057
> 
> 赞同：0
> 
> 时间：2012-12-01T17:53:32.433
> 
> 标签：javascript, json

嗨，我对 JavaScript 相当陌生，我对如何处理像下面这样的对象有点困惑。如何将其转换为数组 pt，其中每个条目都具有属性 selid x、y、z？

这是我在 Chrome 控制台中看到的： `Object {pt[2][y]: "1.3571934700012207", pt[0][selid]: "2", pt[0][z]: "0", pt[3][x]: "3.6684491634368896", pt[2][z]: "0"…}`

如果我试图访问 pt ，如下例所示：

```
var X = pt[2].x; 
```

我得到并错误“无法读取未定义的属性”。我认为这是因为该对象更像是一个字典，其中“pt[2][y]”作为键，“1.3571934700012207”作为值。但是我想像数组 pt 一样访问它，其中的对象具有属性 x，y，z，selid。有没有办法将数据转换/解析成我想要的格式？提前非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T18:26:45.723

您在评论中说您这样做是`console.log(data)`为了获取 obj 内容。所以可能你应该做

```
var X = data["pt[2][x]"]; 
```

如果要将其转换为数组 pt 你应该这样做：

```
var data = {
    "pt[0][x]" : 1, 
    "pt[1][x]" : 2, 
    "pt[2][y]" : 3, 
    "pt[2][z]" : 3
};

var pattern = /^pt\[([^\]]+)\]\[([^\]]+)\]$/i ;

var pt = [];
for( var key in data ){

    if ( pattern.test(key) ){
        var m = key.match(pattern);
        if( !pt[m[1]] ) pt[m[1]] = {};
        pt[m[1]][m[2]] = data[key];
    }
 }

alert(pt[0].x) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:58:47.160

这是非常难以理解的，所以我为此道歉。

但你可以试试这个：

```
var v = {pt:new Array()};
for(var a in data) eval("if(!v." + /pt\[\d+\]/.exec(a) + ") v." + /pt\[\d+\]/.exec(a) + " = {}; v." + a.replace(/\]\[/,"][\"").replace(/\]$/,"\"]") + " = " + data[a]); 
```

那么 v 应该有你想要的。

（它只是创建/执行以下代码行：

```
if(!v.pt[2]) v.pt[2] = {}; v.pt[2]["y"] = 1.3571934700012207
if(!v.pt[0]) v.pt[0] = {}; v.pt[0]["selid"] = 2
if(!v.pt[0]) v.pt[0] = {}; v.pt[0]["z"] = 0
if(!v.pt[3]) v.pt[3] = {}; v.pt[3]["x"] = 3.6684491634368896
if(!v.pt[2]) v.pt[2] = {}; v.pt[2]["z"] = 0 
```

)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T19:36:22.293

答案已被选中，但这里是原始请求格式的 JSON 表示法

```
var pt=[
  {x:0,y:1,z:2,strid:"string"},
  {x:5,y:5,z:5,strid:"string2"}
]; 
```

所以现在你可以做你的循环，比如：

```
for(i=0;i<pt.length,i++){
  alert("x is:"+pt[i].x+" y is:"+pt[i].y+
       " z is:"+pt[i].z+" strid is:"+pt[i+].strid)
} 
```

# html - CSS - 无法更改表格宽度

> ID：13662060
> 
> 赞同：2
> 
> 时间：2012-12-01T17:54:04.913
> 
> 标签：html, css, html-table, width

请参考我的网站：[http ://ballsohard.co.uk/fishfilet/](http://ballsohard.co.uk/fishfilet/)

使用页面顶部的登录部分输入您想要的任何输入。

点击收件箱按钮（它是黄色的）

我希望表格（id：“inboxtab”）具有横跨内容区域的宽度。我试图通过将表格宽度设置为 100% 来做到这一点，但它没有效果。

```
#inboxtab   {
margin-left:20px;
margin-top:11px;
display: none;     (ignore this line)
width: 100%;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T17:57:20.303

我用萤火虫检查了你的页面，发现表格有一个内联样式声明`display: inline;`：：

```
<table id="inboxtab" style="display: inline;">
    <!-- This is your table -->
</table> 
```

*不能在inline elements*上设置`width`属性。因此，您必须删除此声明。

# python - python中内置dat类型的运算符重载

> ID：13662068
> 
> 赞同：0
> 
> 时间：2012-12-01T17:54:38.867
> 
> 标签：python, python-2.7

我正在尝试使用按位“和”和其他一些运算符来`c_uint32`在 python 中输入数据。

我收到以下错误：

```
TypeError: unsupported operand type(s) for &: 'c_uint' and 'c_uint' 
```

我相信我收到此错误是因为python 库`&`不支持Bitwise 。`c_uint`

有什么方法可以将任何重载运算符添加到内置数据类型中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T17:56:33.100

`c_uint32`数据类型仅用于与 ac 库进行通信。它应该只用于在边界进行转换，也就是您进行通信的位置。

因此，对于按位运算，首先将类型转换为原生 Python 类型，例如 python `int`。提取快速位掩码操作的值并不难：

```
c_uint32(c_uint32_value1.value & c_uint32_value2.value) 
```

# linux - 在 pppd 连接时向 USB 3G 调制解调器发送 AT 命令

> ID：13662069
> 
> 赞同：1
> 
> 时间：2012-12-01T17:54:40.207
> 
> 标签：linux, usb, 3g, modem, pppd

我知道 USB 3G 调制解调器不是通过一个串行端口连接到计算机的，其中一个用于诊断以及发送 AT 命令和接收答案。

我在 linux 下寻找 C/++ 库，它普遍支持许多 USB 3G 调制解调器，并让我有可能在通过 pppd 连接时向调制解调器发送 AT 命令。

如果此库不存在，我会寻找描述创建规则和使用此串行端口的标准。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:34:52.483

`/dev`这些天来， （例如）中的特殊字符设备文件`/dev/ttyUSB0`是在运行时创建的。您可以设置一个`udev`匹配调制解调器 ID 的规则，以建立某种可靠的持久符号链接。如果您确保不会以错误的方式进行干扰，您应该能够使用标准/调用`pppd`编写属于设备的特殊文件（当然，除非它被锁定）。`open()``write()`

# python - python获取实例变量最佳实践

> ID：13662080
> 
> 赞同：1
> 
> 时间：2012-12-01T17:55:55.183
> 
> 标签：python

我想知道应该如何访问 python 类中的实例变量。我应该为每个实例变量创建一个方法还是应该直接访问它们？

这是一个例子：

```
class Example(object):

    def __init__(self):
        self.x = 5

    def getX(self):
        return self.x

    def addYtoX(self, y):
        return self.x + y # OR: return self.getX() + y 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T17:57:24.723

大多数情况下，只需直接访问它们。Python[不是Java](http://dirtsimple.org/2004/12/python-is-not-java.html)*。[*_*](http://dirtsimple.org/2004/12/python-is-not-java.html)*

 *```
class Example(object):
    def __init__(self):
        self.x = 5

    def addYtoX(self, y):
        return self.x + y 
```

在 Java 中，您必须使用 getter 和 setter，因为您以后无法改变主意并将公共字段更改为 getter 和 setter。在python中，你可以，所以在你有实际需要之前不要使用getter和setter。然后你改用a [`property`](http://docs.python.org/2/library/functions.html#property)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:03:59.057

如果没有理由提供任何形式的检查，那么 Python 允许您直接添加/删除/设置值

```
class A(object):
    def __init__(self):
        self.some_var = 5

a = A()
a.other_var = 6

print a.some_var
a.some_var = 123456
del a.some_var 
```

ETC...

否则，您可以使用 setter/getter（但前提是您的设计证明了它的合理性）：

```
class A(object):
    def __init__(self):
         self._some_var = 5 # note the _
    @property
    def some_var(self):
        return self._some_var

    @some_var.setter
    def some_var(self, val):
        if val > 5:
            self._some_var = val
        else:
            print 'Nope - can not do that!' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T18:16:36.260

保持简单，直接访问`x`。如果在以后的某个时间，您决定需要封装`x`、进行类型/值检查等，那么您可以将其转换为[属性属性](http://docs.python.org/2/library/functions.html#property)，这样您就可以定义 get/set 方法而无需更改任何您现有的客户端代码。*

# javascript - JavaScript：如何知道与共享工作者的连接是否仍然存在？

> ID：13662089
> 
> 赞同：33
> 
> 时间：2012-12-01T17:56:29.693
> 
> 标签：javascript, html, web-applications, webkit, web-worker

我正在尝试使用共享工作者来维护 Web 应用程序的所有窗口/选项卡的列表。因此使用以下代码：

```
//lives in shared-worker.js
var connections=[];//this represents the list of all windows/tabs
onconnect=function(e){
  connections.push(e.ports[0]);
}; 
```

每次创建窗口时，都会与工作人员建立连接，`shared-worker.js`工作人员将与窗口的连接添加到`connections`列表中。

当用户关闭一个窗口时，它与共享工作者的连接到期，应该从`connections`变量中删除。但我没有找到任何可靠的方法来做到这一点。

查看[规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/workers.html)，变量的对象`connections`似乎没有属性/函数来检查连接是否仍然存在。

可能吗？
同样，总体目标是拥有所有窗口/选项卡的列表。

**编辑：**一种方法是让共享工作者向窗口发送消息并期待回复。如果共享工作者没有收到回复，那么它将假定窗口已关闭。在我的实验中，这种方法并不可靠。问题是无法判断窗口是关闭还是需要很长时间才能回复。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-10-10T05:14:13.840

这仅与 beforeunload 一样可靠，但似乎有效（在 Firefox 和 Chrome 中测试）。我绝对喜欢它而不是投票解决方案。

```
// Tell the SharedWorker we're closing
addEventListener( 'beforeunload', function()
{
    port.postMessage( {command:'closing'} );
}); 
```

然后在 SharedWorker 中处理端口对象的清理。

```
e.ports[0].onmessage = function( e )
{
    const port = this,
    data = e.data;

    switch( data.command )
    {
        // Tab closed, remove port
        case 'closing': myConnections.splice( myConnections.indexOf( port ), 1 );
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-03T07:11:23.030

我整个星期都在文档中深入研究同一个问题。

问题是 MessagePort 规范。坏消息是它没有错误处理，也没有标志、方法或事件来确定它是否已关闭。

好消息是我已经创建了一个可行的解决方案，但它有很多代码。

请记住，即使在支持的浏览器中，活动的处理方式也不同。例如，如果您尝试发送消息或关闭关闭的端口，Opera 将抛出错误。坏消息是您必须使用 try-catch 来处理错误，好消息是您可以使用该反馈来关闭至少一侧的端口。

Chrome 和 Safari 静默失败，没有任何反馈，也无法结束无效对象。

* * *

我的解决方案涉及交付确认或自定义“回调”方法。您使用 setTimeout 并将其 ID 与您的命令一起传递给 SharedWorker，并在处理命令之前发送回确认以取消超时。该超时通常与 closeConnection() 方法挂钩。

这采用了一种被动的方法而不是先发制人的方法，最初我尝试使用 TCP/IP 协议模型，但涉及创建更多函数来处理每个进程。

* * *

以一些伪代码为例：

## 客户/标签代码：

```
function customClose() {
    try {
        worker.port.close();
    } catch (err) { /* For Opera */ }
}
function send() {
    try {
        worker.port.postMessage({command: "doSomething", content: "some Data", id: setTimeout(function() { customClose(); ); }, 1000);
    } catch (err) { /* For Opera */ }
} 
```

## 线程/工作者代码：

```
function respond(p, d) {
    p.postMessage({ command: "confirmation", id: d.id });
}
function message(e) {// Attached to all ports onmessage
    if (e.data.id) respond(this, e.data);
    if (e.data.command) e.data.command(p, e.data);// Execute command if it exists passing context and content
} 
```

我在这里放置了一个完整的演示： [http ://www.cdelorme.com/SharedWorker/](http://www.cdelorme.com/SharedWorker/)

我是堆栈溢出的新手，所以我不熟悉他们如何处理大型代码帖子，但我的完整解决方案是两个 150 行文件。

* * *

仅使用交付确认并不完美，因此我通过添加其他组件来改进它。

特别是我正在为一个 ChatBox 系统进行调查，所以我想使用 EventSource (SSE)、XHR 和 WebSockets，据说 SharedWorker 对象中只支持 XHR，如果我想让 SharedWorker 完成所有服务器，这会产生限制沟通。

另外，因为它需要在没有 SharedWorker 支持的浏览器上工作，所以我会在 SharedWorker 中创建长时间的重复处理，这没有多大意义。

所以最后，如果我实现 SharedWorker，它将仅作为打开选项卡的通信渠道，其中一个选项卡将是控制选项卡。

如果控制选项卡关闭，SharedWorker 不会知道，所以我在 SharedWorker 中添加了一个 setInterval，每隔几秒向所有打开的端口发送一个空响应请求。这允许 Chrome 和 Safari 在未处理任何消息时消除关闭的连接，并允许更改控制选项卡。

然而，这也意味着如果 SharedWorker 进程死了，选项卡必须有一个间隔，以便每隔一段时间使用相同的方法与 SharedWorker 签入，从而允许它们使用每个选项卡都固有的后备方法。其他浏览器使用相同的代码。

* * *

因此，正如您所看到的交付确认回调的组合，必须从两端使用 setTimeout 和 setInterval 以保持连接的知识。它可以做到，但它是一个巨大的痛苦在后方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T18:36:16.323

`PortCollection`会派上用场，但似乎没有在任何浏览器中实现。

> 它充当 MessagePort 对象的不透明数组，因此允许在对象不再相关时对其进行垃圾收集，同时仍允许脚本遍历 MessagePort 对象。

资源; [http://www.whatwg.org/specs/web-apps/current-work/multipage/web-messaging.html#portcollection](http://www.whatwg.org/specs/web-apps/current-work/multipage/web-messaging.html#portcollection)

编辑; 刚刚为 Chrome 提出了一个问题；[http://crbug.com/263356](http://crbug.com/263356)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-23T14:23:27.360

...如何使用您在编辑中建议的方法，即使用保活 ping，但是：

**就在关闭任何无响应的连接之前，通过它发送“请重新连接”消息，这样如果一个窗口没有真正关闭，只是忙，它会知道它必须重新连接？**

根据@Adria 的解决方案，这种技术可能应该与从窗口 onunload 事件发送明确的“我现在正在关闭”消息相结合，以便有效地处理正常的窗口终止并且没有任何延迟。

这仍然*有点*不可靠，因为非常繁忙的窗口可能会暂时从 SharedWorker 的列表中删除，然后再重新连接......但实际上我看不出你能做得更好：考虑一下如果一个窗口挂起，实际上来说这与它无限期地“忙碌”很长一段时间没有区别，所以你不能真正抓住一个而不抓住另一个（无论如何，在任何有限的时间内）。

根据您的应用程序，让非常繁忙的窗口暂时被除名可能是也可能不是一个大问题。

请注意，保持活动的 ping 应从 SharedWorker 发送到 windows，然后应响应：如果您尝试在 windows 中简单地使用 setTimout()，您会遇到*后台*windows 上的 setTimeout() 可能会延迟很长时间的问题（我相信在当前浏览器上最多 1 秒），而 SharedWorker 的 setTimeout()s 应该按计划运行（给或需要几毫秒），空闲的背景窗口将唤醒并立即响应发布的 SharedWorker 消息。

* * *

这是该技术的一个简洁的小演示，即：

1.  为每个窗口分配一个唯一的数字 ID
2.  跟踪单个“活动”窗口
3.  跟踪当前窗口 ID 的列表和总数
4.  始终让所有窗口了解上述所有情况

**sharedworker.html**

```
<!doctype html>
<head>
  <title>Shared Worker Test</title>
  <script type="text/javascript" src="sharedworker-host.js" async></script>
  <script>
    function windowConnected(init){ if (init) { document.title = "#"+thisWindowID; document.getElementById("idSpan").textContent = thisWindowID; } document.body.style.backgroundColor = "lightgreen"; }
    function windowDisconnected(){ document.title = "#"+thisWindowID; document.body.style.backgroundColor = "grey"; }
    function activeWindowChanged(){ document.getElementById("activeSpan").textContent = activeWindowID; document.title = "#"+thisWindowID+(windowIsActive?" [ACTIVE]":""); document.body.style.backgroundColor = (windowIsActive?"pink":"lightgreen"); }
    function windowCountChanged(){ document.getElementById("countSpan").textContent = windowCount; }
    function windowListChanged(){ document.getElementById("listSpan").textContent = otherWindowIDList.join(", "); }
    function setActiveClick(){ if (setWindowActive) setWindowActive(); }
    function longOperationClick(){ var s = "", start = Date.now(); while (Date.now()<(start+10000)) { s += Math.sin(Math.random()*9999999).toString; s = s.substring(s.length>>>1); } return !!s; }
    window.addEventListener("unload",function(){window.isUnloading = true});
    window.addEventListener("DOMContentLoaded",function(){window.DOMContentLoadedDone = true});
  </script>
  <style>
    body {padding:40px}
    span {padding-left:40px;color:darkblue}
    input {margin:100px 60px}
  </style>
</head>
<body>
   This Window's ID: <span id="idSpan">???</span><br><br>
   Active Window ID: <span id="activeSpan">???</span><br><br>
   Window Count: <span id="countSpan">???</span><br><br>
   Other Window IDs: <span id="listSpan">???</span><br><br>
   <div>
     <input type="button" value="Set This Window Active" onclick="setActiveClick()">
     <input type="button" value="Perform 10-second blocking computation" onclick="longOperationClick()">
   </div>
</body>
</html> 
```

**sharedworker-host.js**

```
{ // this block is just to trap 'let' variables inside
  let port = (new SharedWorker("sharedworker.js")).port;
  var thisWindowID = 0, activeWindowID = 0, windowIsConnected = false, windowIsActive = false, windowCount = 0, otherWindowIDList = [];

  //function windowConnected(){}         //
  //function windowDisconnected(){}      //
  //function activeWindowChanged(){}     // do something when changes happen... these need to be implemented in another file (e.g. in the html in an inline <script> tag)
  //function windowCountChanged(){}      //
  //function windowListChanged(){}       //

  function setWindowActive() { if (thisWindowID) port.postMessage("setActive"); }
  function sortedArrayInsert(arr,val) { var a = 0, b = arr.length, m, v; if (!b) arr.push(val); else { while (a<b) if (arr[m = ((a+b)>>>1)]<val) a = m+1; else b = m; if (arr[a]!==val) arr.splice(a,0,val); }}
  function sortedArrayDelete(arr,val) { var a = 0, b = arr.length, m, v; if (b) { while (a<b) if (arr[m = ((a+b)>>>1)]<val) a = m+1; else b = m; if (arr[a]===val) arr.splice(a,1); }}

  let msgHandler = function(e)
  {
    var data = e.data, msg = data[0];
    if (!(windowIsConnected||(msg==="setID")||(msg==="disconnected"))) { windowIsConnected = true; windowConnected(false); }
    switch (msg)
    {
      case "ping": port.postMessage("pong"); break;
      case "setID": thisWindowID = data[1]; windowConnected(windowIsConnected = true); break;
      case "setActive": if (activeWindowID!==(activeWindowID = data[1])) { windowIsActive = (thisWindowID===activeWindowID); activeWindowChanged(); } break;
      case "disconnected": port.postMessage("pong"); windowIsConnected = windowIsActive = false; if (thisWindowID===activeWindowID) { activeWindowID = 0; activeWindowChanged(); } windowDisconnected(); break;
    // THE REST ARE OPTIONAL:
      case "windowCount": if (windowCount!==(windowCount = data[1])) windowCountChanged(); break;
      case "existing": otherWindowIDList = data[1].sort((a,b) => a-b); windowListChanged(); break;
      case "opened": sortedArrayInsert(otherWindowIDList,data[1]); windowListChanged(); break;
      case "closed": sortedArrayDelete(otherWindowIDList,data[1]); windowListChanged(); break;
    }
  };

  if (!window.isUnloading)
  {
    if (window.DOMContentLoadedDone) port.onmessage = msgHandler; else window.addEventListener("DOMContentLoaded",function(){port.onmessage = msgHandler});
    window.addEventListener("unload",function(){port.postMessage("close")});
  }
} 
```

**sharedworker.js**

```
// This shared worker:
// (a) Provides each window with a unique ID (note that this can change if a window reconnects due to an inactivity timeout)
// (b) Maintains a list and a count of open windows
// (c) Maintains a single "active" window, and keeps all connected windows apprised of which window that is
//
// It needs to RECEIVE simple string-only messages:
//   "close" - when a window is closing
//   "setActive" - when a window wants to be set to be the active window
//   "pong" (or in fact ANY message at all other than "close") - must be received as a reply to ["ping"], or within (2 x pingTimeout) milliseconds of the last recived message, or the window will be considered closed/crashed/hung
//
// It will SEND messages:
//   ["setID",<unique window ID>] - when a window connects, it will receive it's own unique ID via this message (this must be remembered by the window)
//   ["setActive",<active window ID>] - when a window connects or reconnects, or whenever the active window changes,  it will receive the ID of the "active" window via this message (it can compare to it's own ID to tell if it's the active window)
//   ["ping"] - a window sent this message should send back a "pong" message (or actually ANY message except "close") to confirm it's still alive
//   ["disconnected"] - when a window is disconnected due to a ping timeout, it'll recieve this message; assuming it hasn't closed it should immediately send a "pong", in order to reconnect.
// AND OPTIONALLY (REMOVE lines noted in comments to disable):
// IF EACH WINDOW NEEDS (ONLY) A RUNNING COUNT OF TOTAL CONNECTED WINDOWS:
//   ["windowCount",<count of connected windows>] - sent to a window on connection or reconnection, and whenever the window count changes
// OR ALTERNATIVELY, IF EACH WINDOW NEEDS A COMPLETE LIST OF THE IDs OF ALL OTHER WINDOWS:
//   ["existing",<array of existing window IDs>] - sent upon connectionor reconnection
//   ["opened",<ID of just-opened window>] - sent to all OTHER windows, when a window connects or reconnects
//   ["closed",<ID of closing window>] - sent to all OTHER windows, when a window disconnects (either because it explicitly sent a "close" message, or because it's been too long since its last message (> pingTimeout))

const pingTimeout = 1000;  // milliseconds
var count = 0, lastID = 0, activeID = 0, allPorts = {};

function handleMessage(e)
{
  var port = this, msg = e.data;
  if (port.pingTimeoutID) { clearTimeout(port.pingTimeoutID); port.pingTimeoutID = 0; }
  if (msg==="close") portClosed(port,false); else
  {
    if (!allPorts[port.uniqueID]) connectPort(port,false);  // reconnect disconnected port
    if (msg==="setActive") setActive(port.uniqueID);
    port.pingTimeoutID = setTimeout(function(){pingPort(port)},pingTimeout);
  }
}

function setActive(portID)  // if portID is 0, this actually sets the active port ID to the first port in allPorts{} if present (or 0 if no ports are connected)
{
  if (activeID!==portID)
  {
    activeID = portID;
    for(var pID in allPorts) if (allPorts.hasOwnProperty(pID)) allPorts[pID].postMessage(["setActive",(activeID||(activeID = +pID))]);
  }
}

function pingPort(port)
{
  port.postMessage(["ping"]);
  port.pingTimeoutID = setTimeout(function(){portClosed(port,true)},pingTimeout);
}

function portClosed(port,fromTimeout)
{
  var portID = port.uniqueID;
  if (fromTimeout) port.postMessage(["disconnected"]); else { clearTimeout(port.pingTimeoutID); port.close(); }
  port.pingTimeoutID = 0;
  if (allPorts[portID])
  {
    delete allPorts[portID];
    --count;
    if (activeID===portID) setActive(0);
    for(var pID in allPorts) if (allPorts.hasOwnProperty(pID)) allPorts[pID].postMessage(["closed",portID]);  // REMOVE if windows don't need a list of all other window IDs
    for(var pID in allPorts) if (allPorts.hasOwnProperty(pID)) allPorts[pID].postMessage(["windowCount",count]);  // REMOVE if change of window-count doesn't need to be broadcast to all windows
  }
}

function newConnection(e)
{
  var port = e.source;
  port.uniqueID = ++lastID;
  port.onmessage = handleMessage;
  connectPort(port,true);
}

function connectPort(port,initialConnection)
{
  var portID = port.uniqueID;
  port.postMessage(["existing",Object.keys(allPorts).map(x => +x)]);for(var pID in allPorts) if (allPorts.hasOwnProperty(pID)) allPorts[pID].postMessage(["opened",portID]);  // REMOVE if windows don't need a list of all other window IDs
  allPorts[portID] = port;
  ++count;
  for(var pID in allPorts) if (allPorts.hasOwnProperty(pID)) allPorts[pID].postMessage(["windowCount",count]);  // REMOVE if change of window-count doesn't need to be broadcast to all windows
  if (initialConnection) { port.postMessage(["setID",lastID]); port.pingTimeoutID = setTimeout(function(){pingPort(port)},pingTimeout); }
  if (!activeID) setActive(portID); else port.postMessage(["setActive",activeID]);
}

onconnect = newConnection; 
```

# ruby-on-rails-3 - 如何自定义 select_tag？

> ID：13662090
> 
> 赞同：1
> 
> 时间：2012-12-01T17:56:30.490
> 
> 标签：ruby-on-rails-3, haml, html-select

我想在 Rails 应用程序的 select_tag 中设置背景颜色

我当前的haml代码

```
= select_tag :color_id, options_from_collection_for_select(@colors, "id", "name") 
```

生成

```
<label for="car_color_id">Choose color!</label>
    <select id="color_id" name="color_id">
      <option value="1">White</option>
      <option value="2">Red</option>
      <option value="3">Green</option>
   </select> 
```

我想设置

```
<label for="car_color_id">Choose color!</label>
    <select id="color_id" name="color_id">
      <option value="1"><span style="background-color: #ffffff;">White</span></option>
      <option value="2"><span style="background-color: #ff0000;">Red</span></option>
      <option value="3"><span style="background-color: #00ff00;">Green</span></option>
   </select> 
```

我的数据库中的十六进制标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T11:24:17.330

按照您的建议，使用这个生成输出：

```
= select_tag :color_id, options_from_collection_for_select('<span style="background-color: {#@colors};">{#@colors}</span>', "id", "name") 
```

或者

```
= select_tag :color_id, options_from_collection_for_select('<span style="background-color: '+@colors+';">'+@colors+'</span>', "id", "name") 
```

# c++ - 对模板使用多态性

> ID：13662094
> 
> 赞同：2
> 
> 时间：2012-12-01T17:57:00.463
> 
> 标签：c++, templates, oop

使用模板时是否可以使用 PolyMorphism？

例如，我有一个名为“过滤器”的类，我有许多不同的数据过滤方式/类，因此我根据模板初始化一个对象（主要定义了哪种类型的过滤器）

```
#include "Filter1.h"
#include "Filter2.h"
template<typename T>
class Filters {

public:

    void Filter(vector<double> &vec) {

        T type;

        type.Filter(vec);
    }
};

// class Filter1
class Filter1 {
   public:

      void Filter(vector<double> &vec) {

         // Code for "Filter1"

      }
};

// MAIN

int main() {
   vector<double> sample; // this is a sample vector
   Filters<Filter1> exam1;
   exam1.filter(sample);
} 
```

但是，这会起作用，在“Filter2”中，假设我们传递了更多参数：

```
 class Filter2 {

  public:
     void Filter(vector<double> &vec, double point)
     {
         // Filter 2
     }        
 }; 
```

然后是主要的：

```
int main()
{
    vector<double> sample;
    double point = 9;

    Filters<Filter2> exam;
    exam.Filter(sample, point);
} 
```

这是行不通的，因为“过滤器”中的“过滤器”只接受 1 个参数。

我遇到的问题是过滤器接受的参数不同。例如，“Filter1”通过一个 2D 向量和一个 double 但此类中的 Filter 方法定义只接受一个 1D 向量。

我在想（理论上）我可以有一个 switch 语句（“T”）来提供初始化不同的类。

任何想法，将不胜感激 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:14:05.297

如果您依赖模板，另一种方法是将过滤器作为参数传递该模板。大多数过滤器都依赖于标准操作，如 + - /。因此，您可以在 Vector2D、Vector1D ... 类中重载该函数，并且您的过滤器函数将自动调用该方法。

希望这个对你有帮助 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:12:25.797

当您使用模板进行通用编程时，您需要针对接口进行编码。我在这里没有使用该术语的 OOP 含义——而是更广泛的含义。

例如，下面是一个针对 Random-Access Iterator 类似概念的接口进行编码的函数模板：

```
template<typename It>
typename std::iterator_traits<It>::value_type
sum(It first, It last)
{
    typedef typename std::iterator_traits<It>::difference_type diff_t;
    diff_t const size = last - first;

    typename std::iterator_traits<It>::value_type accum = 0;
    for(diff_t i = 0; i != size; ++i) {
        accum += first[i];
    }

    return accum;
} 
```

（这个例子当然是假的，这里的目的是展示多个 Random-Access Iterator 操作。）

因为我们在合约中指定了`It`一个随机访问迭代器，所以我们知道`sum`可以访问：

*   成员类型`std::iterator_traits<It>::value_type`和`std::iterator_traits<It>::difference_type`，它们是可以分别从 和 的结果初始化的`operator[]`类型`operator-`
*   `It`like`operator-`和上的操作`operator[]`，例如双向迭代器*不可*用

因此`sum`可以与`std::vector<int>::iterator`,`std::deque<double>::const_iterator`和一起使用`long*`，它们都是不同的类型，在某些方面可能不同，但至少是随机访问迭代器概念的所有模型。

（观察者会注意到，通过使用`0`and`+=`我们反过来在我们的合约中要求它`value_type`是一个类似算术的类型。这又是一个我们编码的接口！）

然后，在设计您`Filters`显然打算用作 as 的产品`Filters<FilterLike>`时，您需要问自己 a`FilterLike`需要满足的通用最小接口是什么。如果有一些`FilterX`几乎*是*`FilterLike`除了某些操作之外的，这里有一些选项：

*   正如您在问题中提到的那样，无论在何处`Filters`使用该特定操作，您都可以对其进行特殊处理，以便对其`FilterX`进行特殊处理——这可能是您能做的*最糟糕的事情。*这很脆弱，因为您必须在需要操作的每个站点都执行此操作（即使现在看起来只有一个，将来呢？）；不方便的是，您不能在类模板函数成员的函数体内打开类型（您必须使用冗长且不明显的不同技术）；它引入了`Filters`必须知道的耦合`FilterX`——它为什么要关心？

*   为 .写一个明确的特化`Filters<FilterX>`。这很像上面的，但是当`FilterX`不只是一个或两个操作不同时，这是一个有趣的选择。与之前的解决方案不同，这并不那么脆弱，因为主模板保持不变，所有`FilterX`特定的东西都放在同一个位置。另一方面，如果一半的`FilterX`行为已经像 a `Filter`，那么这一定意味着要么有一半的代码`Filters<FilterLike>`重复，要么需要一些额外的工作来重构和之间的公共`Filters<Filter>`代码`Filters<FilterX>`。因此，耦合量会有所不同——如果主模板不必知道这个显式特化，那么这是一个不错的选择，您甚至不必将显式特化与主模板捆绑在一起

*   编写一个接口`AdaptedFilterX`模型，`FilterLike`并将其所有操作转发给底层`FilterX`。如果你有几个`FilterX`，`FilterY`几乎都是模型`Filter`但有一个共同的接口，你可以写一个`AdaptedFilter<FilterX>`——从某种意义上说，`AdaptedFilter`模板将 a 的模型“转换”`FilterXLike`为 a 的模型`FilterLike`

顺便说一句，如果您使用的是 C++11，您可以编写`Filter`接受任意参数来构造 a `FilterLike`：

```
template<typename... Args>
void Filter(Args&&... args)
{
    FilterLike filter(std::forward<Args>(args)...);
    // go on using filter...
} 
```

接受一个`FilterLike`虽然可能更简单（并且适用于C ++ 03）：

```
void Filter(FilterLike filter)
{
   // go on using filter...
} 
```

# javascript - 在JS中获取字符串长度

> ID：13662095
> 
> 赞同：1
> 
> 时间：2012-12-01T17:57:04.797
> 
> 标签：javascript

这是我的html代码[代码](http://pastebin.com/fEryHwv2)！但是 JS 不工作我尝试了一些东西，但如果它小于 2，我无法获得弹出窗口

```
<script>
    function Check(name) {
        if (name.length < 2)
           alert("פחות משני תווים בשם");
    }
</script>

<input 
  id="Text1" 
  name="Text1" 
  type="text" 
  value="שם פרטי" 
  onmouseover="value=''" 
  onclick="Check();" 
/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T17:59:10.060

你还没有完全正确地连接你的功能。您需要向它传递一个值。在`onclick`事件的上下文中，`this`指的是`input`元素本身，它的值可以通过`this.value`. 您需要将该值传递给您的`Check()`函数：

```
<input id="Text1" name="Text1" type="text" value="שם פרטי" 
    onmouseover="this.value=''" onclick="Check(this.value);" /> 
```

同样，您应该将值设置为空，`this.value='value'`因为我也在您的代码中进行了调整。我不知道您对`mouseover`事件的意图是什么，但是这种事件组合只有在用户的光标从不离开文本框的情况下才有效，这对于许多用户来说肯定是违反直觉的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:58:28.867

您应该将参数传递给您的函数：

```
<input id="Text1" name="Text1" type="text" value="שם פרטי" onmouseover="value=''" onclick="Check(this.value);" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T17:59:47.343

尝试将参数传递给您的函数：-

```
Check(this.value); 
```

喜欢

```
<input id="Text1" name="Text1" type="text" value="שם פרטי" onmouseover="value=''" onclick="Check(document.getElementById('Text1').value);" /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T18:01:24.367

您可以通过 check(this) 然后它将获取该文本字段的值。

# view - sqlite3 table_info 用于视图。该列来自哪个表？

> ID：13662099
> 
> 赞同：1
> 
> 时间：2012-12-01T17:57:31.130
> 
> 标签：view, sqlite, schema

当我运行时：

```
PRAGMA table_info(myView) 
```

它给了我一个列表，类似于：

```
0|cardSet|CHAR(255)|0||0
1|multiverseId|整数|0||0
2|cardSetId|整数|0||0
3|名称|CHAR(255)|0||0
4|类型|CHAR(16)|0||0
5|成本|nvarchar(16)|0||0
6|颜色|nvarchar(16)|0||0
7|稀有度|nvarchar(16)|0||0

```

但是从此我没有关于这些列实际在哪个表中的详细信息。我正在考虑使用正则表达式来尝试解决这个问题，但想知道是否有人知道替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:38:51.987

可能有来自多个表的列，或者根本不来自任何表：

```
CREATE VIEW example AS
SELECT a.a1, b.b1, a.a2 + b.b2 AS both, 42 AS neither FROM a, b; 
```

在任何情况下，SQLite 都不会存储这些信息以便可以直接访问它。您可以阅读的只是原始视图定义：

```
SELECT sql FROM sqlite_master WHERE type = 'view' AND name = 'myView' 
```

# iphone - 在 ios 6 上发送没有 MFMessgeViewController 的短信

> ID：13662105
> 
> 赞同：2
> 
> 时间：2012-12-01T17:58:05.410
> 
> 标签：iphone, objective-c, ios6

任何人都不能以编程方式发送短信。`iOS6`早些时候我使用核心电话方法发送短信。它工作正常，`iOS5`但`iOS6`我的代码不起作用。我使用以下代码：

BOOL 成功 = [[CTMessageCenter sharedMessageCenter] sendSMSWithText:@"Message" serviceCenter:nil toAddress:@"8800781656"];

我究竟做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:50:17.000

我会做出一个有根据的猜测，Apple 已经在他们的 API 中关闭了一个漏洞。他们不希望应用程序在用户不知情的情况下在后台发送 SMS 消息。在某些移动网络上，每条 SMS 消息都要花钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T11:16:34.663

```
// in .m file
-(void)textClicked

{

 controller = [[MFMessageComposeViewController alloc] init];

 if([MFMessageComposeViewController canSendText])

    {

       controller.body = @"Whatever you want";

   controller.recipients = [NSArray arrayWithObjects:@"", nil];

       controller.messageComposeDelegate = self;

       [self presentViewController:controller animated:YES completion:nil];
      }

   }

  - (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result

  {

  UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"MyApp" message:@"Unknown Error"
                                               delegate:self cancelButtonTitle:@"OK" otherButtonTitles: nil];

switch (result) {
    case MessageComposeResultCancelled:
        NSLog(@"Cancelled");
        [alert show];
        break;
    case MessageComposeResultFailed:
        [alert show];

        break;
    case MessageComposeResultSent:

        break;
    default:
        break;
  }

[self dismissViewControllerAnimated:YES completion:nil];
    }

// in .h file

 import MessageUI/MessageUI.h
 and delegate for Sending Message is  MFMessageComposeViewControllerDelegate 
```

希望对你有帮助。

# sitecore - Sitecore：如何在客户端语言选择中添加新语言？

> ID：13662106
> 
> 赞同：2
> 
> 时间：2012-12-01T17:58:06.700
> 
> 标签：sitecore, sitecore6

在用户管理器中，您可以定义客户端语言和内容语言。

1.  客户端语言和内容语言有什么区别？
2.  如果您需要检查用户语言以发送一些时事通讯或以他们自己的语言可视化网站，可以使用哪种语言？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:12:34.717

1.  客户端语言用于 Sitecore 客户端中所有文本的语言，例如功能区中的命令名称。内容语言是用户登录 Sitecore 客户端时的默认语言。用户编辑或创建新 Sitecore 项目时使用的默认语言。

2.  内容语言是在网络或时事通讯中可视化内容时需要检查的语言。

# wordpress - 保护多站点上的单个子域

> ID：13662107
> 
> 赞同：2
> 
> 时间：2012-12-01T17:58:09.137
> 
> 标签：wordpress, apache, .htaccess, password-protection

我有一个运行子域和域映射的 Wordpress 多站点。

域配置为 Serveralias。

```
ServerAlias *.domain1.tld *.domain2.tld *.domain3.tld 
```

基本上我正在尝试帮助使用新模板并希望

```
dev.domain.tld 
```

只能通过身份验证访问

通常我会使用类似的东西：

```
AuthUserFile /var/www/vhosts/domain.tld/httpdocs/.htpasswd
AuthGroupFile /dev/null
AuthName "Area 51"
AuthType Basic

<limit GET POST>
    require valid-user
</limit>

<Files *>
    Order allow,deny
    Allow from all
    Satisfy any
</Files> 
```

但这将同时保护所有（子）域。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T02:17:16.590

您可以尝试设置一个变量检查**​​主机**头字段，如果主机不是 dev.domain.tld，则不进行身份验证：

```
SetenvIfNoCase Host dev.domain.tld devhost=yes

<limit GET POST>
    Satisfy Any
    require valid-user
    Allow from env=!devhost
</limit> 
```

这`Satisfy Any`使得无论是`require`或者`Allow`是足够好访问。如果`devhost`设置了 env，则`Allow`检查失败，获得访问权限的唯一方法是使用有效用户。

# java - 休眠配置mysql

> ID：13662113
> 
> 赞同：1
> 
> 时间：2012-12-01T17:58:43.737
> 
> 标签：java, mysql, hibernate, hibernate-mapping

您好我正在尝试使用 mysql 配置休眠。

我正在使用 Maven 和 IntelliJ 来获取我的依赖项。

我的休眠配置文件是

```
<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE hibernate-configuration PUBLIC
        "-//Hibernate/Hibernate Configuration DTD//EN"
        "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="connection.url">jdbc:mysql://localhost:3306/test</property>
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="connection.username">root</property>
        <property name="connection.password">SYS</property>
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="transaction.factory_class">org.hibernate.engine.transaction.internal.jdbc.JdbcTransactionFactory</property>
        <mapping resource="Person.hdm.xml"></mapping>
    </session-factory>
</hibernate-configuration> 
```

我有一个映射类 Person.hdm.xml

```
<hibernate-mapping>
    <class name="Person">

        <id name="FirstName"/>

    </class>
</hibernate-mapping> 
```

我得到以下堆栈..

```
222  [main] INFO  org.hibernate.cfg.Configuration  - HHH000221: Reading mappings from resource: hibernate.cfg.xml
Exception in thread "main" java.lang.ExceptionInInitializerError
    at Main.<clinit>(Main.java:24)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:113)
Caused by: java.lang.NoSuchFieldError: TRACE
    at org.jboss.logging.Log4jLogger.translate(Log4jLogger.java:64)
    at org.jboss.logging.Log4jLogger.isEnabled(Log4jLogger.java:39)
    at org.jboss.logging.Logger.logv(Logger.java:1953)
    at org.hibernate.internal.CoreMessageLogger_$logger.tracev(CoreMessageLogger_$logger.java:443)
    at org.hibernate.cfg.EJB3DTDEntityResolver.resolveEntity(EJB3DTDEntityResolver.java:58)
    at org.apache.xerces.util.EntityResolverWrapper.resolveEntity(Unknown Source)
    at org.apache.xerces.impl.XMLEntityManager.resolveEntity(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentScannerImpl$DTDDispatcher.dispatch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at org.dom4j.io.SAXReader.read(SAXReader.java:465)
    at org.hibernate.internal.util.xml.MappingReader.readMappingDocument(MappingReader.java:76)
    at org.hibernate.cfg.Configuration.add(Configuration.java:477)
    at org.hibernate.cfg.Configuration.add(Configuration.java:473)
    at org.hibernate.cfg.Configuration.add(Configuration.java:646)
    at org.hibernate.cfg.Configuration.addResource(Configuration.java:729)
    at Main.<clinit>(Main.java:22)
    ... 3 more 
```

非常感激任何的帮助，

谢谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:07:13.460

java.lang.NoSuchFieldError：“如果应用程序尝试访问或修改对象的指定字段，并且该对象不再具有该字段，则抛出该错误。”

Log4jLogger 看起来是罪魁祸首，我注意到它是 'org.jboss.logging' .. hibernate 期待不同的版本吗？看起来像一个特定于环境的记录器（即 Jboss，应用程序服务器），您是否在 JBoss 中运行它？

# codeigniter - 如何停止 http://builtwith.com/ 和其他识别我的 codeigniter 站点的服务

> ID：13662114
> 
> 赞同：1
> 
> 时间：2012-12-01T17:58:46.047
> 
> 标签：codeigniter

如何阻止[http://builtwith.com/](http://builtwith.com/)和其他类似服务将我的网站识别为使用 codeigniter 构建的？出于安全目的，我想隐藏它。我知道该网站是安全且经过测试的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T05:41:04.393

确保您没有使用任何`ci_`cookie/会话的默认前缀。对于分析这些东西的爬虫来说，任何带有前缀的东西`ci_`都将是一个致命的赠品。

据我所知，CodeIgniter 不会发送标识自身的特殊标头，因此这应该不是问题。

# java - 启动时找不到 LWJGL 库 (UnsatisfiedLinkError)

> ID：13662119
> 
> 赞同：0
> 
> 时间：2012-12-01T17:59:12.337
> 
> 标签：java, lwjgl

> **可能重复：**
> [当我运行 .jar 时，我收到“No lwjgl in java.library.path”错误](https://stackoverflow.com/questions/6588799/when-i-run-the-jar-i-get-a-no-lwjgl-in-java-library-path-error)

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: no lwjgl in java.library.path
    at java.lang.ClassLoader.loadLibrary(Unknown Source)
    at java.lang.Runtime.loadLibrary0(Unknown Source)
    at java.lang.System.loadLibrary(Unknown Source)
    at org.lwjgl.Sys$1.run(Sys.java:73)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.lwjgl.Sys.doLoadLibrary(Sys.java:66)
    at org.lwjgl.Sys.loadLibrary(Sys.java:95)
    at org.lwjgl.Sys.<clinit>(Sys.java:112)
    at org.lwjgl.opengl.Display.<clinit>(Display.java:132)
    at shitstartdisplay.gendisplay(shitstartdisplay.java:8)
    at shitstartdisplay.main(shitstartdisplay.java:29) 
```

Eclipse 说，语法是正确的，但是在运行程序后，它会显示上面的错误。帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:06:55.820

google 在搜索您收到的错误时发现的第一页是从官方文档到 lwjgl。

[http://www.lwjgl.org/wiki/index.php?title=Downloading_and_Setting_Up_LWJGL](http://www.lwjgl.org/wiki/index.php?title=Downloading_and_Setting_Up_LWJGL)

这个页面说：

**我不断收到 java.lang.UnsatisfiedLinkError: no lwjgl in java.library.path**

这是因为本机部分设置不正确。将 -Djava.library.path=path/to/dir 添加到命令行或作为 IDE 中的 VM 选项，以便 lwjgl 能够找到包含本机文件的文件夹。

# charts - JavaFX 2.x：LineChart 和翻译线

> ID：13662121
> 
> 赞同：1
> 
> 时间：2012-12-01T17:59:28.327
> 
> 标签：charts, line, javafx-2

我有这个类绘制一个 XYLineChart 和一条线：通过鼠标左键单击并拖动，图表向左/向右移动。

当我快速向左/向右（摇动）平移图表时，我的绘制线有时不再与 XYLineChart 相关。

无论我摇动图表的速度有多快，我都会将绘制的线始终与图表相关的位置。

如何解决这个问题？

这是我的代码

```
import javafx.application.Application; 
import javafx.beans.binding.DoubleBinding;
import javafx.beans.property.SimpleDoubleProperty;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.chart.LineChart;
import javafx.scene.chart.NumberAxis;
import javafx.scene.chart.XYChart;
import javafx.scene.input.MouseEvent;
import javafx.scene.layout.BorderPane;
import javafx.scene.shape.Line;
import javafx.stage.Stage;

public class GridMoveAndLine extends Application {

BorderPane pane;
Line       newLine;
XYChart.Series series1 = new XYChart.Series(); 

SimpleDoubleProperty rectinitX = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectX = new SimpleDoubleProperty(); 
SimpleDoubleProperty rectY = new SimpleDoubleProperty(); 

double oldXLowerBound = -1;
double oldXUpperBound = -1;
double oldYLowerBound = -1;
double oldYUpperBound = -1;

@Override 
public void start(Stage stage) { 

final NumberAxis xAxis = new NumberAxis(1, 12, 1); 
final NumberAxis yAxis = new NumberAxis(0.53000, 0.53910, 0.0005); 

xAxis.setAnimated(false);
yAxis.setAnimated(false);

yAxis.setTickLabelFormatter(new NumberAxis.DefaultFormatter(yAxis) { 

@Override 
public String toString(Number object) { 
    return String.format("%7.5f", object); 
} 
}); 

final LineChart<Number, Number> lineChart = new LineChart<Number, Number>(xAxis, yAxis); 

lineChart.setCreateSymbols(false); 
lineChart.setAlternativeRowFillVisible(false); 
lineChart.setAnimated(false); 
lineChart.setLegendVisible(false);

series1.getData().add(new XYChart.Data(1, 0.53185)); 
series1.getData().add(new XYChart.Data(2, 0.532235)); 
series1.getData().add(new XYChart.Data(3, 0.53234)); 
series1.getData().add(new XYChart.Data(4, 0.538765)); 
series1.getData().add(new XYChart.Data(5, 0.53442)); 
series1.getData().add(new XYChart.Data(6, 0.534658)); 
series1.getData().add(new XYChart.Data(7, 0.53023)); 
series1.getData().add(new XYChart.Data(8, 0.53001)); 
series1.getData().add(new XYChart.Data(9, 0.53589)); 
series1.getData().add(new XYChart.Data(10, 0.53476)); 

pane = new BorderPane(); 
pane.setCenter(lineChart); 
Scene scene = new Scene(pane, 800, 600); 
lineChart.getData().addAll(series1); 

stage.setScene(scene);         

scene.setOnMouseClicked(mouseHandler); 
scene.setOnMouseDragged(mouseHandler); 
scene.setOnMouseEntered(mouseHandler); 
scene.setOnMouseExited(mouseHandler); 
scene.setOnMouseMoved(mouseHandler); 
scene.setOnMousePressed(mouseHandler); 
scene.setOnMouseReleased(mouseHandler); 
stage.show();

newLine = new Line(260, 35, 390, 280);
pane.getChildren().add(newLine);

oldXLowerBound = xAxis.getLowerBound();
oldXUpperBound = xAxis.getUpperBound();

DoubleBinding LineXaxisBinding = new DoubleBinding() {
{                                
    super.bind(xAxis.lowerBoundProperty(), xAxis.upperBoundProperty(),     xAxis.widthProperty());
}
@Override
protected double computeValue() {
    double chartWidthX = xAxis.getWidth();
    double axisSpanX = xAxis.getUpperBound() - xAxis.getLowerBound();
    double displacementX = (chartWidthX / axisSpanX) * ( oldXLowerBound-  xAxis.getLowerBound()  );

    return (xAxis.getDisplayPosition(xAxis.getLowerBound())+displacementX);
}
};

newLine.translateXProperty().bind(LineXaxisBinding);
} 

EventHandler<MouseEvent> mouseHandler = new EventHandler<MouseEvent>() { 

@Override 
public void handle(MouseEvent mouseEvent) { 

if (mouseEvent.getEventType() == MouseEvent.MOUSE_PRESSED) {             
    rectinitX.set(mouseEvent.getX()); 
} 
else if (mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED ||     mouseEvent.getEventType() == MouseEvent.MOUSE_MOVED) { 
    LineChart<Number, Number> lineChart = (LineChart<Number, Number>) pane.getCenter(); 
    NumberAxis xAxis = (NumberAxis) lineChart.getXAxis(); 

    double Tgap = xAxis.getWidth()/(xAxis.getUpperBound() - xAxis.getLowerBound()); 
    double newXlower=xAxis.getLowerBound(), newXupper=xAxis.getUpperBound();             
    double Delta=0.3;

    if(mouseEvent.getEventType() == MouseEvent.MOUSE_DRAGGED){
    if(rectinitX.get() < mouseEvent.getX()){    
        newXlower=xAxis.getLowerBound()-Delta;
        newXupper=xAxis.getUpperBound()-Delta;
    }
else if(rectinitX.get() > mouseEvent.getX()){    
        newXlower=xAxis.getLowerBound()+Delta;
        newXupper=xAxis.getUpperBound()+Delta;
    }    
    xAxis.setLowerBound( newXlower ); 
    xAxis.setUpperBound( newXupper );                        
    }                                        
    rectinitX.set(mouseEvent.getX());                                 
 } 
 } 
 }; 
  public static void main(String[] args) {
    launch(args);
}
} 
```

# android - Listview和复选框（如何放入数据库（sqlite））

> ID：13662124
> 
> 赞同：2
> 
> 时间：2012-12-01T17:59:41.930
> 
> 标签：android, sqlite, listview, android-cursoradapter

我是 android 新手，正在开发一个软件，它将用户联系人显示为带有复选框的列表视图，如何根据是否选中将复选框数据插入数据库？

在我的数据库类中，我有一个函数用于将名称和数字添加到我的数据库中

```
createntry(String number,String name) // in my database class 
```

我真的试图找到答案并想出我应该为此使用 getview 函数，但仍然找不到解决方案。

我的 CursorAdapterClass

```
 public class ContactCursorAdapterCT extends CursorAdapter {
     private ArrayList<Boolean> itemChecked = new ArrayList<Boolean>();
     private Context context1;
     DataBaseBON dd1= new DataBaseBON(context1);
         public ContactCursorAdapterCT(Context context, Cursor c) {

    super(context, c);
    this.context1 = context;
    for (int i = 0; i < this.getCount(); i++) {
        itemChecked.add(i, false); // initializes all items value with false
    }

}

@Override
public void bindView(View view, Context context, Cursor cursor) {
      TextView name = (TextView)view.findViewById(R.id.contactlistTV1);      
          name.setText(cursor.getString
          (cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME)));
          TextView phone = (TextView)view.findViewById(R.id.contactlistTV2);                
           phone.setText(cursor.getString          
          (cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)));
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) { 
    LayoutInflater inflater = LayoutInflater.from(context);
    View v = inflater.inflate(R.layout.lvct, parent, false);
            bindView(v, context, cursor);
    return v;

}

public View getView(final int pos, View inView, ViewGroup parent) { //getView 

    if (inView == null) {
    LayoutInflater inflater = (LayoutInflater) context1
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    inView = inflater.inflate(R.layout.lvct, null);
    }

    final CheckBox cBox = (CheckBox)inView.findViewById(R.id.checkBox1); // my
    // CheckBox

    cBox.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            CheckBox cb = (CheckBox) v.findViewById(R.id.checkBox1);

            if (cb.isChecked()) {
                itemChecked.set(pos, true);

                      //My problem should be here??

            } else if (!cb.isChecked()) {
                itemChecked.set(pos, false);

            }
        }
    });
    cBox.setChecked(itemChecked.get(pos)); // this will Check or Uncheck the
    // CheckBox in ListView
    // according to their original
    // position and CheckBox never
    // loss his State when you
    // Scroll the List Items.
    return inView; 
```

我的活动课

```
 public class Contacts extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contacts);

    Cursor cursor = getContentResolver().query
            (ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null,null, null);
        startManagingCursor(cursor);
           ContactCursorAdapterCT adapter= new ContactCursorAdapterCT
           (Contacts.this, cursor);
       ListView contactLV = (ListView) findViewById(R.id.listviewblcontactsDB);
           contactLV.setAdapter(adapter); 
```

我的数据库类

```
 public long creatEntry(String inputnumber , String name) { // for add data   

    // TODO Auto-generated method stub
    ContentValues cv= new ContentValues();
    cv.put(KEY_NUMBER, inputnumber);
    cv.put(N_NAME, name);
    Log.v(inputnumber, "adding to Database");
    return ourdatabase.insert(DATABASE_TABLE, null, cv);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-04T07:19:46.243

这是允许使用 SQLite 数据库的简单 DBhelper 示例。它有必要的方法来添加新数据和更新保存的数据。

```
public class DBHelper extends SQLiteOpenHelper {

private static DBHelper instance;
private static final String DATABASE_NAME = "HangmanBase";
    private static final int DATABASE_VERSION = 2;
public static interface ITEM extends BaseColumns {
        String TABLE_NAME = "itemTable";
        String NAME = "itemName";
        String CHECK = "itemCheck";
    }
private static final String CREATE_TABLE = "CREATE TABLE IF NOT EXISTS ";
    private static final String DROP_TABLE = "DROP TABLE IF EXISTS ";
    private static final String UNIQUE = "UNIQUE ON CONFLICT ABORT";
private static final String CREATE_TABLE_ITEM = CREATE_TABLE + ITEM.TABLE_NAME + " (" + ITEM._ID
            + " INTEGER PRIMARY KEY, " + ITEM.NAME + " TEXT " + UNIQUE + ", " + ITEM.CHECK + " INTEGER);";
private DBHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
public static DBHelper getInstance(Context context) {
        if (instance == null) {
            instance = new DBHelper(context);
        }
        return instance;
    }
@Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_TABLE_ITEM);
    }
@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL(DROP_TABLE + ITEM.TABLE_NAME);
        onCreate(db);
    }
public long addWord(String name, boolean check) {
        ContentValues values = new ContentValues();
        values.put(ITEM.NAME, name);
        values.put(ITEM.CHECK, check);
        return getWritableDatabase().insert(ITEM.TABLE_NAME, null, values);
    }
public Cursor getAllItemCursor() {
        return getReadableDatabase().rawQuery("SELECT * FROM " + ITEM.TABLE_NAME, null);
    }
public void changeItemCheck(String itemName, boolean isChecked) {
        ContentValues values = new ContentValues();
        values.put(ITEM.CHECK, isChecked);
        getWritableDatabase().update(ITEM.TABLE_NAME, values, ITEM.NAME + " =? ", new String[] { itemName });
    }
} 
```

一个 ListView 的简单活动：

私有 ListView 项目列表；

私有 DBHelper dbHelper；

私有 CursorAdapter 适配器；

```
@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_cursor_list);
        itemList = (ListView)findViewById(R.id.item_list);
        dbHelper = DBHelper.getInstance(this);
        Cursor allItemCursor = dbHelper.getAllItemCursor();
        adapter = new ItemCursorAdapter(this, allItemCursor, true);
        itemList.setAdapter(adapter);
    }
} 
```

以及带有自定义 OnCheckedChangeListener 的 SimpleCursorAdapter 示例。也许它不是将检查更改保存到数据库的最佳方法：

```
public class ItemCursorAdapter extends CursorAdapter {

private final LayoutInflater inflater;
    private int itemNameIndex;
    private int itemCheckIndex;
    private DBHelper dbHelper;
public ItemCursorAdapter(Context context, Cursor cursor, boolean autoRequery) {
        super(context, cursor, autoRequery);
        inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        itemNameIndex = cursor.getColumnIndex(DBHelper.ITEM.NAME);
        itemCheckIndex = cursor.getColumnIndex(DBHelper.ITEM.CHECK);
        dbHelper = DBHelper.getInstance(context);
    }
public void bindView(View view, Context context, Cursor cursor) {
        String name = cursor.getString(itemNameIndex);
        boolean checked = cursor.getInt(itemCheckIndex) > 0;
        TextView nameTxt = (TextView) view.findViewById(R.id.item_name);
        CheckBox checkChk = (CheckBox) view.findViewById(R.id.item_check);
        checkChk.setOnCheckedChangeListener(new onItemCheckChangeListener(name));
        nameTxt.setText(name);
        checkChk.setChecked(checked);
    }
@Override
    public View newView(Context context, Cursor c, ViewGroup parent) {
        View view = inflater.inflate(R.layout.row_item, null);
        return view;
    }
private class onItemCheckChangeListener implements OnCheckedChangeListener {
private String itemName;
public onItemCheckChangeListener(String itemName) {
            this.itemName = itemName;
        }
@Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            dbHelper.changeItemCheck(itemName, isChecked);
        }
}
} 
```

# javascript - 如何使用 CouchDB 按年和月对条目进行分组？

> ID：13662127
> 
> 赞同：1
> 
> 时间：2012-12-01T17:59:57.750
> 
> 标签：javascript, json, couchdb, couchapp

下面的视图函数用于发出一些条目：

```
function(doc) {emit(null,{"date":doc.date,"title":doc.title,"txt":doc.txt});}

{"total_rows":7,"offset":0,"rows":[
{"id":"67ebe3755be4edf5c4edf0d96f0023eb","key":null,"value":{"date":"Dec 12,2012","title":"test1","txt":"this is just a test"}},
{"id":"67ebe3755be4edf5c4edf0d96f003120","key":null,"value":{"date":"Nov 11,2012","title":"test2","txt":"this is just a test2"}},
{"id":"67ebe3755be4edf5c4edf0d96f003869","key":null,"value":{"date":"Dec 22,2012","title":"test4","txt":"this is just a test4"}},
{"id":"67ebe3755be4edf5c4edf0d96f003cfd","key":null,"value":{"date":"Aug 21,2010","title":"test5","txt":"this is just a test5"}},
{"id":"67ebe3755be4edf5c4edf0d96f004466","key":null,"value":{"date":"Nov 1, 2010","title":"test6","txt":"this is just a test6"}},
{"id":"67ebe3755be4edf5c4edf0d96f004d9c","key":null,"value":{"date":"Aug 15,2010","title":"test7","txt":"this is just a test7"}},
{"id":"67ebe3755be4edf5c4edf0d96f005d04","key":null,"value":{"date":"Feb 28,2012","title":"test3","txt":"this is just a test3"}}
]} 
```

使用 CouchDB 函数按年和月对条目进行分组的最佳方法是什么？

（以 JSON 格式输出，例如：）

```
{
"2012":{
    "Feb":[{"date":"Feb 28,2012","title":"test3","txt":"this is just a test3"}],
    "Nov":[{"date":"Nov 11,2012","title":"test2","txt":"this is just a test2"}],
    "Dec":[{"date":"Dec 12,2012","title":"test1","txt":"this is just a test"},
        {"date":"Dec 22,2012","title":"test4","txt":"this is just a test4"}]    

    },

"2010":{
    "Aug":[{"date":"Aug 15,2010","title":"test7","txt":"this is just a test7"},
           {"date":"Aug 21,2010","title":"test5","txt":"this is just a test5"}],
    "Nov":[{"date":"Nov 1, 2010","title":"test6","txt":"this is just a test6"}] 

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T18:19:25.757

您的地图功能应如下所示：

```
function (doc) {
    var date = new Date(doc.date);
    emit([date.getFullYear(), date.getMonth()], doc);
} 
```

然后当你查询视图数据时，它会按日期排序。如果你添加“descending=true”，那么你会让它们倒序排列。如果你添加"?startKey=[2012,""]&endkey=[2012]&descending=true"，那么你会得到所有带有 2012 doc.date 的文档

# c# - 打印流信息

> ID：13662132
> 
> 赞同：0
> 
> 时间：2012-12-01T18:00:31.197
> 
> 标签：c#, sockets, stream, tcplistener

我试图打印发送到端口 2000 的信息，但我得到的只是“System.Net.Sockets.NetworkStream”。有没有办法将流转换为字符串？或者一种直接打印流信息的方法。

```
 static void Main(string[] args)
    {
        while (true)
        {
            TcpListener TL = new TcpListener(IPAddress.Any, 2000);
            TL.Start();
            Socket S = TL.AcceptSocket();
            Stream SS = new NetworkStream(S);
            string MSG = SS.ToString(); 
            Console.WriteLine(MSG);
        }
    } 
```

编辑：这是客户

```
 static void Main(string[] args)
    {

            try
            {
                TcpClient TC = new TcpClient();
                TC.Connect("XXX.XXX.XXX.XXX", 2000);
                NetworkStream Writer = TC.GetStream();
                string MSG = Console.ReadLine();
                byte[] pack = Encoding.ASCII.GetBytes(MSG);
                Writer.Write(pack, 0, pack.Length);
                Writer.Flush();
            }
            catch
            {
                Console.WriteLine(" faild");
                Console.ReadLine();
            }

    } 
```

PS：执行后应用程序也会崩溃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T00:06:56.070

在您的代码中：

```
SS.ToString(); 
```

将永远回来`System.Net.Sockets.NetworkStream`！因为`ToString()`函数返回代表当前对象的字符串，所以可以使用 a`StreamReader`从流中读取一行。

```
Stream SS = new NetworkStream(S);
StreamReader reader = new StreamReader(SS);
string MSG = reader.ReadLine();
Console.WriteLine(MSG); 
```

当然你应该在客户端之前运行服务器程序，因为 TCP 是面向连接的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:03:08.277

如果另一部分是发送字符串（不是无法转换为字符串的二进制数据），那么您可以尝试

```
var s = new StreamReader(new NetworkStream(S));
s.Readline();
s.ReadToEnd(); //OR 
```

# javascript - 在 jQuery 中模拟超链接单击以启动表单

> ID：13662137
> 
> 赞同：0
> 
> 时间：2012-12-01T18:00:58.500
> 
> 标签：javascript, jquery

我试图在触发某些标志时显示密码重置表单。如果没有 password_changed_flag，我有以下基本代码可以提示用户更改密码。根据响应，用户会收到一条回复“是”或“否”的消息。这是代码：

```
<?php if(!$password_changed_flag){
        <script type="text/javascript">     
        $('#ajaxShield').show();        
        var pw = <?php echo json_encode($this->session->userdata('password')) ?>;
        $.prompt("Your auto-assigned password must be changed.", pw,
        function(){
            $.msg("Yes.",{header:'Yes', live:10000});
            $('#ajaxShield').hide();
        },
        function(){
            $.msg("No.",{header:'No', live:10000});
            $('#ajaxShield').hide();
        });                 
        </script>
<?php } ?> 
```

我唯一的问题是，我真正需要做的是显示一个表单，而不是使用`$.prompt`and 。`$.msg`这是我在其他地方启动表单的代码：

```
<a href="#ChangePW" return false; class="login-window" >Change Password</a> 
```

我想我的问题是我可以通过单击超链接查看表单，但不是使用超链接查看表单，我需要能够在没有 password_changed_flag 的情况下查看表单，如上面的代码所示。所以，看起来我需要以某种方式模拟上层代码块内的下层代码块。

如何在不依赖超链接的情况下模拟响应超链接所发生的事情？

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:06:13.163

如果你想导航到锚名称`#ChangePW`，这就是链接的作用，你可以在 JavaScript 中这样做：

```
self.location.hash = "ChangePW"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:14:50.863

您可以使用 Jquery 触发点击

```
$('#triggerClick').trigger('click');

<a href="#ChangePW" class="login-window" id='triggerClick'>Change Password</a> 
```

如果您使用您的标记建议的 fancybox，您也可以使用：

```
$("#triggerClick").fancybox().trigger('click'); 
```

# recursion - 在 Prolog 中查找每个 X 列表的程序

> ID：13662139
> 
> 赞同：4
> 
> 时间：2012-12-01T18:01:10.383
> 
> 标签：recursion, prolog, runtime-error, prolog-dif

我开始学习Prolog。该程序尝试获取给定元素的所有出现：

```
occurences(_, [], Res):- Res is [].
occurences(X, [X|T], Res):- 
    occurences(X,T,TMP),
    Res is [X,TMP].
occurences(X, [_|T], Res):- occurences(X,T,Res). 
```

但这是错误：

```
?- occurences(a,[a,b,c,a],Res).
ERROR: is/2: Arithmetic: `[]/0' is not a function
^  Exception: (11) _G525 is [] ? creep
   Exception: (10) occurences(a, [], _G524) ? creep
   Exception: (9) occurences(a, [a], _G524) ? creep
   Exception: (8) occurences(a, [c, a], _G524) ? creep
   Exception: (7) occurences(a, [b, c, a], _G524) ? creep
   Exception: (6) occurences(a, [a, b, c, a], _G400) ? creep 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T20:27:40.400

除了其他人写的，考虑使用 dif/2 约束：

```
occurrences(_, [], []).
occurrences(X, [X|Ls], [X|Rest]) :-
        occurrences(X, Ls, Rest).
occurrences(X, [L|Ls], Rest) :-
        dif(X, L),
        occurrences(X, Ls, Rest). 
```

您现在可以在各个方向使用谓词，例如：

```
?- occurrences(X, [a,a,b], Os).
X = a,
Os = [a, a] ;
X = b,
Os = [b] ;
Os = [],
dif(X, b),
dif(X, a),
dif(X, a) ;
false. 
```

最后一个解决方案意味着如果 X 与 和 都不同，则出现列表为`a`空`b`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:47:03.313

鲁本斯已经告诉过你你的错误。我只是添加一个样式注释：通常在 Prolog 中，最好直接在头参数中编码模式：

```
occurences(_, [], []).
occurences(X, [X|T], [X|TMP]) :- 
    occurences(X,T,TMP), !.
occurences(X, [_|T], Res) :-
    occurences(X,T,Res). 
```

我将第二个子句“输出”从 更正`[X,TMP]`为`[X|TMP]`，并注意删减：没有它，程序产生的结果比要求的要多：

```
?- occurences(a,[a,b,c,a],Res).
Res = [a, a] ;
Res = [a] ;
Res = [a] ;
Res = [] ;
false. 
```

与削减：

```
?- occurences(a,[a,b,c,a],Res).
Res = [a, a]. 
```

**编辑**@false 破坏了一个讨厌的错误：这里是一个更正，使用 if/then/else 结构

```
occurences(_, [], []).
occurences(X, [Y|T], Os) :-
    (   X = Y
    ->  Os = [X|R]
    ;   Os = R
    ),
    occurences(X,T,R). 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T03:34:00.267

考虑：

```
occurrences(_, [], []) :- !.
occurrences(X, [Y|L], R) :-
    X \== Y, !,
    occurrences(X, L, R).
occurrences(X, [Y|L], [Y|R]) :-
    occurrences(X, L, R). 
```

测试：

```
?- occurrences(a,[a,b,a,c],O).
O = [a, a].

?- occurrences(a,[a,X,a,c],O).
O = [a, a].

?- occurrences(a,[a,X,a,c],[a]).
false.

?- occurrences(a,[a,X,a,c],[a,a]).
true. 
```

# javascript - Draggable - 如何限制可拖动元素越过屏幕底部？

> ID：13662141
> 
> 赞同：0
> 
> 时间：2012-12-01T18:01:17.410
> 
> 标签：javascript, jquery, css, plugins, user-interface

我有一个只能由 Y 轴拖动的元素。我希望它能够越过屏幕顶部（它可以），但禁止它越过屏幕底部。我阅读了关于遏制的 jQuery Draggable API，但没有找到关于我所问问题的答案，或者至少无法理解如何将其应用于我的案例。到目前为止，这是我的代码：

**JavaScript：**

```
$(document).ready(function() {
    $("#elem").draggable({
       axis: "y"
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:45:48.837

必须有更好的方法，但是；

```
$(document).ready(function() {
    $("#elem").draggable({
       axis: "y",
       drag: function(event, ui) {
            if($(this).offset().top + $(this).outerHeight() > $(window).height()) {
                $(this).offset({"top": $(window).height() - $(this).outerHeight()});
                event.preventDefault();
            }
       }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:16:00.067

您需要将包含选项设置为页面高度。

```
$(document).ready(function() {
    $("#elem").draggable({
       containment: "document",
       scroll: false,
       axis: "y"
    });
}); 
```

# c++ - 如何在 main 中调用包含对节点的引用的函数

> ID：13662143
> 
> 赞同：0
> 
> 时间：2012-12-01T18:01:25.970
> 
> 标签：c++, pointers, wrapper, pass-by-reference, nodes

我很好奇如何实现这样的功能。例如，

我有类似的东西：

```
class Node {
public:
int dataItem;
Node *next;
};

void foo(int number, Node & n) {
// do something
} 
```

然后在 main 我需要调用该函数，这样的事情不起作用：

```
int main () {
Node *n;
int data;
foo(data, n);
return 0;
} 
```

我将需要一个包装函数，以便在 main 中通过引用传递节点，这就是我正在努力的地方，我只是不确定如何解决这个问题。我尝试了一些想法，我在网上阅读了很多，但我只是没有掌握它。任何帮助理解如何实现这个包装函数都会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T18:03:51.767

你根本没有`Node`。你只是有一个指针`Node`，它还没有特别指向任何地方（你`data`也没有初始化）。类型的引用参数`Node&`要求您传递 a `Node`，而不是 a `Node*`，所以您真正想要的是：

```
int main() {
  Node n;
  int data = 0;
  foo(data, n); // Pass the Node directly
  return 0;
} 
```

或者，如果您确实需要`n`成为指针，则可以执行以下操作：

```
int main() {
  Node* n = new Node();
  int data = 0;
  foo(data, *n); // Dereference n to get the Node it points to
  delete n;
  return 0;
} 
```

但是，我不提倡在这种情况下使用原始指针——你必须记住要`delete`避免内存泄漏。您可以改为使用`std::unique_ptr<Node> n(new Node())`而不是`Node* n = new Node()`，但使用`Node`具有自动存储持续时间的 （如第一个示例中所示）是更可取的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:04:50.827

您的函数`foo`需要对 a 的引用`Node`，但您正在向它传递一个指针。`main()`例如，更改函数或代码

```
int main () {
Node n;
int data; // beware, may contain garbage value.
foo(data, n);
return 0;
} 
```

或者

```
void foo(int number, Node* n) {
// do something
} 
```

# html - HTML 预取是否也会开始下载流媒体内容？

> ID：13662144
> 
> 赞同：0
> 
> 时间：2012-12-01T18:01:36.670
> 
> 标签：html, streaming, prefetch

预取是构成 HTML5 的新标准之一。您可以将其添加到这样的标签中：

```
<link rel="prefetch" href="/images/big.jpeg"> 
```

我的问题：

1.  如果您尝试预取带有流数据的页面（例如 Youtube）会发生什么？视频会开始缓冲吗？
2.  内容是什么（例如 Flash 与 HTML5 视频）是否重要？我问这个是因为[这个常见问题解答](https://developer.mozilla.org/en/docs/Link_prefetching_FAQ)提到只有 HTTP/S 会被预取。

# neo4j - 假设有 4e6 个节点，如何通过知道它的值来获取顶点 ID？

> ID：13662146
> 
> 赞同：0
> 
> 时间：2012-12-01T18:01:48.963
> 
> 标签：neo4j, dbpedia, gremlin

在 NEO4J 之上的 DBPEDIA 中使用 gremlin 脚本。我想在最快的时间内获得例如的顶点id号：

```
"@URI": "U http://dbpedia.org/resource/United_States_Congress" 
```

所以我试图运行的是：

```
g.V.filter{it.v.value == "U http://dbpedia.org/resource/United_States_Congress"} 
```

## 执行需要太多时间。

*   如何获取节点编号？
*   我怎样才能在实时系统中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T02:47:50.967

您正在遍历所有顶点并过滤特定值。那一定很慢！`value`尝试在键索引中查找值：

```
g.V("value", "U http://dbpedia.org/resource/United_States_Congress").id 
```

# c# - Code First，多对多与附加领域的困境

> ID：13662148
> 
> 赞同：0
> 
> 时间：2012-12-01T18:01:55.047
> 
> 标签：c#, asp.net-mvc, many-to-many, code-first

我在 MVC4 中有一个`Playlist`类和一个类。`Song`

规则：

*   一首歌曲可以在 0 个或多个播放列表中。
*   一个播放列表可以包含 0 首或更多首歌曲。

所以我所做的就是创建这个：

```
public class Playlist
    {
        public int PlaylistID { get; set; }
        public string Name { get; set; }
        public DateTime Date { get; set; }

        public virtual IList<PlaylistSongs> PlaylistSongs { get; set; }
    }

    public class Song
    {
        public int SongID { get; set; }
        public string Title { get; set; }
        public string SongArtURL { get; set; }

        public virtual Artist Artist { get; set; }
        public virtual Genre Genre { get; set; }
        public IList<PlaylistSongs> PlaylistSongs { get; set; }
        public IList<Album> Albums { get; set; }
    }

    public class PlaylistSongs
    {
        public int PlaylistID { get; set; }
        public int SongID { get; set; }

        public virtual Playlist Playlist { get; set; }
        public virtual Song Song { get; set; }

        public int NumberVotes { get; set; }
    } 
```

我也被`OnModelCreating`这样覆盖：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<PlaylistSongs>()
                          .HasKey(cp => new { cp.SongID, cp.PlaylistID });

            modelBuilder.Entity<Playlist>()
                        .HasMany(c => c.PlaylistSongs)
                        .WithRequired()
                        .HasForeignKey(cp => cp.SongID);

            modelBuilder.Entity<Song>()
                        .HasMany(p => p.PlaylistSongs)
                        .WithRequired()
                        .HasForeignKey(cp => cp.PlaylistID);
        } 
```

然而，问题。想象一下，如果我想创建一个`Song`最初没有附加到任何`Playlist`（工作正常）的歌曲，然后将该歌曲添加到播放列表中。由于播放列表不包含歌曲列表，而是包含播放列表歌曲列表，我该怎么做？

我想要的是：

*   创建歌曲列表（独立）
*   将该歌曲列表添加到播放列表
*   Code First Migrations Seed 方法将在 PlaylistSongs 表中自动创建所需的关联。
*   然后我可以让人们对某个播放列表中的歌曲进行投票。
*   该字段`NumberVotes`将相应更改。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T21:49:50.623

改为使用数据注释。在类中添加一个 Identity 字段`PlaylistSong`。

```
 public class PlayList
    {
        [Key]
        public int ID { get; set; }
        public string Name { get; set; }
        public DateTime Date { get; set; }

        public virtual IList<PlayListSong> PlaylistSongs { get; set; }
    }

    public class PlayListSong
    {
        [Key]
        public int ID { get; set; }
        public int PlayListID { get; set; }
        public int SongID { get; set; }

        public virtual PlayList Playlist { get; set; }
        public virtual Song Song { get; set; }

        public int NumberVotes { get; set; }
    }

    public class Song
    {
        [Key]
        public int ID { get; set; }
        public string Title { get; set; }
        public string SongArtURL { get; set; }

        //public virtual Artist Artist { get; set; }
        //public virtual Genre Genre { get; set; }
        public IList<PlayListSong> PlaylistSongs { get; set; }
       // public IList<Album> Albums { get; set; }
    } 
```

# ios - 根据用户按钮按下 IOS 在 FRC 中更改排序描述符

> ID：13662155
> 
> 赞同：0
> 
> 时间：2012-12-01T18:02:33.877
> 
> 标签：ios, iphone

我正在制作一个 iPhone 应用程序，我有一个表格视图，它使用 frc 控制器从 Core Data 中提取数据，并显示按标题排序的内容。如果用户导航到下一个屏幕，他们可以单击应该更改 frc 中的排序描述符的三个按钮之一。如何在下一个屏幕上调用该 frc 并根据用户按下的按钮更改它的排序描述符？

```
- (IBAction)btnValue:(id)sender {

}

- (NSFetchedResultsController *)frc_Work

{

// If the frc is already configured, simply return it

if (_frc_Work) return _frc_gradedWork;

// Otherwise, create a new frc, and set it as the property (and return it below)

_frc_Work = [_cdStack frcWithEntityNamed:@"GradedWork" withPredicateFormat:nil predicateObject:nil sortDescriptors:@"title,YES" andSectionNameKeyPath:nil];

return _frc_Work; 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:11:28.503

每当按下下一个屏幕中的按钮时，使用委托或通知在屏幕之间进行通信。

通知时将排序描述符保留为属性。当您收到通知并设置一个脏标志变量时更改它，您将在 viewWillAppear 中检查其值以重新加载页面。

**详细说明：**

你有两个屏幕（我假设有两个视图控制器）

第一个屏幕显示基于特定标准的排序数据。在查询核心数据时，您需要将此 NSSortdescriptor 传递给请求以获取正确的数据。

此屏幕将具有 NSSortDescriptot 属性。

第二个屏幕显示三个按钮，它们有一个共同的 IBAction。根据按下的按钮调用委托方法，例如 SortingCriteriaChanged:(NSSortDescriptor *sortDescriptor)，创建并将适当的排序描述符传递给此委托方法。在推送第二个屏幕之前，将第一个屏幕设置为该屏幕的委托，并实现上述方法。

在委托方法中，将 sortDescriptor 设置为传递给委托方法的那个。

现在不要重新加载任何东西。

当您返回上一个屏幕时，会调用 viewWillAppear。在这里，您应该重新加载排序列表，仅当排序标准已更改时。

为此，您需要一个 BOOL 属性，例如：needToReload。在委托方法中将其设置为 YES 并在 viewWillAppear 中检查其值并重新加载列表。重新加载列表完成后，再次将 BOOL 属性设置为 NO。

# html - 我如何垂直居中？

> ID：13662161
> 
> 赞同：1
> 
> 时间：2012-12-01T18:03:27.013
> 
> 标签：html, css, layout

[这](http://www.mrizen.com/wow)是我正在尝试开发的页面。我希望选项卡中的文本和气泡中的电影居中。我发现的所有东西都不能正常工作。此页面上的所有`position: absolute`内容均以百分比定义，但气泡内的实际内容除外。

索引.css

```
#movie {
    margin-top: auto;
    margin-bottom: auto;
    display: table-cell;
    vertical-align: middle;
    ...
}
#movie-bubble {
    vertical-align: middle;
    text-align: center;
    display: table;
} 
```

根.css

```
.tab {
    vertical-align: middle;
    text-align: center;
    margin: auto;
} 
```

我究竟做错了什么？

编辑：对人们说`display: table-cell`，&c：这不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:05:12.563

你需要设置它所在的 div`display: table;`

以及您要居中的文本：

```
display: table-cell;
vertical-align: middle; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:05:01.640

要在 a 中居中内容`div`，请执行以下操作：

到外面`div`：

```
display: table; 
```

到里面`div`：

```
display: table-cell;
vertical-align: middle; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T18:06:46.397

尝试这样的事情： -

```
 .area { 
 width: 300px; 
 height: 300px; 
background: url(../images/abe-bg.png) no-repeat; 
position: relative;
}

 .bubble { 
 position: absolute; 
 left: 93px; 
 top: 21px; 
  width: 135px; 
height: 84px; 
 display: table; 
}

.bubble p {
display: table-cell; 
vertical-align: middle; 
 text-align: center; 
} 
```

看看这个：- [http://www.vanseodesign.com/css/vertical-centering/](http://www.vanseodesign.com/css/vertical-centering/)

# vba - ftp recv() 命令在找不到文件时创建空白文件

> ID：13662163
> 
> 赞同：1
> 
> 时间：2012-12-01T18:03:40.133
> 
> 标签：vba, ftp, windows-shell

我正在使用一个简单的 recv(/get) 命令从远程大型机服务器获取一堆文件。我首先使用服务器名、用户名、密码和我要传输的文件列表创建一个文本文件，然后`ftp -s:<created text file.txt>`在命令提示符中使用 .bat 文件，该文件使用 VBA 中的 shell 命令启动。

现在我的问题是，我不知道哪些文件列表存在，哪些不存在。在找不到文件的情况下，我不希望创建任何文件。但目前正在创建一个 0KB 的空白文件。这些都是我要传输的 csv 文件。当我在另一个系统上尝试相同的过程时，它似乎工作正常，即如果不存在用于传输的文件，它不会创建任何文件。这是我要执行的基本功能，如果文件存在则传输，否则就这样。

我可能遗漏了一些非常简单的选项，我曾尝试在网上搜索可能的解决方案但无济于事，我希望我提供的信息足够。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T17:13:05.003

我有同样的问题，我相信我通过使用`mget`而不是`get`. 您需要输入`prompt`文本文件以关闭交互模式。否则，您将在运行脚本时收到确认提示。

# android - 如何从活动之外将文件写入 Android 设备？

> ID：13662164
> 
> 赞同：2
> 
> 时间：2012-12-01T18:03:40.197
> 
> 标签：android, serialization, android-activity, android-file, data-access

我的主要活动是创建一个名为 fileSaver 的新对象。我正在尝试将对象“数据”序列化到文件中。FileSave 有一个方法 serialize() 创建文件。

```
private String FILE_NAME = "file.dat";
FileSaver fileSaver = new FileSaver();
Data data = new Data();
data.setEmail("aaa@bbb.com");
fileSaver.serialize((Object) data,FILE_NAME); 
```

问题是我无法在活动之外创建文件。当我尝试相同的内部活动时，它会创建该文件。我正在尝试路径，但没有成功。我知道从活动创建文件时，它保存在 /data/data/my_package_name/files 但如何从外部活动类访问该文件？

类 FileSaver：

```
public class FileSaver {

public void serialize(Object objToSerialize,String fileName) {

    try {
        ObjectOutputStream out = new ObjectOutputStream(
                new FileOutputStream(fileName));
        out.writeObject(objToSerialize);
        out.close();
        System.out.println("Object : " + objToSerialize.getClass()
                + " serialized successfully");
    } catch (Exception ex) {
        System.out.println("Error Saving Object to File :"
                + ex.getMessage());
        ex.printStackTrace();
    }
}
} 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:12:31.440

您必须将上下文传递给外部 java 类并使用上下文，使用此 openFileOutput() 方法在 android 设备内存中创建和写入文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T04:05:08.223

您可以将文件保存在 SDCARD 中。

```
ObjectOutputStream out = new ObjectOutputStream(new FileOutputStream(Environment.getExternalStorageDirectory()+File.separator+filename)); 
```

//这里文件名是您在字符串中的输入文件名，Environment.getExternalStorageDirectory() 为您提供 SDCard 目录。

还要确保**`<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>`**在 Android Manifest 文件中添加

# javascript - 具有多个单选按钮的表单的最有效编码样式

> ID：13662166
> 
> 赞同：0
> 
> 时间：2012-12-01T18:03:51.820
> 
> 标签：javascript, forms, html

我有一个看起来像这样的表格：

![布局](../Images/1e213c5082c522fa7ca5aa5c0d8fbeaa.png)

我想要根据填写的框数和选中的单选框的数量将 input.variable 放入 localStorage 中。应用如下： -

单选按钮 -
一个姓名 输入：
na : 姓名
F: 姓名和朋友
F+ 姓名和朋友

输入两个姓名：
na：姓名和姓名
F：姓名、姓名和朋友
F+：姓名、姓名和朋友

输入三个姓名：
na：姓名、姓名和姓名
F：姓名、姓名 姓名和朋友
F+：姓名、姓名、姓名和朋友

输入四个姓名：
na：姓名、姓名、姓名和姓名
F：姓名、姓名、姓名、姓名和朋友
F+：姓名、姓名、姓名、姓名和朋友

解决这个问题的最佳方法是什么？我试图想出超越多个 if/then/else 语句的最有效方法。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T13:08:35.843

好的，由于我的评论似乎为您指明了正确的方向，因此我将其粘贴在这里作为答案：

如果您想要一种干净的方式来排列数据，请使用对象文字。如果您正在处理大量`if elseif elseif`语句，请考虑使用 a `switch`，如果所有条件检查不同的值，只需使用`switch (true)`

# php - 带有比较运算符的 PHP 错误

> ID：13662171
> 
> 赞同：0
> 
> 时间：2012-12-01T18:04:07.597
> 
> 标签：php, compare, operator-keyword

由于自动类型声明，我知道 PHP 的比较运算符不是 100%。

我做了一些测试，发现了这段代码

```
<?php
function foo($answer) {
    if ($answer > 10) {
        return true;
    } else {
        return $answer;
    }
}
if (foo(11)) {
    echo "11 is bigger than 10<br />";
}        
if (foo(9)) {
    echo "9 is bigger than 10<br />";
}
?> 
```

输出是：

11 大于 10 9 大于 10

有人可以解释我在这个比较中代码在哪里以及为什么失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T18:05:28.397

因为`return $answer`在您的两个测试用例中都是真实的。

这评估为：

```
if (11) { ...
if (9) { ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:08:56.387

函数`foo()`总是返回一些值。在这种情况下，boolean 和 int 类型。只需确保在比较返回值时更加严格。

```
<?php
function foo($answer) {
    if ($answer > 10) {
        return true;
    } else {
        return $answer;
    }
}

if (foo(11) === true) {
   // This returned TRUE 
   echo "11 is bigger than 10<br />";
}

if ( is_int(foo(9)) === true ) {
   //This returned int 
   echo "9 is bigger than 10<br />";
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T18:14:56.407

你可以这样做，

```
<?php
function foo($answer) {
    return ($answer > 10);
}

if (foo(11)) {
    echo "11 is bigger than 10<br />";
}        
if (foo(9)) {
    echo "9 is bigger than 10<br />";
}
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T18:07:59.433

**您以错误的方式进行比较**， $answer 是非零值，并且在 PHP 中，当您在条件下使用它时，每个非零值都被认为是真实的。

```
function foo($answer) {
    if ($answer > 10) {
        return true;
    } else {
        return false;
    }
} 
```

# postgresql - PostgreSQL - 使两个事务同时运行

> ID：13662173
> 
> 赞同：2
> 
> 时间：2012-12-01T18:04:16.760
> 
> 标签：postgresql, concurrency

我需要同时（同时）运行两个会话（两个文件）。有没有办法使用 pg_sleep 或“delayExecutionUntil(x_time)”之类的其他函数来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T20:33:10.873

要在（几乎）完全相同的时间获得两个事务，您可以使用[命令](http://linux.about.com/library/cmd/blcmdl1_atq.htm)在 Linux shell 中同时安排两个或多个[psql](http://www.postgresql.org/docs/current/interactive/app-psql.html)调用。[`at`](http://linux.about.com/library/cmd/blcmdl1_atq.htm)

喜欢：

```
at '08:00 01.12.2012' -f script.sql 
```

（所需的时间戳格式可能取决于您的系统区域设置。）
其中`script.sql`包含以下内容：

```
psql mydb -p 5432 -c "INSERT INTO tbl (col) VALUES ('foo'); 
```

只是有更多的行来引发你所追求的碰撞..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T21:53:57.217

您可以使用表锁（请参阅`LOCK`文档中的命令）来同步内容：

*   连接“控制器”锁定实际事务将使用的第一个表。
*   创建新的“Worker-A”连接并开始您的交易。它将阻塞在锁定的表上。
*   创建新的“Worker-B”连接并开始您的交易。它将阻塞在锁定的表上。
*   “控制器”连接释放锁定。
*   “Worker-A”和“Worker-B”应该立即开始工作——当然，如果它们的并发设置允许这样做的话。

# assembly - 使用 Raspberry Pi 学习汇编语言？

> ID：13662174
> 
> 赞同：14
> 
> 时间：2012-12-01T18:04:23.343
> 
> 标签：assembly, arm, raspberry-pi

我做了一些搜索，但找不到明确的答案，所以我希望我能得到你的意见。

我想学习汇编语言 (ARM) - Raspberry Pi 会是一个不错的选择吗？

从我所见，似乎有一些温和的教程可以做一些事情，比如制作 LED 闪光灯等，所以从新手的角度来看，它并不太可怕，而且实际上看起来很有趣。

如果我从 Raspberry Pi 开始，然后转而使用反汇编程序来积累我的知识，那么我是走在了正确的道路上，还是开始走错了路？

谢谢您的意见。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-01T18:49:56.907

是和不是。如果这是您的第一个汇编语言，那么 ARM 是一个很好的开始（x86 是一个坏的）（还有其他好的）。我建议首先使用指令集模拟器学习。这可以让您更好地了解正在发生的事情，并为您提供更好的成功机会（减少因挫折而放弃的机会）。一旦你用工具弄湿了你的脚，构建裸机程序等，那么树莓派就不是一个糟糕的平台。外围设备虽然文档很少，但使用起来非常简单（与其他类似平台相比），有足够的社区和示例来弥补文档的不足。从 ARM 的角度来看，树莓派可以被认为是不可变砖的。尝试制作您的第一个闪烁的 LED 程序可能会非常令人沮丧。

我非常相信编写反汇编程序作为学习新（对我而言）指令集的一种方式。ARM 指令集是固定字长（32 位），非常容易反汇编。纯拇指指令固定为16位，更容易反汇编。thumb 有 thumb2 扩展，这使得它更难，所以我一开始会避免这些。使用固定字长指令集，您可以安全地浏览二进制图像并从头到尾进行反汇编。数据看起来很奇怪，但说明会在正确的位置。使用可变字长，您不能简单地从头开始并线性反汇编（使用 thumb2 扩展意味着可变指令长度），您可能有一个三字节指令，然后是一个字节数据，然后是另一个指令字节，线性地，该字节数据将被反汇编为指令，如果它碰巧解码为多字节指令，那么现在您不同步了。反汇编可变指令长度二进制文件的唯一正确方法是按照执行顺序跟踪代码的所有路径，并从该反汇编中尽可能地反汇编（如果不模拟所有可能的代码路径，您可能无法将所有指令与数据区分开来） . 可变指令长度反汇编绝对是一个高级主题，首先要掌握一些汇编语言的力量。甚至可能在处理反汇编程序之前为可变字长指令集创建一个指令集模拟器（基本上，无论如何，您必须通过二进制文件解码，不是完全解码而是部分解码，以便为可变字长指令集制作反汇编程序。

thumbulator 和 amber_samples 方法都是固定指令长度，因此很容易看到 asm 到机器代码到 asm 的关系。以及查看您的代码运行并了解它为什么会进入杂草并死亡（您不会在树莓派或任何其他硬件上看到）。

有一个 cambride 大学示例通过简单的闪烁 LED 示例握住您的手，然后进入视频像素。以及在讨论论坛的裸机部分发布了指向其示例的链接的其他人。为了了解“我如何在汇编语言中做到这一点”，编写小的 C 函数，编译（优化）然后反汇编。我专门讨论的是 a + b 之类的代码，而不是 printf() 之类的代码。学习汇编语言，指令集，它是处理器家族特有的（通用的）。那么我会在学习系统调用或库调用之后争论。“我如何打印字符串”之类的东西涉及硬件学习，系统（ROM 监视器/调试器）或库（C 库或其他高级语言函数调用和约定以利用它们的库，这些库本身可能会调用许多其他库，从而导致大量垃圾链接）。所以使用 C 来学习“汇编语言”意味着没有库调用，没有 memcpy 没有 printf 等。不过，如果你使用系统和库调用，那么你必须编写 asm 代码才能在该系统或链接上运行与那些本身可能具有系统依赖性的调用。考虑学习高级语言 C 或 Python 等。学习语言、声明变量、学习加法、减法、异或等运算符。如何使用指针和数组等。在某些时候你会学习 C 库调用、printf()、strcpy()、malloc 等 YMMV，

如果您选择学习 asm 作为系统的一部分，那么我建议您留在 linux 中，创建一些简单的 C 函数，编译和反汇编，学习编译器的调用约定并使用 arm 参考资料查找说明，如您所见它们由编译器创建。学习使用 asm 从头开始​​创建该函数并将其与 C 程序链接，然后修改该函数。这是与我上面描述的完全不同的方法。有失败的可能性，但绝对是一种通过示例学习的方法。

# android - 如何创建超链接以在移动设备上拨打电话号码？

> ID：13662175
> 
> 赞同：236
> 
> 时间：2012-12-01T18:04:32.240
> 
> 标签：android, html, mobile, hyperlink

为移动设备上的用户创建可点击的超链接以拨打电话号码的正确通用格式是什么？

带破折号的区号

```
<a href="tel:555-555-1212">555-555-1212</a> 
```

没有破折号的区号

```
<a href="tel:5555551212">555-555-1212</a> 
```

带破折号和 1 的区号

```
<a href="tel:1-555-555-1212">555-555-1212</a> 
```

没有破折号和 1 的区号

```
<a href="tel:15555551212">555-555-1212</a> 
```

带破折号、1 和 + 号的区号

```
<a href="tel:+1-555-555-1212">555-555-1212</a> 
```

没有破折号、1 和 + 号的区号

```
<a href="tel:+15555551212">555-555-1212</a> 
```

* * *

## 回答 #1

> 赞同：206
> 
> 时间：2012-12-01T18:09:49.227

`-`除了使数字更具可读性之外，破折号 ( ) 没有任何意义，因此您不妨将它们包括在内。

由于我们永远不知道我们的网站访问者来自哪里，我们需要让电话号码可以从世界任何地方拨打。出于这个原因，`+`标志**总是必要**的。您的移动运营商会自动将该`+`标志转换为您的[国际拨号前缀](https://en.wikipedia.org/wiki/List_of_international_call_prefixes)，也称为“**退出代码**”。此代码因地区、国家/地区而异，有时一个国家可以使用多个代码，具体取决于运营商。幸运的是，当它是本地电话时，使用国际格式拨打它仍然可以。

使用您的示例号码，当从中国拨打电话时，人们需要拨打：

```
00-1-555-555-1212 
```

从俄罗斯，他们会拨打

```
810-1-555-555-1212 
```

该`+`标志通过允许您省略国际拨号前缀来解决此问题。

在国际拨号前缀之后是[国家代码](https://www.itu.int/dms_pub/itu-t/opb/sp/T-SP-E.164D-2016-PDF-E.pdf)^(（pdf）)，然后是地理代码（区号），最后是本地电话号码。

因此，您的最后两个示例中的任何一个都可以使用，但我的建议是使用这种格式以提高可读性：

```
<a href="tel:+1-555-555-1212">+1-555-555-1212</a> 
```

**注意：**对于包含与国家代码不同的[中继前缀](https://en.wikipedia.org/wiki/Trunk_prefix)的号码（例如，如果您在本地用括号括住 a `0`），您需要省略它，因为该号码必须是国际格式。

* * *

## 回答 #2

> 赞同：60
> 
> 时间：2012-12-01T18:09:58.727

`-`没关系，`+`但当移动用户在漫游时，签名很重要
这是标准格式

```
<a href="tel:+4917640206387">+49 (0)176 - 402 063 87</a> 
```

您可以在规范中阅读有关它的更多信息，请参阅[Make Telephone Numbers "Click-to-Call"](https://www.w3.org/TR/mwabp/#bp-interaction-uri-schemes)。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-03-08T16:57:00.460

我也在网上找到了这种格式，并使用它。似乎可以使用或不使用破折号。我已经验证它可以在我的 Mac（尝试在 FaceTime 中拨打电话）和我的 iPhone 上运行：

```
<!-- Cross-platform compatible (Android + iPhone) -->
<a href="tel://1-555-555-5555">+1 (555) 555-5555</a> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-21T16:10:31.743

我用了：

```
Tel: <a href="tel:+123 123456789">+123 123456789</a> 
```

结果是：

电话：[+123 123456789](http://+123%20123456789)

其中“电话：”代表纯文本，只有数字是编码和可点击的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2021-12-19T09:40:21.177

像这样的东西会做的工作

```
<a href="tel:+242-064-295-240" class="nav-link"><i class="fa fa-phone"></i> Call us </a> 
```

* * *

## 回答 #6

> 赞同：-7
> 
> 时间：2016-04-22T21:28:42.970

您也可以使用 callto:############ 将电子邮件代码 mail 替换为 call ，至少根据 W3Cschool 网站，但我还没有机会对其进行测试。

# wpf - 适用于 Win7 和 Win8 主题的 WPF 拆分按钮

> ID：13662180
> 
> 赞同：2
> 
> 时间：2012-12-01T18:05:02.587
> 
> 标签：wpf, xaml, wpf-controls

任何人都知道在 Win7 主题和 Win8 主题中看起来像常规按钮的 WPF 拆分按钮？我正在使用一个在 Win7 上看起来不错，但在 Win8 中却像拇指酸痛一样突出的一个：

![奇怪的按钮](../Images/7e16f98fea7dd0f484a54f026d870581.png)

我已经[在 codeplex 上尝试了 WPF Splitbutton 项目](http://wpfsplitbutton.codeplex.com/)、[Banana Splitbutton](http://blogs.msdn.com/b/delay/archive/2010/07/06/banana-splitbutton-a-wpf-specific-fix-for-splitbutton-and-some-code-analysis-improvements-for-the-silverlight-version-too.aspx)和[Extended WPF Toolkit 中的 splitbutton](https://wpftoolkit.codeplex.com/wikipage?title=SplitButton)。

有没有什么东西可以在 Win7 中提供 Win7 主题按钮和在 Win8 中提供 Win8 主题按钮？

我需要控件具有可绑定的 Command 属性并在按下向下箭头时显示上下文菜单。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-16T20:56:01.827

我采用了 Sten 的方法：将一个按钮嵌套在另一个按钮中。我使用用户控件使其可重用，将所有元素放在控件模板中，以便它可以将任意内容放入按钮中。

```
<UserControl 
  x:Class="VidCoder.Controls.SplitButton"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  mc:Ignorable="d"
  Loaded="SplitButton_OnLoaded">
  <UserControl.Template>
    <ControlTemplate TargetType="{x:Type UserControl}">
      <Button 
        HorizontalAlignment="Left" VerticalAlignment="Top" Name="mainButton" ContextMenuService.Placement="Bottom" 
        Width="{TemplateBinding Width}" Height="{TemplateBinding Height}">
        <Button.Content>
          <StackPanel Orientation="Horizontal" UseLayoutRounding="True">
            <ContentPresenter Margin="{TemplateBinding Padding}" />
            <Rectangle Width="1" Fill="#111111" Margin="0,2" />
            <Button Click="OnArrowClick">
              <Button.Template>
                <ControlTemplate TargetType="Button">
                  <Grid Background="Transparent" Name="buttonGrid">
                    <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                  </Grid>
                </ControlTemplate>
              </Button.Template>
              <Button.Content>
                <Path Data="M 0,0 L 8,0 L 4,4 Z" Fill="{TemplateBinding Foreground}" Margin="4 0 3 0" VerticalAlignment="Center"/>
              </Button.Content>
            </Button>
          </StackPanel>
        </Button.Content>
        <Button.ContextMenu>
          <ContextMenu Name="buttonMenu" ItemsSource="{Binding Path=MenuItemsSource, RelativeSource={RelativeSource TemplatedParent}}" />
        </Button.ContextMenu>
      </Button>
    </ControlTemplate>
  </UserControl.Template>
</UserControl> 
```

代码隐藏公开了菜单项集合和 Command 属性：

```
public partial class SplitButton : UserControl
{
    private Button button;

    private ObservableCollection<object> menuItemsSource = new ObservableCollection<object>();

    public Collection<object> MenuItemsSource { get { return this.menuItemsSource; } }

    public SplitButton()
    {
        InitializeComponent();
    }

    public static readonly DependencyProperty CommandProperty = DependencyProperty.Register(
        "Command",
        typeof (ICommand),
        typeof (SplitButton),
        new UIPropertyMetadata(null, OnCommandChanged));

    public ICommand Command
    {
        get
        {
            return (ICommand) GetValue(CommandProperty);
        }

        set
        {
            SetValue(CommandProperty, value);
        }
    }

    private static void OnCommandChanged(DependencyObject dependencyObject, DependencyPropertyChangedEventArgs eventArgs)
    {
        if (eventArgs.NewValue != eventArgs.OldValue)
        {
            var splitButton = dependencyObject as SplitButton;

            if (splitButton.button != null)
            {
                splitButton.button.Command = eventArgs.NewValue as ICommand;
            }
        }
    }

    private void OnArrowClick(object sender, RoutedEventArgs e)
    {
        var buttonMenu = ContextMenuService.GetContextMenu(this.button);

        if (this.menuItemsSource.Count > 0 && buttonMenu != null)
        {
            buttonMenu.IsOpen = !buttonMenu.IsOpen;
            buttonMenu.PlacementTarget = this.button;
            buttonMenu.Placement = PlacementMode.Bottom;
        }
    }

    private void SplitButton_OnLoaded(object sender, RoutedEventArgs e)
    {
        this.button = this.Template.FindName("mainButton", this) as Button;
        if (this.Command != null)
        {
            this.button.Command = this.Command;
        }
    }
} 
```

正在使用：

```
<controls:SplitButton HorizontalAlignment="Left" VerticalAlignment="Top" Command="{Binding TestCommand}">
    <controls:SplitButton.MenuItemsSource>
        <MenuItem Header="ham" Command="{Binding TestCommand2}" />
        <MenuItem Header="sandwiches" />
        <MenuItem Header="yum" />
    </controls:SplitButton.MenuItemsSource>
    <TextBlock Padding="4" Text="Testing" />
</controls:SplitButton> 
```

![拆分按钮使用示例](../Images/8a6208eeadebdd6fabd9c26f40604378.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-10T16:05:48.667

您总是可以用两个标准按钮制作自己的按钮，这并不难 - 只是按钮内的一个按钮，自定义内部按钮的样式以缺少边框，具有下拉三角形并具有“透明”背景（不是与导致点击的 {x:null} 背景相同）

大致是这样的：

```
<Button Style="outerStyle">
  <Button.Content>
     <StackPanel Orientation="Horizontal">
        <Label>Click Me</Label>
        <Button Style="{innerStyleWithTransparentBackground}"> ▼ </Button>
     </StackPanel>
  </Button.Content>
</Button> 
```

如果您使用很多拆分按钮（无论如何都要这样做），您可以将此构造放在带有几个路由事件的用户控件中，否则您可以将其嵌套在其他代码中。

这不是最优雅的解决方案，但它可能是您能找到的最简单的解决方案之一。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-09T03:58:48.320

“像大拇指一样伸出来”是 wpf 控件如何解决其样式的结果。默认情况下（也就是说，如果您没有通过 Style 属性提供 Style），splitbutton 将沿着资源树向上，直到找到 TargetType 为 splitButton 且隐式样式 x:Key 为 "{x:Type SplitButton} ”。如果它无法为您的拆分按钮找到样式，它将在主题文件中查找您当前使用的任何 Windows 主题。在 win7 中，这通常是 Aero.NormalColor.xaml。我不确定win8，但我想Metro.NormalColor.xaml（如果我错了，请纠正我）。如果在主题字典中找不到样式，它将在 Generic.xaml 中查找。无论如何，

示例：http: [//msdn.microsoft.com/en-us/library/ms745683.aspx#styling_basics](http://msdn.microsoft.com/en-us/library/ms745683.aspx#styling_basics)

# button - Bootstrap Collapse 可以很好地使用按钮，那么，如何再次使用手风琴标题？

> ID：13662183
> 
> 赞同：0
> 
> 时间：2012-12-01T18:06:02.140
> 
> 标签：button, twitter-bootstrap, collapse, heading

让我从简单的英语开始：

我在这里做了一个 jsfiddle 示例：http: [//jsfiddle.net/sangdth/DUsGu/](http://jsfiddle.net/sangdth/DUsGu/)

首先，在第 1 步，单击“*转到第 2 步*”按钮。然后，在第 2 步，单击“*转到第 3 步*”按钮。在这个地方，**如果我的客户想回到步骤 1**，他们点击链接“1.注册电话”

可以看到，第 1 步的内容显示出来了，但第 3 步的内容并没有隐藏。当他们点击链接“2.选择形状”时也是如此，1和3的内容都不会隐藏。

我不知道如何使它以两种方式工作，意思是单击显示/隐藏按钮，以及标题。

我曾尝试用 , 替换`hide`，但没有`show`用。`toggle`

```
jQuery("#btn-phone").click(function() {
        $("#collapseOne").collapse('hide');
        $("#collapseTwo").collapse('show');
    }); 
```

你能帮助我吗？

非常感谢。

P/S：我试图搜索，但没有看到。如果我的问题存在并且有答案，请告诉我，我将删除我的问题。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T08:39:29.400

尝试添加以下代码：

```
 $('.accordion-toggle').on('shown', function () {
 $(this).addClass('active') });

$('.accordion-toggle').on('hidden', function () {
 $(this).removeClass('active') }); 
```

后文件准备功能。

# python - Python（PIL）：使透明图像变亮并粘贴到另一个

> ID：13662184
> 
> 赞同：3
> 
> 时间：2012-12-01T18:06:03.163
> 
> 标签：python, transparency, python-imaging-library, imaging

我有两个相同大小的 png 图像（A 和 B），第二个（B）是部分透明的。

如果我使用代码将图像 B 粘贴到图像 A 中

```
base.paste(overlay, mask=overlay) 
```

我得到了它们的近乎完美的组合。

但是我想在将图像 B 粘贴到图像 A 之前使其变亮。我尝试使用像 Image.new("L", size, 80) 这样的蒙版，我可以用它使图像（B）变亮，但它也会使图像变暗（ A) 并且不得修改。

在命令行上，我可以像这样使用 ImageMagick 做我想做的事：

```
composite -dissolve 40 overlay.png base.png result.png 
```

这正是我所需要的，但我怎么能用 python 做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-09T14:47:03.470

根据我自己的理解，溶解选项仅修改 Alpha 通道。因此，如果您希望您的 alpha 通道仅保留其值的 40%，您可以在 PIL 中执行相同的操作：

```
from PIL import Image

overlay = Image.open('overlay.png')
base = Image.open('base.png')

bands = list(overlay.split())
if len(bands) == 4:
    # Assuming alpha is the last band
    bands[3] = bands[3].point(lambda x: x*0.4)
overlay = Image.merge(overlay.mode, bands)

base.paste(overlay, (0, 0), overlay)
base.save('result.png') 
```

在这段代码中，我将图像分割成多个波段。如果有四个，我假设最后一个代表 alpha 通道。所以我只需将其值乘以 0.4 (40%)，然后创建一个新图像以粘贴到基础图像上。

# c# - 逆波兰符号计算器：抓取输入并显示结果

> ID：13662185
> 
> 赞同：0
> 
> 时间：2012-12-01T18:06:06.717
> 
> 标签：c#

我能够创建一个执行逆波兰表示法的函数。该方法的结构很好，我遇到的两个问题是如何获取用户输入的公式`textBox1`并在`textBox2`. 我已分配给`textBox1`变量`rpnValue`，但它给出了错误消息`A field initializer cannot reference the non-static field, method, or property 'modified_rpn.Form1.textBox1'`。那么我如何再次获取用户输入的公式`textBox1`并在多行`textBox2上显示答案（公式=答案）？

**代码**

```
namespace rpn
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        string rpnValue = textBox1.Text; 

        private void RPNCalc(rpnValue)
        {
            Stack<int> stackCreated = new Stack<int>();
            try
            {
                var tokens = rpnValue.Replace("(", " ").Replace(")", " ")
                                     .Split().Where(s => !String.IsNullOrWhiteSpace(s));
                foreach (var t in tokens)
                {
                    try
                    {
                        stackCreated.Push(Convert.ToInt32(t));
                    }
                    catch
                    {
                        int store1 = stackCreated.Pop();
                        int store2 = stackCreated.Pop();
                        switch (t)
                        {
                            case "+": store2 += store1; break;
                            case "-": store2 -= store1; break;
                            case "*": store2 *= store1; break;
                            case "/": store2 /= store1; break;
                            case "%": store2 %= store1; break;
                            case "^": store2 = (int)Math.Pow(store1, store2); break; 
                            default: throw new Exception();
                        }
                        stackCreated.Push(store2);
                    }
                }

                if (stackCreated.Count != 1)
                    MessageBox.Show("Please check the input");
                else
                    textBox1.Text = stackCreated.Pop().ToString();

            }
            catch
            {
                MessageBox.Show("Please check the input");
            }

            textBox2.AppendText(rpnValue);
            textBox1.Clear();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            RPNCalc(textBox1, textBox2);
        }
    }
} 
```

![在此处输入图像描述](../Images/823a1d9c26eb7423846b87a440910fa3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:19:03.340

three problems with your code :

first is, its illogical to access value of a textbox's text at line: `string rpnValue = textBox1.text` and secondly,

```
private void button1_Click(object sender, EventArgs e)
        {
            RPNCalc(textBox1, textBox2);
        } 
```

here, you can see that you're supplying 2 arguments to `RPNCalc()` when its actually only expecting one. You need to seriously understand what you're trying to do here. Also you donot specify the "type" of value supplied to `RPNCalc()` during the definition of that method.

Re-read your C# book :-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:13:16.200

您需要移动此行：

```
 string rpnValue = textBox1.Text; 
```

在方法或函数内部。你在方法或函数之外拥有它，你不能这样做。

# .net - VB.net 整数计数错误

> ID：13662186
> 
> 赞同：3
> 
> 时间：2012-12-01T18:06:12.497
> 
> 标签：.net, vb.net, winforms, sharpdevelop

所以我正在学习 VB.NET，我有一个新手问题，我在网络上的任何地方都找不到答案。

![该程序](../Images/0bd92f6ffb34893c424d88c65eaf7665.png)

这个程序应该是计数器。每次单击按钮时，标签都应更新。这是我每次单击按钮时的 MouseClick 侦听器代码：

```
Sub Button2MouseClick(sender As Object, e As MouseEventArgs)
    Dim starter As String
    Dim int1 As Integer 
    Dim int2 As Integer 
    Dim ender As String
    starter =label2.Text
    int1 = CInt(starter)
    int2 = (int1 + 1)
    ender = CStr(int2)
    label2.Text = ender
End Sub 
```

该程序有效，但这是问题所在。它只能工作到数字 9。一旦它应该显示“10”时只显示 1，而当它应该显示 11、12、13、14、15、16、17、18 和 19 时，它只显示“1”（第一个数字）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T18:09:13.617

我建议可能，问题在于您已调整标签控件的大小，使其只能显示一个数字。

如果您返回表单设计器并让该标签控件更大，您应该开始能够看到第二个数字。

# css - 如何使背景宽度在悬停时平滑动画

> ID：13662193
> 
> 赞同：0
> 
> 时间：2012-12-01T18:07:02.480
> 
> 标签：css, transition

我在 css 转换方面遇到了一个小问题。

我试图让背景宽度在悬停时动画，它确实有效，但它有点跳动。

我的CSS代码是

```
ul {
    list-style:none;
    margin: 0;
    padding:0;
}
ul li {
    margin-bottom: 8px;
    color:#999;  
}
ul li:hover  {
    color: #FFF;
    background-color: #f6634c;
    width: 200px;
   -webkit-transition: all 0.3s ease-out;
   -moz-transition: all 0.3s ease-out;
   -o-transition: all 0.3s ease-out;
   transition: all 0.3s ease-out;
} 
```

该演示可以在这里看到[http://codepen.io/anon/pen/IFbds](http://codepen.io/anon/pen/IFbds)

它跳动的原因是因为我没有在 li 上指定宽度，但是如果我这样做了，动画背景将不会从左侧开始。我希望宽度在文本的开头设置动画。

此外，它仅在您将鼠标悬停在链接开头附近时才会显示动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:10:29.250

像[这样](http://codepen.io/mythril/pen/JzCes)？

```
ul {
    list-style:none;
    margin: 0;
    padding:0;
    overflow:hidden; /*to clear the floats*/
}
ul li {
    margin-bottom: 8px;
    color:#999;  
    min-width:0px; /*the property we are going to animate, set to specific value*/
    float:left; /*prevent display block from filling up all available width*/
    clear:left; /*prevent float left from putting blocks in-line*/
    display:block;/*cause width to be interpreted my way*/
}
ul li:hover  {
    color: #FFF;
    background-color: #f6634c;
    min-width: 200px; /*BOOM*/
    -webkit-transition: all 0.3s ease-out;
    -moz-transition: all 0.3s ease-out;
    -o-transition: all 0.3s ease-out;
    transition: all 0.3s ease-out;
} 
```

# php - 使用php上传文件时添加一个新文件夹

> ID：13662195
> 
> 赞同：0
> 
> 时间：2012-12-01T18:07:18.067
> 
> 标签：php

我想使用用户的电子邮件地址自动创建一个文件夹（如果尚不存在）。此操作应在他们上传文件时发生。

解决了。我为可能需要它的任何人更新了此代码。谢谢！

这是我的代码：

```
if(isset($_POST["checkFile"]) && $_FILES["selectFile"]["name"] != "") {
            $target_path_pdf = "uploads/pdfs/$email/";

            if ( ! is_dir($target_path_pdf)) {
                mkdir($target_path_pdf);
            }

            $target_path_pdf = $target_path_pdf . str_replace(' ', '_', basename($_FILES["selectFile"]["name"]));
            if(move_uploaded_file($_FILES["selectFile"]["tmp_name"], $target_path_pdf)) {
            }
            else {
                $flag = 1;
            }
            $pdfcaption = $_POST['pdfCaption1'];
        }

        if(isset($_POST["checkPicture"]) && $_FILES["selectPicture"]["name"] != "") {
            $target_path_pic = "uploads/pictures/$email/";

            if ( ! is_dir($target_path_pic)) {
                mkdir($target_path_pic);
            }

            $target_path_pic = $target_path_pic . str_replace(' ', '_', basename($_FILES["selectPicture"]["name"]));
            if(move_uploaded_file($_FILES["selectPicture"]["tmp_name"], $target_path_pic)) {
            }
            else {
                $flag = 1;
            }
            $piccaption = $_POST['picCaption1'];
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:22:46.607

这可能不是超级安全，但这是一个不同的问题。

对于第一部分：

```
$target_path_pdf = "uploads/pdfs/$email/";

if(!is_dir($target_path_pdf)){
    mkdir($target_path_pdf);
} 
```

[http://php.net/manual/en/function.mkdir.php](http://php.net/manual/en/function.mkdir.php)

**编辑**

尽管这可能很明显，但解释一下也无妨。该脚本只是检查目录是否已经存在，如果不存在，它会创建一个。

# php - SQL：获取引用表中 ID 与 ID 匹配的行数

> ID：13662197
> 
> 赞同：-2
> 
> 时间：2012-12-01T18:07:33.113
> 
> 标签：php, mysql, sql, database

我有两张桌子：

*   `bid_tag`
*   `bid_tag_design`

    bid_tag：id、tag_design、tag_size、user_id、保留

    big_tag_design：ID、名称

我希望能够查询 bid_tag 表中每个标签设计的数量`WHERE user_id = 0 AND reserved = 0`

然后，我将使用该查询为`CRON`库存水平的每日报告创建一个作业...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:20:49.440

如果您只想要计数而不是按标签计数，那么类似：

```
select count(*)
from bid_tag_design
where user_id = 0 and reserved = 0 
```

这样做，假设 user_id 和 reserved 在该表中。如果bid_tag 具有这些字段中的一个或两个，则仅需要加入，例如：

```
select count(*)
from bid_tag bt join
     bid_tag_design btd
     on bt.bid_tag_id = btd.bid_tag_id
where bt.user_id = 0 and btd.reserved = 0 
```

如果您希望每个设计都有一行，请按以下方式分组：

```
select btd.bid_tag_design_id, count(*) 
```

  从 bid_tag bt 加入 bid_tag_design btd on bt.bid_tag_id = btd.bid_tag_id 其中 bt.user_id = 0 和 btd.reserved = 0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:26:49.780

尝试这个

```
 select tag_design ,count(tag_design) countdesign
     from bid_tag
     where user_id = 0 and reserved = 0
     group by tag_design 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T18:10:00.263

在您发表评论之后，表格之间的链接似乎是相反的。因此，我更改了查询以将架构考虑在内，它应该可以使用：

```
SELECT COUNT(*) as nbDesigns, bid_tag_design.id, bid_tag_design.name
FROM bid_tag_design
  LEFT JOIN bid_tag ON bid_tag.tag_design = bid_tag_design.id
WHERE bid_tag.user_id = 0 AND bid_tag.reserved = 0
GROUP BY bid_tag.tag_design 
```

假设您在 bid_tag_design 中有这个：

```
id | name
1  | design 1
2  | design 2 
```

然后在bid_tag中

```
id | tag_design | user | reserved
1  | 1          | 0    | 0
2  | 1          | 0    | 0
3  | 2          | 0    | 0
4  | 2          | 0    | 0
5  | 1          | 1    | 0
6  | 2          | 2    | 0
7  | 1          | 0    | 0
8  | 1          | 0    | 0
9  | 1          | 3    | 0 
```

那么第二次查询的结果应该是

```
nbDesigns | id | name
4         | 1  | design 1
2         | 2  | design 2 
```

# c# - 使用 MCImageManager 时重复的 AssemblyTitle 属性

> ID：13662199
> 
> 赞同：3
> 
> 时间：2012-12-01T18:07:44.290
> 
> 标签：c#, tinymce, mcimagemanager

我一个小时前刚买了一包 MCImageManager 并设置如下：-

1.  解压 imagemanager 并将其复制到 tinymce 插件目录 (tiny_mce/plugins/imagemanager)。
2.  将 dll 文件从 imagemanager/bin 复制到您的站点根 bin，例如 c:/inetpub/wwwroot/bin
3.  将 imagemanager 添加到 TinyMCE 初始化插件选项。
4.  将 insertimage 添加到 TinyMCE 初始化选项中的按钮列表中。

引用了程序集。

现在，当我构建项目时，我得到 20 个错误，并且都说重复的“AssemblyTitle”属性。

如何解决此错误？

我认为这个错误很可能是因为我重新定义了 MoxieCode.ISharpCode....dll 而且我的应用程序中也有它。

任何建议将不胜感激。

谢谢

# c# - 有没有办法确定单个 SharePoint 列表项是否与 SPQuery/SPView 匹配？

> ID：13662200
> 
> 赞同：0
> 
> 时间：2012-12-01T18:07:52.207
> 
> 标签：c#, sharepoint, sharepoint-2010, sharepoint-workflow, spview

SharePoint 中的标准“警报”功能允许您仅在项目出现在指定视图中时才发出警报。

我想在自定义工作流（c#）中应用类似的逻辑。

给定一个 SPListItem 和 SPView/SPQuery 是否有人知道是否有一种有效的*方法来查看该项目是否属于该视图/是否与查询匹配？

*有效含义，不只是运行查询然后循环查找项目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T00:24:33.087

但是，我有一个想法，如果我修改这个问题[How to query the SPView object](https://stackoverflow.com/questions/4661865/how-to-query-the-spview-object)的答案中讨论的想法。

如果我修改查询以执行视图中的所有过滤器，但还添加一个子句，其中 ID 等于我的项目的 ID，我将返回 1 个结果或 0，然后我可以检查计数。

性能方面我不确定 Mathieu 的建议和这个想法之间哪个更有效？

我明天去调查...

**更新** 我的技术是有效的。我想（从设计的角度来看）在 DB 端而不是通过 XML 查询发生的 ID 检查会更有效。

**非常感谢您的建议 Mathieu。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T23:57:03.217

我还没有在 SPListItem、SPQuery、... 上遇到过这样的方法，它具有这样的功能。检查当前项目是否在返回的集合中似乎不是一个坏主意。但我不会循环遍历所有项目，而是使用 LINQ 查询来帮助您。像这样的东西：

```
itemCollection.Cast<SPListItem>().Any(i => i.ID.Equals(yourItem.ID)); 
```

其中“itemCollection”是您从查询或视图中获得的项目集合。并且“yourItem”是您要检查它是否在集合中的项目。

# jquery - 特定元素上的 jQuery 手风琴点击触发器

> ID：13662205
> 
> 赞同：0
> 
> 时间：2012-12-01T18:08:10.893
> 
> 标签：jquery, jquery-ui-accordion

我对一个简单的 jQuery 手风琴脚本有疑问。我在此页面上使用它来列出一些事件：[http ://www.melisayavas.com/kush-project/](http://www.melisayavas.com/kush-project/)

我遇到的问题是当用户单击包装器内的任何位置时脚本会崩溃。仅当用户单击事件标题时，我才需要折叠脚本。

你可以看到这个有同样问题的 jsfiddle：http: [//jsfiddle.net/mcDeE/](http://jsfiddle.net/mcDeE/)

我正在使用的脚本的完整代码可以在这里找到：http: [//pastebin.com/hJEufLQU](http://pastebin.com/hJEufLQU)

这是 HTML：

```
<div id="va-accordion" class="va-container" style="">
    <div class="va-wrapper">
        <div class="va-slice" style="opacity: 1;">
            <div class="va-title" style="">
                <h2>Relationship, 26 February 2013</h2>
            </div>
            <div class="va-content" style="display: block;">
                <div class="event-left"></div>
                <div class="event-right"></div>
            </div>
        </div>
        <div class="va-slice" style="opacity: 0.2;">
        <div class="va-slice" style="opacity: 0.2;">
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:12:05.343

> 我遇到的问题是当用户单击包装器内的任何位置时脚本会崩溃。仅当用户单击事件标题时，我才需要折叠脚本。

为了获得您想要的结果，您必须在事件传播到达手风琴根元素之前阻止它。您只需要在`.va-content`元素上发生单击时执行此操作。

```
$(function() {
    $('#va-accordion').vaccordion();
    $(".va-content").click(function(e) {
        e.stopPropagation();                    
    });
}); 
```

**为什么这个工作？**

事件从根元素传播到目标元素（捕获阶段），到达目标后，它们会爬回根元素（冒泡阶段）。目标元素是接收事件的元素。

可以在捕获阶段和冒泡阶段都注册事件侦听器。在这里，我们使用 jQuery 在冒泡阶段注册事件。

`stopPropagation`允许阻止通过 DOM 的事件传播。

那是我写的一篇文章，以防您需要有关[W3C 事件模型](https://brunoscopelliti.com/about-events/)的更多信息。

# javascript - Windows 8：等到安装任务完成后再拆除扩展的初始屏幕

> ID：13662207
> 
> 赞同：4
> 
> 时间：2012-12-01T18:08:21.293
> 
> 标签：javascript, windows-8, splash-screen

我目前正在尝试向我的应用程序添加一个扩展的初始屏幕，一旦它完成下载 RSS 提要并在该提要中找到有效的高分辨率图像以制作缩略图，它就会自动删除（在第一次启动应用程序时，这个可能需要 5 秒以上，使用户出现空白屏幕）。

不幸的是，MSDN Extended Splash Screen 示例并没有太大帮助，因为他们通过按下按钮而不是等待各种嵌套功能完成来关闭它们。我发现的其他示例跳过了对应用程序编程相对较新的人没有帮助的重要细节。

```
app.onactivated = function (args) {
    if (args.detail.kind === activation.ActivationKind.launch) {
        if (args.detail.previousExecutionState !== activation.ApplicationExecutionState.terminated) {
            // TODO: This application has been newly launched. Initialize
            // your application here.
        } else {
            // TODO: This application has been reactivated from suspension.
            // Restore application state here.
        }

        performSetupTasks();
        // Retrieve splash screen object.
        var splash = args.detail.splashScreen;
        // Display the extended splash screen.
        displayExtendedSplash(splash);

        args.setPromise(WinJS.UI.processAll().then(removeExtendedSplash()));            
    }
}; 
```

相反，上面的代码立即删除了扩展的启动画面；我是否需要在报告`performSetupTasks()`不完整的代码中添加任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T12:15:14.427

问题是您可能正在您的`performSetupTasks();`方法中执行异步操作。

重构您的代码以返回该承诺，因此只有在该承诺完成后才会删除启动画面：

```
function removeExtendedSplash() {
    var promise = WinJS.xhr(...);
    promise.then(function(result) { ... });
    return promise;
} 
```

`args.setPromise(removeExtendedSplash());`

你也可以试试这个扩展的闪屏实现：[https ://gist.github.com/peterakacs/5330117](https://gist.github.com/petertakacs/5330117)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T21:06:14.040

在进入应用程序之前暂停闪屏显示的脚本...</p>

1.) 在“app.onactivated = function (args) { if (args.detail.kind === activation.ActivationKind.launch) {”之后在 default.js 添加下面的代码

```
 pauseDisplayOfSplashScreen(2500); 
```

2.)在app.oncheckpoint = function(args)之上，添加以下函数。

```
 function pauseDisplayOfSplashScreen(milliseconds) {
    milliseconds += new Date().getTime();
    while (new Date() < milliseconds) { }
} 
```

为了让您清楚地理解，这里是完整的启动屏幕暂停工作 default.js：

```
 // For an introduction to the Blank template, see the following documentation:
   // http://go.microsoft.com/fwlink/?LinkId=232509
  (function () {
    "use strict";

     WinJS.Binding.optimizeBindingReferences = true;

      var app = WinJS.Application;
      var activation = Windows.ApplicationModel.Activation;

app.onactivated = function (args) {
    if (args.detail.kind === activation.ActivationKind.launch) {

        //pause for two seconds
        pauseDisplayOfSplashScreen(2500);

        if (args.detail.previousExecutionState !==   activation.ApplicationExecutionState.terminated) {
            // TODO: This application has been newly launched. Initialize
            // your application here.
        } else {
            // TODO: This application has been reactivated from suspension.
            // Restore application state here.
        }
        args.setPromise(WinJS.UI.processAll());
    }
};

function pauseDisplayOfSplashScreen(milliseconds) {
    milliseconds += new Date().getTime();
    while (new Date() < milliseconds) { }
}
app.oncheckpoint = function (args) {
    // TODO: This application is about to be suspended. Save any state
    // that needs to persist across suspensions here. You might use the
    // WinJS.Application.sessionState object, which is automatically
    // saved and restored across suspension. If you need to complete an
    // asynchronous operation before your application is suspended, call
    // args.setPromise().

};

app.start();

 })(); 
```

希望这能解决你的问题:)

# python - Flask-SQLAlchemy 单表上的多对多关系

> ID：13662208
> 
> 赞同：0
> 
> 时间：2012-12-01T18:08:24.677
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

我正在尝试使用 Flask-SQLAlchemy 建立多对多关系，以便我可以为 Videos 表中的每个条目创建一个“相关视频”列表。

```
class Videos(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    title = db.Column(db.String(100), unique=False)

    related_videos = db.relationship("Videos", \
        secondary = "related_videos", \
        primaryjoin="id==related_videos.c.video_id", \
        secondaryjoin = "id==related_videos.c.related_id", \
        backref ="related_to")

    def __init__(self, title, ytid):
        self.title = title

related_videos = db.Table("related_videos", \
    db.Column("video_id", db.Integer, db.ForeignKey("Videos.id")), \
    db.Column("related_id", db.Integer, db.ForeignKey("Videos.id"))) 
```

当我尝试添加新条目时，例如`example = Videos("foobar")`出现错误：

> sqlalchemy.exc.ArgumentError：无法在关系 Videos.related_videos 上确定 primaryjoin 条件“related_videos.video_id = :video_id_1”的关系方向。

我不确定为什么它不起作用 - 据我所知，我正在做与 SQLAlchemy 文档几乎相同的事情（尽管我可能错了！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T05:17:49.863

您似乎在“related_videos”表中有两个同名的外键（Videos.id）。

不应该命名为“related.id”吗？

此外，您将您的关系命名为与整个表相同的名称，我也不确定这是否正确。

# python - 分段错误（核心转储），执行线程

> ID：13662209
> 
> 赞同：4
> 
> 时间：2012-12-01T18:08:36.097
> 
> 标签：python, multithreading, pyqt

我试图在 python 中运行一个程序，该程序打开一个程序并从它的标准输出中读取。当我运行程序代码时，我遇到了分段错误错误，但是当我将代码放入函数 Myfunc 的线程之外时，它可以完美地工作！我不明白发生了什么：这是我的代码：

```
class Workspace(QMainWindow, Ui_MainWindow):
    """ This class is for managing the whole GUI `Workspace'.
        Currently a Workspace is similar to a MainWindow
    """

    def __init__(self):
        #p= subprocess.Popen(["java -Xmx256m -jar bin/HelloWorld.jar"],cwd=r'/home/karen/sphinx4-1.0beta5-src/sphinx4-1.0beta5/', shell=True, stdout=subprocess.PIPE, bufsize= 4024)
        try:
            from Queue import Queue, Empty
        except ImportError:
            while True:
    #from queue import Queue, Empty  # python 3.x
                print "error"

        ON_POSIX = 'posix' in sys.builtin_module_names

        def enqueue_output(out, queue):
            for line in iter(out.readline, b''):
                queue.put(line)
            out.close()

        p= Popen(["java -Xmx256m -jar bin/HelloWorld.jar"],cwd=r'/home/karen/sphinx4-1.0beta5-src/sphinx4-1.0beta5/',stdout=PIPE, shell=True, bufsize= 4024)
        q = Queue()
        t = threading.Thread(target=enqueue_output, args=(p.stdout, q))
        #t = Thread(target=enqueue_output, args=(p.stdout, q))
        t.daemon = True # thread dies with the program
        t.start()

# ... do other things here
        def myfunc(q):
            while True:

                try: line = q.get_nowait()
         # or q.get(timeout=.1)
                except Empty:
                    print('Vacio')
                else: # got line
    # ... do something with line

                    print line  

        thread = threading.Thread(target=myfunc, args=(q,))
        thread.start() 
```

错误：

```
Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-20T19:06:34.633

我最近遇到了同样的问题。我通过子进程从运行良好的依赖 GUI 线程调用了很多 shell 命令，但一个只是拒绝正常工作并出现段错误。我遇到的不同之处在于，我正试图从主 GUI 线程运行它，而当我试图发出通常从子线程发出的信号时，它出现了段错误！

我避免段错误的解决方案是将需要一些 shell 参与的对话框部分移动到单独的**QThread**，有效地继承了我的应用程序中其他线程正在使用的相同公共类。问题消失了！**QThread**是关键！

代码架构：

```
class Dialog(QtGui.QDialog):

     def __init__(self):
         ...
         QtCore.QObject.connect(self.ui.listwidget_a, QtCore.SIGNAL("itemClicked(QListWidgetItem)", self.do_work)
         ...

     def do_work(self, qlistwidgetitem):
         ...
         wc = WorkerClass(str(qlistwidgetitem.text()))
         wc.start()
         wc.wait()
         my_result = wc.getResult()

 class WorkerClass(CommonClass):
     string = ""
     result = ""
     def __init__(string)
         super(WorkerClass, self).__init__()
         self.string = string

     def run():
         self.execute_shell(self.string)
         self.result = self.shell_output

     def get_result(self):
         return self.result

  class CommonClass(QtCore.QThread):

     self.shell_output = ""

     def execute_shell(string):
         ...
         p = Popen(...)
         self.shell_output, self.shell_error = p.communicate()
         self.output_ready.emit(self.shell_output) 
# that last line is where i was segfaulting 
# before I made WorkerClass (my dialog class was 
# inherinting CommonClass directly but it wasn't 
# working in separate thread) 
```

我希望这会有所帮助！

# jquery - 调整容器大小的功能问题

> ID：13662210
> 
> 赞同：0
> 
> 时间：2012-12-01T18:08:38.827
> 
> 标签：jquery, css, joomla2.5

我正在开发一个 Joomla 2.5 模板，并具有三个顶部、容器和页脚。由于我在将“容器”设置为最小高度：100% 时遇到了很多问题，所以我依靠 jquery。我正在使用的代码工作正常，除了在需要滚动白色透明度的页面上覆盖初始视图下方的内容（所以从滚动条向下的所有内容。）示例可以在[http://development.aycdesign 查看。净/皮肤/治疗/它的作品](http://development.aycdesign.net/skin/treatments/it-works)

这是代码

第 1 部分：index.php

```
<?php                               
defined('_JEXEC') or die;
JHTML::_('behavior.framework', true);
$app = JFactory::getApplication(); 
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" ><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" >
<head>
<jdoc:include type="head" />
<link rel="stylesheet" href="../<?php echo $this->baseurl ?>/templates/<?php echo $this->template ?>/css/default.css" type="text/css" />
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" /> 
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
<script>
//Initial load of page
$(document).ready(sizeContent);

//Every resize of window
$(window).resize(sizeContent);

function sizeContent() 
{
    var contentHeight = $("#container").height();
    var newHeight = $("html").height() - $("#top").height() - $("#footer").height();
    if (contentHeight < newHeight)
    {
        $("#container").css("height", newHeight + "px");
    }
}
</script>
</head>

<html>
<body>
<?php if($this->countModules('top')) : ?>
    <div  id="top">
        <jdoc:include type="modules" name="top" style="none"/>
    </div>
<?php endif; ?>
<?php if($this->countModules('mnav')) : ?>
    <div id="mnav">
        <jdoc:include type="modules" name="mnav" style="none"/>
    </div>
<?php endif; ?>
    <div id="container">
        <jdoc:include type="component" />
    </div>
<?php if($this->countModules('footer')) : ?>
    <div id="footer">
        <jdoc:include type="modules" name="footer" style="none"/>
    </div>
<?php endif; ?>

</body>
</html> 
```

第 2 部分：default.css

```
/* ******************************************************************** */ 
/* Wire Frame                                                           */
/* ******************************************************************** */
html,body,div,span,ul,ol,dl,li,dt,dd,h1,h2,h3,h4,h5,h6,form,fieldset,label,input,textarea,p,th,td {
    margin:0;
    padding:0;
}

html, body {
    height: 100%;
    background: rgba(0,0,0,.5);
    color: #FFF;
    text-align: center;
    font-family: arial narrow, sans-serif;
    font-size: .9em;
    line-height: 1.35;
    letter-spacing: 1.75px
}

#top {
    background: rgb(0,0,0);
    color: rgb(255,255,255);
}

#top .custom {
    text-align: right;
    margin: 0 auto;
    width: 80%;
    max-width: 1280px;
    padding: .5em 0 .5em 0;
}

#container {
    background: rgba(0,0,0,.3);
    text-align: left;
    margin-right: auto;
    margin-left: auto;
    width: 80%;
    max-width: 1280px;
}

#footer {
    background: rgb(0,0,0);
    color: rgb(255,255,255);
}

#footer .custom {
    text-align: right;
    margin: 0 auto;
    width: 80%;
    max-width: 1280px;
    padding: .5em 0 .5em 0;
}

/* ******************************************************************** */ 
/* HTML                                                                 */
/* ******************************************************************** */
a, a:visited, a:hover {
    color: #cf3f57;
    text-decoration: underline;
}

a img {
    border: none;
}

li {
    margin-left: 0;
    list-style-position: inside;
}

h1, h2, h3 {
    color: #cf3f57;
    text-transform: uppercase;    
    margin-bottom: 5px;
    letter-spacing: -1px;
    line-height: 1.15em;
}

fieldset
{
     border: none;
}

input {
    padding: 5px;
    margin: 10px 10px 10px 0;
    border: none;
}

input.button {
    padding: 5px;
    border: none;
    background: #252525;
    color: #AEAEAE;
}

.search label {
    display: none;
}

/* ******************************************************************** */ 
/* Joomla Elements                                                      */
/* ******************************************************************** */
.readmore { 
    color: #000;
    background: url('../images/read_more.png') no-repeat;
    margin-top: 10px;
    padding: 5px 0 5px 10px;
}

.readmore a{
    color:  #000;
    font-weight: bold;
    text-transform: uppercase;
    text-decoration: none;
}

.blog-featured h1,
.item-page h1 {
    display: none;
}

ul.actions li {
    list-style: none;
    display: inline;
    padding: 5px;
}

.item.column-1, .item.column-2, .item.column-3 {
    padding: 10px;
}

.archive,
.userdata,
.search,
.item-page,
.items-leading, 
.item.column-1, 
.item.column-2, 
.item.column-3 {
    padding: 12em 1em 1em 1em;
}

.items-more {
    margin-left: 20px;
}

.items-more ol {
    padding-bottom: 10px;
}

.items-more li {
    display: inline;
    padding-right:  5px;

}

.pagination {
    margin-left: 20px;
    margin-bottom: 10px;
}

.pagination-start {
    margin-left: -10px;
}

.pagination li{
    display: inline;
    padding: 0 10px;
}

.counter {
    margin-bottom: 5px;
}

.archive-items,
.moduletable li {
    margin-bottom: 5px;
    list-style: none;
}

.moduletable {
    padding: 10px;
}

.article-info {
    padding: 10px;    
}

.archive h2 {
    display: none;
}

.intro,
.filters {
    margin-bottom: 10px;
}

/* ******************************************************************** */ 
/* Joomla Blog Elements                                                 */
/* ******************************************************************** */
.cols-1 {
display: block;
float: none !important;
margin: 0 !important;
}

.cols-2 .column-1 {
float: left;
width: 46%;
}

.cols-2 .column-2 {
float: right;
margin: 0;
width: 46%;
}

.cols-3 .column-1 {
float: left;
margin-right: 4%;
width: 27%;
}

.cols-3 .column-2 {
float: left;
margin-left: 0;
width: 27%;
}

.cols-3 .column-3 {
float: right;
width: 27%;
}

.items-row {
margin-bottom: 0px !important;
overflow: visible;
}

.column-1, .column-2, .column-3 {
}

.column-2 {
margin-left: 40%;
width: 55%;
}

.column-3 {
width: 30%;
}

.blog-more {
padding: 10px 5px;
}

/* ******************************************************************** */ 
/* Main Menu                                                            */
/* ******************************************************************** */
#mnav .moduletable {
    margin: 0;
    padding: 0;
}

#mnav {
    width: 100%;
    padding: .5em 0 .5em 0;
    background: rgba(255, 255, 255, 0.5);
    position: absolute;
    top: 3em;
    z-index: 1000;
}

#mnav ul {
    width: 80%;
    max-width: 1280px;
    margin: 0 auto;
    padding: 0;
}

#mnav ul li:first-child {
    margin: 0;
    padding: 0;
}

#mnav ul li {
    margin-top: 3.5em;
    list-style: none;
    float: left;
    position: relative;
}

#mnav ul li a {
    display: block;
    padding: 0 1em;
    color: rgb(17, 17, 20);
    font-size: 1.25em;
    text-decoration: none;
    text-transform: uppercase;
}

#mnav ul li a:hover {
    color: rgb(207,63,87);
}

#mnav ul li ul {
    position: absolute;
    left: -1999em;
}

#mnav ul li:hover ul,
#menu ul li.parent ul {
    left: 0;
}

#mnav ul li ul li {
    width: 20em;
    margin: 0;
}

#mnav ul li:hover ul li {
    background: none;
}

#mnav ul li:hover ul li a,
#mnav ul li ul li a {
    margin-top: .1em;
    margin-bottom: .1em;
    background: rgba(255,255,255,0.5);
    padding: .7em 1em .7em 1em;
    font-size: .8em;
}

#mnav ul li ul li a:hover,
#mnav ul li.active ul li a:hover {
    color: rgb(207,63,87);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T23:05:50.553

首先，删除那个 jQuery 脚本。

然后从 default.css 中删除 - html, body {

```
height: auto !important; 
```

然后添加到#outer-container

```
margin-bottom: -33px;
margin-top: -33px;
height: 100%;
min-height:100%; 
```

并为#inner-container 提供更多（+2em）padding-top

# ruby-on-rails - 将“2012 年 5 月 23 日”变成日期？

> ID：13662218
> 
> 赞同：1
> 
> 时间：2012-12-01T18:09:22.137
> 
> 标签：ruby-on-rails, ruby

我正在解析一些数据，然后尝试将其保存到 Rails 中的数据库中。

我将一些文本解析为字符串“23/May/2012”，我现在的目标是弄清楚如何将该字符串转换为可以通过 ActiveRecord 保存到数据库的日期。

如果我在 IRB 中使用直接 Ruby 与尝试将其存储在 Rails DB 中，那么解决方法会有所不同吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T18:13:34.730

试试这个：

```
require 'date'

row.date = Date.parse( "23/May/2012" )
#=> #<Date: 2012-05-23 ((2456071j,0s,0n),+0s,2299161j)> 
```

这假设您的`date`列是一种`Date`类型。为`DateTime`使用`DateTime.parse`和`Time.parse`为`Time`.

这应该适用于您的应用程序和 IRB。

# ruby-on-rails - 用户路线 - Rails

> ID：13662221
> 
> 赞同：4
> 
> 时间：2012-12-01T18:09:55.973
> 
> 标签：ruby-on-rails, ruby, heroku

我在 Rails 应用程序中设置用户路由时遇到问题。

在 routes.rb 我添加了`resources :users`.

```
TestApp::Application.routes.draw do
     resources :users

  root :to => 'xxx#home' 
  match '/about', to: 'xxx#about'
  match '/test', to: 'xxx#test'
  match '/news', to: 'xxx#news'
  match '/signup', to: 'users#new'

end 
```

在 users_controller.rb 我添加了：

```
class UsersController < ApplicationController
  def new
  end

    def show
    @user = User.find(params[:id])
    end
end 
```

我创建了带有以下行的新 show.html.rb 文件：

```
<%= @user.name %>, <%= @user.email %> 
```

但是当我部署到 heroku 时，我得到了这个信息，但我看不到那个页面。

```
heroku[router]: at=info method=GET path=/users/1 
```

有什么解决办法吗，还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T07:05:17.650

您确定`id=1`heroku 上存在的用户吗？如果有，你用过吗？

```
$ heroku run console 
```

此命令在生产环境中打开 rails 控制台。在里面，你做过类似的事情吗？

```
u = User.create(somehash_with_attrs)
# .. or
u = User.new
# ... 
u.save
u.id # => 1 or 23
# If your are not sure which id your user has try the following
User.first.id 
```

您是否知道这`yourapp.domain/users/1`指向用户记录，`id=1` **而不是**数据库中的第一条记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T05:12:42.647

让我们看看您的迁移文件。PG 找不到名为 Users 的表（强调复数）。因此，在您运行迁移之后，它看起来像是找到了表。

您是如何在控制台中创建用户的？如果你使用过，比如 u = User.new 或 u = User.build，请确保执行 u.save 以确保它实际保存到数据库中。

# objective-c - 从 PHP structArray 解析 XMLRPC for Objective C for Iphone 就像 Android 应用程序中 Java 的 HashMap

> ID：13662224
> 
> 赞同：4
> 
> 时间：2012-12-01T18:10:01.903
> 
> 标签：objective-c, xcode, xml-rpc

基本上需要将java代码翻译成objective-c，以便为iphone的View Controller做好准备。

XML-RPC PHP 代码

```
$structArray[] = new xmlrpcval(array(
            'graffer'  => new xmlrpcval($graffer),
            'thumb'    => new xmlrpcval($thumb),
            'titletag' => new xmlrpcval($titletag),                         
            'content'  => new xmlrpcval($content),
            'created'  => new xmlrpcval($date_time),
            'params'   => new xmlrpcval($params),
            'cid'      => new xmlrpcval($cid),
            'id'      => new xmlrpcval($id)
        ), 'struct');                   
    }   
return new xmlrpcresp(new xmlrpcval($structArray , $xmlrpcArray)); 
```

PHP XML-RPC 响应

回复：

```
<methodResponse>
<params>
<param>
<value><array>
<data>
<value><struct>
<member><name>graffer</name>
<value><string>axl jordan</string></value>
</member>
<member><name>thumb</name>
<value><string></string></value>
</member>
<member><name>titletag</name>
<value><string>axl jordan New Graffer1 Member</string></value>
</member>
<member><name>content</name>
<value><string></string></value>
</member>
<member><name>created</name>
<value><string>WEEK AGO</string></value>
</member>
<member><name>params</name>
<value><string>default.jpg</string></value>
</member>
<member><name>cid</name>
<value><string>292</string></value>
</member>
<member><name>id</name>
<value><string>1985</string></value>
</member>
</struct></value>
<value><struct>
<member><name>graffer</name>
<value><string>Core</string></value>
</member>
<member><name>thumb</name>
<value><string></string></value>
</member>
<member><name>titletag</name>
<value><string>Core New Graffer1 Member</string></value>
</member>
<member><name>content</name>
<value><string></string></value>
</member>
<member><name>created</name>
<value><string>WEEK AGO</string></value>
</member>
<member><name>params</name>
<value><string>default.jpg</string></value>
</member>
<member><name>cid</name>
<value><string>291</string></value>
</member>
<member><name>id</name>
<value><string>1984</string></value>
</member>
</struct></value>
<value><struct>
<member><name>graffer</name>
<value><string>amputate</string></value>
</member>
<member><name>thumb</name>
<value><string></string></value>
</member>
<member><name>titletag</name>
<value><string>amputate New Graffer1 Member</string></value>
</member>
<member><name>content</name>
<value><string></string></value>
</member>
<member><name>created</name>
<value><string>WEEKS AGO</string></value>
</member>
<member><name>params</name>
<value><string>default.jpg</string></value>
</member>
<member><name>cid</name>
<value><string>290</string></value>
</member>
<member><name>id</name>
<value><string>1983</string></value>
</member>
</struct></value>
</data>
</array></value>
</param>
</params>
</methodResponse> 
```

Java Android HashMap

```
private void MyG1Activity(Object[] results) {       
    myG1Acts = new ArrayList<HashMap<String,Object>>();
    Globals myGlobal = (Globals)getApplicationContext();        
    String TimageUrl = myGlobal.imageUrl;
    HashMap<String,Object>hm = null;
    for (Object o : results){           
        HashMap <?,?> map = (HashMap<?,?>)o;
        hm = new HashMap<String,Object>();
        Object graffer1 = map.get(GRAFFER);
        if(graffer1 != null){
            lGraffer1 = graffer1.toString();
            hm.put(GRAFFER, lGraffer1);
        }
        Object tthumbnail = map.get(THUMB);
        if(tthumbnail != null){   
            lThumbnail = TimageUrl + tthumbnail.toString();
            bitmap = ImageManager.displayImage(lThumbnail);             
            hm.put(THUMB, bitmap);
        }   
        Object ttag = map.get(TITLETAG);
        if( ttag != null ){
            ltag = ttag.toString();
            hm.put(TITLETAG, ltag); 
        }
        Object tcontent = map.get(CONTENT);
            if( tcontent != null ){
                hm.put(CONTENT, tcontent);
            }
        Object tCreated = map.get(CREATED);
            if( tCreated != null ){
                hm.put(CREATED, tCreated);
            }
        Object tParams = map.get(PARAMS);
            if( tParams != null){
                if (tParams.toString() == DEFAULT_THUMBNAIL){
                    lThumbnail = TimageUrl + tParams.toString();
                }else{
                    jParams = TimageUrl + tParams.toString();
                    jParams = jParams.replace("Vs ", "\"/><img src=\"" + TimageUrl );
                    hm.put(IMAGE, jParams);  
                }
            }
        Object tcid = map.get(CID);
            if( tcid != null ){
                hm.put(CID, tcid);
            }
        Object tid = map.get(ID);
            if( tid != null ){
                hm.put(ID, tid);
                getMoreID =  Integer.valueOf(tid.toString());
            }   
            myG1Acts.add(hm);
    }   

} 
```

xcode中控制台的输出

```
{
cid = 292;
created = "WEEK AGO";
graffer = "axl jordan";
id = 1985;
params = "default.jpg";
titletag = "axl jordan New Graffer1 Member";} 
```

> ```
> int k = 1;
> for (NSDictionary *key in finalData) {
>     NSString *cid = [key objectForKey:@"cid"];        
>     NSLog(@"key %d is %@",k++ ,cid);
>     NSString *titleTag = [key objectForKey:@"titletag"];
>     NSLog(@"key %d is %@",k++ ,titleTag);
> } 
> ```

找到了我自己的答案

> NSDictionary *key = [returnedPost objectAtIndex:indexPath.row];
> NSString *titleTag = [key objectForKey:@"titletag"];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T17:44:47.240

xcode中控制台的输出

```
{
cid = 292;
created = "WEEK AGO";
graffer = "axl jordan";
id = 1985;
params = "default.jpg";
titletag = "axl jordan New Graffer1 Member";} 
```

> ```
> int k = 1;
> for (NSDictionary *key in finalData) {
>     NSString *cid = [key objectForKey:@"cid"];        
>     NSLog(@"key %d is %@",k++ ,cid);
>     NSString *titleTag = [key objectForKey:@"titletag"];
>     NSLog(@"key %d is %@",k++ ,titleTag);
> } 
> ```

找到了我自己的答案

> NSDictionary *key = [returnedPost objectAtIndex:indexPath.row];
> NSString *titleTag = [key objectForKey:@"titletag"];

# java - 在 Mac OSX 10.7.5 服务器上安装 Java 7 后，所有 java 窗口都为空白

> ID：13662227
> 
> 赞同：9
> 
> 时间：2012-12-01T18:10:27.453
> 
> 标签：java, osx-lion

我最近在 Mac OSX 10.7.5 服务器上升级到了 JDK 7。在我的机器 webstart 上运行的所有 java 程序的所有 java 窗口现在都是空的。甚至 Java 控制面板也是一个空白屏幕。我曾尝试卸载重新安装 JDK，但我没有运气。

有没有人对如何解决这个问题有任何想法？

谢谢托德

![Java 控制面板](../Images/93382d20c233ca8313466e53c0367a8f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T06:01:57.843

卸载并重新安装 JRE 并没有解决窗口问题

以下是我使用 10.7.5 解决此问题的步骤：

1.  卸载 JRE7：[https ://www.java.com/en/download/help/mac_uninstall_java.xml](https://www.java.com/en/download/help/mac_uninstall_java.xml)
2.  重新开始
3.  为 OS X 2012-006 安装 Java
4.  重新开始
5.  安装 JRE7 [http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1637588.html](http://www.oracle.com/technetwork/java/javase/downloads/jre7-downloads-1637588.html)
6.  重新开始

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T03:11:27.350

我的 10.7.5 服务器也遇到了同样的问题 djdarkbeat 的答案对我不起作用，过去几个月我一直在寻找解决方法（除了升级到山狮）

今天我安装了最新版本的 Java for OS X 2013-003 和 Java 7u17。java控制面板窗口在第一次打开时仍然不会绘制，我已经能够最小化和最大化一次只进行一次绘制。使用这种疯狂的方法，我已经能够检查设置并部分让我的一些 Java 应用程序正常工作。

这不是一个完整的解决方案（还），但当他们意识到其他解决方案不起作用时，它可能会帮助他们到达某个地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-08T19:17:51.470

如果您在遵循 djdarkbeat 的回答后仍然遇到此问题并且您正在运行无头 mac mini，那么您可能遇到[了这个苹果支持线程末尾](https://discussions.apple.com/thread/4670680?start=15&tstart=0)提到的错误。

# 解决方案

1.  ^([感谢这篇文章](https://discussions.apple.com/message/22190232#22190232))，将显示器连接到 DVI 或 HDMI 端口（使用 Mini DisplayPort 适配器连接到 HDMI、DVI、VGA 等）
2.  降级为雪豹
3.  [构建一个虚拟监视器加密狗](https://macminicolo.net/blog/files/build-a-dummy-dongle-for-a-headless-mac-mini)来欺骗 Mac mini 加载视频驱动程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-18T14:45:20.380

因为我实际上并不需要 7，（但这对于通过基于 Java 的管理控制台管理 FileMaker 服务器来说真的很麻烦，）我只是按照 Apple 在此处发布的说明回滚到 6（在确保我有来自软件更新的 Apple 6 的补丁版本，通过`java -version`在终端窗口中检查）：http: [//support.apple.com/kb/HT5559](http://support.apple.com/kb/HT5559)

# html - SVG 动画 - stroke-dashoffset 在 Chrome 和 FF 中的行为不同

> ID：13662229
> 
> 赞同：1
> 
> 时间：2012-12-01T18:10:35.610
> 
> 标签：html, animation, svg

所以我正在制作这个动画[http://codepen.io/rezen/pen/vEgqs](http://codepen.io/rezen/pen/vEgqs)，在底部你可以看到路径上动画的属性

```
<animate attributeName="stroke-dashoffset" values="600;0" begin="0s" dur="8s" repeatCount="indefinite" /> 
```

在 Chrome 中动画是一个适当的速度，但在 FireFox 中它移动得非常快。如果我将它更改`values="600;0"`为更小的东西，比如`values="60;0"`在 FireFox 中它看起来是正确的，但是在 Chrome 中它的动画非常慢。

怎么了？

# jquery - 带有 data-position="fixed" 的 jQuery Mobile NavBar 浮动到中间

> ID：13662230
> 
> 赞同：0
> 
> 时间：2012-12-01T18:10:50.147
> 
> 标签：jquery, jquery-mobile, navbar

![在此处输入图像描述](../Images/bb312e2bfaf3bb210d471b72d640ca99.png)

在 jQuery mobile 中使用 data-position="fixed" 属性，但在页面更改时它仍会浮动到中间。以前有人有这个问题吗？

```
<div data-role="footer" data-position="fixed" data-id="nav">        
    <div data-role="navbar" data-iconpos="bottom">
        <ul>
            <li><a data-transition="fade" href="#home" data-icon="home" class="ui-btn-active">Map</a></li>
            <li><a data-transition="fade" href="#near" data-icon="search">Near</a></li>
            <li><a data-transition="fade" href="#account"  data-icon="star">Account</a></li>
        </ul>
</div><!-- /navbar --> 
```

* * *

更新

我发现了一些关于 Android 2.2/2.3 上固定位置导航的问题。

我现在正在使用 Ripple Emulator 来测试应用程序，所以我不确定它是否实现了 Android 2.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-09T23:07:43.680

问题与 Ripple 模拟器有关。一旦加载到 Android、iOS、BlackBerry 或 Windows 设备上，问题就不再发生。

# c++ - SDL 多键按下问题

> ID：13662233
> 
> 赞同：1
> 
> 时间：2012-12-01T18:11:05.603
> 
> 标签：c++, events, sdl

我遇到了 SDL 的一个问题 - 同时按下了 wasd 和箭头键 - 在按住 s、d 和 left 和 down 以及 wd 和 up 和 left 键时存在某种不兼容。如果我倾向于使用上面提到的组合，似乎只有 3 个键可以工作，否则，任何其他超过 3 个键的组合都可以很好地工作。下面的代码：事件检查（在 CEvent 类中，调用子函数）

```
switch(Event->type) {
    case SDL_KEYDOWN: {//KEYBOARD_KEYDOWN
        onKeyDown(Event->key.keysym.sym,Event->key.keysym.mod,Event->key.keysym.unicode);
        break;

    }

    case SDL_KEYUP: {//KEYBOARD_KEYUP
        onKeyUp(Event->key.keysym.sym,Event->key.keysym.mod,Event->key.keysym.unicode);
        break;
    }
} 
```

这会调用两个函数，从父类（在 Core 类中，CEvent 的子类中）重写：

```
void Core::onKeyDown(SDLKey sym, SDLMod mod, Uint16 unicode) {
    switch(sym) {
      //pl1
        case SDLK_UP: pl1.pmu = true; break;
        case SDLK_RIGHT: pl1.pmr = true; break;
        case SDLK_DOWN: pl1.pmd = true; break;
        case SDLK_LEFT: pl1.pml = true; break;
      //pl2
        case 'w': pl2.pmu = true; break;
        case 'd': pl2.pmr = true; break;
        case 's': pl2.pmd = true; break;
        case 'a': pl2.pml = true; break;
      case SDLK_ESCAPE: onExit(); break;
  }
}

void Core::onKeyUp(SDLKey sym, SDLMod mod, Uint16 unicode) {
  switch(sym) {
    //pl1
    case SDLK_UP: pl1.pmu = false; break;
    case SDLK_RIGHT: pl1.pmd = false; break;
    case SDLK_DOWN: pl1.pml = false; break;
    case SDLK_LEFT: pl1.pmr = false; break;
    //pl2
    case 'w': pl2.pmu = false; break;
    case 'd': pl2.pmr = false; break;
    case 's': pl2.pmd = false; break;
    case 'a': pl2.pml = false; break;
  }
} 
```

以下是它的调用方式（在 Core 类中，CEvent 的子级）：

```
while( Running ) {
  FPS_START = SDL_GetTicks();
  while( SDL_PollEvent( &Eventhn ) ) {
    onEvent( &Eventhn );
  }
  onLoop();
  onRender();
  regulateFPS();
}
onCleanup(); 
```

我只是无法弄清楚是什么原因导致程序循环，直到缓冲区中没有事件为止。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:37:18.390

这可能是这里描述的关键阻塞现象：[http ://en.wikipedia.org/wiki/Rollover_(key)#Key_blocking_and_ghosting](http://en.wikipedia.org/wiki/Rollover_(key)#Key_blocking_and_ghosting)

你对此无能为力。如果您更换键盘，您可能会很幸运并找到一个与不同的键组合有问题的键盘（希望您没有使用的那个）。

# php - 很少，apc_fetch 不返回现有密钥

> ID：13662234
> 
> 赞同：1
> 
> 时间：2012-12-01T18:11:23.667
> 
> 标签：php, apc

我注意到以下症状： 在第一个 http 请求中，用户执行了一些调用 apc_store(somekey, somevalue) 的操作。在所有情况下，存储操作都返回 TRUE。

在随后的 http 请求中，仅几秒钟后，执行 apc_fetch 以获取先前存储的值。当然，关键是一样的。

在极少数情况下，apc_fetch 返回 FALSE。例如，在我们的生产环境中，540 个请求中有 5 个返回 FALSE。

任何想法如何诊断这个？

tnx

# ember.js - Ember 视图：属性和/或功能？什么是最好的？

> ID：13662240
> 
> 赞同：2
> 
> 时间：2012-12-01T18:12:29.913
> 
> 标签：ember.js

关于 Ember.View 中的自定义属性和函数，我有一个非常简单的问题。我有一个搜索框。如果 touchmove 被触发，10 像素将被添加到左边距。听起来很愚蠢？是的，但这只是一个例子；）

```
App.SearchboxView = Ember.View.extend({
    marginLeftProperty: function(){
        return parseInt(this.$().css("margin-left"));
    }.property(),

    marginLeftFunction: function(){
        return parseInt(this.$().css("margin-left"));
    },

    touchMove: function(e) {
        console.log(this.get("marginLeftProperty"));
        console.log(this.get("marginLeftFunction"));
        old_margin = parseInt(this.$().css("margin-left"));
        new_margin = old_margin + 10;
        this.$().css("margin-left", new_margin+"px"); 
    }
}); 
```

我想通过单独的函数或属性访问边距。因为我不确定我都试过了。一个函数和一个属性。我使用了 console.log 来检查什么效果最好。

* * *

```
console.log(this.get("marginLeftProperty")); 
```

尽管边距在变化，但拖动搜索框多次返回“0”。

* * *

```
console.log(this.get("marginLeftFunction")); 
```

这个总是返回函数本身，而不是值。

那么访问这个值的“最佳”方式是什么？有没有一个技巧来运行一个函数而不是返回它？或者我可以手动更新属性（我认为它是由ember缓存的，因为它返回初始值0但在margin更改后没有更新）

# python - Python - 读取 - 重写文本文件（让我发疯）

> ID：13662242
> 
> 赞同：-1
> 
> 时间：2012-12-01T18:12:31.380
> 
> 标签：python

我是 python 新手，到目前为止我非常喜欢它。我想做以下任务，但我做不到，这让我发疯。

我有一个看起来像这样的file1；

```
a b
c d
e f 
```

我 file2 看起来像这样：

```
g
h
i 
```

我 file3 看起来像这样：

```
j
k
l 
```

我想把file2和file3写入file1，所以file1看起来像这样：

```
a  b  g  j
c  d  h  k
e  f  i  l 
```

基本上处理file1上当前列旁边的其他文件列。我知道为了做到这一点，我必须读取所有文件，然后重新写入文件 1。我试过了，但没有任何效果。请任何人告诉我这段代码应该是什么样子。非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:20:42.577

未经测试：

```
from itertools import izip

filenames = ['1.txt', '2.txt', '3.txt']
files = map(open, filenames)
for lines in izip(*files):
    print ''.join(i.strip() for i in lines) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:40:52.480

这类似于[Jon Clements 的](https://stackoverflow.com/a/13662320/455276)回答，但语法不同：

```
with open('1.txt') as f1, open('2.txt') as f2, open('3.txt') as f3:
    for line in zip(f1,f2,f3):
        print ' '.join(e.strip() for e in line) 
```

印刷：

```
a b g j
c d h k
e f i l 
```

# ruby - 如何配置 capfile 以使用 curl 与 New Relic 通信？

> ID：13662243
> 
> 赞同：2
> 
> 时间：2012-12-01T18:12:49.273
> 
> 标签：ruby, curl, capistrano, newrelic

我正在玩 New Relic，并希望提醒 New Relic 进行部署。我可以在命令行上使用：

```
curl -H "x-api-key:MY_API_KEY" -d "deployment[application_id]=MY_APP_ID "https://api.newrelic.com/deployments.xml 
```

我应该在 capfile 中添加什么，以便 capistrano 在部署时运行上面的 curl？

我知道我可以安装新的 relic gem 并在 Capfile 中使用它，但想避免依赖。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T00:16:26.510

You can use the "run" command like this:

```
task :foo, :hosts => "my.example.com" do
  run "curl <your info here>"
end 
```

The "run" command string is typical Ruby, so you can use any string delimiters:

```
run %{curl -H "x-api-key:MY_API_KEY" -d ... } 
```

And you can embed parameters as usual:

```
key = "xyz"
run %{curl -H "x-api-key:#{key}" -d ... } 
```

Good info in the comments from Frederick Chung:

> The "run" command will run it on all the remote hosts. I'd use run_locally or even just ``.

Use "run" if you want to know that each host does deploy; each host will send its own info to New Relic.

Use "run_locally" if you just want to know that your local script has run, and you don't care to know that each remote host deployed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T22:26:04.483

他们现在有自己的 capistrano 食谱：[https ://newrelic.com/docs/ruby/recording-deployments-with-the-ruby-agent](https://newrelic.com/docs/ruby/recording-deployments-with-the-ruby-agent)

# java - 在不同的类中有字符串消息

> ID：13662244
> 
> 赞同：0
> 
> 时间：2012-12-01T18:12:52.330
> 
> 标签：java

我将在我的应用程序中有很多字符串文本。因此，我认为将所有这些字符串归为一类。因此，如果有需要，可以很容易地修改字符串。

```
public class MyMessage {

static final String NAME = "JOE";
static final String AGE = "21";
......

} 
```

然后在其他类（如`MyMessage.NAME`和）中访问它`MyMessage.AGE`。

1.) 这种方法正确吗？

2.）我还发现，我们可以使用属性文件来做到这一点。这是真的？（什么是最好的方法来做到这一点`property file`或`having static methods in a java class`）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T18:17:03.867

是的，您可以使用属性文件，通常这是一种更好的方法。除此之外，这还允许您为不同的语言选择不同的资源。[`ResourceBundle`](http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html)有关详细信息，请参阅文档[`PropertyResourceBundle`](http://docs.oracle.com/javase/7/docs/api/java/util/PropertyResourceBundle.html)。

您可能仍然希望有一个类型来维护资源包键，但我个人会将其设为枚举而不是类中的常量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:17:47.517

If you want to change value of any constant in your constant class file you will have to recompile the class. But you don't need to do it when you using properties file. So properties file is better option.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T19:19:30.987

> @invariant 其他人不同意我的方法。您对此有何评论？

好吧，这取决于您更改这些值的频率，让我用一个示例进行解释，在我的应用程序中，为此我必须在许多类中使用美国的州名，我更喜欢创建一个类

```
public class Juridictions {
public static final String OH = "OH";
public static final String CA = "CA";
..

}
   //when ever i need
   if(localvalue.equals(Juridictions.CA) {
   system.out.println("you are from CA !");
} 
```

对此用例使用属性文件方法（我相信状态名称不会改变！）是 **过早优化**（因为它需要从文件中读取更多代码，然后在需要时使用值而不是上述方法）

如果你不确定你改变价值观的频率，那么**在有疑问时将其排除在外**，

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T18:21:16.273

这在一定程度上取决于您真正想要实现的目标。您是否希望在不修改程序源代码的情况下轻松添加新字符串？你想支持多种语言吗？这要看你的实际情况如何。

除了您的建议之外，一种流行的方法是使用资源包。这些本质上用于对字符串进行分组，并使您更容易编辑它们。他们支持的另一个特性（你可能不需要这个）是拥有多种语言，即你想要支持的每种语言都有不同的资源包。实际的字符串保存在属性文件中。

这是一个很好的教程：[http ://www.avajava.com/tutorials/lessons/how-do-i-read-a-properties-file-with-a-resource-bundle.html](http://www.avajava.com/tutorials/lessons/how-do-i-read-a-properties-file-with-a-resource-bundle.html)

# scala - 在 Play 2.0 和 scala 中使用路由的模板路由

> ID：13662246
> 
> 赞同：0
> 
> 时间：2012-12-01T18:13:01.147
> 
> 标签：scala, routes, playframework-2.0

是否可以使用路由文件直接路由到模板？

我正在寻找这样的条目，

```
GET     /template/main/*param           views.html.main(param) 
```

或类似的东西。目前我正在转发一个获取模板的操作。

**编辑**：也表示参数，以便要求明确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:37:30.800

如果您想直接将 URL 路由到模板，那么它不是模板，而是静态 HTML 文件。您可以将它放在“/public/...”中，但是，我不知道是否可以将它放在其他地方。

否则，您仍然可以在控制器中只有一行代码：

`def myAction = Action(Ok(views.html.main.render()))`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-05T08:17:41.037

如果你有 scala 动态模板，你需要一个控制器来为它们提供服务并在其中调用一个 template.render() 方法，因此它呈现为 html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-03T13:46:49.797

使用其他一些更适合您需求的 Web 框架。似乎您使用 Play 但实际上并不想这样做，因为您想做 Play 不打算做的事情......

# jquery - jQuery 包含追加查找文本字符串和更多代码

> ID：13662247
> 
> 赞同：0
> 
> 时间：2012-12-01T18:13:11.340
> 
> 标签：jquery, string, find, append

需要一点帮助来完成这段代码；

```
$(document).ready(function() { 
     var username = $('div.subtitle span').text();
     var $Head = $('div.main-content #field_id4 dt span'); 
     var $body = $('div.main-content #field_id5 dt span');
     var $contBody = $('div.main-content #field_id6 dt span');
     var $borders = $('div.main-content #field_id7 dt span');
$Head.filter(':contains("Black")')
     .closest('#profile-advanced-layout')
      .prepend('<div id="blackbg">'+ username +'Profile</div>');
$body.filter(':contains("Black")')
      .closest('#profile-advanced-layout')
        .css({'background':'#000'});
$contBody.filter(':contains("Black")')
      .find('.main-content')
       .css({'background':'#000'});
$borders.filter(':contains("Black")')
     .find('main-content')
       .css({'border':'2px solid #000'});
 }); 
```

我最大的问题在这里，因为这可能只是第三次使用变量。虽然如果您查看变量`$username`，我想做的是在 div`.subtitle`范围内搜索并获取该范围内的文本字符串，然后复制它或其他，

然后在哪里说`$Head.filter`，我希望它是“+用户名+配置文件”，这样放置变量是否正确。我将如何正确找到该文本字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:22:21.693

我认为您正在尝试这样做：

```
.prepend('<div id="blackbg">' + $username.text() + 'Profile</div>'); 
```

或者，如果您将文本放在名为的单独变量中`username`：

```
.prepend('<div id="blackbg">' + username + 'Profile</div>'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:21:34.683

尝试

```
$username.html(); 

$username.text(); 
```

您也`$`可以在变量名中不需要

```
var username = $('div.subtitle span').html(); 
```

请参阅[jQuery: text() 和 html() 之间有什么区别？](https://stackoverflow.com/questions/1910794/jquery-text-vs-html)

# .net - 如何使用日期时间列的水晶报表选择公式 un vb.net

> ID：13662248
> 
> 赞同：0
> 
> 时间：2012-12-01T18:13:12.813
> 
> 标签：.net, vb.net, crystal-reports

我的问题是，如何在水晶报表中为日期时间列设置选择公式的值（我使用 sql server 2000）。例如：

```
selectionFromula="{tblMain.bday}='"& datetimepicker.value &"'" 
```

当我使用它时，一条错误消息显示选择公式有问题。但是当我用于另一列时，它像这样工作得很好，

```
selectionFormula="{tblMain.id}='"& txtid.text &"'" 
```

但是当它用于日期时间类型列时，它不起作用。有人能给我一个工作示例吗。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T23:21:48.837

您正在向选择公式发送字符串文字而不是日期。因此，例如，如果 datetimepicker.value 是“1/1/2000”，那么 Crystal 会看到

```
{tblMain.bday}='1/1/2000' 
```

字符串需要转换为日期值，或者需要使用井号 (#) 将其标记为日期文字。

其中之一应该是水晶看到的。

```
//Using a conversion to a Crystal Date
{tblMain.bday}=CDate('1/1/2000')

//Using the Crystal Date literal
{tblMain.bday}=#1/1/2000# 
```

因此，您在 VB 中的选择公式看起来像其中之一

```
'Using a conversion to a Crystal Date
selectionFormula="{tblMain.bday}=CDate('"& datetimepicker.value &"')"

'Using the Crystal Date literal
selectionFormula="{tblMain.bday}=#"& datetimepicker.value &"#" 
```

# objective-c - 第一个单元格和标题覆盖 UISearchBar 之间的 UITableView 分隔符

> ID：13662250
> 
> 赞同：0
> 
> 时间：2012-12-01T18:13:17.580
> 
> 标签：objective-c, ios, uitableview

我正在将动态滚动的 UISearchBar 添加到 tableview 的顶部。为此，我将 UISearchBar 添加为 tableview 的子视图，然后实现了一个 scrollviewdelegate 方法，以便搜索栏始终固定在顶部。我还相应地设置了 tableView 的 contentInset，以便最上面的单元格偏移到足以用于搜索栏。

我遇到的唯一问题是在表格视图中的第一个单元格上方绘制的默认分隔符。当从顶部开始向下滚动时，分隔符实际上绘制在搜索栏上方，而不是下方。这会产生一个我想修复的可怕的用户界面错误。请注意，这只发生在第一个单元格上；单元格之间的每个其他分隔符都会在搜索栏下滚动，这是应该的，并且没有相同的 UI 错误。有什么想法吗？

![在此处输入图像描述](../Images/09499de69228b697d528f48bd46a2c7e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:18:40.127

Are you certain that the UISearchBar is frontmost? Try bringing it all the way to the front in code, in your `viewDidLoad`. If that doesn't work to solve the glitch, consider an alternative solution to your interface. Here are some - try any one of them:

*   Make the UISearchBar the header for the UITableView (not a section; the table view itself). This is very standard interface.

*   If you are on iOS 6, instead of the scroll view delegate trick (which was quite standard before iOS 6, well done), use constraints to pin the search bar to a view higher up the view hierarchy than the table view. (Since you are in a navigation controller, that would be the navigation controller's view in your case.) That's the new iOS 6 way to prevent a scroll view subview from being scrolled with the content. I do not know if that will solve the glitch but it could be worth a try.

*   Don't use the default separator. It is not difficult to draw your own separator as part of the cell background image.

# android - 如何知道设备是否有数据连接？

> ID：13662251
> 
> 赞同：0
> 
> 时间：2012-12-01T18:13:21.460
> 
> 标签：android, connectivity

我正在尝试检测设备是否具有 wifi 或 3g 连接。如果它有连接，它将显示`MapView`，但是当两者都没有连接时，我的条件语句有问题。

以下是我检查网络连接的方法：

```
private boolean haveNetworkConnection() {
    boolean haveConnectedWifi = false;
    boolean haveConnectedMobile = false;

    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isConnected())
                haveConnectedWifi = true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isConnected())
                haveConnectedMobile = true;
    }
    return haveConnectedWifi || haveConnectedMobile;
} 
```

这是我调用该方法的代码。它`MapView`在可以访问 Internet 时显示，但在没有 Internet 访问时不显示 toast。

```
if (haveNetworkConnection()) {
    if (loc != null && !loc.equals("")) {
        new GeocoderTask().execute(loc);
    } else {
        Toast.makeText(this, "Internet Connection is Required to view this map", Toast.LENGTH_LONG).show();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:17:18.220

Try this to check whether an internet connection is available:

```
private boolean isNetworkAvailable() {
    ConnectivityManager connectivityManager 
        = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo activeNetworkInfo = connectivityManager.getActiveNetworkInfo();

    return activeNetworkInfo != null;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:17:29.857

Assuming your loop returns the correct values, let's take out the local booleans since they are unnecessary:

```
private boolean haveNetworkConnection() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) {
        if (ni.getTypeName().equalsIgnoreCase("WIFI") && ni.isConnected())
            return true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE") && ni.isConnected())
            return true;
    }
    return false;
} 
```

* * *

If the loop is incorrect, you can incorporate [the documentation's method](http://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html) in your code:

```
private boolean haveNetworkConnection() {
    ConnectivityManager cm =
            (ConnectivityManager)context.getSystemService(Context.CONNECTIVITY_SERVICE);

    NetworkInfo activeNetwork = cm.getActiveNetworkInfo();
    if(activeNetwork != null)
        return activeNetwork.isConnectedOrConnecting();
    return false;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T18:21:41.913

```
private boolean haveNetworkConnection() {
    //boolean haveConnectedWifi = false;
    //boolean haveConnectedMobile = false;

    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo[] netInfo = cm.getAllNetworkInfo();
    for (NetworkInfo ni : netInfo) {
        if (ni.getTypeName().equalsIgnoreCase("WIFI"))
            if (ni.isConnected())
                return true;
        if (ni.getTypeName().equalsIgnoreCase("MOBILE"))
            if (ni.isConnected())
                return true;
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T18:37:13.730

您的逻辑在以下方面是错误的：

```
if (haveNetworkConnection()) {
        if (loc != null && !loc.equals("")) {
            new GeocoderTask().execute(loc);
        } else {
            Toast.makeText(this, "Internet Connection is Required to view this map", Toast.LENGTH_LONG).show();
        }
    } 
```

如果 haveNetworkConnection () 为假，您将永远无法到达 Toast。您应该按如下方式更改它：

```
if (haveNetworkConnection()) {
            if (loc != null && !loc.equals("")) {
                new GeocoderTask().execute(loc);
            } 
        }
else {
                Toast.makeText(this, "Internet Connection is Required to view this map", Toast.LENGTH_LONG).show();
            } 
```

# git - 使用 git 时，有没有办法在 fork 上锁定单个文件或目录？

> ID：13662255
> 
> 赞同：77
> 
> 时间：2012-12-01T18:14:04.123
> 
> 标签：git, github, githooks, github-api

我们是一个由 60 多名开发人员组成的团队，致力于同一产品，并且正在从 SVN 迁移到 Git 和 GitHub。我们在 SVN 中有一个进程，其中单个文件被锁定，每当开发人员想要提交代码时，他需要由文件所有者解锁它。我们三个人是总共 150 多个文件的所有者。解锁之前是代码审查。

在 Github 中，我们计划使用 Fork-Clone 模型 - 一组开发人员正在处理的每个项目都会进行一次 fork，每个开发人员将进行一次 fork 的克隆，编写代码并提交到 origin，领导功能将向上游发出拉取请求。

虽然这看起来很好，但问题是当一个大项目交付时，它会带来许多需要审查的更改，因此增加了文件所有者的负担。此外，这可能发生在后期的开发周期中，因此项目可能会受到威胁。

我们认为可能有效的一种方法是在 git push 到原点（fork）时使用钩子。可以有一个最终审查 git pull 到上游。

但是，我们找不到任何 github 扩展或相同的推送挂钩。有没有一种快速的方法（阅读，现有的扩展）可以用 Github 做到这一点，还是我们应该使用与 git 相同的钩子？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2015-12-18T09:58:30.357

没有机会，如果文件不可合并并且您需要锁定它，请使用集中式解决方案而不是 GIT，即 SVN 或 ClearCase。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2018-02-21T12:30:56.977

如果您正在使用`git LFS`（一些 git 托管服务提供商支持，例如 GitHub），您可以使用[File Locking](https://github.com/git-lfs/git-lfs/wiki/File-Locking)。

通过编辑文件将文件类型标记为可锁定`.gitattributes`：

```
*.docx lockable
# Make MS Word files lockable 
```

并将其锁定：

```
$ git lfs lock example.docx 
```

您可以`git lfs unlock example.docx`通过添加来解锁您和其他人的文件`--force`。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-04-23T12:42:56.747

这个有可能。git-lfs 2.0 引入了锁定文件的功能：请参阅以下链接：[https](https://github.com/git-lfs/git-lfs/wiki/File-Locking) ://github.com/git-lfs/git-lfs/wiki/File-Locking 。从 TFS 2017.2 开始提供对此功能的支持：[https](https://docs.microsoft.com/en-us/vsts/release-notes/) ://docs.microsoft.com/en-us/vsts/release-notes/ 。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-07-09T06:07:58.040

不完全是锁定，但 Github 引入了一个名为“[代码所有者](https://blog.github.com/2017-07-06-introducing-code-owners/)”的概念。允许您将部分代码库限制为仅在代码所有者审查后允许提交

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-05-10T17:00:52.020

您可以使用 LFS 并且可以锁定单个文件，或者将文件添加到 .gitattributes 文件中，

[https://github.com/git-lfs/git-lfs/wiki/File-Locking](https://github.com/git-lfs/git-lfs/wiki/File-Locking)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-05-12T22:07:37.130

Git 不提供任何锁定功能，因为它是分散的。但是，如果您将代码托管在[GitLab Enterprise Edition Premium](https://about.gitlab.com/products/)上，则可以[使用 Web 界面锁定单个文件或文件夹](https://docs.gitlab.com/ee/user/project/file_lock.html)，从而完全实现您想要做的事情。

如果您不想在其他人的服务器（他们的网站）上托管您的项目，您也可以下载 GitLab 并将其托管在您自己的网络服务器上。

* * *

## 回答 #7

> 赞同：-27
> 
> 时间：2013-02-13T22:10:08.010

这个用例是 Git 比 SVN 好得多的原因之一 --> [rebase](http://git-scm.com/book/en/Git-Branching-Rebasing)！如果您遵循良好的 git 工作流程，您可以在提交拉取请求之前从上游进行 rebase。您无需担心文件锁定和踩踏其他人的提交和合并冲突等...... rebase 将您的工作放在一边，应用远程提交，然后将您的工作应用到上面。

我认为这只是需要重新考虑您的流程并依靠 git 的优势而不是强制在 git 之上安装 Subversion 工作流程。您的“分叉克隆”模型可能还需要另一种外观。大多数情况下，每个开发人员都有自己的分支，如果需要，您可以通过远程在团队之间共享存储库。但是共享同一来源的贡献者会养成一些坏习惯。

[Gitflow](http://nvie.com/posts/a-successful-git-branching-model/)是一个非常流行的 git 工作流程，[Github 自己也有一些不错的技巧并分享他们的工作流程](http://scottchacon.com/2011/08/31/github-flow.html)。

# c# - ASP.NET Membership.. 处理大量用户

> ID：13662257
> 
> 赞同：0
> 
> 时间：2012-12-01T18:14:20.410
> 
> 标签：c#, asp.net, asp.net-membership

我有一个会员包含超过 30,000 个用户。我试图让用户使用他们的个人资料查找或搜索所有会员用户，我将通过将所有具有所需个人资料数据的用户导入 DataTable 并开始从中进行选择来实现这一点，但这里的问题是加载超过 30,000 个用户并将他们的配置文件数据放入 DataTable 需要很长时间 是否有任何类型的存储可以预加载其中的会员用户，而不是在用户尝试搜索时加载它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:23:55.723

您可以只对数据库执行搜索查询，而不是将所有 30.000 加载到内存中。这将返回更少的行并具有更高的性能。Membership 类有一个可以返回分页数据的[FindUsersByName方法。](http://msdn.microsoft.com/en-us/library/fa5st8b2%28v=vs.100%29.aspx)

如果您真的想将所有用户存储到内存中，请查看[HttpRuntime.Cache](http://msdn.microsoft.com/en-us/library/system.web.httpruntime.cache.aspx)。如果将所有用户加载到缓存中，则可以使用 Linq To Objects 查询它们并获得良好的性能。

[您可以在应用程序自动启动](http://weblogs.asp.net/scottgu/archive/2009/09/15/auto-start-asp-net-applications-vs-2010-and-net-4-0-series.aspx)事件中填充缓存。当应用程序运行时，缓存数据将始终被加载。您可以使用[SqlCacheDependency](http://msdn.microsoft.com/en-us/library/system.web.caching.sqlcachedependency.aspx)来确保您的缓存始终正确。

# objective-c - 返回指向不同对象的指针的方法是否会自动分配和初始化另一个对象？

> ID：13662259
> 
> 赞同：2
> 
> 时间：2012-12-01T18:14:33.140
> 
> 标签：objective-c, ios, cocoa-touch, pointers, memory-management

假设我有这个代码：

```
NSString *inspDate = @"20120515";
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyyMMdd"];
NSDate *inspectionDate;
inspectionDate = [dateFormatter dateFromString:inspDate]; 
```

当我检查它是否有效（`NSDate`包含格式正确的数据）时，它确实有效……但为什么呢？

在这里，我将执行以下步骤：

1.  内存`NSDateFormatter`在堆中被分配和实例化。`dateFormatter`指向那个位置，明白了：

    ```
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init]; 
    ```

2.  现在`dateFormatter`被告知如何将`NSString`'s 解释为日期，好的：

    ```
    [dateFormatter setDateFormat:@"yyyyMMdd"]; 
    ```

3.  这是我模糊的部分，`inspectionDate`指针设置为零。它没有指向任何东西：

    ```
    NSDate *inspectionDate; 
    ```

4.  当没有或调用到时如何`dateFormatter`返回指向 a 的指针？是在执行中做和在执行吗？`NSDate``alloc``init``inspectionDate``dateFromString``alloc``init`

    ```
     inspectionDate = [dateFormatter dateFromString:inspDate]; 
    ```

帮助我想象这将是一个巨大的帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:17:55.270

The `dateFromString` method will instantiate (likely through an alloc/init call at some point, or an `NSDate` convenience method which itself will do the allocation) an `NSDate` object and you assign it to your `inspectionDate` variable. As with any "convenience" method that does not start with `alloc`, `new`, or `copy`, there is no transfer of object ownership, i.e. the instance returned is autoreleased.

# python - pygtk 运行两个窗口，弹出窗口和主窗口

> ID：13662260
> 
> 赞同：6
> 
> 时间：2012-12-01T18:14:33.723
> 
> 标签：python, popup, window, progress-bar, pygtk

我在 python 中创建脚本，它与 bash 合作。当我设置所有搜索选项并按下查找按钮时，我想出现带有 的弹出窗口`progress bar`，当搜索完成时它会消失。我打开并没有执行任何功能，直到我关闭弹出窗口`popup window`。`popup.show()`那么如何解决这个问题呢？

在控制器类中：

```
def search(self, widget):
    cmd = "find " + self.model.directory + " -name \"" + self.model.name + "\"" + " -perm -" + str(self.model.mode)
    if self.model.type is not None and self.model.type != '':
        cmd += " -type " + self.model.type
    if self.model.owner is not None:
        cmd += " -user " + self.model.owner
    if self.model.days is not None:
        cmd += " -mtime -" + str(self.model.days)

    self.progress = SearcherProgressBar()

    output = subprocess.Popen(cmd, shell=True, stdout=subprocess.PIPE)
    out = output.stdout.read().strip()
    array = string.split(out, '\n')
    self.list = list()
    self.progress.label = "sdsds"
    for value in array:
        self.add_to_list(value)

    #self.progress.popup.destroy() # when I uncomment, popup never appears

    self.view.treestore.clear()
    self.add_to_tree(self.list, None)
    self.view.expand_item.set_sensitive(True) 
```

在进度条类中：

```
class SearcherProgressBar:

def __init__(self):
    self.popup = gtk.Window(gtk.WINDOW_POPUP)
    vbox = gtk.VBox()
    self.popup.add(vbox)
    self.popup.set_size_request(500,100)
    self.label = gtk.Label("Searching...")
    vbox.pack_start(self.label, True, True, 0)
    self.popup.connect("destroy", self.dest)
    self.popup.show_all()

def dest(self, widget, data=None):
    self.popup.destroy()
    return False 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-02T12:47:13.913

无论如何，这个问题似乎很有趣，尽管从外部很难看出您想要什么或您的程序如何工作以及打算如何工作。我整理了一个关于如何制作弹出窗口的最小代码。

我`subprocessing`将 bash 命令和`threading`gui 结合使用。

此代码中需要注意的重要位：

*   由于`threading`是与`gtk`我们必须使用结合使用`gobject.threads_init()`

*   不在线程中的函数快速执行并将控制权返回给`gtk.main`-loop

*   调用时搜索按钮被停用以不堆叠子进程。

这是代码：

```
#!/usr/bin/env python

import gtk
import threading
import gobject 
from subprocess import Popen, PIPE

class SearcherProgressBar(object):
    """This is the popup with only progress-bar that pulses"""
    def __init__(self):
        self._popup = gtk.Window(gtk.WINDOW_POPUP)
        self._progress = gtk.ProgressBar()
        self._progress.set_text = gtk.Label("Searching...")
        self._popup.add(self._progress)

    def run(self, search, target):
        """Run spawns a thread so that it can return the process to the
        main app and so that we can do a little more than just execute
        a subprocess"""
        self._popup.show_all()
        self._thread = threading.Thread(target=self._search, args=(search, target))
        self._thread.start()

        #Adding a callback here makes gtk check every 0.42s if thread is done
        gobject.timeout_add(420, self._callback)

    def _search(self, cmd, target):
        """This is the thread, it makes a subprocess that it communicates with
        when it is done it calls the target with stdout and stderr as arguments"""
        p = Popen(cmd, stdout=PIPE, stderr=PIPE)
        target(*p.communicate())

    def _callback(self, *args):
        """The callback checks if thread is still alive, if so, it pulses
        return true makes callback continue, while false makes it stop"""
        if self._thread.is_alive():
            self._progress.pulse()
            return True
        else:
            self._popup.destroy()
            return False

class App(object):

    def __init__(self):

        self._window = gtk.Window()
        self._window.connect("destroy", self._destroy)

        vbox = gtk.VBox()
        self._window.add(vbox)

        self.button = gtk.Button()
        self.button.set_label('Pretend to search...')
        self.button.connect('clicked', self._search)
        vbox.pack_start(self.button, False, False, 0)

        entry = gtk.Entry()
        entry.set_text("This is here to show this gui doesn't freeze...")
        entry.connect("changed", self._gui_dont_freeze)
        vbox.pack_start(entry, False, False, 0)

        self._results = gtk.Label()
        vbox.pack_start(self._results, False, False, 0)

        self._gui_never_freeze = gtk.Label("Write in entry while searching...")
        vbox.pack_start(self._gui_never_freeze, False, False, 0)

        self._window.show_all()

    def run(self):

        gtk.main()

    def _gui_dont_freeze(self, widget):

        self._gui_never_freeze.set_text(
            "You've typed: '{0}'".format(widget.get_text()))

    def _search(self, widget):
        """Makes sure you can't stack searches by making button
        insensitive, gets a new popup and runs it. Note that the run
        function returns quickly and thus this _search function too."""
        self.button.set_sensitive(False)
        self._results.set_text("")
        popup = SearcherProgressBar()
        popup.run(['sleep', '10'], self._catch_results)

    def _catch_results(self, stdout, stderr):
        """This is where we do something with the output from the subprocess
        and allow button to be pressed again."""
        self.button.set_sensitive(True)
        self._results.set_text("out: {0}\terr: {1}".format(stdout, stderr))

    def _destroy(self, *args):

        self._window.destroy()         
        gtk.main_quit()

if __name__ == "__main__":

        #This is vital for threading in gtk to work correctly
        gobject.threads_init()
        a = App()
        a.run() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T11:53:27.787

[已解决] 此代码应在每个小部件更新后添加

```
while gtk.events_pending():
        gtk.main_iteration() 
```

# php - 网站关键词，无限加载，OOP

> ID：13662261
> 
> 赞同：2
> 
> 时间：2012-12-01T18:14:35.280
> 
> 标签：php, mysql, database, oop

我正在从不同的网站创建关键字，并将它们保存在 bd 中。

在 $webhtml 中，我有一个使用 DOM 下载的网站。问题是，当您启动提取器时，会无限加载。并且永远不会在数据库中保存任何内容。

有错误的代码如下：

```
if (empty($keywords)){
$ekeywords = new KeyPer;
$keywords = $ekeywords->Keys($webhtml);
} 
```

我用一个函数存储了 $keywords：saveweb($url, $description, $keywords);

我使用下一个包括：

```
include("Extkeys.php"); 
```

“Extkeys”的代码：

```
<?php
class Extkeys {
function Keys($webhtml) { 
$webhtml = $this->clean($webhtml); 
$blacklist='de,la,los,las,el,ella,nosotros,yo,tu,el,te,mi,del,ellos'; 
$sticklist='test'; 
$minlength = 3; 
$count = 17; 

$webhtml = preg_replace('/[\.;:|\'|\"|\`|\,|\(|\)|\-]/', ' ', $webhtml); 
$webhtml = preg_replace('/¡/', '', $webhtml); 
$webhtml = preg_replace('/¿/', '', $webhtml);

$keysArray = explode(" ", $webhtml); 
$keysArray = array_count_values(array_map('strtolower', $keysArray)); 
$blackArray = explode(",", $blacklist); 

foreach($blackArray as $blackWord){ 
if(isset($keysArray[trim($blackWord)])) 
unset($keysArray[trim($blackWord)]); 
} 
arsort($keysArray); 
$i = 1; 
$keywords = ""; 
foreach($keysArray as $word => $instances){ 
if($i > $count) break; 
if(istrlen(trim($word)) >= $minlength && is_string($word)) { 
$keywords .= $word . ", "; 
$i++; 
} 
} 

$keywords = rtrim($keywords, ", "); 

return $keywords=$sticklist.''.$keywords; 
} 

function clean($webhtml) { 

$regex = '/(([_A-Za-z0-9-]+)(\\.[_A-Za-z0-9-]+)*@([A-Za-z0-9-]+)(\\.[A-Za-z0-9-]+)*)/iex'; 
$desc = preg_replace($regex, '', $webhtml); 
$webhtml = preg_replace( "''si", '', $webhtml ); 
$webhtml = preg_replace( '/]*>([^<]+)<\/a>/is', '\2 (\1)', $webhtml ); 
$webhtml = preg_replace( '//', '', $webhtml ); 
$webhtml = preg_replace( '/{.+?}/', '', $webhtml ); 
$webhtml = preg_replace( '/ /', ' ', $webhtml ); 
$webhtml = preg_replace( '/&/', ' ', $webhtml ); 
$webhtml = preg_replace( '/"/', ' ', $webhtml ); 
$webhtml = strip_tags( $webhtml ); 
$webhtml = htmlspecialchars($webhtml); 
$webhtml = str_replace(array("\r\n", "\r", "\n", "\t"), " ", $webhtml); 

while (strchr($webhtml," ")) { 
$webhtml = str_replace(" ", " ",$webhtml); 
} 

for ($cnt = 1; 
$cnt < strlen($webhtml)-1; $cnt++) {
if (($webhtml{$cnt} == '.') || ($webhtml{$cnt} == ',')) { 
if ($webhtml{$cnt+1} != ' ') { 
$webhtml = substr_replace($webhtml, ' ', $cnt + 1, 0); 
} 
} 
} 
return $webhtml; 
} 
}
?> 
```

我怎样才能避免代码的无限负载，并使其正常工作？

此致！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:32:08.553

在您的代码中，您正在用空格替换空格，

```
while (strchr($webhtml," ")) { 
    $webhtml = str_replace(" ", " ",$webhtml); 
} 
```

它应该像

```
while (strchr($webhtml," ")) { 
    $webhtml = str_replace(" ", "",$webhtml); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T19:02:41.047

伙计，我知道你想做什么。您需要**lynx**或**链接**将某些网页转储到文件（文本文件）。您将跳过有关删除标签等的所有内容，因为 lynx 和链接都是基于文本的 Web 浏览器（通常从 linux 中的命令行启动）并且它们仅在页面上显示文本而不是其他内容。

另外你的关键字功能不好。你需要**tf-idf**。[更多关于 tf-idf 的信息](http://goo.rs/tf-idf)。

使用 tf-idf，您可以从网页中提取真正的关键字（这就是 google 关键字的制作方式）。tf-idf 用于提取真实的文本含义，提取最能描述页面或文档的关键字。

在那个链接上，我给了你计算 tf-idf 的公式。

# objective-c - 应用程序在dismissViewControllerAnimated 上崩溃：

> ID：13662264
> 
> 赞同：0
> 
> 时间：2012-12-01T18:14:38.557
> 
> 标签：objective-c, ios, uiviewcontroller, presentmodalviewcontroller

我有一个常规视图控制器，它尝试通过**presentViewController**或通过使用 UINavigationController 推送控制器来呈现控制器。

当我调用**dismissViewControllerAnimated：**方法或通过UINavigationController推送时单击返回按钮，应用程序将崩溃并出现以下错误：

```
012-12-01 13:09:15.789 stats[12370:c07] *** Assertion failure in -[NSLayoutConstraint constant], /SourceCache/Foundation_Sim/Foundation-992/Layout.subproj/NSLayoutConstraint.m:560
2012-12-01 13:09:15.790 stats[12370:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: '(null)'
*** First throw call stack:
(0x4ac012 0x1974e7e 0x4abe78 0x140af35 0x15253a2 0x1527cda 0x15274f1 0xdf4bbe 0xdf4da7 0x908be4 0x90905d 0x90905d 0x90905d 0x90905d 0x90905d 0x90905d 0x90905d 0x90905d 0x90905d 0x9045e6 0x90aaf4 0x902eed 0x97cad6 0xba9f44 0xba94eb 0x9a7a11 0x9a6ecd 0x9a6ecd 0x9a7bdb 0xa72739d 0x2e7b0 0xd71b5 0xd6f38 0xd8a19 0x4a01bd 0x4a00d6 0x4a024a 0xe27d69 0xe2913e 0x49bcf9 0x49b94e 0x4a01bd 0x4a00d6 0x4a024a 0xe27d69 0xe279da 0x49bcf9 0x49b94e 0x4a01bd 0x4a00d6 0x4a024a 0xe27d69 0xddb0a7 0x49bcf9 0x49b94e 0x4a01bd 0x4a00d6 0x4a024a 0xe27d69 0xe010cf 0x514753f 0x5159014 0x51497d5 0x452af5 0x451f44 0x451e1b 0x240c7e3 0x240c668 0x8bc65c 0x1e34d 0x2215)
libc++abi.dylib: terminate called throwing an exception 
```

这发生在模拟器和设备上。

这是我展示控制器的方式：

**UINavigationController**

```
ChartViewController *chartViewer = [[ChartViewController alloc] initWithNibName:@"ChartViewController" bundle:[NSBundle mainBundle]];
[self.navigationController pushViewController:chartViewer animated:YES]; 
```

**当前视图控制器：**

```
ChartViewController *chartViewer = [[ChartViewController alloc] initWithNibName:@"ChartViewController" bundle:[NSBundle mainBundle]];
[self presentViewController:chartViewer animated:YES completion:nil]; 
```

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:23:02.423

这可能是由新 XCode 上的自动布局功能引起的。

如果启用了使用自动布局功能，请签入您的 XIB。如果是，请禁用并重试： ![在此处输入图像描述](../Images/3163daca1a12168586d701d3da354a27.png)

# css - h1 类在定义 h1 样式后无法识别

> ID：13662265
> 
> 赞同：-1
> 
> 时间：2012-12-01T18:14:40.067
> 
> 标签：css

标题太模糊？这是一个例子：

html:

```
<h1>Heading 1</h1>
<h1 class='header'>Heading 2</h1> 
```

CSS：

```
h1 {
font-size: 2px;
}

.header {
font: 12px;
} 
```

在网站上，标题 1 和标题 2 的字体大小均为 2px。为什么是这样？有没有我不知道的等级制度？如果是这样，我在哪里可以阅读更多关于它的信息？因为我一直在寻找但没有任何线索。

--- 编辑--- 好的拳头例子只是一个非常愚蠢的错字....感谢减号-1。并感谢您的回答 dystroy，尽管在我的示例中发生这种情况纯属巧合。

因此，我现在将给出一个真实的例子，希望它不再是微不足道的事情。

html:

```
<div class="container-fluid">
<div id="content" class="product-info">
<div class="product_overview_wrapper span-fluid250-overview product-info">
<h3 style="heading_price" id="heading_price_id">PRICE:</h3>
</div>
</div>
</div> 
```

CSS：

```
.product_overview_wrapper h3 , .product_overview_wrapper p {
font-family: 'Ovo', serif;
font-size: 1.1em;
font-weight: lighter;
color: #363636;
margin-top: 19px;
line-height: normal;
}

.heading_price {
margin-top: 100px;
} 
```

如上所示，我之前设置了一次 h3 样式。但是我的 .heading_price 样式根本没有效果。当我检查元素时，我什至没有在 chrome 中看到它......希望有人能提供帮助，这不会再次让我失去积分；）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T18:16:39.877

改变

```
.header {
font: 12px;
} 
```

至

```
.header {
font-size: 12px;
} 
```

当你使用`font`时，它是一个简写，不能只限于大小。

见[参考](https://developer.mozilla.org/en-US/docs/CSS/font)：

> 使用 CSS 字体速记时有一些注意事项。如果不满足这些条件，则该属性无效并被完全忽略。除非使用关键字，否则必须同时定义 font-size 和 font-style 属性的值。

# c# - 获取给定 html 中所有标签之间的文本并递归遍历链接

> ID：13662267
> 
> 赞同：0
> 
> 时间：2012-12-01T18:14:49.010
> 
> 标签：c#, html, web-crawler, html-agility-pack

我检查了几篇关于堆栈溢出的帖子，内容是关于获取所有 html 标签之间的所有单词！他们都把我弄糊涂了！有些人专门为单个标签推荐正则表达式，而有些人则提到了解析技术！我基本上是在尝试制作一个网络爬虫！为此，我得到了我在字符串中获取到我的程序的链接的 html！我还从存储在数据字符串中的 html 中提取了链接！现在我想通过深度爬行并提取我从字符串中提取的所有链接的页面上的单词！我有两个问题！我如何在忽略标签和 java 脚本的情况下获取每个网页上的单词？其次，我将如何递归地爬取链接？

这是在字符串中获取 html 的方式：

```
public void getting_html_code_of_link()
    {
        string urlAddress = "http://google.com";

        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(urlAddress);
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        if (response.StatusCode == HttpStatusCode.OK)
        {
            Stream receiveStream = response.GetResponseStream();
            StreamReader readStream = null;
            if (response.CharacterSet == null)
                readStream = new StreamReader(receiveStream);
            else
                readStream = new StreamReader(receiveStream, Encoding.GetEncoding(response.CharacterSet));
            data = readStream.ReadToEnd();
            response.Close();
            readStream.Close();
            Console.WriteLine(data);
        }
    } 
```

这就是我从我给出的网址中提取链接引用的方式：

```
public void regex_ka_kaam()
    {
        StringBuilder sb = new StringBuilder();
        //Regex hrefs = new Regex("<a href.*?>");
        Regex http = new Regex("http://.*?>");

        foreach (Match m in http.Matches(data))
        {
            sb.Append(m.ToString());
            if (http.IsMatch(m.ToString()))
            {

                sb.Append(http.Match(m.ToString()));
                sb.Append("                                                                        ");
                //sb.Append("<br>");
            }
            else
            {
                sb.Append(m.ToString().Substring(1, m.ToString().Length - 1)); //+ "<br>");
            }
        }
        Console.WriteLine(sb);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:43:07.110

正则表达式不是解析 HTML 文件的好选择。

HTML 并不严格，其格式也不规则。

使用[htmlagilitypack](http://htmlagilitypack.codeplex.com/)

* * *

这会从网页中提取所有链接

```
public List<string> getAllLinks(string webAddress)
{
    HtmlAgilityPack.HtmlWeb web = new HtmlAgilityPack.HtmlWeb();
    HtmlDocument newdoc=web.Load(webAddress);

    return doc.DocumentNode.SelectNodes("//a[@href]")
              .Where(y=>y.Attributes["href"].Value.StartsWith("http"))
              .Select(x=>x.Attributes["href"].Value)
              .ToList<string>();
} 
```

* * *

这将获取 html 中不包括标签的所有内容

```
public string getContent(string webAddress)
{
    HtmlAgilityPack.HtmlWeb web = new HtmlAgilityPack.HtmlWeb();
    HtmlDocument doc=web.Load(webAddress);

    return string.Join(" ",doc.DocumentNode.Descendants().Select(x=>x.InnerText));
} 
```

* * *

这会遍历所有链接

```
public void crawl(string seedSite)
{
        getContent(seedSite);//gets all the content
        getAllLinks(seedSite);//get's all the links
} 
```

# sql-server - 统计应用：MongoDB vs SQL Server

> ID：13662270
> 
> 赞同：0
> 
> 时间：2012-12-01T18:15:07.773
> 
> 标签：sql-server, mongodb

我有一个 SQL Server 数据库，其中包含应用程序的使用数据（来自 100 多个设备），收集了超过 1 年的数据（30GB 数据库）。

将数据插入数据库不是问题，足够快（目前），并且是客户端完成的唯一操作。

有一个主表和几个子表，但假设我可以将所有内容放在一个表中。

我需要进行统计分析，所以主要是`count(*)`按日期和一列或多列过滤。性能越来越慢（尽我所能使用索引）。

迁移到 MongoDB 会提高速度吗？我还没有开始研究它，但我 99% 的操作会是（是的，我知道不是 SQL）：

```
select count(*) from table 
where date between date1 and date2 and field1 = 10 and field2 = "test" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T19:54:46.627

sql server 可以轻松处理您的要求。通过使用适当的索引和其他优化技术。SQL SERVER 可以有效地执行这些查询。对于您的用例，在 (date,field1,field2) 上有一个简单的索引

```
CREATE CLUSTERED INDEX IDX_TABLE_ID ON TABLE(id)
GO
CREATE  INDEX IDX_TABLE_2 ON TABLE(date,field1,field2)
GO 
```

对于快速查询执行来说已经足够了。

**只是一个说明：** 对于档案分析 SQL server 提供了数据仓库工具（SQL SERVER ANALYSIS SERVICE）。SQL SEREVER CUBE 可以非常简单地聚合和分析庞大的归档数据。

其他 sql server 信息： http: [//ms-sql-queries.blogspot.in/](http://ms-sql-queries.blogspot.in/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:34:40.930

如果您没有在查询中使用任何联接，则 sql server 的性能不会受到影响。如果您将 mongodb 用于相同目的，那么查询时间也将与 sql 的时间差不多或稍差一些。

# binary - 如何避免 Coq nats 中的堆栈溢出或分段错误？

> ID：13662274
> 
> 赞同：6
> 
> 时间：2012-12-01T18:15:31.960
> 
> 标签：binary, nat, bignum, coq

我目前正在使用[vellvm](http://www.cis.upenn.edu/~jianzhou/Vellvm/)，对其进行转换。我是一个coq新手。

在编程时，我遇到了以下警告：

> 警告：在 nat 中处理大量数字时会发生堆栈溢出或分段错误（观察到的阈值可能在 5000 到 70000 之间变化，具体取决于您的系统限制和执行的命令）。

我生成此警告的函数会计算签名。签名分为上位和下位。给定两个代表高位和低位的 nat n1 和 n2，它计算 (n1*65536)+n2 - 这是并排放置两个 16 位二进制数的抽象。

我很惊讶，因为 coq nat 定义似乎可以处理来自外部的大整数，这要归功于 S 构造函数。

我应该如何避免这个警告/在 coq 中使用大数字？我愿意将实现从 nat 更改为某种二进制结构。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T20:05:20.117

除了`nat`在 Coq 中使用类型，有时（当您必须处理大数字时）使用[`Z`](http://coq.inria.fr/distrib/8.4/stdlib/Coq.Numbers.BinNums.html#Z)类型更好，这是使用符号大小对表示的整数形式化。权衡是您的证明可能会变得稍微复杂一些。`nat`非常简单，因此承认简单的证明原则。

然而，在 Coq 中，符号的广泛使用使编写定义、定理和证明变得更简单。Coq 有一个非常小的内核（我们想要这个是因为我们希望能够相信证明检查器是正确的，并且我们可以阅读它）上面有很多符号。然而，由于事物的表示方式不同，而且只有少数好的符号，我们的符号通常会发生冲突。为了解决这个问题，coq 使用[解释范围](http://coq.inria.fr/doc/Reference-Manual015.html)来消除符号的歧义，并将它们解析为名称（因为“+”表示`add`,`plus`等...）。

你是对的，使用`Z_scope`是 where，`+`for `plus`within `Z`。

# c# - 如何在wp7上通过c#单击网站上的按钮

> ID：13662275
> 
> 赞同：1
> 
> 时间：2012-12-01T18:15:53.013
> 
> 标签：c#, html, windows-phone-7

我需要单击网站上的按钮。html中的按钮： `<input class="btn" type="submit" value="Войти" />`

wp7 webBrowser不支持webBrowser.Document，所以我不能使用

```
foreach(HTMLElement html in webBrowser.Document.GetElementByTagName("input"))
{
 if(html.GetAttribute("value) == "Войти")
html.InvokeMember("submit");
} 
```

按钮也没有 id 或标签，所以我不能使用“getElementsById”或“getElementsByTag”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T02:08:57.847

对于 HTML5 Windows Phone 应用程序，默认顺序为 Browser.Navigate(...) 然后 Browser.IsScriptEnabled = true; 不起作用。你需要 Browser.IsScriptEnabled = true; 在 Navigate() 调用之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T20:25:59.177

您正在使用 Javascript 填写字段，只需以相同的方式提交表单：

```
wb1.InvokeScript("eval", "document.forms[0].submit();"); 
```

# java - 将参数传递给 Java 线程

> ID：13662278
> 
> 赞同：1
> 
> 时间：2012-12-01T18:16:06.100
> 
> 标签：java, android, multithreading, parameters

我做了一个 android 应用程序，我想从菜单中更改正在运行的线程的一些参数。我的班级看起来像这样：

```
public class MyClass {

        public class MyThread extends Thread {
             public volatile long sleepTime =200;
             .....
             public synchronized void set_sleepTime(long value)
                          /* with or without synchronized is te same problem*/

        {
            sleepTime=value;
        }
             .....
             }
} 
```

我在应用程序的 onCreateMethod 中创建类

```
 public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        MyClass nClass=new MyClass(this);

        setContentView(nClass);

    } 
```

我尝试更改菜单中的参数。像这样：

```
public boolean onOptionsItemSelected(MenuItem item) {

        switch (item.getItemId()) {

            case R.id.load_game:
            ... 

                try{

                    mSheepThread.set_sleepTime(10);

                }
                catch (Exception e0)
                {
                    toast = Toast.makeText(getApplicationContext(), "Could not set parameters", Toast.LENGTH_LONG);
                }
                       ...              

        }
    } 
```

我每次都收到 e0=NullPointer 异常。我不明白为什么。

# c# - 在运行时更改 int 值

> ID：13662281
> 
> 赞同：0
> 
> 时间：2012-12-01T18:16:29.423
> 
> 标签：c#, visual-studio-2010, coding-style

我有一个带有一些构造函数的类，一个带有命令按钮的表单和一个在我的“form.cs”中设置为 20 的公共变量。每次单击按钮时如何减少变量直到它变为零？我尝试了一些方法，例如单击事件中的循环，构造函数中的简单推导（变量=变量-1），但它们不起作用！试过这个：

```
public void AssignSeat()
{
   seats = seats - 1;    
} 
```

接着

```
private void button2_Click(object sender, EventArgs e)
{
    Class1 Class1 = new Class1();
    Class1.AssignSeat();
    Class1.MSGbox();                     
} 
```

它编译并运行没有错误，但它永远不会停止！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T18:19:14.650

Here:

```
Class1 Class1 = new Class1();
Class1.AssignSeat();
Class1.MSGbox(); 
```

... you're creating a *new* instance of `Class1` each time the button is clicked. Is the `button2_click` method already within `Class1`? If so, you just need to call `AssignSeat` - you don't need to create a new instance of the form.

(I'd also strongly advise *against* public variables, but that's another matter.)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:50:07.897

1.  如果是，这两个方法是否都在同一个类中，那么您不需要为 Class1 创建对象来访问它。
2.  每次单击按钮时变量是否设置为 20。
3.  根据您所写的内容，您每次都在创建一个新实例，因此您的问题出现了。

声明 iCount 和 iTemp 外部按钮单击

int iCount = 0; int iTemp = 20;

```
 private void button2_Click(object sender, EventArgs e)
    {
        if (iCount == 0)
        {
            iTemp = 20;
            iCount++;
        }
        iTemp = iTemp - 1;
        MessageBox.Show(iTemp.ToString());
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T18:20:35.690

每次单击按钮时，您都在构建 Class1 的新实例，然后减少此新创建实例的席位，该实例在方法结束时立即被销毁。
只需在表单中有一个 Class1 类型的私有变量（在表单中调用它的构造函数）并使用它：

```
public partial class Form1: Form {
    private Class1 _class1 = new Class1();

    private void button2_Click(object sender, EventArgs e) {
        _class1.AssignSeat();
        _class1.MSGbox();   
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T18:22:19.143

尽管每次单击按钮时都会创建一个新对象，但要解决您的问题，请将其设为`seats`静态。

这是一个糟糕的设计，正如@JonSkeet 所说

# windows - 获取有关 Windows 8 应用程序的包信息

> ID：13662282
> 
> 赞同：0
> 
> 时间：2012-12-01T18:16:29.467
> 
> 标签：windows, deployment

我意识到 Windows 8 应用程序包含在 Windows 8 包中。是否有一种编程方式来获取 PackageId、安装位置和任何外部依赖项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:17:33.677

Yes. You can leverage the Windows Runtime Packaging API.

To start, you can retrieve some PackageVersion information.There is a package version number.

You can read about it here: [http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.packageversion.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.packageversion.aspx)

There are various objects that give you additional information.

```
Package package = Package.Current;
PackageId packageId = package.Id;
PackageVersion version = packageId.Version; 
```

Here are some of the details available:

```
packageId.Name
version.Major
version.Minor
version.Build
version.Revision
packageId.Architecture
packageId.ResourceId
packageId.Publisher
packageId.PublisherId
packageId.FullName
packageId.FamilyName
package.IsFramework 
```

# c - 是否有任何库可以在 C 中将 pdf 转换为 jpeg

> ID：13662286
> 
> 赞同：3
> 
> 时间：2012-12-01T18:16:46.860
> 
> 标签：c

> **可能重复：**
> [将 PDF 转换为 PNG](https://stackoverflow.com/questions/653380/converting-a-pdf-to-png)

C 语言中的任何开源库都可以将 PDF 转换为 JPEG。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:38:44.297

mupdf 内部使用 libfitz（非常小）并支持编写 png（它仅解码 jpeg - 至少默认情况下），但您可以使用 mtpixel（mtcelledit 的一部分）转换为 jpeg，convert（imagemagic 的一部分）

mupdf 示例：
[http ://git.ghostscript.com/?p=mupdf.git;a=blob;f=doc/example.c](http://git.ghostscript.com/?p=mupdf.git;a=blob;f=doc/example.c)

png2jpg：
[http ://src.gnu-darwin.org/ports/games/torcs/work/torcs-1.3.0/src/misc/png2jpg/png2jpg.c](http://src.gnu-darwin.org/ports/games/torcs/work/torcs-1.3.0/src/misc/png2jpg/png2jpg.c)

编辑：如果您不介意将 cairo 作为依赖项（现在它非常大），libpoppler 也可以工作，但 mupdf 更小且易于破解。

# android - TimePicker 小时在切换到 24 小时后不更新

> ID：13662288
> 
> 赞同：5
> 
> 时间：2012-12-01T18:16:58.827
> 
> 标签：android, time, timepicker

例如，当我在 18:00 创建这个 timePicker(below) 时，timePicker 的 timeValue 将为 06:00。在 19:44->07:44... 因此，从 AM/PM 切换到 24 小时模式后，它不会移动到正确的当前时间。我该如何改变呢？我的目标是 timePicker 显示创建它的当前时间。就像我在 AM/PM 模式下使用它时一样。

```
TimePicker timePicker = (TimePicker) convertView.findViewById(R.id.time_picker);
timePicker.setIs24HourView(true); 
```

对不起，糟糕的表述，希望你能理解我的问题。否则就问吧。

更新：

```
public class ChooseTimeViewDialog extends AlertDialog {

    protected Context context;

    public ChooseTimeViewDialog(final Context context) {
        super(context);     
        this.context = context;
    }

    public void onCreate(Bundle savedInstanceState) {
        LayoutInflater inflater = this.getLayoutInflater();

        View convertView = inflater.inflate(R.layout.dialog_choose_time_view, null);
        setContentView(convertView);
        setTitle(R.string.title_dialog_choose_time_view);

        final TimePicker taskTimePicker = (TimePicker) convertView.findViewById(R.id.dctv_task_time_picker);
        taskTimePicker.setIs24HourView(true);

        setButton(DialogInterface.BUTTON_POSITIVE, "Choose", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                int hour = taskTimePicker.getCurrentHour();
                int minute = taskTimePicker.getCurrentMinute();

                Calendar cal = new GregorianCalendar();
                cal.set(0, 0, 0, hour, minute, 0);

                ((AddTaskViewActivity) context).setSelectedTime(cal.getTime());
            }
        });
        setButton(DialogInterface.BUTTON_NEUTRAL, "No time", new DialogInterface.OnClickListener() {
            @Override
            public void onClick(DialogInterface dialog, int which) {
                ((AddTaskViewActivity) context).setSelectedTime(null);
            }
        });

    }

} 
```

XML:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TimePicker
        android:id="@+id/dctv_task_time_picker"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true"
        android:layout_centerHorizontal="true" />

</RelativeLayout> 
```

在我将初始化移动到 onCreate 并使用 setContentView(View) 后，对话框的背景是透明的，它是全屏的并且没有按钮..为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T19:13:19.933

> 我可以使用 timePicker.setCurrentHour(new Date().getHours())，但这不是我想要的解决方案。应该有可能以更好的方式解决它。

查看[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.1_r1/android/widget/TimePicker.java#TimePicker.setIs24HourView%28java.lang.Boolean%29)，这是一个在 API 10 之后出现的错误：

```
public void setIs24HourView(Boolean is24HourView) {
    if (mIs24HourView == is24HourView) {
        return;
    }
    mIs24HourView = is24HourView; 
    // cache the current hour since spinner range changes
    int currentHour = getCurrentHour();
    updateHourControl();
    // set value after spinner range is updated
    setCurrentHour(currentHour);
    updateAmPmControl();
} 
```

正确的顺序是：

```
// cache the current hour since spinner range changes
int currentHour = getCurrentHour();
mIs24HourView = is24HourView; 
```

因为`getCurrentHour()`依赖`mIs24HourView`返回 1-12 或 0-23...

但在更新和部署源代码之前，您别无选择。你需要自己`setCurrentHour()`打电话`setIs24HourView()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:38:18.477

你应该初始化你的对话框[`onCreate`](http://developer.android.com/reference/android/app/Dialog.html#onCreate%28android.os.Bundle%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-24T16:40:10.783

除了接受的答案之外，如果您使用的是 Xamarin，那么您可以通过继承 TimePicker 并覆盖 SetIs24HourView 来做同样的事情，如下所示：

```
public class TwentyFourHourMvxTimePicker : MvxTimePicker
{
    public TwentyFourHourMvxTimePicker(Context context, IAttributeSet attrs) : base (context, attrs)
    {

    }

    public override void SetIs24HourView (Java.Lang.Boolean is24HourView)
    {
        var current = CurrentHour;
        base.SetIs24HourView(is24HourView); 
        CurrentHour = current;
    }
} 
```

# objective-c - 为什么这个 HTTP 帖子的正文为空？

> ID：13662293
> 
> 赞同：0
> 
> 时间：2012-12-01T18:17:25.367
> 
> 标签：objective-c

我有一个 NSData 对象，它代表 IOS Facebook SDK 提供的 Facebook 用户。这个对象是 JSON 格式的，我正在尝试将它发布到服务器应用程序。下面是我执行 HTTP Post 的 Objective C 代码。此代码的问题在于服务器上的请求正文为空。有人能发现我做错了什么吗？

```
-(void)postUserDataToServer:(NSString *) user {

// Convert the JSON string to Data to be sent.

NSMutableURLRequest* request = [[NSMutableURLRequest alloc] init];
[request setURL:[NSURL URLWithString:@"http://ec2-whatever.compute-1.amazonaws.com:3000/user"]];
[request setHTTPMethod:@"POST"];
[request setValue:[NSString stringWithFormat:@"%d", [user length]] forHTTPHeaderField:@"Content-Length"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:user];
[NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil];

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T18:30:43.093

好吧......用户不是NSData！您必须将字符串转换为数据

```
assert(user.length);
id bodyData = [user dataUsingEncoding:NSUTF8StringEncoding];
request.HTTPBody = bodyData; 
```

# php - SVN Apache post-commit update web files

> ID：13662298
> 
> 赞同：0
> 
> 时间：2012-12-01T18:17:46.907
> 
> 标签：php, apache, svn, centos

So I have SVN installed on our web server. The idea is that the working copies are loaded on developer machines and when they commit (conflicts asside) the server executes a post-commit bash.

Repositories are per project based, the idea is that upon post-commit, the bash file needs to force delete the entire project folder and files, and export the updated repo back into the project folder, to keep the website updated via SVN... I know there's bound to be some disagreements with this method but it works for us... except for ONE thing...

While the server is re-exporting the project, any requests being made to the website raise errors since there's chunks of files missing... Is there any way to "queue" apache/php while SVN exports, and then "resume" the requests?

The server exports the files pretty quickly but it's those few millisecs that someone catches the server and raises PHP errors...

Please let me know if there's a typical method to sort this out...

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:33:47.107

您可以通过在新目录树中构建内容然后重命名内容来*最大限度地减少中断。*也就是说，假设您的内容在 下可用`/var/www/myproject`，您的更新后脚本将：

*   填充`/var/www/myproject.new`
*   重命名`/var/www/myproject`为`/var/www/myproject.old`
*   重命名`/var/www/myproject.new`为`/var/www/myproject`
*   删除`/var/www/myproject.old`

虽然不是原子更新，但执行两次重命名所需的时间将很短，应该会大大改善这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T04:09:03.083

1.  您不能导出整个树，而只能导出受此修订影响的文件，并在不删除站点的情况下替换文件
2.  您仍然可以执行完全导出和完全替换，但不能在挂钩中删除站点，只能覆盖旧文件（在修订文件中删除，您在站点上保持完整，不会破坏它，因为它们不相关）并执行完整在夜间 cron-job 中同步（每天或每周）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-02T21:12:37.017

我真的觉得@Larsks 的回答足够实用，可以在当时提供一个几乎原子且需要的解决方案，所以我将他的回答保持为“正确”，但我认为我也会考虑[这篇文章](https://stackoverflow.com/questions/307437/moving-a-directory-atomically)：

假设 mv 是完全原子的，提交后挂钩 bash 可能如下所示：

```
svn export file:///svn/repo /var/www/projectdir_NEW --force
mv /var/www/projectdir /var/www/projectdir_OLD
mv /var/www/projectdir_NEW /var/www/projectdir
rm -rf mv /var/www/projectdir_OLD 
```

唯一的问题是 2 mv 命令之间的几秒钟，这是最接近原子和最干净的方法......但是，对于完全原子的影响，假设我不介意使用一点 PHP 和因为我的项目有一个全局 init.php，post-commit 可以这样做：

```
date > /var/www/projectdir.updating
svn export file:///svn/repo /var/www/projectdir_NEW --force
mv /var/www/projectdir /var/www/projectdir_OLD
mv /var/www/projectdir_NEW /var/www/projectdir
rm -rf mv /var/www/projectdir_OLD
rm /var/www/projectdir.updating 
```

创建一个名为“projectdir.updating”的临时文件，其中包含日期，执行更新，然后删除临时文件，我现在可以使用我的 init.php 来“限制”任何请求：

```
while (file_exists("/var/www/projectdir.updating")) usleep(200); 
```

此外，我可以检查保存在临时文件中的日期详细信息是否有错误退出...（如果导出无法删除 .updating 文件）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T18:36:37.760

我不知道以下内容是否对您有用，但您可以制作一个两步代码升级脚本：

1.  tempdir 中的 SVN 结帐
2.  将生产目录中的所有代码替换为 tempdir 中包含的数据
3.  删除临时目录

你永远不会经历冲突。

顺便说一句，我认为这不是最佳做法。您应该解决客户端开发人员机器上的冲突。

# php - PHP is allowing old Session ID's to be used without changing them which allows Sessions to be easily Hijacked. How to fix?

> ID：13662299
> 
> 赞同：2
> 
> 时间：2012-12-01T18:17:49.343
> 
> 标签：php, session, cookies, sessionid, session-hijacking

On one of my sites, I have `ini_set('session.use_trans_sid', 1)` set which allows users with no Cookies to use the site. It does this be keeping track of the Session via the URL.

However, I'm experiencing a serious security issue that is allowing Sessions to be easily hijacked.

Basically, Google is indexing pages with the Session ID it was given at the time of its Crawl since the Googlebot does not use Cookies.

Then, when someone searches for my site and then clicks the search result in Google that includes the old Session URL, that old Session ID now becomes *their* Session ID (rather than a new one being generated).

So then when that user logs in, their account is logged in using the Session ID indexed all over Google! That means **any** other users searching for our site and clicking one of the search results in Google **gets automatically logged in to that other users account!**

Talk about a massive security hole!

How can I fix this? I would have thought that PHP would recognize that a Session ID is no longer valid (or no longer exists) and then generate a new one, but it doesn't seem to be doing that. It seems like if it did do that, it would fix this issue.

Please help!

* * *

**EDIT:**

What is essentially happening here is that PHP is allowing anyone to create their own custom Session ID by simply entering whatever they want for the Session ID parameter in their URL, and PHP will start using that as their Session ID. I can *literally* make the Session ID = "securityflaw" in the URL and it will *literally* use that as the Session ID even after logging in! So when someone clicks a link on Google with the Googlebot's old Session ID, PHP is making the users "custom" Session ID be that. Surely something is amiss!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:00:08.140

您应该查看[http://php.net/manual/en/function.session-regenerate-id.php](http://php.net/manual/en/function.session-regenerate-id.php)以在用户登录时重新生成 SID，因此如果 Google 搜索中的任何 SID 用于登录，则该 SID 将变为无效。

# spring - How to get multipart contents using the PUT method in Spring MVC?

> ID：13662301
> 
> 赞同：0
> 
> 时间：2012-12-01T18:17:55.423
> 
> 标签：spring, httprequest, multipartform-data, http-delete, http-put

I was fumbling to use `RequestMethod.PUT` (and `RequestMethod.DELETE`) as described in my [previous question](https://stackoverflow.com/q/13629653/1391249). At last the approach worked but when I designate a method with `RequestMethod.PUT` in my Spring controller, this method is called when the form is submitted but presumably it appears that the request is not regarded as a multipart request even though the form has that attribute `enctype="multipart/form-data"`.

The form is as follows something similar to the previous question.

```
<form:form id="mainForm" name="mainForm" method="put" action="Temp.htm" enctype="multipart/form-data" commandName="tempBean">
    <input type="file" id="myFile" name="myFile"/>
    <input type="text" id="myText" name="myText"/>
    <input type="submit" id="btnSubmit" name="btnSubmit" value="Submit"/>
</form:form> 
```

and the method in Spring which is invoked when a submit button is clicked is as follows.

```
@RequestMapping(method={RequestMethod.PUT}, value={"admin_side/Temp"}, headers={"content-type=multipart/form-data"})
public String update(@RequestParam("myText") String text, @ModelAttribute("tempBean") TempBean tempBean, BindingResult error, Map model, HttpServletRequest request, HttpServletResponse response)
{        
    System.out.println(ServletFileUpload.isMultipartContent(request)+"  :  "+text);
    return "admin_side/Temp";
} 
```

Other request parameters are obtained like `@RequestParam("myText") String text` and even with `request.getParameter("myText")` but the the method invocation of `ServletFileUpload.isMultipartContent(request)` returns false (also `request.getParameter("myFile")` returns `null`) which means that the request doesn't appear to be a multipart request.

When the request method is changed to `RequestMethod.POST`, everything goes fine.

How to get multipart contents using the `PUT` method?

# algorithm - How to remove the max element from a min-max heap?

> ID：13662302
> 
> 赞同：2
> 
> 时间：2012-12-01T18:18:00.260
> 
> 标签：algorithm, data-structures, heap, max, min

I searched and didn't find a way to do this, if it exists, can you guys help me how to do it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:30:48.507

根据您的*确切*堆布局，您可能有*两个*候选者（假设您的根是最小元素，第二层是最大元素）。

选择最大的一个，并将其替换为堆的最后一个元素 - 就像使用常规堆一样 - 并执行向下堆修复。就像普通堆一样，从位置 1 或 2 而不是 0 开始，然后像在 min-max-heap 中一样下降到级别。

# android - Android Development: Name of this view

> ID：13662303
> 
> 赞同：0
> 
> 时间：2012-12-01T18:18:15.710
> 
> 标签：android, iphone

Hi, I am new to mobile app development, so forgive me if this seems like a stupid question. The screenshot below is from the Sydney airport iPhone app. Could anyone please tell me what kind of View is that? I mean, the one with all the "To and From" info, like "parking" etc.? And is it possible to make such a view in Android?

![Screen](../Images/41b311d35a1bccb069adc631b11a7519.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T18:22:39.087

在 Android 上，这可以通过`ListView`自定义列表项视图实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:22:14.503

尝试 Android 项目的 UITableView。

[https://github.com/thiagolocatelli/android-uitableview](https://github.com/thiagolocatelli/android-uitableview)

# android - Which way of creating view is faster in android XML or drawing on Canvas

> ID：13662307
> 
> 赞同：0
> 
> 时间：2012-12-01T18:18:39.903
> 
> 标签：android, android-custom-view

> **Possible Duplicate:**
> [Best practices: Layouts on Android (Programmatic vs XML)](https://stackoverflow.com/questions/9827819/best-practices-layouts-on-android-programmatic-vs-xml)

# Which of way of creating complex view in android is faster

1) defining the layout in xml by adding standard view in layout.

2) Draw the required in the onDraw of an custom view

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T20:39:40.700

如果您在谈论性能，这取决于您使用 onDraw() 的效率。

当您在 XML 中定义视图时，您所做的就是告诉布局膨胀器创建视图类型类的实例并将其初始属性设置为您定义的 XML 属性。然后，当视图被绘制时，你猜怎么着——它的 onDraw() 被调用来绘制视图。

因此，如果您扩展 View 并覆盖 onDraw() 并使用与它的超类使用完全相同的方法来绘制视图，那么就没有性能差异。

因此，答案（如果您确实在询问性能）是“视情况而定”。

同样，正如您的 onDraw() 可能效率低下一样，您的布局设计也可能效率低下。冗余视图组，如嵌套的 LinearLayouts、RelativeLayouts 等会对性能产生非常大的负面影响。布局层次结构查看器是一个很好的了解工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T18:35:29.280

[Ollie C https://stackoverflow.com/a/9827887/603233](https://stackoverflow.com/a/9827887/603233)的好答案：

> XML 的优点是：
> 
> ```
>  1\. Ability to use layout editors (Eclipse)
>  2\. Easier to preview layouts
>  3\. Possible to benefit from auto-localisation of layouts
>  4\. Easily maintain different parallel layouts for difference devices (screens)
>  5\. Can get a sense of the layout by looking at it (easier than code)
>  6\. Easy to break layouts down into pieces (fragments, includes, etc) to remove duplication
>  7\. Keeps a separation between the visual design, and the functionality behind it 
> ```

# java - Java Static variable value can't not be transmitted

> ID：13662309
> 
> 赞同：0
> 
> 时间：2012-12-01T18:19:02.430
> 
> 标签：java, networking, inheritance, static, network-programming

I have a homework, in which we should implement a server/client classes, so that we send 1400Bytes packets to the server and we get them back as reply. We must mess the throughput in kbit/s and it must be printed when there a timeout by the server! but the problem is that I'm calculating the throughput in the Client-Class, and trying to print it in the 'catch block' of the timeout-exception in the Server-Class, but this value is always transmitted/printed as 0.0, which is not the case when I print it in the Client-Class! I tried with simple static variable, with static get-method, but it doesnt work! Can anyone help me please? I must give it back today at 00:00! It Would be great! Thanks!

```
package blatt6;

import java.io.*;
import java.net.*;

public class UDPClient
{
static double startTime;
static double endTime;
static double dauer; 
static double paketGroesseKBit = (1400*8) / 1024;
private static double durchsatz;

public static void main(String args[])
{
    DatagramSocket sock = null;
    int port = 7777;
    String s = "";

    for (int i=0; i<1400; i++) {
        s = s + 'b';
    }

    //BufferedReader cin = new BufferedReader(new InputStreamReader(System.in));

    try
    {
        sock = new DatagramSocket();
        InetAddress host = InetAddress.getByName("localhost");

        int j=0;
        while(j<4)
        {
            //take input and send the packet
            echo("Enter message to send : ");
            //s = (String)cin.readLine();

            byte[] b = s.getBytes();    
            DatagramPacket  dp = new DatagramPacket(b , b.length , host , port);    
            byte[] buffer = new byte[1400];
            DatagramPacket reply = new DatagramPacket(buffer, buffer.length);

            sock.send(dp);
            startTime = System.nanoTime();      
            //buffer to receive incoming data
            sock.receive(reply);
            endTime = System.nanoTime();
            dauer = endTime - startTime;
            durchsatz = paketGroesseKBit / ((dauer/2) * Math.pow(10, -9));
            //System.out.println(dauer);

            j++;        
//              byte[] data = reply.getData();
//              s = new String(data, 0, reply.getLength());
//              
//              //echo the details of incoming data - client ip : client port - client message
//              echo(reply.getAddress().getHostAddress() + " : " + reply.getPort() + " - " + s);
        }
    }

    catch(IOException e)
    {
        System.err.println("IOException " + e);
    }
}

//simple function to echo data to terminal
public static void echo(String msg)
{
    System.out.println(msg);
}

public static double getDurchsatz() {
    return durchsatz;
}
} 
```

Here Server:

```
package blatt6;

import java.io.*;
import java.net.*;

public class UDPServer
{

static double durchy = UDPClient.getDurchsatz();

public static void main(String args[])
{
    DatagramSocket sock = null;
    int timeout = 5000;

    try
    {
        //1\. creating a server socket, parameter is local port number
        sock = new DatagramSocket(7777);
        sock.setSoTimeout(timeout);
        //buffer to receive incoming data
        byte[] buffer = new byte[1400];

        DatagramPacket incoming = new DatagramPacket(buffer, buffer.length);

        //2\. Wait for an incoming data
        echo("Server socket created. Waiting for incoming data...");

        //communication loop
        while(true)
        {
            sock.receive(incoming);
            sock.send(incoming);                

//                byte[] data = incoming.getData();
//                String s = new String(data, 0, incoming.getLength());
//
//                //echo the details of incoming data - client ip : client port - client message
//                echo(incoming.getAddress().getHostAddress() + " : " + incoming.getPort() + " - " + s);       
//                s = "OK : " + s;
//
//                DatagramPacket dp = new DatagramPacket(s.getBytes() , s.getBytes().length , incoming.getAddress() , incoming.getPort());
//                sock.send(dp);
        }
    }

    catch(IOException e)
    {
        System.out.println(durchy);
        System.err.println("IOException " + e);
    }
}

//simple function to echo data to terminal
public static void echo(String msg)
{
    System.out.println(msg);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:51:28.853

服务器和客户端都在同一个项目中并不重要，因为您正在运行两个实例（使用 eclipse 的播放按钮两次）它们不共享任何东西。

如果服务器和客户端在同一程序的不同线程中，它们可以共享属性，但这对您的作业（或我能想到的任何应用程序）没有意义。

正如我之前的评论中所述，您应该计算客户端和服务器的吞吐量。

您可以制作第三类，即*吞吐量计算器*，以保持通用逻辑。然后客户端和服务器都可以重用代码。请记住，在执行时，它们将执行相同代码的不同副本，因此它们不会共享值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T19:02:57.147

好吧，我看到的一个*明显*错误是您使用静态初始化程序`UDPClient.getDurchsatz()`从服务器类调用。这是可行的，因为这两个类在同一个包中，但它也不起作用，因为该调用是在服务器类中的**任何非静态初始化程序代码执行之前进行的。**因此，您正在读取默认值，即 a`double`是`0`. 如果您将静态初始化程序添加到客户端类以将值设置为非零值，则应该改为获取该值。

在这样的事情有任何工作希望之前，您需要从字段中删除静态初始化，*而是*在需要时向客户端类询问值。

但是，即使没有详细查看您的代码，我认为您也需要进行一些架构更改。**计算吞吐量的正常方法是计算**（一组）发送或接收调用的时间，然后根据传输的数据量和经过的时间计算吞吐量。这可以在客户端或服务器端完成，您不需要在两者之间建立单独的通信通道来做到这一点。

# objective-c - Objective-C - 两个异步方法，等待条件

> ID：13662314
> 
> 赞同：0
> 
> 时间：2012-12-01T18:20:15.363
> 
> 标签：objective-c, ios, cocoa, asynchronous, wait

我正在运行两种异步方法（请参阅此[SO 线程](https://stackoverflow.com/a/13653130/294661)以供参考）。

除非我有这种情况，否则它工作得很好。当任一方法发生错误时，我将为用户显示此信息，因此在块中我将检查错误并执行以下操作：

```
if(error) {
    int64_t delayInSeconds = 2.0;
    dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
    dispatch_after(popTime, dispatch_get_main_queue(), {

    // Show a popup for 2.0 seconds alerting the user of the error
    });
} 
```

这没有问题。但是当这两个异步操作都有错误时，就会出现**问题**。完成的第一个方法将显示错误可能仅 0.5 秒，然后第二个异步操作将显示错误 2.0 秒（不考虑已经显示错误消息）。

所以我需要一些过程来检查是否已经显示了错误消息，然后等待该错误消息消失（2.0 秒），然后立即显示第二条错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:19:48.500

听起来您只需要实现一个队列即可向用户显示这些错误。您可以将其作为 上的一个类别`SSHUDView`，使用如下简单的界面：

```
@interface SSHUDView (queue)
- (void)showForDuration:(NSTimeInterval)duration;
@end 
```

使用串行 GCD 队列实现它：

```
@implementation SSHUDView (queue)

- (void)showForDuration:(NSTimeInterval)duration {
    static dispatch_once_t once;
    static dispatch_queue_t queue;
    dispatch_once(&once, ^{
         queue = dispatch_queue_create("SSHUDView(serial)", 0);
    });

    dispatch_async(queue, ^{
        dispatch_sync(dispatch_get_main_queue(), ^{
            [self show];
        });

        usleep(duration * USEC_PER_SEC);

        dispatch_sync(dispatch_get_main_queue(), ^{
            [self dismiss];
        });
    });
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T20:30:19.257

作为 Rob Mayoff 的好答案的替代方案，您可能想要重构您的 UI。对于您和最终用户来说，一个接一个地弹出对话框可能有点乏味。事实上，弹出对话框可能很乏味，特别是如果它们是模态的（即使只是表单）。

也许你可以做一些更有趣的事情？就像将错误显示为从窗口顶部向下滑动的横幅一样。如果您有多个错误，则只有多个横幅，一个在另一个下方。然后它们会在适当的时间淡出（尽管要小心自动关闭，因为用户可能不会一直在观看您的应用程序）。

另一种方法是创建一个对话框，但在发生其他错误时更改或附加到其消息中。这样做的缺点是对话框在用户阅读时可能会发生变化，因此您必须小心并仔细考虑这是否合适。它在错误密切相关的情况下非常有用，例如，您尝试连接到您的服务器，但它失败了。因此，您在开始常规网络连接测试的同时显示错误消息。当该测试返回并说网络完全消失时，您更新您的对话框以澄清不是服务器关闭，而是您的互联网连接。

或者，如果您将这些更多显示为与音量变化指示器相同的叠加层，您可能只想并排显示它们。您甚至可以很花哨，让现有的（S）滑动到左侧为新的腾出空间，但除非它们是非常简单的图标，否则可能会使用户难以理解正在发生的事情。

# windows-8 - Window Store app - return value to calling page

> ID：13662315
> 
> 赞同：3
> 
> 时间：2012-12-01T18:20:22.747
> 
> 标签：windows-8

I have a WinRT "Windows Store" app with two pages: a list page and an edit page. When the user clicks a list item and selects "Edit" from the bottom app bar, I pass the item to the edit page. What I need from there is to support two possible user actions:

*   If the user navigates back using the Back Button (top navigation), I want the unmodified item to be returned the calling page.

*   If the user clicks on a supplied "Save" button (on the edit page), I want to update the various properties of the item, save it to a data store and automatically return the modified item to the calling page.

Either way, the calling page needs to update its display with the changes made to the item, if any. I can do most of this, but I can't figure out how to return the item to the calling page. How do I go about this?

Please keep in mind, there will be other pages added to the app going forward (which will also be called from the main "lists" page). I need to make an accommodation such that when I return from a given "child" page back to the lists page, the behavior of the list page will differ based on which page is being returned from. (Hope that makes sense...).

Bonus question: I'd also like to capture the back navigation event to notify the user that the modified item will not be saved and give them the option to continue, save and continue or cancel the return navigation action. Is that possible?

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T22:18:51.750

我认为这种方法对于我要解决的问题是错误的。我从来没有找到一种特别好的方法来将子页面的值返回到父页面。

相反，我的问题允许采用不同的方法。我有一个我在应用程序中跟踪的项目的主列表<>。这个 List<> 被序列化到本地存储。当我调用子页面时，我传入现有项目（用于编辑）或空实例（用于添加）。

当我到达子页面时，我在 LoadState 方法中拉出传入的项目。如果传入的项目为空，我创建一个新实例，它成为我的工作实例。

从那里，我允许用户根据需要编辑项目。当用户保存项目时，我从存储中反序列化主 List<>。然后，我要么将新项目添加到主 List<>，要么替换 List<> 中的现有项目。然后我将主 List<> 重新序列化到存储中，替换已经存在的内容。

当用户返回调用（父）页面时，我从 LoadState 方法的存储中重新获取主 List<> 项目并重新填充页面。如果更新了现有项目或添加了新项目，则父页面会准确反映更改。这就是我最终需要发生的一切。

我不知道是否有办法做我最初要求的事情，但至少在这种情况下，我决定我不需要这样做。这种替代方法或类似方法可能是在“返回”事件上将对象传递到导航堆栈中的父页面的唯一方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T13:56:10.807

我相信，如果我理解您的问题，那么您正在寻找以下方面的东西：

```
WinJS.Navigation.navigate("/path/to/your/page.html", {/*this object will be the second 'options' parameter to your page's ready function }); 
```

. . .

```
// This function is called whenever a user navigates to this page. It populates the page elements with the app's data.
ready: function (element, options) { 
```

# api - 用于 flex 的 mapquest flash API：找不到 tilemap 导入

> ID：13662316
> 
> 赞同：0
> 
> 时间：2012-12-01T18:20:28.080
> 
> 标签：api, flash-builder, mapquest

我想在 Flash Builder Web 应用程序中使用 mapquest（所以不是 AIR）。我已经使用 mapquest API 文档（[here](http://developer.mapquest.com/web/products/open/flash/documentation/basic-map)）在组件中添加了一个简单的地图，但我不断收到 com.mapquest.tilemap.* 未导入的警告，并且找不到 Tilemapcomponent。我在文档中找不到任何关于此的内容...我是否必须添加某种库或组件？我也尝试过使用 AS3 类，但这也不起作用，并且给了我相同类型的错误。

这是我的组件中的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
             xmlns:s="library://ns.adobe.com/flex/spark"
     xmlns:mq="com.mapquest.tilemap.*"
     layout="vertical" 
     width="100%" height="100%" 
     viewSourceURL="srcview/index.html">

    <mq:TilemapComponent id="myMap" 
                         x="0" y="0" 
                         key="myKey" 
                         zoom="3" 
                         width="100%" height="100%"/> 
</s:Group> 
```

如果您需要了解更多信息或需要查看更多代码，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T15:06:32.063

看起来您想使用 Open Flash API -- 您是否从[该页面](http://developer.mapquest.com/web/products/open/flash)下载了库 (.swc)并且已将其合并到您的项目中？听起来该项目没有找到图书馆。如果您不想要 API 的开放版本，我们还提供基于 NAVTEQ 数据的许可版本，所以这也是一个选项。（我在 MapQuest 工作）

# php - Allowed memory size of 33554432 bytes exhausted (tried to allocate 30720 bytes)

> ID：13662317
> 
> 赞同：-2
> 
> 时间：2012-12-01T18:20:35.010
> 
> 标签：php, mysql, memory

As the title suggests, I am receiving an error when loading my website, [Minecraft-Seeds.net](http://minecraft-seeds.net) It runs using the [AV Arcade script](http://www.avscripts.net/avarcade/index.php), and has been **running fine without any hitches for the past year and a half**. Recently, the website has been giving me the memory error, and we have made **absolutely no changes to the code** and even restored previous backups of the website. Our visits have not gone up crazily to explain an increase in resource usage, as we have had a **low month this month** with around 300,000 visits.

The popular suggestion here [Allowed memory size of 33554432 bytes exhausted (tried to allocate 43148176 bytes) in php](https://stackoverflow.com/questions/415801/allowed-memory-size-of-33554432-bytes-exhausted-tried-to-allocate-43148176-byte) does not work, as my script has an actual issue which is causing it to use much more memory than I have.

I have looked through the code and am not sure as to where exactly I should begin looking. The mySQL queries appear to have LIMITs on them, so I'm not sure what is causing the error.

If you go to the website right now, it will give you the following place as the origin of the error:

> **/home/mineseed/public_html/config.php** on line **39**

This line of code is as follows`$new_plays = 4;` And I have tried commenting it out, and it results in the error simply jumping around my site to line after line of code, with no clear solution in sight.

Any help is greatly appreciated.

**EDIT** I've added the config.php file

```
<?php
// mySQL information
$server = 'localhost';                   // MySql server
$username = 'user';                      // MySql Username
$password = 'pass';                         // MySql Password
$database = 'database';                  // MySql Database

// The following should not be edited
  $con = mysql_connect("$server","$username","$password");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("$database", $con); 

//mysql_query("UPDATE ava_games SET height='300' WHERE height='0'") or die (mysql_error());

//
$sql = mysql_query("SELECT * FROM ava_settings");
$row = mysql_fetch_array($sql);
$site_name = $row['site_name'];
$site_description = $row['site_description'];
$site_keywords = $row['site_keywords'];
$site_url = $row['site_url'];
$seo_on = $row['seo_on'];
$template_url = $row['template_url'];
$max_results = $row['max_results'];
$image_height = $row['image_height'];
$image_width = $row['image_width'];
$adsense = $row['adsense'];
$cat_numbers = $row['cat_numbers'];
$email_on = $row['email_on'];
$add_to_site = $row['add_to_site'];
$plays = $row['plays'];
$language = $row['language'];
$featured = $row['featured_games'];
$play_limit = $row['play_limit'];
$adsense_id = $row['adsense_id'];
$new_plays = 4;

// Convert super globals 
if (phpversion() >= '5.0.0') 
{ 
    $HTTP_POST_VARS = ($_POST); 
    $HTTP_GET_VARS = ($_GET); 
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:32:29.600

1.  首先，您需要检查您是否在 php 脚本中使用递归，因为有时递归失败，这就是发生此错误的原因。

2.  如果您使用的数组过多，请在使用后取消设置，以便释放一些内存用于其他执行。IE：`unset($array)`

3.  请增加您的内存限制`php.ini`或使用 php 函数`ini_set('memory_limit','128M');`或使用`.htaccess`文件覆盖`memory_limit`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:25:05.973

尝试在第 39 行之前取消设置不需要的变量并腾出内存。另外，继续清理后面的代码。虽然不是首选，但您也可以在 php.ini 中增加内存分配。

查询可以通过只拉入那些需要的列来提高效率，

```
 Select column1, column2...... 
```

确保列具有索引以获得更快的结果。如果您确定需要检索的结果数量，查询还需要使用“限制”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T18:33:37.343

我很抱歉我的英语。如果不查看代码，很难判断内存泄漏在哪里。是的，我同意所有修复（增加 php 内存，并限制查询中的行）。当您使用数组或大文件（解析 xml）或类似的东西时，内存可能会落在某个地方。尝试查找增加内存的代码部分，使用 var_dump()、debug_backtrace()，或尝试使用记录所有变量的库

# javascript - javascript 检查图像是否存在

> ID：13662329
> 
> 赞同：1
> 
> 时间：2012-12-01T18:22:00.080
> 
> 标签：javascript, html

我试图显示图像或静态地图图像取决于图像的存在。我想将我的图像路径传递给 java 脚本函数，因为路径在我的程序中是动态的。因此，如果图像在给定路径中不存在，则显示静态谷歌地图图像。
我正在使用该代码来执行此操作，但似乎无法正常工作。你能帮助我吗？

```
 function initialize() {
        var img = document.getElementById("super");
        var mdata = $('#image_div');
        var mpath = mdata .data('path');
        img.src =mpath ;

        img.onerror = function( ) {
        document.getElementById("super").style.display = "block";
        alert("failed to load");
    }
    img.onload = function( ) {
        alert("do nothing");
    };
} 
```

这是小提琴： http: [//jsfiddle.net/H2gwu/2/](http://jsfiddle.net/H2gwu/2/) http://jsfiddle.net/H2gwu/3/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:25:50.113

固定小提琴：http: [//jsfiddle.net/HCC6V/](http://jsfiddle.net/HCC6V/)

我修复了一些错误：

*   mdata 后面的空格
*   你打开了一个你从未关闭过的功能块
*   您过早地声明了 src：如果图像在缓存中，您可能会错过加载事件
*   `none`CSS中的坏引号
*   如果找不到图像，则不调用显示地图

固定 JS：

```
var img = document.getElementById("super");
var mdata = $('#image_div');
var mpath = mdata.data('path');
img.onload = function( ) {
    alert("do nothing");
}
img.onerror = function( ) {
    document.getElementById("super").style.display = "block";
    alert("failed to load");
    $('#google_map').show();
}
img.src =mpath ; 
```

在 CSS 中：

```
display: none; 
```

代替

```
display: "none"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T19:10:19.370

对于可能存在的图像，我发现最优雅的解决方案是使用 $ajax，例如：

```
$.ajax({
    url: 'your_image.jpg',
    type: "POST",
    dataType: "image",
    success: function() {
        /* function if image exists (setting it in div or smthg.)*/
    },
    error: function(){
       /* function if image doesn't exist like hideing div or setting default image*/
    } 
```

});

# javascript - Web 依赖管理器

> ID：13662341
> 
> 赞同：1
> 
> 时间：2012-12-01T18:23:28.000
> 
> 标签：javascript, bower

我有2个项目。他们使用相同的 js/img 文件。当我在第一个项目中更改 js 内容时，我也应该在第二个项目中更改它。我想让它成为依赖。所以我`deploy`更改了我的本地存储库，然后转到 project1/project2，调用`update`并加载更改。

我曾尝试使用[bower](https://github.com/twitter/bower)，但由于一些奇怪的行为，它不能满足我（它复制整个文件夹内容并忽略`main`中的部分`component.json`）

如何在我的项目中实现正常的依赖管理？***注意：我需要管理我的本地依赖项***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T18:36:37.337

中的`main`属性`component.json`目前仅用于使用 Bower 的其他工具。目前正在[讨论](https://github.com/twitter/bower/issues/88)是否 Bower 应该有一个`.bowerignore`文件来忽略它不需要的文件。

您最好只使用 git 子模块或对文件进行符号链接。

或者，您可以检查是否有任何其他 JS 包管理器满足您的需求：[npm](https://npmjs.org/)、  [Ender](http://ender.jit.su/)、  [volo](http://volojs.org/)、[component](https://github.com/component/component)、  [jam](http://jamjs.org)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T17:07:19.870

另一种选择（如果您只想获取单个文件）可能是：[pulldown](https://github.com/jackfranklin/pulldown)。

配置非常简单，您可以轻松地将自己的文件/url 添加到列表中。

# apache - Internet Explorer 无法显示网页 (VirtualHost)

> ID：13662343
> 
> 赞同：2
> 
> 时间：2012-12-01T18:23:52.043
> 
> 标签：apache, virtualhost

主机 127.0.0.1 yourebazar.local

httpd-vhosts.conf NameVirtualHost *:80 ServerName yourebazar.local:80 DocumentRoot "d:\web\yourebazar" ErrorLog error_log Options Indexes FollowSymLinks Includes ExecCGI AllowOverride all Order Deny,Allow Deny from all Allow from all

重启 Apache 输入 - [http://yourebazar.local](http://yourebazar.local) 调试了一天，还是这个消息“Internet Explorer 无法显示网页”。

但是如果我去我的网站，`http://localhost`我看到了我的[http://yourebazar.local](http://yourebazar.local)站点，我在 httpd.conf 中配置了我的 DocumentRoot，如下所示 - DocumentRoot "D:\web\yourebazar"

有什么解决办法？？？

# c# - C#/.NET 计时器和 Win32 睡眠功能都是不精确的

> ID：13662345
> 
> 赞同：1
> 
> 时间：2012-12-01T18:24:03.457
> 
> 标签：c#, c++, .net, windows, winforms

对于以下代码：

实际间隔始终是 1014.01 ms 而不是 1000 ms ...

我也尝试在 C++ 中使用 System.Windows.Forms.Timer、System.Threading.Timer 和 WinAPI Sleep(int) 函数，但 14.01 毫秒的额外增加始终存在。

Windows 8 的系统时钟是精确的，但 .NET 计时器和 Windows API 的 Sleep(int) 函数都是不精确的。

```
public partial class Form1 : Form
{
    private long ticks;

    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        System.Timers.Timer timer = new System.Timers.Timer(1000);
        // The actual interval is always 1014.01 ms ...
        // I've also tried to use System.Windows.Forms.Timer, System.Threading.Timer
        // and the WinAPI Sleep(int) function in C++, but the additional increase
        // of 14.01 ms always exists.
        timer.Elapsed += timer_Elapsed;
        timer.Start();
        ticks = System.DateTime.Now.Ticks;
    }

    void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
        textBox1.Text = Math.Round((e.SignalTime.Ticks - ticks) / 10000.0, 2).ToString();
        ticks = e.SignalTime.Ticks;
    }
} 
```

更新：

*   本机睡眠功能（ReactOS）：

```
// Call SleepEx with bAlertable = FALSE
VOID WINAPI Kernel32.Sleep(IN DWORD dwMilliseconds)

// Call NtDelayExecution with Alertable = bAlertable
// and DelayInterval.QuadPart = dwMilliseconds * -10,000
DWORD WINAPI Kernel32.SleepEx(IN DWORD dwMilliseconds, IN BOOL bAlertable)

// The syscall stub - call the kernel mode function NtDelayExecution directly
NTSTATUS NTAPI Ntdll.NtDelayExecution(IN BOOLEAN Alertable, IN PLARGE_INTEGER DelayInterval)

// Check for the access permissions of DelayInterval and then call KeDelayExecutionThread
NTSYSCALLAPI NTSTATUS NTAPI Ntoskrnl.NtDelayExecution(IN BOOLEAN Alertable, IN PLARGE_INTEGER DelayInterval)

// Core implement of the sleep/delay function
NTKERNELAPI NTSTATUS NTAPI Ntoskrnl.KeDelayExecutionThread(IN KPROCESSOR_MODE WaitMode, IN BOOLEAN Alertable,
IN PLARGE_INTEGER Interval OPTIONAL)
{
    PKTIMER Timer;
    PKWAIT_BLOCK TimerBlock;
    PKTHREAD Thread = KeGetCurrentThread();
    NTSTATUS WaitStatus;
    BOOLEAN Swappable;
    PLARGE_INTEGER OriginalDueTime;
    LARGE_INTEGER DueTime, NewDueTime, InterruptTime;
    ULONG Hand = 0;

    /* If this is a user-mode wait of 0 seconds, yield execution */
    if (!(Interval->QuadPart) && (WaitMode != KernelMode))
    {
        /* Make sure the wait isn't alertable or interrupting an APC */
        if (!(Alertable) && !(Thread->ApcState.UserApcPending))
        {
            /* Yield execution */
            NtYieldExecution();
        }
    }

    /* Setup the original time and timer/wait blocks */
    OriginalDueTime = Interval;
    Timer = &Thread->Timer;
    TimerBlock = &Thread->WaitBlock[TIMER_WAIT_BLOCK];

    /* Check if the lock is already held */
    if (!Thread->WaitNext) goto WaitStart;

    /*  Otherwise, we already have the lock, so initialize the wait */
    Thread->WaitNext = FALSE;
    KxDelayThreadWait();

    /* Start wait loop */
    for (;;)
    {
        /* Disable pre-emption */
        Thread->Preempted = FALSE;

        /* Check if a kernel APC is pending and we're below APC_LEVEL */
        if ((Thread->ApcState.KernelApcPending) && !(Thread->SpecialApcDisable) &&
            (Thread->WaitIrql < APC_LEVEL))
        {
            /* Unlock the dispatcher */
            KiReleaseDispatcherLock(Thread->WaitIrql);
        }
        else
        {
            /* Check if we have to bail out due to an alerted state */
            WaitStatus = KiCheckAlertability(Thread, Alertable, WaitMode);
            if (WaitStatus != STATUS_WAIT_0) break;

            /* Check if the timer expired */
            InterruptTime.QuadPart = KeQueryInterruptTime();
            if ((ULONGLONG)InterruptTime.QuadPart >= Timer->DueTime.QuadPart)
            {
                /* It did, so we don't need to wait */
                goto NoWait;
            }

            /* It didn't, so activate it */
            Timer->Header.Inserted = TRUE;

            /* Handle Kernel Queues */
            if (Thread->Queue) KiActivateWaiterQueue(Thread->Queue);

            /* Setup the wait information */
            Thread->State = Waiting;

            /* Add the thread to the wait list */
            KiAddThreadToWaitList(Thread, Swappable);

            /* Insert the timer and swap the thread */
            ASSERT(Thread->WaitIrql <= DISPATCH_LEVEL);
            KiSetThreadSwapBusy(Thread);
            KxInsertTimer(Timer, Hand);
            WaitStatus = (NTSTATUS)KiSwapThread(Thread, KeGetCurrentPrcb());

            /* Check if were swapped ok */
            if (WaitStatus != STATUS_KERNEL_APC)
            {
                /* This is a good thing */
                if (WaitStatus == STATUS_TIMEOUT) WaitStatus = STATUS_SUCCESS;

                /* Return Status */
                return WaitStatus;
            }

            /* Recalculate due times */
            Interval = KiRecalculateDueTime(OriginalDueTime,
                                            &DueTime,
                                            &NewDueTime);
        }

WaitStart:
        /* Setup a new wait */
        Thread->WaitIrql = KeRaiseIrqlToSynchLevel();
        KxDelayThreadWait();
        KiAcquireDispatcherLockAtDpcLevel();
    }

    /* We're done! */
    KiReleaseDispatcherLock(Thread->WaitIrql);
    return WaitStatus;

NoWait:
    /* There was nothing to wait for. Did we have a wait interval? */
    if (!Interval->QuadPart)
    {
        /* Unlock the dispatcher and do a yield */
        KiReleaseDispatcherLock(Thread->WaitIrql);
        return NtYieldExecution();
    }

    /* Unlock the dispatcher and adjust the quantum for a no-wait */
    KiReleaseDispatcherLockFromDpcLevel();
    KiAdjustQuantumThread(Thread);
    return STATUS_SUCCESS;
}

// Note that the Windows API Sleep(0) will also call NtYieldExecution(), refer to
// the function Ntoskrnl.KeDelayExecutionThread above 
```

*   .NET Sleep(1)、Sleep(0)、Yield() 和 empty 语句的超时：

```
for (; ; )
{
    Stopwatch sw = Stopwatch.StartNew();
    // Thread.Sleep(1); // between 36000 and 39000
    // Thread.Sleep(0); // 2 or 3
    Thread.Yield(); // 1 or 2
    // empty statement // always 0
    Console.WriteLine(sw.ElapsedTicks);
    sw.Restart();
} 
```

*   秒表依赖于 WinAPI 函数 QueryPerformanceCounter 和 QueryPerformanceFrequency：

```
static Stopwatch() {
    bool succeeded = SafeNativeMethods.QueryPerformanceFrequency(out Frequency); 
    if(!succeeded) {
        IsHighResolution = false;
        Frequency = TicksPerSecond;
        tickFrequency = 1; 
    }
    else {
        IsHighResolution = true; 
        tickFrequency = TicksPerSecond;
        tickFrequency /= Frequency; 
    }
}

public static long GetTimestamp() {
    if(IsHighResolution) {
        long timestamp = 0;
        SafeNativeMethods.QueryPerformanceCounter(out timestamp);
        return timestamp;
    }
    else {
        return DateTime.UtcNow.Ticks; 
    }
} 
```

*   秒表是准确的，但 DateTime.UtcNow.Ticks 和 Environment.TickCount 都不准确：

```
// Stopwatch is extremely exact without Thread.Sleep, always 1000.00 ms
// But the combination of Stopwatch + Thread.Sleep(1000) is inexact
// Stopwatch is very exact with Thread.Sleep + a spin check, always 1000 ms
thread = new Thread(() =>
{
    var setText = new Action<long>(t => textBox1.Text
        = Math.Round(t * 1000.0 / Stopwatch.Frequency, 2).ToString());
    var sw = Stopwatch.StartNew();
    for (; ; )
    {
        // In most cases 986 is exact enough, but very rarely it might produce
        // a "1001", so use 985 here
        Thread.Sleep(985);
        while (sw.ElapsedTicks < Stopwatch.Frequency)
            // Use Sleep(0) instead of Yield() or empty statement
            Thread.Sleep(0);
        // The actual interval is always 1000 ms instead of 1014.01 ms
        // The Invoke method must be used since InvokeRequired is true
        Invoke(setText, sw.ElapsedTicks);
        sw.Restart();
    }
});
thread.Start();

// DateTime.UtcNow.Ticks and DateTime.Now.Ticks are both inexact with
// Thread.Sleep + a spin check, still 1014.01 ms
thread = new Thread(() =>
{
    var setText = new Action<long>(t => textBox1.Text
    = Math.Round((t - ticks) / 10000.0, 2).ToString());
    for (; ; )
    {
        Thread.Sleep(985);
        while (DateTime.UtcNow.Ticks < ticks + 10000000)
            Thread.Sleep(0);
        var t = DateTime.UtcNow.Ticks;
        Invoke(setText, t);
        ticks = t;
    }
});
thread.Start();

// Environment.TickCount is inexact with Thread.Sleep + a spin check,
// still 1014 ms (int value)
thread = new Thread(() =>
{
    var setText = new Action<int>(t => textBox1.Text
    = (t - msecs).ToString());
    for (; ; )
    {
        Thread.Sleep(985);
        while (Environment.TickCount < msecs + 1000)
            Thread.Sleep(0);
        var t = Environment.TickCount;
        Invoke(setText, t);
        msecs = t;
    }
});
thread.Start();

private void Form1_FormClosed(object sender, FormClosedEventArgs e)
{
    thread.Abort();
} 
```

参考：

ReactOS 的源代码

.NET 4.5 Update 1 的官方参考源

共享源 CLI 2.0（用于本机功能）

[SwitchToThread/Thread.Yield 与 Thread.Sleep(0) 与 Thead.Sleep(1)](https://stackoverflow.com/questions/1413630/switchtothread-thread-yield-vs-thread-sleep0-vs-thead-sleep1)

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:29:17.977

睡眠会导致操作系统在时间到之前不调度线程。请注意 schedule != 运行。

调度仅将线程添加到队列中，因此它最终会运行，但并不总是立即运行。例如，如果已经有一个线程在运行，你仍然需要等待它的时间片完成。如果队列中有更高优先级的线程，它们也可以在它之前运行。

你永远不应该指望 Sleep() 会持续你给它的时间——*至少*是那个时间。

计时器基本上以相同的方式运行，但在等待调度时不要阻塞线程。

此外，您应该使用`Environment.TickCount`or`Stopwatch`来测量经过的时间，而不是`DateTime`，这会受到系统时间更改的影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:29:39.427

你可以打电话[`timeBeginPeriod`](http://msdn.microsoft.com/en-gb/library/windows/desktop/dd757624%28v=vs.85%29.aspx)来收紧计时器的分辨率。这也影响`GetTickCount`.

请参阅[为什么通过 timeBeginPeriod 增加计时器分辨率会影响功耗？](https://stackoverflow.com/questions/7590475/why-does-increasing-timer-resolution-via-timebeginperiod-impact-power-consumptio)讨论为什么你可能不想这样做（当然不知道这是否会成为你的问题）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T18:35:58.433

为什么不使用秒表？这是非常精确的 [MSDN 秒表](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T18:45:48.863

如果您需要实时操作系统，则需要寻找 Windows 桌面操作系统以外的其他地方。

例如：[实时操作系统列表](http://en.wikipedia.org/wiki/List_of_real-time_operating_systems)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T18:28:04.570

您不应该依赖 Timer/Sleep 间隔进行时间敏感计算 - 它永远不会准确。您可以改用[Ticks](http://msdn.microsoft.com/en-us/library/system.datetime.ticks%28v=vs.71%29.aspx)或其他高精度技术。`Ticks`根据[这个答案](https://stackoverflow.com/a/8865560/897326)，Windows 7 上的分辨率为 1 毫秒。

另请参阅此处了解更多信息：[如何制作准确的十进制计时器？](https://stackoverflow.com/questions/11588337/how-to-make-an-accurate-decimal-timer)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-01T18:31:00.893

您的关键词是“多媒体计时器”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-01T19:50:39.307

Windows 操作系统根本不是为这些事情而设计的。这对于任何支持上下文切换的操作系统来说都是一个小缺点。如果您需要非常精确的计时，则需要使用嵌入式系统或旨在以这种方式运行的操作系统。

有一些方法肯定会提高你试图产生的任何行为的时间准确性，但它充其量是不可靠的。在一天结束时，操作系统可以自由地强制进行上下文切换，这可能会随时延迟您的计时器。

维基百科有更多关于这个主题的信息：[http ://en.wikipedia.org/wiki/Real-time_operating_system](http://en.wikipedia.org/wiki/Real-time_operating_system)

# javascript - JS split() 函数忽略出现在引号内的分隔符

> ID：13662346
> 
> 赞同：1
> 
> 时间：2012-12-01T18:24:15.923
> 
> 标签：javascript, split, quotes

基本上，就像你说

```
var string = 'he said "Hello World"';
var splitted = string.split(" "); 
```

拆分后的数组将是：

```
'he' 'said' '"Hello World"' 
```

基本上将引号部分视为单独的项目

那么我将如何在javascript中做到这一点？如果扫描仪在一组引号内，我是否必须有一个遍历字符串的 for 循环？或者有没有更简单的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T18:52:16.440

您可以使用正则表达式：

```
var splitted = string.match(/(".*?")|(\S+)/g); 
```

基本上，它首先搜索引号之间的任何字符（包括空格）的字符串，然后搜索字符串中的所有剩余单词。

例如

`var string = '"This is" not a string "without" "quotes in it"'; string.match(/(".*?")|(\S+)/g);`

将此返回到控制台：

```
[""This is"", "not", "a", "string", ""without"", ""quotes in it""] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:55:52.543

首先，我认为您的意思是：

```
var string = 'he said "Hello World"'; 
```

现在我们已经解决了这个问题，您对 for 循环的想法部分正确。这是我的做法：

```
// initialize the variables we'll use here
var string = 'he said "Hello World"', splitted = [], quotedString = "", insideQuotes = false;

string = string.split("");

// loop through string in reverse and remove everything inside of quotes
for(var i = string.length; i >= 0; i--) {
    // if this character is a quote, then we're inside a quoted section
    if(string[i] == '"') {
        insideQuotes = true;
    }

    // if we're inside quotes, add this character to the current quoted string and
    // remove it from the total string
    if(insideQuotes) {
        if(string[i] == '"' && quotedString.length > 0) {
            insideQuotes = false;
        }

        quotedString += string[i];
        string.splice(i, 1);
    }

    // if we've just exited a quoted section, add the quoted string to the array of
    // quoted strings and set it to empty again to search for more quoted sections
    if(!insideQuotes && quotedString.length > 0) {
        splitted.push(quotedString.split("").reverse().join(""));
        quotedString = "";
    }
}

// rejoin the string and split the remaining string (everything not in quotes) on spaces
string = string.join("");
var remainingSplit = string.split(" ");

// get rid of excess spaces
for(var i = 0; i<remainingSplit.length; i++) {
    if(remainingSplit[i].length == " ") {
        remainingSplit.splice(i, 1);
    }
}

// finally, log our splitted string with everything inside quotes _not_ split
splitted = remainingSplit.concat(splitted);
console.log(splitted);​ 
```

我确信有更有效的方法，但这会产生与您指定的完全一样的输出。[这](http://jsfiddle.net/6nrgc/2/)是 jsFiddle 中此工作版本的链接。

# google-app-engine - 根实体中的 GAE 事务

> ID：13662348
> 
> 赞同：2
> 
> 时间：2012-12-01T18:24:20.863
> 
> 标签：google-app-engine, transactions, google-cloud-datastore

我是 GAE 的新手，我对与 DataStore 的事务有一些疑问。

例如，我有一个用户实体，它是在用户在 Facebook 上添加我的应用程序时创建的。我通过 Facebook API 获得了一些属性，但我想为用户添加一个用户名，并且它必须是唯一的。所以在事务范围内我调用这个方法：

```
def ExistsUsernameToDiferentUser(self, user, username):
    query = User.all()
    query.filter("username", username)
    query.filter("idFacebook != ", user.idFacebook)
    userReturned = query.get()
    return True if userReturned else False 
```

但是 GAE 给了我这个错误：

> BadRequestError：事务内部的查询必须有祖先

好的，我明白了，但是用户没有任何祖先，它是一个根实体。我需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T16:42:19.873

我明白你现在想做什么。

通过强制使用祖先，数据存储会强制您锁定数据存储的一部分（给定祖先下的所有内容），以便您可以保证该部分的一致性。但是，要为所欲为，您本质上需要锁定所有 User 实体以查询某个是否存在，然后创建一个新实体，然后将它们解锁。

你可以这样做，只需创建一个实体，它可以是一个空实体，但要确保它有一个唯一的键（如“user-ancestor”），保存它，并使其成为每个用户实体的祖先。这可能是一个坏主意，因为这会限制您在用户实体上的性能，尤其是在写入方面。每次创建新用户时，都会阻止更新所有用户实体。

我试图说明你需要如何在 HRD 世界中以不同的方式思考交易。由您来构建数据（使用祖先），以便为您的特定应用程序获得良好的性能特征。事实上，您可能不同意我的观点，并说用户实体的更新频率非常低，因此可以将它们全部锁定。

出于说明目的，另一种短视的可能性是根据用户名创建多个祖先。即，每个字母对应一个。然后当你需要创建一个新用户时，你可以根据合适的祖先进行搜索。虽然这是对单一祖先的改进（它好 26 倍），但它仍然限制了你未来的表现。如果您现在知道最终将拥有的用户总数，这可能没问题，但我怀疑您想要数亿用户。

最好的方法是返回到其他建议并将用户名作为密钥。这可以让您获得最佳的可伸缩性，因为通过密钥获取/设置用户实体可以是事务性的，并且不会锁定其他实体，从而限制了您的可伸缩性。

您需要找到一种方法来解决此问题。例如，您在用户名之前获得的任何信息都可以存储在另一个实体中，该实体具有稍后创建的用户的相关字段。或者您可以在通过密钥创建用户实体后将该数据复制到用户实体中，然后删除原始实体。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:57:10.303

如果用户名是唯一的，为什么不将其设为密钥？

```
class User(db.Model):
    @property
    def username(self):
        return self.key().name()
    ....

User.get_or_insert(username,field1=value1,....) 
```

注意：如果使用 get_or_insert，则不需要事务

# perl - 使用 perl 构建关键字树

> ID：13662352
> 
> 赞同：5
> 
> 时间：2012-12-01T18:24:40.963
> 
> 标签：perl, tree, keyword

我想使用 perl 编程构造一个关键字树。这是示例，关键字“Apple，Apropos，Banana，Bandana，Orange”的关键字树看起来像这样。

![在此处输入图像描述](../Images/ff6e77deae114dcf99c46b81f94843df.png)

这是我第一次使用 perl 在树上工作。此外，当我在 perl 中搜索关键字树时，我找不到足够的信息。我不期待完整的代码。只需说出执行任务的起点即可。这对我有很大帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T18:43:22.290

这种数据结构通常被称为 trie，寻找它会产生[`Tree::Trie`](http://search.cpan.org/perldoc?Tree::Trie). 如果您正在寻找实现自己的想法的想法，也许可以查看源代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:44:32.557

您可以对这个问题使用哈希引用，如下所示：

```
use strict;
use Data::Dumper;

my $tree = { 
    root => {
        a => { 
            p => { 
                p => 'etc' , 
                r => 'etc'
            }, 
        },
        b => { 
            a => 'etc' 
        },
        o => { 
            r => 'etc' 
        },
    },
};

print Dumper($tree); 
```

或一些 CPAN 模块：[http ://search.cpan.org/search?mode=all&query=tree](http://search.cpan.org/search?mode=all&query=tree)

# asp.net-mvc - 在 OData URI 中使用过滤器时出现错误 500

> ID：13662353
> 
> 赞同：0
> 
> 时间：2012-12-01T18:24:49.267
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, odata

当我使用简单的 API 时：`/api/dashboard` 效果很好！

**但是，我添加的任何过滤器都会返回以下错误！**

## API URI

`/api/dashboard?$filter=(ProximoAtendimento%20gt%20datetime'2012-11-30'%20and%20ProximoAtendimento%20lt%20datetime'2012-12-02')`

## 错误

```
{
    "Message": "An error has occurred.",
    "ExceptionMessage": "Method not found: 'Microsoft.Data.OData.Query.SemanticAst.ParameterQueryNode Microsoft.Data.OData.Query.SemanticAst.FilterQueryNode.get_Parameter()'.",
    "ExceptionType": "System.MissingMethodException",
    "StackTrace": "   at System.Web.Http.OData.Query.Expressions.FilterBinder.BindFilterQueryNode(FilterQueryNode filterNode)\r\n   at System.Web.Http.OData.Query.Expressions.FilterBinder.Bind(FilterQueryNode filterNode, Type filterType, IEdmModel model, IAssembliesResolver assembliesResolver, ODataQuerySettings querySettings)\r\n   at System.Web.Http.OData.Query.FilterQueryOption.ApplyTo(IQueryable query, ODataQuerySettings querySettings, IAssembliesResolver assembliesResolver)\r\n   at System.Web.Http.OData.Query.ODataQueryOptions.ApplyTo(IQueryable query, ODataQuerySettings querySettings)\r\n   at System.Web.Http.QueryableAttribute.ExecuteQuery(IEnumerable query, HttpRequestMessage request, HttpConfiguration configuration, HttpActionDescriptor actionDescriptor)\r\n   at System.Web.Http.QueryableAttribute.OnActionExecuted(HttpActionExecutedContext actionExecutedContext)\r\n   at System.Web.Http.Filters.ActionFilterAttribute.CallOnActionExecuted(HttpActionContext actionContext, HttpResponseMessage response, Exception exception)\r\n   at System.Web.Http.Filters.ActionFilterAttribute.<>c__DisplayClass2.<System.Web.Http.Filters.IActionFilter.ExecuteActionFilterAsync>b__0(HttpResponseMessage response)\r\n   at System.Threading.Tasks.TaskHelpersExtensions.<>c__DisplayClass41`2.<Then>b__40(Task`1 t)\r\n   at System.Threading.Tasks.TaskHelpersExtensions.ThenImpl[TTask,TOuterResult](TTask task, Func`2 continuation, CancellationToken cancellationToken, Boolean runSynchronously)"
} 
```

**API 控制器**

```
[Queryable]
public IQueryable<Pessoa> get()
{
    return _repository.Query<Pessoa>();
} 
```

**包版本**

1.  Microsoft.AspNet.WebApi.OData -> *0.2.0-alpha*
2.  Microsoft.Data.Edm -> *5.1.0*
3.  Microsoft.Data.OData -> *5.1.0*
4.  Microsoft.Data.OData.Contrib -> *5.1.0.51119*
5.  System.Spatial -> *5.1.0*
6.  Microsoft.AspNet.WebApi -> *4.0.20710.0*
7.  Microsoft.AspNet.WebApi.Client -> *4.1.0-alpha-120809*
8.  Microsoft.AspNet.WebApi.Core -> *4.0.20710.0*
9.  Microsoft.AspNet.WebApi.OData -> *0.2.0-alpha*
10.  Microsoft.AspNet.WebApi.Web...-> *4.0.20710.0*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T03:18:34.150

MissingMethodExceptions 通常是由不匹配的程序集版本引起的。在您的情况下，您似乎应该使用这个 NuGet 包：

5.1.0.51016-rc2 用于 Microsoft.Data.OData.Contrib 而不是 5.1.0.51119。

请参阅：[http ://www.nuget.org/packages/microsoft.aspnet.webapi.odata](http://www.nuget.org/packages/microsoft.aspnet.webapi.odata)

# ruby-on-rails - 调用外部安全应用程序方法

> ID：13662354
> 
> 赞同：0
> 
> 时间：2012-12-01T18:24:52.227
> 
> 标签：ruby-on-rails, ruby, apache, httpd.conf

我有一个带有 apache、passenger 和 kerberos 保护的 rails 应用程序。

其中一个控制器 (UsersController) 提供了一项必须在外部可用的操作（以 json 响应）。

当我尝试访问它（$ curl ...）时，服务器返回 Kerberos 身份验证错误。

在这种情况下我该怎么办。将 httpd.conf 配置为对一个特定文件“允许任何”，将外部可用的方法隔离在一个文件中，还是更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T18:44:13.613

我解决了它在 apache httpd.conf 中配置特定目录

```
<Location "/users/user_action.json*">
    Order allow,deny
    Allow from all
    satisfy any
</Location> 
```

谢谢

# c - 在C中删除链表中的第一个节点

> ID：13662361
> 
> 赞同：3
> 
> 时间：2012-12-01T18:25:12.070
> 
> 标签：c, linked-list

我知道这被回答了很多次，但我就是不知道出了什么问题。

我有一个结构

```
typedef struct zaznam{
   char kategoria[53];
   char znacka[53];
   char predajca[103];
   double cena;
   int rok;
   char stav[203];
   struct zaznam *next;
   }ZAZNAM; 
```

我想以这种方式删除第一个节点。

```
for(prev = act = prvy; act!=NULL; prev=act, act=act->next){
    if((strstr(act->znacka,vyber)!=NULL)){

    if(act->znacka==prvy->znacka){ 
    //if "znacka" of the actual node is equal to the first

        prev=prvy->next; //in "previous" is pointer to the second node
        free((void *)act); //free first node
        prvy=prev; //first node = previous 
    }
    else{ //this works
        prev->next=act->next;
        free((void *)act);
        act=prev;
    } 
```

它适用于一切，但不适用于第一个节点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:00:33.977

好吧，你一开始就违反了你自己的不变量`prev->next == act`：`for (prev = act = prvy;...` 第二，这`act->znacka==prvy->znacka`应该是`act==prvy`找出你是否在链的开头，否则它会混淆人们。

我可能会尝试`act==prev`通过添加`act=prev;`第一种情况来重新建立你开始（但错误的）不变量（即）。也许它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:34:38.510

在我看来，当您继续进行-loop的下一次迭代时，您删除了未正确分配`prev`指向下一个节点的第一个节点。`for`例如，在您`if`检查您是否在第一个节点的第一个语句中，您执行以下操作：

```
prev=prvy->next; //in "previous" is pointer to the second node
free((void *)act); //free first node
prvy=prev; //first node = previous 
```

这确实释放了第一个节点，但是，立即在您的`for`-loop 中分配`act`给`prev`这里：

```
for(prev = act = prvy; act!=NULL; prev=act, act=act->next) 
```

由于释放内存实际上并不会擦除内存的内容，因此您可以继续处理列表的其余部分，就好像第一个节点没有被释放一样。实际上使用像这样的释放指针是未定义的行为，所以任何事情都可能发生（即你可能会崩溃，等等......在这种情况下看起来你不是）。

尝试将您的代码更改为以下内容：

```
for(prev = act = prvy; act!=NULL;)
{
    if((strstr(act->znacka,vyber)!=NULL))
    {
        if(act==prvy)
        { 
            //we're at the first node
            ZAZNAM* temp=act->next; 
            free((void *)act); //free first node
            prev=act=prvy=temp; //re-establish starting condition
        }
        else
        {   
            prev->next=act->next;
            free((void *)act);
            act=prev->next;
        }
    }
    else
    {
        //iterate here because if you delete the first node, you don't want
        //to start iterating like would happen if you kept iteration in the
        //for-loop declaration
        prev=act;
        act=act->next;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-24T22:12:11.913

为什么你有一个循环。删除列表中的第一个条目只是一个问题

```
tmp = head->next
delete head
head = tmp 
```

# ruby-on-rails - “销毁”操作未找到查询的资源

> ID：13662362
> 
> 赞同：0
> 
> 时间：2012-12-01T18:25:18.097
> 
> 标签：ruby-on-rails, mongodb, mongoid, nested-attributes

在使用嵌套资源的基础知识方面遇到问题。

我有用户（基于设计），他们有很多电子邮件任务。但是，在尝试销毁电子邮件任务时，我收到“未找到文档错误”。手动检查数据库，确实有这个用户id的用户，他有一个这个id的emailtask。

路线：

```
 authenticated :user do
      root :to => 'users#index'
      resources :emailtasks
    end

    devise_scope :user do
      root :to => "devise/registrations#new"
      match '/user/confirmation' => 'confirmations#update', :via => :put, :as => :update_user_confirmation
      resources :emailtasks
    end

    devise_for :users, :controllers => { :registrations => "registrations", :confirmations => "confirmations" }
    resources :users do
      get 'invite', :on => :member
      resources :emailtasks
    end 
```

（我在每种类型的用户下都嵌套了“emailtasks”——如果这有问题，欢迎学习）

电子邮件任务控制器。索引工作正常，破坏没有。

```
 def index 
    @user = current_user
    @emailtasks = @user.emailtasks.all
  end

  def destroy
    @user = current_user
    emailtask = Emailtask.find(params[:id])
    @user.emailtask.destroy

    respond_to do |format|
      format.html { redirect_to emailtask_url }
      format.json { head :no_content }
    end
  end 
```

索引视图：

```
 - @emailtasks.each do |emailtask|
    %tr      
      %td= link_to("Delete emailtask", emailtask_path(emailtask), :data => { :confirm => "Are you sure?" }, :method => :delete, :class => 'btn btn-mini') 
```

单击销毁后，出现以下错误：

```
 Started DELETE "/users/50b44012d4aadb1ea4000005/emailtasks/50b55057d4aadbaeaf000003" for 127.0.0.1 at 2012-12-01 13:14:45 -0500
    Processing by EmailtasksController#destroy as HTML
      Parameters: {"authenticity_token"=>"znRrduerykwNAh9MrBT/oRZgtSuPzznSsmuGgZm7EDE=", "user_id"=>"50b44012d4aadb1ea4000005", "id"=>"50b55057d4aadbaeaf000003"}
      MOPED: 127.0.0.1:27017 COMMAND      database=admin command={:ismaster=>1} (0.8771ms)
      MOPED: 127.0.0.1:27017 QUERY        database=addtocal_development collection=users selector={"$query"=>{"_id"=>"50b44012d4aadb1ea4000005"}, "$orderby"=>{:_id=>1}} flags=[:slave_ok] limit=-1 skip=0 fields=nil (0.8090ms)
      MOPED: 127.0.0.1:27017 QUERY        database=addtocal_development collection=emailtasks selector={"_id"=>"50b55057d4aadbaeaf000003"} flags=[:slave_ok] limit=0 skip=0 fields=nil (0.3309ms)
    Completed 500 Internal Server Error in 6ms

    Mongoid::Errors::DocumentNotFound (
    Problem:
      Document(s) not found for class Emailtask with id(s) 50b55057d4aadbaeaf000003.
    Summary:
      When calling Emailtask.find with an id or array of ids, each parameter must match a document in the database or this error will be raised. The search was for the id(s): 50b55057d4aadbaeaf000003 ... (1 total) and the following ids were not found: 50b55057d4aadbaeaf000003.
    Resolution:
      Search for an id that is in the database or set the Mongoid.raise_not_found_error configuration option to false, which will cause a nil to be returned instead of raising this error when searching for a single id, or only the matched documents when searching for multiples.): 
```

用户型号：

```
 class User
      include Mongoid::Document
      extend Rolify
      rolify
      include Mongoid::Timestamps

      # Include default devise modules. Others available are:
      # :token_authenticatable, :confirmable,
      # :lockable, :timeoutable and :omniauthable
      devise :invitable, :database_authenticatable, :registerable, :confirmable,
             :recoverable, :rememberable, :trackable, :validatable

      ## Database authenticatable
      field :email,              :type => String, :default => ""
      field :encrypted_password, :type => String, :default => ""

      embeds_many :emailtasks
      accepts_nested_attributes_for :emailtasks
      validates_presence_of :email
      ... 
```

电子邮件任务模型：

```
 class Emailtask
        include Mongoid::Document
        include Mongoid::Timestamps # adds automagic fields created_at, updated_at
        ...
        embedded_in :user 
```

想法？谢谢！

更新：这是来自本地 mongodb 的记录：

```
 { "_id" : ObjectId( "50b44012d4aadb1ea4000005" ),
      "confirmed_at" : Date( 1353990162412 ),
      "created_at" : Date( 1353990162412 ),
      "current_sign_in_at" : Date( 1354143479625 ),
      "current_sign_in_ip" : "127.0.0.1",
      "email" : "theiteg@gmail.com",
      "emailtasks" : [ 
        { "_id" : ObjectId( "50b522f2d4aadbaeaf000001" ),
          "content" : null,
          "name" : null,
          "actuallyfrom" : null,
          "updated_at" : Date( 1354048241990 ),
          "created_at" : Date( 1354048241990 ) }, 
        { "_id" : ObjectId( "50b54fc9d4aadbaeaf000002" ),
          "content" : null,
          "name" : null,
          "actuallyfrom" : null,
          "updated_at" : Date( 1354059721425 ),
          "created_at" : Date( 1354059721425 ) }, 
        { "_id" : ObjectId( "50b55057d4aadbaeaf000003" ),
          "content" : null,
          "name" : null,
          "actuallyfrom" : null,
          "updated_at" : Date( 1354059863314 ),
          "created_at" : Date( 1354059863314 ) }, 
```

此外 - 通过 localhost rails 应用程序查看时，手动编辑此本地数据库（更改值、添加/销毁记录等）会创建预期的更改。

完整的 mongoid.yml：

```
 production:
      sessions:
        default:
          uri: <%= ENV['MONGOHQ_URL'] %>

    development:
      # Configure available database sessions. (required)
      sessions:
        # Defines the default session. (required)
        default:
          # Defines the name of the default database that Mongoid can connect to.
          # (required).
          database: addtocal_development
          # Provides the hosts the default session can connect to. Must be an array
          # of host:port pairs. (required)
          hosts:
            - localhost:27017
          options:
            # Change whether the session persists in safe mode by default.
            # (default: false)
            # safe: false

            # Change the default consistency model to :eventual or :strong.
            # :eventual will send reads to secondaries, :strong sends everything
            # to master. (default: :eventual)
            # consistency: :eventual

            # How many times Moped should attempt to retry an operation after
            # failure. (default: 30)
            # max_retries: 30

            # The time in seconds that Moped should wait before retrying an
            # operation on failure. (default: 1)
            # retry_interval: 1
      # Configure Mongoid specific options. (optional)
      options:
        # Configuration for whether or not to allow access to fields that do
        # not have a field definition on the model. (default: true)
        # allow_dynamic_fields: true

        # Enable the identity map, needed for eager loading. (default: false)
        # identity_map_enabled: false

        # Includes the root model name in json serialization. (default: false)
        # include_root_in_json: false

        # Include the _type field in serializaion. (default: false)
        # include_type_for_serialization: false

        # Preload all models in development, needed when models use
        # inheritance. (default: false)
        # preload_models: false

        # Protect id and type from mass assignment. (default: true)
        # protect_sensitive_fields: true

        # Raise an error when performing a #find and the document is not found.
        # (default: true)
        # raise_not_found_error: true

        # Raise an error when defining a scope with the same name as an
        # existing method. (default: false)
        # scope_overwrite_exception: false

        # Skip the database version check, used when connecting to a db without
        # admin access. (default: false)
        # skip_version_check: false

        # User Active Support's time zone in conversions. (default: true)
        # use_activesupport_time_zone: true

        # Ensure all times are UTC in the app side. (default: false)
        # use_utc: false
    production:
      sessions:
        default:
          database: addtocal
          username: <%= ENV['MONGO_UN'] %>
          password: <%= ENV['MONGO_PW'] %>
          hosts:
            - alex.mongohq.com:10071
          options:
            skip_version_check: true
            safe: true

    test:
      sessions:
        default:
          database: addtocal_test
          hosts:
            - localhost:27017
          options:
            consistency: :strong
            # In the test environment we lower the retries and retry interval to
            # low amounts for fast failures.
            max_retries: 1
            retry_interval: 0 
```

# google-maps - 如何在可拖动的方向上切换 AvoidHighways/avoidTolls Google maps API v3？

> ID：13662366
> 
> 赞同：0
> 
> 时间：2012-12-01T18:25:40.017
> 
> 标签：google-maps, google-maps-api-3, draggable, directions

我根据谷歌手册做了可拖动的方向：

```
ren = new google.maps.DirectionsRenderer( {'draggable':true} );
ser = new google.maps.DirectionsService();

google.maps.event.addListener(ren, 'directions_changed', function() {
   // here I can load map, etc... everything works.
}); 
```

但是，如果我想在下次拖动之前更改路线选项，我该怎么办。我想准确地将 AvoidHighways 和 AvoidTolls 切换为真/假。有没有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:32:23.850

这两个属性都是方向请求的选项，因此您必须使用所需的选项再次请求路线（基于当前的起点/目的地）。

# c++ - WinApi - 创建文件 invalid_handle_value

> ID：13662370
> 
> 赞同：-1
> 
> 时间：2012-12-01T18:26:27.753
> 
> 标签：c++, winapi

嗨，我的代码如下：

```
LPSTR Bufor;
DWORD dwRozmiar, dwPrzeczyt;
HANDLE hPlik;

LRESULT CALLBACK WndProc (HWND hwnd, UINT msg,WPARAM wParam, LPARAM lParam)
{

hPlik = CreateFile( "test.txt", GENERIC_READ, 0, NULL, OPEN_EXISTING, 0, NULL );
if( hPlik == INVALID_HANDLE_VALUE ) {
    MessageBox( NULL, "Cant open a file", "Error1!", MB_ICONEXCLAMATION );
    PostQuitMessage( 0 );
}

Bufor[ dwRozmiar ] = 0;
SetWindowText( hwnd, Bufor ); 

} 
```

我得到了invalid_handle_value？为什么？程序显示第一个消息框：无法打开文件。

当我调用`GetLastError`时，返回值 32。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T21:29:04.213

Windows 错误代码 32 是[`ERROR_SHARING_VIOLATION`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms681382.aspx). 这意味着该文件已被其他实体使用拒绝您的进程访问的共享模式打开。

该其他实体似乎是您自己的程序。您打开文件，然后无法关闭它。

你的window proc也完全坏了。是时候退后一步并掌握基础知识了。

# apache - 使用 http:// 将非 www 重定向到 www 在 webkit 中不起作用

> ID：13662374
> 
> 赞同：1
> 
> 时间：2012-12-01T18:26:55.820
> 
> 标签：apache, .htaccess, mod-rewrite

（我的网站上有一个重定向，将非 www 和非 https 用户重定向到[https://www.frostriver.com](https://www.frostriver.com) 但是，在 chrome 和 safari 中，当有人输入[http://frostriver.com](http://frostriver.com)（包括 ' http://' 在 url 字段中）他们得到一个页面找不到错误。

以下是一些示例：frostriver.com - 重定向， [http](http://frostriver.com) ://frostriver.com -错误 ， [https](https://frostriver.com) ://frostriver.com - 错误， [http](http://www.frostriver.com) ://www.frostriver.com - 重定向， [https://www.frostriver .com](https://www.frostriver.com) - 有效。

这是我的 htaccess 文件：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase /
RewriteCond %{SERVER_PORT} 80 
RewriteRule ^(.*)$ https://www.frostriver.com/$1 [R,L] 
```

谢谢！特洛伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:24:49.333

该域`frostriver.com`没有与之关联的 DNS 条目。所以`frostriver.com`没有指向您的服务器，因此用户永远不会被重定向，而是会收到一条错误消息。

但是，如果您`frostriver.com`在没有 . 的情况下输入 chrome `http://`，谷歌将检查域是否指向服务器。如果不是，它将进行谷歌搜索`frostriver.com`并重定向到第一个搜索结果，即`www.frostriver.com/`

PS。我在 Firefox 中遇到同样的错误，所以我在这里看不到 webkit 连接

聚苯乙烯。我在您的 htaccess 中看不到任何将非 www 重定向到 www 的代码。

# android - android FLAG_SHOW_WHEN_LOCKED 不起作用

> ID：13662376
> 
> 赞同：1
> 
> 时间：2012-12-01T18:27:01.467
> 
> 标签：android

我试图让我的应用程序通过锁定屏幕来获取用户的一些输入，但无法
这样做。

我在 onCreate 和 onAttachToWindow 回调中尝试了以下几行，但似乎没有任何效果

```
Window window = getWindow();
window.addFlags(WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED); 
```

我检查了有关 stackoverflow 的大多数问题，它们都指向上述解决方案。

我们需要使用任何许可还是我遗漏了什么。我正在研究一个根深蒂固的星系 S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T11:29:01.003

请注意，您的活动不应是对话框。我在清单中定义：

```
<activity
    android:name="TestDialog"
    android:theme="@android:style/Theme.Dialog" >
</activity> 
```

在我删除主题后，它可以工作并且活动显示在任何锁定屏幕上。也许你可以在 style 的帮助下模拟一个对话框`@android:style/Theme.Translucent`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T06:34:10.667

这个问题的答案是

[Android 的浮动窗口加上 FLAG_SHOW_WHEN_LOCKED 失败](https://stackoverflow.com/questions/13410972/androids-floating-windows-coupled-with-flag-show-when-locked-fails/13666996#13666996)

不能与 FLAG_SHOW_WHEN_LOCKED 一起使用浮动窗口

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-13T09:43:26.800

我遇到了同样的问题，解决方案是删除`setType`您活动中的行。（如果你已经添加了）

```
@Override
public void onAttachedToWindow() {
    super.onAttachedToWindow();
    //getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-12T19:26:10.593

我有同样的问题，我可以确认问题是对话主题。似乎属性**android:windowIsFloating**负责在锁定屏幕顶部不显示对话框。该属性`true`在 Holo 对话框主题中设置为。

但是，如果您将 Holo 对话框主题派生为自己的样式，如下所示：

```
<style name="ReminderAlarmDialog" parent="@android:style/Theme.Holo.Dialog">
    <item name="android:windowIsFloating">false</item>
</style> 
```

对话活动将显示在锁定屏幕的顶部。唯一的问题：对话框将填满整个屏幕，因此看起来不太好。所以这不是一个真正的解决方案，只是一个解释为什么对话主题不起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-02T05:46:13.987

下面建议的答案也不起作用......现在留给我的唯一选择是在清单中添加禁用 keygaurd 的权限并使用

```
KeyguardManager  myKeyGuard = (KeyguardManager)getSystemService(Context.KEYGUARD_SERVICE); myLock = myKeyGuard.newKeyguardLock(); myLock.disableKeyguard(); 
```

我不想添加新权限，因为这会使我的应用程序手动更新而不是自动更新。:(

# class - Objective matlab - 用它的一个函数返回多个类属性

> ID：13662377
> 
> 赞同：0
> 
> 时间：2012-12-01T18:27:04.023
> 
> 标签：class, matlab

我正在尝试使用其单一功能返回该类的多个属性：

```
classdef myClass

    properties
        a
        b
        c
    end

    methods

        % ...

        function P = returnABC(obj)
            P = [obj.a obj.b obj.c];
        end

    end 
```

我知道这不正确，但它代表了我正在努力实现的目标。我可以请你帮我解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:14:49.167

您可以像使用普通函数一样执行此操作：

```
classdef myClass

    properties
        a
        b
        c
    end

    methods

        % ...

        function [a, b, c] = returnABC(obj)
            a = obj.a;
            b = obj.b;
            c = obj.c;
        end

    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-28T11:15:36.983

根据每个属性的类型，它们可能无法连接。最好使用一个单元格作为输出。

```
function [c]=getall(obj)
    p=properties(obj);      
    for i=1:length(p),
        c{i}=get(obj,p{i});
    end
end 
```

注意属性方法的使用，使其通用：如果您更改/重命名属性，则无需更新此方法！

# windows-8 - Windows 8 Metro 风格应用程序和 Windows 8 商店应用程序有什么区别？

> ID：13662383
> 
> 赞同：0
> 
> 时间：2012-12-01T18:28:50.253
> 
> 标签：windows-8, visual-studio-2012

在 Windows 8 消费者预览版中，我使用了 Visual Studio 2011，它有 Windows Metro 风格的应用程序选项。在 Windows 8 Pro 中，我使用的是 vs 2012，它有 Windows 商店应用程序选项，在 vs2012 中没有 Windows 8 Metro 选项。 Windows Metro 和商店应用程序是一回事吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:29:56.410

他们确实是一样的。“Windows 应用商店应用程序”是最终名称。据推测，更名是出于法律原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T19:29:07.477

Windows 应用商店应用程序曾经被称为 Metro 风格应用程序，但后来微软与欧洲的一个合作伙伴遇到了一些问题，不得不想出一个新名称。现在它们被称为 Windows 应用商店应用程序。

# ios - Xcode 控制台中我的应用名称旁边括号中的数字是什么意思？

> ID：13662384
> 
> 赞同：4
> 
> 时间：2012-12-01T18:28:51.047
> 
> 标签：ios, xcode

括号里的数字是什么意思？

```
2012-12-01 10:14:25.769 MyApp[3714:907] -[MyAppDelegate applicationDidEnterBackground:]
2012-12-01 10:14:46.058 MyApp[3714:490b] *** -[UIProgressView respondsToSelector:]: message sent to deallocated instance 0x2084a050 
```

`3714`和`907`。_ 一个是进程ID吗？另一个是什么？我试图弄清楚为什么所有消息都以结尾，`907`直到最后一行以`490b`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T18:57:30.230

`3714`是 Unix 进程 ID：返回的值，`getpid()`格式为`%d`.

`907`or`490b`是一个线程 ID：返回的值，`pthread_mach_thread_np(pthread_self())`格式为`%x`。

# c# - ASP.NET - 两个页面之间的数据传输

> ID：13662386
> 
> 赞同：-1
> 
> 时间：2012-12-01T18:28:59.143
> 
> 标签：c#, asp.net

我需要在按下按钮时将数据从 page2 上的控件传输到 page1 上的 GridView 控件。（不使用数据库）

我尝试使用 DataTable 存储数据并将它们排列成列/行。

但是当我单击按钮时，我得到一个异常消息：“对象引用未设置为对象的实例。” 在第 58 行。 --> DataRow dr = dt.NewRow();

**第2页c#代码：**

```
public partial class WebForm1 : System.Web.UI.Page
{
    //Lastnosti
    public string IDizposoje
    {
        get { return TextBox3.Text; }
    }

    public string Ime
    {
        get { return TextBox1.Text; }
    }

    public string Priimek
    {
        get { return TextBox2.Text; }
    }

    public string DatumIzposoje
    {
        get { return Calendar1.SelectedDate.ToString(); }
    }

    public string DatumVrnitve
    {
        get { return Calendar2.SelectedDate.ToString(); }
    }

    public string VrstaAvtomobila
    {
        get { return ListBox1.SelectedItem.Text; }
    }

    //Koda, ki se izvrši ob zagonu
    protected void Page_Load(object sender, EventArgs e, DataTable dt)
    {         
    }

    //Ob kliku na gumb "Prekliči" zapremo stran
    protected void Button2_Click(object sender, EventArgs e)
    {
        //Response.Redirect("~/Default.aspx");
        this.ClientScript.RegisterClientScriptBlock(this.GetType(), "Close", "window.close()", true);
    }

    //Napolnimo tabelo s podatki
    public void NapolniTabelo(DataTable dt)
    {
        DataRow dr = dt.NewRow();

        dr["ID"] = TextBox3.Text;
        dr["Ime"] = TextBox1.Text;
        dr["Priimek"] = TextBox2.Text;
        dr["Datum izposoje"] = Calendar1.SelectedDate.ToString();
        dr["Datum vrnitve"] = Calendar2.SelectedDate.ToString();
        dr["Vrsta avtomobila"] = ListBox1.SelectedValue.ToString();

        dt.Rows.Add(dr);
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        NapolniTabelo((DataTable)Session["tabela"]);
        /*Session["ID"] = TextBox3.Text;
        Session["Ime"] = TextBox1.Text;
        Session["Priimek"] = TextBox2.Text;
        Session["Datum izposoje"] = Calendar1.SelectedDate.ToString();
        Session["Datum vrnitve"] = Calendar2.SelectedDate.ToString();
        Session["Vrsta avtomobila"] = ListBox1.SelectedValue.ToString();*/
        Response.Redirect("Default.aspx");
    }

    //Ponastavimo gradnike
    protected void Button3_Click(object sender, EventArgs e)
    {
        TextBox1.Text = "";
        TextBox2.Text = "";
        TextBox3.Text = "";
        Calendar1.SelectedDate = DateTime.Now;
        Calendar2.SelectedDate = DateTime.Now;
        ListBox1.SelectedIndex = 0;
    }
} 
```

**第1页c#代码：**

```
public partial class _Default : System.Web.UI.Page
{
    private DataTable UstvariTabelo()
    {
        DataTable dt = new DataTable();

        dt.Columns.Add(new DataColumn("ID", typeof(string)));
        dt.Columns.Add(new DataColumn("Ime", typeof(string)));
        dt.Columns.Add(new DataColumn("Priimek", typeof(string)));
        dt.Columns.Add(new DataColumn("Datum izposoje", typeof(string)));
        dt.Columns.Add(new DataColumn("Datum vrnitve", typeof(string)));
        dt.Columns.Add(new DataColumn("Vrsta vozila", typeof(string)));

        return dt;
    }

    protected void Page_Load(object sender, EventArgs e)
    {
        WebForm1 druga = new WebForm1();
        DataTable tabela = UstvariTabelo();

        druga.NapolniTabelo(tabela);

        this.GridView1.Visible = true;
        this.GridView1.DataSource = ((DataTable)Session["tabela"]);
        this.GridView1.DataBind();
    }
} 
```

我哪里做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:42:10.683

你得到错误，因为 Session["tabela"] 是空的。所以插入了这段代码：

```
(DataTable)Session["tabela"] 
```

始终使用安全属性：

```
public DataTable tabela
{

   get
   {
      if(HttpContext.Current.Session["tabela"] == null)
      {
           HttpContext.Current.Session["tabela"] = new DataTable ("tableName");
      }
      return HttpContext.Current.Session["tabela"] as DataTable;
   }
   set
   {
      HttpContext.Current.Session["tabela"] = value;
   }
} 
```

所以你永远不会得到空数据表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:33:28.807

```
DataRow dr = dt.NewRow(); 
```

它引发异常，因为数据表对象（dt）不在内存中，而您正在尝试访问它。为了将其保留在两个页面上，您可以使用会话变量。例如：

在第 1 页中：

```
DataTable dt =  UstvariTabelo(); //I think this method is returning data table in page 1
//load data into dt
Session["test"]  = dt; //save it into a session variable 
```

在第 2 页中，您可以检索保存的会话值

```
if(Session["test"]!=null)
{
  DataTable dt = (DataTable) Session["test"];
} 
```

同样在您的第 1 页代码中，您在第 2 页检索之前没有分配任何会话变量。

```
protected void Page_Load(object sender, EventArgs e)
    {
        WebForm1 druga = new WebForm1();
        DataTable tabela = UstvariTabelo();

        druga.NapolniTabelo(tabela);

        this.GridView1.Visible = true;
        Session["tabela"] = tabela;//<--------assign it to session
        this.GridView1.DataSource = tabela;
        this.GridView1.DataBind();
    } 
```

# python - 在 MongoDB 中更新字典的有效方法？

> ID：13662390
> 
> 赞同：2
> 
> 时间：2012-12-01T18:29:29.707
> 
> 标签：python, performance, pymongo

我有这个 MongoDb 模式：

```
tags:{
"image_uid":"",
"faces": [
    {
        "image_uid":"",
        "age_real":""
    }
]} 
```

女巫我用字典更新

```
feedbacks = [{
                 'face_uid': '02d42dee-3b66-11e2-b12e-e0cb4e12150c',
                 'age': 23
             },
             {
                 'face_uid': '02d42dee-3b66-11e2-b12e-e0cb4e12150d',
                 'age': 23
             }] 
```

这样：

```
 for feedback in feedbacks:
    tags.update(
        {'image_uid': image_uid, 'faces.face_uid': feedback['face_uid']},
        {"$set": {'faces.$.age_real': feedback['age']}}, w=1
    ) 
```

有没有更有效的方法来代替 for 循环？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T07:06:54.467

目前 MongoDB 不支持一次更新多个数组元素。但是，您可以选择使用[Update if Current](http://docs.mongodb.org/manual/tutorial/isolate-sequence-of-operations/)模式或类似的方式在本地更新您的文档，然后在数据库上替换它，而不是按顺序执行多个更新。

此外，查看原始[jira](https://jira.mongodb.org/browse/SERVER-1243)，您可以在评论中找到一些解决方法。

# .net - .NET 动态类属性

> ID：13662392
> 
> 赞同：1
> 
> 时间：2012-12-01T18:29:33.257
> 
> 标签：.net, asp.net-mvc, reflection

实际上，我尝试设计某种电子商店。我对从管理面板（运行时）创建多种产品感兴趣。

例如我有基本的产品类

```
public class Product
{ 
     public double Price {get;set;}
} 
```

我想创建一些具有 ScreenDiagonal 的电视类

```
public class TV : Product
{ 
     public int ScreenDiagonal {get;set;}
} 
```

但是我需要在运行时创建这样的类，并为其设置属性。这样做的最佳做法是什么？反思或其他一些想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:46:22.953

使用 CodeDom，像这样：

```
using System;
using System.Collections.Generic;
using System.Linq;
using Microsoft.CSharp;
using System.CodeDom.Compiler;
using System.CodeDom;

namespace Test
{
    class Program
    {
        static void Main(string[] args)
        {
            string className = "BlogPost";

            var props = new Dictionary<string, Type>() {
                { "Title", typeof(string) },
                { "Text", typeof(string) },
                { "Tags", typeof(string[]) }
            };

            createType(className, props);
        }

        static void createType(string name, IDictionary<string, Type> props)
        {
            var csc = new CSharpCodeProvider(new Dictionary<string, string>() { { "CompilerVersion", "v4.0" } });
            var parameters = new CompilerParameters(new[] { "mscorlib.dll", "System.Core.dll"}, "Test.Dynamic.dll", false);
            parameters.GenerateExecutable = false;

            var compileUnit = new CodeCompileUnit();
            var ns = new CodeNamespace("Test.Dynamic");
            compileUnit.Namespaces.Add(ns);
            ns.Imports.Add(new CodeNamespaceImport("System"));

            var classType = new CodeTypeDeclaration(name);
            classType.Attributes = MemberAttributes.Public;
            ns.Types.Add(classType);

            foreach (var prop in props)
            {
                var fieldName = "_" + prop.Key;
                var field = new CodeMemberField(prop.Value, fieldName);
                classType.Members.Add(field);

                var property = new CodeMemberProperty();
                property.Attributes = MemberAttributes.Public | MemberAttributes.Final;
                property.Type = new CodeTypeReference(prop.Value);
                property.Name = prop.Key;
                property.GetStatements.Add(new CodeMethodReturnStatement(new CodeFieldReferenceExpression(new CodeThisReferenceExpression(), fieldName)));
                property.SetStatements.Add(new CodeAssignStatement(new CodeFieldReferenceExpression(new CodeThisReferenceExpression(), fieldName), new CodePropertySetValueReferenceExpression()));
                classType.Members.Add(property);
            }

            var results = csc.CompileAssemblyFromDom(parameters,compileUnit);
            results.Errors.Cast<CompilerError>().ToList().ForEach(error => Console.WriteLine(error.ErrorText));
        }
    } 
```

它创建了一个包含此类的程序集“Test.Dynamic.dll”

```
namespace Test.Dynamic
{
    public class BlogPost
    {
        private string _Title;
        private string _Text;
        private string[] _Tags;

        public string Title
        {
            get
            {
                return this._Title;
            }
            set
            {
                this._Title = value;
            }
        }
        public string Text
        {
            get
            {
                return this._Text;
            }
            set
            {
                this._Text = value;
            }
        }
        public string[] Tags
        {
            get
            {
                return this._Tags;
            }
            set
            {
                this._Tags = value;
            }
        }
    }
} 
```

您还可以使用 C# 的动态功能

DynamicEntity 类，无需在运行时创建任何东西

```
public class DynamicEntity : DynamicObject
{
    private IDictionary<string, object> _values;

    public DynamicEntity(IDictionary<string, object> values)
    {
        _values = values;
    }
    public override bool TryGetMember(GetMemberBinder binder, out object result)
    {
        if (_values.ContainsKey(binder.Name))
        {
            result = _values[binder.Name];
            return true;
        }
        result = null;
        return false;
    }
} 
```

并像这样使用它

```
var values = new Dictionary<string, object>();
values.Add("Title", "Hello World!");
values.Add("Text", "My first post");
values.Add("Tags", new[] { "hello", "world" });

var post = new DynamicEntity(values);

dynamic dynPost = post;
var text = dynPost.Text; 
```

# android - Android getIntent().getExtras().getParcelable() 返回一个空对象

> ID：13662393
> 
> 赞同：1
> 
> 时间：2012-12-01T18:29:36.020
> 
> 标签：android, android-intent, android-fragmentactivity

我正在尝试将 Parcelable 对象从一个 FragmentActivity 发送到另一个。

发送活动：

```
Intent intent = new Intent(this, ActivityToSendTo.class);
intent.putExtra("key", objectToSend);
startActivity(intent); 
```

如果我在此时插入断点，我可以看到填充了“objectToSend”并且属性包含数据。

接收活动：

```
@Override
protected void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    if(savedInstanceState == null) {
        FragmentComments fragment = new FragmentComments();
        fragment.setArguments(getIntent().getExtras());
        getSupportFragmentManager().beginTransaction().add(android.R.id.content, fragment).commit();
    }
} 
```

如果我在 onCreate 方法中插入断点并尝试查看 objectToSend，我可以看到它存在，但该对象上的所有属性现在都为空。

有没有其他人经历过这个？我认为这可能是新支持库中的一个错误？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:43:03.907

我知道那`FragmentComments`是你想传给另一个的课程`Activity`。如果是这种情况，那么检索对象的代码应该或多或少像这样：

`Parcel parcel = (Parcel)getIntent().getParcelableExtra("key");`

还要确保`FragmentComments`正确实现`Parcelable`接口。有关该主题的更多信息，请访问 android.developer.com，[此处](http://developer.android.com/reference/android/os/Parcelable.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-07T15:00:08.870

你是`objectToSend`从另一个班级扩展的吗？如果在您的`writeToParcel()`方法中是这样，请调用`super.writeToParcel()`并传递您拥有的参数。然后在构造函数中，确保它接受一个 Parcel 对象并调用`super()`构造函数。所以这两种方法看起来像

```
protected ObjectToSend(Parcel in){
    super(in);
    someNum = in.readInt();
}

@Override
public void writeToParcel(Parcel dest, int flags){
    super.writeToParcel(dest, flags);
    dest.writeInt(someNum);
} 
```

我遇到了同样的问题，这解决了它！希望能帮助到你！

# scala - scala中的策略更可取：对象或特征

> ID：13662396
> 
> 赞同：4
> 
> 时间：2012-12-01T18:29:49.990
> 
> 标签：scala, object, traits

我通常使用特征来实施策略（一些不需要附带字段的操作）。最近我发现可以根据对象定义相同的功能。它们可能是直接扩展 Function trait 或扩展了一些除 apply() 之外定义特殊方法的 trait

示例代码：

```
/* strategy realization via traits */
package object Traitness {
  trait Strategy {
    def performAction() : Unit = ()
  }
  abstract class Usage {_ : Strategy =>
  def doWork() =
    this.performAction()
  }

  // defining strategies
  trait SayA extends Strategy {
    override def performAction() = {
      println("A")
      super.performAction()
    }
  }

  trait SayB extends Strategy {
    override def performAction() = {
      println("B")
      super.performAction()
    }
  }

  trait SayC extends Strategy {
    override def performAction() = {
      println("C")
      super.performAction()
    }
  }

  //using strategies
  class SimpleStrategy extends Usage with SayA
  def reverseOrder() = new Usage with SayC with SayA
  object fullUsage extends Usage with SayA with SayB with SayC

  //run-time checking
  val check1 : Boolean = (new SimpleStrategy).isInstanceOf[SayB]
  val check2 : Boolean = reverseOrder().isInstanceOf[SayB]
  val check3 : Boolean = fullUsage.isInstanceOf[SayB]

  //compile-time checking
  def proclaim(x : SayB) = println("SayB")
}

/* strategy realization via function objects */
package object Valueness {
  trait Strategy extends Function0[Unit]

  class Usage(val strategies : List[Strategy]) {
    def doWork() = for (s <- strategies)
      s()
  }

  //defining strategies
  object SayA extends Strategy {
    override def apply() = {
      println("A")
    }
  }

  object SayB extends Strategy {
    override def apply() = {
      println("B")
    }
  }

  object SayC extends Strategy {
    override def apply() = {
      println("C")
    }
  }

  //using strategies
  class SimpleStrategy extends Usage(SayA :: Nil)
  def reverseOrder() = new Usage(SayB :: SayA :: Nil)
  val fullUsage = new Usage(SayA :: SayB :: SayC :: Nil)

  //run-time checking
  def check(strategy : Strategy, usage : Usage) = usage.strategies contains strategy
  val check1 : Boolean = check(SayB, new SimpleStrategy)
  val check2 : Boolean = check(SayB, reverseOrder())
  val check3 : Boolean = check(SayB, fullUsage)

  //no compile-time checking available
} 
```

我应该选择哪一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T19:25:52.763

在您描述的用例中，使用特征或对象是不必要的面向对象的过度杀伤。您的策略只是简单的功能，并且可以最干净地实现。

```
object Strategy{

  type Strategy = () => Unit

  val sayA:Strategy = ()=>{println("A")}
  val sayB:Strategy = ()=>{println("B")}
  val sayC:Strategy = ()=>{println("C")}
} 
```

在这里创建 Function0[Unit] 的子类不会给您带来任何好处，并且会让您失去制作微不足道的文字的能力。函数在 Scala 中是非常好的实体。熟悉它们，不要犹豫直接使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T20:52:26.560

```
class MyStrategy {
  val sayABC: Strategy.Strategy = () => {
    Strategy.sayA()
    Strategy.sayB()
    Strategy.sayC()
  }
}
reflect.runtime.universe.typeOf[MyStrategy].members.filter(_.asTerm.fullName.endsWith(".sayABC")).head 
```

结果：

```
res36: reflect.runtime.universe.Symbol = value sayABC 
```

如果我的函数 sayABC 仅包含对不同函数的调用，那么如果有人向我们展示如何通过 AST 获取对 sayA、sayB、sayC 的调用，那就太好了？

...它旨在成为对 Dave Griffith 代码的格式正确的答案

# python - Python，字符串到 JSON？

> ID：13662399
> 
> 赞同：3
> 
> 时间：2012-12-01T18:30:02.337
> 
> 标签：python, linux, json

在 Fedora 17 64bit 中同时使用 netifaces 和 json 导入。

我正在尝试以 JSON 格式获取这种格式

> ```
> "net_info" : [
>             {"nic" : ..., "mac" : ..., "ip" : ...},
>             {"nic" : ..., "mac" : ..., "ip" : ...},
>             {"nic" : ..., "mac" : ..., "ip" : ...},
>             ] 
> ```

我目前正在使用 a`string`并且只是附加到它，我得到了这个：

```
"'net_info': [{'nic':eth0,'mac':6c:f0:49:0f:e1:c2,'ip':192.168.1.116},]" 
```

由于每个字符串开头和结尾的引号，这可能不起作用；有没有更好的方法来做到这一点？我当时正在考虑使用字典列表，但最终还是先尝试了字符串，不确定在这种情况下什么是最好的。

**这是我的代码，包含 3 个列表：**

```
def json_serialize(ip=[],mac=[],nic=[]):
    jsonDump = "'net_info': ["
    for i,item in enumerate(ip):
        jsonDump += "{'interface_name':" + nic[i] +",'mac':" 
                      + mac[i] + ",'ip':" + ip[i] +"},"
        jsonDump += "]"
        print jsonDump.strip()

    #Testing output after its passed in to json.dumps(), it now has quotes at beginning
    #and end of string...?
    print "\n"
    print     json.dumps(jsonDump) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T18:35:26.937

只需创建一个`dict`包含的 python `list`，然后一次性将其转储*到*JSON：

```
def json_serialize(ip, mac, nic):
    net_info = []
    for ipaddr, macaddr, nicname in zip(ip, mac, nic):
        net_info.append({
            'interface_name': nicaddr,
            'mac': macaddr,
            'ip': ipaddr
        })
    return json.dumps({'net_info': net_info}) 
```

您所需的输出格式似乎缺少外部`{`和`}`括号以将其标记为正确的 JSON 对象。如果你真的*必须*产生那个输出（所以缺少那些括号），只需再次删除它们：

```
print json_serialize(ip, mac, nic)[1:-1] 
```

# python - 多线程或如何避免 Python 应用程序中的阻塞

> ID：13662400
> 
> 赞同：0
> 
> 时间：2012-12-01T18:30:02.920
> 
> 标签：python, multithreading, asynchronous

我正在开发一个与用户“对话”的 Python 应用程序，并根据用户所说的内容执行任务（例如用户：“我有任何新的 facebook 消息吗？”，回答：“是的，你有 2 个新的消息。您想查看它们吗？”）。插件提供了与 facebook 或 twitter 集成等功能。基于预定义的解析规则，我的应用程序使用解析的参数调用插件，并使用它的响应。应用程序需要能够同时（或几乎同时）回答来自不同用户的多个查询。

目前，我需要以用户输入作为参数调用一个函数“响应”。但是，这有一些缺点：

i) 应用程序只能“说话时说话”。它不能决定向 facebook 查询新消息，并告诉用户是否这样做，而不被告知这样做。

ii) 一次与多个用户进行对话非常困难，因为应用程序一次只能做一件事：如果 Alice 要求应用程序检查她的 Facebook 是否有新消息，Bob 就无法与应用程序通信。

iii) 我无法开发（和使用）需要花费大量时间才能完成的插件，例如下载电影，因为应用程序无法执行任何操作，同时之前的任务还没有完成。

在这里，多线程似乎是显而易见的方法，但我担心一次创建和使用 500 个线程会显着影响性能，因此每个查询使用一个线程（查询是来自用户的语句）看起来不像正确的选择。

这样做的正确方法是什么？我读过一些关于 Twisted 的文章，“reactor”方法看起来很优雅。但是，我不确定如何在我的应用程序中实现类似的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:44:27.210

我真的不明白它会是什么样的应用程序，但我试图回答你的问题

1.  创建一个查询的线程，然后休眠一段时间
2.  为每个用户创建一个线程，并在用户离开时关闭它
3.  创建一个下载并停止的线程

毕竟，不会有 500 个线程。

# ajax - Ajax 无法检索数据（CAKEPHP）

> ID：13662402
> 
> 赞同：3
> 
> 时间：2012-12-01T18:30:20.613
> 
> 标签：ajax, cakephp

这是我的代码：这是一个 javascript 文件，它发送从视图中获取所选元素并将该 id 作为 Ajax 请求发送到控制器。

```
function getData (id, e) {

    if(window.XMLHttpRequest) {

        xmlHttp = new XMLHttpRequest();
    }
    else {

        xmlHttp = new ActiveXObject('Microsoft.XMLHTTP');
    }

    xmlHttp.onreadystatechange = function () {

        if(xmlHttp.readyState == 4 && xmlHttp.status == 200) {

            alert('yes');
        }else{

            alert('no');
        }
    }

    xmlHttp.open('POST', '/BrandDetail/returnPdetails', true);
    xmlHttp.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
    xmlHttp.send(id);
    e.preventDefault();

}
}); 
```

现在这里的控制器既没有收到请求也没有响应它。

```
class BrandDetailController extends AppController {

public $name = 'BrandDetail';

 function returnPdetails () {

    $id = $_POST['id'];
    $data = $this->brandDetail->find('all', array('conditions' => array('brandDetail.id' => $id)));
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T09:00:38.500

1.  您应该从您的 ajax 提交而不是模型中调用控制器。多元化你的路径

    xmlHttp.open('POST', '/BrandDetails/returnPdetails', true);

2.  在发送函数中传递的参数应该是键和值

    xmlHttp.send("id="+id);

3.  您实际上并没有将任何数据或字符串发送到您的 ajax 响应视图。在您的控制器中，至少在尝试操作您不确定的数据之前将测试字符串发送到视图，甚至将其发送到控制器。

    函数returnPdetails(){

    $id = $this->params['named']['id'];

    $data = $this->BrandDetail->findById($id);

    pr('一些文本来测试请求是否有效'); }

4.  readystatechange 函数不应根据[此处大写](http://www.w3schools.com/ajax/ajax_xmlhttprequest_onreadystatechange.asp%20here)

    xmlhttp.onreadystatechange

5.  通过捕获 xmlhttp.onreadystatechange 函数中的错误来缩小问题范围。如果 readyState 也为 0、1、2 或 3，则放入语句。这将帮助您调试。

# bash - 用于杀死具有相同名称的屏幕的 Bash 脚本

> ID：13662405
> 
> 赞同：1
> 
> 时间：2012-12-01T18:30:46.043
> 
> 标签：bash, kill

所以我有一个同时运行多个屏幕的系统，列表如下：

```
 2606.molamola19 (Detached)
    13481.johnappy1 (Detached)
    26017.Dylkill   (Detached)
    17061.legoman993        (Detached)
    15984.legoman993        (Detached)
    7418.taytotayto (Detached)
    7336.wpgradford (Detached)
    11913.twbone    (Detached)
    31947.1christiant       (Detached)
    20124.legoman993        (Detached)
    15034.PWNman567 (Detached)
    13119.johnappy1 (Detached)
    21084.legoman993        (Detached)
    9294.Ncraven00  (Detached)
    17200.A_Naked_Equinox   (Detached)
    4331.somegreatvids999   (Detached)
    18849.Djfireblade       (Detached)
    1104.AlfieW5    (Detached)
    7926.superhoi   (Detached)
    27904.ty281998123a      (Detached)
    14870.johnappy1 (Detached)
    4340.stapler12  (Detached)
    21244.oas510    (Detached)
    21032.jaater    (Detached)
    14320.johnappy1 (Detached)
    15188.sammyboy40        (Detached) 
```

由于与客户端的连接问题，有时会启动同一屏幕的多个实例，例如：

```
 14320.johnappy1 (Detached)
    14870.johnappy1 (Detached) 
```

过去几天我一直在尝试学习 Bash，以弄清楚如何杀死任何超过 1 的进程（当创建第二个或第三个等时，它无论如何都会破坏第一个实例）

任何帮助都会非常感激！

我显示的输出是使用 screen -r 生成的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:35:25.703

编辑：添加解释并更改命令（参见 Jeremy Sayers 的评论）

我已经很久没有使用屏幕了，但我想我仍然可以给你正确的提示。首先过滤掉那些你想杀死的实例，然后杀死它们：

```
screen -r | \
  sort -t. -k2,2 -k1,1 | \
  awk 'BEGIN { i=""; FS = "([[:space:]]|\\.)+" };{if($2 == i) print $1; i = $2;}' | \
  while read x; do kill -9 $x; done 
```

解释：

```
sort -t. -k2,2 -k1,1 
```

首先在名称之后排序（例如 johnappy1），然后在 PID 之后（因为我假设您希望保持第一个实例启动）。

```
awk 'BEGIN { i=""; FS = "([[:space:]]|\\.)+" };{if($2 == i) print $1; i = $2;}' 
```

将过滤掉所有多个实例并输出它们中较高的 PID（仅省略第一个、最低的 PID）。

```
while read x; do kill -9 $x; done 
```

将循环遍历我们从上一个命令获得的所有 PID，并在它们上调用“kill -9”。

# python - 具有重复奇数的整数列表

> ID：13662407
> 
> 赞同：1
> 
> 时间：2012-12-01T18:30:50.777
> 
> 标签：python

`0`给定一个`N`连续整数的列表，其中`N`是一个偶数，例如，`A = [0 , 1 , 2 , 3 , 4]`我正在寻找一个列表理解，即 type `[a for a in A]`，用于创建另一个`B = [0 , 1 , 1 , 2 , 3 , 3 , 4]`在输入列表中重复奇数的列表，`A`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T18:43:06.713

这是一个带有列表理解的（有点丑陋的）解决方案：

```
a = range(5)
list(itertools.chain(*[[x, x] if x % 2 == 1 else [x] for x in a]))
# => [0, 1, 1, 2, 3, 3, 4] 
```

列表推导构建一个子列表列表：

```
[[x, x] if x % 2 == 1 else [x] for x in a] # => [[0], [1, 1], [2], [3, 3], [4]] 
```

该`itertools.chain`调用只是在 Python中[展平列表的众多方法之一。](https://stackoverflow.com/questions/952914/making-a-flat-list-out-of-list-of-lists-in-python)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:52:57.230

```
itertools.chain(*[[i] * (i % 2 + 1) for i in xrange(N + 1)]) 
```

# python - 如何修复 django 中的 KeyError？

> ID：13662409
> 
> 赞同：0
> 
> 时间：2012-12-01T18:31:19.883
> 
> 标签：python, django, view, dictionary

`print user_dic[id]`显示正确的结果`PersonA`。这是我手动输入 id 的时候。

```
user_stream = {u'2331449': u'PersonB', u'17800013': u'PersonA'}
user_dic= {}
for item in user_stream:
    user_dic[item['id']] = item['name']

id = '17800013'
print user_dic[id]  #returns the right value 
```

但是，当我尝试`user_id`通过遍历 json 的 for 循环时，我得到一个错误：`KeyError at 17800013`for the line `name = user_dic[user_id]`。我不明白为什么`user_dic[id]`在手动输入 id 时有效，但`user_dic[user_id]`在通过 for 循环时即使输入相同也无效。

```
#right fql query
fql_query = "SELECT created_time, post_id, actor_id, type, updated_time, attachment FROM stream WHERE post_id in (select post_id from stream where ('video') in attachment AND source_id IN ( SELECT uid2 FROM friend WHERE uid1=me()) limit 100)"
fql_var = "https://api.facebook.com/method/fql.query?access_token=" + token['access_token'] + "&query=" + fql_query + "&format=json"
data = urllib.urlopen(fql_var)
fb_stream = json.loads(data.read())

fb_feed = []
for post in fb_stream:
    user_id = post["actor_id"]
    name = user_dic[user_id]  #this is the line giving me trouble
    title = post["attachment"]["name"]
    link = post["attachment"]["href"]
    video_id = link[link.find('v=')+2 : link.find('v=')+13]
    fb_feed.append([user_id, name, title, video_id]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:39:45.130

没有必要`user_dic`。您在第一部分所做的只是一项多余的工作，而且您也做错了。你`user_stream`已经是你想要的形式了。您的第一部分应包含以下行：

```
user_stream = {u'2331449': u'PersonB', u'17800013': u'PersonA'} 
```

在第二部分（在你遇到问题的地方）你应该这样做：

```
name = user_stream[user_id] 
```

如果你认为你会面对`KeyError`然后`dict`有一个方法，如果没有找到密钥`.get`，它会返回。`None`如果有，您可以指定您的值而不是`None`返回`KeyError`

```
name = user_stream.get('user_id')
#returns None by default
name = user_stream.get('user_id', '')
#returns empty string now
#on both cases exception will not raised 
```

# ios - iOS 中的多个传感器

> ID：13662422
> 
> 赞同：2
> 
> 时间：2012-12-01T18:33:05.730
> 
> 标签：ios, gps, location, accelerometer

我有两种不同的 POC，一种用于加速度计，一种用于 GPS。但是，我不理解将这两个应用程序结合起来的架构。当应用程序加载时，我需要初始化加速度和 GPS。我将主视图绑定到加速器，但还需要绑定到设备的位置。

我当前的架构是工作区中的项目

*   主应用
*   实用程序
*   服务应用程序
*   域应用

主应用 ViewController 继承

: UIViewController

所有接线正确，加速按预期工作。

在 Utility CoreLocationUtility 类中，我让它继承了 CLLocationManagerDelegate。

问题是，如何从 AccelDelegate 类型的同一视图注册委托？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:05:26.230

如果您想让您的 ViewController 充当加速度计和 GPS 的委托，请在其头文件中声明它遵守两种委托协议：

```
@interface ViewController : UIViewController <CLLocationManagerDelegate, UIAccelerometerDelegate> {
    CLLocationManager *myLocationManager; // an instance variable
}
 // ... your definitions
@end 
```

然后在你的 ViewController 的某个地方

```
[UIAccelerometer sharedAccelerometer].delegate = self;
myLocationManager = [[CLLocationManager alloc] init];
myLocationManager.delegate = self; 
```

然后在您的 ViewController 中的其他地方，放置两个协议的委托方法

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
    // ... your code
}

- (void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations {
   // ... your code 
```

}

这应该可以，虽然可能有错别字，但我没有编译这个。另外，根据我的经验，位置管理器代码往往会变得很大。最好将它放在一个自己的类中，由 ViewController 实例化。

谁能解释为什么不推荐使用 UIAccelerometerDelegate 协议中的唯一方法？

# c++ - 制作动态对象数组问题？

> ID：13662423
> 
> 赞同：0
> 
> 时间：2012-12-01T18:33:16.433
> 
> 标签：c++, arrays, oop, class, dynamic

```
Candidate::Candidate ()
{

} 
```

它没有做任何事情。不写它不能执行该行：

```
Candidate *list = new Candidate [10]; 
```

为什么？

```
Error: no default constructor exists for the class "Candidate" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:39:50.453

为了允许您的动态数组分配，必须有`new Candidate[10]`一个默认的构造函数。`Candidate`也就是说，它必须能够不接受任何参数。如果您为 提供任何自己的构造函数`Candidate`，无论它们采用多少参数，通常由编译器自动定义的隐式默认构造函数都不会被定义。因此你必须自己提供它，即使它的身体是空的。见§12.1/5：

> 类的*默认*构造函数是可以在没有参数的情况下调用`X`的类的构造函数。`X`如果 class 没有用户声明`X`的构造函数，则没有参数的构造函数被隐式声明为默认值 (8.4)。

您的类可以如下所示，因为编译器将隐式定义一个默认的默认构造函数：

```
class Candidate
{ }; // Compiler provides a default constructor 
```

但是一旦你给它任何其他构造函数，就不再提供隐式默认构造函数：

```
class Candidate
{
 public:
  Candidate(int x);
  // A user-defined constructor is provided so the default constructor
  // must be defined explicitly
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:36:09.367

你的类中可能有一个额外的构造函数。如果您定义了任何构造函数，编译器将不会生成默认构造函数。

# xcode - 意外删除 /usr/bin/git 文件，现在我无法在终端上使用 git

> ID：13662428
> 
> 赞同：0
> 
> 时间：2012-12-01T18:33:41.940
> 
> 标签：xcode, macos, git

我的机器上的 git 有问题，我不小心从系统中删除了 /usr/bin/git。

我的 git 是通过 XCode 命令行工具安装的，但我找不到重新安装它的方法。

未卸载 git，已删除 git 文件。

有没有从 XCode 或其他地方重新安装命令行工具的方法？或者我可以在哪里获得原始 git 文件以再次添加到 /usr/bin 的地方？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T18:37:00.367

```
sudo cp /Applications/Xcode.app/Contents/Developer/usr/bin/git /usr/bin/git 
```

我不知道为什么`/usr/bin/git`不仅仅是该文件的符号链接，而是在我的系统上它是一个单独的（相同的）副本。

# apache - 没有特定顺序的 Apache mod_rewrite 查询字符串

> ID：13662431
> 
> 赞同：0
> 
> 时间：2012-12-01T18:33:53.687
> 
> 标签：apache, mod-rewrite

我有一条将旧式网址转换为新式的规则。只要我在查询中使用相同的参数顺序，它就可以正常工作：

```
RewriteCond %{QUERY_STRING} ^country=([a-z]{2})&id=([0-9]+)$ [NC]
RewriteRule ^(.*)$ http://%1.localhost/%2? [R=301,L] 
```

所以 url localhost/index.php?country=us&id=1234 会转到 us.localhost/1234

但问题是使用 localhost/index.php?id=1234&country=us （注意参数现在按顺序交换）然后规则当然不适用。

我考虑过更改规则以分别处理参数，如下所示：

```
RewriteCond %{QUERY_STRING} country=([a-z]{2}) [NC]
RewriteCond %{QUERY_STRING} id=([0-9]+) [NC]
RewriteRule ^(.*)$ http://%1.localhost/%2? [R=301,L] 
```

但是当输入 localhost/index.php?id=1234&country=us 我得到 1234.localhost/us 这不是我所期望的（我希望第一个 cond 给我 %1 和第二个 cond %2 但似乎顺序是'不是这样确定的）

有没有简单的方法来实现这一目标？当然，我可以编写两个单独的规则，每个规则处理每种情况，但想知道是否可以使用一些通用方法（想想如果我们有 3 个参数，那么排列会使这变得难以管理）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T23:55:11.843

从文档中，您似乎只能引用最后一场比赛的规则：

RewriteCond 反向引用：这些是 %N (0 <= N <= 9) 形式的反向引用。%1 到 %9 提供对模式的分组部分（同样，在括号中）的访问，**从当前条件集中最后一个匹配的 RewriteCond 开始**。%0 提供对该模式匹配的整个字符串的访问。

我一直在绞尽脑汁想一个好方法来做到这一点，我能想到的最好的方法是使用多个规则将数据提取到环境变量中，然后在最后引用这些规则进行最终重写。

像这样的东西：

```
RewriteCond %{QUERY_STRING} country=([a-z]{2}) [NC]
RewriteRule ^(.*)$ - [E=URL_COUNTRY:%1]

RewriteCond %{QUERY_STRING} id=([0-9]+) [NC]
RewriteRule ^(.*)$ - [E=URL_ID:%1]

RewriteRule ^(.*)$ http://%{ENV:URL_COUNTRY}.localhost/%{ENV:URL_ID}? [R=301,L] 
```

# java - Java：列表的字符串格式

> ID：13662438
> 
> 赞同：0
> 
> 时间：2012-12-01T18:34:54.797
> 
> 标签：java, string

一种如何格式化以下内容：

由此：

```
1: My street
2: 1232321
3: Hello there world!
4: A really really really long word! 
```

对此：

```
1:                           My street
2:                             1232321
3:                  Hello there world!
4:   A really really really long word! 
```

我认为它与 String.format() 和其中的一堆随机字符有关！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T18:41:20.063

您可以先将字符串拆分为 get`1:`和`My Street`单独，然后对其进行格式化：-

```
String str = "1: My street";
String str2 = "3: Hello there world!";

String[] arr = str.split("(?<=:) ");
String[] arr2 = str2.split("(?<=:) ");

System.out.printf("%s%30s\n", arr[0], arr[1]);
System.out.printf("%s%30s", arr2[0], arr2[1]); 
```

**输出 ： -**

```
1:                     My street
3:            Hello there world! 
```

您也可以使用`String#substring`方法来执行此操作，以分别获取这两个部分。

```
System.out.printf("%s%30s\n", str.substring(0, 2), str.substring(3)); 
```

# android - 将自定义列表视图添加到片段

> ID：13662440
> 
> 赞同：1
> 
> 时间：2012-12-01T18:35:01.413
> 
> 标签：android, listview, fragment, android-listfragment, custom-adapter

我有一个包含自定义列表视图的活动。

它有一个自定义数组适配器（作为另一个 java 文件）和一个 setter 和 getter 类（作为另一个 java 文件）。我想将此自定义列表视图放入片段中，但总是出错。这是我之前的主要活动代码： public class MainActivity extends Activity implements OnClickListener {

```
private ListView listView;
private List<NameBean> items;
private NamesAdapter objAdapter = null;
private Button btnGetSelected;
public static final String[] titles = new String[] { "Strawberry",
    "Banana", "Orange", "Mixed" };
String CheckedItems;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ArrayAdapter<CharSequence> spinnerAdapter = ArrayAdapter.createFromResource(this,
            R.array.spinner_array, android.R.layout.simple_spinner_item);
    spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinnerAdapter.setNotifyOnChange(true);

    listView = (ListView) findViewById(R.id.listview);
    btnGetSelected = (Button) findViewById(R.id.btnget);
    btnGetSelected.setOnClickListener(this);

    items = new ArrayList<NameBean>();
    for (int i = 0; i < titles.length; i++) {
        NameBean nb = new NameBean();
        nb.setName(titles [i]);
        nb.setSpinnerAdapter(spinnerAdapter);
        items.add(nb);
    }
    objAdapter = new NamesAdapter(MainActivity.this, items);
    listView.setAdapter(objAdapter);
    listView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            ...
        }
    });
}

@Override
public void onClick(View v) {

    ...
        }
    }
} 
```

}

这就是我想在 Fragment 中使用它的方式：

公共类内容扩展片段{

```
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

}
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);
}
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_content, container, false);

    return view;
}
public void setThings(ListAdapter adapter) {
    ListView listView = (ListView) getView().findViewById(R.id.listview);
    listView.setAdapter(adapter);
  } 
```

}

我在另一个片段中定义了这些参数（在同一个活动中）：

```
public class MyListFragment extends Fragment {

private ListView listView;
private List<NameBean> items;
private NamesAdapter objAdapter = null;
public static final String[] titles = new String[] { "Strawberry",
    "Banana", "Orange", "Mixed" };
String CheckedItems;
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

}
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.fragment_items,
            container, false);
    Button button = (Button) view.findViewById(R.id.button1);
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
            updateDetail();
        }
    });
    return view;
}

// May also be triggered from the Activity
public void updateDetail() {
    ArrayAdapter<CharSequence> spinnerAdapter = ArrayAdapter.createFromResource(getActivity().getApplicationContext(),
            R.array.spinner_array, android.R.layout.simple_spinner_item);
    spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinnerAdapter.setNotifyOnChange(true);
    items = new ArrayList<NameBean>();
    for (int i = 0; i < titles.length; i++) {
        NameBean nb = new NameBean();
        nb.setName(titles [i]);
        nb.setSpinnerAdapter(spinnerAdapter);
        items.add(nb);
    }
    objAdapter = new NamesAdapter(getActivity(), items);
    Content fragment = (Content) getFragmentManager()
            .findFragmentById(R.id.detailFragment);
    if (fragment != null && fragment.isInLayout()) {
        fragment.setThings (objAdapter);
    } 
} 
```

}

我不知道问题是什么。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T17:19:47.927

我不知道这是否足够，但是：

1.  你的`Content`类应该扩展 ListFragment，而不仅仅是 Fragment。默认情况下，`ListFragment`视图层次结构包含 a`ListView`而没有其他内容；如果您想提供自己的布局，那很好，但您`ListView`在该布局中必须有 ID `@id/android:list`。请参阅[`ListFragment`](http://developer.android.com/reference/android/app/ListFragment.html)javadoc。

2.  在您的`setThings(ListAdapter)`方法中，您应该将 传递`ListAdapter`给片段的`setListAdapter()`方法，而不是直接传递给`ListView`，如下所示：

    ```
    public void setThings(ListAdapter adapter) {
        setListAdapter(adapter);
    } 
    ```

希望这可以帮助。

# c++ - C++11 允许对非静态和非常量成员进行类内初始化。发生了什么变化？

> ID：13662441
> 
> 赞同：93
> 
> 时间：2012-12-01T18:35:02.690
> 
> 标签：c++, class, c++11, initialization, class-members

在 C++11 之前，我们只能对整型或枚举类型的静态 const 成员进行类内初始化。[Stroustrup 在他的 C++ FAQ 中讨论了这一点](http://www.stroustrup.com/bs_faq2.html#in-class)，并给出了以下示例：

```
class Y {
  const int c3 = 7;           // error: not static
  static int c4 = 7;          // error: not const
  static const float c5 = 7;  // error: not integral
}; 
```

以及以下推理：

> 那么为什么会存在这些不方便的限制呢？一个类通常在头文件中声明，并且头文件通常包含在许多翻译单元中。但是，为了避免复杂的链接器规则，C++ 要求每个对象都有唯一的定义。如果 C++ 允许在类内定义需要作为对象存储在内存中的实体，则该规则将被打破。

但是，C++11 放宽了这些限制，允许对非静态成员进行类内初始化（第 12.6.2/8 节）：

> 在非委托构造函数中，如果给定的非静态数据成员或基类不是由*mem-initializer-id*指定的（包括由于构造函数没有*ctor-initializer*而没有*mem-initializer-list*的情况）并且实体不是抽象类（10.4）的虚拟基类，则
> 
>  **   *如果实体是具有大括号或相等初始化器*的非静态数据成员，则实体按照 8.5 中的规定进行初始化；
> *   否则，如果实体是变体成员（9.5），则不执行初始化；
> *   否则，实体被默认初始化（8.5）。*

 *9.4.2 节还允许对非常量静态成员进行类内初始化，如果它们用说明`constexpr`符标记的话。

那么我们在 C++03 中受到限制的原因是什么？我们只是简单地接受“复杂的链接器规则”还是进行了其他更改以使其更易于实现？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-12-01T18:51:40.480

简短的回答是他们保持链接器大致相同，但代价是使编译器比以前更复杂。

即，这不会导致链接器排序的多个定义，它仍然只导致一个定义，并且编译器必须对其进行排序。

它还导致*程序员*也需要整理一些更复杂的规则，但它大多足够简单，没什么大不了的。当您为单个成员指定了两个不同的初始化程序时，就会出现额外的规则：

```
class X { 
    int a = 1234;
public:
    X() = default;
    X(int z) : a(z) {}
}; 
```

现在，此时的额外规则处理`a`使用非默认构造函数时用于初始化的值。答案相当简单：如果您使用的构造函数没有指定任何其他值，那么`1234`将用于初始化`a`- 但如果您使用指定其他值的构造函数，则`1234`基本上会被忽略。

例如：

```
#include <iostream>

class X { 
    int a = 1234;
public:
    X() = default;
    X(int z) : a(z) {}

    friend std::ostream &operator<<(std::ostream &os, X const &x) { 
        return os << x.a;
    }
};

int main() { 
    X x;
    X y{5678};

    std::cout << x << "\n" << y;
    return 0;
} 
```

结果：

```
1234
5678 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-06-06T15:56:15.383

理论上`So why do these inconvenient restrictions exist?...`理由是有效的，但它很容易被绕过，而这正是 C++ 11 所做的。

当您*包含*一个文件时，它只是包含该文件并忽略任何初始化。仅当您*实例化*类时才初始化成员。

也就是说，初始化还是和构造函数绑定的，只是记法不同，更方便。如果未调用构造函数，则不会初始化值。

如果调用构造函数，则使用类内初始化（如果存在）初始化值，或者构造函数可以使用自己的初始化覆盖它。初始化的路径本质上是一样的，都是通过构造函数。

这从 Stroustrup 自己的 C++ 11[常见问题中可以看出。](http://www.stroustrup.com/C++11FAQ.html#member-init)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-01-29T18:29:34.943

我猜推理可能是在模板最终确定之前编写的。毕竟静态成员的类内初始化程序所需的所有“复杂的链接器规则”对于 C++11 支持模板的静态成员来说已经/是必要的。

考虑

```
struct A { static int s = ::ComputeSomething(); }; // NOTE: This isn't even allowed,
                                                   // thanks @Kapil for pointing that out

// vs.

template <class T>
struct B { static int s; }

template <class T>
int B<T>::s = ::ComputeSomething();

// or

template <class T>
void Foo()
{
    static int s = ::ComputeSomething();
    s++;
    std::cout << s << "\n";
} 
```

编译器的问题在所有三种情况下都是相同的：它应该在哪个翻译单元中发出定义`s`和初始化它所需的代码？简单的解决方案是在任何地方发出它并让链接器对其进行排序。这就是为什么链接器已经支持诸如`__declspec(selectany)`. 没有它就不可能实现 C++03。这就是为什么不需要扩展链接器的原因。

说得更直白一点：我认为旧标准中给出的推理是完全错误的。

* * *

**更新**

正如 Kapil 指出的那样，我的第一个示例在当前标准（C++14）中甚至是不允许的。无论如何我都把它留下了，因为 IMO 是实现（编译器、链接器）最困难的情况。我的观点是：即使*这种*情况并不比已经允许的情况更难，例如在使用模板时。*

# android - Arduino - Wifly - 响应来自 Android 的 Http 调用

> ID：13662445
> 
> 赞同：0
> 
> 时间：2012-12-01T18:35:33.760
> 
> 标签：android, http, arduino, android-wifi

我已经构建了一个 Android 应用程序和一个 Arduino - wifly 模块。现在 Android 应用程序能够通过 wifly 向 arduino 发送数据。到目前为止，我已经编写了一个 http 参数以在等待 2 秒后关闭 http 一次。

```
final int TIMEOUT_MILLISEC = 2000;
HttpParams httpParams = new BasicHttpParams();
HttpConnectionParams.setConnectionTimeout(httpParams, TIMEOUT_MILLISEC);
HttpConnectionParams.setSoTimeout(httpParams, TIMEOUT_MILLISEC); 
```

您能否指导如何将 Arduino 的响应发送到已与 Arduino 建立 HHTP 连接的 Android 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:28:48.447

如果我正确理解您的问题，您希望 Arduino 板充当网络服务器。为此目的，网上有几个教程，最著名[的是 arduino.cc 上的教程](http://arduino.cc/en/Tutorial/WebServer)。

不过，您应该期望在 Arduino 方面做更多的工作以从中获得一些有用的东西。

# validation - 使用微风实用程序进行淘汰赛验证？

> ID：13662446
> 
> 赞同：5
> 
> 时间：2012-12-01T18:35:53.003
> 
> 标签：validation, knockout.js, breeze

有没有人编写过一个实用程序，可以将 Breeze 元数据（从实体框架数据属性中捕获）转换为敲除验证扩展（使用 knockout.validation）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T16:55:41.263

我制作了一个从实体读取元数据并添加验证规则的函数。

```
app.domain.indicador = (function () {
"use strict";
var constructor = function () {...}
var initializer = function indicadorInitializer(entity) {
    var entityType = entity.entityType;
    if (entityType) {
        console.log(entityType);
        for (var i = 0; i < entityType.dataProperties.length; i++) {
            var property = entityType.dataProperties[i];
            console.log(property);
            var propertyName = property.name;

            var propertyObject = entity[propertyName];
            if (!property.isNullable) {
                propertyObject.extend({ required: true });
            }
            if (property.maxLength) {
                propertyObject.extend({ maxLength: property.maxLength });
            }
        }

        for (var i = 0; i < entityType.foreignKeyProperties.length; i++) {
            var property = entityType.foreignKeyProperties[i];
            console.log(property);
            var propertyName = property.name;

            var propertyObject = entity[propertyName];
            if (!property.isNullable) {
                propertyObject.extend({ required: true });
            }
            if (property.maxLength) {
                propertyObject.extend({ maxLength: property.maxLength });
            }
            //Bussines rule
            propertyObject.extend({ notEqual: 0 });
        }
    }
};
return {
    constructor: constructor,
    initializer: initializer
};
})(); 
```

我使用该函数作为初始化程序：

```
store.registerEntityTypeCtor("Indicador", domain.indicador.constructor, domain.indicador.initializer); 
```

这只是一个开始，但时间对我很有用。

更新：

我改变了添加验证的方式。我在这里分享它以防它对某人有用：

辅助对象：

```
app.validatorHelper = (function (breeze) {
var foreignKeyInvalidValue = 0;

function addDataTypeRules(dataType, property) {
    switch (dataType) {
        case breeze.DataType.DateTime:
            //TODO: implement my function to validate dates. This validator is too permissive
            property.extend({ date: true });
            break;
        case breeze.DataType.Int64:
        case breeze.DataType.Int32:
        case breeze.DataType.Int16:
            //it's needed to accept negative numbers because of the autogenerated keys
            property.extend({ signedDigit: true });
            break;
        case breeze.DataType.Decimal:
        case breeze.DataType.Double:
        case breeze.DataType.Single:
            property.extend({ number: true });
            break;
    }
};

function addValidationRules(entity) {
    var entityType = entity.entityType;
    if (entityType) {
        for (var i = 0; i < entityType.dataProperties.length; i++) {
            var property = entityType.dataProperties[i];
            //console.log(property);
            var propertyName = property.name;
            var propertyObject = entity[propertyName];

            addDataTypeRules(property.dataType, propertyObject);

            if (!property.isNullable) {
                propertyObject.extend({ required: true });
            }
            if (property.maxLength) {
                propertyObject.extend({ maxLength: property.maxLength });
            }
        }

        for (var i = 0; i < entityType.foreignKeyProperties.length; i++) {
            var property = entityType.foreignKeyProperties[i];
            //console.log(property);
            var propertyName = property.name;
            var propertyObject = entity[propertyName];

            addDataTypeRules(property.dataType, propertyObject);

            if (!property.isNullable) {
                propertyObject.extend({ required: true });
                //Bussiness Rule: 0 is not allowed for required foreign keys
                propertyObject.extend({ notEqual: foreignKeyInvalidValue });
            }
            if (property.maxLength) {
                propertyObject.extend({ maxLength: property.maxLength });
            }
        }
    }
};

return {
    addValidationRules: addValidationRules
};
})(breeze); 
```

自定义验证器：

```
(function (ko) {
ko.validation.rules['signedDigit'] = {
    validator: function (value, validate) {
        if (!validate) return true;
        return ko.validation.utils.isEmptyVal(value) || (validate && /^-?\d+$/.test(value));
    },
    message: 'Please enter a digit'
};

ko.validation.registerExtenders();
})(ko); 
```

在初始化程序中使用帮助程序：

```
app.domain.valorIndicador = (function (vHelper) {
"use strict";
var constructor = function () {
};

var initializer = function indicadorInitializer(entity) {
    vHelper.addValidationRules(entity);
};

return {
    constructor: constructor,
    initializer: initializer
};
})(app.validatorHelper); 
```

并设置初始化程序：

```
store.registerEntityTypeCtor("ValorIndicador", domain.valorIndicador.constructor, domain.valorIndicador.initializer); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T19:39:39.127

一种使用敲除绑定来自微风js的验证错误的简单方法。

我们可以从 entityAspect订阅*validationErrorsChanged事件：*

```
function subscribeValidation() {
    return self.entity().entityAspect.validationErrorsChanged.subscribe(function (validationChangeArgs) {
                validationChangeArgs.added.forEach(function (item) { addError(item); });
                validationChangeArgs.removed.forEach(function (item) { self.validationErrors.remove(item); });
    });
}

this.hasError = function (propertyName) {
    var array = self.validationErrors();
    var match = array.filter(function (item) {
        return item.propertyName == propertyName;
    });
    if (match.length > 0) {
        return true;
    } else return false;
};

function addError(item) {
    self.validationErrors.remove(function (i) {
        return i.propertyName == item.propertyName;
    });

    self.validationErrors.push(item);
} 
```

最后我们可以绑定到 UI 上的消息（我正在使用 Twitter boostrap css 类）

```
<div class="control-group" data-bind="css: { 'error': hasError('Nome') }">
    <label class="control-label">Nome</label>
    <div class="controls">
        <input type="text" class="input-xxlarge" data-bind="value: model().Nome">
        <span class="help-inline" data-bind="text: getErrorMessage('Nome')"></span>
    </div>
</div> 
```

[在这里](https://gist.github.com/jpolvora/5155303)查看完整的要点

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-06T12:56:44.957

我之前搜索过这个，因为我开始使用带有敲除的微风，然后我对如何验证内容以及如何显示内联验证有完全相同的问题。

考虑到微风已经内置了验证，我决定编写一个自定义的 Knockout Binding 来在每次可观察值发生变化时显示验证结果，毕竟这很容易：

这是自定义绑定：

```
 ko.bindingHandlers.breezeValidate = {
    init: function (element, valueAccessor, allBindingsAccessor, context) {
        var isOk = context.entityAspect.validateProperty(valueAccessor());
        var errors = context.entityAspect.getValidationErrors(valueAccessor());
        var message = "";
        if (errors.length > 0)
            message = errors[0].errorMessage;
        $(element).html(message);
    },

    //update the control when the view model changes
    update: function (element, valueAccessor, allBindingsAccessor, context) {
        debugger;
        this.init(element, valueAccessor, allBindingsAccessor, context)
    }
}; 
```

用法是这样的：

```
<span data-bind="text: Name"></span>
<span data-bind="breezeValidate: 'Name'"></span> 
```

这是因为这一行：

```
var isOk = context.entityAspect.validateProperty(valueAccessor()); 
```

当微风被请求验证属性时，它最终会调用 observable 并通过敲除注册，因此每次更改时，都会再次调用此绑定并相应地更新错误消息。

我只是展示了第一条验证消息，但当然您可以遍历所有这些消息，甚至为元素添加不同的样式。

希望这可以帮助！！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-19T04:02:17.503

不知道为什么人们会想要使用 ko.validation - 它只是复制了处理微风的客户端正在做的事情。鉴于微风开发人员暗示验证将很快获得更大的力量，何必费心呢。

所以我从蒂亚戈奥利维拉的伟大作品开始。但我希望有最低限度的标记。通过假设使用引导类并默认上一个元素的验证属性名称，我可以将大多数标记添加简化为：

```
<span class="help-inline" data-bind="breezeValidation: null"></span> 
```

赢！

我的 ko.bindingHandler：

```
//Highlight field in red & show first validation message
//
//Outputs first validation message for 'propertyName' or if null: previous controls value binding
//Needs ancestor with 'control-group' class to set class 'error' for Bootstrap error display
//
//Example:
//<td class="control-group">
//    <input class="input-block-level text-right" data-bind="value: id" />
//    <span class="help-inline" data-bind="breezeValidation: null"></span>
//</td>
//
//Does not and cannot validate keys that already exist in cache. knockout write calls breeze which throws uncaught error

ko.bindingHandlers.breezeValidation = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        // This will be called when the binding is first applied to an element
        // Set up any initial state, event handlers, etc. here

        var $msgElement = $(element);
        var entity = viewModel;

        var propName = valueAccessor();
        if (propName === null) {
            //  $element.prev().data("bind") = "value: itemType"
            var prevBinds = $msgElement.prev().data("bind");
            if (!prevBinds) {
                $msgElement.text("Could not find prev elements binding value.");
                return;
            }
            var bindPhrases = prevBinds.split(/,/);
            for (var i = 0, j = bindPhrases.length; i < j; i++) {
                var bindPhrase = bindPhrases[i];
                if (utility.stringStartsWith(bindPhrase, 'value: ')) {
                    propName = bindPhrase.substr(7);
                    break;
                }
            }
        }

        if (!propName) {
            $msgElement.text("Could not find this or prev elements binding value.");
            return;
        }

        //var $groupElement = $msgElement.parent();      
        var $groupElement = $msgElement.closest(".control-group");
        if (!$groupElement.hasClass("control-group")) {
            $msgElement.text("Could not find parent with 'control-group' class.");
            return;
        }

        onValidationChange();               //fire immediately (especially for added)
                                            //... and anytime validationErrors are changed fire onValidationChnange
        entity.entityAspect.validationErrorsChanged.subscribe(onValidationChange);

        element.onchange = function () {
            //Should never have updates pushed from validation msgElement
            $msgElement.text("readonly error");
        };

        function onValidationChange() {
            var errors = entity.entityAspect.getValidationErrors(propName);
            var message = "";
            if (errors.length > 0) {
                message = errors[0].errorMessage;
            }

            if (message) {
                $groupElement.addClass('error');
            }
            else {
                $groupElement.removeClass('error');
            }

            $msgElement.text(message);
        }

    }
    //Not interested in changes to valueAccessor - it is only the fieldName.
    //update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
}; 
```

示例视图简单的隐式属性用法：

```
<div class="control-group">
    <label class="control-label" for="editStatusNote">Status note:</label>
    <div class="controls">
        <input id="editStatusNote" type="text" data-bind="value: statusNote" />
        <span class="help-inline" data-bind="breezeValidation: null"></span>
    </div>
</div> 
```

示例视图显式属性用法：

```
<div class="control-group">
    <label class="control-label" for="editAmount">Amount:</label>
    <div class="controls">
        <div class="input-prepend">
            <span class="add-on">$</span>
            <input id="editAmount" class="input-small" type="text" data-bind="value: amount" />
        </div>
        <span class="help-inline" data-bind="breezeValidation: 'amount'"></span>
    </div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-18T09:54:16.863

我将breathValidation 更新为Bootstrap 3，并通过多路径属性支持进行了改进。

```
ko.bindingHandlers.breezeValidation = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        // This will be called when the binding is first applied to an element
        // Set up any initial state, event handlers, etc. here

        var $msgElement = $(element);
        var entity = viewModel;

        var propName = valueAccessor();
        if (propName === null) {
            //  $element.prev().data("bind") = "value: itemType"
            var prevBinds = $msgElement.prev().data("bind");
            if (!prevBinds) {
                $msgElement.text("Could not find prev elements binding value.");
                return;
            }
            var bindPhrases = prevBinds.split(/,/);
            for (var i = 0, j = bindPhrases.length; i < j; i++) {
                var bindPhrase = bindPhrases[i];
                if (bindPhrase.substr(0, 7) == 'value: ') {
                    propName = bindPhrase.substr(7);

                    entity = ko.utils.unwrapObservable(entity);
                    var propPath = propName.replace(/[()]/g, "").split('.'), i = 0;
                    var tempProp = entity[propPath[i]], links = propPath.length;
                    i++;
                    while (ko.utils.unwrapObservable(tempProp) && i < links) {
                        entity = ko.utils.unwrapObservable(tempProp);
                        tempProp = entity[propName = propPath[i]];
                        i++;
                    }

                    break;
                }
            }
        }

        if (!propName) {
            $msgElement.text("Could not find this or prev elements binding value.");
            return;
        }

        //var $groupElement = $msgElement.parent();      
        var $groupElement = $msgElement.closest(".form-group");
        if (!$groupElement.hasClass("form-group")) {
            $msgElement.text("Could not find parent with 'form-group' class.");
            return;
        }

        onValidationChange();               //fire immediately (especially for added)
        //... and anytime validationErrors are changed fire onValidationChnange
        entity.entityAspect.validationErrorsChanged.subscribe(onValidationChange);

        element.onchange = function () {
            //Should never have updates pushed from validation msgElement
            $msgElement.text("readonly error");
        };

        function onValidationChange() {
            var errors = entity.entityAspect.getValidationErrors(propName);
            var message = "";
            if (errors.length > 0) {
                message = errors[0].errorMessage;
            }

            if (message) {
                $groupElement.addClass('has-error');
            }
            else {
                $groupElement.removeClass('has-error');
            }

            $msgElement.text(message);
        }

    }
    //Not interested in changes to valueAccessor - it is only the fieldName.
    //update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-15T09:17:47.930

Knockout 验证器可以整体使用微风验证：

```
function addKoValidationRules(entity) {
    if (entity.koValidationRulesAdded) {
        return;
    }
    entity.entityType.dataProperties.forEach(function (property) {
        entity[property.name].extend({
            validation: {
                validator: function () {
                    // manual validation ensures subscription to observables which current field depends on
                    // entity is added to context for retrieving other properties in custom validators
                    entity.entityAspect.validateProperty(property.name, { entity: entity });
                    var errors = entity.entityAspect.getValidationErrors(property.name);
                    if (!errors.length) {
                        return true;
                    }
                    this.message = errors[0].errorMessage;
                    return false;
                },
                message: ''
            }
        });
    });
    entity.koValidationRulesAdded = true;
} 
```

# r - 以下错误是什么意思：TopologyException：发现LINESTRING之间的非非非交集

> ID：13662448
> 
> 赞同：5
> 
> 时间：2012-12-01T18:35:59.147
> 
> 标签：r, ggplot2, rgdal

我正在尝试强化使用 rgdal 加载到 R 中的形状文件，但出现以下错误：

```
"Error: TopologyException: found non-noded intersection between LINESTRING 
        (34.7279 1.59723, 34.7278 1.59729) and LINESTRING 
         (34.7278 1.59723, 34.7278 1.59729) at 34.727793021883102 1.5972887049072426" 
```

我正在使用来自 maplibrary.org 的非洲大陆的形状文件。它可以从我的保管箱中获得： [https ://www.dropbox.com/s/etqdw3nky52czv4/Africa%20map.zip](https://www.dropbox.com/s/etqdw3nky52czv4/Africa%20map.zip)

我正在使用以下代码：

```
library(rgdal)
library(ggplot2)

africa = readOGR("Africa_SHP",    layer = "Africa")
africa.map = fortify(africa, region="COUNTRY") 
```

我得到了我之前提到的错误。我认为 R 的多边形存在一些问题 - 有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T17:22:05.050

正如您从评论中看到的那样，mdsumner 和 agstudy 能够回答为什么会发生这种情况，尽管 agstudy 无法使用可用的数据集重新创建它。我确实找到了解决此问题的方法。

```
library(rgdal)
library(rgeos)
library(ggplot2)
#LOADING IN DATA
africa = readOGR("directory", layer="filename")
#FIXING THE NON-NODED INTERSECTS#
africa = gBuffer(africa, width=0, byid=TRUE)
africa.map = fortify(africa, region="ID") 
```

# sql - 从星期一到星期日按星期几排序

> ID：13662451
> 
> 赞同：25
> 
> 时间：2012-12-01T18:36:22.910
> 
> 标签：sql, oracle, sql-order-by

如果我写

```
select ename, to_char(hiredate,'fmDay') as "Day" order by "Day"; 
```

然后它根据 Day 对结果进行排序；从周五开始，然后是周一和上周三，就像按字符排序一样。

但我想按星期几排序；从周一到周日。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-01T18:50:01.990

你按你的顺序得到它，因为你是按字符串排序的（这不起作用，因为你没有从任何东西中选择）。

您可以按用于以数字形式创建星期几的[格式模型](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#i34924)`D`订购，但由于星期日是 1，我建议使用`mod()`它来完成这项工作。

即假设桌子

```
create table a ( b date );

insert into a
 select sysdate - level
  from dual
connect by level <= 7; 
```

这会起作用：

```
select mod(to_char(b, 'D') + 5, 7) as dd, to_char(b, 'DAY')
  from a
 order by mod(to_char(b, 'D') + 5, 7) 
```

这是一个要演示的[SQL Fiddle 。](http://www.sqlfiddle.com/#!4/59e8f/18)

在您的情况下，您的查询将变为：

```
select ename, to_char(hiredate,'fmDay') as "Day" 
  from my_table
 order by mod(to_char(hiredate, 'D') + 5, 7) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-03-18T08:55:11.137

```
SELECT
     *
FROM
     classes
ORDER BY 
     CASE
          WHEN Day = 'Sunday' THEN 1
          WHEN Day = 'Monday' THEN 2
          WHEN Day = 'Tuesday' THEN 3
          WHEN Day = 'Wednesday' THEN 4
          WHEN Day = 'Thursday' THEN 5
          WHEN Day = 'Friday' THEN 6
          WHEN Day = 'Saturday' THEN 7
     END ASC 
```

假设用户有一个名为 classes 的表，该表中用户有 class_id（主键）、类名、Day。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-09-14T12:48:50.723

当您可以添加另一列对应天数的 1-7 列然后按此列排序时，为什么要复杂化...

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-12-01T18:47:11.173

看看其他格式的`TO_CHAR`. 而不是 'fmDay' 使用 'D' 它将为您提供从 1 到 7 的星期几。然后您可以轻松地对其进行排序。

以下是日期格式列表： http: [//docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements004.htm)

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2016-09-18T21:59:47.700

我刚刚遇到了同样的要求——按星期几排序查询结果，但不是从星期日开始。我在 Oracle 中使用以下查询从星期一开始。（修改它以在一周中的任何一天开始订购，例如，将“MONDAY”更改为“TUESDAY”。）

```
SELECT ename, to_char(hiredate, 'fmDAY') AS "Day" 
FROM emp
ORDER BY (next_day(hiredate, 'MONDAY') - hiredate) DESC 
```

或者：

```
SELECT ename, to_char(hiredate, 'fmDAY') AS "Day"
FROM emp
ORDER BY (hiredate - next_day(hiredate, 'MONDAY')) 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2019-05-13T12:49:58.730

将星期几映射到值 1-7的`D`格式掩码。`to_char`

但！

其输出取决于客户端对 NLS_TERRITORY 的设置。美国认为星期日是第一天。而世界其他大部分地区认为星期一是开始：

```
alter session set nls_territory = AMERICA;

with dts as (
  select date'2018-01-01' + level - 1 dt 
  from   dual
  connect by level <= 7
)
select to_char ( dt, 'Day' ) day_name,
       to_char ( dt, 'd' ) day_number
from   dts
order  by day_number;

DAY_NAME    DAY_NUMBER   
Sunday       1             
Monday       2             
Tuesday      3             
Wednesday    4             
Thursday     5             
Friday       6             
Saturday     7  

alter session set nls_territory = "UNITED KINGDOM";

with dts as (
  select date'2018-01-01' + level - 1 dt 
  from   dual
  connect by level <= 7
)
select to_char ( dt, 'Day' ) day_name,
       to_char ( dt, 'd' ) day_number
from   dts
order  by day_number;

DAY_NAME    DAY_NUMBER   
Monday       1             
Tuesday      2             
Wednesday    3             
Thursday     4             
Friday       5             
Saturday     6             
Sunday       7 
```

遗憾的是，与许多其他 NLS 参数不同，您不能将 NLS_TERRITORY 作为第三个参数传递`to_char`：

```
with dts as (
  select date'2018-01-01' dt 
  from   dual
)
select to_char ( dt, 'Day', 'NLS_DATE_LANGUAGE = SPANISH' ) day_name
from   dts;

DAY_NAME    
Lunes  

with dts as (
  select date'2018-01-01' dt 
  from   dual
)
select to_char ( dt, 'Day', 'NLS_TERRITORY = AMERICA' ) day_name
from   dts;

ORA-12702: invalid NLS parameter string used in SQL function 
```

所以任何依赖于`D`排序的解决方案都是一个错误！

为避免这种情况，请从日期中减去最近的星期一（如果今天是星期一，则最近的星期一 = 今天）。您可以使用`IW`格式掩码执行此操作。它返回 ISO 周的开始。总是星期一：

```
with dts as (
  select date'2018-01-01' + level - 1 dt 
  from   dual
  connect by level <= 7
)
select to_char ( dt, 'Day' ) day_name,
       ( dt - trunc ( dt, 'iw' ) ) day_number
from   dts
order  by day_number;

DAY_NAME    DAY_NUMBER   
Monday                   0 
Tuesday                  1 
Wednesday                2 
Thursday                 3 
Friday                   4 
Saturday                 5 
Sunday                   6 
```

对于周日-周六排序，在找到 ISO 周开始之前的日期加一：

```
with dts as (
  select date'2018-01-01' + level - 1 dt 
  from   dual
  connect by level <= 7
)
select to_char ( dt, 'Day' ) day_name,
       ( dt - trunc ( dt + 1, 'iw' ) ) day_number
from   dts
order  by day_number;

DAY_NAME    DAY_NUMBER   
Sunday                  -1 
Monday                   0 
Tuesday                  1 
Wednesday                2 
Thursday                 3 
Friday                   4 
Saturday                 5 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-05-10T19:48:36.127

如果您希望星期一始终被视为一周的第一天，您可以使用：

```
-- Not affected by NLS_TERRITORY
-- ALTER SESSION SET NLS_TERRITORY="AMERICA";  -- Sunday is first day of week
-- ALTER SESSION SET NLS_TERRITORY="GERMANY";  -- Monday is first day of week

SELECT *
FROM tab
ORDER BY 1+TRUNC(dt)-TRUNC(dt,'IW'); 
```

**[db<>小提琴演示](https://dbfiddle.uk/?rdbms=oracle_18&fiddle=7d1083959296ede93359fe9d5d0d1736)**

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-09-06T10:58:41.900

这很简单。

```
SELECT last_name, hire_date,TO_CHAR(hire_date, 'DAY') DAY
FROM employees
ORDER BY TO_CHAR(hire_date - 1, 'd'); 
```

`TO_CHAR(hire_date - 1, 'd')`将“星期一”放入名为“星期日”的框中。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-05-09T07:56:42.737

正如它所说，它*有一个功能*：

```
SELECT *
FROM table
ORDER BY WEEKDAY(table.date); 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-06-12T10:31:52.317

发布答案可能会迟到，但从星期一开始按星期几排序似乎很简单。

```
select hiredate,dayname(hiredate) from emp order by (dayofweek(hiredate)+5)%7; 
```

回答为什么要加 5 ？

因为，在数字中，星期日的值为 1，星期一的值为 2……而星期六的值为 7

因此，从星期一开始，2 + 5 = 7 和 mod(%) 和 7 将为我们提供新值。

您可以更改此数字以从一周中的任何其他日期开始。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-05-13T06:47:12.520

我通过给你一个从 1 而不是 0 开始的结果来改进 Ben 的答案。查询将是这样的：

```
select 
    mod(to_char(b, 'D')+ 5, 7) +1 as dd, 
    to_char(b, 'DAY')
from a
order by mod(to_char(b, 'D')+ 5, 7); 
```

另一方面，如果你希望你的一周从星期日开始，那么你应该使用这个查询：

```
select 
    mod(to_char(b, 'D')+ 6, 7) +1 as dd, 
    to_char(b, 'DAY')
from a
order by mod(to_char(b, 'D')+ 6, 7) 
```

希望这可以帮助 ：）

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-03-17T14:33:30.003

这应该在 sql 中解决问题：

```
ORDER BY 
     CASE DATENAME(dw,<<enter your date variable here>>)
          WHEN 'Monday' THEN 1
          WHEN 'Tuesday' THEN 2
          WHEN 'Wednesday' THEN 3
          WHEN 'Thursday' THEN 4 
          WHEN 'Friday' THEN 5 
          WHEN 'Saturday' THEN 6
          WHEN 'Sunday' Then 7
     END ASC; 
```

当然，如果您想要不同的顺序，您只需在之后切换值。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-06-17T10:08:45.960

至少对于 Postgres，要让星期一始终是第 1 天，请使用`TO_CHAR(b, 'ID')`返回 ISO 8601 一周中的一天 - 星期一 (1) 到星期日 (7)。

这是国际标准组织 (ISO) 的一周中的一天，因此在“ID”中的 D 前面是 I。

[https://www.postgresqltutorial.com/postgresql-to_char/](https://www.postgresqltutorial.com/postgresql-to_char/)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2019-05-15T05:39:20.620

我有一些简单的想法希望你喜欢。我不知道您使用的是哪个 sql，所以请更正语法错误。

```
select ename, to_char(hiredate,'fmDay') as "Day" from ABC_TABLE
JOIN (VALUES (1,'Monday'),(2,'Tuesday'),(3,'Wednesday'),(4,'Thursday'),(5,'Friday'),(6,'Saturday'),(7,'Sunday')) weekdays(seq,[Days]) on
ABC_TABLE.to_char(hiredate,'fmDay') = weekdays.[Days]
order by weekdays.seq; 
```

我你想在一周结束后下周开始，然后找到一个月的季度并按顺序添加。

仅用于查找 Quarter in(MSSQL)：`select DatePart(QUARTER, cast(cast(mydate as char(8)) as date))`

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-05-13T13:54:56.940

```
with s as (select trunc(sysdate) + level dt from dual connect by level <= 7)
select to_char(dt, 'fmDay', 'nls_date_language=English') d
from s
order by dt - trunc(dt, 'iw');

D                                   
------------------------------------
Monday
Tuesday
Wednesday
Thursday
Friday
Saturday
Sunday

7 rows selected. 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-02-15T15:49:37.580

我认为这为时已晚，但如果其他人需要，我会将其留在这里。

您可以按星期几订购，但这取决于您的会话区域。

为了显示领土，您可以简单地执行以下查询：

```
SELECT * FROM V$NLS_PARAMETERS WHERE parameter = 'NLS_TERRITORY'; 
```

`NLS_TERRITORY`指定区域的名称，该区域的日期和星期编号要遵循其约定。

回到前面的查询，如果你有`AMERICA`as 值，那么 Monday 的值为 2。

要从周一到周日订购您的结果，您至少有 2 条道路：

### 1- 减少一天`hire_date`：

```
SELECT * FROM employees ORDER BY TO_CHAR(hire_date - 1, 'd'); 
```

### 2- 将区域更改为以 1 作为星期一值的值，例如`FRANCE`：

```
ALTER SESSION SET NLS_TERRITORY = 'FRANCE';

SELECT * FROM employees ORDER BY TO_CHAR(hire_date, 'd'); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2022-02-11T01:40:13.973

这是我的解决方案。

```
select ename, to_char(hiredate,'fmDay') "Day"
from employees
order by DECODE(to_number(to_char(hiredate ,'D'))-1,
                                                0, 7,
                to_number(to_char(hiredate ,'D'))-1); 
```

基本上使用 to_char 函数中的 'D' 格式将日期转换为数字。

```
to_number(to_char(hire_date ,'D') 
```

但这会导致星期日为 1，星期一为 2，依此类推，所以我减去 1 使星期一为 1。

```
(to_number(to_char(hire_date ,'D') - 1 
```

然后我使用 DECODE 函数基本上说如果 0，则 7，否则为原始数字。这只会使星期日变成 7 而不是 0，其他一切都在适当的位置（星期一是 1，星期二是 2……依此类推）。

```
DECODE(to_number(to_char(hire_date ,'D'))-1,
                                                0, 7,
                to_number(to_char(hire_date ,'D'))-1); 
```

# google-drive-api - 从 google-Drive 公共文件夹访问 Google-drive API

> ID：13662452
> 
> 赞同：1
> 
> 时间：2012-12-01T18:36:25.033
> 
> 标签：google-drive-api

我正在尝试从 google drive 公用文件夹运行[此处](https://developers.google.com/drive/quickstart-js#step_2_set_up_the_sample)显示的示例，但我一直收到 400（错误请求）。

我只是不知道是否有可能完成我正在尝试做的事情。

这是我在家庭服务器上启动示例时得到的输出

```
GET https://accounts.google.com/o/oauth2/auth?client_id=542813617254.apps.googleusercontent.com&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive&immediate=true&redirect_uri=postmessage&origin=http%3A%2F%2Fda515.no-ip.org&proxy=oauth2relay389420508&response_type=token&state=449660269&authuser=0 400 (Bad Request) cb=gapi.loaded_0:126
(anonymous function) cb=gapi.loaded_0:126
_.yl cb=gapi.loaded_0:122
(anonymous function) cb=gapi.loaded_0:121
(anonymous function) cb=gapi.loaded_0:120
_.vc cb=gapi.loaded_0:57
_.Eb 
```

这是我从 Google Drive 中的公共文件夹中获取的内容

```
GET https://accounts.google.com/o/oauth2/auth?client_id=542813617254.apps.googleusercontent.com&scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive&immediate=true&redirect_uri=postmessage&origin=https%3A%2F%2Fgoogledrive.com&proxy=oauth2relay247984856&response_type=token&state=819470227&authuser=0 400 (Bad Request) cb=gapi.loaded_0:126
(anonymous function) cb=gapi.loaded_0:126
_.yl cb=gapi.loaded_0:122
(anonymous function) cb=gapi.loaded_0:121
(anonymous function) cb=gapi.loaded_0:120
_.vc cb=gapi.loaded_0:57
_.Eb 
```

我检查了 o2Auth 看起来不错

授权的重定向 URI

[http://da515.no-ip.org/oauth2callback](http://da515.no-ip.org/oauth2callback)

[http://gdriv.es/danielo515/oauth2callback](http://gdriv.es/danielo515/oauth2callback)

授权的 JavaScript 起源

[https://da515.no-ip.org/](https://da515.no-ip.org/)

~~我不知道出了什么问题~~ 好吧，我知道问题所在，但我不知道确切的问题是什么。

对于我的家庭服务器只是错误的方向，https 或 http，我不确定什么是正确的，因为我可以同时使用它们。

但是，对于 google Drive 公共文件夹，我遇到了同样的问题，因为我无法将 googledrive 方向添加到 auth 字符串

# android - 模块化 android 应用程序 - 在 Google Play 中隐藏子 APK

> ID：13662455
> 
> 赞同：1
> 
> 时间：2012-12-01T18:36:37.553
> 
> 标签：android, modularity

我的想法是拥有一个带有模块列表的核心应用程序。模块将是从 Google Play 下载的子 APK。用户选择一个模块，适当的应用程序将运行（使用意图）或从 Google Play 下载（然后运行）。

是否可以在 Google Play 中隐藏子 APK，但仍允许直接下载？将有大约 200 个模块，我想对核心应用进行评分。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:00:49.920

不，它不可能隐藏某些东西并仍然可以下载。

# wordpress - 如何根据之前在 Wordpress 中选择的选项动态填充下拉列表

> ID：13662458
> 
> 赞同：0
> 
> 时间：2012-12-01T18:37:01.347
> 
> 标签：wordpress, jquery

我有一个用户表单，其中包含我使用 wp_dropdown_categories 填充的下拉框

代码：

```
<p class="optional"><label for="job_term_area"><?php _e('Job Area', 'appthemes'); ?>
</label> <?php
            $sel = 0;
            if (isset($posted['job_term_area']) &&
 $posted['job_term_area']>0) $sel = $posted['job_term_area']; 
            $args = array(

                'orderby'            => 'name', 
                'order'              => 'ASC',
                'name'               => 'job_term_area',
                'hierarchical'       => 1, 
                'echo'               => 0,
                'class'              => 'job_area',
                'selected'           => $sel,
                'taxonomy'           => 'job_area',
                'hide_empty'         => false
            );
            $dropdown = wp_dropdown_categories( $args );

            $dropdown = str_replace('class=\'job_area\' 
   >','class=\'job_area\' ><option value="">'.__('Select an Area&hellip;', 
  'appthemes').'</option>', $dropdown);
            echo $dropdown; ?> </p> 
```

如您所见，我已经设置了一个称为工作区域的分类法，并通过将它们添加为类别来添加区域。

![在此处输入图像描述](../Images/d70577441cde9ef99411123793d60fa6.png)

我想根据另一个下拉列表过滤此列表，以便您拥有：

选择国家=英格兰（父母）-buckinghamshire（孩子）-bedforshire（孩子）

然后在下拉列表中填充所有县列表。

我正在考虑在分类中使用父子。

问题是如何让第二个下拉列表更新 - 我熟悉 jquery，但我坚持使用实现这一目标的最佳方法......？

任何指导将不胜感激...

我希望这是有道理的，这是漫长的一天...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:49:56.717

有许多带有 AJAX 集成的插件可以从头开始简化此操作。“jquery cascade select”的网络搜索有很多结果

这里有一些例子：

[http://www.prodiven.com/jcombo/](http://www.prodiven.com/jcombo/)

[http://code.google.com/p/jquery-cascade/](http://code.google.com/p/jquery-cascade/)

[https://github.com/jadb/jquery-cascade](https://github.com/jadb/jquery-cascade)

# android - android开发中列表视图的位置

> ID：13662460
> 
> 赞同：0
> 
> 时间：2012-12-01T18:37:17.257
> 
> 标签：android, listview, android-listview

我正在尝试在 android 开发中获取列表视图的位置。我想获取位置值并将其保存到 pref 文件中。我的代码是

```
public class Browse extends Activity {

private ListView mainListView;  
private ArrayAdapter<Card> listAdapter; 
public static final String userPrefs = "UserPrefs";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.layout2);

    mainListView = (ListView) findViewById( R.id.mainListView);  

    DatabaseHandler dh = new DatabaseHandler(this);

    // Remember to drop existing table if it exists
    dh.removeAll();

    // Insert 4 Lecturers into the database
    Log.d("Database: ", "Inserting values..");
    dh.addCard(new Card(1, "Katniss Evergreen", "11", "33", "55", "44",     R.drawable.katniss));
    dh.addCard(new Card(2, "Peeta Melark", "49", "44", "11", "65", R.drawable.peeta));
    dh.addCard(new Card(3, "Gale Hawthrone", "87", "32", "98", "50", R.drawable.gale));
    dh.addCard(new Card(4, "Haymitch", "30", "32", "45", "31", R.drawable.haymitch));
    dh.addCard(new Card(5, "Effie Trinket", "65", "54", "21", "34", R.drawable.effie));
    dh.addCard(new Card(6, "President Snow", "23", "45", "67", "21", R.drawable.snow));

    List<Card> list = dh.getAll();  

    // Create ArrayAdapter using the list of lecturers
    listAdapter = new ArrayAdapter<Card>(this, R.layout.simplerow, list);

    // Set the ArrayAdapter as the ListView's adapter.  
    mainListView.setAdapter( listAdapter );  

    mainListView.setOnItemClickListener(new OnItemClickListener() {

    @Override
    public void onItemClick(AdapterView<?> parent, View v, int position,
            long id) {
        // TODO Auto-generated method stub
        String value = mainListView.getItemAtPosition(position).toString();
        SharedPreferences sp;
        sp = getSharedPreferences(userPrefs, Activity.MODE_PRIVATE); 
        SharedPreferences.Editor editor = sp.edit();
        editor.putString("name", value);
        editor.commit();
    }
    }); 

}

} 
```

这可行，但它保存了实际名称，所以如果我单击 Katniss Evergreen，它将保存名称“Katniss Evergreen”。我不想要这个我想要位置值，比如 Katniss 为 1，Peeta 为 2 等。有人知道我该怎么做吗？我整个周末都在为此工作，只是无法理解它:(我对此很陌生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:48:28.120

如果要将位置保存为解析为字符串的数字，请使用：

```
 String pos = Integer.toString(position); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:54:30.993

您想从列表中获取位置还是从 Card 对象中获取值？

如果来自列表而不是您将`position`参数传递给`onClick`.

否则，尝试获取`Card`对象并从中获取价值。

```
@Override
public void onItemClick(AdapterView<?> parent, View v, int position,
        long id) {
    Card card  = (Card) mainListView.getItemAtPosition(position);
    int value = card.getId(); // Or other method

    SharedPreferences sp;
    sp = getSharedPreferences(userPrefs, Activity.MODE_PRIVATE); 
    SharedPreferences.Editor editor = sp.edit();
    editor.putInt("name", value);
    editor.commit();
} 
```

# c# - 有没有办法在 Windows 7 和 Visual Studio 2012 中创建 Windows Phone 8 应用程序

> ID：13662462
> 
> 赞同：3
> 
> 时间：2012-12-01T18:37:20.900
> 
> 标签：c#, windows-phone-8, windows-8, windows-7

有没有办法在 Visual Studio 2012 和 Windows 7 中创建和测试应用程序（Windows Phone 8 模拟器）？我从 Dreamspark 获得了所有正确的 SDK 等，但我似乎找不到在 Windows 7 中执行此操作的方法。它仅在 Windows 8 中“可行”吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T18:43:35.280

可能不是，微软只为 Windows 8 发布了它，但你总是可以拥有一个虚拟机，而且 Dreamspark 也有 Windows 的许可证，所以你不会有任何问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T19:04:12.403

不行。在 Win7 上运行 WP8 模拟器将不起作用。WP8 模拟器基于 Win7 不支持的 Hyper-V。您仍然可以在 WIn7 上开发 WP8 应用程序并部署到真实设备。或者您应该使用您的 fre dreampark 许可证将您的 Win7 安装升级到 Win8，然后您可以使用 WP8 模拟器。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T20:29:31.970

不，WP8 SDK 只能在 Windows 8 上运行。一个原因是 Windows 8 中的管理程序用于模拟或虚拟化 Windows phone 8 机器。当然还有营销。

# calendar - 在谷歌日历中导入时，不排除重复事件中的排除日期

> ID：13662467
> 
> 赞同：1
> 
> 时间：2012-12-01T18:38:03.503
> 
> 标签：calendar, google-calendar-api, icalendar

我正在导出一个重复事件，我在其中指定了一些排除日期。这就是我指定它们的方式

```
EXDATE:20121202T230000Z,20121204T230000Z,20121206T230000Z 
```

他们在祖鲁（格林威治标准时间）时间。如果在 Outlook 中导入相同的事件，则排除按预期工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T19:33:22.550

你的 DTSTART 是什么？那是一个日期时间还是只是一个日期？还有你的规则是什么？在下面尝试它在谷歌日历上工作：

```
BEGIN:VCALENDAR
VERSION:2.0
METHOD:PUBLISH
PRODID:ical2list
BEGIN:VEVENT
DTSTART:20121201T230000Z
RRULE:FREQ=DAILY
UID:so13662467
DTSTAMP:20121201T230000Z
EXDATE:20121202T230000Z,20121204T230000Z,20121206T230000Z
END:VEVENT
END:VCALENDAR 
```

# javascript - 应用程序按需发送 JSON，而不是在创建时发送 (Ext-JS 4)

> ID：13662471
> 
> 赞同：1
> 
> 时间：2012-12-01T18:38:24.780
> 
> 标签：javascript, extjs, extjs4

![在此处输入图像描述](../Images/2b01dbe3b304b9950efc069941e975aa.png)

当我启动我的应用程序时，我的计算机会加载 15 秒。它加载了一大堆我想要动态加载的网格和东西。

如果我想“按需”加载这些网格，我该怎么做？我必须动态加载控制器还是只加载网格？如何？

谢谢你。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T09:59:21.450

这取决于您的应用程序结构和商店的配置。以下是您可以应用的一些调整：

*   从商店中删除 autoLoad 并记住，如果您不应用分页或过滤，您现在需要关心加载。**为什么？**您放置在控制器存储数组中的任何存储都将在控制器实例化后立即实例化，这很好，但如果 autoLoad 为真，则会导致存储的加载。根据实现，商店将再次加载，例如 pagingToolbar 将再次启动加载，因此第一个可以幸免。

*   应用一种延迟控制器加载。**意义**; 仅在开始时将该控制器应用到您需要的应​​用程序[控制器阵列中。](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application-cfg-controllers)仅在需要时通过 `this.application.getController('ControllerName')`在控制器内或直接在应用程序控制器上调用来加载任何其他控制器。这将为您提供 conrtoller 实例并初始化控制器（这是相当新的，所以我不知道什么时候会自动发生。我检查 4.1.3）。无论如何，延迟控制器初始化将推迟对这些控制器中的每一个的所有 Ext.Loader 请求，直到控制器被初始化，所以我猜这对你最有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T09:36:30.283

在我看来，这些脚本好像是由 ExtJS 加载器本身加载的，我想它正在加载它认为它需要的内容，因为基于提供的设置的页面结构。

阅读加载器文档以了解它在做什么以及为什么：

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Loader](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Loader)

# linux - 使用 cmake 从整个项目中创建一个静态库

> ID：13662474
> 
> 赞同：7
> 
> 时间：2012-12-01T18:38:50.887
> 
> 标签：linux, cmake

例如，c++-project`foo`由 cmake 维护。一个人想要创建一个库`libfoo.a`（在整个源代码树上创建所有类/方法/函数），以便创建可以链接到库的程序`-lfoo`。

好的，现在让我们考虑一个玩具示例，问题就很清楚了。目录`foo`（项目的根目录）包含目录`a`和`b`. 创建了两个`CmakeLists.txt`：

```
# a/CMakeLists.txt
add_library(A <a_sources>)
# b/CMakeLists.txt
add_library(B <b_sources>) 
```

一个`CMakeLists.txt`用于根目录：

```
add_subdirectory(a)
add_subdirectory(b)
add_library(foo <foo_sources>
target_link_libraries(foo A B) 
```

这对我来说是一个惊喜：**在构建 libfoo.a 之后，只包含来自 foo_sources 的方法**，并且`a_sources`,`b_sources`被排除在外。在使用同一个项目构建可执行文件的情况下，这是可以的：在创建可执行文件时，cmake“猜测”`a`并且`b`如果它链接到`foo`. 但是如果在“外部”项目中创建可执行文件以使用`foo`必须链接的库`-lfoo -la -lb`，现在想象一个有很多子目录的项目 - 如何处理它？所以问题是“如何创建一个库，使用 cmake 聚合整个项目的方法？”

谷歌搜索让我找到了最近嵌入（出现在 2.8.8 中）的`OBJECT library`机会。[这里](http://www.vtk.org/Wiki/CMake/Tutorials/Object_Library)展示了使用它的好例子。现在可以解决上面的问题：

```
# a/CMakeLists.txt
add_library(A OBJECT <a_sources>)
# b/CMakeLists.txt
add_library(B OBJECT <b_sources>)
# foo/CMakeLists.txt
add_subdirectory(a)
add_subdirectory(b)
add_library(foo <foo_sources> $<TARGET_OBJECTS:A> $<TARGET_OBJECTS:B>) 
```

问题似乎解决了，不幸的是，还没有完全解决。

如果依赖链长于 2，例如，`foo`取决于`A`，取决于`B`，问题仍然存在。那是因为，

> 对象库可能只包含编译成对象文件的源（和头文件）。

和

> 无法导入、导出、安装或链接对象库。

（引用来自同一[链接](http://www.vtk.org/Wiki/CMake/Tutorials/Object_Library#Restrictions)）

我尝试了几种组合，`target_link_library()`尝试`add_library(), add_library(... OBJECT ..)`链接`A`和链接但没有成功（cmake-process期间出错。）`B``foo`

我必须失去一些简单的东西，请帮忙，谢谢！我不确定它是否重要：项目在 linux 上维护。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T21:09:10.160

我认为你在“取决于”这个词上纠结了。如果您正在构建一个名为的库`foo`，它有两个部分，`A`and ，是否依赖于;`B`无关紧要。图书馆应该包含两者。您显示的 CMake 代码将正确构建。`A``B``foo`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T04:31:41.573

是的，我支持回答@Pete Becker@。但也应该说，这些库`$<TARGET_OBJECTS:A>`实际上`$<TARGET_OBJECTS:B>`根本不是库，而是 cmake 对象模块的内部列表。目标模块的编译（自动生成的源除外）之间没有依赖关系，因此它们可以按任何顺序并行完成。

`TARGET_OBJECTS`我想你的意图更正确的术语是在单个对象库下收集几个。写不出来真是太可惜了`add_library(B OBJECT b.cpp $<TARGET_OBJECTS:A>)`。但是你总是可以自己实现这个：

```
add_library(A OBJECT a.cpp)
set(A_OBJECTS $<TARGET_OBJECTS:A>)

add_library(B OBJECT b.cpp)
set(B_OBJECTS $<TARGET_OBJECTS:B> ${A_OBJECTS})

add_library(foo ${B_OBJECTS}) 
```

`_OBJECTS`即，只要您想将这些对象库包含在库中、可执行文件中或作为具有该`_OBJECTS`风格的其他对象库的一部分，只需创建特殊变量即可使用它们。

# java - 运行 Web 应用程序时找不到适合 jdbc:oracle:thin:@localhost:1521:XE 的驱动程序

> ID：13662475
> 
> 赞同：2
> 
> 时间：2012-12-01T18:38:55.157
> 
> 标签：java, oracle, hibernate

我遇到了一个奇怪的问题`No suitable driver found for jdbc:oracle:thin:@localhost:1521:XE`

当我运行任何 DAO 的 JUNIT 测试用例时，它插入正常。但是当我在服务器上运行时，它给了`No suitable driver found for jdbc:oracle:thin:@localhost:1521:XE`

我已将 ojdbc14.jar 添加到 WEB-INF/lib 文件夹。

这是 jdbc.properties

```
jdbc.driverClassName=oracle.jdbc.driver.OracleDriver
jdbc.url=jdbc:oracle:thin:@127.0.0.1:1521:XE
jdbc.username=system
jdbc.password=pwd 
```

请帮我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T19:37:40.147

问题是它没有加载 Oracle 驱动程序

在Controller中添加了这个，一切正常。

```
static{
    try {
        Class.forName ("oracle.jdbc.OracleDriver");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T18:48:54.733

如果您的数据库连接模块在服务器中，您必须将驱动程序 jar 添加到容器中，而不是使用您的 WAR 部署它。这是一个类路径问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-02T14:11:44.903

你必须像我一样将 ojdbc6.jar 导入到库中

1.  在netbeans的左侧有一个项目栏
2.  右键单击库并选择“添加 JAR/FOLDER”
3.  然后选择 ojdbc.jar
4.  然后瞧：D

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-18T22:26:08.943

对新手而言。下载[ojdbc14.jar](http://www.oracle.com/technetwork/apps-tech/jdbc-10201-088211.html)文件

然后右键单击您正在处理的文件夹并转到其属性

[![在此处输入图像描述](../Images/f993b0077eac9263b6e956a10be7df06.png)](https://i.stack.imgur.com/0FKtc.jpg)

单击库，然后找到下载的 `ojdbc14.jar`文件将其添加到库中

[![在此处输入图像描述](../Images/bb646632ecc5de15ebb8c26011db8e2e.png)](https://i.stack.imgur.com/n0ZIO.jpg)

从那里你很高兴

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-19T22:14:32.417

用这个作为解决方案，就像一个魅力！谢谢拉梅什·科塔

```
 static{
        try {
            Class.forName ("oracle.jdbc.OracleDriver");
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } } 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2018-08-13T10:54:17.570

在 WEB-INF/lib ojdbc14-10.2.0.2.0 中，应该有 ojdbc8 或 ojdbc6。我遇到了同样的问题并通过这种方式解决。

见附件。

![附加图片](../Images/1aca7fd9d8d2813adbd655e88d4320cf.png)

# html - 使用 inline-block 未正确对齐 Div 框

> ID：13662476
> 
> 赞同：22
> 
> 时间：2012-12-01T18:39:01.950
> 
> 标签：html, alignment, css

我有一些非常简单的代码，非常适合我想要实现的外观。我有两个显示为“盒子”的 div，它们包含在一个外部 div 中，即 boxContainer。我让盒子彼此相邻而不是一个在另一个之上，它们在屏幕中间完美对齐。当浏览器宽度变小/变大时，框的宽度会缩小/变大，如果浏览器窗口变得太小，框会重新定位为一个在另一个之上，同时保持在页面的中心。完美的。

唯一的问题是盒子在底部而不是顶部对齐。因为第二个框内的文本较少，所以它被推到页面下方以与第一个框的底部对齐。我希望它们在顶部对齐。

我相信这是由 display:inline-block 引起的，但我不知道为什么，我不知道如何修复它并保持上面列出的相同功能。

如果你能帮助我，我一定会很感激的！！

```
#boxContainer {
    width:80%;
    margin:0 auto;
    text-align:center;
}
.box {
    display:inline-block;
    width:35%;
    margin:20px;
    border:solid 5px;
    border-radius:40px;
}
```

```
<div id="boxContainer">
    <div class="box">
        <h3>BOX 1</h3>
        <p>TEXT GOES HERE, blaha dlfjas fakfasldfjas fkdf lasfjwio we dklajdakfliwo wklw jdkas fdsaj fjdsfwoif ajkdl kdalfej woja dklf woef adkiweoj daljidw odal fjwe ewew kalwoie ea falk blaha dlfjas fakfasldfjas fkdf lasfjwio we dklajdakfliwo wklw jdkas fdsaj fjdsfwoif ajkdl kdalfej woja dklf woef adkiweoj daljidw odal fjwe ewew kalwoie ea falk</p>
    </div>

    <div class="box">
        <h3>BOX 2</h3>
        <p>TEXT GOES HERE, blaha dlfjas fakfasldfjas fkdf lasfjwio we dklajdakfliwo wklw jdkas fdsaj fjdsfwoif ajkdl kdalfej woja dklf woef adkiweoj daljidw odal fjwe ewew kalwoie ea falk</p>
    </div>
</div>
```

图片

![在此处输入图像描述](../Images/e6760436ac2ff1e9f1d1ca194b34d31a.png)

谢谢！

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-12-01T18:42:04.737

由于盒子已经存在`inline-block`，您可以添加`vertical-align: top`到`.box`样式中。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-12-01T18:42:23.427

```
.box {
  display: inline-block;
  border: solid 1px;
  vertical-align: top;
  width: 40%;
}
```

```
<div id="boxContainer">
  <div class="box">
    <h3>BOX 1</h3>
    <p>Lorem ipsum dolor sit amet, altera interesset pri an. Et aeque interpretaris vel, at quo summo deleniti disputationi. Eu inimicus splendide duo, soleat intellegam ut per. Sint impedit recusabo ex vix, aliquid adipisci consequat no ius. Eu possim consequat eum, sea cu quaeque impedit, est fuisset accusamus definiebas ad.</p>
  </div>

  <div class="box">
    <h3>BOX 2</h3>
    <p>Viris eruditi consectetuer ei mea, eu nulla ridens officiis duo. In atomorum forensibus abhorreant quo, id nec aperiam dissentiet.</p>
  </div>
</div>
```

您可以使用`vertical-align`CSS 属性。

它仅对*inline*和*inline-block*元素有效。

这是关于[vertical-align](https://www.impressivewebs.com/css-vertical-align/)的一个很好的参考。

# java - 查找第二个和第三个最大元素数组java

> ID：13662478
> 
> 赞同：0
> 
> 时间：2012-12-01T18:39:14.820
> 
> 标签：java, arrays, sorting, max

我必须找到第一个、第二个和第三个最大的数组。我知道我可以简单地对其进行排序并返回数组 [0]、数组 [1]、数组 [3]。但问题是，我需要索引，而不是值。例如，如果我有`float[] listx={8.0, 3.0, 4.0, 5.0, 9.0}`它应该返回 4、0 和 3。

这是我的代码，但它不起作用：

```
//declaration max1-3        
public void maxar (float[] listx){

    float maxel1=0;
    float maxel2=0;
    float maxel3=0;

    for (int i=0; i<listx.length; i++){
        if(maxel1<listx[i])
        {maxel1=listx[i];
        max1=i;
        }
    }
    listx[max1]=0; //to exclude this one in nextsearch

    for (int j=0; j<listx.length; j++){
        if(listx[j]>maxel2)
        {maxel2=listx[j];
        max2=j;
        }
    }
    listx[max2]=0;

    for (int k=0; k<listx.length; k++){
        if(listx[k]>maxel3)
        {maxel3=listx[k];
        max3=k;
        }
    }
} 
```

我得到 max1 正确，但之后所有元素都变为 0。因此 max2 和 max3 变为 0。请告诉我这个解决方案有什么问题。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:50:58.480

您可以使用单个循环找到三个元素，并且不需要修改数组。

当您遇到一个新的最大元素时，您需要将之前的最大元素和之前的第二大元素向下移动一个位置。

同样，当你找到一个新的第二大元素时，你需要转移`maxel2`到`maxel3`.

您可能希望使用一个数组，而不是使用这三个变量。这将使您能够简化逻辑，并使其易于推广到`k`最大的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:42:53.270

对数组进行 3 次遍历：在第一遍查找值和最大元素的第一个索引`M1`，在第二遍查找值和最大元素的第一个索引`M2`小于`M1`和第三遍查找值/第一个索引`M3 < M2`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T18:53:15.397

试试这个代码它会工作:)

```
 public class Array
    {
  public void getMax( double ar[] )
   {
    double max1 = ar[0]; // Assume the first
    double max2 = ar[0]; // element in the array
    double max3 = ar[0]; // is the maximum element.
    int ZERO = 0; 
     // Variable to store inside it the index of the max value to set it to zero.

    for( int i = 0; i < ar.length; i++ )
    {
        if( ar[i] >= max1)
        {
            max1 = ar[i];
            ZERO = i;
        }
    }

    ar[ZERO] = 0; // Set the index contains the 1st max to ZERO.

    for( int j = 0; j < ar.length; j++ )
    {
        if( ar[j] >= max2 )
        {
            max2 = ar[j];
            ZERO = j;
        }
    }

    ar[ZERO] = 0; // Set the index contains the 2st max to ZERO.

    for( int k = 0; k < ar.length; k++ )
    {
        if( ar[k] >= max3 )
        {
            max3 = ar[k];
            ZERO = k;
        }
    }

            System.out.println("1st max:" + max1 + ", 2nd: " +max2 + ",3rd: "+ max3);                              
   }

public static void main(String[] args)
{
    // Creating an object from the class Array to be able to use its methods.
    Array array = new Array();
    // Creating an array of type double.
    double a[] = {2.2, 3.4, 5.5, 5.5, 6.6, 5.6};

    array.getMax( a ); // Calling the method that'll find the 1st max, 2nd max, and      and 3rd max.
}

  } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-27T05:28:14.383

```
public class ArrayExample {
    public static void main(String[] args) {
        int secondlargest = 0;
        int thirdLargest=0;
        int largest = 0;
        int arr[] = {5,4,3,8,12,95,14,376,37,2,73};
        for (int i = 0; i < arr.length; i++) {
            if (largest < arr[i]) {
                secondlargest = largest;
                largest = arr[i];
            }
            if (secondlargest < arr[i] && largest != arr[i])
                secondlargest = arr[i];
            if(thirdLargest<arr[i] && secondlargest!=arr[i] && largest!=arr[i] && thirdLargest<largest && thirdLargest<secondlargest)
                thirdLargest =arr[i];
        }
        System.out.println("Largest number is: " + largest);
        System.out.println("Second Largest number is: " + secondlargest);
        System.out.println("third Largest number is: " + thirdLargest);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-01T21:10:25.877

我建议进行一次优化而不是三次。下面的代码对我有用。请注意，代码没有断言`listx`至少有 3 个元素。如果它仅包含 2 个或更少元素，则由您决定应该发生什么。

我喜欢这段代码的地方在于它只对数组进行一次传递，在最好的情况下，与进行三次传递相比，它的运行时间更快，其因子与`listx`.

假设*i1*、*i2*和*i3*将三个最大元素的索引存储在 中`listx`，并且*i0*是指向最小元素的*i1、i2*和*i3之一。*一开始，*i1 = i2 = i3*因为我们还没有找到最大的元素。所以让*i0 = i1*。如果我们找到一个新的索引*j*使得`listx[j] > listx[i0]`，我们设置*i0 = j*，用一个导致更大元素的索引替换旧索引。*然后我们找到i1、i2*和*i3*中的索引，它现在导致三个元素中最小的元素，这样我们就可以安全地丢弃*以防出现*新的大元素。

**注意**：这段代码是 C 语言的，所以如果你想使用它，请把它翻译成 Java。我确保使用类似的语法来简化它。（我是用 C 写的，因为我缺少 Java 测试环境。）

```
void maxar(float listx[], int count) {
    int maxidx[3] = {0};

    /* The index of the 3rd greatest element
     * in listx.
     */
    int max_3rd = 0;

    for (int i = 0; i < count; i++) {
        if (listx[maxidx[max_3rd]] < listx[i]) {
            /* Exchange 3rd greatest element
             * with new greater element.
             */
            maxidx[max_3rd] = i;

            /* Find index of smallest maximum. */
            for (int j = (max_3rd + 1) % 3; j != max_3rd; j = (j + 1) % 3) {
                if (listx[maxidx[j]] < listx[maxidx[max_3rd]]) {
                    max_3rd = j;
                }
            }
        }
    }

    /* `maxidx' now contains the indices of
     * the 3 greatest values in `listx'.
     */

    printf("3 maximum elements (unordered):\n");
    for (int i = 0; i < 3; i++) {
        printf("index: %2d, element: %f\n", maxidx[i], listx[maxidx[i]]);
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-05T16:55:56.467

```
def third_mar_array(arr):
    max1=0
    max2=0
    max3=0
    for i in range(0,len(arr)-1):
         if max1<arr[i]:
             max1=arr[i]
             max_in1=i
    arr[max_in1]=0
    for j in range(0,len(arr)-1):
         if max2<arr[j]:
             max2=arr[j]
             max_in2=j
    arr[max_in2]=0
    for k in range(0,len(arr)-1):
         if max3<arr[k]:
             max3=arr[k]
             max_in3=k
    #arr[max_in3]=0
    return max3

n=[5,6,7,3,2,1]

f=first_array(n)
print f 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-06-30T12:18:36.087

```
import java.util.Scanner;

class Main {

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);
        int testcase = sc.nextInt();

        while (testcase-- > 0) {
            int sizeOfArray = sc.nextInt();
            int[] arr = new int[sizeOfArray];
            for (int i = 0; i < sizeOfArray; i++) {
                arr[i] = sc.nextInt();
            }

            int max1, max2, max3;
            max1 = 0;
            max2 = 0;
            max3 = 0;

            for (int i = 0; i < sizeOfArray; i++) {
                if (arr[i] > max1) {
                    max3 = max2;
                    max2 = max1;
                    max1 = arr[i];
                }
                else if (arr[i] > max2) {
                    max3 = max2;
                    max2 = arr[i];
                }
                else if (arr[i] > max3) {
                    max3 = arr[i];
                }
            }

            System.out.println(max1 + " " + max2 + " " + max3);
        }
    }
} 
```

# c# - 在 C# 异步块中绕过全局异常处理程序

> ID：13662479
> 
> 赞同：0
> 
> 时间：2012-12-01T18:39:27.730
> 
> 标签：c#, exception, visual-studio-2012, async-await, windows-phone-8

WP8 SDK 中的以下块可能有什么问题？它会导致抛出未处理的异常，使我在 VS 2012 中的调试会话崩溃：

```
try
        {
            List<StorageFile> files = new List<StorageFile>();
            foreach (StorageFile file in (await ApplicationData.Current.LocalFolder.GetFilesAsync()))
                if (Path.GetExtension(file.Name).ToLower() == ".item") files.Add(file);
            return files;
        }
        catch (Exception e)
        {
            var x = e.Message;
            return new List<StorageFile>();
        } 
```

当我逐步执行时，有问题的语句是 GetFilesAsync()，但我相信在我调用它的时候，它没有理由失败。无论如何，当出现问题时，不应该调用我的异常处理程序吗？

# f# - 如果安装需要 sudo，如何编写 brew 公式？

> ID：13662481
> 
> 赞同：3
> 
> 时间：2012-12-01T18:39:29.747
> 
> 标签：f#, mono, gac, homebrew, sudo

我想编写一个 brew 公式，但它看起来像我在 Mono 的 GAC 中注册的库需要 sudo 权限。这与不 sudoing 的 brew 想法背道而驰。

有解决办法吗？

```
gacutil -i /private/tmp/fsharp-qdRr/fsharp-3.0.24/lib/release/4.0/FSharp.Core.dll -root /Library/Frameworks/Mono.framework/Versions/3.0.1/lib/ -package 4.0
gacutil -i /private/tmp/fsharp-qdRr/fsharp-3.0.24/lib/release/2.1/FSharp.Core.dll -root /Library/Frameworks/Mono.framework/Versions/3.0.1/lib/ -package 2.1
gacutil -i /private/tmp/fsharp-qdRr/fsharp-3.0.24/lib/release/2.0/FSharp.Core.dll -root /Library/Frameworks/Mono.framework/Versions/3.0.1/lib/ -package 2.0
Failure adding assembly /private/tmp/fsharp-qdRr/fsharp-3.0.24/lib/release/2.0/FSharp.Core.dll to the cache: gac directories could not be created, possibly permission issues.
Failure adding assembly /private/tmp/fsharp-qdRr/fsharp-3.0.24/lib/release/4.0/FSharp.Core.dll to the cache: gac directories could not be created, possibly permission issues.
Failure adding assembly /private/tmp/fsharp-qdRr/fsharp-3.0.24/lib/release/2.1/FSharp.Core.dll to the cache: gac directories could not be created, possibly permission issues.make[2]: *** [install-lib-4] Error 1 
```

并且作为安装点提到的目录归根用户所有

```
➜   pwd
/Library/Frameworks/Mono.framework/Versions/3.0.1/lib
➜   ls -ld .
drwxr-xr-x  324 root  admin  11016 Dec  1 17:41 . 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T20:56:57.780

Mono 允许您拥有[多个 GAC 文件夹](http://www.mono-project.com/Assemblies_and_the_GAC#Using_Multiple_GACs)——这样您可以保留每个用户的 GAC（在您具有写入/执行权限的某些文件夹中）和系统范围的 GAC。每当从 GAC 加载程序集时，它将首先搜索用户的 GAC，然后在必要时回退到系统范围的 GAC。

# php - PHP/HTML 语法错误

> ID：13662490
> 
> 赞同：1
> 
> 时间：2012-12-01T18:40:25.920
> 
> 标签：php, html

> **可能重复：**
> [PHP：“注意：未定义的变量”和“注意：未定义的索引”</a>](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)
> 
> [](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)

[](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)

[第一次在这里提问。我正在尝试创建一个小型原始论坛。我基于](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)[此](http://phpeasystep.com/workshopview.php?id=13)：同时在需要的地方对其进行更改。

到目前为止，我已经设置了数据库和所有这些。现在我正在尝试修复 view_topic.php 并且它正在返回`"Notice: Undefined index: id" on line 30 something.` This is line 30: `$id=$_GET['id']`;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:43:08.140

在访问它之前，您应该确保`id`它是一个有效的索引。

```
$id = isset($_GET['id']) ? $_GET['id'] : null; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:47:01.283

> 注意：未定义的索引：

这意味着一段代码试图访问一个不存在的数组元素。

因此，例如：

```
$myArray = Array();  // an empty array
echo $myArray['id']; // print 'id' element

// ^^ Oops! No such element yet! 
```

该`$_GET`数组包含来自*querystring*的参数，它是`?id=1`您的请求 URL 的一部分。

您将需要找出为什么它不包含 URL 中提供的带有 key 的元素`'id'`，`id`然后使用诸如`isset`or之类的函数`array_key_exists`和`if`语句让您的代码决定在缺少该值的情况下该怎么做。

如果您的代码在没有有效值的情况下无法继续，您很可能会显示更有用的错误消息并终止脚本`id`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T20:11:51.413

你确定`id=`存在于 URL 中吗？尝试在代码顶部附近添加以下内容。

```
var_dump($_GET); 
```

[var_dump](http://php.net/manual/en/function.var-dump.php)将有关变量的信息转储到屏幕上。在这种情况下，它将显示`GET`从您的表单发送的所有数据。这是一种调试技术，因此您可以查看您的代码是否收到了您所期望的。如果表单使用`method="post"`并且`id`是表单中的一个字段，那么您将需要使用`$_POST['id']`或`$_REQUEST['id']`访问它。

# eclipse - 如何使用只有一个 GPU 的 Eclipse Nsight 调试 CUDA

> ID：13662491
> 
> 赞同：7
> 
> 时间：2012-12-01T18:40:31.443
> 
> 标签：eclipse, cuda, gpu, nsight

我收到一个错误：“所有 cuda 设备都用于显示，不能在调试时使用”（使用 Ubuntu）

有什么方法可以使用只有一个 GPU 的 Nsight eclipse 进行调试？我见过像“sudo service lightdm stop”这样的解决方案来杀死X，但这也杀死了Nsight eclipse，那有什么意义呢？

更新：由于无法使用运行 X 的同一 GPU 进行调试，我不得不问：如何使用家庭网络中的另一台计算机“远程”访问 Ubuntu，以使 X 桌面渲染将由来宾计算机执行，同时让主机 GPU 运行调试器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T19:20:49.330

通常，不支持在托管 X 显示器的同一个 GPU 上进行调试。从[nsight 入门指南](http://docs.nvidia.com/cuda/nsight-eclipse-edition-getting-started-guide/index.html#linux-requirements)：“*运行 X11（在 Linux 上）或 Aqua（在 Mac 上）的 GPU 不能用于调试 CUDA 应用程序，并且将对调试器中运行的应用程序隐藏。这样的 GPU 仍然可以使用用于分析 GPU 应用程序。* ”

但是，我相信不同的窗口管理器之间实际上存在不同的行为。我有一台带有 Quadro1000M 和 RHEL 6.2（带有 GNOME）的笔记本电脑，带有 CUDA 5.0，我能够进入 nsight EE 中的调试器（项目...构建项目，然后运行...调试）。那时我可以单步执行并在主机代码中设置断点。如果我运行代码完成，我会得到正确的输出。但是，您仍然无法调试设备代码。如果您在设备代码中设置断点（并命中该断点），您将挂起 X 会话。

**编辑：** [CUDA 5.5 及更高](http://docs.nvidia.com/cuda/nsight-eclipse-edition-getting-started-guide/index.html#unique_347065367)版本现在支持在单个 cc3.5 或更高版本 GPU 上进行调试的能力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-25T17:44:17.247

看来您可以使用 CUDA 5.5 在只有一个 GPU 的机器上调试 CUDA 程序。请参见第 1.7.3.2 节。[CUDA_Toolkit_Release_Notes](http://developer.download.nvidia.com/compute/cuda/5_5/rc/docs/CUDA_Toolkit_Release_Notes.pdf)的 CUDA-GDB

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T04:01:15.417

另一种可行的方法是将板载视频输出用于显示器。这样，您就可以使用板载图形进行显示，使用 GPU 进行调试。

为此，您必须：

*   转到 BIOS 并将主显示适配器更改为“板载”（这因制造商而异）
*   将显示器物理连接到板载显示器输出馈送
*   重启然后运行 ​​Nsight

如果您使用的是没有板载显卡的系统，那么您就不走运了！

[这里](http://gputoaster.wordpress.com/2011/05/30/parallel-nsight-debugging-on-a-single-gpu/)的这个人已经能够使用 Visual Studio 和 Nsight 插件在 Windows 中启动并运行它。

**PS 您可能需要编辑您的 xorg.conf 以使 X 使用板载图形而不是您的 Nvidia GPU。**

# c# - 在html c#中的所有标签之间提取单词

> ID：13662493
> 
> 赞同：-2
> 
> 时间：2012-12-01T18:40:37.590
> 
> 标签：c#, html, html-agility-pack

> **可能重复：**
> [在给定 html 中的所有标签之间获取文本并递归遍历链接](https://stackoverflow.com/questions/13662267/getting-text-between-all-tags-in-a-given-html-and-recursively-going-through-link)

如何使用敏捷包提取标签之间的单词和信息？我只是忽略我的 html 代码中的所有标签并获取这些标签之间的所有单词。html代码已被我保存在一个字符串中！现在我想用敏捷包来完成这个？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T18:57:59.707

出色地，

这取决于。例如，如果一个标签有一个类并且它是唯一的——它是一个函数，但是如果有多个标签，你需要根据标签位置来思考和创建你的函数，另一种没有标签的情况，你会必须计算 html 元素；例如，您可能还需要遍历表行。

下面的示例与您需要的类似。（不确定它是否仍然有效，因为如果页面布局发生变化，它可能会失败。）但它给出了这个想法，你可以从那里开始。

PS - 提问时请给出确切的问题，而不是模糊的解释。

```
 String openUrl = @"http://www.ebay.com/sch/-/11724/i.html?_nkw=" + some_part_number + "&_armrs=1&LH_Complete=1";

                HtmlWeb hw = new HtmlWeb();
                hw.UserAgent = "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1)";
                HtmlAgilityPack.HtmlDocument doc = hw.Load(openUrl);

                foreach (HtmlNode nd in doc.DocumentNode.SelectNodes("//tr[@itemprop='offers']"))
                {
                    String title = "";
                    title = Regex.Split(nd.InnerHtml.ToString(), ("title='"))[1].Trim();
                    title = Regex.Split(title, "'")[0].Trim();
                } 
```

# cakephp - CakePHP 2：函数 timeAgoInWords() 的本地化和内部化

> ID：13662495
> 
> 赞同：3
> 
> 时间：2012-12-01T18:40:57.763
> 
> 标签：cakephp, localization, timeago

我的问题是我无法将日期从英语翻译成俄语。我遵循了以下指南：

1.  [国际化和本地化 CakePHP](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html)
2.  [I18N外壳](http://book.cakephp.org/2.0/en/console-and-shells/i18n-shell.html)

我在 AppController.php 中写了这段代码：

```
function beforeFilter() {
    parent::beforeFilter();
    setlocale(LC_ALL, "ru_RU.utf8");
    Configure::write('Config.language', 'rus');
    CakeSession::write('Config.language', 'rus');
} 
```

我添加了一个文件夹“Locale\rus\LC_MESSAGES”并放在文件 default.po 中。顺便说一句，我将所有消息提取到单个文件中。

但实际上：

```
<?php echo $this->Time->timeAgoInWords($feedback['Feedback']['created']); ?> 
```

什么也没做。

```
<?php echo __d('default', $this->Time->timeAgoInWords($feedback['Feedback']['created']), true); ?> 
```

仅将字符串“just now”翻译为俄语，但其他时间格式仍为英语。您可以在下面看到来自 default.po 的翻译示例：

**成功**

```
#: Lib\Cake\Utility\CakeTime.php:842
#: Utility\CakeTime.php:842
msgid "just now"
msgstr "translate" 
```

**失败**

```
#: Lib\Cake\Utility\CakeTime.php:829
#: Utility\CakeTime.php:829
msgid "%d week"
msgid_plural "%d weeks"
msgstr[0] "%d translate"
msgstr[1] "%d translate" 
```

我不明白我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-18T12:16:13.970

要翻译像 Lib\Cake\Utility 文件夹中的 CakePHP 核心字符串，您需要使用不同的翻译域。您的视图的默认域是“默认”，但对于 CakePHP 核心字符串，它是“蛋糕”。

您需要提供“cake.po”而不是“default.po”。否则您的翻译将无效。

# breeze - 微风.js 如何处理安全并避免暴露业务逻辑

> ID：13662496
> 
> 赞同：34
> 
> 时间：2012-12-01T18:40:56.997
> 
> 标签：breeze

我们正在考虑用[微风js](http://www.breezejs.com/)来构建企业应用程序。

微风的美妙之处在于我们可以直接从客户端浏览器执行查询。这允许基于用户输入构建动态查询，而无需加载不必要的数据。我发现，使用 Breeze，我们可以创建业务逻辑，在使用延迟加载策略时将数据传输/传输减少 1/10 甚至更多。使用这样的[查询](http://www.breezejs.com/documentation/projection-queries)

微风万岁！！！

但是业务逻辑安全呢？例如，我们可以有一个存储库，我们可以在其中隐藏、隐藏和模糊我们的业务逻辑；然后使用 MVC Web API 控制器来调用那些存储库 C# 类。所以 Breeze JavaScript 与 WebAPi 控制器对话，而 WebApi 控制器与 C# 存储库对话。控制器将始终保持非常简单易读，但存储库最终可能会为使用该应用程序的公司提供大量业务逻辑。因此，例如，如果黑客使用 Google Chrome 开发人员的控制台检查 JavaScript 代码，他/她将看到的只有 GetCustomers()、GetProductsForThisId(54) 之类的内容。那里没有太多可以看到（或被盗）的信息。因为 90% 的业务逻辑将存在于服务器上的 C# 存储库中。

微风.js 是如何处理的？

如果我们开始将查询和业务逻辑“从控制器的 C# 转移到轻量级的 JavaScript”，我们必须考虑到我们的系统是基于成员资格的。我认为我们在 JavaScript 中向客户端公开的查询越多，我们的软件就越容易受到攻击，我们就越会告诉黑客如何破解我们的网站并可能窃取信息。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-12-03T03:46:39.803

安全是一个至关重要的问题。仔细考虑客户端上暴露的数据和逻辑是明智的。我们如何将这些情绪提炼成一个适合 SO 答案的具体问题？

Breeze 不会导致您将业务逻辑暴露给 JavaScript 客户端。您可以（并且应该）在存储库和/或控制器方法中安全地锁定此类逻辑。

但我很难理解客户端***查询本身***是如何需要保护的业务逻辑。查询名称以“A”开头的客户的危险在哪里？

您可能会担心查询净资产 > 100,000 美元的客户。但问题不在查询中。*错误在于以任何方式*将此类客户信息暴露给未经授权的用户，无论是通过附加到查询的 Breeze *where*子句还是调用名为*GetCustomers()*的服务。

阻止未经授权访问客户的位置在服务器上，您可以在返回*IQueryable*的 Breeze 控制器操作方法中轻松地做到这一点，就像在*GetCustomer()*方法中一样。无论哪种情况，您都有责任在您的控制器和您公开的方法中施加必要的安全约束。

你写控制器。您编写存储库。您有权访问用户的权限。您可以完全控制自己，并且拥有不折不扣的暴露能力，可以随心所欲地暴露。

FWIW，您的 Breeze*`EntityManager`*可以调用不返回的服务方法`IQueryable<Customer>`。它可以调用 Web Api 控制器方法，例如*`IEnumerable<Customer> GetCustomers()`*或*`Product GetProductForId(int id)`*。在我看来，您将失去 Breeze 查询工具的灵活性，而不会获得任何安全性。但那只是我的个人意见。Breeze 将支持您的选择，无论它是什么。

我很乐意尝试回答更具体的“如何”问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-01-02T15:51:00.340

想补充一点，如果您从服务器返回 401 代码，您可以使用 webapi 中的属性限制未授权的用户进行查询，只需弹出登录屏幕并在用户登录后重做所需的工作

因此用户可能会尝试获取有关订单的数据，但除非获得授权，否则他不会得到它

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-02T11:35:02.917

你可以使用微风.js 做很多事情首先在这里检查我关于安全性的回答

[如何使用 Breeze JS 处理授权？](https://stackoverflow.com/questions/20180078/how-to-handle-authorization-with-breeze-js/37524223#37524223)

此外，尽管可以像在客户端上使用普通 ORM 一样使用微风.js（这有时非常有用），但您应该将业务逻辑保留在 Web api 控制器中，并使用 OData 查询仅公开必要的内容。如果您需要任何数据操作逻辑，那么您应该使用特定方法在服务器上执行此操作。

客户端上应该只存在 UI 逻辑，如果您直接从客户端开始执行多个查询，还要考虑到有几个性能影响。要么扩展实体图以加载更多结果，要么使用返回对象的更专业的方法。Breeze 将自省结果并愉快地消费实体而不会产生影响。

# c# - 使用 OracleCommand 执行 pl/sql 函数

> ID：13662497
> 
> 赞同：7
> 
> 时间：2012-12-01T18:41:02.637
> 
> 标签：c#, oracle, ado.net, plsql

我有这个 pl/sql 函数，它唯一要做的就是验证用户是否存在于数据库中，如果用户存在，则返回“Y”，但如果用户不存在，则返回“N”，我想要的是获取我在 c# 的 pl/sql 中返回的值。

我正在使用 oracle 10g

```
 CREATE OR REPLACE FUNCTION KRIST.f_Login (userName IN VARCHAR2,
                                                        password IN VARCHAR2)
            RETURN VARCHAR2 
            IS
                CURSOR USERFINDER IS
                    SELECT IdEmpleado
                    FROM EMPLEADO
                    WHERE Usuario=userName
                    AND Clave=password;
                id number;
                returnVal VARCHAR2(1);
            BEGIN
                OPEN USERFINDER;
                FETCH USERFINDER INTO id; 
                IF(id IS NULL) THEN
                    returnVal:='Y';
                    RETURN returnVal;
                END IF;
                returnVal:='N';
                RETURN returnVal;
                CLOSE USERFINDER;
            END;
            / 
```

我如何执行此功能并在变量中获取结果...我有这些代码但不起作用

```
 OracleCommand cmd = new OracleCommand("krist.p_login",conn);
                cmd.CommandType = CommandType.StoredProcedure;  // use StoredProcedure with Functions as well
                OracleParameter returnVal = new OracleParameter("returnVal",null);
                OracleParameter p_one = new OracleParameter("userName","kristian");
                OracleParameter p_two = new OracleParameter("password", "kristian");
                returnVal.OracleType = OracleType.VarChar;
                returnVal.Size = 1;
                p_one.OracleType = OracleType.VarChar;
                p_two.OracleType = OracleType.VarChar;
                p_one.DbType = DbType.String;
                p_two.DbType = DbType.String;
                returnVal.DbType = DbType.String;
                returnVal.Direction = ParameterDirection.ReturnValue;
                p_one.Direction = ParameterDirection.Input;
                p_two.Direction = ParameterDirection.Input;
                cmd.Parameters.Add(p_one);
                cmd.Parameters.Add(p_two);
                cmd.Parameters.Add(returnVal);
                cmd.ExecuteNonQuery();
                String bval = Convert.ToString(returnVal.Value);
                return bval; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-10-21T00:16:45.680

以下代码适用于我。
注意：您的 pl/sql 代码调用了函数 KRIST.f_Login，但您的 c# 将其命名为 krist.p_login
NB2：您的 pl/sql 代码使用了 Varchar2，但您的 c# 使用了 varchar
NB3：我正在使用 Oracle.DataAccess.dll
NB4：我假设您的返回值缓冲区大小可能是 1，但尝试不同的大小。

```
using Oracle.DataAccess.Client;
using Oracle.DataAccess.Types;

int RETURN_VALUE_BUFFER_SIZE = 32767; 
OracleCommand cmd = new OracleCommand();
try {
    cmd.Connection = conn;
    cmd.CommandText = "KRIST.f_Login";
    cmd.CommandType = CommandType.StoredProcedure;

    cmd.Parameters.Add("returnVal", OracleDbType.Varchar2, RETURN_VALUE_BUFFER_SIZE);  
    cmd.Parameters["returnVal"].Direction = ParameterDirection.ReturnValue;

    cmd.Parameters.Add("userName", OracleDbType.Varchar2);
    cmd.Parameters["userName"].Value = "kristian";

    cmd.Parameters.Add("password", OracleDbType.Varchar2);
    cmd.Parameters["password"].Value = "kristian";

    cmd.ExecuteNonQuery();
    string bval = cmd.Parameters["returnVal"].Value.ToString();
    return bval;
} catch (Exception e) {
    // deal with exception 
} finally {
    command.Dispose();
    connection.Close();
    connection.Dispose();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-01T19:51:29.497

据我记得如果您使用的是 ODP.NET，则需要首先提供 retVal 参数。

ODP.NET 出了点问题，它没有将参数与提供的参数名称绑定，而是与参数的顺序绑定。

所以只需将顺序更改为：

```
cmd.Parameters.Add(returnVal);
cmd.Parameters.Add(p_one);
cmd.Parameters.Add(p_two); 
```

在我的资料中，我发现我称为“RETURN”的返回参数（不确定它是否重要）：

```
OracleParameter returnVal = new OracleParameter("RETURN",null); 
```

哈哈，还有一件事。它永远不会到达最后一行 - 因为 return 将终止执行。不再需要时立即关闭它。

```
RETURN returnVal;
CLOSE USERFINDER; --<<-- won't close this cursor 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-10-30T14:59:18.517

ODP.net 默认按顺序绑定。可以使用以下命令修改此行为： cmd.BindByName = true

# php - 如何从此代码中获取 sessionId 和 viewstate 变量？

> ID：13662499
> 
> 赞同：2
> 
> 时间：2012-12-01T18:41:41.617
> 
> 标签：php, html, regex, libcurl

> **可能重复：**
> [获取 A 元素的 href 属性](https://stackoverflow.com/questions/3820666/grabbing-the-href-attribute-of-an-a-element)

如何从此代码中提取`sessionId`和变量？`viewstate`

代码是这样的：

```
$url = "http://www.atb.bergamo.it/ITA/Default.aspx?SEZ=2&PAG=38&MOD=LINTRV";

$ckfile = tempnam ("/tmp", "CURLCOOKIE");
$ch = curl_init ($url);
curl_setopt ($ch, CURLOPT_COOKIEJAR, $ckfile); 
curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
$html = curl_exec ($ch);
curl_close($ch);

preg_match('~<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="(.*?)" />~',$html,$viewstate);

var_dump(file_get_contents($ckfile)); //<--- There's the sessionId variable in it
var_dump($viewstate[1]);              //<--- View State 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T19:41:30.853

没有正则表达式，您可以非常简单地做到这一点：

```
$viewstate = explode('id="__VIEWSTATE" value="', $html);
$viewstate = explode('"', $viewstate[1]);
$viewstate = $viewstate[0]; 
```

cookie 也一样：

```
$sesid = explode('SessionId', file_get_contents($ckfile));
$sesid = explode('\n', $sesid[1]);
$sesid = trim($sesid[0]); 
```

把它们放在一起，你得到

```
 $url = "http://www.atb.bergamo.it/ITA/Default.aspx?SEZ=2&PAG=38&MOD=LINTRV";    
   $ckfile = tempnam ("/tmp", "CURLCOOKIE");
   $ch = curl_init ($url);
   curl_setopt ($ch, CURLOPT_COOKIEJAR, $ckfile); 
   curl_setopt ($ch, CURLOPT_FOLLOWLOCATION, true);
   curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);
   $html = curl_exec ($ch);
   curl_close($ch);

    $viewstate = explode('id="__VIEWSTATE" value="', $html);
    $viewstate = explode('"', $viewstate[1]);
    $viewstate = $viewstate[0];    

    $sesid = explode('_SessionId', file_get_contents($ckfile));
    $sesid = explode("\n", $sesid[1]);    
    $sesid = trim($sesid[0]);

    echo $viewstate."<br/>";
    echo $sesid; 
```

适用于我的测试设置。

# sql - 使用oracle plsql程序如何获取表中的多行或所有行

> ID：13662503
> 
> 赞同：0
> 
> 时间：2012-12-01T18:42:03.783
> 
> 标签：sql, oracle11g, plsqldeveloper

我在 oracle 中使用 plsql 过程。我需要检索多行。我的部分代码..

```
CREATE OR REPLACE procedure PC_APP.Test_proc1( ) is
BEGIN

    SELECT * from table;

END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T18:40:59.650

```
CREATE PROCEDURE  PC_APP.Test_proc1 (prc out sys_refcursor)
 IS
 BEGIN

 OPEN prc  for  SELECT * from mytable;

 END; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:07:23.800

您将需要使用 [Ref Cursors](http://www.devshed.com/c/a/Oracle/Working-with-REF-CURSOR-in-PL-SQL/)来允许从存储过程和函数返回记录集。

```
 CREATE PROCEDURE  PC_APP.Test_proc1 (prc out sys_refcursor)
 IS
 BEGIN

 OPEN prc  SELECT * from mytable;

 END; 
```

在命令行上

```
SQL> var rc refcursor
SQL> execute prc(:rc)
SQL> print rc 
```

# c++ - 如何使用矢量 代替矢量 ，当 T2 是 C++ 中 T1 的子类时？

> ID：13662504
> 
> 赞同：2
> 
> 时间：2012-12-01T18:42:06.017
> 
> 标签：c++, templates, casting, polymorphism

让我们更具体地说明我在做什么。我有一个抽象的优化器类，它为各种算法定义了一个接口。它通过产生和消耗未知数量的这种称为请求的数据结构来工作，因此我让它使用它们的向量。

```
class Request {
public:
    vector<double> x;
    double y;
    int id;
    // [...]
}

class Asynch_Optimizer {
public:
    virtual int generate_requests( vector<Request> & work ) = 0;
    virtual int assimilate_results( const vector<Request> & result ) = 0;
protected:
    virtual void convergence_test( const vector<Request> & population );
    // [...]
} 
```

事实证明，Particle_Swarm_Optimizer 可以在请求中使用一些额外的字段。（我在这里闻到了我的谬误，它仅在内部使用附加字段。对于请求处理机制，它没有任何意义。我将其分类为粒子只是为了将所有内容很好地绑定在一起）

```
class Particle : public Request {
public:
    vector<double> v;
    vector<double> x_min;
    double min_value;
    // [...]
} 
```

现在我想调用通用收敛测试方法，在 Particle_Swarm_Optimizer 的超类中实现，其中数据在粒子向量中。有没有比构造新向量和单独复制每个元素更有效的方法来转换为请求向量：

```
void opti::Particle_Swarm_Optimizer::convergence_test( const vector<Particle> & population )
{
    //TODO remove slow hack 
    vector<Request> cast_up;
    for (size_t i = 0; i < population.size(); i++) {
        cast_up.push_back( population[i] );
    }
    Asynch_Optimizer::convergence_test( cast_up );
} 
```

我假设有更好的方法来构造这个例子的数据。我仍然很好奇是否存在向上转换容器模板类型的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:51:45.437

即使您在容器中使用指针，也无法完成。有一个很好的理由为什么不这样做。

即使`SubClass`是 的子类型`BaseClass`，也不`vector<SubClass*>`是 的子类型`vector<BaseClass*>`。这就是为什么这不能成立的原因（对于任何类型的容器，而不仅仅是向量）：

假设`vector<SubClass*>` *被*视为 的子类`vector<BaseClass*>`，并假设还有第二个类`OtherSubClass`也派生自`BaseClass`。考虑这段代码

```
// This looks logical and is type-safe.
void InsertElement(vector<BaseClass*>& container, BaseClass* element) {
   container.push_back(element);
}

int main() {
  vector<SubClass*> subclass_container;

  // Ok, fine, inserting a SubClass pointer into a vector of
  // SubClass pointers.
  SubClass subclass_obj;
  InsertElement(subclass_container, &subclass_obj);

  // But what about this? Now we're able to insert an 
  // OtherSubClass pointer into that same container!
  OtherSubClass othersubclass_obj;
  InsertElement(subclass_container, &othersubclass_obj);

  // Suddenly, we have a SubClass* that actually points at an
  // OtherSubClass object, when these two are siblings!
  SubClass* subclass_ptr = subclass_container[1];
} 
```

因此，如果您采用`vector<SubClass*>`应该被视为子类的想法，那么您最终会得到`vector<BaseClass*>`两个代码，这些代码显然是类型安全的，但最终允许您以一种无法检测到的方式违反类型安全编译器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T19:33:11.617

If you want to keep it almost like it is now, i.e. if you want *runtime* polymorphism, the concept of `any_iterator` comes to mind.

You can define a special polymorphic iterator which abstracts from both the underlying container and the underlying type. Here is a little snippet to get the idea (it misses some methods to be consider a proper iterator, but shouldn't be difficult to implement the rest by yourself)

```
template<class T>
class any_input_iterator : public std::iterator< std::input_iterator_tag,T> {
public:
    any_input_iterator() {}
    any_input_iterator(const any_input_iterator & other) : piter(other.piter->clone()) {}

    template<class Iter>
    any_input_iterator(Iter iter) : piter( new iterator_impl<Iter>(iter)) {}

    T& operator*() {return piter->reference();}

    bool operator==(const any_input_iterator & other) const {
        if ( typeid(*piter) != typeid(* other.piter) ) return false;
        return piter->equal(*other.piter);
    }
    any_input_iterator& operator++() {piter->advance(); return *this;}

private:
    struct iterator_base {
       iterator_base() {}
       virtual ~iterator_base() {}
       virtual void advance() = 0;
       virtual T& reference() = 0;
       virtual iterator_base* clone() = 0;
       virtual bool equal(const iterator_base & other) const = 0;
    };

   template<class InputIterator> struct iterator_impl  : public iterator_base{
       iterator_impl(InputIterator t) : m_iter(t) {}
       virtual void advance() { ++m_iter;}
       virtual T& reference() { return *m_iter;} //assuming this is implicitly castable to T&
       virtual iterator_base* clone() {return new iterator_impl(m_iter);}
       virtual bool equal(const iterator_base & other) const {
        return m_iter ==  dynamic_cast<const iterator_impl&>(other).m_iter;
       }

       InputIterator m_iter;
   };

   std::unique_ptr<iterator_base> piter;
}; 
```

Since your algorithms can not know at compile time which is the exact type on which they operate, standard iterators are of little use. Writing your algorithm in terms of this kind-of proxy iterator solves the problem.

Moreover, in my opinion is just a bad idea to write algorithms in terms of container instead of iterator pairs. I'd refactor the code in terms of iterator pairs, but if you still want to stick with vectors, you can make use of `any_iterator` to write an `any_vector_reference` class.

All these things will work only if you have sequences of the **same** type (if you don't, you have to work with vector of pointers).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T18:57:16.307

一种解决方案是将优化器定义为类模板，并用于`std::enable_if` 使其与类型`Request`或其派生类一起使用（未经测试）：

```
template
<
  typename R, //Request or its derived classes
  typename A = typename std::enable_if
                        <
                           std::is_same<Request, R>::value ||
                           std::is_base_of<Request, R>::value 
                        >::type
>
class Asynch_Optimizer {
public:
    virtual int generate_requests( vector<R> & work ) = 0;
    virtual int assimilate_results( const vector<R> & result ) = 0;
protected:
    virtual void convergence_test( const vector<R> & population );
} 
```

# android - 如何在我的应用程序上为所有手机调用 Android 计算器

> ID：13662506
> 
> 赞同：14
> 
> 时间：2012-12-01T18:42:09.453
> 
> 标签：android, android-intent

```
 public static final String CALCULATOR_PACKAGE ="com.android.calculator2";
  public static final String CALCULATOR_CLASS ="com.android.calculator2.Calculator";
  Intent intent = new Intent();

    intent.setAction(Intent.ACTION_MAIN);
         intent.addCategory(Intent.CATEGORY_LAUNCHER);
        intent.setComponent(new ComponentName(
         CALCULATOR_PACKAGE,
         CALCULATOR_CLASS)); 
```

以上仅适用于 HTC

```
 public static final String CALCULATOR_PACKAGE ="com.sec.android.app.popupcalculator";
  public static final String CALCULATOR_CLASS ="com.sec.android.app.popupcalculator.Calculator"; 
```

以上适用于S3

我需要一个适用于所有人的代码。有任何线索的人吗？请给出示例代码

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-01T19:28:12.387

`calculator`你可以在所有安卓设备上尝试默认：

```
ArrayList<HashMap<String,Object>> items =new ArrayList<HashMap<String,Object>>();

final PackageManager pm = getPackageManager();
List<PackageInfo> packs = pm.getInstalledPackages(0);  
for (PackageInfo pi : packs) {
if( pi.packageName.toString().toLowerCase().contains("calcul")){
    HashMap<String, Object> map = new HashMap<String, Object>();
    map.put("appName", pi.applicationInfo.loadLabel(pm));
    map.put("packageName", pi.packageName);
    items.add(map);
 }
} 
```

现在您可以启动计算器应用程序：

```
if(items.size()>=1){
String packageName = (String) items.get(0).get("packageName");
Intent i = pm.getLaunchIntentForPackage(packageName);
if (i != null)
  startActivity(i);
} 
else{
      // Application not found
   } 
```

对于**Api >= 15**，您可以使用

```
Intent intent = new Intent();
intent.setAction(Intent.ACTION_MAIN);
intent.addCategory(Intent.CATEGORY_APP_CALCULATOR);
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(intent); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-10-12T22:11:22.777

```
Intent i = new Intent();
i.setAction(Intent.ACTION_MAIN);
i.addCategory(Intent.CATEGORY_APP_CALCULATOR);
startActivity(i); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T18:58:44.010

您必须检查默认计算器包名称（com.android.calculator2）是否可用：

```
try{
     ApplicationInfo info = getPackageManager()
                             .getApplicationInfo("com.android.calculator2", 0 );

    } catch( PackageManager.NameNotFoundException e ){
     //application doesn't exist
} 
```

三星使用了许多预装了 TouchWiz 的应用程序，这些应用程序在 Android 库存中是不可用的。因此，如果您在上面遇到异常，您可以检查三星的计算器是否可用。顺便说一句，我*认为*com.android.calculator2 不是 HTC 特有的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-10T11:29:23.213

好吧，这是**@ρяσѕρєя K 的修改答案，因为** 它在三星手机中运行良好，只有包裹有“calc”，但并非所有手机都像 HTC 和 LENOVO ETC

**对于 Api >= 15 ，您可以使用 BUT !!!**

 ~~~~```
 Intent intent = new Intent();
    intent.setAction(Intent.ACTION_MAIN);
    intent.addCategory(Intent.CATEGORY_APP_CALCULATOR);
    intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(intent); 
```~~ 

~~这可能会导致这样的错误~~

 ~~> android.content.ActivityNotFoundException：没有找到处理 Intent 的活动 { act=android.intent.action.MAIN cat=[android.intent.category.APP_CALCULATOR] flg=0x10000000 }

**让我们来看看这个**

**将所有应用加载到阵列**

```
 // Declare universal if you want Access any where from scope

ArrayList<HashMap<String,Object>> items;
    PackageManager pm ;    
List<PackageInfo> packs;

    // initialise From Oncreate if you want
    items =new  ArrayList<HashMap<String,Object>>(); 
    pm = getPackageManager();
    packs = pm.getInstalledPackages(0);  
        for (PackageInfo pi : packs)
 {
            HashMap<String, Object> map = new HashMap<String, Object>();
            map.put("appName", pi.applicationInfo.loadLabel(pm));
            map.put("packageName", pi.packageName);
            items.add(map); 
 } 
```

**这是技巧部分** 我们正在遍历所有应用程序以获取应用程序名称或匹配“计算器”

```
public void opencalculator(){
  int d=0;
  if(items.size()>=1){
  int j=0;
 for(j=0;j<items.size();j++){
 String AppName = (String) items.get(j).get("appName");
// Log.w("Name",""+AppName);
    if(AppName.matches("Calculator"))
                     {
                            d=j;
                            break;
                     }
                    }
                    String packageName = (String) items.get(d).get("packageName");

                    Intent i = pm.getLaunchIntentForPackage(packageName);
                    if (i != null){
                        Toast.makeText(getContext(),"STARTING",Toast.LENGTH_SHORT).show();

                        startActivity(i);}
                    else {
                        Toast.makeText(getContext(),"SORRY I CANT OPEN CALCULATOR :(",Toast.LENGTH_SHORT).show();

                    }
                }

                else{
                    Toast.makeText(getContext(),"SORRY I CANT START CALCULATOR :(",Toast.LENGTH_SHORT).show();

                }
} 
```

呼叫计算器

```
opencalculator(); 
```~~~~

# java - 收到堆栈溢出错误，我不确定为什么

> ID：13662510
> 
> 赞同：0
> 
> 时间：2012-12-01T18:42:53.237
> 
> 标签：java, stack-overflow

编辑：

主要方法...

创建一个新玩家。

玩家等级...

创建一个手的实例。

手课...

创建一个数组列表

就这样。它很简单

```
public class Player 
{
/*------------------------
 * instantiating variable
 -----------------------*/
protected Hand hand;
protected boolean active = false;

/*------------
 * constructor
 -----------*/
    public Player()
{
    hand = new Hand();
    hand.setSize(5);
}

public class Hand extends Player
    {
/*-----------------------------------------
 * variable declaration
 ----------------------------------------*/
ArrayList <Card> hand;
protected int size;
Card temp;

     /*------------------------------------------
 * constructor
 * creates arraylist of cards to keep in hand
 ------------------------------------------*/
public Hand()
{
    hand = new ArrayList<Card>();
}

/*-------------------------------
 * sets the size of the max hand
 ------------------------------*/
public void setSize(int newSize)
{
    size = newSize;

} 
```

编辑：错误是：

线程“主”java.lang.StackOverflowError 中的异常

```
at Player.<init>(Player.java:19)

at Hand.<init>(Hand.java:21) 
```

Player 中的第 19 行是“public Player()”

Hand 的第 21 行是“public Hand()”

仅供参考

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T19:08:57.977

`Hand`扩展`Player`，因此具有所有`Player`的数据成员，包括

```
protected Hand hand; 
```

为了初始化那些继承的成员，`Hand`' 的构造函数隐式调用`Player`'s.

1.  你调用`Hand`'s 的构造函数。
2.  它调用`Player`'s 的构造函数。
3.  `Player`的构造函数执行`new Hand()`，循环无限期地重复，直到你用完堆栈空间。

# android - Android SampleSyncAdapter 示例中的 authToken

> ID：13662517
> 
> 赞同：0
> 
> 时间：2012-12-01T18:43:16.503
> 
> 标签：android, android-syncadapter

这段代码来自`AuthenticatorActivity`Android [SampleSyncAdapter](http://developers.androidcn.com/resources/samples/SampleSyncAdapter/index.html)示例项目。它说，

> 我们将从服务器返回的 authToken 存储为该帐户的“密码”——因此我们永远不会在本地存储用户的实际密码。

但我根本看不到`authToken`被使用。为什么？这是一个错误还是故意的？

```
/**
 * Called when response is received from the server for authentication
 * request. See onAuthenticationResult(). Sets the
 * AccountAuthenticatorResult which is sent back to the caller. We store the
 * authToken that's returned from the server as the 'password' for this
 * account - so we're never storing the user's actual password locally.
 *
 * @param result the confirmCredentials result.
 */
private void finishLogin(String authToken) {

    Log.i(TAG, "finishLogin()");
    final Account account = new Account(mUsername, Constants.ACCOUNT_TYPE);
    if (mRequestNewAccount) {
        mAccountManager.addAccountExplicitly(account, mPassword, null);
        // Set contacts sync for this account.
        ContentResolver.setSyncAutomatically(account, ContactsContract.AUTHORITY, true);
    } else {
        mAccountManager.setPassword(account, mPassword);
    }
    final Intent intent = new Intent();
    intent.putExtra(AccountManager.KEY_ACCOUNT_NAME, mUsername);
    intent.putExtra(AccountManager.KEY_ACCOUNT_TYPE, Constants.ACCOUNT_TYPE);
    setAccountAuthenticatorResult(intent.getExtras());
    setResult(RESULT_OK, intent);
    finish();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-04T01:04:48.297

同意，这令人困惑，特别是因为 SampleSyncAdapter 代表了围绕这些类的一些唯一文档。也就是说，我认为这里的评论是错误的，因为 AbstractAccountAuthenticator 和服务都依赖于密码。我已经提交了一个错误以供澄清：

[http://code.google.com/p/android/issues/detail?id=40878&thanks=40878&ts=1354582803](http://code.google.com/p/android/issues/detail?id=40878&thanks=40878&ts=1354582803)

# javascript - 使用模块模式访问 jQuery 回调中的私有变量

> ID：13662522
> 
> 赞同：1
> 
> 时间：2012-12-01T18:43:50.200
> 
> 标签：javascript, jquery, closures, revealing-module-pattern

下面的执行没有错误，但 DOM 没有更新。

```
var Cart = function() {
  var $cart;

  function init() {
    $cart = $("#cart");

    this.refresh();
  }

  function refresh() {
    $.ajax({
      // ...
      success: function(html) {
        $cart.html(html); // $cart seems to exist as JS object, but #cart doesn't get updated in the DOM.
        $("#cart").html(html); // This works!
      }
    });
  }

  return {
    init: init,
    refresh: refresh
  }
}();

$(function() {
  Cart.init();
}); 
```

**更新**

与上面的代码相反，我实际上并没有在 jQuery 就绪事件中调用 Cart.init() 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T18:52:45.673

调用时检查您的`#cart`对象是否存在`Cart.init()`。这是我在您的两个工作代码和不工作代码之间看到的唯一区别，因为没有其他问题（参见[fiddle](http://jsfiddle.net/fsfES/)）。

# python - 如何获取 Matplotlib 生成的散点图的像素坐标？

> ID：13662525
> 
> 赞同：9
> 
> 时间：2012-12-01T18:44:12.967
> 
> 标签：python, matplotlib

我使用 Matplotlib 生成散点图的 PNG 文件。现在，对于每个散点图，除了 PNG 文件外，我还想*生成*散点图中各个点的像素坐标列表。

我用来为散点图生成 PNG 文件的代码基本上是这样的：

```
from matplotlib.figure import Figure
from matplotlib.pyplot import setp
from matplotlib.backends.backend_agg import FigureCanvasAgg

...

fig = Figure(figsize=(3, 3), dpi=100)
ax = fig.gca()
for (x, y), m, c in zip(points, markers, colors):
    ax.scatter(x, y, marker=m, c=c, s=SIZE, vmin=VMIN, vmax=VMAX)

# several assorted tweaks like ax.spines['top'].set_color('none'), etc.

setp(fig, 'facecolor', 'none')

# FigureCanvasAgg(fig).print_png(FILEPATH) 
```

...（其中 UPPERCASE 中的变量代表可设置的参数）。

如何`(px, py)`在生成的 PNG 中生成与 中的点相对应的像素坐标对列表`points`？

[编辑：删除了一些关于 . 的废话`imshow`。]

[编辑：

好的，这就是我根据 Joe Kington 的建议最终得出的结论。

```
# continued from above...

cnvs = FigureCanvasAgg(fig)
fig.set_canvas(cnvs)
_, ht = cnvs.get_width_height()
pcoords = [(int(round(t[0])), int(round(ht - t[1]))) for t in
           ax.transData.transform(points)]
fig.savefig(FILEPATH, dpi=fig.dpi) 
```

生成的像素坐标 (in `pcoords`) 非常接近正确值。事实上，y 坐标是完全正确的。x 坐标相差 1 或 2 个像素，这对我的目的来说已经足够了。

]

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-01T19:31:58.073

这样做相当简单，但要了解发生了什么，您需要阅读一些有关 matplotlib 转换的内容。[转换教程](http://matplotlib.org/users/transforms_tutorial.html)是一个很好的起点。

无论如何，这里有一个例子：

```
import numpy as np
import matplotlib.pyplot as plt

fig, ax = plt.subplots()
points, = ax.plot(range(10), 'ro')
ax.axis([-1, 10, -1, 10])

# Get the x and y data and transform it into pixel coordinates
x, y = points.get_data()
xy_pixels = ax.transData.transform(np.vstack([x,y]).T)
xpix, ypix = xy_pixels.T

# In matplotlib, 0,0 is the lower left corner, whereas it's usually the upper 
# left for most image software, so we'll flip the y-coords...
width, height = fig.canvas.get_width_height()
ypix = height - ypix

print 'Coordinates of the points in pixel coordinates...'
for xp, yp in zip(xpix, ypix):
    print '{x:0.2f}\t{y:0.2f}'.format(x=xp, y=yp)

# We have to be sure to save the figure with it's current DPI
# (savfig overrides the DPI of the figure, by default)
fig.savefig('test.png', dpi=fig.dpi) 
```

这产生：

```
Coordinates of the points in pixel coordinates...
125.09  397.09
170.18  362.18
215.27  327.27
260.36  292.36
305.45  257.45
350.55  222.55
395.64  187.64
440.73  152.73
485.82  117.82
530.91  82.91 
```

![在此处输入图像描述](../Images/aa0be6ac94cbca40ce52ba588380b69c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T19:14:40.917

尝试注释框： http: [//matplotlib.org/examples/pylab_examples/demo_annotation_box.html](http://matplotlib.org/examples/pylab_examples/demo_annotation_box.html)

```
import matplotlib.pyplot as plt
from matplotlib.offsetbox import TextArea, DrawingArea, OffsetImage, \
     AnnotationBbox

for (x, y), m, c in zip(points, markers, colors):
    ax.scatter(x, y, marker=m, c=c, s=SIZE, vmin=VMIN, vmax=VMAX)

    for px, py in zip(x,y):
        offsetbox = TextArea( " %s, %s" (px, py ) , minimumdescent=False)
        ab = AnnotationBbox(offsetbox,(px, py ),
                        xybox=(-20, 40),
                        xycoords='data',
                        boxcoords="offset points",
                        arrowprops=dict(arrowstyle="->"))
        ax.add_artist(ab) 
```

我当前的计算机上没有安装 matplotlib，因此我的代码可能无法正常工作。

# c - #define 中的整数是什么数据类型？

> ID：13662529
> 
> 赞同：5
> 
> 时间：2012-12-01T18:44:35.250
> 
> 标签：c

如果我在 in 中使用一个整数`#define`，`data type`它被认为是`sprintf()`in`C99`什么？

```
#define NUMBER 100

sprintf(buf, "%i\n", NUMBER); // is it %i, %u, %lu ? 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T18:47:25.747

```
#define NUMBER1 100 /* int: use "%d" or "%i" in printf() */
#define NUMBER2 100U /* unsigned int: use "%u" in printf() */
#define NUMBER3 100L /* long int: use "%ld" or "%li" in printf() */
#define NUMBER4 100UL /* unsigned long int: use "%lu" in printf() */
/* C99 */
#define NUMBER5 100LL /* long long int: use "%lld" or "%lli" in printf() */
#define NUMBER6 100ULL /* unsigned long long int: use "%llu" in printf() */ 
```

注意：U 和 L 也可以小写 注意
2：U 可以在 L 或 LL 之前或之后

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T18:47:12.597

该文字的类型是`int`. 您应该使用`%d`或`%i`。

`NUMBER``100`在由预处理器编译时，字面上会被替换为。它是一个宏这一事实对编译器没有任何意义，因为编译器永远不会看到`NUMBER`; 编译器只会看到`100`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T18:50:22.710

所有`#define`-d 项目都是直接的文本替换：假设`100`粘贴的是 而不是`NUMBER`标识符：

```
sprintf(buf, "%i\n", NUMBER);
//      ^^^ It's sprintf, don't forget the buffer! 
```

由于`100`是整数文字，因此您应该使用`%d`.

# java - Java java.util.Stack multipop

> ID：13662531
> 
> 赞同：3
> 
> 时间：2012-12-01T18:45:02.810
> 
> 标签：java, stack

我正在使用`java.util.Stack`，但我错过了一个 multipop

```
stack.pop(10); 
```

这应该给我一个列表，其中包含 10 个（或更少是堆栈不包含足够的）堆栈中的项目（并将它们从堆栈中删除）。java中是否有任何标准类？还是让我自己实施？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T18:48:54.797

没有`multipop`方法。您可以扩展 Stack 以添加您自己的功能。

```
public class ImprovedStack<E> extends Stack<E> {

    public synchronized E[] pop(int count) {
        E[] objs = new E[count];
        for (int i = 0; i < count; i++) {
            objs[i] = pop();
        }
        return objs;
    }
} 
```

使用此实现，如果堆栈中的对象少于 ，则会引发 EmptyStackException `count`，但您可以根据需要对其进行修改。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-03T19:23:35.197

在[Eclipse Collections](https://www.eclipse.org/collections/)中，有一个`Stack`名为的替代实现[`ArrayStack`](https://www.eclipse.org/collections/javadoc/10.0.0/org/eclipse/collections/impl/stack/mutable/ArrayStack.html)恰好提供了这种类型的行为。

```
MutableStack<String> stack =
    Stacks.mutable.with("j", "i", "h", "g", "f", "e", "d", "c", "b", "a");

ListIterable<String> result = stack.pop(2);
Assert.assertEquals(Lists.mutable.with("a", "b"), result);

ArrayList<String> arrayList = stack.pop(4, new ArrayList<>());
Assert.assertEquals(Arrays.asList("c", "d", "e", "f"), arrayList);

Assert.assertEquals(Stacks.mutable.withReversed("g", "h", "i", "j"), stack);

MutableBag<String> bag = stack.pop(4, Bags.mutable.empty());
Assert.assertEquals(Bags.mutable.with("g", "h", "i", "j"), bag);

Assert.assertTrue(stack.isEmpty()); 
```

通过 peek(int) 还支持多视图。

注意：我是 Eclipse Collections 的提交者。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-01T18:48:58.893

不要认为在 Java 中有任何标准的实现。看看这个[相关的问题](https://stackoverflow.com/questions/1759989/java-stack-method-multipop-beginner-java)。（我认为这里的答案非常简洁）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-01T18:50:11.700

您可以使用[NavigableSet](http://docs.oracle.com/javase/6/docs/api/java/util/NavigableSet.html)将数据保持在您喜欢的顺序（为此使用自定义比较器）并允许您查询耳机、子集或尾部。

# matlab - 如何对 MATLAB 进行编程以计算立方正切函数的参数？

> ID：13662535
> 
> 赞同：5
> 
> 时间：2012-12-01T18:45:24.450
> 
> 标签：matlab

我需要为 w 求解 tan^3(w)=tan(s)，其中 s= 1.5 弧度或 16.845 度。我需要为此操作编写一行 MATLAB 代码，但不知道该等式的等效形式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:49:16.027

```
solve('tan(x)^3==tan(1.5)','x') 
```

回答：

```
 1.1783511187702876557436189917532
- 1.3391755593851438278718094958766 + 0.35610550401885024116569451380696*i
- 1.3391755593851438278718094958766 - 0.35610550401885024116569451380696*i 
```

一个真正的解决方案和两个复杂的解决方案。

（这是在 Matlab R2012a 中测试的）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T22:00:10.740

您还可以使用：

```
w = atan(tan(1.5)^(1/3)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T21:34:10.843

要在没有工具箱的情况下求解方程，您可以使用 eg`fzero`找出方程两边相等的位置。

```
%# define the function that should be equal to zero
%# i.e. subtract the sides of the equation from one another
fun = @(x)tan(x)^3-tan(1.5)

%# solve the function with initial guess 0
fzero(fun,0)
ans =
    1.1784 
```

# javascript - webkit 开发者工具 `window.console._commandLineAPI` 的文档

> ID：13662537
> 
> 赞同：3
> 
> 时间：2012-12-01T18:45:43.250
> 
> 标签：javascript, google-chrome

我发现如果我退出在 chrome 开发控制台中调用的函数，我最终会得到以下源代码：

```
with ((window && window.console && window.console._commandLineAPI) || {}) {
myFunction()
} 
```

有一些与此相关的问题描述了控制台中的一些奇怪的怪癖，但它们在这里不相关。

如果我`window.console._commandLineAPI`在控制台中输入，我会得到一大堆成员名称，其中一些比其他更有用：

```
$$: function () { [native code] }
$_: undefined
$x: function () { [native code] }
clear: function () { [native code] }
copy: function () { [native code] }
dir: function () { [native code] }
dirxml: function () { [native code] }
get $0: function () { [native code] }
get $1: function () { [native code] }
get $2: function () { [native code] }
get $3: function () { [native code] }
get $4: function () { [native code] }
getEventListeners: function () { [native code] }
inspect: function () { [native code] }
keys: function () { [native code] }
monitorEvents: function () { [native code] }
profile: function () { [native code] }
profileEnd: function () { [native code] }
set $0: undefined
set $1: undefined
set $2: undefined
set $3: undefined
set $4: undefined
unmonitorEvents: function () { [native code] }
values: function () { [native code] }
__proto__: CommandLineAPI 
```

这些功能的作用是否有任何文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:48:04.733

这听起来像 FireBug[命令行 API](http://getfirebug.com/wiki/index.php/Command_Line_API)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T01:18:30.000

[你可以在这里](https://developers.google.com/chrome-developer-tools/docs/commandline-api)找到文档

# jquery - 无法在 django 中通过 jQuery 添加 html 标签

> ID：13662544
> 
> 赞同：1
> 
> 时间：2012-12-01T18:46:15.213
> 
> 标签：jquery, html, django

我是 jQuery 和 django 的新手。我正在编写代码，通过 jQuery 将单选按钮动态添加到我的 HTML 页面。

当我有一个独立的 HTML 文件时，它工作正常。但是当我用我的 django 应用程序加入它时，它没有被添加。

它甚至没有显示任何错误。

我尝试使用简单的标签，例如

```
$("#div1").append("<h3>First</h3> ") 
```

还

```
$("#div1").append("<br/>") 
```

即使这些都不起作用。

然而，这些标签在 jQuery 之外工作。

我尝试通过 jQuery 添加简单的文本

```
$("#div1").append("I am here") 
```

这很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:48:49.697

你的选择器是错误的，如果你想选择一个带有 ID 的元素，你应该使用 ID selector:`$('#div1')`或 class selector `$('.div1')`。当前，您正在尝试选择其标签名称为 的元素`div1`。

```
$(document).ready(function(){ // when DOM is ready
     $("#div1").append("<h3>First</h3>");
     // $(".div1").append("<h3>First</h3>")
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:59:54.103

如果它在一个普通的 html 页面上工作，我的猜测是当你通过 django 提供你的 html 页面时，你的 jquery 库没有加载。尝试改用它，看看您的页面是否正常工作。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

# java - For 循环 & Thread.sleep

> ID：13662548
> 
> 赞同：2
> 
> 时间：2012-12-01T18:46:24.497
> 
> 标签：java, arrays, sorting, for-loop, sleep

我想对用户插入的数组进行排序。这部分已经没问题了，我遇到的麻烦是当您单击排序按钮时，它会在 jtextarea 内逐步提供某种方式，每行之间有一些时间间隔。

我的问题出在哪里，我试图在我的 for 循环中放置一个 Thread.sleep ，以便它打印一行然后暂停一点，但它不是在正确的时刻暂停，而是在开始排序并打印之前立刻。

```
public void bubbleSort(int[] arr) {
    int[] array_to_sort = arr;
    int[] initial_array = arr;
    int count = 1;
    String result = "";
    String result2 = "";
    for (int l = 0; l < initial_array.length; l++)
        result2 += arr[l] + " ";
    for (int i = array_to_sort.length; i >= 1; i--)
        for (int j = 1; j < i; j++)
            if (array_to_sort[j - 1] > array_to_sort[j]) {
                int aux = array_to_sort[j];
                array_to_sort[j] = array_to_sort[j - 1];
                array_to_sort[j - 1] = aux;
                for (int l = 0; l < array_to_sort.length; l++)
                    result += array_to_sort[l] + " ";
                Interface.jTextArea1.append(result + "\n"); // I'd like to pause after printing this line
                result = "";
                count++;
            }
} 
```

有人可以启发我如何以正确的方式进行此暂停吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:45:42.843

`Interface.jTextArea1.append(result + "\n"); // I'd like to pause after printing this line`

执行以下`for(int i = 0; i < Short.MAX_VALUE;i++);`
操作，我的意思是只做一个空循环来模拟您的延迟。尽管正确的解决方案是重组代码以发送要在 EDT 中打印的文本。

# python-2.7 - 一定时间后打印

> ID：13662551
> 
> 赞同：2
> 
> 时间：2012-12-01T18:46:45.307
> 
> 标签：python-2.7

我是 Python 的初学者，我正在尝试编写一段代码，在经过一定时间后，它将打印经过的时间。这似乎是一个简单的问题，但我遇到了麻烦。这是代码：

```
 from time import time  
    start=time()  
    y=1

    while (y==1):  
        if time()-start>2000000000:  
            print time()  
            y=y+1  
        else:  
            print"???" 
```

我得到的只是问号。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:55:17.863

您必须等待超过 63 年才能看到`print time()`输出而不是问号。

`time()`*以秒*为单位输出自纪元以来的时间。2,000,000,000（20 亿）秒是很长的等待时间！如果你现在开始，它将在 2076 年 4 月 17 日完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T18:55:51.430

替换`print "???"`为`pass`或完全删除该`else:`子句，代码将起作用（一旦将等待时间更改为更合理的值）。

但是，您的循环将花费 100% 的可用 CPU 功率。所以`print "???"`用小睡眠来代替是个好主意，比如`time.sleep(.01)`.

此外，您可以使用`while True`循环并使用 退出循环`break`，这将消除对`y`变量的需要。

# c++ - 打印 long double 变量的所有十进制数字

> ID：13662554
> 
> 赞同：1
> 
> 时间：2012-12-01T18:47:05.513
> 
> 标签：c++, gcc, double

我发现`double`我机器上的类型对应于[这篇](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)维基百科文章，`long double`对应于这个文本：[x86 Extended Precision Format](http://en.wikipedia.org/wiki/Extended_precision#x86_Extended_Precision_Format)。

这就是为什么`floor(52/log2(10))`or 15 位`double`应该是正确的并且`floor(63/log2(10))`or 19 位`long double`是可信的。

编码：

```
int main()
{
    double d=0.1;
    long double ld=0.1;

    std::cout.precision(19);
    std::cout.setf(std::ios_base::scientific);

    std::cout << d << std::endl;
    std::cout << ld << std::endl;

    return 0;
} 
```

给出输出：

```
1.0000000000000000555e-01
1.0000000000000000555e-01 
```

如果我们设置`cout.precision`为 16，输出将是：

```
1.0000000000000001e-01
1.0000000000000001e-01 
```

没关系，第一个输出的第17位和第二个输出`double`的第16位`double`不正确。但是为什么它不正确`long double`呢？有没有办法获得所有 19 个正确数字的`long double`变量？

如果我尝试`printf("%.19Le\n",ld);`long double，我会得到完全相同的结果。

我使用 OpenSUSE 12.1 和 g++ 4.6.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:51:39.713

`0.1`字面常量不是 long double ，它可能是 double 。

您可能需要`ld`初始化

```
 long double ld = (long double) 1.0 / (long double) 10.0; 
```

所以除法涉及两个长双操作数，所以希望在长双操作数中完成（我不确定，你必须仔细检查适当的 C++ 标准）。

您可能希望使用支持最新标准的 GCC 进行编译。我建议使用 GCC 4.7 进行编译，`g++ -Wall -std=c++11`但使用 4.6 你可能需要说`-std=c++0x`

# java - maven使用google api

> ID：13662562
> 
> 赞同：8
> 
> 时间：2012-12-01T18:48:26.820
> 
> 标签：java, maven, google-api-java-client

我正在为一个项目使用谷歌日历 Java API。

日历部分很好，maven似乎下载并使用它没有任何麻烦。

我的问题来自这个库的主要依赖：com.google.api.client api。

特别是，当我按照[此页面上](https://code.google.com/p/google-api-java-client/wiki/Setup#google-api-client)的详细说明进行操作时，maven 无法正确编译我的项目：

```
package com.google.api.client.extensions.java6.auth.oauth2 does not exist
package com.google.api.client.extensions.jetty.auth.oauth2 does not exist
package com.google.api.client.json.jackson2 does not exist 
```

它缺少几个类，因此无法编译文件，而当我下载 zip 并在不使用 maven 的情况下手动添加 .jar 时，它可以正常工作。

这是我用 maven 管理的第一个项目，不知道如何从那里开始。指针将不胜感激。

编辑帖子请求 --- 这是我的 POM

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>fr.univnantes.atal.atcal</groupId>
  <artifactId>AtCal</artifactId>
  <version>0.1</version>
  <packaging>jar</packaging>

  <name>AtCal</name>
  <url>http://maven.apache.org</url>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
  </properties>

  <repositories>
    <repository>
      <id>google-api-services</id>
      <url>http://google-api-client-libraries.appspot.com/mavenrepo</url>
    </repository>
  </repositories>

  <dependencies>
    <dependency>
      <groupId>junit</groupId>
      <artifactId>junit</artifactId>
      <version>3.8.1</version>
      <scope>test</scope>
    </dependency>
    <dependency>
      <groupId>com.google.api-client</groupId>
      <artifactId>google-api-client</artifactId>
      <version>1.12.0-beta</version>
    </dependency>
    <dependency>
      <groupId>com.google.apis</groupId>
      <artifactId>google-api-services-calendar</artifactId>
      <version>v3-rev20-1.12.0-beta</version>
    </dependency>
  </dependencies>

  <build>
    <pluginManagement>
      <plugins>
    <plugin>
      <groupId>org.apache.maven.plugins</groupId>
      <artifactId>maven-compiler-plugin</artifactId>
      <!-- best lock down version of the plugin too -->
      <configuration>
        <source>1.5</source>
        <target>1.5</target>
      </configuration>
    </plugin>
      </plugins>
    </pluginManagement>
  </build>
</project> 
```

我基本上添加了两个依赖项：日历和api客户端。这是让事情在文档上工作的提到的步骤。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-01T20:01:41.750

看起来似乎*非常*beta-ish`google-api-services-calendar:v3-rev20-1.12.0-beta`还没有推送到 Sontaype 存储库，但是如果您尝试在 POM 中同时包含推荐的存储库和日历 API 下提到的存储库：

```
<repositories>
    <repository>
        <id>google-api-services</id>
        <url>https://oss.sonatype.org/content/repositories/releases/</url>
    </repository>
    <repository>
        <id>google-api-services-beta</id>
        <url>http://google-api-client-libraries.appspot.com/mavenrepo</url>
    </repository>
</repositories> 
```

此外，似乎还需要以下附加依赖项：

```
<dependency>
    <groupId>com.google.api-client</groupId>
    <artifactId>google-api-client-java6</artifactId>
    <version>1.12.0-beta</version>
</dependency>
<dependency>
    <groupId>com.google.oauth-client</groupId>
    <artifactId>google-oauth-client-jetty</artifactId>
    <version>1.12.0-beta</version>
</dependency>
<dependency>
    <groupId>com.google.http-client</groupId>
    <artifactId>google-http-client-jackson2</artifactId>
    <version>1.12.0-beta</version>
</dependency> 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T07:57:32.660

我对谷歌自定义搜索 api 进行了冒险。大多数问题是由于 mvn repo [http://google-api-client-libraries.appspot.com/mavenrepo](http://google-api-client-libraries.appspot.com/mavenrepo)不可用。

我从以下位置获取的自定义搜索 jar：

```
<repository>
  <id>google-api-services</id>
  <url>http://mavenrepo.google-api-java-client.googlecode.com/hg</url>
</repository> 
```

它在手动下载的 jar 内的 pom 中。最新[的 google-api-client](http://search.maven.org/#search%7Cga%7C1%7Cg%3a%22com.google.api-client%22)和[google-http-client-jackson](http://search.maven.org/#search%7Cga%7C1%7Cgoogle%20jackson)（在 1.13.2-beta JacksonFactory 是一个附加依赖项）位于中央 maven 存储库中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T15:31:06.380

几个月前，Google 开始将库推送到 Sonatype 存储库。您不再应该在 pom.xml 中包含指向`google-api-client-libraries.appspot.com/mavenrepo`或`mavenrepo.google-api-java-client.googlecode.com`

这样做会减慢您的构建速度，因为您最终会检查该存储库中的所有依赖项（甚至是非 Google 依赖项）。这些检查 404，然后您检查主存储库。

# objective-c - 在设备上使用 imageNamed 失败，但在模拟器中工作

> ID：13662568
> 
> 赞同：0
> 
> 时间：2012-12-01T18:48:57.810
> 
> 标签：objective-c, ios, uiimage

这是我的代码：

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];

    NSArray *filePathsArray = [[NSFileManager defaultManager] subpathsOfDirectoryAtPath:documentsDirectory  error:nil];
    NSMutableArray *finalArray = [(NSArray*)filePathsArray mutableCopy];
    NSFileManager *fm = [NSFileManager defaultManager];
    NSArray *files = [fm contentsOfDirectoryAtPath:documentsDirectory error:nil];
    NSString *fileFirst = [files objectAtIndex:0];
    NSString *fullPath = [NSString stringWithFormat:@"%@/%@", documentsDirectory, fileFirst];
    /* NSUInteger index = [finalArray indexOfObject:@".DS_Store"];
    [finalArray removeObjectAtIndex: index]; */
    //NSLog(@"files array %@", finalArray);
    NSString *title = [[[finalArray objectAtIndex:indexPath.row] lastPathComponent]stringByDeletingPathExtension];
    NSString *image = [[finalArray objectAtIndex:indexPath.row] lastPathComponent];
    NSString *newimage = [[image pathExtension]stringByAppendingPathExtension:@"png"];
    //NSLog(@"%@",newimage);

    if (![UIImage imageNamed:newimage]) {
        newimage = @"notFound.png";
    }

    NSDictionary *fileAttribs = [[NSFileManager defaultManager] attributesOfItemAtPath:fullPath error:nil];
    ////NSLog(@"Here: %@",fileAttribs);
    //long long fileSize = [fileAttribs fileSize];

    NSDate *result = [fileAttribs valueForKey:NSFileCreationDate]; //or NSFileModificationDate
    NSDateFormatter *dateFormatter = [[[NSDateFormatter alloc] init]  autorelease];
    [dateFormatter setDateStyle:NSDateFormatterLongStyle];
    NSString *dateString = [dateFormatter stringFromDate:result];   
    [dateFormatter setDateStyle:NSDateFormatterNoStyle];

    cell.textLabel.text = title;
    cell.imageView.image = [UIImage imageNamed:newimage];
    //cell.detailTextLabel.text = [NSString stringWithFormat:@"File extenstion: %@",[[image pathExtension]uppercaseString]];
    cell.detailTextLabel.text = dateString;
    cell.detailTextLabel.font = [UIFont systemFontOfSize:15];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

    return cell;
} 
```

正如您在上面看到的，我在用户 Documents 文件夹中获取了文件的扩展名，并找到了具有该扩展名的图像。这有效 - 当我 NSLog 字符串时，我得到了正确的图像（例如 PDF.png）但是，如果找不到图像，我希望 newimage 变量为 notFound.png。

这适用于模拟器，但不适用于我在设备上测试时。在设备上，所有的 cell.imageView.image 都显示为 notFound.png，即使单元格 NSLogs PDF.png（例如）。有人对问题所在有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-01T19:22:24.450

Mac OS X（以及您的模拟器）使用的文件系统通常配置为*不*区分大小写（当您创建文件名时它会保留大小写，但如果您以错误的大小写检索也没关系）。不过，该设备区分大小写。

如果您发现`imageNamed`平台之间通过（或从本地文件系统读取文件的任何方式）查找文件的差异，请检查您的大小写。

* * *

如果您仍然没有找到它，那么我建议确保该文件显示在目标的“构建阶段”中，并检查“复制捆绑资源”部分的基本文件名和扩展名的大小写是否正确。我还会确保您执行“产品”-“清洁”并重新构建应用程序，因为有时 Xcode 会对已复制的文件感到困惑。我还假设您已经退出并重新启动了 Xcode，因为当我看到这种罕见的、完全无法解释的行为时，重新启动 Xcode（有时甚至是我的机器）会修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:59:48.310

pdf 似乎不在您的捆绑包中。imageNamed 似乎是错误的方法选择

调用 imageWithContentsOfFile 但仅用于未找到的图像调用 imageNamed

编辑：立即使 newimage 变量成为图像

例如

```
id newimagepath = [[image pathExtension]stringByAppendingPathExtension:@"png"];
UIImage *newimage = [UIImage imageWithContentsOfFile:newimagepath];

if(!newimage) {
    newimage = [UIImage imageNamed:@"notFound.ong"]
} 
```

# php - PHP 链接生成器 - 设计路径

> ID：13662570
> 
> 赞同：0
> 
> 时间：2012-12-01T18:49:02.520
> 
> 标签：php, web

我正在构建一个网站，其中文件的下载链接将在运行时通过连接到数据库并从那里获取当前下载链接来生成。

我想知道我应该采取什么最佳设计路径来实现它。

到目前为止，我想到的是有一个 linker.php 文件，我将把它包含在网站的所有页面中（有下载链接的地方），在这个文件中，我将自动填充一个`$downloadLink`变量并在 `<?php echo $downloadLink; ?>`任何地方使用我需要使用那个下载链接。

这是正确的方法吗？

我应该让 linker.php 文件自动执行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:15:14.157

我不确定您的数据库结构是什么样的，但是。在 linker.php 文件中包含一个可以传递变量的函数可能会有所帮助，例如：

```
<?php
function get_downloadlink_byid( $id ){
   code....
}
?> 
```

在您的页面上，您可以拥有

```
<?php echo get_downloadlink_byid('999'); ?> 
```

这样每个页面都可以请求不同的链接。

# java - 谷歌驱动器内谷歌文档的大小

> ID：13662571
> 
> 赞同：2
> 
> 时间：2012-12-01T18:49:08.070
> 
> 标签：java, google-drive-api, scribe

有没有办法通过 google drive api 获取 google 文档的长度（字节大小）？元数据显示上传文件的大小，但不显示谷歌文档的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T21:17:03.823

Google 原生格式的文档不使用任何用户配额，因此 Drive API 将始终返回 0 作为其字节大小。

# knockout.js - 淘汰赛计算数组不更新

> ID：13662573
> 
> 赞同：4
> 
> 时间：2012-12-01T18:49:18.213
> 
> 标签：knockout.js

我面临一个问题，即添加新项目时计算的可观察数组未更新。

```
self.FilteredCityList = ko.computed(function() {
  var filteredCollection = ko.utils.arrayFilter(self.CityListCollection(), function(r) {
    var matchingItem = ko.utils.arrayFilter(self.LocationCollection(), function(r1) {
      return r1.LocationCode() == r.LocationCode();
    });
    if (matchingItem.length > 0) {
     return false;
    }
    return true;
  });
  return filteredCollection;
}, this); 
```

当我在`self.LocationCollection()`计算数组中添加一个项目时，不会更新。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-02T07:58:30.017

您在评论中提到您已使用以下代码向您添加`LocationCollection`导致问题的项目：

```
self.LocationCollection().push(item); 
```

在哪里

```
self.LocationCollection = ko.observableArray(); 
```

`push`要启用淘汰赛的更改跟踪，您需要`observableArray`直接调用（例如不带括号`()`）[，如文档中所述](http://knockoutjs.com/documentation/observableArrays.html)：

```
self.LocationCollection.push(item); 
```

但是有什么区别呢？

该`ko.observableArray()`调用将返回一个函数。要获取底层数组，您需要调用此函数（例如`self.LocationCollection()`）返回存储的数组。

此时，当您调用时，`LocationCollection().push(item)`您将调用`push`底层数组，因此淘汰赛不会知道它，也不会触发您计算的 observable。

这就是为什么在淘汰赛中他们定义了自己的`push`方法，`observableArray`你需要用语法调用什么`LocationCollection.push(item)`，因为它是淘汰赛的方法，它会正确地跟踪变化。

[样品小提琴。](http://jsfiddle.net/nemesv/egFSh/)

# android - Android NDK：使用 OpenAL 共享库时出现 UnsatisfiedLinkError

> ID：13662586
> 
> 赞同：2
> 
> 时间：2012-12-01T18:50:13.403
> 
> 标签：android, android-ndk, openal

我正在尝试在 Android 中使用手动编译的 OpenAL 共享库。

```
include $(CLEAR_VARS)
LOCAL_MODULE:=openal
LOCAL_SRC_FILES:=../mylibs/libopenal.so
LOCAL_EXPORT_C_INCLUDES:=$(LOCAL_PATH)/include/AL
include $(PREBUILT_SHARED_LIBRARY) 
```

在 mylibs 文件夹中，我有 3 个文件：

```
lrwxr-xr-x  21:12 libopenal.so -> libopenal.so.1
lrwxr-xr-x  21:12 libopenal.so.1 -> libopenal.so.1.13.0
-rwxr-xr-x  22:33 libopenal.so.1.13.0 
```

一切正常，但在运行时我收到此错误：

```
E/AndroidRuntime(13604): Caused by: java.lang.UnsatisfiedLinkError: Cannot load library:         link_image[1848]:  1296 could not load needed library 'libopenal.so.1' for 'libopenaltest.so'     (load_library[1120]: Library 'libopenal.so.1' not found)
E/AndroidRuntime(13604):    at java.lang.Runtime.loadLibrary(Runtime.java:370)
E/AndroidRuntime(13604):    at java.lang.System.loadLibrary(System.java:535)
E/AndroidRuntime(13604):    at com.hz.openal.OpenActivity.<clinit>(OpenActivity.java:10)
E/AndroidRuntime(13604):    ... 15 more 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T13:28:27.753

像这样试试

```
LOCAL_MODULE := lib3rdparty-prebuilt
LOCAL_SRC_FILES := lib3rdparty.so
include $(PREBUILT_SHARED_LIBRARY)

LOCAL_SHARED_LIBRARIES += lib3rdparty-prebuilt 
```

我认为您缺少最后一行 LOCAL_SHARED_LIBRARIES .....

而且您在加载“libopenaltest.so”库之前没有加载“libopenal.so”库。在加载依赖库之前，需要使用 System.loadLibrary() 加载所有库。

# visual-studio - 我在哪里存储连接字符串，以便 Visual Studio 在设计时可以访问它？

> ID：13662589
> 
> 赞同：0
> 
> 时间：2012-12-01T18:50:22.193
> 
> 标签：visual-studio, connection-string, design-time, uitypeeditor

我有一些需要提取应用程序数据的自定义属性编辑器。这些在我的测试项目中效果很好，我可以在我的 app.config 文件中设置连接字符串。但是，在实际实践中，这些编辑器将在 Visual Studio 中运行。不在我的一个应用程序中。我在哪里可以存储我的连接字符串，以便它本身是数据（因此我可以在不同的环境中具有不同的值），并且在设计时可以在 Visual Studio 中的自定义编辑器中访问？

我在想我也许可以利用服务器资源管理器。但我不确定如何使用服务器资源管理器创建“全局上下文”，然后让我的所有控件在设计时都可以访问它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T17:31:09.417

我还没有完成这个，但我认为答案是创建一个视觉工作室扩展，在那里设置这些值，然后让我的控件期望该扩展在设计时出现。这将是一个非常小的受控环境，因此应该可以正常工作。

# c - 传递 'strcmp' 错误的参数 1/预期的 'const' char*' 但参数的类型为 'int'

> ID：13662591
> 
> 赞同：1
> 
> 时间：2012-12-01T18:50:53.820
> 
> 标签：c, file-io, struct

我今天来是带着对我的计划的普遍关注。我已经在这个项目上投入了大量的时间（我可以用来学习期末考试的时间），我觉得我需要暂时退出它。当我尝试运行它时，程序会告诉我这些错误。

```
lines 115, 120, 131, 136, 146:
  warning: passing argument 1 of 'strcmp' makes pointer from integer without a cast
  note: expected 'const char *' but argument is of type 'int' 
```

（请注意，这是一项正在进行的工作，并不是真的太实用，但如果您看到其他任何内容，请告诉我）

我的班级有一位非常...有趣的教授，他以同样有趣的方式授课，所以我在尝试理解该课程要求的某些方面时遇到了麻烦。非常感谢您提供的任何帮助。提前致谢

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>

#define MAX_ITEMS 1000

struct drink {
int drinkNum;
double drinkPrice;
}drinklist[10];

struct items {
double itemPrice;
};

struct raffle {
double rafValue;
};

int main(){
double preTickets, doorTickets, minBid;
int preSold, numItems, rafTickets = 0, rafPrizes, rafCost;

int i, numEvents, x;

FILE* fin;
fin = fopen("input.txt", "r");

// Line#1 from input file
fscanf(fin, "%lf %lf %d", &preTickets, &doorTickets, &preSold);

// Line#2 from input file
fscanf(fin, "%d %lf", &numItems, &minBid);

// This allocates space for the list of auction items dynamically. 

struct items* itemList = (struct items*)malloc(sizeof(struct items)*numItems);

// Line#3 from input file.
for(i = 0; i < numItems; i++){
    fscanf(fin, "%lf", &itemList[i].itemPrice);
}

// Line#4 fron input file.
fscanf(fin, "%d %d %d", &rafTickets, &rafCost, &rafPrizes);

// Same as the itemList. Creates enough space for the number of raffle prizes you need.
struct raffle* raffleList = (struct raffle*)malloc(sizeof(struct raffle)*rafPrizes);

// Line#5 from input file
for(i = 0; i < rafPrizes; i++){
    fscanf(fin, "%lf", &raffleList[i].rafValue);
}

struct drink drinklist[10];

// Line#6 from input file
for(i = 0; i < 10; i++){
    fscanf(fin, "%d", &drinklist[i].drinkNum);
}

 // Line#7 from input file
for(i = 0; i < 10; i++){
    fscanf(fin, "%lf", &drinklist[i].drinkPrice);
}

// This just prints out the output that has been read in so far.
// This will also show you how you can refer to the different members of data that you need later.
printf("%.2lf %.2lf %d\n", preTickets, doorTickets, preSold);
printf("%d %.2lf\n", numItems, minBid);

for(i = 0; i < numItems; i++){
    printf("%.2lf ", itemList[i].itemPrice);
}

printf("\n%d %d %d\n", rafTickets, rafCost, rafPrizes);

for(i = 0; i < rafPrizes; i++){
    printf("%.2lf ", raffleList[i].rafValue);
}

printf("\n");
for(i = 0; i < 10; i++){
    printf("%d ", drinklist[i].drinkNum);
}
printf("\n");
for(i = 0; i < 10; i++){
    printf("%.2lf ", drinklist[i].drinkPrice);
}
printf("\n");

// This frees the memory that you allocated dynamically.
free(itemList);
free(raffleList);

// loop that runs from from 0 to < numCommands and read in each command and evaluate it.

fscanf(fin, "%d", &numEvents);
fclose(fin);

int actLoop, boughtTickets, boughtRaffle, boughtDrink;
int itemPrice, currentBid, guestBid, bidOffer;
int guestRaf;
int drinkWanted;

for (actLoop=0; actLoop<numEvents; actLoop++); {

int action;

fscanf(fin, "%s", action);

if (strcmp(action, "BUY TICKET") == 0) {
    fscanf(fin, "%d", boughtTickets);
    printf("Sold tickets %d - %d", &preSold+1, &preSold+boughtTickets);
}

else if (strcmp(action, "BIDITEM") == 0) {
    fscanf(fin, "%d%d%.2lf", &itemList[i], &guestBid, &bidOffer);

    if (bidOffer < itemList[i].itemPrice + minBid) {
        printf("Bid for item %d rejected for person %d at %.2lf", &itemList[i], &guestBid, &bidOffer);
    }
    else
        printf("Bid for item %d accepted for person %d at %.2lf", &itemList[i], &guestBid, &bidOffer);
        itemList[i].itemPrice == bidOffer;
}

else if (strcmp(action, "CLOSEAUCTION") == 0) {

}

else if (strcmp(action, "BUY RAFFLE") == 0) {
    fscanf(fin, "%d%d", &boughtRaffle, &guestRaf);
    if (boughtRaffle > rafTickets) {
        boughtRaffle == rafTickets;
        rafTickets = rafTickets - boughtRaffle;
    }
        printf("Raffle Tickets %d - %d given to person %d", &rafTickets, &rafTickets+boughtRaffle, &guestBid);

}

else if (strcmp(action, "BUY DRINK") == 0) {
    fscanf(fin, "%d%d", &drinkWanted, &drinklist[i].drinkNum);
    if (drinklist[i].drinkNum < drinkWanted) {
        drinkWanted = drinklist[i].drinkNum - drinkWanted;
    }
    printf("Sold %d of drink %d", &drinklist[i].drinkNum, &drinkWanted);
        drinklist[i].drinkNum = drinklist[i].drinkNum - drinkWanted;

}
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T18:55:33.580

您正在将字符串读入`int`，您应该改用`char`数组：

```
char action[200];
fscanf(fin, "%199s", action); 
```

在这里你需要地址`boughtTickets`

```
fscanf(fin, "%d", &boughtTickets); 
```

在这里，您正在打印变量的地址而不是它们的值：

```
printf("Sold tickets %d - %d", &preSold+1, &preSold+boughtTickets); 
```

你明白了，请阅读一本好的 C 书，我推荐 K&R。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:55:12.543

`strmp`将字符串与另一个字符串进行比较，但对于您的程序，您将`int`( `action`) 与字符串进行比较。

也用于`fscanf(fin, "%s", action);` `fscanf`从文件输入描述符中读取字符串，`fin`因此类型`action`应该是 char 缓冲区

```
char action[256];

fscanf(fin, "%s", action);

if (strcmp(action, "BUY TICKET") == 0) { 
```

# json - RESTfull Web 服务中的 WSO2 ESB 和 JSON

> ID：13662592
> 
> 赞同：1
> 
> 时间：2012-12-01T18:50:55.930
> 
> 标签：json, rest, axis2, wso2, wso2esb

我正在使用 WSO2 Enterprise Service Bus 4.5.1。

我有一个带有 Axis2 的 RESTful Web 服务，我想要 JSON 格式的响应。

我按照这里的指令[http://wso2.org/library/knowledge-base/add-json-support-wso2-wsas](http://wso2.org/library/knowledge-base/add-json-support-wso2-wsas)但响应不是JSON，是XML

我忘了任何步骤吗？

有什么建议？？？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:11:07.963

您应该启用 JSON 消息格式化程序以接收 JSON 响应回来检查[这篇文章](http://vvratha.blogspot.com/2012/10/rest-support-in-wso2esb-handling-json.html)，它解释了如何在 wso2esb 中发送/接收 json 消息

# android - 使用 xml 文件作为可绘制资源

> ID：13662595
> 
> 赞同：1
> 
> 时间：2012-12-01T18:51:26.707
> 
> 标签：android, drawable

我的可绘制目录中有一个名为 off.xml 的 xml 文件（应该是一个红色圆圈）...

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="oval" >
<gradient android:startColor="#FFFF0000" android:endColor="#FFFF0000"
    android:angle="270"/> 
```

在我的主页上，我有以下 xml...

```
<LinearLayout android:layout_width="match_parent"
    android:layout_height="50dip" android:orientation="horizontal">    
<View android:layout_width="40dip"
    android:layout_height="0dip"  android:layout_weight="1"
    android:background="@drawable/off" />
</LinearLayout> 
```

我收到错误“无法将 @drawable/off 转换为可绘制对象。红色圆圈未显示。（我在此处放置了一个按钮以确保显示另一个小部件）

是什么导致了这个错误。我从这个论坛的另一个帖子中得到了这个应该可以工作的例子。谢谢，加里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:57:13.703

你的 @drawable/off 布局应该是

```
<?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android"> 
  <item><shape android:shape="oval">
    <gradient android:startColor="#FFFF00" android:endColor="#FFFF00"
      android:angle="270"/>
    </shape></item>
</selector> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T18:57:32.417

试试这个：

```
<?xml version="1.0" encoding="UTF-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval" >

    <gradient
        android:angle="270"
        android:endColor="#FFFF0000"
        android:startColor="#FFFF0000" />

</shape> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T19:36:27.660

两个问题：`</shape>`您的可绘制对象中缺少结束标记，并且`layout_height`您的视图为 0 或方向错误。

# java - 使用 DataInputStream 从 TCP 套接字读取的字节前不需要的 nul 字符

> ID：13662597
> 
> 赞同：0
> 
> 时间：2012-12-01T18:51:35.743
> 
> 标签：java, android, tcp, datainputstream, nul

我正在编写一个涉及连接到 TCP 服务器（我也写过）并从中发送/接收文本的 Android 应用程序。现在我的最终阅读（客户端）中有一个错误。

当我在 Eclipse 中使用调试器时，它显示我正在接收发送的所有字节，但是对于某些文本，如果我期望*n*字节，我将得到第一个*n - k*，一些*m* NUL 字节，然后是最后的*k - m*个有意义的字节。如果我正确地解释了这个问题，Java 会看到大量的 0 并决定在之后没有任何有用的内容可供读取（调试器显示字节数组和它转换为的字符串，但如果我尝试则将其丢弃进一步检查）。

我怎么能忽略 NUL 的大量涌入而只阅读重要的东西？

```
// Find out how many bytes we're expecting back
int count = dis.readInt(); // dis is a DataInputStream
dos.writeInt(count); // dos is a DataOutputStream

// Read that many bytes
byte[] received = new byte[count];
int bytesReceived = 0;
int bytesThisTime = 0;
while (-1 < bytesReceived && bytesReceived < count) {

    bytesThisTime = dis.read(received, 0, count);
    if (bytesThisTime <= 0) break;

    bytesReceived += bytesThisTime;
    String bytesToString = new String(received, 0, bytesThisTime, "UTF-8");
    sb_in.append(bytesToString);
    received = new byte[count];

}
in = sb_in.toString(); 
```

这是正在编写的服务器代码：

```
 // Convert the xml into a byte array according to UTF-8 encoding
            // We want to know how many bytes we're writing to the client
            byte[] xmlBytes = xml.getBytes("UTF-8");
            int length = xmlBytes.length;

            // Tell the client how many bytes we're going to send
            // The client will respond by sending that same number back
            dos.writeInt(length);
            if (dis.readInt() == length) {
              dos.write(xmlBytes, 0, length); // All systems go - write the XML
            }

            // We're done here
            server.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:05:47.770

代替：

```
String bytesToString = new String(received, "UTF-8"); 
```

和：

```
String bytesToString = new String(received, 0, bytesThisTime, "UTF-8"); 
```

基本上`dis.read(received, 0, count)`可以返回 0 到`count`. *告诉你这次读取*`bytesThisTime`了多少字节。但后来您使用整个数组，而不仅仅是实际读取的部分。

 *顺便说一句，考虑使用`InputStreamReader`which 将为您即时解码字符串（但`count`会有不同的语义）。[`IOUtils`此外通过API](https://commons.apache.org/io/api-release/org/apache/commons/io/IOUtils.html)仔细阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T00:38:05.000

> Java is seeing the huge amount of 0s and deciding that there's nothing useful to be read after

No. Java doesn't look at the data at all, let alone make semantic decisions like that.

> How can I ignore the massive influx of NUL and just read the important stuff?

There is no 'massive influx of NUL' to ignore. Java doesn't do that, TCP doesn't do that, nothing does that.

There are just programming errors in your own code.

I could detail those endlessly, but in essence you should be using DataInoutStream.readFully() instead of trying to replicate it with your own bug-ridden version.*

# jquery - jquery css设置按钮点击的可见性

> ID：13662601
> 
> 赞同：0
> 
> 时间：2012-12-01T18:51:52.147
> 
> 标签：jquery, html, css

我正在尝试在不同的边距上设置指标的可见性。我有一个滑块，有两个按钮 next n prev。我正在尝试在单击下一步按钮时显示活动幻灯片编号我正在这样做

```
$("#BtnNext").click(function (event) {
            {
                if ($('#MainContainer').css("marginLeft") == "0px") {
                    $('#FirstPage').css("visibility", "hidden");
                    $('#SecondPage').css("visibility", "visible");
                    $('#ThirdPage').css("visibility", "Hidden");
                    $('#FourthPage').css("visibility", "Hidden");
                }
                if ($('#MainContainer').css("marginLeft") == "-1425px") {
                    $('#FirstPage').css("visibility", "Hidden");
                    $('#SecondPage').css("visibility", "Hidden");
                    $('#ThirdPage').css("visibility", "visible");
                    $('#FourthPage').css("visibility", "Hidden");
                }
                if ($('#MainContainer').css("marginLeft") == "-2850px") {
                    $('#FirstPage').css("visibility", "Hidden");
                    $('#SecondPage').css("visibility", "Hidden");
                    $('#ThirdPage').css("visibility", "Hidden");
                    $('#FourthPage').css("visibility", "visible");
                }
                if ($('#MainContainer').css("marginLeft") == "-4275px") {
                    $('#FirstPage').css("visibility", "visible");
                    $('#SecondPage').css("visibility", "Hidden");
                    $('#ThirdPage').css("visibility", "Hidden");
                    $('#FourthPage').css("visibility", "Hidden");
                }
            }
        }); 
```

但问题是，在成功完成一轮后，当它再次进行第一张幻灯片时，第一个指示器不会进入可见模式。请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T21:23:07.263

这应该可以工作，因为它设置了默认值：

```
$('#BtnNext').click(function (event) {
    var marginLeft = $('#MainContainer').css('marginLeft'),
        pages = $('#FirstPage, #SecondPage, #ThirdPage, #FourthPage'),
        page = '';
    switch case (marginLeft) {
    case '0px':
        page = '#SecondPage';
        break;
    case '-1425px':
        page = '#ThirdPage';
        break;
    case '-2850px':
        page = '#FourthPage';
        break;
    default:
        page = '#FirstPage';
    }
    pages.css('visibility', 'hidden').filter(page).css('visibility', 'visible');
}); 
```

如果它不起作用，请设置一个[jsFiddle](http://jsfiddle.net/)并在您的问题中链接到它。

# c# - 匹配正则表达式字符到函数调用

> ID：13662603
> 
> 赞同：1
> 
> 时间：2012-12-01T18:52:10.823
> 
> 标签：c#, regex, pushdown-automaton

我正在使用 C#

我希望能够在我的正则表达式语言中调用特定字符的函数，并且想知道这是否可能。例如，如果我有我的模式，因为`^[0-9]*$`我想在`foo()`找到 7 时调用该函数。因此，如果我有字符串`"0129384927377"`，它将调用该函数`foo`三次。

有什么办法吗？

如果您需要上下文，我正在尝试尽可能简单地构建*DPDA（确定性下推自动机）*，但不确定最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:56:07.753

像这样：

```
Regex.Matches("0129384927377","7").Count 
```

# java - 在 Android 应用程序上登录和注册时遇到问题

> ID：13662605
> 
> 赞同：0
> 
> 时间：2012-12-01T18:52:30.990
> 
> 标签：java, android, sqlite

我正在开发一个 android 应用程序，并希望能够进行注册和登录。我遵循了一个在线教程，但遇到了问题，我不知道如何解决它。这也是我的第一个安卓应用。谢谢你尽你所能的帮助！

```
import org.json.JSONException;
import org.json.JSONObject;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.EditText; 
import android.widget.TextView;

import com.example.cs309.gotoclass.library.DatabaseHandler;
import com.example.cs309.gotoclass.library.UserFunctions;

public class LoginActivity extends Activity {
Button btnLogin;
Button btnLinkToRegister;
EditText inputEmail;
EditText inputPassword;
TextView loginErrorMsg;

// JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_ERROR = "error";
private static String KEY_ERROR_MSG = "error_msg";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_EMAIL = "email";
private static String KEY_CREATED_AT = "created_at";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_login_screen);

    // Importing all assets like buttons, text fields
    inputEmail = (EditText) findViewById(R.id.loginEmail);
    inputPassword = (EditText) findViewById(R.id.loginPassword);
    btnLogin = (Button) findViewById(R.id.btnLogin);
    btnLinkToRegister = (Button) findViewById(R.id.btnLinkToRegisterScreen);
    loginErrorMsg = (TextView) findViewById(R.id.login_error);

    // Login button Click Event
    btnLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            String email = inputEmail.getText().toString();
            String password = inputPassword.getText().toString();
            UserFunctions userFunction = new UserFunctions();
            JSONObject json = userFunction.loginUser(email, password);

            // check for login response
            try {
                if (json.getString(KEY_SUCCESS) != null) {
                    loginErrorMsg.setText("");
                    String res = json.getString(KEY_SUCCESS);
                    if(Integer.parseInt(res) == 1){
                        // user successfully logged in
                        // Store user details in SQLite Database
                        DatabaseHandler db = new     DatabaseHandler(getApplicationContext());
                        JSONObject json_user = json.getJSONObject("user");

                        // Clear all previous data in database
                        userFunction.logoutUser(getApplicationContext());
                        db.addUser(json_user.getString(KEY_NAME), json_user.getString(KEY_EMAIL), json.getString(KEY_UID), json_user.getString(KEY_CREATED_AT));                        

                        // Launch Dashboard Screen
                        Intent dashboard = new Intent(getApplicationContext(), HomeScreenStudent.class);

                        // Close all views before launching Dashboard
                        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        startActivity(dashboard);

                        // Close Login Screen
                        finish();
                    }else{
                        // Error in login
                        loginErrorMsg.setText("Incorrect username/password");
                    }
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
        }
    });

    // Link to Register Screen
    btnLinkToRegister.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            Intent i = new Intent(getApplicationContext(),
                    RegisterActivity.class);
            startActivity(i);
            finish();
        }
    });
}

    public void LoginHome(View view){
        Intent intent = new Intent(this, HomeScreenStudent.class);
        startActivity(intent);
    }

public void LoginGuest(View view){
    Intent intent = new Intent(this, HomeScreenGuest.class);
    startActivity(intent);
}
} 
```

但我认为问题出在我的 JSONParser 类中

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line + "n");
        }
        is.close();
        json = sb.toString();
        Log.e("JSON", json);
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

这是我得到的错误日志

> 12-01 10:47:45.995：E/AndroidRuntime(21570)：致命异常：主要 12-01 10:47:45.995：E/AndroidRuntime(21570)：android.os.NetworkOnMainThreadException 12-01 10:47:45.995： E/AndroidRuntime(21570): 在 android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1118) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在 java.net.InetAddress.lookupHostByName(InetAddress .java:385) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在 java.net.InetAddress.getAllByNameImpl(InetAddress.java:236) 12-01 10:47:45.995: E/AndroidRuntime(21570 ): 在 java.net.InetAddress.getAllByName(InetAddress.java:214) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在 org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator. java:137) 12-01 10:47:45.995: E/AndroidRuntime(21570): at org.apache.http。impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164) 12-01 10:47:45.995: E/AndroidRuntime(21570): at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119 ) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在 org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360) 12-01 10:47:45.995: E/AndroidRuntime (21570)：在 org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:670) 12-01 10:47:45.995：E/AndroidRuntime(21570)：在 org.apache.http.impl。 client.AbstractHttpClient.execute(AbstractHttpClient.java:509) 12-01 10:47:45.995: E/AndroidRuntime(21570): at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487) 12 -01 10:47:45.995：E/AndroidRuntime(21570)：在 com.example.cs309.gotoclass.library。JSONParser.getJSONFromUrl(JSONParser.java:42) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在 com.example.cs309.gotoclass.library.UserFunctions.registerUser(UserFunctions.java:62) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在 com.example.cs309.gotoclass.RegisterActivity$1.onClick(RegisterActivity.java:55) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在android.view.View.performClick(View.java:4223) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在 android.view.View$PerformClick.run(View.java:17275) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在 android.os.Handler.handleCallback(Handler.java:615) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在 android.os.Handler .dispatchMessage(Handler.java:92) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在 android.os.Looper.loop(Looper.java:137) 12-01 10:47:45.995:E/AndroidRuntime(21570): 在 android.app.ActivityThread.main(ActivityThread.java:4898) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在 java.lang.reflect.Method.invokeNative(Native方法) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在 java.lang.reflect.Method.invoke(Method.java:511) 12-01 10:47:45.995: E/AndroidRuntime(21570) : 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1006) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在 com.android.internal.os.ZygoteInit.main （ZygoteInit.java:773）12-01 10:47:45.995：E/AndroidRuntime（21570）：在 dalvik.system.NativeStart.main（本机方法）E/AndroidRuntime(21570): 在 java.lang.reflect.Method.invoke(Method.java:511) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在 com.android.internal.os.ZygoteInit $MethodAndArgsCaller.run(ZygoteInit.java:1006) 12-01 10:47:45.995: E/AndroidRuntime(21570): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773) 12-01 10 ：47：45.995：E/AndroidRuntime（21570）：在dalvik.system.NativeStart.main（本机方法）E/AndroidRuntime(21570): 在 java.lang.reflect.Method.invoke(Method.java:511) 12-01 10:47:45.995: E/AndroidRuntime(21570): 在 com.android.internal.os.ZygoteInit $MethodAndArgsCaller.run(ZygoteInit.java:1006) 12-01 10:47:45.995: E/AndroidRuntime(21570): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:773) 12-01 10 ：47：45.995：E/AndroidRuntime（21570）：在dalvik.system.NativeStart.main（本机方法）

感谢你们提供的任何帮助！

更新：

我认为我在 AsyncTask 的正确轨道上，但仍然没有，所以任何帮助将不胜感激！

```
public class RegisterActivity extends Activity {
Button btnRegister;
Button btnLinkToLogin;
EditText inputFullName;
EditText inputEmail;
EditText inputPassword;
TextView registerErrorMsg;

//JSON Response node names
private static String KEY_SUCCESS = "success";
private static String KEY_UID = "uid";
private static String KEY_NAME = "name";
private static String KEY_EMAIL = "email";
private static String KEY_CREATED_AT = "created_at";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_register);

    // Importing all assets like buttons, text fields
    inputFullName = (EditText) findViewById(R.id.registerName);
    inputEmail = (EditText) findViewById(R.id.registerEmail);
    inputPassword = (EditText) findViewById(R.id.registerPassword);
    btnRegister = (Button) findViewById(R.id.btnRegister);
    btnLinkToLogin = (Button) findViewById(R.id.btnLinkToLoginScreen);
    registerErrorMsg = (TextView) findViewById(R.id.register_error);

    // Register Button Click event
    btnRegister.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            //String name = inputFullName.getText().toString();
            //String email = inputEmail.getText().toString();
            //String password = inputPassword.getText().toString();

            new RegisterTask().execute();
        }
    });

    // Link to Login Screen
    btnLinkToLogin.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            Intent i = new Intent(getApplicationContext(),
                    LoginActivity.class);
            startActivity(i);
            // Close Registration View
            finish();
        }
    });
}

class RegisterTask extends AsyncTask<String, String, String> {
int success;

@Override
protected void onPreExecute() {
    super.onPreExecute();
}

@Override
protected String doInBackground(String... args) {
    // TODO Auto-generated method stub
    String email = inputEmail.getText().toString();
    String password = inputPassword.getText().toString();
    String name = inputFullName.getText().toString();

    UserFunctions userFunction = new UserFunctions();
    JSONObject json = userFunction.registerUser(name, email, password);

    Log.d("Create Response", json.toString());

    try {
        int success = json.getInt(KEY_SUCCESS);
        if (success == 1) {
            // DATABASE HANDLER
            // user successfully logged in
            // Store user details in SQLite Database
            DatabaseHandler db = new DatabaseHandler(
                    getApplicationContext());
            JSONObject json_user = json.getJSONObject("user");

            // Clear all previous data in database
            userFunction.logoutUser(getApplicationContext());

            db.addUser(json_user.getString(KEY_NAME),
                    json_user.getString(KEY_EMAIL),
                    json_user.getString(KEY_UID),
                    json_user.getString(KEY_CREATED_AT));

        }
    } catch (JSONException e) {
        e.printStackTrace();
    }
    return null;
}

protected void onPostExecute(String file_url) {
if (success == 1) {
        Intent dashboard = new Intent(getApplicationContext(), LoginActivity.class);
        dashboard.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
        startActivity(dashboard);
        finish();
}else{
    //Some Error

 }
}
}
} 
```

还有错误日志...

> 块引用

12-02 20:45:23.140: W/dalvikvm(28208): threadid=13: 线程以未捕获的异常退出 (group=0x415e62a0) 12-02 20:45:23.140: E/AndroidRuntime(28208): 致命异常: AsyncTask ＃1 12-02 20：45：23.140：E / AndroidRuntime（28208）：java.lang.RuntimeException：执行doInBackground（）时发生错误12-02 20：45：23.140：E / AndroidRuntime（28208）：在android .os.AsyncTask$3.done(AsyncTask.java:299) 12-02 20:45:23.140: E/AndroidRuntime(28208): at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273) 12 -02 20:45:23.140: E/AndroidRuntime(28208): 在 java.util.concurrent.FutureTask.setException(FutureTask.java:124) 12-02 20:45:23.140: E/AndroidRuntime(28208): 在 java .util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307) 12-02 20:45:23.140: E/AndroidRuntime(28208): 在 java.util.concurrent。FutureTask.run(FutureTask.java:137) 12-02 20:45:23.140: E/AndroidRuntime(28208): 在 android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230) 12-02 20:45 :23.140: E/AndroidRuntime(28208): 在 java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076) 12-02 20:45:23.140: E/AndroidRuntime(28208): 在 java.util.concurrent。 ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569) 12-02 20:45:23.140: E/AndroidRuntime(28208): at java.lang.Thread.run(Thread.java:856) 12-02 20:45: 23.140: E/AndroidRuntime(28208): 由: java.lang.NullPointerException 12-02 20:45:23.140: E/AndroidRuntime(28208): at com.example.cs309.gotoclass.RegisterActivity$RegisterTask.doInBackground(RegisterActivity. java:89) 12-02 20:45:23.140: E/AndroidRuntime(28208): 在 com.example.cs309.gotoclass.RegisterActivity$RegisterTask。doInBackground(RegisterActivity.java:1) 12-02 20:45:23.140: E/AndroidRuntime(28208): 在 android.os.AsyncTask$2.call(AsyncTask.java:287) 12-02 20:45:23.140: E /AndroidRuntime(28208)：在 java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T18:58:40.930

请不要在主线程上发出网络请求。

```
 JSONObject json = userFunction.loginUser(email, password); 
```

请改用线程、处理程序/异步任务。

参考[这个](http://www.vogella.com/articles/AndroidPerformance/article.html)

# c - 创建基于命令行参数的基本计算器时遇到问题

> ID：13662607
> 
> 赞同：3
> 
> 时间：2012-12-01T18:52:45.603
> 
> 标签：c

我试图创建一个简单的计算器，它接收来自用户的 3 个参数，[Number 1] [operator] [Number 2]。运算符表示要进行的计算（+、-、x、/）。我决定为操作员使用开关盒。但是我似乎无法让我的代码正常工作。看起来很简单，但输出始终是默认的开关盒。

谢谢您的帮助。

```
#include <stdio.h>

int main(int argc, char *argv[]) {
    int a,b,sol;
    char op;
    if ( argc != 4) {
         printf("Usage: calc [operand_1] [operator] [operand_2]\n");
         break;
    } 

    a = atoi(argv[1]);
    b = atoi(argv[3]);
    op = argv[2];

    switch (op)
    {
    case '+':
        sol=a+b;
        printf("%i\n",sol);
        break;
    case '-':
        sol=a-b;
        printf("%i\n",sol);
        break;        
    case 'x':
        sol=a*b;
        printf("%i\n",sol);
        break;       
    case '/':
        sol=a/b;
        printf("%i\n",sol);
        break;        
    default:
        printf("Invalid Operator \n");
    }

    return 0; 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T18:55:15.780

`argv[2]`是一个字符串，但在你的开关中你比较一个字符。

改为这样做：

```
if(strcmp(op,"+") == 0)
   sol=a+b;

// etc
printf("%i\n",sol); 
```

或者：

```
 op = *argv[2]; // get first char

  // rest of your code 
```

# jquery - 从元素中用 jQuery 填充 textarea。就快结束了

> ID：13662612
> 
> 赞同：0
> 
> 时间：2012-12-01T18:53:12.397
> 
> 标签：jquery

只是在这里需要一些帮助

```
$(document).ready(
          function() {
             $('#submitCart').click(function() {
               var ListItems = $('.theList').text();
               var PriceItems = $('.theList li').attr('data-points');
               var GrandTot = $('.totaler').text();
             $('#message').text(ListItems + PriceItems + GrandTot);
        });
    }); 
```

所以它有效，感谢我最近发表的另一篇文章，我拥有一切`.html`而不是`.text`，现在我的问题是当你点击`#submitCart`

清单是这样出来的

```
item2item2item2 2000 total = $6000 
```

我希望 textarea 像这样阅读

```
Item2 = 2000
Item2 = 2000
Item2 = 2000
Total = $6000 
```

我该怎么做？我试着`<br>`像这样做一个中间，`+<br>+`这没有用

有人有好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:58:32.623

您还有一些工作要做......`.attr`只获取第*一个*匹配元素的属性，即使它确实返回了所有这些元素，您也必须在连接之前进行解析。反正：

```
var text = '';
var total = 0;

$(".theList li").each(function () {
   var string = $(this).text();
   var points = parseInt($(this).data('points'));

   //capitalize first letter of string
   text += string.charAt(0).toUpperCase() + string.slice(1)
   //add line break at the end
      + ' = ' + points + "\n";

   total += points;
});

//I think calculating total is easier than trying to manipulate $(".totaler")
text += "Total = $" + total;
$("#message").text(text); 
```

# javascript - HTML 发布请求参数

> ID：13662615
> 
> 赞同：0
> 
> 时间：2012-12-01T18:53:36.123
> 
> 标签：javascript, ajax

有什么办法可以找出从 Firefox 发送到网站的 post 请求参数是什么？我尝试使用 HTTPFox 插件，虽然它显示请求是 post，但我想知道 post 参数及其值。

例如： http: [//www.farfetch.com/shopping/women/dresses-1/items.aspx#ps=2&pv=180&oby=5](http://www.farfetch.com/shopping/women/dresses-1/items.aspx#ps=2&pv=180&oby=5)，当按下“下一个”时，请求调用是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:13:40.117

试试[Firebug](https://getfirebug.com/)，在控制台选项卡中你会找到你的请求，点击它后所有信息都会得到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T19:19:10.237

你绝对应该得到[Firebug](https://getfirebug.com/)。这是一个 Firefox 插件，为 Web 开发添加了大量实用程序。

安装后，该按钮将出现在导航工具栏上。单击它，进入“网络”选项卡并启用它。

您会在发出请求时看到它们出现在面板中：只需单击其中一个，它将展开显示更多详细信息。如果是 POST 请求，它将有一个名为“Post”的子选项卡，它将向您显示请求的内容。

# java - 如何将文本添加到 JFrame？

> ID：13662618
> 
> 赞同：10
> 
> 时间：2012-12-01T18:53:51.927
> 
> 标签：java, swing, jframe, windowbuilder

所以我正在使用 Eclipse WindowBuilder 设计一个 JFrame。此特定帧是一条错误消息，指出用户提供了无效凭据。我添加了一个按钮来退出框架，现在我需要显示实际的错误消息“指定的登录凭据无效。请提供有效的凭据。”

我做了一些搜索，每个人都说要使用 JLabel，但是当我创建我的 JLabel 并在其中输入文本时，没有自动换行或任何东西，所以我无法将标签放在我的框架内。

什么是简单地在 JFrame 的中心显示消息的简单方法？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T18:56:28.410

要为文本创建标签：

```
JLabel label1 = new JLabel("Test"); 
```

要更改标签中的文本：

```
label1.setText("Label Text"); 
```

最后清除标签：

```
label1.setText(""); 
```

您所要做的就是将标签放置在您的布局中，或者您正在使用的任何布局系统中，然后将其添加到 JFrame...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T20:37:10.907

与其浪费时间设计一个`JFrame`只是为了显示错误消息，您可以使用`JOptionPane`默认模式下的一个：

```
import javax.swing.JOptionPane;

public class Main {

    public static void main(String[] args) {
        JOptionPane.showMessageDialog(null, "Your message goes here!","Message", JOptionPane.ERROR_MESSAGE);
    }
} 
```

![在此处输入图像描述](../Images/e80409bc54a9e6c01be659832fc2218b.png)

PS 如果您想学习 Swing，请停止使用 Windowbuilder。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-02T01:04:47.330

> 当我创建我的 JLabel 并向其中输入文本时，没有自动换行或任何东西

HTML 格式可用于在任何提供样式文本的 Swing 组件中导致自动换行。EG 如[this answer所示](https://stackoverflow.com/questions/7696347/to-break-a-message-in-two-or-more-lines-in-joptionpane/7707397#7707397)。

![](../Images/57798f388398150aa8fc1f90fc12eaf9.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-02T18:43:12.910

将文本添加到 JFrame 的最简单方法：

```
JFrame window = new JFrame("JFrame with text"); 
window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
window.setLayout(new BorderLayout());
window.add(new JLabel("Hello World"), BorderLayout.CENTER);
window.pack();
window.setVisible(true);
window.setLocationRelativeTo(null); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-22T05:01:12.310

您可以使用以下内容添加多行标签：

```
JLabel label = new JLabel("My label");

label.setText("<html>This is a<br>multline label!<br> Try it yourself!</html>"); 
```

从这里，只需使用 add() 方法将标签添加到框架中，一切就绪！

# php - 从 PHP 获取数据以在 HTML 中工作

> ID：13662619
> 
> 赞同：0
> 
> 时间：2012-12-01T18:53:52.757
> 
> 标签：php, ajax

我尝试了很多事情，但没有一个成功。我试图在选择框（选择以提取资产中心数据）后更改评级选项。它获取 php 文件中的数据，但我不知道如何处理 html 文件中的数据。

数据 servername 联系人分类等级 Server1 Ray Production A Server2 Eric Non-Production B

> --
> 
> ## -- 数据库：`ipreservation`
> 
> * * *
> 
> --
> 
> ## -- 表的表结构`acdata`
> 
> ```
> CREATE TABLE IF NOT EXISTS `acdata` (
>   `servername` varchar(25) NOT NULL,
>   `contact` varchar(20) NOT NULL,
>   `classification` varchar(15) NOT NULL,
>   `rating` varchar(4) NOT NULL 
> ) 
> ENGINE=InnoDB DEFAULT
> CHARSET=latin1; 
> ```
> 
> --
> 
> ## -- 为表转储数据`acdata`
> 
> ```
> INSERT INTO `acdata` (`servername`, `contact`, `classification`,`rating`) 
> VALUES ('Server1', 'Ray', 'Production', 'A'),
> ('Server2','Eric', 'Non-Production', 'B'); 
> ```
> 
> /*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */; /* !40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */; /* !40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;

servertest.html

```
<html>
<head>
<script>
function showServer(str)
{
if (str=="")
  {
  document.getElementById("txtHint").innerHTML="";
  return;
  } 
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
    }
  }
var server = document.getElementById('existingserver').value;
xmlhttp.open("GET","servertest.php?q="+server,true);
xmlhttp.send();

}
</script>
</head>
<body>

<form>
<label>Existing Server</label><input type="text" name="existingserver" id="textfield" maxlength="15"/>
<input type="checkbox" onclick="showServer(this.value)" >Select to Pull Asset Center Data<br>
<br />
<br />
Rating
<select name="rating" id="rating">
  <option value="A">A</option>
  <option value="B">B</option>
  <option value="C">C</option>
  <option value="D">D</option>
</select>
</form>
<br />

<div id="txtHint"><b>Server info will be listed here.</b></div>

</body>
</html> 
```

服务器测试.php

> `$con = mysql_connect('localhost', 'assignip', 'assignip'); if (!$con) { die('Could not connect: ' . mysql_error()); }` mysql_select_db("ipreservation", $con); $sql = "SELECT * FROM acdata WHERE servername = '".$q."'"; $result = mysql_query($sql); echo "服务器名联系人分类等级";
> 
> ```
> while($row = mysql_fetch_array($result))   {
>     echo "<tr>";
>         echo "<td>" . $row['servername'] . "</td>";
>         echo "<td>" . $row['contact']. "</td>";
>         echo "<td>" . $row['classification'] . "</td>";
>         echo "<td>" . $row['rating'] . "</td>";
>     echo "</tr>";   
> } 
> echo "</table>"; 
> ```
> 
> mysql_close($con); ?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:13:14.217

您的代码使用 jQuery 简化并可以正常工作，请在下面找到您更新的代码

```
<html>
    <head>
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
        <script type="text/javascript" >
        $(document).ready(function(){
            var id = $('#existingserver').val();            
            $('#assetCenter').click(function(){
                var id = $('#textfield').val();
                $.get('servertest.php',{q:id}, function(htmlData){
                    $('#txtHint').html(htmlData);                    
                    $('#rating').val(htmlData); 
                });
            });
        });    
        </script>
    </head>
    <body>

        <form>
            <label>Existing Server</label><input type="text" name="existingserver" id="textfield" maxlength="15"/>

            <input type="checkbox" id="assetCenter" onclick="showServer(this.value)" >Select to Pull Asset Center Data<br>
            <br />
            <br />
            Rating
            <select name="rating" id="rating">
                <option value="A">A</option>
                <option value="B">B</option>
                <option value="C">C</option>
                <option value="D">D</option>
            </select>
        </form>
        <br />

        <div id="txtHint"><b>Server info will be listed here.</b></div>
    </body>
</html> 
```

# javascript - 使用 JavaScript 正则表达式解析查询字符串

> ID：13662621
> 
> 赞同：2
> 
> 时间：2012-12-01T18:53:56.377
> 
> 标签：javascript, regex, query-string

目标是解析出嵌入在 URL 哈希部分中的参数。StackOverflow 社区上的某个人提供了以下代码作为对类似问题的回应。社区选择此代码作为合适的答案，因此将其集成到我自己的代码中，如下所示：

```
Utils.parseQueryStringArgs=function(queryString){
    var result = {}, queryString = queryString.substring(1),
        re = /([^&=]+)=([^&]*)/g, m;

    while (m = re.exec(queryString)) {
            result[decodeURIComponent(m[1])] = decodeURIComponent(m[2]);
    }

    return result;
} 
```

对正则表达式的了解为零，上面的“re”变量对我来说毫无意义，但代码的结构是有意义的。它完美地工作，直到窒息以下表达式：

```
friendlySeriesName=Test%3A%20Fund.Feeder%20[class%20A]%20%26gt%3B%26gt%3B%20Morgan%2C%20Harry%20%40%201 
```

预期的行为是解析出属性名称“friendlySeriesName”和属性值“Test Fund.Feeder [class A] >> Morgan, Harry @ 1”。然而，正在发生的是对属性名称的正确解析和“Test: Fund.Feeder [class A]”的解析值。此解析函数将删除大于号 (">>") 之外的所有内容。

问题：您能否修改变量“re”的值，以使上述函数在提供的示例表达式上正常工作，或者提供一种万无一失的方法来从编码的 url 字符串的哈希中解析出键值对?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T18:57:49.873

问题不在于 JavaScript 代码。问题是查询字符串中提供的值。

某处的某些代码*首先*`>`编码（即作为HTML 字符实体），然后 URI 转义 & 符号和分号离开. 嗬！`&gt;` *`%26gt%3b`*

 *FWIW，一个快速的“hack”是首先转换`%26gt%3b`为`%3e`（或`>`）：

```
// original stuff
var result = {}, queryString = queryString.substring(1),
    re = /([^&=]+)=([^&]*)/g, m;
// hack
queryString = queryString.replace(/%26gt%3b/g, "%3e");
// rest as normal 
```

`<`对于其他有问题的初始编码（例如as`&lt;`和`&`as `&amp;`）也可能需要这样做。*

# ruby-on-rails-3 - 模型关联不起作用 Rails 3

> ID：13662623
> 
> 赞同：0
> 
> 时间：2012-12-01T18:54:25.717
> 
> 标签：ruby-on-rails-3, model, associations

以下是我的联想：

*   由于用户有很多项目
*   一个项目属于一个用户

用户模型（user.rb）

```
 class User < ActiveRecord::Base
     has_many :projects
     attr_accessible: :available, :department, :name, :skills, :title, :photo
  end 
```

项目模式（project.rb）

```
 class Project < ActiveRecord::Base
     belongs_to :user, :foreign_key => :user_id
     attr_accessible :project_name
  end 
```

这是我的 show.erb.html 文件中的代码

```
 <%= @user.projects.each do |project| %>
    <p><%= projects.project_name %></p>
  <% end %> 
```

但这只是显示两个像这样的括号“[]”。这让我觉得这是一个空数组。

因此，当我`Project.find(1)`在 rails 控制台中运行以查看项目是否与用户相关联时，它会吐出：

```
 => #<Project id: 2, project_name: "This is a project. ", created_at: "2012-11-12 02:29:28", updated_at: "2012-11-12 02:29:28", user_id: nil> 
```

用户 ID 无？是什么赋予了？！

有人知道我在做什么错吗？谢谢！

**编辑：**

这是添加外键的迁移：

```
 class AddForeignKeyToProjects < ActiveRecord::Migration
    def change
      add_column :projects, :user_id, :integer
    end
  end 
```

**编辑 2**

这是控制器中的实例（这可能是问题所在）

项目负责人

```
 def new
    @project = Project.new(params[:project], params[:user_id])   
  end 
```

用户控制器

```
 def show
    @user = User.find(params[:id], params[:project_name])

    respond_to do |format|
       format.html # show.html.erb
       format.json { render json: @user }
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:01:24.383

在迭代`project`中你的目标不是`projects`

```
<%= @user.projects.each do |project| %>
  <p><%= project.project_name %></p>
<% end %> 
```

---这是我将项目分配给用户的意思的示例---在此代码中，我是用户捐赠和会员，但想法相同---

```
donation = Donation.new(amount: random_value.to_c,
                          date_given: Random.date(1000).to_date,
                          donation_type: ['tithes', 'offering', 'undisclosed', 'building-fund'].sample)
  member = Member.all.sample
  donation.member= member
  donation.save 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T13:56:43.833

如果您使用约定名称，则表示您`user_id`在**Project**表中有一个，您无需`foreign_key`在**Project**模型中指定，您只需要：

```
belongs_to :user 
```

我不确定这是否是您的错字：

```
<%= projects.project_name %> should be <%= project.project_name %> 
```

关于您的控制器，我想您有`current_user`定义当前用户登录的方法。因此，如果您想创建`user_id`与 current_user 的 id 关联的新项目，您应该编写以下代码：

```
def new
  @project = current_user.projects.build # Create new project with user_id = current_user.id
end 
```

如果您想创建新项目，您的`create`操作将如下所示：

```
def create
  @project = current_user.projects.create(params[:project])

  if @project.save # save project success
    # do some thing
  else
    # do some thing
  end
end 
```

这些是我可以向您展示的基本动作，因为我不知道您如何构建表单，以及您的路线是什么样的。

当您向用户展示时，如果您使用 RESTful 路由，您的路由将如下所示：

```
`abc.com/users/:id/show` 
```

什么是 RESTful 路由？如果你想知道你应该检查这个[Recource routing](http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default)。

然后，如果你想找到一个用户，你可以使用`params[:id]`：

```
def show
  @user = User.find(params[:id])
  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @user }
  end
end 
```

您找不到具有 的用户`params[:project_name]`，您的用户模型没有该属性，它是项目的属性。

# ruby - 错误：安装导轨时出错：错误：无法构建 gem 原生扩展

> ID：13662625
> 
> 赞同：1
> 
> 时间：2012-12-01T18:54:27.060
> 
> 标签：ruby, xcode, macos

我在我的 Rails 应用程序上遇到了一些 json 错误（它是在一个非常旧的版本上），在其他地方遇到了一些 mysql 错误，所以我用 rvm 将所有东西重新安装到最新版本。我在谷歌上搜索的很多东西都是旧版本的 xcode，但是当我运行时，`xcodebuild -version`我得到：

```
Xcode 4.5.2
Build version 4G2008a 
```

这是 gem install rails 上的完整错误：

```
jakes-MacBook-Pro:~ mctesterson$ sudo gem install rails
Fetching: i18n-0.6.1.gem (100%)
Fetching: multi_json-1.4.0.gem (100%)
Fetching: activesupport-3.2.9.gem (100%)
Fetching: builder-3.0.4.gem (100%)
Fetching: activemodel-3.2.9.gem (100%)
Fetching: rack-1.4.1.gem (100%)
Fetching: rack-cache-1.2.gem (100%)
Fetching: rack-test-0.6.2.gem (100%)
Fetching: journey-1.0.4.gem (100%)
Fetching: hike-1.2.1.gem (100%)
Fetching: tilt-1.3.3.gem (100%)
Fetching: sprockets-2.2.2.gem (100%)
Fetching: erubis-2.7.0.gem (100%)
Fetching: actionpack-3.2.9.gem (100%)
Fetching: arel-3.0.2.gem (100%)
Fetching: tzinfo-0.3.35.gem (100%)
Fetching: activerecord-3.2.9.gem (100%)
Fetching: activeresource-3.2.9.gem (100%)
Fetching: mime-types-1.19.gem (100%)
Fetching: polyglot-0.3.3.gem (100%)
Fetching: treetop-1.4.12.gem (100%)
Fetching: mail-2.4.4.gem (100%)
Fetching: actionmailer-3.2.9.gem (100%)
Fetching: rake-10.0.2.gem (100%)
Fetching: rack-ssl-1.3.2.gem (100%)
Fetching: thor-0.16.0.gem (100%)
Fetching: json-1.7.5.gem (100%)
Building native extensions.  This could take a while...
ERROR:  Error installing rails:
    ERROR: Failed to build gem native extension.

        /Users/mctesterson/.rvm/rubies/ruby-1.9.3-p327/bin/ruby extconf.rb
creating Makefile

make
compiling generator.c
make: /usr/bin/gcc-4.2: No such file or directory
make: *** [generator.o] Error 1

Gem files will remain installed in /Users/mctesterson/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/json-1.7.5 for inspection.
Results logged to /Users/mctesterson/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/gems/1.9.1/gems/json-1.7.5/ext/json/ext/generator/gem_make.out 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T22:28:56.567

看起来它在错误的地方寻找我的 gcc 东西。

我运行了以下命令，它起作用了：

`sudo ln -s /usr/local/bin/gcc-4.2 /usr/bin/gcc-4.2`

（看了这篇文章，发现在Franco的解决方案下：[error: failed to build gem native extension when installed rails on mac mountian lion os](https://stackoverflow.com/questions/11802918/error-failed-to-build-gem-native-extension-when-installing-rails-on-mac-mountia)）

# javascript - Chrome 打包应用程序：getUserMedia() 音频输入权限

> ID：13662627
> 
> 赞同：4
> 
> 时间：2012-12-01T18:54:31.240
> 
> 标签：javascript, google-chrome, webrtc, web-audio-api, google-chrome-app

我正在将我的 Web 应用程序移植到 Chrome 打包应用程序中，并且我大量使用 Web Audio API（效果很好），但我使用 getUserMedia() 来获取音频。通常会出现一个状态栏，请求用户的许可。在打包的应用程序中，这不会发生，并且会引发错误 1（权限被拒绝）。有没有人在打包的应用程序设置中对此有任何经验，或者知道我是否需要添加某些权限？

哦，我也做了一些研究，发现了一些用 chrome 提交的错误，但我不知道它们中的任何一个是否已经实现。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-02T09:36:43.810

您必须在 manifest.json 中添加适当的权限。然后它应该在用户安装您的应用程序时通知用户。

```
 "permissions": [
    "audioCapture", 
    "videoCapture"
  ] 
```

您可以使用其中一种，具体取决于您作为参数传递给 getUserMedia() 的请求类型，分别是 {audio:true} 或 {video:true}。

# c# - C# 更新标签取决于选择组合框中的哪个项目

> ID：13662628
> 
> 赞同：1
> 
> 时间：2012-12-01T18:54:42.170
> 
> 标签：c#, combobox, label

我试图根据我在组合框中选择的内容更改表单中的标签。它不起作用，有人可以帮忙。

这是我的代码：

```
 private void cmbItems_SelectionChangeCommitted(object sender, EventArgs e)
    {
        int index = cmbItems.SelectedIndex;

        if (index == 1 && index == 2)
        {
            lblAmount.Text = "Weight in gram";
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T18:56:25.093

```
if (index == 1 && index == 2)
{
   lblAmount.Text = "Weight in gram";
} 
```

使用 || 相反...索引不能同时为1**和**2..也可能是您没有选择1是公斤，2是克..如果是这种情况，您可以使用开关：

```
 switch(index)
  {
     case 1:
        lblAmount.Text = "Weight in Kg"; break;
     case 2: 
       lblAmount.Text = "Weight in Grams";
       break;
     default: 
       lblAmount.Text = "Weight in Grams";

  } 
```

# python - 如何从python中的文件创建字典

> ID：13662632
> 
> 赞同：0
> 
> 时间：2012-12-01T18:55:05.907
> 
> 标签：python, file, dictionary

我有一个这样的文件：

```
group #1
a b c d
e f g h

group #2
1 2 3 4
5 6 7 8 
```

我怎样才能把它变成这样的字典：

```
{'group #1' : [[a, b, c, d], [e, f, g, h]], 
 'group #2' :[[1, 2, 3, 4], [5, 6, 7, 8]]} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T19:10:15.173

```
file = open("file","r")                       # Open file for reading 
dic = {}                                      # Create empty dic

for line in file:                             # Loop over all lines in the file
        if line.strip() == '':                # If the line is blank
            continue                          # Skip the blank line
        elif line.startswith("group"):        # Else if line starts with group
            key = line.strip()                # Strip whitespace and save key
            dic[key] = []                     # Initialize empty list
        else:
            dic[key].append(line.split())     # Not key so append values

print dic 
```

输出：

```
{'group #2': [['1', '2', '3', '4'], ['5', '6', '7', '8']], 
 'group #1': [['a', 'b', 'c', 'd'], ['e', 'f', 'g', 'h']]} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:04:16.440

遍历文件，直到找到“组”标签。使用该标签将新列表添加到您的字典中。然后将行附加到该标签，直到您点击另一个“组”标签。

*未经测试*

```
d = {}
for line in fileobject:
    if line.startswith('group'):
        current = d[line.strip()] = []
    elif line.strip() and d:
        current.append(line.split()) 
```

# php - 在 PHP 中创建一个 RESTful API？

> ID：13662638
> 
> 赞同：7
> 
> 时间：2012-12-01T18:55:22.827
> 
> 标签：php, xml, rest

我开发了一个非常快速和简单的 PHP 应用程序，用于从 XML 文件中读取分类广告并允许用户对其执行 CRUD 操作（这是一项家庭作业）。

我现在的任务是将此应用程序开发为 RESTful 服务。教授实际上似乎对 RESTful 服务没有任何经验，因为他说我的应用程序被发现可以提交下一个作业，而我的研究表明它并没有真正满足所有 RESTful 要求。

无论如何，为了学习目的，我想正确地做到这一点，即使我可以交出我的旧作业并取得好成绩。我在学习从哪里开始时遇到了麻烦；我不确定 RESTful 服务到底是什么。

我认为获得建议的最佳方式是发布我之前分配的示例代码，以了解我如何处理事情以及我需要如何处理事情。

例如，这是我创建新分类广告的方式。

**创建.php**

```
//Basically just a list of <INPUT TYPE = "text" NAME = "something"> in the <body> fields 
```

**创建成功.php**

```
<html><head><?php $simplerXML = simplexml_load_file('file.xml'); 
//Generate the basic ad information
$newAd = $simplerXML->addChild('advertisement','');
$newAd->addAttribute('category', $_POST["category"]);
$title = $newAd->addChild('title', $_POST["title"]);
$title->addAttribute('ID', $_POST["ID"]);
$pageTitle = $newAd->addChild('pagetitle', $_POST["pagetitle"]);
//etc, for all the SUBMIT boxes

//save the XML
$simplerXML->asXML('file.xml');
echo "<script type='text/javascript'>
//redirect back to ad listing page
window.onload = function () { top.location.href = 'ads.php'; };
</script>";
?></head>
<body></body></html> 
```

我还在为 RUD 操作使用 URL 参数。我听说 URL 参数也是不允许的？

谢谢。

编辑：所以 SWITCH 语句，它是否在 index.php 文件中？然后每个case都会调用一个函数，即POST方法的CreateXML？那么它需要的参数会是对象类型、对象id、内容类型呢？如何获取更新 XML 的值，我是否只是将其发送到包含输入框列表的 Create.php 文件？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-01T19:06:16.043

如果您的服务支持所有 CRUD 操作，则始终建议实现 RESTful 接口。这样做并不难。我已经概述了下面的一些基础知识。

一个 RESTful 服务只做一些事情：

1.  它使用 HTTP 请求方法进行 CRUD 操作的通信
2.  它使用 HTTP 状态码来传达响应状态，并且
3.  它使用 URI 来定义您的资源（文件、您正在访问的数据库项目等）。
4.  它是无国籍的

这个想法是为了最大限度地减少 HTTP 规范中已经定义的这些东西的自定义通信的开发。

* * *

**1 - 请求方法**

支持 RESTful 服务所需的 4 种 HTTP 请求方法是：

1.  邮政
2.  得到
3.  放
4.  删除

你可以选择支持

1.  修补
2.  头

您可以将这些直接映射到您的 CRUD 操作，如下所示：

*   POST = 创建
*   GET = 检索
*   PUT = 更新
*   删除 = 删除
*   PATCH = 编辑（部分更新，例如“更改密码”。PUT 变为“替换”）
*   HEAD = 仅标头（有关资源的元数据）

为此，请使用简单的请求方法路由器正确路由请求，如下所示：

```
switch ($_SERVER["REQUEST_METHOD"]) {
    case "POST":
        // Create action
        break;
    case "GET":
        // Retrieve action
        break;
    case "PUT":
        // Update action
        break;
    case "DELETE":
        // Delete action
        break;
} 
```

* * *

**2 - 状态码** 您应该进一步从您的服务实现 HTTP 状态码以将状态传达回客户端，例如：

*   20x = 成功
*   30x = 重定向
*   40x = 沟通问题
*   50x = 服务器错误

为此，只需在您的响应前面加上正确的 HTTP 标头输出，例如：

```
header("Status: 500 Internal Server Error"); 
```

您可以在此处参考已实现的 HTTP 状态代码的完整列表：http: [//www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

* * *

**3 - URI** 对于 URI，RESTful 服务通常遵循自上而下的分类命名方法，例如

```
/object_type/id.content_type 
```

例子：

```
POST /user
PUT /user/1
GET /user/1.json
GET /user/1.html 
```

`mod_rewrite`您可以在文件中使用 Apache 为上述约定实现一个非常基本的 RESTful 路由器`.htaccess`，如下所示：

```
RewriteEngine On
RewriteRule ^([^\/]+)\/([^\.]+)\.(\w+)$  index.php?object_type=$1&object_id=$2&content_type=$3 
```

然后，您将`index.php`查找适当的 object_type 和 id 以进行适当的路由，例如：

```
$object = $_GET["object_type"];
$id = (int) $_GET["object_id"];
$content_type = $_GET["content_type"];

// Route from here to a class with the name of the object (e.g. UserController) via __autoload
// or to a file (e.g. user.php) via include, and pass id and content_type as params 
```

* * *

**4 - STATELESSNESS** 简单地说，服务器不为客户端维护任何“状态”。无需存储会话或状态。每个请求代表一个完整的事务。即，如果我 GET user/1，服务器将不记得我这样做了，并且未来的请求将不会依赖于或受以前的请求影响。

如果你实现了这些标准，恭喜，你已经构建了一个 RESTful 服务！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T20:15:42.663

“RESTful”是一个广义的概念，存在“RESTful”的程度。 [维基百科](http://en.wikipedia.org/wiki/Representational_state_transfer#Concept)是一个很好的指南

以下是其他答案中未涉及的一些更高级别的特征（这也很好）：

1.  资源在 URL 上可用，最好每个资源只有一个规范的 url。
    *   您可以使用标头指示资源在其他 url 或表示中可用`Content-Location`。
    *   您可以通过与和标头使用内容协商来提供资源的不同*表示形式*（html、json、xml 等）。`Accept``content-type`
2.  资源状态的变化完全由单个 HTTP 请求表示。服务器不需要维护状态来服务客户端请求。因此，请求可以很容易地被代理和缓存。
    *   一个常见*违反*此原则的示例是像“http://example.org/profile”这样的 url，它根据谁登录提供不同的用户配置文件。
    *   最好将资源与授权分开：“http://example.org/profile/{USERID}”将始终为特定用户的用户 ID 提供服务，但如果客户端没有权限，则返回 401（未授权）。（此外，每个请求都应该发送授权信息，这样服务器就不需要会话令牌或类似的服务器端状态。因此，大多数具有基于 cookie 的登录系统的网站*都不*是纯粹的宁静。）
    *   GET 检索资源。这不应该改变资源的状态并且应该可以安全地重复。此属性通常称为“幂等性”。
    *   PUT 更新资源。使用诸如[条件更新请求](http://www.w3.org/1999/04/Editing/)（带有`if-*`标头的 PUT 或 DELETE）之类的技术，您甚至可以实现乐观并发控制。
    *   DELETE 删除资源。
    *   POST 作为一个包罗万象的“做某事”资源。当您必须做一些不完全适合 http 方法的事情或当您需要执行具有副作用的操作时（例如，在不知道其名称的情况下创建新资源或实现 RPC 协议）时，使用 POST。但是，您应该使用 http 标头和响应代码来显示存在哪些资源副作用，例如带有`Location`和`Content-Location`标头的“201 Created”以及受更改影响的 url 列表。
3.  资源表示是自描述的“超文本”，带有指向其他资源的链接。
    *   *违反*此原则的示例：假设“http://example.com/articles”是文章列表，其 json 表示形式如下所示`[1,2,3,4,5,6]`。这是一个文章 ID 列表，但它不是自描述或超文本的——客户端需要知道这是一个文章 ID 列表，并且它需要知道要获取文章资源，它必须构造一个类似“ http://example.org/articles/1”。
    *   最好是这样的回应`{"articles":[{"id":1,"url":"http://example.org/articles/1"},...]}`。与 html 一样，使用 rest 服务的客户端应该只需要*跟随*链接（而不是*创建*链接）来获取其他相关资源。您甚至可以记录可用于操作资源的可用方法——创建、更新、删除等。

# c# - 读取 AT 命令结果代码

> ID：13662645
> 
> 赞同：3
> 
> 时间：2012-12-01T18:56:12.607
> 
> 标签：c#, command, at-command

我正在从事一个项目，涉及向`AT`手机调制解调器发送命令并接收其结果代码。我已经成功发送了 at 命令，但我想不通的是从命令中读取结果代码，比如当你发送“at”时它返回“OK”，如果你发送“at+cbc”它返回电池地位。我在发送命令后尝试使用 Read 和 ReadLine 和 ReadExisting 但它不起作用，我还尝试为接收到的数据创建一个事件并使用这些函数但它也不起作用。这是我的源代码，希望你能给我一些帮助。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO.Ports;

namespace WindowsFormsApplication1
{
    public partial class check : Form
    {
        SerialPort sp;

        public check()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            sp = new SerialPort();
            sp.PortName = "COM3";
            sp.BaudRate = 9600;
            sp.Parity = Parity.None;
            sp.DataBits = 8;
            sp.StopBits = StopBits.One;
            sp.ReadTimeout = 3000;
            sp.WriteTimeout = 3000;
            //sp.DataReceived += new SerialDataReceivedEventHandler(sp_DataReceived);
        }

        private void btn1_Click(object sender, EventArgs e)
        {
            try
            {
                if(!sp.IsOpen)
                {
                    sp.Open();
                }
                sp.WriteLine(tbCmd+"\r\n");
                System.Threading.Thread.Sleep(2000);
                tbStatus.Text = sp.ReadLine();      
            }
            catch(Exception ex)
            {
                tbStatus.Text = "Error!\r\n" + ex.ToString();
            }
        }

        //void sp_DataReceived(object sender, SerialDataReceivedEventArgs e)
        //{
        //    tbStatus.Text = sp.ReadExisting();
        //}
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T13:55:19.027

我在诺基亚论坛上读到诺基亚手机 60 系列不支持读取短信命令，并且此 at 命令不适用于诺基亚手机

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-18T23:46:13.943

```
 sp.DataReceived += new SerialDataReceivedEventHandler(sp_DataReceived);

    void sp_DataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        if(e.EventType != SerialData.Chars)
        {
            tbStatus.Text = "IGNORED: " + e.EventType.ToString();
            return;
        }
        try
        {
            int nBytesToRead = sp.BytesToRead;
            char[] receivedData = new char[nBytesToRead];
            sp.Read(receivedData, 0, nBytesToRead);
            tbStatus.Text = "RECEIVED: " + new string(receivedData);
        }
        catch (Exception ex)
        {
            tbStatus.Text = "ERROR: " + ex.Message;
        }
    } 
```

# node.js - Nodejs 和 Expressjs 避免嵌套回调查询

> ID：13662649
> 
> 赞同：1
> 
> 时间：2012-12-01T18:56:29.623
> 
> 标签：node.js, express

我在用着：

*   节点（0.6.8）
*   expressjs (2.5.2)
*   socket.io (0.8.7)
*   节点数据库 mysql (0.7.6)

目前代码工作正常，但我想知道是否有办法避免回调嵌套函数：

查询：

```
/************************* 
 Queries 
**************************/
var sql_states = 'SELECT ...';
var sql_colors = 'SELECT ...';
var sql_languages = 'SELECT ...';
/* ... more queries */ 
```

嵌套查询的执行：

```
/*************************     
 Run queries
**************************/
db.query(sql_states).execute(function(error, r) {
    if (error) {
        req.session.error = 'Operation failed States';
        res.redirect('back');
    }
    else if (r.length  > 0) 
    {
        for(var i in r){
            states += '<option value="'+r[i]['id_state']+'">'+r[i]['name']+'</option>';
        }

        var colors = '';

        db.query(sql_colors).execute(function(error, r) {
            if (error) {
                req.session.error = 'Operation failed Colors';
                res.redirect('back');
            }
            else if (r.length  > 0) 
            {
                for(var i in r){
                    colors += '<option value="'+r[i]['id_color']+'">'+r[i]['name']+'</option>';
                }

                var languages = '';

                db.query(sql_languages).execute(function(error, r) {
                    if (error) {
                        req.session.error = 'Operation failed Languages';
                        res.redirect('back');
                    }
                    else if (r.length  > 0) 
                    {
                        for(var i in r){
                            languages += '<option value="'+r[i]['id_language']+'">'+r[i]['name']+'</option>';
                        }
                        ... 
```

欢迎任何建议。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:15:55.123

您可以使用该[`async`](https://github.com/caolan/async)模块干净地管理您可以梦想的任何异步流控制方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-30T14:29:08.773

这是异步 JavaScript 开发中的典型问题。为了能够为您的异步函数创建一种串行执行路径，您应该将各种解决方案用于任何大中型项目。

[https://github.com/caolan/async](https://github.com/caolan/async)

[https://www.npmjs.com/package/promise](https://www.npmjs.com/package/promise)

我个人确实使用异步，因为我发现它有很好的文档记录。您可以使用 async.each 结构轻松解决嵌套回调。

```
async.each(openFiles, function(file, callback) {
     // do processing for every file and return callback when async call is completed 
}, function(err){
     // execute this piece of code when all your processing is complete.
}); 
```

# iphone - 在 iPhone 的 UIView 中显示 PDF 缩略图

> ID：13662653
> 
> 赞同：1
> 
> 时间：2012-12-01T18:56:52.150
> 
> 标签：iphone, ios, pdf, uiview, quartz-2d

我对iOS开发很陌生。我无法从 PDF 文件创建缩略图。

我在 ViewController 中有两个 UIView。第一个视图有一个水平 tableView 显示 PDF 书籍的名称，同时从第一个 UIView 中选择这些书籍，第二个 UIView 显示所有页面的缩略图。

我正确实现了第一个 UIView，但无法在第二个 UiView 中显示缩略图。我已经浏览了[***此链接***](https://stackoverflow.com/questions/4504834/how-to-generate-a-thumbnails-form-a-pdf-document-with-iphone-sdk) ，但无法创建缩略图。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:45:03.247

我遇到了同样的问题，但我在这个menner中解决了它

只需要`UIWebView`在 UIView 内部使用。`UIWebView`可以打开PDF文件。因此`UIWebView`，使用您的 pdf 的 url 在 webView 上进行加载请求。但请确保设置两个这样的属性`UserInteractionEnabled:NO`和`ScalesPageToFit:YES`

我已经在这段代码中解释了这一点............

```
UIView * view1 = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 50, 50)] autorelease];
UIWebView * webView1 = [[[UIWebView alloc] initWithFrame:view1.bounds] autorelease];
[webView1 setUserInteractionEnabled:NO];
[webView1 setScalesPageToFit:YES];
[webView1 loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"Your PDF URL"]]];
[view1 addSubview:webView1];
[self.view addSubview:view1]; 
```

希望对你有帮助............

# java - 覆盖链表中的等于

> ID：13662654
> 
> 赞同：0
> 
> 时间：2012-12-01T18:57:01.720
> 
> 标签：java, list, linked-list

一直在寻找解决我的问题的方法。已经阅读了很多关于覆盖等于以正确比较链表的节点但已经卡住的内容。基本上我正在尝试搜索我的列表并找到一个等于它的节点并将其删除。我找到了查看链接列表的方法，但是当我返回节点时，它只是胡言乱语。我正在尝试找到一种将其放入字符串并将其与另一个字符串进行比较的方法。无论如何，这里是当前不起作用的代码和我的 equals 方法。

```
public class MagazineList {
    private MagazineNode list;
    private Object obj;

    public MagazineList(){
        list = null;
    }

    public void add(Magazine mag){
        MagazineNode node = new MagazineNode(mag);
        MagazineNode current;

        if(list==null)
            list = node;
        else{
            current = list;
            while(current.next != null)
                current = current.next;
            current.next = node;
        }   
    }
    public void insert(Magazine mag)
    {
        MagazineNode node = new MagazineNode (mag);

        // make the new first node point to the current root
        node.next=list;

        // update the root to the new first node
        list=node;
    }
    public void deleteAll(){
        if(list == null){

        }
        else{
            list = null;
        }
    }

    public void delete (Magazine mag) {
        MagazineNode current = this.list;
        MagazineNode before;

        //if is the first element
        if (current.equals(mag)) {
            this.list = current.next;
            return;     //ending the method
        }

        before = current;

        //while there are elements in the list
        while ((current = current.next) != null) {

            //if is the current element
            if (current.equals(mag)) {
                before.next = current.next;
                return;     //endind the method 
            }

            before = current;
        }

        //it isnt in the list
    }
    public boolean equals(Object other) {

        System.out.println("Here in equals" + other + this);
        // Not strictly necessary, but often a good optimization
        if (this == other)
            return true;
        else{
            return false;
        }
    }

    @ Override
    public String toString(){
        String result = " ";

        MagazineNode current = list;
        while (current != null){
            result += current.magazine + "\n";
            current = current.next;     
        }
        return result;
    }

    private class MagazineNode {
        public Magazine magazine;
        public MagazineNode next;

        public MagazineNode(Magazine mag){
            magazine = mag;
            next = null;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T19:09:29.870

您的删除方法看起来不错，但您不应该将 MagazineNode 与 Magazine 进行比较。您应该将杂志与杂志进行比较。

替换`if (current.equals(mag))`为`if (current.magazine.equals(mag))`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:17:14.023

好的 - 请注意，您的 equals 方法只是重新实现 == identity equals。

这意味着如果`other`不是同一个杂志对象，这将失败。如果这是你想要的，那很好，但通常你想在杂志中选择属性。

因此，如果 Magazine 有一个`String title`, 在您的 equals 方法中，您将执行以下操作：

```
if (magazine instanceof Magazine && magazine.getTitle().equals(other.getTitle()) returnval = true; 
```

另请参阅 Joshua Bloch 的 Effective Java 以获得对此的详细描述。任何时候重写 equals 方法时，都希望重写 hashCode 方法。他们一起去，他描述了原因。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T21:55:27.497

如果您使用的是 eclipse，请使用此函数：Eclipse -> Source -> Generate hashCode() 和 equals()。并研究其实施。这将帮助您了解如何编写 equals() 和 hashCode()。祝你好运。

# java - Java：我想逐个字符地从文件中读取，并将每个字符保存到一个最大大小为 10 的数组中

> ID：13662655
> 
> 赞同：3
> 
> 时间：2012-12-01T18:57:06.810
> 
> 标签：java, filereader

这是我的代码：

```
 //array way
    char [] name = new char[10];

    while(input.hasNextLine()){
        firstName = input.next();

        for(int j = 0; j < name.length(); j++){
            name [j] = name.charAt(j);
        }
        for(int i = 0; i < name.length; i++){
                System.out.println(name);                
        }
    } 
```

我的 inFile 采用这种格式（姓名、社会保险号，然后是 4 个等级）：

```
SMITH 111112222 60.5 90.0 75.8 86.0 
```

我已经初始化了变量，所以这不是问题。名称部分的总体目标是逐字符读取文件，并将每个字符保存到最大大小为 10 的数组中（即仅保存名称的前 10 个字母）。然后我想打印那个数组。

输出是：打印 SMITH 10 次，然后 SSN 10 次，然后不是擦除 SSN，而是覆盖前 4 个字符并用等级替换它们

```
60.512222 
```

并这样做了 10 次，依此类推。我不知道它为什么这样做或如何解决它。有人可以帮忙吗？

附言。这是我在此的头一篇博文。请告诉我我是否没有有效地发帖

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:27:17.277

尝试这样的事情（解释内联）：

```
 Scanner input = new Scanner(System.in);
    while(input.hasNextLine()){
       //all variables are declared as local in the loop

        char [] name = new char[10];
        //read the name
        String firstName = input.next();

        //create the char array
        for(int j = 0; j < firstName.length(); j++){
            name [j] = firstName.charAt(j);
        }

       //print the char array(each char in new line)
        for(int i = 0; i < name.length; i++){
                System.out.println(name);                
        }

       //read and print ssn
        long ssn = input.nextLong();
        System.out.println(ssn); 

       //read and print grades
        double[] grades = new double[4];
        grades[0]= input.nextDouble();
        System.out.println(grades[0]); 
        grades[1]= input.nextDouble();
        System.out.println(grades[1]); 
        grades[2]= input.nextDouble();
        System.out.println(grades[2]); 
        grades[3]= input.nextDouble();
        System.out.println(grades[3]); 

        //ignore the new line char
        input.nextLine();
}

    //close your input stream
    input.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T19:02:10.387

这是一个应该工作的例子

```
try {

            FileInputStream fstream = new FileInputStream("example.txt");
            DataInputStream in = new DataInputStream(fstream);
            BufferedReader br = new BufferedReader(new InputStreamReader(in));
            String strLine;
            char[] name = new char[10];
            while ((strLine = br.readLine()) != null) {
                //save first 10 chars to name
                for (int i = 0; i < name.length; i++) {
                    name[i]=strLine.charAt(i);
                }
                //print the current data in name
                System.out.println(name.toString());
            }
            in.close();
        } catch (Exception e) {
            System.err.println("Error: " + e.getMessage());
        } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-01T19:03:00.280

您需要在循环的每次迭代中重新初始化您的数组，因为它保留了以前的值：

```
name = new char[10]; 
```

# android - R 无法解析为变量

> ID：13662662
> 
> 赞同：1
> 
> 时间：2012-12-01T18:57:34.913
> 
> 标签：android

我已经阅读了其他解决方案。没有 import.filename.R，我所有的 .xml 标题都是小写的，我已经清理了项目。我尝试重新创建它，但没有一个奏效。我文件中的所有“R.”都出错了，无法解析为变量。我有五个不同的 XML 文件，所以我只展示其中几个，然后是 java:

活动主：

```
<TextView
    android:id="@+id/categoryTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="30dp"
    android:layout_marginTop="22dp"
    android:text="@string/cat" />

<RadioGroup
    android:id="@+id/radioGroup1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/categoryTextView"
    android:layout_below="@+id/categoryTextView"
    android:layout_marginTop="14dp" >

    <RadioButton
        android:id="@+id/bkRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="@string/bekind" />

    <RadioButton
        android:id="@+id/oldmcRadio"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/oldmc" />

</RadioGroup>

<Button
    android:id="@+id/chooseButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/radioGroup1"
    android:layout_below="@+id/radioGroup1"
    android:layout_marginTop="18dp"
    android:text="@string/choose"
    android:onClick="buttonclick" />

</RelativeLayout> 
```

说好话：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/nounKindTextView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/noun" />

<EditText
    android:id="@+id/nounKindEditText1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="text"
    android:ems="10" />

<TextView
    android:id="@+id/nounpKindTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/nounp" />

<EditText
    android:id="@+id/nounpKindEditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="text"
    android:ems="10" />

<TextView
    android:id="@+id/nounKindTextView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/noun" />

<EditText
    android:id="@+id/nounKindEditText2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="text"
    android:ems="10" />

   <TextView
    android:id="@+id/placeKindTextView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/place" />

<EditText
    android:id="@+id/placeKindEditText2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="text"
    android:ems="10" />

<TextView
    android:id="@+id/adjKindTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/adj" />

<EditText
    android:id="@+id/@+id/adjKindEditText"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="text"
    android:ems="10" />

<TextView
    android:id="@+id/nounKindTextView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/noun" />

<EditText
    android:id="@+id/nounKindEditText3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="text"
    android:ems="10" />

<Button
    android:id="@+id/enterButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="buttonclick2"
    android:text="@string/ent" />

</LinearLayout> 
```

爪哇：

```
package com.deitel.madlibs;

import android.os.Bundle;
import android.app.Activity;
import android.widget.*;
import android.view.View;
import android.view.Menu;
import android.widget.Button;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {
//Global variable
    double bk;
    double oldmc;
    private Button choose;  // creates a button 

        @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        choose = (Button) findViewById(R.id.chooseButton);

        //Start with first screen
        setContentView(R.layout.activity_main);
    }

  //buttonclick for form 1
    public void buttonclick(View view){

        RadioButton bk = (RadioButton) findViewById(R.id.bkRadio);
        RadioButton oldmc = (RadioButton) findViewById(R.id.oldmcRadio); 

         if(bk.isChecked())
        {
            //switch views to screen 2
               setContentView(R.layout.bekindwords);  
        }
   else if(oldmc.isChecked())
        {
           //switch views to screen 3
           setContentView(R.layout.mcdwords);
        }}

    // buttonclick for bekindwords
         public void buttonclick2(View view){
                setContentView(R.layout.bekindadlib);
         }
    // buttonclick for mcdwords
         public void buttonclick3(View view){
                    setContentView(R.layout.mcdadlib);
         }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T21:00:52.197

实际上，我今天刚刚遇到这个问题，并且在过去一个小时左右一直困扰着我。在我的代码中进行了一些挖掘，但最终我找到了问题所在。在我第一次创建项目的早期，Eclipse 添加了一个空白活动和一些基本资源。创建的资源之一是一个奇怪的 menu.xml 文件，它引用了我在创建项目时最初删除的字符串。由于 XML 布局文件中的问题会阻止构建应用程序，因此我只是在字符串 XML 值文件中重新添加了正在调用的字符串。

所以我在解决我的问题时学到的真正教训是，如果你的 R 文件没有生成，那么很可能是由于 XML 文件中的一些问题阻止了你的应用程序的构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:05:52.187

尝试导入 com.deitel.madlibs.R，清理，删除导入。当 R 上出现 Eclipse 错误时，我会做一些接近它的事情，尽管可能并不完全如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T19:42:53.923

我在（孤单）希望其他有资源类问题的人可能会发现这个。

没有***什么***神秘的

> 安卓.R

， 或者

> your.packagename.com.R

.

当 AAPT 编译您的应用程序时，它会生成 R.java。您可以在项目结构根目录下的 gen 文件夹中看到它。它只是定义了一系列`public static final int`引用项目中资源的 s，例如可绘制对象、字符串、布局视图等，以便您可以在代码中使用名称来引用它们。

因此，R.java 只是一个类，就像任何其他 Java 类一样。java 文件与您使用的所有其他类一起编译到您的应用程序中。

反过来，它对每种资源类型都有内部类。例如：

```
package com.company.example

public final class R {

    public static final class drawable {
        public static final int icon=0x7f020005;   
    } 
} 
```

在这里，我的可绘制对象中有一个名为“icon”的图标。在我的代码中，我可以使用`findViewById(R.drawable.icon)`.

再看看上面的代码，很明显发生了什么。它编译为`findViewById(0x7f020005);`

出现这个问题是因为很多事情都可能导致 R.java 的生成失败，最常见的是布局 XML 中的错误。由于未生成 R.java，因此在编译您的应用程序时，编译器会尝试解析您对`R`.

再考虑一下`findViewById(R.drawable.icon)`。您的 R.java 尚未生成，但 Android 在`android.R`. 编译器将帮助（或不）为您解析引用并将 android.R 添加到您的导入中。然后它会尝试 compile `findViewById(R.drawable.icon)`，这是有效`findViewById(android.R.drawable.icon)`的，并且由于默认的 Android 类没有 drawable.icon，因此编译失败。

要修复它，只需要两件事。

1.  从导入中删除 android.R
2.  查找并修复导致 R.java 生成失败的问题

根据我的经验，布局 XML 中的 XML 错误并不总是在 IDE 中正确显示。当我遇到这个问题时，我最终会查看我的版本历史，查看最近的更改和/或打开每个布局 XML 并检查预览中的错误。

希望这至少对某人有所帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T19:06:30.617

是否生成了 R？如果没有，您的资源文件可能有问题。修复它们，然后做一个干净的项目。

# android - Android ListVIew 类型的 Facebook FriendList

> ID：13662665
> 
> 赞同：-1
> 
> 时间：2012-12-01T18:58:12.713
> 
> 标签：android, facebook

我有这样的问题，我怎样才能做出这样的 ScrollView 。单击按钮时，我想在屏幕的大部分部分显示滚动视图，例如 facebook 应用程序好友列表，而在另一次单击时，我想消失。我必须选择哪些技术，或者我可以使用简单的 android:orientation=“horizo​​ntal” 滚动视图来实现？我需要一些建议。 ![在此处输入图像描述](../Images/99be0df20a506239cb4443e053eaee87.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:02:32.757

您可以为此使用[此](https://github.com/jfeinstein10/SlidingMenu)库。您可以扩展 SlidingActivity，也可以将其添加到 XML 布局中，如下所示：

```
<com.slidingmenu.lib.SlidingMenu
    xmlns:sliding="http://schemas.android.com/apk/res-auto"
    android:id="@+id/slidingmenulayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    sliding:viewAbove="@layout/YOUR_ABOVE_VIEW"
    sliding:viewBehind="@layout/YOUR_BEHIND_BEHIND"
    sliding:touchModeAbove="margin|fullscreen"
    sliding:touchModeBehind="margin|fullscreen"
    sliding:behindOffset="@dimen/YOUR_OFFSET"
    sliding:behindWidth="@dimen/YOUR_WIDTH"
    sliding:behindScrollScale="@dimen/YOUR_SCALE"
    sliding:shadowDrawable="@drawable/YOUR_SHADOW"
    sliding:shadowWidth="@dimen/YOUR_SHADOW_WIDTH"
    sliding:fadeEnabled="true|false"
    sliding:fadeDegree="float"
    sliding:selectorEnabled="true|false"
    sliding:selectorDrawable="@drawable/YOUR_SELECTOR"/> 
```

# python - 发送 GET 请求以进行 Google 反向图像搜索

> ID：13662667
> 
> 赞同：3
> 
> 时间：2012-12-01T18:58:19.547
> 
> 标签：python, image, search, reverse

我正在尝试进行反向图像搜索并收集结果的描述。我很快就陷入了死胡同：

```
import requests

r = requests.get('http://www.google.com/searchbyimage?image_url=http://i.imgur.com/j3shP.jpg')
r.text 
```

理想情况下，我应该能够找到维基百科的描述：“酒喉蜂鸟（Atthis ellioti）是蜂鸟科的一种蜂鸟。它在萨尔瓦多、危地马拉、洪都拉斯和......”。我可以在 Firebug 中手动找到它，但 GET 请求不会返回它。我做错了吗，或者这是谷歌不允许的功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T19:35:56.170

有趣的问题。出于某种原因，此功能需要一个 User-Agent 标头，至少在我的 Firefox 浏览器中，它不起作用。但是，如果您这样做：

```
headers = {}
headers['User-Agent'] = "Mozilla/5.0 (X11; Linux i686) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.27 Safari/537.17"
r = requests.get('http://www.google.com/searchbyimage?image_url=http://i.imgur.com/j3shP.jpg', headers=headers) 
```

有用。你会得到很多文字，但你可以看到一些对蜂鸟图像的引用：

```
h9fVq52EM&amp;tbnh=0&amp;tbnw=0&amp;prev=/search%3Fq%3D%26tbm%3Disch%26tbo%3Du&amp;zoom=1&amp;q=&amp;usg=__ZgK5jfDBcK04SU2bfmNK5FCj6t8=&amp;docid=xg1LDwTq_rx2VM&amp;sa=X&amp;ei=cFu6UIPgI-7q0QHi54DYAQ&amp;ved=0CH0Q1Rc"><img src="http://t3.gstatic.com/images?q=tbn:ANd9GcRZymll5oKgx8oqrdojY6ATda9pY5yWzG0JzsGcf7AA739px2wEYy_jYA" alt="Wine-throated Hummingbird" border=0 height=116 style="margin-left:-30px;" width=173></a></div><a href="/imgres?imgurl=http://ibc.lynxeds.com/files/imagecache/photo_940/pictures/Eisermann_Atthis_ellioti.jpg&amp;imgrefurl=http://ibc.lynxeds.com/photo/wine-throated-hummingbird-atthis-ellioti/displaying-male&amp;h=162&amp;w=242&amp;sz=5&amp;tbnid=3xjh-h9fVq52EM&amp;tbnh=0&amp;tbnw=0&amp;prev=/search%3Fq%3D%26tbm%3Disch%26tbo%3Du&amp;zoom=1&amp;q=&amp;usg=__ZgK5jfDBcK04SU2bfmNK5FCj6t8=&amp;docid=xg1LDwTq_rx2VM&amp;sa=X&amp;ei=cFu6UIPgI-7q0QHi54DYAQ&amp;ved=0CH4QuhM"class="fl ellip" style="color:#999;font-size:11px;display:inline-block;text-align:right;width:100%">ibc.lynxeds.com</a></div><div class=krable data-ved="0CH0Q1Rc" style="float:right;margin:5px 0 4px"></div></div><div class="kno-desc kno-fb-ctx"><div >The Wine-Throated Hummingbird is a species of hummingbird in the Trochilidae family. It is found in El Salvador, Guatemala, Honduras, and Mexico. Its natural habitats are subtropical or tropical moist montane forests. <a href="http://en.wikipedia.org/wiki/Wine-throated_Hummingbird" class="fl q" style="color:#999;font-size:11px"  onmousedown="return rwt(this,\'\',\'\',\'\',\'17\',\'AFQjCNH07EpIAh31_2ubTIQThRNfQluC8g\',\'\',\'0CH8QmhMoADAQ\',\'\',\'\',event)"><span class=kno-desca>Wikipedia</span></a></div><div class=krable data-ved="0CH8QmhM" style="margin:2px 0 4px"></div></div><div class=rhsl5 style=clear:both></div><div class="kno-ft kno-xs"><table class="kno-fs ts"><tr><td style="vertical-align:top;width:100%"><div class="kno-f kno-fb-ctx"><span class=krable data-ved="0CIIBEMsTKAA" style="margin:0 0 5px"></span><span class="kno-fh "><a href="/search?hl=en&amp;tbo=d&amp;q=wine+throated+hummingbird+scientific+name&amp;sa=X&amp;ei=cFu6UIPgI-7q0QHi54DYAQ&amp;ved=0CIEBEOgT" class=fl style=color:#000>Scientific name</a>: </span><span class="kno-fv"><span class="kno-fv-vq fl" data-vq="/search?hl=en&amp;tbo=d&amp;q=%22wine-throated+hummingbird%22+%22scientific+name%22+%22atthis+ellioti%22&amp;stick=H4sIAAAAAAAAAAEtANL_AHvTx-gAAAAQCAMiCi9tLzAydnRyNnJAAcWxzJB1fpUio0i895QopmaQvkAE23M00C0AAAA">Atthis ellioti</span></span></div><div class="kno-f kno-fb-ctx"><span class=krable data-ved="0CIQBEMsTKAE" style="margin:0 0 5px"></span> 
```

# css - CSS3 平滑跨浏览器灰度图像

> ID：13662675
> 
> 赞同：1
> 
> 时间：2012-12-01T18:59:26.143
> 
> 标签：css

有人可以告诉我如何修改以下代码以在所有浏览器中进行平滑的淡入淡出过渡吗？

```
img.grayscale {
filter: url("data:image/svg+xml;utf8,<svg xmlns=\'http://www.w3.org/2000/svg\'><filter id=\'grayscale\'><feColorMatrix type=\'matrix\' values=\'0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0\'/></filter></svg>#grayscale"); /* Firefox 10+, Firefox on Android */
filter: gray; /* IE6-9 */
-webkit-filter: grayscale(100%); /* Chrome 19+, Safari 6+, Safari 6+ iOS */
}
img.grayscale.disabled {
filter: none;
-webkit-filter: grayscale(0%);
} 
```

现在它正在 Firefox 中立即更改色标，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T20:21:29.367

好吧，根据“浏览器大战”，没有纯 CSS3 解决方案，其中一些浏览器支持某些功能，而另一些则不支持。但是，对于现代浏览器（Chrome、Safari 4+、Firefox 11+?、Opera 12+? 和 IE 10+），您可以使用 CSS3。这是一些代码：

```
img.grayscale {
    -webkit-transition: -webkit-filter .3s ease-in; /* chrome & safari */
    -moz-transition: filter .3s ease-in; /* firefox and other gecko-based */
    -ms-transition: filter .3s ease-in; /* ie 10+ */
    -o-transition: filter .3s ease-in; /* opera */
    transition: filter .3s ease-in; /* w3 (future standard) */
} 
```

但是，有跨浏览器的补救措施，只是不纯粹使用 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T15:23:32.177

目前，跨浏览器最简单的方法仍然是保留图像的 2 个副本（一个灰度）并转换不透明度。

使用相同的技术（2 个重叠的图像 - 将顶部的一个淡出），您也许可以构建顶部和底部是相同图像的东西，但顶部具有所有特定于浏览器的过滤器。

# delphi - 如何使用 delphi 6 twebbrowser 单击弹出按钮？

> ID：13662677
> 
> 赞同：-4
> 
> 时间：2012-12-01T18:59:26.970
> 
> 标签：delphi, twebbrowser

我正在 Delphi 6 上编写我的自动提交工具。

我正在使用`TWebbroswer`组件将数据插入到不同的控件中。

但是，我需要能够 在弹出窗口上单击“**确定”按钮（此按钮出现在 javascript 确认命令之后）。**

有什么方法可以从我的 Delphi 应用程序中单击此按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:04:54.857

试试这个=）

```
procedure TForm1.Button1Click(Sender:Tobject);
begin
 EmbeddedWB1.Navigate('about:<input%20type=submit%20value="Click%20me!!!"%20onClick="alert(''Click!!!'');">');
end;

procedure TForm1.Button2Click(Sender: TObject);
var
Document:Variant;
Button:Variant;
I:Dword;
begin
 Document:=EmbeddedWB1.Document;
 for i:= 0 to Document.all.Length -1 do begin
   Button:=Document.all.item(I);
   if SameText(Button.tagName,'INPUT') then begin
     Button.Click;
     break;
   end;
 end;
end; 
```

# android - 片段中的自定义适配器

> ID：13662683
> 
> 赞同：0
> 
> 时间：2012-12-01T19:00:11.213
> 
> 标签：android, android-listview, android-fragments, android-listfragment, custom-adapter

我有一个带有 customAdapter 的列表视图。

有`main activity`（附清单）。和一个`custom adapter class`（在主活动中填充列表的每一行）和一个 setter 和 getter 类（用于设置和获取特殊指令，如 setText、setCheched...）。

这个应用程序很好用。我想像主细节/流模板一样改变它（所以我不得不从两个片段中使用）。我希望详细信息片段成为我上面描述的以前的列表视图。我尝试将活动更改为片段并将两个片段添加到与我的“详细信息”和“项目”类相对应的主布局中。

我试图将我的前者更改`main activity`为`detail class`extends `Fragment`。但我得到无法膨胀的错误......

想法是什么？提前致谢。

# objective-c - 带有 videoDataOutput 和 StillImageOutput 的 AVCaptureSession

> ID：13662687
> 
> 赞同：0
> 
> 时间：2012-12-01T19:00:45.537
> 
> 标签：objective-c, ios, video, camera, avfoundation

我正在编写一个应用程序，我在其中使用 AVCaptureSession 和 AVCaptureVideoDataOutput 来获取样本缓冲区，进行一些点检测并实时显示它。

用户还具有捕获图像的能力。

问题是，因为我使用的是同一个会话，所以捕获静止图像的图像质量与视频的图像质量相同。

我正在使用 captureOutput:didOutputSampleBuffer:fromConnection: 委托方法来捕获帧和 captureStillImageAsynchronouslyFromConnection: 来捕获静止图像

我想知道是否有办法在 AVCaptureSessionPresetMedium 中捕获帧，并在捕获图像时切换到 AVCaptureSessionPresetPhoto？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T21:30:36.320

您可以在会话运行时更改会话的`sessionPreset`属性。

将其更改为`AVCaptureSessionPresetPhoto`在捕获图像之前，然后返回到`AVCaptureSessionPresetMedium`完成块中`captureStillImageAsynchronouslyFromConnection:completionHandler:`。

请注意，更改预设会使相机在切换时短暂空白，因此可能难以立即捕捉特定帧的照片，但实际上并没有任何保证，因为`AVCaptureStillImageOutput`当`captureStillImageAsynchronouslyFromConnection:`它完成时就完成了。:)

# c++ - 暂停和恢复 pthread 的最佳解决方案是什么？

> ID：13662689
> 
> 赞同：13
> 
> 时间：2012-12-01T19:00:57.597
> 
> 标签：c++, pthreads, posix

我找到了关于 pthreads 的以下主题（[here](https://stackoverflow.com/questions/3140867/suspend-pthreads-without-using-condition)），但有很多很好的解决方案。

我想知道以下代码是否有效，如果有效，为什么使用相同的锁来调用 pthread_cond_wait 以及访问它然后立即解锁：

```
void suspendMe()
{
    pthread_mutex_lock(&m_SuspendMutex);
    pthread_cond_wait(&m_ResumeCond, &m_SuspendMutex);
    pthread_mutex_unlock(&m_SuspendMutex);
} 
```

在这里使用2个单独的互斥锁不是更好吗，或者这是挂起pthread的正确方法？

提前致谢！

**编辑：**

真棒回复，谢谢大家。还有一个相关的问题。既然我想在另一个函数中单独恢复一个线程，那么恢复它会更合适吗？

```
void suspendMe()
{
    pthread_mutex_lock(&m_SuspendMutex);
    pthread_cond_wait(&m_ResumeCond, &m_SuspendMutex);
}
void resumeMe()
{
    pthread_cond_signal(&m_ResumeCond);
    pthread_mutex_unlock(&m_SuspendMutex);
} 
```

再次感谢大家！！:~)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T19:36:20.797

实际上，这段代码不是线程安全的。互斥锁实际上并没有保护任何东西，使得隐含的谓词容易受到竞争条件的影响。

看看这段代码——互斥体保护的是什么？什么保护暂停/恢复状态？

```
void suspendMe()
{
    pthread_mutex_lock(&m_SuspendMutex);
    pthread_cond_wait(&m_ResumeCond, &m_SuspendMutex);
}
void resumeMe()
{
    pthread_cond_signal(&m_ResumeCond);
    pthread_mutex_unlock(&m_SuspendMutex);
} 
```

这是对的：

```
void suspendMe()
{ // tell the thread to suspend
    pthread_mutex_lock(&m_SuspendMutex);
    m_SuspendFlag = 1;
    pthread_mutex_unlock(&m_SuspendMutex);
}
void resumeMe()
{ // tell the thread to resume
    pthread_mutex_lock(&m_SuspendMutex);
    m_SuspendFlag = 0;
    phtread_cond_broadcast(&m_ResumeCond);
    pthread_mutex_unlock(&m_SuspendMutex);
}
void checkSuspend()
{ // if suspended, suspend until resumed
    pthread_mutex_lock(&m_SuspendMutex);
    while (m_SuspendFlag != 0) pthread_cond_wait(&m_ResumeCond, &m_SuspendMutex);
    pthread_mutex_unlock(&m_SuspendMutex);
} 
```

线程应该`checkSuspend`在可以挂起的安全点调用。其他线程可以调用`suspendMe`和`resumeMe`暂停/恢复线程。

请注意，现在互斥锁保护了`m_SuspendFlag`变量，确保线程被告知挂起，被告知恢复，并检查它是否应该挂起或在保护下保持挂起，使代码线程安全。

> 在这里使用2个单独的互斥锁不是更好吗，或者这是挂起pthread的正确方法？

使用两个互斥锁会破坏整个条件变量点。它们工作的整个机制是，您可以检查是否有您应该等待的东西，然后自动等待它，而无需在等待时持有锁或必须释放锁然后等待。如果您在等待时持有锁，那么其他线程如何更改状态？如果你释放锁然后等待，如果你错过了状态变化会发生什么？

顺便说一句，暂停或恢复线程几乎没有意义。如果你觉得你需要从外部暂停一个线程，那只是表明你对线程进行了编码来做一些你实际上并不希望它做的事情。关于暂停或恢复线程的问题通常表明线程编程的心理模型不正确。一个线程可能需要等待某些事情，但它不应该从外部“暂停”，因为它应该已经通过自己的编码知道它什么时候不应该做一些特定的工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-01T19:11:28.627

这是正确的方法。`pthread_cond_wait` *解锁* `m_SuspendMutex`，然后等待，然后在返回之前再次`m_ResumeCond`锁定。`m_SuspendMutex`

它以这种方式工作的原因是因为条件变量用于表示某个状态的更改，并且由于该状态是共享的，因此必须在某个线程访问它时将其锁定。例如，考虑实现一个事件队列：

```
T get_item()
{
    pthread_mutex_lock(&mutex);
    while(qu.empty())
        pthread_cond_wait(&cond, &mutex);
    T ret = qu.front();
    qu.pop();
    pthread_mutex_unlock(&mutex);
    return ret; // we got an item from a queue
}

void add_item(T x)
{
    pthread_mutex_lock(&mutex);
    qu.push(x);
    pthread_mutex_unlock(&mutex);
    pthread_cond_signal(&cond);
} 
```

注意：

1.  对队列的所有访问`qu`都使用`mutex`.
2.  当我们等待条件变量时，我们必须解锁`mutex`以允许其他线程将项目添加到队列中，当它被更改时，我们必须`mutex`再次锁定以实际检查队列。这正是这样`pthread_cond_signal`做的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T19:14:15.657

> 我想知道以下代码是否有效

是的。

> 如果是这样，为什么使用相同的锁来调用 pthread_cond_wait 以及访问它然后立即解锁：

这`pthread_cond_wait()`需要一个锁定的互斥锁。这是因为使用条件变量的方式。通常它们是这样使用的：

```
pthread_mutex_lock(&m_SuspendMutex);
while (!ready())
{
    pthread_cond_wait(&m_ResumeCond, &m_SuspendMutex);
}

// Modify the resources protexted by the lock.
pthread_mutex_unlock(&m_SuspendMutex); 
```

因此，您获取锁表示您要修改受锁保护的资源。但是，如果对象未处于某个`ready()`状态，那么您将挂起您的线程，使用`pthread_cond_wait()`该线程挂起线程并解锁互斥锁（从而允许其他线程获取锁并可能将对象转换为`ready()`状态）。

当达到就绪状态时，`m_ResumeCond`发出信号并且等待线程从挂起中释放。但在它被允许退出之前，`pthread_cond_wait()`它必须重新获得锁`m_SuspendMutex`以确保它是唯一修改受互斥体保护的资源的线程。

为了确保以原子方式正确完成上述操作（解锁/挂起/恢复/锁定），必须由 `pthread_cond_wait()`.

> 在这里使用 2 个单独的互斥锁不是更好吗

不。

> 还是这是暂停pthread的正确方法？

和其他我想的一样好。

# php - NSXMLParser 和 parse 总是返回 NO

> ID：13662690
> 
> 赞同：1
> 
> 时间：2012-12-01T19:00:57.953
> 
> 标签：php, ios, xml, nsxmlparser

在阅读了几个教程之后，我正在尝试创建自己的类，以便从 PHP 请求中检索 xml 结果并在我的 iOS 应用程序中使用它们的元素。

所以我有 XMLParse.h

```
#import <Foundation/Foundation.h>

@interface XMLParser : NSObject <NSXMLParserDelegate>{

    NSString* url;
    NSXMLParser* parser;
    NSMutableString* element;
}

- (id) initXML: (NSString*)_url;

@end 
```

和 XMLParse.m

```
#import "XMLParser.h"

@implementation XMLParser{

    NSXMLParser* xmlParser;
    NSMutableArray* xmlOutputData;
    NSMutableString* xmlOutputNode;

}

- (id) initXML:(NSString *)_url{

    NSLog(@"initXML\n");
    url = _url;

    xmlParser = [[NSXMLParser alloc] initWithContentsOfURL:[NSURL URLWithString:url]];
    [xmlParser setDelegate:self];

    if ([xmlParser parse]) {
        printf("YES");
    } else{
        printf("NO");
    }

    return self;
}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName
   namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
     attributes:(NSDictionary *)attributeDict{

    NSLog(@"Started Element %@", elementName);
    if ([elementName isEqualToString:@"root"]) {

        if (!xmlOutputData) {

            xmlOutputData = [[NSMutableArray alloc] init];

            NSString* status = [attributeDict objectForKey:@"success"];

            if ([status isEqualToString:@"TRUE"]) {
                return;
            } else{
                printf("ERROR");
            }

        }
    }

}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string{

    [xmlOutputNode appendString:[string stringByTrimmingCharactersInSet:
                                 [NSCharacterSet whitespaceAndNewlineCharacterSet]]];
}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName
   namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{

    if ([elementName isEqualToString:@"username"]) {

        NSLog(@"%@", xmlOutputNode);
    }

    xmlOutputNode = [[NSMutableString alloc]init];
}

@end 
```

最后从我的 MenuView.m 我正在初始化 XMLParse 类的对象

```
XMLParser* newParser = [[XMLParser alloc] initXML:@"http://localhost/conquestOfLancaster/login.php?username=test&password=1234"]; 
```

屏幕上的输出看起来像，

```
2012-12-01 18:58:50.020 CoL[2363:c07] initXML
2012-12-01 18:58:50.030 CoL[2363:1b03] ADDRESPONSE - ADDING TO MEMORY ONLY: http://localhost/conquestOfLancaster/login.php?username=test&password=1234
NO 
```

我不明白我错过了什么，解析总是错误的。任何人都可以帮忙吗？

更新：

问题是我的 PHP 链接结果不是真正的 XML 输出（有结构，这让我很困惑）。是我第一次尝试 PHP，这就是原因。我将搜索如何从 PHP 生成 XML 输出。

提前致谢。

# c++ - 将每 4 位解释为十六进制值

> ID：13662695
> 
> 赞同：0
> 
> 时间：2012-12-01T19:01:35.333
> 
> 标签：c++, binary, hex, bit-shift

我在将位解释为字节时遇到了一些麻烦。我现在拥有的是一个 8、16、24 等位的字符串，我想将它们转换为十六进制字节。例如：

假设我有以下字符串：

10100101 00110000

我想将每个 4 解释为十六进制字节，所以我会有

1010 为 A，0101 为 5，0011 为 3，0000 为 0

然后当我把它们放在一起时，我应该得到

A5 30 根据各自的十六进制值对应 ¥0。不幸的是，我不完全确定如何做到这一点。可能有人有这样做的想法吗？如果是这样，那就太好了！谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T19:04:11.540

这个问题[已经为你解决了](http://ideone.com/Cf7kKD)，在 C++ 标准库的`<bitset>`标题中：

```
const unsigned long value1 = std::bitset<8>(std::string("10100101")).to_ulong();
const unsigned long value2 = std::bitset<8>(std::string("00110000")).to_ulong();

std::cout << std::hex << value1 << " " << std::hex << value2 << '\n'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:04:23.927

您应该将每组 4 位转换为一个字符，例如。用一张桌子：

```
 char Hex[16]={ '0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'}; 
```

计算这个的通用方法（在任何 2 个 BASES 之间没有库）是：

步骤1）

```
 my_number = 0; // start to read digits.
  while((a = read_digit(BASE))>=0) { 
       // read_digit should return -1 for non digit
       my_number=my_number * BASE + a;
       // optionally: if (count++ == 4) break;  /* read only 4 bits or digits */
  } 
```

第2步）

```
 // convert my_number to another base (eg. hex or decimal or octal or Base64)
  // by repeated division by BASE and storing the modulus
  while (my_number) {
       int modulus = my_number % BASE;
       my_number/=BASE;
       PUSH(modulus);
  } 
```

步骤 2.5)

```
 // Pop the numbers in range (0..BASE-1) from stack 
  // to output them from left to right
  while (POP(my_number) >=0) {     // assumes that pop returns <0 when empty
      cout << myTable[my_number];  // this can be selected for any base
  } 
```

# jquery-mobile - data-add-back-btn="true" 不起作用

> ID：13662696
> 
> 赞同：5
> 
> 时间：2012-12-01T19:01:37.377
> 
> 标签：jquery-mobile

问题在标题上。这是[jsfiddle](http://jsfiddle.net/marcolino/c2pUt/)。这是代码：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Back button test</title>
<link href="//code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" rel="stylesheet">
<script src="//code.jquery.com/jquery-1.8.1.min.js"></script>
<script src="//code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head>
<body>
    <div id="home" data-role="page" data-add-back-btn="true">
        <div data-role="header"><h1>header</h1></div>
        <div data-role="content">content</div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T19:34:59.763

JQM 仅在第一个视图之外的页面上添加一个后退按钮。如果您添加另一个页面，`data-add-back-btn="true"`它将显示：

```
<body>
<!-- -->
<div id="home" data-role="page" data-add-back-btn="true">
    <div data-role="header"><h1>header</h1></div>
    <div data-role="content">
        content <a href="#page2">page2</a>
    </div>

</div>
<div id="page2" data-role="page" data-add-back-btn="true">
    <div data-role="header"><h1>Page 2</h1></div>
    <div data-role="content">Back-button visible</div>
</div>
</body> 
```

[http://jsfiddle.net/c2pUt/4/](http://jsfiddle.net/c2pUt/4/)

* * *

这是 jquery-mobile-1.2.0.js 的一个片段（从第 4800 行开始）：

```
// Auto-add back btn on pages beyond first view
if (o.addBackBtn && role === "header" 
    && $(".ui-page").length > 1 
    && $page.jqmData("url") !== $.mobile.path.stripHash(location.hash) 
    && !leftbtn) {

    backBtn = $("<a href='javascript:void(0);' class='ui-btn-left' data-" + $.mobile.ns + "rel='back' data-" + $.mobile.ns + "icon='arrow-l'>" + o.backBtnText + "</a>")
    // If theme is provided, override default inheritance
    .attr("data-" + $.mobile.ns + "theme", o.backBtnTheme || thisTheme)
        .prependTo($this);
} 
```

# linux - 关于 linux 内核 jiffies

> ID：13662704
> 
> 赞同：0
> 
> 时间：2012-12-01T19:03:24.557
> 
> 标签：linux, time, linux-kernel, scheduling

作为我任务的一部分，我必须实现一个调度类。我写了两个系统调用来记录内核调度的进程的顺序。根据这些数据，我必须得出结论，它是全局调度还是本地调度。1\. 我已将 jiffies、pid、tid 打印到内核空间。2\. 通过观察 pid 和 tids 的 jiffies 和序列，我必须断定它是全局调度还是本地调度。3.我必须知道内核为每个进程分配的时间量。

我的问题：我在哪里可以找到那个时间量子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:12:53.200

Jiffies 用于计算时间单位。时间量是内核为进程或线程分配的单位数。您可以通过观察进程/线程调度之间的 jiffies 变化来结束量子，直到切换到另一个进程/线程。

# visual-studio-2010 - ClickOnce 安装对话框图标

> ID：13662706
> 
> 赞同：6
> 
> 时间：2012-12-01T19:03:32.997
> 
> 标签：visual-studio-2010, installation, icons, clickonce

由于某种原因，ClickOnce 安装对话框中显示的图标看起来不正确：

![SourceLog ClickOnce 安装对话框图标问题](../Images/2567cb446c3b3d34475746fafdda244a.png)

它应该看起来像这样：

![源日志图标 32x32](../Images/347ca90381c964ff3dc75ea8f2549a72.png)

我的 Visual Studio 解决方案中有各种“图像类型”的图标，但我不确定 ClickOnce 安装对话框需要哪一个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T23:50:31.237

我遇到了同样的问题，主题相似的图标由纯色背景上的小符号组成。解决方案是选择一种未使用的颜色并将其用于图像的左下角，ClickOnce 安装程序将使用它来实现透明度。在这种情况下，以及我的图像的情况下，它选择的颜色是图像的大部分，因此结果如上所示。

![透明的](../Images/0d1c0fb3de5d7547b1f4436e4dc96891.png)
我发现我需要将图标左下角像素的颜色修改为与背景其余部分不同的颜色，以便 ClickOnce 安装对话框正确显示图像。 ![修改后的图标](../Images/a23671d61d4c9cf3d5afe594c83c8657.png)
结果是我们在下面看到的，它将黑色像素视为用于透明度的颜色。
![更正](../Images/5625890ec5a799fcdd5d974ffb0680a1.png)

# css - 自定义 CSS 来创建 WordPress 下拉菜单

> ID：13662711
> 
> 赞同：0
> 
> 时间：2012-12-01T19:04:26.643
> 
> 标签：css, wordpress, drop-down-menu, navigation, navbar

我需要将常规导航栏转换为页面上的下拉菜单，但我对代码感到困惑。这是现有的代码。

下面是#header 和#mainnav 的CSS - 有人可以帮忙指出我需要在哪里添加下拉位吗？我真的很困惑，似乎没有任何效果 张贴图片

```
**header

*******************/

#header {

background:url(images/bgHeader.jpg) no-repeat center top;
height:274px;
}

#header h1
{
float:right;
width:280px;
height:200px;
margin:0 0 21px 0;
}

#header h1 a
{
display:block;
width:280px;
height:200px;
text-indent:-9999px;
}

#header h2
{
margin:0 0 0 0;
color:red;
float:left;
text-indent:-9999px;
}

#header #mainNav
{
/*clear:both;*/
float:left;
width:750px;
height:52px;
}

#header #mainNav li
{
display:block;
float:left;
margin-right:30px;
width:auto;
}

#header #mainNav li#menu-item-56
{
    width:87px;
}

#header #mainNav li#menu-item-54
{
    width: 86px;
}

#header #mainNav li#menu-item-53
{
    width: 76px;
}

#header #mainNav a
{
font-size:14px;
line-height:14px;
text-transform:uppercase;
text-decoration:none;
color:#000;
font-weight:bold;
padding-top:13px;
display:block;
}

#header #mainNav li.current_page_item a,
#header #mainNav li.current_page_parent a,
#header #mainNav li a:hover
{
background:url(images/bgMenuActive.jpg) no-repeat center top;
color:#f2152a;
}

#header .social
{
width:171px;
float:right;
margin:13px 0 0 0;
}

#header .social li
{
margin:0 0 0 9px;
} 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:34:05.410

You mean you what to add dropdowns to the menu? If the theme allows it - You can use the wordpress built in menu editor in the admin to add sub items to your menu.

[http://codex.wordpress.org/WordPress_Menu_User_Guide](http://codex.wordpress.org/WordPress_Menu_User_Guide)

Otherwise it's going to take more than CSS to add dropdowns.

# performance - Postgresql：SELECT DISTINCT ON 的更快替代方案

> ID：13662713
> 
> 赞同：0
> 
> 时间：2012-12-01T19:04:44.017
> 
> 标签：performance, postgresql-9.1, insert-select, distinct-on

我在将过滤后的数据从一个表复制到另一个表（具有类似结构）时遇到问题。基本上，我有一个包含大约 110 亿行的大表，我想将基于其中一列（称为“指纹”）唯一的记录复制到另一个表中。我试过这样的事情：

```
INSERT INTO table2 SELECT DISTINCT ON (fingerprint) * FROM table1; 
```

它通常有效，但速度很慢；我在一个包含 800 000 行的较小的表上对其进行了测试，花了将近一个小时。我尝试将 INSERT 更改为一对 COPY （带二进制选项）语句，但不知何故更糟......

我在 Linux LMDE 上运行 psql 服务器，i5-2410m 具有 6gigs 的 RAM。我不知道它是否需要这么长时间以及是否有办法改进它。我会很感激任何提示。

# php - 带有发送按钮的 HTML 表单到“电子邮件”字段的地址而不是站点管理员

> ID：13662716
> 
> 赞同：1
> 
> 时间：2012-12-01T19:04:47.823
> 
> 标签：php, html, wordpress, contact-form

使用联系表，客户通常会填写他们的信息和电子邮件等，当他们点击发送时，会向您发送一封电子邮件。

但是，我需要一个表单，它将电子邮件发送到“电子邮件”字段中填充的电子邮件。

我必须每天向客户发送跟踪信息，并希望通过此表单而不是电子邮件客户端来完成。

```
 <div id="form">
 <div id="name">
 <p id="username"> Name:&nbsp; </p>
 <input type="text" name="name" class="textfield">
 </div>
 <div id="name">
 <p id="username"> Email: &nbsp; </p>
 <input type="text" name="name" class="textfield">
 </div>
 <div id="name">
 <p id="username"> Message: </p>
 <input type="text" name="message" class="textarea">
 </div>
 <input type="button" value="SEND" id="btn"> 
 </div> 
```

我不知道如何执行 SEND 函数以正确方式触发的最后一部分。如果有人可以帮助，请。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T19:27:29.180

我会使用 Swiftmailer 来解决这个问题。表单如下所示：

```
<form method="POST" action="send.php">
<div id="form">
<div id="name">
<p id="username"> Name:&nbsp; </p>
<input type="text" name="name" class="textfield">
</div>
<div id="name">
<p id="username"> Email: &nbsp; </p>
<input type="text" name="email" class="textfield">
</div>
<div id="name">
<p id="username"> Message: </p>
<input type="text" name="message" class="textarea">
</div>
<input type="button" value="SEND" id="btn"> 
</div>
</form> 
```

然后'send.php'看起来像：

```
<?php
require_once 'lib/swift_required.php';

$transport = Swift_SmtpTransport::newInstance('smtp.google.com', 465, 'ssl')
  ->setUsername('mail@gmail.com')
  ->setPassword('your password');

$mailer = Swift_Mailer::newInstance($transport);

$name = $_POST['name'];
$emailTo = $_POST['email'];
$message = $_POST['message'];

$message = Swift_Message::newInstance('Your subject goes here')
  ->setFrom(array('yourmail@here.com' => 'Your name here'))
  ->setTo(array($emailTo => $name))
  ->setBody($message);

$result = $mailer->send($message);

if ( $result > 0 )
{
    //Email was sent
}
else
{
    // Email was not sent
}

?> 
```

Swiftmailer 您可以从这里下载：[http](http://swiftmailer.org/download) ://swiftmailer.org/download （只需解压缩到与 send.php 相同的路径） Swiftmailer 的文档在这里：[http ://swiftmailer.org/docs/introduction.html](http://swiftmailer.org/docs/introduction.html)

希望能帮助到你！

# python - 文件中组合元素的总和

> ID：13662719
> 
> 赞同：1
> 
> 时间：2012-12-01T19:05:18.893
> 
> 标签：python, list, text

我对 Python 很陌生，我一直在为我的程序构建逻辑。我想学习，但我觉得我需要一些外部帮助。也许你们可以帮助我。这是家庭作业/项目。

`list (SalesData.txt)`看起来像这样：

*   名称 1
*   23
*   34
*   454
*   名称 2
*   344
*   34
*   45

它至少有 5 个不同的名称。但是对于这个例子，这会做。

基本上，我需要得出所有数字的总和，然后是每个名字的总和。

**输出**:: 在这种情况下（使用示例）

1.  总计 = 934（所有数字的总和）
2.  名称 1 总计 = 511（名称 1 的数字总和）
3.  名称 2 总计 = 423（名称 2 的数字总和）

我知道如何获得仅包含数字的文件的总和，但是当涉及到混合时，我很困惑。另外，我如何指定获取每个`"name"`. 我应该使用`.isdigit()`and`.isalpha()`来告诉列表什么时候求和什么时候不求和？

任何建议都会帮助我！谢谢！

**更新** 这是我到目前为止的代码：

```
data = []
data = open("SalesData.txt").read().split()
    for i in data:
        s = sum([ float(i) ])
print "Sum=" , s
print "Avg="  , s/len(data) 
```

这仅在文件全为数字时才有效，这很容易对内容进行求和。但请记住，我每 12 个数字处理一个字符串。我试图弄清楚如何仅在找到带有浮点数的行时才进行求和。

**更新#2**

我仍然需要一些指导！我开始用我自己的方式来总结，但我发现了一些非常基本的问题（我敢肯定）

```
data = []
data = open("SalesData.txt").read().split()
    for i in data:
        if str(i):
            print 'This one is Letter'
        elif float(i):
            s = sum([ float(i) ])
print "Sum=" , s
print "Avg="  , s/len(data) 
```

我知道这个例子不起作用，我想知道为什么。我正在尝试分析列表。如果'i'是一个字符串，程序将（在这个例子中打印'Letter'）如果它不是一个字符串，它会做常规的数字总和。我当时正在使用这个程序，我希望能够使用提供的混合列表来获得数字的总和，但是我在将字符串分析为字符串和将浮点数分析为浮点数方面陷入困境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T19:28:07.740

请注意，如果您有一个非整数或负值（例如 342.2 或 -342）， `.isdigit()`它将返回，因此这可能不是一个好的机制。`False`

正如 Kreativitea 所指出的，`int()`它可用于从数字（特别是整数）中区分单词，但考虑到`float()`当数字可能是整数或浮点数时，这将适用于更一般的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T19:12:25.017

由于这是家庭作业，我将仅提供一般指导。

1.  您不需要使用 isdigit 或 isalpha。当您尝试`int()`在不是整数的东西上使用 an 时会发生什么？好的，现在您有了一个区分两组的过程。
2.  数字列表后面是否总是有相同数量的项目？如果没有，`while`循环可能是个好主意。
3.  在任何一种情况下，数据的质量如何，例如用抽象术语描述数据。哪些数据结构可以很好地映射到这种数据？
4.  分解过程；最好创建两个易于阅读的函数，而不是创建一个难以阅读的函数。

祝你好运。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T20:24:31.083

关于更新#2：这里有几个逻辑问题。

首先，`if str(i):`并不意味着“如果`i`是一个字符串，......”。它的意思是“从创建一个字符串`i`；现在，如果结果字符串是非空的，......”。

其次，`i`来自`data`，它是文件的行列表。所以它**必须**是一个字符串。这就是您读取文件时所得到的。*除非您告诉程序，*否则不会尝试将各种符号解释为数字。

第三，当这样的转换失败时，它将通过引发异常而失败。你不能用一个`if`块来测试它。你必须使用`try`/`except`异常处理。

`s`第四，每次得到一个数字时，您都在尝试计算，使用只有该数字的一个元素列表。这不会给你所有数字的总和。如果你想把几个数字相加，你必须先把这些数字放在一起。

第五，您使用`len(data)`数字计数来除以总和。这是错误的，因为这是文件中的行数，并且您已经说过其中一些可能被排除在外。您只想计算数字，这再次需要先将该列表放在一起。

`sum`先写一些可以给你数字列表的东西，然后使用and与该列表一起使用很简单`len`（每次一次，在循环之外）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-01T19:08:55.693

假设名称是唯一的，您可以从文件中填充一个[字典](http://docs.python.org/2/library/stdtypes.html#mapping-types-dict)，以便键是名称，值是数字列表。然后很容易获得`sum`每个项目以及`sum`总和。

要构建一个 dict，您需要组合一个简单的解析器。例如：

```
def parse(fname):
    data = {}
    numbers = []
    for line in f:
       # figure out if line has name or number
       if ... # this is a number
           numbers.append(float(line))
       else:
           data[name] = numbers
    return data 
```

这不是完整的代码，因为它是一个家庭作业问题。另请注意，您可能需要正确处理您在第一行读到的名字。

# android - 是否可以在 try/catch 中启动活动？

> ID：13662723
> 
> 赞同：0
> 
> 时间：2012-12-01T19:05:47.573
> 
> 标签：android, android-intent, service, android-activity, try-catch

我有一个服务是假设启动 android 音乐应用程序，基本上是让音乐应用程序在屏幕上弹出。我试图这样做的方式是：

```
public void onStart(Intent intent, int startId) 
{
    // TODO Auto-generated method stub
    super.onStart(intent, startId);
    System.out.println("LOGS STARTED");
    ActivityManager am = (ActivityManager)this.getSystemService(ACTIVITY_SERVICE);
    List l = am.getRunningAppProcesses();
    Iterator i = l.iterator();
    PackageManager pm = this.getPackageManager();
    while(i.hasNext()) 
    {
        ActivityManager.RunningAppProcessInfo info = (ActivityManager.RunningAppProcessInfo)(i.next());
        try 
        {
            CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(info.processName, PackageManager.GET_META_DATA));
            Log.w("LABEL", c.toString());
            if(c.equals("Music"))
            {
                System.out.println("HELLO \n");
                                    Intent in = new Intent();
                in.setClassName("com.android.music", "com.android.music.MediaButtonIntentReceiver");
                startActivity(in);
            }
         }
        catch(Exception e) 
        {
            //Name Not FOund Exception
        }
    }

} 
```

logcat 确实显示 Hello，但由于某种原因，音乐不会开始。但是当我将它移到另一个位置时，它确实开始了。有没有办法以这种方式做到这一点，还是我必须以另一种方式做到这一点？我希望用户单击图标后弹出音乐应用程序。这就是为什么我做了 if c.equals("Music") 部分。之所以在 try 里面是因为这一行：

```
CharSequence c = pm.getApplicationLabel(pm.getApplicationInfo(info.processName, PackageManager.GET_META_DATA)); 
```

会得到一个错误，快速修复是让它被 try/catch 语句包围。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T21:08:24.960

这里有很多关于 Intents、Activity 和 BroadcastReceivers 之间的区别以及 Android 为此类事情设置的一般方式的误解。让我们看看我们是否可以清除其中的一些。:)

您已经创建了一个 Intent 并尝试将其定位到特定的包，然后调用`startActivity`. 但是您正在尝试针对`com.android.music.MediaButtonIntentReceiver`不是 Activity 的组件。`startActivity`使用此 Intent调用可能会失败。

它比这更糟糕。即使你有准确的活动名称来发送`com.android.music`包的意图，安装了不同音乐应用程序的用户怎么办？许多 OEM 在设备上发布了他们自己的音乐播放器变体，这意味着明确定位该软件包名称将在他们的设备上失败。例如，Nexus 设备上的 Google Play 音乐使用包名称`com.google.android.music`，而不是您在上面指定的包。

基于匹配本地化应用标签字符串的过滤也会给您带来问题。您正在寻找一个简单标题为“音乐”的应用程序，但此字符串会根据特定的音乐应用程序和区域设置而有所不同。例如，Google Play 音乐使用字符串“Google Play 音乐”，而翻译成其他语言的“音乐”也不会匹配这个确切的字符串。

最后，您只需要使用 ActivityManager 查看正在运行的应用程序进程。这会给您带来问题，因为如果应用程序当前没有运行怎么办？Android 可以在后台终止应用程序进程以获取资源，用户不需要知道这一点。您正在编写的代码会为您的用户意外中断。

所以，你可以做什么？

意图是通用的。与其使用特定的人类可读标签字符串来抓取特定程序包的运行进程列表，不如告诉 Android 您要在语义上执行什么操作。您想启动音乐应用程序。

```
Intent musicIntent = new Intent(Intent.ACTION_MAIN)
        .addCategory(Intent.CATEGORY_LAUNCHER)
        .addCategory(Intent.CATEGORY_APP_MUSIC)
        .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(musicIntent); 
```

逐行进行，我们在这里所做的是告诉 Android：

*   我们想发起一个“主要”行动，而不是更专业的行动
*   我们希望它是用户通常会从启动器（主屏幕）启动的 Activity
*   我们希望它是一款宣传自己能够播放音乐的应用程序
*   我们希望它在新任务中启动，或者如果该应用程序的任务已经存在，则将其置于最前面。

现在，我们以更少的代码行成功地以更通用的方式实现了这一点，这种方式更能抵抗边缘情况，并且还会自动遵循用户对音乐应用程序的偏好。（如果有多个应用程序与 Intent 匹配，系统会询问用户他们想要启动哪个应用程序，并且有机会将其设置为下次的默认设置。）

话虽如此，您还提到您正在从服务启动一个活动。如果这种情况突然发生而不是响应用户采取的行动，通常被认为是糟糕的用户体验设计，因此请记住这一点。

# mysql - MySQL：从另一个表中获取没有重复的数据

> ID：13662726
> 
> 赞同：1
> 
> 时间：2012-12-01T19:06:14.840
> 
> 标签：mysql, sql

我是 MySQL 的初学者，我遇到了一些问题。我有两张桌子。其中一个被调用`core`并具有 200.000 个条目并包含该列`messageid`。另一个表称为，有 1.200.000 个条目并`recipients`具有列`recipientid`和。`messageid``personid`

我正在`personid`表`core`中创建一个新列，以便导入两列中相同的`personid`条目。`messageid`我知道在表中`recipients`，有多个条目`messageid`，所以我只想返回第一个。我正在使用以下 sql 查询：

```
UPDATE core A
SET personid =
(SELECT personid
FROM recipients B
WHERE B.messageid = A.messageid) 
```

我不明白为什么，但它不起作用。我想从其他表导入数据时工作，但不是这个表。最终，它只会使我的本地 php/mysql 服务器崩溃。

你对如何做到这一点有任何想法吗？

更新：

这是 SHOW INDEX FROM 收件人的结果。列名“recipientid”的基数为 1356207，索引类型为 BTREE。列名“messageid”的基数为“NULL”，索引类型为 BTREE。

当我运行 SHOW INDEX FROM core 时，查询运行成功，但没有显示任何内容。这是否意味着有问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:00:18.190

## 第 0 部分 - 在你做任何其他事情之前......

...您需要能够在`core`不超时或使服务器崩溃的情况下执行查询。根据您更新的问题，您可能必须创建一些索引`core`以帮助加快对其的查询（否则数据库必须扫描***整个表***以确保它做正确的事情）。至少，索引`messageid`应该有助于：

```
ALTER TABLE core ADD INDEX messageid_idx(messageid); 
```

messageid 上的这个索引应该有助于加快对该列进行操作的任何查询，例如更新查询。

我的其余答案将分为两部分。首先，您的问题的答案，您确定要忽略 multiple `personid`'s per `messageid`in `recipients`。

我的答案的第二部分包含额外的查询，我将预先执行这些查询来分析 multiple`personid`以确定它们是否真的重要。也许您真的确定 multiple`personid`的 per`messageid`没什么大不了的，但是希望这将有助于其他寻求与您类似的问题的答案的人。

## 第 1 部分：任何人都可以，谢谢

对于具有多个`personid`per的收件人`messageid`，我们将让数据库引擎决定`personid`使用哪个进行更新：

```
-- Update core personid with recipients personid where messageid matches
UPDATE
    core
    INNER JOIN (
        SELECT
            messageid,
            personid
        FROM
            recipients
        GROUP BY
            messageid
    ) AS one_message_per_person USING (messageid)
SET
    core.personid = one_message_per_person.personid 
```

很简单，对吧？好的，让我们继续。

## 第 2 部分：实际上，我对那些多人的消息很感兴趣。他们是哪些？

如果您只想知道哪些`messageid`' 与多个`personid`' 相关联，您可以使用以下命令查询它们：

```
-- Find messageids with more than one personid
SELECT
    messageid,
    personid,
    COUNT(DISTINCT personid) AS num_people_in_message
FROM
    recipients
GROUP BY
    messageid
HAVING
    num_people_in_message > 1 
```

如果您还想查看`personid`与他们关联的个人，可以使用以下查询。注意，会有重复`messageid`的，每个人一个`personid`：

```
-- Show the messageid and personid of the messages with multiple people
    SELECT
    messageid,
    personid
FROM
    recipients
WHERE
    messageid IN (
        SELECT
            messageid
        FROM
            (
                SELECT
                    messageid,
                    personid,
                    COUNT(DISTINCT personid) AS num_people_in_message
                FROM
                    recipients
                GROUP BY
                    messageid
                HAVING
                    num_people_in_message > 1
            ) AS messages_with_multiple_people
    )
GROUP BY
    messageid, personid 
```

我是否正确理解了您的问题并提供了您需要的答案？但愿如此。非常感谢[sqlfiddle](http://sqlfiddle.com/#!2/38738/5)帮助我确保这些查询实际上对您有用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T19:33:47.737

I don't think you can use select and update in one query for MySQL my advice would be to use procedures to achieve the same

# xslt - XSLT 排序问题：前 N 个具有相同值的多个节点

> ID：13662728
> 
> 赞同：1
> 
> 时间：2012-12-01T19:06:23.410
> 
> 标签：xslt, sorting

我需要获取 xml 树中的前 N ​​个值，或者更好地说，我需要获取大于或等于第 N 个值的值，因此包括“ex-aequos”。我开始的xml是这个

```
<?xml version="1.0" encoding="UTF-8"?>
<results>
    <node type="prov" id="1" name="GLD">
        <node type="gem" id ="2" name="Wageningen" value="300" />
        <node type="gem" id ="3" name="Arnhem" value="500" />
        <node type="gem" id ="4" name="Nijmegen" value="80" />
        <node type="gem" id ="5" name="Beekbergen" value="40" />
        <node type="gem" id ="6" name="Apeldoorn" value="3000" />
        <node type="gem" id ="7" name="Rhenen" value="20" />
        <node type="gem" id ="8" name="Bennekom" value="750" />
        <node type="gem" id ="9" name="Velp" value="500" />
        <node type="gem" id ="10" name="Ede" value="250" />
    </node>
    <node type="prov" id="11" name="LI">
        <node type="gem" id ="12" name="Maastricht" value="1300" />
        <node type="gem" id ="13" name="Heerlen" value="5010" />
        <node type="gem" id ="14" name="Venlo" value="1300" />
        <node type="gem" id ="15" name="Sittard" value="240" />
        <node type="gem" id ="16" name="Roermond" value="100" />
        <node type="gem" id ="17" name="Valkenburg" value="120" />
        <node type="gem" id ="18" name="Geleen" value="1750" />
        <node type="gem" id ="19" name="Venray" value="1300" />
        <node type="gem" id ="20" name="Beek" value="850" />
    </node>
</results> 
```

并以此结束，以防 N=3

```
<?xml version="1.0" encoding="UTF-8"?>
<results>
    <provincie id="1" name="GLD">
        <gemeente id="6" name="Apeldoorn" value="3000"/>
        <gemeente id="8" name="Bennekom" value="750"/>
        <gemeente id="3" name="Arnhem" value="500"/>
        <gemeente id="9" name="Velp" value="500"/>
    </provincie>
    <provincie id="11" name="LI">
        <gemeente id="13" name="Heerlen" value="5010"/>
        <gemeente id="18" name="Geleen" value="1750"/>
        <gemeente id="12" name="Maastricht" value="1300"/>
        <gemeente id="14" name="Venlo" value="1300"/>
        <gemeente id="19" name="Venray" value="1300"/>
    </provincie>
</results> 
```

当我使用下面的 xslt 时，结构还可以，但它显然不会返回 id 为 9,14 和 19 的元素。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes" />

    <xsl:template match="/">
        <results>
            <xsl:apply-templates select="/results/node"/>
         </results>"'
    </xsl:template>

    <xsl:template match="/results/node">
        <xsl:variable name="provname" select="@name"/>
        <xsl:variable name="provid" select="@id"/>
        <provincie id="{$provid}" name="{$provname}">
            <xsl:apply-templates select="./node">
                <xsl:sort select="@value" data-type="number" order="descending"/>
            </xsl:apply-templates>
        </provincie>
    </xsl:template>

    <xsl:template match="results/node/node">
        <xsl:variable name="gemname" select="@name"/>
        <xsl:variable name="gemid" select="@id"/>
        <xsl:variable name="value" select="@value"/>

        <xsl:if test="position() &lt;= 3">
            <gemeente id="{$gemid}" name="{$gemname}" value="{$value}" />
        </xsl:if>
    </xsl:template>
</xsl:stylesheet> 
```

现在不知道该走哪条路。下面的代码不能解决问题。

```
<xsl:variable name="limitvalue" select="./node[3]/@value"/>
<xsl:if test="@value &gt;= $limitvalue">
    <gemeente id="{$gemid}" name="{$gemname}">
        <xsl:value-of select="@value"/> 
    </gemeente>
</xsl:if> 
```

任何帮助表示赞赏！

更新，基于@ThomasW 的解决方案并允许设置limitrank。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

    <xsl:output method="xml" indent="yes" />

    <!--set limitrank as the rank that we use to cut off-->
    <xsl:variable name="limitrank" select="3"/>

    <xsl:template match="/">
        <results>
            <xsl:apply-templates select="/results/node"/>
        </results>
    </xsl:template>

    <xsl:template match="/results/node">
        <!-- We generate a string of decending @value numbers; 
         Each number covers exactly 5 characters (spaces are added if there are less than 5 digits) -->
        <xsl:variable name="sortedValues">
            <xsl:for-each select="node">
                <xsl:sort select="@value" data-type="number" order="descending"/>
                <!-- Here we add spaces and strip everything that exceeds 5 characters -->
                <xsl:value-of select="substring(concat(@value,'    '),1,5)"/>
            </xsl:for-each>
        </xsl:variable>
        <!-- Now, we get the Nth number, which covers bytes (limitrank-1)*5+1 to limitrank*5;
         So that we get a meaningful result if there were less than three numbers, we add two trailing zeroes -->
        <xsl:variable name="limitValue" select="substring(concat($sortedValues,'0    0'),($limitrank - 1) * 5 + 1,5)"/>

        <provincie>
            <xsl:copy-of select="@id|@name"/>
            <xsl:apply-templates select="node[@value &gt;= $limitValue]">
                <xsl:sort select="@value" data-type="number" order="descending"/>
            </xsl:apply-templates>
        </provincie>
    </xsl:template>

    <xsl:template match="results/node/node">
        <gemeente>
            <xsl:copy-of select="@id|@name|@value"/>
        </gemeente>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T20:44:41.197

我对这个问题的理解：对于每个省，你按他们的`@value`. 然后你取前三名，如果有其他人与`@value`第三名相同，你也包括那个。是对的吗？

我相信这只能通过一些字符串技巧来完成（参见代码中的注释）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" indent="yes" />

  <xsl:template match="/">
    <results>
      <xsl:apply-templates select="/results/node"/>
    </results>
  </xsl:template>

  <xsl:template match="/results/node">
    <!-- We generate a string of decending @value numbers; 
         Each number covers exactly 5 characters (spaces are added if there are less than 5 digits) -->
    <xsl:variable name="sortedValues">
      <xsl:for-each select="node">
        <xsl:sort select="@value" data-type="number" order="descending"/>
        <!-- Here we add spaces and strip everything that exceeds 5 characters -->
        <xsl:value-of select="substring(concat(@value,'    '),1,5)"/>
      </xsl:for-each>
    </xsl:variable>
    <!-- Now, we get the 3rd number, which covers characters 11 to 15;
         So that we get a meaningful result if there were less than three numbers, we add two trailing zeroes -->
    <xsl:variable name="limitValue" select="substring(concat($sortedValues,'0    0'),11,5)"/>

    <provincie>
      <xsl:copy-of select="@id|@name"/>
      <xsl:apply-templates select="node[@value &gt;= $limitValue]"/>
    </provincie>
  </xsl:template>

  <xsl:template match="results/node/node">
    <gemeente>
      <xsl:copy-of select="@id|@name|@value"/>
    </gemeente>
  </xsl:template>
</xsl:stylesheet> 
```

输出如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<results>
  <provincie id="1" name="GLD">
    <gemeente id="3" name="Arnhem" value="500"/>
    <gemeente id="6" name="Apeldoorn" value="3000"/>
    <gemeente id="8" name="Bennekom" value="750"/>
    <gemeente id="9" name="Velp" value="500"/>
  </provincie>
  <provincie id="11" name="LI">
    <gemeente id="12" name="Maastricht" value="1300"/>
    <gemeente id="13" name="Heerlen" value="5010"/>
    <gemeente id="14" name="Venlo" value="1300"/>
    <gemeente id="18" name="Geleen" value="1750"/>
    <gemeente id="19" name="Venray" value="1300"/>
  </provincie>
</results> 
```

如果您希望对市政当局进行排序，那么您当然必须包括另一个`xsl:sort`：

```
 <provincie>
      <xsl:copy-of select="@id|@name"/>
      <xsl:apply-templates select="node[@value &gt;= $limitValue]">
        <xsl:sort select="@value" data-type="number" order="descending"/>
      </xsl:apply-templates>
    </provincie> 
```

# javascript - JustGage Javascript 值中的 PHP 数据

> ID：13662731
> 
> 赞同：0
> 
> 时间：2012-12-01T19:06:47.957
> 
> 标签：javascript, php, mysql, raphael, justgage

我已经尝试了很长一段时间了，首先我使用 PHP 作为我的服务器端脚本，使用 mysql 作为数据库。我最近遇到了 justgage.com 的在线量具图表。

所以它的代码是这样的：

```
var g = new JustGage({
   id: "gauge", 
   value: getRandomInt(350, 980), 
   min: 350,
   max: 980,
   title: "Lone Ranger",
   label: "miles traveled"
 }); 
```

所以我想使用 javascript 自动刷新从 php 动态设置量具的值，如果我只在值字段中使用 PHP 短标签，这是不可能的。简而言之，我想使用 jusgage.com 图表并实时动态地从 php 获取值而无需刷新 html 这可能吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T19:30:57.023

使用`g.refresh(newValue)`. 这似乎不在网站上，而且他们没有 API，但我在代码中看到了它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-02T22:54:49.030

```
 var g1, g2;

  window.onload = function(){

    var g1 = new JustGage({
      id: "cpugauge", 
      value: 0, 
      min: 0,
      max: 100,
      title: "CPU",
      label: "Load"
    });

    var g2 = new JustGage({
      id: "memgauge", 
      value: 0, 
      min: 0,
      max: 100,
      title: "Memory",
      label: "Used"
    });

    setInterval(function() {
        $.get('ajax/cpu.php', function (newValue) { g1.refresh(newValue); });
        $.get('ajax/mem.php', function (newValue) { g2.refresh(newValue); });          
    }, 2500);
  }; 
```

# javascript - 如何在 Rails 后端和浏览器上的 Javascript 中为字符串生成哈希值？

> ID：13662735
> 
> 赞同：1
> 
> 时间：2012-12-01T19:07:21.743
> 
> 标签：javascript, ruby-on-rails, hash

我正在用 Ruby on Rails 构建一个网页游戏，我希望大部分游戏逻辑都发生在浏览器上。该游戏涉及用户回答问题。我需要在网页中嵌入答案，因为这是我放置验证用户正确回答问题的代码的地方。我不想将答案放在纯文本中，因为精明的用户可以查看源代码以查看答案，所以我想在将它们嵌入页面之前使用散列对其进行加密。

为此，我需要首先在我的 Rails 后端为答案字符串创建哈希值，然后当用户回答问题时，我需要为他们的答案创建哈希值并将该哈希值与嵌入的哈希值进行比较. 如果他们相等，那么他们正确回答了问题，我通知我的服务器。

如何在 Rails 后端和浏览器上的 Javascript 中为字符串生成哈希值？

您会建议一种更好的方法来隐藏我的网页上的答案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:14:09.753

鉴于 MD5 应作为后缀的目的，从客户端的角度来看，您可以从此处使用 MD5 的 phpjs.org 版本

[http://phpjs.org/functions/md5/](http://phpjs.org/functions/md5/)

如果 MD5 不够好，您可以在 Google Closure Library 中查看其他哈希可能性

[http://closure-library.googlecode.com/svn/docs/namespace_goog_crypt.html](http://closure-library.googlecode.com/svn/docs/namespace_goog_crypt.html)

我从未使用过 ruby​​，但 MD5 对应物似乎是这样

[http://ruby-doc.org/stdlib-1.8.6/libdoc/digest/rdoc/MD5.html](http://ruby-doc.org/stdlib-1.8.6/libdoc/digest/rdoc/MD5.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:24:01.627

随着像 lostsource 这样的网站的现成可用，为了加强哈希，您应该将时间戳添加到其中。然后，您的数据中有时间戳，并且可以使用“#{timestamp}#{hashcode}”调用 phpjs md5 哈希码。

# c++ - 访问器和修改器方法

> ID：13662737
> 
> 赞同：0
> 
> 时间：2012-12-01T19:08:13.857
> 
> 标签：c++, attributes, accessor, mutators

> **可能重复：**
> [为什么要使用 getter 和 setter？](https://stackoverflow.com/questions/1568091/why-use-getters-and-setters)

在我看来，编写访问器和修改器方法很麻烦，尤其是在处理非常简单的属性时。我为什么要费心使用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T19:12:36.370

答案主要取决于您编写代码的目的是什么，以及如果您独自工作，您对自己的信任程度：

*   当您与人一起工作或想要强制编译时检查以确保您没有在课堂外使用它们时，保持变量私有很有用
*   如果您有副作用，setter 很有用
*   如果你有副作用或者你想让变量保持只读，getter 很有用
*   拥有或不拥有 getter 和 setter 是您的选择，如果其他人要使用您的类，那么封装可能是一件好事，因为*信息隐藏*原则
*   如果你是唯一一个在你的项目上工作的人，就做你想做的事，如果你真的觉得有必要，你会及时添加它们
*   因为我们在谈论 C++，所以不要忘记`friend`允许细粒度封装而无需使用 setter 和 getter 的指令（即使它鼓励耦合，所以这里有两种不同的思想流派）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T19:13:45.907

我不能谈论 C++ 语法负担，但在一般面向对象的术语中，您应该提供 getter 和 setter，因为其他类不知道您如何存储内部状态，包括直接存储哪些属性，这些属性是根据其他状态计算的并进一步转移到其他对象。与更广泛的世界就类如何存储状态进行合同公告将限制您将来可以进行的调整，通常会抑制优化并破坏您的代码，因为您要解决的问题变得更加细微。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T19:12:39.417

1.  它们使人们能够控制访问。您可以只读、读/写甚至只写
2.  它使人们能够在必要时更改底层实现。考虑计算许多车辆的平均速度。您可以通过存储速度列表来实现这一点，然后在需要时计算平均值**或**保持运行总数和数量。
3.  所有对类的访问都是通过方法。更容易发现错误。
4.  这不是很多努力。可以使用脚本来创建它们。

# php - 为什么我在共享免费服务器上收到这个奇怪的 500 错误

> ID：13662738
> 
> 赞同：-1
> 
> 时间：2012-12-01T19:08:41.080
> 
> 标签：php, hosting, internal-server-error

我有一个项目（想法）我已经开发了大约 2 个月的想法，我准备在线发布我的应用程序的 beta 版本。

这是我的项目 100% 在我的“**本地主机**”服务器中正常工作的东西；我已经尽我所能来编码标准。大约一个小时前，我将我的项目上传到免费主机服务器
[http://www.serversfree.com/](http://www.serversfree.com/)
以进行在线测试。有一个奇怪的“500”错误，我试图跟踪它，所以我从头开始在我的代码中添加“ **die()** ”语句。我的项目架构基于 MVC 模型，因此每个请求都通过**/public_html/default.php**文件

我在**/public_html/default.php**的第一行添加了一个**die('test')**语句，显而易见的结果是，对于每个请求，*测试*语句都会被清除，并且 php 解释器会停止。

 ***问题是：这个链接

[http://life-journal.bugs3.com/login的结果与这个](http://life-journal.bugs3.com/login)[http://life-journal.bugs3.com/](http://life-journal.bugs3.com/)

不同

我也查看了我网站的日志文件，但没有与***为什么我收到这个奇怪的 500 错误相关的错误***

为什么以及如何解决这个问题以运行我的在线测试？

提前致谢。

* * *

**我的/public_html/default.php**文件的顶部是这样的（现在）：

```
die('test');

session_start();

define(DEVELOPMENT, 'DEVELOPMENT');

define(PRODUCTION, 'PRODUCTION'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:38:04.583

如果你去[http://life-journal.bugs3.com/default.php/login](http://life-journal.bugs3.com/default.php/login)没有错误。我的猜测是您的主机不提供 mod_rewrite 但您应该仔细检查您的 .htaccess

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T19:35:14.020

查看日志，您可能遇到了 PHP 错误。此外，看起来错误报告已关闭，因此出于测试原因，您可以在 PHP 代码的第一行启用它：

```
ini_set("display_errors", 1); 
```

如果打开了错误报告（在生产服务器上不常见），则这是服务器配置错误问题，您可能应该咨询您的托管服务提供商，否则 PHP 错误将导致您找到问题的原因。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-01T20:24:45.150

谢谢你们你的帖子只是提醒我我没有改变我的.htaccess

*重写规则 ^(.+)$ **/index.php/$1***

到

*重写规则 ^(.+)$ **/default.php/$1***

我真的很感谢***

# ruby-on-rails - 如何在rails中获取每个用户的最新帖子

> ID：13662739
> 
> 赞同：2
> 
> 时间：2012-12-01T19:08:51.740
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

假设，我有 2 个不同的模型；用户和帖子。我想获得每个用户的最新帖子。所以输出将是这样的。

```
[<Post user_id:1, content:"yadayada" ....>, <Post user_id:2, content:"blabla"...> ......] 
```

每个用户不超过一个记录是我有点困惑的部分。我用谷歌搜索了一下，发现复杂的活动记录查询来处理这个问题。我想知道是否有任何简单的`rails3.present? ? "rails3" : "rails"`方法。

感觉这不应该超过 1 行代码。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T20:15:42.413

Seeing as I cannot yet post comments, here is the answer to eager loading:

The N+1 problem means that ActiveRecord will not get the posts, when you query for all your users using `User.all`, therefore ActiveRecord will fire a new SQL query that selects the last post for every single user you iterate over. If you have 50 users, that will be one query for the fifty users and then fifty queries for each last post.

In case you have many users, the latency between the database and the Rails application will slow down the performance of the site and make users wait.

Eager loading allows you to fetch associated models to the model you are querying, so you can write:

`User.includes(:posts).all.map { |u| u.posts.last }`

ActiveRecord will first query for all the users, then query for all posts associated with all the users at once before iterating over the users, thereby avoiding doing a new query for each user. This is only two queries.

However, this also has it's drawbacks if your users have tons of posts, because you'll be fetching ALL posts of ALL users and not just the latest posts, thereby straining the database and generating a lot of undesired I/O.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:11:15.443

```
posts = User.all.map { |u| u.posts.last } 
```

# python - 使用直方图对列表进行排序

> ID：13662742
> 
> 赞同：1
> 
> 时间：2012-12-01T19:08:55.013
> 
> 标签：python

给定作为字典的直方图，按字典中定义的频率对仅包含字典中元素的列表进行排序的最 Pythonic、“包含电池”的方法是什么？

字典的键（以及列表中的隐含值）是字符串，频率存储为整数。

我只对 python2 解决方案感兴趣，但也欢迎您编写 python 解决方案，因此其他人也可以从中受益（将来）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T19:14:53.070

```
>>> inList = [1,2,3,4,5]
>>> inDict = {1:5, 2:2, 3:4, 4:1, 5:3}
>>> sorted(inList, key=lambda x: inDict.get(x,0))
[4, 2, 5, 3, 1] 
```

这还具有对不在dict中的元素进行排序的好处，就好像它在dict中的值为0一样，而不是仅仅引发KeyError

该`sorted()`函数有一个可选参数'key'。此参数指定一个参数的函数，用于从每个列表元素中提取比较键。此比较键用于确定元素之间的排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T19:16:55.117

在生成直方图时，我通常会使用`collections.Counter`具有内置`.most_common()`方法的 。您可以将类似计数器的字典传递给 Counter，它会按照您想象的方式工作。

```
>>> test_dict = {1: 6, 2: 8, 3: 2, 4: 4, 5: 8, 6: 4, 7: 10, 8: 3, 9: 7}
>>> c = Counter(test_dict)

# returns a list of tuples with the (item, count) values.  
>>> c.most_common()
[(7, 10), (2, 8), (5, 8), (9, 7), (1, 6), (4, 4), (6, 4), (8, 3), (3, 2)]

# if you want only the counts:
>>> [count for item, count in c.most_common()]
[10, 8, 8, 7, 6, 4, 4, 3, 2]

# if you want only the objects:
>>> [item for item, count in c.most_common()]
[7, 2, 5, 9, 1, 4, 6, 8, 3]    

# if you want them in reverse order
>>> [item for item, count in c.most_common()][::-1]
[3, 8, 6, 4, 1, 9, 5, 2, 7] 
```

从基于列表的输入中创建原始计数的某个子集的计数器对象是微不足道的。您可以使用一个函数：

```
def return_count_from_list(oldcount, my_list):
    count = Counter()
    for i in my_list:
        count[i] = oldcount[i]
    return count 
```

或者，如果您只想要结果，您可以像这样包含您的列表：

```
my_list = [1, 4, 5]
>>> [count for item, count in c.most_common() if item in my_list]
[8, 6, 4] 
```

# python - Python：读取 xml 并搜索丢失的文件

> ID：13662748
> 
> 赞同：-2
> 
> 时间：2012-12-01T19:09:18.330
> 
> 标签：python, xml, file, replace, reconnect

我正在寻找通过 Python 重新连接我丢失的文件！是否可以读取 XML 文件并获取标签之间的文件名示例：

```
<Name>A013_C025_08264E.MOV</Name>
<Name>A002_C001_BLABLA.MOV</Name> 
```

`A013_C025_08264E.MOV, etc`然后在整个外部驱动器中搜索该文件，复制他的相关路径并在 XML 中将元素`<path>...</path>`替换为`<path>ACTUAL PATH FOR A013_C025_08264E.MOV</path>`

超过 300 个文件。

XML 片段：

```
<Media ObjectUID="01718186-c2f3-4c48-9d1a-6305067a5184" ClassID="7a5c103e-f3ac-4391-b6b4-7cc3d2f9a7ff" Version="19" Index="4294967295">
    <IsProxy>false</IsProxy>
    <ActualMediaFilePath></ActualMediaFilePath>
    <RelativePath>../../../../A010_C004_0829D8.MOV</RelativePath>
    <StreamNumber>0</StreamNumber>
    <SingleAudioChannel>-1</SingleAudioChannel>
    <IgnoreAudio>false</IgnoreAudio>
    <IgnoreVideo>false</IgnoreVideo>
    <ConformedAudioRate>9223372036854775807</ConformedAudioRate>
    <CaptureStatus>0</CaptureStatus>
    <OfflineReason>5</OfflineReason>
    <Infinite>false</Infinite>
    <LogComment></LogComment>
    <AlternateTapeName></AlternateTapeName>
    <AlternateStart>0</AlternateStart>
    <FileKey></FileKey>
    <Title>A010_C004_0829D8.MOV</Title>
    <ImplementationID>00000000-0000-0000-0000-000000000000</ImplementationID>
    <Node Version="1">
    </Node>
    <VideoStream ObjectRef="1884"/>
    <TapeName>001</TapeName>
    <FilePath>A010_C004_0829D8.MOV</FilePath>
    <Start>15742672473528000</Start>
</Media> 
```

我们需要在标签中获取名称的`<title>`地方搜索文件并将其路径放在`<file path>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:22:56.620

我会做这样的事情来读取 xml 文件：

```
from BeautifulSoup import BeautifulStoneSoup

xml_file = open("my_xml_file.xml", "r")

soup = BeautifulStoneSoup(xml_file.read())

print soup.prettify() 
```

然后，您可以遍历 xml，但是您希望找到所需的内容。

您可以使用`os.walk`then 来查找文件系统中的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T20:37:54.937

我会使用 xml.etree.ElementTree 来解析您的 xml 文件。

```
import xml.etree.ElementTree as ET
import os
import fnmatch
tree = ET.parse('fileName.xml')
root = tree.getroot()

#find all media elements
for media in root.findall('Media'):
    movName = media.find('Title').text
    #find the path to the file
    for root, dirnames, filenames in os.walk('src'):
        for filename in fnmatch.filter(filenames, movName):
            #set the path in the XML file
            media.find('FilePath').text = os.path.join(root, movName)
            #remove the relative path element
            media.remove(RelativePath)
tree.write('fileName.xml) 
```

我还没有测试过，可能有错误。

您应该阅读文档以获取更多信息：

1.  [http://docs.python.org/2/library/xml.etree.elementtree.html](http://docs.python.org/2/library/xml.etree.elementtree.html)
2.  [http://docs.python.org/2/library/os.html](http://docs.python.org/2/library/os.html)

# sql - 如何在 Azure 的 sql 管理门户中更改服务帐户的权限

> ID：13662752
> 
> 赞同：0
> 
> 时间：2012-12-01T19:09:46.320
> 
> 标签：sql, azure, permissions, sql-drop

我想通过 Azure 的 sql 管理门户从我的 sql 表中删除一个条目。当我查询“DROP USER “XXX””时，它显示“不能删除用户‘XXX’，因为它不存在或者您没有权限。” 我在哪里可以更改服务帐户从表中删除条目的权限？ ![该用户确实存在](../Images/f5b314d44cc3c788d84d15d2dbef54c1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:31:27.003

我假设这个问题与您之前的问题有关（[如何从 azure sql 中删除条目？](https://stackoverflow.com/questions/13661688/how-to-delete-an-entry-from-azure-sql)）。`DROP USER`将尝试删除有权访问您的数据库的用户，这与从用户表中删除记录无关。要从 users 表中删除记录，请执行以下查询：

```
DELETE FROM dbo.Users WHERE Username = 'Nazerke' 
```

# python - 如何从 QuerySet 聚合对象

> ID：13662753
> 
> 赞同：0
> 
> 时间：2012-12-01T19:09:47.473
> 
> 标签：python, django, django-models

我有一个 Django 模型用户，它具有单向自引用多对多关系：

```
following = models.ManyToManyField('self', through='Following', symmetrical=False, related_name='following_user') 
```

我有另一个与用户有关系的评论模型：

```
user = models.ForeignKey(User) 
```

我想获得以下用户的所有评论。如何从用户的 QuerySet 中获取所有评论？像这样的东西？：

```
self.following.[somehow get all comments] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:17:48.563

对于这样的查询，你需要扭转它：你想要评论，所以从评论模型开始。

```
Comment.objects.filter(user__following=self) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T19:57:29.340

这是最终为我工作的代码：

```
Comment.objects.filter(user__in=self.get_following()) 
```

# ruby-on-rails-3 - Extjs4 按钮在网格中单击

> ID：13662755
> 
> 赞同：1
> 
> 时间：2012-12-01T19:09:54.960
> 
> 标签：ruby-on-rails-3, extjs4

我在 ext 列中有一个按钮，单击该按钮应通过 ajax 发送一个发布请求。我不知道该怎么做，因为我对 Ext 很陌生。

以下是我的按钮渲染器：

```
statusRenderer: function(value, metaData, record, rowIndex, colIndex, store) {
  var html = '<span style="color:red;">' + value + '</span>';
  html += '&nbsp;<button type="button" data-id=' + record.data.ad_id + '>Reaudit</input>'
  return html;
} 
```

请指点我如何：
1\. 设置点击处理程序
2\. 设置商店以执行 ajax 发布请求
3\. 在成功响应时更新网格行。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T20:49:46.073

这就是我最终这样做的方式：

AuditStatusGrid.js

```
initComponent: function() {
  this.columns = [
    ...
    { header: 'Status', dataIndex: 'audit_status', renderer: me.statusRenderer, width: 130 },
    ...
  ];
}

statusRenderer: function(value, metaData, record, rowIndex, colIndex, store) {
if (value == 'Rejected') {
  var id = Ext.id();
  Ext.defer(function () {
    Ext.widget('button', {
      renderTo: id,
      text: 'Reaudit',
      width: 70,
      handler: function () {
        console.log(record.get('id'));
        record.set('audit_status', 'Reaudit');
        store.save();
      }
    });
  }, 50);
  return Ext.String.format('<div id="{0}"><span style="color:red;">Rejected</span>&nbsp;</div>', id);
}
return value;
} 
```

AuditStatusStore.js

```
...
proxy: {
  root: 'json',
  type: 'rest',
  url : '/audit_statuses'
}, 
```

# javascript - d3.js：将数据从父节点传递到子节点

> ID：13662756
> 
> 赞同：5
> 
> 时间：2012-12-01T19:10:04.930
> 
> 标签：javascript, d3.js

我正在使用 d3 制作堆积条形图。

数据是一个数组，每个条都有一个对象（例如“喜欢”）。然后每个对象包含一个值数组，这些值驱动每个条形的各个矩形：

```
data =  [{
          key = 'likes', values = [
            {key = 'blue-frog', value = 1}, 
            {key = 'goodbye', value = 2}
          ]
        }, {
          key = 'dislikes, values = [
            {key = 'blue-frog', value = 3},
            {key = 'goodbye', value = 4}
          ]
        }] 
```

该图表工作正常，如下所示：

```
// Create canvas
bars = svg.append("g");

// Create individual bars, and append data
// 'likes' are bound to first bar, 'dislikes' to second
bar = bars.selectAll(".bar")
        .data(data)        
        .enter()
        .append("g");

// Create rectangles per bar, and append data
// 'blue-frog' is bound to first rectangle, etc.
rect = bar.selectAll("rect")
        .data(function(d) { return d.values;})
        .enter()
        .append("rect"); 
```

我想为每个矩形创建工具提示，其中包含“喜欢：2”之类的内容，这涉及将有关条键的信息绑定到矩形。我还没有找到一种方法来做到这一点（除了更改数据）。你能看到一个优雅的解决方案吗？

另外，我不确定我是否以最好的方式描述了这个问题。如果您对更好的标题有任何建议，请告诉我。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-04T00:47:16.193

不确定您是否认为这是一个优雅的解决方案，但它可以避免更改您的数据。

它利用了几个关键的“功能”：

*   您可以自由获取对 & 然后使用选择数组的引用（但要使用此数组，您需要知道当前的选择组 - 见最后一点）
*   通过 .parentNode 属性可以获取父节点的 DOM 元素
*   通过__data__属性可以获取到父节点的关联数据
*   数据访问函数*function(d,i){....}*可以以 3 参数形式提供：*function(d,i,j){....}*其中*j*是当前选择组。

因此，在您的示例中，您可以获得选择数组：

```
var selection = bar.selectAll("rect")
  .data(function(d) { return d.values;})
  .enter(); 
```

从选择数组中，您可以获取相关数据：

```
selection
  .append("li")
  .text(function(d,i,j) {
    return selection[j].parentNode.__data__.key; 
  } 
```

在这种情况下，更容易看到完整的示例，而不是代码片段：

[http://bl.ocks.org/4199266](http://bl.ocks.org/4199266)

正如我在要点上提到的那样——我记得阅读过有关数据访问器函数的这种 3 参数形式的信息，但我一生都记不起在哪里——我欢迎指出记录此“功能”的源材料。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-01T21:54:36.047

你看过[Tipsy](http://onehackoranother.com/projects/jquery/tipsy)吗？

它可能会完全满足您的需求，并且会为您完成大部分工作。例如，只需添加以下文本块：

```
$('svg circle').tipsy({ 
  gravity: 'w', 
  html: true, 
  title: function() {
    var d = this.__data__;
var pDate = d.date;
    return 'Date: ' + pDate.getDate() + " " + monthNames[pDate.getMonth()] + " " + pDate.getFullYear() + '<br>Value: ' + d.value; 
  }
}); 
```

为您提供带有 D3 示例的所有适当数据的工具提示：[带有 Tipsy 工具提示的折线图](http://bl.ocks.org/1629644)。

# android - android相对布局问题与充气机布局

> ID：13662759
> 
> 赞同：0
> 
> 时间：2012-12-01T19:10:58.517
> 
> 标签：android, android-layout

我在 android 中有代码，它在列表中获取联系人，其中包含列表的每个项目一个复选框。现在我想在屏幕底部添加一个按钮来执行一些操作。但是当我添加按钮时，它与列表的每个项目一起显示。我只希望它在底部一次。这是我的活动。

```
package com.exercise.me;

import java.util.ArrayList;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Context;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.ListView;

public class ContactList extends ListActivity {
    /** Called when the activity is first created. */

    private ArrayList<contact> contact_list = null;
    private ProgressDialog mProgressDialog = null;
    private contactAdapter mContactAdapter = null;
    private Runnable mViewcontacts = null;
     //final Button btnPost = (Button)this.findViewById(R.id.btnPost);

    private ArrayList<contact> items;
    boolean[] isChecked;
    Cursor mCursor;
    ListView lv;
    CheckBox cb;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.listview);

        contact_list = new ArrayList<contact>();
        lv = getListView();

        mViewcontacts = new Runnable() {
            public void run() {
                getContacts();
            }
        };

        Thread thread = new Thread(null, mViewcontacts, "ContactReadBackground");
        thread.start();
        mProgressDialog = ProgressDialog.show(ContactList.this, "Please Wait...", "Retriving Contacts...", true);

    }

    @SuppressWarnings("unused")
    private void getContacts() {

        try {

            String[] projection = new String[] {
                    ContactsContract.Contacts.DISPLAY_NAME,
                    ContactsContract.Contacts.HAS_PHONE_NUMBER,
                    ContactsContract.Contacts._ID };

            mCursor = managedQuery(ContactsContract.Contacts.CONTENT_URI,
                    projection, ContactsContract.Contacts.HAS_PHONE_NUMBER + "=?", new String[] { "1" },
                    ContactsContract.Contacts.DISPLAY_NAME);

            while (mCursor.moveToNext()) {
                contact contact = new contact();

                String contactId = mCursor.getString(mCursor.getColumnIndex(ContactsContract.Contacts._ID));
                contact.setContactName(mCursor.getString(mCursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME)));
                contact_list.add(contact);
            }
            isChecked = new boolean[mCursor.getCount()];

            for (int i = 0; i < isChecked.length; i++) {
                isChecked[i] = false;
            }

            this.mContactAdapter = new contactAdapter(this, R.layout.listview, contact_list);
            lv.setAdapter(this.mContactAdapter);
            mCursor.close();

            runOnUiThread(returnRes);

        } catch (Exception e) {
            Log.d("getContacts", e.getMessage());
        }
    }

    public class contactAdapter extends ArrayAdapter<contact> {

        public contactAdapter(Context context, int textViewResourceId, ArrayList<contact> items1) {
            super(context, textViewResourceId, items1);
            items = items1;
        }

        @Override
        public View getView(final int position, View convertView, ViewGroup parent) {

            LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = vi.inflate(R.layout.listview, parent, false);
            cb = (CheckBox) convertView.findViewById(R.id.checkBox);

            if (isChecked[position] == true)
                cb.setChecked(true);
            else
                cb.setChecked(false);
            cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {

                public void onCheckedChanged(CompoundButton buttonView, boolean ischecked) {
                    if (buttonView.isChecked())
                        isChecked[position] = true;
                    else
                        isChecked[position] = false;
                }
            });

            contact contacts = items.get(position);
            if (contacts != null) {
                if (cb != null) {
                    cb.setText(contacts.getContactName());
                }
            }

            return convertView;
        }
    }

    private Runnable returnRes = new Runnable() {

        public void run() {
            if (mProgressDialog.isShowing())
                mProgressDialog.dismiss();
            mContactAdapter.notifyDataSetChanged();
        }
    };

} 
```

这是它的xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >

      <CheckBox
        android:id="@+id/checkBox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="14dp"
        android:textSize="25sp" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true" >

    </ListView>

</RelativeLayout> 
```

请告诉我如何在屏幕底部添加单曲。通过单击该单个按钮，我可以使用 HTTP 发布在服务器上发布所有选中的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:20:24.557

要在您的 View`getView(final int position, View convertView, ViewGroup parent)`函数中实现此功能，您必须检查最后一个索引，然后膨胀第二个布局，其中仅包含一个按钮。简单的 ：）

**更新**

这是您当前的 getView() 膨胀代码

```
 LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
 convertView = vi.inflate(R.layout.listview, parent, false); 
```

现在像这样在此代码上放置一个 if 条件，如果当前索引是您为`ListAdabper`

```
 LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
         if(position != AdapterList.size()){

         convertView = vi.inflate(R.layout.listview, parent, false);}
       else{

         convertView = vi.inflate(R.layout.your_button_layout, parent, false);
    } 
```

还要把你所有的当前`getView()`的`if`条件和条件的`button`代码`else`

# c++ - Windows EXE内存映射中的无名区域？

> ID：13662766
> 
> 赞同：1
> 
> 时间：2012-12-01T19:12:08.963
> 
> 标签：c++, c, windows, assembly, linker

我在下面粘贴了由我自己链接的 Windows EXE 的 OllyDbg 生成的内存映射的屏幕截图（即，手动创建了所有 PE/COFF 标头和字段值）。创建的 EXE 没有导入。我有一个关于内存映射的问题：

0x7F6F0000 处的无名地图类型区域是什么？我没有在标题中指定任何此类区域。还有，70000、80000、C0000、D0000的无名区域是什么？

![最小exe的内存映射](../Images/0461f3ffbbc687f62ef0331aff4b0a4d.png)

我想知道这一点的一个原因是确定我是否可以释放这些区域以使我的应用程序可以使用更多连续的内存，并简化我的内存映射。

# xcode - 为什么我不能从 SQLite 显示 Unicode？

> ID：13662767
> 
> 赞同：2
> 
> 时间：2012-12-01T19:12:21.710
> 
> 标签：xcode, sqlite, unicode

我想在我的应用程序中显示来自 SQLite 的文本，但它显示错误。

示例： - 在 SQLite 文件中，文本为：Hồ Chí Minh - 在我的应用程序中，文本为：H·ªì Ch√≠ Minh

我尝试使用此代码，但没有成功：

```
const char *cauhoichar = [[dic valueForKey:@"cauhoi"]         
cStringUsingEncoding:NSUTF8StringEncoding];
cauhoiText.text = [NSString stringWithUTF8String:cauhoichar]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T02:35:27.817

SQLite 数据库的本机代码集确实是 UTF-8（有时是 UTF16[{be|le}] - 使用 SQLiteManager 您可以看到应用了哪个）。根据您的应用程序的 CodePage（操作系统？语言？），您会看到不同的解释。

# css - 列表项后的空格

> ID：13662778
> 
> 赞同：0
> 
> 时间：2012-12-01T19:13:14.733
> 
> 标签：css

我正在尝试规范项目符号结束和文本开始跨浏览器之间的差距。目前子弹后有一个巨大的差距。请注意，我看的不是列表项之间的差距，而是列表项项目符号和文本之间的差距。

1.  <--- 这里的差距
2.  项目清单
3.  项目清单

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:16:01.970

[text-indent](https://css-tricks.com/almanac/properties/t/text-indent/) CSS 属性用于指定在元素文本内容的第一行开始之前应该移动多少水平空间文本。

```
li {
  text-indent: 5px;
}
```

```
<ol>
  <li>Apple</li>
  <li>Banana</li>
  <li>Cherry</li>
</ol>
```

# javascript - how to close autocomplete dropdown if jqgrid edit form is closed

> ID：13662781
> 
> 赞同：0
> 
> 时间：2012-12-01T19:13:26.150
> 
> 标签：javascript, jquery, jquery-ui, jqgrid, jquery-ui-autocomplete

jqgrid edit for in form editing mode contains jquery-ui autocomplete. If its autocomplete dropdown is opened and edit form is closed by pressing cross in upper right corner, autocomplete dropdown remains open. how to force it to be closed if edit form is closed by close button ?

Edit form is defined using

```
$grid.jqGrid("navGrid", "#grid_toppager", { 
            search:  true,
            del: true,
            add: true,
            view: true,
            refresh: true, 
            edit: true
          }, 

{ 
     url: '/erp/Grid/Edit?_entity=Klient',
            closeAfterEdit: true,
   } ); 
```

autocomplete is created using

```
input.autocomplete({
    source: '/Grid/GetLookupList',
    position: { collision: 'flip flip' },
}   ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:21:32.090

You can close the autocompletes on closing the dialog in jqgrid, as

```
$grid.jqGrid("navGrid", "#grid_toppager", { 
        search:  true,
        del: true,
        add: true,
        view: true,
        refresh: true, 
        edit: true
      }, 
      { 
        url: '/erp/Grid/Edit?_entity=Klient',
        closeAfterEdit: true,
        onClose: function(){ input.autocomplete("close"); }
      }); 
```

Hope this helps.

# android - 多个 GridView

> ID：13662782
> 
> 赞同：1
> 
> 时间：2012-12-01T19:13:28.450
> 
> 标签：android, gridview

我想在一个布局中使用几个 GridView。我不知道如何设置适配器，或者是否有任何其他简单的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:37:44.873

在您的 xml 布局中，添加任意数量的 gridView。在您的活动中，获取每个 gridview wrt id 的引用，并为每个 gridview 制作单独的适配器。或者将不同的参数传递给每个 gridView 的同一个适配器。

```
GridView grid1 = (GridView)findViewById(R.id.grid1);
GridView grid2 = (GridView)findViewById(R.id.grid2);

grid1.setAdapter(new ImageAdapter(this, arrayOfImagesSet1));
grid2.setAdapter(new ImageAdapter(this, arrayOfImagesSet2)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T15:29:20.703

如果您正在寻找一种简单的方法，您可以使用向导为每个 grideview 创建一个 DataSource。更改为设计模式并开始生成您的数据源。

# android - 减号加号在 android 应用程序的软键盘上

> ID：13662783
> 
> 赞同：0
> 
> 时间：2012-12-01T19:13:37.807
> 
> 标签：android, unicode, keyboard, custom-controls

我从头开始创建了一个自定义键盘，它工作正常，但我有 2 个键的 2 个问题。

C - 清除键，当用户按下时清除文本 +/- - 在数字前添加/删除减号。

所有的键都适用于 android 代码，当我查看 SDK 示例时，它们使用的是 Unicode（而不是 Android 代码）。它在示例中工作正常，但在我的应用程序中它没有做任何事情。

```
<?xml version="1.0" encoding="utf-8"?>
<Keyboard 
 xmlns:android="http://schemas.android.com/apk/res/android"
android:keyWidth="25%p" 
android:horizontalGap="0px"
android:verticalGap="0px" 
android:keyHeight="40dip"
>

<Row>
    <Key android:codes="14" android:keyLabel="7" android:keyEdgeFlags="left"/>
    <Key android:codes="15" android:keyLabel="8"/>
    <Key android:codes="16" android:keyLabel="9"/>
    <Key android:codes="67"  android:keyIcon="@drawable/keyboard_delete"
        android:iconPreview="@drawable/keyboard_delete"
        android:keyEdgeFlags="right"/>

</Row>

<Row>
    <Key android:codes="11" android:keyLabel="4" android:keyEdgeFlags="left"/>
    <Key android:codes="12" android:keyLabel="5"/>
    <Key android:codes="13" android:keyLabel="6"/>
    <Key android:codes="" android:keyLabel="C" android:keyEdgeFlags="right"/>
</Row>

<Row>
    <Key android:codes="8" android:keyLabel="1" android:keyEdgeFlags="left"/>
    <Key android:codes="9" android:keyLabel="2"/>
    <Key android:codes="10" android:keyLabel="3"/>
    <Key android:codes="69" android:keyLabel="±" android:keyEdgeFlags="right"/>
</Row>
<Row>
    <Key android:codes="7" android:keyLabel="0" android:keyWidth="50%p"/>
    <Key android:codes="56" android:keyLabel="."/>
</Row>
</Keyboard> 
```

谢谢尼罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T23:59:57.617

嗯......我还没有找到内置键盘的解决方案。我认为没有支持 +/- 或清除的代码。我已经通过 Listener 解决了

```
 public void onKey(int primaryCode, int[] arg1) {
// TODO Auto-generated method stub
long eventTime = System.currentTimeMillis();
KeyEvent event = new KeyEvent(eventTime, eventTime,
    KeyEvent.ACTION_DOWN, primaryCode, 0, 0, 0, 0,
    KeyEvent.FLAG_SOFT_KEYBOARD | KeyEvent.FLAG_KEEP_TOUCH_MODE);

 if(primaryCode==177)
 {
 pressedC_Button();
 }
else
 if(primaryCode==241)
{
  pressedNegative_button();
}

dispatchKeyEvent(event);

} 
```

谢谢

# .htaccess - htaccess 搜索文件

> ID：13662784
> 
> 赞同：0
> 
> 时间：2012-12-01T19:13:38.510
> 
> 标签：.htaccess

我在使用 .htaccess 时遇到了问题，而且我在 ubuntu 上，问题是，当我写这样的 uri 时，

```
127.0.0.1/u 
```

.htaccess 搜索文件，当它找到以该字母开头的文件时，uri 直接更改为此，

```
http://127.0.0.1:8000/u/?tab_id=u 
```

但是，应该是这样的，

```
http://127.0.0.1/u 
```

发生这种情况是因为有些文件以 u 开头，例如 user-edit.php 和 user-login.php ....

当我写

```
http:://127.0.0.1/a 
```

或任何不匹配任何文件的 uri，它运行完美，这是我的 .htaccess 代码

```
RewriteEngine On
RewriteRule ^([//a-zçöşığüA-ZÇÖŞİĞÜ0-9_-]+)$ tab.php?tab_id=$1 [QSA,L]
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript
<files *.html>
SetOutputFilter DEFLATE
</files> 
```

找了很多，还是没找到解决办法，谢谢大家帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:54:48.837

听起来像是多视图问题。通过使用禁用它

```
Options -MultiViews 
```

# python - 将 UTC 时间转换为 python 日期时间

> ID：13662789
> 
> 赞同：2
> 
> 时间：2012-12-01T19:14:12.393
> 
> 标签：python, datetime, utc, rfc3339

我有许多采用以下格式的 UTC 时间戳： `2012-04-30T23:08:56+00:00` 我想将它们转换为 python 日期时间对象，但遇到了麻烦。

我的代码：

```
for time in data:
    pythondata[i]=datetime.strptime(time,"%y-%m-%dT%H:%M:%S+00:00") 
```

我收到以下错误：

```
ValueError: time data '2012-03-01T00:05:55+00:00' does not match format '%y-%m-%dT%H:%M:%S+00:00' 
```

看起来我的格式正确，为什么这不起作用？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-01T19:16:42.033

将时间格式字符串中的年份标记更改为`%Y`：

```
time = '2012-03-01T00:05:55+00:00'
datetime.strptime(time, "%Y-%m-%dT%H:%M:%S+00:00")
# => datetime.datetime(2012, 3, 1, 0, 5, 55) 
```

看[`strftime()`和`strptime()`行为](http://docs.python.org/2/library/datetime.html#strftime-strptime-behavior)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T03:06:30.383

我强烈推荐[python-dateutil 库](https://pypi.python.org/pypi/python-dateutil)，它允许将多种日期时间格式从原始字符串转换为带/不带时区设置的日期时间对象

```
>>> from dateutil.parser import parse
>>> parse('2012-04-30T23:08:56+00:00')

datetime.datetime(2012, 4, 30, 23, 8, 56, tzinfo=tzutc()) 
```

# html - 是否可以按元素的中心定位元素？

> ID：13662792
> 
> 赞同：0
> 
> 时间：2012-12-01T19:14:34.183
> 
> 标签：html, css, layout, positioning, placement

使用`position: absolute`，您可以通过定义元素的一个角来放置元素（通常使用 top 和 left 属性）。是否可以通过定义它的中心来放置它？（不知道它的宽度/高度？）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T12:47:39.370

[我已经用这个jsFiddle 链接](http://jsfiddle.net/K8S3L/)回答了一个类似的问题

用我的回答链接到类似的问题：[Position the center of an image using css](https://stackoverflow.com/questions/14022407/position-the-center-of-an-image-using-css/14318009#14318009)

然后，您可以使用像素使用上/左坐标，无论宽度/高度如何，它都将使用对象的中心，这可能是动态适合内容的。一个问题可能是您需要设置一些 z-indexes 和样式，以便其他包装器 div 不会打扰您的其余内容，这可能是使用这种方法的一个缺点。

解决方案在于使用具有实际位置的包装器 div，并在其中使用另一个包含样式的包装器 div: `position: relative;padding-top: 25%;margin-top: -100%;margin-left: -100%;`。margin-left 样式将很容易应用，但 margin-top 需要填充，因此需要额外的包装 div。

如果你想要另一种方法，我想你将不得不使用 Javascript。

# ldap - 无法在 Apache DS Studio 中使用用户定义的对象类

> ID：13662798
> 
> 赞同：0
> 
> 时间：2012-12-01T19:15:10.387
> 
> 标签：ldap, apacheds

我定义了一个对象类并想在我的`organizationalUnit`. 但是当我附上屏幕截图时，我在条目列表中看不到我的对象类（**aibu-staff**）。

![在此处输入图像描述](../Images/47278a1ee0d4825056f1cc1b12765e38.png)

**当我尝试将 LDIF 文件导入 DIT 时，出现如下错误：**

```
Error while importing LDIF
 - [LDAP: error code 53 - UNWILLING_TO_PERFORM: failed for     Add Request 
  javax.naming.OperationNotSupportedException: [LDAP: error code 53 - UNWILLING_TO_PERFORM: failed for     Add Request :
ClientEntry
    dn: cn=aibu, ou=schema
    objectclass: metaSchema
    objectclass: top
    cn: aibu
    m-dependencies: system
    m-dependencies: cosine
    m-dependencies: nis
    m-dependencies: inetorgperson
    m-dependencies: core
: Unwilling to perform operation on enabled schema with disabled or missing dependencies: nis]; remaining name 'cn=aibu, ou=schema'
    at com.sun.jndi.ldap.LdapCtx.mapErrorCode(LdapCtx.java:3160)
    at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:3033)
    at com.sun.jndi.ldap.LdapCtx.processReturnCode(LdapCtx.java:2840)
    at com.sun.jndi.ldap.LdapCtx.c_createSubcontext(LdapCtx.java:811)
    at com.sun.jndi.toolkit.ctx.ComponentDirContext.p_createSubcontext(ComponentDirContext.java:337)
    at com.sun.jndi.toolkit.ctx.PartialCompositeDirContext.createSubcontext(PartialCompositeDirContext.java:266)
    at org.apache.directory.studio.connection.core.io.jndi.JNDIConnectionWrapper$4.run(JNDIConnectionWrapper.java:658)
    at org.apache.directory.studio.connection.core.io.jndi.JNDIConnectionWrapper.runAndMonitor(JNDIConnectionWrapper.java:1272)
    at org.apache.directory.studio.connection.core.io.jndi.JNDIConnectionWrapper.checkConnectionAndRunAndMonitor(JNDIConnectionWrapper.java:1203)
    at org.apache.directory.studio.connection.core.io.jndi.JNDIConnectionWrapper.createEntry(JNDIConnectionWrapper.java:704)
    at org.apache.directory.studio.ldapbrowser.core.jobs.ImportLdifJob.importLdifRecord(ImportLdifJob.java:457)
    at org.apache.directory.studio.ldapbrowser.core.jobs.ImportLdifJob.importLdif(ImportLdifJob.java:267)
    at org.apache.directory.studio.ldapbrowser.core.jobs.ImportLdifJob.executeNotificationJob(ImportLdifJob.java:204)
    at org.apache.directory.studio.ldapbrowser.core.jobs.AbstractNotificationJob.executeAsyncJob(AbstractNotificationJob.java:43)
    at org.apache.directory.studio.ldapbrowser.core.jobs.AbstractEclipseJob.run(AbstractEclipseJob.java:101)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:55)

  [LDAP: error code 53 - UNWILLING_TO_PERFORM: failed for     Add Request :
ClientEntry
    dn: cn=aibu, ou=schema
    objectclass: metaSchema
    objectclass: top
    cn: aibu
    m-dependencies: system
    m-dependencies: cosine
    m-dependencies: nis
    m-dependencies: inetorgperson
    m-dependencies: core
: Unwilling to perform operation on enabled schema with disabled or missing dependencies: nis] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:16:11.010

Windows has a [poss-Superiors attribute](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679133%28v=vs.85%29.aspx) that defines what kind of objects that can be the parent of an object. You might need to add organizational unit.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T22:22:55.160

您需要刷新模式对象才能看到用户定义的对象。我总是能够毫无问题地做到这一点。（也以编程方式使用 JNDI）。

# php - php。梨。Crypt_RSA 错误

> ID：13662800
> 
> 赞同：0
> 
> 时间：2012-12-01T19:15:15.470
> 
> 标签：php, pear

我需要为我的数据创建密钥和 rsa 签名。例如在[http://phpseclib.sourceforge.net/rsa/examples.html](http://phpseclib.sourceforge.net/rsa/examples.html)上做最后会看到一个错误：

> 已弃用：在第 228 行的 Z:\home\localhost\www\Crypt\RSA.php 中不建议通过引用分配 new 的返回值

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T21:16:14.397

这更像是一个警告，而不是一个错误。该代码仍然有效。尝试更改您的 error_reporting 级别以不包含`E_DEPRECATED`错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-04T06:19:18.377

谢谢大家）我不得不删除 RSA 签名数据。拒绝 Crypt_RSA 为此选择[http://php.net/manual/en/function.openssl-sign.php](http://php.net/manual/en/function.openssl-sign.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T16:56:56.820

你的 228 线是什么？PEAR 的 Crypt_RSA 的第 228 行是这样的：

[https://github.com/pear/Crypt_RSA/blob/master/Crypt/RSA.php#L228](https://github.com/pear/Crypt_RSA/blob/master/Crypt/RSA.php#L228)

这确实被弃用了。

phpseclib 的 Crypt_RSA 的第 228 行已经是很多版本的注释或定义：

*   [https://github.com/phpseclib/phpseclib/blob/0.3.1/phpseclib/Crypt/RSA.php#L228](https://github.com/phpseclib/phpseclib/blob/0.3.1/phpseclib/Crypt/RSA.php#L228)
*   [https://github.com/phpseclib/phpseclib/blob/0.3.0/phpseclib/Crypt/RSA.php#L228](https://github.com/phpseclib/phpseclib/blob/0.3.0/phpseclib/Crypt/RSA.php#L228)
*   [https://github.com/phpseclib/phpseclib/blob/0.2.2/phpseclib/Crypt/RSA.php#L228](https://github.com/phpseclib/phpseclib/blob/0.2.2/phpseclib/Crypt/RSA.php#L228)
*   [https://github.com/phpseclib/phpseclib/blob/0.2.1/phpseclib/Crypt/RSA.php#L228](https://github.com/phpseclib/phpseclib/blob/0.2.1/phpseclib/Crypt/RSA.php#L228)

我的猜测：您正在使用 PEAR 的 Crypt_RSA，并且将它与 phpseclib 的 Crypt_RSA 混淆了。它们***不是***一回事。PEAR 的***整个***Crypt_RSA（不仅仅是其中的几行，而是整个包）在 pear.net 中被弃用：

[http://pear.php.net/package/Crypt_RSA](http://pear.php.net/package/Crypt_RSA)

# mysql - Mysql SELECT COUNT(COL) 有条件

> ID：13662801
> 
> 赞同：4
> 
> 时间：2012-12-01T19:15:38.200
> 
> 标签：mysql, sql

我有一张表，上面有一些数据，比如

```
id      group_id    f1    f2    f3
1          1        a     b   
2          1        c   
3          2        a           c 
```

对于满足某些文本条件的每个字段，如何使用 group_id 检索一行和行数？

像那样：

```
MY_MAGIC_SELECT(`f1`='a',`f3`='c'); 
```

必须返回

```
group_id    f1    f2    f3
   1        1     0     0        
   2        1     0     1 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-01T19:18:57.020

使用一系列`SUM(CASE...)`聚合函数来表示您的每个条件都应该这样做。如果`CASE`条件匹配，则返回 0 或 1，然后`SUM()`将结果相加。`GROUP BY`应用于`group_id`. _

```
SELECT
  group_id
  SUM(CASE WHEN f1 = 'a' THEN 1 ELSE 0 END) AS f1,
  SUM(CASE WHEN f2 = 'b' THEN 1 ELSE 0 END) AS f2,
  /* f3 = 'b' isn't in your "magic select" but here it is anyway... */
  SUM(CASE WHEN f3 = 'c' THEN 1 ELSE 0 END) AS f3
FROM 
  yourtable
GROUP BY group_id 
```

特别是对于 MySQL，您不需要 ，`CASE`因为布尔表达式`f1 = 'a'`本身将返回 1 或 0。因此您可以将其简化为下面的示例。但是，这不能移植到任何 RDBMS。

```
SELECT
  group_id
  SUM(f1 = 'a') AS f1,
  SUM(f2 = 'b') AS f2,
  SUM(f3 = 'c') AS f3
FROM 
  yourtable
GROUP BY group_id 
```

### [这是 SQLfiddle.com 上的快速演示](http://sqlfiddle.com/#!2/60195/2)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-01T19:18:40.037

嗯，这是简单的 MySQL，你需要学习这个。请查看： [http ://www.w3schools.com/sql/sql_where.asp](http://www.w3schools.com/sql/sql_where.asp)

[http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html](http://dev.mysql.com/doc/refman/5.0/en/control-flow-functions.html)

```
SELECT column_name(s)
 FROM table_name
 WHERE column_name operator value 
```

例如

```
SELECT * FROM Persons
 WHERE City='Sandnes' 
```

# android - Android - 访问 MainActivity 实例

> ID：13662804
> 
> 赞同：1
> 
> 时间：2012-12-01T19:16:05.187
> 
> 标签：android, instance, main-activity

我的 MainActivity.java 中有一个公共方法，想从另一个 Activity 调用它。因此我需要 MainAcitivity 实例。我如何从另一个 Acitivity 访问它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:26:13.143

[您可以通过广播接收器](http://www.vogella.com/articles/AndroidBroadcastReceiver/article.html)获得有关活动之间消息传递的帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T19:32:34.690

正如评论中已经提到的“这不是通常需要的东西”，但如果你想要这个，你可以在 MainActivity.java 中将该方法设为静态。

```
public static void someMethod()
{
} 
```

然后在另一个活动中，这样调用：

```
MainActivity.someMethod(); 
```

# mysql - 从 txt 加载数据，重复年份，只有几天和几个月

> ID：13662805
> 
> 赞同：0
> 
> 时间：2012-12-01T19:16:15.843
> 
> 标签：mysql

我有一个巨大的文本文件需要上传到 mysql 表中

数据集跨越多年，但实际数据只有月份和日期信息。然而，数据集是从最近一年开始排序的。同一日期也可能有多个数据点。

如何告诉 mysql 将其上传到表并添加正确的年份？

这是我正在处理的数据类型的示例，其中最后几位是月：日

```
Some interesting string here             11:04
Some other interesting text              10:04
........................                 10:04

........................
Some old interesting text from last year 12:02
some boring news from last year          02:01
some news from 2 years ago               12:02 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T21:48:22.657

假设您的文件从 2010 年开始，并且后面的日期意味着下一年：

```
SET @last_mnth := 0, @year := 2010;

LOAD DATA INFILE '/path/to/file.txt' INTO TABLE myTable
FIELDS SEPARATED BY '\t\t' (description, @d) SET
  date = CONCAT(
    LEFT(CONCAT(
      @mnth := SUBSTRING_INDEX(@d, ':',  1),
      @date := SUBSTRING_INDEX(@d, ':', -1),
      @year := @year + (
                 @mnth < @last_mnth
                 OR (@mnth = @last_mnth AND @date < @date)
               ),
      @last_mnth := @mnth
    ), 0),
    CONCAT_WS('-', @year, @mnth, @date)
  )
; 
```

在这里，我们将您的“时间戳”分配给用户变量`@d`，然后将`date`列设置为由空字符串（`LEFT(..., 0)`为了将值分配给其他临时用户变量）和我们构造的日期文字的串联形成的字符串。

# ios - 在 iOS 上手动放大 MapKit

> ID：13662808
> 
> 赞同：1
> 
> 时间：2012-12-01T19:16:40.043
> 
> 标签：ios, mapkit, zooming

在我使用 MapKit 的 iOS 应用程序中，我只想使用捏合（而不是双击）进行缩放。我设置 zoomEnabled=NO，添加捏合手势识别器并尝试手动设置对应于当前捏合大小的地图区域。问题是地图只显示一些缩放级别，所以我无法获得正确的缩放效果。我会很感激任何想法。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:04:04.030

我会走另一条路。与其禁用缩放然后重写它，不如添加一个双击手势识别器并让它什么都不做。但是话又说回来，你为什么要从用户那里拿走这个功能呢？如果某人没有手动操作的灵巧性，但他们可以双击，那么您将为他们破坏地图。

# opengl - 在opengl中旋转到给定方向

> ID：13662812
> 
> 赞同：3
> 
> 时间：2012-12-01T19:16:48.277
> 
> 标签：opengl, rotation

我开始混淆数学。

我想做一个旋转，将 y 轴的方向转换为给定的方向。

所以我想做一个有输入方向的函数，并调用glRotatef()。在函数之后，我绘制的任何东西都应该指向给定的方向而不是向上。

glRotatef 有 4 个参数：角度、x、y、z

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:31:58.827

基本上，您希望将世界`y`轴与（单位长度）方向对齐`d`。为了用 glRotatef 组成一个旋转矩阵，你需要一个 axis`a = [a_x, a_y, a_z]`和一个 angle `omega`。

`y`取入的旋转轴`d`垂直于`y`和`d`，因此可以通过向量叉积计算：

```
a = cross(y, d); 
```

旋转角度`omega`只是向量`y`和之间的角度`d`，因此可以从点积计算：

```
omega = acos(dot(y, d)); 
```

现在您可以使用以下方法构建旋转矩阵：

```
glRotatef(omega, a_x, a_y, a_z); 
```

请注意，`omega`需要以度为单位，而不是弧度。还要检查旋转方向。

# php - 如何使用 php 链接到 url 中有变量的页面？

> ID：13662816
> 
> 赞同：2
> 
> 时间：2012-12-01T19:16:59.977
> 
> 标签：php, get, next

所以假设当前的网址是......

```
.../friends.php?episode=1&season=1 
```

我怎么能有一个默认的“*下一个*”按钮去下一集。

我知道如何检索变量

`$_GET[episode]`并将`$_GET[season]`其保存到变量中。

然后我可以在其中添加一个限制...（并减去）

但我不知道如何使它成为一个链接，我可以按它来转到下一个或上一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T19:24:26.747

您可以使用以下`http_build_query`功能：

```
$season = $_GET["season"];
$episode = $_GET["episode"];
$query = http_build_query(array("season" => $season, "episode" => $episode+1)); 
```

编辑：我已经切换了剧集和季节增量，现在它增加了剧集。

然后将其与链接连接：

```
echo "<a href='/page.php?$query'>Next Episode</a>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:20:36.537

**工作代码**

```
<?php
$season = $_GET['season'];
$episode = $_GET['episode'];

echo '<a href="friends.php?episode='.($episode - 1).'&season='.$season.'"> Back Episode  </a>-----';
echo '<a href="friends.php?episode='.($episode + 1).'&season='.$season.'">  Forward Episode  </a><br>';

echo '<a href="friends.php?episode='.$episode.'&season='.($season-1).'"> Back Season</a>-------';
echo '<a href="friends.php?episode='.$episode.'&season='.($season+1).'">Forward Season</a>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T19:19:56.087

只需构建您想要的链接，然后将其放入`a`HTML 元素中：

```
$link = "./friends.php?episode=" . $_GET['episode'] . "&season=" . $_GET['season'];
echo "<a href='$link'>Next episode</a>"; 
```

# tree - 绘制树和图表的最佳技术是什么？

> ID：13662819
> 
> 赞同：12
> 
> 时间：2012-12-01T19:17:27.610
> 
> 标签：tree, draw, tikz

为 CS 理论作业绘制图形和树的最简单、最清晰的方法是什么？

我对以下任何解决方案都不满意：

*   基于文本：丑陋
*   tikz 乳胶包：对于较大的树木来说很麻烦
*   Adobe Illustrator：耗时

有没有人专门为此任务编写软件？

谢谢！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-01T19:31:53.893

1.) [http://www.graphviz.org/](http://www.graphviz.org/)是绘制有向图和无向图的最简单方法。您只需以正确的语法提供节点、边和标签的列表，GraphViz 就会输出一个图像。有各种前端程序可以提供更好的界面来生成 GraphViz 代码。

2.）[http://www.sagemath.org/](http://www.sagemath.org/)（它是开源的，可以绘制加权有向图）

3.) [http://sourceforge.net/projects/treeform/](http://sourceforge.net/projects/treeform/)

4.) [http://www.mi.sanu.ac.rs/newgraph/](http://www.mi.sanu.ac.rs/newgraph/)

5.) [http://www.conceptdraw.com/products/drawing-tool/](http://www.conceptdraw.com/products/drawing-tool/)

6.) [http://rw4.cs.uni-sb.de/~sander/html/gstools.html](http://rw4.cs.uni-sb.de/~sander/html/gstools.html)（图绘工具详解合集）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T19:25:21.587

您可能会发现[Dia](https://live.gnome.org/Dia)是一款适用于各种 CS 图表、图形和树的有用工具。

# c++ - 将“void”作为函数参数传递

> ID：13662821
> 
> 赞同：6
> 
> 时间：2012-12-01T19:17:48.430
> 
> 标签：c++, function, templates, parameters, void

我有一个函数应该接受任何类型的参数。因此我使用模板。

```
template <typename T>
void Function(T Parameter); 
```

该函数调用一个函数。在我的实际应用程序中，有一个带有字符串键的回调映射，但这对于这个问题并不重要。回调必须是返回类型为*void*的函数指针，但可以是任何参数类型。

```
void* Callback;

template <typename T>
void Function(T Parameter)
{
    (function<void(T))Callback(Parameter);
} 
```

假设回调是正确的类型，这应该如下所示。

```
Function<int>(42);

// should result in...
(function<void(int))Callback(42); 
```

但在某些情况下，我想`void`作为参数传递。

```
Function<void>(void);

// should result in...
(function<void(void)>Callback(void); 
```

如您所见，我不需要提供任何内容或`void`作为参数。但我不能`void`作为论据。存在类型名称不正确的错误。

如何`void`作为函数参数传递？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-01T19:27:19.117

只需指定一个非模板重载：

```
void* Callback;

template <typename T>
void Function(T Parameter)
{
    (function<void(T)>)Callback(Parameter);
}

void Function()
{
    (function<void()>)Callback();
} 
```

# java - 访问消息资源

> ID：13662823
> 
> 赞同：-2
> 
> 时间：2012-12-01T19:18:09.380
> 
> 标签：java, localization, resources, resourcebundle

有什么类似的

```
Resources.getMessage(request,"key"); 
```

（它在`org.apache.struts.validator`包装中）？

我需要根据使用的语言获取正确的字符串并将该字符串放入数组中。这些字符串具有可变部分。例如：

```
The field %s is required 
```

我想从 MessageResources中获取`The field`and`is required`

**编辑**

我用过

```
ResourceBundle myResources = ResourceBundle.getBundle("MessageResources");
String msg = MessageFormat.format(myResources.getString("errors.required"),
                                new Object[] { title }); 
```

它可以工作，但只能使用默认语言

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T21:13:53.833

您可以在惯用的 Java 中为此使用资源包。捆绑包是属性文件，它们根据其语言环境命名。

这是 Java API 文档中 ResourceBundle 的链接。

[http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html](http://docs.oracle.com/javase/7/docs/api/java/util/ResourceBundle.html)

如果您需要更多信息，请告诉我。

# node.js - fs.exists 不接受变量

> ID：13662826
> 
> 赞同：0
> 
> 时间：2012-12-01T19:18:18.040
> 
> 标签：node.js, express, fs

我正在使用发布请求来搜索二进制文件，但无法使以下代码正常工作。fs.exists() 不会接受变量 b_path 但如果给定硬编码字符串，它将正常工作。b_path 按预期打印到控制台，正确构建二进制文件的路径。

```
app.post('*', function(req, res) {

  // generate the name of the binary
  var request = require('url').parse(req.url, true);
  var len = request.pathname.toString().length;

  var binary = request.pathname.slice(1,len);
  binary = binary.concat(' ');

  var b_path = app.get('binaries_path')+binary;

  fs.exists(b_path, function (exists) {
    if(exists) {
      console.log('exists');
    }
  }
} 
```

为什么会出现这种情况？

# php - 当我输入另一个表单时，如何销毁 Params GET 或 POST？

> ID：13662828
> 
> 赞同：1
> 
> 时间：2012-12-01T19:18:21.317
> 
> 标签：php

```
<form id="form3" name="form3" method="get" action="">
<tr>
<td align="left" ><input name="page" type="text" id="page" size="5" value="<?php echo $pageNumView; ?>"/></td> 
</tr>
</form>
<form id="form4" name="form4" method="post" action="">
<tr>
<td width="84%"><input name="iddetails" type="text" id="iddetails" size="20" value="<?php echo $rows['product_id']; ?>"/> </td> 
</tr>
</form> 
```

我有两种形式。`$_GET['page']`每当我在 form4 中输入“iddetails”时，我都想在 Form3 中删除。我尝试使用`unset($_GET['page']);`我可以看到它使用调试器跟踪并删除了参数“页面”。但是当我再次尝试使用 Form4 Input 时，`$_GET['page']`它仍然存在并且没有被完全删除。那么如果我在 'iddetails' form4 中输入，如何删除 form3 中的 Params 'Page'？

我已阅读有关此 POST-REDIRECT-GET 解决方案的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:32:14.430

您需要设置操作，以便不设置 $_GET 值：

```
 <form id="form3" name="form3" method="get" action="">
<tr>
<td align="left" ><input name="page" type="text" id="page" size="5" value="<?php echo $pageNumView; ?>"/></td> 
</tr>
</form>
<form id="form4" name="form4" method="post" action="yourform.php">
<tr>
<td width="84%"><input name="iddetails" type="text" id="iddetails" size="20" value="<?php echo $rows['product_id']; ?>"/> </td> 
</tr>
</form> 
```

或者这样做：

```
if( isset( $_POST['iddetails']) && isset( $_GET['page'])){
   $_GET['page'] = 0; //Set it to whatever you like.
} 
```

我的问题是：为什么设置了 $_GET['page'] 会出现问题？设置 $_POST['iddetails'] 时，您可以在代码中简单地忽略它吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T19:33:53.130

如果两个表单都在同一个网页上，则每次刷新 form4 的页面时，form3 的 $_GET 也会被设置，因为元素“page”的值来自服务器端变量 $pageNumView。

此外，您不需要仅仅为了摆脱 GET 就拥有 POST。此外，如果您不需要 $_GET 中的密钥，只需在使用后取消设置即可。

# java - 重新排列 int 数组，在 Java 中以总和最大值排序

> ID：13662829
> 
> 赞同：1
> 
> 时间：2012-12-01T19:18:21.720
> 
> 标签：java, arrays, integer

我知道大多数人不喜欢为人们编写方法，但我希望有人可以帮助我将我的算法转换为 Java 代码。我希望我的算法很好并且确实有效。

1.  将给定的整数数组按升序排序。将组限制设置为 15（这意味着组的总和不大于 15）。
2.  取出排序数组的第一个元素并插入到组（新数组/列表）中，例如。A组。
3.  取出排序数组的第二个元素并插入，除非它超出组限制。如果超过，则创建一个新的 B 组并插入其中。
4.  取第三个元素并尝试插入下一个可用组。
5.  重复直到所有`int`s 都被检查和分组。

输入：

```
egArray = [1,3,4,6,6,9,12,14] 
```

输出：

> A组：[1,3,4,6]，B组：[6,9]，C组：[12]，D组：[14]

我曾尝试这样做，但失败了，甚至不值得我发布我的代码。:-(

这是我为自学编写的示例数据和算法，因此请尽量减少批评。我真的从人们在过去几个月里写的很多 Stackoverflow 帖子中学到了东西，不幸的是我找不到像这个例子这样的帖子。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:06:28.713

试试这个：

```
public static void main(String[] arguments) {
    int limit = 15;
    int[] egArray = new int[] { 14, 1, 3, 4, 6, 6, 9, 12 };

    ArrayList<ArrayList<Integer>> a = grouping(limit, egArray);
    System.out.println(a);
}

public static ArrayList<ArrayList<Integer>> grouping(int limit, int[] array) {
    // Sort the input array.
    Arrays.sort(array);
    // Copy the int[] to an ArrayList<Integer>
    ArrayList<Integer> input = new ArrayList<>();
    for (int i = 0; i < array.length; i++) {
        input.add(array[i]);
    }

    // Initialize the groups
    ArrayList<ArrayList<Integer>> groups = new ArrayList<>();
    groups.add(new ArrayList<Integer>());
    // Initialize the sums of the groups, to increase performance (I guess).
    ArrayList<Integer> sums = new ArrayList<>();
    sums.add(0);

    // Iterate through the input array until there is no number
    // left in it (that means we just added all the numbers
    // into our groups array).
    while (!input.isEmpty()) {
        int n = input.get(0); // Store the number to 'n', to shortcut.
        if (n > limit) {
            String msg = "number is greater than the limit; cannot add number";
            throw new IllegalArgumentException(msg);
            // Or whatever to do if the number is larger than the limit.
        }
        boolean match = false;
        // Search the next groups and check if our current
        // number ('n') fits.
        for (int i = 0; i < sums.size(); i++) {
            if (sums.get(i) + n <= limit) {
                // If it fits, then add the number to the group.
                sums.set(i, sums.get(i) + n);
                groups.get(i).add(n);
                match = true;
                break;
            }
        }
        // If 'n' doesn't fit in any group, create a new one.
        if (!match) {
            ArrayList<Integer> e = new ArrayList<>();
            e.add(n);
            groups.add(e);
            sums.add(n);
        }
        // Remove our number.
        input.remove(0);
    }
    return groups;
} 
```

请注意，该方法返回 an`ArrayList<ArrayList<Integer>>`而不是 an `int[][]`，但效果是相同的。为了检查组的值，只需运行`main(String)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T20:08:50.177

这个方法怎么样？

```
public static ArrayList group(ArrayList<Integer> arr, Integer groupLimit) {
    ArrayList<ArrayList> result = new ArrayList<ArrayList>();
    ArrayList<Integer> temp = new ArrayList<Integer>();
    for (Integer x : arr) {
        if (sumElements(temp) + x < groupLimit) { 
            temp.add(x);
        } else {
            result.add(temp);
            temp = new ArrayList<Integer>();
            temp.add(x);
        }
    }
    if (temp.size() > 0) {
        result.add(temp);
    }
    return result;
}

public static int sumElements(ArrayList<Integer> arr) {
    Integer result = 0;
    for(Integer x:arr) result += x;
    return result;
} 
```

# facebook - cakephp facebook api, FB->api('/me') 返回空值

> ID：13662832
> 
> 赞同：2
> 
> 时间：2012-12-01T19:18:46.673
> 
> 标签：facebook, cakephp, cakephp-1.3, cakephp-2.0

我为 cakephp 1.3 网站使用[Webtechnick Facebook 插件](http://www.webtechnick.com/wtn/blogs/view/229/CakePHP_Facebook_Plugin_Auth_Facebook_and_more)。我大约一年前实施了它。直到现在它工作得很好。但是今天我发现当我尝试登录（作为新用户）时，它不会保存 facebook 用户数据，因为`$this->Connect->user()`（结果来自`$this->FB->api('/me')`, `/plugins/facebook/controller/components/connect.php, line 194`）什么都不返回。我也试过，[这个 facebook 插件](https://github.com/stefan-zh/Facebook-Connect-Plugin-CakePHP)在另一个 cakephp 2.0 网站上，但同样的东西在那里。

我认为，facebook api 发生了一些变化，因为我绝对没有在网​​站上进行任何更改，这可能会带来这样的结果。

这是组件中的`user`功能`connect.php`

```
function user($field = null){       
    if(isset($this->uid)){
        $this->uid = $this->uid;
        if($this->Controller->Session->read('FB.Me') == null){
            $this->Controller->Session->write('FB.Me', $this->FB->api('/me'));
        }
        $this->me = $this->Controller->Session->read('FB.Me');

    } 
    else {
        $this->Controller->Session->delete('FB');
    }

    if(!$this->me){
        return null;
    }

    if($field){
        $retval = Set::extract("/$field", $this->me);
        return empty($retval) ? null : $retval[0];
    }

    return $this->me;
} 
```

和我的`beforeFacebookSave()`功能`app_controller`

```
public function beforeFacebookSave() {
    $fbUser = $this->Connect->user ();

           //debug($fbUser);  // outputs nothing

        $this->Connect->authUser ['User'] ['email'] = $fbUser ['email'];        
        $this->Connect->authUser ['User'] ['first_name'] = $fbUser ['first_name'];
        $this->Connect->authUser ['User'] ['last_name'] = $fbUser ['last_name'];

            return true;

} 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T19:47:02.910

Facebook 上的证书更改未反映在 SDK 中（因为它使用了旧证书）。由于该插件基于 PHP SDK，您只需获取最新版本的 repo [https://github.com/webtechnick/CakePHP-Facebook-Plugin](https://github.com/webtechnick/CakePHP-Facebook-Plugin)。作者已推送提交以将新的 PHP SDK 包含在新证书中。

[https://github.com/webtechnick/CakePHP-Facebook-Plugin/tree/master/Vendor](https://github.com/webtechnick/CakePHP-Facebook-Plugin/tree/master/Vendor)

`/me`由于 SSL 问题阻塞 API 调用导致返回空，您的错误日志应该有 Facebook 异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-26T15:29:32.200

试试这个，它对我有用

```
$infos = $facebook->api('/me?fields=id,first_name,last_name,picture,email'); 
```

# c# - 在 Visual Studio 2010 中，如何复制目录结构以测试输出？

> ID：13662833
> 
> 赞同：1
> 
> 时间：2012-12-01T19:18:49.517
> 
> 标签：c#, visual-studio-2010, unit-testing

我有一个项目，它有一个名为“Data”的目录，其中包含各种数据文件，如 XML 和 XSD 文件。我将这些文件指定为“内容”和“始终复制”，它们在构建时复制到 /bin/ 目录结构完好无损（即 /bin/Data/）。

我还将这些目录添加到 .testsettings 部署列表中。我尝试通过设置要部署的单个文件和设置目录来做到这一点。在这两种情况下，它只是将文件本身复制到输出目录中，但不保留目录结构。

将文件复制到测试输出目录时，如何告诉 Visual Studio 保留目录结构？我宁愿不必使用构建后事件。测试设置与构建设置不同，这对我来说似乎很疯狂。

谢谢。

卢克

# javascript - JavaScript奇怪的数组范围问题

> ID：13662834
> 
> 赞同：1
> 
> 时间：2012-12-01T19:18:51.627
> 
> 标签：javascript, arrays, scope

所有源代码都可在此处获得：只需查看页面源代码。一半代码在该页面上，另一半在源代码中链接的“deputyDepot.js”文件中，也应该是可见的。

只是几件事：这显然仍在进行中。我在编码时非常杂乱无章，我倾向于跳来跳去，做一些这个和那个。所以有点乱。还有背景。我们就假装它不存在，好吗？

所以现在，解决问题！似乎我无法访问任何函数中的数组。

目前，我一直在测试的方式是修改我的主要功能（称为 weTalkNow(input)）。它位于代理Depot.js 中。我将它设置为返回我正在测试的任何值，以查看它们的设置。这些值会打印在我的聊天框中。所以我像 console.log() 一样使用它。目前它被设置为返回用户输入的长度，但这完全无关紧要。

_inputArray 通过获取用户输入（字符串）并将其拆分为空格来填充。它在页面顶部声明。这一切都很好，花花公子。

出现问题的地方是如果手动填充数组。

```
var x = [ [1,2], [3,4] ];
/* Main Function */
function weTalkNow(){
    return x[0][0];
} 
```

据我所知，该代码应该输出 1。但事实并非如此。当代码修改为此，它工作正常：

```
/* Main Function */
function weTalkNow(){
    var x = [ [1,2], [3,4] ];
    return x[0][0];
} 
```

然而，这不是很有帮助。我需要一个全局数组，而不是本地数组。

让事情变得非常奇怪的是，如果我决定宣布

```
var x = [ [1,2], [3,4] ]; 
```

在我的主页（带有 HTML 和内容的那个）上，然后执行此操作

```
/* Main Function */
function weTalkNow(){
    return x[0][0];
} 
```

在代理Depot.js 文件中，它工作正常。突然间，如果我在不同的页面上声明一个全局数组，它就可以正常工作。

如果我能以任何方式澄清任何观点，请告诉我。我试图提供我能提供的所有信息。也欢迎随机的小贴士，但我主要只关注这一点。

同样，我很清楚：无论出于何种原因，如果我手动填充它们，我就不能使用数组（我认为这与问题有关）。_inputArray 工作正常，因此该数组可以正常工作。它是唯一这样做的全局数组。但它不是手动填充的，而是通过 split 函数填充的。我似乎无法创建一个可由函数访问的全局数组。

编辑：

好的，我发现了问题！我正在编写的所有代码都可以正常工作，就像它应该的那样。问题是我的 .js 文件的最顶部是一个损坏的函数。第一行阻止了它下面的所有代码运行，因此我的数组从一开始就没有被初始化。出于这个原因，我无法访问它们。

一旦我检查了 Web 控制台，我就能解决所有问题。在发布这个问题之前，我不知道有一个网络控制台。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:32:00.633

如果您的函数引用了在调用函数的行下方声明的数组，则该数组将不在范围内。

```
myFunc();

function myFunc () {
    console.log(ra[0]); // won't work
};

var ra = ["a"]; 
```

这将起作用：

```
var ra = ["a"];

myFunc();

function myFunc () {
    console.log(ra[0]); // will work
}; 
```

要记住的另一件事是javascript包含也按顺序处理。还有一件事：换句话说，一般来说javascript是从上到下处理的；函数不能调用或引用文件中下一行定义的变量，这是一个例外。例外是您正在使用的命名函数。

这行不通。

```
var funcA = function () {
    funcB(); // wont work
};

funcA();

var funcB = function () {
    console.log("from funcB");
}; 
```

这将起作用：

```
funcC(); // works fine

function funcC () {
    funcD(); // works fine
}

function funcD () {
    console.log("from funcD");
}; 
```

这些细微的差异可能被认为代表了不完美的设计，但它们可以很好地工作。

# java - 读取多个数据库 SQLite 的最佳实践

> ID：13662838
> 
> 赞同：0
> 
> 时间：2012-12-01T19:19:11.140
> 
> 标签：java, android, database, sqlite

我对这个项目的目标是创建一个能够从不同的数据银行进行测验的测验应用程序。我希望用户可以选择他们希望测试的科目，然后一旦选择了不同的银行，就可以组合并随机化以进行测试。这是我第一次使用数据库，我想知道是否可以就实现这一目标的最经济方式获得一些意见。多张桌子是我最好的选择吗？后来，我希望能够实现记录每个主题的完成情况的能力。如果有人能指出我正确的方向或为此提出建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:53:34.687

我刚刚完成了我的测验应用程序的创建，我创建了一个表格来管理问题，另一个表格来管理分数。只要您使用类别列，您就可以将光标设置为阅读您选择的类别的问题。光标可以返回所选类别中有多少问题，您也可以很容易地随机打乱数字以获得随机的问题分类。如果您有任何具体问题，请直接询问

（至于人们的表现如何，我建议将其放在另一个不同的数据库中。这更容易，因为该数据库可能永远不会升级，一旦创建就不必修改它）。

# entity-framework - 查询在 Entity Framework Code First 中创建的纯连接表

> ID：13662841
> 
> 赞同：1
> 
> 时间：2012-12-01T19:19:46.680
> 
> 标签：entity-framework, many-to-many, code-first, jointable

我从以下两个表中创建了一个纯连接表：

用户：

```
[Key]
[DatabaseGenerated(DatabaseGeneratedOption.Identity)]
public int UserID { get; set; }
public string UserName { get; set; }
public String FirstName { get; set; }
public String LastName { get; set; }

public virtual ICollection<CrRole> Roles { get; set; } 
```

角色：

```
[Key]
[DatabaseGenerated(DatabaseGeneratedOption.Identity)]
public int RoleID { get; set; }
public String RoleName { get; set; }

public virtual ICollection<CrUser> Users { get; set; } 
```

Fluent API 创建 UserRole 连接表：

```
 modelBuilder.Entity<CrUser>()
        .HasMany(c => c.Roles)
        .WithMany(i => i.Users)
        .Map(t => t.MapLeftKey("UserID")
            .MapRightKey("RoleID")
            .ToTable("CrUserRole")); 
```

这可以正常工作，并使用 UserID 和 RoleID 列创建正确的 CrUserRole 表。

不过，我在尝试弄清楚如何对此连接表进行简单查询时遇到了很大的困难。在 SQL 中，命令将是：

```
SELECT COUNT(*) 
FROM UserRole ur
WHERE ur.RoleID = @RoleID
AND   ur.UserID = @UserID 
```

我试过浏览角色或用户实体的导航链接，但似乎总是以一堆拒绝编译的意大利面条代码结束:-(

如果有人能指出我正确的方向，我将不胜感激。甚至一些教程也会有所帮助，我发现的那些似乎只是创建连接表而不包括 CRUD 操作。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T21:29:39.417

注意你的映射：

```
 t.MapLeftKey("UserID")
.MapRightKey("RoleID")
.ToTable("CrUserRole")); 
```

此映射表明您的查询结果将始终为 1 或 0。执行此操作的正确方法 IMO 如下：您同时拥有用户 ID 和角色 ID，对吗？
首先获取用户，然后查询该特定用户的角色。就像是：

```
var user = ctx.Users.FirstOrDefault(u => u.UserID == myUserId);
var role = user.Roles.FirstOrDefault(r => r.RoleId = myRoleId); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-01T15:43:20.427

谢谢凯马尔。

我最终使用的版本是：

```
String[] returnUsers = new String[1]; 

var role = context.Roles.First(r=>r.RoleName.Equals(roleName)); 

returnUsers = role.Users.Select(s => s.UserName).ToArray(); 
```

感谢您让我朝着正确的方向前进，并很抱歉花了几个月的时间来更新这个！

# asp.net - 在 ASP.NET 上转换 m4a -> mp3

> ID：13662846
> 
> 赞同：1
> 
> 时间：2012-12-01T19:20:20.860
> 
> 标签：asp.net, ffmpeg, mp3, m4a

我目前将 mp3 发布到网站并将其流式传输给用户。但是，我在 m4a 中录制，除非您使用 flash 或一些特殊的 html5 实现，否则它不会流式传输。

我希望能够将 m4as 上传到该站点并将其转换为 mp3。

有一些实现为 .net 包装了 ffmpeg，但很少有任何文档（FFLIB.NET、FFmpeg.NET、FFMpeg-sharp），尤其是非视频格式。

有没有人对解决这个问题有任何想法，或者可能有一些替代方案？我不相信我的主机（Arvixe）在其 ASP.NET 包上支持 Python ......

**编辑**：我选择了豪尔赫的答案，以评论作为进一步的背景，它主要回答了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:27:35.007

已经讨论过，即使没有提及 asp.net，您的代码也可以轻松运行，因为最终，asp.net 只是在 .net 框架之上。

[如何以编程方式将 M4A 文件转换为 MP3 或 WMA 文件？](https://stackoverflow.com/questions/144466/how-do-i-convert-an-m4a-file-to-an-mp3-or-wma-file-programmatically)

希望能帮助到你，

# pid - 无论如何要获取由 Supervisord 创建的进程的 ID？

> ID：13662849
> 
> 赞同：22
> 
> 时间：2012-12-01T19:20:41.187
> 
> 标签：pid, supervisord, child-process

我需要使用 supervisord 创建的进程的进程 ID 以便在脚本中使用。supervisord 生成的进程不会在其默认目录中创建 .pid 文件（如果有的话）。

如何获取 supervisord 子进程的进程 ID？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-01T21:16:10.120

从 supervisor 版本 3 开始，您可以使用该`supervisorctl pid <name>`命令列出`pid`托管进程：

```
supervisorctl pid programname 
```

用于`supervisorctl pid all`获取`pid`所有托管进程的以换行符分隔的列表。

对于较旧的 supervisord 版本，您可以使用`supervisord status`，但是使用一点`awk`,`sed`和`paste`按摩，您可以提取这些`pid`s 以作为其他命令的输入：

```
echo `bin/supervisorctl status | grep RUNNING | awk -F' ' '{print $4}' | sed -e 's/,$//' | paste -sd' '` 
```

会将所有正在运行的程序的 pid 列为以空格分隔的列表。例如，替换为向它们发送所有信号`echo`的命令。`kill -HUP``SIGHUP`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2016-02-26T11:47:32.287

您现在可以执行以下操作：

```
sudo supervisorctl pid all
sudo supervisorctl pid myprogramname 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-05T23:59:06.560

系统centos7

命令：

```
ps -ef|grep $(cat /tmp/supervisord.pid)|grep -v grep |grep -v supervisord|awk '{print $2}' 
```

该文件`/tmp/supervisord.pid`记录了supervisord id。

您可以通过以下方式获取子进程`ps -ef|grep ${fatherProcess}`

# twitter - Twitter Stream api 按位置和跟踪过滤

> ID：13662853
> 
> 赞同：5
> 
> 时间：2012-12-01T19:21:30.613
> 
> 标签：twitter, stream

我正在使用以下行来获取包含特定关键字的地理定位推文。（我用的是麦当娜这个词）

[https://stream.twitter.com/1.1/statuses/filter.json?track=Madonna&locations=-180,-90,180,90](https://stream.twitter.com/1.1/statuses/filter.json?track=Madonna&locations=-180,-90,180,90)

我的问题是，结果不是由包含关键字 Madonna 的地理定位推文组成，而是通常由地理定位推文组成。

我在这里做错了什么有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T01:02:42.510

1.  "-180,-90,180,90" - 全球位置；

2.  目前，要在 Twitter 流 API 中使用“AND”而不是“OR”，您需要发出这样的请求：`https://stream.twitter.com/1.1/statuses/filter.json?locations=-74,40,-73,41`然后在您的应用程序中通过“Madonna”过滤结果。不幸的是，我今天找不到其他方法；

3.  按位置过滤可以[包含](https://dev.twitter.com/docs/streaming-apis/parameters#locations "关联")：

> 如果坐标为空但填充了地点，则检查就地定义的区域是否与位置边界框相交。任何重叠都会匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-17T16:23:22.853

另一个有点老套的解决方案是，您可以拥有一个永远不会匹配的跟踪密钥工作，例如“dkghaskldfnascjkawenaf”，并添加一个位置边界框。

API 在跟踪和位置之间建立 OR 关系，您只会收到来自边界框内（或非常靠近）的推文

# spring - Spring 3 @ModelAttribute 与模型中的列表

> ID：13662855
> 
> 赞同：3
> 
> 时间：2012-12-01T19:21:50.373
> 
> 标签：spring, list, spring-mvc, spring-3, modelattribute

我有两个模型：

```
public class Size {
    private String name;
        // getter and setter
}

public class Product {
    private int id;
    private String designation;
    private Float price;
    private List<Size> availableSizes;
        // Getter and setters
} 
```

我已经在我的 servlet 中定义了尺寸，现在我需要创建具有可用尺寸的产品。

我在索引控制器中所做的事情：

```
ModelAndView render = new ModelAndView("admin/index");
render.addObject("products", productFactory.getProducts());
render.addObject("sizes", sizeFactory.getSizes());
render.addObject("command", p);
return render; 
```

我有一个产品清单和我的尺寸清单。

在我的索引视图中，我这样做：

```
<form:form method="post" action="/ecommerce/admin/products" class="form-horizontal">
       <form:input path="id" />
    <form:input path="designation" />
    <form:input path="price" />
    <form:select path="availableSizes" items="${sizes}"/>
    <input type="submit" value="Ajouter le produit" class="btn" />
</form:form> 
```

然后，在新产品控制器中，我这样做：

```
// To fix: Sizes not saved !
@RequestMapping(value = "/products", method = RequestMethod.POST)
    public ModelAndView newProduct(@ModelAttribute("Product") Product product,
            BindingResult result) {
        productFactory.add(product);
        return buildIndexRender(null, null, product);
    } 
```

问题是我保留了发布的产品，但没有相应的尺寸。

有没有办法在控制器中或直接在模型中保持选定的尺寸？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:29:51.420

这是一个非常普遍的问题。

要从 post 数据中设置一个`List<Size>`in Product 实例，即一个带有选定大小的字符串冒号分隔列表，您需要做的就是告诉框架如何将大小转换`String`为`Size`实例。最常见的方法是注册 `PropertyEditor` 一个`WebDataBinder`

```
class SizePropertyEditor extends PropertyEditorSupport {

        @Override
        public void setAsText(String text) throws IllegalArgumentException {
            Size size = stringToSize(text);  // write this code
            setValue(size);
        }
} 
```

`@InitBinder`并使用注解在 Controller 中注册属性编辑器

```
@InitBinder
public void initBinder(WebDataBinder binder) {
        binder.registerCustomEditor(Size.class, new SizePropertyEditor());

} 
```

有关更通用的方法，请参见`ConversionService.`

# c# - EF 5.0 将 null 插入 smallint 列

> ID：13662866
> 
> 赞同：0
> 
> 时间：2012-12-01T19:23:08.343
> 
> 标签：c#, entity-framework-5, asp.net-4.5

我有一个 SQL 类型为 smallint（Int16 的 EF 类型）的列，我想在其中插入一个空值，但是当我使用下面的代码时，我得到一个错误，即 null 无法转换为 short。如果语句允许我插入空值，我如何获得这一行？

```
CollectionID = (ddlCollection.SelectedValue == "None") ? null  : Convert.ToInt16(ddlCollection.SelectedValue) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T20:10:07.527

工作代码是做一个 nullablecnvert 像：

```
CollectionID = (ddlCollection.SelectedValue == "None") ? (Nullable<Int16>)null : Convert.ToInt16(ddlCollection.SelectedValue) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:28:46.413

c# 在数据库中有一个 null 值：DBNull.Value

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T19:41:06.040

第一个问题是您的实体框架属性`CollectionID`必须标记为 Nullable（如果您使用 EDMX）或声明为`short?`或`Nullable<short>`如果您使用 Code First。

其次，您需要确保该列的数据库类型也标记为可为空（类似于`smallint NULL`SQL Server）。

**编辑：**啊，我想我现在看到了问题。尝试将您的呼叫投射`Convert.ToInt16`到`Nullable<short>`。三元运算符`null`在`true`侧面看到 a ，并且类型与侧面的`null`值不兼容`false`，这会导致您的错误。

```
CollectionID = (ddlCollection.SelectedValue == "None")
    ? (Nullable<short>)null 
    : (Nullable<short>)Convert.ToInt16(ddlCollection.SelectedValue) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-18T08:31:26.983

与 sqlcommand 参数一起使用

```
 if(ddl_collection.selectedvalue!="None")
   command.Parameters.AddWithValue("@CollectionID", Convert.ToInt16(ddlcollection.selectedValue));
else
    command.Parameters.AddWithValue("@CollectionID", DBNull.Value); 
```

# java - 跨多个服务器的 Spring 应用程序

> ID：13662868
> 
> 赞同：2
> 
> 时间：2012-12-01T19:23:41.300
> 
> 标签：java, spring

我想实现一个跨越多个应用服务器的应用程序。我的想法是我会在不同的机器上放置不同的服务，例如，在一台机器上提供计费服务，在另一台机器上提供预订服务。因此，如果计费服务器出现故障，您仍然可以查看所有不依赖于计费信息的预订信息。需要计费服务的机票预订必须是事务性的（跨 2 个数据源）。

春天你会怎么做呢？弹簧集成？或者是其他东西？

提前谢谢各位。也非常感谢有关架构的任何其他输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T21:09:12.050

通常使用 Java EE 容器是这类事情的最佳实践。JBoss 和 Glassfish 是开源应用程序服务器，可以准确解决您正在研究的问题。

Spring 是配置此类跨多个应用服务器的应用程序的一种选择。如果您想对此有任何额外信息，请给我发消息。

# javascript - [object FormData] 中的警报特定元素（用于测试）

> ID：13662875
> 
> 赞同：8
> 
> 时间：2012-12-01T19:24:18.577
> 
> 标签：javascript, ajax, form-data

我正在尝试查看 . 中包含哪些内容`[object FormData]`，特别是在名称应为 . 的特定元素中`Name`。我想提醒它，检查内容是否正确，但这样做会返回`undefined`：

```
 alert(fd['Name']); 
```

我很确定我正在正确加载表单数据，所以我想知道问题是否在于我以错误的方式访问数据......

PS 警报仅`fd`返回`[object FormData]`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-01T19:30:09.040

IvanZh 告诉我这种方法对他不起作用，这促使我对 HTML5`FormData`对象进行了一些研究。事实证明，我对此完全错误（请参阅下面的旧错误答案）。的所有数据都`FormData`驻留在*本机*代码中。这意味着浏览器以其实现语言处理表单字段和文件上传的数据。

引用[MDN](https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Using_FormData_objects)：

> 注意：... FormData 对象不是可字符串化的对象。如果要对提交的数据进行字符串化，请使用前面的纯 AJAX 示例。另请注意，尽管在此示例中存在一些文件字段，但当您通过 FormData API 提交表单时，您也不需要使用 FileReader API：文件会自动加载和上传。

无法在 JavaScript 中表示此信息，因此我将其简单地序列化为 JSON 的幼稚建议将不起作用（这促使我想知道为什么首先接受此答案）。

根据您要实现的目标（例如，如果您只是尝试调试），简单地从返回相关 JSON 元数据的服务器端脚本中反弹此信息可能是可行的。例如，在 PHP 中，您可以将 FormData 发送到`analyzeForm.php`，它可以轻松访问您在相关请求超全局下附加到 FormData 的所有内容。该脚本将消化表单的内容并以易于解析的 JSON 格式返回相关信息。这是非常低效的，所以它可能不适合生产环境，但它是一些东西。

**旧的错误答案：**

您可以尝试使用：

```
alert(JSON.stringify(fd)); 
```

查看结构的文本表示`fd`。

您也可以使用`console.log`，但这是一项非标准功能，不能保证在所有浏览器中都存在。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-03T16:54:28.817

[User Spokey 在这里](https://stackoverflow.com/a/21901886)使用 jsFiddle 向我介绍了这种技术，它非常方便地“查看” formData 对象中的值，基本逻辑是：

```
function submitFormFunction() {
//create formData object
var myFormData = new FormData();
// get the values from some input fields
var myKey1 = $("input[name='my_field_one']").val();
var myKey2 = $("input[name='my_field_two']").val();
// append the values to the formData object, whilst also defining their key names
myFormData.append("my_field_one",myKey1);
myFormData.append("my_field_two",myKey2);
// mock implementation - in order to view what is being sent
var xhr = new XMLHttpRequest;
xhr.open('POST', '/echo/html/', true);
xhr.send(myFormData);
} 
```

只需在 Firebug 中打开“网络”选项卡，您就可以看到这些值。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-01T19:26:23.047

你应该做：

```
console.log(fd['Name']); 
```

在大多数浏览器中，尤其是 chrome，您打开开发者工具 (F12) 并查看控制台。

您将获得对象的一个​​很好的可扩展视图，并且可以对其进行检查。

# magento - Magento 查询销售额或订单量

> ID：13662877
> 
> 赞同：2
> 
> 时间：2012-12-01T19:24:40.277
> 
> 标签：magento

我正在寻找一种能够获得销售量近似值（基本上是商店产生了多少钱）的方法，我想以此为基础进行粗略计算以向用户显示更多数据。

**（选项 A）**我知道我可以直接查询数据库然后缓存结果，但是 Magento 是否已经这样做并将其缓存在我可以使用的某个地方？**（选项 B）**，就像 Magento 一样，在某处保存终身销售价值和平均销售价值。

任何数据，如每日/每周/每月平均销售额或平均订单金额和每日/每周/每月平均订单数据都足够了。

如果选项 A 是唯一的方法，我应该如何查询这些数据？我见过这样的例子：

*   `Mage::getResourceModel('sales/order_collection')`
*   `Mage::getModel('sales/order')->getCollection()`

哪个更快、更轻量级满足我的需求？以及我在哪里可以实际看到详细或解释清楚的使用它们的示例的任何链接，以便我可以了解在每种情况下可用于查询的参数？

* * *

更新：我仍然不清楚上述两种方法之间的区别是什么，但我的猜测是一种比另一种更抽象，并且可能在内部使用另一种，但我不确定。无论如何，我有这个代码片段拉入数据，但我在过滤日期范围的数据时遇到问题：

```
<?php

require_once 'app/Mage.php';

#umask(0);

Mage::app('default');

$orderTotals = Mage::getModel( 'sales/order' )->getCollection()
->addAttributeToFilter( 'status', Mage_Sales_Model_Order::STATE_COMPLETE )
->addAttributeToFilter( 'status', 'complete' )
//->addAttributeToFilter( 'created_at', array( 'from'  => date( 'Y-m-d', strtotime( '-100 days' ) ) ) )
//->addAttributeToFilter( 'created_at', array( 'from' => date( 'Y-m-d', strtotime( '-100 days' ) ), 'to' => date( 'Y-m-d' ) ) )
->addAttributeToSelect( 'grand_total' )
->getColumnValues( 'grand_total' )
;

$totalSum = array_sum( $orderTotals );
$totalSum = Mage::helper( 'core' )->currency( $totalSum, true, false );

echo $totalSum . "\n"; 
```

* * *

更新：此代码段现在正在运行。我在该范围内有订单，但他们的订单状态是“处理中”，所以我看不到它们。我从[这个问题](https://stackoverflow.com/a/11897428/551713)中得到了片段。

我仍在寻找上述两种方法的不同之处以及哪种方法好用的解释？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T16:50:54.010

如果有人像我一样通过谷歌来到这里，这个问题促使我制作我一直想要的报告页面。我通常不使用内置的 MVC（更多内容见下文！），而是将页面放入 var/export 或其他内容中。`sales_flat_order*`在浏览了所有表格并`sales_flat_invoice*`找到代表我们销售和发货的产品的解决方案后，我最终提出了以下查询。

`Sales report for this week:`

```
SELECT sfi.grand_total as 'total',sfii.base_row_total as 'sales', sfii.sku as 'sku', sfii.qty as 'qty', sfo.increment_id as 'order' 
FROM sales_flat_invoice_item sfii
LEFT JOIN sales_flat_invoice sfi ON sfii.parent_id = sfi.entity_id
LEFT JOIN sales_flat_order sfo ON sfi.order_id = sfo.entity_id
WHERE sfo.status = 'complete'
AND sfi.updated_at > "2013-06-01" 
```

日期是上周五晚上的午夜。注意：如果您添加`sfi.*`到 SELECT 中，您可以进行数学计算，以根据总数仔细检查运费和税金。问题`sales_flat_order`是该表不代表您支票账户中的现金。我们不是应计制（可能很少有小企业是），所以这对我理解现金会计基础更好。

对于我的报告脚本，我还构建了一个值表并使用[Google Charts](https://google-developers.appspot.com/chart/interactive/docs/gallery/barchart)使其更漂亮。以下页面几乎立即加载： ![从上述查询生成的报告的屏幕截图](../Images/d8fd15973ac5dba5c84bd840f7655720.png)

编辑添加：在创建上述查询时，我发现以前使用适当的集合等方式构建的订单查询工具会遗漏大量订单，而我们无法发现任何原因。越来越多地，我发现正确完成工作的唯一方法就是自己做——并且用艰难的方式去做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T20:04:55.327

你有没有看@Admin -> Report -> Sales

/app/code/core/Mage/Adminhtml/controllers/Report/SalesController.php

/app/code/core/Mage/Adminhtml/Block/Report/Sales/Sales/Grid.php

集合：'sales/report_order_collection'

表：

sales_bestsellers_aggregated_*

sales_order_aggregated_*

report_viewed_product_*

# xml - 使用 xslt 连接来自 XML 的字符串。

> ID：13662884
> 
> 赞同：0
> 
> 时间：2012-12-01T19:26:02.077
> 
> 标签：xml, xslt

我正在尝试使用以下语句使用逗号作为分隔符连接字符串：

```
<xsl:call-template name="textNormal">
                            <xsl:with-param name="text">
                                <xsl:for-each select="/customer/orders/orderNo">
                                    <xsl:value-of select="."/>
                                    ,
                                </xsl:for-each>
                            </xsl:with-param>
                        </xsl:call-template> 
```

上述工作，但输出如下所示：

```
213321,123,12312312312,3123123124123432,3142341341432, 
```

如何更改它以使连接字符串的末尾没有尾随逗号？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:33:06.437

基于来自[https://stackoverflow.com/a/1738918/1606729](https://stackoverflow.com/a/1738918/1606729)的答案以及您希望它用于 XSLT 1.0 的事实，它将是：

```
<xsl:call-template name="textNormal">
    <xsl:with-param name="text">
        <xsl:for-each select="/customer/orders/orderNo">
            <xsl:value-of select="."/>
            <xsl:when test="position() != last()" />,</xsl:when>
        </xsl:for-each>
    </xsl:with-param>
</xsl:call-template> 
```

# java - 调用方法的不同方式？

> ID：13662887
> 
> 赞同：0
> 
> 时间：2012-12-01T19:26:26.027
> 
> 标签：java, methods

我被告知这是调用方法的一种方式：

如果您只写方法或属性的名称，Java 将根据以下规则猜测您在名称前写的含义

1.  如果方法不是静态的，它将尝试使用名称查找非静态方法/属性，然后查找静态方法/属性
2.  如果方法是静态的，它将尝试仅查找静态方法/属性

谁能给我一个例子？我无法理解它的含义，因为它如何在找到方法之前知道该方法是否是静态的，但它是根据它的非静态还是静态来找到方法的？或者他们指的是两种不同的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:39:12.740

这是一个示例，其中包含对方法 c、d 和 e 中将发生的情况的适当注释：

```
class A {
    // methods to be looked up
    // a static method
    static void a() {};
    // non-static method
    void b() {};

    static void c() {
         // valid reference to another static method
         a();        
    }

    static void d() {
         // This would fail to compile as d is a static method 
         // but b is a non-static
         b();        
    }

    // non-static method would compile fine
    void e() {
       a(); // non-static method can find a static method 
       b(); // non-static method can find another non-static method
    }

} 
```

# android - 我的网格视图项目位置在向下和向上滚动时发生变化

> ID：13662888
> 
> 赞同：0
> 
> 时间：2012-12-01T19:26:26.670
> 
> 标签：android, android-layout, android-gridview

我`GridView`在活动开始时看起来是正确的

[![http://i.stack.imgur.com/p41lb.jpg](../Images/1174e4f309778fb03e38f53ab8264b04.png)](https://i.stack.imgur.com/p41lb.jpg)

但是在向下和向上滚动项目位置更改后

[![在此处输入图像描述](../Images/0ffd0b9192eb97f596aaf743adef4ebb.png)](https://i.stack.imgur.com/y613u.jpg)

我第一行的最后一项有一个大文本，我认为这是我的问题这是我的`getView()`代码

```
public View getView(int position, View convertView, ViewGroup parent) {
    View v;
    if (convertView == null) {
        LayoutInflater li = getLayoutInflater();
        v= li.inflate(R.layout.item, null);
    } else {
    v= convertView;
    }
    ImageView imageView = (ImageView) v.findViewById(R.id.grid_item_image);
    imageView.setImageResource(R.drawable.logo);
    TextView textView = (TextView) v.findViewById(R.id.grid_item_label);
    textView.setText(PersianReshape.reshape( Values[position].getName()));
    Typeface face = Typeface.createFromAsset(context.getAssets(),"font/BNazanin.ttf");
    textView.setTypeface(face);
    textView.setTextSize(farin.code.rahnamee.attrib.attribute.content_font_size);
    return gridView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:03:41.777

您的网格项目都应该具有统一的高度。考虑设置最小/最大文本行数以确保统一的高度，并确保也`ImageView`具有一致的大小。一种方法是使用已知的固定大小`ImageView`而不是简单的`wrap_content`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T04:46:12.433

您应该像这样更改您的 getView 方法。

```
public View getView(int position, View convertView, ViewGroup parent){
    // TODO Auto-generated method stub
    View v;
    if(convertView==null)
    {
        LayoutInflater li = getLayoutInflater();
        v = li.inflate(R.layout.icontext, null);
    }else{
        v = convertView;
    }
    TextView tv = (TextView)v.findViewById(R.id.icon_text);
    tv.setText(providers[position]);
    ImageView iv = (ImageView)v.findViewById(R.id.icon_image);
    iv.setImageResource(R.drawable.icon);

    return v;
} 
```

您的问题是，当您使用 convertView 时，它会从第一条记录中存储旧数据。转换视图用于避免资源的布局膨胀，这会花费您的时间和内存。您应该使用旧的膨胀视图，但设置新数据。

# apache - 将所有带参数的 url 重定向到具有相同参数的特定页面

> ID：13662892
> 
> 赞同：0
> 
> 时间：2012-12-01T19:26:42.253
> 
> 标签：apache, .htaccess

我正在尝试将所有带有参数的 url 重定向到具有相同参数的不同 url。

例如：www.mysite.com/?q=about 我需要它去 www.mysite.com/index.php?q=about

我不关心参数，但我需要它们都去 index.php 加上相同类型的参数。

如果我没记错的话，我应该使用 RewriteRule 但我不确定我该怎么做。

我正在尝试这样的事情，但它不起作用：

RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{QUERY_STRING} 。
RewriteRule ^(.*)$ index.php?q=$1 [L,QSA]

任何想法？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:00:22.467

更新：

尝试这样的事情：

```
RewriteEngine on
RewriteCond %{QUERY_STRING} ^/(.*)/?$ 
RewriteRule ^(.*)$  /index.php%1 [L]

To account for trailing slash, in index.php test the query like this:

<?php
if ( ($_GET['q'] == 'about') || ($_GET['q'] == 'about/') ){
//do stuff; 
}
?> 
```

当然`q=about`可以换成你想要的任何东西。IE `search=apples`

# objective-c - 如何将类 id 的对象转换为 NSMutableArray 的 CGPoint？

> ID：13662893
> 
> 赞同：1
> 
> 时间：2012-12-01T19:26:43.893
> 
> 标签：objective-c, class, casting, cgpoint

如果我有一个类 id 的对象 myObject，我将如何将其“转换”为 CGPoint（假设我已经执行了自省并且知道 myObject 为 CGPoint）？尽管事实上 CGPoint 不是一个真正的 Obj-C 类。

简单地做`(CGPoint)myObject`返回以下错误：

`Used type 'CGPoint' (aka 'struct CGPoint') where arithmetic or pointer type is required`

我想这样做，以便我可以检查传递给 NSMutableArray 的对象是否是 CGPoint，如果是，则自动将 CGPoint 包装在 NSValue 中；例如：

```
- (void)addObjectToNewMutableArray:(id)object
{
    NSMutableArray *myArray = [[NSMutableArray alloc] init];
    id objectToAdd = object;
    if ([object isKindOfClass:[CGPoint class]]) // pseudo-code, doesn't work
    {
        objectToAdd = [NSValue valueWithCGPoint:object];
    }
    [myArray addObject:objectToAdd];
    return myArray;
} 
```

**附加代码**

以下是我用来执行“内省”的功能：

```
+ (BOOL)validateObject:(id)object
{
    if (object)
    {
        if ([object isKindOfClass:[NSValue class]])
        {
            NSValue *value = (NSValue *)object;
            if (CGPointEqualToPoint([value CGPointValue], [value CGPointValue]))
            {
                return YES;
            }
            else
            {
                NSLog(@"[TEST] Invalid object: object is not CGPoint");
                return NO;
            }
        }
        else
        {
            NSLog(@"[TEST] Invalid object: class not allowed (%@)", [object class]);
            return NO;
        }
    }
    return YES;
}

+ (BOOL)validateArray:(NSArray *)array
{
    for (id object in array)
    {
        if (object)
        {
            if ([object isKindOfClass:[NSValue class]])
            {
                NSValue *value = (NSValue *)object;
                if (!(CGPointEqualToPoint([value CGPointValue], [value CGPointValue])))
                {
                    NSLog(@"[TEST] Invalid object: object is not CGPoint");
                    return NO;
                }
            }
            else
            {
                NSLog(@"[TEST] Invalid object: class not allowed (%@)", [object class]);
                return NO;
            }
        }
    }
    return YES;
}

+ (NSValue *)convertObject:(CGPoint)object
{
    return [NSValue valueWithCGPoint:object];
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-01T20:01:21.750

A`CGPoint`不是 Objective-C 对象。您不能将一个传递给您的`addObjectToNewMutableArray:`方法。编译器不会让你。

您需要将其包装起来`CGPoint`并将`NSValue`该包装器传递给您的`addObjectToNewMutableArray:`方法。

如果你有 an`NSValue`并且你想测试它是否包含 a `CGPoint`，你可以这样问：

```
if (strcmp([value objCType], @encode(CGPoint)) == 0) {
    CGPoint point = [value CGPointValue];
    ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T20:05:02.640

一个点不是一个对象，因此不能被转换为一个......反之亦然

铸造不会转换数据，它只会改变数据的解释方式！

id 基本上是 NSObject* btw 的缩写

# caching - 使用来自 Internet 的缓存 Web 数据（Google Cache、Wayback Machine 等）

> ID：13662895
> 
> 赞同：2
> 
> 时间：2012-12-01T19:26:49.133
> 
> 标签：caching, webarchive

我想使用谷歌缓存访问其他网站的网页，即使不去访问它们。

如果我发出这样的查询 `http://webcache.googleusercontent.com/search?q=cache:<URL without SCHEME>`，我们可以获得数据。

我发现/假设以下事情（问题 0。如果其中任何一个错误，请更正）：

1.  根据网站的政策，Google 可能有也可能没有缓存信息。
2.  如果必须运行任何 javascript，Google 无论如何都会访问该网站。
3.  Google 只存储文本的前 101 KB。

问题 1\. 我知道 Google 缓存只显示最近抓取的页面，但知道这些数据可能有多旧吗？

问题 2\. 如果我打算去谷歌缓存我对该网站的所有点击（假设该网站被缓存并且我对小旧页面没问题）有什么问题吗？

问题 3\. Wayback Machine 提供数据，但在抓取和显示数据之间存在巨大延迟。是否有任何目录可以让我们获取最近存档的数据（如 Wayback 机器和 Google 缓存）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T01:10:32.490

> 我知道 Google 缓存只显示最近抓取的页面，但知道这些数据可能有多旧吗？

在 URL 中使用[cache:运算符](http://googlewebmastercentral.blogspot.com/2006/09/better-details-about-when-googlebot.html)

> 如果我打算对我对该网站所做的所有点击访问 Google 缓存（假设该网站已缓存并且我对小旧页面没问题），是否有任何问题？

所有者可以请求从缓存[中删除内容](http://googlewebmastercentral.blogspot.com/2007/04/requesting-removal-of-content-from-our.html)

> 有没有我们可以获取最近存档数据的目录？

在 URL 中使用[tbs=qdr:](http://googlesystem.blogspot.com/2009/09/even-more-recent-google-search-results.html)查询参数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-10T00:10:44.933

对于问题 3，虽然过去所有的 Wayback Machine 网络捕获都是 6 个月前的情况，但在 2012 年已经变得不真实，现在在 2016 年变得非常不真实。我们有大量的新鲜内容。

# amazon-web-services - 亚马逊自动化管理和监控

> ID：13662898
> 
> 赞同：-1
> 
> 时间：2012-12-01T19:27:06.473
> 
> 标签：amazon-web-services, amazon-ec2, amazon-rds

我们正准备使用 EC2、RDS 和弹性负载均衡器在 Amazon 云中部署一个新应用程序。RDS 将被分片。看看管理和监控几台服务器之外的任何东西的困难，人们可以看到这项任务可能会变得非常疯狂。Amazon 的界面允许您完成所有这些操作，但我们必须自己编写脚本。

我想知道其他人做了什么。有 RightScale，用于托管解决方案。有没有人找到任何其他公司或开源框架作品，做这种事情？看着：

监控 EC2、负载均衡器、RDS。在预定义的负载级别上自动启动上述的新实例。发生限制时自动发送警报并使资源脱机。促进 PHP 和 MySQL 的新软件/升级。使许多服务器脱机以进行维护/故障排除。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T10:32:33.340

您正在寻找的服务类型 - 自动配置、扩展/扩展和监控通常称为 PaaS - 平台即服务。这个想法是您将应用程序提交到 PaaS 系统，它管理应用程序的完整生命周期。

有几个可用的 PaaS 提供商可能适合您的需求。这里有一个比较：[寻找 PaaS 提供商的建议](https://stackoverflow.com/questions/9542784/looking-for-paas-providers-recommendations)

您应该仔细考虑您的要求，并在以下方面查看哪个提供商适合您：

*   云支持：您只需要 EC2 还是需要额外的云？
*   语言支持：一些提供商针对特定的编码框架和语言
*   支持
*   价钱
*   开源/闭源

免责声明：我为[Cloudify](http://www.cloudifysource.org)开源 PaaS 堆栈的开发人员 GigaSpaces 工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-18T20:02:04.073

你可以试试 Xervmon。他们提供集成的云管理工具套件，用于部署、管理和监控 Amazon AWS 以及其他几个提供商。他们也提供托管服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T23:06:38.727

你可以看看[scalr](https://scalr.net/)。他们在自己的平台上提供此服务，但您也可以下载他们正在使用的软件并自行设置。

在 Amazon EC2 之后，他们也开始扩展到其他云服务，因此您可以在几乎所有大型云提供商上运行您的 scalr 托管实例。

功能非常[丰富](https://scalr.net/features/)，但到目前为止我还没有自己测试过。

# java - 二维递归

> ID：13662903
> 
> 赞同：3
> 
> 时间：2012-12-01T19:27:28.300
> 
> 标签：java, data-structures, recursion

我正在为一个类实现一个二维数据结构。我想要的方法是一个“NxN”对象数组。

所以，

```
 Cell[][] dataStructure = new Cell[N][N]; 
```

我目前的问题是我对递归非常生疏。每个单元依赖于其左侧单元的输出，以及其上方单元的输出来创建其输出。

![二维结构示例以及输出如何流入下一个单元格](../Images/270711caa2aa24cdc2e2cee87486e810.png)

例子：

> 假设标准 X、Y 方向，我希望能够为单元格 Cell[X][Y] 调用 getOutputX 方法，它会递归地为 Cell[X-1][Y] 调用 getOutputX 并为 Cell 调用 getOutputY [X][Y-1] 直到它到达数组的边缘。此时，输出将通过数组传播回来并返回单元格的所需输出。

当我写下这篇文章时，我理解得更多，我觉得我很接近。任何有用的输入或提示将不胜感激。

我的具体问题是如何创建一个 getOutput 方法，该方法将从上面的单元格和所需输出左侧的单元格中获取所需的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T20:08:06.753

算法很简单：

```
int getOutput(x, y) {
    if (x == 0 || y == 0) {
        return hardCodedInput(x, y);
    }
    int leftOutput = getOutput(x - 1, y);
    int topOutput = getOutput(x, y - 1);
    return logicGate(x, y).applyLogic(leftOutput, topOutput);
} 
```

# php - 在 PHP 中的程序运行时打印/记录变量的状态？

> ID：13662912
> 
> 赞同：0
> 
> 时间：2012-12-01T19:28:32.950
> 
> 标签：php, debugging, xdebug

所以我有一段*很长*的 PHP 代码，它使用循环/if 语句修改全局数组。

是否有任何直接的方法可以在*每次*更改时打印数组的值？也许使用 XDebug？

我更喜欢文本日志，而不是使用 XDebug 进行逐行调试。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T19:30:30.080

好吧，通过输出 JS 来实现它的一种方法：安装 Firebug，然后您可以使用`console.log(...)`and`console.debug(...)`等（[请参阅文档](http://getfirebug.com/wiki/index.php/Console_Panel#Message_types)）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T16:30:20.920

Xdebug 支持函数跟踪，它将每个函数调用转储到磁盘上的文件中（参见[http://xdebug.org/docs/execution_trace](http://xdebug.org/docs/execution_trace)）。从最近的版本开始，函数跟踪也可以配置为显示对变量的更改。您可以使用 xdebug.collect_assignment 设置打开它（参见：http: [//xdebug.org/docs/execution_trace#collect_assignments](http://xdebug.org/docs/execution_trace#collect_assignments)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T16:39:30.983

如果没有 xdebug，您可能必须定义一个自定义对象（实现`ArrayAccess`）而不是数组，然后登录`offsetSet`，快速模拟开始：

```
 class ArrayLogger implements ArrayAccess {
       protected $array;
       public function __construct(array $array){
           $this->array = $array;
       }
       public function offsetGet($idx){
           return $this->array[$idx];
       }
       public function offsetExists($offset) {
           return isset($this->array[$offset]);
       }
       public function offsetUnset($offset) {
           unset($this->array[$offset]);
       }
       public function offsetSet($offset,$value){
           //do some logging here
           debug_print_backtrace();
           var_dump($this->array,$offset,$value)
           //and actually, you may need to inspect $value for arrays. & convert them all to ArrayLogger's before setting this:
           $this->array[$offset] = $value;
       }
   } 
```

# mysql - VB.Net MySqlConnection DataAdapter 在 MySqlCommandBuilder GetUpdateCommand() 之后为 Selects 返回零行

> ID：13662913
> 
> 赞同：2
> 
> 时间：2012-12-01T19:28:41.730
> 
> 标签：mysql, vb.net, mysql-connector

Visual Basic 2010 Express
MySQL Connector/Net 5.2.7
MySQL Server 5.5.16
Windows 7 Professional 64Bit
还尝试使用 MySQL Connector/Net 5.0.x 在 Windows XP 32 Bit

MySqlDataAdapter 在调用 MySqlCommandBuilder GetUpdateCommand() 方法后在 Select 语句上返回零行。没有错误被抛出，并且更新成功。如果我注释掉 GetUpdateCommand() 和 Update() 行，Select 语句将返回行。如果我只是注释掉 Update() 行，问题仍然存在，所以问题与 GetUpdateCommand() 而不是 Update() 本身有关。

我要连接的数据库中有两个表，每个表都具有相同的架构和内容：

test_table & different_table
id INT 主键
名 VARCHAR(45)

每个有五行：
1 - 名称
2 - 名称
...等

```
Imports System.Data
Imports MySql.Data.MySqlClient
Public Class Form1

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    'Open Connection to test database'
    Dim mscConnection As MySqlConnection
    mscConnection = New MySqlConnection()
    mscConnection.ConnectionString = "server=localhost; user id=root; password=; database=testdb"
    mscConnection.Open()

    'Get records from test table'
    Dim msdaDataAdapter As MySqlDataAdapter
    Dim dsDataSet As New DataSet
    msdaDataAdapter = New MySqlDataAdapter("SELECT id, name FROM test_table", mscConnection)
    msdaDataAdapter.Fill(dsDataSet, "test_table")

    'Show record count (result is 5)'
    Console.WriteLine(dsDataSet.Tables("test_table").Rows.Count)

    'Loop through rows and change the name field of each one'
    For Each row As DataRow In dsDataSet.Tables("test_table").Rows
        row("name") = "new name"
    Next

    'Update altered rows'
    Dim mscbCommandBuilder As New MySqlCommandBuilder()
    mscbCommandBuilder = New MySqlCommandBuilder(msdaDataAdapter)
    mscbCommandBuilder.GetUpdateCommand()
    msdaDataAdapter.Update(dsDataSet, "test_table")

    'Have tried with and without RefreshSchema/Dispose/Nothing'
    mscbCommandBuilder.RefreshSchema()
    mscbCommandBuilder.Dispose()
    mscbCommandBuilder = Nothing

    'Try to Select again'
    'Get records from test table'
    msdaDataAdapter = New MySqlDataAdapter("SELECT id, name FROM test_table", mscConnection)
    msdaDataAdapter.Fill(dsDataSet, "test_table_2")

    'Show record count: result is 0 :/'
    Console.WriteLine(dsDataSet.Tables("test_table_2").Rows.Count)

    'Try a different table'
    msdaDataAdapter = New MySqlDataAdapter("SELECT id, name FROM different_test_table", mscConnection)
    msdaDataAdapter.Fill(dsDataSet, "different_test_table")

    'Show record count: result is 0'
    Console.WriteLine(dsDataSet.Tables("different_test_table").Rows.Count)
    mscConnection.Close()
    mscConnection.Dispose()
End Sub
End Class 
```

如果我再次单击附加到代码的按钮（不关闭/重新打开应用程序），**所有**Select 语句将返回零行。

Update() 后连接没有关闭。如果我在更新后尝试（重新）打开连接，我会收到一条错误消息，指出连接已打开。

有谁知道发生了什么？如何更新以便我可以继续在代码中进一步选择？

# linux - 为 pthread 函数传递结构指针 als 参数

> ID：13662914
> 
> 赞同：0
> 
> 时间：2012-12-01T19:28:44.070
> 
> 标签：linux, pthreads, pass-by-reference

您好，我正在学习 pthreading 教程，但是由于无法通过引用我的结构，因此出现了问题 `pthread_create(...,(void* stuctName))`，我正在寻找一些建议或修复，因为我不知道在哪里或我搞砸了什么... 代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <unistd.h>
#include <math.h>

struct dataBlock{
    struct node *root;
    int listSize;
    int forIndex;
};

struct node { // std linked list node
    int value;
    int worker;
    struct node *next;
};

int slots = 3; // only 3 threads are allowed to access the list
int availableCheck(){   // check if thread can acces the list
    if(slots < 3) return 0;
    else return -1;
}

pthread_mutex_t mutp = PTHREAD_MUTEX_INITIALIZER;   //condvar mutex
pthread_cond_t  condvar = PTHREAD_COND_INITIALIZER;   //condvar

void * worker( void *data ){ //WORKER FUNCTION
    printf( "* Thread start:            ^\n"); 
    struct dataBlock *inData = (struct dataBlock *) data;
    struct node *root = data->root;
    int listSize =  data->listSize;
    int forIndex = data ->forIndex;

    // printf( "    * I am %li _ worker  # %li : \n", forIndex, pthread_self() );

    pthread_mutex_lock( &mutp );
    if(availableCheck() < 0){
        printf( " ^^^ List not available yet... \n" ); 
        pthread_cond_wait( &condvar, &mutp );
    }
    // printf( "*        Got data:  %lu \n", index ); 
    pthread_cond_signal( &condvar ); // 
    pthread_mutex_unlock( &mutp ); 

    return NULL;
}

int main( int argc, char *argv[] ){
    if ( argc != 3 ){
        printf( "Programm must be called with \n NR of elements and NR of workers! \n " );
        exit( 1 );
    int i;
    struct node *root;
    struct node *iterator;  

//prepare list for task
    int listSize = atoi(argv[1]);
    int nrWorkers = atoi(argv[2]);
    root = malloc(sizeof( struct node) );
    root->value = rand() % 100;
    root->worker = 0;
    iterator = root;
    for( i=1; i<listSize; i++ ){
        iterator->next = malloc(sizeof(struct node));
        iterator = iterator->next;
        iterator->value = rand() % 100;
        iterator->worker = i % nrWorkers;
        printf("node #%d worker: %d  value: %d\n", i, iterator->worker,iterator->value);
    }

// Create all threads to parse the link list
    int ret, *id;   
    printf("workersInput: %d\n",nrWorkers);

    pthread_t w_thread;
    pthread_t* w_threads = malloc(nrWorkers * sizeof(w_thread));

    struct dataBlock *data = malloc(sizeof(struct dataBlock));
    data->root = root;
    data->listSize = listSize;

    for( i=0; i < nrWorkers; i++ ){ // CREATING THREADS
        data->forIndex = i;
        ret = pthread_create ( &w_threads[i], NULL, worker, (void *) data );
        if( ret ) {
            perror("Thread creation fail");
            exit(2);    
        }   
    } 
    for ( i = 0; i < nrWorkers; i++){
        pthread_join(w_threads[i],NULL);
    }
    free(root);
    free(iterator);
    return 0;
} 
```

编译（墙旗）

```
s.c: In function ‘worker’:
s.c:32:26: warning: dereferencing ‘void *’ pointer [enabled by default]
s.c:32:26: error: request for member ‘root’ in something not a structure or union
s.c:33:22: warning: dereferencing ‘void *’ pointer [enabled by default]
s.c:33:22: error: request for member ‘listSize’ in something not a structure or union
s.c:34:22: warning: dereferencing ‘void *’ pointer [enabled by default]
s.c:34:22: error: request for member ‘forIndex’ in something not a structure or union
s.c:34:6: warning: unused variable ‘forIndex’ [-Wunused-variable]
s.c:33:6: warning: unused variable ‘listSize’ [-Wunused-variable]
s.c:32:15: warning: unused variable ‘root’ [-Wunused-variable]
s.c:31:20: warning: unused variable ‘inData’ [-Wunused-variable]
s.c: In function ‘main’:
s.c:81:12: warning: variable ‘id’ set but not used [-Wunused-but-set-variable] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:31:10.943

使用`inData->root`而不是`data->root` etc... （或始终显式转换 your `data`），因为`data`它是一个`void*`指针，它是指向某些未指定数据类型的指针。

# mysql - 从查询中排除分配的文章

> ID：13662917
> 
> 赞同：0
> 
> 时间：2012-12-01T19:28:49.440
> 
> 标签：mysql

我有一个查询打印分配给当前文章类别的所有文章

```
SELECT * FROM #__content WHERE catid='$catid' 
```

在此表（下）中，有一些文章被分配给当前文章作为类似文章

```
assigned_id   fav_id
     1          45
     1          12
     1          53

SELECT fav_id FROM #__similar WHERE id='$id' 
```

我希望它们隐藏在第一个查询中，该查询输出所有文章，包括分配为相似的文章。因此，在此示例中，将排除 id 为 45、12、53 的文章

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:35:09.993

试试这个

```
 SELECT * FROM #__content c
     INNER JOIN #__similar s
    ON c.article_id != s.fav_id
    WHERE catid='$catid' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:36:43.617

完整查询：

```
SELECT distinct c1.* 
FROM #__content c1
LEFT OUTER JOIN #__similar S on S.fav_id = c1.id
LEFT OUTER JOIN c2 on c2.catid='$catid' and c2.id = S.assigned_id
WHERE c1.catid='$catid' and c2.id is null 
```

如您所见，查询将 __content 与 __similar thourh fav_id 连接起来，这意味着，查询正在查看此内容是否与其他内容相似。在最后一次加入中，我检查了相似的项目是否属于同一类别。

# objective-c - 如何制作圆角的 NSTableView 行？

> ID：13662924
> 
> 赞同：1
> 
> 时间：2012-12-01T19:30:22.183
> 
> 标签：objective-c, macos, cocoa, row, nstableview

我想做这样的事情（在新的 iTunes 上）：
![在此处输入图像描述](../Images/de505b93cf58d622f265ab0334a4701d.png)

As you can see when the row is selected it's "highlight" state is a round cornered row.
我怎样才能实现这样的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T22:54:28.003

您需要子类化`NSTableview`和覆盖`-highlightSelectionInClipRect:`方法。

可以这样做：

在**Attributes Inspector**中将tableView 的突出显示模式从常规更改为**Source 列表**：

 **![更改高亮模式图像](../Images/2f93765ca6c8cedff7eb5d97437ccb5d.png)

现在`NSTableView`像这样子类：

```
-(void)highlightSelectionInClipRect:(NSRect)theClipRect
{
    NSRange visibleRowIndexes = [self rowsInRect:theClipRect];
    NSIndexSet *selectedRowIndexes = [self selectedRowIndexes];
    NSUInteger endRow = visibleRowIndexes.location + visibleRowIndexes.length;
    NSUInteger row;

    for (row=visibleRowIndexes.location; row<endRow; row++)
    {
        if([selectedRowIndexes containsIndex:row])
        {
            NSRect rowRect = NSInsetRect([self rectOfRow:row], 3, 4);
            NSBezierPath *path = [NSBezierPath bezierPathWithRoundedRect:rowRect xRadius:4.0 yRadius:4.0];
            [[NSColor colorWithCalibratedRed:0.474 green:0.588 blue:0.743 alpha:1] set];
            [path fill];
        }
    }
} 
```

结果：

![结果图片](../Images/6f6416e8fdcb11157d2348fb334050d5.png)**

# java - javax.naming.NoInitialContextException：需要在环境或系统中指定类名

> ID：13662929
> 
> 赞同：0
> 
> 时间：2012-12-01T19:30:57.980
> 
> 标签：java, ldap

运行 Java 程序时出现此错误。我想做的是能够使用 Java 代码创建一个 LDAP 用户。我的目标是能够在现有组中添加、删除、设置密码和添加用户。

更好的是还有一个输入框

谢谢

```
import javax.naming.directory.DirContext;

import javax.naming.directory.InitialDirContext;
import javax.naming.directory.Attributes;
import javax.naming.directory.BasicAttributes;
import javax.naming.directory.BasicAttribute;
import javax.naming.ldap.InitialLdapContext;
import javax.naming.ldap.LdapContext;
import javax.naming.NamingException;
import java.util.Hashtable;
import java.util.Properties;

public class LdapExampleAdd {

private static LdapContext ctx;

public static void main(String[] args) 
{

//Identify service provider to use

Hashtable env = new Hashtable();
Properties prop = new Properties();  
prop.put("java.naming.factory.initial", "com.sun.jndi.ldap.LdapCtxFactory");  
prop.put("java.naming.provider.url", "ldap://ldapserverip:389");  
prop.put("java.naming.security.principal", "cn=Administrator,cn=Users,dc=domain,dc=local");  
prop.put("java.naming.security.credentials", "password"); 

try {  
    setCtx(new InitialLdapContext(prop, null));  
    System.out.println("Connected"); 

  }  
  catch (NamingException ex) { 
    System.err.println("Not connected");     
    System.exit(0);
  }  

try 
{ 
// Create the initial directory context
InitialDirContext initialContext = new InitialDirContext(env);

DirContext dCtx = (DirContext)initialContext;

Attributes matchAttrs = new BasicAttributes(true);
matchAttrs.put(new BasicAttribute("uid", "defaultuser"));
matchAttrs.put(new BasicAttribute("cn", "defaultuser")); 
matchAttrs.put(new BasicAttribute("givenname", "defaultuser")); 
matchAttrs.put(new BasicAttribute("sn", "defaultuser")); 
matchAttrs.put(new BasicAttribute("userpassword", "password")); 
matchAttrs.put(new BasicAttribute("objectclass", "top")); 
matchAttrs.put(new BasicAttribute("objectclass", "person")); 
matchAttrs.put(new BasicAttribute("objectclass", "organizationalPerson")); 
matchAttrs.put(new BasicAttribute("objectclass","inetorgperson")); 
String name="uid=defaultuser";

InitialDirContext iniDirContext = (InitialDirContext)dCtx;
iniDirContext.bind(name,dCtx,matchAttrs);

iniDirContext.close();
dCtx.close(); 
} 
catch (NamingException ne) 
{
System.err.println(ne);
}
catch(Exception e)
{
System.err.println(e);
}
}

public static LdapContext getCtx() {
    return ctx;
}

public static void setCtx(LdapContext ctx) {
    LdapExampleAdd.ctx = ctx;
}
} 
```

谁将成为真正的专家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:23:52.247

您创建 InitialLdapContext，但从不使用它。您创建了 HashTable，但从不填充它。

# django - Django-Kronos 的问题

> ID：13662932
> 
> 赞同：2
> 
> 时间：2012-12-01T19:31:12.877
> 
> 标签：django

[我对Django-Kronos](https://github.com/jgorset/django-kronos)有一个奇怪的问题。

我已经让它在我的本地机器和我们的开发服务器上成功运行。但是，在生产服务器上，我无法让 kronos 确认我的 cron.py 文件。当我运行 installtasks 时，它运行但显示“已安装 0 个任务”。我也尝试过手动运行任务，kronos 告诉我任务不存在。

我们使用 git 将所有内容推送到服务器，因此三个位置之间的所有文件和结构都是相同的。我还检查了 cron.py 文件是否存在并且与工作服务器具有完全相同的内容。

服务器之间的唯一区别是生产服务器正在运行 Postgres（开发服务器上的 SQlite）并且它是 Ubuntu 12.10，而开发服务器是 12.01。

Kronos 运行正常，但由于某种原因它没有获取我们的 cron.py 文件......

有什么想法吗？！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-21T19:58:12.153

当您尝试进行的导入之一不存在时，就会发生这种情况，您的生产系统可能缺少某些包含在您的 cron.py 中的 Python 包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T06:25:04.797

好吧，不幸的是，我们的解决方案是完全废弃 Django-Kronos 并创建一个我们从 crontab 运行的自定义管理命令。

# python - 如何将表示二进制分数的字符串转换为Python中的数字

> ID：13662933
> 
> 赞同：8
> 
> 时间：2012-12-01T19:31:12.147
> 
> 标签：python, binary, fractions

让我们假设我们有一个表示二进制分数的字符串，例如：

```
".1" 
```

作为十进制数，这是 0.5。Python中是否有一种标准方法可以将此类字符串转换为数字类型（无论是二进制还是十进制都不是很重要）。

对于整数，解决方案很简单：

```
int("101", 2)
>>>5 
```

int() 采用可选的第二个参数来提供基数，但 float() 没有。

我正在寻找与此功能等效的东西（我认为）：

```
def frac_bin_str_to_float(num):
    """Assuming num to be a string representing
    the fractional part of a binary number with
    no integer part, return num as a float."""
    result = 0
    ex = 2.0
    for c in num:
        if c == '1':
            result += 1/ex 
        ex *= 2
    return result 
```

我*认为*这就是我想要的，尽管我很可能错过了一些边缘情况。

在 Python 中是否有内置或标准的方法来执行此操作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-01T19:36:52.773

以下是表达相同算法的更短的方式：

```
def parse_bin(s):
    return int(s[1:], 2) / 2.**(len(s) - 1) 
```

它假定字符串以点开头。如果您想要更一般的东西，以下将处理整数和小数部分：

```
def parse_bin(s):
    t = s.split('.')
    return int(t[0], 2) + int(t[1], 2) / 2.**len(t[1]) 
```

例如：

```
In [56]: parse_bin('10.11')
Out[56]: 2.75 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T20:30:02.297

压制点而不是在其上分裂是合理的，如下所示。这个 bin2float 函数（与上一个答案中的 parse_bin 不同）正确处理没有点的输入（在这种情况下返回整数而不是浮点数除外）。

例如，调用`bin2float('101101')`bin2float('.11101') `, and`bin2float('101101.11101')` 分别返回 45、0.90625、45.90625。

```
def bin2float (b):
    s, f = b.find('.')+1, int(b.replace('.',''), 2)
    return f/2.**(len(b)-s) if s else f 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-03T01:34:44.420

如果您将硬编码的“2”替换为该基数，您实际上可以概括詹姆斯的代码以将其从任何数字系统转换。

```
def str2float(s, base=10):
    dot, f = s.find('.') + 1, int(s.replace('.', ''), base)
    return f / float(base)**(len(s) - dot) if dot else f 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-16T21:15:57.327

You can use the [Binary fractions](https://pypi.org/project/binary-fractions/) package. With this package you can convert binary-fraction strings into floats and vice-versa.

Example:

```
>>> from binary_fractions import Binary
>>> float(Binary("0.1"))
0.5
>>> str(Binary(0.5))
'0b0.1' 
```

It has many more helper functions to manipulate binary strings such as: shift, add, fill, to_exponential, invert...

PS: Shameless plug, I'm the author of this package.

# css - 旋转时文字混乱

> ID：13662935
> 
> 赞同：1
> 
> 时间：2012-12-01T19:31:42.177
> 
> 标签：css, text-rendering

我的网站上有文本旋转 45 度的区域，不幸的是，有时该文本的渲染会搞砸。例如，在使用 FF 和 chrome 的 linux 上看起来还不错，但是在 windows 上的相同浏览器上看起来很糟糕。然而，IE 9-10 完美地呈现了旋转的文本。有什么办法可以克服这个乱七八糟的文字吗？

这是一个示例： [示例](http://jsfiddle.net/wnuPP/1/)

```
.wrap {height:200px; width:200px; position: absolute; top:100px;left:100px;-webkit-transform: rotate(45deg);-moz-transform: rotate(45deg);-o-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);}.test1 {background: green; width:150px; height:30px; color:white;text-align: center;line-height:30px;font-family:arial; font-size:12px;font-weight:bold;}​ 
```

PS 我不能使用图像来替换文本，我需要旋转的动态文本。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T19:40:09.593

See [Wonky text anti-aliasing when rotating with webkit-transform in Chrome](https://stackoverflow.com/questions/6846953/wonky-text-anti-aliasing-when-rotating-with-webkit-transform-in-chrome).

The answer there recommends amending your transformation with an additional transform that triggers the 3-D processing:

```
-webkit-transform: rotate(.7deg) translate3d( 0, 0, 0); 
```

In addition to the fix offered there, there are a few other tricks used for cleaning up webfont rendering (see [How To: Clean Up Chrome and Safari's Webfont Rendering](http://niteodesign.com/web-design/how-to-clean-up-chrome-and-safaris-webfont-rendering/)). Try adding a barely perceptible `text-shadow` (may or may not work):

```
text-shadow: rgba(255,255,255,0.01) 0 0 1px; 
```

# objective-c - 使用 OpenGL ES 绘制三角形

> ID：13662936
> 
> 赞同：0
> 
> 时间：2012-12-01T19:31:52.397
> 
> 标签：objective-c, xcode, opengl-es, background, coordinates

首先，对不起我的英语，我的问题是：

我正在按照教程学习 OpenGL ES，我必须在屏幕中间绘制一个三角形。在他们显示的图像中，三角形没有接触到屏幕的边缘（我认为这是因为顶点的 z 坐标）

他们告诉我们制作的顶点是那些坐标：

(0.0, 1.0, -3.0) (1.0, 0.0, -3.0) (-1.0, 0.0, -3.0)

该教程不是最新的，所以我使用个人代码进行了操作：

```
//
//  EAGLView.m
//  OpenGlintro
//
//  Created by Arnaud Miguet on 01/12/12.
//  Copyright (c) 2012 Tap‘n'Develop. All rights reserved.
//

#import "EAGLView.h"

@implementation EAGLView

+ (Class) layerClass {
    return [CAEAGLLayer class];
}

- (void)setupVBOs {

    GLuint vertexBuffer;
    glGenBuffers(1, &vertexBuffer);
    glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
    glBufferData(GL_ARRAY_BUFFER, sizeof(Vertices), Vertices, GL_STATIC_DRAW);

    GLuint indexBuffer;
    glGenBuffers(1, &indexBuffer);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Indices), Indices, GL_STATIC_DRAW);

}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        CAEAGLLayer *EAGLLayer = (CAEAGLLayer *) super.layer;
        EAGLLayer.opaque = YES;

        context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];

        if (!context || ![EAGLContext setCurrentContext:context]) {
            [self release];
            return nil;
        }

        glEnable (GL_DEPTH_TEST);

        GLuint framebuffer , renderbuffer;

        glGenBuffers(1, &framebuffer);
        glGenBuffers(1, &renderbuffer);

        glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);
        glBindRenderbuffer(GL_RENDERBUFFER, renderbuffer);

        [context renderbufferStorage:GL_RENDERBUFFER fromDrawable:EAGLLayer];
        glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, renderbuffer);
        glViewport(10, 0, CGRectGetWidth(frame), CGRectGetHeight(frame));
        [self compileShaders];
        [self setupVBOs];
        [self render];
    }
    return self;
}

- (void)render {
    glClearColor(0.7, 0.7, 0.7, 1.0);

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

    // 1
    glViewport(0, 0, self.frame.size.width, self.frame.size.height);

    // 2
    glVertexAttribPointer(_positionSlot, 3, GL_FLOAT, GL_FALSE,
                          sizeof(Vertex), 0);
    glVertexAttribPointer(_colorSlot, 4, GL_FLOAT, GL_FALSE,
                          sizeof(Vertex), (GLvoid*) (sizeof(float) * 3));

    // 3
    glDrawElements(GL_TRIANGLES, sizeof(Indices)/sizeof(Indices[0]),GL_UNSIGNED_BYTE, 0);

    [context presentRenderbuffer:GL_RENDERBUFFER];
}

- (GLuint)compileShader:(NSString*)shaderName withType:(GLenum)shaderType {

    // 1
    NSString* shaderPath = [[NSBundle mainBundle] pathForResource:shaderName
                                                           ofType:@"glsl"];
    NSError* error;
    NSString* shaderString = [NSString stringWithContentsOfFile:shaderPath
                                                       encoding:NSUTF8StringEncoding error:&error];
    if (!shaderString) {
        NSLog(@"Error loading shader: %@", error.localizedDescription);
        exit(1);
    }

    // 2
    GLuint shaderHandle = glCreateShader(shaderType);

    // 3
    const char * shaderStringUTF8 = [shaderString UTF8String];
    int shaderStringLength = [shaderString length];
    glShaderSource(shaderHandle, 1, &shaderStringUTF8, &shaderStringLength);

    // 4
    glCompileShader(shaderHandle);

    // 5
    GLint compileSuccess;
    glGetShaderiv(shaderHandle, GL_COMPILE_STATUS, &compileSuccess);
    if (compileSuccess == GL_FALSE) {
        GLchar messages[256];
        glGetShaderInfoLog(shaderHandle, sizeof(messages), 0, &messages[0]);
        NSString *messageString = [NSString stringWithUTF8String:messages];
        NSLog(@"%@", messageString);
        exit(1);
    }

    return shaderHandle;

}

- (void)compileShaders {

    // 1
    GLuint vertexShader = [self compileShader:@"SimpleVertex"
                                     withType:GL_VERTEX_SHADER];
    GLuint fragmentShader = [self compileShader:@"SimpleFragment"
                                       withType:GL_FRAGMENT_SHADER];

    // 2
    GLuint programHandle = glCreateProgram();
    glAttachShader(programHandle, vertexShader);
    glAttachShader(programHandle, fragmentShader);
    glLinkProgram(programHandle);

    // 3
    GLint linkSuccess;
    glGetProgramiv(programHandle, GL_LINK_STATUS, &linkSuccess);
    if (linkSuccess == GL_FALSE) {
        GLchar messages[256];
        glGetProgramInfoLog(programHandle, sizeof(messages), 0, &messages[0]);
        NSString *messageString = [NSString stringWithUTF8String:messages];
        NSLog(@"%@", messageString);
        exit(1);
    }

    // 4
    glUseProgram(programHandle);

    // 5
    _positionSlot = glGetAttribLocation(programHandle, "Position");
    _colorSlot = glGetAttribLocation(programHandle, "SourceColor");
    glEnableVertexAttribArray(_positionSlot);
    glEnableVertexAttribArray(_colorSlot);
}

typedef struct {
    float Position[3];
    float Color[4];
} Vertex;

const Vertex Vertices[] = {
    {{0.0, 1.0, -2}, {1, 0, 0, 1}},
    {{1.0, 0.0, -2}, {1, 0, 0, 1}},
    {{-1.0, 0.0, 0}, {1, 0, 0, 1}}
};

const GLubyte Indices[] = {
    0,1,2
};
/*
 // Only override drawRect: if you perform custom drawing.
 // An empty implementation adversely affects performance during animation.
 - (void)drawRect:(CGRect)rect
 {
 // Drawing code
 }
 */

@end 
```

但是由于在 z=-1 坐标处绘制的背景，顶点没有出现......有人可以帮助我吗？我找不到任何解决方案...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T01:16:35.150

乍一看，您的渲染函数似乎只被调用一次，在 viewDidLoad 中。这应该在具有持续更新的方法中实现，例如 drawRect。

OpenGL ES 的学习曲线非常陡峭，在 iOS 中，您可以通过实现 GLKit 框架来帮助自己。它为您节省了对不同类型缓冲区的所有调用，并为您处理绘制/更新函数的大部分样板代码。

本教程是一个很好的起点： [http ://www.raywenderlich.com/5223/beginning-opengl-es-2-0-with-glkit-part-1](http://www.raywenderlich.com/5223/beginning-opengl-es-2-0-with-glkit-part-1)

# javascript - 如何为左侧对象设置动画以匹配与窗口宽度相同的像素宽度

> ID：13662942
> 
> 赞同：0
> 
> 时间：2012-12-01T19:32:16.660
> 
> 标签：javascript, jquery, jquery-animate

当我单击时，`.trigger`我希望定位在的对象`{left: '0'}`向左移动以将相同的像素与浏览器窗口的像素宽度相匹配。有人可以帮我解决这个问题。到目前为止，这是我一起工作的，我无法弄清楚需要追求的功能`else.. {left: 'pixel width of browser window'}`

```
$(document).ready(function() {
    // Prompt
    $('.trigger').live('click', toggleName);

    function toggleName() {
        if ($("#some-id").attr('data-state') == 'open') $("#some-id").animate({
            left: '0'
        }, 500, 'easeOutExpo', function() {
            $(this).attr('data-state', 'close')
        }), ;
        else $("#some-id").animate({
            left: 'pixel width of browser window'
        }, 500, 'easeOutExpo', function() {
            $(this).attr('data-state', 'open')
        }), ;
        return false;
    }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:38:39.567

Use the [width](http://api.jquery.com/width/) function to get the width of the window :

```
 else $("#some-id").animate({
        left: $(window).width()
 }, ... 
```

This will move the div to the right and let it leave the window (depending on your css).

If you want the div to go stick to the right, you'd better use `right: 0` instead.

# asp.net - Manipulate Querystring in Classic ASP

> ID：13662947
> 
> 赞同：0
> 
> 时间：2012-12-01T19:33:11.053
> 
> 标签：asp.net, asp-classic

I have a site that I support which is a mixture of classic ASP and ASP.NET. My goal is to encrypt the querystring in a manner that is transparent to the user. On the ASP.NET side I am using a approach similar to what Mads Kristensen has put together here: [http://madskristensen.net/post/HttpModule-for-query-string-encryption.aspx](http://madskristensen.net/post/HttpModule-for-query-string-encryption.aspx)

My problem is how can I replicate this on the classic ASP side? The HttpModule wont work for classic ASP as those requests are handled outside of the ASP.NET page life cycle so I have been looking at handling this in the Global.asa with no luck so far. To replicate the httpmodule I would need to get a hold of the HttpContext and I havent found a vbscript equivalent. I am a bit stuck any assistance or suggestions would be appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T22:13:57.547

Mads Kristensen 在他的加密和解密函数中使用 Rijndael 密码 (AES)，因此您需要在经典 ASP 中重新创建这些函数。以下页面可以帮助您：

使用 AES 的简短教程是 VBScript：[http](http://www.example-code.com/vbscript/AesIv.asp)
://www.example-code.com/vbscript/AesIv.asp 该模块位于： http: [//www.chilkatsoft.com/refdoc/xChilkatCrypt2Ref.html](http://www.chilkatsoft.com/refdoc/xChilkatCrypt2Ref.html)

**但是**，您也可以将“QueryStringModule.cs”类公开为 COM 对象，并将其部署到您的经典 ASP 页面。

参考：http: [//msdn.microsoft.com/en-us/library/c3fd4a20.aspx](http://msdn.microsoft.com/en-us/library/c3fd4a20.aspx)

# xcode - pdf reader online files

> ID：13662959
> 
> 赞同：0
> 
> 时间：2012-12-01T19:35:05.347
> 
> 标签：xcode, pdf

I use a PDF reader called vfr to read local pdf files. I also tried to read online pdf files but it didn't work.

This the code:

```
- (IBAction)didClickOpenPDF {

    NSString *pdfURL = @"www.ciep.fr/tcf/document/manuel_candidat.PDF";
    ReaderDocument *document = [ReaderDocument withDocumentFilePath:pdfURL password:nil];

    if (document != nil)
    {
        ReaderViewController *readerViewController = [[ReaderViewController alloc] initWithReaderDocument:document];
        readerViewController.delegate = self;

        readerViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
        readerViewController.modalPresentationStyle = UIModalPresentationFullScreen;

        [self presentModalViewController:readerViewController animated:YES];
    }
} 
```

[Link to ZIP file.](http://cl.ly/2V0q3O2T230B)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T14:52:35.303

您可以制作以下 senario ...

```
 1 - Save the file to the local storage

  2 - read the full path/local url of the downloaded file

  3 - invoke didClickOpenPDF with the path/local url of the PDF 
```

我有保存问题，我用这个 senario 解决了它

# python - Python - 我之前定义了变量，但它们在一个函数中不起作用

> ID：13662965
> 
> 赞同：1
> 
> 时间：2012-12-01T19:35:43.923
> 
> 标签：python, variables, function

在 Python 脚本的最开始，我已经定义了很多变量。例如：

```
cmd_attack = "attack"
cmd_protect = "protect"
cmd_help = "help" 
```

cmd_help 在此处显示的用户菜单功能中工作：

```
def usermenu():
    um_in=raw_input('Menu :: ')
    #Help Command
    if um_in.lower()==cmd_help.lower():
        print(helplist)
        usermenu() 
```

那是成功的——它打印帮助列表，然后返回到原始输入。但是，当我在另一个函数中执行涉及 cmd_help 的类似操作时......

```
def tf_elf_battle_merc():
    battleinput==raw_input('Elf :: ')
    global cmd_help
    global cmd_attack
    global cmd_protect
    if battleinput.lower()==cmd_attack.lower():
        attack_merc()
    elif battleinput.lower()==cmd_help.lower():
        print(tf_elf_help) 
```

什么都不做，不打印任何错误，然后返回到 shell 行——不打印任何东西或去任何地方。我使用全局命令是因为我正在测试问题的可能解决方案。这些放置的顺序是顶部的 CMD 函数，中间的 tf_elf_battle_merc() 和最后的 usermenu()。我已经尝试了一些事情，但相关问题没有帮助......有什么想法吗？我对 Python 有点陌生。如果您很好奇，它是您可以登录并玩文本类型游戏的脚本。

[完整的脚本在 Pastebin 上。](http://pastebin.com/H9bXKLhW)

先感谢您！

编辑：如果您下载并运行脚本 - 使用“Guest”（区分大小写）作为用户名，您将被允许进入它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:40:24.147

`battleinput==raw_input('Elf :: ')`更改为后，您的代码（进行了一些编辑，如下所示）对我来说效果很好`battleinput=raw_input('Elf ::')`，您不想比较它们，而是想定义`battleinput`.

但是，它应该会引发错误，因为`battleinput`未定义，但您正在尝试比较它：`if battleinput.lower() == ...`.

你也在混合 Python 3 和 Python 2 吗？`raw_input()`从 Python 2开始使用，`print("asd")`但从 Python 3 开始，而不是 Python 2 的`print "asd"`？

一切看起来都像您的代码永远无法到达，问题出在其他地方。

* * *

这是 Python 3 的代码，可以正常工作：

```
cmd_attack = "attack"
cmd_protect = "protect"
cmd_help = "help"

def tf_elf_battle_merc():
    battleinput=input('Elf :: ') # Use raw_input() for Python 2
    # You don't need the globals here
    if battleinput.lower()==cmd_attack.lower():
        print("attack")
    elif battleinput.lower()==cmd_help.lower():
        print("help")

tf_elf_battle_merc() 
```

# c - 如何创建一个包含 32 位和 64 位二进制文 件的应用程序，并在操作系统上运行相应的应用程序？

> ID：13662969
> 
> 赞同：2
> 
> 时间：2012-12-01T19:36:07.607
> 
> 标签：c, windows, visual-studio

我做了一个应用程序，我必须编译它的 32 位和 64 位版本。我看到了一些应用程序，例如 ProcessExplorer 的作用如下。在 32 位操作系统上，它运行 32 位应用程序，但在 64 位操作系统上，它会提取同一个 exe 的 64 位版本，这将被执行。那么我怎样才能从我的应用程序中制作这样的应用程序呢？我应该在 Visual Studio 中进行哪些设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T21:17:19.607

流程浏览器的工作方式如下：

*   您下载一个 32 位可执行文件。
*   当您在 32 位操作系统上运行该可执行文件时，就是这样。
*   当您在 64 位操作系统上运行该可执行文件时，32 位进程会在启动时检测到该文件，并在磁盘上提取一个 64 位可执行文件，该可执行文件作为资源存储在 32 位进程中。然后它运行那个 64 位的可执行文件。

Visual Studio 中没有任何设置可以为您自动执行该过程。你必须自己写那部分。您可以有一个首先构建 64 位版本的构建过程。然后您可以将该可执行文件编译成链接到 32 位进程的资源。这是你运送的。

我自己不相信所有的努力都值得。就我个人而言，我倾向于发布两个不同的可执行文件，但我想只有你知道你自己的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T21:17:10.933

为什么不让安装程序根据操作系统安装适当的版本，并为任一操作系统赋予该可执行文件相同的名称？

# iphone - Custom Navigation Bar Buttons

> ID：13662971
> 
> 赞同：1
> 
> 时间：2012-12-01T19:36:12.010
> 
> 标签：iphone, xcode, cocoa-touch, uinavigationbar, uibarbuttonitem

I have custom Navigation Bar with metallic style.

It's pretty simple in iOS 5+.

You may change all your Navigation Bars by this code:

```
UIImage *navBackground =[[UIImage imageNamed:@"navigationBar.png"]    resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
[[UINavigationBar appearance] setBackgroundImage:navBackground forBarMetrics:UIBarMetricsDefault]; 
```

But what about buttons? Do I need to make background images for all button sizes to fit navigation bar style? It's gonna be hard if your app localized.

But there are Apple's Apps with custom navigation bars: - Notes; - Reminders;

It seems to me that there is no images for each button for each size. They just somehow make navigation bar color darker to look like buttons.

Any help?

# c# - List Google App Users and handle Select\Update\Delete operations on users Drive using Admin account(.NET)

> ID：13662974
> 
> 赞同：1
> 
> 时间：2012-12-01T19:36:21.810
> 
> 标签：c#, google-app-engine, google-apps, google-drive-api

Does any one know

1.  How to get list of users and groups from Google Apps Account? (with some APIs which are not deprecated now)

2.  Perform basic operations on files inside any normal users Drive account using Administrator account of Google APPs using Google Drive SDK in **.NET**.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T21:15:43.420

1) 您可以使用 Provisioning API 来检索 Google Apps 域中的用户和组列表：[https ://developers.google.com/google-apps/provisioning/](https://developers.google.com/google-apps/provisioning/)

2) 检查 Google Apps 域范围的授权：[https ://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)

# c# - 我的 XNA 应用程序无法正确呈现

> ID：13662976
> 
> 赞同：2
> 
> 时间：2012-12-01T19:36:31.560
> 
> 标签：c#, windows-phone-7, xna, vertex-buffer

我正在尝试使用 XNA 中的自定义顶点数据渲染三角形，但输出完全混乱：

![在此处输入图像描述](../Images/f609bb468d6b16d8003c1a77244e46f8.png)

我的 GPU (Radeon HD7610M) 支持 DX11。

要么我做错了什么，要么是我的 GPU 驱动程序。

这是我的代码：

```
public class MyGame : Microsoft.Xna.Framework.Game
{
    GraphicsDeviceManager graphics;
    VertexBuffer vertexBuffer;
    VertexPositionColor[] vertices;
    BasicEffect effect;

    public MyGame()
    {
        graphics = new GraphicsDeviceManager(this);
        Content.RootDirectory = "Content";
        TargetElapsedTime = TimeSpan.FromTicks(333333);
        InactiveSleepTime = TimeSpan.FromSeconds(1);
    }
    protected override void Initialize()
    {
        base.Initialize();
    }

    protected override void LoadContent()
    {
        effect = new BasicEffect(GraphicsDevice);
        effect.VertexColorEnabled = true;

        vertices = new VertexPositionColor[]
        {
            new VertexPositionColor(new Vector3(-0.8F, -0.8F, 0), Color.Black),
            new VertexPositionColor(new Vector3(-0.8F,  0.8F, 0), Color.Black),
            new VertexPositionColor(new Vector3( 0.8F, -0.8F, 0), Color.Black),
            //new VertexPositionColor(new Vector3( 0.8F,  0.8F, 0), Color.Black),
        };

        vertexBuffer = new VertexBuffer(GraphicsDevice, VertexPositionColor.VertexDeclaration, vertices.Length, BufferUsage.WriteOnly);
        vertexBuffer.SetData<VertexPositionColor>(vertices);
    }

    protected override void UnloadContent() {}

    protected override void Update(GameTime gameTime)
    {
        if (GamePad.GetState(PlayerIndex.One).Buttons.Back == ButtonState.Pressed)
            this.Exit();

        base.Update(gameTime);
    }

    protected override void Draw(GameTime gameTime)
    {
        GraphicsDevice.Clear(Color.CornflowerBlue);
        GraphicsDevice.SetVertexBuffer(vertexBuffer);

        foreach (EffectPass pass in effect.CurrentTechnique.Passes)
        {
            pass.Apply();
            GraphicsDevice.DrawPrimitives(PrimitiveType.TriangleList, 0, 1);
        }

        base.Draw(gameTime);
    }
} 
```

我对 XNA 很陌生。难道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-02T10:51:22.120

修复。

我不得不将 GDM 设置为全屏：

```
graphics.IsFullScreen = true; 
```

或显式设置后台缓冲区的尺寸：

```
graphics.PreferredBackBufferWidth = width;
graphics.PreferredBackBufferWidth = height; 
```

# matlab - Matlab：按每列不同元素的大小对矩阵列进行排序

> ID：13662979
> 
> 赞同：0
> 
> 时间：2012-12-01T19:37:04.207
> 
> 标签：matlab, sorting

我们有一个矩阵：

```
Index:    1 2 3 4 5 6 

Elements:
          0 2 0 5 9 8 
          1 0 5 0 5 4
          0 1 0 0 6 0 
```

是否可以按每列不同元素的大小进行排序？结果应该是这样的：

```
 Index:     5 2 6 1 3 4 

  Elements:
             9 2 8 0 0 5 
             5 0 4 1 5 0
             6 1 0 0 0 0 
```

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-01T20:02:27.613

使用“length”和“unique”函数，您可以检索每列的不同值的数量（包括零），例如：

```
for n=1:size(a,2)
  b(n)=length(unique(a(:,n)));
end 
```

如果你想忽略零，你可以使用

```
b(n)=sum(unique(a(:,n)) ~= 0); 
```

它给出了一个数组，其中包含每列的不同元素的数量：

```
b =    1     2     1     1     3     2 
```

然后您可以对该数组进行排序并使用有序索引对矩阵进行排序：

```
[~, index]=sort(b, 'descend');
result = a(:, index) 
```

# ruby - 红宝石放置命令

> ID：13662982
> 
> 赞同：1
> 
> 时间：2012-12-01T19:37:20.370
> 
> 标签：ruby, irb

我刚刚开始学习“Ruby”（比如 2 分钟前），在谷歌上搜索[教程](http://www.ruby-lang.org/en/documentation/quickstart/)

我正在尝试`puts`命令，我不小心写了

```
irb(main):005:0> puts "nil:
irb(main):006:0" puts :
irb(main):007:0" puts "nil:
irb(main):008:0* puts "nil:
irb(main):009:0" puts "nil:
irb(main):010:0* 
```

`>`我注意到提示的变化`"`然后`*`，我真的不知道它是什么，有人可以解释刚刚发生的事情吗？

谢谢 ：）

顺便说一句，如果它很重要，我已经下载了这个[ruby​​ 安装程序](http://rubyinstaller.org/downloads/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T19:51:24.403

我想知道你为什么不关闭你的字符串？

应该：

```
puts "nil:" 
```

从 更改`>`为`"`表示它正在等待更多输入

从`"`to更改`*`为语句的开头-在第 3 行中，您关闭了字符串并使用了`nil`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T19:51:18.480

IRB 正在等待您完成字符串，就像@peterpan 所说，IRB 能够处理多行。

`*`您看到的是因为当您编写最后一个字符串时，`puts "nil:`您实际上是在关闭第一个字符串，而 IRB 现在看到的是 hash 的开头`nil:`，因此它期望 key 的值`nil`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-01T19:43:41.810

IRB 期待一个字符串的结尾。您第一次没有关闭您的字符串，因此提示会使用“。字符串可以跨越 irb 提示中的多行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-20T22:49:12.387

按住控制键并点按 C。这将清除您。它正在等待更多的输入。您需要将命令用作

```
puts "nil:"
puts "string here"
puts variable_here 
```

# java - 以编程方式创建饼图

> ID：13662984
> 
> 赞同：11
> 
> 时间：2012-12-01T19:37:27.167
> 
> 标签：java, pie-chart

如何以编程方式从 java 生成饼图？我有一些由程序处理的数据，然后我想创建一个具有饼图的图像文件（PNG、GIF 等）。有没有一个图书馆可以做到这一点，或者至少我可以用它来做到这一点？

或者，使用将在 JFrame 中绘制饼图然后以某种方式自动截屏的库会更好吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-06-13T22:52:51.097

您可以使用[XChart](https://github.com/timmolter/XChart)库，这是一个非常轻量且直接的 Java 图表库。以下代码将创建一个饼图。您还可以右键单击图表并保存为不同的位图类型，包括 PNG、JPG、BMP、SVG、EPS 和 PDF。免责声明，我是 XChart 库的主要开发者。

```
public class PieChartDemo {

  public static void main(String[] args) throws IOException {

    // Create Chart
    PieChart chart = new PieChartBuilder().width(800).height(600).title("My Pie Chart").theme(ChartTheme.GGPlot2).build();

    // Customize Chart
    chart.getStyler().setLegendVisible(false);
    chart.getStyler().setAnnotationType(AnnotationType.LabelAndPercentage);
    chart.getStyler().setAnnotationDistance(1.15);
    chart.getStyler().setPlotContentSize(.7);
    chart.getStyler().setStartAngleInDegrees(90);

    // Series
    chart.addSeries("Prague", 2);
    chart.addSeries("Dresden", 4);
    chart.addSeries("Munich", 34);
    chart.addSeries("Hamburg", 22);
    chart.addSeries("Berlin", 29);

    // Show it
    new SwingWrapper(chart).displayChart();

    // Save it
    BitmapEncoder.saveBitmap(chart, "./Sample_Chart", BitmapFormat.PNG);

    // or save it in high-res
    BitmapEncoder.saveBitmapWithDPI(chart, "./Sample_Chart_300_DPI", BitmapFormat.PNG, 300);
  }

} 
```

[![在此处输入图像描述](../Images/59d409f29cdc9778eacaeb79900a2556.png)](https://i.stack.imgur.com/dTwNi.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-01T19:48:22.907

[JFreeChart](http://www.jfree.org/jfreechart/)可以生成饼图*并*可以将生成的图表保存为 JPEG 格式。这是一个如何执行此操作的[示例。](http://robbamforth.wordpress.com/2008/11/05/java-jfreechart-how-to-save-a-jcfreechart-to-jpeg-file/)这是一个[3D 示例](http://www.java2s.com/Code/Java/Chart/JFreeChartPieChart3DDemo4withacustomlabelgenerator.htm)。

[开发人员指南](http://www.object-refinery.com/jfreechart/guide.html)中提供了更多示例和文档。

其他生成饼图的图表库：

*   [Charts4J](http://charts4j.googlecode.com/)
*   [EasyCharts（商业）](http://www.objectplanet.com/easycharts/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-06-25T20:25:17.797

这是一个很好的，不需要使用任何第三方库

==============================

```
import java.awt.Color;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Rectangle;

import javax.swing.JComponent;
import javax.swing.JFrame;

class Slice {
   double value;
   Color color;
   public Slice(double value, Color color) {  
      this.value = value;
      this.color = color;
   }
}
class PieChart3 extends JComponent {
   Slice[] slices = { new Slice(5, Color.black), 
   new Slice(33, Color.green),
   new Slice(20, Color.yellow), new Slice(15, Color.red) };
   PieChart3() {}
   public void paint(Graphics g) {
      drawPie((Graphics2D) g, getBounds(), slices);
   }
   void drawPie(Graphics2D g, Rectangle area, Slice[] slices) {
      double total = 0.0D;
      for (int i = 0; i < slices.length; i++) {
         total += slices[i].value;
      }
      double curValue = 0.0D;
      int startAngle = 0;
      for (int i = 0; i < slices.length; i++) {
         startAngle = (int) (curValue * 360 / total);
         int arcAngle = (int) (slices[i].value * 360 / total);
         g.setColor(slices[i].color);
         g.fillArc(area.x, area.y, area.width, area.height, 
         startAngle, arcAngle);
         curValue += slices[i].value;
      }
   } 
```

# android - Can android NOW handle text to speech in a call?

> ID：13662985
> 
> 赞同：1
> 
> 时间：2012-12-01T19:37:37.320
> 
> 标签：android, text-to-speech

I have been browsing around for the last few days trying to find some stuff about text to speech in android. Allot of questions were answered in that time, however I am wondering about it possibly being used in a voice call.

I know that previous questions asked (In 2010) said no because it would not be audible to the other participant of the call. I am wondering if there is anything new that might allow this to work on the newer SDK's?

Here is to hoping!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T19:48:27.790

您无法访问和操作电话服务，因此无法在通话期间播放自定义音频。

# python - aggregating datetime objects in python to the hour

> ID：13662987
> 
> 赞同：0
> 
> 时间：2012-12-01T19:37:39.620
> 
> 标签：python, datetime

I have a list of datetime objects in python and want to aggregate them by the hour. For example if I have a datetime object for

```
[03/01/2012 00:12:12,
 03/01/2012 00:55:12,
 03/01/2012 01:12:12,
 ...] 
```

I want to have a list of datetime objects for every hour along with a count of the number of datetime objects I have that fall into that bucket. For my example above I would want output of `[03/01/2012 00:00:00, 03/01/2012 01:00:00]` in one list and a count of the entries in another list: `[2,1]`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T19:53:11.010

您可以使用字典有效地存储此类数据，其中键是小时，值是日期时间对象的列表。例如（未经测试）：

```
l = [datetime.datetime.now(), datetime.datetime.now()] #...etc.
hour_quantization = {}
for dt in l:
    if dt.hour not in hour_quantization:
        hour_quantization[dt.hour] = [dt]
    else:
        hour_quantization[dt.hour].append(dt)

counts = [len(hour_quantization[hour]) for hour in hour_quantization.keys()] 
```

请参阅[日期时间的文档条目](http://docs.python.org/2/library/datetime.html#module-datetime)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:57:48.823

假设您有一个日期时间对象列表，您可以计算每小时有多少个：

```
from collections import Counter
hours = [t.hour for t in ts]
Counter(hours) 
```

这会给你：

```
Counter({0: 2, 1: 1}) 
```

# actionscript-3 - AS3 参数错误 #1063 ... 预期 1 得到 0

> ID：13662990
> 
> 赞同：0
> 
> 时间：2012-12-01T19:37:52.587
> 
> 标签：actionscript-3, flash, apache-flex, actionscript-2, flex4.5

所以我上了一个非常基础的课

```
package  {

    import flash.display.MovieClip;

    public class XmlLang extends MovieClip {

        public function XmlLang(num:int) {
            trace(num);
        }
    }
} 
```

和第一帧的对象：

```
var teste:XmlLang = new XmlLang(1); 
```

我收到此错误：

ArgumentError：错误 #1063：XmlLang() 上的参数计数不匹配。预期 1，得到 0

我究竟做错了什么？非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T20:32:23.243

您的设置有问题。我拿走了你的代码并实现了它并且它有效。

这就是我所做的。我在 AS3 中创建了一个新的 test.fla 文件，并将以下代码放在第 1 帧 - 舞台上没有对象，只有第 1 帧中的代码。

```
import XmlLang;

var teste:XmlLang = new XmlLang(1);
stop(); 
```

创建了一个 XmlLang.as 文件，完全复制您的代码并将其保存在与 test.fla 相同的文件夹中。编译得到trace 1

所以我不确定发生了什么。您运行的是什么版本的 Flash？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T22:23:07.530

不确定这是否是您的情况，但对于未来的谷歌用户：当您尝试初始化向量但忘记`new`关键字时会收到此错误消息。

所以这：

```
var something:Vector.<Something> = Vector.<Something>(); 
```

会给你一个错误，说`Something`参数计数不匹配。正确的行是：

```
var something:Vector.<Something> = new Vector.<Something>(); 
```

难以一目了然的错误。我花了几分钟在我的代码中找到它，特别是因为它并没有真正给你错误行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-01T21:07:02.777

我希望您有一个位于舞台上的 XmlLang 实例，它将使用具有 0 参数的构造函数来构造，就像普通的 MovieClip 一样。要检查这一点，请将构造函数头更改为：

```
public function XmlLang(num:int = 0) { 
```

这样，如果某些东西会在没有提供参数的情况下实例化 XmlLang，则新实例将接收 0（默认值）作为参数。然后您检查您的跟踪输出，我预计会出现一个或多个零，然后是 1。

# objective-c - Access another classes properties, returning 0

> ID：13662991
> 
> 赞同：0
> 
> 时间：2012-12-01T19:37:52.600
> 
> 标签：objective-c

still having problems!

I have 2 classes, and i want to access the properties of one class from the other.

I have a class called MenuViewController, which is a Facebook styled popout menu, and depending on which cell is selected, i want to load different data.

I have created a property:

```
@property int rowSelected; 
```

and synthesized it:

```
@synthesize rowSelected; 
```

and in my other class, i have created an instance of the class:

```
MenuViewController *menu = [[MenuViewController alloc] init];

NSInteger rowValue = menu.rowSelected; 
```

and when i NSLog it, it always returns 0...

```
NSLog(@"%i", menu.rowSelected); 
```

Help is much appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-01T20:08:54.827

调用`alloc`创建一个**新** `MenuViewController`实例。除非您在其方法中为您的属性设置一个值，否则`init`您应该期望它为 0。

# iphone - 在 UITableViewCell 中使用 DYRateView

> ID：13662992
> 
> 赞同：1
> 
> 时间：2012-12-01T19:37:53.657
> 
> 标签：iphone, objective-c, ios

又是我。我希望使用 DYRateView（在此处找到：[https](https://github.com/dyang/DYRateView) ://github.com/dyang/DYRateView ）为我的 TableViewCells 添加星级。我目前在 cellForRowAtIndexPath 中使用此代码：

```
DYRateView *rateView = [[DYRateView alloc] initWithFrame:CGRectMake(78, 49, 100, 14)];
    rateView.rate = 4;
    rateView.alignment = RateViewAlignmentRight;
    [cell.contentView addSubview:rateView]; 
```

现在我已经完成了所有基本检查，例如导入头文件并将星图添加到库中，但它只是拒绝工作！如果您能提供任何建议，我将不胜感激。

问候，
迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T21:24:34.760

在互联网上搜索得越来越多后，我发现这个 API 在与 Storyboard 一起使用时存在一个特殊的故障。对于其他有类似问题的人，问题来自`RateViewAlignmentRight;`代码。它似乎在 Storyboard 上的 UITableViewCells 中出错。尝试将其设置为`RateViewAlignmentLeft;`. 向任何开始尝试修复的人道歉，很抱歉浪费您的时间。

希望这会有所帮助，
问候，
迈克

# ruby-on-rails - 如何使用队列工作人员测试操作？

> ID：13662994
> 
> 赞同：1
> 
> 时间：2012-12-01T19:38:10.427
> 
> 标签：ruby-on-rails, ruby, rspec, resque

我有一个`create`看起来`UsersController`像这样的动作

```
def create
  @user = User.new(params[:user])
  if @user.save
    sign_in_as(@user)
    Resque.enqueue(MailWorker, @user.email)
    redirect_to root_url, notice: "Thanks"
  else
    render "new"
  end
end 
```

在添加`reqsue`到此操作之前，我一直在测试这样的电子邮件确认

```
it "creates a new user account" do
  # code for creating a new account...

  ActionMailer::Base.deliveries.size.should == 1
  mail = ActionMailer::Base.deliveries.last
  mail.to.should == [user[:email]]
  mail.body.encoded.should match(/Thank you for registration/)
end 
```

但是现在，由于我添加了 resque worker 来传递消息，我猜它不会立即传递消息，因此我得到这个测试失败并显示消息

```
 Failure/Error: ActionMailer::Base.deliveries.size.should == 1
   expected: 1
        got: 0 (using ==) 
```

当涉及异步工作人员并且结果取决于它们时，我该如何测试这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T20:01:54.867

现在您已经将邮件传递与您的控制器分离，您还可以分离测试。我过去为此所做的是使用[resque_spec Gem](https://github.com/leshill/resque_spec)，它可以让您添加断言，以确定作业是否已按预期排队。

您将在测试中添加类似这样的内容：

```
MailWorker.should have_queued(user.email) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-01T19:57:00.100

看看[rescue_spec](https://github.com/leshill/resque_spec) gem。

# php - 使用 php 显示图像

> ID：13662996
> 
> 赞同：1
> 
> 时间：2012-12-01T19:38:21.487
> 
> 标签：php, html, image

我有以下代码，我打算在 php 部分从 mysql 返回文件路径名，然后在 html 中显示图像。但我只在浏览器中显示了一个小缩略图。顺便说一句，“用户名”和“图像文件”是“图像”表中唯一的列。

我确信这只是一些愚蠢的错误，但我需要一双新的眼睛来发现它。提前非常感谢。PS我知道我真的应该转移到mysqli，但我会在以后简单地翻译。干杯

```
<?php

session_start();
$username = $_SESSION['username'];

$con = mysql_connect('localhost','root','password');
mysql_select_db("db");

$profileimage = mysql_query("

SELECT * FROM images WHERE username='$username'

");

$row = mysql_fetch_array($profileimage);
$showimage = $row['imagefile'];

?>

<html>

<img src = "$showimage">

</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-01T19:45:23.293

首先，HTML 不知道是什么`"$showimage"`意思。那是一个 PHP 变量，HTML 无法解释它。您需要输出它，以便 HTML 可以处理结果。

因此，如果值为`$showimage`is `"/images/foo.jpg"`，您将需要类似以下内容：

```
<img src="<?php echo $showimage; ?>" /> 
```

这会给你

```
<img src="/images/foo.jpg" /> 
```

现在，切换到 mysqli 就像替换`mysql`为`mysqli`. 没有比这更复杂的了。因为看起来你才刚刚开始学习这些东西，所以当你去改进的时候，学习一下 PDO。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-01T19:44:13.027

这是您当前的真实代码还是简化版本？如果这是您的真实代码，问题出在 PHP 变量未知的 HTML 部分，您应该这样做：

```
<html>
<img src ="<?php echo $showimage; ?>" />
</html> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-27T15:55:14.127

```
<?php  
    $db = mysqli_connect("localhost:3306","root","","databasename"); 
    $sql = "SELECT * FROM table_name ";
    $sth = $db->query($sql);
    while($result=mysqli_fetch_array($sth)){    
        echo '<img src="data:image/jpeg;base64,'.base64_encode( $result['image'] ).'" height="100" width="100"/>';
    }
?> 
```

为我工作

# c# - add controls to ajax update panel programatically on click of a button in asp.net

> ID：13662997
> 
> 赞同：0
> 
> 时间：2012-12-01T19:38:26.983
> 
> 标签：c#, asp.net, ajax

i want to add a label to update panel, on button click.. i have following code in .aspx file...

```
 <asp:UpdatePanel ID="up" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="false" >
                   <ContentTemplate >
                       <asp:Panel runat="server" ID="myPanel" >
                        <label id="ssd" runat="server" >abc</label>
                       </asp:Panel>
                       <asp:Button ID="Button1" runat="server" OnClick="Button1_Click"  Text="test"/>
                   </ContentTemplate>
               </asp:UpdatePanel> 
```

and on button click event..

```
protected void Button1_Click(object sender, EventArgs e)
{
    Label l1 = new Label();
    l1.ID = "label1";
    l1.Text = "this is it...";
    up.ContentTemplateContainer.Controls.Add(l1);      
} 
```

but its not working ..:-(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T19:41:47.347

由于`UpdatePanel`的 UpdateMode 设置为`Conditional`，您需要从代码隐藏手动更新它：

```
protected void Button1_Click(object sender, EventArgs e)
{
    Label l1 = new Label();
    l1.ID = "label1";
    l1.Text = "this is it...";
    up.ContentTemplateContainer.Controls.Add(l1); 

    up.Update();     
} 
```

MSDN[**`UpdatePanel.Update`**方法](http://msdn.microsoft.com/en-us/library/system.web.ui.updatepanel.update.aspx)

> 如果您计划使用 Update 方法，请将 UpdateMode 属性设置为 Conditional。如果您希望决定在服务器逻辑中更新面板，请确保 ChildrenAsTriggers 属性为 false，并且没有为面板定义显式触发器。
> 
> 在典型的页面开发场景中，如果您定义了触发器，或者如果 UpdatePanel 控件的 ChildrenAsTriggers 属性为 true，则在页面生命周期中会自动调用 Update 方法。

请注意，即使使用 ASP.NET Ajax，您也需要重新创建动态控件。`page_load`因此，您最迟需要在下一次回发时手动创建标签。