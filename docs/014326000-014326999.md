# StackOverflow 问答 14326000-14326999

# ruby - Time.stub(:now) {fake_time} 到底是做什么的？

> ID：14326000
> 
> 赞同：2
> 
> 时间：2013-01-14T20:21:00.807
> 
> 标签：ruby, rspec

我正在阅读 rspec 教程，我只需要帮助确认以下代码的含义：

```
@eleven_am = Time.parse("2011-1-2 11:00:00")
Time.stub(:now) { @eleven_am } 
```

我想这意味着我要假装现在的时间是 2011 年 1 月 2 日，即使它不是。这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:38:11.037

是的，存根重新定义了一种方法，可以为您的测试做任何决定。通常它们用于避免非确定性方法（例如`Time.now`，显然每次都返回不同的值，因此很难测试），或者掩盖与当前测试无关的方法。

有几种方法可以编写存根。您展示的示例使用块形式，它允许您动态决定方法的返回值，因此可以用于相当复杂的事情（基本上您可以完全重新定义方法，尽管这通常不是一个好主意！ ）。

您可以编写“静态”存根（仅返回一个值，并且与块形式不同，每次都不能重新计算它）。有几种语法：

```
# Hash form, useful for stubbing multiple things at once
Time.stub(:now => @eleven_am, :then => @ten_am)

# and_return, which reads fluently
Time.stub(:now).and_return(@eleven_am) 
```

在您展示的示例中，您*不需要*块形式，因为每次返回的值都是相同的。然后，这只是个人口味的问题，你喜欢哪一个！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:27:14.770

是的，存根方法的作用是拦截您发送的任何消息，而不是在对象上调用该方法，它只是返回您告诉它的值，在本例中为@eleven_am 的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-20T14:59:50.890

以防万一其他人漫步并注意到这一点，我会添加一个警告。 `Time.stub(:now)`仅存根 Time 类。如果您的代码依赖于可能调用 Date 类的任何内容（包括其他库），则需要确保也将其删除，否则您现在在测试中有两个不同的时钟。

# java - 无法正确读取 Milkshape 3D 二进制文件

> ID：14326004
> 
> 赞同：2
> 
> 时间：2013-01-14T20:21:24.267
> 
> 标签：java, file, binary

我希望你能帮我解决这个问题：我正在尝试为 Java 编写一个 Milkshape3D 模型加载器。我在[这里找到了 Milkshape3D 文件格式规范，](http://paulbourke.net/dataformats/ms3d/ms3dspec.h) 并按照它创建了我的代码，如下所示，我仍然缺少一些类，但是这个问题现在出现了；使用 DataInputStream 对象，我应该能够通过我想要的任何数据类型读取文件，例如使用 readChar() 我应该能够读取文件头中的所有字符，应该是“MS3D000000”，但是当我使用readChar() 只获取“M”，它返回一个奇怪的符号，即使我跳过前 10 个字节来读取版本号，它返回一个与 3 非常不同的数字！！

我不知道该怎么办，你能解释一下我做错了什么吗？该模型可以在[这里找到](http://www.mediafire.com/?rjles6exz8fsl62)

```
package milkshape3d_loader;

import java.io.DataInputStream;
import java.io.File;
import java.io.FileInputStream;

class ms3d_header_t {
    char[]  id;         // always "MS3D000000"
    int     version;    // 3
    ms3d_header_t() {
        id = new char[] {'M','S','3','D','0','0','0','0','0','0'};
        version = 3;
    }
}

public class Milkshape3D_Loader {

    public static void main(String[] args) {

        try {
            File inFile = new File ("dy_joey.ms3d");
            FileInputStream inStream = new FileInputStream (inFile);
            DataInputStream input = new DataInputStream (inStream);

            char id = input.readChar();
            System.out.println (id);

        }

        catch (Exception e) {
        System.out.println (e.getMessage());
        e.printStackTrace();
        }        
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:26:04.383

`readChar`读取两个字节并将它们解释为`char`一个 16 位 UTF-16 代码单元。“奇怪的符号”大概是 U+4D53，由对应于 ASCII M 和 S 的字节表示的 Unicode 字符。您可能需要使用单独读取每个字节

```
char id = (char)input.readUnsignedByte(); 
```

# node.js - 使用 Mongoose 在数组中搜索 _id

> ID：14326005
> 
> 赞同：1
> 
> 时间：2013-01-14T20:21:26.030
> 
> 标签：node.js, mongodb, express, mongoose

这是代码：

```
usermodel.findOne({"imagen._id": req.params.id }, {imagen: 1}, function (err, imagen){

    if(err) throw err;
    console.log(req.params.id + '\n');
    console.log(imagen);

    res.send(imagen);

}); 
```

这是架构：

```
var userschema = new mongoose.Schema({

  user: String,
  imagen: [{ 

              title: String,
              name: String,
              author: String,

           }]

}); 
```

我试图得到这样的输出：

```
{  title: 'DQ monstes',
   name: 'fooname.png',
   author: 'fooauthor',
} 
```

但我明白了：

```
{ _id: 50f41ccff405ef73c4000006,
imagen: 
 [ { title: 'Pokemon',
   name: 'random.png',
   author: 'fooauthor',
},
  { title: 'DQ monstes',
    name: 'fooname.png',
    author: 'fooauthor',
} 
```

`_id`开头是`req.params._id`我在寻找的`usermodel.findOne`。我也收到此错误：

```
/Users/rodrie/Documents/node/node_modules/mongoose/lib/utils.js:434
     throw err;
           ^
TypeError: Cannot read property '_id' of null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:16:51.863

是的，查找将始终返回完整的文档。如果您需要修改返回的结果提取部分，您需要使用聚合框架[http://docs.mongodb.org/manual/applications/aggregation/](http://docs.mongodb.org/manual/applications/aggregation/)。但是请注意，聚合框架不会返回游标，因此如果您迭代超过 16MB 的文档，它将无济于事，因为它将返回具有高达 16MB 结果的单个文档。

# c# - MVC3 中的 URL 重写

> ID：14326006
> 
> 赞同：0
> 
> 时间：2013-01-14T20:21:31.100
> 
> 标签：c#, asp.net-mvc-3, url-rewriting

我有一个页面通过 GET 或 POST 传递其 id 来显示帖子。

*例如：www.example.com/post/viewpost?id=PostTiTle*

但我想像这样**实现**： **www.example.com/post/PostTiTle**

所以 post id 应该在使用单个控制器的 URL 中。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:25:14.470

如果您没有修改任何设置，默认 MVC 路由示例应该可以工作。

例子

```
public ActionResult Index(string id)
{
    // do something with variable id = PostTiTle
} 
```

如果您的控制器名称是**Post**并且您的操作名称是**ViewPost**那么您需要像这样添加额外的路由。

```
routes.MapRoute(
    "Post",
    "post/{id}",
    new { controller = "Post", action = "ViewPost", id = UrlParameter.Optional }
); 
```

# hibernate - 休眠外键映射到值（不是实体）？

> ID：14326008
> 
> 赞同：0
> 
> 时间：2013-01-14T20:21:32.957
> 
> 标签：hibernate

我有两个表：主表 Order 和另一个表 Status。订单有一个外键 status_id。状态是以下字符串的表：“完成”、“传输中”或“待处理”。我是否说得对，我通常会实现两个实体 Order 和 Status，其中 Order 实体具有外键的多对一映射？我认为这将是多对一映射的原因是因为每个订单只有一个状态，但状态值显然会被重用（例如，一堆不同的订单可能具有“运输中”的状态）。

但是，我还有一个问题。由于“状态”表将是一个只有一个字符串列且只有 3 行的简单表，有没有更简单的方法在 Hibernate 中实现它？它实际上必须是一个实体还是我可以使用一些基于价值的映射？

另外，请制作基于（XML）映射的任何示例......我使用的是休眠映射文件，而不是注释或其他任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:15:20.673

如果您的状态表只是字符串，我建议您将 status_id 折叠到订单表中的字符列，并使用 Enum 对各种状态进行编码。您可以添加一个额外的 getter 方法来返回 Enum 而不是状态。在您的枚举类中，您可以拥有描述性字符串，并且可以将它们作为名词、动词等。

这是我在 Eclipse 中为此目的使用的示例枚举模板：

```
public enum Status {

COMPLETE("complete"),
IN_TRANSIT("In transit"); // You can add others here.

private String _id;

private Status(String id) {
    _id = id;
}

private static Map<String, Status> _enumById = new HashMap<String, Status>();

    static {
        for (${enclosing_type} type : values()) {
             _enumById.put(type.getId(), type);
        }
    }

    public String getId() {
        return _id;
    }

    public static Status findById(String id) {
        return _enumById.get(id);
    }
} 
```

# java - JAX-RS：如何将我的对象列表返回为 JSON？

> ID：14326011
> 
> 赞同：4
> 
> 时间：2013-01-14T20:21:40.370
> 
> 标签：java, jackson, jax-rs

我查看了[Jackson](http://wiki.fasterxml.com/JacksonInFiveMinutes)的文档，这让我很困惑 :( 我的实体看起来像：

```
 @Entity
 @Table(name = "variable")
 public class Variable {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private long id;

    @Column(unique = true, nullable = false)
    private String name;

    @Column
    @Enumerated(EnumType.STRING)
    private VariableType type;

    @Column(nullable = false)
    private String units;

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "created_on", nullable = false)
    private Date createdOn;

    @Temporal(TemporalType.TIMESTAMP)
    @Column(name = "retired_on", nullable = true)
    private Date retiredOn;

    @Column(nullable = false)
    private boolean core;

} 
```

我的`JAX-RS`服务看起来像

```
@Path("/variable")
public class VariableResource {
    @Inject private VariableManager variableManager;

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response getVariables() {
        return Response.ok(variableManager.getVariables()).build();
    }

} 
```

当我使用 测试此服务时`curl http://localhost:8080/app/rest/variable`，我在服务器日志中看到以下内容

```
[javax.ws.rs.core.Application]] (http--127.0.0.1-8080-6) Servlet.service() for servlet javax.ws.rs.core.Application threw exception: java.lang.NoSuchMethodError: org.codehaus.jackson.type.JavaType.<init>(Ljava/lang/Class;)V 
```

有哪些最简单的方法可以将变量列表返回为 JSON？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-14T20:39:46.790

通常它就像`@XmlRootElement`在你的实体上添加一样简单（我可以看到你正在使用 JPA/Hibernate `@Entity`/ `@Table`，但你错过了`@XmlRootElement`）。

```
@Entity
@Table(name = "variable")
@XmlRootElement
public class Variable {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private long id;

    @Column(unique = true, nullable = false)
    private String name;

    // ...

    @Column(nullable = false)
    private boolean core;
} 
```

这适用于服务，使用`Response`来自 JAX-RS，并且还直接返回将由 JAX-RS 自动编组的对象：

```
@Path("/variable")
public class VariableResource {
    @Inject private VariableManager variableManager;

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Response getVariables() {
        return Response.ok(variableManager.getVariables()).build();
    }

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    // Same method but without using the JAX-RS Response object
    public List<Variable> getVariablesAlso() {
        return variableManager.getVariables();
    }
} 
```

Often people would create a [DTO](http://en.wikipedia.org/wiki/Data_transfer_object) to avoid exposing internal values of the Entity from the database to the real world, but it is not mandatory, if it is fine for you to expose the whole object.

# asp.net - 如何从 asp:login 获取用户名以存储在会话中？

> ID：14326012
> 
> 赞同：1
> 
> 时间：2013-01-14T20:21:55.500
> 
> 标签：asp.net, session, login

我在我的网站上使用简单的 asp:login 表单进行用户身份验证。我已尽可能将其设置为基本，我的代码如下所示：

```
<asp:Login ID="LoginForm" runat="server"
    DestinationPageUrl="~/LoggedIn/TaskPanel.aspx" >
</asp:Login> 
```

适当的表在我的 SQL Server 数据库中，登录就像一个魅力:)

登录后，我想检索一些用户数据并将其存储在会话中以供以后使用。为此，我打算通过数据库中的存储过程传递用户名。我尝试了以下方法，但现在当我尝试进行身份验证时，什么也没有发生并且页面刷新。

```
<asp:Login ID="LoginForm" runat="server"
    DestinationPageUrl="~/LoggedIn/TaskPanel.aspx"
    OnAuthenticate="storeUserDetails" >
</asp:Login> 
```

C＃：

```
protected void storeUserDetails(object sender, EventArgs e)
{
    Session["accountCustUsername"] = LoginForm.UserName;
    ...
    ...
} 
```

我还尝试将 Response.Redirect 放入此方法中，以查看是否发生任何事情，但没有任何反应。

我是否想使用登录模板来获取用户名文本框的 ID？这将如何完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:58:25.050

您可以使用 Membership Api 函数来获取当前登录的用户。

包括这个命名空间

```
using System.Web.Security; 
```

访问当前用户

```
MembershipUser currentUser = Membership.GetUser();
string username = currentUser.Username; 
```

或者

```
string username = HttpContext.User.Identity.Name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:25:38.550

如果您正确配置了表单身份验证，则可以`User.Identity.Name`在登录后调用。

```
Session["accountCustUsername"] = User.Identity.Name;
//if you aren't in your code behind use HttpContext.Current.User.Identity.Name; 
```

但是您确实不需要这样做，因为只要您登录，该值始终可供您使用。

您可以将此代码放在 TaskPanel.aspx 页面的 Page_Load 中（因为我假设那是您登录后到达的页面）

# .htaccess - 为什么 apache 不能按预期工作（Order/Allow/Deny 指令）？

> ID：14326017
> 
> 赞同：0
> 
> 时间：2013-01-14T20:22:29.257
> 
> 标签：.htaccess, apache2

我有一个 apache 2 web 服务器在这里运行。在该服务器上的目录中，我有一个`.htaccess`文件：

```
 Order deny,allow
  Deny from all
  Allow From 192.168.1.0/24
  Allow From 10.0.0.0/24 
```

我在盒子 192.168.1.20。如果我尝试访问该目录，我会收到一条关于该目录缺少权限的消息。如果我只评论第二行 ( `#Deny from all`) 我可以到达该位置。

据我了解，我首先定义评估拒绝规则（拒绝所有 IP），然后只允许指定的（这里是两个私有子网）。这应该会导致只能从我的专用网络内部访问位置的配置。

为什么我会收到缺少权限错误？是否有可能显示一些更详细的日志来搜索错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:24:22.357

简单回答一下：我的 DNS 配置错误。因此我通过外部接口访问，一切都被正确阻止了。

对不起打扰。

# sql-server - 使用 Visual Basic 6 时如何使用基于数据类型的 SQL 存储过程？

> ID：14326019
> 
> 赞同：0
> 
> 时间：2013-01-14T20:22:45.077
> 
> 标签：sql-server, vb6

我正在向旧的 VB6 应用程序添加功能。我们正在使它对地理空间更加友好。我已经通过升级到 SQL Server 2012 Express 完成了数据库端的更改，并且正在尝试使用**geography**数据类型。

在 VB6 中，我有一段看起来像这样的代码（是的，我知道 Latitude 拼写错误）：

```
rsGeoref![Lattitude] = IIf(dblLatitude <> "", Val(dblLatitude), Null)
rsGeoref![LatDirection] = IIf(strLatDirection = "", Null, strLatDirection)
rsGeoref![LatDegrees] = IIf(dblLatDegrees <> "", Val(dblLatDegrees), Null) 
```

这是修改一个 RecordSet，然后稍后使用以下命令将其推回数据库：

```
rsGeoref.Update 
```

所以我现在有一个名为 GeogSpatial 的字段，它使用 SQL Server 2012 中的**geography**数据类型。我想以同样的方式更新它。这不起作用：

```
rsGeoref![GeogSpatial] = "geography::STGeomFromText('POINT(" + CStr(dblSignedLong) + " " + CStr(dblSignedLat) + ")', 4326)" 
```

我相信错误来自使用 SQL 存储过程**geography::STGeomFromText**。如果是这样，我是否有更好的方法来做到这一点，而不必将整个部分重写为单一的 SQL 查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:27:33.820

我不确定您是否可以将记录集中的字段值设置为表示对 SQL 存储过程/函数的调用的字符串文字，并将其作为 SQL 代码执行。它将尝试做的只是将该字段设置为字符串文字，如果无法将字符串转换为字段的类型，您很可能会在运行时收到类型不匹配错误。

我用等效的设置测试了这个理论，但是使用了对分配给日期时间字段而不是 STGeomFromText 的 GetDate() 的调用。正如我想象的那样失败了，因为无法将文本“GetDate()”分配给日期时间。

# c++ - 为什么我的 LD_PRELOAD 拦截适用于打开/关闭而不适用于 fopen/fclose？

> ID：14326023
> 
> 赞同：0
> 
> 时间：2013-01-14T20:22:55.137
> 
> 标签：c++, c, ld-preload

我正在尝试使用 LD_PRELOAD 来拦截打开/关闭的调用。我对 close() 的测试实现只是

```
int close(int fd) {
  fprintf(stderr, "TEST\n");
  return syscall(SYS_close, fd);
} 
```

我有一个测试程序

```
int handle=open("test.txt", O_WRONLY|O_CREAT, 0644);
close(handle);
FILE *f = fopen("test.txt", "w");
fclose(f); 
```

问题是：我的 LD_PRELOAD 代码成功拦截了 close() 调用，但无法拦截由 fclose() 发出的 close() 系统调用，尽管从 strace 输出来看，这两个系统调用的外观完全相同。

我知道我可以只写我对 fclose() 的拦截，它也适用于 C++ 的 ofstream::close()。但是，我对 open()/fopen() 的拦截仍然不适用于 C++ 的 ofstream::ofstream()。如何确保拦截所有打开或关闭文件的调用，无论是哪个包装函数调用它们？谢谢！

# php - 如何在不先写入磁盘的情况下下载解密文件

> ID：14326028
> 
> 赞同：1
> 
> 时间：2013-01-14T20:23:08.897
> 
> 标签：php

`$path`我有一个脚本，它可以为给定变量（即：）在磁盘上获取一个 mp3 文件，`/var/recordings/file.mp3`并将其发送到浏览器以由媒体播放器播放。这是代码：

```
//Send the media asset to the browser
header('Content-type: audio/mpeg');
header('Content-length: ' . filesize($path));
header('Content-Disposition: filename="recording.mp3"');
header('X-Pad: avoid browser bug');
header('Cache-Control: no-cache');
header("Content-Transfer-Encoding: binary"); 
header("Content-Type: audio/mpeg, audio/x-mpeg, audio/x-mpeg-3, audio/mpeg3");
print file_get_contents($path); 
```

我现在以加密形式存储有问题的 mp3 文件，因此我现在将有问题的文件读入字符串并使用加密类对其进行解密。我现在想将此解密后的文件直接发送到浏览器，而不将其输出到文件中，然后让 PHP 读取该文件的内容。可能吗？我会假设我可以这样做`print $decrypted_string`，但我将如何指定文件大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:28:07.013

首先解密它。然后计算`strlen`函数的大小。将该值用作`Content-Length`标题值。

```
$contents = file_get_contents($path);
$decrypted_string = decrypt_mp3($contents);
header('Content-length: ' . strlen($decrypted_string));
echo $decrypted_string; 
```

# git - 如何从一系列定期开发快照中创建 GIT 存储库？

> ID：14326029
> 
> 赞同：3
> 
> 时间：2013-01-14T20:23:15.150
> 
> 标签：git, version-control, data-conversion

> **可能重复：**
> [如何将简单的非源代码控制项目备份转换为版本化的 git 存储库？](https://stackoverflow.com/questions/748778/how-do-i-convert-simple-non-source-controlled-project-backups-into-a-versioned-g)

假设我在没有 GIT 的情况下开发了一些软件，并且在整个开发过程中，我定期（例如每天一次）将项目目录的内容备份到一个过时的 zip 文件中，例如（“Project Snapshot [YYYY-MM-DD].zip”）。

是否有任何现有软件可以自动创建 GIT 存储库，解压缩第一个备份，将解压缩的内容提交到存储库，解压缩第二个备份（在解压缩之前替换现有文件或清空目录），提交更改，等等，直到我有完整的 GIT 存储库更改历史吗？

这种转换的好处是节省存储空间（GIT 比存储完整快照更有效），具有可访问的更改历史记录，以及使项目处于版本控制之下。

# c# - 是否有 XMPP WCF 绑定来连接 IOS Jabber 客户端？

> ID：14326036
> 
> 赞同：0
> 
> 时间：2013-01-14T20:23:33.147
> 
> 标签：c#, .net, ios, xcode, wcf

我不想为我的应用程序中的聊天服务创建 Jabber 服务器。但是，我找不到将 XMPP 与 WCF 集成以供 iPhone/iPad 使用的方法。我是唯一一个在做这件事的人吗？

有什么方向，建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:59:01.323

我正在做一个类似的项目。这是我找到的直接链接：http: [//www.johandekoning.nl/index.php/2009/11/29/xmpp-and-wcf-introduction/](http://www.johandekoning.nl/index.php/2009/11/29/xmpp-and-wcf-introduction/)

这有点过时了，但我很高兴在继续的过程中分享我的结果。

不，我不希望在这里投赞成票或反对票，因为这还不是一个实质性的答案。

# node.js - node.js 中的跨平台隐藏设置文件

> ID：14326038
> 
> 赞同：0
> 
> 时间：2013-01-14T20:23:41.990
> 
> 标签：node.js, path

在 node.js 中，我试图以一种不错的跨平台方式找出我的应用程序设置文件应该在哪里的路径。

*   Unix：~/.my-app/file
*   Windows：%APPDATA%\my-app\file
*   Mac：~/Library/Application Support/my-app/file（或~/.my-app/file）

或类似的规定。

我不想硬编码查找用户所在的操作系统，因为这看起来非常骇人听闻，而且完全没有未来可言。我希望, 或中有什么东西`os`，但我一直找不到。`path``fs`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-17T05:12:46.113

因此，您正在寻找的是[path-extra](https://npmjs.org/package/path-extra)模块，它向 Node 的内置路径添加了一些实用功能。我[在 NPM 中通过这个简单的搜索](https://npmjs.org/search?q=settings+path)找到了它，只是让你知道：npm 的搜索引擎变得非常好！

你这样使用它：

```
var path = require('path-extra');
var appPath = path.datadir('appname');
var myFile = path.join(appPath, 'myFile.txt');
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:48:30.173

节点中没有任何东西像您正在寻找的那样。你将不得不自己写。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-17T03:02:43.407

在回答“我一直找不到它”这个问题时，...检查 node.js 'path' 模块，特别是 path.normalize 和 path.join。

我没有发现需要其他模块，因为“路径”解决了跨平台路径构建。

```
http://nodejs.org/api/path.html#path_path_normalize_p 
```

和

```
http://nodejs.org/api/path.html#path_path_join_path1_path2 
```

这是我使用 path.join 的方式...

```
var pth = require('path');
var fspath_myfile       = pth.join(__dirname,'fs','remote','myfile.txt'); 
```

如果我用完了目录'projectdir'，它将产生这些文件/路径值：

```
C:\projectdir\fs\remote\myfile.txt 

/home/myusername/projectdir/fs/remote/myfile.txt 
```

# c - 链表和通过 *headRef 删除节点

> ID：14326041
> 
> 赞同：4
> 
> 时间：2013-01-14T20:23:51.040
> 
> 标签：c, pointers, data-structures, linked-list

我正在解决一些指针/链表问题。问题之一是删除列表中的所有节点并将头部指向 NULL。

我的解决方案与给定的答案不同。我是新手，所以我无法弄清楚我的是否以及为什么不起作用。我遇到的主要问题是试图了解结果`free(*headRef);`是什么，以及之后是否`*headRef`可以共享不同的指针。

我的想法是：因为我已经`compliment`指向下一个节点，所以我可以释放`*headRef`指向第一个节点的节点（或者，更一般地说，一个赞美之前的节点指向）。然后，我可以指向`*headRef`并且`compliment`该过程可以继续。

这是我的代码：

```
void DeleteList(struct node** headRef){

    struct node* compliment = *headRef;

    while (compliment != NULL){
            compliment = compliment->next;
            free(*headRef);
            *headRef = compliment;
    }
    *headRef = NULL;
} 
```

假设每个节点都有两个属性：一个 int 和一个`->next`指针。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T20:26:31.840

您发布的代码很好。删除所有节点的关键步骤是确保您不要尝试删除指针然后跟随其`next`指针。由于您`compliment`在每次迭代中使用指针来保存下一个节点，因此您所拥有的看起来不错。

至于`free(*headRef)`-这将释放指向的指针`headRef`。完成此操作后，您应该确保不再跟随指针`*headRef`。由于您立即更改`*headRef`下一行以指向链表中的下一个节点，因此您无需担心。主要关注的不是`free`指针，然后尝试取消引用它。 `free`使用指针不会以某种方式“毒化”指针变量并使其变坏；相反，它破坏了*指针*并使之变得糟糕。

一个细节 - 函数的最后一行不是必需的，因为当你访问链表的最后一个节点并遍历它的`next`指针时，你会得到`NULL`. 这意味着循环的最终迭代将设置`*headRef`为指向`NULL`您。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:22:20.460

你可以用更少的代码来做：

```
void DeleteList(struct node **headRef){

    struct node *tmp;

    while ((tmp = *headref)){
            *headRef = tmp->next
            free(tmp);                
    }
} 
```

解释：

*   只有在 *headref 有要删除的内容时，您才能进入循环
*   循环内部：tmp 不能为 NULL，所以取消引用 tmp 是安全的，所以`*headref = tmp->next;`是有效的
*   在循环之后，保证 *headref == NULL

# html - 通过特定的类或 id 获取大多数内部 div

> ID：14326045
> 
> 赞同：1
> 
> 时间：2013-01-14T20:23:54.907
> 
> 标签：html, xpath

我想在具有包含“内容”的 id 或类的 html 文档中访问大多数内部 div。

我试过的：

```
//div[@id[contains(.,'content') and not(*)]] 
```

这适用于获取具有包含“内容”的 id 的最内部 div。

现在我想通过包含 id 或类“内容”的 id 或类（取决于最内部的是什么）来获取最内部的 div。

样本数据：

```
<body>
<div class="outerContent">
    <div id="moreContent">
        <div class="anotherContent">
            This is what I am looking for.
        </div>
    </div>
</div>
</body> 
```

或者

```
<body>
<div class="outerContent">
    <div id="moreContent">
        <div id="anotherContent">
            This is what I am looking for.
        </div>
    </div>
</div>
</body> 
```

请注意，“这就是我正在寻找的”可能位于包含“内容”的 div 类或包含“内容”的 div id 中。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:53:56.183

**更新。**

如果我正确理解您的问题，我会这样做：`//descendant::div[last()][contains(@id,'Content')]`

如果您需要在任何情况下检查@id，请在部件周围使用[翻译功能](https://stackoverflow.com/questions/9804281/selectnodes-with-xpath-ignoring-cases/9805020#9805020)`@id`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T00:43:31.193

我对你的确切问题并不完全清楚，所以我给出了两种解释。

## 没有其他`<div/>`元素满足谓词

`<div/>`带有`@class`或`@id`包含不包含任何其他`<div/>`满足此谓词的“内容”。这允许在`<div/>`.

```
//descendant::div
  (: either @id or @class contain 'content' :)
  [contains(lower-case(@id), 'content') or contains(lower-case(@class), 'content')]
  (: only inner-most div fulfilling this condition :)
  [last()] 
```

## 无非文字

内不能有任何元素节点`<div/>`。

```
//descendant::*
  (: only inner-most elements :)
  [last()]
  (: which are a div :)
  [local-name(.) eq 'div']
  (: and either @id or @class contain 'content' :)
  [contains(lower-case(@id), 'content') or contains(lower-case(@class), 'content')] 
```

* * *

如果您没有获得 XQuery 2.0 支持，那么应该没有任何`fn:lower-case()`可用的支持。如果是这样，您必须将其剥离并用“内容”替换您提供的数据的“内容”。

如果您有 XQuery 2.0 支持，您还可以将其用作更可扩展的谓词（更容易将新属性添加到列表并减少冗余代码）：

```
[some $attribute in (@id, @class) satisfies contains(lower-case($attribute), 'content')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T01:30:29.753

此答案仅使用 XPath 1.0 表达式。我的理解是 XPath 2.0 不可用。

**使用**：

```
//div[contains(@id, 'Content') or contains(@class, 'Content')]
       [not(descendant::div[contains(@id, 'Content') or contains(@class, 'Content')])] 
```

这将选择其属性具有包含 string 的 string 值的任何元素`div`，或者其属性具有包含 string 的 string 值并且没有具有此属性的后代元素的任何元素。`id``"content"``class``"content"``div`

**请注意，诸如“最内部的 div”之类的东西可能不是单数**的——也就是说，`div`可能存在许多元素以满足问题中设置的条件。

**如果是这种情况，并且您只需要一个这样`div`的元素（例如，第一个元素），您可以使用**：

```
(//div[contains(@id, 'content') or contains(@class, 'content')]
        [not(descendant::div[contains(@id, 'content') or contains(@class, 'content')])]
)[1] 
```

**基于 XSLT 的验证**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select=
     "//div[contains(@id, 'Content') or contains(@class, 'Content')]
       [not(descendant::div[contains(@id, 'Content') or contains(@class, 'Content')])]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于第一个提供的 XML 文档时：**

```
<body>
    <div class="outerContent">
        <div id="moreContent">
            <div class="anotherContent">
            This is what I am looking for.
            </div>
        </div>
    </div>
</body> 
```

**计算 Xpath 表达式，并将计算结果复制到输出：**

```
<div class="anotherContent">
            This is what I am looking for.
            </div> 
```

**使用第二个文档，再次产生正确的结果：**

```
<div id="anotherContent">
            This is what I am looking for.
        </div> 
```

**最后**，如果“内容”的比较应该不区分大小写，请使用：

```
 //div[contains(translate(@id,'CONTE','conte'), 'content')
      or contains(translate(@class,'CONTE','conte'), 'content')
       ]
         [not(descendant::div
               [contains(translate(@id,'CONTE','conte'), 'content')
               or contains(translate(@class,'CONTE','conte'), 'content')
               ]
              )
         ] 
```

# internet-explorer - IE中的Dynatree拖放

> ID：14326046
> 
> 赞同：0
> 
> 时间：2013-01-14T20:24:02.170
> 
> 标签：internet-explorer, dynatree

我一直在开始从 jsTree 迁移到 Dynatree，因为 jsTree 的文档已经过时了很长时间，你应该花很多时间在调试上，但是我遇到了一个问题 - d'n'd 不能正常工作在 IE 中。例如，当我尝试将一个节点移动到另一个节点内部时，IE 不会将此节点放在内部，而是放在附近（之前或之后）。[我尝试了官方示例](http://wwwendt.de/tech/dynatree/doc/samples.html)中的示例“Drag'n'drop 2” ，它在 Chrome 中运行良好，但在 IE（任何版本）中都没有。有没有人有这个问题的经验？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T10:07:13.543

尝试检查 HTML 文档的 DTD。我已经遇到过这个问题，我只需要将我的 HTML 文档的 DTD 设置为严格的 DTD

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
```

# c# - 从数据库中删除之前的验证

> ID：14326047
> 
> 赞同：0
> 
> 时间：2013-01-14T20:24:02.440
> 
> 标签：c#, asp.net, .net, sql-server, tsql

我有一个示例网站，您可以在其中输入您的电子邮件地址，并将其插入 MS SQL 数据库。在下一页上，GridView 显示来自数据库的列表。现在我需要添加一个删除地址的函数，但它必须验证该地址当前是否为

```
public partial class Default : Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        Label1.Text = GetLastWriteTime(Request.PhysicalPath).ToString();
    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        string data = DateTime.Now.ToLongDateString() + "," + DateTime.Now.ToLongTimeString() + ": ";

        SqlDataSource1.InsertCommand = "INSERT INTO ListaAdresow (Email) Values('" + TextBox1.Text + "')";

        try
        {
            SqlDataSource1.Insert();
            Label2.Text += data + "added into database: " + TextBox1.Text + "<br/>";
            TextBox1.Text = "";
        }
        catch (Exception ex)
        {
            Label2.Text += data + ex.Message;
        }
    }
    protected void Button2_Click(object sender, EventArgs e)
    {
        string data = DateTime.Now.ToLongDateString() + "," + DateTime.Now.ToLongTimeString() + ": ";
        SqlDataSource1.DeleteCommand = "DELETE FROM ListaAdresow WHERE Email='" + TextBox1.Text + "'";

        SqlDataSource1.SelectCommand = "SELECT  FROM [ListaAdresow] WHERE Email=" + TextBox1.Text;

        try
        {
                SqlDataSource1.Delete();

                Label2.Text += data + "removed from database: " + TextBox1.Text + "<br/>";
                TextBox1.Text = "";

        }
        catch (Exception ex)
        {
            Label2.Text += data + ex.Message;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:41:06.640

我强烈建议您为所有查询创建存储过程，但例如，从您的 gridview 中，您可以执行以下操作：

```
if (myGrid.SelectedRows.Count > 0)
{
     int selectedIndex = myGrid.SelectedRows[0].Index;

     // gets the RowID from the first column in the grid
     int rowID = int.Parse(BooksGrid[0, selectedIndex].Value.ToString());

     string sql = "IF EXISTS(SELECT COLUMN FROM Table1 WHERE ID = @rowID)
                    BEGIN 
                      DELETE FROM TABLE1 WHERE ID = @rowID"
                    END;

     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:40:20.297

要回答您的问题，您可以使用以下内容（未经测试）：

```
SqlDataAdapter da = new SqlDataAdapter();
    DataTable dt = new DataTable();

    // Create the SelectCommand using paramaterized queries
        SqlCommand command = new SqlCommand("SELECT * 
                                            FROM ListaAdresow 
                                            WHERE Email = @Email", connection);
    command.Parameters.Add("@Email", SqlDbType.VarChar, 40, TextBox1.Text);

    da.SelectCommand = command;
    da.Fill(dt);

    if (dt.Rows.Count > 0)
    {
        //Row Exists
    }
    else
    {
        //Row Does Not Exist
    } 
```

但是，我重申其他人所说的，`DeleteCommand`可以自行运行，它将返回受影响记录的数量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T20:34:49.293

如果执行删除后可以验证，则数据源的Delete方法返回对数据库影响的总行数。[请参阅文档](http://msdn.microsoft.com/library/system.web.ui.webcontrols.sqldatasource.delete.aspx)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-20T11:51:44.590

尝试使用存储过程并通过参数传递值。因为您可以轻松检查数据库中是否存在数据。它还可以帮助您防止某些 sql 注入。:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-20T08:29:20.227

只需将值放入会话中，并在删除之前使用删除一检查会话值

# actionscript-3 - 设置上传的舞台图像的宽度和高度

> ID：14326048
> 
> 赞同：0
> 
> 时间：2013-01-14T20:24:02.903
> 
> 标签：actionscript-3

我正在使用下面的代码在舞台上加载图像，一切正常，但我的问题是我不知道如何手动设置上传图像的宽度和高度。

保存上传图像的影片剪辑称为 image2。

下面的代码在 .as 文件下运行，所以我不需要编写导入等。

我的代码是：

```
private var jagFileRefSave:FileReference = new FileReference();
private var uloader:Loader = new Loader();
private var imagesFilter:FileFilter = new FileFilter("Images", "*.jpg;*.gif;*.png");

upload_Image.addEventListener(MouseEvent.CLICK,onClickSave);

private function onClickSave(e:MouseEvent):void{    
        jagFileRefSave.browse([imagesFilter]);
        jagFileRefSave.addEventListener(Event.SELECT, selectedFile);
    }        
    private function selectedFile(e:Event):void{
        jagFileRefSave.load();
        jagFileRefSave.addEventListener(Event.COMPLETE, uuloaded);
    }
    private function uuloaded(e:Event):void{
        var rawBytes:ByteArray = jagFileRefSave.data;
        uloader.contentLoaderInfo.addEventListener(Event.COMPLETE, ugetBitmapData)
        uloader.loadBytes(rawBytes);
    }
    private function ugetBitmapData(e:Event):void{
        image2.addChild(uloader); //**Image2 is the movieclip that holds the uploaded image**
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:16:15.433

使用宽度和高度。

例如

```
uloader.width = 320;
uloader.height = 480; 
```

或获取舞台尺寸

```
uloader.width = stage.stageWidth;
uloader.height = stage.stageHeight; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:08:17.937

1.  “我不知道如何手动设置上传图像的宽度和高度” - 这可以通过检查加载器的内容找到：

    ```
    public function getLoadedImageSize(l:Loader):Rectangle{

        //ERROR check if image is loaded
        var img:Bitmap = (l.content || l.contentLoaderInfo.content) as Bitmap;
        return new Rectangle(0,0,img.width,img.height);
    } 
    ```

2.  “我怎样才能改变上传图片的大小，而不是加载器”：

    ```
    public function changeLoadedImageSize(l:Loader,w:Number,h:Number):void{

        // ERROR check if image is loaded
        var img:Bitmap = (l.content || l.contentLoaderInfo.content) as Bitmap;
        img.width = w;
        img.height = h;
    } 
    ```

# android - 将 TextView 动态添加到 Widget

> ID：14326054
> 
> 赞同：2
> 
> 时间：2013-01-14T20:24:19.860
> 
> 标签：android, android-widget

我决定为我的应用程序制作一个小部件，但我陷入了困境！

我想根据数组列表的大小在小部件上添加多个文本视图，但在搜索谷歌后我终于发现这是不可能的。

尽管我尝试了很多解决方法，但似乎没有任何效果！

所以我想请你帮忙！即使使用预定义的 xml 文件也可以这样做吗？怎么做？

所以我实际上正在寻找的是一段合适的代码，它演示了我上面描述的内容！或任何其他可以引导我解决问题的帮助！

在此先感谢您的帮助！

/撞！任何人 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-10T21:00:49.070

有可能的。你必须这样做：

```
RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget); // your widget layout xml
for (...){
    RemoteViews view = new RemoteViews(context.getPackageName(), R.layout.empty_item); // xml with just a textview
    view.setTextViewText(R.id.textviewId, "some dynamic text"); // id of the textview and some text
    views.addView(R.id.layout, view); // id of the layout in widget.xml    
}
appWidgetManager.updateAppWidget(appWidgetId, views); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-23T22:42:15.167

不，那是不可能的。

但是，您可以使用一个多行 TextView。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-14T20:32:16.633

```
 TextView[] tx = new TextView[10];
    TableRow[] tr = new TableRow[10];
    for(i=0; i<10; i++) {
        tx[i] = new TextView(this);
        tx[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        tx[i].setText("Data")
        tr[i] = new TableRow(this);
        tr[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
        tr[i].addView(tx[i]);
        // and then adding table row in tablelayout
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-14T20:33:03.617

如果你把它放在你的 onCreate 中，这样的东西应该可以工作：

```
View myView  = (View)findViewById(R.id.Something);

for(element : array) {

    TextView myTV = new TextView(context);
    myTV.setText(array.getText());
    myView.addView(myTV);

} 
```

# sql - 5 的两个外部表上的多对多关系的内部联接

> ID：14326066
> 
> 赞同：0
> 
> 时间：2013-01-14T20:25:44.780
> 
> 标签：sql, database, many-to-many, inner-join, outer-join

我有以下表格：tPlans、tPlansProperties、tProperties、tEventsProperties、tEvents。

对于这些表，tPlans 和 tProperties 之间存在多对多关系。tEvents 和 tProperties 之间也存在多对多关系。

我正在尝试获取与 tPlans 具有**所有**相同 tProperties 的所有 tEvents，但我遇到了两难境地，如果计划和事件中甚至有一个属性，它会显示它作为结果。我需要在不对所有不同类型的属性进行硬编码或对查询结果进行后处理的情况下实现这一点。

这是我到目前为止所拥有的：

```
SELECT 
    P1.id
    ,P1.name
    ,E1.property
    ,E1.id 
    ,E1.name
FROM (
    SELECT 
        P.id
        , P.name
        , PP.property
    FROM tPlans P
    INNER JOIN tPlansProperties PP
    ON P.id = PP.id
) P1

INNER JOIN (
    SELECT 
        E.id
        , E.name
        , EP.property
    FROM tEvents E
    INNER JOIN tEventsProperties EP
    ON E.id = EP.id
    WHERE E.id LIKE 'EVT2011SC99'
) E1
ON P1.property = E1.property 
```

* * *

这是表格的高级视图：

## 计划

ID，名称，类型，成本，vendor_id

## tPlansProperties

身份证，财产

## t属性

属性，property_name，property_type

## tEventsProperties

身份证，财产

## 事件

id、名称、描述、日期、owner_id

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:36:46.607

以下获取具有 PlanProperties 中所有属性的所有事件，这似乎是您所要求的（“我正在尝试获取与 tPlans 具有所有相同 tProperties 的所有 tEvents”）：

```
select ep.Id
from tEventsProperties ep full outer join
     (select distinct pp.property
      from PlansProperties
      -- where planid = ??
     ) pr
     on ep.property = pp.property
group by ep.Id
having count(*) = count(e.property) and
       count(*) = count(pr.property) 
```

如果您希望它用于特定计划，请`where`在子查询中使用该子句。如果您需要更多事件信息，请重新加入事件表。

这尚未经过测试。

获取与给定事件的属性匹配的所有计划是如下查询：

```
select pr.planid
from (select distinct property
      from tEventsProperties ep
      where ep.event = THEEVENT
     ) ep full outer join
     (select distinct planid, pp.property
      from PlansProperties
     ) pr
     on ep.property = pp.property
group by pr.planid
having count(*) = count(ep.property) and
       count(*) = count(pr.property) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:39:29.270

戈登很接近。要获得所有匹配的事件和计划对，您需要一组稍微复杂的联接。这是一个似乎适用于非常小的数据样本的解决方案。我不知道它将如何在您的环境中执行：

```
SELECT
  ISNULL(pp.id, pl.id) AS [plan],
  ISNULL(ev.id, ep.id) AS event
FROM
  tPlansProperties pp CROSS JOIN tEvents ev
FULL JOIN
  tEventsProperties ep CROSS JOIN tPlans pl
ON pp.property = ep.property
  AND pp.id = pl.id
  AND ev.id = ep.id
GROUP BY
  ISNULL(pp.id, pl.id),
  ISNULL(ev.id, ep.id)
HAVING COUNT(*) = COUNT(ep.property)
   AND COUNT(*) = COUNT(pp.property)
; 
```

它也可以[在 SQL Fiddle](http://sqlfiddle.com/#!3/3a504/1)上找到。

# loops - 在树枝循环的循环中使用条件

> ID：14326068
> 
> 赞同：0
> 
> 时间：2013-01-14T20:25:57.660
> 
> 标签：loops, symfony, twig

如果循环为 3，我想停止循环。
如果我的数组有 5 条记录，我只需要显示 3 条记录

```
{% for image in post.images %}
   {% if loop.index < '3' %}
      {{ loop.index}}
   {% endif %}
{% endfor %} 
```

所以我只想显示 3 个循环

```
1  
2  
3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:39:43.467

```
{% for image in post.images|slice(0, 3) %} 
```

解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T14:14:39.717

您可以在 twig 中组合 for 和 if 语句。像下面这样的东西会起作用，但我猜它实际上不会是你最终打印出来的循环索引？

```
{% for image in post.images if loop.index <= 3 %}
    {{ loop.index }}
{% endfor %} 
```

# php - 模拟浏览器 - 身份验证和执行操作

> ID：14326073
> 
> 赞同：0
> 
> 时间：2013-01-14T20:26:21.923
> 
> 标签：php, curl, websocket, autologin

我在这里尝试完成的是一种登录给定页面并执行某些只有登录用户才能执行的操作的方法。

我尝试过 cURL（使用 PHP），但登录表单有一些安全字段（隐藏输入）和随机文本，以验证用户是否真实并且使用的是真实浏览器。我需要一种有效的方法来通过它。

如果可能，脚本将加载页面、填写必要的字段、提交表单并保存会话和 cookie 登录以执行未来的操作。

有任何想法吗？

我对'websockets'不是很熟悉，但它会工作吗？

提前致谢。

**编辑** [https://www.pingdom.com/transactionmonitor/](https://www.pingdom.com/transactionmonitor/)

该网站完全符合我的需要，他们使用的是什么技术？Websockets 与网站交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:28:11.680

使用 cURL，您可以抓取隐藏字段的内容，存储在会话中，并在需要发送数据时使用。否则，PHP 完全不可能。

# javascript - AngularJS指令不起作用

> ID：14326077
> 
> 赞同：11
> 
> 时间：2013-01-14T20:26:35.320
> 
> 标签：javascript, angularjs

我在我的一个项目中使用 AngularJS，我想尝试创建指令。我已经遵循了几个教程，但我看不出我在哪里做错了。更糟糕的是，它不会显示任何错误或警告消息，但它也不会执行指令的功能。现在，我的代码几乎是这样的：

```
angular.module('components', []).directive('ngxOnshow', function() {
   return {
          restrict: 'A',
          link: function(scope, element, attrs){
                        console.log("hello world")
                        //Resto do código da função
          }  
   };
});
var module = angular.module('app', ['components']); 
```

在 HTML 页面的正文中，我有这个：

```
<body ng-autobind ng-app="app"> 
```

但是，当我使用该指令时，它不起作用。

```
<div ng-show="showApp == true" ngx-onshow="showAppBar()">
</div> 
```

应用程序的其余部分工作得很好，绑定，默认指令，除此之外的一切。也许我错过了什么？

谢谢，烧焦:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T23:38:13.127

使用 '&' 允许指令执行父范围中定义的表达式/函数。$observe 一个内插的隔离范围属性（即，使用包含 '@' 定义的属性`{{}}`）来确定它何时更改：

```
myApp.directive('ngxOnshow', function () {
  return {
    restrict: 'A',
    scope: {
      showApp: '@',
      ngxOnshow: '&'
    },
    link: function (scope, element, attrs) {
      console.log("inside link function")
      attrs.$observe('showApp', function (newValue) {
        newValue === "true" && scope.ngxOnshow()
      })
    }
  };
}); 
```

newValue 与`"true"`not进行比较，`true`因为插值始终是字符串。

HTML：

```
<div ng-show="showApp == true" show-app="{{showApp}}" ngx-Onshow="showAppBar()"> 
```

[小提琴](http://jsfiddle.net/mrajcok/aRQ6p/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-30T09:38:09.253

大多数指令错误都显示在控制台中，只需启用日志记录：

```
app.config(function($logProvider){
    $logProvider.debugEnabled(true);
}); 
```

因此，您无需猜测指令为什么不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T20:43:10.427

我真的不知道指令应该做什么，因为你所拥有的只是一个`console.log`. 但是由于您将函数传递给`ngxOnshow`参数，我想您想执行它。您需要告诉指令从父级执行函数，并将其`scope`设置为`&`：

```
angular.module('components', []).directive('ngxOnshow', function() {
   return {
          restrict: 'A',
          scope: {
            ngxOnshow: '&'
          },
          link: function(scope, element, attrs){
                        console.log("hello world")
                        //Resto do código da função
          }  
   };
}); 
```

# javascript - 微小的 MCE 将“替换为”中

> ID：14326087
> 
> 赞同：2
> 
> 时间：2013-01-14T20:27:25.230
> 
> 标签：javascript, regex, tinymce, wysiwyg, fckeditor

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:07:20.983

这并不漂亮，但在你的初始化中，尝试：

```
tinymce.EditorManager.init({
   preformatted : false
   verify_html : false,
   onchange_callback : function(inst){
        var $inst = $('#'+inst.id);
        $inst.val($inst.val().replace('"','&quot;'));
   },
}); 
```

或者

```
tinymce.EditorManager.init({
   preformatted : false
   verify_html : false,
   onchange_callback : function(inst){
   inst.setContent(inst.getContent({format : 'raw'}).replace('"','&quot;'), {format : 'raw'});
    },
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:29:54.537

```
Tiny.Editor = function(config) {
    config = config || {};
    config.tinyConfig = config.tinyConfig || Tiny.config;
    config.tinyConfig = config.tinyConfig || {};
    Ext.applyIf(config.tinyConfig,{
        setup: (function(ed) {
            ed.onInit.add(this.onLoad);
            ed.onKeyUp.add(this.onChange);
        }).createDelegate(this)
        ,apply_source_formatting: false
        ,browserUrl: MODx.config.manager_url+'?a='+MODx.action['browser']
        ,button_tile_map: false
        ,cleanup: false
        ,verify_html : false
        ,compressor: ''
        ,convert_fonts_to_spans: true
        ,convert_newlines_to_brs: false
        ,element_format: 'xhtml'
        ,element_list: ''
        ,entities: '60,nbsp,161,iexcl,162,cent,163,pound,164,curren,165,yen,166,brvbar,167,sect,168,uml,169,copy,170,ordf,'
        + '171,laquo,172,not,173,shy,174,reg,175,macr,176,deg,177,plusmn,178,sup2,179,sup3,180,acute,181,micro,182,para,'
        + '183,middot,184,cedil,185,sup1,186,ordm,187,raquo,188,frac14,189,frac12,190,frac34,191,iquest,192,Agrave,193,Aacute,'
        + '194,Acirc,195,Atilde,196,Auml,197,Aring,198,AElig,199,Ccedil,200,Egrave,201,Eacute,202,Ecirc,203,Euml,204,Igrave,'
        + '205,Iacute,206,Icirc,207,Iuml,208,ETH,209,Ntilde,210,Ograve,211,Oacute,212,Ocirc,213,Otilde,214,Ouml,215,times,'
        + '216,Oslash,217,Ugrave,218,Uacute,219,Ucirc,220,Uuml,221,Yacute,222,THORN,223,szlig,224,agrave,225,aacute,226,acirc,'
        + '227,atilde,228,auml,229,aring,230,aelig,231,ccedil,232,egrave,233,eacute,234,ecirc,235,euml,236,igrave,237,iacute,'
        + '238,icirc,239,iuml,240,eth,241,ntilde,242,ograve,243,oacute,244,ocirc,245,otilde,246,ouml,247,divide,248,oslash,'
        + '249,ugrave,250,uacute,251,ucirc,252,uuml,253,yacute,254,thorn,255,yuml,402,fnof,913,Alpha,914,Beta,915,Gamma,916,Delta,'
        + '917,Epsilon,918,Zeta,919,Eta,920,Theta,921,Iota,922,Kappa,923,Lambda,924,Mu,925,Nu,926,Xi,927,Omicron,928,Pi,929,Rho,'
        + '931,Sigma,932,Tau,933,Upsilon,934,Phi,935,Chi,936,Psi,937,Omega,945,alpha,946,beta,947,gamma,948,delta,949,epsilon,'
        + '950,zeta,951,eta,952,theta,953,iota,954,kappa,955,lambda,956,mu,957,nu,958,xi,959,omicron,960,pi,961,rho,962,sigmaf,'
        + '963,sigma,964,tau,965,upsilon,966,phi,967,chi,968,psi,969,omega,977,thetasym,978,upsih,982,piv,8226,bull,8230,hellip,'
        + '8242,prime,8243,Prime,8254,oline,8260,frasl,8472,weierp,8465,image,8476,real,8482,trade,8501,alefsym,8592,larr,8593,uarr,'
        + '8594,rarr,8595,darr,8596,harr,8629,crarr,8656,lArr,8657,uArr,8658,rArr,8659,dArr,8660,hArr,8704,forall,8706,part,8707,exist,'
        + '8709,empty,8711,nabla,8712,isin,8713,notin,8715,ni,8719,prod,8721,sum,8722,minus,8727,lowast,8730,radic,8733,prop,8734,infin,'
        + '8736,ang,8743,and,8744,or,8745,cap,8746,cup,8747,int,8756,there4,8764,sim,8773,cong,8776,asymp,8800,ne,8801,equiv,8804,le,8805,ge,'
        + '8834,sub,8835,sup,8836,nsub,8838,sube,8839,supe,8853,oplus,8855,otimes,8869,perp,8901,sdot,8968,lceil,8969,rceil,8970,lfloor,'
        + '8971,rfloor,9001,lang,9002,rang,9674,loz,9824,spades,9827,clubs,9829,hearts,9830,diams,338,OElig,339,oelig,352,Scaron,353,scaron,'
        + '376,Yuml,710,circ,732,tilde,8194,ensp,8195,emsp,8201,thinsp,8204,zwnj,8205,zwj,8206,lrm,8207,rlm,8211,ndash,8212,mdash,8216,lsquo,'
        + '8217,rsquo,8218,sbquo,8220,ldquo,8221,rdquo,8222,bdquo,8224,dagger,8225,Dagger,8240,permil,8249,lsaquo,8250,rsaquo,8364,euro'
        ,entity_encoding: 'named'
        ,file_browser_callback: 'Tiny.loadBrowser'
        ,formats: 'p,h1,h2,h3,h4,h5,h6,div,blockquote,code,pre,address'
        ,frontend: false
        ,height: '400px'
        ,invalid_elements: ''
        ,language: MODx.config['manager_language']
        ,mode: 'none'
        ,nowrap: false
        ,path: Tiny.config.assets_path
        ,path_options: ''
        ,plugin_insertdate_dateFormat: '%Y-%m-%d'
        ,plugin_insertdate_timeFormat: '%H:%M:%S'
        ,relative_urls: true
        ,remove_line_breaks: false
        ,resource_browser_path: Tiny.config.manager_url+'controllers/browser/index.php?'
        ,width: '90%'

        ,buttons1: MODx.config['tiny.custom_buttons1']
        ,buttons2: MODx.config['tiny.custom_buttons2']
        ,buttons3: MODx.config['tiny.custom_buttons3']
        ,buttons4: MODx.config['tiny.custom_buttons4']
        ,css_path: MODx.config['editor_css_path'] || ''
        ,css_selectors: MODx.config['tinymce.css_selectors']
        ,plugins: MODx.config['tiny.custom_plugins']

        ,theme: MODx.config['tiny.editor_theme'] || 'advanced'
        ,theme_advanced_buttons1: MODx.config['tiny.custom_buttons1']
        ,theme_advanced_buttons2: MODx.config['tiny.custom_buttons2']
        ,theme_advanced_buttons3: MODx.config['tiny.custom_buttons3']
        ,theme_advanced_buttons4: MODx.config['tiny.custom_buttons4']
        ,theme_advanced_blockformats: MODx.config['tiny.blockformats']
        ,theme_advanced_resizing: false
        ,theme_advanced_resize_horizontal: false
        ,theme_advanced_statusbar_location: 'bottom'
        ,theme_advanced_toolbar_align: 'left'
        ,theme_advanced_disable: ''
        ,theme_advanced_toolbar_location: 'top'

        ,toolbar_align: MODx.config['manager_direction'] || 'rtl'
        ,use_browser: MODx.config['use_browser'] || true

        ,skin: MODx.config['tiny.skin']
        ,skin_variant: MODx.config['tiny.skin_variant']
        ,object_resizing: MODx.config['tiny.object_resizing'] || true
        ,table_inline_editing: MODx.config['tiny.table_inline_editing'] || true
        ,template_selected_content_classes: MODx.config['tiny.template_selected_content_classes']
    });
    Ext.applyIf(config,{
        width: '90%'
    });
    Tiny.Editor.superclass.constructor.call(this,config);
    this.config = config;
    this.addEvents({
        'load': true
        ,'ajaxload': true
    });
    this.on('render',this.onTinyRender,this);
    this.on('ajaxload',this.onAjaxLoad,this);
};
Ext.extend(Tiny.Editor,Ext.form.TextArea,{
    editor: null

    ,getTinyId: function() {
        return this.getEl().dom.id;
    }

    ,setValue: function(v) {
        var c = tinyMCE.get(this.getTinyId());
        if (c) c.setContent(v);
    }

    ,onTinyRender: function() {
        var oid = Ext.get(this.getTinyId());
        if (!oid) return;

        var s = this.config.tinyConfig;
        s.mode = 'exact';
        tinyMCE.init(s);
        tinyMCE.execCommand('mceAddControl', false,this.getTinyId());
        this.fireEvent('load');
    }

    ,onChange: function() {}
    ,onLoad: function(ed) {
        return false;
        var el = Ext.get(ed.id+'_ifr');
        new MODx.load({
            xtype: 'modx-treedrop'
            ,target: el
            ,targetEl: el.dom
            ,iframe: true
            ,iframeEl: 'tinymce'
            ,onInsert: function(v) {
                tinyMCE.execCommand('mceInsertContent',false,v);
            }
        });
    }
    ,onAjaxLoad: function() {
        var els = Ext.query('.modx-richtext');
        Ext.each(els,function(el,i) {
            el = Ext.get(el);
            tinyMCE.execCommand('mceAddControl', false, el.dom.id);
        },this);

        this.fireEvent('ajaxload');
    }
    ,toggle: function(e,t) {
        t = t.id.replace(/-toggle/,'');
        ed = tinyMCE.get(t);
        if (ed) {
            ed.isHidden() ? ed.show() : ed.hide();
        }
    }

    ,loadBrowser: function(fld, url, type, win) {
        tinyMCE.activeEditor.windowManager.open({
            file: this.config.browserUrl || Tiny.config.browserUrl
            ,width: screen.width * 0.7
            ,height: screen.height * 0.7
            ,resizable: 'yes'
            ,inline: 'yes'
            ,close_previous: 'no'
        },{
            window: win
            ,input: fld
        });
        return false;
    }
});
Ext.reg('tinymce',Tiny.Editor); 
```

# java - LinkedHashMap 的迭代顺序

> ID：14326088
> 
> 赞同：10
> 
> 时间：2013-01-14T20:27:39.087
> 
> 标签：java, hashmap, linkedhashmap

在阅读了`LinkedHashMap`（并多次使用它）的文档之后，我仍然不清楚它的一个属性......是 a 的迭代顺序`LinkedHashMap`：

1.  `entrySet()`与, `keySet()`, 和`values()`, or的插入顺序相同
2.  `entrySet()`与and`keySet()`但 not的插入顺序相同`values()`，或
3.  `entrySet()`仅与?的插入顺序相同

我想第三种情况不太可能，但我想知道是否有人知道（1）或（2）是否为真，因为迭代`values()`可能是一个罕见的用例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:29:47.223

`LinkedHashMap`尊重插入顺序；所以第一选择是好的。

A`Map`是一组`Map.Entry`对象，选项 2 和 3 会很奇怪；）

# twitter - 你如何在 twitter 中包含完整的 url？

> ID：14326091
> 
> 赞同：0
> 
> 时间：2013-01-14T20:27:48.290
> 
> 标签：twitter, href

我正在使用下面的链接参考发布在 twitter 上分享链接和标题，但是当我只点击链接时

```
http://twitter.com/home?status=test+http://www.test.com/cgi-bin/show_post.pl?view_mode=single&post_id=134 
```

但是通过上面的链接生成的推文有 url 直到

```
http://www.test.com/cgi-bin/show_post.pl?view_mode=single 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:30:12.093

```
https://twitter.com/intent/tweet?source=webclient&text=test+http%3A%2F%2Fwww.test.com%2Fcgi-bin%2Fabc.pl%3Fa%3D1%26b%3D2 
```

共享链接中的所有特殊字符，需要转换为十六进制字符

# php - PHP函数数组参数通过引用

> ID：14326093
> 
> 赞同：3
> 
> 时间：2013-01-14T20:27:54.077
> 
> 标签：php, arrays, function, reference

为什么这段代码不能像我预期的那样工作？在 Test(&$array) 函数中，我将 ref 参数设置为全局 $array1 但这不起作用。

```
$array1 = array();
$array2 = array();

function Test(&$array)
{
    global    $array1;
    $array = &$array1;

    $array['inside'] = 'inside';

} 
```

//由函数设置：

```
Test($array2); 
$array2['test1'] = 'test1';

var_dump($array1); //array('inside' => 'inside') ** WHERE IS THE 'test1'  key? **
var_dump($array2); //array('test1' => 'test1')   ** WHERE IS THE 'inside' key? ** 
```

//设置没有函数：

```
$array2 = &$array1;
$array2['test2'] = 'test2';

var_dump($array1); //array('inside' => 'inside', 'test2' => 'test2') ** FINE **
var_dump($array2); //array('inside' => 'inside', 'test2' => 'test2') ** FINE ** 
```

**编辑：**

很明显，如果我将 $array 更改为指向 $array1 那么 $array1 将在函数***外部***具有 'inside' => 'inside' 值。有什么不清楚，如果我设置 $array2['test1'] = 'test1'**为什么不改变这个 $array1**呢？它在函数内部之前“链接”！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T20:33:26.100

当您`$array = &$array1;`在函数内部执行操作时，您正在更改局部变量的值`$array`。

它曾经有对 的引用`$array2`，但现在它包含对 的引用`$array1`。因此，当您修改 时`$array`，您正在修改`$array1`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T21:50:23.323

这是我对 PHP 中的引用的理解，以及为什么该代码没有达到您的预期（如果我弄错了，请有人跳到我身上，我经常使用引用！另外，我确信有比我更好的术语'm call "identifier" and "value";我只是想避免在这两个概念中使用“变量”。）

*   有一堆变量标识符（获取数据的方式）和一堆变量值（数据实际在哪里）
*   对于普通变量，只有一个标识符指向一个值。例如`$foo`，指的是一个特定的值——PHP 内部某个地方的一个桶，它可以保存一个数字、一个字符串等
*   每次你使用正常的赋值操作符，例如`$foo = 42`，PHP 都会查找被指向的值并更新它——所以标识符`$foo`没有改变，但是它指向的值已经改变了。
*   当您分配引用时，例如`$bar =& $foo`，您实际上是在告诉 PHP 更改标识符本身。所以现在`$bar`和`$foo`是两个不同的标识符指向相同的值。`$foo = -1`并且`$bar = -2`都会写入这个值，无论你给它什么名字，你指的是那个值。
*   到现在为止还挺好。但是如果我现在写`$foo =& $bob`呢？由于我更改的是*identifier*，而不是*value*，因此`$foo`开始指向与 相同的值`$bob`，但`$bar`保持在原来的位置。所以现在，改变`$foo`不会再有任何不同`$bar`了。
*   当您通过引用函数传入参数时，也会发生类似的事情。因此，在问题的示例中，该行仍会在名为 的函数内`Test($array2)`创建一个新*标识符*`$array`，但它将其指向与 相同的*值*`$array2`。但是，在函数内部有一行`$array = &$array1`接受新标识符 ( `$array`) 并将其指向与 相同的值`$array1`。`$array2`仍然指向的旧值没有改变。
*   还有其他类似的情况。例如，`global`and`static`关键字创建了一个额外的标识符，指向一个现有的值。如果你写`function foo() { global $foo; $bar = 2; $foo =& $bar; }`，只有被调用的函数的本地标识符`$foo`被更新为指向`$bar`' 的值；`$foo`全局标识符（当您在全局范围内时，恰好也称为）仍然指向其原始值。

PHP 中普通值的引用系统始终只包含*一层间接性*——例如，您不能像在 C 中那样创建指向指向指针的指针的指针。

The only tricky case is objects, which as in many languages have an extra level of indirection all of their own - whereas `$foo = 42; $bar = $foo;` copies the data representing `42` from `$foo`'s value to `$bar`'s, `$foo = new stdClass; $bar = $foo` copies an *object pointer*. So although `$foo` and `$bar` still have separate *values*, and an assignment like `$foo = 42` won't have any effect on `$bar`, `$foo->a = 1;` and `$bar->a = 1` will both end up changing the same object.

# c# - 无需确认的 DropBox 应用程序

> ID：14326099
> 
> 赞同：1
> 
> 时间：2013-01-14T20:28:06.957
> 
> 标签：c#, dropbox, dropbox-api

我编写了一个非常简单的 WPF 应用程序，它以特定间隔将备份上传到我的 DropBox。但我想在家里的小型 WIN 2k3 服务器上使用它。这意味着我不想通过 Internet Explorer 等登录。只需使用 Windows 启动应用程序。目前我需要确认我的帐户可以使用这个应用程序。是否可以在不确认的情况下执行此操作？我遵循[了本](http://cgeers.com/2011/12/29/dropbox-rest-api-part-1-authentication/)指南。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T18:29:00.867

您将需要手动处理一次授权，但您可以保存并重新使用生成的访问令牌（从 /access_token 收到的访问令牌）用于所有未来的调用，而无需进一步的用户干预。

# visual-studio - 如果我不是企业，如何获得 Visual Studio Express Desktop 2012 的产品密钥？

> ID：14326103
> 
> 赞同：5
> 
> 时间：2013-01-14T20:28:14.407
> 
> 标签：visual-studio, visual-studio-2012, registration, product-key

我已经使用 VS Express 2012 快一个月了，现在它说我必须输入产品密钥才能继续使用它。要获得该产品密钥，我被要求注册。只有在创建 Microsoft 帐户（很好，另一个要跟踪的帐户）之后，它才会通知我必须输入有关我的公司、地址、员工和我在其中的角色的详细信息。
个人或业余爱好者有没有办法使用 Express，还是仅适用于企业？有没有办法在不输入虚假商业信息的情况下获得产品密钥（或者虚假信息是对令人沮丧的表格的标准回应）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:54:27.570

Visual Studio 2012 Express for Desktop（或任何其他版本）是免费分发的。它不仅适用于企业。继续注册并使用它。

现在至于要输入什么，我尽量在提出没有很好答案的问题的表格上保持真实。一般来说：

*   公司名称：我的名字（或有时不适用）
*   营业地址：我的家庭住址
*   员工：1
*   我的角色：个体户

# https - 单个 IP 上有多个 HTTPS 域？

> ID：14326106
> 
> 赞同：1
> 
> 时间：2013-01-14T20:28:17.133
> 
> 标签：https

是否可以创建一个在单个公共 IP 地址上为多个 HTTPS 域提供服务的网络服务器？我知道 HTTP 会支持这个，但是 SSL/TLS 呢？

我对诸如通配符证书不感兴趣`*.example.com`，因为我还需要为`*.example.net`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:30:30.800

是的你可以。例如，[来自 GlobalSign](https://www.globalsign.com/ssl/unified-communications/)：

> GlobalSign 的多域 SSL 证书利用主题备用名称 (SAN)，让您可以灵活地使用一个 SSL 证书和一个 IP 地址来保护多达 100 个不同的域名、子域和公共 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T20:48:21.300

您可以通过 SNI 和 SAN/UC 来实现。SNI 需要一些设置工作，而 SAN 是普通的 SSL 证书，但使用了[主题替代名称](http://www.ssl.com/subject_alternative_name)字段。因此，我会推荐 SAN 证书。

# c# - Windows 8 桌面应用程序（不是 Metro 或 Store 应用程序）是否支持 SQL Server CE 3.5？

> ID：14326107
> 
> 赞同：1
> 
> 时间：2013-01-14T20:28:21.070
> 
> 标签：c#, sql-server, windows-8, sql-server-ce-3.5

Windows 8 桌面应用程序（不是 Metro 或 Store 应用程序）是否支持 SQL CE 3.5？

当我尝试使用 SQL Server CE 时，我收到以下错误：

> System.Data.SqlServerCe.SqlCeInvalidDatabaseFormatException (0x80004005)：数据库文件已由 SQL Server Compact 的早​​期版本创建。请使用 SqlCeEngine.Upgrade() 方法进行升级。

提前致谢， 卡洛斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:31:30.490

Windows 8 支持 SQL Server CE。你有一个不同的问题。您正在尝试使用较旧版本的数据库文件，而您拥有较新版本的 SQL Server CE

关注[这个](https://stackoverflow.com/questions/4744527/how-can-i-upgrade-my-sql-server-ce-3-5-sdf-database-to-sql-server-ce-4-0)问题

# rally - 对象权限 - App SDK 与 WEB API

> ID：14326108
> 
> 赞同：2
> 
> 时间：2013-01-14T20:28:33.003
> 
> 标签：rally

我编写了一个报告应用程序，它为一次迭代聚合了大量信息。它所做的一件事是查询单个缺陷以在某些位置显示它们的详细信息。它工作得很好，但是在另一个办公室有一群用户，缺陷信息是空白的。

我看到这些缺陷的查询返回 0 个结果。这让我很困惑，因为如果我对 Web API 中的缺陷运行与运行应用程序的同一用户相同的查询，则会返回该缺陷。用户还可以在 Rally 中看到缺陷。

App SDK 和 Web API 所需的权限有什么不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:04:19.537

Web 服务 API 强制执行与普通 Rally Web 应用程序相同的权限。

我的猜测是您看到以下两个问题之一：

1.  您的应用程序的用户无法看到缺陷，因为他们在一个他们没有权限的项目中。您可以通过向他们发送指向您希望他们能够看到的缺陷之一的链接来测试这一点。
2.  用户选择了不同的项目，或者他们的项目范围与您机器上的不同。如果他们可以看到您在第一步中发送给他们的链接，这可能是罪魁祸首。在这种情况下，您还可以将 App 的范围设置为您有兴趣报告的项目。

下图显示了将应用程序锁定到特定范围的界面。

您只需要“选择特定项目”并找到您有兴趣报告的项目。注意这个

![在此处输入图像描述](../Images/8719f35ae9d586a7294eeed9e6b70fc0.png)

我制作了一个迷你应用程序，它只显示应用程序当前显示的项目 id 位于这个[gist](http://goo.gl/SvMLR)中。

# haskell - Haskell - 找不到模块（隐藏包）

> ID：14326112
> 
> 赞同：0
> 
> 时间：2013-01-14T20:29:14.220
> 
> 标签：haskell, module, package, hidden, cabal

我最近为我正在学习的编程课程安装了 Haskell Platform for Windows。它包括作为编译器的 GHCi 和作为打包系统的 Cabal。我一直在尝试使用 Cabal 安装 Craft3e 包，因为这是我的教科书使用的练习包，但无济于事。要安装 Craft3e，我只需`cabal unpack Craft3e`在命令提示符中输入，它会创建目录“\Craft3e-0.1.0.8”。进入目录后，我输入`cabal install --disable-documentation`，它给了我以下信息：

```
Resolving dependencies...
In order, the following would be installed: 
time-1.2.0.5 (new version)
random-1.0.1.1 (reinstall) changes: time-1.4 -> 1.2.0.5
QuickCheck-2.5.1.1 (reinstall)
Craft3e-0.1.0.8 (new package)
cabal: The following packages are likely to be broken b
haskell-platform-2012.4.0.0
Use --force-reinstalls if you want to install anyway. 
```

使用后`cabal install --disable-documentation --force-reinstalls`，按预期安装。我加载了一个模块来测试它：`ghci PicturesSVG`. 这成功加载。但是，一旦我退出 GHCi 编译器并重新进入它，我就无法再从 Craft3e 包中加载模块；相反，我收到消息：

```
GHCi, version 7.4.2: http://www.haskell.org/ghc/  :? for help
Loading package ghc-prim ... linking ... done.
Loading package integer-gmp ... linking ... done.
Loading package base ... linking ... done.

<command line>:
    Could not find module `PicturesSVG'
    it is a hidden module in the package `Craft3e-0.1.0.8'
    Use -v to see a list of the files searched for.
 Failed, modules loaded: none. 
```

发生了什么？当我进入时，包裹仍然出现`ghc-pkg list`。我试过输入`ghc-pkg expose Craft3e-0.1.0.8`，但提示告诉我：

```
WARNING: cache is out of date: C:/Program Files (x86)/Haskell Platform/2012.4.0.
0\lib\package.conf.d\package.cache
  use 'ghc-pkg recache' to fix. 
```

我已经完成了重新缓存，并重新输入了“公开”命令，但仍然没有结果。

任何解决方案将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:28:12.840

```
cabal: The following packages are likely to be broken b
haskell-platform-2012.4.0.0 
```

这是一个*非常*糟糕的迹象。你应该只`--force-reinstalls`在你非常清楚自己在做什么的情况下使用，作为一个新学习者，你或多或少从定义上不知道。`cabal`应该更严厉地警告。

问题的根源是包的依赖项被指定得太严格，以至于默认情况下无法与 ghc-7.4 或更高版本一起使用，因为它们附带的`time`包版本大于`craft3e`'s`.cabal`文件所允许的版本。解决该问题的正确方法是放松对`time`( 应该由作者完成的依赖绑定，但在固定版本被破解之前，用户应该编辑`.cabal`文件以允许`time-1.4.*`if (s)he has a `ghc >= 7.4`，所以该软件包可以在不重新安装任何东西的情况下构建，因此可能会破坏已安装的软件包）。

重新安装并可能破坏了许多软件包，从命令行运行`time`以评估损坏情况。也许只是重新安装并修复它，也许您需要重新安装更多，也许是整个平台。`random``QuickCheck``ghc-pkg check``ghc-pkg unregister``time-1.2.0.5``random``QuickCheck`

在以某种方式修复损坏的软件包后，转到`Craft3e-0.1.0.8`目录，编辑`Craft3e.cabal`文件，更改行

```
time >= 1.1 && < 1.3, 
```

在该`build-depends`领域

```
time >= 1.1 && < 1.5, 
```

并跑到`cabal install --disable-documentation`那里。

* * *

```
Could not find module `PicturesSVG'
it is a hidden module in the package `Craft3e-0.1.0.8' 
```

正确的。该软件包不公开任何模块，因此它附带的所有模块都是隐藏的（不确定这是否真的是有意的）。您只能从它们所在的目录加载它们，因为 ghci 更喜欢从当前目录（树）加载源文件而不是打包模块。如果您从该目录调用 ghci，它应该加载该文件。（或者您也可以在从另一个目录调用 ghci 时指定目录的路径，`ghci -ipath/to/Craft3e-0.1.0.8 PicturesSVG`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T21:22:30.100

packege`Craft3e`实际上[并没有公开*任何*modules](http://hackage.haskell.org/packages/archive/Craft3e/0.1.0.8/Craft3e.cabal)。cabal 文件似乎主要用于分发和依赖目的，而不是为您提供适当的库接口，因此要加载任何模块，您总是需要显式打开包含它的文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-25T17:44:18.087

我已经更新了 Craft3e 包以考虑新版本的时间。对造成的任何问题表示歉意。

# jsf-2 - jsf页面不能调用bean的方法

> ID：14326120
> 
> 赞同：0
> 
> 时间：2013-01-14T20:29:47.073
> 
> 标签：jsf-2, el, managed-bean

我有这个非常简单的页面，这让我发疯。基本上我在一个bean上有2个按钮调用方法，但每次我得到时它都不会调用它们：

javax.el.MethodNotFoundException：/vues/vehicule/creationVehicule.xhtml @49,94 action="#{creationVehicule.creer}"：找不到方法：fr.efrei.gpa.web.beans.vehicule.ModificationVehiculeBean@1387498.creer ()

这是我的控制器（我删除了导入）

```
@Getter
@Setter
@ManagedBean(name = "creationVehicule")
@ViewScoped
public class CreationVehiculeBean implements Serializable{
    //
    private static final long serialVersionUID = 4790600937909196533L;
    private String immatriculation;
    private Date dateAchat;
    private String marque;
    private String modele;
    private String kilometrage;
    private String puissance;
    private String etat;

    private VehiculeService vehiculeService = new VehiculeDelegate();

    public void creer() throws Exception{
        Vehicule v = new Vehicule();
        v.setImmatriculation(immatriculation);
        v.setKilometrage(kilometrage);
        v.setMarque(marque);
        v.setModele(modele);
        v.setPuissance(puissance);
        v.setEtat("etat");
        v.setDateAchat(dateAchat);
        int id = vehiculeService.create(v);

        FacesContext.getCurrentInstance().getExternalContext().redirect("/web-office/vue/vehicule/rechercherContrat.xhtml&id="+Integer.toString(id));
    }

    public String annuler(){
        return "/vues/vehicule/rechercheVehicule?faces-redirect=true";
    }

} 
```

这是我的观点

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:cogepat="http://cogepat.com/facelets"
    xmlns:rich="http://richfaces.org/rich"
    xmlns:ccc="http://java.sun.com/jsf/composite/compositeForms"
    xmlns:cccg="http://java.sun.com/jsf/composite/compositeGeneral">

<ui:composition template="/templates/template.xhtml">
    <ui:param name="module" value="vehicules" />
    <ui:define name="title">
        #{msg.CreerUnProduit}
    </ui:define>

    <ui:define name="titreModule">
        #{msg.GestionVehicule}
    </ui:define>

    <ui:define name="onglets">
        <ul>
            <li>
                <a class="tab" href="#{facesContext.externalContext.requestContextPath}/vues/vehicule/rechercheVehicule.xhtml">#{msg.RechercherUnVehicule}</a>
            </li>
            <li>
                <a class="selectedTab" href="#{facesContext.externalContext.requestContextPath}/vues/vehicule/creationVehicule.xhtml">#{msg.CreerUnVehicule}</a>
            </li>
        </ul>
    </ui:define>

    <ui:define name="nav">
        <h:form>
            <h:commandLink id="link1" value="#{msg.vehicules}" action="rechercheVehicule.xhtml" />
                >#{msg.creation}
        </h:form>
    </ui:define>

    <ui:define name="titreOnglet">
        #{msg.FormCreationVehicule}
    </ui:define>

    <ui:define name="corpsContenu">
        <ccc:formVehicule bean="#{creationVehicule}" />
        <div class="boutons">
                <h:commandButton type="submit" value="#{msg.creer}" action="#{creationVehicule.creer}" />
                <h:commandButton type="submit" value="#{msg.annuler}" action="#{creationVehicule.annuler}" />
        </div>
        <br/><br/>
    </ui:define>

</ui:composition>
</html> 
```

因此，当我单击其中任何一个按钮时，我都会收到错误消息。这很奇怪，因为我以 excat 相同的方式从其他页面调用其他 bean 中的方法。

![按钮](../Images/c615851240895216025410345bef4ffb.png)

有任何想法吗？谢谢。

我正在使用 JDK 6u35、richfaces 4.2.1.Final、tomcat 7 和 JSF 2.1.6

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:34:53.773

再次查看异常消息，然后特别查看类名：

```
fr.efrei.gpa.web.beans.vehicule.ModificationVehiculeBean@1387498.creer() 
```

那不是`CreationVehiculeBean`您手头的课程的 FQN。这表明您有另一个托管 bean 类`ModificationVehiculeBean`，它使用完全相同的托管 bean 名称并在类加载中获得优先级和/或在托管 bean 注册中是最后一个。

给`ModificationVehiculeBean`类一个不同的托管 bean 名称应该可以解决这个问题。

# ios - AppStore 提交问题

> ID：14326122
> 
> 赞同：0
> 
> 时间：2013-01-14T20:29:55.147
> 
> 标签：ios, app-store, app-store-connect, provisioning-profile

我正在将我的第一个 iOS 应用程序提交到应用程序商店，但我遇到了一个我不知道如何解决的问题。以下是我所做的回顾：

我去了 iOS 开发中心，创建了一个配置和分发配置文件（用于应用商店），并将它们上传到 Xcode。然后我进入 iTunes 连接并完成了整个应用程序。在 iTunes Connect 中，应用程序状态显示为“准备上传”。所以我回到 Xcode，并使用我为这个项目制作的配置文件进行存档。我选择了验证，我一遍又一遍地收到以下错误消息：“应用程序必须准备好上传到 iTunes Connect，然后才能从 Xcode 中验证或提交。” 所以我仔细检查了我的包标识符在我的应用程序中是否正确，它是正确的。那么现在怎么办？谁能告诉我在这个过程中我可能犯的任何新手错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:35:36.990

可能有很多事情，您确定您的配置文件在构建设置中设置正确吗？如果事情仍然出错，请遵循这 2 个教程，祝你好运 :)

[第1部分](http://www.raywenderlich.com/8003/how-to-submit-your-app-to-apple-from-no-account-to-app-store-part-1)

[第2部分](http://www.raywenderlich.com/8045/how-to-submit-your-app-to-apple-from-no-account-to-app-store-part-2)

# silverlight - 如何在应用栏中集成枢轴控件？

> ID：14326123
> 
> 赞同：2
> 
> 时间：2013-01-14T20:29:59.960
> 
> 标签：silverlight, xaml, windows-phone, appbar, pivotitem

Windows Phone 7.5/8 SDK

如何在应用栏中集成枢轴控件？

例如“UC 浏览器”使用它，我认为这是非常有用的东西。[bit.ly/UmyFot](http://bit.ly/UmyFot)

这个示例不起作用，只是为了展示我的想象。

```
<phone:PhoneApplicationPage.ApplicationBar>
    <shell:ApplicationBar Mode="Default" IsMenuEnabled="True">
        <controls:Pivot>
            <controls:PivotItem Header="first">
                <TextBlock Text="an item"/>
                <TextBlock Text="an item two"/>
            </controls:PivotItem>
        </controls:Pivot>
    </shell:ApplicationBar>
</phone:PhoneApplicationPage.ApplicationBar> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:56:20.500

这必须是一个自定义控件，并且不能使用标准的 appbar 控件来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T17:38:36.730

这是自定义实现的控件。

[通过 7 个步骤创建自定义用户控件](http://www.windowsphonegeek.com/articles/Creating-a-WP7-Custom-Control-in-7-Steps)

[在 Expression Blend for WP 中创建自定义用户控件](http://www.developer.nokia.com/Community/Wiki/Creating_custom_user_control_in_Expression_Blend_for_Windows_Phone)

# ios - 将应用程序构建到设备；想要杀死进程然后能够重新启动它，以便我可以在 Xcode 中看到 NSLog 消息

> ID：14326138
> 
> 赞同：0
> 
> 时间：2013-01-14T20:30:58.193
> 
> 标签：ios, xcode

我正在尝试调试应用程序中的问题，该问题似乎仅在构建后在手机上重新启动时才会发生。我想做的是通过usb连接设备，将应用程序构建到设备，终止设备上的进程，然后在设备上重新启动应用程序，以便将NSLog消息传输到Xcode。这可能吗？

如果有人知道该怎么做，请提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:33:48.037

如果您打开管理器（默认为 cmd+shift+2）并转到设备选项卡，您应该能够通过选择该设备下的“控制台”来查看任何已连接设备的控制台

# javascript - 在javascript中显示下一个'LI' - 同标题'LI'

> ID：14326141
> 
> 赞同：0
> 
> 时间：2013-01-14T20:31:10.960
> 
> 标签：javascript

我有一些 Javascript/PHP 代码以一种循环方式引入 RSS 提要，因此我可以在它的开头和结尾编写一些代码。（但我想我在开头和结尾写的文字可能每次都需要相同。）

所以我真正需要的是一些 javascript 来隐藏除第一个之外的所有其他 li，并且仅在单击下一个/上一个按钮时显示它们。我宁愿不使用 jquery，因为它将成为一个迷你 1 页应用程序（但如果需要，我会接受！）

```
<img src="previous.jpg" onClick="javascript_to_go_to_previous_li">
<ul>
<li id="sameidasrest">Post 1</li>
<li id="sameidasrest">Post 2</li>
<li id="sameidasrest">Post 3</li>
<li id="sameidasrest">Post 4</li>
</ul>
<img src="next.jpg" onClick="javascript_to_go_to_next_li"> 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:05:50.057

首先，您应该真正为您的`<ul>`元素使用标识符。然后，您不能对所有`<li>`元素使用相同的 ID。每个元素都必须有自己的 ID，或者更好的是，您可以使用 HTML + CSS + JavaScript 的组合来实现您的目标。

```
HTML:
<ul id="myList" class="collapsed">
  <li>Post 1</li>
  <li>Post 2</li>
  <li>Post 3</li>
  <li>Post 4</li>
</ul>
<button id="btnTest">Click Me</button>

CSS:
ul.collapsed li:first-child {
  display:block;
}

ul.collapsed li {
  display:none;
}

JS:
document.getElementById('btnTest').addEventListener('click', function(){
  var list = document.getElementById('myList'),
      classes = list.className;
  if ( /collapsed/.test( classes ) ) {
    list.className = classes.replace( 'collapsed', '' );
  } else {
    list.className = classes + ' collapsed';
  }
}); 
```

您可以在[http://jsfiddle.net/ragnarokkr/ZafdC/对其进行测试](http://jsfiddle.net/ragnarokkr/ZafdC/)

在这个例子中，我定义了列表和一个按钮。该按钮的作用类似于开关。每次单击它时，列表都会显示和隐藏元素。`<ul>`所有这些都只是从元素中添加和删除 CSS 类。

或者，您可以使用一些框架，例如 jQuery，在这种情况下，您可以将上面的 JS 更改为：

```
$('#btnTest').on('click', function(){
  $('#myList').toggleClass('collapsed');
}); 
```

[在http://jsfiddle.net/ragnarokkr/cUYPq/](http://jsfiddle.net/ragnarokkr/cUYPq/)测试它的代码

* * *

这个例子是使用 HTML+CSS 和纯 JavaScript 交互地显示/隐藏单个列表项：

```
HTML:
<ul id="myList">
  <li class="show">Post 1</li>
  <li class="hide">Post 2</li>
  <li class="hide">Post 3</li>
  <li class="hide">Post 4</li>
</ul>

<button id="btnShowOne">Show Item</button>
<button id="btnHideOne">Hide Item</button>

CSS:
.hide {
  display: none;
}

.show {
  display: block;
}

JS:
function iterateAndToggleClass( elements, classNameFind, classNameReplace, isTopDown ) {
  if ( isTopDown ) {
    for ( var i = 0; i < elements.length; i++ ) {
      var element = elements[i];
      if ( element.className === classNameFind ) {
        element.className = classNameReplace;
        return;
      }
    }
  } else {
    for ( var i = elements.length - 1; i >= 0; i-- ) {
      var element = elements[i];
      if ( element.className === classNameFind ) {
        element.className = classNameReplace;
        return;
      }
    }
  }
}

document.getElementById('btnShowOne').addEventListener('click', function(evt){
  evt.preventDefault();
  evt.stopPropagation();

  var list = document.getElementById('myList'),
      items = list.getElementsByTagName('li');

  iterateAndToggleClass( items, 'hide', 'show', true );
});

document.getElementById('btnHideOne').addEventListener('click', function(evt){
  evt.preventDefault();
  evt.stopPropagation();

  var list = document.getElementById('myList'),
      items = list.getElementsByTagName('li');

  iterateAndToggleClass( items, 'show', 'hide', false );
}); 
```

当然这不是优化的代码，但我希望它足够清晰。您可以在[http://jsfiddle.net/ragnarokkr/swGEY/对其进行测试](http://jsfiddle.net/ragnarokkr/swGEY/)

# php - 01 值与总和的差值

> ID：14326143
> 
> 赞同：0
> 
> 时间：2013-01-14T20:31:13.623
> 
> 标签：php, floating-point

我有一个小问题要获得正确的发票总额。

我有 sql 表

```
unit_price decimal(25,2)
vat varchar(55)
total_novat decimal(25,2)
total_vat decimal(25,2)
grand_total decimal(25,2) 
```

获取值的 php 脚本是：

```
$discount = 2
$total_novat += qty * unit_price / discount
$total_vat = qty * vat / 100
$grand_total = total_novat + total_vat 
```

很好，现在如果我制作这个简单的脚本，值的结果是：

```
unit_price: 1 * 241.14 / 2 = 120.57
total_novat: 120.57 * 24 / 100 = 28.94
grand_total: 120.57 + 28.94 = 149.51 
```

问题是，当我将此代码放入 php 时，结果是 149.50 而不是 149.51

任何帮助表示赞赏。

执行计算的完整脚本：

```
<?php
$inv_total_no_tax = 0;

                for($i=1; $i<=TOTAL_ROWS; $i++){
                    if( $this->input->post($quantity.$i) && $this->input->post($product.$i) && $this->input->post($unit_price.$i) && $this->input->post($discount.$i) ) {

                        $tax_id = $this->input->post($tax_rate.$i);
                        $tax_details = $this->sales_model->getTaxRateByID($tax_id);
                        $taxRate = $tax_details->rate;
                        $taxType = $tax_details->type;  
                        $tax_rate_id[] = $tax_id;               

                        $inv_quantity[] = $this->input->post($quantity.$i);
                        $inv_product_code[] = $this->input->post($product.$i);
                        $inv_unit_price[] = $this->input->post($unit_price.$i) / $this->input->post($discount.$i);
                        $inv_unit_discount[] = $this->input->post($discount.$i);
                        $inv_gross_total[] = (($this->input->post($quantity.$i)) * ($this->input->post($unit_price.$i)) / ($this->input->post($discount.$i)));

                        if($taxType = 1) {
                        $val_tax[] = (($this->input->post($quantity.$i)) * ($this->input->post($unit_price.$i)) / ($this->input->post($discount.$i)) * $taxRate / 100);
                        } else {
                        $val_tax[] = $taxRate;
                        }

                        if($taxType = 1) { $tax[] = $taxRate."%"; } else { $tax[] = $taxRate;  }

                        $inv_total_no_tax += (($this->input->post($quantity.$i)) * ($this->input->post($unit_price.$i)) / ($this->input->post($discount.$i)));

                    }
                }

                 $total_tax = array_sum($val_tax);
                 $total = $inv_total_no_tax + $total_tax; 
```

php脚本中的圆形选项我将十进制mysql更改为varchar。

```
if i use $total = round($inv_total_no_tax + $total_tax, 2); the result is: 149.5
if i use $total = round($inv_total_no_tax + $total_tax, 3); the result is: 149.501 
```

解决方案：

在将它介绍给 mysql 之前，我已经应用了这个字符串。

```
number_format($value, 2, null, ''); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:50:32.977

问题在于您在示例计算中所做的假设

```
unit_price: 1 * 241.14 / 2 = 120.57
total_novat: 120.57 * 24 / 100 = 28.94
grand_total: 120.57 + 28.94 = 149.51 
```

如果在不四舍五入的情况下对其进行处理，它将如下所示（这是您的 php 代码中发生的情况）：

```
unit_price: 1 * 241.14 / 2 = 120.57
total_novat: 120.57 * 24 / 100 = 28.9368
grand_total: 120.57 + 28.9368 = 149.5068 
```

如果将此值`149.5068`插入到 mysql 中，它将被存储为`149.50`（如果存储在十进制列中，mysql 将截断而不是舍入附加数字）。相反，您需要对最终计算进行四舍五入，以便最终值为`149.51`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:39:26.850

而不是小数（25,2）尝试小数（25,3），然后在完成所有计算后将您的数字四舍五入。这将使您的小数更准确。通常最好存储尽可能准确的数字，然后在完成所有计算后对其进行格式化。

# python - 在类中创建对他自己类型的引用

> ID：14326144
> 
> 赞同：3
> 
> 时间：2013-01-14T20:31:27.720
> 
> 标签：python, google-app-engine, google-cloud-datastore

我真的不知道如何写这个问题的标题：P

所以在谷歌应用引擎中，我想创建一个可以拥有相同类型“儿子”的类：

```
class Chapter(db.Model):
    title = db.StringProperty(required=True)
    note = db.TextProperty()
    father = db.ReferenceProperty(Chapter, collection_name='sons')
    order = db.IntegerProperty(default=0) 
```

我得到了错误

```
NameError: name 'Chapter' is not defined 
```

有可能创建这个吗？或者这是一个非常愚蠢的想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T20:33:22.300

您需要使用[SelfReferenceProperty](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#SelfReferenceProperty)

```
class Chapter(db.Model):
    title = db.StringProperty(required=True)
    note = db.TextProperty()
    father = db.SelfReferenceProperty(collection_name='sons')
    order = db.IntegerProperty(default=0) 
```

# sql-server - 是什么导致 DMV 显示 NULL 查询计划？

> ID：14326146
> 
> 赞同：1
> 
> 时间：2013-01-14T20:31:29.100
> 
> 标签：sql-server, sql-server-2008-r2

当我执行这个简单的 SP 然后从随后的 DMV 查询中检查查询计划时，查询计划返回为 NULL。但是，如果我注释掉 SP 中的 else 块（或将其更改为不引用临时表），DMV 查询确实会显示查询计划。知道是什么导致了这种差异吗？NULL 查询计划是否意味着没有缓存？我正在使用 SQL Server 2008 R2。

```
CREATE PROCEDURE dbo.SampleSp
(
    @Option TINYINT
)
AS
    DECLARE @RowCount INT;

    -- Get ID into local temp table

    CREATE TABLE #P (ID INT PRIMARY KEY);
    INSERT INTO #P
    VALUES (1), (2)

    IF @Option = 1
    BEGIN
        SELECT ID FROM #P
    END
    ELSE
    BEGIN
        SELECT ID FROM #P
    END
GO

    --Call SP
    EXEC dbo.SampleSp 1
GO
    --DMV Query to find query_plan
    SELECT  
            CP.objtype, 
            CP.usecounts AS Ct, 
            ST.last_execution_time,
            SUBSTRING(Text, (statement_start_offset / 2) + 1, (CASE statement_end_offset WHEN -1 THEN DATALENGTH(Text) ELSE statement_end_offset END  - ((statement_start_offset / 2) + 1))) AS query,
            T.text,
            PL.query_plan
    FROM sys.dm_exec_cached_plans AS CP WITH(NOLOCK)
    CROSS APPLY sys.dm_exec_sql_text(CP.plan_handle) AS T
    OUTER APPLY sys.dm_exec_query_plan(CP.plan_handle) AS PL
    LEFT OUTER JOIN sys.dm_exec_query_stats AS ST WITH(NOLOCK) ON ST.plan_handle = CP.plan_handle
    WHERE 1=1
    AND ST.last_execution_time > DATEADD(MINUTE, -5, GETDATE())
    AND T.text LIKE '%SampleSp%'
    AND T.text NOT LIKE '%dm_exec_cached_plans%'
    ORDER BY ST.last_execution_time DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:37:13.953

我相信我想通了。似乎该计划将显示为 NULL，直到 SP 中的每个分支都已执行。（您可以通过使用参数值为 2 再次调用 SP 来看到这一点，然后该计划确实出现了。）如果只执行了部分 SP，SQL Server 会在内部缓存而不是计划（您可以看到这个通过查看使用计数，以及我为证明这一点所做的一些其他更广泛的测试），但它不会出现在我使用的 DMV 查询中。这就提出了一个问题：您如何看待仅已缓存的那部分 SP 的计划？

# android - 意图启动多项活动

> ID：14326152
> 
> 赞同：0
> 
> 时间：2013-01-14T20:31:53.813
> 
> 标签：android, google-maps, android-intent, google-earth, geo

我正在尝试编写一个活动，该活动将在按下按钮时使用 geo:// URL 显示位置。我的问题是，在选择谷歌地图后，谷歌地球活动立即在同一个任务中启动。

代码

```
public void onViewOnMapClicked(View view)
{
    Intent i = new Intent(Intent.ACTION_VIEW, Uri.parse("geo://0,0"));

    if(i != null){
        try {
            this.startActivity(i);
        } catch (ActivityNotFoundException e) {
            e.printStackTrace();
        }
    }
} 
```

奇怪的是，如果我选择谷歌地球，就没有问题。然而，该位置没有得到妥善处理。那可能是同一个问题吗？我无法摆脱我在这里做错了什么的感觉。

我已经在运行 ICS 的三星 Galaxy S3 和运行 JB 4.2 的 Nexus 7 上对此进行了测试。API 级别为 15。

# svn - 带有 iis 7 的可视 svn 服务器

> ID：14326154
> 
> 赞同：1
> 
> 时间：2013-01-14T20:32:00.860
> 
> 标签：svn, iis-7, repository, visualsvn, visualsvn-server

我正在使用服务器开发一个`php`带有 svn 颠覆系统的项目。`Visual SVN`

我的私人网络服务器（`IIS 7`）中有一些网站，我想让我的存储库中项目的主干文件夹可以通过`IIS`.

那有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:07:13.323

如果你*真的*问

“如何从存储库发布我的代码以便在 IIS 驱动的站点中使用它”

您必须阅读有关 Subversion 提交后挂钩的信息，在您的情况下，它可以对 repo 中的数据执行任何操作 -`svn export`到您的 IIS 站点的根目录，或者，如果您希望将站点根目录视为工作副本`svn up`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:37:57.770

VisualSVN 将 Apache httpd 安装为 Web 服务器。

我不相信你可以安装[Subversion 在 IIS 下工作](https://superuser.com/a/306160/114804)。然而，这是 18 个月前的答案，所以事情可能已经改变，但我对此表示怀疑。我确实找到了一个名为[RocketSVN](https://code.google.com/p/rocket-svn-server/)的 Google Code 项目，但它看起来已被弃用。

[我在SVNISapi](http://www.svnisapi.com/index.html)找到了一个商业包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:24:24.287

一种解决方案是创建一个`.bat`每天/每周执行的文件服务器端。

这是简单的批处理文件

```
svn export -r HEAD file:///C:/repo/proj C:\root\proj --force 
```

删除目录'因为导出命令不允许覆盖现有文件夹。

是`C:\root\`文件`iis7`夹。

# javascript - 从 javascript 文件加载 css 时，如何在加载 css 文件之前隐藏 html 输出？

> ID：14326156
> 
> 赞同：0
> 
> 时间：2013-01-14T20:32:08.453
> 
> 标签：javascript, css, plugins, load, hide

当 javascript 创建包含我的所有输出的父 div 时，我用`element.style.display = 'none'`. 出于性能目的，我认为让我的插件（javascript）在开始时加载 css 文件是最快的方法。然后，css 将在加载后再次使父 div 可见。但是，如果在创建 div 之前加载 css 文件，那么当它到达代码中的那个点时，javascript 是否仍会隐藏它？在这里使用 !important 标签似乎很便宜。或者，在创建 div 之后加载 css 文件只会意味着输出需要更长的时间才能显示给用户。我想知道是否有解决此问题的标准解决方案，但一直找不到。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:39:19.110

```
<style>
   body { display: none; }
</style>
<script>
   window.onload = function(){ document.body.style.display = null; }
</script> 
```

您可能会检查是否加载了 CSS 链接引用，这是更高级别的，但我推荐 David Flanagan 的 JavaScript 书。

更好的方法是使用纯 CSS - 它会自动发生并且不等待文档加载。

```
<style>
   body { display: none; }
</style>
<link rel="stylesheet" href="some.css"> 
```

在`some.css`文件中：

```
body { display: inherit; } 
```

不确定`inherit`，也许`block`会起作用。尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:39:57.210

您可以使用 jQuery 并通过以下方式解决此问题：

```
$(document).ready( function() {
   $(element).show();
}); 
```

或者

```
$(window).load( function() {
   $(element).show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T20:36:36.240

当您创建包装器 DIV 时，give 是一个类似于“hideMe”的类名，并且将 hideMe 定义为`display:none`. 当您想显示它时，请删除该类（或重新定义它）。

# ios - 音频 AVAssetWriter 静音

> ID：14326160
> 
> 赞同：0
> 
> 时间：2013-01-14T20:32:17.867
> 
> 标签：ios, audio, avassetwriter

我正在尝试使用 AVAssetWriter 录制音频，并且在输出文件中出现奇怪的跳过。

我已经用另一个可以工作的应用程序检查了代码 - 有人目睹了这种不一致的行为吗？

10倍！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:34:48.630

我以前亲眼目睹过这件事，这让我发疯了！！

检查您是否在代码中的其他地方执行繁重的处理 - 同时。结果对我来说，长时间将 cpu 带到 100% 会导致它飞跃。

# multithreading - 后台进程是否需要 CFThread 连接？

> ID：14326161
> 
> 赞同：3
> 
> 时间：2013-01-14T20:32:22.057
> 
> 标签：multithreading, coldfusion, cfthread

**背景：**

这是从外部站点检索数据（外部站点提供用于通过 Web 服务检索数据的 API）并使用新信息更新数据库的计划作业的一部分。它正在检索大约 3,500 个数据项。我当前的计划作业创建`CFThread`了一次运行 10 个线程的任务块，并在开始下一个 10 个线程块之前加入它们。

**代码：**

```
<cfset local.nMaxThreadCount = 10>
<!---retrieve a query that contains the items that need to be updated, approximately 3,500 items--->
<cfset local.qryItemsNeedingUpdate = getItemsNeedingUpdate(dtMostRecentItemPriceDate = local.qryMostRecentItemPriceDate.dtMostRecentItemPrice[1])>
<cfset local.nThreadBlocks = Ceiling(local.qryItemsNeedingUpdate.RecordCount / local.nMaxThreadCount)>

<cftry>
<cfloop index="local.nThreadBlock" from="1" to="#local.nThreadBlocks#">
    <cfif local.nThreadBlock EQ local.nThreadBlocks>
        <cfset local.nThreadCount = local.qryItemsNeedingUpdate.RecordCount MOD local.nMaxThreadCount>
    <cfelse>
        <cfset local.nThreadCount = local.nMaxThreadCount>
    </cfif>
    <cfset local.lstThreads = "">
    <cfloop index="local.nThread" from="1" to="#local.nThreadCount#">
        <cfset local.nQryIdx = ((local.nThreadBlock - 1) * local.nMaxThreadCount) + local.nThread>
        <cfset local.vcThreadName = "updateThread#local.qryItemsNeedingUpdate.nItemID[local.nQryIdx]#">
        <cfset local.lstThreads = ListAppend(local.lstThreads, local.vcThreadName)>

        <!---create the attributes struct to pass to a thread--->
        <cfset local.stThread = StructNew()>
        <cfset local.stThread.action = "run">
        <cfset local.stThread.name = local.vcThreadName>
        <cfset local.stThread.nItemID = local.qryItemsNeedingUpdate.nItemID[local.nQryIdx]>

        <!---spawn thread--->
        <cfthread attributecollection="#local.stThread#">
            <cfset updateItemPrices(nItemID = attributes.nItemID)>
        </cfthread>
    </cfloop>

    <!---join threads--->
    <cfthread action="join" name="#local.lstThreads#" />
</cfloop>
    <cfcatch type="any">
<cflog text="detailed error message logged here..." type="Error" file="myDailyJob" application="yes">
    </cfcatch>
</cftry> 
```

**问题：**

后台进程需要这种逻辑吗？也就是说，`CFThread action="join"`需要吗？线程没有显示任何内容，并且线程是独立的（不要依赖其他线程或产生它们的进程）。线程更新数据库中的价格并死掉。是否需要限制线程，即一次运行 10 个并加入它们？进程可以循环并一次创建所有 3,500 个线程吗？ColdFusion 会将额外的线程排队并在有时间时运行它们吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T22:02:40.613

除非您需要在线程完成后将信息输出到页面，否则不需要“加入”。

线程将排队；这因您运行的 ColdFusion 版本而异。

但是，对于您正在做的事情，线程不是您想要的。您想使用消息队列，例如 ActiveMQ 或 Amazon SQS。您可以使用 Adob​​e CF 附带的 ActiveMQ 网关之类的事件网关，或者如果您使用不同的消息队列或 CF 引擎，则可以编写自己的网关。（例如，我编写了一个使用 Amazon SQS 和 Railo 事件网关的消息传递系统，用 CFML 编写）

# sql-server - 如何同步两个 SQL Server 数据库

> ID：14326163
> 
> 赞同：0
> 
> 时间：2013-01-14T20:32:30.673
> 
> 标签：sql-server, database, sql-server-2008, sync

我有两个结构相同的 SQL Server 2008 数据库。

一个是本地的，一个是在线的。数据插入本地数据库，然后我想与在线数据库同步。

部分数据也将通过ac#win app更新到在线数据库中。所以我想将这些数据与本地数据库同步。

满足这些要求的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T20:50:42.037

复制？MS 同步框架？

说明书？至少复制是任何使用 SQL Server 的人都应该听说过的东西。自第 7 版以来，它只是 SQL Server 的一部分，大约 15 年了。并记录在案。

# ruby-on-rails - 高可用性 Rails 部署

> ID：14326171
> 
> 赞同：2
> 
> 时间：2013-01-14T20:32:59.643
> 
> 标签：ruby-on-rails, high-availability

我正在为安全的高可用性环境中的 Rails 制定部署策略和脚本。我们当前的脚本是自制的 shell 脚本。我们希望使用更标准的流程。但...

我有点难以相信拥有高可用性生产环境的任何人都会从代码树的实例运行部署。如果我要这样做，我会在那里拥有代码树，只是为了部署，因为我无法从开发环境访问我的生产环境。

我不会使用 vagrant，因为我认为它不适合生产。

我不打算使用虚拟盒子，因为我不想要开销。

对于如何使环境高度可用，我确实有一个单独的计划，所以这个问题与此无关。

我只需要一种体面的方式来将 Rails 部署到安全的生产环境中。对我来说，在我的生产 LAN 上的机器上为每个项目创建一个特殊的树实例似乎很愚蠢，这样我就可以部署到其他机器上，特别是因为部署将从中获取要使用的应用程序版本使用标签的存储库。

任何人都可以帮忙吗？有战争故事吗？我改变观点的明确理由？

编辑：评论中的每个问题：

生产有一个网络层，即ssl、防火墙、基于名称的转发。应用程序层是 rails 所在的位置，只有当您通过网络层（或 vpn-ed）进行 ssh-ed 以进行生产监控或管理时才能访问，但我不能直接从我的开发框中进行 scp 或 rsync 或 ssh . db 层可从应用层服务器访问。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T14:59:24.390

分布式部署有一个相对较新的部署框架，称为[Juju](https://juju.ubuntu.com/)。我从来没有将它用于 Rails。我用于大型 Rails 部署的唯一工具是 chef，但我和一个朋友正在将 Juju 用于其他一些 (jvm) 项目，它非常强大。

这是一个很好的开始使用 rails 和 juju [的教程。](http://www.jorgecastro.org/2012/11/16/deploying-your-rails-application-in-the-cloud-via-juju/)

您可以（当前）在 github 上找到一个[rails juju 魅力](https://github.com/charms/rails)

juju 的优点之一是您可以拥有一个服务器来管理到其他服务器的部署。这样您就不必打开服务器本地机器进行部署。

祝你好运！

# php - codeigniter 如何管理从母控制器到两个子控制器的对象

> ID：14326176
> 
> 赞同：2
> 
> 时间：2013-01-14T20:33:07.627
> 
> 标签：php, codeigniter, controller

* * *

我为分页创建了 2 个控制器，为模型创建了 1 个控制器，为数据库创建了一个模型。和 2 个控制器扩展到其他控制器。像这样

```
class MY_Data extends CI_Controller{
     public $layout;
     public $xe_member;
     public $member_srl;
     public $is_logged_in = FALSE;
     public $is_registerd = false;
     public $director = array();
     public $fighters = array();
     public $logged;

    function __construct(){
         parent::__construct();
         $this->load->model('member_login');
         $this->load->model('db_log');
         $this->layout = 'include/template';
    }
    function load_data(){
         $this->xe_member = $this->member_login->member_check();
         $this->member_srl = $this->xe_member['member_srl'];
         $this->is_logged_in = $this->xe_member['is_logged'];
         $this->is_registerd = $this->member_login->register_check
                              ($this->member_srl);
         if($this->is_registerd){
            $this->director = $this->db->where('member_srl', $this->member_srl)->
            limit(1)->get('fc_directors')->row();
            $this->fighters = $this->db->where('member_srl', $this->member_srl)->
            get('fc_fighters')->result();
         }
     }
} 
```

登录

```
class Login extends MY_Data {
public function __construct()
{
    parent::__construct();
    $this->load->model('member_login');
}
public function index()
{
    if (isset($_COOKIE['PHPSESSID'])) {
        $data['PHPSESSID'] = $_COOKIE['PHPSESSID'];
    }else {
        $this->load->view('include/template', 'login_error');
        die();
    }
    $this->load_data();

    if($this->is_logged_in)
    {

        if ($this->is_registerd) {

            $data['log'] = $this->db_log->read_all_log();
            $data['main_contents'] = 'main/main';
            $this->load->view('include/template', $data);
        } else {

            redirect('registration');
        }
    } else {
        $data['main_contents'] = 'login_error';
        $this->load->view('include/template', $data);
    }

} 
```

和主要

```
class Main extends MY_Data {
function __construct() {
    parent::__construct();
}
function index(){
    if(!$this->logged){
        $data['main_contents'] = 'login/login_button';
        $this->load->view($this->layout,$data);
    }else {
        $data['main_contents'] = 'main/main';
        $this->load->view($this->layout,$data);             
    }
} 
```

我知道这不是完美的代码，但是......我想在这里做的：
首先调用登录到 db_data 将在对象中提取数据库存储并主要获取对象来显示。但是在使用 main 时，我总是从母控制器那里得到空值。

我只是将控制器对象用于其他控制器。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:17:43.907

Main 函数索引中的第一行不应该是

```
parent::index(); 
```

我猜你想扩展你在登录类中的索引函数。

现在不执行父类中的索引并且不调用以下行：

```
$this->load_data() 
```

其中包含

```
$this->member_login->member_check(); 
```

这能解决你的问题吗？

# visual-c++ - _read 和 fscanf 的区别

> ID：14326186
> 
> 赞同：0
> 
> 时间：2013-01-14T20:33:34.240
> 
> 标签：visual-c++, scanf

我正在尝试从文件中读取数据并且很困惑。该文件包含三列数据。使用 fscanf 它给出了正确的值。

```
FILE* fp = fopen("test.txt");
double buffer[3];
fscanf(fp,"%lf %lf %lf",&buffer[0],&buffer[1],&buffer[2]); 
```

现在我正在尝试使用 _read 读取同一组值。这给了我所有错误的价值观。

```
int fh;
char buffer[50];
_sopen_s( &fh,CStringA(PointFile),_O_RDONLY|_O_BINARY,_SH_DENYNO,0);
_read(fh,buffer,sizeof(double)*3); 
```

如果有人能告诉我我做错了什么，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:42:25.927

第一个代码片段读取`double`s 的文本表示并对其进行转换。这就是`*scanf`函数族的作用。

有效输入示例：

```
1.0 2.7182818 3.14159265358 
```

第二个代码片段从文件中读取一些（可能是 24 个）字节，而不进行解析或转换。您没有展示如何从缓冲区中提取双打。如果`*(double *)buffer`您的文件中有 3 个特定于平台的双精度的“转储”，使用适当的创建`fwrite`或`_write`。

有效输入示例（十六进制转储，假设 64 位 IEEE 浮点数）：

```
00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 
```

（如果您使用的是 POSIX 读取，这里将警告短读取的可能性。但是，`_read`建议`_s_open`使用 Microsoft CRT，除非到达文件末尾，否则它不会在二进制模式下进行短读取）。

# git - 将 git 和 hudson 与一个包含多个项目的存储库一起使用的最佳实践是什么

> ID：14326187
> 
> 赞同：1
> 
> 时间：2013-01-14T20:33:35.787
> 
> 标签：git, jenkins, continuous-integration, hudson, git-submodules

我之前也提出过类似的问题，但在做了一些研究并敲了很长时间之后，我得出的结论是我需要更多的指导。

我们目前已经从 SVN 迁移到 GIT，最大的影响是我们的 CI 服务器。由于您无法在 GIT 中签出子目录。

我们的存储库由多个项目组成，我们希望保持这种状态，因为每个开发人员都会创建自己的故事分支，并在完成故事后与主分支合并。

另一方面，我们无法使用 git 存储库配置 Hudson 或 Jenkins，以便我们可以为每个子文件夹创建单独的任务，这些子文件夹对应于单独的 maven 项目。

我知道它建议使用子模块，如果我们将每个 maven 项目配置为子模块，我们的子分支将不会以我们想要的方式进行。

有点感觉应该可以以这种方式进行配置，但到目前为止还没有取得任何进展。

在这种情况下我们应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:46:27.947

我同意@KingCrunch 的说法，即每个项目都应该有一个单独的仓库，但是如果由于某种原因你必须保留你的单一仓库，你可以这样做：

1.  对于每个 Jenkins 构建，单击 Git 部分中的 Advanced 按钮并设置 Included / Excluded Regions 字段，以便您仅轮询包含正在构建的项目代码的子文件夹中的更改。
2.  设置作业的 Maven 构建步骤以从适当的子目录中获取 POM 文件。

# d3.js - .ticks 属性不会影响我的图表

> ID：14326194
> 
> 赞同：0
> 
> 时间：2013-01-14T20:34:16.930
> 
> 标签：d3.js

我的定量轴上有 24 个类别，我想显示大约 6 个类别。我尝试将 .ticks(6) 添加到我的轴上，就像这样

```
var xAxis = d3.svg.axis()
              .scale(x)
              .orient("bottom")
              .ticks(6); 
```

但我的图表仍然显示所有 24 个类别。我使用的规模是

```
var x = d3.scale.ordinal()
          .rangeRoundBands([0, width], .1, 1); 
```

知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:46:29.467

该`.ticks()`函数对序数轴没有任何作用。根据您想要做什么，您可能无论如何都不需要轴 - 只需将您想要的标签与点/条/您为类别添加的任何内容一起放置。

# ruby-on-rails - Rails 3.2.11 Nodejs 符号查找错误

> ID：14326204
> 
> 赞同：1
> 
> 时间：2013-01-14T20:35:18.123
> 
> 标签：ruby-on-rails, ruby-on-rails-3, node.js

我最近从 Rails 3.2.8 更新到 3.2.11 的主要安全补丁......虽然我不确定这是否与我的问题直接相关。我有一个带有乘客/apache的生产设置，并在尝试访问该应用程序时得到以下信息：

```
 ActionView::Template::Error (nodejs: symbol lookup error: nodejs: undefined symbol: _ZN2v82V837AdjustAmountOfExternalAllocatedMemoryEi

    (in /home/cb/public_html/production/app/assets/javascripts/admin.js.coffee)):
    4:   <title>cb</title>
    5:   <link href='http://fonts.googleapis.com/css?family=Questrial|Poiret+One' rel='stylesheet' type='text/css'>
    6:   <%= stylesheet_link_tag    "application", :media => "all" %>
    7:   <%= javascript_include_tag "application" %>
    8:   <%= csrf_meta_tags %>
    9: </head>
    10: <body id="main">
    app/views/layouts/application.html.erb:7:in `_app_views_layouts_application_html_erb___2747373451058239248_18220480' 
```

它表示该符号在 admin.js.coffee 中被引用，但该文件中没有代码......只有使用控制器生成时的默认注释。

我在这台服务器上有另一个 Rails 应用程序仍在运行 3.2.8，几乎完全相同的 gem 没有问题。此错误仅在生产服务器上运行时出现（CentOS 6.2，NodeJS v0.6.18）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-12T16:46:58.437

我遇到了同样的问题。我不确定有什么区别，但是将 nodejs 升级到最新版本（v0.8.19）对我来说是诀窍。我之前已经使用 yum 存储库安装了节点，但是包维护者似乎有一段时间没有更新了。所以，这就是我所做的：

`yum remove nodejs`

```
wget http://nodejs.org/dist/v0.8.19/node-v0.8.19.tar.gz
tar zxvf node-v0.8.19.tar.gz
cd node-v0.8.19
./configure --prefix=/usr/local
make
make install 
```

# perl - 通过执行进程任务在 SSIS 中运行 Perl 编辑器

> ID：14326209
> 
> 赞同：0
> 
> 时间：2013-01-14T20:35:41.657
> 
> 标签：perl, ssis

我是 SSIS 的新手，并且正在（希望）自动完成一些日常任务。

我已经配置了一个执行进程任务来运行一个以脚本为参数的 Perl 编辑器。我的问题是它只打开程序但不运行（F5）。在没有任何人工干预的情况下使程序自行运行的过程是什么？我是否使用了正确的任务来完成这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:51:38.043

在您的[Execute Process Task](http://msdn.microsoft.com/en-us/library/ms141166.aspx)中，确保您引用的是 perl 解释器而不是编辑器。假设 ActiveState 的 ActivePerl 安装，解释器将是

*   C:\Perl\perl.exe
*   C:\Perl64\perl.exe

# windows - W32TM /NTPTE 命令如何工作？如何显示当前时间？

> ID：14326210
> 
> 赞同：3
> 
> 时间：2013-01-14T20:35:42.990
> 
> 标签：windows, batch-file, cmd, command-prompt, ntp

到目前为止，我得到的是**w32tm /ntpte**使用 2^32 切片，从 1900/1/1 开始，到 2036/7/2 结束。根据我的计算，每个周期大约是 1 秒。不好的是，周期没有被连续枚举，一切都是基于 2 次幂的周期。 [它使用 NTP 协议](http://www.eecis.udel.edu/~mills/y2k.html)（​​该文档不是令人愉快的阅读）和我想得到一个时代和当前时间戳并使用 2^32 来计算所需的日期 - 但我不知道如何获取当前时间戳以及要使用哪个时代。 [这里的这个人有一些启发](http://social.technet.microsoft.com/Forums/en-US/winservergen/thread/6e990251-df84-47ab-bf3e-5dec690390bf) ，但我不能得到与他的例子相同的结果。

这里还有一个简单的例子：

```
c:\> w32tm /ntpte 256
0x014F37D494604000 - 109207 18:12:16.0000000 - 1.1.1900  20:12 
```

我也不知道这些十六进制和第二个数字是什么，但知道会很有趣。可能无法用简单的批处理来计算我需要的东西，所以如果有（在整个宇宙中）有人知道如何这是如何实现的，可以使用脚本/编程语言作为说明性示例/说明。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:44:20.940

我没有弄清楚十六进制数字的含义，但第二个数字是 ANSI 日期，即自 1601 年 1 月 1 日以来经过的天数。参数是自 1900-01-01 00:00 以来经过的秒数:00，但它有相反的字节顺序，第一个字节是最不重要的（1900-01-01 00:00:01 被编码为 0x01000000）。要让 w32tm 打印出 2013 年 1 月 15 日 22:00 UTC，请使用以下命令：

```
w32tm /ntpte 0xe04fa0d4 
```

或者

```
w32tm /ntpte 3763314900 
```

（从十六进制转换为十进制就好像字节顺序是正常的）。

编辑：似乎 w32tm 打印的十六进制值是一个 64 位整数，表示自 1601 年 1 月 1 日以来 100 纳秒间隔的数量。从这篇[文章中](https://stackoverflow.com/questions/6256703/convert-64bit-timestamp-to-a-readable-value)，我知道这就是 Windows 存储 FILETIME 的方式。

EDIT2：在玩了一些之后，我发现了另外两件事：

1.  传递给`w32tm /ntpte`的参数实际上是一个 64 位整数。正如我之前写的，最高有效 32 位表示自 1900-01-01 00:00:00 以来的秒数，而最低有效 32 位表示秒的分数。整个 64 位数字表示自 1900 年 1 月 1 日以来 1/（2 的 32 次幂）秒间隔的数量。因此`0x0000008000000000`等于 1900-01-01 00:00:00 之后的 1/2 秒。

2.  打印的十六进制值`w32tm /ntpte`可以直接作为参数传递给`w32tm /ntte`

# c# - C# 中的阿姆达尔定律示例

> ID：14326211
> 
> 赞同：14
> 
> 时间：2013-01-14T20:35:44.083
> 
> 标签：c#, multithreading

我正在处理一些瘫痪，这让我研究了阿姆达尔定律。我已经阅读了许多关于该主题的帖子；

[使用阿姆达尔定律计算性能增益](https://stackoverflow.com/questions/9243055/calculate-performance-gains-using-amdahls-law/9243366#9243366)

[如何计算螺纹效率的阿玛达尔定律](https://stackoverflow.com/questions/10182559/how-to-calculate-amadahls-law-for-threading-effectiveness/10182786#10182786)

[http://en.wikipedia.org/wiki/Amdahl%27s_law](http://en.wikipedia.org/wiki/Amdahl%27s_law)

...但希望找到一个在实践中展示它的 C# 示例。搜索证明没有结果。从理论上讲，应该可以制作一个串行应用程序，对可并行部分计时，运行一个并行版本，记录并行部分的长度并将差异（知道正在使用多少个处理器）与 Amdahl 函数的结果进行比较。这是正确的吗？有人知道这样的例子吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T06:39:02.797

注意：可以在[我的 Github 页面上找到该程序的完整工作可下载版本](https://github.com/alexmoore/Amdahl)

因此，根据阿姆达尔定律，我们将工作分为“必须串行运行的工作”和“可以*并行化*的工作”，因此让我们将这两个工作负载表示为`List<Action>`：

```
var serialWorkLoad = new List<Action> { DoHeavyWork, DoHeavyWork };
var parallelizableWorkLoad = new List<Action> { DoHeavyWork, DoHeavyWork, DoHeavyWork, DoHeavyWork, DoHeavyWork, DoHeavyWork, DoHeavyWork, DoHeavyWork }; 
```

代表`DoHeavyWork`被出色地抽象为：

```
static void DoHeavyWork()
{
    Thread.Sleep(500);
} 
```

正如你所看到的，为了好玩，我让可并行化的工作负载变得更重一些，并以此作为一个体面的例子。

接下来，我们必须在 Serial 中运行这两个工作负载以获得我们的基线：

```
var stopwatch = new Stopwatch();
stopwatch.Start();
// Run Serial-only batch of work
foreach (var serialWork in serialWorkLoad)
{
    serialWork();
}

var s1 = stopwatch.ElapsedMilliseconds;

// Run parallelizable batch of work in serial to get our baseline
foreach (var notParallelWork in parallelizableWorkLoad)
{
    notParallelWork();
}

stopwatch.Stop();
var s2 = stopwatch.ElapsedMilliseconds - s1; 
```

在这一点上，我们知道每个工作负载串行运行需要多长时间。现在，让我们再次运行它，并行化可并行化部分。

```
stopwatch.Reset();
stopwatch.Start();
// Run Serial-only batch of work
foreach (var serialWork in serialWorkLoad)
{
    serialWork();
}

var p1 = stopwatch.ElapsedMilliseconds;

// Run parallelizable batch of work in with as many degrees of parallelism as we can
Parallel.ForEach(parallelizableWorkLoad, (workToDo) => workToDo()); // In Java this is Magic Unicorns

stopwatch.Stop();
var p2 = stopwatch.ElapsedMilliseconds - p1; 
```

现在我们有了基线和并行版本，我们可以计算加速并报告我们的发现：

```
var speedup = (double)(s1 + s2) / (p1 + p2);

Console.WriteLine("Serial took  : {2}ms, {0}ms for serial work and {1}ms for parallelizable work", s1, s2, s1 + s2);
Console.WriteLine("Parallel took: {2}ms, {0}ms for serial work and {1}ms for parallelizable work", p1, p2, p1 + p2);
Console.WriteLine("Speedup was {0:F}x", speedup); 
```

正如阿姆达尔定律告诉您的那样，由于仅串行工作，很难使用您拥有的核心数完美扩展。

# xml - 从 XML 获取元素集合

> ID：14326213
> 
> 赞同：0
> 
> 时间：2013-01-14T20:35:58.143
> 
> 标签：xml, linq, linq-to-xml

我有以下 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
   <author>
      <name />
   </author>
   <title>Publishing Point Collection</title>
   <updated>2013-01-14T15:58:44.589Z</updated>
   <entry>
      <id>http://example.com:80/test filename.isml/settings</id>
      <title>Test Title</title>
      <updated>2013-01-14T15:47:15Z</updated>
      <link href="http://example.com:80/test filename.isml/settings" rel="related" type="application/atom+xml" title="Settings" />
      <link href="http://example.com:80/test filename.isml/state" rel="related" type="application/atom+xml" title="State" />
      <link href="http://example.com:80/test filename.isml/statistics" rel="related" type="application/atom+xml" title="Statistics" />
   </entry>
</feed> 
```

我正在通过执行以下操作加载文档：

```
//xmlContent is the XML shown above.
XDocument publishingDocument = XDocument.Parse(xmlContent); 
```

我正在尝试获取所有链接元素（特别是 href 属性，但现在只是元素）。但是，每当我指定一个 XName 时，我都不会得到任何结果。我试过了：

```
var data = publishingDocument.Elements("entry");
var data = publishingDocument.Elements("link").Attributes("href");
var data = publishingDocument.Root.Elements("entry"); 
```

这些都不返回任何数据。我一定错过了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:49:08.253

尝试

```
XNamespace ns = "http://www.w3.org/2005/Atom";
var data = publishingDocument.Descendants(ns + "entry"); 
```

# java - 在 Java EE 服务器和 Web 应用程序之间共享/访问资源

> ID：14326214
> 
> 赞同：1
> 
> 时间：2013-01-14T20:36:00.513
> 
> 标签：java

我正在寻找在我的 Java EE 服务器（Glassfish V3）和我的 Java EE 应用程序（模块：web、jpa、ejb）之间传递信息的最佳方式。

我为什么要找那个？

我正在开发一个服务器身份验证模块 ( `SAM`) 来插入 Glassfish 并替换“经典” `realm`。我`SAM`只能访问该`httpServletRequest`对象，因此基本方法是将数据存储在 上`session`，在 下访问它`SAM`并通过存储在基本对象中的凭据对用户进行身份验证。但是这个对象必须在`SAM`应用程序之间共享。

我只是想知道我`SAM`是否可以访问`singleton EJB`或`stateless EJB`属于我的应用程序？我`SAM`的应用程序与我的应用程序完全分离，但有没有办法做到这一点？

# symfony - Symfony2，有没有类似的方式来使用 SpringMVC 拦截器？

> ID：14326218
> 
> 赞同：0
> 
> 时间：2013-01-14T20:36:18.837
> 
> 标签：symfony

目前我正在使用 Symfony2，它是一个很棒的框架。

我使用 SpringMVC，它具有“拦截器”的概念，它可以捕获对任何“控制器”的请求，并允许进行例如检查是否知道用户是否已登录。

是否有任何路由器方式的注释可以与 Symfony2 做类似的事情。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:58:28.180

您可以附加事件侦听器以响应框架事件。看一眼：

[http://symfony.com/doc/current/cookbook/service_container/event_listener.html](http://symfony.com/doc/current/cookbook/service_container/event_listener.html)

您可以订阅许多事件，所有这些事件都可以在文档中找到：

[http://api.symfony.com/2.1/Symfony/Component/HttpKernel/KernelEvents.html](http://api.symfony.com/2.1/Symfony/Component/HttpKernel/KernelEvents.html)

可能您正在寻找 REQUEST 事件，它应该类似于：

```
<?php

namespace Acme\DemoBundle\Listener;

use Symfony\Component\DependencyInjection\ContainerInterface;
use Symfony\Component\HttpKernel\Event\GetResponseEvent;

class Listener
{
    /**
     * @var \Symfony\Component\DependencyInjection\ContainerInterface
     */
    private $router;
    private $service_container;

    public function __construct(\Symfony\Component\Routing\Router $router, $service_container) {
        $this->router = $router;
        $this->service_container = $service_container;
    }

    public function onKernelRequest(GetResponseEvent $event) {
         // DO STUFF
    }
} 
```

在 services.xml 上：

```
<service id="max4.sms.listener"  class="Acme\DemoBundle\Listener\Logger">
        <tag name="kernel.event_listener" event="kernel.request" method="onKernelRequest" />
        <argument type="service" id="router" />
        <argument type="service" id="service_container" />
</service> 
```

您定义您正在收听的事件

```
<tag name="kernel.event_listener" event="kernel.request" method="onKernelRequest" /> 
```

注入**__construct()**方法的参数（参见[http://symfony.com/doc/current/components/dependency_injection/introduction.html](http://symfony.com/doc/current/components/dependency_injection/introduction.html)）：

```
<argument type="service" id="router" />
<argument type="service" id="service_container" /> 
```

# java - 使用 RMI 的多用户聊天程序

> ID：14326220
> 
> 赞同：0
> 
> 时间：2013-01-14T20:36:21.950
> 
> 标签：java, rmi, distributed-computing

我正在开发一个 RMI 聊天应用程序，它的功能之一是允许用户同时与多个朋友聊天。

我设计这些场景的方法如下：将有一个对象绑定到注册表，任何用户（客户端）想要登录到应用程序都会调用该对象的登录方法，该方法返回一个会话对象，所以每个用户如果成功登录，登录到应用程序将获得一个会话对象。

这些会话对象包含一个聊天室对象列表，这些对象将用于打开 2 个或更多用户之间的对话管道。聊天室对象将包含一个允许用户将任意数量的成员添加到聊天室的方法。

这是我的方法。如果有人看到不合适的东西，或者有其他更好的方法，请告诉我。

# magento - Magento 购物车最小数量

> ID：14326222
> 
> 赞同：3
> 
> 时间：2013-01-14T20:36:28.893
> 
> 标签：magento, shopping-cart

我有一家在线商店出售葡萄酒并按瓶出售。但是，我只能以 6 的倍数发货。即任何 SKU 组合中的 6、12、18、24 等等。

我已经尝试过配置->库存->“购物车中允许的最小数量”它适用于单个产品，但不适用于结帐时的总数量。

有没有办法（通过扩展程序、代码或管理员）在结帐期间配置规则，使得无论不同 SKU 的总数量必须是 6 的倍数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:51:48.590

您可以创建一个自定义模块或在您的单页结帐的登录页面上

```
if(Mage::helper('checkout/cart')->getCart()->getItemsCount() % 6 != 0){
   Mage::getSingleton('customer/session')->addError('Item in your cart must be multiple of 6');
   $url = Mage::getUrl('checkout/cart')
   Mage::app()->getFrontController()->getResponse()->setRedirect($url, 301);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:44:26.187

afaik 不是，但它应该很容易做到。

编写一个观察者，`controller_action_predispatch_checkout_onepage_index`检查数量是否为 6 的倍数，如果不是则添加错误并重定向到购物车

您也可以考虑将其签入`controller_action_predispatch_checkout_cart_index`以在购物车页面上显示警告，并且可能会使按钮变灰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T01:01:12.717

虽然其他答案有效，但也许最好的方法是检查报价保存，这样如果客户调整购物车中的数量，它就会四舍五入，他们会看到并理解变化。当客户购买了他们不知道自己在购买的东西时，他们打来愤怒的电话并不好玩。

话虽如此，我们可以连接到`sales_quote_save_before`事件中进行检查并相应地调整数量。

**观察者.php**

```
<?php

class Yrcrz_WineQty_Model_Observer
{
    public function sales_quote_save_before(Varien_Event_Observer $observer)
    {
        $quote = $observer->getQuote();
        $items = $quote->getAllItems();
        $message = false;
        foreach ($items as $item) {
            $qty = $item->getQty();
            if ($qty % 6 != 0) {
                if ($qty <= 3) {
                    $newQty = 6;
                } else {
                    $newQty = round($qty / 6) * 6;
                    $item->setQty($newQty);
                    if (!$message) {
                        $message = Mage::helper('core')->__('Product quantities have been adjusted for case sizes');
                        Mage::getSingleton('core/session')->addNotice($message);
                    }
                }
            }
        }
    }
} 
```

我们先拿到我们所有的物品，看看数量是否以 6 为增量，然后相应地调整数量。我们甚至可以输出通知，以便客户了解细微的变化。

**配置文件**

```
<?xml version="1.0"?>
<config>
    <modules>
        <Yrcrz_WineQty>
            <version>0.0.1</version>
        </Yrcrz_WineQty>
    </modules>
    <global>
        <events>
            <sales_quote_save_before>
                <observers>
                    <Yrcrz_WineQty_Observer>
                        <type>singleton</type>
                        <class>Yrcrz_WineQty_Model_Observer</class>
                        <method>sales_quote_save_before</method>
                    </Yrcrz_WineQty_Observer>
                </observers>
            </sales_quote_save_before>
        </events>
    </global>
</config> 
```

# vdsp - 以矢量化方式计算双精度数组的平均值？

> ID：14326225
> 
> 赞同：1
> 
> 时间：2013-01-14T20:36:41.420
> 
> 标签：vdsp

给定一个双精度数组 V，目标是计算平均 A。

通常推荐的解决方案是这样的：

```
double A = V[0];
for (int i = 1; i<N; i++)
{
    A = ((A * i) + V[i]) / (i + 1.0);
} 
```

计算数组的平均值似乎是一种常见的操作，但我找不到可以以矢量化方式执行此操作的函数。

我在 vDSP 中找到的只是计算平均值数组的[vavlinD](https://developer.apple.com/library/mac/documentation/Accelerate/Reference/vDSPRef/Reference/reference.html#//apple_ref/c/func/vDSP_vavlinD)函数，并且不能改装为计算单个数组的平均值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:03:52.143

在 vDSP 中找到了正确的功能。它是[vDSP_meanv](https://developer.apple.com/library/ios/documentation/Accelerate/Reference/vDSPRef/Reference/reference.html#//apple_ref/c/func/vDSP_meanv)。

# .net - 轮询数据库更改：OracleDependency、SignalR，还是太多了？

> ID：14326227
> 
> 赞同：0
> 
> 时间：2013-01-14T20:36:51.727
> 
> 标签：.net, signalr, long-polling, polling, ajax-polling

我想我正在寻找最佳实践，但我已经阅读了有关执行此操作的各种方法的相互矛盾的信息。我正在尝试整理一个网页示例，其中包含一个信息网格，该信息网格准确地显示了数据库中的内容。该表可以通过表单从网页更新，但也可以从各种其他来源更新。

如何提醒用户注意更新？这是我到目前为止所经历的：

1.  SignalR 可用于让用户“订阅”网格上的更新。这适用于从表单到数据库的插入/更新以提醒用户。但是来自其他非 .NET 来源的实际数据呢？

2.  OracleDependency：当数据库更新时，回调命中 .NET。我读过这不适合在不断更新的表上使用。这是为什么？这是连接 SignalR 并提醒组中用户的可行选项吗？

3.  基本民意调查：我是不是想多了？我是否应该简单地轮询每个客户端上的数据库、获取更改并通过 AJAX 插入表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:09:33.663

我会选择一个“长时间运行”的控制器来轮询数据源。这样，您将只有一个点轮询数据源......然后当数据更改时，您可以告诉客户端订阅。

我不确定 signalR 是否具有长时间运行的控制器，但您可能会弄清楚。或者使用支持这个的 XSockets.NET..

无论您选择什么，我强烈建议不要从每个客户那里轮询。

问候乌夫

# qt4 - 使用 QTWebkit 获取 HTML 标题

> ID：14326228
> 
> 赞同：0
> 
> 时间：2013-01-14T20:36:58.540
> 
> 标签：qt4, qtwebkit

我正在使用这段代码：

```
QWebView *view = new QWebView(this);   
QUrl *app_path = new QUrl(path);

view->load(*app_path);
view->show();

QWebFrame *frame = view->page()->mainFrame();
QWebElement dom_title = frame->findFirstElement("title");
QString title = dom_title.evaluateJavaScript("this.text").toString();
out << title << endl; 
```

然而`title`是空的。我错过了什么？检查了一些示例，但似乎没有错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T18:47:27.293

确保页面完成加载。否则，DOM 还没有准备好，因此它会给出未定义的行为。

# domain-driven-design - 为什么域服务必须使用域对象作为参数和返回值？

> ID：14326230
> 
> 赞同：5
> 
> 时间：2013-01-14T20:37:10.303
> 
> 标签：domain-driven-design

> 当操作在概念上不属于任何实体或值对象时，我们应该创建一个域服务，而不是将行为强制到一个对象中。
> 
> 服务的接口应该根据领域模型的其他元素来定义。换句话说，服务的参数和返回值应该是领域对象

a) 为什么域服务应该/必须使用域对象作为参数和返回值？

b) 为什么 DDD 也不要求 Entities 和 Value Objects 的方法使用域对象作为参数和返回值？为什么这个约束只放在服务上？

谢谢

**欧乐汇：**

1)

> 这两个约束都促进了不变性和函数式风格

a) 这两个约束如何促进不变性？

b) 什么是功能风格？

c）所以我们应该尝试（因为它可能并不总是可以使用 force ）强制服务使用域对象作为参数和返回值，即使该服务（即行为）接受/返回可能更自然非域对象？

2)

> 实体和值对象组成更多的原始类型以形成复杂类型，并且某些行为可能取决于原始参数。

那么，在大多数情况下，它们的行为（即它们的操作）对原始类型（即使用原始类型作为参数）进行操作是否是由于域实体/值对象的某种*内在特征？*如果是，那么在大多数情况下，这种*内在特征*是否存在于域对象中，但很少存在于域服务中？

**第二次更新：**

> > 这两个约束如何促进不变性？
> 
> 这个想法是域服务不会改变状态，并且所有状态更改都通过参数显式地进行。

a) 不改变自己的状态或某些域对象的状态？由于域服务应该是无状态的，我假设你的意思是它不应该改变 DO 的状态？换句话说，服务通过确保它打算修改的任何 DO 都作为参数传递给它（即传递给它的操作）来促进*不变性？*

b) 但是如果要被服务修改的 DO 没有作为参数传递，那么我们说域服务改变了这个 DO 的状态？

c) 改变 DO 的状态被认为是一件坏事的原因是因为它不会提高清晰度（即，在查看服务操作的签名时并不是很明显，哪些 DO 将通过手术 ）？

d) 如果域服务要修改作为参数传递给它的 DO 的状态，如果它将用于更改此 DO 状态的值也作为参数传递给服务，那将是理想的吗？如果是，是因为它促进了清晰度还是……？

2）我仍然不明白返回值与参数类型相同如何促进不变性？

**欧乐外汇 3**

一个）

> 域服务可以通过返回对象的新实例而不是修改传入的对象来避免状态突变。

不是一个问题，更多的是一种观察，但有些困难理解为什么这种服务行为在大多数领域模型中很常见，甚至这种行为是在对领域建模时自然产生的，还是我们必须将它强加到概念中？！

b)

> 是的，尽管在这种情况下，域对象自己变异会更好。

DO 自身发生变异的主要原因是因为在特定 DO 上执行变异的代码集中在一个地方，所以如果我们需要检查这段代码，我们知道在哪里寻找它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T21:54:00.630

a) 这不是一个严格的限制，但提供了某些优势。该规则背后的想法是域服务包含补充现有实体和值对象的功能。另一个非严格约束是域服务方法的参数和返回值都属于同一类型的操作的闭包。这两个约束都促进了不变性和函数式风格，从而减少了副作用并更容易推理代码、重构代码等。

可以有一个域服务方法接受既不是实体也不是值对象的原始类型。但是，大量使用原始类型可能会导致[原始痴迷](http://blog.ploeh.dk/2011/05/25/DesignSmellPrimitiveObsession.aspx)。

b) 该约束*可以*在一定程度上应用于实体和值对象级别。实体和值对象组成更多的原始类型以形成复杂类型，并且某些行为可能取决于原始参数。这个原始参数本身可以变成一个值对象。

**更新**

刚从 DDD 聚会回来，我有机会与实施[领域驱动设计的](https://rads.stackoverflow.com/amzn/click/com/0321834577)[Vaughn Vernon](https://twitter.com/VaughnVernon)讨论这个问题。他同意指定的约束条件并不严格。换句话说，在某些情况下，域服务方法完全可以通过原始类型参数化。

> 这两个约束如何促进不变性？

这个想法是域服务不会改变状态，并且所有状态更改都通过参数显式地进行。这就是[纯函数](http://en.wikipedia.org/wiki/Pure_function)的本质。鉴于域服务补充了实体，它们的方法应该用这些术语来表达。

> 什么是功能风格？

我指的是[函数式编程](http://en.wikipedia.org/wiki/Functional_programming)。函数式编程通常需要不变性和纯函数。函数式方法的另一个特点是与命令式形成对比的[声明式风格。](http://en.wikipedia.org/wiki/Declarative_programming)

> 所以我们应该尝试（因为它可能并不总是可以使用 force ）来强制 Service 使用域对象作为参数和返回值

不。如果原始类型足以满足操作，则没有理由将其强制转换为其他类型。实体和值对象的使用只是一个指导方针，有些人更喜欢比其他人更严格。例如，有些使用显式类型来表示每个实体的身份。`int`因此，您将创建一个值对象，而不是使用它`OrderId`来表示订单的身份。

> 那么是不是由于域实体/值对象的某种内在特征在大多数情况下它们的行为（即它们的操作）对原始类型进行操作（即使用原始类型作为参数）？

我不会说它是 DDD 固有的。我指的是更一般的组合概念——复杂实体（非 DDD）由更简单的实体组成。因此，对复杂实体的操作将根据组成部分来表示是有道理的。

**更新 2**

a) 域服务可以通过返回对象的新实例而不是修改传入的对象来避免状态突变。这样，方法的签名完全描述了它的作用，因为没有副作用。

b) 域服务可以改变传递给它的对象的状态，在这种情况下，返回类型可能是完整的。然而，这是不太可取的 - DO 改变自己的状态会更好。

c) 是的，这是其中的一部分。不变性和纯度使您可以重构代码，就像使用代数方程分解代数一样。另一个原因是它使对代码的推理更容易，因为如果您查看一段不可变数据，您可以确定它在其范围的其余部分不会改变。

d) 是的，尽管在这种情况下，域对象自己变异会更好。此突变将由周围的应用程序服务调用。很多时候，我将域服务传递给实体行为方法，为它们提供他们无法直接访问的功能。

e) 操作闭包的概念本身并不能促进不变性，但它是不可变代码的一个特征。原因是，如果域服务方法接受 T 类型的值并返回 T 类型的值，则它可以指示它返回由封装操作产生的新 T 值。这是不变性的一个特征，因为操作产生的变化被明确地作为一个新对象。

**更新 3**

a) 这与传统 OOP 的关系比与 DDD 的关系更大。OOP 试图将移动的部分隐藏在对象后面——封装。FP 试图最小化移动部分 - 不变性。在某些情况下，不可变性可以被视为更“自然”。例如，在以事件为中心的场景中，事件是不可变的，因为它们是已发生事件的记录。你不会改变已经发生的事情，但你可以创建补偿动作。

b) 同样，这与 OOP 的关系比 DDD 更多，并且基于[信息专家模式](http://en.wikipedia.org/wiki/GRASP_%28object-oriented_design%29)，该模式本质上表明数据上的行为应尽可能接近该数据。在 DDD 中，这意味着一个实体应该尽可能地封装所包含的数据，以确保其自身的完整性。

# html - 防止 Internet Explorer 10 移动版创建电话和地址链接

> ID：14326234
> 
> 赞同：3
> 
> 时间：2013-01-14T20:37:44.913
> 
> 标签：html, internet-explorer, windows-phone, windows-phone-8, internet-explorer-10

有没有办法阻止 IE 10 移动版创建电话和地址链接。类似于： `<meta name="format-detection" content="telephone=no">`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-01T08:22:21.113

`<meta name="format-detection" content="telephone=no">`似乎在 IE11 中运行良好。

虽然我在 IE10 Metro/Modern WIN8 中没有看到任何电话号码自动检测功能，但我想它可以在 IE10 移动设备上进行（这对手机来说很有意义）。我会相信你的话，因为我无法测试......

也就是说，您可以拥有一个`(888) 999-666`特别样式的传真号码：

```
(888) 999<span style="letter-spacing:-1em">-</span>-6666 
```

双破折号可防止格式检测。我在 IE11 Metro/Modern WIN8.1 上测试过

这很骇人听闻，但电话号码的视觉风格几乎不受影响，您应该只看到一个破折号。而且我还尝试通过 JS 在 window.load 上删除双破折号，但没有成功，因此破折号必须保留在 DOM 中。

Google 搜索机器人可能会也可能不会跳过它。但对于传真号码，这似乎是一个小问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-08T16:47:54.253

肮脏的解决方案：将文本显示为实时渲染的图像。类似的东西用于避免电子邮件收割者获取联系信息。

对于 php，您可以尝试 GD 库。

这个例子来自 PHP.net 页面：

```
<?php
// Set the content-type
header('Content-Type: image/png');

// Create the image
$im = imagecreatetruecolor(400, 30);

// Create some colors
$white = imagecolorallocate($im, 255, 255, 255);
$grey = imagecolorallocate($im, 128, 128, 128);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 399, 29, $white);

// The text to draw
$text = 'Testing...';
// Replace path by your own font path
$font = 'arial.ttf';

// Add some shadow to the text
imagettftext($im, 20, 0, 11, 21, $grey, $font, $text);

// Add the text
imagettftext($im, 20, 0, 10, 20, $black, $font, $text);

// Using imagepng() results in clearer text compared with imagejpeg()
imagepng($im);
imagedestroy($im);
?> 
```

这将输出：（ [来源：][[php.net](http://www.php.net/manual/en/images/21009b70229598c6a80eef8b45bf282b-imagettftext.png)][）][![文本作为图像](../Images/3e90b262cf09e8eab37b0e7962df098d.png)](https://i.stack.imgur.com/hkDk6.png)

当然，很多资源都被浪费了。

# ember.js - 如何在当前运行循环结束时运行某些东西？

> ID：14326235
> 
> 赞同：6
> 
> 时间：2013-01-14T20:37:45.497
> 
> 标签：ember.js

我想推迟一个操作，直到所有绑定都刷新并且当前运行循环完成。我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T20:37:45.497

使用[Ember.run.schedule](http://emberjs.com/api/classes/Ember.run.html#method_schedule)方法：

```
 Ember.run.schedule(queue[, context], callback[, *args]); 
```

这里，`queue`是运行循环队列（例如`'actions'`），`callback`是你想要执行的函数。例如：

```
 Ember.run.schedule('actions', function() {
   console.log('I run at the end of the current runloop');
 }); 
```

相关地，为了防止函数多次运行，请使用[Ember.run.once](http://emberjs.com/api/classes/Ember.run.html#method_once)（您可能还看到它被称为`scheduleOnce`）：

```
 Ember.run.once([context,] callback[, *args]); 
```

`'actions'`这将在队列中运行回调。

（已更新；感谢@machty 的更正！）

# logging - Visual Studio MSBuild 自定义任务 Log.LogError 不起作用

> ID：14326240
> 
> 赞同：2
> 
> 时间：2013-01-14T20:38:17.057
> 
> 标签：logging, msbuild, task

我们编写了一个自定义 msbuild 任务，它对我们项目中的代码文件进行一些预处理。我们希望能够在标准错误列表窗口中显示错误和警告。

Visual Studio 提供了应该执行此操作的 TaskLoggingHelper (Log.LogError) 方法......但我发现 Log.LogError(message, messageArgs) 没有填写正确的文件名和行号...... Log.LogError(subCategory, errorCode, helpKeyword, file, lineNumber, columnNumber, endLineNumber, endColumnNumber, message, messageArgs) 返回一个错误，指出即使我明确设置了 message 也不能为空。

似乎 Visual Studio 可能没有使用重载（更详细）的方法。

我发送的代码行如下..

```
string fileName = "main.c";
int lineNum = 415;
int colNum = 5;
string message = "Error Message Text.";

Log.LogError("", "", "", fileName, lineNum, colNum, 0, 0, message, null); 
```

有没有人成功使用此方法重载在 MSBuild 中记录错误？

谢谢

** 更新 **

阅读尼克的回应（下）后，我做了以下测试......

```
Log.LogError("test1", "test2", "test2", fileName, lineNum, colNum, 0, 0, message); 
```

我删除了 messageArgs 并在前三个参数中添加了一些文本。我得到的反应令人惊讶...... ErrorList 窗口中列出的消息是“test1”而不是“错误消息文本”。不过，不确定这是否能说明情况。

戴夫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T17:01:04.690

好吧，在解决这个问题很长时间之后.. 我永远无法得到 Log.LogError("", "", "", fileName, lineNum, colNum, 0, 0, message, null); 工作的解决方案。无论出于何种原因，这种重载似乎没有正确实现。我最终找到了做同样事情的替代解决方案。我认为最好提供我的解决方案，以防其他人也想做同样的事情；

```
BuildErrorEventArgs errorEvent = new BuildErrorEventArgs("", "", fileName, lineNum, colNum, 0, 0, messageErr, "", "");
BuildEngine.LogErrorEvent(errorEvent); 
```

所以我所做的就是将 IBuildEngine 接口作为我的 ITask 类的一部分来实现。从那里我可以访问 LogErrorEvent，它允许您传递 BuildErrorEventArgs 结构，该结构使您可以访问错误的所有详细信息。

希望这可以帮助

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-15T06:09:51.130

如果您从 Microsoft.Build.Utilities.Task 继承，您应该可以肯定地使用它。我一直在使用更简单的重载语法：

```
 base.Log.LogError(Strings.ItemsToFilterMissingError); 
```

我注意到在您指定消息格式字符串的参数的大型重载中是类型

```
 params object[] messageArgs 
```

我认为您可以省略参数而不是传递显式空值。那可能是你的问题。

# iphone - UITableviewcell 中的复选框随着表格滚动而消失

> ID：14326242
> 
> 赞同：0
> 
> 时间：2013-01-14T20:38:30.597
> 
> 标签：iphone, objective-c, xcode, uitableview

我正在尝试在每个 uitableviewcell 中创建一个复选框，可以在选中和未选中之间切换。为了确保加载新单元格时单个选择不会循环，我创建了一个可变的字符串数组来表示“取消选中”或“选中”（即当按钮图像应该显示为未选中或选中时）。按下检查按钮时，字符串将替换为“检查”或“取消检查”。由于某种我看不到的原因，当 tableview 滚动并且带有选定检查按钮的单元格离开屏幕时，数组会丢失对其所做的更改，因此检查字符串会丢失。

有什么想法有什么问题吗？

在此先感谢您的帮助。

在“checkButtonClicked”中检查了第一个单元格中的按钮之后的 selectedCheckArray 的 NSLog：{ Check, Uncheck, Uncheck, Uncheck, Uncheck, Uncheck, Uncheck }

向下滚动后，selectedCheckArray 的 NSLog 使第一个单元格不再出现在屏幕上：{ Uncheck, Uncheck, Uncheck, Uncheck, Uncheck, Uncheck, Uncheck }

这是代码：

**。H**

```
 @property (strong, nonatomic) NSMutableArray *selectedCheckArray; 
```

**.m**

```
 @synthesize selectedCheckArray; 
```

...

```
 - (void)viewWillAppear:(BOOL)animated
    {
        // cellDataArray loaded here

        selectedCheckArray = [[NSMutableArray alloc] init];

        for (int i = 0; i<[cellDataArray count]; i++) {
            [selectedCheckArray addObject:@"Uncheck"];
        } 

        [super viewWillAppear:animated];
    } 

    - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
    {
        return [cellDataArray count];
    }

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
         static NSString *CellIdentifier = @"choiceCell";

        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        }

        UIButton *checkButton = (UIButton *)[cell viewWithTag:1];

        if ([[selectedCheckArray objectAtIndex:indexPath.row] isEqualToString:@"Uncheck"])         {
            [checkButton setImage:[UIImage imageNamed:@"unchecked"]   
               forState:UIControlStateNormal];
        } else {
            [checkButton setImage:[UIImage imageNamed:@"checked"] 
               forState:UIControlStateNormal];
        }
        [checkButton addTarget:self action:@selector(checkButtonClicked:)  
           forControlEvents:UIControlEventTouchUpInside];

        return cell;
    } 
```

...

```
 - (void)checkButtonClicked:(id)sender
    {
        // indexPath of cell of clicked button
        CGPoint touchPoint = [sender convertPoint:CGPointZero toView:choiceTable];
        NSIndexPath *indexPath = [choiceTable indexPathForRowAtPoint:touchPoint];

        // Not using tag as sender will keep reference of clicked button
        UIButton *button = (UIButton *)sender;

        //Checking the condition button is checked or unchecked.
        //accordingly replace the array object and change the button image
        if([[selectedCheckArray objectAtIndex:indexPath.row] isEqualToString:@"Uncheck"])
        {
            [button setImage:[UIImage imageNamed:@"checked"] forState:UIControlStateNormal];
            [selectedCheckArray replaceObjectAtIndex:indexPath.row withObject:@"Check"];
        } else {
            [button setImage:[UIImage imageNamed:@"unchecked"] forState:UIControlStateNormal];
            [selectedCheckArray replaceObjectAtIndex:indexPath.row withObject:@"Uncheck"];
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T04:30:12.607

尝试这个，

在 .h 文件中，

```
NSMutableArray *arrayCellChecked;

@property(nonatomic, retain) NSIndexPath *lastIndexPath; 
```

在 .m 文件中

```
@synthesize lastIndexPath;
int oldRow, newRow; 
```

在 DidLoad 方法中，

```
arrayCellChecked = [[NSMutableArray alloc] init]; 
```

表行法，

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

        //Your Code
        ----------

        newRow = [indexPath row];
        oldRow = [[self lastIndexPath] row];

        cell.accessibilityViewIsModal = (newRow == oldRow && lastIndexPath != nil) ? NO : YES;

        if(cell.accessibilityViewIsModal == YES)
            [checkButton setImage:[UIImage imageNamed:@"unchecked"] forState:UIControlStateNormal];
        else
            [checkButton setImage:[UIImage imageNamed:@"checked"] forState:UIControlStateNormal];

        //Your Method for Button Click
        -----------

        return cell;
} 
```

表格单元格选择方法，

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    //Your Cell Code
    -------

    if (cell.accessibilityViewIsModal == NO) {

        cell.imgCheck.image = [UIImage imageNamed:@"checked"];
        cell.accessibilityViewIsModal = YES;

        NSString *cellValue = yourArray.object;

        [arrayCellChecked addObject:cellValue];

        -------
    }

    else{

        cell.imgCheck.image = [UIImage imageNamed:@"unchecked"];
        cell.accessibilityViewIsModal = NO;

        NSString *cellValue = yourArray.object;

        [arrayCellChecked removeObject:cellValue];

        --------
    }
 } 
```

它会为 'didSelectRowAtIndex' 完成。不需要按钮单击方法。

我已经用这种方式解决了。

希望它对你有用。谢谢。

# objective-c - 如何在 Cocoa 中动态添加组件

> ID：14326244
> 
> 赞同：1
> 
> 时间：2013-01-14T20:38:38.893
> 
> 标签：objective-c, macos, cocoa, user-interface

是否可以在 Cocoa 中以编程方式在视图上添加组件？UI 是使用`Xcode`. 我只想添加一些`NSButtons`，但它的数量和位置将在运行时和用户输入时知道。

有谁知道这是否可能以及如何完成以及如何定位这些动态组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:41:25.693

当然这是可能的。添加子视图：

```
UIView *subview = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)]; // or UIButton, UIScrollView, or any other view-based class you make think of
[self addSubview:subview]; 
```

等等

或者更准确地说是一个按钮，它是这样的：

```
UIButton *aButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
aButton.frame = CGRectMake(0, 0, 100, 100);
[aButton addTarget:self action:@selector(methodName) forControlEvents:UIControlEventTouchUpInside];
[self addSubview:aButton]; // if done from the view self.view if done from the controller 
```

啊，抱歉刚刚注意到它是 OSX，而​​不是 iOS，但基础是一样的。请查看 NSButton 类。

```
NSButton *aButton = [[NSButton alloc] initWithFrame:NSMakeRect(0, 0, 100, 100)]; // x, y, width, height 
```

应该让你开始。

# scala - 创建一个返回多个布尔谓词的逻辑 OR 的函数

> ID：14326254
> 
> 赞同：4
> 
> 时间：2013-01-14T20:39:12.997
> 
> 标签：scala, functional-programming

假设我在我的代码中定义了许多布尔谓词：

```
def pred1[A](x: A): Boolean = { ... }
def pred2[A](x: A): Boolean = { ... }
def pred3[A](x: A): Boolean = { ... } 
```

现在，我希望能够创建一个函数，例如，`pred1`and的逻辑 OR `pred3`。

所以，像：

```
def pred1Or3[A](x: A) = or(pred1, pred2) 
```

更好的是，能够泛化以便我可以提供自己的组合功能会很好。所以，如果相反，我想要逻辑与，我会调用：

```
def pred1And3[A](x: A) = combine({_ && _}, pred1, pred2) 
```

我可以通过这种方式达到相同的基本效果：

```
def pred1And3[A](x: A) = Seq(pred1, pred2) map { _(x) } reduce { _ && _ } 
```

但这似乎有点冗长，并掩盖了意图。在 Scala 中有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:56:47.633

这是一个简单的解决方案，允许同时传递可变数量的项目。我已经给出了`or`案例和更通用的`combine`案例：

```
def or[A](ps: (A => Boolean)*) = 
  (a: A) => ps.exists(_(a))

def combine[A](ps: (A => Boolean)*)(op: (Boolean, Boolean) => Boolean) = 
  (a: A) => ps.map(_(a)).reduce(op) 
```

这是一些示例用法：

```
// "or" two functions
val pred1or3 = or(pred1, pred3)                
pred1or3("the")

// "or" three functions
val pred12or3 = or(pred1, pred2, pred3)        
pred12or3("the")

// apply a dijoined rule directly
or(pred1, pred2, pred3)("the")                 

// combine two functions with "and"
val pred12and3 = combine(pred1, pred3)(_ && _) 
pred12and3("the")

// apply a conjoined rule directly
combine(pred1, pred2, pred3)(_ && _)("the")    

// stack functions as desired (this is "(pred1 || pred3) && (pred1 || pred2)")
combine(or(pred1, pred3), or(pred1, pred2))(_ && _)("a") 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T22:20:44.960

这是我过去使用过的解决方案：

```
implicit def wrapPredicates[A](f: A => Boolean) = new {
  def <|>(g: A => Boolean) = (x: A) => f(x) || g(x)
  def <&>(g: A => Boolean) = (x: A) => f(x) && g(x)
} 
```

使用如下：

```
val pred12or3 = pred1 <|> pred2 <|> pred3 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T23:02:39.753

这是一种快速失败的解决方案，但不是通用的：

```
def or[A](ps: (A => Boolean)*) = (a:A) => ps.exists(_(a))
def and[A](ps: (A => Boolean)*) = (a:A) => ps.forall(_(a)) 
```

# 示例会话

```
scala> def or[A](ps: (A => Boolean)*) = (a:A) => ps.exists(_(a))
or: [A](ps: A => Boolean*)A => Boolean 
scala> or((x:Int) => {println("a");x > 5}, (x:Int) => {println("b");x < 2})
res6: Int => Boolean = <function1>    
scala> res6(1)
a
b
res7: Boolean = true    
scala> res6(6)
a
res8: Boolean = true 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T20:57:20.310

```
def or[A](p: A => Boolean, q: A => Boolean) = (a: A) => p(a) || q(a)
def logic[A](p: A => Boolean, q: A => Boolean)(c: (Boolean, Boolean) => Boolean) = {
  (a: A) => c( p(a) , q(a) )
} 
```

您可以向这些方法添加参数`(a: A)`而不是返回函数，例如：

```
def or2[A](a: A)(p: A => Boolean, q: A => Boolean) = p(a) || q(a) 
```

# jquery - 使用 .slideToggle 从底部拉出隐藏的 div

> ID：14326259
> 
> 赞同：2
> 
> 时间：2013-01-14T20:39:32.013
> 
> 标签：jquery, jquery-ui, slidetoggle

我似乎无法弄清楚如何从下到上而不是从上到下显示隐藏的内容。我在这里做了一些功课，并从 jQuery UI 中找到了一个解决方案，但一定是错误地实现了它。非常感谢任何帮助 - 脚本新手。

干杯！

这是我正在使用的

剧本：

```
$(document).ready(function() {
  $('#clientsOpen').click(function() {
     $('#clientsDropDown #clientsDashboard').slideToggle({ direction: "up" }, 300);
 $(this).toggleClass('clientsClose'); 
  }); // end click
}); 
```

标记：

```
<div id="clientsDropDown">
<div id="clientsDashboard">
    <p id="clientsCTA">Let's make something beautiful together...<br /><a href="mailto:brockman.eric@gmail.com">brockman.eric@gmail.com</a></p>
</div><!-- /clientsDashboard -->
<p id="clientsOpen">clients</p>
</div><!-- //clientsDropDown --> 
```

样式：

```
#clientsDropDown {
    bottom:0;
width: 100%;
padding-bottom:2%;
z-index: 100;
}

#clientsOpen {
background: url("images/open.png") no-repeat scroll 68px 10px #414142;
color: #ececec;
cursor: pointer;
float: left;
font-size: 26px;
margin: -2px 0 0 10%;
padding: 0 15px 2px;
text-decoration: none;
width: 63px;
}

#clientsCTA {
background:#414142;
width:100%;
color: #CCCCCC;
text-align:center;
font-size: 46px;
margin: 0;
padding: 30px 0;
text-decoration: none;

}

#clientsDropDown .clientsClose {
background-image: url(images/close.png);
}

#clientsDropDown #clientsDashboard {
display: none;  
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T20:44:20.630

只需添加`position:absolute;`到`#clientsDropDown`.

**[jsFiddle 示例](http://jsfiddle.net/j08691/8LXY6/)**

或者，如果您希望“客户”位于弹出 div 的顶部，请移除浮动并将段落放置在仪表板 div 上方，就像在这个**[jsFiddle 示例](http://jsfiddle.net/j08691/8LXY6/1/)**中一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:44:50.630

尝试将脚本更改为：

```
$("#clientsOpen").click(function(){
    $("#clientsDashboard").slideToggle();
}, function(){
    $("#clientsDashboard").slideToggle();
}); 
```

是的，当然将容器 div 定位为绝对值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-02T15:46:11.017

改变显示动画方向的实际属性是`bottom`CSS 属性。如果将其更改为`top`动画将显示向下而不是向上。

`#clientsDropDown`在前面提供的小提琴中尝试一下，你会看到它在起作用。

# c++ - “错误：没有匹配的调用函数”

> ID：14326260
> 
> 赞同：4
> 
> 时间：2013-01-14T20:39:35.540
> 
> 标签：c++, templates, constructor

我在键盘上，我正在尝试使用 C++ 来提高我的技能。我以前从来没有使用过模板，所以我试着研究如何使用它们。下面的代码是结果，不幸的是，它不起作用。我确实尝试为我的问题寻找解决方案，但由于我没有太多使用模板的经验，我无法在我的问题和其他问题之间建立任何联系。所以，我决定寻求帮助。

```
template <class A>
class Vector2 {
public:
    A x,y;
    Vector2(A xp, A yp){
        this->x = xp;
        this->y = yp;
    }
};

template <class B, class A>
class rayToCast {
public:
    rayToCast(B angle, Vector2<A> origin, Vector2<A> point1, Vector2<A> point2){
        this->RAngle = angle;
        this->Point1 = point1;
        this->Point2 = point2;
    }
private:
    B RAngle;
    Vector2<A> point1,point2;
};

int main(){
    rayToCast<short int, float> ray(45, Vector2<float>(0.0, 0.0), Vector2<float>(-10.0, -3.0), Vector2<float>(5.0, 7.0));
    return 0;
} 
```

这是输出：

```
t.cpp: In constructor 'rayToCast<B, A>::rayToCast(B, Vector2<A>, Vector2<A>, Vector2<A>) [with B = short int, A = float]':
t.cpp:26:   instantiated from here
Line 14: error: no matching function for call to 'Vector2<float>::Vector2()'
compilation terminated due to -Wfatal-errors. 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T20:43:22.963

构造`rayToCast`函数尝试初始化`point1`并`point2`通过调用`Vector2`的默认构造函数。但它没有。

您要么必须为向量类提供默认构造函数，要么显式初始化`rayToCast`. 一种方法是这样做：

```
rayToCast(B angle, Vector2<A> origin, Vector2<A> point1, Vector2<A> point2)
   : RAngle(angle), point1(point1), point2(point2)
{ } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T20:44:02.300

该错误与模板无关。

您的`Vector2`类没有默认构造函数，但您想在`rayToCast`.

在 的构造函数中使用成员初始值设定项列表`rayToCast`或在`Vector2`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T20:48:08.057

您的代码中有两个问题：

Vector2没有默认构造函数，将Vector2传递给`rayToCast`构造函数时会调用默认构造函数。

```
rayToCast(B angle, Vector2<A> origin, Vector2<A> point1, Vector2<A> point2) 
```

您需要将默认构造函数添加到 Vector2 并初始化`x,y`为默认值：

```
template <class A>
class Vector2 {
public:
    A x,y;
    Vector2() : x(), y() {}  // default constructor
    Vector2(A xp, A yp){
        this->x = xp;
        this->y = yp;
    }
}; 
```

另外，您有错字，应该是 Point1、Point2 而不是 point1/point2。

```
class rayToCast {
public:
    rayToCast(B angle, Vector2<A> origin, Vector2<A> point1, Vector2<A> point2){
        this->RAngle = angle;
        this->Point1 = point1;
        this->Point2 = point2;
    }
private:
    B RAngle;
    Vector2<A> Point1;    // capital P
    Vector2<A> Point2;    // capital P
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-14T20:42:57.380

当您不声明构造函数时，您将获得为您自动生成的默认构造函数（默认构造函数和复制构造函数）。

当您声明构造函数时，您不再获得自动生成的构造函数（因此，如果需要，您必须手动定义其他构造函数）。

因为你定义`Vector2(A xp, A yp)`了，编译器不再为你自动生成，如果你想使用它`Vector2()`，你必须自己定义。`Vector2()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T20:58:08.970

拿这部分代码：

```
rayToCast(B angle, Vector2<A> origin, Vector2<A> point1, Vector2<A> point2){
    this->RAngle = angle;
    this->Point1 = point1;
    this->Point2 = point2;
} 
```

对于外行的 C++ 程序员来说，它看起来像这样初始化`Point1`and `Point2`，但事实并非如此。初始化要么在默认情况下完成（这里不可能发生，因为`Vector2<A>`没有默认构造函数），要么在*成员初始化列表中*（你没有使用）；您在构造函数*主体*中的分配就是：事后分配。

您可能有理由不提供`Vector<A>`默认构造函数，因此请`rayToCast`通过使其构造函数正确*初始化*构造函数参数中的那些`Point1`/`Point2`成员来修复：

```
rayToCast(B angle, Vector2<A> origin, Vector2<A> point1, Vector2<A> point2)
   : RAngle(angle)
   , point1(point1)
   , point2(point2)
{} 
```

我还建议整理你的变量和参数名称，因为它们让我有点困惑*（大写在这里，不在那里，无处，到处，哪里，那里！）*。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T20:52:28.747

正如其他人已经指出的那样，错误是您缺少默认构造函数。使用 Bo Persson 建议的语法。

另一个错误是变量名区分大小写，例如，在`rayToCast`您编写的构造函数中：

```
this->Point1 = point1; 
```

但是，您将类属性命名为`point1`。请注意，它与以下内容不同：

```
this->point1 = point1; 
```

# php - 如何读取和循环这些 MySQLi 结果？

> ID：14326263
> 
> 赞同：0
> 
> 时间：2013-01-14T20:39:44.497
> 
> 标签：php, mysql, mysqli, php-mysqlidb

我目前正在将一些代码从 mysql 转换为 mysqli。我已经下载了这个类： [https ://github.com/ajillion/PHP-MySQLi-Database-Class](https://github.com/ajillion/PHP-MySQLi-Database-Class)

我正在尝试这样简单的事情：

```
 $params = array('handset');
    $rs = $this->db->rawQuery("SELECT Id FROM productrates WHERE Type = ? ORDER BY GrossYearly ASC LIMIT 0,1 ", $params);   
    print_r($rs); 
```

打印出来：

> 数组（[0] => 数组（[Id] => 100017））

当不使用此类时，我后来使用了以下代码：

```
 if ($rs->num_rows != 0) {
        $row = $rs->fetch_assoc(); 
```

但是，现在会产生错误：

> 消息：试图获取非对象的属性

所以结果以数组的形式返回 - 我如何读取返回了多少结果然后循环遍历它们？我知道这一定很简单，但我真的让自己感到困惑，我需要一个快速的解决方案。

更多信息 - 这里是 rawQuery：

```
public function rawQuery($query, $bindParams = NULL) 
{
    $this->_query = filter_var($query, FILTER_SANITIZE_STRING);
    $stmt = $this->_prepareQuery();

    if (gettype($bindParams) === 'array') {
        $params = array('');        // Create the empty 0 index
        foreach ($bindParams as $prop => $val) {
            $params[0] .= $this->_determineType($val);
            array_push($params, $bindParams[$prop]);
        }

                call_user_func_array(array($stmt, "bind_param"),$this->refValues($params));

    }

    $stmt->execute();
    $this->reset();

    $results = $this->_dynamicBindResults($stmt);
    return $results;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:43:19.323

```
if ($rs) {
    $row = $rs[0];
} 
```

但最好下载这个：[https](https://github.com/colshrapnel/safemysql)
://github.com/colshrapnel/safemysql 它只需要 2 行就可以得到你的 $id

```
$sql = "SELECT Id FROM productrates WHERE Type = ?s ORDER BY GrossYearly LIMIT 1";
$id  = $this->db->getOne($sql, 'handset'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:47:37.917

您的函数将一个数组返回到一个数组中:) 所以要显示第一个：

```
$FirstArray = $rs[0]; 
```

要显示此数组中的所有项目：

```
foreach ($FirstArray as $result)
    echo $result; 
```

希望能帮助到你 ：）

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-14T20:46:27.617

PHP-MySQLi-Database-Class 中没有积极的开发。我不认为你应该浪费你的时间。无论如何，它留给你。

# c#-4.0 - 从视频c#中提取音频作为MP3文件

> ID：14326268
> 
> 赞同：2
> 
> 时间：2013-01-14T20:40:03.900
> 
> 标签：c#-4.0, audio, video, ffmpeg, avi

我想使用 c# 从视频文件中提取音频作为 MP3。音频的比特率应该可以指定。有人可以帮我吗？我已经看过“是否”，但我不确定是否可以在不提示 CMD 的情况下使用“是否”。

请不要建议我跟随文章。它不适用于大于 700mb 的文件 [http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library](http://www.codeproject.com/Articles/7388/A-Simple-C-Wrapper-for-the-AviFile-Library)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T13:49:20.140

您可以在不创建单独的控制台窗口的情况下调用 ffmpeg 二进制文件。我假设 C#/.NET 有模板，但如果没有，那么 WinAPI 的方法是在 CreateProcess() 调用中指定要运行的 ffmpeg 命令和 stdin/stdout 的虚拟句柄。此处描述了类似的内容：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms682499 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682499(v=vs.85).aspx)

# javascript - 像 gmail 一样的文件拖放悬停

> ID：14326269
> 
> 赞同：8
> 
> 时间：2013-01-14T20:40:04.807
> 
> 标签：javascript, jquery

我有以下html：

```
<div class="drop_window">
    <input class="drop_target" type="file" class="crop locale" size="800" />
    <div class="file_name">{{ video.original_file_name }}</div>
</div> 
```

要让 drop_window 在悬停时改变颜色，我可以这样做：

```
.drop_window:hover {
    background: #F5FFF5;
} 
```

但是，如果我尝试将文件拖到该 drop_window 中，它不会改变颜色。我将如何做到这一点，类似于 Gmail 的文件拖放功能？

这是我目前拥有的一个示例：http: [//jsfiddle.net/5MjGS/](http://jsfiddle.net/5MjGS/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T21:23:27.640

你可以只使用`addEventListner`on `dragenter`，然后你可以调整样式。确保重新打开颜色`dragexit`，例如：

因此，如果您只想`div`尝试一下：

```
var drop = document.getElementById("layout");
drop.addEventListener("dragenter", change, false);
drop.addEventListener("dragleave",change_back,false);

function change() {
  drop.style.backgroundColor = '#EFF2AA';
};

function change_back() {
  drop.style.backgroundColor = 'transparent';
}; 
```

# - 编辑

jsfiddle：http: [//jsfiddle.net/zFbfE/1/](http://jsfiddle.net/zFbfE/1/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-19T13:20:16.600

就像@enginefree 说你必须添加一些事件来改变上传容器的 CSS 样式。

唯一的事情是我应该使用`dragover`事件而不是`dragenter`事件。

```
var drop = document.getElementById("layout");
drop.addEventListener("dragover", change, false);
drop.addEventListener("dragleave",change_back, false);
drop.addEventListener("drop", change_back, false);

function change() {
  drop.style.backgroundColor = '#EFF2AA';
};

function change_back() {
  drop.style.backgroundColor = 'transparent';
}; 
```

这是因为`dragenter`如果您将鼠标悬停在上传容器内的输入控件或其他一些 div 上，它将不起作用。`dragover`如果您将鼠标悬停在任何控件上，该事件将触发。`dragleave`您只需使用事件再次删除样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T20:47:32.550

那里有很多拖放文件上传插件。

它看起来像一个文件，它是窗口上的悬停/鼠标悬停，不一定在元素上。

本教程[http://www.inserthtml.com/2012/08/file-uploader/](http://www.inserthtml.com/2012/08/file-uploader/)是我遵循的将 AJAX 文件上传到我制作的网站的教程。这是演示： http: [//www.inserthtml.com/demo/file-upload/](http://www.inserthtml.com/demo/file-upload/)

看起来他们使用这个 jQuery 事件处理程序来定位拖动文件的输入。

```
$('#drop-files').bind('dragenter', function() {
    $(this).css({'box-shadow' : 'inset 0px 0px 20px rgba(0, 0, 0, 0.1)', 'border' : '4px dashed #bb2b2b'});
    return false;
}); 
```

因此，您要查找的事件处理程序是 dragenter。

# jquery - 用于页面刷新的选项卡上的 jQuery cookie

> ID：14326278
> 
> 赞同：1
> 
> 时间：2013-01-14T20:40:56.160
> 
> 标签：jquery, cookies, tabs, refresh

我做了我的标签：

```
$('.tabed .tabs li:first-child').addClass('current');
$('.tabed .block:first').addClass('current');

$('.tabed .tabs li').click(function(){
        var tabNumber = $(this).index();
        $(this).parent('ul').siblings('.block').removeClass('current');
        $(this).siblings('li').removeClass('current');
        $(this).addClass('current');
        $(this).parent('ul').parent('.tabed').children('.block:eq('+ tabNumber +')').addClass('current');
}); 
```

如何在其中实现 jQuery cookie 插件，以便在页面刷新后显示“当前”选项卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:47:23.467

所以我根据选项卡的 id 执行此操作，但是如果您愿意，您可以根据索引执行相同操作：

```
$(document).on("click", "#tabs > li", function(){
    if(this.id)
        $.cookie("tab", this.id);
});    

if($.cookie("tab"))
{
    $("#"+$.cookie("tab")).addClass('active');
    $("#"+$.cookie("tab")+"content").addClass('active');
}
else
{
    $('.tabbable > .nav-tabs > :first-child').addClass('active');
    $('.tab-content > :first-child').addClass('active');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:09:39.873

我不认为你需要一个 jQuery cookie 插件来实现这一点。

如果您尝试在哈希中设置当前选项卡的索引会怎样：

```
$(".tabed .tabs li").on("click", function () {
    /* ... Your stuff here ... */
    window.location.hash = tabNumber;
});

if (window.location.hash) {
    var tabId = parseInt(window.location.hash.split("#")[1]);

    $(".tabed .tabs li:nth-child(" + (tabId - 1) + ")").addClass("current");
} 
```

# python - 有没有办法让配置文件中的值包含空行？

> ID：14326279
> 
> 赞同：3
> 
> 时间：2013-01-14T20:41:02.027
> 
> 标签：python

我正在使用 ConfigParser，我希望能够获得一个具有空行的文本变量。例如我的配置文件看起来像

```
[config]
text = hello

    goodbye 
```

但是当我显示文本时

```
hello
goodbye 
```

它忽略空行。我想知道是否有办法添加 \n 或其他东西，所以它会在那里放一个空白的空行

**编辑：* *我试过 parser = SafeConfigParser(allow_no_value=True)

我尝试将 \n 放在配置文件中，但这只是作为文本读取。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:38:22.560

get 接口提供了替换，可用于解决解析器对新行的严格处理的次优工作：

```
> cat test.cfg 
[test] 
test=one%(nl)stwo%(nl)sthree

> cat test.py 
import ConfigParser
c = ConfigParser.SafeConfigParser()
c.read('test.cfg')
print c.get('test','test', vars={"nl":"\n\n"})

> python test.py 
one

two

three 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:50:32.033

`\n`是换行符的转义码。尝试改用这些。

# java - JSF 试图创建托管属性

> ID：14326286
> 
> 赞同：0
> 
> 时间：2013-01-14T20:41:56.100
> 
> 标签：java, jsf, jsf-1.2

我有 2 个 bean，一个请求范围和 1 个会话范围。我正在尝试通过创建托管属性来访问请求 bean 中的会话范围 bean，但我一直收到错误消息：

```
com.sun.faces.mgbean.ManagedBeanCreationException: Unable to create managed bean tableBacking.  The following problems were found:
     - Property resultsBacking for managed bean tableBacking does not exist. 
```

这是我的请求范围 bean：

```
public class TableLookupBacking {

    private ResultsBacking resultsBacking;

    public void setResultsBacking(ResultsBacking resultsBacking) {
            this.resultsBacking = resultsBacking;
    }
} 
```

这是我的会话范围 bean：

```
public class ResultsBacking {
    // mainly strings and ints stored in here with getters/setters
} 
```

这是我的 faces-config.xml

```
<managed-bean>
    <managed-bean-name>tableBacking</managed-bean-name>
    <managed-bean-class>backing.TableLookupBacking</managed-bean-class>
    <managed-bean-scope>request</managed-bean-scope>
    <managed-property>
        <property-name>resultsBacking</property-name>
        <value>#{resultsBacking}</value>
    </managed-property>
</managed-bean>

<managed-bean>
    <managed-bean-name>resultsBacking</managed-bean-name>
    <managed-bean-class>backing.ResultsBacking</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
</managed-bean> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:37:05.390

有时 JSF 会放弃识别我们的支持 bean 或 bean 名称中的某些属性，这与**IDE/服务器/工具特定**问题有关。当发生这种情况并且您已经多次尝试重新部署和清理项目时，重命名类/属性名称可能是一个技巧。之后，一切都应该再次工作。

# objective-c - 在 NSView flagsChanged 中获取准确的修饰键状态

> ID：14326298
> 
> 赞同：4
> 
> 时间：2013-01-14T20:42:41.573
> 
> 标签：objective-c, macos, cocoa, nsview

我在 NSView 中使用 flagsChanged 在按下或释放修改键时触发事件。但是，我不太明白如何在发生这种情况时获取键的实际新状态，除了手动检查每个修饰键的状态。我目前正在使用自己的状态数组来检查它，但这似乎是错误的并且不可靠。我该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T03:30:06.237

`flagsChanged:`只需对照您感兴趣的各种修饰键掩码检查传入的事件：

```
- (void)flagsChanged:(NSEvent *)theEvent {
   if (([theEvent modifierFlags] & NSAlternateKeyMask) == NSAlternateKeyMask) {
       // Do something based on the alt/option key being pressed
    } else if (([theEvent modifierFlags] & NSCommandKeyMask) == NSCommandKeyMask){
       // Do something based on the command key being pressed
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:10:42.837

我不确定您所说的“手动”检查是什么意思。该`flagsChanged:`方法给你一个`NSEvent*`，你可以传递一个`modifierFlags`消息。

# eclipse - 在推断泛型时，Javac 编译目标 1.7 与 Eclipse Juno 编译 JDK 1.7 不同

> ID：14326299
> 
> 赞同：0
> 
> 时间：2013-01-14T20:42:41.400
> 
> 标签：eclipse, compiler-construction, javac, java-7

我目前使用目标 1.7 和源 1.7 与使用内置 1.7 jdk 的 Eclipse Juno 的 Gradle 存在编译问题。

我有 5 节课：

**Info.java** --> 没有方法的接口（例如）

```
public interface Info { //... } 
```

**RealInfo.java** --> 扩展 Info 接口的接口

```
public interface RealInfo extends Info { //... } 
```

**AbstractManager.java --> 具有“** **getInfo()** ”方法的抽象类

```
public abstract class AbstractManager<I extends Info>
{
    public I info;
    public I getInfo()
    {
        return this.info;
    }
} 
```

**Manager.java** --> 具有“ **getInfo()** ”方法的接口

```
public interface Manager
{
    public <I extends Info> I getInfo();
} 
```

**DefaultManager.java** --> 扩展*AbstractManager*

```
public class DefaultManager extends AbstractManager<RealInfo> implements Manager
{
    //...
} 
```

如果您将此代码复制/粘贴到 Eclipse 中，一切正常。没有编译错误。但是，如果我使用 Gradle 构建它，使用目标 jdk 1.7，编译器将不喜欢它：

```
DefaultManager.java:16: error: DefaultManager is not abstract and does not override abstract method <I>getInfo() in Manager
public class DefaultManager extends AbstractManager<RealInfo> implements Manager
                                                       ^
  where I is a type-variable:
    I extends Info declared in method <I>getInfo() 
```

你知道那里会发生什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T12:23:22.543

我发现 Javac 似乎不喜欢什么。

我将**AbstractManager**类修改为：

```
public abstract class AbstractManager<I extends Info>
{
    public I info;
    public <I extends Info> I getInfo()
    {
        return (I) this.info;
    }
} 
```

Gradle 现在在使用 Javac 编译时接受此代码。奇怪的是它无法正确`I`推断`<I extends Info>`. Eclipse 的编译器可以处理这两种语法。

# php - Xpath setAttribute 致命错误 调用成员函数 setAttribute

> ID：14326300
> 
> 赞同：2
> 
> 时间：2013-01-14T20:42:43.743
> 
> 标签：php, xml, xpath

我正在记录来自 API 调用的错误请求/响应。为了将日志存储在数据库中，我想用 * 替换信用卡号。

请求 XML 如下所示：

```
<xml>
    <request servicekey="service key" branchcode="branch" language="EN" postalcode="Postal Code" country="CA" email="email@example.com">
        <paxes>
            <pax id="1" birthdate="19790215" firstname="John" lastname="Smith" />
            <pax id="2" birthdate="19800828" firstname="Jane" lastname="Smith" />
        </paxes>
        <plans>
            <plan code="Plan Code" >
                <paxes>
                    <pax id="1" sumins="1200.00" />
                    <pax id="2" sumins="1480.31" />
                </paxes>
            </plan>
        </plans>
        <payments>
            <payment amount="246.24" type="VI" ccnum="4111111111111111" ccexp="0711" ccname="John Smith" />
        </payments>
    </request>
</xml> 
```

从这里我只需获取支付节点和 ccnum 属性来编辑它（xml 保存为 $requestXML）：

```
$_req = new DOMDocument();
$_req->loadXML($requestXML);
$_xpathReq = new DOMXPath($_req);
$_reqDom = $_xpathReq->query("/xml/request/payments/payment");
$_reqDom->item(0)->setAttribute('ccnum','*****');
$requestXML = $_req->saveXML(); 
```

它按预期工作，xml中的CC编号被替换为*

$responseXML 有点不同：

```
<string xmlns="http://tempuri.org/">
    <xml>
        <request servicekey="service key" branchcode="branch code" language="EN" postalcode="Postal Code" country="CA" email="email@example.com">
            <paxes>
                <pax id="1" birthdate="19790215" firstname="John" lastname="Smith" />
                <pax id="2" birthdate="19800828" firstname="Jane" lastname="Smith" />
            </paxes>
            <plans>
                <plan code="Plan Code">
                    <paxes>
                        <pax id="1" sumins="1200.00" />
                        <pax id="2" sumins="1480.31" />
                    </paxes>
                </plan>
            </plans>
            <payments>
                <payment amount="246.24" type="VI" ccnum="4111111111111111" ccexp="0711" ccname="John Smith" />
            </payments>
        </request>
        <response>
            <errors>
                <error>Purchase Card Processing was not approved [-1]:Cancelled: null | CARD: **** | Exp: 1407 | Amount: $246.24</error>
            </errors>
        </response>
    </xml>
</string> 
```

和以前一样的想法，我运行了一段非常相似的 PHP 代码：

```
$_req = new DOMDocument();
    $_req->loadXML($responseXML);
    $_xpathReq = new DOMXPath($_req);
    $_reqDom = $_xpathReq->query("/string/xml/request/payments/payment");
    $_reqDom->item(0)->setAttribute('ccnum','*****');
    $responseXML = $_req->saveXML(); 
```

但是当我运行它时，我得到`Fatal error: Call to a member function setAttribute() on a non-object`指向包含的行`$_reqDom->item(0)->setAttribute('ccnum','*****');`

两个 xml 之间的唯一区别是一个包含在字符串节点中，并且有一个额外的节点表示响应。我想我可以做一个解决方法（只需拉出响应节点并将其附加到请求 xml），但我现在正处于让这种方式工作是我的使命的地步。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:21:59.947

问题是由于响应 xml 中的命名空间。您必须使用 XPath 选择器注册 rootNamespace。以下代码将起作用：

```
$response = new DOMDocument();
$response->loadXML($responseXml);
$selector = new DOMXPath($response);

// get the root namespace
$rootNamespace = $response->lookupNamespaceUri(
    $response->namespaceURI
);
// and register it with $selector. I'm using 'x' as the prefix
// you are free to use a different prefix
$selector->registerNamespace('x', $rootNamespace);

// You won't need to specify the whole path. You could just grab 
// all payment node regardless of their location in the xml tree
$result = $selector->query('//x:payment');
foreach($result as $node) {
    $node->setAttribute('ccnum', '*****');
}

$responseXml = $response->saveXML();
echo $responseXml; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:21:49.600

该`<string>`标签包含一个命名空间，您需要使用 DOMXPath 注册该命名空间。

```
$_req = new DOMDocument();
$_req->loadXML($responseXML);
$_xpathReq = new DOMXPath($_req);

$_xmlns = $_req->lookupNamespaceUri(NULL); 
$_xpathReq->registerNamespace('x', $_xmlns); 

$_reqDom = $_xpathReq->query("//x:xml/x:request/x:payments/x:payment");
$_reqDom->item(0)->setAttribute('ccnum','*****');
$responseXML = $_req->saveXML(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-08T19:58:46.070

我有一个类似的问题，其中 xml 定义了几个命名空间，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
  <feed xmlns="http://www.w3.org/2005/Atom" 
        xmlns:dc="http://purl.org/dc/elements/1.1/" 
        xmlns:dcterms="http://purl.org/dc/terms/" 
        xmlns:media="http://search.yahoo.com/mrss/" 
        xmlns:xhtml="http://www.w3.org/1999/xhtml"> 
```

这使得无法进行`DOMXPath`查询。

通过以下方式导入 xml 进行修复：

```
libxml_use_internal_errors(true);
$doc->loadHTML($rawXml, LIBXML_HTML_NOIMPLIED | LIBXML_HTML_NODEFDTD | LIBXML_NSCLEAN);
libxml_use_internal_errors(false); 
```

我希望这可以帮助别人。用这个把我的头发扯掉了...

# php - 爆炸，中间字符

> ID：14326302
> 
> 赞同：0
> 
> 时间：2013-01-14T20:43:01.667
> 
> 标签：php

> **可能重复：**
> [将照片填充到 html div 的 php 脚本](https://stackoverflow.com/questions/14320343/php-script-that-populates-photos-to-a-html-div)

在查看 php 手册后，我似乎仍然无法找到如何从这个文件名中只提取一个字符。我有一个文件名列表，这些文件名的长度各不相同，并被一个低于分数的 Ex 分解。12321_1_23 543_2_34

我试过这段代码来了解它在做什么，但这只是打破了每个部分：

```
$example = explode( "_",$test); 
```

有没有办法让字符介于下划线之间？

# arrays - 如何使用 TCL 在非连续数字列表中创建缺少数字的列表

> ID：14326306
> 
> 赞同：1
> 
> 时间：2013-01-14T20:43:12.837
> 
> 标签：arrays, list, loops, tcl

我想在给定列表中创建一个缺少数字的数字列表，如下例所示

现有列表 { 1,3, 5, 9 , 13, 15}

结果列表 { 2,4,6,7,8,10,11,12,14}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:14:42.170

扩展的 TCL 具有`intersect3`作为其返回值之一的功能，它给出了`A-B`. 您可以将您的列表与跨越您的列表的所有可能数字的列表相交。

如果你不使用 Extended TCL，你将不得不自己实现一些东西。

我几乎从不使用 TCL，所以也许有更好的方法，但基本方法是对列表进行排序，然后遍历它并找到缺失的值：

```
#!/usr/bin/tclsh

set A {1 3 5 9 13 15}

set A [lsort -integer $A]
set B {}
set x 0
set y [lindex $A $x]

while {$x < [llength $A]} {
    set i [lindex $A $x]
    while {$y < $i} {
        lappend B $y
        incr y
    }
    incr x
    incr y
}
puts $B 
```

输出：

```
2 4 6 7 8 10 11 12 14 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T02:37:10.150

稻田的回答看起来不错。这有点短，假设列表已经排序。

```
package require Tcl 8.5
set A {1 3 5 9 13 15}
set result [list]
for {set i [lindex $A 0]; incr i} {$i < [lindex $A end]} {incr i} {
    if {$i ni $A} {
        lappend result $i
    }
} 
```

有关“ni”运算符，请参见[http://tcl.tk/man/tcl8.5/TclCmd/expr.htm#M15](http://tcl.tk/man/tcl8.5/TclCmd/expr.htm#M15)。

# java - 如何在类路径中包含 hbase-site.xml

> ID：14326308
> 
> 赞同：6
> 
> 时间：2013-01-14T20:43:16.093
> 
> 标签：java, hadoop, classpath, hbase

我目前正在尝试让我的 HBase 代码使用我的 hbase-site.xml 中指定的设置。它似乎使用默认设置而不是 hbase-site.xml 配置文件中指定的设置。自从更新文件后，我已经重新启动了 HBase 集群，但它仍然没有使用我更新的配置文件。

我使用的集群是 2 个节点，其中一个是主节点。两个节点上的配置文件都将主节点的 IP 指定为 zookeeper quorum。我相信问题是我在 hbase-site.xml 中指定的设置没有被使用，因为如果我通过代码将 zookeeper quorum 设置为与我的 hbase-site.xml 中相同的值，代码运行良好，但第二个节点不能如果未通过代码指定法定人数，请联系主人。

```
config = HBaseConfiguration.create();
config.set("hbase.zookeeper.quorum", masterNodeIP); 
```

我将非常感谢有关如何将 hbase-site.xml 包含到我的代码的类路径中的说明或链接。我在 Windows 机器上使用 Eclipse 进行开发，并在 Linux 集群上安装了 HBase 环境。由于依赖关系，我通常使用 Eclipse 编译代码。

理想情况下，我希望集群中的每个节点都使用自己的配置文件。

提前致谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T21:49:03.540

如果它使用默认值而不管你在`hbase-site.xml`你的 . 这是很有可能的，因为`conf-site.xml`在 hbase jar 中已经有一个。

要解决此问题，请编辑您的类路径以`hbase-site.xml`在类路径末尾添加包含您的目录，以确保没有任何内容覆盖它。就像是：

```
java -cp $CLASSPATH:/usr/lib/hbase/conf path.to.your.Mainclass 
```

如果它变得太模糊，我建议从命令行而不是在 Eclipse 中运行它，这样您就可以完全确定类路径中的内容。

希望有帮助。

# android - 安卓分享文字和图片

> ID：14326313
> 
> 赞同：3
> 
> 时间：2013-01-14T20:43:33.487
> 
> 标签：android

我需要通过 Facebook、电子邮件等分享文本+图像。现在，我使用以下代码：

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("image/*");
intent.putExtra(Intent.EXTRA_TEXT, getString(R.string.settings_share_text));
//Uri path = Uri.parse("android.resource://com.android.mypackage/" + R.drawable.arrow);
Uri path = Uri.parse("android.resource://com.android.mypackage/drawable/arrow.png");
intent.putExtra(Intent.EXTRA_STREAM, path );
Intent mailer = Intent.createChooser(intent, null);
startActivity(mailer); 
```

问题是当我使用“arrow.png”时，它显示“无法显示附件”并且不附加图像；当我删除 .png 时，我以后无法打开附件。基本上，我需要从 drawable 和一些文本中附加 png 并通过 ACTION_SEND 共享它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-26T14:22:34.030

尝试使用

```
Uri.fromFile(new File("android.resource://com.android.mypackage/drawable/arrow.png")); 
```

安装的

```
Uri.parse("android.resource://com.android.mypackage/drawable/arrow.png"); 
```

如果文件描述符有效，它将正常工作。

# android - 嵌入滚动视图时查看寻呼机不流畅？

> ID：14326317
> 
> 赞同：4
> 
> 时间：2013-01-14T20:44:09.463
> 
> 标签：android, image, android-viewpager

我有像Play商店应用程序这样的要求，其中有带有图像和视频的视图寻呼机并滚动以查看详细信息。不幸的是，当用户滚动时，滚动是跳跃的，但如果我删除滚动视图，视图寻呼机工作得很好。

布局的外观和感觉是这样的 [http://cl.ly/MBRB](http://cl.ly/MBRB)

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"  android:fillViewport="true">

<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <RelativeLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="160dp"
        android:background="@drawable/loading_image"
        android:gravity="top"
        android:orientation="vertical" >

        <android.support.v4.view.ViewPager
            android:id="@+id/product_image_pager"
            android:layout_width="fill_parent"
            android:layout_height="match_parent" />

        <com.viewpagerindicator.CirclePageIndicator
            android:id="@+id/titles"
            style="@style/CirclePageIndicator"
            android:layout_alignParentBottom="true"
            android:padding="10dip"
            android:paddingBottom="10dp" />
    </RelativeLayout>

    <include layout="@layout/app_screen_menu" />
</LinearLayout>
</ScrollView> 
```

顺便说一句，我正在从服务器加载图像。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:16:26.477

您正在使用 2 个滚动监听器

*   viewpager 使用滚动监听器
*   滚动视图使用滚动监听器

这两个滚动监听器正在为滚动事件而战。你可以通过实现来解决这个问题`onInterceptTouch`。在这种方法中，您可以决定谁赢得了 ScrollEvent 的战斗

看看这个[受保护的帖子](https://stackoverflow.com/questions/2646028/android-horizontalscrollview-within-scrollview-touch-handling)，关于包含 2 个滚动视图的类似问题

# c# - 我应该如何在 Appharbor 中使用 Npgsql？

> ID：14326321
> 
> 赞同：2
> 
> 时间：2013-01-14T20:44:28.347
> 
> 标签：c#, nhibernate, appharbor, npgsql

我在本地机器上使用 SQLite 开发了一个快速简单的应用程序来开始。现在我正在研究如何上传到 AppHarbor，我有点坚持让 ElephantSQL 的链接正常工作。

我使用[Application PostgreSQL Sample Application](https://github.com/appharbor/PostgreSQL-Sample-MVC-Application)来确定我需要使用`PostgreSQLConfiguration`该类来进行 FluentNHibernate 配置并将 Npgsql 包安装到我的解决方案（我获得了 2.0.12.1 版）。

当我将代码推送到 AppHarbor 时，它会愉快地构建和部署。当服务器开始启动 AppDomain 时，它会抛出错误`Could not load file or assembly 'policy.2.0.Npgsql' or one of its dependencies. Modules which are not in the manifest were streamed in. (Exception from HRESULT: 0x80131043)`。这没有记录在 AppHarbor 仪表板的错误部分中（也许这是缺少的功能或错误？）所以我不得不关闭 CustomErrors 以弄清楚发生了什么。

我错过了什么？

附加 - 我尝试降级到包版本 2.0.11。这不包括 policy.2.0.Npgsql.dll 文件，当尝试加载应用程序时，它失败并出现错误`Unable to find the requested .Net Framework Data Provider. It may not be installed.`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T15:26:48.193

我通过降到版本 2.0.11 让它工作，并确保 DbProviderFactories 配置部分在 type 属性中具有正确的版本号。

```
<DbProviderFactories>
  <add name="Npgsql Data Provider" invariant="Npgsql" description=".Net Framework Data Provider for PostgreSQL Server" type="Npgsql.NpgsqlFactory, Npgsql, Version=2.0.11.0, Culture=neutral, PublicKeyToken=5d8b90d52f46fda7" />
</DbProviderFactories> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-06T05:00:42.200

我在 AppHarbor 上运行 npgsql 2.0.13 beta（2013 年 12 月）并且被这个问题**困扰**了一段时间，直到我发现如果你正在运行最新的程序集并且不关心 bindingRedirects 则不需要它 - 它是由 .net AL.exe/assembly 链接器工具生成的 dll，用于汇总 policy.2.0.Npgsql.config 文件的内容（查看[https://github.com/npgsql/Npgsql/blob/master/src/ policyFileBuild.bat](https://github.com/npgsql/Npgsql/blob/master/src/policyFileBuild.bat)看看它是如何编译的）。

我的配置：
VS2012
.net 4.5
MVC4
Entity Framework 6（*通过 nuget package restore 安装*）
npgsql - 2.0.13.91（*通过 nuget package restore 安装*）

HACKY FIX：
通过从构建中删除它作为构建后事件（项目菜单->属性->构建事件->事件后命令行），您可以绕过错误（我不知道为什么不不适用于**AppHarbor**）。

所以添加这个废话：

```
del $(TargetDir)policy.2.0.Npgsql.dll /F
del $(TargetDir)policy.2.0.Npgsql.config /F
dir $(TargetDir)

del $(TargetDir)_PublishedWebsites\<appname/>\bin\policy.2.0.Npgsql.dll
del $(TargetDir)_PublishedWebsites\<appname/>\bin\policy.2.0.Npgsql.config
dir $(TargetDir)_PublishedWebsites\<appname/>\bin\ 
```

这可能有点过头了，但请注意，**dir** dos 命令语句会为您提供有关目录内容的反馈，以确保文件实际上已被删除。这可以从**AppHarbor**中的构建活动的显示日志中查看。

关于从那个糟糕的 msbuild 打包例程（/output 目录和 /output/_PublishedWebsites）中对 dll 和配置的 2 组删除 - 恕我直言 - 如果你正在杀死东西，最好彻底，但它可能就足够了仅从 _publishedwebsites 中删除...

当它在**AppHarbor**中构建时，这会将其从目标部署中删除。您可能需要等待几分钟才能完成部署，但如果没有部署，则会解除对您的阻止。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T12:29:29.860

我认为这个 nuget 包缺少 policy.2.0.Npgsql.dll 文件。您可以从官方 nuget Npgsql 包安装 2.0.12 版本的包吗？它有丢失的文件。

我希望它有所帮助。

# jquery - jQuery：使用 .load() 时将 json 设置为 dataType

> ID：14326322
> 
> 赞同：0
> 
> 时间：2013-01-14T20:44:28.470
> 
> 标签：jquery, ajax, load

```
$(...).load('index.html', params) 
```

有没有办法指示`load`将参数作为 JSON 传递？

是否`$.ajaxSetup({})`影响加载功能？

* * *

**我要发送的示例对象：**

```
{ 'state'  : [ { 'city' : 'city-foo' , 'zip'  : 'zip-foo' },
               { 'city' : 'city-bar' , 'zip'  : 'zip-bar' }
             ],
  'person' : [ { 'name' : 'name-foo' },
               { 'name' : 'name-bar' }
             ]
} 
```

**它的进来是什么（不需要的，个人参数）：**

```
state[0][city]
state[0][zip]
state[1][city]
state[1][zip]
person[0][name]
person[1][name] 
```

**我期待/想要的：**

参数名称类似于*json*具有一个值：`"{'state':[{'city':'city-foo','zip':'zip-foo'},{'city':'city-bar','zip':'zip-bar'}],'person':[{'name':'name-foo'},{'name':'name-bar'}]}"`

* * *

### 更多信息

我正在尝试将它与 bootstrap.js 和 select2.js 一起使用——特别是将多选值传递给脚本并将值返回给模式。

```
var param = {/* object similar in structure to above example */};
$('#modal-id').load('?do=givemevalues', param ).modal('show') 
```

[这是jsFiddle](http://jsfiddle.net/vol7ron/Kv5uY/)中的一个示例，您可以使用 firebug 进行探索，以查看参数在 POST 中是如何过去的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:49:00.183

**有没有办法指示负载将参数作为 JSON 传递？**

参数可以是字符串或对象。它本身就满足 JSON 表示法。但是，由服务器将其解析为 JSON。

另请注意，`Request Method`基于参数类型的更改。

> 如果数据作为对象提供，则使用 POST 方法；否则，假定为 GET。

**$.ajaxSetup({}) 会影响加载功能吗？**

是的，确实如此，以下来自文档。

> 使用任何函数的所有后续 Ajax 调用都将使用新设置，除非被单独的调用覆盖，直到下一次调用 $.ajaxSetup()。

# ruby-on-rails - 检查 Nokogiri HTML 文档是否可用

> ID：14326324
> 
> 赞同：2
> 
> 时间：2013-01-14T20:44:29.657
> 
> 标签：ruby-on-rails, ruby, screen-scraping, nokogiri

我想检查用户输入的 URL 是否实际上是有效页面。

我试过了：

```
if Nokogiri::HTML(open("http://example.com"))
  #DO REQUIRED TASK
end 
```

但这会在尝试打开页面时立即引发错误。我想返回它是否是任何类型的文档的结果。

我要么得到错误：

```
no such file or directory 
```

或者：

```
getaddrinfo: Name or service not known 
```

取决于我如何尝试进行检查。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T01:11:00.027

我将从以下内容开始：

```
require 'nokogiri'
require 'open-uri'

begin
  doc = Nokogiri.HTML(open(url))
rescue Exception => e
  puts "Couldn't read \"#{ url }\": #{ e }"
  exit
end

puts (doc.errors.empty?) ? "No problems found" : doc.errors 
```

Nokogiri 将文档的`errors`数组设置为解析过程中发生的任何错误的值。

不过，这只解决了问题的一部分。恶意的人喜欢破坏东西，这很容易破坏。一般来说，对用户给你的任何东西都要非常小心，尤其是当你的网站暴露在狂野的互联网上时。

[在告诉 OpenURI 加载文件以提供给 Nokogiri 之前，您应该嗅探该 URL 并使用HTTP HEAD](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html#method-i-head)请求进行一些完整性检查，以找出正在检索的内容的大小和 MIME-TYPE。一旦你知道了这些，你可以尝试加载文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-05T02:30:26.453

首先，在 Ruby 中“拯救 Exception => e”是一种不好的风格。[参考：[http](http://daniel.fone.net.nz/blog/2013/05/28/why-you-should-never-rescue-exception-in-ruby/) ://daniel.fone.net.nz/blog/2013/05/28/why-you-should-never-rescue-exception-in-ruby/ ]

其次，对于这种情况，“rescue OpenURI::HTTPError => e”会更合适。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:24:27.867

我不熟悉处理异常，但类似：

```
begin
  page = Nokogiri::HTML(open("http://example.com"))
ensure
  puts "not a document of any kind"
end
do_something_whith(page) if page 
```

......应该做的伎俩。

或（阅读您的评论后）：

```
begin
  page = open("http://example.com")
ensure
  puts "not a document of any kind"
end
Nokogiri::HTML(page) if page 
```

# wicket - Wicket中的多选下拉菜单

> ID：14326325
> 
> 赞同：4
> 
> 时间：2013-01-14T20:44:32.100
> 
> 标签：wicket

如何在 Wicket 中实现多选下拉菜单。我可以使用引导程序创建多选下拉视图，但我无法了解如何将所选选项与下拉组件的 IModel 相关联？Wicket有没有可能？我不想使用 ListMultipleChoice。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:36:56.620

这是一个示例代码。

```
{
 private IModel<List<? extends String>> statusChoices;
 private DropDownChoice<String> status;
 private String statusFilter = "firstChoice";
 // List of Items in drop down
 statusChoices = new AbstractReadOnlyModel<List<? extends String>>() {
     @Override
     public List<String> getObject() {
         List<String> list = new ArrayList<String>();
         list.add("firstChoice");
         list.add("secondChoice");
         list.add("thirdChoice");
         return list;
     }
 };

 status = new DropDownChoice<String>("status",new PropertyModel<String>(this, "statusFilter"), statusChoices);
 status.add(new AjaxFormComponentUpdatingBehavior("onchange") {
     @Override
     protected void onUpdate(AjaxRequestTarget target) {
         if(statusFilter.equals("firstChoice"))
             // Do Somthing
         else
             // Do Somthing
      }
  });
} 
```

# magento - Magento 条件可配置产品

> ID：14326328
> 
> 赞同：0
> 
> 时间：2013-01-14T20:44:41.153
> 
> 标签：magento, magento-1.7, configurable-product

我是 magento 的新手，想知道我是否可以使用条件逻辑创建产品？例如国家和州下拉菜单。

用户选择国家并根据该国家下拉列表填充。我还将有一个手机型号的下拉列表，每个型号的价格都不同。价格将根据国家、州和手机型号而定。

在 Magento 中仅使用可配置产品我无法实现这一点，因为我无法根据国家/地区填充状态下拉列表。

我怎样才能在 Magento 中实现这一点？如果没有，我可以使用任何扩展来实现这个国家和州的可配置下拉列表吗？

干杯!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:52:53.877

是和不是。

有分配给可配置产品的简单产品。选择第一个下拉菜单后，会出现下一个。如果具有某种属性组合的简单产品可用，则将其映射到下拉列表，如果没有，则不可用。

例如：

```
Shirts
 - blue, L
 - blue, M
 - blue, S
 - red, M
 - red, L 
```

如果您选择蓝色，则尺寸下拉菜单会显示 L、M 和 S。如果您选择红色，则只能在 M 和 L 之间进行选择。

您只能定义价格差异。如果您想要一种更简单的方法来定义价格，请使用 BCP - 更好的可配置产品： http: [//www.magentocommerce.com/magento-connect/better-configurable-products.html](http://www.magentocommerce.com/magento-connect/better-configurable-products.html)

# objective-c - Cocoa OSX：如何使图像可拖动

> ID：14326329
> 
> 赞同：2
> 
> 时间：2013-01-14T20:44:48.167
> 
> 标签：objective-c, xcode, cocoa

我有一个带有图像的面板，我想制作它，以便您可以通过“拖动”将文件（不是图像，图像仅作为文件的图标发送到服务器）复制到文件夹中应用程序外部的图像以及任何其他接受将文件拖入其中的应用程序（例如 Finder）。我怎样才能做到这一点？

我实现了[NSDraggingSource](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSDraggingSource_Protocol/Reference/Reference.html)协议，但我不确定如何使图像可拖动。它当前位于 内部`ImageView`，后者位于 内部`ImageViewCell`。

这是我实现的协议：

```
#import "DragNDropView.h"

@implementation 
-(NSDragOperation)draggingSession:(NSDraggingSession *)session
sourceOperationMaskForDraggingContext: (NSDraggingContext) context{
  switch(context){
    case NSDraggingContextOutsideApplication:
      return NSDragOperationCopy;
      break;
    default:
      return NSDragOperationNone;
      break;
  }
}

-(void) draggingSession:(NSDraggingSession *)session willBeginAtPoint:(NSPoint) screenPoint{
   NSPasteboard *pboard = [NSPasteboard pasteboardWithName:NSDragPboard];
   NSPaseBoardItem *contents = [[NSPasteboardItem alloc]
                                inithWithPasteboardPreopertyList:SDKFileName ofType:NSFileContentsPboardType];
   [pboard writeObjects[NSArray arrayWithObjects:contents, nil]];
}

-(void)drawRect:(NSRect)dirtyRect{
  SDKFileName = @"example.example";
  [super drawRect:dirtyRect];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:04:11.553

我添加了方法`- (id)initWithCoder(NSCode *)coder`，我还添加了
`- (BOOL)acceptesFirstMouse:(NSEvent *)event { return YES; }`

# android - 带有标签/提示/占位符的微调器始终可见

> ID：14326334
> 
> 赞同：0
> 
> 时间：2013-01-14T20:45:19.693
> 
> 标签：android, android-spinner

是否可以在 Android 中使用带有始终可见标签的 Spinner？

例如，指示性别的微调器。微调器的左侧应该有标签（“性别”）。微调器的右侧应该有值。

![在此处输入图像描述](../Images/ecb5c325fc923fbe1cccef58394490e8.png)

我遇到了一些问题：

*   如果设置为右侧，则微调器的重力属性不会显示右侧的文本。
*   微调器没有标签/提示/占位符属性？
*   使用属性 labelfor 设置为微调器 id 的 textview 不起作用。

# python - 谷歌应用引擎 - 数据存储过滤未按预期检索

> ID：14326335
> 
> 赞同：1
> 
> 时间：2013-01-14T20:45:24.233
> 
> 标签：python, google-app-engine, google-cloud-datastore

当我通过查看数据存储区知道存在匹配条目时，执行 gql.query 并没有得到任何结果 - 有人吗？也许它与我的变量的格式有关？

```
for each in leveloneAdd:
    new = tuple(each[1:-1].split(','))
    tag = new[0]
    htype = new[1]

    q1 = Level_1_Headings.all().filter("name1 =",tag).filter("heading_type =",htype).get() 
```

所以在我的日志中：已经确认变量的值如下：

```
INFO     2013-01-14 20:28:38,370 main.py:293] new is (u"'english'", u" 'subject'")
INFO     2013-01-14 20:28:38,370 main.py:295] tag is 'english'
INFO     2013-01-14 20:28:38,370 main.py:297] heading type is  'subject' 
```

还确认条目确实退出（name1 和 heading_type 都是可索引的）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:59:33.667

查看您的元组，您似乎有包含引号的字符串：

```
(u"'english'", u" 'subject'") 
```

因此，当您尝试查询它们时，您正在查询`'english'`而不是`english`，我假设您想要。如果可能，请尝试从原始字符串中删除引号，以查看结果是否按预期返回。你可以在这里看到不同之处：

```
In [61]: t = (u"'english'", u"'subject'")

In [62]: a, b = t

In [63]: print a, b
'english' 'subject'

In [64]: t = (u"english", u"subject")

In [65]: a, b = t

In [66]: print a, b
english subject 
```

要修复它，您可以尝试这样的事情（注意：您在 前面有一个前导空格`subject`，因此您可能需要对此进行调整）：

```
In [68]: a, b = [i.strip("'") for i in t]

In [69]: a, b
Out[69]: (u'english', u'subject')

In [70]: print a, b
english subject 
```

# python - 仅在左轴上的网格线

> ID：14326338
> 
> 赞同：1
> 
> 时间：2013-01-14T20:45:51.957
> 
> 标签：python, matplotlib

```
import pylab
import matplotlib.pyplot as plt
import matplotlib.ticker as ticker

pyplotParams = {
    'backend': 'eps',
    'axes.labelsize': 8,
    'axes.facecolor': '#E5E5E5',  # axes background color
    'axes.edgecolor': 'k',        # axes edge  color
    'axes.grid': True,            # display grid or not
    'axes.axisbelow': True,       # show grid below plot elements
    'grid.color': 'w',            # grid color
    'grid.linestyle': '-',        # grid line style
    'figure.dpi': 80,
    'figure.facecolor': 'w',
 }

 rcParams.update(pyplotParams) 
 fig1 = plt.figure()
 ax4 = fig1.add_subplot(111)
 ax4.plot(xaxis3_val,cum_ar_250_ret,color='g')
 ax4.plot(xaxis3_val,cum_basket_250_ret,color='b')
 ax5 = ax4.twinx()
 ax5.plot(xaxis3_val,signal,color='r')
 plt.show() 
```

在上面的示例中是一组 4 个图的缩减版本，我想要所有四个图上的网格线。但是在图 4 中，我只希望 ax4 而不是 ax5 的网格线。Axes 对象 (ax5) 似乎没有一种简单的方法来设置要关闭的网格打印。如何有选择地关闭 ax5 的网格线？我尝试了以下方法，但它不起作用：

```
(Pdb) ax5.get_xgridlines()
<a list of 6 Line2D xgridline objects>
(Pdb) ax5.grid(ls=None)
*** AttributeError: 'NoneType' object has no attribute 'startswith'
(Pdb) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:56:41.603

我想你只需要关闭电网。（[文档](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.grid)）

```
ax5.grid(False) 
```

# c# - mvc3 使用实体更新许多数据库记录

> ID：14326342
> 
> 赞同：0
> 
> 时间：2013-01-14T20:45:57.680
> 
> 标签：c#, asp.net-mvc-3, entity-framework, updates

如果语句中的条件匹配，我正在尝试使用实体来更新最多 30 条记录，但是我在找到正确的方法以在最后使用时遇到问题我所拥有的是

```
public ActionResult Edit(profile profile)
{
  //change all records where getid== x.registrationID
  var getprofile =
    (from x in db.Articles where getid == x.RegistrationID select x).Any();

  getprofile.firstname = profile.firstname;
  getprofile.lastname = profile.lastname;
} 
```

我得到的错误是 on`getprofile.firstname`并`getprofile.lastname`说 the`bool`不包含`firstname`or的定义`lastname`。如果我把`FirstorDefault()`一切都很好，但当然它只会改变第一条记录......

如何更改许多记录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:49:07.510

您可以`ToList()`用来获取以下内容的集合`Articles`：

```
List<Article> getprofiles = ( from x in db.Articles ... ).ToList();

foreach( Article getprofile in getprofiles )
{
  getprofile.firstname = profile.firstname;
  getprofile.lastname = profile.lastname;
}

db.SaveChanges(); 
```

这会查询数据库，获取匹配的`Article`行并将它们放入一个集合中 -`List<Article>`

然后您可以修改集合中的对象，最后调用`db.SaveChanges()`以更新数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:01:31.743

```
 var objRD = objBS.Articles.Where(c => c.RegistratinID.Equals(getID));

        if (objRD.Count() > 0)
        {
            foreach (ReportingData objR in objRD)
            {
                objR.firstname = profile.firstname;
                objR.lastname = profile.lastname;

            }
        }
        objBS.SaveChanges(); 
```

# android - 使用新的 Android Youtube API 和扩展服务

> ID：14326346
> 
> 赞同：1
> 
> 时间：2013-01-14T20:46:07.180
> 
> 标签：android, api, service, background, youtube

我正在尝试使用新的 Android Youtube API 构建一个应用程序，当应用程序不在前台时将播放该 API。为了实现后台播放，我想将播放器嵌入到服务中。我已经尝试过使用 YouTubePlayerActivity 和 YouTubePlayerFragment 并且当应用程序不在前台时都停止播放。有没有人能够做到这一点？

谢谢。

# ios - 来自服务器的 Jpeg 已损坏

> ID：14326348
> 
> 赞同：0
> 
> 时间：2013-01-14T20:46:19.100
> 
> 标签：ios, xcode, uiimage, jpeg

我有一个接收图像并将它们发送给客户端的服务器。问题是每当我从 iPad 发送图像时，图像都会损坏，但如果我从模拟器发送它，它不会。我`UIImageJPEGRepresentation`使用了 0.2 的压缩，但它仍然损坏。

我什至尝试过这种方法（没有用）：

```
- (BOOL)isJPEGValid:(NSData *)jpeg {
    if ([jpeg length] < 4) return NO;
    const char * bytes = (const char *)[jpeg bytes];
    if (bytes[0] != 0xFF || bytes[1] != 0xD8) return NO;
    if (bytes[[jpeg length] - 2] != 0xFF || bytes[[jpeg length] - 1] != 0xD9) return NO;
    return YES;
} 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:42:01.563

根据服务器软件的不同，通常存在大小限制。如果您发送的图像在 iPad 上自然会比 iPhone 大，这可能是问题所在。

要测试是否是这种情况，请尝试将图像缩小一半，然后将其发送`JPEGRep`到服务器。（祝你好运，这些是很难追的）

# bash - bash 和 telnet 测试电子邮件

> ID：14326350
> 
> 赞同：7
> 
> 时间：2013-01-14T20:46:25.433
> 
> 标签：bash, shell, unix, command, telnet

我正在尝试确定电子邮件地址是否有效。

我已经通过使用 telnet 完成了这个，见下文

```
$ telnet mail.example.com 25
Trying 0.0.0.0...
Connected to mail.example.com.
Escape character is '^]'.
220 mail.example.com Mon, 14 Jan 2013 19:01:44 +0000
helo email.com
250 mail.example.com Hello email.com [0.0.0.0]
mail from:blake@email.com
250 OK
rcpt to:gfdgsdfhgsfd@example.com
550 Unknown user 
```

通过这个 550 请求，我知道该地址在邮件服务器上无效......如果它有效，我会得到如下响应：

```
250 2.1.5 OK 
```

我将如何在 shell 脚本中自动执行此操作？到目前为止，我有以下

```
#!/bin/bash
host=`dig mx +short $1 | cut -d ' ' -f2 | head -1`
telnet $host 25 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T20:51:23.753

尝试这样做：

```
[[ $4 ]] || {
    printf "Usage\n\t$0 <domain> <email> <from_email> <rcpt_email>\n"
    exit 1
}
{
    sleep 1
    echo "helo $2"
    sleep 0.5
    echo "mail from:<$3>"
    sleep 0.5
    echo "rcpt to:<$4>"
    echo
} | telnet $1 25 |
    grep -q "Unknown user" &&
    echo "Invalid email" ||
    echo "Valid email" 
```

用法 ：

```
./script.sh domain email from_email rcpt_email 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:53:13.793

您始终可以将命令逐行输入到纯文本文件中，就像您在命令行上键入它们一样。然后你可以使用类似的东西

```
cat commands.txt | telnet mail.example.com 25 | grep -i '550 Unknown User' 
```

由于您可能需要将此文本文件视为模板，（我假设您可能希望参数化电子邮件地址）您可能需要插入对 awk 的调用以获取“cat commands.txt”的输出和插入您的电子邮件地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-26T09:30:16.717

# 要改变的变量

```
BODY="open realy smtp test"
SMTP-SRV="server_ip"
SMTP-PORT="25"
RCPT="name@domain"
SRC="name@domain" 
```

# 然后在 bash 中运行

```
/bin/nc ${SMTP-SRV} ${SMTP-PORT} << EOL
ehlo example_domain.com
mail from:${SRC}
RCPT to:${RCPT}
data
From:${SRC}
To:${RCPT}
subject: Telnet test
${BODY}
.
quit
EOL 
```

# ruby-on-rails-3 - 使用 tr 作为简单形式的标签输入包装器

> ID：14326351
> 
> 赞同：0
> 
> 时间：2013-01-14T20:46:26.610
> 
> 标签：ruby-on-rails-3, simple-form

我可能是老派，我曾经历过多次 div/span 尝试，曾一度发誓不使用表格，但表格只是有一些很好的用途，其中一个，恕我直言，是一种形式。我更喜欢用不同的背景颜色来遮蔽我的标签字段。我试过可能的方法，但如果输入（实际上是任何一个）边溢出宽度，它会弄乱标签背景。我会考虑另一种尝试，但我真的更喜欢表格方法。

在 2.x 中，我将配置设置为：

```
config.wrappers :tag => :tr, :class => :input,
  :hint_class => :field_with_hint, :error_class => :field_with_errors do |b|

  b.use :label, :wrap_with => {:tag => :td, :class => :label}
  b.use :input, :wrap_with => {:tag => :td, :class => :input}
  b.use :hint,  :wrap_with => { :tag => :span, :class => :hint }
  b.use :error, :wrap_with => { :tag => :caption, :class => :error } 
```

效果很好！，除了错误。我第一次把它当作一个跨度，它到了桌子的顶部。然后我将它设置为标题，至少在 Safari 中，它结束 tbody 并放入标题并开始另一个 tbody - 但它搞砸了表格流程。

有没有办法可以强制错误出现在输入包装器中？还是有其他方法？我什至会接受（也许这是我应该做的）将错误放在主要消息中，例如脚手架方法。直到我开始写这篇文章时才考虑到这一点，但我想我不能使用简单的表单错误内容并回到脚手架方法。

至少我认为你可以做到。例如，我不知道（并且无法在文档中找到 - 但我看起来并不难！）您可以将常规 form_for 输入（例如，f.text_field）与 f.input 混合使用。非常适合将 City、St、Zip 放在一排。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T14:41:39.103

我想我应该回答我自己的问题。我最终没有使用 Simple Forms 错误通知，而是回到了脚手架方法。

我将包装器配置如下：

```
config.wrappers :tag => :tr, :class => :input,
  :hint_class => :field_with_hint, :error_class => :field_with_errors do |b|
    b.use :label, :wrap_with => {:tag => :td, :class => :label}
    b.use :input, :wrap_with => {:tag => :td, :class => :input} 
```

为错误写了一个辅助方法：

```
def show_form_errors(instance)
  if instance.errors.any?
    errors = content_tag(:h2, pluralize(instance.errors.count, "error") +"prohibited this project from being saved:")
    list = content_tag :ul do
      e = ""
      instance.errors.full_messages.each do |msg|
        e <<"<li>#{msg}</li>"
      end
      e.html_safe
    end
    return content_tag(:div, (errors + list),:id => "error_explanation").html_safe
  end
end

# instead of
  # = f.error_notification
# I used
  # = show_form_errors(@event) 
```

不得不为 error_explanation 调整 CSS，因为我在表格行上定义了边框（只是边框底部）并添加 !important 以用红色边框包裹 tr：

```
.field_with_errors {
  padding: 2px;
  border:solid 3px red!important;
  background-color:pink;
} 
```

工作正常，我对这种方法很满意。

# xcode - 我可以在 Xcode 中#import 的所有文件在哪里？

> ID：14326355
> 
> 赞同：0
> 
> 时间：2013-01-14T20:46:30.583
> 
> 标签：xcode, import, header

我在 Xcode 工作。我可以与我的项目链接的所有头文件和库在哪里？什么目录？我想找到这样的档案，并发现我从未找到的其他档案……

objc-runtime.h 数学.h

谢谢。对不起，我知道这太容易了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:50:10.417

与任何其他 *BSD 一样，在 MacOS 上，头文件的默认位置在 /usr/include 中。要查找所有可能或可能不在编译器包含路径中的头文件，您还可以在 shell 中使用此命令：

```
find / -name "*.h" 
```

# jquery - jQuery .get() 在 IE8 中不起作用

> ID：14326358
> 
> 赞同：0
> 
> 时间：2013-01-14T20:46:45.510
> 
> 标签：jquery

我最近被告知，我写的一个例程在 IE 中不起作用。我知道它已经工作了很长一段时间，所以这个问题可能与较新版本的 IE 有关。代码是：

```
$(document).ready(
  function() {
    var aryRSS = new Array(5);

    $.get(
      'slider_info.xml',
      function($xml) {
        var html = "";
        var i = 1;
        $($xml).find('item').each(
          function() {
            var item_link  = $(this).find('item_link').text();  // The three pieces of information requested within the XML file
            var item_title = $(this).find('item_title').text().replace(/'/g, '&#39;'); 
            var item_image = $(this).find('item_image').text();
            // Build list items for slider
            html += "<li id='hp_images_nav" + i + "' title='" + item_title + "'";
            if (i == 1) { html += " class='hp_images_navSelected'"; }
            html += ">" + i + "</li>";
            // Build title, link, and image
            aryRSS[i] = "<h2><a href='" + item_link + "'>"
            aryRSS[i] += item_title + "</a></h2>"; // Add link and title for display outside rotation
            aryRSS[i] += "<a href='" + item_link + "'><img src='" + item_image + "' alt='" + item_title + "' title='Click to view article' /></a>"; // Extract the image from the description
            i++;
          }
        )
        $('#remove_this').remove(); // Remove empty list item, which exists for purpose of validation
        $('#hp_images_nav_items').append(html); // 
        $('#hp_images_nav').append('<div id="stop_start">||</div>');
        $('#hp_images').append(aryRSS[1]); // Create initial item
      },
      'xml'
    );
  }
) 
```

我得到一个有效的 XML 文件并使用它的内容来构建 HTML。除了 IE（我使用的是 IE9，我相信这也是 IE8 的问题）之外，这在所有方面都像冠军一样工作。

我已经尝试了各种各样的事情并且没有想法。这是我真正需要解决的问题，因此任何想法都将不胜感激。

干杯 -

乔治

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T20:48:44.993

您在该行缺少一个分号

```
aryRSS[i] = "<h2><a href='" + item_link + "'>" 
```

许多浏览器会处理这个问题，但 IE < 9 不会。

# android - 如何将 cookie 设置为 WebView？

> ID：14326361
> 
> 赞同：0
> 
> 时间：2013-01-14T20:47:03.697
> 
> 标签：android, android-webview

我有一个加载某个 URL 站点的 WebView，我可以使用以下代码添加用户代理字符串。我需要为网站设置一些 cookie 以启用移动视图格式。有点像下图。我想在加载网站之前设置 cookie，以便在加载时显示我想要的方式。

```
browser.getSettings().setUserAgentString("User Agent stuff"); 
```

![在此处输入图像描述](../Images/bfec0d6debcb74e356bc113abaa1d865.png)

我通过搜索找到的示例不是直截了当的，我无法弄清楚。我希望我能在这里得到一些帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:26:46.393

使用[`CookieManager`](http://developer.android.com/reference/android/webkit/CookieManager.html)API。确保您在[`setCookie()`](http://developer.android.com/reference/android/webkit/CookieManager.html#setCookie%28java.lang.String,%20java.lang.String%29)函数中输入的数据与出现在真实 Web 浏览器/Wireshark 等中的那些 cookie 具有相应的格式。

# paypal - 将项目详细信息添加到 PayPal Adaptive Payments API

> ID：14326363
> 
> 赞同：3
> 
> 时间：2013-01-14T20:47:07.900
> 
> 标签：paypal, paypal-adaptive-payments

我正在使用 Adaptive Payments API，并且正在尝试当我的用户被重定向到购买页面时，在“描述”下，他们会看到“{My Merchant}'s Test Store”。

有什么办法可以从 Pay API 调用或 SetPaymentOptions API 调用中改变它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:47:29.167

你说对了。您需要使用 SetPaymentOptions。

使用 CREATE 作为操作调用 Pay，然后将返回的 PayKey 传递给 SetPaymentOptions 以设置所需的所有详细信息。

# php - PHP - 在 Laravel 中使用参数路由

> ID：14326364
> 
> 赞同：0
> 
> 时间：2013-01-14T20:47:08.383
> 
> 标签：php, laravel

我正在尝试使用 Laravel 创建一个 RESTful API。

在我的`routes.php`：

```
Route::get('/accounts/(:any?)', array('as'=>'account_index', 'uses'=>'accounts@index')); 
```

我的控制器：

```
class Accounts_Controller extends Base_Controller {
public $restful = true;

public function get_index($id = null) {
    if(!$id)
        return Response::json(Account::all());
    return Response::json(Account::find($id));
} 
```

当我尝试任何请求时，我都会收到 404 响应`accounts/##`，但`accounts`效果很好。当我将路线更改为不`accounts`一样的东西时：

```
Route::get('/accts/(:any?)' 
```

我的路由按预期工作，并且在发送到的请求之上`accounts`仍然可以正常工作。是因为我正在使用`get_index`我的函数名称，所以它恢复为使用标准`http://localhost/controller/method/arguments`？

**编辑**我有控制器被自动检测：

```
Route::controller(Controller::detect()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T20:51:12.973

定义路由时，定义这些路由的顺序很重要。Laravel 使用正则表达式将请求的 URI 与这些模式进行匹配，第一个匹配的 URI 无需进一步处理即可使用。

`Route::controller('accounts')`有效匹配`accounts/(:any?)/(:any?)/(:any?)`等。如果您要测试 url，`accounts/index/12`您将得到预期的结果。

```
Route::get('/accounts/(:any?)', array('as'=>'account_index', 'uses'=>'accounts@index'));
Route::controller( Controller::detect() ); 
```

希望这可以帮助。

# git - git clone，忽略目录

> ID：14326365
> 
> 赞同：50
> 
> 时间：2013-01-14T20:47:08.650
> 
> 标签：git

我正在尝试在 wordpress 安装上测试一些东西。在这样做时，我想快速复制回购。但是，上传目录（`wp-content/uploads`）很大，所以我想忽略它。

注意：我不想一直 .gitignore 这个目录，只是为了这个场景。

基本上，我想要一个像这个伪代码这样的命令：`git clone --ignore wp-content/uploads`.

将该目录添加到 .gitignore、克隆然后还原 .gitignore 的最佳方法是什么？或者有没有更好的方法？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2016-12-15T10:57:00.473

聚会有点晚了，但是：你不想要一个稀疏的结帐吗？

```
mkdir <repo> && cd <repo>
git init
git remote add –f <name> <url> 
```

启用稀疏结帐：

```
git config core.sparsecheckout true 
```

通过在 .git/info/sparse-checkout 中列出所需的子树来配置 sparse-checkout：

```
echo some/dir/ >> .git/info/sparse-checkout
echo another/sub/tree >> .git/info/sparse-checkout 
```

从远程结帐：

```
git pull <remote> <branch> 
```

有关更多信息，请参阅[http://jasonkarns.com/blog/subdirectory-checkouts-with-git-sparse-checkout/](http://jasonkarns.com/blog/subdirectory-checkouts-with-git-sparse-checkout/)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-14T20:53:46.033

`git clone`将始终克隆*完整*的存储库*，包括以前添加到存储库的所有提交。因此，即使您暂时删除文件，然后克隆它，您仍然会收到包含这些文件的旧版本。

此外，仅编辑`.gitignore`不会从存储库中删除跟踪的文件，即使它们通常会被忽略。

所以不，在克隆过程中跳过某个文件夹是不可能的。

*可以限制克隆期间检索的提交数量，但这不会使存储库非常可用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-15T08:50:56.790

您可以指定要克隆的深度（`--depth=1`仅获得 1 次提交）。您可能希望设置一个缺少此目录的分支，然后仅以 1 的深度进行克隆。由于 git 是基于快照的，因此在克隆时排除提交的一部分并不容易。这是最接近您想要的。

如果你完全控制了这个 repo，你可能想要创建这个目录的子模块，并且只在你想要管理该部分时才进行子模块更新。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-15T10:31:03.683

在服务器上：

```
 git checkout master^0    # the ^0 checks out the commit itself, not the branch
 git filter-branch --tree-filter 'git rm -r wp-content/uploads' HEAD
 git checkout -b filtered 
```

（这里的一个大项目的过滤器分支以每秒大约 2-3 次提交的速度生成新的历史记录）

然后，随心所欲，

```
 git init
 git remote add gimme your://repo/path
 git fetch gimme filtered 
```

**编辑**：根据[http://git-scm.com/docs/git-filter-branch修复语法错误](http://git-scm.com/docs/git-filter-branch)

# java - 尝试捕获 - 无法实例化活动 ComponentInfo

> ID：14326366
> 
> 赞同：0
> 
> 时间：2013-01-14T20:47:16.133
> 
> 标签：java, android

我有两种方法来更新和删除我的应用程序中的数据，我在我的 switch 语句中实现了尝试捕获，现在收到以下错误：

```
01-14 20:38:58.778: D/AndroidRuntime(273): Shutting down VM
01-14 20:38:58.778: W/dalvikvm(273): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
01-14 20:38:58.798: E/AndroidRuntime(273): FATAL EXCEPTION: main
01-14 20:38:58.798: E/AndroidRuntime(273): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.flybase2/com.example.flybase2.viewEdit}: java.lang.NullPointerException
01-14 20:38:58.798: E/AndroidRuntime(273):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2585)
01-14 20:38:58.798: E/AndroidRuntime(273):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
01-14 20:38:58.798: E/AndroidRuntime(273):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
01-14 20:38:58.798: E/AndroidRuntime(273):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
01-14 20:38:58.798: E/AndroidRuntime(273):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-14 20:38:58.798: E/AndroidRuntime(273):  at android.os.Looper.loop(Looper.java:123)
01-14 20:38:58.798: E/AndroidRuntime(273):  at android.app.ActivityThread.main(ActivityThread.java:4627)
01-14 20:38:58.798: E/AndroidRuntime(273):  at java.lang.reflect.Method.invokeNative(Native Method)
01-14 20:38:58.798: E/AndroidRuntime(273):  at java.lang.reflect.Method.invoke(Method.java:521)
01-14 20:38:58.798: E/AndroidRuntime(273):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
01-14 20:38:58.798: E/AndroidRuntime(273):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
01-14 20:38:58.798: E/AndroidRuntime(273):  at dalvik.system.NativeStart.main(Native Method)
01-14 20:38:58.798: E/AndroidRuntime(273): Caused by: java.lang.NullPointerException
01-14 20:38:58.798: E/AndroidRuntime(273):  at com.example.flybase2.viewEdit.<init>(viewEdit.java:63)
01-14 20:38:58.798: E/AndroidRuntime(273):  at java.lang.Class.newInstanceImpl(Native Method)
01-14 20:38:58.798: E/AndroidRuntime(273):  at java.lang.Class.newInstance(Class.java:1429)
01-14 20:38:58.798: E/AndroidRuntime(273):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
01-14 20:38:58.798: E/AndroidRuntime(273):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
01-14 20:38:58.798: E/AndroidRuntime(273):  ... 11 more 
```

任何人都可以看到这个问题吗？没有尝试捕获它可以完美地工作。

继承人类：

```
package com.example.flybase2;

import android.app.Activity;
import android.app.Dialog;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class viewEdit extends Activity implements OnClickListener{

EditText namePassedEdit;
EditText numPassedEdit;
EditText emailPassedEdit;
EditText commentPassedEdit;
Button bUpdate;
Button bDelete;
long passedID = 0;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.editview);

DBHandler displayEdit = new DBHandler(this, null, null);

        Bundle extras = getIntent().getExtras(); 
        if (extras != null) {
            passedID = extras.getLong("passedID"); 
        }
        displayEdit.open();
        String returnedNameToEdit = displayEdit.getName(passedID);
        String returnedNumToEdit  = displayEdit.getNum(passedID);
        String returnedEmailToEdit  = displayEdit.getEmail(passedID);
        String returnedCommentToEdit = displayEdit.getComments(passedID); 

    namePassedEdit = (EditText) findViewById(R.id.inputNameEdit);
    numPassedEdit = (EditText) findViewById(R.id.inputTelNoEdit);
    emailPassedEdit = (EditText) findViewById(R.id.inputEmailEdit);
    commentPassedEdit = (EditText) findViewById(R.id.inputCommentEdit);
    bUpdate = (Button) findViewById (R.id.btnAddConEdit);
    bDelete = (Button) findViewById (R.id.btnDeleteContact);

        namePassedEdit.setText(returnedNameToEdit);
        numPassedEdit.setText(returnedNumToEdit);
        emailPassedEdit.setText(returnedEmailToEdit);
        commentPassedEdit.setText(returnedCommentToEdit);

        bUpdate.setOnClickListener(this);
        bDelete.setOnClickListener(this);
}

String nameEdit = namePassedEdit.getText().toString();
String telEdit = numPassedEdit.getText().toString();
String emailEdit = emailPassedEdit.getText().toString();
String commentEdit = commentPassedEdit.getText().toString();

@Override
public void onClick(View updateOrDeleteClicked) {
    boolean check = true;
switch(updateOrDeleteClicked.getId()){

    case (R.id.btnAddConEdit):

        try
    {

        DBHandler updateData = new DBHandler(this, null, null);
        updateData.open();
        updateData.updateData(passedID, nameEdit, telEdit, emailEdit, commentEdit);
    } 
    catch (Exception e)
    {
        check = false;

        Dialog d = new Dialog(this);
        d.setTitle("Contact failed to be deleted.");
        TextView txt = new TextView(this);
        txt.setText("Fail");
        d.setContentView(txt);
        d.show();
    }
    finally
    {
        if(check = true);
        {

            Dialog e = new Dialog(this);
            e.setTitle("Contact deleted.");
            TextView txt = new TextView(this);
            txt.setText("Success");
            e.setContentView(txt);
            e.show();
        }
    }

        break;

    case (R.id.btnDeleteContact):

    try
{

        DBHandler deleteContact = new DBHandler(this, null, null);
        deleteContact.open();
        deleteContact.deleteData(passedID);
} 
catch (Exception e)
{
    check = false;

    Dialog d = new Dialog(this);
    d.setTitle("Contact failed to be deleted.");
    TextView txt = new TextView(this);
    txt.setText("Fail");
    d.setContentView(txt);
    d.show();
}
finally
{
    if(check = true);
    {

        Dialog e = new Dialog(this);
        e.setTitle("Contact deleted.");
        TextView txt = new TextView(this);
        txt.setText("Success");
        e.setContentView(txt);
        e.show();
    }
}

    break;
}

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:01:34.187

```
String nameEdit = namePassedEdit.getText().toString();
String telEdit = numPassedEdit.getText().toString();
String emailEdit = emailPassedEdit.getText().toString();
String commentEdit = commentPassedEdit.getText().toString(); 
```

这些行不在方法内，您不能那样使用它们。你得到一个空指针，`namePassedEdit`因为它试图在创建类时初始化它们，并且还没有为它们分配任何东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T20:50:24.717

我在这里看到的一个问题是：

`if(check = true);` //这结束了 if 语句在这里和这里你分配 true 来检查仅此而已..

我想你需要的是：

```
if(check){....} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:00:30.950

我能找到的主要问题是您在第 59 行关闭了 onCreate 的大括号。在函数之间保留以下行。

```
String nameEdit = namePassedEdit.getText().toString();
String telEdit = numPassedEdit.getText().toString();
String emailEdit = emailPassedEdit.getText().toString();
String commentEdit = commentPassedEdit.getText().toString(); 
```

如果您将这些移到 onCreate 中，它可能会解决您的问题。同样正如@Nambari 在他们的回答中所说，在您的 if 语句中，您正在检查 check 是否设置为 true。您需要将其更改为：

```
if(check) 
```

# javascript - 带有商店的 ExtJS 隐藏字段

> ID：14326372
> 
> 赞同：2
> 
> 时间：2013-01-14T20:47:41.240
> 
> 标签：javascript, extjs, extjs4

在 ExtJS 中，无论如何都要创建一个带有“存储”的隐藏字段，这意味着当我加载页面时，隐藏字段将根据 url 向服务器发出请求并将值存储在自身中。类似于 what `src`does for`image`或 what `store`can do got `grid`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T08:00:25.853

实现这一目标的最简单方法是调用自定义 ajax 请求。例子：

```
var hiddenField = [...];

Ext.Ajax.request({
    url: 'foo.php',
    success: function(response, opts){
        hiddenField.setValue(response.responseText);
    },
    failure: function(response, opts) {
        alert('Error');
    },
    params: { foo: 'bar' }
}); 
```

# jquery - 脚本在 joomla 上不起作用，但它在 html 页面上完美运行

> ID：14326376
> 
> 赞同：0
> 
> 时间：2013-01-14T20:48:25.787
> 
> 标签：jquery, jquery-plugins

我正在尝试通过使用 css 转换属性来实现缩放 Onclick，因为它适合响应式的东西。

我使用了一个 jquery 插件，它工作正常，下面提到的一个链接在简单的 html [http://techchef.co/devTest/test/](http://techchef.co/devTest/test/)

但是它在 joomla 网站上不起作用，当我尝试使用它时，脚本在网站前端完美显示，我解决了所有冲突问题。但现在它显示错误 *Uncaught TypeError: Cannot call method 'click'为空*

如果您检查以下链接上的元素，您会发现错误。

该脚本使用在网站 [http://techchef.co/clients/Suitcase/index.php/travel/featurestravel上完美调用的](http://techchef.co/clients/Suitcase/index.php/travel/featurestravel)**base.js**

**这是 base.js 文件** [http://techchef.co/clients/Suitcase/templates/gk_music_free/js/base.js](http://techchef.co/clients/Suitcase/templates/gk_music_free/js/base.js)

请指导我如何开始工作......它已经花了我一整天的时间:(((

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:10:52.803

试试看吧；

```
<script type="text/javascript">

jQuery(document).ready(function($) {
    $('#new').click(function () {$('#test').animate({scale: '+=0.33'}, {queue: false, duration: 1000});});
});

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:11:02.880

控制台错误说那`$('#new')`是“不是一个对象”。所以要么`$`不被识别为 jQuery 对象，要么 jQuery 没有加载，要么`#new`元素不存在。对你来说，这是第一项。

您的 jQuery 在 中使用`jQuery.noConflict();`，`head`因此您应该使用`jQuery`美元符号代替`$`。

另外为了安全起见，我建议您将 jQuery 代码包含在`document.ready`

```
<script type="text/javascript">

jQuery(document).ready(function() { 
    jQuery('#new').click(function () {
        jQuery('#test').animate({
            scale: '+=0.33'
        }, {
            queue: false, 
            duration: 1000
        });
    });
});

</script> 
```

这也将起作用...

```
<script type="text/javascript">

jQuery(document).ready(function($) { // pass the "$" into the function
    $('#new').click(function () {
        $('#test').animate({
            scale: '+=0.33'
        }, {
            queue: false, 
            duration: 1000
        });
    });
});

</script> 
```

**工作演示：http: [//jsfiddle.net/42HNC/](http://jsfiddle.net/42HNC/)**

# asp.net-mvc - ASP.NET MVC 更新部分模型

> ID：14326382
> 
> 赞同：0
> 
> 时间：2013-01-14T20:48:54.530
> 
> 标签：asp.net-mvc, jquery, updatemodel

我有非常复杂的模型。流程是这样的： - 在控制器中我从数据库中填充模型 - 在视图中我有几个选项卡。在第一个选项卡上填写信息后，第二个选项卡启用（这很好用），然后单击第二个选项卡按钮，我需要更新模型的一些属性。如何在不再次调用数据库以在控制器上填充模型的情况下执行此操作？该模型非常复杂，因此我无法将所有属性存储为“隐藏”。

我希望我设法说得足够清楚。感谢您的任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T23:47:43.580

使用模仿您的模型的 JSON 对象，并在用户单击不同的选项卡或其他任何内容时对其进行更新。客户端更新/操作完成后，使用 AJAX 将您的 JSON 对象提交给控制器。以下是如何通过单击按钮执行此操作（您可以将其更改为单击的任何内容）：

```
 <script src="../../Scripts/json2.js" type="text/javascript"></script>
    <input type="button" value="Partially Update my Model" onclick="UpdateYourModel()" />
        <input type="button" value="Save to Database" onclick="SaveToDataBase"/>
        <script type="text/javascript">
            // Create YourModel Json Object including child objects in it.
             var childObject={"ChildId": "","ChildDescription":""};
//The array name (childObjects) should match the collection name in your actual Model
            var yourModel= { "ModelId": "", "Description": "","childObjects[]":""  }; 

        function UpdateYourModel() {
        //update the childObject first
          childObject.ChildId=1;//any value from anywhere
          childObject.ChildDescription="any value";

        // Update the model
           yourModel.ModelId= $("#ModelId").val();
           yourModel.Description="This property was changed at client side";
           yourModel.childObjects.push(childObject);//add child object to yourModel

        //Likewise, update other properties of yourModel

        }//function ends here

        function SaveToDataBase()
        {
        $.ajax({
                    url: "URL to your controller",
                    data: JSON.stringify(yourModel),
                    type: 'POST',
                    contentType: 'application/json;',
                    dataType: 'json',
                    success: function (result) {
                     alert("Success");

                    }
                });
        }
        </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:43:09.310

我在使用 ASP.NET MVC 时遇到了同样的情况。我使用 ViewBag 以非常神奇的方式发送数据，创建 Javascript 字符串并使用 Html.Raw 运行它们，在许多地方使用 .executeSql，完成了真正的魔法。但毕竟我问自己：值得痛苦吗？

无论您没有足够的时间（我的意思是这个！），我都强烈建议您阅读一些好的文档并尝试一些教程，然后再潜入解决方法的黑暗海洋。

不要忘记，通过良好的设计并很好地使用模型类的功能，您将不需要太多的变通方法，这首先会给您带来快乐。

针对您的情况；最好的地方是创建一个 Helper 类，例如：

```
public abstract class Helper<T> : WebViewPage<T>
{
    private dbContext db = new dbContext();

    public virtual whatEver yourUpdateOperation(int? id, string data)
    {
        // you can do your update operations here
        return whatEver;
    }
} 
```

要将此类应用于所有网页，请更改 Views 目录中 web.config 文件中的行：

```
<pages pageBaseType="YourProject.HelperDirectory.Helper"> 
```

从现在开始，您可以从您的视图中调用 yourUpdateOperation，例如：

```
@foreach (var item in Model)
{
<tr>
    <td>
    <!-- View or operate things-->
    </td>
    @yourUpdateOperation(item.ID, data)
</tr>
} 
```

希望这可以帮助。

# jquery - 带有 jQ uery 动画的 Chrome/Safari 中的 CSS3 问题

> ID：14326390
> 
> 赞同：1
> 
> 时间：2013-01-14T20:49:45.380
> 
> 标签：jquery, jquery-ui, css, webkit

[请看这个小提琴。](http://jsfiddle.net/QcZdX/4/)
在**Chrome**（版本 23）和**Safari**中，如果您一直单击“顶部”链接以将项目移动到顶部，则“顶部”按钮将在不应该隐藏时开始隐藏。
由于我使用的是**CSS3** `first-child/last-child`，我希望只更改顶部和底部 LI 的按钮可见性。
我注意到如果我摆脱对“动画”的调用，它会按预期工作。
这个小提琴在 Firefox 17 和 IE 9 中有效。
有人知道这里发生了什么吗？

看起来这些样式没有被正确地重新应用：

```
ul#sortable li:first-child a.top { visibility:hidden; }
ul#sortable li:last-child a.bottom { visibility:hidden; } 
```

谢谢，

安迪

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:13:55.540

我可以通过在排序完成后将链接的位置属性重置为相对来解决这个问题。

```
$(this).parent().find('a').css('position','relative'); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/QcZdX/6/)**

# jquery - 浮点图图例和轴标签不一起工作

> ID：14326394
> 
> 赞同：0
> 
> 时间：2013-01-14T20:50:10.383
> 
> 标签：jquery, graph, flot

我正在使用 JQuery Flot 图插件并且遇到了一些困难。如果有人有更多的知识，请帮助我！

我试图在图形之外的单独 div 中显示轴图例，并显示 X/Y 轴的轴标签。但不知何故，这两件事不能一起工作。如果我注释掉一个，另一个工作正常。但不在一起。这是我的工作代码：

```
$.plot($(container), [
  {label:'Label1',data: dataPoints, lines: {show: true, lineWidth:1}, color:"#72BA82"},
  {label:'Label2',data: dataPoints2, lines: {show: true, lineWidth:1}, color:"#000"}
  ],
  {legend: { show: true, noColumns:3, container: '#graph1LegendHolder' }},
  {xaxis:{show: true,axisLabel: "Time",axisLabelFontSizePixels: 12 },
  yaxis:{show: true,axisLabel: "Amount",axisLabelFontSizePixels:12
  }}
); 
```

正如我上面提到的，图例和轴线不能一起工作，但我相信其他代码是正确的。知道如何使两者一起工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:41:59.240

您将图例和轴选项作为两个单独的选项对象传递；Flot 将忽略其中一个，因为它只需要一组选项。您需要将它们组合起来：

```
...
], {
    legend: { ... },
    xaxis: { ... },
    yaxis: { ... }
}); 
```

# app-store - 应用商店 - 两个应用与应用内购买

> ID：14326395
> 
> 赞同：0
> 
> 时间：2013-01-14T20:50:16.173
> 
> 标签：app-store, in-app-purchase

出于营销（而不是技术）原因，我将提交一个金融服务 iPad 应用程序，它有两种风格，“常规”用于代表自己工作的个人用户，“专业”用于代表客户工作的理财规划师.

“Pro”版本功能包括常规版本中的所有内容，还提供了保存和在客户端数据集之间切换的能力。大多数代码是相同的，只有一小部分代码被添加到 Pro 版本构建中（尽管将来可能会添加更多功能，这可能会扩大功能差距）。

问题来了：是在商店中维护两个独立的应用程序（使用不同的应用程序 ID？），还是作为单个应用程序购买 InApp 进行升级更好？

我宁愿避免 InApp 购买的基础设施，但我想在苹果政策的“线之间涂上颜色”，并为用户和未来的发展保持合理。

大多数“普通”用户永远不会升级。但是许多（大多数？）“Pro”用户可能希望从更便宜的单用户配置开始，然后在“Pro”版本上花费更多的钱。关于如何打包的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T21:32:26.907

似乎最好的办法是创建第二个目标，将项目设置为归档两者，然后将它们作为单独的应用程序加载到 App Store。

我主要基于阅读有关供应的各种答案中的字里行间（至少似乎有一些证据表明其他人已经采取了这条路线）。我仍然欢迎那些走这条路（或走另一条路）的人发表评论或其他意见。谢谢。

# c# - 正则表达式将带有管道分隔的字符串分成多个组

> ID：14326397
> 
> 赞同：1
> 
> 时间：2013-01-14T20:50:30.510
> 
> 标签：c#, regex

我正在编写将字符串分成两个不同组的 ac# 代码。字符串是用管道分隔的，如下例所示：

*   两个管道之间可能有一个空白空间。
*   “5GOdNF7Q5fK5O9QKiZefJEfO1YECcX1w”的管道数量是固定的；在这种情况下，有 4 个管道。

    ```
     string value = "122312121|test value||test value 2|5GOdNF7Q5fK5O9QKiZefJEfO1YECcX1w|123456789|123456789";
        const string sPattern = @"What should it be here?????";
        var regex = new Regex(sPattern);
        var match = regex.Match(value);
        if (match.Success)
        {
            var begin = match.Groups["begin"].Value;
            var middle = match.Groups["middle"].Value;
            var end = match.Groups["end"].Value;
        } 
    ```

    我试图让代码的输出返回如下：

    *   begin = "122312121|测试值||测试值 2|"
    *   中间=“5GOdNF7Q5fK5O9QKiZefJEfO1YECcX1w”
    *   结束 = "|123456789|123456789"

但是，我对正则表达式很陌生，我尝试为变量 sPattern 编写正则表达式，但无法为其生成正确的正则表达式。有什么可以帮忙的吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T20:58:14.220

你应该使用`String.Split`

```
 string [] sarray = value.Split('|') 
```

那会做的是给你数组

```
{"122312121", "test value", "" , "test value" , "2", "5GOdNF7Q5fK5O9QKiZefJEfO1YECcX1w", "123456789", "123456789"} 
```

并将`5GOdNF7Q5fK5O9QKiZefJEfO1YECcX1w`在`sarray[5]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T21:08:43.153

如果你正在寻找一个正则表达式来匹配这个并且想要使用一个正则表达式而不是 .Split，你可以试试这个：

```
"^((.*?[|]){4})(.*?)([|].*)*$" 
```

或更明确地说：

```
"^(?<begin>(.*?[|]){4})(?<middle>.*?)(?<end>[|].*)*$" 
```

这是基于这样一个事实，即您所说的长弦固定之前的管道数量（四个）。

然后，您的代码将如下所示：

```
string value = "122312121|test value||test value 2|5GOdNF7Q5fK5O9QKiZefJEfO1YECcX1w|123456789|123456789";
const string sPattern = @"^((.*?[|]){4})(.*?)([|].*)*$";
var regex = new Regex(sPattern);
var match = regex.Match(value);
if (match.Success)
{
    var begin = match.Groups[1].Value;
    var middle = match.Groups[3].Value;
    var end = match.Groups[4].Value;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:15:25.320

这是另一个：

```
^(?<begin>(.*?\|){4})(?<middle>.*?(?=\|))(?<end>.*) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T21:09:19.157

你可以使用`String.Split`and some`Linq`来做你需要的

粗略的例子：

```
string value = "122312121|test value||test value 2|5GOdNF7Q5fK5O9QKiZefJEfO1YECcX1w|123456789|123456789";
string[] split = value.Split('|');

string begin = string.Join("|", split.Take(4));
string middle = split.Skip(4).Take(1).FirstOrDefault();
string end = "|" + string.Join("|", split.Skip(5).Take(2)); 
```

退货

*   begin = "122312121|测试值||测试值 2|"
*   中间=“5GOdNF7Q5fK5O9QKiZefJEfO1YECcX1w”
*   结束 = "|123456789|123456789"

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T21:03:32.617

诀窍可能是转义管道字符：

```
const string sPattern = @"(?<begin>[^|]*\|[^|]*\|[^|]*\|[^|]*\|)" +
                        "(?<middle>[^|]*)" + 
                        "(?<end>\|.*)"; 
```

# jquery - 如何在 jQuery 验证插件中使用通配符？

> ID：14326401
> 
> 赞同：0
> 
> 时间：2013-01-14T20:50:35.330
> 
> 标签：jquery, jquery-validate

如何使用具有名称模式的 ids 的 jQuery 插件验证表单，例如#formNewHouse1、#formNewHouse2、..？

此代码使用单一类型（正常）形式：

```
$("#formNewHouse").validate({
    rules: {
        formNewHouseName: {
            required: true
        },
        formNewHouseAddress: {
            required: true
        }
    },
    messages: {
        formNewHouseName: {
            required: "Please type a name"
        },
        formNewHouseAddress: {
            required: "Please type an address"
        }
    }
}); 
```

我需要这样的东西，其中 X = 2,3,6,18,19,...（来自 DB 的 ID）我该如何实现？

```
$("#formNewHouseX").validate({
    rules: {
        formNewHouseNameX: {
            required: true
        },
        formNewHouseAddressX: {
            required: true
        }
    },
    messages: {
        formNewHouseNameX: {
            required: "Please type a name"
        },
        formNewHouseAddressX: {
            required: "Please type an address"
        }
    }
}); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T19:10:03.727

此外，与这个问题类似，有一个有效的答案：

[jQuery Validate set rule使用通配符查找目标字段](https://stackoverflow.com/q/13885056/594235)

* * *

这是一个答案以及其他人所缺乏的东西......[一个工作演示](http://jsfiddle.net/anUXf/1/)：

使用 jQuery 的[`.each()`](http://api.jquery.com/jQuery.each/)方法`.validate()`对所有匹配的表单进行初始化。

然后使用内置`rules()`方法添加规则并通过`class`. [请参阅文档。](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)

**HTML：**

```
<form id="formNewHouse1">
    <input type="text" class="myclass" name="formNewHouseName" />
    <input type="text" class="myclass" name="formNewHouseAddress" />
</form>

<form id="formNewHouse2">
    <input type="text" class="myclass" name="formNewHouseName2" />
    <input type="text" class="myclass" name="formNewHouseAddress2" />
</form> 
```

**jQuery：**

```
var myoptions = {
    // contains options for all forms
};

$("form[id^=formNewHouse]").each(function() {
    $(this).validate(myoptions);
});

// the following method must come AFTER .validate()
$('form').find('.myclass').each(function() {
    $(this).rules('add', {
        required: true,
        digits: true, // just another example rule
        messages: {
            required: "Required input",
            digits: "Please only enter digits"
        }
    });
}); 
```

[**jsFiddle 演示**](http://jsfiddle.net/anUXf/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T21:04:25.653

首先，一次调用验证所有表单。最后我检查了一下，jQuery Validate 没有正确处理验证集合，所以你需要使用`.each`（或类似的）为每个表单创建一个新的验证器。

```
$("form[id^=formNewHouse]").each(function() { $(this).validate() }); 
```

然后，将类添加到您的字段，以便您可以整体选择它们并应用规则。

```
$('.newHouseName').rules('add', {required: true, messages: {required: 'Please type a name'}});
$('.newHouseAddress').rules('add', {required: true, messages: {required: 'Please type an address'}}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:08:43.933

你会更好地使用类，但如果你需要使用 id，你可以使用类似这样的东西

```
$("form[id^='formNewHouse']").validate({
    //...
}); 
```

这将选择所有 id 以“formNewHouse”开头的表单元素

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T21:12:01.907

我认为问题在于您如何构建页面。我假设你有类似的东西

```
<form id="formNewHouse1">
    <input type="text" name="newHouseName1" />
    <input type="text" name="newHouseAddress1" />
</form>

<form id="formNewHouse2">
    <input type="text" name="newHouseName2" />
    <input type="text" name="newHouseAddress2" />
</form> 
```

这会导致您在调用每个单独的输入以提供验证规则时遇到问题。但我认为如果你重组你的 HTML，你可以很好地清理所有东西。您可以只为您的表单提供唯一的名称/ID，但保持输入名称相同。

```
<form id="formNewHouse1" class="formNewHouse">
    <input type="text" name="newHouseName" />
    <input type="text" name="newHouseAddress" />
</form>

<form id="formNewHouse2"  class="formNewHouse">
    <input type="text" name="newHouseName" />
    <input type="text" name="newHouseAddress" />
</form> 
```

然后你可以像在你的帖子中那样调用你的验证，但是使用一个类来代替。：

```
$(".formNewHouse").validate({
    rules: {
        formNewHouseName: {
            required: true
        },
        formNewHouseAddress: {
            required: true
        }
    },
    messages: {
        formNewHouseName: {
            required: "Please type a name"
        },
        formNewHouseAddress: {
            required: "Please type an address"
        }
    }
}); 
```

但是，如果您要动态生成输入名称，那么您就是将自己置于需要单独执行所有操作的位置。所以我希望这不是你正在做的。

# ios - Xcode UIView 背景像 TableView 分组

> ID：14326402
> 
> 赞同：0
> 
> 时间：2013-01-14T20:50:36.527
> 
> 标签：ios, xcode, uitableview, uiview

我希望我的 UIView 在 tableview 分组时具有与 TableView 背景相同的背景。我的意思是条纹蓝色背景:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:54:32.140

将视图的背景颜色设置为`[UIColor groupTableViewBackgroundColor]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:55:01.990

下次查看文档：

```
[UIColor groupedTableViewBackgroundColor]; 
```

[http://developer.apple.com/library/ios/documentation/uikit/reference/UIColor_Class/Reference/Reference.html#//apple_ref/occ/clm/UIColor/groupTableViewBackgroundColor](http://developer.apple.com/library/ios/documentation/uikit/reference/UIColor_Class/Reference/Reference.html#//apple_ref/occ/clm/UIColor/groupTableViewBackgroundColor)

# php - 无法让 phpseclib 连接 - 错误 10060

> ID：14326406
> 
> 赞同：1
> 
> 时间：2013-01-14T20:50:52.257
> 
> 标签：php, ssh, phpseclib

我无法让我的本地环境 Win7 运行 easyPHP 12 连接到我的服务器 ubuntu 11.04。

我通过 sftp 和 filezilla 连接到我的服务器，我可以通过 ssh 和 putty 连接到我的服务器......服务器目前不需要密钥，只需要一个 uname 和 pword ......

我不明白，我通过 php 脚本传递的细节与我从 filezilla 和 putty 传递的细节完全相同。

这是剥离到基本的代码：

```
//inlcude the phpseclib path in the include array and include the ssh2 class
set_include_path( WEBROOT_PRIVATE.'scripts/phpseclib0.3.0' );
if(!include('Net/SSH2.php')){
    echo 'Sorry failed to load SSH2 class';
    br();
}
if(!include('Net/SFTP.php')){
    echo 'Sorry failed to load SFTP class';
    br();
}
$connection = new Net_SFTP( 'xx.xx.xx.xx', 'xx' );
echo 'ss';
$login = $connection->login( 'username', 'password');
exit(); 
```

这是我得到的回应：

> 注意：无法连接到 xx.xx.xx.xx。错误10060。连接尝试失败，因为连接方在一段时间后没有正确响应，或者连接失败，因为连接的主机没有响应。在 ....\www_private\scripts\phpseclib0.3.0\Net\SSH2.php 线 776 ss

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:46:36.267

Most likely server requires keyboard-interactive auth, while component tries password auth.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:47:27.723

fsockopen 失败并出现您遇到的错误，这表明对我而言，这与其说是 phpseclib 问题，不如说是 PHP 问题。

因此 SSH 的工作方式是，当您尝试连接时，服务器会立即向您发送横幅。它对 stackoverflow.com 执行此操作，例如：

```
<?php
$fsock = fsockopen('www.stackoverflow.com', 22);
echo fgets($fsock, 1024); 
```

当我运行该脚本时，我得到“SSH-2.0-OpenSSH_5.3”。

我的猜测是，如果您更新该 PHP 脚本以与您的服务器一起使用，您将收到 phpseclib 给您的相同错误消息。

# c# - 我想在我的 c# 应用程序中添加超过 1 个控制台屏幕，

> ID：14326408
> 
> 赞同：-2
> 
> 时间：2013-01-14T20:51:04.467
> 
> 标签：c#, console-application

我目前正在为应用程序编写登录服务器，我将需要我在同一项目中制作的另一台服务器中制作的所有对象，但现在我想要某种方法将两个应用程序拆分为单独的控制台屏幕，而不运行2 serperate c# 应用程序

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T20:56:19.437

您需要创建一个表单来显示您的输出，因为每个进程有一个真正的 win32 控制台的严格限制。

* * *

您提到“1 个带有 2 个单独屏幕的控制台”的评论提出了另一种选择。Win32 控制台 API 具有丰富的功能，用于在控制台窗口中放置文本。您也可以更改颜色、背景颜色、强度。但为此目的，最有趣的功能是仅滚动控制台窗口的一部分。我之前实际上已经这样做了，以便在单个控制台窗口中创建两个单独的输出流。不幸的是，没有简单的方法可以从 .NET 访问此功能——您必须广泛使用 p/invoke（或使用 C++ 互操作编写自己的包装器）。而且它没有任何焦点的概念来允许两个独立的输入流；它仅适用于多个输出。

# asp.net - 从一个 ASP 页面创建多个响应

> ID：14326417
> 
> 赞同：0
> 
> 时间：2013-01-14T20:51:29.443
> 
> 标签：asp.net, httpresponse, response.redirect

当用户选中复选框并单击特定按钮时，我已经在服务器上做了一些事情，然后用于`Response.Redirect`“重置”页面。我还有一个功能，允许我通过使用`application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`响应将数据表“导出”到 Excel 电子表格。

这两者在分开时都非常有效。但是，我现在需要做的是在单击一个按钮后同时发生这两个事件。

似乎我需要在导出到 excel 后刷新响应，然后再重定向响应，但我似乎无法让它工作。我可能在这个问题上很遥远，需要一些帮助。谢谢

**编辑：**

好吧，我决定通过打开一个新页面（downloadexcel.aspx）来解决这个问题，然后它将启动下载并在下载完成后关闭。我通过将其写入当前页面的响应来使用 javascript 打开 downloadexcel.aspx。但是，由于某种原因，在重定向原始页面之前没有打开窗口。他们是在我重定向之前要调用的方法吗？也许我有语法问题？

```
Response.Write("<script type='text/javascript'>window.open('~/DownloadExcel.aspx', '', ''); </script>")

        Response.Redirect("~/BulkImport.aspx") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:59:06.920

如果您想在单个 HTTP 请求中执行此操作，那么您将得到一个响应。您可以**返回**HTTP 200（以文件为内容）或 HTTP 301 来重定向客户端。你不能同时返回。

底线是您需要**重新考虑您的方法**，您可以使用 javascript 在客户端“清理”表单，而不是使用重定向重新加载页面。

# windows-7 - 乌姆布拉科去哪儿了？

> ID：14326418
> 
> 赞同：0
> 
> 时间：2013-01-14T20:51:36.963
> 
> 标签：windows-7, iis-7, umbraco

我昨天在带有 Web PI 的 Windows 7 Ultimate 机器上安装了 Umbraco 4.x。我在玩 CWS 套件，一切都很好。

我今天回来了，无法访问该站点或在 IIS(7) 中查看它。我尝试添加到 IIS，但浏览时出现 500.19 错误。我玩过应用程序池，但无济于事。

我猜它设置为作为不同的用户运行，但我在这台机器上只有一个帐户，因为它是一台家用电脑，或者它可能在 IISExpress 下运行？

任何帮助表示赞赏。

编辑：

我已经为 IIS 的文件夹添加了权限，现在 500.19 的详细信息是 -

此配置部分不能在此路径中使用。当该部分锁定在父级别时会发生这种情况。锁定是默认情况下 (overrideModeDefault="Deny") 或由具有 overrideMode="Deny" 或旧 allowOverride="false" 的位置标记显式设置的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:31:55.563

我猜我最初安装它时它是在 IIS Express 上运行的，但我对 Umbraco 的了解还不够，无法确定。反正我——

*   手动设置站点以在 IIS7 中运行，将 App Pool 更改为 .net4
*   允许对站点目录的 IUSR 权限
*   使用“%windir%\Microsoft.NET\Framework\v4.0.30319\aspnet_regiis.exe -i”修复了 .Net4 安装

现在它似乎正在工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:54:49.567

500.19 通常是一个安全问题。您必须修复保存 Umbraco 的文件夹中的权限。

这是我通常在控制台（不是 powershell）中运行的脚本，用于修复 Umbraco 中的权限。您必须将“IIS APPPOOL\umbraco”替换为运行您的 umbraco 站点的应用程序池名称。例如“IIS APPPOOL\myUmbracoAppPool”

```
icacls . /grant "IIS APPPOOL\umbraco":(OI)(CI)M
icacls app_code /grant "IIS APPPOOL\umbraco":(OI)(CI)RX
icacls app_browsers /grant "IIS APPPOOL\umbraco":(OI)(CI)RX
icacls app_data /grant "IIS APPPOOL\umbraco":(OI)(CI)M
icacls bin /grant "IIS APPPOOL\umbraco":(OI)(CI)R
icacls config /grant "IIS APPPOOL\umbraco":(OI)(CI)M
icacls css /grant "IIS APPPOOL\umbraco":(OI)(CI)M
icacls data /grant "IIS APPPOOL\umbraco":(OI)(CI)M
icacls masterpages /grant "IIS APPPOOL\umbraco":(OI)(CI)M
icacls media /grant "IIS APPPOOL\umbraco":(OI)(CI)M
icacls python /grant "IIS APPPOOL\umbraco":(OI)(CI)M
icacls scripts /grant "IIS APPPOOL\umbraco":(OI)(CI)M
icacls umbraco /grant "IIS APPPOOL\umbraco":(OI)(CI)R
icacls usercontrols /grant "IIS APPPOOL\umbraco":(OI)(CI)R
icacls xslt /grant "IIS APPPOOL\umbraco":(OI)(CI)M
icacls web.config /grant "IIS APPPOOL\umbraco":(OI)(CI)M 
```

# knockout.js - 淘汰赛计算未更新

> ID：14326419
> 
> 赞同：1
> 
> 时间：2013-01-14T20:51:38.403
> 
> 标签：knockout.js

我在 JS 中有以下内容：

```
function reportCriteria(fieldId,fieldName,filterOption,optionText,filterChoice) {
        return {
            fieldId: fieldId
            fieldName: fieldName,
            filterOption: filterOption,
            optionText: optionText,
            filterChoice: filterChoice,
            description: ko.computed(function () {
                return fieldName + " which " + optionText + " " + filterChoice;
            })
        };
    } 
```

我的模型中有一个 observableArray，其中包含我推送的这些：model.criteriaEntries.push(new reportCriteria(paramshere));

一切看起来都很好，直到我尝试像这样编辑一个：

```
var criItem = ko.utils.arrayFirst(model.criteriaEntries(), function (item) {
            return item.fieldId == id;
        });
        if (criItem) {
            criItem.filterOption = option;
            criItem.optionText = opttext;
            criItem.filterChoice = choice;
            model.criteriaEntries.valueHasMutated();
        } 
```

我没有收到任何错误，我可以调试并看到对象已更改，但计算的描述不会更新，因为尽管添加了 valueHasMutated?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T21:07:32.760

您的问题是您正在通过 criItem.optionText = opttext; 覆盖 optionText

不要那样做。相反，更新 optionText：

```
criItem.optionText(opttext); 
```

然后您的计算将相应更新。

* * *

***编辑***以下是您的报告创建代码应如下所示：

```
function reportCriteria(fieldId,fieldName,filterOption,optionText,filterChoice) {
    var report = {
       fieldId: fieldI),
       fieldName: fieldName,
       filterOption: ko.observable(filterOption),
       optionText: ko.observable(optionText),
       filterChoice: ko.observable(filterChoice)
    };
    report.description = ko.computed(function () {
       return report.fieldName + " which " + report.optionText() + " " + report.filterChoice();
    });
    return report;
} 
```

以下是如何进行编辑：

```
var criItem = ko.utils.arrayFirst(model.criteriaEntries(), function (item) { return item.fieldId == id; });
if (criItem) {
   criItem.filterOption(option);
   criItem.optionText(opttext);
   criItem.filterChoice(choice);
} 
```

# node.js - 为 socket.io 覆盖 Backbone.sync

> ID：14326428
> 
> 赞同：0
> 
> 时间：2013-01-14T20:52:06.470
> 
> 标签：node.js, backbone.js, socket.io

我正在处理基于 socket.io 的服务器/客户端连接，而不是 ajax。*客户端使用 Backbone，我用自己的一半*覆盖了 Backbone.sync 函数 ：

```
 Backbone.sync = function (method, collection, options) {
    // use the window.io variable that was attached on init 
    var socket = window.io.connect('http://localhost:3000');
    // emit the collection/model data with standard ajax method names and options
    socket.emit(method,{collection:collection.name,url:collection.url});
    // create a model in the collection for each frame coming in through that connection 
    socket.on(collection.url,function(socket_frame){
      collection.create(socket_frame['model']);
    })
  }; 
```

我只是通过附加到 window.io 全局变量的套接字发出而不是 ajax 调用。服务器侦听这些发射并基于模型 url，我不想更改该行为，我在每个发射帧内使用默认的 crud 方法名称（读取、补丁...）。它背后的逻辑（有点远，但谁知道）如果客户端不支持 Websockets，我可以轻松地回退到默认的 jQuery ajax。我将原始的 Backbone.sync 附加到一个 var 上，这样当没有可用的 websocket 时，我可以将相同的参数传递给它。

所有这一切都是伟大的表现正确，服务器响应客户端事件。然后，服务器将每个模型数据作为单独的 websocket 帧发送到一个连接中。我将 Network/Websocket 过滤器中的帧视为一个（并发/已建立）连接，并且事情似乎正在工作

目前该函数假定我传递一个集合而不是模型。

**问题：**

*   这种方法适合你吗？

*   如何以正确的方式在 Backbone 中的“成功”和“失败”等上使用 socket.io 回调，这样我就不必“手动”调用 c​​ollection.create 函数？

*   为模型/集合建立不同的并发连接还是使用已经建立的连接更好？

# jsf-2 - 如何使用 JSF EL 表达式迭代参数中的变量

> ID：14326430
> 
> 赞同：1
> 
> 时间：2013-01-14T20:52:14.970
> 
> 标签：jsf-2, primefaces, el

我有一个 PrimeFaces`<p:dataGrid>`组件，其中包含可变数量的面板。每个面板都包含许多衍生组件。我在每个面板中都包含一个删除按钮，以允许删除。我在 dataGrid 之外还有一个添加按钮。我没有在按钮上使用`immediate="true"`，而是想出了如何在每个面板中设置每个组件的必需属性。

例如：

```
required="#{empty param['vehicleGrid:0:btnDelete'] and empty param['btnAdd']}". 
```

对于 dataGrid 中的每个删除按钮和添加按钮，忽略组件验证。

如果 dataGrid 内部有一个面板，则此方法有效，但它仅引用第一个。我需要动态检查每个面板。也许不是从标记页面查看它，也许我需要用 Java 术语查看它，因为 param 是一个`Map<String, String>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T20:56:04.067

将删除按钮组件绑定到视图并[`UIComponent#getClientId()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIComponent.html#getClientId%28%29)改为使用。

```
<h:inputText ... required="#{empty param[deleteButton.clientId]}" />
...
<h:commandButton binding="#{deleteButton}" ... /> 
```

这样，将在参数映射中查找正确的客户端 ID，然后无需遍历参数映射。

# sql - SQL 中聚合函数的除法不符合预期

> ID：14326435
> 
> 赞同：2
> 
> 时间：2013-01-14T20:52:31.993
> 
> 标签：sql, sql-server, aggregate-functions, division, crosstab

我正在尝试在 SQL Server 2008 R2 中做一些交叉表。这部分没问题，但是，如果我尝试获取每个单元格的百分比，我会遇到问题。

这是一个提炼的用例：人们给出他们最喜欢的颜色和最喜欢的水果的调查。我想知道有多少人喜欢给定的水果和给定的颜色：

```
with survey as (
    select 'banana' fav_fruit, 'yellow' fav_color
     union select 'banana', 'red'
     union select 'apple', 'yellow'
     union select 'grape', 'red'
     union select 'apple', 'blue'
     union select 'orange', 'purple'
     union select 'pomegranate', 'green'
)
select
    s.fav_color, 
    sum(case 
          when s.fav_fruit = 'banana' then 1
          else 0
        end) as banana, 
    sum(case 
           when s.fav_fruit = 'banana' then 1
           else 0
         end) / sum(1)   -- why does division always yield 0? "+", "-", and "*" all behave as expected.
         * 100 as banana_pct,
     sum(1) as total
from 
    survey s
group by
    s.fav_color; 
```

结果：

```
fav_color   banana banana_pct  total
------------------------------------
blue        0      0            1
green       0      0            1
purple      0      0            1
red         1      0            2
yellow      1      0            2 
```

我所期待的：

```
fav_color   banana banana_pct  total
------------------------------------
blue        0      0           1
green       0      0           1
purple      0      0           1
red         1      50          2
yellow      1      50          2 
```

请帮助我得到我所期待的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T20:56:04.757

您正在使用 SQL Server。这是一个更简单的示例，可以复制该问题：

```
select 1/2 
```

SQL Server 进行整数除法。

`sum(1.0)`用类似或`sum(cast 1 as float)`或`sum(1e0)`代替的东西替换分母`sum(1)`。

至少与我的预期相反，SQL Server 将带小数点的数字存储为数字/十进制类型（请参阅[此处](http://msdn.microsoft.com/en-us/library/ms179899.aspx)）而不是`float`. 固定的小数位数可能会影响后续操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T20:59:19.437

询问：

**[SQLFiddle示例](http://sqlfiddle.com/#!3/d41d8/7730)**

```
SELECT s.fav_color,
       sum( CASE WHEN s.fav_fruit = 'banana' THEN 1 ELSE 0 END ) AS banana,
       sum( CASE WHEN s.fav_fruit = 'banana' THEN 1 ELSE 0 END) / sum(1.00) -- why does division always yield 0? "+", "-", and "*" all behave as expected.
 * 100 AS banana_pct,
   sum(1) AS total
FROM survey s
GROUP BY s.fav_color 
```

结果：

```
| FAV_COLOR | BANANA | BANANA_PCT | TOTAL |
-------------------------------------------
|      blue |      0 |          0 |     1 |
|     green |      0 |          0 |     1 |
|    purple |      0 |          0 |     1 |
|       red |      1 |         50 |     2 |
|    yellow |      1 |         50 |     2 | 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-12T14:31:16.273

我最近发现了 IIF 函数。它使事情变得更清洁。以上面贾斯汀的例子：

```
SELECT s.fav_color,
       sum( IIF(s.fav_fruit = 'banana', 1,0) AS banana,
       sum( IIF(s.fav_fruit = 'banana', 1,0) / sum(1.00) 
 * 100 AS banana_pct,
   sum(1) AS total
FROM survey s
GROUP BY s.fav_color 
```

# jquery - 在 jQuery 中可编程地单击 li img

> ID：14326438
> 
> 赞同：0
> 
> 时间：2013-01-14T20:52:48.880
> 
> 标签：jquery

我正在尝试单击我的 LI 缩略图之一。用于此的 HTML 代码是：

```
<ul id="thumbImgs" class="list" style="height: 250px;">
   <li id="04_BOARDWALK_VIEW.jpg" data-wh="1000|700|testing 3" class="item">
      <img src="cms/img/uploaded/04_BOARDWALK_VIEW_tmb.jpg" width="120" height="120" class="imgStyle" style="opacity: 0.5;">
   </li>
   etc etc....
</ul> 
```

我已经尝试过：

```
$('#04_BOARDWALK_VIEW.jpg').click();

$("#thumbImgs li #04_BOARDWALK_VIEW.jpg").click();

$("#thumbImgs li 04_BOARDWALK_VIEW.jpg").click(); 
```

但这似乎不起作用。我会错过什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T20:54:56.140

`.`是一个特殊字符，因此需要转义。

```
$('#04_BOARDWALK_VIEW\\.jpg') 
```

虽然我也想知道您如何能够在不这样做的情况下向图像添加点击处理程序。

您的原始选择器将为您提供一个具有of和一个**类**的`#04_BOARDWALK_VIEW.jpg`元素。`id``#04_BOARDWALK_VIEW`**`jpg`**

 *** * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-14T20:55:14.400

您遇到的问题是您的身份证件中的期间。这通常是不好的做法，但如果您在选择器中转义句点，则可以在 jQuery 中克服。像这样做：

```
$("#04_BOARDWALK_VIEW\\.jpg").click(); 
```

请注意需要双反斜杠作为`\`javascript 中的转义字符，因此您需要一个反斜杠来实际转义 jQuery 转义句点所需的真正反斜杠。同样，最佳做法是让您根本不使用 id 中的句点。**

# vb6 - 我在 vb6(winsock) 中创建的客户端/服务器程序不能在 WAN 上运行，但可以在 LAN 上完美运行 为什么？

> ID：14326441
> 
> 赞同：1
> 
> 时间：2013-01-14T20:52:58.540
> 
> 标签：vb6, winsock

我在 vb6 中借助 winsock 创建了一个简单的客户端/服务器程序。它在 LAN 上完美运行，但问题是它在 WAN 上不起作用。所有端口都已经打开，防火墙已经关闭，我有动态 IP，所以我使用[No-ip](http://no-ip.com)来获取命名 IP 地址。
我想问的另一个问题是，在客户端和服务器上打开端口是否重要？例如-我在端口 50505 上创建了程序，并且在客户端计算机上端口是打开的，但是在服务器上打开 50505 也很重要吗？

这是我的[项目](http://dl.dropbox.com/u/49564051/Winsock.zip)。

如果有人能找到问题，请告诉我。我会很感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T08:27:23.253

好的，首先确保在客户端程序中，Localport 未设置为任何值，因为 Windows 会为其分配一个，但 RemotePort 设置为 50505。在服务器端，RemotePort 设置为空，LocalPort 为设置为 50505。

接下来，您需要确保您的服务器在您的网络上有一个静态 IP。因此，如果您的路由器的 LAN IP 是 192.168.1.1，您需要将您的服务器设置为 192.168.1.50，只要确保它没有被放入范围或 DHCP 服务器（这是为每台计算机提供 IP 的服务器来自路由器的地址）。

接下来，您需要将路由器设置为“端口转发”。默认情况下，您的路由器不知道如何处理互联网发送给它的数据。您必须设置路由器以将任何数据从端口 50505 转发到网络上的服务器。

虽然这个接缝真的很长而且很长，但安装时间不应该超过 5-10 分钟。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T20:54:42.203

您需要配置服务器后面的路由器，以将该端口上的连接转发到运行服务器的计算机。

否则，客户端将无法连接到服务器。

# jsf-2 - PrimeFaces 从 DataTable 中删除一行荒谬错误

> ID：14326442
> 
> 赞同：0
> 
> 时间：2013-01-14T20:53:04.547
> 
> 标签：jsf-2, primefaces, datatable, managed-bean

我正在使用 DataTable 组件，我非常直接的目标是使用内联命令按钮删除一行。这是 dataTable 组件的代码。

```
 <p:dataTable rowKey="#{dobavljac.dobavljacID}" value="#{dobavljacMB.vratiDobavljace()}" var="dobavljac" >
            <p:column>
                <f:facet name="header">ID</f:facet>
                <h:outputText value="#{dobavljac.dobavljacID}" />
            </p:column>
            <p:column>
                <f:facet name="header">Naziv</f:facet>
                <h:outputText value="#{dobavljac.naziv}" />
            </p:column>
            <p:column>
                <f:facet name="header">Adresa</f:facet>
                <h:outputText value="#{dobavljac.adresa}" />
            </p:column>

            <p:column colspan="2" style="text-align: center">
                <f:facet name="header">Operacija</f:facet>
                <p:commandButton id="viewButton" style="height: 35px" value="Delete" action="#{dobavljacMB.obrisi(dobavljac)}" ajax="false"/>          
            </p:column>
        </p:dataTable> 
```

“dobavljac”是我需要使用**action="#{dobavljacMB.obrisi(dobavljac)}"删除的实体**

具有删除功能“obrisi”的托管bean类如下：

```
/**
 * Creates a new instance of DobavljacMB
 */
private Dobavljac tekuci;

public Dobavljac getTekuci() {
    return tekuci;
}

public void setTekuci(Dobavljac tekuci) {
    this.tekuci = tekuci;
}

public DobavljacMB() {
}

public String prikazDobavljaca() {

    System.out.println("Prikaz dobavljaca");
    // System.out.println("podaci su:"+tekuciKorisnik.getKorisnickoIme());

    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Ne postoji korisnik sa tim korisnickim imenom i sifrom!", ""));
    return null;
}

public List<Dobavljac> vratiDobavljace() {

    return KonekcijaDB.vratiInstancu().vratiDobavljace();

}

public String obrisi(Dobavljac d){
    try {
        System.out.println("obrisi");
        KonekcijaDB.vratiInstancu().obrisi(d);
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_INFO, "Dobavljac obrisan", ""));
        return "prikazDobavljaca.xhtml";
    } catch (Exception e) {
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(FacesMessage.SEVERITY_ERROR, "Greska pri brisanju", ""));
        return "prikazDobavljaca.xhtml";
    }

    } 
```

Dobavljac 类是一个简单的 POJO 类，由 IDE 生成，所以不需要贴出来。问题是，当调用该方法时，它会抛出一个 **java.lang.IllegalArgumentException: Cannot convert model.Dobavljac[ dobavljacID=66 ] of type class model.Dobavljac to class model.Dobavljac**这很荒谬，因为传递的对象是与 MB 方法“obrisi(Dobavljac d)”中的方法相同。当然，对象永远不会从数据库中删除，因为没有调用该方法。我的想法是这是一个 PrimeFaces 问题，而不是 JSF 问题之一。

我找到了和这个非常相似的例子，发现没有人遇到过这种问题（相同类之间的转换），不需要实现转换器。

我不确定是否需要在问题中添加更多信息，我将非常感谢您的回答。这很烦人。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:04:25.960

> ```
> java.lang.IllegalArgumentException: Cannot convert model.Dobavljac[ dobavljacID=66 ]
>       of type class model.Dobavljac to class model.Dobavljac 
> ```

webapp 的运行时类路径是脏的。该类有多个类文件定义`model.Dobavljac`，每个定义由不同的`ClassLoader`. 默认情况下，webapp 的运行时类路径涵盖 中的所有类文件`/WEB-INF/classes`、所有 JAR`/WEB-INF/lib`文件、服务器中的`/lib`所有 JAR 文件、JRE`/lib`和中的所有 JAR 文件`/lib/ext`。服务器可以通过特定的配置设置添加其他文件夹。如何以及哪一个完全取决于您没有告诉任何内容的服务器的品牌/版本。

清理运行时类路径并删除重复的类文件定义（或者只是独立`.class`文件，或者包含有问题的文件的 JAR`.class`文件）。重建/重新部署/重新启动后，此问题应该会消失。

# c++ - C语言中的五子棋数据表示

> ID：14326445
> 
> 赞同：0
> 
> 时间：2013-01-14T20:53:11.380
> 
> 标签：c++, artificial-intelligence, evaluation, data-representation, gomoku

我正在开发一个我目前使用 GUI 等完成的五子棋游戏，我需要编写 IA 和规则检查器（用于可选规则，如捕获、禁止模式等）。我打算用一个 int 数组来代表董事会，比如：

```
uint goban[361]; 
```

这将代表 19 * 19 戈班（板）。假设我们可以将一个 32 位整数拆分为 4 个字节，并且在每个字节内我们可以像这样存储元数据，例如：

*   第一个字节：这种情况是空/黑/白吗？
*   第二个字节：这种情况是特殊模式的一部分吗？
*   第三个字节：我在图案的哪个位置？
*   第 4 个字节：我可以被捕获吗？

我不知道这种解决方案是否适用于 Gomoku AI，但我遇到的主要问题是如何正确编写它。让我们采取模式：

```
 -OO-O- 
```

这是一个开放和自由的三个，它在内部和末端都有空间。我应该如何将此模式与没有坐标的静态表示联系起来？

另一个问题是我应该什么时候更新模式以及如何因为在 361 案例中如果我将之前的数字更新为这个可能会很长：

```
 XOO-O- 
```

我必须更新所有四个案例，所以我认为它不合适，而且它会影响许多其他垂直/对角线图案。

我是否应该像这样列出当前在地图上的模式：

```
std::list<ThreatList> tlist; 
```

并使地图成为一个简单的 tribool 或 char 数组？

我希望我的数据表示能够为我提供最大的信息，以便快速更新我的评估函数将填充的影响图。我已经阅读了有关威胁空间搜索和其他 Gomoku 算法的几篇文章，但他们没有谈论数据表示，我不知道如何正确地做到这一点，请你帮我找到一种干净的方法来表示模式以及如何更新它们。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:06:03.893

看看这个开源的 Gomoku： [https ://github.com/garretraziel/gomoku](https://github.com/garretraziel/gomoku)

我想你会在那里找到很多有趣的想法。

# excel - 在 Mac 上打开打印对话框

> ID：14326446
> 
> 赞同：0
> 
> 时间：2013-01-14T20:53:12.280
> 
> 标签：excel, vba, macos

下面的 VBA 代码在 Windows 上打开打印对话框，但在 Mac Excel 2011 上不起作用，在行上给出**运行时错误 1004**`Application.Dialogs(xlDialogPrinterSetup).Show`

```
Private Sub cbPrint_Click()
Dim Caption As String

If formPrintOptions.Frame1.ActiveControl.Value Then
    Caption = formPrintOptions.Frame1.ActiveControl.Caption

    formPrintOptions.Hide
    Application.Dialogs(xlDialogPrinterSetup).Show

    Select Case Caption
        Case "Id1"
            ThisWorkbook.Sheets(Array("FrontPage", "Id1")).PrintOut Preview:=True
        Case "Id2"
            ThisWorkbook.Sheets(Array("FrontPage", "Id2")).PrintOut Preview:=True
        Case "Id3"
            ThisWorkbook.Sheets(Array("FrontPage", "Id3")).PrintOut Preview:=True
        Case "Id4"
            ThisWorkbook.Sheets(Array("FrontPage", "Id4")).PrintOut Preview:=True
        Case Else
    End Select
Else
    MsgBox "None selected"
End If
Unload formPrintOptions

End Sub 
```

请有人建议是否有办法在 Mac Excel 2011 上打开打印对话框窗口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:28:58.657

从[这里](http://www.mrexcel.com/forum/excel-questions/553760-application-substitute-mac.html)有三个选项：

（*引用*）

> 在这种情况下，该功能位于 Mac 正常打印屏幕的“顶部”。“在顶部”既意味着不需要调用从属对话框，也意味着它高于“打印对话框”上的所有其他选项。

或者

```
Application.Dialogs(xlDialogPrint).Show 
```

或者

```
MsgBox MacScript(PrintSetupMacScript())

Function PrintSetupMacScript() As String
PrintSetupMacScript = "try"
PrintSetupMacScript = PrintSetupMacScript & vbLf & "tell application ""System Preferences"" "
PrintSetupMacScript = PrintSetupMacScript & vbLf & "    reveal pane ""Print & Fax"" "
PrintSetupMacScript = PrintSetupMacScript & vbLf & "    activate"
PrintSetupMacScript = PrintSetupMacScript & vbLf & "    repeat while (name of window 1) = ""Print & Fax"" "
PrintSetupMacScript = PrintSetupMacScript & vbLf & "   end repeat"
PrintSetupMacScript = PrintSetupMacScript & vbLf & "end tell"
PrintSetupMacScript = PrintSetupMacScript & vbLf & "return true"
PrintSetupMacScript = PrintSetupMacScript & vbLf & "on error"
PrintSetupMacScript = PrintSetupMacScript & vbLf & "return false"
PrintSetupMacScript = PrintSetupMacScript & vbLf & "end try"
End Function 
```

没有Mac来测试这些，我不能保证他们的里程

# ssl - Heroku SSL DNS 设置

> ID：14326453
> 
> 赞同：5
> 
> 时间：2013-01-14T20:53:47.820
> 
> 标签：ssl, heroku, dns

我使用 Namecheap 进行域注册和 DNS，并使用 Heroku 进行托管。我通过 Namecheap 购买了 SSL 证书，并使用 Heroku 进行了设置，并且几乎可以完美运行。

目前，我有一个 DNS CNAME 记录，主机“www”指向“[whatever].herokussl.com。”，并且一个“@”主机记录设置为 URL 重定向（301）到“http://www.[domain ].com”。

我的应用程序本身强制所有 HTTP 流量重定向到 HTTPS，因此“http://www.[domain].com”转到“https://www.[domain].com”。

我得到以下结果：

```
http://www.[domain].com - properly navigates to site as HTTPS
https://www.[domain].com - properly navigates to site as HTTPS
http://[domain].com - properly navigates to site as HTTPS

https://[domain].com - **does not** navigate to site, and instead the browser cannot find the page 
```

我相信这与 URL 重定向在幕后的行为方式有关。我最初是作为直接指向“[whatever].herokussl.com.”的 CNAME 记录执行此操作的，但显然在区域顶点块 MX 记录上执行此操作...

我需要做什么才能获得所需的行为？我只是希望所有裸域或“www”域都指向我的“www”域。

**更新：有关我的 DNS 设置的更多信息**

```
HOST NAME          IP ADDRESS/URL               RECORD TYPE
---------          --------------               -----------
@                  http://www.[domain].com      URL Redirect (301)
www                [whatever].herokussl.com.    CNAME (Alias) 
```

我的 SSL 证书不是通配符，只是 Comodo 的 EssentialSSL 证书。如果只有 www.[domain].com 有效（从裸域重定向），我很好，尽管当我对顶点和“www”都使用 CNAME 时，它只是作为带有 SSL 的裸域工作美好的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T06:40:23.367

如果你使用 DnsSimple，你可以使用他们的[`ALIAS`记录](http://blog.dnsimple.com/zone-apex-naked-domain-alias-that-works/)功能。

DnsSimple`ALIAS`记录不是标准的 DNS 记录类型，与`CNAME`记录不同。相反，DnsSimple 以一种特殊的方式支持它，为您执行 DNS 解析并将结果返回给您的浏览器。这与所有其他 DNS 记录不同，其中 DNS 服务器不执行任何处理，而只是按需将记录返回到您的浏览器。

可能还有其他 DNS 供应商具有自己的类似功能。

但是，仅使用普通 DNS、来自您的名称服务器的仅 HTTP 3xx 和 Heroku，无法将 SSL 获取到区域顶点（没有 的域名`www.`）。

# ios - ios二进制.app文件不可点击

> ID：14326456
> 
> 赞同：0
> 
> 时间：2013-01-14T20:53:58.677
> 
> 标签：ios, xcode, binary, application-loader, .app

这是我第一次在 iTunes 应用商店上放一个应用。我已经在设备上进行了测试并创建了二进制文件，但是当我使用 Application Loader 上传二进制文件时，我看到二进制文件已熄灭且无法点击。此外，当我在 Xcode 中打开二进制 .app 文件时，它有一个大圆圈，上面有一个斜线。这是什么意思，我该如何解决？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:32:55.890

划掉的图标表示“此文件无法执行”。这是正常的，因为应用程序和您的 Mac 具有不同的架构。

# iphone - UIWebView 和 Safari 呈现不同

> ID：14326458
> 
> 赞同：1
> 
> 时间：2013-01-14T20:54:13.150
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我有一个`UIWebView`适合我拥有的论坛的移动风格。在 Safari 中，它看起来和工作都很棒。

但是，在我的内部`UIWebView`存在一个重大问题。

引用或编辑帖子时，HTML 会显示在`BBcode`. 此外，发布代码会导致忽略换行符。此问题将使我的应用程序完全无法使用。

webview 是这样加载的：

```
 //display the webview
    NSString *fullURL = @"http://www.mysite.com";
    NSURL *url = [NSURL URLWithString:fullURL];
    NSMutableURLRequest *requestObj = [NSMutableURLRequest requestWithURL:url];
    [_webTest loadRequest:requestObj]; 
```

这就是它在移动 Safari 中的外观（正确）

![在此处输入图像描述](../Images/1c248a8f5665cedd134afd8feb86dec0.png)

最后，它在内部的外观`UIWebView`（错误地）

![在此处输入图像描述](../Images/d2841c09645faea1714cc747508c8790.png)

什么可能会改变它在移动 safari 与 safari 之间的渲染方式`UIWebView`？我认为重点是他们应该看起来一样！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T20:58:13.690

这是因为移动 safari 和 webview 具有不同的用户代理值。
查看这篇关于类似问题的 SO 帖子：[Change User Agent in UIWebView (iPhone SDK)](https://stackoverflow.com/questions/478387/change-user-agent-in-uiwebview-iphone-sdk)

来自已接受解决方案的代码：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)req navigationType:(UIWebViewNavigationType)navigationType {
    NSMutableURLRequest *request = (NSMutableURLRequest *)req;

    if ([request respondsToSelector:@selector(setValue:forHTTPHeaderField:)]) {
        [request setValue:[NSString stringWithFormat:@"%@ Safari/528.16", [request valueForHTTPHeaderField:@"User-Agent"]] forHTTPHeaderField:@"User_Agent"];
    }
    return YES; 
} 
```

# java - Hadoop ClassNotFoundException

> ID：14326459
> 
> 赞同：4
> 
> 时间：2013-01-14T20:54:16.410
> 
> 标签：java, exception, hadoop

我正在编写我的第一个 Hadoop 应用程序，但出现错误。我不太明白这个堆栈跟踪中的一些细节是什么意思。这是一个`ClassNotFoundException`。我在 Ubuntu Linux v12.10、Eclipse 3.8.0、Java 1.6.0_24 上构建它。我通过从 Apache 站点下载 Hadoop 并使用 Ant 构建它来安装 Hadoop。

当我创建工作时，我的崩溃发生在程序的第一行。

```
public static void main(String[] args) throws IOException, InterruptedException,  ClassNotFoundException {

    Job job = new Job(); <<== crashing here.

Program [Java Application]  
com.sandbox.hadoop.Program at localhost:33878   
    Thread [main] (Suspended (exception ClassNotFoundException))    
        owns: Launcher$AppClassLoader  (id=29)  
        owns: Class<T> (org.apache.hadoop.security.UserGroupInformation) (id=25)    
        URLClassLoader$1.run() line: 217    
        AccessController.doPrivileged(PrivilegedExceptionAction<T>, AccessControlContext) line: not available [native method]   
        Launcher$AppClassLoader(URLClassLoader).findClass(String) line: 205 
        Launcher$AppClassLoader(ClassLoader).loadClass(String, boolean) line: 321   
        Launcher$AppClassLoader.loadClass(String, boolean) line: 294    
        Launcher$AppClassLoader(ClassLoader).loadClass(String) line: 266    
        DefaultMetricsSystem.<init>() line: 37  
        DefaultMetricsSystem.<clinit>() line: 34    
        UgiInstrumentation.create(Configuration) line: 51   
        UserGroupInformation.initialize(Configuration) line: 216    
        UserGroupInformation.ensureInitialized() line: 184  
        UserGroupInformation.isSecurityEnabled() line: 236  
        KerberosName.<clinit>() line: 79    
        UserGroupInformation.initialize(Configuration) line: 209    
        UserGroupInformation.ensureInitialized() line: 184  
        UserGroupInformation.isSecurityEnabled() line: 236  
        UserGroupInformation.getLoginUser() line: 477   
        UserGroupInformation.getCurrentUser() line: 463 
        Job(JobContext).<init>(Configuration, JobID) line: 80   
        Job.<init>(Configuration) line: 50  
        Job.<init>() line: 46   
        Program.main(String[]) line: 17 
/usr/lib/jvm/java-6-openjdk-amd64/bin/java (Jan 14, 2013 2:42:36 PM) 
```

控制台输出：

```
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/commons/configuration/Configuration
at org.apache.hadoop.metrics2.lib.DefaultMetricsSystem.<init>(DefaultMetricsSystem.java:37)
at org.apache.hadoop.metrics2.lib.DefaultMetricsSystem.<clinit>(DefaultMetricsSystem.java:34)
at org.apache.hadoop.security.UgiInstrumentation.create(UgiInstrumentation.java:51)
at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:216)
at org.apache.hadoop.security.UserGroupInformation.ensureInitialized(UserGroupInformation.java:184)
at org.apache.hadoop.security.UserGroupInformation.isSecurityEnabled(UserGroupInformation.java:236)
at org.apache.hadoop.security.KerberosName.<clinit>(KerberosName.java:79)
at org.apache.hadoop.security.UserGroupInformation.initialize(UserGroupInformation.java:209)
at org.apache.hadoop.security.UserGroupInformation.ensureInitialized(UserGroupInformation.java:184)
at org.apache.hadoop.security.UserGroupInformation.isSecurityEnabled(UserGroupInformation.java:236)
at org.apache.hadoop.security.UserGroupInformation.getLoginUser(UserGroupInformation.java:477)
at org.apache.hadoop.security.UserGroupInformation.getCurrentUser(UserGroupInformation.java:463)
at org.apache.hadoop.mapreduce.JobContext.<init>(JobContext.java:80)
at org.apache.hadoop.mapreduce.Job.<init>(Job.java:50)
at org.apache.hadoop.mapreduce.Job.<init>(Job.java:46)
at com.sandbox.hadoop.Program.main(Program.java:18)

Caused by: java.lang.ClassNotFoundException: org.apache.commons.configuration.Configuration
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
... 16 more 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T21:26:26.863

您应该添加所有找到的 jar`/usr/lib/hadoop-0.xx/lib`以避免此类类路径问题。

为了给您一个想法，您可以键入`hadoop classpath`which 将打印获取 Hadoop jar 和所需库所需的类路径。

在您的情况下，您缺少`hadoop-common-0.xx.jar`，因此您应该将其添加到类路径中，并且一切顺利。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T01:02:49.467

你的主程序需要`org.apache.commons.configuration.Configuration`还是应该这样`org.apache.hadoop.conf.Configuration`？

看起来 Eclipse 自动导入了错误的配置类，当 hadoop 在您的集群上运行时，该类不在类路径中。

你能分享你的源代码，特别是`com.sandbox.hadoop.Program`类，`main`方法吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-09T23:25:12.377

我遇到了同样的问题。我通过将 commons-configuration-xxjar 添加到我的构建路径来解决它。它位于 $HADOOP_HOME/lib 下。

# python - 使用递归在Python中获取列表的长度

> ID：14326460
> 
> 赞同：2
> 
> 时间：2013-01-14T20:54:16.803
> 
> 标签：python, list, recursion

我正在尝试计算列表的长度。当我在 cmd 上运行它时，我得到：

```
RuntimeError：比较超过最大递归深度

```

我认为我的代码没有任何问题：

```
def len_recursive(list):
    if list == []:
        return 0
    else:
        return 1 + len_recursive(list[1:]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T20:59:24.533

不要使用递归，除非你可以预测它不会太深。Python 对递归深度的限制非常小。

如果你坚持递归，有效的方法是：

```
def len_recursive(lst):
    if not lst:
        return 0
    return 1 + len_recursive(lst[1::2]) + len_recursive(lst[2::2]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T21:01:42.803

[Python 中的递归深度是有限的](https://stackoverflow.com/a/8177274/201359)，但可以增加，如本文所示。如果 Python 支持[尾调用](https://en.wikipedia.org/wiki/Tail_call)优化，则此解决方案适用于任意长度的列表：

```
def len_recursive(lst):
    def loop(lst, acc):
        if not lst:
            return acc
        return loop(lst[1:], acc + 1)
    return loop(lst, 0) 
```

但事实上，您将不得不使用较短的列表和/或增加允许的最大递归深度。

当然，没有人会在现实生活中使用这个实现（而不是使用[`len()`](http://docs.python.org/2/library/functions.html#len)内置函数），我猜这是递归的学术示例，但即便如此，这里最好的方法是使用迭代，如图所示@poke 的回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T21:13:54.230

正如其他人所解释的，您的功能存在两个问题：

1.  它不是尾递归的，所以它只能处理列表，只要`sys.getrecursionlimit`.
2.  即使它是尾递归的，Python 也不会进行尾递归优化。

第一个很容易解决。例如，请参阅 Óscar López 的回答。

第二个很难解决，但并非不可能。一种方法是使用协程（基于生成器）而不是子例程。另一种方法是不实际递归调用函数，而是返回具有递归结果的函数，并使用应用结果的驱动程序。有关如何实现后者的示例，请参阅Paul Butler[在 Python 中的尾递归](http://paulbutler.org/archives/tail-recursion-in-python/)，但这就是您的情况。

从 Paul Butler 的`tail_rec`函数开始：

```
def tail_rec(fun):
    def tail(fun):
        a = fun
        while callable(a):
            a = a()
        return a
    return (lambda x: tail(fun(x))) 
```

这不能作为他的案例的装饰器，因为他有两个相互递归的函数。但在你的情况下，这不是问题。因此，使用 Óscar López 的版本：

```
@tail_rec
def tail_len(lst):
    def loop(lst, acc):
        if not lst:
            return acc
        return lambda: loop(lst[1:], acc + 1)
    return lambda: loop(lst, 0) 
```

现在：

```
>>> print tail_len(range(10000))
10000 
```

多田。

如果您真的想使用它，您可能想要制作`tail_rec`一个更好的装饰器：

```
def tail_rec(fun):
    def tail(fun):
        a = fun
        while callable(a):
            a = a()
        return a
    return functools.update_wrapper(lambda x: tail(fun(x)), fun) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T21:01:21.557

您的异常消息意味着您的方法被递归调用太频繁，因此您的列表可能太长而无法像这样递归地计算元素。您可以简单地使用迭代解决方案来做到这一点：

```
def len_iterative(lst):
    length = 0
    while lst:
        length += 1
        lst = lst[1:]
    return length 
```

请注意，这很可能仍然是一个糟糕的解决方案，因为`lst[1:]`会继续创建列表的副本。所以你最终会得到`len(lst) + 1`列表实例（长度`0`为`len(lst)`）。直接使用内置可能是最好的主意`len`，但我想这是一项任务。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T21:06:51.593

想象一下，您正在使用一叠纸来运行它。你想计算你有多少张纸。如果有人给你 10 张纸，你拿第一张纸，把它放在桌子上，抓起下一张纸，放在第一张纸旁边。你这样做了 10 次，你的桌子已经满了，但你已经把每张纸都摆好了。然后你开始计算每一页，在你计数时回收它，0 + 1 + 1 + ... => 10。这不是计算页面的最佳方法，但它反映了递归方法和 python 的实现。

这适用于少量页面。现在想象有人给了你 10000 张纸。很快，您的办公桌上就没有空间来布置每一页了。这基本上就是错误消息告诉您的内容。

最大递归深度是表格可以容纳的“多少张”。每次调用 python 时都需要保留“1 + 递归调用的结果”，以便在所有页面都布置好后，它可以返回并计算它们。不幸的是，在最后的计数发生之前你的空间已经用完了。

如果你想递归地学习，因为你想在任何合理的情况下使用 len() ，只需使用小列表，25 应该没问题。

[如果某些系统支持尾调用](http://en.wikipedia.org/wiki/Tail_call)，则它们可以处理大型列表

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-14T20:57:56.083

Python 没有优化尾递归调用，因此使用这种递归算法不是一个好主意。您可以使用[sys.setrecursionlimit()](http://docs.python.org/2/library/sys.html#sys.setrecursionlimit)调整堆栈，但这仍然不是一个好主意。

# iphone - 如何在 Core Graphics 中“重绘图层”？

> ID：14326466
> 
> 赞同：1
> 
> 时间：2013-01-14T20:54:43.847
> 
> 标签：iphone, objective-c, xcode, graphics, core-graphics

我记得我在看苹果文档的时候，会提到当你调用一个函数比如 的时候`addSubview`，你是在添加一个“油漆层”，可以这么说，每次调用都会覆盖另一个层。

这应该是一个容易回答的问题，但是我很难想到要在 Google 上搜索的关键字，所以请原谅提出这样一个简单的问题。

**如何清除自定义的“层” `UIView`？**

我的情况，可能是相关的：我有这些显示在屏幕上的“用户卡”。它们使用一些用户图像进行初始化。卡片保持不变，但是当我想显示不同的用户时，我会在我的自定义`UIView`（卡片）中调用一个方法来重绘图像。`UIView`问题是这个自定义 UIView 的某些元素是透明的，并且每次重绘这些图像都建立在该透明度之上（一个明显的问题）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:00:50.940

在 Core Graphics 中，您所画的就是所显示的。画家的比喻只指单帧。因此，如果您正在使用`drawRect`，您只是不缓存以前的绘图。

但我怀疑你在谈论一些你添加了子视图或子层的 UIKit 东西。如果您只想清除所有内容，这将删除那些剩余的视图：

```
for (UIView *view in customView) {
    [view removeFromSuperview];
}

for (CALayer *layer in customView.layer) {
    [layer removeFromSuperlayer];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-27T19:33:28.837

Ryan 用于清除 UIViews 的代码或多或少是正确的，但如果您从 Google 来到这里寻找如何从视图中清除 CLLayers，当我尝试`customView.layer`像 Ryan 在他的示例中那样快速枚举时，我遇到了崩溃。

当我将其切换为常规枚举时，它对我有用。这是一个代码片段：

```
for (int i = 0; i > yourView.layer.sublayers.count; i++) {
    CALayer *layer = [self.yourView.layer.sublayers objectAtIndex:i];
    [layer removeFromSuperlayer];
} 
```

# python - 为什么这不会像通过代码重新定义的那样腌制函数？

> ID：14326473
> 
> 赞同：0
> 
> 时间：2013-01-14T20:54:59.737
> 
> 标签：python, function, pickle

根据[文档](http://docs.python.org/3.3/library/pickle.html#dispatch-tables)，这段代码似乎应该腌制一个函数的各种元素并允许它被取消腌制，即使它不存在于当前命名空间中。但是，没有出现任何变化。

```
Python 3.3.0 (v3.3.0:bd8afb90ebf2, Sep 29 2012, 10:55:48) [MSC v.1600 32 bit
(Intel)] on win32
Type "help", "copyright", "credits" or "license" for more information.
>>> def average(*args):
...     return sum(args) / len(args)
...
>>> import pickle
>>> ap = pickle.dumps(average)
>>> del average
>>> average = pickle.loads(ap)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'average'
>>> ap
b'\x80\x03c__main__\naverage\nq\x00.'
>>> 
```

如您所见，无法解开一个不存在的函数。抛开安全问题不谈，下面的代码有望解决问题并允许对函数进行腌制和取消腌制。

```
>>> import marshal, types, copyreg
>>> copyreg.pickle(types.CodeType,
...                lambda code: (marshal.loads, (marshal.dumps(code),)),
...                marshal.loads)
...
>>> up = lambda co, ns, de, cl: types.FunctionType(co, globals(), na, de, cl)
>>> copyreg.pickle(types.FunctionType,
...                lambda function: (up, (function.__code__,
...                                       function.__name__,
...                                       function.__defaults__,
...                                       function.__closure__)),
...                up)
...
>>> def average(*args):
...     return sum(args) / len(args)
...
>>> pickle.dumps(average)
b'\x80\x03c__main__\naverage\nq\x00.'
>>> 
```

人们会期望，如果代码正常工作，转储函数发出的字节将与以前不同。生成了相同的代码，并且 unpickling 应该是相似的。

```
>>> del average; average = pickle.loads(_)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'module' object has no attribute 'average'
>>> 
```

很容易证实这个理论。因此，问题仍然在于如何使用 API 对函数进行本地腌制，而不是将其包装到另一层。这是一个简单但草率的解决方案。

**问题：**如何使用`pickle`API 让它捕获一个函数而不仅仅是它的名称？如何覆盖序列化函数的默认处理，捕获值而不是引用？

**参考：** [问题 1253528](https://stackoverflow.com/questions/1253528)很有趣，但不会改变函数的原生腌制方式。

# r - 基于字符串创建唯一整数

> ID：14326475
> 
> 赞同：3
> 
> 时间：2013-01-14T20:55:07.663
> 
> 标签：r, data.table

我有一个更大的数据集（大约 9m 行的 data.table），其中有一列我想用来聚合值（最小值和最大值等）。该列是各种其他列的组合，并具有基于字符串的格式，如下所示：

```
string <- "318XXXX | VNSGN | BIER" 
```

为了提高执行任务的速度，我想将其重新编码为一个唯一的整数。我经常用来处理数据的另一个应用程序有一个内置函数，可以将字符串转换为上面的整数（例如 73823）。我想知道R中是否有类似的功能？这个想法是一个特定的字符串总是会产生相同的整数。这将允许它用于合并 data.tables 等。

这是我想用简单整数值编码的 data.table 列的一个小例子：

```
sample <- c("318XXXX | VNSGN | BIER", "462XXXX | TZZZH | 9905", "462XXXX | TZZZH | 9905", 
"462XXXX | TZZZH | 9905", "511XXXX | FAWOR | 336H", "511XXXX | FAWOR | 336H", 
"652XXXX | XXXXR | T136", "652XXXX | XXXXR | T136", "672XXXX | BQQSZ | 7777", 
"672XXXX | BQQSZ | 7777") 
```

我希望将字符串编码到表格的附加列中，如下表所示；请注意，相同的字符串会产生相同的数字。

```
String                      Number
318XXXX | VNSGN | BIER      19872
462XXXX | TZZZH | 9905      78392
462XXXX | TZZZH | 9905      78392
462XXXX | TZZZH | 9905      78392
511XXXX | FAWOR | 336H      23053
511XXXX | FAWOR | 336H      23053
652XXXX | XXXXR | T136      95832
652XXXX | XXXXR | T136      95832
672XXXX | BQQSZ | 7777      71829   
672XXXX | BQQSZ | 7777      71829 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:12:34.900

data.table 包将为您创建索引，而无需您明确处理它们，因此它比问题中的方法工作量少。请参阅`setkey`data.table 中的函数。

此外，sqldf 包可以使用[sqldf 主页](http://sqldf.googlecode.com)`create index`上的示例 4h 和 4i 中的 SQL 语句，几乎可以使用任何数据库包。

# shell - 如何区分部分行？

> ID：14326476
> 
> 赞同：5
> 
> 时间：2013-01-14T20:55:10.953
> 
> 标签：shell

我有两个要比较的文件。这些行有时间戳，可能还有一些我想在匹配算法中忽略的其他内容，但如果匹配算法在文本的其余部分发现差异，我仍然希望输出这些项目。例如：

```
1c1
<    [junit4] 2013-01-11 04:43:57,392 INFO  com.example.MyClass:123 [main] [loadOverridePropFile] Config file application.properties not found: java.io.FileNotFoundException: /path/to/application.properties (No such file or directory)
---
>    [junit4] 2013-01-11 22:16:07,398 INFO  com.example.MyClass:123 [main] [loadOverridePropFile] Config file application.properties not found: java.io.FileNotFoundException: /path/to/application.properties (No such file or directory) 
```

不应发出，但：

```
1c1
<    [junit4] 2013-01-11 04:43:57,392 INFO  com.example.MyClass:123 [main] [loadOverridePropFile] Config file application.properties not found: java.io.FileNotFoundException: /path/to/application.properties (No such file or directory)
---
>    [junit4] 2013-01-11 22:16:07,398 INFO  com.example.MyClass:456 [main] [loadOverridePropFile] Config file application.properties not found: java.io.FileNotFoundException: /path/to/application.properties (No such file or directory) 
```

应该发出（因为行号不同）。请注意，仍会发出时间戳。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T12:41:06.663

我希望这个功能在我之前好几次，因为它再次出现在这里，我决定用谷歌搜索一下，发现 perl`Algorithm::Diff`可以提供一个散列函数（他们称之为“密钥生成函数”），它*“应该返回唯一标识给定元素的字符串”*，算法用于进行比较（而不是您提供给它的实际内容）。

基本上，您需要做的就是添加一个子程序，该子程序以您希望从字符串中过滤掉不需要的内容的方式执行一些正则表达式魔术，并将子引用作为参数添加到调用中（请参阅下面片段中的`diff()`我`CHANGE 1`和评论） `CHANGE 2`.

如果您需要正常（或统一）`diff`输出，请检查`diffnew.pl`模块附带的详细示例并在此文件中进行必要的更改。出于演示目的，我将使用`diff.pl`它也附带的简单，因为它很短，我可以在这里完全发布。

## 我的差异文件

```
#!/usr/bin/perl

# based on diff.pl that ships with Algorithm::Diff
# demonstrates the use of a key generation function

# the original diff.pl is:
# Copyright 1998 M-J. Dominus. (mjd-perl-diff@plover.com)
# This program is free software; you can redistribute it and/or modify it
# under the same terms as Perl itself.

use Algorithm::Diff qw(diff);

die("Usage: $0 file1 file2") unless @ARGV == 2;

my ($file1, $file2) = @ARGV;

-f $file1 or die("$file1: not a regular file");
-f $file2 or die("$file2: not a regular file");
-T $file1 or die("$file1: binary file");
-T $file2 or die("$file2: binary file");

open (F1, $file1) or die("Couldn't open $file1: $!");
open (F2, $file2) or die("Couldn't open $file2: $!");
chomp(@f1 = <F1>);
close F1;
chomp(@f2 = <F2>);
close F2;

# CHANGE 1
# $diffs = diff(\@f1, \@f2);
$diffs = diff(\@f1, \@f2, \&keyfunc);

exit 0 unless @$diffs;

foreach $chunk (@$diffs)
{
        foreach $line (@$chunk)
        {
                my ($sign, $lineno, $text) = @$line;
                printf "%4d$sign %s\n", $lineno+1, $text;
        }
}
exit 1;

# CHANGE 2 {
sub keyfunc
{
        my $_ = shift;
        s/^(\d{2}:\d{2})\s+//;
        return $_;
}
# } 
```

## 一个.txt

```
12:15 one two three
13:21 three four five 
```

## 二.txt

```
10:01 one two three
14:38 seven six eight 
```

## 示例运行

```
$ ./mydiff.pl one.txt two.txt
   2- 13:21 three four five
   2+ 13:21 seven six eight 
```

## 示例运行 2

这是一个`diff`基于正常输出的`diffnew.pl`

```
$ ./my_diffnew.pl one.txt two.txt
2c2
< 13:21 three four five
---
> 13:21 seven six eight 
```

如您所见，两个文件中的第一行都被忽略了，因为它们只是时间戳不同，而散列函数会删除这些时间戳以进行比较。

瞧，您刚刚推出了自己的内容感知功能`diff`！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:13:56.053

假设您的文件是“a.txt”和“b.txt”。你可以通过这种方式使用 diff + cut 来获得它：

```
diff <(cut -d" " -f4-99 a.txt) <(cut -d" " -f4-99 b.txt) 
```

每次剪切都会忽略前 3 个字段（与日期和这些内容相关），并且只考虑该行的其余部分（从第 4 列到第 99 列）。剪切应该使用：

```
cut -d" " -f4- a.txt 
```

但它对我不起作用，所以我添加了-f4-99。因此，我们将 cut 应用于两个输入以忽略日期字段，然后我们运行 diff 以根据需要比较它们。

# jquery - 选择的占位符值不会从默认值更改？

> ID：14326478
> 
> 赞同：1
> 
> 时间：2013-01-14T20:55:18.847
> 
> 标签：jquery, asp.net-mvc-3, jquery-chosen

我使用 jquery 插件 Chosen 将 Html.Listbox 屏蔽为 muli 选择工具。它很好用，只是我需要更改默认文本。我尝试在 html 和 jquery 中设置占位符文本。这是相关的代码...

```
@Html.ListBox("Filter-Chooser",aList,new { @class = "chzn-select filter-chooser") 

function EnableMultiChoose() {
    $(".chzn-select").data("placeholder", "Filter By...");
    $(".chzn-select").chosen();
} 
```

我也厌倦了指定参数@placeholder =“Filter By ...”无济于事。我检查了html输出，它似乎设置了占位符属性...

呈现的 HTML

```
<select class="chzn-select filter-chooser" id="Filter-Chooser" multiple="multiple" name="Filter-Chooser" placeholder="Filter By...">
<option value="Content">Content</option>
<option value="Author">Author</option>
<option value="DeckName">Deck Name</option>
... 
```

关于如何正确指定占位符的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-21T12:14:00.120

我会帮忙：使用“数据占位符”属性。

```
<select class="chzn-select filter-chooser" id="Filter-Chooser" multiple="multiple" name="Filter-Chooser" data-placeholder="Filter By..."> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T17:04:57.477

好的，通过 data-placeholder 属性指定占位符。凉爽的。

```
@Html.ListBox("Filter-Chooser", aList , new Dictionary<string,Object> { {"class","chzn-select   filter-chooser"}, {"data-placeholder","TEXT HERE"}}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T03:55:52.587

如果您使用的是 simple_form，您将需要以下内容：

```
<%= f.input :education_ids, :label => false, :collection => Education.all, :input_html => { :data => { :placeholder => 'Education' }} %> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-11-06T06:14:56.707

解决方案如下。

```
$("[value='Select Some Options']").val("your text"); 
```

# asp.net - 将 LINQ 与 GridView 一起使用

> ID：14326479
> 
> 赞同：0
> 
> 时间：2013-01-14T20:55:28.107
> 
> 标签：asp.net, vb.net, linq, gridview, checkbox

我是网络开发新手并使用控件，所以请原谅我。

我有一个带有复选框的 GridView（请参阅下面的标记）

当用户通过并检查任何框并点击我的提交按钮时，我想运行 LINQ 查询以获取所有带有 checkbox1.checked = True 的行

就像是：

```
Dim sList = (From row in Gridview1
             Where row.Cells("IsStarFleet") = True
             row.Cells("ID)).ToList 
```

标记：

```
<asp:GridView ID="GridView1" runat="server" Width="516px" AutoGenerateColumns="False" AllowPaging="True">
    <Columns>
        <asp:BoundField DataField="ID" HeaderText="ID" />
        <asp:BoundField DataField="FirstName" HeaderText="FirstName" />
        <asp:TemplateField HeaderText="IsStarFleet">
            <ItemTemplate>
                <asp:CheckBox ID="CheckBox1" runat="server" AutoPostBack ="False" />
            </ItemTemplate>
        </asp:TemplateField>
    </Columns>
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:04:10.667

您需要在 a和for中使用`FindControl`for 控件：`TemplateField``Cells(index)``BoundFields`

```
Dim checkedIDs = From row In GridView1.Rows.Cast(Of GridViewRow)()
                 Where DirectCast(row.FindControl("CheckBox1"), CheckBox).Checked
                 Select row.Cells(0).Text
Dim checkedIdList = checkedIDs.ToList() 
```

# android - android映射v2多边形透明度

> ID：14326482
> 
> 赞同：8
> 
> 时间：2013-01-14T20:55:39.160
> 
> 标签：android, transparency, polygons, google-maps-android-api-2

我正在使用适用于 android 的 Google Maps v2 API，但我无法控制 fillColor 的透明度。我希望能够在填充的多边形下看到地图。有没有办法做到这一点 ？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-14T21:21:50.890

好吧，让我描述一下标准的 4 字节颜色是如何编码的：

标准像素颜色由 4 个字节组成：

*   A（alpha 通道） - 0-255（0 - 完全透明，255 - 完全不透明）
*   R（红色通道） - 0-255
*   G（绿色通道） - 0-255
*   B（蓝色通道） - 0-255

每个通道代表特定颜色部分的饱和度。因此，如果我们需要创建完全不透明的红色，我们需要指定以下通道值：

*   255,255,0,0

如果我们想让它半透明，我们需要将 alpha 通道值除以 2 (255/2 = 127)：

*   127,255,0,0

所以让我们回到安卓。在大多数情况下，在 Android 中，您可以通过指定颜色的十六进制值来指定颜色：

`polygon.setFillColor(0xFF00FF00); //not transparent green color`

在十六进制中，每个通道都可以由 2 个十六进制数字指定：

*   前锋(前锋)
*   R(00)
*   前锋(前锋)
*   乙(00)

如果要使这种颜色半透明，则需要除以`FF`2：

```
0xFF/2 = 0x7F //the same as 255/2 = 127 
```

`polygon.setFillColor(0x7F00FF00); //half-transparent green color`

所以基本上你需要做的是使用 alpha 通道值来获得你正在寻找的透明度

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-03-29T12:53:16.827

```
 cir=map.addCircle(new CircleOptions().center(new LatLng(10.938341, 76.9548734))
.radius(150)
.strokeColor(Color.rgb(0, 50, 100))
.strokeWidth(5)
.fillColor(Color.argb(20, 50, 0, 255)) 
.zIndex(55));

 cir.setVisible(true); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-02T07:03:56.860

基本上对我有用的是：

```
 polygon = mGoogleMap.addPolygon(new PolygonOptions().
        addAll(points)
            .fillColor(0x33FF0000)
             .strokeColor(Color.RED)
               .strokeWidth(3)) 
```

# extjs4 - Extjs 面板可拖动委托（拖动手柄） - 不工作

> ID：14326483
> 
> 赞同：3
> 
> 时间：2013-01-14T20:55:43.903
> 
> 标签：extjs4, draggable

我正在尝试创建可由该面板内的元素拖动的面板。不幸的是，委托属性在我的代码中不起作用，整个面板可以用作拖动句柄。

我究竟做错了什么？如何修复此代码？

我正在使用 extjs 4.1.1。

谢谢。

[http://jsbin.com/ahipob/1/watch](http://jsbin.com/ahipob/1/watch)

```
Ext.onReady(function() {

    var btn1 = Ext.create('Ext.button.Button', {
        text: 'btn1'
    });

    var btn2 = Ext.create('Ext.button.Button', {
        text: 'btn2'
    });

    var panel1 = Ext.create('Ext.panel.Panel', {
        width: 100,
        height: 100,
        items: [btn1, btn2],
        draggable: {
            delegate: '#'+Ext.escapeId(btn1.id)
        }
    });

    Ext.create('Ext.Viewport', {
        renderTo: Ext.getBody(),
        items: [
            panel1
        ]
    });
}); 
```

# java - 使用Java接口表示名词和形容词是否正确？

> ID：14326484
> 
> 赞同：5
> 
> 时间：2013-01-14T20:55:48.347
> 
> 标签：java, interface, encapsulation

我在理解 Java 接口的语义时遇到了问题。在用代码填充接口之前，我正在对接口问题进行建模。我通过找出问题中的名词并为它们创建一个接口来做到这一点，例如：

> 每个房子里至少有一个人。每所房子也可能恰好包含一辆自行车，并且可能包含至少一辆汽车。

因此，我将创建接口 IHouse、IPerson 和 IVehicle（因为未来我们可能会有不同类型的房屋、人员和车辆）。

当我进入这些名词的形容词时，问题就来了，例如：

> 每个房子、自行车和汽车都可能有某种颜色。

我没有在每个车辆和房屋类中创建以下方法，而是创建了以下接口：

```
public interface IPainted {

    public Paint getPaint();

    public void setPaint();

} 
```

并将其应用于车辆和房屋接口：

```
public interface IVehicle extends IPainted {
} 
```

这是表示形容词的最佳方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:01:50.520

是的。并且要将您有点尴尬的“名词”和“形容词”放在同一个桶中，请使用后缀“able” - 在这种情况下`public interface Paintable`。因此，与可绘制性有关的可绘制类的所有属性都应封装在该类实现的接口中**。**`Paintable`

# powershell - Powershell cmdlet 输出未显示

> ID：14326490
> 
> 赞同：4
> 
> 时间：2013-01-14T20:56:02.457
> 
> 标签：powershell

考虑脚本“test.ps1：

```
Get-EventLog -list | gm 
```

当从 Powershell 控制台 (".\test.ps1") 调用它时，它会按预期输出成员。

但是，以下脚本不显示“Get-EventLog -list | gm”的输出：

脚本 1

```
Get-EventLog -list | gm
break 
```

脚本 2

```
Get-EventLog -list | gm

$yes = New-Object System.Management.Automation.Host.ChoiceDescription "&Yes", "Continua execucao"
$no = New-Object System.Management.Automation.Host.ChoiceDescription "&No", "Cancela operacao"
$options = [System.Management.Automation.Host.ChoiceDescription[]]($yes, $no)
$result = $host.ui.PromptForChoice("Title", "Message", $options, 0) 
```

如果我将“Get-EventLog -list | gm”更改为“Hello World”之类的文本，在这两种情况下都会正确显示。

为什么没有显示 cmdlet 的输出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:48:40.673

我看了一些关于 powershell 流水线的文章。使用的 cmdlet 返回对象的集合，powershell 的[默认行为](https://docs.microsoft.com/en-us/powershell/scripting/samples/redirecting-data-with-out---cmdlets)是将输出转发到屏幕。

[这篇文章](http://becomelotr.wordpress.com/2012/04/15/hey-dont-break-my-pipe/)解释了break语句会中断管道（实际上，它会中断执行，直到找到父循环），从而解释了第一个例子的行为。

至于第二个例子，我假设 powershell 只会在脚本执行结束时默认重定向到控制台。由于 $host.ui.PromptForChoice 不使用第一个 cmdlet 调用的输出，而是生成它自己的输出，因此 Get-EventLog 的结果将被丢弃。

就目前而言，正如@Christian 所说，始终使用“Out-Host”是要走[的路](https://web.archive.org/web/20150120044743/http://technet.microsoft.com/en-us/library/dd347728.aspx)。

# testing - 使用 onbeforeunload 更改页面的 url

> ID：14326497
> 
> 赞同：0
> 
> 时间：2013-01-14T20:56:19.970
> 
> 标签：testing, selenium, phpunit, selenium-webdriver

这个问题主要是关于`phpunit_selenium2`扩展的（尽管也欢迎一般的想法）：

假设我有一个页面在浏览器/标签关闭事件上触发警报，如下所示：

```
window.onbeforeunload = function() {
    return 'Hello world!';
}; 
```

测试打开此页面，执行一些操作，根据测试场景我需要打开另一个 url。

问题是命令

```
$this->url('/another/page/url'); 
```

等待页面 url 被更改并失败，因为它没有 - 因为它被刚刚出现的警报窗口锁定：`RuntimeException: Navigation failed with error code=3.`

一个人将如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:38:31.177

我能想到的丑陋但唯一的解决方案：

```
try {
    $this->url('/another/page/url');
} catch (RuntimeException $e) {}
$this->acceptAlert(); 
```

# c# - 使用现有数据库的 ServiceStack 身份验证

> ID：14326502
> 
> 赞同：5
> 
> 时间：2013-01-14T20:56:49.517
> 
> 标签：c#, servicestack, basic-authentication

我一直在研究 ServiceStack，并试图了解如何在具有现有数据库的服务上使用 BasicAuthentication。我想生成一个公钥（用户名）和密钥（密码）并将其放入现有的用户记录中。然后，用户会将其与他们的请求一起传递给 ServiceStack 端点。

**我需要在 ServiceStack 堆栈中实现什么才能使其正常工作？**

我查看了 IUserAuthRepository 和 CredentialsAuthProvider 基类，看起来我应该在现有数据库表之上实现 IUserAuthRepository。

我还试图弄清楚我应该实现的最低限度是什么才能使身份验证正常工作。我不会使用该服务来添加或更新用户对服务的访问权限，而是使用单独的 Web 应用程序。

非常感谢任何帮助和过去的经验。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-30T20:27:21.550

针对现有数据库进行身份验证的示例（在本例中通过 Umbraco/ASP.NET 会员系统）。1) 创建您的 AuthProvider（请原谅冗长的代码，并注意您不必也重写 TryAuthenticate，这是为了检查用户是否是特定 Umbraco 应用程序别名的成员）：

```
using System.Collections.Generic;
using System.Globalization;
using System.Linq;
using System.Web.Security;

using ServiceStack.Configuration;
using ServiceStack.Logging;
using ServiceStack.ServiceInterface;
using ServiceStack.ServiceInterface.Auth;
using ServiceStack.WebHost.Endpoints;

using umbraco.BusinessLogic;
using umbraco.providers;

public class UmbracoAuthProvider : CredentialsAuthProvider
{

    public UmbracoAuthProvider(IResourceManager appSettings)
    {
        this.Provider = "umbraco";
    }

    private UmbracoAuthConfig AuthConfig
    {
        get
        {
            return EndpointHost.AppHost.TryResolve<UmbracoAuthConfig>();
        }
    }

    public override void OnAuthenticated(IServiceBase authService, IAuthSession session, IOAuthTokens tokens, Dictionary<string, string> authInfo)
    {
        ILog log = LogManager.GetLogger(this.GetType());
        var membershipProvider = (UsersMembershipProvider)Membership.Providers["UsersMembershipProvider"];

        if (membershipProvider == null)
        {
            log.Error("UmbracoAuthProvider.OnAuthenticated - NullReferenceException - UsersMembershipProvider");
            session.IsAuthenticated = false;
            return;
        }

        MembershipUser user = membershipProvider.GetUser(session.UserAuthName, false);

        if (user == null)
        {
            log.ErrorFormat(
                "UmbracoAuthProvider.OnAuthenticated - GetMembershipUser failed - {0}", session.UserAuthName);
            session.IsAuthenticated = false;
            return;
        }

        if (user.ProviderUserKey == null)
        {
            log.ErrorFormat(
                "UmbracoAuthProvider.OnAuthenticated - ProviderUserKey failed - {0}", session.UserAuthName);
            session.IsAuthenticated = false;
            return;
        }

        User umbracoUser = User.GetUser((int)user.ProviderUserKey);

        if (umbracoUser == null || umbracoUser.Disabled)
        {
            log.WarnFormat(
                "UmbracoAuthProvider.OnAuthenticated - GetUmbracoUser failed - {0}", session.UserAuthName);
            session.IsAuthenticated = false;
            return;
        }

        session.UserAuthId = umbracoUser.Id.ToString(CultureInfo.InvariantCulture);
        session.Email = umbracoUser.Email;
        session.DisplayName = umbracoUser.Name;
        session.IsAuthenticated = true;
        session.Roles = new List<string>();
        if (umbracoUser.UserType.Name == "Administrators")
        {
            session.Roles.Add(RoleNames.Admin);
        }

        authService.SaveSession(session);
        base.OnAuthenticated(authService, session, tokens, authInfo);
    }

    public override bool TryAuthenticate(IServiceBase authService, string userName, string password)
    {
        ILog log = LogManager.GetLogger(this.GetType());
        var membershipProvider = (UsersMembershipProvider)Membership.Providers["UsersMembershipProvider"];

        if (membershipProvider == null)
        {
            log.Error("UmbracoAuthProvider.TryAuthenticate - NullReferenceException - UsersMembershipProvider");
            return false;
        }

        if (!membershipProvider.ValidateUser(userName, password))
        {
            log.WarnFormat("UmbracoAuthProvider.TryAuthenticate - ValidateUser failed - {0}", userName);
            return false;
        }

        MembershipUser user = membershipProvider.GetUser(userName, false);

        if (user == null)
        {
            log.ErrorFormat("UmbracoAuthProvider.TryAuthenticate - GetMembershipUser failed - {0}", userName);
            return false;
        }

        if (user.ProviderUserKey == null)
        {
            log.ErrorFormat("UmbracoAuthProvider.TryAuthenticate - ProviderUserKey failed - {0}", userName);
            return false;
        }

        User umbracoUser = User.GetUser((int)user.ProviderUserKey);

        if (umbracoUser == null || umbracoUser.Disabled)
        {
            log.WarnFormat("UmbracoAuthProvider.TryAuthenticate - GetUmbracoUser failed - {0}", userName);
            return false;
        }

        if (umbracoUser.UserType.Name == "Administrators"
            || umbracoUser.GetApplications()
                          .Any(app => this.AuthConfig.AllowedApplicationAliases.Any(s => s == app.alias)))
        {
            return true;
        }

        log.WarnFormat("UmbracoAuthProvider.TryAuthenticate - AllowedApplicationAliases failed - {0}", userName);

        return false;
    }
}

public class UmbracoAuthConfig
{

    public UmbracoAuthConfig(IResourceManager appSettings)
    {
        this.AllowedApplicationAliases = appSettings.GetList("UmbracoAuthConfig.AllowedApplicationAliases").ToList();
    }

    public List<string> AllowedApplicationAliases { get; private set; }

} 
```

2）通过通常的 AppHost 配置方法注册提供者：

```
 public override void Configure(Container container)
    {
        // .... some config code omitted....

        var appSettings = new AppSettings();
        AppConfig = new AppConfig(appSettings);
        container.Register(AppConfig);

        container.Register<ICacheClient>(new MemoryCacheClient());

        container.Register<ISessionFactory>(c => new SessionFactory(c.Resolve<ICacheClient>()));

        this.Plugins.Add(
            new AuthFeature(
                // using a custom AuthUserSession here as other checks performed here, e.g. validating Google Apps domain if oAuth enabled/plugged in.
                () => new CustomAuthSession(), 
                new IAuthProvider[] { new UmbracoAuthProvider(appSettings) 
                                    }) {
                                          HtmlRedirect = "/api/login" 
                                       });

} 
```

3) 现在可以针对现有的 Umbraco 数据库@yourapidomain/auth/umbraco 进行身份验证，使用 Umbraco 来管理用户/对 API 的访问。无需实现额外的用户密钥/秘密或 BasicAuthentication，除非您真的想......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-18T22:04:36.207

我刚从 ServiceStack 开始，我需要完全相同的东西——我今天设法让它工作。

通过基本身份验证登录用户的**绝对最低要求是：**

```
using ServiceStack.ServiceInterface;
using ServiceStack.ServiceInterface.Auth;

public class CustomBasicAuthProvider : BasicAuthProvider
{
    public override bool TryAuthenticate(IServiceBase authService, string userName, string password)
    {
        // here, you can get the user data from your database instead
        if (userName == "MyUser" && password == "123")
        {
            return true;
        }

        return false;
    }
} 
```

...并将其注册到`AppHost`：

```
Plugins.Add(new AuthFeature(() => new CustomUserSession(),
    new IAuthProvider[] {
        new CustomBasicAuthProvider()
    }) { HtmlRedirect = null }); 
```

就这样！

* * *

另一种可能的解决方案是使用默认值`BasicAuthProvider`并提供自己的实现`IUserAuthRepository`。

如果你有兴趣，我也可以给你看一个例子。

* * *

**编辑：**

这是最低限度的`IUserAuthRepository`- 只需继承`InMemoryAuthRepository`并覆盖`TryAuthenticate`：

```
using ServiceStack.ServiceInterface.Auth;

public class CustomAuthRepository : InMemoryAuthRepository
{
    public override bool TryAuthenticate(string userName, string password, out UserAuth userAuth)
    {
        userAuth = null;

        if (userName == "MyUser" && password == "123")
        {
            userAuth = new UserAuth();
            return true;
        }

        return false;
    }
} 
```

...并将其注册到`AppHost`：

```
container.Register<IUserAuthRepository>(r => new CustomAuthRepository()); 
```

当然，您还需要注册默认值之一`AuthProviders`（基本、凭据等）。

# html - VB.NET getElementById

> ID：14326504
> 
> 赞同：0
> 
> 时间：2013-01-14T20:56:53.333
> 
> 标签：html, vb.net, parsing

我难住了。我不想在我的应用程序中使用 WebBrowser，我想通过 id 获取特定元素。我的代码是：

```
Dim request As System.Net.HttpWebRequest = System.Net.HttpWebRequest.Create("http://www.google.com/finance?q=NASDAQ:GOOG")
Dim response As System.Net.HttpWebResponse = request.getresponse()
Dim sr As System.IO.StreamReader = New System.IO.StreamReader(response.GetResponseStream())
Dim sourcecode As String = sr.ReadToEnd()
TextBox1.Text = sourcecode 
```

这让我得到了源代码。但是我如何获得一个特定的元素？我认为有一种简单的方法可以做到这一点......顺便说一句，我不想​​使用正则表达式，也不想下载 HTML Agility Pack。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T05:30:43.233

您可以制作一个解析表来识别 html 标签，并在标签内搜索`id=elementname`（加上可能的空白字符）。这似乎不是不可能完成的任务，因为您可以忽略大多数标签并且不必验证 html。只考虑<>，忽略引号、脚本等的内容。还有很多细节，需要一点工作，但编程很有趣。

另一种方法是下载 html 敏捷包之类的东西，使用浏览器或使用您希望避免的正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:16:32.813

这是一个非常粗略的想法，它不适用于需要单独关闭标签（如）的 BLOCK 元素，但它适用于自关闭元素，如

我还注意到，有些标签 ID 包含在语音标记中，有些则没有，所以你可能不得不调整它......

我只是粗略地整理了这段代码并复制粘贴了例程以检测未封闭的 id 标签，但它仍然需要处理它并且也可以缩短。

```
<script runat="server">
Dim sourcecode As String
Dim bodycode As String
Dim RetVal As String

Protected Sub Page_Load(sender As Object, e As System.EventArgs)
    '
    LoadHttpStuff()
    If Request.Form("Button1") = "Submit" Then
        RetVal = MyGetElementById(Request("Text1"))
    End If

End Sub

Private Sub LoadHttpStuff()

    Dim request As System.Net.HttpWebRequest
    Dim response As System.Net.HttpWebResponse
    Dim sr As System.IO.StreamReader
    Dim finishat As Long
    Dim startat As Long

    request = System.Net.HttpWebRequest.Create("http://www.google.com/finance?q=NASDAQ:GOOG")
    response = request.GetResponse()
    sr = New System.IO.StreamReader(response.GetResponseStream())
    sourcecode = sr.ReadToEnd()
    startat = InStr(sourcecode, "<body>")
    finishat = InStr(sourcecode, "</body>") + 7
    bodycode = Mid(sourcecode, startat, finishat - startat)
    bodycode = LCase(bodycode)

End Sub

Private Function MyGetElementById(Id As String) As String
    Dim tagstart As Long
    Dim tagend As Long
    Dim posx As Long
    Dim item As System.Web.UI.HtmlControls.HtmlGenericControl
    Dim test As Boolean
    Dim letter As Char
    Dim text As String
    item = Nothing
    test = False
    text = ""
    If Trim(Id) <> "" Then
        '-> with SPEECHMARKS
        posx = InStr(bodycode, LCase("id=" & Chr(34) & Id & Chr(34)))
        If posx > 0 Then
            'find start of tag
            Do
                posx = posx - 1
                letter = Mid(bodycode, posx, 1)
                If letter = "<" Then
                    'found tag start
                    tagstart = posx
                    Exit Do
                End If
            Loop Until posx < 1
            If tagstart > 0 Then
                posx = InStr(bodycode, LCase("id=" & Chr(34) & Id & Chr(34)))
                Do
                    posx = posx + 1
                    letter = Mid(bodycode, posx, 1)
                    If letter = ">" Then
                        tagend = posx + 1
                        Exit Do
                    End If
                Loop Until posx >= Len(bodycode)
                If tagend > 0 Then
                    text = Mid(bodycode, tagstart, tagend - tagstart)
                    test = True
                End If
            End If
        Else
            posx = InStr(bodycode, LCase("id=" & Id))
            If posx > 0 Then
                'find start of tag
                Do
                    posx = posx - 1
                    letter = Mid(bodycode, posx, 1)
                    If letter = "<" Then
                        'found tag start
                        tagstart = posx
                        Exit Do
                    End If
                Loop Until posx < 1
                If tagstart > 0 Then
                    posx = InStr(bodycode, LCase("id=" & Id))
                    Do
                        posx = posx + 1
                        letter = Mid(bodycode, posx, 1)
                        If letter = ">" Then
                            tagend = posx + 1
                        End If
                    Loop Until posx >= Len(bodycode)
                    If tagend > 0 Then
                        text = Mid(bodycode, tagstart, tagend - tagstart)
                        test = True
                    End If
                End If
            End If
        End If
    End If
    Return Text
End Function
</script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
  <title></title>
</head>
<body>
  <form id="form1" runat="server">
    <table style="width: 100%;">
        <tr>
            <td style="text-align:left; vertical-align: top; width: 75%;"><textarea rows="20" cols="80" style="width: 90%;" disabled="disabled"><%=sourcecode%></textarea></td>
            <td style="width: 25%; text-align: left; vertical-align: top;">
                <table style="width:100%;">
                    <tr>
                        <td>Element Id&nbsp;<input id="Text1" name="Text1" type="text" /></td>
                    </tr><tr>
                        <td>&nbsp;</td>
                    </tr><tr>
                        <td>&nbsp;</td>
                    </tr><tr>
                        <td><input id="Button1" type="Submit" value="Submit" name="Button1" /></td>
                    </tr><tr>
                        <td>&nbsp;</td>
                    </tr><tr>
                        <td>&nbsp;</td>
                    </tr>
                </table>
            </td>
        </tr><tr>
            <td style="width: 75%;">&nbsp;</td>
            <td style="width: 25%;">&nbsp;</td>
        </tr><tr>
            <td style="width: 100%;" colspan="2"><textarea rows="20" cols="80" style="width: 75%;" disabled="disabled"><%=RetVal%></textarea></td>
            <td style="width: 25%;">&nbsp;</td>
        </tr>
    </table>
</form>
</body>
</html> 
```

希望它有一点帮助

# dns - whois 查询阈值

> ID：14326505
> 
> 赞同：0
> 
> 时间：2013-01-14T20:56:54.953
> 
> 标签：dns

我正在尝试创建一个自动批量域名可用性查找服务。我想知道是否有关于在设定的时间段内允许从单个 IP 地址进行多少次查找的指南？

## 编辑

为了进一步澄清，我正在自动使用对命令终端 whois 命令的多次调用，而不是通过任何特定网站。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:10:39.200

Whois 批量查找限制通常在 whois 服务器在查询中看到的源 IP 上实施。解决方案是通过使用代理、服务器群、基于 Web 的 whois 表单等来尽可能多地反弹 IP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-20T22:38:53.840

每个 registry/Registrar 都有自己的限制规则，例如：godaddy 只允许来自任何 IP 的 100 个或更少的查询。

# facebook - Facebook API——在还有另一个链接的墙帖中嵌入视频

> ID：14326508
> 
> 赞同：4
> 
> 时间：2013-01-14T20:57:07.190
> 
> 标签：facebook, video, hyperlink, facebook-wall

我正在尝试使用具有可播放视频缩略图和链接字段的 Facebook API 制作墙贴。（我正在使用 Facebook Python 包装器）。

当您使用 API 发布墙帖时，您可以使用附件字段指定您的额外内容：

```
graph = GraphAPI(valid_access_token)
graph.put_wall_post(message="Hey Everyone", attachment={
  "name" : "My Cool Link",
  "description" : "It's very cool",
  "link" : "http://www.my_app_url.com"
 } 
```

我想为此添加一个可播放的视频缩略图。一种方法是将视频网址放在附件的链接字段中：

```
graph.put_wall_post(message="Hey Everyone", attachment={
  "name" : "My Cool Video",
  "description" : "It's very cool",
  "link" : "http://www.youtube.com/watch?v=some_yt_id"
 } 
```

这会呈现视频缩略图并且可以在 Facebook 中播放，这正是我想要的，但它用完了“链接”字段，所以我不能使用该字段将它们链接到 www.my_app_url.com。我希望两者都能做到。

**任何人都知道如何通过 Open Graph API 在 Facebook 墙贴中放置可播放的视频缩略图*和指向我的应用程序的链接？***

*附加背景信息*：有一种方法可以使用附件对象中的“图片”字段来执行此类操作——这允许您添加与附件的主链接分开的图片 url。facebook 文档*说*您可以将视频链接放在附件中名为“源”的字段中，但是当我尝试时，附件没有呈现缩略图，并且无法播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T17:11:38.080

我最终将指向我的应用程序的链接放在帖子的消息中，并在视频的帖子附件中使用“链接”字段。不是我所希望的，但我想它确实有效。

# php - PHP 表单验证 - 可能的字符集问题

> ID：14326510
> 
> 赞同：0
> 
> 时间：2013-01-14T20:57:13.590
> 
> 标签：php, regex, validation

以下是验证页面的一部分。一般来说，它工作得很好。该站点的容量很小，因此不太关心速度优化。我的问题是某些用户没有验证有效数据。大多数用户没有任何问题。例如，客户输入的街道地址为“2881 Hayden Creek Terrace”，但验证不会清除它。我对此很陌生，所以这些类型的东西可能很常见，但我猜问题出在客户浏览器中的字符集上。这可能是我应该研究的吗？有没有人看到代码有任何重大问题？

```
function validation_payment($_check='') {

    $_error = '' ;

    foreach( $_POST as $key => $value ) {

    $value = preg_replace( "/[^\w@&#,\-\.\s\!\?]/",'',$value ) ;
    $value = preg_replace( "/\s\s+/"," ",$value ) ;
    //echo $value.'</br>' ;
    $_POST[$key] = $value ;

    switch ($key) {

        case 'ADDRESS_STREET_LINE1':
            $value = preg_replace("/[^\w,\-\.\s]/","",$value) ;
            if( empty($value) ) {
                $_error = "Error: Please make sure the Street Address entered on LINE 1 is not blank.<br/>" ;
            }elseif( !preg_match("/\s/",$value) ) {
                $_error .= "Error: The Street Address on LINE 1 does not appear to contain a street location and street name. Please review it for accuracy.<br/>" ;
            }elseif( !( strlen($value) < 100 ) ) {
                $_error .= 'Error: The Street Address entered on LINE 1 contains too many characters.<br/>' ;
            }else{
                $_SESSION['BILLING'][$key] = $value ;
            }
            break ;

} 
```

# http - Mule ESB HTTP 入站端点路径

> ID：14326511
> 
> 赞同：0
> 
> 时间：2013-01-14T20:57:14.290
> 
> 标签：http, path, relative-path, esb, mule

我试图让两个具有相似路径的骡子项目同时运行，以便我们可以将我们的调用组合在一起（例如[http://domain.com/foo/service1](http://domain.com/foo/service1) http://domain.com/foo/服务2)

作为 POC，我有两个项目，它们都在 localhost 端口 80 上进行侦听。project1 的路径为 endpoint/v1 project2 的路径为 endpoint/v2

两者都成功部署到我的 mule 服务器，但只有 project1 的端点返回任何内容。

关于如何让它正常工作的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:12:28.067

那是因为只有一个套接字实际在该端口（80）上侦听。如果您想拥有多个路径，则需要将端点组合在同一个应用程序中，并且该应用程序可以充当代理并调用具有实际逻辑的端点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:34:00.210

除了 Seba 的提议，一种常见的模式是让一个应用程序负责公开一个 HTTP 端点，然后将消息发送到 JMS 队列，这些队列由负责处理特定路径的应用程序监听（比如在一个应用程序中使用 /v1 和 /v2在另一个应用程序中）。

# qt - Qt3D 是 Qt5 的一部分吗？

> ID：14326512
> 
> 赞同：15
> 
> 时间：2013-01-14T20:57:15.797
> 
> 标签：qt, qt5, qt3d

我已经在 windows 中安装了 Qt5 库，但是 Qt 助手中没有关于 Qt3D 的文档。Qt3D 是 Qt5 的一部分还是已从发行版 5 中删除？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-14T21:26:39.797

是的。[Qt 3D 在Qt 5.7 版本](http://blog.qt.io/blog/2016/06/16/qt-5-7-released/)中成为标准 Qt 库。

> 在 Qt 5.7 中，我们引入了 Qt 3D 模块。该模块现已作为两个版本的技术预览版提供，我很高兴地宣布，它现已达到成为 Qt 家族完全受支持成员的状态！

这个添加是很长时间的。大约 4.5 年前，[他们宣布从 Qt 5.0 版本中删除它](http://www.mail-archive.com/interest@qt-project.org/msg04398.html)。从那时起，它经历了重大的返工。现在，七个次要版本之后，它终于又回来了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-13T05:24:38.410

当时其他答案和评论是正确的，但现在情况已经改变。

[从 Qt5.5 开始](https://wiki.qt.io/New_Features_in_Qt_5.5)，Qt3D 现在作为“技术预览”包含在内（我将此短语解释为它尚未准备好部署，因此可能存在一些错误并且 API 可能会更改）。

需要特别注意的是，之前的 Qt 版本可用的 Qt3D 一直是 Qt3D 1.0，而 Qt5.5 中包含的版本是 v2.0，它是由不同的软件团队开发的，**具有非常不同的 API**。

来自新开发人员的更多信息[可在此处获得](http://www.kdab.com/qt3d-technology-preview-released-qt-5-5-0/)。

另请注意，Qt3D v1.0 实际上从未在任何版本中“正确”包含在 Qt 中，但如果从 v5.0 到 5.4 从 git 签出，与 Qt 一起构建（显然）相当容易。

# c# - 我如何知道某个值何时在 ComboBox 中“重新选择”？

> ID：14326513
> 
> 赞同：5
> 
> 时间：2013-01-14T20:57:19.347
> 
> 标签：c#, .net, wpf, combobox

我正在使用 ComboBox 将文本模板插入 RichEdit 控件（模板的名称在 ComboBox 的选择列表中。）

这一切都很好，除非用户再次在列表中选择相同的值。然后`SelectionChanged`是不射击。**根据事件的名称（Selection Changed** ），这是有道理的，但我需要知道该值已被重新选择，以便我可以再次插入它。

**有没有办法知道从 ComboBox 中重新选择了一个项目？** （或者更好的控制使用？）

我尝试使用该`DropDownClosed`事件，但即使未重新选择该项目也会触发。（他们打开下拉菜单，然后单击另一个控件。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-18T14:07:38.197

我有同样的问题，我终于找到了答案：

您需要像这样处理 SelectionChanged 事件和 DropDownClosed ：

在 XAML 中：

```
<ComboBox Name="cmbSelect" SelectionChanged="ComboBox_SelectionChanged" DropDownClosed="ComboBox_DropDownClosed">
  <ComboBoxItem>1</ComboBoxItem>
  <ComboBoxItem>2</ComboBoxItem>
  <ComboBoxItem>3</ComboBoxItem>
</ComboBox> 
```

在 C# 中：

```
private bool handle = true;
private void ComboBox_DropDownClosed(object sender, EventArgs e) {
  if(handle)Handle();
  handle = true;
}

private void ComboBox_SelectionChanged(object sender, SelectionChangedEventArgs e) {
  ComboBox cmb = sender as ComboBox;
  handle = !cmb.IsDropDownOpen;
  Handle();
}

private void Handle() {
  switch (cmbSelect.SelectedItem.ToString().Split(new string[] { ": " }, StringSplitOptions.None).Last())
  { 
      case "1":
          //Handle for the first combobox
          break;
      case "2":
          //Handle for the second combobox
          break;
      case "3":
          //Handle for the third combobox
          break;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T00:41:13.800

听起来您使用组合框的方式与正常使用不一致。在插入所选模板的组合框旁边有一个按钮是否有效。我认为对于熟悉 Google 搜索行为和搜索建议的用户来说，这种行为会更好

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T00:54:27.443

我会使用列表框。用户不需要打开它。相反，他可以立即从列表中选择一个项目。此外，我不会将此功能附加到`SelectionChanged`事件，而是附加到`MouseDoubleClick`事件。这允许轻松选择和重新选择项目。另外我会添加一个按钮，它会触发相同的功能。双击应该只是这个按钮的一种快捷方式，按钮也可以有描述性文本和/或图标，这使得它更加直观。

`SelectionChanged`即使用户使用箭头键上下移动也会触发，但此时不应触发该功能。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T21:29:47.700

您需要提供一些代码来显示您要执行的操作。如果已经选择了一个项目，为什么还`RichEdit`没有设置控件的模板？
在处理 WPF 时，熟悉与视图模型的绑定会有所帮助，不仅适用于`ItemsSource`诸如`SelectedItem`. 鉴于您描述的场景，我将使用绑定`SelectedItem`到视图模型，然后将`RichEdit`控件的模板绑定到相同的视图模型属性，如有必要，使用值转换器。这样你就不需要搞乱点击事件等。如果 View Model 的属性是一个`DependencyProperty`或触发一个`PropertyChanged`事件（请参阅 参考资料`INotifyPropertyChanged`），您的`RichEdit`控件模板应该会自动反映下拉菜单中的选择。

** 编辑 ** 根据您的评论，我假设您想要的行为是基于组合选择设置文本，但允许用户自定义该文本。但是，如果进行了编辑，他们应该能够重新选择组合值来重置文本。问题是如果该项目已经被选中，那么就没有触发事件来挂钩。解决方案是，如果文本内容发生变化，这应该取消选择任何组合选择（因为组合不再反映文本框的内容。）绑定可以很好地管理这个：

为简单起见，此示例视图使用 TextBox：

```
<Window x:Class="UISample.UITemplateSample"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="UITemplateSample" Height="300" Width="300">
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="auto"/>
        <RowDefinition/>
    </Grid.RowDefinitions>

    <ComboBox ItemsSource="{Binding Path=Templates}" SelectedItem="{Binding Path=SelectedTemplate}" DisplayMemberPath="Name"/>
    <TextBox Grid.Row="1" AcceptsReturn="True" TextWrapping="Wrap" Text="{Binding Path=Text}"/>
</Grid> 
```

视图模型：

```
 class TemplateSampleViewModel : INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    public ObservableCollection<TextTemplate> Templates
    {
        get;
        private set;
    }

    private TextTemplate _selectedTemplate;
    public TextTemplate SelectedTemplate
    {
        get{ return _selectedTemplate; }
        set
        {
            if ( _selectedTemplate == value )
                return;
            _selectedTemplate = value;
            if (_selectedTemplate != null)
                Text = _selectedTemplate.TemplateText;
            firePropertyChanged("SelectedTemplate");
        }
    }

    private string _text;
    public string Text
    {
        get { return _text; }
        set
        {
            if ( _text == value )
                return;

            _text = value;
            firePropertyChanged( "Text" );
            var matchingTemplate = Templates.FirstOrDefault( t => t.TemplateText == _text );
            SelectedTemplate = matchingTemplate;

        }
    }

    public TemplateSampleViewModel(IEnumerable<TextTemplate> templates)
    {
        Templates = new ObservableCollection<TextTemplate>(templates);
    }

    private void firePropertyChanged(string propertyName)
    {
        if ( PropertyChanged != null )
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

并将其接线：

```
 var viewModel = new TemplateSampleViewModel(new[]
                                                        {
                                                            new TextTemplate {Name = "First", TemplateText = "This is the first item"},
                                                            new TextTemplate {Name = "Second", TemplateText = "This is the second item"},
                                                            new TextTemplate {Name = "Third", TemplateText = "This is the third item"},
                                                        });
        var test = new UITemplateSample {DataContext = viewModel};
        test.Show(); 
```

这将绑定组合框，然后在选择项目时，文本框会自动更新。当文本框内容发生变化时，会检查模板以查看它是否仍然匹配，如果不匹配，则取消选择组合项。如果条目与模板匹配，则自动选择该模板。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T21:54:30.300

我能找到的最好方法是在下拉菜单打开时清除所选值。这并不理想，因为用户无法将其先前的位置作为参考点（适用于长列表）。但这是我能找到的最佳解决方案。

这是我使用的代码：

```
ctor()
{
     myComboBox.DropDownOpened += OnDropDownOpened;
}

private void OnDropDownOpened(object sender, EventArgs e)
{
   var comboBox = ((ComboBox)sender);
   comboBox.SelectedItem = null;
} 
```

# razor - 如何从继承 ServiceStack.ServiceInterface.Service 的类中将项目添加到 ViewBag 中？

> ID：14326516
> 
> 赞同：1
> 
> 时间：2013-01-14T20:57:28.447
> 
> 标签：razor, service, servicestack

是否可以使用 ServiceStack.Razor 访问 ViewBag？

# asp.net - 在 Visual Studio 2012 中调试很慢

> ID：14326517
> 
> 赞同：5
> 
> 时间：2013-01-14T20:57:53.260
> 
> 标签：asp.net, vb.net, visual-studio-2012

我们有一个大型 ASP.NET 应用程序，它是在过去十年中构建的，现在在 .NET 4.0 中运行。

最近，我们升级到了 Visual Studio 2012 Premium（从 2010 Premium）。
我们的应用程序编译成功，当我们从每个开发人员工作站上的本地 IIS 运行/调试应用程序时（与使用开发服务器相比）。

自从升级到 2012 年以来，当我们调试我们的应用程序时，我们注意到应用程序在加载 ASP.NET 页面时运行非常缓慢，每页可能需要将近 20-30 秒。但是，当我们直接访问应用程序到本地 IIS 并且不使用 VS2012 调试器时，它运行得很好。在 Visual Studio 2012 中对我们的应用程序进行调试的一些事情会显着降低我们的应用程序性能。

有没有一个很好的工具可以用来捕捉后台发生的事情？

此外，这在 Windows 7 Enterprise 机器和 Windows 8 Pro 机器上都会发生。所有 64 位，8+ GB 的 RAM，和 Intel Core i7 处理器。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-23T12:50:08.167

我在 VS 2012 上的调试非常慢，每一步都需要 20~30 秒。

我的解决方案是禁用 .NET Reflector 扩展。

转到工具 - 扩展和更新 - 禁用 .NET 反射器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T03:15:26.180

尝试删除所有断点，然后清理并重建解决方案并再次调试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-08T16:26:01.203

也许您的应用程序正在抛出并捕获大量异常？这确实可以在调试模式下减慢速度。将 Exceptions 属性设置为在 CLR 异常上中断，看看是否是这种情况。

# php - 如果价格不止一个，如何用 php 求和（总计）？

> ID：14326526
> 
> 赞同：-1
> 
> 时间：2013-01-14T20:58:22.600
> 
> 标签：php

我会简单点，假设我有一个购物车，三个不同的价格：

1.  $价格
2.  $特价
3.  $salesprice

当然还有产品数量。

数学的第一步是：

```
<?php

   $price_regular = $price * $quantity
   $price_special = $specialprice * $quantity
   $price_sales   = $salesprice * $quantity

?> 
```

**所以让我做一个简单的例子，在购物车中添加 3 个产品后：**

1.  产品 A - 30 美元（美元价格）
2.  产品 B - 25 美元（$特价）（旧价格为 30 美元）
3.  产品 C - 22 美元（$salesprice）（旧产品为 35 美元）

总和应该是 77 美元。

**这是我想从我的代码中得到的结果。**

**但是如何？**

我尝试做类似的事情：

```
<?php
    $totalprice = $totalprice + $price_regular; 
?> 
```

但它只给了我常规价格的总和。我需要代码来精确计算，就像我使用产品 A - B - C 的简单示例一样

这是我文件中的真实代码：

```
$totalprice = 0;
                $totalarticles = count($itemsonpage);
                for ($i=0;$i<=(count($itemsonpage) - 1);$i++){
                $productslist[$i]['id'] = $itemsonpage[$i]['productid'];
                $products->ShowByID($itemsonpage[$i]['productid']);
                $productslist[$i]['code'] = $products->code;
                $products->ShowLangDataByID($products->id,$chooselang);
                $productslist[$i]['name'] = $products->name;
                $productslist[$i]['quantity'] = $itemsonpage[$i]['quantity'];
                $productslist[$i]['price'] = $itemsonpage[$i]['price'];
                $productslist[$i]['specialprice'] = $products->specialprice;
                $productslist[$i]['salesprice'] = $products->salesprice;
                $productslist[$i]['allprice'] = $products->price * $productslist[$i]['quantity'];
                $productslist[$i]['allprice2'] = $products->specialprice * $productslist[$i]['quantity'];
                $productslist[$i]['allprice3'] = $products->salesprice * $productslist[$i]['quantity'];

                $totalprice = $totalprice + $productslist[$i]['allprice']; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:15:16.293

我想在您的购物车中有几种产品，而您不知道有多少。您应该阅读有关[PHP 数组](http://www.w3schools.com/php/php_arrays.asp)和[PHP 循环](http://www.w3schools.com/php/php_looping_for.asp)的信息。

然后，要使用数组和循环来执行求和，您将使用如下操作：

```
<?php
$totalprice = 0;

$prices=array(30,25,22);
foreach ($prices as $each)
  {
    $totalprice += ;
  }

echo $totalprice."<br />";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:04:19.333

```
<?php
$totalprice += $price_regular; 
$totalprice += $price_special;     
$totalprice += $price_sales;   
echo $totalprice;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:04:42.437

为什么不能这样计算呢？

```
<?php
$totalprice = $price_sales + $price_special + $price_regular; 
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T21:04:54.850

由于您只添加`$price_regular`了`$totalprice`. 你需要尝试这样的事情，将所有 3 个价格相加，

```
 $totalprice = $price_regular + $price_special + $price_sales; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T21:24:38.800

从您的问题中，我了解到您需要添加 3 个数字，上面的所有答案都告诉您如何添加 3 个数字。

我想你实际上问了错误的问题，所以我会给你一个错误的答案，也许这就是你想要的。

您有以下数据库结构表产品（id、name、price_sales、price_special、price_regular）

price_sales 和 price_special 可以为 0，表示该产品不特价或特价。

要获得总数，您必须根据 id 从数据库中对每个产品执行选择，并获得一个以列作为属性的对象。你的代码应该是这样的。

```
 $products = function_that_gets_the_products_from_the_db();
    foreach($products as $product) {
        $total_cart += $product->price_sales ? $product->price_sales : ($product->price_special ? $product->price_special : $product->price_regular)
    } 
```

此代码检查产品是否在销售，如果是，则使用该价格，如果不是，则检查它是否特价，如果是，则使用该价格，否则使用正常价格。

# python - 如何编写python代码来访问用C编写的程序的输入和输出？

> ID：14326528
> 
> 赞同：4
> 
> 时间：2013-01-14T20:58:25.940
> 
> 标签：python, c, windows, shell, interfacing

有一个用 C 编写和编译的程序，典型的数据输入来自 Unix shell；另一方面，我使用的是 Windows。

我需要从我自己用 Python 编写的代码的输出中向该程序发送输入。

这样做的最佳方法是什么？我已经阅读过`pexpect`，但不确定如何实现它；谁能解释解决这个问题的最佳方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:01:58.423

我建议你使用 python[`subprocess`](http://docs.python.org/2/library/subprocess.html#module-subprocess)模块。

它是`os.popen()`函数调用的替代品，它允许在通过管道与其标准输入/输出/错误流交互时执行程序。

示例使用：

```
import subprocess

process = subprocess.Popen("test.exe", stdin=subprocess.PIPE, stdout=subprocess.PIPE)
input,output = process.stdin,process.stdout

input.write("hello world !")
print(output.read().decode('latin1'))

input.close()
output.close()
status = process.wait() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:06:31.817

如果您不需要处理对交互式问题和提示的响应，请不要打扰`pexpect`，只需使用`subprocess.communicate`Adrien Plisson 建议的。

但是，如果您*确实*需要`pexpect`，最好的入门方法是查看其主页上的[示例](http://www.noah.org/wiki/Pexpect#Examples)，然后在您掌握了您需要做什么之后开始阅读文档。

# ios - NSKeyedArchiver archiveRootObject 不断返回 NO

> ID：14326533
> 
> 赞同：3
> 
> 时间：2013-01-14T20:59:06.030
> 
> 标签：ios, nskeyedarchiver

我花了过去几个小时试图弄清楚这一点，但我已经没有想法了。

我要做的就是归档一个对象，但该方法`archiveRootObject`不断返回`NO`

这是我的代码：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
NSString *cacheDirectory = [paths objectAtIndex:0];
cacheDirectory = [cacheDirectory stringByAppendingPathComponent:@"MyAppCache"];
NSString *fullPath = [cacheDirectory stringByAppendingPathComponent:@"archive.data"];

if(![[NSFileManager defaultManager] fileExistsAtPath:fullPath]){
    [[NSFileManager defaultManager] createDirectoryAtPath:fullPath withIntermediateDirectories:YES attributes:nil error:nil];
}

NSArray *array = [NSArray arrayWithObjects:@"hello", @"world", nil];
NSLog(@"Full Path: %@", fullPath);
BOOL res = [NSKeyedArchiver archiveRootObject:array toFile:fullPath];

if(res){
    NSLog(@"YES");
}else{
    NSLog(@"NO");
} 
```

每次我运行它时，它都会打印`NO`.

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:09:29.170

您使用该路径创建一个目录，`fullPath`然后尝试将文件写入同一路径。用这样的文件覆盖目录是不可能的。使用您的`cacheDirectory`字符串来创建您的目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:09:32.167

NSString *cacheDirectory 不是一个可变字符串，在你初始化它之后，你会尝试修改它，以便写入顶级目录。

要快速修复，请尝试：

```
NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory,   NSUserDomainMask, YES);
NSString *documentPath = ([documentPaths count] > 0) ? [documentPaths objectAtIndex:0] : nil;
NSString *documentsResourcesPath = [documentPath  stringByAppendingPathComponent:@"MyAppCache"];

NSString *fullPath = [documentsResourcesPath stringByAppendingPathComponent:@"archive.data"]; 
```

# android - Unity中如何高速碰撞物体

> ID：14326535
> 
> 赞同：13
> 
> 时间：2013-01-14T20:59:08.950
> 
> 标签：android, unity3d

我尝试为 Android 创建游戏，但我遇到了高速物体的问题，它们不想碰撞。

我有带有 Sphere Collider 和 Bouncy 材质的 Sphere，以及带有此参数的 RigidBody（Gravity=false，Interpolate=Interpolate，Collision Detection = Continuous Dynamic）

我也有 3 面带有 Box Collider 和 Bouncy 材质的墙。

这是我的球体代码

```
function IncreaseBallVelocity() {
rigidbody.velocity *= 1.05;
}

function Awake () {
rigidbody.AddForce(4, 4, 0, ForceMode.Impulse);

InvokeRepeating("IncreaseBallVelocity", 2, 2);
} 
```

在项目设置中，我设置：“惩罚力的最小穿透”=0.001，“求解器交互计数”=50

当我开始玩时，它工作正常（它会弹跳），但是当速度变高时，Sphere 只是通过墙壁。

谁能帮我？

谢谢。

已编辑

```
var hit : RaycastHit;

var mainGameScript : MainGame;

var particles_splash : GameObject;

function Awake () {
rigidbody.AddForce(4, 4, 0, ForceMode.Impulse);

InvokeRepeating("IncreaseBallVelocity", 2, 2);
}

function Update() {
if (rigidbody.SweepTest(transform.forward, hit, 0.5))
    Debug.Log(hit.distance + "mts distance to obstacle");
if(transform.position.y < -3) {
    mainGameScript.GameOver();
    //Application.LoadLevel("Menu");
}
}

function IncreaseBallVelocity() {
rigidbody.velocity *= 1.05;
}

function OnCollisionEnter(collision : Collision) {
Instantiate(particles_splash, transform.position, transform.rotation);
} 
```

**编辑添加了更多信息**

1.  固定时间步长 = 0.02 最大允许 Tir = 0.333
2.  在编辑器播放器和 Android 上运行游戏没有区别
3.  不，当我设置为 0.01 时看起来不错
4.  我的 Paddle 是没有刚体的 Box Collider，墙壁是一样的
5.  所有在同一层（当速度正常时，一切正常）PhysicsManager 中的值是默认值（与图像相同）exept "Solver Interation Co..." = 50
6.  不，当我改变速度时，它会通过另一面墙
7.  我正在使用标准立方体，但我扩展/收缩它以适合我的屏幕和其他对象，当我扩展墙壁时，它可以弹跳
8.  [不，这是来自视频http://www.youtube.com/watch?v=edfd1HJmKPY](http://www.youtube.com/watch?v=edfd1HJmKPY)的简单项目简单示例
9.  我不使用重力

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T22:10:31.860

看：

1.  [类似的问题](https://stackoverflow.com/questions/9688237/how-to-prevent-colliders-from-passing-through-each-other)
2.  使用光线追踪来帮助管理快速对象[的社区脚本](http://wiki.unity3d.com/index.php?title=DontGoThroughThings#C.23_-_DontGoThroughThings.js)
3.  [UnityAnswers 帖子](http://answers.unity3d.com/questions/55179/cheapest-way-to-catch-collisions-on-very-fast-movi.html)导致 (2) 中的脚本

您也可以尝试更改[物理的固定时间步长](http://docs.unity3d.com/Documentation/Components/class-TimeManager.html)。该值越小，Unity 计算场景物理的次数就越多。但请注意，将此值设置得太小，例如 <= 0.005，可能会导致游戏不稳定，尤其是在便携式设备上。

上面的脚本最适合子弹或小物体。您可以[手动强制](http://docs.unity3d.com/Documentation/ScriptReference/Rigidbody.SweepTest.html)刚体碰撞测试：

```
public class example : MonoBehaviour {
    public RaycastHit hit;
    void Update() {
        if (rigidbody.SweepTest(transform.forward, out hit, 10))
            Debug.Log(hit.distance + "mts distance to obstacle");

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T20:54:57.233

我认为主要问题是`Rigidbody`'s的操纵`velocity`。我会尝试以下方法来解决问题。

1.  `IncreaseBallVelocity`重新设计您的代码以确保`Rigidbody`在`FixedUpdate`. 检查是否没有其他操作`Transform.position`。
2.  尝试通过使用`AddForce`或类似的方法直接替换设置速度，以便物理引擎有更高的机会计算所有依赖项。
3.  如果有更多与物理计算相关的项目（主要玩家角色，...），请确保它们的代码也在 FixedUpdate 中运行。

我偶然发现的另一点是非常缩放的网格。具有`GameObject`比例 <= 0.01 或 >= 100 肯定会对物理计算产生负面影响。根据其中一位大师的[文档](http://docs.unity3d.com/Documentation/Components/class-Transform.html)和[这个 Unity 论坛条目](http://forum.unity3d.com/threads/105468-Mesh-scale-factor-vs-Transform-scale)，您应该避免 Transform.scale 值！= 1

还是不开心？好的，那么下一个测试是从高速开始但没有加速度。在这个阶段，我们想知道问题是由高速本身还是加速度造成的。知道物理引擎开始失败的速度值会很有趣 - 请发布它们以便我们可以比较它们。

* * *

**编辑：要调查的更多事情**
6.7 m/sec 听起来并不多，所以我想有一个特殊原因或多种原因导致事情出错。

*   您的[最大允许时间步长](http://docs.unity3d.com/Documentation/Components/class-TimeManager.html)是否足够高？对于测试，我建议 5 到 10x `Fixed Timestep`。请注意，这可能会降低帧速率，但可以稍后修复。
*   在编辑器播放器和 Android 上运行游戏有什么区别吗？
*   您是否注意到由于`0.01` `FixedTimestep`. 这表明物理引擎可能有问题。
*   是不是有静态对撞机（具有对撞机但没有 collider 的对象`Rigidbody`）被移动或以其他方式操纵？这将导致在 PhysX 中进行大量重新计算。
*   图层怎么样：所有墙壁都在同一图层上吗？所涉及的层在[碰撞检测矩阵](http://docs.unity3d.com/Documentation/Components/LayerBasedCollision.html)中是否正确配置？
*   无反弹效果总是发生在同一面墙上吗？如果是这样，您可以复制第一面墙并将其放在第二面的位置，看看这面墙是否有问题。
*   如果不是付出太多努力，我会尝试设置一些标准立方体作为墙壁，以确保这`transform.scale`不是罪魁祸首（我在这方面的经历非常糟糕）。
*   你是操纵重力还是`TimeManager.timeScale`从脚本中操纵？
*   顺便说一句：你在使用重力吗？（应该没问题只是

# c++ - 我的 C++ 应用程序是否依赖于 .Net 框架？

> ID：14326542
> 
> 赞同：4
> 
> 时间：2013-01-14T20:59:24.720
> 
> 标签：c++, .net, visual-studio-2012

我使用 Visual Studio 作为我的 IDE。我的 C++ 应用程序是否会像 C#、VB.NET 和 ASP.NET 那样依赖 .Net？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T21:01:23.567

不，只有 Visual Studio IDE 依赖于 .NET，而不是你用它编写的 C++ 程序。

（当然，除非您使用 .NET 库。）

# solr - Solr“开始于”和“短语”索引

> ID：14326543
> 
> 赞同：0
> 
> 时间：2013-01-14T20:59:33.003
> 
> 标签：solr, indexing

我正在尝试创建一个索引，该索引允许我基于单个单词和部分短语的“开头”进行查询。

例如，给定文本“ `blah blah stuff couple blue drums blah more blah`”（注意这基本上是使用复制字段对记录进行全文搜索），我希望能够匹配以下内容：

*   凑
*   夫妻
*   情侣蓝
*   蓝色的情侣
*   蓝鼓
*   蓝色德鲁

它不应该匹配“一对鼓”的查询。

我尝试使用“text_general”类型，但它不执行部分单词查询，例如“cou”。

```
<fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <!-- in this example, we will only use synonyms at query time
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
    -->
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.StandardTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType> 
```

我还尝试了一个边缘 ngram 过滤器，但它并没有按照我的需要做短语，例如，一个`text:'couple drums'`返回结果为 'couple' 或 'drums' 的查询。

```
<fieldType name="fulltext2" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <tokenizer class="solr.LowerCaseTokenizerFactory"/>
    <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="30" side="front"/>
  </analyzer>
  <analyzer type="query">
    <tokenizer class="solr.LowerCaseTokenizerFactory"/>
  </analyzer>
</fieldType> 
```

是否有标记器和过滤器的组合可以完成我想要做的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:20:16.677

如果您的输入实际上是一个词组，那么使用 Lucene 的词组搜索将排除像 Coupledrums 之类的查询**（**除非您的输入包括“coupledrums”作为词组）。

您可能还想查看[Stupid Lucene Tricks: Exact Match, Starts With, Ends With](http://blogs.perl.org/users/mark_leighton_fisher/2012/01/stupid-lucene-tricks-exact-match-starts-with-ends-with.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-19T13:44:37.903

我认为您需要[在 eDismax](https://issues.apache.org/jira/browse/SOLR-3925)补丁中使用 Expose SpanFirst 构建 solr-core。

# scheme - 为什么这个表达式给我一个函数体错误？

> ID：14326551
> 
> 赞同：1
> 
> 时间：2013-01-14T21:00:22.847
> 
> 标签：scheme, racket, racket-student-languages

```
(define (subtract-1 n)
  (string-append "Number is: " (number->string n))
  (cond
    [(= n 0) "All done!"]
    [else (subtract-1(- n 1))])) 
```

我不断收到错误：**define: 只期望函数体有一个表达式，但发现了 1 个额外的部分。**我不明白为什么我会得到这个。

**注意事项：**使用 DrRacket 时，将语言设置为 BSL 可能会使 Racket 命令在编译时出错。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:29:09.370

您使用的语言（BSL）仅允许在过程主体中使用单个表达式，如果有多个表达式，则需要将它们打包在[`begin`](http://docs.racket-lang.org/reference/begin.html).

另请注意，该`string-append`行什么也不做，您应该打印它或累积它。这是一个可能的解决方案，其中包含我的建议：

```
(define (subtract-1 n)
  (begin
    (display (string-append "Number is: " (number->string n) "\n"))
    (cond
      [(= n 0) "All done!"]
      [else (subtract-1 (- n 1))]))) 
```

更好的是，[`printf`](http://docs.racket-lang.org/reference/Writing.html#%28def._%28%28quote._~23~25kernel%29._printf%29%29)为了简单起见，使用该过程：

```
(define (subtract-1 n)
  (begin
    (printf "~a ~s~n" "Number is:" n)
    (cond
      [(= n 0) "All done!"]
      [else (subtract-1 (- n 1))]))) 
```

无论哪种方式，示例执行都如下所示：

```
(subtract-1 3)
=> Number is: 3
=> Number is: 2
=> Number is: 1
=> Number is: 0
=> "All done!" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:33:58.777

球拍文档（[Sequencing](http://docs.racket-lang.org/guide/begin.html#%28part._.Effects_.Before__begin%29)）似乎建议您可能需要使用 begin 表达式才能使其工作，或者它可能是`(subtract-1(- n 1))`函数名称和参数之间缺少空格。

此外，您可能想要输出结果， `string-append`因为它实际上并没有按原样做任何事情。涵盖所有这些要点的示例：

```
(define (subtract-1 n)
    (begin
        (write (string-append "Number is: " (number->string n)))
        (cond
            [(= n 0) "All done!"]
            [else (subtract-1 (- n 1))]))) 
```

# asp.net - 如何基于泛型对象显示动态html

> ID：14326553
> 
> 赞同：0
> 
> 时间：2013-01-14T21:00:27.427
> 
> 标签：asp.net, vb.net

我创建了一个类，它可以包含一个对象的多个实例，所有的数据都存储在会话中。直到运行时我才知道有多少实例。显示此动态数据的最佳方法是什么。我使用带有代码的 aspx，所以我认为它需要在加载子中发生。

如果它有帮助，继承类，它在 VB 中，但在 c# 中的答案很好：

```
Imports System.Web.HttpContext

Public Class Student

    Public Property SchoolId As Integer
    Public Property Grade As Integer
    Public Property StudentName As String

    Public Sub AttachToSession(StudentToBeAdded As Student)

        Dim StudentList As New List(Of Student)

        If (Current.Session("student") Is Nothing) Then

            StudentList.Add(StudentToBeAdded)
            Current.Session("student") = StudentList

        Else

            StudentList = Current.Session("student")
            StudentList.Add(StudentToBeAdded)
            Current.Session("student") = StudentList

        End If

    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:08:12.917

您可以使用[GridView](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.aspx)控件来显示学生信息

标记

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="True">
</asp:GridView> 
```

在您的代码中

```
 Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load

    If Not IsPostBack Then
        GridView1.DataSource = CType(Session("student"), List(Of Student))
        GridView1.DataBind()
    End If

 End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:16:39.970

或者，如果你想要一个自定义的外观和感觉，你可以尝试这样的事情（在你的 aspx 页面中）：

```
<% For Each l_student As Student In CType( Session( "student" ), List(Of Student) ) %>
    <div>
        <p>Name: <%= l_student.StudentName %></p>
        <p>Grade: <%= l_student.Grade %></p>
    </div>
<% Next %> 
```

这将为学生收藏中的每个项目创建一个“div”元素。

请参阅：[.NET Framework 中的 ASP.NET 内联表达式简介](http://support.microsoft.com/kb/976112?wa=wsignin1.0)

不过，您最好在学生班级中创建共享属性：

```
Public Shared ReadOnly Property Students As List(Of Student)
    Get
        Dim l_studentList As List(Of Student) = TryCast( Current.Session("student"), List(Of Student) )
        If l_studentList Is Nothing Then
            l_studentList = New List(Of Student)
            Current.Session("student") = l_studentList
        End If

        Return l_studentList
    End Get
End Property 
```

那么你的 aspx 将是：

```
<% For Each l_student As Student In Student.Students %>
... 
```

# android - 如何获得允许的 SMS 最大长度？

> ID：14326556
> 
> 赞同：1
> 
> 时间：2013-01-14T21:00:32.933
> 
> 标签：android, sms

我正在编写一个 Android APK 来通过 SMS 管理 GPS 跟踪器。我的软件有一个特殊的通知部分，可以解码设备通过 SMS 消息发送的所有警报。问题是一些电话公司对 SMS 长度使用不同的限制，所以我的代码由于消息被截断而失败。我测试了三个不同的本地公司，其中一些使用 140 个字符，而另一些使用 70 个字符。我的问题...是否有任何可靠的方法来获取该参数？我已经阅读了所有 SDK 文档，除了明显的常量 MAX_USER_DATA_BYTES 之外没有发现任何类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T14:50:48.200

由于这是一个非常复杂的问题，需要将标准和协议的不同部分拼凑在一起，我决定将我找到的所有信息发布给像我这样需要解决这个问题的人。

所有检查都应直接在 PDU 数据中完成，访问位和字节，在 SmsMessage 中使用`getPdu()`或直接从SMS`PDU`中的 Bundle 访问数组。`onReceive()``BroadcastReceiver`

首先，我们需要检查两件事来检测多部分短信：

1.  的存在`IDH`，位 6 in`PDU_TYPE`
2.  中存在多部分指示符，信息`IDH`的第二个字节`UDH`

在检测到多部分消息后，我们需要通过检查 CSMS 标识符、部分数量和部分索引来识别属于同一多部分的消息。

```
/**
 * EXAMPLE OF A PDU 
 *
 * 07 length of SMSC info in bytes
 * 91 type of address
 * 551218317600 SMSC address (variable size)
 * 04 PDU_TYPE to check for IDH embedded test bit 6  0=not UDH  1=has UDH
 * 0B address length in nibbles, here is 11 nibbles so its 6 bytes
 * 81 address type
 * 1089920478F1 sender number (variable size)
 * 00 TP-PID
 * 08 TP-DCS
 * 31105161225188  TP-SCTS  timestamp
 * 38  TP-UDL user data length
 * [USER DATA STARTS HERE] When UDH info is embedded, starts in first
 *                         bytes of user data
 * 
 * EXAMPLE OF UDH for 8 bit CSMS reference (unique number, indicates
 * parts belong to same message)
 *
 * 05 UDH length in bytes
 * 00 For multipart 8 bits CSMS it is 00, for 16bits CSMS it is 08
 * 03 length of header
 * 48 CSMS reference number, this identify SMSs that belong
 *                           to same multi-part
 * 02 total parts of this sequence (in this case, 2 parts)
 * 02 sequence number (in this case, 2 of 2)
 *
 *
 * EXAMPLE OF UDH for 16 bit CSMS reference (unique number, indicates
 * parts belong to same message)
 *
 * 06 UDH length in bytes
 * 00 For multipart 8 bits CSMS it is 00, for 16bits CSMS it is 08
 * 04 length of header
 * 4823 16 bits CSMS reference number, this identify SMSs that belong
 *                                     to the same multi-part
 * 02 total parts of this sequence (in this case, 2 parts)
 * 01 sequence number (in this case, 1 of 2)
 * 
 */

// SOME HELPERS TO CHECK FOR MULTIPART INSIDE PDU

private final byte UDH_BITMASK = 0x60;
private final byte MULTIPART_8BITSEQ = 0x00;
private final byte MULTIPART_16BITSEQ = 0x08;

private final int TP_ADDLENGTH_LEN=1;
private final int TP_ADDTYPE_LEN=1;
private final int TP_PID_LEN=1;
private final int TP_DCS_LEN=1;
private final int TP_SCTS_LEN=7;
private final int TP_UDL_LEN=1;

/**
 * Check if this PDU message is multi part
 * @param pdu
 * @return
 */
private boolean isMultiPart(byte[] pdu)
{
    // get length of first part+1 SMSC index to PDU type
    int idx= pdu[0]+TP_ADDLENGTH_LEN;

    if((pdu[idx] & UDH_BITMASK) != 0) // has UDH ??
    {
        // 00=length of UDH  01=type
        int udataidx = getUserDataIndex(pdu);
        if( (pdu[udataidx+1] == MULTIPART_8BITSEQ)
         || (pdu[udataidx+1] == MULTIPART_16BITSEQ))
            return true;
    }

    return false;
}

/**
 * Return index for user data part. Used to retrieve UDH info
 * @param pdu
 * @return
 */
private int getUserDataIndex(byte[] pdu)
{
    // get index to  ADDRESS length
    int idx=pdu[0]+ TP_ADDLENGTH_LEN + TP_ADDTYPE_LEN;

    // get length in nibbles
    int oalength = pdu[idx];

    // convert to bytes with padding for odd values
    int oalengthinbytes = (oalength + 1) / 2;
    return(idx + TP_ADDLENGTH_LEN + TP_ADDTYPE_LEN + oalengthinbytes +
            TP_PID_LEN + TP_DCS_LEN +  TP_SCTS_LEN + TP_UDL_LEN);
} 
```

# file - 在列表框中显示文本文件内容的最快方法

> ID：14326557
> 
> 赞同：0
> 
> 时间：2013-01-14T21:00:39.683
> 
> 标签：file, text, listbox, loading, show

在列表框中加载和显示大型文本文件（+/- 50.000 行）内容的最快方法是什么？

我正在使用：listBox1.DataSource = File.ReadAllLines(filePath);

是否有另一个控件可以比列表框更快地加载如此大的文件（可以选择行）？

这是在另一个线程或后台工作人员中执行 File.ReadAllLines(filePath) 的最佳方法吗？

先感谢您！

**更新 2：** 如果应用程序正在加载文件，则 GUI 冻结。如果我在不同的线程中加载文件并不重要。如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:05:51.607

Windows 窗体 RichTextBox 控件可以显示纯文本、Unicode 纯文本或富文本格式 (RTF) 文件。为此，请调用 LoadFile 方法。您还可以使用 LoadFile 方法从流中加载数据。有关详细信息，请参阅 LoadFile(Stream, RichTextBoxStreamType)。

将文件加载到 RichTextBox 控件中

```
private void btnOpenFile_Click(object sender, System.EventArgs e)
{
   if(openFileDialog1.ShowDialog() == DialogResult.OK)
   {
     richTextBox1.LoadFile(openFileDialog1.FileName, RichTextBoxStreamType.RichText);
   }
} 
```

上面的示例使用了 windows 窗体的富文本框控件。如果您需要网络示例，我也可以展示。

# javascript - 没有在 jsfiddle 上看到代码，只有结果

> ID：14326559
> 
> 赞同：2
> 
> 时间：2013-01-14T21:00:41.427
> 
> 标签：javascript, jsfiddle

我一直在查看 jsfiddle 在此处发布的其他问题，但由于某种原因，我只能看到结果而不是代码

起初，这似乎是随机发生的，但现在似乎相当一致

JSfiddle 如何在没有任何代码的情况下呈现结果？

我不确定实际发生了什么。但我在 Firefox 和 chrome 中看到了这一点。这是最新的例子[http://jsfiddle.net/vikikamath/QU6WP/1/](http://jsfiddle.net/vikikamath/QU6WP/1/)

感谢您的任何见解

如果我看不到那个 jsfiddle，我会问的强制性代码

```
<div id="graphcontent">
            <strong></strong>
        </div>
        <div id="subcontent" class="line">Open Requests<div id="count">13</div></div>
        <div id="subcontent" class="line_completed">Completed Requests</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T21:08:11.783

jsFiddle 最近（实际上是很久以前）切换到新设计，而旧设计（由浏览器缓存）停止工作（CSS、HTML 和 javascript 都显示空白框架）。

如果您看到一个蓝色图标（旧图标；新图标是黑色的）和带有渐变的工具栏（新图标只是用于按钮的单色矩形），是时候重新加载了。不是普通的重载，需要`CTRL`+`F5`或`CTRL`++`SHIFT``R`

# vb.net - 使用 ScriptManager.RegisterStartupScript 时的奇怪功能

> ID：14326562
> 
> 赞同：0
> 
> 时间：2013-01-14T21:00:46.807
> 
> 标签：vb.net

我在使用 ScriptManager.RegisterStartupScript 时遇到了这个奇怪的问题。基本上，当我单击按钮控件时，我想要完成的是，它会返回服务器，检查是否有任何错误，而**我想要发生**的是，如果有任何错误，想要使用弹出框。按钮控件位于更新面板内。我认为完成此操作的最简单方法是使用 javascript 警报框。所以我终于让它工作了，但是当警报框出现时，它会弄乱我的菜单控件，直到警报框出现，然后就可以了。这有点难以解释，所以我插入了一张图片，向你们展示单击按钮后发生的事情。如果有人能指出我正确的方向，我不知道如何解决或发生了什么。他也是我正在使用的代码。![在此处输入图像描述](../Images/8607d47c2800aa45107f8f4b86dc9831.png)

```
 Protected Sub btnPlan_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnPlan.Click

 'Dim sb As New System.Text.StringBuilder
  sb.Append("<script language='javascript'>")
  sb.Append("alert(' No data in the database  ');")
  sb.Append("</script>")

    If (Not ClientScript.IsStartupScriptRegistered("JSScript")) Then
        ScriptManager.RegisterStartupScript(UpdatePanel5, Me.GetType(), "JSScript", sb.toString(), True)
    End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:16:57.073

您可以尝试使用 RegisterClientScriptBlock：

```
Protected Overrides Sub Page_Load(ByVal sender as Object, ByVal e As System.EventArgs)
     MyBase.Page_Load(sender, e)

     Try
         If Not ScriptManager.IsInAsyncPostBack Then
              Page.ClientScript.RegisterClientScriptBlock(Me.GetType(), "AlertScript", "<script type='text/javascript' language='javascript'>function YourAlert(){alert(' No data in the database  ');}</script>")
         EndIf
     Catch ex As Exception
     End Try
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:45:17.837

感谢您的所有建议。我以不同的方式对其进行了剥皮，并让它按照我想要的方式工作。我所做的是将消息放在隐藏的文本框中，并使用 jquery 来确保页面已经加载，然后在需要时提醒消息。

# android - 同时有两个操作栏（底部和向上）？

> ID：14326565
> 
> 赞同：9
> 
> 时间：2013-01-14T21:00:52.427
> 
> 标签：android, android-actionbar, actionbarsherlock, android-custom-view

我需要制作两个动作条，顺便说一下，我正在使用 actionBarSherlock。所以我需要的是在正常的操作栏上放一个“欢迎屏幕”切换，并添加两个正常的 ActionBar 操作选项。与我需要的 Gmail 和地图类似：http: [//cdn.androidcommunity.com/wp-content/uploads/2012/03/Screenshot_2012-03-28-12-58-16.png](http://cdn.androidcommunity.com/wp-content/uploads/2012/03/Screenshot_2012-03-28-12-58-16.png)（他们没有允许我发布一个声誉低的图像，请参阅链接）

这个地图应用程序有一个上下操作栏，正是我所需要的，因为一旦我达到可以添加第二个操作栏的地步，我就知道从哪里开始......

关于这个话题我已经搜索了大约一周，我发现了一些类似的问题，但是我没有理解答案；答案是关于我（完全不）熟悉的自定义视图，我无法理解任何事情，但是是的，我试图从我认为正确的任何内容中制作“自定义视图”，但我得到了我没有的 crrassshheesss '没有找到任何解决方案......如果你可以给我看一个例子，这个地图应用程序是如何使用这两个操作栏的？（我不想像在 maps 和 gmail 中那样导航，但只有两个操作栏）

这是我的一些代码：

```
//Part of my MainActivity.class
public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu) {
        MenuInflater inf = getSupportMenuInflater();
        inf.inflate(R.menu.upper_navbar, menu);

        final String name = "welcome";
        final SharedPreferences pref = getSharedPreferences(name, 0);
        final Editor edit = pref.edit();
        boolean oldState = pref.getBoolean("w", true);
        ToggleButton tog = (ToggleButton) menu.findItem(R.id.welcome_screen).getActionView();
        if(oldState){
            tog.setChecked(true);

        }else{
            tog.setChecked(false);
        }

        tog.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
                if(isChecked){
                    edit.putBoolean("w", true);
                    edit.apply();
                }else{
                    edit.putBoolean("w", false);
                    edit.apply();
                }

            }
        });
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {

    return super.onOptionsItemSelected(item);
    } 
```

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="seaskyways.editpad"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="16" />

    <application
        android:allowBackup="true"
        android:name="android.app.Application"
        android:icon="@drawable/ic_launcher"
        android:uiOptions="splitActionBarWhenNarrow"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="seaskyways.editpad.MainActivity"
            android:label="MainActivity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="seaskyways.editpad.Splash"
            android:theme="@style/Theme.Sherlock.Dialog.NoActionBar"

            android:label="Splash" >
            <intent-filter>
                <action android:name="android.intent.action.SPLASH" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

还有我打算把它们放在我的操作栏中的菜单......

菜单\activity_main.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item android:id="@+id/bottom_copy"  android:title="Copy" android:orderInCategory="3" android:showAsAction="ifRoom|withText" />
    <item android:id="@+id/bottom_paste" android:title="Paste" android:orderInCategory="2" android:showAsAction="ifRoom|withText" />

</menu> 
```

menu\upper_navbar.xml（应该将其命名为upper_actionbar，但这只是一个思维错误，毕竟它是一个名字，：/请继续）

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

     <item
        android:id="@+id/welcome_screen"
        android:orderInCategory="1"
        android:showAsAction="ifRoom|withText"
        android:title="Welcome Screen"
        android:actionLayout="@layout/toggle"

        />

</menu> 
```

如果您需要更多信息，请告诉我，我会告诉您，毕竟它是为我和其他所有人服务的！

***编辑 ！！！：***我发现了一个非常接近我的问题的例子，wifi设置（ [http://omgdroid.com/wp-content/uploads/2012/07/Screenshot_2012-07-06-01-34-29-576x1024.png](http://omgdroid.com/wp-content/uploads/2012/07/Screenshot_2012-07-06-01-34-29-576x1024.png)）它使用普通操作栏中的开关和普通的拆分操作栏向下！正是我需要的！

***编辑 2 !!!!*** ：这是我的 Galaxy nexus 使用基于 aosp 的自定义 ROM 的屏幕截图，这正是我需要和意思的：

设置-Wifi：[https ://lh4.googleusercontent.com/-aeL_sHjIcQQ/UPVptGQiuqI/AAAAAAAAAGE/UGc-CuLP4Qw/s512/Screenshot_2013-01-15-16-36-32.png](https://lh4.googleusercontent.com/-aeL_sHjIcQQ/UPVptGQiuqI/AAAAAAAAAGE/UGc-CuLP4Qw/s512/Screenshot_2013-01-15-16-36-32.png)

设置-蓝牙：lh3*googleusercontent.com/-4j6ca1Nm1VI/UPVqAiDn_PI/AAAAAAAAAGM/LLB2ILWVjQY/s512/Screenshot_2013-01-15-16-38-14.png

***编辑 3 !!!*** ：我对蓝牙和Wifi的调查取得了很大的进展，正如我所说和问过的，它们是真正的actionbars！看看我在设置-蓝牙中得到了什么：

BluetoothSettings.class/onCreateOptionsMenu ：

```
@Override
    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {
        if (mLocalAdapter == null) return;
        boolean bluetoothIsEnabled = mLocalAdapter.getBluetoothState() == BluetoothAdapter.STATE_ON;
        boolean isDiscovering = mLocalAdapter.isDiscovering();
        int textId = isDiscovering ? R.string.bluetooth_searching_for_devices :
            R.string.bluetooth_search_for_devices;
        menu.add(Menu.NONE, MENU_ID_SCAN, 0, textId)
                .setEnabled(bluetoothIsEnabled && !isDiscovering)
                .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
        menu.add(Menu.NONE, MENU_ID_RENAME_DEVICE, 0, R.string.bluetooth_rename_device)
                .setEnabled(bluetoothIsEnabled)
                .setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER);
        menu.add(Menu.NONE, MENU_ID_VISIBILITY_TIMEOUT, 0, R.string.bluetooth_visibility_timeout)
                .setEnabled(bluetoothIsEnabled)
                .setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER);
        menu.add(Menu.NONE, MENU_ID_SHOW_RECEIVED, 0, R.string.bluetooth_show_received_files)
                .setShowAsAction(MenuItem.SHOW_AS_ACTION_NEVER);
        super.onCreateOptionsMenu(menu, inflater);
    } 
```

这些可以是选项清楚地显示在 splitActionBarDown 与确切的属性 up ...

现在 ：

BluetoothSettings.class/addPreferencesForActivity ：

```
@Override
    void addPreferencesForActivity() {
        addPreferencesFromResource(R.xml.bluetooth_settings);

        Activity activity = getActivity();

        Switch actionBarSwitch = new Switch(activity);

        if (activity instanceof PreferenceActivity) {
            PreferenceActivity preferenceActivity = (PreferenceActivity) activity;
            if (preferenceActivity.onIsHidingHeaders() || !preferenceActivity.onIsMultiPane()) {
                final int padding = activity.getResources().getDimensionPixelSize(
                        R.dimen.action_bar_switch_padding);
                actionBarSwitch.setPadding(0, 0, padding, 0);
                activity.getActionBar().setDisplayOptions(ActionBar.DISPLAY_SHOW_CUSTOM,
                        ActionBar.DISPLAY_SHOW_CUSTOM);
                activity.getActionBar().setCustomView(actionBarSwitch, new ActionBar.LayoutParams(
                        ActionBar.LayoutParams.WRAP_CONTENT,
                        ActionBar.LayoutParams.WRAP_CONTENT,
                        Gravity.CENTER_VERTICAL | Gravity.END));
            }
        }

        mBluetoothEnabler = new BluetoothEnabler(activity, actionBarSwitch);

        setHasOptionsMenu(true);
    } 
```

注意到这个类没有扩展 Activity ，它`extends DeviceListPreferenceFragment`......

现在我们知道**可以**同时拥有两个操作栏（拆分和正常），我们需要一种方法来简化它，也许是通过一个类或库？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:08:05.067

那是一个[拆分操作栏](http://developer.android.com/guide/topics/ui/actionbar.html)。它适用于屏幕宽度为 400dp< 的手机设备< 要启用拆分操作栏，只需添加`uiOptions="splitActionBarWhenNarrow"`到您的或清单元素。

编辑：第二张图片确实不是拆分操作栏。这些只是具有 buttonBarButtonStyle 属性的按钮。在这里看看[这个](https://stackoverflow.com/questions/8855791/how-to-create-standard-borderless-buttons-like-in-the-design-guidline-mentioned)。

**编辑：**

`splitActionBarWhenNarrow`已被[弃用](http://commonsware.com/blog/2014/11/18/android-5p0-deprecation-splitactionbarwhennarrow.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:26:51.277

> 我需要制作两个动作栏

然后你就靠你自己了。这在 Android 或 ActionBarSherlock 中不受支持，除了您关闭的拆分操作栏。

> 类似于我需要的是 Gmail 和地图，就像这里

那是一个拆分操作栏，特别是使用叠加层的操作栏。[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/ActionBar/Overlay)演示了这种技术。

> 这个地图应用程序有一个上下操作栏，正是我需要的

然后通过`android:uiOptions="splitActionBarWhenNarrow"`在您的`<activity>`元素中使用拆分操作栏，就像地图一样。主要的地图活动使用`android:uiOptions="splitActionBarWhenNarrow"`.

> 如果您可以向我展示这个地图应用程序的示例，它是如何使用这两个操作栏的？

如上所述，[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/ActionBar/Overlay)演示了这种技术。

> 我知道如何制作一个动作栏（拆分和正常）

地图正在使用拆分操作栏。

> 但我需要同时制作它们，这样我就可以拥有两个操作栏！

在您的屏幕截图中，您会注意到地图有一个拆分操作栏，并且它们都同时出现在屏幕上。这是在狭窄情况下拆分操作栏的工作方式。当屏幕目前不窄时，相同的地图应用程序不会显示拆分操作栏。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-15T15:59:04.697

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="18" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" 
```

//这是主线

```
 android:uiOptions="splitActionBarWhenNarrow"  

     >
    <activity
        android:name="com.example.androidactionbarbottam.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

这是底部的主线

android:uiOptions="splitActionBarWhenNarrow"

# ios - 检测 UILabel 文本的变化

> ID：14326566
> 
> 赞同：9
> 
> 时间：2013-01-14T21:00:55.270
> 
> 标签：ios, xcode, uilabel, nsnotificationcenter

是否可以为 UILabel 的文本属性更改时设置通知？当我找不到用于 UILabel 的那个时，我尝试了用于 UITextFields 的那个，但它没有用。

```
 [[NSNotificationCenter defaultCenter]
 addObserver:self
 selector:@selector(posttosocial)
 name:UITextFieldTextDidChangeNotification
 object:nowplaying]; 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-14T22:02:26.967

您可以使用键值观察 (KVO)：

```
[label addObserver:self
        forKeyPath:@"text"
           options:NSKeyValueObservingOptionNew
                 | NSKeyValueObservingOptionOld
           context:NULL];

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{
    if ([keyPath isEqualToString:@"text"]) {
        /* etc. */
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-06T09:04:39.630

**对于 Swift 3.2+**

```
let observation = label.observe(\UILabel.text, options: [.new, .old]) { label, change in
        print("\(change.newValue as? String ?? "" )")
    } 
```

`observation.invalidate()`观察完毕就打电话。

# java - 在服务层和控制器中访问 spring 用户 - Spring 3.2 的任何更新？

> ID：14326567
> 
> 赞同：5
> 
> 时间：2013-01-14T21:01:04.143
> 
> 标签：java, spring, spring-mvc

我想访问当前登录的用户我这样做（从静态方法）

```
public static User getCurrentUser() {

final Object principal = SecurityContextHolder.getContext().getAuthentication().getPrincipal();

if (principal instanceof User) {
  return (User) principal;
  }
} 
```

或像这样注入和铸造：

```
@RequestMapping(value = "/Foo/{id}", method = RequestMethod.GET)
public ModelAndView getFoo(@PathVariable Long id, Principal principal) {
        User user = (User) ((Authentication) principal).getPrincipal();
.. 
```

在用户实现 userdetails 的地方，两者似乎都有些蹩脚，在 Spring 3.2 中有更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T21:35:26.933

我不认为它`spring 3.2`为此目的有什么新东西。您是否考虑过使用自定义注释？

像这样的东西：

带有自定义注释的控制器：

```
@Controller
public class FooController {

    @RequestMapping(value="/foo/bar", method=RequestMethod.GET)
    public String fooAction(@LoggedUser User user) {
        System.out.print.println(user.getName());
        return "foo";
    }
} 
```

LoggedUser 注释：

```
@Target(ElementType.PARAMETER)
@Retention(RententionPolicy.RUNTIME)
@Documented
public @interface LoggedUser {} 
```

WebArgumentResolver ：

```
public class LoggedUserWebArgumentResolver implements WebArgumentResolver {

    public Object resolveArgument(MethodParameter methodParameter, NativeWebRequest webRequest) {
        Annotation[] annotations = methodParameter.getParameterAnnotations();

        if (methodParameter.getParameterType().equals(User.class)) {
            for (Annotation annotation : annotations) {
                if (LoggedUser.class.isInstance(annotation)) {
                    Principal principal = webRequest.getUserPrincipal();
                    return (User)((Authentication) principal).getPrincipal();
                }
            }
        }
        return WebArgumentResolver.UNRESOLVED;
    }
} 
```

豆类配置：

```
<bean id="loggedUserResolver" class="com.package.LoggedUserWebArgumentResolver" />
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter">
    <property name="customArgumentResolver" ref="loggedUserResolver" />
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-03T19:28:37.090

我创建了一个与您的静态方法非常相似的方法，但是将它放在一个新的 spring bean 中并将该 bean 注入到控制器（或其他层的对象）中，我需要在其中获取有关用户的信息。这样我就避免了测试依赖于静态的代码的困难，并且所有与 SecurityContext 混淆的代码都很好地封装到我的 bean 中（就像你在静态中一样）

# emacs - 在 3 窗口设置中调用 ipython 编译时，如何强制 emacs 使用底部窗口而不是底部窗口

> ID：14326568
> 
> 赞同：2
> 
> 时间：2013-01-14T21:01:04.760
> 
> 标签：emacs, buffer, ipython, python-mode

所以我有一个 3 帧设置的 emacs 窗口设置：

```
;  +-----------------------+            
;  |           |           |    
;  |           |           |   
;  +-----------------------+  
;  |                       |  
;  |                       |     
;  +-----------------------+ 
```

两个源位于左上方和右上方窗口，而 ipython 控制台位于底部窗口。每当我从左上角的源调用 ipython 评估缓冲区命令时，控制台会重新显示在右侧窗口中，覆盖我的另一个源，后者显示在底部窗口中。简而言之，控制台和右上角的源有效地交换了窗口。

这里提出了一个类似但不完全正确的问题： [如何在 Emacs 23 中将编译缓冲区放在底部而不是右侧？](https://stackoverflow.com/questions/966191/how-can-i-get-the-compilation-buffer-on-the-bottom-rather-than-on-the-right-in-e)

我想要发生的是在它们各自的窗口中保留项目的原始位置。

我正在使用 python 模式 6.0.10。

尝试 (setq split-width-threshold nil) 得到了不希望的结果：控制台确实停留在底部窗口，但右上角的窗口被删除，从而将设置减少为简单的水平分割。

emacs compile 和 latex-compile 似乎避免了这个问题，所以我猜这是 python 模式的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T15:09:36.087

TIMTOWTDI，但我会在 a 中使用 python 编译函数制作我自己的 defun`save-window-excursion`并重新绑定键绑定以调用我的版本。我不知道 python-mode compile 命令是什么，所以你可能需要`py-execute-buffer`用任何你想要的替换。

```
(defun keep-my-window-config-compile () 
  (interactive)
  (save-window-excursion (py-execute-buffer)))

(global-set-key (kbd "C-c C-c") 'keep-my-window-config-compile) 
```

[http://www.gnu.org/software/emacs/manual/html_node/elisp/Window-Configurations.html](http://www.gnu.org/software/emacs/manual/html_node/elisp/Window-Configurations.html)

# php - Wordpress 3.5 查询分页无法正常工作

> ID：14326570
> 
> 赞同：0
> 
> 时间：2013-01-14T21:01:14.450
> 
> 标签：php, wordpress, pagination

我正在使用 Wordpress 和一个静态主页和一个帖子页面来显示我位于此处的所有新闻帖子：http: [//www.bigideaadv.com/uptous/?page_id=13](http://www.bigideaadv.com/uptous/?page_id=13)

分页仅适用于第 1 页和第 2 页。第 3 页会导致错误。此外，如果我尝试添加更多帖子，则分页不会超过三页。

有人有想法吗？

帖子查询要遵循：

```
 $posts = query_posts($query_string.'&orderby=title&order=asc&posts_per_page=4&paged='.$paged); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:37:24.260

这是一种无需任何插件即可进行分页的简单方法：

```
global $wp_query;
$big = 999999999; // need an unlikely integer
echo paginate_links( array(
  'base' => str_replace( $big, '%#%', get_pagenum_link( $big ) ),
  'format' => '?paged=%#%',
  'current' => max( 1, get_query_var('paged') ),
  'total' => $wp_query->max_num_pages
) ); 
```

把它放在你的 index.php 中，它应该可以工作！

# r - 在绘图的空白处打印 data.frame

> ID：14326573
> 
> 赞同：2
> 
> 时间：2013-01-14T21:01:16.167
> 
> 标签：r, plot

我希望将 的输出`print(df.to.print)`打印在绘图上。如果我可以在调用 `legend(...) 时将位置放置在`topleft`或`topright`类似位置，那就太好了，但这只是一个奖励。

一些代码：

```
# A data.frame to play with
df.to.print <- structure(list(p.val = c(0.05, 0.1), self = c(0.0498, 0.0997), 
    H2007.REML = c(0, 0.01), H2007.ref = c(0, 0)), .Names = c("p.val", 
"self", "H2007.REML", "H2007.ref"), row.names = c(NA, -2L), class = "data.frame")

# A simple plot
plot(1)
text(1,1, df.to.print )
# All of the entries are overlapping

# I can insert newlines easily enough
plot(1)
text(1,1, paste(as.character(df.to.print), collapse='\n'))

# But that looses all of the nice formatting in the data.frame.
# Which is easy enough to get on the console with: 
print(df.to.print)

# Bonus points for 'topleft', 'topright', etc. like in legend(). 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-14T21:23:28.053

尝试这个：

```
plot(1)
text(0.6,1, paste(capture.output(df.to.print), collapse='\n'), pos=4, family="monospace") 
```

`pos=4`将文本放置在指定坐标的右侧，并保持左对齐。也尝试使用固定间距字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:24:47.173

我所知道的两个执行类似操作`addtable2plot`的函数来自**plotrix**包，可用于基本 R 图形，以及`grid.table`来自**gridExtra**包，可用于网格图形（即 ggplot/lattice）。

至于我是如何找到它们的：我花了很多时间回答关于 SO 的问题，以便在 R 上做得更好，在这个过程中，我发现“在 R 上做得更好”通常等同于“在 R 上做得更好”在文档中找到答案”。

**sos**包是一个好的开始。

# c++ - C++ 中的类前向声明

> ID：14326577
> 
> 赞同：1
> 
> 时间：2013-01-14T21:01:30.020
> 
> 标签：c++

如何正确转发声明类？如果我尝试这个，它不会编译：

```
#include<iostream>
#include<conio.h>

class B ;

class A
{
    public:
    B returnB()
    {
        return B() ;
    }
} ;

class B
{
    public:
    A returnA()
    {
        return A() ;
    }
} ;

int main(void)
{

    getch() ;
    return 0 ;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:06:50.517

有时在某些情况下，您必须在类之外定义函数：

```
class B;

class A
{
public:
    B returnB();
};

class B
{
public:
    A returnA();
};

B A::returnB()
{
    return B();
}

A B::returnA()
{
    return A();
} 
```

通常定义（实现）放在一个单独的 *.cpp 文件中。如果它在标题中，那么它必须是`inline`.

# linq - 是否可以将 Linq 查询从一个数据模型映射到不同数据模型的查询？

> ID：14326586
> 
> 赞同：0
> 
> 时间：2013-01-14T21:02:02.627
> 
> 标签：linq, entity-framework, odata

我想为我的应用程序提供一个 OData 接口。我看到的示例使用 EF 将 LINQ 查询映射到 SQL 查询。

恕我直言，这种方法几乎向世界公开了物理数据库模型（我知道 EF/NH 提供了一些灵活性，但它是有限的）。

我希望能够做的事情如下：

1.  通过一些 DTO 定义我的数据合同。
2.  拥有一个 OData 服务，可以让用户查询我的数据合同 Dto。
3.  有一些翻译层将 DTO 上的查询转换为查询，例如 EF 模型或 NH。
4.  执行翻译后的查询。
5.  将结果映射回我的数据合同。

我是疯了还是有解决这个问题的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T15:35:37.127

我有 2 个模型，“合同”模型和“持久”模型。持久化模型是实体框架映射到的。返回 IQueryable 的 Get 方法返回一个 IQueryable，它类似于以下内容：

```
return dbContext.PersistedCustomers.Select(x => new Customer(Name = x.OtherName, ...)); 
```

至少在使用 DbContext 而不是 ObjectContext 时，基于合同模型的 Where 标准会自动转换为 PersistedModel 的 Where 标准，以针对数据库执行。希望两者之间的差异不会那么复杂，以至于您需要一些奇怪的数据按摩。我敢肯定它的逆转是有限度的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T15:38:36.950

一种方法是创建一个代表您的模型的 ViewModel，然后使用[AutoMapper](http://automapper.org/)在它们之间进行映射。你可以这样使用：

```
 var address = _Context.Addresses.Where(p => p.AddressID == addressID).Single();
   AddressVM result = Mapper.Map<AddressVM>(address); 
```

# javascript - 使用Javascript从没有id的特定表格单元格中获取href

> ID：14326588
> 
> 赞同：-1
> 
> 时间：2013-01-14T21:02:13.717
> 
> 标签：javascript, hyperlink, html-table, cell

我是 Javascript 初学者。我有一个表格，最后一列的每个单元格都有链接。我需要遍历每个单元格并更改该单元格中的 href 的 onclick 功能。最初，我不知道 hrefs 的 id，所以我不能使用 id 来引用它们。一个单元格中只有一个链接。我不想使用 jQuery

这是细胞的样子：

```
<td><a title="my title text" id="cell_id" href="#" class="someclass">Anchor</a></td> 
```

根据下面的答案，我尝试构建这样的东西：

```
for (var i = 0 ;i<tbl.rows.length-1; i++) {
             tbl.rows[i].lastChild.getElementsByTagName("a")[0].innerHTML="X1";
    } 
```

但这不起作用。错误是：

> 未捕获的类型错误：对象 #<Text> 没有方法“getElementsByTagName”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:15:55.903

如果您可以使用 JQuery，则可以这样完成：

```
$('table tr td:last-child').each(function(){
  $(this).find('a').attr('href', 'NEW_HREF');
}); 
```

这将选择每行中的最后一个 'td' 并在其中找到 a 元素并将 href 替换为您放置的任何内容来代替 'NEW_HREF'

您需要包含 jQuery，这可以通过将以下内容插入页面部分来完成：

```
<script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:06:18.533

如果单元格内有“a”元素，请尝试此操作

```
document.getElementsByTagName("a")[0].getAttribute("href"); 
```

或者如果你想设置属性

```
document.getElementsByTagName("a")[0].setAttribute("href", "somelink.com"); 
```

像这样的东西可能会起作用..它很难提供帮助，因为您没有提供一些代码来知道您要做什么

```
var links = document.querySelector("table tr td:last-child");

for (var i = 0; i < links.length; i++)
{
   links[i].setAttribute("href", "somelink.com");
} 
```

# android - HTML/CSS/JScript 应用程序与 Objective-c 或 Java 应用程序

> ID：14326593
> 
> 赞同：-1
> 
> 时间：2013-01-14T21:02:43.893
> 
> 标签：android, ios, mobile

我正在尝试确定从长远来看，哪些类型的应用程序会更好。我知道用 HTML/CSS 开发应用程序可以在所有不同的操作系统上使用，但我觉得它们不像真正的 Objective-C 或 Java 应用程序那样可靠。

我希望我正在制作的应用程序能够获得大量用户活动，所以我想要能够承受所有压力的东西。

大家可以提出一些想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:14:51.643

当我构建比测验游戏或简单的高音应用程序更大的东西时，我使用 Java，仅仅是因为 Java 中的原型设计更容易，因为它是一种比 JavaScript 更丰富的语言。

但这也取决于您正在开发什么类型的应用程序，以及您计划使用哪些技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:14:52.933

这是非常具体的情况。

> 我知道用 HTML/CSS 开发应用程序可以在所有不同的操作系统上使用

那是真实的。移动设备可以简单地在 Web 浏览器中查看您的应用程序。发布应用程序的新版本也更容易，因为您只需执行一次。

> 但我觉得它们不像真正的 Objective-C 或 Java 应用程序那样可靠。

定义可靠？您的网络应用程序显然需要互联网才能查看，但我个人认为可靠性主要取决于应用程序编写的好坏，而与语言无关。

> 大家可以提出一些想法吗

创建本机应用程序（用 java 或 obj-c 编写）的主要优点是能够访问手机的硬件和功能。如果您的应用程序不需要获取数据或与手机进行强烈交互，那么 Web 应用程序就足够了。这将在很大程度上取决于您的要求。如果您希望在多个平台上使用，编写 Web 应用程序会更容易。

# java - woodstox 跳过部分 xml

> ID：14326598
> 
> 赞同：3
> 
> 时间：2013-01-14T21:03:15.180
> 
> 标签：java, xml, xml-parsing, woodstox

爪哇：1.6
伍德斯托克斯：4.1.4

我只想在解析时跳过部分 xml 文件。让我们看一下那个简单的xml：

```
<family>
    <mom>
        <data height="160"/>
    </mom>
    <dad>
        <data height="175"/>
    </dad>
</family> 
```

我只想跳过爸爸元素。所以看起来像使用如下所示的 skipElement 方法是一个好主意：

```
FileInputStream fis = ...;
XMLStreamReader2 xmlsr = (XMLStreamReader2) xmlif.createXMLStreamReader(fis);

String currentElementName = null;
while(xmlsr.hasNext()){

    int eventType = xmlsr.next();

    switch(eventType){

        case (XMLEvent2.START_ELEMENT):
            currentElementName = xmlsr.getName().toString();

            if("dad".equals(currentElementName) == true){
                logger.info("isStartElement: " + xmlsr.isStartElement());
                logger.info("Element BEGIN: " + currentElementName);
                xmlsr.skipElement();
            }

                    ...
    }
} 
```

我们只是找到元素爸爸的开始，然后跳过它。但不是那么快，因为会抛出异常。这是输出：

```
isStartElement: true
Element BEGIN: dad
Exception in thread "main" java.lang.IllegalStateException: Current state not START_ELEMENT 
```

这不是预期的。这确实很意外，因为方法 skipElement 是在 START_ELEMENT 状态下执行的。我不知道发生了什么，也许你知道更多:)。所以请帮助我。

提前感谢
休伯特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:42:24.053

我在库路径上使用woodstox-core-lgpl-4.1.4.jar、stax2-api-3.1.1.jar 在java 1.6（jdk1.6.0_30）中尝试了这个。我的java文件是这样的：

```
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;

import javax.xml.stream.XMLInputFactory;
import javax.xml.stream.XMLStreamException;

import org.codehaus.stax2.XMLStreamReader2;
import org.codehaus.stax2.evt.XMLEvent2;

public class Skip {

    public static void main(String[] args) throws FileNotFoundException,
            XMLStreamException {
        System.setProperty("javax.xml.stream.XMLInputFactory",
                "com.ctc.wstx.stax.WstxInputFactory");
        System.setProperty("javax.xml.stream.XMLOutputFactory",
                "com.ctc.wstx.stax.WstxOutputFactory");
        System.setProperty("javax.xml.stream.XMLEventFactory",
                "com.ctc.wstx.stax.WstxEventFactory");

        FileInputStream fis = new FileInputStream(new File("family.xml"));
        XMLInputFactory xmlif = XMLInputFactory.newFactory();
        XMLStreamReader2 xmlsr = (XMLStreamReader2) xmlif
                .createXMLStreamReader(fis);

        String currentElementName = null;
        while (xmlsr.hasNext()) {

            int eventType = xmlsr.next();

            switch (eventType) {

            case (XMLEvent2.START_ELEMENT):
                currentElementName = xmlsr.getName().toString();

                if ("dad".equals(currentElementName) == true) {
                    System.out.println("isStartElement: "
                            + xmlsr.isStartElement());
                    System.out.println("Element BEGIN: " + currentElementName);
                    xmlsr.skipElement();
                }
                else {
                    System.out.println(currentElementName);
                }

            }
        }
    }
} 
```

奇迹般有效。输出是

```
family
mom
data
isStartElement: true
Element BEGIN: dad 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T21:56:56.173

由于 Woodstox 是符合 StAX (JSR-173) 的解析器，您可以使用 StAX`StreamFilter`排除与某些元素对应的事件。我更喜欢这种方法，这样您就可以将过滤逻辑与应用程序逻辑分开。

**演示**

```
import javax.xml.stream.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        XMLInputFactory xif = XMLInputFactory.newFactory();
        StreamSource xml = new StreamSource("src/forum14326598/input.xml");
        XMLStreamReader xsr = xif.createXMLStreamReader(xml);
        xsr = xif.createFilteredReader(xsr, new StreamFilter() {

            private boolean accept = true;

            @Override
            public boolean accept(XMLStreamReader reader) {
                if((reader.isStartElement() || reader.isEndElement()) && "dad".equals(reader.getLocalName())) {
                    accept = !accept;
                    return false;
                } else {
                    return accept;
                }
            }

        });

        while(xsr.hasNext()) {
            if(xsr.isStartElement()) {
                System.out.println("start: " + xsr.getLocalName());
            } else if(xsr.isCharacters()) {
                if(xsr.getText().trim().length() > 0) {
                    System.out.println("chars: " + xsr.getText());
                }
            } else if(xsr.isEndElement()) {
                System.out.println("end: " + xsr.getLocalName());
            }
            xsr.next();
        }
    }

} 
```

**输出**

```
start: family
start: mom
start: data
end: data
end: mom
end: family 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T15:07:20.863

我找到了我得到 IllegalStateException 的原因。非常有用的是flup的回答。非常感谢。
Blaise 给出的答案也值得一读。

但要切入问题的核心。问题不在于 skipElement() 方法本身。该问题是由用于读取属性的方法引起的。我的问题中有三个点（...）。那么让我们看看那里有什么：

```
switch(eventType){

case (XMLEvent2.START_ELEMENT):
    currentElementName = xmlsr.getName().toString();
    logger.info("currentElementName: " + currentElementName);

    if("dad".equals(currentElementName) == true){
        logger.info("isStartElement: " + xmlsr.isStartElement());
        logger.info("Element BEGIN: " + currentElementName);
        xmlsr.skipElement();
    }

    case (XMLEvent2.ATTRIBUTE):
        int attributeCount = xmlsr.getAttributeCount(); 
        ...
        break;

} 
```

重要的事情。START_ELEMENT 没有中断语句。因此，每次 START_ELEMENT 事件发生时，也会执行事件 ATTRIBUTE 的代码。根据 Java Docs，这看起来不错，因为方法 getAttributeCount()、getAttributeValue() 等可以为 START_ELEMENT 和 ATTRIBUTE 执行。

但是在调用方法skipElement() 之后，事件START_ELEMENT 更改为END_ELEMENT。因此不允许调用方法 getAttributeCount()。此调用是引发 IllegalStateException 的原因。

避免该异常的最简单方法是在调用 skipElement() 方法后调用 break 语句。在这种情况下，获取属性的代码将不会被执行，因此不会抛出异常。

```
 if("dad".equals(currentElementName) == true){
            logger.info("isStartElement: " + xmlsr.isStartElement());
            logger.info("Element BEGIN: " + currentElementName);
            xmlsr.skipElement();
            break;                  //the cure for IllegalStateException
        } 
```

很抱歉，由于隐藏了太多代码，我没有机会回答我原来的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T21:13:40.530

看起来方法 xmlsr.skipElement() 是必须使用 XMLEvent2.START_ELEMENT 事件的方法。而且由于您已经使用了它（xmlsr.next()），因此该方法会引发错误。

# ruby - rspec 中的 fake_time += 60 是什么意思？

> ID：14326603
> 
> 赞同：0
> 
> 时间：2013-01-14T21:03:34.833
> 
> 标签：ruby, rspec

我正在阅读有关使用“时间”的 rspec 教程。有人可以解释以下代码的含义吗？

```
it "takes exactly 1 second to run a block that sleeps for 1 second (with stubs)" do
  fake_time = @eleven_am
  Time.stub(:now) { fake_time }
  elapsed_time = measure do
    fake_time += 60  # adds one minute to fake_time
  end
  elapsed_time.should == 60
end 
```

我知道它假设需要 60 秒，但从技术上讲，我只是在 time 变量中添加 60 秒`fake_time`，这应该是瞬时的。为什么需要 60 秒？

`measure`这是我编写的函数代码。假设测量运行一段代码需要多长时间。

```
def measure
  m1 = Time.now
  num.times { yield }
  m2 = Time.now
  m2 - m1
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:09:29.743

此测试使用基本[存根](http://rubydoc.info/gems/rspec-mocks/frames)。它不会使该方法花费额外的时间 - 它只是修改将由`Time.now`. 这对于测试以确保在“已经过去”一定时间后返回预期值很有用。

# javascript - 防止每个img在jQuery中受到影响

> ID：14326604
> 
> 赞同：0
> 
> 时间：2013-01-14T21:03:40.480
> 
> 标签：javascript, jquery, jquery-ui

当用户滑动 jQuery Slider 时，它会影响每个图像。如何只更改与该滑块有关的图像？

我试过了： `$(this).closest('img.down')`和`$(this).siblings('img.down')`

```
$("#slider").slider({
  value:50,
  min: 0,
  max: 100,
  step: 50,
  slide: function( event, ui ) {
    $('img.up, img.down').css('opacity','.4');
    if (ui.value >= 51) {
      $('img.up').css('opacity','.8');
    }
    if (ui.value <= 49) {
      $('img.down').css('opacity','.8');
    }
  }
}); 
```

[在这里提琴](http://jsfiddle.net/psybJ/5/)

多谢你们！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:16:40.933

您需要更改标记，***页面中不能有三个具有相同 id 的项目***。你可以做到

```
class="slider" 
```

将 CSS 的初始化移到函数之外，然后遍历标记以获取正确的图像：

```
$('img.up, img.down').css('opacity','.4');
$(".slider").slider({
  value:50,
  min: 0,
  max: 100,
  step: 50,
  slide: function( event, ui ) {
  if (ui.value == 50) {
      $(this).parent().find('img.up, img.down').css('opacity','.4');
  }
  if (ui.value >= 51) {
      $(this).parent().find('img.up').css('opacity','.8');
  }
  if (ui.value <= 49) {
      $(this).parent().find('img.down').css('opacity','.8');
  }
}
}); 
```

[http://jsfiddle.net/psybJ/9/](http://jsfiddle.net/psybJ/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:07:03.037

`siblings`对我来说很好：http: [//jsfiddle.net/psybJ/8/](http://jsfiddle.net/psybJ/8/)

```
$("#slider").slider({
    value: 50,
    min: 0,
    max: 100,
    step: 50,
    slide: function(event, ui) {
        $(this).siblings('img.up, img.down').css('opacity', '.4');
        if(ui.value >= 51) {
            $(this).siblings('img.up').css('opacity', '.8');
        }
        if(ui.value <= 49) {
            $(this).siblings('img.down').css('opacity', '.8');
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:23:06.400

您确实应该将滑块的“id”替换为“class”。如果你这样做，那么这段代码就可以正常工作：

```
$(".slider").slider({
  value:50,
  min: 0,
  max: 100,
  step: 50,
  slide: function( event, ui ) {
    var parent = $(this).parent();
    if (ui.value >= 51) {
      $('img.up',parent).css('opacity','.8');
      $('img.down',parent).css('opacity','.4');
    }
    else if (ui.value <= 49) {
      $('img.down',parent).css('opacity','.8');
      $('img.up',parent).css('opacity','.4');
    }
  }
}); 
```

# binary - 在 TCL 中转换泰克的 RIBinary 数据

> ID：14326605
> 
> 赞同：1
> 
> 时间：2013-01-14T21:03:47.817
> 
> 标签：binary, type-conversion, tcl

我正在使用 TCL 脚本从 Tektronix 的 RIBinary 格式的 Tektronix 示波器中提取数据，然后在脚本中我需要将其转换为十进制值。

首先，我在二进制转换方面做得很少，但更让我感到沮丧的是，在我看来，关于这种二进制格式的文档也很模糊。无论如何，这是我当前的代码：

```
proc ::Scope::CaptureWaveform {VisaAlias Channel} {
    # Apply scope settings
    ::VISA::Write $VisaAlias "*WAI"
    ::VISA::Write $VisaAlias "DATa:STARt 1"
    ::VISA::Write $VisaAlias "DATa:STOP 4000"
    ::VISA::Write $VisaAlias "DATa:ENCdg RIBinary"
    ::VISA::Write $VisaAlias "DATa:SOUrce $Channel"

    # Download waveform
    set RIBinaryWaveform [::VISA::Query $VisaAlias "CURVe?"]

    # Parse out leading label from scope output
    set RIBinaryWaveform [string range $RIBinaryWaveform 11 end]

    # Convert binary data to a binary string usable by TCL
    binary scan $RIBinaryWaveform "I*" TCLBinaryWaveform
    set TCLBinaryWaveform

    # Convert binary data to list
} 
```

现在，此代码从机器中提取以下数据：

-1064723993 -486674282 50109321 -6337556 70678 8459972 143470359 1046714383 1082560884 1042711231 1074910212 1057300801 1061457453 1079313832 1066305613 1059935120 1068139252 1066053580 1065228329 1062213553

这就是我只获取常规 ASCII 数据时机器拉取的结果（即转换后的上述数据应该是什么样子）：

-1064723968 -486674272 50109320 -6337556 70678 8459972 143470352 1046714368 1082560896 1042711232 1074910208 1057300800 1061457472 1079313792 1066305600 1059935104 1068139264 1066053568 1065228352 1062213568

最后，这里引用了泰克的 RIBinary 规范，因为我认为它不是标准数据类型：

[http://www.tek.com/support/faqs/how-binary-data-represented-tektronix-oscilloscopes](http://www.tek.com/support/faqs/how-binary-data-represented-tektronix-oscilloscopes)

我一直在 Tektronix 网站上寻找有关转换数据的更多信息，上面的 URL 是我能找到的所有信息，但如果我发现任何更多信息，我会评论或编辑这篇文章可能有用。

*更新*

*   答案不一定必须在 TCL 中。如果有人可以帮助我在逻辑上从高层次上解决这个问题，我可以整理出 TCL 的详细信息（我认为这对其他人也更有帮助）
*   我需要以二进制形式传输数据然后进行转换的原因是为了优化。因此，我不能让设备在传输之前执行转换，因为它会减慢过程。
*   我更新了一些代码，现在我的结果非常接近实际结果。我认为这可能与最初数据中的逗号有关。
*   下面是从设备发送的原始数据的示例，无需我进行任何解析。
*   根据@kostix 的建议，我用他给我的代码制作了第二个脚本，我修改了它以适应我的数据集。它可以在下面看到，但是结果与我上面的代码完全相同。

`ASCIi`：

> ：曲线-1064723968，-486674272,50109320，-6337556,70678,8459972,143470352,1046714368,1082560896,1042711232,1074910208,1057300800,1061457472,1079313792,1066305600,1059935104,1068139264,1066053568,1065228352,1062213568

肋骨：

:CURVE #280ÀçâýðüÿKì

关于 RIBinary 的注意事项 - ":CURVE #280" 是我需要解析的所有标头的一部分，但其中的 #280 部分可能会因我收集的数据而异。以下是泰克关于#280 含义的更多信息：

> block 是二进制格式的波形数据。波形格式如下： # 其中是 y 字节数。例如，如果 = 500，则 = 3\. 是要传输的字节数，包括校验和。

所以，对于我当前的数据集 x = 2 和 yyy = 80。我真的不熟悉转换二进制数据，所以我不确定如何以编程方式处理块格式。

根据@kostix 的建议，我用他给我的代码制作了第二个脚本，我修改了它以适合我的数据集：

```
set RIBinaryWaveform [::VISA::Query ${VisaAlias} "CURVe?"]

binary scan $RIBinaryWaveform a8a curv nbytes

encoding convertfrom ascii ${curv}

scan $nbytes %u n

set n

set headerlen [expr {$n + 9}]

binary scan $RIBinaryWaveform @9a$n nbytes

scan $nbytes %u n

set n

set numints [expr {$n / 4}]

binary scan $RIBinaryWaveform @${headerlen}I${numints} data

set data 
```

此代码的输出与我上面提供的代码相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T23:19:49.373

我对这些东西没有经验，但喜欢用谷歌搜索。这是我的发现。

[本文档](http://www.ni.com/pdf/manuals/370423a.pdf)在标题为“格式化 I/O 操作”的部分中告诉`viQueryf()`标准 C API 函数结合`viPrintf()`（写入设备）和`viScanf()`（从设备读取），示例包括类似调用`viQueryf (io, ":CURV?\n", "%#b", &totalPoints, rdBuffer);`（参见 «IEEE-488.2 Binary数据—“%b”»），其中函数的第三个参数指定所需的格式。

您的 Tcl 库中的`VISA::Query`过程在我看来非常相似`viQueryf()`，因此我希望它接受第三个（可选）参数，该参数指定*您*希望数据采用的格式。

如果没有类似的东西，让我们看看你的 ASCII 数据。您的常见问题解答条目和我找到的文档都指定不透明数据可能以一系列不同大小和字节序的整数的形式出现。“RIBinary”格式声明它应该是大端有符号整数。

Tcl 命令能够从字节流中`binary scan`扫描 16 位和 32 位大端整数——相应地使用`S*`和`I*`格式。

您的 ASCII 数据显然看起来像 32 位整数，所以我会尝试使用`I*`.

另请参阅[此文档](http://www.ni.com/white-paper/4727/en)- 它似乎与我上面链接的 PDF 指南有很多共同点，但无论如何可能很方便。

TL;博士

*   尝试研究您的 API 以找到一种方法来明确告诉设备您想要的数据格式。如果设备可能以某种方式在外部重新配置以更改其默认数据格式，这可能会产生更强大的解决方案，从而有效地将依赖于某些（猜测的）默认值的代码拉到脚下。
*   尝试按照上面概述的方式解释数据，看看解释是否合理。

PS这可能根本没有任何意义，但我找不到任何在“CURV”和“？”之间有“e”的例子。在调用`viQueryf()`.

*更新*（2013-01-17，根据有关数据格式的新发现）：对于`binary scan`不同类型的数据，您可能会采用两种技术：

*   `binary scan`连续接受尽可能多的说明符，你喜欢；`binary scan`它们在读取提供的数据时从左到右进行处理。
*   `binary scan`您可以通过切割该块的片段（字符串操作 Tcl 命令了解它们正在对字节数组进行操作并相应地执行）或使用格式字符串中的`@offset`术语来对二进制数据块执行多次ning`binary scan`从指定的偏移量开始扫描。

另一个值得在这里使用的技巧是，你最好先用一个玩具例子来训练自己。这最好在交互式 Tcl shell 中完成——这[`tkcon`](http://tkcon.sf.net)是最好的选择，但`tclsh`也可以，尤其是通过调用时`rlwrap`（仅限 POSIX 系统）。

例如，您可以像这样为自己创建一个假数据：

```
% set b [encoding convertto ascii ":CURVE #224"]
:CURVE #224
% append b [binary format S* [list 0 1 2 -3 4 -5 6 7 -8 9 10 -11]]
:CURVE #224............ 
```

在这里，我们首先创建了一个包含标头的字节数组，然后创建了另一个包含 12 个 16 位整数的字节数组，首先打包了 MSB，然后将其附加到第一个数组，本质上创建了一个我们的设备应该返回的数据块（嗯，有更少比设备返回的整数）。[`encoding convertto`](http://www.tcl.tk/man/tcl8.5/TclCmd/encoding.htm)接受字符编码的名称和字符串，并生成转换为指定编码的字符串的二进制数组。`binary format`被告知使用任意大小的列表（`*`在格式列表中）并将其解释为要以大端格式（`S`格式字符）打包的 16 位整数列表。

现在我们可以像这样扫描它：

```
% binary scan $b a8a curv nbytes
2
% encoding convertfrom ascii $curv
:CURVE #
% scan $nbytes %u n
1
% set n
2
% set headerlen [expr {$n + 9}]
11
% binary scan $b @9a$n nbytes
1
% scan $nbytes %u n
1
% set n
24
% set numints [expr {$n / 2}]
12
% binary scan $b @${headerlen}S${numints} data
1
% set data
0 1 2 -3 4 -5 6 7 -8 9 10 -11 
```

在这里，我们是这样进行的：

1.  解释标题：

    1.  将数据的前 8 个字节读取为 ASCII 字符 ( `a8`) — 这应该读取我们的`:CURVE #`前缀。我们使用`encoding convertfrom`.
    2.  使用命令读取下一个字节 ( `a`)，然后将其解释为下一个字段的长度（以字节为单位）[`scan`](http://www.tcl.tk/man/tcl8.5/TclCmd/scan.htm)。

        然后我们计算到目前为止读取的标头的长度以供以后使用。这个值被保存到“headerlen”变量中。标头的长度等于 9 个固定字节加上可变数量的字节（在我们的例子中为 2 个）指定以下数据的长度。

    3.  读取将被解释为“数据字节数”值的下一个字段。

        为此，我们将扫描仪偏移 9（“:CURVE #2”的长度）并读取上一步获得的这么多 ASCII 字节，因此我们使用`@9a$n`格式：`$n`只是获取名为的变量的值“n”，在我们的例子中是 2。然后我们`scan`得到的值，最后得到下面原始数据的个数。

        由于我们将读取 16 位整数，而不是字节，我们将这个数字除以 2 并将结果存储到“numints”变量中。

2.  读取数据。为此，我们必须将扫描仪偏移标题的长度。我们`@${headerlen}S${numints}`用于格式字符串。Tcl`${varname}`在将字符串传递给之前扩展这些字符串，`binary scan`因此在我们的例子中，实际字符串将是`@11S12`“偏移 11 个字节，然后扫描 12 个 16 位大端整数”。

    `binary scan`将整数列表放入传递名称的变量中，因此不需要对这些整数进行额外解码。

请注意，在实际程序中，您可能应该进行某些健全性检查： * 在第一步之后检查标题的静态部分是否真的是“:CURVE #”。* 检查每次调用后的返回值，`binary scan`并`scan`检查它是否等于传递给命令的变量数（这意味着命令能够解析数据）。

另一种见解。您引用的手册说：

> 是要传输的字节数，包括校验和。

因此很可能并非所有这些数据字节都代表度量，但其中一些代表校验和。我不知道这个校验和的格式（以及长度）和算法和位置。但如果数据确实包含校验和，则无法使用`S*`. 相反，您可能会采取另一种方法：

1.  使用提取测量数据`string range`并将其保存到变量中。
2.  `binary scan`校验和字段。
3.  计算第一步得到的数据的校验和，验证。
4.  使用`binary scan`提取的数据来取回您的测量值。

校验和过程在[`tcllib`](http://tcllib.sf.net).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T23:21:59.673

根据您链接到的文档，RIBinary 是大端签名的。`binary scan $data "I*" someVar`因此，您可以使用(`I*`表示“尽可能多的大端 4 字节整数”)将二进制数据转换为整数。您对 RPBinary 使用相同的转换（如果您有的话），但是您需要通过执行将每个值切分为正的 32 位整数范围`& 0xFFFFFFFF`（假设至少 Tcl 8.5）。对于 FPBinary，使用`R*`（需要 8.5）。SRIBinary、SRPBinary 和 SFPBinary 是 little-endian 版本，您使用小写格式字符。

获得正确的转换可能需要一些实验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T22:22:29.907

```
# Download waveform
set RIBinaryWaveform [::VISA::Query ${VisaAlias} "CURVe?"]

# Extract block format data
set ResultCount [expr [string range ${RIBinaryWaveform} 2 [expr [string index${RIBinaryWaveform} 1] + 1]] / 4]

# Parse out leading label from Tektronics block format
set RIBinaryWaveform [string range ${RIBinaryWaveform} [expr [string index ${RIBinaryWaveform} 1] + 2] end]

# Convert binary data to integer values
binary scan ${RIBinaryWaveform} "I${ResultCount}" Waveform
set Waveform 
```

好的，上面的代码起到了神奇的作用。这与本页讨论的所有内容非常相似，但我认为我需要澄清二进制转换中的数字与 ASCII 中接收的数字不同的混淆。

在与泰克应用专家进行故障排除后，我们发现我在二进制转换后收到的数据（相差几位的数字）实际上是示波器捕获的真实值。

*ASCII 值错误*的原因是仪器完成二进制到 ASCII 转换的结果，然后示波器将不正确的值传递给 TCL。

所以，我们几天前就做对了。仪器只是让我循环。

# symfony - 错误 [Assetic\Exception\FilterException] Symfony Assetic with Less Css

> ID：14326606
> 
> 赞同：0
> 
> 时间：2013-01-14T21:03:47.883
> 
> 标签：symfony, less, assetic

我正在尝试配置 symfony 资产管理器来编译我的较少 css 文件并重写路径但是我收到以下错误：

```
Dumping all dev assets.
Debug mode is on.
18:51:01 [file+] C:/htdocs/site-ideiah-symfony/app/../web/css/57b3454.css
[Assetic\Exception\FilterException]
An error occurred while running:
"C:\Users\Rafael\AppData\Local\Temp\ass1C74.tmp"

Error Output:
Access Denied 
```

我的 config.yml

```
filters:
    cssrewrite: 
        apply_to: '\.(css|less)$'
    less: 
        node: [ "C:\\Program Files\\nodejs\\node.exe" ]      
        node_paths: [ "C:\\Program Files\\nodejs\\", "C:\\Program Files\\nodejs\\node_modules\\" ]
        apply_to: "\.less$" 
```

我的模板使用

```
 {% block stylesheets %}
        {% stylesheets filter='less,cssrewrite'
            '@IdeiahSiteAppBundle/Resources/public/less/style.less'
        %}
        <link href="{{ asset_url }}" type="text/css" rel="stylesheet" media="all" />
        {% endstylesheets %}
    {% endblock %} 
```

我正在使用带有 PHP 5.4.7 的 Windows 8，有谁知道我该如何修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T11:34:11.427

该`Error Output: Access Denied`消息暗示这是一个与安全相关的问题。

此安全问题可能与 1) 无法写入输出文件、2) 无法读取输入文件和/或 3) 无法执行`node`命令有关

1）运行`assetic:dump`命令的用户是否能够写入文件夹`C:/htdocs/site-ideiah-symfony/web/css/`和`57b3454.css`文件？

2) 之后`Error Output:`，assetic 还应该显示使用的输入，类似这样：

```
Input:
/*!
 * Bootstrap v2.3.1
 *
 * Copyright 2012 Twitter, Inc
 * Licensed under the Apache License v2.0
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Designed and built with all the love in the world @twitter by @mdo and @fat
 */

// Core variables and mixins
@import "variables.less"; // Modify this for custom colors, font-sizes, etc
@import "mixins.less";

// CSS Reset
@import "reset.less"; 
```

您*看到*列出的任何输入吗？

3）检查用户是否`"C:\Program Files\nodejs\node.exe"`从命令行执行

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-14T15:53:13.707

我有一个类似的问题。删除 Less 并安装旧版本为我修复了它。其他解决方案之一似乎是将 symfony 升级到新版本，但我们无法这样做，因为必须使用与 centos6.5 兼容的旧版本 symfony

这有帮助：[https ://github.com/braincrafted/bootstrap-bundle/issues/217](https://github.com/braincrafted/bootstrap-bundle/issues/217)

# c# - 调用服务处理大文件

> ID：14326609
> 
> 赞同：1
> 
> 时间：2013-01-14T21:03:58.440
> 
> 标签：c#, wcf

所以我有这个 WCF 服务，它为我提供了 PDF 处理功能。现在它正在接受并返回纯字节数组（`byte[]`），但这意味着它总是将所有内容读取到内存中，即使在处理流时，它也必须将它们 ToArray() 到字节数组。问题是，这会导致内存不足和堆碎片。

我有两种选择来优化它，这样它就不会使用太多内存：

*   使用流。虽然很诱人，但我可能不得不将它保存到磁盘上以供 PDF 工具包处理。考虑到绑定数量有限以及双工流和参数数量的限制，这也是一个非常挑剔的策略。
*   来回传递 UNC 文件路径。看起来很有希望，但会使事情复杂化，因为有人需要在使用后清理文件。

在优化资源使用（内存、网络、文件系统）方面，哪种替代方案会取得最佳效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:25:00.200

这是老派，但我会选择“来回传递 UNC 文件路径”。幸运的是，我们的开发人员已经有几年使用这种方法的经验（请参阅： 1980 年左右 Unix 版本 7 中的 print spooler）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T22:40:46.790

我也会选择*UNC 文件路径选项*。在通过应用程序服务器将用户上传的文件从 Web 服务器传输到 SharePoint 时，我使用了这个。Web 服务器会将文件路径传递给应用服务器，然后应用服务器会拾取文件并将其加载到 SP。通过从 Web 服务器到应用服务器的 Web 服务调用将文件作为字节数组传递是一个更好的选择。

关于“之后有人需要清理文件”，如果您担心您的服务可能不会总是进行清理，例如如果出现异常，您可以随时制定备份计划并使用一些简单的东西，例如带有计划任务的 powershell 脚本删除应该早先删除的旧文件。

不过要考虑的一件事是文件名冲突的可能性。在我们的案例中，两个用户上传具有相同名称的单独文件是可行的，因此我们必须确保将正确的文件放入正确的 SP 文件夹中。我们通过在本地存储文件的 Web 服务器解决了这个问题，使用 GUID 名称重命名文件，然后将新名称传递给 App Server。原始文件名作为元数据发送到 App Server，以便它可以在加载到 SP 之前将文件重命名为其原始名称。

# java - 线程内调用的函数中的无限循环导致线程保持活动状态

> ID：14326611
> 
> 赞同：0
> 
> 时间：2013-01-14T21:04:07.937
> 
> 标签：java, multithreading, loops, interrupt, infinite

```
public class Ex4 extends Thread {
  boolean ans;
  boolean change=false;

  public boolean isPrime(long n, double maxTime) throws RuntimeException {
    final Thread a;
    Thread b;
    final RuntimeException e;
    final long num = n ;
    final double mtime = maxTime;
    a = new Thread(){
        public void run(){
                try{
                    ans = Ex4_tester.isPrime(num);
                    change=true;
                }
                catch ( RuntimeException exp){
                    throw exp;
                };
            }
    };
    a.start();
    try {
        sleep((long)mtime);
    } catch (InterruptedException e1) {
        e1.printStackTrace();
    }
    if(a.isAlive()){
        a.interrupt();
    }
    if(a.isInterrupted()){
        throw new RuntimeException("time for check exceeded");
    }
    return ans;
  }
} 
```

一切正常，除了有时 Ex4_tester.isPrime 进入无限循环（没关系，它应该这样做）。即使线程被中断进程继续运行并且线程实际上并没有停止的问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:09:02.807

线程被中断并不会停止它。它只是导致线程退出某些等待和睡眠状态。要让线程根据来自另一个线程的输入退出无限循环，请对循环中的 Atomic<> 进行显式检查，并让控制线程将原子变量的状态修改为线程“a”将退出循环的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:06:59.127

只有某些方法`Object.wait()`会抛出`InterruptedException`。如果您的线程不调用任何这些方法，它就不会被中断。

换句话说，您不能异步中断 Java 线程。很少有线程系统支持异步中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:09:17.733

最简单的方法是将您的线程设置为守护进程，即`a.setDaemon(true)`在启动前调用。如果这只是保持启动的线程，那将使您的进程结束。

如果您想中断线程，请阅读[此文档以了解中断方法](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#interrupt%28%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T21:18:26.460

中断需要在设计上可以安全地中断线程的点进行显式检查。如果您不执行此检查（或调用执行此检查的方法），线程将继续运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T21:10:15.773

`interrupt`方法`InterruptedException`仅在线程处于某些执行点（例如`sleep`）时才会导致。您的代码包含无效的取消政策。您应该考虑另一种停止线程的方法。

# mapquest - 如何使用 MapQuest Map API 确定地址是否无法在 JavaScript 中进行地理编码

> ID：14326613
> 
> 赞同：0
> 
> 时间：2013-01-14T21:04:18.243
> 
> 标签：mapquest

我需要对一堆地址进行地理编码，并使用 MapQuest 在地图上精确定位它们。我在用

```
geocodeAndAddLocations 
```

方法来做到这一点。我唯一的问题是我无法确定某个地址的地理编码是否失败。有谁知道如何确定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:21:55.247

我没有测试过这段代码，但根据 MapQuest API，它会是这样的：

```
map.geocodeAndAddLocations([
      {street:"555 17th St", postalCode:"80202"}
], function (response) {
    if (response.results.length == 0) { // FAILED!!!
        alert("can't geocode location");
    } else { // SUCCESS
        var location;
        for (j=0; j<response.results[i].locations.length; j++) {
            location = response.results[i].locations[j];
            alert('lat: ' + location.latLng.lat + ', lng: ' + location.latLng.lng);
        }
    }
}); 
```

但同样，拥有更多代码可以更好地了解您到底在做什么和不做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T09:36:15.463

非常简单的方法...在此 jquery ajax 中使用以下 url 进行地理编码。即使你正在使用 mapquest 这个 ajax 返回 json 对象。

```
$.getJSON("http://nominatim.openstreetmap.org/reverse?format=json&lat="+lat+"&lon="+lon+"", function(data) {

             var  loc=data.display_name;    

                }); 
```

在 url 中附加您的 lat 和 lng。如果无法获取位置详细信息，则会引发“无法进行地理编码”，因此您可以轻松解决问题。

# ruby-on-rails - 在 rspec 中运行单个规范与完整套件时不同的 ActiveRecord 关联更新行为

> ID：14326616
> 
> 赞同：2
> 
> 时间：2013-01-14T21:04:20.157
> 
> 标签：ruby-on-rails, ruby, rspec

我有一个看起来像这样的规范：

```
foo.members << bar
# test some aspect of bar which assumes its membership in foo 
```

*   当我单独运行规范时（在命令行中使用 rspec 指向文件，或者在检测到文件更改后使用保护运行整个文件或仅运行单个示例），它通过了。
*   当我运行整个测试套件时（或者整个测试套件，或者实际上只是调用整个测试套件，但使用`:focus`单个示例，以便它仍然是唯一运行的测试套件，就像上面的第一个要点一样）它失败了。

这修复了它：

```
foo.members << bar
bar.reload # <-- the fix
# test some aspect of bar which assumes its membership in foo 
```

所以出于某种原因，在第一种情况下，bar 的成员资格在内存中正确更新，而在第二种情况下则没有。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T00:03:36.700

您可能希望隔离套件中的哪个其他规范（可能有多个）正在干扰相关测试。我建议您一次只启动该文件和另一个文件的规范，继续这样做，直到找到一个使该规范失败的测试文件（这可以手动完成，也可以通过 shell 脚本完成）。一旦您隔离了干扰此规范的其他规范，请告诉我们，然后我们可以从那里开始。

作为一般规则，正如您可能知道的那样，测试应该相互独立，并且不应该相互干扰。例如，确保没有规范会删除方法或留下在数据库中创建的内容。

# google-app-engine - GAE 使用 go 刷新内存缓存

> ID：14326618
> 
> 赞同：1
> 
> 时间：2013-01-14T21:04:20.417
> 
> 标签：google-app-engine, go

有没有关于如何使用 Go 刷新谷歌应用引擎内存缓存的文档？

[我可以在 python 文档https://developers.google.com/appengine/docs/python/memcache/functions](https://developers.google.com/appengine/docs/python/memcache/functions)中看到 flush_all()

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T23:28:28.810

memcache go代码列出了一个[flush函数](http://godoc.org/code.google.com/p/appengine-go/appengine/memcache#Flush)，官方文档中没有列出。我怀疑它有效，只是没有记录。

# html - 如何使 textarea 边框与文本输入边框相同？

> ID：14326623
> 
> 赞同：12
> 
> 时间：2013-01-14T21:04:40.350
> 
> 标签：html, css

我想让表单中的 textarea 字段与跨浏览器的文本输入字段显示相同。而且我不想强制使用自定义样式 - 我只想使用用户浏览器中的任何标准样式。

所以我知道我可以使用

```
textarea {
    border-style: inset;
    border-width: 2px;
} 
```

然后它们会在 Chrom[e,ium] 中匹配，但例如在 Firefox/Iceweasel 上它们不匹配。

那么有没有一种直接的方式可以对浏览器说“请`textarea`用你使用的任何边框渲染元素`input[type="text"]`”？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-14T21:22:40.933

提出的实际问题的答案是：不，没有办法说“让这个元素看起来像这个”。但是，您可以通过对 textarea 和输入应用相同的样式来使它们看起来一致。但是，在某些浏览器中，某些东西看起来是某种方式，并且没有办法绕过它。

```
input[type=text], textarea {
    border-style: inset;
    border-width: 2px;
} 
```

HTML5 中引入了除“文本”之外的其他输入类型。例如，“密码”、“数字”和“电子邮件”输入类型看起来像“文本”输入，但具有特殊行为。为了使它们看起来一致，您需要为 css 中的每种输入类型提供定义。

```
input[type=text], input[type=password], input[type=email], input[type=number], textarea    {
    border-style: inset;
    border-width: 2px;
} 
```

有关可能输入类型的完整列表，请[参见参考资料](http://www.w3schools.com/html/html5_form_input_types.asp)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-26T23:31:34.023

接受的答案是正确的，但现在有点过时了。作为设置边框样式、边框颜色和边框宽度的替代方法，您可以使用外观让控件保持其原始[外观](https://developer.mozilla.org/en-US/docs/Web/CSS/-moz-appearance)，并带有前缀：

```
input[type="text"],
textarea {
  -webkit-appearance: textfield;
  -moz-appearance: textfield;
  appearance: textfield;
} 
```

这将确保您的文本区域和文本字段匹配（*在一些浏览器中）。如果你喜欢 textarea 看起来更好，你可以做同样的事情，但用 value`textarea`代替。

所有使用前缀的警告都适用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:09:56.643

```
input[type=text], textarea {
    border-style: inset;
    border-width: 2px;
} 
```

# java - Java/Android 正则表达式测试字符串中是否为链接

> ID：14326625
> 
> 赞同：1
> 
> 时间：2013-01-14T21:04:46.457
> 
> 标签：java, android

```
Pattern.compile("((http\\://|https\\://|ftp\\://|sftp\\://)|(www.))+((\\S+):(\\S+)@)?+(([a-zA-Z0-9\\.-]+\\.[a-zA-Z]{2,4})|([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}))(/[a-zA-Z0-9%:/-_\\?\\.'~]*)?"); 
```

我有这种模式，我想测试我的字符串中是否有链接。我想将这些文本链接到`TextView`.

`&`当链接包含字符时，代码不起作用。

完整代码：

```
Pattern httpMatcher = Pattern.compile("((http\\://|https\\://|ftp\\://|sftp\\://)|(www.))+((\\S+):(\\S+)@)?+(([a-zA-Z0-9\\.-]+\\.[a-zA-Z]{2,4})|([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}))(/[a-zA-Z0-9%:/-_\\?\\.'~]*)?");
String httpViewURL  = "myhttp://"; 
Linkify.addLinks(label, httpMatcher, httpViewURL); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:07:57.290

我认为这比使用正则表达式更干净：

```
boolean isLink(String s) {
  try {
     new URL(s);
     return true;
  } catch (MalformedURLException e) {
     return false;
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:13:50.023

您可以使用`Patterns.WEB_URL`：

```
public boolean isLink(String string) {
    return Patterns.WEB_URL.matcher(string).matches();
} 
```

请注意，`Patterns`该类仅从 API 级别 8 开始可用，但您可以在此处获取其源代码[https://github.com/android/platform_frameworks_base/blob/master/core/java/android/util/Patterns.java](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/util/Patterns.java)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T16:15:39.827

```
Pattern httpMatcher = Pattern.compile("((http\\://|https\\://)|(www.))+((\\S+):(\\S+)@)?+(([a-zA-Z0-9\\.-]+\\.[a-zA-Z]{2,4})|([0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}))(/[a-zA-Z0-9%&#-:/-_\\?\\.'~]*)?"); 
```

这正在工作，谢谢

# c++ - 我应该如何去阅读一个大的二进制文件

> ID：14326630
> 
> 赞同：3
> 
> 时间：2013-01-14T21:05:28.310
> 
> 标签：c++, windows, binary

我有一个大型二进制文件（超过 500mb），我想读取其中的一部分并从中提取数据。我确定我不应该一次将整个文件加载到内存中，那么我怎么能只加载其中的一部分，使用十六进制偏移量呢？

我以前从来没有用过这种东西，所以我不知道从哪里开始。我想要读取和写入文件的只是文本。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:17:21.147

使用[内存映射文件。](http://msdn.microsoft.com/en-us/library/dd997372.aspx)这将允许您像处理内存中的文件一样处理文件，但它一次只能加载到内存中的一页。

# html - 理解逻辑流 Struts

> ID：14326631
> 
> 赞同：0
> 
> 时间：2013-01-14T21:05:29.510
> 
> 标签：html, jsp, struts

首先，我是 Struts 的新手，我一直在关注[这里](http://www.dzone.com/tutorials/java/struts/struts-tutorial/struts-tutorial-using-eclipse-1.html)的教程。我了解文件的设置，并且`web.xml`.

**索引.jsp**：

```
<%@ taglib uri="http://struts.apache.org/tags-logic" prefix="logic" %>
<logic:redirect forward="helloWorld"/> 
```

然而，一说到开学`index.jsp`，我就很茫然了。从`index.jsp`，它如何调用类`com.vaannila.action.HelloWorldAction`？我知道`index.jsp`调用 the ，`forward=helloWorld`但这是否意味着它在寻找 a `forward name="helloWorld"`，它在`<global-forwards>`?

让我知道如何进一步改进我的问题，因为这是我的第一个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:13:53.943

正确的; 它重定向到任何名为 forward 的东西`"helloWorld"`。

在这种情况下，这是一个前锋，它运行一个将值粘贴到表单中的动作。

您可能想要参考[Struts 1 tag docs](http://struts.apache.org/1.x/struts-taglib/index.html)，它比每次都在这里询问要快。

如果您可以避免学习 Struts 1，我会：它几乎在所有方面都过时了。Struts 2 和 Spring MVC 等框架主导了基于 Java 框架的 Web 应用程序，而 Grails、Play、Ruby on Rails 等框架主导了基于 JVM 的 Web 应用程序。

* * *

您链接到的教程中配置文件的第 17 行开始：

```
<action path="/helloWorld" 
        type="com.vaannila.action.HelloWorldAction" 
        name="helloWorldForm">
  <forward name="success" path="/helloWorld.jsp" />
</action> 
```

# pdf - PhantomJs 光栅化 - 可以从多页制作多页 pdf？

> ID：14326634
> 
> 赞同：6
> 
> 时间：2013-01-14T21:05:42.087
> 
> 标签：pdf, npm, phantomjs

我正在使用他们的 rasterize 示例脚本运行 phantom 来创建页面的单页 pdf。

我有几个不同的页面，我想将它们光栅化并连接成一个多页 pdf 文件。这是否可能与目前存在的东西一起使用，还是我必须将 pdftk 之类的工具加入其中？

（或者，是否有另一个我可以使用的节点模块 - 我找到了 pdftk-helper 但我们应该说......未完成）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-08T07:36:10.133

添加到以下您要开始新页面的位置：

```
<div style="page-break-before:always;"></div> 
```

更多信息可以在这里找到： [http ://we-love-php.blogspot.be/2012/12/create-pdf-invoices-with-html5-and-phantomjs.html](http://we-love-php.blogspot.be/2012/12/create-pdf-invoices-with-html5-and-phantomjs.html)

# sql - Django PostgreSQL 数据库 [数据竞赛？]

> ID：14326638
> 
> 赞同：1
> 
> 时间：2013-01-14T21:06:04.863
> 
> 标签：sql, django, heroku

我有一个使用 PostgreSQL 数据库插件在 Heroku 上托管的 Django 应用程序。在对首页执行 GET 请求后，我的应用程序执行 SQL 查询以提取一些必要的显示信息。我还在每个 GET 请求上使用 Popen 创建一个子进程。

但是，当我注意到 GET 请求的数量增加到大约每秒一次时，我在语句中出错了`model.objects.get(id="----")`。我得到一个 OperationalError ；我假设我在 heroku 上的免费计划跟不上，或者我的数据库跟不上。

在这种情况下，我不想离开 Heroku 的免费计划，但我想知道如果我这样做了，我需要创建更多的工人吗？升级我的数据库？有哪些方法可以诊断问题？为什么一个简单的 SQL 查询会随着请求数量增加到大约每秒一次的间隔而导致问题？这看起来合理吗？

我的 hack 解决方案就是在我捕获到 OperationalError 时让视图休眠。还有其他推荐的方法吗？

# java - 在 Eclipse 中重新启动 Java 程序

> ID：14326639
> 
> 赞同：0
> 
> 时间：2013-01-14T21:06:10.903
> 
> 标签：java, eclipse, restart

我拥有一个游戏服务器，我只是想知道，而不是在 eclipse 中运行服务器，然后当我重新启动它时，它会在 eclipse 之外打开一个新的 cmd 提示符并在其上运行服务器。我可以让它在 Eclipse 中重新启动程序，就好像我按下了绿色的播放按钮一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:36:25.940

我正在阅读您对这篇文章的评论。你说你不想杀死程序然后从eclipse中重新启动。所以你有两个选择。

1.  错误答案：只需按 ctrl + F11 （重新启动应用程序并忽略旧应用程序）
2.  好的答案：按 F11，然后转到控制台选项卡中看起来像计算机的地方。您可以选择前一个正在运行的程序并将其杀死，第二个程序仍将运行。

如果您想要做的是传输数据并使其保持相同的运行时状态，那么至少可以说这将是一些复杂的事情。我会制作某种方法来传输所有当前数据并从您的构造函数中调用它。然后启动你的第二个程序并杀死原来的程序。不过，我 90% 确定您的所有用户都会被启动。

# shopify - Shopify：是否可以通过 sku 编号查找产品？

> ID：14326640
> 
> 赞同：5
> 
> 时间：2013-01-14T21:06:10.687
> 
> 标签：shopify

我得到的数据只包含 SKU 编号。我试图弄清楚如何在没有实际产品 ID 号的情况下将这些 SKU 编号链接到 Shopify 中的产品变体。

示例数据：

```
<Inventory ItemNumber="100B3001-B-01">
    <ItemStatus Status="Avail" Quantity="0" />
  </Inventory>
  <Inventory ItemNumber="100B3001-B-02">
    <ItemStatus Status="Avail" Quantity="0" />
  </Inventory>
  <Inventory ItemNumber="100B3001-B-03">
    <ItemStatus Status="Avail" Quantity="-1" />
    <ItemStatus Status="Alloc" Quantity="1" />
  </Inventory>
  <Inventory ItemNumber="100B3001-B-04">
    <ItemStatus Status="Avail" Quantity="-1" />
    <ItemStatus Status="Alloc" Quantity="1" />
  </Inventory> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-08-08T16:53:45.427

[这是 Shopify 员工在 2011 年进行的一次令人愉快的、居高临下的讨论，](https://groups.google.com/forum/#!topic/shopify-app-discuss/fYRAdKRemvk)询问您为什么不能只将 Shopify ID 存储在任何地方。“库存单位”是一个通用的系统集成点，在我见过的每个系统中，每个 SKU 都唯一地映射到一个产品，因为单词是有意义的，但在 Shopify 显然不是。

三年后，你似乎有两种选择。

一种是创建[Fulfillment Service](http://docs.shopify.com/api/fulfillmentservice)并提供一个 URL，Shopify 将在该 URL 中向*您*询问 SKU 的库存水平；这可能是最简单的解决方案，前提是您有一个 Web 服务器位于可以公开此类回调的某个地方。

第二种是定期翻阅所有[产品](http://docs.shopify.com/api/product)并将 Shopify ID 映射到某个 SKU 的位置，当您需要更新时查阅您的地图。因为我们的大多数集成都是 cron 作业，我希望保持这种状态，所以我会定期询问自上次运行以来发生变化的产品，然后更新我的映射。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-19T08:15:59.507

正如 David Lazar 在评论中指出的那样，Shopify API 目前不支持根据 SKU 查找产品的功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-04T22:06:26.593

**编辑：**这是我曾经作为最后手段使用的不可靠选项。我不建议使用它，但我会把它留在这里，以防有人发现它有帮助。

您可以使用此 API 端点：

```
/admin/products/search.json?query=sku:abc123 
```

虽然我只在浏览器中使用过它，但我找不到任何文档。它可能随时停止工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-15T20:15:17.677

您可以使用

```
*.myshopify.com/search?view=json&q=sku:SKUID 
```

# excel - 需要计算公式

> ID：14326641
> 
> 赞同：2
> 
> 时间：2013-01-14T21:06:11.373
> 
> 标签：excel, math

如果效果更好，我需要一些数学帮助，或者一些 excel 帮助。我有一组数据点，我需要计算中间数据。下表是已知数据点，我需要知道的是，如果我输入 1200 英尺，有什么 MEG 可用。

```
FOOTAGE MEG
1000    19.3
2000    20.66
3000    21.328
4000    21.398
5000    20.976
6000    20.155
7000    19.023
8000    17.658
9000    16.133
10,000  14.513
11,000  12.854
12,000  11.208
13,000  9.617
14,000  8.117
15,000  6.736
16,000  5.493
17,000  4.411
18,000  3.487
19,000  2.724
20,000  2.114 
```

我已将这些输入到 excel 中，并着手寻找他们的图表认为可以回答我的问题的公式。他们给出的公式是

```
y = 8E-12x3 - 3E-07x2 + 0.0018x + 18.218 
```

这实际上让我在 12k 英尺以下的任何地方都能获得非常好的结果。在那之后，结果越来越不准确，直到我在 18k 英尺后开始得到负数。

我尝试输入更多订单来计算，但这只会让事情变得更糟。

将图表分成 2 个（>10k 英尺和 <10k 英尺）并使用 2 个公式会更好，还是使用整个图表有一个好的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T00:41:50.727

精度非常重要。事实上，你所做的事情有几个严重的问题。

仅仅使用一位精度的系数会导致严重的问题。请记住，x 与 20000 一样大。乘以该大小的数字将是一个巨大的数字。现在，将它乘以大约 8e-12 的数字，你会得到什么？

哦，顺便说一下，那些系数的实际值应该更接近

```
[8.38044124105504e-12  -2.95337111670131e-07  0.00176948515975282  18.2176584107327] 
```

那么这有什么不同吗？

```
8e-12*20000^3
ans =
    64

8.38044124105504e-12*20000^3
ans =
         67.0435299284403 
```

它确实有所作为，一个严重的。

您可能会选择使用简单的线性插值，但三次更平滑一些。小心外推，因为如果你尝试立方会做奇怪的事情。但事实上，三次多项式存在大量的失拟。只要您小心地将自变量（素材）除以 10000，就可以使用 4 阶多项式做得更好。

```
a4 =  -3.02325078929022
a3 =  21.0780945560741
a2 = -46.9692303618201
a1 =  26.3111163470058
a0 =  17.1162276831784

MEG = a0 + a1*footage/10000 + a2*(footage/10000)^2 +
          a3*(footage/10000)^3 + a4*(footage/10000)^4 
```

请注意按 10000 缩放的重要性（或者至少选择一个数字来转换您的数字，使它们大约为 1 左右。）

尽管在增加适合的顺序方面，我并没有超越这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:20:46.903

我可以建议您使用一个小的 VBA 脚本，它使用线性插值从您的列表中提取一个值：

```
Public Function Linterp(Tbl As Range, x As Double) As Variant
     ' linear interpolator / extrapolator
     ' Tbl is a two-column range containing known x, known y, sorted x ascending

    Dim nRow As Long
    Dim iLo As Long, iHi As Long

    nRow = Tbl.Rows.Count
    If nRow < 2 Or Tbl.Columns.Count <> 2 Then
        Linterp = CVErr(xlErrValue)
        Exit Function '-------------------------------------------------------->
    End If

    If x < Tbl(1, 1) Then ' x < xmin, extrapolate from first two entries
        iLo = 1
        iHi = 2
    ElseIf x > Tbl(nRow, 1) Then ' x > xmax, extrapolate from last two entries
        iLo = nRow - 1
        iHi = nRow
    Else
        iLo = Application.Match(x, Application.Index(Tbl, 0, 1), 1)
        If Tbl(iLo, 1) = x Then ' x is exact from table
            Linterp = Tbl(iLo, 2)
            Exit Function '---------------------------------------------------->
        Else ' x is between tabulated values, interpolate
            iHi = iLo + 1
        End If
    End If

    Linterp = Tbl(iLo, 2) + (Tbl(iHi, 2) - Tbl(iLo, 2)) * (x - Tbl(iLo, 1)) / (Tbl(iHi, 1) - Tbl(iLo, 1))     
End Function 
```

您可以使用以下内容从工作表中调用它：

```
=Linterp(A1:b10, 1200) 
```

您可以轻松地调整代码以调整您希望如何处理超出范围的值。

稍有不同的是，您可能还对这个[http://www.codecogs.com/excel_render](http://www.codecogs.com/excel_render)感兴趣，它可以绘制出您的方程式。

# python - 当我进行 GET 调用时，get_rate_status “剩余点击次数”不会减少

> ID：14326643
> 
> 赞同：3
> 
> 时间：2013-01-14T21:06:28.110
> 
> 标签：python, twitter, tweepy

我编写了一个脚本来遍历 Twitter 用户 ID 列表并将 follower_id 列表保存到文件中。我已经使用了几次，没有任何问题。对于长列表，我添加了这段代码来检查每个 GET 请求之前的速率限制，如果我即将受到速率限制，则休眠：

```
rate_limit_json = api.rate_limit_status()
 remaining_hits = rate_limit_json["remaining_hits"]
 print 'you have', remaining_hits, 'API calls remaining until next hour'
 if remaining_hits < 2:
      dtcode = datetime.utcnow()
      unixtime = calendar.timegm(dtcode.utctimetuple())
      sleeptime = rate_limit_json['reset_time_in_seconds'] - unixtime + 10
      print 'waiting ', sleeptime, 'seconds'
      time.sleep(sleeptime)
 else:
      pass 
```

我在脚本顶部设置了这个 Oauth 简介：

```
auth = tweepy.OAuthHandler('xxxx', 'xxxx')
auth.set_access_token('xxxx', 'xxxxx')
api = tweepy.API(auth) 
```

我反复打的电话是：

```
follower_cursors = tweepy.Cursor(api.followers_ids) 
```

所以现在，无论我拨打多少电话，我的“剩余点击次数”都保持在 150 次，直到 Twitter 返回“超出速率限制。客户每小时发出的请求不得超过 350 次”。

似乎速率限制检查器报告了我未经授权的 IP 地址的速率限制 (150)，但我的呼叫计入了我的应用程序的速率限制 (350)。

如何调整我的速率限制检查器以再次实际检查应用程序的速率限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-13T10:43:37.677

重复创建`Cursor`实例不会用完任何 API 报价，因为它实际上并没有向 twitter 发出请求。A`Cursor`只是围绕不同分页方法的 Tweepy 包装器。调用`next`或`prev`迭代它的方法会导致实际的 API 调用。

Twitter 不再有未经身份验证的 API 调用的概念（v1.1 API 始终需要身份验证）。我认为问题在于您使用`Cursor`. 尝试只创建一次实例，并`next`重复调用该方法（确保捕获`StopIteration`异常，就像`next`生成器一样）。

# .net - FileStream 的 .NET 问题

> ID：14326644
> 
> 赞同：0
> 
> 时间：2013-01-14T21:06:28.660
> 
> 标签：.net, vb.net, file, file-io

我正在尝试`FileStream`使用以下行从文件创建一个：

```
Dim fStream As FileStream = New FileStream(destinationPath, FileMode.Create, FileAccess.Read) 
```

当我这样做时，我收到一条错误消息

```
Combining FileMode: Create with FileAccess: Read is invalid. 
```

谁能帮我这个？

编辑：我正在尝试从文件中读取，而不是创建它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:10:29.387

`Read`访问不允许您对文件进行任何修改。创建文件算作修改。您将需要使用`Write`或`ReadWrite`访问。

编辑：当然，还有第二种情况：

如果您尝试从已存在的文件中读取，请不要使用`FileMode.Create`. 相反，使用`FileMode.Open`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T21:10:09.967

`FileAccess.Write`如果您正在尝试创建（并可能写入）文件，则使用或可能更有意义`FileAccess.ReadWrite`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:10:41.180

随着[`FileMode.Create`](http://msdn.microsoft.com/library/System.IO.FileMode.aspx)您指定要`destinationPath`创建文件（或如果它已经存在则重新创建），为您提供一个新的空文件。有了新文件，就没有要读取的数据了。您应该传递一个[`FileAccess`](http://msdn.microsoft.com/library/4z36sx0f.aspx)包含`Write`标志的值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T21:12:17.407

如果只能读取文件，如何创建文件？您需要指定您还具有对该文件的写入权限。[MSDN for FileAccess](http://msdn.microsoft.com/en-us/library/4z36sx0f)试试：

```
Dim fStream As FileStream = New FileStream(destinationPath, FileMode.Create, FileAccess.ReadWrite) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-14T21:10:19.563

因为`Create`与 相矛盾`Read`。尝试`New FileStream(destinationPath, FileMode.Create, FileAccess.ReadWrite)`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-14T21:10:38.330

错误消息说明了问题所在：当您*创建*一个新文件时，您应该*写入*它，而不是从中*读取。*当您创建一个新文件时，其中没有可读取的内容。

将第三个参数更改为`FileAccess.Write`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-14T21:15:12.653

好的，抱歉不清楚，但如前所述，我的意图是阅读文件。正确的做法是：

```
Dim fStream As FileStream = New FileStream(destinationPath, FileMode.Open, FileAccess.Read) 
```

# symfony - Symfony2 Gregwar / CaptchaBundle 致命错误

> ID：14326646
> 
> 赞同：1
> 
> 时间：2013-01-14T21:06:33.060
> 
> 标签：symfony, captcha

我做了所有步骤

```
https://github.com/Gregwar/CaptchaBundle 
```

添加到 composer.json 并更新，config.yml 启用了包但我收到致命错误

```
Fatal error: Class 'Gregwar\CaptchaBundle\GregwarCaptchaBundle' not found in /var/www/Surgery/app/AppKernel.php on line 26 Call Stack: 0.0000 228784 1\. {main}() /var/www/Surgery/web/app_dev.php:0 0.0037 1211816 2\. Symfony\Component\HttpKernel\Kernel->handle() /var/www/Surgery/web/app_dev.php:25 0.0037 1212000 3\. Symfony\Component\HttpKernel\Kernel->boot() /var/www/Surgery/app/bootstrap.php.cache:614 0.0037 1212160 4\. Symfony\Component\HttpKernel\Kernel->initializeBundles() /var/www/Surgery/app/bootstrap.php.cache:569 0.0037 1212864 5\. AppKernel->registerBundles() /var/www/Surgery/app/bootstrap.php.cache:797 
```

更新我的ubuntu后我有一些小问题。我使用 sf 2.1.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-23T04:31:55.467

我对 Symfony2.1 有同样的问题。我做了**作曲家安装**。我注意到在我的输出控制台中没有安装验证码包。我修复了 **作曲家更新的问题**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-09T17:00:25.713

万一有人碰到我的（类似于这个）问题。

我从[https://github.com/Gregwar/CaptchaBundle](https://github.com/Gregwar/CaptchaBundle)获取代码并完成所有步骤（由 下载`git clone`）。我把代码放入`\vendor\bundles\Gregwar\CaptchaBundle\`

最后当我得到一个错误

> 错误：在 D:...\app\cache\dev\appDevDebugProjectContainer.php 第 1598 行中找不到类“Gregwar\Captcha\CaptchaBuilder”

[我从https://github.com/Gregwar/Captcha/](https://github.com/Gregwar/Captcha/)下载了另一个代码并将其放入`\vendor\bundles\Gregwar\Captcha\`

一切顺利。希望这会帮助任何人

# java - 正确复数的 Java 国际化 (i18n)

> ID：14326653
> 
> 赞同：38
> 
> 时间：2013-01-14T21:06:54.277
> 
> 标签：java, internationalization, plural, messageformat

我打算将 Java 的标准 i18n 系统与 ChoiceFormat 类一起用于复数，但后来意识到它不能处理某些语言（例如波兰语）的复杂复数规则。如果它只处理类似于英语的语言，那么它似乎有点毫无意义。

有哪些选择可以实现正确的复数形式？使用它们的优点和缺点是什么？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2013-01-14T22:10:20.933

好吧，您已经正确标记了问题，所以我假设您对[ICU 有所](http://icu-project.org/)了解。

使用 ICU，您有两种选择来正确处理复数形式：

*   [PluralRules](http://icu-project.org/apiref/icu4j/com/ibm/icu/text/PluralRules.html)，它为您提供给定 Locale 的规则
*   [PluralFormat](http://icu-project.org/apiref/icu4j/com/ibm/icu/text/PluralFormat.html)，它使用上述规则来允许格式化

使用哪一个？就个人而言，我更喜欢直接使用 PluralRules，从资源包中选择适当的消息。

```
ULocale uLocale = ULocale.forLanguageTag("pl-PL");
ResourceBundle resources = ResourceBundle.getBundle( "path.to.messages",
                               uLocale.toLocale());
PluralRules pluralRules = PluralRules.forLocale(uLocale);

double[] numbers = { 0, 1, 1.5, 2, 2.5, 3, 4, 5, 5.5, 11, 12, 23 };
for (double number : numbers) { 
  String resourceKey = "some.message.plural_form." + pluralRules.select(number);
  String message = "!" + resourceKey + "!";
  try {
    message = resources.getString(resourceKey);
    System.out.println(format(message, uLocale, number));
   } catch (MissingResourceException e) { // Log this } 
} 
```

当然，您（或翻译者）需要将正确的表单添加到属性文件中，在此示例中，假设：

```
some.message.plural_form.one=Znaleziono {0} plik
some.message.plural_form.few=Znaleziono {0} pliki
some.message.plural_form.many=Znaleziono {0} plików
some.message.plural_form.other=Znaleziono {0} pliku 
```

对于其他语言（即阿拉伯语），您可能还需要使用“零”和“二”关键字，有关详细信息，请参阅[CLDR 的语言复数规则](http://cldr.unicode.org/index/cldr-spec/plural-rules)。

或者，您可以使用 PluralFormat 选择有效形式。通常的示例显示直接实例化，在我看来这完全没有意义。[与ICU 的 MessageFormat](http://icu-project.org/apiref/icu4j/com/ibm/icu/text/MessageFormat.html)一起使用更容易：

```
String pattern = "Znaleziono {0,plural,one{# plik}" +
                 "few{# pliki}" +
                 "many{# plików}" +
                 "other{# pliku}}";
MessageFormat fmt = new MessageFormat(pattern, ULocale.forLanguageTag("pl-PL"));
StringBuffer result = new StringBuffer();
FieldPosition zero = new FieldPosition(0);
double[] theNumber = { number };
fmt.format(theNumber, result, zero); 
```

当然，实际上您不会对模式字符串进行硬编码，而是在属性文件中放置如下内容：

```
some.message.pattern=Found {0,plural,one{# file}other{# files}} 
```

这种方法的唯一问题是，翻译者必须知道占位符格式。我试图在上面的代码中展示的另一个问题是，MessageFormat 的静态 format() 方法（易于使用的方法）总是为默认语言环境格式化。这在 Web 应用程序中可能是一个真正的问题，其中默认区域设置通常意味着服务器的区域设置。因此，我必须为特定的语言环境（浮点数，请注意）进行格式化，并且代码看起来相当难看......

我仍然更喜欢 PluralRules 方法，它对我来说更干净（尽管它需要使用相同的消息格式样式，只用辅助方法包装）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:21:43.290

`ChoiceFormat`，正如[这里](http://stuartgunter.wordpress.com/2011/08/09/java-i18n-pluralisation-using-choiceformat/)所解释的，它似乎足够灵活，可以处理您可能会遇到的任何类型的复数形式。

编辑：正如哈里博博士在他的评论中指出的那样，ChoiceFormat 不足以满足波兰语的多元化。但是[来自同一个博客的后续文章](http://stuartgunter.wordpress.com/2011/08/14/even-better-java-i18n-pluralisation-using-icu4j/)建议 ICU4J 处理更复杂的复数规则

# c++ - 如何在 Bullet 中找到投射光线以避免碰撞的位置？

> ID：14326654
> 
> 赞同：7
> 
> 时间：2013-01-14T21:06:56.200
> 
> 标签：c++, algorithm, path-finding, bullet, raycasting

假设我们在 A 点有一个物体。它想知道它是否可以移动到 B 点。它的速度有限，所以它只能一步一步地移动。它向其移动的方向投射光线。射线与物体碰撞，我们检测到它。如何获得一种安全地通过我们的光线（避免碰撞）的方法？

![在此处输入图像描述](../Images/63a173d6b50b25e31692c1728946e9d0.png)

顺便说一句，有没有办法在对象投射的情况下使这种事情起作用，它会像简单的光线投射一样/几乎快吗？

![在此处输入图像描述](../Images/ca76858af14e1bf02ccac7c0184f5176.png)

有没有办法在一些不同的路径中找到最优的？

![在此处输入图像描述](../Images/6e26a2fa72793ea0ac2908c22ba9f4c3.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-14T22:44:12.417

您要问的实际上是一个寻路问题；更具体地说，它是“任意角度的寻路问题”。

如果您可以将障碍物的边缘限制为网格，那么一个流行的解决方案是在该网格上使用 A*，然后应用路径平滑。但是，有一种*（相当新的）*算法，它既更易于实现/理解，又比路径平滑提供更好的结果。它被称为[Theta*](http://idm-lab.org/bib/abstracts/papers/jair10b.pdf)。

![Theta* 与路径平滑](../Images/2d5cfd01b59f124374aa96d4de862293.png)

有一篇很好的文章解释了 Theta*（我从中偷了上面的图片）[here](http://aigamedev.com/open/tutorials/theta-star-any-angle-paths/)

* * *

如果您*无法*将障碍物限制在网格中，则必须为地图生成[导航网格](http://www.ai-blog.net/archives/000152.html)：

[![导航网格](../Images/27c94141988785c0da66f8c90217160c.png)](https://i.stack.imgur.com/CExJ4.jpg)

有很多方法可以做到这一点，复杂程度各不相同；例如，请参见[此处](http://www.david-gouveia.com/pathfinding-on-a-2d-polygonal-map/)、[此处](https://gamedev.stackexchange.com/questions/31208/how-can-i-generate-a-2d-navigation-mesh-in-a-dynamic-environment-at-runtime)或[此处](https://stackoverflow.com/questions/10271022/path-finding-for-games)。快速的 google 搜索还可以找到大量可用的库来为您执行此操作，例如[this one](http://code.google.com/p/straightedge/)或[this one](http://code.google.com/p/recastnavigation/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:40:05.167

一种方法是使用一根绳子或几根绳子，其中一根绳子由几个线性连接的点组成。您可以在空间中的随机位置初始化点，但第一个点是**A**的初始位置，最后一个点是**A**的最终位置。

最初，绳索将是一条非常糟糕的路线。为了优化，沿着能量梯度移动点。在您的情况下，能量函数非常简单，即绳索的总长度。

这不是一个新想法，而是在计算机视觉中用于检测物体的边界，尽管能量函数要复杂得多。然而，看看“蛇”，让你知道如何在给定两个邻居的情况下移动每个点：[http](http://en.wikipedia.org/wiki/Snake_(computer_vision) ://en.wikipedia.org/wiki/Snake_(computer_vision )

但是，在您的情况下，只需从其邻居施加的力中为每个点得出一个方向就可以了。

您的问题是您考虑碰撞的受限问题。我真的会在这里使用@paddy 的想法来使用凸包，甚至只是为每个对象使用一个球体。在后一种情况下，考虑到您没有无限数量的点，请不要将点移动到其与**B**的距离小于**A**的半径加上**B的半径加上软糖因子的地方。**

一个有效的解决方案要求任何邻居之间的最长距离小于一个阈值，否则，两点之间的连接线将与障碍物相交。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T21:30:03.070

一个简单的方法如何开始......

如果这只是一个对象，您可以计算障碍物所有顶点的凸包，以及起点和终点。然后，您将通过顺时针和逆时针穿过船体来检查从 A 到 B 的两个方向。选择最短路径。

它有点复杂，因为你移动的形状不仅仅是一个点。你不能只是盲目地移动它的中心，否则它会发生碰撞。当它经过一个顶点时，它会变得更加复杂，因为您必须将对象的边缘擦过障碍物的顶点。

但希望这能给你一个思考的想法，这在概念上并不难理解。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-24T20:14:17.477

看待这个问题的一种方法是作为阴影投射问题。制作`A`“光源”，然后决定场景中的每个点是否在阴影中。那些不在阴影中的人可以通过来自 的光线到达`A`。其他地区则不然。如果你发现`B`在阴影中，那么你只需要找到场景中最近的光照点。

如果将此问题离散为“像素”，则上述方法在有关阴影渲染的大量计算机图形学文献中具有非常著名的解决方案。例如，您可以使用[阴影贴图](http://en.wikipedia.org/wiki/Shadow_mapping)为每个像素绘制一个布尔标志，该标志指示它是否处于阴影中。寻找最近的发光像素只是简单地搜索周围不断增长的同心圆`B`。通过利用 GPU 硬件，这两个操作都可以变得非常快。

另一个注意事项：您可以将一般对象路径查找问题视为点路径问题。秘诀是使用 Minkowski 差异“增加”适当数量的障碍。例如，参见[关于机器人路径规划的这项工作](http://faculty.cua.edu/plaku/teaching/LecRoboCSpace.pdf)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T11:17:58.557

![](../Images/3522b927d3e4b7aff201091ab905e706.png)

我制作了这张图片来告诉我将物体到达 B 点的想法。图像中的物体：- 深蓝色的点代表物体。红线是障碍。灰色的点和线是可以到达的区域。紫色箭头是 B 点的方向。对象的灰色线是可见范围。理解图像：- 对象将具有一定的可见性。这是二维情况，所以我假设能见度为 180 度。（对于人类视野，请参阅[http://en.wikipedia.org/wiki/Human_eye#Field_of_view](http://en.wikipedia.org/wiki/Human_eye#Field_of_view)) 物体将使用 SONAR 的思想来测量距离。在声纳的帮助下，物体可以找到它可以到达的区域。使用 BACKTRACKING，对象可以找到到达对象的路径。如果无路可走，则该对象必须更改其可见范围

# java - 如何在 Java 中使用调试选项进行编码

> ID：14326658
> 
> 赞同：1
> 
> 时间：2013-01-14T21:07:10.520
> 
> 标签：java

我正在尝试学习如何运行在调试标志打开时打印很多东西的代码的技巧。

这是如何在java中完成的。

我能想到的一个非常天真的方法是在我编写的所有方法中都有调试标志

并写下类似的东西

```
 if (this.debug == true){
 System.out.println("blah blah");
  } 
```

但是应该有更优雅的方式，而不是在代码中包含所有这些 if？

另外，有没有办法可以在代码中获取某些执行的行号：

例如，如果有异常

```
 try: 
```

/* 行号 22 */

```
 catch Exception e{
         //print that exception occured in above line number??
    } 
```

可能是非常蹩脚的问题。谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-14T21:08:19.980

使用可以为您完成的日志框架 - 例如：[log4j](http://logging.apache.org/log4j/1.2/)、[slf4j](http://www.slf4j.org/index.html)

**例如：**

```
log.debug("some text"); 
```

现在在日志记录配置属性文件中选择启用禁用的调试日志记录语句

**看**

*   [log4j 手册](http://logging.apache.org/log4j/1.2/manual.html)
*   [slf4j](http://www.slf4j.org/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T21:18:46.613

来自 log4j API 的简单示例

```
private Logger _debugLogger = Logger.getLogger(yourClassName.class);
//For info mode
_debugLogger.info("Some Messages");
//or for debug mode
_debugLogger.debug(MessageFormat.format("Some message {0},{1},{2}",variable0, variable1,variable2)); 
```

# c - 访问三个嵌套结构中最里面的指针成员变量

> ID：14326664
> 
> 赞同：0
> 
> 时间：2013-01-14T21:07:43.413
> 
> 标签：c

```
typedef struct {

   struct {
      double i1, i2;
   } EXP;

   struct {
      double i1, i2;
   } SIN;

   struct {
      double i1, i2;
   } PULSE;

   struct {
      double *i1, *i2;
   } PWL;
} TRANS;

struct term {
   TRANS trans;
   struct term *nxt;
};

int main() {
   struct term *look;
} 
```

我有上面的结构和指针看结构术语。有人可以告诉我如何在 struct PWL 中取消引用指针 i1 吗？

我试过这个：

```
*(look->trans.PWL.i1) 
```

但它会产生分段错误。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:18:58.783

分段错误是因为您分配了一个指针，但没有为指针指向的内存创建内存。一旦你这样做了，那么`*(look->trans.PWL.i1)`确实是如何访问内部结构中的该字段。

您需要为结构和其中的所有引用分配内存。

```
struct term *look = malloc(sizeof(struct term));
look->trans.PWL.i1 = malloc(sizeof(double));
look->trans.PWL.i2 = malloc(sizeof(double)); 
```

当然，您需要在完成时调用以反转该过程`free`。

```
free(look->trans.PWL.i2);
free(look->trans.PWL.i1);
free(look); 
```

或者，也许`i1`并且`i2`意味着指向在其他地方分配的值，那么它看起来像这样：

```
struct term *look = malloc(sizeof(struct term));
look->trans.PWL.i1 = &look->trans.EXP.i1;
look->trans.PWL.i2 = &look->trans.EXP.i2; 
```

并释放你只是 free `look`。请记住将每个成功`malloc`的呼叫与呼叫配对`free`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:22:36.520

具体到`PWL.i1`

```
int main() {
   struct term *look;                   // set up your variable
   look = malloc(sizeof(struct term));  // give it some memory
   look->trans.PWL.i1 = malloc(sizeof(double)); //give some memory to your double pointer
   *(look->trans.PWL.i1) = 5.0;         // assign it a value
   printf("%lf\n", *(look->trans.PWL.i1));
   return 0;
} 
```

因此，由于`look`是一个指向`term`结构的指针，这意味着当您访问它的元素时，您需要尊重它，然后访问成员（`->`），一旦您通过`.`运算符访问其他成员：

```
look->trans.PWL.i1 
```

在这种情况下，PWL 的`i1`成员是一个指针，因此您必须尊重整个事物才能分配一个值。（在这样做之前，您需要再次在那里分配一些内存）

当然，当你完成后释放一切。

# python - SSH - 带有 paramiko 问题的 Python

> ID：14326665
> 
> 赞同：8
> 
> 时间：2013-01-14T21:07:45.203
> 
> 标签：python, ssh, paramiko

我一直试图让它工作，但不断收到同样的错误。我试过主机的fqdn和ip。我试图通过凭据和不通过它。我查看了错误消息中指示的行。搜索谷歌，但无法弄清楚为什么这不起作用：

```
import paramiko
ssh = paramiko.SSHClient()
ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
ssh.connect('host', username='loginname')
stdin, stdout, stderr = ssh.exec_command("pwd")
stdout.readlines() 
```

错误：

```
Traceback (most recent call last):
  File "audit.py", line 7, in <module>
    ssh.connect('host', username='loginname')
  File "/usr/lib/python2.6/site-packages/paramiko/client.py", line 338, in connect
    self._auth(username, password, pkey, key_filenames, allow_agent, look_for_keys)
  File "/usr/lib/python2.6/site-packages/paramiko/client.py", line 520, in _auth
    raise SSHException('No authentication methods available') 
```

*   我可以通过 ssh 毫无问题地连接到主机。
*   ssh 版本：OpenSSH_5.3p1，OpenSSL 1.0.0-fips 2010 年 3 月 29 日
*   注意：我正在尝试创建一种在多个远程服务器上运行一系列命令的方法。我`sys import argv`用来运行诸如 之类的脚本`python audit.py host1 host2 host3`，然后该脚本将通过对那些特定主机的审计来运行。我已经创建了一个完成此任务的 bash 脚本，但我想要通过 Python 更好地执行此操作。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-03-23T16:57:20.330

您应该提供**密码**或**私钥**（或两者），否则 SSH 客户端不知道如何使用登录数据进行身份验证。

这是我的代码示例供您参考。

```
#!/usr/bin/python

from StringIO import StringIO
import paramiko 

class SshClient:
    "A wrapper of paramiko.SSHClient"
    TIMEOUT = 4

    def __init__(self, host, port, username, password, key=None, passphrase=None):
        self.username = username
        self.password = password
        self.client = paramiko.SSHClient()
        self.client.set_missing_host_key_policy(paramiko.AutoAddPolicy())
        if key is not None:
            key = paramiko.RSAKey.from_private_key(StringIO(key), password=passphrase)
        self.client.connect(host, port, username=username, password=password, pkey=key, timeout=self.TIMEOUT)

    def close(self):
        if self.client is not None:
            self.client.close()
            self.client = None

    def execute(self, command, sudo=False):
        feed_password = False
        if sudo and self.username != "root":
            command = "sudo -S -p '' %s" % command
            feed_password = self.password is not None and len(self.password) > 0
        stdin, stdout, stderr = self.client.exec_command(command)
        if feed_password:
            stdin.write(self.password + "\n")
            stdin.flush()
        return {'out': stdout.readlines(), 
                'err': stderr.readlines(),
                'retval': stdout.channel.recv_exit_status()}

if __name__ == "__main__":
    client = SshClient(host='host', port=22, username='username', password='password') 
    try:
       ret = client.execute('dmesg', sudo=True)
       print "  ".join(ret["out"]), "  E ".join(ret["err"]), ret["retval"]
    finally:
      client.close() 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-14T21:11:48.467

在 ssh.connect 之前，您需要：
`ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())`

然后你需要用 stdout.read() 做一些事情，比如：

```
print stdout.read() 
```

# web-services - 在分布式 Web 服务中保持缓存温暖

> ID：14326666
> 
> 赞同：2
> 
> 时间：2013-01-14T21:07:45.270
> 
> 标签：web-services, language-agnostic, concurrency

我一直在考虑一个可能在高负载 Web 服务中遇到的问题，在该服务中，许多进程可以处理请求，并且具有中央缓存。

问题是，当它们的值在数据库中被修改时，过期的缓存条目会对性能产生巨大的影响。如果许多请求同时请求一个刚刚过期的条目，那么每个请求都会访问数据库一次。

您可以在更新数据库时更新缓存以避免这种情况，但现在您有一个竞争条件。

你会如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:14:53.610

我自己也遇到过这种情况。这里的解决方案不是让缓存过期，而是更新它。当使用新内容更新数据库时，更新缓存。瞧，没有比赛条件。如果更新失败（或需要几秒钟），您的数据库将不会因尝试抓取未缓存的数据而受到重创，因为它将有旧的缓存可供使用。:)

**编辑：**

为了解决线程相互竞争的问题，您需要合并某种[互斥锁](http://en.wikipedia.org/wiki/Mutual_exclusion)。你自然会使用适用于你的语言的东西。

基本上，这是互斥的。

您锁定了部分逻辑，其他线程必须等待。这样可以避免数据损坏。

**这是一个例子：**

一些线程想要更​​新数据库：

1.  添加互斥锁。
2.  更新数据库。
3.  更新缓存。
4.  解锁互斥锁。

# ios - 观察发送到根视图控制器的事件通知并将它们转发给子视图控制器

> ID：14326667
> 
> 赞同：1
> 
> 时间：2013-01-14T21:07:50.183
> 
> 标签：ios, events, uitabbarcontroller, uisplitviewcontroller, uiwindow

我正在开发一个在 iOS 6 下具有`UISplitViewController`s的应用程序。`UITabBarController`

这曾经是“不，不”，但现在显然[可以了吗](https://stackoverflow.com/questions/8723163/ios-storyboard-uisplitviewcontroller-seque-to-full-screen)？

无论如何，为了使旋转正常工作，我必须将[事件](https://stackoverflow.com/questions/2734016/uisplitviewcontroller-doesnt-autorotate)从根视图控制器转发到我的子拆分视图控制器。

我目前正在为几个已知事件（willRotate...等）执行此操作。但是，拆分视图控制器的一种委托方法仍未触发。

**我的问题是**：有没有办法观察（比如在 Xcode 控制台中）发送到应用程序委托的根视图控制器的事件？我想看看如果我没有正确转发任何事件怎么办。这是否需要我子类化`UIWindow`并实现`-(void)sendEvent:(UIEvent *)event`我在哪里做类似的事情`NSLog(event)`？

**编辑：**我最终通过子类化 UISplitViewController 并强制调用委托方法来解决我的问题。我写了[一篇博客](http://objectiveseesharp.wordpress.com/2013/01/20/uisplitviewcontroller-inside-uitabbarcontroller-in-ios6/)文章详细介绍了我的解决方案。但是，我仍然没有找到一个好的方法来确定发送到根视图控制器的所有事件。

# wcf - WCF 服务间消息传递

> ID：14326678
> 
> 赞同：0
> 
> 时间：2013-01-14T21:08:33.060
> 
> 标签：wcf, message-queue, webhttpbinding, netmsmqbinding

我正在构建一个带有 2 个 WCF 服务的系统。两者都是 IIS 托管的。目前，它们都驻留在一个 VS2010 网站应用程序中，使用 Derfault 网站在我的本地 IIS7（Windows 7）上运行。我在两者上都启用了 net.tcp。

服务1

*   使用 webHttpBinding 接受 HTTP 帖子
*   将数据包装在可序列化的复合对象中
*   使用 netMsmqBinding 将复合对象发送到 Service2（我们希望）

服务2

*   收到所述消息并对其进行处理

服务 1 按预期工作，但是我们的代码不是将消息放在配置的私有队列上，而是在“传出队列”下创建一个新队列，并带有句柄

```
DIRECT=TCP:127.0.0.1\private$\Service2/Service2.svc
note the forward slash 
```

当然，Service2 永远不会看到该消息——这是我第一次尝试这种结构，所以我不确定 Service2 是否因为它的位置而错过了该消息，但根据我所读到的内容，它似乎是这样的——我没有遇到任何提及此队列创建行为的内容。

问题：

1.  我这样做是否正确（结构、web.config 或代码有问题）？

2.  在 VS Debug 中正确完成后，Service1 的

    proxy.ProcessForm(formMessage);

在我的 Service2 代码中打断点，还是有另一种方法来处理 Service2 调试（例如，ala windows 服务）？

服务 1 Web.Config

```
 <system.serviceModel>
    <bindings>
        <webHttpBinding>
            <binding name="webHttpFormBinding" crossDomainScriptAccessEnabled="true"/>
        </webHttpBinding>
        <netMsmqBinding>
            <binding name="MsmqFormMessageBindingClient" exactlyOnce="false" useActiveDirectory="false" >
                <security mode="None">
                    <message clientCredentialType="None"/>
                    <transport msmqAuthenticationMode="None" msmqProtectionLevel="None"  />
                </security>
            </binding>
        </netMsmqBinding>

    </bindings>
    <client>
        <endpoint
            name="HttpServiceWebEndpoint"
            address=""
            binding="webHttpBinding"
            bindingConfiguration="webHttpFormBinding"
            contract="Service1.HttpService.IHttpServiceWeb" />
        <endpoint name="MsmqFormMessageBindingClient"
            address="net.msmq://127.0.0.1/private/Service2/Service2.svc"
            binding="netMsmqBinding"
            contract="MyInfrastructure.IService2" />

    </client>
    <behaviors>
        <serviceBehaviors>
            <behavior>
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="true"/>

                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="false"/>
                <!--
                <serviceAuthenticationManager />
                -->
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />

</system.serviceModel> 
```

收到 HTTP Post Service1 时执行以下操作：

```
StreamReader sr = new StreamReader(formData);
string str = sr.ReadToEnd();
var t = HttpUtility.ParseQueryString(str);
Hashtable nvc = new Hashtable();
foreach (string n in t)
{
    nvc.Add(n, (string)t[n]);
}
WcfFormMessage formMessage = new WcfFormMessage(nvc);

////create the Service binding
NetMsmqBinding msmq = new NetMsmqBinding("MsmqFormMessageBindingClient");
msmq.Security.Mode = (NetMsmqSecurityMode) MsmqAuthenticationMode.None;
EndpointAddress address = new EndpointAddress("net.msmq://127.0.0.1/private/Service2/Service2.svc");
ChannelFactory<IService2> factory = new ChannelFactory<IFormService>(msmq,address);
IService2 proxy = factory.CreateChannel();
using (TransactionScope scope = new TransactionScope(TransactionScopeOption.Required))
{
    proxy.ProcessForm(formMessage);
   //do any 'sent to queue logging/updates here
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T04:14:35.220

我敢打赌，您的问题与您的配置中的 127.0.0.1 有关。在那里输入机器名称，即使它是本地的。

# javascript - 禁用和启用给定事件名称的所有事件侦听器

> ID：14326685
> 
> 赞同：1
> 
> 时间：2013-01-14T21:08:53.453
> 
> 标签：javascript, event-handling, dom-events

我正在使用一个 JS 库，它将一些 DOM 事件与它自己的事件侦听器绑定在一起。

我想要做的是，给定一个特定事件（例如`touchstart`），阻止调用库中的事件侦听器。我想要类似的东西：

```
// Maybe get some dictionary with the list of disabled events listeners
// for each element in the DOM, indexed by the elements themselves
disabledListeners = document.disableEventListenersFor('touchstart') 
```

之后，我希望能够重新启用禁用的绑定：

```
document.enableEventListenersFor('touchstart', disabledListeners); 
```

具体来说，我希望能够在应用程序中的两种模式之间来回切换：一种对所有触摸事件作出反应，另一种则不作出反应。

**编辑**：多年过去了，但我认为这个问题可能仍然很有趣。我不记得究竟是什么解决方案，但我记得，我尝试编辑库本身的（混淆的）源，每次它绑定一个侦听器时。

# android - 矩阵和动画旋转的区别

> ID：14326686
> 
> 赞同：0
> 
> 时间：2013-01-14T21:08:55.847
> 
> 标签：android

如果我想旋转图像视图。我会使用矩阵旋转还是动画旋转？会有什么区别？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:17:17.033

矩阵旋转主要用于`Canvas`应用程序，因为[矩阵类](http://developer.android.com/reference/android/graphics/Matrix.html)是“*用于转换坐标的 3x3 矩阵*” - 可以从矩形、圆形等定义。

Android 中的动画视图通常由[`Animation`API](http://developer.android.com/reference/android/view/animation/Animation.html)完成——*随它去吧*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:25:28.867

取决于目的。动画通常是一次性的，将通过执行一些预定义的动作来完成。矩阵将用于用户可能想要进行的多点触控交互。它们通常有两种不同的用途。你说的是什么类型的轮换？如果您需要用户手动旋转，则需要使用多点触控。如果你只是想展示一些很酷的动画，那么这不是必需的。

矩阵很酷的一点是，您可以将矩阵存储在数据库中并稍后检索它。然后可以将矩阵应用于您的图像视图，以便正确显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:19:46.080

我无法真正说出差异，但我很容易使用常规 Animation 类为金星 ImageView 创建一个简单的旋转动画：

**MainActivity.java（*在 onCreate() 中*）：**

```
mGoldStar = (ImageView) findViewById(R.id.goldStar);
...
Animation rotation = AnimationUtils.loadAnimation(this, R.anim.rotate);
mGoldStar.startAnimation(rotation); 
```

**旋转.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<rotate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:anim/linear_interpolator"
    android:fromDegrees="0"
    android:toDegrees="360"
    android:pivotX="50%"
    android:pivotY="50%"
    android:repeatCount="infinite"
    android:duration="1500" /> 
```

# android - Eclipse PANIC：无法打开

> ID：14326689
> 
> 赞同：1
> 
> 时间：2013-01-14T21:09:06.093
> 
> 标签：android, eclipse

我刚刚安装了带有 Android 插件的 Eclipse 并创建了虚拟 Android 设备。当我尝试运行程序时，出现以下错误：*正在启动 AVD 'AVD3' PANIC 模拟器：无法打开：AVD3*

请帮忙

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-08T00:53:19.030

Bonjour Je t'écris en Francais et t'envois la copie de la traduction de google。

J'avais le meme problème que toi ... et j'ai réinstallé Android SDK Manager en mode seulement utilisateur... et du coup j'ai déplacé mes config beautifull dans ma nouvelle arborescences。

好勇气... A +

## 塞萨尔

您好，我是用法语写的，我正在向您发送谷歌翻译的副本。

我和你有同样的问题......我重新安装了 Android SDK Manager 模式只有用户......突然我将我的配置移到了我的新虚拟树中。

祝你好运...... A +凯撒

# asp.net - 如何将当前的 IIS/Active Directory 用户输入 SQL？

> ID：14326695
> 
> 赞同：0
> 
> 时间：2013-01-14T21:09:25.297
> 
> 标签：asp.net, sql-server, active-directory, iis-7.5, webforms

我正在两个单独的页面中创建一个简单的 ASP.NET 详细信息和网格视图，以便进行简单的记录保存。详细信息视图将用于将记录输入数据库，网格视图将用于这些记录的任何更新。我应该注意，我的 IIS 服务器上只启用了“Windows 身份验证”。

我要添加的功能之一是在将记录插入或更新到数据库时进行审计。我在 SQL Server 2012 中使用 CURRENT_TIMESTAMP 命令在插入和/或更新记录时输入。但是，我试图写出哪个活动目录用户更新或插入了给定的记录。我首先尝试利用 SYSTEM_USER 命令，但写入数据库的所有内容都是 SQL 服务器服务帐户或 dbo 帐户，这是不可接受的。我理解为什么要写入 SQL Server 服务帐户，但我需要将当前 Active Directory 用户的名称写入“用户名”字段，如下所述。

这是我现在用于时间戳和用户名的命令（这不是我正在使用的确切 SQL 命令）：

```
INSERT INTO <table-name> ([timestamp], [username]...) VALUES (CURRENT_TIMESTAMP, SYSTEM_USER...)
UPDATE <table-name> SET [timestamp] = CURRENT_TIMESTAMP, [username]) = SYSTEM_USER WHERE..... 
```

每当他们插入和/或更新给定记录而不是 SQL Server 服务帐户的凭据时，将当前 Active Directory 用户名写入“用户名”字段的最佳方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:43:47.370

你是如何连接到 SQL Server 的？您是使用 SQL 身份验证还是使用 Windows 身份验证进行连接？

如果使用 sql auth，那么没有办法不将该信息与数据库命令（查询）一起传递。

如果您使用的是 Windows 身份验证，您是否在 ASP.NET 中模拟用户？如果不是，那就和sql认证一样的问题。

如果您在 ASP.NET 中使用模拟，那么`SYSTEM_USER`应该可以满足您的需求。

如果您的网站使用表单身份验证而不是 AD 用户存储，那么您将遇到与 sql auth 相同的问题。

Think of it this way: Is SQL Server aware of the user of the website? In most cases, no, unless you are using impersonation with windows auth or you are telling SQL Server the user name (i.e. passing it in with your command statement).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:49:14.867

You could store the application username on the context_info variable. And afterwards retrieve it in your trigger or anywhere you need it.

You should do this before each connection to sql is made; should be easy to do, since usually you have the code for the connection in one place only.

# c# - 得到一个空列表，但我可以插入数据

> ID：14326705
> 
> 赞同：1
> 
> 时间：2013-01-14T21:09:44.317
> 
> 标签：c#, azure, windows-phone, windows-phone-8

我正在处理 Windows Phone 8 的 Azure 示例，但我的列表返回空：

```
var items = App.MobileService.GetTable<MyItem>().ToCollectionView(); 
```

但我完全能够插入一行

```
await App.MobileService.GetTable<MyItem>().InsertAsync(newMyItem); 
```

在网络管理器中查看表格，我看到我正在填充列表。

有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T16:43:34.303

我的猜测是调用“ToCollectionView”是异步的，并且在您检查它时尚未收到该值。尝试改用“ReadAsync”方法：

```
var items = await App.MobileService.GetTable<MyItem>().ReadAsync(); 
```

# ruby-on-rails - 使用memcached进行Rails缓存，无法正常工作

> ID：14326708
> 
> 赞同：2
> 
> 时间：2013-01-14T21:10:05.487
> 
> 标签：ruby-on-rails, ruby-on-rails-3, memcached

我进入了一个声称使用 memcached 的现有 Rails 项目。作为测试，我尝试将对象放入缓存中

```
Rails.cache.write("gateway", @gateway) 
```

然后用

```
 Rails.cache.read("gateway", @gateway) 
```

然而这返回 nil，这是为什么呢？

这是在开发环境中，memcached 已安装并正在运行，应通过条目 config.cache_classes = true 和 config.action_controller.perform_caching = true 启用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:26:46.470

Rails 项目以各种不同的方式使用 memcached，但如果您正在处理 rails 3 项目，那么我建议他们可能使用使用 memcached session store 的' **dalli** **' gem**。因此，可以改为使用缓存来完成类似这样的操作，而与之相反的另一种方式是**`session[:gateway] = @gateway``@gateway = session[:gateway]``memcache.set('gateway',@gateway')``memcache.get('gateway')`**

 ****查看配置代码**会很有帮助。检查`/config/initializers/session_store.rb`类似的东西`Rails.application.config.session_store :dalli_store ............`

也如评论中所说，如果您正在**开发中，缓存可能会被关闭**。检查您的`config/development.rb`文件是否有以下内容： `config.action_controller.perform_caching = false`

另一件事是你需要**在你的操作系统上安装 memcached** for linux 这是`sudo apt-get install memcached`并且可以检查`ps aux | grep memcache`（这应该显示两个进程 grep 和 memcache）

**更新**

还应该查看[rails 缓存指南](http://guides.rubyonrails.org/caching_with_rails.html)**

# java - 如果按钮已被释放，则不会在 javafx 上触发 MouseDragged 和 MouseMoved

> ID：14326709
> 
> 赞同：2
> 
> 时间：2013-01-14T21:10:07.673
> 
> 标签：java, button, mouseevent, javafx-2, javafx

我正在尝试在 javafx 中对我的节点进行平移/缩放鼠标操作

对于那些知道它的人来说，行为应与 CATIA V5 中的一样：
- 按下中间按钮，您将“平移”，视图将跟随您的移动
- 按住中间按钮，按下第三个按钮，您将“旋转” "（此处未使用，在 3D 中有用）
- 按住中间按钮，松开第三个按钮，您将“ZOOMING”，上下移动时视图会放大和缩小

不幸的是，一旦我进入 ZOOMING 状态，javafx 似乎不再触发 MouseDragged 或 MouveMoved。

好像第三个按钮释放对触发的事件有影响。

这是我的代码：
缩放功能会影响我的“ViewTab”中的“contentGroup”一个小状态“manipulationState”确保行为之间的切换

我可以进入 ZOOM 状态，但是在鼠标移动时，既不调用`onMouseDragged`也不`onMouseMoved`调用。因此`moveZoom()`永远不会被调用。

有没有办法在 mousemove 上获取事件？谢谢你的帮助。

```
import javafx.event.EventHandler;
import javafx.scene.Cursor;
import javafx.scene.Group;
import javafx.scene.control.Tab;
import javafx.scene.input.MouseButton;
import javafx.scene.input.MouseEvent;

public class ViewTab extends Tab {

    private final double ZOOMFACTOR = 1;
    double contentGroupScale = 1.0;
    double pressedContentGroupScale;
    private double pressedX, pressedY, initialX, initialY;
    private Group contentGroup;

    private enum ManipulationState {

        IDLE, PAN, ROTATE, ZOOM
    }
    private ManipulationState manipulationState;

    ViewTab() {
        TitleNode rootNode = Tools.loadTree();
        //create view
        AbstractView rootView = OakweaverPresenterFactory.createView(rootNode, null);
        setText("Tree");
        contentGroup = new Group();
        contentGroup.getChildren().add(rootView);
        createZoomFunctions();

        setContent(contentGroup);
    }

    public void createZoomFunctions() {
        enterIdle();
        contentGroup.setScaleX(contentGroupScale);
        contentGroup.setScaleY(contentGroupScale);

        contentGroup.setOnMousePressed(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent event) {
                switch (manipulationState) {
                    case IDLE:
                        if (event.getButton() == MouseButton.MIDDLE) {
                            enterPan(event);
                        }
                        break;
                    case PAN:
                        if (event.getButton() == MouseButton.SECONDARY) {
                            enterRotate(event);
                        }
                        break;
                    case ROTATE:

                        break;
                    case ZOOM:
                        if (event.getButton() == MouseButton.SECONDARY) {
                            enterRotate(event);
                        }
                        break;
                }
            }
        });

        contentGroup.setOnMouseReleased(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent event) {
                switch (manipulationState) {
                    case IDLE:

                        break;
                    case PAN:
                        if (event.getButton() == MouseButton.MIDDLE) {
                            enterIdle();
                        }

                        break;
                    case ROTATE:
                        if (event.getButton() == MouseButton.MIDDLE) {
                            enterIdle();
                        }
                        if (event.getButton() == MouseButton.SECONDARY) {
                            enterZoom(event);
                        }
                        break;
                    case ZOOM:
                        if (event.getButton() == MouseButton.MIDDLE) {
                            enterIdle();
                        }
                        break;
                }

            }
        });

        contentGroup.setOnMouseDragged(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent event) {
                System.out.println("draged");

                switch (manipulationState) {
                    case IDLE:
                        break;
                    case PAN:
                        movePan(event);
                        break;
                    case ROTATE:
                        moveRotate(event);
                        break;
                    case ZOOM:
                        moveZoom(event);
                        break;
                }
            }
        });

        //note: javafx does not fire anymore mousemoved or mousedragged when we have made a "zooming" manipulation with the buttons
        contentGroup.setOnMouseMoved(new EventHandler<MouseEvent>() {
            @Override
            public void handle(MouseEvent event) {
                System.out.println("moved");

                switch (manipulationState) {
                    case IDLE:
                        break;
                    case PAN:
                        movePan(event);
                        break;
                    case ROTATE:
                        moveRotate(event);
                        break;
                    case ZOOM:
                        moveZoom(event);
                        break;
                }
            }
        });

        contentGroup.setMouseTransparent(
                false);
    }

    public void enterIdle() {
        manipulationState = ManipulationState.IDLE;
        contentGroup.setCursor(Cursor.DEFAULT);

        System.out.println(manipulationState);

    }

    public void enterPan(MouseEvent event) {

        manipulationState = ManipulationState.PAN;
        pressedX = event.getSceneX();
        pressedY = event.getSceneY();
        initialX = contentGroup.getTranslateX();
        initialY = contentGroup.getTranslateY();
        contentGroup.setCursor(Cursor.MOVE);
        System.out.println(manipulationState);

    }

    public void enterRotate(MouseEvent event) {
        manipulationState = ManipulationState.ROTATE;
        contentGroup.setCursor(Cursor.DEFAULT);
        System.out.println(manipulationState);
    }

    public void enterZoom(MouseEvent event) {
        manipulationState = ManipulationState.ZOOM;
        pressedX = event.getSceneX();
        pressedY = event.getSceneY();
        initialX = contentGroup.getTranslateX();
        initialY = contentGroup.getTranslateY();
        pressedContentGroupScale = contentGroupScale;

        contentGroup.setCursor(Cursor.V_RESIZE);
        System.out.println(manipulationState);

    }

    public void movePan(MouseEvent event) {
        contentGroup.setTranslateX(initialX + (event.getSceneX() - pressedX));
        contentGroup.setTranslateY(initialY + (event.getSceneY() - pressedY));
    }

    public void moveRotate(MouseEvent event) {
    }

    public void moveZoom(MouseEvent event) {
        contentGroupScale = pressedContentGroupScale * Math.exp(ZOOMFACTOR * (event.getSceneY() - pressedY));

        contentGroup.setScaleX(contentGroupScale);
        contentGroup.setScaleY(contentGroupScale);
    }
} 
```

# objective-c - 如何在运行时检查特定属性及其返回类型？

> ID：14326711
> 
> 赞同：2
> 
> 时间：2013-01-14T21:10:13.397
> 
> 标签：objective-c, introspection, dynamic-typing

由于名为“age”的属性也总是有一个名为“age”的选择器，我可以`respondsToSelector`按照这个[问题的建议](https://stackoverflow.com/questions/1535190/in-objective-c-can-you-check-if-an-object-has-a-particular-property-or-message)使用它，这将告诉我在运行时是否存在任何给定对象中的特定选择器。

如果存在名为“age”的属性，我可以验证这一点。我怎么知道该选择器（该属性的读取方法）是返回对象（id）还是非对象（int）？

这种类型确定是否可以在运行时进行，还是 Objective-C 方法总是假设有人使用我希望它使用的类型实现了该方法，或者我也可以验证返回类型？

这是在 XCode 4.5 中使用最新的 Objective-C 版本（LLVM 4.1）。

更新：这是我想出的实用程序类别 NSObject：

```
 - (NSString*) propertyType: (NSString*)propname
{
    objc_property_t aproperty = class_getProperty([self class],  [propname cStringUsingEncoding:NSASCIIStringEncoding] ); // how to get a specific one by name.
    if (aproperty)
    {
     char * property_type_attribute = property_copyAttributeValue(aproperty, "T");
     NSString *result = [NSString stringWithUTF8String:property_type_attribute];
     free(property_type_attribute);
     return result;
    }
    else
        return nil;
} 
```

在研究这个问题时，我还编写了这个方便实用的实用方法，可以列出该对象的所有属性：

```
- (NSArray*) properties;
{
    NSMutableArray *results = [NSMutableArray array];
    @autoreleasepool {

        unsigned int outCount, i;
        objc_property_t *properties = class_copyPropertyList([self class], &outCount);
        for (i = 0; i < outCount; i++) {
            objc_property_t property = properties[i];
            const char * aname=property_getName(property);
            [results addObject:[NSString stringWithUTF8String:aname]];
            //const char * attr= property_getAttributes(property);
            //[results addObject:[NSString stringWithUTF8String:attr]];

        }
        if (properties) {
            free(properties);
        }

  } // end of autorelease pool.
  return results;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:21:06.543

您可以使用`class_copyPropertyList`来获取在类中声明的属性列表。

> [class_copyPropertyList](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/class_copyPropertyList)
> 
> 描述类声明的属性。

然后`property_getAttributes`：

> property_getAttributes
> 
> 返回属性的属性字符串。

[在这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtPropertyIntrospection.html#//apple_ref/doc/uid/TP40008048-CH101)，您可以找到一些更具体的提示和示例。

作为旁注，以下声明：

> 由于名为“age”的属性总是有一个名为“age”的选择器

不正确，因为属性可以具有自定义 getter 和/或 setter：

```
@property (nonatomic, getter=isImmediate) BOOL immediate; 
```

编辑：

我在[另一个 SO 帖子](https://stackoverflow.com/questions/3497625/in-objective-c-determine-if-a-property-is-an-int-float-double-nsstring-nsdat)中找到的一些示例代码：

```
const char * type = property_getAttributes(class_getProperty([self class], "myPropertyName"));
NSString * typeString = [NSString stringWithUTF8String:type];
NSArray * attributes = [typeString components separatedByString:@","];
NSString * typeAttribute = [attributes objectAtIndex:0];
NSString * propertyType = [typeAttribute substringFromIndex:1];
const char * rawPropertyType = [propertyType UTF8String];

if (strcmp(rawPropertyType, @encode(float)) == 0) {
 //it's a float
} else if (strcmp(rawPropertyType, @encode(int)) == 0) {
 //it's an int
} else if (strcmp(rawPropertyType, @encode(id)) == 0) {
 //it's some sort of object
} else .... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T22:01:53.310

假设您已经知道属性名称，您可以采取的一种方法是使用该`class_getProperty`函数。您还可以使用该`property_copyAttributeValue()`函数按名称获取特定属性：

```
objc_property_t number_property = class_getProperty([MyClass class], "number");
char *number_property_type_attribute = property_copyAttributeValue(number_property, "T");
NSLog(@"number property type attribute = %s", number_property_type_attribute); 
```

将记录：

> 2013-01-14 14:45:37.382 RuntimeFun[61304:c07] number 属性类型属性 = i

假设`MyClass`看起来像：

```
@interface MyClass : NSObject
@property (nonatomic) int number;
@end

@implementation MyClass
@end 
```

一个你有你的类型属性字符串，然后你可以将它与各种[Objective-C 类型编码](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html)进行比较。完成比较后，请务必调用`free()`您的属性字符串。

# jquery - 点击显示谷歌地图图层

> ID：14326715
> 
> 赞同：0
> 
> 时间：2013-01-14T21:10:29.767
> 
> 标签：jquery, google-maps

只有当用户选择这样做时，我才尝试显示谷歌地图图层：

```
$("#add_layer").click(function() {
    var firstLayer = new google.maps.FusionTablesLayer({
        query: {
            select: 'geometry',
            from: '1mzDdm3G8By9pbjBG3XvSUw6fppNVkYPYo0k'
          },
          map: map,
          suppressInfoWindows: true
        });
        google.maps.event.addListener(firstLayer, 'click', function(e) {
          windowControl(e, infoWindow, map);
        });
}); 
```

此代码在不包含在 $("#add_layer").click(function() 中，但不包含在 click 函数中时完美运行。是否有某些原因您不能使用 click 函数来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:25:24.993

我怀疑问题出在地图变量上。要在点击处理程序中使用它，它需要在全局范围内。

假设您在称为 onload 的“初始化函数”中对其进行初始化，请更改：

```
 function initialize() {
  var map = new google.maps.Map(...); 
```

到：

```
var map;
function initialize() {
  map = new google.maps.Map(...); 
```

# backbone.js - 骨干创建在 Http Post 中不向服务器发送数据？

> ID：14326719
> 
> 赞同：0
> 
> 时间：2013-01-14T21:10:40.510
> 
> 标签：backbone.js, backbone.js-collections

我有一个非常简单的模型，称为“gameModel”和一个集合“gamesCollection”，如下所示。当我尝试在集合中创建一个新游戏时，它会向服务器发送一个帖子，但该帖子中没有数据。有谁知道发生了什么？

```
//The relevant code
var game = new gameModel();
game.gameId = id;
gamesCollection.create(game);

...........
//The Collection 
define([
  'jQuery',
  'Underscore',
  'Backbone',
  'collections/common/mixin',
  'models/game',
  'config/restresource'
    ], function($, _, Backbone, collectionMixin, gameModel, restDomain){
    var gamesCollection = Backbone.Collection.extend({
        url: (new restDomain()).getGamesRoot(),
        model: gameModel,
        initialize: function(){
            _.extend(this.__proto__, collectionMixin);
        },

        parse: function(resp, xhr) {
            var games = [];
            for(i=0;i<resp.length;i++){
                games.push(new gameModel({gameId: resp[i].gameId}));
            }
            return games;
        },
    });

    return new gamesCollection;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:02:26.213

试试这个

```
gamesCollection.create({"id":id}); 
```

`Backbone.Collection.create`接受属性作为第一个参数，*而不是*模型...如果成功创建模型，则返回一个模型。因此，如果您仍希望使用`game`模型对象，您可能希望像下面这样实现它。

```
var game = gamesCollection.create({"id":id}); 
```

# ios - CATiledLayer：如何导致仅重新加载一些图块？

> ID：14326722
> 
> 赞同：3
> 
> 时间：2013-01-14T21:10:52.307
> 
> 标签：ios, uiview, uiscrollview, catiledlayer

我在滚动视图中使用平铺层来显示自定义视图。自定义视图的内容会定期更改，并且我知道发生这些更改的矩形。但是我发现，如果我执行 setNeedsRedisplay 只会重绘一个图块。如何告诉 CATiledLayer 仅重绘受影响的图块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:59:45.327

如果您在 CATiledLayer 上调用 setNeedsDisplay，则它会重绘其所有图块。如果您改用 setNeedsDisplayInRect，它应该只重绘那些与您指定的矩形相交的图块。但是请注意，它将重绘整个图块，而不仅仅是与矩形相交的部分。

还要注意在绘制过程中调用 setNeedsDisplay 时 CATiledLayer 中的重绘错误。您可以在[这个问题](https://stackoverflow.com/questions/8157349/setneedsdisplayinrect-called-during-drawlayerincontext)中找到更多信息。

# jquery - Twitter Bootstrap 工具提示：放置在按钮顶部时会闪烁，但放置在左/右/底部时可以正常工作

> ID：14326724
> 
> 赞同：36
> 
> 时间：2013-01-14T21:10:55.830
> 
> 标签：jquery, twitter-bootstrap, tooltip

我正在处理引导工具提示实例的一些奇怪行为。

我正在使用的页面有几个按钮，当悬停在这些按钮上时，会显示带有按钮功能描述的工具提示。工具提示都显示在按钮的顶部，除了一个按钮外，一切正常。这个按钮显示工具提示时会持续闪烁，工具提示本身会覆盖按钮的一部分（而不是完全在按钮顶部），并阻止按钮被正确单击。如果工具提示的“数据放置”从“顶部”更改为“左”/“右”/“底部”，则工具提示将正确显示。

此外，给我带来问题的按钮被包裹在一个具有“float：right;”的div中。在 css 中分配。我之所以提到这一点，是因为我注意到如果我删除浮动，工具提示可以正常工作。不幸的是，如果我移除浮动，按钮本身就会失去正确的定位。

虽然我可以放弃工具提示的“顶部”定位，但我希望可能有一个简单的技巧来解决这个问题。有没有人有什么建议？

谢谢你。

更新：

[这个 StackOverflow 问题](https://stackoverflow.com/questions/11979837/twitter-bootstrap-tooltip-not-aligning-correctly-when-it-is-going-to-go-outside)与我遇到的问题相同。我发现答案很有用。

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2018-02-07T13:43:14.833

添加到工具提示`pointer-events: none;`css 规则中，例如

```
.tooltip {
  pointer-events: none;
} 
```

这将防止工具提示成为鼠标事件的目标并解决问题。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2020-05-29T00:45:09.287

# 阅读文档

[Bootstrap 4 上](https://getbootstrap.com/docs/4.5/components/tooltips/#usage)的文档明确解决了这个问题并提供了解决方案：

> 溢出自动和滚动
> 
> 当父容器溢出时，工具提示位置尝试自动更改：自动或溢出：像我们的 .table-responsive 一样滚动，但仍保持原始位置的定位。要解决此问题，请将边界选项设置为默认值“scrollParent”以外的任何值，例如“window”：
> 
> `$('#example').tooltip({ boundary: 'window' })`

所以我们必须将`boundary`选项设置为`'window'`.

从有关[选项的](https://getbootstrap.com/docs/4.5/components/tooltips/#options)[文档中`boundary`](https://getbootstrap.com/docs/4.5/components/tooltips/#options)：

> 工具提示的溢出约束边界。接受 'viewport'、'window'、'scrollParent' 或 HTMLElement 引用的值（仅限 JavaScript）。有关更多信息，请参阅 Popper.js 的[preventOverflow 文档](https://popper.js.org/docs/v1/#modifiers..preventOverflow.boundariesElement)。

# 最佳实践

话虽如此，在[任何地方初始化工具提示的首选方法](https://getbootstrap.com/docs/4.5/components/tooltips/#example-enable-tooltips-everywhere)是`'[data-toggle="tooltip"]'`用作选择器：

```
$('[data-toggle="tooltip"]').tooltip({ boundary: 'window' }) 
```

# 一劳永逸

现在，如果您正在向 DOM 动态添加或删除元素（带有工具提示），或者甚至在不重新加载它的情况下替换整个页面（即使用[PJAX 之](https://github.com/defunkt/jquery-pjax)`pushState`类的库） - 或者如果您只是使用模式（带有工具提示） - 你有（再次）初始化这些工具提示。

### 修复元素上的​​工具提示

这就是以下函数派上用场的地方，它会破坏并重新创建所有工具提示。在您向/从已附加工具提示的 DOM 添加/删除元素后调用此函数。

```
function recreateTooltips() {
    $('[data-toggle="tooltip"]').tooltip('dispose').tooltip({boundary: 'window'});
} 
```

这可能看起来很昂贵（当然确实如此），但即使在同一页面上有数十个工具提示，我也从未注意到任何性能影响。

### 修复模态中的工具提示

要修复模式中的工具提示，您只需将上面的函数绑定到`'shown.bs.modal'`事件，该事件在模式完全显示给用户后触发。

```
/** Recreate tooltips upon showing modal */
$(document).on('shown.bs.modal', '*', function () {
    recreateTooltips();
}); 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-01-14T22:08:14.600

我为我的问题找到了一个快速的解决方案。虽然相对较短，但我最初的工具提示描述被分成两行。偶然地，我尝试缩短工具提示文本以适合单行。完成此操作后，工具提示将正确显示。因此，我假设工具提示文本的长度以及按钮一直显示到页面右侧（以及页面顶部）的事实肯定存在问题。我暂时不会对此进行进一步调查。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-01-21T23:18:28.953

我遇到了同样的问题。我发现当这些元素位于具有相对或绝对定位的容器中时，Bootstrap 的工具提示不会正确地将它们定位在“浮动”或“内联/内联块”元素上。我有一个按钮浮动在一个绝对定位的父容器内。如果我删除父级的绝对定位，工具提示会显示得非常好。Bootstrap 需要解决这个问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-06-09T15:47:06.973

响应较晚，但我遇到了同样的问题，并且能够通过在 html 元素的工具提示 jquery 参考中使用“容器”选项来解决它。

请参阅此[页面](https://github.com/twbs/bootstrap/issues/11113)和其中的 jsfiddle 链接。

[您可以在此处](http://getbootstrap.com/javascript/#tooltips)查看工具提示容器选项详细信息。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-09-24T11:39:11.787

这发生在内联元素上，例如`a`标签。设置`display`属性来`block`解决问题。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-02-27T08:53:58.617

基于史蒂夫的回答，我发现问题是我对字体真棒css的css引用是***在***引导css之后。引导 css 将字体真棒图标的显示属性设置为“内联块”。

因此，为了解决这个问题，我只是将 bootstrap css 引用移到了 font awesome css 之后，这为我解决了闪烁问题。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-14T21:32:04.330

我不确定您对 Bootstrap 位有多少控制权，但听起来悬停事件一直在触发。停止这种情况的方法是在调用之前使用 .stop() ，但我不确定这是否可行，例如：

```
$('#myelement').stop().fadeOut(200); 
```

我不知道您是否能够通过 Bootstrap 调用执行类似的操作，但值得一试！

# jquery - jQuery .on() 和 ajax

> ID：14326727
> 
> 赞同：1
> 
> 时间：2013-01-14T21:11:06.520
> 
> 标签：jquery, dom

我正在使用 jQuery ajax 函数向页面添加元素，成功后我从服务器获取响应并将其分配给一个元素，如下所示：

```
$('#element').html(response); 
```

然后我需要jQuery来考虑新添加的元素。我的问题是它不在 DOM 中，所以我想到了使用`.on()`：

```
$(".remove").on("click", function(){
  alert($(this).text());
}); 
```

但这不起作用。好吧，它确实有效，但仅适用于页面首先加载的元素，而不是新的元素。不应该也`.on()`考虑“新元素”吗？

PS实际上“点击”事件只是为了测试，我需要在鼠标悬停时运行该功能，但到目前为止，我正在尝试了解如何使用通过 AJAX 添加的新 DOM 元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:13:21.317

委托它。*委托它。* ***委托它。***

```
$(document).on('click', '.remove', function(e){
    /*
       do something when *any* `.remove` element is clicked
       in the document, now and in the future.
    */
}); 
```

# drupal - Drupal 7 - 基于页面的分类术语？

> ID：14326729
> 
> 赞同：0
> 
> 时间：2013-01-14T21:11:13.793
> 
> 标签：drupal, views, taxonomy

不知道这是否是最好的方法，但这就是我的想法。

我有一个名为“小部件”的内容类型，每个小部件都是一小段内容。然后我希望有一个通用的“视图”，它会关闭并抓取用户所在当前页面的所有小部件。

这就是我如何看待它在我脑海中的运作方式..只是不知道该怎么做。

- 创建内容“小部件”时，管理员可以根据站点结构从列表分类术语中以某种方式选择他们希望它出现的页面（添加新页面时，它们也会以某种方式自动添加到此树中）

-当用户然后浏览页面时，通用视图会计算出用户在哪个页面上，并获取所有已用当前页面标记的小部件

这可能吗？如果是这样，有人可以给我一些指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:00:29.177

我想通了，在主页的字段中，您可以添加一个术语参考字段，允许您在词汇表中输入一个新标签。

然后，“小部件”内容类型可以使用术语选择字段来选择这个新标签。然后我的视图会自动显示它，因为它是相关的。

# angularjs - 在 IE9 中单击时从所有选择框中删除 AngularJS 默认选择选项

> ID：14326730
> 
> 赞同：2
> 
> 时间：2013-01-14T21:11:17.710
> 
> 标签：angularjs

IE9 不适合我的选择框。当您单击一个以更改 Chrome 中的值时，它会按预期工作。在 IE9 中，它会从页面上的每个选择框中删除默认选择。这里到底发生了什么？

这次我不得不做一个 jsfiddle，因为 plunker 似乎也没有链接 IE9。

[http://jsfiddle.net/sonicparke/nEDfY/](http://jsfiddle.net/sonicparke/nEDfY/)

这是我用于选择框的代码的一部分。小提琴中有一个工作示例。

```
<select ng-model="initialOption1" ng-options="drafter.name for drafter in drafterItems"><option value="">Initial Option</option></select>
  <select ng-model="initialOption2" ng-options="drafter.name for drafter in drafterItems"><option value="">Initial Option</option></select>
  <select ng-model="initialOption3" ng-options="drafter.name for drafter in drafterItems"><option value="">Initial Option</option></select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T04:31:35.307

我不确定原因是什么，但您可以通过不使用标记中的初始选项来使其工作。而是在您的 ngOptions 对象中设置默认值并将模型值设置为该值。

[http://jsfiddle.net/Z2gkg/](http://jsfiddle.net/Z2gkg/)

```
$scope.initialOption1 = $scope.drafterItems[0];
$scope.initialOption2 = $scope.drafterItems[0];
$scope.initialOption3 = $scope.drafterItems[0]; 
```

我很想知道根本原因，但它可能与您所包含的 ng-grid 库有关。

# ios - 如何判断 UIPickerView 中视图中的行

> ID：14326733
> 
> 赞同：1
> 
> 时间：2013-01-14T21:11:28.653
> 
> 标签：ios, uipickerview

该类`UIPickerView`有一个方法，该方法`selectedRowInComponent`返回组件的选定行。这可能是也可能不是位于选取器视图中心的项目。我想要的是能够知道当前正在显示的pickerView 数据的索引（未选择）。

为了说明差异，如果您点击 UIPickerView 表盘中的一个值，该值的行似乎总是以`selectedRowInComponent`. 但是，如果用户滚动选择器通过几个值然后抬起手指，`selectedRowInComponent`则不会更新，或者它会更新为刚刚滚动关闭的值。

无论如何确定选择器组件的实际拨号位置？

该值始终在方法中可用，`pickerView:didSelectRow:inComponent:`但我想在方法中查询它`pickerView:titleForRow:forComponent:`

为什么？因为在 UIPickerView 被滚动时`selectedRowInComponent`没有被调用。如果由于某种原因我到达数据的末尾并需要添加更多，我需要在一个正在调用的方法中完成。那似乎是`pickerView:titleForRow:forComponent:`，每行都调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-07T19:41:51.240

我知道这个问题有点老了，但通过回答我可以帮助别人。

我想我找到了解决这个问题的方法。

* * *

## 解决方案

```
- (NSString *)pickerView:(UIPickerView *)pickerView
         titleForRow:(NSInteger)row
        forComponent:(NSInteger)component
{
    // Passing the row being viewed to a function that does something with it.
    [self handleRowBeingViewed:[pickerView selectedRowInComponent:component]];
}

- (void)pickerView:(UIPickerView *)pickerView
      didSelectRow:(NSInteger)row
       inComponent:(NSInteger)component
{
    // Passing the row being viewed to a function that does something with it.
    [self handleRowBeingViewed:[pickerView selectedRowInComponent:component]];
}

/**
 * It receives, in input 'rowBeingViewed', the row being viewed by the user in the center of the picker view, and use it to XYZW... 
 *
 *
 * @param rowBeingViewed     Row currently being viewed by the user in the center of the picker view.
 * @return
 */
- (void) handleRowBeingViewed:(NSInteger)rowBeingViewed
{
     // Printing for debugging.
     NSLog(@"String Being Viewed: %@", pickerViewArray[rowBeingViewed]);

     // DO YOUR STUFF HERE
     // ...
} 
```

* * *

## 解释

*UIPickerView*让您可以随时使用 selectedRowInComponent 方法知道选择了哪一行（或在中心查看，我认为是相同的***）***。

如果您在委托的方法***pickerView:titleForRow:forComponent中使用该方法******selectedRowInComponent***，则每次在选取器视图中向用户“打印”新标题时，您都可以知道在中心查看的是哪一行。

 *有时，如果在 Picker View 中只滚动 1 或 2 行，则不会调用委托的方法***pickerView:titleForRow:forComponent***并且您将不知道在中心查看的是哪一行。为了解决这个问题，还要在委托的方法***pickerView:didSelectRow:inComponent:中使用相同的方法******selectedRowInComponent***。

 *希望这可以帮助某人。**

# sharepoint-2010 - 填充下拉列表的选项

> ID：14326734
> 
> 赞同：0
> 
> 时间：2013-01-14T21:11:29.300
> 
> 标签：sharepoint-2010, infopath, sharepoint-designer

我有一个列表，我会让用户输入数据，每个用户都需要选择自己的位置。首先，我创建了一个包含所有选项的下拉字段。该列可以设置为强制唯一值，但这直到用户保存时才检查。

有没有办法在选择选项时立即检查用户选择是否已经输入？（无需点击保存）

或者

我尝试的另一个选择是：

1.  创建一个包含两列的单独列表：`name`和`saved`。叫它`Location_List`
2.  创建一个显示所有位置的`saved = no`视图`Location_list`
3.  `mainList`从查找 中填充选项`Location_List`。这行得通。
4.  将工作流操作`mainList`添加`saved = yes`到`Location_List`. 这部分不起作用。sharepoint 是否允许这样做？

有没有更简单的方法来实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T16:56:18.217

我的第二个选项有效，只是忘记将工作流设置更新为“创建项目时自动启动”以使其相应运行。

# jquery - 当img src为空时隐藏父元素与jquery

> ID：14326735
> 
> 赞同：-3
> 
> 时间：2013-01-14T21:11:42.807
> 
> 标签：jquery, hide, element, parent

生成的html：

```
<div class="fp-thumbnail"> <img src="" /></div> 
```

在我看来，这应该隐藏 div：

```
$('div').has('img[src=""]').addClass('hide'); 
```

Css（不确定是否需要）：

```
.hide{display:none !important;} 
```

更新：它确实在 js fiddle 中工作 - [http://jsfiddle.net/dHMk4/](http://jsfiddle.net/dHMk4/)但不在网站上。

更具体地说：我想隐藏整个 div 而不仅仅是图像。

第二次更新：给出的解决方案在实践中没有一个比我已经拥有的更好，所以我用不同的方式做了。对于那些至少尝试过的人，感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:17:58.363

尝试这样的事情：

```
$("img[src='']").parent(".fp-thumbnail").addClass("hide"); 
```

[http://jsfiddle.net/PQcZq/](http://jsfiddle.net/PQcZq/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:21:09.577

你可以试试这个方法

```
var $img = $('img');       // Cache the images

$img.each(function(){      // Loop over multiple image tags
   var $this = $(this);    
  if( $this.attr('src') === ''){      // If src is empty
      $this.closest('div.fp-thumbnail').hide();  // Hide the corresponding parent
  }
}); 
```

如果您只想对特定图像执行此操作，您可以删除`.each loop`并指定图像的特定选择器。

# php - 数据类型与提交的数据不匹配时返回错误（MDB2 准备/执行）

> ID：14326739
> 
> 赞同：1
> 
> 时间：2013-01-14T21:11:56.157
> 
> 标签：php, error-handling, prepared-statement, mdb2

如果我将以下数据传递给 MDB2，`execute`则不会返回错误。它将无效文本转换为零并插入。

```
$types = array('integer','integer','integer');
$data = array(
    'reviewid'      => 123, 
    'userid'        => "text$!!^^INVALID INPUT", 
    'flagid'        => 456 
);

$statement = $mdb2_dbx->prepare('
    INSERT INTO 
        review_score 
        (
            reviewid, 
            userid,
            flagid,
            dateadded
        ) VALUES (
            :reviewid,
            :userid,
            :flagid,
            NOW()
    )', $types);
$statement      = $mdb2_dbx->prepare($q, $types, MDB2_PREPARE_MANIP);
    if(PEAR::isError($statement)) { trigger_error($statement->getMessage(), E_USER_ERROR); }
$affectedRows   = $statement->execute($data);
    if(PEAR::isError($affected)) { trigger_error($affectedRows->getMessage(), E_USER_ERROR); } 
```

如果遇到错误的数据类型，有没有办法强制 MDB2 返回错误？

# javascript - jQueryUI Drag-n-Drop：克隆不掉落

> ID：14326742
> 
> 赞同：2
> 
> 时间：2013-01-14T21:12:14.827
> 
> 标签：javascript, jquery-ui, drag-and-drop

我正在玩一些拖放用户界面，我对***DROP***有点难过。
你可以**[在这里看到小提琴](http://jsfiddle.net/mOrloff/48nbs/)**。

**即时目标：**
我只需要找出如何让`.draggable`跨度进入任何一个`.droppable`div。
假设我走在正确的道路上`append()`，我该如何访问克隆的内容？

**终极目标：**
最终，我需要添加一种从放置区 div 中删除项目的方法，并将`.textfield`input/div 限制为仅接受一个 drop（`.textarea`input/div 可以接受无限数量的“有效负载”）。

**代码：**

```
/* html */
<table>
    <thead>    
        <tr role="row">
            <th class="sorting_asc" role="columnheader" tabindex="0" aria-controls="DataTables_Table_0" rowspan="1" colspan="1" style="width: 494px;" aria-sort="ascending" aria-label="Company: activate to sort column descending">Company</th>
            <th class="sorting_disabled" role="columnheader" rowspan="1" colspan="1" style="width: 66px;" aria-label="Contact">Contact</th>
            <th class="sorting_disabled" role="columnheader" rowspan="1" colspan="1" style="width: 79px;" aria-label="&amp;nbsp;">&nbsp;</th>
        </tr>
    </thead>
    <tbody role="alert" aria-live="polite" aria-relevant="all">
        <tr class="odd">
            <td class="sorting_1 has_draggable_children">
                <span draggable="true" class="ui-draggable" data-companyid="0101" data-companyname="**BD">**BD</span>
            </td>
            <td><a href="#4621">Contacts</a></td>
            <td><a href="#4621">Edit</a>
                <a href="#4621">Delete</a>
            </td>
        </tr>
        <tr class="even">
            <td class="sorting_1 has_draggable_children">
                <span draggable="true" data-companyid="0202" data-companyname="0024" class="ui-draggable">0024</span>
            </td>
            <td><a href="#4438">Contacts</a></td>
            <td><a href="#4438">Edit</a>
                <a href="#4438">Delete</a>
            </td>
        </tr>
        <tr class="odd">
            <td class="sorting_1 has_draggable_children">
                <span draggable="true" class="ui-draggable" data-companyid="0303" data-companyname="Acme, Inc.">Acme Anvil Corp</span>
            </td>
            <td><a href="#4621">Contacts</a></td>
            <td><a href="#4621">Edit</a>
                <a href="#4621">Delete</a>
            </td>
        </tr>
   </tbody>
</table>

<section class="offset7" id="dragged-drop-zone" >
    <div class="look-like-input textfield droppable" contenteditable></div>
    <br />
    <div class="look-like-input textarea droppable" contenteditable></div>
</section> 
```

.

```
/* js */
// DRAG
$('span[draggable]').draggable({
    revert: true,
    helper: "clone"
});

// DROP
$('.droppable').droppable({
    tolerance: 'pointer',
    drop: function(event, ui) {
        //console.log(this);
        $(this).append($(ui.helper));
    }
}); 
```

欢迎任何和所有的帮助和建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T22:31:04.867

好吧……深究了。

**`clone`**只是似乎并不像人们期望的那样运作。
您最终不得不使用自定义函数将您自己的克隆打包到一个对象中，然后将其从`drop`.

您可以在 jsFiddle 上**[查看工作示例。](http://jsfiddle.net/mOrloff/48nbs/4/)**
这是最终的工作：

```
// Drag
$('span[draggable]').draggable({
    revert: true,
    helper: function() {
        var container = $('<div/>');
        var dragged = $(this);
        container.append(dragged.clone());
        return container;
    }
});

// Drop
$('.droppable').droppable({
    tolerance: 'pointer',
    drop: function(event, ui) {
        $(this).append($(ui.helper.children()));
    }
}); 
```

# javascript - 将标签添加到范围类型输入控件的最小值和最大值？

> ID：14326746
> 
> 赞同：0
> 
> 时间：2013-01-14T21:12:22.777
> 
> 标签：javascript, html, windows-8, windows-store-apps

我的代码：

```
<input type="range" min="0" max="12" step="4" /> 
```

我正在构建一个 Windows 应用商店应用程序，并希望在标签方面也指出最小值和最大值。0 表示快，12 表示慢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T04:23:59.127

这在现代浏览器上应该可以很好地工作（[参见 jsfiddle](http://jsfiddle.net/aNXET/)）：

```
0 <input type="range" min="0" max="12" step="4" style="display:inline-block; vertical-align:middle" /> 12 
```

# c# - Cookie 不删除

> ID：14326750
> 
> 赞同：0
> 
> 时间：2013-01-14T21:12:32.823
> 
> 标签：c#, cookies, visual-studio-2012, devexpress

System.Web.UI.Page oPage我的 cookie 没有被删除。我看了几篇文章，一切看起来都很棒，就在我单步通过 Visual Studio（或只是在 localhost 下运行）以响应单击按钮时，我的 cookie 仍然存在。

不管它值多少钱，我都在使用带有 .Net 4.0 的 Visual Studio 2012。我正在使用默认 IE（Win7/64 上的 v9 以及所有最新更新）在 localhost 上进行调试。

```
public static void LoginUser(String strEmail, int iId, int iKeepDays)
{
    HttpCookie oCookie = new HttpCookie("myCookie");

    // Set the cookie value.
    oCookie.Secure = false;
    oCookie["Id"] = iId.ToString();
    oCookie["Email"] = strEmail;
    oCookie.Expires = DateTime.Now.AddDays(iKeepDays);

    // Add the cookie.
    HttpContext.Current.Response.Cookies.Add(oCookie);
}

public static void LogoutUser(System.Web.UI.Page oPage)
{
    // Get the cookie.
    HttpCookie oCookie = new HttpCookie("myCookie");
    oCookie = HttpContext.Current.Request.Cookies["myCookie"];
    if (null != oCookie)
    {
        // Remove the cookie.
        cCookies.RemoveCookie("myCookie");

        // Go back to the home page.
        if (oPage.IsCallback)
            ASPxWebControl.RedirectOnCallback("/");
        else
            HttpContext.Current.Response.Redirect("/");
    }
}

/// <summary>
/// This function will be used to remove cookies value 
/// </summary>
/// <param name="key"></param>
public static void RemoveCookie(String key)
{
    //get cookies value 
    HttpCookie oCookie = null;

    if (null != HttpContext.Current.Request.Cookies[key])
    {
        oCookie = HttpContext.Current.Request.Cookies[key];

        // You cannt directly delte cookie you should set its expiry date to earlier date 
        oCookie.Expires = DateTime.Now.AddDays(-1);
        HttpContext.Current.Response.Cookies.Add(oCookie);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:56:26.137

现在答案似乎很明显，因为我正在写它并弄清楚了，但是我可以说答案并不那么容易得到，无论是否明显。

上面的代码在服务器上执行，但是 cookie 的删除发生在客户端。执行必须传输到客户端，然后返回到服务器，以便服务器识别 cookie 已被删除。

我在同一个注销调用中读回数据，只是在不同的函数中。由于公认的做法规定要重置 cookie，因此该函数将 cookie 写回。cookie 被删除，然后又回来了。它甚至有了一个新的文件名。（我打开了隐藏的 cookie 文件夹。）

我的解决方案是将登录状态传递给其他功能。这解决了cookie部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:18:43.957

该`cCookies.RemoveCookie("myCookie");`行不会调用您的`RemoveCookie`方法。该行应该`RemoveCookie("myCookie");`改为。

# c++ - 如何检查向量是否 实际上是位向量而不是字节？

> ID：14326754
> 
> 赞同：6
> 
> 时间：2013-01-14T21:12:43.993
> 
> 标签：c++, stl, vector, boolean, bits

我需要存储一个动态的位数组。
[vector<bool> 上的 C++ 参考页](http://www.cplusplus.com/reference/vector/vector-bool/)有以下信息：

> 存储不一定是`bool`值数组，但库实现可以优化存储，以便每个值都存储在单个位中。

如何确保我使用的程序`vector<bool>`确实将位存储在向量而不是布尔值（字节）中？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:19:32.663

不要试图那样做。相反，使用`boost::dynamic_bitset`which 清楚地表明你真正想要什么。优化实际上为错误创造了许多可能性，`vector<bool>`例如在使用迭代器时（因为它通常返回一个代理对象）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T21:19:32.963

好吧，您总是可以查看编译器附带的头文件。由于 STL 容器几乎完全是模板类，因此实现的大部分（如果不是全部）部分将在标题中可见。

也许在调试器中查看`vector`对象也会有所帮助。

注意：您还应该知道，`vector<bool>`与此同时，C++ 社区对此颇为不满，并且这种优化是针对大小而不是速度的：

[https://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=98](https://www.informit.com/guides/content.aspx?g=cplusplus&seqNum=98)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T04:55:51.570

这里根本没有什么可以检查的。标准要求专门`vector<bool>`存储位而不是更大的对象。§23.2.5：“为了优化空间分配，提供了一个专门用于 bool 元素的向量：”。

我想从某种角度来看，您所引用的内容至少是正确的。由于基本上没有人可以证明编译器的一致性，而且基本上没有编译器甚至尝试满足所有一致性要求，因此编译器*也可以*选择忽略此要求。

不过，我不知道有任何编译器这样做——如果有人这样做，我猜它可能是众所周知的。有时关于取消`vector<bool>`专业化的讨论非常激烈，所以如果有人有现实生活中的例子说明这让事情变得更好（或更糟），我怀疑我们会听说过它。

编辑：在 C++11 中，要求`std::vector<bool>`已移至 §23.3.7。更重要的是，措辞已更改，以指定将每个`bool`都存储为单个位而不是`bool`值的连续分配的打包表示现在只是一个建议。

至少在国际海事组织，这几乎没有什么*真正的*区别。据我所知，所有实际实现仍然使用打包表示，因此即使打包存储在理论上不再得到保证，但无论如何它都会在实践中发生。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T00:24:04.787

可以在编译时通过检查 的非常量版本的返回类型来检查这一点`vector<bool>::operator[]`： 将其值存储为位的实现将必须返回代理引用类而不是`bool&`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T22:17:33.720

这个程序证明了这一点。

```
#include <vector>
#include <iostream>

template <typename T>
void showSize() {
    std::vector<T> myvec;
    size_t capacity = myvec.capacity();
    std::cout << "capacity: " << myvec.capacity() << std::endl;
    std::cout << "size: " << myvec.size() << std::endl;
    while (myvec.capacity() < 1024) {
        while (myvec.capacity() == capacity) {
            myvec.push_back(T());
        }
        capacity = myvec.capacity();
        std::cout << "capacity: " << myvec.capacity() << std::endl;
        std::cout << "size: " << myvec.size() << std::endl;
    }

}

int main(int, char**) {
    std::cout << std::endl << std::endl;
    std::cout << "*********************" << std::endl << std::endl;
    std::cout << "Booleans: " << std::endl << std::endl;
    showSize<bool>();
    std::cout << std::endl << std::endl;
    std::cout << "*********************" << std::endl << std::endl;
    std::cout << "Chars: " << std::endl << std::endl;
    showSize<char>();
} 
```

输出：

```
*********************

Booleans: 

capacity: 0
size: 0
capacity: 64
size: 1
capacity: 128
size: 65
capacity: 256
size: 129
capacity: 512
size: 257
capacity: 1024
size: 513

*********************

Chars: 

capacity: 0
size: 0
capacity: 1
size: 1
capacity: 2
size: 2
capacity: 4
size: 3
capacity: 8
size: 5
capacity: 16
size: 9
capacity: 32
size: 17
capacity: 64
size: 33
capacity: 128
size: 65
capacity: 256
size: 129
capacity: 512
size: 257
capacity: 1024
size: 513 
```

所以关键是 bool 的容量一次增加 64 个条目（int 或我的机器的大小）。这暗示它一次只保留 8 个字节。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-14T21:16:01.873

创建一个巨大的`vector<bool>`并查看程序的内存使用情况。

或者只是查看源代码 - 您可以查看`vector`标题。

# git - 使用 GIT 部署时更改 azure 网站上的配置

> ID：14326758
> 
> 赞同：7
> 
> 时间：2013-01-14T21:13:18.653
> 
> 标签：git, azure, azure-web-app-service

当我使用 GIT 进行部署时，如何配置我的网站以使用测试或发布配置？我可以配置我想使用的分支，但是构建配置。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T02:42:22.513

[最好的](http://blog.amitapple.com/post/38417491924/azurewebsitecustomdeploymentpart1)方法是使用自定义部署脚本，如本文所述。

一旦你这样做了，你就可以更好地控制你的应用程序的构建方式。在这种情况下，您可以像运行 msbuild 命令一样调整它以使用您想要的任何配置，就像您在本地计算机上运行 msbuild 时所做的那样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-06T22:01:45.323

您现在可以在配置页面上为此添加应用程序设置，而不必费心使用自定义部署脚本。

SCM_BUILD_ARGS -p:配置=[配置值]

例如

> [KEY] SCM_BUILD_ARGS
> 
> [值] -p:配置=QA

[https://github.com/projectkudu/kudu/wiki/Configurable-settings](https://github.com/projectkudu/kudu/wiki/Configurable-settings)

# c# - 文字写入后显示的消息

> ID：14326759
> 
> 赞同：0
> 
> 时间：2013-01-14T21:13:18.660
> 
> 标签：c#, wpf, vb.net, textbox, textchanged

我有一个`textbox`，在我在那个文本框中写文本后，我想显示一条消息（“你已经输入了文本”）。但是我想在没有事件的情况下展示*这个* `button_click`。我认为 textchanged 事件会起作用（使用 WPF）。但是我不能在消息显示之前写文本。

我觉得我需要一个`on_click`活动或类似的东西？但是，在写入文本后，我将如何在该文本框中显示消息？因此，只有在我在该文本框中键入文本之后才能看到该消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:26:32.040

这是您的文本框定义的样子

```
<TextBox Grid.Column="1" Grid.Row="3" Height="25" HorizontalAlignment="Left"   Margin="250,1,0,0" x:Name="T1"  
  VerticalAlignment="Top" Width="115" LostFocus="T1_LostFocus"  /> 
```

在 T1_lostFocus 中显示消息框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:21:17.917

转到文本框属性，在属性下会有一个闪电（事件）单击它并单击 TextChanged 属性，因此您将拥有：

```
private void textbox_TextChanged (blah, blah)
{
 timer1.enabled = true;
 timer1.interval = 1000
}
private void timer1_tick (blah, blah)
{
 MessageBox.Show("Text");
} 
```

当用户更改文字时，会触发计时器，1秒不输入后会触发消息

# symfony - InvalidArgumentException：没有扩展能够在 config_dev.yml 中加载“assetic”的配置

> ID：14326763
> 
> 赞同：0
> 
> 时间：2013-01-14T21:13:39.883
> 
> 标签：symfony, bundle

我不知道如何解决这个错误。这是我的 composer.jason ：

```
{
"name": "symfony/framework-standard-edition",
"description": "The \"Symfony Standard Edition\" distribution",
"autoload": {
    "psr-0": { "": "src/" }
},
"require": {
    "php": ">=5.3.3",
    "symfony/symfony": "2.2.*@dev",
    "symfony/framework-bundle": "2.2.*@dev",
    "doctrine/orm": ">=2.2.3,<2.4-dev",
    "doctrine/doctrine-bundle": "dev-master",
    "twig/extensions": "1.0.*@dev",
    "doctrine/data-fixtures": "dev-master",
    "doctrine/doctrine-fixtures-bundle": "dev-master",
    "stof/doctrine-extensions-bundle": "dev-master",
    "friendsofsymfony/user-bundle": "2.0.*dev",
    "symfony/swiftmailer-bundle": "2.1.*",
    "symfony/monolog-bundle": "2.1.*",
    "kriswallsmith/assetic": "1.1.*@dev"
},
"scripts": {
    "post-install-cmd": [
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
    ],
    "post-update-cmd": [
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::buildBootstrap",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::clearCache",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installAssets",
        "Sensio\\Bundle\\DistributionBundle\\Composer\\ScriptHandler::installRequirementsFile"
    ]
},
"extra": {
    "symfony-app-dir": "app",
    "symfony-web-dir": "web"
} 
```

}

这是我的 Appkernel.php ：

```
 class AppKernel extends Kernel
{
public function registerBundles()
{
    $bundles = array(
        new Symfony\Bundle\FrameworkBundle\FrameworkBundle(),
        new Symfony\Bundle\SecurityBundle\SecurityBundle(),
        new Symfony\Bundle\TwigBundle\TwigBundle(),
        new Symfony\Bundle\MonologBundle\MonologBundle(),
        new Symfony\Bundle\SwiftmailerBundle\SwiftmailerBundle(),
        new Symfony\Bundle\AsseticBundle\AsseticBundle(),
        new Doctrine\Bundle\DoctrineBundle\DoctrineBundle(),
        new Sdz\BlogBundle\SdzBlogBundle(),
        new Sdz\UserBundle\SdzUserBundle(),
        new Stof\DoctrineExtensionsBundle\StofDoctrineExtensionsBundle(),
        new FOS\UserBundle\FOSUserBundle(),
        new Ma\L4cBundle\MaL4cBundle(),
    );

    if (in_array($this->getEnvironment(), array('dev', 'test'))) {
        $bundles[] = new Symfony\Bundle\WebProfilerBundle\WebProfilerBundle();
        //$bundles[] = new Sensio\Bundle\DistributionBundle\SensioDistributionBundle();
        //$bundles[] = new Sensio\Bundle\GeneratorBundle\SensioGeneratorBundle();
        $bundles[] = new Doctrine\Bundle\FixturesBundle\DoctrineFixturesBundle();
    }

    return $bundles;
}

public function registerContainerConfiguration(LoaderInterface $loader)
{
    $loader->load(__DIR__.'/config/config_'.$this->getEnvironment().'.yml');
} 
```

}

我知道 symfony 捆绑包有内部资产类，所以我认为可能与 kriswallsmith 资产存在冲突。

# mysql - 为 MySQL 中查询返回的每一行调用一个存储过程

> ID：14326775
> 
> 赞同：27
> 
> 时间：2013-01-14T21:14:08.287
> 
> 标签：mysql, stored-procedures

我想要一个有效的 MySQL 存储过程：

`foreach id in (SELECT id FROM objects WHERE ... ) CALL testProc(id)`

我想我只是想要 MySQL 回答这个问题，但我不太了解游标：[如何为查询返回的每一行执行一次存储过程？](https://stackoverflow.com/questions/886293/how-do-i-execute-a-stored-procedure-once-for-each-row-returned-by-query)

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-14T22:32:40.007

“循环”（for-each、while 等）和“分支”（if-else、call 等）等概念是*过程性*的，在SQL 等*声明性*语言中不存在。通常人们可以用声明的方式表达自己想要的结果，这将是解决这个问题的正确方法。

例如，如果`testProc`要调用的过程将给定的值`id`用作另一个表的查找键，那么您可以（并且应该）`JOIN`将表简单地放在一起——例如：

```
SELECT ...
FROM   objects JOIN other USING (id)
WHERE  ... 
```

只有在极少数情况下，您的问题无法以声明方式表达，您才应该诉诸程序解决问题。存储*过程*是在 MySQL 中执行过程代码的唯一方法。因此，您要么需要修改现有的 sproc 以便它在循环中执行其当前逻辑，要么创建一个新的 sproc 来从循环中调用现有的：

```
CREATE PROCEDURE foo() BEGIN
  DECLARE done BOOLEAN DEFAULT FALSE;
  DECLARE _id BIGINT UNSIGNED;
  DECLARE cur CURSOR FOR SELECT id FROM objects WHERE ...;
  DECLARE CONTINUE HANDLER FOR NOT FOUND SET done := TRUE;

  OPEN cur;

  testLoop: LOOP
    FETCH cur INTO _id;
    IF done THEN
      LEAVE testLoop;
    END IF;
    CALL testProc(_id);
  END LOOP testLoop;

  CLOSE cur;
END 
```

# ios - Restkit：未调用 RKRequest 代表

> ID：14326789
> 
> 赞同：0
> 
> 时间：2013-01-14T21:14:53.887
> 
> 标签：ios, web-services, delegates, restkit

我真的被这个问题难住了。我正在使用 Restkit 访问 Web 服务。大多数操作都可以正常工作，但前两个，initializeDevice 和 insertNewPatron，不是。对于这些，会触发异步请求，但从不调用委托方法。我已经在服务器上进行了检查，没有证据表明正在拨打这些电话。我不知道这些操作有什么不同使它们不起作用。这是进行调用的类：

```
-(id)initForController:(UIViewController *)viewController{
    self.vc=viewController;
    NSString *baseURL = @"https://xxxxxxxxx/APNS_WebService/rest/operations/";
    NSURL *url=[NSURL URLWithString:baseURL];

    client = [RKClient clientWithBaseURL:url];
    client.disableCertificateValidation=YES;

    return self;
}

-(void)insertNewPatronWithCard:(NSString *)cardNumber PIN:(NSString *)pin NickName:(NSString *)nickname Device:(NSString *)deviceID{

    request = [client requestWithResourcePath:[NSString stringWithFormat:@"/insertNewPatron?cardNumber=%@&pin=%@&nickname=%@&deviceID=%@",cardNumber,pin,nickname,deviceID]];
    NSDictionary *params = [NSDictionary dictionaryWithObject:@"insertNewPatron" forKey:@"operation"];
    request.params=params;
    request.delegate=self;
    [request sendAsynchronously];

}

-(void)initializeDeviceWithID:(NSString *)deviceID{

    request = [client requestWithResourcePath:[NSString stringWithFormat:@"/initializeDevice?deviceID=%@",deviceID]];
    NSDictionary *params = [NSDictionary dictionaryWithObject:@"initializeDevice" forKey:@"operation"];
    request.params=params;
    request.delegate=self;
    [request sendAsynchronously];

}

-(void)updateDevicePreferencesWithDeviceID:(NSString *)deviceID DueDateNotice:(NSString *)dueDateNotice HoldsNotice:(NSString *)holdsNotice EventNotice:(NSString *)eventNotice{

    request = [client requestWithResourcePath:[NSString stringWithFormat:@"/updateDevicePreferences?deviceID=%@&dueDateNotice=%@&holdsNotice=%@&eventNotice=%@",deviceID,dueDateNotice,holdsNotice,eventNotice]];
    NSDictionary *params = [NSDictionary dictionaryWithObject:@"updateDevicePreferences" forKey:@"operation"];
    request.params=params;
    request.delegate=self;
    [request sendAsynchronously];

}

-(void)removeUserWithCard:(NSString *)cardNumber{

    request = [client requestWithResourcePath:[NSString stringWithFormat:@"/removeUser?cardNumber=%@",cardNumber]];
    NSDictionary *params = [NSDictionary dictionaryWithObject:@"removeUser" forKey:@"operation"];
    request.params=params;
    request.delegate=self;
   [request sendAsynchronously];

}

-(void)addEventWithDevice:(NSString *)deviceID EventID:(NSString *)eventID{

    request = [client requestWithResourcePath:[NSString stringWithFormat:@"/addEvent?deviceID=%@&eventID=%@",deviceID,eventID]];
    NSDictionary *params = [NSDictionary dictionaryWithObject:@"addEvent" forKey:@"operation"];
    request.params=params;
    request.delegate=self;
    [request send];

}

-(void)removeEventWithDevice:(NSString *)deviceID EventID:(NSString *)eventID{

   request = [client requestWithResourcePath:[NSString stringWithFormat:@"/removeEvent?deviceID=%@&eventID=%@",deviceID,eventID]];
    NSDictionary *params = [NSDictionary dictionaryWithObject:@"removeEvent" forKey:@"operation"];
    request.params=params;
    request.delegate=self;
     [request sendAsynchronously];

}

-(void)removeAllEventsWithDevice:(NSString *)deviceID{

    request = [client requestWithResourcePath:[NSString stringWithFormat:@"/removeAllEvents?deviceID=%@",deviceID]];
    request.delegate=self;
    NSDictionary *params = [NSDictionary dictionaryWithObject:@"removeAllEvents" forKey:@"operation"];
    request.params=params;

   [request sendAsynchronously];

} 
```

我注意到，对于不起作用的操作，在 Restkit 日志记录中，我收到一条消息，上面写着“准备好 GET UrlRequest”，但不是那个写着“继续请求”的消息，我看到的操作是有效的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T14:02:03.720

您是否使用断点检查所有变量是否正确？没有 nil 代表或您缺少的东西？您是在隔离请求还是在另一个呼叫同时发出请求？

您的一个电话很可能在此过程中失去了代表。我建议对异步请求使用**块**而不是委托范例以避免竞争条件。

希望能帮助到你！

# highcharts - 如何将背景图像（图案）添加到 highchart 柱形图中？

> ID：14326794
> 
> 赞同：3
> 
> 时间：2013-01-14T21:15:14.980
> 
> 标签：highcharts, background-image

我第一次使用 highcharts.js。看起来很棒而且很强大，到目前为止我很喜欢它。

但是，我正在尝试让我的柱形图看起来更性感，并且无法找到有关我如何做到这一点的信息，至少在使用列的重复背景图像方面。

这是我设计的：![在此处输入图像描述](../Images/88cf928a4b9bf50b85e8ef58dae7606f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-05T08:11:20.463

您可以使用此添加模式

```
 color: {
                pattern: 'https://rawgithub.com/highslide-software/pattern-fill/master/graphics/pattern3.png',
                width: 6,
                height: 6
            } 
```

在 seriesData 中进行相应修改以满足您的需求

**演示**- [Fiddle Here](http://jsfiddle.net/highcharts/ErU8H/)

![在此处输入图像描述](../Images/86154a20445e7a5ca8c87cf4dfbf29ab.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T16:04:09.370

仅供参考，我在 Highcharts 论坛 ( [http://highslide.com/forum/viewtopic.php?f=9&t=25673](http://highslide.com/forum/viewtopic.php?f=9&t=25673) )上回答了同样的问题

首先，有一个使用模式填充列的想法。基本演示发布在 Highcharts Uservoice 网站 ( [http://highcharts.uservoice.com/forums/55896-general/suggestions/2378007-allow-fill-patterns-for-areas-columns-plot-bands](http://highcharts.uservoice.com/forums/55896-general/suggestions/2378007-allow-fill-patterns-for-areas-columns-plot-bands) )。

您可以改进该代码以创建带有渐变填充的 SVG 图案。主要困难是支持数据更新（和动画）。因此，我们无法为渐变元素定义固定宽度。请参阅下面的示例代码：

```
Highcharts.Renderer.prototype.color = function (color, elem, prop) {

    if (color && color.pattern && prop === 'fill') {
        // SVG renderer
        if (this.box.tagName == 'svg') {
            var patternA,
                patternB,
                bgColor,
                bgPattern,
                image,
                id;

            id = 'highcharts-pattern-' + idCounter++;

            patternA = this.createElement('pattern')
            .attr({
                id: id,
                patternUnits: 'userSpaceOnUse',
                width: '100%',
                height: '100%'
            })
            .add(this.defs);

            patternB = this.createElement('pattern')
            .attr({
                id: id + '-image',
                patternUnits: 'userSpaceOnUse',
                width: color.width,
                height: color.width
            })
            .add(this.defs);

            image = this.image(color.pattern, 0, 0, 6, 6)
            .add(patternB);

            bgColor = this.rect(0, 0, 0, 0, 0, 0)
            .attr({
                fill: color.fill,
                width: '100%',
                height: '100%'
            })
            .add(patternA);

            bgPattern = this.rect(0, 0, 0, 0, 0, 0)
            .attr({
                fill: 'url(' + this.url + '#' + id + '-image)',
                width: '100%',
                height: '100%'
            })
            .add(patternA);

            return 'url(' + this.url + '#' + id + ')';

            // VML renderer
        } else {
            var markup = ['<', prop, ' type="tile" src="', color.pattern, '" />'];
            elem.appendChild(
            document.createElement(this.prepVML(markup)));
        }

    } else {
        return base.apply(this, arguments);
    }
}; 
```

现场演示可在此处获得：http: [//jsfiddle.net/Kr82z/](http://jsfiddle.net/Kr82z/)

# c# - XSLT 与 C# win8 应用程序中的 h2 标记不匹配

> ID：14326810
> 
> 赞同：0
> 
> 时间：2013-01-14T21:16:23.323
> 
> 标签：c#, xaml, xslt, windows-8

我正在用 C# 构建一个 Windows 8 应用程序。我在 XSLT 文件的帮助下将 HTML 转换为 XAML。我正在使用[https://github.com/MacawNL/WinRT-RichTextBlock.Html2Xaml](https://github.com/MacawNL/WinRT-RichTextBlock.Html2Xaml)将 HTML 转换为 XAML。这适用于我一直使用的所有 HTML 标签，除了 H2（或 H3）。

我的 XSLT 文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:msxsl="urn:schemas-microsoft-com:xslt"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    exclude-result-prefixes="msxsl"
>
    <xsl:output method="xml" indent="yes"/>

    <!-- The html root element must be div, it translates to a xaml richtextblock.-->
    <xsl:template match="/div" priority="9">
      <RichTextBlock>
        <RichTextBlock.Resources>
          <Style x:Key="Bullet" TargetType="Ellipse">
            <Setter Property="Fill" Value="Black" />
            <Setter Property="Width" Value="6" />
            <Setter Property="Height" Value="6" />
            <Setter Property="Margin" Value="-30,0,0,1" />
          </Style>
          <Style x:Key="Link" TargetType="HyperlinkButton">
            <Setter Property="Foreground" Value="#ff6600" />
            <Setter Property="BorderThickness" Value="1" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="Margin" Value="-15,-11" />
          </Style>
        </RichTextBlock.Resources>
        <xsl:if test="normalize-space(text()) != ''">
          <Paragraph><xsl:value-of select="normalize-space(text())" /></Paragraph>
        </xsl:if>
        <xsl:apply-templates select="/div/*" />
      </RichTextBlock>
    </xsl:template>
    <xsl:template match="div" priority="0">
      <Span><xsl:apply-templates /></Span>
    </xsl:template>

    <!-- XAML Paragraphs cannot contain paragraphs, so we convert top-level html paragraphs to xaml paragraphs and convert nested html paragraphs to xaml spans with linebreaks -->
    <xsl:template match="/div/P | /div/p" priority="9">
      <Paragraph LineStackingStrategy="MaxHeight" Foreground="Black"><xsl:apply-templates />
        <LineBreak />
      </Paragraph>
    </xsl:template>
    <xsl:template match="P | p" priority="0">
      <Paragraph LineStackingStrategy="MaxHeight" Foreground="Black"><LineBreak /><xsl:apply-templates /><LineBreak /></Paragraph>
    </xsl:template>
    <xsl:template match="h2 | H2">
      <Paragraph>
        <Bold FontSize="56" Foreground="Black">
          <xsl:apply-templates />
        </Bold>        
        <LineBreak/>
      </Paragraph>
    </xsl:template>
    <!-- The RichTextBlock XAML element can contain only paragraph child elements, so any unknown html child elements of the root element will become XAML paragraphs -->
    <xsl:template match="/div/*">
      <Paragraph LineStackingStrategy="MaxHeight" Foreground="Black"><xsl:apply-templates /></Paragraph>
    </xsl:template>

    <!-- Lists can only occur outside paragraphs, at the top level -->
    <xsl:template match="/div/UL | /div/ul">
      <Paragraph Foreground="Black" Margin="20,0,0,0"><LineBreak /><xsl:apply-templates /></Paragraph>
    </xsl:template>

  <xsl:template match="LI | li">
      <Span><InlineUIContainer><Ellipse Style="{{StaticResource Bullet}}"/></InlineUIContainer><xsl:apply-templates /><LineBreak /></Span>
    </xsl:template>

    <xsl:template match="B | b">
      <Bold FontSize="56"><xsl:apply-templates /></Bold>
    </xsl:template>
    <xsl:template match="STRONG | strong">
      <Bold FontSize="20" Foreground="Black">
        <xsl:apply-templates />
      </Bold>
    </xsl:template>
    <xsl:template match="I | i">
      <Italic><xsl:apply-templates /></Italic>
    </xsl:template>

    <xsl:template match="U | u">
      <Underline><xsl:apply-templates /></Underline>
    </xsl:template>

    <xsl:template match="BR | br">
      <LineBreak />
    </xsl:template>

    <xsl:template match="A | a">
      <Span><InlineUIContainer><HyperlinkButton Style="{{StaticResource Link}}"><xsl:attribute name="NavigateUri"><xsl:value-of select="@href"/></xsl:attribute><xsl:apply-templates /></HyperlinkButton></InlineUIContainer></Span>
    </xsl:template>

    <xsl:template match="IMG | img">
      <InlineUIContainer><Image MaxHeight="480" Margin="0,20,0,10" Stretch="Uniform" ><xsl:attribute name="Source"><xsl:value-of select="@src"/></xsl:attribute><xsl:apply-templates /></Image></InlineUIContainer>
    </xsl:template>

    <!-- Note that by default, the text content of any unmatched HTML elements will be copied in the XAML. -->
</xsl:stylesheet> 
```

我已经尝试了我能找到的任何选项，但它们都不起作用。知道如何匹配 H2 标记以将其转换为 XAML 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T01:15:22.733

默认优先级`<xsl:template match="/div/*">`高于 ， `<xsl:template match="h2 | H2">` 因此如果 h2 的父级是 div，则 h2 模板将永远不会触发。将 `priority="10" 添加到 h2 模板（或您选择的其他数字）

# ruby - 在 sinatra 应用程序中获取回溯

> ID：14326815
> 
> 赞同：0
> 
> 时间：2013-01-14T21:16:43.190
> 
> 标签：ruby, sinatra

如果出现错误，我试图在 sinatra 中获取回溯。我知道rails有一个

`Rails.respond_to?(:backtrace_cleaner)`

我看到 sinatra 应该有一个（默认启用）`STDERR` 所以我尝试了

`STDERR.inspect`

我得到了`#<IO:<STDERR>>`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T02:22:56.457

抢救异常时，捕获异常对象。

```
 begin
   raise "hello"
 rescue => e
   e.backtrace
 end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T01:50:48.920

在 Ruby 中，您可以在任何地方调用方法`caller`并以数组的形式获取完整的回溯。

# php - 正则表达式使用分隔符验证项目

> ID：14326817
> 
> 赞同：1
> 
> 时间：2013-01-14T21:17:00.563
> 
> 标签：php, regex

我在 php 中使用这个正则表达式进行电子邮件验证（基于[这里](http://www.mkyong.com/regular-expressions/how-to-validate-email-address-with-regular-expression/)）

```
^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$; 
```

我的问题是如何验证由分隔符分隔的电子邮件列表的输入。假设分隔符是“，”或“;” 或“，”或“；”。

我想我应该添加类似的东西

```
(\s*(;|,)\s*|\s*$) 
```

但它不起作用......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:26:51.337

验证电子邮件的真实性最好由模块完成，而不是简短的*正则表达式*。见[http://www.ex-parrot.com/pdw/Mail-RFC822-Address.html](http://www.ex-parrot.com/pdw/Mail-RFC822-Address.html)

但幸运的是，`php`有一个验证器：

```
<?php
$email_a = 'joe@example.com';
$email_b = 'bogus';

if (filter_var($email_a, FILTER_VALIDATE_EMAIL)) {
    echo "This (email_a) email address is considered valid.";
}
if (filter_var($email_b, FILTER_VALIDATE_EMAIL)) {
    echo "This (email_b) email address is considered valid.";
}
?> 
```

见[http://php.net/manual/en/filter.examples.validation.php](http://php.net/manual/en/filter.examples.validation.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:27:45.097

不要使用正则表达式来验证电子邮件，PHP 对此[filter_var()](http://php.net/manual/en/filter.examples.validation.php)有一个函数：

```
$email = 'joe@example.com';
if (filter_var($email, FILTER_VALIDATE_EMAIL)) {
  //valid
}else{
  //not
} 
```

您可以修改此代码并使用[explode(',',$email)](http://php.net/manual/en/function.explode.php)来验证多封电子邮件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:26:43.947

如果您只接受纯正则表达式解决方案，则可能会给您无法使用的答案，出于以下几个原因，我建议您使用带分隔符的[爆炸](http://php.net/manual/en/function.explode.php)并继续遍历数组并依次验证每封电子邮件：

1.  您的正则表达式和处理它的代码将被简化。

2.  您的正则表达式只需要处理电子邮件的一般用例，并且可以在您需要验证电子邮件地址的任何时候成为一般可重复使用的操作。将正则表达式操作换成调用用于电子邮件验证的库或任何其他自定义验证器也很简单。

3.  处理可能的相关必需品会更容易，例如在您的输出中指出哪些电子邮件未能验证，或接受所有已验证的地址并丢弃那些没有验证的地址。

# java - 命令行 java、文件参数和管道输入

> ID：14326819
> 
> 赞同：1
> 
> 时间：2013-01-14T21:17:15.767
> 
> 标签：java, command-line, arguments, pipe

我正在开发一个程序，我希望它像这样运行

```
my_program -o Words 
```

其中“Words”是一个文件，但我也希望它能够使用管道输入而不是来自文件，所以

```
grep test Words | my_program -o 
```

我如何收集和存储管道中的数据？如何检查数据是否已通过管道输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:28:00.903

在 Java 中：

*   `System.in`“是”标准输入；
*   `System.out`“是”标准输出；
*   `System.err`“是”标准错误。

通过使用管道，您重定向标准输入，因此`foo | bar`将任何`foo`输出重定向到标准输出到`bar`的标准输入。

`System.in`是一个`InputStream`。如果您希望有可能从标准输入和文件中读取，一种可能性是这样做：

```
InputStream in = System.in;

if (hasOptionToReadFromFile)
    in = Files.newInputStream(Paths.get(fileName)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:18:39.307

要读取管道数据，您应该从程序中的标准输入读取。

`grep test Words | my_program -o`

在您的示例`|`中，将标准输出通过管道传输`grep test Words`到标准输入`my_program`。请参阅[有关流、管道和重定向](http://www.ibm.com/developerworks/linux/library/l-lpic1-v3-103-4/index.html)的文章。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:25:53.833

可以`System.in`使用标准工具（如`Scanner`等）读取管道输入的数据`BufferedInputReader`。

与其检查管道输入，不如检查相反的条件可能更容易：如果文件已被指定为参数，如果没有，则从标准输入中读取

# javascript - Ext JS 4 行编辑保存问题

> ID：14326824
> 
> 赞同：0
> 
> 时间：2013-01-14T21:17:35.670
> 
> 标签：javascript, extjs, grid

我正在尝试使用 Ext JS 创建一个简单的网格，它允许我快速浏览和编辑每一行。基本上我想开始编辑一行，点击向下箭头并能够开始编辑下一行。如果我不保存到最后也没关系，但现在当我尝试向下导航到下一个字段时，它告诉我需要先提交或取消编辑。是否有我错过的设置或我只是忽略的东西？我对 Ext JS 还是很陌生，还没有完全理解一切是如何工作或联系在一起的。

这是我的代码：

```
 <!DOCTYPE html> 

<html>
<head>
    <title>Grid Testing</title>
    <script type="text/javascript" src="js/ext-4.1.1a/ext-all.js"></script>

    <link rel="stylesheet" type="text/css" href="http://cdn.sencha.com/ext-4.1.1a-gpl/resources/css/ext-all-debug.css" />

    <style type="text/css">
        .x-selectable, .x-selectable * {
            -moz-user-select: text!important;
            -khtml-user-select: text!important;
        }
        .x-grid-row-editor-buttons{
            display: none;
        }
    </style>

</head>

<body>

        <div id="grid-example"></div>

<script type="text/javascript">
Ext.application({
    name: 'myGrid',    
    autoCreateViewport: false,
    launch: function() {

        Ext.require([
            'Ext.grid.*',
            'Ext.data.*',
            'Ext.util.*',
            'Ext.state.*',
            'Ext.form.*',
        ]);

        /**
         * MODEL
         **/
        var model = Ext.define('Answer', {
            extend: 'Ext.data.Model',
            fields: [{
                name: 'answer_number',
                type: 'float',
                convert: null,
                defaultValue: undefined
            },
            {
                name: 'answer_text',
                type: 'float',
                convert: null,
                defaultValue: undefined
            },
            {
                name: 'data_column',
                type: 'float',
                convert: null,
                defaultValue: undefined
            }],
            idProperty: 'answer_number'
        });

        /**
         * STORE
         **/
        // sample static data for the store
        var myData = [[1, 'test answer 1', 12], [2, 'test answer 2', 12], [3, 'test answer 3', 12], [4, 'test answer 4', 12], [5, 'test answer 5', 12]];
        // create the data store
        var store = Ext.create('Ext.data.ArrayStore', {
            model: 'Answer',
            data: myData,
            autoSync: true,
            autoLoad: true,
        });

        var rowEditing = Ext.create('Ext.grid.plugin.RowEditing', {
            clicksToEdit: 1,
            autoCancel: false,
        });

        var columns = [{
                text: '#',
                width: 40,
                sortable: false,
                dataIndex: 'answer_number'
            },
            {
                text: 'Answer',
                flex: 1,
                sortable: false,
                dataIndex: 'answer_text',
                editor: {
                    allowBlank: true
                }
            },
            {
                text: 'Data Column',
                width: 75,
                sortable: false,
                dataIndex: 'data_column'
            }];

        // create the Grid
        var grid = Ext.create('Ext.grid.Panel', {
            store: store,
            stateful: true,
            collapsible: false,
            multiSelect: true,
            columns: columns,
            height: 150,
            width: 600,
            renderTo: 'grid-example',
            plugins: [rowEditing],
        }); //end grid

        grid.getEl().addKeyMap({
            eventName: "keyup",
            binding: [
                {
                    // Navigate through the answers or create a new one if at the end
                    key: Ext.EventObject.DOWN,
                    fn:  function(){
                        store.commitChanges();  //this doesnt seem to be working
                        var currentRow = grid.getSelectionModel().getSelection()[0];
                        var rowCount = store.count();
                        if((currentRow['index']+1) < rowCount){
                            //select next row
                            rowEditing.startEdit((currentRow['index']+1), 1);
                        }else{
                            //create new one with dummy data
                            var r = Ext.create('Answer', {
                                answer_number: '9',
                                answer_text: '',
                                data_column: '50'
                            });
                            store.insert(rowCount, r);
                            rowEditing.startEdit(rowCount, 1)
                        }
                    }
                },
                {
                    // Navigate up through the answers
                    key: Ext.EventObject.UP,
                    fn:  function(){
                        store.commitChanges();
                        var currentRow = grid.getSelectionModel().getSelection()[0];
                        rowEditing.startEdit((currentRow['index']-1), 1);
                    }
                }

            ]
        });

    },
});
</script>

</body>
</html> 
```

很感谢任何形式的帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T14:38:10.303

好吧，我切换到 cellEditing 而不是 rowEditing，现在它似乎工作正常（也内置了 tab/shift+tab 用法）。

# ruby - 在存根实例上存根方法时，无法对 should_receive 进行存根验证

> ID：14326827
> 
> 赞同：0
> 
> 时间：2013-01-14T21:17:47.737
> 
> 标签：ruby, rspec, mocking

我正在尝试对 Koala 包装的 facebook 图形 api 进行存根。我的目标是验证图形是否使用给定的访问令牌进行了初始化，并调用了“me”方法。

我的 rspec 代码如下所示：

需要'spec_helper'

```
describe User do

  describe '.new_or_existing_facebook_user' do
    it 'should get the users info from facebook using the access token' do
      # SETUP
      access_token = '231231231321'
      # build stub of koala graph that expected get_object with 'me' to be called and return an object with an email
      stub_graph = stub(Koala::Facebook::API)
      stub_graph.stub(:get_object). with('me'). and_return({
        :email => 'jame1231231tl@yahoo.com'
      })
      # setup initializer to return that stub
      Koala::Facebook::API.stub(:new) .with(access_token). and_return(stub_graph)

      # TEST
      user = User.new_or_existing_facebook_user(access_token)

      # SHOULD
      stub_graph.should_receive(:get_object).with('me') 
    end
  end
end 
```

模型代码如下所示：

```
class User < ActiveRecord::Base
  # attributes left out for demo
  class << self
    def new_or_existing_facebook_user(access_token)
      @graph = Koala::Facebook::API.new(access_token)
      @me = @graph.get_object('me')

      # rest of method left out for demo
    end
  end
end 
```

运行测试时，我收到错误：

```
 1) User.new_or_existing_facebook_user should get the users info from facebook using the access token
     Failure/Error: stub_graph.should_receive(:get_object).with('me')
       (Stub Koala::Facebook::API).get_object("me")
           expected: 1 time
           received: 0 times
     # ./spec/models/user_spec.rb:21:in `block (3 levels) in <top (required)>' 
```

我如何存根该方法是错误的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:24:13.087

`should_receive`需要在调用方法*之前进行。*Rspec 消息期望通过接管方法并监听它来工作，与存根非常相似。事实上，你可以把它代替你的存根。

然后，期望将在规范的其余部分完成后决定它是否成功。

试试这个：

```
describe User do

  describe '.new_or_existing_facebook_user' do
    it 'should get the users info from facebook using the access token' do
      # SETUP
      access_token = '231231231321'
      # build stub of koala graph that expected get_object with 'me' to be called and return an object with an email
      stub_graph = stub(Koala::Facebook::API)

      # SHOULD
      stub_graph.should_receive(:get_object).with('me').and_return({
        :email => 'jamesmyrtl@yahoo.com'
      })

      # setup initializer to return that stub
      Koala::Facebook::API.stub(:new).with(access_token).and_return(stub_graph)     

      # TEST
      user = User.new_or_existing_facebook_user(access_token)
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:27:25.067

首先，我不会使用，`stub`因为 stub 表明您很可能不关心对象的行为。`mock`即使它们实例化了相同的东西，您也应该使用它。这更清楚地表明你想测试它的行为。

您的问题来自您在测试后设定的期望。您需要在测试前设置期望值才能注册。

# actionscript - 如何使用 FlasCC 将 ByteArray 传递给 C 代码

> ID：14326828
> 
> 赞同：3
> 
> 时间：2013-01-14T21:17:48.297
> 
> 标签：actionscript, flascc

我想将 ByteArray 从 ActionScript 传递给 C 函数。

基本上我想做这样的事情：

```
void init() __attribute__((used,annotate("as3sig:public function init(byteData: ByteArray):int"),
        annotate("as3package:example")));

void init()
{
   //here I want to pass byteArray data to C variable.
   //similar to AS3_GetScalarFromVar(cVar, asVar) 
} 
```

不幸的是，我在 flascc 文档中找不到任何功能来帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-20T23:33:17.923

例子：

```
void _init_c(void) __attribute((used,
    annotate("as3sig:public function init(byteData:ByteArray) : void"),
    annotate("as3import:flash.utils.ByteArray")));

void _init_c()
{
    char *byteArray_c;
    unsigned int len;

    inline_as3("%0 = byteData.bytesAvailable;" : "=r"(len));
    byteArray_c = (char *)malloc(len);

    inline_as3("CModule.ram.position = %0;" : : "r"(byteArray_c));
    inline_as3("byteData.readBytes(CModule.ram);");

    // Now byteArray_c points to a copy of the data from byteData.
    // Note that byteData.position has changed to the end of the stream.

    // ... do stuff ...

    free(byteArray_c);
} 
```

这里的关键是 C 中的堆在 AS3 端暴露为`CModule.ram`，它是一个`ByteArray`对象。

在 C 中 malloc 的指针在 AS3 中被视为`CModule.ram`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-27T10:39:13.300

您应该使用 CModule.malloc 和 CModule.writeBytes 方法以 C 风格的方式使用指针进行操作。看看 $FLASCC/samples/06_SWIG/PassingData/PassData.as

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-06-12T02:55:51.263

```
void _init_c(void) __attribute((used,
    annotate("as3sig:public function init(byteData:ByteArray) : void"),
    annotate("as3import:flash.utils.ByteArray")));

void _init_c()
{
    char *byteArray_c;
    unsigned int len;

    inline_as3("%0 = byteData.bytesAvailable;" : "=r"(len));
    byteArray_c = (char *) malloc(len);

    inline_as3("byteData.readBytes(CModule.ram, %0, %1);" : : "r"(byteArray_c), "r"(len));

    // Now byteArray_c points to a copy of the data from byteData.
    // Note that byteData.position has changed to the end of the stream.

    // ... do stuff ...

    free(byteArray_c);
} 
```

# c++ - 如何在原生 C++ 应用程序中实现试用体验（无 XAML）

> ID：14326831
> 
> 赞同：0
> 
> 时间：2013-01-14T21:18:09.940
> 
> 标签：c++, native, windows-phone-8, cocos2d-x, trial

我可以在我的原生 c++ 应用程序中实现试用模式吗（cocos2d-x-win8）

所有示例都显示 C#/XAML，我找不到任何在 c++ 中工作的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T23:58:28.430

我不确定您问的是 Windows 8 还是 Windows Phone 8，但幸运的是答案非常相似。在 C++/C# 的 WP8/Win8 上，您应该使用 CurrentApp.LicenseInformation.IsTrial。但是，由于 WP8 中的一个错误，在应用程序的主线程上调用**CurrentApp::LicenseInformation->IsTrial**将引发异常。所以你应该在不同的线程上：

```
ThreadPool::RunAsync( ref new WorkItemHandler( [](IAsyncAction^ operation)
{
auto value = CurrentApp::LicenseInformation->IsTrial;
})); 
```

但是，请注意 Win8 商店提供内置的限时试用，而 WP8 商店默认不提供。在 WP8 中，您应该实现自己的试验逻辑。

# c# - 如何制作一个可序列化的类，其中包含一组类中一个类的实例

> ID：14326832
> 
> 赞同：10
> 
> 时间：2013-01-14T21:18:10.203
> 
> 标签：c#, .net

在 .Net 4 或 4.5 中，您将如何设计一个包含一组类中的一个类的实例的可序列化类？例如，假设我有一个 Garage 类，它可以保存任何“车辆”类型类的实例，例如 Car、Boat、Motorcycle、Motorhome。但是车库只能保存其中一个类的实例。我尝试了几种不同的方法来做到这一点，但我的问题是使其可序列化。

这是一个起始示例，其中 Garage 类中的实例只有一个选项。您应该能够将其直接插入新的控制台应用程序并进行尝试。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Xml;
using System.Xml.Serialization;

namespace Patterns
{
    [Serializable()]
    public class Garage
    {
        private Vehicle _MyVehicle;

        public Garage()
        {
        }
        public string GarageOwner { get; set; }
        public Vehicle MyVehicle
        {
            get { return _MyVehicle; }
            set { _MyVehicle = value; }
        }
    }

    [Serializable()]
    public class Vehicle
    {
        public string VehicleType { get; set; }
        public int VehicleNumber { get; set; }
    }

    class Serializer
    {
        static string _StartupPath = @"C:\Projects\Patterns\Data\";
        static string _StartupFile = "SerializerTest.xml";
        static string _StartupXML = _StartupPath + _StartupFile;

        static void Main(string[] args)
        {
            Console.Write("Press w for write. Press r for read:");
            ConsoleKeyInfo cki = Console.ReadKey(true);
            Console.WriteLine("Pressed: " + cki.KeyChar.ToString());
            if (cki.KeyChar.ToString() == "w")
            {
                Garage MyGarage = new Garage();
                MyGarage.GarageOwner = "John";
                MyGarage.MyVehicle = new Vehicle();
                MyGarage.MyVehicle.VehicleType = "Car";
                MyGarage.MyVehicle.VehicleNumber = 1234;
                WriteGarageXML(MyGarage);
                Console.WriteLine("Serialized");
            }
            else if (cki.KeyChar.ToString() == "r")
            {
                Garage MyGarage = ReadGarageXML();
                Console.WriteLine("Deserialized Garage owned by " +  MyGarage.GarageOwner);
            }
            Console.ReadKey();
        }
        public static void WriteGarageXML(Garage pInstance)
        {
            XmlSerializer writer = new XmlSerializer(typeof(Garage));
            using (FileStream file = File.OpenWrite(_StartupXML))
            {
                writer.Serialize(file, pInstance);
            }
        }
        public static Garage ReadGarageXML()
        {
            XmlSerializer reader = new XmlSerializer(typeof(Garage));
            using (FileStream input = File.OpenRead(_StartupXML))
            {
                return reader.Deserialize(input) as Garage;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:57:04.877

基于另[一篇 SO 文章](https://stackoverflow.com/questions/10236014/xml-serialization-of-class-which-has-a-member-extended-from-an-abstract-type?rq=1)，这最终对我有用。它可以干净地序列化和反序列化。使用此示例，我可以设计一个对象“树”，其中包含所用对象的选项。因此，这可以扩展为，一辆汽车可以有一个具有几种不同发动机类型类别的发动机和一个具有几种不同内饰类型的内饰……等等。

代码通过添加以下语句开始工作，例如：[XmlInclude(typeof(Car))]

但是请让我知道是否有更好的方法！

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.IO;
using System.Xml;
using System.Xml.Serialization;

namespace Patterns
{
    public class Garage
    {
        private Vehicle _MyVehicle;

        public Garage()
        {
        }
        public string GarageOwner { get; set; }

        public Vehicle MyVehicle
        {
            get { return _MyVehicle; }
            set { _MyVehicle = value; }
        }
    }

    [XmlInclude(typeof(Car))]
    [XmlInclude(typeof(Boat))]
    [XmlInclude(typeof(Motorcycle))]
    [XmlInclude(typeof(Motorhome))]
    public abstract class Vehicle
    {
        public string VehicleType { get; set; }
        public int VehicleNumber { get; set; }
    }
    public class Car : Vehicle
    {
        public int Doors { get; set; }
    }
    public class Boat : Vehicle
    {
        public int Engines { get; set; }
    }
    public class Motorcycle : Vehicle
    {
        public int Wheels { get; set; }
    }
    public class Motorhome : Vehicle
    {
        public int Length { get; set; }
    }

    class Serializer
    {
        static string _StartupPath = @"C:\Projects\Patterns\Data\";
        static string _StartupFile = "SerializerTest.xml";
        static string _StartupXML = _StartupPath + _StartupFile;

        static void Main(string[] args)
        {
            Console.Write("Press w for write. Press r for read:");
            ConsoleKeyInfo cki = Console.ReadKey(true);
            Console.WriteLine("Pressed: " + cki.KeyChar.ToString());
            if (cki.KeyChar.ToString() == "w")
            {
                Garage MyGarage = new Garage();
                MyGarage.GarageOwner = "John";
                Car c = new Car();
                c.VehicleType = "Lexus";
                c.VehicleNumber = 1234;
                c.Doors = 4;
                MyGarage.MyVehicle = c;
                WriteGarageXML(MyGarage);
                Console.WriteLine("Serialized");
            }
            else if (cki.KeyChar.ToString() == "r")
            {
                Garage MyGarage = ReadGarageXML();
                Console.WriteLine("Deserialized Garage owned by " + MyGarage.GarageOwner);
            }
            Console.ReadKey();
        }
        public static void WriteGarageXML(Garage pInstance)
        {
            XmlSerializer writer = new XmlSerializer(typeof(Garage));
            using (FileStream file = File.OpenWrite(_StartupXML))
            {
                writer.Serialize(file, pInstance);
            }
        }
        public static Garage ReadGarageXML()
        {
            XmlSerializer reader = new XmlSerializer(typeof(Garage));
            using (FileStream input = File.OpenRead(_StartupXML))
            {
                return reader.Deserialize(input) as Garage;
            }
        }
    }    
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-14T21:30:04.380

要序列化可序列化类的序列，您可以使用通用列表实例。

我生成了这个

```
<?xml version="1.0"?>
<Garage xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
  <GarageOwner>John</GarageOwner>
  <MyVehicles>
    <Vehicle>
      <VehicleType>Car</VehicleType>
      <VehicleNumber>1234</VehicleNumber>
    </Vehicle>
    <Vehicle>
      <VehicleType>Boat</VehicleType>
      <VehicleNumber>56234</VehicleNumber>
    </Vehicle>
  </MyVehicles>
</Garage> 
```

通过简单地将 MyVehicle 转换为通用列表

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Xml.Serialization;

namespace Patterns
{
    [Serializable()]
    public class Garage
    {
        public string GarageOwner { get; set; }
        public List<Vehicle> MyVehicles { get; set; }
    }

    [Serializable()]
    public class Vehicle
    {
        public string VehicleType { get; set; }
        public int VehicleNumber { get; set; }
    }

    class Serializer
    {
        static string _StartupPath = @"C:\temp\";
        static string _StartupFile = "SerializerTest.xml";
        static string _StartupXML = _StartupPath + _StartupFile;

        static void Main(string[] args)
        {
            Console.Write("Press w for write. Press r for read:");
            ConsoleKeyInfo cki = Console.ReadKey(true);
            Console.WriteLine("Pressed: " + cki.KeyChar.ToString());
            if (cki.KeyChar.ToString() == "w")
            {
                Garage MyGarage = new Garage();
                MyGarage.GarageOwner = "John";

                // Create some vehicles
                var myVehicle1 = new Vehicle();
                myVehicle1.VehicleType = "Car";
                myVehicle1.VehicleNumber = 1234;

                var myVehicle2 = new Vehicle();
                myVehicle2.VehicleType = "Boat";
                myVehicle2.VehicleNumber = 56234;

                // Create a new instance and add the vehicles
                MyGarage.MyVehicles = new List<Vehicle>()
                {
                    myVehicle1, 
                    myVehicle2
                };

                WriteGarageXML(MyGarage);
                Console.WriteLine("Serialized");
            }
            else if (cki.KeyChar.ToString() == "r")
            {
                Garage MyGarage = ReadGarageXML();
                Console.WriteLine("Deserialized Garage owned by " +  MyGarage.GarageOwner);
            }
            Console.ReadKey();
        }
        public static void WriteGarageXML(Garage pInstance)
        {
            XmlSerializer writer = new XmlSerializer(typeof(Garage));
            using (FileStream file = File.OpenWrite(_StartupXML))
            {
                writer.Serialize(file, pInstance);
            }
        }
        public static Garage ReadGarageXML()
        {
            XmlSerializer reader = new XmlSerializer(typeof(Garage));
            using (FileStream input = File.OpenRead(_StartupXML))
            {
                return reader.Deserialize(input) as Garage;
            }
        }
    }
} 
```

# jquery - 将一个处理程序绑定到多个事件

> ID：14326833
> 
> 赞同：1
> 
> 时间：2013-01-14T21:18:15.290
> 
> 标签：jquery, events

如何将一个处理程序绑定到多个事件，并确保即使触发了多个事件，也只调用一次处理程序？

```
$(".element").bind("click select" ,handl);
function handl (e) 
{ 
     //my code
} 
```

这段代码的问题是每个事件都会调用两次句柄。如果您认为在两个事件都被触发的情况下只应该调用一次处理程序，请告诉我，因为我认为这段代码中的处理程序应该被调用两次。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-14T21:28:36.780

我不确定我是否理解正确.. 但我假设您正试图防止多个事件从一个用户操作中多次调用处理程序函数。

```
var isExecuting = false;
$(".element").bind("click focus" ,function () {    
    if (isExecuting) return false;
    isExecuting = true;
    handl.call(this); //maintain the context
    isExecuting = false;
});
function handl (e) 
{ 
    //your code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:39:59.007

像这样使用闭包来包装你的事件函数

```
$("#a").bind("click focus", function () {
    var fired = false;
    return function() {
        if (!fired) {
           alert("click occured");
           fired = true;
        }  
    } 
}()); 
```

[jsfiddle 在这里](http://jsfiddle.net/wguAk/2/)

# inversion-of-control - 如果我将 IDisposable 瞬态组件注入控制器该怎么办（温莎城堡）

> ID：14326836
> 
> 赞同：0
> 
> 时间：2013-01-14T21:18:32.087
> 
> 标签：inversion-of-control, castle-windsor, ioc-container

基本上，我应该自己调用 .Dispose() 吗？因为根据我所读到的，温莎不会为我这样做。我是 IoC 的新手，这有点令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T08:10:25.597

看看 KK [mvc3 教程](http://stw.castleproject.org/Windsor.Windsor-tutorial-ASP-NET-MVC-3-application-To-be-Seen.ashx)。WindsorControllerFactory 充当组合根：工厂负责通过容器创建和释放控制器。由于“Windsor 是同类中最好的，可用于 .NET 的成熟的控制反转容器”会注意从对象图的根开始释放所有组件……只要您正确设置容器……另请阅读关于[windosr发布政策](http://kozmic.pl/2010/08/27/must-i-release-everything-when-using-windsor/)的帖子。

# weblogic - 从 Weblogic 获取配置字符串

> ID：14326842
> 
> 赞同：2
> 
> 时间：2013-01-14T21:18:56.003
> 
> 标签：weblogic, jndi, weblogic12c

这个问题与**Weblogic 12c**有关。

我有一个 EAR 文件，我想在各种环境（*dev*、*QA*、*pre-prod*和*prod*）中部署它。但是，我的应用程序需要*用户名*和*密码*（以连接到另一台服务器），并且它们在四个环境中并不相同。我不想在 4 个不同的 EAR 文件中打包 4 个不同的属性文件。我想要一个通用的 EAR 文件。此外，我不想在打包过程中处理 prod 密码。

理想情况下，我希望每个环境的管理员为环境提供适当的用户名和密码。与 Tomcat、Jetty 或 JBoss(?) 不同，我认为 WebLogic 管理员不可能以在 java:comp/env JNDI 上下文下可用的方式指定此信息。

应用程序如何从 Weblogic 中获取一些管理员定义的配置字符串？

顺便说一句，它**不是**JDBC 连接的用户名/密码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:48:30.197

据我了解，您需要根据您使用的环境更改参数对吗？如果您想动态覆盖参数，您可以使用 WebLogic 部署计划概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T15:07:23.900

据我所知，WebLogic的方式是

*   `env-entry`在部署描述符中定义您的用户名/密码
*   将您的应用程序`plan.mxl`与`plan.xml`

这样你就可以让他们进入`/comp/env/config`

更多细节在这里：[http ://docs.oracle.com/cd/E11035_01/wls100/deployment/config.html](http://docs.oracle.com/cd/E11035_01/wls100/deployment/config.html)

我知道的唯一缺点：`plan.xml`将始终包含未加密的密码，但管理员无论如何都知道密码，这是“他的”机器上的“他的”文件应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:27:18.250

您的意思是您需要提供用户名/密码来启动应用程序吗？如果是这样，您可以通过使用 WLST [http://docs.oracle.com/cd/E15051_01/wls/docs103/config_scripting/using_WLST.html创建脚本来完成此操作](http://docs.oracle.com/cd/E15051_01/wls/docs103/config_scripting/using_WLST.html)

# php - 如何使用 PHP 将解析的 XML 传递到 mySQL 数据库？

> ID：14326845
> 
> 赞同：0
> 
> 时间：2013-01-14T21:19:00.590
> 
> 标签：php, mysql, xml, parsing

我有一个本地服务器，我在其中接收 xml 文件。收到的 xml 文件很好，但我在如何将我的 XML 文件传递​​到我的数据库时遇到问题。

我检索xml文件很简单：

```
$xml_post = file_get_contents('php://input'); 
```

我收到的 xml 文件如下所示：

```
<city>
<id>1081</id>
<name>athens</name>
<country>Greece</country>
<info>etc etc etc</info>
</city> 
```

我已经使用 phpmyadmin 手动创建了一个具有完全相同节点的数据库，因此我可以正确保存所有内容。

现在我想用 mysql_query 插入我在数据库中得到的内容。像这样的东西：

```
mysql_query("INSERT INTO cities (id, city ,country , info)
  VALUES (4 , 'athens' , 'greece' , 'etc etc etc'"); 
```

但是哪些变量是我存储的 xml 以将它们用作上述语句中的值？如何解析必须将所有节点存储在变量中的 xml 文件，然后将它们正确传递给数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:21:43.353

尝试使用[simplexml_load_string()](http://php.net/manual/en/function.simplexml-load-string.php)

示例用法：

```
<?php
$xml = '<city>
<id>1081</id>
<name>athens</name>
<country>Greece</country>
<info>etc etc etc</info>
</city>
';

$xml = simplexml_load_string($xml);
//1081
echo $xml->id;
//athens
echo $xml->name;
?> 
```

如果您的 XML 中有多个节点，每个节点将是一个对象数组：

```
$xml = '
<citys>
    <city>
        <id>1081</id>
        <name>athens</name>
        <country>Greece</country>
        <info>etc etc etc</info>
    </city>
    <city>
        <id>1082</id>
        <name>somwhere else</name>
        <country>Spain</country>
        <info>etc etc etc</info>
    </city>

</citys>
';

$xml = simplexml_load_string($xml);
//print_r($xml);

foreach($xml->city as $val){
    echo $val->name;
}

//or
echo $xml->city[0]->name;
//athens
echo $xml->city[1]->name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:22:03.900

您需要将 XML 解析为 PHP 可读的数据，然后在 SQL 插入中使用该数据。

[PHP SimpleXML 教程](http://www.phpeveryday.com/articles/PHP-SimpleXML-Tutorial-P846.html)可能是一个开始的地方。

# iphone - Obj-C 如何调用带返回的方法？

> ID：14326847
> 
> 赞同：0
> 
> 时间：2013-01-14T21:19:11.733
> 
> 标签：iphone, objective-c, xcode4.5

我有一个带有返回值的方法，我想从 MainviewController.m 调用它。此外，我必须在调用它时将一个值（浮点数）传递给该方法。但是我遇到了麻烦，我尝试在方法中调试并添加一些断点和 NSLog，但似乎没有调用该方法，因为调试器不会在断点处停止并且不会打印 NSLog . （最终打印（calculatorScreen.text...）只是打印（null））

主视图控制器.m

```
currentNumber = currentNumber *10 + (float)[sender tag];
NSNumber *convertedNumber = [[NSNumber alloc] init];
NSString *nf = [convertedNumber customFormatNumber:currentNumber];
calculatorScreen.text = [NSString stringWithFormat:@"%@",nf]; // it's printing (null) :( 
```

NSNumber+FormatNumber.h

```
@interface NSNumber (FormatNumber)
-(NSString *) customFormatNumber:(float)n1; 
```

NSNumber+FormatNumber.m

```
-(NSString *) customFormatNumber:(float)n1
{
    NSLog(@" %f" ,n1); // for debug and a breakpoint here
    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
        [formatter setMaximumFractionDigits:2];
        [formatter setMinimumFractionDigits:0];
        NSString *nf = [formatter stringFromNumber:[NSNumber numberWithFloat:n1]];
    NSLog(@"Class %@" ,nf); // for debug
    return nf;
} 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:36:23.580

`[[NSNumber alloc]init]`返回 nil 因为您没有指定数字值，并且 nil 目标操作被忽略。

让我告诉你，你正在遵循一个漫长而不必要的方式，我会这样写：

```
NSNumberFormatter* formatter=[NSNumberFormatter new];
[formatter setMaximumFractionDigits:2];
[formatter setMinimumFractionDigits:0];
formatter.numberStyle= NSNumberFormatterDecimalStyle;
calculatorScreen.text= [formatter stringFromNumber: @(currentNumber*10.0+[sender tag]) ]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:42:17.843

您是否要覆盖 NSNumber？

对于 CustomNumber.h

```
@interface CustomNumber:NSNumber
-(NSString *) customFormatNumber:(float) n1; 
```

对于 CustomNumber.m

```
-(NSString *) customFormatNumber:(float)n1
{
    NSLog(@" %f" ,n1); // for debug and a breakpoint here
    NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
    [formatter setMaximumFractionDigits:2];
    [formatter setMinimumFractionDigits:0];
    NSString *nf = [formatter stringFromNumber:[NSNumber numberWithFloat:n1]];
    NSLog(@"Class %@" ,nf); // for debug
    [formatter release];
    return nf;
} 
```

然后在 MainViewController.m

```
currentNumber = currentNumber *10 + (float)[sender tag];
CustomNumber *convertedNumber = [[CustomNumber alloc] init];
calculatorScreen.text = [convertedNumber customFormatNumber:currentNumber]; 
```

或者

在 MainViewController.m 创建方法，然后代码将是

```
currentNumber = currentNumber *10 + (float)[sender tag];
calculatorScreen.text = [self customFormatNumber:currentNumber]; 
```

# android - 无法在 Android 中使用 PhoneGap 条码扫描器插件

> ID：14326848
> 
> 赞同：2
> 
> 时间：2013-01-14T21:19:14.253
> 
> 标签：android, cordova, phonegap-plugins

我按照[这里的教程](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt3)在我的 Android 项目中安装了 phonegap 插件。

Cordova (PhoneGap) 的版本是 2.3.0，我从[这个 github 链接](https://github.com/phonegap/phonegap-plugins)下载插件；

这是我尝试调用条形码扫描仪的代码：

```
 window.plugins.barcodeScanner.scan(success,
     function(error) {
        alert("scanning failed: " + error)
     }
  ); 
```

当我按下按钮调用该方法时，出现以下错误：

```
scanning failed : Class not found. 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T00:26:22.597

添加行：

```
<plugin name="BarcodeScanner" value="com.phonegap.plugins.barcodescanner.BarcodeScanner"/> 
```

给你 res/xml/config.xml 文件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-12-27T07:27:01.053

将该行添加到 res/xml/config.xml 文件中：

```
<feature name="BarcodeScanner"><param name="android-package" value="com.phonegap.plugins.barcodescanner.BarcodeScanner" /></feature> 
```

# javascript - Windows Azure 中的同步请求？

> ID：14326849
> 
> 赞同：0
> 
> 时间：2013-01-14T21:19:19.090
> 
> 标签：javascript, azure, azure-table-storage, azure-mobile-services

所以在我的服务器代码中，变量邀请在成功函数之外是未定义的。

```
function getInvites(id){
    var InvitesTable = tables.getTable("Invites").where({"PlanID": id}).select("UserID","Attending");
    var invites;
    InvitesTable.read({ success: function(resultss) { 
                           invites = resultss;
                           console.log(invites); //works here
                           }});
    console.log(invites); //undefined here
} 
```

从类似的问题中，我意识到它是因为它是异步的。所以成功函数调用是在`console.log(invites); //undefined here`调用之后运行的。

我的问题是如何在 Windows Azure 中阻止它？

添加代码

```
function read(query, user, request) {

        request.execute({
            success: function(results) {
                results.forEach(function(r) {

                    getInvites(r.id, function(invites) {
                        r.invites = invites;
                    });
                });
                request.respond();
            }
        });

}

function getInvites(id, cb){
    var InvitesTable = tables.getTable("Invites").where({"PlanID": id}).select("UserID","Attending");
    InvitesTable.read({ success: function(results) {
                           if (cb) cb(results);
                           }});
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:42:55.400

您不会“停止”，而是围绕您使用的任何环境的异步特性来设计应用程序。

我假设你正在尝试做这样的事情：

```
function getInvites(id){
    var InvitesTable = tables.getTable("Invites").where({"PlanID": id}).select("UserID","Attending");
    var invites;
    InvitesTable.read({ success: function(resultss) { 
                           invites = resultss;
                           }});
    return invites;
}

// later...

var invites = getInvites(someId);
//do something with `invites` 
```

这显然是行不通的，因为您`invites`在异步调用完成之前返回值。

相反，您以异步风格编写应用程序：

```
function getInvites(id, cb){
    var InvitesTable = tables.getTable("Invites").where({"PlanID": id}).select("UserID","Attending");
    InvitesTable.read({ success: function(resultss) { 
                           if (cb) cb(resultss);
                           }});
}

// later...

getInvites(someId, function(invites) {
    //do something with `invites`
}); 
```

为了简单起见，这省略了错误处理代码，因此您也必须添加它。

* * *

在查看完整代码后，您似乎遇到了管理许多并行异步操作的简单问题。考虑会发生什么：您的循环运行，迭代*n 个*对象的数组。对于每个，您调用`getInvites`，它*开始*一个数据库请求并返回。

这意味着您的循环运行得非常快，但是现在您有*n 个*未完成的数据库请求，您必须等待才能调用`request.respond()`.

一个*非常*基本的解决方案是计算调用回调的次数`getInvites`，然后在该次数达到*n*时最终完成请求。

但是，每次发出异步请求时手动管理此簿记既费时又容易出错。这是流控制库非常有用的情况。我将[`Deferred`](http://www.jqapi.com/#p=jQuery.Deferred)在这个例子中使用 jQuery，因为它可能对你来说已经很熟悉了（即使你不知道你以前实际使用过它——如果你曾经使用过 jQuery 的 XHR API，那么你已经使用过`Deferred`s）。

鉴于您处于服务器环境中，您显然没有 jQuery；但是，有些人只提取[了您](https://github.com/jaubourg/jquery-deferred-for-node)[所需的代码`Deferred`](https://github.com/jaubourg/jquery-deferred-for-node)。

一旦我们`Deferred`为每个待处理的请求设置了 s，我们就可以使用它来注册一个回调，该回调仅在*所有*待处理的 s 完成[`when`](http://www.jqapi.com/#p=jQuery.when)后才被调用。*`Deferred`*

 *```
function read(query, user, request) {

        request.execute({
            success: function(results) {
                var dfds = [];
                for (var i = 0; i < results.length; i++) {
                    dfds.push(getInvites(results[i].id)); // Makes an array of Deferreds representing
                                                          // each of our pending requests.
                }

                Deferred.when.apply(Deferred, dfds) // see details below
                    .done(function() {
                        for (var i = 0; i < results.length; i++) {
                            results[i].invites = arguments[i]; // Copy each set of invites to each result
                        }
                        request.respond(); // We're done!
                    })
                    .fail(function() {
                        // Handle errors here
                    });
            }
        });

}

function getInvites(id){
    var dfd = new Deferred(); // Create a new Deferred, which automatically starts in the 'pending' state
    var InvitesTable = tables.getTable("Invites").where({"PlanID": id}).select("UserID","Attending");
    InvitesTable.read({ success: function(results) {
                           dfd.resolve(results); // When we get data back, we 'resolve' the Deferred --
                                                 // in other words, say its operation is done,
                                                 // and pass along the operation's results.
                           },
                        error: function(err) { // TODO: Not sure if this is how the API you're using handles errors
                            dfd.reject(err); // Marks the Deferred as failed.
                        }});

    return dfd.promise(); // We (synchronously) return the Promise.  The caller can attach event handlers
                          // to the Promise, which are invoked when we eventually resolve or reject the Deferred.
} 
```

笔记：

*   `jQuery.when`（或在这种服务器端情况下，`Deferred.when`）通常希望您传递固定数量的`Deferred`s 作为参数：

    ```
    $.when(dfd1, dfd2).done(function(result1, result2) { ... }); 
    ```

    但是，我们有一个可变数量的`Deferred`s，所以我们必须一个s[`apply`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)数组，然后在处理程序中，通过隐式对象访问每个结果。`Deferred``when``done`[`arguments`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Functions_and_function_scope/arguments)

*   `Array.forEach(...)` [很慢](http://jsperf.com/for-vs-foreach-vs-each)。在大多数情况下，最好使用常规`for`循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-28T16:35:39.683

我偶然发现了对同步数据库访问的同样需求，所以我编写了一个名为[query-synchronizer 的](https://gist.github.com/suda/7199880)小模块。想法是计算查询开始和结束的次数。如果所有开始计数等于结束计数，则将执行其他部分代码。您的代码如下所示：

```
var synchronizer = require('query-synchronizer');

function read(query, user, request) {
    request.execute({
        success: function(results) {
            results.forEach(function(r) {
                var InvitesTable = tables.getTable("Invites").where({"PlanID": r.id}).select("UserID","Attending");
                synchronizer.read(InvitesTable, function(results){
                    r.invites = invites;
                });

            });
            synchronizer.done(function(){
                request.respond();
            });
        }
    });

} 
```*

# excel - 创建一个 Excel 宏以跨可变/未知数量的列复制公式？

> ID：14326850
> 
> 赞同：2
> 
> 时间：2013-01-14T21:19:21.060
> 
> 标签：excel, formulas, vba

我想在 excel 中创建一个宏，我可以在其他工作表上重复使用它来从 B4:B 复制公式？直到第 X 行。

我将把多行数据粘贴到几个不同工作表的 A 列中。我将在每张表上都有一个按钮，我想将其标记为“复制公式”。我已经编写了公式来将文本解析为 3 到 250 列，具体取决于工作表。我希望宏从 B4 突出显示到 Selection.End(xlToRight) 然后将该选择复制到 A 列中的最后一行数据。

我正在考虑这样的事情，但我在第 6 行不断收到错误消息。

```
 Dim strCurrentSheet As String
    Dim LastRow As Integer
    Dim LastCol As Integer
    LastRow = Range("A4").End(xlDown).Row
    LastCol = Range("B4").End(xlToRight).Column
    Range(Cells(4, 2), Cells(4, LastCol)).AutoFill _ 
    Destination:=Range(Cells(5, 2), Cells(LastRow, LastColumn)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T07:31:03.403

与其使用 VBA 宏，不如从一开始就考虑使用 Excel 表格（插入->表格）——它或多或少地内置了以下功能：

如果您在表格中的空列（或旁边的相邻列）中输入公式，Excel 将自动将该公式应用于所有行。如果您在任何时候添加/复制数据，它会自动扩展表格，因此也会在所有列中应用公式！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:02:30.130

...我没有过多地测试这段代码，但这至少应该给你一个很好的起点，让你走上自己的路：

```
Sub test()

  ' Get the last row and column on the sheet - store them in the variables
  Dim LastRow As Integer
  Dim LastCol As Integer
  LastRow = Range("A1").End(xlDown).Row
  LastCol = Range("B4").End(xlToRight).Column

  ' Copy cells B4:B[LastCol]  to  cells B4:[LastRow][LastCol]
  Range(Cells(2, 4), Cells(2, LastCol)).AutoFill _
         Destination:=Range(Cells(2, 4), Cells(LastRow, LastCol))

End Sub 
```

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T01:59:29.673

```
 Dim colABottom As Range
    Set colABottom = Range("A1").End(xlDown)

    Dim colEnd As Range
    Set colEnd = Range("A1").End(xlToRight)

    Dim lColStart As Long
    lColStart = 2
    Dim lColEnd As Long
    lColEnd = colEnd.Column

    Dim lRowStart As Long
    lRowStart = 1
    Dim lRowEnd As Long
    lRowEnd = colABottom.Row

    Dim startRange As Range
    Set startRange = Range("B1")

    Dim sourceRange As Range
    Set sourceRange = Range(startRange, startRange.End(xlToRight))

    Dim destinationFillRange As Range
    Set destinationFillRange = Range(Cells(lRowStart, lColStart), Cells(lRowEnd, lColEnd))

    sourceRange.AutoFill Destination:=destinationFillRange 
```

# wxpython - wxpython - 计时器和绑定文本条目进入

> ID：14326851
> 
> 赞同：1
> 
> 时间：2013-01-14T21:19:27.327
> 
> 标签：wxpython

我有一个计时器，它开始“采样”（现在只是一个随机编号）并绘制成图表 - 当按下“开始”时，计时器启动。这工作正常（绘图不是很好，但它工作），虽然我在这里的问题是引入一个“目标”值，以便样本值被改变 -**尽管只有在通过输入键**甚至更新按钮输入目标之后.

就目前而言，对目标 SpinCtrl 小部件所做的任何更改都是实时完成的，我不希望出现这种情况，我只想在 Enter 后更新

所以我明白我的问题与*timers*、*binding events*和 *wx.EVT_TEXT_ENTER*; 当计时器已经运行时，我捕获了多少个文本条目？

原谅我缺乏python知识。

我的代码：

```
print( "\n- Please Wait -- Importing Matplotlib and Related Modules...\n" )
import matplotlib
import numpy
import wx
import numpy as np
matplotlib.use('WXAgg')

from matplotlib.backends.backend_wxagg import FigureCanvasWxAgg as FigureCanvas
from matplotlib.backends.backend_wx import NavigationToolbar2Wx
from matplotlib.figure import Figure
import random

SamplingTime      = 1# in ms

class GraphPanel( wx.Panel ) :
    def __init__( self, parent, position ) :
        wx.Panel.__init__( self, parent, pos=position, size=(800,320) )
        # initialize matplotlib 
        self.figure = matplotlib.figure.Figure( None, facecolor="white" )
        self.canvas = matplotlib.backends.backend_wxagg.FigureCanvasWxAgg( self, -1, self.figure )
        self.axes = self.figure.add_subplot(111)
        self.axes.grid(True, color="gray")
        self.axes.set_xbound( (0,100) )
        self.axes.set_ybound( (0,10) )
        self.axes.set_xlabel( "Sample" )
        self.axes.set_ylabel( "Data" )
        self._SetSize()
        self.Bind( wx.EVT_SIZE, self._SetSize )
        self.Data   = []

    def updateData(self, value):
        self.Data.append( value )
        x = np.arange( len(self.Data) )
        y = np.array(self.Data)

        yMin = round(min(y)) + 2
        yMax = round(max(y)) + 2            
        self.axes = self.figure.add_subplot(111)
        self.axes.grid(True, color="gray")
        self.axes.plot(x,y, "-k")

        self.axes.set_ybound( (yMin,yMax) )
        self.axes.set_xlabel( "Sample" )
        self.axes.set_ylabel( "Data" )

        self._SetSize()
        self.Bind( wx.EVT_SIZE, self._SetSize )      
        self.canvas = FigureCanvas(self, -1, self.figure)

    #-----------------------------------------------------------------------------------
    def _SetSize( self, event=None ):
        pixels = self.GetSize()
        self.SetSize( pixels )
        self.canvas.SetSize( pixels )

        dpi = self.figure.get_dpi()
        self.figure.set_size_inches( float( pixels[0] ) / dpi,float( pixels[1] ) / dpi )
    #------------------------------------------------------------------------------------

############################################ Basic Frame ###################################################                
class BasicFrame(wx.Frame):
    def __init__(self, parent, title):
        self.Data         = 0
        self.DataPrevious = 1
        # split the screen
        wx.Frame.__init__(self, parent, title="Data Collection", size=(1100,750))
        self.sp = wx.SplitterWindow(self)
        self.p1 = wx.Panel(self.sp, style = wx.SUNKEN_BORDER)  
        self.p2 = wx.Panel(self.sp, style = wx.SUNKEN_BORDER)
        self.sp.SplitVertically(self.p1, self.p2, 940)

        # graph
        self.Graph = GraphPanel( self.p1, position=(20, 20) )

        # define control input 
        wx.StaticBox(self.p2, -1, "System Control",  pos=(5, 5), size=(120, 210))
        wx.StaticText(self.p2, -1,"Target:",         pos=(15, 100))
        self.Target = wx.SpinCtrl(self.p2,-1,pos=(15,120), size=(80, 20), min=5, max=10)
        self.Target.Bind(wx.EVT_BUTTON, self.StartSystem)

        self.StartButton = wx.Button(self.p2, -1, "Start", pos=(20,230))
        self.StartButton.Bind(wx.EVT_BUTTON, self.StartSystem)

        self.PauseButton = wx.Button(self.p2, -1, "Pause", pos=(20,270))
        self.PauseButton.Bind(wx.EVT_BUTTON, self.PauseSystem)

        self.StopButton = wx.Button(self.p2, -1,  "Stop",  pos=(20,500))
        self.StopButton.Bind(wx.EVT_BUTTON, self.StopSystem)

        # set the timers 
        self.SampleTimer  = wx.Timer(self)
        self.Bind(wx.EVT_TIMER, self.updateData, self.SampleTimer)
        print( "Ready!\n" )

    def sampleData(self):
        Error = random.uniform(0, 0.2)
        Target     = self.Target.GetValue()
        if( self.Data <= Target):
            self.Data += self.DataPrevious*Error
        elif( self.Data >= Target):
            self.Data -= self.DataPrevious*Error
        self.DataPrevious = self.Data

        print( "Target Aim: "+str(self.Data) )
        return self.Data

    def updateData(self, event):
        CurrentData       = round(self.sampleData(),2)   # obtain currnt data
        self.Graph.updateData(CurrentData)               # add data to graph   

    def StartSystem(self, event):
        self.SampleTimer.Start(SamplingTime)

    def PauseSystem(self, event):
        self.SampleTimer.Stop()

    def StopSystem(self, event):
        self.SampleTimer.Stop()
        self.Destroy()

app = wx.App(redirect=False)
frame = BasicFrame(None, -1)
frame.Show()
app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T13:29:43.877

如果我理解正确，您只想在以下情况下使用 SpinCtrl 值更新应用程序中的内部值：1) 按下 SpinCtrl 内部的 Enter 或 2) 按下更新按钮。以下示例可以做到这一点：

```
import wx

class MainWindow(wx.Frame):
    def __init__(self, *args, **kwargs):
        wx.Frame.__init__(self, *args, **kwargs)

        self.panel = wx.Panel(self)
        self.spin = wx.SpinCtrl(self.panel)
        self.button = wx.Button(self.panel, label="Update")

        self.sizer = wx.BoxSizer()
        self.sizer.Add(self.spin)
        self.sizer.Add(self.button)

        self.panel.SetSizerAndFit(self.sizer)  
        self.Show()

        # Use EVT_CHAR_HOOK on Frame insted of wx.EVT_KEY_UP on SpinCtrl
        # to disable "on Enter go to next widget" functionality
        self.Bind(wx.EVT_CHAR_HOOK, self.OnKey) 
        self.button.Bind(wx.EVT_BUTTON, self.OnUpdate)

        self.timer = wx.Timer(self)
        self.Bind(wx.EVT_TIMER, self.OnTimer, self.timer)
        self.timer.Start(500)

        self.value = 0

    def OnKey(self, e):
        if e.GetKeyCode() == wx.WXK_RETURN: # Is the key ENTER?
            self.value = self.spin.GetValue() # Read SpinCtrl and set internal value
        else: # Else let the event out of the handler
            e.Skip()

    def OnUpdate(self, e):
        self.value = self.spin.GetValue() # Read SpinCtrl and set internal value

    def OnTimer(self, e):
        # Show internal value
        print(self.value)

app = wx.App(False)
win = MainWindow(None)
app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T23:03:41.087

如果您不想对旋转控件的每个操作做出反应，请不要绑定到它。相反，在 StartTimer() 函数中查询它的值。

# web-services - 在 Restful 服务中实现 GET 操作的最佳实践

> ID：14326858
> 
> 赞同：1
> 
> 时间：2013-01-14T21:19:46.833
> 
> 标签：web-services, get, jersey

我正在尝试查找开发/实施 GET 操作是否涉及任何最佳实践。

我正在浏览 jersey 的网络资源文档。

网址：http: [//jersey.java.net/nonav/apidocs/1.4/jersey/com/sun/jersey/api/client/WebResource.html](http://jersey.java.net/nonav/apidocs/1.4/jersey/com/sun/jersey/api/client/WebResource.html)

如果我们查看可用的方法，“get”不接受实体。

是否建议实现不接受实体但只从查询参数中获取请求参数的获取操作？

谢谢，GK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:32:03.530

是的。将 URI 视为您正在获取的对象/资源的唯一标识符。如果需要，我通常将查询参数用于 GET。更常见的是我只有一个像这样的 GET：GET: https://myservice.com/myobject/id。此路径通常从 MyObject 上的 PUT 或 POST 操作返回。如果我想查找一个或多个，然后使用查询参数作为条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T08:58:07.030

那里有许多最佳实践。Apigee 提供了一种似乎以可读格式汇集大多数常见格式的方法。您可以从[http://info.apigee.com/Portals/62317/docs/web%20api.pdf获得它](http://info.apigee.com/Portals/62317/docs/web%20api.pdf)

# c# - C# DropDownList 回发

> ID：14326859
> 
> 赞同：0
> 
> 时间：2013-01-14T21:19:48.050
> 
> 标签：c#, sql, asp.net-mvc, stored-procedures, drop-down-menu

我正在使用 MVC ASP 创建一系列由 SQL 存储过程填充的下拉列表。但是，需要通过将前一个列表的选择作为参数传递给过程调用来填充每个连续的下拉列表。如何发布使用以下方法创建的列表的选择：

```
@Html.DropDownListFor(x => x.environmentName, new SelectList(Model.environmentName)) 
```

?

我试图将它保存到模型视图，然后再次将视图传递给控制器​​，但我觉得这是一种糟糕的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:05:32.347

这是我为 3 个级联下拉列表编写的 JQuery 解决方案，其中带有 ajax 回调到控制器，以根据先前的选择填充下一个列表。这可能会让你朝着正确的方向前进。

```
Select: <select id="category" style="width: 150px">
        <option></option>
        @foreach (string cat in ViewBag.Categories)
        {
            <option>@cat</option>
        }
    </select><span id="errorforcategory" style="color: red"></span>
<select id="subcategory1" disabled="disabled" style="width: 150px"><option></option>       </select>
<select id="subcategory2" disabled="disabled" style="width: 150px"><option></option></select>

<script type="text/javascript">
$("#category").change(function () {
    $("#subcategory1").load('@Url.Action("GetSubCategory")' + "?category=" +     $("#category").val());
    $('#subcategory2').empty();
    $('#subcategory2').append($("<option></option>"));
    $('#subcategory2').attr('disabled', 'disabled');
}).ajaxStop(function () {
    if ($('#subcategory1 option').size() > 2) {
        $('#subcategory1').attr('disabled', '');
    } else {
        $('#subcategory1').attr('disabled', 'disabled');
    }

});

$("#subcategory1").change(function() {
    if ($("#subcategory1").val().trim()) {
        $("#subcategory2").load('@Url.Action("GetSubCategory")' + "?category=" + $("#category").val() + "&subcategory=" + $("#subcategory1").val());
    } else {
        $('#subcategory2').empty();
        $('#subcategory2').attr('disabled', 'disabled');
    }
}).ajaxStop(function() {
    if ($('#subcategory2 option').size() > 2) {
        $('#subcategory2').attr('disabled', '');
    } else {
        $('#subcategory2').attr('disabled', 'disabled');
    }
}); 
```

然后在您的控制器中，您可以使用您喜欢的任何方法调用您的存储过程，然后构建您的结果选项文本。

```
public string GetSubCategory(string category, string subcategory)
    {
        string returnval = "<option></option>";
        if (!string.IsNullOrEmpty(subcategory))
        {
            foreach (
                var cat in
                    db.Categories.Where(c => c.category1 == category && c.subcategory1 == subcategory)
                      .Select(c => c.subcategory2)
                      .Distinct())
            {
                if (!string.IsNullOrEmpty(cat.Trim()))
                    returnval += "<option>" + cat + "</option>";
            }
            return returnval;
        }

        return Enumerable.Aggregate(db.Categories.Where(c => c.category1 == category).Select(c => c.subcategory1).Distinct().Where(cat => !string.IsNullOrEmpty(cat.Trim())), returnval, (current, cat) => current + ("<option>" + cat + "</option>"));
    } 
```

# c# - htmlagilitypack 在第一次运行时很慢

> ID：14326864
> 
> 赞同：0
> 
> 时间：2013-01-14T21:20:13.227
> 
> 标签：c#, winforms, performance, html-agility-pack

第一次运行需要超过 15 秒...第一次运行后需要不到 1 秒...我该如何解决？

```
System.Diagnostics.Stopwatch sw = new System.Diagnostics.Stopwatch();   

sw.Start();
siteKeyword = tbSearch.Text;
web.OverrideEncoding = Encoding.GetEncoding("windows-1251");
doc = web.Load(siteSearch + siteKeyword);
HtmlNodeCollection items = doc.DocumentNode.SelectNodes("//div[@class='cls1']");

int i = 0;
foreach (var item in items)
{
    lbResults.Items.Add(item.SelectSingleNode("h2/a").InnerText);
    resultsHREF.Add(item.SelectSingleNode("h2/a").Attributes["href"].Value);
    i++;
}
sw.Stop();
MessageBox.Show(sw.ElapsedMilliseconds.ToString("00:00:000"));
sw.Reset(); 
```

# jquery - CakePHP 和 jEditable 在应该只返回值时显示整个布局视图

> ID：14326865
> 
> 赞同：1
> 
> 时间：2013-01-14T21:20:14.067
> 
> 标签：jquery, cakephp, jeditable

我在我的 CakePHP 应用程序中设置了就地编辑，除了一个问题外，它工作得很好。当数据成功发布到数据库时，返回值包括整个 'admin.ctp' 布局。我尝试了几件事`$this->autoRender = false`，例如`$this->layout = 'ajax'`但没有成功。请在下面输入我的代码：

jQuery 代码

```
$('.setting_value').editable('/settings/ajax_edit',{
     id        : 'data[Setting][id]',
     name      : 'data[Setting][value]',
     select: true,
     type      : 'text',
     cancel    : 'Cancel',
     submit    : 'Save',
     tooltip   : 'Click to edit the title',
     indicator: '<img src="/img/admin/ajax-loader.gif">'
}); 
```

我的控制器功能

```
public function ajax_edit(){
    // $this->autoRender = false; // this doesnt seem to work
    // $this->layout = 'ajax' // this does not work as well

    if ($this->request->data) {
        $this->Setting->id = $this->request->data['Setting']['id'];
        $this->Setting->saveField('value', $this->request->data['Setting']['value']);
        $this->set('newvalue', $this->request->data['Setting']['value']);
    }
} 
```

同样，一切都很好，但是当它返回更改的值时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:49:16.333

经过一番尝试，我能够弄清楚。所以我根据以下内容更新了我的功能：

```
public function ajax_edit(){
    $this->autoRender = false;

    if ($this->request->data) {
        $this->Setting->id = $this->request->data['Setting']['id'];
        $this->Setting->saveField('value', $this->request->data['Setting']['value']);
        return $this->request->data['Setting']['value'];
    }
} 
```

基本上，我必须设置 autoRender=false 并返回新值，而不是使用视图文件来显示。它现在可以按需要工作。

# regex - R中的正则表达式：如何从字符串中提取字符

> ID：14326870
> 
> 赞同：1
> 
> 时间：2013-01-14T21:20:42.450
> 
> 标签：regex, r

我有一个字符串向量，每个字符串都包含一个或多个作者的姓氏和名字。我想提取每个字符串中每个作者的姓氏。我所知道的是，首先出现的名字总是作者（第一作者）的姓氏，而其他作者的姓氏是介于 a`;`和 a之间的所有内容`,`。例如，在以下字符串中：

```
tutu <- "goulenok, tiphaine miquel; meune, christophe; gossec, laure; dougados, maxime; kahan, andre; allanore, yannick" 
```

我想提取：

```
"goulenok" "meune" "gossec" "dougados" "kahan" "allanore" 
```

姓氏可以包含标点符号，例如`'`or`-`但总是在 a`;`和 a之间`,`

任何的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:23:32.417

```
> sub(",.*$", "", strsplit(tutu, ";[ ]+")[[1]])
[1] "goulenok" "meune"    "gossec"   "dougados" "kahan"    "allanore" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T17:38:41.870

这是一种使用 gsubfn 包的方法：

```
library(gsubfn)

unlist(strapplyc(tutu, "(?:^|;) *([^,]+)")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T01:50:18.773

这有点生硬，但也有效：

```
sapply(unlist(lapply(strsplit(tutu, ";"), strsplit, ",")), "[", 1) 
```

# c# - 在代码中进行 SQL 查询的正确方法？

> ID：14326872
> 
> 赞同：5
> 
> 时间：2013-01-14T21:20:58.387
> 
> 标签：c#, .net, sql, sql-server

我在 Visual Studio 中使用 SQL Server。我正在制作一个网络应用程序。

我创建了一个包含表和关系的数据库。

我将需要在 C# 中编写能够进行选择、更新、删除、查询等功能的函数。有没有人对正确的方法来保持清洁和安全有任何见解？

我的意思是，我应该如何建立连接，我应该如何返回数据，处理故障等？

我发现的大多数教程似乎都没有使用最佳实践。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:23:46.910

您不使用[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)有充分的理由吗？[实体框架](http://msdn.microsoft.com/en-us/data/ef.aspx)、[Linq to SQL](http://msdn.microsoft.com/en-us/library/bb386976.aspx)、[NHibernate](http://nhforge.org/)等等。除非您正在执行一些非常复杂的 SQL 语句，否则 ORM 每次都是合乎逻辑的选择。它将处理连接，提供一定程度的安全性（即采取措施避免 SQL 注入），以及使您的代码更易于阅读和维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:23:56.457

Microsoft 的最佳实践“du jour”是实体框架。否则，像 NHibernate 这样的 ORM 也是一个不错的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:29:32.460

几个选项：

1.  实体框架，在许多地方都被认为是最佳实践。
2.  Linq to SQL，又是很好的实践。
3.  其他 ORM，流行的通常是很好的做法
4.  通过存储过程编写自己的后端接口，这不是最佳实践，也绝对不是节省时间，但如果您不熟悉 ORM 及其较小的应用程序，这可能会更快。

**编辑：** 最佳做法是不要使用内联 SQL 查询，我错误地说它们会为 SQL 注入打开漏洞，但如果你做对了，你可以安全地这样做。我应该说的是，如果您正在尝试最佳实践，请不要使用它们。主要是因为下线，其他一些程序员可能正在处理您的代码，看到您执行了内联 SQL，如果他们不知道 SQL 注入，他们可能会做出允许漏洞的更改。通过完全避免内联 SQL，您不仅可以避免在安全方面犯错，而且它在某种程度上是一种防御性编程技术，因为如果您不使用内联 SQL，未来的程序员不太可能使用它。第一名。希望那不会令人困惑:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T21:32:19.223

如果它是一个相对较小/简单的应用程序，也许您不需要像 NHibernate 或实体框架这样的成熟 ORM。

您可以改用 Micro ORM。这些是更简单的库，不能提供 EF 和 NH 可以做的所有事情，但它们都能够将查询映射到对象列表。
如果您的应用程序不是超级复杂，也许这对您来说已经足够了。

最知名的 .NET 微 ORM 是：

*   [Dapper](http://code.google.com/p/dapper-dot-net/) *（由 Stack Overflow 的人制作和使用）*
*   [大量的](https://github.com/robconery/massive)
*   [PetaPoco](http://www.toptensoftware.com/petapoco/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T21:27:11.323

在我看来，使用表和关系最简洁的方法是使用 ObjectDataSource，然后使用 Databind 来控制并将所有查询放入 SP。

二是使用Entity Framework和Linq-to-SQL

将连接字符串放入 web.config 文件，并使用 Singleton 类获取 Connection 对象。

# drupal - 在 drupal 的首页视图中列出页面

> ID：14326879
> 
> 赞同：0
> 
> 时间：2013-01-14T21:21:15.500
> 
> 标签：drupal, drupal-7, views, hyperlink, frontpage

所以，我对 Drupal 比较陌生，我想创建一个 Drupal 站点，其首页带有指向站点上其他常用页面的链接网格。该站点旨在作为一个小镇的社区页面，因此它将包含政府、新闻、企业名录、历史、论坛等链接。

其中一些页面是我的 Drupal 站点上的基本页面，一些是外部链接，还有一些是指向视图或模块的链接，例如聚合器模块。我希望所有链接都是可排序的，并且通常具有相同的标记。我还希望自动收集这些链接，即通过“提升到首页”选项或类似的方式。我绝对不想将其硬编码到基本页面。

到目前为止，我的解决方案是创建一个视图，其中包含来自提升到首页的页面的标题字段列表，以及我命名为“链接”的特殊内容类型，它实际上只是重定向到外部 url。现在的问题是我不知道如何包含特殊页面，例如聚合器或视图。

有任何想法吗？有一个更好的方法吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:44:49.527

最简单的方法如下。

1.  创建一个名为链接的内容类型，上面有一个[链接字段](http://drupal.org/project/link)。
2.  创建一个页面视图，显示链接类型的所有内容并显示字段链接

这是一种非常基本的方法，如果您希望页面上有多个列表，那么这将取决于您使用的主题，并且需要使用分类法以某种方式对链接进行分类。

您可能还想查看[标志模块](http://drupal.org/project/flag)。

# struts - 支柱 在一个里面

> ID：14326880
> 
> 赞同：0
> 
> 时间：2013-01-14T21:21:22.460
> 
> 标签：struts

我正在使用 struts ，如果我的等于，`logic:iterate`我想做一些不同的事情， 但我想不出一个逻辑组合来说明 indexId == 1 是否做某事。`indexId``1`

有没有办法使用`<logic:equal>`上`indexId`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:20:48.797

1.  当功能重叠时，在 S1 标记上使用 JSTL。
2.  不`<logic:equal name="nameOfIndexIdVar" value="1"/>`工作？

# c# - vb.net中的统一拦截自动配置

> ID：14326881
> 
> 赞同：0
> 
> 时间：2013-01-14T21:21:27.033
> 
> 标签：c#, vb.net, unity-interception

我正在尝试在 vb.net 中进行拦截，因为我的工作只允许这样做。我以前从未遇到过具有这种 If.something 语法的 lambda。

```
 scan.Include(If.Implements<IBusinessService>, (x, y) =>
        {
            if (x.IsClass)
                y.Configure<Interception>().
                    SetDefaultInterceptorFor(x,
                                            new VirtualMethodInterceptor
                                                ());
        }) 
```

这在 vb.net 中看起来如何？如果我将来需要谷歌这个语法，这个语法叫什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:42:58.220

它不是语言或标准库的一部分。这只是一些开发人员编写的自定义方法，或者它是 3rd 方库的一部分。我们可以根据名称和上下文推测它是如何实现的，但它们只是猜测。

# ios - SearchBarDisplay 控制器和自定义 TableViewCell 示例

> ID：14326887
> 
> 赞同：0
> 
> 时间：2013-01-14T21:21:50.303
> 
> 标签：ios

我真的不知道我做错了什么。我已经尝试了为我的表实现 SearchDisplayController 的不同版本，但它仍然无法正常工作。一切似乎都很好。回显使用数组的计数等值给了我正确的数字。即使是搜索部分也可以，因为我什至可以回显找到的字符串。唯一的问题是找到的结果没有显示在我的桌子上。一旦通过在搜索栏文本字段中输入开始输入，就会出现一个带有空行的黑白表格。我不知何故真的很沮丧，因为这已经花了两天时间。任何提示？

这是执行搜索的代码： -(void)searchBar:(UISearchBar *)searchBar textDidChange:(NSString *)searchText {

```
if(searchText.length == 0)
{
    isFiltered = FALSE;
}
else
{
    isFiltered = TRUE;

    if (filteredTableData == nil)
        filteredTableData = [[NSMutableArray alloc] init];
    else 
        [filteredTableData removeAllObjects];

    for (NSDictionary *d in self.countries)
    {
        NSString *strData = [d valueForKey:@"cname"];
        NSRange nameRange = [strData rangeOfString:searchText options:(NSCaseInsensitiveSearch|NSDiacriticInsensitiveSearch)];
        if(nameRange.location != NSNotFound)
        {
            [filteredTableData addObject:d];
        }
    }
}
[self.tableView reloadData]; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T00:02:01.363

如果您使用的是 UISearchDisplayController ，则需要调用如下内容：

```
[self.searchDisplayController.searchResultsTableView reloadData]; 
```

代替

```
[self.tableView reloadData]; 
```

# ios - 是否可以在没有任何互联网连接/禁用蜂窝网络的情况下使用核心位置/GPS？

> ID：14326890
> 
> 赞同：14
> 
> 时间：2013-01-14T21:21:51.673
> 
> 标签：ios, gps, core-location

我需要在没有互联网的地区（例如在帆船上或撒哈拉沙漠中）捕获 GPS**坐标**（没有反向地理编码、名称等），以便您获得所在位置的纬度和经度。

核心位置是否支持并回退到仅 GPS（无小区三角测量或 WiFi 位置映射）？

我认为确实如此，但只是想确定一下。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-14T21:41:44.680

一些 iOS 设备具有真正的 GPS 芯片，即使没有互联网连接，您也可以获取位置数据。我相信最后几部 iPhone 都有 GPS。一些 iPad 型号有 GPS。我不相信任何 iPod touch 型号都有 GPS。

显然，如果没有互联网，除非它是应用程序的一部分，否则您无法显示任何地图数据，但该应用程序将能够记录真实的位置数据。

此外，如果没有互联网，GPS 可能需要更长的时间才能获得初始位置。带有 GPS 的设备具有所谓的“辅助 GPS”。这意味着蜂窝和/或 WiFi 三角测量用于帮助更快地获得初始位置修复。

没有 GPS 的设备使用蜂窝和/或 WiFi 三角测量来获取估计的位置数据，这远不如有 GPS 的设备准确。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-07-12T06:19:34.000

允许您在没有 wifi 的情况下获取位置的设备列表：

> **iPad + 蜂窝** *（辅助 GPS）*
> **iPad2 + 蜂窝** *（辅助 GPS）*
> **iPad3 + 蜂窝** *（辅助 GPS + GLONASS）*
> **iPad4 + 蜂窝** *（辅助 GPS + GLONASS）*
> **iPad Air + 蜂窝** *（辅助 GPS + GLONASS）*
> **iPad Air 2** *(iBeacon)*
> **iPad Air 2 + 蜂窝** *（辅助 GPS + GLONASS + iBeacon）*
> 
> **iPad Mini + 蜂窝** *（辅助 GPS + GLONASS）*
> **iPad Mini 2 + 蜂窝** *（辅助 GPS + GLONASS）*
> **iPad Mini 3** *(iBeacon)*
> **iPad Mini 3 + 蜂窝** *（辅助 GPS + GLONASS + iBeacon）*
> 
> **iPhone 3G** *(GPS + 辅助 GPS)*
> **iPhone 3GS** *(GPS + 辅助 GPS)*
> **iPhone 4** *(GPS + 辅助 GPS)*
> **iPhone 4S** *(GPS + 辅助 GPS + GLONASS)*
> **iPhone 5** *(GPS + 辅助 GPS + GLONASS)*
> **iPhone 5C** *(GPS + 辅助GPS + GLONASS)*
> **iPhone 5S** *(GPS + 辅助 GPS + GLONASS)*
> **iPhone 6** *(GPS + 辅助 GPS + GLONASS)*
> **iPhone 6 Plus** *(GPS + 辅助 GPS + GLONASS)*

绝对**不允许**您在没有 wifi 的情况下获取位置的设备。

> **iPhone（第 1 代）
> iPod touch
> iPad
> iPad 2
> iPad 3
> iPad 4
> iPad Air
> iPad Mini
> iPad Mini 2**

# asp.net - 检查字符串的前 16 个字符是否为数字

> ID：14326891
> 
> 赞同：1
> 
> 时间：2013-01-14T21:21:51.940
> 
> 标签：asp.net

我在数据库中存储了一些文件，其文件名类似于**1839341255115211butterflies.jpg**。我需要将此文件名显示为**butterflies.jpg**。我需要删除前 16 位数字，然后显示文件名。添加到它我也有几个文件名在文件名之前没有这个 16 位添加。现在我的问题是我如何识别这个字符串在文件名之前是否有 16 位数值，基于它删除第一个 16 位并只显示文件名。我知道如何删除前 16 位并检索文件名，但需要有关如何识别具有 16 位的字符串的帮助。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:24:39.660

正则表达式在这里看起来很合适：

```
^[0-9]{16} 
```

以上将匹配以 16 位数字（0 到 9）开头的字符串。

用法：

```
if(Regex.Match(fileName, @"^[0-9]{16}").Success)
{
  fileName = fileName.Remove(0, 16);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:27:46.923

string.Remove 会很好地工作：

```
 var str = "1839341255115211butterflies.jpg";
    str = str.Remove(0, 16);
    Console.WriteLine(str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:33:55.553

使用 Linq：

删除开头的所有数字，直到 16 位：

```
string file = "1839341255115211butterflies.jpg";
string extension = Path.GetExtension(file);
string fileName = Path.GetFileNameWithoutExtension(file);
fileName = new string(fileName.Where((c, i) => i >= 17 || !Char.IsDigit(c)).ToArray());
file = fileName + extension; 
```

[**演示**](http://ideone.com/gI3Gq9)

**编辑**：如果您只想知道前 16 个字符是否为数字，则更容易且更具可读性：

```
bool startsWith16Digits = file.Take(16).All(Char.IsDigit); 
```

# entity-framework - 如何为 POCO 类实现和测试复杂的业务规则

> ID：14326893
> 
> 赞同：0
> 
> 时间：2013-01-14T21:21:52.553
> 
> 标签：entity-framework, poco, business-rules

我正在使用 EF5 并且在 POCO 类中有实体。我的第一个问题是实施业务规则和验证的最佳位置是什么？

我的第一个猜测是将它直接放入 POCO 类中的某个 Validate() 函数中，该函数在触发 SaveChanges() 时从 DBContext 调用。这很好用，但某些规则需要跨多个实体进行验证，例如 Invoice 类的示例：

```
if(this.Items.Where(i=>i.Price > 100).Count() > 0)
{
    //mark invoice for review
    this.IsForReview = true;
} 
```

现在单元测试将测试 Validation 函数（针对每个业务规则），但还必须使用 Items 填充发票类（否则它将始终为空）

另一个想法是创建一个具有单独验证功能的 InvoiceValidation 类（甚至是每个规则的类？），这更容易进行单元测试，但它确实增加了要维护的文件/类的数量。

任何建议或现有解决方案的链接将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:52:23.417

最好的方法将取决于您的依赖关系。POCO/核心组件是否依赖于 EF？您是否将 Access to DB 注入到您的核心库程序集中？等等

我个人使用 repository/luw 模式，其中各种存储库对象继承自通用的基本存储库对象。DAL 依赖于 EF，但核心中的 POCO 类不依赖。

存储库子类具有特定的类型，并执行 OTHER OBEJCT 业务检查。需要检查其他实体的 IE 业务规则，我在 DAL 中实现。

存储库类属于数据访问层项目，并且 DO 依赖于 EF 并注入了上下文。下面的例子。

特定于我在 POCO 上执行的实例的检查。我通过在基类存储库类上实现的接口执行需要数据库访问的检查，该存储库类又根据要求被覆盖。所以现在在**添加**或**更改**对象时会触发**CheckEntity调用。**

 ****例如...注意删除了一些代码以保持示例相关...

```
 public class RepositoryEntityBase<T> : IRepositoryEntityBase<T>, IRepositoryEF<T> where T : BaseObject
public virtual OperationStatus Add(T entity)
    {
        var opStatus = new OperationStatus(status: true, operation: OperationType.Add);
        try
        {
            if (OnBeforeAdd != null) // registered listeners of added event?
            {
                var evtArg = PrepareEventArgs(entity, MasterEventType.Create);
                OnBeforeAdd(this, evtArg);
            }
            opStatus = CheckBeforePersist(entity);
            if (opStatus.Status)
            {
                Initialize(entity);
                EntityDbSet.Add(entity);

                if (OnAfterAdd != null) // registered listeners of added event?
                {
                    var evtArg = PrepareEventArgs(entity, MasterEventType.Create);
                    OnAfterAdd(this, evtArg);
                }
            }
        }
        catch (Exception ex)
        {
            opStatus.SetFromException("Error Adding " + typeof(T), ex);
        }
        return opStatus;
    }

//... then in a specific repository class

//... irepositorybase expects Check before persist.

  public override OperationStatus CheckBeforePersist(MasterUser entity)
    {

        // base entity rule check first
        var opStatus = new OperationStatus(true, OperationType.Check);          
        opStatus.ValidationResults  = base.CheckEntity(entity);      
        if (opStatus.ValidationResults.Count > 0)
        {
            opStatus.Status = false;
            opStatus.Message = "Validation Errors";
            return opStatus;
        }

        //now check the local memory
        var masterUser = Context.Set<MasterUser>().Local   //in context
                                              .Where(mu => mu.Id != entity.Id // not this record
                                                    &&     mu.UserName == entity.UserName ) // same name
                                              .FirstOrDefault();
        if (masterUser != null)
        {
            opStatus.Status = false;
            opStatus.Message = "Duplicate UserName :" + masterUser.UserName + " UserId:"+ masterUser.Id.ToString();
            return opStatus;
        }
        masterUser = Context.Set<MasterUser>().Local   //in context
                                             .Where(mu => mu.Id != entity.Id // not this record
                                                   && mu.Email == entity.Email) // same email
                                             .FirstOrDefault();
        if (masterUser != null)
        {
            opStatus.Status = false;
            opStatus.Message = "Duplicate Email :" + masterUser.Email + " Username:" + masterUser.UserName;
            return opStatus;
        }                                               

        // now check DB
        masterUser = Get(mu => mu.Id != entity.Id             //not this record being checked
                          && mu.UserName == entity.UserName);     // has same username
        if (masterUser != null)
        {
            opStatus.Status = false;
            opStatus.Message = "Duplicate UserName :" + masterUser.UserName + " UserId:"+ masterUser.Id.ToString();
            return opStatus;
        }
        masterUser = Get(mu => mu.Id != entity.Id    // not this record
                      && mu.Email == entity.Email);  // but same email 
        if (masterUser != null)
        {
            opStatus.Status = false;
            opStatus.Message = "Duplicate Email:" + masterUser.Email + " UserName:"+ masterUser.UserName;
            return opStatus;
        }
        return opStatus;   
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:35:15.593

我建议使用 Fluent Validation (http://fluentvalidation.codeplex.com/) 之类的方法，它允许您获取一组规则并将它们放在一个单独的上下文中，与它正在验证的 POCO 类分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T19:08:33.787

如果有人感兴趣，这是我迄今为止发现的最好的例子：

[http://codeinsanity.com/archive/2008/12/02/a-framework-for-validation-and-business-rules.aspx](http://codeinsanity.com/archive/2008/12/02/a-framework-for-validation-and-business-rules.aspx)****

# javascript - 有没有办法在没有用户交互的情况下在 iBooks 中运行 javascript？

> ID：14326895
> 
> 赞同：1
> 
> 时间：2013-01-14T21:21:57.967
> 
> 标签：javascript, ibooks, mixpanel

我们一直在 iBooks 3 中测试 HTML 小部件，并在在线连接方面取得了一些成功。但是，缺点之一是它需要用户交互才能实际扩展小部件并运行 Javascript。有没有办法在 iBook 的后台运行 Javascript，而不需要在常规分页之外进行用户交互？

例如，如果我们想让 Mixpanel 在后台运行，我们会怎么做？是否有另一种类型的小部件允许这种情况发生？或者除了 HTML 小部件之外还有其他运行 javascript 的东西吗？

编辑：为了澄清，我正在使用 iBooks Author 来创建完整的书，它具有在其中添加 HTML 小部件的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:33:23.477

ibooks 中的小部件在被用户激活之前不会执行 JS。因此，即使小部件的链接可能在您的书中可见，它也无法通过 ajax 建立连接或在启动之前执行任何其他操作。一旦启动，小部件也无法访问图书内容。如果你想在一个小部件中运行 mixpanel，你可以，但除非你的小部件还包含书籍的所有内容（和阅读系统），否则它没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T11:46:28.057

我假设您正在谈论使用 iBooks Author 创作的一本书，顺便说一句，这将是您提出问题的有用细节。我不知道 iBooks Author 或其小部件架构，也不知道它在多大程度上公开了将 JS 放置在页面上的能力。

但是，在以 (X)HTML/JS/CSS 编写的“普通”电子书中，阅读器中的 JS 和 Web 浏览器中的 JS 没有本质区别。

我不确定您所说的“在后台运行”是什么意思；JS 在某些东西告诉它时运行，无论它是放在 SCRIPT 元素中的页面上，还是放在 onLoad 或其他一些事件处理程序中。

# javascript - 多个不同的 Javascript 错误不能重复

> ID：14326896
> 
> 赞同：1
> 
> 时间：2013-01-14T21:21:58.580
> 
> 标签：javascript, jquery, error-handling, syntax-error

当发生 javascript 错误时，我正在使用 a`window.onerror=function(msg, url, linenumber)`向自己发送电子邮件。当我使用我的网页（IE、FF、CHRM 等）时，我没有收到任何错误。但是，我收到了其他用户通过电子邮件发送给我的各种错误，这些错误我无法复制。我可能会在访问该网站的 1% 的用户中发生错误，因此 1/100 页面加载时我会收到错误。这里有一些：

*   语法错误：[http ://www.google-analytics.com/ga.js](http://www.google-analytics.com/ga.js)
*   加载脚本时出错：[http ://www.google-analytics.com/ga.js](http://www.google-analytics.com/ga.js)
*   加载脚本时出错：[https ://seal.thawte.com/getthawteseal?host_name=XXX&size=M&lang=en](https://seal.thawte.com/getthawteseal?host_name=XXX&size=M&lang=en)
*   $("input.datepicker").datepicker 不是函数
*   未捕获的 SyntaxError：意外的令牌
*   对象不支持此属性或方法
*   未捕获的类型错误：对象 [对象对象] 没有方法“对话”
*   语法错误：[http ://seal-cencal.bbb.org/logo/XXX](http://seal-cencal.bbb.org/logo/XXX)
*   错误：访问属性“toString”的权限被拒绝

我不明白的是，该网站 99% 的时间都在运行而没有任何错误，而且在我使用的任何浏览器上似乎都不会发生错误。我还在跟踪用户正在使用哪些浏览器发送这些错误，这是随机的，各种浏览器，它们都是较新的 FF，主要是 IE 版本。

你如何停止外部代码的语法错误（但它们大部分时间都有效）......？为什么 google 和 thawte 脚本无法经常加载某些人但从未发生在我身上，有没有办法对此进行回退？日期选择器之一，我只能假设它的错误是因为 jquery UI 加载失败，因为 jquery 加载（否则它不会在文档就绪调用中被调用）但我什至有一个 localhost jquery UI 脚本后备包含它仍然会发生。 .

有没有人建议我帮助我进一步调试/修复这些问题。问题是，该网站获得了很多点击，我每分钟都会收到大约 1 个通过电子邮件发送给我的错误（而且导致每个错误的不是同一个用户）。如果您有任何建议，请告诉我（请记住，代码和网站在 99% 的情况下都可以正常工作，所以我认为这在我的任何地方都不是语法问题）。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:30:48.187

列表中的大多数错误是由浏览器扩展中的错误引起的。

如果您真的想记录 JavaScript 错误，最好也记录堆栈跟踪（如果可用）。我还记录有关执行的函数和发送给它的参数的详细信息。当错误被捕获时，我从我构建的堆栈中删除了 X 数量的东西并将其发送出去。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T21:42:30.497

> 你如何停止外部代码的语法错误（但它们大部分时间都有效）......？

你真的不能。没有更详细的消息调查是完全不可能的。请注意，sysntax 错误也可能是由其他原因引起的，它们的来源可能不在外部脚本中。我怀疑 Google Analyticts 提供的脚本无效。

> 为什么谷歌和解冻脚本无法经常加载某些人但从未发生在我身上

他们可能会使用广告拦截器或类似的工具。不是每个人都希望谷歌记录他的网络使用情况。此外，某些代理可能会忽略/阻止它们，例如 Intranet 防火墙。

> 有没有办法对此进行回退？

您可以尝试从您自己的域作为代理提供它们。或者只是忽略它们，我不认为你的应用真的需要这些的后备。

> 日期选择器之一，我只能假设它的错误，因为 jquery UI 无法加载，因为 jquery 仍然加载

是的，这听起来很可能。或者它只是在被调用之前没有加载。

> 但我什至有一个 localhost jquery UI 脚本后备包含，它仍然会发生..

本地主机？我猜你的意思是服务器上的副本。尽管如此，这仍取决于脚本及其后备版本的加载方式的详细信息。

> 有没有人建议我帮助我进一步调试/修复这些问题。

堆栈跟踪将有助于定位导致错误的用户操作。

# c++ - C++ 如何对负数进行按位“或”运算？

> ID：14326900
> 
> 赞同：6
> 
> 时间：2013-01-14T21:22:03.613
> 
> 标签：c++, bitwise-operators, bitwise-or

当我给一个变量这样的值时：`e = 17|-15;`，编译后我得到-15作为答案。我不明白算术c++使用什么。它如何对负小数执行按位或运算？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-14T21:24:37.257

它只是对数字的二进制表示进行操作。在您的情况下，这似乎是[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)。

```
 17 -> 00010001
-15 -> 11110001 
```

如您所见，`OR`这两个数字的按位仍然是`-15`。

在您上面的评论中，您表示您尝试过使用二进制补码表示，但您一定做错了什么。这是一步一步的：

```
 15 ->  00001111      // 15 decimal is 00001111 binary
-15 -> ~00001111 + 1  // negation in two's complement is equvalent to ~x + 1
-15 ->  11110000 + 1  // do the complement
-15 ->  11110001      // add the 1 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-14T21:25:04.990

它对负数执行 OR 操作的方式与对正数的操作相同。这些数字几乎可以肯定以二进制补码形式表示，它为您提供以下值：

```
17 = 0000000000010001
-15 = 1111111111110001

```

如您所见，17 的所有位都已设置为 -15，因此组合它们的结果再次为 -15。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-14T21:25:09.623

```
 17 = b00010001
  -15 = b11110001 <--- 2s complement
| -15 = b11110001 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-14T21:26:54.943

按位或负数的工作方式与按位或正数一样。一个数字中的位与另一个数字中的位相或。您的处理器如何表示负数是另一回事。大多数使用称为“二进制补码”的东西，本质上是“反转数字并加 1”。

因此，为简单起见，如果我们有 8 位数字：

```
15 is            00001111
Inverted we get  11110000
Add one          11110001

17 is            00010001

Ored together    11110001 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-14T21:26:52.463

该运算符`|`是“按位`OR`”运算符，这意味着目标中的每个位都被计算为`OR`两个操作数中相应位的组合。这意味着，结果中的一个位是`1`如果相同位置的数字中的*任何*两个位是`1`，否则`0`。

显然，结果取决于数字的二进制表示，而二进制表示又取决于平台。

几乎所有平台都使用**二进制补码**，可以将其视为一个无符号数字的圆圈，其中负数与正数的方向相反并“环绕”圆圈。

无符号整数：

![在此处输入图像描述](../Images/13b40d89fdcef7e9918373d81b6c2022.png)

有符号整数：

![在此处输入图像描述](../Images/9c9857404139f5ab60371a84dc592bdf.png)

您的示例的计算如下。

```
 17:   00000000 00000000 00000000 00010001
-15:   11111111 11111111 11111111 11110001
------------------------------------------
-15:   11111111 11111111 11111111 11110001 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-14T21:26:16.660

你必须看看这些位是如何工作的

基本上，如果任一数字`1`在特定位置有一个，那么结果也将有一个`1`

```
-15       : 11110001 (two's complement)
17        : 00010001
-15 | 17  : 11110001 
```

如您所见，结果与`-15`

# java - 请问java RMI的意义？

> ID：14326901
> 
> 赞同：29
> 
> 时间：2013-01-14T21:22:04.847
> 
> 标签：java, computer-science, rmi, software-design, anti-patterns

人们为什么使用 RMI，或者我什么时候应该使用 RMI？我在 oracle 的网站上阅读了有关 RMI 的那些教程。但它没有提供足够的实际例子。

据我了解，软件的模块应尽可能“不相关且分离”。在我看来，RMI 似乎是高耦合的一个例子。为什么这不是一个糟糕的编码实践？我认为客户端应该只触发指令，而对象的所有实际操作都是由服务器完成的。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-14T21:40:35.127

您真的不应该将 RMI 用于您今天构建的任何应用程序，主要是出于您刚刚列出的原因。

在某些情况下（潜入遗留或“企业”应用程序）您别无选择。

但是，如果您要开始一个新项目，其他选项包括：

### 基于 HTTP 的 REST + JSON

与远程服务通信的事实标准。它最大的优点是重量轻，易于掌握概念。

从理论上讲，它应该比 RMI 需要更多的工作，因为您必须手动制作可用的 URL、每个 URL 中接受的动词等。在实践中，我会说 RMI 的样板文件并不能真正帮助任何人。

坚持使用 java，[Jersey 是一个出色的库](http://jersey.java.net/)，可以编写您自己的 RESTful Web 服务。

如果您想要一个包含电池的解决方案，用于使用 java 的 RESTful Web 服务， Yammer 的好人的[Dropwizard](http://dropwizard.codahale.com/)为您提供了一个完整的服务器和框架，准备好插入您的业务逻辑，并提供日志记录、数据库连接、序列化、请求路由和甚至是开箱即用的指标。

### 肥皂

与远程服务通信的先前标准。除非你有理由使用它，否则我会坚持使用 REST。

### 节约

Thrift 将创建一个客户端和一个服务器存根，基本上完成大部分工作。通信采用高效的二进制协议。它在 Java 世界中越来越受欢迎，因为它被“大数据”领域的许多开源项目使用。例如，Cassandra、HBase（切换到 Avro）。Scrooge 是一个 twitter 项目，用于为 scala 创建惯用的 thrift 存根。

### 阿卡演员

[Akka 是](http://akka.io/)为 Scala 和 Java实现[Actor 模型的框架。](http://en.wikipedia.org/wiki/Actor_model)包括服务间通信的规定，并处理许多底层细节。我

* * *

根据您的需要，有些会比其他的更合适。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-14T21:26:39.143

任何时候你有一个功能需要一些大型集中计算能力或一些昂贵的资源（例如一个巨大的数据库），但你的输出需要在许多地方无法部署这样的工作负载，那么你会查看远程方法调用. 考虑一下网络，您的桌面上没有 Google 的副本来进行您可能想要计算的任何搜索，您在需要结果的那一刻远程调用 Google 的服务器。RMI 是一种协议/系统，用于跨服务器分发您的应用程序并分离出需要访问该代码结果的客户端。

RMI 还可以作为保护应用程序各个方面的一种方式（如专有算法）。RMI 不是唯一的方法，您还可以使用 HTTP、SOAP 等。许多其他方法提供了其他功能，例如真正的语言透明性、更简单和更有效的实现以及更好的解耦。

这是[文档中 RMI 的既定目标](http://docs.oracle.com/javase/1.4.2/docs/guide/rmi/spec/rmi-intro3.html)

> 在 Java 编程语言中支持分布式对象的目标是：
> 
> *   支持对不同虚拟机中对象的无缝远程调用
> *   支持从服务器到小程序的回调
> *   以自然的方式将分布式对象模型集成到 Java 编程语言中，同时保留大部分 Java 编程语言的对象语义
> *   使分布式对象模型和本地 Java 平台的对象模型之间的差异变得明显
> *   使编写可靠的分布式应用程序尽可能简单
> *   保留 Java 平台的运行时环境提供的类型安全性
> *   支持远程对象的各种引用语义；例如实时（非持久）引用、持久引用和延迟激活
> *   维护由安全管理器和类加载器提供的 Java 平台的安全环境 所有这些目标的基本要求是 RMI 模型既简单（易于使用）又自然（非常适合该语言）。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-14T21:33:26.663

你是对的，RMI 是服务提供者和服务消费者之间过于紧密耦合的一个例子。而且它比乍看起来更糟糕：您永远不知道您可能会被推送到客户端，从而`ClassNotFoundException`掩盖了发生的真正错误。RMI 和类似的 EJB 是过去的技术，过去相信“透明分布的对象”的错觉。

今天的远程服务基于与 RMI 方法完全相反的方法：REST 和 JSON。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-14T22:54:45.250

RMI 是针对完全相反的情况，在这种情况下，您需要紧密绑定，紧密到看起来像是一个本地方法调用。如果您不想要，请不要使用它。整个 RPC 范式并不适合所有人，包括我，即使我写了一本关于 RMI 的书，但每个工具都有其用途。例如，Java EE 是基于 RMI 模型构建的。

# python - python中的tictactoe（打印动作有问题）

> ID：14326903
> 
> 赞同：-2
> 
> 时间：2013-01-14T21:22:22.363
> 
> 标签：python, tic-tac-toe

好的，对于初学者来说，这是一个简单的井字游戏，我正在创建一个设计困难的 AI，并且我的代码中有部分 AI（随机）代码。忽略该功能，但我的主要困难是正确地在板上打印动作。出于某种原因，每当我选择我想成为 X 还是 O 时，它都会自动将我提交到 X。此外，如果我选择位置 A 以外的任何东西，它无论如何都会在位置 A 上打印一个 X。如果有人能帮助我告诉我在我的编码中到底哪里出错了，我会很高兴的。另一方面，为了使我的游戏更加清晰和容易，我想在移动后并排打印 Board 和 Board 2。这将显示哪些动作可用，因此如果采取了动作 A 和 B，它们将不会显示在棋盘上。

```
print "**********************"
print "*THE GAME WILL BEGIN.*"
print "**********************"
import random
indx=0
move_storage=[]
move=["","","","","","","","",""]
#**************************************************
#            This is the original board           *
#**************************************************
def board():
    print "This is the tictactoe board we will be playing on"
    print "         |         |        "
    print "    A    |    B    |    C   "
    print "         |         |        "
    print "------------------------------"
    print "         |         |        "
    print "    D    |    E    |    F   "
    print "         |         |        "
    print "------------------------------"
    print "         |         |        "
    print "    G    |    H    |    I   "
    print "         |         |        "
board()
#****************************************************
#This is the board where the moves will be displayed*
#****************************************************
def board2(move):
    print "  ",move[0],"  |   ",move[1],"     |     ",move[2],"     "
    print "       |          |     "
    print " -----------------------  "
    print "       |          |     "
    print "  ",move[3],"   |    ",move[4],"    |     ",move[5],"     "
    print "       |          |     "
    print " -----------------------  "
    print "       |          |     "
    print "  ",move[6],"   |     ",move[7],"   |    ",move[8],"     "

#This function will store all of the moves inputed.
def movestorage(move_storage, move):
    move_storage= move_storage + [move]
#This function will randomize the computer's move
def computer_move():
    move_random=random.randint(1,9)
    move[move_random]=computer_choice
    movestorage(move_storage, move)
player=raw_input("Would you like to play as x or o-->")
player_order=raw_input("Would you like to go first,y/n?-->")
while indx==0:
    if 'x' or 'X' == player:
        player_choice="X"
        computer_choice="O"
        if 'y' or 'Y' in player_order:
            print 
        elif 'n' or 'N' in player_order:
            print
            print "The computer will go first, press ENTER to see the computers turn"
    elif 'o' or 'O' == player:
        player_choice="O"
        computer_choice="X"
        if 'y' or 'Y' in player_order:
            print
        elif 'n' or 'N' in player_order:
            print
            print "The computer will go first, press ENTER to see the computers turn"
    x=0
    while 2>x:  #This is where the player decides where he wants to go
        choice=raw_input("Choose where you would like to move-->")
        if choice == 'a' or 'A':
            move[0]=player_choice
            movestorage(move_storage, move)
        elif choice == 'b' or 'B':
            move[1]=player_choice
            movestorage(move_storage, move)
        elif choice == 'c' or 'C':
            move[2]=player_choice
            movestorage(move_storage, move)
        elif choice == 'd' or 'D':
            move[3]=player_choice
            movestorage(move_storage, move)
        elif choice == 'e' or 'E':
            move[4]=player_choice
            movestorage(move_storage, move)
        elif choice == 'f' or 'F':
            move[5]=player_choice
            movestorage(move_storage, move)
        elif choice == 'g' or 'G':
            move[6]=player_choice
            movestorage(move_storage, move)
        elif choice == 'h' or 'H':
            move[7]=player_choice
            movestorage(move_storage, move)
        elif choice == 'i' or 'I':
            move[8]=player_choice
            movestorage(move_storage, move)
        board2(move) 
```

此外，我还有一些空白打印声明，以确保整洁，它们不是错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:27:04.087

`if 'x' or 'X' == player`不意味着要么是要么，*而是*意味着，因此将两者都测试为布尔值，并测试为布尔值，然后整个表达式是如果第一部分*或*第二部分是。`player``x``X``if ('x') or ('X' == player)``'x'``'X' == player``True`*`True`*

 *由于第一个是长度大于 0 的字符串，所以它*总是*，并且永远不会`True`进行第二个测试：

```
>>> bool('x' or 'X' == 'fiddlesticksandflapdoodles')
True
>>> bool('x')
True
>>> bool('X' == 'fiddlesticksandflapdoodles')
False 
```

利用：

```
if 'x' == player or 'X' == player: 
```

相反，或者：

```
if player in ('x', 'X'): 
```

或者：

```
if player.lower() == 'x': 
```

所有这些都测试同一件事。

这适用于所有`if`针对大小写字母进行测试的语句，例如`'n' or 'N'`, 和`'o' or 'O'`。

至于你的一长串`if choice`测试；只需使用映射将字母映射到数字：

```
choices = {letter: number for number, letter in enumerate('abcdefghi')} 
```

现在您可以使用`choices`映射到索引：

```
index = choices.get(choice.lower())
if index is not None:
    move[index] = player_choice
    movestorage(move_storage, move) 
```*

# .net - 使用 JQuery UI 按钮调用服务器端函数

> ID：14326905
> 
> 赞同：1
> 
> 时间：2013-01-14T21:22:27.557
> 
> 标签：.net, vb.net, jquery-ui

我在下面创建了一个 JQuery UI 按钮。有没有办法添加某种类型的事件导向器，以便当我单击按钮时，我的 vb.net 函数之一在我的 .aspx.vb 文件中被调用？

谢谢

```
$("#editor-form").dialog({
            autoOpen: false,
            height: 400,
            width: 650,
            modal: true,
            buttons: {
                "Add Editor": function () {
                 //fire serverside event?? 
```

我尝试添加它，但它不起作用......没有错误，只是不起作用。

```
 $.ajax({
                        type: "POST",
                        url: "CreateTest.aspx/btnAddEditors_Click",
                        //data: "{subject:'" + subject + "',message:'" + message + ",messageId:'" + messageId + "',pupilId:'" + pupilId + "'}",
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (msg) {
                            // Do something interesting here.
                        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:34:40.010

在下面的示例中，我有一个对话框，在对话框中我有一个名为更新页面的按钮，单击该按钮将通过 POST 在服务器上执行一个方法

**发布示例**

```
 var runDates = "Pages/Mobile/Login.aspx/LoginUser";

    function initDailog() {

        RunDialog = $("#runDatestreeview").dialog({ closeOnEscape: true, stack: false, autoOpen: true,
            modal: false, resizable: true, draggable: true, title: 'Select Run Dates to Auto-Populate Form Fields & Test Exceptions:',
            width: 600, height: 500, position: 'center',
            open: function (type, data) {
                originalContent = $("#treeview").html();
            },
            buttons: { UpdatePage: function () {
                $.post(runDatesUrl,
//the following line sends my entire form or you could send individual values to the server
              $("#form").serialize(),
               function (data) {
                   This is your success function
                   //In my case the server was sending updated data to re-fresh my form fields
                   //so I update my div with the new results/content
                    $("#main").html(data);
                              }, "html");
            },
                Cancel: function () {
                    $(this).dialog("close");
                  }
            }
        });
    } 
```

**.加载示例**

除了 POST，您还可以对空 div 执行 .LOAD

```
$("#yourDivNameHere").load(UR, { ID: $("#ID").val(), ErrorCodes: errorTextArea }); 
```

**编辑**

假设您在服务器端代码隐藏文件中有以下方法：

```
 public static bool AddNewItem(string name, string surname, int age)
    {

      return true;      
    } 
```

现在在帖子中：

```
buttons:
{
    "Add": function () {
        var name = $("#<%= txtName.ClientID  %>").val();
        var surname = $("#<%= txtSurname.ClientID %>").val();
        var age = $("#<%= txtAge.ClientID %>").val();

        $.ajax({
            type: 'POST',
            url: 'MyWebPage.aspx/AddNewItem',
            data: '{"name":"' + name + '", "surname":"' + surname + '", "age":' + age + '}',
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                if (msg.d) {
                    alert("Successfully added new item");                                    
                }
            },
            error: function () {
                alert("Error! Try again...");
            }
        });
    },
    "Cancel": function () {
        $(this).dialog("close");
    }
} 
```

# php - 来自 7 个 SQL 行的第一个 start_time 和最后一个 end_time 仅显示 1 个 SQL 结果

> ID：14326909
> 
> 赞同：1
> 
> 时间：2013-01-14T21:22:40.537
> 
> 标签：php, mysql

我正在制作时间表提交/批准功能，目前正在处理pending.php页面，经理/管理员可以转到pending.php并查看待审核的时间表...

我现在的代码是：

```
list($qh,$num) = dbQuery(
"SELECT start_time, end_time, uid, submitid, submitstatus, submitdate, submitapprover 
FROM $TIMES_TABLE 
WHERE submitstatus=1 
ORDER BY submitid"); 
```

现在它显示了该周的所有时间表条目： [示例](http://www.dumpt.com/img/viewer.php?file=mdvhrnafvv12nkz6dyzp.jpg)

我真正需要的是每周提交的一行。基本上，抓住第一个 start_time 和最后一个 end_time 并将其放在一起（开始 - 结束）（开始时间 - 结束时间 | 用户名 | id | 提交日期 | 提交状态..等）

有人告诉我使用 group_catcon 或其他东西，但我不熟悉。

从我的照片中，我想要类似的东西：

```
2012-12-30 - 2013-01-05 | admin | submitid#### | submitdate | status | approver
2013-01-06 - 2013-01-09 | admin | submitid#### | submitdate | status | approver 
```

我对 php/mysql 很陌生，所以我很抱歉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:29:12.490

您可能会发现所有这些列中的内容比您想要的要多。例如，有各种批准者。为此，您可能希望从查询中删除一些。

```
select 
  concat(min(start_time), ' - ', max(end_time)), 
  uid, 
  submitid, 
  submitstatus, 
  submitdate, 
  submitapprover
FROM 
  $TIMES_TABLE
WHERE 
  submitstatus=1 
GROUP BY
  uid, 
  submitid, 
  submitstatus, 
  submitdate, 
  submitapprover
ORDER BY 
  submitid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:44:27.450

我已经用多种语言构建了许多时间表应用程序。您可以使用 group_concat 它用逗号将字符串联系在一起，但我认为这不是您所需要的。

问题是您必须将它与 group by 一起使用。从您的数据库结构来看，它可能对您不起作用。

“分组依据”的规则是您必须选择在“分组依据”列列表中使用的列，或者您必须在该列上使用聚合函数。

在具有以下结构 books_sold (id, author_id, date, price) 的 books 表上，您可以执行以下操作

```
select sum(price), author FROM books_sold group by author 
```

获取每位作者的书籍总数。

```
select sum(price), date FROM books_sold group by date 
```

得到每个日期售出的书籍的总和。

```
select group_concat(id), date FROM books_sold group by date 
```

获取每个日期售出的所有书籍的 ID。id 将用逗号分隔

但你不能做一个

```
select group_concat(id), date, author FROM books_sold group by date 
```

因为在作者列上，您没有进行分组或批量操作。查询有效，但作者列不可靠。

现在从您的数据库结构来看，我认为您无法执行 group_concat 并仍然获得您想要的字段。如果批准人在一周内不是同一个人会怎样？您的审批人列将没有意义。如果整个一周的 submitid 都不一样怎么办？如果整周的提交日期不同，会发生什么？

如果这些列始终相同，您可以执行

```
select CONCAT(min(start_time), ' - ', max(end_time)), uid, submitid, submitstatus, submitdate, submitapprover FROM $TIMES_TABLE WHERE submitstatus=1 GROUP BY uid, submitid, submitstatus, submitdate, submitapprover ORDER BY submitid 
```

# css - 如果没有js太小，隐藏元素

> ID：14326912
> 
> 赞同：4
> 
> 时间：2013-01-14T21:22:55.333
> 
> 标签：css, dynamic, size

如果窗口大小低于最小大小，我喜欢隐藏内容。我找到了一个示例（http://css-tricks.com/dynamic-page-replacing-content/），但我不知道它为什么有效。

```
<div class="container">
    <div class="box left">foo1</div>
    <aside class="box right">foo2</aside>
</div> 
```

目标是，如果容器的宽度低于指定的最小尺寸，则将隐藏。这应该在没有javascript的情况下工作，只需使用css。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-14T21:26:07.750

您正在寻找的是“CSS 媒体查询”。

查看这篇文章了解更多信息：http: [//mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website /](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

此示例将仅使用 CSS 完成您正在寻找的内容：

```
@media only screen and (max-device-width: 480px) {
  aside { 
    display:none;
  }
} 
```

[您还可以查看 twitter bootstrap 以了解如何使用它来制作响应式网格系统和在特定上下文中隐藏元素的类](http://twitter.github.com/bootstrap/scaffolding.html#responsive)

# jsp - 在 JSP 页面中使用 JSTL 检查文件是否存在

> ID：14326914
> 
> 赞同：2
> 
> 时间：2013-01-14T21:23:07.223
> 
> 标签：jsp, jstl, file-exists

如果文件存在（确切地说是图像），则可以在 JSTL 中检查：
只需查看个人资料图像。如果在带有图像配置文件图像的文件夹中，则显示配置文件图像，如果不显示默认图像。

这是一个伪代码：

```
if file img/1.jpg exist:
<img src="img/1.jpg" />
if file img/1.jpg doesn't exist
<img src="img/default_image.jpg" /> 
```

注意：我被禁止使用 scriptlet。我必须在 JSP 中使用 JSTL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:47:29.097

如果您必须使用直接的 JSTL，则不是，您可以在 scriptlet 中执行此操作，但建议您不要这样做

# cookies - jmeter - 计算 cookie 值

> ID：14326922
> 
> 赞同：0
> 
> 时间：2013-01-14T21:23:45.887
> 
> 标签：cookies, httprequest, jmeter

我正在使用 jmeter 来验证错误修复。

服务器逻辑将 cookie 设置为“mygroup”，它可以是“groupa”或“groupb”。我希望能够触发一系列请求，并且能够看到这个 cookie 的值之间存在适当的平衡分布。即发出 100 个请求和 50 次 cookie 将被设置为“groupa”和“groupb”。

我有点坚持这一点。我目前有以下。我可以看到在结果树中设置的 cookie，但我希望能够显示带有版本和每个请求数量的表格。

```
Thread Group
    HTTP Cookie Manager
    HTTP Request
    View Results Tree 
```

在结果树中，我可以看到 Set-Cookie: mygroup="groupa" 有时也可以看到 mygroup="groupb" 我如何将其制表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:55:54.837

您可以通过设置将 cookie 值导出为 JMeter 变量：CookieManager.save.cookies=true

在 user.properties 中。

将 Cookie 管理器添加到您的测试计划。

在这种情况下，您将拥有由 JMeter 设置的 var **COOKIE_mygroup**。

然后，您可以使用 JSR223 Sampler + Groovy 像这样计算它（在 jmeter/lib 文件夹中添加 groovy-all-version.jar：

```
 String value = vars.get("COOKIE_mygroup");
    Integer counterB = vars.getObject("counterB");
    Integer counterA = vars.getObject("counterA");
    if(counterA == null) {
        counterA = new Integer(0);
        vars.putObject("counterA", counterA);
    }
    if(counterB == null) {
        counterB = new Integer(0);
        vars.putObject("counterB", counterB);
    }
    if(value.equals("groupa")) {
        counterA = counterA+1;
        vars.putObject("counterA", counterA);
    } else {
        counterB = counterB+1;
        vars.putObject("counterB", counterB);

    } 
```

由于您只有一个线程，因此在循环结束时您可以比较这两个值或仅显示该值：

*   添加调试采样器

*   添加视图树结果

运行测试计划，在查看结果树中点击调试采样器，选择响应选项卡，你应该有你的值

# c# - '携带'字节并在c＃中运行它的方法？

> ID：14326929
> 
> 赞同：0
> 
> 时间：2013-01-14T21:23:56.800
> 
> 标签：c#, reflection, encryption, io, byte

我需要我的程序是安全的，因为它的内容包括个人信息，如 IP（如果你必须知道，一个私人 IRC 聊天）。我的计划是读取程序的字节，然后创建一个像 AES 这样的对称加密算法来加密字节数组，为了提高安全性，我添加了其他可以处理调试和仿真器的小东西。然后我将使用 codedom 创建我的存根来“携带”这些加密字节。我知道有两种方法可以“携带”代码：

1.  将加密字节附加到存根，以便它解密、写入和运行。（称为掉落）
2.  将它添加到存根的资源中，以便它可以解密并加载它，以便它能够在内存中运行它。

通过添加到资源然后解密、写入和运行或附加然后解密、加载和在内存中运行，我可以有 4 种方法。我也可以在代码中做一些自己的小混淆，但我怀疑它会产生很大的不同。

方法2似乎被人滥用了，被杀毒软件检测到了，每次调试时让你的项目被杀毒软件屏蔽真的很烦人。当所有程序所做的只是保护自己不被 Red Gate Reflector 等程序轻易拆卸时，这些借口对用户来说只是一个误报。包括数据库信息，例如SQL登录方法，如果反汇编仍然会被分析：

还有更多方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T21:38:48.257

**没有办法做你描述的事情。摆脱它。**

* * *

做这种事情的另一种方法是拥有一个用户必须对其进行身份验证的 Web 服务，然后通过安全通道（例如 SSL/TLS）发送敏感信息。

第二种方法可能是你

1.  加密信息
2.  将敏感信息的加密版本嵌入到可执行文件中
3.  在运行时向用户询问对称密钥（例如，他必须输入数据的“密码”）
4.  使用对称密钥解密信息
5.  使用信息

这里最大的缺点是，如果对称密钥（例如密码）以任何方式被盗，攻击者就可以获得所有加密信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:30:37.373

怎么样`SecureString`？似乎这将处理隐藏程序中的信息而无需太多麻烦。如果内存在执行期间被转储，那么数据将被加密。

# javascript - 减少更新 HTML Excel 类电子表格中的单元格时的延迟

> ID：14326931
> 
> 赞同：1
> 
> 时间：2013-01-14T21:24:01.567
> 
> 标签：javascript, jquery

# 情况

好的，这就是交易：我给自己设定了一个挑战来提高我的 JavaScript 知识。这一挑战涉及创建一个完全前端的类似 Excel 的电子表格。目前我拥有的是一个包含 15 列和 30 行表格单元格的表格，允许文本输入。就像在 Excel 中一样，每个单元格都有自己唯一的参考 ID（A2、F14、G9 等）：

```
 _________________
     _____|__A__|__B__|__C__|
    |__1__|__8__|_____|_____|
    |__2__|_100_|__6__|_____|
    |__3__|_300_|_____|__5__| etc... 
```

这些单元格将允许在其中放置类似 Excel 的实时公式，并且电子表格将相应地自行更新，例如：

```
 _____________________
     _____|__________C__________|
    |__1__| =(SUM(A1:A3)*C3)+B2 |

    Would translate to: var n = ((8+100+300)*5)+6; 
```

# 问题

现在这一切都很好，但问题是：每次我只更新一个单元格时，我都必须循环并更新所有单元格以确保数据准确。当只有 9 个可用的单元格（如上面的粗略示例）时，这不是一个大问题，但我当前的表有 15 列和 30 行......其中 450 个！

我目前已经设置好了，每次浏览器的焦点离开一个单元格时，后面的 JavaScript 都会循环并更新每个单元格，以确保数据都是正确的。当只有 5 或 6 个包含数据的单元格时，这本身会导致一点点延迟，所以我担心当我填充电子表格中的每个单元格时，我的浏览器会死在我身上。

我很可能梦想着不可能的事情，但理想情况下，我希望能够呈现一个包含数百列和行的电子表格，这些列和行可以即时更新。所以我给你们的两个问题是：

*   我能做些什么来防止延迟？
*   是否有可能在不中断互联网的情况下支持超过 15 列和 30 行的公式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T22:04:41.260

您不需要在每个单元格上运行“刷新”。当一个单元格被更新时，如果其中有一个函数，它将引用一个特定的单元格、行或列。由于它包含该引用，因此您可以对其进行解析以确定需要更新哪些单元格。例如，您`=(SUM(A1:A3)*C3)+B2`知道它只需要 A1、A2、A3、C3 和 B2 中的值 - 因此您可以直接引用这些单元格，而不是遍历所有内容。由于您知道要使用侦听器更新的最后一个单元格，因此您可以解析单元格引用的数据，然后仅在这些单元格上运行您的脚本（如果触发事件的单元格中的数据需要更新）。您正在控制所有功能和用户选择数据的方式，以便您知道何时需要更新某些内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T22:49:29.583

我认为一个好的解决方案是处理回调而不是遍历整个表格。

每次创建新公式时，您都应该在该公式中查找引用的单元格，并添加一个处理程序来更改每次引用单元格更改时调用该引用单元格的单元格。

我创建了一个[非常简单的示例](http://jsfiddle.net/cKu97/1/)来说明我的意思。小心使用它，它可能非常有问题，因为一旦您更改公式，我就不会清理引用的单元格。无论如何，我认为它可能看起来很清楚作为一个例子。

这个想法的核心在于以下代码片段

```
$('input').on('change', function(){
  var referencedCells = getReferencedCells($(this).val());
  var $referencer = $(this);  

  for(var i=0 ; i<referencedCells.length; i++){  
    $(referencedCells[i]).on('change', function(){  
      updateValue($referencer);
    });
  }

  updateValue($referencer);

}); 
```

假设每个单元格都是`input`. 每次更改时，您都会在公式中查找引用的单元格，并为它们添加回调。因此，当您更改这些单元格时，您的公式值将更新，而无需查找其公式中调用您更改的单元格的所有单元格。

**编辑**：每个单元格只接受不以“=”开头的**总和（例如：A2+B2+3）（没有空格）****或文字**。结果显示在警报中，因为更改实际值会弄乱公式（在现实生活中，您可以将实际值保存在属性中来完成此操作）。不要尝试在好的情况下不应该工作的任何公式（任何在 excel 中显示的东西与数字不同的东西）。

# android - 通过 NFC 发送 URL 以由浏览器打开

> ID：14326934
> 
> 赞同：5
> 
> 时间：2013-01-14T21:24:10.847
> 
> 标签：android, url, nfc

我希望能够通过 NFC 发送一个 URL，以便它可以由接收手机的浏览器在 android 手机上打开。这是一个可能的行动吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T22:19:42.653

在挠了几个小时并浏览了许多帖子之后。我发现我需要做的就是实现 NdefCallbacks 并在“createNdefMessage”方法中设置 uri。

首先实现 NdefCallbacks

```
public class MyActivity implements CreateNdefMessageCallback, OnNdefPushCompleteCallback { 
```

添加未实现的方法

```
@Override
public NdefMessage createNdefMessage(NfcEvent event) {  
    ...
}
...
@Override
public void onNdefPushComplete(NfcEvent arg0) {
    ...
} 
```

在您的活动顶部创建一个 NFC 适配器

```
NfcAdapter mNfcAdapter; 
```

然后在 onCreate 方法中设置 NFC Adapter

```
mNfcAdapter = NfcAdapter.getDefaultAdapter(this);
if(mNfcAdapter != null) {
    // Register callback to set NDEF message
    mNfcAdapter.setNdefPushMessageCallback(this, this);

    // Register callback to listen for message-sent success
    mNfcAdapter.setOnNdefPushCompleteCallback(this, this);
} else {
    Log.i("LinkDetails", "NFC is not available on this device");
} 
```

然后将以下内容放入您的 createNdefMessage 方法中：

```
return new NdefMessage(new NdefRecord[] {
    NdefRecord.createUri(YOUR_URL_HERE)
}); 
```

点击离开，Android 将处理其余的事情。

感谢[TAPPED](http://www.tappednfc.com/android-nfc-developer-guide/)的优秀人员的指导，这让我在成功实施 NFC 的道路上走了大约 3/4 的路。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-14T21:58:37.440

哎呀，是的。

将包含网站 URL 的 NDEF 格式记录放在标签上，就完成了。

Android SDK*充满*了示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:55:27.333

代码块来自 Android 参考：

这是您想要做的，但您无法更改默认 Android 浏览器的意图过滤器。

> 从 NFC 标签读取 NDEF 数据由标签调度系统处理，该系统分析发现的 NFC 标签，对数据进行适当分类，并启动对分类数据感兴趣的应用程序。想要处理扫描的 NFC 标签的应用程序可以声明一个意图过滤器并请求处理数据。

如果应用程序正在支持梁功能，则支持这些功能：

> Android Beam™ 功能允许设备通过物理轻敲设备将 NDEF 消息推送到另一台设备上。与蓝牙等其他无线技术相比，这种交互提供了一种更简单的数据发送方式，因为使用 NFC，不需要手动设备发现或配对。当两个设备进入范围时，连接会自动开始。Android Beam 可通过一组 NFC API 使用，因此任何应用程序都可以在设备之间传输信息。例如，联系人、浏览器和 YouTube 应用程序使用 Android Beam 与其他设备共享联系人、网页和视频。

你看出两者的区别了吗？

希望这可以帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-07T09:44:42.603

使用这些代码，激活 android NFC Beam。

最重要的是“http://”前缀。我相信大多数追踪到这个问题的用户都停留在这个 .

```
@Override
public NdefMessage createNdefMessage(NfcEvent event) {
    NdefMessage msg = new NdefMessage(new NdefRecord[] { 
        NdefRecord.createUri("http://www.google.com")
    });
    return msg;
} 
```

# php - 如何停止钥匙中的空白？

> ID：14326936
> 
> 赞同：0
> 
> 时间：2013-01-14T21:24:15.010
> 
> 标签：php, html

[http://phpfiddle.org/main/code/get-rps](http://phpfiddle.org/main/code/get-rps)

现在上面的小提琴中没有显示它能够插入所有数据。但在应用程序中，它并没有在表格中显示所有不正确的答案。

这个错误是由于数组`$ques_ans`使用 for() 进行迭代的事实在键中存在间隙。

`var_dump($ques_ans)`给我们：

```
array(3) {
  ... skipped for brevity
  [2]=>
  array(2) {
    [0]=>
    string(1) "B"
    [2]=>
    string(1) "D"
  }
  ... skipped for brevity
} 
```

没有带有 key 的元素`[1]`。这是因为[`array_intersect`](http://php.net/manual/en/function.array-intersect.php)我在第 49 行使用的函数保留了键。

为了快速修复代码以使其正常工作，我`array_values()`在第 51 行添加：

```
$ques_ans[$questionNo] = array_values($q_incorrect_ans);    //store the array of incorrect ans against the ques no as key 
```

但它仍然缺少键，因此不会显示所有不正确的答案。我在这里做错什么了吗？

最大的问题是，如果一个问题有多个正确答案，那么在不正确答案的数组中，它会为这些问题显示多组答案，并且每次只为每组答案删除一个正确答案。您将在数组中看到此错误答案。

下面是一个屏幕截图，显示了一个丢失的错误答案和一个丢失的密钥，但我该如何解决这个问题？

![在此处输入图像描述](../Images/f36c95cad377d0173d3d4f0520a5d8f9.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T13:46:38.853

使用数组值。

```
foreach($ques_ans as $questionNo => $inc_ans)
{
    $inc_ans = array_values($inc_ans);
} 
```

# knockout.js - Knockoutjs 数组过滤器

> ID：14326947
> 
> 赞同：4
> 
> 时间：2013-01-14T21:24:55.567
> 
> 标签：knockout.js

有人可以帮我吗？

如何让多选列表拥有独特的国家/地区？另外，如何根据多选中选择的项目过滤记录？

这是 JsFiddle [http://jsfiddle.net/B2xcv/中的代码](http://jsfiddle.net/B2xcv/)

请帮忙。

谢谢。

**HTML**

```
 <div class='liveExample'> 
   <p style="color:red">How do I make this list unique?</p>
    <p>
    <select data-bind="options: people,optionsText: 'country', selectedOptions: selectedCountries" size="5" multiple="true" style="width:150px"></select>
  </p>
  <p style="color:red">And how do I filter the records below based on the selected items above? (multiple select)</p>
   <table style="width:300px">
     <thead>
       <th>Name</th>
       <th>Location</th>
     </thead>
    <tbody data-bind="foreach: people">
        <tr>
          <td>
                <span data-bind="text: name"> </span> 
          </td>
            <td>
                <span data-bind="text: country"> </span> 
          </td>
        </tr>
    </tbody>
  </table>

</div> 
```

**淘汰赛JS**

```
// Define a "Person" class that tracks its own name and children, and has a method to add a new child
var Person = function(name, country) {
    this.name = name;
    this.country = country;
}

// The view model is an abstract description of the state of the UI, but without any knowledge of the UI technology (HTML)
var viewModel = {
    people: [
        new Person("Annabelle", "UK"),
        new Person("Bertie", "UK"),
       new Person("Bertie", "USA"),
        new Person("Ali", "Bangladesh"),
        new Person("Patel", "India"),
      new Person("Sweatha", "India"),
       new Person("Minto", "India"),
        ],
  selectedCountries: ko.observableArray()
};

ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T21:46:40.967

好的 - 完成这项工作的最简单方法是创建变量来表示独特的国家和人员数组的过滤版本。

如果`people`是 observableArray，那么您可能希望该`uniqueCountries`变量是计算的。如果它是不可观察的，那么你可以直接计算它。

这是一个示例：

```
viewModel.uniqueCountries = ko.computed(function() {
      var people = viewModel.people(),
          index = {},
          uniqueCountries= [],
          length = people.length,
          i, country;

      for (i = 0; i < length; i++) {
          country = people[i].country;      
          if (!index[country]) {
               index[country] = true;
               uniqueCountries.push(country);
          }
      } 

      return uniqueCountries;
}); 
```

主要想法是通过所有人循环并建立一系列独特的国家。为此，我只使用了一个“索引”对象，这样我就可以轻松地检查我们是否已经包含了这个国家（而不是在我们正在构建的列表上循环）。然后，您可以将唯一国家/地区作为数组返回并在您的选择中绑定它。

接下来，您需要创建一个计算的 observable 来表示`people`. 这是一个示例：

```
viewModel.filteredPeople = ko.computed(function() {
  var selected = viewModel.selectedCountries() || [],
      index = {};

  //build an index, so we can avoid looping each time
  ko.utils.arrayForEach(selected, function(country) {
      index[country] = true;
  });

  return ko.utils.arrayFilter(viewModel.people(), function(person) {
      return index[person.country];
  });
}); 
```

我再次建立了一个索引，因为您可以选择多个国家。这样可以轻松检查此人的国家/地区是否是所选国家/地区之一。 `ko.utils.arrayFilter`将让我们对数组中的每个项目运行一个函数，并返回一个新数组，其中包含函数返回“真实”值的任何项目。我再次假设这`people`是一个 observableArray，您可能会从中添加/删除项目。

这是更新的示例：http: [//jsfiddle.net/rniemeyer/xsfRR/](http://jsfiddle.net/rniemeyer/xsfRR/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-14T01:36:40.757

我知道这可能有点晚了，但对于任何有兴趣的人，我都是使用 ko 内置函数这样做的：

```
 var viewModel = {
    people: [
        new Person("Annabelle", "UK"),
        new Person("Bertie", "UK"),
       new Person("Bertie", "USA"),
        new Person("Ali", "Bangladesh"),
        new Person("Patel", "India"),
      new Person("Sweatha", "India"),
       new Person("Minto", "India"),
        ],
      selectedCountries: ko.observableArray(),
      uniqueCountries: function(){
            var countries =ko.utils.arrayMap(viewModel.people,function(person){
                return person.country;
            });
            return ko.utils.arrayGetDistinctValues(countries);
        },
        filteredRecords: function(){
            return ko.utils.arrayFilter(viewModel.people,function(person){
               return person.country == viewModel.selectedCountries(); 
            });
        }
};

ko.applyBindings(viewModel); 
```

和html

```
 <div class='liveExample'> 
   <p style="color:red">How do I make this list unique?</p>
    <p>
    <select data-bind="options: uniqueCountries(), selectedOptions: selectedCountries" size="5" multiple="true" style="width:150px"></select>
  </p>
  <p style="color:red">And how do I filter the records below based on the selected items above? (multiple select)</p>
   <table style="width:300px">
     <thead>
       <th>Name</th>
       <th>Location</th>
     </thead>
    <tbody data-bind="foreach: filteredRecords()">
        <tr>
          <td>
                <span data-bind="text: name"> </span> 
          </td>
            <td>
                <span data-bind="text: country"> </span> 
          </td>
        </tr>
    </tbody>
  </table>

</div> 
```

在这里在 jsfiddle [http://jsfiddle.net/geomorillo/n5JFL/1/](http://jsfiddle.net/geomorillo/n5JFL/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-04T06:27:31.247

```
 self.filterGrid = ko.computed(function () {
            var text = filter().toLowerCase();
            if (!text ) {
                return self.filterArrayCollection();
            }
            else {
                if (self.filterArrayCollection() != 'undefined' && self.filterArrayCollection() != null && self.filterArrayCollection().length > 0) {
                    return ko.utils.arrayFilter(self.filterArrayCollection(),
                            function (item) {
                                return (item.name.toLowerCase().indexOf(text) > -1 || item.address.toLowerCase().indexOf(text) > -1);
                            });
                };
            };
        }); 
```

# mysql - Mysql 选择每次出现的 (n) 行

> ID：14326949
> 
> 赞同：0
> 
> 时间：2013-01-14T21:25:02.200
> 
> 标签：mysql, select

> **可能重复：**
> [mysql：在 GROUP BY 中使用 LIMIT 来获得每组 N 个结果？](https://stackoverflow.com/questions/2129693/mysql-using-limit-within-group-by-to-get-n-results-per-group)

我需要执行一个选择，该选择将返回每个唯一 us_state 的 (n) 条记录。

基本上，我想找到一个等价于 TOP(n)，但由于 MySQL 不支持它，是否有类似的命令或方法可以用来快捷地使用正确的专用代码来执行相同的操作？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T22:17:42.813

您要做的是为每组选择一些记录。这可以通过在查询中使用类似于以下的变量来完成：

```
select *
from
(
    SELECT sid, 
        state, 
        votes,
        @prev := @curr,
        @curr := state,
        @rank := IF(@prev = @curr, @rank+1, 1) AS rank
    FROM
    (
      select t1.sid, state, votes
      FROM table1 t1
      INNER JOIN table2 t2
          ON t1.sid=t2.sid
    ) src, (SELECT @curr := null, @prev := null, @rank := 1) r
    ORDER BY state, votes desc
) src
where rank <= 2
order by state, votes; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/c86c1/1)

还有其他方法可以做到这一点，这里概述了：

[在 GROUP BY 中使用 LIMIT 来获得每组 N 个结果？](https://stackoverflow.com/questions/2129693/mysql-using-limit-within-group-by-to-get-n-results-per-group)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T21:30:22.147

MySQL 中的[限制优化就是这样做的。](http://dev.mysql.com/doc/refman/5.0/en/limit-optimization.html)

* * *

# 编辑

由于您希望它们按某种类型的列或其他东西排序，因此您还需要[ORDER BY](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)子句。

# php - 自引用，继承类，如何用 Doctrine2 覆盖 JOIN 上的公共列值？

> ID：14326950
> 
> 赞同：2
> 
> 时间：2013-01-14T21:25:04.070
> 
> 标签：php, inheritance, orm, doctrine-orm, associations

好的，所以我在这里有点笨拙。

我正在使用 Symfony2，但更具体地说是 ORM，Doctrine2。我将以下课程写成`ParameterType`：

```
<?php
namespace MSS\CMDBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 *  @ORM\Entity
 *  @ORM\Table(name="ParameterType")
 *  @ORM\InheritanceType("JOINED")
 *  @ORM\DiscriminatorColumn(name="discr", type="string")
 *  @ORM\DiscriminatorMap(
 *      {
 *          "integer" = "IntegerParameterType",
 *          "enumerated" = "EnumeratedParameterType"
 *      })
 */
class ParameterType {
    /**
     * @ORM\Id
     * @ORM\Column(type="integer")
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $id;

    /**
     * @ORM\Column(type="string", length=255)
     */
    protected $name;

    /**
     * @ORM\Column(type="integer")
     */
    protected $system;

}

?> 
```

...我有一个`IntegerParameterType`扩展 ParameterType 的类，定义如下：

```
<?php
namespace MSS\CMDBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 *  @ORM\Entity
 *  @ORM\Table(name="IntegerParameterType")
 */
class IntegerParameterType extends ParameterType {
    /**
     * @ORM\Column(type="integer")
     */
    protected $sizeInBits;

    /**
     * @ORM\Column(type="boolean")
     */
    protected $signed;

    /**
     * @ORM\Column(type="string")
     */
    protected $units;

}

?> 
```

...现在每隔一段时间我就会得到一个`IntegerParameterType`只有名称和基本类型的新产品。基本类型是引用另一个名称的字符串`IntegerParameterType`（例如“uchar”或“ushort”）。

我想要做的是将另一个字段输入`IntegerParameterType`标记为“baseType”并将字符串存储在我的数据库（MySQL）中。但是，当我想在我的代码中使用此对象时，我希望该基`IntegerParameterType`( `IPT`) 的属性随之而来（基本上覆盖最初存储在`IPT`仅带有名称和基类型的默认值）。

到目前为止，我尝试的是尝试在内部创建一个自引用属性，`IntegerParameterType`如下所示：

```
/**
 * @ORM\ManyToOne(targetEntity="IntegerParameterType")
 * @ORM\JoinColumn(name="baseType", referencedColumnName="name")
 */
protected $baseType; 
```

但是，这不起作用并且错误`General error: 1005 Can't create table... (errno: 150)`

我怎样才能让这个类引用另一个`IntegerParameterType`，并在 JOIN 用另一个对象的值覆盖（如果可能的话）自身的值时？

提前致谢！

# c - 指向 C 中的自我结构的指针

> ID：14326954
> 
> 赞同：1
> 
> 时间：2013-01-14T21:25:19.590
> 
> 标签：c, struct, typedef

给定以下代码：

```
typedef struct elementT {
  int data;
  struct elementT *next;
} element; 
```

为什么有必要做`struct elementT *next`而我不能`element *next`在结构声明本身内部做？是因为还没有申报吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-14T21:26:48.283

`typedef`唯一发生在定义之后`struct`。考虑以下代码；语法无效，但它希望它显示事物的顺序/优先级：

```
typedef (struct {
  int field1, field2;
}) item; 
```

即，`struct{...}`是表示类型的“表达式”。通过`typedef`给它一个名字来操作那个类型。

相比之下，

```
struct foo {
    foo *next;
}; 
```

之所以起作用，是因为 C 的两个特殊规则：`struct <name>`不仅定义了一个类型，而且还给它一个`struct`标签，并且该标签在`struct`声明的其余部分中立即可见（出于显而易见的原因：链表、树等将是如果没有这些规则，实施起来非常痛苦）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-14T21:26:41.933

因为C是这么说的：

> （C99，6.2.1p7）“[...] 任何其他标识符的范围都在其声明符完成后开始。”

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-14T21:30:42.383

name`elementT`是类型 name 的一部分，`struct elementT`一旦编译器看到这两个标记，就会变得可见（作为不完整的类型）`struct elementT`，因此您可以将其用作结构定义中的类型名称。

name是一个 typedef 名称，在标识符出现`element`之前不可见，标识符出现在结构定义的结尾（结束）*之后；*因此你不能在结构定义中使用它，只是因为它还不存在。`element`*`}`*

 *我个人的偏好（很多非常聪明的人在这一点上与我不同）根本不使用`typedef`。该类型已经有一个很好的名字，`struct ElementT`; 为什么要添加第二个？我只想写：

```
struct element {
    int data;
    struct element *next;
}; 
```

并将类型称为`struct element`。

如果您觉得为类型使用一个单词名称就足够有用了，当然，您仍然可以使用 typedef。请记住，typedef 名称直到声明结束后才可见。并且不需要使用两个不同的标识符：

```
typedef struct element {
    int data;
    struct element *next;
} element; 
```

现在您可以将类型称为 as`struct element`或 as `element`。

（请注意，C++ 有不同的规则；它有效地为`struct`(or `union`, `class`, or `enum`) 类型创建了一个隐式 typedef。在 C++ 中，这`typedef`是不必要的但无害的。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-14T21:29:06.367

如果将结构声明与其定义分开，则可以实现此行为：

```
struct ElementT;                   // not strictly needed

typedef struct ElementT element;   // this declares "struct ElementT" as well

struct ElementT
{
    element * next;
}; 
```*

# javascript - _POST 并从 JavaScript 调用 PHP 脚本

> ID：14326958
> 
> 赞同：0
> 
> 时间：2013-01-14T21:25:38.627
> 
> 标签：javascript, html

我有一个简单的表格。下拉菜单、文本字段和提交按钮。

当按下提交按钮时，它会发布在下拉列表中选择的项目以及在文本字段中输入的文本。

我想使用 JavaScript/jQuery 添加确认弹出窗口。当他们按下“提交”时，会出现一个弹出窗口，上面写着“你确定要提交这个吗？”

如果用户说“OK”，它会继续执行 POST 操作，并调用 PHP 操作脚本。

这可能吗，如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:27:40.917

```
if(!confirm("Are you sure you want to submit this?"))
{
    return false;//do not submit
}
//go ahead and submit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T22:35:52.413

开发@justin 答案

```
// in domReady 
$('#formID').submit(confirmSubmit);

function confirmSubmit(e){
 if(!confirm("Are you sure you want to submit this?")){
    return false;//do not submit
 }
 //go ahead and submit
} 
```

看看[jQuery 提交事件文档](http://api.jquery.com/submit/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-14T21:27:57.363

是的。您可以定义一个 onSubmit 处理程序，如果它返回 false，则中止提交。

[http://www.javascripter.net/faq/confirm.htm](http://www.javascripter.net/faq/confirm.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T21:28:29.173

在[Tizag](http://www.tizag.com/javascriptT/javascriptconfirm.php)有一个很好的例子。这可以适用于任何确认。如果您愿意，这也可以使用 jQuery 完成，但使用本机 javascript 函数同样容易。

# sharepoint - 更新文档库中的文件

> ID：14326961
> 
> 赞同：0
> 
> 时间：2013-01-14T21:25:48.000
> 
> 标签：sharepoint, document, event-receiver

我正在开发一个需求事件接收器，使用第三方 DLL 将页面内容生成到**Microsoft Word**和**PDF中。**生成完成后，我需要将其上传到文档库。

`ItemUpdated`当 doc 或 pdf 文件不在库中但是当它们被创建并且我必须更新它们时，它会发生这种情况并且代码工作正常，它会引发错误。

```
 ex = {"The file \"http://www-mylab.com/en/home/Documents/James-bond_1033.pdf\" is not checked out.  You must first check out this document before making changes."}

   web.Files.Add(wordFileUrl, wordStream, true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:20:53.897

看起来您正在使用 SharePoint 的服务器对象模型。

```
SPFile f = web.GetFile(wordFileUrl); 
f.CheckOut(); 

web.Files.Add(wordFileUrl, wordStream, true);

f.Checkin("new version"); 
```

应该做的伎俩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T01:39:30.287

Easiest to turn of the "Require Checkout" setting on your [document library versioning settings](http://office.microsoft.com/en-001/sharepoint-server-help/enable-and-configure-versioning-for-a-library-HA101853103.aspx).

Otherwise you will have to call the [CheckInFile](http://msdn.microsoft.com/en-us/library/lists.lists.checkinfile%28v=office.12%29.aspx) and [CheckOutFile](http://msdn.microsoft.com/en-us/library/lists.lists.checkoutfile%28v=office.12%29.aspx) members of the SharePoint [Lists webservice](http://msdn.microsoft.com/en-us/library/ms774654%28v=office.12%29.aspx).

# android - AsyncTask 中的 Android ArrayAdapter 错误

> ID：14326962
> 
> 赞同：0
> 
> 时间：2013-01-14T21:25:47.940
> 
> 标签：android

我现在无法将适配器分配给titlesList...我收到错误“方法setAdapter（ArrayAdapter）未定义ArrayList类型”我做错了什么？

问题出在 ShowTitlesTask 类中

```
package com.aer.illbehonest;

import java.io.IOException;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;
import java.util.ArrayList;
import java.util.concurrent.ExecutionException;

import net.sf.json.JSONArray;
import net.sf.json.JSONObject;
import net.sf.json.JSONSerializer;

import org.apache.commons.io.IOUtils;

import android.app.Activity;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class VideoPlay extends Activity {   
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_video_play);

        new ShowTitlesTask().execute("");
    }

    class ShowTitlesTask extends AsyncTask<String, Void, ArrayList<String>> {

    ArrayList<String> titlesList;

    @Override
    protected ArrayList<String> doInBackground(String... args) {

    URL jsonURL = null;
    try {
           jsonURL = new URL("http://gdata.youtube.com/feeds/api/users/illbehonest/uploads?v=2&alt=jsonc");
        } catch (MalformedURLException e3) {
            e3.printStackTrace();
        }
            URLConnection jc = null;
            try {
                jc = jsonURL.openConnection();
            } catch (IOException e2) {
                e2.printStackTrace();
            }
            InputStream is = null;
            try {
                is = jc.getInputStream();
            } catch (IOException e1) {
                e1.printStackTrace();
            }
            String jsonTxt = null;
            try {
                jsonTxt = IOUtils.toString(is);
            } catch (IOException e) {
                e.printStackTrace();
            }

            JSONObject json = (JSONObject) JSONSerializer.toJSON(jsonTxt);

            JSONObject jdata = json.getJSONObject("data");

            JSONArray jentry = jdata.getJSONArray("items");
            for (int entryNumber = 0; entryNumber<=25; entryNumber++){
                    JSONObject entry = jentry.getJSONObject(entryNumber);
                    titlesList.add(entry.getString("title"));
            }

            return titlesList;
    }
    protected void onPostExecute(ArrayList<String> result) {
        ListView listView = (ListView)VideoPlay.this.findViewById(R.id.videolist);

        ArrayAdapter<String> adapter = new ArrayAdapter<String> (VideoPlay.this,
                android.R.layout.simple_list_item_1, android.R.id.text1, titlesList);
        titlesList.setAdapter(arrayAdapter);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T21:27:17.517

`this`指向您的 AsyncTask 而不是 Activity （上下文）。尝试`VideoPlay.this`

# matlab - 对 csv 文件中的列进行文本扫描，其中包含用于标记数据的列，分隔符问题

> ID：14326963
> 
> 赞同：3
> 
> 时间：2013-01-14T21:25:47.877
> 
> 标签：matlab, delimiter, textscan

我正在阅读许多 csv 文件并提取第 1、6、8 和 20 列。分隔符是 '","' 因为 csv 使用双引号。除非标记了某些数据，否则这非常有效，在这种情况下，一切都会变得异常。数据示例：

```
 Date            Year    Month   Day    Flag     Min T    Flag   Max T

 30/11/2007     2007    11       30     [Blank]  -14.9   [Blank]  -20.3

 01/12/2007     2007    12       1         *     -16     [Blank]  -20.1 
```

脚本读取完美到 * 然后一切都被转移，所以我得到的只是 NaN。

```
fid1 = fopen(File, 'r');
Date = textscan(fid1, '%q %*s %*[^\n]', 'Delimiter', ',', 'HeaderLines', 25);
fclose(fid1);
Date = datenum(Date{1, 1}, 'yyyy-mm-dd');
fid1 = fopen(File, 'r');

Data = textscan(fid1, '%*s %*s %*s %*s %f %f %*s %*s %*s %*s %*s %f %*[^\n]', 
'Delimiter', '","', 'HeaderLines', 25,'treatAsEmpty', {'M', '*', 'E', 'T', 'A', 'C', 
'L', 'N', 'Y', 'S', 'F'}, 'multipledelimsasone', true);
fclose(fid1); 
```

所以我想我的问题是：

我可以使用循环预格式化每个文件以删除标志或更改文本扫描以忽略所有标志，以便我的分隔符起作用。

感谢您的输入！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:23:08.220

“标志”是星号吗？您可以使用终端命令，例如

`Date = textscan(system(['sed "s/\*/ /g" ' File ]));`

删除星号并扫描结果。

# asp.net - RadMenu 在客户端上按值递归查找项目

> ID：14326968
> 
> 赞同：0
> 
> 时间：2013-01-14T21:26:10.653
> 
> 标签：asp.net, telerik, asp.net-ajax

使用 Telerik 的 ASP.NET AJAX 控件，在菜单上调用了一个方法`findItemByValue`，可以通过它的值找到一个项目。

但它显然只在根级别项目内查看。

客户端 API 中是否有一种方法可以按值查找项目，但无需我手动循环每个项目即可递归？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:52:46.810

不，没有`findItemByValue`递归搜索的方法，因为它是如何`RadMenu`设计的。

但是，您可以使用该`get_allItems()`方法，而不是“手动循环遍历每个项目”。

```
function recursiveFindItemByValue(searchedValue)
{  
    var menu = $find("<%=RadMenu1.ClientID %>");  
    var menuItems = menu.get_allItems();

    for (var i=0; i< menuItems.length; i++)  
    {    
        if(menuItems[i].get_value()==searchedValue)
            return menuItems[i];
    }
} 
```

如果您真的不想使用循环，您可以搜索一种方法来使用`get_contextMenuElement()`来获取 的 DOM 元素`RadMenu`，然后`getElementById`在您知道元素的外观的情况下使用。（但我宁愿使用第一个解决方案..

# jquery - 分离 jQuery 函数？

> ID：14326974
> 
> 赞同：0
> 
> 时间：2013-01-14T21:26:24.913
> 
> 标签：jquery, ruby-on-rails, ruby

所以我只是想拥有 3 个链接，当您单击一个链接时，它会呈现相应的表单。我以为我熟悉 jQuery，但显然没有发生奇怪的事情。我的代码如下

jQuery

```
$("#show_basic_selector").click(function() {
    hide().after('<%= j render("basic") %>');
});

$("#show_team_selector").click(function() {
    alert("Hello");
});

$("#show_custom_selector").click(function() {
    alert("Hello");
}); 
```

看法

```
<%= link_to "Show form 1", { :action => 'new_order' }, id: "show_basic_selector", remote: true %>

<%= link_to "Show form 2", { :action => 'new_order' }, id: "show_team_selector", remote: true %>

<%= link_to "Show form 3", { :action => 'new_order' }, id: "show_custom_selector", remote: true %> 
```

我的问题是当我使用警报功能测试它是否有效时，当我点击一个链接时，当我点击它时它会开始显示随机数量的警报（2-15），当我设置render 函数，它隐藏所有三个并显示所有三个表单。知道发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T22:40:29.917

您可能正在附加多个事件处理程序，我认为您的意思是在您的第一个函数中定位 $(this) 。尝试取消附加其他事件处理程序以确保您只获得一个。这并不理想，因为您的应用程序中可能存在设计缺陷或错误，但试试这个：

```
$("#show_basic_selector").off().on('click' , function() {
    $(this).hide().after('<%= j render("basic") %>');
});

$("#show_team_selector").off().on('click', function() {
    alert("Hello");
});

$("#show_custom_selector").off().on('click', function() {
    alert("Hello");
}); 
```

# asp.net - AjaxControlToolKit HTMLEditorExtender - web.config 显示警告但它“有效” - 可以吗？

> ID：14326991
> 
> 赞同：1
> 
> 时间：2013-01-14T21:26:58.937
> 
> 标签：asp.net, web-config, ajaxcontroltoolkit, htmleditorextender

我想使用 HTMLEditorExtender 并根据工具包的问题遵循以下链接并且无法正常工作：

[http://stephenwalther.com/archive/2012/06/25/announcing-the-june-2012-release-of-the-ajax-control-toolkit.aspx](http://stephenwalther.com/archive/2012/06/25/announcing-the-june-2012-release-of-the-ajax-control-toolkit.aspx)

所以我所做的是安装 HTMLAgility 包并在项目中设置引用。然后我按照上面链接中的说明修改了 web.config。尽管我已按照说明进行操作，但它会在“消毒剂”上显示警告。

![在此处输入图像描述](../Images/0b90a2e42f59a8b269e290ecbfeebb80.png)

当我运行 Web 应用程序时，控件似乎工作。

我想知道我是否应该担心并尝试解决警告，或者我是否应该放手，因为它确实有效。或者，如果有人看到我做错了什么，如果你让我知道，我将不胜感激。

谢谢！

# ios - UITableView 中的 UILabel 被覆盖

> ID：14326992
> 
> 赞同：3
> 
> 时间：2013-01-14T21:27:03.927
> 
> 标签：ios, objective-c, uitableview, uilabel

您好我正在使用以下代码在 UITableView 中插入 ulabel

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier;

CellIdentifier  = [NSString stringWithFormat:@"myTableViewCell %i,%i",
                                [indexPath indexAtPosition:0], [indexPath indexAtPosition:1]];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;

    if (cell == nil)
    {
         cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        lblNombre= [[UILabel alloc] initWithFrame:CGRectMake(110, 10, 170,40)];
        lblNombre.textColor = [UIColor colorWithRed:90/255.0f green:132/255.0f blue:172/255.0f alpha:1];
        lblNombre.backgroundColor = [UIColor clearColor];
        lblNombre.text=@"Nicolas ahumada";
        lblNombre.numberOfLines=2;
        lblNombre.font = [UIFont fontWithName:@"Magra" size:18.0 ];
         [cell.contentView addSubview:lblNombre ];
}

lblNombre.text=[[jsonpodio valueForKey:@"name"]objectAtIndex:indexPath.row ];
[cell.contentView addSubview:lblNombre ];

return cell;
} 
```

但是当我滚动或为表格充电时，UILabel 被覆盖

![uilabel被覆盖](../Images/3e47a35de9e7c7fd352eb43eda94f689.png)

上面的图片被覆盖，下面的图片平均，非常感谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T21:45:20.177

试试这个，你的单元重用逻辑以及你如何使用 lblNombre 有问题

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier;

    // use a single Cell Identifier for re-use!
    CellIdentifier  = @"myCell";

    // make lblNombre a local variable!
    UILabel *lblNombre;

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        // No re-usable cell, create one here...
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        // get rid of class instance lblNombre, just use local variable!
        lblNombre= [[UILabel alloc] initWithFrame:CGRectMake(110, 10, 170,40)];

        lblNombre.tag = 1001;    // set a tag for this View so you can get at it later

        lblNombre.textColor = [UIColor colorWithRed:90/255.0f green:132/255.0f blue:172/255.0f alpha:1];
        lblNombre.backgroundColor = [UIColor clearColor];
        lblNombre.numberOfLines=2;
        lblNombre.font = [UIFont fontWithName:@"Magra" size:18.0 ];
        [cell.contentView addSubview:lblNombre ];
}
else
{
        // use viewWithTag to find lblNombre in the re-usable cell.contentView
        lblNombre = (UILabel *)[cell.contentView viewWithTag:1001];
}

// finally, always set the label text from your data model
lbl.text=[[jsonpodio valueForKey:@"name"]objectAtIndex:indexPath.row ];

return cell;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-12T10:52:11.853

对于**小而甜的答案：**

**添加子视图之前：**

**只需编写以下代码：**

```
for(UIView *v in [cell.contentView subviews])
{
   [v removefromsuperview];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T21:48:11.727

你可以试试下面的代码

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *CellIdentifier;

// Was not sure why you had a reuse identifier which was different for each cell. You created a reuse identifier based on the index. Looks like your cells are all the same looking. So just use a constant string to identify the cell to be used.

CellIdentifier  = [NSString stringWithFormat:@"myTableViewCell"];
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
cell.selectionStyle = UITableViewCellSelectionStyleNone;

// Find a subview with a tag of 100 and remove it. See below as to why

[cell viewWithTag:100] removeFromSuperview];

if (cell == nil)
{
     cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

// I removed code from here and put it down, assuming that you have a data model which is feeding the data into the label

}

    lblNombre= [[UILabel alloc] initWithFrame:CGRectMake(110, 10, 170,40)];
    lblNombre.textColor = [UIColor colorWithRed:90/255.0f green:132/255.0f blue:172/255.0f alpha:1];
    lblNombre.backgroundColor = [UIColor clearColor];
    lblNombre.numberOfLines=2;
    lblNombre.font = [UIFont fontWithName:@"Magra" size:18.0 ];
     [cell.contentView addSubview:lblNombre ];
    lblNombre.text=[[jsonpodio valueForKey:@"name"]objectAtIndex:indexPath.row ];
    [cell.contentView addSubview:lblNombre ];

// Use  tag or some thing to identify this subview, since you cannot keep on adding subviews. You need to remove it next time you come because you are reusing the cells and you will get back a cell which you created before and that will have the label you added last time
    [lblNombre setTag:100];

    return cell;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T21:39:16.600

更改此行：

```
 lblNombre= [[UILabel alloc] initWithFrame:CGRectMake(110, 10, 170,40)]; 
```

对此：

```
 UILabel *lblNombre = [[UILabel alloc] initWithFrame:CGRectMake(110, 10, 170,40)]; 
```

然后`lblNombre`从您的实例变量列表中删除（可能在您的头文件中）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-09T10:35:19.893

这里有一段代码

```
NSString *CellIdentifier = [NSString stringWithFormat:@"%ld,%ld",(long)indexPath.section,(long)indexPath.row];
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil)
{
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier ];
    cell.selectionStyle = UITableViewCellSelectionStyleNone;
} 
```

# arrays - AngularJS 承诺不会更新范围设置为数组中的单个项目

> ID：14326995
> 
> 赞同：1
> 
> 时间：2013-01-14T21:27:16.643
> 
> 标签：arrays, angularjs, promise

我有两个控制器：

```
function AppCtrl($scope, $dataService) {
    $scope.projects = $dataService.data.projects;
}

function ProjectCtrl($scope, $route, $q) {
    //Getting the current project from the array of projects
    $scope.project = $scope.projects.then(function(projects) {
        for(i in projects) {
            if(projects[i]._id == $route.current.params.projectId) {
                return projects[i];
            }
        }
    });
} 
```

还有我做的一项服务：

```
app.service('$dataService', function($q, $http, $location) {
    var dataService = this; //Provides access 'this' inside functions below

    var projectsDeferred = $q.defer();
    $http.get('/api').success(function(data, status, headers, config) {
        projectsDeferred.resolve(data.projects);
    }).error(function(err) {
        projectsDeferred.reject(err);
    });

    this.data = {projects: projectsDeferred.promise};

    this.updateProject = function(project, updateData) {
        $http.put('/api/projects/' + project._id, updateData).success(function(newData, status, headers, config) {
            for(i in dataService.data.projects.$$v) {
                if(project == dataService.data.projects.$$v[i]) {
                    dataService.data.projects.$$v[i] = newData;
                }
            }
        }).error(function(data, status, headers, config) {});
    };
}); 
```

当用户执行某个动作时，我会调用`$dataService.updateProject()`which 将数据发送到服务器，如果成功，服务器将响应更新的数据，然后将数组中的匹配项目设置为新值。我可以确认`$scope.projects`in`AppCtrl`接收到更新，并且当新数据从服务器返回时，范围会自动更新。但是，`$scope.project`永远`ProjectCtrl`不会获得更新，并且会被旧数据卡住。我猜这是因为它只是数组中的一个对象？我`$rootScope.$apply()`在函数中设置数据后尝试调用`updateProject()`，但它给了我 $digest 已经在进行中的错误。我需要做什么来确保`$scope.project`（单项）更新了吗？我需要为此做出新的承诺吗？有人可以举例说明它是如何完成的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T00:42:11.540

问题基本上就是您所说的，它`$scope.project`是对`$scope.projects`数组内对象的引用，因此它将保持其引用直到控制器被销毁。

尝试观察变化`$scope.projects`并（重新）分配它`$scope.project`何时发生：

```
function ProjectCtrl($scope, $route, $q) {        
    $scope.$watch('projects', function(projects) {
       for (i in projects) {
            if(projects[i]._id == $route.current.params.projectId) {
                $scope.project = projects[i];
            }
        }
    }, true);
} 
```

# jquery - 带有jquery的特定路径的进度条？

> ID：14326998
> 
> 赞同：-1
> 
> 时间：2013-01-14T21:27:23.557
> 
> 标签：jquery, jquery-ui, progress-bar

有没有办法做到这一点？我真正想做的是根据jquery UI滑块的值逐渐改变线条的颜色，但遵循特定的路径，所以我可以实现这样的效果：

![在此处输入图像描述](../Images/28fdd29c24fcd50c608bb40a0b0d55f1.png)

我想不出一个好的方法来实现这一点，有什么建议吗？任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T21:34:24.413

我以前只使用过一次 jquery ui 进度条，但基于我第一次尝试实现它时看到的示例和事情，我不这么认为。我见过的最好的事情是让酒吧变得可实现。