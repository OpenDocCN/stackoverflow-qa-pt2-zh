# StackOverflow 问答 12874000-12874999

# java - 花括号 - {} 在“switch”中的帧代码“case”

> ID：12874004
> 
> 赞同：2
> 
> 时间：2012-10-13T14:23:32.237
> 
> 标签：java, switch-statement, case

我从未见过“switch”中的代码“case”是由花括号 - {} 框起来的。我可以使用大括号来隐藏变量以防万一吗？或者这是一个不好的做法？可能的后果是什么？

我需要使用开关，其中每种情况都由相同类型的变量组成（我认为最好保持相同的名称）但具有不同的值。

```
Dialog dialog;
switch (id) {
    case ID_1: {
        String[] keys = ...; // some array
        String[] values = ...;
        ...
        return dialog;
    }
    ...
        case ID_2: {
        String[] keys = ...; // different values
        ...
        return dialog;
    }
    default:
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:27:30.487

> 我可以使用大括号来隐藏变量以防万一吗？

是的你可以。

> 或者这是一个不好的做法？

这可能表明您可以重构您的代码 - 但如果不看代码在每个`case`.

> 可能的后果是什么？

除了限制这些变量的范围，这是您的目标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:30:13.017

当您在个别情况下需要不同的局部变量时，这确实是非常常见的做法。

但是，如果您需要很多它们，尤其是当它们几乎完全相同时，这可能表明代码被过度复制粘贴。

除非每种情况下的代码除了数据之外都有显着差异，否则作为示例，将键和值保留在数组或 hastable 中可能是有意义的。

```
keys   = dialog_data[id].keys;
values = dialog_data[id].values; 
```

这个问题并没有真正包含足够的信息来知道是否是这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T14:30:51.720

有时，如果代码中有一些常量，您可能会将它们导出到具有 public-static-final 字段的另一个类中，它可能会解决您的问题。我不能说更多，因为我们看不到整个代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T14:51:37.600

您可以将对话数据保存在 HashTable 中。这样，您可以遍历键集并相应地更改数据值。

# javascript - 这个 jQuery 可以在 vanilla JS 中完成吗？

> ID：12874006
> 
> 赞同：1
> 
> 时间：2012-10-13T14:24:00.913
> 
> 标签：javascript, jquery, toggleclass

我已经在移动设备上工作了，但是由于 jQuery 的 32kb gzip-ed 我想知道是否可以创建此代码

```
$(document).ready(function() {
  $('body').addClass('js');

  var $menu = $('#menu'),
        $menulink = $('.menu-link'),
        $wrap = $('#wrap');

    $menulink.click(function() {
        $menulink.toggleClass('active');
        $wrap.toggleClass('active');
        return false;
    });
}); 
```

可以在不依赖任何原生 JavaScript 的库中编写。

可以做到吗？我从哪里开始？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-13T14:51:29.493

JQuery 使用 javascript/DOMscripting 来创建它的框架。JQuery 所做的一切，都可以在基本脚本中完成。例如`$('body').addClass('js')`可以写成：

```
document.querySelector('body').className += ' js'; 
```

`$menulink.toggleClass('active');`就像_

```
var current     = $menulink.className.split(/\s+/)
   ,toggleClass = 'active'
   ,exist       =  ~current.indexOf(toggleClass)
;
current.splice(exist ? current.indexOf(toggleClass) : 0,
               exist ? 1 : 0,
               exist ? null : toggleClass);
$menulink.className = current.join(' ').replace(/^\s+|\s+$/,''); 
```

这就是 JQuery 包装这种代码的原因。

[这个 jsfiddle](http://jsfiddle.net/KooiInc/xg9wu/)包含一个使用没有框架的 javascript 的工作示例。除此之外，它还演示了如何编写自己的元素包装器。

从哪儿开始？我想你必须[深入研究javascript](https://developer.mozilla.org/en-US/docs/javascript)。或者检查这个[SO-question](https://stackoverflow.com/questions/1419731/jquery-framework-internals)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T15:58:30.557

仅适用于现代浏览器。®

```
document.addEventListener('DOMContentLoaded', function() {
    document.body.classList.add('js');

    var wrap = document.getElementById('wrap');
    var menuLinks = Array.prototype.slice.call(document.getElementsByClassName('menu-link'));

    var toggleActive = function(element) {
        element.classList.toggle('active');
    };

    menuLinks.forEach(function(menuLink) {
        menuLink.addEventListener('click', function(e) {
            menuLinks.forEach(toggleActive);
            toggleActive(wrap);
        }, false);
    });
}, false); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T15:06:15.373

```
var toggleClass = function (el, className) {
  if(el) {
    if(el.className.indexOf(className)) {
      el.className = el.className.replace(className, '');
    }

    else {
      el.className += ' ' + className;
    }
 }
};

document.addEventListener('DOMContentLoaded', function () {
  document.body.className += ' js';

  var $menu = document.querySelector('#menu'),
  $menulink = document.querySelectorAll('.menu-link'),
  $wrap = document.querySelector('#wrap');

  $menulink.addEventListener('click', function (e) {

    toggleClass($menulink, 'active');
    toggleClass($wrap, 'active');
    e.preventDefault();
  });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T14:27:25.527

总是有[classList](https://developer.mozilla.org/en-US/docs/DOM/element.classList)（包括不兼容浏览器的解决方法）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T03:53:25.940

绝对地。由于 jQuery 是 JavaScript 的子集（完全用 JavaScript 编写），因此您可以复制任何您喜欢的函数。这是你想付出多少努力的问题。下面是我如何在您的帖子中复制有限的 jQuery 子集，并且它可以合理地跨浏览器兼容（如果有点长......）。

```
var Vanilla;
if (!Vanilla) {
    Vanilla = {};
}
//execute this now to have access to it immediately.
(function () {
    'use strict';
    Vanilla.addHandler = function (elem, event, handler) {
        if (elem.addEventListener) {
            elem.addEventListener(event, handler, false);
        } else if (elem.attachEvent) {
            elem.attachEvent('on' + event, handler);
        }
    };
    Vanilla.hasClass = function (elem, cssClass) {
        var classExists = false;
        //
        if (elem && typeof elem.className === 'string' && (/\S+/g).test(cssClass)) {
            classExists = elem.className.indexOf(cssClass) > -1;
        }
        //
        return classExists;
    };
    Vanilla.addClass = function (elem, cssClass) {
        if (elem && typeof elem.className === 'string' && (/\S+/g).test(cssClass)) {
            //put spaces on either side of the new class to ensure boundaries are always available
            elem.className += ' ' + cssClass + ' ';
        }
    };
    Vanilla.removeClass = function (elem, cssClass) {
        if (elem && typeof elem.className === 'string'&& (/\S+/g).test(cssClass)) {
            //replace the string with  regex
            cssClass = new RegExp('\\b' + cssClass + '\\b', 'g');
            elem.className = elem.className.replace(cssClass, '').replace(/^\s+/g, '').replace(/\s+$/g, ''); //trim className
        }
    };
    Vanilla.toggleClass = function (elem, cssClass) {
        if (Vanilla.hasClass(elem, cssClass)) {
            Vanilla.removeClass(elem, cssClass);
        } else {
            Vanilla.addClass(elem, cssClass);
        }
    };
    Vanilla.getElementsByClassName = function (cssClass) {
        var nodeList = [],
            classList = [],
            allNodes = null,
            i = 0,
            j = 0;
        if (document.getElementsByClassName1) {
            //native method exists in browser.
            nodeList = document.getElementsByClassName(cssClass);
        } else {
            //need a custom function
            classList = cssClass.split(' ');
            allNodes = document.getElementsByTagName('*');
            for (i = 0; i < allNodes.length; i += 1) {
                for (j = 0; j < classList.length; j += 1) {
                    if (Vanilla.hasClass(allNodes[i], classList[j])) {
                        nodeList.push(allNodes[i]);
                    }
                }
            }
        }
        return nodeList;
    };
}());
//Now we have a proper window onload
Vanilla.addHandler(window, 'load', function () {
    'use strict';
    var body = document.body,
        menu = document.getElementById('menu'),
        menulink = [],
        wrap = document.getElementById('wrap'),
        i = 0,
        menulinkClickHandler = function (e) {
            var i = 0;
            for (i = 0; i < menulink.length; i += 1) {
                Vanilla.toggleClass(menulink[i], 'active');
            }
            Vanilla.toggleClass(wrap, 'active');
            return false;
        };
    Vanilla.addClass(body, 'js');
    menulink = Vanilla.getElementsByClassName('menu-link');
    for (i = 0; i < menulink.length; i += 1) {
        Vanilla.addHandler(menulink[i], 'click', menulinkClickHandler);
    }
}); 
```

# c# - 实体框架中的类型化 ID

> ID：12874012
> 
> 赞同：1
> 
> 时间：2012-10-13T14:24:43.300
> 
> 标签：c#, entity-framework

在客户端（例如 WPF 或 Silverlight），我通常通过为每个实体创建一个 id 类来模拟实体 id：

```
class CarId { public readonly int Id; ... } // or string or Guid etc 
```

这样我就可以拥有强类型的 id，并且无需在没有类型信息的情况下传递整数（或字符串或 guid）：

```
class Car { public CarId Id { get; private set; } ... } 
```

（类似的可重用方式是创建一个泛型类 Id 并拥有 Id）。

作为实体框架的新手并且没有做很多后端工作，我想知道，是否有可能将实体框架映射到数据库中的主键（整数/字符串/guid）表列的类型ID？最初我希望能够先使用代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T20:39:17.663

实体框架中的键始终是原始类型——复合键也是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T19:29:14.020

我还没有玩够这个，但是[使用这里显示的技术](http://dysphoria.net/2013/04/12/id-type-safety-in-database-code/)，您可以创建更方便使用的强类型 ID。

```
abstract class BaseEntity
{
}

abstract class BaseEntityWithID<TEntity> : IPrimaryKey<Guid, TEntity>
{
    public ID<Guid, TEntity> ID
    {
        get;
        set;
    }
}

class TestOne : BaseEntityWithID<TestOne>
{
    public string TestString { get; set; }
}

class TestTwo : BaseEntityWithID<TestTwo>
{
    public string TestString { get; set; }
}

interface IPrimaryKey<T, TEntity>
{
    ID<T, TEntity> ID { get; set; }
}

struct ID<T, TEntity> : IEquatable<ID<T, TEntity>>
{
    readonly T _id;

    public ID(T id)
    {
        _id = id;
    }

    public T Value { get { return _id; } }

    public bool Equals(ID<T, TEntity> other)
    {
        if (_id == null || other._id == null)
            return object.Equals(_id, other._id);

        return _id.Equals(other._id);
    }

    public static implicit operator T(ID<T, TEntity> id)
    {
        return id.Value;
    }

    public static implicit operator ID<T, TEntity>(T id)
    {
        return new ID<T, TEntity>(id);
    }

    //I believe this class also needs to override GetHashCode() and Equals()
}

class Program
{
    static void Main(string[] args)
    {
        var testOneStore = new Dictionary<ID<Guid, TestOne>, TestOne>();
        var testTwoStore = new Dictionary<ID<Guid, TestTwo>, TestTwo>();

        Func<TestOne, TestOne> addTestOne = (entity) =>
        {
            if (entity.ID == Guid.Empty)
            {
                entity.ID = Guid.NewGuid();
            }

            testOneStore.Add(entity.ID, entity);

            return entity;
        };

        Func<TestTwo, TestTwo> addTestTwo = (entity) =>
        {
            if (entity.ID == Guid.Empty)
            {
                entity.ID = Guid.NewGuid();
            }

            testTwoStore.Add(entity.ID, entity);

            return entity;
        };

        var id1 = addTestOne(new TestOne { TestString = "hi" }).ID;
        var id2 = addTestTwo(new TestTwo { TestString = "hello" }).ID;

        Console.WriteLine(testOneStore[id1].TestString); //this line works
        Console.WriteLine(testOneStore[id2].TestString); //this line gives a compile-time error

        Console.ReadKey(true);
    }
} 
```

我还没有将它与 Entity Framework 一起使用，但我怀疑该`BaseEntityWithID<>`类型需要将`ID`属性标记为未包含在模型中，并使用标记为内部的属性来提供值存储。如果有办法让 EF 只使用该`ID<>`类型，那就太好了，但我根本没有研究过。

# android - Demo Master Detail View - Detail Fragment 更改内容

> ID：12874015
> 
> 赞同：0
> 
> 时间：2012-10-13T14:25:02.707
> 
> 标签：android, eclipse, android-fragments, adt

上下文：我在 Eclipse 和 ADT 中使用向导来获取主细节视图框架。

我对在活动中需要放置的片段以及在视图中需要放置的片段有很好的理解，等等如何查看我正在尝试找出如何最好地更改它的示例，以便我可以开始自己开发应用程序。

真的需要“虚拟”内容视图吗？它似乎只包含菜单选项？

我的问题是有人知道详细视图是如何创建的吗？从我正在阅读的内容来看，该应用程序只是获取项目 ID 并将其作为文本放置在详细视图中？

从 Itemdetailfragment 中提取：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View rootView = inflater.inflate(R.layout.fragment_item_detail, container, false);
    if (mItem != null) {
        ((TextView) rootView.findViewById(R.id.item_detail)).setText(mItem.content);
    }
    return rootView;
} 
```

为我需要的每个新屏幕重新制作细节片段并在其后面放置一些逻辑或编写现有的代码以查看所选菜单选项并显示正确代码的最佳方法是什么？

最后，这是开始使用的最佳示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:07:31.960

> 我的问题是有人知道详细视图是如何创建的吗？从我正在阅读的内容来看，该应用程序只是获取项目 ID 并将其作为文本放置在详细视图中？

是的，这正是它正在做的事情。这是在细节片段中完成的

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View rootView = inflater.inflate(R.layout.fragment_team_detail,
            container, false);

    // Show the dummy content as text in a TextView.
    if (mItem != null) {
        ((TextView) rootView.findViewById(R.id.team_detail))
                .setText(mItem.content);
    }

    return rootView;
} 
```

您需要更改它以从您想要使用的任何来源（网站、数据库或更改硬编码值）获取所需的任何数据

如果您查看 DummyContent.java 类，您将看到注释

> /** TODO：在发布您的应用程序之前替换该类的所有用法。*/

基本上你应该重写这个类来获取你想要的数据

我实际上添加了操作栏 sherlock 以使其与 api 8 兼容，并从这个问题中得到一点帮助[关于主/详细信息流模板的两个问题](https://stackoverflow.com/questions/11413943/two-questions-about-master-detail-flow-template)

提示您可以将 ContentLoader 与 ContentProvider 结合使用，以从其他来源（例如数据库或 Web 服务）获取数据

# android - Phonegap 下载 mp3 文件

> ID：12874021
> 
> 赞同：0
> 
> 时间：2012-10-13T14:25:41.037
> 
> 标签：android, cordova, download

我正在使用 Phonagap 和 jquery mobile 构建一个 android applikation。

在应用程序中，我需要下载一些 mp3 文件，但它不起作用

这是我的功能：

```
function downloadFile() {

var fileTransfer = new FileTransfer();
var uri = encodeURI("http://media.domain.com/myfile.mp3");
var filepath = remoteFile.substring(remoteFile.lastIndexOf('/')+1);

fileTransfer.download(
    uri,
    filePath,
    function(entry) {
        console.log("download complete: " + entry.fullPath);
    },
    function(error) {
        console.log("download error source " + error.source);
        console.log("download error target " + error.target);
        console.log("upload error code" + error.code);
    }
);

} 
```

我究竟做错了什么..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T03:32:06.813

remoteFile 似乎没有设置。

# python - Python中的深度优先搜索

> ID：12874023
> 
> 赞同：-2
> 
> 时间：2012-10-13T14:25:49.863
> 
> 标签：python, search, depth-first-search

我在用 Python 实现搜索算法时遇到问题。我需要一个通用的深度优先搜索代码，它可以返回从开始状态到结束状态的路径。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:29:42.170

[从这篇关于在 Python 中实现图的文章](http://www.python.org/doc/essays/graphs/)开始，然后了解 DFS 可能使用堆栈来弹出和弹出图的节点。有了这个想法可能会帮助您继续在 Python 中实现 DFS。如果您有具体问题，请在此处发布，人们随时准备提供帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T14:30:09.813

[您可以在 literateprograms.org](http://en.literateprograms.org/Depth-first_search_%28Python%29)找到详细的实现说明。

（实际上，这几乎是谷歌的第一个热门，在下次发布关于 SO 的问题之前尝试一下可能会有所帮助）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-14T18:52:11.980

使用邻接表表示来实现图。实现它的代码如下。（如果您使用 Python 读取图形上的文本文件并实现邻接列表，则此代码是特定的）

（Python 3.3）

```
def ajlist(nameofgraph,start,goal):

x=input("enter the name of the file you want to implement adjecency list: ")##file.txt##
text_file=open(x,"r")
nameofgraph={}##use a dictionary##
for line in text_file:
   (vertex,val)=line.split()
   if vertex not in nameofgraph:
      nameofgraph[vertex]=set9[val])
   else:
      nameofgraph.get[key].add(val)
stack=[(stack,[start])]
while stack:
   (vertex,path)=stack.pop()
   for next in graph[vertex]-set(path):
      if next==goal:
         yield (path+[next])
      else:
         stack.append((next,path+[next])) 
```

当你想运行这个使用这个语法`list(DFS(nameofgraph,start,goal))`

以上是进行 DFS 并在图中找到路径的最简单方法。如果你已经在 python 中实现了一个图形，那么你不需要 (input) 函数。然后你要做的就是去掉实现邻接列表部分并使用真正的遍历部分。

# c# - XML LINQ query returns nothing

> ID：12874027
> 
> 赞同：3
> 
> 时间：2012-10-13T14:26:00.300
> 
> 标签：c#, xml, linq, null, xelement

I'm trying to parse an xml file using LINQ, but as I understand the query returns null. (It's WP7) Here's the code:

```
 var resultQuery = from q in XElement.Parse(result).Elements("Question")
                          select new Question
                          {
                              QuestionId = q.Attribute("id").Value,
                              Type = q.Element("Question").Attribute("type").Value,
                              Subject = q.Element("Subject").Value,
                              Content = q.Element("Content").Value,
                              Date = q.Element("Date").Value,
                              Timestamp = q.Element("Timestamp").Value,
                              Link = q.Element("Link").Value,
                              CategoryId = q.Element("Category").Attribute("id").Value,
                              UserId = q.Element("UserId").Value,
                              UserNick = q.Element("UserNick").Value,
                              UserPhotoURL = q.Element("UserPhotoURL").Value,
                              NumAnswers = q.Element("NumAnswers").Value,
                              NumComments = q.Element("NumComments").Value,
                          }; 
```

"result" is the xml string, just like this one. [http://i48.tinypic.com/1ex5s.jpg](http://i48.tinypic.com/1ex5s.jpg) (couldn't post properly formatted text so here's a pic : P )

Error: [http://i48.tinypic.com/2uyk2ok.jpg](http://i48.tinypic.com/2uyk2ok.jpg)

Sorry, if I haven't explained it properly and if this has already been asked (tried searching but didn't help).

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T14:29:52.903

You have run into an XML namespace problem. When you are just querying "Question", the string is translated into an [`XName`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xname.aspx) with the default namespace. There are no elements in the default namespace in your XML, only elements in the `urn:yahoo:answers` namespace (see the top level element, where it says `xmlns="urn:yahoo:answers"`).

You need to query the correct XML namespace, like this:

```
var ns = new XNameSpace("urn:yahoo:answers");
var resultQuery = from q in XElement.Parse(result).Elements(ns + "Question"); 
```

When picking out the individual properties, remember to add the namespace also.

[`XName`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xname.aspx) is a class that represents an XML name, which might have a namespace defined by [`XNameSpace`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xnamespace.aspx). These two classes has an implicit conversion operator implemented that allows you to implicitly convert from `string` to `XName`. This is the reason the calls work by just specifying a `string` name, but only when the elements are in the default namespace.

The implicitness of this makes it ~~very easy~~ easier to work with XML namespaces, but when one does not know the mechanism behind, it gets confusing very quickly. The [`XName`class documentation](http://msdn.microsoft.com/en-us/library/system.xml.linq.xname.aspx) has some excellent examples.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:30:01.637

Two ways to fix it:

1.  Add the root element was part since Elements only search one level - XElement.Parse(result).Root.Elements("Question")
2.  Use the Descendants method since that will search the entire xml tree.

# facebook - 在 FB 调试器上提交 url 之前，like 按钮不喜欢在配置文件上

> ID：12874038
> 
> 赞同：2
> 
> 时间：2012-10-13T14:27:52.653
> 
> 标签：facebook, facebook-like

我在网站的每个帖子页面上都放置了一个赞按钮。

为了确保一切正常，我在页面上添加了所有必需的元标记、Head 标记和 html 标记，其中包括：

```
<html xmlns:fb="http://ogp.me/ns/fb#" xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml" onkeypress="keyfind(event)">

<head prefix="og: http://ogp.me/ns#">
<meta property="og:title" content="xxxx"/>
<meta property="og:site_name" content="xxxx"/>
<meta property="og:url" content="xxxx"/>
<meta property="og:description" content="xxx"/>
<meta property="og:type" content="article" />
<meta property="fb:app_id" content="xxxx"/>
<meta property="fb:admins" content="xxxx"/>
 <meta property="og:image" content="xxx" / > 
```

由于我们是共享图片，所以选择了 og 类型作为文章，就像 9gag 一样。

因此，当我转到这些页面中的任何一个并单击“赞”按钮时，它会单击并且计数成功增加。但是，当我检查我的 Facebook 个人资料时，个人资料上没有任何内容，就好像我从不喜欢它一样。

我用多个 facebook 帐户对其进行了测试，网页上的数量不断增加，但在任何个人资料上都没有显示任何点赞。

但是，只要我在 fb 调试器中放入 1 个 url，该页面上的所有喜欢都会突然出现在个人资料中。

例如，如果我喜欢一个页面，并在 2 天后将该页面的 url 放入 FB 调试器中，该链接将出现在配置文件上，显示 [FirstName LastName like an article] 并显示 48 小时前。

我知道 facebook 需要一些时间来扫描网址，但是，我从一周左右开始就一直在尝试解决这个问题。目前，我通过将所有网址一一放入调试器中幸存下来。

# windows-phone-7 - 使用用户名和密码连接到网站并在 Windows Phone 7 (C#) 中检索源代码？

> ID：12874043
> 
> 赞同：0
> 
> 时间：2012-10-13T14:28:16.927
> 
> 标签：windows-phone-7

我已经用android做了这个。现在我正在尝试在 Windows Phone 7 中执行此操作。此代码在 c# 中的等效项是什么？我还想将源代码保存在字符串中。

```
HttpClient httpclient = new DefaultHttpClient();
HttpPost httppost = new HttpPost("http://students.usls.edu.ph/login.cfm");

username = txtUname.getText().toString();
password = txtPass.getText().toString();

List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>(2);
nameValuePairs.add(new BasicNameValuePair("username",username));
nameValuePairs.add(new BasicNameValuePair("password",password));
httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:59:49.620

You set credentials like this:

```
WebClient httpclient = new WebClient();

username = txtUname.Text;
password = txtPass.Text;

httpclient.Credentials = new NetworkCredential(username, password); 
```

Where txtUname and txtPass are TextBox elements.

In order to POST, it's been answered [here](https://stackoverflow.com/questions/5401501/how-to-post-data-to-specific-url-using-webclient-in-c-sharp).

# angularjs - 有没有办法将所有 ng-includes 分组到一个 http 请求中？

> ID：12874045
> 
> 赞同：2
> 
> 时间：2012-10-13T14:28:34.233
> 
> 标签：angularjs, minify, angularjs-ng-include

我们通常`ng-includes`在每个主要的 html/jsp 页面中都有多个，我想知道是否有办法将所有内容分组`ng-includes`到一个 http 请求中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T16:59:22.760

这里回答了一个非常相似的问题：[https ://stackoverflow.com/a/12346901/1418796](https://stackoverflow.com/a/12346901/1418796)

简而言之，是的，很容易用 AngularJS 预加载部分，通过使用`script`指令（因此在初始 HTML 下载中预加载部分）或将部分放入`$templateCache`（在这种情况下部分是用 JavaScript 下载的） .

参考问题中的更多详细信息和代码示例。

# r - 雅虎财经数据过期

> ID：12874047
> 
> 赞同：1
> 
> 时间：2012-10-13T14:28:35.990
> 
> 标签：r, api, yahoo-finance

我正在使用 TTR 包中的 getYahooData 从 R 中的 Yahoo Finance 获取历史数据。但是，我获得的大多数数据不包括最近几天的交易 - 例如，我在除一个股票代码（这是最新的， JMAT.L)

有没有人有数据源或 fetch 方法可以为我提供一些最新数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T22:21:23.093

用于获取 Yahoo 财务数据的各种 R 函数获取的数据与 Finance.yahoo.com 上的数据相同。检查网站，搜索股票代码。如果那里的数据不是最新的，那么不幸的是，R 无法帮助您。如果那里是最新的，请提供一个代码片段，以便我们检查您的代码是否存在问题。

不幸的是，雅虎财经是获得此类免费数据的最佳场所。随着各种数据提供商更改其网站或放弃免费服务，R 命令已经过时。我知道的唯一其他来源是直接来自[Nasdaq](http://www.nasdaq.com/quotes/historical-quotes.aspx)。不确定当前是否有任何 R 命令指向此。

# java - 如何在您的服务器上配置 Spotlight 以提供与 Web 上的 Spotlight 演示相同的输出？

> ID：12874050
> 
> 赞同：0
> 
> 时间：2012-10-13T14:28:55.247
> 
> 标签：java, dbpedia, spotlight-dbpedia

我正在使用[在您的服务器聚光灯上运行](https://github.com/dbpedia-spotlight/dbpedia-spotlight#run-your-own-server)。但无法配置属性文件，因此它将输出与[演示](http://spotlight.dbpedia.org/demo/)相同的输出。

这是演示屏幕截图，显示了它使用的参数： ![在此处输入图像描述](../Images/3bef94a94d71629a07fb4247f716f750.png)

看起来像这样（来自`server.properties`我机器上本地的文件）：

```
org.dbpedia.spotlight.web.rest.uri = http://localhost:2222/rest
org.dbpedia.spotlight.index.dir = data/index 
org.dbpedia.spotlight.spot.dictionary = data/spotter.dict 
jcs.default.cacheattributes.MaxObjects = 5000
org.dbpedia.spotlight.tagging.hmm = data/pos-en-general-brown.HiddenMarkovModel

org.dbpedia.spotlight.sparql.endpoint = http://dbpedia.org/sparql
org.dbpedia.spotlight.sparql.graph = http://dbpedia.org

# Configurations for the CoOccurrenceBasedSelector
# From: http://spotlight.dbpedia.org/download/release-0.5/spot_selector.tgz
# org.dbpedia.spotlight.spot.cooccurrence.datasource = ukwac
# org.dbpedia.spotlight.spot.cooccurrence.database.jdbcdriver = org.hsqldb.jdbcDriver
# org.dbpedia.spotlight.spot.cooccurrence.database.connector = jdbc:hsqldb:file:data/spotsel/ukwac_candidate;shutdown=true&readonly=true
# org.dbpedia.spotlight.spot.cooccurrence.database.user = sa
# org.dbpedia.spotlight.spot.cooccurrence.database.password =
# org.dbpedia.spotlight.spot.cooccurrence.classifier.unigram = data/spotsel/ukwac_unigram.model
# org.dbpedia.spotlight.spot.cooccurrence.classifier.ngram = data/spotsel/ukwac_ngram.model

# Other possible values: AtLeastOneNounSelector,CoOccurrenceBasedSelector,NESpotter
org.dbpedia.spotlight.spot.spotters = LingPipeSpotter

# org.dbpedia.spotlight.spot.opennlp.dir = opennlp

# Info for context searcher
org.dbpedia.spotlight.language = English
org.dbpedia.spotlight.lucene.analyzer = SnowballAnalyzer

# Choose between jdbc or lucene for DBpedia Resource creation. Also, if the jdbc throws an error, lucene will be used.
# org.dbpedia.spotlight.core.database = jdbc
# org.dbpedia.spotlight.core.database.jdbcdriver = org.hsqldb.jdbcDriver
# org.dbpedia.spotlight.core.database.connector = jdbc:hsqldb:file:data/database/spotlight-db;shutdown=true&readonly=true
# org.dbpedia.spotlight.core.database.user = sa
# org.dbpedia.spotlight.core.database.password =

# List of disambiguators to load: Document,Occurrences,CuttingEdge,Default
org.dbpedia.spotlight.disambiguate.disambiguators = Default,Document

# From http://spotlight.dbpedia.org/download/release-0.5/candidate-index-full.tgz
# org.dbpedia.spotlight.candidateMap.dir = /fastdata/spotlight/3.7/candidateIndexTitRedDis 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:50:36.693

快速入门附带了 index 和 spotter.dict 的微小版本。

如果您想要与我们的演示网络服务器相同的结果，则需要下载几 GB 的较大文件。

您可以覆盖您的索引和 spotter.dict，我们将配置更改为指向新文件。

请参阅[http://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Downloads](http://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Downloads)

# jquery - jquery新的github插件系统

> ID：12874052
> 
> 赞同：7
> 
> 时间：2012-10-13T14:29:04.990
> 
> 标签：jquery, jquery-plugins, github

我已经按照 github ( [https://github.com/jquery/plugins.jquery.com/](https://github.com/jquery/plugins.jquery.com/) ) 上 plugins.jquery.com repo 中的所有步骤准备好将我的插件添加到新系统中，我有一个插件在旧存储库中称为 Tweetslider，但我很困惑。

我已经使用 /etc/hosts 设置了本地 jquery 站点以将其路由到我的 ip，并设置了所有 node.js 功能。我认为发布插件将通过本地站点的 wp-admin 完成，但似乎情况并非如此。

我读的越多，似乎我只是在我的存储库的根目录中添加一个 jquery.json 清单文件，将 github 中的 post-receive-hook 添加到插件站点接收 url，并发布一个带有版本的新标签编号，然后将由 jquery 插件站点获取并添加。如果是这种情况，我为什么要打扰 web-base-template 等以及本地插件 db 等的所有设置？

我的 tweetslider 存储库在这里[https://github.com/LiamBailey/TweetSlider](https://github.com/LiamBailey/TweetSlider)

如果我按照上述步骤操作，如果清单有效，我的插件会被添加或重新添加，还是我遗漏了什么？

例如，在链接在帖子顶部的 jquery 存储库的自述文件的末尾，它给出了最后的说明：

运行网站

节点脚本/manager.js

但是当我运行它时，它完全没有任何作用。我检查了 sysmonitor 并且其中有一个节点小程序，但我看不到任何视觉上发生的事情。我看过代码，但我也不明白。所有 Wordpress 的东西都很完美，我有本地 jQUery，我可以登录。我希望其他人已经看过这一切并且比我更好地理解它，因为我想我很快就会发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T03:13:17.373

是的，这也让我发疯了。关键是github不知道你的/etc/hosts，也不知道你的本地服务器。

*   web-base-template 和 wordpress 的东西让你可以查看网站。

*   节点服务器接收到 post-receive-hook，然后将信息直接添加到 wordpress 中。

*   更改 /etc/hosts 设置了一个域名，因此您可以查看本地 wordpress 站点，但是没有其他人可以看到这一点，尤其是 github。

一些潜在的解决方法：

*   设置一个本地 git 服务器，它有一个到本地机器的 post-receive-hook。这样，所有必要的主机名路由都由您的本地 /etc/hosts 处理。

*   使用某种动态 DNS 或相关系统来拥有一个指向本地运行服务器的公共主机名，并让 github 挂钩。

*   通过您自己的个人公共服务器将 post-receive-hook 代理到您的本地服务器。

您还可以询问 jquery 论坛上的人们是否对配置本地环境有更多的了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T14:20:44.320

**2013-01-17 更新**

jQuery 插件注册表终于上线了！[http://plugins.jquery.com](http://plugins.jquery.com)

说明现在非常简单，[http ://plugins.jquery.com/docs/publish/](http://plugins.jquery.com/docs/publish/)

清单的规格也清楚地详细说明在[http://plugins.jquery.com/docs/package-manifest/](http://plugins.jquery.com/docs/package-manifest/)

* * *

> 如果我按照上述步骤操作，如果清单有效，我的插件会被添加或重新添加，还是我遗漏了什么？

根据[README.md](https://github.com/jquery/plugins.jquery.com/blob/master/README.md)，它警告说它还没有工作。该系统正在（缓慢）开发中。

> 只需使用我们的 web hook url [http://plugins.jquery.com/_update](http://plugins.jquery.com/_update)将 post-receive hook 添加到您的存储库。**警告：这还没有功能！**

我还注意到一个月前的[最后一次提交](https://github.com/jquery/plugins.jquery.com/commit/4f5f611d247db6b3df11a2a5bda0957d08f11d6f#diff-0)`http://plugins.jquery.com/postreceive-hook`是关于在他们的发布文档中更新所说的接收后挂钩[https://github.com/jquery/plugins.jquery.com/blob/4f5f611d247db6b3df11a2a5bda0957d08f11d6f/site-content/page /docs/publish.html](https://github.com/jquery/plugins.jquery.com/blob/4f5f611d247db6b3df11a2a5bda0957d08f11d6f/site-content/page/docs/publish.html)

诸如此类的事情会增加混乱，但您可以尝试询问和/或查看[https://github.com/jquery/plugins.jquery.com/issues](https://github.com/jquery/plugins.jquery.com/issues)

# javascript - JavaScript 对象从另一个方法调用一个方法

> ID：12874055
> 
> 赞同：1
> 
> 时间：2012-10-13T14:29:40.287
> 
> 标签：javascript, jquery

鉴于以下对象文字，我如何`c`从内部调用`b`？

**更新 1 - 错过了我使用 JQuery 加载的一件事，它改变了上下文：**

```
var a = {
    b: function (e) {

        $o.load(path, function (e) { // need to call c from here });
    },
    c: function (e) { 
    }
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:31:29.693

你应该可以在`a.c()`里面做`.b`：

```
var a = {
    b: function(e) {
        a.c();
    },
    c: function(e) {}
};

a.b(); // calls c 
```

此外，`this`将绑定到`a`允许您使用以下方式访问其属性的对象`this.property`：

```
b: function(e) {
    this.c();
}, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T14:37:44.700

只要它们在同一个对象上，您就可以使用该方法`b`调用它们。但是，对于传递给的函数表达式，我建议您使用指向它的指针。因此，您可以：`c``this.c``$o``bind``this``b`

```
var a = {
    b: function (e) {
        $o.load(path, function (e) {
            this.c();
        }.bind(this));
    },
    c: function (e) {
    }
}; 
```

**编辑：**您创建和使用此对象的方式很脆弱。`this`指针可能指向任何东西，例如当您取消绑定方法或使用不同的上下文调用它时。即使使用`a.c`也不是万无一失的，因为其他代码可能会发生变化，并且在调用`a`该方法时会指向其他内容。`b``a`

我会做这样的事情：

```
var a = function (a) {
    a.b = function (e) {
        $o.load(path, function (e) {
            a.c();
        });
    };

    a.c = function (e) {
    };

    return a;
}({}); 
```

此代码不能被篡改，并允许您创建私有变量和闭包。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T14:31:55.793

```
var a = {
    b: function (e) {
        a.c();
    },

    c: function (e) {
        // magic goes here
    }
}; 
```

`a`将是一个闭包，因此它可以在函数中访问（也就是说，`a`定义在一个宽的外部范围内，每个函数中的较窄的内部范围都继承了该范围）。调用上下文无关；闭包是在定义函数的时间和地点形成的，因此在内部`b`，对象`a`将始终保持不变（不像`this`，它可以改变）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-13T14:33:39.010

尝试这个：-

```
var a = {
b: function(e) {
    a.c();
},
c: function(e) {}
};

a.b(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-13T15:19:33.010

需要最少更改的最简单的解决方案是使用`jQuery.proxy()`：

```
var a = {
    b: function (e) {

        $o.load(path, $.proxy(function (e) { this.c(); }, this));
    },
    c: function (e) { 
    }
}; 
```

# knockout.js - 如何在 Knockout 中更新选中的项目计数？

> ID：12874057
> 
> 赞同：1
> 
> 时间：2012-10-13T14:29:48.190
> 
> 标签：knockout.js

我有以下视图模型：

```
var viewModel = {
    List: ko.observableArray([ { Id: 1, Value: "Test 1" }, 
                               { Id: 2, Value: "Test 2" }, 
                               { Id: 3, Value: "Test 3" }
                              ]),
    // item with id "3" checked by default
    Selected: ko.observableArray(["3"])
}; 
```

和观点：

```
<div data-bind="text: Selected().length"></div>
<ul data-bind="foreach: List">
    <li class="checkbox">
        <label>
            <input type="checkbox" name="SelectedGroups" data-bind="attr: { value: Id }, checked: $root.Selected()" />
            <span data-bind="text: Value"></span>
        </label>
    </li>
</ul> 
```

我想显示选定的项目计数，但淘汰赛不会在更改复选框状态时附加事件侦听器。我尝试使用计算属性，但它不起作用。

虽然，如果我手动（或从脚本）将项目推送或弹出到`Selected`数组中，一切正常。我错过了什么？

请以[小提琴](http://jsfiddle.net/aVksh/5/)为例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:37:06.243

`()`您的已检查绑定中有一组额外的，将其更改为：

```
data-bind="attr: { value: Id }, checked: $root.Selected" 
```

它应该可以看到这个[小提琴](http://jsfiddle.net/aVksh/6/)和[文档](http://knockoutjs.com/documentation/checked-binding.html)。

# mysql - 使用两个索引对 mysql 表进行水平分区

> ID：12874062
> 
> 赞同：3
> 
> 时间：2012-10-13T14:30:11.517
> 
> 标签：mysql, database-partitioning, horizontal-scaling

我有一个 mysql 表，用于存储不同项目的用户评分。它具有以下字段：

*   id (int, pk)
*   用户 ID（整数）
*   itemId (int)
*   评级（浮动）
*   时间戳（整数）

和以下指数：

*   (userId, rating)：用于查询特定用户已评分的所有项目
*   (itemId, rating)：用于查询所有对特定项目进行评分的用户

该表有超过 1000 万行。为了使其更具可扩展性，我想执行水平分区。特别是，我计划将表分区为 20 个表：

*   tbl_rating_by_item_0：存储itemId以0结尾的评分
*   tbl_rating_by_item_1：存储itemId以1结尾的评分
*   ……
*   tbl_rating_by_item_9：存储itemId以9结尾的评分

和

*   tbl_rating_by_user_0：存储userId以0结尾的评分
*   tbl_rating_by_user_1：存储userId以1结尾的评分
*   ……
*   tbl_rating_by_user_9：存储userId以9结尾的评分

这个想法是，当我们从 tbl_rating_by_item_itemId 中读取 itemId 查询时，我们从 tbl_rating_by_user_userId 中读取 userId 查询。缺点是每当我想插入或删除评分时，我都需要在两个表中插入或删除。

还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:03:05.030

你试过索引吗？创建两个复合索引

```
 INDEX name1 (rating,userid)
 INDEX name2 (rating,itemId) 
```

可能有助于提高性能。

还要考虑表分区。看看[Mysqlable partitioning](http://dev.mysql.com/doc/refman/5.1/en/partitioning-overview.html) 这比物理上创建两个单独的表要好。

# php - 将内容文件分配给静态属性时，解析错误意外（，预期，在 php 中）

> ID：12874065
> 
> 赞同：0
> 
> 时间：2012-10-13T14:30:25.943
> 
> 标签：php

> **可能重复：**
> [解析错误：语法错误，意外'.'，期望'，'或';'</a>](https://stackoverflow.com/questions/10969342/parse-error-syntax-error-unexpected-expecting-or)
> 
> [](https://stackoverflow.com/questions/10969342/parse-error-syntax-error-unexpected-expecting-or)

 [我有这堂课：

```
<?php

class MyClass {
  const DB_NAME  = "MyDb";

  const HOST = "localhost"; 

  const USER = "abcdef";

  const PASSWORD = "ghijklmn";

  public static $MyString = file_get_contents('file.txt');

}
?> 
```

我不知道有什么问题`file_get_contents`？

我不明白错误是什么意思？为什么`(`出乎意料？

我阅读了以下文章，但这些文章并不能帮助我解决该错误：](https://stackoverflow.com/questions/10969342/parse-error-syntax-error-unexpected-expecting-or) 

[解析错误：语法错误，php 中出现意外的 T_STRING](https://stackoverflow.com/questions/11785017/parse-error-syntax-error-unexpected-t-string-in-php)

[解析错误 T_Variable](https://stackoverflow.com/questions/8353629/parse-error-t-variable)

[file_get_contents 在读取文件时显示意外输出](https://stackoverflow.com/questions/9720861/file-get-contents-shows-unexpected-output-while-reading-a-file)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T14:32:20.353

这是因为您已将表达式分配给变量声明。它只能使用常量。

解决方法是这样的

```
<?php
class MyClass {
    ...
    public static $MyString;
    ...
}
MyClass::$MyString = file_get_contents('file.txt'); 
```

# c# - 在c#中为苹果存折签名内容

> ID：12874074
> 
> 赞同：0
> 
> 时间：2012-10-13T14:31:39.890
> 
> 标签：c#, passbook

这是我的代码

```
static void Main(string[] args)
    {
        try
        {
            ContentInfo contentInfo = new ContentInfo(File.ReadAllBytes(@"D:\prj\temp\manifest.json"));
            SignedCms signedCms = new SignedCms(SubjectIdentifierType.IssuerAndSerialNumber, contentInfo);
            var signer = new CmsSigner(new X509Certificate2(@"D:\prj\temp\Shooger_Passbook_withoutKey.p12", "xxxxxxxxx"));
            signer.Certificates.Add(new X509Certificate2(@"D:\prj\temp\AppleIncRootCertificate.cer"));
            signer.Certificates.Add(new X509Certificate2(@"D:\prj\temp\AppleWWDRCA.cer"));
            signer.IncludeOption = X509IncludeOption.WholeChain;
            signer.SignedAttributes.Add(new Pkcs9SigningTime());
            signedCms.ComputeSignature(signer, false);

            byte[] myCmsMessage = signedCms.Encode();
            File.WriteAllBytes(@"D:\prj\temp\signature", myCmsMessage);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
    } 
```

有人能告诉我为什么它会抛出“发生内部证书链接错误。”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-25T10:32:17.670

For those tearing their hair out after renewing their certificate and finding it doesn't work, you now need to add the 'signed-time' attribute to the signature. Hence:

```
var oid = new Oid("1.2.840.113549.1.7.2");
ContentInfo contentInfo = new ContentInfo(oid, manifest);

var signedCms = new SignedCms(contentInfo, true);
var signer = new CmsSigner(SubjectIdentifierType.IssuerAndSerialNumber, myX509certificate);
signer.IncludeOption = X509IncludeOption.EndCertOnly;
signer.Certificates.Add(appleWwdrCertificate);

// new requirement to add 'signing-date'
signer.SignedAttributes.Add(new Pkcs9SigningTime(DateTime.Now));
signedCms.ComputeSignature(signer);

bytes[] signature = signedCms.Encode(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-22T10:31:44.530

我已经为 .Net 创建了一个 OSS 库，可以为您处理所有这些。您只需要您自己的 Passbook 证书和主要的 Apple 证书。

[https://github.com/tomasmcguinness/dotnet-passbook](https://github.com/tomasmcguinness/dotnet-passbook)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T12:43:26.943

尝试从 Windows 证书存储加载证书，

下面的链接将为您提供在 .net 中签名通行证的详细教程

[http://geekswithblogs.net/MobileLOB/archive/2012/07/30/part-3ndashpassbook-server.aspx](http://geekswithblogs.net/MobileLOB/archive/2012/07/30/part-3ndashpassbook-server.aspx)

希望这可以帮助.. ：）

# php - 正则表达式在特定系列令牌后插入换行符

> ID：12874076
> 
> 赞同：1
> 
> 时间：2012-10-13T14:31:51.923
> 
> 标签：php, preg-replace

`\n`我正在尝试转换一个多行字符串，以在两个最后的右括号连续出现后插入换行符，即：`))`变为`))\n`.

也可能在 '))' 之前有一个 ')'，有效地创建了 ')))'。

这两个或三个括号可能会或可能不会被不确定长度的空格“展开”，例如`))`, `) )`, `)))`, `) ) )`,`)) )`等等`) ))`。

我尝试了以下方法：

```
//Example message
$message = '(item (name 286) (Index 31) (Image "item001") (class money coin) (code 4 110 0) (country 2) (plural 1) (buy 0))
(item(name 7904)(Index 7904) (specialty (Dex 10(defense 55)(hp 3500)(dodge 71)          ))

(item(name 7905)(Index 7905)(country 2) 
(level 80)(specialty(hp 3400)               )                               )

(item(name 7906)(Index 7906)(level 80)      (specialty(Str 10))                             ) ';

// Converts all lines into one line    
$message =  preg_replace("/[\r\n]*/","",$message); 

// Replace '))' with '))\n' - doesn't work.
$message =  preg_replace("/[)s+)]s*/","\n",$message); 

$InititemLines = explode("\n", $message);
for ($line = 0; $line < count($InititemLines); $line++) {
    echo "Line #<b>{$line}</b> : " . $InititemLines[$line] . "<br />\n";
} 
```

要将所有行转换为一行，我使用了：

```
$message = preg_replace("/[\r\n]*/","",$message); 
```

然后，要替换`))`为`))\n`，我尝试了以下方法（但它不起作用）：

```
$message = preg_replace("/[)s+)]s*/","))\n",$message); 
```

我希望输出是这样的：

```
Line #0: (item (name 286) (Index 31) (Image "item001") (class money coin) (code 4 11 0 0) (country 2) (plural 1) (buy 0))
Line #1: (item(name 7904)(Index 7904) (specialty    (Dex 10)(defense 55)(hp 3500)(dodge 71)         ))
Line #2: (item(name 7905)(Index 7905)(country 2)(level 80)(specialty(hp 3400)       )           )
Line #3: (item(name 7906)(Index 7906)(level 80)     (specialty(Str 10))     ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:47:33.577

这将替换所有行末尾的“））”，如果行以`)))`or结尾`))`：

`$message = Preg_replace( "\)?(\s*\)\s*\))", "$1\n", $message );`

这个正则表达式意味着

*   找到一个可选的单右括号')'。我们将其转义为 ')' 因为括号在正则表达式中具有特殊含义。它是可选的，因为尾随“？”。
*   后跟 0 个或多个空格字符，表示为 '\s'。0个或多个用'*'表示，
*   后跟另一个')'
*   后跟另外 0 个或多个空格，
*   后跟另一个')'
*   然后我们用一对'（'和'）'包围`\s*\)\s*\)`，意思是“将此部分分组，以便我们以后可以引用它”。我们这样做是为了将其替换为`))\n`.

* * *

然后一个更优雅的解决方案*可能*是（取决于您的要求......），随后还从*每个*“）”之前删除任何多余的剩余空间：

`$message = preg_replace("(\)\s*)", "\)", $message);`

这个正则表达式意味着

*   找到一个操作 ')',
*   后跟 0 个或多个空格
*   分组，所以我们可以替换。

（在您的示例中，我相信这将去除所有多余的空格，而仅保留字符串中的空格）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:23:59.670

谢谢你让它工作正常

```
$message = Preg_replace("/(\s*\)\s*\)?\s*\))/", "$1\n", $message ); 
```

# symfony - 安装 stof 捆绑包和学说扩展（树）时出现致命错误

> ID：12874082
> 
> 赞同：0
> 
> 时间：2012-10-13T14:32:24.037
> 
> 标签：symfony, doctrine-orm, symfony-2.0, doctrine-extensions

这是问题：我没有成功安装 stof bundle with **symphony 2.0**

我如何进行：

我在 deps 文件中添加了这一行：

```
[GedmoDoctrineExtensions]
    git=https://github.com/l3pp4rd/DoctrineExtensions.git
    target=bundles/gedmo-doctrine-extensions
    version=e93fc1e0a0

[StofDoctrineExtensionsBundle]
    git=https://github.com/stof/StofDoctrineExtensionsBundle.git
    target=bundles/Stof/DoctrineExtensions/Bundle
    version=6b2a8c74bd 
```

然后我运行命令

php bin/vendors install --reinstall

一切皆好。

然后我激活相关文件中的扩展名

```
# config.yml
stof_doctrine_extensions:
    default_locale: en_US
    orm:
        default:
            tree: true

orm:
    auto_generate_proxy_classes: %kernel.debug%
    auto_mapping: true
    mappings:
        StofDoctrineExtensionsBundle: ~ 
```

* * *

```
# AppKernel.php    
use Symfony\Component\HttpKernel\Kernel;
use Symfony\Component\Config\Loader\LoaderInterface;

class AppKernel extends Kernel
{
    public function registerBundles()
    {
        $bundles = array(
            [...]
            new Stof\DoctrineExtensionsBundle\StofDoctrineExtensionsBundle(),
            [...]
        ); 
```

* * *

```
# autoload.php
use Symfony\Component\ClassLoader\UniversalClassLoader;
use Doctrine\Common\Annotations\AnnotationRegistry;

$loader = new UniversalClassLoader();
$loader->registerNamespaces(array(
    'Gedmo'            => __DIR__.'/../vendor/gedmo-doctrine-extensions/lib',
    'Stof'             => __DIR__.'/../vendor/bundles', 
    [...]
    )); 
```

最后，我添加了我的实体类别，如本教程[http://gediminasm.org/article/tree-nestedset-behavior-extension-for-doctrine-2#include-extension](http://gediminasm.org/article/tree-nestedset-behavior-extension-for-doctrine-2#including-extension)

```
<?php
namespace Myproject\MyBundle\Entity;

use Gedmo\Mapping\Annotation as Gedmo;
use Doctrine\ORM\Mapping as ORM;

/**
 * @Gedmo\Tree(type="nested")
 * @ORM\Table(name="Category")
 * use repository for handy tree functions
 * @ORM\Entity(repositoryClass="Gedmo\Tree\Entity\Repository\NestedTreeRepository")
 */
class Category
{
    /**
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue
     */
    private $id;

    /**
     * @ORM\Column(name="title", type="string", length=64)
     */
    private $title;

    /**
     * @Gedmo\TreeLeft
     * @ORM\Column(name="lft", type="integer")
     */
    private $lft;

    /**
     * @Gedmo\TreeLevel
     * @ORM\Column(name="lvl", type="integer")
     */
    private $lvl;

    /**
     * @Gedmo\TreeRight
     * @ORM\Column(name="rgt", type="integer")
     */
    private $rgt;

    /**
     * @Gedmo\TreeRoot
     * @ORM\Column(name="root", type="integer", nullable=true)
     */
    private $root;

    /**
     * @Gedmo\TreeParent
     * @ORM\ManyToOne(targetEntity="Category", inversedBy="children")
     * @ORM\JoinColumn(name="parent_id", referencedColumnName="id", onDelete="SET NULL")
     */
    private $parent;

    /**
     * @ORM\OneToMany(targetEntity="Category", mappedBy="parent")
     * @ORM\OrderBy({"lft" = "ASC"})
     */
    private $children;
} 
```

但是当我运行命令 php app/console generate:doctrine:entities MyProjectMyBundle:Category 时，出现以下错误：

```
Fatal error: Out of memory (allocated -1227096064) (tried to allocate 261900 bytes) in /home/user/Project/vendor/doctrine/lib/Doctrine/ORM/Mapping/Driver/XmlDriver.php on line 75 
```

有时这个：

```
Fatal error: Out of memory (allocated -1222901760) (tried to allocate 261900 bytes) in /home/user/Project/vendor/gedmo-doctrine-extensions/lib/Gedmo/Mapping/MappedEventSubscriber.php on line 176 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:13:01.967

我想说这些错误与 Symfony 或 Doctrine 无关。对我来说，这更像是一个 PHP 配置问题。

您可以尝试增加文件`memory_limit`中的值`php.ini`。在大多数情况下，128MB 的内存限制就足够了，但如果您的项目处理大量数据，则可能需要更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T18:00:37.070

尝试仅加载树扩展：

```
doctrine:
    orm:
        entity_managers:
            default:
                mappings:
                    gedmo_tree:
                       type: annotation
                       prefix: Gedmo\Tree\Entity
                       dir: "%kernel.root_dir%/../vendor/gedmo/doctrine-extensions/lib/Gedmo/Tree/Entity"
                       alias: GedmoTree # this one is optional and will default to the name set for the mapping
                       is_bundle: false 
```

正如文档所说：[https ://github.com/stof/StofDoctrineExtensionsBundle/blob/master/Resources/doc/index.rst#add-the-extensions-to-your-mapping](https://github.com/stof/StofDoctrineExtensionsBundle/blob/master/Resources/doc/index.rst#add-the-extensions-to-your-mapping)

# c++ - 来自 Vector 的 Direct3D 旋转矩阵，反之亦然

> ID：12874087
> 
> 赞同：0
> 
> 时间：2012-10-13T14:33:07.827
> 
> 标签：c++, vector, matrix, rotation, direct3d

我需要从方向向量计算旋转矩阵，从旋转矩阵计算方向向量。

向上方向应对应z轴，向前为y，向右为x；

```
 D3DXMATRIX m; // the rotation matrix
    D3DXVECTOR3 v; // this is the direction vector wich is given
    D3DXVECTOR3 r; // resulting direction vector

    float len = D3DXVec3Length(&v); // length of the initial direction vector

    // compute matrix
    D3DXMatrixLookAtLH(&m, &v, &D3DXVECTOR3(0,0,0), &D3DXVECTOR3(0,0,1));

    // use the matrix on a vector { 0, len, 0 }
    D3DXVec3TransformCoord(&r, &D3DXVECTOR3(0,len,0), &m); 
```

现在，向量*r*应该等于*v*，但它不是。我到底要做什么才能得到我需要的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:59:44.240

这个问题对我来说有点令人困惑。使用方向向量，您可以定义无限旋转矩阵，使相机指向/查看该方向，除非您定义了一些额外的约束。根据您的代码，我将假设您希望向上向量为`Z`:-)

首先，请注意：您似乎在描述右手坐标系，但使用的是左手函数`D3DXMatrixLookAtLH`。其次，此功能的参考资料表明：

```
D3DXMATRIX* D3DXMatrixLookAtLH(
  _Inout_  D3DXMATRIX *pOut,
  _In_     const D3DXVECTOR3 *pEye,
  _In_     const D3DXVECTOR3 *pAt,
  _In_     const D3DXVECTOR3 *pUp
); 
```

您正在创建一个查看矩阵，指定：

*   相机位于`v`向量的末端，
*   相机正在看`[0 0 0]`

您确定这是正确的，还是您可能正在寻找相反的结果？

第三，您将旋转矩阵应用于缩放的`Y`基向量`[0 length 0]`。如果您想要旋转矢量`v`，我认为您应该将其应用于缩放的`X`基矢量`[len 0 0]`。

# java - 示例没有错误但不会生成 Swing JPanel

> ID：12874092
> 
> 赞同：-2
> 
> 时间：2012-10-13T14:34:07.560
> 
> 标签：java, swing, jframe, jpanel, netbeans-7

我正在学习 Java，并想做我在[http://zetcode.com/tutorials/javagamestutorial/basics/找到的教程](http://zetcode.com/tutorials/javagamestutorial/basics/)

对于我在 Netbeans 中运行的第一个教程，我没有收到任何错误，也没有出现窗口。我需要在 Netbeans 中设置一个设置吗？

```
package tut01;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Tut01 extends JFrame{

    public Tut01(){
        add(new Board());
        setTitle("Tut01");
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setSize(300, 280);
        setLocationRelativeTo(null);
        setVisible(true);
        setResizable(false);
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        new Tut01();
    }
}

package tut01;
import javax.swing.JPanel;

public class Board extends JPanel{
    public Board(){
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:40:20.467

一个可能的问题是您需要[在 UI 线程 (EDT) 上](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)调用所有与 GUI 相关的代码- 试试这个看看它是否工作得更好：

```
public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {

        public void run() {
            new Tut01();
        }
    });
} 
```

完成此操作后，在 Netbeans 中，转到该`Tut01.java`文件并按 SHIFT+F6 运行该程序（如果您只是按 F6，您可能正在运行其他程序）。

可以在 Oracle 的网站上找到一个[很好的教程。](http://docs.oracle.com/javase/tutorial/uiswing/index.html)

注意：您的代码可以在我的机器上使用或不使用该更改。

# design-patterns - 享元设计模式如何最小化内存

> ID：12874098
> 
> 赞同：2
> 
> 时间：2012-10-13T14:34:49.647
> 
> 标签：design-patterns, flyweight-pattern

享元设计模式如何最小化使用的内存？对我来说，它看起来不是创建对象，而是只是将对象持有的数据外部化，这意味着使用的内存是相同的。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:39:54.637

享元模式背后的想法是你有一个*指向**共享*数据的小对象。

也就是说，对象的多个实例共享数据。

如果每个数据只有一个对象，它确实不会使用更少的内存，而是更多，因为您现在拥有数据和指向所述数据的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:01:28.037

Quoting from [http://www.oodesign.com/flyweight-pattern.html](http://www.oodesign.com/flyweight-pattern.html)

> The intent of this pattern is to use sharing to support a large number of objects that have part of their internal state in common where the other part of state can vary.

[Wiki article Flyweight](http://en.wikipedia.org/wiki/Flyweight_pattern)

> Flyweight is a software design pattern. A flyweight is an object that minimizes memory use by sharing as much data as possible with other similar objects; it is a way to use objects in large numbers when a simple repeated representation would use an unacceptable amount of memory.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T14:49:22.327

对齐和隐藏状态。大多数 OO 语言中的对象必须至少对齐 8 字节边界。32 位处理器只能有效地访问 4 字节边界的数据。除了对象自己的数据外，额外的空间还用于存储每个对象的隐藏类指针（4 字节）。代表一个位的两个对象则至少占用 16 个字节。在 64 位处理器上，它通常是 16 字节对齐。

在某些 OO 语言中，值对象用于处理小整数等常见情况。Smalltalk 实现具有 31 位小整数，并使用额外的位来指示这种情况。

# android - 无法启动接收器：android.os.NetworkOnMainThreadException 与 android JellyBean

> ID：12874099
> 
> 赞同：1
> 
> 时间：2012-10-13T14:34:56.883
> 
> 标签：android, json, multithreading, httprequest, android-4.2-jelly-bean

我正在尝试开发一个通过 json 资源每分钟更新一次的小部件，我的问题是当我尝试在 jellybean 上启动它时它会崩溃，而姜饼可以工作。

我在[这里](https://stackoverflow.com/questions/11347754/how-to-avoid-networkonmainthread-exception-without-using-asynctask)看到我必须将所有互联网连接移动到主线程，对吗？目前我有一个名为 HttpRequest 的类：

```
public class HttpRequest {    
    private String url;

    public HttpRequest(String url)
    {       
        this.url = url;
    }

    public String GetContent() throws ClientProtocolException, IOException
    {
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet(url);
        HttpResponse response = client.execute(request);

        String html = "";
        InputStream in = response.getEntity().getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        StringBuilder str = new StringBuilder();
        String line = null;
        while((line = reader.readLine()) != null)
        {
            str.append(line);
        }
        in.close();
        html = str.toString();
        return html;
    }
} 
```

每分钟都被称为 updateAppWidget() ，它是 WidgetProvider 类的一个方法。在 updateAppWidget() 里面有：

```
HttpRequest r = new HttpRequest("http://www.hwlogos.com/test.json");
remoteViews.setTextViewText(R.id.ip, r.GetContent()); 
```

你能告诉我如何陡峭地解决它吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T14:48:34.037

正如建议的那样，*AsyncTask*是要走的路。像这样更改您的代码：

```
private class HttpRequestTask extends AsyncTask<Context, Void, String> {

    private Context context;

    protected String doInBackground(Context... contextParam) {
        context = contextParam[0];
        HttpClient client = new DefaultHttpClient();
        HttpGet request = new HttpGet("http://www.hwlogos.com/test.json");
        HttpResponse response = client.execute(request);

        String html = "";
        InputStream in = response.getEntity().getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(in));
        StringBuilder str = new StringBuilder();
        String line = null;
        while((line = reader.readLine()) != null)
        {
            str.append(line);
        }
        in.close();
        html = str.toString();
        return html;
     }

     protected void onPostExecute(String html) {
         AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(context);
         RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget);
         remoteViews.setTextViewText(R.id.ip, html);
         appWidgetManager.updateAppWidget(new ComponentName(context, WidgetProvider .class), remoteViews);
     }
} 
```

请注意*onPostExecute*中的代码，它执行更新应用小部件所需的额外工作。

然后像这样启动异步任务：

```
 new HttpRequestTask().execute(context); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T14:43:34.417

您需要将网络连接*从*主线程移到后台线程。如果您在主线程上使用网络，更高版本的 Android 将使应用程序崩溃。

最直接的解决方案是使用一个`AsyncTask`，它将在一个单独的线程上做一些工作（做你的网络获取），然后让你在完成后在主线程上做后续工作。

[这篇文章](https://stackoverflow.com/questions/9671546/asynctask-android-example)中有一个示例，在 SO 或 Google 上可以找到许多其他示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:10:41.530

从下面的代码调用你的函数[来自线程]

第1步 ：

而不是这两行

```
HttpRequest r = new HttpRequest("http://www.hwlogos.com/test.json");
remoteViews.setTextViewText(R.id.ip, r.GetContent()); 
```

调用下面的代码行，

```
 Thread thread = new Thread()
    {
      @Override
      public void run() {
          try {

            // CALL YOUR FUNCTION FROM HERE
            HttpRequest r = new HttpRequest("http://www.hwlogos.com/test.json");            
            remoteViews.setTextViewText(R.id.ip, r.GetContent());

          } catch (Exception e) {
              e.printStackTrace();
          }
      }
    };

thread.start(); 
```

第2步：

如果上述功能对您不起作用，那么

使用此参考[链接](http://wptrafficanalyzer.in/blog/android-http-access-with-httpurlconnection-to-download-image-example/)。

我希望这对你有用。谢谢。

# c# - Curl 中的 400 错误请求

> ID：12874105
> 
> 赞同：2
> 
> 时间：2012-10-13T14:36:06.930
> 
> 标签：c#, curl, http-status-code-400, libcurl.net

几天来，我一直在尝试发布到服务器。但我收到一个错误的请求错误，即：

```
HTTP/1.1 400 Bad Request
Server: cloudflare-nginx
Date: Sat, 13 Oct 2012 14:25:32 GMT
Content-Type: text/html
Content-Length: 522
Connection: close

<html>
<head><title>400 Bad Request</title></head>
<body bgcolor="white">
<center><h1>400 Bad Request</h1></center>
<hr><center>cloudflare-nginx</center>
</body>
</html>
<!-- a padding to disable MSIE and Chrome friendly error page -->
<!-- a padding to disable MSIE and Chrome friendly error page -->
<!-- a padding to disable MSIE and Chrome friendly error page -->
<!-- a padding to disable MSIE and Chrome friendly error page -->
<!-- a padding to disable MSIE and Chrome friendly error page -->
<!-- a pad 
```

* * *

我的代码在这里（*我在 c# 上使用了**libcurl.net***）

```
Curl.GlobalInit((int)CURLinitFlag.CURL_GLOBAL_ALL);
Thread.Sleep(400);
try
{
    var curl = new Easy();

    Easy.WriteFunction wf = new Easy.WriteFunction(OnWriteData);

    curl.SetOpt(CURLoption.CURLOPT_URL, webpage);
    curl.SetOpt(CURLoption.CURLOPT_HEADER, true);
    curl.SetOpt(CURLoption.CURLOPT_TIMEOUT, "100");
    curl.SetOpt(CURLoption.CURLOPT_FOLLOWLOCATION, false);

    Slist sl = new Slist();

    sl.Append(String.Format("POST {0} HTTP/1.1\r\n\r\n", (new Uri(oyy.sayfa).PathAndQuery)));
    sl.Append(String.Format("Host: {0}", hostname ));
    sl.Append(String.Format("{0}", "Connection: keep-alive"));
    sl.Append(String.Format("Content-Length: {0}", param.Length));
    sl.Append(String.Format("Origin: {0}", originname));
    sl.Append(String.Format("{0}", "X-Requested-With: XMLHttpRequest"));
    sl.Append(String.Format("User-Agent: {0}",  "Mozilla/5.0 (Windows NT 6.1) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4")); 

    sl.Append(String.Format("{0}", "Content-Type: application/x-www-form-urlencoded"));
    sl.Append(String.Format("{0}", "Accept: */*"));
    sl.Append(String.Format("Referer: {0}",referans)); 
    sl.Append(String.Format("{0}", "Accept-Encoding: gzip,deflate,sdch"));
    sl.Append(String.Format("{0}", "Accept-Language: en-US,en;q=0.8"));
    sl.Append(String.Format("{0}", "Accept-Charset: utf-8;q=0.7,*;q=0.3*/"));
    sl.Append("\r\n\r\n");

    curl.SetOpt(CURLoption.CURLOPT_HTTPHEADER, sl); 

    curl.SetOpt(CURLoption.CURLOPT_COOKIEFILE, CookieFile);
    curl.SetOpt(CURLoption.CURLOPT_COOKIEJAR, CookieFile);
    curl.SetOpt(CURLoption.CURLOPT_COOKIE, "cokieee");
     curl.SetOpt(CURLoption.CURLOPT_PROXY, "http://127.0.0.1:9050");
    curl.SetOpt(CURLoption.CURLOPT_PROXYTYPE, CURLproxyType.CURLPROXY_SOCKS5);
    curl.SetOpt(CURLoption.CURLOPT_VERBOSE, false);
    curl.SetOpt(CURLoption.CURLOPT_WRITEFUNCTION, wf);

    curl.Perform();
    curl.Cleanup();
    curl.GlobalCleanup(); 

    string result = sourceContent.ToString();

----------

public Int32 OnWriteData(Byte[] buf, Int32 size, Int32 nmemb, Object extraData)
{
  string aa = System.Text.Encoding.UTF8.GetString(buf);
  this.sourceContent.Append(aa + " ");
  return size * nmemb;
} 
```

我认为这个问题是基于`CURLOPT_HTTPHEADER`. 我认为`sl`( *`SList`*) 不正确，或者我错过了添加一些内容。我上面的所有信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T14:37:22.970

根据 libcurl.net 文档，它说不要将 CRLF 添加到您传递给的标头中，`CURLOPT_HTTPHEADER`因为 libcurl.net 已经在请求中添加了 CRLF。您可能会遇到服务器无法正确获取某些标头值的问题。此外，不要将请求行添加到包含 POST 或 GET 的标头中。请参阅下面的文档摘录：

> Slist 中包含的标题不能以 CRLF 结尾，因为 curl 在每个标题项之后添加 CRLF。不遵守这一点将导致奇怪的错误，因为服务器很可能会忽略您指定的部分标头。
> 
> 请求中的第一行（通常包含 GET 或 POST）不是标头，无法使用此选项替换。只有请求行之后的行是标题。

# facebook-opengraph - 使用 php 在 facebook 中具有应用程序访问令牌时获取页面访问令牌

> ID：12874109
> 
> 赞同：0
> 
> 时间：2012-10-13T14:36:48.757
> 
> 标签：facebook-opengraph

当我拥有应用程序访问令牌和具有访问拥有该页面的用户的所有数据的授权的应用程序时，您对如何获取页面访问令牌有任何想法吗？

（我正在使用 php）

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:54:30.947

这是不可能的，您需要用户访问令牌才能访问`/me/acccounts`.

# mapping - matlab逆地图投影中x，y坐标的单位是什么？

> ID：12874111
> 
> 赞同：1
> 
> 时间：2012-10-13T14:37:01.737
> 
> 标签：mapping, matlab, map-projections

我有一组 x,y 坐标，表示 MATLAB 中米勒投影中大陆的轮廓。我正在尝试找出 MATLAB 映射工具箱，特别是[projinv](http://www.mathworks.com/help/map/ref/projinv.html)。该函数采用一组 (x,y) 坐标和一个投影，然后将它们转换为一组经度和纬度。

我感到困惑的是（x，y）坐标上的单位应该是什么。文档中的示例似乎将它们转换为测量英尺，但我找不到任何关于如何正确缩放输入映射的文档。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T05:01:56.800

不太清楚你在这里问什么......

文档中的波士顿道路示例将单位*从*测量英尺*转换为*米，然后将它们传递给`projinv`. 因此，(x,y) 应该以米为单位。

你是这个意思吗？

# php - PHP：替换某些标签之间的<？

> ID：12874116
> 
> 赞同：0
> 
> 时间：2012-10-13T14:37:39.583
> 
> 标签：php, preg-replace, replace

在 PHP 中，我有一个包含 HTML 和 javascript 的模板：

```
<script>
  if (a < b) {
    alert(a);
  } 
</script>
<div>
  hello
</div> 
```

使用该方法将其输入到 DOMDocument 中，但是由于脚本中的字符`loadXML`，这会产生错误。`<`我知道我可以改用该`loadHTML`方法，但现在我只需要一个快速修复来替换`script`标签内的 < 字符，然后再用`<`

所以问题是，替换`<`字符的最佳方法是什么，但只能在`script`标签内？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T14:40:40.517

如果您可以修改 HTML，最好的解决方案是使用`<![CDATA[`和`]]>`开始和结束标记用 CDATA 部分包装您的 JavaScript 代码。这将使文档成为有效的 XML，因此它可以被 XML 解析器解析。

```
<script>
// <![CDATA[

  if (a < b) {
    alert(a);
  } 

// ]]>
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:40:49.880

如果您使用 XML 解析器，请为您的脚本使用[CDATA 。](http://www.w3schools.com/xml/xml_cdata.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:42:11.183

下面有一种方法可以在给定的 XHTML 代码段中*转义脚本。*

这段代码：

```
<?php

$code = <<<'CODE'
<script>
  if (a < b) {
    alert(a);
  } 
</script>
<div>
  hello
</div>
CODE;

echo preg_replace(
    '@(\<script(?:\s+[^>]*)?\>)([[:alnum:][:punct:][:space:]]+)(\</script\>)@',
    "\\1\n//<![CDATA[\n\\2\n//]]>\n\\3",
    $code); 
```

产生这个：

```
<script>
//<![CDATA[

  if (a < b) {
    alert(a);
  } 

//]]>
</script>
<div>
  hello
</div> 
```

# salesforce - 访问链接到 Salesforce 中案例的未完成活动字段

> ID：12874120
> 
> 赞同：1
> 
> 时间：2012-10-13T14:38:14.667
> 
> 标签：salesforce

使用电子邮件发送案例我可以将电子邮件正文保存在案例的打开活动相关部分中。我想编写一个查询/方式以防万一触发器将附加到活动的电子邮件正文提取到字符串中，以便我可以解析它以获取某些值。

我正在使用查询 sObject 关系但无法到达任何地方...有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T21:52:52.027

如果您使用的是电子邮件转案例，那么电子邮件的正文应该已经嵌入到案例中了吗？

尝试这两个查询之一（当然提供一个适合您的 id）

```
select Id, FromAddress, HtmlBody, Incoming, Subject, TextBody, ToAddress 
FROM EmailMessage
WHERE ParentId = '500D000000KUXYP'

SELECT Id, Subject, (SELECT TextBody FROM EmailMessages)
FROM Case 
WHERE Id = '500D000000KUXYP' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T13:30:00.503

抱歉这么晚才回复。
我的问题的核心是解析销售人员收到的电子邮件。我停止了电子邮件到案例的方法，并使用了购买 Salesforce 提供的入站电子邮件处理程序，并通过扩展处理程序编写了我自己的 APEX 类。

在同一个类中，我访问了案例对象并更新了所需的字段。

# c++ - 如何在移动或缩放时覆盖 AcDbEntity::transformBy 以获取自定义实体转换？

> ID：12874124
> 
> 赞同：0
> 
> 时间：2012-10-13T14:39:08.910
> 
> 标签：c++, objectarx

我正在实现从 AcDbEntity 派生的自定义实体。我在重载的 subWorldDraw 函数中绘制了一些线条和文本标签，我希望我的实体能够被缩放、移动、旋转，所以据我所知，我应该重写 AcDbEntity::transformBy，如此处[所写](http://arxdummies.blogspot.com/2005/06/class-14-creating-custom-entity-step.html)。但是当我尝试添加这个方法时，编译器会出现一个错误，告诉我这个方法是密封的。还有其他方法可以让我的实体对用户完成的转换负责吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:50:07.913

我在[这里](http://through-the-interface.typepad.com/through_the_interface/objectarx/page/2/)找到了答案- 在新的 ObjectArx 版本中不是 AcDbEntity::transformBy，但可以覆盖 AcDbEntity::subTransformBy 方法。它还涉及其他虚拟方法，例如 AcDbEntity::worldDraw -> AcDbEntity::subWorldDraw。

# xmpp - 集群 Openfire 3.7.1

> ID：12874125
> 
> 赞同：0
> 
> 时间：2012-10-13T14:39:21.143
> 
> 标签：xmpp, openfire

我正在尝试对 openfire 3.7.1 进行集群，但仍然没有成功，也不知道问题出在哪里。以下是步骤：

*   首先，我从插件菜单安装集群插件 1.2.0。
*   然后我转到*服务器 -> 服务器管理器 -> 集群*菜单并得到*java.lang.NoClassDefFoundError: com/tangosol/net/Invocable*异常。在论坛上搜索，发现Clustering Plugin 需要Oracle Coherence。所以我下载了 Oracle Coherence v3.4.2 并将所有 jar 文件从 lib 目录复制到 openfire lib 目录。然后我重新启动openfire，现在集群菜单似乎没问题，没有发生异常。
*   我尝试从集群菜单启用集群。它指出启用集群可能需要 30 秒。但是在点击*保存设置*按钮后，该过程即使在 10 分钟后也不会停止。所以我停止了这个过程并重新启动了openfire。
*   我再次登录，一切似乎都很好。再次访问 Clustering 菜单，它显示集群已启用，并且列出并运行了 1 个节点。但是当我单击节点链接时，它什么也不做。此外，当我尝试访问“用户/组”菜单时，它显示 HTTP ERROR 500 with *org.jivesoftware.util.cache.DefaultCache cannot be cast to com.jivesoftware.util.cache.ClusteredCache*异常。

我的机器规格是：

*   Ubuntu 12.04
*   开火 3.7.1
*   具有 8 GB 内存的酷睿 i5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T21:03:33.647

这似乎是 1.2.0 插件的问题查看这篇文章以获得进一步的帮助：http: [//community.igniterealtime.org/message/218486#218486](http://community.igniterealtime.org/message/218486#218486)

# c++ - 错误：从 'const char*' 到 'char*' 的无效转换

> ID：12874128
> 
> 赞同：2
> 
> 时间：2012-10-13T14:39:28.943
> 
> 标签：c++

> **可能重复：**
> [将 strtok 与 std::string 一起使用](https://stackoverflow.com/questions/289347/using-strtok-with-a-stdstring)

```
#include<iostream>
#include <string>
#include <string.h>

using namespace std;

int main()
{
    string s("hello hi here whola");
    string background;
    char *strval;

    char* tok = strtok_r(s.c_str()," ",&strval);
    while(tok !=NULL)
    {
    cout << tok <<"\n";
    if (tok == "&")
        background = tok;
    else
    {
        statements1;
        statement2.. ;
    }
    tok = strtok_r(NULL, " ",&strval);
    }

    return 0;
} 
```

输出：

```
new.cpp: In function ‘int main()’:
new.cpp:13:47: error: invalid conversion from ‘const char*’ to ‘char*’ [-fpermissive]
/usr/include/string.h:359:14: error:   initializing argument 1 of ‘char* strtok_r(char*, const char*, char**)’ [-fpermissive] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T14:46:50.470

返回一个指向 const char的`s.c_str()`指针，以防止您修改备份内存。您需要制作此常量字符串的可写副本，例如 with `strdup()`function as`strtok()`真正修改您正在扫描令牌的字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:47:46.460

`strtok`修改它的论点。这是不允许的，`string.c_str()`因为它是一个*const* char*

此外，即使它有效，您`if( tok == "&" )`也不会工作，因为 tok 是一个字符 *，而不是字符串，因此您将进行指针而不是内容比较。

你需要使用`strcmp()`

既然您使用的是字符串，为什么不尝试使用其他 C++ 结构呢？

```
stringstream ss(s);
string tmp; 
while (ss >> buf) {
    if( buf == "&" ) background = buf; // one wonders why
    cout << buf << '\n';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T14:48:27.860

您的代码将 C++ `string`s 和`cout`s 与 C`strtok_r`函数混合。这不是一个好的组合。

您的错误的直接原因是`c_str()`返回一段`const char *`时间`strtok()`要求一个非常量`char *`。它想要修改您作为参数传递的字符串，并且不允许您修改`c_str()`返回的字符串。

如果你想做这种 C 风格，那么切换`s`到`char[]`.

```
char s[] = "hello hi here whola";
int background = 0;
char *strval;

char* tok = strtok_r(s, " ", &strval);
while (tok != NULL)
{
    printf("%s\n", tok);

    if (strcmp(tok, "&") == 0)
        background = 1;
    else
    {
        statement1;
        statement2;
        ...
    }

    tok = strtok_r(NULL, " ", &strval);
} 
```

# java - java中的数据库可以像Android中一样简单吗？

> ID：12874131
> 
> 赞同：0
> 
> 时间：2012-10-13T14:39:46.230
> 
> 标签：java, android, database

我想知道，为什么开发一个与 Java 上的 DBMS 一起工作的 Swing 应用程序必须如此复杂？

我希望它像使用 DBMS 开发一个 android 应用程序一样简单，这对于 android.database.sqlite 包来说非常简单......

具体来说，我想知道为什么它会让你使用 URL 连接到 DBMS，并且必须安装这么多背景复杂的东西才能让它开始工作？

你们知道一个类似于 DBMS 的 android 包的 java 包吗？或者有没有办法包含这个包并在一个普通的java项目中使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:43:44.103

我觉得你的问题太笼统了。
您可以通过多种方式在 Java SE/Java EE 中使用 SQLite。
例如——你看过[这里](http://code.google.com/p/sqlite4java/)吗？您应该了解访问关系数据库的标准方法是通过[JDBC](http://www.oracle.com/technetwork/java/javase/jdbc/index.html)。
Jdbc 为您提供了一个用于数据库访问的抽象 API，并且由于它支持许多 DB 供应商，
它例如支持加载属性 JDBC 驱动程序，该驱动程序为正在使用的 DB 供应商提供了特定于供应商的实现（例如 - mysql 和 oracle DB 有不同的 JDBC 驱动程序）。
据我所知，Android 并非如此——
它目前只有一个“数据库提供程序”——
SQLite，因此在 Android 开发的情况下，您可以跳过“供应商驱动程序加载”，因为您有一个供应商。

但是，有各种框架可以让您简化关系数据库的工作，例如[spring-jdbc](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:46:16.413

您的 java 程序可能会在 windows、linux、apple（或其他）机器上运行。它能够连接到 mysql、postgresql、sql server、oracle 或 sqllite。它需要能够在所有这些操作系统下潜在地连接到所有这些数据库。这种灵活性是有代价的。

您的 android 应用程序将在带有 sqllite 数据库的 android 操作系统上运行。这可以烘焙到操作系统中，让您的生活变得轻松。但该应用程序无法在 iOS 或 WinPhone 上运行。

# ruby-on-rails - 如何在现有的 Rails 应用程序中使用“Typo”gem，现在它作为单独的博客引擎运行？

> ID：12874134
> 
> 赞同：3
> 
> 时间：2012-10-13T14:39:53.747
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem

我经常指出错字博客引擎的来源，即[http://typosphere.org/stable.tar.gz](http://typosphere.org/stable.tar.gz)但是，如果我下载并执行以下操作：捆绑安装等。它作为一个单独的引擎运行。

我尝试将拼写错误安装为 gem，我尝试了以下操作：

```
gem install typo

typo install /some/path this fails, saying 'Typo command not found' 
```

如何将错字博客引擎与现有应用程序集成，欢迎任何指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T20:45:47.797

`Typo`是一个 Rails 项目。我很高兴地说，我曾经为它做出过贡献。
您在评论中询问，您希望在主应用程序中使用 Typo 数据库。为此，我建议您查看[connection_ninja](https://github.com/cherring/connection_ninja)。

但是，这些类型的配置有很多陷阱。

祝你好运。
PS：刚刚注意到这个问题是很久以前提出的。哎哟!

# android - Android apk 安装 - 解析包错误并挂载 /data/data... 路径

> ID：12874137
> 
> 赞同：1
> 
> 时间：2012-10-13T14:40:10.597
> 
> 标签：android, apk

我正在为私人发行做一个小型应用程序，这样我就不会使用 google play 来安装和更新应用程序。

在我的 MainActivity 中，我将通过 api 检查是否找到了应用更新。如果发现任何更新，我的应用程序将更新后的 apk 文件下载到 SDCard 上的**下载**文件夹中并通过以下方式安装：

```
intent.setDataAndType(Uri.fromFile(new File(destination)), "application/vnd.android.package-archive"); 
```

它工作正常，但我的问题是用户可以在**下载**文件夹中获取 apk 文件。所以我决定将文件下载到**/data/data/com.xxx.aaa**。这个思路，把文件下载到**/data...**路径下。但是我无法安装apk文件。`download folder`我通过以下代码确保 apk 文件存在于其中：

```
if(new File(destination).exists()){
  // apk file is present into download folder.
} 
```

我的方法显示**解析错误**如下：

![在此处输入图像描述](../Images/fc96f38dc9ab7272eb4ca56bbb88b8ef.png)

我的问题是：

如何从 /data.... 路径安装更新的 apk 文件？

我猜root权限是安装apk的问题。
请帮我。

**已编辑的问题：-** 要获得根访问我的应用程序，我运行以下命令：

```
try {
  Runtime.getRuntime().exec("su");
} 
```

执行此命令后，我可以列出 /data/data/com.xxx.aaa 路径。并且我已经验证了我下载的 apk 文件显示在此处。

要安装 apk，如评论中所述，我在各种选项中运行**mount**命令，但没有运气。如图所示，我得到**解析错误。**

我已经 通过以下方式尝试了**安装：**

```
1) mount -o rw,remount -t yaffs2 /dev/block/mtdblock3 /system
2) mount -o rw,remount -t yaffs2 /data/data.com.xxx.aaa/appinfo.apk
3) mount
4) mount /system 
```

我不知道挂载 /data/data/.... 路径的正确方法。如何挂载 /data/data/.... 路径。
请帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:29:57.490

**列出 /data/app/ 中的文件**

```
[1] su

[2] ls /data/app/ 
```

**从“/data/app/”文件夹中获取 apk**

```
# ls /data/app/ 
```

我正在关注 apk 列表

com.android.vending-1.apk

com.google.android.gms-1.apk

com.noshufou.android.su-1.apk

com.corusen.accupedo.te-1.zip

com.microsoft.office.lync-1.apk

com.okythoos.android.tdmpro-1.apk

com.devindia.acr-1.apk

例如，我想将“com.android.vending-1.apk”输出到 /sdcard

```
[1] su

[2] cat /data/app/com.android.vending-1.apk > /sdcard/com.android.vending-1.apk

[3] adb pull /sdcard/com.android.vending-1.apk /path-to-your-folder/ 
```

**将应用程序作为系统应用程序运行**

```
[1] adb push your-app.apk /sdcard/

[2] adb shell

[3] su

[4] mount -o remount,rw /system

[5] cat /sdcard/your-app.apk > /system/app/your-app.apk

[6] chmod 0644 /system/app/your-app.apk 
```

**从您的 Android 代码以 Root 用户身份运行命令：**

例如，如果您想以 root 用户的形式运行命令“chmod 0644 /system/app/your-app.apk”

**示例步骤：**

```
[1] Execute From Computer
adb push your-app.apk /sdcard/

[2] Execute From Android Code
Exec_SU("mount -o remount,rw /system");
Exec_SU("cat /sdcard/your-app.apk > /system/app/your-app.apk");
Exec_SU("chmod 0644 /system/app/your-app.apk"); 
```

这是上述函数“Exec_SU”的实现：

```
 public static void Exec_SU(String str_command) 
    { 
        // working well
        Runtime runtime = Runtime.getRuntime(); 
        Process proc = null; 
        OutputStreamWriter osw = null;    
        StringBuilder sbstdOut = new StringBuilder();   
        sbstdErr = new StringBuilder();

        String command=str_command;

        try { 
            // Run Script    
            proc = runtime.exec("su");   
            osw = new OutputStreamWriter(proc.getOutputStream());  
            osw.write(command);   
            osw.flush();     
            osw.close();     
            } catch (IOException ex) { 
                ex.printStackTrace();   
                } finally {       
                    if (osw != null) {     
                        try {      
                            osw.close();   
                            } catch (IOException e) { 
                                e.printStackTrace(); 
                                }      
                            }    
                    }   
                try {     
                    if (proc != null)    
                        proc.waitFor();  
                    } catch (InterruptedException e) {  
                        e.printStackTrace(); 
                        }   

    } 
```

我认为这会对你有所帮助。谢谢。

# ios - 推送通知查询

> ID：12874139
> 
> 赞同：-1
> 
> 时间：2012-10-13T14:40:14.857
> 
> 标签：ios, ios5, ios6, apple-push-notifications

我希望有人可以帮助我解决以下问题。
我的应用程序在应用程序商店中，它没有收到任何推送通知，我的生产推送 SSL 证书仅在昨天到期。
我是否需要生成新的生产推送 SSL 证书并放在服务器上。

请帮我解决这些问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T19:30:43.733

是的，您必须从 Apple 开发人员中心为您的应用程序获取更新的推送证书。之后，您必须将其放在您的服务器上（调整密码，...），然后您的服务器应该能够再次发送消息。

# sql - 当前命令发生严重错误。结果，如果有的话，应该被丢弃

> ID：12874143
> 
> 赞同：2
> 
> 时间：2012-10-13T14:40:56.493
> 
> 标签：sql, sql-server, tsql, sql-server-2012

在过去的几天里，我收到了很多下面的消息，不知道如何解决它们。我在我的许多处理过程中使用临时表。

> 消息 0，级别 11，状态 0，行 0。当前命令发生严重错误。结果，如果有的话，应该被丢弃

我所有的存储过程都`NO COUNT`设置为`ON`. 我不使用很多 CTE，并且在使用后删除了所有临时表。

我检查了日志文件`C:\Program Files\Microsoft SQL Server\MSSQL11.WORKBOX\MSSQL\Log`，但没有发现任何我认为可以解释发生在我身上的事情。我将不胜感激任何解决此问题的帮助。

# c# - 2012 年的 Claims Aware MVC 应用程序 - 注销

> ID：12874153
> 
> 赞同：0
> 
> 时间：2012-10-13T14:42:11.273
> 
> 标签：c#, asp.net-mvc, visual-studio-2012, wif

我在 .net 4.5 中创建了一个 MVC 4 应用程序并安装了身份和访问工具，以便我可以创建一个声明感知应用程序。我配置了应用程序，使其使用 2012 附带的新 LocalSTS，因此它不会像 2010 年那样创建 STS 网站。

如何在我的应用程序中支持注销方案？有没有我可以调用的方法`FormsAuthentication.SignOut`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T13:38:02.287

将 cookie 更改为持久性 cookie 并在注销单击或会话结束时使 fedauth cookie 过期怎么办？

RP 上的持久 Cookie：

```
<microsoft.identityModel>
      <federatedAuthentication>
        <wsFederation
            persistentCookiesOnPassiveRedirects="true" />
        <cookieHandler 
          persistentSessionLifetime="60.0:0:0" />
      </federatedAuthentication>
</microsoft.identityModel> 
```

并让 Cookie 过期

```
 var c = Request.Cookies["FedAuth"];
    c.Expires = DateTime.Now.AddDays(-1);
    Response.Cookies.Add(c);

    c = Request.Cookies["FedAuth1"];
    c.Expires = DateTime.Now.AddDays(-1);
    Response.Cookies.Add(c); 
```

在此之后您将需要重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T18:15:31.470

这真的很简单，只需调用 WSFederationAuthenticationModule 上的 SignOut 方法即可：

```
FederatedAuthentication.WSFederationAuthenticationModule.SignOut("/MyPostSignoutRedirectUrl"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-04T07:13:02.693

要处理注销请求，请执行以下步骤：

1.  点击退出链接后，清除联合cookie：System.Web.HttpContext.Current.Response.Cookies.Remove(stateKey);

2.  使用 WS-Federation 退出参数作为操作将浏览器重定向到模拟颁发者：

```
https://RelyingParty/SsoLogout.aspx?wa=wsignout1.0&wreply=...
```

WS-Federation 命令——wa=wsignout1.0 用于从颁发者注销。

1.  从 cookie 中检索 RP 列表并将注销清理命令发送给它们中的每一个：

```
https://RelyingParty1/SsoLogout.aspx?wa=wsignoutcleanup1.0,

```

```
https://RelyingParty2/SsoLogout.aspx?wa=wsignoutcleanup1.0,

```

```
https://RelyingParty3/SsoLogout.aspx?wa= wsignoutcleanup1.0

```

这允许所有依赖方执行注销操作。

它的工作方式如下：

wa GET 参数中定义的 wsignout1.0 和 wsignoutcleanup1.0 操作很容易被遵守 WS-Federation Passive Requestor Profile 的依赖方理解。这些操作允许从领域中的所有 RP 执行注销操作。

# android - 如何在 google play 中向用户发送我的应用程序有更新版本的通知？

> ID：12874160
> 
> 赞同：-1
> 
> 时间：2012-10-13T14:43:14.477
> 
> 标签：android, notifications

如何向已安装的用户发送有关更新的信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:56:36.673

您可以在下面的链接中使用推送通知，您可以获得有关它的详细信息

[http://developer.android.com/guide/google/gcm/index.html](http://developer.android.com/guide/google/gcm/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:26:01.607

这是我的做法：

1.  在某个服务器上放置一个文本文件，其中包含最新版本的“版本代码”
2.  在您的应用程序中，使用文本文件中的版本代码检查当前版本代码。如果有更新的版本代码 - 向用户显示通知。
3.  您可以在用户每次启动应用程序时检查，或编写每 1-2 周运行一次的服务（取决于您发布新版本的频率）

使用这种方法，您不需要拥有包含所有用户版本和 GCM reg id 的数据库。

希望这有帮助！

# django - 将 MultiValueDict 传递给 Django ModelForm

> ID：12874163
> 
> 赞同：0
> 
> 时间：2012-10-13T14:43:39.287
> 
> 标签：django, modelform

我正在使用 ModelForm 并使用保存原始帖子数据的 MultiValueDict 传递存储在数据库中的数据，形式为`u'first_name': [u'XX'], u'last_name': [u'']`等，但表单将值完全呈现给实际字段，包括`[u'']`包装其余部分。

如果我尝试将相同的 MultiValueDict 传递给常规表单，我不会遇到这个问题。

在将其分配为初始值之前，我对如何处理字典或处理数据一无所知。

**编辑：**

从帖子中获取数据并将其还原到表单的代码

```
if request_post_data is not None:
    self.form = self.FORM_CLASS(data=request_post_data)
    self.draft.raw_data = dict(request_post_data) # preserves multiple values per key
    self.draft.save()
else:
# conversion to MultiValueDict restores multiple values per key
self.form = self.FORM_CLASS(initial=MultiValueDict(self.draft.raw_data) if self.draft.raw_data else None)` 
```

`request_post_data`来自数据库中的序列化字段，实际值如下所示：

```
<MultiValueDict: {u'last_name': [u''], u'suffix': [u''], u'prefix': [u''], u'first_name': [u'XX'], u'middle_name': [u'']}> 
```

最终显示在我的表单中（当发送到 ModelForm 时）：

[实际形式](http://cl.ly/K8Dr)

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:49:25.950

为了使用实例和提供的 POST 查询字典实例化表单，您可以在视图中执行以下操作：

```
 project = get_object_or_404(Project.objects, pk=project_id)
    projectForm = ProjectForm(request.POST, 
                              instance=project) 
```

为了提供一些初始值，您必须使用初始关键字参数在字典中提供初始值。

```
projectForm = ProjectForm(initial={'name': 'my first project'}) 
```

# map - 如何终止 Amazon EMR 上正在运行的地图任务？

> ID：12874168
> 
> 赞同：3
> 
> 时间：2012-10-13T14:43:52.167
> 
> 标签：map, hadoop, amazon, emr

我有一份在 32 个现场实例上使用 Hadoop 0.20 运行的工作。它已经运行了 9 个小时，没有任何错误。在那段时间里它已经处理了 3800 个任务，但我注意到只有两个任务似乎被卡住并且已经单独运行了几个小时（显​​然响应是因为它们没有超时）。这些任务通常不会超过 15 分钟。我不想失去所有已经完成的工作，因为这花了我很多钱。我真的很想杀死这两个任务，让 Hadoop 重新分配它们或将它们视为失败。在他们停止之前，我无法从其他 3798 个映射中获得 reduce 结果！

但我不知道该怎么做。我考虑过尝试找出哪些实例正在运行任务，然后终止这些实例，但是

1.  我不知道如何找出哪些实例是罪魁祸首
2.  恐怕会产生意想不到的影响。

我如何杀死单个地图任务？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T20:09:21.440

通常，在 Hadoop 集群上，您可以通过发出以下命令终止特定任务：

```
hadoop job -kill-task [attempt_id] 
```

这将终止给定的地图任务并在具有新 ID 的不同节点上重新提交它。

要`attemp_id`导航到相关地图任务，请单击它并记下它的 ID（例如：尝试_201210111830_0012_m_000000_0 `Jobtracker`）`web UI`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-16T09:32:15.670

ssh 到 Lorand 提到的主节点，然后执行：

```
bin/hadoop job -list
bin/hadoop job –kill <JobID> 
```

# ruby-on-rails - 在 Rails 中更优雅的方式

> ID：12874169
> 
> 赞同：4
> 
> 时间：2012-10-13T14:43:54.840
> 
> 标签：ruby-on-rails, ruby

我有以下代码：

```
@countries = Country.find( :all, :order => 'name' )

@countries_with_tips = []

@countries.each do |country|
  if country.tips.any?
    @countries_with_tips.push( country )
  end
end 
```

我得到每个至少有一个小费的国家。一个国家有_很多小费，一个小费属于_一个国家

有用。但对于 Ruby 来说，这似乎有点不雅。有没有更好的办法？

提前致谢

理查德

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T14:45:45.113

```
@countries_with_tips = Country.joins(:tips).order(:name).uniq 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:23:44.920

```
@countries_with_tips = @countries.select{|country| country.tips.present? } 
```

# iphone - NSLog语句查看图片是否存在保存到相册

> ID：12874172
> 
> 赞同：1
> 
> 时间：2012-10-13T14:44:39.380
> 
> 标签：iphone, ios6, nslog

想检查 image0.png, image1.png, image2.png , image3.png, image4.png 是否真的存在。

```
 for (int i = 0; i<=61; i++) {
         NSString *imageName = [NSString stringWithFormat:@"image%d.png", i];
         UIImage *image = [UIImage imageNamed:imageName];
         UIImageView *imageView = [[UIImageView alloc] initWithImage:image]; 
    UIImageWriteToSavedPhotosAlbum(imageView.image, self, @selector(image: didFinishSavingWithError:contextInfo:), nil); 
```

如何编写 NSLog 语句来检查 image0.png, image1.png, image2.png , image3.png, image4.png 是否真的存在。每次它只保存 image0.png 图像。

感谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:03:49.503

你仍然可以使用 NSFileManager 的 fileExistsAtPath 方法来检查文件是否真的存在。

[UIImage imageNamed:] 从应用程序包中加载图像。因此，如果文件已经是捆绑包并且具有正确的名称作为您正在调用的文件，那么它应该已经被加载。尝试从您的设备/模拟器中删除应用程序并重新加载。此外，通过检查目标的“复制捆绑资源”构建阶段，确保将所有位图复制到捆绑包中。

另一个说明：在将 UIImage 保存到库之前将其加载到 UIImageView 中是没有用的，除非您需要将其用于其他一些处理......所以这行代码可能是多余的：

```
UIImageView *imageView = [[UIImageView alloc] initWithImage:image]; 
```

最后一行将变为：

```
UIImageWriteToSavedPhotosAlbum(image, self, @selector(image: didFinishSavingWithError:contextInfo:), nil); 
```

希望这可以帮助 ;）

# iphone - 状态消息损坏了我的 iPhone 应用程序中的主窗口

> ID：12874174
> 
> 赞同：0
> 
> 时间：2012-10-13T14:45:06.367
> 
> 标签：iphone, ios, uiview, cgrect, beginanimations

在我的 iOS 应用程序中，当按下按钮时会启动一个事件，并在屏幕底部显示一条状态消息，通知用户操作成功或失败。

状态消息出现和消失，代码如下。

这个显示消息

```
- (void) showMessage:(NSString*)text
{
        CGRect frame = [[self view] frame];

        if(statusView == nil)
        {
            messageViewWindow = [[UIWindow alloc] initWithFrame:CGRectMake(0, frame.size.height-29,
                                                       frame.size.width, 0)];

            statusView = [[StatusMessageView alloc] initWithFrame:CGRectMake(0, 0, frame.size.width, 0)
                                                             Text:text
                                                 andShowIndicator:NO];
            [messageViewWindow addSubview:statusView];
            [messageViewWindow makeKeyAndVisible];
        }

        UILabel *label = [statusView getTextLabel]; 
        UIImageView *imageView = [statusView getBackImageView];

        CGSize stringSize = [text sizeWithFont:[Constants getLabelFont]];
        int xCoordinate = (messageViewWindow.frame.size.width - stringSize.width)/2;

        [UIView beginAnimations:nil context:nil];
        messageViewWindow.frame = CGRectMake(0, frame.size.height-59, frame.size.width, 30);
        statusView.frame = CGRectMake(0, 0, frame.size.width, 30);
        label.frame = CGRectMake(xCoordinate,5,stringSize.width,20);
        imageView.frame = CGRectMake(0, 0, frame.size.width, 30);
        [UIView commitAnimations];  

        [NSTimer scheduledTimerWithTimeInterval:2.0f target:self selector:@selector(hideMessage) userInfo:nil repeats:NO];

} 
```

这个隐藏了消息

```
- (void) hideMessage
{
    UILabel *label = [statusView getTextLabel]; 
    UIImageView *imageView = [statusView getBackImageView];

    CGRect labelFrame = label.frame;

    [UIView beginAnimations:nil context:nil];
    messageViewWindow.frame = CGRectMake(0, [UIScreen mainScreen].applicationFrame.size.height-29, [UIScreen mainScreen].applicationFrame.size.width, 0);
    statusView.frame = CGRectMake(0, 0, [UIScreen mainScreen].applicationFrame.size.width, 0);  
    label.frame = CGRectMake(labelFrame.origin.x, 0, labelFrame.origin.y, 0);
    imageView.frame = CGRectMake(0, 0, [UIScreen mainScreen].applicationFrame.size.width, 0);
    [UIView commitAnimations];
} 
```

奇怪的是，消息显示并在两秒钟后消失，但是主窗口失去了功能，例如复制和粘贴功能。

你觉得我的方法有问题吗？有什么方法可以调用“动画”代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:04:06.703

既然你在写`[messageViewWindow makeKeyAndVisible];`，你必须写`[self.view.window makeKeyAndVisible]`进去`hideMessage`让 self.view.window 再次处理所有的用户交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:22:23.320

*   这是因为您使用 a`UIWindow`来显示您的视图，这不是一个好主意（不建议您`UIWindows`自己创建，如文档的“概述”段落中所述。
*   此外，您将窗口设置为关键窗口，但在隐藏它时不会在最后恢复标准窗口，因此您以后会遇到事件问题。
*   最后，你使用过时的 API 来制作动画，因为 iOS4 已经过时了（我猜你没有为 iOS3 或更早的版本编写代码），你真的应该使用现在 3 个 iOS 版本之前引入的新 API。此外，它将避免为此创建一个开销`NSTimer`。

所以你的代码可以变成：

```
- (void) showMessage:(NSString*)text
{
    CGSize sz = self.view.window.frame.size;
    CGRect hiddenFrame = CGRectMake(0, sz.height-29, sz.width, 0);

    if(statusView == nil)
    {
        statusView = [[StatusMessageView alloc] initWithFrame:hiddenFrame
                                                         text:text
                                             andShowIndicator:NO];
        [self.window addSubview:statusView];
    }

    UILabel *label = [statusView getTextLabel]; 
    UIImageView *imageView = [statusView getBackImageView];

    CGSize stringSize = [text sizeWithFont:[Constants getLabelFont]];
    int xCoordinate = (sz.width - stringSize.width)/2;
    label.frame = CGRectMake(xCoordinate,5,stringSize.width,20);
    imageView.frame = CGRectMake(0, 0, frame.size.width, 30);

    [UIView animateWithDuration:1.f animations:^{
        statusView.frame = CGRectMake(0, sz.height-59, frame.size.width, 30);
    } completion:^{
        // When show animation is done, schedule the start of the hide animation with a delay of 2 seconds
        [UIView animateWithDuration:1.f delay:2.f options:0 animation:^{
            statusView.frame = hiddenFrame;
        } completion:nil];
    }];
} 
```

# javascript - 在 Titanium 中获取电话号码（android）

> ID：12874175
> 
> 赞同：0
> 
> 时间：2012-10-13T14:45:21.510
> 
> 标签：javascript, titanium, appcelerator, titanium-mobile, appcelerator-mobile

如何在android中获取电话号码？

示例代码：

```
var contacts = Titanium.Contacts.getAllPeople();
Titanium.API.log(contacts[0].phone['mobile'][0]); //in iOS, returns "01012345678" fine :)
Titanium.API.log(contacts[0].phone['mobile'][0]); //in Android, returns ""  :(
Titanium.API.log(contacts[0].fullName); //in Android & iOS, returns "test Name" fine :)
Titanium.API.log(contacts[0].phone); //in Android, returns "" :( 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T07:20:57.407

试试下面的代码，它对我有用

```
//Getting all the contacts
var people = Ti.Contacts.getAllPeople();

//Getting the total number of contacts
var totalContacts = people.length;
//Checking whether the contact list is empty or not
if( totalContacts > 0 )
{
    for( var index = 0; index < totalContacts; index++ )
    {
       //Holding the details of a single contact
       var person = people[index];
      Ti.API.info("Mobile -> " + person['phone'].mobile + " home-> " + person['phone'].home);
    }
} 
```

请注意，您的手机应该在移动和家庭选项中有联系号码。我从我的 android 模拟器中添加了一个屏幕截图。试着给出这样的数字

![在此处输入图像描述](../Images/15b73d304b8bef74959598ad98c2ced3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T13:43:02.273

这段代码对我有用。它扫描电话簿中的所有联系号码，无论是移动电话还是家庭电话或其他任何电话号码。代码还会从数字中删除所有非数字字符：

```
var people = Ti.Contacts.getAllPeople();
for (var i=0, ilen=people.length; i<ilen; i++)
{
    var person = people[i];
    for(var temp in person.phone)
    {
        var temp_numbers = person.phone[temp];
        for(var k=0;k<temp_numbers.length; k++)
        {
            var temp_num = temp_numbers[k];
            temp_num = temp_num.replace(/[^\d.]/g, "");
        }
    }
} 
```

# operating-system - 内核代码与用户代码

> ID：12874177
> 
> 赞同：5
> 
> 时间：2012-10-13T14:45:35.370
> 
> 标签：operating-system, kernel, system-calls

这是书中的一段话

> 当执行内核代码时，系统在内核空间以内核模式执行。当运行常规进程时，系统在用户空间以用户模式执行。

现在真正的内核代码和用户代码是什么。有人可以举例解释吗？

假设我`printf("HelloWorld")`现在有一个应用程序，在执行这个应用程序时，它是用户代码还是内核代码。

我想在某个时间点，用户代码将切换到内核模式，内核代码将接管，但我想情况并非总是如此，因为我遇到了这个

> 例如，open() 库函数除了调用 open() 系统调用外几乎没有什么作用。还有其他 C 库函数，例如 strcpy()，应该（希望）根本不直接使用内核。

如果它不使用内核，那么它​​如何使一切正常工作？

有人可以用清晰的方式解释整个事情。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T15:04:49.430

内核代码和用户代码之间没有太大区别，代码就是代码。只是在内核模式下执行的代码（内核代码）可以（并且确实）包含只能在内核模式下执行的指令。在用户模式下，此类指令无法执行（出于可靠性和安全原因不允许执行），它们通常会导致异常并因此导致进程终止。

I/O，尤其是 RAM 以外的外部设备，通常由操作系统以某种方式执行，系统调用是访问执行 I/O 的代码的入口点。因此，`open()`并`printf()`使用系统调用在内核某处的 I/O 设备驱动程序中执行该代码。通用操作系统的全部意义在于对你、用户或程序员隐藏硬件的差异，所以你不需要知道或考虑访问这种网卡或那种显示器或磁盘。

内存访问，OTOH，大部分时间都可以在没有操作系统干预的情况下发生。并且`strcpy()`按原样工作：读取一个字节的内存，写入一个字节的内存，哦，它是零字节，顺便说一句？如果不是，请重复，如果是，请停止。

我说“大部分时间”是因为经常涉及到页面转换和虚拟内存，内存访问可能会导致切换到内核，因此内核可以将磁盘中的某些内容加载到内存中，并让导致切换的访问指令继续进行.

# ruby-on-rails-3 - Redis zrevrangebyscore，排序以外的字典顺序

> ID：12874181
> 
> 赞同：2
> 
> 时间：2012-10-13T14:46:05.573
> 
> 标签：ruby-on-rails-3, redis, leaderboard

我已经使用 redis 中的排序集实现了排行榜。我希望得分相同的用户按时间顺序排列，即先来的用户应该排名更高。目前 redis 支持字典顺序。有没有办法覆盖它。手机号码被用作排序集中的成员。

我想到的一种解决方案是在手机号码前附加时间戳并维护哈希以映射手机号码和时间戳。

```
$redis.hset('mobile_time', '1234567890', "#{Time.now.strftime('%y%m%d%H%M%S')}")
pref = $redis.hget('mobile_time, '1234567890'')
$redis.zadd('myleaderboard', "1234567890:#{pref}") 
```

这样，我可以在任何情况下通过从哈希中添加前缀来获得给定用户的排名。

现在这不是我想要的。这将与我想要的相反。早到的用户将排在晚到的用户下方（两者得分相同）。

```
Key for user1 = 201210121953**23**01234567890    score: 400
key for user2 = 201210121253**26**09313123523    score: 400 (3 seconds later) 
```

如果我使用 zrevrangebyscore，user2 的位置会高于 user1。

但是，有一种方法可以获得所需的排名：

```
users_with_higher_score_count = $redis.zcount("mysset", "(400", "+inf")
users_with_same_score = $redis.zrangebyscore("mysset", "400", "400") 
```

现在我有了正确排序的**users_with_same_score列表。**查看索引我可以计算用户的排名。

获得排行榜。我可以每隔 50 个获得成员，并通过 ruby​​ 代码对它们进行排序。但这似乎不是一个好方法。

我想知道是否有更好的方法来做到这一点。或者可以在我打算的解决方案中进行的任何改进。

在此先感谢您的帮助。

PS**分数是50的倍数**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T20:20:15.187

排序集中的分数支持双精度浮点数，因此可能更好的解决方案是将 redis 分数存储为 highscore.timestamp

例如（伪代码）

```
highscore = 100
timestamp = now()
redis.zadd('myleaderboard', highscore + '.' + timestamp, playerId) 
```

这意味着获得相同高分的多个玩家也将根据他们获得该高分的时间进行排序，如下所示

对于玩家 1...

```
redis.zadd('myleaderboard', '100.1362345366', "Charles") 
```

对于玩家 2...

```
redis.zadd('myleaderboard', '100.1362345399', "Babbage") 
```

有关更多详细信息，请参阅此问题：[Redis 排行榜的唯一评分](https://stackoverflow.com/questions/15348426/unique-scoring-for-redis-leaderboard/15349269)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:32:32.653

排序命令的外部权重功能是你的救星

```
 SORT mylist BY weight_* 
```

[http://redis.io/commands/sort](http://redis.io/commands/sort)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-04T03:31:14.010

如果您按分数降序显示排行榜，那么我认为上述解决方案不起作用。而不是只是附加`timestamp`在分数中，你应该附加`Long.MAX_VALUE - System.nanoTime()`所以你的最终分数代码应该像 -

```
highscore = 100
timestamp = Long.MAX_VALUE - System.nanoTime();
redis.zadd('myleaderboard', highscore + '.' + timestamp, playerId); 
```

现在，当您致电时，您将获得正确的订单`redis.zrevrange('myleaderboard', startIndex, endIndex)`

# sql-server - SQL Server：获取列的计数和总和

> ID：12874183
> 
> 赞同：0
> 
> 时间：2012-10-13T14:46:18.813
> 
> 标签：sql-server

我正在设计一个人们发布短信的网站。用户可以对消息进行评分（1 到 5）。我将此评级记录到表格中以：

1.  避免一个用户对同一个帖子进行多次评分
2.  能够获得帖子的平均评分。

但我也很重要，票数也很重要。例如，10 票 3 票（30 票）的帖子比 2 票 5 票（10 票）的帖子更有价值。现在，当我显示包含 20 条此类消息的页面时，我也想显示他们的评分

这是我的评分表：

```
create table ratings(
[id] int primary key identity(1,1),
[msgid] int,
[uid] int,
[rating] tinyint
) 
```

我想从消息表中获取 20 条消息，其中包含每条消息的评分总和以及每条消息的评分计数。

```
select 
    msg.id, msg.text,
    sum(rate.rating), 
    count(rate.id) 
from 
    messages as msg 
inner join 
    ratings as rate on msg.id = rate.msgid 
group by 
    msg.id 
```

任何人都可以帮我提供SQL查询代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:11:43.583

您不能选择未在`group by`子句中使用的列。

尝试：

```
select 
    msg.id, msg.text,
    sum(rate.rating), 
    count(rate.id) 
from 
    messages as msg 
inner join 
    ratings as rate on msg.id = rate.msgid 
group by 
    msg.id**, msg.text** 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T15:16:56.183

您需要`group by`与`select`. 另外，考虑零评级，所以使用左连接：

```
SELECT
    msg.id,
    msg.text,
    SUM (COALESCE (rate.rating, 0) )   AS ratingSum,
    COUNT (COALESCE (rate.id, 0) )     AS ratingCnt
FROM
    messages as msg
LEFT JOIN
    ratings rate ON msg.id = rate.msgid
GROUP BY
    msg.id,
    msg.text 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:00:09.323

我认为这会奏效。

```
select msgid,
count(msgid) MsgCount,
       sum(rating)  RatingSum
from ratings
where msgid = [some msgid]
group by msgid, rating 
```

这应该适用于大多数 ANSI 标准事务 sql 平台。您可能必须针对您的特定数据库对其进行修改。

谢谢，--James Walsh Jr.--开发者

# c# - 将 Word 转换为 PDF - 禁用“保存”对话框

> ID：12874185
> 
> 赞同：4
> 
> 时间：2012-10-13T14:46:30.260
> 
> 标签：c#, pdf, ms-word

我有一个用 c# 编写的 Word 到 PDF 转换器，除了一件事外，它工作正常。有时（在某些 Word 文件上）在后台有一条消息，**在源文件中保存更改 - > YES NO CANCEL** - 但我没有对源文件进行任何更改。我只想从 Word 文件创建一个 PDF 文件，而不做任何更改。

那么是否有可能禁用此提示，或自动设置为“否”。?

这是我的代码：

```
// Create an instance of Word.exe
        Microsoft.Office.Interop.Word._Application oWord = new  Microsoft.Office.Interop.Word.Application();

        // Make this instance of word invisible
        oWord.Visible = false;

        oWord.DisplayAlerts = Microsoft.Office.Interop.Word.WdAlertLevel.wdAlertsNone;

        oWord.Options.SavePropertiesPrompt = false;
        oWord.Options.SaveNormalPrompt = false;

        // Interop requires objects.
        object oMissing = System.Reflection.Missing.Value;
        object isVisible = true;
        object readOnly = true;
        object oInput = input;
        object oOutput = output;
        object oFormat = format;

        // Load a document into our instance of word.exe
        Microsoft.Office.Interop.Word._Document oDoc = oWord.Documents.Open(ref oInput, ref oMissing, ref readOnly, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref isVisible, ref oMissing, ref oMissing, ref oMissing, ref oMissing);

        // Make this document the active document.
        oDoc.Activate();

        // Save this document in Word 2003 format.
        oDoc.SaveAs(ref oOutput, ref oFormat, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing, ref oMissing);

        // Always close Word.exe.
        oWord.Quit(ref oMissing, ref oMissing, ref oMissing); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T14:55:56.280

您是否尝试将 false 作为 Quit 的第一个参数传递？

# normalization - 这种关系在第四范式中如何？依赖是微不足道的吗？

> ID：12874192
> 
> 赞同：1
> 
> 时间：2012-10-13T14:47:13.743
> 
> 标签：normalization

我有一个关于多值依赖的问题。关系如下所示：

```
R(A,B) with A -->> B (A multi value determines B) 
```

有人告诉我这种关系是第四范式，但我真的不知道如何。我知道如果多值依赖是微不足道的，那么它不会违反第四范式。但这微不足道吗？例如，如果它看起来像这样，那将是微不足道的：

```
{A,B} -->> B 
```

但是第一个依赖示例不应该是微不足道的。

第四个 NF 的另一条规则说，在这种情况下，A 需要是关系的超级键，但事实并非如此。据我所知， A 不是超级键，因为需要 {A,B} 来识别元组。

所以问题是，为什么这是第四范式？这似乎违反了两条规则。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T15:35:19.930

我找到了答案！似乎琐碎的规则有两个部分。

如果 B 是 A 的子集，或者如果 A 联合 B 是整个关系，则 A -->> B 是微不足道的。

这就是为什么关系是第四范式的原因。在这种情况下，A 和 B 是整个关系！

# ruby-on-rails-3 - 运行rails服务器时main：Object（NameError）的未定义局部变量或方法`config'

> ID：12874197
> 
> 赞同：0
> 
> 时间：2012-10-13T14:47:54.900
> 
> 标签：ruby-on-rails-3, authentication, authlogic

嗨，我一直在关注 railscasts 中的**authlogic** gem 教程... [http://railscasts.com/episodes/160-authlogic?view=asciicast](http://railscasts.com/episodes/160-authlogic?view=asciicast)

从教程中，我被要求添加`config.gem "authlogic"`到我的 environment.rb

这是安装gem的旧方法吗？或使authlogic工作的正确方法？

我删除了`config.gem "authlogic"`并尝试`gem install authlogic`通过将其`gem 'authlogic'`放入我的 Gemfile 来安装 gem（然后捆绑它）

Authlogic 提供自动表单验证（当没有输入或什么时）

但它不起作用。可能是我没有正确安装 authlogic gem？

您认为我的 Authlogic gem 无法正常工作的问题是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:48:27.783

鉴于 Railscast 的时代，安装过程已经过时是一个不错的选择。幸运的是，[authlogic github 页面](https://github.com/binarylogic/authlogic)不仅更新了安装说明（正如您所期望和预测的那样，它会添加`gem 'authlogic'`到您的 Gemfile 中），它还包含指向各种教程和文档的链接。希望您可以使用这些来解决您的问题。

# c++ - for循环c ++中的条件

> ID：12874198
> 
> 赞同：1
> 
> 时间：2012-10-13T14:48:03.347
> 
> 标签：c++, stl

我有一个接收两个无符号长参数 zInit 和 zFinal 的函数，我想编写一个从 zInit 到 zFinal 的 for 循环，包括这些值。

目前我正在这样做：

```
int delta= (zFinal>=zInit?1:-1);

for (unsigned long k=zInit; k!=zFinal;k+=delta)
{

} 
```

问题是我想根据 zFinal 和 zInit 之间的比较来指定条件“小于或等于”或“大于或等于”，就像我对 delta 所做的一样。什么是一个好的 C++ 解决方案？我不想写两个循环，也不想单独处理值 zFinal。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:58:45.987

You have already compared zInit and zFinal; so:

```
for (unsigned long k=zInit; delta > 0 ? k <= zFinal : k >= zFinal ; k += delta) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:54:04.597

```
for (unsigned long k=zInit; k*delta <= zFinal*delta; k+=delta) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T14:50:11.097

相同的解决方案：

```
for (unsigned long k=zInit; zFinal>=zInit ? k<=zFinal : k>=zFinal ;k+=delta) 
```

# google-chrome-devtools - 有没有办法从api或命令导出chrome开发工具数据

> ID：12874200
> 
> 赞同：2
> 
> 时间：2012-10-13T14:48:17.537
> 
> 标签：google-chrome-devtools

我可以通过与chrome远程调试端口通信来获取Chrome开发者工具网络面板的数据吗？可以保存为har格式文件，但我想通过一些脚本保存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:52:01.297

您可以右键单击查看网络数据的 Sources 面板，并将整个视图另存为 HAR 文件，或将单个文件另存为 HAR 文件。然后您可以将确切的数据导入 chrome，这将为您提供从特定数据加载中返回的所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T10:12:06.037

我假设您想从您的客户那里获取您的网络应用程序性能信息。

[`window.performance`](https://developer.mozilla.org/en-US/docs/Navigation_timing)有很多关于您的页面如何加载以及文档准备就绪的所有时间`DOMContentLoaded`以及许多其他非常高分辨率的信息的信息。

无论如何，这不如开发人员工具中的*网络*面板那么详细，如果您真的想取回该信息，您应该要求您的用户手动获取该信息并将其发送给您，或者要求他们安装一个 chrome 扩展来完成这项工作你。

# ruby-on-rails - 在没有互联网连接的情况下安装 RVM 本身

> ID：12874201
> 
> 赞同：3
> 
> 时间：2012-10-13T14:48:26.280
> 
> 标签：ruby-on-rails, ruby, rvm

我正在从 DJANGO 切换到 Rails，但我不知道如何在 PROD 环境中安装 RVM。

我的 PROD 服务器没有互联网连接，甚至有一段时间都无法连接。而且我找不到 RVM 的独立安装包。

有没有离线 RVM 安装的解决方案？

顺便说一句，可以在没有互联网的情况下安装导轨吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T20:54:51.170

我刚刚花了一些时间为离线模式构建了一个教程：[https](https://rvm.io/rvm/offline) ://rvm.io/rvm/offline - 这是第一个版本，所以请随时在这里改进它：[https ://github.com/wayneeseguin/rvm- site/blob/master/content/rvm/offline.md](https://github.com/wayneeseguin/rvm-site/blob/master/content/rvm/offline.md)（编辑按钮）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T02:17:52.313

除了我的第一个答案之外，另一种方法是在**在线**机器上编译 ruby​​，然后打包它，在另一端解包并将其添加到**离线**机器上的 PATH 中。

## 方式 1 - 只有 Ruby

```
curl -L https://get.rvm.io | bash -s stable
source $HOME/.rvm/scripts/rvm
rvm install 1.9.3 --movable
rvm prepare 1.9.3 
```

将显示一些信息，包括文件名。将其复制到离线机器并在那里解压，然后将其添加到`PATH`：

```
echo 'PATH=$PATH:${unpacked_dir}/bin' >> ~/.bashrc 
```

## 方式 2 - 整个 RVM：

```
curl -L https://get.rvm.io | sudo bash -s stable
source /usr/local/rvm/scripts/rvm
rvm use 1.9.3 --install
gem install rails -v 3.2.8
rails new rails3
rvm use 1.8.7 --install
gem install rails -v 2.3.14
rails new rails2
tar czf rvm_and_ruby.tgz /usr/local/rvm /etc/rvmrc /profile.d/rvm.sh 
```

离线端解包：

```
cd /
sudo tar xzf rvm_and_ruby.tgz 
```

并打开一个新终端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T14:54:07.710

检查[http://railsinstaller.org/](http://railsinstaller.org/)（适用于 windows 和 mac）。然后将环境更改为生产模式。在 linux 中这有效`export RAILS_ENV=production`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T18:01:16.597

如果您使用的是 linux 操作系统，您始终可以将应用程序打包为 debian 或 rpm 存档，其中将包含 Rails 和 Gemfile 中引用的依赖 gem。这种方法的优点是您还可以配置存档以设置外部依赖项，就像任何其他 deb 或 rpm 包一样。我最近的一个项目提出了一个内部解决方案。现在有了[pkgr之类的工具](http://crohr.me/pkgr/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T18:45:58.387

你可以在这里下载一个独立的 RVM 包：[https ://github.com/wayneeseguin/rvm/tags](https://github.com/wayneeseguin/rvm/tags)

您可以参考[RVM 安装程序脚本](https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer)以了解有关 RVM 安装功能的详细信息。只需将网络调用替换为对某些本地文件的引用，就可以了。

也就是说，一旦安装了 RVM，我不确定它是否能让您轻松地进行离线 Ruby 安装，但这应该可以帮助您入门。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-13T14:52:04.400

那么你需要从某个地方下载源代码来安装 RVM，Rails。不太清楚您的 Prod 环境如何缺乏互联网连接。你能提供更多细节吗？

# windows - 如何通过 fileID 打开文件然后使用 BackupRead API？

> ID：12874210
> 
> 赞同：0
> 
> 时间：2012-10-13T14:48:58.973
> 
> 标签：windows, winapi, filesystems, backup, ntfs

我想按 ID 打开一个文件，然后在 Win32 API 中使用生成的句柄`BackupRead()`

这可能吗？我不确定是否可以使用来自`NtCreateFile()`其他 Win32 API 的句柄？

例如，我可以这样做吗

```
NtCreateFile(&handle, ..., FILE_OPEN_BY_FILE_ID, ....)
BackupFile(handle, ....) 
```

我对使用感到有些困扰`NtCreateFile`，它在[MSDN](http://msdn.microsoft.com/en-us/library/bb432380%28v=VS.85%29.aspx)上有很好的记录， 但他们也提到可能会出现兼容性问题

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:40:19.363

我不确定我是否 100% 了解您的问题是什么，并且我不知道任何名为`BackupFile()`.

如果您想要重用`NTCreateFile()`with中的句柄**`BackupRead()`**，那么这样做应该很好，只要文件句柄是使用正确的标志和权限打开的。

一定要`NTCreateFile`带`FILE_OPEN_FOR_BACKUP_INTENT`旗子打电话：

```
NtCreateFile(&handle, ..., FILE_OPEN_BY_FILE_ID|FILE_OPEN_FOR_BACKUP_INTENT, ....) 
```

如果您打算将生成的句柄传递给`BackupRead()`.

# c# - 如何从外部 try/catch 传递值以捕获块（不使用全局变量）

> ID：12874217
> 
> 赞同：1
> 
> 时间：2012-10-13T14:49:44.010
> 
> 标签：c#, .net, multithreading, try-catch, task-parallel-library

看看下面的代码：

```
try
{
    Parallel.Foreach(...)//50 Thread For Each Time
    {
        string str = MyMethod();
    }
}
catch
{

}
public string MyMethod()
{
     CookieContainer cookieJar = new CookieContainer();

     // Some code that throws an exception.
} 
```

我怎样才能传递`cookieJar`到 catch 块？

**注意：**
由于某种原因，我不能使用全局变量。我正在使用`Parallel.ForEach`in并且由于并行更改`try`，我无法控制内部的全局变量。`MyMethod`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T15:01:43.270

您可以捕获异常`MyMethod`并重新抛出一个新的异常来保存该`CookieContainer`对象：

```
try
{
    Parallel.ForEach(...)
    {
        string str = MyMethod();
    }
}
catch (AggregateException ae)
{
    // This is where you can choose which exceptions to handle.
    foreach (var ex in ae.InnerExceptions.OfType<MyCookieException>())
    {
        CookieContainer c = ex.CookieContainer;

        // Do stuff with CookieContainer.
    }
}

public string MyMethod()
{
     CookieContainer cookieJar = new CookieContainer();
     try
     {
         // Some code that throws an exception
     }
     catch (Exception ex)
     {
         throw new MyCookieException(ex, cookieJar);
     }
} 
```

# javascript - 将数组中的每个值推送到多个子数组

> ID：12874218
> 
> 赞同：0
> 
> 时间：2012-10-13T14:49:56.690
> 
> 标签：javascript, push, arrays

我想在javascript中给出一个数组和一个数字变量来从数字创建新数组，然后将“大”数组的每个成员推送到子数组。数组中的第一个值进入第一个子阵列，第二个进入第二个子阵列，第三到第三个等。这是我如何使用 2 个阵列：

```
r1=new Array();  
r2=new Array(); 

for(var i=0; i<array.length; i++){
  if(i%2 == 0){
    r1.push(array[i]);
  } 
  else
  {
    r2.push(array[i]);
  }
} 
```

假设我们有一个数字变量，意思是子数组，我们就必须这样做

```
for(var j=0;j<number;j++){
  r[j]=[];
} 
```

什么是最好的解决方案？也许 array.map 可以帮助？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:00:06.437

这是用于拆分 N 个数组的通用解决方案。它返回结果数组的数组。

```
function splitArray(src, num) {
    var result = [], i;
    // initalize output arrays
    for (i = 0; i < num; i++) {
        result.push([]);
    }
    // split results among the various output arrays
    for (i = 0; i < src.length; i++) {
        result[i % num].push(src[i]);
    }
    return(result);
} 
```

# php - php preg_replace 无法识别模式

> ID：12874220
> 
> 赞同：1
> 
> 时间：2012-10-13T14:50:04.047
> 
> 标签：php, regex

我正在尝试制作一个所谓的文本清洁器，以便在不使用该`strip_tags()`功能的情况下摆脱一些 html 元素。

我的正则表达式如下所示：`<em>|</em>|<p[^>]*>|</p[^>]*>|<span[^>]*>|</span[^>]*>|<div[^>]*>|</div[^>]*>|&nbsp;|<table[^>]*>(.*?)</table[^>]*>`

我的代码如下所示：

```
$string = "some very messy string here ";
$pattern = '<em>|</em>|<p[^>]*>|</p[^>]*>|<span[^>]*>|</span[^>]*>|<div[^>]*>|</div[^>]*>|&nbsp;|<table[^>]*>(.*?)</table[^>]*>';
$replace = ' ';

$clean =  preg_replace($pattern, $replace, $string);

echo $clean; 
```

由于我无法理解的原因，回声没有返回任何内容。

感谢您的时间

**更新#1**

如果您问我是否要删除包含所有内容的表格，答案是肯定的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T14:52:45.733

您的正则表达式需要分隔符。例如：

```
$pattern = '~<em>|</em>|<p[^>]*>|</p[^>]*>|<span[^>]*>|</span[^>]*>|<div[^>]*>|</div[^>]*>|&nbsp;|<table[^>]*>(.*?)</table[^>]*>~'; 
```

[在此处](http://www.php.net/manual/en/regexp.reference.delimiters.php)阅读分隔符。

另请注意，一些 HTML 规范（据我所知，除了 XHTML 之外的所有规范）也允许大写标签。因此，请考虑在正则表达式中添加不区分大小写的修饰符。此外，如果开始标签和结束标签之间有换行符，则删除表格可能不起作用（因为`.`默认情况下不匹配换行符）。添加 DOTALL 修饰符`s`来解决这个问题：

```
$pattern = '~<em>|</em>|<p[^>]*>|</p[^>]*>|<span[^>]*>|</span[^>]*>|<div[^>]*>|</div[^>]*>|&nbsp;|<table[^>]*>(.*?)</table[^>]*>~is'; 
```

最后一点：正如其他人指出的那样，对 HTML 问题的正则表达式解决方案应该持保留态度。嵌套表会导致问题，注释也会。如果您非常了解要处理的数据，那么问题可能比一般 HTML 简单得多。但请确保您的代码至少是有效的，并且您知道所有奇怪的东西，例如嵌套结构和注释中的 HTML 字符等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T14:59:08.170

首先看看[这个答案](https://stackoverflow.com/a/1732454/264395)。这应该从一开始就把事情做好。如果您阅读完答案后仍想继续，我给您以下内容：

```
I want to <em<p>>emphasize</<p>em> that it's not possible! 
```

试着清理它！

# javascript - 更改文档标题不起作用

> ID：12874225
> 
> 赞同：-2
> 
> 时间：2012-10-13T14:50:55.567
> 
> 标签：javascript, jquery, title

我正在尝试将通知编号添加到函数的标题中，但它不起作用。这是我的代码：

```
 var docTitle = document.title;

  document.title = "".docTitle." (".$(".loadnot").html().")"; 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-13T14:52:32.827

在 JavaScript 中，您应该使用`+`连接 not `.`。

```
document.title = docTitle + "(" + $(".loadnot").html() + ")"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T14:53:08.530

甚至更好：

```
document.title += " ("+$(".loadnot").html()+")"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2019-11-25T10:36:39.583

检查这个：

```
window.top.document.title = "Your Title"; 
```

# c++ - 使用 getline()

> ID：12874226
> 
> 赞同：1
> 
> 时间：2012-10-13T14:50:58.750
> 
> 标签：c++

嗨，有人可以向我解释为什么这两个程序不同吗？

```
int main (){
    string line;
    while (getline(cin,line)){
        cout << line;
    }
} 
```

* * *

```
int main (){
    string line;
    while (getline(cin,line)){
        cout << line << endl;
    }
} 
```

似乎第二个程序打印了所有内容，而第一个程序由于某种原因只会打印最后一行。我正在处理一项从具有 IO 重定向的文件中抓取行的任务，但是当我想打印这些行时，我不得不打印一个换行符来取出所有行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T14:57:02.337

`getline`丢弃输入末尾的换行符。但是，在 Windows 上，换行符实际上是`\r\n`，即回车后跟换行符。因此，`getline`最终存储了一个以回车符结尾的字符串。

当您打印以回车结尾的行时，控制台将打印文本并将光标返回到行的开头（因为这就是回车的作用）。通常，换行符会将光标推到下一行，但由于文本不包含换行符，因此下一行从当前行的开头开始打印——覆盖当前行。这就是为什么你只看到最后一行。

因此，如果要打印行，则必须输出`endl`丢弃的行`getline`。

# java - 阅读每个单词和后面的两个单词并检查java中的一些条件

> ID：12874229
> 
> 赞同：0
> 
> 时间：2012-10-13T14:51:18.443
> 
> 标签：java, exception, exception-handling

我需要阅读一个文件并检查每个单词后面是否有某些“两个单词”，例如，John Smith 先生。所以，当我阅读文件时，我面对 Mr. 这个词，我应该检查 Mr. 后面的两个词，看看它们是否是“John Smith”，并计算发生了多少次。我写了以下程序

```
 BufferedReader reader = new BufferedReader(new InputStreamReader(new FileInputStream  ("TestF.txt"));
String line=reader.readLine();
    HashMap<String, Integer> wordCount = new HashMap<String, Integer>();

    while(line!=null)
    {
        String[] tokens= line.split(" ");
        for (int i=0; i<tokens.length; i++)
        {
                 if tokens[i].equals("Mr.")
                         {              

            if(!(tokens[i+1].isEmpty()))
            {
                if (tokens[i+1].equlas("John")
                                       String s= "John";
                                     else 
                                        s= "Other Name";
            }
            else
                        s="";
        if(!(tokens[i+2].isEmpty()))
            {
                 if (tokens[i+1].equlas("Smith")
                              String s2= "Smith";
                          else 
                              s2= "Other Name";                 
            }
            else
                      s2="";
            if (s.equals("John")&&s2.equals("Smith"))
            {
           if (wordCount.containsKey(tokens[i]))
                wordCount.put(tokens[i], wordCount.get(tokens[i]).intValue()+1);
        else
              wordCount.put(tokens[i], 1);
            }

                       }
        // Go to the next line
        line=reader.readLine();
    } 
```

以下行有问题

```
if(!(tokens[i+1].isEmpty())) 
```

`if(!(tokens[i+2].isEmpty()))`实际上它说：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 26 
```

是否因为文件中的最后一个单词后面没有两个单词而发生这种情况？如果我的猜测是正确的，我该如何纠正它，以便我可以在文件的最后一个单词中停下来。如果我的猜测是错误的，请告诉我原因。注意：这只是显示我的问题的示例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T14:53:04.957

> 是否因为文件中的最后一个单词后面没有两个单词而发生这种情况。

对，那是正确的。

> 如果我的猜测是正确的，我该如何纠正它，以便我可以在文件的最后一个单词中停下来。

只需首先检查您是否超过了数组的长度：

```
if ((i + 1) < tokens.length && !(tokens[i+1].isEmpty())) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T14:56:44.137

是的，这可能就是问题所在。只需将循环设置为`tokens.length-2`如下所示：

```
for(i=0; i < tokens.length - 2; i++) {
   ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T14:55:07.873

您总是可以在处理之前检查令牌是否为空，在对它执行任何处理之前确保所有变量/数据结构都有效是一个很好的做法。

# mysql - 在没有 html 表单的情况下将数据插入 SQL

> ID：12874233
> 
> 赞同：0
> 
> 时间：2012-10-13T14:51:38.317
> 
> 标签：mysql, forms, post

我是一名初学者网络开发人员，我正在编写一个小项目，主要是为了学习实践。

我现在正在编写一个从用户那里收集数据的`HTML`页面（使用**JavaScript**）。HTML 页面相当复杂，当用户填写完所有字段时，并非所有数据都在表单中——其中一些数据是由*JavaScript*计算并存储在某些 HTML 元素中`localstorage`或`attribute`某些 HTML 元素中的。

如何将数据提交到`MySQL`数据库？（使用带有`POST`in 的方法`PHP`，比如[这个](http://www.w3schools.com/php/php_mysql_insert.asp)，只允许发送`<input>`标签中的数据）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:01:10.330

您必须使用 ajax(Asychronous Javascript And Xml) 将数据发送到服务器，或者您可以使用 jQuery 来执行此操作.. 例如：`$.ajax({ type: "get", url: some_php_script.php, data: {"list": list_data}, success: function(data){ do some work here with the data recieved } });`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:01:18.863

您只需将值发送到 PHP 脚本，然后您就可以为所欲为。您可以使用 javascript 来：

*   通过`XmlHttpRequest`或“AJAX”发布值：
*   在提交之前使用适当的值将 s添加`<input>`到您的表单（这些可以在视觉上隐藏或使用`type="hidden"`）

如果您刚刚开始使用 PHP、MySQL 或任何语言 - 尽量避免使用 w3schools 获取信息。您链接到的页面有一个经典的[SQL 注入](https://stackoverflow.com/questions/332365/xkcd-sql-injection-please-explain)示例，并使用了[已弃用](http://php.net/manual/en/function.mysql-connect.php) `mysql_*`的函数。在开始之前，请参阅 PHP 手册中的[选择 API 。](http://php.net/manual/en/mysqlinfo.api.choosing.php)

# mysql - 通用更新存储过程

> ID：12874246
> 
> 赞同：-2
> 
> 时间：2012-10-13T14:53:08.193
> 
> 标签：mysql

我正在寻找一个通用存储过程，它可以更新任何表中的任何字段值，包括 DATE 或 INT 或 VARCHAR 类型的字段。如何使用预配置的通用变量来完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T00:06:32.780

```
UPDATE tbl SET date_col='2012-10-14', int_col=12345, char_col='foobar' WHERE ... 
```

# java - “IndexOutOfBoundsException”因为空值？

> ID：12874251
> 
> 赞同：0
> 
> 时间：2012-10-13T14:54:02.343
> 
> 标签：java, sql, jdbc, derby

请看下面的代码

**数据库处理程序.java**

```
public List getDetails(String name)
    {
        List details = new ArrayList();

        name = name.replaceAll("\\s+", "").toUpperCase();
        try
        {
            createConnection();

            PreparedStatement ps = con.prepareStatement("select * from PhoneData where upper(rtrim(NULLIF(names,''))) || upper(rtrim(NULLIF(middleName,''))) ||  upper(rtrim(NULLIF(lastName,'')))=?");
            ps.setString(1, name);

            ResultSet rs = ps.executeQuery();

          // System.out.println("First Mobile Number: "+rs.getInt(3));
            while(rs.next())
            {
                details.add(rs.getInt(1));
                details.add(rs.getString(2));
                details.add(rs.getString(3));
                details.add(rs.getString(4));
                details.add(rs.getString(5));
                details.add(rs.getString(6));
                details.add(rs.getString(7));
                details.add(rs.getString(8));
                details.add(rs.getString(9));
                details.add(rs.getString(10));
                details.add(rs.getString(11));
                details.add(rs.getString(12));
                details.add(rs.getString(13));
                details.add(rs.getString(14));
            }

            for(int i=0;i<details.size();i++)
            {
                System.out.println(details.get(i));
            }
            System.out.println("------------Database handler Done------------");
        }
        catch(Exception e)
        {
            e.printStackTrace();
        }
        finally
        {
            closeConnection();
        }

        return details;
    } 
```

上面的代码被下面的代码调用，通过一个接口

**UpdateDeleteForm.java**

```
private class DetailsLoader implements ItemListener
    {
        public void itemStateChanged(ItemEvent ie)
        {
            if(ie.getStateChange()==ItemEvent.SELECTED)
            {
                List details = new ArrayList();

                if(nameTxtCombo.getSelectedItem().toString() != "Select a Name")
                {
                details = dateBaseConnector.getDetails(nameTxtCombo.getSelectedItem().toString());

                idTxt.setText("");
                firstNameTxt.setText("");
                lastNameTxt.setText("");
                mobileNumber1Txt.setText("");
                mobileNumber2Txt.setText("");
                landNumber1Txt.setText("");
                landNumber2Txt.setText("");
                streetAddressTxt.setText("");
                cityTxt.setText("");
                countryTxt.setText("");
                middleNameTxt.setText("");
                emailTxt.setText("");
                nickNameTxt.setText("");

                String mobileNumber1 = (String)details.get(2)+" ";
                String mobileNumber2 = (String)details.get(3)+" ";
                String landNumber1 = (String)details.get(4)+" ";
                String landNumber2 = (String)details.get(5)+" ";
                String address = (String)details.get(6)+" ";

                idTxt.setText(String.valueOf(details.get(0)));
                firstNameTxt.setText((String)details.get(1));                    
                mobileNumber1Txt.setText(mobileNumber1.trim());
                mobileNumber2Txt.setText(mobileNumber2.trim());
                landNumber1Txt.setText(landNumber1.trim());
                landNumber2Txt.setText(landNumber2.trim());
                streetAddressTxt.setText(address.trim());
                //categoryCombo.setSelectedItem((String)details.get(7));
                nickNameTxt.setText((String)details.get(8));
                emailTxt.setText((String)details.get(9));
                middleNameTxt.setText((String)details.get(10));
                lastNameTxt.setText((String)details.get(11));
                cityTxt.setText((String)details.get(12));
                countryTxt.setText((String)details.get(13));

                System.out.println((String)details.get(2));
                System.out.println((String)details.get(3));
                System.out.println((String)details.get(4));
                System.out.println((String)details.get(5));
                System.out.println(address.trim());
                System.out.println((String)details.get(7));
                System.out.println((String)details.get(8));
                System.out.println((String)details.get(9));
                System.out.println();
                System.out.println();
                System.out.println("---------------New Line---------------------");
                }

            }
        }
    } 
```

当我使用 MS SQLServer 时，此代码可以 100% 正常工作。但是，现在我将其移至 Apache Derby - Embedded 版本。

如果 getDetails() 方法返回的任何项目为空，我将收到以下错误

```
Exception in thread "AWT-EventQueue-0" java.lang.IndexOutOfBoundsException: Index: 2, Size: 0
    at java.util.ArrayList.rangeCheck(ArrayList.java:604)
    at java.util.ArrayList.get(ArrayList.java:382)
    at normal.UpdateDeleteForm$DetailsLoader.itemStateChanged(UpdateDeleteForm.java:438)
    at javax.swing.JComboBox.fireItemStateChanged(JComboBox.java:1225)
    at javax.swing.JComboBox.selectedItemChanged(JComboBox.java:1282)
    at javax.swing.JComboBox.contentsChanged(JComboBox.java:1329)
    at javax.swing.AbstractListModel.fireContentsChanged(AbstractListModel.java:118)
    at javax.swing.DefaultComboBoxModel.setSelectedItem(DefaultComboBoxModel.java:94)
    at javax.swing.JComboBox.setSelectedItem(JComboBox.java:578)
    at javax.swing.JComboBox.setSelectedIndex(JComboBox.java:624)
    at javax.swing.plaf.basic.BasicComboPopup$Handler.mouseReleased(BasicComboPopup.java:835)
    at java.awt.AWTEventMulticaster.mouseReleased(AWTEventMulticaster.java:290)
    at java.awt.Component.processMouseEvent(Component.java:6504)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at javax.swing.plaf.basic.BasicComboPopup$1.processMouseEvent(BasicComboPopup.java:499)
    at java.awt.Component.processEvent(Component.java:6269)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4860)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4686)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

如果 non 为空，则根本没有问题。我记得我在 MS SQL Server 中遇到了同样的问题，我设法用“isnull”克服了它。我在这里做了同样的事情，但似乎 apache 版本的 isnull (nullif) 不起作用，因为如果它至少返回一个空格，我就没有这个问题！！请帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:09:38.470

**[`COALESCE`](http://db.apache.org/derby/docs/10.7/ref/rreffunccoalesce.html)**在您的 PreparedStatement 中使用更多

```
PreparedStatement ps = con.prepareStatement("
                                select * 
                                from PhoneData 
                                where upper(rtrim(COALESCE(names,''))) || 
                                      upper(rtrim(COALESCE(middleName,''))) ||  
                                      upper(rtrim(COALESCE(lastName,''))) = ?"); 
```

# java - 异步任务技术

> ID：12874256
> 
> 赞同：2
> 
> 时间：2012-10-13T14:54:31.307
> 
> 标签：java, android, design-patterns, callback, android-asynctask

您是否执行异步任务并通知它们的完成？我看到了下一个方法（它们是相关的，但是......）这样做：

1.  AsynchTask (SwingWorkerTask)，其中有诸如 onPre() 和 onPost() 之类的方法，将数据分派到 UI 线程
2.  回调/代表/通知（通知中心）
3.  Executor，Callable，Future（也许）

例如，编写移动 Rest 客户端的更好选择是什么？你在你的应用程序中使用什么技术？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T19:01:02.640

我通常将 Guava [ListenableFuture](https://github.com/google/guava/wiki/ListenableFutureExplained)用于此类任务。它简化了我需要的几乎所有并发任务，因为我不必担心并发中的许多事情。

此外，如链接中所述：

> 使用 ListenableFuture 的最重要原因是可以拥有复杂的异步操作链。

# c - 服务器自行“杀死”

> ID：12874257
> 
> 赞同：0
> 
> 时间：2012-10-13T14:54:37.717
> 
> 标签：c

我正在用 C 语言做一个客户端-服务器应用程序来模拟纸牌游戏。这是一个一对一的游戏，客户端在线程工作者（每场比赛一个工作者）的协助下玩游戏。我试图做一些测试，但在某些时候，服务器完全没有理由崩溃了。该代码充满了检查以尝试以各种方式安全地结束它。发布所有代码是不可想象的，但这是计算的结果（我已经重复了超过 10 次获得相同的结果）：

```
worker: Start Playing!
worker: hand number: 0
worker: player pluto playing on port 6!
Killed 
```

任何可能的原因？其他人遇到同样的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:18:49.983

当您的程序`kill -9`来自其他程序或脚本时，就会发生这种情况。

一种常见的神秘进程杀手是 Linux[内存不足 (OOM) 杀手](http://linux-mm.org/OOM_Killer)。在 Linux 下，当程序分配太多内存时，您不会从 NULL 中返回 NULL `malloc()`，也不会从操作员那里得到异常`new`。相反，您的程序可能会被`kill -9`内核'd'。

### OOM 杀手

Linux 有一个奇怪的（但明智的）策略，它允许进程根据需要分配尽可能多的内存，即使没有足够的内存来满足请求。这是因为许多程序会乐观地分配大量内存，但实际上并未*使用*所有这些内存。Linux 允许程序分配它们想要的任何东西，并且只有当它们尝试访问该内存时，Linux 才会检查该内存是否存在。

如果没有，内核就处于绑定状态，因为它告诉程序内存可用（即`malloc()`之前返回了一个有效指针），现在它被骗了。没有好的方法可以向程序发出错误信号，哎呀，我犯了一个错误，我应该早点返回 NULL。

这就是OOM杀手发挥作用的地方。OOM杀手就像一家航空公司超额预订了航班，现在必须说服付费客户不要乘坐该航班。我知道你付了钱，但也许有人会好心搭晚一点的航班？

内核不能满足内存请求，怎么办？它可以说“对不起，我撒谎了”并终止当前程序。或者它可以杀死其他程序以释放内存，直到当前程序有足够的空闲空间。OOM 杀手试图充分利用糟糕的情况。它试图找出最好的杀死程序是什么，以尽量减少损害。如果有一些新启动的程序正在消耗大量内存，那就是它会杀死的人。这是有道理的。程序很有可能有一个错误，导致它分配了太多的内存。

或者考虑另一种可能性：您的程序完全是无辜的，但是*其他*一些程序行为不端，OOM 杀手决定杀死*您*的程序。

我不知道这是否正在发生。但是当我听到“我的程序被无缘无故地杀死”时，我认为是[OOM杀手](http://linux-mm.org/OOM_Killer)，因为我以前被这个混蛋烧过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:24:21.993

“Killed”是您的程序收到时打印的消息`SIGKILL`。`SIGKILL`不可捕获或可屏蔽，这意味着它保证会杀死您的程序（`SIGKILL`通常是信号 9，导致常见的习惯用法`kill -9 <pid>`是杀死一个进程）。

如果你没有在`kill -9`某个地方触发，那么可能的罪魁祸首就是 OOM 杀手。@JohnKugelman 很好地概述了凶手。

您可以通过查看来确定 OOM 杀手是否杀死了您的进程`/var/log/messages`：

```
grep -i 'killed process' /var/log/messages 
```

# java - 我正在尝试映射 1:M 员工可以使用 Spring MVC 和 Hibernate 分配许多任务我被困在将数据持久化到 Java DB 有什么想法吗？

> ID：12874264
> 
> 赞同：0
> 
> 时间：2012-10-13T14:55:22.460
> 
> 标签：java, hibernate, spring-mvc

我正在尝试映射 1:M 员工可以使用 Spring MVC 和 Hibernate 分配许多任务我被困在将数据持久化到 Java DB 有什么想法吗？

雇员.java

```
 public class Employee  implements java.io.Serializable {

 private int empid;
 private String name;
 private int salary;
 private int roleid;
 private Set tasks;

public Set getTasks() {
    return tasks;
}

public void setTasks(Set tasks) {
    this.tasks = tasks;
}
public Employee() {
    tasks = new HashSet();
}

 public void addTask(Task task) {
    this.tasks.add(task);
}

public void removeTask(Task task) {
    this.tasks.remove(task);
}

public Employee(int empid, String name, int salary, int roleid) {
   this.empid = empid;
   this.name = name;
   this.salary = salary;
   this.roleid = roleid;
}

public int getEmpid() {
    return this.empid;
}

public void setEmpid(int empid) {
    this.empid = empid;
}
public String getName() {
    return this.name;
}

public void setName(String name) {
    this.name = name;
}
public int getSalary() {
    return this.salary;
}

public void setSalary(int salary) {
    this.salary = salary;
}
public int getRoleid() {
    return this.roleid;
}

public void setRoleid(int roleid) {
    this.roleid = roleid;
}
} 
```

任务.java

```
public class Task implements java.io.Serializable {

private int taskid;
private String title;
private String description;
private int empid;

public Task() {
}

public Task(int taskid, String title, String description, int empid) {
    this.taskid = taskid;
    this.title = title;
    this.description = description;
    this.empid = empid;
}

public int getTaskid() {
    return this.taskid;
}

public void setTaskid(int taskid) {
    this.taskid = taskid;
}

public String getTitle() {
    return this.title;
}

public void setTitle(String title) {
    this.title = title;
}

public String getDescription() {
    return this.description;
}

public void setDescription(String description) {
    this.description = description;
}

public int getEmpid() {
    return this.empid;
}

public void setEmpid(int empid) {
    this.empid = empid;
}} 
```

员工.hbm

```
 <hibernate-mapping>
    <class name="Models.Employee" table="EMPLOYEE" schema="APP">
        <id name="empid" type="int">
            <column name="EMPID" />
            <generator class="increment" />
        </id>
        <property name="name" type="string">
            <column name="NAME" length="30" not-null="true" />
        </property>
        <property name="salary" type="int">
            <column name="SALARY" not-null="true" />
        </property>
        <property name="roleid" type="int">
            <column name="ROLEID" not-null="true" />
        </property>
        <set cascade="all" name="tasks" table="TASK">
            <key column="EMPID"/>
            <one-to-many class="Models.Task"/>
        </set>

    </class>
</hibernate-mapping> 
```

任务.hbm

```
<hibernate-mapping>
    <class name="Models.Task" table="TASK" schema="APP">
        <id name="taskid" type="int">
            <column name="TASKID" />
            <generator class="increment" />
        </id>
        <property name="title" type="string">
            <column name="TITLE" length="30" not-null="true" />
        </property>
        <property name="description" type="string">
            <column name="DESCRIPTION" length="50" not-null="true" />
        </property>
        <property name="empid" type="int">
            <column name="EMPID" not-null="true" />
        </property>
    </class>
</hibernate-mapping> 
```

EmployeeAssignTaskController.java

```
public class EmployeeAssignTaskController extends SimpleFormController {

    public EmployeeAssignTaskController() {
        setCommandClass(Employee.class);
    }

    @Override
    public void doSubmitAction(Object command) {
//        Employee employee = (Employee) command;
//        try {
//            Session session = HibernateUtil.getSessionFactory().getCurrentSession();
//            session.beginTransaction();
//            session.save(employee);
//            session.getTransaction().commit();
//        } catch (Exception e) {
//            e.printStackTrace();
//        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:16:53.857

在任务上映射`emp_id`为 ManyToOne：

```
 private Employee emp;
   public Employee getEmpid() {
        return this.emp;
   }

   public void setEmployee(Employee employee) {
       this.employee= employee;
   } 
```

更新`Task.hbm`配置文件以反映相同。

```
 <many-to-one 
          name="employee" 
          class="Employee" 
          column="EMPID"/> 
```

`addTask`在课堂上更新你的方法`Employee`如下：

```
public void addTask(Task task) {
   task.setEmployee(this);//<--This will set employee as parent in your task class 
          this.tasks.add(task);
} 
```

完成后，您`doSubmitAction`应该坚持`Employee`使用`tasks`.

# javascript - 如何获取所有使用 javascript 戳的 id

> ID：12874265
> 
> 赞同：0
> 
> 时间：2012-10-13T14:55:39.363
> 
> 标签：javascript

使用萤火虫，我得到`html`如下-

```
<a rel="async-post" ajaxify="/ajax/pokes/poke_inline.php?uid=xxxxxxxxxxxxxxx&amp;pokeback=1" href="#" class="uiIconText"><i style="top: 0px;" class="img sp_1lbo22 sx_3b5b96"></i>Poke Back</a> 
```

要获取 uid，我使用`getElementsByTagName('a')`函数然后查找`ajaxify`属性。下面是我的代码-

```
var elements = document.getElementsByTagName('a');

for (var i = 0; i < elements.length; i++) {
   var ajaxify = elements[i].ajaxify;
   if (!ajaxify) {
      continue;
   }
   var uid = ajaxify.match(/uid=([0-9]*)/)[1];
   alert(uid);
} 
```

在 firebug 中运行我的代码后，我将`undefined`进入控制台，如下所示。

```
>>> var elements = document.getElementsByTagName('a'...ify.match(/uid=([0-9]*)/)[1];     alert(uid);  }

undefined 
```

我怎样才能得到所有使用 javascript 戳的 id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:03:07.577

There is a difference between an element's *properties* and an element's *attributes*. Most notably an `<input/>`'s `value` *attribute* represents the default value, whereas the `value` *property* is the current value.

Try using `ajaxify = elements[i].getAttribute("ajaxify")` and see if that helps.

# python - 动态生成collada文件

> ID：12874266
> 
> 赞同：0
> 
> 时间：2012-10-13T14:55:41.727
> 
> 标签：python, kml, google-earth, collada

您好，据我了解，使用 Python 我可以动态地将 kml 数据发送到 Google 地球客户端。我想知道这可能适用于 collada 文件吗？我需要结合使用它来在 Google 地球中加载模型。到目前为止，我可以手动完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:39:46.643

您可以执行此操作，您可能会通过创建一个加载 KMZ 的 KML NetworkLink 文件来执行此操作，该 KMZ 包含一个指向 collada .dae 文件的 KML 文件。这都可以从 Python 自动生成。有库可以生成它，或者您可以自己滚动。只需搜索 generate collada python，您就会找到一些适合您的资源。

# java - 将路径存储到 setter 方法，以便以后可以调用它

> ID：12874270
> 
> 赞同：0
> 
> 时间：2012-10-13T14:56:12.810
> 
> 标签：java

```
 public class TopLevelObject{

    List<SecondLevelObject> secondLevelObjects;
    Long field; 
```

}

```
public class SecondLevelObject{
    List<ThirdLevelObject> thirdLevelObjects;
    Long field; 
```

}

```
public class ThirdLevelObject{
     Long field1;
     Long field2; 
```

}

我们有一个 TopLevelObject，它包含一个 SecondLevelObjects 列表，所有这些都包含 ThirdLevelObjects 列表

我们需要通过迭代初始化这个结构的一些字段，并推迟初始化其他的，但避免再次迭代

那么是否可以将引用/路径存储到该字段的设置器以便稍后调用它们？（假设您可以知道何时调用哪个 setter）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:06:21.623

我会建议更好地使用[**Apache BeanUtils.PropertyUtils**](http://commons.apache.org/beanutils/apidocs/org/apache/commons/beanutils/PropertyUtils.html)在需要时根据路径调用设置器。一些使用方法如下：

```
PropertyUtils.setProperty(Object bean, String propertyName, Object value)  
PropertyUtils.setNestedProperty(Object bean, String propertyName, Object value)   
PropertyUtils.setIndexedProperty(Object bean, String propertyName, int index, 
                                 Object value) 
PropertyUtils.setIndexedProperty(Object bean, String propertyName, Object value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:28:24.647

首先，这只是性能问题吗？因为如果是这样，请在测量完后再回来。

其次，检查你是不是太聪明了。阅读有关内部平台效应的信息。你*真的*需要手动滚动这个惰性初始化代码，还是可以使用 JPA 或其他东西？

如果您仍然确定，您可以使用一个自定义对象来延迟这样的设置

```
// [some code that is about to set the property on thirdLevelObject
Runnable deferredSetter = new Runnable() {
    public void run() {
         thirdLevelObject.setFoo(/* wherever the value for foo comes from later */);
    }
} 
```

这些延迟`Runnable`的 setter 可以添加到您将在以后的初始化过程中循环的集合中。但我仍然认为您可以通过简化设计来避免这种方法。

# jquery - 加载页面时 JQuery 不工作

> ID：12874271
> 
> 赞同：0
> 
> 时间：2012-10-13T14:56:13.030
> 
> 标签：jquery, fadein

我试图淡入（div id =“content”）中出现的任何内容。

我有这个将 JQuery 加载到页面：

```
<script type="text/javascript"
    src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
</script>
<script type="text/javascript" src="rocoffee.js"></script> 
```

这是 rocoffee.js 中的内容

```
$(function(){
$('#content').fadeIn('slow');
}); 
```

当我加载我的页面时，我还没有看到这个事件发生。

注意：我确实有一个 jquery.js 文件可供使用，但我尝试根据我读过的答案使用上述文件。不管结果如何。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T15:02:55.243

你需要先隐藏它！

[http://jsfiddle.net/wVTab/](http://jsfiddle.net/wVTab/)

```
$(function(){
    $('#content').hide();        
    $('#content').fadeIn('slow');
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T15:03:46.723

由于没有可用的 HTML 代码，我会假设它`div`最初是可见的，因此建议这`fadeIn`没有多大意义。

尝试设置`div` `hidden`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T14:58:34.753

尝试使用：

```
$(document).ready(function(){
    $('#content').fadeIn('slow');
}); 
```

反而

# java - 我的树脂服务器的 SYN_RECV 状态太多

> ID：12874279
> 
> 赞同：0
> 
> 时间：2012-10-13T14:57:33.677
> 
> 标签：java, http, resin

这是一些信息：

猫 /proc/net/sockstat

```
插座：使用 541
TCP：正在使用 4000 孤儿 3515 tw 4459 分配 4011 内存 2012
UDP：正在使用 2
RAW: 使用 0
碎片：正在使用 0 内存 0

TIME_WAIT 6014
CLOSE_WAIT 5
FIN_WAIT1 1563
FIN_WAIT2 47
成立 586
SYN_RECV 1314
收盘 154
最后确认 211
Cpu(s): 0.1% us, 0.1% sy, 0.0% ni, 99.8% id, 0.0% wa, 0.0% hi, 0.0% si

```

树脂服务器需要几秒钟来响应一个 HTTP 请求，这困扰了我很长时间。

我需要更多服务器吗？尽管 CPU 使用率很高，但服务器负载似乎一点也不重。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:12:18.263

您可能会考虑一些事情来帮助追踪这一点。这可能是旧版本 Resin 的线程不足问题。（这种猜测不适用于 Resin 4.0，但调试过程类似。）

如果您有 Resin 4.0 专业版，请生成 PDF 报告或查看 /resin-admin。特别是，看看线程图。

或者在 /resin-admin 或使用“resinctl thread-dump”或使用 jps/jstack 中查看线程转储。

您应该在 accept() 中看到针对您的 HTTP 端口的多个线程，以及处理请求的多个线程。

如果您在 accept() 中只看到端口的一两个线程，那么您可能遇到了这个问题。

你可以升级到 Resin 4.0 或者你可以增加到像 4096 这样的大版本。旧的 Resin 3.x 默认设置太低，因为当时很少有 64 位机器。

# android - Android 可绘制文件夹

> ID：12874280
> 
> 赞同：0
> 
> 时间：2012-10-13T14:57:36.267
> 
> 标签：android, drawable, directory

我有一个为我的应用程序制作的背景。但我不确定将它放在哪个文件夹中，以及它的大小？

我应该在 ldpi 中保存哪种尺寸的背景，mdpi、hdpi 和 xhdpi 使用哪种尺寸？

我需要每个文件夹中的特定尺寸，以适应所有屏幕尺寸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:03:19.403

You could put in any folder, the eclipse IDE will pick up automatically no matter which folder your place your background. Recommended for ldpi is 36x36, mdpi = 48x48, hdpi = 72x72 and xhdpi = 96x96\. Just check the default icon in you res folder. For more info, view [Difference between each resource folders](https://stackoverflow.com/a/2533444/820388)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:04:01.290

拥有文件夹 ldpi（mdpi、hdpi 和 xhdpi 的大小）的基本目的是将图片和图标等可绘制资源放在 ldpi 中，mdpi、hdpi 和 xhdpi 的大小。它们的对应尺寸从低到特大的比例范围为

36:48:72:96

如果您指的是 ypur 应用程序的背景。实际上，您可以以编程方式设置 hr 背景颜色或固定在 xml 中。这适用于所有决议。

# scala - 缺少资源的强制编译错误

> ID：12874281
> 
> 赞同：1
> 
> 时间：2012-10-13T14:57:44.253
> 
> 标签：scala, resources, compiler-errors

是否可以让 Scala（或从 Scala 调用的 Java）在编译时检查资源是否丢失，如果丢失则抛出编译错误？

我正在与许多开发人员一起开发一个大型 Java/Scala 混合项目，并且我正在提供一个 Scala 组件，该组件在系统运行接近尾声时启动。因此，如果我的组件抛出缺少资源运行时错误，那么它只是很晚才被发现。我试图确保我的资源在那里，这样就不会发生这种情况。但是已经有好几次了，首席工程师决定改变事情，我的资源改变了路径，我不知道所以没有改变我的代码，然后代码因为缺少资源而在我的组件处死掉了。我们正在致力于更集中的资源控制，但与此同时，是否有可能让 Scala 对丢失的资源抛出编译错误？主要是好奇心，但如果结果足够简单，可能会实施。

ETA：关于构建工具的问题。这并不简单，因为每个人都在使用自己的环境。有些使用eclipse，有些使用netbeans，我使用emacs+sbt。因此，即使我插入了对 sbt 的检查，对使用 eclipse 的其他人来说也没关系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:02:15.163

在 2.10 中，借助宏和字符串插值绝对是可能的：

```
object CheckResource {

  import scala.reflect.macros.Context
  import scala.language.experimental.macros

  implicit class StringResource(sc: StringContext) {
    def res(): String = macro __res
  }

  def __res(c: Context)(): c.Expr[String] = {
    import c.universe._
    val str = c.prefix.tree match {
      case Apply(_, List(Apply(_, List(Literal(Constant(const: String)))))) =>
        if (!new java.io.File(const).exists())
          c.abort(c.enclosingPosition, s"file '$const' does not exist")
        else Literal(Constant(const))
    }
    c.Expr(str)
  }
}

scala> import CheckResource._
import CheckResource._

scala> val file = new java.io.File("test")
file: java.io.File = test

scala> file.createNewFile
res7: Boolean = true

scala> res"test"
res8: String = test

scala> file.delete
res9: Boolean = true

scala> res"test"
<console>:12: error: file 'test' does not exist
              res"test"
              ^ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T16:01:46.127

实际上，您可能可以在 Scala 2.10 中使用宏来执行此操作 - 宏是在编译时运行的一段代码。

这样做是否明智完全是另一个问题（仅仅因为它在编译时可用并不一定意味着它将在运行时，反之亦然？）。我会建议理查德在你的构建工具中做某事的建议可能更明智。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:05:41.707

不，您不能诱导编译器为您进行此项检查。

是的，ant/maven/buildr/sbt 可以为你做这个检查。

如果您想了解更多详细信息，请提供有关您的构建工具的信息。

# xaml - Issue re-using XAML paths for use within Windows 8 Store App

> ID：12874285
> 
> 赞同：3
> 
> 时间：2012-10-13T14:58:41.167
> 
> 标签：xaml, windows-8, windows-runtime, winrt-xaml

I am trying to re-use a XAML `<Path />` that I have made for an icon in my Windows 8 Store App, however when I attempt to re-use them more than once, it never displays?

For example, both the initial instances are fine and my Tick/Cross path renders with this XAML code:

```
<Path x:Name="TickGlyph" Style="{StaticResource TickGlyph}" Fill="#FF008500"
  Grid.Column="1" Width="48" Height="48" Margin="24,0,4,0" />
<Path x:Name="CrossGlyph" Style="{StaticResource CrossGlyph}" Fill="#FF850000"
  Grid.Column="1" Width="48" Height="48" Margin="24,0,4,0" /> 
```

As soon as I repeat that code with names like `TickGlyph1` etc, my subsequent paths are simply blank, could anybody explain what's going on here, or is this some weird limitation with XAML for Windows Store apps?

My underlying Styles are as follows:

```
<Style x:Key="TickGlyph" TargetType="Path">
  <Setter Property="Data" Value="F1 M 45.12,5.49L 21.255,40.8L 20.4525,40.8L 0,23.2875L 5.775,15.7875L 19.2525,27.3L 37.695,-1.90735e-006L 45.12,5.49 Z "/>
  <Setter Property="Stretch" Value="Fill"></Setter>
</Style>
<Style x:Key="CrossGlyph" TargetType="Path">
  <Setter Property="Data" Value="F1 M 0,32.505L 13.4025,19.1025L 0,5.69249L 5.67,-7.62939e-006L 19.08,13.41L 32.505,-7.62939e-006L 38.205,5.67L 24.7725,19.1025L 38.205,32.535L 32.505,38.205L 19.08,24.795L 5.67,38.205L 0,32.505 Z "/>
  <Setter Property="Stretch" Value="Fill"></Setter>
</Style> 
```

* * *

**Update 2012-10-20:** The strange thing is, if I replace `Style="{StaticResource TickGlyph}"` for `Data="F1 M 45.12,5.49L 21.255,40.8L 20.4525,40.8L 0,23.2875L 5.775,15.7875L 19.2525,27.3L 37.695,-1.90735e-006L 45.12,5.49 Z "` all my paths load ok, why won't the `Style` attribute honour? :(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T09:30:47.007

不确定，如果它是最好的解决方案，但我几天前使用过这种方法：

使用 XAML 定义您自己的从 Path 继承的对象

```
<Path x:Class="MyProject.MyPath"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Data="F1M1568.35,1934.42L1551.46,1917.44 1551.46,1925.43C1517.67,1925.43 1515.02,1945.4 1515.02,
        1949.39 1522.31,1933.42 1551.46,1941.4 1551.46,1941.4L1551.46,1949.39 1568.35,1934.42z"
    Stretch="Uniform" Width="26" Height="26" UseLayoutRounding="False" RenderTransformOrigin="0.5,0.5">
</Path> 
```

使用默认代码隐藏

```
public partial class MyPath 
{
    public MyPath()
    {
        InitializeComponent();
    }
} 
```

然后在你想要的地方实例化它。

# linux - 如何检测脚本是否在虚拟机上运行？

> ID：12874288
> 
> 赞同：8
> 
> 时间：2012-10-13T14:59:11.797
> 
> 标签：linux, perl, virtualization, detection

我认为这个问题不需要任何解释。我正在编写一个可以启动虚拟机来模拟网络的软件。如果软件已经在虚拟机上运行，​​我想禁用此功能。

我已经阅读了这篇文章：[如何检测我的应用程序是否在虚拟机中运行？](https://stackoverflow.com/questions/498371/how-to-detect-if-my-application-is-running-in-a-virtual-machine) 但我需要在 Linux 上进行，而那篇文章只涵盖 Windows。

我将它标记为一个`Perl`问题，因为我必须在 Perl 中这样做，但可能有一些文件在`proc`或其他地方需要检查，并且对于所有语言都是相同的。我其实不知道。

我主要对检测 VirtualBox 和 KVM 感兴趣，因为这些是我正在使用的虚拟机。

那么，有什么建议吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-13T18:58:20.697

我将具体讨论 VMware 和运行 Linux 作为客户操作系统的虚拟 Box 虚拟机。如果你运行下面的命令，你会知道底层硬件是 VMware/VirtualBox，它证明它是一个虚拟机。

对于 VMware 来宾：

```
# dmidecode  | grep -i product
        Product Name: VMware Virtual Platform 
```

对于虚拟盒子客人：

```
# dmidecode  | grep -i product
    Product Name: VirtualBox 
```

“ `dmidecode`”是一个linux系统命令。您可以`dmidecode`在脚本的开头运行 perl 并提取值。如果它是虚拟机，则脚本应退出而不进一步执行。

我没有任何其他虚拟机管理程序可以让您获得上述命令返回的内容。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T15:04:09.703

快速谷歌搜索[dmo.ca/blog/如何检测虚拟化](http://www.dmo.ca/blog/detecting-virtualization-on-linux/)

Perl 模块和一切。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T15:05:39.707

您是否尝试过CPAN 上可用的[Sys::Detect::Virtualization ？](http://search.cpan.org/dist/Sys-Detect-Virtualization/)

# zend-framework - 使用 Zend_ACL 显示用户自己的帖子列表

> ID：12874289
> 
> 赞同：0
> 
> 时间：2012-10-13T14:59:14.100
> 
> 标签：zend-framework, zend-acl

我有用户和帖子表，我想设置它，以便登录用户只能查看他的帖子，即由他创建。问题是我知道如何使用简单的 sql 和 php 来完成这项工作，但是我在这里使用了一个 zend 框架项目，我想知道这是否可以使用 Zend_ACL 来完成以及如何完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:12:52.743

可以通过 Zend_Acl_Role、Zend_Acl_Resource 和特别是使用 Zend_Acl_Assert_Interface 的断言来限制对某些资源/模型的操作访问，查看此页面以获取更多信息： http: [//framework.zend.com/manual/1.12/en/zend.acl.advanced .html](http://framework.zend.com/manual/1.12/en/zend.acl.advanced.html) 还有这个问题[Zend Acl - 当 acl 规则返回 false 时，断言是否可以允许访问权限？](https://stackoverflow.com/questions/5731449/zend-acl-is-it-possible-for-an-assertion-to-allow-access-to-a-privilege-when-t)

ACL 不会为您选择帖子，但是它将允许/拒绝用户使用断言编辑/更新/删除他自己的帖子，这只能使用 SQL/Zend_Db 完成，因为您将拥有列表操作，例如所有人都可以访问用户，但在该操作中获取的帖子与 ACL 无关

# c++ - 使用带有 Eigen 库的自定义 new-handler

> ID：12874291
> 
> 赞同：3
> 
> 时间：2012-10-13T14:59:35.213
> 
> 标签：c++, new-operator, eigen

我正在尝试使用自定义新处理程序来响应我使用[Eigen](http://eigen.tuxfamily.org/)库的程序中的内存不足错误。

当我解决一个实例时，我缓存了结果（一个大的*动态*大小向量），所以如果我需要再次解决那个实例，我已经有了结果。一段时间后，可能会缓存太多实例，因此在计算过程中没有足够的内存。在这种情况下，我会清空缓存（或者最好删除一些实例）。

我想出的最简单的方法是拥有一个全局变量`std::map<InputType, ResultType> cache`，并安装一个清空它的新处理程序（除非它已经为空，否则它会退回到默认处理程序）。这样，当分配失败时，我的处理程序会释放一些内存并返回，因此会再次尝试分配内存。

然而，似乎从未调用过这样的处理程序，而是`std::bad_alloc`总是抛出异常。

我试过这个取自[这里](http://en.cppreference.com/w/cpp/memory/new/set_new_handler)的例子。`std::vector<int>`正确调用自定义处理程序时，会打印“内存分配失败，终止” 。使用时`Eigen::VectorXi`我只有一个`std::bad_alloc`例外。

```
#include <Eigen/Dense>

#include <iostream>
#include <vector>
#include <new>

void handler()
{
    std::cout << "Memory allocation failed, terminating\n";
    std::set_new_handler(nullptr);
}

int main()
{
    std::set_new_handler(handler);
    try {
        while(true) {
            const unsigned long int Size = 100000000ul;

            // Either one of the following:

            // new Eigen::VectorXi(Size);
            new std::vector<int>(Size);
        }
    } catch (const std::bad_alloc & e) {
        std::cout << e.what() << '\n';
    }
} 
```

我想知道为什么会发生这种情况，也许 Eigen 不`operator new`用于分配内存？我在文档中找不到任何内容。有没有办法将这种技术与 Eigen 一起使用？还是我必须在高级别的地方捕获异常，清除缓存，然后再次执行计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T22:19:53.730

查看 Eigen 源代码中的这个文件：Eigen/src/Core/util/Memory.h，看看 Eigen 在这个部门做了什么。IIRC 我们确实在分配失败时明确抛出 bad_alloc 。如果我们要更改某些内容，请随时写信给邮件列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T10:16:43.450

感谢 Benoit Jacob 的建议，我找到了 Eigen 分配内存的部分。该函数在 中`aligned_malloc()`定义`Eigen/src/Core/util/Memory.h`。原来它不使用 a `operator new`，但它调用`malloc()`.

我找到了这个[例子来实现`operator new`](https://stackoverflow.com/questions/7194127/how-should-i-write-iso-c-standard-conformant-custom-new-and-delete-operators#7194149)并相应地修改了函数`aligned_malloc()`：

```
inline void* aligned_malloc(size_t size)
{
  check_that_malloc_is_allowed();

  while (true) {
    void *result;
    #if !EIGEN_ALIGN
      result = std::malloc(size);
    #elif EIGEN_MALLOC_ALREADY_ALIGNED
      result = std::malloc(size);
    #elif EIGEN_HAS_POSIX_MEMALIGN
      if(posix_memalign(&result, 16, size)) result = 0;
    #elif EIGEN_HAS_MM_MALLOC
      result = _mm_malloc(size, 16);
    #elif (defined _MSC_VER)
      result = _aligned_malloc(size, 16);
    #else
      result = handmade_aligned_malloc(size);
    #endif

    if(result || !size) {
      return result;
    }

    std::new_handler currentHandler = std::set_new_handler(0);
    std::set_new_handler(currentHandler);

    if (currentHandler) {
      currentHandler();
    } else {
      throw_std_bad_alloc();
    }
  }
} 
```

现在内存处理程序在分配失败时被正确调用（可能还需要修改其他分配函数，但似乎它们都被包装了，`aligned_malloc()`因此对该函数的检查可能涵盖所有内容）。

但是此时我不确定 Eigen 是否应该尊重新的处理程序：它从中获取`malloc()`不使用异常的内存，但它`malloc()`通过 throw 通知失败`std::bad_alloc`。

# iphone - UIScrollView中的UITextView，分页不滚动

> ID：12874300
> 
> 赞同：1
> 
> 时间：2012-10-13T15:00:16.610
> 
> 标签：iphone, ios5

我已经`UIScrollView`按照这个优秀的教程实现了分页：http: [//www.iosdevnotes.com/2011/03/uiscrollview-paging/](http://www.iosdevnotes.com/2011/03/uiscrollview-paging/)

这些`UIScrollView`作品就像一个带有分页和所有功能的魅力。现在，我想为`UITextView`每个页面添加一个。应该有一个固定的`TextView`大小以适应框架但带有滚动内容（如果需要）。我正在用头撞墙，因为无论我尝试什么，我都无法让 textview 滚动！在上述教程的主 for 循环中，我添加了以下代码：

```
CGRect labelFrame;
UITextView *textView;

labelFrame.size.width = scrollView.frame.size.width-24;
labelFrame.size.height = scrollView.frame.size.height-48;
labelFrame.origin.x = 10;
labelFrame.origin.y = 40;

textView = [[UITextView alloc] initWithFrame:labelFrame];
textView.textColor = [UIColor blackColor];
textView.backgroundColor = [UIColor redColor];
textView.font = [UIFont systemFontOfSize:13];
textView.text = @"a very long text";

textView.editable = NO;
textView.scrollEnabled = YES;
textView.userInteractionEnabled = YES;
textView.delegate = self;
textView.contentSize = CGSizeMake(1, 1000); //this would make it scroll?
[subview addSubview:textView]; 
```

我已经用谷歌搜索并测试了很多东西，但 textview 不会滚动。我测试了`delaysContentTouches`标志，我已经锁定了滚动方向，但它并没有改变任何东西。在另一个项目中，我尝试做同样的事情，我让它在第一页上滚动，而不是在其他页面上滚动？

我完全迷失在太空中，希望那里的任何人都有（可能很简单）的解决方案。

这是完整项目的链接：

[https://dl.dropbox.com/u/7312515/mycode.zip](https://dl.dropbox.com/u/7312515/mycode.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T23:24:03.177

我刚刚对此进行了测试，它工作正常。

在您的代码中，您将文本视图添加到`subview`. 相反，您应该将其添加到滚动视图中。

子视图什么都不做，只提供红色。您可以通过调用将其发送到后面

```
[self.scrollView bringSubviewToFront:textView]; 
```

PS：别忘了`x`调整`labelFrame`to `subview.frame.size.width +10`。;-)

# java - HTML Canvas, JavaScript and Selenium

> ID：12874303
> 
> 赞同：0
> 
> 时间：2012-10-13T15:00:36.127
> 
> 标签：java, selenium, selenium-webdriver

I would like to move stars with Selenium on this page:

[http://www.html5canvastutorials.com/demos/labs/html5_canvas_elastic_stars/](http://www.html5canvastutorials.com/demos/labs/html5_canvas_elastic_stars/)

They are on html canvas. So if I try to inspect element, I only see canvas tag.

Is it possible to do this with selenium and if yes, how?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T12:06:10.733

好吧，问题是 selenium 通常与可以在 HTML 树模型中找到的 WebElements 交互（即使用 xPaths 或 css 选择器）。

在您的情况下，我们只有画布，这些星星是由 js 以随机方式生成的。请参阅下面的屏幕

![在此处输入图像描述](../Images/d65d3e3926d9ab370de369da2a6466e5.png)

所以问题是定位这些星星。如果可能（获取星星的位置），我们可以使用[Action Builder API](http://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/ActionBuilder.html) 或某种机器人 API（机器人框架）与这些星星进行交互。

在我看来，用 selenium 自动化这个非常困难（因为随机星位生成）。问候。

# asp.net - adding large file url to database is taking too much time

> ID：12874304
> 
> 赞同：1
> 
> 时间：2012-10-13T15:00:41.790
> 
> 标签：asp.net, iis-express

I'm taking video's url by FileUpload control in Asp .Net .Then I add this url to database for retrieving another asp .net web page. My problem is when I take picture url same way it takes short time but when I take video's url to store in database is taking too much long time and operation become fail without any error message. I guess problem comes from IIS but I don't know how to solve.
I use this code in web.config file.

```
<httpRuntime targetFramework="4.5" maxRequestLength="1048576" executionTimeout="3600"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:44:34.627

我通过更改 web.config 文件解决了这个问题，如下所示：

```
 <security>
    <requestFiltering>
        <requestLimits maxAllowedContentLength="1073741824" />
    </requestFiltering> 
 </security> 
```

maxAllowedContentLength="1073741824" --> 这指的是 1GB 文件大小。

# java - Android Maven not starting emulator

> ID：12874305
> 
> 赞同：11
> 
> 时间：2012-10-13T15:00:46.397
> 
> 标签：java, android, maven-3

When i right-click my Android Project and Select `Run->Android Application`. The emulator gets launched and the changes do reflect.

But when i do the following below commands, it does not reflect.

```
mvn clean install
mvn android:deploy
mvn android:emulator-start 
```

More-Over, The deploy and emulator-start command fails if there is no emulator opened up. `Found 0 devices connected with the Android Debug Bridge`.

```
[ERROR] Failed to execute goal com.jayway.maven.plugins.android.generation2:andr
oid-maven-plugin:3.3.0:deploy (default-cli) on project SampleProject: No online de
vices attached. -> [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal c
om.jayway.maven.plugins.android.generation2:android-maven-plugin:3.3.0:deploy (d
efault-cli) on project SampleProject: No online devices attached.
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:217)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:153)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:145)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:84)
        at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProje
ct(LifecycleModuleBuilder.java:59)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.singleThreadedBu
ild(LifecycleStarter.java:183)
        at org.apache.maven.lifecycle.internal.LifecycleStarter.execute(Lifecycl
eStarter.java:161)
        at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:320)
        at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:156)
        at org.apache.maven.cli.MavenCli.execute(MavenCli.java:537)
        at org.apache.maven.cli.MavenCli.doMain(MavenCli.java:196)
        at org.apache.maven.cli.MavenCli.main(MavenCli.java:141)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced(Laun
cher.java:290)
        at org.codehaus.plexus.classworlds.launcher.Launcher.launch(Launcher.jav
a:230)
        at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode(La
uncher.java:409)
        at org.codehaus.plexus.classworlds.launcher.Launcher.main(Launcher.java:
352)
Caused by: org.apache.maven.plugin.MojoExecutionException: No online devices att
ached.
        at com.jayway.maven.plugins.android.AbstractAndroidMojo.doWithDevices(Ab
stractAndroidMojo.java:625)
        at com.jayway.maven.plugins.android.AbstractAndroidMojo.deployApk(Abstra
ctAndroidMojo.java:527)
        at com.jayway.maven.plugins.android.AbstractAndroidMojo.deployBuiltApk(A
bstractAndroidMojo.java:570)
        at com.jayway.maven.plugins.android.standalonemojos.DeployMojo.execute(D
eployMojo.java:48)
        at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo(Default
BuildPluginManager.java:101)
        at org.apache.maven.lifecycle.internal.MojoExecutor.execute(MojoExecutor
.java:209)
        ... 19 more
[ERROR]
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR]
[ERROR] For more information about the errors and possible solutions, please rea
d the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionE
xception 
```

Here is my android-maven-plugin-emulator-start.vbs file.

```
Dim oShell
Set oShell = WScript.CreateObject("WScript.shell")
oShell.run "C:\Windows\system32\cmd.exe /X /C START /SEPARATE ""AndroidMavenPlugin-AVDDefault""  D:\SDK\tools\emulator.exe -avd Default" 
```

Here is MY POM.XML

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.sample</groupId>
    <artifactId>SampleProject</artifactId>
    <version>1.0</version>
    <packaging>apk</packaging>
    <name>SampleProject</name>
    <properties>
        <platform.version>2.3.3</platform.version>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>

    <dependencies>
        <dependency>
            <groupId>com.google.android</groupId>
            <artifactId>android</artifactId>
            <version>${platform.version}</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.googlecode.androidannotations</groupId>
            <artifactId>androidannotations</artifactId>
            <version>2.5.1</version>
            <scope>provided</scope>
        </dependency>
        <dependency>
            <groupId>com.googlecode.androidannotations</groupId>
            <artifactId>androidannotations</artifactId>
            <classifier>api</classifier>
            <version>2.5.1</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>com.jayway.maven.plugins.android.generation2</groupId>
                <artifactId>android-maven-plugin</artifactId>
                <version>3.3.2</version>
                <configuration>
                    <sdk>
                  <!-- platform or api level (api level 4 = platform 1.6) -->
                  <platform>16</platform>
                  <path>${env.ANDROID_HOME}/</path>
                 </sdk>
                 <emulator>
                    <avd>21</avd>
                    <options>-no-skin</options>
                </emulator>
                    <undeployBeforeDeploy>false</undeployBeforeDeploy>
                </configuration>
                <extensions>true</extensions>
            </plugin>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.5.1</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T18:08:52.800

跑`mvn android:emulator-start`前`mvn android:deploy`。maven 插件无法部署到不存在的模拟器。在部署之前，您还必须等待模拟器启动。

用于`adb devices`检查连接到您的计算机的活动 android 设备。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-14T20:23:15.707

您可以在运行之前手动启动模拟器（如 Deepak 在他的回答中提到的）`mvn android:deploy`，或者使用以下配置并`mvn android:deploy`直接运行，它将自动启动模拟器并在执行部署之前等待它：

```
<plugin>
    <groupId>com.jayway.maven.plugins.android.generation2</groupId>
    <artifactId>android-maven-plugin</artifactId>
    <version>3.3.2</version>
    <configuration>
        ... ...
        <emulator>
            <avd>21</avd>
            <!-- Wait for emulator starting (3 minutes) -->
            <wait>180000</wait>
            <options>-no-skin</options>
        </emulator>
        ... ...
    </configuration>
    <extensions>true</extensions>
</plugin> 
```

# python - QuerySet automatic/aspect filtering

> ID：12874313
> 
> 赞同：0
> 
> 时间：2012-10-13T15:01:30.297
> 
> 标签：python, django, oop, django-models, django-admin

I have a model which has an `active` field, and i want to filter out all records which are inactive basing on this field. Let's say:

```
Record(Model):
    active = BooleanField()
    ... 
```

to filter them out i can do:

```
Record.objects(active=True) 
```

But it is a general case and i want inactive records to be filtered out almost any time. What is the best way to follow DRY principle and do not filter every request i do manually like in example above and in meantime keep the ability to manage inactive records in admin panel.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:14:28.837

您可以使用[Managers](https://docs.djangoproject.com/en/dev/topics/db/managers/#modifying-initial-manager-querysets)来完成此任务：

```
# First, define the Manager subclass.
class ActiveManager(models.Manager):
    def get_query_set(self):
        return super(ActiveManager, self).get_query_set().filter(active=True)

# Then hook it into the Record model explicitly.
class Record(models.Model):
    active = BooleanField()

    objects = models.Manager() # The default manager.
    active_objects = ActiveManager() # The specific manager.

#to filter for all active records you can do:
Record.active_objects.all() 
```

# matlab - Passing a constant to fminsearch

> ID：12874317
> 
> 赞同：4
> 
> 时间：2012-10-13T15:02:11.350
> 
> 标签：matlab, fminsearch

How can I pass a constant to fminsearch? So like, if I have a function:

f(x,y,z), how can I do an fminsearch with a fixed value of x?

```
fminsearch(@f, [0,0,0]); 
```

I know I can write a new function and do an fminsearch on it:

```
function returnValue = f2(y, z)

returnValue = f(5, y, z);

...

fminsearch(@f2, [0,0]); 
```

My requirement, is I need to do this without defining a new function. Thanks!!!

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T17:37:03.110

您可以使用匿名函数：

```
fminsearch(@(x) f(5,x) , [0,0]); 
```

您还可以使用嵌套函数：

```
function MainFunc()
    z = 1;
    res = fminsearch(@f2, [0,0]);

    function out = f2(x,y)
        out = f(x,y,z);
    end
end 
```

您还可以使用`getappdata`来传递数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T15:23:37.387

我能想到的一种方法是使用全局变量将常量值发送给函数，这是您使用的函数级别。例如

在你的函数文件中

```
 function  y  = f(x1,x2,x3)
 % say you pass only two variables and want to leave x3 const
 if nargin < 3
     global x3
 end
 ... 
```

然后在你使用 fminsearch 的文件中你可以写

```
 y=fminsearch(@f,[1 0 0]); 
```

或者

```
 global x3
 x3=100 ; % some const
 y=fminsearch(@f,[1 0]); 
```

看到其他方法会很有趣，因为我相信可以有更多方法来做到这一点。

# iphone - convert apples html from a notes backup file

> ID：12874318
> 
> 赞同：0
> 
> 时间：2012-10-13T15:02:25.297
> 
> 标签：iphone, html, webkit, restore

I wanted to restore some of the lost notes that I obtained by using grabbing an iTunes backup (of an iphone 4) and opening up the notes.sqlite file. When I query the table that contains the notes text: select zcontent from znotebody I get the text that is in html format. How can I convert them to a more readable content. Here is an example of a note:

```
 Meds fir odd<div>Trazadone</div><div>Effexor (&amp; Cd)</div><div>Buspirone</div><div>Clonodine</div><div>Nortriptyline</div><div>Risperdal</div><div>Straterra&nbsp;</div> 
```

should be:

```
Meds fir odd
Trazadone
(Effexor & Cd)
Buspirone
Nortriptyline
Risperdal
Straterra<space here> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T20:25:46.773

那已经是html了。只需将其粘贴到任何 html 文件中（在任何文本编辑器中创建一个新文档，粘贴代码，然后在桌面上另存为 notes.html）并在 Web 浏览器中加载它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T20:27:42.240

我将所有消息导出到一个文件中，添加了一个 head 和 body 标记，然后以 chrome 显示。那已经足够好了！

# asp.net-mvc - Domain vs DTO vs ViewModel - How and When to use them?

> ID：12874328
> 
> 赞同：30
> 
> 时间：2012-10-13T15:03:31.343
> 
> 标签：asp.net-mvc, entity-framework, viewmodel, automapper, dto

In a Multi-layer project with Domain layer (DL)/Business (Service) Layer (BL)/Presentation Layer (PL), what is the best approach to deliver Entities to the Presentation Layer?

```
DO => Domain Object;
DTO = Domain Transfer Object;
VM => View Model;
V => View; 
```

Option 1:

```
DL => DO => BL => DTO => PL => VM => V 
```

This option seems to be the Best Practice but also seems heavy to mantain.

Option 2:

```
DL => DO => BL => DTO => PL => V 
```

This option seems not very good practice but as DTO are almost identical to the VM, we can pass it directly to the View and it's less painfull to implement and mantain.

Is this option also reliable for multiple layouts, for example, for Mobile Devices I may need less information from the BL, so I will need a diferent VM for this particular Layout?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T15:10:58.560

将 DTO 传递给视图就可以了。如果您需要更改或增强 DTO，请创建一个 ViewModel。一个常见的场景是添加链接。ViewModel 也可以将 DTO 引用为复杂属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T15:10:47.863

如果您将拥有不同的视图，这些视图需要来自 Dto 的不同数据，听起来您可能会受益于这些视图模型的不同并将您的 Dto 映射到这些。

这背后的想法之一是允许更大的自由来更改您的视图模型，因为它不会对应用程序的任何其他部分产生影响。如果您的 Dto 在多个视图中使用，那么对 Dto 的每次更改都需要您测试每个视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-05T21:32:42.043

对我来说，这个决定是基于我放置验证逻辑的位置。

场景#1：在视图模型中添加数据注释（在 UI 层）大大简化了编程。大多数情况下，DTO 和视图模型之间会有一对一的映射。在这种情况下，选项 1 很好。DL => DO => BL => DTO => PL => VM => V

场景 #2）如果验证未附加到 ViewModel，则 DTO 将替换为 ViewModel，并且 ViewModel 驻留在业务层中。DL => DO => BL => VM => PL => V

在验证逻辑驻留在域模型中的情况下，场景 #2 可能是完美的。许多 UI 应用程序都使用这些模型。UI 只是在列表中列出错误，由业务层给出（虽然不是非常用户友好）。随着应用程序发生业务规则更改，我们只更改域模型。同样，与数据库相关的验证可以通过 EF 自动生成（如果使用 .net），更改的范围更小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-27T18:24:07.453

在这里查看我的回复： [https ://stackoverflow.com/a/14059156/1288063](https://stackoverflow.com/a/14059156/1288063)

你说：这个选项似乎是最佳实践，但也似乎很难维护。

实施起来可能很繁重，大部分时间只需复制几行代码，但维护肯定不会。

# jquery - 巨型炸弹 API 到 JSON

> ID：12874329
> 
> 赞同：1
> 
> 时间：2012-10-13T15:03:45.943
> 
> 标签：jquery, json, api

我在解析来自 Giantbomb 的数据时遇到了一些严重的问题。我已经尝试了我书中的几乎所有技巧来解析数据，但它要么让我 Access Origin Null not allowed，要么 Unexpected : 在 Javascript 控制台中。我已经尝试过这样做：

```
$.getJSON("http://api.giantbomb.com/search/?api_key=KEY&query=crash%20bandicoot&field_list=name,image&format=jsonp&json_callback=gamer", function(data) {
console.log(data)
}); 
```

并且没有 JSONP 的东西：

```
$.getJSON("http://api.giantbomb.com/search/?api_key=KEY&query=crash%20bandicoot&field_list=name,image&format=json", function(data) {
console.log(data)
}); 
```

似乎没有任何效果 - 根本没有。谷歌似乎也没有任何答案。有人知道该怎么做吗？...

我的目标是从游戏中获得封面艺术，所以如果那里有更好的图书馆 - 请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:39:48.970

你正在做的两个问题：

1.  如果您`&format=jsonp`输入 URL，当您使用`$.getJSON`. 任何`$.getJSON`调用都只会得到不允许调用的错误，因为`Access-Control-Allow-Origin`. 您需要使用`$.ajax`并将 dataType 设置为 JSONP。

2.  您已经指定了一个名为 的 JSON 回调函数`gamer`。这是您应该使用`console.log`并执行任何其他操作来解析结果的数据。

像下面这样的东西应该可以工作：

```
$(document).ready(function(){
        $.ajax({
          url: "http://api.giantbomb.com/search/",
          type: "get",
          data: {api_key : "KEYHERE", query: "crash bandicoot", field_list : "name, image", format : "jsonp", json_callback : "gamer" },
          dataType: "jsonp"
        });
});

function gamer(data) {
    console.log(data);
} 
```

# json - WCF 服务返回 json

> ID：12874331
> 
> 赞同：1
> 
> 时间：2012-10-13T15:03:55.067
> 
> 标签：json, wcf, browser

我希望我的 WCF 服务返回 json。

我在 ASP.NET 开发服务器上对其进行了测试，它可以从 WCF 测试客户端运行（方法调用可以）。

但是从浏览器测试失败并出现错误 400 错误请求。

`web.config`：

```
<configuration>
   <system.web>
      <compilation debug="true" targetFramework="4.0" />
   </system.web>
   <system.serviceModel>
      <services>
         <service name="WebServiceExample" 
                  behaviorConfiguration="MetadataBehaviour">
            <endpoint 
                address="" 
                behaviorConfiguration="AjaxBehaviour" 
                binding="webHttpBinding" 
                contract="WebService.IWebServiceExample">
               <identity>
                  <dns value="localhost" />
               </identity>
             </endpoint>
          </service>
      </services>
      <behaviors>
          <serviceBehaviors>
             <behavior>
                <serviceMetadata httpGetEnabled="true"/>
                <serviceDebug includeExceptionDetailInFaults="false"/>
             </behavior>
             <behavior name="MetadataBehaviour">
                 <serviceMetadata httpGetEnabled="true" httpGetUrl=""/>
             </behavior>
          </serviceBehaviors>
          <endpointBehaviors>
             <behavior name="AjaxBehaviour">
                 <webHttp/>
             </behavior>
          </endpointBehaviors>
       </behaviors>
       <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
   </system.serviceModel>
   <system.webServer>
      <modules runAllManagedModulesForAllRequests="true"/>
   </system.webServer>
</configuration> 
```

**合同**：

```
[ServiceContract]
public interface IWebServiceExample
{        

    [OperationContract]
    [WebGet(UriTemplate = "/check/{key}",
       ResponseFormat = WebMessageFormat.Json)]
    DataElement Check(string key);
}

[DataContract]
public class DataElement
{

    [DataMember]
    public string Key { get; set; }

    [DataMember]
    public DateTime DateSince { get; set; }

    [DataMember]
    public DateTime DateTill { get; set; }       
} 
```

### SVC 标记：

```
<%@ ServiceHost Language="C#" Debug="true" 
    Service="WebService.WebServiceExample" 
    CodeBehind="WebServiceExample.svc.cs" %> 
```

我尝试的 URI 是：

```
http://localhost:16679/WebServiceExample.svc/check/asd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T20:24:45.223

呃。我懂了。我认为如果我告诉我我是如何经历的，这对其他人会很有用。

**首先，WCF 服务应用程序和 WCF 服务库之间**存在差异。我认为如果在服务应用程序中为端点设置完整地址可能会导致冲突，因为它是由服务器（IIS 或 ASP.NET 开发）设置的。

其次，我的错误是服务名称属性中**缺少命名空间**。我设置了 name="WebServiceExample" 而不是 name="WebService.WebServiceExample"。

我是 WCF 的新手，对我来说，name 属性意味着服务的完整类名并不明显。错误文本并没有表明它。

阅读本主题后，我来到了它 [WCF REST Service returns HTTP 400 Bad Request](https://stackoverflow.com/questions/8788031/wcf-rest-service-returns-http-400-bad-request)

解决的方法是在 Global.asax 中定义路由（变态的方式，但它有效）。

第三，我认为我的服务允许我查看 wsdl 页面是错误的。奇怪的是**RESTful WCF 服务生成 wsdl**，而​​且看起来像错误。但知道我可以说这是正常行为。

如果在配置中设置这样的东西

那么您的 RESTful 服务将允许显示

*本地主机上的 WSDL/Service.svc?wsdl*

和

*localhost/Service.svc/help 上的 REST 函数*

最后，一些有用的链接： http: [//www.codeproject.com/Articles/167159/How-to-create-a-JSON-WCF-RESTful-Service-in-60-sec](http://www.codeproject.com/Articles/167159/How-to-create-a-JSON-WCF-RESTful-Service-in-60-sec) --- WCF 服务库。我需要以管理员身份启动 VS 才能运行它。

[http://robbincremers.me/2012/01/05/wcf-rest-service-with-xml-json-response-format-according-to-content-type-header/](http://robbincremers.me/2012/01/05/wcf-rest-service-with-xml-json-response-format-according-to-content-type-header/) --- WCF服务应用

# python - Python列表元素间操作 - 这可以通过列表理解来完成吗？

> ID：12874336
> 
> 赞同：1
> 
> 时间：2012-10-13T15:04:27.153
> 
> 标签：python, list

我正在做一些回报计算，我想尽可能优雅地做下面的事情，但我对列表理解的了解还不够好。（列表 x 可以是任意长度，不仅仅是 4 个元素，元素是浮点数）。

```
x = [a, b, c, d]
y = [(a-b)/b, (b-c)/c, (c-d)/d] 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T15:09:59.937

这似乎是合理的，不是吗？

```
>>> x = [1.,2.,3.,4.]
>>> [ ((e-f)/f) for e,f in zip ( x[:-1], x[1:]) ]
[-0.5, -0.3333333333333333, -0.25] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T15:11:23.337

列表理解并不总是最好的方法，它只是一种语法捷径，旨在让代码更简洁。对于像您这样的复杂操作，我建议您采用旧方式。根据经验，我一直认为，如果你很难写，其他人肯定很难读。

无论如何，这里有两种可能的方法：

**使用列表推导的 Pythonic 方式：**

```
y = [(x[i] - x[i + 1]) / x[i + 1] for i in xrange(len(x - 1))] 
```

**老套路：**

```
y = []
for i in range(len(x - 1)):
    a = x[i]
    b = x[i + 1]
    y.append((a - b) / b) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T15:11:37.343

您可以`zip`按照其他人的建议使用，或者

```
[(x[i]-x[i+1])/x[i+1] for i in range(len(x)-1)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T15:19:55.307

尝试这个：

```
y = [(x[i-1]-x[i])/x[i] for i in range(1,len(x))] 
```

希望这可以帮助！

# apache-flex - flex 4 组合框 selectedIndex 失败

> ID：12874338
> 
> 赞同：1
> 
> 时间：2012-10-13T15:04:30.080
> 
> 标签：apache-flex, combobox, flex4

有一个 ComboBox 和一个数据提供者，其中有 n>3 个字符串值。

```
combobox.inputText.text = "value in dataprovider";
// OK, selectedIndex is set also 
```

几秒钟后，由用户按下按钮启动：

```
combobox.selectedIndex = 3; 
// OK 
```

几秒钟后再次这样做

```
combobox.inputText.text = "value NOT in dataprovider"; 
```

最后一行设置了 combobox.inputText，但让 selectedIndex 为 3，尽管 inputText-value 不在 dataprovider 值中。

这可以通过按下按钮 1，然后按下按钮 4，然后再按下按钮 1 来通过以下示例来证明。

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" 
               initialize="initializeHandler(event)">
    <fx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;
            import mx.events.FlexEvent;
            [Bindable] private var array : ArrayCollection;

            protected function initializeHandler(event:FlexEvent):void {
                array = new ArrayCollection();
                array.addItem("0:00");
                array.addItem("0:30");
                array.addItem("1:00");
                array.addItem("1:30");
                addEventListener(Event.ENTER_FRAME, ef);
            }

            protected function btnSelect1_clickHandler(event:MouseEvent):void {
                cb.selectedIndex = 3;
            }

            protected function btnSelect2_clickHandler(event:MouseEvent):void {
                cb.selectedIndex = -1;
            }

            protected function btnSelect3_clickHandler(event:MouseEvent):void {
                cb.textInput.text = "1:00";
            }

            protected function btnSelect4_clickHandler(event:MouseEvent):void {
                cb.textInput.text = "1:01";
            }

            protected function ef(event:Event):void {
                l.text = "inputText=\"" + cb.textInput.text + "\" selectedIndex=\""+cb.selectedIndex+"\"";
            }

        ]]>
    </fx:Script>
    <s:VGroup>
        <s:ComboBox id="cb" dataProvider="{array}"/>
        <s:Button label="select index 3" click="btnSelect1_clickHandler(event)" /> 
        <s:Button label="select index -1" click="btnSelect2_clickHandler(event)" />
        <s:Button label="select '1:00'" click="btnSelect3_clickHandler(event)" /> 
        <s:Button label="select '1:01'" click="btnSelect4_clickHandler(event)" />
        <s:Label id="l" />
    </s:VGroup>
</s:Application> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T16:25:21.940

尽量不要直接操作`inputText`. 相反，使用该方法`getItemIndex`在`ArrayCollection`. 请参阅上面重写的函数：

```
protected function btnSelect3_clickHandler(event:MouseEvent):void {
    cb.selectedIndex = array.getItemIndex("1:00");
}

protected function btnSelect4_clickHandler(event:MouseEvent):void {
    cb.selectedIndex = array.getItemIndex("1:01");
} 
```

# html - 使用 div 内的定位放置 8 个图像边框

> ID：12874341
> 
> 赞同：0
> 
> 时间：2012-10-13T15:05:10.907
> 
> 标签：html, css, positioning, css-position

![视觉的](../Images/50d5857bca6ad7d56bae85205fc2b143.png)

我正在尝试将*图像边框*放在`<div>`. 所有**红框**都是固定的；**黄色**框会重复，我一直在玩`relative`和`absolute`定位 - 不确定任何其他方式。我故意创建了所有需要的元素，我只需要逻辑上的帮助。

这是我的代码[http://jsfiddle.net/pedenski/snLGs/](http://jsfiddle.net/pedenski/snLGs/)

如果您能在这方面为我提供帮助，我将不胜感激。谢谢。

```
SIDE BORDER ----------------------------------------

tb = top border  (http://i50.tinypic.com/2ufua6r.gif)
lb = left border (http://i47.tinypic.com/24wr05d.gif)
rb = rightborder (http://i50.tinypic.com/3307521.gif)
bb = bottom border = (http://i45.tinypic.com/2gvsjfd.gif)

EDGE BORDER --------------------------------------------

tlc = top left corner (http://i45.tinypic.com/fxyvlc.gif)
trc = top right corner (http://i46.tinypic.com/5c10km.jpg)
blc = bottom left corner (http://i47.tinypic.com/jptv7q.gif)
brc = bottom right corner (http://i50.tinypic.com/1shc03.gif) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T17:18:42.387

我认为你需要重新考虑你的方法，并使用背景图像，而不是定位的 div。这是一篇关于如何做到这一点的文章：[http ://www.456bereastreet.com/archive/200406/flexible_box_with_custom_corners_and_borders/](http://www.456bereastreet.com/archive/200406/flexible_box_with_custom_corners_and_borders/)

不过，我只会在 CSS 中使用border-radius：http: [//border-radius.com/](http://border-radius.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:22:47.620

首先，您完全忘记了结束`</div>`标签。另一件事是，是的，`ID`在这里使用很好，但是对所有人都使用类，因为你有几乎相同的字符，除了`top`, `bottom`, `left`, 和`right`值。由于角落是固定宽度的，您可以考虑使用精灵。

### CSS

```
.eb {
    height: 16px;
    width: 20px;
    position: absolute;
}

#tlc {
    background-image: url(http://i45.tinypic.com/fxyvlc.gif);
    top: 0;
    left: 0;
}

#trc {
    background-image: url(http://i46.tinypic.com/5c10km.jpg);
    top: 0;
    right: 0;
}

#blc {
    background-image: url(http://i47.tinypic.com/jptv7q.gif);
    bottom: 0;
    left: 0;
}
#brc {
    background-image: url(http://i50.tinypic.com/1shc03.gif);
    bottom: 0;
    right: 0;
}

.sb {
    position: absolute;
}

#tb {
    background: url("http://i50.tinypic.com/2ufua6r.gif") repeat-x;
    top: 0;
    height: 20px;
    width: 255px;
}
#lb {
    background: url("http://i47.tinypic.com/24wr05d.gif") repeat-y;
    left: 0;
    height: 255px;
    width: 20px;
}
#rb {
    background: url("http://i50.tinypic.com/3307521.gif") repeat-y;
    right: 0;
    height: 255px;
    width: 20px;
}
#bb {
    background: url("http://i45.tinypic.com/2gvsjfd.gif") repeat-x;
    bottom: 0;
    height: 16px;
    width: 255px;
} 
```

### 小提琴：http: [//jsfiddle.net/FK2jw/](http://jsfiddle.net/FK2jw/)

# html - 语义正确的嵌套锚点

> ID：12874342
> 
> 赞同：2
> 
> 时间：2012-10-13T15:05:22.823
> 
> 标签：html, anchor

我正在开发一个网络应用程序。我们还创造了可以被描述为内联编辑的东西。只是为了描绘我试图解决的问题，我使用 Facebook 帖子的示例。

你有帖子喜欢。

**Steve Jobs 上传**了 5 张新照片

史蒂夫乔布斯是重定向到他的个人资料的链接，所以在 HTML 中，这将是：

```
<div class="post-block">
   <p><a href="stevejobs/" title="#">Steve Jobs</a> added 5 new photos.<p>
</div> 
```

但是我想要的是整个帖子“块”都是可点击的，尽管我只希望该名称看起来是链接。通常在 HTML 逻辑中会这样说：

```
<a href="stevejobs/" title="#"><div class="post-block">
   <p><a href="stevejobs/" title="#">Steve Jobs</a> added 5 new photos.<p>
</div></a> 
```

但这在语义上是不正确的。快速查看 HTML 4.01 或任何其他标准都会这样说：

> A 元素定义的链接和锚点不得嵌套；A 元素不得包含任何其他 A 元素。

除了使用 javascript 和为整个“div 锚”定义 div:hover 状态之外，如何在语义上正确地创建它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T15:09:48.910

由于您不想要 javascript（这会更容易），所以这是另一种方法：

```
<div class="post-block">
   <p><a href="stevejobs/" title="#">Steve Jobs <span style="color:none; text-decoration:none;">added 5 new photos.</span></a></p>
</div> 
```

可以添加任何其他样式效果。比如`cursor: none;`等等看你想要的效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-20T05:19:12.647

HTML：

```
<div class="post-block">
 <p><a href="stevejobs/" title="#"><span class="author">Steve Jobs</span> <span class="posttext">added 5 new photos.</span></a> <p>
</div> 
```

CSS：

```
.post-block { margin: 0px; } 
.post-block p { margin: 0px; } 
.post-block p a {display: inline-block; background-color: transparent; width: 100%; min-height: 100px; /* can be varied */ }
.post-block p span.author { display: inline-block; }
.post-block p span.posttext { display: inline-block; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-24T18:00:06.243

多年来我一直有同样的问题，因为我也想维护 HTML 语义和 SEO 语义，例如标题标签和段落等，同时仍然保持默认锚行为，例如在浏览器中指示目标 URL，保持标签完整并保持默认的锚点悬停动作，JavaScript 本身并不这样做。

我能想到的最佳解决方案是在（覆盖）内容上放置一个绝对定位的块级锚点，并使用父元素的悬停动作将任何行为集成到实际内容中，这在语义上是正确的，应该由所有网络爬虫，因此：

```
.post-block {
  position: relative;
}

.post-block p span.anchor {
  text-decoration: underline;
}

.post-block:hover p span.anchor {
  text-decoration: none;
}

.postblock a.overlay {
  display: block;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1; /* to be on the safe side */
  text-indent: -9999em;
}
```

```
<div class="post-block">
  <p><span class="anchor">Steve Jobs</span> added 5 new photos.<p>
  <a class="overlay" href="stevejobs/" title="#">Steve Jobs</a>
</div>
```

这适用于块和网格布局，甚至可以很好地与触摸设备配合使用，因为锚本身没有悬停动作 - 有些设备会劫持第一次点击:)

不是 100% 确定搜索引擎是否会惩罚文本缩进，但有许多额外的解决方法，[在这里讨论](http://css-tricks.com/forums/topic/text-indent-9999px-bad-seo/)让任何感兴趣的人开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T15:33:38.630

在 HTML5 中，`a`可以用作块级元素。

```
<div class="post-block">
   <a href="stevejobs/"><p>Steve Jobs added 5 new photos.<p></a>
</div> 
```

现在，使用 CSS ( ) 删除默认链接样式`.post-block a {text-decoration:none;}`。

要获取名称的链接样式，请将名称包含在一个元素中并添加一个类，如“name”。该`b`元素在这里是一个合适的选择（否则使用`span`）：

```
<div class="post-block">
   <a href="stevejobs/"><p><b class="name">Steve Jobs</b> added 5 new photos.<p></a>
</div> 
```

现在恢复样式：`.post-block .name {text-decoration:underline;}`.

如果您愿意，将名称包含在元素中甚至允许您使用微格式 hCard。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T15:15:44.603

只需将第二个示例中“史蒂夫乔布斯”周围的锚标记替换为跨度并根据需要设置样式：

```
<a href="stevejobs/" title="#"><div class="post-block">
    <p><span class="post-block-user">Steve Jobs</span> added 5 new photos.<p>
</div></a> 
```

使用 CSS：

```
a {
    cursor: default;
}
.post-block-user {
    font-weight: bold;
    cursor: pointer;
} 
```

或您希望应用或不应用的任何样式。实际上，我会尝试丢失 div 并将类放在锚标记上，除非有其他原因保持该结构。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-17T13:41:03.097

禁止嵌套锚标记。

如果您只想将名称显示为链接，请使用锚标记。如果您需要整个块可点击，请在 jquery 的 onclick 函数中执行此操作。就像是

```
$(.post-block).click(//your function); 
```

# python - 从 Python 运行程序并在许多线程中捕获 C 输出

> ID：12874347
> 
> 赞同：2
> 
> 时间：2012-10-13T15:06:12.007
> 
> 标签：python

我有一个 C 程序，它需要两个参数并输出一个数字。

> ./a.out 2 3（例如）。

它做了一些计算成本很高的操作，所以我想知道是否可以使用 Python 的多处理库来运行一堆 C 程序，然后将所有数字编译成列表或表格或一些数据结构？

谢谢。

这不是重复的，因为我的问题是我怎样才能并行（例如许多线程）！

我不知道如何让 1 个 Python 程序运行数百个 C 程序并将*所有*输出捕获到 Python 列表中。使用过程似乎是 1 对 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:15:50.990

您可以使用 a`ThreadPool`并行运行许多任务。

```
from multiprocessing.pool import ThreadPool
import subprocess
def f(x):
    a, b = x
    res = subprocess.check_output(["./a.out", str(a), str(b)])
    return int(res.strip())
p = ThreadPool()
results = p.map(f, [(2,3), (5,6), (9,10)]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:23:46.100

您可以`subprocess.Popen`在不使用线程的情况下一次运行多个进程。

如果它们的输出足够短以适合操作系统缓冲区，则相当容易：

要异步启动程序，请使用

```
subprocess.Popen(['command', args],stdout=subprocess.PIPE) 
```

只需对所有命令执行此操作并将结果放入数组中。

然后：

```
 for process in subprocesses:
   process.wait()
   stdout,stderr = process.communicate() 
```

如果子进程输出大量数据，这将不起作用，因为 wait() 会死锁：进程想要写入更多，但缓冲区已满，您正在等待进程完成后再读取。

在这种情况下，您将需要查看`select.poll()`或类似的 API：s

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:18:09.557

您可能想研究使用 Pythons[`ctypes`](http://docs.python.org/library/ctypes.html)模块，它可以让您将 C 程序编译到库中，然后从您的 python 脚本中调用该库。

此外，[swig](http://swig.org/)项目将让您从 Python 调用 C 或 C++ 代码而不会太麻烦（请参阅[此答案](https://stackoverflow.com/a/9343338/600110)）。

如果你走这条路，你可能应该考虑使用线程池或其他某种机制来并行调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T15:13:05.847

您可以尝试使用 python 的 subprocess 模块，它允许您启动进程，等待它结束并捕获它的所有输出（stdout，stderr）。

在这里您可以查看子流程文档：[http ://docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)

你可以看看我的例子：

```
#file t1.py

import time

def __main__():
    time.sleep(10)
    print(10)

if __name__ == "__main__":
    __main__()

#file: t2.py

import time
import subprocess

def __main__():
    N = 10
    V = 0

    pp = [subprocess.Popen("t1.py", stdout = subprocess.PIPE, shell = True) for _ in range(0, N)]
    oo = ["" for _ in range(0, N)]
    ff = [False for _ in range(0, N)]
    while True:
        for i in range(0, N):
            oo[i] += pp[i].stdout.read()
            if pp[i].poll() != None:
                ff[i] = True
        done = all(ff)
        if done:
            for o in oo:
                V += int(o)
            break
    print(V)

if __name__ == "__main__":
    __main__() 
```

文件 t2.py 完全符合您的要求。文件 t1.py 模拟您长时间运行的 C 程序。

我编辑了我的示例，因为 perh 是正确的，这里不需要线程，因为子进程会创建新进程。如果你的程序有一个巨大的输出（大于管道长度限制），他也可能会出现死锁，所以我们必须从管道中读取并等待进程完成。

# heroku - 为什么域不显示其完整路径？

> ID：12874350
> 
> 赞同：1
> 
> 时间：2012-10-13T15:06:25.590
> 
> 标签：heroku, dns, registrar

我有一个托管在 Heroku 上的应用程序，并且我有一个自由客户将她的域指向我的 Heroku 应用程序（Cedar 堆栈）。该域现在正确指向我的应用程序，但它不显示完整路径。这意味着无论是在 / 或 /contact（而不是 mydomain.com/contact）还是 /accounts/profile（而不是 mydomain.com/accounts/profile），它都将保留在 mydomain.com。因此，单击刷新按钮将导致 / 页面被加载。

发生这种情况的原因可能是什么？非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T05:52:06.413

很可能她正在使用她的域名注册商提供的某种基于框架的 Web 转发功能，这意味着`http://mydomain.com/`返回的 HTML 页面带有针对您的 heroku 应用程序的框架。

你想要的是让她为`A`指向[Heroku IPs](https://devcenter.heroku.com/articles/custom-domains#naked-domains-mydomaincom)的“domain.com”创建记录，并`CNAME`为指向 的“www.domain.com”创建记录`myapp.herokuapp.com`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:44:44.637

您是否使用自定义域配置了 Heroku 应用程序？

使用 Heroku 工具带，运行`heroku domains:add mydomain.com`

有关详细信息，请参阅[https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T04:35:14.553

我的客户允许我访问她的域名注册商，我发现了问题。原来她做了一个302重定向。所以这是我如何解决我的问题的完整解决方案：

1.  在 shell “heroku 域：添加 www.example.com” 上添加域 - Heroku 文章：[https ://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)
2.  将 www 类型的 CNAME 记录配置为指向 myapp.herokuapp.com
3.  为了确保 example.com 也被正确路由，请从您的域管理器进行 301 永久重定向到[http://www.example.com](http://www.example.com)

就是这样。感谢大家的帮助！

# ios - 在 iphone4 中打电话后 AudioQueueStart 失败

> ID：12874351
> 
> 赞同：3
> 
> 时间：2012-10-13T15:06:43.073
> 
> 标签：ios, audioqueue

我正在尝试从 ios6 和 iphone4 中使用 AudioQueue 的应用程序进行录制，我发现当我用手机完成的最后一件事是通话时，AudioQueueStart 失败并显示 (2003329396)，并且无法启动输入队列了。

如果没有之前的电话，AudioQueueStart 多次运行良好。

这是以这种方式发生的：

```
I do a phone call.
Start my app.
Creating unique audio session...
Creating session property listener...
Activating session...
Setting audio category... (Record)
Property listener received... 1919902568 kAudioSessionProperty_AudioRouteChange
Reason is: kAudioSessionRouteChangeReason_CategoryChange 
Inputs avaliable (here Im looking in route dictionary information, if i have inputs     information in new route )
Creating new Queue Input...
Allocate/Enqueue queue buffers...
Start Record Queue...
OSStatus ERROR (2003329396) 
```

这似乎不影响iphone4s。

在这种情况下，是否有任何正常的方法可以恢复将 AudioQueueStart 用于输入队列的能力？

谢谢，对不起我的格式...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T19:02:23.353

您需要处理音频中断阅读以下文档

[http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/HandlingAudioInterruptions/HandlingAudioInterruptions.html](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/HandlingAudioInterruptions/HandlingAudioInterruptions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:44:54.570

这里有类似的问题。

我最终在识别为 iPhone 4 的设备上忽略了这个特定的错误代码。尽管有错误代码，我的队列仍然正常启动。

# ruby-on-rails - 在 Rails 3.2 中插入具有错误值的记录时出现问题

> ID：12874353
> 
> 赞同：1
> 
> 时间：2012-10-13T15:06:59.113
> 
> 标签：ruby-on-rails, sqlite3-ruby

最近开始学习Rails。

现在，我正在我自己的项目中实现友谊关系。这是类似的代码（其中一些是从互联网收集的）

```
class Friendship < ActiveRecord::Base 

  attr_accessible :friend_id, :message, :user_id, :approved

  validates_uniqueness_of :user_id, :scope => [:friend_id]

  validates :approved, :presence => true
  belongs_to :user
  belongs_to :friend, :class_name => "User", :foreign_key => "friend_id"

end 
```

///////////////////

```
class User < ActiveRecord::Base
   has_many :friendships
   has_many :inverse_friendships, :class_name => "Friendship", :foreign_key => "friend_id"
   has_many :direct_friends, :through => :friendships, :conditions => { 'friendships.approved' => true }, :source => :friend
end 
```

////////////////////

```
class CreateFriendships < ActiveRecord::Migration
  def change
    create_table :friendships do |t|
    t.integer :user_id
    t.integer :friend_id
    t.text :message
    t.boolean :approved, :default => false

    t.timestamps
  end
end 
```

当我从控制台“rails c”创建新的友谊时，当**approved = true时就可以了**

```
Friendship.create(:user_id=>7, :friend_id=>11, :approved=>1, :message=>'Be my friend :D')
(0.1ms)  begin transaction
SQL (0.9ms)  INSERT INTO "friendships" ("approved", "created_at", "friend_id", "message", "updated_at", "user_id") VALUES (?, ?, ?, ?, ?, ?)  [["approved", true], ["created_at", Sat, 13 Oct 2012 14:15:36 UTC +00:00], ["friend_id", 11], ["message", "Be my friend :D"], ["updated_at", Sat, 13 Oct 2012 14:15:36 UTC +00:00], ["user_id", 7]]
(12.2ms)  commit transaction 
```

但是当我设置approved = false时，它就关闭了

```
Friendship.create(:user_id=>6, :friend_id=>7, :approved=>0)
(0.1ms)  begin transaction
(0.1ms)  rollback transaction
=> #<Friendship id: nil, user_id: 6, friend_id: 7, message: nil, approved: false, created_at: nil, updated_at: nil> 
```

首次。我以为是数据库（**sqlite3**）问题，但是当我从 sqlite3 终端尝试这个时，它很好

```
sqlite> insert into friendships (user_id, friend_id, created_at, updated_at) values(11, 6, '2012-10-13 14:15:36', '2012-10-13 14:15:36');
sqlite> select * from friendships;
        id = 1
   user_id = 11
 friend_id = 6
   message = 
  approved = f
created_at = 2012-10-13 14:15:36
updated_at = 2012-10-13 14:15:36 
```

你能告诉我发生了什么以及如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:13:34.003

您指定：

```
validates :approved, :presence => true 
```

但在 Rails 中：

```
false.present? # => false 
```

因此，您的验证失败。

您可以通过查看验证错误来验证这一点：

```
friendship = Friendship.create(:user_id=>6, :friend_id=>7, :approved=>0)
friendship.errors 
```

# c# - 使用它从控件分配 EventHandler

> ID：12874355
> 
> 赞同：0
> 
> 时间：2012-10-13T15:07:05.743
> 
> 标签：c#, event-handling

有点难以解释，但有没有办法做类似的事情：

```
control1.ShownEditor += EventHandler;

...

control2.ShownEditor += control1.ShownEditor; //wrong 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:08:19.517

将您的事件保存到 EventHandler 委托。

```
EventHandler Myevent = () => {/*event handling code here*/}; 
```

将事件处理程序委托分配给控制事件

```
control1.ShownEditor += Myevent;
control2.ShownEditor += Myevent; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T15:12:53.150

我认为你需要这样的东西[来](http://www.codeproject.com/Articles/34990/Get-Delegate-from-Event-s-Subscription)绑定`EventHandler`。当您拥有处理程序时，您可以轻松地将其绑定到事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T15:28:35.563

简单地说：您**不能**使用`EventHandler`控件的事件并将其分配给另一个事件。所以这是不可能的：

```
control2.ShownEditor += control1.ShownEditor; //wrong 
```

唯一的方法是`EventHandler`单独创建一个并将其分配给两个控件的事件。

另一种有害的解决方案可能是通过 提取委托`Reflection`，但正如我所说，这实际上很危险，[请看 Hans Passant 的这个答案：是否可以从一个控件“窃取”事件处理程序并将其交给另一个控件？](https://stackoverflow.com/questions/293007/is-it-possible-to-steal-an-event-handler-from-one-control-and-give-it-to-anoth/293031#293031).

# php - 验证验证码功能

> ID：12874364
> 
> 赞同：2
> 
> 时间：2012-10-13T15:08:47.443
> 
> 标签：php, javascript, captcha

我无法为我编写的验证码创建验证码。这是验证码.php：

```
<?php
  // this part should be saved as captcha.php
  // best usage is to put this file with 5 random TTF font files in a folder named captcha
  // for easy access and simplicity of use
  // Captcha script for GD > 2.0
  /* Few notes about this script
  the width and height are measured in px so adjust according to your desire
  most variables in the variable section control the entire script
  so no editing below them should be needed
  the session variable $_SESSION['tt_pass'] is what holds the pass in the session
  can be changed on line 45
  */
  /********************VARIABLES FOR THIS SCRIPT********************/
  /*********SHOULD BE THE ONLY THING YOU HAVE TO CHANGE*********/
  $pass_length = 5; // passphrase length
  $make_upper = true; // all upper case letters in image? true or false
  $width = 200; $height = 60; // image dimensions
  $font_path = dirname(__FILE__);
  // TTF font @ only change this if you relocate the TTF files!
  $dark_font = true;
  // if you want it easier to read, side effect bots can read it easier as well  true or false
  /********************END VARIABLES FOR SCRIPT********************/
  /*********         EDIT BELOW THIS AT YOUR OWN RISK :)           *********/
  // create a passphrase  ** it is case sensitive!!! **
  session_start();
  $passwd = 'Swatsolutions';
  $i = 0;
  while ($i < $pass_length) {
    $passwd .= chr(rand(97, 122));
    $i++;
  }
  if ($make_upper) {
    $passwd = strtoupper($passwd);
  }
  // store the passphrase
  $_SESSION['tt_pass'] = $passwd;
  // get available fonts
  $fonts = array();
  if ($handle = opendir($font_path)) {
    while (false !== ($file = readdir($handle))) {
      if (substr(strtolower($file), -4, 4) == '.ttf') {
        $fonts[] = $font_path.'/'.$file;
      }
    }
  }
  if (count($fonts) < 1) {
    die('No Fonts Found!!!');
  }
  // image header
  header("Content-Type: image/jpeg");
  // clear the cache
  header("Expires: Fri, 09 Jan 2008 05:00:00 GMT");
  header("Last-Modified: ".gmdate("D, d M Y H:i:s")."GMT");
  header("Cache-Control: no-store, no-cache, must-revalidate");
  header("Cache-Control: post-check=0, pre-check=0", false);
  header("Pragma: no-cache");
  // create image
  $img = imagecreatetruecolor($width, $height);
  // fill background with random shade of pastel
  $bg = imagecolorallocate($img, rand(210, 255), rand(210, 255), rand(210, 255));
  // draw rectangle
  imagefilledrectangle($img, 0, 0, $width, $height, $bg);
  // make the background jaggedy with differnet colored polygons
  $right = rand(10, 30);
  $left = 0;
  while ($left < $width) {
    $poly_points = array(
      $left, 0,
      $right, 0,
      rand($right-25, $right+25), $height, rand($left-15, $left+15), $height);
      $c = imagecolorallocate($img, rand(210, 255), rand(210, 255), rand(210, 255));
      imagefilledpolygon($img, $poly_points, 4, $c);
      $random_amount = rand(10, 30);
      $left += $random_amount;
      $right += $random_amount;
    }
    // base range for lines
    $c_min = rand(150, 185);
    $c_max = rand(195, 280);
    // draw vertical lines
    $left = 0;
    while ($left < $width) {
      $right = $left + rand(3, 7);
      $offset = rand(-3, 3);
      $line_points = array(
        $left, 0,
        $right, 0,
        $right + $offset, $height,
        $left + $offset, $height
      );
      $pc = imagecolorallocate($img, rand($c_min, $c_max),
        rand($c_min, $c_max),
        rand($c_min, $c_max));
      imagefilledpolygon($img, $line_points, 4, $pc);
      $left += rand(20, 60);
    }
    // draw horisontal lines
    $top = 0;
    while ($top < $height) {
      $bottom = $top + rand(1, 4);
      $offset = rand(-6, 6);
      $line_points = array(
        0, $top,
        0, $bottom,
        $width, $bottom + $offset,
        $width, $top + $offset
      );
      $pc = imagecolorallocate($img, rand($c_min, $c_max),
        rand($c_min, $c_max),
        rand($c_min, $c_max));
      imagefilledpolygon($img, $line_points, 4, $pc);
      $top += rand(8, 15);
    }
    // character spacing
    $spacing = $width/(strlen($passwd)+2);
    $x = $spacing;
    // draw each character
    for ($i=0; $i < strlen($passwd); $i++) {
      $letter = $passwd[$i];
      $size = rand($height/3, $height/2);
      $rotation = rand(-30, 30);
      $y = rand($height * .90, $height - $size - 4);
      // random font
      $font = $fonts[array_rand($fonts)];
      // color for letter
      if ($dark_font) {
        $r = rand(0, 200); $g = rand(0, 200); $b = rand(0, 200);
      } else {
        $r = rand(100, 255); $g = rand(100, 255); $b = rand(100, 255);
      }
      // create letter and shadow colors
      $color = imagecolorallocate($img, $r, $g, $b);
      $shadow = imagecolorallocate($img, $r/3, $g/3, $b/3);
      // draw the shadow than letter
      imagettftext($img, $size, $rotation, $x, $y, $shadow, $font, $letter);
      imagettftext($img, $size, $rotation, $x-1, $y-3, $color, $font, $letter);
      // space the letter
      $x += rand($spacing, $spacing * 1.5);
    }
    // clear the memory used to make the captcha image
    imagejpeg($img);
    imagedestroy($img);
  ?> 
```

所有功能都通过 Wordpress 中的功能页面进行处理。我对 Wordpress 非常陌生，我这样做是为了帮一个朋友。如果有人可以帮助编写代码来验证验证码，我将不胜感激。在下面的链接中，您可以看到我有验证码和刷新工作，但没有实际功能，因为它只允许在不检查验证码的情况下发送表单。

[http://swatbeta.brilliantbulb.com/contact/request-info/](http://swatbeta.brilliantbulb.com/contact/request-info/)

这是我需要的函数的quote.php表单，有人可以告诉我添加代码的内容和位置。我的信息超载，似乎有理由不正确。

```
 <?php
    $to = "@gmail.com,@brilliantbulb.com";
    $from = $_POST["email"];
    $subject = "Quote Request";
    $name =  $_POST['name'];
    $phone =  $_POST['phone'];
    $project_description =  $_POST['project_description'];
    $project_timeline =  $_POST['project_timeline'];
    $email = $_POST["email"];

    // validation
    $validationOK=true;
    if (Trim($email)=="") $validationOK=false;
    if (!$validationOK) {
      print "<meta http-equiv=\"refresh\" content=\"0;URL=/?page_id=258\">";
      exit;
    }
    $body = "Please contact the following person to discuss their project outlined    below.\n\nFrom: $name\nEmail: $email\nPhone: $phone\n\nProject Description:\n$project_description\n\nThe following is information concerning the timeline.\n$project_timeline

    ";

    $success = mail($to,$subject,$body,"From: <$email>");

    if ($success){
      print "<meta http-equiv=\"refresh\" content=\"0;URL=/thank-you/\">";
    }
    else{
      print "<meta http-equiv=\"refresh\" content=\"0;URL=/?page_id=258\">";
    }

       ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:07:48.853

The captcha needs to be validated on the server side otherwise its simple to bypass.

Inside `quote.php` where the form posts to, add `session_start();` at the beginning of the script and prior to sending the form data to email, use some code similar to the following to validate the captcha:

```
if (!empty($_SESSION['tt_pass']) && $_SESSION['tt_pass'] === $_POST['tt_pass']) {
    // captcha is valid, proceed to send mail
    unset($_SESSION['tt_pass']);  // code valid, cannot be used more than once
} else {
    // captcha code is invalid, redisplay form and show error message
    echo 'The security code entered was incorrect.  ' 
        .'Please <a href="javascript:history.go(-1)">go back</a> and try again.';
    exit;
} 
```

If you don't want the comparison to be case-sensitive, pass the session value and the form value through `strtolower()`.

Hope that helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:51:09.127

如果你的 MVC 有一个会话类，它会在 __construct 函数中启动它里面的会话。

在`captcha.php`put的顶部

```
<? php include ("../../library/session.class.php");

try
{
    $session = new Session();
}
catch (Exception $e) {
    echo $e->getMessage();
    exit;
} 
```

而不是标准：`session_start();`.

# google-app-engine - 如何使用 Python 在 GoogleAppEngine 中有效地使用查询？

> ID：12874365
> 
> 赞同：0
> 
> 时间：2012-10-13T15:08:51.123
> 
> 标签：google-app-engine, google-cloud-datastore

假设我的数据存储中有一个 Dog 类型的实体。我想对所有 Dogs 执行一个简单的操作，但我有很多狗。

```
all_dogs = Dog.all(keys_only=True)
print dogs.count(100000) #returns 79234, or some equally large number 
```

如果我只是这样做：

```
for dog_key in all_dogs:
    k = dog_key 
```

我的理解是一样的：

```
for dog_key in all_dogs.run(batch_size=20):
    k = dog_key 
```

然后我会得到一个像这样的数据存储超时异常：

`Timeout: The datastore operation timed out, or the data was temporarily unavailable.`

如果我将 batch_size 增加到 1000，那么我就没有问题了。

是什么导致操作计时器启动以及超时需要多长时间？如何确保不会超时？

在这种情况下，增加 batch_size 会有所帮助，但如果我有数百万个 Dog 实体怎么办？如何确保在对它们执行操作时不会超时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T15:26:39.200

如果您有很多狗并且想要处理所有实体：

*   您可以使用 map/reduce 库。

如果你想自己编程：

*   您可以使用任务，它们将运行 10 分钟
*   您可以使用光标链接任务（延长 10 分钟的最后期限）
*   你可以使用后端
*   您可以使用批处理操作来提高效率
*   您可以使用仅关键操作来提高效率
*   您可以使用异步操作来提高效率
*   您可以使用投影查询来提高效率

# php - 变量不保存值时无法运行下一个进程

> ID：12874366
> 
> 赞同：2
> 
> 时间：2012-10-13T15:09:01.277
> 
> 标签：php, mysql

首先，我想在 2 个表之间进行比较，`tb_wrapper`并`tb_summary`获取其中`tb_wrapper`不存在的数据，`tb_summary`然后保存在`$link`. 如果我没有得到相同的数据，我想打印结果`$link`。当我没有得到不同的数据时，我希望它进入另一个进程。

这是代码：

```
$q2 = mysql_query(" SELECT 
                          a.doc_url 
                    FROM
                          tb_wrapper a
                    LEFT JOIN 
                          tb_summary b
                          ON a.doc_name = b.doc_summ
                    WHERE
                          b.doc_summ IS NULL");

while ($row = mysql_fetch_array($q2)){
    $link = $row['doc_url'];
    if ($link){ 
       include 'next_process.php';
    }
    else {
       include 'blablabla.php';
    }
} 
```

它不起作用。当我没有得到不同的数据或`$link`没有保存值时。

桌子 ：

```
CREATE TABLE tb1
(`id` int, `doc_name` varchar(100), `doc_url` varchar(50))
}

CREATE TABLE tb2
(`id` int, `doc_summ` varchar(100))
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:45:07.023

由于您的表缺少`PRIMARY KEY`any 或 any other `INDEX`，因此此查询可能需要一些时间：

```
SELECT a.doc_url 
FROM tb_wrapper a
WHERE a.id NOT IN ( 
    SELECT tw.id
    FROM tbl_wrapper tw
    LEFT JOIN tb_summary b
        ON tw.doc_name = b.doc_summ ) 
```

# javascript - 如果下拉菜单中的选项是使用 javascript 动态生成的，我如何更改它们

> ID：12874367
> 
> 赞同：0
> 
> 时间：2012-10-13T15:09:12.823
> 
> 标签：javascript, jquery

> **可能重复：**
> [如果是动态生成的，我如何更改下拉菜单中的选项？](https://stackoverflow.com/questions/12872713/how-can-i-change-options-in-dropdowns-if-it-is-generated-dynamically)

我正在使用这个可以生成一些下拉菜单和文本输入字段的 JSFIDDLE。具体来说它的作用：它动态生成一组输入字段，其中 1 个集合 = 3 个下拉菜单和 1 个文本输入字段。我正在使用它在我的 Web 表单上生成多达 15 个，这些表单将使用 PHP 提交到数据库。

这是[**小提琴**](http://jsfiddle.net/harshdhama/E3gWX/)

我需要做的是：
让我们说在上面链接的这个 jsfiddle 中，有人选择 5 并单击添加按钮，因此它将动态生成 5 组输入，其中 1 组 = 3 个下拉菜单 + 1 个文本输入字段和 1 个删除按钮删除该特定集。现在让我们选择第 1 组。如果用户在该组的第一个下拉列表中选择了某些内容，则它应该更改同一组中其余两个下拉列表中可用的选项。（我的意思是说它应该根据第一个下拉菜单中选择的主题更改其余下拉菜单中的选项。）

例如，我想用我的工作 jsfiddle 做什么，你可以参考这个[链下拉列表](http://jsfiddle.net/7K2Eu/63/)

我从未使用过 javascript，这是我在 Web 表单中遇到的唯一 javascript 部分并面临问题。需要帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:43:39.863

只需添加以下代码，将接下来的两个选择更改为第一个中选择的值：

```
$('#dropbox').on('change', 'select', function() {
    if (! $(this).prev().length) { //if this is the first select
        val = $(this).val();//take value of first select
        $(this).next().val(val);       //and set it to the
        $(this).next().next().val(val);//two next selects
    }
})​; 
```

看我的工作[**演示**](http://jsfiddle.net/gnel/E3gWX/6/)

**更新**：
所以在 OP 评论之后，我在这里添加一个示例来替换接下来两个选择的选项，而不是像我之前的示例那样仅从现有的选项中进行选择，这里是：

```
$('#dropbox').on('change', 'select', function() {
    if (! $(this).prev().length) { //if this is the first select
        //val = $(this).val();//take value of first select
        $(this).next().html($("<option>").val("0").text("NEW OPT 1").add( $("<option>").val("1").text("NEW OPT2")));
        $(this).next().next().html($("<option>").val("0").text("GOOD OPT 1").add( $("<option>").val("1").text("GOOD OPT2")));
    }
}); 
```

观看现场[**演示**](http://jsfiddle.net/gnel/E3gWX/34/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:28:47.393

如果我正确理解您希望在其中一个更改时将每个选择更改为同一行的相同值，我相信此演示可以满足您的需求

[http://jsfiddle.net/E3gWX/1/](http://jsfiddle.net/E3gWX/1/)

**编辑：**

您最初的概念对于依赖链选择来说太原始​​了。这是一个演示，可以让您更接近您所需要的 [http://jsfiddle.net/Ywzjv/2​​/](http://jsfiddle.net/Ywzjv/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T16:50:04.203

在这里，[链接](http://jsfiddle.net/E3gWX/33/)- 它只执行下一个，而不是级联，但您可以使用另一个 .each(:

```
$(function() {
    $("select[id!=sel]").live('change',function(e) {
        selectedValue = $(this).find(":selected").val()
        if ($(this).next().attr('name').match(/input[0-9]_[0-9]/)) {
            $(this).next().find('option').each(function() {
                if ($(this).val() == selectedValue) {
                    $(this).hide();
                } else {
                    $(this).show();
                }
            })
        }
    })
}) 
```

# .net - 具有同步子任务的异步父任务

> ID：12874369
> 
> 赞同：1
> 
> 时间：2012-10-13T15:09:22.200
> 
> 标签：.net, task-parallel-library

我想知道这是否可以在不使用协程的情况下完成：

```
private void GetAll()
{
    if (_refreshA)
    {
        collA = new ObservableCollection(GetA<A>());
        _refreshA = false;
    }

    if (_refreshB)
    {
        collB = new ObservableCollection(GetB<B>(param))
        _refreshB = false;
    }

    if (_refreshC)
    {
        collC = new ObservableCollection(GetC<C>())
        _refreshC = false;
    }
} 
```

CollA、CollB 和 CollC 用于 UI 线程。我需要 GetAll 确实在与 UI 不同的线程上执行，并且我需要 GetA()、GetB(param) 和 GetC() 一个接一个地执行（而不是并行执行）。

结果应该是（如果所有 3 _refreshX 都为真）：

```
create new thread
execute GetA() on new thread
wait for data to arrive
update UI collection with new data
create new thread
execute GetB(param) on new thread
wait for data to arrive
update UI collection with new data
create new thread
execute GetC() on new thread
wait for data to arrive
update UI collection with new data 
```

这只能使用 TPL 完成，还是我也需要使用协程？

**编辑**：因为我有一个错误的印象是异步等待不能在 .NET 4 上使用，svick 和亚当罗宾逊向我指出，我将尝试使用异步等待来实现这一点：

```
System.Diagnostics.Debug.WriteLine(string.Format("Loading data started. Thread: {0}, {1}", System.Threading.Thread.CurrentThread.GetHashCode(), DateTime.Now));

IsBusy = true;
//Task.Factory.StartNew(() => GetDataBatch()); // UI is responsive
GetDataBatch(); // UI is not freezed (it is shown), but it is not responsive

System.Diagnostics.Debug.WriteLine(string.Format("Loading data completed. Thread: {0}, {1}", System.Threading.Thread.CurrentThread.GetHashCode(), DateTime.Now));

private async Task GetAll()
{
    if (_refreshA)
    {
        collA = new ObservableCollection(await Task.Run(() => GetA<A>()));
        _refreshA = false;

        System.Diagnostics.Debug.WriteLine(string.Format("GetA items loaded. Thread: {0}, {1}", System.Threading.Thread.CurrentThread.GetHashCode(), DateTime.Now));

    }

    if (_refreshB)
    {
        collB = new ObservableCollection(await Task.Run(() => GetB<B>(param)));
        _refreshB = false;

        System.Diagnostics.Debug.WriteLine(string.Format("GetB items loaded. Thread: {0}, {1}", System.Threading.Thread.CurrentThread.GetHashCode(), DateTime.Now));
    }

    System.Threading.Thread.Sleep(10000);

    if (_refreshC)
    {
        collC = new ObservableCollection(await Task.Run(() => GetC<C>()));
        _refreshC = false;

        System.Diagnostics.Debug.WriteLine(string.Format("GetC items loaded. Thread: {0}, {1}", System.Threading.Thread.CurrentThread.GetHashCode(), DateTime.Now));
    }
} 
```

结果是：

```
Loading data started. Thread: 9, 15-Oct-12 02:35:00
Loading data completed. Thread: 9, 15-Oct-12 02:35:00
GetA items loaded. Thread: 9, 15-Oct-12 02:35:00
GetB items loaded.  Thread: 9, 15-Oct-12 02:35:01
GetC items loaded.  Thread: 9, 15-Oct-12 02:35:11 
```

问题：UI 没有冻结（显示视图），但它也没有响应。例如，如果我将鼠标悬停在菜单项上，则什么也不会发生。我有一个在数据加载期间显示的模板（忙碌模板），它应该向用户指示正在发生的事情。此模板未显示，看起来它没有足够的 CPU 时间来绘制自己。如果我使用此代码：

```
Task.Factory.StartNew(() => GetDataBatch()); // UI is responsive
//GetDataBatch(); // UI is not freezed (it is shown), but it is not responsive 
```

然后 UI 响应，繁忙的数据模板显示在屏幕上，但问题是现在所有收集数据都属于 UI 以外的其他线程，所以我无法从 UI 线程对它们进行任何操作。

async await 如何处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T14:47:53.240

使用 C# 5 `async`- `await`，这将非常简单：运行需要在后台线程上运行的代码，`Task.Run()`然后`await`使用`Task`, 异步等待它完成并在 UI 线程上恢复：

```
private async Task GetAll()
{
    if (_refreshA)
    {
        collA = new ObservableCollection(await Task.Run(() => GetA<A>()));
        _refreshA = false;
    }

    if (_refreshB)
    {
        collB = new ObservableCollection(await Task.Run(() => GetB<B>(param)));
        _refreshB = false;
    }

    if (_refreshC)
    {
        collC = new ObservableCollection(await Task.Run(() => GetC<C>()));
        _refreshC = false;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T02:50:05.793

```
void GetAll() {
    new Thread(() => {
        if (_refreshA) {
            var alist = GetA<A>();
            Dispatcher.Invoke(new Action(() => { collA = new ObservableCollection<A>(alist); }));
            _refreshA = false;
        }

        if (_refreshB) {
            var blist = GetB<B>(param);
            Dispatcher.Invoke(new Action(() => { collB = new ObservableCollection<B>(blist); }));
            _refreshB = false;
        }

        if (_refreshC) {
            var clist = GetC<C>();
            Dispatcher.Invoke(new Action(() => { collC = new ObservableCollection<C>(clist); }));
            _refreshC = false;
        }
    }).Start();
} 
```

`Dispatcher.Invoke`保证每个动作在方法继续之前完成。只是为了比较，如果您想并行执行它们，则需要改为使用它们`Dispatcher.BeginInvoke`。

# php - PHP：如果我以非静态方式调用静态方法怎么办

> ID：12874376
> 
> 赞同：26
> 
> 时间：2012-10-13T15:10:06.397
> 
> 标签：php, static-methods

我不是面向对象编程的专家，我有一个愚蠢的问题：

```
class test {
    public static function doSomething($arg) {
        $foo = 'I ate your ' . $arg;
        return $foo;
    }
} 
```

所以调用`doSomething()`方法的正确方法是做`test::doSomething('Pizza');`，对吗？

现在，如果我这样称呼它会发生什么：

```
$test = new test;
$bar = $test->doSomething('Sandwich'); 
```

我已经对其进行了测试，并且它可以正常工作，没有任何错误或通知等，但是这样做是否正确？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-13T16:48:10.417

正如 Baba 已经指出的那样，它会导致`E_STRICT`取决于您的配置。

但即使这对您来说没有问题，我认为值得一提的是一些可能因以非静态方式调用静态方法而导致的陷阱。

如果你有一个类层次结构

```
class A {
    public static function sayHello() {
        echo "Hello from A!\n";
    }

    public function sayHelloNonStaticWithSelf() {
        return self::sayHello();
    }

    public function sayHelloNonStaticWithStatic() {
        return static::sayHello();
    }
}

class B extends A {
    public static function sayHello() {
        echo "Hello from B!\n";
    }

    public function callHelloInMultipleDifferentWays() {
        A::sayHello();
        B::sayHello();
        $this->sayHelloNonStaticWithSelf();
        $this->sayHelloNonStaticWithStatic();
        $this->sayHello();
    }
}

$b = new B();
$b->callHelloInMultipleDifferentWays(); 
```

这会产生以下输出：

```
Hello from A!
// A::sayHello() - obvious

Hello from B!
// B::sayHello() - obvious

Hello from A!
// $this->sayHelloNonStaticWithSelf()
// self alweays refers to the class it is used in

Hello from B!
// $this->sayHelloNonStaticWithStatic()
// static always refers to the class it is called from at runtime

Hello from B!
// $this->sayHello() - obvious 
```

如您所见，在混合静态和非静态方法调用和技术时很容易实现意外行为。

因此，我的建议也是：使用**Class::method**显式调用您要调用的静态方法。甚至最好不要使用**静态方法**，因为它们**会使您的代码不可测试**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T15:17:15.993

如果您的方法不使用`$this`且不访问静态属性，则没有区别。

**使用箭头运算符 -> 无法通过对象访问静态属性。**

**$this 在声明为静态的方法中不可用。**

但是，您应该始终使用`::`调用静态方法，即使通过 php 让您在实例上调用它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-13T15:13:38.097

最好以这种方式调用它以避免 `E_STRICT`在某些版本的 PHP 上

```
$bar = test::doSomething('Sandwich'); 
```

[来自 PHP 文档](http://php.net/manual/en/language.oop5.static.php)

> 使用箭头运算符 -> 无法通过对象访问静态属性。静态调用非静态方法会生成 E_STRICT 级别的警告。

还

> 将类属性或方法声明为静态使它们无需实例化即可访问。声明为静态的属性不能用实例化的类对象访问（尽管静态方法可以）。

# pointers - 将指针的值复制到 Assembly 中的另一个新指针

> ID：12874379
> 
> 赞同：0
> 
> 时间：2012-10-13T15:10:29.690
> 
> 标签：pointers, assembly, att

**更新：**我被允许在我的代码中使用 strcpy。

我正在尝试在 x86 汇编（att 语法）中编写 strdup 的实现，将 C 中的代码转换为汇编中的代码。

C中的代码：

```
char* func( int x, char* name){

    namestr = (char *) malloc( strlen(name) + 1 );
    strdup( namestr, name );
    free( name ); //Just showing what I plan to do later.

    return namestr;

} 
```

汇编代码：

```
;basic start, char* I'm trying to copy is at 12(%ebp)
new_string: 
    pushl   %ebp
    movl    %esp, %ebp
    pushl   %edi
    subl    $20, %esp
    movl    12(%ebp), %ecx
    movl    %ecx, %edi
    movl    (%ecx), %ecx
    movl    %ecx, -8(%ebp)

;get the length of the string + 1, allocate space for it
.STR_ALLOCATE: 
    movl    $0, %eax
    movl    $-1, %ecx
    repnz   scasb
    movl    %ecx, %eax
    notl    %eax
    subl    $1, %eax
    addl    $1, %eax
    movl    %eax, (%esp)
    call    malloc
    movl    %eax, -12(%ebp)

;copy value of of the char* back to %eax, save it to the stack, pass the address back
.STR_DUP: 
    movl    -8(%ebp), %eax
    movl    %eax, -12(%ebp)
    leal    -12(%ebp), %eax

.END:
    popl    %edi
    leave
    ret 
```

当我运行代码时，我只得到 char* 的一部分。示例：传入“Stack Overflow”让我得到“Stac@@#$$”。我想我在 movl 上做错了什么，不太确定是什么。

p/s：我很确定我的 strlen 有效。

第 2 部分：我编写的代码会将指针传回给调用者吗？就像释放我稍后分配的任何空间的能力一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:44:41.910

使用有点生疏的汇编技能，它看起来像这样：

```
 pushl   %ebp
    movl    %esp, %ebp
    pushl   %edi
    pushl   %esi
    subl    $20, %esp
    movl    12(%ebp), %edi
;get the length of the string + 1, allocate space for it
.STR_ALLOCATE: 
; next is dangerous. -1 is like scan "forever". You might want to set a proper upper bound here, like in "n" string variants.
    movl    $-1, %ecx
    repnz   scasb
    notl    %ecx
;    subl    $1, %ecx
;    addl    $1, %ecx
    movl    %ecx, -8(%ebp)
    pushl   %ecx
    call    malloc
    add     $4,%esp
    movl    %eax, -12(%ebp)   
    movl    -8(%ebp),%ecx
    movl    %eax, %edi
    movl    12(%ebp).%esi
    rep     movsb
    movl    -12(%ebp),%eax
    popl    %esi
    popl    %edi
    leave
    ret 
```

# sql-server-2008 - SQL 小计

> ID：12874392
> 
> 赞同：0
> 
> 时间：2012-10-13T15:12:20.217
> 
> 标签：sql-server-2008

我正在尝试编写一个 SQL Server 2008 查询，它将数据输出到小计列中。我的 SQL 技能仍然很差，所以我真的需要一些帮助。

我有两张桌子，A和B。

```
A.user (unique) 
A.answer  <- can only be one of two answers, 'Answer1' or 'Answer2' 
B.user (unique) 
B.zip 
```

我要做的是编写一个 SQL 语句，该语句生成一个四列输出，通过 zip 总结答案。像这样：

```
Zip    Answer1    Answer2   Total
----------------------------------
12345     25        22        47
23456     7          0         7
45678     0         15        15 
```

任何圣人的建议？

谢谢！

-托尼

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T15:38:03.650

我认为这是你需要的：

```
SELECT B.Zip 
     , SUM(CASE WHEN answer='Answer1' THEN 1 ELSE 0 END)AS Answer1
     , SUM(CASE WHEN answer='Answer2' THEN 1 ELSE 0 END)AS Answer2
     , COUNT(*) AS Total
FROM A INNER JOIN B ON A.[user] = B.[user]
GROUP BY B.Zip 
```

这是一个小提琴：[http ://sqlfiddle.com/#!3/60916/2/0](http://sqlfiddle.com/#!3/60916/2/0)

# jquery - 如何在 JSF 中创建选择列表？尝试使用 JS/jQuery 移动项目，但使用“验证错误：值无效”提交错误

> ID：12874394
> 
> 赞同：2
> 
> 时间：2012-10-13T15:12:22.630
> 
> 标签：jquery, jsf, jsf-2, listbox, multi-select

我正在使用 JSF 2.0 创建 Web 应用程序，并在其中分配用户查看项目。为此，我有两个清单。第一个列表包含未分配该项目的用户，列表 B 包含已分配该项目的用户。我们可以交换数据。

我的代码是

* * *

```
<t:selectManyListbox id="sourceCars"  style="width: 40%;"
                     value="#{PersonalInformationDataBean.listOfUsers}" size="10">
    <t:selectItems value="#{PersonalInformationDataBean.showAllMyRemData()}" var="t"
                   itemLabel="#{t.title}" itemValue="#{t.status}"/>
</t:selectManyListbox>

<span>
    <input type="button" value=" >> " id="dbleMeRight"/>
    <input type="button" value=" &lt;&lt; " id="dbleMeLeft"/>
</span>

<t:selectManyListbox id="targetCars"  style="width: 40%;"
                     value="#{PersonalInformationDataBean.listOfUsers}" size="10">
    <t:selectItems value="#{PersonalInformationDataBean.showAllMyData()}" var="n"
                   itemLabel="#{n.title}" itemValue="#{n.status}"/>
</t:selectManyListbox>

<h:commandButton value="Save Edited Project Info." action="#{PersonalInformationDataBean.editPatentData(MyLogin.loginname)}" /> 
```

其中 t 是`xmlns:t="http://myfaces.apache.org/tomahawk"`。

* * *

**PersonalInformationDataBean.java**

```
private List<String> listOfUsers = new ArrayList<String>();
private List<String> listOfUsers002 = new ArrayList<String>();
private List<CommonBean01> listOfListUsers = new ArrayList<CommonBean01>();
private List<CommonBean01> listOfListUsers002 = new ArrayList<CommonBean01>();

// above getter and setters

Iterator itr = listOfUsers.iterator();
System.out.println("list of usersssss == " + listOfUsers);

while (itr.hasNext()) {
    psmtt = conn.prepareStatement("INSERT INTO patentInvite (invitedWhom, patentId, personalInfoId) VALUES (?,?,?)");
    String inviteWhom = itr.next().toString();
    System.out.println("to who we have invited is " + inviteWhom);
    psmtt.setString(1, inviteWhom);
    psmtt.setLong(2, patentId);
    psmtt.setLong(3, personalInfoId);
    psmtt.execute();

    System.out.println("Data entered is == " + inviteWhom + "==" + patentId + "==" + personalInfoId + "==");
}

public List<CommonBean01> showAllMyRemData() {
    try {
        CommonBean01 commonBean = new CommonBean01();
        listOfListUsers = new ArrayList<CommonBean01>();
        ConnectToDatabase db = new ConnectToDatabase();
        Connection conn = db.makeconnection();

        PreparedStatement psmt = conn.prepareStatement("SELECT * FROM patentInvite WHERE patentId=?");
        System.out.println("patent id here is " + patentId);
        psmt.setLong(1, patentId);
        ResultSet rs = psmt.executeQuery(), rs2 = null;
        PreparedStatement pstt = null;

        int dd = 0;
        String listOfUser = "";
        int myCounter = 0;
        while (rs.next()) {
            if (myCounter==0) {
                listOfUser = "'" + rs.getString(2) + "'"; 
            } else {
                listOfUser = listOfUser + ",'" + rs.getString(2) + "'";
            }
            myCounter++;
        }

        System.out.println("id selected are :: " + listOfUser);

        psmt = conn.prepareStatement("SELECT userid, fullName, userType FROM userDetails WHERE userid NOT IN (" + listOfUser + ")");
        rs = psmt.executeQuery();

        listOfListUsers = new ArrayList<CommonBean01>();
        while (rs.next()) {
            commonBean = new CommonBean01();
            commonBean.setStatus(rs.getString(1));
            commonBean.setTitle(rs.getString(2) + " [" + rs.getString(3) + "]");
            listOfListUsers.add(commonBean);
            System.out.println("wat say....(" + rs.getString(1) + ") -- " + rs.getString(2) + "");
        }
        return listOfListUsers;
    } catch (Exception e) {
        System.out.println("Exception = " + e);
        return null;
    }
}

public List<CommonBean01> showAllMyData() {
    try {
        CommonBean01 commonBean = new CommonBean01();
        listOfListUsers = new ArrayList<CommonBean01>();
        ConnectToDatabase db = new ConnectToDatabase();
        Connection conn = db.makeconnection();

        PreparedStatement psmt = conn.prepareStatement("SELECT * FROM patentInvite WHERE patentId=?");
        System.out.println("patent id here is " + patentId);
        psmt.setLong(1, patentId);
        ResultSet rs = psmt.executeQuery(), rs2 = null;
        PreparedStatement pstt = null;
        listOfListUsers = new ArrayList<CommonBean01>();

        while (rs.next()) {
            System.out.println("");
            pstt = conn.prepareStatement("SELECT userid, fullName, userType FROM userDetails WHERE userid=?");
            pstt.setString(1, rs.getString(2));
            System.out.println("setting id for " + rs.getString(1));
            rs2 = pstt.executeQuery();

            int dd = 0;
            while (rs2.next()) {
                System.out.println("inside data " + rs2.getString(2));
                commonBean = new CommonBean01();
                commonBean.setStatus(rs2.getString(1));
                commonBean.setTitle(rs2.getString(2) + " [" + rs2.getString(3) + "]");
                listOfListUsers.add(commonBean);
                System.out.println("wat say here....(" + rs2.getString(1) + ") -- " + rs2.getString(2) + "");
            }
        }
        return listOfListUsers;
    } catch (Exception e) {
        System.out.println("Exception = " + e);
        return null;
    }
} 
```

* * *

**CommonBean01.java**

```
public class CommonBean01 {
    private String title;
    private String status;

    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }

    public String getTitle() {
        return title;
    }

    public void setTitle(String title) {
        this.title = title;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final CommonBean01 other = (CommonBean01) obj;
        if ((this.status == null) ? (other.status != null) : !this.status.equals(other.status)) {
            return false;
        }
        return true;
    }

    @Override
    public int hashCode() {
        int hash = 5;
        hash = 89 * hash + (this.status != null ? this.status.hashCode() : 0);
        return hash;
    }
} 
```

* * *

现在，当我将用户从左列表带到右列表并单击`Save Edit Info`按钮时，我得到错误为`targetCars: Validation Error: Value is not valid`.

**笔记 ：**

当我不更改任何列表并单击`Save Edit Info`时，它运行良好。

知道为什么我会收到此错误吗？

* * *

## 编辑 1

我做了以下更改

```
<t:selectManyListbox id="sourceCars"  style="width: 40%;"
                     value="#{PersonalInformationDataBean.listOfUsers002}" size="10">
    <t:selectItems value="#{PersonalInformationDataBean.showAllMyRemData()}" var="t"
                   itemLabel="#{t.title}" itemValue="#{t.status}"/>
</t:selectManyListbox>

public List<CommonBean01> showAllMyRemData() {
    try {
        CommonBean01 commonBean = new CommonBean01();
        listOfListUsers002 = new ArrayList<CommonBean01>();
        ConnectToDatabase db = new ConnectToDatabase();
        Connection conn = db.makeconnection();

        PreparedStatement psmt = conn.prepareStatement("SELECT * FROM patentInvite WHERE patentId=?");
        System.out.println("patent id here is " + patentId);
        psmt.setLong(1, patentId);
        ResultSet rs = psmt.executeQuery(), rs2 = null;
        PreparedStatement pstt = null;

        int dd = 0;
        String listOfUser = "";
        int myCounter = 0;
        while (rs.next()) {
            if (myCounter==0) {
                listOfUser = "'" + rs.getString(2) + "'"; 
            } else {
                listOfUser = listOfUser + ",'" + rs.getString(2) + "'";
            }
            myCounter++;
        }

        System.out.println("id selected are :: " + listOfUser);

        psmt = conn.prepareStatement("SELECT userid, fullName, userType FROM userDetails WHERE userid NOT IN (" + listOfUser + ")");
        rs = psmt.executeQuery();

        listOfListUsers002 = new ArrayList<CommonBean01>();
        while (rs.next()) {
            commonBean = new CommonBean01();
            commonBean.setStatus(rs.getString(1));
            commonBean.setTitle(rs.getString(2) + " [" + rs.getString(3) + "]");
            listOfListUsers002.add(commonBean);
            System.out.println("wat say....(" + rs.getString(1) + ") -- " + rs.getString(2) + "");
        }
        return listOfListUsers002;
    } catch (Exception e) {
        System.out.println("Exception = " + e);
        return null;
    }
} 
```

我仍然遇到同样的错误。

* * *

## 编辑 2

用于移动项目的 jQuery 代码如下。

```
$(function() {
    var  sourceCars=$('#sourceCars option').clone();
    $('#filterDis').change(function() {
        var val = $(this).val();
        alert("changed me=="+val+"==");
        $('#sourceCars').empty();
        alert("changed me=="+sourceCars+"==");
        sourceCars.filter(function(idx, el) {
            var found=false;
            $('#targetCars option').each(function(){
                if ($(this).val()===$(el).text())
                    found=true;
            });
            alert(found);

            if(found)
                return false;

            return val === 'ALL' || $(el).text().indexOf('[' + val + ']') >= 0;
        }).appendTo('#sourceCars');
        $("#targetCars option").attr("selected", "selected");
    });

    $('#sourceCars').dblclick(function() {
        $('#sourceCars option:selected').appendTo('#targetCars');
        $("#targetCars option").attr("selected", "selected");
    });

    $('#dbleMeRight').click(function() {
        $('#sourceCars option:selected').appendTo('#targetCars');
        $("#targetCars option").attr("selected", "selected");
    });

    $('#targetCars').dblclick(function() {

        var targetList=$('#targetCars option:selected');
        var filterVal= $('#filterDis').val();
        if( filterVal === 'ALL' || targetList.text().indexOf('[' + filterVal + ']') >= 0)
            targetList.appendTo('#sourceCars');
        else
            targetList.remove();
        var foption = $('#sourceCars option:first');
        var soptions = $.makeArray($('#sourceCars option:not(:first)')).sort(function(a, b) {
            return a.text == b.text ? 0 : a.text &lt; b.text ? -1 : 1
        });
        $('#sourceCars').html(soptions).prepend(foption);
        foption.attr("selected", true).siblings("option").removeAttr("selected");
        $("#targetCars option").attr("selected", "selected");
    });

    $('#dbleMeLeft').click(function() {

        var targetList=$('#targetCars option:selected');
        var filterVal= $('#filterDis').val();
        if( filterVal === 'ALL' || targetList.text().indexOf('[' + filterVal + ']') >= 0)
            targetList.appendTo('#sourceCars');
        else
            targetList.remove();
        var foption = $('#sourceCars option:first');
        var soptions = $.makeArray($('#sourceCars option:not(:first)')).sort(function(a, b) {
            return a.text == b.text ? 0 : a.text &lt; b.text ? -1 : 1
        });
        $('#sourceCars').html(soptions).prepend(foption);
        foption.attr("selected", true).siblings("option").removeAttr("selected");
        $("#targetCars option").attr("selected", "selected");
    });

}); 
```

***注意：如果我将项目从列表 B（右）移动到列表 A（左），它工作正常。但是当我将项目从列表 A（左）移动到列表 B（右）时，我收到了这个错误。***

* * *

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T12:07:00.423

就这一点而言，您的具体问题是由您使用 JavaScript/jQuery 而不是 JSF 填充列表框项目的错误引起的。这样，JSF 就不会知道 JavaScript 添加的新项目。您需要使用 JSF 而不是 JavaScript/jQuery 填充列表框项。

当您提交带有`UISelectOne`/`UISelectMany`组件的表单时，JSF 将始终将提交的值与来自`<f:selectItem(s)>`. 如果提交的值不包含在可用项目列表中，那么您将得到这个`Validation Error: Value is not valid`错误。这是针对被篡改/攻击请求的内置保护措施的一部分。客户端不应提交服务器未指定的项目。

更改 JavaScript/jQuery 端的可用项目*不会*自动更改 JSF`<f:selectItems>`端的可用项目。您确实需要更改 JSF 端的可用项目。您可以轻松地为此使用 JSF 2.x ajax 功能。这是一个具体的启动示例：

```
<h:form>
    <h:panelGrid columns="3">
        <h:selectManyListbox id="left" value="#{bean.leftSelected}">
            <f:selectItems value="#{bean.leftAvailable}" />
            <f:ajax event="dblclick" render="left right" listener="#{bean.leftToRight}" />
        </h:selectManyListbox>
        <h:panelGroup>
            <h:commandButton value="left to right">
                <f:ajax execute="left" render="left right" listener="#{bean.leftToRight}" />
            </h:commandButton>
            <br/>
            <h:commandButton value="right to left">
                <f:ajax execute="right" render="left right" listener="#{bean.rightToLeft}" />
            </h:commandButton>
        </h:panelGroup>
        <h:selectManyListbox id="right" value="#{bean.rightSelected}">
            <f:selectItems value="#{bean.rightAvailable}" />
            <f:ajax event="dblclick" render="left right" listener="#{bean.rightToLeft}" />
        </h:selectManyListbox>
    </h:panelGrid>
</h:form> 
```

和

```
@Named
@ViewScoped
public class Bean {

    private List<String> leftSelected;
    private List<String> leftAvailable;
    private List<String> rightSelected;
    private List<String> rightAvailable;

    @PostConstruct
    public void init() {
        leftAvailable = new ArrayList<String>(Arrays.asList("one", "two", "three", "four", "five"));
        rightAvailable = new ArrayList<String>();
    }

    public void leftToRight() {
        leftAvailable.removeAll(leftSelected);
        rightAvailable.addAll(leftSelected);
        leftSelected = null;
    }

    public void rightToLeft() {
        rightAvailable.removeAll(rightSelected);
        leftAvailable.addAll(rightSelected);
        rightSelected = null;
    }

    // Add/generate getters+setters. Note: the "available" lists doesn't need setters.
} 
```

就这样。不需要 JS/jQuery 混乱。使用自定义非字符串对象时，不要忘记提供适当的转换器和`equals()`方法。

### 也可以看看：

*   [当可以使用 jQuery 和 AngularJS 等 JavaScript 库来实现 UI 时，需要 JSF 吗？](https://stackoverflow.com/questions/4421839/what-is-the-need-of-jsf-when-ui-can-be-achieved-from-css-html-javascript-jquery/4424775#4424775)
*   [验证错误：值无效](https://stackoverflow.com/questions/9069379/validation-error-value-is-not-valid)
*   ['null Converter' 的转换错误设置值 - 为什么我需要 JSF 中的转换器？](https://stackoverflow.com/questions/4734580/conversion-error-setting-value-for-null-converter-why-do-i-need-a-converter)

# python - 在 GUI 程序运行时事件立即启动的情况下，什么是事件绑定？

> ID：12874396
> 
> 赞同：0
> 
> 时间：2012-10-13T15:12:34.603
> 
> 标签：python, wxpython

我希望该事件在程序运行时同时启动。

我希望此代码在程序运行时立即显示“Hello”。这段代码不是那样运行的。

如何更改事件？

```
import wx

class MainWindow(wx.Frame):

    def __init__(self, parent, id, title):

        wx.Frame.__init__(self, parent, id, title, size=(380, 200))

        panel = wx.Panel(self, -1)
        sizer = wx.BoxSizer()
        self.tc = wx.TextCtrl(panel, -1)
        self.tc.Bind(wx.EVT_TEXT, self.event) #problem caused here
        sizer.Add(self.tc, 1, wx.EXPAND)
        panel.SetSizer(sizer)

        self.Centre()
        self.Show(True)

    def event(self, event):
        self.tc.WriteText("Hello")

if __name__=="__main__":
    app = wx.App()
    MainWindow(None, -1, "test.py")
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:40:20.023

在开始时显示“Hello”的最简单方法是将其移动到 init 方法中：

```
self.tc = wx.TextCtrl(panel, -1)
self.tc.WriteText("hello") 
```

除此之外，我不得不承认我不明白你想做什么。程序执行和 wx 窗口显示之间的短暂延迟是自然的，无法避免。

如果你想在你的应用程序中使用多线程，你应该阅读 python 线程系统。不幸的是，虽然线程可以使您的程序更优雅，但在大多数情况下会导致更差的性能。python 解释器一次只能执行一个操作。这称为 GIL - 全局解释器锁 - 即使您的应用程序中有多个线程，解释器也只会在线程之间切换，但不会同时运行它们

# c++ - 运行程序时，数组总和给出了错误的答案

> ID：12874399
> 
> 赞同：0
> 
> 时间：2012-10-13T15:13:04.710
> 
> 标签：c++

该程序运行顺利，编译时我没有错误或警告，就在它得到最终结果时，无论我输入什么，我都会得到一堆随机的字母和数字。

这是代码：

```
#include <iostream>
#include <string>

using namespace std;

int main()
{
     int hold;
     int n;
     int * result = new int;
     int * price = new int;
     std::string items[6];

        for (n=0; n<6; n++)
        {
            cout << "Item#" << n+1 << ": ";
            cin >> items[n];
        }
        cout <<  "\nYou Entered: ";
        for (int n=0; n<6; n++)
            cout << items[n] << ", ";

    for (n=0; n<6; n++)
    {
        if (items[n] == "ab"){
        price[n] = 2650;
        }

        else if (items[n] == "ae"){
        price[n] = 1925;
        }

        else if (items[n] == "ie"){
        price[n] = 3850;
        }

        else if (items[n] == "bt"){
        price[n] = 3000;
        }

        else if (items[n] == "pd"){
        price[n] = 2850;
        }

        else if (items[n] == "ga"){
        price[n] = 2600;
        }

    }

    for (n=0; n<6; n++)
    {
     result += price[n];
    }

    cout << "\nTotal gold for this build: " << result;
    cin >> hold;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T15:15:15.767

```
int * price = new int; 
```

和

```
int * result = new int; 
```

分别分配一个`int`。你可能的意思是`new int[6]`。

但话又说回来，你应该`std::vector`改用。

我真的很失望你没有从 - [https://stackoverflow.com/a/12868164/673730](https://stackoverflow.com/a/12868164/673730)那里得到建议- 如果你有，你现在不会有这个问题。这不是一个好的学习方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:15:28.010

使用此声明：`int * price = new int;`您只为单个 分配空间`int`，但您继续`price`用作`int`.

要声明一个数组，请使用：`int *price = new int[5];`

至于`result`，您将其声明为指向`int`also 的指针，但稍后您将其用作`int`: `result += price[n];`。无需`result`成为指针。另请注意，您需要明确初始化变量：`result`在开始使用之前设置为零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T15:52:12.020

只是给一些意见：

1.  新操作符应与删除一起使用。
2.  您声明的“int *result”是指向 int 的一个点，因此您应该取消引用该点以获得您想要的结果。
3.  应考虑例外情况，如果输入字母不在您的给定列表中怎么办？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T15:17:44.763

嗯，`result`是一个`int *`. 这种变量通常存储另一个整数变量的地址，`new int`在这种特定情况下你会得到它。然而，随着

```
 result += price[n]; 
```

您将修改该地址，如果您实际从`*result`. 这也是你输出奇怪的原因：

```
cout << "\nTotal gold for this build: " << result; 
```

这将打印存储在结果中的地址，而不是值。制作`result`一个整数，它应该可以工作。

请注意，`price`也应该更改，请参阅[Luchian 的回答](https://stackoverflow.com/a/12874417/1139697)。

### 锻炼

1.  更改您的代码，以便不使用`new`.
2.  您的程序仍然可能失败。的初始值是`result`多少？
3.  如果用户提供的代码不在您的列表中，会发生什么？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T15:18:49.580

换行：

```
cout << "\nTotal gold for this build: " << result; 
```

到

```
cout << "\nTotal gold for this build: " << *result; 
```

`Result`是一个指针，因此您需要使用 * 运算符取消引用它；

**编辑：**`price`将数组的声明更改为

```
int *price = new int[6]; 
```

前面的声明声明了一个变量，而不是一个数组

# java - spring MVC3错误无法实例化bean类[java.util.List]：指定的类是接口偶尔

> ID：12874404
> 
> 赞同：5
> 
> 时间：2012-10-13T15:13:34.977
> 
> 标签：java, spring

### 我正在使用spring MVC3，我发现如下代码：

```
@Controller
class IndexController
{
    @ModelAttribute("allTags")
    public List<ArticleTag> allTags()
    {
        return Collections.emptyList();
    }
} 
```

### 有时会出现消息错误

# （不总是）

```
SEVERE: Servlet.service() for servlet [appServlet] in context with path [] threw exception [Request processing failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [java.util.List]: Specified class is an interface] with root cause
org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [java.util.List]: Specified class is an interface
        at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:101)
        at org.springframework.web.method.annotation.ModelAttributeMethodProcessor.createAttribute(ModelAttributeMethodProcessor.java:132)
        at org.springframework.web.servlet.mvc.method.annotation.ServletModelAttributeMethodProcessor.createAttribute(ServletModelAttributeMethodProcessor.java:81)
        at org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:103)
        at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:75)
        at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:156)
        at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:117)
        at org.springframework.web.method.annotation.ModelFactory.invokeModelAttributeMethods(ModelFactory.java:123)
        at org.springframework.web.method.annotation.ModelFactory.initModel(ModelFactory.java:97)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:614)
        at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
        at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
        at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
        at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
        at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
        at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305) 
```

### 有人说，List 是一个接口，请改用 ArrayList 或 LinkedList

# 但是，我的问题是，为什么上面的代码并不总是错误的？

### 当出现上述错误时，无论怎么刷新页面，错误一直持续，永远不会消失！但是，如果你重启tomcat，你有一个很好的机会来处理这个错误！如果没有出现上述错误，它永远不会出现util next tomcat重启！

## 与 int 或 Integer 类型的 @ModelAttribute 相同，它很可能会出错，但在某些主机上，它永远不会发生

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2018-03-01T11:11:45.973

更改代码如下

```
public ArticleTag allTags() 
```

欲了解更多信息，请参阅以下链接

[ [http://forum.spring.io/forum/spring-projects/data/nosql/724397-mapping-exception-with-mongodb-aggregation-framework][1]](http://forum.spring.io/forum/spring-projects/data/nosql/724397-mapping-exception-with-mongodb-aggregation-framework][1])

另请参阅已修复的 Mongo 问题

[ [https://jira.spring.io/browse/DATAMONGO-229]](https://jira.spring.io/browse/DATAMONGO-229])

# python - 如何在 Python 中扫描未知数量的数字？

> ID：12874406
> 
> 赞同：0
> 
> 时间：2012-10-13T15:13:37.940
> 
> 标签：python, eof

有没有办法在 Python 中扫描未知数量的元素（我的意思是扫描数字，直到用户在标准输入 eof（文件结尾）处写入）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T15:18:04.290

您是否需要在输入第二个数字之前处理第一个数字？如果不是，那么`int(s) for s in sys.stdin.read().split()`可能会作为列表推导（in `[]`）或生成器表达式（in `()`，例如作为函数参数）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T15:18:46.320

`raw_input`（`input`在 Python 3 中）`EOFError`一旦达到 EOF 就会抛出。

```
while 1:
    try:
        num = int(raw_input("enter a number: "))
    except EOFError:
        break 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:18:27.990

这会随时中断

这是一种原始的方法。

```
In [1]: while True:
   ...:     try:
   ...:         num = int(raw_input())
   ...:     except EOFError:
   ...:         break
   ...: 
```

我给出的输入的示例输出：

```
10
20
40
50 
```

这不仅会破坏，`EOF`而且会破坏任何不转换为数字的输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-10T08:57:51.587

我找到了另一种方法……有时，我使用另一种称为[R](https://en.wikipedia.org/wiki/R_(programming_language))的编程语言。

在那里，您可以输入：

```
my_variable = scan() 
```

...并根据需要输入数字。即使复制和粘贴。

然后，您可以转储输入：

```
dump(my_variable, "my_variable.Rdata") 
```

`my_variable.Rdata`是一个文本文件，其中包含一个 R 列表...可以很容易地转换为 Python 列表：

```
# a list in R syntax:
my_variable <- c(1, 2, 3)

# a list in Python syntax:
my_variable = [1, 2, 3] 
```

# jquery - 在同一页面上运行 2 个 jQuery

> ID：12874409
> 
> 赞同：0
> 
> 时间：2012-10-13T15:14:01.107
> 
> 标签：jquery, html

我试图在同一页面上使用 2 个 jQuery 对象，但是，我似乎无法让它们同时工作，如果我使用代码，我可以让一个或另一个工作但不能同时工作。我对这些东西很陌生，所以非常感谢你在这方面的帮助。

head部分的代码如下

```
<script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.2.js">
</script>

    <script src="jquery.easing.1.3.js" type="text/javascript"></script>  
  <script type="text/javascript">
        $(document).ready(function() { 

            $curtainopen = false;

            $(".rope").click(function(){
                $(this).blur();
                if ($curtainopen == false){ 
                    $(this).stop().animate({top: '0px' }, {queue:false, duration:350, easing:'easeOutBounce'}); 
                    $(".leftcurtain").stop().animate({width:'60px'}, 2000 );
                    $(".rightcurtain").stop().animate({width:'60px'},2000 );
                    $curtainopen = true;
                }else{
                    $(this).stop().animate({top: '-40px' }, {queue:false, duration:350, easing:'easeOutBounce'}); 
                    $(".leftcurtain").stop().animate({width:'50%'}, 2000 );
                    $(".rightcurtain").stop().animate({width:'51%'}, 2000 );
                    $curtainopen = false;
                }
                return false;
            });

        }); 
    </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:17:37.820

我认为问题是存在冲突

jQuery 定义了一个很好的解决冲突的解决方案：[jQuery.noConflict](http://api.jquery.com/jQuery.noConflict/)。通过使用这个函数，你可以定义你自己的名字，在那里可以访问 jQuery。

```
var $jq = jQuery.noConflict(true); 
```

# google-apps-script - Google App Scripts：HTML文件中的Javascript代码不起作用

> ID：12874410
> 
> 赞同：0
> 
> 时间：2012-10-13T15:14:01.407
> 
> 标签：google-apps-script, google-plus

我一直在尝试编写一个带有 Google+ 徽章的小型 Google App 脚本，如此处[所示](https://developers.google.com/+/plugins/badge/)。为此，我有一个纯 HTML 文件，其中包含了该页面上显示的 HTML。HTML页面如下：

```
 <html>
<body>
 <div class="g-plus" data-href="{Page-Link}" data-rel="publisher"></div>

<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    alert("Added Badge!");
  })();
</script>

</body>
</html> 
```

结果是空白页。页面中没有添加徽章。我认为这是因为 javascript 函数没有运行（我添加了一个警报并且没有任何弹出窗口）。我无法弄清楚为什么该函数没有运行。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:30:34.247

不幸的是，我对 Javascript 不太熟悉，所以我在这里猜测。前段时间我在coffeescript中编程过，它的编译器会自动将生成的代码包装在一个匿名函数中，就像在你的代码中一样。这个函数是这样调用的：

```
(function() {//...}).call(this); 
```

也许这行得通。

或者，您可能希望将警报测试移至徽章生成之上。这将显示 javascript 是否完全运行。也许错误在于您的徽章创建代码。

我的最终想法是命名您的函数并将其注册为 body.onload 上的回调。让浏览器在访问 dom 之前加载页面总是一个好主意

# java - 如何在 Java 中制作 3d 曲面？

> ID：12874412
> 
> 赞同：1
> 
> 时间：2012-10-13T15:14:28.043
> 
> 标签：java, 3d

> **可能重复：**
> [Java 3D 绘图库？](https://stackoverflow.com/questions/1740830/java-3d-plot-library)

我开发了一些 Java 应用程序，现在我遇到了一个问题：我想为一些数据制作 3D 表面，但我从未使用过任何 Java 库来完成这项任务。我找到了 2 个流行的库：TeeChart 和 JMathPlot，但我不知道如何使用这个实验室绘制一些 3D 表面。请给我一个例子或建议。非常感谢你。

更新：我需要可旋转的 3D 表面，并且有 X、Y、Z 线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:44:13.117

我已经在几个游戏中使用了 Java3D，它非常好，我不确定您所说的“为某些数据制作 3D 表面”是什么意思，所以您的意思是您想在 3D 对象上绘制 2D 图形？还是您的意思是您想为您的数据创建 3D 字体？如果你让你的问题更具体一点，其他人我就能更好地帮助你。而且我确信您可以在 Java3D 中旋转事物，而且我很确定任何 3D 引擎或库都将允许您旋转事物，如果不是这样，那么在 3D 中绘制事物就没有意义了，嗯？

有大量的 Java3D 教程：

*   [http://www.java3d.org/tutorial.html](http://www.java3d.org/tutorial.html)

*   [http://www.vrupl.evl.uic.edu/LabAccidents/java3d/](http://www.vrupl.evl.uic.edu/LabAccidents/java3d/)

您可以在此处下载 Java3D 的文档：

*   [http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-client-419417.html#java3d-1.4.0-doc-oth-JPR](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-client-419417.html#java3d-1.4.0-doc-oth-JPR)

该文档将基本上告诉您有关 Java3D 的所有信息

这里是你可以下载Java3D的地方，当然要选择合适的操作系统

*   [http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-client-419417.html#java3d-1.5.1-oth-JPR](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-java-client-419417.html#java3d-1.5.1-oth-JPR)

希望这对您有所帮助，我列出的前 2 个教程非常简短和甜美，因此它们会让您尽快入门。

* * *

具体来说这里是一个旋转立方体的页面，您可以在底部看到示例代码和图像。

*   [http://www.vrupl.evl.uic.edu/LabAccidents/java3d/lesson02/indexb.html](http://www.vrupl.evl.uic.edu/LabAccidents/java3d/lesson02/indexb.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:20:22.277

试试**jMonkeyEngine** - 似乎它是 Java 3d 最强大的 API

这是如何为对象的表面赋予材质和纹理的示例。如何使对象透明，或让颜色通过部分透明的纹理“泄漏”。如何制作凹凸不平和有光泽的表面。

[http://jmonkeyengine.org/wiki/doku.php/jme3:beginner:hello_material](http://jmonkeyengine.org/wiki/doku.php/jme3:beginner:hello_material)

# xcode - xcode 4.5 UIBarButtonItem 动作没有响应，内置于 IB

> ID：12874420
> 
> 赞同：1
> 
> 时间：2012-10-13T15:15:32.480
> 
> 标签：xcode, uibarbuttonitem, ibaction

我已经在 IB 中设置了一个 UIBarButtonItem，通过从 IB 拖动到头文件来创建 IBAction，然后只需在我的源文件中的操作中放置一个简单的断点......并且没有任何反应。

我正在使用 AVCam。我可以从按钮运行操作，但需要在工具栏上完成，因为我正在使用 sharekit。我以前做过工具栏，以前从来没有遇到过这个问题。

我连接了工具栏和 barbutton 的对象……它们都有效。我可以自由地隐藏和取消隐藏它们，但由于某种原因，我无法调用动作。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T14:17:32.940

我在 Xcode 4.5 中与插座不工作的 UIBarButtonItem 有一个非常相似的问题 - 当我按下按钮时没有发送任何操作，并且引用插座没有引用任何内容。

经过一段时间的谷歌搜索，我发现我对故事板所做的所有更改都没有任何效果，但硬编码 GUI 是有效的。

最后，清空 Xcode 项目缓存解决了我的问题——如何做到这一点的描述可以在这里找到：[How to Empty Caches and Clean All Targets Xcode 4](https://stackoverflow.com/questions/5714372/how-to-empty-caches-and-clean-all-targets-xcode-4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-12T15:47:48.377

我和杰夫有同样的问题。很长一段时间，我尝试了很多无用的东西。以编程方式添加选择器，bla bla bla

我还在 viewDidLoad 上添加了一个 UITapGestureRecognizer 以关闭键盘。它没有让手势到达 UIView。不针对 UIBarButtonItem Click 事件和更多不针对 UITableViewCell 选择事件。

这解决了我的问题： **tap.cancelsTouchesInView=NO;**

一下子 UITableViewCell Select 开始起作用 UIBarButtonItem Click 事件开始起作用了。

我的问题只发生在 (7.1) 不在 (8.1)

# java - 我必须从列表中删除重复项（特殊情况）

> ID：12874421
> 
> 赞同：0
> 
> 时间：2012-10-13T15:15:36.303
> 
> 标签：java, arrays, if-statement, duplicates, equals

我有一个类 ArrayList，所以当它们的 Autor 相同时，我必须**删除重复的关键字**，但当它们**不同时则不需要**。以下代码仅在第一个索引（i = 0）中删除重复项，然后它不会删除任何内容。

谢谢！

例子：

这里我有一个例子：

1 个公私伙伴关系

2个电子电气设备

3 B AAA

4 乙 LL

5A CCC

**2个电子电气设备**

**5A CCC**

在这种情况下，我不想删除任何行，因为“A”有不同的父级（2 和 5）。

```
 int size = ls.size();
    int duplicates = 0;

    // not using a method in the check also speeds up the execution
    // also i must be less that size-1 so that j doesn't
    // throw IndexOutOfBoundsException
    for (int i = 0; i < size - 1; i++) {
        for (int j = i + 1; j < size; j++) {

                    if(ls.get(j).getKeywords().equals(ls.get(i).getKeywords()) && ls.get(j).getAutor().equals(ls.get(i).getAutor()) ){
                        duplicates++;
                        ls.remove(j);}

            // decrease j because the array got re-indexed
            j--;
            // decrease the size of the array
            size--;
        } // for j
    } // fo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:56:14.500

解决此问题的最佳方法是创建`non duplicates`. 因此，声明另一个列表并在第一个列表上迭代时检查该列表中是否存在该项目，如果不存在则仅添加该项目。下面是示例源代码。

请注意，我故意使用循环和等于来模拟您的条件。

```
public static void main(String[] args) throws InterruptedException {
    List<Integer> list = new ArrayList<Integer>();

    for (int i = 0; i < 3; i++) { //Add some duplicates
        list.add(new Integer(4));
        list.add(new Integer(5));
        list.add(new Integer(6));
    }
    List<Integer> newList = new ArrayList<Integer>();
    for (Integer first : list) {
        boolean contains = false;//if this flag is false after iteration then item will be added

        for (Integer copy : newList)
            if (first.equals(copy)) {// You will have to specify your condition here
                contains = true;
                break;
            }
        if(!contains)
            newList.add(first);//add item if it was not present
    }
    System.out.println(list);
    System.out.println(newList);

} 
```

**输出：**

```
[4, 5, 6, 4, 5, 6, 4, 5, 6] <-- List with duplicates
[4, 5, 6] <-- List with no duplicates 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T16:02:56.877

您可以按键和后处理对列表进行分组以删除重复项：

[使用 Google guava Multimap 和 Function 实现 GroupBy](http://www.gregbugaj.com/?p=228)

**编辑：**

另一种有趣的方法是实现 equals 方法并使用 hashset（或类似），请参阅：

[从列表中删除重复项](https://stackoverflow.com/a/2849498/926620)

# asp.net - asp.net如何使用list Item Clicked Event UserDetails.aspx

> ID：12874425
> 
> 赞同：0
> 
> 时间：2012-10-13T15:16:08.987
> 
> 标签：asp.net, sql, events, listitem

单击列表项时，我希望它重定向到

```
 UserDetails.aspx?Id=" + Session["UserId"].ToString()); 
```

. 我试过了

```
<li class="active "><a href="~/UserDetails.aspx?Id=" + Session["UserId"].ToString());"><span>Home</span></a></li> 
```

但它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:40:24.910

制作锚标签 runat="server" 并尝试这个

```
<li class="active ">
<a id="A1" runat="server" href='~/UserDetails.aspx?Id=' + <%= Session["UserId"].ToString() %>>
<span>Home</span></a></li> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:29:32.723

```
 <li class="active ">
        <a href='<%= Page.ResolveUrl("~/UserDetails.aspx?Id=") + Session["UserId"].ToString() %>'>
           Home
        </a>
    </li> 
```

编辑：添加 Page.ResolveUrl 并删除 ';' 在 ToString() 的末尾

# php - 将 2 个静态键和 valur 添加到二维数组的每个内部数组

> ID：12874426
> 
> 赞同：0
> 
> 时间：2012-10-13T15:16:10.650
> 
> 标签：php

在 Baba 的帮助下，我有一个二维数组，现在我又遇到了问题，因为我需要将 [exam] => testOne 和 [exam_id] => 1 添加到所有内部数组

```
array
  0 => 
    array
      'id' => string '7' (length=1)
      'name' => string 'Name 1' (length=6)
      'marks' => string '8' (length=1)
      'grade' => string '4' (length=1)
  1 => 
    array
      'id' => string '8' (length=1)
      'name' => string 'Name 2' (length=6)
      'marks' => string '5' (length=1)
      'grade' => string '2.5' (length=3)
  2 => 
    array
      'id' => string '9' (length=1)
      'name' => string 'another name' (length=12)
      'marks' => string '8' (length=1)
      'grade' => string '4' (length=1) 
```

我需要将 [exam] => testOne 和 [exam_id] => 1 添加到所有内部数组，希望结果如下

```
array
  0 => 
    array
      'exam_id' =>'1'
      'exam' => 'testOne'
      'id' => string '7' (length=1)
      'name' => string 'Name 1' (length=6)
      'marks' => string '8' (length=1)
      'grade' => string '4' (length=1)
  1 => 
    array
      'exam_id' =>'1'
      'exam' => 'testOne'
      'id' => string '8' (length=1)
      'name' => string 'Name 2' (length=6)
      'marks' => string '5' (length=1)
      'grade' => string '2.5' (length=3)
  2 => 
    array
      'exam_id' =>'1'
      'exam' => 'testOne'
      'id' => string '9' (length=1)
      'name' => string 'another name' (length=12)
      'marks' => string '8' (length=1)
      'grade' => string '4' (length=1) 
```

对于像我这样的学习者来说，这是一个很棒的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:19:01.543

你可以试试

```
foreach ( $final as &$var ) {
    $var['exam'] = "testOne";
    $var['exam_id'] = "1";
}

var_dump($final); 
```

如果您想保留顶部的键（按要求）

```
$addOn = array("exam" => "testOne","exam_id" => 1);
end($addOn);
foreach ( $final as &$var ) {
    $var = array_merge($addOn, $var);
}
var_dump($final); 
```

# mysql - 解析字符串化 JSON 字符串时出错

> ID：12874429
> 
> 赞同：1
> 
> 时间：2012-10-13T15:16:43.550
> 
> 标签：mysql, json, parsing, node.js

假设我有一个对象：

```
person={'name':'john "Garfield"'}; 
```

我将其转换为字符串：

```
JSON.stringify(person);
// RESULT: {"name":"john \"Garfield\""} 
```

然后我将该字符串存储在 MySQL 或其他任何东西上，然后我在 node.js 上获取该字符串（使用交互式控制台）：

```
string = '{"name":"john \"Garfield\""}';
// RESULT: {"name":"john "Garfield""} 
```

然后我解析对象：

```
JSON.parse(string);
RESULT: SyntaxError: Unexpected token G 
```

如何解析存储的 json 字符串化字符串？我在 MySQL 上有它们，当 MySQL 库请求时，它们会松开斜线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:19:15.143

您（应该）注意到当您拥有字符串时，反斜杠“消失了”。如果它存储在数据库中并从数据库中检索，那么代码应该可以正常工作。但是，如果您手动输入该字符串以将其解析出来，那么您需要转义反斜杠。

```
string = '{"name":"John \\"Garfield\\""}'; 
```

如果反斜杠在 MySQL 插入过程中丢失，那么在插入它们之前尝试转义它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T21:15:25.397

我已经用 MySQL 上的 REPLACE 解决了这个问题，我不明白为什么必须这样做，好吧，我明白，但我不喜欢这个解决方案，使用 node.js 和 MySQL 库并调用 MySQL从节点这里是我所做的声明：

```
REPLACE(`field`, "\\\\", "\\\\\\\\") as field2 
```

这看起来很愚蠢，但是当您在节点上声明一个字符串时，它会自动取消转义，然后：

```
string = 'REPLACE(`field`, "\\\\", "\\\\\\\\") as field2'; 
```

变成这样：

```
REPLACE(`field`, "\\", "\\\\") as field2 
```

当被 MySQL 接收时，它变成：

```
REPLACE(`field`, "\", "\\") as field2 
```

我觉得它必须是另一种方式！

# python - 使用 igraph 导入加权边缘列表

> ID：12874431
> 
> 赞同：11
> 
> 时间：2012-10-13T15:16:50.267
> 
> 标签：python, r, igraph, edge-list

我有以下 txt 文件，以 edgelist 格式表示网络。

前两列代表通常情况：哪个节点连接到其他哪些节点

第三列代表权重，代表每个节点联系对方的次数。

我已经搜索了`igraph`文档，但没有提到在导入 txt 等标准文件格式时如何包含权重参数。

该文件可以从[这里](https://dl.dropbox.com/u/22681355/OClinks_w.txt)访问，这是我一直在使用的代码：

```
read.graph("Irvine/OClinks_w.txt", format="edgelist") 
```

此代码将第三列视为重量以外的其他内容。

有谁知道解决方案？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-13T17:19:42.727

以下是否会引起过多的烦恼？

```
g <- read.table("Irvine/OClinks_w.txt")
g <- graph.data.frame(g) 
```

如果确实如此，则可以直接从文件中使用

```
g<-read.graph("Irvine/OClinks_w.txt",format="ncol")
E(g)$weight 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-16T22:26:29.103

如果您使用 Python 和 igraph，则以下代码行用于导入权重和顶点名称：

```
g1w=Graph.Read_Ncol("g1_ncol_format_weighted.txt",names=True) 
```

注意：你必须告诉 igraph 读取 names 属性`names=True`，否则只会导入顶点编号。

其中 g1_ncol_format_weighted.txt 看起来像：

```
A B 2
B C 3 
```

为确保导入正常工作，请使用以下行：

```
print(g1w.get_edgelist())
print(g1w.es["weight"])
print(g1w.vs["name"]) 
```

# jquery - Jquery FullCalendar：除非硬编码，否则 JSON 错误

> ID：12874434
> 
> 赞同：0
> 
> 时间：2012-10-13T15:17:07.887
> 
> 标签：jquery, json, internet-explorer, fullcalendar

我正在尝试为 Adam Shaw jquery 完整日历设置 JSON 提要，并且可以让它在 Chrome 中工作，但在 FireFox/IE 中。在后面的浏览器拒绝呈现作为 JSON 字符串传递的约会，除非它们是硬编码的。

我为此花了一天时间，在尝试了许多 JSON 派生之后，我发现了一个有效的代码示例，但无法用我的数据动态复制它。最后我发现不同之处在于剪切和粘贴的代码片段是硬编码的。

Fullcalendar 似乎非常适合许多不同类型的 JSON（数组/对象），但由于某种原因，IE 知道 PHP 字符串是硬编码的还是只是从变量中回显的。是否发送了一些信息，让它知道服务器端发生了什么？

我的 PHP 看起来像这样（foreach 设置为与 Zend db-rowset 一起使用）：

```
foreach($rowset as $row){
            $apptArray = array();
            $apptArray['title'] = $row -> title; 
            $apptArray['allDay'] = ''; 
            $apptArray['id'] = $row -> appt_id; 
            $apptArray['participants'] = $row -> participants; 
            $apptArray['organizer'] = $row -> organizer; 
            $apptArray['propId'] = $row -> prop_id; 
            $apptArray['reason'] = $row -> reason; 
            $apptArray['start'] = date('Y-m-d  H:i:s', $row -> start); 
            $apptArray['end'] = date('Y-m-d  H:i:s', $row -> end); 
            array_push($jsonArray,$apptArray);

            }
            echo json_encode($jsonArray); 
```

如果我只是在浏览器中加载 JSON 提要 url，则会返回一个如下所示的 JSON 字符串：

```
[
{
    "title":"Lunch",
    "allDay":"",
    "id":"9",
    "participants":"456",
    "organizer":"36",
    "propId":"14",
    "reason":"to meet",
    "start":"2012-10-12 11:00:00",
    "end":"2012-10-12 11:30:00"
 },
 {
    "title":"dd",
    "allDay":"",
    "id":"15",
    "participants":"45",
    "organizer":"36",
    "propId":"45",
    "reason":"meet again",
    "start":"2012-10-12 09:00:00",
    "end":"2012-10-12 09:30:00"
 } 
```

]

这就是事情变得奇怪的地方。如果 fullCalendar 从我的脚本中调用它，它不会呈现任何约会。但是，如果我采用上面相同的字符串，对其进行硬编码，然后直接回显 JSON 字符串。字符串渲染得很好。（见下文）

```
echo '[{"title":"Lunch","allDay":"","id":"9","participants":"456","organizer":"36","propId":"14","reason":"to eet","start":"2012-10-12 11:00:00","end":"2012-10-12 11:30:00"},{"title":"dd","allDay":"","id":"15","participants":"45","organizer":"36","propId":"45","reason":"asdf","start":"2012-10-12 11:00:00","end":"2012-10-12 11:30:00"}]'; 
```

这可能是当我的脚本在浏览器中显示的 JSON 以某种方式更改时？有没有人在其他地方遇到过这个？

相关代码的最后一点是 fullcalendar 设置选项：

```
eventSources:[
                  {
        url: 'http://local/tenant/calendar/apptsfeed',
        type: 'POST',
        success: function(response) {
             alert('this has worked');

        },
        error: function(response) {
            alert('error');

        },
        color: 'yellow',   // a non-ajax option
        textColor: 'black' // a non-ajax option
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T09:42:06.427

尝试将数据类型`dataType: 'json'`放在您的事件源中并查看。

```
eventSources:[
              {
    url: 'http://local/tenant/calendar/apptsfeed',
    type: 'POST',
    dataType: 'json',
    success: function(response) {
         alert('this has worked');

    },
    error: function(response) {
        alert('error');

    },
    color: 'yellow',   // a non-ajax option
    textColor: 'black' // a non-ajax option
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T02:19:55.713

好吧，这花了我很长时间才弄清楚。

但是，我想我会传递对我有用的东西，以防万一还有其他 IE 用户。

该问题似乎是日期格式问题。出于某种原因，基本上 IE 比 chrome 更敏感。

[我在此链接http://arshaw.com/fullcalendar/docs/event_data/Event_Object/](http://arshaw.com/fullcalendar/docs/event_data/Event_Object/)上找到了对正确格式的引用

*'您可以指定 IETF 格式的字符串（例如：“Wed, 18 Oct 2009 13:00:00 EST”）、ISO8601 格式的字符串（例如：“2009-11-05T13:15:30Z”）或 UNIX时间戳。*

无论出于什么原因，如果我使用 IS8601，它在 IE9 中工作得很好。这基本上涉及在日期后插入“T”。

希望有人觉得这很有用。

# grails-2.0 - grails 2：重新加载控制器、断点和关机

> ID：12874439
> 
> 赞同：1
> 
> 时间：2012-10-13T15:17:50.250
> 
> 标签：grails-2.0, grails-controller

我在全新的 grails 2 安装和项目中遇到了一些奇怪的问题。

我的设置：

*   Windows 7的
*   圣杯 2.1.1
*   智能

问题：

1.  存储实体时，我设置了 flash.message="foo"+x。grails 缓存此代码（不是值）。当我将其更改为“bar”+x 时，grails 不会接受更改。我必须停下来，清理 grails，然后重新开始。需要永远。

2.  在我的 grails 控制器中，我查询 Web 服务。当 Web 服务脱机时，我会收到 FileNotFoundException。所以我将代码包装在一个 try-catch 中。现在我仍然得到那个 FileNotFoundException，并且带有错误 500 的浏览器输出甚至显示我的代码被 try-catch 截断。

3.  停止 grails 不会停止 java 进程。我必须使用任务管理器杀死它。两种启动方式都会发生这种情况：ctrl-alt-g run-app 然后用骷髅图标停止，然后在调试模式下运行，然后用红色按钮停止。

4.  断点不起作用。无论我在控制器中的何处设置断点，它都不会停在那里。

知道有什么问题吗？

我预计 grails v2 不会像 v1 那样痛苦，但到目前为止，它真的让我很难过。

# javascript - 滚动到顶部时，页脚 Div（导航）跳转

> ID：12874443
> 
> 赞同：0
> 
> 时间：2012-10-13T15:18:06.100
> 
> 标签：javascript, html, css

我目前正在开发一个完全基于 Web 的应用外观布局。

我现在的问题是，当我让我的 S3 通过拖动自动滚动到顶部时，导航会发生短暂的跳跃。如果我正常向上滚动（不松开手指），则不会出现此问题。

固定定位和常规浏览器栏似乎存在问题。

CSS：

```
#nav {
    position: fixed;
    bottom: 0;
    ..
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:21:29.530

你不能让它滚动到其他 div 或任何东西上。如果没有 javascript、jquery 或巨大的 css，屏幕底部或顶部的 div 之后的屏幕通常无法正常工作。

反正，

你试过把边距放在

```
margin: 0 auto; 
```

也给它一个特定的大小和/或高度可能会有所帮助。

你试过跨浏览器吗？

# django - OneToOne 关系的 Django Tastypie POST 请求

> ID：12874445
> 
> 赞同：0
> 
> 时间：2012-10-13T15:18:18.133
> 
> 标签：django, django-models, tastypie, one-to-one

我最近开始使用 django-tastypie 并且到目前为止很喜欢这个框架。话虽如此，我在 POST 上遇到了 OneToOne 与模型的关系的问题，并且花了很多时间但不知道缺少什么。这是模型和资源代码 -

**模型**

```
class Question(TimeStampedModel):
    question_title = models.CharField("question title", max_length=100)     
    question_desc = models.TextField("question description", max_length=1000)
    ....... 
```

第二种模型与问题具有 OneToOne 关系 -

```
class QuestionAnswer(TimeStampedModel):
    question = models.OneToOneField(Question)
    ..... 
```

**资源**

QuestionAnswerResource -

```
class QuestionAnswerResource(ModelResource):
    question = fields.ForeignKey('myapp.api.QuestionResource', 'question')

    class Meta:
        queryset = QuestionAnswer.objects.all()
        resource_name='questionanswer' 
```

问题资源 -

```
class QuestionResource(ModelResource):
    questionanswer = fields.OneToOneField('myapp.api.QuestionAnswerResource', 'questionanswer', full=True) 

    class Meta:
        queryset = Question.objects.all()
        resource_name = 'question' 
```

通过上述设置，我在 GET 上得到了带有 Question 实例及其 answer 属性的正确响应。但是，当我尝试发布数据以保存问题/答案时，它会失败并出现以下错误 -

> "{"error_message": "", "traceback": "Traceback (最近一次调用最后一次):\n\n 文件\"/Library/Python/2.7/site-packages/tastypie/resources.py\", 第192行, .................................................. ............................. 第 636 行，水合物\n
> 值 = super(ToOneField, self).hydrate(bundle)\n\n 文件 \"/Library/Python/2.7/site-packages/tastypie/fields.py\"，第 154 行，在 hydrate\n elif self.attribute 和 getattr(bundle.obj , self.attribute, None):\n\n 文件\"/Library/Python/2.7/site-packages/Django-1.4.1-py2.7.egg/django/db/models/fields/related.py\ "，第 343 行，在**获取**\n raise self.field.rel.to.DoesNotExist\n\nDoesNotExist\n"}"

有人可以指出我缺少什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T11:23:51.900

我认为这是：

```
questionanswer = fields.OneToOneField('myapp.api.QuestionAnswerResource', 'questionanswer', full=True) 
```

导致问题。您的模型中没有`questionanswer`字段`Question`，Django 期望如此。

要进行测试，您可能想查看是否可以在 shell 中创建实例。[Tastypie 文档](http://django-tastypie.readthedocs.org/en/latest/fields.html#toonefield)对以下内容说`ToOneField`：

> 这个子类需要 Django 的 ORM 层才能正常工作。

我认为这可能不是这里的情况。

要为您可能想要设置的问题提供答案[`related_name`](http://django-tastypie.readthedocs.org/en/latest/fields.html#tastypie.fields.RelatedField.related_name)，如下所示：

```
question = fields.ForeignKey('myapp.api.QuestionResource', 'question', related_name = 'questionanswer') 
```

# sql - SQL Server 在存储过程上关闭 ANSI_WARNING

> ID：12874451
> 
> 赞同：1
> 
> 时间：2012-10-13T15:18:45.960
> 
> 标签：sql, sql-server, tsql

我需要知道如何在我的存储过程中关闭 ANSI 警告。我不断收到错误

> *字符串或二进制数据将被截断。*

但是，我宁愿关闭它，因为我期望它并且宁愿允许它。

我添加了声明

```
SET ANSI_WARNINGS OFF 
GO 
```

然而，就在存储过程之前，这样做似乎根本不会抑制错误。

因为我一开始就有这个截断错误，所以我的一个存储过程执行动态 Sql 来检索值（[SQLFIddle 显示代码](http://sqlfiddle.com/#!3/10876/1)）。而且我必须将所有字段的长度设置为最大值（NVarchar（3072））的长度。然而，当我的查询被执行时，在将它们打印到客户端时，我需要它们恢复到正确的大小。

请提供有关如何最好地处理此问题的信息。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T19:28:49.963

我同意@marc_s - 解决问题，而不是症状，**特别是如果您的意图是 truncate**。当另一个开发人员出现并且 proc 抛出这些错误并且使用非标准标志来抑制问题时，他会怎么想？

> *使您的截断意图清晰的代码。*

**确定您的问题**
小提琴没有显示您描述的行为。所以我对这个问题仍然有些困惑。

此外，对于这样的问题，您的 SQL 小提琴*太密集*了。如果我没有在下面回答您的问题，请尽可能将问题隔离到最简单的用例中。不要只是将 500 行应用程序转储到一个窗口中。

*注意：Max NVarchar 在 SQL 7 和 2000 版本中为 4000，`nvarchar(max)`在 SQL 2005 及更高版本中为 2 Gigs ( )。我不知道你从哪里想出 3072。*

**我的测试**

如果您在 SPROC*参数*级别截断，则忽略 ANSI 警告标志，因为[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/ms190368.aspx)警告。如果它在您的过程中，我创建了一个小测试过程，显示允许截断的 ANSI 标志：

```
CREATE Proc DoSomething (@longThing varchar(50)) AS 

   DECLARE @T1 TABLE  ( shortThing VARCHAR(20) );

   SET ANSI_WARNINGS OFF 
   Print ' I don''t even whimpler when truncating'
   INSERT INTO @T1 (ShortThing) VALUES ( @longThing);

   SET ANSI_WARNINGS ON
   Print ' I yell when truncated'
   INSERT INTO @T1 (ShortThing) VALUES ( @longThing); 
```

然后调用它按预期工作：

```
exec DoSomething 'Text string longer than 20 characters' 
```

**解决问题**

尽管如此，为什么不直接编写代码，以便（可能）截断数据的意图很明确？您可以避免警告而不是将其关闭。我会执行以下操作之一：

*   使您的过程参数足够长以容纳输入
*   如果您需要缩短`Substring()`用于修剪数据的字符串数据。
*   使用`CAST`或`CONVERT`将数据格式化为您的要求。 [此页面](http://msdn.microsoft.com/en-us/library/ms187928.aspx)（标题为“隐式转换”的部分应该有所帮助）详细介绍了 cast & convert 的工作方式。

我上面的简单示例可以修改如下，以避免需要设置任何标志。

```
CREATE Proc DoSomethingBETTER (@longThing varchar(50)) AS 

   SET ANSI_WARNINGS ON  
   DECLARE @T1 TABLE  ( shortThing VARCHAR(20) );

   --try one of these 3 options...
   INSERT INTO @T1 (ShortThing) VALUES ( Convert(varchar(20), @longThing));
   INSERT INTO @T1 (ShortThing) VALUES ( Substring(@longThing, 1, 20));
   INSERT INTO @T1 (ShortThing) VALUES ( Cast(@longThing as varchar(20)) );

   Print('Ansi warnings can be on when truncating data'); 
```

### 旁白——集群向导

看着你的小提琴，我注意到你`Uniqueidentifer`是聚集索引中的关键。在几乎所有情况下，这都是一个非常低效的选择。GUID 的随机性意味着您的数据不断被碎片化和重新洗牌。

希望您可以转换为[Jimmy Nilsson 的文章](http://www.informit.com/articles/article.aspx?p=25862)`int identity`中所述的、正在使用`newsequentialid()`的或 COMB 指南 。[您可以在此处](https://stackoverflow.com/questions/713430/clustered-primary-key-on-unique-identifier-id-column-in-sql-server)、[此处](https://stackoverflow.com/questions/583001/improving-performance-of-cluster-index-guid-primary-key)、[此处](http://www.informit.com/articles/article.aspx?p=25862)和[此处](https://stackoverflow.com/questions/9727090/unique-identifier-guid-as-primary-key-in-database-design)查看有关该问题的更多信息。

# jquery - 如何将 getJSON 值放入变量中

> ID：12874452
> 
> 赞同：0
> 
> 时间：2012-10-13T15:18:46.897
> 
> 标签：jquery, json

我试图理解 jQuery 的 getJson()。我想将它返回的数组放入我不知道如何放置的变量中。当我单击此代码中的开始按钮时，我变得不确定。我知道 PHP 文件中的所有内容都有效，所以我认为问题不存在。

```
function getGameData(){
var difLevel = $("input[@name=difLevel]:checked").val();
var gameData = (function(){
    var json = null;
    $.getJSON('/Spelling4/core/proof_Test_JSON_process4.php',{difNo : difLevel},function(data){
        json = data;
    });
    return json;
});

return gameData;

}
$('#startButton').click(function(e) {
    var gameData = getGameData();
    e.preventDefault();
alert(gameData[1]);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:23:16.283

Ajax 是异步的，当你调用你的函数并且如果 ajax 请求没有完成你的函数返回`null`你应该使用延迟对象。请注意，您的属性选择器是错误的，您应该删除`@`.

```
var difLevel = $("input[name=difLevel]:checked").val(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:23:42.807

JSON 返回数据将在您指定的 json 变量中结束。但是，JSON 查询是异步的，因此当 getGameData() 函数完成时没有返回响应。

您需要在 $.getJSON(...) 中使用 JSON 数据，而不是返回它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:25:18.607

我认为您正在将函数存储在游戏数据中。您应该能够使用 gameData() 访问这些值

# java - 创建一个排序的链表类

> ID：12874455
> 
> 赞同：0
> 
> 时间：2012-10-13T15:18:56.070
> 
> 标签：java, linked-list

我正在尝试创建一个扩展 LinkedList 的 SortedLinkedList 类。此类应该将项目添加到 SortedLinkedList 并对其进行排序。

我正在尝试覆盖 boolean add(E obj) 方法，以便按排序顺序添加项目。

在 Stackoverflow 问题上，我发现了以下覆盖 add(E obj) 的方法：

```
public boolean add(E obj) {
    int index = 0;
    for( ; index<size() ; index++){
        E object= get(index);

        if(obj.compareTo(object) < 0){
            break;
        }
    }

    add(index, obj);
    return true;
}; 
```

我理解这个方法是如何工作的，但是我读过使用 ListIterator 比使用 get(index) 更有效。我一直在尝试使用 ListIterator，但似乎无法让一切正常工作。

这是我使用 Listiterator 所取得的进展，我确定它有问题，但我似乎无法弄清楚：

```
public boolean add(E obj)
{   
    add(size(), obj);
    ListIterator<E> iterator = listIterator();

    while(iterator.hasNext())
    {
        E object = iterator.next();
        if(obj.compareTo(object)<0)
        {
            //do something;
        }
    }
    return true;
} 
```

关于如何使用迭代器对列表进行排序的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T15:24:10.307

不要考虑使用迭代器对列表进行排序。考虑使用迭代器将新元素插入到已排序的列表中。

你的清单一开始是空的。添加第一个元素时，您将拥有一个元素的列表，根据定义，该列表已排序。如果您确保始终在正确的位置添加后续元素，那么列表将保持排序！

这正是使用的代码`get`所做的，但正如您所说的那样，这对于链表来说效率不高。您需要做的是使用迭代器重现该算法。

提示：列表迭代器允许您[在当前位置添加元素](http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html#add%28E%29)。

# c# - 在运行时生成包含 Div 的 DataList

> ID：12874459
> 
> 赞同：0
> 
> 时间：2012-10-13T15:19:34.730
> 
> 标签：c#, asp.net, .net

我有一个在运行时生成 Div 的 DataList 代码。有人在我之前的一个问题中建议了此代码：

```
<asp:DataList runat="server" ID="NamesDL" RepeatColumns="2" RepeatDirection="Horizontal">
 <ItemTemplate>
    <div class="header">
       <%# Eval("Category") %>
    </div>
    <div class="Details">
       <%# Eval("CategoryDetails") %>
    </div>
 </ItemTemplate>
 </asp:DataList> 
```

这仅限于一个 DataList 控件。我想在运行时生成几个 DataList 控件，并希望在 AJAX Tab 容器的每个标签页上显示。我还想动态生成 Div。

我有一个循环，我有一个小想法：

```
for (int i=0; i<=3; i++)
{
    DataList DL = new DataList();
    Controls ctl = new Control();

    DL.Conrols.Add(ctl);
} 
```

我没有关注如何将 Div 包含在每个动态生成的 Div 中。DataList 将通过 DataSource 获取 Div 的列。

我希望代码与 .NET 3.5 兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:41:25.310

我想你想要一个`asp:Repeater`.

```
<asp:Repeater id="NamesDL" runat="server">

    <HeaderTemplate>
        <div class="header">
            <%# Eval("Category") %>
        </div>
    </HeaderTemplate>

    <ItemTemplate>
        <div class="Details">
            <%# Eval("CategoryDetails") %>
        </div>
    </ItemTemplate>

    <FooterTemplate>
        <!--if you have other stuff, add it here-->
    </FooterTemplate>

</asp:Repeater> 
```

然后将您的 DataList 绑定到中继器。

# python - os.listdir 返回带有神秘字符的列表

> ID：12874462
> 
> 赞同：1
> 
> 时间：2012-10-13T15:19:52.257
> 
> 标签：python, list

我`os.listdir()`在一个目录上做，它返回一个像这样的列表：

```
[u'Somefile.gif', u'SomeDirectory', u'SomeJPEG.jpeg'] 
```

你是干什么用的？在我的搜索中，我听说过：

1.  是一个固定的错误。
2.  表示列出的项目是 unicode。

我不相信这两个都是真的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T15:24:44.287

在 Python2 中，`u`in`u'...'`表示对象是 unicode。

[从文档](http://docs.python.org/library/os.html#os.listdir)：

> 在 2.3 版更改: 在 Windows NT/2k/XP 和 Unix 上，如果 path 是一个 Unicode 对象，结果将是一个 Unicode 对象列表。无法解码的文件名仍将作为字符串对象返回。

也许您正在`os.listdir`使用 unicode 参数进行调用。例如：

```
In [51]: import os

In [52]: os.listdir('.')
Out[52]: ['a', 'a.ps']

In [53]: os.listdir(u'.')
Out[53]: [u'a', u'a.ps'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:30:33.530

The `u` prefix on your `str`s let you know that these are in fact unicode strings. Calling `str` on them will turn the unicode strings into "normal" python strings. However, this is only that simple if your file/directory names are made up of strictly ascii characters.

```
In [2]: L
Out[2]: [u'asdf', u'asdf', u'aasf']

In [3]: [str(i) for i in L]
Out[3]: ['asdf', 'asdf', 'aasf'] 
```

Hope this helps

# ruby - 找不到 gem -v 命令 - CentOS 6.3

> ID：12874465
> 
> 赞同：1
> 
> 时间：2012-10-13T15:20:06.027
> 
> 标签：ruby, gem

我正在尝试在 CentOS 6.3 上安装 Ruby 我已经从源代码安装了 ruby​​-1.9.3-p286。然而，一旦完成，我尝试执行 gem -v 来验证 gems 是否已安装并且我得到 /usr/bin/gem: No such file or directory。我以为这个版本的 ruby​​ 会自动安装 gems。难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T16:55:24.173

除非您`--prefix`在构建它之前提供了一个目录，否则 Ruby（至少该版本 - 不能确定其他版本）将在`/usr/local`. 那将意味着`gem`生活在`/usr/local/bin/gem`。

如果该文件在那里，您可能需要考虑添加`/usr/local/bin`到您的路径：

```
# ~/.bashrc (or equivalent):
export PATH=/usr/local/bin:$PATH 
```

# c# - HttpListener 类是否已弃用？

> ID：12874466
> 
> 赞同：3
> 
> 时间：2012-10-13T15:20:16.360
> 
> 标签：c#, asp.net, .net, wcf, iis

我正在尝试在不使用 IIS 的情况下设置 Web 服务。

我知道我们可以使用 HttpListener 来创建简单的 http 服务器。我想知道它现在是否已被弃用，因为 WCF 似乎提供了更高级的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T23:47:06.313

Microsoft 建议不要使用它。如果您需要知道它可以维护几年，我会选择 WCF。

或者，如果您乐于公开 RESTful 服务而不是 SOAP 或 XML-RPC，则可以使用一些独立的 .NET 程序集在您的应用程序中托管 HTTP 服务器，而不依赖于 IIS 或 WCF - 它们会运行在 Mono 下也没有问题：

南希 - [http://nancyfx.org/](http://nancyfx.org/)
皮划艇 - [https://github.com/kayak/kayak](https://github.com/kayak/kayak)
萤火虫 - [http://loudej.github.com/firefly/](http://loudej.github.com/firefly/)

我们使用它们来确保我们可以完全控制服务器堆栈，并且可以调整作为 .NET 的 HTTP 侦听器的黑盒参数之外的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:40:59.513

查看[HttpListener 类文档](http://msdn.microsoft.com/en-US/library/system.net.httplistener%28v=vs.110%29.aspx)：

*此类仅在运行 Windows XP SP2 或 Windows Server 2003 操作系统的计算机上可用。如果您尝试在运行早期操作系统的计算机上创建 HttpListener 对象，则构造函数将引发 PlatformNotSupportedException 异常。*

因此，是否可以使用它取决于您要在其上运行程序的操作系统。

# javascript - javascript中的参数和参数有什么区别？

> ID：12874467
> 
> 赞同：23
> 
> 时间：2012-10-13T15:20:19.593
> 
> 标签：javascript

我知道参数是传递给函数的变量，并为函数中的参数赋值，但我无法理解：

javascript中“参数”和“参数”之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-10-13T15:29:50.950

参数是将传递给函数的值的*别名。*参数是实际值。

```
var foo = function( a, b, c ) {}; // a, b, and c are the parameters

foo( 1, 2, 3 ); // 1, 2, and 3 are the arguments 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T15:21:35.397

当您定义一个函数时，表示将传递给它进行处理的值的变量称为参数。例如，以下函数定义有一个名为 $number 的参数：

```
function doubleIt($number) {
    return $number *= 2;
} 
```

但是，当您使用函数时，传递给它的值称为参数。因此，在以下情况下，$price 作为参数传递给 doubleIt()：

```
$price = 50;
$inflated_price = doubleIt($price);  // 100 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T15:23:35.910

参数（如果有）*定义*方法签名。参数是*传递*给函数的值。

但我猜同样的区别。

`void function(int param1, string param2) //defines the types the function must receive`.

`function(1, "Hello World")`1 和“Hello World”作为参数传递。参数接收（如果你喜欢）参数。

[这里](http://msdn.microsoft.com/en-us/library/9kewt1b3%28v=vs.80%29.aspx)解释得很好

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T15:29:26.073

> ### [13 功能定义](http://es5.github.com/#x13)
> 
> 句法
> 
> ```
> 功能声明：
>     函数标识符（FormalParameterList（opt））{FunctionBody}
> 函数表达式：
>     函数标识符opt（FormalParameterList（opt））{FunctionBody}
> 形式参数列表：
>     标识符
>     形式参数列表,标识符
> 功能体：
>     源元素（选择）
> ```

官方称它们为参数，但实际参数在同一个被调用对象中给出。但是，这两个词是可以互换的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-13T15:35:33.290

参数是*函数*的属性。

参数是对函数的*特定调用*的属性。

在 javascript 中，如果您不提供与参数数量相等的参数数量，则多余的会变成`undefined`.

```
function f(a,b,c) // 3 parameters
f(1) // 1 argument given; inside the function f, a will be 1, and b and c will be undefined 
```

# python - GStreamer 属性仅在本地可用

> ID：12874469
> 
> 赞同：0
> 
> 时间：2012-10-13T15:20:24.897
> 
> 标签：python, gstreamer, pygobject

下面的代码是一个测试用例，允许我设置和获取 GStreamer URI 属性的位置，但它似乎只在它设置的方法内工作。谁能看到我在这里做错了什么？

```
import gi
gi.require_version('Gst', '1.0')
from gi.repository import Gst, GObject
import time

GObject.threads_init()
Gst.init(None)

class MusicPlayer(object):
    def __init__(self):
        self.player = Gst.ElementFactory.make("playbin", "player")
        fakesink = Gst.ElementFactory.make("fakesink", "fakesink")
        self.player.set_property("video-sink", fakesink)

    def set_track(self, filepath):
        filepath = filepath.replace('%', '%25').replace('#', '%23')
        self.player.set_property("uri", filepath)
        print(self.player.get_property("uri"))#prints the correct information

    def get_track(self):
        return self.player.get_property("uri")

    def play_item(self):
        self.player.set_state(Gst.State.PLAYING)

    def pause_item(self):
        self.player.set_state(Gst.State.PAUSED)

    def stop_play(self):
        self.player.set_state(Gst.State.NULL)

import time
def main():
    app = MusicPlayer()
    app.set_track("file:///media/Media/Music/Bob Dylan/Modern Times/06 - Workingman's Blues #2.ogg")
    app.play_item()
    print(app.get_track())#prints 'None'
    time.sleep(5)
    app.pause_item()
    time.sleep(1)
    app.play_item()
    time.sleep(5)
    app.stop_play()

main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T13:55:14.330

发现 gstreamer 1.0 具有播放 url 和设置 url 的单独属性，因此我需要使用

```
self.player.get_property("current-uri") 
```

而不是 gstreamer0.10 的属性

```
self.player.get_property("uri") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-29T06:48:39.490

这并不明显，因此需要重复在 gstreamer-1.0 中，当播放某些内容时，该`self.player.get_property('uri')`命令将返回 None。

您需要使用`self.player.get_property('current-uri')`来获取您所追求的值，即使您只是使用self.player.get_property('current-uri') 设置属性返回 None `self.player.set_property('uri').
If the the file is NOT PLAYING the`

总结：
如果文件正在播放，则使用`self.player.get_property('current-uri')`
如果不使用`self.player.get_property('uri')`

如果它是一个设计“功能”，它很臭！

# javascript - 调整图像大小以适应 asp.net javascript 中的图像控件

> ID：12874470
> 
> 赞同：0
> 
> 时间：2012-10-13T15:20:46.170
> 
> 标签：javascript, asp.net, web-applications

我根据选择的菜单项更改标题中的图像。问题是图像在图像控件中拉伸。我希望它自动缩放而不扭曲图像。这可能吗。

注意：图像位于图像文件夹中，大小不一。

Javascript

```
<script type="text/javascript">

    function ChangeProjectImage(imgpath) {
        var img1 = document.getElementById("Image2")
        img1.src = imgpath;
    }

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:34:02.213

我建议设置 CSS 属性“宽度”。使用适合您的需要和图像的宽度。它将像这样实现：

```
width:300px; 
```

由于您不想扭曲图像，因此您可能应该使用图像具有的最小宽度。所有[这些](http://jsfiddle.net/QegqM/)图像都有不同的宽度，但由于 'width' 属性设置为`80px`，它们看起来都具有相同的宽度，没有失真。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:36:59.157

我不认为你可以自动缩放，除非你知道你在寻找多少缩放。

**CSS**

```
Zoom:200%; 
```

# java - 多核上的 Java 并行执行

> ID：12874472
> 
> 赞同：3
> 
> 时间：2012-10-13T15:20:55.337
> 
> 标签：java, parallel-extensions

我想知道是否存在一种方法来并行化 Java 中的查询（或有框架或库），如 C# 和 Linq：

```
var query = from item in source.AsParallel().WithDegreeOfParallelism(2)
        where Compute(item) > 42
        select item; 
```

如果我不能并行化查询，如果我可以在 c# 中做这样的事情（每个并行化一个）：

```
 Parallel.ForEach(files, currentFile =>
        {
            // The more computational work you do here, the greater  
            // the speedup compared to a sequential foreach loop. 
            string filename = System.IO.Path.GetFileName(currentFile);
            System.Drawing.Bitmap bitmap = new System.Drawing.Bitmap(currentFile);

            bitmap.RotateFlip(System.Drawing.RotateFlipType.Rotate180FlipNone);
            bitmap.Save(System.IO.Path.Combine(newDir, filename));

            // Peek behind the scenes to see how work is parallelized. 
            // But be aware: Thread contention for the Console slows down parallel loops!!!
            Console.WriteLine("Processing {0} on thread {1}", filename,
                                Thread.CurrentThread.ManagedThreadId);

        } 
```

请如果您发布任何框架或库，您能告诉我您使用它的经验吗？谢谢你的时间。

关于 c# 和 linq 你可以在这里找到文档：http: [//msdn.microsoft.com/en-us/library/dd997425.aspx](http://msdn.microsoft.com/en-us/library/dd997425.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:39:33.133

没有直接翻译。首先，Java 没有 LINQ，也没有任何标准的并行集合类。

[GPars](http://gpars.codehaus.org/)可能是最合适的。

请注意，虽然它针对的是 groovy，但它的 API 完全可以从 java 中使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:26:04.847

也许[Fork/Join 框架](http://gee.cs.oswego.edu/dl/papers/fj.pdf)可以帮助你？这里是[java教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html)

# eclipse - Eclipse 中新编程语言的编辑器

> ID：12874477
> 
> 赞同：0
> 
> 时间：2012-10-13T15:21:46.427
> 
> 标签：eclipse, ide, eclipse-plugin, programming-languages, antlr

我真的希望有人可以帮助我解决这个问题！

对于 GOAL 代理编程语言，有一个现有的用 JEdit 编写的 IDE，它不是那么好。因此，我们希望将编辑（至少）迁移到 Eclipse 平台。

GOAL 编程语言本身就涉及其他几种文件类型，例如 Prolog 文件。为此，存在一些用 ANTLR 编写的语法，它们运行良好。

我现在的问题是，使用这些预先存在的语法和构建的词法分析器/解析器等，是否可以轻松地为此创建一个 Eclipse 编辑器？

我看过一些现有的东西，比如 Xtext（必须编写一个新的语法，这对于 GOAL 或 Prolog 来说甚至是不可能的）、IMP（几年前已经放弃了？）等等。这些似乎都不够。

有没有人有任何想法/建议？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:14:40.570

另一种选择是[http://www.eclipse.org/dltk/](http://www.eclipse.org/dltk/)不确定您是否已经评估过它。它不会假装为您生成整个 IDE :-) 但是，它抽象了通用功能，因此您可以主要专注于您的语言功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:31:39.723

不幸的是，IMP 确实似乎被遗弃了，因为它完全涵盖了您的场景：您的语言、编译器等已经在工作，现在您“只需要”IDE。

尽管如此，IMP 仍在工作，最近，它已被用于实现[Frege 编程语言](https://github.com/Frege)的 IDE 。

# java - Swing：keyListener 代码是“未知的”

> ID：12874480
> 
> 赞同：2
> 
> 时间：2012-10-13T15:23:24.190
> 
> 标签：java, swing, jtextfield, keylistener

我在我的摇摆应用程序中添加`KeyListener`了一个`TextField`以尝试一些功能。目标是对输入的每个键做出反应`TextField`。用户应该只输入数字，但实际上，也可以输入字母字符。所以另外我必须在每次键入一个键后检查，如果整个东西是一个数字，如果是，用那个数字做一些事情，如果不是，告诉用户有错误而不退出程序。所以我想做这样的事情：

```
String enteredNumPlayers = "";

JTextField textfieldNumPlayers = new JTextField();
textfieldNumPlayers.setBounds(/*some values*/);
textfieldNumPlayers.setBorder(BorderFactory.createMatteBorder(0, 0, 1, 0, Color.DARK_GRAY));
textfieldNumPlayers.setHorizontalAlignment(JTextField.CENTER);
textfieldNumPlayers.addKeyListener(new KeyListener() {

    @Override
    public void keyTyped(KeyEvent e) {
        if(e.getKeyChar()!=/*Code of the back key*/){
            enteredNumPlayers += e.getKeyChar();
            System.out.println(e);
        }else{
            enteredNumPlayers = enteredNumPlayers.substring(0, s1.length()-1);
        }

        try{
            Integer.parseInt(enteredNumPlayers);
            // do something with that number
        }catch (NumberFormatException err){
            new ErrorDialog("Not a number"); // my own method to allude user
        }   
    }

    @Override
    public void keyReleased(KeyEvent e) {
        // TODO Auto-generated method stub

    }

    @Override
    public void keyPressed(KeyEvent e) {
        // TODO Auto-generated method stub

    }
}); 
```

`System.out.println(e)`现在我想通过简单的方法查看后退键的具体代码`keyTyped(...)`，但打印如下：

```
java.awt.event.KeyEvent[KEY_TYPED,keyCode=0,keyText=Unbekannt keyCode: 0x0,keyChar=Rücktaste,keyLocation=KEY_LOCATION_UNKNOWN,rawCode=0,primaryLevelUnicode=0,scancode=0,extendedKeyCode=0x0] on (...) 
```

为什么每个键值或代码 = 0 或未知？不应该是ascii值吗？使用“Rücktaste”也会很丑陋，因为在英语工作的计算机上这个值会有所不同，不是吗？那么我怎样才能干净地检查键入的键是否是后退键呢？

其他角色也会发生同样的事情，只是他们的 keyChar 是正确的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:25:35.927

您正在寻找的是 a`DocumentFilter`或`DocumentListener`a `JFormattedTextField`。这三个都是比使用键侦听器更好的解决方案，因为它还涵盖了拖放、复制粘贴或您能想到的将文本放入文本字​​段的任何其他机制。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T16:51:37.740

我认为每次用户按下除整数以外的任何内容时都会显示错误消息有点烦人。检查此示例[代码](https://www.coderanch.com/how-to/java/NumericTextField)，它使用正则表达式来匹配输入，并且具有仅接受数字的优点，其他任何内容都不会插入到文本字段中（通过覆盖的`insertString`方法进行管理`PlainDocument`）。

# jquery - 为什么 Google Plus Api 中的“gapi.client”未定义？

> ID：12874491
> 
> 赞同：10
> 
> 时间：2012-10-13T15:24:11.677
> 
> 标签：jquery, google-api

我正在尝试使用 google+ api，我必须修改示例身份验证示例以满足我的需求，如下所示：

```
<script src="https://apis.google.com/js/client.js"></script> 
```

而不是这个：

```
<script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script> 
```

基本上去掉了 onload 参数，并且把所有的功能都放在了 dom 上。

这是我不明白的问题：

代码：

```
console.log(gapi);
console.log(gapi.client);

$.each(gapi, function(){

        console.log(this);

});

gapi.client.setApiKey(this.options.apiKey); 
```

输出：

![在此处输入图像描述](../Images/ff83227750bdb07f280d1964dfee57fb.png)

所以，我的问题基本上是：

为什么在 console.log(gapi) 它显示它有像 client 和 auth 这样的子对象，而在 console.log(gapi.client) 它显示 undefined ？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-15T16:53:54.493

必须使用 ?onload 回调参数，当 JS 客户端完成异步加载时调用。通过在 dom ready 上运行，您正在尝试在 gapi.client 被定义之前访问它。发生的情况是 /js/client.js 脚本定义了 gapi 和一些辅助函数，但 gapi.client 和 gapi.auth 直到 JS 客户端完成加载后才定义。当您检查由 console.log(gapi) 记录的对象时，客户端已完成加载，因此您会看到已定义 gapi.client 和 gapi.auth。

# iphone - 核心数据 - 在多个线程之间共享 NSManagedObjects

> ID：12874492
> 
> 赞同：5
> 
> 时间：2012-10-13T15:24:19.857
> 
> 标签：iphone, objective-c, ios, core-data

我遭受了在多个线程中使用单个 MOC 的所有后果——我的应用程序在随机点崩溃，因为 MOC 是在主线程中创建的，我还使用它在另一个线程中填充数据库。尽管代码是使用全局单例同步的（@synchronize），但应用程序崩溃了。我读到为每个线程使用一个单独的 MOC 可以解决问题，但我还读到它也被认为是跨线程共享 NSManagedObjects 的不好方法。

我的用例如下： 1）我从服务器加载和解析 XML，并在解析过程中将每个新的 NSManagedObject 插入数据库中。这一切都发生在一个单独的线程中。2）从主线程，用户与从数据库读取数据的 UI 交互。

在这两个线程中，我都使用 NSManagedObjects。你会建议我如何解决这个问题？我已经多次失败了。

大多数情况下，应用程序因错误而崩溃，提示我在枚举它时正在修改一个集合，这是不正确的，因为代码是同步的，并且在我迭代它时没有修改发生，反之亦然 - 当我修改它时我不迭代并且我完成后保存。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T15:40:20.340

`NSManagedObjectContext`每个线程使用一个。如果您在线程之间进行通信，请传递`NSManagedObjectID`线程安全的 ，然后再次从您的线程上下文中获取对象。在我的应用程序中，有时我什至每个控制器使用一个上下文。

要管理不同的上下文，请为`NSManagedObjectContextDidChangeNotification`. 在此通知处理中，您通过该`mergeChangesFromContextDidSaveNotification:`方法将通知传递给您的每个上下文。此方法是线程保存，并使上下文更新其状态。

在此之后，您必须刷新您的视图。如果您有基于表格视图的应用程序，请查看`NSFetchedResultsController`. 这有助于您使用适当的动画自动更新表格。如果不使用表格视图，则必须自己实现 UI 更新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-13T20:40:59.863

如果您只支持 iOS 5 及更高版本，则不再需要处理`NSManagedObjectID`和合并上下文。您可以改用新的并发类型`NSManagedObjectContext`。然后在其中进行操作`managedObjectContext:performBlock`，它们将自动合并。

有关更多信息，请参阅 svena 的答案： [Core Data and Concurrency using NSOperationQueues](https://stackoverflow.com/questions/10770742/core-data-and-concurrency-using-nsoperationqueues)

# c++ - 单例中的 FunktionPointerArray

> ID：12874494
> 
> 赞同：0
> 
> 时间：2012-10-13T15:24:25.210
> 
> 标签：c++, arrays, static, compiler-errors, member-function-pointers

我尝试在拥有线程的单例中实现函数指针数组。在线程函数中我得到一个错误，告诉我一个成员必须是相对于一个对象。更多在评论区...

标题：

```
typedef struct{
  int action;
  HWND handle;
}JOB;

class Class{
public:
  enum Action { 1,2 };

private:
  JOB    m_currentJob;
  queue<JOB> Jobs;

  static DWORD WINAPI ThreadFunction(LPVOID lpParam);

  void (Class::*ftnptr[2])(JOB Job);
  void Class::ftn1(JOB Job);
  void Class::ftn2(JOB Job);

// Singleton pattern
public:
  static Class*  getInstance(){
    if(sInstance == NULL)
      sInstance = new Class();
    return sInstance;
  }
private:
  Class(void);
  ~Class(void);
  static Class*  sInstance;
}; 
```

身体：

```
#include "Class.h"

Class* Class::sInstance = NULL;

Class::Class(){
  this->ftnptr[0] = &Class::ftn1;
  this->ftnptr[1] = &Class::ftn2;
}

DWORD WINAPI Class::AutoplayerThreadFunction(LPVOID lpParam)
{  
  Class *pParent = static_cast<Class*>(lpParam);

  while(true){
   (pParent->*ftnptr[pParent->m_currentJob.action])(pParent->m_currentJob);
   /* The line above causes the compiler error. Curious to me is that 
    * neither "pParent->m_currentJob" nor "pParent->m_currentJob" cause 
    * any problems, although they are members too like the ftnptr array.
    */
  }
}

void Class::ftn1(JOB Job){}
void Class::ftn2(JOB Job){} 
```

从 SingletonPattern 通过 getInstance 调用并没有让它变得更好。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:58:26.517

ftnptr 是类的成员。但是，您可以直接访问它。也就是说，pParent->*ftnptr[...] 的意思是“访问由指针ftnptr[...] 指定的pParent 的成员”，但这并不意味着ftnptr 也是pParent 的成员。

正确的代码是 (pParent->*(pParent->ftnptr[...]))(...)。但我建议从中提取数组索引表达式：

```
auto fnptr = pParent->ftnptr[...];
(pParent->*fnptr)(...); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:36:47.483

我认为这可能是您声明指向成员函数的数组的方式。（编辑：这不是问题所在。无论如何我都会保留这个答案，因为函数指针的类型定义确实可以使代码更清晰，所以我认为这是个好建议。）

尝试使用`typedef`：

```
typedef void (Class::*ftnptr)(JOB Job);
ftnptr[2] fn_ptrs; 
```

然后像这样使用它：

```
Class::Class(){
  this->fn_ptrs[0] = &Class::ftn1;
  this->fn_ptrs[1] = &Class::ftn2;
}

DWORD WINAPI Class::AutoplayerThreadFunction(LPVOID lpParam)
{  
  Class *pParent = static_cast<Class*>(lpParam);

  while(true){
   (pParent->*(pParent->fn_ptrs[pParent->m_currentJob.action]))(pParent->m_currentJob);
   /* The line above causes the compiler error. Curious to me is that 
    * neither "pParent->m_currentJob" nor "pParent->m_currentJob" cause 
    * any problems, although they are members too like the ftnptr array.
    */
  }
} 
```

# php - 如何从数组中删除重复项

> ID：12874497
> 
> 赞同：2
> 
> 时间：2012-10-13T15:24:53.253
> 
> 标签：php, arrays, duplicates

我有一个这样的数组：

```
$names = array('John Doe','Marc','Rudolph', 'John Doe','Steve', 'Marc'); 
```

如何使用 PHP 删除重复的名称？

新数组必须是：

```
$names = array('John Doe','Marc','Rudolph','Steve'); 
```

这样做的功能已经是什么了。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T15:25:42.850

始终首先检查 php.net 手册。

```
$names = array('John Doe','Marc','Rudolph', 'John Doe','Steve', 'Marc');
$names = array_unique($names); 
```

[http://php.net/manual/en/function.array-unique.php](http://php.net/manual/en/function.array-unique.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:27:43.690

使用`array_unique()`：

```
$myArray = array(....);
$uniqueArray = array_unique( $myArray ); 
```

请参阅文档： http: [//php.net/manual/en/function.array-unique.php](http://php.net/manual/en/function.array-unique.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:53:45.893

您可以使用`array_unique`但请注意，这将`not work`用于`case sensitive array`诸如

```
 $names = array('John Doe','Marc','Rudolph','John doe','Steve','Marc');
                      ^-- Capital                 ^--Small 
```

如果你跑

```
var_dump(array_unique($names)); 
```

输出

```
array
  0 => string 'John Doe' (length=8)
  1 => string 'Marc' (length=4)
  2 => string 'Rudolph' (length=7)
  3 => string 'John doe' (length=8)
  4 => string 'Steve' (length=5 
```

解决方案在检查它是否唯一之前将所有内容转换为相同的大小写

```
var_dump(arrayUnique($names)); 
```

输出

```
array
  0 => string 'John Doe' (length=8)
  1 => string 'Marc' (length=4)
  2 => string 'Rudolph' (length=7)
  4 => string 'Steve' (length=5) 
```

使用的功能

```
function arrayUnique($array) {
    return array_intersect_key($array, array_unique(array_map("strtolower", $array)));
} 
```

# c - 信号总是结束程序

> ID：12874499
> 
> 赞同：0
> 
> 时间：2012-10-13T15:24:56.170
> 
> 标签：c

用信号和叉子做作业，信号有问题。

我创建了函数：

```
void trata_sinal_int() {
    char op[2];

    printf("\nTerminate? (y/n)\n");

    scanf("%s", op);

    if (op[0] == 'y') {
        printf("Bye Bye\n");
        exit(0);
    }

} 
```

主要我有：

```
signal(SIGINT, trata_sinal_int); 
```

当我运行它并按下`CTRL ^C`该函数时`void trata_sinal_int()`，我得到了消息。

如果我按`y`程序按预期结束，但如果我按`n`程序仍然结束。不是他按之前的样子`CTRL ^C`。

这应该发生吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T15:35:47.267

这取决于您遵守的标准，但标准 C 不允许您做更多的事情，只能修改类型变量或从信号处理程序`volatile sig_atomic_t`调用`_Exit`（或`abort()`或）。`signal()`POSIX 宽松得多。您的信号处理程序中的代码充满了用户交互，甚至超出了 POSIX 允许的范围。通常，您希望您的信号处理函数小而苗条。

请注意，信号处理函数应为：

```
void trata_sinal_int(int signum)
{ 
```

这允许您在没有类型不匹配的强制转换或编译器警告的情况下进行编译。该`signal()`函数可以在调用时将信号处理程序重置为默认行为；经典地，有必要在信号处理程序中恢复信号处理程序：

```
 signal(signum, trata_sinal_int); 
```

到目前为止，这一切都是非常通用和微不足道的。

当您键入 时`Control-C`，系统确实会返回到最初接收信号时的大致位置。但是，接下来会发生什么取决于它的位置（在处理程序内部必须非常小心的原因之一）。例如，如果它正在处理 内部的空闲列表指针`malloc()`，它会返回那里，但如果你`malloc()`在处理程序内部重新调用，那么所有的地狱都可能会崩溃。如果你在一个系统调用中，那么你的调用可能会被中断（返回一个错误指示和`errno == EINTR`），或者它可能会从中断的地方继续。否则，它应该回到计算运行的地方。

* * *

这是您的代码（固定版本）内置到测试台中。该`pause()`函数在返回之前等待一个信号。

```
#include <stdio.h>
#include <signal.h>
#include <stdlib.h>
#include <unistd.h>

static void trata_sinal_int(int signum)
{
    char op[2];

    signal(signum, trata_sinal_int);

    printf("\nTerminate? (y/n)\n");
    scanf("%s", op);

    if (op[0] == 'y')
    {
        printf("Bye Bye\n");
        exit(0);
    }
}

int main(void)
{
    signal(SIGINT, trata_sinal_int);
    for (int i = 0; i < 3; i++)
    {
        printf("Pausing\n");
        pause();
        printf("Continuing\n");
    }
    printf("Exiting\n");
    return(0);
} 
```

我真的应该指出，这`scanf()`根本不是很安全。大小为 2 的缓冲区是缓冲区溢出的公开邀请。我也不是错误检查系统调用。

我在 BSD 衍生产品 Mac OS X 10.7.5 上进行了测试。很有`signal()`可能在这个平台上不需要重置，因为 BSD 很久以前就引入了“可靠信号”（POSIX 之前）。

* * *

### ISO/IEC 9899:2011 §7.14.1.1`signal`功能

> ¶5 如果信号的出现不是调用`abort`or`raise`函数的结果，则如果信号处理程序引用具有静态或线程存储持续时间的任何对象，该对象不是无锁原子对象，则行为未定义，而不是通过赋值到声明为 的对象`volatile sig_atomic_t`，或者信号处理程序调用标准库中的任何函数，而不是`abort`函数、`_Exit`函数、 `quick_exit`函数或`signal`函数，其第一个参数等于与导致调用的信号对应的信号编号处理程序。此外，如果对`signal`函数的这种调用导致`SIG_ERR`返回，则 errno 的值是不确定的。^(252))
> 
> ^(252))如果任何信号由异步信号处理程序生成，则行为未定义。

引用`quick_exit()`是 C2011 中的新内容；它们在 C1999 中不存在。

### POSIX 2008

[Signal Concepts](http://pubs.opengroup.org/onlinepubs/9699919799/functions/V2_chap02.html#tag_15_04)部分非常详细地介绍了 POSIX 下的信号处理程序中允许和不允许的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T15:34:46.393

首先，您的信号处理程序并不完全是异步信号安全的。实际上，在您的情况下，这可能不是问题，因为我假设 main() 在等待信号时基本上什么都不做。但无论如何它肯定是不正确的。

至于程序退出的原因，由于无效使用 FILE* 函数（如 printf、sscanf 等）而不计算信号处理程序中的 segfault:s，当收到信号时，您正在执行的任何系统调用（或者，大多数）都会被打断`EAGAIN`。

如果您使用`sleep()`main 之类的东西来等待信号发生，它将被中断。您应该手动重新启动它。

为避免这种情况，您可能希望使用更便携`sigaction`的界面而不是`signal`. 如果没有别的，这允许您表明您希望重新启动系统调用。

信号处理程序中不允许`that FILE *`使用函数（以及大多数其他使用全局状态的函数，例如`malloc`和）的原因是，当信号到达时，您可能正处于同一状态的另一个操作的中间。`free`

这可能会导致段错误或其他未定义的操作。

实现这一点的正常“技巧”是拥有一个自管道：信号处理程序将向管道写入一个字节，您的主循环将看到这一点（通常通过等待`poll`或类似的东西）然后对其采取行动。

如果您绝对想在信号处理程序中进行用户交互，则必须使用`write()`and `read()`，而不是`FILE*`函数。

# c# - 遇到特定 Linq-To-Entity 表达式的问题

> ID：12874501
> 
> 赞同：1
> 
> 时间：2012-10-13T15:25:15.957
> 
> 标签：c#, entity-framework

我仍在学习 Entity 表达式的技巧，我有这个 SQL 查询，我想在 Entity 表达式中实现，查询是：

```
SELECT classname,abbreviation, cid
            FROM [db].[dbo].[classes] AS c
            WHERE c.cid IN (
                SELECT DISTINCT(CID)
                FROM [db].[dbo].[CDS]
                WHERE 
                        sid = '1'
                        AND
                        did = '24'
                    )
            ORDER BY abbreviation, classname 
```

我将如何将该查询实现到实体表达式中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:25:40.173

表达式将是：

```
context.Classes.Where(C => 
                (context.CDS.Where(CD => CD.sid == "1" && CD.did == "24")
                .Distinct(CD => CD.CID)).Contains(C.CID))
                .Select(C => new { 
                                    className = C.className, 
                                    abbreviation = C.abbreviation, 
                                    cid = C.cid 
                                 }); 
```

希望这会有所帮助！

# iphone - 将 html 转换为 iphone 4 notes 备份 sqlite 文件中的文本或格式化文本

> ID：12874504
> 
> 赞同：1
> 
> 时间：2012-10-13T15:25:20.730
> 
> 标签：iphone, html, webkit, restore

我想恢复一些丢失的笔记，这些笔记是通过使用 iTunes 备份（iphone 4）并打开 notes.sqlite 文件获得的。当我查询包含注释文本的表时：

```
select zcontent from znotebody 
```

我得到了 html 格式的文本。如何将这些条目转换为更具可读性的内容？它不必是完美的，只要能够阅读就够了。下面是一个注释示例：

```
 Meds fir odd<div>Trazadone</div><div>Effexor (&amp; Cd)</div><div>Buspirone</div><div>Clonodine</div><div>Nortriptyline</div><div>Risperdal</div><div>Straterra&nbsp;</div> 
```

这是上面的实际注释：

```
Meds fir odd
Trazadone
(Effexor & Cd)
Buspirone
Nortriptyline
Risperdal
Straterra<space here> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:49:37.407

如果您只想检索注释文本，我会试试这个

从 znotebody 中选择 "" + zcontent + ""

然后保存到文件并在浏览器中打开

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:35:34.287

您必须查看一些 NSString 类别，才能在文本中转义 html 标签。

关注此链接将有助于解决问题.. [Objective C HTML escape/unescape](https://stackoverflow.com/questions/659602/objective-c-html-escape-unescape)

# objective-c - 表格视图单元格中的动画

> ID：12874508
> 
> 赞同：0
> 
> 时间：2012-10-13T15:25:59.033
> 
> 标签：objective-c, ios5

我不确定是否可以实现，但我的客户希望当用户点击表格视图单元格时，提交 UIView 从左到右滑动的动画，使 UIView 下的内容可见。

我关心的是如何触发手势识别器添加到动画的上层 UIVIew 并且不输入与 didSelectRowatIndex: 表视图委托方法冲突。

有没有可能实现？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:34:00.100

在 CocoaControls.com 上搜索这种控件，已经有很多开源代码可以做到这一点。

在 www.cocoacontrols.com 上搜索“cell”后，我已经可以找到以下内容：

*   [JBSlidingTableviewCell](http://www.cocoacontrols.com/platforms/ios/controls/jbslidingtableviewcell)
*   [LRSlidingTableviewCell](http://www.cocoacontrols.com/platforms/ios/controls/lrslidingtableviewcell)
*   [ZKRevealingTablecellView](http://www.cocoacontrols.com/platforms/ios/controls/zkrevealingtablecellview)
*   [DMSlidingCell](http://www.cocoacontrols.com/platforms/ios/controls/dmslidingcell)
*   [TISwipeableTableview](http://www.cocoacontrols.com/platforms/ios/controls/tiswipeabletableview)

而且可能还有更多。

# android - 将数据写入文件的应用程序

> ID：12874511
> 
> 赞同：-1
> 
> 时间：2012-10-13T15:26:07.000
> 
> 标签：android, file

我正在编写一个将加速度计值写入文件的 android 应用程序，我正在将这些值显示在屏幕上，但我不知道它是否正在将它们写入文件，如果是我可以' t 找到文件。

我有这个方法，但我不确定它是否正确；

```
public void WriteToFile()
{
    try
    {
        final String accelValue = new String(accelXValue + "," + accelYValue + "," + accelZValue);
        FileOutputStream fOut = openFileOutput("accelValue.txt", MODE_WORLD_READABLE);
        OutputStreamWriter osw = new OutputStreamWriter(fOut); 
        // Write the string to the file
        osw.write(accelValue);

        osw.flush();
        osw.close();
    }
    finally
    {
        return;
    }
} 
```

这会将文件存储在手机上的什么位置？

我应该在我的代码中的某个地方调用它还是可以遵循加速度计方法？

谢谢。

此外，应用程序需要创建其写入的文件。

[https://stackoverflow.com/a/8738467/1383281](https://stackoverflow.com/a/8738467/1383281)

这个答案会有帮助吗？

这是新代码，但它似乎仍然没有做任何事情。

```
public void WriteToFile() 
{ 
    File AccelData = new File(Environment.getExternalStorageDirectory() + File.separator + "AccelData.txt");
    try
    {
        if (!(AccelData.exists()))
                {
                    AccelData.createNewFile();
                }

        final String accelValue = new String(accelXValue + "," + accelYValue + "," + accelZValue);
        FileOutputStream ADOut = openFileOutput("accelValue.txt", MODE_WORLD_READABLE);
        OutputStreamWriter AD = new OutputStreamWriter(ADOut);
        AD.write(accelValue);
    }
    finally
    {
        return;
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:41:40.467

```
public void WriteToFile()
{
    FileOutputStream fOut = openFileOutput("accelValue.txt", MODE_WORLD_READABLE);
    OutputStreamWriter osw = new OutputStreamWriter(fOut);

    try
    {
        final String accelValue = new String(accelXValue + "," + accelYValue + "," + accelZValue);
        // Write the string to the file
        osw.write(accelValue);
    }
    finally
    {
        osw.flush();
        osw.close();
        return;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:43:21.193

查看

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

用于写入文件的不同选项。你基本上可以写到

*   内部存储 - 将私人数据存储在设备内存中。
*   外部存储 - 将公共数据存储在共享的外部存储上。

并且必须注意许可等。

# delphi - 用于在源代码中粘贴文本常量的 Delphi 插件？

> ID：12874514
> 
> 赞同：8
> 
> 时间：2012-10-13T15:26:20.297
> 
> 标签：delphi, ide, editor

在 Delphi 代码编辑器中插入（从剪贴板粘贴）文本常量需要一些手动“后处理”...

*   将长文本分成多行（并插入字符串连接符号）
*   转义引号（用双引号代替单引号）
*   用引号将字符串括起来
*   保留原始空白（前导空白，换行）

是否有可用的 IDE 插件有助于减少这些手动步骤？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T16:31:33.790

试试[这个](http://roschinspb.narod.ru/develop.html#PasteSpecial)专家（对不起俄语，有一个 gif 显示它可以做什么）

# html - chrome vs firefox - id 名称更改表格的宽度。不涉及 CSS。可能的 AdBlock 问题

> ID：12874515
> 
> 赞同：2
> 
> 时间：2012-10-13T15:26:21.633
> 
> 标签：html, google-chrome

我有一张在 Chrome 中表现异常的表格。如果我更改 ID 的名称，它会将宽度更改为 0 或不更改。宽度为零，它不显示。

这是小提琴：http: [//jsfiddle.net/kdubs/W6GTE/](http://jsfiddle.net/kdubs/W6GTE/)

有问题的行是这样的：

```
 <table id="ad_table"> 
```

如果我将 ad_table 更改为其他任何内容，它可以在 Chrome 中使用。它一直在 Firefox 中运行。有什么想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T19:12:39.077

科克斯是对的。AdBlock 扩展程序看到了“ad_table”并阻止了它。关闭 AdBlock，一切都很好。现在我要告诉 AdBlock 的人...

# c++ - 比较向量的向量

> ID：12874517
> 
> 赞同：3
> 
> 时间：2012-10-13T15:26:38.930
> 
> 标签：c++, performance, vector, comparison

我有一个存储指针的向量向量。目前我遍历它们并比较每个指针，如果我找到不相等的指针，那么向量也不相等，但我想知道这是否是做这件事的正确方法。

升级版：`std::vector<std::vector<Combination*> > combinations;`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T15:44:38.723

如果您正在比较指针本身，那么您可以只[`operator==`](http://en.cppreference.com/w/cpp/container/vector/operator_cmp)在整个向量（向量）上使用。它首先检查两个向量的大小是否相等。如果是，它随后使用 比较每个元素`operator==`。所以如果你有一个向量的向量，或者一个向量的向量，这将递归地工作。尽管从技术上讲它不是递归，因为每个`operator==`实际上都是不同的函数。

如果您取消引用指针，那么您这样做的方式很好。但是对于这种情况，您可以考虑使用[`std::equal`](http://en.cppreference.com/w/cpp/algorithm/equal)适当的谓词。

# .net - MS Access TableAdapter 插入后获取身份

> ID：12874526
> 
> 赞同：0
> 
> 时间：2012-10-13T15:27:55.257
> 
> 标签：.net, database, vb.net, ms-access, identity

我是带有 MS Access 2010 数据库的 VB .net 2010。

该向导使用数据库中的所有表创建了一个 DataSet。所以，我可以使用

```
Me.CostumerAdapter.Insert("New Costumer") 
```

这完美无瑕。

但后来我有一些产品的网格（只是名称）

```
Product #1
Product #2
Product #3
... 
```

当我保存新客户时，我需要获取其 ID，以便插入产品列表。Product & Costumer 已经有一个外键关系。

如何获取客户插入的 ID？或者我怎样才能一起保存？

我发现的只是 SQL Server（@@IDENTITY，SCOPE_IDENTITY）。

我尝试在数据表（数据集）上添加一个新的 INSERT 语句：

```
INSERT INTO Costumer VALUES (?); 
SELECT @@IDENTITY; 
```

将查询设置为标量，这给了我一个错误。('查询后发现字符')

谢谢！抱歉有任何语法错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T16:44:49.650

必须使用 OleDB 命令：

[http://www.mikesdotnetting.com/Article/54/Getting-the-identity-of-the-most-recently-added-record](http://www.mikesdotnetting.com/Article/54/Getting-the-identity-of-the-most-recently-added-record)

# c# - 如何创建一个我可以使用的类的实例在 c# 中不止一个地方

> ID：12874531
> 
> 赞同：1
> 
> 时间：2012-10-13T15:28:23.297
> 
> 标签：c#, class, object

所以我一直在研究一门详细介绍大学学生的课程。我有一个按钮将详细信息设置为类的新实例，还有一个按钮通过我的类中的方法检查学生是否通过。问题是我在第一个按钮中创建了一个类的实例来添加用户输入的值，但是我不能使用第二个按钮来访问在第一个按钮中创建的类的实例。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T15:32:43.690

尝试在方法上创建一个属性，例如

```
private Student student1 {get;set;} 
```

然后您可以使用在此属性中设置的实例

```
student1 = new Student(); 
```

如果您希望能够从此类外部访问该属性，则可以将其设为公开，并且即使没有您实际使用的类的实例（大多数可能是一种形式）。

然后，您当然不应该在其他按钮中创建新学生。当您将属性设置为新学生时，您第一次设置的旧学生将消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:33:41.567

静态或单例类应该可以解决这个问题。 [http://msdn.microsoft.com/en-us/library/ff650316.aspx](http://msdn.microsoft.com/en-us/library/ff650316.aspx) -Singleton 实现

更简单的方法也是类属性。 [http://msdn.microsoft.com/en-us/library/w86s7x04.aspx](http://msdn.microsoft.com/en-us/library/w86s7x04.aspx) - 类属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:37:05.983

```
Student student1;  //**Simple Declare it here then**
private void button3_Click(object sender, EventArgs e)
    {

        student1 = new Student(); //**Create a new instance here**
        **//BUT You need to handle the exception that can come if the user clicks //button1   before button 3** possibly like this
         if(student1 == null)
                 return;
        label1.Text = student1.text();
        if (student1.hasPassed() == true)
        {
            passfailtextbox.Text = "Pass";
        }
        else
        {
            passfailtextbox.Text = "Fail";
        }
    }

private void button1_Click(object sender, EventArgs e)
    {
        Student student1 = new Student();
        student1.FirstName = firstnamebox.Text;
        student1.SecondName = secondnamebox.Text;
        student1.DateofBirth = DateTime.Parse(dobtextbox.Text).Date;
        student1.Course = coursetextbox.Text;
        student1.MatriculationNumber = int.Parse(matriculationtextbox.Text);
        student1.YearMark = double.Parse(yearmarktextbox.Text);

    } 
```

# clojure - 定义多个 var clojure 宏

> ID：12874532
> 
> 赞同：6
> 
> 时间：2012-10-13T15:28:30.380
> 
> 标签：clojure, macros, configuration-files

我有一个 clojure 应用程序，它需要一些配置变量，主要是字符串，还有要评估的东西。

我可以使用以下内容声明每个变量：

```
(def config-db "URI_DB"))
(def config-time (hours 1)) 
```

但我认为这**可能**是一个好主意（我不太确定）编写一个宏来做到这一点，它看起来像这样：

```
(make-config 
  config-db "URI_DB"
  config-time (hours 1)) 
```

（或者我可以将名称放在一个向量中，看起来更像是一个 let 语句）

但是当我放置不止一对时，我遇到了问题，我这样做了：

```
(defmacro define-config
  [name definition]
  `(def ~name ~definition)) 
```

但我真的不知道如何将其扩展为更有用的东西......

有什么建议或想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T22:16:43.427

我强烈建议单独做每一个`def`。这个宏是微不足道的，但不是很有用。当有人看到`def`时，他们确切地知道发生了什么。当他们看到您的自定义`make-config`调用时，他们必须查看实现`make-config`以了解发生了什么。您在大型示例中删除了一些字符并失去了可读性。

话虽如此，您可以制作一个宏来轻松执行此操作：

```
(defmacro make-config [& forms]
  `(do ~@(for [[name body] (partition 2 forms)]
           `(def ~name ~body)))) 
```

以及一个使用示例：

```
user=> (make-config foo "foo" bar (str "b" "a" "r"))
#'user/bar
user=> foo
"foo"
user=> bar
"bar" 
```

# python - 学习 Python，其他项目的脚本

> ID：12874534
> 
> 赞同：0
> 
> 时间：2012-10-13T15:28:44.797
> 
> 标签：python

**问：**我的旧脚本在 Python 3.x 上无法运行时遇到一些问题

无关; 在尝试访问二进制和文本文件以进行大规模重命名、重新编号时，Python 有多灵活？在碰撞和 IMG 档案中？

我不再对此有最好的理解，因为我已经使用 3dsmax 进行了关卡设计。

反正..

**错误：**

```
Traceback (most recent call last):
  File "C:\SOL_REM.py", line 26, in <module>
    process_ide(sys.argv[1], int(sys.argv[2]),
  File "C:\SOL_REM.py", line 18, in process_ide
    ide_line = reduce(lambda x,y: str(x)+","+st
NameError: global name 'reduce' is not defined 
```

**代码：**

```
import sys

if len(sys.argv) < 4:
    sys.exit('Usage: Source ide | ID number | Dest ide filename.' sys.argv[0])

def process_ide(ide_source, num, ide_destination):
    src = open(ide_source,'r')
    dst = open(ide_destination,'w')

    for line in src:
        ide_line = line

        if not (line == "" or line[0]=="#" or len(line.split(",")) < 2):
            ide_line = line.split(",")
            ide_line[-1] = ide_line[-1][:-2]
            ide_line[0] = num
            num+=1
            ide_line = reduce(lambda x,y: str(x)+","+str(y), ide_line)+"\n"

        dst.write(ide_line)

    src.close()
    dst.close()

process_ide(sys.argv[1], int(sys.argv[2]), sys.argv[3]) 
```

**开始很简单：**

我要做的是通过按枚举顺序更改数字来解析 ide 文本文件。

语法为 SOL_rem.py game.ide 1845 game2.ide

**示例文件：**

```
ID    Modelname     TexName       Rendering flags.

objs
1700, ap_booth2_03, ap_airstuff1, 1, 190, 0
1701, ap_seaplaland1, ap_seasplane, 1, 299, 0
1702, ap_seaplanehanger1, ap_seasplane, 1, 299, 0
1703, ap_termwindows1, ap_termwindows, 1, 299, 4
1704, ap_blastdef_01, ap_newprops1opac, 1, 299, 4
1705, ap_blastdef_03, ap_newprops1opac, 1, 299, 4
1706, air_brway_030, airgrndb, 1, 299, 0
end 
```

ID 将从 1845 开始按升序重新调整。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:35:24.803

`reduce`不再在 Python 3 的内置命名空间中。

而不是使用`reduce`，为什么不只使用 a `join`？

```
ide_line = ','.join(ide_line) + '\n' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:30:14.230

在 Python3 中，你可以做

```
from functools import reduce 
```

即使在 Python2.6+ 中，上述内容也应该没问题，但不是必需的。

是的。Python 对于你想做的任何事情都是完全灵活的。也喜欢覆盖内置函数。

# delphi - 如何选择 项目中的“值”属性 drop-down list? In my Delphi application I'm using a TWebBrowser control, where I have loaded an HTML document, containing a <select>element (drop down list) with a few <option>items (drop down list items). Let' ID：12874538 赞同：6 时间：2012-10-13T15:28:57.543 标签：delphi, dom, twebbrowser 回答 #1 赞同：10 时间：2012-10-13T18:32:35.927 例如，您可以使用IHTMLSelectElement接口及其selectedIndex属性。作为展示，我制作了以下功能。 SelectOptionByValue 函数 以下函数尝试在指定元素（下拉列表）中查找并选择（如果找到）<option>给定属性值的（下拉列表项）。如果没有找到，则清除当前下拉列表选择（未选择任何项目）。value<select><option> 参数： ADocument - 输入 HTML 文档的接口 AElementID -<select>元素的 ID（下拉列表的元素 ID） AOptionValue - 搜索<option>到的元素值（下拉列表项的值） 返回值： 如果成功找到（并选择）<option>带有给定value的选项，则返回值是指定下拉列表中该选项的索引，否则返回-1。 源代码： function SelectOptionByValue(const ADocument: IDispatch; const AElementID, AOptionValue: WideString): Integer; var HTMLDocument: IHTMLDocument3; HTMLElement: IHTMLSelectElement; function IndexOfValue(const AHTMLElement: IHTMLSelectElement; const AValue: WideString): Integer; var I: Integer; begin Result := -1; for I := 0 to AHTMLElement.length - 1 do if (AHTMLElement.item(I, I) as IHTMLOptionElement).value = AValue then begin Result := I; Break; end; end; begin Result := -1; if Supports(ADocument, IID_IHTMLDocument3, HTMLDocument) then begin if Supports(HTMLDocument.getElementById(AElementID), IID_IHTMLSelectElement, HTMLElement) then begin Result := IndexOfValue(HTMLElement, AOptionValue); HTMLElement.selectedIndex := Result; end; end; end; 示例用法： thirdvalue要从问题中的 HTML 文档的下拉列表中选择具有值的项目，可以使用此代码（假设在WebBrowser1此处的组件中加载了该文档）： procedure TForm1.Button1Click(Sender: TObject); var Index: Integer; begin Index := SelectOptionByValue(WebBrowser1.Document, 'ComboBox', 'thirdvalue'); if Index <> -1 then ShowMessage('Option was found and selected on index: ' + IntToStr(Index)) else ShowMessage('Option was not found or the function failed (probably due to ' + 'invalid input document)!'); end; 来自问题的示例 HTML 文档： <html> <body> <select id="ComboBox"> <option value="firstvalue">First Value</option> <option value="secondvalue">Second Value</option> <option value="thirdvalue">Third Value</option> </select> </body> </html></option></select>

# php - 查询时间戳间隔中的mysql错误

> ID：12874541
> 
> 赞同：0
> 
> 时间：2012-10-13T15:29:23.363
> 
> 标签：php, mysql

我有以下voting_IP 表：

```
+-----------+-------------+------+-----+---------+----------------+
| Field     | Type        | Null | Key | Default | Extra          |
+-----------+-------------+------+-----+---------+----------------+
| ip_id     | int(11)     | NO   | PRI | NULL    | auto_increment |
| mes_id_fk | int(11)     | YES  | MUL | NULL    |                |
| ip_add    | varchar(40) | YES  |     | NULL    |                |
| timestamp | datetime    | YES  |     | NULL    |                |
+-----------+-------------+------+-----+---------+----------------+ 
```

我想运行这个有错误但不知道如何纠正的查询？

```
$ip_sql=mysql_query("select ip_add from Voting_IP where mes_id_fk='$id' and ip_add='$ip' and timestamp > (DATE_ADD(now(), INTERVAL -1 HOUR);)"); 
```

我也试过这个：

```
$ip_sql=mysql_query("select ip_add from Voting_IP where (mes_id_fk='$id' and ip_add='$ip' and timestamp > (DATE_ADD(now(), INTERVAL -1 HOUR);))"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:32:50.810

```
INTERVAL -1 HOUR);))");
                 ^-----here is the error extra semicolon 
```

你可以看到错误`mysql_query("your query ") or die(mysql_error())`

替换为：

```
INTERVAL -1 HOUR))"); 
```

# oop - 理论上可能不一致的多个聚合是否可以接受？

> ID：12874552
> 
> 赞同：3
> 
> 时间：2012-10-13T15:31:00.310
> 
> 标签：oop, data-modeling

我有一个关于类建模和底层数据库设计的问题。

简单地说，情况如下：目前我们有**Positions**和**Accounts**对象和表格，它们之间的关系是一个 Position '有一个' Account（一个 Account 可以有多个 Positions）。这是一个简单的聚合，由持有账户 ID 作为外键的位置表在数据库中处理。

我们现在需要通过**Trades**和**Portfolios**将这种“向下”扩展。一个或多个交易构成一个头寸（但一个交易本身不是一个头寸）和一个或多个投资组合构成一个账户（但一个投资组合本身不是一个账户）。交易与投资组合相关联，就像头寸与账户相关联一样（“有一个”）。请注意，仍然可以有一个没有交易的头寸和一个没有投资组合的账户（即，不必将所有现有对象分解为子组件）。

我的第一个想法是简单地进行以下操作（前两个类已经存在）：

```
class Account;
class Position {
  Account account;
}
class Portfolio {
  Account account;
}
class Trade {
  Position position;
  Portfolio portfolio;
} 
```

我认为（潜在的）问题很明显：从交易开始，您可能最终会进入不同的账户，具体取决于您采用头寸路线还是投资组合路线。当然，这绝不应该发生，创建和存储对象的代码也不应该产生这种不一致。我想知道理论上可能存在不一致的数据库这一事实是否意味着设计有缺陷？

期待您的反馈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T23:38:59.037

*该设计没有缺陷，因为从A*类到*D*类有两种方法，一种是*B*类，另一种是*C*类。这样的“正方形”会经常出现在 OOP 类模型中，有时并不那么明显，尤其是当路径中有更多类时。但正如丹所提到的，业务语义总是决定这样的广场是否必须通勤（在数学意义上）。

我个人在 UML 图中的这样一个正方形内画了一个`=`标志，表示它必须通勤。我还注意到 UML 注释中的精确公式，在我的示例中它是

> `a`对于类的每个对象`A`：`a.B.D = a.C.D`

如果这样的谓词成立，那么您基本上有两种选择：

*   相信所有程序员都不会在任何代码中破坏规则，因为它有很好的文档记录
*   实现一些错误处理（如 Dan 和 algirdas 提到的），或者，如果您不想在模型中包含此类代码，请创建一个 Checker 控制器，该控制器检查给定模型实例中的所有条件。

# ruby-on-rails - Rails 3 - ActionMailer/Mail gem - “发件人”地址被覆盖

> ID：12874555
> 
> 赞同：0
> 
> 时间：2012-10-13T15:31:06.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmail, actionmailer, mail-gem

我在网站上有一个简单的联系表。

有一个电子邮件帐户仅用于处理通过联系表发送的邮件。这是“mycompany.noreply@gmail.com”

## 问题

当用户填写表单并发送时，会发送两封电子邮件。一封发给网站用户的确认电子邮件和实际填写的表格给公司。

公司希望这样，当他们收到用户的电子邮件时，他们会点击回复，并且用户的电子邮件地址会自动出现在“收件人”字段中。但是当他们现在这样做时，他们看到的是“发件人名称'mycompany.noreply@gmail.com'”而不是“发件人名称'sender_email_address'”。

## 编码

```
class Notifications < ActionMailer::Base

  def enquiry(user)
    @user = user
    mail(to: "employee@mycompany.com", subject: "website enquiry", from: "#{@user.name} <#{@user.email}>")
  end

  def no_reply(user)
    @user = user
    mail(to: @user.email, from: "My Company <mycompany.noreply@gmail.com>", subject: "Message received at mycompany.com")
  end
end 
```

## 测试

来自字段的测试通过。

```
require "spec_helper"

describe Notifications do

  let(:contact_form) { FactoryGirl.build(:contact_form) }

  context "enquiry" do

    let(:mail) { Notifications.enquiry(contact_form) }

    it "renders the headers" do
      mail.from.should eq([contact_form.email])
    end
  end
end 
```

另外，我正在使用mailcatcher。

Mailcatcher 还在`user.email`from 字段中显示正确。

似乎只有在收到*实际*电子邮件（使用 gmail）时才会出现错误的地址。

任何帮助表示赞赏。

## 编辑

默认邮件设置：

```
 # mail config settings
  config.action_mailer.delivery_method = :smtp
  config.action_mailer.smtp_settings = { 
    :address              => "smtp.gmail.com",
    :port                 => 587,
    :user_name            => 'mycompany.noreply@gmail.com',
    :password             => 'password',
    :authentication       => 'plain',
    :enable_starttls_auto => true  } 
```

来自 mailcatcher 的邮件标头

```
Date: Sat, 13 Oct 2012 21:08:02 +0100
From: Joe Bloggs <joebloggs@gmail.com>
To: mycomany.noreply@gamil.com
Message-ID: <5079ca229969b_67c23fc061434ed023056@Mark-Charless-iMac-2.local.mail>
Subject: website enquiry
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_5079ca226fb17_67c23fc061434ed02277b";
 charset=UTF-8
Content-Transfer-Encoding: 7bit

----==_mimepart_5079ca226fb17_67c23fc061434ed02277b
Date: Sat, 13 Oct 2012 21:08:02 +0100
Mime-Version: 1.0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit
Content-ID: <5079ca227ec80_67c23fc061434ed02288a@Mark-Charless-iMac-2.local.mail> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T20:31:50.823

问题是您使用的是 Gmail SMTP 服务器。

根据这个问题：[Rails and Gmail SMTP, how to use a custom from address](https://stackoverflow.com/questions/109520/rails-and-gmail-smtp-how-to-use-a-custom-from-address)，除非该帐户链接到您的 gmail 帐户，否则您无法设置自定义 From 地址。

备择方案：

1.  使用另一个允许您设置自己的发件人地址的 SMTP 服务器。
2.  创建一个漂亮的基于 HTML 的电子邮件，发送到 employee@mycompany.com 并带有一个大按钮，该按钮是`mailto`填写表格的用户的电子邮件地址的链接，并确保他们不回复自动电子邮件，但在电子邮件中使用此按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-23T16:01:34.070

Gmail 不允许名称欺骗。因为它不会使用默认的 from: 但它会使用 SMTP 用户名。

# c# - EF（代码优先）：我应该如何更改 1:1 关联的值？

> ID：12874556
> 
> 赞同：0
> 
> 时间：2012-10-13T15:31:17.650
> 
> 标签：c#, entity-framework, entity-framework-5

我有一个`File`实体和一个`User`实体。实体通过一个名为的属性与`File`实体具有 1:1 的关系（这记录了上次更改文件的用户）。在名为 的实体中还有一个字段，它是实际的 FK 关系。这种关系是单向的：实体没有返回实体的导航属性。`User``LastChangeUser``File``LastChangeUserId``User``File`

```
class File
{
    public int Id { get; set; }

    public int? LastChangeUserId { get; set; }
    public virtual User LastChangeUser { get; set; }
}

class User
{
    public int Id { get; set; }
} 
```

当 a`File`改变时，我需要`LastChangeUser`为`File`. 我只有用户的 ID，而不是完整的 User 对象。所以，我正在这样做：

```
file.LastChangeUser = null;
file.LastChangeUserId = userId; 
```

`File`当新创建对象（然后将其添加到实体集合中的 POCO）时，这似乎适用于创建文件。

`File`但是，当对象是从数据库中检索（作为代理）的现有对象时，更新文件时它不起作用。

在后一种情况下，我最终在数据库中为该`LastChangeUserId`字段设置了一个 NULL。（调用 SaveChanges 后，该对象`null`在`LastChangeUser`和`LastChangeUserId`字段中都有）。

也许我在这里做错了？什么是正确的方法？我真的需要去获取`User`对象才能设置`LastChangeUser`属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T02:43:03.513

@kevin_fitz 解决方案在这里工作的原因是由于 EF 工作中的变更跟踪和验证方式。EF 中更改跟踪的默认行为是一种称为快照跟踪的方法，该方法实质上是在每个实体首次加载时克隆其初始状态。当您在 EF 中保存更改时，会将每个实体的原始快照与当前状态对象（您正在修改的对象）进行比较，并将任何差异保存到数据库中。

除此之外，此 EF 还对实体执行提交前验证（仅供参考）。

在您的情况下，您对模型进行了两项更改，快照跟踪器将在保存时检测到这些更改（它们实际上是冲突的）。然而，跟踪器将尝试通过验证规则处理这两个，这将表明这是一个必需的关系并且不能设置为 null。这就是您看到此错误的原因以及为什么删除 null 更新可以解决您的问题。

在旁注中，您实际上只需要更新导航属性上的对象或键即可触发要更新的数据库关系。有关导航属性如何在 EF codefirst 中工作的更多详细信息，请查看我的文章：http: [//blog.staticvoid.co.nz/2012/07/entity-framework-navigation-property.html](http://blog.staticvoid.co.nz/2012/07/entity-framework-navigation-property.html)

# android - 在 android 中循环 Cursor1.moveToPosition()

> ID：12874562
> 
> 赞同：0
> 
> 时间：2012-10-13T15:32:51.083
> 
> 标签：android

我想从我的数据库中获取所有行的第一列中的数据并转换为 String[] ...

```
List<String> item1 = new ArrayList<String>();
// c is a cursor which pointed from a database
for(int i=0;i<=nombre_row;i++)
    {
        c.moveToPosition(i);
        item1.add(c.getString(0));
    }
String[] strarray = new String[item1.size()];
item1.toArray(strarray ); 
```

我试图一步一步地发表评论，发现问题出在循环中......请帮助......提前感谢所有回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:43:28.493

```
public String[] getData()
{
    Cursor cursor = this.db.query(/your query/);

    if(cursor.getCount() >0)
    {
        String[] str = new String[cursor.getCount()];
        int i = 0;

        while (cursor.moveToNext())
        {
             str[i] = cursor.getString(cursor.getColumnIndex(Columname));
             i++;
         }
        return str;
    }
    else
    {
        return new String[] {};
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-13T16:05:31.443

我得到了它的工作：

```
c.moveToFirst();
                do
                {
                    item1.add(c.getString(0).toString());
                    //i++;
                }while(c.moveToNext()); 
```

# algorithm - 速率近似的逻辑

> ID：12874566
> 
> 赞同：0
> 
> 时间：2012-10-13T15:33:29.380
> 
> 标签：algorithm, estimation, approximation

我正在寻找一些逻辑来解决以下问题。

有 n 个交易金额：T1,T2,T3.. Tn。

这些交易的佣金是使用下面提供的费率表计算的。

> 如果金额在 0 和 A1 之间 -> 率是 r1
> 
> 如果 A1 和 A2 之间的金额 -> 率是 r2
> 
> 如果 A2 和 A1 之间的金额 -> 费率为 r3
> 
> ...
> 
> ...
> 
> 如果金额大于 An -> rate 是 r4

因此，如果 T1 < A1，则速率表返回 r1，否则如果 r1 < T1 < r2；则返回 r2。

因此，可以说 T1、T2 和 T3 的速率表结果分别为 r1、r2 和 r3。

> 佣金 C = T1 * r1 + T2 * r2 + T3 * r3

例如; 如果定义了费率表（费率以 % 为单位）

> 0 - 2500 -> 1
> 
> 2501 - 5000 -> 2
> 
> 5001 - 10000 -> 4
> 
> 10000 或更多-> 6

如果 T1 = 6000，T2 = 3000，T3 = 2000，那么

> C= 6000 * 0.04 + 3000* 0.02 + 2000 * 0.01 = 320

现在我的问题是，如果我们提供的不是 T1、T2 和 T3 的单独值，我们是否可以估算佣金金额 T1+T2+T3 (T)

在上面的示例中，如果将 T (11000) 应用于费率表，我们将得到 6%，这将导致 600 的佣金。

有没有办法近似给定 T 的佣金值而不是 T1、T2、T3 的单个值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:51:35.140

想出属于每个括号的交易百分比的一些概率。

```
P(r1) = x  // The probability of a transaction falling into a rate 1 bracket
P(r2) = y  // The probability of a transaction falling into a rate 2 bracket
P(r3) = z  // The probability of a transaction falling into a rate 3 bracket 
```

因此，您可以估算属于每个括号的交易金额

预计佣金金额

```
rate 1: x * (T1 + T2 + T3) * r1
rate 2: y * (T1 + T2 + T3) * r2
rate 3: z * (T1 + T2 + T3) * r3 
```

您可以通过查看历史交易来获得 xy 和 z 的估计值。无论如何，您实际收取的交易金额可能低于支架的要求，但这并不重要。平均而言，交易将累积所有波段的平均佣金率。

虽然我不想声明，但这会给你一个估计，但对单个交易的估计的准确性取决于你的数据集的标准偏差，但平均而言，它会给你一个对大量交易的公平估计。您需要确定这在您的用例中是否合理。

# c# - 如何使用 NServiceBus 在 AWS 中实现消息队列和处理

> ID：12874567
> 
> 赞同：4
> 
> 时间：2012-10-13T15:33:30.467
> 
> 标签：c#, nservicebus, cqrs, amazon-sqs

我正在亚马逊 (AWS) 云中创建一个新的 ASP MVC 订单应用程序，并在我的本地数据中心使用持久层。我将使用 CQRS 模式。该项目的目标是使用 Queue(s) 来存储和转发可以在我的本地数据中心异步获取和处理的写入（命令/事件）的高可用性。然后，如果 WAN 或我的本地数据中心出现故障，我的云 MVC 应用程序仍然可以接受订单并将它们排队，直到处理可以恢复。

我的第一个想法是使用 AWS SQS 进行排队，并在我自己的 c# 应用程序中创建自己的队列使用者/调度程序/处理程序来处理传入的消息/事件。

MVC（@Amazon）--> 事件/POCO--> SQS--> QueueReader（@我的数据中心）--> DB

然后我找到了 NServiceBus。NSB 似乎很好地处理了很多细节：消息处理、重试、错误处理等。我讨厌重新发明轮子，而 NServiceBus 似乎是一个功能齐全且成熟的产品，非常适合我。

但是在进一步的研究中，看起来 NServiceBus 并不是真的要在物理上分离的环境（云到我的数据中心）中通过 WAN 使用。Google 和 SO 并没有像我需要的那样真正描绘出在 WAN 上使用 NServiceBus 的好图景。

我可以这样做吗？

MVC (@ Amazon) --> 事件/POCO --> NServiceBus over WAN --> NServiceBus Handler(s) --> DB

如何跨 WAN 使用 NServiceBus？或者是否有更好的解决方案来处理亚马逊和我的本地数据中心之间的排队和消息处理？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T18:05:35.167

使用 SQS 作为 NServiceBus 的传输是一种选择，但是您必须了解[此处](http://tech.groups.yahoo.com/group/nservicebus/message/2007)所述的权衡取舍。这已通过 Azure 队列存储完成，尽管我不知道有任何出色的 SQS 实现。

[另一种选择是在您的数据中心和AWS VPC](http://aws.amazon.com/vpc/)之间创建一个 VPN 。这将允许 AWS 服务器和您的数据中心之间的直接 MSMQ 通信，前提是您在相应的安全组中打开适当的端口。这种方法有一些注意事项。首先，是关于端点名称。NServiceBus 2.6 及以下版本使用 Environment.MachineName 作为端点的名称，您必须为其设置适当的 DNS。我相信以后的版本使用机器的IP地址。也许更重要的警告是 VPN 使您的系统更加耦合。

另一种方法是使用[网关](http://docs.particular.net/nservicebus/gateway/)的 NServiceBus 概念。然而，这应该是一个合乎逻辑的业务决策。网关与常规传输非常相似，但通常具有不同的业务上下文。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-16T14:22:32.213

NServiceBus 包括一个网关组件，用于处理桥接物理分离的数据中心。

[http://docs.particular.net/nservicebus/gateway/](http://docs.particular.net/nservicebus/gateway/)

它基本上将消息传递到 HTTP 通道，并处理 Web 服务通常会遇到的重试逻辑和重复数据删除问题。

如果您下载完整的 NServiceBus 包（不只是通过 NuGet 包含它），那么您将看到一个充满示例的文件夹，其中一个涵盖了网关的使用，这是一个很好的入门方式。

# ruby - Rails 3.2 CRUD：.where with 'or' 条件

> ID：12874577
> 
> 赞同：6
> 
> 时间：2012-10-13T15:34:12.183
> 
> 标签：ruby, ruby-on-rails-3

使用 ruby​​ on rails，我想做类似的事情：

```
 @tasks = Task.where(:def => true || :house_id => current_user.house_id) 
```

最有效/最干净的方法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T15:37:05.287

你可以这样做：

```
Task.where("def = ? or house_id = ?", true, current_user.house_id) 
```

一般情况是：

```
Model.where("column = ? or other_column = ?", value, other_value) 
```

您还可以利用 Arel：

```
t = Task.arel_table

@tasks = Task.where(
  t[:def].eq(true).
  or(t[:house_id].eq(current_user.house_id))
) 
```

# c# - c# 创建一个具有 GUID 的唯一名称

> ID：12874578
> 
> 赞同：0
> 
> 时间：2012-10-13T15:34:17.073
> 
> 标签：c#, guid, file-rename

我正在创建一个备份解决方案。我怀疑我想要实现的目标有什么新东西。

在复制文件之前，我想对目标文件进行备份，以防有任何损坏。这意味着重命名文件。

重命名时我必须小心，以防文件已经存在并且在末尾添加 01 是不安全的。

我的问题是，基于在其他地方找不到答案，将 GUID 添加到文件名工作。因此，如果我的文件名为 file01.txt，将文件重命名为 file01.txtGUID（其中 GUID 是生成的 GUID），然后我可以执行该文件的备份（在这种情况下有 2 个备份），然后，在确保文件已复制（通过将文件长度与源进行比较），删除名称中带有 GUID 的文件。

我知道 GUID 不能 100%[保证是唯一的](https://stackoverflow.com/questions/1705008/simple-proof-that-guid-is-not-unique)，但这是否足够？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T15:46:43.930

只需获取一个 GUID，然后询问目标操作系统是否存在名称+GUID。如果是，则选择一个新的 GUID 并重试。无论如何，您都将删除名称+GUID 文件，所以谁在乎您是否不能在第一次尝试时选择唯一的文件名。

考虑到风险和影响，我认为您可能专注于错误的问题。

如果您没有磁盘空间在目标系统上进行两次备份怎么办？

如果文件名 + 路径太长，目标操作系统无法处理怎么办？

在您获取名称和尝试对文件执行时间操作之间的时间段内，其他人修改了文件是什么？

编写防御性代码就是要考虑风险，但不要因为专注于不太可能或几乎不可能的场景而让自己发疯。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T17:18:30.950

为什么不直接使用 GetTempFileName()？这就是它的用途；

[http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx](http://msdn.microsoft.com/en-us/library/system.io.path.gettempfilename.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T15:39:46.290

是的，这就足够了。通过量子力学没有什么是不可能的，理论上在一百万年内你可能能够通过机会复制 GUID，但由于你还添加了文件的名称，所以它更不可能。您当然也可以添加以字节为单位的文件大小或文件的哈希值，但请记住，在 Windows 上，路径的长度不是无限的。

```
Guid.NewGuid() 
```

如果你的朋友。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-13T15:36:14.237

它是全球独一无二的，在宇宙中是独一无二的。你引用的帖子是个笑话。

# ruby-on-rails - Rails：设计是否容易受到会话劫持？

> ID：12874582
> 
> 赞同：6
> 
> 时间：2012-10-13T15:34:54.807
> 
> 标签：ruby-on-rails, devise

[设计](https://github.com/plataformatec/devise/wiki)是否容易通过正常的 http:// 连接受到会话劫持？我无法从文档中弄清楚。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T20:20:34.320

**是的。**Rails 管理会话的默认方式很容易被劫持。

这是因为它将客户端进一步需要在 HTTP cookie 中标识自己的所有信息传输给客户端。在大多数情况下，任何可以拦截 HTTP 连接的人都可以从 Rails 的角度假定客户端的身份。

最简单的对策是仅通过 HTTPS 为您的站点提供服务，并让 Rails 发出`secure`cookie，这会告诉浏览器仅通过 HTTPS 发送该 cookie。[安全指南](http://guides.rubyonrails.org/security.html#sessions)有更多有用的提示。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-13T20:07:39.967

正如[在 Devise 讨论组的这封电子邮件](https://groups.google.com/forum/?fromgroups=#!topic/plataformatec-devise/B7aN1AGnlco)中提到的，应用程序的安全设置位于主应用程序的域中（在本例中，我假设是 Rails）。

请查看[RailsCast 插曲 - 会话劫持](http://railscasts.com/episodes/356-dangers-of-session-hijacking)的危险，以处理 Rails 应用程序级别的会话劫持。

[Rails 安全指南的会话劫持部分](http://guides.rubyonrails.org/security.html#session-hijacking)是另一个必须阅读的资源。

通过在Rails 应用程序`:secure => true`的文件中设置，Devise 提供了强制仅使用 SSL 的 cookie 。`config/initializers/devise.rb`

# c++ - 在函数调用上创建的对象也可以通过引用传递吗？

> ID：12874591
> 
> 赞同：0
> 
> 时间：2012-10-13T15:35:35.973
> 
> 标签：c++, reference

人们倾向于说`pass by (const) reference if you want speed`，老实说，我很少在我创建的方法上使用 const 引用，只是因为速度，我只在需要时才进行引用，例如给变量赋值，就像这个 SSCE

```
void Do( int& iref )
{
    a = 2;
}

{
    int a = 0;
    Do( a );
} 
```

问题实际上是，如果对象是在函数调用上创建的，是否也将其作为引用传递，这是如何工作的？

```
void Add( CString& strPath )
{
    g_Path.push_back( strPath );
}

for( std::string line; getline( input, line ); )
{
    Add( CString( line.c_str() ) ); //object created on function call
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T15:36:54.413

这是如何运作的？它没有。该代码无法编译，因为临时对象无法绑定到非 const 左值引用。

（不过，临时对象*可以*绑定到 const 引用或右值引用。）

# javascript - 在不创建 Date 对象的情况下获取 Javascript 中的当前时间？

> ID：12874594
> 
> 赞同：4
> 
> 时间：2012-10-13T15:36:01.177
> 
> 标签：javascript, date, garbage-collection

我在我的 javascript 应用程序中实现了自定义双/三/其他点击，但我担心垃圾收集暂停。有没有办法在*不*创建 Date 对象的情况下以毫秒精度获得当前时间？将现有 Date 对象重置为当前时间的某种方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T15:48:03.573

尝试使用[Date.now()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/now)

> now() 方法以数字形式返回自 1970 年 1 月 1 日 00:00:00 UTC 到现在所经过的毫秒数。

您可以将其用作旧浏览器的后备方案

```
if (!Date.now) {
    Date.now = function now() {
    return +(new Date);
  };
} 
```

# emacs - 在 org 模式下反转笔记顺序

> ID：12874595
> 
> 赞同：8
> 
> 时间：2012-10-13T15:36:05.497
> 
> 标签：emacs, org-mode

我按以下顺序做笔记：

```
* FIRST
* SECOND
* THIRD
...
* LAST 
```

当我导出到 html 或 latex 时，我想要的是相反的顺序：

```
* LAST
...
* FIRST 
```

所以

1.  有什么方法或命令可以直接反转 org 文件中的顺序吗？
2.  当我将 org 文件导出到 html/latex 时，有什么办法可以颠倒顺序吗？

我认为两者都应该没问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T21:06:23.793

我不认为您正在寻找预定义的命令。你可以自己实现它。

如果这是一项一次性任务，我会使用 emacs 宏：

您只显示顶级标题。然后你转到第一个标题并开始宏`C-x (` 。您选择该行`C-SPACE C-n`并键入`C-u M-x prepend-to-register`。`C-u`也删除该行。你停止宏`C-x )` 。

现在您对所有顶级标题重复该宏`M-0 C-x e` 。

然后你插入寄存器`C-x r i`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-20T19:00:19.177

邪恶用户的替代方案：

*   折叠所有标题 ( `S-TAB`) 并转到最后一个 ( `G`)
*   `qq`录制要注册的宏`q`
*   `"Pddk`附加当前标题以注册`p`并排队
*   `q`保存宏
*   `@q`然后`*X*@@`X 是剩余标题的数量
*   `"pp`从寄存器粘贴`p`

# iphone - iPhone确实收到内存警告策略

> ID：12874596
> 
> 赞同：1
> 
> 时间：2012-10-13T15:36:06.410
> 
> 标签：iphone, ios

如果我有一组员工，例如在我的视图控制器中。然后我收到内存不足的通知，该应用程序也不是活动的。

此时我应该将员工列表保存在数据库中，对吗？这样当用户再次重新激活应用程序时，它将通过 viewDidLoad 并从这里我可以重新加载数据库中的数据？

这是一个好策略吗？

我对 iPhone 开发相当陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T17:49:42.673

一旦您的应用程序进入后台，您应该立即保存所有未保存的更改。您的应用程序可能会在后台的任何时候终止，而不会收到任何类型的通知。如果您的数据没有保存，当用户重新启动应用程序时，这些数据将会丢失。

关于内存警告，这些更可能发生在前台。一旦您的应用程序处于后台，它就会被暂停并且不会收到任何通知。如果您的应用在 iOS 5 或更早版本下运行，则内存警告可能会导致调用视图控制器的 viewWillUnload 方法。当需要再次显示该视图控制器时，将再次调用其 viewDidLoad。在 iOS 6 下，这种情况不再发生。viewWillUnload 已弃用。

# javascript-events - 如何获取 getElementById

> ID：12874598
> 
> 赞同：0
> 
> 时间：2012-10-13T15:36:22.727
> 
> 标签：javascript-events

下面是我用来getElementById的java脚本。但这是行不通的。

```
<script type="text/javascript">

   function invoke(but)
        {
            if(but==5)
            {
                alert(document.firstChild);

            }
            else if(but==6)
            {
                window.location.href="index1.jsp";
            }

        }
       function UnBloc1()
        {
            document.getElementById("temp2").style.display="block";
            document.getElementById("temp4").style.display="block";
        }
    </script> 
```

适用的jsp如下

```
<%
try{
int i=0;
int temp=0, temp1=0,temp2=0, temp3=0, temp4=0;
for(i=0;i<14;i++)

    {
       temp=temp+1;
       temp1=temp1+1;
       temp2=temp2+1;
       temp3=temp3+1;
       temp4=temp4+1;        
       i++;
       %>

                  <tr><form name="abc" method="post" action="">
                  <td><input type="text" value="<%=i%>" name="id1" id="id1"></td>
                  <td><center><input type="text" value="a" readonly="readonly" id="abc<%=i%>" name="abc<%=i%>" size="100"></center></td>
                  <td><input type="Submit" value="Resume" name="temp1<%=i%>" id="temp1<%=i%>" onClick="invoke(5)"></td>
                  <td><input type="button" value="Update Answer" onClick="UnBloc1()"></td>
                  <td><input type="text" name="temp3<%=i%>" id="temp3<%=i%>" style="border:hidden; display: none"/></td>           
                  <td><input type="Submit" value="Submit Answer" name="temp4<%=i%>" id="temp4<%=i%>" style="display: none" onClick="invoke(6)"/>

                  </td>
                  </form></tr>

    <% }

}
catch(Exception e)
           {

out.println(e);

}
%> 
```

生成的源代码如下。在这里，我想知道如何在 getElmentById 中为 javascript 中的 UnBloc() 方法的按钮获取动态按钮值。

```
<html>
<head><script type="text/javascript">

   function invoke(but)
        {
            if(but==5)
            {
                alert("hi");

            }
            else if(but==6)
            {
                window.location.href="index1.jsp";
            }

        }
       function UnBloc1()
        {
            document.getElementById("temp2").style.display="block";
            document.getElementById("temp4").style.display="block";
        }
    </script> </head> 
```

```
 <tr><form name="abc" method="post" action="">
                  <td><input type="text" value="1" name="id1" id="id1"></td>
                  <td><center><input type="text" value="a" readonly="readonly" id="abc1" name="abc1" size="100"></center></td>
                  <td><input type="Submit" value="Resume" name="temp11" id="temp11" onClick="invoke(5)"></td>
                  <td><input type="button" value="Update Answer" onClick="UnBloc1()"></td>
                  <td><input type="text" name="temp31" id="temp31" style="border:hidden; display: none"/></td>           
                  <td><input type="Submit" value="Submit Answer" name="temp41" id="temp41" style="display: none" onClick="invoke(6)"/>

                  </td>
                  </form></tr>

                  <tr><form name="abc" method="post" action="">
                  <td><input type="text" value="3" name="id1" id="id1"></td>
                  <td><center><input type="text" value="a" readonly="readonly" id="abc3" name="abc3" size="100"></center></td>
                  <td><input type="Submit" value="Resume" name="temp13" id="temp13" onClick="invoke(5)"></td>
                  <td><input type="button" value="Update Answer" onClick="UnBloc1()"></td>
                  <td><input type="text" name="temp33" id="temp33" style="border:hidden; display: none"/></td>           
                  <td><input type="Submit" value="Submit Answer" name="temp43" id="temp43" style="display: none" onClick="invoke(6)"/>

                  </td>
                  </form></tr>

                  <tr><form name="abc" method="post" action="">
                  <td><input type="text" value="5" name="id1" id="id1"></td>
                  <td><center><input type="text" value="a" readonly="readonly" id="abc5" name="abc5" size="100"></center></td>
                  <td><input type="Submit" value="Resume" name="temp15" id="temp15" onClick="invoke(5)"></td>
                  <td><input type="button" value="Update Answer" onClick="UnBloc1()"></td>
                  <td><input type="text" name="temp35" id="temp35" style="border:hidden; display: none"/></td>           
                  <td><input type="Submit" value="Submit Answer" name="temp45" id="temp45" style="display: none" onClick="invoke(6)"/>

                  </td>
                  </form></tr>

                  <tr><form name="abc" method="post" action="">
                  <td><input type="text" value="7" name="id1" id="id1"></td>
                  <td><center><input type="text" value="a" readonly="readonly" id="abc7" name="abc7" size="100"></center></td>
                  <td><input type="Submit" value="Resume" name="temp17" id="temp17" onClick="invoke(5)"></td>
                  <td><input type="button" value="Update Answer" onClick="UnBloc1()"></td>
                  <td><input type="text" name="temp37" id="temp37" style="border:hidden; display: none"/></td>           
                  <td><input type="Submit" value="Submit Answer" name="temp47" id="temp47" style="display: none" onClick="invoke(6)"/>

                  </td>
                  </form></tr>

                  <tr><form name="abc" method="post" action="">
                  <td><input type="text" value="9" name="id1" id="id1"></td>
                  <td><center><input type="text" value="a" readonly="readonly" id="abc9" name="abc9" size="100"></center></td>
                  <td><input type="Submit" value="Resume" name="temp19" id="temp19" onClick="invoke(5)"></td>
                  <td><input type="button" value="Update Answer" onClick="UnBloc1()"></td>
                  <td><input type="text" name="temp39" id="temp39" style="border:hidden; display: none"/></td>           
                  <td><input type="Submit" value="Submit Answer" name="temp49" id="temp49" style="display: none" onClick="invoke(6)"/>

                  </td>
                  </form></tr>

                  <tr><form name="abc" method="post" action="">
                  <td><input type="text" value="11" name="id1" id="id1"></td>
                  <td><center><input type="text" value="a" readonly="readonly" id="abc11" name="abc11" size="100"></center></td>
                  <td><input type="Submit" value="Resume" name="temp111" id="temp111" onClick="invoke(5)"></td>
                  <td><input type="button" value="Update Answer" onClick="UnBloc1()"></td>
                  <td><input type="text" name="temp311" id="temp311" style="border:hidden; display: none"/></td>           
                  <td><input type="Submit" value="Submit Answer" name="temp411" id="temp411" style="display: none" onClick="invoke(6)"/>

                  </td>
                  </form></tr>

                  <tr><form name="abc" method="post" action="">
                  <td><input type="text" value="13" name="id1" id="id1"></td>
                  <td><center><input type="text" value="a" readonly="readonly" id="abc13" name="abc13" size="100"></center></td>
                  <td><input type="Submit" value="Resume" name="temp113" id="temp113" onClick="invoke(5)"></td>
                  <td><input type="button" value="Update Answer" onClick="UnBloc1()"></td>
                  <td><input type="text" name="temp313" id="temp313" style="border:hidden; display: none"/></td>           
                  <td><input type="Submit" value="Submit Answer" name="temp413" id="temp413" style="display: none" onClick="invoke(6)"/>

                  </td>
                  </form></tr>

    </table></body></html> 
```

谢谢

# android - 这是什么用户界面设计或布局

> ID：12874599
> 
> 赞同：3
> 
> 时间：2012-10-13T15:36:31.467
> 
> 标签：android, android-layout, android-intent

我目前正在开发一个需要用户输入日期和时间的预订系统应用程序。所以这意味着我将在 mu 布局文件中有一个日期选择器和一个时间选择器。

这样做后，当用户单击按钮设置预订日期和时间时，应用程序将启动一个 Intent 并打开另一个活动，但据我所知，如果我这样做会看起来很糟糕，所以我想知道如何做这种UI，这样就不会像开始和活动那样麻烦。

![在此处输入图像描述](../Images/220e130e598dbcc6c397030b8a8679dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:08:04.573

您有多种选择来实现此行为。

1.  官方[日期选择器对话框](https://developer.android.com/reference/android/app/DatePickerDialog.html)和[时间选择器对话框](https://developer.android.com/reference/android/app/TimePickerDialog.html)。

2.  鉴于不鼓励使用对话框，如果可以，请尝试使用与[CalendarView](https://developer.android.com/reference/android/widget/CalendarView.html)和[DatePicker内联的小部件。](https://developer.android.com/reference/android/widget/DatePicker.html)

3.  [小部件CalendarView](https://github.com/SimonVT/android-calendarview)和[DatePicker](https://github.com/SimonVT/android-datepicker)的反向移植版本。

# c# - WPF、C#、Ink Canvas、Image - 如何将 inkcanvas 保存在现有图像上并将其另存为新图像？

> ID：12874601
> 
> 赞同：1
> 
> 时间：2012-10-13T15:36:40.247
> 
> 标签：c#, wpf, image, merge, inkcanvas

我正在尝试控制您可以在图像上绘制一些东西并使用新员工保存该图像。

目前我正在使用 Ink Canvas，因为它是非常有用的控件，但我找不到如何将它与背景图像合并。此外，我不希望 InkCanvas 被放置在图像中的任何位置，我希望它正好在它被绘制的那个地方。

问题：如何将 InkCanvas 与图像合并？

当前代码：

```
<Grid>
            <Image x:Name="Image_Container"/>
            <InkCanvas Background="Transparent" IsEnabled="False" Width="Auto" Name="inkCanvas" />
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T08:57:18.777

`<Canvas x:Name="editCanvas" Background="BlanchedAlmond" ClipToBounds="True"> <InkCanvas x:Name="inkCanvas"> <InkCanvas.Background> <ImageBrush Source="C:\Image.png"></ImageBrush> </InkCanvas.Background> </InkCanvas> </Canvas>`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-10-23T09:07:59.727

**XAML 代码**

```
<Grid>
     <InkCanvas Name="inkCanvas1" />
</Grid> 
```

**后面的 C# 代码**

```
string pathBackgroundimage = "D:/Workspace/Image1.png";
inkCanvas1.IsBackGroundMovable = false;
inkCanvas1.Background = new ImageBrush(new BitmapImage(new Uri(pathBackgroundimage))); 
```

# c - C 数组实例化 - 堆栈或堆分配？

> ID：12874604
> 
> 赞同：25
> 
> 时间：2012-10-13T15:36:46.370
> 
> 标签：c, memory-management, heap-memory, stack-memory

我保证以前有人问过这个问题，但我无法通过搜索找到它；提前对任何裁员感到抱歉。

我的（可能是错误的）理解是，只有在编译时知道对象的大小时才分配给堆栈。因此，在初始化数组的情况下，您可以执行以下操作之一（这应该在堆栈上）：

```
char charArray[50]; 
```

由于该数组的大小在编译时是已知的，因此应该没有问题。

另一方面，这（我相信）也是有效的代码：

```
char anotherCharArray[someVariable + 50]; 
```

这也会进入堆栈吗？如果你 free() this，我很确定代码会出现段错误，所以它让我认为它确实如此，但它对我来说真的没有意义。同样，当通过 malloc 分配数据时，您必须使用 free() 的 100% 唯一情况吗？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-13T15:43:33.480

如果`char charArray[50];`在文件范围（所有函数之外）或 is 定义`static`，它不会在堆栈上，它将是在程序的 start 变量处预分配的全局。如果不是`static`并且在函数范围内定义，它将在堆栈上。

`char anotherCharArray[someVariable + 50];`只能在函数范围内定义并且将在堆栈上。

以上所有内容都适用于 C 的典型实现。非典型实现可能使用堆而不是堆栈，而不是程序数据部分中的预分配空间。

您不使用,或`free()`未分配的内容。简单的。某些功能可能意味着使用上述之一，例如 POSIX 。`malloc()``calloc()``realloc()``strdup()`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-13T15:39:29.573

> 同样，当通过 malloc 分配数据时，您必须使用 free() 的 100% 唯一情况吗？

是的。（除了 calloc 和 realloc 之外，它们的返回值也是`free()`'d。类似地，有些函数使用 malloc() 并且记录了这一事实，例如`strdup()`- 这些函数的返回值也将使用 释放`free()`，显然.)

```
char anotherCharArray[someVariable + 50]; 
```

> 这也会进入堆栈吗？

是的，确实如此（在大多数实现中 - 当然，您假设的并不*总是正确的，但在大多数平台上，确实如此）。*是的，这是有效的代码，但它只是 C99 中的标准。

# javascript - 表格行内的 Nested_form

> ID：12874610
> 
> 赞同：0
> 
> 时间：2012-10-13T15:37:18.610
> 
> 标签：javascript, ruby-on-rails-3, nested-forms

我在我的 Rails 表单之一中使用了nested_form。我看到你可以使用这篇文章生成`tr`'s 而不是's [https://github.com/ryanb/nested_form/wiki/How-To:-Render-nested-fields-inside-a-table](https://github.com/ryanb/nested_form/wiki/How-To:-Render-nested-fields-inside-a-table)`div`

他们建议的 javascript 会去哪里？

```
window.nestedFormEvents.insertFields = function(content, assoc, link) {
  var $tr = $(link).closest('tr');
  return $(content).insertBefore($tr);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:51:54.657

首先，**它不像“*你可以生成`TR`'s 而不是`DIV`***”。该链接说您可以禁用插入`DIV`s。您可以明确添加`td`, 。`tr`就像他们添加的链接`td`和`tr`形式一样。

有时您通过 javascript 创建表单，默认情况下这些字段也用`DIV`. 但是您可以通过使用该 javascript 片段来更改行为。它将用这个新方法覆盖相应的方法。

让我知道我是否可以消除您的困惑。

# linux - 获取一组数据末尾的地址？

> ID：12874611
> 
> 赞同：6
> 
> 时间：2012-10-13T15:37:25.100
> 
> 标签：linux, assembly, gnu-assembler

我一直在阅读“从头开始编程”这本书来学习 Linux 中的汇编编程。我在解决第 3 章末尾的一个练习时遇到了麻烦。练习说修改以下程序以使用数据集末尾的地址来终止循环。这只是一个在一组数据中查找最大数的简单程序，它目前只是使用数字零来标记数据的结尾。

```
#PURPOSE:       This program finds the maximum number of a
#               set of data items.
#

#VARIABLES:     The registers have the following uses:
#
#       %edi    --    Holds the index of the data item being examined
#       %ebx    --    Largest data item found
#       %eax    --    Current data item
#
#       The following memory locations are used:
#
#       data_items    --    Contains the item data. A 0 is used
#                           to terminate the data.
#

.section    .data

data_items:
    .long 3, 67, 34, 14, 45, 75, 54, 187, 44, 87, 22, 11, 66, 0

.section    .text

.globl    _start
_start:

movl    $0, %edi                         # Move 0 into the index register
movl    data_items (, %edi, 4), %eax    # Load the first byte of data
movl    %eax, %ebx                      # The biggest

start_loop:

cmpl    $0, %eax                         # Check to see if we've hit the end
je      loop_exit
incl    %edi                            # Load next value
movl    data_items (, %edi, 4), %eax
cmpl    %ebx, %eax                      # Compare values
jle     start_loop                      # Jump to the beginning if new value
                                        # Isn't larger
movl    %eax, %ebx                      # Move the value as the largest
jmp     start_loop                      # Jump to the beginning of loop

loop_exit:

# %ebx is the status code for the exit system call
# and it contains the maximum number
movl    $1, %eax                         # 1 is the exit() system call
int     $0x80 
```

我知道我可以硬编码数据列表的长度，或者我可以将它存储在数据的第一个字节中，但练习要求使用最后一个元素的地址来终止循环。书中提到使用符号来标记结束。我认为我的问题是我只是不明白如何获取地址。如果我知道如何获得它，我可以将它存储在寄存器中。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T18:16:55.923

带有一些适用于 Mac OSX 的小模组...

```
.data

data_items:
    .long 3, 67, 34, 14, 45, 75, 54, 187, 44, 87, 22, 11, 66, 0
data_end:

.text

.globl    start
start:
        movl    $0, %edi                       # Move 0 into the index register
        movl    data_items (, %edi, 4), %eax   # Load the first data value
        movl    %eax, %ebx                     # The biggest
        leal    data_end, %ecx                 # Load and save ending address

start_loop:
        leal    data_items(, %edi, 4), %eax    # Get address of next value
        cmpl    %eax, %ecx                     # Check to see if we've hit the end
        je      loop_exit
        incl    %edi                           # Increment index
        movl    (%eax), %eax                   # Load value
        cmpl    %ebx, %eax                     # Compare values
        jle     start_loop                     # Jump to the beginning if new value
                                               # Isn't larger
        movl    %eax, %ebx                     # Move the value as the largest
        jmp     start_loop                     # Jump to the beginning of loop

loop_exit:
        movl    $1, %eax                       # 1 is the exit() system call
        pushl   %ebx
        pushl   $0

        int     $0x80 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T15:56:20.417

问问自己：我知道数据的起始地址吗？我怎么知道？我知道数据的大小吗？我怎么知道这个？我可以从这些信息中得知结束地址吗？

# ruby - 使用多语言文档从 Excel 解析 Ruby CSV

> ID：12874612
> 
> 赞同：0
> 
> 时间：2012-10-13T15:37:26.357
> 
> 标签：ruby, csv, character-encoding, multilingual

我有一个从 Excel 导出的 csv 文档，其中包含英文和非英文（俄文）字母。

我已经设法打开它

```
CSV.open @tmp, "rb:ISO-8859-1", {col_sep: ";"} 
```

但它读取俄罗斯符号`\xCE\xF1\xF2\xE0\xEB\xFC\xED\xFB\xE5 \xE7\xE0\xEF\xF7`等。我尝试了“rb:ISO-8859-1:UTF-8”但得到“ArgumentError：UTF-8 中的无效字节序列”，与 csv.open 无模式运行相同。

这怎么可能解决？此外，我如何找到“模式”参数选项 - 我无法从描述它的文档中理解。

主要环境是 Ubuntu 服务器，如果重要的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T10:33:12.460

尝试使用这种格式

```
r:ISO-8859-15:UTF-8 
```

# ajax - 如何从coldfusion.ajax.submitform 访问返回值？

> ID：12874613
> 
> 赞同：3
> 
> 时间：2012-10-13T15:37:27.093
> 
> 标签：ajax, coldfusion

在coldfusion.ajax.submitform 周围遇到了真正的麻烦。我调用了我的 cfc 工作，数据被保存到我的数据库中，但是我没有收到（或没有正确设置）一种方法来接收方法调用成功的消息。这是我的代码：

```
<cfcomponent>
<cffunction name="postFeedback" access="remote" returntype="boolean">
  <cfargument name="name" type = "string" required="yes">
      <cfargument name="email" type = "string" required="yes">
      <cfargument name="post" type = "string" required="yes">
      <cfquery name="postFeedback" datasource="myDB">
    Insert into feedback (name, email, post, date)
    Values('#ARGUMENTS.name#','#ARGUMENTS.email#','#ARGUMENTS.post#', #Now()#);
    </cfquery>
    <cfreturn true>
</cffunction>
</cfcomponent> 
```

这是我的ajax调用：

```
function submitForm() {
   ColdFusion.Ajax.submitForm('myForm1', 'Feedback.cfc?method=postFeedback', callback, errorHandler);

}

function callback(text)
{
    alert("Callback: " + code + ": " + msg);
}

function errorHandler(code, msg)
{
    alert("Error!!! " + code + ": " + msg);
} 
```

我最终想了解如何访问返回的值，以便我可以使用“getFeedback”之类的方法并填充字段。我已经可以使用 cfinvoke 执行此操作，但我希望通过单击按钮来执行此操作。我需要爬行才能走路。;)

任何指导将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T18:32:43.047

请参阅[ColdFusion.Ajax.submitForm](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=JavaScriptFcns_03.html)

> > **回调处理程序**
> > 
> > 处理正常响应的 JavaScript 函数。**该函数必须接受一个包含响应正文的参数。**仅当表单提交是异步的时才使用此方法。

将其与以下内容进行比较：

> > **错误处理程序**
> > 
> > 用于处理 HTTP 错误响应的 JavaScript 函数。**该函数必须接受两个参数：HTTP 状态代码和错误消息。**仅当表单提交是异步的时才使用此方法。

您似乎正在尝试使用回调处理程序访问错误处理程序参数。

```
function callback(text)
    {
        alert("Callback: " + code + ": " + msg);
    } 
```

您可能想尝试：

```
function callback(text)
    {
        alert("Callback: " + text);
    } 
```

# python - Python JSON-RPC_2.0 TCP Server Client Explained

> ID：12874618
> 
> 赞同：0
> 
> 时间：2012-10-13T15:38:22.923
> 
> 标签：python, json, client, tcpserver

I'm having a difficult time fully understanding the nature of a TCP server/client relationship when a JSON string is sent to the server. The information I need may be out there, but I'm perhpas not using the correct search paramaters as I'm looking.

I've built a Python TCP, JSON-RPC Server from the following examples:

*   [https://github.com/joshmarshall/jsonrpclib](https://github.com/joshmarshall/jsonrpclib)
*   [http://code.activestate.com/recipes/552751-json-rpc-server-and-client/](http://code.activestate.com/recipes/552751-json-rpc-server-and-client/)

In both cases, I can communicate with the Python server from a Python console on a different computer, sending commands from one (the client) to the other (server). In all of the examples, I've had to install the libraries mentioned above on both the client and the server machines in order to facilitate the TCP communication.

So the background to my situation and question is, when does JSON enter the mix? This is what I want to do:

Setup a Python TCP server that accepts a JSON string from a remote client inside (or outside) the network. The server parses the JSON string, fetches the method and parameters from the objectified string, and executes the method. The server then sends a JSON string result to the calling client. In this case, the client is a mobile application (iPad, Android, etc) with a JavaScript library that I'll use to send the requests to the server.

Why would I need a Python client? From what I can gather, the client just needs to open a connection to the server and then send the JSON string, right? Why do all the code samples include Python client examples? Are they assuming a server machine is going to talk to a server machine, so they have included client code to help generate the JSON string that will be sent to the server?

If I assume that a Python client isn't really needed for anything, I've been sending JSON strings to the Python server from the iPad, but in each case the server is reporting a "Bad request syntax" error. I'll pen a new question on that issue if I'm understanding the current question correctly.

Insight is appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T16:05:37.000

The JSON encoding is the lingua franca of your RPC protocol, so you can indeed use any client you like. The implementations you found for JSON-RPC use the HTTP protocol, a very specific communication protocol built on top of TCP/IP, but you can implement the same protocol over raw TCP-IP sockets if so required.

The examples include both the Python client *and* the server because they illustrate how to implement the JSON-RPC standard in Python, not in JavaScript or C or Lisp. They focus on the implementation in one language. The JSON-RPC standard however, is language agnostic. It doesn't matter what language you write either the server or the client in, as long as they use the same standard.

# java - 当用户按下后退按钮时删除 ProgressDialog

> ID：12874620
> 
> 赞同：0
> 
> 时间：2012-10-13T15:38:33.987
> 
> 标签：java, android

我有一个查询服务器数据库并返回结果列表的活动...查询应用程序时会在 onCreate 方法上显示一个简单的 progressDialog，如下所示：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

//display progress dialog while querying server for values
        final ProgressDialog dialog = ProgressDialog.show(this,"","Retrieving listings please wait...");
        dialog.setCancelable(true);
        dialog.show(); 
```

如果用户单击列表中的一个项目，则会打开另一个活动 placeDetails。完成后，用户可以按后退按钮返回到显示列表的上一个活动。

当我自然地测试它时，它会显示上述对话框并将查询发送回服务器，即使可以在 progressDialog 的背景中看到列表。

我想知道的是如何防止再次查询数据库以及当用户按下后退按钮时显示上述progressDialog。

我必须走缓存路线吗？还是有其他方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:54:19.717

1.）为了防止再次查询数据库，您可以简单地将这些数据缓存在本地 SQLite 数据库中，正如 Tom Dignan 所提到的。

2.) 为了防止在用户按下后退按钮时显示progressDialog，只需覆盖当前活动的onBackPressed() 方法（按下后退时）并将Intent 设置为progresDialog 之前的活动。我相信甚至有一种方法可以做到这一点，这样您就不会启动该活动的新实例，而只是访问缓存的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T23:29:35.427

我设法解决了这个问题，缺少的链接是我不知道如何检查对话框窗口，以下代码有帮助：

```
//first declare the dialog so its accessible globally through out the class
public class ListPlaces extends ListActivity {
 ProgressDialog dialog; 
```

然后在 onCreate 首先检查对话框是否存在

```
if(dialog == null){
            dialog = ProgressDialog.show(this,"","Retrieving listings please wait...");
            //display progress dialog while querying server for values
            dialog.setCancelable(true);
            dialog.show();
        } 
```

错误是我正在使用

```
dialog.hide(); 
```

而不是 dialog.dismiss();

感谢您的贡献

# ios - iOS UIActionSheet 作为插件

> ID：12874622
> 
> 赞同：0
> 
> 时间：2012-10-13T15:39:05.313
> 
> 标签：ios, uialertview, uiactionsheet, appirater

我有一个关于 UIActionSheet 的问题。我想创建一个小的 iOS 插件。除了显示 UIAlertView 之外，像 Appirater 这样的东西我想显示 UIActionSheet 和一些自定义选项。

不过我不知道该插件将附加到哪种应用程序？所以基本上在我的 ActionSheet 下可以是任何东西。在 UIAlertView 你只需调用`[myAlert show]`它就可以了。在这里你必须打电话`[myActionSheet showInView:myView]`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:24:28.850

插件不是正确的术语。您的意思是库或可能的框架。无论如何，假设您正在询问您将在库的主类中提供的 API，您有几个选择。您可以提供一组方法，这些方法基本上反映了 UIActionSheet 的各种“显示”方法，并让您的库的客户端调用适当的方法。或者你可以让它更简单，让客户端提供一个视图控制器。然后，您的库可以查看视图控制器并适当地显示操作表。如果视图控制器位于选项卡式视图中，则以这种方式显示操作表。如果视图控制器有工具栏，则显示工具栏的操作表。如果所有其他方法都失败了，则从视图控制器的视图中显示操作表。

但无论哪种方式，您的 API 至少需要从客户端获取一些信息，以便正确显示操作表。

# java - 从另一个对象访问按钮

> ID：12874623
> 
> 赞同：1
> 
> 时间：2012-10-13T15:39:14.970
> 
> 标签：java, swing, events, netbeans, event-handling

我正忙着做一个学校项目，希望那里有一些很棒的人可以帮助我。我目前有一个 Main、一个登录 GUI 和一个搜索框架（使用 Netbeans Gui dev 设计）。

我有一个`actionPerformed(ActionEvent e)`方法，我正在努力访问我的登录 GUI 上的登录按钮。目前我正在这样做。

在我的构造函数中：声明框架。`LogInFrame x = new LogInFrame();`

在

```
public actionPerformed(ActionEvent eve)
{
    if(eve.getSource()==x.LogInBtn())
    {
        x.setVisible(false);
    }
} 
```

目前按钮没有响应，所以我想知道我是否做错了什么。

当前的框架只是一个标准框架。真的很简单

```
public static void main (String[] args)
{
     JFrame LogInFrame = new JFrame ("Log in");
     LogInFrame.setSize (300, 300);
     JButton close = new JButton ("Hid frame");
     LogInFrame.getContentPane ().add (close);
   }
} 
```

这就是所有需要的东西。问题不在于 GUI 本身，因为我可以在 netbeans 中很好地运行 GUI。我可以通过双击按钮使用自动生成的 actionPerformed 方法。但我希望能够在我的 main 中访问我的 GUI 组件。（告诉按钮从我的 main 中做什么）。我已确保该按钮是公开的并且可以访问。我没有收到任何物理“编码”错误，代码似乎不起作用（如果我从我的主添加事件，按钮没有响应）

# php - jQuery AJAX 未将完整数组发布到服务器

> ID：12874625
> 
> 赞同：1
> 
> 时间：2012-10-13T15:39:26.150
> 
> 标签：php, jquery, ajax, post, multidimensional-array

我有一个非常大的多维 Javascript 数组，我使用 AJAX POST 将其传递给我的 PHP 文件：

```
$.ajax({
    type: "POST",
    dataType: 'json',
    url: "forms/scripts/testArray.php",
    data: {
        header: header,
        gridData: gridData
    }
}); 
```

`gridData`是我的多维数组，它有 1000 个元素，每个子数组包含 3 个元素。当我调试并查看我的 PHP 文件中的数据时，数组中只有大约 350 个元素来自`POST`.

使用 Firebug，我得到了有关发送的文件大小和接收的文件大小的信息：

![发布问题](../Images/cee610f27baedd3252a5f954ddb4c40a.png)

如您所见，这个小弹出窗口告诉我 AJAX 调用发送了 462.8 KB，但实际上只收到了 4.9 KB。这是真的？这就是为什么我只得到我试图发布的数组的一部分吗？

此外，这是通过 AJAX POST 将多维数组从 Javascript 移动到 PHP 的最佳方式吗？

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:57:00.797

可能，工具链中的某些东西限制了可以发送/接收的最大数量。这可以通过您的网络服务器（可能是 Apache）或（更可能）在您的 PHP 设置中进行。PHP 有一些设置，如 post_max_size、max_input_time、max_input_nesting_level、max_input_vars 等。您应该检查这些设置！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:13:32.290

数据中可能有一个奇怪的字符在“接收”的最后一个元素上或之后抛出 json 编码/解码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-27T08:08:38.023

删除文件`;`中的（分号）`php.ini`，设置增加`max_input_vars`然后它工作：

`max_input_vars = 10000`

# mysql - 无法从第三个表中看到 mySQL COUNT

> ID：12874647
> 
> 赞同：1
> 
> 时间：2012-10-13T15:41:57.757
> 
> 标签：mysql, select, count

我已经发布了另一条这样的消息。但没有一个帮助。所以我做了更多的阅读，我有这段代码可以工作：

**编辑新版本和新问题**

```
SELECT i.*, o.organ_name, o.organ_logo, vtable.*
FROM heroku_056eb661631f253.op_ideas i
JOIN
(SELECT
    COUNT(v.agree) as agree,
    COUNT(v.disagree = 1 or null) as disagree,
    COUNT(v.obstain = 1 or null) as abstain
FROM op_idea_vote v
) AS vtable
LEFT JOIN op_organs o ON i.post_type = o.organs_id 
```

op_idea_vote 表中只有 1 行，op_ideas 表中只有 3 行。但它给每一行每个 op_ideas 行的总数

**编辑工作解决方案**

感谢 WayneC，这是工作代码：

```
SELECT i.*, o.organ_name, o.organ_logo, vtable.*
FROM heroku_056eb661631f253.op_ideas i
JOIN
   (SELECT v.idea_Id,
    COUNT(v.agree = 1 or null) as agree,
    COUNT(v.disagree = 1 or null) as disagree,
    COUNT(v.obstain = 1 or null) as abstain
   FROM op_idea_vote v
   GROUP BY v.idea_id
   ) AS vtable ON vtable.idea_id = i.idea_id
LEFT JOIN op_organs o ON i.post_type = o.organs_id
WHERE idea_geo = 'International'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T11:14:12.613

试试这个

```
SELECT i.*, o.organ_name, o.organ_logo, vtable.*
FROM heroku_056eb661631f253.op_ideas i
JOIN
    (SELECT
        COUNT(v.agree) as agree,
        COUNT(v.disagree = 1 or null) as disagree,
        COUNT(v.obstain = 1 or null) as abstain
    FROM op_idea_vote v
    GROUP BY v.idea_id
    ) AS vtable ON vtable.idea_id = i.idea_id
LEFT JOIN op_organs o ON i.post_type = o.organs_id 
```

下面的答案缺少分组依据和 vtable 的加入条件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T16:03:56.390

这是您的原始查询

```
SELECT i.*, o.organ_name, o.organ_logo
FROM heroku_056eb661631f253.op_ideas i
JOIN
    (SELECT
        COUNT(v.agree) as agree,
        COUNT(v.disagree = 1 or null) as disagree,
        COUNT(v.obstain = 1 or null) as abstain
    FROM op_idea_vote v, op_ideas i
    WHERE v.idea_id = i.idea_id
    ) AS vtable
  LEFT JOIN op_organs o ON i.post_type = o.organs_id 
```

`vtable`是一个伪装成您要加入的表的子查询 - 就获取要与查询结果一起返回的字段而言，它与加入普通表没有什么不同。您必须在主查询中选择要返回的字段，否则它们将不会被返回。

```
SELECT i.*, o.organ_name, o.organ_logo, vtable.*
FROM heroku_056eb661631f253.op_ideas i
JOIN
    (SELECT
        COUNT(v.agree) as agree,
        COUNT(v.disagree = 1 or null) as disagree,
        COUNT(v.obstain = 1 or null) as abstain
    FROM op_idea_vote v, op_ideas i
    WHERE v.idea_id = i.idea_id
    ) AS vtable
  LEFT JOIN op_organs o ON i.post_type = o.organs_id 
```

# java - 如何在队列基本循环中打印字符串

> ID：12874648
> 
> 赞同：0
> 
> 时间：2012-10-13T15:41:59.840
> 
> 标签：java

我想创建一个运行队列中所有作业的方法（作业列表）。我创建了一个方法来运行一个作业（`runAJob`），下面的方法是运行队列列表中的所有作业，直到时间（myTimeLeft）用完。现在，当我运行方法
时，这段代码总是留下 1 个 ArraLyist 。`runAll`有人能告诉我为什么错了吗？

```
 /**
  * Run the first job on the queue if there is enough time on the clock and the job queue list is not empty.
  * And move the job to the finished jobs list.
  */
public void runAJob(){
   myJobDuration = myJobInQueue.get(0).getDuration();
   if(!myJobInQueue.isEmpty())
   {
        if (myJobDuration < myTimeLeft)
        {
            myTimeLeft = myTimeLeft - myJobDuration;
            myFinishedJobs.add(myJobInQueue.get(0));
            System.out.println("A job is running: " + myJobInQueue.get(0).getName());
            myJobInQueue.remove(0);
        }
        else 
        {
            System.out.println("Not enogth running time left, please add time on the clock.");             
        }
   }
   else 
   {
     System.out.println("No pending job on the list.");
   }
}

/**
  * Run all the jobs on the queue in order until it runs out of time.
  */  
public void runAll()
{
  int counAJob =0; 
  while (myJobDuration < myTimeLeft && !myJobInQueue.isEmpty()) {
   // get next item from queue
     runAJob();
     System.out.println("A job is running: ");
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:48:09.593

当你（大概）使用队列时，为什么会有一个 for 循环？您不会根据队列 ( `i`) 的大小做出任何决定。我会坚持让队列自己处理：

```
// declarations and definitions

while (myJobDuration < myTimeLeft && !myJobInQueue.isEmpty()) {
    // get next item from queue
    runAJob();
} 
```

# android - android translateAnimation setDuration() 不起作用

> ID：12874649
> 
> 赞同：2
> 
> 时间：2012-10-13T15:42:02.807
> 
> 标签：android, animation, translate-animation

我正在尝试将动画转换为 imageView。动画有效，但不是根据我在 setDuration() 中输入的值

这是代码

```
/* flipping the images out of the screen */

float outOfScreenX = currentImageLocationX * DRAG_ACTION_SCREEN_BOUNDS_THREASHOLD;

float outOfScreenY = currentImageLocationY * DRAG_ACTION_SCREEN_BOUNDS_THREASHOLD;

            translate = new TranslateAnimation(0, outOfScreenX, 0, outOfScreenY);

            long velocity = Math.max(Math.abs((int) vTracker.getXVelocity()), Math.abs((int) vTracker.getYVelocity())) / 10;

            velocity = (long) Math.min(velocity, 200);

            translate.setDuration(velocity);
            translate.setFillAfter(true);
            mDragView.clearAnimation();
            mDragView.startAnimation(translate);

            imageStack.removeView(mOriginator); 
```

“velocity”的值来源于vTracker，用户触摸视图的速度。它总是大约在 200-600 之间，但视图的移动速度比这快得多（而且有点闪烁，但这是另一个话题）。

# ruby-on-rails - 用于从邮政编码填充用户地址位置的 Ruby Gem

> ID：12874651
> 
> 赞同：1
> 
> 时间：2012-10-13T15:42:29.920
> 
> 标签：ruby-on-rails, gem

如今，家庭地址的站点输入表单向用户询问邮政编码，然后在从邮政编码进行查找后向用户提供下拉选项以选择整个地址，这很常见。

是否有 ruby​​ gem 或好的 API 可以将此功能集成到 RoR 应用程序中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T16:54:41.023

我在[Area](http://rubygems.org/gems/area)有过很好的经历......

```
zip = 35205
city, state = zip.to_region(city: true), zip.to_region(state: true) 
```

我不知道任何带有视图助手的库来生成这样的表单，据我所知，你必须自己构建它。应该不会太麻烦。

# drupal-7 - 标题节点drupal 7之前的显示字段

> ID：12874653
> 
> 赞同：3
> 
> 时间：2012-10-13T15:42:34.850
> 
> 标签：drupal-7, field

我想在标题之前显示节点的标签类别，界面中标题字段不可用，有没有办法在node.tpl.php或page.tpl.php中做到这一点（我不会安装像ds这样的另一个模块套件仅用于此目的）。PS：我想在显示节点的任何地方都这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:25:16.950

你可以：

1.  在您的 page.tpl.php 中，您的标题被回显，将标题包装在 if 语句中，如果您在节点页面中，则不显示 $title，例如

```
    如果（arg（0）！='节点'）：
      如果（$标题）：
        打印$标题；
      万一;
    万一;
//仅当我不在节点页面上时打印标题

```

1.  现在你可以`print $node->title`在你的 node.tpl.php 中任何你喜欢的地方

还有其他方法可以在自定义模块中执行此操作，这听起来更有效，但如果这是一个小任务，我想编辑你的 tpls 是一个很好的解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-20T21:56:55.947

该`$content`数组仅在 中可用`node.tpl.php`，而在`page.tpl.php`您有一个`$page`包含已渲染子项的数组。

# php - Ratchet WebSocket Server 可以向客户端本身发送消息吗？

> ID：12874654
> 
> 赞同：19
> 
> 时间：2012-10-13T15:42:37.517
> 
> 标签：php, sockets, websocket, ratchet

我想使用 Ratchet ( [http://socketo.me](http://socketo.me/docs/hello-world) ) 在 iPhone 应用程序和服务器之间建立永久连接。我需要在应用程序和服务器之间交换数据。

从这个例子（[http://socketo.me/docs/hello-world](http://socketo.me/docs/hello-world)）我发现我有一个函数 *onMessage*，当应用程序向服务器发送消息并且服务器可以发送响应时调用它应用程序。

但是服务器还必须能够在不从应用程序获取数据的情况下向应用程序发送数据。例如，应用程序和服务器之间的连接已经建立。服务器上发生了一些事情，我们需要向应用程序发送新数据。我该怎么做，有可能吗？

主要问题是如何从服务器向应用程序发送数据？

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-13T16:57:02.067

这确实是可能的。您需要以某种方式与 WebSocket 服务器进程进行通信。您可以通过使用某种形式的消息传递来做到这一点，无论是 RPC 还是消息队列。

Ratchet 本身基于 React 事件循环。这意味着与 Ratchet 的任何形式的通信都必须与该事件循环集成。[在 React 主页上](http://nodephp.org/)，您可以看到一些已经存在的集成：

*   [Predis/Async](https://github.com/nrk/predis-async)（您可以使用 redis pub/sub 进行消息传递）
*   [DNode-PHP](https://github.com/bergie/dnode-php)（dnode 是一个基于 TCP 的 RPC 协议）
*   [React/ZMQ](https://github.com/reactphp/zmq)（将事件循环与[ZeroMQ](http://www.zeromq.org/)集成）
*   [React/Stomp](https://github.com/reactphp/stomp)（STOMP 协议的实现，允许您与[RabbitMQ](http://www.rabbitmq.com/)等消息对话）
*   [JCook21/ReactAMQP](https://github.com/JCook21/ReactAMQP)（React PHP 的 AMQP 绑定）

在 Ratchet 文档中，有[一个关于如何使用 React/ZMQ](http://socketo.me/docs/push)将消息从任何地方推送到 WebSocket 服务器的教程。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-13T17:21:09.367

Ratchet 还实现了[WAMP](http://wamp.ws)，其中包括 PubSub。因此，您的客户可以订阅一些主题，并且您可以让其他客户端（即在您的后端基础架构上运行）发布到这些主题。您可以让基于 AutobahnPython 的客户端通过 Ratchet 发布到基于 AutobahnAndroid 的移动应用程序或基于 AutobahnJS 的 HTML5 客户端。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T02:43:27.397

我有完全相同的问题，这就是我所做的。

Based on the [hello world tutorial](http://socketo.me/docs/hello-world), I have substituted SplObjectStorage with an array. Before presenting my modifications, I'd like to comment that if you followed through that tutorial and understood it, the only thing that prevented you from arriving at this solution yourself is probably not knowing what [SplObjectStorage](http://php.net/manual/en/class.splobjectstorage.php) is.

```
class Chat implements MessageComponentInterface {
    protected $clients;

    public function __construct() {
        $this->clients = array();
    }

    public function onOpen(ConnectionInterface $conn) {
        // Store the new connection to send messages to later
        $this->clients[$conn->resourceId] = $conn;
        echo "New connection! ({$conn->resourceId})\n";
    }

    public function onMessage(ConnectionInterface $from, $msg) {
        $numRecv = count($this->clients) - 1;
        echo sprintf('Connection %d sending message "%s" to %d other connection%s' . "\n"
            , $from->resourceId, $msg, $numRecv, $numRecv == 1 ? '' : 's');

        foreach ($this->clients as $key => $client) {
            if ($from !== $client) {
                // The sender is not the receiver, send to each client connected
                $client->send($msg);
            }
        }
        // Send a message to a known resourceId (in this example the sender)
        $client = $this->clients[$from->resourceId];
        $client->send("Message successfully sent to $numRecv users.");
    }

    public function onClose(ConnectionInterface $conn) {
        // The connection is closed, remove it, as we can no longer send it messages
        unset($this->clients[$conn->resourceId]);

        echo "Connection {$conn->resourceId} has disconnected\n";
    }

    public function onError(ConnectionInterface $conn, \Exception $e) {
        echo "An error has occurred: {$e->getMessage()}\n";

        $conn->close();
    }
} 
```

Of course to make it really useful you may also want to add in a DB connection, and store/retrieve those resourceIds.

# hla - HLA 示例调用错误

> ID：12874658
> 
> 赞同：0
> 
> 时间：2012-10-13T15:43:10.740
> 
> 标签：hla

'我从 HLA 世界开始，我正在尝试编译示例 CallingHLA，然后 HLA 编译代码，我收到以下错误：

```
Error in file "hlaFunc.hla" at line 76 [errid:82229/hlaparse.bsn]:
Too few actual parameters.
Near: << ) >>

HLAPARSE assembly failed with 1 errors 
```

代码是：

```
unit hlaFuncUnit;

#include( "stdlib.hhf" )

procedure hlaFunc( i:int32 ); @cdecl; @external( "_hlaFunc" );

procedure BuildExcepts; @external("BuildExcepts__hla_");
procedure HardwareException; @external( "HardwareException__hla_" );
procedure DefaultExceptionHandler; @external( "DefaultExceptionHandler__hla_" );

procedure HWexcept; @external( "HWexcept__hla_" );
procedure DfltExHndlr; @external( "DfltExHndlr__hla_" );
procedure QuitMain; @external( "QuitMain__hla_" );

procedure ExitProcess( rtnCode:dword ); @external( "_ExitProcess@4" );

static
    MainPgmVMT: dword:= &QuitMain;

    MainPgmCoroutine:   dword[ 5 ]; @external( "MainPgmCoroutine__hla_" );
    MainPgmCoroutine:   dword; @nostorage;
                        dword &MainPgmVMT, 0, 0;
    SaveSEHPointer:     dword; @nostorage; // Still part of MainPgmCoroutine...
                        dword 0, 0;

procedure QuitMain;
begin QuitMain;

    ExitProcess( 1 );

end QuitMain;

procedure HWexcept;
begin HWexcept;

    jmp HardwareException;

end HWexcept;

procedure DfltExHndlr;
begin DfltExHndlr;

    jmp DefaultExceptionHandler;

end DfltExHndlr;

procedure hlaFunc( i:int32 );
var
    s:string;

begin hlaFunc;

    call BuildExcepts;

    try

        stdout.put( "stdout.put called from HLA code, i = ", i, nl );
        raise( 5 );

      exception( 5 );
        stdout.put( "Exception handled by HLA code" nl );

    endtry;

    try
        stralloc( 16 );
        mov( eax, s );
        str.cpy( "Hello World", s );
        stdout.put( "Successfully copied 'Hello World' to s: ", s, nl );
        str.cpy( "0123456789abcdefghijklmnop", s );
        stdout.put( "Shouldn't get here" nl );

      anyexception

        stdout.put( "Exception code: ", eax, nl );
        ex.printExceptionError();

    endtry;
    strfree( s );
    stdout.put( "Returning to C code" nl );

    mov( SaveSEHPointer, eax );

    #asm
        mov fs:[0], eax
    #endasm

end hlaFunc;

end hlaFuncUnit; 
```

错误在哪里（我知道，错误在 TRY 中），但是，我该如何解决该错误？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-04T15:29:52.173

问题是`printExceptionError`，它应该是这样的：

```
ex.printExceptionError( eax, ebx, ecx, edx, edi ); 
```

因此，正如错误所说，您缺少参数。

# extjs4 - 无法从 extjs 4 中的表布局中获取存储数据

> ID：12874661
> 
> 赞同：0
> 
> 时间：2012-10-13T15:43:32.290
> 
> 标签：extjs4

我正在尝试从存储中获取数据。我想在 extjs 面板中的表格布局中使用它，但尽管数据打印在控制台中，但总是得到一个空字符串。任何指针将不胜感激。

```
<code>
        Ext.onReady(function(){ 
        Ext.define('Account', {
        extend: 'Ext.data.Model',
        fields: [
                    'id',
                    'name',
                    'nooflicenses'
                ]
                        });
                var store = Ext.create('Ext.data.Store', {
                    model: 'Account',
                    autoSync: true,
                    proxy: {
                            type: 'ajax',
                            api: {
                                   read: "accounts"
                                 },
                         reader: {
                                   type: 'json', 
                                   root: 'Account',
                                   successProperty: 'success',
                                   messageProperty: 'message',
                                   totalProperty: 'results',
                                   idProperty: 'id'
                                 },
                      listeners: {
                                  exception: function(proxy, type, action, o, result, records) {
                                 if (type = 'remote') {
                                    Ext.Msg.alert("Could not ");
                                      } else if (type = 'response') {
                                        Ext.Msg.alert("Could not " + action, "Server's response could not be decoded");
                                        } else {
                                        Ext.Msg.alert("Store sync failed", "Unknown error");}
                                                }
                                 }//end of listeners
                             }//end of proxy
                        }); 
                            store.load();
                                               store.on('load', function(store, records) {
                                for (var i = 0; i < records.length; i++) {
                                 console.log(store.data.items[0].data['name']); //data printed successfully here
                                 console.log(store.getProxy().getReader().rawData);
                                 console.log(store);
                                };
                            });

            function syncStore(rowEditing, changes, r, rowIndex) {
                store.save();
            }

            var rowEditing = Ext.create('Ext.grid.plugin.RowEditing', {
            clicksToMoveEditor: 1,
            autoCancel: false,
            saveText: 'Save',
            listeners: {
                        afteredit: syncStore
                       }
            });

            var grid = Ext.create('Ext.panel.Panel', {
            title: 'Table Layout',
            width: 500,
            height:'30%',
            store: store,
            layout: {
                type: 'table',
                // The total column count must be specified here
                columns: 2,
                tableAttrs: {
                style: {
                    width: '100%',
                    height:'100%'
                }
                },
                tdAttrs: {
                style: {
                     height:'10%'
                }
                }

            },
            defaults: {
                // applied to each contained panel
                bodyStyle:'border:0px;',
                xtype:'displayfield',
                labelWidth: 120
            },
            items: [{
                fieldLabel: 'My Field1',
                name :'nooflicenses',
                value: store //How to get the data here
                //bodyStyle:'background-color:red;'
            },{
                fieldLabel: 'My Field',
                name:'name',
                value:'name'
            }],
            renderTo: document.getElementById("grid1")
        });
    });

</code> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T20:24:36.410

Ext.grid.Panel 控件是完全可配置的，因此它允许隐藏网格的不同部分。在我们的例子中，隐藏标题的方法是添加属性： hideHeaders：

Ext.create("Ext.grid.Panel", { hideHeaders: true, columns: [ ... ], ... 其他选项 ... });

如果您仍然想采用另一种解决方案，我想到的更复杂的解决方案是使用 XTemplate 动态构建表格。（http://docs.sencha.com/ext-js/4-1/#!/api/Ext.XTemplate）。在这种方法中，您编写描述如何构建表的模板。

否则，我仍然建议您处理前一种解决方案而不是后一种解决方案。后一种方法与 Sencha ExtJS 的基本思想相反：使用 ExtJS 库的小部件，以最灵活的方式自定义它们，然后通过创建商店和模型来自动化它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T09:02:17.613

显示数据的最“原生”方式是使用 Ext.grid.Panel。

例子：

Ext.application({ name: 'LearnExample',

```
launch: function() {
    //Create Store
    Ext.create ('Ext.data.Store', {
        storeId: 'example1',
        fields: ['name','email'],
        autoLoad: true,
        data: [
            {name: 'Ed',    email: 'ed@sencha.com'},
            {name: 'Tommy', email: 'tommy@sencha.com'}
        ]
    });

    Ext.create ('Ext.grid.Panel', {
        title: 'example1', 
        store: Ext.data.StoreManager.lookup('example1'),
        columns: [
            {header: 'Name', dataIndex: 'name', flex: 1},
            {header: 'Email', dataIndex: 'email', flex: 1}
        ],
        renderTo: Ext.getBody()
    });
} 
```

});

网格可以根据用户的需求进行配置。

如果您有特定原因使用 Ext.panel.Panel 与表格布局，您可以使用 XTemplate，但绑定数据更复杂。

# java - JavaFX 完全定制的窗口？

> ID：12874664
> 
> 赞同：18
> 
> 时间：2012-10-13T15:43:39.770
> 
> 标签：java, scala, javafx-2, javafx

我想要一个完全自定义窗口外观的应用程序。到目前为止，我已经了解到我可以使用以下方法删除典型的窗口内容：

```
class Application extends javafx.application.Application {
  /**
   * Starts the application.
   *
   * @param stage
   */
  override def start(stage: Stage) {
    stage.initStyle(StageStyle.TRANSPARENT)

    // Load the main window view.
    val loader = new FXMLLoader()
    loader.setLocation(getClass.getResource("/com/myproj/application/MainWindow.fxml"))

    val root = loader.load().asInstanceOf[Parent]
    val scene: Scene = new Scene(root, Color.TRANSPARENT)

    stage.setScene(scene)
    stage.show()
  }
} 
```

其他一切正常，除了窗口拖动、双击最大化、拖动到 Windows 上的屏幕顶部边缘应该激活最大化等。本机 Window 功能完全缺失。

我能否以某种方式轻松地自定义窗口的整个外观，而不会失去所有这些不错的功能。

我说的是 Adob​​e Photoshop 之类的东西，它看起来完全不同，但仍保留了这些功能（或在其 UI 之上手动实现它们）。

如果我至少可以为初学者实现拖动+窗口按钮，那将是一个开始。我的目标是 Linux、Mac 和 Windows。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-13T17:15:51.893

[在Ensemble Sample 应用程序](http://www.oracle.com/technetwork/java/javase/overview/javafx-samples-2158687.html)中查看定制的窗口外观和处理，其中包括源代码。下载[源](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)，构建它并将其作为独立应用程序运行，而不是嵌入在浏览器中。这不会完全符合您的要求，因为我认为像拖动到屏幕顶部边缘以激活最大化这样的东西不起作用，但它应该非常接近，您总是可以自己编写一些最大化窗口的代码当它被拖到顶部边缘附近时。Ensemble 窗口具有自定义调整大小装饰、最小化、最大化、关闭图标、窗口顶部的一个区域等功能，您可以使用它来拖动窗口或双击以最大化或最小化窗口 - 即您可以使用的大多数标准功能期望从桌面窗口系统。

为了得到更接近你所要求的东西，也许你可以通过创建两个窗口来破解一些东西。一个是包含屏幕边框的标准装饰舞台窗口，另一个是未装饰或透明的子舞台，始终显示在主窗口顶部，并使用自定义渲染覆盖主窗口的边框。我认为您在尝试实施这种方法时可能会遇到困难，所以我不会真正推荐它。

您可能想尝试使用 UNDECORATED 舞台风格而不是 TRANSPARENT，看看是否能获得更好的原生 Windows 集成。

目前有一些开放的功能请求，JavaFX 将随 JDK8 一起提供，[Windows：支持顶级窗口的 Aero Glass 效果](http://javafx-jira.kenai.com/browse/RT-20020)，[Mac：支持窗口的 NSTexturedBackgroundWindowMask 样式](http://javafx-jira.kenai.com/browse/RT-19988)和[在舞台中创建的纯白色背景应该创建 - 如果需要- 在 Scenegraph](http://javafx-jira.kenai.com/browse/RT-19834)中，实施后可能会帮助您实现目标 - 如果这些功能对您很重要，请为他们投票。

![合奏示例应用程序](../Images/d37b03e5597a4697796bc07b39b52101.png)

还[可以查看 VFXWindows](http://mihosoft.eu/?p=365)，它是 JavaFX 的开源窗口框架。

*更新*

与此相关的还有[Undecorator](http://arnaudnouard.wordpress.com/2013/02/02/undecorator-add-a-better-look-to-your-javafx-stages-part-i/)项目，它允许您使用标准的最小化/最大化/关闭/调整尺寸控件轻松创建 JavaFX 阶段，这些控件通过 JavaFX 引擎而不是 OS 窗口系统呈现。这使您可以实现对像 Ensemble 之类的应用程序显示的窗口呈现的那种自定义控制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-18T11:04:36.503

你可以使用[这个](http://github.com/Oshan96/CustomStage)库。它是一个完全可定制的 JavaFx Stage (CustomStage)。[您可以在此CustomStage Wiki](http://github.com/Oshan96/CustomStage/wiki)中查看有关如何使用它的详细说明

它有，

*   窗口大小调整
*   默认操作按钮及其行为（关闭、最大化/恢复、最小化）
*   窗口拖动
*   窗口根据屏幕分辨率自动缩放
*   反应灵敏
*   可样式化（通过 css 和方法）
*   可以实现透明
*   具有内置导航窗格和抽屉
*   等等

# php - SQL和PHP墙

> ID：12874669
> 
> 赞同：2
> 
> 时间：2012-10-13T15:44:39.693
> 
> 标签：php, sql

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:54:27.937

```
SELECT * FROM posts WHERE `by` IN (SELECT `to` FROM following WHERE `by` = user_id) 
```

# mysql - 显示 2 个表中的所有数据，即使它们没有相同的数据

> ID：12874672
> 
> 赞同：0
> 
> 时间：2012-10-13T15:45:02.620
> 
> 标签：mysql

我有 2 个表，我想加入以获取所有数据，如果`doc_name`与结果`tb1`相同，`doc_re`也会显示`doc_ty`。

```
tb1                        tb2
=======================    ========================  
|id_1|doc_name|doc_url|    | id | doc_re | doc_ty |
=======================    ========================
|  1 |  doc2  | url2  |    |  1 | doc1   | ty1    |
|  2 |  doc5  | url5  |    |  2 | doc2   | ty2    |
|  3 |  doc6  | url6  |    |  3 | doc5   | ty5    |
|  4 |  doc7  | url7  |    ========================
======================= 
```

所以，从表中，示例结果是：`doc2 url2 ty2` `doc5 url4 ty5` `doc6 url6 blank` `doc7 url7 blank`

这是代码：

```
$query = mysql_query(" SELECT 
                             w.doc_url
                             s.doc_ty,
                       FROM
                             tb2 s
                       INNER JOIN 
                             tb1 w  ON s.doc_re = w.doc_name ") 
```

但是，从该查询中，我只得到两个表具有相同数据的结果（仅来自示例 doc2 和 doc5）。如果我还想获取 doc6 和 doc 7，我应该再次查询`ON s.doc_re != w.doc_name`吗？谢谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:49:34.533

您应该使用左（外）连接来做到这一点。请参阅链接[http://www.w3schools.com/sql/sql_join_left.asp](http://www.w3schools.com/sql/sql_join_left.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:52:47.743

这`LEFT JOIN`是你想在这里使用的。它包括左侧的所有行，无论它们是否出现在右侧，如果我们将其视为左侧一张表和右侧一张表。所以...

```
SELECT tbl1.doc_name, tbl1.doc_url, tbl2.doc_ty 
FROM tbl1 LEFT JOIN tbl2
ON tbl1.doc_name = tbl2.doc_re; 
```

参考：[http ://dev.mysql.com/doc/refman/5.0/en/join.html](http://dev.mysql.com/doc/refman/5.0/en/join.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:53:04.410

内连接只返回双方的结果。要包含不匹配的结果，您应该使用外连接。

在您的示例中，如果您从更改`INNER JOIN`为`LEFT JOIN`您将看到您期望的行为。

看看这个以帮助理解连接： http: [//www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

# git - 忽略 capistrano 开发环境当前目录中的某些文件和更改

> ID：12874675
> 
> 赞同：2
> 
> 时间：2012-10-13T15:45:22.000
> 
> 标签：git, deployment, capistrano, development-environment, environment

我们的部署策略：我们有环境范围的数据库配置和`.htaccess`文件（想想`prod.htaccess`，`dev.htaccess`和`local.htaccess`）。部署是使用 capistrano 完成的，它首先检查要部署的分支，然后删除`Capfile`和超出范围的`.htaccess`文件，并将范围内的 htaccess 从重命名`[env].htaccess`为`.htaccess`. 完成后，`repository/public_html`目录通过非删除 rsync 传输到 apache webroot。

> 背景：我工作的公司是一家在线出版物，自 1998 年以来一直存在，部署策略很复杂，因为文件夹结构一团糟：版本控制的文件位于生成的文件和用户上传的文件旁边。在这种情况下，我们不能将整个 apache webroot 文件夹符号链接到`/current`. 每次进行新部署时，生成的文件都会被清除，用户上传的分散在目录中的文件必须从其他地方符号链接，等等。因此，非删除 rsync 操作。

不过，上面提到的当前精神错乱是另一天的问题。

我想要的是一个不需要在部署时删除和重命名 repo 中的 htaccess 和 db 配置文件的解决方案。原因是我们可以工作和提交，`/deploy/current`而不必与部署中的本地更改纠缠不清。

部署这样的环境范围文件的典型解决方案是什么？我应该将它们移动到`/config`上面的文件夹`/public_html`并从 apache webroot 符号链接到相关文件，`/config`具体取决于环境？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T15:57:39.107

我建议您通过以下方式解决此问题：

*   仍然将所有`[env].htaccess`文件保留在存储库中。
*   将`deploy:update`所有`[env].htaccess`文件符号链接到`.htaccess` 符号链接后 ( `ln --symbolic [env].htaccess .htaccess`)
*   不要删除`*.htaccess`文件。
*   让开发人员/管理员编辑`*.htaccess`文件（他们将可以通过`.htaccess`符号链接访问范围内的文件以及所有范围外的 [env].htaccess 文件。
*   让开发人员/系统操作员直接从`deploy/current`文件夹提交（但请确保它是您可以提交的有效存储库。）。
*   将此过程用于您使用的其他类型的文件。

我认为这可能会解决您描述的问题，或者至少可以缓解它。我会亲自开始这样做，看看效果如何。

BTW 为什么要删除`Capfile`after `deploy:update`？

# ios - 本地化和 CocoaPods

> ID：12874678
> 
> 赞同：20
> 
> 时间：2012-10-13T15:45:54.290
> 
> 标签：ios, localization, cocoapods

我有一个使用 CocoaPods 的项目。结果，我有一个包含两个项目的工作区：我的和 Pods。

Pods 包含我想要本地化的代码，并且我`.strings`在 Pod 中创建了文件。但是，`NSLocalizedString`无法加载这些字符串。我怀疑这是因为`.strings`文件不在主包中，但没有 Pod 包，因为它被编译成静态库。

有没有比我的主项目更好的方法来本地化 CocoaPods 项目中的代码？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T08:34:54.570

`NSLocalizedString`只是调用 NSBundle 的`localizedStringForKey:value:table:`，所以我写了一个 NSBundle 类别来查看几个包（在 iOS 中只是文件夹）：

```
NSString * const kLocalizedStringNotFound = @"kLocalizedStringNotFound";

+ (NSString *)localizedStringForKey:(NSString *)key
                              value:(NSString *)value
                              table:(NSString *)tableName
                       backupBundle:(NSBundle *)bundle
{
    // First try main bundle
    NSString * string = [[NSBundle mainBundle] localizedStringForKey:key
                                                               value:kLocalizedStringNotFound
                                                               table:tableName];

    // Then try the backup bundle
    if ([string isEqualToString:kLocalizedStringNotFound])
    {
        string = [bundle localizedStringForKey:key
                                         value:kLocalizedStringNotFound
                                         table:tableName];
    }

    // Still not found?
    if ([string isEqualToString:kLocalizedStringNotFound])
    {
        NSLog(@"No localized string for '%@' in '%@'", key, tableName);
        string = value.length > 0 ? value : key;
    }

    return string;
} 
```

然后`NSLocalizedString`在我的前缀文件中重新定义宏：

```
#undef  NSLocalizedString
#define NSLocalizedString(key, comment) \
[NSBundle localizedStringForKey:key value:nil table:@"MyStringsFile" backupBundle:AlternativeBundleInsideMain] 
```

如果需要，其他宏也一样（即`NSLocalizedStringWithDefaultValue`）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-29T08:21:02.523

[@Rivera](https://stackoverflow.com/users/1049134/rivera) **Swift 2.0**版本：

```
static let kLocalizedStringNotFound = "kLocalizedStringNotFound"

static func localizedStringForKey(key:String,
                                  value:String?,
                                  table:String?,
                                  bundle:NSBundle?) -> String {
    // First try main bundle
    var string:String = NSBundle.mainBundle().localizedStringForKey(key, value: kLocalizedStringNotFound, table: table)

    // Then try the backup bundle
    if string == kLocalizedStringNotFound {
        string = bundle!.localizedStringForKey(key, value: kLocalizedStringNotFound, table: table)
    }

    // Still not found?
    if string == kLocalizedStringNotFound {
        print("No localized string for '\(key)' in '\(table)'")
        if let value = value {
            string = value.characters.count > 0 ? value : key
        } else {
            string = key
        }
    }

    return string;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T14:51:42.067

1.  您不应该在 Pods 项目中放置任何文件，因为该`pod`命令会一次又一次地重新创建项目。

    所以把字符串文件放在你自己的项目中。

2.  如果你想在你*自己的 Pod*中发布本地化的字符串文件，你应该将它包含在一个包中，并确保该包将安装在你的 Podspec 文件中。

例如：

```
def s.post_install(target)
    puts "\nGenerating YOURPOD resources bundle\n".yellow if config.verbose?
    Dir.chdir File.join(config.project_pods_root, 'YOURPOD') do
        command = "xcodebuild -project YOURPOD.xcodeproj -target YOURPODResources CONFIGURATION_BUILD_DIR=../Resources"
        command << " 2>&1 > /dev/null" unless config.verbose?
        unless system(command)
            raise ::Pod::Informative, "Failed to generate YOURPOD resources bundle"
        end

        File.open(File.join(config.project_pods_root, target.target_definition.copy_resources_script_name), 'a') do |file|
            file.puts "install_resource 'Resources/YOURPODResources.bundle'"
        end
    end
end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-24T13:31:32.637

在 pod 中本地化资源的最佳方法（公共或私有无关）是将`.strings`本地化文件添加到 pod 包中。

主应用程序在从 pod 框架中获取本地化文件时非常挑剔，您必须遵循以下步骤：

**1** - 创建 Localizable.strings 和本地化`*.strings`所需的所有其他文件，并将它们放在一个文件夹中，如下所示：

[![字符串文件夹结构](../Images/7807302dec52980af8c6a1e99fe3df0c.png)](https://i.stack.imgur.com/iuGVx.png)

需要遵守的一些限制条件：

*   文件夹名称必须是`XX.lproj`，其中 XX 是您的**确切**语言名称，注意：`en`!= `en-GB`!=`en-US`
*   所有`lproj`文件夹都需要在同一级别
*   每个`lproj`文件夹需要有相同数量的`.strings`文件和相同的名称

**2** - 配置您的`.podspec`文件，以便 pod 可以正确获取本地化并将它们复制到`.framework`.

例子：

```
 s.resource = 'your_path/Localizations/**/*', '... possibly other resources' 
```

在您的 Development Pods 文件夹中执行`pod install`结果后应该是这样的：

[![在此处输入图像描述](../Images/32b70b5c638a68f3748c4d84e0235bb6.png)](https://i.stack.imgur.com/R3WDF.png)

要检查的一件重要事情是，创建的框架是所有`.lproj`文件夹都必须位于**根文件夹**中，否则主应用程序不会正确拾取。

**3** - 在您的 pod 代码中，`NSLocalizedString`您必须使用`NSLocalizedStringFromTableInBundle`：

```
NSLocalizedStringFromTableInBundle(@"My string", nil, [NSBundle bundleForClass:[MCLoginContext class]], @"String context") 
```

整个过程非常微妙和烦人，但仅此而已。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-09-09T13:14:38.267

为了快速，您可以使用 Loc 枚举：

```
enum Loc : String{
case ok = "OK"
case cancel = "Cancel"

var localized: String {
    let s = self.rawValue
    let bundle = Bundle(for: <classname inside the bundle>.self)
    let result = NSLocalizedString(s, tableName: nil, bundle: bundle, value: "", comment: "")
    return result;
} 
```

}

并这样使用它：

```
let s = Loc.ok.localized
print(s) 
```

# ios - iOS 单元格上不显示阴影

> ID：12874684
> 
> 赞同：9
> 
> 时间：2012-10-13T15:46:53.587
> 
> 标签：ios, uitableview, uicollectionview, uicollectionviewcell

我正在使用 UICollectionView 在主视图中生成多个缩略图。

这工作正常，我可以在单元格周围放置边框以及应用边框（角）半径。

唯一似乎没有坚持的是每个单元格的阴影。

这是我的代码

```
....

[cell.layer setBorderColor:[UIColor colorWithRed:213.0/255.0f green:210.0/255.0f blue:199.0/255.0f alpha:1.0f].CGColor];
[cell.layer setBorderWidth:1.0f];
[cell.layer setCornerRadius:7.5f];
[cell.layer setShadowOffset:CGSizeMake(0, 1)];
[cell.layer setShadowColor:[[UIColor darkGrayColor] CGColor]];
[cell.layer setShadowRadius:8.0];
[cell.layer setShadowOpacity:0.8];

return cell; 
```

你知道我做错了什么以及我可以做些什么来让阴影显示出来吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-14T13:02:08.483

您需要在边界之外创建阴影；

[cell.layer setMasksToBounds:NO];

# android - 是否可以使用 OpenGL ES 2.0 扭曲底层图像？

> ID：12874686
> 
> 赞同：4
> 
> 时间：2012-10-13T15:46:59.617
> 
> 标签：android, opengl-es, opengl-es-2.0, glsl, video-capture

我有一个 Android 4.0 应用程序，它使用 GL_OES_EGL_image_external 方法将视频渲染为 OpenGL 表面。这很好用。此外，我想在此之上拉伸/扭曲一些补丁。我目前正在对那些我想在这些区域顶部的一些四边形上使用一些额外的着色器进行扭曲的区域进行着色。我被困在如何获得基础颜色上。视频四边形顶部的四边形上的着色器如何扭曲底层图像？可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-20T02:15:48.707

我在 iOS 上，但我的应用程序做了非常相似的事情。

我是如何实现它的，是基于[Apple 的一些示例代码](http://developer.apple.com/library/ios/#samplecode/GLCameraRipple/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011222-Intro-DontLinkElementID_2)（尤其是 RippleModel.m）。它的工作原理是，它将视频纹理视频不是放在四边形上，而是放在高度镶嵌的网格上，所以你有大量的三角形和大量的纹理坐标。它以编程方式创建此网格的顶点——更重要的是，它也以编程方式创建纹理坐标——并将它们保存在一个数组中。

对于每一帧，它遍历所有顶点并更新每个顶点的纹理坐标，根据用户触摸的位置以及周围顶点的纹理偏移量将它们“扭曲”成波纹图案。所以几何体根本没有改变，它们不会在着色器中执行扭曲，这一切都是在纹理坐标中完成的；然后着色器只是在它收到的坐标上进行直接的纹理查找。

所以很难说这种方法是否能满足你的需要，但如果你的扭曲只发生在 2d 中，并且如果你能弄清楚如何将你的扭曲定义为纹理坐标调整，这可能会有所帮助。

# c# - 带有流返回的 WCF RESTful Post

> ID：12874688
> 
> 赞同：3
> 
> 时间：2012-10-13T15:47:12.730
> 
> 标签：c#, wcf, rest, https

我有使用 https 的 WCF Web 服务。它有下一个界面：

```
[ServiceContract]
class Service
{
    [OperationContract]
    [WebInvoke(UriTemplate="Method", BodyStyle=WebMessageBodyStyle.Bare)]
    byte[] Method(Stream request)
    {
        // ... Some logic ...
        return someBytes;
    }
} 
```

这很好用，但有一个小问题。方法完成后，它会关闭 https 连接。我有另一种使用 WebGet 服务的方法。它返回 Stream 对象，并且这个对象不会关闭 https 连接。我尝试在我的第一个方法中使用相同的方法并将其重写如下：

```
[ServiceContract]
class Service
{
    [OperationContract]
    [WebInvoke(UriTemplate="Method", BodyStyle=WebMessageBodyStyle.Bare)]
    Stream Method(Stream request)
    {
        // ... Some logic ...
        return new MemoryStream(someBytes);
    }
} 
```

但是当我尝试使用客户端使用方法时，服务会响应：“方法不允许。允许：GET，HEAD”。请告诉我我是否通过返回 Stream 对象做错了，或者我错过了一些东西。

UPD：我也很欣赏有关追查此问题的任何提示。

# f# - 具有副作用的 F# 可观察过滤器

> ID：12874689
> 
> 赞同：1
> 
> 时间：2012-10-13T15:47:55.147
> 
> 标签：f#, observable, frp

我有许多事件被合并到一个执行某些命令的 observable 中。如果命令成功，则会产生一些结果。此外，应记录该命令。

就代码而言，这看起来像

```
 let mevts = modifyingevents |> Observable.filter exec_action
                    |> Observable.add (fun action -> self.OutlineEdited <- true) 
```

该函数`exec_action`会导致一些副作用，例如编辑树视图。如果成功，则属性`OutlineEdited`设置为`true`。

我希望用类似的东西来遵循这个

```
 mevts |> Observable.scan (fun log action -> action::log) [] 
```

但事实证明[Observable.filter](http://msdn.microsoft.com/en-us/library/ee370380.aspx)为*每个订阅的观察者*执行一次。这意味着副作用将重复出现。

您能否建议另一种方法来实现相同的结果而无需`exec_action`执行两次？如果可能的话，我希望避免使用可变变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T01:19:14.853

这个例子很好地说明了`IObservable<'T>`类型（在这个例子中通过`Observable`模块使用）和 F# 类型`IEvent<'T>`（以及`Event`模块中的函数）之间的区别。

当您使用*observables*时，每个订阅者都会创建一个新的操作链（因此每个订阅者都会执行一次副作用）。如果你使用*事件*，那么状态是共享的，副作用只执行一次（不管订阅者的数量）。另一方面，当您从*事件*中删除所有订阅者时，事件不会被垃圾收集。

因此，如果您不需要在删除所有订阅者时删除事件，您应该通过使用`Event`而不是获得您想要的行为`Observable`：

```
modifyingevents 
|> Event.filter exec_action 
|> Event.scan (fun log action -> action::log) [] 
```

# grails - 恢复 Grails url 映射

> ID：12874690
> 
> 赞同：0
> 
> 时间：2012-10-13T15:48:00.013
> 
> 标签：grails, h2

我收到了一个已部署的 grails 应用程序作为 .war，安装后，我稍后将其解压缩以查看源代码和配置。

无论如何要找出最初在源中的 UrlMappings 吗？他们似乎不在战争中的任何地方。

我无权访问源代码或应用程序作者，并且应用程序的加载页面是登录页面。有一个 h2 数据库，我对其进行了探索，但发现它在公共模式中没有表。

然后我还在./WEB-INF/grails-app/views/connection 中找到了一些视图，例如create.gsp 和editConnection.gsp，还有一个带有create.gsp 的JDBDriver 文件夹。

我的想法是有一个 url 来设置这个应用程序，但我不知道它是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:48:52.790

Grails url 映射在一个名为的文件中声明，`UrlMappings.groovy`因此您可以尝试反编译此类。UrlMappings 通常会大量使用闭包，因此您可能还会有一堆相关的类需要反编译。

# c++ - 通过指针将二维数组传递给c ++中的函数

> ID：12874692
> 
> 赞同：0
> 
> 时间：2012-10-13T15:48:03.247
> 
> 标签：c++, pointers

> **可能重复：**
> [如何在 C++ 中使用数组？](https://stackoverflow.com/questions/4810664/how-do-i-use-arrays-in-c)

如何通过指针将二维数组传递给 C++ 中的函数。当我尝试下面的代码时出现以下错误。

错误：无法将参数 '1' 的 'int (*)[10][10]' 转换为 'int **' 到 'void fn(int **)'

```
void fn(int **a)
{
cout<<a[0][0]<<" "<<a[0][1];
}

int main()
{

int A[10][10];
A[0][0]=1;
A[0][1]=2;

fn(&A);   //????
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T16:50:18.563

以您的方式创建的二维数组在内存中是连续的。编译器需要知道每个段的大小，以便能够将指针移动到函数中的下一个段。写作`fn(int (*a)[3])`或`fn(int a[][3])`等价。但是让我们举个例子

```
char a[3][3];

a[0][0] = 01;
a[0][1] = 02;
a[0][2] = 03;
a[1][0] = 04;
a[1][1] = 05;
a[1][2] = 06;
a[2][0] = 07;
a[2][1] = 08;
a[2][2] = 09; 
```

会变成

```
|01|02|03|04|05|06|07|08|09| 
```

在记忆中。

所以如果你传递`a`给一个函数，它需要知道它必须增加`a`ptr`3 * sizeof(a)`才能访问`a[1][0]`。

简而言之：函数的原型需要是`void fn(int a[][10])`或`void fn(int (*a)[10])`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T16:47:57.043

根据@R的链接。Martinho Fernandes ，以下是有效的 C++：

```
int array_of_arrays[6][7];
int (*pointer_to_array)[7] = array_of_arrays; 
```

所以以下内容也应该是有效的：

```
void fn (int (*a)[10]) 
{
     cout<<a[0][0]<<" "<<a[0][1];
} 
```

我相信以下内容也是有效的：

```
void fn (int a[][10]) 
{
    cout<<a[0][0]<<" "<<a[0][1];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:58:52.507

您需要将 fn() 声明为

```
void fn(int (&a)[10][10]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T16:03:47.763

C++ 需要知道数组大小（一维）来执行二维索引。

尝试：

```
void fn(int a[][10]) {
    cout<<a[0][0]<<" "<<a[0][1]; 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T16:48:30.913

C++ 中的数组可以被视为指向数组第一个元素位置的指针。二维数组可以被认为是一个指针数组，每个指针都指向另一个数组。虽然这并不是严格意义上的数组是如何实现的，但 C 支持数组和指向第一个元素的指针之间的隐式转换，您可以将它们视为相同的。Array[index] 只是`*(Array + index*sizeof(whatever's in the array))`. 因此，要使您的功能正常工作，您只需执行以下操作：

```
void fn(int (*a)[10]) {
    cout<<a[0][0]<<" "<<a[0][1];
}

int main() {

    int A[10][10];
    A[0][0]=1;
    A[0][1]=2;

    fn(A);
} 
```

不需要先获取数组的地址，因为它已经是一个指针。但是，因为您使用的是 C++，所以您确实应该考虑使用标准容器：

```
void fn(vector< vector<int> > const&a) {
    cout<<a[0][0]<<" "<<a[0][1];
}

int main() {

    vector< vector<int> > A( 10, vector<int>(10) );
    A[0][0]=1;
    A[0][1]=2;

    fn(A);
} 
```

# jquery - 从表的特定行更改值

> ID：12874696
> 
> 赞同：1
> 
> 时间：2012-10-13T15:48:14.367
> 
> 标签：jquery

我想更改表中的特定行，但还有一些其他`<span>`的 . 我想更改第一个跨度中的值。

我的代码如下：

```
<table id="mytable">
<tr>
    <th>Book_ID</th>
    <th>Title</th>
    <th>Price</th>
    <th>Qty</th>
    <th>Total</th>
</tr>
<tr>
    <td>A001</td>
    <td>my book</td>
    <td>10000</th>
    <td>
            <span>3</span>
            <span><a>delete</a></span>
            <span>
              <a href=# title="plus_qty"><img src="quantity_up.gif"></a>
            </span>
            <span>
              <a href=# title="minus_qty"><img src="quantity_down.gif"></a>
            </span>
    </td>
    <td>30000</td>
</tr>
</table> 
```

不删除`<span title="plus_qty">`，`<span title="minus_qty">`或者不删除`<span>`，`<td>`我可以获取和更新 qty 值。这是我的代码而不删除元素：

```
<table id="mytable">
<tr>
    <th>Book_ID</th>
    <th>Title</th>
    <th>Price</th>
    <th>Qty</th>
    <th>Total</th>
</tr>
<tr>
    <td>A001</td>
    <td>my book</td>
    <td>10000</th>
    <td>3</td>
    <td>30000</td>
</tr>
</table> 
```

jQuery代码：

```
var row = $('#mytable').find('td');
for(i=0;i<row.length;i++){
   if(row.eq(i).text() == 'A0001'){
       row.eq(i+3).text(parseInt(row.eq(i+3).text())+1);
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:54:09.373

试试这个：

```
var row = $('#mytable').find('td');
for(i=0;i<row.length;i++){
   if(row.eq(i).text() == 'A0001'){
       ch = row.eq(i+3).children(':first-child');
       ch.text(parseInt(ch.text())+1);
   }
} 
```

请注意可能的错字，在您的 html 代码中，`<td>A001</td>`但在您的 javascript 中，您搜索的`A0001`是不同的值，在我自己修复了上面的代码之后。

# scala - 通过 TextMate 执行 Scala

> ID：12874698
> 
> 赞同：0
> 
> 时间：2012-10-13T15:48:31.357
> 
> 标签：scala, textmate

我正在浏览我买的 Scala 书，并试图让 TextMate 合作

![在此处输入图像描述](../Images/fce61b7d0b8bcd6c7871f4e7a07d4864.png)

我明白了：

1.  失败
2.  作品
3.  失败（可以理解的原因） main 丢失
4.  它是什么？
5.  它是什么？
6.  它是什么？

**有什么区别：**

*   运行脚本
*   作为脚本运行

**什么是选项 4、5、6？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:56:02.703

不知道为什么它给你两个运行脚本选项，但 scala REPL 是一个交互式 scala 控制台。您可以使用它即时执行任何 scala 语句。选项 4 只会启动一个控制台，选项 5 我想预加载文件中的所有内容，因此您不必自己导入所有内容。6 将启动一个控制台，让您执行您选择的任何内容。

以下是关于 REPL 的更多信息：[http ://www.scala-lang.org/node/2097](http://www.scala-lang.org/node/2097)

# eclipse - ant eclipse：包 org.apache.log4j 不存在

> ID：12874700
> 
> 赞同：2
> 
> 时间：2012-10-13T15:48:50.760
> 
> 标签：eclipse, ant, junit, compiler-errors, log4j

我是一个 java-greenhorn，试图通过 ant 编译我的项目，但没有任何效果。所以，在我的课堂上，我使用`log4j.jar`and `import junit`。一切都在 Eclipse 中，无论是 Ant。这是 build.xml 文件：

```
 <path id="master-classpath">
    <pathelement path="D:\.a lot of folders..\junit.jar"/>
    <!--<pathelement path="D:\...\log4j-1.2.17.jar"/>    --> 
    <fileset dir="D:\apache-log4j-1.2.17">
            <include name="log4j-1.2.17.jar"/>
    </fileset>
    <pathelement path="${buildSrc}"/>
</path> 
```

并`compile`阻止：

```
<target name="compile" depends="init">
        <javac includeantruntime="false" srcdir="${src1}" destdir="${buildSrc}"/>
        <javac includeantruntime="false" srcdir="${src2}" destdir="${buildSrc}"/>
        <javac includeantruntime="false" srcdir="${test}" destdir="${buildTest}">
            <classpath refid="master-classpath"/>
        </javac>
        <javac includeantruntime="false" srcdir="src" destdir="build/classes" classpath="${buildSrc}"/>
    </target> 
```

我也尝试了一些不同的方法，比如在 javac-task 中做同样的事情，使用属性等，但都没有成功。你能找出我的错误并帮助处理它吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T23:41:47.627

```
 <javac includeantruntime="false" srcdir="${test}" destdir="${buildTest}">
    <classpath refid="master-classpath"/>
 </javac> 
```

应该管用。“classpathref”应该作为 javac 本身的属性。

可能性：

1.  文件夹名称中的错字
2.  文件名中的错字
3.  D盘未映射

# asp.net-mvc - 如何组织控制器类和动作方法？

> ID：12874702
> 
> 赞同：1
> 
> 时间：2012-10-13T15:49:28.207
> 
> 标签：asp.net-mvc, controller, asp.net-mvc-4, actionmethod, code-standards

假设我正在开发汽车门户。为了搜索新车，用户提供以下信息：

*   牌
*   模型
*   型号版本
*   汽油种类
*   预算

商业规则：

1.  如果用户仅选择品牌：显示品牌列表页面，其中包含所选品牌的所有型号
2.  如果用户选择品牌和型号：显示型号列表页面
3.  如果用户选择品牌 + 型号 + 型号版本：显示型号版本详细信息页面。
4.  如果用户选择燃料类型或预算：显示品牌列表页面。

现在我有两种方法来定义控制器和动作。

方法 1：一个具有多个操作方法的 Controller 类

```
Controller Class : CarSearchmanager
with following are Action Methods:
        - SearchNewCar(int Barnd,int Model.......)
          Depending on user selection this method will redirect control to following  
          action method:

        - BrandListing(int BrandID......)
        - ModelListing(int BrandID,intModelID.....)
        - ModelVersionDetails((int BrandID,intModelID,int ModelVersionID....) 
```

方法二：多控制器类

```
Controller Class : CarSearchmanager

Following are Action Methods:
        - SearchNewCar(int Barnd,int Model.......)
          Depending on user selection this method will redirect control to following 
          controller action method:

Then I will have separate controller class and action method for each of the pages like 
bellow:

    - BrandListing
    - ModelListing
    - ModelVersionDetails 
```

我对如何组织控制器类和操作方法感到非常困惑。是否有任何最佳实践类型的文档？请给我推荐一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T16:57:33.003

我认为没有确定的最佳版本。以一种让您感觉更干净和更有条理的方式定义它。根据我对您的要求的理解，我可以这样定义

## 品牌控制器

### 行动方法

*   `ListForFuleAndBudget(string fuelType,string budget)`
*   `List(string brandName)`

## 模型控制器

### 动作方法

*   `List(string brand,string model)`
*   `Details(string brand, string model, string version)`

现在，如果您想要漂亮的 url，而您不想要操作方法名称，（例如：details）您可以在通用路由定义之前在 global.asax 中注册路由时定义漂亮的 url。

```
routes.MapRoute("list", "model/{brand}/{model}",
               new { controller = "brand", action = "List");

routes.MapRoute("list", "model/{brand}/{model}/{version}",
               new { controller = "brand", action = "details");

//default route definition goes here 
```

现在`yoursitename/model/honda/camry`将把用户带到`list`action 方法， `yoursitename/model/honda/camry/lx`并将他们带到`details`action 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T16:00:40.390

我的建议是将它放在同一个控制器中，因为这是一个搜索功能，将在类似的上下文中使用。使用方法重载并在相应的方法中返回特定的视图。

# jqgrid - SPA 上的 JQgrid Web Api Json

> ID：12874705
> 
> 赞同：1
> 
> 时间：2012-10-13T15:49:37.673
> 
> 标签：jqgrid, asp.net-web-api

我刚找到 JQGrid ，认为 JQgrid 非常成熟，非常适合与 Web API 一起使用

我有几个问题：我们正在使用 Web Api 并且有以下 HTML 代码和控制器。Image 字段在返回到控制器时会丢失其数据。Google 调试器在 HTML 上显示图像字段的数据，但如果我在控制器 Visual Studio 中的 Put 方法上设置断点，我可以看到产品实体的所有字段都填充了数据，但只有一个；图像字段为空。

我花了一些时间才让它工作，因此我决定与社区分享 HTML 代码 + WebApi 控制器。

1-我做对了吗（网格参数）？

2-为什么图像字段返回 null ？

3-如何实现搜索？这不会被调用

公共动态GetProducts4JqGrid1（字符串sidx，字符串sord，int page，int rows，bool _search，字符串searchField，字符串searchOper，字符串searchString）

4-为什么我必须将实体 ID 传递给控制器​​？我尝试了许多其他方法，它总是以“0”返回，所以必须将 Id 传递给 Put 方法，这是唯一的方法吗？

JQGrid 的 Web Api 很棒

很高兴把所有东西都放在一个屋檐下 [http://www.trirand.com/jqgridwiki/doku.php?id=wiki:jqgriddocs](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:jqgriddocs)

```
using System;
using System.Collections.Generic;
using System.Globalization;
using System.Linq;
using System.Net;
using System.Net.Http;
using RoboMVC.Contracts;
using RoboMVC.Model;
namespace RoboMVC.Web.Controllers.jQgrid
{
public class ProductsJQgridController : ApiControllerBase
{
public ProductsJQgridController(IRoboMVCUow uow)
{
Uow = uow;
}
public dynamic GetProducts4JqGrid(string sidx, string sord, int page, int rows)
{
//var products = Uow.Product.GetAllProducts().OrderBy(e => e.ProductId) as IEnumerable<Product>;
var pageIndex = Convert.ToInt32(page) - 1;
var pageSize = rows;
var totalRecords = Uow.Product.Count();
var totalPages = (int)Math.Ceiling((float)totalRecords / (float)pageSize);
var products = Uow.Product.GetAllProducts().OrderBy(e => e.ProductId).Skip(pageIndex * pageSize).Take(pageSize) as IEnumerable<Product>;
return new
{
total = totalPages,
page = page,
records = totalRecords,
rows = 
(
from product in products
select new
{
id = product.ProductId,
cell = new object[]
{
product.ProductId,
product.Description,
product.SalePrice,
product.SaleCommissionFactor,
product.Stock,
product.StockMax,
product.StockMin,
product.DateOfEntry,
product.LastDateOfSale,
product.SKU,
product.LastCostPaid,
product.Weight,
product.Image,
product.Categoy,
}
}).ToList()
};
}
public HttpResponseMessage Put( int id, Product product)
{
product.ProductId = Convert.ToInt32(id);
Uow.Product.Update(product);
Uow.Commit();
var result = new HttpResponseMessage(HttpStatusCode.NoContent);
return result;
}
public HttpResponseMessage Post(int id, Product product)
{
product.ProductId = Convert.ToInt32(id);
product = Uow.Product.Add(product);
Uow.Commit();
var response = Request.CreateResponse<Product>(HttpStatusCode.Created, product);
string uri = Url.Route(null, new { id = product.ProductId });
response.Headers.Location = new Uri(Request.RequestUri, uri);
return response;
}
public HttpResponseMessage Delete(int id)
{
Uow.Product.Delete(id);
Uow.Commit();
var result = new HttpResponseMessage(HttpStatusCode.NoContent);
return result;
}
}
}

<script>
var API_URL = "/api/ProductsJQgrid/";
jQuery("#gridMain").jqGrid({
//http://www.trirand.com/jqgridwiki/doku.php?id=wiki:options
url: "/api/ProductsJQgrid/GetProducts4JqGrid/",
datatype: 'json',
mtype: 'GET',
pager: '#pagernav',
viewrecords: true,
height: '60%',
width: '100%',
hoverrows: true,
rownumbers: true,
shrinkToFit: true,
gridview: true,
search: true,
ignoreCase:true,
loadonce: false,
viewsortcols: [false, "horizontal", true],
imgpath: '../../Content/jquery.jqGrid/content/images/',
rowNum: 10,
cache: true,
rowList: [10, 20, 30],
sortable: true,
sortname: 'productId',
sortorder: "desc",
// sorttype: "text",
caption: "CRUD With ASP.NET Web API",
autowidth: true,
colNames: ['productId', 'Description', 'SalePrice', 'SaleCommissionFactor', 'Stock', 'StockMax', 'StockMin', 'DateOfEntry', 'LastDateOfSale', 'SKU', 'LastCostPaid', 'Weight', '<image src=images/arrow-right.gif width=16 height=16>', 'Categoy'],
colModel: [
//http://www.trirand.com/jqgridwiki/doku.php?id=wiki:colmodel_options
{ key:true, name: 'productId', index: 'productId', width: 40, search : true , sorttype: "int", editable: false },
{ name: 'description', index: 'description', editable: true, edittype: 'text', width: 70 },
{ name: 'salePrice', index: 'salePrice', editable: true, edittype: 'text', width: 50, align: "right", sorttype: "float", formatter: "number" },
{ name: 'saleCommissionFactor', index: 'saleCommissionFactor', editable: true, edittype: 'text', width: 50, align: "right", sorttype: "float", formatter: "number" },
{ name: 'stock', index: 'stock', editable: true, edittype: 'text', width: 50, align: "right", sorttype: "int" },
{ name: 'stockMax', index: 'stockMax', editable: true, cellEdit:true, edittype: 'text', width: 50, align: "right", sorttype: "int"},
{ name: 'stockMin', index: 'stockMin', editable: true, edittype: 'text', width: 50, align: "right", sorttype: "int"},
{ name: 'dateOfEntry', index: 'dateOfEntry', editable: true, edittype: 'text', width: 50, align: "right", sorttype: "date", formatter: "date" },
{ name: 'lastDateOfSale', index: 'lastDateOfSale', editable: true, edittype: 'text', width: 50, align: "right", sorttype: "date", formatter: "date" },
{ name: 'sKU', index: 'sKU', editable: true, edittype: 'text', width: 70 },
{ name: 'lastCostPaid', index: 'lastCostPaid', editable: true, edittype: 'text', width: 50, align: "right", sorttype: "float", formatter: "number" },
{ name: 'weight', index: 'weight', editable: true, edittype: 'text', width: 70 },
{ name: 'image', index: 'image', editable: false, search:false, width: 50, align: "right", },
{ name: 'categoy', index: 'categoy', editable: true, edittype: 'text', width: 70 }
],
jsonReader: {
root: "rows",
page: "page",
total: "total",
records: "records",
repeatitems: true,
id: "id", // from the controller returned value
cell: "cell",
search: "_search"
},
subGrid: true
});
function updateDialog(action) {
return {
url: "/api/ProductsJQgrid/"
, closeAfterAdd: true
, closeAfterEdit: true
, afterShowForm: function (formId) { }
, modal: true
, onclickSubmit: function (params) {
var list = $("#gridMain");
var selectedRow = list.getGridParam("selrow");
var rowData = list.getRowData(selectedRow);
params.mtype = action;
params.url += rowData.productId;
debugger;
// image has the right data here
}
, width: "600"
};
}
jQuery("#gridMain")
.jqGrid('navGrid', '#pagernav',
{ add: true, edit: true, del: true, search: true,refresh: true },
updateDialog('Put'),
updateDialog('Post'),
updateDialog('Delete'),
{ sopt: ["cn"] } // Search options. Some options can be set on column level
)
// .filterToolbar({ autoSearch: false, searchOnEnter: false, stringResult: true })
;
$(window).bind('resize', function () {
jQuery("#gridMain").setGridWidth($('#parentDiv').width() - 30, true);
}).trigger('resize');
</script> 
```

# java - java - 编辑器不包含主要类型

> ID：12874707
> 
> 赞同：3
> 
> 时间：2012-10-13T15:49:45.087
> 
> 标签：java, eclipse, compiler-errors

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T18:45:23.290

请确保您的项目源 (src) 文件夹位于构建路径上。如果没有，main() 方法可能不会包含在您的项目中。您可以按照以下步骤验证您的源路径设置：

*   右键单击您的项目`Package Explorer`。
*   选择`Properties (ALT + Enter)`
*   转到选项`Java Build Path Click`卡`Source`并检查源文件夹是否在构建路径上

验证完成后，您可以关闭您的项目并重新打开它。然后，您应该能够右键单击带有 main 方法 ( `ServerMain.java in your case`) 的类文件并运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T15:51:37.827

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T15:52:54.397

您可以在项目的属性中配置您的主类（我的理解必须是静态的）。

确保它指向正确的位置。

[http://protegewiki.stanford.edu/images/2/24/Protege41InEclipseRunnableMainTab.png](http://protegewiki.stanford.edu/images/2/24/Protege41InEclipseRunnableMainTab.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T15:54:55.753

我有时也遇到过这个问题，我为此使用了解决方法。
转到包资源管理器，然后转到所需的类（.java 文件下的类），右键单击并作为 java 应用程序运行

# java - 如何在没有表格标题和填充彩色单元格的 pdf 上导出 JTables

> ID：12874708
> 
> 赞同：0
> 
> 时间：2012-10-13T15:50:05.927
> 
> 标签：java, swing, pdf, graphics, jtable

> **可能重复：**
> [如何在 pdf 中导出一对一的 JTable](https://stackoverflow.com/questions/12871348/how-to-export-one-to-one-jtable-in-the-pdf)

我正在开发一个报告应用程序，我必须在其中以报告的形式导出 JTable。但是当我尝试直接在 PDF 上绘制 JTable 时，它​​不会显示第一行和第一列的边框。为此，我尝试使用默认颜色网格左上边框。这在 PDF 中给了我一条较暗的线。但是，当尝试用颜色填充任何特定单元格并将其导出到 PDF 输出时，所有网格线都是不可见的。

**简单表演示.java**：

```
package com.swing.table;

import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.FileOutputStream;
import java.util.HashMap;
import java.util.Map;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.border.LineBorder;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;
import javax.swing.table.TableColumnModel;

import com.itextpdf.text.Document;
import com.itextpdf.text.PageSize;
import com.itextpdf.text.pdf.PdfContentByte;
import com.itextpdf.text.pdf.PdfTemplate;
import com.itextpdf.text.pdf.PdfWriter;
import com.swing.data.BorderCellRenderer;

public class SimpleTableDemo extends JPanel implements ActionListener  {
    private boolean DEBUG = false;
    private int spacing = 6;
    private Map columnSizes = new HashMap();
    String[] columnNames = { "First Name", "Last Name", "Sport", "# of Years",
            "Vegetarian" };

    Object[][] data = {
            {
                    "Kathy",
                    "Smith",
                    "SnowboardingXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX",
                    new Integer(5), new Boolean(false) },
            { "John", "Doe", "Rowing", new Integer(3), new Boolean(true) },
            { "Sue", "Black", "Knitting", new Integer(2), new Boolean(false) },
            { "Jane", "White", "Speed reading", new Integer(20),
                    new Boolean(true) },
            { "Joe", "Brown", "Pool", new Integer(10), new Boolean(false) } };

    final JTable table = new JTable(data, columnNames);

    public SimpleTableDemo() {
        super(new GridLayout(0, 1));

        table.setPreferredScrollableViewportSize(new Dimension(500, 70));
        // table.setFillsViewportHeight(true);

        // Create the scroll pane and add the table to it.
        JScrollPane scrollPane = new JScrollPane(table);

        BorderCellRenderer cellRenderer = new BorderCellRenderer();  
        cellRenderer.setBorder(new LineBorder(Color.BLACK));

        table.setDefaultRenderer(Object.class, cellRenderer);
        table.repaint();

        // Add the scroll pane to this panel.
        add(scrollPane);

        JButton button = new JButton("Create Pdf");
        button.addActionListener(this);
        add(button);

    }

    public void actionPerformed(ActionEvent e)
    {
        print();
    }

     private void print() {
            Document document = new Document(PageSize.A4.rotate());
            try {
              PdfWriter writer = PdfWriter.getInstance(document, new FileOutputStream("D:/jTable.pdf"));

              document.open();
              PdfContentByte cb = writer.getDirectContent();

              cb.saveState();

              PdfTemplate pdfTemplate = cb.createTemplate(table.getWidth(), table.getHeight());
              Graphics2D g2 = pdfTemplate.createGraphics(table.getWidth(), table.getHeight());
              /*g2.setColor(Color.BLACK);
              g2.drawRect(x-2, y-2, table.getWidth()+2, table.getHeight()+2);*/
              table.print(g2);

              cb.addTemplate(pdfTemplate, 20, 20);
              g2.dispose();
              cb.restoreState();
            } catch (Exception e) {
              System.err.println(e.getMessage());
            }
            document.close();
          }

    /**
     Create the GUI and show it. For thread safety, this method should be
     invoked from the event-dispatching thread.
     */
    private static void createAndShowGUI() {
        // Create and set up the window.
        JFrame frame = new JFrame("SimpleTableDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // Create and set up the content pane.
        SimpleTableDemo newContentPane = new SimpleTableDemo();
        newContentPane.setOpaque(true); // content panes must be opaque
        frame.setContentPane(newContentPane);

        // Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        // Schedule a job for the event-dispatching thread:
        // creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

**BorderCellRenderer.java**：

```
package com.swing.data;

import java.awt.*;
import javax.swing.*;
import javax.swing.table.*;
import javax.swing.border.*;

/**
 * @version 1.0 03/06/99
 */
public class BorderCellRenderer extends JLabel
    implements TableCellRenderer {
  protected Border noFocusBorder; 
  protected Border columnBorder; 
  protected Font font;

  public Font getFont() {
    return font;
}

public void setFont(Font font) {
    this.font = font;
}

public BorderCellRenderer() {
    noFocusBorder = new EmptyBorder(1, 2, 1, 2);
    setOpaque(true);
  }

  public Component getTableCellRendererComponent(JTable table, Object value,
                 boolean isSelected, boolean hasFocus, int row, int column) {
      setText((value == null) ? "" : value.toString());
      Border b;
      b = BorderFactory.createCompoundBorder();
     // b = BorderFactory.createCompoundBorder(b, BorderFactory.createMatteBorder(0,0,1,0,table.getGridColor()));
     // b = BorderFactory.createCompoundBorder(b, BorderFactory.createMatteBorder(0,0,0,1,table.getGridColor()));
     /* if(row == 0 && column == 0)
      {
          setBackground(Color.CYAN);

      }
      else
      {
      setBackground(Color.WHITE);
      }
      */
      if(row==0 || column == 0)
      {
          if(row ==0 && column==0)
          {
              b = BorderFactory.createCompoundBorder(b, BorderFactory.createMatteBorder(0,1,0,0,table.getGridColor()));
              b = BorderFactory.createCompoundBorder(b, BorderFactory.createMatteBorder(1,0,0,0,table.getGridColor()));
          }
          if(row == 0)
          {
              b = BorderFactory.createCompoundBorder(b, BorderFactory.createMatteBorder(1,0,0,0,table.getGridColor()));
              setBackground(Color.CYAN);
          }
          if(column == 0)
          {
              b = BorderFactory.createCompoundBorder(b, BorderFactory.createMatteBorder(0,1,0,0,table.getGridColor()));
          }
      }
      else
      {
          b = table.getBorder();
          setBackground(Color.WHITE);
      }
      setBorder(b);

      return this;
  }

  public void setColumnBorder(Border border) {
    columnBorder = border;
  }

  public Border getColumnBorder() {
    return columnBorder;
  }
} 
```

请尝试使用上面的代码并帮助我获得带有网格线和填充单元格颜色的一对一 PDF 输出。

更新 1：- 我修改了 actionPerformed() 方法的代码，如下所示：-

```
public void actionPerformed(ActionEvent e)
    {
        int x = table.getWidth();
            int y = table.getHeight();
            BufferedImage bi = null;

    if(x>0 && y>0)
    {
     bi = new BufferedImage(x, y, BufferedImage.TYPE_INT_RGB);
    if(bi != null)
            {
                Graphics g = bi.createGraphics();
                table.paint(g);
                JOptionPane.showMessageDialog(null, new JLabel(new ImageIcon(bi)));
            }
    }

        print();
    } 
```

感谢您查看我的代码。我的要求是不显示表格标题。我不想按预期打印标题。这就是为什么我的第一行顶部边框和左侧第一列丢失的原因。为了纠正这个问题，我手动将默认网格边框添加到第一列和第一行。这使得顶部边框看起来是深灰色的。除此之外，我还必须用颜色填充单元格。当我将其打印到缓冲图像时看起来不错，但后来在 pdf 上它从下面的屏幕截图中删除了我的网格线：-

JTable 到 bufferedImage 输出 ![BufferedImage JTable 打印输出：-](../Images/6fb55f8258c8aad64e6eefd9a85856ca.png)

JTable到pdf输出 ![jTable pdf输出](../Images/c8b02ebafd73359326e8fade2ce10475.png)

抱歉，我再次发布了已关闭的线程。任何改进我的代码的好建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T18:09:59.693

使用 iText。第三方库，可帮助您转换为 pdf

```
public class JTable2Pdf extends JFrame {
private JTable table;

public JTable2Pdf() {
getContentPane().setLayout(new BorderLayout());
createTable();
}
private void createTable() {
Object[][] data = {{ "a", "b", "e", 4, false } };
String[] columnNames = { "A", "B", "C", "D", "E" };

table = new JTable(data, columnNames);

JPanel tPanel = new JPanel(new BorderLayout());
tPanel.add(table.getTableHeader(), BorderLayout.NORTH);
tPanel.add(table, BorderLayout.CENTER);

getContentPane().add(tPanel, BorderLayout.CENTER);
}

   private void print() {
Document document = new Document(PageSize.A4.rotate());
try {
  PdfWriter writer = PdfWriter.getInstance(document, new     FileOutputStream("jTable.pdf"));

  document.open();
  PdfContentByte cb = writer.getDirectContent();

  cb.saveState();
  Graphics2D g2 = cb.createGraphicsShapes(500, 500);

  Shape oldClip = g2.getClip();
  g2.clipRect(0, 0, 500, 500);

  table.print(g2);
  g2.setClip(oldClip);

  g2.dispose();
  cb.restoreState();
} catch (Exception e) {
  System.err.println(e.getMessage());
}
document.close();
}
 public static void main(String[] args) {
JTable2Pdf frame = new JTable2Pdf();
frame.pack();
frame.setVisible(true);
frame.print();
}
} 
```

# java - Eclipse，在库中定义的开放声明

> ID：12874710
> 
> 赞同：8
> 
> 时间：2012-10-13T15:50:31.870
> 
> 标签：java, eclipse

在 Eclipse 中，如果我按 F3 或打开我的一个库中的引用的声明，它会打开代码的只读副本。

起初我认为这非常有用，因为它提醒我它的库代码和更改可能会影响更多项目。但是，如果我确实想编辑，我发现必须手动查找 .java 文件是一件很痛苦的事情。

我可以：a）让它始终打开相关的 .java 文件，或者 b）一旦打开只读副本，快速进入可编辑的 .java 文件。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-13T18:46:24.087

如果您在 Eclipse 中将依赖库作为 Java 项目打开，则可以将该项目添加到构建路径中。（右键单击项目-> 属性-> java 构建路径-> 项目-> 添加）。

在*Order and Export*部分下，确保项目位于库上方。

按 F3 后，.java 文件将打开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-17T07:35:46.650

当您 ctrl+click 或按 F3 到库中的任何类时，您需要附加正确的源。只需单击附加源 -> 外部文件夹 -> 附加您正在使用的库的 src 文件夹。Eclipse 将自己找出正确的 .java 文件。

我对 struts 2.0 中的 Action 接口有同样的问题。因此，我将 src 文件夹附加到我的 struts 目录中并鲍勃你的叔叔。

# javascript - 同时更改一个图像标题和一个文本标题

> ID：12874711
> 
> 赞同：0
> 
> 时间：2012-10-13T15:50:37.343
> 
> 标签：javascript, html, css, image

我现在正在处理一个网页，其中有一个介绍性标题，该标题显示在页面的前面，并带有一个文本侧边栏。

问题是我有几个标题，由于页面包含的图像和信息的数量，我想在不同的人访问我的页面时翻阅这些宏大的故事。

为此，我现在正在运行一个 JS 脚本，它可以自动更改 Image 标头而不会出现任何问题。但是，由于我最近决定为图像添加某种描述，我现在不仅需要更改图像，还需要更改文本。

这似乎很容易，但我向你保证不是，反正对我来说也不是。

这是脚本和受其影响的 html。

**Javascript**

```
(function(){
var rotator = document.getElementById('bigImage');
var imageDir = '../images/';
var delayInSeconds = 5;
var images = ['1.png', '2.jpg', '3.jpg', '4.jpg', '5.jpg', '6.jpg', '7.png'];
var num = 0;
var changeImage = function() {
var len = images.length;
bigImage.src = imageDir + images[num++];
if (num == len)
{num = 0;} 
};
setInterval(changeImage, delayInSeconds * 1000);
})(); 
```

**HTML**

```
<div class="image-container">       
<a href="../Html/1.html"><img src="../images/1.png" height="300"    
width="650" id="bigImage";/></a>

<div id="text">
<div id="text-box">
<p></p>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T14:04:35.277

像这样的东西？

```
(function(){
  var rotator = document.getElementById("bigImage")
    , textBox = document.getElementById("text-box") //SELECT THE TEXT BOX
    , imageDir = "../images/"
    , delayInSeconds = 5
    , images = []
    , len = images.length
    , num = 0 //why this?
    , changeImage = function(delay){
      bigImage.src= imageDir + images[num++]
      textBox.innerhtml = "hello from image nr:"+num //SET TEXTBOX CONTENT
      if(num === len){
        num = 0 
      }
     }
}()) 
```

# ios - 在 Push for Segue [IOS] 中获取 NSDictionary 选定行

> ID：12874713
> 
> 赞同：0
> 
> 时间：2012-10-13T15:51:17.033
> 
> 标签：ios, dictionary

嘿伙计们，我有一系列正在阅读的字典 plist 文件。我正在使用 Push for Segue 方法将我的数据（字典）传递给下一个视图控制器。如何使用字典获取选定的行？我正在制作一个表格视图应用程序，并且我已经完成了 (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 并且它可以工作。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
NSDictionary *d = [self.model.players objectAtIndex:0]
nextVC.title = [d valueForKey:@"Player"]
nextVC.info = d
} 
```

当我使用上面的代码并使用 ObjectAtIndex:0 并指定 0 时，我可以在下一个视图控制器中提取该特定播放器的数据。但我想根据用户选择的行得到正确的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:53:50.433

[self.model.players objectAtIndex:[self.tableView indexPathForSelectedRow]];

应该这样做

# c++ - 特定文件夹保存和读取

> ID：12874714
> 
> 赞同：0
> 
> 时间：2012-10-13T15:51:24.023
> 
> 标签：c++, visual-studio-2010

我正在为 mi Advance Algorithm 课程开发游戏，但我在读取和保存时遇到问题。我想将“字段”保存在 .txt 文件中，但保存在解决方案中的特定文件夹中。我想为每个字段创建 1 个文件，并且我想在加载解决方案时读取该特定文件夹中的所有 .txt 文件。用户不得发送任何用于保存或读取的地址，这必须由程序默认完成。我实际上正在使用这个：

```
FILE* arch =fopen("Tableros.tbl","wt");
    if(arch==NULL)return; 
```

读书也是一样。但是我只能读取一个文件，并且我想检测或读取该特定文件夹上的所有 .txt 文件。任何可以提供帮助的想法或功能？我正在使用 Visual Studio 2010 C++。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:06:35.893

使用[GetCurrentDirectory()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364934%28v=vs.85%29.aspx)函数检索当前进程目录。然后在目录中使用搜索（[FindFirstFile()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)、[FindNextFile()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364428%28v=vs.85%29.aspx)等）循环检测和读取所有文件。

# jquery - 从 jQuery 调用简单的 WCF 服务 - 500 内部服务器错误

> ID：12874717
> 
> 赞同：0
> 
> 时间：2012-10-13T15:51:33.713
> 
> 标签：jquery, asp.net, ajax, json, wcf

在过去的 4 个小时里，我一直在查看我能找到的关于这个问题的任何帖子，所以我现在可能有点盲目 ;-)

我正在尝试使用 jQuery 调用一个简单的 WCF 服务。我已经使用 WebMethods 一段时间了，我正在尝试迁移一些。我正在尝试使用您可以想象的最简单的网络服务进行测试：

```
[ServiceBehavior(IncludeExceptionDetailInFaults = true)]
[ServiceContract(Namespace = "")]
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class ForumOperationService : IForumOperationService
{
    public string Horse(string prefixText, int count)
    {
        return "hestWCF";
    }
} 
```

我的 jQuery 调用：

```
 $(document).ready(function () {
            var hest;
            $.ajax({
                type: "POST",
                datatype: "application/json",
                url: "Services/ForumOperationService.svc/Horse",
                data: { prefixText: 'a', count: 10 },
                success: function (data) {
                    hest = data;
                }
            });
        }); 
```

我的 web.config 是这样的：

```
 <system.webServer>
    <behaviors>
      <endpointBehaviors>
        <behavior name="ServiceAspNetAjaxBehavior">
          <enableWebScript />
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
    <services>
      <service name="ForumOperationService">
        <endpoint address="" behaviorConfiguration="ServiceAspNetAjaxBehavior"
            binding="webHttpBinding" contract="IForumOperationService" />
      </service>
    </services>
    .... (more stuff) 
```

在 Firebug 中，我收到以下错误：

> *NetworkError：500 内部服务器错误 - `http://localhost:21599/Client/Services/ForumOperationService.svc/Horse`*

有任何想法吗？

**更新**：

刚刚运行 WCF 测试客户端，得到了这个错误：

> ForumOperationService 类型的服务类既定义了一个ServiceContract，又从IForumOperationService 类型继承了一个ServiceContract。契约继承只能在接口类型之间使用。ÿ 如果一个类用 ServiceContractAttribute 标记，它必须是层次结构中唯一具有 ServiceContractAttribute 的类型。ÿ考虑将 IForumOperationService 类型上的 ServiceContractAttribute 移动到 IForumOperationService 类型实现的单独接口。

明天会跟进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:00:39.713

使用 WCFTestClient(.exe) 测试该方法并确认该方法工作正常，否则您将收到实际错误。

如果您的方法参数足够简单，WCFTestClient 是在从应用程序代码开始使用它之前进行测试的快速方法。

# php - Cakephp 控制器别名不能完全工作

> ID：12874722
> 
> 赞同：2
> 
> 时间：2012-10-13T15:52:07.030
> 
> 标签：php, cakephp

我有一个与[这个](https://stackoverflow.com/questions/11925578/cakephp-controller-alias)问题相关的新问题，但由于这些问题根本不匹配，我正在创建这个新主题。但它是一个很好的参考。

* * *

我改变了主意`logs`，这`log`很好`logs`。但是我有另一个名为 的控制器`WikisController`，在这种情况下，我真的很想更改 URL。我只是讨厌 URL 将是`example.com/wikis/subject.html`，我希望它是`example.com/wiki/subject.html`。它更干净，并且该约定现在与其他也称为 的站点 100% 匹配`wiki`，而不是`wikis`。`WikisController`但是，由于`CakePHP`约定，我希望调用控制器。

好吧，现在真正的问题来了。我目前正在使用以下路由`Config/routes.php`：

```
Router::connect('/wiki/:action/*', array('controller' => 'wikis'));
Router::connect('/wiki/*', array('controller' => 'wikis')); 
```

这是[另一个主题](https://stackoverflow.com/questions/11925578/cakephp-controller-alias)中的解决方案使用的一段代码。但现在我遇到了一点麻烦。好吧，这并不是一个大问题，因为一切正常。但我不喜欢这个网址。

当我从以下创建链接时`example.com/wiki/edit.html`：

```
echo $this->Html->link('Wiki overview', array(
    'controller' => 'wikis',
    'action' => 'index',
    'ext' => 'html'
)); 
```

它正在创建一个`example.com/wiki/index.html`完全正常的链接并且它可以工作，但我不想显示`index.html`，我只是不想。它是 url 中的一个额外词，用户不需要了解他在哪里。

由于我之前遇到的一个小错误，我正在使用`link`and`controller`键创建。`action`当我没有指定 时`action`，它显然会创建一个`example.com/edit.html`我不想要的链接。所以我必须将`action => index`密钥添加到数组中。我不确定这是否是一个真正的错误，但这不重要。`Index = index`没有任何改变。我确信我的 URL 指向正确的页面是一件好事，因此添加`action`对我来说不是问题。

*只是为了注意：*

当我以与上面完全相同的方式`example.com/flights/index.html`从页面创建链接时，它会从 url`example.com/flights/add.html`中删除该部分，并简单地创建一个更清晰的 url。`/index``example.com/flights.html`

所以它必须与路由有关，但我不知道是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T18:39:10.327

如果我理解正确，那么您将需要一条连接`/wiki`到控制器`index`操作的路由：

```
Router::connect('/wiki', array('controller' => 'wikis', 'action' => 'index'));
Router::connect('/wiki/:action/*', array('controller' => 'wikis'));
... 
```

# c# - 我应该通过什么参数来在 c# 中获取我的工作站 ip

> ID：12874724
> 
> 赞同：-1
> 
> 时间：2012-10-13T15:52:29.790
> 
> 标签：c#, console-application

> **可能重复：**
> [如何在 C# 中获取我自己的 IP 地址？](https://stackoverflow.com/questions/1069103/how-to-get-my-own-ip-address-in-c)

在控制台应用程序中，我需要传递我机器的 ip，那么我需要传递什么参数？

```
var myIp = Convert.ToString("");

if (search = value1.Contains(myIp))
{
    foo..
    foo..
} 
```

那么我应该发送什么参数，就像我正在使用`IPAddress`但没有给出我的 ip 一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:57:54.160

以下是获取计算机 IP (IPv4) 地址的方法（您可能有多个）：

```
var myAddresses = Dns.GetHostEntry(Dns.GetHostName())
                     .AddressList
                     .Where(e => e.AddressFamily == AddressFamily.InterNetwork); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:37:58.487

我不会使用 Dns.GetHostEntry() 因为这是一个 DNS 网络调用，在某些情况下它可能会失败。如果是我，我不会通过 DNS 系统查询，我只是使用 WMI 来读取本地硬件上的数据。这是执行此操作的帖子；

[http://kodefumaster.wordpress.com/2009/05/01/getting-the-network-adaptor-mac-ip-address-with-wmi/](http://kodefumaster.wordpress.com/2009/05/01/getting-the-network-adaptor-mac-ip-address-with-wmi/)

请记住，每个网卡也可能有多个 IP 地址。

[更新]

...或者更简单， System.Net.NetworkInformation 正如您已经在评论中指出的那样。看这里;

[如何以编程方式获取计算机的本地网络 IP 地址？（C＃）](https://stackoverflow.com/questions/151231/how-do-i-get-the-local-network-ip-address-of-a-computer-programmatically-c)

但除非您特别愿意，否则我不会使用 DNS。

# c# - Uploading an Image Type Application/Octet-Stream from android phone

> ID：12874725
> 
> 赞同：0
> 
> 时间：2012-10-13T15:52:29.367
> 
> 标签：c#, asp.net, file-upload, content-type

I have a aspx page that alows a user to upload an image for their account. It tosses an error when i try to fill the form out from a android phones browser.

I wrote out the type of file my page says my phone is sending for uploading. Its this ... Application/Octet-Stream

How do i accept this file? I tried this code below with out sucess.

```
 var FileExtension = Path.GetExtension(FileUpload1.PostedFile.FileName);

                        //FileUpload1.PostedFile.ContentType == 

                        if (FileUpload1.PostedFile.ContentType.ToLower() == "image/jpg" ||
                        FileUpload1.PostedFile.ContentType.ToLower() == "image/jpeg" ||
                        FileUpload1.PostedFile.ContentType.ToLower() == "image/pjpeg" ||
                        FileUpload1.PostedFile.ContentType.ToLower() == "image/gif" ||
                        FileUpload1.PostedFile.ContentType.ToLower() == "image/x-png" ||
                        FileUpload1.PostedFile.ContentType.ToLower() == "image/png" ||
                        FileUpload1.PostedFile.ContentType.ToLower() == "Application/Octet-Stream")

                        { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T16:55:45.763

Part 1 to your problem is you are making a poor string comparison. The last comparison compares a lower-cased string to a string that has uppercase letters. Try this:

```
string[] sTypes = { "image/jpg", "image/jpeg", "image/pjpeg", "image/gif", "image/x-png",
    "image/png", "Application/Octet-Stream" };
bool bIsMatch = false;
foreach (string sType in sTypes)
{
    if (String.Compare(sType, FileUpload1.PostedFile.ContentType, true) == 0)
        bIsMatch = true;
}
if (bIsMatch)
{
    //Allow upload
} 
```

Like I mentioned in your OP comments though, I really don't see the point in the content type filter if you are going to allow application/octet-stream which would allow someone to upload a virus or any other executable and a whole slew of other file types.

# javascript - 兄弟姐妹给对象# 没有方法“每个”

> ID：12874726
> 
> 赞同：1
> 
> 时间：2012-10-13T15:52:33.023
> 
> 标签：javascript, jquery

我在这里想念什么？

作为对[动态生成的下拉菜单中的选项如何更改的答案的一部分？](https://stackoverflow.com/questions/12872713/how-can-i-change-options-in-dropdowns-if-it-is-generated-dynamically/12872774#comment17428921_12872774)

我在 onchange 中有一个问题。我想将所有兄弟值设置为更改后选择的值

```
$("select").on("change",function() {
  var idx=$(this).val();
  console.log($(this).attr("id"),$(this).val())
  $(this).siblings("select").each(function() {
     $(this).val(idx);
  });
}); 
```

这是[JSFIDDLE中生成的代码](http://jsfiddle.net/mplungjan/wPyHc/)

我见过

[当其中一个更改时，我如何获得所有其他下拉列表的值](https://stackoverflow.com/questions/896009/how-do-i-get-the-value-of-all-other-dropdowns-when-one-of-them-is-changed)

但我更愿意找到我的错误的原因

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T15:56:32.810

您正在将该`val`方法用作属性。

```
var idx=$(this).val;
//            ----^ 
```

[http://jsfiddle.net/Vr5Je/](http://jsfiddle.net/Vr5Je/)

您也可以使用该`val`方法代替`each`：

```
$("select").on("change", function() {
    $(this).siblings("select").val(this.value);
}); 
```

[http://jsfiddle.net/Pq2vq/](http://jsfiddle.net/Pq2vq/)

# c# - 局部视图返回空模型

> ID：12874731
> 
> 赞同：1
> 
> 时间：2012-10-13T15:52:55.077
> 
> 标签：c#, asp.net-mvc, razor

现在我敢打赌，这是一个经常发生的问题，我似乎找不到任何与之相关的东西，或者注意到自己有什么问题。底部提供的视图始终`foreach`在线返回 null。

我正在制作一个简单的货币列表。

模型：

```
public class Currency
{
    public int ID { get; set; }
    public string Name { get; set; }
    public string Sign { get; set; }
    public float BuyValue { get; set; }
    public float MidValue { get; set; }
    public float SellValue { get; set; }

    public string CurrencyIcon { get; set; }

    [DisplayFormat(DataFormatString = "{0:dd MMM yyyy}")]
    public DateTime DateCreated { get; set; }
} 
```

它应该以几种不同的方式发布为部分视图。例如，将获得所有这些的部分视图（今天），以及将获得随机 6 的部分视图（今天也是）。

我现在正在做第一部分，所有这些，今天。

控制器

```
public ActionResult FrontPagePartial()
{
    DateTime today = DateTime.Now.Date; //i'm filtering it by date only
    var currencies = db.Currencies.Where(c => c.DateCreated.Equals(today));

    return View(currencies);
} 
```

我已经检查过它是否正常工作的过滤。所以我的观点是这样的：

```
@model IEnumerable<CurrencyList.Models.Currency>

<div id="currencyList_Partial">
    <div id="bg_currencyList_Partial">
        <img src="@Url.Content("~/Content/Resources/img.png")" />
    </div>
    <div id="header_currencyList_Partial">
        <div style="padding: 10px;">
            <p style="font-size: 18px;">
                Currency List<br />
                <span class="header_currencyList_Partial_Day">FOR TODAY</span>
            </p>
            <p class="header_currencyList_Partial_Link" >
                <a href="#">DETAILS ></a>
            </p>
        </div>
        <div id="table_currencyList">
            @foreach (var item in Model)
            { 
                <table>
                    <tr>
                        <td style="text-align: center;"><img src='@item.CurrencyIcon' title='@item.Sign' /><p style="font-size: small;">@Html.DisplayFor(modelItem => item.Name)</p><p>@Html.DisplayFor(modelItem => item.Sign)</p></td>
                        <td style="text-align: center;">@Html.DisplayFor(modelItem => item.BuyValue)</td>
                        <td style="text-align: center;">@Html.DisplayFor(modelItem => item.MidValue)</td>
                        <td style="text-align: center;">@Html.DisplayFor(modelItem => item.SellValue)</td>
                    </tr>
                </table>
            }
        </div>
    </div>
</div> 
```

父视图

```
@{
    ViewBag.Title = "Currency List Home Page";
}

@section HeadSection{
    <link rel="stylesheet" href="@Url.Content("~/Content/layerslider.css")" type="text/css" media="screen" />
    <link rel="stylesheet" href="@Url.Content("~/Content/defaultskin/skin.css")" type="text/css" media="screen" />
    <noscript>
        <link rel="stylesheet" href="@Url.Content("~/Content/noscript.css")" type="text/css" media="screen" />
    </noscript>
}

@section ScriptSection{
    <script src="@Url.Content("~/Scripts/jqueryui.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/plugins.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/page.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/layerslider.kreaturamedia.jquery.js")" type="text/javascript"></script>
}
<div id="content">
    <div id="statusbar"></div>
    <div id="slider">
        <div id="layerslider">
            <div class="ls-layer" style="slidedelay: 3000">
                <img class="ls-bg" src="@Url.Content("~/Content/images/slider_gallery/slide1_layer1.png")" alt="layer" />
                <img class="ls-s2" src="@Url.Content("~/Content/images/slider_gallery/behind_text_layer.png")" alt="sublayer" style="durationin: 0; top: 247px;/*easingin: easeOutElastic*/" />
                <img class="ls-s3" src="@Url.Content("~/Content/images/slider_gallery/text_layer1.png")" alt="sublayer" style="durationin: 2000; top: 255px;left: 15px; easingin: easeOutElastic " />
            </div>
            <div class="ls-layer" style="slidedelay: 3000">
                <img class="ls-bg" src="@Url.Content("~/Content/images/slider_gallery/slide2_layer1.png")" alt="layer" />
                <img class="ls-s2" src="@Url.Content("~/Content/images/slider_gallery/behind_text_layer.png")" alt="sublayer" style="durationin: 0; top: 247px;/*easingin: easeOutElastic*/" />
                <img class="ls-s3" src="@Url.Content("~/Content/images/slider_gallery/text_layer1.png")" alt="sublayer" style="durationin: 2000; top: 255px;left: 15px;easingin: easeOutElastic " />
            </div>
            <div class="ls-layer" style="slidedelay: 3000">
                <img class="ls-bg" src="@Url.Content("~/Content/images/slider_gallery/slide3_layer1.png")" alt="layer" />
                <img class="ls-s2" src="@Url.Content("~/Content/images/slider_gallery/behind_text_layer.png")" alt="sublayer" style="durationin: 0;top: 247px;" />
                <img class="ls-s3" src="@Url.Content("~/Content/images/slider_gallery/text_layer1.png")" alt="sublayer" style="durationin: 2000; top: 255px; left: 15px; easingin: easeOutElastic " />
            </div>
        </div>
    </div>
    <div id="converter">
        <h2>CONVERTER</h2>
        <p class="shadowedText">
            VALUE:
        </p>
        <p>
            <input type="text" id="tb11" class="tb11" />
        </p>
        <p class="shadowedText">
            FROM CURRENCY
        </p>
        <div class="select1 select1p">
                <select id="select1">
                    <option>EUR - EURO</option>
                    <option> $  - DOLLAR</option>
                </select>
            <span class="selectArrow"><img src="@Url.Content("~/Content/images/select_arrows.png")" /></span>
        </div>
        <p class="shadowedText">
            TO CURRENCY
        </p>
        <div class="select1 select1p">
                <select id="select2">
                    <option> $ - EURO</option>
                    <option> EURO  - DOLLAR</option>
                </select>
            <span class="selectArrows"><img src="@Url.Content("~/Content/images/select_arrows.png")" /></span>
        </div>
        <div class="select1p addMargin">
            <span class="boldResult">100 EUR = 11710.55 $</span><br />
            <span class="lightResult">100 $ = 0.84882 EUR</span>
        </div>
    </div>

</div>

<div id="lowerContent">
    <div id="blog"><img src="@Url.Content("~/Content/images/vesti.png")" /></div>

    //This is where Partial View is rendered
    <div id="listC">@Html.Partial("FrontPagePartial")</div>

</div>

<div id="portals">

</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T03:04:11.000

`<div id="listC">@Html.Partial("FrontPagePartial")</div>`

这是尝试使用未定义的父视图模型来呈现局部视图 FrontPagePartial。

`public ActionResult FrontPagePartial()`

这将创建一个操作，以便您可以执行 siteurl/controller/FrontPagePartial

* * *

你需要做的是

`<div id="listC">@Html.Partial("FrontPagePartial", currencies)</div>`

如果你不介意 ViewBag，你可以在 Action 方法中设置 ViewBag.Currencies 和

`<div id="listC">@Html.Partial("FrontPagePartial", ViewBag.Currencies)</div>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T07:33:16.603

@Html.Partial 只是使用父级拥有的模型直接从文件视图（在 Shared 文件夹中，而不是通过控制器中的 FrontPagePartial 方法）呈现 html 部分。在您的情况下，Razor 尝试使用父视图中的模型，但显然您从未定义过它。这就是空对象的原因

```
@foreach (var item in Model) { ... } 
```

您想调用返回另一种对象模型的局部视图；@Httml.Partial 和 @Html.RenderPartial 都无法做到这一点。两种解决方案：

**阿贾克斯调用：**

```
$(document).ready(function() { 
    $.get('@Url.Action("FrontPagePartial")',null,function(data) {
        $('#listC').html(data);
    });
}); 
```

**使用 Html.RenderAction 或 Html.Action：**

```
<div id="listC">@Html.RenderAction("FrontPagePartial")</div> 
```

不要忘记更改 FrontPagePartial 方法中的返回值。如果没有这个，结果将是布局页面内的货币列表（您返回的是一个简单的页面，而不是部分视图）：

```
public ActionResult FrontPagePartial()
{
....
return PartialView(currencies);
} 
```

# objective-c - GLubyte 和 GL_UNSIGNED_BYTE 有区别吗？

> ID：12874737
> 
> 赞同：2
> 
> 时间：2012-10-13T15:53:53.173
> 
> 标签：objective-c, opengl, opengl-es

我正在使用以下代码渲染交错的 vbo，效果很好。

```
 glVertexPointer(3, GL_FLOAT, sizeof(InterleavedVertexData), (GLvoid*)((char*)0));
    glNormalPointer(GL_FLOAT, sizeof(InterleavedVertexData), (GLvoid*)((char*)0+3*sizeof(GLfloat)));
    glColorPointer(4, GL_UNSIGNED_BYTE, sizeof(InterleavedVertexData), (GLvoid*)((char*)0+6*sizeof(GL_UNSIGNED_BYTE))); 
```

当我将 glColorPointer 的指针参数更改为使用**GLubyte**时，我看不到屏幕上呈现的任何内容？我也在我的结构中将颜色定义为 GLubyte。

```
 glColorPointer(4, GL_UNSIGNED_BYTE, sizeof(InterleavedVertexData), (GLvoid*)((char*)0+6*sizeof(GLubyte))); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-13T16:51:20.097

`GLubyte`是一种类型。`GL_UNSIGNED_BYTE`是一个整数常量，通常用于指示您将`GLubyte`在指针中传递 a。

`sizeof(GLubyte)`根据定义，始终为 1。Take`sizeof(GL_UNSIGNED_BYTE)`通常会返回 4 或 8，因为它是一个整数常量，并且其大小与系统的整数大小相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T16:54:33.320

`GL_UNSIGNED_BYTE`是一个符号常量，而`GLubyte`是一个类型。GLubyte 通常实现为`unsigned char`; 您可以通过查看您的`gl.h`.

您应该`GL_UNSIGNED_BYTE`在 OpenGL 方法中使用来指定您传递的数据类型并用于`GLubyte`计算数据的大小。

# c# - 如何使用 CodeDOM 初始化对象？

> ID：12874738
> 
> 赞同：5
> 
> 时间：2012-10-13T15:53:54.017
> 
> 标签：c#, codedom

我需要像下面这样初始化我的对象：

```
var obj = new EduBranch {
    Id = model.Id,
    WorklevelId = model.WorklevelId,
    EdulevelId = model.EdulevelId,
    Title = model.Title,
    StartEduYearId = model.StartEduYearId,
    EndEduYearId = model.EndEduYearId,
}; 
```

但在 CodeDOM 我只能找到：

```
var objectCreate1 = new CodeObjectCreateExpression("EduBranch", 
    new CodeExpression[]{}); 
```

这是使用括号而不是括号来初始化。有没有为此的 CodeDOM 方法？（我已经使用 stringBuilder 制作了我的代码，但我正在寻找一种 CodeDOM 方法）谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T17:03:57.450

CodeDom 目前不支持[对象初始化器](http://msdn.microsoft.com/en-us/library/bb384062.aspx)（或集合初始化器，就此而言）。

[由于其他技术（例如T4 模板](http://msdn.microsoft.com/en-us/library/bb126445.aspx)）， CodeDom 多年来已经失宠。

也就是说，因为这条线：

```
var obj = new EduBranch {
    Id = model.Id,
    WorklevelId = model.WorklevelId,
    EdulevelId = model.EdulevelId,
    Title = model.Title,
    StartEduYearId = model.StartEduYearId,
    EndEduYearId = model.EndEduYearId,
}; 
```

实际上与以下内容相同：

```
var obj = new EduBranch();

obj.Id = model.Id;
obj.WorklevelId = model.WorklevelId;
obj.EdulevelId = model.EdulevelId;
obj.Title = model.Title;
obj.StartEduYearId = model.StartEduYearId;
obj.EndEduYearId = model.EndEduYearId; 
```

您可以使用 CodeDOM 生成上述内容，并获得相同的

# c - 仅给定指针交换字符

> ID：12874739
> 
> 赞同：0
> 
> 时间：2012-10-13T15:53:55.793
> 
> 标签：c, string, pointers, swap

> **可能重复：**
> [为什么在写入字符串时会出现分段错误？](https://stackoverflow.com/questions/164194/why-do-i-get-a-segmentation-fault-when-writing-to-a-string)

如果我有一个指针并且我知道两个字符的索引，我将如何交换字符（我实际上并没有分配一个数组）

IE

`char *str = "hello"`我知道并且我想交换索引 0 和 4 的“h”和“o”，然后也返回指针。

我习惯了

```
temp = array[i];
array[i] = array[j];
array[j] = temp; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T15:56:17.983

好吧，您不能使用指向字符串文字的指针。字面量是不可变的。坚持你一直做的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T15:55:34.170

```
temp = array[i];
array[i] = array[j];
array[j] = temp; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T17:11:57.683

以下声明：

```
char *str = "hello"; 
```

应该是，警告您不安全的行为：

```
const char *str = "hello"; 
```

因为根据 C 标准，尝试修改字符串是一种未定义的行为，所以您应该使用数组。

```
char str[] = "hello"; 
```

然后，交换数组的元素既简单又安全：

```
char tmp = str[0];
str[0] = str[4];
str[4] = tmp; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T22:06:33.887

一些操作系统/编译器允许您修改字符串文字，主要是 AIX 5.1。

如果修改代码中的字符串文字，那么让您的代码跨平台变得很痛苦，因为您必须重写代码才能为 Linux 编译。

# java - Java中的多维数组排序

> ID：12874743
> 
> 赞同：0
> 
> 时间：2012-10-13T15:54:26.313
> 
> 标签：java, graph, sorting

请问有没有办法如何以以下方式在java中对多维数组进行排序？

让我们有这个数组结构，

```
int graph[][] = new int[edges][3]; 
```

其中每条边都有两个坐标及其权重。我需要根据每条边的权重对整个数组进行排序。仅供参考，我需要它来查找生成树。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T16:01:51.680

你可以使用这样的东西：

```
Arrays.sort(graph, new Comparator<Integer[]>() {
             @Override
             public int compare(final Integer[] entry1, final Integer[] entry2) {
              // DO SORTING STUFF HERE
            } }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T16:49:15.420

我猜你在使用`Arrays.sort`和`Comparator`使用`array of array`. 它的工作方式类似于您在普通数组排序中所做的工作，只是稍作改动。

这就是你在你的情况下将如何做到这一点。你需要一个`Comparator`数组`Integer[]`： -

```
 Integer graph[][] = new Integer[2][3];
    graph[0][0] = 2;
    graph[0][1] = 4;
    graph[0][2] = 3;

    graph[1][0] = 0;
    graph[1][1] = 1;
    graph[1][2] = 2;

    Arrays.sort(graph, new Comparator<Integer[]>() {
        @Override
        public int compare(Integer[] o1, Integer[] o2) {

            return o1[2] - o2[2];
        }
    });

    for (Integer[] outerArr: graph) {
        for (Integer val: outerArr) {
            System.out.print(val + " ");
        }
        System.out.println();
    } 
```

印刷： -

```
0 1 2 
2 4 3 
```

# java - 如何让职业指导系统智能化

> ID：12874745
> 
> 赞同：7
> 
> 时间：2012-10-13T15:54:35.557
> 
> 标签：java, algorithm, web, artificial-intelligence, drools

最后我正在做我最后一年的项目，这是*基于智能网络的职业指导系统*，我系统的核心功能是

# 推荐系统

基本上，我们的推荐系统会通过兴趣测试和用户的学习记录来仔细检查用户的偏好，并在此检查信息的基础上为用户提供最佳的职业选择，例如 BS 计算机科学等课程。

*   推荐系统的输入将是学生证书和兴趣测试，兴趣测试将根据用户的学术历史和他在测试中给出的答案给出问题，所以基本上测试不会向每个人提出相同的问题将根据系统定义的规则实时决定向哪个用户询问什么。

*   它的输出将是根据兴趣测试决定的字段选项。

# 问题

当我在委员会面前为我的范围辩护时，他们说“这是简单*的 if-else* ”这个系统并不智能。
我的问题是可以使用哪种人工智能技术或算法来使这个系统变得智能。我搜索了很多，但与我的系统相关的论文更加肤浅，他们只是强调想法而不是方法论。
我想用 Java 完成我所有的工作。如果答案是特定于技术的，那就太好了。
如果我的问题与 SO Q&A 标准无关，你们可以将我的问题转移到任何其他 stackexchange 站点。

## 编辑

从答案中得到一些想法后，我想用基于规则和推理引擎来实现专家系统。现在我想在技术方面更清楚地实现基于规则的引擎。经过搜索，我发现 Drools 是最好的，但它是否也与 Web 应用程序兼容？而且我还发现 Tohu 是最好的动态表单生成器（因为这也是我的项目需要的）。我可以使用 tohu 和口水来制作我的 Web 应用程序吗？实现这种系统是否容易？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T17:31:42.900

1.  如果你有大量的问题，每个问题都可以代表一个*特征*。假设您将拥有很多功能，**则很难找到满足条件的一系列 if-else 语句**（回想一下，带有`n`问题的完整树将有`2^n`“叶子” - 代表`2^n`这些问题的可能答案，假设每个问题是是/否问题）。

2.  由于以上的硬编程对于足够大（并且可能是现实的大小）是不可能的`n`- 有一个*启发式解决方案*的地方之一是[机器学习](http://en.wikipedia.org/wiki/Machine_learning)，特别是 -[**分类**问题](http://en.wikipedia.org/wiki/Statistical_classification)。你可以让一些人回答你的调查，让“专家”告诉他们什么是最好的职业，然后让算法为一般问题找到分类器（如果你想自动将其转换为一系列是-否问题，可以通过决策来完成树，以及像[C4.5](http://en.wikipedia.org/wiki/C4.5_algorithm)这样的算法来创建树）。

3.  确定哪些问题实际上是相关的也很重要？性别相关吗？身高有关系吗？这些问题也可以使用带有[**特征选择**](http://en.wikipedia.org/wiki/Feature_selection)算法的 ML 算法来回答（其中之一是[PCA](http://en.wikipedia.org/wiki/Principal_component_analysis)）

4.  关于“技术”方面——java中有一个很好的库——叫做[**Weka**](http://www.cs.waikato.ac.nz/ml/weka/)，它实现了许多分类算法。

5.  您可以提出一个问题（并尝试在您的项目中找出）**哪种分类算法最适合这个问题？**一些可能性是上面提到的 C4.5、[朴素贝叶斯](http://en.wikipedia.org/wiki/Naive_Bayes_classifier)、[线性回归](http://en.wikipedia.org/wiki/Linear_regression)、[神经网络](http://en.wikipedia.org/wiki/Neural_network)、[KNN](http://en.wikipedia.org/wiki/K-nearest_neighbor_algorithm)或[SVM](http://en.wikipedia.org/wiki/Support_vector_machine)（这通常对我来说是最好的）。您可以尝试并支持您决定使用哪种算法进行统计研究和更好的[统计证明。](http://en.wikipedia.org/wiki/Statistical_hypothesis_testing)[Wilcoxon 测试](http://en.wikipedia.org/wiki/Wilcoxon_signed-rank_test)是这方面的标准。

* * *

**编辑：**关于第 2 点的更多细节：

*   在这里，“专家”可以是来自 HR 领域的人类分类器，它读取特征并对答案进行分类。有时获取这些数据（通常称为“培训数据”）既困难又广泛，如果您的大学有 IE 或 HR 教员，也许他们会愿意提供帮助。
*   这个想法是：聚集一群首先回答你的调查的人。然后，将其交给人类分类器（“专家”），该分类器将根据他的回答选择最适合此人的职业。专家给出分类的数据是学习算法的输入，其输出将是一个分类器。
*   分类器本身就是一个函数，它给出调查的答案 - 预测进行这项调查的人的“分类”（建议的职业）是什么。
*   请注意，一旦你有了一个分类器——你不再需要维护训练数据，单独的分类器就足够了。但是，您应该有问题列表，这些问题的答案将是提供给分类器的功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T18:35:31.467

你所要做的就是创建一个简单的学习系统：

1.  更改您的论文术语，将其描述为“学习最好的职业”，而不是使用“智能”一词。学习是人工智能的一种形式。
2.  建立培训制度。为此，向已经有职业的人提供问卷，并提出问题以了解他们对自己的职业的满意度。这样一来，您的系统就可以训练什么是好的职业匹配，什么是不好的匹配。
3.  选择一个学习系统来吸收来自 (2) 的数据。例如，一个想法来源可能是最近的这篇论文：http://journals.cluteonline.com/index.php/RBIS/article/download/4405/4493。乘积和网络是人工智能的前沿，并且很好地适用于类似专家系统的问题。

最后，尝试改变您的技术，使其针对您的问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T07:39:21.140

[在我的最后一个项目中，我对Jena RDF](http://jena.apache.org/documentation/rdf/index.html)推理引擎有了一些经验。基本上，你用它做的就是创建一种知识库，其中包含“如果用户选择了这个答案，他就具备这种素质”和“如果用户具备这些素质，他可能适合这份工作”之类的规则。将答案添加到系统中可以让您查询他的当前状态并相应地调整问题。用它创建概念证明非常容易，比一堆 if-else 更容易，如果你的教授喜欢 prolog-ish 风格的东西，他们会喜欢它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T18:06:21.190

程序永远不会比编写程序的人更聪明。所以，我会首先使用已经构建和开源的集体智慧。

将您的一组已知数据点作为输入传递给 Apache Mahout 的[PearsonCorrelationSimilarity](https://builds.apache.org/job/Mahout-Quality/javadoc/org/apache/mahout/cf/taste/impl/similarity/PearsonCorrelationSimilarity.html)，并使用输出来预测最匹配的课程。除了开源和可扩展之外，您还可以记录结果并将其反馈给系统，以随着时间的推移提高准确性。很难达到这种性能水平，因为调整一个开箱即用的算法或用你自己的算法替换它比处理一堆 if else 条件要容易得多。

我建议读这[本书](https://rads.stackoverflow.com/amzn/click/com/1935182684)。它包含一个如何使用 PearsonCorrelationSimilarity 的示例。

Mahout 还内置了推荐算法，例如[NearestNeighborClusterSimilarity](https://builds.apache.org/job/Mahout-Quality/javadoc/org/apache/mahout/cf/taste/impl/recommender/NearestNeighborClusterSimilarity.html) ，可以进一步简化您的解决方案。

书中有一个很好的入门代码。您可以在此基础上进行构建。

学生证书、兴趣测试问题和答案是输入。职业选择是您可以与输入相关联的输出。现在这是一种非常简单的方法，但一开始可能没问题。最终，您将不得不应用 Amit 建议的分类器技术，而 Mahout 也可以帮助您。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-13T21:41:42.460

正如@amit 建议的那样，贝叶斯分析可以为您提供下一个问题的指导。动态测试的另一个缺陷是人为的阈值（“如果你的分数是 28，你就属于这个类别，如果你的分数是 27，你不是”），模糊逻辑可以帮助解决这个问题。模糊逻辑的另一个好处是添加新类别相对容易，因为只要求领域专家提供定性评估，而不是定量阈值。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-17T12:09:51.697

Drools 可以通过网络使用，但要小心；它可能有点难以配置，并且可能对您的应用程序造成严重的过度杀伤。它是一种“企业”类型的解决方案，专注于规则管理，而不是规则执行。

Drools 是一个“IF-THEN”系统，几乎所有规则引擎都使用 Rete 算法。 [http://en.wikipedia.org/wiki/Rete_algorithm](http://en.wikipedia.org/wiki/Rete_algorithm) - 所以如果你最初的问题是关于如何不使用 IF-THEN 系统，那么 Drools 不是正确的选择。现在，Drools 的 Solver 和 Planner 部分不是 IF-THEN 算法，但这不是主要的 Drools 算法。

也就是说，对于您的应用程序来说，这似乎是一个合理的选择。只是不要期望那些自认为是专家的人认为它是一个“智能”系统。规则引擎通常用于编纂（即制作软件）业务规则和法规，例如“您是否应该获得抵押贷款批准”或“您的汽车保险费是多少”等等。“你应该做什么工作”是同样的合理应用。

如果您想添加更多类似智能的 AI，这里有一些想法

*   使用机器学习从用户那里获得关于早期推荐的反馈。因此，如果有人喜欢或讨厌某个建议，请将其重新添加为该人的特征。您现在正在做一些基本的反馈/强化学习（贝叶斯、神经网络），以尝试更好地将人分类为职业。

*   考虑你问这个人的问题。你需要问所有的问题吗？如果您可以根据他们的回答来改变问题的流程（通过估计他们是什么样的人），那么您正在尝试学习为推荐提供最有用知识的一系列问题。

如果您想要特定的软件，请查看 Weka [http://www.cs.waikato.ac.nz/ml/weka/](http://www.cs.waikato.ac.nz/ml/weka/) - 它有许多很棒的分类算法。它是一个 Java 库，因此您可以轻松地在 Web 应用程序中使用它。

祝你好运。

# android - 线性布局间距不正确

> ID：12874746
> 
> 赞同：2
> 
> 时间：2012-10-13T15:54:36.737
> 
> 标签：android, xml, layout

嘿，我在 android xml 中遇到了这些线性布局的问题。最初我以相对布局进行操作，效果很好，但经过一些研究后，我发现滚动视图内的相对布局按理说是行不通的。所以现在经过多次调整，我的 imageview 出现了，但在它的上方和下方都有很大的边距，我的 textview 甚至没有显示，除了它应该在图形编辑器中的位置而是空白。

那怎么了？我什至应该使用线性布局吗？

这大概是它应该看起来的样子[http://www.mediafire.com/view/?z945tz2vrb2x46t](http://www.mediafire.com/view/?z945tz2vrb2x46t)

这就是在 Abdul 和 Ralgha 的帮助以及设置基本线性布局的高度以包装内容之后的样子[http://www.mediafire.com/view/?px17q2z3yyeo8az](http://www.mediafire.com/view/?px17q2z3yyeo8az)

谢谢

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/LinearLayout1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        >
        <TextView 
            android:id="@+id/today"
            android:src="@string/today"
            android:textSize="30dp"
            android:layout_weight="1"
            android:layout_height="wrap_content"
            android:layout_width="fill_parent"
            />
        <ImageView
            android:id="@+id/image1"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/weeklylist_blocks"
            />

     </LinearLayout>
</ScrollView>

</LinearLayout>

`![screwed up layout][1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T15:58:46.713

```
android:layout_weight="1" 
```

可能是你的问题的原因

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:03:28.520

现在不要担心体重，把它去掉。在您的 TextView 中，将“android:src”更改为“android:text”（自然不带引号）。如果仅此一项不能解决问题，请删除 textSize 行，看看会发生什么。如果可行，那么您可以开始使用尺寸（如果需要，还可以使用重量）。

此外，textSize 应该以 sp 而不是 dp 给出。sp 用于文本， dp 用于其他所有内容，尽管这不是导致您的问题的原因。

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/LinearLayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        >
        <TextView 
            android:id="@+id/today"
            android:textSize="30sp"
            android:layout_height="wrap_content"
            android:layout_width="match_parent"
            android:text="@string/today"
            />
        <ImageView
            android:id="@+id/image1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:src="@drawable/weeklylist_blocks"
            />

    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T18:39:51.160

它的作用就像魅力一样，使用以下编码来实现您的目标：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:gravity="center_vertical"
android:orientation="vertical" >

<ScrollView
android:id="@+id/scrollView1"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:layout_gravity="center_horizontal"
android:fillViewport="true" >

<LinearLayout
    android:id="@+id/LinearLayout1"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_gravity="center_horizontal"
    android:orientation="vertical" >

    <TextView 
        android:id="@+id/today"
        android:src="@string/today"
        android:textSize="30sp"
        android:layout_height="wrap_content"
        android:layout_width="fill_parent"
        android:text="@string/today"
        />

    <ImageView
        android:id="@+id/image1"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:contentDescription="@string/nissan"
        android:src="@drawable/weeklylist_blocks" />

 </LinearLayout>
</ScrollView>

</LinearLayout> 
```

# objective-c - 自定义 CALayer 分配后 UIButton 不检测触摸

> ID：12874752
> 
> 赞同：0
> 
> 时间：2012-10-13T15:55:00.037
> 
> 标签：objective-c, ios, uibutton, calayer

除非下面的委托分配被注释掉，否则我的 UIButton 的目标操作不会被调用，但是我会丢失我的自定义绘图。我错过了什么？

```
- (void)createLayerForPaletteAtIndex:(int)paletteIndex onButton:(UIButton *)button
{
    self.colorPaletteLayer            = button.layer;
    self.colorPaletteLayer.delegate   = self; // Must implement drawLayer:inContext
    NSString *stringForIndex          = [NSString stringWithFormat:@"%d",paletteIndex];
    self.colorPaletteLayer.name       = stringForIndex;
    button.clearsContextBeforeDrawing = YES;
    button.layer.opaque               = YES;
    [self.colorPaletteLayer setNeedsDisplay]; // Calls drawLayer:inContext
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T16:00:04.707

您正在劫持按钮的图层。你不应该那样做。UIKit 不希望你这样做。您应该创建一个子层并将其添加到按钮的层。

# eclipse-plugin - 无法使用 eclipse 创建 cloudbees 项目

> ID：12874753
> 
> 赞同：1
> 
> 时间：2012-10-13T15:55:14.497
> 
> 标签：eclipse-plugin, cloudbees

我正在尝试按照[CloudBees Toolkit for Eclipse How-to Guide](https://developer.cloudbees.com/bin/view/Documentation/CloudBeesEclipseToolkit)使用我刚刚设置的全新 Eclipse Juno（使用 Subclipse）在 cloudbees 上创建 Hello World。我还按照第 3 步“在 CloudBees 上创建新的 SVN 存储库”。

我正在尝试创建一个新项目的第 4 步，但是当我创建新的 Jenkins 作业的步骤时，出现了一条警告，上面写着“在 Forge 中启用托管以自动配置 Jenkins 作业 SCM”。如果我接下来选择在 Forge SVN 上托管，我可以创建一个无法继续前进的空存储库组合框。

我在这里错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T07:18:05.760

请您现在再试一次 - 我们的一个内部 API 出现意外回归。

# cassandra - 将 Datastax Enterprise 与 Cassandra 社区相结合

> ID：12874755
> 
> 赞同：3
> 
> 时间：2012-10-13T15:55:23.437
> 
> 标签：cassandra, datastax-enterprise

我正在尝试使用 Datastax Enterprise，并且正在尝试拥有一个混合了 Enterprise 节点和标准 Cassandra 社区节点的集群。我只需要几个具有 Solr 等高级功能的节点，并且将所有节点都放在同一个集群中会很好。

我尝试将社区节点引导到测试企业集群，但它无法正确加入环，引发如下异常：

```
Unable to find compaction strategy class 
'com.datastax.bdp.hadoop.cfs.compaction.CFSCompactionStrategy' 
```

我假设企业节点尝试复制具有来自 DSE 的功能的 CF，但社区节点无法识别这些功能。

有没有办法防止这种情况发生？我是否正在尝试做 DSE 不可能/支持/不允许的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T23:44:43.800

这是不受支持的配置。整个集群需要在所有节点上安装 DataStax 企业二进制文件。您可以通过每个节点上的启动选项选择哪些节点作为 vanilla Cassandra、Hadoop 或 Solr 运行。DSE 有一个自定义的压缩策略和告密策略，因此会出现错误。

# python - SciPy 中的并行优化

> ID：12874756
> 
> 赞同：17
> 
> 时间：2012-10-13T15:55:28.523
> 
> 标签：python, optimization, scipy

我有一个简单的功能

```
def square(x, a=1):
    return [x**2 + a, 2*x] 
```

`x`对于几个参数，我想将其最小化`a`。我目前有循环，在精神上，做这样的事情：

```
In [89]: from scipy import optimize

In [90]: res = optimize.minimize(square, 25, method='BFGS', jac=True)

In [91]: [res.x, res.fun]
Out[91]: [array([ 0.]), 1.0]

In [92]: l = lambda x: square(x, 2)

In [93]: res = optimize.minimize(l, 25, method='BFGS', jac=True)

In [94]: [res.x, res.fun]
Out[94]: [array([ 0.]), 2.0] 
```

现在，该函数已经被矢量化了

```
In [98]: square(array([2,3]))
Out[98]: [array([ 5, 10]), array([4, 6])]

In [99]: square(array([2,3]), array([2,3]))
Out[99]: [array([ 6, 12]), array([4, 6])] 
```

这意味着并行运行所有优化而不是循环运行可能会快得多。使用 SciPy 可以轻松做到这一点吗？或任何其他 3rd 方工具？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-15T23:33:14.573

这是另一个尝试，基于[我的原始答案](https://stackoverflow.com/a/12874964/1015178)和随后的讨论。

据我所知，[scipy.optimize](http://docs.scipy.org/doc/scipy/reference/optimize.html)模块适用于具有标量或向量输入和标量输出或“成本”的函数。

由于您将每个方程视为独立于其他方程，因此我最好的想法是使用多处理模块并行完成工作。如果您要最小化的功能与您的问题中的功能一样简单，我会说这不值得付出努力。

如果功能更复杂，并且您想划分工作，请尝试以下操作：

```
import numpy as np
from scipy import optimize
from multiprocessing import Pool

def square(x, a=1):
    return [np.sum(x**2 + a), 2*x]

def minimize(args):
    f,x,a = args
    res = optimize.minimize(f, x, method = 'BFGS', jac = True, args = [a])
    return res.x

# your a values
a = np.arange(1,11)

# initial guess for all the x values
x = np.empty(len(a))
x[:] = 25

args = [(square,a[i],x[i]) for i in range(10)]
p = Pool(4)
print p.map(minimize,args) 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2020-06-02T22:47:12.970

我参加聚会有点晚了。但这对于希望通过并行计算减少最小化时间的人来说可能很有趣：

我们在 PyPI 上可用`scipy.optimize.minimize(method='L-BFGS-B')`的包**[optimparallel](https://pypi.org/project/optimparallel/)**中实现了并行版本。它可以通过并行评估目标函数和（近似）梯度来加速优化。这是一个例子：

```
from optimparallel import minimize_parallel
def my_square(x, a=1):
    return (x - a)**2
minimize_parallel(fun=my_square, x0=1, args=11) 
```

请注意，并行实现只会减少评估时间较长（例如，超过 0.1 秒）的目标函数的优化时间。以下是可能的并行缩放的说明： [![在此处输入图像描述](../Images/d3410888139e87cd755fb2e0d0e0637f.png)](https://i.stack.imgur.com/zbd7A.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T17:05:14.250

`x`如果我理解您的意图，您可以为and传递 numpy 数组`a`，这样您就可以`a`一次优化所有参数。

尝试类似：

```
def square(x, a=1):
    return [np.sum(x**2 + a), 2*x]

# your a values
a = np.arange(1,11)

# initial guess for all the x values
x = np.empty(len(a))
x[:] = 25

# extra arguments to pass to the objective function, in this case, your a values
args = [a]

res = optimize.minimize(square, x, method = 'BFGS', jac = True, args = args) 
```

这似乎得到了正确的结果。

```
>>> res.x
[ -8.88178420e-16  -8.88178420e-16  -8.88178420e-16  -8.88178420e-16
  -8.88178420e-16  -8.88178420e-16  -8.88178420e-16  -8.88178420e-16
  -8.88178420e-16  -8.88178420e-16]
>>> res.fun
55.0 
```

# ruby-on-rails - 使用多个设计模型时出现意外的重定向行为

> ID：12874760
> 
> 赞同：0
> 
> 时间：2012-10-13T15:55:52.273
> 
> 标签：ruby-on-rails, devise

我有条件地在我的应用程序中重定向到 SSL。I User 和 Admin 模型，都配置了`devise_for`. 我正在使用`rails_admin`Admin 模型，以及我自己的 Users 模型的 CMS 东西。

在`application_controller`我有一个 before 过滤器`check_ssl`，它重定向到 SSL if`user_signed_in? || controller_name == 'registrations' || controller_name == 'sessions'`和`!request.ssl?`.

我通过查看日志验证了逻辑。

## 问题

*   当我尝试访问 /admin 以获取我的 RailsAdmin 界面时，它检测到我没有登录并正确重定向到`/admins/sign_in`.
*   我的 SSL`before_filter`运行并发现它当前不是 SSL。我的日志：

    ```
    ssl? is false and fullpath is /admins/sign_in
    应该使用ssl
    重定向到https://foo.com/login
    ssl？为真且完整路径为 /login

    ```

`/login`是我的`User`模型的登录路径，而不是我的`Admin`模型。
重定向代码的字面意思是： `redirect_to({:protocol => 'https'}, :flash => flash)`
这里发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T16:37:33.417

为了使这项工作正常，我最终不得不手动构建我的重定向 url：

```
 "#{protocol}://#{host}#{request.fullpath}" 
```

# android - 为什么我们不为 BOOT_COMPLETED 事件注册广播接收器

> ID：12874763
> 
> 赞同：2
> 
> 时间：2012-10-13T15:56:12.710
> 
> 标签：android, broadcastreceiver

我对这里的 a 概念感到困惑。我阅读了许多教程，为了在设备启动时收到通知（例如为了重新安排警报），您需要有一个 boot_completed 广播接收器。

然而令人困惑的部分是，我没有看到像“注册（广播接收器）”这样的方法。人们只有广播接收器类，并且他们有它在清单中。但是您不需要某种注册过程吗？系统如何知道有一个 APP x 有一个广播接收器 y 监听启动事件，除非通过注册明确告知

有点像您创建点击侦听器，但您需要将其注册/添加到按钮，以便在点击时调用它。

有人可以为我消除困惑吗？

谢谢

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T16:51:50.860

> 人们只有广播接收器类，并且他们有它在清单中。但是您不需要某种注册过程吗？

`<receiver>`清单中的元素具有子`<intent-filter>`元素，记录了`Intent`它希望接收的结构：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest android:versionCode="1"
          android:versionName="1.0"
          package="com.commonsware.android.sysevents.boot"
          xmlns:android="http://schemas.android.com/apk/res/android">

  <uses-sdk android:minSdkVersion="3"
            android:targetSdkVersion="6" />
  <supports-screens android:largeScreens="false"
                    android:normalScreens="true"
                    android:smallScreens="false" />
  <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
  <application android:icon="@drawable/cw"
               android:label="@string/app_name">
    <receiver android:name=".OnBootReceiver">
      <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
      </intent-filter>
    </receiver>
  </application>
</manifest> 
```

在这里，我们注册了一个`BroadcastReceiver`名为`OnBootReceiver`的 来接收`BOOT_COMPLETED`广播。

> 系统如何知道有一个 APP x 有一个广播接收器 y 监听启动事件，除非通过注册明确告知

Android“通过注册明确告知”。碰巧“注册”是通过清单完成的，而不是通过应用程序中的 Java 代码完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T16:53:30.660

简短的回答：您可以使用 Context.registerReceiver() 动态注册此类的实例，也可以通过 AndroidManifest.xml 中的标签静态发布实现

# c# - 用于音频可视化的 WPF 快速绘图

> ID：12874770
> 
> 赞同：0
> 
> 时间：2012-10-13T15:57:01.697
> 
> 标签：c#, wpf

作为我的音频库的一部分，我想创建一个示例可视化。我知道如何获得我想要绘制的值，例如 fft 结果等等。但主要问题是我不知道画它们的最佳方法是什么。我在使用 wpf 方面有很多经验，但我从来没有做过这样的事情。我应该使用什么来保持性能尽可能好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T11:40:35.600

您可以采用多种不同的方法，具体取决于您需要的质量、内存使用情况和性能......这里只是一些。

*   创建一个从 FrameworkElement 派生的新对象，然后在 OnRender 期间通过在 DrawingContext 上绘制来动态绘制“视觉”方面。绘图的开销比其他 WPF 元素（如 Shapes、Image 等）要低得多。但是，如果您有 1000 个元素，它仍然可能无法很好地缩放。[http://msdn.microsoft.com/en-us/library/ms751619.aspx](http://msdn.microsoft.com/en-us/library/ms751619.aspx)

*   WriteableBitmapEx ....它将为您提供直接写入位图所需的绘图原语。[http://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/) .. 看到一些演示，这些演示与您为音频可视化所做的非常相似。[http://blogs.claritycon.com/blog/2011/03/advanced-animation-animating-15000-visuals-in-silverlight-2/](http://blogs.claritycon.com/blog/2011/03/advanced-animation-animating-15000-visuals-in-silverlight-2/)

*   将 DirectX 与 Direct2D 一起使用。这提供了类似 DirectX 的性能，但您需要使用 COM 互操作或 C++/CLI 代码包装器才能使其可用于您的 .NET C# 代码。[http://www.codeproject.com/Articles/113991/Using-Direct2D-with-WPF](http://www.codeproject.com/Articles/113991/Using-Direct2D-with-WPF)

其他一些链接：

*   [http://jeremiahmorrill.wordpress.com/2011/02/14/a-critical-deep-dive-into-the-wpf-rendering-system/](http://jeremiahmorrill.wordpress.com/2011/02/14/a-critical-deep-dive-into-the-wpf-rendering-system/)

# html - 浮动和清除五段标签

> ID：12874776
> 
> 赞同：0
> 
> 时间：2012-10-13T15:57:45.850
> 
> 标签：html, css-float, clearfix

我有五个要浮动的部分标签，以便它们彼此内联。我过去曾使用过 float / clearfix 技术，它已经奏效了。我无法弄清楚我做错了什么。

```
CSS:

    #content{ padding:30px 0 0 15px; width: 959px; }

    .clearfix:after {
    content: ".";
    display: block;
    clear: both;
    visibility: hidden;
    line-height: 0;
    height: 0;
}

    .clearfix {
    display: inline-block;
}

     html[xmlns] .clearfix {
    display: block;
}

    *html .clearfix {
    height: 1%;
}

#1, #2, #3, #4, #5 {padding-right:15px; float: left;}

HTML:
    <div id="content">      
      <section id="1">
        <img src="1.png" />
      </section>

      <section id="2">
        <img src="2.png" />
      </section>

      <section id="3">
        <img src="3.png" />
      </section>

      <section id="4">
        <img src="4.png" />
      </section>

      <section id="5">
        <img src="5.png" />
      </section>

     </div><!-- end content-->

      <div class="clearfix"></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T16:02:52.400

你不应该让你的部分inline-block/floated而不是clearfix吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T16:04:15.640

该`id`属性*必须*以字母 (az) 开头 - 因为您的 id 只是数字，所以它们是无效的，因此永远不会匹配。

将您的 id 从`1`, `2`,更改`...`为`section1`, `section2`,`...`

# android - Jelly Bean 中的卸载速度非常慢

> ID：12874785
> 
> 赞同：1
> 
> 时间：2012-10-13T15:58:58.373
> 
> 标签：android

自从我的 Asus Transformer 平板电脑升级到 Jelly Bean 后，我发现应用程序和小部件的卸载有时非常缓慢，需要几分钟而不是几秒钟。这可能有原因吗？

我在 Stackoverflow 上发布此内容的原因是我遇到最大问题的应用程序是我自己开发的应用程序！如您所知，在应用程序的调试和发布版本之间切换时，由于签名密钥不同，您必须进行卸载，所以我定期这样做，这变得非常烦人。感谢您提供有关在哪里寻找解决方案的任何提示——如果有的话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:14:07.823

我曾经遇到过这个问题，虽然它是在 ICS 而不是 Jelly Bean 中。我的问题是谷歌的应用程序“Currents”，它生成了数千个文件作为其缓存的一部分。卸载任何东西，甚至获得任何已安装应用程序的大小都需要 FOREVER，因为 Android 必须浏览所有这些数千个文件。顺便说一句，谷歌已经修复了 Currents。

所以，我猜这是一个类似的问题，您安装的一个应用程序在创建文件时发疯了。如果您打开您的应用程序列表并且需要很长时间才能显示大小，则进一步证明这是同一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T08:07:32.333

我有同样的问题。就我而言，这是由 SoundCloud 的流缓存引起的。删除后一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-08T08:36:23.080

同样的问题，也通过极长的时间来计算应用程序的大小。在这种情况下，Google 地球应用程序在本地驱动器上生成了数千个文件（超过 22000 个）。卸载了那个应用程序，它是固定的。

# java - 使用嵌套循环进行 Java 验证

> ID：12874788
> 
> 赞同：0
> 
> 时间：2012-10-13T15:59:13.863
> 
> 标签：java, javascript

程序运行良好，但嵌套的 do-while 循环不起作用。如果您看到 while 的条件，您可以看到它必须是一个验证，如果它不在这些数字的范围内，它必须再次提出问题。您可以看到，如果主体从程序中退出，则主体必须验证主体不等于 0

我声明：

```
import java.util.Scanner;
import java.text.DecimalFormat;
public class ACMEMORTGAGE
{
   public static void main (String args [])

   {
       //Declare variables 
        double rate=0, monthlyPayments, numberMonthlyPayments, paymentAmount;
        int mortgageTerm, principal, years=0;

        Scanner key=new Scanner(System.in);

        DecimalFormat decimalPlaces=new DecimalFormat("$0.00");
        do
        {
            System.out.print("Enter principal amount (0 to end program):");
            principal=key.nextInt();

            do

            {
            System.out.print("Enter mortgage amortization (1, 2, 3, 5, 10.):");
            mortgageTerm=key.nextInt();

            if (mortgageTerm==1)
            {
                rate=0.035;
            }
            else if (mortgageTerm==2)
            {
                rate=0.039;
            }
            else if (mortgageTerm==3)
            {
               rate=0.044;
            }
            else if (mortgageTerm==5)
            {
               rate=0.05;
            }
             else if (mortgageTerm==10)
            {
                rate=0.060;  
            }

            } while (mortgageTerm==1 || mortgageTerm==2 || mortgageTerm==3 || mortgageTerm==5 || mortgageTerm==10);

            do
           {     
            System.out.print("Enter mortgage ammortization period (5, 10, 15, 20, 25):");
            years=key.nextInt();

           } while (years==5 && years==10 && years==15 && years==20 && years==25);               

       double i, n, x;

       i=rate/12;
       n=12*years;

       monthlyPayments= ((principal*(Math.pow(i+1, n)*(i))) / (Math.pow(i+1, n) - 1));
       System.out.print("Monthly payments amount:");    
       System.out.println(decimalPlaces.format(monthlyPayments));

     }while (principal!=0);

   }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T16:00:26.173

您在其中使用了赋值运算符 ( `=`) 而不是比较运算符 ( `==`) `if`，这是一个错误。虽然在 C 中您可能会这样做（这通常表示存在错误），但在 Java 中您必须在`if`子句中使用布尔表达式。应该：

```
if (years == 1) 
```

等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T16:02:29.230

```
if (years=1) 
```

在这里，您正在`1`为您的`years`. 所以`expression`你的结果`if`不是`boolean`表达式。

现在，由于 Java 期望内部的条件`if`评估为一个`boolean`值，所以它给出了不兼容的类型。

你应该使用： -

```
if(years == 1) 
```

同样，您需要将您的`while`声明更改为： -

```
while (years==1 && years==2 && ...); 
```

# java - 在 java.util.Scanner.throwFor(Unknown Source) 错误

> ID：12874791
> 
> 赞同：2
> 
> 时间：2012-10-13T16:00:09.810
> 
> 标签：java

```
 private static int posNum() {
            Scanner scan = new Scanner(System.in);
            int input = 0;
            boolean error;

            if (scan.hasNextInt()) {
                input = scan.nextInt();
                error = input <= 0;
            } else {
    28          scan.next();
                error = true;
            }
            while (error) {
                System.out.print("Invalid input. Please reenter: ");
                if (scan.hasNextInt()) {
                    input = scan.nextInt();
                    error = input <= 0;
                } else {
                    scan.next();
                    error = true;
                }
            }
            scan.close();
            return input;

        } 
```

所以我第二次调用这个方法它返回以下错误。

```
Exception in thread "main" java.util.NoSuchElementException
    at java.util.Scanner.throwFor(Unknown Source)
    at java.util.Scanner.next(Unknown Source)
    at q2.CylinderStats.posNum(CylinderStats.java:28)
    at q2.CylinderStats.main(CylinderStats.java:62) 
```

第一次调用`rad = posNum();`运行良好，然后第二次调用`height = posNum();`在出错之前不允许输入值。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T16:02:35.513

打电话时`next`你应该检查扫描仪是否有一个。

```
 if(scan.hasNext())
 scan.next(); 
```

根据[Scanner#next的 java doc](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#next%28%29)

> NoSuchElementException 如果没有更多可用的令牌

你可以改变你的方法如下

```
private static int posNum(Scanner scan) {
    int input = 0;
    boolean error = false;
    if (scan.hasNext()) {
        if (scan.hasNextInt()) {
            input = scan.nextInt();
            error = input <= 0;
        } else {
            scan.next();
            error = true;
        }
    }
    while (error) {
        System.out.print("Invalid input. Please reenter: ");
        if (scan.hasNextInt()) {
            input = scan.nextInt();
            error = input <= 0;
        } else {
            if (scan.hasNext())
                scan.next();
            error = true;
        }
    }
    return input;
} 
```

然后像下面这样调用它

```
 Scanner scan = new Scanner(System.in);
    int i = posNum(scan);
    System.out.println(i);
    int j = posNum(scan);
    System.out.println(j); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-09T15:10:11.653

它运行一次并给您带来麻烦的事实意味着它无法从流中读取任何内容。

来自 Java 文档：

当 Scanner 关闭时，如果源实现了 Closeable 接口，它将关闭其输入源。

这意味着它关闭了 System.in

So leaving the scanner opened will prevent the error the second time.

Remove `scan.close();` and your program should work fine!

# mysql - 删除 100000000-199999999 之间的值

> ID：12874793
> 
> 赞同：0
> 
> 时间：2012-10-13T16:00:26.507
> 
> 标签：mysql, innodb

我需要修改以下代码以删除值为 1xxxxxxxx 和 3xxxxxxxx 的所有内容（例如，100000001、100000002 等），但我对 SQL 的了解并不完美。有没有人可以帮我修改这个脚本？

```
SET @increment_id = '100000001';

SELECT *
FROM `sales_flat_quote_address_item`
WHERE `sales_flat_quote_address_item`.`quote_address_id` IN ( 
    SELECT `address_id` 
        FROM `sales_flat_quote_address` 
        WHERE `sales_flat_quote_address`.`quote_id` IN (
        SELECT `entity_id`
            FROM `sales_flat_quote`
            WHERE `sales_flat_quote`.`reserved_order_id` = @increment_id
            )
    );

DELETE  
FROM `sales_flat_quote_shipping_rate`
WHERE `sales_flat_quote_shipping_rate`.`address_id` IN ( 
    SELECT `address_id` 
        FROM `sales_flat_quote_address` 
        WHERE `sales_flat_quote_address`.`quote_id` IN (
        SELECT `entity_id`
            FROM `sales_flat_quote`
            WHERE `sales_flat_quote`.`reserved_order_id` = @increment_id
            )
    );

DELETE 
FROM `sales_flat_quote_address`
WHERE `sales_flat_quote_address`.`quote_id` IN ( 
    SELECT `entity_id`
        FROM `sales_flat_quote`
        WHERE `sales_flat_quote`.`reserved_order_id` = @increment_id
    );

DELETE FROM `sales_flat_quote_item_option`
WHERE `sales_flat_quote_item_option`.`item_id`  IN ( 
    SELECT `item_id` 
        FROM `sales_flat_quote_item` 
        WHERE `sales_flat_quote_item`.`quote_id` IN (
        SELECT `entity_id`
            FROM `sales_flat_quote`
            WHERE `sales_flat_quote`.`reserved_order_id` = @increment_id
            )
    );

DELETE FROM `sales_flat_quote_item`
WHERE `sales_flat_quote_item`.`quote_id` IN ( 
    SELECT `entity_id`
        FROM `sales_flat_quote`
        WHERE `sales_flat_quote`.`reserved_order_id` = @increment_id
    );

DELETE FROM `sales_flat_quote_payment`
WHERE `sales_flat_quote_payment`.`quote_id` IN ( 
    SELECT `entity_id`
        FROM `sales_flat_quote`
        WHERE `sales_flat_quote`.`reserved_order_id` = @increment_id
    );

DELETE FROM `sales_flat_quote`
WHERE `sales_flat_quote`.`reserved_order_id` = @increment_id;

DELETE FROM `sales_order_datetime`
WHERE `sales_order_datetime`.`entity_id` IN ( 
    SELECT `entity_id`
        FROM `sales_order`
        WHERE `sales_order`.`increment_id` = @increment_id
    );

DELETE FROM `sales_order_decimal`
WHERE `sales_order_decimal`.`entity_id` IN ( 
    SELECT `entity_id`
        FROM `sales_order`
        WHERE `sales_order`.`increment_id` = @increment_id
    );

DELETE FROM `sales_order_int`
WHERE `sales_order_int`.`entity_id` IN ( 
    SELECT `entity_id`
        FROM `sales_order`
        WHERE `sales_order`.`increment_id` = @increment_id
    );

DELETE FROM `sales_order_text`
WHERE `sales_order_text`.`entity_id` IN ( 
    SELECT `entity_id`
        FROM `sales_order`
        WHERE `sales_order`.`increment_id` = @increment_id
    );

DELETE FROM `sales_order_varchar`
WHERE `sales_order_varchar`.`entity_id` IN ( 
    SELECT `entity_id`
        FROM `sales_order`
        WHERE `sales_order`.`increment_id` = @increment_id
    );

DELETE FROM `sales_order_entity_datetime`
WHERE `sales_order_entity_datetime`.`entity_id` IN ( 
    SELECT `entity_id`
        FROM `sales_order_entity`
        WHERE `sales_order_entity`.`increment_id` = @increment_id
    );

DELETE FROM `sales_order_entity_decimal`
WHERE `sales_order_entity_decimal`.`entity_id` IN ( 
    SELECT `entity_id`
        FROM `sales_order_entity`
        WHERE `sales_order_entity`.`increment_id` = @increment_id
    );

DELETE FROM `sales_order_entity_int`
WHERE `sales_order_entity_int`.`entity_id` IN ( 
    SELECT `entity_id`
        FROM `sales_order_entity`
        WHERE `sales_order_entity`.`increment_id` = @increment_id
    );

DELETE FROM `sales_order_entity_text` 
WHERE `sales_order_entity_text`.`entity_id` IN ( 
    SELECT `entity_id`
        FROM `sales_order_entity`
        WHERE `sales_order_entity`.`increment_id` = @increment_id
    );

DELETE FROM `sales_order_entity_varchar`
WHERE `sales_order_entity_varchar`.`entity_id`  IN ( 
    SELECT `entity_id`
        FROM `sales_order_entity`
        WHERE `sales_order_entity`.`increment_id` = @increment_id
    );

DELETE FROM `sales_order_entity`
WHERE `sales_order_entity`.`increment_id` = @increment_id;

DELETE FROM `sales_order`
WHERE `sales_order`.`increment_id` = @increment_id; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T16:01:46.063

改变

```
WHERE `sales_flat_quote`.`reserved_order_id` = @increment_id 
```

到

```
WHERE `sales_flat_quote`.`reserved_order_id` BETWEEN 100000000 AND 199999999 
```

等待！标题说`100000000-199999999`，但问题说`1xxxxxxxx and 3xxxxxxxx`，所以如果是后者，则将其更改为：

```
WHERE `sales_flat_quote`.`reserved_order_id` BETWEEN 100000000 AND 399999999 
```

或者，您可以选择使用`REGEXP`运算符：

```
WHERE `sales_flat_quote`.`reserved_order_id` REGEXP '^[123][[:digit:]]{8}' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:38:17.667

通常，我会建议这样做。但是，如果性能不是问题，您可以使用：

```
...
WHERE LEFT(`sales_order`.`increment_id`, 1) = 1 
    AND RIGHT(`sales_order`.`increment_id`, 8) BETWEEN 0 and 99999999 
```

和

```
...
WHERE LEFT(`sales_flat_quote`.`reserved_order_id`, 1) = 1 
    AND RIGHT(`sales_flat_quote`.`reserved_order_id`, 8) BETWEEN 0 and 99999999 
```

这是假设字段长度为 9 个字符。它将匹配最左边的值`1`并检查右边集合的范围。

也许您可能还想使用事务以防出现问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T21:35:42.617

您可以使用以下脚本删除所有以 1 或 3 开头的记录：

```
DELETE 
FROM 'sales_flat_quote_address_item'
WHERE
'sales_flat_quote_address_item'.'quote_address_id' like '1%'
OR 
'sales_flat_quote_address_item'.'quote_address_id' like '3%'; 
```

# angularjs - 如何在 AngularJS 中注册我自己的事件监听器？

> ID：12874797
> 
> 赞同：38
> 
> 时间：2012-10-13T16:01:10.107
> 
> 标签：angularjs, drag-and-drop, dom-events

如何在 AngularJS 应用程序中注册我自己的事件监听器？

具体来说，我正在尝试注册拖放（DND）侦听器，以便当将某些东西拖放到我的视图的新位置时，AngularJS 会重新计算业务逻辑并更新模型，然后是视图。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-14T03:07:40.073

添加事件侦听器将在指令的链接方法中完成。下面我写了一些基本指令的例子。但是，如果你想使用 jquery-ui 的 .draggable() 和 .droppable()，你可以做的是知道下面每个指令`elem`的`link`函数中的参数实际上是一个 jQuery 对象。所以你可以打电话`elem.draggable()`并做你打算在那里做的事情。

这是在 Angular 中使用指令绑定 dragstart 的示例：

```
app.directive('draggableThing', function(){ 
   return {
      restrict: 'A', //attribute only
      link: function(scope, elem, attr, ctrl) {
         elem.bind('dragstart', function(e) {
            //do something here.
         });
      }
   };
}); 
```

这是你如何使用它。

```
<div draggable-thing>This is draggable.</div> 
```

使用 Angular 将 drop 绑定到 div 或其他内容的示例。

```
app.directive('droppableArea', function() {
   return {
       restrict: 'A',
       link: function(scope, elem, attr, ctrl) {
            elem.bind('drop', function(e) {
                /* do something here */
            });
       }
   };
}); 
```

这是你如何使用它。

```
<div droppable-area>Drop stuff here</div> 
```

我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-14T00:02:58.050

在指令中隐藏事件处理和 dom 操作几乎是 angularjs 的方式。当事件触发时调用 scope.$apply 会告诉 Angular 更新视图。

您可能会考虑[在此示例中](http://jsfiddle.net/IgorMinar/NyJcd/11/)使用 jquery-ui （请参阅 我与[angular-ui组合作](http://angular-ui.github.com/)[的示例的 angular wiki，](https://github.com/angular/angular.js/wiki/JsFiddle-Examples) 并且有一个简单的事件包装器，您可能会发现它很有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-09T18:47:19.007

Ben 的解决方案不错，但请记住，您需要访问 originalEvent 和 original 元素。根据 Mozilla 文档，两个条件必须满足[https://developer.mozilla.org/en-US/docs/DragDrop/Drag_Operations](https://developer.mozilla.org/en-US/docs/DragDrop/Drag_Operations)

1.  可拖动是真的
2.  拖拽启动的监听器

所以指令可能看起来像这样

```
app.directive('draggableThing', function () {
    return function(scope, element, attr) {
        var pureJsElement = element[0];
        pureJsElement.draggable = true;
        element.bind('dragstart', function(event) {
            event.originalEvent.dataTransfer.setData('text/plain', 
                              'This text may be dragged');
        //do something here.
        });
    }
}); 
```

此处提供了一个很好的分步示例[http://blog.parkji.co.uk/2013/08/11/native-drag-and-drop-in-angularjs.html](http://blog.parkji.co.uk/2013/08/11/native-drag-and-drop-in-angularjs.html)

# performance - DNS预取和页面优化

> ID：12874799
> 
> 赞同：13
> 
> 时间：2012-10-13T16:01:19.763
> 
> 标签：performance, optimization, dns

今天我在一个网页的 HTML 源代码中看到了这个片段：

```
<!-- prefetch dns -->
<link rel="dns-prefetch" href="//s3.amazonaws.com">
<link rel="dns-prefetch" href="//cdn.api.twitter.com">
<link rel="dns-prefetch" href="//graph.facebook.com">
<link rel="dns-prefetch" href="//connect.facebook.net">
<link rel="dns-prefetch" href="//api.pinterest.com">
<link rel="dns-prefetch" href="//google-analytics.com"> 
```

这样做你能获得多少？我以前没见过这个，在[Yahoo! Developer Networks 优化指南](http://developer.yahoo.com/performance/rules.html)。唯一似乎相关的是“减少 DNS 查找”。

以类似的方式，为什么这些服务不向其服务公开 IP 地址并完全避免 DNS 查找？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T19:14:34.733

我想这可以对后来用于一堆 JavaScript 的那些链接进行并行 DNS 查找。

直接 IP 号码不适用于 CDN。他们解析到靠近调用者的主机。如果你在美国，他们会给你美国服务器的 IP。如果你在欧洲，他们会给你欧洲服务器的 IP，等等。你不能用直接的 IP 号码那样作弊。

# python - 在 Python 中创建子类时将子类添加到超类列表中？

> ID：12874800
> 
> 赞同：1
> 
> 时间：2012-10-13T16:01:20.323
> 
> 标签：python, class, subclass, superclass

假设我有一个基类如下：

```
class User:
    user_types = []
    def __init__(self, name, age):
        self.name = name
        self.age = age 
```

然后我想创建一个子类，然后将其添加到 user_types

```
class Farmer(User):
    def harvest(self):
        print("%s just harvested his plantation!" %self.name) 
```

现在我可以通过简单地说来实现我想要做的事情

```
User.user_types.append(Farmer) 
```

但是，如果我希望它是自动的，并且为每个子类完成，我怎么能做到这一点呢？假设将有 400 个子类，手动为所有子类执行此操作会很痛苦。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T16:50:12.863

新样式类具有以下功能：

```
>>> User.__subclasses__()
[<class '__main__.Farmer'>] 
```

如果您使用的是 Python 2.x，只需要`User`继承 from 。`object`

如果您需要每个子类的所有子类，您仍然可以使用以下方法避免元类：

```
def get_subclasses(c):
    subs = set(c.__subclasses__())
    return subs.union(*(get_subclasses(i) for i in subs)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T16:53:43.930

您可以使用元类来解决您的问题：

```
class Meta(type):
    def __new__(meta, classname, bases, classDict):
        new_class = type.__new__(meta,classname,bases,classDict)
        for base in bases:
            if hasattr(base,'register'):
                base.register(new_class)
        return new_class

class Base(object):
    __metaclass__ = Meta

    subclasses = []

    @classmethod
    def register(cls,derived):
        cls.subclasses.append(derived)

class A(Base):
    pass

class B(A):
    pass

class C(Base):
    pass

print Base.subclasses 
```

输出是：

```
[<class '__main__.A'>, <class '__main__.B'>, <class '__main__.C'>] 
```

# python - 需要热建议将 urllib2.install_opener() 移动到不同的类

> ID：12874801
> 
> 赞同：0
> 
> 时间：2012-10-13T16:01:39.777
> 
> 标签：python, urllib2

我的程序顶部有一个代码，如下所示：

```
cj=cookielib.CookieJar()
#Process Hadlers
opener=urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
#install opener, now all the calls to urllib2.urlopen use this opener
urllib2.install_opener(opener)
opener.addheaders=[
                    ('User-Agent', 'Mozilla/5.0 (BlackBerry; U; BlackBerry 9850; en-US) AppleWebKit/534.11+ (KHTML, like Gecko) Version/7.0.0.115 Mobile Safari/534.11+'),
                   # ('Accept', 'text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8'),
                    ('Accept-Language', 'en-gb,en;q=0.5'),
                    ('Accept-Encoding', 'gzip,deflate'),
                    ('Accept-Charset', 'ISO-8859-1,utf-8;q=0.7,*;q=0.7'),
                    ('Keep-Alive', '115'),
                    ('Connection', 'keep-alive'),
                    ('Cache-Control', 'max-age=0'),
                    ('Referer', 'http://yahoo.com'),
                ] 
```

所以现在我想将此代码移动到另一个类，因为我不想在我的程序中复制和粘贴代码。据我了解`urllib2.install_opener(opener)`，将所有标题、cookie 等添加到`urllib2`当我调用`urlopen()`. 想把它移到某个类，但不知道这段代码应该返回什么。另外，如果我将它移到`__init__`方法中，它将不起作用，因为**init**不会返回任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T16:04:32.037

您可以将此代码放在一个名为的模块中`urlhandler.py`，并使用`opener`您在上面定义的。`from urlhandler import opener`那应该工作。该代码使用所有适当的处理程序初始化开启程序，以便 urllib2 接受请求。

有了这个，您将`opener`用于打开请求对象并返回响应

```
req = urllib2.Request('http://www.yoururl.com')
res = opener.open(req) 
```

# android - 代码需要 API 级别 11（当前为 8）

> ID：12874802
> 
> 赞同：2
> 
> 时间：2012-10-13T16:01:41.620
> 
> 标签：android, version

```
ClipboardManager clipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE); 
ClipData clip = ClipData.newPlainText("log", s);
clipboard.setPrimaryClip(clip); 
```

此代码给出错误“代码需要 API 级别 11（当前为 8）”。只是因为这 3 行我需要将 minSdkVersion 从 8 更改为 11。是否可以使用 minSdkVersion 8，并使用此代码执行某些操作 - 例如，仅当当前版本至少为 11 时才执行它？但是我还是想要这个功能，不想改minSdkVersion。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T16:50:55.420

您可以将代码包装到条件块中，使其仅在允许它的平台版本上运行：

```
if (VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        ClipboardManager clipboard = (ClipboardManager) getSystemService(CLIPBOARD_SERVICE); 
        ClipData clip = ClipData.newPlainText("log", s);
        clipboard.setPrimaryClip(clip);
} 
```

此外，您可能想告诉`Lint`在这种情况下使用警告级别，而不是它使用的正常错误级别：

`Window -> Preferences -> Android -> Lint Error Checking -> Select New Api and change the severity to Warning`

# linq - 带有 Any 和 sql_variants 的 linq

> ID：12874807
> 
> 赞同：1
> 
> 时间：2012-10-13T16:02:18.593
> 
> 标签：linq, any, sql-variant

我对 sql_variants 有疑问

我有 2 张桌子和一个 DTO

```
'struct A_Table1
' id (int)(not null)
' wert (sql_variant)(not null)

'struct A_Table2
' id (int)(not null)
' wert (sql_variant)(not null)

Private Class DTO
    Public Property id As Integer
    Public Property wert As Object
End Class 
```

我喜欢从 tbale 1 中选择所有内容，如果在 table2 中为表 1 的 id 输入了值，我想从那里获取值。这适用于字符串（或至少一个 'wert' 列作为字符串。但如果两个 'wert' 列都是 sql_variants，我会得到令人讨厌的输出：

```
System.Collections.Generic.List`1[System.Object] 
```

作为我显示内容的网格内的文本。

这是一些示例代码

```
Private Sub Button2_Click_1(sender As System.Object, e As System.EventArgs) Handles Button2.Click
        Dim q = (From p In db.A_Table1s Select New DTO With {
                 .id = p.id,
                 .wert = If(db.A_Table2s.Any(Function(f) f.id = p.id And Not f.wert Is Nothing),
                            (From v In db.A_Table2s Where v.id = p.id Select v.wert).FirstOrDefault,
                            p.wert)
        })

        bs3.DataSource = q
        grd.DataSource = bs3
End Sub

And the generated SQL

SELECT [t0].[id], 
    (CASE 
        WHEN EXISTS(
            SELECT NULL AS [EMPTY]
            FROM [dbo].[A_Table2] AS [t1]
            WHERE [t1].[id] = [t0].[id]
            ) THEN 1
        ELSE 0
     END) AS [value], [t0].[wert]
FROM [dbo].[A_Table1] AS [t0] 
```

“AS [value]”看起来“奇怪”

有人能告诉我为什么这个查询不适用于 sql_variants 吗？

谢谢你

_rene

哦，我刚刚意识到：Linq 正在执行 2 个额外的查询（对于第二个表中的每个条目：

```
SELECT TOP (1) [t0].[wert]
FROM [dbo].[A_Table2] AS [t0]
WHERE [t0].[id] = @x1
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.0.30319.1

SELECT TOP (1) [t0].[wert]
FROM [dbo].[A_Table2] AS [t0]
WHERE [t0].[id] = @x1
-- @x1: Input Int (Size = -1; Prec = 0; Scale = 0) [3]
-- Context: SqlProvider(Sql2008) Model: AttributedMetaModel Build: 4.0.30319.1 
```

似乎这两个值都作为对象列表合并到返回的 DTO

编辑：好的，我得到了这个工作，但没有使用 .Any 但左外连接

```
Dim q = (From p In db.A_Table1s
             Group Join v In db.A_Table2s On p.id Equals v.id Into Group From v In Group.DefaultIfEmpty() Select New DTO With
            {.id = p.id, .wert = If(v.wert Is Nothing, p.wert, v.wert)}) 
```

但是，很高兴知道为什么.Any“解决方案”不起作用

# css - 我需要剪辑或隐藏溢出它的内容，但仅限于一侧

> ID：12874812
> 
> 赞同：1
> 
> 时间：2012-10-13T16:02:37.430
> 
> 标签：css, overflow, clip

我有一个带有单个子 DIV 的 DIV，它可能会或可能不会在其父级的多个侧面溢出。我需要能够隐藏溢出父母底部边缘的孩子的任何部分，但允许在所有其他方面溢出。

这是一张有助于解释的图表：

![在此处输入图像描述](../Images/a89aef6b8cfc1446ee5770fca809f3d1.png)

我一直在查看`clip`CSS 属性，但无法将其击败，主要是因为它不接受百分比，而且这个孩子没有静态高度/宽度。此外，当将鼠标悬停在父级上时，子级将进行动画处理，从一个位置移动到另一个位置。让事情变得有点棘手。

建议？

**注意** 我的目标是不为样式添加无关的标记。这个特定站点在语义级别上必须是可靠的，因为它适用于一所大型学校，因此添加额外的包装器 div 来实现这一点并不理想。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T03:56:02.633

如果您可以再使用一个父 div，我可以使用以下方法获得类似的结果。

CSS：

```
 #grandparent{
        overflow: hidden
    }
    #parent {
        background-color: #600;
        width: 200px;
        height: 200px;
        padding-top: 30px;
        text-align: center;
        margin: 0 auto;
        position: relative
    }
    #child {
        background-color: #090;
        width: 100%;
        height: 300px;
        margin: 0 auto;
        position: absolute;
        padding: 0 1.5em;
        margin-left: -1.5em;
    } 
```

标记：

```
 <div id="grandparent">
      <div id="parent">
         <div id="child">Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum Lorem possum</div>
      </div>
    </div> 
```

# php - 数据库时间数据检索，基于时间的查询

> ID：12874814
> 
> 赞同：0
> 
> 时间：2012-10-13T16:02:42.603
> 
> 标签：php, mysql, database, time

我是时间操作或时间算术运算的新手，目前正在开发一个带有基于 Web 服务器的信息的导航系统，目前我有这个数据库，其中包含一个表 peek hours，其列是 id、start_time、end_time、edge_id、day_of_the_week、edge_weight

```
 ------------------------------------------------------------------------
|                  Peek Hours                                           |
 ------------------------------------------------------------------------
|    |            |           |         |                 |             |
| id | start_time |  end_time | edge_id | day_of_the_week | edge_weight |
|    |            |           |         |                 |             |
 ------------------------------------------------------------------------ 
```

我将 PHP 用作 Web 服务，因此根据当前时间，我想获取所有符合此等式的记录

`start_time< current_time < end_time`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T21:32:40.740

正如其他评论所暗示的那样，您看起来并不难。

```
 SELECT *
 FROM peek_hours
 WHERE start_time < NOW()
 AND NOW() < end_time 
```

你也可以这样做：

```
 SELECT *
 FROM peek_hours
 WHERE NOW() between start_time AND end_time 
```

虽然 BETWEEN 是“小于或等于”。

# php - 在 HTML 文件中使用 PHP - 一种不常见的方式

> ID：12874821
> 
> 赞同：1
> 
> 时间：2012-10-13T16:03:31.787
> 
> 标签：php, html, variables

在我作为 Web 程序员（虽然我还是新手）期间，我见过几个脚本，其中包含 PHP 的方式并不常见。

PHP 不是以通常的方式添加的，例如`<div><?php echo $foo; ?></div>`，而是以这种方式`<div>{FOO}</div>`添加`<div>{$foo}</div>`：

我想知道我怎么能做到这样的事情？我真的很想学这个东西。

有人可以指导我找到正确的来源来学习这个吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T16:05:13.503

它必须是模板引擎？您从 PHP 脚本向其注入值。[Smarty](http://www.smarty.net/)是一个基本的例子。

例如，在您的 PHP 页面中，您编写：

```
 include('Smarty.class.php');
 $smarty = new Smarty;
 $smarty->assign('foo', 'Bar Baz');
 $smarty->display('index.tpl'); 
```

而且，您的模板页面看起来像

```
 <div>{foo}</div> 
```

带有 .tpl 扩展名。

当程序运行时，模板变量 {foo} 将被其赋值“Bar Baz”替换

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T16:05:31.010

开发者一定一直在使用[Smarty等模板引擎](http://www.smarty.net/)

你甚至可以定义数组：

```
{assign var=foo value=[1,2,3]} 
```

对象

```
{$foo->bar} 
```

以下内容将帮助您入门

*   [http://www.9lessons.info/2011/09/smarty-template-engine-using-php.html](http://www.9lessons.info/2011/09/smarty-template-engine-using-php.html)
*   [http://www.dreamincode.net/forums/topic/255552-an-introduction-to-smarty-php-template-engine/](http://www.dreamincode.net/forums/topic/255552-an-introduction-to-smarty-php-template-engine/)
*   [http://www.moskalyuk.com/blog/smarty-faq](http://www.moskalyuk.com/blog/smarty-faq)
*   [http://www.youtube.com/watch?v=5xLfvY8upsQ](http://www.youtube.com/watch?v=5xLfvY8upsQ)（视频）

# iphone - 如何在 Xcode 4.2 中将 MainWindow.xib 的窗口与 AppDelegate 挂钩？

> ID：12874822
> 
> 赞同：1
> 
> 时间：2012-10-13T16:03:39.977
> 
> 标签：iphone, ios, xcode, interface-builder

我正在旧 Mac 上的 Xcode 4.2 和 iOS 5 中试验 Interface Builder。

在 Xcode 3.2 中总是有一个 MainWindow.xib 文件，它不仅包含文件所有者 UIApplication 恕我直言，还包含一个 App Delegate 占位符对象。

我使用 Window xib 模板创建了 MainWindow.xib 文件。缺少 AppDelegate 占位符，因此我无法将窗口连接到我的实际应用程序委托对象。

我想我需要添加一个占位符对象，其类标识设置为“AppDelegate”，但不知道如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T16:50:45.587

只需从对象库中拖出一个蓝色立方体（称为“对象”）并将其类更改为您的应用程序委托的类。

# java - FlexibleJDBCRealm 和 Digest

> ID：12874825
> 
> 赞同：0
> 
> 时间：2012-10-13T16:03:50.007
> 
> 标签：java, jakarta-ee, glassfish, java-ee-6

我在 Glassfish 中有这个工作，如果我不散列我的密码（所以它们是纯文本）它工作正常。

但是，如果我尝试使用散列，我无法让它工作。在我的 Java 代码中，当我创建一个新用户时，我像这样散列密码（使用字符集编码的默认值）

```
 MessageDigest md5 = MessageDigest.getInstance("MD5");                    
    byte[] hashedPassword = md5.digest(password.getBytes());
    return new String(hashedPassword); 
```

在领域的属性中，我将“password.digest”属性设置为 MD5。

请注意，我将在现实中使用 SHA-512，但为了简单起见，我尝试使用 MD5，因为在 FlexibleJDBCRealm 的文档中提到了它。

有任何想法吗？谢谢

PS现在Java中包含这种领域的更“官方”版本吗？如果 FlexibleJDBCRealm（或类似的）在某个时候内置于 Java EE，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:49:10.463

我做错了两件事：

我没有始终如一地使用字符集编码。我现在使用 Charset.defaultCharset().name() 这也是 FJDBCR 使用的默认值：

```
MessageDigest sha = MessageDigest.getInstance("MD5");                    
byte[] digestedPassword = sha.digest(password.getBytes(Charset.defaultCharset().name()));
return new String(digestedPassword, Charset.defaultCharset().name()); 
```

请注意，上面代码的第二行和第三行都使用了它。

我也没有设置 password.encoding 属性（假设 TEXT 将用作默认值）。

现在一切正常。接下来只是添加一个种子，并使用 SHA-512，我应该可以启动并运行

# c# - 使用 C# 控制台应用程序获取应用程序目录？

> ID：12874828
> 
> 赞同：13
> 
> 时间：2012-10-13T16:04:00.550
> 
> 标签：c#, console, directory

我在谷歌上找到了一些东西，但它不适用于 C# 控制台应用程序

我发现了什么：

```
string appPath = Path.GetDirectoryName(Application.ExecutablePath); 
```

如何使用 c# Console Application 获取应用程序目录？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-13T16:50:05.203

应用程序不适用于控制台应用程序，它适用于 Windows 窗体。

要获取工作目录，您可以使用

```
Environment.CurrentDirectory 
```

另外要获取可执行文件的目录，您可以使用：

```
AppDomain.CurrentDomain.BaseDirectory 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-13T17:19:43.230

如果您仍想在控制台应用程序中使用 Application.ExecutablePath，您需要：

1.  添加对 System.Windows.Forms 命名空间的引用
2.  将 System.Windows.Forms 添加到您的使用部分

    ```
    using System;
    using System.IO;
    using System.Windows.Forms;

    namespace ConsoleApplication1
    {
        class Program
        {
            static void Main(string[] args)
            {
                string appDirectory = Path.GetDirectoryName(Application.ExecutablePath);
                Console.WriteLine(appDirectory);
            }
        }
    } 
    ```

您也可以使用[`Directory.GetCurrentDirectory()`](http://msdn.microsoft.com/en-us/library/system.io.directory.getcurrentdirectory.aspx)代替，`Path.GetDirectoryName(Application.ExecutablePath)`因此您不需要对 System.Windows.Forms 的引用。

如果您既不想包含名称空间`System.IO`也不包含`System.Windows.Forms`名称空间，那么您应该遵循 Reimeus 的回答。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-04-05T14:13:16.697

请注意，路径有几种方法和陷阱。

*   你要找什么位置？工作目录、.EXE 目录、DLLs 目录？

*   您是否想要在服务或控制台应用程序中也能工作的代码？

*   如果目录的尾部斜杠不一致，您的代码会中断吗？

让我们看一些选项：

```
Application.ExecutablePath 
```

需要添加引用并加载应用程序命名空间。

```
Directory.GetCurrentDirectory
Environment.CurrentDirectory 
```

如果程序是通过快捷方式、注册表、任务管理器运行的，这些将给出“Start In”文件夹，该文件夹可能与 .EXE 位置不同。

```
AppDomain.CurrentDomain.BaseDirectory 
```

取决于它的运行效果是否包含尾部斜杠。这可能会破坏事情，例如 GetDirectoryName() 认为没有斜杠是文件，并将删除最后一部分。

这些都是我的建议，适用于 Form 和 Console 应用程序：

```
var AssemblyPath = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetEntryAssembly().Location);
or
var AssemblyPath = System.IO.Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location); 
```

在主程序中使用时，两者是相同的。如果在 DLL 中使用，第一个返回加载 DLL 的 .EXE 目录，第二个返回 DLLs 目录。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-13T16:04:46.563

尝试[`Directory.GetCurrentDirectory`](http://msdn.microsoft.com/en-us/library/system.io.directory.getcurrentdirectory.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-09T08:53:31.267

我知道这已经很长时间了，但`Assembly.GetExecutingAssembly().CodeBase`对我有用。你只需`Application.ExecutablePath`要用它替换。

当然你必须添加`using System.Reflection;`

我试过使用`System.Windows.Forms`，但它给了我一个例外

# java - JButton 上的 GIF 动画，鼠标悬停时播放

> ID：12874831
> 
> 赞同：5
> 
> 时间：2012-10-13T16:04:26.017
> 
> 标签：java, swing, jbutton, animated-gif, imageicon

```
Icon icon = new ImageIcon(getClass().getResource( "/img/icon.gif" ) );
aButton = new JButton("Its a button", icon); 
```

是否有某种方法可以阻止动画播放？我正在考虑分配 gif 的静态 jpg，然后当我悬停时，分配动画 gif，但我认为没有移除鼠标的事件，`MouseMotionListener`因此我可以加载静态 jpg。

gif 在按钮中循环，但是，如果我将鼠标悬停在它上面，它就会消失。

**如果我的鼠标光标不在按钮上，如何使 gif 静态？**

如果我使用`MouseMotionListener`，如果我取下鼠标，它会触发事件吗？

```
@Override
public void mouseMoved(MouseEvent e) {
//play the gif
//if I take mouse off, call some method to stop playing animated gif
}

@Override
public void mouseDragged(MouseEvent e) {
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T17:59:27.160

看：

*   [`setIcon(Icon)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setIcon%28javax.swing.Icon%29)
*   [`setDisabledIcon(Icon)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setDisabledIcon%28javax.swing.Icon%29)
*   [`setPressedIcon(Icon)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setPressedIcon%28javax.swing.Icon%29)
*   [`setRolloverIcon(Icon)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setRolloverIcon%28javax.swing.Icon%29)
*   [`setSelectedIcon(Icon)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#setSelectedIcon%28javax.swing.Icon%29)

无需设置显式鼠标侦听器，转换会自动发生。

EG 在这个例子中，我没有添加一个`MediaTracker`如此弹出的图像到标签中以允许加载时间。最终用户是`ImageObserver`（等到你看到它在关闭第一个对话框之前旋转）。

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.net.URL;
import javax.swing.*;

public class ImageSwapOnButton {

    public static void main( String[] args ) throws Exception {
        URL url = new URL("http://1point1c.org/gif/thum/plnttm.gif");

        Image image = Toolkit.getDefaultToolkit().createImage(url);
        ImageIcon spinIcon = new ImageIcon(image);
        JOptionPane.showMessageDialog(null, new JLabel(spinIcon));

        // create a static version of this icon
        BufferedImage bi = new BufferedImage(150,150,BufferedImage.TYPE_INT_ARGB);
        Graphics g = bi.getGraphics();
        g.drawImage(image,0,0,null);
        g.dispose();
        ImageIcon staticIcon = new ImageIcon(bi);

        JButton button = new JButton(staticIcon);
        button.setRolloverIcon(spinIcon);
        JOptionPane.showMessageDialog(null, button);
    }
} 
```

另外，不要将静态图像制作为 JPEG。JPEG 有损且不支持透明度。使用单帧 GIF 或 PNG。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-11-07T10:39:59.093

```
button.setIcon(new ImageIcon("/*icon location*/"));
button.setRolloverIcon(new ImageIcon("/*icon location*/" 
```

当鼠标指针移到按钮上时，动画 gif 图像不会变得不可见。

# android - 如何在我的 android 设备上启动使用 libgdx 编写的应用程序？

> ID：12874833
> 
> 赞同：3
> 
> 时间：2012-10-13T16:04:29.683
> 
> 标签：android, eclipse, device, apk, libgdx

我在 Eclipse 中用 libgdx 编写了一些代码行，并想在我的 android 设备上运行它们。（这是一台平板电脑）但我不知道如何做到这一点。

我什至无法在 android sdk 提供的 android 模拟器上运行它。我收到应用程序意外停止的错误。该应用程序在桌面启动器上运行良好...

我希望有人能解释我如何让它在模拟器或我的安卓设备上运行。

我在某处看到只需通过 USB 连接我的设备就足以让 eclipse 能够在设备上创建一个临时应用程序，但这也不起作用。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T20:33:27.697

首先，下载 SamsungKies[最新]，获取并安装正确的 USB 驱动程序。重要的是它应该是最新的，因为以前的版本中有一个错误。

现在您有了驱动程序，只需在 USB 调试模式下将您的设备连接到您的机器。

转到您的主要活动，然后运行。

如果它在模拟器中启动，请关闭模拟器，然后再次在主活动中，选择运行配置 -> Android 应用程序 -> 目标 -> 始终提示选择设备。

再次运行，它应该会在您的手机/平板电脑中安装并运行。

注意：活动在模拟器中关闭，因为默认情况下，模拟器不支持 OpenGLES 模拟，它对你的 CPU 来说太重了。

我知道它有点晚了，但我希望它可以帮助其他人:)

# php - 如何准备一个 mysql-query 在 smarty 部分循环？

> ID：12874835
> 
> 赞同：2
> 
> 时间：2012-10-13T16:04:32.270
> 
> 标签：php, mysql, loops, smarty2

我正在尝试准备一个数组以在 Smarty {section} 循环中使用它。

我开发了一个简单的 PHP 脚本，它给了我想要的结果：

```
$userlist = mysql_query("SELECT user_username FROM table_users");

while($name = mysql_fetch_assoc($userlist)){
 echo $name['user_username'].", ";
} 
```

现在不是“回显”php中的结果，我想将while部分移动到tpl文件中，我已经创建了

```
$smarty->assign('users', $users);
$smarty->display('userlist.tpl'); 
```

现在在 .tpl 文件中，我有

```
{section name="userlist" loop="$users"} 
name: {$users[userlist].user_username} <br /> 
{/section} 
```

现在我想知道，我需要如何准备我的 $users 数组以将其分配给 smarty 循环部分。我已经尝试了很多，但是当数组来自 MySQL 数据库时，它无法正常工作，...

有人可以帮忙吗？此致。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-12T03:29:57.013

尝试

```
{foreach $users as $user}
name: {$user.user_username} <br /> 
{/foreach} 
```

无论如何，正如@John Conde 所说， MySQL_ 函数已被弃用

# python - Django 语法错误

> ID：12874839
> 
> 赞同：0
> 
> 时间：2012-10-13T16:04:50.400
> 
> 标签：python, django, web-deployment

我正在关注 Django 教程，但我的一个观点遇到了问题。查看 django 的错误输出时，它告诉我第 62 行有错误：

```
yr = datetime.datetime(year, 1, 1)     months = 12 
```

这是整个视图：

```
def year(request):
    #http://site_name/year/
    post_error = ""
    year = int(year)
    yr = datetime.datetime(year, 1, 1)     months = 12
    by_month = []
    if Post.objects.filter(published__year=year).count():
    if year == datetime.datetime.now().year:
        months = datetime.datetime.now().month
    for month in range(1, months+1):
        by_month.append({datetime.datetime(year, month, 1):

    Post.objects.filter(published__month=month).filter(published__year=year)})
    elif year > datetime.datetime.now().year:
    post_error = "It is not yet %d, try an earlier year." % year
    else:
    post_error = "There are not posts for %d." % year
    return render_to_response('year.html', {'by_month':by_month, 'post_error':post_error,},) 
```

如果您需要我未提供的更多信息，请告诉我。谢谢！-克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T16:50:50.337

您在函数调用和 var 声明之间缺少换行符：

```
year = int(year)
yr = datetime.datetime(year, 1, 1)
months = 12
by_month = [] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T16:51:54.417

```
 yr = datetime.datetime(year, 1, 1)     months = 12 
```

一个错误：上一行中的缩进错误！将“months=12”声明移到下一行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T16:50:46.467

您在一行上有两个语句；这是一个语法错误。将它们放在两个单独的行上：

```
yr = datetime.datetime(year, 1, 1)
months = 12 
```

`;`从技术上讲，您还可以使用分号连接多个语句，但通常不鼓励这样做。

# ios - iOS：从钥匙串中查询所有存储的登录详细信息

> ID：12874846
> 
> 赞同：1
> 
> 时间：2012-10-13T16:47:31.380
> 
> 标签：ios, keychain

我有一个 iOS 应用程序，它可以连接到任意数量的不同服务，并且每个服务都有许多信息（例如服务名称、URL、登录名、密码等）。

我查看了钥匙串函数和包装函数（Apple 的[GenericKeychain](http://developer.apple.com/library/ios/#samplecode/GenericKeychain/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007797-Intro-DontLinkElementID_2)示例） 我所看到的示例似乎显示了为密钥存储和检索单个字典对象。

我的应用程序中的流程是 1\. 应用程序启动 2\. 检索所有存储的登录信息（目前我使用 NSUserDefaults 作为权宜之计） 3\. 使用存储的登录名找到的每个服务构造一个视图 4\. 用户选择其中一个服务（或可以添加新服务）并连接到它

所以我的问题是，你如何查询所有存储的登录信息？

为服务名称创建一个钥匙串，然后在检索保存的服务后，将其用作检索相关信息（例如帐户 URL、帐户密码）的密钥是个好主意吗？

# php - 单元测试在第 n 次调用函数时抛出异常

> ID：12874849
> 
> 赞同：10
> 
> 时间：2012-10-13T16:48:10.960
> 
> 标签：php, phpunit

假设您有一种最终归结为的方法

```
class Pager
{
    private $i;

    public function next()
    {
        if ($this->i >= 3) {
            throw new OutOfBoundsException();
        }

        $this->i++;
    }
} 
```

您将如何对此类进行单元测试。`next()`即测试是否在使用 PHPUnit的第三次调用时抛出异常？我已经添加了我的尝试作为答案，但我不确定这是否真的是要走的路。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-13T17:21:39.567

如何测试`null`前两个调用并测试抛出的异常，如下所示：

```
class PagerTest
{
    public function setUp()
    {
        $this->pager = new Pager();
    }

    public function testTooManyNextCalls()
    {
        $this->assertNull($this->pager->next());
        $this->assertNull($this->pager->next());
        $this->assertNull($this->pager->next());

        $this->setExpectedException('OutOfBoundsException');
        $this->pager->next();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T17:38:47.947

在进行单元测试时，避免测试*实现*细节非常重要。相反，您希望将自己限制为仅测试代码的*公共接口*。为什么？因为实现细节经常改变，但你的 API 应该很少改变。测试实现细节意味着随着这些实现的变化，您将不得不不断地重写您的测试，并且您不希望被困在这样做。

那么这对 OP 的代码意味着什么？让我们看一下公共`Pager::next`方法。`Pager`使用类 API的代码***并不关心***如何`Pager::next`确定是否应该抛出异常。它只关心*如果*`Pager::next`出现问题实际上会引发异常。

我们不想测试方法是如何决定抛出的`OutOfBoundsException`——这是一个实现细节。我们只想测试它是否在适当的时候这样做。

所以为了测试这个场景，我们模拟了一个`Pager::next`将抛出的情况。为了实现这一点，我们只需实现所谓的“测试接缝”。...

```
<?php
class Pager
{
    protected $i;

    public function next()
    {
        if ($this->isValid()) {
            $this->i++;
        } else {
            throw new OutOfBoundsException();
        }
    }

    protected function isValid() {
        return $this->i < 3;
    }
} 
```

在上面的代码中，受保护的`Pager::isValid`方法是我们的​​测试接缝。它在我们的代码中暴露了一个接缝（因此得名），我们可以锁定它以进行测试。使用我们新的测试接缝和 PHPUnit 的模拟 API，`Pager::next`对 的无效值抛出异常的测试`$i`是微不足道的：

```
class PagerTest extends PHPUnit_Framework_TestCase
{
    /**
     * @covers Pager::next
     * @expectedException OutOfBoundsException
     */
    public function testNextThrowsExceptionOnInvalidIncrementValue() {
        $pagerMock = $this->getMock('Pager', array('isValid'));
        $pagerMock->expects($this->once())
                  ->method('isValid')
                  ->will($this->returnValue(false));
        $pagerMock->next();
    }
} 
```

请注意，此测试特别不关心实现方法*如何*`Pager::isValid`确定当前增量无效。测试只是模拟方法在调用时返回`false`，以便我们可以测试我们的公共`Pager::next`方法是否在应该这样做时抛出异常。

PHPUnit 模拟 API 已[在 PHPUnit 手册的 Test Doubles 部分中](http://www.phpunit.de/manual/3.7/en/test-doubles.html)全面介绍。API 并不是世界历史上最直观的东西，但经过多次重复使用，它通常是有意义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T16:48:10.960

这是我目前所拥有的，但我想知道是否有更好的方法来做到这一点。

```
class PagerTest
{
    public function setUp()
    {
        $this->pager = new Pager();
    }

    public function testTooManyNextCalls()
    {
        for ($i = 0; $i < 10; $i++) {
            try {
                $this->pager->next();
            } catch(OutOfBoundsException $e) {
                if ($i == 3) {
                    return;
                } else {
                    $this->fail('OutOfBoundsException was thrown unexpectedly, on iteration ' . $i);
                }
            }

            if ($i > 3) {
                $this->fail('OutOfBoundsException was not thrown when expected');
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T17:10:52.717

你可以使用类似的东西：

```
class PagerTest extends PHPUnit_Framework_TestCase {

    /**
     * @expectedException OutOfBoundsException
     */
     public function testTooManyNextCalls() {
         $this->pager = new Pager();

         $this->pager->next();
         $this->pager->next();
         $this->pager->next();

         $this->assertTrue(false);
    }
} 
```

如果在第 3 次方法调用中抛出异常，则永远不应该到达总是失败的断言语句并且测试应该通过。另一方面，如果没有抛出异常，则测试将失败。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T16:57:54.907

您可以将值 $this->i 传递给异常实例化，这将是异常的消息。

```
class Pager
{
    private $i;

    public function next()
    {
        if ($this->i >= 3) {
            throw new OutOfBoundsException($this->i);
        }

        $this->i++;
    }
}
$a=new Pager();
$a->next();
$a->next();
$a->next();
$a->next();

//outputs: "Exception: 3" 
```

# javascript - Javascript 将数据附加到当前不活动的 HTML 文档

> ID：12874852
> 
> 赞同：1
> 
> 时间：2012-10-13T16:48:43.207
> 
> 标签：javascript, html, appendchild

```
 function updateTable(data1, data2) {
        var table = document.getElementById("placeWhereUpdateNeeded");
        var tr = document.createElement('tr');
        var td1 = document.createElement('td');
        var td2 = document.createElement('td');
        td1.appendChild(document.createTextNode(data1));
        td2.appendChild(document.createTextNode(data2));
        tr.appendChild(td1);
        tr.appendChild(td2);
        table.appendChild(tr);
     } 
```

问题是 Id("placeWhereUpdateNeeded") 在另一个 HTML 文档中（不是当前活动的）。甚至可以将数据添加到另一个 HTML 文档吗？目前，该代码将在活动 HTML 中搜索 Id（它不存在）。所以基本上，是否可以指定一个 HTML 文档，其中 getElementById 搜索 Id？我意识到这是一个非常愚蠢的问题，我才刚刚开始学习。欢迎任何帮助！

# ios - iPhone 应用程序、数据层和数据库服务器

> ID：12874853
> 
> 赞同：2
> 
> 时间：2012-10-13T16:49:02.933
> 
> 标签：ios, sql, iphone, ruby, layer

我在那里发现了很多类似的问题，但没有一个能真正具体回答我的一些问题。我将很快开发一个 iPhone 应用程序，该应用程序将从运行 windows sql server 的数据库服务器访问数据。我不确定用哪种语言编写 API 最好。我更喜欢 Ruby on Rails，但我读到使用 sql server 设置它存在障碍。我们可以在 .net 中创建 API，但我听说设置 JSON 有点麻烦。

你有什么建议？如果我做错了，让我知道最好的方法。我敢肯定，这大部分都取决于个人喜好，但我很乐意提供一些意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:31:11.913

我对在 .NET 中构建 JSON api 没有太多想法，但如果您打算使用 Rails，有几个选项可以从 Rails 连接到 SQL Server 数据库。

a) 使用 JRuby 和 jdbc 驱动程序，如 jTDS 。我确实想提一下，JRuby 在运行规范时有点慢，因为与 MRI 相比，每次引导 rails 环境需要更长的时间。（此经验基于几年前在一个项目中的工作经验，因此请自行尝试）。

b) 将 MRI ruby​​ 与[tiny_tds一起使用](https://github.com/rails-sqlserver/activerecord-sqlserver-adapter/wiki/Using-TinyTds)

# ruby-on-rails - 同时渲染 2 个视图？

> ID：12874855
> 
> 赞同：0
> 
> 时间：2012-10-13T16:49:46.397
> 
> 标签：ruby-on-rails, ruby, rest, web

我对rails有点陌生，如果这是一个愚蠢的问题，请原谅。

场景是：

我的事件控制器带有一个显示页面上所有事件的索引视图。现在，我想要实现的是：用户单击其中一个事件，灯箱出现，显示有关该事件的所有信息，所有其他事件仍在灯箱的深色背景后面。用户关闭灯箱并重复该过程。Pinterest 是我正在尝试做的一个很好的例子。

目前，我让这两个视图正常工作。用户单击该事件并被带到显示操作。

所以我想知道我正在尝试做的事情是否可以在rails（3.2.8）中完全实现（没有太多的黑客攻击），如果是这样，我会很感激我应该从哪里开始。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T16:57:27.187

据我了解您想要实现的目标，它与实际同时渲染 2 个视图无关。您所描述的只是使用灯箱进行 ajax 调用，打开一个 URL，在显示的 DIV 或 IFRAME 中呈现另一个视图（无论灯箱使用什么）......

根据您使用的 Rails 版本，这个实现看起来有点不同。但实际上你要做的只是在你的 Rails 应用程序中包含 LightBox2，只需添加适当的 JS 和 CSS 文件，然后在你的`link_to`调用中提供必要的类......

希望我的意思很清楚。

**更新**有关更多信息， 请参阅[此链接](https://stackoverflow.com/questions/1280793/lightbox-for-rails)。

# android - Android重新连接互联网问题

> ID：12874856
> 
> 赞同：0
> 
> 时间：2012-10-13T16:50:00.907
> 
> 标签：android, android-activity

在我的应用程序中，我设法确定是否存在连接，但我希望该应用程序本身尝试重新连接 5 次，并且每次增加重新连接之间的间隔我做了一些代码，但它不起作用，他立即给我响应.

这是我的重新连接课程：

```
 public class ReestablishConnection {
    Application APP = new Application();
    boolean status;
    int reconnectInterval = 1000;
    int i;

    public boolean reconnect(String URL){
        Thread timer = new Thread(){
            public void run(){
                    for(i=1;i<6;i++){
                        if(APP.testConnection(APP.defaultUrl()) == 0){
                            status = false;
                        }else if(APP.testConnection(APP.defaultUrl()) == 1){
                            status = true;
                        }
                        try {
                            sleep(reconnectInterval * i);
                        } catch (InterruptedException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }
                    }

            }
        };
        return status;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:45:26.267

您创建了一个新线程，它会休眠一段时间，但产生它的方法（重新连接）将立即返回。您应该使用带有 postDelayed() 的处理程序。

看看这里的答案：

[如何在 Android 中运行 Runnable 线程？](https://stackoverflow.com/questions/1921514/how-to-run-a-runnable-thread-in-android)

睡眠使用得太频繁了。正确的设计是在连接可用时实现一个侦听器，并在您的 UI 中响应侦听器回调。

# c# - 释放 XDocument 对象

> ID：12874869
> 
> 赞同：7
> 
> 时间：2012-10-13T16:51:16.707
> 
> 标签：c#, xml, linq-to-xml

如何“处置”一个 XDocument 对象？我正在使用它来解析 XML 字符串，然后将文件保存到文件系统。然后我需要以同样的方法访问该文件并在其上运行命令行工具。

代码如下：

```
string filepath = "...";
string filename = "...";
XDocument xdoc = XDocument.Parse(xmlString);
xdoc.Save(filepath + filename);

Process p = Process.Start(new ProcessStartInfo("rst.exe", args)); // the args use the file saved above 
```

我在调用命令行工具的行上放了一个断点，然后尝试自己手动打开文件，但在我停止调试器之前它不会加载。

**编辑：**感谢您的回答。我已经缩小了问题的范围.. 保存文件后，在“进程 p = ...”上设置断点，我*可以*打开文件，但无法使用`http://qualifiedapppath/path/file.xml`和命令行访问它我正在使用的工具将只接受 URL 作为参数。停止调试器后，我可以通过 http 访问该文件。在方法运行时，什么进程阻止了对它的访问？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T17:06:58.523

XDocument 是一个存储 XML 文档的内存副本的类。类实现 IDisposable 是因为它们使用内存以外的**非托管资源。**垃圾收集器已经可以很好地管理内存。

由于 XDocument 只消耗内存，因此不需要 Dispose 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T16:56:16.683

不，你没有——它甚至没有实现 IDisposable。XDocument 和 XElement 类在后台使用 XmlReader 并为您处理底层阅读器的处置。只需右键单击 XDocument 类并选择*Go To Definition*，您可能找不到该类实现的 IDisposable 。

要回收内存，请将 XDocument 对象引用设置为 null，GC 将重新收集获取的内存。

**添加：**

对于您问题的第二部分，如果文件以这种方式在本地可用，请使用此 Uri：

```
var uri = new Uri("file:///C:/path/file.xml"); 
```

您还可以使用以下代码验证文件位置：

```
if (uri.IsFile)
{
    var filePath = uri.LocalPath; // C:/path/file.xml
} 
```

如果您在 IIS 中配置虚拟目录来定位该文件，则可以使用 HTTP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T16:57:32.270

它没有实现 IDisposable 因此如果您只想释放它的内存，请将所有引用设置为 null 并且垃圾收集器将在需要时将其删除。

# jquery - 在 chrome bug 中重绘痕迹

> ID：12874873
> 
> 赞同：1
> 
> 时间：2012-10-13T16:51:51.270
> 
> 标签：jquery, css, google-chrome

我有一个带有动画的网站。
当动画在 chrome 中运行时，chrome 似乎无法重新绘制元素区域，并在元素所在的位置留下痕迹线。
有谁知道为什么会发生这种情况，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T19:05:08.963

我自己也遇到过这个问题，在谷歌的帮助下，我找到了一个与这个问题相关的[论坛帖子](http://forums.greensock.com/topic/6533-how-to-fix-rendering-artifacts-in-chrome/)，以及一个重现它的[jsFiddle 。](http://jsfiddle.net/geekambassador/F2J3s/)看起来（根据线程）此问题已在版本 23 中修复。我在版本 22.0.1229.94 m 上，问题出现在我的浏览器中。我不确定您是否可以采取任何措施来消除早期版本的 chrome 中的这个问题，我认为您只需要等到 23 版成为最新的稳定版并且每个人都升级他们的浏览器版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T01:06:59.953

试试谷歌金丝雀。[https://tools.google.com/dlpage/chromesxs](https://tools.google.com/dlpage/chromesxs)

如果它没有在这里发生，那就去吧；他们很快就会修补它。我有 css3 过渡的问题（尤其是在为从屏幕开始的东西设置动画时，它会留下残留的撕裂，看起来很可怕。

如果您真的很绝望，请尝试隐藏然后显示元素，它通常会将它们弹回原位，但这不是一个出色的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-21T18:16:17.803

我知道，这个错误很奇怪......不影响性能的最简单的解决方法似乎是设置可拖动/动画元素或容器的一些样式属性。

您应该可以通过设置边框或轮廓属性来修复它。例如：

```
 //body, .draggable
$(selector).css('outline', '1px solid transparent'); 
```

[jsFiddle 示例](http://jsfiddle.net/BYsza/)

# jquery - 使用 jQuery 检测 iPad 的纵向方向

> ID：12874880
> 
> 赞同：0
> 
> 时间：2012-10-13T16:53:30.667
> 
> 标签：jquery

我有一些 jQuery，但希望它只在 iPad 处于纵向模式时运行，悬停 iPad（在横向模式下）处理脚本......

```
var portraitWidth = $(window).width(); //detect the iPad in Portrait orientation
    if (portraitWidth < 769) {
        $('.model-selector h2:first-child').toggle(function () {
            $(this).parent().animate({
                top: '-138px'
            }, 250);
        }, function () {
            $('.model-selector').animate({
                top: '-45px'
            }, 250);
        });
    } 
```

我究竟做错了什么？

提前致谢..

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-11-04T18:49:43.367

我有同样的问题。我认为 innerWidth() 对我有用，因为 .width() 只会测试不会改变的设备的实际宽度......

# java - 通过 Android 应用在 images.google.com 上搜索

> ID：12874882
> 
> 赞同：1
> 
> 时间：2012-10-13T16:53:45.513
> 
> 标签：java, android

我是第一次开发一个android应用程序。我可以使用以下代码进行 www.google.com 搜索：

```
 public void onSearchClick(View v) {
    try {
        Intent intent = new Intent(Intent.ACTION_WEB_SEARCH);
        String term = editText.getText().toString();
        intent.putExtra(SearchManager.QUERY, term);
        startActivity(intent);
    } catch (Exception ex) {

    }

} 
```

但是是否也可以在 images.google.com 上进行类似的搜索（使用在 editText-widget 中填写的单词）？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T04:35:05.447

我找不到优雅的方式。`intent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://images.google.com/search?num=10&hl=en&site=&tbm=isch&source=hp‌​&amp;biw=1366&bih=667&q=cars&oq=cars&gs_l=img.3..0l10.748.1058.0.1306.4.4.0.0.0.0.165‌​.209.2j1.3.0...0.0...1ac.1.8RNsNEqlcZc"));`但是你可以使用这个:)`q='Your_search_text'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-24T15:51:45.393

聚会有点晚了。

我试图做同样的事情，偶然发现了这个[Android：谷歌图片搜索结果](https://stackoverflow.com/questions/17082174/android-google-images-search-results) ，发现下面的查询应该更“优雅”——但当然不能保证谷歌不会改变它——：

以“猎豹”为例进行查询，

```
https://www.google.com/search?tbm=isch&q=cheetah 
```

应该做的伎俩。

This should have come close to Shashank Kadne's suggestion in the comment above.

# php - 在服务器上创建临时目录

> ID：12874883
> 
> 赞同：1
> 
> 时间：2012-10-13T16:53:47.797
> 
> 标签：php, linux, webserver

是否可以在托管服务器上创建一个与根目录中的 tmp 文件夹具有相同功能的临时目录？

我需要第二个 tmp 文件夹来临时存储要上传到另一个 Web 服务的文件。我想避免`unlink()`删除文件的函数或 cron 作业。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T17:07:15.670

是的，你可以....使用[System::mktemp](http://pear.php.net/manual/en/core.pear.system.mktemp.php)

```
$tempfile = System::mktemp("prefix");       
$tempdir  = System::mktemp("-d prefix");
$tempfile = System::mktemp();
$tempfile = System::mktemp("-t /var/tmp prefix"); 
```

或者您可以使用 exec 运行命令

```
 mktemp  make temporary dirname 
```

# r - 在 R 中过滤数据框时遇到问题

> ID：12874884
> 
> 赞同：0
> 
> 时间：2012-10-13T16:53:52.750
> 
> 标签：r

我将 csv 文件导入数据集。现在我想将从第 i 行开始的 48 行数据块复制到一个新数据帧中，然后跳过 3 个 48 行块，然后将第 4 个 48 行块附加到新数据帧的末尾，依此类推，直到数据框的结尾。我在这个问题上花了很多时间都没有成功。提前感谢任何可能的提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:00:39.607

非常简单的oneliner：

```
new.df <- old.df[ c( rep( F, i - 1 ), rep( T, 48 ), rep( F, 48 * 3 ), rep( T, 48 ) ), ] 
```

但是，嘿，让我们让它更简单：

```
new.df <- old.df[ c( rep( F, i - 1 ), rep( c( T, F, F, F, T ), each=48 ) ), ] 
```

甚至

```
new.df <- old.df[ i - 1 + which( rep( c( T, F, F, F, T ), each=48 ) ), ] 
```

解释：

我们创建一个真/假值向量；将选择对应于 T 的行。我们使用 c() 来连接块。首先，我们跳过 i - 1 (F)，然后我们取 48 (T)，然后我们跳过 3 * 48，我们再次取一个 48。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T16:58:50.717

```
df <- data.frame(x = 1:1000, y = rnorm(1000))
> dim(df)
[1] 1000    2
# see that it has 1000 rows.
# let's say I want to copy 48 rows from row 102
new_df <- df[102:(102+48), ]
# or I do it with a variable
i <- 102
j <- i + 48
new_df <- df[i:j, ]
# If you need an uneven range, just make a vector
# Either specify a range of rows or just row numbers
rows_i_want <- c(1:48, 52, 55, 100:120, 128)
new_new_df <- df[rows_i_want, ] 
```

下面是一个通用函数的例子，它可以为任何`data.frame`

```
# This function takes a data.frame and a starting index and a block size
keep_rows <- function(df, i, block = 48) {
    # Grab the number of rows remaining in the df from i to end
    nr <- nrow(df[i:nrow(df), ])
    if(i>nr)
        stop("index is too high")

    start <- seq(i, nr, by = block)

    if(length(start)==1)
        stop("index is too high")

    end <- c(start[2:length(start)], nrow(df))
    df2 <- data.frame(start, end)
    ranges <- apply(df2, 1, function(x) { x[[1]]:x[[2]]})
    to_keep <- rep(c(T,F,F,F,T), floor(round(nr/block)))
    return(df[to_keep[1:length(ranges)],])
} 
```

# javascript - 我通常使用 setInterval 轮询器等待异步事件集合完成。有没有更好的办法？

> ID：12874887
> 
> 赞同：0
> 
> 时间：2012-10-13T16:54:19.140
> 
> 标签：javascript, jquery

> **可能重复：**
> [每个（）函数内的多个ajax调用..然后在所有这些都完成后做一些事情？](https://stackoverflow.com/questions/8726046/multiple-ajax-calls-inside-a-each-function-then-do-something-once-all-of-the)

考虑以下函数：

```
function suggestSong(songs){
    console.log("Suggesting song from songs:", songs);
    var self = this;
    var totalRelatedVideos = [];
    var count = 0;

    $.each(songs, function(){
        count++;
        self.getRelatedVideos(this.videoId, function(relatedVideos){
            count--;
            totalRelatedVideos = totalRelatedVideos.concat(relatedVideos);
        });
    });

    var maxWaitTime = 1000; 
    var waitTime = 200;
    var elapsedTime = 0;
    var waitInterval = setInterval(function(){
        elapsedTime += waitTime;
        if(count == 0 || elapsedTime >= maxWaitTime){
            clearInterval(waitInterval);
            console.log("I found related videos: " + totalRelatedVideos.length);
        }
    }, waitTime );
}; 
```

这就是我目前实现在执行另一段代码之前等待异步事件集合完成的方式。不过，有很多代码要做的很少。我想知道是否有一种不那么钝的方法可以达到相同的结果？

# haskell - 显示字符串时删除反斜杠？

> ID：12874893
> 
> 赞同：0
> 
> 时间：2012-10-13T16:55:24.473
> 
> 标签：haskell

我有将字符串连接到参数输入的参数方法：

```
foo::(Show a) => a -> String
foo f = show f ++ " string" 
```

当我不传递字符串时很好，但是当我传递字符串时，我会得到额外的黑斜线。

有什么办法可以避免吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T17:09:37.377

`show`不是真正的`toString`等价物，而是一个`inspect`或`var_dump`等价物。它不适用于格式化人工输出。

您可以考虑[http://hackage.haskell.org/package/text-format](http://hackage.haskell.org/package/text-format)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T22:10:11.820

不了解“标准”库函数，但可以通过自己的类似显示的实现简单地完成：

```
class StrShow a where
    showStr :: a -> String

instance StrShow String where
    showStr = id
instance Show a => StrShow a where
    showStr = show

GHCi> showStr 1
"1"
GHCi> showStr "hello"
"hello" 
```

这样，您不需要额外的库，但如果这不是问题，则必须使用大量 ghc 的扩展（TypeSynonymInstances、FlexibleInstances、UndecidableInstances、OverlappingInstances）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T21:48:31.453

这样做的一种方法是使用 Typeable 类，虽然不是很好，但它肯定是可能的。

```
import Data.Maybe (fromMaybe)
import Data.Typeable (cast)
foo :: (Show a, Typeable a) => a -> String
foo f = fromMaybe (show f) (cast f) 
```

但是，这将它限制为 Typeable 类的成员（它包含在基类中，因此您不需要依赖任何更多的库，并且大多数东西都会定义它）。

这通过检查是否`f`是 a `String`（或假装是 a `String`，这只会发生在某人在编写库时真的很邪恶时才会发生），如果是，则返回它，否则显示它。

# ruby - 如何在 Ruby 的正则表达式中使用 şŞıİçÇöÖüÜĞğ 字符？

> ID：12874894
> 
> 赞同：3
> 
> 时间：2012-10-13T16:55:33.907
> 
> 标签：ruby, regex, character-encoding

我尝试使用正则表达式来捕获名称：

```
r[1].scan(/^([A-Z]|[ŞİÇÖÜĞ])([a-z]|[şŞıİçÇöÖüÜĞğ])*\s([A-Z]|[ŞİÇÖÜĞ])([a-z]|[şŞıİçÇöÖüÜĞğ])*/u) 
```

但是，它给了我一个错误：

```
syntax error, unexpected $end, expecting ')'
...atches = r[1].scan(/^([A-Z]|[ŞİÇÖÜĞ])([a-z]|[şŞ�...
... 
```

我发现问题出在我使用的土耳其语字符上。是否可以在正则表达式中使用字符的 unicode 值？如何在这个正则表达式中使用这些有问题的字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T21:59:09.590

1.  使用红宝石 1.9
2.  一起去`/\p{Word}+\p{Space}\p{Word}*/`

# java - 如何使用 Java AWT setBackground

> ID：12874896
> 
> 赞同：3
> 
> 时间：2012-10-13T16:55:42.773
> 
> 标签：java, swing, user-interface, colors, awt

这是一些创建基本 java 窗口的代码：

```
JPanel pane = new JPanel();
gui(String title){
    super(title);
    setBounds(100,100,500,500);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    Container con = this.getContentPane();
*   con.setBackground(new Color(0,0,0));
    con.add(pane);
    setVisible(true);
} 
```

标有星号 (*) 的线旨在使窗口的背景颜色变为黑色 (0,0,0)。然而，这条线似乎什么也没做。（我在`pane.setBackground`这里尝试过使用，但这没有区别。）

如何更改背景颜色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T17:01:03.080

您已经添加了`JPanel`over ，`JFrame`它完全阻挡了您设置颜色的底层容器。

你可以这样做：

```
public Gui(String title) {
   super(title);
   JPanel pane = new JPanel();
   setBounds(100, 100, 500, 500);
   setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   Container con = this.getContentPane();
   pane.setBackground(new Color(0, 0, 0));
   con.add(pane);
   setVisible(true);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:01:15.217

您不能为 JFrame 的内容窗格设置背景颜色。我的意思是：

```
 JFrame f = new JFrame() ;
 f.setBackground(Color.RED) ; 
```

但是，您应该做的是创建一个 JPanel，它将充当您的背景并设置其颜色，如下所示：

`backgroundPanel.setBackground(Color.RED);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-30T12:26:55.883

```
Jframe f =new Jframe();
f.setBackground(Color.red); 
```

这也可能解决手头的问题。

# jquery - How to create a JSON array in JQuery?

> ID：12874897
> 
> 赞同：3
> 
> 时间：2012-10-13T16:55:55.683
> 
> 标签：jquery, arrays, json

I want to create a JSON array like this:

```
var ddBasic = [
    { text: "Facebook", value: 1, },
    { text: "Twitter", value: 2, },
    { text: "LinkedIn", value: 3, },
    { text: "Foursquare", value: 4, }
]; 
```

I'm using data from last.fm, so it would be something like this:

```
var tags = [
        { text: "rock", value: "rock", },
        { text: "pop", value: "pop", },
    ]; 
```

It needs to have a comma at the end so the [ddslick](http://designwithpc.com/Plugins/ddSlick#demo) dropdown function ignores the imageSrc and other things it can use for a dropdown, other it throws this error:

```
Uncaught TypeError: Cannot read property 'imageSrc' of undefined 
```

To tie everything together, I have:

```
$('#tag').ddslick({
    data: tags,
    onSelected: function(selectedData) {}   
}); 
```

This is the function that gets the tags:

```
var tags = [];

var getTopTracks = function () {
    $.getJSON(
    settings.PHP_REQUEST_URL, {
        method: "tag.getTopTags",
        api_key: settings.LASTFM_APIKEY,
        format: "json",
    },

    function (data) {
        var limit = 50;

        data.toptags.tag.sort(function (t1, t2) {
            return t2.count - t1.count;
        });

        $.each(data.toptags.tag, function (i, item) {
            if (i > limit) return false;
            console.log(item.name);
            tags.push({
                text: item.name,
                value: item.name
            });
        });
    });
};

// event handlers (load quando o form é invocado só)
getTopTracks();
alert(tags.length);

// define tema para a combobox   
$('#tag').ddslick({
    data: tags,
    onSelected: function (selectedData) {}
}); 
```

How can I accomplish this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:22:31.893

```
var tags = []; //initialised tags with length 0
getTopTracks(); //fetching date in background (!)
alert(tags.length); //running while data is still fitched (unless you've a 0ping connection => alerting length 0 
```

At the point you use the alert it's very likely `tags` is not filled as `$.getJSON()` is an *asynchronus* request, meaning the request will be handled in the background and execution of the script continues. You have to use the callback method as you already did for filling up the array.

```
This, getJSON, is a shorthand Ajax function, which is equivalent to:
$.ajax({   
   url: url,
   dataType: 'json',
   data: data,
   success: callback
}); 
```

[http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

```
//getJSON success callback:
function (data) {
    var limit = 50;

    data.toptags.tag.sort(function (t1, t2) {
        return t2.count - t1.count;
    });

    $.each(data.toptags.tag, function (i, item) {
        if (i > limit) return false;
        console.log(item.name);
        tags.push({
            text: item.name,
            value: item.name
        });
    });
    //alert the length AFTER the tags been pushed
    alert(tags.length);

    // define tema para a combobox   
    $('#tag').ddslick({
        data: tags,
        onSelected: function (selectedData) {}
    });
} 
```

# python - python中的双积分

> ID：12874898
> 
> 赞同：0
> 
> 时间：2012-10-13T16:56:01.040
> 
> 标签：python, scipy

我想在python中做一个双积分。从[http://docs.scipy.org/doc/scipy/reference/tutorial/integrate.html 获得](http://docs.scipy.org/doc/scipy/reference/tutorial/integrate.html)帮助，我做了以下

```
import numpy as np
import matplotlib.pyplot as plt
from scipy import integrate

def func(x,a):
    return a*x*x

def integrl(a):
    return integrate.quad(func,0,10,args=(a))

print integrate.quad(lambda x: integrl(x),0,1) 
```

但我收到以下错误

```
Traceback (most recent call last):
File "test.py", line 12, in <module>
print integrate.quad(lambda x: integrl(x),0,1)
File "/usr/lib/python2.7/dist-packages/scipy/integrate/quadpack.py", line 245, in quad
retval = _quad(func,a,b,args,full_output,epsabs,epsrel,limit,points)
File "/usr/lib/python2.7/dist-packages/scipy/integrate/quadpack.py", line 309, in _quad
return _quadpack._qagse(func,a,b,args,full_output,epsabs,epsrel,limit)
quadpack.error: Supplied function does not return a valid float. 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:03:52.723

错误在于`integrl`功能。在那我应该指定要集成的参数。正确的代码应该是

```
import numpy as np
import matplotlib.pyplot as plt
from scipy import integrate

def func(x,a):
   return a*x*x

def integrl(a):
   return integrate.quad(func,0,10,args=(a))[0]

print integrate.quad(lambda x: integrl(x),0,1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:13:02.533

用这个改变 integrl 的返回：

```
return integrate.quad(func,0,10,args=(a))[0] 
```

默认情况下，integrate.quad 函数返回一个包含积分值和绝对误差估计的元组：[scipy doc](http://docs.scipy.org/doc/scipy/reference/generated/scipy.integrate.quad.html)

# javascript - Javascript通过id禁用表单字段元素（id是一个数组）

> ID：12874899
> 
> 赞同：0
> 
> 时间：2012-10-13T16:56:07.107
> 
> 标签：javascript

我正在构建一个循环事件模块以放入一个表单，这个模块有几个字段。

我已经使用数组表示法命名并标识了每个模块。例如：

```
 id='recurring_event_options[yearly][by_date_day_number]' 
```

在我的 JS 中，我需要使用匹配的 id 定位所有字段`recurring_event_options`

我有一些运行良好的 JS 可以根据需要启用（非禁用）字段，但在我运行它之前，我需要禁用此模块中的所有字段。

我一直在使用与此类似的东西来禁用这些字段：

```
function disableForm(theform) {
        if (document.all || document.getElementById) {
            for (i = 0; i < theform.length; i++) {
            var formElement = theform.elements[i];
                if (true) {
                    formElement.disabled = true;
                }
            }
        }
    } 
```

正如您所看到的，这会影响表单中的每个字段——这不是我想要的——只是为了禁用属于`recurring_event_options`父 ID 的字段。

我有一种感觉，我可能无法在 ID 中使用 [] 符号，所以欢迎提出建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T17:03:54.580

首先，我认为使用`[]`. 您可以使用连字符`-`或下划线`_`来分隔值：

```
id='recurring_event_options-yearly-by_date_day_number' 
```

现在您可以禁用：

```
function disableForm(theform) {
    for (i = 0; i < theform.length; i++) {
        var formElement = theform.elements[i];
        if (formElement.id.indexOf("recurring_event_options") !== -1) {
            formElement.disabled = true;
        }
     }
} 
```

这应该有效。但在我看来，如果你改用一个类会更好：

```
<input type="text" class="recurring_event_options prop2 prop3" /> 
```

因为class属性被设计成支持多个值，用空格隔开

# node.js - Node.js + Express + Jade :: render( ... ) 在 Node v.0.8.12 中超时

> ID：12874906
> 
> 赞同：0
> 
> 时间：2012-10-13T16:56:50.523
> 
> 标签：node.js

我已经使用 Node.js + Express + Jade 很长时间了。自从升级到节点 0.8.12 后，render( ... ) 命令在我的生产服务器上只是超时。

在这个例子中，“1”被打印到日志，但“2”不是，并且页面超时。当然，我确实有一个名为views/test.jade 的文件。而且，这再次在我的测试服务器上使用相同的代码运行良好......

```
console.log('1');
res.render('test');
console.log('2'); 
```

所以我将 Node.js 降级回 0.6.18（我之前使用的）并且代码再次正常工作。但是我需要更新的节点版本……我能想到的一个主要区别是，0.6.18 是通过 YUM 安装在 CentOS 上的，但我不得不自己制作 v0.8.12，因为我找不到合适的包。

这是我尝试过的：

*   升级快递（@3.0.0rc5）和翡翠（@0.26.3）
*   在 render() 函数中使用回调（它永远不会被调用）
*   通过 app.set('views', absolute_path); 显式设置 views/ 目录
*   故意使用无效的模板名称来尝试获取错误。仍然没有（没有触发回调，没有执行）
*   哭泣

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T19:13:34.877

确保`jade`已正确安装。如果渲染调用超时，则很可能意味着抛出了您未处理的错误。您可以像这样检查抛出的错误：

```
try {
   res.render('test');
}
catch (e) {
   console.log(e);
} 
```

由于`render`不依赖太多，我猜该`jade`模块没有正确安装。确保`jade`在您的`node_modules\express`文件夹中看到。如果没有，请尝试重新安装：

```
npm install express 
```

# php - getUser() 在 Web 服务器上返回 0 但在本地主机上正常

> ID：12874907
> 
> 赞同：1
> 
> 时间：2012-10-13T16:56:55.657
> 
> 标签：php, facebook, graph

一个月前我托管了两个应用程序，但今天早上我注意到，当**getuser(); 时它没有显示 UserInfo；**被处决。只显示0。在它工作顺利之前。这两个应用程序都不能在 Web 服务器上运行。但在本地主机上工作正常。请帮帮我。我什至对用户进行身份验证，然后转到其他页面。下面是我的代码

```
require_once 'appinclude.php';
include_once "src/facebook.php";
$facebook = new Facebook(array(
    'appId' => $appid,
'secret' => $appsecret,
    'cookie' => true,
));
$user = $facebook->getUser();
if($user) {
try {
    $me = $facebook->api('/me','GET');
    $fname = $me['first_name'];

} catch(FacebookApiException $e) {
    error_log($e);
}
   }   else {

 $loginUrl = $facebook->getLoginUrl();
echo("<br>login url=".$loginUrl);
 } 
```

提前致谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T14:25:37.180

它触发了错误**Curl Exception 7，无法连接到主机**，这是导致此问题的原因。转到**pico /etc/hosts**并输入此行
69.171.224.34 graph.facebook.com

它可能会对您有所帮助，也可以将此处列出的 IP 范围列入白名单 [http://developers.facebook.com/docs/ApplicationSecurity/#facebook_scraper](http://developers.facebook.com/docs/ApplicationSecurity/#facebook_scraper)

# php - 使用 php 实现 Gravatar - 如何将邮件地址连接到“$email”变量

> ID：12874913
> 
> 赞同：0
> 
> 时间：2012-10-13T16:57:45.827
> 
> 标签：php, drupal, drupal-7, gravatar

Gravatar 在以下页面上有其 php 实现的描述：

[https://en.gravatar.com/site/implement/images/php/](https://en.gravatar.com/site/implement/images/php/)

我正在尝试使用此代码在 Drupal 的用户配置文件和用户图片中实现它。

我创建了一个预处理函数来启用在 user-profile.tpl.php 中打印电子邮件地址

```
function THEMENAME_preprocess_user_profile(&$variables) {
    $account = $variables['elements']['#account'];
    foreach (element_children($variables['elements']) as $key) {
        $variables['user_profile'][$key] = $variables['elements'][$key];
    }
    $variables['user_profile']['mail'] = $account->mail;
    field_attach_preprocess('user', $account, $variables['elements'], $variables);
} 
```

将代码添加到**user-profile.tpl.php**

```
print render($user_profile['mail']); 
```

此代码按预期工作 - 它在用户配置文件中显示邮件地址。现在我需要使用该地址在个人资料和用户图片中创建 gravatar。

我以某种方式尝试将 Gravatar 网站上的教程和此代码连接起来，但没有成功。这是代码（我已经尝试了至少 20 种不同的组合）：

```
$email = "['user_profile']['mail']";
$default = "http://www.somewhere.com/homestar.jpg";
$size = 40;
function get_gravatar( $email, $s = 80, $d = 'mm', $r = 'g', $img = false, $atts = array() ) {
        $url = 'http://www.gravatar.com/avatar/';
        $url .= md5( strtolower( trim( $email ) ) );
        $url .= "?s=$s&d=$d&r=$r";
        if ( $img ) {
            $url = '<img src="' . $url . '"';
            foreach ( $atts as $key => $val )
                $url .= ' ' . $key . '="' . $val . '"';
            $url .= ' />';
        }
        return $url;
    } 
```

据我了解，问题出在这一行：

```
$email = "['user_profile']['mail']"; 
```

我做错了什么，在这一行的引号之间放置的正确表达是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T20:36:47.440

问题是关于基本的PHP语法，`$variables['user_profile']['mail']`用于简单访问嵌套数组（即数组中的数组。此外，如果`print render($user_profile['mail']);`显示用户电子邮件地址，`$user_profile['mail']`显然是要传递给您的自定义`get_gravatar()`函数的电子邮件地址。

```
$variables['user_profile']['gravater_url'] = get_gravatar($user_profile['mail']); 
```

我建议使用[Gravatar 集成模块](https://drupal.org/project/gravatar)，而不是编写自己的实现。

# java - 一个简单的多线程闹钟

> ID：12874914
> 
> 赞同：1
> 
> 时间：2012-10-13T16:57:49.290
> 
> 标签：java, multithreading, concurrency, semaphore

我目前正在研究多线程编程，并且很难掌握线程之间的共享资源。

我有两个共享资源，`time`并且`alarm`

我有三个线程，一个`time`每秒不断更新，一个监控`time`，`alarm`最后一个根据用户请求`time`进行更改`alarm`。

这是使用互斥信号量来完成的，我有一个简单的设置，如下所述：

1.  `Main`线程，程序从这里开始，宿主`time`和`alarm`公共变量并实例化子线程。
2.  `Tick`子线程，每1000ms休眠一次，然后修改`Mother`线程的`time`变量
3.  `UserInput`子线程，在捕获用户输入之前被阻塞，并在线程中修改`time`或修改。`alarm``Main`
4.  `Alarm`子线程，每 1000 毫秒休眠一次，当`alarm`==时关闭`time`

线程为每个资源保留一个互斥锁，`Main`因此一次只有一个线程可以访问它。

这样的设计是合理的还是我只是把事情复杂化了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:51:00.310

我的第一条评论是关于您使用的语言，这可能表明您存在一些误解。线程不**拥有**任何变量；这可能意味着您已经声明了`Thread`. 如果是这样，这将不是一个可取的方法。请注意，这只是一个类的名称，它不是实际的线程——与不是文件`Thread`的方式完全相同。`File`你还没有发布任何代码，所以我必须求助于猜测，但如果我描述的是真的，那么你应该重新设计。使用普通类（不子类化任何东西）并`Thread`使用`Runnable`.

其次，您对“互斥锁”的含义不是很清楚，因为这不是 Java 语言规范定义的术语。如果您的意思是`java.util.concurrent`包中的某些内容，例如`Semaphore`，这将是矫枉过正；如果您只是`Object`指用作锁的普通 Java 实例，那将是一种简单直接的方法。但是请注意，您根本不需要任何锁定：对于两个时间戳值，`volatile`变量就足够了，或者最多`AtomicLong`s（或您使用的任何类型），因此您可以原子地更新它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:00:39.230

我想你可以简单地使用[ScheduledExecutorService](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ScheduledExecutorService.html)

这是一个类，其方法将 ScheduledExecutorService 设置为每隔十秒发出哔声，持续一小时：

```
import static java.util.concurrent.TimeUnit.*;
class BeeperControl {
private final ScheduledExecutorService scheduler = 
   Executors.newScheduledThreadPool(1);

public void beepForAnHour() {
    final Runnable beeper = new Runnable() {
            public void run() { System.out.println("beep"); }
        };
    final ScheduledFuture<?> beeperHandle = 
        scheduler.scheduleAtFixedRate(beeper, 10, 10, SECONDS);
    scheduler.schedule(new Runnable() {
            public void run() { beeperHandle.cancel(true); }
        }, 60 * 60, SECONDS);
   }
} 
```

# ios - 如何在 UI 线程中运行代码从其他线程调用它

> ID：12874917
> 
> 赞同：33
> 
> 时间：2012-10-13T16:58:23.720
> 
> 标签：ios

在 Android 中，有几种方法可以在其他主线程中运行一些代码：

```
 1\. Activity.runOnUiThread(Runnable r)
 2\. new Handler.post(Runnable r);
 3\. View.post 
```

iOS中的类似物是什么？

```
 dispatch_async(dispatch_get_main_queue(), ^{

    }); 
```

还有什么？

提前致谢。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-10-13T17:32:07.017

现在首选的方法是使用 GCD，并使用您在问题中引用的代码：

```
dispatch_async(dispatch_get_main_queue(), ^{
    // Your code to run on the main queue/thread
}); 
```

如果您更喜欢使用比 GCD 更面向对象的方法，您也可以使用`NSOperation`（如`NSBlockOperation`）并将其添加到`[NSOperationQueue mainQueue]`.

```
[[NSOperationQueue mainQueue] addOperationWithBlock:^{
    // Your code to run on the main queue/thread
 }]; 
```

*这与 的作用完全相同`dispatch_async(dispatch_get_main_queue(), …)`，其优点是比普通 C GCD 函数更面向 Objective-C/POO，但缺点是需要为创建`NSOperation`对象分配内存，而您可以使用普通 C 和GCD。*

* * *

我推荐使用 GCD，但还有其他方法，比如允许您从主线程调用给定对象上的选择器（方法）的两种方法：

*   `- (void)performSelectorOnMainThread:(SEL)aSelector withObject:(id)arg waitUntilDone:(BOOL)wait`（NSObject 的方法，因此它可以在任何对象上调用）
*   发送`- (void)performSelector:(SEL)aSelector target:(id)target argument:(id)anArgument order:(NSUInteger)order modes:(NSArray *)modes`到`[NSRunLoop mainRunLoop]`

但是这些解决方案不如 GCD 灵活`NSOperation`，因为它们只允许您调用现有方法（因此您的对象必须有一个已经存在的方法并执行您想要执行的操作），而 GCD or`-[NSOperationQueue addOperationWithBlock:]`允许您通过任意代码（使用块）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-08T21:00:43.950

Swift 5+ 示例

```
DispatchQueue.main.async {
    // UI code
}

DispatchQueue.main.asyncAfter(deadline: .now() + 0.5) {
    // UI code
} 
```

# bash - 'have' 用于完成 bash 的关键字

> ID：12874920
> 
> 赞同：19
> 
> 时间：2012-10-13T16:59:25.063
> 
> 标签：bash, autocomplete

是`have`bash中的关键字吗？或者 bash 完成脚本使用不是 bash 的语言？

```
have gcc &&
_gcc()
{ 
```

这很正常。看：`grep "have .* &&" /etc/bash_completion.d/*`

我找不到任何关于我看过的 bash 补全教程的信息，也找不到`man bash`. 谷歌“拥有”也很困难。我在哪里可以找到这方面的文档？

我猜这与确保`gcc`存在于`PATH`?

编辑：是的。`/etc/bash_completion`包含：

```
have()
{
    unset -v have
    # Completions for system administrator commands are installed as well in
    # case completion is attempted via `sudo command ...'.
    PATH=$PATH:/sbin:/usr/sbin:/usr/local/sbin type $1 &>/dev/null &&
    have="yes"
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-13T17:05:48.273

`have`并且`_have`只是基本`bash_completion`文件中定义的两个函数。在两者之间，它们围绕内置`type`命令形成一个包装器，以确定特定命令/程序是否可用。

```
# This function checks whether we have a given program on the system.
#
_have()
{
    # Completions for system administrator commands are installed as well in
    # case completion is attempted via `sudo command ...'.
    PATH=$PATH:/usr/sbin:/sbin:/usr/local/sbin type $1 &>/dev/null
}

# Backwards compatibility for compat completions that use have().
# @deprecated should no longer be used; generally not needed with dynamically
#             loaded completions, and _have is suitable for runtime use.
have()
{
    unset -v have
    _have $1 && have=yes
} 
```

# mysql - SELECT 中的 COUNT() 未产生所需的输出

> ID：12874922
> 
> 赞同：3
> 
> 时间：2012-10-13T16:59:30.447
> 
> 标签：mysql, sql

我有 2 张桌子：

美国各州城市：
![美国各州城市](../Images/e520f797aab3666185a2bbec2990ebf1.png)

和 usstatescentroids：
![usstatescentroids](../Images/295614527f71204a340a6da33973fb4c.png)

```
SELECT state,COUNT(*) AS  count  FROM usStateCities  GROUP BY state 
```

给出每个州的城市数量

```
SELECT *
FROM (SELECT state, COUNT(*)  AS count FROM  usstatecities ) AS a,
usstatescentroids b
WHERE a.state = b.state
GROUP BY state 
```

只给出美国的一个州和城市总数我想找到每个州的城市数量和每个州质心的坐标（经度，纬度）。

更正我已将状态更改为状态。我剪切并粘贴了较旧的语句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T17:10:01.067

```
SELECT a.state, a.count, b.lon, b.lat 
FROM (SELECT State, COUNT(*) AS count FROM usStateCities GROUP BY State) a
LEFT JOIN usstatescentroids b ON b.state = a.State 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-13T17:07:15.420

我更喜欢使用连接表然后子查询。试试下面：

```
SELECT b.State, b.lon, b.lat, COUNT(*) AS  count  
FROM usStateCities  a, usstatescentroids b
WHERE a.state = b.state
GROUP BY b.State, b.lon, b.lat 
```

# c++ - C++ 通用链表分离类

> ID：12874923
> 
> 赞同：0
> 
> 时间：2012-10-13T16:59:38.133
> 
> 标签：c++, templates, generics, data-structures, linked-list

我一直在努力`linked list`实现。以前我让它只`char`作为数据类型工作。我尝试实现泛型/模板，所以我可以使用任何数据类型。

我的项目中有 4 个文件。`Clist.h, Clist.cpp, Main.cpp and EmptyListException.h`.

以前，当我`Clist.cpp`与我的`Main.cpp`. 然后我也复制了整个班级`Main.cpp`，它运行没有问题。

有没有办法我可以做到这一点，以便我`Clist.cpp`可以与我的主文件（这是一个测试工具`linked list`）分开。

如果有帮助，我可以发布代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:03:49.973

要使模板正常工作，它们不能在 *.h 文件和 *.cpp 文件之间分开。编译器需要查看模板的实现才能使用它。

看到这个类似的问题：[Splitting templated C++ classes into .hpp/.cpp files-is it possible?](https://stackoverflow.com/questions/1724036/splitting-templated-c-classes-into-hpp-cpp-files-is-it-possible)

# iphone - 如何在我的 iPhone 应用程序中为这个自定义视图过渡设置动画？

> ID：12874924
> 
> 赞同：1
> 
> 时间：2012-10-13T16:59:45.753
> 
> 标签：iphone, ios, uikit, core-animation

这是一个很难解释的问题，但基本上我有一个带有主屏幕的应用程序，上面有一堆圆形图标。当用户点击一个图标时，它会将一个表格视图推送到导航堆栈上。在主屏幕上点击图标时，我希望点击的图标在滚动时保持在表格视图的顶部，然后放到代表它的单元格中的表格视图上。然而，所有其他图标应该像正常一样保持在传入的表格视图下方。这是我制作的快速图表...

![在此处输入图像描述](../Images/8661bae350cfc7c053fbac4deae766c6.png)

我即将开始研究这个，我只是想快速发布这个问题，以防有人对我如何解决这个问题有一些想法。非常感谢你的智慧！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:06:14.390

哦，太容易了！！！

我将尝试解释我的解决方案：

您需要两组图标。

一组位于主视图上，第二组是确切位置，但作为主窗口上的子视图（默认情况下 - 隐藏）

一旦您选择了一个按钮，并且想要推送一个列表 - 您取消隐藏相应的窗口子视图图标，并延迟 - 将其动画/缩小到 tableView 相应的位置。

动画完成后 - 隐藏图标（即时隐藏将不明显，因为此图标将被定位/缩放以在表格视图中精确重新组合图标），并将其移动到默认位置/比例（仍然隐藏）。

就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:16:30.550

这非常简单，无需添加按钮的第二个实例即可完成。您将为此使用视图层次结构 z-index。

当您将表格视图添加为主视图的子视图时不要使用`addSubview`，请使用：

```
[self.view insertSubview:table belowSubview:button]; 
```

Button^ 将代表您希望留在顶部的按钮，而对于您的其他按钮，您只需确保它们在堆栈中较低。这样，当桌子飞进来时，它可以继续越过按钮，但按钮将停留在它上方。

您还可以使用：

```
[self.view insertSubview:table atIndex:5]; 
```

在所有这些按钮和表格上，可以完全控制每个对象的 z-index。

# c++ - 解析多个命名集的其他命名集

> ID：12874926
> 
> 赞同：6
> 
> 时间：2012-10-13T17:00:01.743
> 
> 标签：c++, parsing, boost-spirit, boost-spirit-qi

所以我想用 boost::spirit::qi 写一个……嗯……不那么简单的解析器。我知道提升精神的基本知识，在过去的几个小时里第一次熟悉了它。

基本上我需要解析这个：

```
# comment

# other comment

set "Myset A"
{
    figure "AF 1"
    {
        i 0 0 0
        i 1 2 5
        i 1 1 1
        f 3.1 45.11 5.3
        i 3 1 5
        f 1.1 2.33 5.166
    }

    figure "AF 2"
    {
        i 25 5 1
        i 3 1 3
    }
}

# comment

set "Myset B"
{
    figure "BF 1"
    {
        f 23.1 4.3 5.11
    }
}

set "Myset C"
{
    include "Myset A" # includes all figures from Myset A

    figure "CF"
    {
        i 1 1 1
        f 3.11 5.33 3
    }
} 
```

进入这个：

```
struct int_point { int x, y, z; };
struct float_point { float x, y, z; };

struct figure
{
    string name;
    vector<int_point> int_points;
    vector<float_point> float_points;
};

struct figure_set
{
    string name;
    vector<figure> figures
};

vector<figure_set> figure_sets; // fill with the data of the input 
```

现在，显然有人为我写它太多了，但是你能提供一些关于阅读什么以及如何为这个任务构建语法和解析器的提示吗？

而且......可能 boost::spirit 不是我可以用于该任务的最佳库。如果有，是哪一个？

编辑：这是我到目前为止的工作。但我还不确定如何继续： http: [//liveworkspace.org/code/212c31dfc0b6fbdf6c462d8d931c0e9f](http://liveworkspace.org/code/212c31dfc0b6fbdf6c462d8d931c0e9f)

我能够阅读一个数字，但是我还不知道如何解析一组数字。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-13T23:45:44.107

这是我的看法

我相信对你来说阻碍的规则是

```
figure  = eps >> "figure" 
    >> name         [ at_c<0>(_val) = _1 ] >> '{' >> 
    *(
            ipoints [ push_back(at_c<1>(_val), _1) ]
          | fpoints [ push_back(at_c<2>(_val), _1) ]
     ) >> '}'; 
```

这实际上是您将混合`i`和`f`行解析为单独的容器这一事实的症状。

## ***请参阅下面的替代方案。***

这是我的完整代码：**[test.cpp](https://gist.github.com/3886058/5bc593804e6d4ed3406f49695673f1adcab2482f#file_test.cpp)**

```
//#define BOOST_SPIRIT_DEBUG // before including Spirit
#define BOOST_SPIRIT_USE_PHOENIX_V3
#include <boost/fusion/adapted.hpp>
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/karma.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/spirit/include/phoenix_fusion.hpp>
#include <fstream>

namespace Format
{
    struct int_point   { int x, y, z;   }; 
    struct float_point { float x, y, z; }; 

    struct figure
    {
        std::string              name;
        std::vector<int_point>   int_points;
        std::vector<float_point> float_points;

        friend std::ostream& operator<<(std::ostream& os, figure const& o);
    };

    struct figure_set
    {
        std::string           name;
        std::set<std::string> includes;
        std::vector<figure>   figures;

        friend std::ostream& operator<<(std::ostream& os, figure_set const& o);
    };

    typedef std::vector<figure_set> file_data;
}

BOOST_FUSION_ADAPT_STRUCT(Format::int_point,   
        (int, x)(int, y)(int, z))
BOOST_FUSION_ADAPT_STRUCT(Format::float_point, 
        (float, x)(float, y)(float, z))
BOOST_FUSION_ADAPT_STRUCT(Format::figure,      
        (std::string, name)
        (std::vector<Format::int_point>, int_points)
        (std::vector<Format::float_point>, float_points))
BOOST_FUSION_ADAPT_STRUCT(Format::figure_set,  
        (std::string, name)
        (std::set<std::string>, includes)
        (std::vector<Format::figure>, figures))

namespace Format
{
    std::ostream& operator<<(std::ostream& os, figure const& o)
    {
        using namespace boost::spirit::karma;
        return os << format_delimited(
                "\n    figure" << no_delimit [ '"' << string << '"' ] << "\n    {"
                << *("\n       i" << int_ << int_ << int_)
                << *("\n       f" << float_ << float_ << float_)
                << "\n    }"
                , ' ', o);
    }

    std::ostream& operator<<(std::ostream& os, figure_set const& o)
    {
        using namespace boost::spirit::karma;
        return os << format_delimited(
                "\nset" << no_delimit [ '"' << string << '"' ] << "\n{"
                << *("\n    include " << no_delimit [ '"' << string << '"' ])
                << *stream
                << "\n}"
                , ' ', o);
    }
}

namespace /*anon*/
{
    namespace phx=boost::phoenix;
    namespace qi =boost::spirit::qi;

    template <typename Iterator> struct skipper
        : public qi::grammar<Iterator>
    {
        skipper() : skipper::base_type(start, "skipper")
        {
            using namespace qi;

            comment = '#' >> *(char_ - eol) >> (eol|eoi);
            start   = comment | qi::space;

            BOOST_SPIRIT_DEBUG_NODE(start);
            BOOST_SPIRIT_DEBUG_NODE(comment);
        }

      private:
        qi::rule<Iterator> start, comment;
    };

    template <typename Iterator> struct parser
        : public qi::grammar<Iterator, Format::file_data(), skipper<Iterator> >
    {
        parser() : parser::base_type(start, "parser")
        {
            using namespace qi;
            using phx::push_back;
            using phx::at_c;

            name    = eps >> lexeme [ '"' >> *~char_('"') >> '"' ];

            include = eps >> "include" >> name;
            ipoints = eps >> "i"       >> int_         >> int_   >> int_;
            fpoints = eps >> "f"       >> float_       >> float_ >> float_;

            figure  = eps >> "figure" 
                >> name         [ at_c<0>(_val) = _1 ] >> '{' >> 
                *(
                        ipoints [ push_back(at_c<1>(_val), _1) ]
                      | fpoints [ push_back(at_c<2>(_val), _1) ]
                 ) >> '}';
            set     = eps >> "set" >> name >> '{' >> *include >> *figure >> '}';
            start   = *set;
        }

      private:
        qi::rule<Iterator, std::string()        , skipper<Iterator> > name, include;
        qi::rule<Iterator, Format::int_point()  , skipper<Iterator> > ipoints;
        qi::rule<Iterator, Format::float_point(), skipper<Iterator> > fpoints;
        qi::rule<Iterator, Format::figure()     , skipper<Iterator> > figure;
        qi::rule<Iterator, Format::figure_set() , skipper<Iterator> > set;
        qi::rule<Iterator, Format::file_data()  , skipper<Iterator> > start;
    };
}

namespace Parser {

    bool parsefile(const std::string& spec, Format::file_data& data)
    {
        std::ifstream in(spec.c_str());
        in.unsetf(std::ios::skipws);

        std::string v;
        v.reserve(4096);
        v.insert(v.end(), std::istreambuf_iterator<char>(in.rdbuf()), std::istreambuf_iterator<char>());

        if (!in) 
            return false;

        typedef char const * iterator_type;
        iterator_type first = &v[0];
        iterator_type last = first+v.size();

        try
        {
            parser<iterator_type>  p;
            skipper<iterator_type> s;
            bool r = qi::phrase_parse(first, last, p, s, data);

            r = r && (first == last);

            if (!r)
                std::cerr << spec << ": parsing failed at: \"" << std::string(first, last) << "\"\n";
            return r;
        }
        catch (const qi::expectation_failure<char const *>& e)
        {
            std::cerr << "FIXME: expected " << e.what_ << ", got '" << std::string(e.first, e.last) << "'" << std::endl;
            return false;
        }
    }
}

int main()
{
    Format::file_data data;
    bool ok = Parser::parsefile("input.txt", data);

    std::cerr << "Parse " << (ok?"success":"failed") << std::endl;
    std::cout << "# figure sets exported automatically by karma\n\n";

    for (auto& set : data)
        std::cout << set;
} 
```

它输出解析后的数据作为验证：**[output.txt](https://gist.github.com/3886058/5bc593804e6d4ed3406f49695673f1adcab2482f#file_output.txt)**

```
Parse success
# figure sets exported automatically by karma

set "Myset A"
{ 
    figure "AF 1"
    { 
       i 0 0 0 
       i 1 2 5 
       i 1 1 1 
       i 3 1 5 
       f 3.1 45.11 5.3 
       f 1.1 2.33 5.166 
    }  
    figure "AF 2"
    { 
       i 25 5 1 
       i 3 1 3 
    }  
} 
set "Myset B"
{ 
    figure "BF 1"
    { 
       f 23.1 4.3 5.11 
    }  
} 
set "Myset C"
{ 
    include  "Myset A"
    figure "CF"
    { 
       i 1 1 1 
       f 3.11 5.33 3.0 
    }  
} 
```

你会注意到

*   点线的顺序被改变（all `int_points`before all `float_points`）
*   此外，还添加了非有效数字，例如在最后一行中，`3.0`而不是`3`显示浮点类型。
*   您“忘记”（？）关于您问题中的内容

## 选择

有一些东西可以使实际点线保持原始顺序：

```
typedef boost::variant<int_point, float_point> if_point;

struct figure
{
    std::string            name;
    std::vector<if_point>  if_points;
} 
```

现在规则变得简单了：

```
name    = eps >> lexeme [ '"' >> *~char_('"') >> '"' ];

include = eps >> "include" >> name;
ipoints = eps >> "i"       >> int_         >> int_   >> int_;
fpoints = eps >> "f"       >> float_       >> float_ >> float_;

figure  = eps >> "figure" >> name >> '{' >> *(ipoints | fpoints) >> '}';
set     = eps >> "set"    >> name >> '{' >> *include >> *figure  >> '}';
start   = *set; 
```

请注意其中的优雅

```
figure  = eps >> "figure" >> name >> '{' >> *(ipoints | fpoints) >> '}'; 
```

并且输出保持与输入完全相同的顺序：**[output.txt](https://gist.github.com/3886058/39a925610419759cbe8640364c5785a796ac0d27#file_output.txt)**

再一次，完整的演示代码（仅在 github 上）：**[test.cpp](https://gist.github.com/3886058/39a925610419759cbe8640364c5785a796ac0d27#file_test.cpp)**

## 奖金更新

最后，我做了我的第一个正确的 Karma 语法来输出结果：

```
name    = no_delimit ['"' << string << '"'];
include = "include" << name;
ipoints = "\n        i" << int_   << int_   << int_;
fpoints = "\n        f" << float_ << float_ << float_;

figure  = "figure" << name << "\n    {" << *(ipoints | fpoints) << "\n    }";
set     = "set"    << name << "\n{" 
            << *("\n   " << include)
            << *("\n   " << figure)  << "\n}";

start   = "# figure sets exported automatically by karma\n\n" 
            << set % eol; 
```

这实际上比我预期的要舒服得多。[在完全更新的 gist](https://gist.github.com/3886058/f58cad691ad692302b42a9ef579d7cf6ed05dbfd)的最新版本中查看它：**[test.hpp](https://gist.github.com/3886058/f58cad691ad692302b42a9ef579d7cf6ed05dbfd#file_test.cpp)**

# r - 样本回归，x = 月，巨大的带宽

> ID：12874928
> 
> 赞同：2
> 
> 时间：2012-10-13T17:00:15.223
> 
> 标签：r, time, regression

我有两个向量，`x`和`y`。

`x`是一个向量，其中每个条目代表几年的一个月，所以我有（比方说）10 年的数据，`length(x) = 120`依此类推。（我使用了“posix.ct”命令，所以从这个意义上说它们确实是“月”，但我不能只`x`使用数字向量之类的`c(1:n)`东西，因为我已经知道哪个月和哪个年的某个元素`c(1:n)`对应于？即如果`x = c(1:n)`，我知道那`x[13]`是第二年的二月，依此类推..)

y 是一个向量，其中每个元素都是在某个月份对特定变量的观察。所以观察到的数据是这样分组的（一月，0.123），（二月，2.125）等等。这几个月我有两个向量；

```
x1 = seq(as.POSIXct("YYYY-MM-DD", tz="GMT"),
       as.POSIXct("YYYY-MM-DD", tz="GMT"),
       by="month")
x2 = c(1:length(x1)) 
```

我想要做的是运行 ksmooth：

```
plot(x1,y)
smooth = ksmooth(x2,y,"normal")     
lines(smooth) 
```

我在 plot() 命令中使用 x1 的原因是我不知道如何及时获取 x 轴。

当我没有指定任何东西时，R 应该会自动找到一个合适的平滑参数。结果是 ksmooth$y 等于输入向量 y！此外，图中还会生成一个垂直条。如果我在上面的代码中替换`x2`为NA，则除第一个和最后一个之外的所有值都是 NA，它们等于 input 的值。 `x1``ksmooth$y``y`

所以我尝试了一些带宽 `h = 0.1`：：现在`smooth$y = y`，和以前一样。产生一个垂直条（它与我在命令中指定的颜色相同`lines()`，因此它必须与`ksmooth`命令有关。） `h = 10`：得到一些不奇怪的结果 smooth$y，然而，一个垂直条像以前一样产生.

然后，我尝试了超大带宽的疯狂想法； `h = 1e+06`：这在我使用时没有产生任何结果`x1`，`x2`就像上面的代码一样。但是，当我更改`x2`为时`x1`，我得到了一些不错的结果。因为`h = 1e+09`（那是巨大的！！）我得到了一个非常好的结果。（我得到一条适合数据并且看起来不错的曲线）但是`h = 1e+09`，这合理吗？在我看过的所有示例中，h 是介于 0.1 和 10 之间的东西，给予或接受。听说过一些经验法则： h 应该等于 n^(-1/5) 其中 n 是数据点的数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T18:22:31.197

我认为您缺少的一件事是，当您没有指定任何内容时，R*找不到*合适的平滑参数，它只使用 0.5 的带宽，这在您的情况下完全没用。

您可能缺少的另一件事是`ksmooth`参数`bandwidth`中的`x`. 当`ksmooth`取值`x`时`Date`，它将其转换为数字，即*秒数*。因此，您的带宽将以秒为单位进行测量，这是一个不受欢迎的结果。当`ksmooth`取值`x`为months时，它将默认为0.5个月的带宽，这也是不可取的。

您要做的是为`x`您正在使用的带宽指定一个合理的带宽。这是一个例子：

```
x1 = seq(as.POSIXct("2000-01-01", tz="GMT"),
       as.POSIXct("2010-12-31", tz="GMT"),
       by="month")
x2 = c(1:length(x1)) 
set.seed(1)
y = runif(length(x1))

plot(x1,y,type='l')
smooth = ksmooth(x2,y,"normal")     
lines(x1,smooth$y,col='blue',lwd=2)
lines(x1,ksmooth(x2,y,'normal',bandwidth=2)$y,col='red',lwd=2)
lines(x1,ksmooth(x2,y,'normal',bandwidth=10)$y,col='green',lwd=2)
lines(x1,ksmooth(x2,y,'normal',bandwidth=20)$y,col='orange',lwd=2) 
```

![平滑随机时间序列](../Images/6afeffeed5027bfe21c60df71a5bfbfb.png)

# java - 你如何返回一个取消引用的数组？

> ID：12874934
> 
> 赞同：3
> 
> 时间：2012-10-13T17:01:10.537
> 
> 标签：java, arrays, return

我希望执行以下操作：

```
public static int[] plusOneLengthFour(int[] arr) {
  return {arr[0]+1,arr[1]+1,arr[2]+1,arr[3]+1};
} 
```

但是在编译时，我收到以下错误：

```
TestClass.java:5: error: illegal start of expression
        return {arr[0]+1,arr[1]+1,arr[2]+1,arr[3]+1}; 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T17:02:36.840

你只需要添加`new int[]`到你的 return 语句来编译它。如果你只是从花括号开始，它不知道你想要什么。请注意，这将返回一个**新**数组，而原始数组`arr`将具有相同的值。

IE，

```
return new int[] {arr[0]+1,arr[1]+1,arr[2]+1,arr[3]+1}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T17:05:20.850

如果要修改输入数组，则不需要返回任何内容：

```
public static void plusOneLengthFour(int[] arr) {
    arr[0]++;
    arr[1]++;
    arr[2]++;
    arr[3]++;
} 
```

如果要创建一个新数组，其中包含输入数组的前 4 个元素并以 1 递增，那么要使用的代码是

```
public static int[] plusOneLengthFour(int[] arr) {
    return new int[] {arr[0] + 1, arr[1] + 1, arr[2] + 1, arr[3] + 1};
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T19:32:23.417

您应该使用下面的语句来返回数组。

```
 return new int[] {arr[0] + 1, arr[1] + 1, arr[2] + 1, arr[3] + 1}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-13T17:03:55.777

我猜你需要返回你的数组，数组元素递增 1。你可以这样做： -

```
public static void plusOneLengthFour(int[] arr) {
    for (int i = 0; i < arr.length; i++) {
        arr[i] = arr[i] + 1;
    }

} 
```

实际上，您不需要返回 Array。更改将反映在原始数组中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T17:05:39.273

你可以让你的方法更灵活

```
public static int[] addNumberToItems(int[] array, int valueToAdd) {
    for (int i = 0; i < array.length; i++)
        array[i] += valueToAdd;

    return array;
} 
```

此常量返回数组的长度：

```
array.length 
```

# preg-replace - 使用 preg_replace 从文件路径中跳过 ../

> ID：12874937
> 
> 赞同：0
> 
> 时间：2012-10-13T17:01:44.550
> 
> 标签：preg-replace

我有一个css声明背景： url(corners/bl.png) no-repeat left bottom !important; 我需要使用 preg_replace 在corners/bl.png 之前添加一些东西问题是我也有背景： url(../images/gray/topmenu/active_l.png) no-repeat left center; 我需要跳过它，因为它包含 ../ 在 url 值内。我需要的是在值不包含 ../ 时获取 url 值。如果它只包含 / 则获取并替换它，如果 ../ 跳过它。

这是正在工作的代码，除了 ../ 问题 $new_file_content = preg_replace("/(:|,)(\s*?. *?\s* ?)(\s*\burl)(\s*() (['|\"]?)([^/|^'|^\"|^)]*)(['|\"]?)())/i", '$1$2$3$4$5'。 implode("/",$file_path_explode)."/".'$6$7$8', $new_file_content);

我知道我需要添加另一个条件而不是 ([^/|^'|^\"|^)]*) 但我不知道如何添加类似 except ../ [^(../ )] 或...？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T19:17:51.040

会做类似的事情： `$new_file_content = preg_replace("/url\([\s]*(([^\.]{2})[^\)]+)/i", "url(". implode("/",$file_path_explode) ."/$1", $new_file_content);` 适合你的需要？它专门检查“url（”，因此您只触摸您在正则表达式中实际想要替换的内容。也不会匹配任何以`url(.`

# android - OnTouch 适用于 1 个按钮，但不适用于 3 个

> ID：12874939
> 
> 赞同：0
> 
> 时间：2012-10-13T17:02:05.703
> 
> 标签：android, button, crash, touch-event, ontouchlistener

我是 Android 新手，但对 c# 和 c++ 有经验。

我只是想在按下按钮时显示。我搜索并发现，onClick 事件无法做到这一点，因此我使用了 onTouch 事件。

对于第一个按钮，它很好并且有效。然后我添加了第二个和第三个，但现在应用程序在我执行时崩溃了。

如果我删除带有事件的第二个和第三个按钮，应用程序仍然会崩溃。在我删除第一个 Button 和他的事件之前，应用程序停止崩溃。

这里是我的 main.code 和 layout-xml 的代码：

```
package com.android.kurve;

import android.app.Activity;
import android.graphics.Color;
import android.os.Bundle;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnTouchListener;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity{

    boolean left=false;
    boolean right=false;

    final Button buttonLeft = (Button) findViewById(R.id.button1);
    final Button buttonRight = (Button) findViewById(R.id.button2);
    final Button buttonMove = (Button) findViewById(R.id.button3);
    final TextView text = (TextView) findViewById(R.id.textView1);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        buttonLeft.setOnTouchListener(new OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {

                if (event.getAction() == android.view.MotionEvent.ACTION_DOWN) {
                      left=true;
                      text.setText("left");
                    } else if (event.getAction() == android.view.MotionEvent.ACTION_UP) {
                      left=false;
                    }
                return true;
            }
        });
        buttonRight.setOnTouchListener(new OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (event.getAction() == android.view.MotionEvent.ACTION_DOWN) {
                      right=true;
                      text.setText("right");

                    } else if (event.getAction() == android.view.MotionEvent.ACTION_UP) {
                      right=false;
                    }
                return true;
            }
        });

        buttonMove.setOnTouchListener(new OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {

              text.setText("move");

                return true;
            }
        });

    }

} 
```

这里的布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="28dp"
        android:layout_marginTop="207dp"
        android:text="Left" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignTop="@+id/button1"
        android:layout_marginRight="31dp"
        android:text="Right" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/button2"
        android:layout_centerHorizontal="true" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="24dp"
        android:layout_toLeftOf="@+id/textView1"
        android:text="Move" />

</RelativeLayout> 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-07-20T12:52:34.673

也许问题可能是您正在全局初始化布局元素，而不是在“onCreate”方法中初始化它们。该方法在活动创建时被调用，所以这是所有布局行为或值应该被初始化的地方。

# coffeescript - 将打字稿添加到 Coffeescript

> ID：12874942
> 
> 赞同：20
> 
> 时间：2012-10-13T17:02:19.680
> 
> 标签：coffeescript, typescript

我有一个构建链设置，它将文件从咖啡脚本转换为打字稿到 javascript。我的问题是：将类型签名添加到 coffeescript 函数的最小侵入方式是什么？

coffeescript 通过反引号支持原始 javascript。但是，这意味着 coffeescript 不再理解反引号代码段。

Coffeescript 拒绝这些：

```
f = (`a:String`) -> a + 2
f = (a`:String`) -> a + 2 
```

我可以在函数上面写这个：

```
`var f = (String) => any` 
```

它编译，但不进行类型检查。我认为这是因为 Coffeescript 已经声明了该变量。

我能弄清楚如何让它工作的唯一方法需要大量的样板文件

```
f = (a) ->
  `return (function(a:String){`
  a + 2;
  `})(a)` 
```

在新的 Coffeescript Redux 编译器中，反引号似乎无法正常工作： [https ://github.com/michaelficarra/CoffeeScriptRedux/issues/71](https://github.com/michaelficarra/CoffeeScriptRedux/issues/71)

我很清楚这是一项可疑的努力，现在只是一个实验。我目前使用contracts.coffee，但我正在寻找实际类型。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-02-12T21:01:12.253

这是我的项目，它将 CoffeeScript 转换为 TypeScript，然后将其与包含类型的 d.ts 文件合并。然后报告编译错误，如果有的话。

它被称为[Compiled-Coffee](https://github.com/TobiaszCudnik/compiled-coffee)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-10-14T12:47:21.440

如果你想写CoffeeScript，最好写CoffeeScript并编译成JavaScript。

TypeScript 的好处主要是设计时的好处和更好的工具，因此在 CoffeeScript 和 JavaScript 中间使用它几乎没有什么好处，因为您将获得基于 CoffeeScript 代码的设计时间和工具。

您可以在 TypeScript 中使用您用 CoffeeScript 编写的库，反之亦然，因此您可以在 CoffeeScript 中维护您的 CoffeeScript 库，并在您决定采用哪种方式时在新的 TypeScript 文件中使用它们。

更新：我不确定这个答案怎么会有如此广泛的误解——我会假设我没有很好地解释这一点（而不是假设这仅仅是稻草人的论点或对语言的过度敏感）比较）。

TypeScript 确实是 JavaScript 的类型系统。静态类型更适合您作为工作流程早期的程序员。在您的 IDE 中设置设计时警告意味着快速纠正常见错误，例如输入错误的变量名称、错误的参数、无效的操作等等。将代码加下划线并带有错误注释意味着即时反馈。在编译时有这个很好，但你的反馈循环更长。我什至不会谈论运行时，因为在使用 TypeScript 时所有类型都被删除了。

至于所有“TypeScript vs CoffeeScript”评论——这个问题根本不是关于这个的。问题是关于从 CoffeeScript 编译到 TypeScript 再到 JavaScript。让我们看看为什么这可能不理想：

*   您只会在编译时获得类型反馈
*   你不会得到自动完成
*   您的 CoffeeScript 代码将不再紧凑 - 它将具有类型注释
*   如果没有中间编译器，您的 CoffeeScript 代码将不再有效
*   您将不得不使用额外的编译器，并且它需要与 CoffeeScript 版本 x 和 TypeScript 版本 y 同步
*   您的 IDE 无法理解您的 CoffeeScript 代码

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-15T00:07:16.813

我认为我想出的是我能做的最好的。在新的 Coffeescript Redux 编译器中，事情变得更加困难：尝试破解当前的 coffeescript 编译器以使其工作实际上会更容易。

使这看起来不那么骇人听闻的方法是：

```
`var f : (a:Number) => Number = originalF` 
```

但是，typescript 的弱类型推断在这种形式下表现不佳。这得到正确的类型分析：

```
f = (a) ->
  `var a : Number = a`
  a + 2 
```

但是，我仍然不确定如何使用此表单指定返回值。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-03T08:41:09.423

Typescript 是一个**强类型**的javascript。Coffee-script 提供了一种更舒适的书写和阅读方式。我不将咖啡脚本视为一种语言。它只是一种方式，一种可以附加到任何语言的风格：[咖啡风格智能计算机语言应该是未来](https://github.com/coffeescript6/discuss/issues/49)

通过反引号来“支持”如此强大的类型是非常丑陋和愚蠢的。使用强类型实现咖啡脚本的正确方法：

*   修改[CoffeeScriptRedux](https://github.com/michaelficarra/CoffeeScriptRedux/)源码，添加支持的强类型
    *   [TypedCoffeeScript](https://github.com/mizchi/TypedCoffeeScript)已经完成了。
*   修改 Typescript 解析器源以使用咖啡脚本语法。
    *   似乎没有人这样做。

# css - CSS 将 div 发送到其他 div 的底部；底部：0 不起作用

> ID：12874944
> 
> 赞同：0
> 
> 时间：2012-10-13T17:02:31.197
> 
> 标签：css, html

我有一个 div；标题，另一个称为 headerimg 包含图像。我试图在调整页面大小时使标题图像粘在标题（水平线）的底部。这是我的代码：

```
.header{ 
float:right;
width:93%; 
height:100px;
padding-right:0px;
background-image:url('img/barhorizontal.gif');
background-repeat:repeat-x;
background-position:bottom;
postion:relative;
}   

.headerimg{
bottom:0;
postion:absolute;   
}

.headerimg img{
width:45%;
height:auto;    
} 
```

但它不起作用。这是我的网站：[点击](http://nefas.nl/ "点击")

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:05:23.133

你拼错了`position`。

```
you have:  postion
change to: position 
```

如何发现这样的事情？在浏览器中打开开发者工具。至少在 Chrome 中，它旁边显示了一个黄色的小三角形，并且该线被划掉了。您会看到错误“未知的属性名称”

# linq - C# 控制台应用程序将记录与数据库进行比较

> ID：12874945
> 
> 赞同：0
> 
> 时间：2012-10-13T17:02:35.763
> 
> 标签：linq, c#-4.0, console-application

我正在解析一个逐行工作并插入数据库的平面文件，但我想添加一个额外的步骤，实际上是额外的 2 个步骤。

首先，我只想要特定汽车制造商的召回记录，我有一个名为 AutoMake 的数据库表，其中包含我想要包含的所有品牌的列表。我需要将记录与该表进行比较，以确保它是我想要包含的品牌之一的记录。

然后我需要进行第二次检查以确保该记录不在我的数据库中。这是一个控制台应用程序，我为此使用实体。所以这是我的代码，我让自己发疯，试图编写和重写它以包括检查，但我只是没有得到它。

哦，这并不重要，因为如果有人可以让我朝着正确的方向前进，我可以从那里移动，但是and is 并且可以`tokens[2]`用来验证记录是否已经在数据库中，因为它是一个唯一值`MAKETXT``RCL_CMPT_ID``tokens[23]``RCL_CMPT_ID`

```
 public static void ParseTSV(string location)
    {
        Console.WriteLine("Parsing.....");

        using (var reader = new StreamReader(location))
        {
            var lines = reader.ReadToEnd().Split(new char[] { '\n' });

            if (lines.Length > 0)
            {
               foreach (string line in lines)
               {
                  if (string.IsNullOrWhiteSpace(line))
                  {
                    continue;
                  }
                  var tokens = line.Trim().Split(new char[] { '\t' });

                  var recalls = new Recalls();

                  recalls.RECORD_ID = tokens[0];
                  recalls.CAMPNO = tokens[1];
                  recalls.MAKETXT = tokens[2];
                  recalls.MODELTXT = tokens[3];
                  recalls.YEARTXT = tokens[4];
                  recalls.MFGCAMPNO = tokens[5];
                  recalls.COMPNAME = tokens[6];
                  recalls.MFGNAME = tokens[7];
                  recalls.BGMAN = tokens[8];
                  recalls.ENDMAN = tokens[9];
                  recalls.RCLTYPECD = tokens[10];
                  recalls.POTAFF = tokens[11];
                  recalls.ODATE = tokens[12];
                  recalls.INFLUENCED_BY = tokens[13];
                  recalls.MFGTXT = tokens[14];
                  recalls.RCDATE = tokens[15];
                  recalls.DATEA = tokens[16];
                  recalls.RPNO = tokens[17];
                  recalls.FMVSS = tokens[18];
                  recalls.DESC_DEFECT = tokens[19];
                  recalls.CONEQUENCE_DEFECT = tokens[20];
                  recalls.CORRECTIVE_ACTION = tokens[21];
                  recalls.NOTES = tokens[22];
                  recalls.RCL_CMPT_ID = tokens[23];

                  string connectionString = GetConnectionString();
                  using (SqlConnection connection = new SqlConnection(connectionString))
                  {
                      SqlCommand cmdIns = new SqlCommand(GetInsertSqlCust(recalls), connection);
                      connection.Open();
                      cmdIns.ExecuteNonQuery();
                      connection.Close();
                      cmdIns.Dispose();
                      cmdIns = null;
                  }
              }
          }
      }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T20:15:14.313

1：获取要检查的ID 2：获取需要进行搜索的表，例如

```
 string strExpression="";
    (Datatable tdGeneric = dal.getsometable()) 
```

3：检查自动制作是否存在：

```
if ( tdGeneric != null && tdGeneric.Rows.Count > 0)
  {
   strExpression = "tablecolumnsname = '" + recalls.MAKETXT + "' ";
   tdGeneric.DefaultView.RowFilter = strExpression;
   tdGeneric = tdGeneric.DefaultView.ToTable();
    if (tdGeneric.Rows.Count > 0)
    {
          //make exist
    }
    else
     make don't exists

  }
  else
 {
   make don't exist skip that text file's record
 } 
```

4：如果make存在，则检查表中是否存在记录。

获取原始表，在该表上搜索您的特定 id：

```
 (Datatable tdGeneric2 = dal.getsometable())
 if ( tdGeneric2 != null && tdGeneric.Rows.Count > 0)
      {
       strExpression = "tablecolumnsname = '" + recalls.RCL_CMPT_ID + "' ";
       tdGeneric2.DefaultView.RowFilter = strExpression;
       tdGeneric2 = tdGeneric2.DefaultView.ToTable();
          if (tdGeneric2.Rows.Count > 0)
        {
              //record exist
        }
        else
         record don't exists
      }
      else
     {
       record don't exist insert the record, or some flag to insert a record
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:10:37.890

您可以利用缓存。在读取文件之前获取所有 Makes 并在现有 AutoMakes 的 List 或 Dictionary 中进行查找，以检查 AutoMake 是否已存在于数据库中或者它是否是新的。如果 AutoMake 是新的，则在数据库中插入记录并在 List\Dictionary 中添加 make。如果 AutoMake 已存在，请跳过该行并移至下一行。

# c# - 使用 LINQ 对列表的排序范围

> ID：12874947
> 
> 赞同：2
> 
> 时间：2012-10-13T17:02:38.200
> 
> 标签：c#, linq, sorting, sql-order-by

我想知道是否可以使用 LINQ 进行范围排序，例如我有数字列表：

`List< int > numbers = new List< int >`

*   1
*   2
*   3
*   15 <-- 排序
*   11 <-- 排序
*   13 <-- 排序
*   10 <-- 排序
*   6
*   7
*   等等

简单地使用`numbers.Skip(3).Take(4).OrderBy(blabla)`就可以了，但它会返回一个只包含这 4 个数字的新列表。是否有可能强制 LINQ 在不返回新的“部分”列表或接收带有排序部分的完整列表的情况下自行工作？感谢您的任何回答！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T19:29:08.813

尝试这样的事情：

```
var partiallySorted = list.Where(x => x < 11)
                 .Concat(list.Where(x => x >= 11 && x <=15).OrderBy(/*blah*/)))
                 .Concat(list.Where(x => x > 15)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-13T17:20:21.983

```
List<int> list = new List<int>() {1,2,3,15,11,13,10,6,7};
list.Sort(3, 4,Comparer<int>.Default); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-13T17:08:40.630

只需根据某些标准获取所需的范围，然后使用 Linq 对结果范围应用排序。

```
List<int> numbers = new List<int>() { 15, 4, 1, 3, 2, 11, 7, 6, 12, 13 };
var range = numbers.Skip(3).Take(4).OrderBy(n => n).Select(s => s);
// output: 2, 3, 7, 11 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-07T19:53:44.840

将此用于默认内联列表排序：

语法：List.Sort（起始索引，元素数，默认比较器）

```
List<int> numbers = new List<int> { 1, 2, 3, 15, 11, 13, 10, 6, 7 };
numbers.Sort(3, 6, Comparer<int>.Default); 
```

如果您想按元素的 [properties/attributes] 或其他东西进行排序，请使用以下方法，

我已经按字符数对字符串进行了排序，并且还从第二个元素到列表的末尾。

语法：List.Sort(开始索引，元素个数，自定义比较器)

```
List<string> str = new List<string> { "123", "123456789", "12", "1234567" };
str.Sort(1, str.Count - 1, Comparer<string>.Create((x, y) => x.Length.CompareTo(y.Length))); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-13T17:31:06.797

不，Linq 扩展方法永远不会修改底层列表。您可以使用该方法[`List<T>.Sort(int index, int counter, IComparer<T> comparer)`](http://msdn.microsoft.com/en-us/library/8ce6t5ad.aspx)进行就地排序：

```
var list = new List<int> {1, 2, 3, 15, 11, 13, 10, 6, 7};
list.Sort(3, 4, null); 
```

# c# - 月历到文本框

> ID：12874950
> 
> 赞同：-1
> 
> 时间：2012-10-13T17:03:21.813
> 
> 标签：c#, .net, winforms, visual-studio

> **可能重复：**
> [如何使用 MonthCalender 在文本框中插入日期？](https://stackoverflow.com/questions/12852496/how-to-use-monthcalender-to-insert-date-in-text-box)

我有`textBox1`以及`MonthCalender1`如何将日历中的选定日期映射为字符串`textBox1`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-13T17:08:06.527

在日历的选定更改事件中尝试此操作：

```
protected void MonthCalender1 _SelectionChanged(object sender, EventArgs e)
{
    System.DateTime myDate = MonthCalender1 .SelectedDate;

    textBox1.Text = myDate.ToString ("dd/MM/yyyy"); 
} 
```

# macos - 如何在bash中解压缩到同一目录

> ID：12874956
> 
> 赞同：0
> 
> 时间：2012-10-13T17:03:56.557
> 
> 标签：macos, bash, unzip

我有数百个目录，每个目录都包含几个 zip 文件。我想遍历每个目录并解压缩所有 zip 文件，将 zip 文件的内容放入与 zip 文件本身相同的目录中（不创建新的子目录）。这是我拥有的 bash 脚本：

```
#!/bin/bash
src="/path/to/directories"
for dir in `ls "$src/"`
do
unzip "$src/$dir/*"
done 
```

该脚本进行解压缩，但它会创建数千个子目录并将它们转储到我的桌面上！如何获得所需的行为？如果这有所作为，我在 Mac OSX 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:06:18.033

```
#!/bin/bash

src=/path/to/directories
for dir in "$src"/*
do
    (cd "$dir" && unzip '*')
done 
```

# c++ - 如何在其声明之外定义模板类的友元模板函数？

> ID：12874958
> 
> 赞同：1
> 
> 时间：2012-10-13T17:04:13.597
> 
> 标签：c++, templates, friend

如果我在模板类声明里面定义朋友模板函数，如下，就可以编译了。

```
#include <iostream>

template <typename T>
class X {
public:
    X(int i) : n(i) {}

private:
    T n;

    template <typename U> 
    friend void doStuff(const X<T>& x, const U& u)
    {
        std::cout << (x.n + u) << std::endl;
    }
};

int main()
{
    X<int> x(1);
    doStuff(x, 3);
    return 0;
} 
```

但是，如果我将定义`doStuff()`移出类声明，就在声明类之后`X<>`，如下所示，它无法编译。

```
template <typename U>
template <typename T>
void doStuff(const X<T>& x, const U& u)
{
    std::cout << (x.n + u) << std::endl;
} 
```

以下代码也没有。

```
template <typename U, typename T>
void doStuff(const X<T>& x, const U& u)
{
    std::cout << (x.n + u) << std::endl;
} 
```

那么我应该如何`doStuff()`在类声明之外定义模板函数呢？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T17:30:01.430

或许是这样的：

```
template <typename T>
class X {
public:
    X(int i) : n(i) {}

private:
    T n;

    template <typename U, typename V>
    friend void doStuff(const X<U>& x, const V& u);
};

template <typename U, typename V>
void doStuff(const X<U>& x, const V& u)
{
    std::cout << (x.n + u) << std::endl;
}

int main()
{
    X<int> x(1);
    doStuff(x, 3);
    X<double> y(1.0);
    doStuff(y, 3.5);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-13T18:05:08.903

@jrok 提供了一个很好的解决方案。

## 让我们详细说明它为什么起作用，以及为什么需要它。

通过将函数声明为

```
template <typename U, typename V>
friend void doStuff(const X<U>& x, const V& u); 
```

你说每个 X 和 V 都有一个函数 doStuff。但你又问，如果 U 不是 T 怎么办？好吧，当您使用类型 X 的参数 int 调用 doStuff 时，模板参数推导的唯一可接受的结果是将类定义的类型 T 设置为 int。

## 现在，为什么这样做不起作用：

```
template <typename V>
friend void doStuff(const X<T>& x, const V& u); 
```

?

实际上，它确实如此。但这意味着对于任何类型，您都`T`告诉编译器**您**将*定义*一个函数，该函数接受一个`X<T>`, 对于任何 required `T`，并且第二个参数是模板参数。**请注意，第一个参数不是模板函数参数。**

没有办法*笼统地*说‘每当用户使用 type 类时`X<T>`，使用*这个*特定的模式来*定义*一个函数 doStuff 哪里`X<T>`是第一个参数。

所以，在你承诺它会存在的类中，但是没有办法以模板化的方式编写定义。它必须是这样的

```
template <typename T,typename U>
for_any_seen_template_instance_anywhere_in_the_program_< X<T> >:: 
      void doStuff(const X<U>& x, const V& u){
   ... code.
} 
```

没有这样的事情。另一种思考方式：当你写作时

```
doStuff(a,b); 
```

如果第一个参数不是函数模板参数，则不会针对该第一个参数自动生成任何内容。类模板的模板参数类型不会像模板函数参数那样自动推导出来。

但是，您*可以*定义`X<T>`任何必需的`T`（正如您在声明中承诺的那样），但您必须为每种必需的类型自己做：

```
template<typename V>
void doStuff(const X<int>& x, const V& u){
   std::cout << (x.n + u) << std::endl;
} 
```

**编辑**，回答下面的评论。

确实，`doStuff(X<U>,int)`例如，所有人都是任何`X<T>`类型的朋友，`T`而`U`. 这意味着在 doStuff 的主体内，您可以访问 type 对象的私有信息`X<Q>`。在这种情况下，您没有将任何此类对象传递给函数，但您可以`X<std::string>`在其中创建一个并使用它的私有对象。这是您为不使用最初的内联而付出的代价。

# android - 在android中旋转屏幕时无法使用android意图拍照

> ID：12874959
> 
> 赞同：3
> 
> 时间：2012-10-13T17:04:16.727
> 
> 标签：android

我有一个 android 应用程序，我在其中按如下意图拍摄图片：

```
Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
takePictureIntent.putExtra(MediaStore.EXTRA_OUTPUT, Uri.fromFile(f));
startActivityForResult(takePictureIntent, actionCode); 
```

然后我用结果填充 ImageView。

现在我发现了一个错误，然后我想拍照，在相机打开期间我旋转屏幕并拍照，我在 ImageView 中没有得到结果。

只有在不旋转相机时，在拍照时我才会在 ImageView 中看到它。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T17:33:52.477

我假设你有一个 get results 方法。

确保您的文件位置没有因为旋转而被清理（也就是您找错了地方）。

我有这个问题。我正在设置将照片保存到何处的全局变量。我将此传递给意图拍照，然后返回查看该位置以显示照片。

但是，如果旋转屏幕，全局变量被破坏，等等结果，它就不再知道在哪里可以找到照片。

最好的办法是将其保存到已保存的实例中，然后`onResume`从`savedInstance`.

请参阅[此处了解如何操作。](https://stackoverflow.com/a/151940)

# c - 案例标签不会减少为C中的整数常量？

> ID：12874960
> 
> 赞同：2
> 
> 时间：2012-10-13T17:04:20.333
> 
> 标签：c, arrays, label, switch-statement, case

我正在开发一个游戏，我运行我的代码并得到错误“案例标签不会减少为整数常量”。我想我知道这意味着什么，但我该如何解决呢？这是我的代码：

```
#include<stdio.h>
#include<stdlib.h

int player_cash[3] = {50};
char job[][20] {
    'A',
    'B',
    'C',
    "Donate",
    "Go to work",
    "Exit"
};
int jobs;

int main()
{
    while(player_cash[0] > 0) {
        printf("Please type A, B, C, Donate, Go to work, or Exit\n");
        switch(jobs) {

            case 'A':
            player_cash[0]-=5;
            player_cash[1]+=5;
            printf("Cash=%i\n\n", player_cash[0]);
            continue;

            case 'B':
            player_cash[0]-=5;
            player_cash[2]+=5;
            printf("Cash=%i\n\n", player_cash[0]);
            continue;

            case 'C':
            player_cash[0]-=5;
            player_cash[3]+=5;
            printf("Cash=%i\n\n", player_cash[0]);
            continue;

            case "Donate":
            player_cash[0]-=15; //Error here
            player_cash[1]+=5;
            player_cash[2]+=5;
            player_cash[3]+=5;
            printf("Cash donated\n\n");
            printf("Cash=%i\n\n", player_cash[0]);
            continue;

            case "Go to work":
            player_cash[0]+=10; //Error here
            printf("Work done\n\n");
            printf("Cash=%i\n\n", player_cash[0]);
            continue;

            case "Exit":
            printf("Thanks for playing!\n\n"); //Error here
            break;

            default:
            printf("Does not compute");
            continue;
        }
    }
        getchar();
        return 0;
} 
```

所以，我希望用户做的是输入其中一个选项，然后执行与之对应的操作。我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-13T17:05:50.677

您不能将字符串用作`case`表达式：

```
case "Donate": 
```

只能使用整数表达式，所以 eg`case 'A':`是可以的。

从概念上讲，您有问题：`jobs`is an `int`，并且您正在测试字符串。如果您想允许用户输入字符串（超过一个字符），您需要保留一个字符串变量，并使用类似的东西`fgets`来获取完整的输入行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:07:49.117

您的一些案例标签是字符（类型`char`，用`'`s 表示）。这些*是*整数常量。

其他标签是字符串文字（用 表示`"`），其有效类型为`const char *`. ¹这些*不是*整数常量，不能以这种方式使用。

* * *

¹由于历史原因，它们通常可以像以前一样使用`char *`，但不要试图改变它们。要不然。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T17:08:42.740

您不能将字符串与 c 进行比较。`"hello" == "hello"`不会按预期工作。switch 只对基本类型进行简单的 c 比较。

```
switch(jobs) {

        case 'A':
        player_cash[0]-=5;
        player_cash[1]+=5;
        printf("Cash=%i\n\n", player_cash[0]);
        continue;

        case 'B':
        player_cash[0]-=5;
        player_cash[2]+=5;
        printf("Cash=%i\n\n", player_cash[0]);
        continue;

        case 'C':
        player_cash[0]-=5;
        player_cash[3]+=5;
        printf("Cash=%i\n\n", player_cash[0]);
        continue;

        case 'D':
        player_cash[0]-=15; //Error here
        player_cash[1]+=5;
        player_cash[2]+=5;
        player_cash[3]+=5;
        printf("Cash donated\n\n");
        printf("Cash=%i\n\n", player_cash[0]);
        continue;

        case 'G':
        player_cash[0]+=10; //Error here
        printf("Work done\n\n");
        printf("Cash=%i\n\n", player_cash[0]);
        continue;

        case 'E':
        printf("Thanks for playing!\n\n"); //Error here
        break;

        default:
        printf("Does not compute");
        continue;
    } 
```

由于您只读取 中的一个字符`getch()`，因此您可以比较该值。（但要求用户只输入一个字母，因为他输入了“捐赠”，getch() 将首先读取 D，返回，然后读取 o，等等。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T19:24:10.930

1.  您的作业数组具有不一致的初始化程序（混合`char`和`const char *`）

2.  您不能将字符串文字用作大小写标签，因为 char 指针不是编译时常量。使用整数：

    ```
    enum jobType
    {
        jobA,
        jobB,
        jobC,
        jobDonate,
        jobGoToWork,
        jobExit,
        /* marker */
        jobInvalid
    };

    enum jobType typeOfJob(const char* const name)
    {
        int i;
        for (i=jobA; i!=jobInvalid; ++i)
            if (0 == strcmp(jobNames[i], name))
                return i;
        return i;
    } 
    ```

3.  此外，`player_cash`短 1 个元素（并且在索引 [3] 处写入超出范围）

代码示例还展示了如何避免一般`gets`错误，进行一些基本的行尾修剪和大小写不敏感比较（`stricmp`在 Windows 上，IIRC）：[http ://liveworkspace.org/code/227015a4e51126d55ca4eb1eea739b02](http://liveworkspace.org/code/227015a4e51126d55ca4eb1eea739b02)

```
#include<stdio.h>
#include<stdlib.h>
#include<string.h>

int player_cash[4] = {50};

enum jobType
{
    jobA,
    jobB,
    jobC,
    jobDonate,
    jobGoToWork,
    jobExit,
    /* marker */
    jobInvalid
};

const char jobNames[][20] =
{
    "A",
    "B",
    "C",
    "Donate",
    "Go to work",
    "Exit"
};

enum jobType typeOfJob(const char* const name)
{
    int i;
    for (i=jobA; i!=jobInvalid; ++i)
#ifdef CASE_SENSITIVE
        if (0 == strcmp(jobNames[i], name))
#else
        if (0 == strcasecmp(jobNames[i], name))
#endif
            return i;
    return i;
}

const char* safer_gets()
{
    static char input[1024];
    char *p;
    const char* t;
    const char trimAt[] = "\r\n\t ";
    fgets(input, sizeof(input), stdin);

    for (t=trimAt; *t; ++t)
        while(p = strrchr(input, *t)) 
            *p = 0;

    return input;
}

int main()
{
    const char* input;
    while(player_cash[0] > 0)
    {
        printf("Please type A, B, C, Donate, Go to work, or Exit\n");
        input = safer_gets();

        switch(typeOfJob(input))
        {
        case jobA:
            player_cash[0]-=5;
            player_cash[1]+=5;
            printf("Cash=%i\n\n", player_cash[0]);
            continue;
        case jobB:
            player_cash[0]-=5;
            player_cash[2]+=5;
            printf("Cash=%i\n\n", player_cash[0]);
            continue;
        case jobC:
            player_cash[0]-=5;
            player_cash[3]+=5;
            printf("Cash=%i\n\n", player_cash[0]);
            continue;
        case jobDonate:
            player_cash[0]-=15; 
            player_cash[1]+=5;
            player_cash[2]+=5;
            player_cash[3]+=5;
            printf("Cash donated\n\n");
            printf("Cash=%i\n\n", player_cash[0]);
            continue;
        case jobGoToWork:
            player_cash[0]+=10;
            printf("Work done\n\n");
            printf("Cash=%i\n\n", player_cash[0]);
            continue;
        case jobExit:
            printf("Thanks for playing!\n\n");
            break;
        default:
            printf("Does not compute");
            continue;
        }
    }
    getchar();
    return 0;
} 
```

# php - php代码工作错误

> ID：12874961
> 
> 赞同：0
> 
> 时间：2012-10-13T17:04:37.213
> 
> 标签：php, mysql

嗯，这里出了点问题。我输入我的数据库中存在的用户名和密码。在这种情况下应该`echo`是这个字符串

> 需要激活

但它呼应了这一点

> 你需要注册

初始化文件

```
<?php
    //error_reporting(0);
    session_start();

    require 'dbconnect.php';//this works okay so i wouldn't post this file code
    require 'users.php';

    $errors = array();
?> 
```

用户.php

```
 <?php

        function user_exists($username){
            $username = mysql_real_escape_string($username);

            $query = mysql_query("SELECT COUNT('user_id') FROM `users` WHERE 'username' = '$username'");

            if (!$query) {
                die('Could not query:' . mysql_error());
            }

            return (mysql_result($query, 0) == 1) ? true : false;

        }

        function user_active($username){

            $username = mysql_real_escape_string($username);

            $querytoo = mysql_query("SELECT COUNT('user_id') FROM `users` WHERE 'username' = '$username' AND 'active' = 1");

            if (!$querytoo) {
                die('Could not query:' . mysql_error());
            }

            return (mysql_result($querytoo , 0) == 1) ? true : false;

        }
    ?> 
```

登录.php

```
<?php
include 'init.php';

if(empty($_POST) === false){
    $username = $_POST['username'];
    $password = $_POST['password'];

    if(empty($username) === true || empty($password) === true){
        $errors[]='You need to enter a username and password';
    } 
    elseif(user_exists($username) === false){
        $errors[]='You need to reg';
    } 
    elseif(user_active($username) === false){
        $errors[]='need to activate';
    } 
    else {
    //
    }

    print_r($errors);
}

?> 
```

html的一部分

```
<form action="login.php" method = "post">
                    <ul id="login">
                        <li>
                            username:<br>
                            <input type="text" name="username" size="30" value=""/></li>
                        <li>password:<br>
                            <input type="password" name="password" size="30" value=""/></li>
                        <li><input type = "submit" value ="Log in"></li>
                        <li>
                            <a href="register.php"> Register</a>
                        </li>
                    </ul> 
```

查询的 PS 文本工作正常，我在 mysql 中检查了它。在 php 代码中，当我在这里键入 `` 而不是 ''

> SELECT COUNT('user_id') FROM `users`WHERE 'username' = '$username' AND 'active' = 1

出现

> '无法查询：'

事物

我尝试`elseif`了`else if`一些事情，所以我认为不存在问题

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-13T17:08:21.003

你的 SQL 是错误的。您正在将静态字符串与您的值进行比较，而不是列名：

```
 SELECT COUNT('user_id') FROM users WHERE 'username' = '$username' AND 'active' = 1 
```

应该

```
SELECT COUNT(user_id) FROM users WHERE username = '$username' AND active = 1 
```

请注意，我从列名中删除了 '。使用反引号也是有效的：

```
SELECT COUNT(`user_id`) FROM users WHERE `username` = '$username' AND `active` = 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:08:51.043

在查询中使用`'`表/字段名称会将它们转换为字符串，并且它们将不再被视为字段/表名称。这就是为什么有反引号，用于转义这些恰好是关键字的字段/表名称。您唯一需要转义字段/表名称的时间是它们是否是保留字。

意思就是...

```
SELECT COUNT('user_id')
             ^-      ^-
FROM `users`
WHERE 'username' = '$username' AND 'active' = 1");
      ^--      ^--                 ^-     ^- 
```

是完全错误的。您正在计算一个固定字符串，您正在将提供的用户名与值为 的字符串进行比较`username`，同样适用于`active`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-13T17:09:37.057

您检查用户是否存在的查询可能是您的问题之一：

```
$query = mysql_query("SELECT COUNT('user_id') FROM `users` WHERE 'username' = '$username'"); 
```

在该查询中，您在列名上使用单引号。这会导致比较两个字符串，并且除非您有一个名为 的用户名`username`，否则它将始终返回`0`。使用 ` 字符转义列。

```
$query = mysql_query("SELECT COUNT(`user_id`) FROM `users` WHERE `username` = '$username'"); 
```

或不使用任何东西

```
$query = mysql_query("SELECT COUNT(user_id) FROM `users` WHERE username = '$username'"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-13T17:10:19.730

您是否记得将用户名注册到会话中，并在之后获取？

```
$username = $_SESSION['username']; 
```

# ruby - 在 Ruby 中创建和迭代二维数组

> ID：12874965
> 
> 赞同：16
> 
> 时间：2012-10-13T17:05:18.743
> 
> 标签：ruby, arrays, multidimensional-array

我对 Ruby 知之甚少，无法找到创建二维数组的方法。谁能给我一些片段或信息让我开始？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-13T17:41:25.247

```
a = [[1, 2], [3, 4]]
a.each do |sub|
  sub.each do |int|
    puts int
  end
end
# Output:
#   1
#   2
#   3
#   4 
```

或者：

```
a = [[1, 2], [3, 4]]
a.each do |(x, y)|
  puts x + y
end
# Output:
#   3
#   7 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2016-10-25T03:31:10.783

创建二维数组的最简单方法是：

```
arr1 = Array.new(3) { Array.new(3)} 
```

上面的代码创建了一个三行三列的二维数组。

干杯。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-10-13T17:35:08.857

```
irb(main):001:0> a = []
=> []
irb(main):002:0> a1 = [1, 2]
=> [1, 2]
irb(main):003:0> a2 = [3, 4]
=> [3, 4]
irb(main):004:0> a.push a1             
=> [[1, 2]]
irb(main):005:0> a.push a2
=> [[1, 2], [3, 4]]
irb(main):006:0> a
=> [[1, 2], [3, 4]]
irb(main):007:0> a[0]
=> [1, 2]
irb(main):008:0> a[0][1]
=> 2 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-13T17:48:05.433

Ruby 没有像 C 那样的二维数组的概念。Ruby 中的数组是动态的——这意味着您可以随意调整它们的大小。它们可以在每个“槽”中包含任何对象或值——包括另一个数组！

在@JunaidKirkire 和@simonmenke 给出的示例中，您有一个数组，其中包含其值的数组。您可以使用类似于 C 的语法访问这些值 - 但您也可能遇到一个插槽是数组而另一个插槽只是数字、字符串或哈希的情况......

您可能需要通过 Ruby 教程来更好地了解它的工作原理。我喜欢[RubyMonk](http://www.rubymonk.com)，但也有其他不错的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-02-07T11:23:33.630

> 在 Ruby 中创建一个二维数组

在 ruby​​ 中，每个方法都接受一个块。

```
two_d_array = Array.new(3) do
  Array.new(3) do
    0
  end
end 
```

同样可以写成单行（宏风格）

```
two_d_array = Array.new(3) { Array.new(3) { 0 } } 
```

输出

```
[
 [0, 0, 0], 
 [0, 0, 0], 
 [0, 0, 0]
] 
```

> 在 Ruby 中迭代二维数组

我可以想到三种方法。

**1：使用** `range`

```
(0...two_d_array.size).each do |i|
  (0...(two_d_array[i].length)).each do |j|
    puts two_d_array[i][j]
  end
end 
```

**2：使用** `for`

```
for i in (0...two_d_array.size)
 for j in (0...two_d_array[i].length)
  puts two_d_array[i][j]
 end
end 
```

**三：使用** `Each_with_index`方法

```
two_d_array.each_with_index do |sub_array, i|
  sub_array.each_with_index do |item, j|
    puts two_d_array[i][j]
  end
end 
```

# c - 将参数从 shell 脚本传递给 c 程序

> ID：12874968
> 
> 赞同：-1
> 
> 时间：2012-10-13T17:05:37.620
> 
> 标签：c, bash, shell

```
gcc (GCC) 4.7.2
GNU bash, version 4.2.37 
```

你好，

我有以下 bash 脚本，我想将字符串参数传递给我的 c 程序。我尝试使用管道但失败了。

c 程序将需要从 shell 脚本中获取输入。我不确定从 shell 脚本中读取输入。

我的 bash 脚本如下。

```
#!/usr/bash

# About on any errors
set -e

RUN_WITH_VALGRIND=""

if [ "$1" == "valgrind" ]; then
    RUN_WITH_VALGRIND="valgrind"
    echo "START TESTING WITH VALGRIND"
fi

$RUN_WITH_VALGRIND ./c_program

echo "Hello" | ./c_program 
```

我的示例 c 程序在这里：

```
char str_input[16];
printf("Get input: ");
scanf("%s", str_input);
printf("Input [ %s ]\n", str_input); 
```

我试图让 scanf 从 shell 脚本中读取输入。

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:11:31.487

`echo "Hello" | $RUN_WITH_VALGRIND ./c_program`，就这么简单。

但是在您的脚本中， c_program 将在您在调用后重新调用它时运行两次`run_with_valgrind`（我不知道它是否有意）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T12:06:49.303

我喜欢为此使用“here docs”：

```
$RUN_WITH_VALGRIND ./c_program <<EOF
first
second
EOF 
```

参看。[http://tldp.org/LDP/abs/html/here-docs.html](http://tldp.org/LDP/abs/html/here-docs.html)

# ios - iOS tableview 部分标题不会留在视图顶部

> ID：12874970
> 
> 赞同：2
> 
> 时间：2012-10-13T17:05:40.693
> 
> 标签：ios, xcode, uitableview, header

正如标题所暗示的那样，我在表格中的部分标题在滚动时不会停留在顶部。它以前可以工作，但由于某种原因，它停止了。我无法弄清楚为什么我的生活。任何帮助都是极好的。谢谢。

代码：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

return [xmlParser.calls count] * 2 + 1;
}

- (CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {

return headerHeight;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {

if (indexPath.row % 2 == 0)
return 7;
return 65;
}

- (UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section {

UIView *headerView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.tableView.bounds.size.width, 20)];
headerView.backgroundColor = [UIColor colorWithRed:(51/255.0)  green:(54/255.0)  blue:(57/255.0)  alpha:1.0];

CALayer *bottomBorder = [CALayer layer];
bottomBorder.frame = CGRectMake(0.0f, 44.0f, self.tableView.bounds.size.width, 1.0f);
bottomBorder.backgroundColor = [UIColor colorWithRed:(130/255.0)  green:(130/255.0)  blue:(130/255.0)  alpha:1.0].CGColor;
[headerView.layer addSublayer:bottomBorder];

CALayer *topBorder = [CALayer layer];
topBorder.frame = CGRectMake(0.0f, 0.0f, self.tableView.bounds.size.width, 1.0f);
topBorder.backgroundColor = [UIColor colorWithRed:(130/255.0)  green:(130/255.0)  blue:(130/255.0)  alpha:1.0].CGColor;
[headerView.layer addSublayer:topBorder];

CALayer *imageBorder = [CALayer layer];
imageBorder.frame = CGRectMake(0.0f, 45, self.tableView.bounds.size.width, 7);
imageBorder.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"texture3.png"]].CGColor;
[headerView.layer addSublayer:imageBorder];

UILabel *countyLabel = [[UILabel alloc] initWithFrame:CGRectMake(136, 0, 75, 20)];
countyLabel.text = @"LEGEND";
countyLabel.backgroundColor = [UIColor clearColor];
countyLabel.font = [UIFont boldSystemFontOfSize:11];
countyLabel.textColor = [UIColor whiteColor];
[headerView addSubview:countyLabel];

UILabel *county = [[UILabel alloc] initWithFrame:CGRectMake(37, 20, 75, 20)];
county.text = @"WA. COUNTY";
county.backgroundColor = [UIColor clearColor];
county.font = [UIFont systemFontOfSize:10];
county.textColor = [UIColor whiteColor];
[headerView addSubview:county];

UIImageView *waCountyImage = [[UIImageView alloc] initWithFrame:CGRectMake(15, 20, 18, 18)];
waCountyImage.image = [UIImage imageNamed:@"blue.png"];
[headerView addSubview:waCountyImage];

UILabel *county1 = [[UILabel alloc] initWithFrame:CGRectMake(128, 20, 75, 20)];
county1.text = @"CLA. COUNTY";
county1.backgroundColor = [UIColor clearColor];
county1.font = [UIFont systemFontOfSize:10];
county1.textColor = [UIColor whiteColor];
[headerView addSubview:county1];

UIImageView *caCountyImage = [[UIImageView alloc] initWithFrame:CGRectMake(107, 20, 18, 18)];
caCountyImage.image = [UIImage imageNamed:@"green.png"];
[headerView addSubview:caCountyImage];

UILabel *callType = [[UILabel alloc] initWithFrame:CGRectMake(227, 20, 75, 20)];
callType.text = @"FIRE";
callType.backgroundColor = [UIColor clearColor];
callType.font = [UIFont systemFontOfSize:10];
callType.textColor = [UIColor whiteColor];
[headerView addSubview:callType];

UIImageView *fireImage = [[UIImageView alloc] initWithFrame:CGRectMake(205, 20, 18, 18)];
fireImage.image = [UIImage imageNamed:@"red.png"];
[headerView addSubview:fireImage];

UILabel *callType1 = [[UILabel alloc] initWithFrame:CGRectMake(280, 20, 75, 20)];
callType1.text = @"EMS";
callType1.backgroundColor = [UIColor clearColor];
callType1.font = [UIFont systemFontOfSize:10];
callType1.textColor = [UIColor whiteColor];
[headerView addSubview:callType1];

UIImageView *emsImage = [[UIImageView alloc] initWithFrame:CGRectMake(258, 20, 18, 18)];
emsImage.image = [UIImage imageNamed:@"yellow.png"];
[headerView addSubview:emsImage];

return headerView;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

static NSString *cellidentifier1 = @"cell1";
static NSString *cellidentifier2 = @"cell2";
self.tableView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"texture3.png"]];
self.tableView.separatorColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"texture3.png"]];

if (indexPath.row % 2 == 0)
{
    UITableViewCell * cell2 = [tableView dequeueReusableCellWithIdentifier:cellidentifier2];

    if (cell2 == nil)
    {
        cell2 = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellidentifier2];
        [cell2.contentView setAlpha:0];
        [cell2 setUserInteractionEnabled:NO];
        [cell2 setBackgroundColor:[UIColor clearColor]];
    }
    return cell2;
}

JointCAD *currentCall = [[xmlParser calls] objectAtIndex:((indexPath.row - 1 ) / 2)];

TableViewCell *cell = (TableViewCell *)[tableView dequeueReusableCellWithIdentifier:cellidentifier1];

    if (cell == nil)
{
    cell = [[TableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellidentifier1];
}

cell.callTypeLabel.text = currentCall.currentCallType;
cell.locationLabel.text = currentCall.location;
cell.unitsLabel.text = currentCall.units;
cell.stationLabel.text = [@"Station: " stringByAppendingString:currentCall.station];

if ([currentCall.county isEqualToString:@"W"]) {

    cell.countyImageView.image = [UIImage imageNamed:@"blue.png"];
}
else {
    cell.countyImageView.image = [UIImage imageNamed:@"green.png"];
}

if ([currentCall.callType isEqualToString:@"F"]) {

    cell.callTypeImageView.image = [UIImage imageNamed:@"red.png"];
}
else {
    cell.callTypeImageView.image = [UIImage imageNamed:@"yellow.png"];
}
return cell;
} 
```

# apache-pig - ERROR [main] 2997: Unable to recreate exception from backend error: org.apache.pig.backend.executionengine.ExecException

> ID：12874975
> 
> 赞同：1
> 
> 时间：2012-10-13T17:06:33.063
> 
> 标签：apache-pig

我在猪中创建了以下脚本。我对 PIG 和 PIGLATIN 很陌生。我仍在学习如何有效地使用 PIG 脚本。

执行脚本后出现此错误：

> 错误 ERROR [main] org.apache.pig.tools.grunt.Grunt - 错误 2997：无法从后端错误重新创建异常：org.apache.pig.backend.executionengine.ExecException

有人可以解释原因以及我如何纠正它。在 csv 文件中，除了具有整数值的 rate 列之外，我有所有 char 列。

```
*divs = LOAD 'output\file.csv' using PigStorage(',') AS (uniID:chararray, deal:chararray, rol: chararray,name:chararray,add:chararray,city:chararray,stat:chararray,stn:chararray,zip:chararray,country:chararray,db:chararray,sm:chararray,rate:int);
DUMP divs;
trimmed = foreach divs generate sm,uniID,rol,rate,country;
DUMP trimmed;
grpd = group trimmed by sm;
orderd = order trimmed by country;
describe trimmed;
describe grpd;
DUMP grpd;
describe orderd;
avgdiv = foreach grpd generate sm, AVG(divs.rate), SUM(divs.rate), MAX(divs.rate);
DUMP avgdiv;
store avgdiv into 'output/pigdescribe1out';
explain;* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T15:35:18.213

您的 group 语句返回错误。您正在尝试在分组之前聚合数据，因此会出现错误。

```
divs = LOAD '$input' using PigStorage('^A') AS (uniID:chararray, deal:chararray, rol: chararray,name:chararray,add:chararray,city:chararray,stat:chararray,stn:chararray,zip:chararray,country:chararray,db:chararray,sm:chararray,rate:int);<br/>
DUMP divs;
trimmed = foreach divs generate sm,uniID,rol,rate,country;
DUMP trimmed;
grpd = group trimmed by sm;
orderd = order trimmed by country;
describe trimmed;
describe grpd;
DUMP grpd;
describe orderd;
avgdiv = foreach grpd generate FLATTEN(group), AVG(trimmed.rate), SUM(trimmed.rate), MAX(trimmed.rate);
DUMP avgdiv;
store avgdiv into 'data/sampledata/';
explain; 
```

这工作得很好。

# c# - 如何以编程方式使用泛型执行重载解决方案

> ID：12874979
> 
> 赞同：0
> 
> 时间：2012-10-13T17:07:11.393
> 
> 标签：c#, .net, generics, overload-resolution

我有许多`MethodBase`实例引用不同的开放通用方法（`expected`），例如代表以下方法：

```
T Foo<T>(T nevermind, T other);
T Foo<T>(string nevermind, T other); 
```

我有一个`MethodBase`引用封闭方法的单个实例，该方法实际上被称为 ( `actual`)，例如：

```
int Foo<int>(string nevermind, int other); 
```

我如何以编程方式检查`actual`封闭方法是否可以匹配任何给定的`expected`开放方法，尤其是在考虑所有泛型陷阱和复杂性时？

具体来说，我想确定给定封闭方法的`expected`列表中的正确项目是而不是第二个。`actual``T Foo<T>(string nevermind, T other);`

此外，对于`MethodBase`对应于 `double Foo<double>(double something, string other)`我希望没有匹配的结果。

遍历候选方法并检查每个参数`expected`是否可以从相应`actual`参数分配是一种好方法吗？如果是这样，这是最简单的方法吗？我是否需要考虑任何特殊情况以不匹配不会根据 .NET 中的方法重载解析规则选择的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T00:20:26.017

*Tl;博士。使用反射是不可能解决这个问题的，至少据我所知，而且没有更多的具体性..*

方法解析规则极其复杂，尤其是对于泛型方法。你会陷入许多陷阱。您不仅需要知道方法、类型参数，还需要了解有关目标的大量信息，以及它自己的类型参数。在某些情况下，*从*.

*   方法在基类中有实现，但被子类隐藏。
*   方法来自一个接口，并且是显式实现的，并且可能在实现者上有另一个同名的方法。
*   除非您知道调用来自何处，否则无法消除诸如 、 和其他一些变体之类的方法的`Foo<T>(T a, string other)`歧义`Foo<T>(string a, T other)`（这些是合法的方法，并且被调用的方法取决于几件事）。`Foo<T>(string a, string other)``T = string`
*   通用约束可以放在方法上。
*   参数类型的多态性，包括接口和委托的泛型变化。
*   可选参数。
*   这种情况一直在继续。

基本上，它永远无法工作。不使用反射。不是你提议的方式。即使您对可以拨打的电话有限制，您也必须决定检查哪些内容，哪些不检查，而且您总是会错过一些。顺便说一句，这些并不是唯一的陷阱，只是随机抽样。

但是，您确实有一些选择。

在我看来，第一个也是最好的选择是退后一步，思考最初的问题。如果可以，请发布。它可能有不同的答案，人们将能够为您提供更好的建议。希望理解起来不那么复杂。

如果你极大地限制了事情的范围，比如没有泛型约束、没有接口等等，这可能是可能的。这很容易出错，因为有很多陷阱。

您可以尝试在运行时使用动态绑定来解决它，但动态绑定解析方法的方式可能与通常发生的方式不同。不过，我对此知之甚少。

您可以挂钩运行时，也可以在解决方法调用时对其进行调查。有这方面的图书馆。这甚至可以让您了解后期绑定是如何解决的。

最后，您可以借助各种工具和库（例如`Mono.Cecil`. 在构建的库中，已经执行了方法解析，因此您将准确地看到从哪些位置调用了哪些方法。然而，这听起来并不可行。

哦，还有 Roslyn 和其他带有接口的编译器。他们已经实现了解析逻辑，因此他们可以使任务更容易。如果它们是开源的，您可以尝试了解如何在那里执行方法解析。不过，我有点超出我的深度。我怀疑这是不可行的。

我不喜欢发布指向特定库的链接，因为我宁愿你只是研究它们。也因为有很多选择。

*总而言之，至少在我看来，并且根据我对问题的理解，如果没有对方法和更多信息的很大限制，这是不可能的。*

# c# - 如何以表格形式/数据网格显示分层数据

> ID：12874982
> 
> 赞同：0
> 
> 时间：2012-10-13T17:07:14.813
> 
> 标签：c#, sql, datagrid

我想显示一个网格，其中显示受邀者信息和 - 这是棘手的部分 - 指示他们已收到哪些邮件的列。

例如，像这样的网格：

```
Firstname | Lastname | ReceivedMail1 | ReceivedMail2 
```

如果在应用程序中创建了第三封邮件，我需要在网格中添加这样的列：

```
Firstname | Lastname | ReceivedMail1 | ReceivedMail2 | ReceivedMail3 
```

我的数据库是关系型的，所以有一些类似于 person.receivedEmails 的电子邮件集合。

我正在寻找一个最佳实践来解决这个问题。我在 WinForms 应用程序中使用 C# 工作，但我的 web 应用程序也需要它。我正在考虑一个动态对象（虽然我不确定它与网格有多好），或者可能是一个数据库视图。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:28:48.117

好的，这就是我要这样做的方式。感谢[Adding-properties-To-ExpandoObjects](https://stackoverflow.com/questions/4938397/dynamically-adding-properties-to-an-expandoobject)和[Binding-ExpandoObjects-ToDatagrid](https://stackoverflow.com/questions/5573856/binding-a-gridview-to-a-dynamic-or-expandoobject-object)

这是一个原型：

```
 dynamic obj = new ExpandoObject();
        obj.FirsName = "John";
        obj.LastName = "Doe";
        var x = obj as IDictionary<string, Object>;
        for (int i = 0; i < 3; i++)
        {
            x["ReceivedMail_" + i] = true;
        }

        var data = new List<ExpandoObject>() { obj };
        this.dataGridView1.DataSource = data.ToDataTable(); 
```

使用第二个链接中的该方法：

```
 public static class DynamicIENumerableExtension
{
    public static DataTable ToDataTable(this IEnumerable<dynamic> items)
    {
        var data = items.ToArray();
        if (data.Count() == 0) return null;

        var dt = new DataTable();
        foreach (var key in ((IDictionary<string, object>)data[0]).Keys)
        {
            dt.Columns.Add(key);
        }
        foreach (var d in data)
        {
            dt.Rows.Add(((IDictionary<string, object>)d).Values.ToArray());
        }
        return dt;
    } 
```

结果和我想要的完全一样。:)

![结果](../Images/2d1f8f5140a3da1cf84ab1f537fc7ca5.png)

# php - 从其他网站的 div 类 span 中获取内容

> ID：12874985
> 
> 赞同：1
> 
> 时间：2012-10-13T17:07:44.023
> 
> 标签：php, file-get-contents, getelementbyid

我正在尝试从外部其他域的跨度、类、div 中获取内容到我的个人网站。网站 www.example.com 的源代码是

```
 <div id="h_gold" class="h_metal">
      <div class="hm_inside">
        <div class="hm_title">Gold</div>
        <span class="arr_price_down">- 13.42 <img src="images/downarrow.jpg" alt="down" /></span>
        <div class="clear"></div>
        <div class="hm_cad">USD</div>
        <div class="hm_bottom">
          <div> Bid<br />
            <span>$1,749.20</span> </div>
          <div class="ask"> Ask<br />
            <span>$1,750.20</span> </div>
        </div>
        <!-- .hm_bottom-->
      </div>
      <!-- hm_inside-->
    </div>
    <!-- h_metal-->
    <div id="h_silver" class="h_metal">
      <div class="hm_inside">
        <div class="hm_title">Silver</div>
        <span class="arr_price_down">- 0.54 <img src="images/downarrow.jpg" alt="down" /></span>
        <div class="clear"></div>
        <div class="hm_cad">USD</div>
        <div class="hm_bottom">
          <div> Bid<br />
            <span>$33.40</span> </div>
          <div class="ask"> Ask<br />
            <span>$33.50</span> </div>
        </div>
        <!-- .hm_bottom-->
      </div>
      <!-- hm_inside-->
    </div>
    <!-- h_metal--> 
```

我这里有问题..我尝试了以下代码..但它没有循环，我只从第一个 < div class="hm_bottom" > 获取内容，其余部分不在输出中，

```
 <?php
    function get_string_between($string, $start, $end)
    {
        $string = " ".$string;
        $ini = strpos($string,$start);
        if ($ini == 0)
            return "";
        $ini += strlen($start);
        $len = strpos($string,$end,$ini) - $ini;
        return substr($string,$ini,$len);
    }
    $data = file_get_contents("http://www.example.com/ajax.php?metal_cur=USD");

    $pricediv = get_string_between($data, '<div class="hm_bottom">', '</span>');
    $pricetext = strip_tags($pricediv);
    echo $pricetext;
    ?> 
```

其次，我再次搜索了 stachoverflow，我发现一个已解决，但并不完全符合我的需求。输出还可以，但我只想将输出中的数字数据放在我定义的特定 div id 中。

```
 <?php 
    $page = file_get_contents('http://www.example.com/ajax.php?metal_cur=USD');
    $doc = new DOMDocument();
    $doc->loadHTML($page);
    $divs = $doc->getElementsByTagName('div');
    foreach($divs as $div) {
        // Loop through the DIVs looking for one withan id of "content"
        // Then echo out its contents (pardon the pun)
        if ($div->getAttribute('class') === 'hm_bottom') {
             echo $div->nodeValue;
        }
    }
    ?> 
```

上面的代码来自stackoverflow的第二次搜索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T17:28:00.767

您可以根据情况使用[str_get_html](http://simplehtmldom.sourceforge.net/)或[file_get_html](http://simplehtmldom.sourceforge.net)

```
$html = str_get_html($html);
$amounts = array();
foreach ( $html->find("div[class=hm_bottom] span") as $span ) {
    $amount = trim($span->plaintext);
    if (strpos($amount, "\$") === 0)
        $amounts[] = $amount;
}

var_dump($amounts); 
```

输出

```
array
  0 => string '$1,749.20' (length=9)
  1 => string '$1,750.20' (length=9)
  2 => string '$33.40' (length=6)
  3 => string '$33.50' (length=6) 
```

# python - Bash别名自动检测任意命名的文件序列？

> ID：12874986
> 
> 赞同：6
> 
> 时间：2012-10-13T17:07:47.400
> 
> 标签：python, bash, shell, sequence, ls

我正在寻找一个 bash 别名来改变 ls 的结果。我经常处理大量文件，这些文件不遵循相同的命名约定。它们唯一的共同点是数字是 4 填充的（抱歉，不确定正确的说法）并且紧接在扩展之前。

例如 - 文件名_v028_0392.bgeo、test_x34.prerun.0012.simdata、文件名_v001_0233.exr

我希望将每个序列列为 1 个元素，以便

```
filename_v003_0001.geo
filename_v003_0002.geo
filename_v003_0003.geo
filename_v003_0004.geo
filename_v003_0005.geo
filename_v003_0006.geo
filename_v003_0007.geo
filename_v003_0032.geo
filename_v003_0033.geo
filename_v003_0034.geo
filename_v003_0035.geo
filename_v003_0036.geo
testxxtest.0057.exr
testxxtest.0058.exr
testxxtest.0059.exr
testxxtest.0060.exr
testxxtest.0061.exr
testxxtest.0062.exr
testxxtest.0063.exr 
```

将显示为沿线的东西

```
[seq]filename_v003_####.geo (1-7)
[seq]filename_v003_####.geo (32-36)
[seq]testxxtest.####.exr (57-63) 
```

同时仍然列出未改变的非序列。

我真的不知道从哪里开始接近这个。我知道相当数量的python，但不确定这是否真的是最好的方法。任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T19:09:17.020

这是用`awk`. 代码虽然很不可读：

```
#!/bin/bash

ls | awk '
function smprint() {
    if ((a[1]!=exA1) || (a[2] != exA2+1)) {
        if ((exA1) && (exA1==exexA1)) print "\t.. " exfile;
        else printf linesep;
        if ($0!=exfile) printf $0;
    }
};
BEGIN { d="[0-9]"; rg="(.*)(" d d d d ")(.*)"; };
{
    split(gensub(rg, "\\1####\\3\t\\2", "g"), a, "\t");
    # produces e.g.: a[1]="file####.ext" a[2]="0001"

    smprint();
    linesep="\n";

    exexA1=exA1; # old old a[1]
    exA1=a[1]; # old a[1]
    exA2=a[2]; # old a[2]
    exfile=$0; # old filename
};
END {
    smprint();
}' 
```

比较`ls`同一文件夹中上述脚本的输出：

```
etuardu@subranu:~/Desktop/pippo$ ls
asd1234_0001.tar.bz2    filename_v003_0006.geo  script.sh
asd1234_0002.tar.bz2    filename_v003_0007.geo  testxxtest.0057.exr
asd1234_0003.tar.bz2    filename_v003_0032.geo  testxxtest.0058.exr
filename_v003_0001.geo  filename_v003_0033.geo  testxxtest.0059.exr
filename_v003_0002.geo  filename_v003_0034.geo  testxxtest.0060.exr
filename_v003_0003.geo  filename_v003_0035.geo  testxxtest.0061.exr
filename_v003_0004.geo  filename_v003_0036.geo  testxxtest.0062.exr
filename_v003_0005.geo  other_file              testxxtest.0063.exr
etuardu@subranu:~/Desktop/pippo$ ./script.sh 
asd1234_0001.tar.bz2    .. asd1234_0003.tar.bz2
filename_v003_0001.geo  .. filename_v003_0007.geo
filename_v003_0032.geo  .. filename_v003_0036.geo
other_file
script.sh
testxxtest.0057.exr .. testxxtest.0063.exr
etuardu@subranu:~/Desktop/pippo$ 
```

如果您介意坚持示例中提供的语法，可以将此输出通过管道传输到`sed`. 使用一些正则表达式魔法，你有：

```
etuardu@subranu:~/Desktop/pippo$ ./script.sh | sed -r 's/(.*)([0-9]{4})([^\t]+)\t\.\. .*([0-9]{4}).*$/[seq]\1####\3 (\2-\4)/g'
[seq]asd1234_####.tar.bz2 (0001-0003)
[seq]filename_v003_####.geo (0001-0007)
[seq]filename_v003_####.geo (0032-0036)
other_file
script.sh
[seq]testxxtest.####.exr (0057-0063)
etuardu@subranu:~/Desktop/pippo$ 
```

然后你可以完全放入一个 bash 脚本并在你的中定义一个别名`~/.bashrc`来调用它。

作为旁注，请考虑这是一个应该在大多数 *nix 系统上运行的纯 bash-ish 解决方案，但使用的工具并不真正适合该任务。您可以考虑用一种语言编写此脚本，以`python`提高其可读性和更高级别的字符串操作和模式匹配功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T00:00:41.230

我得到了一个 python 2.7 脚本，它通过解决折叠几行仅按序列号更改的更一般问题来解决您的问题

```
import re

def do_compress(old_ints, ints):
    """
    whether the ints of the current entry is the continuation of the previous
    entry
    returns a list of the indexes to compress, or [] or False when the current
    line is not part of an indexed sequence
    """
    return len(old_ints) == len(ints) and \
        [i for o, n, i in zip(old_ints, ints, xrange(len(ints))) if n - o == 1]

def basic_format(file_start, file_stop):
    return "[seq]{} .. {}".format(file_start, file_stop)

def compress(files, do_compress=do_compress, seq_format=basic_format):
    p = None
    old_ints = ()
    old_indexes = ()

    seq_and_files_list = [] 
        # list of file names or dictionaries that represent sequences:
        #   {start, stop, start_f, stop_f}

    for f in files:
        ints = ()
        indexes = ()

        m = p is not None and p.match(f) # False, None, or a valid match
        if m:
            ints = [int(x) for x in m.groups()]
            indexes = do_compress(old_ints, ints)

        # state variations
        if not indexes: # end of sequence or no current sequence
            p = re.compile( \
                '(\d+)'.join(re.escape(x) for x in re.split('\d+',f)) + '$')
            m = p.match(f)
            old_ints = [int(x) for x in m.groups()]
            old_indexes = ()
            seq_and_files_list.append(f)

        elif indexes == old_indexes: # the sequence continues
            seq_and_files_list[-1]['stop'] = old_ints = ints
            seq_and_files_list[-1]['stop_f'] = f
            old_indexes = indexes

        elif old_indexes == (): # sequence started on previous filename
            start_f = seq_and_files_list.pop()
            s = {'start': old_ints, 'stop': ints, \
                'start_f': start_f, 'stop_f': f}
            seq_and_files_list.append(s)

            old_ints = ints
            old_indexes = indexes

        else: # end of sequence, but still matches previous pattern
            old_ints = ints
            old_indexes = ()
            seq_and_files_list.append(f)

    return [ isinstance(f, dict) and seq_format(f['start_f'], f['stop_f']) or f 
        for f in seq_and_files_list ]

if __name__ == "__main__":
    import sys
    if len(sys.argv) == 1:
        import os
        lst = sorted(os.listdir('.'))
    elif sys.argv[1] in ("-h", "--help"):
        print """USAGE: {} [FILE ...]
compress the listing of the current directory, or the content of the files by
collapsing identical lines, except for a sequence number
"""
        sys.exit(0)
    else:
        import string
        lst = [string.rstrip(l, '\r\n') for f in sys.argv[1:] for l in open(f)])
    for x in compress(lst):
        print x 
```

也就是说，在您的数据上：

```
bernard $ ./ls_sequence_compression.py given_data
[seq]filename_v003_0001.geo .. filename_v003_0007.geo
[seq]filename_v003_0032.geo .. filename_v003_0036.geo
[seq]testxxtest.0057.exr .. testxxtest.0063.exr 
```

它基于与非数字文本匹配的两个连续行中存在的整数之间的差异。这允许在用作序列基础的字段更改时处理非统一输入...

这是一个输入示例：

```
01 - test8.txt
01 - test9.txt
01 - test10.txt
02 - test11.txt
02 - test12.txt
03 - test13.txt
04 - test13.txt
05 - test13.txt
06
07
08
09
10 
```

这使：

```
[seq]01 - test8.txt .. 01 - test10.txt
[seq]02 - test11.txt .. 02 - test12.txt
[seq]03 - test13.txt .. 05 - test13.txt
[seq]06 .. 10 
```

欢迎任何评论！

哈......我差点忘了：没有参数，这个脚本输出当前目录的折叠内容。

# sql - 查找最昂贵的订单

> ID：12874989
> 
> 赞同：0
> 
> 时间：2012-10-13T17:07:58.683
> 
> 标签：sql, oracle, top-n

我试图在我的表中找到最昂贵的订单，我已经做到了，但我想知道如何只返回这一特定行。现在，它将所有最昂贵订单的行都放在顶部。我不太确定如何只退回最昂贵的订单。我已按订单号 ( `order_numb`) 对订单进行了分组。我试过使用`IN`和自我加入，但我似乎无法让它工作。

### 我的桌子

![在此处输入图像描述](../Images/cd32bb07c2c5eefe572773f2dc1aa08c.png)

### 我当前返回正确结果的查询，只是返回所有行

```
SELECT order_numb, sum(cost_each) as totalSum
FROM order_lines 
GROUP BY order_numb
ORDER BY totalSum DESC 
```

### 我想要达到的目标

我正在尝试自己检索最昂贵的订单。

我使用 Oracle 作为我的数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:10:43.830

用于`ROWNUM`过滤结果集的第一行（最昂贵的顺序）：

```
SELECT t.*
FROM (
  SELECT order_numb, sum(cost_each) as totalSum 
  FROM order_lines 
  GROUP BY order_numb 
  ORDER BY totalSum DESC
) t
WHERE ROWNUM <= 1 
```

# android - 我怎样才能实现这个设计元素？

> ID：12874991
> 
> 赞同：0
> 
> 时间：2012-10-13T17:08:05.637
> 
> 标签：android

我有这个设计

![在此处输入图像描述](../Images/80164837288a29ada3ae789fb8629c37.png)

**我怎样才能添加这个效果？？** 可以举一个这个实现的例子

感谢你的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:34:58.763

绘制该阴影的一种非常简单的方法是使用自定义`ViewGroup`（布局中的那个）并覆盖其`dispatchDraw`方法以绘制`GradientDrawable`. 例如，使用自定义`ListView`：

```
public class RightShadowList extends ListView {

    private GradientDrawable mGradientShadow = new GradientDrawable(
            GradientDrawable.Orientation.LEFT_RIGHT, new int[] {
                    Color.WHITE, Color.GRAY });;
    // implement the constructors

    @Override
    protected void dispatchDraw(Canvas canvas) {
        super.dispatchDraw(canvas);
        mGradientShadow.setBounds(getMeasuredWidth() - 5, 0,
                getMeasuredWidth(), getMeasuredHeight());
        mGradientShadow.draw(canvas);
    }

} 
```

# php - 强制下载不同的文件

> ID：12874992
> 
> 赞同：0
> 
> 时间：2012-10-13T17:08:18.063
> 
> 标签：php

我正在尝试强制下载 php。从这里： [http](http://www.iwantanimage.com/animals/animals01.html) ://www.iwantanimage.com/animals/animals01.html 。单击英镑图像，下一页提供三种格式的选项。

这是我的 php 代码

```
<?php
header('Content-disposition: attachment; filename=sterling02md.jpg');
header('Content-type: image.jpg');
readfile('sterling02md.jpg');

header('Content-disposition: attachment; filename=sterling02lg.jpg');
header('Content-type: image.jpg');
readfile('sterling02lg.jpg');

header('Content-disposition: attachment; filename=sterling.jpg');
header('Content-type: image.jpg');
readfile('sterling02.jpg');
?> 
```

然而，唯一下载的图像是 sterling02md.jpg。如何修复代码以便用户可以下载选择的文件？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T17:10:40.120

您的内容类型不正确。您必须提供文件的 mime 类型，即`image/jpeg`. 不是`image.jpg`。

同样，您不能在单个 HTTP 请求中强制下载 3 个单独的文件。虽然某些浏览器确实支持多个文件，但您必须将每个文件封装在单独的 MIME 正文块中，而您没有这样做。

为单次下载提供这 3 个文件的 .zip 副本，或提供 3 个单独的下载链接，每个链接一个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-13T17:11:48.807

您可以尝试诸如链接到图像的位置`downalod.php?img=sterling02`

```
$image = isset($_GET['img']) ? $_GET['img']  : "noimage" ;
$image .= ".jpg";

header('Content-disposition: attachment; filename='.$image);
header('Content-Type: image/jpeg');
readfile($image); 
```

但是，如果您想强制下载，请使用

```
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0"); 
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
header("Content-Transfer-Encoding: binary ");
header('Content-disposition: attachment; filename='.$image);
readfile($image); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T17:10:36.137

在查询字符串中设置选项`download.php?option=1`

```
if (!isset($_REQUEST['option']) {
   //redirect away
}
if ($_REQUEST['option'] == 1) {
   header(...)
   //sterling02md.jpg
} 
```

# grails - 选择后自动保存

> ID：12874995
> 
> 赞同：0
> 
> 时间：2012-10-13T17:08:34.967
> 
> 标签：grails

我注意到使用简单选择调用服务方法会使数据库中的 MyDomain.class 日期字段更新（清除时间）。但是，使用 @Transactional(readOnly = true) 封闭该方法不会更新日期值。

为什么将值保存到数据库中？

这是服务方法

```
@Transactional(readOnly = true)
Date getDate() 
{
    Date date = null
    date = MyDomain.executeQuery("select min(s.startDate) from MyDomain s where ....)[0]
    print "Result: " + date

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-13T17:42:00.177

如果对象在进入休眠会话（选定）之后和会话关闭之前（通常在方法结束时）以某种方式更改，则该对象只会在数据库中更新。看看你的对象，看看它是如何以你不想要的方式修改的。

# ruby-on-rails - Heroku 端口 5000 未连接

> ID：12874999
> 
> 赞同：0
> 
> 时间：2012-10-13T17:08:51.800
> 
> 标签：ruby-on-rails, heroku

我正在 edx.org 上学习 Saas 课程，使用 ruby​​ on rails。该课程需要将我在虚拟盒子中运行的应用程序部署到heroku。我的主机和来宾机器都是 Ubutu 12.04 问题是，这个命令不起作用。

heroku 运行 rails db:migrate

甚至尝试在 Heroku 网站上进行故障排除，这指出了上述相同的问题

[https://devcenter.heroku.com/articles/oneoff-admin-ps#troubleshooting](https://devcenter.heroku.com/articles/oneoff-admin-ps#troubleshooting)

但即使这个命令也不起作用

远程登录会合.runtime.heroku.com 5000

很明显端口问题，我无法突破。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T21:24:03.700

如果这是错误消息：

```
$ heroku run console                           
Running `console` attached to terminal... up, run.2077
!
!    Error connecting to process
$ 
```

尝试这个：`heroku run:detached ls`

如果它说：

```
Running `ls` detached... up, run.8825
Use `heroku logs -p run.8825` to view the output.
$ heroku logs -p run.8825                                                                                                 2013-04-11T21:30:50.137946+00:00 heroku[run.8825]: Starting process with command `ls`
2013-04-11T21:30:50.805694+00:00 app[run.8825]: app
2013-04-11T21:30:50.805694+00:00 app[run.8825]: bin
2013-04-11T21:30:50.805694+00:00 app[run.8825]: config
.
.
. 
```

然后它与防火墙有关，但只是因为 Heroku 将矛头指向其他地方。

[https://devcenter.heroku.com/articles/one-off-dynos](https://devcenter.heroku.com/articles/one-off-dynos)

对于许多用户来说，这是一个 Heroku 问题，因为他们要求连接到端口 5000。在许多只有端口 443/80/22 可用的企业环境中，这使得大部分客户都陷入了困境。Heroku 应该拥有所有权，只是帮助用户使其工作。没有技术原因他们不能，任何这样的论点都可以证明懒惰是正当的。

像[https://github.com/nzoschke/SSHeroku](https://github.com/nzoschke/SSHeroku)和对 Proximo 收费这样的黑客解决方法是非首发，需要更多的工作分散在用户身上，而且不可扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T18:43:12.150

Heroku 开发服务器现在对我来说似乎已关闭。在命令行中输入以下代码以输出您的日志：

```
heroku logs 
```

现在我收到错误代码 h99，他们在他们的网站上说：

> 这表明 Heroku 平台中存在内部错误。与需要您采取行动纠正的所有其他错误不同，此错误不需要您采取行动。请稍后再试，或查看状态站点。

状态网站 (status.heroku.com) 说一切正常……但我的日志表明他们的结果有问题。

heroku 为您输出什么日志？