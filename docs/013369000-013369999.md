# StackOverflow 问答 13369000-13369999

# .htaccess - 删除扩展后重写动态 url

> ID：13369000
> 
> 赞同：3
> 
> 时间：2012-11-13T21:20:15.157
> 
> 标签：.htaccess, mod-rewrite, seo

我已经在我的 HTAccess 上工作了几天，但我遇到了死胡同。

我已经重写并将文件重定向为无扩展名，现在我需要重写 url 以使其对 SEO 友好。

以前，URL 是：`http://www.example.com/member.php?playername=encodedName`
我删除了扩展名：`http://www.example.com/member?playername=encodedName`
我不能完全得到它：`http://www.example.com/member/encodedName`

这是我到目前为止所得到的：

> ### 尝试重定向到 SEO 友好 URL 的代码。不工作。

```
 RewriteRule ^member/([^/]*)$ /member.php?playername=$1 [L] 
 RewriteRule ^squad/([^/]*)$ /squad.php?squadname=$1 [L] 
 RewriteRule ^article/([^/]*)$ /article.php?articlename=$1 [L] 
```

> ### 除非目录，否则删除尾部斜杠。作品。

```
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^(.*)/$ /$1 [R=301,L] 
```

> ### 为无扩展名的 php url 解析 .php 文件。作品。

```
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteCond %{REQUEST_FILENAME}\.php -f
 RewriteRule ^(.*)$ $1.php [L] 
```

> ### 将外部 .php 请求重定向到无扩展 url。作品。

```
 RewriteCond %{THE_REQUEST} ^[A-Z]+\ /([^/]+/)*[^.#?\ ]+\.php([#?][^\ ]*)?\ HTTP/
 RewriteRule ^(([^/]+/)*[^.]+)\.php $1 [R=301,L] 
```

有谁知道我做错了什么？这可能是我还没有遇到的一个非常新手的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:29:10.070

“**尝试重定向到 SEO 友好 URL 的代码**”部分看起来不错。当您将直接发出的请求重定向到 php 文件以删除扩展名时，您并没有专门针对您正在重写的 3 个 SEO 友好 URL 做任何事情。

如果当您转到 时`http://www.example.com/member/encodedName`，您没有在 处获得内容`http://www.example.com/member.php?playername=encodedName`，那么这看起来像是多视图问题。您需要在 server/vhost 配置中关闭 Multiviews 或将其添加到 htaccess 文件的顶部（或在适当的现有`Options`语句中）：

```
Options -Multiviews 
```

为了重定向**到**SEO 友好的 URL，请*在*“**将外部 .php 请求重定向到无扩展 url。** ”规则之前添加：

```
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /member\.php\?playername=([^&\ ]+)([^\ ]*)
RewriteRule ^ /member/%1?%2 [L,R=301]
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /squad\.php\?squadname=([^&\ ]+)([^\ ]*)
RewriteRule ^ /squad/%1?%2 [L,R=301]
RewriteCond %{THE_REQUEST} ^[A-Z]{3,9}\ /artcile\.php\?articlename=([^&\ ]+)([^\ ]*)
RewriteRule ^ /article/%1?%2 [L,R=301] 
```

# mysql - Rails：ActiveRecord::UnknownPrimaryKey 异常

> ID：13369002
> 
> 赞同：2
> 
> 时间：2012-11-13T21:20:16.953
> 
> 标签：mysql, ruby-on-rails, ruby, activerecord

```
A ActiveRecord::UnknownPrimaryKey occurred in survey_response#create:

Unknown primary key for table question_responses in model QuestionResponse.
activerecord (3.2.8) lib/active_record/reflection.rb:366:in `primary_key' 
```

我们的应用程序一直在引发这些异常，我们不知道是什么导致了它们。该异常发生在生产环境和测试环境中，但在任何一个环境中都不可重现。它*似乎*与服务器负载有关，但即使在峰值负载时，一些请求仍然成功完成。该应用程序（生产和测试环境）是 Rails 3.2.8，ruby 1.9.3-p194，使用 MySQL 和 mysql2 gem。生产环境是 Ubuntu，开发/测试环境是 OS X。该应用在生产环境中的 Phusion Passenger 下运行。

这是一个示例堆栈跟踪：[https](https://gist.github.com/4068400)
://gist.github.com/4068400 这是有问题的两个模型，控制器和“desc question_responses;”的输出：[https](https://gist.github.com/4b3667a6896b60383dc3)
://gist.github.com/4b3667a6896b60383dc3 它最肯定有一个主键，它是一个标准的 rails 'id' 列。

重新启动应用程序服务器会暂时阻止异常的发生，否则它们会在 30 分钟到 6 小时的时间段内发生，开始时突然停止。

它总是发生在同一个控制器动作、表和模型上。

有没有其他人遇到过这个异常？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-18T15:26:18.903

FWIW，我遇到了同样的间歇性错误，经过一番头疼后，我找到了原因。

我们每个客户端都有单独的数据库，以及一些客户端的数据库如何在用户表上缺少主键。这意味着当该客户端访问我们的站点时，Rails 将其内存模式更新为它所连接的数据库的模式，但缺少主键。无论该特定数据库是否具有主键，该乘客应用程序进程（或任何其他已被该客户端“感染”的）尝试访问用户表的任何未来请求都会因主键错误而中断。

最后是一个相当不言自明的错误，但是当你有 500 多个数据库并且只有一个数据库导致问题时很难确定，而且它是断断续续的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T18:14:44.540

遇到这个问题是因为我的工作人员使用了与数据库的共享连接。但我在独角兽。

我知道Passenger默认会重新连接，但也许你有一些复杂的逻辑。例如，与多个数据库的连接。因此，您需要重新连接所有连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T15:25:53.493

在 postgres 数据库上

```
ALTER TABLE indices ALTER COLUMN id SET DATA TYPE INT;
ALTER TABLE indices ADD PRIMARY KEY (id) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-22T22:55:28.890

同样的事情也发生在我身上。我的一个表定义中有一个复合主键导致错误。它进一步复杂化，因为注释模型不（但很快/现在）支持复合主键的注释。

我的解决方案是使 id 列成为唯一的主键，并为组合添加一个约束（未显示）。为此，如果已设置，您需要在 id 上删除 auto_increment，删除复合主键，然后重新添加主状态和自动增量。

```
ALTER TABLE indices MODIFY id INT NOT NULL;
ALTER TABLE indices DROP PRIMARY KEY;
ALTER TABLE indices MODIFY id INT NOT NULL PRIMARY KEY AUTO_INCREMENT; 
```

# java - Spring XML 属性未正确分配

> ID：13369005
> 
> 赞同：1
> 
> 时间：2012-11-13T21:21:07.433
> 
> 标签：java, spring

我有以下内容：

```
public class DifferentClass {
    Map<String,AnotherClass>someMap;
}

public class AnotherClass {
    Class<?> dataType;

    public void setDataType(Class<?> val) {
        this.dataType=val;
    }
}

public class A {
    ...
    public static class B {
        ...
    }
    ...
 } 
```

以下spring bean配置：

> <bean id="springRefName" class="my.project.path.to.DifferentClass">
> ...
> <property name="someMap">
> <map>
> ...
> <entry key="someName">
> <bean class= "my.project.path.to.AnotherClass">
> <property name="dataType" value="my.project.path.to.A$B" />
> </bean>
> </entry>
> ...
> </map >
> </property>
> ...
> </bean>

我遇到的问题是当我调用 dataType.getCanonicalName() 时，我只得到了 my.project.path.to.A。这让我相信 Spring 在转换为 Class 以分配给 AnotherClass.dataType 时会截断名称。我用 $ 和 a 都试过了。

# android - 4.2 上的 ListView 性能低于 4.1

> ID：13369008
> 
> 赞同：2
> 
> 时间：2012-11-13T21:21:17.637
> 
> 标签：android, performance, listview, cursor, android-cursoradapter

我刚刚在 Galaxy Nexus 上升级了 Android 4.2，ListView 似乎比以前在 4.1 上要慢。这种 bindView 方法在 4.1 上非常快速，在新的 4.2 上我看到了小故障。我曾尝试在 中显式启用硬件加速`AndroidManifest.xml`，但这并没有多大帮助。People (Contacts) 应用程序在 4.2 上完美运行，我猜这也是由 extended 实现的`android.support.v4.widget.CursorAdapter`。我也已经尝试在没有明显改善的情况下进行`android.support.v4.widget.CursorAdapter`更改`android.widget.CursorAdapter`。

```
@Override
public void bindView(View view, Context context, Cursor cursor) {
    final ViewHolder holder = (ViewHolder) view.getTag();
    holder.nameView.setText(cursor.getString(mStreetColumnIndex));
    holder.townView.setText(cursor.getString(mTownColumnIndex));
    if (mDistanceColumn != null) {
        float distance = cursor.getFloat(mDistanceColumn);
        String distanceUnit;
        if (distance >= 1000) {
            distance /= 1000;
            distanceUnit = " km";
        } else {
            distanceUnit = " m";
        }
        String decimalString = mDecimalFormat.format(distance);
        holder.distanceView.setText(decimalString + distanceUnit);
        holder.distanceView.setVisibility(View.VISIBLE);
    } else {
        holder.distanceView.setVisibility(View.GONE);
    }

    // read only brand first letter to be faster
    cursor.copyStringToBuffer(mBrandColumnIndex, mBuffer);
    if (mBuffer.sizeCopied > 0) {
        if (mBuffer.data[0] == 'a') {
            holder.logoImgView.setImageResource(R.drawable.agip);
        } else {
            holder.logoImgView.setImageResource(R.drawable.papoil);
        }
    } else {
        holder.logoImgView.setVisibility(View.INVISIBLE);
    }
} 
```

编辑：添加行布局

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:minHeight="@dimen/row_height"
            android:background="@drawable/bg_list_selector"
            android:layout_marginRight="@dimen/screen_padding"
            android:layout_marginLeft="@dimen/screen_padding"
            android:paddingLeft="@dimen/screen_padding">
<LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_alignParentLeft="true"
        android:layout_marginRight="@dimen/screen_padding"
        android:layout_toLeftOf="@+id/txtDistance"
        android:orientation="vertical"
        >
    <TextView
            android:id="@+id/txtName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="@dimen/list_text_primary_size"
            android:textStyle="bold"
            />
    <TextView
            android:id="@+id/txtTown"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textSize="@dimen/list_text_primary_size"
            />
</LinearLayout>
<TextView
        android:id="@+id/txtDistance"
        android:layout_toLeftOf="@+id/imgLogo"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:textColor="@color/grey_dark"
        android:textSize="13sp"
        android:textStyle="bold"
        android:layout_marginRight="@dimen/screen_padding"/>
<ImageView
        android:id="@+id/imgLogo"
        android:layout_alignParentRight="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/agip"
        android:background="@color/grey_dark"
        />
</RelativeLayout> 
```

编辑 2：这是使用 http://goo.gl/Yoe1u 制作[的](http://goo.gl/Yoe1u)traceview [http://goo.gl/UmS3w](http://goo.gl/UmS3w)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:53:41.377

这是由于windowBackground过于复杂造成的，即：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item android:drawable="@drawable/bg_repeat">
</item>
<item>
    <shape>
        <gradient android:startColor="#0affffff" android:endColor="#0a000000"
                  android:type="radial" android:gradientRadius="500"/>
    </shape>
</item>
<item>
    <shape>
        <gradient android:startColor="#1effffff" android:endColor="#1e000000"
                  android:type="linear" android:angle="270"/>
    </shape>
</item>
</layer-list> 
```

和 bg_repeat.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/bg"
    android:tileMode="repeat"/> 
```

谢谢大家的帮助！

# python - python中的interp2函数类似于MATLAB interp2

> ID：13369009
> 
> 赞同：2
> 
> 时间：2012-11-13T21:21:17.933
> 
> 标签：python, matlab

我是 python 新手和业余程序员，所以请多多包涵。现在我有一个 15x9 的矩阵。我本质上想扩展这个矩阵，使它包含更多的值。因此，我想多次插值这个数据，类似于 MATLAB 中的 interp2 函数，它允许你插值 n 次。
如果您可以向我展示执行此任务的功能，甚至可以向我展示如何解决此问题的步骤，我们将不胜感激。

抱歉，我之前应该说过这一点，但是是的，我使用的是 numpy 数组，而不是列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-05-08T14:35:38.867

我遇到了同样的问题，并发现`scipy.ndimage.map_coordinates`它与`Vq = interp2(V,Xq,Yq)`. 请阅读这些命令的文档以找出适合您情况的解决方案。

试试这个 Matlab 的`Vq = interp2(V,Xq,Yq)`：

```
Vq = scipy.ndimage.map_coordinates(V, [Xq.ravel(), Yq.ravel()], order=3, mode='nearest').reshape(V.shape) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T12:38:09.800

使用来自 scipy 的 griddata。

教程在这里： [http ://docs.scipy.org/doc/scipy/reference/tutorial/interpolate.html](http://docs.scipy.org/doc/scipy/reference/tutorial/interpolate.html)

# iphone - 目标 c 类为什么返回 -(id) 而不是它自己的类

> ID：13369012
> 
> 赞同：7
> 
> 时间：2012-11-13T21:21:34.577
> 
> 标签：iphone, objective-c

我来自 C# 背景，你初始化一个类，然后像这样返回自己

```
public class MyClass{
  public int Id;
  public string Name;
}

MyClass classInstance = new MyClass();
:
: 
```

我知道 c# 与目标 c 不同，但我正试图找到一种方法来轻松理解目标 c 如何工作以使过渡更容易。并找出最佳实践。

无论如何，我的问题是为什么你必须创建一个方法并返回一个“id”而不是返回它自己的类型？像这样：

```
- (id)initWithID:(NSInteger)id name:(NSString *)name
{
    self = [self init];
    if (self) {
        self.ID = id;
        self.name = name;
    }
    return self;
} 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T21:29:12.127

`id`由于继承，您在初始化方法中返回一个类型的对象。

这样想：你有一个 class 的对象`Foo`。它有一个名为`initWithWidgets`. 现在，您创建一个子类`Foo`并命名它`Bar`。根据继承规则，它可以访问该`initWithWidgets`方法。如果返回类型为`initWithWidgets`，`Foo`那么您的`Bar`类将无法使用它来初始化自己！返回类型将与您尝试实例化的对象不同。因此，如果你使用`id`，你是在说“这个对象的返回类型可以是任何类型”并且你对子类是安全的！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T21:30:06.747

当一个方法返回一个 type 的对象时`id`，这意味着该对象可以是任何类型。例如，如果你声明一个`NSMutableArray`，你这样做：

```
NSMutableArray *someArray = [[NSMutableArray alloc] init]; 
```

`init`正在返回一个`NSMutableArray`对象。但有时，一个`init`方法可能会返回一个父类，就像`NSArray`在这个例子中一样。使用该`id`类型允许返回任何对象。

# c# - 如何在 C# 中重新启动没有管理员权限的 IIS

> ID：13369020
> 
> 赞同：2
> 
> 时间：2012-11-13T21:22:00.770
> 
> 标签：c#, iis, admin-rights

当用户没有管理员权限时，我需要什么代码才能让 C# 应用程序重新启动用户的 IIS？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:27:32.863

我认为仅通过代码是不可能的（如果是，那将是一种利用。）

您需要编写一个以特权用户身份运行的守护程序，它接受来自非特权来源的重新启动命令，例如检查是否存在锁定文件或类似文件，或者通过套接字接受命令，然后相应地重新启动服务器。

这仍然是一个严重的安全风险，但不管你的船是什么。

仔细想想为什么要这样做可能会更好。我想您会发现，任何阻止您将相关用户设置为 IIS 管理员的标准都是用户不应该重新启动 IIS 的绝佳论据。

# postgresql - 用于时间序列的 Postgres hstore

> ID：13369024
> 
> 赞同：6
> 
> 时间：2012-11-13T21:22:16.110
> 
> 标签：postgresql, hstore

我是 postgres 的新手，正在尝试使用 hstore 扩展。寻找一些指导。我需要支持我们销售的各种产品的时间序列数据的基本报告。对于每种产品，我都有大量“时间戳，值”格式的数据。该数据在每个产品的 csv 文件中可用。

我正在考虑使用 hstore 以键值格式存储这些数据。假设单个产品的所有时间序列数据都可以存储在单个 hstore 对象中。我需要能够在特定时间查询这些数据，比如在给定时间产品的价值是多少？还需要运行简单的查询，例如检索产品价格超过 100 美元的时间。我打算有一个包含产品 id 列和 hstore 列的表。但我不太清楚如何使这项工作：

1.  hstore 列需要从 csv 中存在的数千个时间戳、值记录中加载。每当我们获得新的 csv 时，都应该附加 hstore。
2.  该表需要存储 productId 和对应的 Timeseries 数据。您能否告知使用 hstore 是否有帮助？如果是，那么我如何从 csv 加载数据，如上所述。此外，如果随着数据的增长对 hstore 中的插入/更新性能有任何影响，请分享您的经验。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T00:06:44.243

我确实认为您应该首先从一个简单的规范化模式开始，特别是因为您是 PostgreSQL 新手。就像是：

```
CREATE TABLE product_data
(
    product TEXT,  -- I'm making an assumption about the types of your columns
    time TIMESTAMP,
    value DOUBLE PRECISION,

    PRIMARY KEY (product, time);
); 
```

`hstore`如果您的数据变得足够大以至于效率变得更加重要和简单，我肯定会记住类似的选项。但请注意，所有选项都有效率权衡。

你知道你要支持多少数据吗？产品数量，每个产品的不同时间戳数量？

您还想运行哪些其他查询？`(product, value)`如果产品具有许多不同的时间戳，则查询单个产品成本超过 100 美元的时间将从索引中受益。

**其他选项**

`hstore`如果您想将任意键值对的表集存储在一行中，则此方法最有用。您可以在这里使用它，每个产品都有一行，并且该产品的每个不同时间戳都是产品表中的键。缺点是其中的键和值`hstore`是文本，而您的键是时间戳，而您的值是某种数字。所以类型检查会有一定的减少，需要的类型转换成本也会有一定的增加。另一个可能的缺点是`hstore`可能不会非常有效地使用索引。上表可以使用简单的 btree 索引进行范围查询（假设您想提取产品的两个日期之间的值）。但是 hstore 索引的限制要大得多；您可以在 hstore 列上使用 gist 或 gin 索引来查找具有特定键的所有行。

另一个选项（我已经在我的一些数据库中使用并实验性地使用过）是数组。基本上，每个产品都有一个值数组，每个时间戳映射到数组中的一个索引。如果时间戳完全规则，这很容易。例如，如果您的所有产品每天每小时都有一个值，您可以使用如下表格：

```
CREATE TABLE product_data
(
    product TEXT,
    day DATE,
    values DOUBLE PRECISION[], -- An array from 0 to 23.

    PRIMARY KEY (product, day);
); 
```

您可以构造视图和索引以使查询该表变得适度容易。[（我在http://ejrh.wordpress.com/2011/03/20/vector-denormalisation-in-postgresql/](http://ejrh.wordpress.com/2011/03/20/vector-denormalisation-in-postgresql/)上写了一篇关于这项技术的博文。）

但我的建议仍然是：从一个简单的表格开始，然后在您知道自己需要它们时探索提高效率的方法。

# windows-phone-8 - WP8 文件夹访问

> ID：13369027
> 
> 赞同：6
> 
> 时间：2012-11-13T21:22:25.240
> 
> 标签：windows-phone-8

应用程序能否在 Windows phone 8 环境中访问和创建特定文件夹？我正在考虑构建一个有声读物播放器应用程序，并希望允许用户将它们放入手机驱动器本身的有声读物文件夹中，而不是与音乐文件夹混合。应用程序至少可以从其隔离存储之外的特定文件夹中读取吗？

其次，如果是这样，我的应用程序是否可以将Android中的“.nomedia”文件插入文件夹中以排除有声读物文件夹被手机上的音乐播放器扫描？

我正在努力寻找合适的文档来回答我的问题，因为大多数文档似乎都特定于 WP7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:57:38.477

**回复：.nomedia 文件**

总体而言，您所要求的内容不受支持，也不是对 WP8 禅宗的补充。虽然我理解您需要创建独特的音乐体验，但 WP8 媒体生态系统以音乐+视频中心为中心，应用程序应该可以使用它。在 WP8 上创建一种您所描述的体验只会让人感到脱节和不和谐。

**RE：让用户在文件资源管理器中拖放文件**

一些 WP8 手机支持将 Micro-SD 卡添加到手机中。可以从文件资源管理器访问该 uSD 卡，并且[WP8 应用程序可以从中读取文件](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj720573%28v=vs.105%29.aspx)。uSD 卡可以有一个名为“Music”的文件夹，该文件夹将由 Music+Video 应用程序使用，并且对 3rd 方应用程序不可见。但是，您的应用程序可以读取不在这些 uSD 保留文件夹中的任何文件。您可以注册文件扩展名，但大多数媒体[WP8 文件扩展名都是为第一方体验保留的](http://msdn.microsoft.com/en-us/library/windowsphone/develop/jj207065%28v=vs.105%29.aspx#BKMK_Reservedfiletypes)。

**RE：音乐中心集成**

请确保将[您的音乐播放器集成到音乐+视频中心](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769558%28v=vs.105%29.aspx)，否则它可能会被否决。

# mysql - 限制每个月的行数？

> ID：13369028
> 
> 赞同：2
> 
> 时间：2012-11-13T21:22:27.850
> 
> 标签：mysql, sql

我需要获取 Decemember 2012 到 2014 年 11 月之间的数据。

每个月我只需要 1500 行。

例如：

```
SELECT * FROM data WHERE YEAR(submit_date) = 2012 AND MONTH(submit_date) = 12 limit 1500;
SELECT * FROM data WHERE YEAR(submit_date) = 2013 AND MONTH(submit_date) = 1 limit 1500;
SELECT * FROM data WHERE YEAR(submit_date) = 2013 AND MONTH(submit_date) = 2 limit 1500;
SELECT * FROM data WHERE YEAR(submit_date) = 2013 AND MONTH(submit_date) = 3 limit 1500;
and until Nov 2014 
```

有没有办法编写更小的 SQL 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:49:12.007

这里有一些选项列表：[http ://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/](http://www.xaprb.com/blog/2006/12/07/how-to-select-the-firstleastmax-row-per-group-in-sql/)

恕我直言，最好的方法之一是使用行计数器：

```
set @num := 0, @type := '';

select id, name, submit_date,
  @num := if(@type = CONCAT(YEAR(submit_date), MONTH(submit_date)), @num + 1, 1) as row_number,
  @type := CONCAT(YEAR(submit_date), MONTH(submit_date)) as dummy
from data force index(IX_submit_date)
group by id, name, submit_date
having row_number <= 2; 
```

你可以在这里测试它：[http](http://sqlfiddle.com/#!2/e829c/13) ://sqlfiddle.com/#!2/e829c /13（我对 2 个元素进行了剪切，而不是 1500）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:27:26.483

我想你正在寻找一个`GROUP BY`条款。我需要知道更多才能给你一个明确的答案。但以下伪查询可能会引导您朝着正确的方向前进。

```
SELECT *, SUM(some_field) 
FROM data
GROUP BY MONTH(submit_date) 
```

或者如果您只需要 1500 行，请选择按日期排序的前 1500 行

```
SELECT TOP(1500) *
FROM data
WHERE submit_date > '12-01-2012' AND submit_date < '11-01-2014'
ORDER BY MONTH(submit_date) 
```

使用 MySQL，您可以使用`LIMIT`

```
SELECT *
FROM data
WHERE submit_date > '12-01-2012' AND submit_date < '11-01-2014'
ORDER BY MONTH(submit_date)
LIMIT 0,1500; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:48:14.307

您几乎可以像拥有它一样进行操作，只需在查询之间添加一个 UNION 即可。但是您仍然必须每月创建 1 个查询。

否则，您需要枚举返回的行。您需要先订购并枚举您的记录，然后您可以对该选择进行选择以仅获得前 X。不确定是否要包括上个月。

```
SET @prev_date='';
SELECT * FROM (
SELECT IF(@prev_date=submit_date, @incr := @incr+1, @incr:=1) AS row_num, 
data.*, 
(@prev_date := submit_date) AS set_prev_date 
FROM data WHERE submit_date BETWEEN "2012-12-01" AND "2014-11-30" 
ORDER BY submit_date
) tmp WHERE row_num<1500; 
```

# vb.net - 如何联合两个 LINQ 查询（WhereSelectEnumerableIterator）错误

> ID：13369034
> 
> 赞同：0
> 
> 时间：2012-11-13T21:22:58.220
> 
> 标签：vb.net, linq, entity-framework

我正在尝试构建一个 Kendo 条形图。我需要打开的票数和关闭的票数。我需要按月分组的结果。这是我的 LINQ

```
Dim openTickets = (From t In queue _
                   Where _
                   (t.CreateDate.Year = Convert.ToDateTime(DateTime.Now).Year)
                   Group t By _
                   ID = CType(t.CreateDate.Month, Integer), _
                   Month = CType(t.CreateDate.ToString("MMMM"), String) _
                   Into g = Group _
                   Select New With _
                   {.Month = Month.Substring(0, 3), .Opened = g.Where(Function(t) t.CreateDate.Month = ID).Count(Function(t) t.Id)})

Dim closedTickets = (From t In queue _
                   Where _
                   (t.CloseDate.Year = Convert.ToDateTime(DateTime.Now).Year)
                   Group t By _
                   ID = CType(t.CloseDate.Month, Integer), _
                   Month = CType(t.CloseDate.ToString("MMMM"), String) _
                   Into g = Group _
                   Select New With _
                   {.Month = Month.Substring(0, 3), .Closed = g.Where(Function(t) t.CloseDate.Month = ID).Count(Function(t) t.Id)})

Dim ticketCount = openTickets.Union(closedTickets) 
```

当我尝试这个时，我得到“WhereSelectEnumerableIterator”。如果我将第二个查询更改为名称为“.Opened”而不是“.Closed”，则它可以工作，但我不知道“已关闭”的计数。

最终我试图得到一个数组的输出来提供图表......类似于这个：

```
[{"Month":"Apr","Opened":138,"Closed":150}

INSTEAD OF

[{"Month":"Apr","Opened":138,"Closed":0},{"Month":"Apr","Opened":0,"Closed":150} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:36:29.363

您需要使用`Join`语句来合并两者并保持值不同。像这样的东西：

```
Dim tickets = From open In openTickets _
              Join closed In closedTickets _
              On open.Month Equals closed.Month _
              Select New With _
              {.Month = open.Month, .Opened = open.Opened, .Closed = closed.Closed} 
```

# php - 强制用户通过 HTTPS 而不是 HTTP 访问我的页面？

> ID：13369039
> 
> 赞同：1
> 
> 时间：2012-11-13T21:23:11.030
> 
> 标签：php, ssl

跟进此处发布的问题：

[如何强制用户通过 HTTPS 而不是 HTTP 访问我的页面？](https://stackoverflow.com/questions/85816/how-can-i-force-users-to-access-my-page-over-https-instead-of-http)

我已将以下代码添加到一页，即我的 CART 目录的 index.php 页面。

```
if($_SERVER["HTTPS"] != "on")
{
    header("Location: https://" . $_SERVER["HTTP_HOST"] . $_SERVER["REQUEST_URI"]);
    exit();
} 
```

当我从索引页面开始浏览站点时，CART 目录中的所有文件都通过 HTTPS（我真正想要的）加载，但是如果我单击指向 CART 文件夹之外另一个页面的链接，它会返回到 HTTP。

这是如何工作的？对于 CART 目录中的页面，HTTPS 如何保持活动状态？如果我为 CART 目录中的页面键入 URL，则不会强制执行 HTTPS，这是有道理的。

网站网址是[http://wtc.betaforming.com](http://wtc.betaforming.com)

试着把我的大脑包裹起来，谢谢。

布雷特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:26:39.793

我建议将这段代码添加到根目录中的 .htaccess 文件（如果您正在运行 Apache）中。

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteCond %{HTTPS} =off
    RewriteRule ^DIRECTORY1|DIRECTORY2|DIRECTORY3 https://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]

    RewriteCond %{HTTPS} =on
    RewriteCond %{REQUEST_URI} !^/DIRECTORY1|DIRECTORY2|DIRECTORY3
    RewriteRule .* http://%{HTTP_HOST}%{REQUEST_URI} [R=301,L]
</IfModule> 
```

将 DIRECTORY1、DIRECTORY2 等替换为要强制启用 HTTPS 的目录，然后反向执行（下面的代码），如果不是 DIRECTORY1、DIRECTORY2 等，则重定向到 HTTP。

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-29T00:26:05.217

```
<?php 
// Require https
if ($_SERVER['HTTPS'] != "on") {
    $url = "https://". $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];
    header("Location: $url");
    exit;
}
?> 
```

尝试将此添加到您尝试以 HTTPS 访问的文件中，它将强制浏览器以 HTTPS 加载。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T21:43:30.013

*您在问题中*回答了自己的问题：

> 这是如何工作的？对于 CART 目录中的页面，HTTPS 如何保持活动状态？

...当你说：

> 我已将以下代码添加到一页，即我的 CART 目录的 index.php 页面。

看？您正在对购物车目录中的页面执行 HTTPS 要求，而不是在其他地方。这反映了您在网站上看到的内容。如果您想在站点范围内要求 HTTPS，请考虑使用您的网络服务器来强制执行该要求。例如`Apache`，`mod_rewrite`你可以尝试这样的事情：

```
<IFModule mod_rewrite.c>
  RewriteEngine on
  RewriteCond %{HTTPS} off
  RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}
</IFModule> 
```

**编辑**

在您帖子的评论中，您说“我试图了解从 index.php 页面浏览到 CART 目录中的其他页面时如何/为什么强制执行 HTTPS”。我的猜测（这是一个猜测，因为您没有向我们展示您的代码）是这些 URL 是以与 ssl 无关的方式构建的，如下所示：

```
<a href="/cart/some_page.html">I'm SSL-enabled on a page with HTTPS in the address bar</a> 
```

不过，再一次，如果没有看到您的代码，就不可能说。

干杯

# image - 如何使用 HtmlUnit 检测未附加到页面的预加载图像？

> ID：13369041
> 
> 赞同：2
> 
> 时间：2012-11-13T21:23:26.197
> 
> 标签：image, htmlunit

我正在使用 HtmlUnit 加载一些页面内容，并且我希望能够捕获以以下方式创建的图像的 URL：

```
<script type="text/javascript">
    var img = new Image();
    img.src = 'slider.png';
</script> 
```

这里的关键问题是图像从未附加到文档中，所以我无法通过迭代“img”标签来找到它。此外，HtmlUnit 实际上并没有为图像生成 Web 请求（因为它不应该），所以我无法通过覆盖 WebConnection 并拦截请求来获取它。

在普通浏览器中，设置 src 属性时会预加载图像。如果通常会加载图像，我希望能够告诉它会发生。

我的限制是我不控制内容，所以我不能只是以不同的方式加载图像。内容来自第 3 方，我正在对其进行验证并记录异常情况。我不想通过其他工具收集这些信息，因为 HtmlUnit 已经为我完成了许多其他任务。

# ios - 获取 webb 应用到应用商店

> ID：13369042
> 
> 赞同：1
> 
> 时间：2012-11-13T21:23:32.180
> 
> 标签：ios, xcode

> **可能重复：**
> [Apple 是否拒绝“移动 web shell”应用程序？](https://stackoverflow.com/questions/5478848/does-apple-reject-mobile-web-shell-applications)

我想知道是否有可能制作一个移动网页，而不是在 xcode 中制作一个 IOS 应用程序，只需一个全屏浏览器视图加载移动网页。

我听到有人说苹果不允许包含网页的应用程序，这是真的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:25:07.023

是的，这是真的。[http://developer.apple.com/appstore/resources/approval/guidelines.html](http://developer.apple.com/appstore/resources/approval/guidelines.html)

> 2.12 不是很有用的应用程序，**只是作为应用程序捆绑在一起的网站**，或者不提供任何持久的娱乐价值的应用程序可能会被拒绝

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:25:04.550

是的，您的申请很可能会因此被拒绝。

我建议您获取现有文件并使用[http://phonegap.com/ 之](http://phonegap.com/)类的文件，然后将您的 Web 应用程序部署到多个商店。这是有效的，因为您的资产已融入应用程序。

# mysql - 我应该如何构建我的数据库以停止拥有这么多表？

> ID：13369050
> 
> 赞同：2
> 
> 时间：2012-11-13T21:24:13.950
> 
> 标签：mysql, database-design, relational-database

好的，所以我正在开发一个网站，该网站将允许用户使用提供的一组练习列表来构建例程。他们可以将许多练习添加到他们将自己创建和命名的例程中。

所以我想我应该有一个用户表。每个用户将有许多例程。每个例程都会有一些练习。

因此，我将有 3 个表：用户、例程和练习

但

我如何将“例程”和“练习”联系起来，因为“例程”必须不止一张表，因为如果您想象用户创建“二头肌”例程并用练习填充它。然后他创建“三头肌”并用练习填充它。然后，他将必须有两个常规表，称为“二头肌”和“三头肌”。

那么如何构建我的数据库以适应这种情况呢？

记住每个用户都有一个唯一的 ID 每个练习都有一个唯一的 ID，每个例程都有一个唯一的 ID。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:30:15.150

你不想有两张`routines`桌子。
您需要**一个** `routines`表，以及一个`exercises`引用该表的`routines`表。

取决于一个例程是否对所有用户都相同，或者每个用户是否可以拥有自己版本的“二头肌”例程，也许您需要多一张桌子。
看看下面的例子！

* * *

**示例 1（每个用户都可以有自己的“二头肌”例程）：**

用户表：

```
UserId  Name
----------------
1       Joe
2       Bill 
```

例程表：

```
RoutineId   Name     UserId
-------------------------------
1           biceps   1
2           biceps   2 
```

练习表：

```
ExerciseId    RoutineId  Name
--------------------------------------------------------
1             1          first exercise of routine 1
2             1          second exercise of routine 1
3             2          first exercise of routine 2
4             2          second exercise of routine 2 
```

* * *

**示例 2（只有一个“二头肌”例程，对所有用户都一样）：**

用户表：

```
UserId  Name
----------------
1       Joe
2       Bill 
```

例程表：

```
RoutineId   Name  
------------------
1           biceps 
```

用户 <--> 例程链接表：

```
UserId   RoutineId
--------------------
1        1
2        1 
```

练习表：

```
ExerciseId    RoutineId  Name
--------------------------------------------------------
1             1          first exercise of routine 1
2             1          second exercise of routine 1 
```

* * *

**编辑：**

你说：

> 是的，例程对每个用户都是私有的，因为他们创建了它们。它们不共享

和：

> 每个练习应该能够使用不止一次。即我可能在我的“背部锻炼”程序和我的“手臂锻炼”程序中进行“引体向上”运动

**最终解决方案：**

用户表：

```
UserId  Name
----------------
1       Joe
2       Bill 
```

例程表：

```
RoutineId   Name                    UserId
-----------------------------------------------------
1           Joe's back workout      1
2           Joe's arm workout       1
3           Bills's back workout    2 
```

“全局”练习表：

```
ExerciseId    Name
--------------------------------------------------------
1             pull up
2             whatever 
```

例程 <--> 练习链接表：

```
RoutineId  ExerciseId
----------------------------------
1          2
2          1
3          1 
```

这样，“引体向上”锻炼出现在 Joe 的手臂锻炼（例程 2）和 Bills 的背部锻炼（例程 3）中，但不在 Joe 的背部锻炼（例程 1）中。
“随便”例行程序仅在 Joe 的背部锻炼（例行程序 1）中。

这是你想要的吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:31:06.070

```
create table users(
userid int not null AUTO_INCREMENT PRIMARY KEY,
firstname char(30) not null,
lastname char(30) not null
);

create table routines(
rid int not null AUTO_INCREMENT PRIMARY KEY,
userid int not null,
rname char(30) not null
);

create table execises(
eid int not null AUTO_INCREMENT PRIMARY KEY,
rid int not null,
ename char(30) not null
); 
```

# python - 为什么“aClass.aProperty”不可调用？

> ID：13369051
> 
> 赞同：15
> 
> 时间：2012-11-13T21:24:15.803
> 
> 标签：python

```
class A:
  @property
  def p(self): return 2

  def q(self): return 2

a = A()
A.p(a) #>> TypeError: 'property' object is not callable

A.q(a) #>> no error, returns 2 
```

为什么是这样？我明白如果我引用*实例*上的属性：ap 只会返回方法返回值，但我试图从类上的属性开始。我预计上面没有错误，两者都评估为 2。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-13T21:28:13.743

你正在深入探索的世界[`descriptors`](http://docs.python.org/2/howto/descriptor.html)。 `A.p`是 a`property`并且属性是*描述符*。它是一个具有魔术方法（...）的类，`__get__`当在*实例*`__set__`上访问描述符时会调用这些方法。访问的特定方法当然取决于它的访问方式。访问*类*上的描述符只会返回描述符本身，并且不会执行任何魔法——在这种情况下，描述符是不可调用的，因此您会收到错误。**`property`**

 **注意如果你打电话会发生什么`__get__`：

```
class A(object):
    @property
    def p(self):  
        return 2

a = A()
print (A.p.__get__(a)) #2 
```

`foo = A.p.__get__(a)`当你这样做时，实际上会发生什么`foo = a.p`。我觉得还挺好看的...

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T21:28:34.030

因为属性不可调用：

```
In [3]: class A(object):
   ...:   @property
   ...:   def p(self): return 2
   ...:

In [4]: A.p
Out[4]: <property at 0x2d919a8>

In [5]: dir(A.p)
Out[5]:
['__class__',
 '__delattr__',
 '__delete__',
 '__doc__',
 '__format__',
 '__get__',
 '__getattribute__',
 '__hash__',
 '__init__',
 '__new__',
 '__reduce__',
 '__reduce_ex__',
 '__repr__',
 '__set__',
 '__setattr__',
 '__sizeof__',
 '__str__',
 '__subclasshook__',
 'deleter',
 'fdel',
 'fget',
 'fset',
 'getter',
 'setter'] 
```

注意缺少`__call__`方法。这是因为属性可以包含多个函数。

如果您尝试将属性作为实例上的方法调用，则会发生以下情况：

```
In [6]: a = A()

In [7]: a.p()
---------------------------------------------------------------------------
TypeError                                 Traceback (most recent call last)
C:\Users\Marcin\<ipython-input-7-16c8de382321> in <module>()
----> 1 a.p()

TypeError: 'int' object is not callable 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T21:27:32.443

属性装饰器将您的方法变成一个属性，它不再是一个函数对象，而是一个`property`，因此不可调用**

# jquery - 动态更改按钮的背景颜色 Jquery Mobile

> ID：13369053
> 
> 赞同：0
> 
> 时间：2012-11-13T21:24:18.037
> 
> 标签：jquery, jquery-mobile

我创造了一种风格

```
.someRedStuff
{
 background:red !important;
} 
```

单击按钮时，我想将星形图标的颜色更改为红色

```
 <a data-role="button" data-iconpos= "notext" data-icon="star" id="custom-li-3" onclick="changeColor()"></a> 
```

我尝试了这段代码，但它似乎没有起到作用..

```
 function changeColor()
        {          
            $('#custom - li - 3').removeClass('ui-icon-star').addClass('someRedStuff');
        } 
```

如何更改点击时星形图标的颜色？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:26:29.090

您的元素选择器有空格。删除选择器中的空格以匹配为元素声明的 id。

```
$('#custom-li-3').removeClass('ui-icon-star').addClass('someRedStuff'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:21:13.753

这是否有效：

*   [http://jsfiddle.net/3cA8K/](http://jsfiddle.net/3cA8K/)

JS

```
$('#custom-li-3').on('click', function(event){
    $(this).toggleClass('someRedStuff');
}); 
```

HTML

```
<div data-role="page" class="type-home">

   <div data-role="content">
      <a data-role="button" data-iconpos= "notext" data-icon="star" id="custom-li-3"></a>
   </div>
</div>​ 
```

CSS

```
.someRedStuff
{
 background:red !important;
} 
```

# ruby-on-rails - Active Record 中的表和子表关系

> ID：13369054
> 
> 赞同：0
> 
> 时间：2012-11-13T21:24:21.870
> 
> 标签：ruby-on-rails, activerecord, sqlite

我有一个所有用户表，用户可以是管理员、协调员或成员类型。我需要另一个表管理员，它需要查看所有用户表并检查哪些用户 admin==true。如果是真的，它在 admin 表中，其他字段对管理员来说是唯一的。我将如何使用 Active Record 来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T15:53:26.593

不知道为什么你需要另一张桌子。您可以通过以下方式轻松获取所有管理员用户：

管理员 = User.where(:admin => true)

这会给你一个 ActiveRecord::Relation 应该足够了，而不是实际上另一个表。

# sql-server - 查询匹配列最多的记录，其中列数和列名未知？

> ID：13369059
> 
> 赞同：1
> 
> 时间：2012-11-13T21:24:32.937
> 
> 标签：sql-server, sql-server-2008-r2

我有两个表 X 和 Y，它们的架构相同但记录不同。给定来自 X 的记录，我需要一个查询来查找 Y 中最接近的匹配记录，其中包含非匹配列的 NULL 值。标识列应从比较中排除。例如，如果我的记录如下所示：

```
------------------------
id | col1 | col2 | col3
------------------------
0  |'abc' |'def' | 'ghi' 
```

表 Y 看起来像这样：

```
------------------------
id | col1 | col2 | col3
------------------------
6  |'abc' |'def' | 'zzz'
8  | NULL |'def' | NULL 
```

那么最接近的匹配将是记录 8，因为列不匹配的地方有 NULL 值。6 本来是最接近的比赛，但“zzz”取消了比赛资格。

这个问题的独特之处在于除了 id 列和数据类型之外，表的模式是未知的。可能有 4 列，也可能有 7 列。我们只是不知道——它是动态的。我们所知道的是会有一个“id”列，并且这些列将是字符串，varchar 或 nvarchar。

给定来自 X 的记录，在这种情况下，从 Y 中挑选最接近匹配记录的最佳查询是什么？我实际上正在编写一个函数。输入是一个整数（X 中记录的 id），输出是整数（Y 中记录的 id，或 NULL）。我是 SQL 新手，所以简要解释一下您的解决方案中发生的事情会对我有很大帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:42:34.947

> 可能有 4 列，或者可能有 7 列....我实际上正在编写一个函数。

这是一项不可能完成的任务。因为函数是确定性的，所以你不能使用动态 SQL 来处理任意表结构的函数。一个存储过程，当然，但不是一个函数。

但是，下面向您展示了一种使用 FOR XML 和一些 XML 分解的方法，以将行反透视为列名和值，然后可以进行比较。此处使用的技术和查询可以合并到存储过程中。

**MS SQL Server 2008 架构设置**：

```
-- this is the data table to match against
create table t1 (
    id int,
    col1 varchar(10),
    col2 varchar(20),
    col3 nvarchar(40));
insert t1
select 6, 'abc', 'def', 'zzz' union all
select 8, null , 'def', null;

-- this is the data with the row you want to match
create table t2 (
    id int,
    col1 varchar(10),
    col2 varchar(20),
    col3 nvarchar(40));
insert t2
select 0, 'abc', 'def', 'ghi';
GO 
```

**查询 1**：

```
;with unpivoted1 as (
    select n.n.value('local-name(.)','nvarchar(max)') colname,
           n.n.value('.','nvarchar(max)') value
    from (select (select * from t2 where id=0 for xml path(''), type)) x(xml)
    cross apply x.xml.nodes('//*[local-name()!="id"]') n(n)
), unpivoted2 as (
    select x.id,
           n.n.value('local-name(.)','nvarchar(max)') colname,
           n.n.value('.','nvarchar(max)') value
    from (select id,(select * from t1 where id=outr.id for xml path(''), type) from t1 outr) x(id,xml)
    cross apply x.xml.nodes('//*[local-name()!="id"]') n(n)
)
select TOP(1) WITH TIES
       B.id,
       sum(case when A.value=B.value then 1 else 0 end) matches
from unpivoted1 A
join unpivoted2 B on A.colname = B.colname
group by B.id
having max(case when A.value <> B.value then 1 end) is null
ORDER BY matches; 
```

**[结果](http://sqlfiddle.com/#!3/0f866/1/0)**：

```
| ID | MATCHES |
----------------
|  8 |       1 | 
```

# javascript - jquery on 对 clone() 添加的元素没有反应

> ID：13369061
> 
> 赞同：0
> 
> 时间：2012-11-13T21:24:39.810
> 
> 标签：javascript, jquery

我的印象是jquery`on()`对动态添加到dom的事件附加元素（通过ajax或克隆等）做出反应。但是，以下仅适用于页面加载时附加到 dom 的元素。我使用它制作的另一个副本`clone()`没有很好地处理。

```
$(document).ready(function () {
    $('.ship_via_dropdown').on('change', function () {
        console.log($(this));
        if ($(this).hasClass('prev_change')) {
            console.log('has');
        } else {
            $(this).addClass('prev_change');
            console.log('hasn\'t');
        }
    });
}); 
```

克隆代码：

```
$(document).ready(function(){
    var form1 = $('.line_item_wrapper').children().clone(); 
    $('#new_line_content_1').html(form1);
}); 
```

用于下拉列表的 HTML（由 jquery db 查询在文档就绪时添加的内容）

```
<span class="select ship_via_select_container">
    <select class="ship_via_dropdown ship_via_dropdown_1">
    </select>
</span> 
```

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T21:26:20.107

要么委托事件：

```
$(document).on('change', '.ship_via_dropdown', function () {
    console.log($(this));
    if ($(this).hasClass('prev_change')) {
        console.log('has');
    } else {
        $(this).addClass('prev_change');
        console.log('hasn\'t');
    }
}); 
```

或者更好的是，用于[`.clone(true)`](http://api.jquery.com/clone/)克隆事件。（注意：这仅在附加事件处理程序后进行克隆时才有效。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T21:29:56.803

确实如此，但不是你想的那样。当您使用它时：

```
$('.ship_via_dropdown').on('change', 
```

它与使用`.change()`. 您正在寻找的是[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)。这采用以下形式：

```
$("<selector to static ancestor>").on('change', '.ship_via_dropdown', function () { 
```

`<selector to static ancestor>`动态添加元素的静态祖先的选择器在哪里。（一个不是动态创建的）作为最后的手段`document`可以在这里使用。但是为了性能，这应该是最接近的静态祖先元素。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T21:27:38.947

> jquery`on()`对动态添加的事件附加元素的反应

没有 - 或者至少，只有当你[将它与委托事件一起使用时](http://api.jquery.com/on/#direct-and-delegated-events)。该[`live`方法](http://api.jquery.com/live/)确实总是将事件委托给`document`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T21:26:28.923

更改此行：

```
$('.ship_via_dropdown').on('change', function () { 
```

对此：

```
$(document).on('change',".ship_via_dropdown", function () { 
```

# java - 在两个恭维中理解十六进制数到十进制 - Java

> ID：13369065
> 
> 赞同：1
> 
> 时间：2012-11-13T21:25:02.370
> 
> 标签：java, hex, type-conversion, byte, twos-complement

我试图在这里理解[这个](https://stackoverflow.com/a/4120818/668650)答案。

这些`0xf2`和`0xfffffff2`值如何表示`-14`？你能详细说明一下转换过程吗？

不过，我知道什么是二的补码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:30:28.147

```
0xf2 = 11110010 
```

第**一位是符号位**。所以符号是负号。要获得实际价值，请接受 2 的恭维。

```
11110010 -> 1's complement -> 00001101 -> Add 1 -> 00001110 = -14 
```

同样，取`0xfffff...f2`. **开头的符号位。**取 2 的补码。

```
1111-1111-1111.....0010 -> 1's complement -> 00000000000...1101 -> Add 1 -> 0000...1110 -> -14 
```

* * *

前面的任何数量`1111...` **都不会对**带负号的数字的值产生影响，就像`0000..`对正值一样。

* * *

上面的计算是针对`8-bit signed 0xf2`数学**上相等**的。`32-bit signed 0xfffffff2`

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:33:17.683

在二进制数中，当使用二进制补码时，负值的最高有效位设置为 1。它是哪一位，这取决于它是多少位数。

`0xf2`解释为 8 位有符号值是 -14，而`0xfffffff2`解释为 32 位有符号值是相同的 -14。

32 位`0x000000f2`是 242，与*无符号*8 位相同`0xf2`（注意：Java 没有任何无符号整数类型）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T02:24:16.057

> 这些 0xf2 和 0xfffffff2 值如何表示 -14？

他们没有。

```
int a = 0xf2;
int b = 0xfffffff2; 
```

是不同的值。它们代表相同数字的唯一情况是：

```
byte a = (byte)0xf2;
byte b = 0xfffffff2; 
```

这是因为在整数上下文中*使用*字节时的符号扩展。注意

```
byte a = 0xf2; 
```

doesn't even compile, so it's hard to see what your question is really about.**

# opencv - findHomography() / 3x3 矩阵 - 如何从中获得旋转部分？

> ID：13369069
> 
> 赞同：3
> 
> 时间：2012-11-13T21:25:08.067
> 
> 标签：opencv, matrix, rotation, translation, vector-graphics

作为调用 findHomography() 的结果，我得到了一个 3x3 矩阵 mtx[3][3]。该矩阵包含 mtx[0][2] 和 mtx[1][2] 中的翻译部分。但是我怎样才能从这个 3x3 矩阵中得到旋转部分呢？

不幸的是，我的目标系统使用完全不同的计算，所以我不能直接重用 3x3 矩阵并且必须从中提取旋转，这就是我问这个问题的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:34:17.530

一般来说，您不能将最终的变换矩阵分解为其组成部分。在某些特定情况下，这是可能的。例如，如果操作之前的唯一操作是平移，那么您可以执行 arccos(m[0][0]) 来获取旋转的 theta 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-28T09:40:57.183

同时为我自己找到了它：有一个 OpenCV 函数 RQDecomp3x3() 可用于从矩阵中提取部分变换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T09:26:36.200

RQDecomp3x3 在除 Z 之外的其他轴上返回旋转时存在问题，因此通过这种方式，您只需在 z 轴上正确找到自旋，如果您找到投影矩阵并将其传递给“decomposeProjectionMatrix”，您会发现更好的结果，投影矩阵不同于单应矩阵你应该注意这一点。

# android - 我如何在android中随机更改按钮的位置（屏幕内）？

> ID：13369082
> 
> 赞同：1
> 
> 时间：2012-11-13T21:25:53.460
> 
> 标签：android, button, onclick, location, onchange

> **可能重复：**
> [如何通过单击按钮在 android 中随机更改按钮的位置](https://stackoverflow.com/questions/13336547/how-i-can-change-postion-of-the-button-randomly-in-android-by-clicking-the-butto)

这是我的代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_tuch_me);
    btn = (Button) findViewById(R.id.bttuch);
    timer = (TextView) findViewById(R.id.tvtimer);
    timeout = (TextView) findViewById(R.id.tvtimeout);
    level = (TextView) findViewById(R.id.tvlevel);
    tv =(TextView) findViewById(R.id.textView1);
    btn.setOnClickListener(this);
    buttonWidth = 1;
    buttonHight = 1;

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_tuch_me, menu);
    return true;
}

@SuppressLint({ "NewApi", "NewApi" })
@TargetApi(11)
public void onClick(View v) {
    // TODO Auto-generated method stub
    switch (v.getId()) {
    case R.id.bttuch:

        Random r = new Random();

        int xx=getResources().getDisplayMetrics().widthPixels;
        int yy=getResources().getDisplayMetrics().heightPixels;

        int x = r.nextInt(xx);
        int y = r.nextInt(yy);

        buttonWidth = btn.getWidth();
        buttonHight = btn.getHeight();

        btn.setX(xx-buttonWidth);
        btn.setY(yy-buttonHight);

        break;
    }

}
} 
```

当我单击按钮时，它会超出屏幕！我什至将实际分辨率设置为 xx 和 yy，但它仍然不起作用。我怎样才能限制它留在屏幕内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:32:19.717

你正在使用这条线

```
 btn.setX(xx-buttonWidth);
    btn.setY(yy-buttonHight); 
```

当我认为你想这样做时

```
 btn.setX(x-buttonWidth);
    btn.setY(y-buttonHight); 
```

因为您的变量`xx`and`yy`不是随机的，但是您将`x`and `y`ints 设置为根据`xx`and的值创建的随机 int`yy`

按钮离开屏幕的原因是因为你总是把它放在角落里，给你的按钮 x 和 y 坐标，它们是屏幕的全长。

希望这是有道理的

# java - 在 Scala 中将日期转换为时间戳

> ID：13369083
> 
> 赞同：11
> 
> 时间：2012-11-13T21:26:02.290
> 
> 标签：java, scala, date, timestamp

在 Scala 中，我将日期转换为时间戳。我目前正在这样做：

```
val date = new java.util.Date()
new java.sql.Timestamp(new org.joda.time.DateTime(date).getMillis) 
```

有没有更巧妙的方法来做到这一点？基于 Java 的响应也将是相关的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T21:30:28.753

为什么不像 using 这么简单[`Date.getTime()`](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html#getTime())？

```
new java.sql.Timestamp(date.getTime) 
```

你不需要乔达时间来做这件事。Scala 在这里并不重要，除非您需要隐式转换：

```
//import once, use everywhere
implicit def date2timestamp(date: java.util.Date) = 
    new java.sql.Timestamp(date.getTime)

val date = new java.util.Date

//conversion happens implicitly
val timestamp: java.sql.Timestamp = date 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-13T21:36:00.317

如果你甚至不想构造一个 Date 对象，你可以简单地使用这个：

```
new java.sql.Timestamp(System.currentTimeMillis()) 
```

我认为这会比使用新的 Date() 更有效。但是，如果您已经有一个日期对象，那么您想从中获取日期将对您有用。

```
new java.sql.Timestamp(data.getTime()) 
```

# jquery - Twitter Bootstrap - 打印所有标签

> ID：13369084
> 
> 赞同：0
> 
> 时间：2012-11-13T21:26:09.080
> 
> 标签：jquery, twitter-bootstrap, tabs

我正在尝试遍历 Twitter Bootstrap 页面上的每个选项卡，并在单击按钮时打印该选项卡的内容。换句话说，如果有 5 个选项卡，它会遍历所有选项卡并将每一页发送到打印机。选项卡是在页面加载时动态创建的。

现在我有：

```
$("#idBtnPrint").click(function() {
        $("#idUlTab").each(function() {
            if (window.print) {
            $(this).window.print();
            return false;
            }
        });
    }); 
```

但这对我不起作用。我的查询能力不是特别强（可能很明显） - 任何人都可以提供任何建议吗？我在任何地方都看不到任何可比较的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:38:34.777

这是一个快速的小 jQuery 插件，可以满足您的需求。要使用它，只需`$('#id').print()`在循环中执行。如果您还想打印元素所在的容器，请使用`$('#id').print({container: true});`

```
;(function($) {
    $.fn.print = function(opts) {
        return this.each(function() {
            var options = $.extend({}, $.print.defaults, opts), 
                print_frame = $('<iframe id="print_content' + $.print.frame_num + '" scrolling="no" frameborder="0" name="print_frame" border="0"></iframe>'), 
                frame_doc, 
                frame_head, 
                frame_body, 
                html_base = '<!DOCTYPE html><html><head></head><body></body></html>';
            if(options.preview === true) {
                /* Create print modal and overlay */
                var overlay = $('<div id="print_overlay"></div>'), 
                    print_window = $('<div id="print_window"></div>'), 
                    print_controls = $('<div id="print_controls"><a class="print" title="Print">Print</a><a class="cancel" title="Cancel">Cancel</a></div>'), 
                    css = {
                        zIndex: options.zIndex, 
                        top: '0px'
                    };
                overlay.css({
                    width: document.documentElement.clientWidth + 'px', 
                    height: document.documentElement.clientHeight + 'px', 
                    zIndex: options.zIndex - 1
                }).appendTo('body');
                print_controls.find('a').click(function(e) {
                    e.preventDefault();
                    if($(this).hasClass('print')) {
                        print_frame[0].contentWindow.focus();
                        print_frame[0].contentWindow.print();
                    }
                    else {
                        $.print.destroy();
                    }
                });
                print_window
                    .append(print_controls)
                    .append(print_frame)
                    .css(css)
                    .appendTo('body');
                $(window).bind('resize.print', function(e) {
                    overlay.css({
                        width: document.documentElement.clientWidth + 'px', 
                        height: document.documentElement.clientHeight + 'px'
                    });
                }).bind('scroll.print', function(e) {
                    overlay.css({
                        top: document.documentElement.scrollTop + 'px', 
                        left: document.documentElement.scrollLeft + 'px'
                    });
                });
            }
            else {
                print_frame.appendTo('body');
            }

            frame_doc = $('#print_content' + $.print.frame_num)[0].contentWindow.document;
            frame_doc.open();
            frame_doc.write(html_base);
            frame_doc.close();

            /* Append the correct headers to the iframe */
            frame_head = $('head link[media="print"], head link[media="all"]').clone().each(function() {
                $(this).attr('media', 'all'); //In case a preview is being shown, show everything
            });
            if(options.container === true) {
                frame_body = $(this).clone().show();
            }
            else {
                frame_body = $(this).children().clone();
            }

            /* Append the body to the iframe */
            $(frame_doc)
                .find('head')
                    .append(frame_head)
                    .end()
                .find('body')
                    .append(frame_body)
                    .find('a').click(function(e){
                        e.preventDefault();
                        return false;
                    });
            $.print.frame_num++;
            if(options.preview === false) {
                print_frame.css({width: '0px', height: '0px'});
                print_frame[0].contentWindow.focus();
                print_frame[0].contentWindow.print();
            }
            return this;
        });
    };
    $.print = {
        frame_num: 0, 
        defaults: {
            preview: false, 
            container: false, 
            zIndex: 5000
        }, 
        destroy: function() {
            if($('#print_window').length > 0) {
                $('#print_window').remove();
                $('#print_overlay').remove();
                $(window).unbind('resize.print').unbind('scroll.print');
            }
        }
    };
})(jQuery); 
```

相应的 CSS 将是（不要忘记更改打印和取消图标的图像路径）：

```
#print_overlay {
    background-color: rgb(176, 176, 176);
    opacity: 0.85;
    position: absolute;
    top: 0px;
    left: 0px;
}

#print_window {
    background: white;
    position: absolute;
    left: 50%;
    margin: 10px 0px 0px -465px; /* Re-center the preview */
    padding: 0px 75px;
    width: 794px;
    height: 100%;
    box-shadow: 0px 0px 20px black;
    -moz-box-shadow: 0px 0px 20px black;
    -webkit-box-shadow: 0px 0px 10px black;
}

#print_content {
    margin: 75px 0px;
    border: 0px;
    overflow: hidden;
    width: 100%;
    height: 100%;
}

#print_controls {
    position: fixed;
    top: 37px;
    left: 50%;
    border: 1px solid black;
    border-radius: 8px;
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    margin: 0px 0px 0px -81px;
    padding: 5px 0;
    opacity: 0.75;
}

#print_controls a {
    color: white;
    display: block;
    float: left;
    height: 24px;
    text-decoration: none;
    text-indent: -999em;
    width: 50px;
}

#print_controls a:hover {
    opacity: 0.75;
}

#print_controls a.print {
    background: url(print.png) no-repeat 50% 50%;
}
#print_controls a.cancel {
    background: url(cancel.png) no-repeat 50% 50%;
} 
```

**更新**

这是一个例子：

HTML

```
<div class="print">
Print
</div>
<div class="print">
Print 2
</div> 
```

Javascript

```
$(document).ready(function() {
    $('.print').print({container: true, preview: false});
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-20T11:56:47.740

Kyle 的回答是对您的特定问题的一个很好的回答 - 即单独打印每个标签。

但是，如果我可能假设您想要这样做，因为打印页面本身只会打印活动选项卡 - 那么我可能有一个答案，允许您将每个选项卡打印为整个页面的一部分。

诀窍在于 CSS。用这个：

```
 @media print {
      .nav-tabs { display: none !important; }
      .tab-content > .tab-pane { display: block !important; }
      .tab-content > .fade { opacity: 1; }
    } 
```

有关完整示例，请参阅此[JSFiddle](https://jsfiddle.net/5hue8q3d/2/)。

# linux - 用户空间中的linux高分辨率计时器

> ID：13369087
> 
> 赞同：2
> 
> 时间：2012-11-13T21:26:20.430
> 
> 标签：linux, linux-kernel, posix

我的进程中需要一个线程每 5 毫秒（精确）唤醒一次并做一些工作。
我使用过 posix 计时器，它们似乎准确率为 90%，当 cpu 有点负载时，准确度会进一步降低。
我相信这是因为 posix 计时器必须在每次到期时分叉新线程。
是否有其他可靠的方法可以在 linux 中实现高分辨率计时器，并且增加线程的优先级会有所帮助吗？
我在 CentOS 5.6 上。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T01:01:40.493

POSIX 计时器（使用 创建`timer_create()`）已经是高分辨率的。您的问题在于交付方式 - 如果您想要非常精确的时间，那么`SIGEV_THREAD`这不是一个好主意。

您可以改为使用`SIGEV_SIGNAL`以便通过信号通知计时器到期，然后使用`sigwaitinfo()`等待它到期。或者，您可以使用 timerfd 而不是 POSIX 计时器（使用 创建`timerfd_create()`）。

此外，如果您希望您的线程在计时器到期时抢占其他正在运行的线程，则需要为其提供实时调度策略（`SCHED_FIFO`或`SCHED_RR`）`sched_setscheduler()`。

您还需要确保使用该`CONFIG_PREEMPT`选项编译您的内核，该选项允许大多数内核代码是可抢占的。仍然会有一定程度的抖动，这是由硬件中断和软中断等不可抢占的内核工作引起的。为了进一步减少这种情况，您可以尝试使用[`CONFIG_PREEMPT_RT`内核补丁集](https://rt.wiki.kernel.org/index.php/CONFIG_PREEMPT_RT_Patch)。

# iphone - iOS：尝试自定义导航栏时出错

> ID：13369093
> 
> 赞同：1
> 
> 时间：2012-11-13T21:26:40.837
> 
> 标签：iphone, ios, uinavigationbar, uinavigationitem, autolayout

我正在尝试自定义导航栏的标题视图并收到错误消息。以下是相关代码：

```
UIView *topView = [[UIView alloc] init];
    topView.translatesAutoresizingMaskIntoConstraints=NO;

     self.navigationItem.titleView=topView;

    UIImage *image = [UIImage imageNamed: @"logojim_35.png"];

    UIImageView *imageView = [[UIImageView alloc] initWithImage: image];
    imageView.translatesAutoresizingMaskIntoConstraints=NO;
    [topView addSubview:imageView];

    UILabel *titleLabel = [[UILabel alloc] init];
    titleLabel.translatesAutoresizingMaskIntoConstraints=NO;
    titleLabel.text=@"ACPL Mobile";

    [topView addSubview:titleLabel];

    NSDictionary *views = NSDictionaryOfVariableBindings(topView,imageView,titleLabel);

    [topView addConstraints:[NSLayoutConstraint constraintsWithVisualFormat:@"H:|[imageView]-[titleLabel]|" options:nil metrics:nil views:views]]; 
```

这是我得到的错误：

```
2012-11-13 16:23:51.635 Mobile_ACPL[22177:12b03] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Auto Layout still required after executing -layoutSubviews. UINavigationBar's implementation of -layoutSubviews needs to call super.' 
```

知道问题是什么吗？

是的，我的项目需要自动布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T18:48:18.467

看看这个问题：[Build a titleView programmatically with constraints（或通常用约束构造视图）](https://stackoverflow.com/questions/15285698/building-a-titleview-programmatically-with-constraints-or-generally-constructin)

如果您不将其设置为框架，则标题视图不知道 x 和 y 与其父级相关。

# trigger.io - 可以从 forge.request.ajax 错误回调中访问标头和响应文本吗？

> ID：13369096
> 
> 赞同：4
> 
> 时间：2012-11-13T21:26:47.463
> 
> 标签：trigger.io, digest-authentication

我正在尝试设置一个使用 HTTP Digest Authentication 的 trigger.io 项目。到目前为止，我只在 Android 模拟器中进行了测试。

我有一个使用 jQuery 作为基础的独立 JavaScript 版本。在 jQuery 版本中，通过在自定义“WWW-Authenticate-JS”标头中发送“401 Not Authorized”标头以及随机数等来触发摘要身份验证。使用自定义标头而不是“WWW-Authenticate”可以防止浏览器触发它自己的身份验证表单。然而，forge.request.ajax 中的错误回调似乎无法访问这些数据。当我输出响应时，服务器发送的任何数据都不存在，除了标头是 401。

是否可以从错误回调中访问返回的标头和正文？如果是这样，我需要做什么才能访问这些数据？

我也尝试过对 trigger.io 调用使用标准的 Digest Authentication 标头，但这会导致 io.trigger.forge.android.modules.request.API 中的 NULL 指针错误，特别是在 getPasswordAuthentication 方法中。是否可以将 forge.request.ajax 配置为在返回标准标头时自动使用摘要身份验证？

# asp.net - ASP.NET Oracle SQL 查询未正确结束？

> ID：13369099
> 
> 赞同：1
> 
> 时间：2012-11-13T21:27:22.783
> 
> 标签：asp.net, sql, oracle

我是 ASP.NET 和 Oracle SQL 的新手。我正在尝试创建一个长 SQL 字符串（使用`UNION ALL`），然后将该字符串传递给处理其余部分的数据处理程序类。这个问题肯定存在于我的 SQL 字符串中。

这是我的代码的第一部分，它运行完美：

```
sql = "SELECT 'DCS - HCA (81)', HCA_SENT_DCS, HCA_VALID_DCS, HCA_SUSPEND_DCS, HCA_REJECTED_DCS,"
sql &= " SUM(HCA_VALID_DCS + HCA_SUSPEND_DCS + HCA_REJECTED_DCS) As ""Total Returned"","
sql &= " RESOLVED_CNT, SUM(HCA_REJECTED_DCS - RESOLVED_CNT) As ""To Do"""
sql &= " FROM HUB_CDI_CONTROL_NBRS WHERE REPORT_DATE = :0 "
_param.Add(dateSelected.ToString("dd-MMM-yyyy"))
sql &= " GROUP BY HCA_SENT_DCS, HCA_VALID_DCS, HCA_SUSPEND_DCS, HCA_REJECTED_DCS,"
sql &= " RESOLVED_CNT" 
```

但是，当我尝试`UNION`使用另一条语句执行此 SQL 时`SELECT`，出现以下异常：

```
ORA-00933: SQL command not properly ended 
```

这是完整的代码：

```
sql = "SELECT 'DCS - HCA (81)', HCA_SENT_DCS, HCA_VALID_DCS, HCA_SUSPEND_DCS, HCA_REJECTED_DCS,"
sql &= " SUM(HCA_VALID_DCS + HCA_SUSPEND_DCS + HCA_REJECTED_DCS) As ""Total Returned"","
sql &= " RESOLVED_CNT, SUM(HCA_REJECTED_DCS - RESOLVED_CNT) As ""To Do"""
sql &= " FROM HUB_CDI_CONTROL_NBRS WHERE REPORT_DATE = :0 "
sql &= " GROUP BY HCA_SENT_DCS, HCA_VALID_DCS, HCA_SUSPEND_DCS, HCA_REJECTED_DCS,"
sql &= " RESOLVED_CNT"

sql &= " UNION ALL"

sql &= "SELECT 'SFDC - HCA (82)', HCA_SENT_SFDC, HCA_VALID_SFDC, HCA_SUSPEND_SFDC, HCA_REJECTED_SFDC,"
sql &= " SUM(HCA_VALID_SFDC + HCA_SUSPEND_SFDC + HCA_REJECTED_SFDC) As ""Total Returned"","
sql &= " RESOLVED_CNT, SUM(HCA_REJECTED_SFDC - RESOLVED_CNT) As ""To Do"""
sql &= " FROM HUB_CDI_CONTROL_NBRS WHERE REPORT_DATE = :0 "
sql &= " GROUP BY HCA_SENT_SFDC, HCA_VALID_SFDC, HCA_SUSPEND_SFDC, HCA_REJECTED_SFDC,"
sql &= " RESOLVED_CNT"

_param.Add(dateSelected.ToString("dd-MMM-yyyy"))
_DH.TheSQL = sql
_DT = _DH.GetTableWithParameters(_param.ToArray) 
```

我关心这段代码的两个部分：

1.  我是否正确调用了 _param.Add() 函数？由于我引用参数两次，使用`:0`，我只需要使用 _param.Add() 函数一次吗？

2.  我觉得我错误地使用了`GROUP BY`语法。当我试图在不使用的情况下运行查询时，Oracle 对我大喊大叫`GROUP BY`，但我不确定我是否正确使用它们。本质上，我只是将每一列添加`SELECTed`到`GROUP BY`

否则，我确定我还缺少其他错误。请帮忙！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:19:32.077

```
sql &= " UNION ALL"
sql &= "SELECT 'SFDC - HCA (82)', HCA_SENT_SFDC, HCA_VALID_SFDC, HCA_SUSPEND_SFDC, HCA_REJECTED_SFDC," 
```

结果，在中间的某个地方：

```
... UNION ALLSELECT 'SFDC - HCA (82)', HCA_SENT_SFDC, ... 
```

注意：“联合**全选**”

* * *

带有其他修复的完整代码。我不相信你真的想要 GROUP BY，加/减，你不需要 SUM() 函数。要在 UNION ALL 中有效，第一部分的所有列都必须命名/别名。

```
sql = "SELECT 'DCS - HCA (81)' Title, HCA_SENT_DCS, HCA_VALID_DCS, HCA_SUSPEND_DCS, HCA_REJECTED_DCS,"
sql &= " HCA_VALID_DCS + HCA_SUSPEND_DCS + HCA_REJECTED_DCS As ""Total Returned"","
sql &= " RESOLVED_CNT, HCA_REJECTED_DCS - RESOLVED_CNT As ""To Do"""
sql &= " FROM HUB_CDI_CONTROL_NBRS WHERE REPORT_DATE = :0 "
sql &= " UNION ALL "
sql &= "SELECT 'SFDC - HCA (82)', HCA_SENT_SFDC, HCA_VALID_SFDC, HCA_SUSPEND_SFDC, HCA_REJECTED_SFDC,"
sql &= " HCA_VALID_SFDC + HCA_SUSPEND_SFDC + HCA_REJECTED_SFDC As ""Total Returned"","
sql &= " RESOLVED_CNT, HCA_REJECTED_SFDC - RESOLVED_CNT As ""To Do"""
sql &= " FROM HUB_CDI_CONTROL_NBRS WHERE REPORT_DATE = :1 "

_param.Add(dateSelected.ToString("dd-MMM-yyyy"))
_param.Add(dateSelected.ToString("dd-MMM-yyyy"))  ' 2nd one
_DH.TheSQL = sql
_DT = _DH.GetTableWithParameters(_param.ToArray) 
```

# java - 如何在没有专门构建的 CSV 解析器的情况下验证使用 CSV 备份的输入数据

> ID：13369105
> 
> 赞同：2
> 
> 时间：2012-11-13T21:27:36.987
> 
> 标签：java, csv

我需要能够根据我拥有的 csv 文件验证用户输入的电子邮件和密码，以确保它们在文件中并且它们彼此匹配，例如；ojones@coldmail.net ocrabc。目前我可以拆分文件并将其打印到屏幕上，但我找不到将其放入数组中的方法，然后我可以参考。有没有更好的方法在没有数组的情况下解决这样的问题？

```
import java.io.*;

import java.util.Arrays;

public class CSVRead{

public static void main(String[] arg) throws Exception {
    BufferedReader CSVFile =
        new BufferedReader(new FileReader("testa453.csv"));
    String dataRow = CSVFile.readLine();
    while (dataRow != null){
        String[] dataArray = dataRow.split(",");
        for (String item:dataArray) {
            System.out.print(item + "\t");
        }
        System.out.println();
        dataRow = CSVFile.readLine();
    }
    CSVFile.close();
    System.out.println();

} 
```

}

编辑; 只是为了澄清我对Java相当陌生，并且希望使用和数组，除非有更有效的方法来解决问题；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:32:17.877

您可以创建电子邮件[地图-> 密码](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)

```
import java.io.*;

import java.util.Arrays;

public class CSVRead{

public static void main(String[] arg) throws Exception {
    Map<String, String> emailPasswordMap = new HashMap<String, String> ();
    BufferedReader CSVFile =
        new BufferedReader(new FileReader("testa453.csv"));
    String dataRow = CSVFile.readLine();
    while (dataRow != null){
        String[] dataArray = dataRow.split(",");
        emailPasswordMap.put (dataArray[0], dataArray[1]);
        dataRow = CSVFile.readLine();
    }
    CSVFile.close();

    String email = "xxx";
    String password = "yyy";

    if (password.equals (emailPasswordMap.get (email)) {
        System.out.println ("Email/password combination is valid");
    }
    else {
        System.out.println ("Email/password combination is invalid");
    }
} 
```

# ruby-on-rails - rails 3生成控制器不起作用

> ID：13369111
> 
> 赞同：0
> 
> 时间：2012-11-13T21:27:53.187
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ubuntu

我正在学习 RoR，生成控制器时出现错误

> `mitchell@ubuntu:~/Ruby/Website/blog$ rails generate controller posts`

```
/home/mitchell/.rvm/gems/ruby-1.9.3-p327/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect': Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes. (ExecJS::RuntimeUnavailable)
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327/gems/execjs-1.4.0/lib/execjs.rb:4:in `<top (required)>'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `<top (required)>'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `<top (required)>'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `require'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `each'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:66:in `block in require'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `each'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.1/lib/bundler/runtime.rb:55:in `require'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327@global/gems/bundler-1.2.1/lib/bundler.rb:128:in `require'
from /home/mitchell/Ruby/Website/blog/config/application.rb:7:in `<top (required)>'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands.rb:24:in `require'
from /home/mitchell/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/commands.rb:24:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

我在 Ubuntu 上运行 Rails 3.2.9 和 Ruby 1.9.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:29:43.623

您的开发机器上缺少命令行 Javascript 解释器。

安装[node.js](http://nodejs.org/)，你应该会很好。

为了记录，这条信息似乎很清楚：

> 找不到 JavaScript 运行时。有关可用运行时的列表，请参阅[https://github.com/sstephenson/execjs](https://github.com/sstephenson/execjs)。(ExecJS::RuntimeUnavailable)

你去那个网址看看它说了什么吗？

一般来说，错误消息是非常有用的东西。当某些事情不起作用时，该消息应该告诉您原因，有时甚至告诉您如何解决它。

# css - 导航栏整个宽度均匀地间隔项目

> ID：13369112
> 
> 赞同：4
> 
> 时间：2012-11-13T21:27:57.983
> 
> 标签：css

我对css有点陌生。我正在尝试制作一个只有 3 个文本项的水平导航栏，以供移动设备查看。我将宽度设置为 100%，每个部分的宽度设置为 32%（我尝试了 33%，但它会将第三个项目放在新行上。）它看起来还可以，但是当我悬停时（或单击使用移动设备）背景颜色发生变化，您可以看到边距。

```
ul.nav {
    width:100%;
    margin:0 auto;
    padding:0;
    list-style:none;
    display:inline-block;
    background-color:#62564A;
    text-align:center;
    font-family: sans-serif; 
}

.nav li { 
        display:inline;
    }

.nav a {
    width:33%;
    text-align:center;
    display:inline-block;
    padding-bottom:13px;
    padding-top:12px;
    border-left: 1px solid #fff;
    border-right: 1px solid #fff;
}

.nav a:hover { 
    background:#A26A42;
    border:none;
    width:32%
}

ul.nav li:first-child a{
    border:none;
}
ul.nav li:last-child a {
    border:none;
} 
```

CSS 结束

```
<ul class="nav">
        <li><a href="#">Search</a></li>
        <li><a href="#">Legend</a></li>
        <li><a href="#">Info</a></li>
</ul>
<div id="map_canvas" style="position:absolute;left:0;right:0;"></div> 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:35:10.780

我会像这个**[jsFiddle 示例](http://jsfiddle.net/j08691/HBXku/)**一样修改你的 CSS 。

**CSS**

```
ul.nav {
    width:100%;
    margin:0 auto;
    padding:0;
    list-style:none;
    background-color:#62564A;
    text-align:center;
    font-family: sans-serif; 
}
.nav li { 
    display:inline-block;
    width:33%;
    margin:0;
    padding:0;
}
.nav a {
    text-align:center;
    padding:12px 0 13px 0;
    margin:0;
    border-left: 1px solid #fff;
    border-right: 1px solid #fff;
    display:block;
}
.nav a:hover { 
    background:#A26A42;
    border:none;
}

ul.nav li:first-child a{
    border:none;
}
ul.nav li:last-child a {
    border:none;
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:34:40.753

试试这个：

```
* { margin:0; padding:0; } // This reset should go at the top of your CSS (if you don't have one already)

.nav li {
    display:block;
    float:left;
    width: 33%;
}
.nav li a {
    display:block;
    text-align: center;
} 
```

小提琴：http: [//jsfiddle.net/kboucher/duaa6/](http://jsfiddle.net/kboucher/duaa6/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:45:09.383

在“悬停”时，您可以使菜单项比正常范围更窄。另外，您删除了边框，这将使其更加狭窄。此外，看起来您正在使用左右 1 像素的边框作为间距。如果是这种情况，请改用边距。使用 jsfiddle 练习。

试试这个：

```
 ul.nav {
        width:100%;
        margin:0;
        padding:0;
        list-style:none;
        text-align:center;
        font-family: sans-serif;
    }

    .nav li {
        display:inline;
    }

    .nav a {
        width:32%;
        text-align:center;
        display:inline-block;
        padding-bottom:13px;
        padding-top:12px;
        margin-left: 1px;
        background: #62564A;            
    }

    .nav a:hover {
        background:#A26A42;
    }

    ul.nav li:first-child a{
        margin-left: 0;
    } 
```

[http://jsfiddle.net/mVv75/4/](http://jsfiddle.net/mVv75/4/)

# javascript - 新窗口的 document.createElement 失败

> ID：13369113
> 
> 赞同：0
> 
> 时间：2012-11-13T21:27:59.307
> 
> 标签：javascript

我有两个 HTML 文件，FirstWindow 和 SecondWindow。FirstWindow 将 FirstWindowJS.js 作为其脚本，而 SecondWindow 将 SecondWindowJS.js 作为其脚本。

通过 FirstWindowJS.js，我打开 SecondWindow.html。但是，我无法为其创建元素。这是代码以及问题 -

第一窗口.html

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>FirstWindow</title>
</head>
<body>
<script type="text/javascript" src="FirstWindowJS.js"></script>
</body>
</html> 
```

SecondWindow.html

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>SecondWindow</title>
</head>
<body>
<script type="text/javascript" src="SecondWindowJS.js"></script>
</body>
</html> 
```

FirstWindowJS.js

```
main();

function main()
{
    var myWindow = window.open("SecondWindow.html", "My Window", 
    "resizable=0,width=700,height=600");

    var e = myWindow.document.createElement("currentUserElement");
    e.setAttribute("id", "currentUserElement");
    e.setAttribute("value","John");
} 
```

SecondWindowJS.js

```
main();

function main()
{
     var e = document.getElementById("currentUserElement"); 
     var value = e.getAttribute("value");
     console.log("value = "+value);
} 
```

我在 SecondWindowJS.js 中得到的错误是 -

```
TypeError: e is null 
```

为什么“e”为空？错误是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:31:55.067

新窗口可能会在打开器的脚本继续之前运行其 JavaScript，但您更有可能无法`getElementById`在尚未附加到文档的元素上使用它。

```
myWindow.document.body.appendChild(e); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:32:28.940

您创建了元素，但看起来并没有将其添加到 DOM。[*在您使用parentNode* .appendChild()](https://developer.mozilla.org/en-US/docs/DOM/Node.appendChild)方法显式添加元素之前，DOM 中不存在元素。

在您的情况下，如果您只想将元素添加为 body-element 中的最后一个元素，它看起来像这样：

```
function main()
{
    var myWindow = window.open("SecondWindow.html", "My Window", 
    "resizable=0,width=700,height=600");

    var e = myWindow.document.createElement("currentUserElement");
    e.setAttribute("id", "currentUserElement");
    e.setAttribute("value","John");
    // The element doesn't exist in the DOM until you explicitly add it
    myWindow.document.body.appendChild(e);
} 
```

# ruby - ruby 将两个语句合并为一个

> ID：13369116
> 
> 赞同：4
> 
> 时间：2012-11-13T21:28:05.983
> 
> 标签：ruby

这个问题是针对非常具体的情况，我可能会更改参数。这不是任何 Rails 应用程序的一部分。

参数是`{:email => " ab", :xyz => " ", :opq => nil}` 我运行以下：

```
params.each{|_, v| v.strip! if v}
params.keep_if{|_, v| v.length > 0 if v} 
```

获取参数为 `{:email => "ab"}`

有没有将以上两行合并为一条？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:37:13.803

```
ruby-1.9.3-p125 :011 > params ={:email => " ab", :xyz => " ", :opq => nil}
 => {:email=>" ab", :xyz=>" ", :opq=>nil} 
ruby-1.9.3-p125 :012 > params.reject! { |_, v| !v || v.strip!.length == 0 }
 => {:email=>"ab"} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:33:01.180

```
params.each{|_, v| v.strip! if v}.reject!{|_, v| !v || v.length == 0} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:53:59.923

实际上，您编写的行是可链接的：

```
params.each{|_, v| v.strip! if v}.keep_if{|_, v| v.length > 0 if v} 
```

这是有效的，因为`each`返回对象本身（已更新）。但是，恕我直言，就地更新通常不是一个好主意，所以这里有一个实用的方法：

```
params2 = Hash[params.map { |k, v| [k, v.strip] if v && v.strip.size > 0 }.compact] 
```

但这是不必要的冗长，因为 stdlib 缺乏一些基本的抽象。在它的帮助下`Enumerable#mash`，`Object#present?`它很简单：

```
params2 = params.mash { |k, v| [k, v.strip] if v.present? } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T23:21:31.633

这是一个似乎在技术上回答您的问题的选项，但我猜这不是您想要的：

```
params.select{|_,v| v.strip.length > 0 if v} 
```

您遇到的根本问题是 Hash#map 不**返回**哈希，而是返回数组。很多人，包括我自己，都觉得这很烦人。参见例如：[http ://www.ruby-forum.com/topic/185611](http://www.ruby-forum.com/topic/185611)

这是一个使用注入的详细选项。

```
params.inject({}) {|h,(k,v)| h.merge(k => v ? v.strip : v)}.select{|_,v| v.length > 0 if v} 
```

如果对您很重要，这些解决方案都不会对参数进行任何破坏性更改。

```
1.9.3-p125 :030 > params = {:email => " ab", :xyz => " ", :opq => nil}
 => {:email=>" ab", :xyz=>" ", :opq=>nil} 
1.9.3-p125 :031 > params.inject({}) {|h,(k,v)| h.merge(k => v ? v.strip : v)}.select{|_,v|   v.length > 0 if v}
 => {:email=>"ab"} 
1.9.3-p125 :032 > params
 => {:email=>" ab", :xyz=>" ", :opq=>nil} 
```

Inject 是一个棘手的功能，需要一些时间来适应。我将尝试逐步解释这一行：

*   `params.inject({}}`说要创建一个空哈希来存储我们的结果。
*   |h, (k,v)| 表示将新的空散列传递到变量 h 中，同时将原始参数散列中的键、值对分别传递给 k、v。

接下来它有点毛茸茸的。我将从里到外解开下一个命令。

*   `v ? v.strip : v`使用三元运算符在 v 计算结果为 true 的情况下返回 v.strip 或在 v 为 false 或 nil 的情况下返回 v

*   `k => v ? v.strip : v`用结果创建一个新的哈希

*   `h.merge(k => v ? v.strip : v)`将我们的新哈希合并到一开始为空的 h 中，然后将结果传递给注入循环的下一次迭代。

*   在循环的下一次迭代中， h 将不再为空，未来的结果将继续合并到它上面。

此时我们已经剥离了哈希，如果我们在这里停止，结果如下所示：

```
1.9.3-p125 :032 > params
 => {:email=>" ab", :xyz=>" ", :opq=>nil} 
1.9.3-p125 :033 > params.inject({}) {|h,(k,v)| h.merge(k => v ? v.strip : v)}
 => {:email=>"ab", :xyz=>"", :opq=>nil} 
```

现在散列被剥离了，选择语句是直截了当的。我在这里使用 select 而不是 keep_if，因为尽管没有 !，keep_if 是一种破坏性方法。请参阅此咆哮： http://news.ycombinator.com/item?id= [2247352](http://news.ycombinator.com/item?id=2247352)。由于我们的注入语句返回一个哈希值，我们可以直接调用`.select`它，尽管我不建议在实际实践中让你的代码行这么长。

```
1.9.3-p125 :034 > params
 => {:email=>" ab", :xyz=>" ", :opq=>nil} 
1.9.3-p125 :035 > params.inject({}) {|h,(k,v)| h.merge(k => v ? v.strip : v)}.select{|_,v| v.length > 0 if v}
 => {:email=>"ab"} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T23:58:45.843

```
params.keys.each{|k| v = h.delete(k); h[k] = v.strip if v and !v.empty?} 
```

或者

```
params.select!{|k, v| v and v.strip!; v and !v.empty?} 
```

# java - NSArray 是否有与 iOS 函数“componentsJoinedByString”等效的 Java/Android？

> ID：13369117
> 
> 赞同：5
> 
> 时间：2012-11-13T21:28:06.823
> 
> 标签：java, android, iphone, ios, arrays

Java中有这样的东西吗？

```
NSString *myString = [myArray componentsJoinedByString:@", "]; 
```

这是一些输出的示例：

```
A, B, C, D 
```

如果没有，实现此目的的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-13T21:30:52.900

使用[`TextUtils.join()`](http://developer.android.com/reference/android/text/TextUtils.html#join%28java.lang.CharSequence,%20java.lang.Object%5b%5d%29)：

```
String myArray[] = new String[]{ "A", "B", "C", "D" };
String myString = TextUtils.join(", ", myArray); 
```

如果您需要[加入](http://developer.android.com/reference/android/text/TextUtils.html#join%28java.lang.CharSequence,%20java.lang.Iterable%29)类似.[`Iterable`](http://developer.android.com/reference/java/lang/Iterable.html)`ArrayList`

# ruby-on-rails - 来自邮件的 Carrierwave default_url

> ID：13369119
> 
> 赞同：0
> 
> 时间：2012-11-13T21:28:12.580
> 
> 标签：ruby-on-rails, ruby-on-rails-3, carrierwave

我一切正常，但我意识到当我从 Rails 发送一封带有 default_url 的电子邮件时，它会尝试访问：

```
http://assets/fallback/profile_thumb_default.png 
```

这是我在carrierwave中的default_url代码：

```
def default_url
 asset_path("fallback/profile_" + [version_name, "default.png"].compact.join('_'))
end 
```

asset_url 不是一种方法。关于如何从外部来源（例如电子邮件）访问默认图像的任何其他建议。

# ios - 如何像在 CNN 应用程序中一样在 UITableView 上展开图像

> ID：13369124
> 
> 赞同：3
> 
> 时间：2012-11-13T21:28:32.723
> 
> 标签：ios, objective-c, uitableview

我的iPhone 上有[CNN 应用程序。](https://itunes.apple.com/pt/app/cnn-app-for-iphone/id331786748?l=en&mt=8)

如果你打开它会显示“头条新闻”，并且在表格的顶部总是有一张图片。

当我们向下滑动手指时，它会扩展/缩放图像。

当我们向上滑动手指以显示更多行时，它不会以与表格行相同的速度向上移动图像，而是表格行的移动速度比画面离开屏幕的速度更快。

你知道这个效果怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:43:41.567

您需要**UIImageView**到**UIScrollView** **contentInset**并将顶部插图设置为大于零。

```
UIScrollView *scroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];

UIImage *topImage = [UIImage imageNamed:@"photo"];
topImage.frame = CGRectMake(0, -topImage.frame.size.height, topImage.frame.size.width, topImage.frame.size.height);
[scroll addSubview:topImage];

self.contentInset = UIEdgeInsetsMake(topImage.frame.size.height, 0, 0, 0); 
```

之后像这样设置**UIScrollView**的**contentOffset**

```
scroll.contentOffset = CGPointMake(0, topImage.frame.size.height); 
```

所以你有**UIScrollView**里面有图像。现在您只需将**委托**添加到 UIScrollView 并等待`- (void)scrollViewDidScroll:(UIScrollView *)scrollView`. 在调用此方法后立即调整图像大小并更改 contentInset。

您也可以将此建议应用于**UITableView类似的方式，或在****UIScrollView**上创建类别。

我还建议您阅读该项目的代码[https://github.com/samvermette/SVPullToRefresh](https://github.com/samvermette/SVPullToRefresh)。它也是关于**UITableView**并将视图添加到它的顶部

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:03:17.990

这似乎是一个完全自定义的效果，您必须自己实现。为了给你指明正确的方向，我首先会监控你的实例发送`contentOffset`的消息的变化，当，通过改变你的 imageView 的比例`scrollViewDidScroll:``myTableView``contentOffset.y < 0`

```
[myImageView setValue:[NSNumber numberWithFloat:scaleIncrementAmountFloat] forKeyPath:@"transform.scale"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:11:17.263

我的猜测是 tableview 的顶部单元格（或单元格）是透明的，并且 tableview 后面有一个 UIImageView ，它根据 table view 的滚动方式调整大小/移动。

由于 table view 继承自 UIScrollView，它的委托 (UITableViewDelegate) 继承自 UIScrollViewDelegate 协议，当用户滚动滚动视图时会通知该协议。实现`- (void)scrollViewDidScroll:(UIScrollView *)scrollView`接收这些通知的方法并检查`contentOffset`滚动视图上的属性。

您可能必须实现自己的表视图控制器才能在界面构建器中构建所需的 UI。

# jquery - jQuery 循环 + Flickr 调用 + 图像调整大小 = 调整大小不起作用

> ID：13369126
> 
> 赞同：2
> 
> 时间：2012-11-13T21:28:34.077
> 
> 标签：jquery, image-resizing, jquery-cycle, flickr

我正在将 Flickr JSON 提要的代码与 jQuery 循环集成在一起，但需要调整图像大小以适应允许的容器。

我已经搞砸了一段时间了，我似乎无法理解在循环幻灯片中显示图像之前需要去哪里调整图像大小。请帮忙！

这是代码（richs-slides.js 文件）：

```
function image_resize() {
    $(".slides img").each(function () {
            /* Max width for the image */
            var maxWidth = 330;
            /* Max hieght for the image */
            var maxHeight = 388;
            /*Used for aspect ratio*/
            var ratio = 0;
            /*Current image width*/
            var width = $(this).width();
            /*Current image height */
            var height = $(this).height();

            /*Check if the current width is larger than the max*/
            if (width > maxWidth) {
                /*get ratio for scaling image*/
                ratio = (maxWidth / width);
                /* Set New hieght and width of Image*/
                $(this).attr({
                        width : maxWidth,
                        height : (height * ratio),
                        alt : "your-alt-text-you-can-remove-this"
                    });
                /* Reset height to match scaled image */
                height = (height * ratio);
                /* Reset width to match scaled image */
                width = (width * ratio);
                /*Check if current height is larger than max*/
                if (height > maxHeight) {
                    /*get ratio for scaling image*/
                    ratio = (maxHeight / height);
                    /*Set new height and width*/
                    $(this).attr({
                            height : maxHeight,
                            width : (width * ratio),
                            alt : "your-alt-text-you-can-remove-this"
                        });

                }
            }
        });
}
$(document).ready(function() {
  $('<div class="slideshow"/>').prependTo('#flkr');
  $.getJSON('http://api.flickr.com/services/feeds/photoset.gne?set=72157624117859653&nsid=31704706@N05&lang=en-us&format=json&jsoncallback=?', function(data) {
    $.each(data.items, function(i,item) {
      var squares = (item.media.m).replace('_m.jpg', '_z.jpg');
      if(i <= 20){
        $('<img/>').attr({
          alt: item.title,
          title: item.title,
          src: squares,
          class: 'slidey'
        }).appendTo('.slideshow').wrap('<div class="slides"></div>');
        $('.slideshow').cycle({
            fx: 'fade',
            speed: 2500,
            timeout: 4000, // choose your transition type, ex: fade, scrollUp, shuffle, etc...
            width: 330,
            containerResize: false,
            before: function (nextSlideElement, options, forwardFlag) {
                image_resize();
            },
            after: function (currSlideElement, nextSlideElement, options, forwardFlag) {
                image_resize();
            }
        });
      }
    });
  });
}); 
```

和 HTML：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script src="jquery.cycle.min.js"></script>
<script src="richs-slides.js"></script>
<style>
#flkr {
    display: block;
    width: 330px;
    height: 388px;
    overflow: hidden;
}
.slideshow {
    width: 330px;
    height: 388px;
}
.slides {
    width: 330px;
    height: 388px;
}
.slides img{
    margin: auto;
    display: block;
}
</style>
</head>

<body>

<div id="flkr"></div>

</body>
<script type="text/javascript">
$(window).load(function () {
    image_resize();
});
</script>
</html> 
```

在玩这个时，我注意到循环中的选项：

```
before: function (nextSlideElement, options, forwardFlag) {
                image_resize();
            },
            after: function (currSlideElement, nextSlideElement, options, forwardFlag) {
                image_resize();
            } 
```

那些让图像调整大小，但直到它完全加载并且循环第一次将其淡入。相同页面加载的后续周期保持调整大小。我知道我错过了什么，那是什么？

# ruby-on-rails-3 - 如何在 Spee 中使用 spree_bootstrap_theme

> ID：13369137
> 
> 赞同：0
> 
> 时间：2012-11-13T21:29:42.037
> 
> 标签：ruby-on-rails-3, twitter-bootstrap, spree

我对安装 spree_bootstrap_theme 的指南（https://github.com/Andrewmp1/spree_bootstrap_theme）的理解有些晦涩。你对我有什么建议吗？非常感谢！

以下是我所做的：

1.  为狂欢创建一个新的沙箱。

2.  添加到 Gemfile：

    ```
    gem 'spree_bootstrap_theme', :git => 'git://github.com/Andrewmp1/spree_bootstrap_theme.git' 
    ```

3.  将样式表中的 application.css 重命名为 application.css.scss

4.  在 stylesheets 文件夹中创建一个新文件：bootstrap_and_overrides.css.scss。

5.  将以下行添加到 bootstrap_and_overrides.css.scss：

    ```
    @import 'store/spree_bootstrap_theme'; 
    ```

6.  打开application.js，添加：

    ```
    //= require bootstrap 
    ```

7.  运行 rails 服务器

我收到的结果：http: [//imageshack.us/f/405/spreet.png/](http://imageshack.us/f/405/spreet.png/) 如您所见，布局已损坏。我查看了文件的源代码，没有看到任何关于引导程序的信息。我得到的是这里：

```
<meta content="Spree demo site" name="description" />
<link href="/assets/favicon.ico" rel="shortcut icon" type="image/vnd.microsoft.icon" />
<link href="/assets/normalize.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/skeleton.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/store/screen.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/store/spree_core.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/store/spree_promo.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<link href="/assets/store/all.css?body=1" media="screen" rel="stylesheet" type="text/css" />
<meta content="authenticity_token" name="csrf-param" />
<meta content="BoSR3FtvQBjqF68s7amtXGMVypmaW68e7tHhRzYvqzw=" name="csrf-token" />
<script src="/assets/jquery.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery_ujs.js?body=1" type="text/javascript"></script>
<script src="/assets/jquery.validate/jquery.validate.min.js?body=1" type="text/javascript">    </script>
<script src="/assets/store/checkout.js?body=1" type="text/javascript"></script>
<script src="/assets/store/product.js?body=1" type="text/javascript"></script>
<script src="/assets/store/cart.js?body=1" type="text/javascript"></script>
<script src="/assets/store/spree_core.js?body=1" type="text/javascript"></script>
<script src="/assets/store/spree_promo.js?body=1" type="text/javascript"></script>
<script src="/assets/store/all.js?body=1" type="text/javascript"></script> 
```

**我也尝试将 gem 'bootstrap-sass' 添加到 Gemfile，但两种情况下的结果都与上述相同。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T10:07:01.507

我刚刚在样式表/商店中创建了一个文件，名为“spree_bootstrap.scss”，内容如下：

```
@import 'store/spree_bootstrap_theme' 
```

之后，我从 stylesheets/store/all.css 中删除了下面的代码

```
*= require store/spree_core
*= require store/spree_promo 
```

对于 javascripts/store/all.js 也是如此：

```
//= require store/spree_core
//= require store/spree_promo 
```

我在 javascripts/store/all.js::

```
//= require bootstrap 
```

启动您的服务器，您将看到 spree_bootstrap_theme 的正确样式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T22:19:54.693

我认为您不应该将 application.css 重命名为 application.css.scss 。文件 application.css 是一个特殊用途的文件。[在这里您可以](http://guides.rubyonrails.org/asset_pipeline.html)了解它的格式和语法。

# php - 将大文件直接上传到 Amazon S3 并使用 Web 表单和 PHP 将其他日期添加到数据库

> ID：13369143
> 
> 赞同：0
> 
> 时间：2012-11-13T21:30:03.580
> 
> 标签：php, forms, upload, amazon-s3

我想创建一个单一的网络表单，用户提供一个大文件，以及一些信息，如标题和描述。提交表单时，文件应直接上传到 Amazon S3（无需上传到 Web 服务器），同时使用 PHP 将信息添加到数据库中。

我该怎么做呢？我知道我可以使用[直接上传发布解决方案](http://doc.s3.amazonaws.com/proposals/post.html)，但是我无法将其他信息添加到数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T22:48:24.353

我将在 S3 上实现文件的 ajax 提交（最终使用直接上传参数），然后在第二步中将所有其他字段提交到您的网络服务器（当然，甚至不是 ajax）。

您还可以在表单中使用隐藏字段来提交新的 S3 链接（您可以在 ajax 上传完成后检索该链接），因为我想您需要将它与所有其他数据一起存储。

# .net - 需要查看当前进程有多少物理内存可用

> ID：13369150
> 
> 赞同：0
> 
> 时间：2012-11-13T21:30:18.847
> 
> 标签：.net, c#-4.0, memory

我有一个必须在 windows xp 上运行的内存密集型 c# 4.0 图形程序，因此经常出现内存不足。为我的进程估计可用物理内存的最佳方法是什么？当物理内存低于 250 MB 时，我想停止分配缓冲区。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:33:48.770

您可以使用性能计数器，例如：

```
private PerformanceCounter memoryCounter =
        new PerformanceCounter("Memory", "Available MBytes");

// ...
float mb = this.memoryCounter.NextValue();
float available = (mb * 1024 * 1024) - Process.GetCurrentProcess().PrivateMemorySize64;
Console.Write("RAM: {0} MB"
  , (1.0 * available / 1024 / 1024).ToString("0.##")); 
```

查看此答案以获取更多信息：[https ://stackoverflow.com/a/4680030/284240](https://stackoverflow.com/a/4680030/284240)

# function - 编译错误，在 VBA 中找不到变量

> ID：13369156
> 
> 赞同：0
> 
> 时间：2012-11-13T21:30:32.340
> 
> 标签：function, vba

我有以下代码，但出现以下错误：（ `Compile error, variable not found`它无法找到 j）此外，即使我提供 MktVol 作为长度为 4 的向量，消息框也会返回`N=0` Can you please help me fix my error。

```
Public Function EstimateAllParameters(params, MktStrike, MktVol, F, T, b)
Dim R As Double, a As Double, V As Double, N As Integer
Dim j as integer 'stops the compile error but the function returns #VALUE! 
Dim ModelVol() As Double, sqdError() As Double
R = params(1)
V = params(2)
a = params(3)
N = MktVol.Length
MsgBox ("N= " & N)
For j = 1 To N
 ModelVol(j) = Svol(a, b, R, V, F, MktStrike(j), T)
  sqdError(j) = (ModelVol(j) - MktVol(j)) ^ 2
Next j
EstimateAllParameters = Sum(sqdError)
End Function 
```

`MktStrike`在单元格 E5:E8 中具有以下值

```
12
13
14
15 
```

并`MktVol`在单元格 F5:F8 中具有以下值

```
0.234
0.236
0.242
0.249 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:37:19.977

明显的问题是 J 没有变暗

我会改变：

```
Dim R As Double, a As Double, V As Double, N As Integer 
```

至

```
Dim R As Double, a As Double, V As Double, N As Integer, J as Integer 
```

# azure - 我可以从 Azure 上的部署生成代码覆盖率吗？

> ID：13369163
> 
> 赞同：5
> 
> 时间：2012-11-13T21:31:07.300
> 
> 标签：azure, integration-testing, code-coverage, dotcover

我们希望能够将我们的代码部署到 azure，然后在部署的实例上运行集成/验收测试以验证功能，因为使用模拟器并不总能给出真实的结果。

我们还希望这些测试生成代码覆盖率报告，然后我们可以将其与单元测试中的代码覆盖率合并。我们使用 TeamCity 作为我们的构建服务器，内置 dotcover 作为我们的代码覆盖工具。

我们可以这样做吗？有人对从哪里开始有任何指示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T03:49:18.617

看看这个视频

Kudu 可以使用自定义部署脚本进行扩展以运行单元测试等等。

[http://www.windowsazure.com/en-us/documentation/videos/custom-web-site-deployment-scripts-with-kudu/](http://www.windowsazure.com/en-us/documentation/videos/custom-web-site-deployment-scripts-with-kudu/)

# mysql - 无法创建/写入文件（错误代码：22）

> ID：13369164
> 
> 赞同：2
> 
> 时间：2012-11-13T21:31:16.070
> 
> 标签：mysql, sql, phpmyadmin

SQL 相当新 我希望将一些数据从 MySQL 数据库导出到 csv 文件中。我在本地工作（本地主机）。

这是我的 SQL 语句：

```
SELECT DISTINCT *
INTO
OUTFILE 'C:\Users\Martin\Downloads\result.csv'
FROM provider, location, provider_has_location
WHERE 
provider.idprovider = provider_has_location.provider_idprovider AND
location.idLocation = provider_has_location.location_idLocation
LIMIT 20 
```

MySQL 返回以下错误：

> 无法创建/写入文件“C:UsersMartinDownloads esult.csv”（错误代码：22）

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:36:07.430

看起来反斜杠可能会影响命令。尝试使用 '\\' 而不是 '\'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T12:16:48.357

SELECT * FROM TableName WHERE 条件 INTO OUTFILE 'E:/test/filename.csv';

您遇到反斜杠问题。使用正斜杠解决了 Windows 机器中的问题。但在 Ubuntu 中它不起作用。

然后我尝试使用下面提到的查询并且它有效：

SELECT * FROM TableName WHERE 条件 INTO OUTFILE '//tmp/test/filename.csv';

此处启动路径时需要使用双斜杠。

# android - 反序列化时的 Gson 异常（不存在无参数构造函数）

> ID：13369165
> 
> 赞同：3
> 
> 时间：2012-11-13T21:31:23.200
> 
> 标签：android, json, exception, gson

我有一个问题，它只出现在 5000 台设备中的 10 台中。用我的模拟器和测试设备不可能重现它。这似乎是一个非常具体的问题，只有少数设备。我所拥有的只是堆栈跟踪和我的代码。所以我正在针对黑洞进行开发，只有在我在 GooglePlay 上发布了新版本之后，我才能查看这些更改是否解决了问题。我刚刚将新版本更新到 GooglePlay，但错误仍然存​​在。

这些更改是无参数构造函数，并将 WorkIem[类更改为 static](https://stackoverflow.com/questions/5148011/android-and-gson-throwing-no-args-constructor-not-found-exception)。

这是堆栈跟踪：

```
W 6758/dalvikvm: threadid=1: thread exiting with uncaught exception (group=0x401a15a0)
E 6758/AndroidRuntime: FATAL EXCEPTION: main
**Caused by: java.lang.RuntimeException: No-args constructor for class com.mypackage.model.UpdaterObject$UpdateReport does not exist. Register an InstanceCreator with Gson for this type to fix this problem.**
    at com.google.gson.MappedObjectConstructor.constructWithNoArgConstructor(MappedObjectConstructor.java:64)
    at com.google.gson.MappedObjectConstructor.construct(MappedObjectConstructor.java:53)
    at com.google.gson.JsonObjectDeserializationVisitor.constructTarget(JsonObjectDeserializationVisitor.java:40)
    at com.google.gson.JsonDeserializationVisitor.getTarget(JsonDeserializationVisitor.java:56)
    at com.google.gson.ObjectNavigator.accept(ObjectNavigator.java:109)
    at com.google.gson.JsonDeserializationContextDefault.fromJsonObject(JsonDeserializationContextDefault.java:73)
    at com.google.gson.JsonDeserializationContextDefault.deserialize(JsonDeserializationContextDefault.java:51)
    at com.google.gson.Gson.fromJson(Gson.java:568)
    at com.google.gson.Gson.fromJson(Gson.java:515)
    at com.google.gson.Gson.fromJson(Gson.java:484)
    at com.google.gson.Gson.fromJson(Gson.java:434)
    at com.google.gson.Gson.fromJson(Gson.java:406)
    **at de.fliese.NewVersionCheckerActivity.onCreate(NewVersionCheckerActivity.java:35)** 
```

这是第 35 行：

```
UpdateReport report = new Gson().fromJson(jsonStr, UpdateReport.class); 
```

json-String 看起来像这样（Workitems 可以为空）：

```
{"WorkItems":
[{"Url":"http://url1.comfoo.zip","TypeId":1,"LastModifiedServer":1352598239000},
{"Url":"http://url2.com/bar.zip","TypeId":4,"LastModifiedServer":1352598265000}],
 "ShowQuestionDialog":false,"IsOffline":false,"DoUpdate":true} 
```

最后是我的带有 innerClass 的 UpdateReport 类：

```
public class UpdaterObject{     
public class UpdateReport {

            public boolean IsOffline;
            public boolean DoUpdate;
            public boolean ShowQuestionDialog;
            public List<WorkItem> WorkItems;

            public UpdateReport() {        }

            public UpdateReport(boolean isoffline, boolean doUpdate,
                    List<WorkItem> workitems) {
                IsOffline = isoffline;
                DoUpdate = doUpdate;
                WorkItems = workitems;
            }
        }

        public static class WorkItem {

            public int TypeId;
            public String Url;
            public long LastModifiedServer;

            public WorkItem() {        }

            public WorkItem(int typeId, String url, long lastModifiedServer) {
                TypeId = typeId;
                Url = url;
                LastModifiedServer = lastModifiedServer;
            }
        }
    //some methods [....]
    } //end class UpdaterObject 
```

如果有人可以帮助我，我会很高兴。请确保并确保您的答案绝对正确，因为我无法测试它！那太好了！

这是我在 StackOverFlow 上的第一篇文章。请公平。:)

谢谢qd0r

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T03:01:52.380

从[Gson 问题 255](http://code.google.com/p/google-gson/issues/detail?id=255)开始，HTC Desire HD 在其应用程序类路径中包含了一个过时的 Gson 副本。该问题有关于使用 jarjar 重新打包您的 Gson 版本以不与预安装版本冲突的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-02T10:53:55.030

就我而言，proguard 是问题所在。禁用 proguard 或将您的模型放入 proguard 规则文件中。为我工作。

# java - 错误：不包含 Thread.class - 类文件编辑器的源代码

> ID：13369170
> 
> 赞同：1
> 
> 时间：2012-11-13T21:31:43.963
> 
> 标签：java, eclipse

第一次发帖，长期关注。等不及我的同学读到这个了（他们也使用这个网站）

我正在使用带有 Java SE 1.7 的 Eclipse Juno

我遇到了日食问题。它不会一直发生，通常仅在文件 IO 期间发生。我在 Eclipse 中使用我的调试器透视图来尝试解决一些问题（它真的是一个简单的程序）。

更新：显然新用户不允许上传屏幕截图。如果您能花时间单击链接来见证我的问题，我将不胜感激。屏幕截图链接（不是java代码）：

imgur.com/5IxI3.png

如您所见，我遇到了一个奇怪的 thread.class 问题。我什至重新安装了java。那可能是我的代码的问题吗？

感谢任何提供意见或帮助的人。在此之前我确实有大约一周的时间，所以我不只是在寻找免费的答案，只是感到沮丧。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:32:57.297

如果我正确理解您的问题，您需要附加源代码，因为 Thread 是 API 类。

从 Oracle 下载 Java 源代码（不是二进制 exe 文件）

> 转到 eclipse Yourproject --> Properties --> Java Build Path > Libraries 并展开 JRE System Library --> jre version--> rt.jar。选择源附件 ---> 指向下载的源。

阅读本[教程](http://www.cavdar.net/2008/07/14/3-ways-of-jdk-source-code-attachment-in-eclipse/)以获取更多信息。

# c# - Byte Vigenere Cipher，解密错误

> ID：13369178
> 
> 赞同：2
> 
> 时间：2012-11-13T21:32:02.873
> 
> 标签：c#, byte, vigenere

我必须编写一个对完整字节进行操作的 Vigenere 加密/解密函数（通过 tcp 加密和发送文件，然后在另一端解密）。我的加密功能似乎正在工作（或多或少，如果没有解密功能就无法真正测试它）。

这是加密函数的代码：

```
public static Byte[] encryptByteVigenere(Byte[] plaintext, string key) 
{

    Byte[] result= new Byte[plaintext.Length];

    key = key.Trim().ToUpper();

    int keyIndex = 0;
    int keylength = key.Length;

    for (int i = 0; i < plaintext.Length; i++)
    {
        keyIndex = keyIndex % keylength;
        int shift = (int)key[keyIndex] - 65;
        result[i] = (byte)(((int)plaintext[i] + shift) % 256);
        keyIndex++;
    }

    return result;
} 
```

然而，解密函数，即使以几乎相同的方式编写，也会导致错误。“试图除以零。”

解密函数代码：

```
public static Byte[] decryptByteVigenere(Byte[] ciphertext, string key)
{
    Byte[] result = new Byte[ciphertext.Length];

    key = key.Trim().ToUpper();

    int keyIndex = 0;
    int keylength = key.Length;

    for (int i = 0; i < ciphertext.Length; i++)
    {             
        keyIndex = keyIndex % keylength;
        int shift = (int)key[keyIndex] - 65;
        result[i]= (byte)(((int)ciphertext[i] + 256 - shift) % 256);
        keyIndex++;               
    }

    return result;
} 
```

错误点在 keyIndex = keyIndex % keylength; 但令我感到奇怪的是，第一个函数中的代码几乎相同，而且似乎没有造成任何麻烦。我正在接收的文件上对其进行测试，该文件在没有加密的情况下正确到达。有人可以帮我吗？

编辑：使用解密功能代码的方法/线程：

```
public void fileListenThread()
{         
    try
    {
        fileServer.Start();

        String receivedFileName = "test.dat";
        String key = (textKlucz.Text).ToUpper();

        while (true)
        {
            fileClient = fileServer.AcceptTcpClient();
            NetworkStream streamFileServer = fileClient.GetStream();
            int thisRead = 0;
            int blockSize = 1024;
            Byte[] dataByte = new Byte[blockSize];
            Byte[] dataByteDecrypted = new Byte[blockSize];

            FileStream fileStream = new FileStream(receivedFileName, FileMode.Create);
            while (true)
            {
                thisRead = streamFileServer.Read(dataByte, 0, blockSize);
                dataByteDecrypted = Program.decryptByteVigenere(dataByte, key);
                fileStream.Write(dataByteDecrypted, 0, thisRead);
                if (thisRead == 0)
                     break;
            }

            fileStream.Close();                 
        }
    }
    catch (SocketException e)
    {
        MessageBox.Show("SocketException: " + e, "Wystąpił wyjątek", MessageBoxButtons.OK, MessageBoxIcon.Error);               
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:52:29.737

好的，问题确实是发送/接收方法，而不是函数本身。我仍然不知道是什么导致了问题，但重写函数有帮助。感谢您的输入！

我把它留在这里，以防将来有人需要这样的功能......即使这是相当微不足道的事情。

干杯。

# android - 客户端-服务器套接字通信

> ID：13369180
> 
> 赞同：1
> 
> 时间：2012-11-13T21:32:08.630
> 
> 标签：android, sockets, stream

**问题**

如果我只能在客户端上使用，如何在服务器和客户端之间发送**UTF-8数据**

```
inputStream.read() 
```

?

**文档**

> 从此流中读取单个字节并将其作为 0 到 255 范围内的整数返回。如果已到达流的末尾，则返回 -1。

没有 reader.readLine() 和任何其他。（阅读器我看不到流的结尾）

请帮忙！

（完整代码：）

```
int c;
String str = new String();
while ((c = inputStream.read( )) != -1)
{
    char ch = (char)c;
    if(ch == '\n')
    {
        Log.v("", str);
        final String data = str;

        runOnUiThread(new Runnable()
        {
            @Override
            public void run()
            {
                String put[] = data.split("#");
                try
                {
                    //cmd parsing
                }
                catch(Exception e)
                {
                    //stop connection
                }
            }
        });
        str = "";
    }else{
        str += Character.toString(ch);
    }
}
//Communication error 
```

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:06:02.360

你可能想看看[这个](https://stackoverflow.com/questions/309424/read-convert-an-inputstream-to-a-string)以前的帖子。那里有几个不错的选择。该`read()`方法可以使用不同的参数重载，因此您可以读取一个字节或*n*个字节。[在此处](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStream.html)查看完整的文档。基本上，您必须读取原始字节，然后将它们转换为 ASCII 字符。另外，我很好奇为什么你不能使用`BufferedReader`或同等课程？

# perl - 使用 tsort 算法时可以更好地保留顺序吗？

> ID：13369187
> 
> 赞同：2
> 
> 时间：2012-11-13T21:32:43.093
> 
> 标签：perl, graph, tree

我正在使用该[`tsort`算法](http://alumnus.caltech.edu/~copeland/work/tsort.html)对库列表及其依赖项进行排序。在依赖项不禁止它的情况下，我希望排序顺序保持不变。此库列表不会发生这种情况：

*   这个
*   那
*   其他[那个]
*   事情[那个]

依赖项在括号中指定。`this`并且`that`没有依赖关系。`other`取决于`that`和`thing`取决于`that`和`this`。申请后`tsort`，我希望将列表输出为：

*   这个
*   那
*   其他
*   事物

订单没有变化。我得到的是：

*   那
*   其他
*   这个
*   事物

这在依赖解析方面是正确的，但未能保留原始顺序。

这是我的代码的简化版本：

```
#!/usr/bin/perl -w
use v5.10;

sub sortem {
    my %pairs;  # all pairs ($l, $r)
    my %npred;  # number of predecessors
    my %succ;   # list of successors

    for my $lib (@_) {
        my $name = $lib->[0];
        $pairs{$name} = {};
        $npred{$name} += 0;

        for my $dep (@{ $lib->[1] }) {
            next if exists $pairs{$name}{$dep};
            $pairs{$name}{$dep}++;
            $npred{$dep}++;
            push @{ $succ{$name} } => $dep;
        }
    }

    # create a list of nodes without predecessors
    my @list = grep {!$npred{$_}} keys %npred;
    my @ret;

    while (@list) {
        my $lib = pop @list;
        unshift @ret => $lib;
        foreach my $child (@{$succ{$lib}}) {
            push @list, $child unless --$npred{$child};
        }
    }

    if ( my @cycles = grep { $npred{$_} } @_ ) {
        die "Cycle detected between changes @cycles\n";
    }

    return @ret;
}

say for sortem(
    ['this',  []],
    ['that',  []],
    ['other', [qw(that)]],
    ['thing', [qw(that this)]],
); 
```

如何修改它以尽可能地保留原始顺序？

对于那些不了解 Perl 但只是想在工作中看到它的人，请将这些行粘贴到文件中并将文件提供`tsort`给以获取相同的、不保留顺序的输出：

```
that thing
this thing
that other
that this 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:46:53.563

让我们像这样编写最后一个循环：

```
while (my @list = grep { !$npred{$_} } keys %npred) {
  push(@ret, @list);  # we will change this later
  for my $lib (@list) {
    delete $npred{$lib};
    for my $child ( @{ $succ{$ib} } ) {
      $npred{$child}--;
    }
  }
}

if (%npred) {
  ...we have a loop...
} 
```

即，我们进行扫描以`keys %npred`寻找零。当`grep`没有返回任何元素时，我们要么完成要么有一个循环。

为了使拓扑排序在一些初始排序方面稳定，我们只需更改`push(@ret, @list)`为：

```
push(@ret, sort {...} @list); 
```

其中`{...}`是指定初始排序的比较函数。

更新一个完整的工作示例：

```
use strict;
use warnings;
use Data::Dump qw/pp dd/;

my %deps = (
  # node => [ others pointing to node ]
  this => [],
  that => [],
  other => [qw/that/],
  thing => [qw/that this other/],
  yowza => [qw/that/],
);

# How to interpret %deps as a DAG:
#
# that ---> other ---+
#   |                V
#   +------------> thing
#   |                ^
#   +---> yowza      |
#                    |
# this --------------+
#
# There are two choices for the first node in the topological sort: "this" and "that".
# Once "that' has been chosen, "yowza" and "other" become available.
# Either "yowza" or "thing" will be the last node in any topological sort.

sub tsort {
  my ($deps, $order) = @_;

  # $deps is the DAG
  # $order is the preferred order of the nodes if there is a choice

  # Initialize counts and reverse links.

  my %ord;
  my %count;
  my %rdep;
  my $nnodes = scalar(keys %$deps);
  for (keys %$deps) {
    $count{$_} = 0;
    $rdep{$_} = [];
    $ord{$_} = $nnodes;
  }

  for my $n (keys %$deps) {
    $count{$n}++ for (@{ $deps->{$n} });
    push(@{$rdep{$_}}, $n) for (@{ $deps->{$n} });
  }

  for (my $i = 0; $i <= $#$order; $i++) {
    $ord{ $order->[$i] } = $i;
  }

  my @tsort;

  # pp(%$deps);
  # pp(%rdep);

  while (1) {
    # print "counts: ", pp(%count), "\n";
    my @list = grep { $count{$_} == 0 } (keys %count);
    last unless @list;
    my @ord = sort { $ord{$a} <=> $ord{$b} } @list;
    push(@tsort, @ord);
    for my $n (@list) {
      delete $count{$n};
      $count{$_}-- for (@{ $rdep{$n} });
    }
  }

  return @tsort;
}

sub main {
  my @t1 = tsort(\%deps, [qw/this that other thing yowza/]);
  print "t1: ", pp(@t1), "\n";

  my @t2 = tsort(\%deps, [qw/this that yowza other thing/]);
  print "t2: ", pp(@t2), "\n";

  my @t3 = tsort(\%deps, [qw/that this yowza other thing/]);
  print "t3: ", pp(@t3), "\n";
}

main(); 
```

输出是：

```
t1: ("this", "that", "other", "yowza", "thing")
t2: ("this", "that", "yowza", "other", "thing")
t3: ("that", "this", "yowza", "other", "thing") 
```

# excel - Excel VBA合并函数中的单元格

> ID：13369195
> 
> 赞同：3
> 
> 时间：2012-11-13T21:33:40.430
> 
> 标签：excel, vba

我编写了一个粗略的函数来根据范围选择和连接单元格。

```
Function GetSkills(CellRef As String, CellRefEnd As String, Delimiter As String)

    Dim CellStart As Range
    Dim CellEnd As Range
    Dim LoopVar As Long
    Dim StartRow As Long
    Dim EndRow As Long
    Dim Concat As String
    Dim Col As Long

    Set CellStart = Worksheets(1).Cells.Range("B" & CellRef)
    Set CellEnd = Worksheets(1).Cells.Range("B" & CellRefEnd)

    Col = CellStart.Column
    StartRow = CellStart.Row
    EndRow = CellEnd.Row

    With Range(CellStart, CellEnd)
        .Merge
        .WrapText = True
    End With

    Concat = ""

    For LoopVar = StartRow To EndRow
        Concat = Concat & Cells(LoopVar, Col).Value
        If LoopVar <> EndRow Then Concat = Concat & Delimiter & " "
    Next LoopVar

    GetSkills = Concat

End Function 
```

在其中我试图合并单元格，当我运行该函数时，我得到一个提示：

> 选择包含多个数据值。合并到一次单元格将仅保留左上角的大部分数据

我单击“确定”，Excel 崩溃、重新启动并再次提示对话框。是否有另一种方法可以使用 VBA 合并单元格块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:22:32.303

通常合并单元格不是一个好主意。这是一种外观格式化方法，可能会对 VBA 代码造成严重破坏。

除了免责声明，还有一些建议

*   鉴于您想要更改范围，请使用 Sub 而不是 Function
*   用于`Application.DisplayAlerts`抑制合并单元格消息
*   您可以显着减少代码

**代码**

```
Sub Test()
Call GetSkills(2, 4, ",")
End Sub

Sub GetSkills(CellRef As String, CellRefEnd As String, Delimiter As String)
Dim CellStart As Range
Dim CellEnd As Range
Dim Concat As String

Application.DisplayAlerts = False
Set CellStart = Worksheets(1).Cells.Range("B" & CellRef)
Set CellEnd = Worksheets(1).Cells.Range("B" & CellRefEnd)

Concat = Join(Application.Transpose(Range(CellStart, CellEnd)), Delimiter)

With Range(CellStart, CellEnd)
    .Merge
    .WrapText = True
    .Value = Concat
End With
Application.DisplayAlerts = True
End Sub 
```

# iphone - 尝试为标签栏控制器视图创建导航栏后退按钮

> ID：13369197
> 
> 赞同：0
> 
> 时间：2012-11-13T21:33:56.820
> 
> 标签：iphone, ios, view, tabs

我有一个标签栏控制器。从一个视图我想通过一个按钮转到另一个视图，我已经完成了。进入该页面后，我想使用导航栏返回。这就是问题。我如何让它回到标签栏控制器页面？谢谢垫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:42:36.667

您可以按如下方式排列视图控制器：

```
Tab bar controller
    Navigation Controller
        View Controller 1 - button to go View Controller 2 using segue
        View Controller 2 
```

因此，`View Controller 2`将有一个后退按钮转到其上一个视图控制器。

# sql - Select 语句中的 SQL 函数调用以填充 Reporting Services 报告

> ID：13369198
> 
> 赞同：6
> 
> 时间：2012-11-13T21:33:57.827
> 
> 标签：sql, sql-server-2008

我试图为数据集中的每个数字返回一个特定的数字，我编写了一个 SQL 函数，现在我需要能够在函数中为数据集中的每个数字进行计算。你能指出我正确的方向吗？我不知道我是否应该创建一个临时表然后加入它，我是否应该在 Reporting Services 中编写一个 vb 函数并这样做，或者我是否只需要重新开始。

这是函数 USE [CUDatabase] GO

```
/****** Object:  UserDefinedFunction [dbo].[fn_Check_Digit]    Script Date: 11/13/2012    14:40:59 ******/ SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE FUNCTION [dbo].[fn_Check_Digit]
(
    @unique_NBR VARCHAR(MAX)
)
RETURNS @Values TABLE
(
    check_digit int,
    unique_nbr int
)
AS

  BEGIN

  -- set up working variables
DECLARE @LEN AS INT
DECLARE @INDEX AS INT
DECLARE @CHAR AS VARCHAR(1)
DECLARE @POSITION AS INT
DECLARE @VALUE AS INT
DECLARE @SUBTOTAL AS INT
DECLARE @BASE AS INT
DECLARE @CHECK_DIG AS INT
SET @LEN = LEN(@MEMBER_NBR)
SET @INDEX = 1
SET @POSITION = 0
SET @VALUE = 0
SET @SUBTOTAL = 0
SET @BASE =0
SET @CHECK_DIG = 0

  -- iterate until we have no more characters to work with
  WHILE @index<=@len
BEGIN
    SET @char = SUBSTRING(@unique_NBR,(@len-@POSITION),1)
    select @value = (SELECT scd.dig_mul_value
                    FROM CUDatabase.DBO.sdcCheckDigit SCD
                    WHERE SCD.dig_place = @index)

    set @value = @value * @char
    SET @index = @index + 1
    SET @POSITION = @POSITION + 1
    SET @SUBTOTAL = @VALUE + @SUBTOTAL

END  
SET @BASE = ((@SUBTOTAL/10)+1)*10
    IF @BASE -@SUBTOTAL = 10
        SET @CHECK_DIG = 0  
    ELSE
        SET @CHECK_DIG = @BASE-@SUBTOTAL

INSERT INTO @Values (check_digit, unique_nbr) VALUES (CAST(@CHECK_DIG AS         int),@unique_NBR)

RETURN 

END    

GO 
```

该函数的 select 语句中的表包含以下值： dig_place dig_mul_value 1 7 2 3 3 1 4 7 5 3 6 1 7 7 8 3 9 1

这是数据集，我需要遍历每个 unique_nbr 并返回校验位。

```
`SELECT I.D1NAME,
    IA.ADDRESS_ID,
    A.ADDRESS1,
    A.ADDRESS2,
    A.ADDRESS3,
    A.CITY,
    A.STATE,
    A.ZIP_STR,
    TL.COMPANY_NAME,
    TL.COMPANY_DESCRIPTION,
    TL.EFFECTIVE_ENTRY_DATE,
    TL.AMOUNT,
    TL.ACCOUNT_NBR,
    TL.ACCT_DBRN
FROM MEMBERSHIPPARTICIPANT MP 
    JOIN  INDIVIDUAL I ON
        I.INDIVIDUAL_ID = MP.INDIVIDUAL_ID
        AND I.DL_LOAD_DATE = MP.DL_LOAD_DATE
    JOIN INDIVIDUALADDRESS IA ON
        IA.INDIVIDUAL_ID = I.INDIVIDUAL_ID
        AND IA.IS_PRIMARY = 1
        AND IA.DL_LOAD_DATE = I.DL_LOAD_DATE
    JOIN ADDRESS A ON
        A.ADDRESS_ID = IA.ADDRESS_ID
        AND A.DL_LOAD_DATE = IA.DL_LOAD_DATE
    JOIN (SELECT EFT.unique_NBR,
                EFT.ACCOUNT_NBR,
                EFT.ACH_SDC_NBR,
                EFT.COMPANY_NAME,
                EFT.COMPANY_DESCRIPTION,
                EFT.INDIVIDUAL_ID_NBR,
                EFT.INDIVIDUAL_NAME,
                EFT.XPTIMESTAMP,
                EFT.STANDARD_ENTRY_CLASS,
                EFT.ROUTING_NUMBER,
                EFT.ACCT_DBRN,
                EFT.AMOUNT,
                EFT.EFFECTIVE_ENTRY_DATE
            FROM EFTTRANSACTION EFT
            WHERE EFT.ROUTING_NUMBER = 999999999
                AND EFT.STANDARD_ENTRY_CLASS IN ('WEB','TEL')
                AND EFT.EFFECTIVE_ENTRY_DATE >= '11/01/2012') TL
ON T  L.unique_NBR = MP.unique_NBR
WHERE MP.DL_LOAD_DATE = (SELECT MAX(DL_LOAD_DATE) FROM MEMBERSHIPPARTICIPANT)
    AND MP.PARTICIPATION_TYPE = 101
    --AND MP.unique_NBR = 9835
ORDER BY MP.unique_NBR` 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T22:02:25.660

你所要做的就是调用你已经创建的SQL函数，即

```
SELECT I.D1NAME,
    IA.ADDRESS_ID,
    A.ADDRESS1,
    A.ADDRESS2,
    A.ADDRESS3,
    A.CITY,
    A.STATE,
    A.ZIP_STR,
    TL.COMPANY_NAME,
    TL.COMPANY_DESCRIPTION,
    TL.EFFECTIVE_ENTRY_DATE,
    TL.AMOUNT,
    TL.ACCOUNT_NBR,
    TL.ACCT_DBRN,
    dbo.fn_Check_Digit(L.unique_NBR) CheckDigit
FROM ..... 
```

# c# - 根据标签控件值获取gridview的rowindex

> ID：13369208
> 
> 赞同：1
> 
> 时间：2012-11-13T21:35:05.417
> 
> 标签：c#, asp.net

我的`label control`页面上有一个，下面`label control`有一个`Gridview`。标签控件中存在的值也存在于`Gridview`. 标签控件具有这样的值

```
3244|Yellow Ink| Test Link 
```

在gridview中，我也有一个值3244

```
3244    yello Ink   Test Link
3255    Green Link  Test2 
```

**页面加载**后，我希望代码中的**行索引为 3244**。他们有什么办法吗。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:07:01.350

不知道您拥有什么类型的数据源，一种方法是使用 LINQ，如下所示：

```
protected void Page_Load(object sender, EventArgs e)
{
    // Fetch the text from your label. (I'm assuming that you have only one label with the text "3244|Yellow Ink| Test Link".
    string text = Label1.Text;

    // Find the first row or return null if not found.
    var resultRow = GridView1.Rows.Cast<GridViewRow>().FirstOrDefault(row =>
    {
        // Get the id (that I'm guessing is the first (0-index) column/cell)
        var id = row.Cells[0].Text;

        // Return true/false if the label text starts with the same id.
        return text.StartsWith(id);
    });

    if (resultRow != null)
    {
        var index = resultRow.RowIndex;
    }
} 
```

较短的版本如下所示：

```
var resultRow = GridView1.Rows.Cast<GridViewRow>()
    .FirstOrDefault(r => text.StartsWith(r.Cells[0].Text)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-09T11:12:45.153

在填充 gridView 后的页面加载中，您可以这样做：

```
 String searchValue = "3244 ";
    int rowIndex = -1;
    foreach (GridViewRow row in GridViewID.Rows)
    {
        if (row.Cells[0].Text.ToString().Equals(searchValue))
        {
            rowIndex = row.RowIndex;
            break;
        }
    }
    int YourIndex = rowIndex; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-01T08:51:12.933

```
 protected void btnJobAppSelected_Click(object sender, EventArgs e)
{
    foreach (GridViewRow row in GridViewJobApplications.Rows)
    {

        int rowIndex = ((sender as LinkButton).NamingContainer as GridViewRow).RowIndex;

        LinkButton btnJobAppSelected = (LinkButton)GridViewJobApplications.Rows[rowIndex].FindControl("btnJobAppSelected");

    }
} 
```**

# angularjs - 配置 Yeoman 以构建非 root 项目

> ID：13369210
> 
> 赞同：5
> 
> 时间：2012-11-13T21:35:08.070
> 
> 标签：angularjs, compass-sass, gruntjs, yeoman

我可能遗漏了一些明显的东西，但我真的无法通过查看 GitHub 上的文档和问题来弄清楚 -

我正在开发一个 AngularJS 项目，该项目将部署在服务器上的特定子目录（即不是根目录）上。我正在使用 Yeoman.io，并尝试对其进行配置，以便该应用程序是独立的，并且不依赖于“/images”等绝对路径。每次尝试弄乱 Grunt 文件或 Compass 配置都会导致构建损坏。图像和精灵的路径是错误的 - 有时是错误的目录，有时是错误的文件名（没有修订前缀）。

有人对此有很好的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T09:48:48.013

因此，如果我对您的理解正确，您希望在系统的特定路径上为您的 Angular 项目提供服务。

在**grunt.js**中，我注册了一个启动我的（本地）服务器的服务器任务：

```
grunt.registerTask('server', 'Start server', function() {
    var done = this.async();
    var app = require('./app.js');
    var http = require('http');
    // Start server
    http.createServer(app).listen(app.get('port'), function () {
        console.log("Express server listening on port " + app.get('port'));
    }).on('close', done);
}); 
```

**app.js**包含服务器配置：

```
var express = require('express'),
    path = require('path');

var app = module.exports = express();

// Configuration

app.configure(function () {
    app.set('port', process.env.PORT || 4000);
    app.use(express['static'](path.join(__dirname, 'dist')));
}); 
```

在我的示例中，我在目录**dist**上为项目提供服务，但这可以是任何东西。

# android - 无法让广播接收器处理具有多个操作的意图

> ID：13369212
> 
> 赞同：1
> 
> 时间：2012-11-13T21:35:13.263
> 
> 标签：android, android-intent

我很难让 BroadcastReceiver 处理我的 IntentService 响应。该服务处理多个不同的操作并返回一个操作类型。然而，接收器似乎永远不会接听它。确实调用了意图，因为我可以在 IntentService 中调试并设置断点并看到操作已成功处理。我只是从来没有看到用适当的数据更新文本框或看到广播接收器被调用。

**意向服务**

```
protected void onHandleIntent(Intent intent) {

        String action = intent.getAction();
        // Data the service was called with.
        Bundle incomingData = intent.getExtras();

        String key = incomingData.getString(KEY_APPKEY);
        String secret = incomingData.getString(KEY_SECRET);
        String collection = incomingData.getString(KEY_COLLECTION);

        CheckinManager cm = new CheckinManager(this.getApplicationContext(),key,secret,collection);

        Intent broadcastIntent = new Intent();

        broadcastIntent.addCategory(Intent.CATEGORY_DEFAULT);

        if (action == ACTION_GET_POI) {
            Double lat = incomingData.getDouble(KEY_LATITUDE);
            Double lon = incomingData.getDouble(KEY_LONGITUDE);

            ArrayList<POI> nearbyPOIs = new ArrayList<POI>();
            //broadcastIntent.setAction(ACTION_GET_POI_PROCESSED);
            broadcastIntent.setAction("com.msalinger.checkinmanager.CheckinService.getPOIProcessed");
            try {
                nearbyPOIs = cm.getPOI(lat, lon);

                broadcastIntent.putExtra(OUT_KEY_RESULT, true);
                broadcastIntent.putExtra(OUT_KEY_ERROR, "");
                broadcastIntent.putParcelableArrayListExtra(OUT_KEY_POILIST, nearbyPOIs);
            } catch (JSONException ex) {
                Log.d(TAG,ex.getMessage() + "\n" + ex.getStackTrace());
                broadcastIntent.putExtra(OUT_KEY_RESULT, false);
                broadcastIntent.putExtra(OUT_KEY_ERROR, ex.getMessage());
            }

        }
        else if (action == ACTION_CHECK_IN) {
            // Do something
        }
        else if (action ==  ACTION_GET_CHECKINS) {
            // Do Something
        }
        else if (action == ACTION_FIND_NEARBY_POIS_WITH_CHECKINS) {
            // Do Something 
        }    

        sendBroadcast(broadcastIntent);
} 
```

**广播接收器作为主活动的子类**

```
public class CheckinReceiver extends BroadcastReceiver {

        private final static String INTENT_BASE_URI = "com.msalinger.checkinmanager.CheckinService";

        private final static String ACTION_GET_POI_PROCESSED = ".getPOIProcessed";
        private final static String ACTION_CHECK_IN_PROCESSED = ".checkInProcessed";
        private final static String ACTION_GET_CHECKINS_PROCESSED = ".getCheckinsProcessed";
        private final static String ACTION_FIND_NEARBY_POIS_WITH_CHECKINS_PROCESSED = ".findNearbyPOIsWithCheckinsProcessed";

        @Override
        public void onReceive(Context context, Intent intent) {
            if (intent.getAction().equals("com.msalinger.checkinmanager.CheckinService.getPOIProcessed")) {
                tv = (TextView)findViewById(R.id.textBox1);

                Bundle incomingData = intent.getExtras();
                String st = "";

                if (incomingData.getBoolean("result")) {
                    ArrayList<POI> poiList = incomingData.getParcelableArrayList("poList");
                    st = printPOI(poiList);
                }
                else {
                    st = incomingData.getString("error");
                }
            }
            else if (intent.getAction().equals(INTENT_BASE_URI + ACTION_CHECK_IN_PROCESSED)) {

            }
            else if (intent.getAction().equals(INTENT_BASE_URI + ACTION_GET_CHECKINS_PROCESSED)) {

            }
            else if (intent.getAction().equals(INTENT_BASE_URI + ACTION_FIND_NEARBY_POIS_WITH_CHECKINS_PROCESSED)) {

            }
        }

    } 
```

**显现**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.msalinger.checkinmanagerdemo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.INTERNET"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <service 
            android:enabled="true" 
            android:name="com.msalinger.checkinmanager.CheckinService" />
        <receiver
            android:name=".CheckinReceiver">
            <intent-filter>
                <action android:name="com.msalinger.checkinmanager.CheckinService.getPOIProcessed" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.msalinger.checkinmanager.CheckinService.checkInProcessed" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.msalinger.checkinmanager.CheckinService.getCheckinsProcessed" />
            </intent-filter>
            <intent-filter>
                <action android:name="com.msalinger.checkinmanager.CheckinService.findNearbyPOIsWithCheckinsProcessed" />
            </intent-filter>
        </receiver>        
    </application>
</manifest> 
```

我究竟做错了什么？请注意，IntentService 作为 Android 类库的一部分存在，其包与 Main 活动不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:45:47.263

因为接收者的存在是为了更新activity中的数据，所以应该在activity恢复时注册，在activity暂停时取消注册。它不应该在清单中（参见[文档](http://developer.android.com/reference/android/content/ContextWrapper.html#registerReceiver%28android.content.BroadcastReceiver,%20android.content.IntentFilter%29)）。

如果不是这种情况，它不应该是您的活动的子类。

在所有情况下，我认为您的 Receiver 没有被调用，因为它在清单中没有正确的名称。它可能是这样的：`.MainActivity$CheckinReceiver`。

# c# - 在 C# 中获取文件和文件夹的透明外壳图标

> ID：13369213
> 
> 赞同：3
> 
> 时间：2012-11-13T21:35:14.670
> 
> 标签：c#, windows, com, pinvoke, explorer

我目前正在开发一个小型库，使您能够从文件和文件夹中获取图标。现在，我不在乎它是否只适用于 win8+（因为那是我要使用它的地方），但是，我遇到了一个关于透明度的小问题。如果你看一下下面的图片：

![差异](../Images/588d059acca9575f87d781f40586e301.png)

我生成的（从我的库中）在左侧，Windows 资源管理器在右侧。
现在，您可能会看到，首先在我生成的那条的右上角有 2 条黑线，其次，背景颜色有所不同。所以我想知道的是这个；有没有办法获得与 Windows 资源管理器使用的完全相同的图像，或者我只是做错了？

我的代码（结构/外部等除外）在下面，整个代码[在这里](http://monobin.com/1515/)。

```
public static class Icon
{
    public static Image GetIcon(string fileName, int size)
    {
        IShellItem shellItem;
        Shell32.SHCreateItemFromParsingName(fileName, IntPtr.Zero, Shell32.IShellItem_GUID, out shellItem);

        IntPtr hbitmap;
        ((IShellItemImageFactory)shellItem).GetImage(new SIZE(size, size), 0x0, out hbitmap);

        // get the info about the HBITMAP inside the IPictureDisp
        DIBSECTION dibsection = new DIBSECTION();
        Gdi32.GetObjectDIBSection(hbitmap, Marshal.SizeOf(dibsection), ref dibsection);
        int width = dibsection.dsBm.bmWidth;
        int height = dibsection.dsBm.bmHeight;

        // zero out the RGB values for all pixels with A == 0 
        // (AlphaBlend expects them to all be zero)
        for (int i = 0; i < dibsection.dsBmih.biWidth * dibsection.dsBmih.biHeight; i++)
        {
            IntPtr ptr = dibsection.dsBm.bmBits + (i * Marshal.SizeOf(typeof(RGBQUAD)));
            var rgbquad = (RGBQUAD)Marshal.PtrToStructure(ptr, typeof(RGBQUAD));
            if (rgbquad.rgbReserved == 0)
            {
                rgbquad.rgbBlue = 0;
                rgbquad.rgbGreen = 0;
                rgbquad.rgbRed = 0;
            }
            else
            {
                ;
            }
            Marshal.StructureToPtr(rgbquad, ptr, false);
        }

        // create the destination Bitmap object
        Bitmap bitmap = new Bitmap(width, height, PixelFormat.Format32bppArgb);

        // get the HDCs and select the HBITMAP
        Graphics graphics = Graphics.FromImage(bitmap);

        IntPtr hdcDest = graphics.GetHdc();
        IntPtr hdcSrc = Gdi32.CreateCompatibleDC(hdcDest);
        IntPtr hobjOriginal = Gdi32.SelectObject(hdcSrc, hbitmap);

        // render the bitmap using AlphaBlend
        BLENDFUNCTION blendfunction = new BLENDFUNCTION(BLENDFUNCTION.AC_SRC_OVER, 0, 0xFF, BLENDFUNCTION.AC_SRC_ALPHA);
        Gdi32.AlphaBlend(hdcDest, 0, 0, width, height, hdcSrc, 0, 0, width, height, blendfunction);

        // clean up
        Gdi32.SelectObject(hdcSrc, hobjOriginal);
        Gdi32.DeleteDC(hdcSrc);
        graphics.ReleaseHdc(hdcDest);
        graphics.Dispose();
        Gdi32.DeleteObject(hbitmap);

        return bitmap;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:45:41.160

似乎逐像素复制是解决方案。以下似乎是像素完美的资源管理器之一。

```
 public static Image GetIcon(string fileName, int size)
    {
        IShellItem shellItem;
        Shell32.SHCreateItemFromParsingName(fileName, IntPtr.Zero, Shell32.IShellItem_GUID, out shellItem);

        IntPtr hbitmap;
        ((IShellItemImageFactory)shellItem).GetImage(new SIZE(size, size), 0x0, out hbitmap);

        // get the info about the HBITMAP inside the IPictureDisp
        DIBSECTION dibsection = new DIBSECTION();
        Gdi32.GetObjectDIBSection(hbitmap, Marshal.SizeOf(dibsection), ref dibsection);
        int width = dibsection.dsBm.bmWidth;
        int height = dibsection.dsBm.bmHeight;

        // create the destination Bitmap object
        Bitmap bitmap = new Bitmap(width, height, PixelFormat.Format32bppArgb);

        for (int x = 0; x < dibsection.dsBmih.biWidth; x++)
        {
            for (int y = 0; y < dibsection.dsBmih.biHeight; y++)
            {
                int i = y * dibsection.dsBmih.biWidth + x;
                IntPtr ptr = dibsection.dsBm.bmBits + (i * Marshal.SizeOf(typeof(RGBQUAD)));
                var rgbquad = (RGBQUAD)Marshal.PtrToStructure(ptr, typeof(RGBQUAD));

                if (rgbquad.rgbReserved != 0)
                    bitmap.SetPixel(x, y, Color.FromArgb(rgbquad.rgbReserved, rgbquad.rgbRed, rgbquad.rgbGreen, rgbquad.rgbBlue));
            }
        }

        Gdi32.DeleteObject(hbitmap);

        return bitmap;
    } 
```

# r - 叠加直方图和 xyplot

> ID：13369216
> 
> 赞同：3
> 
> 时间：2012-11-13T21:35:43.503
> 
> 标签：r, histogram, lattice

我想使用 r 的 lattice 包叠加一个直方图和一个表示累积分布函数的 xyplot。

我尝试使用自定义面板功能来完成此任务，但似乎无法做到这一点——我认为一个情节是单变量的，一个情节是双变量的。

这是我要垂直堆叠的两个图的示例：

```
set.seed(1)
x <- rnorm(100, 0, 1)

discrete.cdf <- function(x, decreasing=FALSE){
    x <- x[order(x,decreasing=FALSE)]
    result <- data.frame(rank=1:length(x),x=x)
    result$cdf <- result$rank/nrow(result)
    return(result)
}

my.df <- discrete.cdf(x)

chart.hist <- histogram(~x, data=my.df, xlab="")
chart.cdf <- xyplot(100*cdf~x, data=my.df, type="s",
                    ylab="Cumulative Percent of Total")

graphics.off()
trellis.device(width = 6, height = 8)
print(chart.hist, split = c(1,1,1,2), more = TRUE)
print(chart.cdf, split = c(1,2,1,2)) 
```

![堆积地块](../Images/e3ba4ec1a00e0398e3bcd2e01992e234.png)

我希望这些叠加在同一个框架中，而不是堆叠。

以下代码**不起作用**，我尝试过的任何简单变体也不起作用：

```
xyplot(cdf~x,data=cdf,
          panel=function(...){
              panel.xyplot(...)
              panel.histogram(~x)
          }) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T08:18:26.337

您的自定义面板功能走在了正确的轨道上。诀窍是将正确的参数传递给`panel.`- 函数。对于`panel.histogram`，这意味着*不*传递公式并为参数提供适当的值`breaks`：

**编辑**y 轴和`type`绘图上的正确百分比值

```
xyplot(100*cdf~x,data=my.df,
          panel=function(...){
              panel.histogram(..., breaks = do.breaks(range(x), nint = 8),
                type = "percent")
              panel.xyplot(..., type = "s")
          }) 
```

![在此处输入图像描述](../Images/ad99fc323713374f00e642c538531761.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T22:22:08.083

这个答案只是一个占位符，直到有更好的答案出现。

包中的`hist()` 函数`graphics`有一个名为`add`. 以下以“经典”方式执行您想要的操作：

```
plot( my.df$x, my.df$cdf * 100, type= "l" )
hist( my.df$x, add= T ) 
```

# phpmyadmin - 拒绝访问 phpmyadmin

> ID：13369217
> 
> 赞同：0
> 
> 时间：2012-11-13T21:35:42.843
> 
> 标签：phpmyadmin, apache2

我今天刚刚安装了 apache2 服务器 php5、mysql 和 phpmyadmin，我无法通过 localhost/myphpadmin 访问 myphpadmin 被拒绝。

我首先更改了文件夹 /etc/apache2/conf.d/phpmyadmin.conf 以允许 127.0.0.1 见下文

```
 # phpMyAdmin default Apache configuration

    Alias /****** /usr/share/phpmyadmin

    <Directory /usr/share/phpmyadmin>
        Options FollowSymLinks
        DirectoryIndex index.php

        <IfModule mod_php5.c>
            AddType application/x-httpd-php .php

            php_flag magic_quotes_gpc Off
            php_flag track_vars On
            php_flag register_globals Off
            php_admin_flag allow_url_fopen Off
            php_value include_path .
            php_admin_value upload_tmp_dir /var/lib/phpmyadmin/tmp
            php_admin_value open_basedir /usr/share/phpmyadmin/:/etc/phpmyadmin/:/var/lib/phpmyadmin/
        </IfModule>

        Order Deny,Allow
            Deny from all
            Allow from 127.0.0.1

    </Directory>

[...] 
```

然后我还更改了 /usr/share/phpmyadmin/config.sample.inc.php 中的规则，以使 [AllowNoPassword] 为真。

我不知道该怎么做才能让 myphpadmin 访问 apache2？

谢谢您的答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T03:40:27.050

你输入的是*localhost/myphpadmin*还是*localhost/phpmyadmin* ..??

其次，在将文件重命名为*config.inc.php之前，更改**config.sample.inc.php*中的规则不会得到任何东西

 *第三，如果您这样做是为了了解事情是如何工作的，那很好，但是如果您想进行一些认真的开发，那么恕我直言，您应该尝试[xampp](http://www.apachefriends.org/en/xampp.html)（也适用于 linux 和 mac），因为它可以让您摆脱环境设置的痛苦..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-22T17:24:31.540

我成功解决了这个问题。

所以我的设置是：CentOS 8、Apache 2.4.37、phpmyadmin 5.0.4、php 8.0.0

1.  我按照[这个](https://www.howtoforge.com/install-and-secure-phpmyadmin-on-centos-8/)指南在 CentOS 8 上安装 phpmyadmin。

2.  然后我编辑了文件 phpmyadmin.conf，位于目录 /etc/httpd/conf.d

```
Alias /phpmyadmin/ /usr/share/phpmyadmin/
Alias /phpmyadmin/ /usr/share/phpMyAdmin/

<Directory /usr/share/phpmyadmin/>
       AddDefaultCharset UTF-8
       Require ip 127.0.0.1
       Require ip 192.118.1.0/15
 </Directory> 
```

*注意：我的 IP 是 192.118.1.123。在配置中检查它...学习规则。我希望这会对某人有所帮助。*

# python - python中的错误：列表分配索引超出范围

> ID：13369218
> 
> 赞同：0
> 
> 时间：2012-11-13T21:35:42.297
> 
> 标签：python

我到处搜索，即使有几个关于这个错误的问题和答案，我也找不到解决问题的解决方案

我正在从一个包含字母和数字的文件中读取数据，并且我正在根据该文件中的值填充我的矩阵。例如：字母和数字的文件描述...表：

```
 a b c d 
a 1 2 5 6
b 5 6 3 4 
c 3 2 1 4 
d 2 4 6 8 
```

这是代码

```
matrix = [[0 for j in range(4)] for i in range(4)]
i = 0
j = 0

for line in file:
   for a in line:
      if is_number(a):
         matrix[i][j] = int(a)
         j+= 1
      if matrix.count(0) < 2: #since matrix already populated with zeroes. it shouldn't have 
                               #many per program specifications, that's why I use this 
                               #conditional to increment i and reset j back to 0
         i += 1
         j = 0

file.close() 
```

我不明白为什么我不断收到这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T23:47:50.607

我看到了两种可能的方式，您最终可能会在代码中出现 IndexError。

第一个问题的出现是因为您遍历正在阅读的文件的方式。你的代码：

```
for line in file:
    for a in line:
        if is_number(a):
            # do stuff 
```

将文件中的一行读入变量`line`. 然后，每个字符都存储在变量中`a`，并检查它是否为数字。如果您正在读取的任何整数大于 9，您将看到一个，`IndexError`因为它会将每个数字计为一个单独的数字，从而导致您最终用完预分配数组中的空间。

一个可能的解决方法是更改​​该行：

```
for a in line: 
```

到

```
for a in line.split() 
```

这会将行拆分为单词列表（即，由空格分隔的所有内容的新条目）。所以，`"6 12 4 5"`将变成`[6,12,4,5]`，这样你就不会分别计算 12 中的 1 和 2。

我在您的代码中看到的第二个问题是：

```
if matrix.count(0) < 2: 
```

如果您的输入文件曾经包含一个零，这将导致该行在循环的一次迭代中保持正确的时间比您想要的要长。一个可能的解决方法是将行更改为：

```
if j == len(matrix[0]) - 1: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:42:24.967

尝试这样的事情：

```
with open("data1.txt") as f:
    next(f)                  #skip the first line
    lis=[map(int,x.split()[1:]) for x in f]  #use x.split()[1:] to remove the alphabet
    print lis 
```

**输出：**

```
[[1, 2, 5, 6], [5, 6, 3, 4], [3, 2, 1, 4], [2, 4, 6, 8]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T22:06:42.360

如果您知道输入文件已经具有正确的矩阵（逐行）布局，您可以使用以下内容：

```
matrix = filter(lambda x: len(x)>0, [[int(a) for a in l.split() if is_number(a)] for l in file]) 
```

如果您不能从输入布局中获得任何期望，您可以尝试：

```
data = open("test").read()
l = filter(lambda x: is_number(x), data.replace("\n"," ").split())
width = int(math.sqrt(len(l)))
print [[int(l[i+width*j]) for i in range(width)] for j in range(width)] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T21:37:54.413

您在第一行代码中构建了一个 4x4 矩阵，但您的数据是一个 6x6 矩阵。当您尝试在第 0 行的索引 4 处存储一个元素时，您会得到一个`IndexError`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T21:38:24.460

问题在这里：

```
matrix = [[0 for j in range(4)] for i in range(4)] 
```

您的矩阵是 6x6，但您的代码仅补偿 4x4 矩阵。

# actionscript-3 - 使用 Flash 和 AS3 处理人脸图像

> ID：13369223
> 
> 赞同：1
> 
> 时间：2012-11-13T21:36:01.300
> 
> 标签：actionscript-3, flash, animation, image-processing

每个人。这不是一个具体的技术问题，而是关于我应该遵循哪些步骤的一些指导。

问题是我已经有一年多没有使用 Flash了，而且我很生疏，但是现在，在工作中，我需要创建一个应用程序来拍照，检测所述照片中的人脸，然后应用一定的动画效果。例如拍打脸，所以检测到的脸会左右摇晃，或者可能类似于 Fatify 应用程序，它会拍照，使人看起来很胖，然后你可以在任何地方触摸它来查看它动画。你明白了。

所以，我的主要问题是，即使在做了一些广泛的研究之后，我仍然不清楚什么是最好的方法，或者哪个是在检测到的面部上完成动画效果的最佳工具。我已经阅读了有关 Joa Ebert 的图像处理库的信息，但这似乎已经被遗忘了很长一段时间，因为我已经离开 Flash 世界很长一段时间了，我不知道是否有任何新奇之处这可能是我正在寻找的。我也看过无数的图像处理博客文章和教程，但大部分都是简单的东西，并不真正适用于我需要的东西。

因此，总而言之，如果有人能指出我应该研究的资源或主题，我会非常感激，这可能对我需要完成的事情有用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:38:36.377

您应该使用 OpenCV。该库非常广泛，并且已被移植以支持多种语言。OpenCV 有一个用于面部跟踪的 api。我们之前在工作室中将它用于简单的面部跟踪游戏。

这些链接有点过时，但应该让您走上正确的轨道。

[http://www.francois-tarlier.com/blog/marilena-opencv-port-to-actionscript-3-as3-flash/](http://www.francois-tarlier.com/blog/marilena-opencv-port-to-actionscript-3-as3-flash/)

[http://www.marcpelland.com/2009/03/16/face-detection-opencv-in-as3/](http://www.marcpelland.com/2009/03/16/face-detection-opencv-in-as3/)

# solr - Solr DIH 中的联接查询和嵌入式实体有什么区别？

> ID：13369226
> 
> 赞同：1
> 
> 时间：2012-11-13T21:36:24.713
> 
> 标签：solr, dataimporthandler, dih

我正在尝试使用 Solr 的数据导入处理程序跨多个表索引数据。DIH 上的[官方 wiki](http://wiki.apache.org/solr/DataImportHandler)建议使用嵌入式实体来链接多个表，如下所示：

```
<document>
    <entity name="item" pk="id" query="SELECT * FROM item">
        <entity name="member" pk="memberid" query="SELECT * FROM member WHERE memberid='${item.memberid}'>
        </entity>
    </entity>
</document> 
```

另一种有效的方法是：

```
<document>
    <entity name="item" pk="id" query="SELECT * FROM item INNER JOIN member ON item.memberid=member.memberid">
    </entity>
</document> 
```

这两种方法在功能上是否不同？有性能差异吗？我的猜测是第一种方法是支持非 SQL 表，但我不确定。

另一个问题是，如果在 MySQL 中使用连接表，使用带有多个连接的 SQL 查询方法可能会导致多个文档被索引而不是一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T05:11:03.353

我遇到的几件事：-

*   如果您有一对一的映射，则可以使用联接，以便通过一个查询本身获取所有字段。
*   如果您有多个根记录，您将使用可能会创建多值字段的子实体。
*   子实体对每条记录进行查询，因此性能较慢。

也想听听其他用户的意见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T07:17:41.347

如果要优化性能，可以使用第二个选择来创建物化视图。这意味着您可以直接从物化视图使用 DIH 导入（无需在 DIH 中创建任何内部连接或子实体，这意味着导入速度更快，并且源数据库不会“过热”）如果需要，您可以创建一个 cronjob每天或根据需要快速刷新您的物化视图。如果您使用的是 MySQL，您可以在[此处](http://www.fromdual.com/mysql-materialized-views/ "这里")查看有关物化视图的详细信息。希望这会有所帮助。

# java - 如何在 Spring 中运行 Proxied Bean 的 Destroy-method

> ID：13369228
> 
> 赞同：2
> 
> 时间：2012-11-13T21:36:28.640
> 
> 标签：java, spring

我有一种情况需要设置池数据源的代理，我的代码如下：

```
<bean id="dataSourceBean" class="com.mchange.v2.c3p0.ComboPooledDataSource" 
    destroy-method="close">
  <property name="driverClass" value="${jdbc.driverClassName}"/>
  <property name="jdbcUrl" value="${jdbc.url}"/>
  <property name="properties">
    <props>
        <prop key="c3p0.minPoolSize">0</prop>
        <prop key="hc3p0.maxPoolSize">100</prop>
        <prop key="hc3p0.timeout">60000</prop>
        <prop key="c3p0.acquire_increment">10</prop>
        <prop key="c3p0.max_statement">50</prop>
        <prop key="user">${jdbc.username}</prop>
        <prop key="password">${jdbc.password}</prop>
    </props>
  </property>
</bean>

<bean id="dataSourceLockAdvice" 
    class="com.ndot2.datasource.DataSourceLockAdvice"/>

<bean id="dataSource" class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="target" ref="dataSourceBean"/>

    <property name="interceptorNames">
        <list>
            <value>dataSourceLockAdvice</value>
        </list>
    </property>
</bean> 
```

我遇到的问题是连接不再被关闭，并且似乎不再调用代理数据源的destroy方法......

我将如何调用代理 Bean 的 Close 方法？还是我应该以不同的方式实施建议？

我已经尝试在互联网上搜索，但我似乎无法找到答案，非常感谢帮助！

编辑：

根据要求，这是我的事务管理声明（我正在使用 Appfuse）

```
<aop:config>
    <aop:advisor id="userManagerTx" advice-ref="userManagerTxAdvice" pointcut="execution(* *..service.UserManager.*(..))" order="0"/>
    <aop:advisor id="userManagerSecurity" advice-ref="userSecurityAdvice" pointcut="execution(* *..service.UserManager.saveUser(..))" order="1"/>
    <aop:advisor id="managerTx" advice-ref="txAdvice" pointcut="execution(* *..service.*Manager.*(..))" order="2"/>
</aop:config>

<!-- Enable @Transactional support -->
<tx:annotation-driven/>

<!-- Enable @AspectJ support -->
<aop:aspectj-autoproxy/>

<!-- Activates scanning of @Autowired -->
<context:annotation-config/>

<!-- Activates scanning of @Service -->
<context:component-scan base-package="com.ndot2.service"/>

<tx:advice id="txAdvice">
    <tx:attributes>
        <!-- Read-only commented out to make things easier for end-users -->
        <!-- http://issues.appfuse.org/browse/APF-556 -->
        <!--tx:method name="get*" read-only="true"/-->
        <tx:method name="*"/>
    </tx:attributes>
</tx:advice>

<tx:advice id="userManagerTxAdvice">
    <tx:attributes>
        <tx:method name="save*" rollback-for="UserExistsException"/>
    </tx:attributes>
</tx:advice>

<bean id="userSecurityAdvice" class="com.ndot2.service.UserSecurityAdvice"/> 
```

我没有任何@Transactional 或@AspectJ 驱动的事务管理...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T11:46:52.330

如果您的应用程序中存在连接泄漏，第一步是尝试使用适当的监控工具定位发生泄漏的位置。至于 c3p0，我相信它通过 JMX 提供连接监控，正如[相关问题](https://stackoverflow.com/questions/4104125/)中所讨论的那样。

因此，如果在某些特定的服务调用期间发生泄漏，您可以使用调试和监控工具进行检查。

然后你应该注意不同的特性：例如，在你的配置中 UserManager 有多个事务建议，这可能是原因。在带有注解配置的 Spring 容器中，一个常见的错误是 bean 没有被事务代理包装，因为注解事务管理是[为不同的 IoC 容器配置的](https://stackoverflow.com/questions/9616410/transactional-methods-in-controller-class-are-not-considred-as-transactional)。另一个可能的原因是您的方法尝试手动管理事务，但未能正确执行此操作。

# android - 从相机加载单个位图时如何处理内存不足错误

> ID：13369229
> 
> 赞同：0
> 
> 时间：2012-11-13T21:36:34.993
> 
> 标签：android, bitmap, camera, xamarin.android, out-of-memory

我的问题是如何在将字节数组解码为位图时处理内存不足错误，以便我可以对其进行旋转。我的代码如下，在你说它重复之前，我已经尝试使用 BitmapFactory.Options 并将样本大小设置为 2。但是质量损失太糟糕了，无法接受。此外，它似乎只发生在一台设备上，所以它可能是一次性的，但我倾向于相信如果它影响一个设备，以后还会有 25 个类似的设备。这也发生在拍摄的第一张照片上，这是该活动对位图所做的唯一工作。当我在 Monodroid 工作时，Java 的答案也很受欢迎，因为我通常可以很容易地将它们翻译成 C#。

```
public void GotImage(byte[] image)
    {
        try
        {
            Android.Graphics.Bitmap thePicture = Android.Graphics.BitmapFactory.DecodeByteArray(image, 0, image.Length);
            Array.Clear(image, 0, image.Length);
            image = null;
            GC.Collect();
            Android.Graphics.Matrix m = new Android.Graphics.Matrix();
            m.PostRotate(90);
            Android.Graphics.Bitmap rotatedPicture = Android.Graphics.Bitmap.CreateBitmap(thePicture, 0, 0, thePicture.Width, thePicture.Height, m, true);
            thePicture.Dispose();
            thePicture = null;
            GC.Collect();

            using (MemoryStream ms = new MemoryStream())
            {
                rotatedPicture.Compress(Android.Graphics.Bitmap.CompressFormat.Jpeg, 100, ms);
                image = ms.ToArray();
            }
            rotatedPicture.Dispose();
            rotatedPicture = null;
            GC.Collect();

            listOfImages.Add(image);
            storeButton.Text = "  Store " + listOfImages.Count + " Pages  ";
            storeButton.Enabled = true;
            takePicButton.Enabled = true;
            gotImage = false;
            cameraPreviewArea.camera.StartPreview();
        }
        catch (Exception ex)
        {
            AlertDialog.Builder alertDialog = new AlertDialog.Builder(this);
            alertDialog.SetTitle("Error Taking Picture");
            alertDialog.SetMessage(ex.ToString());
            alertDialog.SetPositiveButton("OK", delegate { });
            alertDialog.Show();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:14:39.470

是什么`rotatedPicture.Dispose()`？这是否只是将引用设置为空？摆脱位图内存的最好和最快的方法是通过[recycle()](http://developer.android.com/reference/android/graphics/Bitmap.html#recycle%28%29)方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T23:24:03.233

经过一整天的学习，我发现了一个修复/解决方法。这涉及在拍摄照片之前设置相机拍摄的照片的分辨率，而不是在事后尝试对其进行缩放。我还在设置中设置了选项，让用户尝试不同的分辨率，直到他们得到最适合他们的分辨率。

```
Camera.Parameters parameters = camera.GetParameters();
parameters.SetPictureSize(parameters.SupportedPictureSizes[parameters.SupportedPictureSizes.Count - 1].Width,
                    parameters.SupportedPictureSizes[parameters.SupportedPictureSizes.Count - 1].Height);
camera.SetParameters(parameters);
camera.StartPreview(); 
```

# c# - 常量联系人 utility.searchbyemail()

> ID：13369233
> 
> 赞同：0
> 
> 时间：2012-11-13T21:36:49.673
> 
> 标签：c#, asp.net, constantcontact

我正在尝试使用 Utility.searchbyemail 选项检查联系人是否存在。

示例：**IList myList = Utility.SearchContactByEmail(authdata, emailAddress, out nextChunkId);**

上述语句引发错误：错误**无法将类型“System.Collections.Generic.IList”隐式转换为“System.Collections.Generic.IList”。存在显式转换（您是否缺少演员表？）**

任何帮助深表感谢。下面是我的参考代码，我希望我有所有的命名空间。

```
enter code here
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.IO;
using ConstantContactBO;
using ConstantContactUtility;
using System.Data;
using System.Data.SqlClient;

namespace WebApplication4
{
public partial class WebForm1 : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        ConstantContactBO.Contact c = new ConstantContactBO.Contact();
        c.EmailAddress = "";
        AuthenticationData authdata = new AuthenticationData();
        authdata.Username = "";
        authdata.Password = "";
        authdata.ApiKey = "";

        // get user Contact List collection
        string nextChunkId;
        string currentChunk;
        string x = "a@abc.com";
        string[] emailAddress = new string[]{x.Trim()};
        IList<ContactList> lists = Utility.GetUserContactListCollection(authdata, out nextChunkId);
        **IList<Contact> myList = Utility.SearchContactByEmail(authdata, emailAddress, out nextChunkId);** //Throws Error here
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:12:59.223

我解决了。问题在于使用命名空间 WebApplication4。

# java - 我将如何使用静态方法来增加非静态变量？

> ID：13369235
> 
> 赞同：4
> 
> 时间：2012-11-13T21:36:57.460
> 
> 标签：java, static-methods

我有一个名为 Game 的 Java 类，它有一个名为 score 的非静态整数。

我想实现一个静态方法，它将每个游戏对象的分数增加 1，命名为 increaseAllScore()。这可能吗？我可以模拟这样的事情还是有什么办法解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T21:39:53.860

你可以用这样的实现来做到这一点：

```
int score;
static int scoremodifier;

public static void increaseAllScore() {
    scoremodifier++;
}

public int getScore() {
    return score + Game.scoremodifier;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:39:04.137

这样做的唯一方法是为静态方法提供一种机制来访问对 Game 对象的引用。一种方法是让每个游戏对象在静态数据结构中注册自己。

例如，您可以这样做：

```
public class Game {
    private static Set<WeakReference<Game>> registeredGames
        = new HashSet<WeakReference<Game>>();
    private int score;

    public Game() {
        // construct the game
        registeredGames.add(new WeakReference(this));
    }

    . . .

    public static incrementAllScores() {
        for (WeakReference<Game> gameRef : registeredGames) {
            Game game = gameRef.get();
            if (game != null) {
                game.score++;
            }
        }
    }
} 
```

我在`WeakReference<Game>`这里使用 a 是为了在没有其他对它的引用时，该集合不会阻止游戏被垃圾收集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T21:39:52.490

这在技术上是可行的，但通常是一个糟糕的设计^*。而是为您的所有游戏创建一个容器（称为它`class Games`），该容器将保存对所有已创建`Game`实例的引用。最有可能`Games`的类将有一个`createGame()`方法来完全控制所有创建的游戏的生命周期。

一旦有了`Games`类，它就可以具有非静态`increaseAllScores()`方法，该方法基本上会遍历所有创建`Game`的实例并逐一增加所有实例的分数。

^(* - 创建所有实例并在构造函数中`static List<Game>`修改该列表。`Game`)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T21:40:57.793

这将是您的问题的解决方案的大纲：

```
static final List<Game> games = new ArrayList<>();

public class Game {
  public Game() {
    games.add(this);
  }
}

public static void increaseAllScore() {
  for (Game g : games) game.increaseScore();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T21:40:58.400

这是可能的，但需要一些簿记。本质上，您必须保留一组指向所有现有游戏的静态指针。在游戏的构造函数中，您需要将其添加到此列表中，并且您需要在析构函数中再次将其删除。

一个可能更好的方法是调用`scoreOffset`或类似的静态变量。然后，您可以通过获取实例分数并添加静态来计算游戏的分数`scoreOffset`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-13T21:41:12.660

`increaseAllScore`仅当您的方法对实例具有静态访问权限时，您才能执行此操作`Game`（您可以在参数中传递一个列表，或者有一个静态存储的列表）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-13T21:42:19.353

这不可能; 首先学习面向对象编程的基础知识。

作为一项工作，您可以参考所有奥运会：

```
public class Game {
    private static List<Game> allGames = new ArrayList<Game>();

    public Game createNewGame() {
        Game game = new Game();
        allGames.add(game); 
        return game;
    }

    public static void increaseAllGames() {
        for (Game game : games) {
            game.increaseScore(); 
        }
    }    
} 
```

这只是一个实现示例；对于设计，我不会将它们放在同一个班级。

# python - Python中列表的格式

> ID：13369236
> 
> 赞同：0
> 
> 时间：2012-11-13T21:37:07.380
> 
> 标签：python, list, iteration

我正在尝试抓取一些网页内容，但我很难格式化输出。我的代码生成一个列表，然后遍历该列表以向其中添加更多信息。我正在获取所需的所有数据，但是当我尝试将其保存到 CSV 时，每行得到的列表不止一个。我不确定如何做到这一点。

这是我的代码：

```
def getPeople(company, url, filename):
  persList = []
  category = os.path.splitext(filename)[0]
  code = urllib.urlopen(url)
  html = code.read()
  unic = unicode(html, errors='ignore')
  tree = etree.parse(StringIO(unic), parser)
  personNames = tree.xpath('//a[@class="person"]/text()')
  personUrls = tree.xpath('//a[@class="person"]/@href')
  for i, j in zip(personNames, personUrls):
    personInfo = (company, category, i, j)
    internal = list(personInfo)
    persList.append(internal)
  result = list(persList)
  return result

def tasker(filename):
  peopleList = []
  companyNames = getCompanies(filename, '//a[@class="company"]/text()')
  companyUrls = getCompanies(filename, '//a[@class="company"]/@href')
  for i, j in zip(companyNames, companyUrls):
    peopleLinks = getPeople(i, j, filename)
    internal = list(peopleLinks)
    peopleList.append(internal)
  output = csv.writer(open("test.csv", "wb"))
  for row in itertools.izip_longest(*peopleList):
    output.writerow(row)
  return peopleList 
```

这是输出示例：

```
[[['3M', 'USA', 'Rod Thomas', 'http://site.com/ron-thomas'], ['HP', 'USA', 'Todd Gack', 'http://site.com/todd-gack'], ['Dell', 'USA', 'Phil Watters', 'http://site.com/philwatt-1'], ['IBM', 'USA', 'Mary Sweeney', 'http://site.com/ms2105']], [['3M', 'USA', 'Tom Hill', 'http://site.com/tomhill'], None, ['Dell', 'USA', 'Howard Duck', 'http://site.com/howard-duck'], None], [['3M', 'USA', 'Neil Rallis', 'http://site.com/nrallis-4'], None, None, None]] 
```

这会导致难看的 CSV 文件难以阅读。谁能指出我正确的方向？

编辑：这就是我希望输出的样子。

```
[['3M', 'USA', 'Rod Thomas', 'http://site.com/ron-thomas'], ['HP', 'USA', 'Todd Gack', 'http://site.com/todd-gack'], ['Dell', 'USA', 'Phil Watters', 'http://site.com/philwatt-1'], ['IBM', 'USA', 'Mary Sweeney', 'http://site.com/ms2105'], ['3M', 'USA', 'Tom Hill', 'http://site.com/tomhill'], ['Dell', 'USA', 'Howard Duck', 'http://site.com/howard-duck'], ['3M', 'USA', 'Neil Rallis', 'http://site.com/nrallis-4']] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T21:43:17.443

在您的行中：

```
peopleList.append(internal) 
```

您正在将一个列表附加到另一个列表中。这使得内部列表成为 peopleList 的成员。

相反，您想扩展 peopleList。这就是你如何组合两个列表。

所以它会是：

```
peopleList.extend(internal) 
```

# javascript - 将两个 html 选择与 jquery 结合起来

> ID：13369240
> 
> 赞同：4
> 
> 时间：2012-11-13T21:37:32.780
> 
> 标签：javascript, jquery

是否可以在 jquery 中结合两个 html 选择？

```
var derp1 = $('#derp1').html();
var derp2 = $('#derp2').html();

var combDerp = derp1.add(derp2);

$('#derpina').html(combDerp); 
```

我想将 html 的两个特定部分合二为一，并将它们显示在页面的另一部分。非常感谢任何帮助:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T21:39:04.817

由于您正在获取每个的 html，因此您可以将两者连接起来。

```
$('#derpina').html(derp1 + derp2); 
```

或者，您可以获取实际节点并移动它们。

```
var derp1 = $("#derp1");
var derp2 = $("#derp2");

$("#derpina").html(derp1.add(derp2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:39:13.400

只是改变

```
var combDerp = derp1.add(derp2); 
```

到

```
var combDerp = derp1 + derp2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T21:39:22.470

只需将它们连接起来。

```
var combDerp = derp1+derp2; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T21:40:54.750

如果您尝试附加 HTML，也可以使用 JQuery .Append()。

[http://api.jquery.com/append/](http://api.jquery.com/append/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T21:42:09.087

如果你想让元素移动，你应该使用：

```
$('#derp1, #derp2').contents().appendTo('#derpina'); 
```

如果你想复制它们，你应该使用：

```
$('#derp1, #derp2').contents().clone().appendTo('#derpina'); 
```

# python - 仅在 Windows 上出现 python __init__ 错误

> ID：13369246
> 
> 赞同：0
> 
> 时间：2012-11-13T21:38:03.303
> 
> 标签：python, windows, init

我对python很陌生......

```
 import sys, os, time, py4chan, urllib from urllib2 import urlopen, URLError, HTTPError

 def refreshthread(boardin,no):
     global thread
     global topic
     board = py4chan.Board(boardin)
     thread = board.getThread(int(no))
     topic = thread.topic
     time.sleep(2.5)

 def dlfile(url, folder):

     try:
         f = urlopen(url)

         with open(folder + "/" + os.path.basename(url), "wb") as local_file:
             local_file.write(f.read())
             print "Downloaded to " + str(folder + "/" + os.path.basename(url)) 

     except HTTPError, e:
         print "HTTP Error:", e.code, url
     except URLError, e:
         print "URL Error:", e.reason, url

 def getsize(uri):
     file = urllib.urlopen(uri)
     size = file.headers.get("content-length")
     file.close()
     return str(int(size) / 1024)

 def main():
     boardtag = str(raw_input("Board: "))
     threadno = int(raw_input("Thread id: "))
     folder = str(raw_input("Save to folder: "))
     print "Getting thread information..."
     refreshthread(boardtag,threadno)
     print "Subject: " + topic.Subject
     while(True):
         if not os.path.exists(folder): os.makedirs(folder)
         refreshthread(boardtag,threadno)
         for imgurl in thread.Files():
             if imgurl is not None and not os.path.exists(folder + "/" + os.path.basename(imgurl)):
                 print "A wild image appears! " + "(" + getsize(imgurl) + "kb)" 
                 dlfile(imgurl,folder)
             else:
                 pass

 if __name__ == '__main__':
     main() 
```

我在linux上编写了这个代码，它运行得很好，但是如果我在windows上运行它，我会收到这个错误：

```
TypeError: __init__() takes exactly 4 arguments (2 given) 
```

这很奇怪，因为我没有定义**init**。这可能是来自另一个模块的**初始化吗？**

如果我编写其他脚本，py4chan 模块似乎工作正常。两台机器也有相同的python版本。

**编辑**（完全错误）：

```
Getting thread information...
Traceback (most recent call last):
  File "4chan.py", line 59, in <module>
    main()
  File "4chan.py", line 46, in main
    refreshthread(boardtag,threadno)
  File "4chan.py", line 15, in refreshthread
    board = py4chan.Board(boardin)
TypeError: __init__() takes exactly 4 arguments (2 given) 
```

**编辑：* *好的，我有两个不同的同名模块。现在都在工作。我不应该被允许在这个网站上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:46:15.027

乍一看，您似乎`/`在两个地方硬编码为目录分隔符。在 Windows 中，目录分隔符是`\`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:47:02.560

[我刚刚从http://py4chan.sourceforge.net/](http://py4chan.sourceforge.net/)获取的 py4chan 模块具有以下定义`Board.__init__`：

```
class Board:
    def __init__(self, base_url, post_url, filesize): 
```

这需要 4 个参数（包括隐式`self`），因此您缺少`post_url`and`filesize`参数（无论是什么）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T21:47:09.477

该类`py4chan.Board`需要用 3 个参数构造，而不是 1 个。`refreshthread`函数中的这一行：

```
board = py4chan.Board(boardin) 
```

应该看起来像这样：

```
board = py4chan.Board(base_url, post_url, filesize) 
```

# ios - IOS 上有电话间隙的 filepicker.io

> ID：13369249
> 
> 赞同：1
> 
> 时间：2012-11-13T21:38:24.003
> 
> 标签：ios, cordova, phonegap-plugins, childbrowser, filepicker.io

我正在尝试将 filepicker.io 与我在 iOS6 for iPad 上的 Phonegap 2.2.0 项目集成。他们在 filepicker.io 上的文档中说，只要让 childbrowser 运行就可以了。（[https://github.com/Filepicker/filepicker-phonegap](https://github.com/Filepicker/filepicker-phonegap)）好吧，我让子浏览器运行并测试了典型的谷歌示例。但是当我尝试像在他们的 android 示例中那样调用 api 时，它不起作用。由于错误，我也编辑了白名单。问题是：有人在 iOS 上尝试过吗？没有例子可以找到。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:47:30.627

要让它在 iOS 上使用新的 V1 API 运行，您需要手动创建自己的文件选择器字符串并直接在子浏览器中打开，并在字符串的末尾附加一个重定向 url。以下是您对照片的处理方式：

```
pick: function() {
    cb = window.plugins.childBrowser;
    if(cb!=null){
        cb.onLocationChange = function(loc){
            if (loc != "about:blank"){
                console.log(loc);
                if(loc.indexOf("fpurl") > -1) {
                cb.close();
                }
            var n = loc.split("fpurl=");
            fpurl = n[1];
            alert(fpurl);
        }
    };
cb.showWebPage("https://www.filepicker.io/dialog/open/?m=image/*&key="YOURAPIKEY"&referrer=&modal=false&redirect_url=https://www.filepicker.io/dialog/phonegap_done/");
} 
```

# symfony - symfony2 FOSUserBundle 基础：html.twig

> ID：13369252
> 
> 赞同：2
> 
> 时间：2012-11-13T21:38:34.803
> 
> 标签：symfony, fosuserbundle

我想使用`FOSUserBundle`，但我没有覆盖我的`app/resource/base.html.twig`所以我没有像[http://knpuniversity.com](http://knpuniversity.com)教程中那样的视图。你能告诉我你的`base.html.twig when`它被覆盖了`FOSUserBundle`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:25:05.627

你有你的布局，所以只需在你的 UserBundle/Resources/view 中创建一个 layout.html.twig ，然后像这样放在那里

```
{% extends 'SomeBundle::layoutyouwanttoverwrite.html.twig' %}

{% block content %}
    {% block fos_user_content %}{% endblock %}
{% endblock %} 
```

我希望这会有所帮助:)

别忘了放

```
public function getParent() 
{
    return 'FOSUserBundle';
} 
```

在您的 UserBundle 类中:)

# java - 常见数据结构和算法的Java实现

> ID：13369255
> 
> 赞同：0
> 
> 时间：2012-11-13T21:38:42.540
> 
> 标签：java

我正在寻找一些常见数据结构和算法的标准实现，例如：

*   二叉树、AVL 和红黑树
*   欧拉之旅等树游者
*   （加权）图和 DAG
*   图表搜索
*   旅行推销员算法，例如 Dijkstra 算法
*   最小生成树/Krushal 算法

等等等等等等。

我希望有一个 Apache common-XXX 包，但可惜没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:45:49.403

[http://jgrapht.org/](http://jgrapht.org/)提供了最底层的 5 个，这些树在核心 java 中实现。

只是一个注释：我记不起名字并用谷歌搜索了“Java Graph Algortihms”。这是第一个结果。:)

# hadoop - 使用 oozie 运行多个 mapreduce 作业？

> ID：13369260
> 
> 赞同：0
> 
> 时间：2012-11-13T21:39:01.527
> 
> 标签：hadoop, oozie

作为解决方法的一部分，我想使用两个 mapreduce 作业（而不是一个），它们应该按顺序运行以获得所需的效果。

每个作业中的 map 函数只是简单地发出每个键值对而不进行处理。每个作业中的 reduce 函数是不同的，因为它们执行不同类型的处理。

我偶然发现了 oozie，它似乎直接写入后续作业的输入流（或者不是吗？） - 这会很棒，因为中间数据很大（I/O 操作将成为瓶颈）。

如何使用 oozie（工作流程中的 2 个 mr 作业）实现这一目标？

我确实浏览了以下资源，但它们只是将单个作业作为工作流运行： [https ://cwiki.apache.org/confluence/display/OOZIE/Map+Reduce+Cookbook](https://cwiki.apache.org/confluence/display/OOZIE/Map+Reduce+Cookbook)

帮助表示赞赏。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:58:28.367

有，看看Hadoop中的[ChainMapper](http://hadoop.apache.org/docs/mapreduce/current/api/org/apache/hadoop/mapreduce/lib/chain/ChainMapper.html)类。它允许您将一个映射器的映射输出直接转发到下一个映射器的输入，而不会碰到磁盘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:43:28.747

Oozie 是一个用于描述作业工作流的系统，其中该作业可能包含一组 map reduce 作业、pig 脚本、fs 操作等，并支持数据流的 fork 和 join。

但是，它不允许您将一个 MR 作业的输入作为输入流式传输到另一个 - oozie 中的 map-reduce 操作仍然需要某种类型的输出格式，通常是基于文件的，因此您的作业 1 的输出将仍然通过 HDFS 序列化，然后由作业 2 处理。

oozie 文档有一个包含多个 MR 作业的示例，包括一个 fork：

[http://oozie.apache.org/docs/3.2.0-incubating/WorkflowFunctionalSpec.html#Appendix_B_Workflow_Examples](http://oozie.apache.org/docs/3.2.0-incubating/WorkflowFunctionalSpec.html#Appendix_B_Workflow_Examples)

# charts - 如何为 Kendo DataViz 图表设置背景图像

> ID：13369265
> 
> 赞同：2
> 
> 时间：2012-11-13T21:39:12.697
> 
> 标签：charts, kendo-ui, kendo-dataviz

如何设置 Kendoui 图表的背景图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:27:44.720

基本上，您需要将该背景样式应用于初始化图表的元素。

例如

```
<div id="chart" style="background: center no-repeat url('someImage.png');"></div> 
```

就像在这个在线[演示](http://demos.kendoui.com/dataviz/line-charts/index.html)中一样。

# jquery - 使用 fullCalendar jquery 插件显示时间

> ID：13369266
> 
> 赞同：1
> 
> 时间：2012-11-13T21:39:19.517
> 
> 标签：jquery, fullcalendar

我已阅读文档[http://arshaw.com/fullcalendar/docs/agenda/axisFormat/](http://arshaw.com/fullcalendar/docs/agenda/axisFormat/)以在周视图中显示小时数。我的代码是：

```
$('#calendar').fullCalendar({
    axisFormat:'h(:mm)tt',
    ...
}); 
```

但我仍然看到基本日历 =(。

* * *

由于标题，我没有看到房子。我的标题是：

```
 header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,basicWeek,basicDay'
        }, 
```

安藤现在是：

```
 header: {
            left: 'prev,next today',
            center: 'title',
            right: 'month,agendaWeek,basicDay'
        }, 
```

我可以看到房子

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-11T09:37:49.893

试试这个它会工作，它对我来说很好。

```
$('#calendar').fullCalendar({
        header: {
            left: 'prev,next today prevYear',
            center: 'title',
            right: 'nextYear month,agendaWeek,agendaDay'
        },
        axisFormat: 'H(:mm)',/*whatever format you want for axis */
        timeFormat: {
            agenda: 'H:mm{ - H:mm}'/*time format to be shown on event*/
        },

  }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:45:46.500

axisFormat 选项仅指示它应如何在该议程视图中显示，要实际更改您需要使用[changeView](http://arshaw.com/fullcalendar/docs/views/changeView/)方法的视图

例如改变视图

```
$('#calendar').fullCalendar('changeView', 'agendaWeek') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-05T07:26:01.017

你可以使用'agendaWeekDay'到标题>正确的参数来显示时间

```
    标题：{
            对：'agendaWeekDay'
        },

```

# linux - Yum 在“加载镜像速度”或“设置包裹麻袋”时冻结

> ID：13369268
> 
> 赞同：1
> 
> 时间：2012-11-13T21:39:24.130
> 
> 标签：linux, centos, yum

```
[root@LibertysLastArmy ~]# sudo yum -v update
Loading "fastestmirror" plugin
Config time: 0.067
Yum Version: 3.2.22
Setting up Package Sacks
Loading mirror speeds from cached hostfile

Exiting on user cancel
[root@LibertysLastArmy ~]# su root
[root@LibertysLastArmy ~]# su
[root@LibertysLastArmy ~]# su root
[root@LibertysLastArmy ~]# yum -v update
Loading "fastestmirror" plugin
Config time: 0.053
Yum Version: 3.2.22
Setting up Package Sacks
Loading mirror speeds from cached hostfile

Exiting on user cancel
[root@LibertysLastArmy ~]# yum --noplugins -v update
Config time: 0.076
Yum Version: 3.2.22
Setting up Package Sacks

Exiting on user cancel 
```

每当我尝试使用 yum 时都会发生这种情况。我试过用 yum clear all

我已经尝试了所有：

su -c 'rm -rf /var/lib/rpm/__db*' su -c 'rpm --rebuilddb' su -c 'yum check-update'

以及这些的变体。到目前为止，没有任何东西可以解决它。我也试过重启VPS，但没有成功。

它目前正在运行 CentOS 5.6 (Final)。任何帮助，将不胜感激。我的目标是最终安装 GCC，因为我缺少 gcc 源代码的编译器。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T01:48:36.410

您在 VPS 上有多少内存以及正在运行哪些进程？Yum 无法在内存不足的 VPS 上运行。它会死。

# php - 添加开发模式

> ID：13369270
> 
> 赞同：-1
> 
> 时间：2012-11-13T21:39:34.610
> 
> 标签：php

> **可能重复：**
> [如何在已建立的网站上实施“维护模式”](https://stackoverflow.com/questions/1396848/how-to-implement-maintenance-mode-on-already-established-website)

我意识到不建议这样做，但是可以使用哪些“快速而肮脏”的方法来对网站进行维护更改，从而使公众无法看到？

编辑：为了添加更多细节，我想隐藏的东西是正在开发的东西。现有或已建立的内容仍应显示为好像该网站是实时的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:44:16.803

使用 .htaccess 更安全，因为它将处理所有 url（php 与否）：

```
RewriteEngine on

RewriteCond %{REMOTE_ADDR} !215.252.232.22
RewriteRule .* http://domain.ext/maintenance.html [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:41:48.790

这很脏，但你可以做一些事情，比如用你的 IP 替换“##.##.##.##”：

```
if($_SERVER['REMOTE_ADDR']=='##.##.##.##'){
    //test code
}else{
    // live code
} 
```

注意：我不建议这样做，但它又快又容易。

# perforce - 删除“有”文件

> ID：13369271
> 
> 赞同：2
> 
> 时间：2012-11-13T21:39:35.003
> 
> 标签：perforce

标题几乎总结了它：有没有办法在不使用同步完成后删除 Perforce 服务器上的“有”状态`-p`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:46:17.430

尝试`p4 flush FILE@0`（的同义词`p4 sync -k FILE@0`）。这将告诉服务器您已同步`FILE`更改 0（意味着您不再“拥有”它），而不会影响您的本地副本。

# google-chrome - 在 IndexedDB objectStore 中搜索不存在的键仍然返回成功

> ID：13369272
> 
> 赞同：0
> 
> 时间：2012-11-13T21:39:37.087
> 
> 标签：google-chrome, indexeddb

我正在尝试查看 objectStore 中是否已存在条目。如果条目存在，我需要更改它的一些字段；如果该条目不存在，我需要添加它。

这是我的查询：

```
var db = html5rocks.indexedDB.db;
  var trans = db.transaction(["topics"], "readwrite");
  var store = trans.objectStore("topics");
  var findRequest = store.get(tHash);
findRequest.onsuccess = function(event){
  console.log("logging event");
  console.log(event);
  var cursor = event.target.result;
}
findRequest.onerror(e){
console.log(e);
} 
```

我遇到的问题是该`findRequest.onsuccess`函数总是触发 - 即使`get(tHash)`请求不可能找到任何东西（顺便说一句，当我这样做时，“主题”objectStore 包含零条目......）。我想我会使用`onsuccess`and`onerror`函数来判断我是否需要更新现有记录或创建新记录。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T22:18:41.200

直接从[马嘴里](http://www.w3.org/TR/IndexedDB/#widl-IDBObjectStore-get-IDBRequest-any-key)：

> `IDBObjectStore.get()`如果具有给定键的记录不存在，则产生与记录存在时相同的结果，但未定义为值。如果需要区分这两种情况，可以使用`openCursor`同一个键。如果记录存在，这将返回一个未定义为值的游标，如果不存在这样的记录，则返回没有游标。

我想你想要这样的东西：

```
var cursorRequest = store.openCursor(tHash);
cursorRequest.onsuccess = function(event) {
  var cursor = event.result;
  if (cursor) {
    // entry exists
  } else {
    // entry doesn't exist
  }
} 
```

# c# - 删除 dataGridView 中的选定行

> ID：13369273
> 
> 赞同：3
> 
> 时间：2012-11-13T21:39:39.730
> 
> 标签：c#, datagridview

我有一个用文件列表填充的 dataGridView。我希望能够通过选择条目（通过单击它）然后按删除键来删除其中一些条目。这是我到目前为止的代码：

```
private void DataGrid_KeyDown(object sender, KeyEventArgs e)
{
     if (e.KeyCode == Keys.Delete)
     {
           foreach (DataGridViewRow r in DataGrid.SelectedRows)
           {
                if (!r.IsNewRow)
                {
                    DataGrid.Rows.RemoveAt(r.Index);                        
                }
           }
     }
} 
```

问题在于它将选定的行定义为一次单击的所有行。我想删除所有突出显示的行。换句话说，如果一行没有突出显示，它就不会被选中。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-14T02:21:30.153

这应该工作

```
 private void DataGrid_KeyDown(object sender, KeyEventArgs e)
 {
   if (e.KeyCode == Keys.Delete)
   {
    Int32 selectedRowCount =  DataGrid.Rows.GetRowCount(DataGridViewElementStates.Selected);
    if (selectedRowCount > 0)
     {
        for (int i = 0; i < selectedRowCount; i++)
        {
            DataGrid.Rows.RemoveAt(DataGrid.SelectedRows[0].Index);  
        }
     }
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-22T05:33:05.440

在第一个示例中，您使用 DataGrid.SelectedRows 作为迭代的元素，并在每次迭代后重新读取它......

每次迭代后该集合都会减少一个...删除一个后，选定的行集合将减少。

只是避免在迭代删除时修改集合。例子：

```
 List<DataGridViewRow> toBeDeleted = new List<DataGridViewRow>();
    try
    {
        foreach (DataGridViewRow row in DataGrid.SelectedRows)
            toBeDeleted.Add(row);
        foreach (DataGridViewRow row in toBeDeleted)
            DataGrid.Rows.Remove(row);
    }
    catch (Exception) { } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-19T15:47:43.930

由于我无法直接发表评论（声誉点数），John Saunders 提出了一个问题，为什么确定的解决方案应该有效，而原始帖子却没有——因为它们非常相似。
两者之间的区别在于，在原始的 For Each 语句中，它被用于迭代，它强制对象引用到被迭代的对象，因此如果一个被删除，引用的对象将被搞砸（因为它是一个集合，即更改集合你已经参考了）。第二个命名的解决方案使用 for (int i = 0; i < selected 它只是获取邮箱 [i] 中的单个位置（如果你愿意的话）字母，因此它是唯一正在处理的对象而不是集合作为一个整体。
您不能在 For Eaching 时更改您所拥有的集合 - 已经对其进行了引用，因此它被“锁定”..

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-16T01:54:30.187

```
 private: System::Void DeleteRow_Click(System::Object^ sender, System::EventArgs^ e)
{           
             /*Int32 rowToDelete = this->dataGridView1->Rows->GetFirstRow(DataGridViewElementStates::Selected);
             do {
                 try{
                     if (this->dataGridView1->Rows[rowToDelete]->IsNewRow){
                         this->dataGridView1->Rows[rowToDelete]->Selected = false;
                         rowToDelete = this->dataGridView1->Rows->GetFirstRow(DataGridViewElementStates::Selected);
                     }

                     this->dataGridView1->Rows->RemoveAt(rowToDelete);

                 }
                 catch (Exception^ e){

                 }
             } while ((rowToDelete = this->dataGridView1->Rows->GetNextRow(rowToDelete, DataGridViewElementStates::Selected)) != -1);
             */

            Int32 selectedRowCount = this->dataGridView1->Rows->GetRowCount(DataGridViewElementStates::Selected);
            for (int i = 0; i dataGridView1->Rows[this->dataGridView1->SelectedRows[0]->Index]->IsNewRow){
                    this->dataGridView1->Rows[this->dataGridView1->SelectedRows[0]->Index]->Selected = false;
                    selectedRowCount = this->dataGridView1->Rows->GetRowCount(DataGridViewElementStates::Selected);
                    i = -1;
                } 
                else {
                    this->dataGridView1->Rows->RemoveAt(this->dataGridView1->SelectedRows[0]->Index);
                }
             }

             this->dataGridView1->ClearSelection();
} 

```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-05T20:06:03.890

我只是使用这样的反向 for 循环：

```
 private void ButtonRemoveRows_Click(object sender, EventArgs e)
    {
        DataGridViewRow row;
        int length;

        length = _dataGridView.SelectedRows.Count;
        for(int i = length - 1; i >= 0; i--)
        {
            row = _dataGridView.SelectedRows[i];
            _dataGridView.Rows.Remove(row);
        }
    } 
```

该示例由按钮触发，而不是通过按键触发，但更改微不足道。可以精简代码，删除额外的变量行和长度。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-06-23T08:03:32.470

我试试这个。这是有效的。

```
string r1 = dataGridView1.CurrentRow.Cells[0].Value.ToString();
string r2 = dataGridView1.CurrentRow.Cells[2].Value.ToString();
string r3 = dataGridView1.CurrentRow.Cells[3].Value.ToString();
string r4 = dataGridView1.CurrentRow.Cells[4].Value.ToString();
string r5 = dataGridView1.CurrentRow.Cells[5].Value.ToString();
string r6 = dataGridView1.CurrentRow.Cells[6].Value.ToString();
string r7 = dataGridView1.CurrentRow.Cells[7].Value.ToString();
double prof = Convert.ToDouble(dataGridView1.CurrentRow.Cells[8].Value.ToString())
        / Convert.ToDouble(dataGridView1.CurrentRow.Cells[4].Value.ToString());

dataGridView2.Rows.Add(r1, rwcnt, r2, r3, r4, "", r5, r6, r7, prof);

//MessageBox.Show(prof.ToString());
dataGridView1.Rows.Remove(dataGridView1.CurrentRow); // remove current row 
```

# javascript - 顺序 AJAX 请求处理和存储

> ID：13369274
> 
> 赞同：0
> 
> 时间：2012-11-13T21:39:42.943
> 
> 标签：javascript, jquery

我正在尝试编写一个脚本来顺序地从具有 Web 界面的打印机中提取数据。大型本地网络上有 500 多个，因此我想在前一个返回（成功与否）后呼叫下一个。我很难将我的头脑围绕回调......如果这是最好的解决方案。

这是我目前的立场（友善，这是我对 jQuery/Javascript 的介绍，这是一个证明测试）。另外，有没有办法从结果调用中构建一个数组？我转向 Javascript 的原因是我无法让 PHP 与执行时间一致。

哦，你会在下面看到 ASYNC: true 只是因为我尝试了 w/false 并且它不起作用（返回任何东西）。

```
function pingDevice(prnList) {
    prnList = ["www.google.com", "amazon.com", "facebook.com", "as923f.com"];
    document.getElementById("myDiv").innerHTML="please wait...";

    $(prnList).each( function(index,printer) {
        $.ajax({
            type: "GET",
            dataType: "html",
            url: "pingTest.php?ping="+printer,
            async: true,
            success: function (data) {
                $('#myDiv').append( $('<div class="prn"></div>').html(data) );
                $prnResults[printer] = data;
            },
            error: function () {
                $prnResults[printer] = data;
            }
        });
    });
    $('#myDiv').append( $('<div class="prn"></div>').$prnResults );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:14:42.253

看起来您希望您的代码做两件事。

1.  仅在对上一个打印机的请求返回时才为下一个打印机请求数据
2.  只有在所有请求都返回后才更新 DOM。

不幸的是，您拥有的代码都没有做这些事情。:(

`$.each`是一种迭代类似数组的东西的方法，但它不会等到请求返回后再继续列表中的下一个项目。ajax 请求是异步发生的，这意味着您调用它们并继续代码中的下一个操作。当它们完成后，它们将回调`success`or`error`函数，但是当请求发生时，这段代码永远不会阻塞。

如果你想触发顺序请求，你可以创建某种帮助函数，让你循环遍历一个数组，并且只有在你知道你完成了第一个元素时才调用数组中的下一个元素的函数。如果您想在它们全部完成时执行一些操作，那么您需要一个函数，它在数组中的所有项目都完成处理时回调。

这是一个关于如何按顺序执行异步操作的小示例。

```
var data = ['1', '2', '3', '4'];

function doAsnycStuffSequentially(data, callback, final) {
  var i = 0,
      length = data.length;

  function getNextItem() {
    callback(data[i++], done);
  }

  function done(err) {
    if (err) {
      return final(err);
    }

    // Only call the final function if there is an error or if we are done looping.
    if (i >= data.length) {
      return final();
    }

    getNextItem();
  }

  getNextItem();
}

doAsyncStuffSequentially(data, function(item, done) {
  console.log("item is ", item);
  // simulate some asynchronous operation
  setTimeout(done, 1000);
}, function(err) {
  console.log("done with all and error is", err);
}); 
```

要将此模式应用于您自己的代码，您只需定义自己的回调函数，该函数会在数组中的每个项目上调用，如下所示：

```
var printerData = {},
    printerNames = ['hurp', 'durp'];

function getPrinterInfo(printerName, done) {
  $.ajax({
      type: "GET",
      dataType: "html",
      url: "pingTest.php?ping="+printer,
      success: function (data) {
        printerData[printerName] = data;
        done();
      },
      error: function (jqXHR, textStatus, err) {
        console.error("error getting printer status", err);
        done(err);
      }
  });
}

doAsyncStuffSequentially(printerName, getPrinterInfo, function(err) {
  console.log("done getting printer names and error was", err);
  console.log("printerData is", printerData);
}); 
```

关键是您在and回调中调用该`done`函数。这向函数发出一个异步操作已完成的信号，如果我们完成或发生错误，它应该启动下一个操作或调用该函数。`success``error``doAsyncStuffSequentially``final`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:30:45.377

虽然我同意 Sonesh 的观点，即服务器端的东西可能更适合这项任务，但这里有一些对你的代码应该有效的调整（未经测试）。

基本上，将实际的 ajax 调用嵌套在它自己的函数`pingNext`中。每次调用返回时，都会为`prnList`数组中的下一项再次调用该函数。此外，我调整了代码以使用 jQuery 的*类似*Promise 的语法进行 ajax 调用。一般来说，它是一种更好的链接 ajax 调用的语法（尽管在这里不是完全必要的）

```
function pingDevice(prnList) {
  prnList = ["www.google.com", "amazon.com", "facebook.com", "as923f.com"];
  document.getElementById("myDiv").innerHTML="please wait...";

  var i = 0;
  function pingNext(j) {
    $.ajax({
        type: "GET",
        dataType: "html",
        url: "pingTest.php?ping="+prnList[j],
        async: true,
    }).done(function(data) {
      // stuff to do when successfull
      $('#myDiv').append( $('<div class="prn"></div>').html(data) );
    }).fail(function(data) {
      // stuff to do on error
    }).always(function(data){
      // stuff to do no matter what

      // stash the result
      $prnResults[printer] = data;

      // if there are more items in the prnList array, repeat
      if (i < prnList.length) {
        i++;
        pingNext(i);
      }
    });
  }
} 
```

# javascript - jQuery排序表

> ID：13369280
> 
> 赞同：0
> 
> 时间：2012-11-13T21:40:23.253
> 
> 标签：javascript, jquery, html

我有这样的html表结构：

```
<table cellpadding="0" cellspasing="0" class="tablesorter zebra" id="articles-table">

    <tbody>...etc standart stuff...
    <tr>
    <td>
    </td>
    </tr>
    then i have 
    <tr id="123">
    <td>
    <td>
    </td>
    </td>
    <tr>
    ...
    </table> 
```

我需要通过我的浮点​​数进行排序，它只在第二个 div 中！在 id = 123 的 tr 中，这很重要...而且我在 web 中看到的所有解决方案都非常庞大...我只需要在某些具有特定 id 的 tr 中进行简单的排序第二个 td ...我该如何解决？

我试过 tablesorter.com。但它不是我的......不能只为某些 tr 定制它......如果加载了文档，我还需要它作为分类器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:46:25.417

查看 tablesorter.com 插件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:43:05.540

我强烈建议查看 jquery 库数据表。它基本上可以为您完成所有您需要的表格。您可以在这里找到更多信息：

[http://datatables.net/](http://datatables.net/)

# sql-server - 有没有办法从服务器获取 WMI.Service ？

> ID：13369281
> 
> 赞同：0
> 
> 时间：2012-11-13T21:40:27.213
> 
> 标签：sql-server, smo

锡纸上写着什么。本质上，我想要这样的东西（在powershell中，但这在很大程度上无关紧要）：

```
$server = new-object "Microsoft.SqlServer.Management.Smo.Server" "my\instance"
$service = $server.somePropertyOrMethod
if ($service.getType().FullName -eq 'Microsoft.SqlServer.Management.Smo.Wmi.Service') {
   write-output "you've found what I'm looking for"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:44:04.057

寻找类似的东西？

```
XP_WMIV3_DLL is a Extended Sqlserver Procedure for Quering WMI.
This package includes versions for 32-bit and 64-bit SQL servers.

Currently tested under SQL-Server 2005 and SQL-Server 2008.

download: http://bummisoft.de/download/XP_WMI.zip

Installation:

EXEC sp_addextendedproc xp_wmiv3, '<Your Path>\XP_WMIV3_DLL.dll'

eg:  EXEC sp_addextendedproc xp_wmiv3, 'C:\DLLs\XP_WMIV3_DLL.dll'

Uninstallation

EXEC sp_dropextendedproc xp_wmiv3

Usage 

e.g. 

exec xp_wmiv3 'SELECT * FROM Win32_Volume'
exec xp_wmiv3 'SELECT * FROM CIM_Userdevice where Name like "%HID%"'
exec dbo.xp_wmiv3 'Select * from win32_perfformatteddata_perfproc_process where name=''sqlservr'''

Create table #tmp(Domain varchar(255),Name varchar(255),Sid varchar(255))
insert into #tmp Exec xp_wmiV2 'SELECT  Domain,SID,Name FROM Win32_UserAccount  where Status ="OK"'
Select * from #tmp
Drop Table #tmp

Be aware that some querys my last very long, some won't return at last.

Covered namespaces in this version depend on local  - root\CIMV2 
```

# c# - C# - 一个 MAC 地址，多个源 IP 地址

> ID：13369284
> 
> 赞同：4
> 
> 时间：2012-11-13T21:40:39.970
> 
> 标签：c#, dhcp

我正在尝试编写一个 Windows 应用程序，它将在来自 PC 的以太网链接上生成流量。

我想使用 webBrowser 控件不断拉取网页以产生流量。

在这种情况下，我希望每个 webBrowser 控件都链接到一个唯一的源 IP 地址。两个问题：

1.  一台PC（即一个MAC地址）是否可以同时分配多个IP地址？

2.  如果问题 #1 的答案是肯定的，那么在应用程序 C# 代码中使用 DHCP 请求来获取额外的 IP 地址是最简单的方法，还是只配置静态 IP 地址更容易？

3.  如何在我的 C# 代码中获取在步骤 2 中获得的 IP 地址（只是给我一个大致的想法）。

谢谢，史蒂夫

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T21:56:25.410

是的，一个网络适配器绝对有可能拥有多个 IP 地址。但是，我建议手动配置它们（在 Windows 中，您可以通过网络连接的 IPv4 属性中的高级 TCP/IP 设置添加其他 IP 地址）。

就使用这些 IP 地址而言，从代码来看相对容易，您可以简单地绑定到特定的本地 IP 地址（如果使用`TcpClient`，`TcpClient(IPEndPoint localEndPoint)`构造函数将允许您这样做）。

但是，如果您使用的是 Web 浏览器控件，则可能会更加困难，并且可能无法通过控件上的可公开访问的接口将其绑定到特定的本地地址。

如果您不需要任何特别高级的功能，您可以通过创建自己的简单 HTTP 请求并将它们发送到适当绑定的`TcpClient`.

**编辑：**

快速搜索找到了[这个可能有用的答案](https://stackoverflow.com/a/5157593/381588)- 虽然它仍然不允许您使用绑定到特定本地地址的图形 Web 浏览器控件，但它确实使您能够使用`HttpWebRequest`，这将允许您处理发送更多高级网络请求（cookies、压缩、重定向等）。

# apache - 这个 RewriteCond 中的 $1 参数有什么作用？

> ID：13369285
> 
> 赞同：24
> 
> 时间：2012-11-13T21:40:41.037
> 
> 标签：apache, codeigniter, mod-rewrite

我正在设置 Apache 重写规则来整理我的 CodeIgniter URL。

[这个问题](https://stackoverflow.com/q/7182292/612253)（以及我在该地方发现的许多论坛帖子等）记录了以下规则（或非常相似的规则）的使用：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|phpinfo\.php|images|robots\.txt|sitemap\.xml\.gz|sitemap\.xml|assets)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

我知道 RewriteRule 之后的 $1 是指从 (.*) 捕获的字符串，但是**第一个 $1（直接在 RewriteCond 之后）代表什么？**我见过的很多例子都使用 %{REQUEST_URI} 作为 RewriteCond 的第一个参数。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-13T21:48:11.587

`$1`基本上是从字符串的开头和结尾捕获的所有内容。换句话说，`$1 = (.*)`.

在您的重写中，`^`表示字符串的开始，`(.*)`表示匹配任何内容，而`$`表示字符串的结束。所以，基本上，它是说从字符串的开头到结尾抓取所有内容并将该值分配给 $1。

因此，如果我输入`www.example.com/tacos-are-good`，那么`$1 = "tacos-are-good"`。所以你最终的重写实际上是`www.example.com/index.php/tacos-are-good`.

这是 ModRewrite 的备忘单，可能会有所帮助： http: [//www.addedbytes.com/cheat-sheets/mod_rewrite-cheat-sheet/](http://www.addedbytes.com/cheat-sheets/mod_rewrite-cheat-sheet/)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-13T21:48:00.660

$1 表示来自正则表达式中第一组括号的匹配项。（$2 将匹配第二组括号 - 如果给定）

例如，正则表达式匹配任何不是“index.php”或“phpinfo.php”等的内容。因此，如果请求的 url 不是其中之一，则通过重写条件，然后将匹配的部分传递给改写。

# asp.net - Razor 不会自动为视图创建共享文件夹？为什么不？

> ID：13369294
> 
> 赞同：2
> 
> 时间：2012-11-13T21:41:06.353
> 
> 标签：asp.net, asp.net-mvc, entity-framework, razor

我正在关注本教程...

[http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-3](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-3)

显然 Razor 会自动在视图中创建共享文件夹并创建一个 _ViewStart.cshtml 文件......它不会。

有任何想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-14T08:49:03.200

这里是 ASP MVC 初学者，所以我可能错了。

我认为问题在于本教程是为 ASP MVC 3 编写的，并且您可能正在使用 MVC 4，当您创建新的 ASP MVC 项目时，它有更多的项目模板选项。

如果您选择“Empty”作为您的项目模板，则在 Views 文件夹中不会创建任何内容，并且当您在教程中创建新视图时会卡住。如果选择“Basic”（显然是在 MVC 4 中添加的），Views 文件夹包含一个 Shared 子文件夹和教程中使用的默认配置文件。

希望能帮助到你 ！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:44:51.663

您可能使用了空的项目模板。提到的文件是在其他模板中创建的。

# c++ - 无法在 GLEW 应用程序中将 OpenGL 缓冲区打印到控制台

> ID：13369296
> 
> 赞同：1
> 
> 时间：2012-11-13T21:41:20.897
> 
> 标签：c++, opengl, glew, glfw

我正在使用[此处](http://open.gl/context#Onemorething)找到的教程。我正在使用 GLFW。我的窗口加载正常，但是在调用时

```
GLuint vertexBuffer;
glGenBuffers( 1, &vertexBuffer );
printf( "%u\n", vertexBuffer ); 
```

它没有写入控制台，如果我关闭 openGL 窗口（而不是关闭控制台），它会中断。我猜是指针有问题？但这对我来说似乎是正确的，这正是他在教程中的做法。

这是我的整个非常小的 .cpp (VS2012)：

```
#define GLEW_STATIC

#include <GL/glew.h>
#include <GL/glfw.h>
#include <stdio.h>
#include <stdlib.h>

#pragma comment( lib, "glfw.lib")
#pragma comment( lib, "opengl32.lib")
#pragma comment( lib, "glew32s.lib")

int main() {

    glfwInit();
    glfwOpenWindowHint( GLFW_OPENGL_VERSION_MAJOR, 3 );
    glfwOpenWindowHint( GLFW_OPENGL_VERSION_MINOR, 2 );
    glfwOpenWindowHint( GLFW_OPENGL_PROFILE, GLFW_OPENGL_CORE_PROFILE );

    glfwOpenWindowHint( GLFW_WINDOW_NO_RESIZE, GL_TRUE );
    glfwOpenWindow( 800, 600, 0, 0, 0, 0, 0, 0, GLFW_WINDOW );
    glfwSetWindowTitle( "OpenGL" );

    printf("This works");
    while( glfwGetWindowParam( GLFW_OPENED ) ) {
        glfwSwapBuffers();
    }

    glewExperimental = GL_TRUE;
    glewInit();

    GLuint vertexBuffer;
    glGenBuffers( 1, &vertexBuffer );
    printf( "%u\n", vertexBuffer );

    glfwTerminate();

    exit( EXIT_SUCCESS );
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T21:45:38.107

它无法将其写入控制台，因为永远无法访问相关代码。

只要打开窗口，您的代码就会运行几乎无限的 while 循环。

```
while(glfwGetWindowParam(GLFW_OPENED))
{
    glfwSwapBuffers();
} 
```

您应该将所有初始化代码放在此循环之前。

```
glewExperimental = GL_TRUE;
glewInit(); 
```

并在循环之前或循环中创建缓冲区对象。实际上，当您想将新内容加载到现有场景时，您会在循环内创建缓冲区对象。

```
GLuint vertexBuffer;
glGenBuffers(1, &vertexBuffer);
printf("%u\n", vertexBuffer); 
```

您的最终`main`功能可能如下所示。

```
int main()
{
    // GLFW initialization
    glfwInit();
    // ...
    glfwOpenWindow(800, 600, 0, 0, 0, 0, 0, 0, GLFW_WINDOW);
    glfwSetWindowTitle("My first OpenGL Application");

    // GLEW initialization
    glewExperimental = GL_TRUE;
    glewInit();

    // vertex buffer
    GLuint vertexBuffer;
    glGenBuffers(1, &vertexBuffer);
    printf("%u\n", vertexBuffer);

    // main loop
    bool running = true;
    while(running) {
        // exit
        if (!glfwGetWindowParam(GLFW_OPENED))
            running = false;

        // display
        glfwSwapBuffers();
    }

    // clean up
    glfwTerminate();
    exit(EXIT_SUCCESS);
} 
```

# android - 当我调用 start(); 时，VideoView 冻结；

> ID：13369298
> 
> 赞同：0
> 
> 时间：2012-11-13T21:41:27.873
> 
> 标签：android, android-videoview, freeze

我在我的一项活动中显示 youtube 的视频 (rtsp://)。

这是代码：

```
 media_controller = new MediaController(this);
        media_controller.setAnchorView(this.video_view);

        Uri video = Uri.parse(url);
        this.video_view.setMediaController(media_controller);
        this.video_view.setVideoURI(video);

        this.video_view.setOnPreparedListener(new OnPreparedListener() {

            @Override
            public void onPrepared(MediaPlayer mp) {
                video_view.start();
            }
        }); 
```

此代码在我的 Galaxy S (Android 2.2) 上运行良好，但它会在 5 到 10 秒内冻结我的 Galaxy S3 (Android 4.1) 上的 UI。当用户单击小部件的播放按钮时，也会出现冻结。

我错过了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:38:57.883

我仍然不知道为什么我的两部手机之间存在差异，以及为什么它在最近的版本中冻结了 UI，但我能够通过更换来解决问题

```
video_view.start(); 
```

经过

```
mp.start(); 
```

希望它可以帮助某人！

# jenkins - 如何在 Jenkins 中显示单个测试通过/失败的结果？

> ID：13369302
> 
> 赞同：8
> 
> 时间：2012-11-13T21:41:39.740
> 
> 标签：jenkins, continuous-integration, automated-tests, qa, jenkins-plugins

我们正在使用 Scala + Maven + ScalaTest runner + Jenkins。我们在这里有 JUnit 样式的 XML 输出：

```
test_dir/target/scalatest-reports/ 
```

现在我们可以看到整个构建通过/失败，或者通过详细的控制台输出来查看测试通过/失败（不理想），但我确信有更好的方法。

我已经尝试了几个构建后步骤，例如：

*   聚合下游测试结果
*   发布 xUnit 测试结果报告

但无法获得测试结果表。

你有什么想法？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-03-03T15:20:57.833

有两种选择：

*   ScalaTest 可以生成 HTML 报告。只需添加

    （测试中的 testOptions）+= Tests.Argument(TestFrameworks.ScalaTest, "-h", "target/scalatest-report")

到你的'build.sbt'。运行 'sbt test' 将在文件夹 'target/scalatest-report' 中生成 HTML 报告。

在 Jenkins 中，您可以使用“发布 HTML”插件来捕获此报告以进行构建。然后，测试 html 可用于每个构建以及作业页面。

*   ScalaTest 还在“target/test-reports”文件夹中生成普通的 JUnit XML 报告。Jenkins 这些报告可以通过“发布 JUnit XML 测试报告”post-build-action 捕获，我认为这是 Jenkins 默认可用的。

两种解决方案都可以查看测试结果，并且可以一起使用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-14T21:10:40.597

你应该更好地描述你的症状。JUnit风格的XML报告是Jenkins/Hudson支持的测试报告的基本形式，所以我想问题比较简单。请将您的配置与以下示例进行比较：

* * *

![在此处输入图像描述](../Images/c6cf3fa514ab14eddfeb0430e85d72de.png)

* * *

我建议如下：

1.  检查您的配置（很可能 jenkins 无法找到实际的报告文件）
2.  查看控制台输出以确保没有与 XML 报告文件相关的警告消息
3.  验证 XML 报告不为空且有效
4.  尝试使用[JUnitReport 任务](http://ant.apache.org/manual/Tasks/junitreport.html)生成 HTML 表单
5.  最后，如果可以的话，切换到[TestNG](http://testng.org)

# visual-studio-2010 - 为什么不将通过 umbraco admin 创建的文档类型创建为 .cs 文件

> ID：13369304
> 
> 赞同：5
> 
> 时间：2012-11-13T21:41:43.843
> 
> 标签：visual-studio-2010, umbraco

umbraco 的新手。在 VS2010 中有 umbraco 项目，我通过它在本地运行 umbraco 管理员。通过管理员创建模板时，新模板在我的 Masterpages 目录中显示为母版页。为什么当我通过管理员创建一个新的文档类型时，那些在 DocumentTypes 目录中没有显示为 .cs 页面，就像我看到它们存在于已经创建的项目中一样？讨厌这样一个菜鸟的感觉……

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T00:40:22.270

文档类型存储为数据库结构，而*不是*类 - 即使它们的行为与属性继承相同。但是，要将强类型文档类型作为 CS 文件用于您的代码，您可以右键单击任何文档类型并选择“导出到 .NET”，这样您就可以将 CS 文件保存到您的硬盘然后可以在 Visual Studio 中使用。

编辑：您可能会发现有用的另一个资源是[http://our.umbraco.org/wiki/reference/api-cheatsheet/linq-to-umbraco/generating-classes-from-document-types](http://our.umbraco.org/wiki/reference/api-cheatsheet/linq-to-umbraco/generating-classes-from-document-types) - 它解释了如何获取- 使用 LINQ2Umbraco 库控制文档类型的某些方面。但是，与所有 CMS 系统一样，保留结构和内容的最安全方法是 a) 将 DB 的 genscripts 保存到源代码控制系统，b) 备份 DB 并将 BAK 文件保存到源代码控制中，或 c)查看 RedGate SQL Source Contol，了解用于对数据库进行源代码控制的专业工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T17:13:19.583

模板（母版页）与文档类型不同 - 通过将单个文档类型分配给许多不同的模板/母版页，可以以多种不同的方式呈现。

Umbraco 在物理上创建了一些东西，而在虚拟上创建了一些东西 - 模板（母版页）、媒体（图像）、用户控件、宏脚本（.cshtml razor 脚本）、样式表和脚本（.js 文件）在您的文件结构中被创建为物理东西，即使在生成时也是如此使用 umbraco 管理员。该站点的大部分其余部分都是在数据库中虚拟创建或缓存到 \app_data\umbraco.config 中，并且不能在 umbraco 管理区域之外轻松创建。

# jquery - Twitter Bootstrap Popover - DOM 插入位置

> ID：13369306
> 
> 赞同：3
> 
> 时间：2012-11-13T21:41:49.127
> 
> 标签：jquery, twitter-bootstrap, popover

我的 Bootstrap Popovers 工作正常，但是 popover get 附加到文档底部的**正文，而不是在触发元素下方，就像它在引导文档中所做的那样：http:** [//twitter.github.com/bootstrap/ javascript.html#popovers](http://twitter.github.com/bootstrap/javascript.html#popovers)

有人知道如何控制弹出框的插入位置吗？或者至少，让它附加到触发元素父级？

这是我所拥有的：

[http://jsfiddle.net/qt34N/4/](http://jsfiddle.net/qt34N/4/)

```
 <a href="#" class="btn" rel="popover" data-placement="top" 
  data-content="Vivamus sagittis lacus vel augue laoreet rutrum faucibus." 
  data-original-title="Popover on top">Popover on top</a> 
```

jQuery：

```
$("a[rel=popover]").popover(); 
```

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:17:57.343

该演示使用较新版本的引导程序。更新到最新版本，它将按照您的意愿执行。

[http://jsfiddle.net/qt34N/10/](http://jsfiddle.net/qt34N/10/)

```
jQuery(document).ready(function($) {
    $("a[rel=popover]").popover();
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:56:12.167

您是否根据需要包含工具提示（bootstrap-tooltip.js）？
[http://twitter.github.com/bootstrap/javascript.html#tooltips](http://twitter.github.com/bootstrap/javascript.html#tooltips)

> 向任何元素添加小的内容覆盖，如 iPad 上的内容，以容纳辅助信息。将鼠标悬停在按钮上以触发弹出窗口。**需要包含工具提示**。

就放置而言，您可以在选项中设置它：

```
$('#example').popover({placement:'top'}) 
```

或通过`data`属性：

```
data-placement="top" 
```

# nhibernate - ConventionModelMapper 如何确定集合/包关系

> ID：13369307
> 
> 赞同：1
> 
> 时间：2012-11-13T21:41:52.803
> 
> 标签：nhibernate, mapping-by-code

我在一个新应用程序中使用代码映射，并看到约定模型映射器的一些奇怪行为。它选择了我的 1..N 关系中的一个作为 Bag 和一个作为 Set 的所有关系。据我所见，它们的声明方式基本相同。此外，如果我不为 BeforeMapSet 设置事件处理程序，则永远不会触发适当的 BeforeMapManyToOne 处理程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:07:22.823

这种`XML`映射更加明确，通常将IList *<>*映射到`<bag>`和*`ISet`*。`<set>`有一个解释，Fluent 引擎（从 1.2 版开始）如何尝试做同样的事情：

[https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping](https://github.com/jagregory/fluent-nhibernate/wiki/Fluent-mapping)

*（参见 HasMany / 一对多 / 集合类型部分）*

上面链接的摘录：

```
public IList<Child> Children { get; set; }    
HasMany(x => x.Children); // <bag />

private ISet<Child> _children;    
public IEnumerable<Child> Children
{
  get { return _children; }
}

HasMany(x => x.Children); // <set access="nosetter.camelcase-underscore" />

private ISet<Child> _children;    
public IEnumerable<Child> GetChildren()
{
  return _children;
}

HasMany(x => x.GetChildren()); // <set name="_children" access="field" /> 
```

所以我猜，你在映射中的“小差异”可能隐藏在那里

# internet-explorer - 有什么方法可以在移动 IE（Windows Phone 7.5）中隐藏下拉列表上的箭头？

> ID：13369308
> 
> 赞同：0
> 
> 时间：2012-11-13T21:41:56.430
> 
> 标签：internet-explorer, windows-phone-7, drop-down-menu

我在元素上使用自定义背景，但默认箭头仍然显示。移动 IE 不支持“外观”或“-ms-appearance”css 属性，所以我有点不知所措。它像众所周知的拇指酸痛一样突出。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-20T10:36:50.610

正如你所说[IE <= 10 不支持](http://msdn.microsoft.com/library/hh781508.aspx#user_interface)该`appearance`属性。

我唯一能找到的是[Charles Morris 的博客文章，](http://blogs.windows.com/windows_phone/b/wpdev/archive/2012/11/15/adapting-your-webkit-optimized-site-for-internet-explorer-10.aspx#step5)其中他展示了 IE 10 的解决方案：

**CSS**

```
select::-ms-expand {
    display: none;
} 
```

**HTML**

```
<select>
  <option></option>
  ...
</select> 
```

不幸的是，我没有 Windows Phone 7.5 设备来测试这是否有效，但我创建了一个[简化的测试用例](http://jsfiddle.net/TimPietrusky/v759w/)供您试用！

# php - mongodb查询不起作用

> ID：13369309
> 
> 赞同：0
> 
> 时间：2012-11-13T21:41:59.737
> 
> 标签：php, mongodb

我有一个收藏，我收藏的一部分在这里，

让我们称之为第一个数组

```
$ho = array( 'a' => 
array (
'0' => '508bef9e6803fa6305000000',
'1' => '50901eac6803fafb0d000000',
'2' => '508bf3766803fa810f000000',
'3' => '50a2aeac6803fa150b000000',
'4' => '50a2ae846803fa140b000000',
'5' => '50a2ae616803fab706000000',
'6' => '50a2ae3a6803fab506000000',
'7' => '50a2adfc6803fab306000000',
)), 
```

并且还有另一个来自另一个用户的嵌入数组，让我们调用这个第二个数组

```
'_id' => new MongoId("508bef9e6803fa6305000000"),
'a' => 
array (
'0' => '508bf3766803fa810f000000',
'1' => '50a2ae616803fab706000000',
'2' => '50a2aeac6803fa150b000000',
), 
```

我想做的是从第一个数组中减去第二个数组，但我想用 mongodb

```
'a' => 
array (
'0' => '508bef9e6803fa6305000000',
'1' => '50901eac6803fafb0d000000',
'4' => '50a2ae846803fa140b000000',
'6' => '50a2ae3a6803fab506000000',
'7' => '50a2adfc6803fab306000000',
), 
```

我尝试了不同的查询，但无法得到这样的结果，谢谢您的帮助:)

```
$lk = $m->kud->user->findOne(
array(
"_id" => new MongoId("508bef9e6803fa6305000000"),'$nin'=>array("a"=>$ho["a"])
), 
array("_id" => 0, "a" => 1)
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:56:43.897

MongoDB 目前不支持基于值匹配的预测（它最终会支持）。对于这种情况，您可能需要返回整个文档，然后在客户端提取值。

# tfs - 如何避免在毫无根据的合并后合并存储库中的每个文件？

> ID：13369310
> 
> 赞同：2
> 
> 时间：2012-11-13T21:42:05.647
> 
> 标签：tfs

在 TFS Baseless Merge 之后，我们遇到了一些麻烦。这是我们目前拥有的分支机构的快速摘要。

```
 Main
                |
           -----------
           |         |
        BranchA   BranchB
           |         |
        BranchA1  BranchB1 
```

**我们使用从BranchA1**到**BranchB1**的“所有更改到特定版本”执行了毫无根据的合并。当在我们的源代码树中的每个文件中检查这一点时，它都有一个“合并”状态。

这是有道理的，并在 ALM Rangers 分支指南中解释如下：

> 如果在选择“所有更改到特定版本”的情况下执行无基准合并，则在签入无基准合并时，每个文件旁边都会有一个合并状态，因为无基准合并会为父文件夹中的每个文件创建一个分支关系。

我们现在需要将 BranchB1 反向集成**到**BranchB**中***，*但是这样做意味着我们让每个文件都具有“合并”状态。并且（根据我的测试）当我们将 RI **BranchB**转换为**Main**时，我们又遇到了问题。这不是什么大问题。

问题将在**BranchB**的 RI 合并到**Main之后出现，从****Main** -> ***WhatEverBranch***的每个 FI 合并都将具有“合并”状态的**所有文件。**

这是一个**大**问题，因为我们在存储库中有大约 120 多个分支和大约 50,000 个文件。

此外，**BranchB**和**BranchB1**将在其中进行更多工作，并且将进行更多次反向集成。如果不签入具有“合并”状态的文件，然后 a) 在此后的每次 RI 合并时忽略它们，或者 b) 在一次 RI 合并后停止使用分支，这将是一个很大的不便。

*   有什么方法可以让 TFS 永远忘记“合并”状态更改？
*   有没有办法我可以删除这种关系（重新养育到“No Parent”然后回到“BranchB”并没有看到工作）？

我试过了`tf merge source dest /discard`，但仍然有“合并”状态。

# java - 从 SAXparser 类 (Java) 解析字符串时出现 Long.parseLong 错误

> ID：13369314
> 
> 赞同：1
> 
> 时间：2012-11-13T21:42:14.537
> 
> 标签：java, parsing, runtime-error, saxparser

我有一个问题，但我不知道如何解决它：我需要从一个字符串中获取一个长数字（我在我编写的一个 SAXparser 类中获取这个字符串以从 XML 文件中获取一些字段）。

这是有问题的代码：

```
if (bprice) {
String price = new String(ch, start, length);
System.out.println("Product price: " + price);
bprice = false;
if (price.equalsIgnoreCase("0"))
product.price = null;
else product.price = Long.parseLong(price);
} 
```

（**产品**是我存储所有产品信息的对象的一个​​实例。我在最后一行得到了错误）

我调试了它，我得到了这个：

> > 目标 VM 中发生异常：对于输入字符串：“1.04”java.lang.NumberFormatException：对于输入字符串：“1.04”在 java.lang.NumberFormatException.forInputString(NumberFormatException.java:48) 在 java.lang.Long.parseLong( Long.java:419) 在 java.lang.Long.parseLong(Long.java:468) 在 com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser 的 parser.LectorXML.characters(LectorXML.java:325) .characters(AbstractSAXParser.java:538) 在 com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:464) 在 com.sun.org.apache.xerces.internal.parsers.XML11Configuration .parse(XML11Configuration.java:808) 在 com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737) 在 com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119) 在 com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java: 1205）在parsers.LectorXML.leer（LectorXML.java:71）在parsers.LeerXML.main（LeerXML.java:20）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:43:07.273

1.04 is not a valid long. It is in double format.

You need to use [Double.parseDouble(String);](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29) instead.

Example:

```
Double.parseDouble(precio1); 
```

# r - 独立于平台的版本 trellis.device(device="windows",...)

> ID：13369323
> 
> 赞同：0
> 
> 时间：2012-11-13T21:42:35.250
> 
> 标签：r, lattice

是否有一种独立于平台的方式来排列用于屏幕输出的晶格图？

我的方法涉及使用：

```
trellis.device(device="windows")
print(chart.hist, split = c(1,1,1,2), more = TRUE)
print(chart.cdf, split = c(1,2,1,2)) 
```

在我的 Mac 上，我需要`trellis.device(device="x11",...)`，在我工作的 Windows 机器上，我需要`trellis.device(device="windows",...)`

一个例子：

```
set.seed(1)
x <- rnorm(100, 0, 1)

discrete.cdf <- function(x, decreasing=FALSE){
    x <- x[order(x,decreasing=FALSE)]
    result <- data.frame(rank=1:length(x),x=x)
    result$cdf <- result$rank/nrow(result)
    return(result)
}

my.df <- discrete.cdf(x)

chart.hist <- histogram(~x, data=my.df,
                        xlab="")
chart.cdf <- xyplot(100*cdf~x, data=my.df, type="s",
                    ylab="Cumulative Percent of Total")

graphics.off()
trellis.device(device = "windows", width = 6, height = 6)
print(chart.hist, split = c(1,1,1,2), more = TRUE)
print(chart.cdf, split = c(1,2,1,2)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:16:51.813

只需省略该`trellis.device()`功能的“设备”选项即可。它将采用特定于平台的默认值（至少它在 Linux 上的工作方式与此处类似，“x11”是默认设备）。

# javascript - 我可以使用 javascript 填充 mailto 电子邮件吗？

> ID：13369325
> 
> 赞同：0
> 
> 时间：2012-11-13T21:42:35.950
> 
> 标签：javascript, mailto

> **可能重复：**
> [大型机构的 mailto 链接](https://stackoverflow.com/questions/5857/mailto-link-for-large-bodies)

我正在制作一个基本的 CRM 系统。

用户可以使用富文本编辑器保存/编辑他的电子邮件签名 - 然后将其保存到 mysql 表中。

然后，当用户单击客户电子邮件时，使用 mailto 会打开一封给该客户的电子邮件。

有没有办法在那封电子邮件中保存他的签名？

我知道 &body= 东西，但它只能处理 256 个字符，并且必须编码行和空格。

我想知道是否有办法用javascript做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:54:49.313

简短的回答：**不**。Javascript 不能改变外部程序解释链接协议的方式。

然而，Javascript 可以使用动态内容填充链接目标，但它无法绕过通常的浏览器限制。

# c# - 级联集空实体框架

> ID：13369327
> 
> 赞同：2
> 
> 时间：2012-11-13T21:42:52.940
> 
> 标签：c#, entity-framework, entity-framework-4, cascade

我在实体框架方面遇到问题。我要实体：项目和类别。一个类别有多个项目，一个项目只有一个类别。

现在，我想要的是当我删除一个类别时，该类别的所有项目都设置为 null（因此类别引用）。我在我的 edmx 文件中启用了级联，但它根本不起作用..

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:58:35.540

此功能在 EF 设计器中不可用。您必须在 DBMS 中配置此行为。

EF 仅支持设计器上的 CASCADE DELETE 或 PREVENT DELETE 行为。

此外，请注意已删除类别的导航属性将返回 null，并可能引发异常。

# gnuplot - 如何在 gnuplot 中使用多行数据文件？

> ID：13369328
> 
> 赞同：2
> 
> 时间：2012-11-13T21:42:58.510
> 
> 标签：gnuplot

我有一个包含两列的数据文件：`Xi`和`Yi`. 我想绘制`Xi`与`(Yi-1 - Yi)/Yi-1`for 的对比图`i>1`。是否可以在 GNUPlot 直接中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:58:20.853

是的，直接使用 gnuplot 是可能的——这并不容易：

```
firstval = NaN
yi1(yi) = (returnval=firstval, firstval=yi, returnval)
plot "datafile" using 1:((yi1($2)-$2)/returnval) 
```

您需要使用内联函数。内联函数的形式为：

```
funcname(args,...) = (statement1,statement2,...,statementn, return_value) 
```

在这里，我刚刚创建了一个函数来保存它传递的最后一个值。不幸的是，这个解决方案变得有点难看，因为我不能`yi1`在 using 规范中调用两次（第二次，我会得到错误的返回值），所以我不得不直接引用保存返回值的变量。它不漂亮，但它有效。您可以通过传递（行号）并仅在 $0 更改时才更新它可能会“漂亮”一点`$0`，但是对于这个 hack 可能不值得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:28:50.110

直接在 gnuplot 中执行此操作很棘手。问题是您必须在计算中使用第 (i-1) 个元素，而 gnuplot 无法自动执行此操作。它可以做简单的计算，但只能在同一行，例如

```
plot "datafile" using ($1):(($2-$1)/$2) 
```

会很容易。

对于您需要做的事情，我推荐[octave](http://www.gnu.org/software/octave/)，或者您可以使用电子表格应用程序准备数据文件。

在八度音程中，您可以这样绘制：

```
d = load("datafile")
plot(d(2:end, 1), d(1:end-1, 2)-d(2:end, 2)./d(1:end-1, 2)) 
```

# facebook-graph-api - 图形 API 和动态访问令牌

> ID：13369333
> 
> 赞同：-1
> 
> 时间：2012-11-13T21:43:20.050
> 
> 标签：facebook-graph-api, access-token, facebook-access-token

所以基本上我正在制作一个应用程序，我需要在其中嵌入一个自定义的 facebook 墙馈送。我只想要一个 JSONP 响应……仅此而已。

通过阅读访问令牌等几天我得出的结论是，没有有效的访问令牌就无法使用图形 API，但是我不想要求用户登录（目标平台不适合简单的字符输入，加上 id 必须创建自定义弹出键盘和交互 JS）。

因此，我发现的唯一选择是将访问令牌用于我在 facebook 中设置的应用程序。但是我不想分发应用程序秘密，所以我可以使用`APP_ID|APP_SECRET`我见过的方法（无论它到底是什么），因为这意味着我认为是坏事？

所以我的想法是，在服务器上创建一个代理脚本，它将保存应用程序的秘密等这个脚本将向 FB 询问访问令牌，并将其传递回我的应用程序，以便我的应用程序可以获取墙源并继续使用用于刷新提要的令牌。

如果我打开我的应用程序并获得一个访问令牌，然后另一个人打开我的应用程序并获得一个访问令牌，我的访问令牌会随着新的生成而过期吗？或者您可以为同一个应用程序生成任意数量的访问令牌吗？

或者有人能想到更好的方法吗？

**工作流程**

1.  用户在设备上打开应用程序（该设备是一个定制的包含单元，想想一个 Raspberry Pi，但简单 100 倍，并且它插入电视）
2.  该应用程序将许多提要加载到页面上的区域中，这些提要包括来自特定个人资料的 facebook 墙提要。
3.  该应用程序将在无人值守的情况下运行数天/数周/数月，并定期刷新信息源。

**FB 访问令牌工作流程**

由于用户无法登录，我需要提供访问令牌。为了安全起见，我不想传递我的应用程序秘密。所以我的想法是使用托管在我的服务器上的 php 代理脚本来获取访问令牌。像这样：

1.  首先加载应用程序并运行一个函数，该函数对我的 php 代理脚本进行 ajax 调用以请求令牌
2.  我的代理脚本将使用我的应用程序 ID 和密码向 facebook 发出请求，并从 FB 获取访问令牌
3.  然后，我的代理脚本会将访问令牌作为对应用程序的 jsonp 响应转储回
4.  该应用程序将从 jsonp 响应中获取访问令牌，并将其存储
5.  该应用程序将使用检索和存储的令牌来处理对 facebook graph api 的所有墙提要请求。
6.  如果应用程序由于某种原因检测到它的令牌不起作用，它将尝试从我的令牌代理脚本中获取一个新令牌。

这就是我关于如何使用令牌代理脚本向每个人提供访问令牌的想法，而不会泄露如果有人查看应用程序源代码会导致问题的信息（这根本不难）。但是，如果每次您请求新令牌时 facebook 都会删除旧令牌，这将不起作用。所以这是直接的问题。

但是，如果有更好的方法解决这个问题，我的耳朵是敞开的。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T08:53:13.430

我不确定您是否能够使用 App 访问令牌做您想做的事情。

1）应用程序访问令牌无权访问用户可以访问的所有内容，或者您​​可以使用 user_access 令牌访问的内容。比如，一些有年龄限制的页面，某某。

2）引用文档：

> 请注意，应用程序访问令牌用于发布操作和发布流权限允许的**发布目的。**您将**无法使用应用访问令牌检索有关具有给定 ID 的状态更新帖子的信息。**相反，您应该 为此目的使用**用户访问令牌。**

3）使用app access_token的检索能力仅限于，

```
a.Basic Profile Info of a User (ID, Name, Username, Gender).

b.A User’s Friends and their IDs.

c.Permissions granted by the User to your App(probably includes email, etc etc.) 
```

所以，我不确定它是否适用于您正在寻找的东西。但是如果你可以让用户先登录，并且让用户每60天通过一次auth（他不需要登录），你可以使用**扩展用户access_tokens。**

如果你这样做，这将有所帮助。我回答了其他一些关于 cronjob 的问题。阅读：[Facebook PHP 发布到带有 cronjob 的粉丝页面？](https://stackoverflow.com/questions/13217564/facebook-php-post-to-fan-page-with-cronjob/13284731#13284731)

希望这可以帮助

# c++ - 如何从 HWND 获取 WNDCLASS？

> ID：13369334
> 
> 赞同：3
> 
> 时间：2012-11-13T21:43:19.233
> 
> 标签：c++, hwnd

我现在正在使用 Playground SDK，需要获取我的游戏窗口的 WNDCLASS。我在 SDK 中没有找到任何东西，这就是为什么我试图用游戏窗口的 hWnd 来做到这一点。那么有什么方法可以从 HWND 获取 WNDCLASS 吗？我需要这个来改变游戏窗口中的系统光标

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T21:50:19.627

我不知道有问题的 SDK，但只要它提供对本机`HWND`类型的访问，您就可以使用本机调用。

* * *

**要更改该类的所有窗口的光标：**

使用`SetClassLongPtr`功能：

```
SetClassLongPtr(hwnd, GCLP_HCURSOR, reinterpret_cast<LONG_PTR>(newCursorHandle)); 
```

* * *

**要更改仅游戏窗口的光标：**

首先`WM_SETCURSOR`，您可以处理一条消息来控制窗口中显示的光标。您可以在下面的 Adam Rosenfield 评论中了解更多相关信息。

除此之外，还有另一种选择：根据`SetCursor`文档，首先确保将类的光标设置为空（`NULL`）。然后就可以`SetCursor`在鼠标进出客户区时使用该功能了。为了不干扰类中的其他窗口，请确保在鼠标进入时将类光标设置为 NULL，并将其设置回鼠标退出时的状态。

```
otherCursor = SetCursor(otherCursor); 
```

* * *

**要获取与窗口关联的只读 WNDCLASSEX：**

首先，使用[`GetClassName`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633582%28v=vs.85%29.aspx)获取与窗口关联的类的名称：

```
std::array<TCHAR, 256> className; //256 is max classname length
GetClassName(hwnd, className.data(), className.size()); 
```

然后，在调用中使用它[`GetClassInfoEx`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633579%28v=vs.85%29.aspx)：

```
WNDCLASSEX wce;
GetClassInfoEx(GetModuleHandle(nullptr), className.data(), &wce); 
```

现在你可以访问`wce`读取类结构的内容了。如果需要，您可以替换`std::array`为`std::vector`和`.data()`，`&className[0]`以及`nullptr`替换为`NULL`。`GetClassInfo`如果您需要它，将返回 a`WNDCLASS`而不是`WNDCLASSEX`.

# mongodb - 在集合之间移动文档后，Mongodb 崩溃

> ID：13369336
> 
> 赞同：1
> 
> 时间：2012-11-13T21:43:27.380
> 
> 标签：mongodb

我将一堆文档插入一个集合，然后一个 cron 作业将它们移动到另一个集合。

我这样做的原因是有一个非索引集合需要快速存储数据，第二个集合被索引，因此插入速度很慢，因此 cron 作业移动数据。

我使用以下脚本来移动数据

```
db.smalldaily.find().forEach(function(doc){db.largedaily.save(doc);db.smalldaily.remove(doc);}); 
```

问题是在移动数据完成后，mongod 似乎崩溃了，当我登录 mongo shell 并键入 db.large 然后按 TAB 按钮自动完成集合名称时，mongodb 进入昏迷状态，我需要重新启动 mongod 服务以使其工作。

是我做错了什么，还是说 mongodb 还不成熟的传言部分属实？

我在 CentOS 上使用 MongoDB shell 版本：2.2.1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T04:51:33.043

因此，这基本上是作为服务器端 javascript 运行的，它`forEach`在 shell 中创建一个巨大的循环，遍历这 100 万多个文档，我敢打赌，在运行时（非映射）内存量会非常高。

如果您使用驱动程序在外壳外部运行它，您可能根本看不到问题。迁移是否完成，然后不清理内存？如果是这样，那么这可能就是问题所在。

下一个版本（2.3+）将进行更改以使 shell 性能更高，但现在通过驱动程序而不是在 shell 内部执行此操作可能是一个更好的主意。一方面，[分批](http://www.mongodb.org/display/DOCS/Inserting#Inserting-Bulkinserts)执行此操作会比一次迭代一个更有效。

话虽如此，如果这很容易重现，特别是如果您可以提供示例数据集，那么这将是[错误报告](https://jira.mongodb.org/browse/SERVER/)的完美素材，以便开发人员可以弄清楚为什么在处理此循环时外壳会呕吐。

# click - 如何用鼠标点击mac上的特定位置？

> ID：13369340
> 
> 赞同：0
> 
> 时间：2012-11-13T21:43:39.117
> 
> 标签：click, osx-mountain-lion, automator

给定动态（意味着那些可能会随时间变化）x，y屏幕的坐标值如何在mac上以编程方式（或通过自动机或其他任何东西）在该点上进行实际点击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T13:24:20.200

我找到了两个巧妙的解决方案来解决这个问题：

1.  [是一个名为Cliclick](http://www.bluem.net/en/mac/cliclick/)的命令行实用程序
2.  是一个非常简洁的 IDE 和一个称为[Sikuli的额外脚本语言](http://www.sikuli.org)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T23:40:25.890

[用](http://www.bluem.net/en/mac/cliclick/)循环点击：

```
$ for ((i=0; i<=60; i++)); do cliclick -r w:1000 c:297,256 c:381,255; done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T07:55:14.483

我知道这是一个旧线程，但我想发布一个答案，以防万一有人偶然发现。

有一种新的完全独立于平台的自动化语言，称为[javAuto](http://javauto.org)。它几乎是一个可以跨平台编译和运行代码的 java 程序。

语法几乎与流行的自动化语言 AutoIT 完全一样。

要模拟鼠标点击，您可以使用以下命令：

```
mouseClick(button, x, y); 
```

例子：

```
//click in the center of the screen
mouseClick("left", SCREEN_WIDTH/2, SCREEN_HEIGHT/2 ); 
```

# java - 为什么会这样运行？

> ID：13369346
> 
> 赞同：1
> 
> 时间：2012-11-13T21:43:53.293
> 
> 标签：java, arraylist

我在 NetBeans 中进行开发，想知道为什么当我按 F6 时这段代码会运行？我没有主要方法。当我按下 F6 时，代码运行 LoadListings 方法并从位于我的硬盘驱动器上的“houses.txt”加载数组列表。它不运行之前的 LoadArray 方法，所以最后只打印文本文件数据。

```
package housetracker;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileReader;
import java.io.FileWriter;
import java.io.IOException;
import java.text.DecimalFormat;
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.StringTokenizer;

public class HouseList {

List<House> houseList;
private String defaultFileName = "houses.txt";
private String fileSeparator = System.getProperty("file.separator");
private String workingDirectory = (System.getProperty("user.dir") + this.fileSeparator);
private String listingsFile = workingDirectory + "txt_files" + this.fileSeparator +  defaultFileName;
private BufferedReader br;
private FileReader fr;
private String line;
private Integer address;
private String street;
private double price;
private int rooms;
DecimalFormat moneyFormat = new DecimalFormat("0.00");

public HouseList() {
    houseList = new ArrayList();

}

public void FillArray() {
    fillArray();
}

private void fillArray() {
    houseList.add(new House(123, "Main", 75000.00, 2));
    houseList.add(new House(621, "Mystreet", 175000.00, 5));
    houseList.add(new House(4568, "1st", 725000.00, 8));
    houseList.add(new House(5546, "Broadway", 85600.00, 3));
    houseList.add(new House(8744, "Texas", 195610.00, 6));
    houseList.add(new House(45454, "Maine", 125000.00, 4));
    houseList.add(new House(4465, "Main", 375000.00, 2));
}

public void LoadListings(String fileName) {
    loadListings("C:\\\\temp\\houses.txt");
}
//Load the listings file into the array.

private void loadListings(String fileName) {
    // Clear variables
    this.br = null;
    this.fr = null;
    this.line = null;

    try {
        // Set FileReader to access the user specified file name.
        this.fr = new FileReader(fileName);
        System.out.println(fr);
        // Use a BufferedReader to load file into memory.
        this.br = new BufferedReader(this.fr);
        System.out.println(br);
        System.out.println("*****************************************************\n");

        // Read file contents a line at a time until file returns null.
        while ((line = this.br.readLine()) != null) {
            System.out.println(line);

            // Let StringTokenizer parse each line and split data into elements 
            // using an empty space as the separator.  
            StringTokenizer stringTokenizer = new StringTokenizer(line, " ");

            // Loop through each each element of the line 
            while (stringTokenizer.hasMoreElements()) {
                this.address = Integer.parseInt(stringTokenizer.nextElement().toString());
                this.street = stringTokenizer.nextElement().toString();
                this.price = Double.parseDouble(stringTokenizer.nextElement().toString());
                this.rooms = Integer.parseInt(stringTokenizer.nextElement().toString());
                // Format price to look like money.
                moneyFormat.format(this.price);

                // Build a string just because I can
                StringBuilder sb = new StringBuilder();
                sb.append("*******************");
                sb.append("\nAddress    : ").append(this.address);
                sb.append("\nStreet  : ").append(this.street.toUpperCase());
                sb.append("\nPrice : ").append(this.price);
                sb.append("\nRooms       : ").append(this.rooms);
                sb.append("\n*******************");
                System.out.println(sb.toString());

                // Add data to array
                houseList.add(new House(this.address, this.street, this.price, this.rooms));
            }
        }

        System.out.println("*****************************************************");
        System.out.println("Array is loaded");
        // Set a variable indicating array is loaded and ready for transactions.
        //this.isArrayLoaded = true;

    } catch (IOException e) {
        // Catch any IO errors while accessing the file and alert the user.
        System.out.println("An IO error occured while accessing " + fileName + ". Operation terminated.\n\n" + e);
        //this.isArrayLoaded = false;
    } finally {
        try {
            // Close file operations
            if (this.br != null) {
                this.br.close();
                this.fr.close();
            }
        } catch (IOException ex) {
            System.out.println("\n\n" + ex + "\n");
            ex.printStackTrace();
        }
    }
    System.out.println("\n\n");
    //return this.isArrayLoaded;
}

public void showHouses() {
    Iterator<House> itr = houseList.iterator();
    while (itr.hasNext()) {
        System.out.println(itr.next().toString());
    }
}
} 
```

而这堂课...

```
package housetracker;

public class House {
private int address;
private String street;
private double price;
private int rooms;

public House(int address, String street, double price, int rooms) {
    this.address = address;
    this.street = street;
    this.price = price;
    this.rooms = rooms;
}

public void SetAddress (int address){
    setAddress(address);
}

private void setAddress (int address){
    this.address = address;
}

public void SetStreet (String street){
    setStreet(street);
}

private void setStreet(String street){
    this.street = street;
}

public void SetPrice (double price){
    setPrice(price);
}

private void setPrice (double price){
    this.price = price;
}

public void SetRooms(int rooms){
    setRooms(rooms);
}

private void setRooms(int rooms){
    this.rooms = rooms;
}

public int GetAddress (int address){
    address = getAddress(address);
    return address;
}

private int getAddress (int address){
    return address;
}

public String GetStreet (String street){
    street = getStreet(street);
    return street;
}

private String getStreet(String street){
    return street;
}

public double GetPrice (double price){
    price = getPrice(price);
    return price;
}

private double getPrice (double price){
    return price;
}

public int GetRooms(int rooms){
    rooms = getRooms(rooms);
    return rooms;
}

private int getRooms(int rooms){
    return rooms;
}
@Override
public String toString() {
    return address + " " + street + " " + price + " " + rooms;
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:45:55.733

奇怪的是，是的：Java 的早期版本似乎允许您运行没有“main()”的应用程序。

*   [http://www.coderanch.com/t/567731/Java/java/we-develop-java-application-without](http://www.coderanch.com/t/567731/Java/java/we-develop-java-application-without)

这种行为现在在 JDK 7 中是不允许的 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:41:26.540

我可以在这里删除吗？我发现隐藏在我的 IDE 中未打开的另一个类中的主要方法。我觉得自己像个白痴！

# c# - BringIntoView 方法不适用于内部扩展器

> ID：13369347
> 
> 赞同：1
> 
> 时间：2012-11-13T21:43:54.477
> 
> 标签：c#, wpf, expander

我有一个带有多个扩展器的 WPF 应用程序

```
<ScrollViewer>
    <StackPanel>
        <Expander Header="OuterExpander1" Expanded="ExpanderExpanded">
            <StackPanel>
                <Expander Header="InnerExpander1" Expanded="ExpanderExpanded"/>
                <Expander Header="InnerExpander2" Expanded="ExpanderExpanded"/>
            </StackPanel>
        </Expander>
        <Expander Header="OuterExpander2" Expanded="ExpanderExpanded">
            <StackPanel>
                <Expander Header="InnerExpander3" Expanded="ExpanderExpanded"/>
                <Expander Header="InnerExpander4" Expanded="ExpanderExpanded"/>
            </StackPanel>
        </Expander>
    </StackPanel>
</ScrollViewer>

private void ExpanderExpanded(object sender, System.Windows.RoutedEventArgs e)
{
    (sender as Expander).BringIntoView(new Rect(0, 0, 0, 1000));
} 
```

但是 BringIntoView 方法不适用于内部扩展器，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:51:24.740

尝试为扩展器设置 ax:Name。它似乎为我解决了问题！

# ruby-on-rails - ActiveRecord 中的零个或一个关联

> ID：13369348
> 
> 赞同：8
> 
> 时间：2012-11-13T21:43:59.740
> 
> 标签：ruby-on-rails, ruby, associations, belongs-to, has-one

我正在编写一个 Ruby on Rails 应用程序，它有两个模型——用户和农场。如果用户的农夫字段设置为 true，则用户被视为农夫。但是，农民没有单独的班级。

一个用户可能有一个农场，或者根本没有。（我相信这被称为零或一关系）。如果我放：

```
has_one :farm 
```

在用户模型和

```
belongs_to :user 
```

在农场模型中，这将在用户和农场之间建立一对一的关系，并意味着每个用户都有一个农场。如果我这样做了，每个用户都会有一个农场，这没有多大意义，因为有些用户不能拥有一个农场。

简而言之，我想要的是用户只有在他们的农民布尔值设置为 true 时才能拥有一个农场。否则，这种关系不应该存在。他们是使用 ActiveRecord 来做到这一点的一种方式吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-03-21T15:10:32.973

has_one 并不意味着您必须拥有一个相关实体（此处为农场）。has_one 用于我们有 0 或 1 个链接记录的关系。

你可以在这里找到类似的讨论。

[当模型具有另一个模型的一个或零个实例时，是否可以使用 has_one 关联？](https://stackoverflow.com/questions/19005296/can-has-one-association-be-used-when-the-model-has-one-or-zero-instances-of-anot)

# python - libtorrent API 给出错误，我不知道如何解释

> ID：13369359
> 
> 赞同：0
> 
> 时间：2012-11-13T21:45:05.543
> 
> 标签：python, hyperlink, bittorrent, libtorrent, magnet-uri

您好，我有一个错误，我尝试管理失败

有问题的代码是这个函数

```
def get_peer_info_from_magnet( magnet, ports, opt ):
    ses = lt.session()
    ses.listen_on( ports[0], ports[1] )

    ses.set_download_rate_limit( opt.download_rate  * 1024 )
    ses.set_upload_rate_limit( opt.upload_rate * 1024 )
    h = lt.add_magnet_uri( ses, magnet, {
          'save_path': opt.save_path,
          'storage_mode': lt.storage_mode_t.storage_mode_sparse,
          'seed_mode': True,
          #'tracker_url': opt.tracker_url,
          'paused': False
         } ) 
```

这是产生错误

```
Traceback (most recent call last):
  File "/usr/lib/python2.6/multiprocessing/process.py", line 232, in _bootstrap
    self.run()
  File "magnet_info.py", line 45, in run
    self._fetchData( magnet )
  File "magnet_info.py", line 54, in _fetchData
    pi = get_peer_info_from_magnet( magnet, ports, self.options )
  File "magnet_info.py", line 140, in get_peer_info_from_magnet
    'paused': False
KeyError: 'auto_managed' 
```

我在 libtorrent 文档中查找了这个错误，发现一个方法 set_upload_mode() 看起来很有希望，但我要么没有正确使用它，要么它不是正确的路径。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:30:12.553

libtorrent 似乎希望您传入一个`auto_managed`参数。根据错误，这可能是由于`'paused': False`您传入的参数所致；你可能需要传递`'auto_managed': True`这个，虽然我自己没有使用过 libtorrent，所以我不确定。您可能还想尝试删除`'paused': True`，看看是否有效。

仔细查看后，它[看起来`add_magnet_uri()`](http://www.rasterbar.com/products/libtorrent/manual.html#add-magnet-uri)在 libtorrent[中已被弃用。](http://www.rasterbar.com/products/libtorrent/manual.html#add-magnet-uri)相反，您应该简单地调用`add_torrent()`并传入`url`带有磁铁 URL 的参数。您可能想尝试一下。

# drupal - 如何通过视图模块显示自定义内容类型的所有字段

> ID：13369363
> 
> 赞同：0
> 
> 时间：2012-11-13T21:45:21.997
> 
> 标签：drupal, drupal-6, drupal-modules, drupal-views

我使用的是 drupal 6.x，并创建了一个名为 Task 的自定义内容类型。我可以为任务添加内容，到目前为止一切都很好。现在我想要一个表格来列出自定义内容类型任务的所有内容。

我已经设置了一个新视图，但我无法让该内容类型可用的所有字段都显示在列表中。

我在默认视图中设置的是我设置为 rowstyle 节点。如何找到所有引用我的自定义内容类型的字段。我可以获得为自定义内容类型设置的一些 cck 字段，但不是标题，例如。谢谢，最好的问候，伯恩哈德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T14:37:13.987

我不明白您的问题，您的自定义内容类型是一个节点，因此在您的视图中，您可以通过您的自定义内容类型的节点显示节点标题过滤。

我更喜欢使用模块显示套件：[http](http://drupal.org/project/ds) ://drupal.org/project/ds ，它与视图集成以显示节点的自定义构建模式，而不是显示单个字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:39:09.113

我发现了如何在视图中设置自定义内容类型。诀窍是添加一个称为节点内容的显示。然后有一个称为节点类型的字段。在默认显示中我没有找到方法。

伯恩哈德

# php - .htaccess mod_rewrite 不起作用。重定向到 404 错误

> ID：13369364
> 
> 赞同：0
> 
> 时间：2012-11-13T21:45:24.867
> 
> 标签：php, .htaccess, mod-rewrite

我正在为一个将博客/新闻页面作为其网站一部分的客户开展一个项目。这一切都很好，但是他们要求他们有自定义永久链接而不是标准问题 php 变量。

我使用了 searchfriendlyurls.com 上的生成器来创建重写规则。我已将此添加到位于网站根文件夹中的 .htaccess 文件中，但是当我单击该链接时，它只会将我发送到我的主机 404 错误页面。有什么建议么。.htaccess 文件如下：

```
Options -Multiviews

RewriteEngine On
RewriteBase /

# Force search engines to use domain.example.org.uk
RewriteCond %{HTTP_HOST} !^domain\.example\.org\.uk$
RewriteRule ^(.*) http://domain.example.org.uk/$1 [R=301,L]

# Specify search friendly URLs
RewriteRule ^media/news/([a-z]+)/([a-z]+)/([a-z]+)/([a-z]+)$ /media/news/article.php?article_url_year=$1&article_url_month=$2&article_url_title=$3&article_id=$4 [L]

# Generated for free at SearchFriendlyURLs.com 
```

我们欢迎所有的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:49:44.180

我注意到您的 article.php 可能期望`numbers`通过您的查询*article.php 来判断？`article_url_year=`$1& `article_url_month=`$2*但是你的 RewriteRule *RewriteRule ^media/news/`([a-z]+)`*只会匹配字母。

尝试替换这一行：

```
RewriteRule ^media/news/([a-z]+)/([a-z]+)/([a-z]+)/([a-z]+)$ /media/news/article.php?article_url_year=$1&article_url_month=$2&article_url_title=$3&article_id=$4 [L] 
```

有了这个：

```
RewriteRule ^media/news/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)/([a-zA-Z0-9-]+)$ /media/news/article.php?article_url_year=$1&article_url_month=$2&article_url_title=$3&article_id=$4 [L] 
```

看看它是否有效。

此代码仅允许：

*   所有字母（大写和小写）。
*   所有数字。
*   破折号 (-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T03:39:57.940

添加另一个正则表达式变体：

```
RewriteRule ^media/news/([^/]+)/([^/]+)/([^/]+)/([^/]+)$ /media/news/article.php?article_url_year=$1&article_url_month=$2&article_url_title=$3&article_id=$4 [L] 
```

例如对于 URL PATH：/media/news/2012/11/test-article/1

重写日志（如果启用）将显示：

```
[rid#7f920b4b00a0/initial] (3) [perdir /srv/www/htdocs/] applying pattern '^media/news/([^/]+)/([^/]+)/([^/]+)/([^/]+)$' to uri 'media/news/2012/11/test-article/1'
[rid#7f920b4b00a0/initial] (2) [perdir /srv/www/htdocs/] rewrite 'media/news/2012/11/test-article/1' -> '/media/news/article.php?article_url_year=2012&article_url_month=11&article_url_title=test-article&article_id=1'
[rid#7f920b4b00a0/initial] (3) split uri=/media/news/article.php?article_url_year=2012&article_url_month=11&article_url_title=test-article&article_id=1 -> uri=/media/news/article.php, args=article_url_year=2012&article_url_month=11&article_url_title=test-article&article_id=1
[rid#7f920b4b00a0/initial] (2) [perdir /srv/www/htdocs/] trying to replace prefix /srv/www/htdocs/ with /
[rid#7f920b4b00a0/initial] (1) [perdir /srv/www/htdocs/] internal redirect with /media/news/article.php [INTERNAL REDIRECT]
[rid#7f920bcdda00/initial/redir#1] (3) [perdir /srv/www/htdocs/] strip per-dir prefix: /srv/www/htdocs/media/news/article.php -> media/news/article.php
[rid#7f920bcdda00/initial/redir#1] (3) [perdir /srv/www/htdocs/] applying pattern '^media/news/([^/]+)/([^/]+)/([^/]+)/([^/]+)$' to uri 'media/news/article.php'
[rid#7f920bcdda00/initial/redir#1] (1) [perdir /srv/www/htdocs/] pass through /srv/www/htdocs/media/news/article.php 
```

# watir - 在 Watir 中处理对话框

> ID：13369365
> 
> 赞同：3
> 
> 时间：2012-11-13T21:45:31.863
> 
> 标签：watir

我在处理以下情况时遇到问题。

我正在编写测试脚本，它将使用谷歌浏览器登录系统。

我正在从excel中读取数据。

第一组数据的用户名/密码组合不正确。

场景是输入错误密码时，弹出窗口显示用户名/密码不正确的消息。

在这种情况下，我应该能够关闭弹出窗口，并且 watir 应该从 excel 中读取下一组数据，直到满足正确的用户名/密码组合。

* * *

问题是我不确定如何检测弹出对话框。它有以下代码：

```
<div id="alertMsg" style="width: auto; min-height: 76.69999980926514px; height: auto;" class="ui-dialog-content ui-widget-content"><div class="dialogBoxTitle">&nbsp;</div>
<div class="alertMessage pointSearch">    
    <form name="saveComfortModelForm" class="pointSearchFrm">
        <table cellpadding="0" cellspacing="0" width="100%" height="100%" class="pointSearchTable">
            <tbody><tr>
                <td>Login failed due to invalid password or username</td>
            </tr>
        </tbody></table>    
    </form>
</div></div> 
```

还有点击链接会关闭弹出窗口。代码如下：

```
<div class="ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix">
<span class="ui-dialog-title" id="ui-dialog-title-alertMsg">&nbsp;</span>
<a href="#" class="ui-dialog-titlebar-close ui-corner-all" role="button">
<span class="ui-icon ui-icon-closethick">close</span>
</a>
</div> 
```

显示此消息时，我应该能够关闭窗口。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T05:23:21.763

您可以通过检查其中一个元素的可见性来检测是否显示了弹出对话框。这可以通过`visible?`or`present?`方法来完成。尝试：

```
browser.div(:id => "alertMsg").present?
#=> Returns true if popup is displayed, false if not displayed 
```

您可以通过单击关闭链接关闭弹出窗口：

```
browser.link(:class => "ui-dialog-titlebar-close").click 
```

逻辑的 wir 部分可能是这样的：

```
begin
  #Execute your logic to sign in with the next user/password

  #Check if the sign in was successful
  sign_in_successful = not(browser.div(:id => "alertMsg").present?)
  unless sign_in_successful
    browser.link(:class => "ui-dialog-titlebar-close").click
  end
end until sign_in_successful 
```

更新：似乎有些[人不喜欢 begin-while/until](http://rosettacode.org/wiki/Loops/Do-while#Ruby)而应该使用循环：

```
loop do
  #Execute your logic to sign in with the next user/password

  if browser.div(:id => "alertMsg").present?
    browser.link(:class => "ui-dialog-titlebar-close").click
  else
    break
  end
end 
```

结尾

# java - 将大量值传递给构造函数以初始化决赛。

> ID：13369367
> 
> 赞同：0
> 
> 时间：2012-11-13T21:45:33.697
> 
> 标签：java, constructor, initialization, final

所以想象一下我们有这样的情况：

```
public class Bar1 {
    public final int VALUE1; 
    public final double VALUE2;
    public final String NAME; 
    /*DOZENS OF FINALS!*/

    public Bar1(int v1, double v2, String name)
    {
        this.VALUE1 = v1; 
        this.VALUE2 = v2;
        this.NAME = name; 
    }

} 
```

和

```
public class Foo1
{
    private Bar1 bar1;
    private Bar1 bar2;
    private Bar1 bar3;
    /*Dozens of bars!*/

    public Foo1( //We need to pass the values in here)
                 {
                     bar1 = new Bar1( //we need to initialise each of the bars. )
                     bar2 =...
                     bar3 = ...
                 }

} 
```

这样做的好方法是什么？我认为将每一个都作为自己的论点传递，

例如：

```
public class Foo1
{
    private Bar1 bar1;
    private Bar1 bar2;
    private Bar1 bar3;
    /*Dozens of bars!*/

    public Foo1(int bar1Value1, double bar1Value2, String bar1String, 
                        int bar2Value1, double bar2Value2, String bar2String,
                        int bar3Value1, double bar3Value2, String bar3String)
                 {
                     bar1 = new Bar1(bar1Value1, bar1Value2, bar1String);
                     bar2 = new Bar1(bar2Value1, bar2Value2, bar2String);
                     bar3 = new Bar1(bar3Value1, bar3Value2, bar3String);
                 }

} 
```

是一个巨大的痛苦。

我将发布我提出的解决方案，但我想知道还有哪些其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:53:27.173

分离出你的类型。如果您有*几十*个字段，则几乎可以肯定：

*   其中一些字段是相互关联的，因此应该以它们自己的类型捕获，例如，如果您有 fields `address1`, `address2`, `address3`, `city`,`state`那么它应该是一个`Address`类型

*   有些字段根本不相关，并且不应该在同一类型中开始

我从来没有见过一个精心设计的有几十个字段的类。

一旦你减少了字段的数量，你就不会遇到笨拙的构造函数的问题。

如果您*仍然*有很多字段，那么构建器模式（如评论中所述）确实很好，但有点乏味：有一个可变构建器类型（通常是嵌套类型），然后是一个`build()`将构建器本身传递给的方法不可变类型的构造函数，它将构建器中的值复制到最终字段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:47:56.203

我的解决方案。将值作为二维字符串数组传入，并将每个字符串转换为其对应的类型。

```
public class Foo1
{
    private Bar1 bar1;
    private Bar1 bar2;
    private Bar1 bar3;

    public Foo1(String[][] values)
    {
        Bar1[] bars = {bar1, bar2, bar3};

        for (int i = 0; i<3; i++)
        {
            bars[i] = new Bar1(Integer.parseInt(values[i][0]), Double.parseDouble(values[i][1]), values[i][2]); 

        }

    }

}

public class FooBar1 {

    private static final String[][] myFoo1Values = {
            //Value1, Value2, Name
            //Integer, Double, String
            {"1", "2.22", "bar 1"},
            {"2", "5.59", "BAR TWO"},
            {"333", "2", "- tre"}
    };

    static private Foo1 myFoo1; 

    public static void main(String[] args) {
        // TODO Auto-generated method stub

        myFoo1 = new Foo1(myFoo1Values);

    }

} 
```

# ios - iOS 不向 NavigationController 推送新视图

> ID：13369368
> 
> 赞同：0
> 
> 时间：2012-11-13T21:45:33.977
> 
> 标签：ios, xcode, viewcontroller, navigationcontroller

我正在开发一个具有 TabView 控制器的应用程序，并且每个选项卡中都有一个 TabeView，我将 TableView 委托和数据源设置为对象的主 ViewController。我使用以下代码尝试将新的 ViewController 推送到 NavigationController：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    DonationsDataViewController *data = [self.storyboard instantiateViewControllerWithIdentifier:@"donationData"];
    //TODO set data to be passed;
    [self.navigationController pushViewController:data animated:YES];
    NSLog(@"Show donation details.");
} 
```

我遇到的问题是应用程序没有崩溃，我得到了我的日志：显示捐赠详细信息。但它从未推送过 ViewController，我在这里做错了吗？如果是这样，解决问题的适当途径是什么？

**编辑**

有关项目结构的更多信息，请参阅[THIS](http://dev.tinyclark.com/files/iOSProject.jpg)。我是 iOS 新手，这只是一个可以玩和学习的项目。压缩后的项目可以在[这里](http://dev.tinyclark.com/files/iBleed.zip)下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:49:00.437

您是否验证了 navigationController 实例不为零？在 Objective-C 中向 nil 的实例发送消息是有效的，这与在 C#/Java 中不同的是，在为 null 的实例上调用方法会引发异常。

# vb.net - 如何从 vb.net 中访问驱动器的原始数据？

> ID：13369372
> 
> 赞同：4
> 
> 时间：2012-11-13T21:45:39.953
> 
> 标签：vb.net, disk, hard-drive

如何在 vb.net 中访问驱动器的原始数据？我计划制作一个文件系统，但我需要原始磁盘访问。

我的意思是这样的：

```
Dim data(255) As Byte
data = ReadSector("C:", 5)
data(125) = asc("h")
data(126) = asc("e")
data(127) = asc("l")
data(128) = asc("l")
data(129) = asc("o")
WriteSector("C:", 5, data) 
```

其中 ReadSector 具有参数（驱动器为字符串，扇区为长），而 WriteSector 具有（驱动器为字符串，扇区为长，data() 为字节）。

这将在驱动器 C 的第 5 个扇区的第 126 个字符上写入“hello”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T23:30:22.803

什么操作系统，这很重要，因为从程序中删除了 Windows 95 直接磁盘访问之后。您可以在 vb 之外构建一个模块并链接到它。

# php - 在 php 中调用具有绝对 VS 相对路径的资源

> ID：13369373
> 
> 赞同：0
> 
> 时间：2012-11-13T21:45:43.030
> 
> 标签：php, relative-path, absolute-path

哎呀。

所以，我有这个烦人的问题。我在一个 php/html 文档中调用一个 css 文件，我得到了奇怪的结果——可能是因为我没能理解某些东西。

我在我的应用程序（constants.php）中定义了一些常量：

```
define("ROOT", dirname(dirname(__FILE__)));
define("DS", DIRECTORY_SEPARATOR);
define("RESOURCES", ROOT . DS . "resources" . DS);
define("CSS", RESOURCES . "css" . DS ); 
```

我的文件夹结构类似于：
Localhost（开发根文件夹。仅供参考：它是 C:\Users\Kyle\SkyDrive\www）
 框架
   库（文件夹）
    constants.php（文件）
   资源（文件夹）
    CSS（文件夹）
     wuxia-blue .css
   视图（文件夹）
    Booking（文件夹）
     dashboard.php（文件）

现在，在我的 dashboard.php 文件中，我将 css 文件夹链接如下：

```
<link rel='stylesheet' type='text/css' href=""> 
```

现在问题来了：当我使用 href="/framework/resources/css/wuxia-blue.css" 时，css 拉得非常好，一切看起来都很棒。唯一的问题是，我想用类似的东西来拉它：

```
href="<?php echo(CSS); ?>wuxia-blue.css" 
```

这解析为***C:\Users\Kyle\SkyDrive\www\Framework\resources\css\wuxia-blue.css***这是资源的正确路径，但是当我使用它时，页面上没有 CSS 拉出。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:49:55.617

这是因为您的 CSS 常量包含根。

你可以只是 str_replace 这个虽然

```
href="<?php echo(str_replace(ROOT,"",CSS)); ?>wuxia-blue.css" 
```

# c# - 如何在不按 F5 的情况下使缓存图像过期？

> ID：13369379
> 
> 赞同：10
> 
> 时间：2012-11-13T21:45:55.597
> 
> 标签：c#, html, asp.net-mvc

我正在使用 MVC4 和 C# 制作一个 Web 应用程序。

我允许用户为他们的个人资料图片上传图片。此时，我需要以前的个人资料图片过期，以便在浏览器重新加载页面时显示新图片。目前，由于两个图像共享相同的名称，浏览器使用已缓存的先前图像而不是新图像。

如果我强制浏览器使用 F5 重新加载，它会显示新图像。如何确保返回其个人资料页面的用户在不按 F5 的情况下看到新图像而不是浏览器缓存中的图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T21:52:09.577

您可以在图像文件名的末尾添加一个虚拟参数。例如，

```
<img src="...\avatar.jpg?d=7615833"> 
```

其中数字是随机的或时间戳。它将被忽略，但存在会强制浏览器重新加载图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T22:00:01.970

在服务器上存储图像时，在文件名中添加（静态）位随机文本，并在图像更改时重新生成。这样，浏览器将在图像相同时缓存图像，并在图像更改时重新加载，从而提供所需的行为，而不会增加不必要的页面加载时间。

# windows-runtime - WinRT OnSuspending

> ID：13369380
> 
> 赞同：0
> 
> 时间：2012-11-13T21:46:01.817
> 
> 标签：windows-runtime, windows-store-apps

App.xaml.cs 中的事件 OnSuspending 是什么意思？我想当我们将 Metro 更改为桌面或更改 Metro 应用程序时会触发此事件，但应用程序内存是怎么做的？它是被释放、保存在某处还是一直保存到操作系统耗尽内存？作为程序员，我必须执行哪些步骤才能在恢复后保持应用程序正常工作？我需要保存什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T07:27:15.403

从您的应用程序的角度来看，挂起有点像调试器的“暂停”选项。执行完全停止，操作系统可以选择稍后恢复应用程序或永久关闭它。

在第一种情况下，您的应用程序将不知道这期间的情况。如果它被操作系统关闭，在下次启动时，[先前的执行状态](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.activation.applicationexecutionstate.aspx)将设置为“终止”，因此您应该将应用程序恢复为收到“暂停”事件时的状态。

# python - 使用 pyodbc 创建 Python 模块

> ID：13369384
> 
> 赞同：1
> 
> 时间：2012-11-13T21:46:16.450
> 
> 标签：python, database, wxpython, pyodbc

想要制作可以从数据库中获取数据的小型 python 模块。我已经下载了 pydbc，它运行良好，如下所示：

```
import pyodbc
cnxn = pyodbc.connect('DRIVER={SQL Server};SERVER=MyDatabase;DATABASE=TestDB;UID='';PWD=''')
cursor = cnxn.cursor()
cursor.execute("select MeasurementValue from TAG_DATA where ItemID=10")
row = cursor.fetchone() 
```

现在我想把它放在一个模块中，这样我就可以导入它，我不需要每次都编写代码或定位文件。所以我试着像这样创建这个

```
import pyodbc
def testDB():
cnxn = pyodbc.connect('DRIVER={SQL Server};SERVER=MyDatabase;DATABASE=TestDB;UID='';PWD=''')
    cursor = cnxn.cursor()
    cursor.execute("select MeasurementValue from TAG_DATA where ItemID=10")
    row = cursor.fetchone()    
return row 
```

我将其保存在：文件“C:\Python27\lib\site-packages\testDB.py”中，我尝试导入它，但出现此错误：SyntaxError: 'return' outside function

我对 python 很陌生，有什么想法可以把它作为一个模块，并且每次我想运行该代码时都能够使用 import 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:52:07.140

正如其中一条评论所说，您的缩进搞砸了。空格（缩进）在 Python 中很重要。试试这样：

```
import pyodbc
def testDB():
    cnxn = pyodbc.connect("DRIVER={SQL Server};SERVER=MyDatabase;DATABASE=TestDB;UID='';PWD=''")
    cursor = cnxn.cursor()
    cursor.execute("select MeasurementValue from TAG_DATA where ItemID=10")
    row = cursor.fetchone()    
    return row 
```

此外，您必须对连接字符串使用双引号，因为您在字符串本身中使用单引号。我已经在上面更改了它们以反映这一点。

祝你好运，迈克

# iphone - 如何使用 NSURLConnection 取消持久连接？

> ID：13369386
> 
> 赞同：18
> 
> 时间：2012-11-13T21:46:16.763
> 
> 标签：iphone, objective-c, ios, ssl, nsurlconnection

是否可以销毁使用 NSURLConnection 创建的持久连接？我需要能够破坏持久连接并进行另一次 SSL 握手。

就像现在一样，调用 [conn cancel] 会留下一个持久连接，用于该主机的下一个连接请求，我不希望发生这种情况。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-14T05:14:50.907

事实证明，我相信安全传输 TLS 会话缓存是罪魁祸首。

[我也在苹果开发者论坛上](https://devforums.apple.com/message/755721#755721)问过这个问题，得到了苹果人的回复。他指给我看这个[Apple 示例代码自述文件](https://developer.apple.com/library/ios/#samplecode/AdvancedURLConnections/Listings/Read_Me_About_AdvancedURLConnections_txt.html#//apple_ref/doc/uid/DTS40009558-Read_Me_About_AdvancedURLConnections_txt-DontLinkElementID_24)，上面写着：

> iOS 和 Mac OS X 上 TLS 堆栈的底部是一个称为安全传输的组件。安全传输维护每个进程的 TLS 会话缓存。当您通过 TLS 连接时，缓存会存储有关 TLS 协商的信息，以便后续连接可以更快地连接。在线机制在下面的链接中进行了描述。
> 
> [http://en.wikipedia.org/wiki/Transport_Layer_Security#Resumed_TLS_handshake](http://en.wikipedia.org/wiki/Transport_Layer_Security#Resumed_TLS_handshake)
> 
> 这提出了一些有趣的问题，尤其是在您进行调试时。例如，考虑以下序列：
> 
> 1.  您使用调试选项卡将 TLS 服务器验证设置为禁用。
>     
>     
> 2.  您连接到具有自签名身份的站点。连接成功，因为您已禁用 TLS 服务器信任验证。这会向安全传输 TLS 会话缓存添加一个条目。
>     
>     
> 3.  您使用调试选项卡将 TLS 服务器验证设置为默认值。
>     
>     
> 4.  您立即连接到与步骤 2 中相同的站点。由于服务器信任验证策略的更改，这应该会失败，但它会成功，因为您从未收到 NSURLAuthenticationMethodServerTrust 质询。在幕后，安全传输已恢复 TLS 会话，这意味着挑战永远不会冒泡到您的水平。
>     
>     
> 5.  另一方面，如果您在第 3 步和第 4 步之间延迟 11 分钟，事情会按预期工作（好吧，按预期失败 :-)。这是因为 Secure Transport 的 TLS 会话缓存有 10 分钟的超时。
>     
>     
> 
> 在现实世界中，这不是一个大问题，但在调试过程中可能会非常混乱。没有编程方式来清除安全传输 TLS 会话缓存，但由于缓存是每个进程的，因此您可以在调试期间通过简单地退出并重新启动应用程序来避免此问题。请记住，从 iOS 4 开始，按下 Home 按钮并不一定会退出您的应用程序。相反，您应该使用从最近的应用程序列表中退出应用程序。

因此，基于此，用户必须要么杀死他们的应用程序并重新启动它，要么等待超过 10 分钟，然后再发送另一个请求。

我用这个新信息做了另一个谷歌搜索，发现[这篇苹果技术问答文章](http://developer.apple.com/library/ios/#qa/qa1727/_index.html)与这个问题完全匹配。在底部附近，它提到添加尾随“。” 到请求的域名（希望是 IP 地址）以强制 TLS 会话缓存未命中（如果你不能以某种方式修改服务器，我不能），所以我将尝试这个并希望它将工作。我会在测试后发布我的发现。

**＃＃＃ 编辑 ＃＃＃**

我测试了添加一个“。” 到ip地址的末尾，请求仍然成功完成。

但我一般都在考虑这个问题，真的没有理由强迫另一个 SSL 握手。就我而言，这个问题的解决方案是保留从服务器返回的最后一个已知的 SecCertificateRef 的副本。当向服务器发出另一个请求时，如果使用了缓存的 TLS 会话（`connection:didReceiveAuthenticationChallenge:`未调用），我们知道保存`SecCertificateRef`的仍然有效。如果`connection:didReceiveAuthenticationChallenge:`被调用，我们可以`SecCertificateRef`在那个时候得到新的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-06T06:34:23.453

从 OS X 10.9 开始，NSURLSession 是解决方案。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-13T22:13:34.093

首先，您应该使用 [self.conn cancel]，其次，这正是它所说的。它会自行取消。如果你不想再使用 NSURLConnection ，它不会做任何事情，如果你再次使用它，你可以设置一个不同的请求，它将连接到给定的服务器。

希望有帮助。

# hibernate - 如何在hibernate中正确映射两个表

> ID：13369389
> 
> 赞同：2
> 
> 时间：2012-11-13T21:46:28.233
> 
> 标签：hibernate, nhibernate, nhibernate-mapping

我有两个映射文件。建筑和联系人。每个 Buildung 都有一个 ContactPerson。所以我已经建立了一对一的关系

在 Building 中，我有“Meetingplace”列，在“Contact”中，我有“Meetingplace”和“ContactpersonName”列

在联系人中，我将联系人分配给会议地点。

例如：建筑中的会议地点是德国。现在在 Contact 中，我为 Meetingplace Germany 分配了一个联系人。

接触：

这是我的映射文件

```
 <class name="Book.Doa.Contact" table="Contact">
<id name="ID">
  <generator class="foreign">
    <param name="property">Parent</param>
  </generator>
</id>

<property name="Contact" length="20" column="Contactperson"/>
<property name="Meeting" length="20" column="Meetingplace"/>

<one-to-one name="Parent"
        class="Book.Doa.Building" constrained="true"/> 
```

建造：

```
 <class name="Book.Doa.Building">
    <id name="ID">
        <generator class="native">
            <param name="sequence">GLOBALSEQUENCE</param>
        </generator>
    </id>

    <property name="Standort" column="Meetingplace" />

  <one-to-one name="Partner" lazy="false" cascade="all" fetch="join" outer-join="true"
   class="BookIt.Domain.Contact, BookIt.Core"  />

</class> 
```

我的问题是我一直是错误的：

```
Object reference not set to instance of an object 
```

如果我使用 room.Building.Partner.Contact 来获取建筑物中会议地点的联系人。

数据库中有值，所以我不知道为什么会收到该错误。我在做什么错？问题是我如何才能获得位于 Bulding 的 Meetingplace 的 ContactPerson？

请帮忙！.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-07T18:53:59.670

如下尝试lazy = true，它可能会起作用，因为我遇到了相同类型的问题并且它起作用了。

```
 <one-to-one name="Partner" lazy="true" cascade="all" fetch="join" outer-join="true"
   class="BookIt.Domain.Contact, BookIt.Core"  /> 
```

如果解决方案不起作用，请打开 show_sql 并让我们知道在lazy = false 和lazy = true 的情况下的结果

# java - 亚马逊云盘与安卓集成

> ID：13369390
> 
> 赞同：2
> 
> 时间：2012-11-13T21:46:40.760
> 
> 标签：java, android, amazon-web-services, amazon

[是否有可用于将亚马逊云驱动器](https://www.amazon.com/ap/signin?_encoding=UTF8&openid.assoc_handle=amzn_clouddrive_us&openid.claimed_id=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.identity=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0%2Fidentifier_select&openid.mode=checkid_setup&openid.ns=http%3A%2F%2Fspecs.openid.net%2Fauth%2F2.0&openid.ns.pape=http%3A%2F%2Fspecs.openid.net%2Fextensions%2Fpape%2F1.0&openid.pape.max_auth_age=0&openid.return_to=https%3A%2F%2Fwww.amazon.com%2Fclouddrive%2F%3F_encoding%3DUTF8%26action%3Dsign-out%26associationHandle%3Damzn_clouddrive_us%26pageId%3Dclouddrive_authportal_us%26path%3D%252Fclouddrive%252F%26ref_%3Dpd_irl_gw_r%26signIn%3D1%26useAuthPortal%3Dtrue%26useRedirectOnSuccess%3D1&pageId=clouddrive_authportal_us)与 Android 应用程序集成的 SDK 或示例代码。基本上我将开发一个使用云驱动器进行存储的应用程序。我有该存储驱动器的用户名和密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-07T15:38:46.243

现在存在一个 SDK： [https ://developer.amazon.com/public/apis/experience/cloud-drive/content/sdk-android](https://developer.amazon.com/public/apis/experience/cloud-drive/content/sdk-android)

可能这个答案对某人有用。

# sql-server - 查询 C# Visual Studio 数据库中的特定表

> ID：13369391
> 
> 赞同：1
> 
> 时间：2012-11-13T21:46:51.090
> 
> 标签：sql-server, database, asp.net-mvc-3, entity-framework, visual-studio-2012

我是 Visual Studio MVC3 的新手，正在尝试连接到数据库。我在 web.config 文件中有我的连接字符串：

> add name="con" connectionString="Data Source=190.190.200.100,1433;Network Library=DBMSSOCN;Initial Catalog=myDataBase;User ID=myUsername;Password=myPassword;" providerName="System.Data.SqlClient"

但是，服务器有多个表。查询数据库时如何/在哪里指定要使用的表？

编辑：
例如，我正在看[这个例子](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc/creating-an-entity-framework-data-model-for-an-asp-net-mvc-application)。应用程序如何区分表以显示数据？当您 `return View(db.Students.ToList())`按照链接中的示例调用时，应用程序如何知道要查看学生表而不是注册表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:40:44.123

> 应用程序如何区分表以显示数据？当您`return View(db.Students.ToList())`按照链接中的示例调用时，应用程序如何知道要查看学生表而不是注册表？

该`db.Students`部分来自实体框架。

阅读您发布的链接中的“创建数据库上下文”部分。
您将在那里找到以下代码：

```
using System;
using System.Collections.Generic;
using System.Data.Entity;
using ContosoUniversity.Models;
using System.Data.Entity.ModelConfiguration.Conventions;

namespace ContosoUniversity.Models
{
    public class SchoolContext : DbContext
    {
        public DbSet<Student> Students { get; set; }
        public DbSet<Enrollment> Enrollments { get; set; }
        public DbSet<Course> Courses { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Conventions.Remove<PluralizingTableNameConvention>();
        }
    }
} 
```

这设置了数据库上下文，这基本上是 Entity Framework 的“设置”，它知道它必须从哪个 C# 类映射到数据库表。

所以`db.Students`（根据你的问题）实际上是一个`DbSet<Student>`.

Entity Framework 的默认约定如下所示：它尝试将一个类映射到同名的表。
通常，它会将`Student`类映射到一个名为`Students`（复数）的表，但您可以更改/覆盖这些约定......他们在这个例子中也这样做了，在这一行：

```
modelBuilder.Conventions.Remove<PluralizingTableNameConvention>(); 
```

这在教程中也有解释，直接在上面的代码下。
引用教程：

> 此代码`DbSet`为每个实体集创建一个属性。在实体框架术语中，一个*实体集*通常对应一个数据库表，一个*实体*对应表中的一行。
> 
> 该`OnModelCreating`方法中的语句防止表名被复数。如果您不这样做，生成的表将被命名为`Students`、`Courses`和`Enrollments`。相反，表名将是`Student`、`Course`和`Enrollment`。开发人员对表名是否应该是复数形式存在分歧。本教程使用单数形式，但重要的是您可以通过包含或省略这行代码来选择您喜欢的任何形式。

# java - Java 中的 a += a++ * a++ * a++。它是如何被评估的？

> ID：13369393
> 
> 赞同：9
> 
> 时间：2012-11-13T21:46:57.807
> 
> 标签：java, operator-precedence, post-increment

[我在这个网站上](http://www.theserverside.com/discussions/thread.tss?thread_id=63624)遇到了这个问题，并在 Eclipse 中尝试过，但不明白它们是如何被评估的。

```
 int x = 3, y = 7, z = 4;

    x += x++ * x++ * x++;  // gives x = 63
    System.out.println(x);

    y = y * y++;
    System.out.println(y); // gives y = 49

    z = z++ + z;
    System.out.println(z);  // gives z = 9 
```

根据网站上的评论， x += x++ * x++ * x++ 解析为 x = x+((x+2)*(x+1)*x) ，事实证明这是真的。我想我错过了关于这个运算符优先级的一些东西。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T21:53:00.487

Java 根据表达式的优先级从左到右 & 评估表达式。

```
int x = 3, y = 7, z = 4;

x (3) += x++ (3) * x++ (4) * x++ (5);  // gives x = 63
System.out.println(x);

y = y (7) * y++ (7);
System.out.println(y); // gives y = 49

z = z++ (4) + z (5);
System.out.println(z);  // gives z = 9 
```

后缀增量运算符仅在使用/返回变量后递增变量。一切似乎都是正确的。

这是后缀增量运算符的伪代码：

```
int x = 5;
int temp = x;
x += 1;
return temp; 
```

从 JLS 15.14.2（[参考](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.14.2)）：

> 后缀增量表达式的值是存储新值之前变量的值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T21:56:24.377

与运算符优先级本身无关，只是评估顺序。这里有两件事要知道：

1.  `x++`是后缀增量，因此 的值在计算**后**`x`会增加
***   `*`评估右侧然后评估左侧。**

 **考虑到第 2 点，表达式`x++ * x++ * x++`可以更具体地重写为`x++ * (x++ * (x++))`。

整个表达式可以写成过程：

```
a = x
x += 1
b = x
x += 1
c = a*b
d = x
x += 1
return c*d 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T21:54:00.490

后缀运算符的`x++`意思是“现在给我 x 的值，但增加它以供将来参考”

因此，[按照操作和评估的顺序](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/operators.html)，

`x++ * x++ * x++`

首先被解释为

`3 * 4 * 5`(=60)

然后将其添加到*原始*3 中，得到 63。

使用原始值是**因为它在同一行上**，您是否写过类似的内容：

```
int x = 3;

int y += x++ * x++ * x++; 
x += y; 
```

`x`现在是 66，而不是 63，因为`x`第二行中的现在是 6，而不是原来的 3。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T22:11:26.887

因为在变量 x 后面加上了自增运算++。这是一个后增量操作。这意味着，x 在处理操作后递增。

```
In your example the expression would be: 
x += 3 * 4 * 5
First the expression is added by 3 (x+=....)
then the first x++ results in 3
the second x++ results in 4 (because it was incremented before)
and the third x++ results in 5. 
```

如果你想让你的变量在操作执行之前递增，你必须写 ++x （预递增操作）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-13T21:53:08.887

因为后增量会在取值后修改变量，并且 += 在评估其右侧之前评估其左侧，

```
x += x++ * x++ * x++; 
```

变成

```
tmp0 = x

tmp1 = x
++x
tmp2 = tmp1 * x
++x
tmp3 = tmp2 * x
++x

x = tmp0 + x 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-13T21:54:55.720

一元运算符从左到右求值，所以第一个`x++`得到 value `x`，第二个是`(x+1)`，依此类推。 += 根据`x`开头的 value 求值，因此加上`x`**

# ember.js - Ember.js - 在 {{bindAttr}} 周围使用 {{#if}} 与共享条件？

> ID：13369399
> 
> 赞同：3
> 
> 时间：2012-11-13T21:47:27.300
> 
> 标签：ember.js, handlebars.js

我在 Ember-1.0.0-pre2 上，我似乎在使用 {{#if}} 语句围绕具有 {{bindAttr class="..."}} 且绑定条件为的元素时遇到问题相同。IE if 语句和类绑定到相同的控制器属性。见代码：

```
<button {{action "toggleShow" target="controller"}}>Toggle Visibility</button>
{{#if show}}
   <div {{bindAttr class="show:red:green"}}>test</div>
{{/if}} 
```

[http://jsfiddle.net/y49ch/10/](http://jsfiddle.net/y49ch/10/)

如果您多次单击“切换可见性”按钮，您会注意到一个常见错误：“您所做的某些事情导致视图在渲染后但在插入 DOM 之前重新渲染。因为这是可以避免并且导致应用程序中出现重大性能问题的原因，这种行为已被弃用......”

乍一看似乎很愚蠢，但这是我的问题的一个非常原始的例子。就我而言，两个绑定（if 和 class 属性）的末尾都有一个计算属性。在这两种情况下，计算属性共享一个公共依赖键。当该公共依赖键更改时，它会导致两个助手都被更新，从而导致错误。

这是一个错误吗？我可以猜到这里发生了什么，但似乎我应该能够安全地做到这一点。

* * *

*编辑：以上是* *我遇到的问题的一个***原始示例。** *它旨在以非常简单的方式显示它。下面是一个更复杂的例子。*

模板：

```
<button {{action "toggleValue" target="controller"}}>Toggle Value</button><br>
{{#if greaterThanTen}}
  <div {{bindAttr class="isOdd:red:green"}}>test</div>
{{/if}} 
```

Javascript：

```
App.myController = Ember.Controller.create({
  value: 10,

  greaterThanTen: function() {
    return this.get('value') > 10;
  }.property('value'),

  isOdd: function() {
    return this.get('value') % 2 === 1;
  }.property('value'),

  toggleValue: function() {
    this.set('value', (this.get('isOdd') ? 10 : 11));
  }
}); 
```

[http://jsfiddle.net/y49ch/16/](http://jsfiddle.net/y49ch/16/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T14:57:02.730

我现在看到了。您的原始代码两点都在关注同一个属性，这让我有点困惑，但现在它更有意义了。我无法真正了解发生了什么，但我怀疑它可能与运行循环有关。

我已经稍微更改了您的代码（请参阅此[jsfiddle](http://jsfiddle.net/schawaska/y49ch/22/)），以便 div 现在是子视图。您的某些属性已从控制器移动到视图（您的规范是否允许这些人在视图中还是*必须*`isOdd`在控制器中？除非我错过了某些内容，`toggleValue`此时只有视图应该关注）并且通过`classNameBindings`监视`value`绑定到父视图的属性来绑定 css。

```
App.myController = Ember.Controller.create({
  value: 10,

  greaterThanTen: function() {
    return this.get('value') > 10;
  }.property('value') 

});

App.MyView = Ember.View.extend({
    templateName: 'my-view',
    valueBinding: 'controller.value', 
    toggleValue: function() {
        this.set('value', (this.get('isOdd') ? 10 : 11));
    },
    isOdd: function() {
         return this.get('value') % 2 === 1;
    }.property('value'),
    ChildView: Em.View.extend({
        classNameBindings: 'parentView.isOdd:red:green'        
    })
}); 
```

现在，模板如下所示：

```
<script type="text/x-handlebars" data-template-name="my-view">
  <button {{action "toggleValue"}}>Toggle Value</button><br>
  {{#if greaterThanTen}}
    {{#view view.ChildView}}
       test
    {{/view}}
  {{/if}}
</script> 
```

由于 View 的默认标签是 div，因此它呈现相同的 html，并且它完全充当不同的视图并防止不必要的重新呈现。

**编辑**：作为概念证明，我添加了一个按钮来添加值，而不是仅仅切换，这样您就可以在颜色可见后实际看到颜色变化。这是[小提琴](http://jsfiddle.net/schawaska/y49ch/23/)

让我知道这是否对你有好处

# javascript - 尝试在 YouTube 视频播放列表自动播放上静音

> ID：13369406
> 
> 赞同：0
> 
> 时间：2012-11-13T21:48:04.783
> 
> 标签：javascript, wordpress, iframe, youtube, flash

我正在尝试在网站上嵌入 YouTube 播放列表，并让它在静音的情况下自动播放。我发现这段代码可以做到这一点：

```
<script src="http://www.google.com/jsapi"></script>
<script src="http://ajax.googleapis.com/ajax/libs/swfobject/2.1/swfobject.js"></script>
<div id="ytapiplayer">You need Flash player 8+ and JavaScript enabled to view this video.</div>
<script type="text/javascript">
google.load("swfobject", "2.1");
function onYouTubePlayerReady(playerId) {
ytplayer = document.getElementById("myytplayer");
ytplayer.playVideo();
ytplayer.mute();
}
var params = { allowScriptAccess: "always" };
var atts = { id: "myytplayer" };

swfobject.embedSWF("http://www.youtube.com/v/mOLp4doE51Q&list=PL86C090F73345FED6&feature=plpp_play_all?enablejsapi=1&playerapiid=ytplayer&allowFullScreen=true&version=3&loop=1&autohide=1",
"ytapiplayer", "100%", "380", "8", null, null, params, atts)
</script> 
```

这是一个 WordPress 网站，当我输入该代码时，它只是自动删除了侧边栏和标题上的所有 iFrames/ads 小部件。我将代码放在通常包含视频代码的小部件中，并且没有触及其他小部件，但是当我重新加载它时，它们都消失了，我不得不全部重建它们（幸运的是来自备份）。

最重要的是，视频甚至没有加载。

我假设这段代码以某种方式针对 iFrame，然后在它们上运行一些代码？在我再试一次之前，有人可以帮我破译这个问题吗？我对 Javascript 不是很好，正在尝试找到一些答案。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T00:20:54.440

我想通了，上面的代码工作得很好。我正在查看的网站上的复制和粘贴带有来自外国键盘的括号，当我粘贴它们时无法识别。

我仍然不知道为什么它会破坏所有 iframe 并自动删除它们，但解决方案是更改括号。

# html - 样式元素上的 innerHTML 导致运行时错误

> ID：13369408
> 
> 赞同：3
> 
> 时间：2012-11-13T21:48:22.597
> 
> 标签：html, css, innerhtml

这在 FF safari 和 chrome 中有效，但在 IE8 中导致错误

```
var styleText = "#" + containerElement.id + " button {background-color:" + options.bg_color + ";}";
    styleText += "#" + containerElement.id + " button.not-open {color:" + options.txt_color + ";}";
    styleText += "#" + containerElement.id + " button.not-open:hover {color:" + options.hvr_color + ";}";
    styleText += ".info_pane {background-color:" + options.bg_color + ";}";
    styleText += ".info_pane {color:" + options.txt_color + ";}";
    styleText += ".info_pane a {color:" + options.txt_color + ";}";
    var style = document.createElement('style');
    style.type = 'text/css';
    style.innerHTML = styleText; 
```

innerHTML 是引发错误的原因。完成这项工作的最佳选择是什么？我环顾四周，发现的大多数东西似乎有点不稳定

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T21:51:53.600

`cssText`改为尝试该属性。`style.cssText = styleText;`

编辑：显然，那将是`style.styleSheet.cssText = styleText;`. 我的错。

[演示](http://jsfiddle.net/vArSa/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:07:14.223

```
 var styleText = "#" + containerElement.id + " button {background-color:" + options.bg_color + ";}";
    styleText += "#" + containerElement.id + " button.not-open {color:" + options.txt_color + ";}";
    styleText += "#" + containerElement.id + " button.not-open:hover {color:" + options.hvr_color + ";}";
    styleText += ".info_pane {background-color:" + options.bg_color + ";}";
    styleText += ".info_pane {color:" + options.txt_color + ";}";
    styleText += ".info_pane a {color:" + options.txt_color + ";}";
    var style = document.createElement('style');
    style.type = 'text/css';
    if(style.styleSheet) { //IE
        style.styleSheet.cssText = styleText;
        document.getElementsByTagName('head')[0].appendChild(style);
    } else {
        style.innerHTML = styleText;
        document.getElementsByTagName('head')[0].appendChild(style);
    } 
```

这就是我最终不得不去的。不记得我在哪里找到它，但它有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T01:39:39.367

很高兴您找到了解决方案……只是出于兴趣，如果您尝试以下任何一种方法，您会得到什么？

```
style.innerText = styleText;
style.insertAdjacentText('beforeEnd', styleText);
style.insertAdjacentHTML('beforeEnd', styleText);
style.replaceAdjacentText('beforeEnd', styleText); 
```

我目前无法访问 IE8 用户代理进行测试，只是在思考。根据 msdn ，[样式](http://msdn.microsoft.com/en-gb/library/ie/ms535898%28v=vs.85%29.aspx)元素既不支持[innerHTML](http://msdn.microsoft.com/en-us/library/ie/ms533897%28v=vs.85%29.aspx)也不支持[insertAdjacentHTML](http://msdn.microsoft.com/en-us/library/ie/ms536452%28v=vs.85%29.aspx) *（相当荒谬）* ......但是它确实支持[replaceAdjacentText](http://msdn.microsoft.com/en-gb/library/ie/ms536714%28v=vs.85%29.aspx)？像往常一样好的旧IE。

 *我想另一个后备——只是为了想法——是使用：

```
var head = document.getElementsByTagName('head')[0];
    head.insertAdjacentHTML('<style>'+styleText+'</style>'); 
```*

# css - CSS - 浮动：左对齐问题

> ID：13369410
> 
> 赞同：1
> 
> 时间：2012-11-13T21:48:31.440
> 
> 标签：css, css-float

我正在使用 DIV 构建一个论坛列表，这是我拥有的

```
/* forum like build */
.myForum{
    float: left;
    width: 620px;
    margin-top: 10px;
    border: 2px solid #0F5C8E;
    padding: 1px;
    overflow: hidden;
    display: block;
}

.myForum > .header {
    height:10px;
    background-color: #adcbe7;
    border-bottom: 1px solid #0F5C8E;

    font-weight: bold;
    padding: 2px;
    overflow: hidden;
    height:20px;
}

.myForum > .myrow {
    padding-left: 0px;
    margin: 0px;
    border-bottom: 1px solid #0F5C8E;
   height:57px;
   background-color: #f5f5f5;
}

.myForum > .myrow > .photo {    
    overflow: hidden;
    width:105px;
    float:left;
    text-align:center;
    padding-right: 2px;
    padding-top:2px;    
    height:57px;
}

.myForum > .myrow > .content {
    padding-left: 3px;
    padding-right: 3px;
    overflow: hidden;
    width:450px;
    float:left;
    border-left: 1px solid #0F5C8E;
    border-right: 1px solid #0F5C8E;
    height:57px;

}
.myForum > .myrow > .mycount {
    padding-right: 1px;
    padding-bottom: 1px;
    overflow: hidden;
    float:left;
    height:57px;
    padding-left:3px;

}

.myForum > .myrow > .content > a {
    color: #013E99;
    font: bold 0.8em/1.3 arial,helvetica,sans-serif;
    margin-top: 0;
}

.myForum > .myrow > .content > p  {
    font: normal 0.7em/1.3 arial,helvetica,sans-serif;
    margin-bottom:2px;
    color:#878787;
}
.myForum > .myrow > .content > p > a {
    color: #0066CC;
    margin-top: 0;
} 
```

[http://jsfiddle.net/ytAud/1/](http://jsfiddle.net/ytAud/1/)

你可以看到对齐搞砸了。

如果我将额外的**padding-top**添加到第三个 div ( **.myForum > .myrow > .mycount** )，对齐工作就很好。但这会扰乱垂直线（第二条垂直线）。您可以在下面看到修改后的

[http://jsfiddle.net/ytAud/2/](http://jsfiddle.net/ytAud/2/)

（我想过使用表格，但我看到最新的网站甚至开始使用 DIV 来显示列表）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:56:27.640

这可能不是语法上最正确的方法，但它适用于您的示例：

> .myForum > .myrow {
> 明确：两者；
> }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:57:29.093

看起来您在照片上的填充是导致问题的原因。由于每行没有足够的高度，因此它会重叠到下一行。显示问题的简单示例。（可以通过删除填充或增加更多高度来解决）

改变：

```
.myForum > .myrow > .photo {    
overflow: hidden;
width:105px;
float:left;
text-align:center;
padding-right: 2px;
padding-top:2px;    
height:57px;
} 
```

到

```
.myForum > .myrow > .photo {    
overflow: hidden;
width:105px;
float:left;
text-align:center;   
height:57px;
} 
```

[例子](http://jsfiddle.net/ytAud/3/)

# asp.net-mvc - GZIP 压缩在 IE 8 ASP.NET 中不起作用

> ID：13369412
> 
> 赞同：2
> 
> 时间：2012-11-13T21:48:43.053
> 
> 标签：asp.net-mvc, iis-6, gzip

我正在使用 IIS6 和 Windows 2003 服务器，我在其中为我的 MVC 项目启用了 gzip 压缩。我以为我让它工作了，但是一旦我在 IE 中测试它就不起作用了。我觉得它无法识别 gzip 压缩或其他东西。它在 Fire Fox（版本 13）中运行良好。

我需要配置一些东西吗？

我做了一个 HTTP 帖子来获取一些数据。

标题：

```
HTTP/1.1 200 OK
Cache-Control: private
Date: Tue, 13 Nov 2012 21:33:19 GMT
Content-Type: text/html; charset=utf-8
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
X-AspNet-Version: 4.0.30319
X-AspNetMvc-Version: 3.0
Content-Encoding: gzip
Vary: Accept-Encoding
Transfer-Encoding: chunked 
```

如果您需要其他任何东西，请告知。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T01:32:50.173

默认情况下，IIS 不对“动态”资源执行 HTTP 压缩，仅对“静态”文件执行 HTTP 压缩。这是因为它将压缩结果缓存在 IIS 的临时文件目录中，而动态内容压缩意味着它必须在每次请求时对其进行压缩，如果服务器处理大量请求，这会给服务器造成负担。

我还注意到您使用的 IIS6 在这一点上非常过时，但请查看此处的文档：http: [//www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/502ef631-3695-4616- b268-cbe7cf1351ce.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/502ef631-3695-4616-b268-cbe7cf1351ce.mspx?mfr=true)

# jtidy - 我可以阻止 JTidy 将属性值中的撇号转换为实体吗

> ID：13369414
> 
> 赞同：0
> 
> 时间：2012-11-13T21:49:02.173
> 
> 标签：jtidy

我的输入 HTML 有一行与此类似：

```
<div class="image" style="background:url('/images/someImage.jpg') no-repeat;"/> 
```

JTidy 正在转换为

```
<div class="image" style="background:url(&apos;/images/someImage.jpg&apos;) no-repeat;"/> 
```

有没有办法抑制实体转换？似乎有一种配置方法可以防止双引号被转换（setQuoteMarks（）），但我没有看到类似的撇号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T10:12:43.303

你在使用 escapeXml() 方法吗？

如果是这样，请尝试使用 escapeHtml3() 或 escapeHtml4() 方法。

# php - 如何使用 php 将信息从一个页面传递到另一个页面

> ID：13369416
> 
> 赞同：-3
> 
> 时间：2012-11-13T21:49:02.310
> 
> 标签：php, cookies, setcookie

> **可能重复：**
> [PHP 中的“警告：标头已发送”](https://stackoverflow.com/questions/8028957/warning-headers-already-sent-in-php)

```
<?php
 session_start(); 

 $_SESSION['page'] = "test.php";

 echo "Page to load in iframe = ". $_SESSION['page']; 

 setcookie('PagetoShow', $_SESSION); 

 if(isset($_COOKIE['PagetoShow']))
$Page = $_COOKIE['PagetoShow']; 
echo "Page to load in iframe = ". $Page;
 else
$Page="welcome.php"

 ?> 
```

我猜这是一个语法错误，但我对 php 知之甚少或一无所知。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:05:12.740

```
<?php
 session_start(); 

 $_SESSION['page'] = "test.php"; 
```

很好，至少你不要忘记`session_start()`在设置会话密钥之前运行。

```
 echo "Page to load in iframe = ". $_SESSION['page']; 

 setcookie('PagetoShow', $_SESSION); 
```

这是有问题的。Cookie 是在标头字段中发送的，但是您已经通过回显某些内容来刷新标头。

```
 if(isset($_COOKIE['PagetoShow']))
$Page = $_COOKIE['PagetoShow']; 
echo "Page to load in iframe = ". $Page;
 else
$Page="welcome.php" 
```

这里有语法错误，需要给if-body加上括号：

```
if(isset($_COOKIE['PagetoShow'])) {
    $Page = $_COOKIE['PagetoShow']; 
    echo "Page to load in iframe = ". $Page;
} 
```

一些文档：

*   [http://php.net/如果](http://php.net/if)
*   [http://php.net/setcookie](http://php.net/setcookie)（注意*与其他标头一样，cookie 必须在脚本的任何输出之前发送（这是协议限制）*）
*   [http://www.php.net/manual/en/function.error-reporting.php](http://www.php.net/manual/en/function.error-reporting.php)（另见其*另见*部分）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:52:26.853

的第二个参数`setcookie`需要是一个字符串 - 你传递一个数组 ($_SESSION)。你可以做：

```
 $_SESSION['page'] = "test.php"; 

 setcookie('PagetoShow', $_SESSION['page']); // <-- this is the only change needed

 if(isset($_COOKIE['PagetoShow']))
   $Page = $_COOKIE['PagetoShow']; 
   echo "Page to load in iframe = ". $Page;
 else
   $Page="welcome.php" 
```

# wpf - 用户控制 - 更改图像问题的依赖属性

> ID：13369422
> 
> 赞同：0
> 
> 时间：2012-11-13T21:49:28.800
> 
> 标签：wpf, user-controls

我在从依赖属性设置图像时遇到问题。触发器似乎没有触发。我只想隐藏/显示和图像，或者如果可能的话设置源。

```
public static readonly DependencyProperty HasSingleValueProperty =
DependencyProperty.Register("HasSingleValue", typeof(bool), typeof(LevelControl), new 

FrameworkPropertyMetadata(false,FrameworkPropertyMetadataOptions.BindsTwoWayByDefault));

public bool HasSingleValue
    {
        get { return (bool)GetValue(HasSingleValueProperty); }
        set { SetValue(HasSingleValueProperty, value); }
    }

 public LevelControl()
{
this.InitializeComponent();

//this.DataContext = this;
LayoutRoot.DataContext = this;
}

  //Control Markup
  <Grid x:Name="LayoutRoot">
    <Image x:Name="xGreenBarClientTX" HorizontalAlignment="Stretch" Height="13" Margin="7,8.5,7,0" 
           Stretch="Fill" 
           VerticalAlignment="Top" 
           Width="47" 
           Canvas.Left="181.67" 
           d:LayoutOverrides="Height" >
            <Image.Style>
            <Style TargetType="{x:Type Image}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding HasSingleValue}" Value="True">
                        <Setter  Property="Opacity"  Value="100"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding HasSingleValue}" Value="False">
                        <Setter  Property="Opacity"  Value="0"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Image.Style>
    </Image> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:22:30.483

在这里，您必须按如下方式更新您的绑定（我使用 Ellipse 代替测试）

```
<Window 
x:Name="myWindow">

<Style TargetType="{x:Type Ellipse}">
    <Style.Triggers>
        <DataTrigger Binding="{Binding HasSingleValue, ElementName=myWindow}" Value="True">
            <Setter  Property="Visibility"  Value="Visible"/>
        </DataTrigger>
        <DataTrigger Binding="{Binding HasSingleValue, ElementName=myWindow}" Value="False">
            <Setter  Property="Visibility"  Value="Hidden"/>
        </DataTrigger>
    </Style.Triggers>
</Style> 
```

然后你需要设置 HasSingleValue 我创建了两个按钮来显示和隐藏我的椭圆。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:57:33.373

我认为问题可能出在您尝试更新依赖项属性的方式上，因为我对您的示例进行了一些更改以验证绑定，并且确实可以按预期工作。我曾怀疑从图像绑定到网格数据上下文上的属性可能存在问题，但这似乎很好。

目前尚不清楚您提供什么样的类作为数据上下文，但如果您使用依赖属性，那么它需要是一个 DependencyObject。

我在这里提供了一个示例，使用文本块和切换按钮来更改依赖项属性。（假设您使用的是代码隐藏）

```
<Grid x:Name="LayoutRoot">
    <Grid.ColumnDefinitions>
        <ColumnDefinition/>
        <ColumnDefinition/>
    </Grid.ColumnDefinitions>
    <TextBlock x:Name="xGreenBarClientTX" HorizontalAlignment="Stretch" Height="13" Margin="7,8.5,7,0"  
       VerticalAlignment="Top" 
       Width="200" 
       Canvas.Left="181.67" >
        <TextBlock.Style>
            <Style TargetType="{x:Type TextBlock}">
                <Style.Triggers>
                    <DataTrigger Binding="{Binding HasSingleValue}" Value="True">
                        <Setter  Property="Text"  Value="Is Set"/>
                    </DataTrigger>
                    <DataTrigger Binding="{Binding HasSingleValue}" Value="False">
                        <Setter  Property="Text"  Value="Is Not Set"/>
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </TextBlock.Style>
    </TextBlock>
    <Button Grid.Column="1" Content="Toggle" Click="Button_Click" VerticalAlignment="Top" HorizontalAlignment="Left"/>
</Grid> 
```

和代码隐藏：

```
public MainWindow()
{
    InitializeComponent();
    LayoutRoot.DataContext = new VM() { HasSingleValue = true };
}

private void Button_Click( object sender, RoutedEventArgs e )
{
    var vm = LayoutRoot.DataContext as VM;
    if ( vm == null )
        return;

    vm.HasSingleValue = !vm.HasSingleValue;
}

public class VM : DependencyObject
{
    public static readonly DependencyProperty HasSingleValueProperty =
    DependencyProperty.Register( "HasSingleValue", typeof( bool ), typeof( VM ), new FrameworkPropertyMetadata( false, FrameworkPropertyMetadataOptions.BindsTwoWayByDefault ) );

    public bool HasSingleValue
    {
        get { return (bool) GetValue( HasSingleValueProperty ); }
        set { SetValue( HasSingleValueProperty, value ); }
    }

} 
```

# .htaccess - 如何使用 htaccess 重写 /?custom_ref= 和 /?ref=

> ID：13369425
> 
> 赞同：0
> 
> 时间：2012-11-13T21:49:35.217
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

如何重写

/?custom_ref=

和

/?参考=

使用 htaccess 重写？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:15:35.013

```
RewriteEngine On
RewriteCond %{QUERY_STRING} custom_ref=(.*)
RewriteRule (.*) /?ref=%1 [R=301,L] 
```

您能否告诉我您使用此查询的目录/文件，以便我确保此代码仅适用于它。

# security - 仅使用 REST WebServices 构建网页的数据库层是个好主意吗？

> ID：13369426
> 
> 赞同：0
> 
> 时间：2012-11-13T21:49:38.580
> 
> 标签：security, rest

我们想建立一个网站，它只通过 REST WebServices 与数据库交互。所以如果我们以后想构建一个移动应用程序，应用程序可以简单地使用这些WebServices。所以我们认为我们将使用 Python/Django 或 PHP/Yii 来构建仅由 REST WebServices 构成的数据库层。在前端，backbone.js 与 WebServices 交互以对数据库进行 CRUD 操作。

就性能和安全性而言，这是一个好主意吗？现在大型网站和应用程序如何处理前端和数据库层之间的交互？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:48:39.167

我个人认为这是一个坏主意，但只是轻微的。

为什么不创建一个功能性 Web 服务数组，而不是只拥有一个无逻辑 CRUD 的 Web 服务数组。这样您就可以将业务规则保留在服务器端。

也许您已经想到了这一点，但考虑到无论用户是在您的移动应用程序还是您的网站上，您都不希望他们创建包含奇怪字符的用户名。Web 服务的严格 CRUD 数组不会检查这些类型的业务规则。

# xcode - MonoTouch Designer 类在 XCode 中不可用

> ID：13369429
> 
> 赞同：0
> 
> 时间：2012-11-13T21:49:53.713
> 
> 标签：xcode, xamarin.ios, xamarin

我正在尝试构建一个自定义 TableViewCell，到目前为止，我已经创建了一个 xib 文件并将其放置在 XCode 设计器中。但是，我在身份检查器的下拉列表中找不到我的班级，并且在内容助手中找不到生成的班级。

除了在 MonoDev 中创建 xib 以使我的设计器类对 XCode 设计器可用之外，还有什么其他的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T11:20:26.023

(C#) 类需要有一个 Register 属性：

```
[Register ("MyClass")]
public class MyClass : UITableViewCell
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:39:23.817

每个 Xamarin 支持：

> 在创建自定义 UITableViewCell（并希望使用设计器）时，您必须使用一些“hacky”过程来使代码隐藏文件工作。您将要将该类添加为 iPhone（或 iPad 或 Universal）UIViewController，将您刚刚创建的类的超类更改为 UITableViewCell。在 Xcode 设计器中进行更改（删除视图并添加 UITableViewCell），然后在代码隐藏文件中进行更改。
> 
> 这里有一个很棒的教程： [http ://www.arcticmill.com/2012/05/uitableview-with-custom-uitableviewcell.html](http://www.arcticmill.com/2012/05/uitableview-with-custom-uitableviewcell.html)

# c - 在 C 中创建、写入和读取随机访问文件时出现意外行为

> ID：13369438
> 
> 赞同：3
> 
> 时间：2012-11-13T21:50:39.660
> 
> 标签：c, random-access

我一直在处理本书中的 3 个程序的问题：[C How to Program - Deitel](https://rads.stackoverflow.com/amzn/click/com/0136123562)它们与我学习方法中的第 11 章管理文件（顺序和随机访问文件）有关 我喜欢在开始之前测试示例程序练习，我无法完成随机访问文件的 3 个示例（创建、读取和写入）我有三个意想不到的行为。让我展示：

*   首先我运行随机访问文件创建器，没有什么奇怪的，我得到了完成消息。 ![在此处输入图像描述](../Images/3e1a1b093c40f4a6f9a28114103a0fd3.png)

*   其次我编译写随机访问值文件，然后输入值，没有什么奇怪的。 ![输入值](../Images/780027aebb1eafb5d88dae44e4953d5b.png)

*   第三，我想使用野兔策略并使用记事本读取 .dat 文件，以查看数据是否正确保存。令人惊讶的是，显示了一些垃圾。而且我想得很好，也许双重表示与阅读程序（记事本）不匹配。所以我进入了第四步。

![阅读文件记事本](../Images/cd37508ecc279d461db24d134506b8e3.png)

*   第四，我编译了读取随机存取文件程序。令人惊讶的是，显示的数据不是我输入的。

    ![结果不匹配](../Images/4a835f0f0f5e12f80d281343a4648760.png)

我不想在这里发布这个问题，因为我知道还有更重要的问题，更有趣但我找不到我做错了什么，我一直在寻找一段时间，我终于决定问专家。我在下面留给你 SC（谢谢！）：

```
/*To create the file*/
#include <stdio.h>

struct clientsData{
    int account;
    char lastname[ 30 ], name[ 30 ];
    double balance;
};

int main(void)
{
    int i; 
    struct clientsData client = { 0, "", "", 0.0 };
    FILE *cfPtr;

    if( ( cfPtr = fopen( "clients.dat", "wb" ) ) == NULL ) {
        printf( "File couldn't be opened. " );
    }
    else{
        printf( "Generating\n" );
        for ( i = 1; i <= 10000; i++ ){
            printf( "-" );
            fwrite( &client, sizeof( struct clientsData ), 1, cfPtr );
        }
            fclose( cfPtr );
    }
    printf( "\nFile succesfully created\n" );
    return 0;
} 
```

* * *

```
/* To write the file */
#include <stdio.h>

struct clientsData{
    int account;
    char lastname[ 30 ], name[ 30 ];
    double balance;
};

int main(void)
{
    FILE *cfPtr;

    struct clientsData client = { 0, "", "", 0.0 };

    if( ( cfPtr = fopen( "clients.dat", "rb+" ) ) == NULL ) {
        printf( "File couldn't be opened. " );
    }
    else{
        printf( "Enter account number"" ( 1 to 10000, 0 to end the input )\n?" );
        scanf( "%d", &client.account );

        while( client.account != 0 ){
            printf( "Enter the lastname, firstname and the balance\n?" );
            fscanf( stdin, "%s%s%lf", client.lastname, client.name, &client.balance );
            fseek( cfPtr, ( client.account - 1 ) * sizeof( struct clientsData ), SEEK_SET );
            fwrite( &client, sizeof( struct clientsData ), 1, cfPtr );
            printf( "Enter account number\n?" );
            scanf( "%d", &client.account );
        }
        fclose( cfPtr );
    }
    return 0;
} 
```

* * *

```
/*To read the File*/
#include <stdio.h>

struct clientsData{
    int account;
    char lastname[ 30 ], name[ 30 ];
    double balance;
};

int main(void)
{
    FILE *cfPtr;

    struct clientsData client = { 0, "", "", 0.0 };

    if( ( cfPtr = fopen( "clients.dat", "rb" ) ) == NULL ) {
        printf( "File couldn't be opened. " );
    }
    else{
        printf( "%-6s%-16s%-11s%10s\n", "Acct", "Lastname", "Firstname", "Balance" );

        while( !feof( cfPtr ) ){
            fread( &client, sizeof( struct clientsData ), 1, cfPtr );

            if( client.account != 0 ){
                printf( "%-6d%-16s%-11s%10.2f\n", &client.account, client.lastname, client.name, &client.balance );
            }
        }
        fclose( cfPtr );
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T22:05:02.287

看起来一切都正确保存。但是你在这里打印指针而不是值：

```
printf( "%-6d%-16s%-11s%10.2f\n", &client.account, client.lastname, client.name, &client.balance ); 
```

应该是这样吗？

```
printf( "%-6d%-16s%-11s%10.2f\n", client.account, client.lastname, client.name, client.balance ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:05:11.630

文件阅读器中的这一行是错误的：

```
printf( "%-6d%-16s%-11s%10.2f\n", &client.account, client.lastname, client.name, &client.balance ); 
```

就目前而言，您正在打印帐户和余额变量的地址（指针），而不是这些变量的值。

它应该是：

```
printf( "%-6d%-16s%-11s%10.2f\n", client.account, client.lastname, client.name, client.balance ); 
```

**有用的提示：**我通过启用*编译器警告*发现了这个错误。`gcc`输出这些警告：

```
reader.c:26:28: warning: format '%d' expects argument of type 'int', but argument 2 has type 'int *' [-Wformat]
reader.c:26:28: warning: format '%f' expects argument of type 'double', but argument 5 has type 'double *' [-Wformat] 
```

了解如何在您的编译器/IDE 中启用这些警告将是一个非常好的主意，因为它们将为您节省大量时间来解决这些问题。

# jquery - 表元素重叠

> ID：13369441
> 
> 赞同：0
> 
> 时间：2012-11-13T21:51:02.120
> 
> 标签：jquery, html, css, jquery-ui, jquery-mobile

所以我在这里遇到了一个令人困惑的问题。我正在使用 HTML 和 JQuery Mobile 创建一个表。然而，它的元素不断重叠，并且内容没有应用 UI CSS。我是否遗漏了一些明显的东西，或者我不熟悉的 JQuery 移动库有什么东西？

```
<table><tr><td><input type="radio"/></td><td>Less than $25,000</td></tr>
    <tr><td><input type="radio"></td><td>$25,000 - $49,999</td></tr>
    <tr><td><input type="radio"></td><td>$50,000 - $74,999</td></tr>
    <tr><td><input type="radio"></td><td>$75,000 - $100,000</td></tr>
    <tr><td><input type="radio"></td><td>More than $100,000</td></tr>
    <tr><td><input type="radio"></td><td>I am not required to share this information</td></tr>
</table></form> 
```

![这是正在发生的事情的代码和图像。](../Images/faf022297e2d12e5c28c1cb0a657f9f4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:05:56.520

首先你发出：

单选选项需要有这个标记才能让 jQM 正确显示

*   [http://jquerymobile.com/demos/1.2.0/docs/forms/radiobuttons/](http://jquerymobile.com/demos/1.2.0/docs/forms/radiobuttons/)

HTML

```
<fieldset data-role="controlgroup" data-mini="true">
        <input type="radio" name="radio-mini" id="radio-mini-1" value="choice-1" checked="checked" />
        <label for="radio-mini-1">Credit</label>

    <input type="radio" name="radio-mini" id="radio-mini-2" value="choice-2"  />
        <label for="radio-mini-2">Debit</label>

        <input type="radio" name="radio-mini" id="radio-mini-3" value="choice-3"  />
        <label for="radio-mini-3">Cash</label>
</fieldset> 
```

现在（我认为）您正在使用 table 标签在屏幕上布局或显示元素。我建议不要这样做，因为它用于指法数据。我想这就是你要找的：

*   [http://jsfiddle.net/Lctam/1/](http://jsfiddle.net/Lctam/1/)

HTML

```
<div data-role="page" class="type-home">

   <div data-role="content">
      <fieldset data-role="controlgroup">
    <legend>Annual Salary:</legend>
         <input type="radio" name="radio-choice" id="radio-choice-1" value="choice-1" checked="checked" />
         <label for="radio-choice-1">Less tahn $24,999</label>

         <input type="radio" name="radio-choice" id="radio-choice-2" value="choice-2"  />
         <label for="radio-choice-2">$25,000 - $49,999</label>

         <input type="radio" name="radio-choice" id="radio-choice-3" value="choice-3"  />
         <label for="radio-choice-3">$50,000 - $74,999</label>

         <input type="radio" name="radio-choice" id="radio-choice-4" value="choice-4"  />
         <label for="radio-choice-4">$75,000 - $99,999</label>

          <input type="radio" name="radio-choice" id="radio-choice-5" value="choice-5"  />
         <label for="radio-choice-5">More than $100,000</label>

          <input type="radio" name="radio-choice" id="radio-choice-6" value="choice-6"  />
         <label for="radio-choice-6">I am not required to share this information
</label>
</fieldset>
   </div>
</div>​ 
```

并且表格在 jQM 中没有很好地记录（尚未），但您会发现显示需要一些额外的属性。

*   [http://jquerymobile.com/demos/1.2.0/docs/content/content-html.html](http://jquerymobile.com/demos/1.2.0/docs/content/content-html.html)

（在 Chrome 中查看）

*   查看源：http://jquerymobile.com/demos/1.2.0/docs/content/content-html.html

HTML：

```
<table summary="This table lists all the JetBlue flights.">
    <caption>Travel Itinerary</caption>
    <thead>
        <tr>
            <th scope="col">Flight:</th>
            <th scope="col">From:</th>
            <th scope="col">To:</th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <td colspan="5">Total: 3 flights</td>
        </tr>
    </tfoot>
    <tbody>
        <tr>
            <th scope="row">JetBlue 983</th>
            <td>Boston (BOS)</td>
            <td>New York (JFK)</td>
        </tr>
        <tr>
            <th scope="row">JetBlue 354</th>
            <td>San Francisco (SFO)</td>
            <td>Los Angeles (LAX)</td>
        </tr>
        <tr>
            <th scope="row">JetBlue 465</th>
            <td>New York (JFK)</td>
            <td>Portland (PDX)</td>
        </tr>
    </tbody>
</table> 
```

话虽如此，有一些努力正在处理表

*   [http://jquerymobile.com/branches/tables/docs/tables/index.html](http://jquerymobile.com/branches/tables/docs/tables/index.html)

# java - 符合垃圾回收条件的对象数

> ID：13369442
> 
> 赞同：0
> 
> 时间：2012-11-13T21:51:05.773
> 
> 标签：java, garbage-collection

我不确定我是否完全理解了垃圾收集器的行为，因此我根据上一个问题提出这个[问题](https://stackoverflow.com/questions/3299604/interview-question-objects-eligible-for-garbage-collection?rq=1)。

在这个程序中：

```
class A {
    Boolean b;
    A easyMethod(A a){
       return new A();
    }
    public static void main(String [] args){
        A a1 = new A();
        A a2 = new A();
        A a3 = new A();
        a3 = a1.easyMethod(a2);
        a1 = null;
        // Some other code 
    }
} 
```

有多少对象有资格进行垃圾收集？我认为虽然`a3`永远不会变为 null，但`new A()`分配给它的第一个对象 ( ) 也应该被垃圾回收，因为没有引用仍然指向它。我对吗？因此，我认为正确的答案将再次是 2 个对象。实际上什么是真的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:03:28.833

> 我认为虽然`a3`永远不会变为 null，但`new A()`分配给它的第一个对象 ( ) 也应该被垃圾回收，因为没有引用仍然指向它。我对吗？因此，我认为正确的答案将再次是 2 个对象。

是的，这完全正确。`a3`最初指向 的一个实例`A`，但是在将该变量重新分配为指向不同的实例之后，不再有任何方法可以到达原始实例，因此该原始实例有资格进行垃圾回收。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T22:06:33.987

是的你是对的。

```
a1 = <instance 1>
a2 = <instance 2>
a3 = <instance 3>
a3 = <instance 4> //as a returned value
a1 = null 
```

所以`instance 1`和`instance 3`不再被引用，因此可以被收集。

# flash - 在 Adob e Flash 中保持框架的属性相同？

> ID：13369446
> 
> 赞同：-1
> 
> 时间：2012-11-13T21:51:27.893
> 
> 标签：flash, properties, frames

我正在用 Adob​​e Flash CS6 制作游戏，除了我被卡住的部分外，一切都进展顺利。

看，有一个带有许多按钮的“关卡”框架，可以将你带到指定的关卡（我猜你可以说它具有愤怒的小鸟关卡页面的布局）。

现在，如果我离开那个框架，BEAT level 1，然后返回到“Levels”框架，我该如何让它显示 Level 1 已经完成？可以说，我只想在该级别框下方显示一个复选标记。

我所拥有的对你有用的就是这个。

```
_root.Checkmark1._visible = true; 
```

抱歉，我知道这还不够，但你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T06:41:59.597

假设 ：

*   您正在使用 AS2（查看 @ _root）。
*   Checkmark1 是组件库中的默认复选框组件。

在 AS2 中编写游戏时，尽量不要直接使用太多全局属性（_root 中的那些）。或者以后可能会变得太混乱。尝试将所有对级别复选框的引用包装到一个数组中，例如：

```
_root.levelChkBoxArray = [Checkmark1,Checkmark2.....]; 
```

或者更好的是布尔数组而不是对象数组，如果您只需要设置可见性。

现在您可以从任何框架设置可见性。

# ruby - 用 Ruby 读取 SAS 数据集？

> ID：13369448
> 
> 赞同：1
> 
> 时间：2012-11-13T21:51:43.713
> 
> 标签：ruby, dataset, sas

我希望能够使用 Ruby 读取 SAS 数据集。有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T23:05:26.000

如果您有权访问 SAS 的本地实例或 SAS/SHARE 服务器，则可以使用 SAS ODBC 驱动程序连接到 SAS 数据库并从中读取。我自己运行一个 SAS/SHARE 服务器并一直从 Excel 访问它。

有关您正在使用的 SAS 版本的更多信息，请参阅[SAS ODBC 驱动程序用户手册](http://support.sas.com/documentation/onlinedoc/odbc/index.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:59:01.913

SAS 数据集文件以专有格式编码。如果您有权访问 SAS，则可以将数据集导出为分隔文本文件，然后使用 Ruby 读取该文件。如果您无法访问 SAS，您可以考虑获得[StatTransfer](http://www.stattransfer.com/)，但它并不便宜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-22T22:47:05.193

可以做你想做的事。

1.  您可以使用 ruby​​ gem [Pandas.rb](https://github.com/mrkn/pandas.rb)来

```
# Untested
require 'pandas'
df = Pandas.read_sas("./path/to/dataset.sas7bdat") 
```

2.  或者，通过一些开发工作，您可以在 Pandas [sas7bdat.py](https://github.com/pandas-dev/pandas/blob/v0.24.2/pandas/io/sas/sas7bdat.py)和[xport.py中实现逻辑](https://github.com/pandas-dev/pandas/blob/v0.24.2/pandas/io/sas/sas_xport.py)

# geometry - 给定不规则多边形的顶点列表，如何创建内部三角形以有效地构建平面 3D 网格？

> ID：13369452
> 
> 赞同：5
> 
> 时间：2012-11-13T21:51:59.727
> 
> 标签：geometry, unity3d, computational-geometry, polygons

我正在使用 Unity，但解决方案应该是通用的。我将通过鼠标点击获得用户输入，它定义了一个封闭的不规则多边形的顶点列表。这些顶点将定义平面 3D 网格的外边缘。

要在 Unity 中以程序方式生成网格，我必须指定所有顶点以及它们如何连接以形成三角形。

因此，对于凸多边形来说，这很简单，我只需制作具有顶点 1、2、3 和 1、3、4 等的三角形，形成类似孔雀尾巴的东西。

但是对于凹多边形来说，它并不是那么简单。有没有找到内部三角形的有效算法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T22:14:06.153

您可以使用受约束的[Delaunay 三角剖分](http://en.wikipedia.org/wiki/Delaunay_triangulation)（实现起来并非易事！）。[Triangle](http://www.cs.cmu.edu/~quake/triangle.html)和[CGAL](http://www.cgal.org/)中提供了良好的库实现，提供了高效的`O(n*log(n))`实现。

如果顶点集很小，[剪耳](http://en.wikipedia.org/wiki/Polygon_triangulation)算法也是一种可能，尽管它不一定会给你一个 Delaunay 三角剖分（它通常会产生次优三角形）并在`O(n^2)`. 不过，实现自己很容易。

由于输入顶点存在于 3d 空间中的平面上，因此您可以通过投影到平面上，计算 2d 中的三角剖分，然后将相同的网格拓扑应用于 3d 顶点集来获得 2d 问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T10:42:12.870

我已经实现了如下的剪耳算法：

1.  遍历顶点，直到找到凸顶点 v
2.  检查多边形上的任何点是否位于三角形 (v-1,v,v+1) 内。如果有，则需要沿顶点 v 以及离线最远的点 (v-1, v+1) 划分多边形。递归地评估两个分区。
3.  如果顶点 v 周围的三角形不包含其他顶点，则将三角形添加到输出列表并删除顶点 v，重复直到完成。

笔记：

1.  即使在处理 3D 面时，这本质上也是 2D 操作。要考虑 2D 中的问题，只需忽略绝对值最大的人脸法线的矢量坐标。（这就是您将 3D 面“投影”到 2D 坐标中的方式）。例如，如果面具有法线 (0,1,0)，您将忽略 y 坐标并在 x,z 平面中工作。
2.  要确定哪些顶点是凸的，首先需要知道多边形的缠绕。您可以通过找到多边形中最左边的（最小的 x 坐标）顶点来确定这一点（通过找到最小的 y 来打破平局）。这样的顶点总是凸的，所以这个顶点的缠绕给你多边形的缠绕。
3.  您可以使用有符号三角形面积方程确定绕组和/或凸度。请参阅：[http](http://softsurfer.com/Archive/algorithm_0101/algorithm_0101.htm) ://softsurfer.com/Archive/algorithm_0101/algorithm_0101.htm 。根据多边形的缠绕，所有凸三角形都具有正面积（逆时针缠绕）或负面积（顺时针缠绕）。
4.  三角形中的点公式由有符号三角形面积公式构成。请参阅：[如何确定一个点是否在二维三角形中？](https://stackoverflow.com/questions/2049582/how-to-determine-a-point-in-a-triangle).
5.  在需要确定哪个顶点 (v) 离直线最远的第 2 步中，您可以通过形成三角形 (L0, v, L1) 并检查哪个具有最大面积（绝对值，除非您'假设一个特定的缠绕方向）
6.  该算法对于自相交多边形没有很好的定义，并且由于浮点精度的性质，您可能会遇到这种情况。可以为稳定性实施一些保护措施： - 一个点不应被视为在您的三角形内，除非它是一个凹点。（这种情况表明自相交，你不应该沿着这个顶点划分你的集合）。您可能会遇到分区完全凹入的情况（即它的缠绕方式与原始多边形的缠绕方式不同）。这个分区应该被丢弃。
7.  由于该算法是循环的并且涉及对集合进行分区，因此使用带有数组进行存储的双向链表结构非常有效。然后，您可以将集合划分为 0(1)，但是该算法仍然具有平均 O(n^2) 运行时间。最佳案例运行时间实际上是需要多次分区的集合，因为这会迅速减少比较次数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T14:54:45.463

有一个用于对[凹](http://wiki.unity3d.com/index.php?title=Triangulator)多边形进行三角剖分的社区脚本，但我没有亲自使用它。作者[声称](http://answers.unity3d.com/questions/295274/3d-triangulation-of-points.html)它适用于 3D 点和 2D。

如果我想将问题限制在 2D 上，我过去使用过的一种技巧是使用[主成分分析](http://en.wikipedia.org/wiki/Principal_component_analysis)来找到 3D 数据中变化最大的 2 个轴，并将它们设为我的“X”和“Y”。

# c++ - void指针转换错误

> ID：13369456
> 
> 赞同：-3
> 
> 时间：2012-11-13T21:52:24.380
> 
> 标签：c++, void-pointers

这是我的代码的一个例外

多边形.h

```
#include "gf.h"    
typedef struct polynome {
int deg, size;
gf_t * coeff;
} * poly_t; /* polynomial has coefficients in the finite field */
class Polinomio{
   public:
     int poly_degppf(poly_t g); 
```

聚.cpp

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "gf.h"
#include "poly.h"
Polinomio::Polinomio(int n){
    printf("Hola como estas");
}
int Polinomio::poly_degppf(poly_t g) {
int i, d, res;
poly_t *u;
d = poly_deg(g);
u = malloc(d * sizeof (poly_t*)); 
```

为什么我会收到此错误？

```
poly.cpp: In member function ‘int Polinomio::poly_degppf(polynome*)’:
poly.cpp:261: error: invalid conversion from ‘void*’ to ‘polynome**’ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:54:04.097

C++ 对类型比 C 更谨慎一些。所以你必须`malloc`调用。像这样：

```
u = (poly_t*)malloc(d * sizeof (poly_t)); 
```

请注意，我还更改了 on 参数`sizeof`，您想要的是类型的大小而不是指向该类型的指针的大小。

最后，不要`malloc`在 C++ 上使用，使用`new`.

还有一件事，`poly_t`已经是指针类型，你可能想声明`u`为 just`poly_t u;`但我不知道你是如何在其余代码中使用它的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:54:50.880

因为 C++ 不允许将 a 隐式转换为`void *`另一个对象指针。您需要使演员表明确：

```
u = static_cast<polynome**>(malloc(d * sizeof(polynome*))); 
```

基本上，只要一个转换是隐式的（例如`T *`to `void *`），相反的转换就需要一个`static_cast`.

# php - 阻止 Alexa 用户

> ID：13369457
> 
> 赞同：0
> 
> 时间：2012-11-13T21:52:24.427
> 
> 标签：php, redirect, proxy, user-agent, alexa

我知道这个问题已经被彻底解决了。我阅读了 stackoverflow 中有关此问题的所有帖子，但也许有人可以对此有所了解。

我想阻止 Alexa 下游点击（不显示人们从我的网站进出的位置）。

我试过：

1.  在我的网站前添加代理
2.  使用 Alexa 工具栏（通过用户代理）阻止所有用户并将他们重定向到虚假网站
3.  机器人.txt

尽管如此，Alexa 在不到一周的时间内收集了有关我网站的所有详细信息。

无论如何要阻止alexa收集数据？？？

谢谢，丹尼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:22:27.587

1.  代理不会帮助你。现在代理代表您的站点，而不是您的真实服务器，但流量和内容完全一样。无用。

2.  基于用户代理阻止访问确实必须正确完成。如果你说“阻止”，你应该真正的意思是“阻止”，就像在“状态 410 或 500 Go Away here is no content”块中一样。如果您无法承受让人们被阻止访问您的内容的代价，因为您不知何故需要一些客户，那么阻止也不起作用。

3.  robots.txt 可能真的有效，如果它会被 Alexa 机器人评估的话。但据我了解 Alexa，没有机器人，但实际上是一个浏览器工具栏，可以监视用户在浏览器中收到的任何内容，并将其发送回 Alexa。也不行。

什么会起作用？与您的网站脱机。

其实，我想知道你为什么在乎。

# c# - 如何从 Xaml 将对象绑定到树视图

> ID：13369460
> 
> 赞同：0
> 
> 时间：2012-11-13T21:52:26.143
> 
> 标签：c#, wpf, xaml, treeview, caliburn.micro

我正在尝试通过 XAML 将对象绑定到 treeviewcontrol WPF，但我将 treview 设为空。当我这样做时，`treeview.items.add(GetNode())`它的工作。

我正在使用 MVVM Framework(caliburn.Micro) 我想在 Xaml 中执行此操作，如何在 xaml 中分配项目源属性？我尝试创建 Node 类的属性并在属性中调用方法 GetNode()，并将该属性分配为树视图的 itemssource 并将 List 更改为 Observable 集合。仍然是相同的问题。

工作时 Xaml`treeview.items.Add(GetNode())`返回一个节点`i`并将节点集合分配给 Hireachial 模板。

```
<TreeView  Name="treeview2" 
            Grid.RowSpan="2"
            Grid.ColumnSpan="2"
            ItemContainerStyle="{StaticResource StretchTreeViewItemStyle}" Width="300">
            <TreeView.ItemTemplate>
                 <HierarchicalDataTemplate  ItemsSource="{Binding Nodes}">
                      <DockPanel LastChildFill="True">
                          <TextBlock  Padding="15,0,30,0" Text="{Binding Path=numitems}" TextAlignment="Right" 
    DockPanel.Dock="Right"/>
                          <TextBlock  Text="{Binding Path=Text}" DockPanel.Dock="Left" TextAlignment="Left" />
                      </DockPanel>
                 </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
  </TreeView> 
```

服务器端代码：

```
this.treeview2.Items.Add(GetNode()); 
```

GetNode 递归地构建一个 Node 类型的列表。

```
public class Node
{
    public string Text { get; set; }
    public List<Node> Nodes { get; set; }
    public ObservableCollection<Node> Nodes{get;set;} // with list and observable collection same results
    public int numitems { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:35:42.853

除了`HierarchicalDataTemplate`看起来不错的 ，添加一个绑定到 TreeView 的 ItemsSource 属性：

```
public class ViewModel
{
   private List<Node> _rootNodes;
   public List<Node> RootNodes 
   {
     get
     {
       return _rootNodes;
     }
     set
     {
       _rootNodes = value;
       NotifyPropertyChange(() => RootNodes);
     }
   }

   public ViewModel()
   {
      RootNodes = new List<Node>{new Node(){Text = "This is a Root Node}", 
                                 new Node(){Text = "This is the Second Root Node"}};
   } 
```

在 XAML 中：

```
<TreeView ItemsSource="{Binding RootNodes}"
          .... /> 
```

编辑：删除不需要的呼叫`this.Treeview....`。尽量减少引用 UI 元素的代码量。您可以使用绑定完成所有操作，无需在代码中操作 UI 元素。

# javascript - 将循环转换为递归函数

> ID：13369465
> 
> 赞同：2
> 
> 时间：2012-11-13T21:52:55.300
> 
> 标签：javascript, string, function, recursion

我昨天写了一个函数来计算`"a"`字符串中的字符数。我的老师告诉我将代码重构为递归函数，我真的不知道该怎么做。

我想要一些关于这个主题的反馈，顺便说一下，我是 JavaScript 的绝对初学者。

```
function numberOfA(n){
var numberA =0;

for (i=0; i<=n.length; i++){

    if(n.charAt(i)== "a"  ){
        numberA++;}
    }
return numberA;

} 
```

调用以下代码的函数：

```
var n = prompt("type a word");
var output = numberOfA(n);

alert (output); 
```

提前致谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T22:26:33.827

递归的目标是创建一个调用自身的函数。
你可能有相互递归——函数 A 调用函数 B，调用函数 A ......但这里肯定不需要，并且更适合当你知道你需要做两件不同的事情（每个函数一个）并且知道你需要以一种跨越式的方式来完成它们。

当您考虑循环时，递归发挥作用。
通常，当您使用循环执行操作时，您最终可能会在彼此内部有两个或三个循环。
递归不是担心管理循环，而是一种思考循环的单次迭代中发生的事情的方式，并且只编写执行该操作所需的代码。

一个非常简单的奇异递归示例可能是将数组的所有元素记录到控制台。
这不是一个实际示例——它是一个微不足道的示例，其中包含您制作实际示例所需的大部分内容。

```
var array = [ "one", "two", "three", "four" ];

function listNextItem (array, index) {
    var item = array[index];
    if (!item) { return; }

    console.log(item);
    listNextItem(array, index + 1);
}

listNextItem(array, 0); 
```

我创建了一个非常简单的函数，它看起来像您最内层循环的内部。
它设置一个项目变量，基于`array[index]`.
如果它不存在，我们就完成了，我们可以从函数中返回，所以我们不会试图永远继续下去（这在递归中非常重要）。

如果确实存在，我们会记录该项目的值。然后我们调用完全相同的函数，并将完全相同的数组传递给它，但我们传递给它的值是`index + 1`.

这是否改变了任何人的生活，或者使循环过时了？
并不真地。

但这是获得递归的第一步。

下一步是`return`从递归中获取一个。

```
function recursiveAddOne (current, max) {
    if (current === max) { return current; }
    return 1 + recursiveAddOne(current + 1, max);
}

var total = recursiveAddOne(0, 3); // === 3 + 1 + 1 + 1
total; // 6 
```

通常在我的返回语句中，我会将答案发送回外部世界的变量。
我仍在这样做，但在这里我将 a 添加`call`到同一个函数中，作为我返回的一部分。

那有什么作用？
好吧，在内部函数返回之前，外部函数不能返回值。
在 ITS 内部函数返回之前，内部函数无法返回值...

...它一直下降，直到满足我的终止条件。该条件将一个值返回到其外部函数。该外部函数将该附加值返回给它的外部函数... ...一直到最外部的函数将所有其他函数的值放在一起，然后将其返回给外部世界。

这就像给每个俄罗斯套娃（“头巾”）娃娃一件作品。
你从最大的开始，一直到最小的。
最小的一个先做它的工作，然后把它交还给下一个，它做它的工作并把它交还给…………一直回来，直到你再次到外面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T21:56:03.513

好吧，递归的基本概念是用较小的版本解决问题。

你有一个函数，`numberOfA`它给你一个字符串（或者可能是子字符串）的长度。

所以假设你有`"javascript'` 第一个字符串在索引 2 处的字符串。

说`a`你的字符串中 s 的数量等于 1 加上第`a`一个之后的整个子字符串中 s 的数量是合乎逻辑的`a`。

所以你要做的，是你添加到子字符串中的 s`1`的数量`a``vascript`

所以这里有一些伪代码

```
function numA(str)
{
    var substring = substr(index_of_first_a, str.length - index_of_first_a
    return 1 + numA(substring);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:02:54.167

尝试这个：

```
function numberOfA(n) {
    return n == "" ? 0 : (n.charAt(0) == "a" ? 1 : 0) + numberOfA(n.substring(1))
} 
```

以下是它的工作原理：

*   如果`n`是空字符串，返回`0`并结束递归。这是递归的*基本情况*。
*   否则，如果字符串中第一个位置的字符是`"a"`加一，如果不是加零，则通过从字符串中删除第一个字符来推进递归。这是递归的*递归步骤*。

如您所见，每个递归解决方案都必须至少有一个基本案例和一个递归步骤。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T22:00:01.710

```
function numberOfA(n, count){
    if(!n.length) {  
        return count;
    }

    if(n.charAt(i)== "a") {
        ++count;
    }

    return numberOfA(n.substr(1), count);
}
var numberA = numberOfA('asdfafeaa', 0); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-08-07T08:09:21.113

```
<!DOCTYPE html><html lang="en"><body><script>
var foo = function foo() {
console.log(arguments.callee); // logs foo()
// callee could be used to invoke recursively the foo function (e.g. arguments.callee())
}();
</script></body></html> 
```

arguments.callee 函数将调用当前正在执行的方法。

# c++ - 固定维数（N=9）、对称、半正定的密集线性系统的快速求解

> ID：13369468
> 
> 赞同：7
> 
> 时间：2012-11-13T21:53:03.380
> 
> 标签：c++, algorithm, math, linear-algebra, equation-solving

您会推荐哪种算法快速解决固定维度（N = 9）的密集线性系统（矩阵是对称的，半正定的）？

*   高斯消元
*   LU分解
*   乔列斯基分解
*   ETC？

类型为 32 位和 64 位浮点数。

这样的系统将被求解数百万次，因此算法在维度（n = 9）方面应该相当快。

**对所提出算法的鲁棒**C++ 实现的PS 示例表示赞赏。

> 1）“解决百万次”是什么意思？相同的系数矩阵具有一百万个不同的右手项，还是一百万个不同的矩阵？

数百万个不同的矩阵。

> 2）正_semi_defined意味着矩阵可以是奇异的（机器精度）。你想如何处理这个案子？只是提出一个错误，或者尝试返回一些明智的答案？

引发错误是可以的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-14T07:14:06.533

矩阵是对称的，半正定的，**Cholesky 分解**严格优于 LU 分解。（无论矩阵大小如何，大约比 LU 快两倍。来源：Trefethen 和 Bau 的“数值线性代数”）

它实际上也是小型密集矩阵的标准（来源：我在计算数学中攻读博士学位）除非系统变得足够大，否则迭代方法的效率低于直接方法（快速的经验法则没有任何意义，但这总是很好拥有：在任何现代计算机上，任何小于 100*100 的矩阵绝对是一个需要直接方法而不是迭代方法的小矩阵）

现在，我不建议自己做。那里有大量经过彻底测试的优秀库。但是，如果我必须向您推荐一个，那就是[Eigen](http://eigen.tuxfamily.org/index.php?title=Main_Page)：

*   无需安装（只有头文件库，所以没有要链接的库，只有#include<>）
*   强大而高效（他们在主页上有很多基准测试，结果很好）
*   易于使用且有据可查

顺便说一句，[在文档](http://eigen.tuxfamily.org/dox/TutorialLinearAlgebra.html#TutorialLinAlgBasicSolve)中，您可以在一个简洁的表格中了解他们的 7 个直接线性求解器的各种优缺点。似乎在您的情况下，LDLT（Cholesky 的变体）获胜

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T23:06:27.243

一般来说，最好使用现有的库，而不是自己动手的方法，因为为了追求快速、稳定的数值实现，需要处理许多繁琐的细节。

这里有一些可以帮助您入门：

特征库（我个人偏好）：
[http ://eigen.tuxfamily.org/dox/QuickRefPage.html#QuickRef_Headers](http://eigen.tuxfamily.org/dox/QuickRefPage.html#QuickRef_Headers)

犰狳： [http ://arma.sourceforge.net/](http://arma.sourceforge.net/)

搜索周围，你会发现很多其他的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T23:55:08.030

我会推荐 LU 分解，特别是如果“解决数百万次”真的意味着“解决一次并应用于数百万个向量”。您将创建 LU 分解，保存它，并根据需要对尽可能多的 rhs 向量应用前向替换。

如果您使用旋转，它在四舍五入时会更稳定。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-14T08:28:32.890

对称半定矩阵的 LU 没有多大意义：您破坏了输入数据的一个很好的属性，执行了不必要的操作。

LLT 或 LDLT 之间的选择实际上取决于矩阵的条件数，以及您打算如何处理边缘情况。仅当您可以证明准确性在统计上显着提高，或者稳健性对您的应用程序至关重要时，才应使用 LDLT。

（如果没有您的矩阵样本，很难给出合理的建议，但我怀疑在如此小的阶数 N=9 的情况下，确实没有必要将小对角线项转向 D 的底部。所以我将从经典开始如果 diag 项相对于某些明智选择的容差变得很小，则 Cholesky 并简单地中止分解。）

Cholesky 的代码非常简单，如果您追求真正快速的代码，最好自己实现它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-14T12:17:36.193

像上面的其他人一样，我推荐cholesky。我发现加法、减法和内存访问次数的增加意味着 LDLt 比 Cholesky 慢。

实际上，cholesky 有许多变体，哪一个最快取决于您为矩阵选择的表示形式。我通常使用 fortran 样式表示，即矩阵 M 是 double* M ， M(i,j) 是 m[i+dim*j]; 为此，我认为上三角 cholesky 是（一点）最快的，即寻找 U'*U = M 的上三角 U。

对于固定的、小尺寸的，绝对值得考虑编写一个不使用循环的版本。一个相对简单的方法是编写一个程序来完成它。我记得，使用处理一般情况的例程作为模板，只用了一个上午就编写了一个可以编写特定固定尺寸版本的程序。节省的费用可能相当可观。例如，我的通用版本需要 0.47 秒来完成一百万个 9x9 因式分解，而无环版本需要 0.17 秒——这些时间在 2.6GHz 电脑上运行单线程。

为了表明这不是一项主要任务，我在下面包含了此类程序的源代码。它包括作为注释的分解的一般版本。我在矩阵不接近单数的情况下使用了此代码，并且我认为它在那里可以正常工作；然而，对于更精细的工作来说，它可能太粗糙了。

```
/*  ----------------------------------------------------------------
**  to write fixed dimension ut cholesky routines
**  ----------------------------------------------------------------
*/
#include    <stdio.h>
#include    <stdlib.h>
#include    <math.h>
#include    <string.h>
#include    <strings.h>
/*  ----------------------------------------------------------------
*/
#if 0
static  inline  double  vec_dot_1_1( int dim, const double* x, const double* y)
{   
double  d = 0.0;
    while( --dim >= 0)
    {   d += *x++ * *y++;
    }
    return d;
}

   /*   ----------------------------------------------------------------
    **  ut cholesky: solve U'*U = P for ut U in P (only ut of P accessed)
    **  ----------------------------------------------------------------
    */   

int mat_ut_cholesky( int dim, double* P)
{
int i, j;
double  d;
double* Ucoli;

    for( Ucoli=P, i=0; i<dim; ++i, Ucoli+=dim)
    {   /* U[i,i] = P[i,i] - Sum{ k<i | U[k,i]*U[k,i]} */
        d = Ucoli[i] - vec_dot_1_1( i, Ucoli, Ucoli);
        if ( d < 0.0)
        {   return 0;
        }
        Ucoli[i] = sqrt( d);
        d = 1.0/Ucoli[i];
        for( j=i+1; j<dim; ++j)
        {   /* U[i,j] = (P[i,j] - Sum{ k<i | U[k,i]*U[k,j]})/U[i,i] */
            P[i+j*dim] = d*(P[i+j*dim] - vec_dot_1_1( i, Ucoli, P+j*dim));
        }
    }
    return 1;
}
/*  ----------------------------------------------------------------
*/
#endif

/*  ----------------------------------------------------------------
**
**  ----------------------------------------------------------------
*/
static  void    write_ut_inner_step( int dim, int i, int off)
{
int j, k, l;
    printf( "\td = 1.0/P[%d];\n", i+off);
    for( j=i+1; j<dim; ++j)
    {   k = i+j*dim;
        printf( "\tP[%d] = d * ", k);
        if ( i)
        {   printf( "(P[%d]", k);
            printf( " - (P[%d]*P[%d]", off, j*dim);
            for( l=1; l<i; ++l)
            {   printf( " + P[%d]*P[%d]", l+off, l+j*dim);
            }
            printf( "));");
        }
        else
        {   printf( "P[%d];", k);
        }
        printf( "\n");
    }
}

static  void    write_dot( int n, int off)
{   
int i;
    printf( "P[%d]*P[%d]", off, off);
    for( i=1; i<n; ++i)
    {   printf( "+P[%d]*P[%d]", off+i, off+i);
    }
}

static  void    write_ut_outer_step( int dim, int i, int off)
{
    printf( "\td = P[%d]", off+i);
    if ( i)
    {   printf( " - (");
        write_dot( i, off);
        printf( ")");
    }
    printf( ";\n");

    printf( "\tif ( d <= 0.0)\n");
    printf( "\t{\treturn 0;\n");
    printf( "\t}\n");

    printf( "\tP[%d] = sqrt( d);\n", i+off);
    if ( i < dim-1)
    {   write_ut_inner_step( dim, i, off);  
    }
}

static  void    write_ut_chol( int dim)
{
int i;
int off=0;
    printf( "int\tut_chol_%.2d( double* P)\n", dim);
    printf( "{\n");
    printf( "double\td;\n");
    for( i=0; i<dim; ++i)
    {   write_ut_outer_step( dim, i, off);
        printf( "\n");
        off += dim;
    }
    printf( "\treturn 1;\n");
    printf( "}\n");
}
/*  ----------------------------------------------------------------
*/

/*  ----------------------------------------------------------------
**
**  ----------------------------------------------------------------
*/
static  int read_args( int* dim, int argc, char** argv)
{
    while( argc)
    {   if ( strcmp( *argv, "-h") == 0)
        {   return 0;
        }
        else if (strcmp( *argv, "-d") == 0)
        {   --argc; ++argv;
            *dim = atoi( (--argc, *argv++));
        }
        else
        {   break;
        }
    }
    return 1;
}

int main( int argc, char** argv)
{
int dim = 9;
    if( read_args( &dim, --argc, ++argv))
    {   write_ut_chol( dim);
    }
    else
    {   fprintf( stderr, "usage: wchol (-d dim)? -- writes to stdout\n");
    }
    return EXIT_SUCCESS;
}
/*  ----------------------------------------------------------------
*/ 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-09T07:00:46.443

由于它的易用性，您可以拿 Eigen 求解器进行比较。对于特定的用例，特定的求解器可能会更快，尽管另一个应该更好。为此，您可以仅针对选择测量每个算法的运行时间。之后，您可以实施所需的选项（或找到最适合您需求的现有选项）。

# string - 在 Perl 搜索中正确转义 doctype 声明字符串

> ID：13369469
> 
> 赞同：1
> 
> 时间：2012-11-13T21:53:04.533
> 
> 标签：string, perl, escaping, find, operators

使用 Perl find 我无法成功转义搜索字符串中的 DOCTYPE 声明。这是我正在搜索的字符串的示例；

```
find . -type f|xargs -d "\n" perl -pi -e 's/ <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1\.0 Transitional//EN" "http://www\.w3\.org/TR/xhtml1/DTD/xhtml1-transitional\.dtd">//g' 
```

用任何内容替换 doctype 声明。请如果有人可以正确地转义这个字符串，以便 perl find 可以找到任何字符串，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T23:15:56.867

正如另一个人所建议的那样，`'/'`您的正则表达式中的各种字符需要用 a 转义，`'\'`因为 Perl 会将它们读作`s///;`过早结束，否则会导致一些错误。在处理这些时，您总是必须注意特殊字符，正如我看到您在各个时期所做的那样。

```
's/ <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1\.0 Transitional//EN" "http://www\.w3\.org/TR/xhtml1/DTD/xhtml1-transitional\.dtd">//g' 
```

您可以将 a 中的分隔符更改`s///;`为其他内容，例如 `s###`或`s{}{}`以帮助缓解问题，如果您使用 HTML，我通常建议您这样做。

即便如此，我会说尽量简化正则表达式以适应应用程序。因为像这样的 HTML 使用起来可能很讨厌，所以尝试使用非贪婪匹配任何类型的正则表达式，但使用`<`and`>`来捕获特定标签。例如，您可能会使用这样的正则表达式...

`s{<!DOCTYPE .*?>}{}s`

和一些解释的格式......

```
s{
    <!DOCTYPE   # opening doctype tag
    \s          # one whitepsace
    .*?         # anything (even newlines because of /s flag) non-greedily
     >          # until the first closing greater than 
}{}xs;          # x is ignore whitespace, s is have '.' match anything (even \n) 
```

此示例使用`/x`标志将其注释掉并解释所有内容，但如果您在命令行上执行此操作，则没有必要这样做。

我不能谈论你问题的其余部分，因为我对 shell 命令不太熟悉，只对正则表达式部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:56:14.197

`/`除了在 Perl 中，您还可以使用其他分隔符。试试这个：

```
s{<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1\.0 Transitional//EN" "http://www\.w3\.org/TR/xhtml1/DTD/xhtml1-transitional\.dtd">}{}g 
```

由于斜线不再分隔正则表达式，因此可以安全使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:03:30.280

如果在`DOCTYPE`一行，最好这样写：

```
find . -type f -exec sed -i '/DOCTYPE/d' {} + 
```

或在`perl`：

```
find . -type f -exec perl -i -ne 'print unless /DOCTYPE/' {} + 
```

以避免保留空白行。

**笔记**

*   `-i`开关修改文件。出于测试目的将其删除

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-14T00:54:56.993

虽然已经涵盖了备用分隔符（例如`s###`），但我会添加 using`\Q`和`\E`删除其他转义需求：

```
s#\Q<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">\E##g' 
```

# javascript - Mailto：IE 限制为 2048 个字符

> ID：13369470
> 
> 赞同：0
> 
> 时间：2012-11-13T21:53:05.110
> 
> 标签：javascript, html, email, outlook, mailto

我正在开发一个应用程序，在该应用程序中，用户可以使用所选人员的电子邮件地址预先填充电子邮件。这最终可能达到数百个电子邮件地址的水平，这会产生大量的 mailto: 链接（远超过 2000 个字符）。理想情况下，用户将单击一个按钮，该按钮将指向此 mailto: 链接，然后使用所有这些电子邮件地址打开 Outlook，这将适用于较少数量的用户。

我发现从 IE 执行此操作存在问题，它会达到 2048 个字符的最大 URL 长度 (http://support.microsoft.com/kb/208427)。

是否有某种方法可以在仍然使用 IE 的同时绕过 javascript 中的这一限制，这样它就不会打开多个电子邮件窗口或要求用户在发送电子邮件时做任何“额外”工作？理想情况下，我们仍然希望它与以前一样，它只会在 Outlook 中预填充电子邮件，但我们也在考虑编写自己的完整电子邮件系统

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T21:54:54.677

不，没有。

您最好使用服务器端脚本发送电子邮件，因为这种方式没有限制，并且如果需要，电子邮件地址可以保持私密。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T21:54:22.673

除了从您的服务器而不是客户端发送邮件之外，没有办法解决这个问题。

# java - SWT FileDialog 打开问题

> ID：13369472
> 
> 赞同：0
> 
> 时间：2012-11-13T21:53:09.883
> 
> 标签：java, swt, filedialog

我需要使用 Java 7 在 Windows 7 Home 上使用 SWT 打开一个 FileDialog 来打开一个文件。当按下 BrowseBtn1 按钮 (SWT) 时，我需要打开这个 FileDialog。我为此使用 addSelectionListener 。这是正确的方法吗？如果是，为什么我的对话框在没有遇到任何运行时错误时不会打开。我根本不使用 AWT，只使用 SWT。

```
import org.eclipse.swt.*;
import org.eclipse.swt.widgets.*;
import org.eclipse.swt.widgets.FileDialog;
import org.eclipse.swt.events.*;
import org.eclipse.swt.graphics.FontData;
import org.eclipse.swt.layout.*;

public class MySwtApp {
    public static Display display;
    public static Shell shell;

    public static void main(String[] args) {

        display = new Display ();
        shell = new Shell (display);
        shell.setText("MY TITLE");
        GridLayout gridLayout = new GridLayout (3, false);
        shell.setLayout (gridLayout);

        Label Label1 = new Label (shell, SWT.NONE);
        Label1.setText ("Select Message ");
        GridData data = new GridData (200, SWT.DEFAULT);
        Label1.setLayoutData (data);

        Combo Combo1 = new Combo (shell, SWT.NONE);
        Combo1.setItems (new String [] {"Option A", 
                "Option B"});
        // CaseStudyCombo.setText ("CaseStudyCombo");
        data = new GridData (200, SWT.DEFAULT);
        Combo1.setLayoutData (data);
        Combo1.addListener (SWT.DefaultSelection, new Listener () {
            public void handleEvent (Event e) {
                System.out.println (e.widget + " - Default Selection");
            }
        });

        Label emptyLabel = new Label (shell, SWT.NONE);
        emptyLabel.setText ("");
        data = new GridData (50, SWT.DEFAULT);
        emptyLabel.setLayoutData (data);

        Label Label2 = new Label (shell, SWT.NONE);
        Label2.setText ("Next Message: ");
        data = new GridData (200, SWT.DEFAULT);
        Label2.setLayoutData (data);

        final Text text4 = new Text (shell, SWT.BORDER);
        text4.setText ("");
        data = new GridData (215, SWT.DEFAULT);
        text4.setLayoutData (data);

        Button BrowseBtn1 = new Button (shell, SWT.PUSH);
        BrowseBtn1.setText ("Browse");
        data = new GridData (80, SWT.DEFAULT);
        BrowseBtn1.setLayoutData (data);
        BrowseBtn1.addSelectionListener(new SelectionAdapter() {
            String result = "";
            public void WidgetSelected(SelectionEvent e) {
                FileDialog dialog = new FileDialog (shell, SWT.OPEN);
                dialog.setFilterExtensions(new String [] {"*.html"});
                //dialog.setFilterPath("c:\\temp");
                result = dialog.open();
                text4.setText(result);
            }
        });

        Label Label3 = new Label (shell, SWT.NONE);
        Label3.setText ("Message Label 3: ");
        data = new GridData (200, SWT.DEFAULT);
        Label3.setLayoutData (data);

        Text text5 = new Text (shell, SWT.BORDER);
        text5.setText ("");
        data = new GridData (215, SWT.DEFAULT);
        text5.setLayoutData (data);

        Button BrowseBtn2 = new Button (shell, SWT.PUSH);
        BrowseBtn2.setText ("Browse");
        data = new GridData (80, SWT.DEFAULT);
        BrowseBtn2.setLayoutData (data);

        Label Label4 = new Label (shell, SWT.NONE);
        Label4.setText ("Message Label 4: ");
        data = new GridData (200, SWT.DEFAULT);
        Label4.setLayoutData (data);

        Combo Combo2 = new Combo (shell, SWT.NONE);
        Combo2.setText ("Options");
        data = new GridData (200, SWT.DEFAULT);
        Combo2.setLayoutData (data);

        Button searchBtn1 = new Button (shell, SWT.PUSH);
        searchBtn1.setText ("Search");
        data = new GridData (80, SWT.DEFAULT);
        searchBtn1.setLayoutData (data);

        Combo Combo3 = new Combo (shell, SWT.NONE);
        // CaseStudyCombo.setItems (new String [] {"Item 1", "Item 2", "Item 2"});
        Combo3.setText ("Options:");
        data = new GridData (200, SWT.DEFAULT);
        Combo3.setLayoutData (data);

        Combo Combo4 = new Combo (shell, SWT.NONE);
        Combo4.setText ("Options:");
        data = new GridData (200, SWT.DEFAULT);
        Combo4.setLayoutData (data);

        Button showDetailsBtn = new Button (shell, SWT.PUSH);
        showDetailsBtn.setText ("Show Details");
        data = new GridData (80, SWT.DEFAULT);
        showDetailsBtn.setLayoutData (data);

        shell.pack ();
        shell.open ();

        while (!shell.isDisposed ()) {
            if (!display.readAndDispatch ())
                display.sleep ();
        }
        display.dispose ();
    }
} 
```

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:06:07.300

有问题的行是这样的：

```
public void WidgetSelected(SelectionEvent e) 
```

注意大写的“W”。您当前正在做的是在该匿名类中定义一个新方法（而不是覆盖现有的 widgetSelected(...) 方法）。如果您像这样将其更改为小写“w”，它将起作用：

```
public void widgetSelected(SelectionEvent e) 
```

使用 @Override 注释是一个很好的做法（实际上超过推荐）。如果你使用了它，编译器会标记你一个错误（参考例如 Joshua Bloch Effective Java 2nd edition Item 36: Consistently use the Override annotation）

# uilabel - 无法移动 UILabel 位置

> ID：13369474
> 
> 赞同：0
> 
> 时间：2012-11-13T21:53:13.193
> 
> 标签：uilabel, move, cgrect

我知道，这是一个愚蠢的愚蠢问题，但是在一天尝试了我所看到的所有搜索之后，我无法移动 UILabel，代码是这样的：

```
CGRect frame = self.label_total.frame;
frame.origin.x = 500; // new x coordinate
frame.origin.y = 500; // new y coordinate
self.label_total.frame = frame; 
```

如果我将它放在 IBAction 中它可以工作，但我想将它插入 viewDidLoad，但它不起作用。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T12:55:54.090

试试这个代码稍加修改。必须提供标签的出口。

```
CGRect frame1 = lbl_total.frame   ;
frame1.origin.x = 500; // new x coordinate
frame1.origin.y = 500; // new y coordinate
lbl_total.frame= frame1; 
```

# c# - 一个 Context 类，两个 Model 类

> ID：13369480
> 
> 赞同：1
> 
> 时间：2012-11-13T21:53:46.580
> 
> 标签：c#, asp.net-mvc, ef-code-first

我正在学习 MVC，我了解如何创建单个模型类，然后创建单个上下文类，然后基于模型/上下文组合创建控制器和视图，并使用代码将模型提交到数据库-第一的。

现在我想将第二个模型（以及表格）加入到组合中。我最初尝试以相同的方式创建第二个上下文类，然后是第二个模型类，然后是控制器和视图。结果，我发现我一次只能将一个模型提交到数据库。每当我在一个模型上启用自动迁移，然后`Update-Database`在包管理器中运行命令时，另一个表就会从我的数据库中消失，并且另一个模型的添加/删除/编辑/查看功能也会中断。

当然，您必须能够使用此技术来管理多个表吗？我的问题是，如果我有两个模型类，如下所示：

```
[Table("TableOne")]
public class ModelOne
{
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int ID { get; set; }

    public string Foo { get; set; }
}

[Table("TableTwo")]
public class ModelTwo
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ID { get; set; }

    public string Bar { get; set; }
} 
```

如果我想同时使用两者，我的 Context 类需要是什么样的？我的想法是试试这个：

```
public class FooBar : DbContext
{
    public FooBar()
        : base("DefaultConnection")
    {

    }

    public DbSet<ModelOne> TableOne { get; set; }
    public DbSet<ModelTwo> TableTwo { get; set; }
} 
```

然后在添加控制器向导中，我可以选择**具有读/写操作和视图的 MVC 控制器，使用****模板**下拉列表中的实体框架、**模型类**下拉列表中的ModelOne**和**数据**上下文类**下拉列表中的**FooBar-**第一个模型的下拉列表，以及第二个模型的**模型类下拉列表中的****ModelTwo**相同的选项，一切都会按预期工作，但是每当我尝试基于模型创建第一个控制器时，我都会得到这个错误：

 ******> 生成 FooBar 时出错。尝试重建您的项目。

我已经尝试重建我的项目，但我得到了同样的错误，所以很明显我做错了更大的事情。我做错了什么，我需要如何修改我的 FooBar 上下文类以使事情正常工作，假设它是我的 FooBar 上下文类是错误的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:34:12.297

通常，上下文类和模型类之间不会存在一对一的关系。所有关联的模型都进入一个上下文。例如，我的应用程序中的每个区域通常都有一个上下文，但如果您不使用区域，您仍然可以在单个上下文中对模型进行逻辑分组。

问题出现的地方在于有多个上下文。EF 只喜欢迁移一个上下文。如果没有迁移，您可以很容易地通过在上下文类上手动指定所有上下文类来使用相同的数据库。

```
public class MyContext: DbContext
{
    public MyContext()
        : base("name=MyConnectionName")
    {
    }
} 
```

如果每个上下文都是这样定义的，那么它们都将使用命名连接字符串指向的同一个数据库。

至于让迁移一起玩，*编程实体框架：DbContext*（以及几乎所有相关的 EF 书籍）的作者 Julie Lerman 有一个利用通用基类的解决方案（**编辑：**实际上 Julie 将该模式归因于EF 团队的 Arthur Vickers）：

```
public class BaseContext<TContext> : DbContext
where TContext : DbContext
{
    static BaseContext()
    {
        Database.SetInitializer<TContext>(null);
    }
    protected BaseContext()
        : base("name=breakaway")
    {
    }
} 
```

并且，然后您让每个单独的上下文继承自`BaseContext`：

```
public class TripPlanningContext : BaseContext<TripPlanningContext>
public class SalesContext : BaseContext<SalesContext> 
```

相关部分从上述书籍的第 231 页开始。

**更新**

其实我骗了你。Julie 给出的模式只是为了让它们更容易共享同一个数据库。要通过仅针对一个上下文问题的迁移，您必须作弊并实质上创建一个包含所有内容的大上下文，然后仅将其用于数据库初始化/迁移。对于代码中的其他所有内容，您将使用其他更具体的上下文。******

# java - 限制 JScrollPane 视图宽度

> ID：13369490
> 
> 赞同：5
> 
> 时间：2012-11-13T21:54:23.927
> 
> 标签：java, swing, jscrollpane

如何限制`JScrollPanel`视图宽度？我不希望在任何情况下发生水平滚动。我试图提供自己的`JViewport`，但这并没有多大帮助。

```
private static class WidthRestrictingViewport extends JViewport {
        private Container contents;

        public WidthRestrictingViewport(final Container cnts) {
            contents = cnts;
        }

        @Override
        public Dimension getPreferredSize() {
            if (getParent() instanceof JScrollPane) {
                JScrollPane sp = (JScrollPane) getParent();
                return new Dimension(sp.getWidth(), contents.getHeight());
            }
            return super.getPreferredSize();
        }

        @Override
        public Dimension getMaximumSize() {
            return getPreferredSize();
        }
    } 
```

以及创建的代码`JScrollPane`

```
Container fpdp = ....

    JScrollPane sp = new JScrollPane();
    sp.setViewport(new WidthRestrictingViewport(fpdp));
    sp.setViewportView(fpdp); 
```

`contents`我提供的实例采用其最大宽度，但是我希望它的宽度不超过`JScrollPane`宽度，因此不会发生水平滚动。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T23:01:36.893

对不起，我的解释很糟糕。我找到了一种方法来做到这一点。感谢[JScrollpane 需要缩小它的宽度](https://stackoverflow.com/questions/2716274/jscrollpane-needs-to-shrink-its-width)。

我面临的另一个问题是`ScrollablePanel`. 那就是`FlowLayout`把所有事情都搞砸了。我一下子没看懂，以为问题出在`Scrollable`接口使用上。

So I just took `ScrollablePanel` and set its layout manager to `BorderLayout` and that is all fine now!

# batch-file - 批量 Sctiping 令牌

> ID：13369491
> 
> 赞同：3
> 
> 时间：2012-11-13T21:54:30.477
> 
> 标签：batch-file

我有以下问题。我正在从数据库中读取字段。这些字段并非都是强制性的。因此，并非所有这些都已填写。我遇到的问题是批处理（ms dos）和令牌功能。

举个例子：
有问题的字段如下：（例子）

```
First Name: John
Last Name: Smith
Address: 123 Fake Street
Postal Code: 45612
Company: SomeCo
Department: Accounting
Floor: 4
Phone: 123-555-5555
Mobile: 123-555-5556 
```

当我运行此代码时：

```
FOR /F "tokens=1-9, delims=," %%a in (info_file.txt) DO echo %%a, %%b, %%c, %%d, %%e, %%f, %%g, %%h, %%i 
```

输出将如下所示：

```
%%a= John
%%b= Smith
%%c= 123 Fake Street
%%d= 45612
%%e= SomeCo
%%f= Accounting
%%g= 4
%%h= 123-555-5555
%%i= 123-555-5556 
```

一切都很好。我正确显示了所有回声。但！如果缺少这些字段中的任何一个，例如：

```
First Name: John
Last Name: Smith
Address: 123 Fake Street
Postal Code: <missing info; consider this line blank>
Company: SomeCo
Department:  <missing info; consider this line blank>
Floor:  4
Phone: 123-555-5555
Mobile: 123-555-5556 
```

我的输出如下所示：

```
%%a= John
%%b= Smith
%%c= 123 Fake Street
%%d= SomeCo
%%e= 4
%%f= 123-555-5555
%%g= 123-555-5556
%%h= <not used; Because there is not enough lines available>
%%i= <not used; Because there is not enough lines available> 
```

您可以看到这如何导致挫败感。
我的问题是：如何确保所有内容`%%<variables>`始终对齐，即使该空间中的信息为空白？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T23:33:29.880

第一个问题是您的示例文本不适合您的代码。
您的代码以逗号分隔字符串，但您的示例仅使用换行符。

我假设你有一个 CSV。

然后您只需将每个 , 替换为 ,# 因为这样就没有字段为空，然后删除第一个字符。

```
Set line=#!line:,=,#! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T23:33:57.343

另一种语言（例如带有 CSV 库的 python）可能是最好的。

如果你真的想要批处理，你可以在每个部分临时附加另一个字符。例如在每个部分的末尾添加和删除下划线。

```
@echo off

setlocal EnableDelayedExpansion

for /f "tokens=*" %%z in (test.csv) do (
    set line=%%z
    rem append underscores
    set line=!line:,=_,!_
    for /f "tokens=1-9 delims=," %%a in ("!line!") do (
        call :remove_underscore arg1 "%%a"
        call :remove_underscore arg2 "%%b"
        call :remove_underscore arg3 "%%c"
        call :remove_underscore arg4 "%%d"
        echo arg1: '!arg1!'
        echo arg2: '!arg2!'
        echo arg3: '!arg3!'
        echo arg4: '!arg4!'
    )
    echo new line
    echo.
)
exit /b 0

:remove_underscore rval input_string
    set input_string=%~2
    set %1=%input_string:~0,-1%
    exit /b 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-14T02:44:45.620

下面的批处理文件采用了 jeb 和 William 提出的想法，并将它们收集到一个真正有效的整个程序中。该程序不受文件中字段数量的限制，也不受`"tokens=1-..."`使用 FOR 选项时所需的缺失字段位置的限制。相反，它使用描述文件字段的变量名称列表，以便程序加载*变量中的值*（而不是 FOR 标记）。这样，只需更改变量列表，就可以很容易地更改字段的数量、特定字段的位置或文件中的任何其他修改。

```
@echo off
setlocal EnableDelayedExpansion

rem Define names for variables (with NO spaces) in a comma-separated list
set fields=FirstName,LastName,Address,PostalCode,Company,Departament,Floor,Phone,Mobile
rem Previous list may also be read from the first line (header) of a DataBase file

rem Separate the list in an array of variable names
set i=0
for %%a in (%fields%) do (
   set /A i+=1
   set name[!i!]=%%a
)
set numFields=%i%

rem Process the file
for /F "delims=" %%a in (info_file.txt) do (
   set line=%%a
   rem Replace spaces by Ascii-128 (to avoid split values that may have spaces)
   set line=!line: =Ç!
   rem Insert any char. at beginning of each field, and separate fields with spaces
   set i=0
   for %%b in (X!line:^,^= X!) do (
      set field=%%b
      rem Recover spaces in this field, if any
      set field=!field:Ç= !
      rem And assign this field to corresponding variable (removing first character)
      set /A i+=1
      for %%i in (!i!) do set !name[%%i]!=!field:~1!
   )

   rem At this point all variables have the values of current record.
   rem They may be accessed explicitly:
   echo/
   echo Record of !FirstName! !LastName!
   rem ... or implicilty via the NAME array:
   for /L %%i in (3,1,%numFields%) do (
      for %%b in (!name[%%i]!) do echo    %%b: !%%b!
   )
) 
```

info_file.txt：

```
John,Smith,123 Fake Street,45612,SomeCo,Accounting,4,123-555-5555,123-555-5556
Jane,Doe,123 Fake Street,,SomeCo,,4,123-555-5555,123-555-5556 
```

输出：

```
Record of John Smith
   Address: 123 Fake Street
   PostalCode: 45612
   Company: SomeCo
   Departament: Accounting
   Floor: 4
   Phone: 123-555-5555
   Mobile: 123-555-5556

Record of Jane Doe
   Address: 123 Fake Street
   PostalCode:
   Company: SomeCo
   Departament:
   Floor: 4
   Phone: 123-555-5555
   Mobile: 123-555-5556 
```

安东尼奥

# django - 如何用不同的语言格式化日期？

> ID：13369493
> 
> 赞同：7
> 
> 时间：2012-11-13T21:54:46.837
> 
> 标签：django, django-templates

我有一个设置为 lang 'pl' 的 Django 项目，在我使用本地化日期格式的每个模板中，例如：

```
{{ item.date|date:'D, d N H:i:s e' }}

result:
    Wt, 13 Lis 2012 22:00:00 
```

但在只有一个模板中，我必须使用 lang 'en' 的格式：

```
Thu, 13 Nov 2012 22:00:00 GMT 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-09-22T14:14:59.560

这对我有帮助：

```
{% load i18n %}

{% language 'en' %}
  {{ item.date|date:'D, d N H:i:s e' }}
{% endlanguage %} 
```

有关更多详细信息，请参阅 Django 在线[文档](https://docs.djangoproject.com/en/dev/topics/i18n/translation/#switching-language-in-templates)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T22:45:34.143

在我使用 lang 'en' 并加载模板的那个视图中，这对我有帮助：

```
from django.conf import settings

settings.LANGUAGE_CODE = 'en'
settings.USE_L10N = False
settings.USE_I18N = False 
```

# sql - 分层数据修改闭合表的风险和收益

> ID：13369501
> 
> 赞同：2
> 
> 时间：2012-11-13T21:55:05.647
> 
> 标签：sql, hierarchy

我正在尝试在 SQL 中存储分层数据并已决定使用

*   一个对象表，所有主要数据都将在其中
*   和一个闭包表，定义对象之间的关系（[在此处阅读更多关于闭包表的信息 [幻灯片 40 到 68]](http://www.slideshare.net/billkarwin/models-for-hierarchical-data)）。

经过相当多的研究，封闭表似乎很适合我的需求。然而，我一直在阅读的一件事是，如果您想查询特定节点的直接祖先/后代 - 那么您可以使用`depth`闭包表中的列（参见上面链接中的幻灯片 68）。我需要这个`depth`专栏来促进这种确切类型的查询。这一切都很好，但首先关闭表的主要吸引力之一是人们可以轻松查询和修改其中包含的数据。添加一*列*`depth`似乎完全破坏了关闭表的易用性可以修改数据（想象添加一个新节点并偏移树的整个分支）。

所以-我正在考虑修改我的闭包表以***仅定义节点与其直接祖先/后代之间的***关系。这使我仍然可以轻松地遍历树。查询数据似乎相对容易。修改数据不像原始的没有`depth`字段的闭包表那么容易，但比有`depth`字段的要容易得多。这似乎是一个公平的妥协（几乎在闭包表​​和邻接表之间）。

我是否忽略了什么？通过这种方式，我是否失去了闭包表的主要优势之一？有没有人看到这样做的任何内在风险可能会在以后困扰我？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-03T20:18:08.157

我相信你失去的关键优势是，如果你想知道一个节点的所有后代或祖先，你现在必须做更多的遍历。

例如，如果您从以下简单树开始：A->B->C->D

要获得 A 的所有后代，您必须先 A->B 然后 B->C 然后 C->D。因此，三个查询，而不是遵循正常模式的单个查询。

# php - 为什么 pow 函数返回 NAN？

> ID：13369502
> 
> 赞同：-1
> 
> 时间：2012-11-13T21:55:10.053
> 
> 标签：php, math

使用以下函数时，有时会`NAN`返回一些输入；我想当我`NAN`对变量使用负值时我会得到。我怎样才能解决这个问题？

```
pow(($LY/$FY),(1/10)) - 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T21:57:12.690

事先添加检查以确保这`$LY/$FY`是肯定的。或者，根据您使用它的目的，使用该`abs()`分数上的函数将负数更改为正数。

# jquery - 无法在 Chrome 中使用 jQuery 和 Spring MVC 通过 CORS POST 请求发送 JSON 数据

> ID：13369505
> 
> 赞同：3
> 
> 时间：2012-11-13T21:55:26.383
> 
> 标签：jquery, spring, google-chrome, servlets, spring-mvc

这是一个相当古老的问题，但是在尝试了我学到的所有东西之后，在尝试通过 CORS POST 请求发送 JSON 数据数小时后，我仍然无法使其正常运行。带有参数的 GET 和 POST 运行良好，但 POST 数据似乎难以捉摸。

您不会在此处的代码中看到它，但是为所有 servlet 设置了 CORS 过滤器映射。我认为这不是我无法从 ajax 请求中访问控制器方法的原因。

### 环境：

*   jQuery：1.8.2
*   铬：版本 23.0.1271.64 m
*   Spring MVC 3.0.5.RELEASE

我尝试使用 httprequest 软件，所以我知道如果我可以将以下请求发送到服务器，它会正常工作。但是我不能使用默认的 Content-type 发送请求，所以我从来没有在飞行前发送真正的请求

### 从服务器获得正确响应所需的请求：

```
POST http://localhost:8068/web-app/app/api/post-json-obj
Content-Type: application/json
{"description": "hello", "title": "JohnDoe", "identifier":"testResponse"} 
```

### 代码：

```
<html>
<head>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>

<script type="application/javascript">   
//Required Request Info:
//POST http://localhost:8068/web-app/app/api/post-json-obj
//Content-Type: application/json
//{"description": "hello", "title": "JohnDoe", "identifier":"testResponse"}

(function($) {
var url = 'http://localhost:8068/web-app/app/api/post-json-obj';
var data = {"description": "hello", "title": "JohnDoe", "identifier":"testResponse"};
$.ajax({
type: 'POST',
url: url,
data: JSON.stringify(data),
contentType:"application/json",
success: function(response) {
alert("success");
},
error: function(xhr) {
alert('Error!  Status = ' + xhr.status + " Message = " + xhr.statusText);
}
});
})(jQuery);
</script>
</head>
<body>

</body>
</html> 
```

### 服务器端：

```
 @RequestMapping(value="/post-json-obj", method = RequestMethod.POST, consumes = {"application/json"})
      public @ResponseBody ResponseEntity<WebResponse> postJSONObject(@RequestBody Item item) {
          WebResponse res = new WebResponse();
          res.setMessage("success");    
  return new ResponseEntity<WebResponse>(res, HttpStatus.ACCEPTED);
  } 
```

飞行前：

### 要求

```
OPTIONS /web-app/app/api/post-json-obj HTTP/1.1
Host: localhost:8068
User-Agent: Mozilla/5.0 (Windows NT 5.1; rv:16.0) Gecko/20100101 Firefox/16.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-US,en;q=0.5
Accept-Encoding: gzip, deflate
DNT: 1
Connection: keep-alive
Origin: http://localhost
Access-Control-Request-Method: POST
Access-Control-Request-Headers: content-type
Pragma: no-cache
Cache-Control: no-cache 
```

### 回复

```
 HTTP/1.1 200 OK
  Server: Apache-Coyote/1.1
  Access-Control-Allow-Origin: *
  Access-Control-Allow-Methods: GET, POST, PUT, DELETE
  Access-Control-Allow-Headers: Content-Type
  Access-Control-Max-Age: 1800
  Allow: GET, HEAD, POST, PUT, DELETE, TRACE, OPTIONS
  Content-Length: 0
  Date: Wed, 14 Nov 2012 20:27:37 GMT 
```

### 真实要求

### 要求：

```
 POST http://localhost:8068/web-app/app/api/post-json-obj HTTP/1.1 
```

请求负载：{"name":"hello","message":"JohnDoe"}

### 回复：

没有反应

# android - Android 4.2 SDK 库不包含所有属性和样式

> ID：13369511
> 
> 赞同：1
> 
> 时间：2012-11-13T21:55:45.733
> 
> 标签：android, android-library

我在我的应用程序中使用 ActionBarSherlock，并在我的应用程序中引用了它的一些样式和属性，以执行诸如重用标准 android 主题之类的操作。

更新到 4.2 SDK 和最新工具 (v21) 后，当我尝试使用这些属性时，我从 ant 收到编译错误，大概是因为这个变化：

> 更新了构建以仅使用库所需的 ID 为库项目生成 R 资源类，从而降低了字段和方法达到 DEX 文件限制的风险。 [http://developer.android.com/tools/sdk/tools-notes.html](http://developer.android.com/tools/sdk/tools-notes.html)

我认为，因为 ABS 本身不引用我正在使用的属性和样式，它们不再与库一起打包，因此它们不存在供我的“主要”项目使用。

IntelliJ IDEA 编译一切都很好 - 但我认为这是因为它还不了解新工具。当然，这并没有太大帮助，因为我的正常进程使用 IDEA 运行的 ant 脚本。

# objective-c - NextPageToken 和文件列表查询

> ID：13369512
> 
> 赞同：2
> 
> 时间：2012-11-13T21:55:57.497
> 
> 标签：objective-c, google-drive-api, google-api-objc-client

我正在使用 GoogleDrive Objective-C SDK，但遇到了问题。我想建立一个路径-> ID 映射结构，所以我向 Drive 询问所有用户文件的列表。通常这工作正常。但是，在用户拥有大量文件的情况下，服务器会返回内部错误。我可以通过将 GTLQueryDrive 上的 maxResults 属性设置为较小的数字来解决此问题。当我这样做时，一切都按预期工作，除了 GTLDriveFileList 的 nextPageToken（和 nextLink）属性为零。我相信我需要这个 nextPageToken 来继续抓取文件信息。我尝试将查询中的 fields 属性设置为 nil，设置为包含 nextPageToken 的字符串，以及不包含 nextPageToken 的字符串。在所有情况下，nextPageToken 属性似乎都是 nil。有什么我想念的吗？谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-15T19:03:44.870

根据评论链添加答案。

这里有一个小示例，您可以尝试一下。

```
driveService.shouldFetchNextPages = YES;

GTLQueryDrive *query = [GTLQueryDrive queryForFilesList];
query.maxResults = 5;
// queryTicket can be used to track the status of the request.
[driveService executeQuery:query
    completionHandler:^(GTLServiceTicket *ticket, GTLDriveFileList *files,
                        NSError *error) {
        if (files) {
            NSLog(@"Have response %@", files.items);
            NSLog(@"Token %@", files.nextPageToken);
            NSLog(@"Count %d", files.items.count);
        }
    }]; 
```

将 shouldFetchNextPages 设置为 YES，结果将不包含 nextPageToken。相反，假设您有超过 5 个文件（基于 maxResults），您仍然会获得完整列表，以及日志文件中的一条消息，看起来类似于：

```
Executing drive.files.list required fetching 4 pages; use a query with a larger maxResults for faster results 
```

如果将 shouldFetchNextPages 设置为 NO，在这种情况下，结果将被限制为 5 个结果，并且 nextPageToken 将具有用于获取结果集中的下一页的有效令牌。

# vba - 根据先前的 Combobox1 选择填充 Combobox2

> ID：13369514
> 
> 赞同：0
> 
> 时间：2012-11-13T21:56:05.390
> 
> 标签：vba, excel

我有两个组合框。第一个组合框有三个项目：{One, Tow, Three} 现在我想根据用户在 combobox1 中选择的内容加载第二个组合框。例如，如果用户在 from combobox1 中选择一个，则 namebox1 将填充到combox2，如果用户在 from combobox2 中选择两个，则 namebox2 将填充到combox2 等等。请告诉我如何在 VBA 中执行此操作?

谢谢

这是更新代码：

```
 Private Sub ComboBox1_Change()
     Me.ComboBox2.Clear
     Select Case Me.ComboBox1.Value
       Case "One"
        With Me.ComboBox2
            .RowSource = "nameBox1"
        End With
       Case "Two"
        With Me.ComboBox2
            .RowSource = "nameBox1"
        End With
       Case "Three"
        With Me.ComboBox2
             .RowSource = "nameBox1"
        End With
     End Select
    End Sub 
```

请注意，我没有使用 .addItem 来填充 ComboBox1。它已通过相同的方法 .RowSource 填充，这是使用 excel 集合选择框

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:35:18.020

最简单的方法是使用`Select Case`语句。假设你有

```
Private Sub ComboBox1_Change()

Me.ComboBox2.Clear

Select Case Me.ComboBox1.Value
    Case "One"
        ' If your data was information you wanted to put in yourself:
        With Me.ComboBox2
            .AddItem "Adam"
            .AddItem "Allen"
            .AddItem "Andy"
        End With
    Case "Two"
        ' If your data existed in a worksheet range
        ComboBox2.RowSource = MyRange.Address            
        End With
    End Select

End Sub 
```

我希望这足以让您继续前进-否则，我有点困惑-您能解释一下您`NameBox`在问题中的意思吗

# java - 什么是“for(;;)”循环用于？

> ID：13369515
> 
> 赞同：4
> 
> 时间：2012-11-13T21:56:10.467
> 
> 标签：java, syntax, for-loop

> **可能重复：**
> [无限循环应用程序 - for(;;)](https://stackoverflow.com/questions/11923128/infinite-loop-application-for)

我是一名 Java 开发人员，我在其中一个课程中看到了这一点：

```
for(;;){
something goes here
} 
```

这个循环是什么意思？我们什么时候必须使用它？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-13T21:59:23.067

这是一个无限循环，相当于这个可能是

`while(true)`这肯定比无限 for 循环使用得更多。

但在这种情况下，它们的含义相同。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T21:59:29.167

这是一个无限循环。类似于`while(true) { ... }`或`do { ... } while(true);`。您可能会使用它的一个原因是，如果在`something goes here`零件中，您有`break;`一个复杂的条件。

对于简单的中断条件，将它们放在循环语句中会更容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T21:59:56.263

这是一样的

```
while(true) 
```

然而，它的使用较少，一般应避免使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-13T22:04:41.213

这是一个无限循环，相当于更具可读性`while(true)`。

这样的循环不经常使用，它通常表示只要应用程序运行就应该继续运行的操作。例如：

*   服务器线程接受连接

*   清理进程休眠了一段时间

*   暂停读取无限输入

摆脱这种循环的唯一方法是：

*   `break`

*   抛出异常

*   中断一个线程（相当于抛出一个`InterruptedException`内部循环）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-13T22:04:08.340

这是一个无限循环。这个想法是中断条件在循环内

```
int i=0;
for(;;)
{
    i++;
    if (i>10) break;
} 
```

# authentication - 当 2-legged 运行良好时，为什么还有 3-legged OAuth2？

> ID：13369516
> 
> 赞同：27
> 
> 时间：2012-11-13T21:56:10.970
> 
> 标签：authentication, oauth, oauth-2.0

2-legged OAuth2 用于基于浏览器的应用程序，其中不能向公众隐藏任何客户端凭据。3-legged OAuth2 由“Web 服务器应用程序”使用，其中服务器之间有第三次调用。[一切都在这里描述得很好](http://aaronparecki.com/articles/2012/07/29/1/oauth2-simplified)。

问题：**当 2 条腿似乎没问题时，为什么还要为 3 条腿而烦恼？**

对于提供者和客户来说，这都是更多的工作。为什么其中一位大玩家不采取行动并移除三腿？

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-14T17:33:48.110

三足并不意味着某种类型的应用程序，如“基于浏览器”。三足意味着应用程序直接代表用户进行操作。在三足场景中有

1.  应用程序（消费者），
2.  用户（资源所有者）和
3.  API（服务提供者）。

在两条腿的场景中，没有用户的概念。通常，这与应用程序到应用程序的解决方案有关。在那里，应用程序（消费者）代表自己行事。所以在两条腿的 OAuth 中，有：

1.  应用程序（消费者），
2.  API（服务提供者）

区别只是在 2-legged 方法中不需要用户授权步骤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T14:42:33.727

存在两条腿的情况。例如，查看有关[Google Apps 域范围内授权](https://developers.google.com/drive/delegation)的文档。当然，它们只能由帐户的超级所有者在受信任的环境中使用 - 在我上面提到的示例中：Google Apps 域管理员是他所管理域的所有用户帐户的超级所有者。

3 Legged 当然必须在开放的网络环境中使用。您确实需要资源所有者的批准才能将对其数据的访问权限授予第三方应用程序。

# javascript - 将python环境变量写入javascript文件

> ID：13369518
> 
> 赞同：0
> 
> 时间：2012-11-13T21:56:11.547
> 
> 标签：javascript, python, heroku, stripe-payments

我在 Python 代码库中使用[Heroku](http://heroku.com)和[Stripe 。](http://stripe.com)

文件中存储了不同的 api 密钥，`.env`而不是直接存储在 javascript 文件中。然而我`stripe.js`需要这些钥匙。

我可以在 python 中访问密钥，但我的目标是输出一个包含此环境变量的 javascript 常量文件，以便不同的部署可以使用不同版本的 API 密钥。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:04:20.260

您可以使用以下方式访问环境变量：

```
import os
os.environ['THE_ENVIRONMENT_VARIABLE_NAME'] 
```

关于您的特定用例，您可以：

*   专用一个 URL 来分发密钥并让客户端点击该 URL 来检索它（执行一次）。
*   在浏览器可用的其他地方声明变量（例如，您的基本 HTML 模板）。
*   在 URL 上即时生成完整的 JS 文件（使用模板实际编写 JS 并将密钥注入其中）

# javascript - 从浏览器应用程序发布数据而无需编写我自己的服务器

> ID：13369521
> 
> 赞同：7
> 
> 时间：2012-11-13T21:56:18.173
> 
> 标签：javascript, web-services, single-page-application

我需要用户能够从单页浏览器应用程序 (SPA) 向我发布数据，但我不能将服务器端代码放在主机上。

有没有我可以使用的网络服务？我查看了[Amazon SQS （简单队列服务），但](http://aws.amazon.com/sqs/)[由于跨源策略](https://stackoverflow.com/questions/8393845/possible-to-send-request-directly-to-amazon-sqs-from-http-javascript-client)，我无法从浏览器中调用他们的 REST API 。

我现在更喜欢易于开发而不是健壮性，所以即使只是收到一封电子邮件也可以。我不确定该网站是否会流行起来。如果是这样，那么我将开发一个服务器端组件并移动主机。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-26T04:53:49.363

不仅有 Web 服务，而且现在有一些健壮的系统提供了一种方法，可以在服务器端对应用程序的某些逻辑进行处理。它们被称为 BaaS 或[后端即服务](http://en.wikipedia.org/wiki/Backend_as_a_service)提供商，通常为您的前端应用程序提供一些主干。

虽然它们有多种用途，但我将列出我认为最常见的：

*   **对于移动应用程序**- 您可以使用标准平台来存储应用程序的逻辑和数据，而不必为您编写代码的每个设备学习 API。

*   **对于原型设计**——如果你想创建一个漂亮的应用程序，但你不想为数据编写所有后端逻辑 - 更少处理代表的所有操作和系统管理 - 通过 BaaS 提供商你只需要好的前端编写您能想象到的最简单的 CRUD 应用程序的最终技能。一些 BaaS 甚至允许你绑定一些[Reduce 算法](http://en.wikipedia.org/wiki/MapReduce)来调用你的执行到他们的 API。

*   **对于 Web 应用程序**- 当 PaaS（[平台即服务](http://en.wikipedia.org/wiki/Platform_as_a_service)）来到镇上以减轻后端开发人员的工作以避免系统管理和操作的麻烦时，后端也会发生同样的逻辑。有许多[克隆](http://firefeed.io/)展示了这种策略的真正威力。

所有这一切都令人惊叹，但我还没有提及其中任何一个。我将列出我最了解并在项目中实际使用过的那些。可能有很多，但据我所知，这一个已经满足了我的大部分新闻，无论是前面提到的任何一个。

## [Parse.com](https://parse.com/)

Parse 最突出的功能针对移动设备；然而，如今 Parse 包含大量的 API，允许您将其用作 Javascript、Android 甚至 Windows 8 应用程序的全功能后端服务（Windows 8 SDK 在今年几个月前推出）[。](http://blog.parse.com/2012/10/25/introducing-the-parse-windows-8-sdk/)

*Parse 代码在 Javascript 中的外观如何？*

Parse 通过类和对象工作（不是很漂亮吗？），因此您首先创建一个特定的类（可以通过 Javascript、REST 甚至数据浏览器管理器完成），然后将对象添加到特定的类。

首先，将 Parse 添加为 javascript 中的脚本标记：

```
<script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.1.15.min.js"></script> 
```

然后，通过给定的 Application ID 和 Javascript Key，初始化 Parse。

```
Parse.initialize("APPLICATION_ID", "JAVASCRIPT_KEY"); 
```

从那里开始，一切都是对象操作

```
var Person = Parse.Object.extend("Person"); //Person is a class  *cof* uppercase *cof* 
var personObject = new Person();
  personObject.save({name: "John"}, {
  success: function(object) {
    console.log("The object with the data "+ JSON.stringify(object) + " was saved successfully.");
  },
  error: function(model, error) {
    console.log("There was an error! The following model and error object were provided by the Server");
    console.log(model);
    console.log(error);
  }
}); 
```

*身份验证和安全性如何？*

Parse 有一个基于用户的身份验证系统，它几乎允许您存储可以操作数据的用户群。如果将数据与用户信息进行映射，则可以确保只有给定用户才能操作特定数据。另外，在 Parse 应用程序的设置中，您可以指定不允许客户端创建类，以确保执行不必要的调用。

*您真的在 Web 应用程序中使用过吗？*

是的，它是我选择中等保真[原型](http://jjperezaguinaga.github.com/UBC-CoursesWorklist/)的工具。

## [Firebase.com](https://www.firebase.com/)

Firebase 的主要功能是能够轻松地为您的应用程序提供实时。您不需要[MeteorJS](http://meteor.com/)服务器即可将推送通知带到您的软件。如果您了解 Javascript，那么您就已经为您的用户带来了实时魔法。

*Firebase 在 Javascript 中的外观如何？*

[Firebase 以 REST 方式工作，我认为他们在构建REST 的荣耀方面](http://martinfowler.com/articles/richardsonMaturityModel.html)做得非常出色。作为一个很好的示例，请查看 Firebase 中的以下资源结构：

```
https://SampleChat.firebaseIO-demo.com/users/fred/name/first 
```

你不需要成为火箭科学家就知道你正在检索用户“Fred”的名字，至少有一个 - 通常应该有一个 UUID 而不是名字，但是嘿，这是一个例子，让我休息一下-。

为了开始使用 Firebase，就像 Parse 一样，添加他们的 CDN Javascript

```
<script type='text/javascript' src='https://cdn.firebase.com/v0/firebase.js'></script> 
```

现在，创建一个允许您使用 Firebase API 的引用对象

```
var myRootRef = new Firebase('https://myprojectname.firebaseIO-demo.com/'); 
```

从那里，您可以创建一堆整洁的应用程序。

```
var USERS_LOCATION = 'https://SampleChat.firebaseIO-demo.com/users';
var userId = "Fred"; // Username

var usersRef = new Firebase(USERS_LOCATION);
  usersRef.child(userId).once('value', function(snapshot) {
    var exists = (snapshot.val() !== null);
    if (exists) {
        console.log("Username "+userId+" is part of our database");
    } else {
        console.log("We have no register of the username "+userId);
    }
  }); 
```

*身份验证和安全性如何？*

你很幸运！Firebase大约两周前[发布了他们的安全 API ！](http://blog.firebase.com/post/38234264120/the-new-firebase-security-api)我还没有探索它，但我确信它填补了大部分空白，允许随机的人使用你的参考来达到他们自己的目的。

*您真的在 Web 应用程序中使用过吗？*

嗯……好吧，不。我在[Chrome 扩展程序](https://github.com/jjperezaguinaga/AIESEC-Chrome-Extension)中使用了它！它仍在进行中，但它将成为 Chrome 扩展程序中的实时聊天。那不是很酷吗？美好的。我觉得很酷。[无论如何，您可以在他们的示例页面](https://www.firebase.com/examples.html)中浏览更多精彩的 Firebase示例。

* * *

这些服务有什么魔力？如果您阅读了[Dependency Injection](http://en.wikipedia.org/wiki/Dependency_injection) and [Mock Object Testing](http://en.wikipedia.org/wiki/Mock_object)，在某些时候您可以通过 REST Web 服务提供者完全替换所有这些服务为您自己的。

由于这些服务是为在任何应用程序中使用而创建的，因此它们已准备好 CORS。如前所述，我已经成功地从多个域中使用了它们，没有任何问题（我什至尝试在 Chrome 扩展中使用 Firebase，我相信我很快就会成功）。

Parse 和 Firebase 都有数据浏览器管理器，这意味着您可以通过简单的 Web 浏览器查看正在处理的数据。作为最后的免责声明，除了[James Taplin](https://twitter.com/JamesTamplin)（Firebase 联合创始人）出色到可以借给我一些 Firebase Beta 访问权限之外，我与任何这些服务都没有任何关系。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-30T12:52:22.573

你实际上可以从浏览器使用 SQS，即使没有 CORS，只要你只需要浏览器发送消息，而不是接收它们。*警告：这是一个会让我的 CS 教授哭泣的组合。*

当您通过 javascript 执行 GET 请求时，浏览器将始终执行请求，但是，如果响应来自同一来源（协议、主机、端口），您将只能访问该响应。这是你的车票，因为消息可以通过 GET 发布到 SQS 队列，而且谁真正关心响应呢？

假设您使用的是 jquery，您的队列是`https://sqs.us-east-1.amazonaws.com/71717171/myqueue`，并且允许任何人发布消息，以下将向队列发布一条正文为“HITHERE”的消息：

```
$.ajax({
  url: 'https://sqs.us-east-1.amazonaws.com/71717171/myqueue' +
       '?Action=SendMessage' +
       '&Version=2012-11-05' +
       '&MessageBody=HITHERE'
}) 
```

控制台中会出现一个错误，提示请求失败，但无论如何消息都会显示在队列中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T22:02:25.993

你考虑过[JSONP](http://en.wikipedia.org/wiki/JSONP)吗？这是从 javascript 调用跨域脚本而不会遇到同源策略的一种方法。不过，您将*不得不*在某处设置一些脚本来向您发送数据。Javascript 不能胜任这项任务。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T13:31:39.900

根据您要发送的数据类型以及您将要使用的数据，解决此问题的一种方法是使用 Ajax 将数据发布到 Google 电子表格。不过实现起来有点棘手。[这](https://stackoverflow.com/questions/10000020/ajax-post-to-google-spreadsheet)是关于它的另一个stackoverflow问题。

如果演示文稿不是那么重要，您可以只嵌入一个[Google 电子表格表单](http://support.google.com/drive/bin/answer.py?hl=en&answer=87809)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-24T11:15:39.760

怎么样`mailto:youremail@goeshere.com`？希希

同时，您可以打开一些免费主机，例如`Altervista`或`Heroku`类似它们的其他东西..这样您就可以连接到他们的服务器，如果我记得这些免费服务允许的话`servers p2p`，那么`you can create a sort of personal web services and push ajax requests as well`，显然他们的服务器对于免费帐户来说很慢，但我认为这已经足够了如果您没有那么多用户流量，那么您应该打开一些更好的 VPS 或托管或云解决方案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-24T11:50:53.753

也许 CouchDB 可以提供您所追求的。[IrisCouch](http://iriscouch.com/)提供免费的 CouchDB 实例。将其锁定，以便用户无法查看文档并具有合理的验证功能，并且您拥有一个简单的 RESTful 位置来存储您的数据。

# css - Wordpress 中的 CSS 加号（+）选择器

> ID：13369527
> 
> 赞同：0
> 
> 时间：2012-11-13T21:56:51.530
> 
> 标签：css

我正在尝试在我的 Wordpress 网站中添加一个 dropcap，到 H1 之后第一段的第一个字母。我正在使用如下选择器：

```
h1 + p:first-letter {
font-family:Almendra;
font-size:300%;
etc...
} 
```

没有选择任何内容。如果我删除 h1 +，则选择每个段落的第一个字母。

我的页面在这里：[http ://www.thelionscall.com/2012/10/19/forum-testing/](http://www.thelionscall.com/2012/10/19/forum-testing/)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T21:59:17.673

元素相距太远。需要将它们放在同一个父级中，或者使用它们的容器......这可能会让你更接近：

```
header h1 + div.entry-meta p:first-letter {
    font-size: 300%;
    /* etc... */
} 
```

# asp.net - 带有单选按钮的 asp.net 自定义验证器

> ID：13369528
> 
> 赞同：0
> 
> 时间：2012-11-13T21:56:52.060
> 
> 标签：asp.net

```
 using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication3
{
    public partial class WebForm1 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

            if (IsPostBack)
                CustomValidator1.Validate();
        }

        protected void CustomValidator1_ServerValidate(object source, ServerValidateEventArgs args)
        {
            if (RadioButton1.Checked == false && RadioButton2.Checked == false)
                args.IsValid = false;
            else
                args.IsValid = true;

        }

    }
} 
```

这是我用来编写服务器端自定义验证器的代码。我无法理解这是如何工作的，因为如果我将它从 IsPostBack“if”中取出，它会在我启动页面时显示在摘要中，但是当我单击按钮时它不起作用。有谁知道可能出了什么问题？

同样作为一些侧面信息，就这种类型的验证而言，服务器端验证和客户端验证之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:58:51.043

服务器端和客户端验证之间的最大区别（除了显而易见的）是客户端验证甚至可以阻止您提交页面。服务器端验证仅在页面提交后发生。

混合它们可以产生这样一种情况，即您，用户，已经填写了所有字段，使所有内容都具有正确的长度和值，然后点击提交——然后当页面返回时，会有更多的验证消息！

# php - 完整的 URL 不适用于 php 包括

> ID：13369529
> 
> 赞同：3
> 
> 时间：2012-11-13T21:56:56.463
> 
> 标签：php, php-include

所以，我试图插入一个包含 php 的文件，但由于某种原因，它不适用于完整的 URL。

这有效：

`<?php include 'menu.html' ?>`

但这不会：

`<?php include 'http://domainname.com/menu.html' ?>`

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T21:59:53.583

`include`旨在包含和评估指定的 PHP 文件。如果你在本地获取它，它可以像 PHP 一样被处理——如果你通过一个完整的 URL 获取它，你将得到生成的 HTML（理论上......你可能只会得到一个错误）。

[支持文件](http://php.net/manual/en/function.include.php)

```
include 'menu.php' //Internally process a PHP file to generate HTML 
```

或者

```
file_get_contents('http://domainname.com/menu.php'); //Fetch resutling HTML 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-13T22:01:30.100

检查 php.ini -

[allow_url_include](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-include)

但我不得不说，如果你没有非常好的理由，请不要使用它。这是最严重的 php 弱点之一，严重的安全威胁。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-13T21:59:03.667

您是否`php.ini`允许您使用远程文件`include`？

如果它在您自己的域上，那么要求绝对 URL 是没有意义的，因为这会导致服务器打开与自身的连接以通过 HTTP 检索文件，而直接文件操作会简单得多。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-28T12:25:15.483

不要使用绝对网址。相反，请尝试从根目录链接。像这样：

```
$path = $_SERVER['DOCUMENT_ROOT']."/layer1/layer2/layer3/";
include($path."file.php"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-13T22:04:22.900

包含标记旨在用于引用其他 PHP 脚本文件。如果它不是您要处理的脚本，您可能需要考虑使用：

```
$FileContents = file_get_contents("http://www.domainname.com/menu.html"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-13T22:00:50.303

听起来像`allow_url_fopen`或`allow_url_include`两者都被设置为 0（禁用）`php.ini`。

但是， HTML 不应该`include`在 PHP 脚本中。其他答案似乎也解决了这个问题。

# php - 包含在函数中时，PHP 代码无法生成正确的 json 响应

> ID：13369537
> 
> 赞同：1
> 
> 时间：2012-11-13T21:57:28.393
> 
> 标签：php, wordpress, function, variables, scope

这段代码工作正常。我能够获得写入缓存文件的填充 JSON 页面：

```
$test_tag = "afro";

$page = 1;
$images = array();
$tags = array();
$imagetype = 'Recent Cuts';
$per_page = 60;
$orderby_view = FALSE;

$tags2 = $test_tag;
$tags = explode(',', $test_tag);
if( count($tags) == 1 && strlen($tags[0]) == 0 ) $tags = array();
$tag_url = urlencode($tags2);

$cachename = dirname( __FILE__ ) . '/cache-fp/' . $imagetype . '-' . $per_page . '-' . $page . '-' . ($orderby_view ? 'by_view' : 'by_date') . $tag_url . '.json';

    $detailurl = get_option('image_detail_url');
    $detailurl .= (strstr($detailurl, '?') === FALSE ? '?' : '&');
    $json = array();
    $images = array();
    $posts = get_pix($imagetype, array('per_page' => $per_page, 'page' => $page, 'tags' => $tags), $orderby_view);

    foreach( $posts['attachments'] as $ii => $post ) {
        $ta = array();
        $meta = array();
        $imagesrclight2 = array();
        // BWP - Theater mode
        $ta['detail_url'] = $detailurl . 'uid=' . $post->post_author . '&img_id=' . $post->ID . '&theater';

        $meta = get_post_meta(get_the_ID(), 'image_tag', false);
        $ta['image_tags'] = implode(' ', $meta);

        $ta['attachment_image'] = wp_get_attachment_image($image->ID, 'thumbnail'); 
        $imagesrclight2 = wp_get_attachment_image_src($image->ID, array(150, 150)); 
        $ta['attachment_image_src'] = rawurlencode($imagesrclight2[0]);

        $images[] = $ta;
    }

    file_put_contents($cachename, json_encode($images)); 
```

但是当我将此代码包含在一个函数中时，JSON 响应会像以前一样写入文件，但它只是一个没有数据的空骨架。我所做的就是将上面的代码包含在一个新函数中，传入顶部`$test_tag`变量并执行该函数。我还添加了一个`echo()`验证传入的验证。由于某种原因，即使 $test_tag 在两个测试中相同，`$test_tag`似乎`get_pix()`和/或函数也无法获取数据。`get_option()`

```
$test_tag = "afro";
newFunction($test_tag);

function newFunction($test_tag) {

$page = 1;
$images = array();
$tags = array();
$imagetype = 'Recent Cuts';
$per_page = 60;
$orderby_view = FALSE;

echo $test_tag; //this works, so var is passed in properly

$tags2 = $test_tag;
$tags = explode(',', $test_tag);
if( count($tags) == 1 && strlen($tags[0]) == 0 ) $tags = array();
$tag_url = urlencode($tags2);

$cachename = dirname( __FILE__ ) . '/cache-fp/' . $imagetype . '-' . $per_page . '-' . $page . '-' . ($orderby_view ? 'by_view' : 'by_date') . $tag_url . '.json';

    $detailurl = get_option('image_detail_url');
    $detailurl .= (strstr($detailurl, '?') === FALSE ? '?' : '&');
    $json = array();
    $images = array();
    $posts = get_pix($imagetype, array('per_page' => $per_page, 'page' => $page, 'tags' => $tags), $orderby_view);

    foreach( $posts['attachments'] as $ii => $post ) {
        $ta = array();
        $meta = array();
        $imagesrclight2 = array();
        // BWP - Theater mode
        $ta['detail_url'] = $detailurl . 'uid=' . $post->post_author . '&img_id=' . $post->ID . '&theater';

        $meta = get_post_meta(get_the_ID(), 'image_tag', false);
        $ta['image_tags'] = implode(' ', $meta);

        $ta['attachment_image'] = wp_get_attachment_image($image->ID, 'thumbnail'); 
        $imagesrclight2 = wp_get_attachment_image_src($image->ID, array(150, 150)); 
        $ta['attachment_image_src'] = rawurlencode($imagesrclight2[0]);

        $images[] = $ta;
    }

    file_put_contents($cachename, json_encode($images));
} 
```

我真的希望我错过了一些简单的东西。我只能怀疑 inside `newFunction()`,`$test_tag`以某种方式被不同地对待，即使 echo() 证明它具有相同的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:10:01.713

我想到了。wordpress 函数 get_the_ID() 在函数内部不起作用，返回空值。相反，我使用了 $post->ID，它是相同的，并且有效。我不喜欢 Wordpress。

# c++ - Ofstream 未正确创建新文件

> ID：13369541
> 
> 赞同：0
> 
> 时间：2012-11-13T21:57:57.657
> 
> 标签：c++, visual-studio-2012, creation, ofstream

我试图编写一个简单的数据库程序。问题是 ofstream 不想创建一个新文件。

这是违规代码的摘录。

```
void newd()
{
string name, extension, location, fname;
cout << "Input the filename for the new database (no extension, and no backslashes)." << endl << "> ";
getline(cin, name);
cout << endl << "The extension (no dot). If no extension is added, the default is .cla ." << endl << "> ";
getline(cin, extension);
cout << endl << "The full directory (double backslashes). Enter q to quit." << endl << "Also, just fyi, this will overwrite any files that are already there." << endl << "> ";
getline(cin, location);
cout << endl;
if (extension == "")
{
    extension = "cla";
}
if (location == "q")
{
}
else
{
    fname = location + name + "." + extension;
    cout << fname << endl;
    ofstream writeDB(fname);
    int n = 1; //setting a throwaway inteher
    string tmpField, tmpEntry; //temp variable for newest field, entry
    for(;;)
    {
        cout << "Input the name of the " << n << "th field. If you don't want any more, press enter." << endl;
        getline(cin, tmpField);
        if (tmpField == "")
        {
            break; 
        }
        n++;
        writeDB << tmpField << ": |";
        int j = 1; //another one
        for (;;)
        {
            cout << "Enter the name of the " << j++ << "th entry for " << tmpField << "." << endl << "If you don't want any more, press enter." << endl;
            getline(cin, tmpEntry);
            if (tmpEntry == "")
            {
                break;
            }
            writeDB << " " << tmpEntry << " |";
        }
        writeDB << "¬";
    }
    cout << "Finished writing database. If you want to edit it, open it." << endl;
}
} 
```

编辑：好的，刚试过

```
#include <fstream>
using namespace std;
int main()
{
ofstream writeDB ("C:\\test.cla");
writeDB << "test";
writeDB.close();
return 0;
} 
```

这没有用，所以是访问权限问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:03:57.847

```
ofstream writeDB(fname); //-> replace fname with fname.c_str() 
```

如果您查找 ofstream 构造函数的文档，您会看到类似：explicit ofstream ( const char * filename, ios_base::openmode mode = ios_base::out );

第二个参数是可选的，但第一个是 const char*，而不是字符串。要解决这个问题，最简单的方法是将字符串转换为 C 字符串（char*，基本上是一个字符数组）；为此，只需使用 c_str() （它是库的一部分）。

除此之外，您可以直接将信息放在 C-str 上，然后将其正常传递给 ofstream 构造函数。

# ruby-on-rails - rspec 测试失败 - 未创建对象

> ID：13369543
> 
> 赞同：0
> 
> 时间：2012-11-13T21:58:06.327
> 
> 标签：ruby-on-rails, rspec

我有以下测试代码：

```
require 'spec_helper'
require 'matchers/be_valid_verbose'

describe User do

before do 
    @user = User.new(first_name: "First", last_name: "Last", email: "test@test.com", role: "admin",
                    password: "foobar12", password_confirmation: "foobar12")
end
subject ( @user )

specify { should be_valid_verbose }

describe "return value of authendicate method" do
    before { @user.save }
    let(:found_user) { User.find_by_email(@user.email) }

    describe "with valid password" do
        it { should == found_user.authenticate(@user.password) }
    end

        describe "with invalid password" do
            let(:user_for_invalid_password) { found_user.authenticate("invlaid") }

            it { should_not == user_for_invalid_password }
            specify { user_for_invalid_password.should be_false }
    end
end 
```

结尾

我不明白为什么：它 { should be_valid } 是一个完全空的用户对象。当我在 before do 语句中创建用户对象后尝试 find_by_email 时，也会发生同样的情况。这是我的测试输出

```
 $ bundle exec rspec spec/models/user_trial_spec.rb
FF..

Failures:

  1) User 
     Failure/Error: specify { should be_valid_verbose }
       expected valid? to return true, got false:
        Password digest can't be blank
        First name can't be blank
        Last name can't be blank
        Role is not included in the list
        Email can't be blank
        Email is invalid
        Password can't be blank
        Password is too short (minimum is 8 characters)
        Password confirmation can't be blank
     # ./spec/models/user_trial_spec.rb:25:in `block (2 levels) in <top (required)>'

  2) User return value of authendicate method with valid password 
     Failure/Error: it { should == found_user.authenticate(@user.password) }
       expected: #<User id: 10, first_name: "First", last_name: "Last", email: "test@test.com", role: "admin", password_digest: "$2a$10$Z0c6zJNH4yu8IpYfNqEbKOmqEWK.euTFcYuwB/8UW9jk...", created_at: "2012-11-13 21:44:55", updated_at: "2012-11-13 21:44:55", remember_token: nil>
            got: #<User id: nil, first_name: nil, last_name: nil, email: nil, role: nil, password_digest: nil, created_at: nil, updated_at: nil, remember_token: nil> (using ==)
       Diff:
       @@ -1,2 +1,2 @@
       -#<User id: 10, first_name: "First", last_name: "Last", email: "test@test.com", role: "admin", password_digest: "$2a$10$Z0c6zJNH4yu8IpYfNqEbKOmqEWK.euTFcYuwB/8UW9jk...", created_at: "2012-11-13 21:44:55", updated_at: "2012-11-13 21:44:55", remember_token: nil>
       +#<User id: nil, first_name: nil, last_name: nil, email: nil, role: nil, password_digest: nil, created_at: nil, updated_at: nil, remember_token: nil>
     # ./spec/models/user_trial_spec.rb:32:in `block (4 levels) in <top (required)>'

Finished in 2.3 seconds
4 examples, 2 failures

Failed examples:

rspec ./spec/models/user_trial_spec.rb:25 # User 
rspec ./spec/models/user_trial_spec.rb:32 # User return value of authendicate method with valid password 

Randomized with seed 39450 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:05:14.047

好的，我刚看到问题。我正在使用

```
subject ( @user ) 
```

而不是正确的

```
subject { @user } 
```

哦！

# web-services - 为 iOS（或类似）在线创建数据模型和 Web 服务的网站？

> ID：13369544
> 
> 赞同：0
> 
> 时间：2012-11-13T21:58:09.297
> 
> 标签：web-services, rest, ios5, restkit, entity-relationship-model

几个月前，我访问了一个有趣的网站。它是一个创建数据模型（在线）和 Web 服务（rest 或 soap）并部署它们的 Web，所有这些都无需编写任何服务器或 SQL。我认为在创建 iOS 应用程序时创建原型很有趣，因为其中许多只是 Web 服务消费者。问题是我忘记了网站的名称。你知道那个网站或类似的服务吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T21:33:29.513

您可能在谈论[https://parse.com/](https://parse.com/)，他们确实做得很好，迭代速度非常快。我过去使用过它们，在 Stackmob 之前我会随时使用 Parse。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T17:40:13.937

Stackmob 就是这样一种服务，它允许您轻松地在他们的服务器上创建模型。

[https://www.stackmob.com/](https://www.stackmob.com/)

# android - 动态壁纸中的 ImageView 动画

> ID：13369549
> 
> 赞同：1
> 
> 时间：2012-11-13T21:58:26.907
> 
> 标签：android, imageview, android-relativelayout, wallpaper, android-framelayout

(Android) 我正在努力将全屏模拟时钟应用程序改编为动态壁纸。该应用程序使用三个独立`ImageView`的时针、分针、秒针和`RotateAnimation`.

我一直在寻找一种在动态壁纸中使用 ImageView 的方法。[this](https://stackoverflow.com/questions/4174723/using-layout-resources-in-a-livewallpaper-on-android)和[this](https://stackoverflow.com/questions/11442577/using-a-framelayout-as-a-live-wallpaper?lq=1)表明这应该可以使用`measure()`and `layout()`，但我真的不知道如何使用它。例如，我使用下面的代码加载`clock_background.png`到`ImageView`.

```
public class MyWallpaperService extends WallpaperService {
    @Override
    public Engine onCreateEngine() {
        return new MyWallpaperEngine();
    }
    ....
    public void onCreate(SurfaceHolder surfaceHolder) {
        super.onCreate(surfaceHolder);
        mContext = getBaseContext();
        backgroundImage = new ImageView(mContext);
        backgroundImage.setImageDrawable(mContext.getResources().getDrawable(R.drawable.clock_background));
    }
} 
```

后来我有：

```
backgroundImage.measure(MeasureSpec.UNSPECIFIED, MeasureSpec.UNSPECIFIED);
backgroundImage.layout(0, 0, 150, 150); 
```

我希望上面的代码会显示`clock_background.png`在屏幕的左上角。我试图将上面的两行放在`OnSurfaceCreated`and中`OnSurfaceChanged`。不幸的是，它不起作用。据我了解，动态壁纸提供了一个 Surface（不是 SurfaceView），可以从中获取画布并在其上绘制东西。我为在 Android 上的新手而道歉：我做错了吗？我只是不想惹`drawBitmap`或喜欢，反正我也不关心电池。非常感谢任何帮助。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:09:10.513

我简短地说，是的，你做错了。使用提供的画布及其 drawX() 方法

# expressionengine - 未在 Expresso Store 中发送电子邮件模板的密件抄送

> ID：13369553
> 
> 赞同：2
> 
> 时间：2012-11-13T21:58:35.950
> 
> 标签：expressionengine, expresso-store

由于某种原因，收据电子邮件没有被密件抄送到我在电子邮件模板中输入的任何地址。我尝试了多个地址。不过，收据对客户来说很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:20:25.340

通常，当这种情况发生时，它会被垃圾邮件过滤器捕获（例如，如果“发件人地址”和“收件人地址”相同，则许多垃圾邮件过滤器会捕获邮件）。BCC 的发送方式与客户电子邮件的发送方式完全相同，因此如果客户电子邮件是通过的，则极不可能是 Store/EE 的错。

# c# - 当前上下文中不存在名称“sr”

> ID：13369555
> 
> 赞同：2
> 
> 时间：2012-11-13T21:58:37.947
> 
> 标签：c#, compiler-errors, try-catch, scope

我正在按照微软[网站上](http://msdn.microsoft.com/en-us/library/db5x7c0d.aspx)的示例从文本文件中读取。他们说这样做：

```
class Test
{
    public static void Main()
    {
        try
        {
            using (StreamReader sr = new StreamReader("TestFile.txt"));
            {
                String line = sr.ReadToEnd();
                Console.WriteLine(line);
            }
        }
        catch (Exception e)
        {
            Console.WriteLine("The file could not be read:");
            Console.WriteLine(e.Message);
        }
    }
} 
```

但是当我在 Visual C# 2010 中这样做时，它会给我带来错误：

> 可能错误的空语句
> 
> 当前上下文中不存在名称“sr”

我删除了该`using`部分，现在代码看起来像这样并且正在工作：

```
try
{
    StreamReader sr = new StreamReader("TestFile.txt");
    string line = sr.ReadToEnd();
    Console.WriteLine(line);
} 
```

这是为什么？

**更新：**末尾有分号`using(....);`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-13T22:03:35.330

您所描述的内容是通过`;`在 using 语句之后放置来实现的

```
using (StreamReader sr = new StreamReader("TestFile.txt"));
{
     String line = sr.ReadToEnd();
     Console.WriteLine(line);
} 
```

可能你甚至没有注意到，后来删除了。

*using(StreamReader) 和仅使用 StreamReader 有什么区别？*

当您将一次性变量（StreamReader）放入 using 语句时，它与以下内容相同：

```
StreamReader sr = new StreamReader("TestFile.txt");
try
{
    String line = sr.ReadToEnd();
    Console.WriteLine(line);
}
finally
{
    // this block will be called even if exception occurs
    if (sr != null)
        sr.Dispose(); // same as sr.Close();
} 
```

此外，如果您在 using 块中声明变量，它将仅在 using 块中可见。这就是为什么`;`您的 StreamReader 在后一种情况下不存在的原因。如果`sr`在使用块之前声明，它稍后会可见，但流将被关闭。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T22:11:41.167

我只是添加这个答案，因为现有的答案（虽然得到了适当的支持）只是告诉你错误是什么，而不是为什么它是一个错误。

这样做；

```
using (StreamReader sr = new StreamReader("TestFile.txt"));
{
     String line = sr.ReadToEnd();
     Console.WriteLine(line);
} 
```

实际上与这样做（语义上）相同：

```
using (StreamReader sr = new StreamReader("TestFile.txt"))
{
    // Note that we're not doing anything in here
}
{
     String line = sr.ReadToEnd();
     Console.WriteLine(line);
} 
```

`using`第二个块（由第二组花括号创建）与该块没有任何关系。由于在块内定义的变量`using`仅在该块内的范围内，因此一旦您的代码到达第二个块，它就不存在（就在范围内和可访问而言）。

You should use the `using` statement because `StreamReader` implements `IDisposable`. The `using` block provides a simple, clean way to ensure that--even in the case of an exception--your resources are properly cleaned up. For more information on the `using` block (and, specifically, what the `IDisposable` interface is), see the [meta description on the `IDisposable` tag](https://stackoverflow.com/tags/idisposable/info).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T22:07:22.840

改变这个：

```
 using (StreamReader sr = new StreamReader("TestFile.txt")); 
```

对此：

```
 using (StreamReader sr = new StreamReader("TestFile.txt")) 
```

# mysql - 我可以将 MySQL“IN”与 Coldfusion 中的字符串列表一起使用吗？

> ID：13369559
> 
> 赞同：3
> 
> 时间：2012-11-13T21:58:50.407
> 
> 标签：mysql, string, select, coldfusion

我正在尝试将变量`MySQL`从`Coldfusion`. 我的查询目前包括：

```
<cfif Session.app_assign EQ "0">
    AND art.iln IN ( #Session.app_ilns# )
<cfelseif Session.app_assign EQ "1">
    AND art.marke IN ( "#Session.app_keys#" )
</cfif> 
```

`Session.app_ilns`将是一个像这样的数字列表：1111111111111,2222222222222.... 但是，`Session.app_keys`将是字符串列表，例如：

```
sample_1, sample_2, sample_3 
```

这将在我的脚本中产生错误，因为

```
unknown column "sample_1, sample_2, sample_3" in where clause. 
```

**问题**：
有没有办法将 MySQL`IN`与字符串值列表一起使用，或者我是否需要预先循环变量以添加引号。还有其他方法可以完成这项工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T22:12:59.917

尝试使用 cfqueryparam （无论如何都是好的做法）`list="yes"`

请参阅本[·纳德博文](http://www.bennadel.com/blog/1267-ColdFusion-CFQueryParam-Varchar-List-Puts-In-Single-Quotes-For-You.htm)

代码如下所示：

```
AND art.marke IN ( <cfqueryparam value="#Session.app_keys#" cfsqltype="cf_sql_varchar" list="yes" />) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T22:08:38.630

知道了。我可以设置`list="true"`。`cfqueryparam`看[这里](http://www.bennadel.com/blog/1267-ColdFusion-CFQueryParam-Varchar-List-Puts-In-Single-Quotes-For-You.htm)

# jquery-ui - JQuery-UI 和引导冲突

> ID：13369568
> 
> 赞同：1
> 
> 时间：2012-11-13T21:59:26.387
> 
> 标签：jquery-ui, twitter-bootstrap, jquery-ui-datepicker

我有一个使用 Twitter Bootstrap 的 Rails 3.2.5 应用程序。我正在尝试使用 JQuery UI 日期选择器。我已经用谷歌搜索了几天寻找解决方案，但找不到任何东西。我在 Rails 视图中有一个文本字段，我试图将其与 JQuery 日期选择器一起使用。但是，当我单击文本字段时，什么也没有发生。

在我的 Rails 视图中，我有一个简单的 text_field_tag ，如下所示：

```
<%= text_field_tag 'andrew' %> 
```

在我关联的 CoffeeScript 文件中：

```
$ ->
  $('#andrew').datepicker 
```

在 Chrome 开发者工具 JavaScript 控制台中，我看到了这个错误：

未捕获的类型错误：对象 [对象对象] 没有方法 'datepicker'

现在我已经确定 JQuery-UI 和 Bootstrap 之间存在冲突。在同一个 JavaScript 控制台中，我可以这样做：

```
jQuery.noConflict(); 
```

我得到

```
function (a,b){return new e.fn.init(a,b,h)} 
```

然后我可以输入：

```
$('andrew'.datepicker(); 
```

我得到：

```
[<input id="andrew" name="andrew" type="text" class="hasDatepicker">] 
```

在此之后，当我转到浏览器窗口时，单击文本字段会显示我想要的日期选择器日历。

那么如何让它在我的代码中工作呢？也就是说，我正在手动解决 JavaScript 控制台中的冲突，但我无法仅通过我的代码让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:13:59.687

看起来我在经历了很多痛苦之后解决了这个问题。我创建了一个新项目，然后慢慢地、有条不紊地将我的应用程序的各个部分转移到新应用程序中。我终于发现了一个仅在我的项目中存在上述问题的目录。

有一个“public/assets”目录，内容如下。我不记得创建此目录或将这些文件放在该目录中。将目录重命名为不同的名称会导致我的 JQuery-UI datepicker 与 Twitter Bootstrap 一起正常工作。

以下是公共/资产的内容：

```
-rw-r--r--  1 andrunix  staff   83360 Sep  3 18:01 application 6fc1172d858485077bbecdb82b96399a.css
-rw-r--r--  1 andrunix  staff   13546 Sep  3 18:01 application-6fc1172d858485077bbecdb82b96399a.css.gz
-rw-r--r--  1 andrunix  staff  100616 Sep  3 18:01 application-990a4cf0df42934fcc4c14aaf88b7ced.js
-rw-r--r--  1 andrunix  staff   35448 Sep  3 18:01 application-990a4cf0df42934fcc4c14aaf88b7ced.js.gz
-rw-r--r--  1 andrunix  staff   83294 Sep  3 18:01 application.css
-rw-r--r--  1 andrunix  staff   13484 Sep  3 18:01 application.css.gz
-rw-r--r--  1 andrunix  staff  100618 Sep  6 20:26 application.js
-rw-r--r--  1 andrunix  staff   35448 Sep  3 18:01 application.js.gz
-rw-r--r--  1 andrunix  staff   13826 Aug 30 17:42 glyphicons-halflings-f6675c325532ec11a984d58e172b8e2a.png
-rw-r--r--  1 andrunix  staff    8777 Aug 30 17:42 glyphicons-halflings-white-13553a5bf21ae3cc374006592488ec64.png
-rw-r--r--  1 andrunix  staff    8777 Aug 30 17:42 glyphicons-halflings-white.png
-rw-r--r--  1 andrunix  staff   13826 Aug 30 17:42 glyphicons-halflings.png
-rw-r--r--  1 andrunix  staff     368 Sep  5 15:00 manifest.yml
-rw-r--r--  1 andrunix  staff    6646 Aug 10 19:57 rails-be8732dac73d845ac5b142c8fb5f9fb0.png
-rw-r--r--  1 andrunix  staff    6646 Aug 10 19:57 rails.png 
```

如果有人知道这是如何创建的，那会让我放心。谢谢！

安德鲁

# visual-studio - 如何在 Visual Studio 中删除导入的代码段？

> ID：13369579
> 
> 赞同：16
> 
> 时间：2012-11-13T21:59:53.940
> 
> 标签：visual-studio, visual-studio-2012, code-snippets

我导入了一个片段，我希望它消失。问题是当我进入并尝试将其删除时，片段管理器的“删除”按钮变灰了，有什么想法吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-20T16:02:28.377

代码片段很可能被导入到 Program Files 文件夹（例如 C:\Program Files (x86)\Microsoft Visual Studio 11.0\Web\Snippets\CSS\1033\CSS）而不是 C:\Users\\Documents\Visual Studio 2012 \代码片段

片段管理器显示所选片段的位置，只需前往那里，手动删除它并重新启动 Visual Studio。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-04-07T14:45:36.017

是的，这是因为您只能删除目录而不是单个片段（至少从代码片段管理器中，你知道，微软风格！）：

> 要从代码片段管理器中删除目录，请选择 **要删除的****目录**。

参考： [https ://msdn.microsoft.com/en-us/library/9ybhaktf(v=vs.100).aspx](https://msdn.microsoft.com/en-us/library/9ybhaktf(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-22T13:09:23.340

对于 Ubuntu 用户，请删除 ~/.config/Code/User/snippets 中的片段文件
不确定是否适用于其他 Linux 发行版。

# jquery - tr 显示后不取全长：无

> ID：13369583
> 
> 赞同：0
> 
> 时间：2012-11-13T22:00:01.890
> 
> 标签：jquery, asp.net, css

我在 td 中有一个下拉列表。我在 html 中设置了 3 个 tr 显示：无。基于下拉列表选择，我使用 JQuery 显示这 3 个表行之一。

它工作得很好，但有一个问题。当我设置 tr 显示时，它不需要全长。如果我删除 display: none in html all tr​​ 需要完整的长度。请指导我，这是我的代码：

```
function ddlChange() {        
    var index = $('select[id$=ddlSchoolFundingType]').get(0).selectedIndex;        
    if (index == 1) {            
        $('#ERIRow').css("display", "inline");
        $('#StudentRateRow').css("display", "None");
    }
    else if (index == 2) {

        $('#ERIRow').css("display", "none");
        $('#StudentRateRow').css("display", "inline");
    }
    else {        
        $('#ERIRow').css("display", "none");
        $('#StudentRateRow').css("display", "none");
    }
 }

<table class="SchoolFinances">
<tr>
    <td colspan="4">
        <asp:Label runat="server" ID="lblError" CssClass="ErrorLabel"></asp:Label>
    </td>
</tr>
<tr>
    <td colspan="4">
        <asp:Label CssClass="SFlbl1" Text="Please enter your school's SES score:" runat="server"
            ID="lblSESScore"></asp:Label>
    </td>
    <td colspan="3">
        <asp:TextBox CssClass="SFtxt1" runat="server" ID="txtSESScore"></asp:TextBox>
        <asp:RequiredFieldValidator runat="server" ID="rfvSESScore" Text="?" ControlToValidate="txtSESScore"
            Display="Dynamic" CssClass="ErrorLabel"></asp:RequiredFieldValidator>
    </td>
</tr>
<tr>
    <td colspan="4">
        <asp:Label CssClass="SFlbl1" runat="server" Text="In your school Funding Maintained or Funding Guaranteed?"
            ID="lblSchoolFundingType"></asp:Label>
    </td>
    <td colspan="3">
        <asp:DropDownList runat="server" ID="ddlSchoolFundingType" onChange="javascript:ddlChange()">
        </asp:DropDownList>
        <asp:RequiredFieldValidator runat="server" ID="RequiredFieldValidator1863" Text="?"
            ControlToValidate="ddlSchoolFundingType" CssClass="ErrorLabel" InitialValue=""></asp:RequiredFieldValidator>
    </td>
</tr>
<tr id="ERIRow" style="display: none; border:1px;">
    <td colspan="4">            
        <asp:Label CssClass="SFlbl1"  runat="server" Text="Please enter the ERI level" ID="lblERILevel"></asp:Label>
    </td>
    <td colspan="3">
        <asp:TextBox CssClass="SFtxt1" runat="server" ID="txtERILevel"></asp:TextBox>
        <asp:RequiredFieldValidator runat="server" ID="rfvERILevel" Text="?" ControlToValidate="txtERILevel"
            Display="Dynamic" CssClass="ErrorLabel"></asp:RequiredFieldValidator>
    </td>
</tr>
<tr id="StudentRateRow" style="display: none; border:1px;">
    <td colspan="4">
        <asp:Label CssClass="SFlbl1" runat="server" Text="Please enter the student funding rate"
            ID="lblStudentFundingRate"></asp:Label>
    </td>
    <td colspan="3">
        <asp:TextBox CssClass="SFtxt1" runat="server" ID="txtStudentFundingRate"></asp:TextBox>
        <asp:RequiredFieldValidator runat="server" ID="rfvStudentFundingRate" Text="?" Display="Dynamic"
            ControlToValidate="txtStudentFundingRate" CssClass="ErrorLabel"></asp:RequiredFieldValidator>
    </td>
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:08:48.630

我认为您的问题是使用`display: inline;`. 大多数情况下，内联元素只占用足够的宽度以适应其内容。

由于您使用的是 jQuery，您可以尝试使用[jQuery#show()](http://api.jquery.com/show/)和[jQuery#hide()](http://api.jquery.com/hide/)分别显示和隐藏您的元素，而不是手动设置 display css 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T22:05:16.843

尝试可见性：隐藏而不是显示：无

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T22:10:49.690

谢谢大家，我只是打开了显示表行而不是内联或块，它起作用了。

# ms-access - 当 Enabled 属性设置回 True 时，TreeView ActiveX 控件移动到窗体的左上角

> ID：13369585
> 
> 赞同：0
> 
> 时间：2012-11-13T22:00:06.607
> 
> 标签：ms-access, vba, treeview

我有一个包含多个带有复选框的 TreeView ActiveX 控件的表单。根据第一个 TreeView 中的选定项目，我在其他 TreeView 中显示不同的项目。

如果在第一个 TreeView 中选择了未选中的项目，我想禁用所有 TreeViews。为此，我检查是否在我的更新功能中检查了 SelectedItem。如果不是，我将除第一个和退出之外的所有 TreeView 的 Enabled 属性设置为 false。如果选中它，我将属性设置回 true 并根据第一个 TreeView 的 SelectedItem 更新 TreeViews。

它正在工作，但我的问题是，当我将 Enabled 属性设置回 true 时，在将其设置为 false 后，TreeView 会显示在左上角。它们堆放在角落里，所以只能看到最后一个。

我一直在寻找有关如何解决此问题的提示，但没有运气。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-19T17:00:21.737

对于未来的搜索者：

我也遇到了 TreeView 跳到左上角的问题。就我而言，我也有一个更新的子报告，在我单击 TreeView 之前一切都很好。一旦我这样做了，视图就会跳到左上角。

这是我为修复它所做的：

```
Private Sub MyTree_GotFocus()
  Me.MyTree.Top = Me.MyTree.Top
  Me.MyTree.Left = Me.MyTree.Left
End Sub 
```

即使它只是将属性设置为等于它们的当前值，更新值也会重新锚定元素。

您很可能只需在触发跳转的任何内容之后添加这些行。

```
Me.MyTree.Enabled = True
Me.MyTree.Top = Me.MyTree.Top
Me.MyTree.Left = Me.MyTree.Left 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:36:54.900

我有一个类似的问题，当我从一个选项卡切换到另一个选项卡时，树视图会移动。我可以让它停止这样做的唯一方法是将 TreeView 控件放在它自己的子窗体中（除了 TreeView 控件之外什么都没有，并将该子窗体放在主窗体上。

# ruby - 有哪些 wget URL 安全检查？

> ID：13369588
> 
> 赞同：1
> 
> 时间：2012-11-13T22:00:24.877
> 
> 标签：ruby, security, wget

我正在使用Ruby的[`system`](http://ruby-doc.org/core-1.9.3/Kernel.html#method-i-system)方法。

```
system("/bin/wget", "-pk", "-nd", "-P", "/public/download", "#{URL}") 
```

where`URL`由用户填写。

我应该在服务器上执行哪些检查`URL`以确保用户没有做恶意的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:48:52.637

我的理解是，按照你所说的方式，你不必担心有人传入 say `; rm -rf *`。但是，如果 wget 对 URL 做了任何特殊处理，您可能会这样做。例如，curl 允许您在 URL 本身中执行一些正则表达式/范围/通配符的内容。

您可以考虑通过`URI.parse`和 catch运行 URL `URI::InvalidURIError`。

# sql-server - 如何同步以前删除的行

> ID：13369589
> 
> 赞同：3
> 
> 时间：2012-11-13T22:00:24.677
> 
> 标签：sql-server, database, microsoft-sync-framework

我的数据库中有一个联结/多对多表。该表有 2 列构成复合主键；用户标识和组标识。

我遇到了一个问题，一旦删除了一行，就永远无法重新添加和同步。例如：

1.  用户 123 添加到组 456 更改同步，上传方向。行被添加到远程。
2.  用户 123 从组 456 中删除（表元数据中的行墓碑和从基表中删除的行）
3.  变化同步，上传方向。行在远程被删除
4.  用户 123 被添加到组 456
5.  变化同步，上传方向。行未插入远程。

我猜范围知识保留了该行曾经被删除而不同步更改的事实？这种理解正确吗？反正有没有清理这些知识？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T20:32:18.997

如果任何键列都`IDENTITY`设置了属性，那么您不能简单地在此类列中插入值。你应该明智地使用这个属性——它的想法是确保键永远不会重复。

因此，如果您确实需要将值插入`IDENTITY`列中，请使用`SET IDENTITY_INSERT MyTable ON/OFF`. db 中只有一个表可以将此属性设置为 ON。如果它关闭 - 发生错误。

```
CREATE TABLE MyTable (ID INT IDENTITY NOT NULL)
SET IDENTITY_INSERT MyTable ON/OFF
INSERT INTO MyTable VALUES (2)
SET IDENTITY_INSERT MyTable ON/OFF 
```

# php - OAuth 2.0 和 Amazon Beanstalk

> ID：13369591
> 
> 赞同：0
> 
> 时间：2012-11-13T22:00:36.587
> 
> 标签：php, amazon-web-services, oauth-2.0, amazon-elastic-beanstalk

我对编程比较陌生，并且在将 OAuth 与托管在 Amazon Beanstalk 上的应用程序一起使用时遇到了麻烦。

我希望我的应用程序使用此处显示的基本代码连接到 Constant Contact API

[https://github.com/shannon7wallace/OAuth-2-PHP-Example](https://github.com/shannon7wallace/OAuth-2-PHP-Example)

如果我在本地执行此代码，一切正常。我可以使用我的固定联系凭据登录并提取数据。我确信在我的持续联系开发人员密钥中正确设置了我的重定向 uri，并且一切都在本地完美运行。

但是，当我将其部署到 AWS 时，尝试导航到 index.php 时会出现空白页。我仔细检查了我的容器设置和我上传的 zip 包，以确保我指向正确的目录，并确保我的 AWS 运行状况检查指向一个可公开访问的 URL（AWS 显示应用程序是健康的），但页面是空白的。

如果我用简单的 HTML 甚至 phpinfo() 替换我的 index.php，它就可以工作。我怀疑它在身份验证检查时挂断了，但即使我硬编码我的帐户凭据并删除登录逻辑，我仍然会得到一个空白页面。即使我的 php 脚本标签之外的 html 也不会显示，无论我是否包含类似或其他头标签的内容。

谷歌搜索 OAuth + Beanstalk 产生的结果很少，并且 constantcontact API 文档，至少在我没有经验的眼里，非常稀少，但我能找到解决我的问题的最接近的事情是这个

[https://forums.aws.amazon.com/thread.jspa?messageID=277339㭛](https://forums.aws.amazon.com/thread.jspa?messageID=277339&#277339)

上述线程中的场景似乎解决了比我更具体的问题，我不确定如何将解决方案应用于我的特定案例。

我有什么明显的遗漏吗？考虑到托管在其上的大量项目，我无法相信 AWS 不适合使用 OAuth 的应用程序。

我感谢任何人可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:33:16.253

PHP 的 Beanstalk 容器选项有一个选项来控制是否应显示错误；将其切换到`"On"` *应该*在您的页面上写一个致命错误。

事实证明，即使更改设置后，页面仍然是空白的。我不确定该功能是否已损坏，但它绝对可以防止您不小心将其打开:)

您必须登录到您的实例（假设您的站点尚未加载并且它实际上只是一个）并编辑您的代码以尽可能高地插入常规调试语句：

```
error_reporting(-1);
ini_set('display_errors', 'On'); 
```

除非您的页面中有任何解析错误，否则它将显示有问题的错误。

# emacs - 终端上emacs中的关键字颜色

> ID：13369594
> 
> 赞同：0
> 
> 时间：2012-11-13T22:00:51.750
> 
> 标签：emacs, putty, secure-crt

我通过 SecureCRT 连接到服务器并使用命令行 emacs（不是 X11）。有没有办法上色？特别是，当我编码时，我希望 emacs 为关键字等着色。目前一切都是黑色或白色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:11:16.790

检查`TERM`环境变量的值，使用`echo $TERM`. 类似 xterm 的终端下的 Emacs 会显示颜色，因此您可以尝试使用`TERM=xterm emacs`.

# php - PHP 图像/文件共享脚本

> ID：13369595
> 
> 赞同：0
> 
> 时间：2012-11-13T22:00:54.233
> 
> 标签：php, html, upload

有谁知道任何教程可以让您逐步完成制作文件共享脚本的过程，我发现很多如何制作文件上传器，但没有一个返回链接供其他人下载上传的内容。

如果有人可以为此提供某种教程来回击我，那就太好了

感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:12:09.623

从字面上看，您只需要一个超链接

```
<?php

   //where
   $url = "http://www.theurlineed.com";
   $myuploadfolder = "/var/www/html/mydir/uploaddir";
   if (is_dir($myuploadfolder)) foreach (scandir($myuploadfolder) as $file){
       if ($file!="." || $file!=".."){
            echo "<p><a href=\"".$url."/".$file."\">".$file."</a></p>\n";
       }       
   }

?> 
```

几乎可以肯定，这个问题实际上是为自己理解顶部的`$url`和位。`$myuploadfolder`即如何从“serverland”到“url-land”，没有人能为你做到这一点，你必须吮吸它，看看有什么用。

# php - 为表单助手和表单验证类编写一次输入标签

> ID：13369597
> 
> 赞同：0
> 
> 时间：2012-11-13T22:01:00.977
> 
> 标签：php, forms, codeigniter, continuous-integration, validation

有没有办法使用我已经放在 form_validation 规则中的值来创建 html 表单标签？例子...

**控制器：**

```
$config = array('somerule' => 
                      array('label' => 'Nick name',
                            'field' => 'nickname'
                            'rules' => 'trim|required|max_length[255]')
               ) 
```

**看法：**

```
<?php echo form_open(); ?>
<?php echo form_label('Nick name', 'nickname'); ?>
<?php echo form_input('nickname', set_value('nickname', $data['nickname'], array('id'=>'nickname')); ?>
</form> 
```

我需要在验证规则和 html 视图中都写“昵称”。有没有像`$this->form_validation->get_label('nickname')`这样的神奇功能会给我正确的标签/语言，而不是在视图中再次写“昵称”？

感谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:12:14.893

为什么不使用[CI 语言课程](http://codeigniter.com/user_guide/libraries/language.html)？

制作您自己的语言文件，例如`form_lang.php`并将其放在`application/language/english`文件夹中（假设您的默认语言是`english`在配置中定义的）。

用这种模式写下你的语言短语：

```
$lang['index']="value"; 
```

在控制器中加载语言文件一次

```
$this->lang->load('form'); 
```

就是这样！
您也可以`$this->lang->line('index')`在控制器（您的验证配置数组）和加载的视图中使用。

`$this->lang->line('index')`在您的控制器已加载的视图中使用。

# asp.net-mvc - 如何在 MVC4 中显示不可编辑的复选框而不是单词“True”

> ID：13369607
> 
> 赞同：0
> 
> 时间：2012-11-13T22:01:44.423
> 
> 标签：asp.net-mvc, razor, model, asp.net-mvc-4

如何在 MVC4 的表中创建列以显示不可编辑的复选框而不是单词 true。

```
@foreach (var m in Model)
{
    <tr>
        <td>@m.UserLogin
        </td>
        <td>@m.UserEmployeeName
        </td>
        <td>@m.UserAccessRightsID
        </td>
        <td>@m.SystemManager @*CHECK BOX SHOULD BE HERE*@
        </td> 
```

这是我目前得到的屏幕截图。 ![表格截图](../Images/16de84b5074d3a76ac74eddcc11e3a55.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:03:56.287

```
<input type="checkbox" checked='@m.SystemManager' disabled="disabled" /> 
```

它使用 Razor V2 功能，如果值为 null 或 false，则删除该属性。

[你可以在这里读更多关于它的内容](http://vibrantcode.com/blog/2012/4/10/whats-new-in-razor-v2.html/)

# wamp - 本地主机不断刷新

> ID：13369609
> 
> 赞同：0
> 
> 时间：2012-11-13T22:01:50.143
> 
> 标签：wamp, xampp

两周前我完美地使用了xampp。但是，现在，每当我尝试连接本地主机时，它都不会出现并不断刷新。我知道当其他程序使用该端口时会发生什么，这些程序显示为“未找到”左右。但是，现在，我没有错误或没有结果。只刷新页面... 有什么问题？我重新安装了很多次，甚至更改了服务，但结果是一样的

# iphone - 在 TabBar 中的视图控制器之间共享 UIImageView

> ID：13369610
> 
> 赞同：0
> 
> 时间：2012-11-13T22:01:53.790
> 
> 标签：iphone, ios, uiviewcontroller, uiimageview, uitabbarcontroller

我有一个`UITabBarController`基于应用程序。我创建了一个`masterVC`类，所有构成的 ViewController`tabBarController`都是`masterVC`. 我想设置一个 UIImageView （它是 的一个属性`masterVC`），一旦设置它就会在`tabBarController`.

如果我实例化每个 VC，我可以将图像作为属性传递（这很简单）。但是，在 tabBarController ViewControllers 之间没有方法可以做到这一点。

我正在尝试做的最简单的概念示例是 tabBarController 中每个视图控制器中的这个示例。一定有更好的方法：

```
-(void)viewDidAppear:(BOOL)animated
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    NSData *data = [defaults objectForKey:kMainImageData];
    if (data) {
        self.mainImageView.image = [NSKeyedUnarchiver unarchiveObjectWithData:data];
    }
}

-(void)viewWillDisappear:(BOOL)animated
{
    NSData *data = [NSKeyedArchiver archivedDataWithRootObject:self.mainImageView.image];
    [[NSUserDefaults standardUserDefaults] setObject:data forKey:kMainImageData];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:07:32.737

好吧，创建一个适当的数据源，每个人都`UIViewController`可以在其中请求数据。有一些方法：

*   将图像保存到磁盘，使用辅助类来检索它。
*   将图像保存为 Singleton 的属性并检索它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:08:35.120

您可以重载该方法

```
-(id) initWithCoder:(NSCoder*)aDecoder 
```

像这样：

```
self = [super initWithCoder:aDecoder];
if ( self )
{
    static UIImage *reuseImage = nil;

    if ( reuseImage == nil )
    {
        //Init reuseImage with your image
    }

    myImageViewProperty.image = reuseImage;
...
return self; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T22:18:13.797

如果我正确理解你，我认为你可以在你的超类中通过键值观察来完成这一切。

在您的`masterVC`标题中，声明：

```
@property (strong) UIImage *sharedImage; 
```

在实施中：

```
@synthesize sharedImage;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        [self addObserver:self forKeyPath:@"sharedImage" options:NSKeyValueObservingOptionNew context:NULL];
    }
    return self;
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
    if ([keyPath isEqualToString:@"sharedImage"]) {
        self.mainImageView.image = self.sharedImage;
    }
}

- (void)dealloc {
    [self removeObserver:self forKeyPath:@"sharedImage"];
} 
```

然后，每当`sharedImage`在任何子类上设置属性时，您的图像视图都会相应地更新其内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T22:20:48.247

我认为最简单的方法是将`viewDidAppear`您发布的方法移到您的`masterVC`班级中。然后在您的 ViewControllers 子类中，`masterVC`您可以：

`viewDidAppear`如果您没有其他设置要做，请删除该方法，然后它将调用`viewDidAppear`您的`masterVC`.

或者

更改为以下内容，`viewDidAppear`以便它会调用然后执行所有其他设置。`viewDidAppear``masterVC`

```
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    // your other code...
} 
```

# javascript - JQuery Toggle 类选择所有文本

> ID：13369612
> 
> 赞同：0
> 
> 时间：2012-11-13T22:02:13.227
> 
> 标签：javascript, jquery, html, jquery-ui

我目前在屏幕一侧有一个小选项卡，单击时会调用 toggleClass 以使 div 更大。同时还有一个 ajax 调用来填充更大的 div 内容。但发生的情况是 div 中的所有文本都被选中/突出显示，就好像我要在整个内容上拖动鼠标一样。

有没有办法让它不被选中，或者至少在加载后取消选择它？

这是代码：

```
 $(".summary-box-small").click(function () {

        $("#summary-box-container").toggleClass('summary-box-small summary-box-full', 1000);
        $.ajax({
            url: '/RuntimeSession/LoadSummaryBox',
            type: 'post',
            success: function (data) {
                $("#summary-box-container").empty().append(data);

                $("#sb-content").tabs();
                $("#tree").dynatree({
                    onActivate: function (node) {
                        alert("You activated " + node);
                    }
                });
            }
        });

        $(".summary-box-small").off('click');   //turns off the click handler so when it is expanding clicking anywhere will not make it minimized
    }) 
```

这是CSS：

```
.summary-box-small
{
    position: fixed;
    top: 400px;
    left: 0px;
    z-index: 9999;
    height: 70px;
    width: 20px;
    background-color: #cfcfcf;
}

.summary-box-full
{
    position: fixed;
    top: 400px;
    left: 0px;
    z-index: 9999;
    height: 500px;
    width: 350px;
    background-color: #cfcfcf;
    opacity: 0.9;
} 
```

这是 AJAX 调用正在加载的内容：

```
 <div id="sb-header">
    <p style="float: right">X</p>
</div>
<div id="sb-content">
    <ul>
        <li><a href="#sb-nav">Nav</a></li>
        <li><a href="#sb-dx">Dx Tracker</a></li>
    </ul>

    <div id="sb-nav">

        <p>fake content under the nav...MAKE ME A GORRAM TREE</p>
         <div id="tree">
        <ul>
            <li id="key1" title="Look, a tool tip!">item1 with key and tooltip</li>
            <li id="key2" class="selected">item2: selected on init</li>
            <li id="key3" class="folder">Folder with some children</li>
            <li id="key4" class="expanded">Document with some children (expanded on init)</li>
            <li id="key5" class="lazy folder">Lazy folder</li>
        </ul>
    </div>
    </div>
    <div id="sb-dx">
        <p>fake content</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:33:47.977

在您的活动之外添加以下内容是否`$(".summary-box-small").click()`有任何作用？

```
$("#summary-box-container").disableSelection(); 
```

# java - 同一类设计的加密/解密版本

> ID：13369615
> 
> 赞同：0
> 
> 时间：2012-11-13T22:02:29.400
> 
> 标签：java, design-patterns, encryption, decorator

这是一个设计问题，我将尝试尽可能缩小范围以避免将其标记为开放式。

**问题**

需要一种有效的方法来设计一个或两个保存相同数据的类，但一个将数据字段作为加密字符串，第二个将它们作为解密字符串或整数。我收到加密的数据，我将其解密一次并允许我的应用程序使用解密的版本。

**我所拥有的**

我想出了不同的解决方案，但对其中任何一个都不满意。这是我尝试过的：

1.  一个带有布尔标志 `encrypted` 的类，最初设置为 `true`，然后在数据解密后取消设置。缺点，相同的字段是多用的，即使有一个私有标志，听起来也不安全；另一个骗局，一旦解密，某些字段的类型就不同了，比如一个 ID，理想情况下，我希望解密的版本是正确的最终类型，这样就无法将新字段添加到同一个类中，这会使它变得混乱并且复杂化其他任务，如数据绑定等
2.  想到了装饰器模式，但是它的工作方式是让装饰器和主题类实现相同的接口，但是解密后返回类型会有所不同
3.  考虑有 2 个类，一个用于该类的解密版本，另一个用于加密。但是，在这种方法中放弃了代码重用，以解决让解密版本扩展加密版本并重用加密字段的 getter 的想法，这些字段在解密后不会更改类型，但更改类型的字段不能被覆盖
4.  考虑过即使在解密后也以字符串格式保留数据，并在类之外转换为整数，但这是多余的，并且每当我需要使用类的整数字段时，都会用愚蠢的代码片段使我的代码混乱

关于如何解决这个设计问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:21:03.360

将它们分开。将加密类视为消息类，将解密类视为实体对象。数据类型的变化和您将来应用的任何字段验证都将更易于管理。即使是像字段宽度这样简单的东西，在加密时也可能会更大。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T00:30:26.553

加密字段的最佳方法是简单地序列化对象实例并加密结果流。要获取解密的对象实例，只需解密流并反序列化对象。

# xcode - 如何将字符串转换为带点的双精度？

> ID：13369616
> 
> 赞同：1
> 
> 时间：2012-11-13T22:02:33.840
> 
> 标签：xcode, string, double, coordinate

我目前正在开发一个适用于位置的应用程序，因此我有以下代码：

```
CLLocationCoordinate2d coord;
coord.longitude = [longitude doubleValue];
coord.latitide = [latitude doubleValue]; 
```

看起来是合法的，不是吗？现在经度和纬度是像“10.112233”这样的字符串。我知道通常 double 在那里没有积分，但是 cllocationcoordinate2d 想要这样......

现在，如果你 NSLog 字符串，它们工作得很好，但如果你 NSLog 的 doubleValues 它根本不返回任何内容。**我该如何解决？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:36:34.083

以下应该有效：

```
NSString *coordinateAsString = @"10.112233";
coord.longitude = [[NSDecimalNumber decimalNumberWithString:coordinateAsString] doubleValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:09:46.017

你可以尝试使用`NSDecimalNumber`如下：

```
NSString *string = @"10.112233";
NSDecimalNumber *number = [NSDecimalNumber decimalNumberWithString:string]; 
```

# cuda - 在 Thrust 中读取已分配的内存/向量

> ID：13369620
> 
> 赞同：4
> 
> 时间：2012-11-13T22:02:57.287
> 
> 标签：cuda, wolfram-mathematica, thrust

我正在使用 Mathematica 将一个简单的变量加载到 GPU 内存中：

```
mem = CUDAMemoryLoad[{1, 2, 3}] 
```

并得到以下结果：

```
CUDAMemory["<135826556>", "Integer32"] 
```

现在，有了 GPU 内存中的这些数据，我想使用 Thrust 从单独的 .cu 程序（在 Mathematica 之外）访问它。

有没有办法做到这一点？如果是这样，有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T06:38:14.890

不，没有办法做到这一点。CUDA 上下文是私有的，在标准 API 中，一个进程无法访问在另一个进程上下文中分配的内存。

在 CUDA 4 发布周期中，发布了一个名为 cudaIpc 的新 API。这允许在同一主机上运行具有 CUDA 上下文的两个进程导出和交换句柄到 GPU 内存分配。该 API 仅在运行统一寻址支持的 Linux 主机上受支持。据我所知，Mathematica 目前不支持这一点。

# css - css 将表单放置在布局表中的图像顶部

> ID：13369623
> 
> 赞同：0
> 
> 时间：2012-11-13T22:03:13.593
> 
> 标签：css, forms, alignment

我试图在一张图片上放置一个表格，我想把它作为整个主页的背景。一切正常。唯一的问题是我想在表格中放置一些像素让 50 多下来。另外我想把桌子放在右边，但让我们说它之前的 30 像素。有任何想法吗 ？

这是我的html代码：

```
<html>

<head>
<link href="css/main.css" rel="stylesheet" type="text/css">
</head>

<body>

<div id="text">

<div class="homepageTable"     width:40px;   margin-right:auto;   margin-left:auto;   style="text-align:right" >
            <form action="#" method="post">
                <input type="text"  size="25"  name="first_name"        placeholder="first name"><br/>
                <input type="text"  size="25"  name="last_name"         placeholder="last name"><br/>
                <input type="text"  size="25"  name="email"             placeholder="email"><br/>
                <input type="text"  size="25"  name="retype_email"      placeholder="retype your email"><br/>
                <input type="text"  size="25"  name="password"          placeholder="password"><br/>
                <input type="text"  size="25"  name="retype_password2"  placeholder="retype your password"><br/><br/>

                    <input type="checkbox" name="I_accept_terms" value=" "><br/>

                <input type="submit" value="" name="submit" style="background:url('img/login_button_1.jpg') no-repeat; width:300; height:50; border:none;"/>

            </form>
        </div> 

</div>

</body>
</html> 
```

这是我的css文件：

```
#text 
{
width: 961px;
height:219px;
position: relative;
background-image: url(../img/back_img_green.jpg);
background-repeat: none;
} 
```

有任何想法吗 ？谢谢斯特凡诺斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:00:20.960

将图像绝对定位在相对定位的 div 内。然后将表单绝对定位到您想要的左上角偏移量，并为表单提供更高的 z-index。或者将图像设置为 div 的背景。

# redis - Redis 是否是 SignalR 通过 SQL Server 横向扩展的更好选择，并且每个都支持故障转移？

> ID：13369624
> 
> 赞同：7
> 
> 时间：2012-11-13T22:03:14.073
> 
> 标签：redis, signalr, failover, failovercluster

在 David Fowler 的[博客](http://weblogs.asp.net/davidfowler/)中，SQL Server 已添加到服务总线的横向扩展提供程序列表中。

我正在我们的 Windows 服务器上实施 Redis。根据我对 Redis 的了解，我猜它会比使用 SQL Server 快得多——这是一个公平的假设吗？

如果有，Windows 版本的 Redis 是如何实现故障转移的？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-27T13:46:31.820

*   Redis 比 SQL 快约 200 倍，主要是因为它是在内存中的，并且该协议是为速度而设计的。
*   如果这有帮助，现在 Windows Azure 上提供了[Redis Cloud](http://redis-cloud.com/)，HA 是该服务的内置功能。

披露 - 我是 Redis 云服务背后的公司 Garantia Data 的联合创始人兼首席技术官。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-14T08:57:35.647

> 根据我对 Redis 的了解，我猜它会比使用 SQL Server 快得多——这是一个公平的假设吗？

它会比 SQL Server 更快，因为它针对基于内存的操作进行了优化，但它的速度并不是唯一的优势。在处理各种场景时，对高级[数据结构](http://redis.io/topics/data-types)的支持提供了极大的灵活性。

> 如果有，Windows 版本的 Redis 是如何实现故障转移的？

[下载部分](http://redis.io/download)有一个链接指向非官方的基于 Windows 的 redis 端口，但它并不意味着用于生产目的。redis正式版支持[replication](http://redis.io/topics/replication)，[sentinel](http://redis.io/topics/sentinel)有自动failover，但是在windows port中这些功能的状态很难说。一般来说，我不建议在 Windows 机器上使用 redis，而是使用带有 linux 发行版的虚拟机并在那里运行它。

# java - 通过 JDBC 在 Postgresql 8.4 上以未设置密码的用户身份连接

> ID：13369626
> 
> 赞同：5
> 
> 时间：2012-11-13T22:03:24.187
> 
> 标签：java, linux, postgresql, jdbc

我正在尝试`PostgreSQL`通过 JDBC 驱动程序连接到 Ubuntu 10.10 中的 8.4 DB。我正在通过连接，`jdbc:postgresql:localhost:5433/dbname`因为 PostgreSQL 在非默认端口 5433 上运行，所以我必须指定端口。

我已经编辑了我`postgresql.conf`的设置`listen_addresses = "*"`。我知道即使它是本地主机，它仍然使用 TCP/IP 通过 JDBC 连接。

我的问题是我创建了一个没有密码的用户。如果我没有使用 指定密码`DriverManager.connect(url)`，则会出错，表明我需要指定密码进行身份验证。我尝试的每个密码（包括空字符串）都无法通过数据库进行身份验证。

我该如何连接？

编辑：如果通过错误的端口连接，错误是：PSQLException：连接被拒绝。检查主机名和端口是否正确以及 postmaster 是否接受 TCP/IP 连接。尝试在正确的端口上连接时，我收到 PSQLException: FATAL: password authentication failed for user "user"。这可以通过下面接受的答案来解决。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-14T00:19:20.600

如果您已`pg_hba.conf`设置为要求`md5`身份验证并且用户没有密码，则不会进行身份验证。

```
ALTER USER the_user_name PASSWORD 'give_it_a_password'; 
```

或者，如果您确实必须没有密码，则对该用户/数据库组合使用`ident`或（仅对于本地主机，不安全）身份验证。这通常是个坏主意，最好只设置一个密码。`trust``pg_hba.conf`

演示：

```
$ psql -q -U postgres postgres
postgres=# CREATE USER nopw;
CREATE ROLE

$ psql -h localhost -U nopw postgres
Password for user nopw:               [pressed enter]
psql: fe_sendauth: no password supplied

$ psql -q -U postgres postgres
postgres=# ALTER USER nopw PASSWORD 'test';
postgres=# \q

$ psql -q -h localhost -U nopw postgres
Password for user nopw:            [entered 'test' then pressed enter]
postgres=> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:34:45.440

连接到您的数据库：

```
 import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.SQLException;

    private final String url = "jdbc:postgresql://localhost:5432/dbname";
    private final String driver = "org.postgresql.Driver";
    private final String login = "username";
    private final String password = "";
        private Connection connection = null;
    //...
    try {
    Class.forName(driver);
        connection = DriverManager.getConnection(url,
                login, password);
    } catch (SQLException e) {
        System.out.print(" Unable set the connection!");
    } catch (ClassNotFoundException e) {
        System.out.print(" Unable to load the driver class!");
    } 
```

# c# - 三个 c# 并发队列 - 在需要发生特定操作时如何暂停它们？

> ID：13369633
> 
> 赞同：2
> 
> 时间：2012-11-13T22:03:34.000
> 
> 标签：c#, winforms, locking, queue

我有一个问题，我可以用一些代码示例来帮助我，我觉得提供一些背景知识可能会有所帮助。

我需要创建 3 个队列的引擎（在 C# 中，winforms 中）。3 个队列仅包含一个“动作”对象。动作被扔进引擎，并坚持到“最可用”的队列（基本上是计数最少的队列）。队列几乎在所有时间都可以离散和异步运行而不会造成任何伤害。但是，可能会发生一种“动作”情况，当这种类型的“动作”发生并且确实冒泡到队列的前面时，它必须：

*   等待其他队列停止其当前操作
*   完成当前操作后锁定/暂停它们
*   单独运行 Action 直到完成
*   释放对其他 2 个队列的锁定。

增加的问题是 3 个队列中的任何一个都可以锁定其他 2 个。

有没有人有这方面的经验？

我希望如此，这似乎有点痛苦:-)提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:16:33.713

首先，我不建议使用三个队列。我建议使用一个队列，只读取 3 个不同的任务。我还建议使用`BlockingCollection<T>`( 这只是 a 的包装器，`ConcurrentQueue`因为它更容易使用。

至于其余的，`ReaderWriterLockSlim`（[感谢 Casperah](https://stackoverflow.com/a/13369801/1159478)）应该很容易处理它。Writer 需要独占锁，而 Reader 只锁定其他 writer，这正是您的用例。

```
var queue = new BlockingCollection<Action>();

int numWorkers = 3;
ReaderWriterLockSlim throttler = new ReaderWriterLockSlim();

for (int i = 0; i < numWorkers; i++)
{
    Task.Factory.StartNew(() =>
    {
        foreach (Action nextAction in queue.GetConsumingEnumerable())
        {
            if (mustBeExectutedSerially(nextAction))
            {
                try
                {
                    throttler.EnterWriteLock();
                    nextAction();
                }
                finally
                {
                    throttler.ExitWriteLock();
                }
            }
            else
            {
                try
                {
                    throttler.EnterReadLock();
                    nextAction();
                }
                finally
                {
                    throttler.ExitReadLock();
                }
            }
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T23:01:45.793

这是 Servy 推荐的[单队列方法](https://stackoverflow.com/a/13369824/56778)和Casperah[`ReaderWriterLock`建议的组合](https://stackoverflow.com/a/13369801/56778)。

```
ReaderWriterLockSlim throttler = new ReaderWriterLockSlim();
for (int i = 0; i < numWorkers; i++)
{
    Task.Factory.StartNew(() =>
    {
        foreach (Action nextAction in queue.GetConsumingEnumerable())
        {
            if (mustBeExectutedSerially(nextAction))
            {
                try
                {
                    throttler.EnterWriteLock();
                    nextAction();
                }
                finally
                {
                    throttler.ExitWriteLock();
                }
            }
            else
            {
                try
                {
                    throttler.EnterReadLock();
                    nextAction();
                }
                finally
                {
                    throttler.ExitReadLock();
                }
            }
        }
    });
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T22:14:29.600

似乎 System.Threading.ReaderWriterLock 将为您完成这项工作。

一个正常的任务应该这样做：

```
readerWriterLock.AcquireReaderLock(timeout);
try
{
    RunNormalAction();
}
finally
{
     readerWriterLock.ReleaseReaderLock();
} 
```

高级任务应该这样做：

```
readerWriterLock.AcquireWriterLock(timeout);
try
{
    RunSpecialAction();
}
finally
{
     readerWriterLock.ReleaseWriterLock();
} 
```

您可以根据需要启动任意数量的 ReaderLock，它们将按预期继续运行。当一个 WriterLock 被获取时，所有的 ReaderLocks 都被释放，并且一次只运行一个 WriterLock。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T22:14:30.400

我谦虚的建议：

创建三个对象

```
object threadlock1 = new object();
object threadlock2 = new object();
object threadlock3 = new object(); 
```

每个线程在运行任何操作之前获取一个对象的锁定。

```
lock (threadlock1)  // On thread 1, for example
{ //Run Action } 
```

当 THE 动作到来时，具有 THE 动作的线程必须获得对这三个对象的锁定，从而等待其他线程完成它们的工作，并阻止它们再做任何事情。

```
lock (threadlock1)  // On thread 1, for example
{
 lock (threadlock2)
 {
  lock (threadlock3)
  {
    //Run THE Action 
  }
 }
} 
```

当动作完成时，你释放所有三个锁，一切都恢复正常，每个线程都持有自己的锁，并恢复动作。

# sql - 按灵活间隔划分的分组 sum()

> ID：13369638
> 
> 赞同：3
> 
> 时间：2012-11-13T22:03:57.083
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一些数据如下（这里只有几行示例，`tablesize > n`一千个条目）

```
timestamp         duration

2012-09-30T22:00  10800
2012-10-01T08:00   7200
2012-10-01T15:00   3600
2012-10-01T22:00  10800
2012-10-02T07:00   3600
2012-10-02T14:00  18000 
```

并旨在实现以下目标：

```
date               totalDuration

2012-09-30        21600
2012-10-01        32400 
```

等等。

持续时间应按时间间隔求和，在此示例中，时间间隔从`22:00`每天开始。它是 SQL Server 2008。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:05:57.157

```
select 
    cast(dateadd(hour, -22, date) as date), 
    sum(duration) totalDuration
from yourtable
group by cast(dateadd(hour, -22, date) as date) 
```

但是，您应该注意，`2012-09-30T22:00`并且`2012-10-01T22:00`不应该在同一个“时间框架日”。`2012-09-30T22:00`并且`2012-10-01T21:59`可以在同一天。

将此与具有 1-10 和 10-20 之类的阈值进行比较。10属于哪里？

# java - Windows 上的 JDialog 超出了 Windows 任务栏。任何解决方法？

> ID：13369644
> 
> 赞同：4
> 
> 时间：2012-11-13T22:04:15.333
> 
> 标签：java, windows, swing, taskbar, jdialog

[此问题](https://stackoverflow.com/questions/6422931/why-jframe-hides-taskbar-when-maximized)讨论了 JFrame 扩展到 Windows 任务栏的已知错误。 [错误报告的答案](https://stackoverflow.com/a/6422995/411282)链接（有各种重复）并提供了解决方法。我发现这个问题也适用于 JDialogs。JFrame 解决方法不适用。是否有类似的解决方法可以使 JDialogs 在 Windows 上表现自己？

示例代码：

```
import javax.swing.*;

public class Demo extends JDialog {
    public Demo() {
        setSize(250,12500);
        setVisible(true);
    }
    public static void main(String[] args) {
        new Demo();
    }
} 
```

**编辑：**
看起来这不会在 JDK 中修复。 [此错误报告](http://bugs.java.com/bugdatabase/view_bug.do?bug_id=6798063)以“如果开发人员希望让他们的窗口在屏幕上完全可见，他们应该考虑检查自己的屏幕插图*[如下面的解决方案]*，并以不同的方式重新布局他们的组件，或者调用 pack() 后手动重新调整窗口大小，或使用屏幕插入感知布局管理器*[不像 BorderLayout 和 GridBagLayout 等更常见的布局管理器]*。"

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T01:04:14.570

这将基本上确保对话框“适合”到指定的屏幕，方法是将其移动到指定设备的范围内并缩小它，使其左边缘和下边缘在指定设备的范围内。

这会查看设备边界和插图以计算对话框可以驻留的“安全”区域。

```
public class TestScreenSize {

    public static void main(String[] args) {
        new TestScreenSize();
    }

    public TestScreenSize() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException ex) {
                } catch (InstantiationException ex) {
                } catch (IllegalAccessException ex) {
                } catch (UnsupportedLookAndFeelException ex) {
                }

                Test test = new Test();
                test.setLayout(new BorderLayout());
                test.setVisible(true);
                System.exit(0);
            }
        });
    }

    public class Test extends JDialog {

        public Test() {
            setModal(true);
            setLocation(0, 0);
            setSize(2000, 2000);
        }

        @Override
        public void setBounds(int x, int y, int width, int height) {
            Rectangle bounds = getSafeScreenBounds(new Point(x, y));
            if (x < bounds.x) {
                x = bounds.x;
            }
            if (y < bounds.y) {
                y = bounds.y;
            }
            if (width > bounds.width) {
                width = (bounds.x + bounds.width) - x;
            }
            if (height > bounds.height) {
                height = (bounds.y + bounds.height) - y;
            }
            super.setBounds(x, y, width, height);
        }

    }

    public static Rectangle getSafeScreenBounds(Point pos) {

        Rectangle bounds = getScreenBoundsAt(pos);
        Insets insets = getScreenInsetsAt(pos);

        bounds.x += insets.left;
        bounds.y += insets.top;
        bounds.width -= (insets.left + insets.right);
        bounds.height -= (insets.top + insets.bottom);

        return bounds;

    }

    public static Insets getScreenInsetsAt(Point pos) {
        GraphicsDevice gd = getGraphicsDeviceAt(pos);
        Insets insets = null;
        if (gd != null) {
            insets = Toolkit.getDefaultToolkit().getScreenInsets(gd.getDefaultConfiguration());
        }
        return insets;
    }

    public static Rectangle getScreenBoundsAt(Point pos) {
        GraphicsDevice gd = getGraphicsDeviceAt(pos);
        Rectangle bounds = null;
        if (gd != null) {
            bounds = gd.getDefaultConfiguration().getBounds();
        }
        return bounds;
    }

    public static GraphicsDevice getGraphicsDeviceAt(Point pos) {

        GraphicsDevice device = null;

        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice lstGDs[] = ge.getScreenDevices();

        ArrayList<GraphicsDevice> lstDevices = new ArrayList<GraphicsDevice>(lstGDs.length);

        for (GraphicsDevice gd : lstGDs) {

            GraphicsConfiguration gc = gd.getDefaultConfiguration();
            Rectangle screenBounds = gc.getBounds();

            if (screenBounds.contains(pos)) {

                lstDevices.add(gd);

            }

        }

        if (lstDevices.size() > 0) {
            device = lstDevices.get(0);
        } else {
            device = ge.getDefaultScreenDevice();
        }

        return device;

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:26:37.077

好的，下面没有魔法，但就像 max(a,b) 一样简单：

```
import java.awt.Dimension;
import java.awt.Frame;
import java.awt.Toolkit;

import javax.swing.JDialog;

public class Demo extends JDialog {
   public Demo() {
      super((Frame)null, "Demo" );
      setDefaultCloseOperation( DISPOSE_ON_CLOSE );

      Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
      int width  = Math.min(    250, screenSize.width );
      int height = Math.min( 12_500, screenSize.height );
      pack();
      setSize( width, height );
      setVisible( true );
   }
   public static void main( String[] args ) {
      new Demo();
   }
} 
```

# perl - 导出 PATH 创建冗余路径

> ID：13369647
> 
> 赞同：1
> 
> 时间：2012-11-13T22:04:32.833
> 
> 标签：perl, bash, terminal, environment-variables

我需要将一些 perl 脚本添加到 PATH，但是当我这样做并尝试运行脚本时，它找不到文件。出于某种原因，它使用了冗余路径并且没有找到它。我不知道如何描述这个问题，但代码是不言自明的。

```
[lsk250@murphy portfolio-handout]$ pwd
/home/lsk250/portfolio-handout
[lsk250@murphy portfolio-handout]$ export PATH=$PATH:/home/lsk250/portfolio-handout/ 
[lsk250@murphy portfolio-handout]$ time_series_symbol_project.pl 
env: /home/lsk250/portfolio-handout//home/lsk250/portfolio-handout/get_data.pl: No such file or directory
sh: line 1: 17758 Aborted                 (core dumped) time_series_project _data.in 8 AWAIT 300 ARIMA 2 1 2 2> /dev/null 
```

任何想法`export`我应该使用什么正确的命令来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:20:22.403

导出 PATH 变量的方式没有任何问题，只是您可能已经在那里有了“密码”。

据我所见， get_data.pl 是从 time_series_symbol_project.pl 调用的（或从 time_series_symbol_project.pl 调用的其他脚本等），我会检查它是如何调用的。

也许您还可以查看 PATH 是否在脚本中的某处发生了更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T00:40:33.760

我猜“ `#!`get_data.pl”上的“shebang”行（）和/或文件权限不正确。

# objective-c - 有没有办法将协议缓冲区包装到 Objective-C 中并仍然利用继承？

> ID：13369652
> 
> 赞同：6
> 
> 时间：2012-11-13T22:04:51.340
> 
> 标签：objective-c, protocol-buffers, objective-c++

我想在 iOS 项目中使用协议缓冲区。我试图避免将整个项目变成 Objective-C++ 的惨败，所以我想将 C++ protobuf 类包装成 Objective-C 类。我有几十条 protobuf 消息，虽然我一次成功地完成了一个类，但理想情况下，我想使用继承来最小化重复代码。我是 Objective-C 的新手，我在 10 年里没有使用过我对 C++ 所知甚少的东西，所以这主要是一种沮丧的练习。下面是我如何包装单个消息的示例。

**代码**

.proto：

```
message MessageA {
    optional string value = 1;
} 
```

MessageAWrapper.h：

```
#import <Foundation/Foundation.h>

@interface MessageAWrapper : NSObject

@property (nonatomic) NSString *value;

+ (id)fromString:(NSString *)string;
- (NSString *)serialize;

@end 
```

MessageAWrapper.mm：

```
#import "MessageA.h"
#import "message.pb.h"

@interface MessageAWrapper ()

@property (nonatomic) MessageA *message;

@end

@implementation MessageAWrapper

- (id)init
{
    self = [super init];
    if (self) {
        self.message = new MessageA();
    }
    return self;
}

- (void)dealloc {
    delete self.message;
    self.message = NULL;
}

- (NSString *)value {
    return [NSString stringWithUTF8String:self.message->value().c_str()];
}

- (void)setValue:(NSString *)value {
   self.message->set_value([value UTF8String]);
}

- (NSString *)serialize {
    std::string output;
    self.message->SerializeToString(&output);
    return [NSString stringWithUTF8String:output.c_str()];
}

+ (id)fromString:(NSString *)string {
    MessageA *message = new MessageA();
    message->ParseFromString([string UTF8String]);

    MessageAWrapper *wrapper = [[MessageAWrapper alloc] init];
    wrapper.message = message;
    return wrapper;
}

@end 
```

**目标**

这里有很多代码会重复几十次，其中唯一的变化是包装的类类型（`init`, `dealloc`, `serialize`, `fromString`），所以理想情况下我想把它放在父`ProtobufMesssage`类上。不幸的是，我没有成功完成这项工作，因为我找不到让父类知道其子类正在使用的类的方法，例如在`init`和`fromString`.

**我尝试过的事情**

*   结构
*   模板类
*   空白*

**我遇到的障碍**

*   找不到存储对类/类型的引用的方法
*   .h 文件中不能有任何 C++ 头文件或代码（因为这要求整个项目都是 Objective-C++）
*   难以保持对 protobuf 消息父级（`Message`或`MessageLite`）的引用，因为它们是抽象的

正如我所说，我对 C++ 或 Objective-C 知之甚少。我的大部分经验是使用 Python 和 Java 等更高级的语言（尽管我主要了解基本的 C 语言，如指针）。

这可能甚至不可能吗？我是在错误地接近它还是遗漏了一些明显的东西？任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T20:51:50.090

虽然 Objective C 具有非常强大的自省功能，但 C++ 的局限性更大。您确实有[RTTI](http://en.wikibooks.org/wiki/C++_Programming/RTTI)（运行时类型信息），但它甚至不如 Objective C 对应的强大。

但是，这对您来说可能就足够了。在您的 Objective C++ 类中，您可能会使用 typeid 运算符找到消息对象的类型：

```
if( (typeid(self.message) == typed(foo)){
  //doSomething
else if( (typeid(self.message) == typed(bar)){
  // doSomething else
} 
```

也许最好的选择是添加另一个间接级别。创建一个包含所有协议缓冲区 C++ 类的 Objective C 类层次结构，然后创建另一个使用这些类的 Objective C（可能作为委托）。我相信这可能是一个更好的选择。仅在那些不可避免的情况下使用 C++。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-21T05:46:03.530

我对 C++ 知之甚少，但你不能将 Objective-C 属性声明为 a`Message *`吗？

您已经通过在 .mm 文件中声明属性将 C++ 代码与标头分开，您将遇到的问题是编译器 (`value()`和`set_value()`) 命名的实例方法，并且仅是子类的有效方法。`Reflection`使用该类按名称获取和设置字段可能会有所帮助。以下是谷歌展示的摘录`message.h`：

```
Message* foo = new Foo;
const Descriptor* descriptor = foo->GetDescriptor();

const FieldDescriptor* text_field = descriptor->FindFieldByName("text");
assert(text_field != NULL);
assert(text_field->type() == FieldDescriptor::TYPE_STRING);
assert(text_field->label() == FieldDescriptor::LABEL_OPTIONAL);

const Reflection* reflection = foo->GetReflection();
assert(reflection->GetString(foo, text_field) == "Hello World!"); 
```

您可以创建类型检查和获取或设置值的 Objective-C`-objectForKey:`和`-setObject:forKey:`实例方法（令人困惑的是，在这种情况下的键`MessageAWrapper`是`@"value"`）。您的子类甚至不需要知道 C++ 代码。

您还可以将创建者函数`-init`和`+fromString:`方法分离成类似的东西，`+_createNewInstance`;

```
+(Message*)_createNewInstance{ return new MessageA(); } 
```

允许您的子类`MessageWrapper`重用除创建 C++ 对象之外的所有代码。

# powershell - Powershell将文本连接到变量

> ID：13369656
> 
> 赞同：1
> 
> 时间：2012-11-13T22:05:10.357
> 
> 标签：powershell

我的源文件都位于一个文件夹中，该文件夹的路径包含在名为`$template`. 我需要指定确切的文件名，因为每个文件都去往不同的目的地。

我的目标只是将文件名连接到变量。

例子：

```
$template = "D:\source\templatefiles\" 
```

文件名 1 为：“graphic-183.jpg”

我试过了：

```
Join-Path $template graphic-183.jpg 
```

在 cli 上发出这个似乎可以满足我的要求。

但是现在，除了为每个文件创建一个新变量之外，我如何引用这个连接的文件路径？它不像根据决定文件去向的文件名那样简单地通过列表查找我的方式。

我在玩其他情况，elseIf，但肯定没那么难。

底线是，我只想为每个文件名添加文件夹路径的前缀，并对目标进行硬编码，因为每次运行脚本时它总是相同的。

* * *

## 编辑

我刚刚编辑了这个，因为我忘了提到我是如何尝试使用它的。

在我的脚本中，我打算有这样的行：

`Copy-Item -Path **$template filename.ext** -Destination $destfolder`

这是我试图加入`$template`文件名的上面突出显示的部分。

感谢您的任何建议。

-=布鲁斯·D·迈耶

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T05:53:38.837

也许这就是你想要的？

您可以使用括号就地调用 cmdlet，如下所示：

```
Copy-Item -Path (Join-Path $template filename.ext) -Destination $destfolder 
```

这会导致 PowerShell 从“参数模式”转到“表达式模式”——即，它将`Join-Path`cmdlet 的输出作为表达式返回。

是的，David 和 Ansgar 的建议也很有帮助 - 试试这个以获得完整的路径：

```
(get-childitem $template) | select fullname 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T23:04:57.357

您可以像这样构建路径：

```
$template = "D:\source\templatefiles\"
Copy-Item -Path "${template}filename.ext" ... 
```

但是，我认为大卫的建议可能是解决您问题的更好方法。您可以使用哈希表将文件名映射到目标文件夹并执行以下操作：

```
$locations = @{
  "foo" = "C:\some",
  "bar" = "C:\other",
  ...
}

Get-ChildItem $template | % { Copy-Item $_ $location[$_.Name] } 
```

# .net - System.Net.Caching.HttpRequestCachePolicy 和 CloudBlob.FetchAttributes 之间的冲突

> ID：13369660
> 
> 赞同：2
> 
> 时间：2012-11-13T22:05:13.500
> 
> 标签：.net, c#-4.0, azure, azure-storage

我似乎得到了403：

> HTTP/1.1 403 服务器未能验证请求。确保 Authorization 标头的值正确形成，包括签名。

当我`HttpWebRequest.DefaultCachingPolicy`在 app.config 中使用如下设置时会发生这种情况：

```
<system.net>
 <requestCaching defaultPolicyLevel="Default" isPrivateCache="false">
  <defaultHttpCachePolicy policyLevel="Default"/>
 </requestCaching>
</system.net> 
```

我这样做是因为我有一些我无法控制的遗留代码正在调用我提供的 Blob 存储的 API，就好像它是一个文件系统一样（每个文件最多 58 个相同的调用）。显然这并不理想。使用默认的 HTTP 样式缓存是我想要的一种行为，因为它会导致我的应用程序仅在文件被修改时才下载文件。

该问题似乎每隔一个请求就会发生（例如，当请求被缓存并且服务器正在检查服务器内容是否已更改时，它似乎正在发生）。

失败的请求和成功的请求之间的唯一区别似乎是包含：

```
If-None-Match: "<a blob etag>"
If-Modified-Since: <a date> 
```

我在 github 上查看了 1.7.1 的 .net API（我正在使用）的代码，并假设它没有从 SDK 1.6（我目前使用的）更改，它应该可以正常工作。

非常感谢任何帮助

更新：我写了一些重现代码来帮助：

用途：.NET 4.0、Windows Azure SDK 1.6

```
using System;
using System.Net;
using System.Net.Cache;
using Microsoft.WindowsAzure;
using Microsoft.WindowsAzure.StorageClient;

namespace AzureStorageProb
{
    class Program
    {
        static void Main(string[] args)
        {
            const string accountKey = "<azure storage account key>";
            const string account = "<azure storage account name>";
            const string testBlob = "<blob path to test file>";
            var cloudStorageAccount = 
               new CloudStorageAccount(
                  new StorageCredentialsAccountAndKey(account, accountKey),
                  useHttps: true);
            var cloudBlobClient = cloudStorageAccount.CreateCloudBlobClient();
            HttpWebRequest.DefaultCachePolicy = 
               new HttpRequestCachePolicy(HttpRequestCacheLevel.Default);

            try
            {
                var blob = cloudBlobClient.GetBlobReference(testBlob);
                blob.FetchAttributes();
                blob.DownloadByteArray();
                Console.WriteLine("First attempt worked!");
            }
            catch (StorageClientException ex)
            {
                Console.WriteLine(ex);
            }

            try
            {
                var blob = cloudBlobClient.GetBlobReference(testBlob);
                blob.FetchAttributes();
                blob.DownloadByteArray();
                Console.WriteLine("Second attempt worked!");
            }
            catch (StorageClientException ex)
            {
                Console.WriteLine(ex);
            }
            Console.ReadKey();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T20:23:18.487

所以事实证明罪魁祸首是`BlobRequest.SignRequest(request, creds);`快速浏览文档表明`If-None-Match`和`If-Modified-Since`都用作调用添加的 Authentication 标头计算的一部分。因为这些标头是在 Authentication 标头由 WINInet 计算之后添加的（假设）。无论哪种方式，最终结果都是 Authentication 标头提供的校验和现在无效。从而导致`403 Forbidden`.

解决方法：

*   在本地手动缓存项目
*   修复调用代码（可能是最好的长期解决方案）
*   非常小心地使用其余接口（实验表明这很危险，出于同样的原因，在某些情况下使用“Shared Key Lite”可以解决这个问题）
*   使用常规 WebRequest 获取文件（这意味着您必须通过共享密钥或其他方式将它们公开到 Internet）

我不会说 Azure Blob 存储已损坏......但我会说它不是真正的 RESTful，因为它无法正确遵守 HTTP 语义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:08:10.957

执行失败的原因是计算的签名包括请求日期，以及条件标头（如果匹配，如果不匹配，如果修改后等），以防止重放或中间人攻击。因此，当发送缓存请求时，身份验证失败。目前似乎没有办法连接到默认 HTTP 缓存并更改标头以更新此签名，因此 SharedKey 和 SharedKeyLite 身份验证方案不适用于这种情况。但是，您可以使用 SharedAccessSignatures ( [http://msdn.microsoft.com/en-us/library/windowsazure/ee395415.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee395415.aspx) ) 在一段时间内预先验证给定的 URI。这将不再需要每个请求唯一的签名。

# 例子

```
SharedAccessBlobPolicy policy = new SharedAccessBlobPolicy()
{
     Permissions = SharedAccessBlobPermissions.Read,

     // Add delta to account for clock skew
     SharedAccessStartTime = DateTime.Now.AddMinutes(-5),
     SharedAccessExpiryTime = DateTime.Now.AddMinutes(15)
};

HttpWebRequest.DefaultCachePolicy = new HttpRequestCachePolicy(HttpCacheAgeControl.MaxAge, TimeSpan.FromSeconds(10));
CloudBlockBlob sasdBlob = new CloudBlockBlob(new Uri(rootBlob.Uri.ToString() + rootBlob.GetSharedAccessSignature(policy)));

OperationContext cacheCtx = new OperationContext();
cacheCtx.ResponseReceived += (o, a) => Console.WriteLine("{0} : {1}", a.RequestInformation.HttpStatusCode, a.Response.IsFromCache);

for (int m = 0; m < 100; m++)
{
     sasdBlob.DownloadToStream(Stream.Null, null, null, cacheCtx);
     Thread.Sleep(1000);

     if (m == 10)
     {
          // invalidate data updating properties
          rootBlob.Metadata.Add("hello", "cache");
          rootBlob.SetMetadata();
     }
} 
```

这将输出：

200：错误

200：真

200：真

200：真

200：真

200：真

200：真

200：真

200：真

200：真

200：真

200：错误

200：真

...

我们将在未来寻找更好的方法来公开此功能而无需此类变通方法。

# 读这个！

每当您使用 SharedAccessSignatures 时，您实际上是在 URI 本身内发布密钥。因此，应该遵循一些安全最佳实践。

1.  如果您在 DC 之外或通过可能被监控的链接运行，请使用 HTTPS 来防止恶意行为者滥用签名。
2.  上面的示例计算了一个不绑定到容器 ACL 的简单策略，因此撤销它的唯一方法是轮换存储密钥。请尽可能将 SAS 签名与容器策略相关联。在这种情况下，如果 SAS Uri 曾经被泄露/滥用，您可以通过简单地删除相关容器上的策略来撤销它。有关如何执行此操作的更多信息，请参阅：http: [//msdn.microsoft.com/en-us/library/windowsazure/jj721951.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj721951.aspx)
3.  所有 SAS 流量都计入给定帐户 SLA 和计费，因此仅与受信任的客户端共享 SAS URI。

我希望这会有所帮助，如果您有任何其他问题，请告诉我，

/乔

# r - 绘制 PCA：标记数据点的方法

> ID：13369662
> 
> 赞同：2
> 
> 时间：2012-11-13T22:05:15.133
> 
> 标签：r

我可以使用绘图功能。可以使用 plot 来获得 pca 结果。但不确定如何根据`rownames(Sample)`编号为 1 到 90的数据点标记这些点

```
Sample<-read.table(file.choose(),header=F,sep="\t")
Sample.scaled<-data.frame(apply(Sample_2XY,2,scale))
Sample_scaled.2<-data.frame(t(na.omit(t(Sample_2XY.scaled))))

pca.Sample<-prcomp(Sample_2XY.scaled.2,retx=TRUE)

pdf("Sample_plot.pdf")
plot(pca.Sample$x)
dev.off() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T22:08:48.333

这是一种简单的方法，绘制前两个组件：

```
plot( pca.Sample$x[,1], pca.Sample$x[,2] )
text( pca.Sample$x[,1], pca.Sample$x[,2], rownames( Sample ), pos= 3 ) 
```

顺便说一句，您可以使用常规设备随时随地查看绘图，然后将该设备的内容复制到 PDF：

```
dev.copy2pdf( file= "something.pdf" ) 
```

# mysql - MySQL：尽可能删除重复的行

> ID：13369663
> 
> 赞同：0
> 
> 时间：2012-11-13T22:05:16.047
> 
> 标签：mysql

我输入了一个查询，在我的数据库中引入了一些重复项。桌子是直的。

它有一个 id (int) 列和一个短语列，即 varchar(255)。为了查找重复项，我的查询如下所示：

`SELECT phrase from foo GROUP BY phrase HAVING (count(phrase) > 1)`

我的问题是，如何删除重复条目而无需手动操作？我想使用上面的查询来生成至少需要删除一次的条目列表。这样，表 foo 中只存在一个版本的“短语”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:10:14.130

这将在每个短语中保留一行（ID 最低的那一行）。

```
DELETE FROM foo
WHERE id NOT IN (
    SELECT id FROM (
        SELECT MIN(id) id
        FROM foo
        GROUP BY phrase
    ) _
); 
```

正如 dan 在评论中指出的那样，使用 MySQL，您需要那个奇怪的内部查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:07:42.630

你应该使用：

```
SELECT max(id) from foo GROUP BY phrase HAVING (count(phrase) > 1) 
```

确定需要删除哪些 id。

要删除条目，您可以执行以下操作：

```
delete from foo where id in (select id from (SELECT max(id) from foo GROUP BY phrase HAVING (count(phrase) > 1)) foo); 
```

您将能够多次执行 delete 语句，以删除超过一个的重复项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:12:39.613

您需要创建一个临时表，添加唯一值，仅添加一个重复值，然后将临时表重命名为原始表。

```
create table tmp like foo;

alter table tmp add unique (phrase);

insert into tmp select * from foo 
    on duplicate key update phrase=ifnull(phrase, values(phrase));

rename table foo to deleteme, tmp to foo;

drop table deleteme; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T22:13:32.317

您可以执行 JOIN 并决定是要删除第一个（最小）还是最后一个（最大）重复项。

```
DELETE phrase FROM phrase JOIN 
(SELECT max(id),COUNT(id) cnt from foo GROUP BY phrase 
HAVING cnt>1) AS dups 
ON phrase.id=dups.id 
```

如果每条记录有超过 1 个重复项，则需要多次运行它。

# ruby - 以编程方式测试任意用户是否有权访问任意文件

> ID：13369667
> 
> 赞同：1
> 
> 时间：2012-11-13T22:05:36.047
> 
> 标签：ruby, bash, rspec

我希望能够编写说明用户`soandso`可以读取或编辑文件的测试或规范`such_and_such`。虽然我最终希望它出现在 RSpec 中，但我假设它要么全部归结为 Bash 命令（当然，整齐地包装在 Ruby 方法中），因为它似乎在 Ruby 的 File 类中不可用，或者我看过的其他任何东西。我一直在寻找 Bash 中的东西来做到这一点，但找不到任何东西（而且 File 类中的任何东西看起来也没有用）。（注意： File.owned?*没有*做我想做的事，因为它只测试运行 Ruby 代码的进程是否是所有者，而不是任何任意用户有权编辑或阅读，所以它在两个方面有很大不同。）

有没有办法做到这一点，内置在 Bash 中？（或者 Ruby，或者我错过的一些 Ruby gem？）或者我是否需要自己构建一个系统，通过获取文件的所有者和组信息，以及读取、写入和执行每个位，然后查找组成员（如果`so_and_so`不是所有者），并查看是否`soandso`可以通过所有权或组成员资格获得所需的权限？

我目前只关心在类 Unix 系统上执行此操作，尽管不依赖于也可以在 Windows 上运行的 Unix shell 的东西将是一个不错的奖励。

另外，我对测试*实际*文件很感兴趣，所以像 FakeFS 这样的东西（据我所知）对我没有用。我不是在尝试测试我的 Ruby 代码如何与文件系统交互，而是在尝试验证是否可以对实际文件和目录执行所有必要的操作。（再次，）我希望能够指定`soandso`可以编辑（或读取）文件`such_and_such`，而***不是***指定文件`such_and_such`归`soandso`. 重点***不是***指定所有权（因为这是一个实现细节，可能需要更改以适应其他要求，例如安全性），而只是指定我的应用程序和用户*实际上*需要能够对文件系统执行的操作/在文件系统中执行的操作.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:21:11.670

如果运行您的 Ruby 脚本的用户具有必要的权限，您可以尝试使用`sudo`.

```
sudo -u soandso test -r such_and_such 
```

`-r`测试可读性，`-w`可写性。返回码是`0`测试是否通过。

顺便说一句，我认为由于您正在寻找的功能只能供超级用户使用（因为确定其他人是否有足够的权限至少需要您具有读取权限），所以它是有道理的在 Ruby File 类中不容易获得。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:19:31.923

我还没有尝试过，但我想知道 FileTest 方法是否会像他们所说的那样对“有效用户 ID”进行操作。

```
File.readable?(file_name) → true or false Link
Returns true if the named file is readable by the effective user id of this process.
File.writable?(file_name) → true or false Link
Returns true if the named file is writable by the effective user id of this process. 
```

与 seteuid 结合使用可能会奏效。

```
Process::Sys.seteuid(integer) → nil Link
Set the effective user ID of the calling process to integer. Not available on all platforms. 
```

还有`setegid`团体的东西......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T23:03:27.593

### 使用 File::Stat 和 Etc 模块解析权限

虽然这不是一个预先打包的解决方案，但您应该能够检查一个给定的文件，在该文件中您有足够的*stat*访问权限，以便获取模式、uid 和 gid 信息。然后，您可以解析*/etc/passwd*和*/etc/group*以确定给定用户是否有足够的权限。

一些构建块包括：

```
# Get the file's octal mode.
File.stat('/etc/passwd').mode.to_s(8)
#=> "100644"

# Get the group ID assigned to the file.
File.stat('/etc/passwd').gid
#=> 0

# Get the username associated with the given GID.
Etc.getpwuid(0).name
#=> "root" 
```

您还可以使用*id*实用程序来获取有关给定用户的信息。例如：

```
%x{id root}
#=> "uid=0(root) gid=0(root) groups=0(root)\n" 
```

*但我认为使用标准库而不是解析id*的输出会更容易。YMMV。

# c++ - 将#define'd char* 转换为枚举值

> ID：13369671
> 
> 赞同：1
> 
> 时间：2012-11-13T22:05:48.323
> 
> 标签：c++

在我无法编辑的标题中，我有以下定义：

```
#define ENUM_SOMETHING_A "A"
#define ENUM_SOMETHING_B "B"
#define ENUM_SOMETHING_C "C" 
```

我想将这些包装在一个枚举中，类似于：

```
enum Something {
    A = ENUM_SOMETHING_A,
    B = ENUM_SOMETHING_B,
    C = ENUM_SOMETHING_C
}; 
```

其中Something::A 是ENUM_SOMETHING_A 的十进制ASCII 值，依此类推。

我已经尝试了几种方法，但我无法弄清楚如何做到这一点。有可能吗，如果可以，我该如何完成？同样，#defines 不能更改。

我尝试了投射，也尝试了 ENUM_SOMETHING_A[0]，但都没有成功。另外 - 这不是 C++0x。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T22:11:06.357

枚举值不能是字符串，因此在这里使用枚举并不合适，除非您想添加一个额外的机制来将枚举值映射到对应的字符串。但是，您可以执行以下操作：

```
// Header
typedef char const * Something_value;

namespace Something
{
    Something_value const A;
    Something_value const B;
    Something_value const C;
} 
```

* * *

```
// Implementation
namespace Something
{
    Something_value const A = ENUM_SOMETHING_A;
    Something_value const B = ENUM_SOMETHING_B;
    Something_value const C = ENUM_SOMETHING_C;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:11:30.507

你不能。`enum`必须使用整数常量来定义。A`char*`根据定义不是整数常量。

您可以做的最好的事情是将常量映射到等效`char`值（您可以根据自己的喜好进行算术调整）：

```
#define MY_ENUM_SOMETHING_A (ENUM_SOMETHING_A[0]) /* 65 */
#define MY_ENUM_SOMETHING_B (ENUM_SOMETHING_B[0]) /* 66 */
#define MY_ENUM_SOMETHING_C (ENUM_SOMETHING_C[0]) /* 67 */ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T22:16:36.313

你不能在语言中做到这一点。但是，您*可以*编写一个 shell 脚本，从您无法编辑的标题中生成所需的枚举。它看起来像这样：

```
#! /bin/sh
# usage: define2enum input output

set -e
exec > "$2"
echo 'enum Something {'
sed -ne 's/^#define ENUM_SOMETHING_\([A-Za-z0-9][A-Za-z0-9]*\) "\(.\)"$/    \1 = '\''\2'\'',/p' < "$1"
echo '};' 
```

# schema - 未知列的 RDBMS 模式

> ID：13369676
> 
> 赞同：0
> 
> 时间：2012-11-13T22:06:04.577
> 
> 标签：schema, rdbms

我有一个带有 MySQL 数据库的项目，我希望能够上传各种数据集。假设我正在建立一个餐厅评论聚合器。因此，我们希望继续添加我们可以获得的所有餐厅评论来源，并保留所有信息。

我有一张桌子 review_sources

```
=========================
| id | name             |
=========================
| 1  | Zagat            |
| 2  | GoodEats Magazine|
| ...                   |
| 50 | Allergy News     |
========================= 
```

现在说我有一张桌子评论

```
=====================================================================
| id | Restaurant Name      | source_id | Star Rating | Description |
=====================================================================
| 0  | Joey's Burgers       | 1         | 3.5         | Wow!        | 
| 1  | Jamal's Steaks       | 1         | 3.5         | Yummy!      |
| 2  | Jenny's Crepes       | 1         | 4.5         | Sweet!      |
| ....                                                              |
| 253| Jeeva's Curries      | 3         | 4           | Spicy!      |
===================================================================== 
```

现在假设有人想添加“过敏新闻”的评论，他们有一个“无坚果”字段。或者评论来源可以描述 kashrut 合规程度、清真合规性或素食友好程度。作为设计师，我不知道未来数据源可能具有的可选字段。我希望能够回答查询：

*   Zagat 评论中的所有字段是什么？
*   对于评论 id=x，可选字段“vegan-friendly”的值是多少？

那么如何设计一个可以处理这些不同数据源并回答这些查询的模式呢？我不使用 NoSQL 的原因是我确实想要某些类型的规范化，并且这是现有的基于 MySQL 的项目的一部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:16:56.577

我将使用多对多关系与包含 a `review_id`、 a `field`（例如“素食主义者”）和字段值的表。然后当然是一个reviews_fields 表来将一个映射到另一个。

干杯

# mysql - 使用 sum 的 mysql 不同查询

> ID：13369681
> 
> 赞同：2
> 
> 时间：2012-11-13T22:06:35.283
> 
> 标签：mysql, database

我正在尝试构建一个查询，该查询将给出每天 3 个泵移动的水的总和。

所有值都是每个泵的总和

问题是最终结果应该是（泵 1 + 泵 2）- 泵 3。我正在使用的查询是：

```
SELECT DISTINCT(date_time), SUM(rec_value) 
FROM
rec_address_change 
WHERE (address_id = 7 OR address_id = 11 OR address_id = 15) 
GROUP BY date_time ORDER BY date_time; 
```

目前这只是给出了每天所有 3 个泵的总和

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:10:34.207

```
SELECT date_time, sum(
    CASE WHEN address_id in (7,11) then rec_value
         ELSE -rec_value END)
from rec_address_change 
WHERE address_id IN (7,11,15) 
GROUP BY date_time
ORDER BY date_time; 
```

# python - 来自 pandas 的 DataFrame 对象是否取代了异构数据类型的其他替代方案？

> ID：13369684
> 
> 赞同：9
> 
> 时间：2012-11-13T22:06:53.960
> 
> 标签：python, numpy, scipy, pandas

以前，NumPy 中有[larry](https://github.com/kwgoodman/la)和[结构化/记录数组](http://docs.scipy.org/doc/numpy/user/basics.rec.html)，但我想知道鉴于包的快速发展，它们是否会以任何频率被使用`pandas`。来自 R，我总是会遇到不得不解压缩记录数组以修改多列中的值并将它们重新分配回结构中的问题，但我很高兴`pandas`现在允许它的数据帧这样做。我想知道记录数组是否还有任何用途（它是否有一些没有的有用方法`pandas`）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T23:13:27.013

这是 pandas 和 numpy 记录数组之间的一个很好的解释和简单的比较 - [Normalize/Standardize a numpy recarray](https://stackoverflow.com/questions/9775765/normalize-standardize-a-numpy-recarray/9776155#9776155)

# .net - 如何将时区分配给 DateTime？

> ID：13369685
> 
> 赞同：-1
> 
> 时间：2012-11-13T22:06:56.987
> 
> 标签：.net, datetime, timezone, dst

我正在以字符串的形式获取日期/时间值，并将其转换为`DateTime`对象。

```
eg. 2012-11-10 11:37:06 
```

我知道这个时间与我系统的本地时间不同。

如何为`DateTime`对象分配时区，以便我可以准确地表示本地时区的时间并对夏令时变化敏感？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:17:51.760

[TimeZoneInfo.ConvertTimeToUtc](http://msdn.microsoft.com/en-us/library/bb495915%28v=vs.90%29.aspx)可能会做你想做的事。

通过这种方式，您可以转换（在导入时）并将所有时间存储为[UTC](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)（假设您知道原始时间关联的时区夏令时偏移等），然后在任何时区显示它们。`DateTime`我已经链接到同时接受一个对象和一个对象的重载方法`TimeZoneInfo`。

还有其他方法`TimeZoneInfo`也可用于此类转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:21:07.510

A`DateTime`不是时区，也不完全*知道*时区。它有一个`Kind`，表示它是在系统时区 ( `Local`)、UTC ( `Universal`) 还是“其他”( `Unspecified`) 中。

有`DateTimeOffset`, 类似于 a`DateTime`但也与 UTC 有偏移。不过，这与拥有时区不同——它不知道在任何其他时间点的当地时间。

我有偏见，但我建议使用具有各种类型的[Noda Time来表示不同的概念：](http://noda-time.googlecode.com)

*   `ZonedDateTime`- 特定时区的本地日期/时间，与 UTC 有偏差，以防出现歧义
*   `OffsetDateTime`- 与 UTC 有偏移的本地日期/时间（但没有特定时区）
*   `LocalDateTime`- 只是一个本地日期/时间，没有特定的时区或偏移量
*   `LocalDate`- 没有时间成分或区域的日期
*   `LocalTime`- 只是一个日期时间，没有日期或区域

所有这些还具有关联的日历系统（与 不同`DateTime`）。在一瞬间，`Instant`这只是 Unix 时代的一些滴答声。

如果你想坚持 BCL 类型，你可以在你自己的数据类型中保留`DateTime`a 。`TimeZoneInfo`

# php - 使用 md5 加密文件名

> ID：13369690
> 
> 赞同：0
> 
> 时间：2012-11-13T22:07:26.187
> 
> 标签：php, javascript, linux, md5, filenames

通常，密码在网站上使用 MD5 编码。我也在考虑将用户名编码为 MD5 中的文件名。我会在基于 Linux 的服务器上使用 PHP。用 PHP 加密文件名到 MD5 除了不解密无法区分之外，还有什么缺点吗？

```
<? php 
if(isset($_POST['register'])){
    $username = md5($_POST['username']);
    $email = htmlentities($_POST['email'], ENT_QUOTES|ENT_XML1);
    $password = $_POST['password'];
    $c_password = $_POST['c_password'];

    $xml = new SimpleXMLElement('<user></user>');
    $xml->addChild('password', md5($password));
    $xml->addChild('email', $email);
    $xml->asXML('users/'.$username . '.xml');

    header('Location: validate.php');
    die;
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:13:33.320

正如 H2C03 提到的，MD5 已损坏（请参阅评论中的链接。）还有以下因素需要考虑：

1.  任何能破解用户名的人都能破解密码，反之亦然，所以你一无所获
2.  这将使编写大量用户管理查询和代码成为一场彻头彻尾的噩梦
3.  散列密码之所以有价值，是因为（理想情况下）没有办法将明文取回。为了使您的站点正常工作，您需要包含将用户名解密为明文的代码，并且已经在您系统上的黑客如果他有任何好处，只需在您的解密例程中添加一些代码以转移明文密码当人们使用您的网站时。

**执行摘要：**即使在使用现代加密算法时，也需要大量额外的工作和可疑的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T23:45:00.640

您使用的任何 Linux 文件系统都可以接受文件名中的任何字符，目录分隔符除外。那么，为什么不将任何 / 字符替换为其他字符，或者更好的是，拒绝使用包含 / （可能还有任何其他不可打印字符）的用户名进行注册的任何尝试？“哦，但是碰撞呢”？如果你使用散列算法，你并没有消除冲突的可能性，你只是在减少它的同时增加了无用的计算复杂性。要生成唯一标识符，请使用递增值（如 Unix 使用“用户 ID”）或仅生成 uuid： http: [//php.net/manual/en/function.uniqid.php](http://php.net/manual/en/function.uniqid.php) - 并将该映射存储在一个数据库。

维护用户名到 ID 的映射是其他人所做的事情，这是有原因的。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:31:57.780

看起来您只使用 md5 将用户名映射到文件名。没有错，这是一种常见的单向哈希算法。

我不会用它来加密密码。

# solr - 在 Solr 中的同一过滤器上过滤两个不同的日期

> ID：13369691
> 
> 赞同：0
> 
> 时间：2012-11-13T22:07:26.717
> 
> 标签：solr, lucene

在 Solr 中，如果您有一条索引数据，并且在该数据中您有一组日期值，您如何查询索引并询问 X 和 Y 日期之间的事件？

例如，如果我有一个 Event Venues 列表，每个 Event Venues 都有几十个事件（单天、全天或多天），您将如何构建过滤器以返回事件在指定的开始日期和结束日期之间的场地搜索？

现在，如果我在表单中搜索并将其提交给 Solr，查询字符串如下所示：

```
&fq=dm_event_start_date\:value:["2013-01-04T05:00:00Z" TO *]
&fq=dm_event_end_date\:value:[* TO "2013-01-08T05:00:00Z"]
&fq=bm_tickets_left\:value:"TRUE" 
```

我真正想问的是在 1 月 4 日发生或开始的事件，不要持续到 1 月 8 日之后，而且还有票。

我觉得我得到的回报是任何介于两个日期之间的事件，或者有可用的门票 - 不一定与日期匹配。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T04:26:14.273

日期字段值可能需要超出范围查询中的引号，例如：-

```
&fq=dm_event_start_date:value:[2013-01-04T05:00:00Z TO *]
&fq=dm_event_end_date:value:[* TO 2013-01-08T05:00:00Z]
&fq=bm_tickets_left:value:true 
```

也`bm_tickets_left`需要只是字符串值。

# asp.net - 下拉菜单没有选择正确的项目

> ID：13369698
> 
> 赞同：0
> 
> 时间：2012-11-13T22:07:56.943
> 
> 标签：asp.net

我使用 asp.net 和 vb.net 作为后面的代码。我有下拉框。它将在页面加载时填充值列表。我有来自网络服务的数据。arrdata 由 Web 服务数据组成。

```
If IsNothing(arrData(12)) Then
  DropDownList_mylist.Items.Add(New ListItem("Choose"))
  DropDownList_mylist.SelectedIndex = DropDownList_mylist.Items.IndexOf(DropDownList_mylist.Items.FindByText("Choose"))
Else
  DropDownList_mylist.SelectedIndex = DropDownList_mylist.Items.IndexOf(DropDownList_mylist.Items.FindByText(arrData(12)))
End If 
```

问题是，它给出了第一个项目。不是正确的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:09:55.710

如果列表中已有项目，请使用 AppendDataBoundItems 属性并将其设置为 true。

类似的问题在这里：

[绑定到对象数据源的下拉列表 - 如何在按钮单击时更新](https://stackoverflow.com/questions/2963255/dropdown-list-bound-to-object-data-source-how-to-update-on-a-button-click)

# c# - 在没有 2 个视图的情况下更改 EditorForModel 生成的 html 布局

> ID：13369699
> 
> 赞同：0
> 
> 时间：2012-11-13T22:07:56.823
> 
> 标签：c#, asp.net-mvc-4, editorformodel

我渲染我的 ViewModel

创建.cshtml：

```
@using (Html.BeginForm("Create","TestTemplate")) {      

    @Html.EditorForModel()
} 
```

我不喜欢输出内容，因为所有 div 都在另一个之下。如果我想要一个水平布局，其中一个 div 向左浮动到另一个 div 怎么办？

当我的 Create.cshtml 视图中没有 html 时，如何使用 EditorForModel() 帮助程序修改此类布局更改？

更新：

为什么我必须创建两个视图。在我在另一个 EditorTemplate-view 中调用 @Html.EditorForModel() 的那个中，我做了所有的布局工作，我也可以通过 EditorFor( x => x....) 在第一个视图中做这些工作？这对我来说似乎很奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T12:01:00.270

您想创建一个[EditorTemplate](http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/)。基本上创建一个名为`EditorTemplates`in的新文件夹`~/Views/Shared`，然后在该文件夹中创建一个具有模型名称的新视图，例如`Template.cshtml`或其他名称。

当你调用`@Html.EditorForModel()`它时，它将使用这个视图作为模板。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T12:16:34.313

这个问题已经很老了，但在我看来，还有另一种方法应该提到。尽管 MVC 不是 MVVM，但请尝试在该模式中多思考一些。由于生成的 HTML 只不过是页面的内容，因此它将在浏览器中用作视图模型。格式化页面不是 HTML 的工作。尝试使用 CSS 来修改页面的布局，这将用于在浏览器中呈现视图。

只需使用如下 CSS 选择器来更改表​​单的布局、输入元素或仅更改特定的输入元素：

```
form { your CSS here }
form input { your CSS here }
form input[name="NameOfInput"] { your CSS here } 
```

在这些日子里，CSS 的力量几乎是无限的：让您的项目向左、向右或交替流动等等；-) 您也不需要创建两个视图。

# ember.js - Ember 数据覆盖外键约定

> ID：13369700
> 
> 赞同：0
> 
> 时间：2012-11-13T22:07:59.647
> 
> 标签：ember.js, ember-data

我正在尝试使用 findAll 将 json 数据加载到以下模型中：

```
App.Territory = DS.Model.extend({
    name: DS.attr('string'),
    code: DS.attr('string'),
    regionId: DS.attr('string')
}); 
```

实际创建模型时，转换回 JSON 显示它有 region_id 的引用，它为 null，但没有 regionId。有谁知道覆盖此默认约定的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T15:12:01.787

确定是正在调用的 RESTSerializer 上的 keyForAttribute 方法`Ember.String.decamelize(name)`形成了密钥。我可以通过添加以下行来解决这个问题：

```
App.store.adapter.serializer.keyForAttributeName = function (type, name) {
  return name;
} 
```

# javascript - 检查 xy[i] 是否匹配没有 forloop 的数组的任何元素

> ID：13369703
> 
> 赞同：0
> 
> 时间：2012-11-13T22:08:07.513
> 
> 标签：javascript, match

> **可能重复：**
> [JavaScript 中的 array.contains(obj) 在](https://stackoverflow.com/questions/237104/array-containsobj-in-javascript)
> [不使用循环的情况下查找数字数组中的一项](https://stackoverflow.com/questions/6809917/finding-an-item-of-an-array-of-numbers-without-using-a-loop)

我想知道是否可以在不使用 JavaScript 循环的情况下检查 xy[i] 是否匹配数组的任何元素？. 举个例子好吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:23:58.877

您可以使用循环或使用使用循环的函数。

一些库，如 jQuery，提供自己的函数（使用循环）。

使用循环并不是一件坏事。

您可以通过将循环放入函数中来保持代码漂亮（且有条理）。

```
var stringArray = [ "one", "two", "three" ];
var searchTerm = "two";

if (contains(stringArray, searchTerm)) {
    alert("found it");
}

function contains(someArray, someTerm) {
    for (var i = 0; i < someArray.length; i++) {
        if (someArray[i] === someTerm) {
            return true;
        }
    return false;
} 
```

# razor - @Html Image helper 将图像显示为 html 代码

> ID：13369706
> 
> 赞同：0
> 
> 时间：2012-11-13T22:08:19.687
> 
> 标签：razor, html-helper, google-visualization

我在这里查看示例：

[http://tinyurl.com/au3vydl](http://tinyurl.com/au3vydl)

此示例使用帮助程序使用 razor 显示 google 图形图像：

`@Html.DrawChart("p", "40,60,40", "250x100", "Pie Chart")`

此方法组装正确的代码以返回图表：

`<img src='http://chart.apis.google.com/chart?chs=250x100&amp;chd=t:40,60,40&amp;cht=p&amp;chl=Pie Chart' />`

但是在浏览器中，这显示为 html 代码，而不是实际图像。如果我将助手输出的完全相同的代码复制到视图中，它会显示得很好。是否需要将@Html.Helper 的输出更改为代码而不是文字字符串？

帮助代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Text;
using System.Web.Mvc;

namespace SolarCars.Helpers
{
    public static class GoogleChart
    {
        /// <summary>
        /// Draws the chart.
        /// </summary>
        /// <param name="helper">The helper.</param>
        /// <param name="chartType">Type of the chart.</param>
        /// <param name="chartData">The chart data.</param>
        /// <param name="chartSize">Size of the chart.</param>
        /// <param name="chartLabel">The chart label.</param>
        /// <returns></returns>
        public static string DrawChart(this HtmlHelper helper, string chartType, string chartData, string chartSize, string chartLabel)
        {
            StringBuilder chartHtml = new StringBuilder("<img src='http://chart.apis.google.com/chart?chs=");
            chartHtml.Append(chartSize);
            chartHtml.Append("&amp;chd=t:");
            chartHtml.Append(chartData);
            chartHtml.Append("&amp;cht=");
            chartHtml.Append(chartType);
            chartHtml.Append("&amp;chl=");
            chartHtml.Append(chartLabel);
            chartHtml.Append("' />");

            return chartHtml.ToString();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:25:04.253

如果您在 @ 或 <%: 块中返回字符串，则结果将自动转义。这是（我认为）MVC1 和 MVC2 之间的变化。解决方案是让您的帮助方法返回 IHtmlString 的实例。

```
public static IHtmlString DrawChart(...) 
```

然后切换你的 return 以返回一个新的[HtmlString](http://msdn.microsoft.com/en-us/library/system.web.htmlstring.aspx)

```
return new HtmlString(chartHtml.ToString()); 
```

# css - 为什么我的利润仍然在崩溃？

> ID：13369708
> 
> 赞同：1
> 
> 时间：2012-11-13T22:08:24.027
> 
> 标签：css, margin

我在这个[“小提琴”](http://jsfiddle.net/gKeEF/1/)中的代码显示我有相邻的元素，这些元素的垂直边距正在相互折叠。我知道由于 css 中垂直边距的性质，选择了两者中最大的一个，在我的例子中是 p 标签。

我遇到的问题是尝试使用 1px 边框或 1px 填充来打破边距。我已经看到它可以与其他解决方法一起使用，例如`position:absolute`or`float`方法。我不明白为什么使用 1px 边框或填充不能正常工作给我 15px 的空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:58:32.070

有一些技术可以防止边缘塌陷。您谈到了其中两个：绝对位置和浮动。此外，您可以使用`display: inline-block`您的`p`标签。在[本指南](http://www.complexspiral.com/publications/uncollapsing-margins/)中，我找到了仅适用于嵌套元素的边框和填充的解决方案。而且，当然，您可以使用非常大的边框而不是边距 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:31:59.337

您是否希望在 p 或 div 上使用边框或背景？如果没有，请在您的一种或两种样式中使用填充。填充不会像边距那样折叠。

```
p {
    padding-bottom: 10px;
}
div {
    padding: 1px;
    margin-top: 5px;
}​ 
```

如果您确实包含边框或背景，则使用填充可能不会给出您想要的外观，因为边框在填充之外并且背景包括填充区域。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-13T22:19:42.967

要使它们彼此相邻显示，请更改以下内容：

```
p {
    margin-bottom: 10px;
    display:inline;
}

div {
    padding: 1px;
    margin-top: 5px;
    display:inline;
}​ 
```

# git - 如何在git的另一个分支下创建一个分支？

> ID：13369712
> 
> 赞同：2
> 
> 时间：2012-11-13T22:08:30.520
> 
> 标签：git, branch

我只是好奇，因为我注意到一些存储库的分支设置如下：

```
git branch -a

master
remotes/origin/branch1
remotes/origin/branch2/lala
remotes/origin/branch2/yay
remotes/origin/branch3
remotes/origin/branch4 
```

我只是好奇他们是如何在分支`lala`和分支`yay`2下做的；或者那不是一个分支？

有什么见解吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T22:15:40.783

`branch2/lala`and`branch2/yay`分支并不是真正“在”名为`branch2`. 每个只是一个普通分支，其名称恰好包含一个`/`.

```
:; cd /tmp
:; mkdir gittest
:; cd gittest
:; mkdir origin
:; cd origin
:; git init
Initialized empty Git repository in /private/tmp/gittest/origin/.git/
:; touch somefile
:; git add somefile
:; git commit -m 'initial commit'
[master (root-commit) 4d62ed7] initial commit
 0 files changed
 create mode 100644 somefile
:; git branch branch1
:; git branch branch2/lala
:; git branch branch2/yay
:; git branch branch3
:; git branch branch4
:; git branch -a
  branch1
  branch2/lala
  branch2/yay
  branch3
  branch4
* master

:; cd ..
:; git clone origin local
Cloning into 'local'...
done.
:; cd local
:; git branch -a
* master
  remotes/origin/HEAD -> origin/master
  remotes/origin/branch1
  remotes/origin/branch2/lala
  remotes/origin/branch2/yay
  remotes/origin/branch3
  remotes/origin/branch4
  remotes/origin/master 
```

# c# - 通过点击 WatiN 中的 Element collection by class 进行解析

> ID：13369720
> 
> 赞同：0
> 
> 时间：2012-11-13T22:08:53.680
> 
> 标签：c#, xpath, foreach, watin

我在这个网站上使用**WatiN ：** [http](http://www.mcmaster.com/#socket-head-cap-screws/=k5c5q8) ://www.mcmaster.com/#socket-head-cap-screws/=k5c5q8 我试图通过单击每个 h3 标签的类名来循环浏览每个页面。页面上没有href，我相信当点击h3时页面使用javascript加载下一页。

到目前为止，这是我的代码：

```
 types = doc.DocumentNode.SelectNodes("//h3[@class='AbbrPrsnttn_PrsnttnNm']");
         foreach (HtmlNode type in types)
               {

                desc = type.InnerText.CleanText();

                browser.div(Find.ById("ProdPrsnttnGrpCntnr")).Element(Find.ByClass("AbbrPrsnttn_PrsnttnNm")).Click();                        
                System.Threading.Thread.Sleep(5000);
                types = doc.DocumentNode.SelectNodes("//h3[@class='AbbrPrsnttn_PrsnttnNm']");
                doc2.LoadHtml(browser.Html);
                partTable = doc2.DocumentNode.SelectSingleNode("//div[@class='ItmTblGrp']");

                MineNext(doc, doc2, browser, typeUrl, types, desc, partTable);

                } 
```

最重要的线是

```
browser.div(Find.ById("ProdPrsnttnGrpCntnr")).Element(Find.ByClass("AbbrPrsnttn_PrsnttnNm")).Click(); 
```

当我运行此代码时，它会单击“Abb​​rPrsnttn_PrsnttnNm”的第一类，但是一旦我迭代回到此页面，它就会尝试再次加载名称为“Black-Oxide Alloy Steel”的相同元素。它会一遍又一遍地加载它，因为它不知道如何区分具有相同类名的其他 H3。有没有办法**收集这些元素**，然后在集合中运行一个**foreach 循环并使用****WatiN**单独单击每个元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:18:10.040

谢谢大家没有回答这个问题，因为它让我自己弄清楚。给了我我在工作中感受到的最大感觉。

```
 var h3s = browser.Div(Find.ById("ProdPrsnttnGrpCntnr")).ElementsWithTag("h3").ToArray();
                    for (int i = 1; i < h3s.Count(); i++)
                    {
                        h3s[i].Click();
                        System.Threading.Thread.Sleep(5000);
                        types = doc.DocumentNode.SelectNodes("//h3[@class='AbbrPrsnttn_PrsnttnNm']");
                        doc2.LoadHtml(browser.Html);
                        partTable = doc2.DocumentNode.SelectSingleNode("//div[@class='ItmTblGrp']");

                        MineNext(doc, doc2, browser, typeUrl, types, desc, partTable);
                        h3s = browser.Div(Find.ById("ProdPrsnttnGrpCntnr")).ElementsWithTag("h3").ToArray();
                    } 
```

# c# - 在浏览器和代码中调用 REST Web 服务会产生不同的结果

> ID：13369725
> 
> 赞同：2
> 
> 时间：2012-11-13T22:09:26.163
> 
> 标签：c#, .net

我正在调用一个 REST Web 服务，该服务执行 GET 以获取一些附件数据。它采用的参数是**SRNumber**、**External_Id**、**attachmentId**和**attachmentName**。某些调用 URL 在浏览器中有效，但在我通过代码调用服务时不起作用。我正在测试的一个特别是具有以下参数：

*   **SR 编号**= 1000
*   **ExternalId** = USERID7/27/2012 10:43:00 AM
*   **附件**ID = 1-2H1USPQ
*   **attachmentName** = 文件名放在这里

这是使用 URL 编码参数格式化的 URL：

**http://baseurl/service/CHD/Service_Record_Attachment_Query/SRNumber/1000/External_Id/USERID7%2F27%2F2012%2010%3A43%3A00%20AM/attachmentId/1-2H1USPQ/attachmentName/File%20name%20goes%20here/**

但是，当我尝试通过代码执行 GET 时，我收到了一个错误。似乎 Web 服务正在读取 URL 编码的“/”字符，就好像它是 URL 中的分隔符一样（我单步执行代码以验证在构建字符串时，External_Id 中的“/”是 URL 编码的.)

这是我正在使用构建 URL 字符串的代码：

```
requestURL = ConfigurationManager.AppSettings["Server"] +
    ConfigurationManager.AppSettings["Service"] +
    "Service_Record_Attachment_Query/SRNumber/" + 
    System.Uri.EscapeDataString(SRNumber) + "/External_Id/" +
    (ExternalID.Equals(null) ? "" : System.Uri.EscapeDataString(ExternalID)) +
    "/attachmentId/" + System.Uri.EscapeDataString(AttachmentID) +
    "/attachmentName/" + System.Uri.EscapeDataString(AttachmentName) + "/"; 
```

构建请求字符串后，我使用它来创建 HTTPWebRequest：

```
HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(requestURL); 
```

然后我收到一条错误消息，说附件不存在，因为它只搜索“USERID7”并排除了附件名称的其余部分。

我在我的代码中做错了什么可能导致“/”字符被解释为分隔符吗？我不明白为什么当我将调用 URL 放入浏览器时它会返回成功响应，但是通过代码调用 URL 时会返回错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-14T00:25:56.110

使用[Fiddler](http://www.fiddler2.com/fiddler2/)之类的工具来查看浏览器和代码案例中实际通过网络线路传递的内容。浏览器可能会双重转义 URL 中的“/”字符，或者您的代码可能没有按照您认为的方式转义它。查看网络上的 HTTP 请求应该会告诉您很多信息。

# websocket - 如何使用 noVNC 通过浏览器连接到 VNC 服务器

> ID：13369727
> 
> 赞同：1
> 
> 时间：2012-11-13T22:09:30.483
> 
> 标签：websocket, vnc

我正在尝试在 CentOS 上安装 novnc。我的默认存储库中没有列出 novnc 因此说

```
"-bash-3.2# yum install novnc
Failed to set locale, defaulting to C
Loaded plugins: fastestmirror
Loading mirror speeds from cached hostfile
 * base: mirrors.lga7.us.voxel.net
 * extras: mirror.rackspace.com
 * rpmforge: mirror.us.leaseweb.net
 * updates: mirror.atlanticmetro.net
Setting up Install Process
No package novnc available.
Nothing to do" 
```

如果有人知道任何有 noVnc 的存储库，请分享。[从项目源](https://github.com/kanaka/noVNC)直接复制 zip并尝试启动 websockify 给了我以下错误

> ./websockify --web ./ 5802 localhost:5901 警告：没有“numpy”模块，HyBi 协议较慢或禁用警告：没有“ssl”模块，TLS/SSL/wss 较慢或禁用警告：没有“多处理”模块，多处理速度较慢或禁用 Traceback（最近一次调用最后一次）：文件“./websockify”，第 18 行，在？除了：从 urlparse 导入 parse_qs，urlparse ImportError：无法导入名称 parse_qs

我要做的就是直接通过浏览器连接到 vnc。请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T17:30:24.063

我只是将 websockify 中的修复程序合并到 noVNC 存储库中。这应该可以修复使用 python2.4 运行 websockify 时出现的错误。请下载并重试。

请注意，这也意味着 CentOS 的发行版非常旧，因此某些 websockify 功能将受到限制（一次单个客户端，较慢的二进制套接字支持，并且不支持 SSL。

# haskell - 使用免积分有什么好处吗？

> ID：13369729
> 
> 赞同：1
> 
> 时间：2012-11-13T22:09:44.863
> 
> 标签：haskell, pointfree

> **可能重复：**
> [函数式编程中“无点”风格的优点和缺点是什么？](https://stackoverflow.com/questions/5671271/what-are-advantages-and-disadvantages-of-point-free-style-in-functional-progra)

当我在大学时，我不得不学习haskell。在我的一堂课中，我们学习了如何使用无点函数。除了学术观点之外，无点编程还有什么优势吗？

在效率方面有什么区别吗？在有很多代码行的应用程序中，自由点不是更难理解吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-13T22:24:49.243

一旦你习惯了它，它就会更清晰，更干净，只要你不要太过分。

可能`((not.).)`不像`\f x y = not (f x y)`你那么清楚，但是

```
munge = this . that . other 
```

应该比

```
munge x = this (that (other x))) 
```

你的讲师教你pointfree让你成为一个更好的程序员，而不是因为最好混淆你的代码，所以你应该在有帮助的时候使用它。

动机不是效率，而是思想、目的和表达的清晰性。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-13T22:13:56.033

阅读起来可能更容易，也可能更难。因此，它可能会对代码的可维护性产生影响，具体取决于您如何使用它。它不会对性能产生影响（除非在非常不寻常的情况下）。

这只是另一个成语。

# javascript - android phonegap 在第二次启动时跳过主页

> ID：13369735
> 
> 赞同：0
> 
> 时间：2012-11-13T22:09:56.767
> 
> 标签：javascript, android, cordova

我正在开发一个带有 phonegap 的 android 移动应用程序。在主菜单上，我有 4 张图片，当点击一张图片时，它会将用户重定向到另一个页面。我想要的是应用程序记住用户第一次打开应用程序时选择的内容，所以当他第二次使用应用程序时，应用程序应该直接打开到他第一次选择的页面。

我想在应用程序的第二次午餐时跳过的第一页如下所示：

```
 <!DOCTYPE html>

<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<script src="res/jquery.js"></script>
<script>
$(document).ready(function() {
  $("img.imgnavbar").animate({
    opacity: 1.0,
  }, 800 );
});
</script>
<style type="text/css">
      body{background-color:black; background-repeat:no-repeat; position:absolute;}
                  img.imgnavbar{height:auto; width:48%;   opacity: 0.0;}
      .menu{padding-top:55%;}  
                  img.shadow{height:auto; width:100%; bottom:0px; position:fixed; left:0%; z-index:-1;}
                  img.choose{height:auto; width:100%; top:0px; position:absolute; z-index:-1;}

                </style>
</head>
<body>
<div  align="center" class="menu">
<img  src='img/cosmote4.png' id="cosmote"  class="imgnavbar" value="1"/>
<img  src='img/germanos2.png' id="germanos" class="imgnavbar" value="2"/>
<img  src='img/zapp2.png' id="zapp"  class="imgnavbar" value="3"/>
<img  src='img/sunlight4.png' id="sunlight" class="imgnavbar" value="4"/>
</div>
<img  src='img/choose.png' id="choose" class="choose"/>
<img  src='img/shadow.png' id="shadow" class="shadow"/>

<script>
$("img.imgnavbar").click(function(){
                if (confirm('Are you sure you choose this company?')) {
                $("img.imgnavbar").animate({
    opacity: 0.0,
  }, 800 );

  switch ($(this).attr('src')) { 

        case "img/cosmote4.png":
            $("img.choose").animate({"top": "-=60%"}, "slow");
                                $("img.shadow").animate({"bottom": "-=100%"}, "slow");
                                                setInterval(function(){window.location.replace("cosmote.html");
},800);
            break; 

        case "img/germanos2.png":
            $("img.choose").animate({"top": "-=60%"}, "slow");
                                $("img.shadow").animate({"bottom": "-=100%"}, "slow");
                                                setInterval(function(){window.location.replace("germanos.html");
},800);
            break; 

        case "img/zapp2.png":
            $("img.choose").animate({"top": "-=60%"}, "slow");
                                $("img.shadow").animate({"bottom": "-=100%"}, "slow");
                                                setInterval(function(){window.location.replace("zapp.html");
},800);
            break;

        case "img/sunlight4.png":
            $("img.choose").animate({"top": "-=60%"}, "slow");
                                $("img.shadow").animate({"bottom": "-=100%"}, "slow");
                                                setInterval(function(){window.location.replace("sunlight.html");
},800);
            break; 
    }
}
else{}
});
</script>

</body>

</html>

Thanks! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T23:27:09.140

您可以使用 PG 中的本地存储来保存首选项。

[http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#localStorage](http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#localStorage)

因此，在加载所选页面时，将信息保存到本地存储中。加载主页时，对本地存储进行 javascript 检查以检查该键是否存在现有值，如果存在，则相应地重定向，如果没有，则它是第一次启动；没做什么。

# c - 带有 fscanf() 的 C 程序神秘地停止工作

> ID：13369737
> 
> 赞同：1
> 
> 时间：2012-11-13T22:10:00.357
> 
> 标签：c, windows, mingw

我有一个名为 test.c 的程序和一个名为 test.in 的输入文件。我正在尝试从输入文件中读取两个字符串并将它们输出到控制台。我正在运行 Windows 7，但我正在使用 gcc 使用 MinGW 进行编译。

这是我的文件 test.c：

```
#include <stdio.h>
main() {

    FILE *fin = fopen ("test.in", "r");
    char  *one, *two;

    fscanf(fin, "%s %s", one, two);
    printf("%s\n%s", one, two);

    fclose(fin);
    return 0;
} 
```

这是我的文件 test.in ：

```
ONE
TWO 
```

我去 MinGW，运行“gcc -o test.exe test.c”，一切编译正常，但是当我运行 test.exe 时，弹出一个窗口并说“test.exe 已停止工作。Windows 正在尝试找到解决问题的办法……”

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T22:12:31.783

`fscanf`正在写入您传递给它的未初始化指针。其影响尚未确定，但很可能会崩溃。您需要在调用它之前分配您的 char 数组：

```
#define MAX_LEN (32) /* change this as required */
char one[MAX_LEN];
char two[MAX_LEN];
fscanf(fin, "%s %s", one, two); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:12:48.407

您有指向字符的指针，但您没有分配任何内存来存储字符串。

尝试使用字符数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T22:13:31.863

而不是必须`char* one`有`char one[100]`，或其他一些数字。并且用户输入的字母不得超过`one`（字符串终止符减 1）的大小。目前代码正在写入内存中的某个随机位置。在这种随机情况下，任何事情都可能发生。

# python - 在 python 中处理二进制字符串时，'^' 运算符的等价物是什么？

> ID：13369738
> 
> 赞同：1
> 
> 时间：2012-11-13T22:10:08.597
> 
> 标签：python, encryption, python-3.x, binary

如何应用表示两个字符的 bin 的两个二进制字符串的异或？

这是一个代码

```
def Xor(a,b):

    ABytes = a.encode('ascii','strict')
    BBytes = b.encode('ascii','strict')

    ABinaries = bin(int(binascii.hexlify(ABytes),16))
    BBinaries = bin(int(binascii.hexlify(BBytes),16))

    #this is what i want to do:
    xor = ABinaries ^ BBinaries 

    return xor 
```

但是由于`^`运算符不对字符串进行操作。代码不起作用，问题是我需要返回 xor 的二进制值。

如果它有效，我怎样才能得到 xor 的字符串值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-14T00:40:35.250

当您`bytes`在 Python 3 中进行索引或迭代时，您可以获得以下`int`值`xor`：

```
>>> a, b = b'abc', b'def'
>>> c = bytes(x^y for x,y in zip(a, b))
>>> c
b'\x05\x07\x05'
>>> bytes(x^y for x,y in zip(a, c))
b'def'
>>> bytes(x^y for x,y in zip(b, c))
b'abc' 
```

如果出于某种原因（表示形式？我当然不会用它计算），我想将其作为位串，我将使用内置格式，并将每个位串零填充为 8 位：

```
>>> ''.join(format(x, '08b') for x in c)
'000001010000011100000101' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-14T01:05:05.727

这对你有用吗？

```
>>> bytes(a ^ b for a, b in zip(b'qwertyuiop', b'1234567890'))
b'@EVFAOBQV@' 
```

在应用中：

```
>>> def xor(x, y):
    assert isinstance(x, bytes) and isinstance(y, bytes), 'Pass in bytes!'
    assert len(x) == len(y), 'Bytes must be of same length!'
    return bytes(a ^ b for a, b in zip(x, y))

>>> xor(b'zxcvbnm,./', b'asdfghjkl;')
b'\x1b\x0b\x07\x10\x05\x06\x07GB\x14' 
```

进一步应用如何使用它：

```
>>> import random
>>> def crypt(data, password):
    random.seed(password)
    return xor(data, bytes(random.randrange(256) for i in range(len(data))))

>>> crypt(b'This is a test string to be encrypted.', 'Gr8+ 9a$$')
b'\x98ZE\xf2\x11\xe3=\x8b{\xf1Q"A\xd2\x8e\xb6.\xb2\xea\x81\x1b/\x8c\x15dFvHZ\xd9\x0cv8\xcd\xbe\x95\x1b\xc0'
>>> crypt(_, 'Gr8+ 9a$$')
b'This is a test string to be encrypted.' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-14T11:48:12.230

```
ABytes = a.encode('ascii','strict')
BBytes = b.encode('ascii','strict')
ABinaries =""
BBinaries = ""
AtempBinaries = bin(int(binascii.hexlify(ABytes),16))
BtempBinaries = bin(int(binascii.hexlify(BBytes),16))
if len(AtempBinaries)<10:

    ABinaries= '0b'+(((9-len(AtempBinaries))*'0') +AtempBinaries.split('0b')[1])
if len(BtempBinaries)<10:
    BBinaries = '0b'+ (((9-len(BtempBinaries))*'0') +BtempBinaries.split('0b')[1])
i = 0
xor = ""
for element in ABinaries:
    if (i == 0):
        xor = xor + '0'
    elif (element == 'b'):
        xor = xor + 'b'
    else:
        xor = xor + str(int(element)^int(BBinaries[i]))
    i = i + 1
return (xor) 
```

这似乎解决了问题，没有直接的方法来异或两个二进制字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T23:02:55.020

我认为可以在您的函数中使用的一些代码是：

```
from itertools import zip_longest

reversed_bits = [str(int(x != y)) for x, y in zip_longest(ABinaries[:1:-1]),
                                                          BBinaries[:1:-1]),
                                                          "0")]
xor = "0b" + "".join(reversed(reversed_bits)) 
```

然而，这将是相当缓慢的。一种更快的方法是尽可能多地处理字节和整数，并完全避免使用二进制字符串。

# seo - 谷歌hreflang使用

> ID：13369739
> 
> 赞同：4
> 
> 时间：2012-11-13T22:10:11.493
> 
> 标签：seo

这看起来对吗？SEO专家说这是这样做的方法，但由于某种原因我认为这可能是错误的，因为我们对不同的hreflang使用相同的url

```
<link rel="alternate" hreflang='en-bn' href='http://www.xxx.com/gsa'/>
<link rel="alternate" hreflang='en-cn' href='http://www.xxx.com/gsa'/>
<link rel="alternate" hreflang='en-hk' href='http://www.xxx.com/gsa'/>
<link rel="alternate" hreflang='en-in' href='http://www.xxx.com/gsa'/>
<link rel="alternate" hreflang='en-id' href='http://www.xxx.com/gsa'/>
<link rel="alternate" hreflang='en-jp' href='http://www.xxx.com/gsa'/>
<link rel="alternate" hreflang='en-kr' href='http://www.xxx.com/gsa'/>
<link rel="alternate" hreflang='en-my' href='http://www.xxx.com/gsa'/>
<link rel="alternate" hreflang='en-pk' href='http://www.xxx.com/gsa'/>
<link rel="alternate" hreflang='en-ph' href='http://www.xxx.com/gsa'/>
<link rel="alternate" hreflang='en-sg' href='http://www.xxx.com/gsa'/>
<link rel="alternate" hreflang='en-lk' href='http://www.xxx.com/gsa'/>
<link rel="alternate" hreflang='en-tw' href='http://www.xxx.com/gsa'/>
<link rel="alternate" hreflang='en-th' href='http://www.xxx.com/gsa'/> 
```

谷歌会因此惩罚网站吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T22:15:26.477

我想他们可能会。如果您**[在 Google Webmaster Central Blog 上看到此帖子](http://googlewebmastercentral.blogspot.in/2011/12/new-markup-for-multilingual-content.html)**，他们会推荐如下内容：

```
<link rel="alternate" hreflang="es" href="http://www.example.com/" />
<link rel="alternate" hreflang="es-ES" href="http://es-es.example.com/" />
<link rel="alternate" hreflang="es-MX" href="http://es-mx.example.com/" /> 
<link rel="alternate" hreflang="en" href="http://en.example.com/" /> 
```

谷歌说：

> 如果您指定区域子标签，我们将假定您要定位该区域。请记住，所有这些注释都将在每个 URL 的基础上使用。您应该注意为这两个链接元素使用特定的 URL，而不是主页。

* * *

此外，从他们的**[指导方针here](http://googlewebmastercentral.blogspot.in/2010/09/unifying-content-under-multilingual.html)**，

> 让一个 URL 与一个内容相关联。我们建议 不要对多种语言 **使用相同的 URL ，例如根据用户信息（IP 地址、Accept-Language HTTP 标头）在 example.com/page.html 上同时提供法语和英语版本。**[（强调我的）]

如果您没有根据语言/本地化将用户重定向到**不同的网站，您可能会因此受到惩罚，因为 Google 明确建议不要这样做。**

# php - Oauth：从手机页面访问Native App，如何？

> ID：13369741
> 
> 赞同：0
> 
> 时间：2012-11-13T22:10:18.720
> 
> 标签：php, mobile, oauth

我们正在网页上设置 Oauth。我们的新网页使用 jquery.mobile 设置

人们正在我们的页面上通过 Oauth 登录。

现在为了方便用户使用，当通过移动设备访问我们的网页时，我们希望参考 Facebook、Twitter、Linkedin 或 Google 帐户等原生移动应用程序，而不是打开新的浏览器选项卡以使用他们的首选登录（使用凭据）帐户。

这甚至可能吗？如果是这样，我们如何在他们的设备上引用/重定向到他们的本机移动应用程序而不是 Oauth 的 web url？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T00:56:05.897

通常有 URI 引用带有 api 的本机移动应用程序以使用这些本机调用...例如，在 IOS 上，使用

```
 twitter:// 
```

将访问本机应用程序...如果您想打开本机 Twitter 应用程序并提取用户名，您将

```
 twitter://user?screen_name=github 
```

通常，如果您只使用 oauth 而不是寻找应用程序权限，则本机应用程序将自动处理身份验证

处理本机应用程序是否已安装的一种方法是，如果 URI 返回 allication not found，则使用重定向到应用程序网站

对于 URI，API 通常不太难找到

# javascript - 加载目标页面时，主导航项上的 Javascript 更改 div 类

> ID：13369742
> 
> 赞同：0
> 
> 时间：2012-11-13T22:10:23.260
> 
> 标签：javascript, attr

我在我的一个主要导航链接上应用了一个函数，这个函数看起来像这样

```
 $(function() {
       $('#menu-item-1137').click(function(){
           $('#waterfacts').attr('class', 'active');
           $('li#simple2Tab').attr('class','active');    
       });  
    }); 
```

所以我的目标很简单，当单击该项目时，将这些类更改应用于 id 元素。

我面临的问题是该功能在您已经在目标页面上时有效，但是假设我在站点的索引上，然后单击`#menu-item`该功能将不起作用，因为我认为它正在尝试应用于页面我目前正在查看。

所以我的问题是，我该如何告诉函数首先等到页面加载然后运行？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:29:29.690

由于快捷方式，您已经在加载 DOM 后绑定了事件

```
$(function() {}) 
```

这相当于

```
$(document).ready(function() {}) 
```

[jQuery .ready()](http://api.jquery.com/ready/)

您是否在页面初始加载后动态更改/插入菜单？如果是这样，您必须在此之后应用该事件。

您可以通过在绑定事件之前检查您的元素是否在 DOM 中来轻松调试此类问题：

```
$(function() {
    console.log($('#menu-item-1137').length);
    $('#menu-item-1137').click(function(){
       $('#waterfacts').attr('class', 'active');
       $('li#simple2Tab').attr('class','active');    
   });
}); 
```

如果您在控制台上的输出显示为零，则您的元素尚未在 DOM 中，并且事件不会被绑定。为了在这种情况下为您提供帮助，我们需要有关您网站结构的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:15:44.510

尝试使用[.ready()](http://api.jquery.com/ready/)，并在其中使用[.on()](http://api.jquery.com/on/)将函数绑定到元素。

这将使该功能仅在页面加载后应用。

例子：

```
$(document).ready(function () {

    $("#menu-item-1137").on("click", function(){
        $('#waterfacts').attr('class', 'active');
        $('li#simple2Tab').attr('class','active'); 
    });

});​ 
```

# spring-mvc - Spring mvc portlet @sessionAtribute

> ID：13369743
> 
> 赞同：1
> 
> 时间：2012-11-13T22:10:27.067
> 
> 标签：spring-mvc, annotations, javabeans, portlet

你好需要一点帮助。

我正在使用 Spring 和 portlet，我的问题是我有 2 个选项卡由两个带有 2 个 bean 的不同控制器处理。我需要的是在第二个控制器的渲染阶段显示来自第一个控制器的 bean 的数据。

我尝试执行以下操作：

这是第一个选项卡的控制器，我在其中收集必要的值并使用它们生成请求。

```
@Controller
@RequestMapping(ServletContextKeys.SC_VIEW_MODE)
//This is my bean session
@SessionAttributes(salarioBean)
public class AltaSalarioFSOPortletController extends BaseController {

private SalarioBean salarioBean;

//With this method generated the request to display the data in the other controller jsp
@RequestMapping(params = ACTION_CAMBIA_TAB)
public final String doRenderTab(@ModelAttribute(value = "SalarioBean") SalarioBean salario, Errors errors, RenderRequest renderrequest, PortletSession portletSession) {

    //retrieve the bean managed by Spring in session
    SalarioBean salarioSessionBean = (SalarioBean) portletSession.getAttribute(salarioBean);

    ImputacionBean imputacionBean = new ImputacionBean();
    ....Insert data on imputacionBean

    //generated the request to display data in jsp handled by another controller
    renderrequest.setAttribute(imputacionBean,imputacionBean);

    //redirected to jsp
    return jsp_tab2;
} 
```

使用此控制器在 jsp 中显示数据，但是当单击另一个选项卡时尝试生成相同的数据时，我的问题就出现了。所以我尝试在另一个控制器中使用这个方法渲染：

```
@Controller
@RequestMapping(ServletContextKeys.SC_VIEW_MODE)
@SessionAttributes(imputacionBean)
public class AsociarCostesSalarioAlumnoPortletController extends BaseController {

private ImputacionBean imputacionBean;

@RequestMapping(params = ACTION_ASOC_COSTES_SALARIO)
public final String doRender(@ModelAttribute(value = "ImputacionBean") ImputacionBean imputacionSalarioAlumno,Errors errors, RenderRequest renderrequest,SessionStatus status) {

    justifSessionBean = (SalarioBean) renderrequest.getPortletSession().getAttribute(salarioBean);

    ImputacionBean imp=(ImputacionBean) justifSessionBean.getImputaciones().get(0);

renderrequest.getPortletSession().setAttribute(imputacionBean,imp);

    setJustificanteAsociarCostesSalarioAlumno(imp);

    setRequestParameters(renderrequest, imp);

    return jsp_tab2;
}

@Override
public final void setRequestParameters(RenderRequest renderrequest, Object object) {

    ImputacionBean imputacionSalarioAlumno = (ImputacionBean) object;

    renderrequest.setAttribute(imputacionBean, imputacionSalarioAlumno);

      renderrequest.getPortletSession().setAttribute(imputacionBean,imputacionSalarioAlumno);
}

public final void setJustificanteAsociarCostesSalarioAlumno(ImputacionBean imputacionSalario) {
    this.imputacionBean = imputacionSalario;
} 
```

第一次处理 spring 的 bean 是对象空的。我的问题是：如何设置从第一个控制器处理 Spring 的会话 bean？所以在生成请求时，这个 bean 包含数据。

我需要更改处理 Spring 的 bean 以使用此数据生成新请求。

谢谢您的帮助。如果有什么你不明白的，我会尽力解释得更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:39:08.773

从您的陈述中，我不太明白您在寻找什么 - 第一次处理 spring 的 bean 是对象空的。- 我猜你会碰到一个空指针或异常说会话属性为空。

通常，当您将任何内容声明为会话属性时，例如**@SessionAttributes("salarioBean")**，然后在提交时或第一次呈现 portlet 时，框架假定会话属性已经创建并在会话中可用。

为了摆脱这个问题 - 第一次处理 spring 的 bean 是对象空的。- 您只需要确保该属性已经可用。为此，您可以添加一个使用注释**@ModelAttribute**创建模型属性的方法，例如，在您的情况下，它将是

```
@ModelAttribute("salarioBean")
public SalarioBean getSalarioBean(){
    return new SalarioBean();
} 
```

发生的情况是，当一个方法使用 @ModelAttribute 注释时，它总是在每次调用 render/action 方法之前调用，并在 Model 对象中设置属性以使其可用。但是，当在@SessionAttribute 中也设置了相同的属性（例如“salarioBean”）时，它会在会话中一经创建就设置，并且在渲染/操作之前**不会触发对 getSalarioBean() 的进一步调用**方法被调用并且在会话中始终可用。

希望能帮助到你。

# json - nodejs json动态属性

> ID：13369746
> 
> 赞同：0
> 
> 时间：2012-11-13T22:10:43.467
> 
> 标签：json, node.js, parsing

我想制作一个接收 json 对象和路径的简单应用程序。结果是该路径的值，例如：

```
node {"asd":{"qwe":"123", "ert":"465"}} asd.qwe 
```

应该还给我：`123`

我正在使用这个：

```
var result = JSON.parse(jsonToBeParsed);
console.log(result["asd"]["qwe"]); 
```

但我希望能够用字符串动态地获取值。有没有办法做这样的事情？：

```
var result = JSON.parse(jsonToBeParsed);
var path = "asd.qwe" //or whatever
console.log(result[path]); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:27:32.670

```
var current = result,
    path = 'asd.qwe';

path.split('.').forEach(function(token) {
  current = current && current[token];
});

console.log(current);// Would be undefined if path didn't match anything in "result" var 
```

**编辑**

的目的`current && ...`是如果`current`未定义（由于路径无效），脚本不会尝试评估`undefined["something"]`哪个会引发错误。但是，我刚刚意识到 if`current`恰好是假的（即`false`零或空字符串），这将无法在`token`. 所以可能检查应该是`current != null`。

**另一个编辑**

这是一种更好的惯用方法，使用[Array.reduce() 方法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce)：

```
path.split('.').reduce(
  function(memo, token) {
    return memo != null && memo[token];
  },
  resultJson
); 
```

`var`这也更好，因为它不需要 ANY

# c++ - 内存不足的概念

> ID：13369750
> 
> 赞同：5
> 
> 时间：2012-11-13T22:10:59.670
> 
> 标签：c++, memory, memory-management, arduino

我目前正在学习包括内存在内的低级 arduino 内容。我的问题是，由于堆和堆栈在内存的另一侧增长，内存不足只有在两者都在中间的**某个地方**相遇时才会发生，或者当它们中的一个撞到中间时才会发生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:49:44.400

*   没有“中间”的概念
*   取决于底层操作系统（如果有的话！）如何管理进程（如果平台上有这样的东西！），堆栈可能有一个有限的大小，比“整个内存的其余部分”小得多
*   取决于底层操作系统（如果有的话！）如何管理虚拟内存空间（如果平台上有这样的东西！），堆可能有一个有限的大小，比“整个内存的其余部分”小得多

如果这些限制中的任何一个到位，那么这些区域彼此相遇的可能性非常小。实际上，他们很可能很快就会用完空间，并且保护机制会引发相关的硬件软件异常。

这意味着“内存不足”事件不是一回事。堆栈中有OOM，堆中有OOM。在我所在的地区，传统上，与堆栈相关的称为 StackOverflow :)，与堆相关的称为 OutOf[Heap]Memory。

值得注意的是，如果您的平台有虚拟内存的概念，那么堆栈很可能仍然是一个单一的空间块，但堆 - 可能是一个稀疏结构，并且将由多个分散的空间块组成，不一定在物理上按顺序排列某种上升或下降的方式。在这种情况下，很难谈论任何符合任何事情的事情。StackOverflow 发生在堆栈达到大小限制时，而 OutOfMemory 发生在内存管理器在内存空间中找不到合适的空闲孔时。

如果忽略虚拟内存，并且只谈论“原始硬件”，那么它取决于..堆栈的实际位置。IIRC（！），在一些（非常旧的）平台上，堆栈被预先分配在位于物理内存开头的一些预定义空间，比如说前十页，并增长到“底部”。然后是几页硬件映射表和端口状态图像，然后剩下的尾部是堆。通过这样的设置，当堆栈指针达到**零时**StackOverflow 上升。它非常“聪明”，因为使用处理器的状态标志很容易检测到零。此外，对于那些旧处理器来说，访问低地址比访问高地址要容易得多，因此将经常访问的堆栈放在低地址是一个很大的优势.

IIRC（！），较新的平台没有这些问题（通常，让我们忽略 NUMA 和类似的东西），并且当前传统的“原始硬件”设置将特殊区域（表、端口映射等）放在空间的开头，然后是堆，然后是“空闲区域”，然后是堆栈，堆栈溢出发生在空闲区域消失时，即堆栈遇到堆中已经存在的任何块时。请注意，StackOverflow 仍然不意味着 OutOfMemory：堆栈可能已经溢出，但堆可能有一些间隙并且仍然可能有很多可用空间！

请注意，那些“IIRC”很重要。我不是 Arduino 和当前处理器架构方面的专家，而且上面的“历史”之类的东西可能与新/旧的东西完全不同。我给它80%的概率是真的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:24:11.123

堆栈具有一定的分配大小，如果超出该大小，则会出现堆栈缓冲区溢出。

> 在软件中，当调用堆栈上使用过多内存时会发生堆栈溢出。调用堆栈包含有限的内存量，通常在程序开始时确定。

来源[维基百科](http://en.wikipedia.org/wiki/Stack_overflow)

# eclipse-plugin - 使用eclipse构建hadoop插件

> ID：13369760
> 
> 赞同：0
> 
> 时间：2012-11-13T22:11:33.960
> 
> 标签：eclipse-plugin, hadoop-plugins

我正在使用 Eclipse 构建 hadoop 插件 hadoop 版本是 1.0.4 当我使用 ant builder 时，出现如下错误

```
compile:
 [echo] contrib: eclipse-plugin
[javac] /home/shijieru/Downloads/HadoopInstall/hadoop-1.0.4/src/contrib/eclipse-plugin/build.xml:61: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
[javac] Compiling 45 source files to /home/shijieru/Downloads/HadoopInstall/hadoop-1.0.4/build/contrib/eclipse-plugin/classes
[javac] /home/shijieru/Downloads/HadoopInstall/hadoop-1.0.4/src/contrib/eclipse-plugin/src/java/org/apache/hadoop/eclipse/Activator.java:28: error: error while writing Activator: could not create parent directories
[javac] public class Activator extends AbstractUIPlugin {
[javac]        ^
[javac] Note: Some input files use or override a deprecated API.
[javac] Note: Recompile with -Xlint:deprecation for details.
[javac] Note: Some input files use unchecked or unsafe operations.
[javac] Note: Recompile with -Xlint:unchecked for details.
[javac] 1 error

BUILD FAILED
/home/shijieru/Downloads/HadoopInstall/hadoop-1.0.4/src/contrib/eclipse-plugin/build.xml:61: Compile failed; see the compiler error output for details.

Total time: 3 seconds 
```

谁能告诉我这些问题的可能原因是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T01:09:18.487

看来您的问题并非特定于 hadoop，但目录权限 - javac 输出“无法创建父目录” - 确保您对正在编译的 bin 目录具有适当的权限。

（基于具有相同错误消息的类似问题：[无法编译 WordCount.java](https://stackoverflow.com/questions/12514867/cannot-compile-wordcount-java)）

# asp.net - ASP.NET MVC，_ViewStart.cshtml 内容

> ID：13369770
> 
> 赞同：3
> 
> 时间：2012-11-13T22:12:10.020
> 
> 标签：asp.net

在我的 ASP.NET MVC 应用程序中，在我的**_ViewStart.cshtml**文件中，我有如下代码 -

```
<div>SHOW THIS</div>

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} 
```

呈现页面时，我希望“SHOW THIS”显示在 _Layout.cshtml 页面的内容*上方*，但“SHOW THIS”显示在 _Layout.cshtml 页面的内容*下方*。

它是否正确？如果没有，知道为什么会发生这种情况吗？你能建议如何让它显示在 _Layout.cshtml 内容之上吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:19:22.660

布局将首先加载，内容将插入到布局的渲染内容部分。如果您希望在此视图的布局中出现某些内容，您可以尝试在控制器中设置一个 ViewBag 对象，然后在布局中检查该 ViewBag 对象。

或者您可以在布局中使用可选部分，然后在视图中定义它：

在布局中：

```
@RenderSection("aboveSection", required: false) 
```

那么在你看来：

```
@section aboveSection{
    <div>SOME CONTENT</div>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:20:02.693

这是预期的行为。“_Layout.chshtml”行仅指定您将使用哪个父模板。

要重新排列内容，请在 _Layout.cshtml 中进行调整并记下`@RenderBody()`位置。

# javascript - 基础 (3) 轨道图像滑块

> ID：13369771
> 
> 赞同：1
> 
> 时间：2012-11-13T22:12:11.353
> 
> 标签：javascript, zurb-foundation, orbit

我有以下代码用于 Foundation 3 中的图像滑块。

```
<div class="row">
    <div class="twelve columns">
         <div id="slider">
              <img src="http://placehold.it/1600x375&text=[img 1]" />
              <img src="http://placehold.it/1600x375&text=[img 2]" />
         </div>
    </div>
</div> 
```

然后，在文件的末尾，我有以下 js 以使其工作。

```
<script type="text/javascript">
 $(window).load(function() {
     $('#slider').orbit();
 }); </script> 
```

当我加载页面一段时间后，两个图像都出现堆叠，直到它加载到 Orbit Slider 中。**我真的很想最小化这一点，并且在加载滑块之前不显示图像。**我有一个非常快速的 VPS 设置，这样的事情从来没有真正成为问题。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:20:28.567

一种方法是将`<div id="slider"></div>`document.ready 函数中的 javascript 的可见性更改为可见：

```
$(function() {
    $('#slider').toggle();
    $('#slider').orbit();
}); 
```

这当然意味着您必须在 css 文档中指定`display`is ：`none`

```
#slider {
    display: none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T10:31:21.723

只需添加`<div id="slider"></div>`高度和溢出：隐藏

```
#slider {
height: 300px;
overflow: hidden; 
```

}

# jquery - 使用浏览器扩展获取 ajax 调用的返回 url

> ID：13369776
> 
> 赞同：1
> 
> 时间：2012-11-13T22:12:31.540
> 
> 标签：jquery, ajax, url, browser, browser-extension

我想做的是向我无法访问其服务器的某个 url 发出 ajax 请求。当 ajax 调用返回时，我想获取我返回的页面的 url。因此，如果我对 example.com 进行 ajax 调用并被重定向到 example2.com，我想获取 example2.com 的 url。我知道，在阅读了一些类似的帖子之后，浏览器透明地遵循请求并且不返回 url。

但是我想知道这是否是因为那些 ajax 请求来自页面。如果我通过某些浏览器扩展在浏览器中发起我的 ajax 请求，是否可以获得返回的 url？

如果这是不可能的，有没有其他方法可以解决这个问题？我认为 iframe 可能会起作用 - 制作一个源为目标 url 的 iframe 并查看它是否被重定向。但是，我注意到一些网站在 iframe 内部不正常运行，超出安全协议，所以这似乎不是最好的解决方案。另一个想法是使用 cURL，我真的不想这样做。我正在尝试做的事情甚至可能在 cURL 中实现吗？

谢谢您的帮助。

# ruby-on-rails - Rails - 如何创建文件（XML）并将其保存到 Amazon S3 存储桶中？

> ID：13369777
> 
> 赞同：1
> 
> 时间：2012-11-13T22:12:31.917
> 
> 标签：ruby-on-rails, ruby, file-upload, amazon-s3, paperclip

我需要将数据库表中的所有产品生成到 XML 文件中。因为我的应用在 Heroku 上运行，所以我需要使用 Amazon S3 作为存储。

以下是有关如何保存图像的示例：

```
has_attached_file :photo,
       :styles => {
       :thumb=> "100x100#",
       :small  => "400x400>" },
     :storage => :s3,
     :s3_credentials => "#{RAILS_ROOT}/config/s3.yml",
     :path => "/:style/:id/:filename" 
```

这让我有点困惑......因为我不确定这个任务的逻辑。我的想法是在控制器中运行一个动作（比如`create_xml_feed`）`Products`

```
 xml = Builder::XmlMarkup.new( :indent => 2 )
 xml.instruct! :xml, :encoding => "ASCII"
 xml.product do |p|
   p.name "Test"
 end 
```

但是问题来了——我不知道如何将新创建的文件保存到 Amazon S3 Bucket 中。

我会感谢每一个进步，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T00:20:17.597

首先，创建一个活动记录类来保存您上传的 XML 文件。在此之后，您可以编写创建 xml 字符串的逻辑，首先通过创建 XmlUploader 类的新实例来创建新文件，然后创建所需的 xml 字符串，将其保存在文件中，然后将此文件分配为附件文件. 保存后，您的 xml 文件将上传到 s3。

```
class XmlUploader < ActiveRecord::Base
  has_attached_file :uploaded_file, :storage => :s3,
  :s3_credentials => "#{RAILS_ROOT}/config/s3.yml",
  :path => "/:id/:filename"

  def create_uploaded_file
    xml = ::Builder::XmlMarkup.new( :indent => 2 )
    xml.instruct! :xml, :encoding => "ASCII"
    xml.product do |p|
      p.name "Test"
    end
    file_to_upload = File.open("some-file-name", "w")     
    file_to_upload.write(xml)
    file_to_upload.close()
    self.uploaded_file = File.open("some-file-name")
    self.save!
  end
end

class CreateXmlUploaders < ActiveRecord::Migration
  def change
    create_table :xml_uploaders do |t|
      t.attachment :uploaded_file
      t.timestamps
    end
  end
end

xml_file = XmlUploader.new
xml_file.create_uploaded_file 
```

# sql - 将关联数组传递给过程中的函数会引发 PLS-00382 表达式类型错误

> ID：13369779
> 
> 赞同：0
> 
> 时间：2012-11-13T22:12:38.733
> 
> 标签：sql, oracle, plsql

我有以下类型：

```
CREATE OR REPLACE TYPE num_t AS OBJECT
(
  c1 number,
  MAP MEMBER FUNCTION sort_key RETURN VARCHAR2
)
CREATE OR REPLACE TYPE BODY num_t AS
   MAP MEMBER FUNCTION sort_key RETURN VARCHAR2 IS
   BEGIN
      RETURN c1;
   END;
END; 
```

和

```
CREATE OR REPLACE TYPE num_tab AS TABLE OF num_t 
```

我的包定义如下：

```
create or replace package test_package is

  type t_test is table of number index by binary_integer;
  test_empty_array t_test;

  procedure test_proc(cur_out out sys_refcursor);

  function test_fn(i_test in t_test) return num_tab;

end test_package;

create or replace package body test_package is

  procedure test_proc(cur_out out sys_refcursor) is
    i_test t_test := test_empty_array;
  begin
    open cur_out for
      select * from table(test_fn(i_test));

  end;

  function test_fn(i_test in t_test) return num_tab is
    v_results num_tab;
  begin
    for i in i_test.first .. i_test.last loop
      v_results.extend;
      v_results(i) := num_t(c1 => i_test(i));
    end loop;

    return v_results;
  end;

end test_package; 
```

当我尝试编译它时，我收到以下错误：

```
Error: PLS-00382: expression is of wrong type
Line: 7
Text: select * from table(test_fn(i_test));

Error: PLS-00306: wrong number or types of arguments in call to 'TEST_FN'
Line: 7
Text: select * from table(test_fn(i_test));

Error: PL/SQL: ORA-00904: "TEST_PACKAGE"."TEST_FN": invalid identifier
Line: 7
Text: select * from table(test_fn(i_test));

Error: PL/SQL: SQL Statement ignored
Line: 7
Text: select * from table(test_fn(i_test)); 
```

看起来它应该对我有用。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T23:47:07.453

这是正常的，也是意料之中的。SQL 中使用的函数只能引用 SQL 数据类型（例如，如果您也有布尔数据类型，则会收到错误消息）。

您可以将其隐藏在包中：

```
create or replace package test_package is

  type t_test is table of number index by binary_integer;
  test_empty_array t_test;

  procedure test_proc(cur_out out sys_refcursor);

  function test_fn(i_test in t_test) return num_tab;

end test_package;
/
create or replace package body test_package is

  procedure test_proc(cur_out out sys_refcursor) is
    i_test t_test := test_empty_array;
    t_num  num_tab;
  begin
    t_num := test_fn(i_test);
    open cur_out for
      select * from table(t_num);

  end;

  function test_fn(i_test in t_test) return num_tab is
    v_results num_tab := num_tab();
  begin
    for i in 1..i_test.count loop
      v_results.extend;
      v_results(i) := num_t(c1 => i_test(i));
    end loop;

    return v_results;
  end;

end test_package;
/ 
```

我也调整了

```
v_results num_tab := num_tab(); 
```

和

```
for 1..i_test.count loop 
```

因为 first..last 在空白数组的情况下会失败（数字错误）

例如有一些数据：

```
SQL> create or replace package body test_package is
  2
  3    procedure test_proc(cur_out out sys_refcursor) is
  4      i_test t_test;
  5      t_num  num_tab;
  6    begin
  7      i_test(1) := 1;
  8      i_test(2) := 3;
  9      t_num := test_fn(i_test);
 10      open cur_out for
 11        select * from table(t_num);
 12
 13    end;
 14
 15    function test_fn(i_test in t_test) return num_tab is
 16      v_results num_tab := num_tab();
 17    begin
 18      for i in 1..i_test.count loop
 19        v_results.extend;
 20        v_results(i) := num_t(c1 => i_test(i));
 21      end loop;
 22
 23      return v_results;
 24    end;
 25
 26  end test_package;
 27  /

Package body created.

SQL> exec test_package.test_proc(:c)

PL/SQL procedure successfully completed.

SQL> print c

        C1
----------
         1
         3

SQL> 
```

# java - 基于套接字的 Java 对象序列化/反序列化缓存

> ID：13369788
> 
> 赞同：0
> 
> 时间：2012-11-13T22:13:19.790
> 
> 标签：java, sockets, caching, serialization, deserialization

我有一个 Java 客户端/服务器应用程序，它通过序列化/反序列化对象进行通信。通常客户端发送 RequestObj，服务器用 ResponseObj 响应。服务器也发送心跳RequestObj，客户端响应心跳ResponseObj。

```
//Sample RequestObj
public class RequestObj implements Serializable {
   private static final long serialVersionUID = xxxx;  //auto generated
   int type; //TYPE_HEARTBEAT
   long time;
   ...

   public void setTime() {
      this.time=System.currentTimeMillis();
   }
} 
```

从服务器向每个客户端发送心跳请求时，它**重用**相同的RequestObj（每个连接），设置为当前时间，然后发送给客户端。我期待在正确的时间收到 RequestObj。但是，似乎在客户端反序列化的 RequestObj 总是给我错误的时间。事实上，客户端收到的 RequestObj 与第一个心跳 RequestObj 完全相同（相同的对象 id/地址）。但是不更新的时间呢？

```
//Sample Server side code sending heartbeat
public class ServerSocketWrapper {
   Socket socket;
   ObjectOutputStream oos;
   ...
   RequestObj heartbeat = New RequestObj(TYPE_HEARTBEAT);

   public void sendHeartBeat() {
      heartbeat.setTime();
      logger.info("HeartBeat {} {}", heartbeat.time, formatFullTime(heartbeat.time));
      oos.writeObject(heartbeat);
      oos.flush();
   }
} 
```

这是一些示例客户端代码：

```
//Sample Client side code receiving heartbeat
public class ClientSocketWrapper {
   Socket socket;
   ObjectInputStream ois;
   long heartbeatTime;
   ...

   public void run() {
      while(true) {
         Object obj = ois.readObject();
         if (obj instanceof RequestObj) {
            RequestObj req = (RequestObj) obj;
            if (req.type == TYPE_HEARTBEAT) {
       heartbeatTime = req.time;
               logger.info("Received heartbeat {} {} {}", heartbeatTime, formatFullTime(heartbeatTime), req);
               sendResponse(new ResponseObj(req.id, TYPE_HEARTBEAT));
            }
         }
         ...
      }
   }
} 
```

这是日志

```
logs on the server
16:33:56.186 [pool-2-thread-2] INFO  ServerSocketWrapper - HeartBeat 1352842436186 2012-11-13 16:33:56.186
16:34:56.185 [pool-2-thread-2] INFO  ServerSocketWrapper - HeartBeat 1352842496185 2012-11-13 16:34:56.185
16:35:56.185 [pool-2-thread-1] INFO  ServerSocketWrapper - HeartBeat 1352842556185 2012-11-13 16:35:56.185

logs on the client
16:34:08.510 [server:port] INFO  ClientSocketWrapper - Received heartbeat 1352842436186 2012-11-13 16:33:56.186 RequestObj@8497904
16:35:06.758 [server:port] INFO  ClientSocketWrapper - Received heartbeat 1352842436186 2012-11-13 16:33:56.186 RequestObj@8497904
16:36:10.303 [server:port] INFO  ClientSocketWrapper - Received heartbeat 1352842436186 2012-11-13 16:33:56.186 RequestObj@8497904 
```

为什么客户端收到的时间没有更新？JVM 是否在做某种对象缓存？服务器在 jdk 1.7.07 64b 上运行，而客户端在 jdk 1.6.31 64b 上运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:19:10.523

如果使用相同的对象多次写入单个对象`ObjectOutputStream`，`ObjectOutputStream`则将识别出它已经看到该对象并将其编码为对现有对象的引用。这就是序列化能够保留引用别名的方式。

如果您不希望跨消息进行引用跟踪，请为每条新消息（或来自的and ）构造一个新的`ObjectOutputStream`and对。如果您不执行其中任何一项，而是从不修改和重用消息对象，您将不会遇到修改不被看到的问题，但您会泄漏资源，因为它将持有对它所在的每个对象的强引用曾经反序列化。`ObjectInputStream`[`#reset`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html#reset%28%29)`ObjectOutputStream`[`#readUnshared`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectInputStream.html#readUnshared%28%29)`ObjectInputStream``ObjectInputStream`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:18:44.300

是的，一旦通过 ObjectOutputStream 发送对象，重新发送它，即使修改，也只会发送对先前发送对象的引用，除非[`reset()`](http://docs.oracle.com/javase/6/docs/api/java/io/ObjectOutputStream.html#reset%28%29)在流上调用。

# c - 在 C 中无需替换即可在 R 代码中使用的采样

> ID：13369794
> 
> 赞同：3
> 
> 时间：2012-11-13T22:13:46.560
> 
> 标签：c, r

我正在尝试在 C 中编写一个将由 R 调用的函数。在其中我需要随机抽样而不从向量中替换。Rmath.h 是否可以在 R 中使用类似 sample() 的东西？如果没有，有谁知道我为什么会得到

```
 Symbol not found: _gsl_rng_mt19937 
```

当我尝试调用包含（使用适当的标头）的 dyn.load() 代码时：

```
 #include <gsl/gsl_randist.h>
      #include <gsl/gsl_rng.h>

     void update_infs (int *inds,
      int *inf_times,
      int *n,
      int *n_inf,
      int *locs,
      int *Rinds,
      double *logmean,
      double *logsd,
      double *alpha,
      double *wts,
      int *indices  /* a vector 1:n */
      ) { 
    ...

   /* set up GSL RNG */
   gsl_rng * rng = gsl_rng_alloc(gsl_rng_mt19937);
   /* end of GSL setup */
    ...
   gsl_ran_choose(rng, tmp_inf_me, Rinds[i], indices, *n, sizeof (double));
    ... } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-14T04:17:28.023

可能需要使用类似的命令编译共享对象

```
export PKG_CFLAGS=`gsl-config --cflags`
export PKG_LIBS=`gsl-config --libs` 
```

进而

```
R CMD SHLIB gsl.c 
```

或者

```
PKG_CFLAGS=`gsl-config --cflags` PKG_LIBS=`gsl-config --libs` R CMD SHLIB gsl.c 
```

这告诉编译器在哪里寻找头文件，以及链接器在哪里找到要链接的库。在编译和链接期间，命令应包含 和 的输出，`gsl-config --cflags`与`gsl-config --libs`

```
gcc -std=gnu99 -I/home/mtmorgan/bin/R-devel/include -I/usr/local/include -I/usr/include -fpi -c gsl.c -o gsl.o 
```

在编译和

```
gcc -std=gnu99 -shared -L/usr/local/lib64 -o gsl.so gsl.o -L/usr/lib -lgsl -lgslcblas -lm -L/home/mtmorgan/bin/R-devel/lib -lR 
```

在链接期间。成功的考验是

```
R -e 'dyn.load("gsl.so")' 
```

`src/Makevars`在一个包中会有一个文件

```
PKG_CFLAGS = `gsl-config --cflags`
PKG_LIBS = `gsl-config --libs` 
```

并且，对于`gsl-config`可能不可用但用户已设法安装 gsl 并设置环境变量的 Windows `LIB_GSL`，一个文件`src/Makevars.win`

```
PKG_LIBS += -L$(LIB_GSL)$(R_ARCH)/lib -lgsl -lgslcblas -lm
PKG_CPPFLAGS += -I$(RHOME)/src/include -I$(LIB_GSL)$(R_ARCH)/include 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:37:30.980

在我忘记包含或共享库之前，我曾遇到过这些类型的“未找到符号”错误——这两者在 gsl 中都是必需的，即 gcc -I/usr/include/gsl foo.c -o foo -l： /usr/lib/libgsl.so。

PS，R（sample（）或一些外部库）中可用的采样算法是否性能不够？我很惊讶这将成为除少数真正大数据项目外的所有项目的瓶颈......

# python - mongo db 数据库存储在本地硬盘上的什么位置？

> ID：13369795
> 
> 赞同：6
> 
> 时间：2012-11-13T22:13:48.597
> 
> 标签：python, macos, mongodb, amazon-ec2

我正在抓取推文并将它们插入到 mongo 数据库中，以便在 python 中进行分析工作。我想检查我的数据库的大小，这样如果我在亚马逊上运行它就不会产生额外的费用。我如何知道我当前的 mongo 数据库在 osx 上有多大？免费套餐会覆盖我吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-02-20T22:59:38.217

**为后代：**

运行 mongo 外壳：`mongo`

在 shell 中运行：`db.adminCommand("getCmdLineOpts")`

这将给出相关文件的位置，包括 db 路径。这是我运行 mongo 的两台机器的结果。

```
"parsed": {
    "config": "/usr/local/etc/mongod.conf",
    "dbpath": "/usr/local/var/mongodb",
    "logappend": "true",
    "logpath": "/usr/local/var/log/mongodb/mongo.log"
    },

"parsed" : {
    "config" : "/etc/mongodb.conf",
    "dbpath" : "/var/lib/mongodb",
    "logappend" : "true",
    "logpath" : "/var/log/mongodb/mongodb.log",
}, 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T22:19:24.117

我相信在 OSX 上，默认位置是`/data/db`. 但是你可以检查你的配置文件`dbpath`来验证值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T22:16:42.187

默认情况下，数据库存储在`/data/db`（但某些环境会覆盖它并使用`/var/lib/mongodb`）。您可以通过查看`db.stats()`（特别是`fileSize`）MongoDB shell 中的总数据库大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-14T22:03:49.293

```
> use database
switched to db database
> db.stats()
{
"db" : "database",
"collections" : 4,
"objects" : 32,
"avgObjSize" : 173.25,
"dataSize" : 5544,
"storageSize" : 24576,
"numExtents" : 4,
"indexes" : 3,
"indexSize" : 24528,
"fileSize" : 201326592,
"nsSizeMB" : 16,
"ok" : 1
} 
```

dataSize - 你的数据消耗的大小

fileSize - 包含所有集合的 mongo db 文件

indexSize - 是您在该集合上创建的任何索引的大小

nsSizeMB - 对你的集合有多大的限制（这不是 mongo 限制，它只是为了阻止开发人员在无限循环中轰炸集合）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-22T22:13:13.533

如果您在 windows 中运行 node.js，请确保安装 windows mongodb 设置。它不附带 node.js。

[http://www.mongodb.org/](http://www.mongodb.org/)

# python - subprocess.Popen sterr 到字符串

> ID：13369796
> 
> 赞同：0
> 
> 时间：2012-11-13T22:13:50.563
> 
> 标签：python, subprocess

我想调用一个进程并将其 stdd 和 stout 输出到一个字符串以供检查。此代码触发 Unexpected 错误块。

```
try:
    proc = subprocess.Popen('ls -ddd 1>&2', stdout=subprocess.PIPE,  stderr=subprocess.PIPE,)
    stdout,stderr = proc.communicate()
    if len(stderr)>1:
        actualResult =stderr
    else:
        actualResult =stdout
    print actualResult
except:
    print "Unexpected error" 
```

我基于[http://www.oreillynet.com/onlamp/blog/2007/08/pymotw_subprocess_1.html](http://www.oreillynet.com/onlamp/blog/2007/08/pymotw_subprocess_1.html)但显然缺少一些东西。是否可以在 try 块内执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:17:56.397

您永远不应该使用通用`Except`子句，因为这会捕获*任何*异常并阻止您修复脚本（每个异常都会被捕获，那么您怎么知道发生了哪一个？）。

在这里，如果您删除 except 块，您将面临一个`OSError: [Errno 2] No such file or directory`. 这意味着`subprocess.Popen`尚未在您的路径上找到您要求的可执行文件。

发生这种情况是因为您没有`shell = true`接听`Popen`电话。
不通过`shell = True`这意味着`subprocess.Popen`正在寻找一个名为 的可执行文件`"ls -ddd 1>&2"`，这相当于 `"ls -ddd 1>&2"`在您的提示符下逐字写入，并会导致“找不到命令！”
（除非您碰巧有一个文件名中带有空格和＆符号的可执行文件！）

这当然*不是*你想要的，你想要的是`ls`用参数调用命令`-ddd`并重定向`1>&2`。

* * *

长话短说，添加`shell = True`到您的通话中。

# java - 如何更改单个实例的 Java 方法实现？

> ID：13369800
> 
> 赞同：1
> 
> 时间：2012-11-13T22:14:24.903
> 
> 标签：java, groovy, metaprogramming

更改单个*java 对象*的方法签名的正确方法是什么。假设我想改变`toString`方法。

```
myObject.metaClass.toString = { pritln "hello world" } 
```

看起来这段代码有问题。如果我将我的对象传递给其他 Java 编译对象，则原始对象`toString`将被调用。

其他[解决方案](https://stackoverflow.com/questions/4035784/how-do-you-override-a-method-for-a-java-type-instance-with-groovy-meta-programmi)创建 wrapper `Object`。它与原来的等级不同，所以它不能满足我

* * *

**补充：**
1.我无法控制创建过程
2.我不知道对象是如何实例化的

那么没有解决这个问题的***常规方法吗？***唯一的解决方案是创建 Java 包装类，包装所有方法并更改一个？这是一个 ...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T22:20:46.273

如果您想创建一个更改了单个方法的对象，有一种方法可以使用“匿名类”来实现。

每当创建您的对象时：

```
MyClass myObject = new MyClass() {
    public String toString() {
        ...implementation...
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T22:20:19.133

你可以使用一个匿名子类吗？这只会覆盖该`toString()`单个实例中的方法。

```
MyObject myObject= new MyObject (){
    @Override
    public String toString (){
         println "hello world"
    }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T22:19:47.933

您对元类所做的任何更改仅对 groovy 可见。

java不知道metaClass的存在，所以显然不能调用它定义的任何替换方法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T22:21:12.543

创建一个扩展原始的包装器：

```
public class wrapper extends myObject{
    public toString{
        System.out.println("hello world");
    }
} 
```

# node.js - nodejs mongodb 分离 ec2 实例

> ID：13369806
> 
> 赞同：0
> 
> 时间：2012-11-13T22:14:58.777
> 
> 标签：node.js, mongodb, amazon-ec2, node-mongodb-native

我有一个测试应用程序使用 node-mongodb 本机驱动程序成功运行，node.js 和 mongod 在同一实例上运行。现在我正在尝试进入生产阶段，并在同一可用区为节点设置了 2 个单独的 ec2 实例 1，另一个用于 mongod，

到目前为止，我看到的所有示例都具有以下形式：（如本机驱动程序的 github 页面所述）

```
var client = new Db('test', new Server("127.0.0.1", 27017, {})) 
```

在我的情况下，我应该如何打开数据库连接？我想使用 ec2 的私有 IP，因为它会更快（我的两个实例都在同一个可用区）

我已经在 ec2 中设置了 2 个安全组：db 和应用程序以及授权应用程序去 db，如此处所述[http://www.mongodb.org/display/DOCS/Amazon+EC2+Quickstart#AmazonEC2Quickstart-ConfigureStorage](http://www.mongodb.org/display/DOCS/Amazon+EC2+Quickstart#AmazonEC2Quickstart-ConfigureStorage)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:10:34.240

您需要在 db server 安全组上打开端口到 27017 上的 app server 安全组，并将 ip 从 localhost 更改为 db server 的内部 ip。就 EC2 而言，应该这样做。

# django - Django - SMTPAuthenticationError

> ID：13369808
> 
> 赞同：3
> 
> 时间：2012-11-13T22:15:13.013
> 
> 标签：django, smtp, python-2.7, django-registration, webfaction

我在测试帐户注册表单时收到此错误。我正在使用 django-registration 包。我有所有必要的模板文件。我正在使用 WebFaction 进行托管。我是 Django 和 Python 的初学者。请像我五岁一样跟我说话。

```
SMTPAuthenticationError at /accounts/register/<br>
(535, '5.7.0 Error: authentication failed: authentication failure')

Environment:

Request Method: POST
Request URL: mywebsite.com/accounts/register/

Django Version: 1.4.1
Python Version: 2.7.3
Installed Applications:
('django.contrib.admin',
 'django.contrib.admindocs',
 'django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.humanize',
 'django.contrib.messages',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.staticfiles',
 'registration')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/home/fireflyltd/webapps/foster/lib/python2.7/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "build/bdist.linux-x86_64/egg/registration/views.py" in register
  187\.             new_user = backend.register(request, **form.cleaned_data)
File "build/bdist.linux-x86_64/egg/registration/backends/default/__init__.py" in register
  79\.                                                                     password, site)
File "/home/fireflyltd/webapps/foster/lib/python2.7/django/db/transaction.py" in inner
  209\.                 return func(*args, **kwargs)
File "build/bdist.linux-x86_64/egg/registration/models.py" in create_inactive_user
  85\.             registration_profile.send_activation_email(site)
File "build/bdist.linux-x86_64/egg/registration/models.py" in send_activation_email
  264\.         self.user.email_user(subject, message, settings.DEFAULT_FROM_EMAIL)
File "/home/fireflyltd/webapps/foster/lib/python2.7/django/contrib/auth/models.py" in email_user
  374\.         send_mail(subject, message, from_email, [self.email])
File "/home/fireflyltd/webapps/foster/lib/python2.7/django/core/mail/__init__.py" in send_mail
  61\.                         connection=connection).send()
File "/home/fireflyltd/webapps/foster/lib/python2.7/django/core/mail/message.py" in send
  248\.         return self.get_connection(fail_silently).send_messages([self])
File "/home/fireflyltd/webapps/foster/lib/python2.7/django/core/mail/backends/smtp.py" in send_messages
  85\.             new_conn_created = self.open()
File "/home/fireflyltd/webapps/foster/lib/python2.7/django/core/mail/backends/smtp.py" in open
  54\.                 self.connection.login(self.username, self.password)
File "/usr/local/lib/python2.7/smtplib.py" in login
  613\.             raise SMTPAuthenticationError(code, resp)

Exception Type: SMTPAuthenticationError at /accounts/register/
Exception Value: (535, '5.7.0 Error: authentication failed: authentication failure') 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T22:59:50.363

您需要将 SMTP 服务器设置添加到`settings.py`文件中。例子：

```
EMAIL_HOST = 'smtp.example.com'
EMAIL_PORT = 25
EMAIL_HOST_USER = 'mailer@example.com'
EMAIL_HOST_PASSWORD = 'password'
EMAIL_USE_TLS = True 
```

来自 Django[文档](https://docs.djangoproject.com/en/1.4/topics/email/)：

> 使用 EMAIL_HOST 和 EMAIL_PORT 设置中指定的 SMTP 主机和端口发送邮件。EMAIL_HOST_USER 和 EMAIL_HOST_PASSWORD 设置（如果设置）用于对 SMTP 服务器进行身份验证，EMAIL_USE_TLS 设置控制是否使用安全连接。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-16T18:11:23.377

为您在此处用作 EMAIL_HOST 的 gmail 帐户**设置**允许 lesssecureapps **https://myaccount.google.com/lesssecureapps**
[以及](https://myaccount.google.com/lesssecureapps) settings.py 中的此设置

```
EMAIL_HOST = 'smtp.example.com'
EMAIL_PORT = 25
EMAIL_HOST_USER = 'mailer@example.com'
EMAIL_HOST_PASSWORD = 'password'
EMAIL_USE_TLS = True 
```

# objective-c - UIView 子类：performSelecter:withDelay：说 5 秒，但视图在第 3 秒被删除？

> ID：13369810
> 
> 赞同：0
> 
> 时间：2012-11-13T22:15:20.033
> 
> 标签：objective-c, ios, uiview, performselector

我有一个 UIView 子类，在某些情况下我需要改变它的颜色一段时间，比如 5 秒，然后改变颜色，我使用的方法是`performSelector:afterDelay:`，我传入的选择器是改变颜色，我想知道如果在触发颜色更改方法之前从超级视图中删除视图，那么它会导致任何问题吗？还是因为视图对象本身不存在而没有调用它？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:27:23.860

当您发送`performSelector:withObject:afterDelay:`到您的视图时，视图本质上会创建一个计时器。计时器保留视图和参数对象（`UIColor`在您的情况下可能是 a ）。因此，即使您从其父视图中删除该视图，计时器仍会保留该视图并防止它被释放。

当计时器触发时，它将更改（屏幕外）视图的背景颜色，然后释放视图。如果这是对视图的最后一个强引用，则视图将被释放。

当您更改不在窗口层次结构中的视图的背景颜色时，视图只会记住其新的背景颜色设置，但不会做任何其他事情，例如尝试在屏幕上绘制自己。

因此`performSelector:withObject:afterDelay:`，即使您在延迟到期之前将视图从其超级视图中删除，使用更改视图的背景颜色也不应该导致任何问题。

# javascript - 如何确保可以从 IE 的新窗口中读取 cookie？

> ID：13369813
> 
> 赞同：4
> 
> 时间：2012-11-13T22:15:34.760
> 
> 标签：javascript, jquery

我目前正在使用 javascript 并尝试通过 cookie 将 sessionGUID 传递到使用 IE9 新打开的窗口。我希望避免将 sessionGUID 放在查询字符串上。

我正在使用以下代码打开新窗口并将 cookie 分配给新窗口：

```
var pathname = /msgViewer.htm?A=" + aGUID + "&Detached=yes"; 
var myWindow = window.open(pathname, "detached_window");
myWindow.document.cookie = "SG=" + sGUID; 
```

但是，当 (document).ready 在新窗口中执行时，cookie 似乎没有设置。

```
$(document).ready(function () {
...
sGUID = getCookie("SG");
...
[call to AJAX webservice that requires sGUID be passed]

...

    function getCookie(name) {
    var dc = document.cookie;
    var prefix = name + "=";
    var begin = dc.indexOf("; " + prefix);
    if (begin == -1) {
        begin = dc.indexOf(prefix);
        if (begin != 0) return null;
    }
    else {
        begin += 2;
        var end = document.cookie.indexOf(";", begin);
        if (end == -1) {
            end = dc.length;
        }
    }
    return unescape(dc.substring(begin + prefix.length, end));
} 
```

当我在 getCookie 调用后设置（测试）警报时，sGUID 未定义，但是警报引起的延迟（用户输入）允许在此之后读取 cookie。

如何确保在 $(document).ready 执行之前在新窗口中设置 cookie？...或者至少确保在从 cookie 中检索 sessionGUID 之前不调用 web 服务？

该问题在 FireFox 或 Chrome 中不存在——仅在 IE 中。

提前感谢您的考虑...

更新 (20121115)：此链接[http://ellislab.com/forums/viewthread/220241/](http://ellislab.com/forums/viewthread/220241/)表明 cookie 数据在发出页面请求之前可能不可用。上述情况通常只发生在初始登录期间或删除 cookie 之后（并且仍然断断续续）我当前的解决方案/解决方法是打开和关闭临时窗口并重新检索 cookie。由于无论如何都会在打开新窗口时发生此问题，因此额外的窗口闪烁并不明显。我还将 cookie 的检索移到了 $(document).ready 函数之外。这是附加代码：

```
sGUID = getCookie("SG");
if (sGUID == null) {
    var jwURL = "/Test.htm";
    jw = window.open(jwURL, "junk_window",width=1,height=1);
    jw.close();
    sGUID = getCookie("SG");
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T13:40:17.960

“更新 20121115”（打开/关闭临时窗口）确实解决了我的问题。我最终确实使用了不同的 getCookie 函数来检索 cookie-但这与我最初的问题没有直接关系：

```
 function getCookie(c_name) {
        var i, x, y, ARRcookies = document.cookie.split(";");
        for (i = 0; i < ARRcookies.length; i++) {
            x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
            y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
            x = x.replace(/^\s+|\s+$/g, "");
            if (x == c_name) {
                return unescape(y);
            }
        }
    } 
```

# javascript - 从外部js中的函数加载jqueryui模式对话框

> ID：13369814
> 
> 赞同：0
> 
> 时间：2012-11-13T22:15:39.013
> 
> 标签：javascript, asp.net-mvc, jquery-ui, modal-dialog, jquery-ui-dialog

在 ASP.NET MVC 中，我试图通过调用驻留在外部 js 文件中的函数来显示 jqueryUI 模式对话框。这样做的原因是我想在某个地方编写一个 js 方法，然后用一些参数调用它，而不是在每个页面上复制粘贴它。

这是我的 CustomFunctions.js 文件：

```
function CustomFunctions() { };

CustomFunctions.prototype.loadModalDialog = function (dialogDivID, callerElementDivID, dialogSize, actionControllerName, container)
{
  var dialogElement = $('#' + dialogDivID);
  var callerElement = $('#' + callerElementDivID);
  dialogElement.dialog
  (
    {
        autoOpen: false,
        show: "slide",
        width: dialogSize,
        resizable: false,
        modal: true
    }
  );

callerElement.click(function() 
{
    dialogElement.load("@Url.Action(" + actionControllerName +")", function() 
    {
        $(container).dialog('open');
    });
    return false;
}) 
```

}

现在，在我的 List.cshtml 视图中，我编写了以下内容：

```
@Html.ActionLink(
        "click me", 
        "List", 
        new {string.Empty},
        new { onclick = "Javascript:showModal();" }
        );

@Scripts.Render("~/bundles/custom");
<script>
    function showModal()
    {
        var custom = new CustomFunctions();
        custom.loadModalDialog("my-dialog", "show-modal", 400, "List", this);
    }
</script> 
```

问题是模式对话框没有弹出。在客户端调试时，它进入 loadModalDialog，它正确地找到了所有变量，它遍历了所有 js 代码，没有抛出错误（这让我感到困惑）但没有显示对话框。

我错过了什么吗？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:26:47.103

这在外部 js 文件中不起作用

> "@Url.Action(" + actionControllerName +")"

这在与模板内联时有效，因为模板在发送到客户端之前已被 prased 和渲染。当它被放入外部 js 文件时，它是一个文字字符串。

> custom.loadModalDialog("my-dialog", "show-modal", 400, "List", this /*可能不是你所期望的*/);

`this`在代码中的这一点传递是传递文档或窗口对象。然后您尝试调用`dialog('open')`容器，这不是您期望的对话框对象。

还有在`document.ready`事件之外调用 jquery 的问题。除非`showModal()`在页面加载后调用 jquery 函数将不起作用。

任何最新的浏览器都有一个用于调试 js 的 javascript/控制台。

# c - UNIX 中的 Fork() 是否创建一致或顺序运行的进程？

> ID：13369821
> 
> 赞同：2
> 
> 时间：2012-11-13T22:16:17.087
> 
> 标签：c, process, fork, minix

当在类似 Unix 的操作系统（即 MINIX 3）中运行的程序中使用 fork() 函数时，它是否会创建许多单独的进程，这些进程是独立处理的，因此可以提前完成（这实际上是我想要）还是会创建一系列顺序流程，这些流程仅按照它们创建的顺序完成。

这是我用来 fork() 的代码

```
 for(j = 0; j < num_fork_loops;) {
       if (fork() < 0) {
          printf("Fork has failed\n");
          exit(EXIT_FAILURE);
       }
       j++;
     } 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T22:18:25.440

`fork()`立即返回，两次。所有进程都是正常运行的进程，由操作系统单独调度。通常它们将同时运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T23:28:25.020

请参阅 POSIX[基本原理`fork`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/fork.html)，尤其是以下文本：

> IEEE Std 1003.1-1988 忽略了要求同时执行 fork() 的父项和子项。单线程处理的系统显然不是预期的，并且被认为是本卷 POSIX.1-2008 的不可接受的“玩具实现”。对“独立执行”这一短语预期的唯一反对意见是可测试性，但这个断言应该是可测试的。这样的测试要求父母和孩子都可以阻止对方的可检测动作，例如写入管道或信号。系统应该可以进行此类操作的交互式交换，以符合本卷 POSIX.1-2008 的意图。

的所有历史实现`fork`都提供了并发执行，这始终是意图。它在标准的现代版本中明确说明，如

> 在 fork() 之后，父进程和子进程都应该能够在任一进程终止之前独立执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:28:16.717

恕我直言，您的代码是正确的：

```
 Upon successful completion, fork() returns a value of 0 to the child
 process and returns the process ID of the child process to the parent
 process.  Otherwise, a value of -1 is returned to the parent process, no
 child process is created, and the global variable errno is set to indi-
 cate the error. 
```

但可能它没有达到您的预期，如果所有分叉都成功，它会创建 2^num_fork_loops。如果分叉失败，它会返回 -1 并且您检查返回值是正确的，但如果成功，它会返回 0孩子和父亲的PID（始终为正），因此在这种情况下，子进程也将开始创建其他进程。
通过使子进程执行其他操作来更正代码（除非您想要 2^N 个进程）：

```
for(j = 0; j < num_fork_loops;j++) {
   pid_t pid=fork();
   if (pid < 0) 
   {
      printf("Fork has failed\n");
      exit(EXIT_FAILURE);
   }
   else if(pid==0)
   {
       j=num_fork_loops; // avoid to continue the loop for the child
       child_routine();
   }
   else
   {
       // This is the father, in case of success of the fork
       j++;
   }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T22:19:09.713

例如，您应该只看一下[手册页](http://www.kernel.org/doc/man-pages/online/pages/man2/fork.2.html)。当您`fork()`创建的流程相同时，您不知道它们的执行顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T22:20:23.857

请参阅[fork 手册页](http://linux.die.net/man/2/fork)：

> fork() 通过复制调用进程来创建一个新进程。新进程（称为子进程）与调用进程（称为父进程）完全相同，但以下几点除外：

`fork()`新进程与父进程并行运行，从调用返回后都继续执行。

# knockout.js - 你如何设计你的 kendoUI 组合框？

> ID：13369826
> 
> 赞同：0
> 
> 时间：2012-11-13T22:16:36.713
> 
> 标签：knockout.js, kendo-ui, knockout-2.0

这是我使用 mvc3 包装器的 kendoUI 组合框。

```
@(Html.Kendo().ComboBoxFor(x => x.K1State)
                           .Name("ddK1State")
                           .DataTextField("Name")
                           .DataValueField("Id")
                           .BindTo((List<StateVM>)ViewData["State"])
                           .HtmlAttributes(new { @class = "input-small", @Id = "ddK1State", @style = "width:88px;" })
                           .Events(events => events.Change("onK1StateChange"))) 
```

我可以使用类和风格。

```
.HtmlAttributes(new { @class = "input-small", @Id = "ddK1State", @style = "width:88px;" }) 
```

我使用 kendo-knockout.js 文件更改它。

```
<input data-bind=" kendoComboBox: { enabled: k1Address.isStateMutable,  dataTextField: 'Name', dataValueField: 'Id', data: states, value: k1Address.stateId, htmlAttributes: 'new {style=\'width: 88px;\'}'}" /> 
```

这种风格不起作用。我在组合框文档中找不到“htmlAttributes”，可能这就是它不起作用的原因。

[http://docs.kendoui.c​​om/api/web/combobox](http://docs.kendoui.com/api/web/combobox)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:30:57.723

为什么不直接给输入元素设置样式呢？

```
<input style="width:80px" ... /> 
```

没有像 JavaScript 小部件的 HtmlAttributes 这样的概念——它只是在 MVC 世界中使用。

# javascript - 通过 Javascript 访问我的整个浏览历史记录

> ID：13369829
> 
> 赞同：19
> 
> 时间：2012-11-13T22:16:49.327
> 
> 标签：javascript

如果我单击浏览器上的历史选项卡，我可以访问一个文件夹，其中包含我访问过的所有链接，按日期组织。

如何使用 Javascript 以编程方式访问它？我还是 Javascript 的新手，但我想要类似的东西：

```
var aListOfDateLinkPairs = window.history.some_get_list_function; 
```

我确信这对于某些任意实体来说是一个很大的隐私问题，但是如果我想在自己的浏览器中为自己（以编程方式）实现这一点怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-13T22:22:10.987

一般来说，历史记录受到浏览器的保护，以防止 javascript 访问它，除非通过后退和前进功能。有一些黑客可以查看一些历史记录，但它们只是——黑客。

如果您想以编程方式查看/修改历史记录，您可以通过浏览器插件来实现。例如，Chrome 插件可以使用[这个 API](http://developer.chrome.com/extensions/history.html)

编辑

[Mozilla在此处](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)也有一些关于 Javascript 可用的历史修改的信息。

看起来[这个问题](https://stackoverflow.com/questions/12901076/accessing-history-in-a-firefox-addon)也谈到了你需要的一些相同的东西。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-13T23:18:45.307

Javascript 仅在您的页面控制浏览器后才提供基本调用，例如：

```
history.length
window.history.back()
history.forward()
window.history.go(-3) 
```

但是，如果您要编写自己的浏览器，那么您将使用 3GL，在这种情况下，您将完全控制用户在您提供的搜索或地址字段中输入的内容，因此您应该不会有任何问题如果您知道自己在做什么，请记录用户所做的事情。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-13T22:42:18.003

简短回答不，您无法通过通用 Javascript 访问浏览器的历史记录。

您可以创建一个跨浏览器的扩展，例如：[http ://crossrider.com/](http://crossrider.com/)

用于访问存储的文档`Places`，它使您能够访问浏览器的历史记录在 firefox 中：[https ://developer.mozilla.org/en-US/docs/Using_the_Places_history_service](https://developer.mozilla.org/en-US/docs/Using_the_Places_history_service)

对于 chrome，它在这里：http: [//developer.chrome.com/extensions/history.html](http://developer.chrome.com/extensions/history.html)

有一个`Places`名为的文件`Places.sqlite`是一个 sqlite 数据库，如果您要构建一个从该文件读取的本地应用程序，而不是从浏览器访问它，那在我看来会更简单。

您还可以使用[https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/](https://addons.mozilla.org/en-us/firefox/addon/sqlite-manager/) sqlite 管理器，并直接从数据库中根据日期对历史记录进行排序。这是[http://people.mozilla.org/~dietrich/places-erd.png的 ERD](http://people.mozilla.org/~dietrich/places-erd.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-03-31T22:22:28.870

URI模式为下面给出的“唯一”（需要鼠标移动）解决方案`place:`提供了一点潜力。`javascript`

首先注意会话历史（可以通过`History`和访问）与没有直接访问接口`window.history`的整体浏览器历史（在 FF 中这被称为库的一部分，而另一个库部分是书签）之间的区别。 参考：`javascript`

*   [地点查询 URI | MDN](https://developer.mozilla.org/en-US/docs/Places_query_URIs)
*   [历史 - Web API 接口 | MDN](https://developer.mozilla.org/en-US/docs/Web/API/History)
*   Window.history - Web API 接口| 网络上的MDN
    ：`developer.mozilla.org/en-US/docs/Web/API/Window.history`

测试：

```
window.navigator.userAgent=
      Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.4) Gecko/2008102920 Firefox /3.0.4
                                                                                                                               (Splashtop-v1.2.17.0)

```

（不幸的是，对这个主题的熟悉是由于在 Splashtop 系统中由 Device VM 作为 QuickWeb 发布的**严重瘫痪的 FF。）**

**以下是可以执行的操作：**
注意：

*   上面确定的 FF 测试环境 - 使用的一些“约定”可能是专有的，在其他浏览器或 FF 版本中并不普遍可用

*   代价是比1 简单的激活点击更多的人工干预...
    这里建议的解决方案还需要
    2 书签链接 点击
    3 保存 点击
    4 ~ 6 书签打开并选择序列
    7 结果拖放
    8 ~ 10 清理和删除书签中的结果
    （这不是对自动机的整个规则的诅咒，也就是计算机自动化吗？
    js js is js - Just Saying JavaScript is Just [too] "Simple"）

使用 javascript 构造一个`place:`带有适当的方案 URI 并将其添加`.some_get_list_function`到书签。

```
<a href="place:queryType=0&sort=8&maxResults=10"                       title="hysterix">extract history</a> 
```

单击链接失败，但右键单击为其添加书签，然后单击书签“成功”。因此，还不如解决左键单击立即重定向到书签。

```
<a href="place:queryType=0&sort=8&maxResults=10" rel="sidebar" title="hystryx">extract history</a> 
```

`place:`将现在添加书签的URI“ ”拖放`hystryx`到目标`<form><textarea>`中。请注意，一个重要的限制是此过程仅检索历史的 URI，而不检索历史年表、标题等。可以恢复其中的一些信息（例如通过打开每个 URI 来提取它们的标题，这样做当然会改变历史中的 URI“最近访问日期”）以将 URI 呈现为“不错的”链接。

把它们放在一起：

```
data:text/html;charset=utf-8,
<html><title >Heuristic History Hysterics scURIple</title>
<!-- 
http://stackoverflow.com/questions/13369829/access-my-entire-browsing-history-via-javascript
                                                                                               /22773361# 22773361                       -->
<!-- 
   - scURIples (scriples) are generic schema (data:, javascript:, place:, ... ) URI that embed script
   - data: scURIples (scriples) are amenable to direct cut & paste URI address bar evaluation
   - generally no particular distinction is made between scURIples of different schema,
       such as this data: schema URI, but ... 
   - javascript: schema specific scURIples are called scriplets or bookmarklets                                -->
<!-- 
   a bookmark of this data: scURIple or its internal javascript: scriplet does the same thing             -->
<!--
  a place[s]: schema URI "works" from a bookmark only and not the address bar or a hyperlink      -->
<!-- for internal use only (by the scURIbbler used to edit this script):  
       javascript: with ( opener . document . forms[0] . JS ) value = 
                                        value . replace(  /\t|\n/g, function(c){ return escape(c) + c } )  ; close();//  
       scURIples are unscURIpulous 
              NB. no raw tabs, % 09 's collapse to null, quote raw %'s w/ non-numerics, };'s ,  ...             -->
<script>
javascript:

String.prototype.HTMLtagWrap   =
    function ( tag,  attrs)  { 
        return  tag[0]=="/" ?
            "<"  +tag+                                ">"  +this+  "<"  +tag.substr(1)+  (attrs?" "+attrs:"") +  ">"    :
            "<"  +tag+ (attrs?" "+attrs:"") + ">"  +this+  "</"  +tag+                                                 ">"
    }  ;

String.prototype.HTMLwrapTags =
   function ( tagRA, atRA) { 
      return tagRA[0] ? this . HTMLtagWrap( tagRA.pop(), atRA.pop()) . HTMLwrapTags( tagRA, atRA)
                                :  this
   }  ;

/* alert */ ( str =
( function(x){return x.HTMLtagWrap('title') + x.HTMLwrapTags(['/pre','center','b'] , [ ] ) }
                               ('Heuristic History Hysterics')+
    '1\. '.HTMLtagWrap('b') +
    '<input     id=URIplcQry     type=text    size=120  ' +
                           'value="place:queryType=0&sort=8&maxResults=25" >\n' +
    'suggestions:\t try just a raw place: with no corpus or places: (undocumented with an s)\n' + 
    'auto attribution:\t' + 
    '<input type=button onclick=URIplcQry.value+="&"+this.value  value=sort=4                        >  \t' + 
    '<input type=button onclick=URIplcQry.value+="&"+this.value  value=type=5                       >  \t' + 
    '<input type=button onclick=URIplcQry.value+="&"+this.value  value=queryType=1            >\t  ' + 
    '<input type=button onclick=URIplcQry.value+="&"+this.value  value=domain=""                 >\t  ' + 
    '<input type=button onclick=URIplcQry.value+="&"+this.value  value=includeHidden=true  >\t   ' + 
    '<input type=button onclick=URIplcQry.value+="&"+this.value  value=onlyBookmarked=true >\t' + 
    '\n\n2\. '.HTMLtagWrap('b') +
    'This link bookmarks the place: URI from step 1: '  +
    'place: query URI href results' .
        HTMLtagWrap(  'A', 
            ' href="places:"  rel="sidebar"  title="hystryx  " id="hystryx  " ' +
            ' onmouseover ="with(this)title=id+(href=document.forms[0].URIplcQry.value)"  '
        ) +
    '\t(hint: to see the actual link, mouse over it 2x)'  +
    '\n\n3\. '.HTMLtagWrap('b',   ' style="vertical-align:top;" '  ) +
  ( '\n\t\t\tINSTRUCTIONS\n\n' +
    '1\. make the href place: query for the link in step 2\. \n' +
    '2\. click the link to create a bookmark that accesses the URI library\n' +
    '3\. drag & drop the new bookmark (aka a container) here (replace this content)\n' +
    '4\. cleanup and delete the new bookmark if desired\n'  +
    '5\. to be done: add a scURIbbler to massage this textarea\n'  +
    '\n\n' +
    'tested with userAgent:\t\t\t\t'  +
    'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.0.4) Gecko/2008102920 Firefox/3.0.4'  +
                                                                                                         '(Splashtop-v1.2.17.0) \n'  +
    '\twindow.navigator.userAgent =\t\t'  + window.navigator.userAgent +
    '\n ' 
  ) .HTMLtagWrap('textarea', 'id=histURIs  rows=12 cols=120 nowrap') +
   '\n\n4\. ...'.HTMLtagWrap('b') +
   '\n\n5\. '.HTMLtagWrap('b') +
   'scURIbbler:  <input   type=text    size=120  id=histURIpg ' +
       ' value="javascript:with(opener)with(document.forms[0]) '                                              +
           ' ( URIplcQry.value.HTMLtagWrap(\'b\') + '                                                                  +
              ' histURIs.value.replace(/^.*$/g,function(m){return m.link(m)}) '                              +
          '  ).HTMLwrapTags( \'html pre\'.split(/ +/) , [ ] ) '                                                                     +
    ' "><input type=button value="open histURIs" onclick=window.open(histURIpg.value )>  ' +
    '  '
)  .  HTMLwrapTags ( ["html", "form", "pre"] , [ ] ) 
);

/*
window.open (    "data:text/html;charset=utf-8,"  +  str . replace ( /\n/g,  '%'+'0A ' )        );
*/
document.write ( str );

</script>
</html> 
```

# sql-server-2008 - 如何从表中获取最后一条记录

> ID：13369835
> 
> 赞同：0
> 
> 时间：2012-11-13T22:17:44.133
> 
> 标签：sql-server-2008, tsql

我有一张桌子：

**表A**

```
 ID (PK)(Identity seed)
   Key (nvarchar) (Unique Hashed Keys) 
```

数据：

```
 ID          Key
   ----------- --------------------------------------------------
   1           ++0a4rZicJ68kProEpK/ig                            
   2           ++0Coy1S7szg3NjLi2kMLQ                            
   3           ++0eeYiZuRPxsiVVsBcfdg                            
   4           +F07I6n6kLvC/I98So8Y+w                            
   5           +f/RK7VMWIIo5IfUcMujmg 
```

**表 B**：（无 PK）

```
 Content (nvarchar)
   SortKey (nvarchar) 
```

数据 ：

```
 Content          SortKey 
   ----------- --------------------------------------------------
   TEST1           ++0a4rZicJ68kProEpK/ig                            
   TEST2           ++0Coy1S7szg3NjLi2kMLQ                            
   TEST3           ++0eeYiZuRPxsiVVsBcfdg                            
   TEST4           +F/ZdeGRjbC4sP6ulQnOvg                            
   TEST5           +f0+6vJcwY++Xdx5lch1kQ 
   TEST6           +f/RK7VMWIIo5IfUcMujmg <-- Expected Result starts here
   TEST7           +F07I6n6kLvC/I98So8Y+w
   TEST8           +f0990bHYJUOXkyME+0kmg 
```

询问 ：

```
SELECT top 3 * 
FROM 
    TABLEB 
WHERE 
    SortKey > (SELECT top 1 Key 
               FROM TABLEA 
               ORDER BY ID DESC)
ORDER BY 
    SortKey 
```

上面的查询给了我想要的结果，它大于`SortKey`（++1l32JdpYoHzXTCIp4jSA）：

```
TEST6           +f/RK7VMWIIo5IfUcMujmg 
TEST7           +F07I6n6kLvC/I98So8Y+w
TEST8           +f0990bHYJUOXkyME+0kmg 
```

一旦我得到这个结果，我需要再次获得最终（最后一条记录）密钥以在另一个表上进行插入，所以我需要`TEST8`在这种情况下获得密钥，即：f/RK7VMWIIo5IfUcMujmg。

如何在单个查询中执行此操作而不必编写 2 个单独的查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:36:28.800

你可以使用[ROW_NUMBER](http://msdn.microsoft.com/en-us/library/ms186734%28v=sql.100%29.aspx) ()

```
WITH CTE AS 
(
SELECT
      ROW_NUMBER() OVER (ORDER BY CONTENT DESC) rn,
      Content,
      SortKey
FROM   tableb 
WHERE  sortkey < (SELECT TOP 1 [key] 
                  FROM   tablea 
                  ORDER  BY id DESC) 
 )
SELECT 
     Content,
     SortKey 
FROM CTE 
WHERE RN = 1 
```

[演示](http://sqlfiddle.com/#!3/71806/11)

# php - Smarty - 在 MySQL 代码中包含模板文件

> ID：13369838
> 
> 赞同：0
> 
> 时间：2012-11-13T22:17:55.133
> 
> 标签：php, mysql, smarty

我正在使用 WHMCS，并尝试为我的标题菜单创建一个单独的文件。标题菜单是一个多维数组，为了我自己的理智，我希望它保持独立。

我使用 MySQL 代码创建了一个 .php 页面，如下所示：

```
<?php ... 
# To assign variables to the template system use the following syntax.
# These can then be referenced using {$variablename} in the template.
$smartyvalues["variablename"] = $value; 

$list = array();
$result = full_query("SELECT id,title,slug,parent FROM `pages` WHERE title!='404' AND slug!='404'");

...
$smartyvalues["header"] = $list;
# Define the template filename to be used without the .tpl extension
$templatefile = "headermenu"; 
outputClientArea($templatefile);
?> 
```

headermenu.tpl 按原样显示菜单，但是当我尝试将文件包含在其他地方时，菜单是空白的。我添加了一些静态内容，这表明了。我尝试同时使用 {include} 和 {include_php} 无济于事。知道如何在不直接将其放入我需要的文件的情况下显示我的 MySQL 结果吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T00:39:39.763

我想不出通过 .tpl 包含文件的方法，所以我创建了一个 .php 并将其包含在 {include_php} 中。.php 包含我的 MySQL 代码，包含该文件后，我能够根据需要显示 MySQL 结果。

# asp.net - asp:PlaceHolder 内 asp:TableRow

> ID：13369842
> 
> 赞同：0
> 
> 时间：2012-11-13T22:18:14.880
> 
> 标签：asp.net, controls

我需要这个 asp:TableRow 有条件地显示。

```
<asp:TableRow>
    <asp:TableCell><asp:Label id="ExtraAmountType" runat="server" Width="182px"></asp:Label></asp:TableCell>
    <asp:TableCell Width="10%" HorizontalAlign="Right">$&nbsp;<asp:textbox id="MembershipDues" runat="server" Wrap="False" BackColor="#FFFF80" AutoPostBack="True" Width="31px" MaxLength="3" ontextchanged="MembershipDues_TextChanged"></asp:textbox></asp:TableCell>
</asp:TableRow> 
```

我怎样才能做到这一点。我把它包在一个

```
<asp:PlaceHolder ID="memberdues" runat="server"> 
```

标签，但它抱怨：

错误 12 System.Web.UI.WebControls.TableRowCollection 必须具有“System.Web.UI.WebControls.TableRow”类型的项目。“asp:PlaceHolder”的类型为“System.Web.UI.WebControls.PlaceHolder”。

我需要这一行有条件地显示。

我在 Page_Load 中执行此操作：

```
memberdues.Visible = false; 
if (DuesInfo.CredentialsAmount > 0)
{
    // do some other stuff to populate the variables in the placeholder then show it
    memberdues.Visible = true; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:21:17.073

给它一个 ID 并将它的 runat 设置为 server 然后你可以从后面的代码中访问它。

```
<asp:TableRow runat="server" ID="rowExtraAmountType"> 
```

现在可以从后面的事件中访问它：

```
rowExtraAmountType.Visible = (conditional expression); 
```

*编辑：下面显示您的问题编辑*

```
<asp:TableRow runat="server" ID="memberdues"> 
```

然后是后面的代码：

```
memberdues.Visible = (DuesInfo.CredentialsAmount > 0); 
```

# ruby-on-rails - Windows jruby 解释器无法识别类更改

> ID：13369844
> 
> 赞同：0
> 
> 时间：2012-11-13T22:18:30.497
> 
> 标签：ruby-on-rails, windows, jruby

我是 ROR 新手，我在 Windows 上使用 jruby。当我对 lib 文件夹或模型文件夹中的类进行更改时，解释器无法识别它，我必须停止 rails 服务器并重新启动它以使其识别我的更改。显然，这浪费了我很多时间。当我对控制器进行更改时，不会发生此问题。坐在我旁边的那个人使用的是 Mac，并说这不应该发生，可能是 jruby 和 Windows 的问题。

任何人都可以为我阐明这一点吗？我想知道如何重新编译我的代码更改，而不必每次都停止并重新启动 rails。

哦，是的 - 我几周前刚刚安装了 ROR，所以我所有的版本都是最新的。

谢谢，

布赖恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T19:21:45.460

我发现这是由于我的新手错误没有正确命名文件。类名应该是驼峰式（例如EmailLibrary），但文件名应该是标准的ruby 小写（例如email_library.rb）。这是由于 Rails 框架看到“EmailLibrary”的类名，然后查找文件“email_library.rb”但没有找到。因此它不会被 Rails 自动刷新。

# ruby-on-rails - Ruby on Rails - 如何在 Scaffold 中创建外键

> ID：13369846
> 
> 赞同：3
> 
> 时间：2012-11-13T22:18:32.770
> 
> 标签：ruby-on-rails, database, activerecord

我对rails很陌生，所以可能有一个简单的答案。我正在尝试将“user_category”列添加到我的“users”表中，该表引用“user_categories”表。我尝试了以下方法：

```
rails generate migration add_user_category_to_users user_category:integer 
```

接着...

```
rails generate scaffold User_Category title:string description:text 
```

但是在 rake db:migrate 我收到以下错误：

```
==  CreateUserCategories: migrating ===========================================
-- create_table(:user_categories)
rake aborted!
An error has occurred, this and all later migrations canceled:

SQLite3::SQLException: table "user_categories" already exists: CREATE TABLE "user_categories" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "title" varchar(255), "description" text, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T22:23:52.450

Active Record 方式声称智能属于您的模型，而不是数据库。因此，诸如触发器或外键约束等将部分情报推回数据库的功能并未得到大量使用。

validates :foreign_key, :uniqueness => true 等验证是模型强制数据完整性的一种方式。关联上的 :dependent 选项允许模型在父对象被销毁时自动销毁子对象。就像在应用程序级别运行的任何东西一样，它们不能保证引用完整性，因此有些人在数据库中使用外键约束来扩充它们。

尽管 Active Record 没有提供任何工具来直接使用这些特性，但 execute 方法可以用来执行任意 SQL。你也可以使用一些插件，比如 foreigner，为 Active Record 添加外键支持（包括支持在 db/schema.rb 中转储外键）。

[http://guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)

# c# - 从 .NET 应用程序枚举和读取 Java 应用程序的 UI 控件

> ID：13369850
> 
> 赞同：4
> 
> 时间：2012-11-13T22:18:57.453
> 
> 标签：c#, java, .net, interop

我有一个用 Java 编写的应用程序。该应用程序中有几个 UI 控件（文本框、网格、按钮等）。我需要开发 .NET 应用程序，它能够列出 UI 元素并从中读取文本数据。我在获取 Java 应用程序的窗口句柄时没有问题，但之后我被卡住了。

Java 应用程序是第三方的，不能以任何方式修改。我在 Java 方面的经验为零，但在 C# 方面经验丰富。我尝试使用 Java Access Bridge，但它似乎不起作用。据我了解，Java 应用程序需要支持 Java Accessibility API，它可能不支持。

请分享您对类似任务的经验，或者只是为我指明正确的方向。

如何从 Java VM 外部枚举/读取 UI 控件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T12:01:26.640

我找到了解决方案。我的 java 应用程序似乎仍然支持 Java Access Bridge，但一开始我无法让它工作。

提示：

1.  **WinForms**应用程序需要使用 Java Access Bridge API，我试图从控制台 .NET 应用程序访问它。（WPF应该也支持，但我没有测试）

2.  Windows_run 方法应该在**表单的构造函数**中调用。就在您访问任何其他 API 函数之前。

3.  **应在文件accessibility.properties**（文件夹：C:\Program Files\Java\jre7\lib）中启用Java Access Bridge

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:29:17.317

唯一的方法是手动转换 .NET -> Java 或 Java -> .NET，或者可能有一些商业转换器。您可以通过创建实例在 Java VM 中运行 Java 代码，但 Java 没有这样的互操作，它不是 COM。但是，[这](http://www.codeproject.com/Articles/14382/Espresso-Java-NET-Native-Interoperability-Part-I)可能很有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:29:41.203

您需要执行类似于[此 StackOverflow 示例中的代码的](https://stackoverflow.com/questions/2238609/c-sharp-get-handles-to-all-windows-of-a-process)操作来获取所有子窗口，然后使用[WM_GETTEXT](https://stackoverflow.com/a/7741034/1102300)读取文本数据。

# linux - 我如何知道为什么我的 Perl 代码在内核空间中花费了这么多时间（顶部的“sy”）？

> ID：13369856
> 
> 赞同：5
> 
> 时间：2012-11-13T22:19:22.067
> 
> 标签：linux, performance, perl

当我运行我的程序时，“top”报告说我在“sy”（内核空间）上花费了 30+%。

我怎样才能获得有关此的更多信息？什么系统调用一直在消耗等等。

感谢回复者：

*   听起来 Devel::NYTProf 非常适合分析整个程序——但我在 Amazon Linux 上安装它时遇到了麻烦。

*   如果我只想要系统调用的快照，strace 似乎很棒。

更新：我这样做了，系统调用所花费的时间实际上可以忽略不计。我最好的猜测是线程卡在等待某些资源上。下面的答案仍然很好，但任何建议都会有所帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-14T01:49:42.277

你可以使用`strace(1) - trace system calls and signals`. `-c`flag 将产生按系统调用分组的聚合结果。`-p NUM`是要附加的正在运行的进程的 PID。监控爬虫（例如）如下所示：

```
stas@crawler2:~/ScrapMe$ strace -c -p 32184                                                                                                                                                                                              
Process 32184 attached - interrupt to quit
^CProcess 32184 detached
% time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
 48.00    0.000024           0       128           sendto
 26.00    0.000013           0        76           write
 26.00    0.000013           0      2652      2652 stat
  0.00    0.000000           0        24           close
  0.00    0.000000           0       226           poll
  0.00    0.000000           0        78           rt_sigaction
  0.00    0.000000           0        26           rt_sigprocmask
  0.00    0.000000           0        52           alarm
  0.00    0.000000           0        26           socket
  0.00    0.000000           0        26        26 connect
  0.00    0.000000           0        75           recvfrom
  0.00    0.000000           0        26           getsockname
  0.00    0.000000           0        26           getpeername
  0.00    0.000000           0        26           getsockopt
  0.00    0.000000           0       310           fcntl
  0.00    0.000000           0        13           epoll_wait
  0.00    0.000000           0        26           epoll_ctl
------ ----------- ----------- --------- --------- ----------------
100.00    0.000050                  3816      2678 total 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T22:25:13.487

我想你应该分析你的脚本 - 我强烈建议在这种情况下使用[Devel::NYTProf](https://metacpan.org/module/Devel%3a%3aNYTProf)模块。

它很容易运行（还有什么比这更简单的`perl -d:NYTProf yourscript.pl`呢？），并且分析器的工作结果可以很容易地转换成一个完整的报告——或者使用这个包中包含的实用程序——或者使用更多的“图形化”工具[KCachegrind](http://kcachegrind.sourceforge.net/html/Home.html) .

# c++ - SDL，OpenGL：分段错误

> ID：13369861
> 
> 赞同：2
> 
> 时间：2012-11-13T22:19:36.527
> 
> 标签：c++, opengl, sdl, sdl-image

当我尝试使用 openGL 生成纹理时，此方法出现分段错误：

```
 void RendererGL::create_gl(SDL_Surface * surf, GLuint * tex ) {
   GLenum format;   GLint  colors_amount = surf->format->BytesPerPixel;

   if (colors_amount == 4) {
           if (surf->format->Rmask == 0x000000ff)
                   format = GL_RGBA;
           else
                   format = GL_BGRA;
   }
   else if (colors_amount == 3) {
           if (surf->format->Rmask == 0x000000ff)
                   format = GL_RGB;
           else
                   format = GL_BGR;
   }
   else {
       gCritical("Image is not truecolor");
   }
   glGenTextures( 1, tex );

   glBindTexture( GL_TEXTURE_2D, *tex );

   glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
   glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );

   glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
   glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

   glTexImage2D( GL_TEXTURE_2D, 0, colors_amount, surf->w, surf->h, 0, format,
                 GL_UNSIGNED_BYTE, surf->pixels ); } 
```

我只有在带有 nvidia 驱动程序的 debian 上才有这个问题。使用开源驱动程序应用程序运行正常。Valgrind 测试返回：

```
[ Info ] RendererGL::Init GL
==13033== Thread 3:
==13033== Invalid read of size 8
==13033==    at 0x51293C9: ??? (in /usr/lib/x86_64-linux-gnu/nvidia/current/libGL.so.304.64)
==13033==    by 0x419B0F: RendererGL::initGL() (RendererGL.cpp:12)
==13033==    by 0x41036C: Renderer::Renderer() (Renderer.cpp:27)
==13033==    by 0x4058EA: Renderer::getInstance() (Renderer.hpp:17)
==13033==    by 0x40B648: StandardReferences::StandardReferences() (StandardReferences.hpp:13)
==13033==    by 0x414C26: Map::Map(short**, unsigned short, unsigned int, unsigned int) (Map.cpp:8)
==13033==    by 0x4136E4: MapManager::loadMapFromFile(std::string, short) (MapManager.cpp:82)
==13033==    by 0x4138A0: MapManager::load() (MapManager.cpp:97)
==13033==    by 0x4084BA: Resource::load() (Resource.cpp:36)
==13033==    by 0x4196AF: Splash::initThread(void*) (Splash.cpp:99)
==13033==    by 0x53D0405: ??? (in /usr/lib/x86_64-linux-gnu/libSDL-1.2.so.0.11.4)
==13033==    by 0x5413898: ??? (in /usr/lib/x86_64-linux-gnu/libSDL-1.2.so.0.11.4)
==13033==  Address 0x658 is not stack'd, malloc'd or (recently) free'd
==13033== 
==13033== 
==13033== HEAP SUMMARY:
==13033==     in use at exit: 22,104,451 bytes in 31,729 blocks
==13033==   total heap usage: 47,499 allocs, 15,770 frees, 54,869,707 bytes allocated
==13033== 
==13033== LEAK SUMMARY:
==13033==    definitely lost: 833 bytes in 8 blocks
==13033==    indirectly lost: 1,728 bytes in 38 blocks
==13033==      possibly lost: 269,732 bytes in 99 blocks
==13033==    still reachable: 21,832,158 bytes in 31,584 blocks
==13033==         suppressed: 0 bytes in 0 blocks
==13033== Rerun with --leak-check=full to see details of leaked memory
==13033== 
==13033== For counts of detected and suppressed errors, rerun with: -v
==13033== Use --track-origins=yes to see where uninitialised values come from
==13033== ERROR SUMMARY: 12 errors from 2 contexts (suppressed: 6 from 6) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T20:25:29.127

# icalendar - iCal 重复规则，我如何指定一个月中的所有天，永远？

> ID：13369870
> 
> 赞同：2
> 
> 时间：2012-11-13T22:20:03.003
> 
> 标签：icalendar, rfc2445

我想知道如何做到这一点，我认为使用

> 频率=每年；每月=7；

意味着每年的 7 月，因此事件每年 7 月的每一天都发生，而不是意味着事件仅在事件指定的日期发生，因此如果事件在 11 月 8 日开始，则重复规则意味着它将永远发生在 7 月 8 日。

指定七月每一天的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T07:36:57.217

或者：

```
RRULE:FREQ=DAILY;BYMONTH=7 
```

尽管符合标准（http://tools.ietf.org/html/rfc5545#page-124），您应该确保您最有可能的客户支持这种组合

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T22:43:08.797

阅读[rfc](http://www.ietf.org/rfc/rfc2445.txt)（大约 [第 44 页]）我认为如果您没有设置 BY 规则，则将`DTSTART`使用合适的部分，因此请尝试更具体，例如：

```
RRULE:FREQ=YEARLY;BYMONTH=7;BYDAY=MO,TU,WE,TH,FR,SA,SU 
```

# c# - 从通过 AJAX 调用的静态方法访问会话

> ID：13369871
> 
> 赞同：0
> 
> 时间：2012-11-13T22:20:05.767
> 
> 标签：c#, asp.net, ajax, page-lifecycle

好的，我有点卡在这个上。我认为我的问题在于页面的生命周期，但我不确定也不确定如何解决问题。

我有一个需要访问会话的静态方法。但是，此方法在 AJAX 调用过程中被调用。代码如下所示：

```
$(object).click(function() {
    Library.Ajax.GetData(someParameter, function(results) {
         //do call back code
    });
}); 
```

网络方法：

```
[WebMethod]
public List<string> GetData(string parameter)
{
      return new Library.Class().GetData(parameter);
} 
```

C# 类：

```
public List<string> GetData(string parameter)
{
     //working with parameter & stuff
     CallStaticMethod();
     //return things
} 
```

静态方法：

```
 public static CustomClass CallStaticMethod()
 {
    var data = HttpContext.Current.Session["variable"];
    //do other things
 } 
```

在页面加载时，会话有数据。调用此静态方法时，页面尚未回发或重新加载。但是，在每个方法调用中放置一个断点表明 HttpContext.Current.Session 在它们被调用时为空。

在理解页面生命周期方面，我承认我很糟糕。谁能阐明这里发生了什么？我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T22:37:16.380

怎么样？

```
[WebMethod(EnableSession = true)]
public List<string> GetData(string parameter) 
```

[MSDN::How to: 使用 WebMethod 属性](http://msdn.microsoft.com/en-us/library/byxd99hx%28v=vs.80%29.aspx)

# c++ - Eclipse+CDT：在测试项目中构建和链接测试项目的文件

> ID：13369879
> 
> 赞同：0
> 
> 时间：2012-11-13T22:20:23.553
> 
> 标签：c++, c, eclipse, cpputest

尝试在 Eclipse 中设置嵌入式 TDD 环境：

*   为 GNU-ARM 交叉编译设置的应用程序项目
*   通过 Cygwin 构建 CppUTest 的 CppUTest 项目（工作得很好）
*   用于容纳单元测试、测试组、测试运行器的测试项目

我遇到的麻烦是测试项目将其单元测试构建到 .o 文件中，但不会构建经过测试的 .h/.c 文件，因此链接器在对丢失对象的未定义引用时失败。

我不能依赖应用程序项目或该项目的构建中的目标文件，因为它们被交叉编译为 ARM EABI 对象。我需要测试项目来构建应用程序项目的源文件。有没有办法告诉 Eclipse 这样做，或者我是否需要设置一个预构建脚本来将测试文件复制到测试项目中的源代码树中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:49:10.653

我可以通过将应用程序项目的源代码树链接到我的测试项目的源位置列表中来完成这项工作：测试项目 --> 属性 --> C/C++ 常规 --> 路径和符号 --> 源位置。

这种方法的缺点是除非应用程序和测试项目都在 Eclipse 工作区中，否则添加源位置需要绝对路径。

# c# - CA2101 拨打外部电话时出现警告

> ID：13369883
> 
> 赞同：7
> 
> 时间：2012-11-13T22:20:38.567
> 
> 标签：c#, c++, visual-studio, code-analysis

我正在使用 WinPcap 库并设置了我所有的本机方法调用。在构建时，我得到[CA2101: Specify marshaling for P/Invoke string arguments](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28CA2101%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.5%29;k%28DevLang-csharp%29&rd=true) Code Analysis 警告。我的`extern`函数定义如下：

```
[DllImport("wpcap", CharSet = CharSet.Ansi, CallingConvention = CallingConvention.Cdecl)]
internal static extern int pcap_compile(IntPtr /* pcap_t* */ adaptHandle,
                                        IntPtr /*bpf_program **/fp,
                                        string /*char * */str,
                                        int optimize,
                                        uint netmask); 
```

如果我将 更改`CharSet`为`CharSet.Unicode`，我会解决代码分析警告，但我的功能不再起作用。如何解决警告并保持我的代码正常工作？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T22:24:35.287

出现此警告是因为将 Unicode 文本截断为 ASCII 字符串可能会导致安全问题。

如果您不能使用 Unicode 字符串，`BestFitMapping = false, ThrowOnUnmappableChar = true`请在属性上设置以防止出现此安全问题。有关详细信息，请参阅[文档](http://msdn.microsoft.com/en-us/library/system.runtime.interopservices.dllimportattribute.bestfitmapping.aspx)。

# jquery - jQuery - pageAnchorBuilder 图像推子

> ID：13369887
> 
> 赞同：1
> 
> 时间：2012-11-13T22:20:50.490
> 
> 标签：jquery, image, cycle, transition

我最近发现了 jQuery 循环选项，我想将它用于我正在开发的网站上的过渡滑块。我浏览了循环网站上的不同演示，找到了一个使用 pageAnchorBuilder 选项的演示。脚本的代码在这里：

```
$(document).ready(function () {
$('#slideshow') 
    .before('<ul id="navigation">') 
    .cycle({ 
        fx:     'fade', 
        timeout: 2000, 
        pager:  '#navigation',
        pagerAnchorBuilder: function(idx, slide) { 
                return '<li class="slide"><img src="' + slide.src + '" width="50" height="50" /></li>'; 
            }
    });
}); 
```

此代码旨在显示导航列表项的缩略图。但是，我不想将 slide.src 中的缩略图用于导航列表项图像。我想为列表项使用任意图像（例如button.png），当列表项被赋予'class = activeSlide'到另一个任意图像（例如button-hover.png）时，列表项会发生变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:15:18.753

我发现了一个答案。虽然它确实感觉有点像 hack 并且可能可以以更语义化的方式完成，但它确实达到了我正在寻找的效果。无论如何，脚本已更改为：

```
$(document).ready(function () {
    $('#slideshow') 
    .before('<ul id="navigation">') 
    .cycle({ 
        fx:     'fade', 
        timeout: 4000, 
        pager:  '#navigation',
        pagerAnchorBuilder: function(idx, slide) { 
                return '<li class="slide"></li>'; 
            }
    });
}); 
```

变化在于`<li>`标签之间输入的内容。开关来自：

```
return '<li class="slide"><img src="' + slide.src + '" width="50" height="50" /></li>'; 
```

到：

```
return '<li class="slide"></li>'; 
```

插入的图像将从标签中剥离。要实现效果，必须将 css 更改为：

```
li.slide  {
    display: inline-block;
    width: 10px;
    height: 10px
    background-image: url("button.png");
    background-repeat: no-repeat;
    background-position: center center;
}

li.slide.activeSlide {
    background-image: url("button-hover.png");
} 
```

的 css`<li>`被主动更改以将 activeSlide 类包含到相应的`<li>`. 因此，通过在 css 中设置 li.slide.act 的样式，您可以覆盖 li.slide 的 css 以实现效果。

# python - 右侧的matplotlib y轴标签

> ID：13369888
> 
> 赞同：107
> 
> 时间：2012-11-13T22:20:51.317
> 
> 标签：python, matplotlib, labels

有没有一种简单的方法可以将 y 轴标签放在绘图的右侧？我知道这可以使用 为刻度标签完成`ax.yaxis.tick_right()`，但我想知道它是否也可以用于轴标签。

想到的一个想法是使用

```
ax.yaxis.tick_right()
ax2 = ax.twinx()
ax2.set_ylabel('foo') 
```

但是，这并没有将所有标签（刻度和轴标签）放在右侧，同时保留 y 轴的范围的预期效果。简而言之，我想要一种将所有 y 轴标签从左向右移动的方法。

* * *

## 回答 #1

> 赞同：183
> 
> 时间：2012-11-13T22:28:18.117

看起来你可以这样做：

```
ax.yaxis.set_label_position("right")
ax.yaxis.tick_right() 
```

有关示例，请参见[此处。](http://web.archive.org/web/20120618121009/http://notes.brooks.nu/2008/03/plotting-on-left-and-right-axis-simulateously-using-matplotlib-and-numpy)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-06-07T17:24:16.980

如果您想按照给出的示例`matplotlib`并在轴的两侧创建一个带有标签但不必使用该`subplots()`函数的图形，这是我的解决方案：

```
from matplotlib import pyplot as plt
import numpy as np

ax1 = plt.plot()
t = np.arange(0.01, 10.0, 0.01)
s1 = np.exp(t)
plt.plot(t,s1,'b-')
plt.xlabel('t (s)')
plt.ylabel('exp',color='b')

ax2 = ax1.twinx()
s2 = np.sin(2*np.pi*t)
ax2.plot(t, s2, 'r.')
plt.ylabel('sin', color='r')
plt.show() 
```

![](../Images/fa940781064b494496c72c37a6fe1848.png)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-03-28T20:43:44.723

以前的答案已经过时了。这是上面示例的最新代码：

```
import numpy as np
import matplotlib.pyplot as plt

t = np.arange(0.01, 10.0, 0.01)
data1 = np.exp(t)
data2 = np.sin(2 * np.pi * t)

fig, ax1 = plt.subplots()

color = 'tab:red'
ax1.set_xlabel('time (s)')
ax1.set_ylabel('exp', color=color)
ax1.plot(t, data1, color=color)
ax1.tick_params(axis='y', labelcolor=color)

ax2 = ax1.twinx()  # instantiate a second axes that shares the same x-axis

color = 'tab:blue'
ax2.set_ylabel('sin', color=color)  # we already handled the x-label with ax1
ax2.plot(t, data2, color=color)
ax2.tick_params(axis='y', labelcolor=color)

fig.tight_layout()  # otherwise the right y-label is slightly clipped
plt.show() 
```

从[这里](https://matplotlib.org/gallery/subplots_axes_and_figures/two_scales.html#sphx-glr-gallery-subplots-axes-and-figures-two-scales-py)。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-01-22T16:30:26.657

（抱歉再次提出问题）

我知道这是一个肮脏的技巧，但如果您不想深入处理轴并留在`plt`命令中，您可以使用`labelpad`scalar 参数将标签放置在图形右侧的右侧。经过一些试验和错误后工作，确切的标量值可能（？）与您的图形大小的尺寸有关。

例子：

```
# move ticks
plt.tick_params(axis='y', which='both', labelleft=False, labelright=True)

# move label
plt.ylabel('Your label here', labelpad=-725, fontsize=18) 
```

# objective-c - UIView 动画块：如果duration为0，和没有动画一样吗？

> ID：13369891
> 
> 赞同：17
> 
> 时间：2012-11-13T22:21:00.410
> 
> 标签：objective-c, ios, uiview, uiviewanimation

我需要处理一种情况，您可以在有或没有动画的情况下做某事，而不是：

```
if (animation)
{
    [UIView animateWithBlock:^(){...}];
}
else
{
    ...
} 
```

我想要做：

```
[UIView animateWithBlock:^(){...} duration:(animation ? duration : 0)] 
```

但不确定它是否有效，即使有效，使用它而不是直接更改视图是否有任何开销？

谢谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-29T22:52:38.227

在这种情况下，我所做的是创建一个包含我想要制作的所有动画的块。然后执行一个 UIView 动画，将动画块作为参数传递，或者直接调用该块，无论我是否希望它被动画化。像这样的东西：

```
void (^animationBlock)();
animationBlock=^{
      // Your animation code goes here
};
if (animated) {
    [UIView animateWithDuration:0.3 animations:animationBlock completion:^(BOOL finished) {

    }];
}else{
    animationBlock();
} 
```

这将避免开销

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-03-19T06:04:34.080

根据苹果文档：

> 如果动画的持续时间为 0，则在下一个 run loop 循环开始时执行此块。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-13T22:28:01.317

是的，由于持续时间为零，因此过渡将有效地瞬间完成。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-03T14:39:27.600

我写了这个小小的 Swift 扩展来解决这个问题：

```
extension UIView {

/// Does the same as animate(withDuration:animations:completion:), yet is snappier for duration 0
class func animateSnappily(withDuration duration: TimeInterval, animations: @escaping () -> Swift.Void, completion: (() -> Swift.Void)? = nil) {
    if duration == 0 {
        animations()
        completion?()
    }
    else {
        UIView.animate(withDuration: duration, animations: animations, completion: { _ in completion?() })
    }
}
} 
```

人们可以将其用作替代，`UIView.animate(withDuration:animations:completion)`并且不必再考虑持续时间 0。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-06-30T05:49:22.507

好的，我对此有进一步的观察。首先，使用零持续时间的动画会产生性能开销，但更深刻的区别是动画的完成块是异步处理的。这意味着首先隐藏然后显示视图可能无法获得预期的结果。

所以，不，我绝对建议不要使用零作为持续时间，因为它不是同步的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T06:14:46.337

您可以根据要求动态设置 animateWithDuration 值。

如果设置为 0，则表示没有动画过渡时间。因此，View 将出现没有任何动画。如果要提供动画，请设置大于 0 的值。

```
 **float animationDurationValue=0.03f;
        [UIView animateWithDuration:x delay:0.0f options:UIViewAnimationOptionRepeat | UIViewAnimationOptionAutoreverse 
animations:^{
                             [yourView setFrame:CGRectMake(0.0f, 100.0f, 300.0f, 200.0f)];
                         }
                         completion:nil];** 
```

如果有任何问题，请告诉我。

# iphone - 用动画删除或替换 uitextview 中的部分文本

> ID：13369898
> 
> 赞同：0
> 
> 时间：2012-11-13T22:21:19.770
> 
> 标签：iphone, ios, animation, nsstring, uitextview

假设我在 uitextview 中有以下文本，并且我想添加一个动画以仅删除以**粗体**显示的突出显示的文本，并产生文本折叠到剩余字符串中的错觉：

`Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec non nunc ut justo sollicitudin interdum.

**Sed metus augue, vehicula id accumsan sodales, eleifend quis libero. Duis iaculis ante sed lectus aliquet et aliquet neque auctor. Aliquam erat volutpat. Curabitur posuere cursus dapibus. Donec euismod luctus dui ut adipiscing. Phasellus eget mauris arcu, nec commodo neque. Mauris facilisis tincidunt tellus, eget pharetra erat molestie sit amet.**`

`Quisque nibh neque, consequat quis facilisis non, pulvinar quis metus. Pellentesque faucibus metus a libero egestas faucibus. Nunc placerat blandit auctor. Aenean imperdiet mi et sapien facilisis laoreet. Donec adipiscing urna facilisis orci bibendum ornare. Fusce dignissim mollis eros a ornare. **Vivamus posuere, lorem nec egestas dictum, lectus dui interdum enim, vel faucibus arcu est quis quam.** Nam hendrerit molestie erat vitae iaculis. Morbi imperdiet gravida dolor, at vestibulum metus feugiat sit amet.`

关于如何实现这一目标的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T23:07:51.317

将文本和突出显示作为不同的图像层，更改突出显示的不透明度以显示它，然后使用 MPFoldTransitions 翻转两个图像。

# javascript - 翻译警报框中的文本

> ID：13369904
> 
> 赞同：-1
> 
> 时间：2012-11-13T22:21:51.667
> 
> 标签：javascript, internet-explorer, web

我有一条警告信息，

```
alert('Hi') 
```

`Hi`它在警报窗口中打印。

我希望`Hola`当某人的 IE 设置为西班牙语时打印该消息。

请问我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T22:24:34.193

检查这个：

[browserLanguage 属性](http://msdn.microsoft.com/en-us/library/ms533542%28VS.85%29.aspx)

```
<script type="text/javascript">
window.onload = function() {
   var language = window.navigator.userLanguage || window.navigator.language;
   alert(language); //works IE/SAFARI/CHROME/FF
}
</script> 
```

一旦您检测到语言，您就可以有一个案例来切换警报消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-13T22:30:59.187

这应该适用于大多数浏览器：

```
var languageinfo = navigator.language ? navigator.language : navigator.userLanguage;
if(languageinfo.split('-')[0] == 'es') {
    alert('hola')
} else {
    alert('hi');
} 
```

# ruby - 如何设置洗劫排序的默认值？

> ID：13369909
> 
> 赞同：19
> 
> 时间：2012-11-13T22:22:20.970
> 
> 标签：ruby, ruby-on-rails-3.2, ransack

简而言之，我只想知道是否有办法使用 Ransack gem 为排序功能设置默认值？**IE。**

目前，页面加载时我有以下内容：

![empty_ransack](../Images/b3dcf16bd8be7c1ae0db10c86f834800.png)

但相反，我希望在页面加载时具有以下**默认值：**

![用默认值进行洗劫](../Images/e055442943ba7dc905cd610d27338442.png)

是否可以通过正确配置 Ransack Gem 来做到这一点？

一如既往地提前感谢！

最好的祝福！

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-02-12T07:56:36.393

这对我有用：

```
@search = Change.search(params[:q])
@search.sorts = 'updated_at desc' if @search.sorts.empty? 
```

注意：起初我有些头疼，当我`desc`用大写字母时——那是行不通的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-01-08T13:22:40.117

您还可以通过定义数组来设置多个默认排序：

```
@search = Post.ransack(params[:q])  
@search.sorts = ['name asc', 'created_at desc'] if @search.sorts.empty?
@posts = @search.result.paginate(page: params[:page], per_page: 20) 
```

[https://github.com/activerecord-hackery/ransack/wiki/Sorting-in-the-Controller](https://github.com/activerecord-hackery/ransack/wiki/Sorting-in-the-Controller)

# twitter-bootstrap - Twitter Bootstrap 表单可访问性 - 内联复选框

> ID：13369911
> 
> 赞同：3
> 
> 时间：2012-11-13T22:22:24.157
> 
> 标签：twitter-bootstrap, accessibility

我正在使用 Bootstrap 构建一个大型表单，并试图使其尽可能易于访问。它需要网站符合 WCAG2AA。

有没有一种方法可以为一组内联复选框布置标记，而无需将输入嵌套在标签内，或者我只需要修改样式表以满足我的需要。

还有关于使 Bootstrap 更易于访问的有用指南或链接吗？

干杯，

布赖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T16:40:35.390

在过去一周左右的时间里，出现了一些关于复选框和单选按钮的问题。[问题 1](https://stackoverflow.com/questions/13080416/labels-checkboxes-and-radio-buttons/13089674#comment18155680_13089674)和[问题 2](https://stackoverflow.com/questions/13273806/using-the-html-label-tag-with-radio-buttons)。检查这些，看看他们是否有帮助。

> 有没有一种方法可以为一组内联复选框布置标记，而无需将输入嵌套在标签内，或者我只需要修改样式表以满足我的需要。

对我来说，这听起来像你正在考虑做`<label><input> text</label>`。这个对吗？如果我没记错的话，一些辅助技术会遇到这个问题，而且几年前它已经脱离了*最佳实践。*我建议您按照我在链接问题的回答中概述它的方式进行操作。

# asp.net - 从代码隐藏更改 CSS3 线性渐变的一部分

> ID：13369916
> 
> 赞同：0
> 
> 时间：2012-11-13T22:23:19.797
> 
> 标签：asp.net, html, css

有没有办法从代码隐藏中更改 CSS3 线性渐变的一部分？例如：

在 Site.css 中：

```
.MyClass{ background-image: linear-gradient(0deg, #FFFFFF, #000000); } 
```

在标记中：

```
<div class="MyClass">Stuff</div> 
```

我想改变（从代码隐藏）`#000000`唯一。并且只针对那个 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:29:22.920

您可以使用：

```
<style>
    .MyClass{ background-image: linear-gradient(0deg, #FFFFFF, <%=myVariable%>); }
</style> 
```

在您的母版页中，在 HEAD 中。

您应该在此之前保留样式表（内联样式表）。这允许浏览器继续缓存您的主 CSS 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:32:20.473

由于您的样式在样式表中，您应该创建一个新类，然后您可以从后面的代码中设置该 div 的类。

页：

```
<div id="_myClass" runat="server">Stuff</div> 
```

代码

```
_myClass.Attributes["class"] = "MyNewClass"; 
```

或者，如果你不想创建一个新类，你可以从后面的代码中覆盖它，但是如果你让渐变跨浏览器兼容，这会很麻烦，而且如果你再次更改颜色，更新会很痛苦...所以不推荐：

```
 _myClass.Attributes["style"] = "background-image: linear-gradient(0deg, #FFFFFF, #CCCCCC);"; 
```

# android - 添加九个补丁作为形状 XML 的背景

> ID：13369918
> 
> 赞同：1
> 
> 时间：2012-11-13T22:23:47.273
> 
> 标签：android, xml

我将这个drawable设置为布局的背景（我在形状之后调用九个补丁，这样你就可以看到它绘制的内容）：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

<item>
    <shape>
        <solid android:color="#F000" />

        <stroke
            android:width="1px"
            android:color="#BB000000" />

        <padding
            android:bottom="7dp"
            android:left="10dp"
            android:right="10dp"
            android:top="7dp" />

        <corners
            android:topLeftRadius="0dp"
            android:topRightRadius="0dp"
            android:bottomLeftRadius="15dp"
            android:bottomRightRadius="15dp" />

        <gradient
            android:angle="270"
            android:startColor="#FFDF00"
            android:centerColor="#FFD700"
            android:endColor="#D4AF37"
            android:type="linear" />
    </shape>
</item>

<item>
    <bitmap android:src="@drawable/outerglow" />
</item> 
```

![在此处输入图像描述](../Images/1610d4c9a65e6f2547fb8702affd0cda.png)

如您所见，九个补丁没有达到我想要的大小。我认为它需要添加一些填充，与 相同`shape`，但 a`bitmap`不接收属性`<padding>`。恐怕我不能添加`<gradient>`到九个补丁，因为那样我将无法添加`<corners>`。

我想通过 XML 组织它，所以避免通过 Java 提供解决方案。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:26:10.087

您最好将整个可绘制对象设置为 9-patch。我不确定你可以这样混搭。

# objective-c - presentModalViewController 与 ARC

> ID：13369921
> 
> 赞同：0
> 
> 时间：2012-11-13T22:24:00.190
> 
> 标签：objective-c, ios, xcode

我发现这段代码可用于良好的过渡：

[http://srooltheknife.blogspot.co.uk/2012/03/custom-transition-animation-for-modal.html](http://srooltheknife.blogspot.co.uk/2012/03/custom-transition-animation-for-modal.html)

问题是它使用“模态”，而我的程序使用 ARC，所以模态在 iOS 6.0 中已被弃用。

只有两行使用模态，所以我将它们从 -

```
TransitionController.m:
[self dismissModalViewControllerAnimated:NO];
to:
[self dismissViewControllerAnimated:NO completion:Nil]; 
```

和

```
[self presentModalViewController:modalViewController animated:NO];
to:
[self presentViewController:modalViewController animated:NO completion:nil]; 
```

我执行它：

```
FirstPage.m:
@implementation FirstPage
{
    TransitionController *tran;
}

- (IBAction)StartGame:(id)sender
{

    if (! self.mainPage)
    self.mainPage = [[MainGameDisplay alloc] initWithNibName:nil bundle:nil];

    [tran presentModalViewController:self.mainPage withPushDirection:kCATransitionFromBottom];
} 
```

StartGame 是一个按钮。该程序运行完美，没有错误，但是当我单击按钮时没有任何反应。

* * *

更新：

```
FirstPage.h:
#import <UIKit/UIKit.h>
#import "MainGameDisplay.h"
#import <QuartzCore/QuartzCore.h>
#import "TransitionController.h"
@interface ViewController : Engine
{ }
- (IBAction)StartGame:(id)sender; //Action connection ID.
@property(nonatomic, readwrite) MainGameDisplay *mainPage;

FirstPage.m:
@implementation ViewController
{
    TransitionController *tran;
}
- (IBAction)StartGame:(id)sender {
    if (! self.mainPage)
    self.mainPage = [[MainGameDisplay alloc] initWithNibName:nil bundle:nil];
    tran = [[TransitionController alloc] initWithNibName:Nil bundle:Nil];
    [tran presentModalViewController: self.mainPage withPushDirection:kCATransitionFromBottom];
} 
```

*   单击“开始游戏”按钮时，当前视图将被完全相同的视图向左推。
*   在过渡期间，视图会有轻微的淡入淡出/发光。
*   该方法中使用的方向与过渡的方向不同。例如，“kCATransitionFromBottom”实际上是从左侧推送的视图。
*   每次单击按钮时输出：“警告：尝试呈现不在窗口层次结构中的视图！”

# xml - 替换 XML 文件中的动态内容

> ID：13369933
> 
> 赞同：20
> 
> 时间：2012-11-13T22:24:47.423
> 
> 标签：xml, bash, dynamic, text, replace

**快速总结：**我需要创建一个 Bash 脚本来每周自动更改节点内的文本。脚本将匹配节点并替换其中的文本（如果可能的话）？我该怎么做？

**长总结：** 我托管了一个包含商店的 Minecraft 服务器，每个商店在 /ShowcaseStandalone/ffs-storage/ 目录中都有自己的 .xml 文件。每个星期天我的服务器都会重新启动并在终端中执行几个命令来重置一些东西。我想要改变的一件事是其中一家商店。我想更改节点 <itemstack> 中的文本和节点 <price> 中的文本。我只是想从不同文件夹中的 .txt 文件中获取文本，并将其插入该节点。问题是，节点中的文本每周都会更改。有没有办法使用 bash 替换两个节点内的特定行或文本？

**XML 文件：**

```
<?xml version="1.0" encoding="UTF-8"?>
<scs-shop usid="cac8480951254352116d5255e795006252d404d9" version="2" type="storage">
    <enchantments type="string"/>
    <owner type="string">Chadward27</owner>
    <world type="string">Frisnuk</world>
    <itemStack type="string">329:0</itemStack>
    <activity type="string">BUY</activity>
    <price type="double">55.0</price>
    <locX type="double">487.5</locX>
    <locY type="double">179.0</locY>
    <locZ type="double">-1084.5</locZ>
    <amount type="integer">0</amount>
    <maxAmount type="integer">0</maxAmount>
    <isUnlimited type="boolean">true</isUnlimited>
    <nbt-storage usid="23dffac5fb2ea7cfdcf0740159e881026fde4fa4" version="2" type="storage"/>
</scs-shop> 
```

**操作系统：** Linux Ubuntu 12.04

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-13T22:46:58.913

您可以使用[`xmlstarlet`](http://xmlstar.sourceforge.net/)以下方式编辑`XML`文件`shell`：

```
xmlstarlet edit -L -u "/scs-shop/price[@type='double']" -v '99.66' file.xml 
```

**笔记**

*   `"/scs-shop/price[@type='double']"`是一个[Xpath](http://en.wikipedia.org/wiki/XPath)表达式
*   看`xmlstarlet ed --help`

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-13T23:24:47.403

XML方式很酷，但是如果你需要使用普通的bash工具，你可以使用sed修改一行。例如：

```
PRICE=123
sed -i "s/\(<price.*>\)[^<>]*\(<\/price.*\)/\1$PRICE\2/" $XML_FILE_TO_MODIFY 
```

这将用 123 替换价格。

sed 命令似乎令人生畏，所以让我分解一下：

`\(<price.*>\)[^<>]*\(<\/price.*\)`是要匹配的模式。 `\(`...`\)`是分组的括号。 `<price.*>`与开盘价标签相符。`[^<>]*`匹配除尖括号外的任何内容，在这种情况下将匹配价格标签的内容。`<\/price.*`与价格标签的结尾相匹配。正斜杠是 sed 中的分隔符，所以我用反斜杠转义它。

`\1$PRICE\2`是要替换匹配文本的文本。 `\1`指第一个匹配的括号组，即开盘价标签。 `$PRICE`是其中包含所需价格的变量。 `\2`指第二个括号组，在这种情况下是结束标记。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-21T20:42:29.773

我没有拥有 xmlstarlet 的奢侈。我只是通过进行内联替换找到了解决方案；

**模板参数.xml**

```
<ns:Parameter>
    <ns:Name required="true">##-ParamName-##</ns:Name>
    <ns:Value>
        <ns:Text>##-ParamValue-##</ns:Text>
    </ns:Value>
</ns:Parameter> 
```

**片段**

```
tokenName="foo"
tokenValue="bar"    

#Replace placeholders in parameter template element
myParamElement=$(cat template-parameter.xml)
myParamElement=${myParamElement//##-ParamName-##/$tokenName}
myParamElement=${myParamElement//##-ParamValue-##/$tokenValue} 
```

**结果**

```
<ns:Parameter>
    <ns:Name required="true">foo</ns:Name>
    <ns:Value>
        <ns:Text>bar</ns:Text>
    </ns:Value>
</ns:Parameter> 
```

# url - 传递变量但不显示在网址中？

> ID：13369935
> 
> 赞同：0
> 
> 时间：2012-11-13T22:24:52.023
> 
> 标签：url, seo

我想在我的 URL 中传递一个变量，但不出于 SEO 目的在 URL 中显示它

例如 www.mywebsite.com/Search?city=NYC 应该看起来像 www.mywebsite.com/Search 并且仍然能够在页面上检索“城市”的值。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:25:53.117

只需使用 POST 请求即可完成。但是，将 GET 请求用于搜索表单是一种常见的做法，因为用户可以为 url 添加书签。使用 POST，这是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-30T19:27:33.863

我只是使用重写规则来完成这个。

# php - 如何让用户以表单和 AJAX 形式提交文本以输入到数据库并显示在同一页面上？

> ID：13369940
> 
> 赞同：0
> 
> 时间：2012-11-13T22:25:09.773
> 
> 标签：php, javascript, jquery, mysql

我希望用户填写。提交它，将它存储到数据库中，然后使用 jquery 让它显示在他们面前的同一页面上。现在我可以让它发送到数据库，但它在提交时在另一个页面（/data.php）中打开。此外，我将其设置为随机，因为我不知道如何让用户刚刚发送的确切帖子返回显示。

这是我的 data.php 文件：

```
<?php
$con = mysql_connect("*****", "******", "******");
if (!$con)
{
die('Could not connect: ' . mysql_error());
}

mysql_select_db("textwall", $con);

$sql="INSERT INTO textwalltable (story)
VALUES
('$_POST[story]')";

if (!mysql_query($sql,$con))
{
die('Error: ' . mysql_error());
}
echo "1 record added";

$sql = "SELECT * FROM textwalltable ORDER BY RAND() LIMIT 1;"; 
$query = mysql_query( $sql ); 

while($row = mysql_fetch_array($query)) { 
echo $row['story'];
}

mysql_close($con);
?> 
```

和我的 HTML 页面：

```
<html>
<head>
<title>testing</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="jquery.js"><\/script>')</script>

<script type="text/javascript">
function loadData()
{
  $("#txtHint").load("data.php");  
}
</script>   
</head>
<body>
<form action="data.php" method="post" onsubmit="loadData()">
    <div>
        <label for="comment">Type here:</label>
        <textarea id="story" name="story" rows="2" cols="20">
        </textarea>
        <div id="txtHint"></div>
    </div>
    <div>
    <div><input type="submit" value="Submit" class="submit"/></div>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:28:18.413

这是工作流程：

1）用户点击表单提交。

2) 你从 DOM 收集必要的信息。您将信息 AJAX 到服务器端脚本，该脚本将该信息输入数据库。

3）您使用 JQuery 插入信息，但是您希望将其显示到 DOM 中。

4) 如有必要，删除页面上不再需要的任何 html。

在代码方面，您将要查看用于 AJAX 调用的 JQuery`ajax`或函数。`post`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:40:52.513

您可以使用 javascript 函数（使用 jquery）来处理这些事件。此方法不使用按钮，因此您需要创建自己的按钮来调用以下函数：

```
function postPage() {
    $.post("post.php", $("#form_id").serialize(), function(){
        $("#display_id").load('display.php');
    });
} 
```

在这种情况下，您需要通过“test.php”处理发布值，然后在 display.php 中发布后将要显示的内容返回给用户。display.php 的内容将被放置在 id 为“display”的 div/container 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T23:07:49.873

这是另一种方式，如果您使用 jquery 内置的序列化函数和 $.post，您实际上不必编写太多代码。

html 表单和 html 显示消息：

```
<form action="data.php" method="post" class="commentForm">
    <div>
        <label for="comment">Type here:</label>
        <textarea id="story" name="story" rows="2" cols="20">
        </textarea>
        <div id="txtHint"></div>
    </div>
    <div>
    <div><input type="submit" value="Submit" class="submit"/></div>
</form>
<ul class="messages">
    <li>Some old message</li>
    <li>Some other old message</li>
</ul> 
```

jquery 将新消息从客户端发送到您的服务器，并将新消息放入 DOM 并重置 html 表单

```
//bind a click even to the submit
$('.commentForm input[type=submit]').click(function(){
      $(this).closest('form').find('input[type=submit]').value('Submitting');
      $.post(
       $(this).closest('form').attr('action'),
       $(this).closest('form').serialize(),
       function(responseFromServer){
          //get the message from the html form (don't need to send it back from the server)
          var message = $(this).closest('form').find('textarea');
          $('.messages').append('<li>'+message+'</li>');

          //resetting the html form
          $(this).closest('form').find('textarea').html('');
          $(this).closest('form').find('input[type=submit]').value('Submit');
       }
     );
     //prevent the form from actually sending in the standard fashion by returning false
     return false;
}); 
```

php

```
//get the post variable and make it safe for inputting into the db
$message = mysql_real_escape_string(html_entities($_POST['story']));
if(!empty($message)){
   //assuming you have a db connection
   $insert_query = mysql_query("INSERT INTO textwalltable VALUES($message)");
   echo 'message entered';
} else {
   echo 'no message';
} 
```

# entity-framework - EF5生成的数据库在存在多个关系时不创建连接表

> ID：13369941
> 
> 赞同：1
> 
> 时间：2012-11-13T22:25:11.460
> 
> 标签：entity-framework, code-first, entity-framework-5

我有一个用户和一个组织类。他们看起来像这样

```
public class User
{
        public int UserId { get; set; }
        public string UserName { get; set; }
        public string Email { get; set; }
        public string FirstName { get; set; }
        public string LastName { get; set; }
        public virtual ICollection<Organization> Organizations { get; set; }
}

public class Organization : EntityBase
{
    public string Name { get; set; }
    public string Description { get; set; }
    public virtual ICollection<User> Users { get; set; }
} 
```

并且两者都继承自 EntityBase 类以获取 Id 和创建/更新跟踪等常见字段。

```
public abstract class EntityBase
{
    public int Id { get; set; }
    public DateTime Created { get; set; }
    public virtual User CreatedBy { get; set; }
    public DateTime Updated { get; set; }
    public virtual User UpdatedBy { get; set; }
} 
```

正如两者的 ICollection 属性所表示的，应该存在多对多关系。但是，当我的数据库自动生成时，我的表中添加了不正确的外键 ![组织和用户表的映射不正确](../Images/548bb0d4a8267af5e1d59893d2452a8f.png)

如果我将 CreatedBy 和 UpdatedBy 更改为字符串而不是 User 属性，我会得到一个连接表，这正是我正在寻找的。 ![正确的数据库生成](../Images/e364aab331b3eafaa278facd97552d24.png)

这是一个简单的实体框架问题，我需要在使用流利的映射中提供多对多配置，还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T03:20:22.517

如果您有多个关系，则需要通过 fluent API 或使用属性手动配置它们，

> 注意：如果您在相同类型之间有多个关系（例如，假设您定义了 Person 和 Book 类，其中 Person 类包含 ReviewedBooks 和 AuthoredBooks 导航属性，而 Book 类包含 Author 和 Reviewer 导航属性），您需要使用 Data Annotations 或 fluent API 手动配置关系

[这是来自微软的文章。](http://msdn.microsoft.com/en-us/data/jj679962.aspx)

# java - 部分编译时间用 maven 编织第三方 jar

> ID：13369945
> 
> 赞同：1
> 
> 时间：2012-11-13T22:25:26.623
> 
> 标签：java, maven, aspectj, compile-time-weaving

我已经使用 maven 插件 aspectj-maven-plugin 配置了编织第三方 jar。

```
 <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>aspectj-maven-plugin</artifactId>
                <version>1.4</version>
                <dependencies>
                    <dependency>
                        <groupId>org.aspectj</groupId>
                        <artifactId>aspectjrt</artifactId>
                        <version>${aspectj.version}</version>
                    </dependency>
                    <dependency>
                        <groupId>org.aspectj</groupId>
                        <artifactId>aspectjtools</artifactId>
                        <version>${aspectj.version}</version>
                    </dependency>
                </dependencies>
                <executions>
                    <execution>
                        <goals>
                            <goal>compile</goal>
                            <goal>test-compile</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <!--<proceedOnError>true</proceedOnError>-->
                    <weaveDependencies>
                        <weaveDependency>
                            <groupId>org.quartz-scheduler</groupId>
                            <artifactId>quartz</artifactId>
                        </weaveDependency>
                    </weaveDependencies>
                    <aspectLibraries>
                        <aspectLibrary>
                            <groupId>org.springframework</groupId>
                            <artifactId>spring-aspects</artifactId>
                        </aspectLibrary>
                    </aspectLibraries>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin> 
```

对缺少的 java 类的引用存在问题。Quartz jar 与 JMS 有一些集成，但我的应用程序不使用 JMS，因此永远不会加载这些石英文件。

我找到了一个带有proceedOnError = true 的拐杖，但我认为由于错误注入方面注释类停止工作。

shade-maven-plugin 不适合这里，因为它只能由包阶段触发，而 aspectj 在编译阶段启动。

```
[INFO] --- aspectj-maven-plugin:1.4:compile (default) @ aspectj-demo ---
[ERROR] can't determine implemented interfaces of missing type javax.servlet.ServletContextListener
when processing declare parents org.quartz.ee.servlet.QuartzInitializerListener
when processing type mungers 
when weaving 
when batch building BuildConfig[null] #Files=5 AopXmls=#0
 [Xlint:cantFindType]
[ERROR] can't determine implemented interfaces of missing type javax.servlet.http.HttpServlet
when processing declare parents org.quartz.ee.servlet.QuartzInitializerServlet
when processing type mungers 
when weaving 
when batch building BuildConfig[null] #Files=5 AopXmls=#0
 [Xlint:cantFindType] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T22:02:27.260

weaveDependencies 中列出的任何 Maven 坐标*也*必须作为普通依赖项提及。根据下载页面，您需要在 <build> 下定义以下依赖项：

```
<dependency>
    <groupId>org.quartz-scheduler</groupId>
    <artifactId>quartz</artifactId>
    <version>2.1.6</version>
</dependency>
<dependency>
    <groupId>org.quartz-scheduler</groupId>
    <artifactId>quartz-oracle</artifactId>
    <version>2.1.6</version>
</dependency>
    <dependency>
    <groupId>org.quartz-scheduler</groupId>
    <artifactId>quartz-weblogic</artifactId>
    <version>2.1.6</version>
</dependency>
<dependency>
    <groupId>org.quartz-scheduler</groupId>
    <artifactId>quartz-jboss</artifactId>
    <version>2.1.6</version>
</dependency> 
```

然后在 aspectj-maven-plugin 插件的配置部分下，您可以引用包含要编织的方面的 JAR 文件：

```
<weaveDependencies>
    <weaveDependency>
        <groupId>org.quartz-scheduler</groupId>
        <artifactId>quartz</artifactId>
    </weaveDependency>
</weaveDependencies> 
```

您可能还需要使用 1.2 版本的 aspectj-maven-plugin。据说 1.4 中存在一个关于“声明父母”的错误（但不确定是否已修复），并且 1.3 的早期版本存在称为[MAPECTJ-90](http://jira.codehaus.org/browse/MASPECTJ-90)的错误。

# ios - 无法使用 XCode/Obj-C 编译 Cocoapods –“Pods-prefix.pch.dia：没有这样的文件或目录”

> ID：13369946
> 
> 赞同：15
> 
> 时间：2012-11-13T22:25:32.320
> 
> 标签：ios, objective-c, xcode, gcc, cocoapods

我正在使用 XCode 4.5.1 和 iOS 6.0 基础 SDK。

这是我收到的错误：

`i686-apple-darwin11-llvm-gcc-4.2: /Users/fahim/Library/Developer/Xcode/DerivedData/Currenthiphop-emodxxwwaiojlcboaxuodksuwuww/Build/Intermediates/PrecompiledHeaders/Pods-prefix-evibdktwbatdnbabmrlnderfsxxi/Pods-prefix.pch.dia: No such file or directory`

Pods-prefix-xxx 目录下只有 1 个文件： `Pods-prefix.pch.pth.hash-criteria`

这是我的 Podfile：平台：ios

```
pod 'LibComponentLogging-Core'
pod 'LibComponentLogging-LogFile'
pod 'LibComponentLogging-qlog' 
pod 'LibComponentLogging-pods'

pod 'Facebook-iOS-SDK'
pod 'RestKit' 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T22:21:37.233

我实际上在[这里找到了这个解决方案](https://stackoverflow.com/a/10800989/194869)，详细说明了使用正常方式（Finder 或 Dock）打开 Xcode，而不是使用`open <Workspace>.xcworkspace`命令。我一直在我的 Dock 中使用 Xcode，而其他开发人员（无法构建项目并且遇到了您所遇到的错误）正在使用`open`命令行中的命令。一旦他从 Dock 打开 Xcode，并以这种方式手动浏览打开项目，他就可以成功构建它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T01:29:07.347

如果您使用的是 CocoaPods 0.18.0，这可能是由 CocoaPods 引起的，并且已在[https://github.com/CocoaPods/CocoaPods/issues/956中修复](https://github.com/CocoaPods/CocoaPods/issues/956)

"$(inherited)" 中的额外引号是原因（[https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/generator/xcconfig.rb#L150](https://github.com/CocoaPods/CocoaPods/blob/master/lib/cocoapods/generator/xcconfig.rb#L150)）。它不应该被引用。如果从 xcconfig 中删除它们，项目将再次构建。您可能需要检查您的 xcconfig 并查看是否有额外的报价。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-08T23:00:15.787

这个问题可能是由几个不同的因素引起的，但在我和一些同事的情况下，这解决了丢失的 pch.dia

卸载 CocoaPods 并安装**`0.17.1`**

```
sudo gem uninstall cocoapods
sudo gem install cocoapods -v 0.17.1 --verbose 
```

如果 Kiwi 是您的 pod 之一，请将您的 Kiwi 版本锁定为 2.05：

```
target :KiwiUnitTest, :exclusive => true do
  pod 'Kiwi', '2.0.5' 
```

清理您的 Xcode 项目，包括派生数据。关闭 Xcode，重新打开项目并构建。

# html - 使用 html 格式化电子邮件

> ID：13369947
> 
> 赞同：2
> 
> 时间：2012-11-13T22:25:38.307
> 
> 标签：html, css, email

我需要按照指示在我的电子邮件中进行以下[格式化。](http://i88.photobucket.com/albums/k167/wickedheart08/table.png)正如我阅读和搜索的那样，电子邮件应该使用 html1 到 4 以及内联样式和表格。我尝试过使用边距使用内联样式，但这只是一种痛苦。它在前景中不起作用，我只是沮丧地拉扯我的头发。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:32:28.993

并非所有的 CSS 在 HTML 中都受支持。请参阅此站点[http://www.campaignmonitor.com/css/](http://www.campaignmonitor.com/css/)，其中列出了支持或不支持的内容。

我过去做过的一件事是：制作一个常规的 HTML + CSS 页面。然后在“页面”菜单上使用 Internet Explorer，可以选择“将页面作为电子邮件发送”，这应该为您将 HTML 和 CSS 复制到 Outlook 中，然后您可以将其用作起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:32:23.780

一般来说，最好避免在电子邮件中使用复杂的样式。即使很难说，电子邮件客户端在解释时尚的 HTML 代码方面仍然很糟糕。只需使用老式表格和基本格式（粗体、斜体等）即可。

如果您需要令人敬畏的图形，我建议您使用单一的大图。但只能作为最后的手段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T22:31:57.643

我将假设您正在寻求一种更好的方式来制作电子邮件，并且您知道如何做您需要做的事情，并且它只是让处理内联代码变得令人沮丧。

最好**不要**内联正在开发的样式。只需像普通网站一样对其进行编码。然后使用此工具将样式内联：

[邮递员](http://premailer.dialect.ca/)

此外，请在此处参考您可以使用和不能使用的内容：

[电子邮件 CSS 兼容性](http://www.campaignmonitor.com/css/)

PS，这里有一些很好的入门资源：

[HTML 电子邮件样板](http://htmlemailboilerplate.com/)<-- 非常自定义设计的代码

[Mailchimp 模板](http://mailchimp.com/resources/html-email-templates/)<-- 非常完整的常用电子邮件布局集

# java - 小程序独立问题

> ID：13369950
> 
> 赞同：0
> 
> 时间：2012-11-13T22:25:53.833
> 
> 标签：java, applet

我试图通过添加以下内容来制作一个独立的小程序：

```
 public static void main(String[] args) {
    JFrame frame = new JFrame("StartingPoint");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    StartingPoint sp = new StartingPoint();
    frame.getContentPane().add(sp);
    sp.init();
    frame.pack();
    frame.setVisible(true);
    sp.start();
    } 
```

就在我的公开课之后。当作为小程序运行时，它什么也不做，但是当作为应用程序运行时，除了标题之外，它作为一个非常小的、几乎是扁平的盒子运行，当手动调整大小时，除了背景颜色之外，屏幕是空白的。知道是什么原因造成的吗？

我还注意到，每次调整框架大小时，框架上的内容都会冻结，就好像应该发生什么的屏幕截图一样，当屏幕大小调整到几乎全屏时，我可以在屏幕顶部看到一条条子应该移动的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T00:03:20.193

我只想说，将小程序放入框架中是一个非常糟糕的主意。您最好将应用程序内容写入一个单独的容器（例如`JPanel`）并将其添加到您的小程序或框架中 - 恕我直言。

从 Java 文档...

> 窗口#pack
> 
> 使此 Window 调整大小以适合其子组件的首选大小和布局。如果任一尺寸小于先前调用 setMinimumSize 方法指定的最小尺寸，则生成的窗口宽度和高度会自动放大。
> 
> 如果窗口和/或其所有者还不能显示，则在计算首选大小之前，它们都可以显示。在计算窗口大小后验证窗口。

这表明您的小程序需要提供一个`preferredSize`如果您想使用`pack`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T22:29:06.743

您需要设置的大小`JFrame`：

```
frame.setSize(500, 400); 
```

听起来好像您正在覆盖该`paint()`方法。如果是这样，您将需要致电

```
super.paint(g); 
```

在调整大小时重新绘制小程序容器的所有子组件。

# hibernate - 如何解决“无法针对路径解析属性 [organizationType.id]”异常？

> ID：13369951
> 
> 赞同：5
> 
> 时间：2012-11-13T22:26:02.567
> 
> 标签：hibernate, jpa, entitymanager, hibernate-criteria

我正在使用 Spring 3.1.1.RELEASE、Hibernate 4.1.0.Final、JUnit 4.8 和 JPA 2.0 (hibernate-jpa-2.0-api)。我正在尝试根据成员字段的字段编写查询和搜索。我的意思是我有这个实体……</p>

```
@GenericGenerator(name = "uuid-strategy", strategy = "uuid.hex")
@Entity
@Table(name = "cb_organization", uniqueConstraints = {@UniqueConstraint(columnNames={"organization_id"})})
public class Organization implements Serializable
{

    @Id
    @NotNull
    @GeneratedValue(generator = "uuid-strategy")
    @Column(name = "id")
    /* the database id of the Organization */
    private String id;

    @ManyToOne 
    @JoinColumn(name = "state_id", nullable = true, updatable = false)
    /* the State for the organization */
    private State state;

    @ManyToOne
    @JoinColumn(name = "country_id", nullable = false, updatable = false)
    /* The country the Organization is in */
    private Country country;

    @ManyToOne(optional = false) 
    @JoinColumn(name = "organization_type_id", nullable = false, updatable = false)
    /* The type of the Organization */
    private OrganizationType organizationType; 
```

注意成员“organizationType”、“state”和“country”，它们都是对象。我希望根据他们的 id 字段构建一个查询。这段代码

```
@Override
public List<Organization> findByOrgTypesCountryAndState(Set<String> organizationTypes,
                                                        String countryId,
                                                        String stateId)
{
    CriteriaBuilder builder = entityManager.getCriteriaBuilder();
    CriteriaQuery<Organization> criteria = builder.createQuery(Organization.class);
    Root<Organization> org = criteria.from(Organization.class);
    criteria.select(org).where(builder.and(org.get("organizationType.id").in(organizationTypes),
                                            builder.equal(org.get("state.id"), stateId),
                                            builder.equal(org.get("country.id"), countryId)));
    return entityManager.createQuery(criteria).getResultList();
} 
```

在下面抛出异常。我该如何治愈疼痛？

```
java.lang.IllegalArgumentException: Unable to resolve attribute [organizationType.id] against path
    at org.hibernate.ejb.criteria.path.AbstractPathImpl.unknownAttribute(AbstractPathImpl.java:116)
    at org.hibernate.ejb.criteria.path.AbstractPathImpl.locateAttribute(AbstractPathImpl.java:221)
    at org.hibernate.ejb.criteria.path.AbstractPathImpl.get(AbstractPathImpl.java:192)
    at org.mainco.subco.organization.repo.OrganizationDaoImpl.findByOrgTypesCountryAndState(OrganizationDaoImpl.java:248)
    at org.mainco.subco.organization.repo.OrganizationDaoTest.testFindByOrgTypesCountryAndState(OrganizationDaoTest.java:55)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
    at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:83)
    at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T22:58:11.540

JPA 标准构建未定义对路径表达式的支持。正确的标准是：

```
CriteriaBuilder builder = entityManager.getCriteriaBuilder();
CriteriaQuery<Organization> criteria = builder.createQuery(Organization.class);
Root<Organization> org = criteria.from(Organization.class);
criteria.select(org);
criteria.where(
    builder.and(
        org.get( "organizationType" ).get( "id" ).in( organizationTypes ),
        builder.equal( org.get( "state" ).get( "id" ), stateId ),
        builder.equal( org.get( "country" ).get( "id" ), countryId )
    )
); 
```

# php - 使用 cclive 和 gcap 下载 YouTube 数据

> ID：13369953
> 
> 赞同：1
> 
> 时间：2012-11-13T22:26:15.390
> 
> 标签：php, youtube, youtube-api

在 PHP 系统中，我的客户建议使用以下工具从 YouTube 下载视频和主要字幕：

*   [cclive](http://cclive.sourceforge.net/)
*   [盖帽](https://code.google.com/p/gcap/)

由于我以前从未听说过这些，我的问题是有人对它们有任何经验吗？这两个项目似乎一年左右都没有活动......它们仍然有效吗？

是否可以使用它们下载任何 YT 视频的字幕？我偶然发现了一些 YT API 信息，说明未经授权的用户无法使用字幕（即，只有获得 API 授权才能获得自己的字幕）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T22:27:49.947

字幕轨道只能由给定视频的授权所有者通过数据 API 访问。

官方 YouTube 播放器可以访问字幕数据，但他们使用不同的机制来访问不属于公共 API 的数据。

# c# - 尝试使用正则表达式获取 URL 的最后一部分

> ID：13369961
> 
> 赞同：5
> 
> 时间：2012-11-13T22:27:00.803
> 
> 标签：c#, regex

这是我到目前为止所拥有的：

```
string s = @"http://www.s3.locabal.com/whatever/bucket/folder/guid";
string p = @".*//(.*)";
var m = Regex.Match(s, p); 
```

但是，这会返回`"www.s3.locabal.com/whatever/bucket/folder/guid"`。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T22:28:49.067

使用`Uri`该类解析 URL：

```
new Uri(s).Segments.Last() 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-13T22:37:58.530

尽管[Uri.Segments](http://msdn.microsoft.com/en-us/library/system.uri.segments.aspx)可能是最好的方法，但这里有一些替代方法：

```
string s = "http://www.s3.locabal.com/whatever/bucket/folder/guid";

// Uri
new Uri(s).Segments.Last();

// string
s.Substring(s.LastIndexOf("/") + 1);

// RegExp
Regex.Match(s, ".*/([^/]+*)$").Groups[1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T22:49:10.157

你可以使用这个表达式：

```
"[^/]*$" 
```

这将选择不带斜线的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T22:39:47.837

您可以将 p 更改为：

```
string p = @"/([^/]*)$"; 
```

# android - Android Spinner Narrow by Keyboard

> ID：13369962
> 
> 赞同：1
> 
> 时间：2012-11-13T22:27:06.743
> 
> 标签：android, keyboard, spinner, adapter

如何通过键盘输入缩小微调器中的项目？

我正在寻找在 Android 上的 HTML 选择中看到的功能。基本上，我有一个包含多个项目（在我的情况下为数百个）的微调器，我希望能够将微调器缩小到与键盘输入相关的项目。所以，如果我按“71”，我会得到以 71 开头的项目......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:30:22.057

您需要在适配器上为您的 Spinner 实现一个过滤器。如果您不使用自定义适配器，您很可能需要创建一个。

# sql-server - context.Database.Exists 始终返回 true，即使缺少数据库文件

> ID：13369964
> 
> 赞同：5
> 
> 时间：2012-11-13T22:27:19.053
> 
> 标签：sql-server, asp.net-mvc, entity-framework

如果我使用 Internet 应用程序项目模板（使用表单身份验证）创建一个新的 MVC4 Web 应用程序，那么当我第一次运行它并单击注册时，对 context.Database.Exists 的调用（在 InitializeSimpleMembershipAttribute 过滤器中）正确检测到数据库文件不存在，并调用 ObjectContext.CreateDatabase，在 App_Data 文件夹中创建 dbf 和 ldf 文件。

如果我随后删除 dbf 和 ldf 文件并再次运行应用程序，则对 context.Database.Exists 的调用将返回 true，尽管事实上数据库文件已消失。这种行为似乎是持久的：一旦 ObjectContext.CreateDatabase 被调用，一些魔法似乎会记住数据库“存在”，即使物理文件已经消失，即使我重新启动 PC。

好的，所以我假设 SQL Server 中的某些东西正在记住数据库的存在。所以我已经安装并运行了 SQL Server Management Studio。但是，\SQLEXPRESS 节点下的 Databases 文件夹下唯一出现的是 System Databases 文件夹。我看不到我的数据库文件连接的迹象。

这是怎么回事？为什么 context.Database.Exist 返回 true，如果数据库文件消失了，我如何说服它返回 false？为什么我在 SQL Server Management Studio 中看不到数据库连接的一些证据？

鲍勃

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-19T21:36:39.730

您可以通过从 LocalDb 实例中删除数据库来删除它。使用 SQL Managment Studio 连接到“(LocalDb)\v11.0”。

# asp.net - GridView 不显示

> ID：13369965
> 
> 赞同：0
> 
> 时间：2012-11-13T22:27:20.397
> 
> 标签：asp.net, sql, gridview

数据表返回正确数量的行/记录。但由于某种原因，我无法让我的 GridView 渲染..根本没有显示......

**编辑：** GridView 返回“RowErorrs”和“有错误”列。但不是我的数据。

```
Dim ConnString As String = System.Configuration.ConfigurationManager.ConnectionStrings("oakfratintdbConnectionString").ConnectionString
Dim Conn As New SqlConnection(ConnString)
Dim cmd As New SqlCommand("SELECT * FROM [OFCInterments]", Conn)

Dim DA As New SqlDataAdapter(cmd)
Dim DT As New DataTable
'WHERE ([FirstName] = @FirstName)
cmd.Parameters.AddWithValue("@FirstName", "Mike")

Try
    Conn.Open()
    DA.SelectCommand = cmd
    DA.Fill(DT)
    GridView1.DataSource = DT
    GridView1.DataBind()

    If DT.Rows.Count > 0 Then
        Dim NoResultsText As String = DT.Rows.Count.ToString + " records found."
        txtStatys.Text = NoResultsText
        txtStatys.Visible = True

    End If

Catch ex As Exception
    Throw ex
Finally
    Conn.Close()
    DA.Dispose()
    Conn.Dispose()

End Try 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:40:41.460

> GridView 返回“RowErorrs”和“Has Errors”列。但不是我的数据。

那不是 的属性，`GridView`而是 的属性`DataTable`。

[`DataTable.HasErrors`财产](http://msdn.microsoft.com/en-us/library/system.data.datatable.haserrors.aspx)

您可以使用所有行错误[`DataTable.GetErrors()`](http://msdn.microsoft.com/en-us/library/system.data.datatable.geterrors.aspx)来检索 a 。`DataTable`检查[`RowError`](http://msdn.microsoft.com/en-us/library/system.data.datarow.rowerror.aspx)每个属性，`DataRow`您就会知道异常的原因。您可以在调试器[quick-watch-window](http://msdn.microsoft.com/en-us/library/cyzbs7s2.aspx)中完成这一切。

* * *

您应该考虑的几点：

GridView 没有显示，一些可能的原因：

*   GridView 是否完全可见（以及它的所有父级，因为它继承了该属性）？
*   您是否注册了该`RowDataBound`事件和未捕获的异常？

一般建议：

*   不要使用`Catch`块来重新抛出异常（即使`Throw`单独使用会更好，因为它会保留堆栈跟踪）。相反，不要抓住它或用它做一些有用的事情（fe logging）。
*   使用[`Using`-statement](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)处理您的 ADO.NET 对象，如连接（隐式关闭它）

# javascript - 淘汰赛js。foreach 不工作的孩子的孩子

> ID：13369969
> 
> 赞同：1
> 
> 时间：2012-11-13T22:27:41.953
> 
> 标签：javascript, foreach, knockout.js, knockout-mapping-plugin

我无法通过淘汰赛迭代我的 json 数据。我的视图模型看起来像：

```
var ViewModel = function () {
    var self = this;
    self.Summary = ko.observableArray();
    $.getJSON('some api url', function(result) {
        ko.mapping.fromJS(result, {}, self);
    });
}
ko.applyBindings(new ViewModel()); 
```

我的 JSON 数据如下所示：

```
{
Summary: {
    Details: [
        {
            Name: "Foo",
            Id: 1,
            Detail: "Some Data"
        },
        {
            Name: "Bar",
            Id: 2,
            Detail: "Another Data"
        }
    ],
    SummaryOverview: "BlahBlah",
    AnotherObject: [
        {
            Name: "My Name"
            AnotherChildObject: [
                {
                    name:"some name"
                }
            ]
        }
    ]
} 
```

我的问题是我是否以这种方式遍历我的数据：

```
<div data-bind="foreach: Summary">             
    <div data-bind="text: Details.Detail"></div>
</div> 
```

**或者**

```
<div data-bind: "foreach: Summary.Details">
    <div data-bind="text: Detail"></div>
</div> 
```

如何显示详细信息？上面的 HTML 对我不起作用。非常感谢你！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T15:15:20.610

问题`ko.mapping`是你的 observables 将被新的 observables 替换。为了澄清，`Summary`作为 observableArray 的 将被替换为新的 observableArray `ko.mapping`。

有两种方法可以解决这个问题。第一种选择是等待`applyBindings`直到真正的数组被创建：

```
var ViewModel = function () {
    var self = this;
    // no need to set the array, it will be overwritten anyway
    // self.Summary = ko.observableArray();
}

var vm = new ViewModel();
$.getJSON('some api url', function(result) {
    ko.mapping.fromJS(result, {}, vm);
    ko.applyBindings(vm);
}); 
```

备选方案 2 是使用初始（空）数据引导视图模型。如果你应用`ko.mapping`一个空数组，下一次调用`ko.mapping`将更新现有数组而不是覆盖它。像这样：

```
var ViewModel = function () {
    var self = this;
    var init = { Summary: [] };
    ko.mapping.fromJS(init, {}, self);

    $.getJSON('some api url', function(result) {
        ko.mapping.fromJS(result, {}, self);
    });
}

ko.applyBindings(new ViewModel()); 
```

我通常选择备选方案 2。备选方案 1 在调用之前会导致延迟`ko.applyBindings`，这可能会导致一些 UI 闪烁（并且可能会看到不需要的元素等）。

# javascript - Ace 编辑器，javascript 风格：“加载脚本失败”异常

> ID：13369972
> 
> 赞同：3
> 
> 时间：2012-11-13T22:27:59.910
> 
> 标签：javascript, ace-editor

我尝试使用带有 javascript 突出显示的 Ace 编辑器，如下所示：

```
editor.getSession().setMode("ace/mode/javascript"); 
```

"editor" 是一个有效的编辑器实例，使用 PHP 或 C#。但是，从这一行我得到一个异常，Firebug 控制台上显示的内容如下：

> 未捕获的异常：[xpconnect 包装的原生原型]
> 
> 加载脚本失败：[http](http://d1n0x3qji82z53.cloudfront.net/src-min-noconflict/worker-javascript.js) ://d1n0x3qji82z53.cloudfront.net/src-min-noconflict/worker-javascript.js (nsresult = 0x805303f4)

我正在使用编辑器的 CDN 版本，这就是 cloudfront url 的原因。[基本上我的代码与Ace 嵌入示例](http://ace.ajax.org/#nav=embedding)中的代码相同。

出了什么问题？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T12:11:10.727

ace 尝试将其加载到 webWorker 并由于跨域脚本限制而失败

# c - Getting every other line empty on output

> ID：13369980
> 
> 赞同：2
> 
> 时间：2012-11-13T22:28:32.933
> 
> 标签：c

I have a problem with getting every other line empty on output with this code. The desired output is: [http://paste.ubuntu.com/1354365/](http://paste.ubuntu.com/1354365/)

While I get: [http://paste.ubuntu.com/1356669/](http://paste.ubuntu.com/1356669/)

Does anyone have an idea of why I'm getting these empty lines on every other line?

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

FILE *fp; 
FILE *fw; 

int main(int argc, char *argv[]){
char buffer[100];
char *fileName = malloc(10*sizeof(char));
char **output = calloc(10, sizeof(char*));
char **outputBuffer = calloc(10, sizeof(char*));

fw = fopen("calvin.txt", "w+");

for(int y = 0; y < 6; y++){
    for(int i = 0; i < 10; i ++)
    {
        output[i] = malloc(100);
    }

    for(int x = 0; x < 12; x++){
        sprintf(fileName,"part_%02d-%02d", x, y);
        fp = fopen(fileName, "rb");

        if(fp == NULL)
        {
            printf("Kan ikke åpne den filen(finnes ikke/rettigheter)\n");
        }
        else if(fp != NULL){

            memset(buffer, 0, 100); 
            for(int i = 0; i < 10; i++){ 
                outputBuffer[i] = malloc(100);
            }

            fread(buffer, 1, 100, fp); 

            for(int i = 0; i < 100; i++){
                if(buffer[i] == '\0')
                {
                    buffer[i] = ' ';
                }
                else if(buffer[i] == '\n')
                {
                    buffer[i] = ' ';
                }
            }
            for(int i = 0; i < 10; i++) { 
                strncpy(outputBuffer[i], buffer + i * 10, 10);

                strncat(output[i], outputBuffer[i]+1, 11);

            }                       
        }

    }

    for(int i = 0; i < 10; i++){
        printf("%s\n", output[i]);

    }

}
fclose(fp);
free(fileName);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:50:36.973

You are not reading correcting from the file. On the first image in the beginning you have:

```
 o ""oo    " o o o 
```

on the second

```
 ""oo     o o o 
```

That does not make a lot of sense because it is the first line. It is not related to empty lines since we are talking about the first line.

It seems that you are reading `-2` characters from the left so " prints over o the other " on the ' ' ect..

Try this away, may not be the most efficient solution:

```
int read(char *file)
{
     FILE *fp = NULL;         
     int size = 0, pos = 0,i;
     fp = fopen(file,"r");
     if (!fp) return 0;

     for(; ((getc(fp))!=EOF);  size++); // Count the number of elements in the file

     fclose(fp);

     char buffer[size];

     fp = fopen(file,"r");

     if (!fp) return 0;

     while((buffer[pos++]=getc(fp))!=EOF); // Saving the chars into the buffer

     for(i = 0; i < pos; i++)              // print them.
       printf("%c",buffer[i]);

    fclose(fp);
    return 1;  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-14T00:52:10.447

This part seems problematic:

```
 strncpy(outputBuffer[i], buffer + i * 10, 10);

           strncat(output[i], outputBuffer[i]+1, 11); 
```

1) Why is it necessary to use the extra `outputBuffer` step?

2) You know that `strncpy()` isn't guaranteed to null-terminate the string it copies.

3) More significantly, `output[i]` hasn't been initialized, so `strncat()` will concatenate the string after whatever junk is already in there. **If you use `calloc()` instead of `malloc()` when creating each `output[i]`, that might help.** It's even possible that your `output[i]` variables are what hold your extra newline.

4) Even if initialized to an empty string, you could easily overflow `output[i]`, since you're looping 12 times and writing up to 11 characters to it. 11 * 12 + 1 for the null terminator = 133 bytes written to a 100-byte array.

In general, unless this is a class assignment that requires use of `malloc()`, I don't understand why you aren't just declaring your variables once, at the start of the program and zeroing them out at the start of each loop:

```
char fileName[10];
char output[10][100];
char outputBuffer[10][100]; 
```

And, as stated by others, your allocating a bunch of memory and not trying to free it up. Allocate it once outside of your loop or just skip the allocation step and declare them directly.

# php - 当我在画布中转到我的索引时，Facebook 说页面不喜欢

> ID：13369984
> 
> 赞同：0
> 
> 时间：2012-11-13T22:28:49.163
> 
> 标签：php, facebook

该页面被喜欢，我的应用程序正在检查它是否喜欢，但如果我回到 index.php，它会说它不喜欢。

我正在使用：

```
if ($signed['page']['liked'] <> 1) {
    $core->redirect('gate');
} 
```

然后我开始使用它，但是当我单击索引时，它一直移动到 apps.facebook.com/myapp，然后重定向回另一个页面。但问题是在不同的文件夹中有另一个 index.php 文件用于不同的语言，我不能使用它，因为它会重定向到英文版本。我怎样才能解决这个问题？

```
function parsePageSignedRequest() {
    if (isset($_REQUEST['signed_request'])) {
      $encoded_sig = null;
      $payload = null;
      list($encoded_sig, $payload) = explode('.', $_REQUEST['signed_request'], 2);
      $sig = base64_decode(strtr($encoded_sig, '-_', '+/'));
      $data = json_decode(base64_decode(strtr($payload, '-_', '+/'), true));
      return $data;
    }
    return false;

}
  if($signed_request = parsePageSignedRequest()) {
    if($signed_request->page->liked) {
      //echo "This content is for Fans only!";
    } else {
      //echo "Please click on the Like button to view this tab!";
      $core->redirect('gate');
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T22:31:21.060

中的`page`部分`signed_request`仅在应用程序加载到页面选项卡时出现，而不是作为画布应用程序。

{根据下面的评论进行编辑： - 阅读[`signed_request`文档](https://developers.facebook.com/docs/howtos/login/signed-request/)- 签名的请求仅出现在 Facebook 发出的 POST 请求中 - 如果用户单击页面选项卡应用程序内的链接，或者如果您从登陆 URL 重定向，则不存在到您应用内的另一个网址}

# objective-c - 推送通知...当用户禁用它们时

> ID：13369990
> 
> 赞同：2
> 
> 时间：2012-11-13T22:29:06.037
> 
> 标签：objective-c, push-notification

我正在 iOS 应用程序中实现推送通知。我观察到，在设备设置中禁用与我的应用程序通知相关的所有内容后，该应用程序仍会回答

```
- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken 
```

使用设备令牌。

我还注意到，如果您对第一个问题的回答是否定的，设备令牌仍然可用并由`didRegisterForRemoteNotificationsWithDeviceToken`

这是否意味着推送通知实际上也发送到禁用某个应用程序通知的设备，但声音和徽章只是“隐藏”（忽略）？

# graphviz - Graphviz：如何在 HTML 表格单元格之间创建边缘？

> ID：13369992
> 
> 赞同：5
> 
> 时间：2012-11-13T22:29:09.830
> 
> 标签：graphviz

请考虑以下代码：

```
digraph G {
    node [shape=plaintext]

    a [label=<<TABLE BORDER="0" CELLBORDER="1" CELLSPACING="0">
                           <TR><TD ID="first" BGCOLOR="gray">first</TD></TR>
                           <TR><TD ID="second" PORT="f1">second</TD></TR>
                           <TR><TD ID="third" PORT="f2">third</TD></TR>
              </TABLE>>];

    b [label=<<TABLE BORDER="0" CELLBORDER="1" CELLSPACING="0">
                           <TR><TD ID="first" BGCOLOR="gray">first</TD></TR>
                           <TR><TD ID="second" PORT="f1">second</TD></TR>
                           <TR><TD ID="third" PORT="f2">third</TD></TR>
              </TABLE>>];

    a:first -> b:first;
} 
```

我收到很多警告：

```
laci@nitehawk ~ $ dot records.gv -T pdf > records.pdf
Warning: Illegal attribute ID in <TD> - ignored
Warning: Illegal attribute ID in <TD> - ignored
Warning: Illegal attribute ID in <TD> - ignored
in label of node a
Warning: Illegal attribute ID in <TD> - ignored
Warning: Illegal attribute ID in <TD> - ignored
Warning: Illegal attribute ID in <TD> - ignored
in label of node b
Warning: node a, port first unrecognized
Warning: node b, port first unrecognized 
```

1.  根据[文档](http://www.graphviz.org/doc/info/shapes.html)，TD 的 ID 属性应该是合法的。我错过了什么？
2.  如何引用单个单元格并在它们之间创建边缘？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-14T14:11:48.150

为了完整起见，这是实际有效的完整来源：

```
digraph G {
    node [shape=plaintext]

    a [label=<<TABLE BORDER="0" CELLBORDER="1" CELLSPACING="0">
                           <TR><TD PORT="c" BGCOLOR="gray">first</TD></TR>
                           <TR><TD PORT="d">second</TD></TR>
                           <TR><TD PORT="e">third</TD></TR>
              </TABLE>>];

    b [label=<<TABLE BORDER="0" CELLBORDER="1" CELLSPACING="0">
                           <TR><TD PORT="c" BGCOLOR="gray">first</TD></TR>
                           <TR><TD PORT="d">second</TD></TR>
                           <TR><TD PORT="e">third</TD></TR>
              </TABLE>>];

    a:c -> b:c;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-13T22:52:30.977

您可以简单地使用`PORT`而不是，`ID`然后使用示例中的边缘定义。

```
<TD PORT="first" BGCOLOR="gray">first</TD> 
```

[`ID`](http://www.graphviz.org/doc/info/attrs.html#d:id)的目的是*下游使用*，因此除非您使用 SVG 输出并在其他地方重用 id，否则它们可能并不是真正有用。

至于警告，我没有用 graphviz 2.28 得到它们。如果您使用旧版本的 graphviz，我建议更新。

![graphviz html 标签端口](../Images/2538b427c9ee64bab380cfa755c95814.png)

# php - php中是否有用于多级数组的array_fill_keys？

> ID：13369995
> 
> 赞同：0
> 
> 时间：2012-11-13T22:29:17.660
> 
> 标签：php, arrays

我的意思是创建具有相同键但每个值都在第二个参数中指定的新数组。

就像你有[array_fill_keys](http://pl1.php.net/manual/en/function.array-fill-keys.php)

```
 array array_fill_keys ( array $keys , mixed $value ) 
```

`$keys`多维数组在哪里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T22:39:45.077

不是我知道的，但你可以试试

```
$array = array("A","B");
$array["C"] = array("X","Y");
$array["C"]['Z'] = array(1,2,3);

var_dump(fillKeys($array, "banana"));

function fillKeys($keys, $value) {
    $return = array();
    foreach ( $keys as $key => $val ) {
        $return[is_array($val) ? $key : $val] = is_array($val) ? fillKeys($val, $value) : $value;
    }
    return $return;
} 
```

输出

```
array (size=3)
  'A' => string 'banana' (length=6)
  'B' => string 'banana' (length=6)
  'C' => 
    array (size=3)
      'X' => string 'banana' (length=6)
      'Y' => string 'banana' (length=6)
      'Z' => 
        array (size=3)
          1 => string 'banana' (length=6)
          2 => string 'banana' (length=6)
          3 => string 'banana' (length=6) 
```

# ruby-on-rails - 从国家到语言的区域设置回退，无需单独定义每个语言

> ID：13369996
> 
> 赞同：2
> 
> 时间：2012-11-13T22:29:19.607
> 
> 标签：ruby-on-rails, localization, fallback, globalize3, rails-i18n

我正在使用默认的 rails I18n 本地化一个应用程序，并将 globalize3 作为后端。

是否可以在自动转到默认回退之前设置带有国家代码（即`:fr-CA`）的区域设置以回退到其特定语言（ ）？`:fr`我知道可以手动设置每个语言环境/国家/地区

```
config.i18n.fallbacks = {'fr-CA' => 'fr'} 
```

但是最好不必手动添加每个后备并自动执行此行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T00:42:10.960

为了准确地实现这一点，我有一个初始化器

```
I18n::Backend::Simple.send(:include, I18n::Backend::Fallbacks) 
```

有关更多信息，请参阅[源代码](https://github.com/svenfuchs/i18n/blob/master/lib/i18n/backend/fallbacks.rb)。

**编辑：**

这提醒了我，ActionView LookupContext 中有[一个烦人的错误，它阻止了本地化视图的工作（尽管它适用于语言环境文件）。](https://github.com/rails/rails/issues/840)我看还没有修好。基本上，如果您有任何本地化视图（例如帮助页面，由于它们的长度不适合存储在语言环境文件中），那么 fr-CA 语言环境将**不会**退回到名为 help.fr.html.erb 的视图。您要么必须将文件命名为 help.fr-CA.html.erb ，**要么**就像我所做的那样，用另一个初始化程序对 LookupContext 进行猴子补丁，有点像这样：

```
module ActionView
  class LookupContext
    # Override locale= to also set the I18n.locale. If the current I18n.config object responds
    # to original_config, it means that it's has a copy of the original I18n configuration and it's
    # acting as proxy, which we need to skip.
    def locale=(value)
      if value
        config = I18n.config.respond_to?(:original_config) ? I18n.config.original_config : I18n.config
        config.locale = value[0,2] # only use first part of the locale in lookups
      end
      super(@skip_default_locale ? I18n.locale : default_locale)
    end
  end
end 
```

**另一个编辑：**请注意，该补丁相当粗糙并且破坏了完整的语言环境查找，直接针对语言。如果您还需要完全匹配的视图（语言区域），您需要改进我的代码！

# eclipse - Flash Builder 4.5 中的无尽 NullPointerExceptions

> ID：13369999
> 
> 赞同：3
> 
> 时间：2012-11-13T22:29:36.423
> 
> 标签：eclipse, apache-flex, flash-builder, flex3

几个月来，我一直在 Mac OS X 10.8.2 上使用 Flash Builder 4.5 和 Flex SDK 3.5B。这并不是一次完美的体验——该软件有很多错误——但*总的来说*，它直到最近才正常工作。

我们的应用程序包括两个 Flash Builder“项目”，其中一个引用另一个。每当我们克隆存储库时，都需要更新`.project`主项目的文件以包含辅助项目的新路径。

在一切崩溃之前我做的最后一件事是将包含项目的文件夹移动到新位置。正如预期的那样，当我打开 Flash Builder 时，它抱怨找不到我的项目文件，并且在“包资源管理器”视图中它们都被标记为不可访问。我没有从我的工作区中删除无法访问的项目，但我尝试从新位置重新导入主项目。这标志着我第一次看到从那以后一直困扰着我的对话：

![“构建工作区”遇到了问题。 构建过程中发生错误。 详细信息：在项目“配置器”上运行“Flex”时出错。 java.lang.NullPointerException](../Images/6703d6b078146023abc9afb5a59d8d22.png)

“问题”视图告诉我参考错误日志......

![错误（2 项）：发生内部构建错误。 有关详细信息，请参阅错误日志。](../Images/5d9daa92c5b24af3c77326954ecedc50.png)

...但是错误日志是空的！

“包资源管理器”视图没有改变（新项目未列出），所以我决定再次尝试导入。当我选择项目目录时，Flash Builder 说我无法导入它，因为该项目已经在工作区中。*“但是包资源管理器说它不是……如果我重新启动 Flash Builder，它可能会让我再试一次，”*我想。我想错了。当我重新启动时，这是我看到的：

![无法创建视图：引发了意外异常。](../Images/d671c9fd4e1b13aa9148824641c07cd9.png)

```
java.lang.NullPointerException
    at com.adobe.flexbuilder.util.PathUtils.resolveLocaleInSourcePath(PathUtils.java:297)
    at com.adobe.flexbuilder.project.actionscript.internal.ActionScriptProject.getProjectPath(ActionScriptProject.java:713)
    at com.adobe.flexbuilder.project.actionscript.internal.ActionScriptProject.getSourceContainers(ActionScriptProject.java:681)
    at com.adobe.flexbuilder.as.editor.ui.packageexplorer.content.FlexPackageExplorerContentManager.getSourceRoot(FlexPackageExplorerContentManager.java:644)
    at com.adobe.flexbuilder.as.editor.ui.packageexplorer.FlexPackageExplorerContentProvider.getWorkspaceRootChildren(FlexPackageExplorerContentProvider.java:152)
    at com.adobe.flexbuilder.as.editor.ui.packageexplorer.FlexPackageExplorerContentProvider.getChildren(FlexPackageExplorerContentProvider.java:80)
    at com.adobe.flexbuilder.as.editor.ui.packageexplorer.FlexPackageExplorerContentProvider.inputChanged(FlexPackageExplorerContentProvider.java:449)
    [...] 
```

它甚至无法显示项目列表，因此我可以删除导致问题的项目。“编辑器”视图中显示了类似的消息。删除所有项目文件也无济于事。我无法修复工作区，我可以继续使用 Flash Builder 的唯一方法是创建一个新工作区。

从那时起，我尝试了许多不同的事情：

*   重新安装了 Flash Builder 4.5。
*   重新安装了 Flex SDK 3.5B。
*   检查了该项目的六个月大版本。
*   升级到 Flash Builder 4.6。
*   在我的计算机上创建了一个新的用户配置文件。
*   试图删除任何可能破坏的跟踪文件：
    1.  使用 Instruments 来监控 Flash Builder 进程接触到的所有文件。
    2.  已卸载 Flash Builder。
    3.  用于`find`定位任何包含在`builder`其`eclipse`名称中的文件。
    4.  删除在 (1) 或 (3) 中找到的所有可能与 Flash Builder 相关的文件。
    5.  重新安装了 Flash Builder。
*   在另一台运行 Mac OS X 10.6.8 的 Mac 上安装了 Flash Builder 4.5。
*   在另一台 Mac 上使用 Flex SDK 3.5 检查了该项目的两年前版本。
*   在另一台 Mac 上的新工作区中进行了尝试，该项目已经在现有工作区中运行。（是的，当我们尝试将其导入新工作区时它坏了，即使它在现有工作区中继续正常工作。）
*   在 Windows 7 VM 中安装了 Flash Builder 4.5。

没有任何区别。这似乎是不可能的。

我团队的其他成员已经在这个项目上工作了几年而没有遇到这个特殊问题，但现在我开始之前的项目版本似乎已经损坏，甚至在完全不同的系统上使用全新安装的 Flash Builder也打破了。

我联系了 Adob​​e 的电话支持以寻求有关此问题的帮助。在被告知这将是十五分钟后，我等待了一个多小时，只是让他们告诉我他们不再为该产品提供电话支持。（遗憾的是，在我等待之前，他们的电话树无法弄清楚这一点。）但是，我被告知“2 级电子邮件支持”可在`platformt2-noida@adobe.com`. 我应该知道比寄希望于地址无效而且我的消息都被退回更好！

我不知道是怎么回事。看来我一定是做了别的事情而忘记了，因为目前的情况毫无意义。有没有人遇到过这个问题？你知道可能是什么原因造成的，或者我可以做些什么来解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T20:54:55.623

我们终于找到了解决办法。比较虎头蛇尾。

# 忽略所有错误。

导入您的项目文件并以您想要的任何顺序激活正确的 SDK 版本。如果您最终得到一个混乱的“项目资源管理器”视图，只需关闭该视图并重新打开它，或者重新启动 Flash Builder。

一旦“项目资源管理器”视图可用，选择您的主要项目并运行它。它应该工作！

* * *

实际上没有什么是永久损坏的。如果您先导入主项目，或者使用错误的 SDK 版本，“Project Explorer”视图可能处于暂时无法使用的状态，但只要您最终修复了这些问题，那么“Project Explorer”视图也将在下一个修复打开它的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T07:26:18.587

制作工作区中所有项目的备份副本，然后删除工作区中的所有文件（包括隐藏文件）。接下来将 Flashbuilder 指向现在为空的工作区目录（强制它重新创建所有工作区文件）。现在导入您已备份的项目文件夹。