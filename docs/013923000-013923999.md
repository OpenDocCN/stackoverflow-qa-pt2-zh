# StackOverflow 问答 13923000-13923999

# azure - 代码生成 Azure Servicebus 命名空间

> ID：13923003
> 
> 赞同：1
> 
> 时间：2012-12-17T22:04:57.357
> 
> 标签：azure, servicebus, azureservicebus

我试图找出一种使用 Azure 管理 API、cmdlet 或 REST API 创建 Azure Servicebus 命名空间的方法，以便我可以为我的部署创建可重复的脚本。现在，我知道如何创建 Servicebus 命名空间的唯一方法是通过 Azure 门户。

**是否有使用 Azure 门户创建新的 azure servicebus 的可编写脚本（c#、powershell）方式**？

这是我已经阅读过的一些链接：

Azure Cmdlet：msdn.microsoft.com/en-us/library/jj152841.aspx

Windows Azure 的 API 参考：msdn.microsoft.com/en-us/library/windowsazure/ff800682.aspx

[使用 WCF 以声明方式和编程方式订阅 Windows Azure 服务总线中继](http://blog.longle.net/2012/09/18/declaritively-and-programitcally-subscribing-to-the-windows-azure-service-bus-relay-with-wcf/)

[如何使用服务总线中继服务](http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-relay/)

先感谢您。

加绍普

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T23:35:37.860

您可以使用最新版本的[Azure SDK 工具](https://github.com/WindowsAzure/azure-sdk-tools/tree/dev)通过 powershell 创建命名空间。[这篇博](http://michaelwasham.com/2012/12/14/new-windows-azure-powershell-update-december-2012/)文有一个很好的教程，介绍了如何使用 SDK，以及哪些 ServiceBus 操作可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T07:53:01.410

没有。不确定它是否在工作中，但到目前为止，您只能在门户中创建命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-02T15:42:18.070

Windows Azure 服务总线 REST API 中的[创建命名空间](http://msdn.microsoft.com/en-us/library/windowsazure/jj856303.aspx)可用于此目的。

根据文档：

> 创建一个新的服务命名空间。创建后，此命名空间的资源清单是不可变的。这个操作是幂等的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-15T00:26:14.147

“您可以使用 PowerShell 创建服务总线资源，要开始使用，您必须对 PowerShell 脚本、NuGet 包和 .NET Framework 有大致的了解。阅读此[Microsoft 文档](https://docs.microsoft.com/en-us/azure/service-bus-messaging/service-bus-manage-with-ps)以获取更多信息。”

# c++ - 编译向导生成的 MFC 应用程序时出错；缺少 CDocument 声明

> ID：13923006
> 
> 赞同：0
> 
> 时间：2012-12-17T22:05:06.747
> 
> 标签：c++, visual-studio-2008, mfc

我认为自己对 MFC 非常敏锐，但我最近遇到了一个问题，我无法在网上找到修复程序，也无法自己追踪它......

问题是，我年初写的一些代码，由于一个 iOS 项目的出现而被搁置，所以我花了大约 5 个月的时间来写，现在我准备回去了到最后一个项目，但它似乎遭受了 Code Rot 的影响。

问题是，这不是 Code Rot，实际上我的 Build Env 有问题。我正在使用VS2008，出于各种原因，无论如何这不应该成为问题的焦点。

当我创建一个 DEFAULT C++ MFC (Native) 应用程序时，只需创建项目，然后在向导上点击 FINISH，然后 BUILD 它，编译器编译第一个 CPP 文件时出现错误。它似乎可以很好地编译 stdafx.cpp，其中包括所有 AFX 标头，但最终发生的是我收到“CDocument”未定义的错误......现在，我知道足够多的 MFC，这不应该是。 ..

我检查了所有路径，包括 INCLUDE、LIB 等等，它们都指向本质上是什么

`c:\Program Files\Microsoft Visual Studio 9.0\VC\ATLMFC\INCLUDE;c:\Program Files\Microsoft Visual Studio 9.0\VC\INCLUDE`

以及一些用于 Windows SDK 的包含，等等。我得到的错误显示 AFXWIN.H 来自 ATLMFC\INCLUDE 文件夹。

所以，到此为止，我不得不假设我可能还有其他问题？更新了一些 MFC DLL 或 LIB，它们可能不应该有？

当我尝试从我的 VS2008 Team Foundation DVD (en_visual_studio_team_system_2008_team_suite_x86_x64wow_dvd_X##-####) 安装 ISO 或 DVD 时，当我尝试启动修复模式时出现错误...

我不知道有任何扩展的日志文件可能有助于追踪这一点。（至于尝试“修复”我的VS2008安装时安装程序中的错误是什么，至少......）

我在 Win7、x86 上运行，没有启用 UAC。有没有其他人遇到过这样的问题？

多谢你们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T20:21:34.987

我发现了问题，而且很糟糕，我什至不想回答这个问题，但我认为我更好，因为这可能发生在其他人身上。

这整个问题发生在我编辑一个根本不使用 MFC 的项目时，但它被加载到一个确实使用 MFC 的项目的 WORKSPACE 中。有一次，我为 Document to XmlDocument 做了一个“在文件中查找和替换”。好吧，我几乎不知道，它会转到我的 INCLUDE 路径，并在那里更新文件。所以，我的 MFC“CDocument”在 afxwin.h 文件中变成了“CXmlDocument”。（以及 afxwin.inl）。我花了很多时间才找到这个，因为大约 6 个月前我被放弃了那个项目。我回来处理使用 MFC 和 waddaya 知道的原始项目。代码腐烂。好吧，从那以后我的电脑发生了很多变化，所以我想安装了一些新版本的 MFC，或者其他什么。所以，我去搜索VS2010的包含路径的CXmlDocument，它不存在！所以，我想，“好吧.. CXmlDocument 不是一个合法的 MFC 类。” 因此，我找到了 CDocument 在 VS2010 中的声明位置，并将其与 VS2008 中的内容相匹配。就在那时，我开始意识到发生了什么。所以，我用 CDocument 和 BAM 替换了所有 CXmlDocument 实例！代码编译得很好...

所以，今天孩子们的教训是，如果你在文件中进行搜索和替换，要小心你使用的设置，并密切注意修改了哪些文件！

我很抱歉每个人都阅读了这个问题并浪费了任何时间阅读它，但是我非常感谢尝试帮助我解决这个问题。谢谢你们/女孩。

# java - java for each：使用列表部分中的方法（:)

> ID：13923011
> 
> 赞同：-5
> 
> 时间：2012-12-17T22:05:38.557
> 
> 标签：java, foreach

我知道这是一个愚蠢的问题，因为我从未见过在 for each 循环中使用方法返回列表的任何示例，我直观地觉得这不是一个好主意：

```
for (String element : computeElementList()) {
    Systems.out.print(element);
} 
```

我应该先将方法分配给变量吗？或者这根本没有必要，因为这个 computeElementList() 方法只会在循环开始时被调用一次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:07:01.540

额外的变量不是必需的，因为`computeElementList()`只会在循环开始时调用一次。

除非您需要`computeElementList()`其他结果，否则创建一个新变量只会给代码添加混乱（IMO）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:09:54.427

它并没有真正增加可读性。由于该函数返回一些您可以迭代的内容：集合、数组等。没关系。返回布尔值并编写如下的函数也是如此：

```
if(doSomething())  {...} 
```

该函数只会被调用一次。如果不是，即使在大小为 1 的列表上，您也会很快 permgen / 耗尽内存。

# azure - 通过 Azure 在 BasicHttpRelayBinding 上公开 WSDL

> ID：13923026
> 
> 赞同：5
> 
> 时间：2012-12-17T22:06:32.757
> 
> 标签：azure, wsdl, azureservicebus, basichttprelaybinding

我有一个使用 AppFabric 自动启动的 svc。我想要做的是[通过总线为我的服务公开 wsdl](http://msdn.microsoft.com/en-us/library/windowsazure/ee706721.aspx)。当然，在内部服务和 wsdl 工作正常，我也可以毫无问题地通过总线使用服务。我唯一无法正确配置的是通过中继查看 wsdl。

创建默认终结点，`ServiceHostFactory`并添加一个 Azure 终结点和一个 mex 终结点，希望通过中继公开 wsdl。当我尝试从服务总线 url 查看 wsdl 时，出现不匹配错误，可能是由于 ACS 身份验证失败？

```
...cannot be processed at the receiver, due to an AddressFilter mismatch at the EndpointDispatcher. Check that the sender and receiver's EndpointAddresses agree 
```

我是否需要将 mex 端点设置为匿名身份验证，以便我可以转到浏览器并查看 wsdl？只是不知道还有什么可以尝试...任何帮助将不胜感激！

示例网址：

[http://myservicebusexample.servicebus.windows.net/MyService/AService.svc?wsdl](http://myservicebusexample.servicebus.windows.net/MyService/AService.svc?wsdl)

或者

[http://myservicebusexample.servicebus.windows.net/MyService/AService.svc/mex](http://myservicebusexample.servicebus.windows.net/MyService/AService.svc/mex)

```
<serviceBehaviors>
   <behavior>
      <serviceMetadata httpGetEnabled="true" />
   </behavior>
</serviceBehaviors> 
```

所以这是我的`ServiceHostFactory`

```
// Create host with default endpoints
ServiceHost host = new ServiceHost(serviceType, baseAddresses);
host.AddDefaultEndpoints();

// Create Relay Endpoint for Azure
ServiceEndpoint relayEndpoint = host.AddServiceEndpoint(typeof(IMyContract), new BasicHttpRelayBinding("MyAzureBindingConfiguration"), relayAddress);

// Apply ACS Credentials for the relay endpoint
relayEndpoint.ApplyEndpointBehaviorConfig("MyAzureACSCredentials");

// Create mex Endpoint to expose wsdl over the relay
ServiceEndpoint mexEndpoint = host.AddServiceEndpoint(ServiceMetadataBehavior.MexContractName,
                       new BasicHttpRelayBinding("MyAzureBindingConfiguration"),
                       "mex");

// Apply ACS Credentials for the mex endpoint
mexEndpoint.ApplyEndpointBehaviorConfig("MyAzureACSCredentials"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:47:54.633

尝试添加启用元数据行为的 serviceBehavior：

```
 <behavior>
    <serviceMetadata />
 </behavior> 
```

# java - Netty 客户端到服务器消息

> ID：13923032
> 
> 赞同：11
> 
> 时间：2012-12-17T22:06:56.410
> 
> 标签：java, tcp, connection, client, netty

这实际上是我在这里的第一篇文章，我一直试图解决这个问题一段时间，但我终于打电话给国旗并试图在这个话题上获得一些帮助。

所以我有一个客户端和一个服务器，它是在 echo 客户端/服务器和安全聊天客户端/服务器之后建模的。我对聊天的 SSL 部分不感兴趣，我使用 echo 只是为了确保我收到来自客户端/服务器的响应。我将在这篇文章的底部添加所有相关的代码。我目前遇到的问题是，我可以在客户端连接时从服务器向客户端发送消息，但是在服务器向客户端发送初始消息时，我无法从客户端向服务器发送消息。从服务器发送的消息是：

```
Welcome to the server! 
```

来自客户端的消息是

```
test 
```

我应该知道我收到了来自客户端的消息，因为它应该回显

```
[You] test 
```

我确实知道服务器看到了客户端，它给了我状态更新，但由于某种原因我无法向服务器发送消息。现在问一个最重要的问题...碰巧我目前正在使用*StringDecoder*和*StringEncoder*作为解码器和编码器...如果您正在制作游戏（这就是我正在做的事情）并且您将拥有类似的东西登录、玩家移动、世界更新等...发送字符串是最好的方法吗？我知道我在字节流方面看到了很多，在我的编程课上，我们谈到了操纵字节流，但我仍然不是 100% 熟悉它们。如果字节流是更好/最好的方法，那么有人可以详细解释如何操纵字节流以处理不同的项目。

如前所述，这是客户端中所有内容的开始：

```
public class Client {

public Client() {
    // Initialize the window
    GameWindow.init();
    // Initialize the server connection
    ClientHandler.init();
}

public static void main(String[] args) throws Exception {

    // Set a default server address if one isn't specified in the arguments
    if (args.length < 2 || args.length > 3) {
        System.err.println("Usage: " + Client.class.getSimpleName() + " <host> <port> [<first message size>]");
        System.err.println("Using default values.");
    } else {
        // Parse arguments
        Settings.host = args[0];
        Settings.port = Integer.parseInt(args[1]);
    }

    // start client
    new Client();
} 
```

客户端处理程序：

```
package simple.client.net;

import java.net.InetSocketAddress;
import java.util.concurrent.Executors;
import java.util.logging.Level;
import java.util.logging.Logger;

import org.jboss.netty.bootstrap.ClientBootstrap;
import org.jboss.netty.channel.Channel;
import org.jboss.netty.channel.ChannelFuture;
import org.jboss.netty.channel.ChannelHandlerContext;
import org.jboss.netty.channel.ChannelStateEvent;
import org.jboss.netty.channel.ExceptionEvent;
import org.jboss.netty.channel.MessageEvent;
import org.jboss.netty.channel.SimpleChannelHandler;
import org.jboss.netty.channel.SimpleChannelUpstreamHandler;
import org.jboss.netty.channel.WriteCompletionEvent;
import org.jboss.netty.channel.socket.nio.NioClientSocketChannelFactory;

import simple.client.Settings;

public class ClientHandler extends SimpleChannelUpstreamHandler {

private static final Logger logger = Logger.getLogger(ClientHandler.class.getName());

public static Channel channel;

public ClientHandler() {
}

public static void init() {
    // Configure the client.
    ClientBootstrap bootstrap = new ClientBootstrap(new NioClientSocketChannelFactory(Executors.newCachedThreadPool(), Executors.newCachedThreadPool()));

    // Set up the pipeline factory.
    bootstrap.setPipelineFactory(new ClientPipelineFactory());

    // Start the connection attempt.
    ChannelFuture future = bootstrap.connect(new InetSocketAddress(Settings.host, Settings.port));

    // Wait until the connection is closed or the connection attempt fails.
    channel = future.awaitUninterruptibly().getChannel();

    // This is where the test write is <<------
    ChannelFuture test = channel.write("test");

    if (!future.isSuccess()) {
        future.getCause().printStackTrace();
        bootstrap.releaseExternalResources();
        return;
    }
}

@Override
public void channelBound(ChannelHandlerContext ctx, ChannelStateEvent e) {
    System.out.println("Bound: " + e.getChannel().isBound());
}

@Override
public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) {
    System.out.println("Connected: " + e.getChannel().isConnected());
    System.out.println("Connected: " + e.getChannel().getRemoteAddress());
}

@Override
public void channelClosed(ChannelHandlerContext ctx, ChannelStateEvent e) {
    System.out.println("Closed: " + e.getChannel());
}

@Override
public void channelDisconnected(ChannelHandlerContext ctx, ChannelStateEvent e) {
    System.out.println("Disconnected: " + e.getChannel());
}

@Override
public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e) {
    System.out.println("Open: " + e.getChannel().isOpen());
}

@Override
public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) {
    System.out.println("Error: " + e.getCause());
}

@Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {
    System.out.println("Message: " + e.getMessage());
}
} 
```

最后是 ClientPipeline：

```
package simple.client.net;

import static org.jboss.netty.channel.Channels.*;
import org.jboss.netty.channel.ChannelPipeline;
import org.jboss.netty.channel.ChannelPipelineFactory;
import org.jboss.netty.handler.codec.frame.DelimiterBasedFrameDecoder;
import org.jboss.netty.handler.codec.frame.Delimiters;
import org.jboss.netty.handler.codec.string.StringDecoder;
import org.jboss.netty.handler.codec.string.StringEncoder;

public class ClientPipelineFactory implements ChannelPipelineFactory {

public ChannelPipeline getPipeline() throws Exception {
    ChannelPipeline pipeline = pipeline();

    pipeline.addLast("framer", new DelimiterBasedFrameDecoder(8192, Delimiters.lineDelimiter()));
    pipeline.addLast("decoder", new StringDecoder());
    pipeline.addLast("encoder", new StringEncoder());
    pipeline.addLast("handler", new ClientHandler());

    return pipeline;
}

} 
```

服务器端：

```
package simple.server;

public class Server {
public static void main(String[] args) throws Exception {
    ServerChannelHandler.init();
}
} 
```

服务器通道处理程序：

```
package simple.server;

import java.net.InetSocketAddress;
import java.util.concurrent.Executors;
import java.util.logging.Logger;

import org.jboss.netty.bootstrap.ServerBootstrap;
import org.jboss.netty.buffer.ChannelBuffer;
import org.jboss.netty.channel.Channel;
import org.jboss.netty.channel.ChannelHandlerContext;
import org.jboss.netty.channel.ChannelStateEvent;
import org.jboss.netty.channel.Channels;
import org.jboss.netty.channel.ExceptionEvent;
import org.jboss.netty.channel.MessageEvent;
import org.jboss.netty.channel.SimpleChannelHandler;
import org.jboss.netty.channel.group.ChannelGroup;
import org.jboss.netty.channel.group.DefaultChannelGroup;
import org.jboss.netty.channel.socket.nio.NioServerSocketChannelFactory;

public class ServerChannelHandler extends SimpleChannelHandler {

private static final Logger logger = Logger.getLogger(ServerChannelHandler.class.getName());

private static ChannelGroup channels;
private static ServerBootstrap bootstrap;

public ServerChannelHandler() {
}

/**
 * Initialize the Server Channel Handler
 */
public static void init() {
    // create a channels group to add incoming channels to
    channels = new DefaultChannelGroup();

    // create the server bootstrap (fancy word for pre-made server setup)
    bootstrap = new ServerBootstrap(new NioServerSocketChannelFactory(
            Executors.newCachedThreadPool(), Executors.newCachedThreadPool()));

    // set the server pipeline factory
    bootstrap.setPipelineFactory(new ServerPipelineFactory());

    // server settings
    bootstrap.setOption("keepAlive", true);

    // bind the server to the port
    bootstrap.bind(new InetSocketAddress(Settings.PORT_ID));
}

@Override
public void channelBound(ChannelHandlerContext ctx, ChannelStateEvent e) {
    System.out.println("Bound: " + e.getChannel());
}

@Override
public void channelConnected(ChannelHandlerContext ctx, ChannelStateEvent e) {
    System.out.println("Connected: " + e.getChannel());
    channels.add(e.getChannel());
    e.getChannel().write("Welcome to the test server!\n\r");
}

@Override
public void channelClosed(ChannelHandlerContext ctx, ChannelStateEvent e) {
    System.out.println("Closed: " + e.getChannel());
}

@Override
public void channelDisconnected(ChannelHandlerContext ctx, ChannelStateEvent e) {
    System.out.println("Disconnected: " + e.getChannel());
}

@Override
public void channelOpen(ChannelHandlerContext ctx, ChannelStateEvent e) {
    System.out.println("Open: " + e.getChannel());
}

@Override
public void exceptionCaught(ChannelHandlerContext ctx, ExceptionEvent e) {
    System.out.println("Error: " + e.getCause());
}

@Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {
    System.out.println("Message: " + e.getMessage());
    for (Channel c : channels) {
        if (e.getMessage().equals("shutdown")) {
            shutdown();
        }
        if (c != e.getChannel()) {
            c.write("[" + e.getChannel().getRemoteAddress() + "] " + e.getMessage() + "\n\r");
        } else {
            c.write("[You] " + e.getMessage() + "\n\r");
        }
    }
}

/**
 * Shuts down the server safely
 */
public static final void shutdown() {
    channels.close();
    bootstrap.releaseExternalResources();
    System.exit(0);
}
} 
```

服务器管道工厂：

```
package simple.server;

import org.jboss.netty.channel.ChannelPipeline;
import org.jboss.netty.channel.ChannelPipelineFactory;
import org.jboss.netty.channel.Channels;
import org.jboss.netty.handler.codec.frame.DelimiterBasedFrameDecoder;
import org.jboss.netty.handler.codec.frame.Delimiters;
import org.jboss.netty.handler.codec.string.StringDecoder;
import org.jboss.netty.handler.codec.string.StringEncoder;

import simple.server.decoder.Decoder;
import simple.server.encoder.Encoder;

public class ServerPipelineFactory implements ChannelPipelineFactory {
@Override
public ChannelPipeline getPipeline() throws Exception {
    ChannelPipeline pipeline = Channels.pipeline();

    pipeline.addLast("framer", new DelimiterBasedFrameDecoder(8192, Delimiters.lineDelimiter()));
    pipeline.addLast("decoder", new StringDecoder());
    pipeline.addLast("encoder", new StringEncoder());
    pipeline.addLast("handler", new ServerChannelHandler());

    return pipeline;
}
} 
```

再次感谢大家在理解这一点上给我的任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T06:27:49.293

你忘了追加`\r\n`到`"test"`. 应该是：`channel.write("test\r\n")`.`

正如您从管道中看到的，解码部分由两个处理程序组成。第一个将接收到的数据拆分并合并为一行字符串，并剥离从它结束的行。第二个将单行字符串转换为`java.lang.String`.

在编码方面，只有一个处理程序将 a 转换`java.lang.String`为`ByteBuf`，这就是它所做的一切。也许最好引入一个名为`LineEncoder`,的处理程序`LineDecoder`，`LineCodec`它可以完成通常预期的工作：[https ://github.com/netty/netty/issues/1811](https://github.com/netty/netty/issues/1811)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-31T01:00:51.210

做新的字符串（“测试”）。那会更通用。回答您帖子的后半部分 - 在对象中创建一个包含所有信息（如登录、玩家移动等）的类对象并传递它。确保你的类实现了 Serializable。将它作为字符串传递是一种不好的方法，因为我认为它会变成硬编码的。客户端代码将如下所示：

```
ChannelPipeline p = ch.pipeline();
                        p.addLast(
                                new ObjectEncoder(),                            
                                new ObjectDecoder(ClassResolvers.cacheDisabled(getClass().getClassLoader())),
                                 new ClientHandler());              
                     }                  
                 });

                // Start the connection attempt.
            ChannelFuture f=  b.connect(host, port);
            channel=f.awaitUninterruptibly().channel();
            TestObj obj= new TestObj();
            channel.writeAndFlush(obj); 
```

服务器代码将如下所示：

```
 ChannelPipeline p = ch.pipeline();

                p.addLast(
                       new ObjectEncoder(),                         
                       new ObjectDecoder(ClassResolvers.cacheDisabled(getClass().getClassLoader())),
                        new DiscardServerHandler());
            } 
```

服务器处理程序将是：

```
@Override
public void channelRead(ChannelHandlerContext ctx, Object msg) {
    System.out.println("channelRead"+((TestObj)msg).getCurrency());
} 
```

# php - 插入不工作

> ID：13923033
> 
> 赞同：2
> 
> 时间：2012-12-17T22:06:58.293
> 
> 标签：php, sql

我的代码有一个烦人的问题，即拒绝插入 MySQL 表。谁能告诉我我做错了什么？

这是SQL代码..

```
<?php
if (isset($_POST['submitpraes'])) 
{
    $praesTitel = $row['kontypeBeskriv'];           
    $praesStr = $_POST['praesidag'];
    $konID = $row['konID']; 

    $sql=("INSERT INTO  `mah1233411190550`.`praestationer` (
        `praesID` ,
        `praesTitel` ,
        `praesStr` ,
        `brugerID` ,
        `holdID`,
        `konID` 
        )
        VALUES (NULL ,  '$praesTitel',  '$praesStr',  '$brugerID', '$holdID', '$konID');");
    mysql_query($sql);
    echo $sql;
}
?> 
```

和PHP代码...

```
<?php
$virksomhedsID = $_SESSION['virkID'];
$sql = "SELECT * 
        FROM konkurrence 
        INNER JOIN konkurrenceType ON konkurrenceType.kontypeID = konkurrence.kontypeID 
        WHERE konkurrence.virkID = '$virksomhedsID' 
        AND (CURDATE() BETWEEN `konStart` AND `konSlut`)";  

$result = mysql_query($sql);                
$row = mysql_fetch_assoc($result);  

echo '<td width="12%" height="45">';
echo 'konID' . $row['konID'];   
echo '<img src="' . $row['kontypeFilename'] . '" width="38px" alt="' . $row['kontypeBeskriv'] . '"/>';
echo '</td>';           
echo '<td width="25%">Jeg har i dag ' .  $row['kontypeBeskriv'] . 't</td>';
echo '<td>';

echo '<input class="textboxReport" type="text" name="praesidag" size="3"/>&nbsp;km &nbsp;&nbsp;';
echo '<input type="submit" name="submitpraes" id="submitpraes" value="GEM" />';
echo '</td>';
?> 
```

sql看起来像这样：

```
INSERT INTO `mah1233411190550`.`praestationer` ( `praesID` , `praesTitel` , `praesStr` , `brugerID` , `holdID`, `konID` ) VALUES (NULL , '', '2', '39', '23', ''); 
```

并表明以下内容不起作用，但我不明白为什么......

```
$praesTitel = $row['kontypeBeskriv'];           
$konID = $row['konID']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:04:00.953

表格需要这样设置。里面有你需要的值：

```
echo '<form method="post" action="">';
echo'<input type="hidden" name="" value="' . $row['konID'] . '">'; 
echo '<input type="hidden" name="" value="' . and $row['kontypeBeskriv'] . '">';        
echo '<input class="textboxReport" type="text" name="praesidag" size="3"/>';
echo '<input type="submit" name="submitpraes" id="submitpraes" value="GEM" />';
echp '</form>'; 
```

将行动点指向您需要发布表单的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:34:14.127

您从此处的 POST 获取变量：

```
$praesTitel = $row['kontypeBeskriv'];           
$praesStr   = $_POST['praesidag'];
$konID      = $row['konID']; 
```

`$_POST`你应该从而不是得到你的价值观`$row`。

```
$praesTitel = $_POST['kontypeBeskriv'];           
$praesStr   = $_POST['praesidag'];
$konID      = $_POST['konID']; 
```

因为在您的第一个 php 代码中没有要获取的行。

# file - 检查目录树是否包含文件

> ID：13923039
> 
> 赞同：0
> 
> 时间：2012-12-17T22:07:23.303
> 
> 标签：file, emacs, directory, predicate, filetree

Emacs 中是否有一个功能可以检查给定的现有文件是否位于（根）目录“下”的某个位置，即根目录的树结构内的任何位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T04:01:01.840

检查[`find-name-dired`](http://www.gnu.org/software/emacs/manual/html_node/emacs/Dired-and-Find.html)或`find-dired`。

他们使用`using the find utility`.

# php - PHP：在html中包装所有匹配的字符

> ID：13923049
> 
> 赞同：0
> 
> 时间：2012-12-17T22:08:16.393
> 
> 标签：php, replace, str-replace

我想将所有斜杠“/”和括号“（”和“）”包装在同一个 html 中。使用 PHP 是否有一种重复性较低的方法？也许是一个正则表达式？现在我正在使用以下代码：

```
 $para = str_replace('/','<span class="lite">/</span>',$para);
    $para = str_replace('(','<span class="lite">(</span>',$para);
    $para = str_replace('(','<span class="lite">)</span>',$para); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:12:58.987

你可以使用：

```
$para = preg_replace('!([/\(\)])!','<span class="lite">$1</span>',$para); 
```

但我不确定正则表达式搜索和替换是否比三个简单的文本搜索和替换操作更有效。

# jquery - jQuery 和用户定义函数的范围问题

> ID：13923053
> 
> 赞同：0
> 
> 时间：2012-12-17T22:08:31.203
> 
> 标签：jquery, scope

我相信我在尝试调用用户定义的函数时遇到了范围问题。

我的用户定义函数在一个外部文件中，如下所示：

```
alert("1");//executes
(function(jQuery){
    alert("2");//executes
    jQuery.fn.slider = function(params) {
    alert("3"); //never hits because the function is never called.
    //code here
    };
})(jQuery); 
```

我尝试用以下方式调用它：

```
<script type="text/javascript">
// <![CDATA[
jQuery(document).ready(function(){
    alert("1-2");//This executes.
});     

jQuery(document).ready(function(){
    jQuery("#slider").slider({//Function doesn't exist error
        slideSize: 5,
    duration: 300,
    photos: []
    });
});    
// ]]></script> 
```

我把那个警报放在那里只是为了看看 jQuery 对象是否存在。我正在使用 noConflict 因为我在页面上也有原型代码。

从我在这个问题上读到的[https://stackoverflow.com/a/4083362](https://stackoverflow.com/a/4083362)我想我必须做类似的事情：

`window.slider = jQuery.fn.beerSlider;`

并通过以下方式访问它：

`slider("#slider").myPlugin();`

myPlugin 是我想要的任何名称？但我确信这是不正确的。

我的滑块的 html 是：

```
<div id="slider">
    <a href="#"><img src="../images/1.jpg" alt="" border="0" /></a> 
    <a href="#"><img src="../images/2.jpg"alt="" border="0" /></a> 
</div> 
```

谁能帮我解释为什么我有问题？

编辑：我首先包含 'jquery-1.8.3.min.js'，然后是`$.noConflict();`. 然后我使用原型框架包含外部文件。然后我包含我的用户定义函数并最终调用它。但是，我认为 jQuery 是在我调用我的函数时定义的，因为在我调用我的函数之前，我使用匿名 jQuery 函数来执行该行`alert("1-2");//this executes`

警报的顺序如下：(1, 2, 1-2)

我看到 jsfiddle 工作正常，我想看看我的代码有什么不同。这可能与我的页面上有原型框架代码的事实有关吗？我正在使用`$.noConflict()`并遵循这里所说的[http://docs.jquery.com/Core/jQuery.noConflict](http://docs.jquery.com/Core/jQuery.noConflict)

> 注意：此函数必须在包含 jQuery javascript 文件之后，但在包含任何其他冲突库之前，以及在实际使用其他冲突库之前调用，以防最后包含 jQuery。可以在 jQuery.js 文件的末尾调用 noConflict 来全局禁用 $() jQuery 别名。jQuery.noConflict 返回一个对 jQuery 的引用，因此它可以用来覆盖 jQuery 对象的 $() 别名。

编辑2：好的，所以现在我找到了另一个关于使用的页面`jQuery.noConflict()`，它告诉我关于订单的一些不同之处。 [http://docs.jquery.com/Using_jQuery_with_Other_Libraries](http://docs.jquery.com/Using_jQuery_with_Other_Libraries)。看起来我发现的第一页可能可供某些人编辑，所以我假设第一页不正确。但是在第二页之后我的设置似乎仍然不起作用。

这是我网站的链接：[http](http://tinyurl.com/d8ewd9a) ://tinyurl.com/d8ewd9a 有问题的页面部分就在工作滑块的下方。使用 Jasper Group、ARD、ALLsteel 等的图像。在我的问题中，我稍微改变了一些我真正使用的 id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:24:29.810

我发现了问题所在。页面上似乎有第二个 jQuery 包含。因此，在我向其添加函数后，它重新定义了 jQuery。这就是为什么当我尝试调用它时它是未定义的。

我现在永远不会忘记的东西。

谢谢大家的帮助。

# c++ - 修剪小数位数

> ID：13923055
> 
> 赞同：1
> 
> 时间：2012-12-17T22:08:40.377
> 
> 标签：c++, trim, digits, rational-numbers

> **可能重复：**
> [在 C++ 中截断十进制值](https://stackoverflow.com/questions/304011/truncate-a-decimal-value-in-c)

如何截断有理数的一些小数位，使其只有 6 位？（例如`1.2345678909876`对`1.23456`）

# c# - 使用希伯来语编码连接到 mySql 的 C# 引发异常

> ID：13923057
> 
> 赞同：0
> 
> 时间：2012-12-17T22:08:48.140
> 
> 标签：c#, mysql

我正在尝试连接到 mySql DB。这个数据库应该支持希伯来语。在我的连接字符串中，我添加了关键字：charSet = UTF8。尝试打开连接时出现以下异常：不支持关键字：'charset'。异常发生在这一行：`[ myDataCon = new DataContext(GetConnectionString());]`

我的代码：

```
[ 
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using MySql.Data.MySqlClient;
using System.Data.Linq;
using System.Collections;

namespace ConstructionProjectBackgroundService
{
    class DBHandler
    {
        static DBHandler dbHandler;
        DataContext myDataCon;
        public MySqlConnection DataConnection { get; set; }
        public DataContext Dc
        {
            get { return myDataCon; }
        }

        private string GetConnectionString()
        {

            string connString = "User = root; Server = localhost; Database = construction_project; charset = UTF8;";        //connString for MySQLPHPAdmin
            return connString;
        }

        private DBHandler()
        {
            DataConnection = new MySqlConnection(GetConnectionString());
            myDataCon = new DataContext(GetConnectionString());
        }

        public static DBHandler GetInstance()
        {
            if (dbHandler == null)
            {
                dbHandler = new DBHandler();
            }
            return dbHandler;
        }

        public ArrayList execQuery(string query)
        {

            MySqlCommand command = DBHandler.GetInstance().DataConnection.CreateCommand();

            try
            {
                DBHandler.GetInstance().DataConnection.Open();
            }
            catch (Exception exception)
            {
                Console.WriteLine(exception.Message);
            }

            command.CommandText = query;
            MySqlDataReader reader = command.ExecuteReader();

            ArrayList Filters = new ArrayList();

            while (reader.Read())
            {
                string[] temp = new string[reader.FieldCount + 1];
                for (int i = 0; i < reader.FieldCount; i++)
                {
                    temp[i] = reader[i].ToString();
                }
                Filters.Add(temp);
            }
            DBHandler.GetInstance().DataConnection.Close();

            return Filters;
        }
    }
}
] 
```

谢谢！！

# jquery - 谷歌地图不会居中

> ID：13923058
> 
> 赞同：2
> 
> 时间：2012-12-17T22:08:52.180
> 
> 标签：jquery, google-maps, google-maps-api-3, google-maps-markers, centering

我正在使用 Twitter Bootstrap 并在模式中实现了谷歌地图，它动态地显示了生产者的位置。一切正常，除了标记不会居中。相反，它始终位于左上角（仅在滚动时可见）。

我在这里尝试了很多东西，但无法让它发挥作用。有人可以帮我吗？

**html:**

```
 <div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
      <h3 id="myModalLabel">Test</h3>
    </div>
    <div id="modal-left" class="modal-body left">
    </div>
    <div class="modal-body right">
      <div id="map"></div>
    </div>
  </div>
</div>
<div class="row span12">
  <div id="allProducers"></div>
</div> 
```

**相关的CSS：**

```
#map {
  height: 300px;
  width: 300px;
}

.hide {
  display: none;
} 
```

**js：**

```
function largeMap(latitude, longitude){
    var Latlng = new google.maps.LatLng(latitude, longitude);

    var Options = {
        zoom: 10,
        center: Latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };

    var Map = new google.maps.Map(document.getElementById("map"), Options);

    var Marker = new google.maps.Marker({
        position: Latlng,
        map:Map,
        title:"The Map"
    });

    Marker.setMap(Map);
}

$('.modal-btn').click(function(){

    var producerId = $(this).attr('id');

    GetProducer(producerId, function(data) {
        var titel = data.name;

        $('#myModalLabel').html(titel);

        $('#myModal').on('shown', function () {
          google.maps.event.trigger(map, 'resize');
          map.setCenter(new google.maps.LatLng(data.longitude, data.latitude));
        })
    });
}); 
```

*注意：我很想创建一个 jsFiddle，但因为我使用的是模式（包含在 Twitter Bootstrap 中），这可能是问题的一部分，它不起作用。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T22:36:20.667

基本上你需要访问`Map`对象（强烈建议只重用你的`LatLng`对象），你可以这样做：

```
var Map; 
var Markerlatlng

function largeMap(latitude, longitude){
  Markerlatlng= new google.maps.LatLng(latitude, longitude);

  var Options = {
    zoom: 10,
    center: Markerlatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  };

  Map = new google.maps.Map(document.getElementById("map"), Options);

  var Marker = new google.maps.Marker({
    position: Markerlatlng,
    map:Map,
    title:"The Map"
  });

  Marker.setMap(Map);
}

$('.modal-btn').click(function(){

  var producerId = $(this).attr('id');

  GetProducer(producerId, function(data) {
    var titel = data.name;

    $('#myModalLabel').html(titel);

    $('#myModal').on('shown', function () {
      google.maps.event.trigger(Map, 'resize');
      Map.setCenter(Markerlatlng);
    })
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:26:18.853

我认为你混合了这些情况：

```
 var Map = new google.maps.Map(document.getElementById("map"), Options); 
```

和

```
 map.setCenter(new google.maps.LatLng(data.longitude, data.latitude)); 
```

试试这个

```
 map = new google.maps.Map(document.getElementById("map"), Options); 
```

你的萤火虫/铬控制台没有任何问题吗？

# cordova - 来自PhoneGap / Cordova的联系人api设备上的JSON错误，但适用于Ripple

> ID：13923062
> 
> 赞同：0
> 
> 时间：2012-12-17T22:09:02.777
> 
> 标签：cordova

我有以下代码：

```
<html>
<head>
    <title>Contact test</title>
    <script type="text/javascript" src="cordova-2.2.0.js"></script>
    <script type="text/javascript" src="app/lib/jquery.min.js"></script>
</head>
<body>
    <script type="text/javascript" charset="utf-8">

        alert('Add Listener');
        document.addEventListener("deviceready", onDeviceReady, false);

        function onDeviceReady() {
            alert('Device is ready');
            navigator.contacts.find("*", function(contacts) {
                for (var i = 0; i < contacts.length; i++) {
                    $('body').append('<div>' + contacts[i].displayName + '</div>');
                }
            }, function(error) {
                alert('Contacts.find failed: ' + error);
            });
        }
    </script>

</body>
</html> 
```

我的 PhoneGap 设置为 2.2.0 版本。该代码位于一个 zip 文件中，其中仅包含：

index.html app/lib/jquery.min.js

没有cordova-2.2.0.js，没有config.xml。

当我在 Ripple 中进行测试时，它会按预期给我一个联系人列表。

当我在我的手机（三星 Galaxy Nexus，运行 Jelly Bean）上部署应用程序时，它会给我一个警报窗口，上面写着“Contacts.find failed: JSON error”。

看起来方法“navigator.contacts.find”失败了。

起初我认为这是一个权限问题，但当我安装该应用程序时，我能够看到该应用程序要求“您的个人信息”，其中包含从手机读取联系人。

我想知道出了什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-08T05:55:49.203

我也有这个问题。我找到了解决它的方法。

请将 'option' 参数添加到 navigator.contacts.find 方法。

[http://docs.phonegap.com/en/2.3.0/cordova_contacts_contacts.md.html#contacts.find](http://docs.phonegap.com/en/2.3.0/cordova_contacts_contacts.md.html#contacts.find)

添加参数后，它可以工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T23:04:12.923

我发现了这个问题。有两个问题。

第一个问题是：

```
navigator.contacts.find("*", function(contacts) { ... 
```

它应该是：

```
navigator.contacts.find(["*"], function(contacts) { ... 
```

第二个问题是使用cordova 2.2.0。出于某种原因，使用cordova 2.1.0 有效。也许这是在 PhoneGap 构建中的设置中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T00:51:42.200

如果你没有创建 config.xml 文件，当你将它安装在你的真实手机上时它不会工作:)

如果您想使用 phonegap 中的电话特定功能，您需要授予对它们的访问权限。

创建一个 config.xml 文件并添加以下行：

```
<feature name="http://api.phonegap.com/1.0/contacts"/>

Here is an example of the config file. Also read: 
```

[https://build.phonegap.com/docs/config-xml](https://build.phonegap.com/docs/config-xml)

```
<?xml version="1.0" encoding="UTF-8" ?>
<widget xmlns = "http://www.w3.org/ns/widgets"
    xmlns:gap = "http://phonegap.com/ns/1.0"
    id        = "com.phonegap.example"
    versionCode="10" 
    version   = "1.0.0">

<name>PhoneGap Example</name>

<description>
    An example for phonegap build docs. 
</description>

<author href="https://build.phonegap.com" email="support@phonegap.com">
    Hardeep Shoker 
</author>

<feature name="http://api.phonegap.com/1.0/contacts"/>

</widget> 
```

您不需要在物理上在硬盘上拥有 cordova-2.2.0.js 文件。只要你用这样的标签引用它：

```
<script type="text/javascript" src="cordova-2.2.0.js"></script> 
```

在这方面一切都很好。

# java - 如何将 UTC 格式的字符串转换为特定时区的日历？

> ID：13923065
> 
> 赞同：4
> 
> 时间：2012-12-17T22:09:20.123
> 
> 标签：java, date, timezone, utc, gmt

我正在尝试将一些 UTC 时间的字符串转换为应该设置为 GMT-5 的 java Calendar 对象。

我当前的 UTC 字符串输入是这样的：

> UTC 日期：20050329174411

我使用此代码（我检测到“模式”，如下所示）：

```
DateFormat dateFormat = new SimpleDateFormat(pattern);
Date date = dateFormat.parse(utcDate);
calendar = Calendar.getInstance(TimeZone.getTimeZone("GMT-5"));
calendar.setTime(date); 
```

然后我像这样打印时间：

> 日历.getTime()

我得到了这个结果：

> GMT 日期：2005 年 3 月 29 日星期二 17:44:11 EST

我需要支持这些日期/时间字符串模式：

```
FORMAT_UTC4 = "yyyy";           
FORMAT_UTC6 = "yyyyMM";         
FORMAT_UTC8 = "yyyyMMdd";       
FORMAT_UTC10 = "yyyyMMddHH";    
FORMAT_UTC12 = "yyyyMMddHHmm";  
FORMAT_UTC14 = "yyyyMMddHHmmss"; 
```

我希望时间设置为“12:44:11”。我已经阅读了几个示例，发现日期时间处理非常混乱。对我来说，它总是一样的，我得到某种格式的 UTC 字符串，然后将其转换为 GMT-5。我真的觉得这应该很容易！

参考 1：[如何在 Java 中以 UTC 或 GMT 形式获取当前日期和时间？](https://stackoverflow.com/questions/308683/how-can-i-get-the-current-date-and-time-in-utc-or-gmt-in-java)

参考 2：[如何使用 Java 处理日历时区？](https://stackoverflow.com/questions/230126/how-to-handle-calendar-timezones-using-java)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T22:17:14.423

在解析日期之前，您必须将 SimpleDateFormat 的时区设置为 UTC。否则，它使用您的默认时区。

要在“GMT-5”时区显示日期，您应该使用另一个 DateFormat，时区设置为 GMT-5，并使用此 DateFormat 格式化日期。Date 方法使用您的`toString()`默认时区将日期转换为可读的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-16T15:39:41.010

# *java.time*

请注意，小时`GMT-5`或时区偏移量`-05:00`是固定偏移量，即独立于[DST](https://en.wikipedia.org/wiki/Daylight_saving_time)和类型，以表示具有时区偏移量的日期时间[`OffsetDateTime`](https://docs.oracle.com/javase/8/docs/api/java/time/OffsetDateTime.html)。

**演示：**

```
import java.time.Instant;
import java.time.OffsetDateTime;
import java.time.ZoneOffset;

public class Main {
    public static void main(String[] args) {
        Instant instant = Instant.ofEpochMilli(20050329174411L);
        OffsetDateTime odt = instant.atOffset(ZoneOffset.of("-05:00"));
        // Alternatively
        // OffsetDateTime.ofInstant(instant, ZoneOffset.of("-05:00"));
        System.out.println(odt);
    }
} 
```

**输出：**

```
2605-05-15T18:52:54.411-05:00 
```

如果您正在寻找根据 DST 自动调整时区偏移量，请使用[`ZonedDateTime`](https://docs.oracle.com/javase/8/docs/api/java/time/ZonedDateTime.html).

**演示：**

```
import java.time.Instant;
import java.time.ZoneId;
import java.time.ZonedDateTime;

public class Main {
    public static void main(String[] args) {
        Instant instant = Instant.ofEpochMilli(20050329174411L);
        ZonedDateTime zdt = instant.atZone(ZoneId.of("America/Chicago"));
        // Alternatively
        // ZonedDateTime.ofInstant(instant, ZoneId.of("America/Chicago"));
        System.out.println(zdt);
    }
} 
```

**输出：**

```
2605-05-15T18:52:54.411-05:00[America/Chicago] 
```

从**[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解更多关于`java.time`现代[日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-date-time.html) ^*的信息。

如果你需要一个`java.util.Calendar`来自这个对象的对象`ZonedDateTime`，你可以这样做：

```
Calendar calendar = Calendar.getInstance();
calendar.setTime(Date.from(zdt.toInstant())); 
```

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)

# php - jquery .post 使用 swiftmailer 发送电子邮件

> ID：13923067
> 
> 赞同：0
> 
> 时间：2012-12-17T22:09:27.210
> 
> 标签：php, jquery, post, email-attachments, swiftmailer

我正在尝试使用 swiftmailer（用于附件）发送电子邮件，并且我过去一直在使用以下 jquery 邮政编码：

```
$.post("contact.php", $("#contact").serialize()); 
```

这个使用工作正常，但现在由于某种原因它在切换到 swiftmailer 时停止工作..如果我有一个带有 action="contact.php" 的页面，那么它可以工作，但使用 jquery post 功能似乎没有..

这是完整的jquery代码：

```
$(document).ready(function(){
$("#contact").submit(function(event) {
    var $form = $( this );
    var nombre = $form.find( 'input[name="name"]' ).val();
    var apellido = $form.find( 'input[name="apellido"]' ).val();
    var phone = $form.find( 'input[name="telefono"]' ).val();
    var email = $form.find( 'input[name="email"]' ).val();
    var jobtitle = $form.find( 'input[name="jobtitle"]' ).text();
    //var filesize = $form.find('input[name="file"]').files[0].size;
    if(nombre == "")
    {   
        $("#result").empty().append("Please fill in required fields.");
        $("#result").css('color','Red');                
        $('#name').focus();
        return false;
    }
    if(apellido == "")
    {   
        $("#result").empty().append("Please fill in required fields.");
        $("#result").css('color','Red');                
        $('#apellido').focus();
        return false;
    }
    if(email == "")
    {   
        $("#result").empty().append("Please fill in required fields.");
        $("#result").css('color','Red');                
        $('#email').focus();
        return false;
    }
    else
    {
        if( !isValidEmailAddress(email) ) { 
        $("#result").empty().append("invalid email.");
        $("#result").css('color','Red');                
        $('#email').focus();
        return false;
        }
    }
    if(phone == "")
    {   
        $("#result").empty().append("Please fill in required fields.");
        $("#result").css('color','Red');                
        $('#phone').focus();
        return false;
    }
    //if(filesize <= 0)
    //{
    //  $("#result").empty().append("Please attach your resume.");
       //   $("#result").css('color','Red');                
      //    $('#file').focus();
     // return false;
    //}
    /* stop form from submitting normally */
   //event.preventDefault(); 
   $.post("contact.php", $("#contact").serialize());
   $("#contact").attr('style', 'display:none');
   $("#result").empty()
   $("#success").empty().append("<h2>Thank you, we will review your information and contact you as soon as possible.</h2>");
   $("#success").css('color','#000');
   $("#success").attr('style', 'display:block');
   return false;
});

}); 
```

我的 php 文件“contact.php”有这个：

```
require_once 'lib/swift_required.php';

$transport = Swift_MailTransport::newInstance();

// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

$nombre = $_POST['name'];
$apellido = $_POST['apellido'];
$email = $_POST['email'];
$telefono = $_POST['telefono'];
$title = $_POST['jobtitle'];

// Create the message
$message = Swift_Message::newInstance()

// Give the message a subject
->setSubject('Nuevo applicante para: ' . $title)

// Set the From address with an associative array
->setFrom(array('no-reply@email.com' => 'no-reply'))

// Set the To addresses with an associative array
->setTo('destination@email.com')

// Give it a body
->setBody('<html>
    <head></head>
    <body>
    <table>
    <tr>
    <td>Nombre:</td><td>' . $nombre . ' ' . $apellido .'</td>
    </tr>
    <tr>
    <td>Email:</td><td>' . $email . '</td>
    </tr>
    <tr>
    <td>Telefono:</td><td>'. $telefono .'</td>
    </tr>
    </table>
</body>
</html>', 'text/html')

 // Optionally add any attachments
 ->attach(Swift_Attachment::fromPath($_FILES["file"]["tmp_name"])
 ->setFilename($_FILES['file']['name']));

// Send the message
$result = $mailer->send($message);

?> 
```

以下是测试链接：

使用 jquery 帖子：[here](http://inblu.pe/topitop/opportunities/publicacion-de-prueba/)（单击“应用”，应该会出现一个弹出窗口）

只是 php:[这里](http://inblu.pe/topitop/opportunities/test.php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:59:13.010

停止使用[MailTransport](http://swiftmailer.org/docs/sending.html#the-mail-transport)。MailTransport 只是`mail()`在幕后调用。

`mail()`众所周知，它不可靠，因为大多数托管服务提供商都不会费心合理地配置他们的服务器。

请改用[SendmailTransport](http://swiftmailer.org/docs/sending.html#the-sendmail-transport)或[SmtpTransport](http://swiftmailer.org/docs/sending.html#the-smtp-transport)。您的主机肯定有 SMTP 服务器或 Sendmail 安装。查看他们的文档，他们应该将 sendmail 路径和有关 SMTP 的信息放在手边。

# scala - 确定 S3 文件最后修改的时间戳

> ID：13923068
> 
> 赞同：1
> 
> 时间：2012-12-17T22:09:29.283
> 
> 标签：scala, playframework, amazon-s3

我有一个`Scala Play 2`应用程序并[`AWS S3 API`](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/index.html)用于读取 S3 文件。我需要确定文件的最后修改时间戳是什么时候，最好的方法是什么？它是使用`getObjectMetadata`还是使用`listObjects`或？如果可能的话，我想在一次调用中确定多个文件的时间戳。是否有其他开源库建立在`AWS S3 APIs`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:38:54.260

AWS Java SDK 中 S3 对象的一种表示形式是`S3ObjectSummary`，它有方法`getLastModified`。它返回修改后的时间戳。

理想情况下，只需使用[listObjects](http://docs.amazonwebservices.com/AWSJavaSDK/latest/javadoc/com/amazonaws/services/s3/AmazonS3.html#listObjects%28com.amazonaws.services.s3.model.ListObjectsRequest%29)列出所有文件，然后调用`getObjectSummaries`返回的对象。

# javascript - Javascript画布笔划不透明度不适用于每个线条，而是连续线条

> ID：13923069
> 
> 赞同：3
> 
> 时间：2012-12-17T22:09:37.143
> 
> 标签：javascript, canvas

看来我对javascript canvas strokestyle/line drawing的理解还达不到标准。我想绘制具有一点透明度的线条，但我未能将透明度应用于每条线（段），而是将其作为渐变应用于我绘制的所有线条......

示例代码：

```
var c = document.getElementsByTagName('canvas')[0];
var a = c.getContext('2d');

WIDTH = 400;
HEIGHT = 400;
c.width = WIDTH;
c.height = HEIGHT;;

function applyGrid()
{
    a.fillStyle = "000000";
    a.lineWidth = 2;
    a.fillRect(0, 0, WIDTH, HEIGHT);

    a.strokeStyle = "rgba(0,200,200,0.1)";
   for (var x = 0; x <= WIDTH; x += 50)
   {
      a.moveTo(x, 0);
      a.lineTo(x, HEIGHT);
      a.stroke();
    }

}
applyGrid();​ 
```

在此处查看示例代码和（错误）结果：http: [//jsfiddle.net/zKWaT/3/](http://jsfiddle.net/zKWaT/3/)我希望所有垂直线都具有最右边线的透明度，但它们会逐渐消失。

我想我错过了有关 lineTo 和 stroke 工作原理的一些基本知识，但是在这里和那里查看示例后，我还没有发现一些有启发性的东西... tt。

感谢您的输入！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:15:14.463

在你的 for 循环中添加`a.beginPath()`以在每个循环上开始一个新行。否则，您只是一遍又一遍地延伸和抚摸同一条线。

```
var c = document.getElementsByTagName('canvas')[0];
var a = c.getContext('2d');

WIDTH = 400;
HEIGHT = 400;
c.width = WIDTH;
c.height = HEIGHT;;

function applyGrid()
{
    a.fillStyle = "000000";
    a.lineWidth = 2;
    a.fillRect(0, 0, WIDTH, HEIGHT);

    a.strokeStyle = "rgba(0,200,200,0.1)";
   for (var x = 0; x <= WIDTH; x += 50)
   {
      a.beginPath(); //ADD THIS
      a.moveTo(x, 0);
      a.lineTo(x, HEIGHT);
      a.stroke();
    }

}
applyGrid();​ 
```

# ios - 在 ios 的 master 中未选择任何内容时隐藏 detailView 的正确方法

> ID：13923071
> 
> 赞同：1
> 
> 时间：2012-12-17T22:09:38.453
> 
> 标签：ios, master-detail

我在这里搜索了一个解决方案，但没有找到关于这个主题的任何帖子。

当主表视图没有选择时，我希望我的详细视图仅显示“未选择对象”消息。这有点复杂，因为选择可能在几种不同的情况下丢失，例如当 tableView 进入编辑模式时，当单个单元格进入编辑模式时（滑动删除），或者当程序对表进行操作时（如在重新排序时）。

关于如何实现这一点的任何想法？这似乎是一种相当标准的行为，所以我觉得我错过了一些简单的东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:13:20.633

如果`tableView:willDeselectRowAtIndexPath:`不能捕获每个案例，您只需要捕获单个案例并在每个案例中调用一些相同的方法。

顺便说一句，我相信您了解显示“未选择对象”的详细信息视图本身就是一个完整的详细信息视图。

# perl - 缩短 FASTA 标头 Perl

> ID：13923072
> 
> 赞同：1
> 
> 时间：2012-12-17T22:09:38.563
> 
> 标签：perl, sed, bioinformatics

我需要从这种格式转换一个 FASTA 标头：

> gi|351517969|参考|NW_003613580.1| Cricetulus griseus 未放置的基因组支架，CriGri_1.0 scaffold329，全基因组鸟枪序列

对此：

> NW_003613580.1 Cricetulus griseus 未放置的基因组支架，CriGri_1.0 scaffold329，全基因组鸟枪法序列

NW 中的 W 可以是其他地址中的 C，下划线后的位数不同。

我找到了一个 perl 脚本来将 ID 更改为不同的格式，并试图对其进行修改。相关部分：

```
 while( $seq = $seq_in->next_seq() ) 
{
    my $seqName = $seq->id;
    $seqName =~ s/\|/\./g; #replace pipe with dot

        $seqName =~ s/(NW\_)/$1/;   

        #$seqName =~ s/(gi\.\w*)\..*/$1/; 

        $seq->id($seqName);
    $seq_out->write_seq($seq);
} 
```

注释掉的 seqname 位是原始的。我希望将 gi 更改为 NW 会使它在标题中稍后开始阅读，但没有骰子。但是，将 $1 更改为随机文本确实会在 NW 处替换它，所以我不太确定。此外，更换管道的时期似乎没有任何合乎逻辑的理由消失（尽管我确实希望它们消失）。任何帮助，或者至少一些关于搜索和替换如何在这里工作的资源将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:13:56.500

拆分组件：

```
my @fastaHeaderComponents = split("\\|", $seq->id); 
```

然后访问它们：

```
my $accessionId = $fastaHeaderComponents[3];
my $description = $fastaHeaderComponents[4]; 
```

并重建标题：

```
my $newFastaHeader = ">$accessionId $description";
$seq->id($newFastaHeader); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T22:14:19.370

单线`sed`：

```
sed -r 's/^([^|]+\|){3}//;s/\|//' file 
```

> NW_003613580.1 Cricetulus griseus 未放置的基因组支架，CriGri_1.0 scaffold329，全基因组鸟枪法序列

解决方案的`sed`好处是您可以指定在哪一行进行替换，例如仅使用第一行`1s`并使用`-i`选项将替换存储回文件：

```
sed -ri '1s/^([^|]+\|){3}//;1s/\|//' file 
```

正则说明：

```
s/     # Substitution, 1s/ first line only, 2s/ second line..
^      # Match the start of the line
(      # Group pattern
[^|]+  # Match one or more character that isn't a |
\|     # Match the | (escaped)
)      # End grouped pattern
{3}    # Repeat grouped pattern 3 times
/      # Replace with 
/      # Nothing
;
s/     # Substitute, 1s/ first line only..
\|     # The remaining |
/      # Replace with
/      # Nothing 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T02:08:28.477

也许以下内容会有所帮助：

```
use strict;
use warnings;
use Bio::SeqIO;

my $seq_in  = Bio::SeqIO->new( -file => 'input.fas',   '-format' => 'Fasta' );
my $seq_out = Bio::SeqIO->new( -file => '>output.fas', '-format' => 'Fasta' );

while ( my $seq = $seq_in->next_seq ) {
    my $shortened_seq = Bio::Seq->new(
        -desc       => $seq->desc,
        -display_id => ( split /\|/, $seq->id )[-1]
    );

    $seq_out->write_seq($shortened_seq);
} 
```

给定如下的 FASTA 标头作为输入：

```
>gi|351517969|ref|NW_003613580.1| Cricetulus griseus unplaced genomic scaffold, CriGri_1.0 scaffold329, whole genome shotgun sequence 
```

它产生以下输出：

```
>NW_003613580.1 Cricetulus griseus unplaced genomic scaffold, CriGri_1.0 scaffold329, whole genome shotgun sequence 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T22:17:07.773

This is just a matter of splitting the original header on pipe characters (surrounded by optional whitespace) and rejoing joining the required fields again

```
use strict;
use warnings;

my $header = 'gi|351517969|ref|NW_003613580.1| Cricetulus griseus unplaced genomic scaffold, CriGri_1.0 scaffold329, whole genome shotgun sequence';

$header = join ' ', (split /\s*\|\s*/, $header)[3,4];

print $header; 
```

**output**

```
NW_003613580.1 Cricetulus griseus unplaced genomic scaffold, CriGri_1.0 scaffold329, whole genome shotgun sequence 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T22:15:00.633

简短版本：将序列拆分为一个数组，使用`split`.

```
my @parts = split( /\|/, $seq ); 
```

然后使用数组的元素构建一个要显示的字符串。

```
print $parts[3], ' ', $parts[4], etc.... 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T01:04:53.990

这可能对您有用（GNU sed）：

```
sed -r 's/^([^|]*\|){3}(N[WC]_[0-9.]+)\|/\2/' file 
```

# python - tkinter 主目录

> ID：13923079
> 
> 赞同：2
> 
> 时间：2012-12-17T22:10:05.163
> 
> 标签：python, operating-system, tkinter, tk, home-directory

当调用

```
 tkFileDialog.askopenfile() 
```

tkinter中的方法，如何将默认目录设置为用户的主目录？有没有办法独立于操作系统来做到这一点，或者这是程序员必须处理的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T22:12:42.570

[`os.path.expanduser('~')`](http://docs.python.org/2/library/os.path.html#os.path.expanduser)应该在大多数操作系统（windows，unix）上为您扩展它......

换句话说：

```
home = os.path.expanduser('~')
f = tkFileDialog.askopenfile(initialdir = home) 
```

# java - 在 Applet 中使用 AWTEventListener 时访问被拒绝

> ID：13923082
> 
> 赞同：1
> 
> 时间：2012-12-17T22:10:08.047
> 
> 标签：java, swing, security, applet, awt

我在浏览器中嵌入了一个小程序。在小程序`init()`方法中，我有以下代码：

```
Toolkit.getDefaultToolkit().addAWTEventListener(new AWTEventListener() {
        public void eventDispatched(AWTEvent event) {
            if(event instanceof MouseEvent){
                MouseEvent evt = (MouseEvent)event;
                if(evt.getID() == MouseEvent.MOUSE_CLICKED){
                    System.out.println("Mouse Clicked");
                }
            }
        }
    }, AWTEvent.MOUSE_EVENT_MASK); 
```

加载小程序时出现错误：

```
access denied ("java.awt.AWTPermission" "listenToAllAWTEvents") 
```

## 政策

现在在我的策略文件（下面的路径）中，我在底部附加了：

### 允许

```
grant  {
    permission java.security.AllPermission;
}; 
```

### 小路

```
C:/Program Files/Java/jdk1.7.0_10/jre/lib/security/java.policy 
```

但我仍然遇到同样的访问被拒绝问题。

任何人都知道为什么即使我授予`java.policy`文件中的所有权限，我仍然会收到该错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T11:11:47.027

这是我编写/部署的可信代码的链接。它为 JVM 生成[`java.home`属性](http://pscode.org/prop/?prop=java.home&trusted=on&format=TSV)。

这里它指向：

```
C:\Program Files (x86)\Java\jre7 
```

`jdk`请注意，正如我现在在上面的路径中所指出的那样，该路径的任何部分都不包含。确保策略文件与小程序中标识的路径相同。

# wordpress - wordpress 自定义帖子类别（分类）下一个上一个链接

> ID：13923084
> 
> 赞同：0
> 
> 时间：2012-12-17T22:10:24.223
> 
> 标签：wordpress, custom-post-type, custom-taxonomy

我有自定义类别的自定义帖子。类别注册为“timeline_category”，自定义帖子注册为时间线。我有一个分类页面，其中列出了给定分类中的所有帖子。

我想知道是否可以在那些分类页面上创建下一个/上一个链接，该链接将链接到具有下一个自定义分类的页面（类似于 next_post_link() 但用于自定义类别）。

阿雷克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:24:03.270

尝试这个。我在购物车产品页面上使用了它，我认为它适用于一般情况。

```
global $wp_query;

echo paginate_links(array(
    'base' => str_replace(999999999, '%#%', get_pagenum_link(999999999) ),
    'format' => '?paged=%#%',
    'current' => max(1, get_query_var('paged')),
    'total' => $wp_query->max_num_pages,
)); 
```

# java - Java：表单布局参数说明

> ID：13923085
> 
> 赞同：0
> 
> 时间：2012-12-17T22:10:24.100
> 
> 标签：java, swing, layout, layout-manager, form-layout

我在我的一个课程中定义了以下挥杆布局，但我无法弄清楚发生了什么。

```
private void initComponents()
    {
        locationPanel = new JPanel();
        label1 = new JLabel();
        lastUpdateLabel = new JLabel();
        label2 = new JLabel();
        accuracyLabel = new JLabel();
        batteryPanel = new JPanel();
        batteryLabel = new JLabel();
        label3 = new JLabel();
        cc = new CellConstraints();

        setLayout(new FormLayout("default", "default"));

        locationPanel.setBorder(new TitledBorder("Info"));
        locationPanel.setLayout(new FormLayout("right:pref, 6dlu, 50dlu, 4dlu, default", "pref, 3dlu, pref, 3dlu, pref"));

        label1.setText("Last Update:");
        locationPanel.add(label1, cc.xy(1, 1));

        lastUpdateLabel.setText("Unknown");
        locationPanel.add(lastUpdateLabel, cc.xy(3, 1));

        label2.setText("Accuracy:");
        locationPanel.add(label2, cc.xy(1, 3));

        // ---- accuracyLabel ----
        accuracyLabel.setText("Unknown");
        locationPanel.add(accuracyLabel, cc.xy(3, 3));

        label3.setText("Battery Level");
        locationPanel.add(label3, cc.xy(1, 5));

        batteryLabel.setText("Unknown");
        locationPanel.add(batteryLabel, cc.xy(3, 5));

        add(locationPanel, cc.xy(1, 1));
    } 
```

**问题：我认为它说应该有 3 行和 2 列？定义了多少行和列；我将如何制作 4 x 2 布局？我如何确定这是在说什么** `locationPanel.setLayout(new FormLayout("right:pref, 6dlu, 50dlu, 4dlu, default", "pref, 3dlu, pref, 3dlu, pref"));`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:23:32.007

[http://www.java2s.com/Code/Java/Swing-Components/FormLayoutExplicitAlignmentExample3.htm](http://www.java2s.com/Code/Java/Swing-Components/FormLayoutExplicitAlignmentExample3.htm)

您的布局有 5 列和 3 行。您可以从示例中很好地推断出这一点。

# android - Android 地图 V2 崩溃

> ID：13923090
> 
> 赞同：2
> 
> 时间：2012-12-17T22:10:39.370
> 
> 标签：android, google-maps, google-maps-android-api-2

我今天的大项目是将我的应用程序迁移到新的 Google Maps API V2。但是，现在我遇到了一个错误，我似乎无法找到根本原因。

我的堆栈跟踪如下所示：

```
12-17 17:16:20.366: E/AndroidRuntime(3634): FATAL EXCEPTION: main
12-17 17:16:20.366: E/AndroidRuntime(3634): java.lang.RuntimeException: Unable to start        activity ComponentInfo{com.mobile.barwatch/com.mobile.barwatch.TestActivity}:     android.view.InflateException: Binary XML file line #2: Error inflating class fragment
12-17 17:16:20.366: E/AndroidRuntime(3634): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2088)
12-17 17:16:20.366: E/AndroidRuntime(3634): at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2113)
12-17 17:16:20.366: E/AndroidRuntime(3634): at android.app.ActivityThread.access$700(ActivityThread.java:139)
12-17 17:16:20.366: E/AndroidRuntime(3634): at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1224)
12-17 17:16:20.366: E/AndroidRuntime(3634): at android.os.Handler.dispatchMessage(Handler.java:99)
12-17 17:16:20.366: E/AndroidRuntime(3634): at android.os.Looper.loop(Looper.java:137)
12-17 17:16:20.366: E/AndroidRuntime(3634): at android.app.ActivityThread.main(ActivityThread.java:4918)
12-17 17:16:20.366: E/AndroidRuntime(3634): at java.lang.reflect.Method.invokeNative(Native Method)
12-17 17:16:20.366: E/AndroidRuntime(3634): at java.lang.reflect.Method.invoke(Method.java:511)
12-17 17:16:20.366: E/AndroidRuntime(3634): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:1004)
12-17 17:16:20.366: E/AndroidRuntime(3634): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:771)
12-17 17:16:20.366: E/AndroidRuntime(3634): at dalvik.system.NativeStart.main(Native Method)
12-17 17:16:20.366: E/AndroidRuntime(3634): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
12-17 17:16:20.366: E/AndroidRuntime(3634): at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
12-17 17:16:20.366: E/AndroidRuntime(3634): at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
12-17 17:16:20.366: E/AndroidRuntime(3634): at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-17 17:16:20.366: E/AndroidRuntime(3634): at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-17 17:16:20.366: E/AndroidRuntime(3634): at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:306)
12-17 17:16:20.366: E/AndroidRuntime(3634): at android.app.Activity.setContentView(Activity.java:1901)
12-17 17:16:20.366: E/AndroidRuntime(3634): at com.mobile.barwatch.TestActivity.onCreate(TestActivity.java:18)
12-17 17:16:20.366: E/AndroidRuntime(3634): at android.app.Activity.performCreate(Activity.java:5048)
12-17 17:16:20.366: E/AndroidRuntime(3634): at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1094)
12-17 17:16:20.366: E/AndroidRuntime(3634): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2052)
12-17 17:16:20.366: E/AndroidRuntime(3634):     ... 11 more
12-17 17:16:20.366: E/AndroidRuntime(3634): Caused by: java.lang.RuntimeException: API key not found.  Check that <meta-data android:name="com.google.android.maps.v2.API_KEY" android:value="your API key"/> is in the <application> element of AndroidManifest.xml
12-17 17:16:20.366: E/AndroidRuntime(3634):     at maps.y.z.a(Unknown Source)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at maps.y.z.a(Unknown Source)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at maps.y.z.a(Unknown Source)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at maps.y.ae.a(Unknown Source)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at maps.y.bu.a(Unknown Source)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at maps.y.p.onCreateView(Unknown  Source)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at com.google.android.gms.maps.internal.IMapFragmentDelegate$Stub.onTransact(IMapFragmentDelegate.java:107)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at android.os.Binder.transact(Binder.java:326)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at com.google.android.gms.maps.internal.IMapFragmentDelegate$a$a.onCreateView(Unknown Source)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at com.google.android.gms.maps.MapFragment$b.onCreateView(Unknown Source)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at com.google.android.gms.internal.d$4.a(Unknown Source)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at com.google.android.gms.internal.d.a(Unknown Source)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at com.google.android.gms.internal.d.onCreateView(Unknown Source)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at com.google.android.gms.maps.MapFragment.onCreateView(Unknown Source)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:807)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1013)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at android.app.FragmentManagerImpl.addFragment(FragmentManager.java:1112)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at android.app.Activity.onCreateView(Activity.java:4704)
12-17 17:16:20.366: E/AndroidRuntime(3634):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
12-17 17:16:20.366: E/AndroidRuntime(3634):     ... 20 more 
```

我的活动课程如下所示：

```
package com.mobile.barwatch;

import android.app.Activity;
import android.os.Bundle;
import com.google.android.gcm.GCMRegistrar;
import com.google.android.gms.common.*;
import com.mobile.barwatch.tasks.*;
import com.mobile.barwatch.models.Constants;

public class TestActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {           
        super.onCreate(savedInstanceState);
        setContentView(R.layout.map_screen);              
    }
} 
```

我的布局文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/mapview"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      class="com.google.android.gms.maps.MapFragment"/> 
```

我的清单的相关部分如下所示：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.mobile.barwatch"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="15" />
    <uses-feature
        android:glEsVersion="0x00020000"
    android:required="true"/>
    <permission android:name="com.mobile.barwatch.permission.MAPS_RECEIVE"
            android:protectionLevel="signature"/>
    <permission android:name="com.mobile.barwatch.permission.C2D_MESSAGE"
                android:protectionLevel="signature" />    
    <uses-permission android:name="com.mobile.barwatch.permission.MAPS_RECEIVE"/>
    <uses-permission android:name="com.mobile.barwatch.permission.C2D_MESSAGE" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission    android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />

    <application    
        android:allowBackup="true"    
        android:icon="@drawable/ic_launcher_barwatch"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
    ....
    <activity android:name="TestActivity" 
              android:label="@string/app_name">
    </activity>
    <meta-data android:name="com.google.android.maps.v2.xx"
               android:value="xx"/>       
    </application>       
</manifest> 
```

我真的把我的头撞在墙上，所以任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T22:50:20.763

好的，感谢 A--C 和 qzikl 的回复，我能够找出我的问题所在。填写清单时，我有：

```
 <meta-data android:name="com.google.android.maps.v2.xx"
            android:value="xx"/> 
```

其中 xx 是我的 api 密钥。实际上，它应该是：

```
 <meta-data android:name="com.google.android.maps.v2.API_KEY"
            android:value="xx"/> 
```

所以导致我所有错误的原因是我在 API_KEY 中填写了我的 api 密钥，而我应该只为值这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:12:44.203

您的 LogCat 显示另一个错误，例如：

> 12-17 17:16:20.366：E/AndroidRuntime(3634)：原因：android.view.InflateException：二进制 XML 文件第 2 行：膨胀类片段时出错

它是所有问题的线索。如您所见，其中包含的“类”表达错误，但此时我不知道解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:28:37.910

堆栈跟踪包括您的答案：

12-17 17:16:20.366：E/AndroidRuntime(3634)：原因：java.lang.RuntimeException：找不到 API 密钥。检查它是否在 AndroidManifest.xml 的元素中

您需要获取 API 密钥并将其包含在清单中。看起来你有一些东西在那里，但也许它被编辑掉了？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T09:33:08.280

尝试按照此获取新的 API 密钥[https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)

# python - 如何仅在对象上下文中执行 python 'eval'？

> ID：13923091
> 
> 赞同：12
> 
> 时间：2012-12-17T22:10:43.727
> 
> 标签：python, eval, abstract-syntax-tree

是否可以做类似的事情

```
c = MyObj()
c.eval("func1(42)+func2(24)") 
```

在 Python..ie 中有 func1() 和 func2() 在对象“c”的范围内进行评估（如果它们是该类定义中的成员函数）？我无法进行简单的解析，因为对于我的应用程序，eval 字符串可能会变得任意复杂。我想用 ast 模块做一些魔术可能会奏效，但由于关于 ast 的文献很脏，我不确定在哪里看：

```
import ast

class MyTransformer(ast.NodeTransformer):
    def visit_Name(self, node):
        # do a generic_visit so that child nodes are processed
        ast.NodeVisitor.generic_visit(self, node)
        return ast.copy_location(
            # do something magical with names that are functions, so that they become 
            # method calls to a Formula object
            newnode,
            node
        )

class Formula(object):

    def LEFT(self, s, n):
        return s[:n]

    def RIGHT(self, s, n):
        return s[0-n:]

    def CONCAT(self, *args, **kwargs):
        return ''.join([arg for arg in args])

def main():

    evalString = "CONCAT(LEFT('Hello', 2), RIGHT('World', 3))"

    # we want to emulate something like Formula().eval(evalString)
    node = ast.parse(evalString, mode='eval')
    MyTransformer().visit(node)

    ast.fix_missing_locations(node)
    print eval(compile(node, '<string>', mode='eval')) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T22:39:36.190

你几乎肯定不想这样做，但你*可以*。

的上下文[`eval`](http://docs.python.org/library/functions.html#eval)是您要在其中评估代码的全局和局部字典。最常见的情况可能是`eval(expr, globals(), mycontext)`和`eval(expr, mycontext)`，它们分别替换了默认的局部和全局上下文，而另一个则不用管。用对象的字典替换本地上下文类似于运行该对象的“内部”（一种方法）——尽管请记住，如果您不这样做，“作为成员函数”并没有您预期的那么好必须`self`调用其他成员函数…</p>

无论如何，这是一个简单的例子：

```
>>> class Foo(object):
...     def __init__(self):
...         self.bar = 3
>>> foo = Foo()
>>> eval('bar', globals(), foo.__dict__)
3 
```

请记住，这`__dict__`可能不是您想要的。例如：

```
>>> class Foo(object):
...     @staticmethod
...     def bar():
...         return 3
>>> foo = Foo()
>>> eval('bar()', globals(), foo.__dict__)
NameError: name 'bar' is not defined
>>> eval('bar()', globals(), {k: getattr(foo, k) for k in dir(foo)}
3 
```

为了使这项工作以您想要的方式工作，您必须确切地知道如何定义您想要的，用 Python 术语 - 这需要了解对象如何在幕后工作（MRO，也许是描述符等）。

如果您确实需要`eval`，并且确实需要提供任意上下文，那么您最好明确地构建这些上下文（作为字典），而不是试图强制对象进入该角色：

```
>>> foo = {
...     'bar': lambda: 3
... }
>>> eval('bar()', globals(), foo) 
```

无论如何，这种用法更接近于您尝试在 Python 中模拟的 Javascript 样式。

当然，与 JS 不同，Python 不允许您将多行定义放在表达式中，因此对于复杂的情况，您必须这样做：

```
>>> def bar():
...     return 3
>>> foo = {
...     'bar': bar
... }
>>> eval('bar()', globals(), foo) 
```

但可以说这几乎总是更具可读性（这基本上是 Python 背后的论点，不允许表达式中的多行定义）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T22:48:50.177

所以，我建议你做这样的事情：

```
>>> class S(object):
...     def add(self, a, b):
...         return a + b
... 
>>> filter(lambda (k,v): not k.startswith("__"), S.__dict__.items())
[('add', <function add at 0x109cec500>)]
>>> target = S()
>>> map(lambda (k, f): (k, f.__get__(target, S)), filter(lambda (k,v): not k.startswith("__"), S.__dict__.items()))
[('add', <bound method S.add of <__main__.S object at 0x109ce4ed0>>)]
>>> dict(_)
{'add': <bound method S.add of <__main__.S object at 0x109ce4ed0>>}
>>> eval("add(45, 10) + add(10, 1)", _, {})
66 
```

好像是你需要的。让我解释一下这是如何工作的。

1.  `eval`接受局部变量和全局变量作为参数。
2.  所以我们需要定义特殊的全局上下文，它将成为你的类的“表示”。
3.  为此，我们需要提供`globals`所有“有价值的”**有界方法**的字典。
4.  从简单部分开始。我们有`S`类定义。如何获得所有“有价值”的方法？简单的`filter`名称 from`S.__dict__`为了检查方法名称是否从开始`__`（你看，结果我们得到一个包含 1 项的列表 -`add`函数）。
5.  创建`target`= 类的实例`S`，它将是“评估上下文”。
6.  下一步是最“棘手”的。我们需要从每个函数中创建“绑定方法”。为此，我们使用了这些事实，即类`__dict__`存储函数，每个函数都是非数据描述符，并且可以简单地使用 获取有界方法`func.__get__(obj, type(obj))`。此操作在 中执行`map`。
7.  从上一步中获取结果，从中创建`dict`。
8.  传为`globals`函数`eval`。

我希望这个能帮上忙。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-16T18:59:57.853

上面提出的填充解决方案`locals`在大多数情况下效果很好，但在属性（数据描述符）的情况下可能会出现问题。当字典被填充时，这些被评估*一次。*这意味着对同一变量名的多次引用将始终返回完全相同的实例，这在属性的情况下可能不是预期的行为。

这个问题可以通过注意`eval`期望一个*行为*像 a的`locals`参数来解决（而不是全局变量，它必须*是*a ）。换句话说，我们可以在您的实例中覆盖以在实例的上下文中动态解析变量名称，并将其作为属性直接传递给. 因此，您的示例可以实现为：*`dict`*`dict``__getitem__``locals``eval`**

 **```
class Formula(object):
    def __getitem__(self, key):
        if key not in dir(self) or key.startswith('__'):
            raise KeyError(key)
        return getattr(self, key)

    def LEFT(self, s, n):
        return s[:n]

    def RIGHT(self, s, n):
        return s[0-n:]

    def CONCAT(self, *args, **kwargs):
        return ''.join([arg for arg in args])

def main():
    evalString = "CONCAT(LEFT('Hello', 2), RIGHT('World', 3))"
    print eval(evalString, {}, Formula())

if __name__ == "__main__":
    main() 
```

这个技巧应该适用于继承、静态方法、类方法和属性。最后，使用`dir`and避免了直接与or`getattr`交互的需要，尽管结果可能[并不总是完整](https://docs.python.org/2/library/functions.html#dir)的。`__dict__``__mro__``dir`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T22:46:11.957

您可能会看一下这个问题的公认答案：[“Getting the block of commands that are to be executed in the with-statement”](https://stackoverflow.com/questions/12485837/getting-the-block-of-commands-that-are-to-be-executed-in-the-with-statement)。

这对我创建自己的上下文很有帮助，在这些上下文中，矩形数组（例如 Python Pandas 数据帧）上的数学运算“正常工作”，而无需为难看的额外 Pandas 语法而烦恼。例如，当我`a = x*y`在上下文中写入“”时，它会自动将属性分配给上下文对象，并且它知道要对上下文对象和属性`a`执行矢量操作。`x``y`

我发现这个上下文内容非常有用，尽管每当我在 StackOverflow 上提问时，我经常会收到一些很糟糕的回答，说这一定不是我真正想做的事情。

您可能也可以`eval`让它适用于查找函数的上下文。**

# javascript - 如何在边缘上方显示 MXGraph 顶点？

> ID：13923095
> 
> 赞同：1
> 
> 时间：2012-12-17T22:11:19.810
> 
> 标签：javascript, mxgraph

我正在使用 MX Graph 来帮助识别通过网站的关键内容路径。我已经设置好了，所以每个顶点代表网站上的一个页面，每个边代表一组从页面 A 到页面 B 的访问者。

一切都运行良好，除了边缘太多，我看不到最受欢迎的顶点。有没有办法将顶点下方的边缘分层？我尝试使用基本的分层系统，但这似乎打破了快速的有机布局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:50:43.493

尝试：

```
mxGraph.prototype.ordered = false; 
```

# android - Android 前置摄像头预览尺寸

> ID：13923097
> 
> 赞同：0
> 
> 时间：2012-12-17T22:11:36.253
> 
> 标签：android, android-camera

我有一个正在开发的应用程序，它使用设备上的前置摄像头。我正在尝试通过获取支持的预览尺寸列表并循环浏览它们来寻找一个非常接近的预览尺寸。我为此编写的方法与操作系统自己的相机应用程序中的方法基本相同。该方法工作正常，正是我想要的，这不是我在这里的原因。

我的相机预览在某些设备上看起来明显偏斜，我遇到了问题；压缩或拉伸图像的预览。我不知道为什么会这样，所以我逐步浏览了它，查看了我的前置摄像头可用的所有支持的预览尺寸，发现只有 2 个，而且它们都不是可用的正确方面. 我的 SurfaceHolder.Callback 类中的“surfaceChanged”方法报告前置摄像头的宽度和高度为 762x480，但两个支持的预览尺寸（通过 cam.getParameters().getSupportedPreviewSizes() 获得）都在对面：480x800、320x640。

有了这些作为唯一的选择，似乎不可能预览没有倾斜的前置摄像头。我知道在 2.3 或更低版本中，可以将任意值用于宽度和高度，而不考虑支持的尺寸，但我正在尝试让我的应用程序也适用于较新版本的操作系统。如何使预览看起来正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:33:43.153

我最初的问题在技术上仍未解决（我仍然认为这是不可能的），但是我确实找到了实现非倾斜预览的技巧。

鉴于与我的设备屏幕相比，支持的预览尺寸都处于不正确的方向，看起来确实不可能有一个正常的预览*来填满整个屏幕。*在查看了不同设备上的几个原生相机应用程序（所有这些应用程序都显示正面预览而完全没有倾斜）后，我注意到很少有设备（实际上只有一个，而且一个有非标准屏幕大小）具有覆盖整个屏幕的预览，就像我在我的应用程序中尝试做的那样。

我重新设计了我的应用程序以获得与设备屏幕最接近的宽度和高度的大小，但没有在任何一个维度或纵横比上进行调整，然后手动设置 SurfaceView 的高度和宽度以匹配所选大小。确实，现在某些设备上的预览周围有少量黑色空间，但它看起来肯定比歪斜的要好得多。无论如何，我有一个面板，带有用于拍摄照片和操纵闪光灯设置等的按钮，所以它确实没有人们想象的那么引人注目。

# memory-management - cpu 挂钩，内存挂钩，strace 输出

> ID：13923100
> 
> 赞同：0
> 
> 时间：2012-12-17T22:11:50.327
> 
> 标签：memory-management, cpu, strace

突然间，我一直在处理的一个应用程序正在破坏服务器的 CPU 和内存。自从这个“挂钩”开始以来，我没有任何代码更改。我对 strace 做了一些研究，试图找出发生了什么，但我需要帮助来解读输出的真正含义。我使用了一个运行了几分钟的 pid，cpu 使用率为 100%，使用了大约 1.5GB 的内存，并用它运行了 strace -c。我得到以下输出。我在 clone 和 wait4 命令中花了很长时间。谁能给我一个使用这些信息的方向？

```
 % time     seconds  usecs/call     calls    errors syscall
------ ----------- ----------- --------- --------- ----------------
 54.10    1.011982      252996         4           clone
 30.67    0.573741          51     11296           brk
 11.98    0.224099       56025         4           wait4
  1.96    0.036701          53       687           munmap
  0.68    0.012642        1580         8           mremap
  0.58    0.010928           2      4886         5 read
  0.01    0.000135           0      2854           fstat
  0.01    0.000112           0       845        25 open
  0.00    0.000073           0       935       115 lstat
  0.00    0.000044           0        97        23 access
  0.00    0.000043           0       464        40 stat
  0.00    0.000037           0       466           write
  0.00    0.000037           0       466           gettimeofday
  0.00    0.000035           0       840           close
  0.00    0.000000           0       173           poll
  0.00    0.000000           0       210           lseek
  0.00    0.000000           0       688           mmap
  0.00    0.000000           0         5           rt_sigaction
  0.00    0.000000           0         5           rt_sigprocmask
  0.00    0.000000           0        16           writev
  0.00    0.000000           0        55           setitimer
  0.00    0.000000           0         2           socket
  0.00    0.000000           0         2         2 connect
  0.00    0.000000           0         4           accept
  0.00    0.000000           0         6           shutdown
  0.00    0.000000           0         4           getsockname
  0.00    0.000000           0        10           setsockopt
  0.00    0.000000           0         2           getsockopt
  0.00    0.000000           0         8           semop
  0.00    0.000000           0        38           fcntl
  0.00    0.000000           0       168           flock
  0.00    0.000000           0        12           getdents
  0.00    0.000000           0        25           getcwd
  0.00    0.000000           0        10           chdir
  0.00    0.000000           0         2           unlink
  0.00    0.000000           0         2           chmod
  0.00    0.000000           0        15           umask
  0.00    0.000000           0         7           times
  0.00    0.000000           0         2         1 futex
  0.00    0.000000           0         4           epoll_wait
  0.00    0.000000           0         6           openat
  0.00    0.000000           0         4           pipe2
------ ----------- ----------- --------- --------- ----------------
100.00    1.870609                 25337       211 total 
```

新 --- 附加信息

我对此有更多信息。我的应用程序的用户上传图片。图像上传到的目录现在已经上传了 80k 多个图像文件。当我对占用 cpu 和内存的进程进行 strace 时，我会在该目录中读取大量数据，然后是 brk。以下是 strace 的摘录。

```
poll([{fd=18, events=POLLIN|POLLPRI}], 1, 0) = 0 (Timeout)
write(18, "e\2\0\0\3SELECT \"File\".\"ClassName\", "..., 617) = 617
read(18, "\1\0\0\1\0244\0\0\2\3def\4live\4File\4File\tCla"..., 16384) = 11488
read(18, "\0010\0010\00266\10MMSImage\343\0\0D\10MMSImage\02320"..., 16384) = 13032
read(18, "\373\0011\0010\0010\003122\10MMSImage\345\0\0|\10MMSImag"..., 16384) = 11584
read(18, "257\373\0011\0010\0010\003179\10MMSImage\345\0\0\255\10MMSI"..., 16384) = 16384
read(18, "nswer_Image/0_9373043939_1321407"..., 16384) = 16384
read(18, "or question #1054.Eassets/UserCo"..., 16384) = 16384 
```

然后过了一会儿一大堆brk的

```
brk(0x7f2ba285e000)                     = 0x7f2ba285e000
brk(0x7f2ba291e000)                     = 0x7f2ba291e000
brk(0x7f2ba295e000)                     = 0x7f2ba295e000
brk(0x7f2ba299e000)                     = 0x7f2ba299e000
brk(0x7f2ba29de000)                     = 0x7f2ba29de000
brk(0x7f2ba2a1f000)                     = 0x7f2ba2a1f000
brk(0x7f2ba2a5f000)                     = 0x7f2ba2a5f000
brk(0x7f2ba2a9f000)                     = 0x7f2ba2a9f000
brk(0x7f2ba2adf000)                     = 0x7f2ba2adf000
brk(0x7f2ba2b1f000)                     = 0x7f2ba2b1f000
brk(0x7f2ba2b5f000)                     = 0x7f2ba2b5f000
brk(0x7f2ba2b9f000)                     = 0x7f2ba2b9f000
brk(0x7f2ba2bdf000)                     = 0x7f2ba2bdf000
brk(0x7f2ba2c1f000)                     = 0x7f2ba2c1f000
brk(0x7f2ba2c5f000)                     = 0x7f2ba2c5f000
brk(0x7f2ba2c9f000) 
```

任何人都知道那里可能会发生什么。我的目录中是否有太多文件或类似的东西？硬盘驱动器是否必须过多地寻找目录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T15:26:00.607

好吧，让我们从顶部开始。大量的 clone 和 wait4 意味着这个应用程序比它应该做的更多的分叉或线程。

至于目录大小，如果是从图像文件中读取到动态分配的内存中，`brk`必须调用以获取更多内存。就这么简单。

如果你问我，只需取出一些叉子或螺纹。

# c++ - 为什么 char << 和 char >> 中间结果是 int

> ID：13923104
> 
> 赞同：0
> 
> 时间：2012-12-17T22:12:06.723
> 
> 标签：c++

cygwin gcc 4.5.3

我正在尝试确定 C++ 中各种计算中使用的中间结果。对于'char'，我得到以下结果（x 是一个字符）：

```
x op y is of type char if y is a char/unsigned char
x op y is of type y otherwise except if op is left/right shift 
```

对于左/右移位，中间结果是“int”类型，这与所有其他计算相反。这是标准实现吗？

这是使用的代码（不要太兴奋）：

```
# include <iostream>
# include <iomanip>
# include <typeinfo>
# include "cstdio"
# include <cstdlib>

using namespace std;

typedef unsigned char  UCHAR;
typedef unsigned short USHORT;
typedef unsigned int   INT;
typedef unsigned long  ULONG;
string find(type_info* info) {
   struct type {
      type_info* typeInfo;
      string     name;
   };
   int i;
   static type types[] = { {const_cast<type_info*>(&typeid(bool)),   " BOOL"  }
                         , {const_cast<type_info*>(&typeid(char)),   " CHAR"  }
                         , {const_cast<type_info*>(&typeid(UCHAR)),  " UCHAR" }
                         , {const_cast<type_info*>(&typeid(short)),  " SHORT" }
                         , {const_cast<type_info*>(&typeid(USHORT)), " USHORT"}
                         , {const_cast<type_info*>(&typeid(int)),    " INT"   }
                         , {const_cast<type_info*>(&typeid(uint)),   " UINT"  }
                         , {const_cast<type_info*>(&typeid(long)),   " LONG"  }
                         , {const_cast<type_info*>(&typeid(ULONG)),  " ULONG" }
                         };
   for(i = 0; i < sizeof(types)/sizeof(types[0]); i++ )
      if (types[i].typeInfo == info) break;
   if (i >= sizeof(types)/sizeof(types[0])) return " NOT FOUND";
   return types[i].name;
}
void func0(char x) {
   ios_base::fmtflags ioFlags = cout.flags();
   string info = find(const_cast<type_info*>(&typeid(x)));
   char save = x;
   cout << "func0(char " << (long)x << ')' << endl;
   cout << "!x  " << setw(12) << (!x)    << " 0x" << setw(8) << setfill('0') << hex << (!x) <<  find(const_cast<type_info*>(&typeid(!x))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "~x  " << setw(12) << (~x)    << " 0x" << setw(8) << setfill('0') << hex << (~x) <<  find(const_cast<type_info*>(&typeid(~x))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "+x  " << setw(12) << (+x)    << " 0x" << setw(8) << setfill('0') << hex << (+x) <<  find(const_cast<type_info*>(&typeid(+x))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "-x  " << setw(12) << (-x)    << " 0x" << setw(8) << setfill('0') << hex << (-x) <<  find(const_cast<type_info*>(&typeid(-x))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "++x " << setw(12) << (long)(++x)    << " 0x" << setw(8) << setfill('0') << hex << (++x) <<  find(const_cast<type_info*>(&typeid(++x))) << endl;
   cout.flags(ioFlags); cout << setfill(' '); x = save;
   cout << "--x " << setw(12) << (long)(--x)    << " 0x" << setw(8) << setfill('0') << hex << (--x) <<  find(const_cast<type_info*>(&typeid(--x))) << endl;
   cout.flags(ioFlags); cout << setfill(' '); x = save;
   cout << "x++ " << setw(12) << (long)(x++)    << " 0x" << setw(8) << setfill('0') << hex << (x++) <<  find(const_cast<type_info*>(&typeid(x++))) << endl;
   cout.flags(ioFlags); cout << setfill(' '); x = save;
   cout << "x-- " << setw(12) << (long)(x--)    << " 0x" << setw(8) << setfill('0') << hex << (x--) <<  find(const_cast<type_info*>(&typeid(x--))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << endl;

}
void func1(char x, char y) {
   ios_base::fmtflags ioFlags = cout.flags();
   cout << "func1(char " << (signed long)x << ", char " << (unsigned long)y << ')' << endl;
   cout << "x  + y " << setw(12) << (x  + y) << " 0x" << setw(8) << setfill('0') << hex << (x  + y) <<  find(const_cast<type_info*>(&typeid(x + y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  - y " << setw(12) << (x  - y) << " 0x" << setw(8) << setfill('0') << hex << (x  - y) <<  find(const_cast<type_info*>(&typeid(x - y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  * y " << setw(12) << (x  * y) << " 0x" << setw(8) << setfill('0') << hex << (x  * y) <<  find(const_cast<type_info*>(&typeid(x * y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   if (y == 0) {
        cout << "x  / y " << x << " / 0" <<  endl;
   } else {
        cout << "x  / y " << setw(12) << (x  / y) << " 0x" << setw(8) << setfill('0') << hex << (x / y) <<  find(const_cast<type_info*>(&typeid(x / y))) << endl;
   }
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x %  y " << setw(12) << (x  & y) << " 0x" << setw(8) << setfill('0') << hex << (x  & y) <<  find(const_cast<type_info*>(&typeid(x  & y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x << y " << setw(12) << (x << y) << " 0x" << setw(8) << setfill('0') << hex << (x << y) <<  find(const_cast<type_info*>(&typeid(x << y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x >> y " << setw(12) << (x >> y) << " 0x" << setw(8) << setfill('0') << hex << (x >> y) <<  find(const_cast<type_info*>(&typeid(x >> y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  & y " << setw(12) << (x  & y) << " 0x" << setw(8) << setfill('0') << hex << (x  & y) <<  find(const_cast<type_info*>(&typeid(x  & y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  | y " << setw(12) << (x  | y) << " 0x" << setw(8) << setfill('0') << hex << (x  | y) <<  find(const_cast<type_info*>(&typeid(x  | y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  ^ x " << setw(12) << (x  ^ y) << " 0x" << setw(8) << setfill('0') << hex << (x  ^ y) <<  find(const_cast<type_info*>(&typeid(x  ^ y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << endl;
}
void func1(char x, unsigned char y) {
   ios_base::fmtflags ioFlags = cout.flags();
   cout << "func1(char " << (signed long)x << ", uchar " << (unsigned long)y << ')' << endl;
   cout << "x  + y " << setw(12) << (x  + y) << " 0x" << setw(8) << setfill('0') << hex << (x  + y) <<  find(const_cast<type_info*>(&typeid(x + y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  - y " << setw(12) << (x  - y) << " 0x" << setw(8) << setfill('0') << hex << (x  - y) <<  find(const_cast<type_info*>(&typeid(x - y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  * y " << setw(12) << (x  * y) << " 0x" << setw(8) << setfill('0') << hex << (x  * y) <<  find(const_cast<type_info*>(&typeid(x * y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   if (y == 0) {
        cout << "x  / y " << x << " / 0" <<  endl;
   } else {
        cout << "x  / y " << setw(12) << (x  / y) << " 0x" << setw(8) << setfill('0') << hex << (x / y) <<  find(const_cast<type_info*>(&typeid(x / y))) << endl;
   }
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x %  y " << setw(12) << (x  & y) << " 0x" << setw(8) << setfill('0') << hex << (x  & y) <<  find(const_cast<type_info*>(&typeid(x  & y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x << y " << setw(12) << (x << y) << " 0x" << setw(8) << setfill('0') << hex << (x << y) <<  find(const_cast<type_info*>(&typeid(x << y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x >> y " << setw(12) << (x >> y) << " 0x" << setw(8) << setfill('0') << hex << (x >> y) <<  find(const_cast<type_info*>(&typeid(x >> y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  & y " << setw(12) << (x  & y) << " 0x" << setw(8) << setfill('0') << hex << (x  & y) <<  find(const_cast<type_info*>(&typeid(x  & y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  | y " << setw(12) << (x  | y) << " 0x" << setw(8) << setfill('0') << hex << (x  | y) <<  find(const_cast<type_info*>(&typeid(x  | y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  ^ x " << setw(12) << (x  ^ y) << " 0x" << setw(8) << setfill('0') << hex << (x  ^ y) <<  find(const_cast<type_info*>(&typeid(x  ^ y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << endl;
}
void func1(char x, unsigned long y) {
   ios_base::fmtflags ioFlags = cout.flags();
   cout << "func1(char " << (signed long)x << ", ulong " << y << ')' << endl;
   cout << "x  + y " << setw(12) << (x  + y) << " 0x" << setw(8) << setfill('0') << hex << (x  + y) <<  find(const_cast<type_info*>(&typeid(x + y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  - y " << setw(12) << (x  - y) << " 0x" << setw(8) << setfill('0') << hex << (x  - y) <<  find(const_cast<type_info*>(&typeid(x - y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  * y " << setw(12) << (x  * y) << " 0x" << setw(8) << setfill('0') << hex << (x  * y) <<  find(const_cast<type_info*>(&typeid(x * y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   if (y == 0) {
        cout << "x  / y " << x << " / 0" <<  endl;
   } else {
        cout << "x  / y " << setw(12) << (x  / y) << " 0x" << setw(8) << setfill('0') << hex << (x / y) <<  find(const_cast<type_info*>(&typeid(x / y))) << endl;
   }
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x %  y " << setw(12) << (x  & y) << " 0x" << setw(8) << setfill('0') << hex << (x  & y) <<  find(const_cast<type_info*>(&typeid(x  & y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x << y " << setw(12) << (x << y) << " 0x" << setw(8) << setfill('0') << hex << (x << y) <<  find(const_cast<type_info*>(&typeid(x << y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x >> y " << setw(12) << (x >> y) << " 0x" << setw(8) << setfill('0') << hex << (x >> y) <<  find(const_cast<type_info*>(&typeid(x >> y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  & y " << setw(12) << (x  & y) << " 0x" << setw(8) << setfill('0') << hex << (x  & y) <<  find(const_cast<type_info*>(&typeid(x  & y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  | y " << setw(12) << (x  | y) << " 0x" << setw(8) << setfill('0') << hex << (x  | y) <<  find(const_cast<type_info*>(&typeid(x  | y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  ^ x " << setw(12) << (x  ^ y) << " 0x" << setw(8) << setfill('0') << hex << (x  ^ y) <<  find(const_cast<type_info*>(&typeid(x  ^ y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << endl;
}
void func1(char x, long y) {
   ios_base::fmtflags ioFlags = cout.flags();
   cout << "func1(char " << (signed long)x << ", long " << y << ')' << endl;
   cout << "x  + y " << setw(12) << (x  + y) << " 0x" << setw(8) << setfill('0') << hex << (x  + y) <<  find(const_cast<type_info*>(&typeid(x + y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  - y " << setw(12) << (x  - y) << " 0x" << setw(8) << setfill('0') << hex << (x  - y) <<  find(const_cast<type_info*>(&typeid(x - y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  * y " << setw(12) << (x  * y) << " 0x" << setw(8) << setfill('0') << hex << (x  * y) <<  find(const_cast<type_info*>(&typeid(x * y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   if (y == 0) {
        cout << "x  / y " << x << " / 0" <<  endl;
   } else {
        cout << "x  / y " << setw(12) << (x  / y) << " 0x" << setw(8) << setfill('0') << hex << (x / y) <<  find(const_cast<type_info*>(&typeid(x / y))) << endl;
   }
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x %  y " << setw(12) << (x  & y) << " 0x" << setw(8) << setfill('0') << hex << (x  & y) <<  find(const_cast<type_info*>(&typeid(x  & y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x << y " << setw(12) << (x << y) << " 0x" << setw(8) << setfill('0') << hex << (x << y) <<  find(const_cast<type_info*>(&typeid(x << y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x >> y " << setw(12) << (x >> y) << " 0x" << setw(8) << setfill('0') << hex << (x >> y) <<  find(const_cast<type_info*>(&typeid(x >> y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  & y " << setw(12) << (x  & y) << " 0x" << setw(8) << setfill('0') << hex << (x  & y) <<  find(const_cast<type_info*>(&typeid(x  & y))) << endl;
cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  | y " << setw(12) << (x  | y) << " 0x" << setw(8) << setfill('0') << hex << (x  | y) <<  find(const_cast<type_info*>(&typeid(x  | y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << "x  ^ x " << setw(12) << (x  ^ y) << " 0x" << setw(8) << setfill('0') << hex << (x  ^ y) <<  find(const_cast<type_info*>(&typeid(x  ^ y))) << endl;
   cout.flags(ioFlags); cout << setfill(' ');
   cout << endl;
}

int main(int argc, char** argv) {
   char x = -1;
   func0((char) 1);

   func1(x, (char) 1);
   func1(x, (unsigned char) 1);
   func1(x, (long) 1);
   func1(x, (unsigned long) 1);
   sleep(1);
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:32:46.743

你最初的结论是不正确的。`int`C/C++ 中的所有算术运算至少（或者，也许， ）在大小域内执行计算`unsigned int`。在任何实际计算开始之前`char`，所有较小的操作数类型（`short`等）都会被提升为type 。只有像前缀和后缀版本的操作，并保留其操作数的类型。`int``int``++``--`

这适用于 binary `+`，`*`等操作`-`。这也适用于`<<`and `>>`。所以`<<`and`>>`与其他算术运算符没有任何不同。

你是如何得出结论的，这`"x op y is of type char if y is a char/unsigned char"`对我来说不是很清楚。我刚刚运行了您的代码，它确认了预期的行为：只有类似`++`和`--`评估类型的操作，而对参数的`char`所有其他操作都评估为值。`char``int`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:32:30.507

通过在顶部添加以下内容使代码编译后，

```
typedef unsigned uint; //!
void sleep( int ) {} //!
#include <string> //! 
```

还有一些正式的UB，但应该不重要。

然而，结果*并不*表明

> “如果 y 是 char/unsigned char
> x op y 是 char 类型，则 x op y 是 y 类型，否则除非 op 是左移/右移”

你用的是什么编译器？

你问，

> “这是标准执行吗？”

嗯，不，没有标准的实现。只有一个 ISO 标准。

# php - PHP html电子邮件未发送

> ID：13923108
> 
> 赞同：0
> 
> 时间：2012-12-17T22:12:15.443
> 
> 标签：php, html-email

我的 php 电子邮件脚本似乎没有发送，但我不明白为什么。此外，我了解我的脚本存在某些安全漏洞，非常感谢任何建议！

谢谢你

```
 <?php

include('config.php');

$email1 = $_POST['email1'];

$id = $_POST['id'];
$fname = $_POST['fname'];
$firstname = $_POST['firstname'];
$surname = $_POST['surname'];

$to = '$email1';
$from = "$email"; 
    $subject = "SC - You Have a Reply"; 

        $body = "<html> 
  <body bgcolor=\"#FFFFFF\"> 
    <center> 
        <b>Dear $firstname</b> <br> 
        <font color=\"red\">You have a response, regarding your Ad on StudentClutter!</font> <br>
         <p> --------------------------------------------------------- </p>
         <b> $fname </b>
         <p> --------------------------------------------------------- </p>
         <p> ".stripslashes($_POST['body'])." </p>
         <br>
         <br>
         <br>
         <p> You can reply to them by email: $emailadd </p>
         <br>
         <br>
         <br>
         <p>Thank you for using studentclutter.com </p>
         <p> -- The Student Clutter Team </p>
    </center> 
  </body> 
</html>";

    // To send the HTML mail we need to set the Content-type header. 
    $headers = "MIME-Version: 1.0rn"; 
    $headers .= "Content-type: text/html; charset=iso-8859-1rn"; 
    $headers  .= "From: $from\r\n"; 

    // now lets send the email. 
    mail($to, $subject, $body, $headers); 

    echo "Message has been sent!"; 

 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:19:19.170

您在 周围使用单引号`$email1`，这些不是必需的。删除引号，它应该可以正常工作。

像这样

```
$to = $email1; 
```

我建议您查看[PHPMailer](http://phpmailer.worxware.com/)类，该类提供了一系列功能以及安全性。它非常易于使用，只需阅读文档即可。

**更新**

您没有在某些标题的末尾转义回车和换行特殊字符。将行尾更改为如下所示：

```
\r\n"; 
```

# android - Android Canvas 绘制多帧图像

> ID：13923109
> 
> 赞同：1
> 
> 时间：2012-12-17T22:12:24.523
> 
> 标签：android, android-canvas

我有一个不同框架的图像要显示，如下所示：

![多帧 gif](../Images/1283860805c038b7ca1fc9ea994c1d74.png)

如您所见，该图像具有三个帧，全心、半心和空白空间。

现在我只需要三帧中的一帧。我只是想知道是否有一种方法可以在 android sdk 中使用单个 gif。例如，在几种语言中，有一种方法如下：

```
canvas.drawImage(xpos,ypos,xwidth,xheight,gifx,gify,gifwidth,gifheight) 
```

其中 gifx,gify,gifwidth,gifheight 是所选帧的坐标和大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T21:49:56.267

好的，我回答自己，我刚刚找到了解决方案。

为了绘制多帧图像，可以使用以下方法：

```
public void drawBitmap (Bitmap bitmap, Rect src, RectF dst, Paint paint) 
```

在哪里：

*   *Bitmap bitamp*是通过 BitmapFactory.decodeResource （或通过您的首选方法）获得的 Bitmap 资源。
*   *rect src*是要显示的框架（可以为空）
*   *Rect dst*矩形，位图将被缩放/翻译以适应（它可以为空）
*   *用于绘制位图的油漆* （可以为空）

另一种方法（*我没有测试过*）可能是使用*BitmapRegionDecoder*首先必须使用 BitmapRegionDecoder.newInstance(...) 创建对象的新实例，然后可以使用方法：

```
public Bitmap decodeRegion (Rect rect, BitmapFactory.Options options) 
```

其中 rect 是要显示的选定区域。有关 BitmapRegionDecoder 的更多信息：http: [//developer.android.com/reference/android/graphics/BitmapRegionDecoder.html](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html)

# wpfdatagrid - 如何在更改的单元格数据网格 wpf 中设置粗体文本

> ID：13923121
> 
> 赞同：1
> 
> 时间：2012-12-17T22:13:20.150
> 
> 标签：wpfdatagrid

我正在努力实现以下目标：

在数据网格中，当用户编辑单元格时，我需要将文本加粗，以便用户在将其提交到数据库之前了解所有更改。我关注了此链接中的帖子 -[在此处输入链接描述](https://stackoverflow.com/questions/13003902/bold-changed-cells-in-datagrid)

问题是代码在 DataGridTextColumn 上运行良好，并且没有对 DataGridTemplateColumn 进行任何更改。我是 WPF 的新手，如果有人能对此有所了解并指出我正确的做法，我会很高兴。

谢谢！

# ember.js - Ember.js：上传文件组件

> ID：13923122
> 
> 赞同：10
> 
> 时间：2012-12-17T22:13:24.433
> 
> 标签：ember.js

我需要创建一个 Ember 组件来选择一个文件。我的页面将包含多个“上传组件”

我读过一篇试图实现这一点的帖子：（[https://stackoverflow.com/questions/9200000/file-upload-with-ember-data](https://stackoverflow.com/questions/9200000/file-upload-with-ember-data/)）但是 UploadFileView 直接链接到控制器。我想要一些更通用的东西......

我想从视图中删除 App.StoreCardController.set('logoFile'..) 依赖项或从模板中传递字段 (logoFile) ...

有什么想法可以改进此代码吗？

```
 App.UploadFileView = Ember.TextField.extend({
    type: 'file',
    attributeBindings: ['name'],
    change: function(evt) {
      var self = this;
      var input = evt.target;
      if (input.files && input.files[0]) {
        App.StoreCardController.set('logoFile', input.files[0]);
      }
    }
}); 
```

和模板：

```
{{view App.UploadFileView name="icon_image"}}
{{view App.UploadFileView name="logo_image"}} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-18T14:06:30.623

我完成了一个完整的例子来展示这一点

[https://github.com/toranb/ember-file-upload](https://github.com/toranb/ember-file-upload)

这是基本的车把模板

```
<script type="text/x-handlebars" data-template-name="person">
{{view PersonApp.UploadFileView name="logo" contentBinding="content"}}
{{view PersonApp.UploadFileView name="other" contentBinding="content"}}
<a {{action submitFileUpload content target="parentView"}}>Save</a>
</script> 
```

这是自定义文件视图对象

```
PersonApp.UploadFileView = Ember.TextField.extend({
    type: 'file',
    attributeBindings: ['name'],
    change: function(evt) {
      var self = this;
      var input = evt.target;
      if (input.files && input.files[0]) {
        var reader = new FileReader();
        var that = this;
        reader.onload = function(e) {
          var fileToUpload = reader.result;
          self.get('controller').set(self.get('name'), fileToUpload);
        }
        reader.readAsDataURL(input.files[0]);
      }
    }
}); 
```

这是控制器

```
PersonApp.PersonController = Ember.ObjectController.extend({
  content: null,
  logo: null,
  other: null
}); 
```

最后是带有提交事件的视图

```
PersonApp.PersonView = Ember.View.extend({
  templateName: 'person',
  submitFileUpload: function(event) {
    event.preventDefault();
    var person = PersonApp.Person.createRecord({ username: 'heyo', attachment: this.get('controller').get('logo'), other: this.get('controller').get('other') });
    this.get('controller.target').get('store').commit();
  }
}); 
```

如果您启动 django 应用程序，这将在文件系统上删除 2 个文件

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-11-26T22:56:21.607

**编辑**（2015.06）：刚刚创建了一个基于组件的新解决方案。此解决方案提供了一个带有预览和删除图标的上传按钮。PS这些`fa`类是[字体真棒](http://fontawesome.io/)

组件车把

```
<script type="text/x-handlebars" data-template-name='components/avatar-picker'>
        {{#if content}}
            <img src={{content}}/> <a {{action 'remove'}}><i class="fa fa-close"></i></a>
        {{else}}
            <i class="fa fa-picture-o"></i>
        {{/if}}

        {{input-image fdata=content}}
</script> 
```

组件 JavaScript

```
App.AvatarPickerComponent = Ember.Component.extend({
    actions: {
        remove: function() {
            this.set("content", null);
        }
    }
});

App.InputImageComponent = Ember.TextField.extend({
    type: 'file',

    change: function (evt) {
        var input = evt.target;
        if (input.files && input.files[0]) {
            var that = this;

            var reader = new FileReader();
            reader.onload = function (e) {
                var data = e.target.result;
                that.set('fdata', data);
            };
            reader.readAsDataURL(input.files[0]);
        }
    }
}); 
```

使用示例

```
{{avatar-picker content=model.avatar}} 
```

* * *

**旧答案**

我以[Chris Meyers](http://chrismeyers.org/2012/06/12/ember-js-handlebars-view-content-inheritance-image-upload-preview-view-object-binding/)为例，我把它做得很小。

模板

```
{{#view Ember.View contentBinding="foto"}}
    {{view App.FotoUp}}
    {{view App.FotoPreview width="200" srcBinding="foto"}}
{{/view}} 
```

JavaScript

```
App.FotoPreview= Ember.View.extend({
    attributeBindings: ['src'],
    tagName: 'img',
});

App.FotoUp= Ember.TextField.extend({
    type: 'file',

    change: function(evt) {
        var input = evt.target;
        if (input.files && input.files[0]) {
            var that = this;

            var reader = new FileReader();
            reader.onload = function(e) {
                var data = e.target.result;
                that.set('parentView.content', data);
            }
            reader.readAsDataURL(input.files[0]);
        }
    },
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-25T09:47:46.647

Marek Fajkus，您不能使用 JQuery 的 .serialize，它在 [JQuery UI 文档的文档中没有提到文件上传](https://api.jquery.com/serialize/)

但是，您可以使用[JQuery Upload Plugin](http://jquery.malsup.com/form/)

实际上它确实提到了它，它说：“来自文件选择元素的数据未序列化。”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-18T09:07:16.537

如果上传多个文件，您可能需要使用

```
{{input type='file' multiple='true' valueBinding='file'}}
                          ^^^^ 
```

这是您将在普通 HTML 上传中使用的解决方案。

此外，您可以使用`'valueBinding'`which 将允许您针对组件中的该值设置观察者。

# javascript - 无法将模型值分配给 javascript 变量

> ID：13923126
> 
> 赞同：0
> 
> 时间：2012-12-17T22:13:41.110
> 
> 标签：javascript, asp.net-mvc-3

我使用自动完成来介绍产品的描述，并使用 javascript 函数获取 ProductID 和 Price：

```
<script type="text/javascript">
  $(document).ready(function () {
    $(function () {
      $("#Description").change(function () {
        $("#ProductID").val(Description_autocomplete_hidden.value);
        $("#Price").load('@Url.Action("GetPrice", "Product")', { id: parseInt($("#ProductID").val()) });
      });
    });
  });
</script> 
```

ProductID 工作正常，正确调用了“\Product\GetPrice\4”等操作，但我无法将产品价格分配给 $(“#Price”)。

剃须刀代码：

```
<div class="row">
  <div class="label">@Html.Label("Product")</div>
  <div class="input">@Html.AutoComplete("Description","","Product","_Shared")</div>
</div>
<div id ="ProductID"></div>
<br />

<div class="row">
  <div class="label">@Html.Label("Price")</div>
  <div class="input">@Html.Editor("Price")</div>
</div> 
```

Product 控制器中的 GetPrice()：

```
public string GetPrice(int id)
{
  return unitOfWork.ProductRepository.GetByID(id).Pvp1.ToString();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T00:22:08.150

@Carlos 是对的！.load() 函数尝试设置对文本字段不起作用的内部 HTML。您需要设置 textBox 的值才能使其工作。只需更换您的线路`$("#Price").load('@Url.Action("GetPrice", "Product")', { id: parseInt($("#ProductID").val()) }); });`

有了这个：

```
 $.get('@Url.Action("GetPrice", "Product")', { id: parseInt($("#ProductID").val()) },
 function(result) {
        //set the value here    
        $("#Price").val(result);
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:32:22.243

看这里：

[http://api.jquery.com/load/](http://api.jquery.com/load/)

> jQuery 使用浏览器的 .innerHTML 属性来解析检索到的文档并将其插入到当前文档中。

根据那里写的内容，jQuery`load`方法不能用于设置输入的 value 属性。

请使用这个：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

它会给你更多的选择。同样在成功回调中，您可以在任何地方使用返回值，在您的情况下将值分配给输入：

```
$("#Price").val(data); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T03:55:04.917

```
$(document).ready(function () {
    $(function () {
      $("#Description").change(function () {
        $("#ProductID").val(Description_autocomplete_hidden.value);
  $.ajax({
                        url: '@Url.Action("GetPrice", "Product")',
                        data: { id: parseInt($("#ProductID").val()) },
                        dataType: 'text',
                        type: 'get',
                        success: function (data) {
                           $("#Price").val(data); // 
                        }
                    });        
      });
    });
  }); 
```

试试这个

# jquery - HTML“下拉菜单”-点击切换

> ID：13923128
> 
> 赞同：1
> 
> 时间：2012-12-17T22:13:45.103
> 
> 标签：jquery, html

我在 HTML 中创建了一个“下拉菜单”，当您单击某个元素时会出现该菜单。如果您单击该元素，它将应用一个“选定”类，`li`这将导致出现子菜单：

[jsFiddle 示例](http://jsfiddle.net/SthFJ/5/)

我现在有代码可以在单击菜单项时显示/隐藏菜单。如果选择了不同的菜单，它将从中删除选定的类并将其切换到单击的菜单上：

```
$("#menu").on("click", "li.dropdown", function(event) {
    event.preventDefault();
    event.stopPropagation();

    $(this).siblings(".dropdown").removeClass("selected");
    $(this).toggleClass("selected");
}); 
```

问题是当我点击子菜单中的一个孩子时，我现在的方式是切换菜单并关闭它。

单击文档中的其他任何位置时，我还想隐藏菜单。这可以通过以下方式完成：

```
$(document).on("click", function(event) {
    $("#menu .dropdown").removeClass("selected");
}); 
```

1）如何在单击下拉部分时启用此切换功能而不隐藏菜单？

2）单击文档上除菜单/子菜单本身以外的任何其他位置时，如何隐藏菜单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:20:16.860

您似乎以可接受的方式回答＃2。要做#1：

```
$('.submenu').click(function(e) {
    e.stopPropagation();
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/SthFJ/6/)**

# excel - 将选定的电子表格从 excel 文件导入到 access 2007 表中的 VBA 代码是什么

> ID：13923129
> 
> 赞同：2
> 
> 时间：2012-12-17T22:13:54.540
> 
> 标签：excel, vba, ms-access

我需要 VBA 代码将选定的电子表格从多个 excel 文件导入到 access 2007 表中。任何人都可以帮忙吗？

这是我到目前为止的代码。

```
Option Compare Database
Option Explicit

Const strPath As String = "C:\Users\person\Documents\files.xlsx"

Dim strFile As String
Dim strFileList() As String
Dim intFile As Integer

Sub Sample() 
    strFile = Dir(strPath & "*.xls")

strFile = Dir(strPath & "*.xls")
While strFile <> ""
    'adding files to the list
    intFile = intFile + 1
    ReDim Preserve strFileList(1 To intFile)
    strFileList(intFile) = strFile
    strFile = Dir()
If intFile = 0 Then
    MsgBox "No Files Found"
    Exit Sub
End If
'going through the files and linking them to access
For intFile = 1 To UBound(strFileList)
    DoCmd.TransferSpreadsheet acLink, , _
    strFileList(intFile), strPath & strFileList(intFile), True, "A5:J17"
Next
MsgBox UBound(strFileList) & "Files were linked"
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:21:09.680

我不明白该代码的所有内容，但我的直觉是它没有按照您的预期进行。

你声明一个常数，`strPath`.

```
Const strPath As String = "C:\Users\person\Documents\files.xlsx" 
```

稍后，您将“*.xls”连接到该常量并将其提供给`Dir()`函数。

```
Sub Sample() 
    strFile = Dir(strPath & "*.xls") 
```

我认为你应该`Debug.Print`在那个时候尝试......

```
Debug.Print strPath & "*.xls" 
```

...因为您提供的字符串`Dir()`使其等同于以下语句：

```
strFile = Dir("C:\Users\person\Documents\files.xlsx*.xls") 
```

我怀疑它是否与您要处理的任何 Excel 文件相匹配。

看看下面的代码大纲是否有用。我认为不需要先填充数组，然后循环遍历数组以链接电子表格。我不明白为什么你应该在这里需要一个数组。如果可以，请避免使用它，因为代码会更简单并且会`ReDim Preserve`影响性​​能。

```
Sub Sample2()
    Const cstrFolder As String = "C:\Users\person\Documents\"
    Dim strFile As String
    Dim i As Long

    strFile = Dir(cstrFolder & "*.xls")
    If Len(strFile) = 0 Then
        MsgBox "No Files Found"
    Else
        Do While Len(strFile) > 0
            Debug.Print cstrFolder & strFile
            ' insert your code to link to link to it here '
            i = i + 1
            strFile = Dir()
        Loop
        MsgBox i & " Files were linked"
    End If
End Sub 
```

# php - 显示来自 wordpress RSS 提要的媒体文件

> ID：13923137
> 
> 赞同：0
> 
> 时间：2012-12-17T22:14:22.687
> 
> 标签：php, wordpress, rss

我正在使用 PHP 解析常规 wordpress.com 博客的 rss 提要，以便在我的网站上显示帖子的预览。

它正确显示：标题、描述和出版日期。但我还想显示每个帖子的图像。如果我打开提要的 URL，会有一个带有“媒体文件链接”的图表，但我不知道如何访问这些链接。

你有什么建议吗？

这是我正在使用的代码：

```
<?php

            $xml=("http://testmustard.wordpress.com/feed/");

            $xmlDoc = new DOMDocument();

            $xmlDoc->load($xml);

            $items=$xmlDoc->getElementsByTagName('item');
            $max_items= 15;

        ?>      

        <?php foreach( $items as $i => $item ):?>

        <?php
            if($i>=$max_items) break;

            $title = $item->getElementsByTagName( "title" )->item(0)->nodeValue; 
            $description = $item->getElementsByTagName( "description" )->item(0)->nodeValue; 
            $data = $item->getElementsByTagName( "pubDate" )->item(0)->nodeValue;
        ?>
            <div class="posts">
                <div class="rssentry">
                    <h2><?php echo $title?></h2>
                    <div class="rsscontent"><?php echo html_entity_decode($description)?></div>
                    <div class="metadata"><?php echo $data?></div>
                </div>              
            </div>
        <?php endforeach;?>
        </div> 
```

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:27:59.037

**PHP**

```
<?php

$maxItems = 15;

$Document = new DOMDocument();
$Document->load('http://testmustard.wordpress.com/feed/');

$NodeList = $Document->getElementsByTagName('item');

$i = 0;
foreach ($NodeList as $Node) {
    if ($i++ >= $maxItems) {
        break;
    }

    $media = $Node->getElementsByTagNameNS('http://search.yahoo.com/mrss/', 'content');
    if ($media->length > 0) {
        $imageUrl = $media->item(0)->getAttribute('url');
        echo "$imageUrl\n";
    } else {
        echo "No media:content\n";
    }
} 
```

关键是`getElementsByTagNameNS`。它让您可以使用`media`名称空间，以便您可以获取内容。

# nhibernate - NHibernate 发布关于单向一对多的附加更新

> ID：13923140
> 
> 赞同：3
> 
> 时间：2012-12-17T22:14:37.677
> 
> 标签：nhibernate, nhibernate-mapping

我在 NHibernate 中使用新的 Map by Code 片段。我的理解是在 NHibernate 3 中进行了更新，以便单向一对多关系不再在外键上插入 null 然后将其更新为正确的值，只要您在集合上设置 inverse=false 并进行外键不可为空。

我看到的是 NHibernate 现在插入了正确的外键，但它仍然发出一个额外的 UPDATE 将外键设置为插入中使用的值？！？

我在映射中做错了什么吗？（一个用户可以有多个密码。密码对象不会引用我域中的用户。）

```
mapper.Class<Password>(map =>
{
    map.Table("Passwords");
    map.Id(x => x.Id, x => { x.Generator(Generators.Native); x.Column("PasswordId"); });
    map.Property(x => x.PasswordFormat, x => { x.NotNullable(true); });
    map.Property(x => x.Salt, x => { x.Length(100); });
    map.Property(x => x.PasswordValue, x => { x.NotNullable(true); x.Length(500); });
    map.Property(x => x.CreateDate, x => { x.NotNullable(true); });
});

mapper.Class<User>(map =>
{
    map.Table("Users");
    map.Id(x => x.Id, x => { x.Generator(Generators.Native); x.Column("UserId"); });
    map.Property(x => x.UserName, x => { x.NotNullable(true); x.Length(100); x.UniqueKey("UX_Users_Username"); });
    map.Property(x => x.Email, x => { x.Length(100); x.Index("IX_Users_Email"); });
    map.Property(x => x.IsAnonymous, x => { x.NotNullable(true); });
    map.Property(x => x.IsApproved, x => { x.NotNullable(true); });
    map.Property(x => x.LastActivityDate, x => { x.NotNullable(true); });
    map.Property(x => x.CreateDate, x => { x.NotNullable(true); });
    map.Set(x => x.Passwords, x => { x.Access(Accessor.Field); x.Inverse(false); x.Key(k => { k.Column("UserId"); k.NotNullable(true); k.ForeignKey("FK_Passwords_UserId"); }); x.Cascade(Cascade.All); x.Lazy(CollectionLazy.Lazy); }, x => x.OneToMany());
}); 
```

**注意：**这是使用内置的 NHibernate.Mapping.ByCode，而不是 Fluent NHibernate。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:23:06.937

事实证明，我可以通过设置`k.Update(false)`Passwords 集合映射的外键部分来完成此操作。

hazzik 对以下问题的回答让我排队。

[https://stackoverflow.com/a/11576097/139694](https://stackoverflow.com/a/11576097/139694)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:22:55.390

它应该是 Inverse() 而不是 Inverse(false)。

Inverse() 表示其他实体拥有该关系，它负责在插入/更新信息时为 NHibernate 提供有关该关系的数据，即，如果“用户”设置为反向，则“密码”需要负责提供关系信息. 到 NHibernate。

为此，您需要在“密码”实体上设置“用户”参考属性。在创建/更新密码时，明确分配用户属性。

```
//create new password
Password objPassword = new Password();
objPassword.otherproperties =///assign
objPassword.User = <<---assign the user property 
```

目前，您有 Inverse(false) 这是 NHibernate 的默认设置。在这种情况下，insert 语句将在 passwordid 为 null 的情况下执行，然后更新引用，从而导致两个操作。

# javascript - 有没有办法在页面上的所有框架中使用 jquery 库而不将其注入所有框架？

> ID：13923141
> 
> 赞同：0
> 
> 时间：2012-12-17T22:14:41.750
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

我正在尝试编写一个需要在所有帧中使用 jquery 的 chrome 扩展。所以我需要注入 jquery 库。我目前正在这样做

```
chrome.tabs.executeScript(tabId, {
      'file' : 'js/libs/jquery.min.js',
      'allFrames' : true
    }); 
```

但问题是我有一些网站有 15 个框架，我不想注入 15 个 jquery 文件。好像有点过分了。有没有办法只注入一次，所以其他框架可以使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:19:35.037

You can inject jquery only on the main page and then you will be able to access jQuery inside child frames by using this code: `parent.$`

# python - 我如何用简单的程序学习高级python

> ID：13923142
> 
> 赞同：-1
> 
> 时间：2012-12-17T22:14:53.007
> 
> 标签：python, coding-style

我在 github 上的大公司的开源项目中看到，他们以尽可能小的步骤完成简单的程序。

他们试图通过使用高级方法来最小化代码行数，这使得即使是简单的函数调用也显得复杂。

我怎么能理解这些东西。它不是关于高级概念，而是以有效的方式做简单的事情，这使得代码看起来难以理解。

例如，这是来自 scrapy 的 crawlerSpider 的代码

```
def identity(x):
    return x

class Rule(object):

    def __init__(self, link_extractor, callback=None, cb_kwargs=None, follow=None, process_links=None, process_request=identity):
        self.link_extractor = link_extractor
        self.callback = callback
        self.cb_kwargs = cb_kwargs or {}
        self.process_links = process_links
        self.process_request = process_request
        if follow is None:
            self.follow = False if callback else True
        else:
            self.follow = follow 
```

这是他们使用规则的地方

```
rules = ()
for link in links:
                r = Request(url=link.url, callback=self._response_downloaded)
                r.meta.update(rule=n, link_text=link.text)
                yield rule.process_request(r) 
```

现在我无法理解`identity function`它什么都不做有什么用

所以`process_request = identity`这意味着

`rule.process_request(r) = identity(r)` whcih`r`基本上返回该行等于

`yield r`. 为什么他不能写那条简单的线而不是身份。

像这样的事情还有很多，我无法理解。

是否有任何书可以解释以这种方式编写程序。我不喜欢一章一章地从数据类型开始的书，最后我仍然看不到像我们在 github 上那样的单个程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:24:46.827

身份函数是一种技术性，它可以让您将数据通过一个过程，当您真的不想要一个转换时，该过程期望转换。

例如，如果您有一个函数需要一个数组和另一个函数映射到数组上，但您不想要映射（但该函数所做的所有其他事情），那么您将其传递给身份函数。

这种模式在支持高阶抽象的语言中很常见，尤其是函数式语言。它不仅限于 Python。

# vb.net - VB 注册 Com 互操作

> ID：13923145
> 
> 赞同：2
> 
> 时间：2012-12-17T22:15:16.727
> 
> 标签：vb.net, dll, visual-studio-2012

我正在尝试从 Visual Studio 2012 的 VB 中制作 COM excel 插件，但不断收到以下错误....

```
Error   1   The assembly 'Microsoft.Office.Tools.Common.v4.0.Utilities, Version=10.0.0.0,Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a' is not registered for COM Interop. Please register it with regasm.exe /tlb.  ExcelAddIn1 
```

我已经检查了属性中的“注册 Com interop”复选框。

我正在使用 Visual Studio 2012 和 Excel 2010。

任何帮助都将不胜感激。

干杯，

克里斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-08-20T04:44:47.980

1.  [从https://www.microsoft.com/en-us/download/details.aspx?id=3508](https://www.microsoft.com/en-us/download/details.aspx?id=3508)安装 Office 2010 Primary Interop Redistributable（2010 年以后没有）
2.  打开管理命令提示符
3.  跑：

    `CD "C:\Program Files\Reference Assemblies\Microsoft\VSTO40\v4.0.Framework"`

    接着

    `"\windows\Microsoft.NET\Framework\v4.0.30319\RegAsm.exe" /tlb Microsoft.Office.Tools.Common.v4.0.Utilities.dll`

4.  重建你的 VS 项目，它现在应该可以工作了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-10T06:30:17.883

打开 Visual Studio 命令提示符并按照以下格式注册您的 dll

regasm.exe /tlb

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T01:56:49.097

下载并安装 MS Office Office 2010 主要互操作程序集。

[http://www.microsoft.com/en-us/download/details.aspx?id=3508](http://www.microsoft.com/en-us/download/details.aspx?id=3508)

根据您的解决方案，您可能还需要这个：[http ://www.microsoft.com/en-us/download/details.aspx?id=20479](http://www.microsoft.com/en-us/download/details.aspx?id=20479)

# javascript - 有哪些常用方法来版本 javascript 以获得最大的缓存性能？

> ID：13923148
> 
> 赞同：1
> 
> 时间：2012-12-17T22:15:34.297
> 
> 标签：javascript, web, apache2, browser-cache

我们正在托管一个包含多个 javascript 文件的 PHP 应用程序。目前，我们通过将 get 参数（时间戳）附加到 javascript 文件的 url 来破坏缓存，即： http://ourserver.com/scripts/something.js?cachebust= [1289438903](http://ourserver.com/scripts/something.js?cachebust=1289438903)

随着文件数量的增加，应用程序的性能会降低。我们可以使用哪些解决方案来缓解这个问题，从 js 构建系统到 apache2 配置？哪些选项需要对我们的应用程序代码和我们当前的开发工作流程进行最少的更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:24:24.783

我们所做的是有一个 php 脚本，它获取需要压缩和组合的文件并创建这些文件的 url。该脚本执行此操作，并创建所有文件版本号串联的哈希。哈希作为`&hash=<hash>`参数附加到 url。该脚本生成如下内容：

```
http://path/to/minifier/script.php?files=core.js,somecode.js,someothercode.js&hash=da39a3ee5e6b4b0d3255bfef95601890afd80709. 
```

这被发送到客户端，浏览器执行请求。minifier 脚本获取参数，将它们缩小（或从缓存中获取），连接它们并将它们发送回。因为哈希是脚本版本的函数，所以当其中一个文件更改时，它会被更新。并且由于版本仅在文件更改时才会更改，因此不会发生不必要的缓存破坏。有多个脚本可以做到这一点。我们使用 wro4j（在 java 中），但存在 php 脚本。

编辑：为了能够在生产中修复错误，我们还有一个参数`debug=true`可以告诉压缩器脚本实际上不压缩，只返回连接的脚本。

# windows - 带有 StreamReader 的 Windows 服务中的另一个进程正在使用的文件

> ID：13923150
> 
> 赞同：0
> 
> 时间：2012-12-17T22:15:42.733
> 
> 标签：windows, windows-services, filesystemwatcher

我搜索了许多文章并尝试了几种不同的方法来解决这个问题。

**请注意，此过程在具有完全相同代码的控制台应用程序或 Windows 应用程序中运行良好。所以，逻辑没有错。这是 Windows 服务处理这些文件的方式，它以某种方式不让后续文件通过。**

我尝试阅读一篇简单的文章来实际调试服务，但我没有使用 Visual Studio 2010 在我的调试菜单下选择“附加到进程”。 **http://msdn.microsoft.com/en-us/library/ 7a50syb3(v=vs.100).aspx**

我真的需要一些帮助，因为我的选择真的用完了。

这是一个简单的场景：我在 OnStart 方法中有一个 FileSystemWatcher，它启动了另一种方法来处理我的本地机器上的文件。这些只是简单的 txt 文件。处理第一个文件后，一切正常，我在事件日志中得到以下信息： 为文件**20121212_AZM_Journey_MIS.txt成功插入数据**

当我尝试处理后续文件（格式完全相同，但名称不同 --- 日期不同）时，我在事件日志中得到以下信息：进程无法访问文件**'C:\Projects\Data\VendingStats\20121213_AZM_Journey_MIS .txt'**，因为它正被另一个进程使用。

请注意，创建时会在同一目录中监视文件。

这是我的 Windows 服务中的代码。有人可以**让**我知道如何解决这个问题吗？请注意，e.FullPath 在我的本地计算机上计算为“C:\Projects\Data\VendingStats”。

```
 public partial class VendingStatsService : ServiceBase
        {

            public VendingStatsService()
            {
                InitializeComponent();
            }

            protected override void OnStart(string[] args)
            {
                FileSystemWatcher Watcher = new FileSystemWatcher(@"C:\Projects\Data\VendingStats");
                Watcher.EnableRaisingEvents = true;
                Watcher.Created += new FileSystemEventHandler(**Watcher_Created**);
                Watcher.Filter = "*.txt";
                Watcher.IncludeSubdirectories = false;
            }

private void Watcher_Created(object sender, FileSystemEventArgs e)
        {
            try
            {
                using (TextReader tr = new StreamReader(e.FullPath))
                {
                    // code here to insert data from file into a DB
                }
                Dispose();
            }
            catch (Exception ex)
            {
                EventLog.WriteEntry("VendorStats", "Error in the Main:" + "\r\n\r\n" + ex.Message + "\r\n\r\n" + ex.InnerException);
                return;
            }
        }

        public void Dispose()
        {
            GC.Collect();
        } 
```

# mongodb - 如何在 MongoDB 中找到大于或等于时间的记录？

> ID：13923152
> 
> 赞同：7
> 
> 时间：2012-12-17T22:15:43.440
> 
> 标签：mongodb

我有一个结构如下的 MongoDB 文档：

```
{
"_id": ObjectId("50cf904a07ef604c8cc3d091"),
"lessons": {
    "0": {
        "lesson_name": "View and Edit Lists",
        "release_time": ISODate("2012-12-17T00:00:00Z"),
        "requires_anim": false,
        "requires_qq": true
    },
    "1": {
        "lesson_name": "Leave a Tip",
        "release_time": ISODate("2012-12-18T00:00:00Z"),
        "requires_anim": false,
        "requires_qq": true
    }
}
} 
```

我有很多这样的文件。我想获取课程发布时间大于或等于给定时间的所有文档。这是我写的查询：

```
db.lessons.find({"lessons.release_time":{"$gte": ISODate("2012-12-16")}}); 
```

但这不会返回任何文件。关于我做错了什么以及如何纠正它的任何想法。谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-17T22:50:31.760

这是我的测试结果：

```
> db.testc.insert( { lessons: [
     {release_time: ISODate("2012-12-17T00:00:00Z")},
     {release_time: ISODate("2012-12-18T00:00:00Z")}
  ] } )
> db.testc.find({"lessons.release_time":{"$gte": ISODate("2012-12-16")}})
{ "_id" : ObjectId("50cfa093ab08a4592c73f927"),
  "lessons" : [
      { "release_time" : ISODate("2012-12-17T00:00:00Z") },
      { "release_time" : ISODate("2012-12-18T00:00:00Z") }
   ] } 
```

您的查询很好，但正如其他人所指出的那样，您的数据很可能不是作为数组结构化的。

# python - App Engine 启动错误

> ID：13923155
> 
> 赞同：0
> 
> 时间：2012-12-17T22:16:03.273
> 
> 标签：python, google-app-engine

由于错误，Google App Engine 无法启动。以下信息来自应用引擎创建的错误日志文件。我怎样才能解决这个问题？

```
>Traceback (most recent call last):
>  File "GoogleAppEngineLauncher.py", line 42, in <module>
>  File "wx\_core.pyc", line 7913, in __init__
>  File "wx\_core.pyc", line 7487, in _BootstrapApp
>  File "launcher\app.pyc", line 53, in OnInit
>  File "launcher\app.pyc", line 98, in _CreateModels
>  File "launcher\preferences.pyc", line 68, in __init__
>  File "launcher\preferences.pyc", line 72, in Load
>  File "ConfigParser.pyc", line 267, in read
>  File "ConfigParser.pyc", line 462, in _read
>ConfigParser.MissingSectionHeaderError: File contains no section headers.
>file: C:\Users\Lennart/Google\google_appengine_launcher.ini, line: 1
>'\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\
>x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
>\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
>\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
>\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
>\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00
>\x00\x00\x00\x00\x00\x00\x00\x00\x00' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T05:53:35.547

应用程序路径中的 app.yaml 文件？如果应用程序文件丢失，这就是您会得到的错误类型

# wordpress - qTranslate 在通过 ajax 从插件内部调用时无法正确检测

> ID：13923157
> 
> 赞同：1
> 
> 时间：2012-12-17T22:16:38.810
> 
> 标签：wordpress, mailchimp, qtranslate, mo

我有两个问题。

**问题1：**

1.  我已经将mailchimp 的pot 文件翻译成两种语言。.mo 已经过测试可以正常工作。
2.  但是 WP 无法为 mailchimp 表单和/或[mailchimp list subscribe form](http://wordpress.org/extend/plugins/mailchimp/)的小部件显示其他语言的 ajax 返回。

我通过修改`mailchimp.php`以下内容解决了这个问题：

```
 $textdomain = 'mailchimp_i18n'; #line 57 to start
    if (defined('WPLANG'))
        $lang=WPLANG;
    $locale = apply_filters( 'plugin_locale', $lang, $textdomain); 
```

***我是怎么想出来的？*** 代替此`$lang`变量，默认值`mailchimp.php`已of`get_locale()`定义。`l10n.php``wp-includes`

当我在上面修改之前放置一个`print_r($locale)`。它显示了 wp-config 的 WPLANG 中设置的正确语言。但是当 mailchimp 表单被提交时，它只会得到默认的 en_US！

***它在哪里得到 en_US，当我没有设置它时？*** 我发现它很奇怪，`line 48-49`对于包含`l10n.php`的定义`get_locale()`：

```
 if ( empty( $locale ) )
    $locale = 'en_US'; 
```

其中，我认为 $locale 是空的，而在我的情况下是从表单中调用的。这是非常不可能的！但它发生在我测试的四个实例中。

***我在 mailchimp.php 上的修改让我做什么？*** 我现在可以将其他语言（即阿拉伯语）字符串添加到我的 mailchimp 表单响应中。但是从 WPLANG 中检测到，我无法在站点的英语模式下切换到英语。

**问题 2：** 即时切换语言。我`qtrans_getLanguage()`在`get_locale()`mailchimp.php 的代码部分中使用了它。因此，它变成：

```
$locale = apply_filters( 'plugin_locale', qtrans_getLanguage(), $textdomain); 
```

如果我在这一行之后 print_r($locale) 。它显示当前语言。但不是在提交表单时。表单的响应始终显示为 (en)!。

现在，**问题 1**不太可能发生并且不寻常。但是对于问题**2** ，我绝对认为有一个聪明的解决方法。为什么从该表单的 Ajax 调用时 qTranslate 会报告错误？

另外，我不想修改核心插件文件。目前，我不得不修改 mailchimp.js 来手动匹配和替换常见的字符串（我讨厌它！）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:31:02.103

通过遵循[这个](https://stackoverflow.com/questions/7800630/ajax-qtranslate?rq=1)和[这个解决了它](https://stackoverflow.com/questions/7571643/qtranslate-plugin-and-ajax-requests?rq=1)

但是由于 mailchip.js 有这个“ajax_url”，我在生成这个 URL 的 mailchimp 插件中搜索。它在 mailchimp.php 的第 96 行生成

```
 'ajax_url' => trailingslashit(home_url().'/'.  qtrans_getLanguage()), 
```

我刚刚添加了`'/'. qtrans_getLanguage()`部分。

# python - 使用 Thrift 在 Python 脚本中运行 Hive-Query 时出现“连接被拒绝”

> ID：13923159
> 
> 赞同：2
> 
> 时间：2012-12-17T22:16:46.837
> 
> 标签：python, hadoop, mapreduce, hive, thrift

全部，

我正在尝试使用 Python 的 Thrift 库在 Python 脚本中运行配置单元查询。我能够运行不执行 M/R 之类的查询`create table`，`select * from table`等等。但是当我执行执行 M/R 作业的查询（例如`select * from table where...`）时，我得到以下异常。

```
starting hive server...

Hive history file=/tmp/root/hive_job_log_root_201212171354_275968533.txt
Total MapReduce jobs = 1
Launching Job 1 out of 1
Number of reduce tasks determined at compile time: 1
In order to change the average load for a reducer (in bytes):
  set hive.exec.reducers.bytes.per.reducer=<number>
In order to limit the maximum number of reducers:
  set hive.exec.reducers.max=<number>
In order to set a constant number of reducers:
  set mapred.reduce.tasks=<number>
java.net.ConnectException: Call to sp-rhel6-01/172.22.193.79:54311 failed on connection exception: java.net.ConnectException: Connection refused

Job Submission failed with exception 'java.net.ConnectException(Call to sp-rhel6-01/172.22.193.79:54311 failed on connection exception: java.net.ConnectException: Connection refused)'
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MapRedTask 
```

* * *

我有一个多节点hadoop集群，我的配置单元安装在namenode中，我也在同一个namenode上运行python脚本。

python脚本是

```
from hive_service import ThriftHive
from thrift import Thrift
from thrift.transport import TSocket
from thrift.transport import TTransport
from thrift.protocol import TBinaryProtocol

transport = TSocket.TSocket('172.22.193.79', 10000)
transport = TTransport.TBufferedTransport(transport)
protocol = TBinaryProtocol.TBinaryProtocol(transport)

client = ThriftHive.Client(protocol)
transport.open()

client.execute("select count(*) from example ")
print client.fetchAll();
transport.close() 
```

谁能帮我理解什么是错的？

-苏珊特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-07T14:30:05.653

尽管我可以完成和查询`SELECT`，但我无法完成查询。我解决这个问题的方法是重新启动集群上的服务。我正在使用 Cloudera 来管理我的集群，所以我运行的命令是. 我没有花太多时间调试，但我猜测 NN 或 JT 崩溃了。有趣的是我仍然可以完成对元数据的查询。我最好的猜测是查询直接进入元存储，而不必触及 HDFS。不过，我需要有人来证实这一点。`SHOW``DESCRIBE``$ sudo /etc/init.d/cloudera-scm-agent hard_restart`

# javascript - Angular services decoupling

> ID：13923162
> 
> 赞同：1
> 
> 时间：2012-12-17T22:16:55.823
> 
> 标签：javascript, angularjs

I'm playing with angularjs doing some simple stuff. I wanted to incorporate some real time messaging like PubNub, PubSub or Pusher. Basically I have it working, but it seems too cumbersome in some areas. Maybe you can show me a better way.

Ok, so here is my working jsfiddle (with pubsub faked) [http://jsfiddle.net/canree/dD5VR/](http://jsfiddle.net/canree/dD5VR/)

I have external service (`pubsub`) and created angular service for it. Now as I don't want other parts of my app to be dependent on this concrete implementation , I decided to create another one (`inbox`) that would store all the messages `pubsub` sent. And this `inbox` would be the dependency across my app (instead of `pubsub`).

So I want my dependencies to be:

```
controller -> inbox -> pubsub 
```

When `pubsub` receives a message it needs to add it to `inbox` so that controller can see it and react accordingly. The problem is I don't want this backward dependency (`pubsub -> inbox`). I'd like `pubsub` to notify observers that message was received.

What I have now is ugly callback registration (inbox registers callback in pubsub). I don't like it very much as it has a lot of boilerplate (regarding `this` handling etc).

I wonder if there is other way to connect those services? Events (but without being forced to use `$rootScope` everywhere)? If so, where to register such event handler? Can services receive events?

Take a look at the fiddle provided and advice me how to solve it better way.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T02:29:02.713

> I don't want other parts of my app to be dependent on this concrete implementation

The interaction with the server is already wrapped/abstracted in the pubsub service. If the interaction with the server needs to change, it is already isolated to that service. I don't think adding another layer of abstraction buys you enough to offset the extra code you need to write (as you've already seen).

Here are a few other observations about how you could simplify your code (some of this you probably already know, but it might be instructive for others):

1.  The content() function is not necessary (especially since messages is not private data). In Angular the controller $scope/model is often directly tied to a service model, so you could simply use: `$scope.messages = inbox.messages;`
    (If you like the content() function, consider making messages private in the inbox service.)

2.  There is no need to send an event to the inbox controller about the change to inbox's messages array. The append() function just needs to call $rootScope.$digest(). And actually, this is probably not needed, since the real service would likely be using $http or $resource, which will automatically call $apply() or $digest. So _broadcastNewMessage() is not needed, nor is the $scope.$on() in the controller.
    Even if you leave the content() function as is, you still won't need to broadcast anything.

3.  Since inbox is dependent on pubsub, I would have the inbox service register itself `pubsub.subscribe(this.append, this);`

4.  pubsub's init() method can be in-line (no function required)

[Fiddle](http://jsfiddle.net/mrajcok/n7Txy/) with all of the above observations incorporated.

> I wonder if there is other way to connect those services?

I can only think of model sharing (e.g., in service1: this.service1_obj_or_obj_property = service2.service2_obj_or_obj_property) and creating functions on the dependent service that the other service can call.

> Can services receive events?

Since $on and $broadcast are defined on Scope, and since services are singletons and are not affected by scopes, I'm pretty sure the answer is "no."

# python - python 第三方模块（lxml）放在哪里？

> ID：13923165
> 
> 赞同：2
> 
> 时间：2012-12-17T22:17:16.290
> 
> 标签：python, import, module, lxml, elementtree

我想编写一个使用 lxml 库的 Python 程序（参见[http://lxml.de/](http://lxml.de/)）。当然，我想与其他人共享我的程序，并希望在不同的计算机上运行它。

现在，我有一个包含 lxml 模块的文件夹和一个执行导入的 python 文件。现在，此导入不起作用并引发异常。您可以在下图中查看所有详细信息和概述： [http ://www.qpic.ws/images/pythonprob.png](http://www.qpic.ws/images/pythonprob.png)

搜索此错误时，建议将 lxml 源文件夹的路径放入我的 PATH 中。但是：我希望程序可以在不同的计算机上运行，​​而不必操作它们的 PATHes/PYTHONPATHes！该模块应该只在本地上下文中被引用，这意味着，应该只驻留在我的程序旁边的文件夹中。我认为，它是 lxml 还是其他第三方模块集合并不重要。

**我是否理解了一些严重的错误，或者是否有一个简单的解决方案可以满足我的需求？**

系统：Python 3.3 • Windows 7

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:49:09.347

[在virtualenv](http://pypi.python.org/pypi/virtualenv "虚拟环境")中安装 LXML ，并从该环境运行您的程序。这将无缝处理您的 PATH 问题。在不同的计算机上，您可以构建新的 virtualenvs 并安装依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:07:02.830

`lxml.etree`是一个编译扩展。将 lxml 源文件夹放入 sys.path 是不够的。尝试`lxml-3.0.2.win-amd64-py3.3.‌exe`从[http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml](http://www.lfd.uci.edu/~gohlke/pythonlibs/#lxml)下载，使用解压程序打开安装程序文件，例如 WinRAR，并将当前 lxml 源目录替换为安装程序中的 lxml 文件夹.

# java - Selenium Grid2, how to shutdown a node?

> ID：13923174
> 
> 赞同：1
> 
> 时间：2012-12-17T22:18:15.107
> 
> 标签：java, selenium, shutdown

I setup Grid2 with Selenium Webdriver and everything seems to be going fine but when a selenium test finishes, the node is still occupied and I can't reuse it !

Is there a way to problematically close/shutdown a node after using it ?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:19:36.670

I solved it by using driver.quit(); when the test finishes.

# jquery - jQuery插件样板谁是我的？

> ID：13923179
> 
> 赞同：1
> 
> 时间：2012-12-17T22:18:47.090
> 
> 标签：jquery

我正在玩一个真正简单的 jQuery 插件“hello world”，但我在使用[jQuery Plugin Boilerplate 时](http://jqueryboilerplate.com)遇到了一些麻烦。例如，即使简单且评论很好，我也觉得我错过了一点，例如，无论我使用什么 jQuery 方法，我都会遇到错误。这是我的初始化函数。

```
 Plugin.prototype = {

    init: function() {

        console.log(this, this.element); // this.element return my element works fine

        this.element.on('click', function() { // 'undefined' is not a function :(
            alert('whoa'); 
        });

        this.element.click(function() {  // not working at all :'(
            alert('whoa'); 
        });

    },

    open: function(el, options) {
        // some logic
    }
}; 
```

你能给我一个提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T14:27:07.227

由于您使用的是制作 jQuery 插件的框架，因此您必须遵循它们的约定。

如果你只是在做`$.fn.plugin = function(){}`，那么`this`将是一个 jQuery 对象，因为`$.fn`是对`jQuery.prototype`.

在您的框架中，`this.element`是原生 DOM 元素，因此要使用 jQuery 方法，您需要将其包装在`$()`.

```
$(this.element).on('click', function(){
}); 
```

# c++ - Box2d Marmalade 内存访问冲突

> ID：13923180
> 
> 赞同：0
> 
> 时间：2012-12-17T22:18:47.830
> 
> 标签：c++, box2d, marmalade

只是试图在 Marmalade 项目上设置 box2d 世界会带来访问冲突：

```
#include "s3e.h"
#include "Iw2D.h"
#include "game.h"
#include "Box2D\Box2D.h"

CGame::CGame()
: m_Position(0,0)
, m_Size(Iw2DGetSurfaceHeight() / 10, Iw2DGetSurfaceHeight() / 10)
{
b2Vec2 gravity(0.0f, -10.0f);
bool doSleep = true;
b2World world(gravity, doSleep); <------this line is the one
b2BodyDef groundBodyDef;
groundBodyDef.position.Set(0.0f, -10.0f);
b2Body* groundBody = world.CreateBody(&groundBodyDef);
b2PolygonShape groundBox;
groundBox.SetAsBox(50.0f, 10.0f);
groundBody->CreateFixture(&groundBox, 0.0f);

} 
```

调试它，显示在 b2Settings.cpp "malloc(1024)" 导致访问冲突

```
 #include <Box2D/Common/b2Settings.h>
     #include <cstdlib>

     b2Version b2_version = {2, 2, 0};

     // Memory allocators. Modify these to use your own allocator.
     void* b2Alloc(int32 size)
    {
   return malloc(size); <----this is the one
     }

    void b2Free(void* mem)
   {
   free(mem);
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T23:35:14.577

正是 iforce2d 在评论中所说的，您需要创建一个指向`b2World`并调用`new`它的指针。你不能直接调用它`constructor`，而不调用`new`它。显然正确的说法是——

```
b2World* world = new b2World(gravity, doSleep); 
```

# jquery - 阻止另一个点击事件的点击事件

> ID：13923181
> 
> 赞同：0
> 
> 时间：2012-12-17T22:18:48.073
> 
> 标签：jquery, jquery-selectors

我有以下代码：

```
$(function() {
    $(li).click(doThis);

    $(a.clickMe).live('click', doThat);
}); 
```

我想在单击 a.clickMe 时阻止 doThis 。a.clickMe 位于 li... 我想查看点击的来源是从哪里来的，所以我可以查看是否点击了 a.clickMe。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:31:20.457

> *“我想检查一下点击的来源”*

好的，所以也许是这样的：

```
$(function() {
    $("li").click(function(e) {
       if ($(e.target).is("a.clickMe"))
          return doThat.call(this, e);
       else
          return doThis.call(this, e);
    });
}); 
```

也就是说，在 li 元素的单击处理程序中测试该[`event.target`元素](http://api.jquery.com/event.target/)是否是元素之一，`"a.clickMe"`如果是则调用`doThat()`（设置`this`和传递`event`对象）。否则调用`doThis()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:21:14.133

您可以防止点击事件传播到`li`：

```
$(a.clickMe).live('click', function(e) {
    e.stopPropagation();

    // Now, the event won't bubble up to the `li` and won't trigger its event handler.
}); 
```

# geometry - Book 中的 2D 旋转公式不起作用

> ID：13923185
> 
> 赞同：1
> 
> 时间：2012-12-17T22:19:09.070
> 
> 标签：geometry

离开大学后，我不必在代码中做太多数学，所以我决定复习一下，使用名为“程序员数学和物理学”的书。

这本书在第 113 页上说，要围绕原点旋转一个点，公式是（角度以弧度为单位）：

```
new_x = sqrt(x*x + y*y) * cos(alpha - atan(y,x))
new_y = sqrt(x*x + y*y) * sin(alpha - atan(y,x)) 
```

听起来很简单，但与我在 Google 中看到的所有关于旋转的示例不同。谷歌搜索时，似乎其他人都这样做：

```
new_x = x * cos(angle) - y * sin(angle)
new_y = y * cos(angle) + x * sin(angle) 
```

（这似乎给出了正确的结果）

现在我的问题是它不起作用，我想知道为什么。我的假设是使用接近 0.0 的角度（alpha），坐标应该几乎没有任何变化，但我得到的是某些坐标分量的符号被否定。

例如，(-3.333, -1.667) 变为 (-3.333, 1.667)，旋转 0.004 弧度。

Java 代码如下所示：

```
double h = sqrt(x*x + y*y);
double atanyx = atan2(y,x);
double angle = alpha - atanyx;
return new Point(h*cos(angle), h*sin(angle)); 
```

那么问题是什么？那本书里的公式有错吗？如果不是，为什么它与其他人所做的不同？为什么我的 Java 实现没有按预期工作？我的期望是接近 0 的角度会导致坐标的变化可以忽略不计。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:31:40.750

书上的公式是错误的。它应该是：

```
new_x = sqrt(x*x + y*y) * cos(atan(y,x) + alpha)
new_y = sqrt(x*x + y*y) * sin(atan(y,x) + alpha) 
```

对于它的价值，您上面的第二个公式既更快又更常用。

# wordpress - Wordpress: italics, bold, and links off baseline

> ID：13923190
> 
> 赞同：0
> 
> 时间：2012-12-17T22:19:27.490
> 
> 标签：wordpress, text, offset

On Wordpress after adding italic, bold, or hyperlink elements to text, the text becomes offset from the baseline of normal text. I'm using the Elegantica theme. Is there a solution for this?

My site: [http://www.lfvaa-sample.com/](http://www.lfvaa-sample.com/)

Examples of this problem can be found on the home page at the bottom with the hyperlinked text "Learn More" and on the LinkedFlow page under resources with the italicized text.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:53:52.533

in the case of your "learn more" links at the bottom, the culprit appears to be

```
vertical-align: middle; 
```

in your style.css

```
html, body, div, span, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, abbr, address, cite, code, del, dfn, em, img, ins, kbd, q, samp, small, strong, sub, sup, var, b, i, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, figcaption, figure, footer, header, hgroup, menu, nav, section, summary, time, mark, audio, video {
    background: none repeat scroll 0 0 transparent;
    border: 0 none;
    font-family: Helvetica,Arial,sans-serif;
    font-size: 100%;
    margin: 0;
    outline: 0 none;
    padding: 0;
    vertical-align: middle;
} 
```

You can see when I turn that rule off in firebug, the text aligns properly. Tested with the italic on the other page and the same rule is affecting that text too.

![enter image description here](../Images/746a73358ebc8a186b201fc6ae584095.png)

# facebook - Tying in facebook comments plugin with Facebook Developer App

> ID：13923191
> 
> 赞同：0
> 
> 时间：2012-12-17T22:19:30.800
> 
> 标签：facebook, dotnetnuke, facebook-comments

First off, thanks for taking the time to read this.

I have successfully added the facebook comments plugin to multiple pages on my website. I am looking for the central location to view all comments made on my website, and to moderate them.

From my google research I have found that I need to create a "Facebook App" that is assigned to the comments plugin, ad myself as an administrator, and thats it.

I was able to create my facebook developers account, and I stumbled through trying to make the associated comments app, but I have been met with utter failure :(

How do I create a Facebook app that is tied into the facebook comments plugin on my site? Can anyone point me to a good resource?

Thanks Alex

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:55:27.853

[从评论插件](https://developers.facebook.com/docs/reference/plugins/comments/)审核评论的两种可能方法：

# 1

将此正确设置添加到您`<meta property="fb:admins" content="{YOUR_FACEBOOK_USER_ID}"/>`的. 您应该能够审核评论。`YOUR_FACEBOOK_USER_ID``<head>`

笔记：

> 要添加多个版主，请用逗号分隔 uid，不带空格。

# 2

现在，如果您希望对您的应用有更大的控制权：

*   将此正确设置添加到您`<meta property="fb:app_id" content="{YOUR_APPLICATION_ID}"/>`的,`YOUR_APPLICATION_ID``<head>`
*   在[应用程序的设置中](https://developers.facebook.com/apps)，您可以添加任意数量的管理员，
*   通过一位管理员的帐户[在此处](http://developers.facebook.com/tools/comments)审核评论。

# php - PHP XML Parsing Fails

> ID：13923192
> 
> 赞同：0
> 
> 时间：2012-12-17T22:19:32.347
> 
> 标签：php, html, xml, rss

I have a php script that reads RSS feed and displays the items on the page:

```
 <?php
    function getFeed($feed_url) {

         $content = file_get_contents($feed_url);
         $x = new SimpleXmlElement($content);
         $j=0;

         foreach($x->channel->item as $entry) {
              if ($i <5){
                   echo "<li>
                   <a href='$entry->link' title='$entry->title'>" .
                   $entry->title . "</a><br/>
                   <span style='color: 444444;'>".$entry->description."
                   </span>..<a href='$entry->link' title='$entry->title'>
                   <b>more</b></a>
                   </li>";      
              }$i +=1;
         }
    }
    getFeed("http://example.org/feed/");    

    ?> 
```

It works well and displays the RSS item with the links in it. The issue is when the rss feed is down or becomes 0byte size file and it does not show anything. Is there a way to check if the file exists and not empty and make this script fail gracefully way before the server times out?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:27:28.153

使用[卷曲](http://php.net/manual/en/function.curl-exec.php)功能：

```
function getFeed($feed_url) {

    // GET request
    $handle = curl_init($feed_url);
    curl_setopt($handle,  CURLOPT_RETURNTRANSFER, true);
    $response = curl_exec($handle);
    $httpCode = curl_getinfo($handle, CURLINFO_HTTP_CODE);

    if($httpCode != 200 || empty($response)) {
        echo "feed url not found or missed";
        exit;
    }
    curl_close($handle);

    // also catch error in xml
    try {
        $x = new SimpleXmlElement($response);
    catch (Exception $e){ 
         echo 'XML not valid'; 
         exit; 
    } 
    // rest of function
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:34:49.417

失败`file_get_contents`返回false，您可以检查是否发生错误并退出。

```
$content = file_get_contents($feed_url);
if (content === false) return;
$x = new SimpleXmlElement($content); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:21:45.390

你可以检查你在 $content 中得到了什么。就像它是空的或者不是以 xml 标头开头的，你就停下来。

# c# - List all files from online FTP directory to a listview C#

> ID：13923193
> 
> 赞同：7
> 
> 时间：2012-12-17T22:19:33.907
> 
> 标签：c#, listview, ftp

How could i and everyone else who is reading this list all files from online directory to a listview?

This is the code for a local directory to be listed i would like to know if there was a way to make it so that is connects to a FTP website and lists files?

```
FolderBrowserDialog folderPicker = new FolderBrowserDialog();
if (folderPicker.ShowDialog() == DialogResult.OK)
{

    ListView1.Items.Clear();

    string[] files = Directory.GetFiles(folderPicker.SelectedPath);
    foreach (string file in files)
    {

        string fileName = Path.GetFileNameWithoutExtension(file);
        ListViewItem item = new ListViewItem(fileName);
        item.Tag = file;

        ListView1.Items.Add(item);

    }

} 
```

I have used this code but i cannot seem to get it to work its not coming up with an error but its not listing the files on the webserver either?

```
private void ConnectBtn_Click(object sender, EventArgs e)
    {
        ListDirectory();
    }

    public string[] ListDirectory()
    {
        var list = new List<string>();

        var request = createRequest(TxtServer.Text, WebRequestMethods.Ftp.ListDirectory);

        using (var response = (FtpWebResponse)request.GetResponse())
        {
            using (var stream = response.GetResponseStream())
            {
                using (var reader = new StreamReader(stream, true))
                {
                    while (!reader.EndOfStream)
                    {
                        list.Add(reader.ReadLine());
                    }
                }
            }
        }

        return list.ToArray();
    }

    private FtpWebRequest createRequest(string uri, string method)
    {
        var r = (FtpWebRequest)WebRequest.Create(uri);

        r.Credentials = new NetworkCredential(TxtUsername.Text, TxtPassword.Text);
        r.Method = method;

        return r;
    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T22:28:37.600

您可以使用[这个包装库](https://gist.github.com/1242616)。

相关代码为：

```
 public string[] ListDirectory() {
        var list = new List<string>();

        var request = createRequest(WebRequestMethods.Ftp.ListDirectory);

        using (var response = (FtpWebResponse)request.GetResponse()) {
            using (var stream = response.GetResponseStream()) {
                using (var reader = new StreamReader(stream, true)) {
                    while (!reader.EndOfStream) {
                        list.Add(reader.ReadLine());
                    }
                }
            }
        }

        return list.ToArray();
    } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-07-11T15:53:24.150

这是获取 FTP 目录的所有文件和文件夹的好帮手：

```
public static IEnumerable<string> GetFilesInFtpDirectory(string url, string username, string password)
{
    // Get the object used to communicate with the server.
    var request = (FtpWebRequest)WebRequest.Create(url);
    request.Method = WebRequestMethods.Ftp.ListDirectoryDetails;
    request.Credentials = new NetworkCredential(username,password);

    using (var response = (FtpWebResponse) request.GetResponse())
    {
        using (var responseStream = response.GetResponseStream())
        {
            var reader = new StreamReader(responseStream);
            while (!reader.EndOfStream)
            {
                var line = reader.ReadLine();
                if (string.IsNullOrWhiteSpace(line) == false)
                {
                    yield return line.Split(new[] { ' ', '\t' }).Last();    
                }
            }
        }
    }
} 
```

在这里找到：[http ://www.snippetsource.net/Snippet/128/get-all-files-of-an-ftp-directory-in-c](http://www.snippetsource.net/Snippet/128/get-all-files-of-an-ftp-directory-in-c)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T23:07:26.727

我找到了答案，我做了一些试验，现在它在列表视图中显示文件，谢谢罗伯特哈维♦</p>

```
private void ConnectBtn_Click(object sender, EventArgs e)
    {
        ListDirectory();
    }

    public string[] ListDirectory()
    {
        var list = listView1;

        var request = createRequest(TxtServer.Text, WebRequestMethods.Ftp.ListDirectory);

        using (var response = (FtpWebResponse)request.GetResponse())
        {
            using (var stream = response.GetResponseStream())
            {
                using (var reader = new StreamReader(stream, true))
                {
                    while (!reader.EndOfStream)
                    {
                        list.Items.Add(reader.ReadLine());
                    }
                }
            }
        } List<string> l = new List<string>();
        return l.ToArray();
    }

    private FtpWebRequest createRequest(string uri, string method)
    {
        var r = (FtpWebRequest)WebRequest.Create(uri);

        r.Credentials = new NetworkCredential(TxtUsername.Text, TxtPassword.Text);
        r.Method = method;

        return r;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-28T11:17:44.200

此代码可用于从 ftp 获取文件列表

```
private void ftpFileRead()
{
  FtpWebRequest Request = (FtpWebRequest)WebRequest.Create("your ftpAddress");
  Request.Method = WebRequestMethods.Ftp.ListDirectory;     
  Request.Credentials = new NetworkCredential(your ftp username,your ftp password);
  FtpWebResponse Response = (FtpWebResponse)Request.GetResponse();
  Stream ResponseStream = Response.GetResponseStream();
  StreamReader Reader = new StreamReader(ResponseStream);

  ListBox1.Items.Add(Response.WelcomeMessage);
  while (!Reader.EndOfStream)//Read file name   
  {
    ListBox1.Items.Add(Reader.ReadLine().ToString());
  }
  Response.Close();
  ResponseStream.Close();
  Reader.Close();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-06T07:24:21.240

您可以使用此方法。

```
 public static string[] GetFiles(string path, NetworkCredential Credentials, SearchOption searchOption)
    {
        var request = (FtpWebRequest)WebRequest.Create(path);
        request.Method = WebRequestMethods.Ftp.ListDirectoryDetails;
        request.Credentials = Credentials;
        List<string> files = new List<string>();
        using (var response = (FtpWebResponse)request.GetResponse())
        {
            using (var responseStream = response.GetResponseStream())
            {
                var reader = new System.IO.StreamReader(responseStream);
                while (!reader.EndOfStream)
                {
                    var line = reader.ReadLine();
                    if (string.IsNullOrWhiteSpace(line) == false)
                    {
                        if (!line.Contains("<DIR>"))
                        {
                            string[] details = line.Split(new string[] { " " }, StringSplitOptions.RemoveEmptyEntries);
                            string file = line.Replace(details[0], "")
                                .Replace(details[1], "")
                                .Replace(details[2], "")
                                .Trim();
                            files.Add(file);
                        }
                        else
                        {
                            if (searchOption == SearchOption.AllDirectories)
                            {
                                string dirName = line.Split(
                                        new string[] { "<DIR>" },
                                        StringSplitOptions.RemoveEmptyEntries
                                        ).Last().Trim();
                                string dirFullName = String.Format("{0}/{1}", path.Trim('/'), dirName);
                                files.AddRange(GetFiles(dirFullName, Credentials, searchOption));
                            }
                        }
                    }
                }
            }
        }
        return files.ToArray();
    } 
```

# php - Insert Into database upon image upload?

> ID：13923195
> 
> 赞同：0
> 
> 时间：2012-12-17T22:19:42.033
> 
> 标签：php, mysql, image, upload

Hi i am trying to make my image upload script insert the file name as well as date_added, user_id and id into my database upon upload into the file directory.

At the moment it uploads and stores it into a file directory but i can't get it to insert into the database.

The table name is ptb_photos and the columns are id, user_id (id = user_id), file_name and date_added.

Here's my code, can someone let me know where i'm going wrong. I'm new to php and still learning so apologies if it's completely wrong.

```
<?php
session_start()
?>
<?
$sql=mysql_query("INSERT INTO ptb_photos SET file_name ='".addslashes($filename)."' WHERE id=".$_SESSION['user_id']." AND user_id=".$_SESSION['user_id'].""); 

// LOG
$log = '=== ' . @date('Y-m-d H:i:s') . ' ===============================' . "\n"
        . 'FILES:' . print_r($_FILES, 1) . "\n"
        . 'POST:' . print_r($_POST, 1) . "\n";
$fp = fopen('upload-log.txt', 'a');
fwrite($fp, $log);
fclose($fp);

// Result object
$r = new stdClass();
// Result content type
header('content-type: application/json');

// Maximum file size
$maxsize = 10; //Mb
// File size control
if ($_FILES['xfile']['size'] > ($maxsize * 1048576)) {
    $r->error = "Max file size: $maxsize Kb";
}

// Uploading folder
$folder = 'files/';
if (!is_dir($folder))
    mkdir($folder);

// If specifics folder 
$folder .= $_POST['folder'] ? $_POST['folder'] . '/' : '';
if (!is_dir($folder))
    mkdir($folder);

// PASS USER_ID HERE
$folder2 = '../'. '../'. 'data/'. 'photos/'. $_SESSION['user_id'] . '/';
if (!is_dir($folder2))
    mkdir($folder2);

// New directory with 'files/USER_SESSION_ID/'
$folder = $newDir . $folder2;

// If the file is an image
if (preg_match('/image/i', $_FILES['xfile']['type'])) {

    $filename = $_POST['value'] ? $_POST['value'] :
            $folder . 'pic1.jpg';
} else {

    $tld = split(',', $_FILES['xfile']['name']);
    $tld = $tld[count($tld) - 1];
    $filename = $_POST['value'] ? $_POST['value'] :
            $folder . sha1(@microtime() . '-' . $_FILES['xfile']['name']) . $tld;
}

// Supporting image file types
$types = Array('image/png', 'image/gif', 'image/jpeg');
// File type control
if (in_array($_FILES['xfile']['type'], $types)) {
    // Create an unique file name    
    // Uploaded file source
    $source = file_get_contents($_FILES["xfile"]["tmp_name"]);
    // Image resize
    imageresize($source, $filename, $_POST['width'], $_POST['height'], $_POST['crop'], $_POST['quality']);
} else
// If the file is not an image
if (in_array($_FILES['xfile']['type'], $types)) 
    move_uploaded_file($_FILES["xfile"]["tmp_name"], $filename);

// File path
$path = str_replace('upload_image_1.php', '', $_SERVER['SCRIPT_NAME']);

// Result data
$r->filename = $filename;
$r->path = $path;
$r->img = '<img src="' . $path . $filename . '" alt="image" />';

// Return to JSON
echo json_encode($r);

// Image resize function with php + gd2 lib
function imageresize($source, $destination, $width = 0, $height = 0, $crop = false, $quality = 80) {
    $quality = $quality ? $quality : 80;
    $image = imagecreatefromstring($source);
    if ($image) {
        // Get dimensions
        $w = imagesx($image);
        $h = imagesy($image);
        if (($width && $w > $width) || ($height && $h > $height)) {
            $ratio = $w / $h;
            if (($ratio >= 1 || $height == 0) && $width && !$crop) {
                $new_height = $width / $ratio;
                $new_width = $width;
            } elseif ($crop && $ratio <= ($width / $height)) {
                $new_height = $width / $ratio;
                $new_width = $width;
            } else {
                $new_width = $height * $ratio;
                $new_height = $height;
            }
        } else {
            $new_width = $w;
            $new_height = $h;
        }
        $x_mid = $new_width * .5;  //horizontal middle
        $y_mid = $new_height * .5; //vertical middle
        // Resample
        error_log('height: ' . $new_height . ' - width: ' . $new_width);
        $new = imagecreatetruecolor(round($new_width), round($new_height));
        imagecopyresampled($new, $image, 0, 0, 0, 0, $new_width, $new_height, $w, $h);
        // Crop
        if ($crop) {
            $crop = imagecreatetruecolor($width ? $width : $new_width, $height ? $height : $new_height);
            imagecopyresampled($crop, $new, 0, 0, ($x_mid - ($width * .5)), 0, $width, $height, $width, $height);
            //($y_mid - ($height * .5))
        }
        // Output
        // Enable interlancing [for progressive JPEG]
        imageinterlace($crop ? $crop : $new, true);

        $dext = strtolower(pathinfo($destination, PATHINFO_EXTENSION));
        if ($dext == '') {
            $dext = $ext;
            $destination .= '.' . $ext;
        }
        switch ($dext) {
            case 'jpeg':
            case 'jpg':
                imagejpeg($crop ? $crop : $new, $destination, $quality);
                break;
            case 'png':
                $pngQuality = ($quality - 100) / 11.111111;
                $pngQuality = round(abs($pngQuality));
                imagepng($crop ? $crop : $new, $destination, $pngQuality);
                break;
            case 'gif':
                imagegif($crop ? $crop : $new, $destination);
                break;
        }
        @imagedestroy($image);
        @imagedestroy($new);
        @imagedestroy($crop);

    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:10:54.090

尝试这个：

```
$sql = mysql_query('INSERT INTO ptb_photos (file_name, id, user_id) 
values  ("$filename","$_SESSION[user_id]", "$_SESSION[user_id]"'); 
```

顺便说一句，INSERT INTO 语法永远不能有 WHERE 子句，除非你使用：

```
INSERT INTO ... SELECT * FROM ... WHERE 
```

# java - inheritance class fraction/integer

> ID：13923199
> 
> 赞同：0
> 
> 时间：2012-12-17T22:20:01.913
> 
> 标签：java, inheritance, runtime-error

So, I created a simple class named Test, as follows:

```
import prog.utili.IntegerB;
//It's a custom class
class Test
{
   public static void main(String[] args)
   {
      IntegerB a = new IntegerB(1);
      IntegerB b = new IntegerB(2);
      IntegerB sum = a.plus(b);
      System.out.println(sum);
   }
} 
```

I wanted to practise with inheritance so I created two custom classes. Fraction...

```
package prog.utili;
public class Fraction
{
   private int num;
   private int den;

   public Fraction(int x, int y)
   {
      [...]
   }

   public Fraction(int x)
   {
      this(x, 1);
   }

   public Fraction plus(Fraction f)
   {
      int n = this.num * f.den + this.den * f.num;
      int d = this.den * f.den;
      return new Fraction(n, d);
   }

   [...]
} 
```

...and IntegerB:

```
package prog.utili;
public class IntegerB extends Fraction
{
   public IntegerB(int num)
   {
      super(num);
   }

   public IntegerB plus(IntegerB other)
   {
      return (IntegerB)this.plus(other);
   }
} 
```

The problem is I keep getting the same error:

```
at prog.utili.IntegerB.plus(IntegerB.java:11) 
```

I know I could simply solve the problem by just deleting the last method on IntegerB and replacing the 9th line of Test.java with

```
IntegerB sum = (IntegerB)a.plus(b) 
```

but I absolutely want to do it using the inheritance rules over the "plus" method!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:33:40.947

要实现该方法`plus(IntegerB)`，您调用`plus(IntegerB)`，调用`plus(IntegerB)`等，等等，直到您收到 StackOverflowError。

为您的方法提供一个实际的实现：

```
return new IntegerB(this.getNum() + other.getNum()); 
```

或者

```
return new IntegerB(super.plus(other).getNum()); 
```

另请注意，将 Test.java 的最后一行替换为

```
IntegerB sum = (IntegerB)a.plus(b); 
```

行不通，因为`plus()`in 中的方法`Fraction`不返回一个`IntegerB`，而是一个分数。因此，您将获得 ClassCastException。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T02:41:26.677

这里的问题是它`IntegerB.plus`不会覆盖`Fraction.plus`，它会重载它。这是因为参数类型不同。因此，当`IntegerB.plus`调用时`this.plus(other)`，它最终会调用自身，然后调用自身，然后调用自身，直到您获得 StackOverflow（从而将您发送到 stackoverflow : )）。

看起来你想打电话`plus(Fraction)`而不是`plus(IntegerB)`. 为此，您可以明确地向上转型`other`：

```
return plus((Fraction) other); 
```

这个转换除了告诉编译器你想调用处理`Fraction`s 的 plus 版本之外没有任何作用，即使你知道你有一个`IntegerB`.

但是，此方法不会返回 a `IntegerB`，而只是返回分母为 1 的 a 。如果结果`Fraction`的分母为 1，您可以重写`plus`以返回 an ，但这可能会导致不等于的`IntegerB`意外情况，因为 one 是一段时间另一个是. 或者，您可以尽可能返回对象。`a.plus(b)``b.plus(a)``Fraction``IntegerB``IntegerB``Fraction.plus`

# windows-phone-8 - 确定在 Windows Phone 8 应用程序中按下的循环图像

> ID：13923202
> 
> 赞同：0
> 
> 时间：2012-12-17T22:20:22.787
> 
> 标签：windows-phone-8

我想知道当用户按下动态磁贴以启动应用程序时，是否可以找到向用户显示的图像。我知道如何判断按下了哪些活动磁贴，而不是显示了哪些图像。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:14:05.233

不，这不对。如果您想要有选择性的行为，您应该固定多个图块。

# c# - Data Driven MSTest: DataRow is always null

> ID：13923203
> 
> 赞同：3
> 
> 时间：2012-12-17T22:20:24.297
> 
> 标签：c#, visual-studio, mstest, vs-unit-testing-framework

I am having a problem using Visual Studio data driven testing. I have tried to deconstruct this to the simplest example. I am using Visual Studio 2012\. I create a new unit test project. I am referencing system data.

My code looks like this:

```
namespace UnitTestProject1 
{
    [TestClass]
    public class UnitTest1 
    {
        [DeploymentItem(@"OrderService.csv")]
        [DataSource("Microsoft.VisualStudio.TestTools.DataSource.CSV", "OrderService.csv", "OrderService#csv", DataAccessMethod.Sequential)]
        [TestMethod]
        public void TestMethod1() 
        {
            try 
            {
                Debug.WriteLine(TestContext.DataRow["ID"]);    
            } 
            catch (Exception ex) 
            {
                Assert.Fail();
            }
        }

        public TestContext TestContext { get; set; }
    }
} 
```

I have a very small csv file that I have set the Build Options to to 'Content' and 'Copy Always'. I have added a `.testsettings` file to the solution, and set enable deployment, and added the csv file.

I have tried this with and without `|DataDirectory|`, and with/without a full path specified (the same path that I get with Environment.CurrentDirectory). I've tried variations of "../" and "../../" just in case. Right now the csv is at the project root level, same as the .cs test code file.

I have tried variations with xml as well as csv.

TestContext is not null, but DataRow always is.

I have not gotten this to work despite a lot of fiddling with it. I'm not sure what I'm doing wrong.

Does mstest create a log anywhere that would tell me if it is failing to find the csv file, or what specific error might be causing DataRow to fail to populate?

I have tried the following csv files:

ID

1

2

3

4

and

ID, Whatever

1,0

2,1

3,2

4,3

So far, no dice.

I am using ReSharper, could it be interfering in some way?

**Updated** I have it mostly working now! I am able to use XML, but when I use CSV my column, which is named ID comes back as ï»¿ID

Not sure why. I've checked the actual file of course, and no weird characters are present.

For anyone having a similar problem, I turned off Just My Code and enabled Net Framework source stepping, etc. so that I could get more detailed debug information. This allowed me to determine that ReSharper was causing me problems. I disabled resharper and modified my attributes like this:

```
[DeploymentItem("UnitTestProject1\\OrderService.csv")]
[DataSource("Microsoft.VisualStudio.TestTools.DataSource.CSV", "|DataDirectory|\\bin\\Debug\\OrderService.csv", "OrderService#csv", DataAccessMethod.Sequential)] 
```

And it worked (except as noted). I am still suspicious of the "bin\debug" in my path, but I'm just happy my DataRow is no longer null. Thanks!

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-20T08:01:24.890

今天在尝试使数据驱动测试与 CSV 输入文件一起工作时，我遇到了类似的问题。第一列的名称在它的开头有一些垃圾，即`ï»¿ID`而不是只是`ID`.

原来这是一个编码问题。CSV 文件以 UTF-8 保存，它在开头添加了一个[字节顺序标记，显然使解析器感到困惑。](http://en.wikipedia.org/wiki/Byte_order_mark)一旦我以 ANSI 编码保存文件，它就按预期工作。

我知道这是一个老问题，但这些信息可能会帮助其他人最终访问此页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:28:11.123

您是否尝试过通过属性窗口添加它？

*   转到测试菜单 -> Windows -> 测试视图 -> 将加载测试。
*   单击测试以更改 ie`TestMethod1`并按 F4（属性）。
*   查找“数据源”并单击它旁边的省略号
*   它将引导您完成一个正确设置属性的向导`TestMethod`

您已经正确设置了部署部分，这通常是最大的绊脚石。

您也不必将构建操作设置为始终复制，因为部署会为您执行此操作。如果您将用于配置的 .xml 文件或图标/图像等项目包含在项目中，则使用此选项。

**更新1：**

也可以试试[MSDN 上的这个教程](http://msdn.microsoft.com/en-us/library/ms182527.aspx)。

**更新 2：**

试试[这个帖子](https://stackoverflow.com/questions/7509758/mstest-datasourceattribute-how-to-get-it-working-with-a-runtime-generated-fil)，涉及 ProcMon

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T20:22:41.990

我看到您说您尝试将 CSV 本身放入 testsettings 文件中，但是您是否尝试过仅放入目录中？

```
<Deployment>
 <DeploymentItem filename="Test\Data\" />
</Deployment> 
```

然后您的 DataSource 行将如下所示： `[DataSource("Microsoft.VisualStudio.TestTools.DataSource.CSV", "|DataDirectory|\\YOURCSV.csv", "YOURCSV#csv", DataAccessMethod.Sequential)]`

如果您这样做，则无需指定 DeploymentItem 行。

我们的文件夹结构如下所示：Trunk\Test\Test\Data

我们在部署中包括：Test\Data

然后我们通过 |DataDirectory|\ 访问 Test\Data

所有 CSV 都位于 \Data 文件夹中

# c - 显示 C 中 2 个 char * 字符串之间的区别

> ID：13923205
> 
> 赞同：2
> 
> 时间：2012-12-17T22:20:30.507
> 
> 标签：c, string

我是 C 的新手，我正在尝试找出解决这个问题的最佳方法。我有 2 个字符串都是`char *`'s。

它们在字符串本身中有多个 \n 字符，它们的长度通常约为 1000 个字符。我只想显示不同的单行。通常，整个字符串中只有一个字符（或相对较小的数字）会有所不同。所以我希望做到这一点，这样我就可以只显示一个更改的行（从 \n 到 \n 的整个字符串）。

我不要求任何人编写代码，甚至提供代码示例，只是理论上最有效的方法是什么？

我一直在研究使用 strtok，使用 '\n' 符号作为分隔符，然后使用 strcmp 比较两个字符串，如果它们不相等，那么我可以将该字符串添加到“old_data”和“new_data” “ 大批。这是一个不好的方法吗？

任何建议都会有很大帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:32:53.657

听起来您走在正确的轨道上：`strsep`会让您通过换行符将字符串分块。要记住的一件事是，它对原字符串进行操作，并且不分配任何新内存，这既是一种祝福，也是一种诅咒。

可能最节省内存的方法是查看分配指针数组以保存“old_data”和“new_data”值，然后将指向原始字符串的指针直接保存到原始字符串中，而不是复制字符串本身. 只要您原来的两个字符串会留在您身下/不会从您身下释放，这可以为您节省大量内存。

如果您永远不会从数组中删除字符串，那么实现数组的一种简单（但有效）的方法是维护两个状态变量——一个计数和一个容量——并且每次你需要时将容量加倍溢出数组。例如：

```
char **strArray = NULL;
unsigned int capacity = 10;
unsigned int count = 0;

strArray = malloc(capacity * sizeof(char *));

/* on insert */
if (count == capacity)
{
    capacity *= 2;
    strArray = realloc(strArray, capacity * sizeof(char *));
}

strArray[count++] = pointerIntoOriginalString; 
```

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:36:53.773

strtok() 不可重入。如果要使用 strtok 执行此操作，则必须一个接一个地遍历数组。我推荐使用 strtok_r()，它是 strtok 的可重入实现。

您需要担心的另一个考虑因素是确保您的 old_data 和 new_data 数组足够大或可调整大小。马特的回答显示了一个调整数组大小的简单示例，尽管如果您是 C 新手，您可能只想声明如下内容：

```
char *new_data[2000];
char *old_data[2000]; 
```

特别是因为听起来您很清楚缓冲区中有多少行。

# objective-c - 编写延迟加载宏实现器是否可能/聪明？

> ID：13923207
> 
> 赞同：1
> 
> 时间：2012-12-17T22:20:38.577
> 
> 标签：objective-c, macros

我的代码（尤其是当我更多地了解[TDD](http://en.wikipedia.org/wiki/Test-driven_development)时）有很多延迟加载的属性，例如：

```
@interface MyClass ()

@property (nonatomic, strong) MyFoo *myFoo;

@end

@implementation MyClass

- (MyFoo *)myFoo {
   if (!_myFoo) {
     _myFoo = [MyFoo alloc] sharedFoo]; // or initWithBar:CONST_DEF_BAR or whatever
   }
   return _myFoo;
}

@end 
```

或者，更好的线程安全版本：

```
- (MyFoo *)myFoo {
  static dispatch_once_t onceToken;
  dispatch_once(&onceToken, ^{
    _storeHelper = [SHStoreHelper sharedStoreHelper];
  });
} 
```

我有点希望 Apple 将其作为属性的一个方面进行自动代码生成，例如：

```
@property (lazyload) MyFoo *myFoo; 
```

不过，除此之外，我希望有一个用于实现位的宏，例如

```
#define LAZY_ALLOC(x, y, _y, a, i) -(x *)y { if (!_y) { _y = [[x a] i]; } return _y } 
```

然后不是你刚刚拥有的常规方法实现

```
LAZY_ALLOC(MyClass, myClass, _myClass, alloc, init) 
```

这对于想要的课程来说足够灵活

```
LAZY_ALLOC(OtherClass, otherClass, _otherClass, sharedClass, nil) 
```

或者

```
LAZY_ALLOC(OtherClass, otherClass, _otherClass, alloc, initWithFrame:SOME_FRAME) 
```

1) 预处理器需要_y。有没有办法让它构造_autosynthesized ivar而不单独传递它？2）这有大问题吗？对我来说，它提高了可读性，因为它本质上说“哦，又是那个东西”比完全写出来的版本更快 3）你认为它的风格很恶心吗？风格上很棒吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:44:52.553

我想你想要的是`##`。你可以把它写成：

```
#define LAZY_ALLOC(type, name, initialValue) \
    -(type *)name { \
        static dispatch_once_t onceToken; \
        dispatch_once(&onceToken, ^{ \
            if (! _ ## name) { \
                _ ## name = (initialValue); \
            } \
        } \
        return _ ## name; \
    } 
```

### 编辑：

需要明确的是，我不会在单例的`sharedInstance`-type 方法之外使用这个特殊的习惯用法进行延迟加载。由于静态 dispatch_once_t，此代码只会对*每个类（而不是每个实例）执行一次延迟加载。*我只是从问题中复制代码并将其转换为宏模板来说明该技术，但我觉得我应该澄清这一点。

就个人而言，对于延迟加载普通实例变量，我会使用非线程安全版本，如果您需要线程安全，则只需切换到急切加载或专门处理这种情况。有一些技术可以将延迟加载与访问器中的线程安全相结合，但是：

1.  他们相当慢。

2.  很少同时真正需要两者。

3.  除了在访问器方法中添加互斥锁之外，您可能还需要为线程安全做一些特殊的架构设计。

所以我不会将这种情况合并到标准模板宏中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:40:14.700

写一个方法`+(id) lazyLoad:(Class)class sharedPointer:(NSObject**)ptrAddr`或类似的东西。使其成为 LazyLoader 类的方法，该类只实现该方法。

要使用它：

```
- (MyFoo *)myFoo {
    return [LazyLoader lazyLoad:[MyFoo class] sharedPointer:&_myFoo];
} 
```

可能需要在 sharedPointer parm 上添加一些 ARC 甜味剂，但基本上这应该可以工作，并且可以按照您的意愿（如果您愿意的话）使其成为线程安全的。

（我将把它作为练习留给读者了解如何使用替代的 init 方法。）

# vb6 - 返回指定字符串位置的字符

> ID：13923209
> 
> 赞同：0
> 
> 时间：2012-12-17T22:20:49.710
> 
> 标签：vb6

我正在寻找 Visual Basic 6 中的一个函数，它允许我在字符串中指定一个位置，然后返回该位置的字符。

为了澄清，假设我有字符串“541”。位置 2 的字符（或者实际上可能 pos 2 是 pos 1？）是“4”。我希望返回该值。

我已经尝试过 Mid()、Left() 和 Right()，但没有找到让它返回中间字符的方法。

希望我的解释足以让您明白这一点。感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:26:02.613

我认为是`Mid(string, start position, length)`，例如`Mid("541", 2, 1)`

# matrix - 指定块矩阵的维度

> ID：13923211
> 
> 赞同：0
> 
> 时间：2012-12-17T22:21:06.473
> 
> 标签：matrix, latex

我最近开始学习 LaTeX，虽然我通过在线查找（尤其是这里）找到了几乎所有问题的答案，但我还想做一件事，但对于我正在写的文章却做不到：

我希望能够在矩阵下方指定维度和“子维度”。为了更清楚，让我们举个例子：

```
$ D =
  \underbracket{\begin{pmatrix}
   D_1 & 0      & 0   &   &        &    \\
   0   & \ddots &     &   &    {\textrm{\huge 0}}    &    \\
   0   & 0      & D_n &   &        &    \\
       &        &     &   &        &    \\
       &   \textrm{\huge 0}     &     &   &   {\textrm{\huge 0}}     &    \\
       &        &     &   &        &    \\
  \end{pmatrix}}_N $ 
```

这给出了一个很好的矩阵，其维度`N`指定为矩阵下方的括号。很好，但是我想添加第二个括号来指定更`n`短的矩阵正下方（可能在第一个主括号上方）的内部块矩阵的较小尺寸，即我希望它从`1`to`n`和不是一直低于矩阵。

我对任何解决方案持开放态度，但对我来说越简单越好:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T06:19:43.583

以下内容并不是真正令人眼前一亮，但它可能是您所追求的：

![在此处输入图像描述](../Images/2f90bf0053fb42d959aec7d3d7af6e7a.png)

```
\documentclass{article}
\usepackage{mathtools}% http://ctan.org/pkg/mathtools
\begin{document}
\[
D =
  \underbracket{\begin{pmatrix}
   D_1 & 0      & 0   &   &        &    \\
   0   & \ddots &     &   &    {\textrm{\huge 0}}    &    \\
   0   & 0      & D_n &   &        &    \\
       &        &     &   &        &    \\
       &   \textrm{\huge 0}     &     &   &   {\textrm{\huge 0}}     &    \\
       &        &     &   &        &    \\
  \end{pmatrix}}_N
\]

\[
  D= \underbracket[.4pt]{\left(\begin{array}{@{}c@{\quad}c}
    \underbracket[.4pt]{\begin{array}{ccc}
      D_1 & \vphantom{\ddots}0 & 0 \\
      0 & \ddots & 0 \\
      0 & \vphantom{\ddots}0 & D_n
    \end{array}}_{n} & \text{\huge 0} \\ \\
    \text{\huge 0} & \text{\huge 0}
  \end{array}\right)}_{N}
\]
\end{document} 
```

的使用`\vphantom`确保“内部矩阵”的行高在所有行中都相似（实际上没有打印`\ddots`）。

我采用了更传统的方法（使用`array`），而不是`pmatrix`. 优点是您可以控制对齐方式。

# spring - Spring 3.1 Hibernate 4 not rolling back JDBC transaction

> ID：13923212
> 
> 赞同：3
> 
> 时间：2012-12-17T22:21:12.113
> 
> 标签：spring, hibernate, transactions, rollback, jdbctemplate

I am having trouble setting up a JUnit test that will rollback. I've read a few of these posts here on SO before deciding to write a question, as none seems to be the answer to my problem.

The second test case is failing because data is inserted and persisted in DB from the first test case.

Here's the JUnit test:

```
package com.company.group.spring.dao;

import static org.junit.Assert.assertNotNull;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;
import org.springframework.test.annotation.Rollback;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.TestExecutionListeners;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.support.DependencyInjectionTestExecutionListener;
import org.springframework.test.context.transaction.TransactionConfiguration;
import org.springframework.test.context.transaction.TransactionalTestExecutionListener;
import org.springframework.transaction.annotation.Transactional;

import com.company.group.spring.model.BusObj;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations={"classpath:NAME_OF_CONFIG_FILE.xml"})
@Transactional
@TransactionConfiguration(transactionManager = "txManager", defaultRollback = true)
@TestExecutionListeners({TransactionalTestExecutionListener.class,
    DependencyInjectionTestExecutionListener.class}) 
public class PerPartsWCDAOTest {

    @Autowired
    @Qualifier("myBusObjDAO")
    private BusObjDAO busObj_dao;

    @Transactional
    @Test
    public void testInsertRollback() {
        try {
        BusObj busObj = new BusObj("some data...");

        assertNotNull(busObj_dao);
        assertNotNull(busObj);

        busObj_dao.insert(perPartWC);
        }
        catch (NullPointerException e) {
            e.printStackTrace();
        }
    }

    @Transactional
    @Rollback(false)
    @Test
    public void testInsert() {
        BusObj busObj2 = new BusObj("some data...");

        busObj_dao.insert(perPartWC2);
    }

} 
```

Here's the DAOImpl class (the class I'm trying to test):

```
package com.company.group.spring.dao;

import javax.sql.DataSource;

import org.apache.log4j.Logger;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.namedparam.BeanPropertySqlParameterSource;
import org.springframework.jdbc.core.namedparam.NamedParameterJdbcTemplate;
import org.springframework.jdbc.core.namedparam.SqlParameterSource;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Transactional;

import com.company.group.spring.model.BusObj;

@Repository("myBusObjDAO")
public class myBusObjDAOImpl implements myBusObjDAO {

private NamedParameterJdbcTemplate jdbcTemplate;

@Autowired
public void setDataSource(DataSource dataSource) {
    this.jdbcTemplate = new NamedParameterJdbcTemplate(dataSource);
}

@Override
public void insert(BusObj someObj) {
    String sql = "insert into TABLE (args...) " +
            "VALUES (:named_params....)";

    SqlParameterSource paramSource = new BeanPropertySqlParameterSource(someObj);

    jdbcTemplate.update(sql, paramSource);
} 
```

}

Part of the relevant config:

```
 <tx:annotation-driven transaction-manager="txManager" proxy-target-class="true" />

  <bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource">
      <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>
      <property name="url" value="jdbc:oracle:thin:@SERVER:PORT:DB"/>
      <property name="username" value="USER"/>
      <property name="password" value="XXXXXX"/>

  </bean> 
```

Edit: +debug print

```
2012-12-18 08:50:42,177 [main] DEBUG [org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction()] Creating new transaction with name [com.company.group.spring.service.MyClassService.create]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT

2012-12-18 08:50:42,342 [main] DEBUG [org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin()] Opened new Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] for Hibernate transaction

2012-12-18 08:50:42,344 [main] DEBUG [org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin()] Preparing JDBC Connection of Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]

2012-12-18 08:50:42,361 [main] DEBUG [org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin()] Exposing Hibernate transaction as JDBC transaction [org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler@128647a[valid=true]]

2012-12-18 08:50:42,390 [main] DEBUG [org.springframework.jdbc.core.JdbcTemplate.update()] Executing prepared SQL update

2012-12-18 08:50:42,391 [main] DEBUG [org.springframework.jdbc.core.JdbcTemplate.execute()] Executing prepared SQL statement [insert into TABLE (args...) VALUES (?, ?, SYSDATE,?, ?, SYSDATE, ?,?, ?)]

2012-12-18 08:50:42,391 [main] DEBUG [org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection()] Fetching JDBC Connection from DataSource

2012-12-18 08:50:42,657 [main] DEBUG [org.springframework.jdbc.datasource.DataSourceUtils.doGetConnection()] Registering transaction synchronization for JDBC Connection

2012-12-18 08:50:42,671 [main] DEBUG [org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement()] SQL update affected 1 rows

2012-12-18 08:50:42,678 [main] DEBUG [org.springframework.jdbc.datasource.DataSourceUtils.doReleaseConnection()] Returning JDBC Connection to DataSource

2012-12-18 08:50:42,688 [main] DEBUG [org.springframework.transaction.support.AbstractPlatformTransactionManager.processRollback()] Initiating transaction rollback

2012-12-18 08:50:42,688 [main] DEBUG [org.springframework.orm.hibernate4.HibernateTransactionManager.doRollback()] Rolling back Hibernate transaction on Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]

2012-12-18 08:50:42,693 [main] DEBUG [org.springframework.orm.hibernate4.HibernateTransactionManager.doCleanupAfterCompletion()] Closing Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] after transaction 
```

Update: I noticed in the log, it is trying to rollback a Hibernate transaction (but this is JDBC). Then noticed the class for "txManager" is currently **org.springframework.orm.hibernate4.HibernateTransactionManager**, so I experimented with **org.springframework.jdbc.datasource.DataSourceTransactionManager** and *voila*, rollback worked. So I think my problem is more specifically how I'm configuring to use Hibernate and JDBC... I still don't know what is wrong.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:01:45.227

您的 JUnit 和 DAO 类看起来不错。

问题可能是在事务回滚之前连接是自动提交的。您可以更改 dataSource bean 以包含*defaultAutoCommit*属性吗

```
<bean id="dataSource" destroy-method="close" class="org.apache.commons.dbcp.BasicDataSource">
      <property name="driverClassName" value="oracle.jdbc.driver.OracleDriver"/>
      <property name="url" value="jdbc:oracle:thin:@SERVER:PORT:DB"/>
      <property name="username" value="USER"/>
      <property name="password" value="XXXXXX"/>
      <property name="defaultAutoCommit" value="false" /> 
</bean> 
```

如果这不起作用，您可以粘贴控制台日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T16:29:02.310

我的问题的解决方案是为 HibernateTransactionManager 指定数据源。这是有关[HibernateTransactionManager](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/orm/hibernate4/HibernateTransactionManager.html)的文档。

所以我想没有发布我`txManager`在原始帖子中定义的方式是一个错误。

```
 <bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="mySessionFactory"/>
  </bean> 
```

变成：

```
 <bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="mySessionFactory"/>
    <property name="dataSource" ref="dataSource" />
  </bean> 
```

我还添加`<property name="dataSource"><ref local="dataSource"/></property>`了 SessionFactory 定义，但如果我只担心 JdbcTemplate，它似乎没有必要。如果 HQL 混合在那里，怀疑它是需要的。

这是调试打印工作时的样子。我看到的唯一区别`Returning JDBC Connection to DataSource`是在启动回滚之前这条线不存在

```
2012-12-19 08:14:29,455 [main] DEBUG [org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction()] Creating new transaction with name [com.company.group.spring.service.MyClassService.create]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; ''

2012-12-19 08:14:29,512 [main] DEBUG [org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin()] Opened new Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] for Hibernate transaction

2012-12-19 08:14:29,514 [main] DEBUG [org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin()] Preparing JDBC Connection of Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]

2012-12-19 08:14:29,539 [main] DEBUG [org.springframework.orm.hibernate4.HibernateTransactionManager.doBegin()] Exposing Hibernate transaction as JDBC transaction [org.hibernate.engine.jdbc.internal.proxy.ConnectionProxyHandler@1289e48[valid=true]]

2012-12-19 08:14:29,558 [main] DEBUG [com.company.group.spring.dao.MyClassDAOImpl.insert()] Session Factory is: org.hibernate.internal.SessionFactoryImpl@1285252

2012-12-19 08:14:29,569 [main] DEBUG [org.springframework.jdbc.core.JdbcTemplate.update()] Executing prepared SQL update

2012-12-19 08:14:29,570 [main] DEBUG [org.springframework.jdbc.core.JdbcTemplate.execute()] Executing prepared SQL statement [insert into MY_CLASS (COL1, COL2, COL3, COL4, COL5, COL6, COL7, COL8, COL9) VALUES (?, ?, SYSDATE,?, ?, SYSDATE, ?,?, ?)]

2012-12-19 08:14:29,608 [main] DEBUG [org.springframework.jdbc.core.JdbcTemplate$2.doInPreparedStatement()] SQL update affected 1 rows

2012-12-19 08:14:29,611 [main] DEBUG [org.springframework.transaction.support.AbstractPlatformTransactionManager.processRollback()] Initiating transaction rollback

2012-12-19 08:14:29,612 [main] DEBUG [org.springframework.orm.hibernate4.HibernateTransactionManager.doRollback()] Rolling back Hibernate transaction on Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])]

2012-12-19 08:14:29,680 [main] DEBUG [org.springframework.orm.hibernate4.HibernateTransactionManager.doCleanupAfterCompletion()] Closing Hibernate Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] after transaction 
```

# javascript - 等待来自外部 API 的数据

> ID：13923222
> 
> 赞同：0
> 
> 时间：2012-12-17T22:21:55.160
> 
> 标签：javascript, html, google-maps

我正在尝试与基于纬度和经度数据的 Google Maps API 标记位置进行交互。我还想根据这个纬度和经度获取时区信息。为此，我使用了另一个外部 API，它接收纬度和经度并返回时间偏移量。然而，我的问题是，这一次数据在页面加载后返回。

在为用户加载页面后将此信息添加到页面的最佳方法是什么？我开始考虑使用回发，但在做了一些研究之后，我认为这不是解决我问题的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:25:55.453

在浏览器中，JavaScript 允许您在页面加载后联系服务器。这称为异步请求，是“AJAX”（异步 Java 和 XML）中的第一个“A”。

X 可能有点用词不当，因为人们很乐意通过这种机制传递整个 HTML 块、JSON（AJAJ？）或其他形式的数据而不是 XML。

我总是会使用一个框架（我个人的选择是 JQuery）来执行操作，因为框架编写者已经完成了让你跨浏览器工作的工作。

你可以使用这个：

[http://api.jquery.com/jQuery.get/](http://api.jquery.com/jQuery.get/) 或者如果返回数据是 JSON， [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)

这个函数是 JQuery 的一部分，一旦数据被加载，就会执行一个回调函数。然后，您的回调函数可以使用 JQuery 选择器来查找和更新有问题的元素。

如果您使用特定的代码示例更新您的问题，我可以更具体地回答我的问题。

看到代码示例后编辑：

看起来您的问题实际上是确定代码执行顺序之一。您的代码遵循此模式（稍微简化并重新排列）：

```
 var startTimeZone;

    jQuery(document).ready(function($) {
      $.ajax({
        url: "http://www.worldweatheronline.com/feed/tz.ashx?key=SecretKey&q=" + start_locale + "&format=json",
        dataType: "jsonp",
        success: function(parsed_json) {
          startTimeZone = parsed_json.data.time_zone[0].utcOffset;
          console.log("Callback: " + startTimeZone);
        },
        error: function(parsed_json) {

        }
      });
    });

    console.log("Main:" + startTimeZone); 
```

首先，不需要将 ajax 命令包装在文档就绪回调中 - 只需对整个代码执行一次，无论入口点在哪里。（我认为这是一种将执行延迟到以下代码之后的尝试。）（这里还有更多要学习的内容 - JQuery 为您提供了多个事件来帮助初始化您的代码并使用 DOM，请参阅[窗口。 onload 与 $(document).ready()](https://stackoverflow.com/questions/3698200/window-onload-vs-document-ready)的简要说明）

如果您运行上面的代码片段，您会发现控制台日志可能会显示：

```
Main: Undefined
Callback: [StartTimeZone] 
```

其中 [StartTimezone] 是来自服务器的响应。ajax 命令是异步的，这意味着它会启动并执行它的操作，只要它需要就可以，让代码在它之后运行，就好像什么都没发生一样。完成后，它会适当地调用“成功”或“错误”回调。因此，在定义变量之前调用“主”控制台日志。之后，对 ajax 调用的响应会触发回调 - 因此输出 StartTimeZone。

如果您不熟悉回调或习惯于不支持它们或经常使用它们的语言（如 PHP），您可能希望或希望代码在 ajax 调用时暂停，然后运行回调，然后继续与其余的代码。显然情况并非如此。

在这种简单的情况下，我只需将处理时区的代码移动到回调中，但您的代码还有一个问题 - 您需要两个值，您似乎需要通过单独的调用来检索它们。

在这种情况下，我们需要在运行使用它们的代码之前确保我们拥有这两个值。我们应该怎么做？

一个简单的解决方案是：

```
var startTimeZone;
var endTimeZone;

      $.ajax({
        url: "http://www.worldweatheronline.com/feed/tz.ashx?key=SecretKey&q=" + start_locale + "&format=json",
        dataType: "jsonp",
        success: function(parsed_json) {
          startTimeZone = parsed_json.data.time_zone[0].utcOffset;
          getEndTimeZone();
        },
        error: function(parsed_json) {
          //console.log("Error: " + parsed_json);
        }
      });

function getEndTimeZone() {
      $.ajax({
        url: "http://www.worldweatheronline.com/feed/tz.ashx?key=SecretKey&q=" + end_locale + "&format=json",
        dataType: "jsonp",
        success: function(parsed_json) {
          endTimeZone = parsed_json.data.time_zone[0].utcOffset;
          console.log(endTimeZone);
          processTimeZones();
        },
        error: function(parsed_json) {
          //console.log("Error: " + parsed_json);
        }
      });
}

function processTimeZones() {
    var timeZoneDifference = (endTimeZone * 3600000) - (startTimeZone * 3600000);
    // Do the rest of your processing here
} 
```

函数在被调用之前不会运行。此外，JavaScript 中的函数可以访问其包含范围内的变量（这意味着函数可以访问 startTimeZone 和 endTimeZone，它们是在函数本身之外定义的。）

上面的代码将在第一次 ajax 调用成功时调用 getEndTimeZone。getEndTimeZone 然后使用 ajax 调用来获取结束时区，然后在成功时调用 process 函数。这个函数肯定可以访问你需要的变量。

当然，我们现在在队列中等待处理两个请求。我们可以通过同时调用两者来加快速度，同时调用 process 函数，然后在进行处理之前确定我们是否有我们需要的数据：

```
var startTimeZone;
var endTimeZone;

      $.ajax({
        url: "http://www.worldweatheronline.com/feed/tz.ashx?key=SecretKey&q=" + start_locale + "&format=json",
        dataType: "jsonp",
        success: function(parsed_json) {
          startTimeZone = parsed_json.data.time_zone[0].utcOffset;
          processTimeZones();
        },
        error: function(parsed_json) {
          //console.log("Error: " + parsed_json);
        }
      });

      $.ajax({
        url: "http://www.worldweatheronline.com/feed/tz.ashx?key=SecretKey&q=" + end_locale + "&format=json",
        dataType: "jsonp",
        success: function(parsed_json) {
          endTimeZone = parsed_json.data.time_zone[0].utcOffset;
          console.log(endTimeZone);
          processTimeZones();
        },
        error: function(parsed_json) {
          //console.log("Error: " + parsed_json);
        }
      });

function processTimeZones() {
  if (startTimeZone != undefined && endTimeZone != undefined)
  {
    var timeZoneDifference = (endTimeZone * 3600000) - (startTimeZone * 3600000);
    // Do the rest of your processing here
  }
} 
```

无论哪个 ajax 调用首先返回，都会调用 process 函数。但是，其中一个变量将未定义，因此 if 条件将失败并且函数将静默返回。当第二个结果出现时，两个变量都将被设置。现在将满足 if 条件并且将运行处理代码。

有 1001 种方法可以给众所周知的猫剥皮，但希望这些方法能让您开始有效地使用回调。

当然，所有这些都忽略了您已将 ajax 调用置于 for 循环中的事实。如果您需要执行的处理的每次迭代都依赖于它发生的顺序，事情可能会变得很奇怪——ajax 调用可能会以任何顺序返回。当您绘制路线时，很可能就是这种情况。

如果是这样，您可以将代码分成两个阶段 - 加载阶段和处理阶段。在加载阶段运行所有回调，然后当您将所有数据移至处理阶段并将标记放置在地图上时。您可以将数据存储在对象数组中。

有几种方法可以检测加载阶段的结束。一个是计数器，每次进行 ajax 调用时递增，每次成功时递减。您可以使用相同的计数器创建加载进度条。

如果任何调用失败，您也可以向用户显示一条消息，并带有重新启动该过程的链接。（通常这会重新加载整个页面，但您可以重新启动加载阶段。）

HTH。如果您需要进一步的帮助，请务必大声喊叫。

# c# - 反编译源代码中不寻常的 C# 运算符...？

> ID：13923226
> 
> 赞同：14
> 
> 时间：2012-12-17T22:22:14.563
> 
> 标签：c#, syntax, dotpeek

我刚刚使用 DotPeek 反编译了一些 3rd 方源来调试问题。输出代码包含一些不寻常的运算符，AFAIK 不是有效的 C#，所以我想知道它们是什么意思......

摘录看起来像（包括 Dotpeek 评论，因为它们可能是相关的）；

```
protected internal void DoReceive(ref byte[] Buffer, int MaxSize, out int Written)
{
    Written = 0;
    .
    .
    .        
    // ISSUE: explicit reference operation
    // ISSUE: variable of a reference type
    int& local = @Written;
    int num = SomeMethod();
    .
    .
    .
    // ISSUE: explicit reference operation
    ^local = num;
} 
```

那么，那里有 3 个不寻常的运算符......`int& = @Written`似乎正在将一个指针分配给一个用 @ 字符毫无意义地命名的变量？

但什么是`^local = num;`？？？

好的，这是来自 ILSpy 的等效片段，这更有意义，我猜 C# 的反编译没有产生有效的等效项？

**'C＃'**

```
 int& local = @Written;
 byte[] numArray2 = this.FInSpool;
 int num = (int) __Global.Min(numArray2 == null ? 0L : (long) numArray2.Length, (long) MaxSize);
 ^local = num; 
```

**伊利诺伊州**

```
 byte[] expr_22 = this.FInSpool;
 Written = (int)__Global.Min((long)((expr_22 == null) ? 0 : expr_22.Length), (long)MaxSize); 
```

所以，我猜“C#”不是很有效？该 IL 将是有效的 C#，不确定为什么 DotPeek 会产生它所做的输出。也许我会为此坚持使用 ILSpy ......？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T23:32:33.623

如果您查看原始 IL（来自 ildasm，而不是通过 IL Spy 获得的 C# 等效项），这可能会帮助您了解反编译器想要表达的内容。'Out' 参数使用（托管）类型引用表示，该引用未明确公开为 C# 中的类型。这种类型的“实例”通常只能作为参数传递给接受类型化引用（“ref”或“out”参数）的方法。有关更多信息，请参见[OpCodes.Mkrefany](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.mkrefany%28v=vs.95%29.aspx)。

dotPeek 抱怨的是，这个“输出”类型的引用是从参数存储到局部变量槽中的，然后稍后通过局部槽写入。'@' 和 '^' 是占位符，用于指示反编译器检测到的这种意外行为（ISSUE 评论描述的行为。）

代码可能是从 C++/CLI 编译的，因此 IL 看起来与典型的 C# 编译器输出不同。这也可能是某种程度的轻微混淆来混淆反编译器（尽管我不这么认为。）我认为这在功能上与将引用从其参数直接加载到操作堆栈上没有任何不同（避免使用一个局部变量插槽），但我可能是错的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T22:30:53.600

将 a 放在`@`名称之前允许您为变量使用保留名称，例如，如果我想要一个名为的变量，`return`我需要这样做。

```
public int Weird()
{
    int @return = 0;
    return @return;
} 
```

有关更多详细信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/91817/whats-the-use-meaning-of-the-character-in-variable-names-in-c)。

* * *

在名字前加一个`^`……嗯，不知道。（~~将在我研究时更新，~~`^`我可以找到有关不用作 XOR 时的含义的任何信息）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T15:01:23.360

这显然是一个反编译问题。由于支持广泛的语言集，任何特定语言的反编译器可能并不总能找到精确匹配，但仍会尝试产生一些输出。反编译器可能会尝试产生一些等效的输出，例如在这种情况下可能是：

```
protected internal void DoReceive(ref byte[] Buffer, int MaxSize, out int Written)
{
    Written = 0;
    .        
    int num = SomeMethod();
    .
    Written = num;
} 
```

但它真的应该这样做吗？在这种情况下，反编译器实际上为您提供了一个提示，因此您可以决定这对您的特定情况是否重要，因为可能会有一些副作用。

# php - dompdf 一张图片不显示

> ID：13923227
> 
> 赞同：1
> 
> 时间：2012-12-17T22:22:21.240
> 
> 标签：php, dompdf

我正在运行一个 while 循环并生成一个名为 $features 的变量

```
while(blah) {

    $features .= "<li><img src='/srv/sitename.com/htdocs/images/sid.gif'> $features_bullet_text</li>";

} // THIS LOOP WORKS FINE, PULLING CONTENT, IMAGE DOES NOT SHOW 
```

然后我把这个 var 放在下面的代码中。被拉取的内容工作正常，但图像不显示。当 PDF 与其他几个一起生成时，下面标记为“图像显示”的图像就在那里，但由于某种原因，我贴在前面的那个`<li>`不会出现。有人有什么建议吗？

这不是权限，服务器上的文件路径是正确的，但我需要`<li>`在放入这个 PDF 之前生成这个 mysql/loop 。希望这对某人有意义。

```
$html = <<<EOF

PROPER HTML ABOVE

<!-- IMAGE SHOWS UP -->
<img src="/srv/sitename.com/htdocs/images/ordering_information.jpg">

<!-- IMAGE DOES NOT SHOW UP IN LI -->
<ul>
$features
</ul>

PROPER HTML BELOW

EOF; 
```

所有功能正常工作。只有里面的图片`<li>`不会显示。我也尝试过使用双引号并将它们转义，但没有奏效。尝试在图像周围不加引号，目前有单引号。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:31:33.563

根据[这个页面](http://code.google.com/p/dompdf/issues/detail?id=156)，可能需要安装 GD 库来显示 GIF 图像。

如果无法安装，请尝试用 JPG 或 PNG 替换 GIF，看看是否能解决问题。

# iphone - Dropbox 未链接到 iPhone App Store（或临时）构建，但从 xcode 构建可以正常工作

> ID：13923229
> 
> 赞同：0
> 
> 时间：2012-12-17T22:22:27.060
> 
> 标签：iphone, ios, dropbox

我使用这个链接：

```
[[DBSession sharedSession] linkFromController:self]; 
```

从 xcode 构建时工作正常，并且似乎在应用商店和临时构建上工作正常，如果已安装则显示 Dropbox 应用程序，如果未安装则显示另一个视图

```
[DBSession sharedSession] isLinked] 
```

从 xcode 构建时返回 true，但在使用 ad hoc 或应用商店构建时返回 false。有人对可能导致这种情况的原因有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T02:11:33.910

好的，我想我有它。它现在在我的临时构建中工作。我们将看看它获得批准后会发生什么。似乎新版本的 API 要求您在应用打开时处理 url，如下所示：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
if ([[DBSession sharedSession] handleOpenURL:url]) {
    if ([[DBSession sharedSession] isLinked]) {
        // At this point you can start making API Calls. Login was successful
        [self doSomething];
    } else {
        // Login was canceled/failed.
    }
    return YES;
}
// Add whatever other url handling code your app requires here
return NO; 
```

}

我仍然不知道为什么在测试中我的设备上的所有东西都可以正常工作，但不适用于 ad hoc 或应用商店构建，但似乎处理 openURL 回调解决了这个问题。

# c# - 按值将字符串与可字符串对象进行比较的最合适方法是什么？

> ID：13923231
> 
> 赞同：5
> 
> 时间：2012-12-17T22:22:34.140
> 
> 标签：c#, reference, refactoring, resharper, windows-store-apps

有了这个：

```
if (args.Parameter == "ContactIntermediaryPage") 
```

...在 NavigatedTo() 事件处理程序中，Resharper 告诉我：“可能的意外引用比较；要进行值比较，请将左侧转换为类型 'string'”

那么我是否应该将其更改为以下之一，如果是的话，是哪一个：

```
if ((string)args.Parameter == "ContactIntermediaryPage")

if (args.Parameter.ToString() == "ContactIntermediaryPage")

if (args.Parameter.Equals("ContactIntermediaryPage")) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:27:53.733

我会选择第三个，使其也不区分*大小写*（如果这适合您的情况）

```
if (args.Parameter.ToString().Equals(
               "ContactIntermediaryPage", 
                StringComparsion.InvariantCultureIgnoreCase)) 
```

换句话说，如果您要与等式 a 的`string`make *left*部分进行比较`string`，以使编译器和代码读者清楚，您将在该行上做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:32:38.953

第一个如果 args.Parameter 始终是一个字符串。它节省了一个额外的电话。

否则，当且仅当所有可能的字符串都在您的代码中时，第二个。如果是这样，我会将字符串定义为常量，并尽可能在一个地方引用它们。

如果以上都不是真的，那么请选择 Tigran 的答案。

# java - 在堆叠的相对布局内动态创建视图

> ID：13923238
> 
> 赞同：2
> 
> 时间：2012-12-17T22:23:09.243
> 
> 标签：java, android, dynamic, android-relativelayout

所以我有一个包含其他相对布局的相对布局。子布局包含我从 JSON 对象（具有键/值以及具有子键/值对象的子 JSON 数组）解析的各种信息。用户通过显示详细信息片段的列表片段导航到每个根 JSON 对象。根详细信息（名称、图像、描述等）显示得很好。

等级制度：

委员会：

*   姓名
*   图片
*   描述
*   成员：JSON 对象数组

成员： - 姓名 - 状态 - 图像

这是布局文件：

```
<code>
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:scrollbars="vertical"
    android:fillViewport="false"
    android:layout_gravity="top"
    android:layout_marginBottom="60dp" >

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/frmCommitteeDetail"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/bg" >

    <!-- Logo and Title Container -->
    <RelativeLayout 
        android:id="@+id/frmImage_Title"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="top|center_horizontal">"

        <!-- Committee Logo -->
        <ImageView
            android:id="@+id/imgCommitteeLogo"
            android:contentDescription="@string/content_description"
            android:layout_width="96dp"
            android:layout_height="90dp"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="26dp"
            android:src="@drawable/default_comm"
            android:background="@drawable/rounded_corners"
            android:padding="4dp" />

        <TextView
            android:id="@+id/txtCommitteeName"
            android:layout_width="200dp"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/imgCommitteeLogo"
            android:layout_marginTop="14dp"
            android:layout_marginLeft="8dp"
            android:layout_toRightOf="@+id/imgCommitteeLogo"
            android:background="@drawable/rounded_corners"
            android:gravity="center_horizontal|center_vertical"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:textSize="20sp" />

    </RelativeLayout>

    <!-- Description -->
    <RelativeLayout 
        android:id="@+id/frmComDescription"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="25dp"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:paddingTop="10dp"
        android:paddingBottom="10dp"
        android:layout_below="@id/frmImage_Title"
        android:background="@drawable/rounded_corners"
        android:gravity="center_horizontal">

        <!-- Webview to have proper text layout -->
        <WebView
            android:id="@+id/txtComDescription"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

    </RelativeLayout>

    <!-- Contact Infomation -->
    <RelativeLayout 
        android:id="@+id/frmComContact"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="25dp"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:paddingBottom="20dp"
        android:layout_below="@id/frmComDescription"
        android:background="@drawable/rounded_corners"
        android:gravity="center_horizontal">

        <!-- Contact Title -->
        <TextView
            android:id="@+id/txtComContactTitle"
            android:layout_marginTop="10dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="top|center_horizontal"
            android:text="@string/contact_info"
            android:textAppearance="?android:attr/textAppearanceLarge" />
        <!-- Separator -->
        <ImageView
            android:contentDescription="@string/content_description"
            android:id="@+id/imgLineComContactTitle"
            android:src="@drawable/cell_divider_line"
            android:layout_below="@id/txtComContactTitle"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"/>

        <!-- URL -->
        <TextView 
            android:id="@+id/txtComContactURL"
            android:layout_marginTop="10dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/imgLineComContactTitle"
            android:gravity="center_horizontal"
            android:textSize="14sp"
            android:text="www.gooogle.com/url/url/link"/>
        <!-- Email -->
        <TextView
            android:id="@+id/txtComContactEmail"
            android:layout_marginTop="10dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/txtComContactURL"
            android:gravity="center_horizontal"
            android:textSize="14sp"
            android:text="comemail@comsemail.com"/>
        <!-- Name -->
        <TextView
            android:id="@+id/txtComContactName"
            android:layout_marginTop="10dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/txtComContactEmail"
            android:gravity="center_horizontal"
            android:textSize="14sp"
            android:text="John McGee, Contact Guy"/>
        <!-- Number -->
        <TextView
            android:id="@+id/txtComContactNumber"
            android:layout_marginTop="10dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/txtComContactName"
            android:gravity="center_horizontal"
            android:textSize="14sp"
            android:text="(888)-777-1234"/>
        <!-- Address -->
        <TextView
            android:id="@+id/txtComContactAddress"
            android:layout_marginTop="10dp"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@id/txtComContactNumber"
            android:gravity="center_horizontal"
            android:textSize="14sp"
            android:text="08 War Memorial Bldg"/>

    </RelativeLayout>

    <!-- Members -->
    <RelativeLayout
        android:id="@+id/frmComMemberList"
        android:layout_below="@id/frmComContact"
        android:layout_marginLeft="20dp"
        android:layout_marginRight="20dp"
        android:layout_marginTop="10dp"
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:background="@drawable/rounded_corners">

    </RelativeLayout>

</RelativeLayout>
</ScrollView>
</code> 
```

这是现在的片段：

```
<code>
package v4dev.android.general_assembly.fragment;

import v4dev.android.general_assembly.R;
import v4dev.android.general_assembly.model.CommitteeModel;
import v4dev.android.general_assembly.model.CommitteeModel.Member;
import android.annotation.SuppressLint;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.webkit.WebView;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.TextView;

@SuppressLint("ValidFragment")
public class CommitteeDetailFragment extends Fragment
{
    private CommitteeModel Committee = new CommitteeModel();

    @SuppressLint("ValidFragment")
    public CommitteeDetailFragment(CommitteeModel committee)
    {
        this.Committee = committee; 
    }

    // Create View
    @Override
    public View onCreateView(LayoutInflater inflater,  ViewGroup container, Bundle savedInstanceState)
    {
        View view = inflater.inflate(v4dev.android.general_assembly.R.layout.com_detail, container, false);

        ImageView imgLogo = (ImageView) view.findViewById(R.id.imgCommitteeLogo);
        TextView txtCommitteeName = (TextView) view.findViewById(R.id.txtCommitteeName);

        imgLogo.setImageResource(this.Committee.imageID);
        txtCommitteeName.setText(this.Committee.name);

        createDescription(view);
        createContactInfo(view);
        createMembers(view, container);
        return view;
    }// End onCreateView

    // Description
    public void createDescription(View view)
    {   
        // Using a web view since its near impossible to get justified indented text with a native TextView
        // Text View
        WebView txtComDescription       = (WebView)view.findViewById(R.id.txtComDescription);

        // Fill or collapse
        if(!(this.Committee.description.length()==0))
        {
            String Description = "<html><body><p align=\"justify\" style=\"text-indent: 25px\">";
            Description += this.Committee.description;
            Description += "</p></body></html>";
            //txtComDescription.setText(this.Committee.description);
            txtComDescription.loadData(Description,"text/html", "utf-8");
        }
        else
        {
            txtComDescription.setVisibility(View.GONE);
        }
    }
    // Contact Info
    public void createContactInfo(View view)
    {   
        // Text Views
        TextView txtComContactURL       = (TextView)view.findViewById(R.id.txtComContactURL);
        TextView txtComContactEmail     = (TextView)view.findViewById(R.id.txtComContactEmail);
        TextView txtComContactName      = (TextView)view.findViewById(R.id.txtComContactName);
        TextView txtComContactNumber    = (TextView)view.findViewById(R.id.txtComContactNumber);
        TextView txtComContactAddress   = (TextView)view.findViewById(R.id.txtComContactAddress);

        // Fill Data into Layout
        // Collapse Layout if not existent 

        // url
        if(!(this.Committee.url.length() == 0))
        {
            txtComContactURL.setText(this.Committee.url);
        }
        else
        {
            txtComContactURL.setVisibility(View.GONE);
        }
        // contact_email
        if(!(this.Committee.contact_email.length() == 0))
        {
            txtComContactEmail.setText(this.Committee.contact_email);
        }
        else
        {
            txtComContactEmail.setVisibility(View.GONE);
        }
        // contact_name
        if(!(this.Committee.contact_name.length() == 0))
        {
            txtComContactName.setText(this.Committee.contact_name);
        }
        else
        {
            txtComContactName.setVisibility(View.GONE);
        }
        // contact_number
        if(!(this.Committee.contact_number.length() == 0))
        {
            txtComContactNumber.setText(this.Committee.contact_number);
        }
        else
        {
            txtComContactNumber.setVisibility(View.GONE);
        }
        // contact_address
        if(!(this.Committee.contact_address.length() == 0))
        {
            txtComContactAddress.setText(this.Committee.contact_address);
        }
        else
        {
            txtComContactAddress.setVisibility(View.GONE);
        }
    }// end CreateContactInfo()

    // Display all Committee Members
    public void createMembers(View view, ViewGroup container)
    {
        RelativeLayout frmComMemberList = (RelativeLayout) view.findViewById(R.id.frmComMemberList);
        RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        int id = 1;
        for(Member member: this.Committee.MemberList)
        {

            ImageView imgMember = new ImageView(container.getContext());
            imgMember.setAdjustViewBounds(true);
            imgMember.setMaxHeight(60);
            imgMember.setMaxWidth(60);
            imgMember.setId(id);
            imgMember.setImageResource(member.imageID);
            imgMember.setLayoutParams(lp);

            if(id > 1)
            {
                lp.addRule(RelativeLayout.BELOW, imgMember.getId()  );
                frmComMemberList.addView(imgMember,lp);
            }
            else
            {
                frmComMemberList.addView(imgMember);
            }
            id++;

        }// EndFor
    }
}

</code> 
```

我正在尝试使用相对布局参数动态地将成员“堆叠”在一起。问题是在片段中创建的新视图的 id 是在运行时生成的。是否可以将它们“堆叠”起来，就好像它们是列表视图一样，或者我最好通过使用实际的列表视图/适配器组合来走另一条路线，或者我什至敢说......一个表格视图？

提前谢谢所以偷看！:)

# ios - “OpenGL ES 驱动程序”仪器未显示任何数据

> ID：13923242
> 
> 赞同：0
> 
> 时间：2012-12-17T22:23:20.613
> 
> 标签：ios, xcode, opengl-es, instruments

我正在使用 Instruments 来尝试优化我在 IOS 上的 OpenGL 使用。过去，当我使用它时，“OpenGL ES Analyzer”和“OpenGL ES Driver”仪器都会捕获数据。

然而目前，“OpenGL ES Analyzer”可以很好地捕获数据，但“OpenGL ES Driver”仪器不包含任何数据。我已经尝试重置 MAC 和 IOS 设备，但仍然没有捕获到数据。

有没有我可能打开的秘密设置会破坏这个？

该设备是 iPhone 4。

我在下面添加了一个屏幕截图以显示它的外观。

![在此处输入图像描述](../Images/1642930c0238a72260369c8c0d64a34a.png)

# java - SecureRandom 的 SHA1PRNG 算法是否使用 /dev/random 作为熵？

> ID：13923247
> 
> 赞同：1
> 
> 时间：2012-12-17T22:23:39.553
> 
> 标签：java, linux, cryptography

我尝试在 javadocs 和在线中查找此内容，但找不到明确的答案。Dan Dyer 的回答

[如何使用 Java SecureRandom 解决性能问题？](https://stackoverflow.com/questions/137212/how-to-solve-performance-problem-with-java-securerandom)

似乎暗示 SHA1PRNG 不使用任何系统资源来获取熵。它是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:41:32.370

不，在默认的 Oracle 实现中，它使用系统资源，除非您在调用`nextBytes()`. 来自 Sun/Oracle 文档`SecureRandom`：

> SecureRandom 实现尝试完全随机化生成器本身的内部状态，除非调用者在调用 getInstance 方法之后调用 setSeed 方法：
> 
> ```
>  SecureRandom random = SecureRandom.getInstance("SHA1PRNG");
>  random.setSeed(seed); 
> ```

# objective-c - 在 Objective-c 中发布后从 PHP 获取结果

> ID：13923250
> 
> 赞同：0
> 
> 时间：2012-12-17T22:24:20.993
> 
> 标签：objective-c

我正在尝试学习如何在 PHP 和 Objective-c 中使用 POST 和 GET 的东西。

我遇到了一个问题。在objective-c中进行POST后，如何获得返回结果？

我的 PHP 文件是：

```
<html>
<head><title>Bug Reporter</title></head>
<body>
<h2>Fancy Bug Reporter</h2>
<hr />
<?php
if (isset($_POST['go']))
{
        // Form was posted
        print "User submitted bug: ". $_POST['name'] . ": " . $_POST['description'];
}
else
{
        // Form was not posted, display form
?>
<form method="POST" action="<?php echo $PHP_SELF; ?>">
Bug Name:<br /><input type="text" name="name" maxlength="100" /><br />
Bug Description:<br /><input type="text" name="description" maxlength="1000" size="80" /><br />
<input type="submit" name="go" value="Add Bug">
</form>
<?php
}
?>
</body>
</html> 
```

在目标 c 中：

```
 NSMutableURLRequest *request =
    [[NSMutableURLRequest alloc] initWithURL:
     [NSURL URLWithString:@"http://xxxxx.com/xxx.php"]];

    [request setHTTPMethod:@"POST"];

    NSString *postString = @"go=1&name=Bad%20Bad%20Bug&description=This%20bug%20is%20really%20really%20super%20bad.";

    [request setValue:[NSString
                       stringWithFormat:@"%d", [postString length]]
   forHTTPHeaderField:@"Content-length"];

    [request setHTTPBody:[postString
                          dataUsingEncoding:NSUTF8StringEncoding]];

    [[NSURLConnection alloc]
     initWithRequest:request delegate:self]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:33:16.837

您需要实现这些`NSURLConnectionDelegate`方法，这些方法将针对与您的请求相关的任何网络连接事件调用，例如身份验证、失败、成功、接收到的数据等。

另外我建议你看看[AFNetworking](https://github.com/AFNetworking/AFNetworking)，一个很棒的网络库，它`NSURLConnection`提供了基于块的方法。

如果发现它比普通的`NSURLConnection`方式更方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T11:02:53.080

您永远不会保存连接并且无法启动它。使用新的便捷方法：

```
[NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse*r, NSData*d, NSError*e) { 
     ...
 } 
```

# javascript - 从客户端调用 node.js 服务时的竞争条件

> ID：13923256
> 
> 赞同：1
> 
> 时间：2012-12-17T22:24:54.310
> 
> 标签：javascript, node.js, asynchronous

我有两个节点服务调用：一个是从 LDAP 组中获取组成员，另一个是获取每个成员的详细信息。每个呼叫都没有回调阻塞，所以我遇到了一种情况，有时我正在使用的记录与为个人检索的详细信息不匹配。

有没有一种聪明的方法来编写代码以防止竞争条件？有时它可以工作，但通常在我在下面进行控制台日志的行上，我正在迭代的记录与从商店返回的记录不匹配以获取员工详细信息。下面看一下代码：

```
onGroupSelected: function (list, idx, el, record) {
    var store = Ext.getStore('GroupMembers');
    store.getProxy().setUrl('http://people-nodejs.xxx.xxx.com/ldap/group/' + record.get('cn'));
    var that = this;
    store.load({
        callback: function (records, operation) {
            var empstore = Ext.getStore('EmployeeDetails');
            Ext.each(records, function(rec, ndx) {
                console.log(ndx + ":" + rec.get('memberUid'));
                if (rec.get('isMember')) {
                    empstore.getProxy().setUrl('http://people-nodejs.xxx.xxx.com/ldap/user/' + rec.get('memberUid'));
                    empstore.load({
                        callback: function(emps, op) {
                            console.log(ndx + ":" + rec.get('memberUid') + "--" + emps[0].get('fullName'));
                            rec.set('workforceID', emps[0].get('workforceID'));
                            rec.set('fullName', emps[0].get('fullName'));
                            that.getGroupMembersList().setRecord(rec);
                        }
                    });
                }
            });
            // Remove empty records and populate with records from above
            store.removeAll();
        }
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T22:38:05.177

在单线程环境中，比如 Javascript（和 node.js），你不可能真的有竞争条件。

相反，您遇到了 javascript 闭包，并且对变量在嵌套函数和循环中的工作方式存在误解。

`rec`是在你内部定义`Ext.each(records, function(rec, ndx)`的，在你的回调函数内部，你正在使用它的值，假设对于每次迭代，`rec`在执行回调时仍然绑定到相同的值。

这是不正确的，而是在`rec`执行回调函数时绑定 的值，而不是在创建函数时绑定（这实质上是闭包的定义）。

因此，要让它按您期望的方式工作，您需要`rec`在创建期间强制绑定，方法是执行以下操作（注意：语法可能有问题）：

```
callback: (function(myrec,index){ 
    return function(emps, op) {
      console.log(index + ":" + myrec.get('memberUid') + "--" + emps[0].get('fullName'));
      myrec.set('workforceID', emps[0].get('workforceID'));
      myrec.set('fullName', emps[0].get('fullName'));
      that.getGroupMembersList().setRecord(myrec);
    };)(rec,ndx); 
```

在上面的示例中，我们立即执行了一个匿名 javascript 函数，传入了在创建时`rec`绑定的值。`myrec`匿名函数返回一个与回调所期望的签名相同的函数，并且当您的回调执行该函数时，它将具有适当的值`rec`

# html - 如何在 ipad 上嵌入/播放更大的 .mp4 视频

> ID：13923259
> 
> 赞同：1
> 
> 时间：2012-12-17T22:25:03.907
> 
> 标签：html, ipad, video, mp4

**iPad/iPad 2 支持的视频格式**

H.264 视频，最高 720p，每秒 30 帧，Main Profile level 3.1，AAC-LC 音频最高 160 Kbps，48kHz，.m4v、.mp4 和 .mov 文件格式的立体声音频；

MPEG-4 视频，最高 2.5 Mbps，640 x 480 像素，每秒 30 帧，带有 AAC-LC 音频的简单配置文件，每通道最高 160 Kbps，48kHz，.m4v、.mp4 和 .mov 文件格式的立体声音频;

Motion JPEG (M-JPEG) 高达 35 Mbps，1280 x 720 像素，每秒 30 帧，音频为 ulaw，PCM 立体声音频为 .avi 文件格式。

**我的在下面：**

```
 <video width="968" height="768" id="exjadeVideo">
  <source src="video/animation_4000kbps.mp4" type="video/mp4" />
  </video> 
```

我不想失去质量或尺寸；理想情况下——任何可能性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:04:40.740

你能检查“animation_4000kbps.mp4”的宽度-高度吗，因为HTML代码中的height,width参数只设置浏览器的显示大小，而不是原始视频。

# jquery - 带有 jQ uery UI 的 AngularJS 指令 - 模板和元素

> ID：13923263
> 
> 赞同：0
> 
> 时间：2012-12-17T22:25:20.177
> 
> 标签：jquery, jquery-ui, angularjs

我正在尝试使用 jQuery UI autoComplete 插件创建自动完成文本输入的 AngularJS 指令。

这是我的角度代码：

```
<script type="text/javascript">
        angular.module('components', []).
            directive('autoComplete', function () {
                return {
                    restrict: 'E',
                    template: '<input type="text" id="tags" name="tags" maxlength="80" />',
                    link: function (scope, element, attrs) {
                        var dataUrl = '@Url.Action("GetTags", "Home")';
                        element.autocomplete({
                            source: function (term, responseCallBack) {
                                $.get(dataUrl + '?term=' + term.term, function (data) {
                                    responseCallBack(data);
                                });
                            },
                            minLength: 2,
                            select: function (event, ui) {
                                alert(ui.item.label);
                            }
                        });
                    }
                };
            });

        angular.module('JqueryApp', ['components']);
    </script> 
```

这是我的html代码：

```
<div ng-app="JqueryApp">
    <div>
        <div>
            <auto-complete />
        </div>
    </div>
</div> 
```

它不起作用，因为我需要处理模板元素而不是`<auto-complete>`指令标记元素，因此我可以在其上应用 autoComplete 插件，我发现返回的元素（在`link`回调函数中）是`<auto-complete>`指令而不是给定的模板（`<input>`) 我可以在上面应用 jQuery 插件。

如何在模板（输入）上应用 autoComplate 插件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:42:36.850

尝试添加**替换：真**

```
return {
  replace: true,
  restrict: 'E',
  [...] 
```

# php - 如何在表单 POST 方法中传递 jquery datepicker 值？

> ID：13923264
> 
> 赞同：8
> 
> 时间：2012-12-17T22:25:25.320
> 
> 标签：php, jquery, jquery-ui-datepicker

我在日期表单中有一个输入文本，我使用 JQuery datepicker 来选择日期。

```
 <input type="text" id="datepicker" name="datepicker" value="Date"/> 
```

当我使用表单发布将值发布到另一个 php 中进行计算时。我不能单独从这个输入文本中获取值。我得到一个空值而不是选定的日期。

```
 $date=$_POST['datepicker']; 
```

我不确定如何在 POST 表单中传递 datepicker 值。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T22:33:32.083

jQuery 的日期选择器与发布表单无关。如果您的表单设置为“发布”，那么在用户选择日期后该输入字段中留下的任何内容都将与表单一起发送。

```
<form action="process.php" method="post"> 
  <input type="text" id="datepicker" name="datepicker" value="Date"/>
</form> 
```

给你：

```
$date = $_POST['datepicker']; 
```

但是，如果您的表单是作为“获取”请求发送的，您将需要访问它。

```
<form action="process.php" method="get"> 
  <input type="text" id="datepicker" name="datepicker" value="Date"/>
</form> 
```

给你：

```
$date = $_GET['datepicker']; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-26T11:02:06.017

```
$( "#currentDate" ).datepicker("setDate", new Date("<?php echo $_POST['myCurrentDate'] ?>")); 
```

为我工作，阅读至少 10 种非常复杂的方法，然后意识到这是有效的。您每次都在实例化一个新值。您使用表单输入或其他技术将日期存储在 php 脚本中的某个位置，然后将其回收回上述语句中。所以重新加载不会影响结果。

如果 myCurrentDate 未设置，它将默认设置。将其设置为今天的日期需要一个 php if 语句将其设置为第一次（或重新加载页面）为 new Date()，并且 else 语句可用于包含上述代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-17T22:39:31.693

这是一个带有日期选择器的简单表格

```
 <form id="myform" name="myform">
    <input type="text" id="datepicker" name="datepicker" value="Date"/>
    <input type="button" id="submitMe">
    </form> 
```

现在你的 jquery，我们将使用一些 AJAX 的东西：

```
//init datepicker
$(function() {
    $("#datepicker").datepicker({
        showButtonPanel: true
    });
});

//pass deatepicker to php
$("#submitMe").click(function() {
    $.ajax({
        type: 'POST',
        url: "pass.php",
        dataType: "json",
        data: $('#myform').serialize(),
        success: function(data) {
            console.log("Done");

        }
    });
 return false;
});​ 
```

最后是你的 pass.php 文件

```
<?php 
//note that date may have slashes or dots so we url decode it

$date = urldecode ($_GET['datepicker']);

echo "chosen date is: ".$date;
?> 
```

# jquery - jQuery Validate 插件 v1.10 验证（需要）IE8 中的所有输入

> ID：13923267
> 
> 赞同：15
> 
> 时间：2012-12-17T22:25:35.623
> 
> 标签：jquery, jquery-validate

我正在使用当前版本的 jQuery (1.8.3) 和最新版本的 jQuery validate (1.10.0)，似乎在 Internet Explorer 8 中，jquery validate 正在验证正在验证的表单上的所有输入，而不是只是那些有明确规则的人。它在其他浏览器（IE9+、FF、Chrome）中运行良好，如果我使用 jQuery validate 1.9.0 也运行良好。

这是一个演示该问题的示例：

```
<!DOCTYPE html>

<html>
<head>
    <title>IE8 + jQuery Validate 1.10 Test</title>
    <script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js'></script>
    <script type='text/javascript' src='http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.min.js'></script>
</head>
<body>
    <div>
        <form id="my-form">
            <label for="my-required-field">required:</label>
            <input id="my-required-field" type="text" name="reqField" />
            <label for="my-optional-field">optional:</label>
            <input id="my-optional-field" type="text" name="optField" />
            <input id="wh-submit-button" type="submit" value="submit" />
        </form>
    </div>
    <script type="text/javascript">
        $(document).ready(function () {

            var form = $("#my-form");
            var validator = form.validate({
                rules: {
                    "reqField": { required: true }
                },
                messages: {
                    "reqField": { required: "this field is <i>actually</i> required" }
                }
            });

            $("#wh-submit-button").click(function () {
                if (validator.form()) {
                    alert('passed validation');
                }
            });
        });
    </script>
</body>
</html> 
```

在 IE8 中，“通过验证”警报不会触发，可选字段将被标记为必填。

如果我明确地将可选字段标记为不需要，它确实可以正常工作：

```
rules: {
    "reqField": { required: true },
    "optField": { required: false }
} 
```

但是，据我所知，必须将每个不需要明确要求的输入元素标记为可选的，并且这从来都不是以前的要求，这当然不是最理想的。

我知道早期版本的 jquery 和 jquery validate 存在问题，但表面上它们已通过 jQuery validate 1.8.1 解决 - 我提出这个问题是因为它似乎与最新版本的 jquery 和 validate 插件有关。

更新：

因此，该问题似乎仅在使用 Internet Explorer F12 开发人员工具模拟 IE8 行为时才表现出来。根据评论表明我在 IE8 中提供的示例没有实际问题，我构建了一个完整的 Windows VM，并安装了真正的 Internet Explorer 8，事实上，没有任何问题。尽管仿真器和真实的东西之间存在明显的差异，但我以前从未见过 JavaScript 仿真存在这样的问题，并且被 jQuery Validation 1.10 突然开始发生的事实所引发。

由于这只是仿真的问题，而不是真实的问题，因此这里没有什么要解决的；我应该首先披露它是通过模拟器实现的......但也许其他人会落入同样的陷阱，这将是一个有用的参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:39:12.177

试试这个...

**[使用内置 jQuery 1.8.2 的 jsFiddle DEMO](http://jsfiddle.net/ncLsy/)**

**[使用 jQuery 1.8.3 的 jsFiddle 演示](http://jsfiddle.net/ncLsy/1/)**

```
$(document).ready(function() {

    var form = $("#my-form");
    var validator = form.validate({
        rules: {
            "reqField": {
                required: true
            }
        },
        messages: {
            "reqField": {
                required: "this field is <i>actually</i> required"
            }
        },
        submitHandler: function(form) {
            alert('passed validation');
            // form.submit();
        }
    });

});​ 
```

# xcode - 从 Xcode 运行 UIAutomation 脚本

> ID：13923272
> 
> 赞同：20
> 
> 时间：2012-12-17T22:25:58.720
> 
> 标签：xcode, instruments, ui-automation

有没有人成功在 Xcode 中设置自动化 UIAutomation 测试？

我正在尝试在我的 Xcode 项目中设置一个目标，该目标应该运行我准备的所有 UIAutomation 脚本。目前，这个目标的唯一**构建阶段**是这个**运行脚本**块：

```
TEMPLATE="/Applications/Xcode.app/Contents/Applications/Instruments.app/Contents/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate"
MY_APP="/Users/Me/Library/Application Support/iPhone Simulator/6.0/Applications/564ED15A-A435-422B-82C4-5AE7DBBC27DD/MyApp.app"
RESULTS="/Users/Me/Projects/MyApp/Tests/UI/Traces/Automation.trace"
SCRIPT="/Users/Me/Projects/MyApp/Tests/UI/SomeTest.js"
instruments -t $TEMPLATE $MY_APP -e UIASCRIPT $SCRIPT -e UIARESULTSPATH $RESULTS 
```

当我构建这个目标时，它会在几秒钟后成功，但脚本实际上并没有运行。在构建日志中，我收到以下错误：

```
instruments[7222:707] Failed to load Mobile Device Locator plugin
instruments[7222:707] Failed to load Simulator Local Device Locator plugin
instruments[7222:707] Automation Instrument ran into an exception while trying to run the script.  UIATargetHasGoneAWOLException
+0000 Fail: An error occurred while trying to run the script.
Instruments Trace Complete (Duration : 1.077379s; Output : /Users/Me/Projects/MyApp/Tests/UI/Traces/Automation.trace) 
```

我很确定，我的 javascript 和我的运行脚本都是正确的，因为如果我在 bash 中运行完全相同的仪器命令，它会按预期工作。这可能是 Xcode 中的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T17:05:48.307

我终于找到了解决这个问题的方法。似乎 Xcode 正在以有限的权限运行运行脚本。我不完全确定，是什么导致仪器命令失败，但使用`su`更改为您的用户将修复它。

```
su $USER -l -c <instruments command> 
```

显然，这会要求您输入密码，但是在作为脚本运行时您无法输入密码。我没有找到为 指定密码的方法`su`，但是如果您以 root 身份运行它，则不必指定密码。幸运的是`sudo`可以通过管道接受密码：

```
echo <password> | sudo -S su $USER -l -c <instruments command> 
```

如果您不想硬编码您的密码（总是一个坏主意），您可以使用一些 AppleScript 来询问密码。

我在下面发布了生成的脚本。将其复制到项目中的 *.sh 文件并从运行脚本运行该脚本。

```
#!/bin/bash

# This script should run all (currently only one) tests, independently from
# where it is called from (terminal, or Xcode Run Script).

# REQUIREMENTS: This script has to be located in the same folder as all the
# UIAutomation tests. Additionally, a *.tracetemplate file has to be present
# in the same folder. This can be created with Instruments (Save as template...)

# The following variables have to be configured:
EXECUTABLE="TestApp.app"

# Optional. If not set, you will be prompted for the password.
#PASSWORD="password"

# Find the test folder (this script has to be located in the same folder).
ROOT="$( cd -P "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

# Prepare all the required args for instruments.
TEMPLATE=`find $ROOT -name '*.tracetemplate'`
EXECUTABLE=`find ~/Library/Application\ Support/iPhone\ Simulator | grep "${EXECUTABLE}$"`
SCRIPTS=`find $ROOT -name '*.js'`

# Prepare traces folder
TRACES="${ROOT}/Traces/`date +%Y-%m-%d_%H-%M-%S`"
mkdir -p "$TRACES"

# Get the name of the user we should use to run Instruments.
# Currently this is done, by getting the owner of the folder containing this script.
USERNAME=`ls -l "${ROOT}/.." | grep \`basename "$ROOT"\` | awk '{print $3}'`

# Bring simulator window to front. Depending on the localization, the name is different.
osascript -e 'try
    tell application "iOS Simulator" to activate
on error
    tell application "iOS-Simulator" to activate
end try'

# Prepare an Apple Script that promts for the password.
PASS_SCRIPT="tell application \"System Events\"
activate
display dialog \"Password for user $USER:\" default answer \"\" with hidden answer
text returned of the result
end tell"

# If the password is not set directly in this script, show the password prompt window.
if [ -z "$PASSWORD" ]; then
    PASSWORD=`osascript -e "$PASS_SCRIPT"`
fi

# Run all the tests.
for SCRIPT in $SCRIPTS; do
    echo -e "\nRunning test script $SCRIPT"
    COMMAND="instruments -t \"$TEMPLATE\" \"$EXECUTABLE\" -e UIASCRIPT \"$SCRIPT\""
    COMMAND="echo '$PASSWORD' | sudo -S su $USER -l -c '$COMMAND'"
    echo "$COMMAND"
    eval $COMMAND > results.log

    SCRIPTNAME=`basename "$SCRIPT"`
    TRACENAME=`echo "$SCRIPTNAME" | sed 's_\.js$_.trace_g'`
    mv *.trace "${TRACES}/${TRACENAME}"

    if [ `grep " Fail: " results.log | wc -l` -gt 0 ]; then
        echo "Test ${SCRIPTNAME} failed. See trace for details."
        open "${TRACES}/${TRACENAME}"
        exit 1
        break
    fi

done

rm results.log 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T08:10:35.103

看起来这真的可能是一个 Xcode 问题；无论如何，至少有一个人已经[提交了一份雷达报告](http://openradar.appspot.com/12567863)。[另一个线程](https://stackoverflow.com/questions/9642694/what-is-uiatargethasgoneawolexception-while-operating-iphone-with-uiautomation-t?rq=1)中的某个人声称您可以通过断开当前连接到计算机的任何 iDevices 来解决此异常，但我怀疑当您尝试将脚本作为 Xcode 目标运行时这并不适用。

我建议也提交一份[雷达报告](https://bugreport.apple.com/cgi-bin/WebObjects/RadarWeb.woa/wa/signIn)；您可能会从 Apple 获得有关此问题的更多详细信息，或者至少让他们相信[很多人](https://stackoverflow.com/questions/12467090/uiautomation-failed-to-load-plugin?rq=1)都遇到了问题，他们应该弄清楚发生了什么。

很抱歉给出一个不太有用的答案（应该是评论，但评论和链接/格式不能很好地混合）。请使用您在该问题上发现的任何内容更新此问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-02T09:45:45.717

*注意：这不是问题的直接答案，而是潜在问题的替代解决方案。*

在搜索有关 UIAutomation 的深入信息时，我偶然发现了 Square 的一个名为 KIF（保持功能）的框架。它是一个集成测试框架，允许许多与 UIAutomation 相同的功能，但最棒的是您可以在 Objective-C 中编写集成测试。

它非常容易设置（通过 CocoaPods），它们也有很好的示例，而且最好的是使用 Jenkins 等 CI 系统设置起来轻而易举。

看看：http: [//github.com/square/KIF](http://github.com/square/KIF)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-19T18:42:53.357

游戏迟到了，但我有一个适用于 Xcode 5.1 的解决方案。不知道这是否破坏了上述解决方案。使用旧的解决方案，我仍然得到：

```
Failed to load Mobile Device Locator plugin, etc. 
```

但是，这适用于 Xcode 5.1 的发行版。

```
echo <password> | sudo -S -u username xcrun instruments 
```

请注意，我删除了不需要的 su 命令并添加了 xcrun 命令。xcrun 是所需要的魔法。

这是我的完整命令：

```
echo <password> | sudo -S -u username xcrun instruments\ 
  -w "iPhone Retina (3.5-inch) - Simulator - iOS 7.1"\
  -D "${PROJECT_DIR}/TestResults/Traces/Traces.trace"\
  -t "${DEVELOPER_DIR}/Instruments.app/Contents/PlugIns/AutomationInstrument.bundle/Contents/Resources/Automation.tracetemplate"\
  "${BUILT_PRODUCTS_DIR}/MyApp.app"\
  -e UIARESULTSPATH "${PROJECT_DIR}/TestResults"\
  -e UIASCRIPT "${PROJECT_DIR}/UITests/main.js" 
```

顺便说一句，如果您键入：

```
instruments -s devices 
```

您将获得可用于 -w 选项的所有受支持设备的列表。

**编辑：**为了使这项工作适用于检查项目的不同人员，请替换以下内容：

```
echo <password> | sudo -S -u username xcrun instruments 
```

和

```
sudo -u ${USER} xcrun instruments 
```

由于您只是对同一用户执行 sudo，因此不需要密码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-25T07:18:55.073

查看本教程，该教程解释了如何使用 Jenkins 进行自动化 UI 测试。不过，它也在教程中使用了 Jasmine。[http://shaune.com.au/automated-ui-testing-for-ios-apps-uiautomation-jasmine-jenkins/](http://shaune.com.au/automated-ui-testing-for-ios-apps-uiautomation-jasmine-jenkins/)希望这会有所帮助。它有一个示例项目文件，因此您可以将其作为模板下载。希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-24T20:41:39.690

在 XCode 中 - 如果您加载管理器 (XCode->Window->Organizer)

然后在设备下选择您的机器->“启用开发者模式”

这应该消除对仪器提示的需要。

# android - 如何让用户在 Android 上查看和播放他们已经有权访问的歌曲（例如，通过 Google Play）？

> ID：13923278
> 
> 赞同：7
> 
> 时间：2012-12-17T22:26:24.397
> 
> 标签：android, android-intent, android-contentprovider, google-play, android-music-player

我遇到了将音乐集成到我的 Android 应用程序中的障碍。目标只是让用户通过 Google Play Music（或任何其他播放器，如 Winamp、Poweramp、doubleTwist 等）查看和播放他们已经可以访问的歌曲。

到目前为止，我已经尝试了几种方法，但每种方法都有问题。

**方法 #1：使用 ContentResolver 查询从 Google Play 音乐中获取播放列表和歌曲，然后使用 MediaPlayer 播放**

首先，在播放列表上找到光标：

```
String[] proj = { MediaStore.Audio.Playlists.NAME,
                  MediaStore.Audio.Playlists._ID };
Uri playlistUri = Uri.parse("content://com.google.android.music.MusicContent/playlists");
Cursor playlistCursor = getContentResolver().query(playlistUri, proj, null, null, null); 
```

然后迭代获取每个播放列表中的歌曲，并像这样读取它们：

```
String[] proj2 = { MediaStore.Audio.Playlists.Members.TITLE,
                   MediaStore.Audio.Playlists.Members._ID };
String playListRef = "content://com.google.android.music.MusicContent/playlists/" + playListId + "/members";
Uri songUri = Uri.parse(playListRef);
Cursor songCursor = getContentResolver().query(songUri, proj2, null, null, null); 
```

这可以获取播放列表和歌曲，但是您实际上无法播放它们（即使您告诉 Google Play 音乐“保留在设备上”）。具体来说，以下代码不会播放如上找到的给定歌曲：

```
mediaPlayer = new MediaPlayer();
mediaPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
try {
    mediaPlayer.setDataSource(dataPath);
    mediaPlayer.prepare();
    mediaPlayer.start();
} catch (Exception e) {} 
```

事实上，我已经扫描了设备，但无法在任何地方找到文件（即使我已经通过完全禁用网络确认它们是本地的——在 Galaxy Nexus 和 Galaxy S3 上）。

**方法 2：使用 Intent 调用 Google Play Music 或其他播放器**

根据[这篇文章](https://stackoverflow.com/questions/3114471/android-launching-music-player-using-intent)，您可以简单地使用 Intents 调用播放器，如下所示：

```
Intent intent = new Intent();  
intent.setAction(android.content.Intent.ACTION_VIEW);  
File file = new File(YOUR_SONG_URI);  
intent.setDataAndType(Uri.fromFile(file), "audio/*");  
startActivity(intent); 
```

但我认为这种方法不允许进行任何类型的控制——例如，传递要播放的特定歌曲，或者在歌曲播放完毕时收到通知。此外，@CommonWares 指出音乐应用程序及其 Intent 不是 Android SDK 的公共 API 的一部分，可能会在没有警告的情况下更改。

由于与 iTunes 的紧密集成，我试图实现的基本功能存在于 iOS 中。我认为谷歌会希望实现同样的整合，因为这可能意味着在 Play 商店中销售更多的音乐。

**总结：**是否可以让用户在 Android 上查看和播放他们已经可以访问的歌曲？使用 Google Play 音乐或任何其他应用程序执行此操作的最佳方式是什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T14:14:04.423

方法 #1 有点工作（在设备上使用本地音乐进行测试），感谢 OP 的指导。

笔记：

*   我们在这里使用了一个未记录的内部 API——它不可靠。
*   我无法访问 Google Play 音乐中的在线/购买的音乐，因此答案仅指本地存储的音乐。

下面的代码将迭代播放列表中的所有歌曲并播放最后一首。

请注意**“SourceId”**列 - 这是您根据[文档](http://developer.android.com/guide/topics/media/mediaplayer.html#viacontentresolver)使用的音频 ID 。我通过迭代游标返回的所有列找到了它。那里还有几个更有趣的列，例如“hasLocal”、“hasRemote”，它们可能（或不）指的是音乐的存储位置。

```
String[] proj2 = { "SourceId", MediaStore.Audio.Playlists.Members.TITLE, MediaStore.Audio.Playlists.Members._ID };
String playListRef = "content://com.google.android.music.MusicContent/playlists/" + playListId + "/members";
Uri songUri = Uri.parse(playListRef);
Cursor songCursor = getContentResolver().query(songUri, proj2, null, null, null);

long audioId = -1;
while (songCursor.moveToNext()) {
    audioId = songCursor.getLong(songCursor.getColumnIndex("SourceId"));
    String title = songCursor.getString(songCursor.getColumnIndex(MediaStore.Audio.Playlists.Members.TITLE));
    Log.v("", "audioId: " + audioId + ", title: " + title);
}
songCursor.close();

MediaPlayer mpObject = new MediaPlayer();
try {
    if (audioId > 0) {
        Uri contentUri = ContentUris.withAppendedId(android.provider.MediaStore.Audio.Media.EXTERNAL_CONTENT_URI, Long.valueOf(audioId));
        mpObject.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mpObject.setDataSource(this, contentUri);
        mpObject.prepare();
        mpObject.start();

    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

# assembly - 在 ARM 中使用 ieee 格式的数字

> ID：13923279
> 
> 赞同：0
> 
> 时间：2012-12-17T22:26:28.013
> 
> 标签：assembly, format, arm, cpu-registers, ieee

我正在尝试编写一个 ARM 程序，它将 ieee 编号转换为 TNS 格式编号。TNS是一些超级计算机使用的一种格式，与ieee类似，但又有所不同。我正在尝试使用几个掩码将 ieee 编号的三个不同“部分”放在单独的寄存器中，以便我可以相应地移动它们。这是我的解包子例程：

```
UnpackIEEE
    LDR r1, SMASK   ;load the sign bit mask into r1 
    LDR r2, EMASK   ;load the exponent mask into r2
    LDR r3, GMASK   ;load the significand mask into r3
    AND r4, r0, r1  ;apply sign mask to IEEE and save into r4
    AND r5, r0, r2  ;apply exponent mask to IEEE and save into r5
    AND r6, r0, r3  ;apply significand mask to IEEE and save into r6
    MOV     pc, r14     ;return 
```

以下是掩码和数字声明，以便您理解：

```
IEEE        DCD 0x40300000  ;2.75 decimal or 01000000001100000000000000000000 binary
SMASK       DCD 0x80000000  ;Sign bit mask
EMASK       DCD 0x7F800000  ;Exponent mask
GMASK       DCD 0x007FFFFF  ;Significand mask 
```

当我逐步调试调试器时，我得到的结果并不是我在纸上完成后所期望的。编辑：我的意思是，在子程序运行后，寄存器 4、5 和 6 都保持为 0。我不知道为什么掩码不起作用。我想我不完全理解数字是如何存储在寄存器中或如何错误地使用掩码的。任何帮助表示赞赏。如果您需要更多信息，请询问。

编辑：入口点：非常简单，只是想让这些子程序正常工作。

```
ENTRY

    LDR r1, IEEE    ;load IEEE num into r1
    BL  UnpackIEEE  ;call unpack sub
    SWI     SWI_Exit    ;finish 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:14:31.583

这里：

```
LDR r1, IEEE    ;load IEEE num into r1 
```

从您的拆包例程的外观来看，您似乎想将数字加载到`r0`，而不是`r1`. `r1`在您的拆包例程的第一行被破坏：

```
UnpackIEEE
    LDR r1, SMASK   ;load the sign bit mask into r1 
```

# mapreduce - 使用 mapreduce 查找用户之间的共同项目

> ID：13923282
> 
> 赞同：-2
> 
> 时间：2012-12-17T22:26:47.150
> 
> 标签：mapreduce

假设我有以下用户/项目集，其中项目也可以为每个用户复制（如 user1）

```
{ "u1", "item" : [ "a", "a", "c","h" ] }
{ "u2", "item" : [ "b", "a", "f" ] }
{ "u3", "item" : [ "a", "a", "f" ] } 
```

我想找到一个 map-reduce 算法来计算每对用户之间的共同项目的数量，就像这样

```
{ "u1_u2", "common_items" : 1 }
{ "u1_u3", "common_items" : 2  }
{ "u2_u3", "common_items" : 2 } 
```

它基本上找到每对项目集的交集，并将复制视为新项目。我是 mapreduce 的新手，我该如何为此做一个 map-reduce？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T00:53:02.923

您需要一个发出用户拥有的所有东西的步骤，例如：

```
{ 'a': "u1" }
{ 'a': "u1" }
{ 'c': "u1" }
{ 'h': "u1" }
{ 'b': "u2" }
{ 'a': "u2" }
{ 'f': "u2" }
{ 'a': "u1" }
{ 'a': "u3" }
{ 'f': "u3" } 
```

然后按如下键减少它们：

```
{ 'a': ["u1", "u1", "u2", "u3"] }
{ 'b': ["u2"] }
{ 'c': ["u1"] }
{ 'f': ["u2", "u3"] }
{ 'h': ["u1"] } 
```

并且在该 reducer 中，会在每个值中发出每个用户的排列，例如：

```
{ 'u1_u2': 'a' }
{ 'u2_u3': 'a' }
{ 'u1_u3': 'a' }
{ 'u2_u3': 'f' } 
```

请注意，您需要确保在这样的键`k1_k2`中，`k1 < k2`以便它们在任何进一步的 mapreduce 步骤中匹配。

然后，如果您需要像您的示例一样将它们全部分组，则另一个 mapreduce 阶段将它们按键组合起来，它们最终会像：

```
{ 'u1_u2': ['a'] }
{ 'u1_u3': ['a'] }
{ 'u2_u3': ['a', 'f'] }
{ 'u2_u3': ['f'] } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T01:08:30.157

对于这些类型的问题，您需要了解某些算法的扩展性比其他算法更好，并且任何一种算法的性能都取决于数据的“形状”和大小。

将每个用户的项目集与每个其他用户进行比较可能适用于小型域数据集（比如 1000 个或用户，甚至可能是 10,000 个，具有相似数量的项目），但这是一个“n 平方”问题（或订单至少可以说，我的大 O 生锈了！）：

```
Users Comparisons
----- -----------
  2       1
  3       3
  4       6
  5       10
  6       15
  n   (n^2 - n)/2 
```

因此，100,000 个用户域将产生 4,999,950,000 组比较。

解决此问题的另一种方法是反转关系，因此运行 Map Reduce 作业以生成用户的项目映射：

```
'a' : [ 'u1', 'u2', 'u3' ],
'b' : [ 'u2' ],
'c' : [ 'u1' ],
'f' : [ 'u2', 'u3' ],
'h' : [ 'u1' ], 
```

从那里您可以迭代每个项目的用户并输出用户对（计数为 1）：

```
'a' would produce: [ 'u1_u2' : 1, 'u1_u3' : 1, 'u2_u3' : 1 ]
'f' would produce: [ 'u2_u3' : 1 ] 
```

然后最终产生每个用户配对的总和：

```
[ 'u1_u2' : 1, 'u1_u3' : 1, 'u2_u3' : 2 ] 
```

这不会产生您感兴趣的行为（u1 和 u3 项目集中的双 a），但会详细说明初始实现。

如果您知道您的域集通常包含没有共同项目的用户、每个用户的少量项目或具有大量不同值的项目域，那么此算法将更有效（之前您正在比较每个用户到另一个用户，两组之间的交叉概率很低）。我相信数学家可以为你证明这一点，但我不是！

这也有与以前相同的潜在扩展问题——如果你有一个所有 100,000 个用户都共有的项目，你仍然需要生成 40 亿个用户对。这就是为什么在盲目地对数据应用算法之前了解数据很重要的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:18:57.030

这对你有用吗？

```
from itertools import combinations

user_sets = [
    { 'u1': [ 'a', 'a', 'c', 'h' ] },
    { 'u2': [ 'b', 'a', 'f' ] },
    { 'u3': [ 'a', 'a', 'f' ] },
]

def compare_sets(set1, set2):
    sum = 0
    for n, item in enumerate(set1):
        if item in set2:
            sum += 1
            del set2[set2.index(item)]
    return sum

for set in combinations(user_sets, 2): 
    comp1, comp2 = set[0], set[1]
    print 'Common items bwteen %s and %s: %s' % (
        comp1.keys()[0], comp2.keys()[0], 
        compare_sets(comp1.values()[0], comp2.values()[0])
    ) 
```

这是输出：

```
u1 和 u2 的共同项目：1
u1 和 u3 的常见项目：2
u2 和 u3 的共同项目：1

```

# emacs - 如何改进这个 Emacs lisp 功能？

> ID：13923283
> 
> 赞同：3
> 
> 时间：2012-12-17T22:26:48.293
> 
> 标签：emacs, elisp

目的是`git grep`用作 的命令`M-x grep`，以及随之而来的所有缓冲好处。所需功能：

*   它读取点的单词/事物作为默认值（完成，排序）
*   如果设置了区域，它将读取当前区域作为默认参数。

以下是我到目前为止的代码：

```
(defun bw-read-string-at-point ()
  (interactive)
  (let ((word (word-at-point)))
    (set-text-properties 0 (length word) nil word)
    word))

(defun bw-git-grep (search-str)
  "Uses `git-grep` to find `search-str`"
  (interactive
   (list
    (read-string (format "Search for (%s): " (bw-read-string-at-point)))))
  (let ((search-str (if (= (length search-str) 0)
                        (bw-read-string-at-point) search-str)))
    (grep (concat "git --no-pager grep -i -I -nH --no-color --extended-regexp " search-str)))) 
```

我觉得`interactive`那里有点笨拙，可以做得更好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T15:04:40.853

实际上，它看起来还不错。除了你应该使用`default' argument of`读取字符串，并且`interactive`in`bw-read-string-at-point`不应该在那里。或者更好的是，只需使用`grep-tag-default`. 这是我如何调整它：

```
(defun bw-git-grep (search-str)
  "Uses `git-grep` to find `search-str`"
  (interactive
   (let ((default (grep-tag-default)))
    (list
     (read-string (format "Search for (default %s): " default)
                  nil nil default))))
  (grep (concat "git --no-pager grep -i -I -nH --no-color --extended-regexp " search-str))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T07:27:01.590

我会使用`read-from-minibuffer`而不是`read-string`：

```
(defun bw-git-grep (pattern)
  (interactive
   (list
    (read-from-minibuffer
     "Search for: "
     (if (region-active-p)
         (buffer-substring-no-properties (region-beginning) (region-end))
       (thing-at-point 'word)))))

  (let* ((grep-command "git --no-pager grep -i -I -nH --no-color --extended-regexp ")
         (command      (concat grep-command pattern))
         (grep-use-null-device nil))
    (grep command))) 
```

此外，您可能需要确保它`grep-use-null-device`是 nil 以避免`grep`附加`/dev/null`到您的命令（这`git`似乎不太喜欢）

# character-encoding - 不确定网络爬虫是否正确读取了我的网站

> ID：13923284
> 
> 赞同：2
> 
> 时间：2012-12-17T22:26:52.510
> 
> 标签：character-encoding, seo, web-crawler

在 W3C 国际化检查器页面 ( [http://validator.w3.org/i18n-checker/](http://validator.w3.org/i18n-checker/) ) 我没有收到关于我的网站[fxrehber.com的语言问题的错误，但是当我在](http://fxrehber.com)[http](http://tools.seobook.com/general/spider-test/)之类的网站上检查我的网站是否有网络爬虫时[://tools.seobook.com/general/spider-test/](http://tools.seobook.com/general/spider-test/)我得到这样的文字：

> SPK Lisansl Forex irketlerinin Kar la t rmalar ve Kullan c Yorumlar FXrehber com Forex irketleri kar la t rma ve yorumlar Forex'te g venle i lem yap n T rkiye'de ofisi bulunan

我的网站是土耳其语的，所以它应该是这样的：

> SPK Lisanslı Forex şirketlerinin Karşılaştırmaları ve Kullanıcı Yorumları FXrehber com Forex şirketleri karşılaştırma ve yorumları Forex'te güvenle işlem yapın Türkiye'de ofisi bulunan

我不确定这是否是正常行为，这对 SEO 来说是个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T22:49:48.617

考虑 tools.seobook.com 服务无用；它显然甚至无法正确读取 UTF-8 数据（在文档正文中 - 它似乎可以让`meta`标签内容正常，使行为更加荒谬）。

如果您在 Google 中搜索例如“SPK Lisanslı Forex şirketlerinin Karşılaştırmaları”，您会看到您的页面放置得很好，Google 正确显示了页面内容的摘录。使用 Bing、Yahoo、Yandex 搜索时也是如此。

# actionscript-3 - JSON & Flex 树控件

> ID：13923287
> 
> 赞同：0
> 
> 时间：2012-12-17T22:27:12.453
> 
> 标签：actionscript-3, apache-flex, c#-4.0, asp.net-web-api, flex4.6

我一直在修改 XML 和使用 XMLList 的 Flex 3 树组件，并将我的 web 服务加载到树的数据提供者中。

但是，我在格式化 XML 时遇到了很多问题，因为我需要它以使其在树中正确显示。

Flex 树是否支持 JSON？它会处理来自 C# ASP.NET WebAPI 调用的 JSON 并相应地填充树吗？还是我需要进行一些数据前处理？

我用谷歌搜索了这个主题无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T10:50:28.003

它将支持带有 label 和 children 属性的 vanilla 对象（您也可以更改树的配置）。但是，最好设置类并将加载的数据解析到此模型中，因为您可以使用 Flex 的便利功能，如强类型和数据绑定。

# jekyll - Jerkyll - 找不到命令

> ID：13923290
> 
> 赞同：0
> 
> 时间：2012-12-17T22:27:35.737
> 
> 标签：jekyll

我在这里通读了整个教程 - [http://jekyllbootstrap.com/lessons/jekyll-introduction.html](http://jekyllbootstrap.com/lessons/jekyll-introduction.html)

在我安装了引擎和主题之后，我希望以下内容能够在本地启动我的网站：

```
jerkyll --server 
```

但

```
command not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:27:35.737

在我意识到这是 jekyll 而不是 jekyll 之前，我花了一些谷歌搜索（无意识地接受谷歌拼写更正的次数）！我的 mac 很容易找到 jekyll 命令 :)

# asp.net - WebApi 上的简单安全设置

> ID：13923292
> 
> 赞同：1
> 
> 时间：2012-12-17T22:27:39.547
> 
> 标签：asp.net, asp.net-mvc, asp.net-web-api, security

我目前正在将我们的内部 CRM 系统暴露在网络上，以便我们的员工可以在网络外部使用它。数据通过 asp.net WebAPI 出现在我们的 Web 应用程序中。

我们在网站上设置了 SSL。但是我在想我还能如何确保 WebAPI 不受恶意使用的影响。我的想法是：

1.  跟踪哪些 IP 地址正在访问 WebAPI，并且只允许我们验证的地址来自员工。具有动态 IP 地址的问题，我们可能会不断更新有效 IP 地址的数据存储。

2.  用户必须登录系统。因此，对 webapi 的每个请求都将发送他们的登录详细信息，这些详细信息将在 webapi 处理任何请求之前进行验证。

3.  使用 webAPI 传递设备的设备 ID 并验证（与想法 1 中的 IP 地址跟踪几乎相同）

4.  拥有一个唯一的客户端生成的访问令牌，这在服务器端非常匹配。

有人对我概述的安全想法有任何建议吗？是太少还是矫枉过正？

只是想确保数据不会被黑客入侵，因为如果被黑客入侵，我的屁股就会上线。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:36:43.333

我实际上会选择一个完全不同的解决方案 - 更新有效的动态 IP 将是地狱​​。

我会：

1.  使用“Intranet Application”而不是“Internet Application”创建一个新项目
2.  在本地办公网络上托管应用程序
3.  为您的同事设置 VPN 到您的办公室

这个解决方案对您来说可行吗？

# entity-framework-5 - 在 fluent API 中使用枚举

> ID：13923296
> 
> 赞同：1
> 
> 时间：2012-12-17T22:27:53.553
> 
> 标签：entity-framework-5

[这个 SO question](https://stackoverflow.com/questions/7490530/how-can-i-map-an-enum-using-entity-framework-4-1-fluent-api)询问有关在 Entity Framework 4.1 中使用 fluent API 的枚举，结果证明这不受支持。现在 Entity Framework 5 支持吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T22:46:25.367

.NET Framework 4.5 的 EF5 和 .NET Framework 4 和 .NET Framework 4.5 的 EF6 都支持枚举 - 您可以在此处找到更多详细信息：[Enum type not being mapped to DB table](https://stackoverflow.com/questions/13407957/enum-type-not-being-mapped-to-db-table/13443527#13443527)。枚举在 EF 中仅用于属性，因此您可以像配置原始属性一样配置它们。在引擎盖下，枚举值被转换为底层枚举类型并作为存储类型对应于底层枚举类型的值存储在数据库中（即，如果枚举类型具有底层类型的每个字节，则使用此枚举类型的属性值将是以 smallint 形式存储在 SqlServer 中）。

# javascript - 引导 javascript 或弹出窗口不起作用

> ID：13923297
> 
> 赞同：6
> 
> 时间：2012-12-17T22:27:56.830
> 
> 标签：javascript, twitter-bootstrap, popover

我的引导程序有问题。似乎 JS 以某种方式无法正常工作，因为即使是最简单的弹出框示例也无法正常工作。(http://jsfiddle.net/weuWk/363/) 如果在我的源代码中使用，这段在 JSFiddle 上正常工作的小代码只是创建一个按钮（没有悬停功能）。

Modal-Plugin 实际上正在工作，所以这应该意味着我以正确的方式包含了 js 文件。无论如何我都会复制它：

```
 <script src="js/bootstrap.min.js"></script>
 <script src="http://code.jquery.com/jquery-latest.js"></script> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-17T22:30:00.223

jQuery 需要在 bootstrap 的 javascript 之前包含，因为 bootstrap 只是 jQuery“插件”。

您应该在此订单中包括：

1.  jQuery
2.  引导程序
3.  你的 Javascript

**编辑：在结束正文标记之前尝试此操作**

```
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="js/bootstrap.min.js"></script>
<script> 
$(function(){
    $('#test').popover();​
});
 </script> 
```

此外，控制台是您的朋友。检查并确保没有错误。

解决了：

解决方案： > 包含的正确顺序 > 修复我从我的 js 控制台得到的错误。

# r - 是否有解决 R 2.15.2 中 do.call(cbind.xts,...) 性能缓慢的问题？

> ID：13923301
> 
> 赞同：8
> 
> 时间：2012-12-17T22:28:23.777
> 
> 标签：r, xts

我希望`cbind.xts`并`do.call(cbind.xts)`以类似的经过时间执行。R2.11、R2.14 也是如此。

对于 R2.15.2 和**xts** 0.8-8，`do.call(cbind.xts,...)`变体的执行**速度非常慢**，这有效地破坏了我之前的代码。

正如 Josh Ulrich 在下面的评论中指出的那样，**xts**包的维护者已经意识到了这个问题。同时，有没有方便的工作？

可重现的例子：

```
library(xts)

secs <- function (rows, from = as.character(Sys.time()), cols = 1, by = 1) 
{
    deltas <- seq(from = 0, by = by, length.out = rows)
    nacol <- matrix(data = NA, ncol = cols, nrow = rows)
    xts(x = nacol, order.by = strptime(from, format = "%Y-%m-%d %X") + 
        deltas)
}

n <- 20
d1 <- secs(rows=n*100,cols=n)
d2 <- secs(rows=n*100,cols=n)

system.time(cbind.xts(d1,d2)) 
```

相对

```
system.time(do.call(cbind.xts, list(d1,d2))) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T00:39:13.827

一种解决方法是设置`quote=TRUE`.`do.call`

```
R> system.time(cb <- cbind.xts(d1,d2))
   user  system elapsed 
  0.004   0.000   0.004 
R> system.time(dc <- do.call(cbind.xts, list(d1,d2), quote=TRUE))
   user  system elapsed 
  0.000   0.004   0.004 
R> identical(cb,dc)
[1] TRUE 
```

缓慢是`do.call`由默认情况下在评估函数调用之前评估参数引起的，这导致调用更大。例如，比较这两个调用：

```
call("cbind", d1, d2)                # huge
call("cbind", quote(d1), quote(d2))  # dainty 
```

# jquery - jQuery Validator，重置密码字段和消息

> ID：13923308
> 
> 赞同：3
> 
> 时间：2012-12-17T22:29:28.363
> 
> 标签：jquery, jquery-validate

我正在使用 jQuery Validation 插件进行表单字段验证。想法是，如果表单提交上的任何字段不是有效的密码字段并且它们的错误消息将重置，而其他字段仍然存在。我已经设法重置密码字段，但我无法删除错误消息。

代码在这里：http: [//jsfiddle.net/2Z9jp/](http://jsfiddle.net/2Z9jp/)

如果您为所有字段输入无效值并提交，密码输入字段将为空，但它们的错误仍然存​​在。我想要的是在这种情况下删除密码字段的错误消息。

似乎高亮发生在 invalidHandler 之后，这导致了这个问题。

这是代码：

```
<form id="registerForm" class="regForms" method="post" action="/">

        <span>username: </span><input type="text" id="username" name="username" /><br />
        <span class="passwordHolder">
            <span>password: </span><input type="password" id="password1" name="password1" /><br />
        </span>
        <span class="passwordHolder">
            <span>confirm password: </span><input type="password" id="password2" name="password2" /><br />
        </span>

        <input type="submit" />
    </div>
</form>

$("#registerForm").validate({
    rules: {
        username: {
            required: true,
            minlength: 6
        },
        password1: {
            required: true,
            minlength: 6,
            maxlength: 256
        },
        password2: {
            required: true,
            equalTo: "#password1",
            minlength: 6,
            maxlength: 256
        }
    },

    messages: {
        username: {
            required: "required",
            minlength: "should be 6 or longer"
        },
        password1: {
            required: "required",
            minlength: "should be 6 or longer"
        },
        password2: {
            required: "required",
            minlength: "should be 6 or longer",
            equalTo: "should be the same as password"
        }
    },

    invalidHandler: function(form, validator) {
        $(':password').val('');
        $('.passwordHolder label.error').hide();
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:52:34.777

提交表单时，您可以像这样检查：

```
$("#registerForm").submit(function(){
    if ($("#password1").valid() == true ) {
       alert('Ok');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:51:04.607

我认为您的建议是绝对正确的，即高亮显示在 invalidHandler 之后。我认为您应该使用 errorPlacement 方法。文档可以在这里找到：

[http://docs.jquery.com/Plugins/Validation/validate#toptions](http://docs.jquery.com/Plugins/Validation/validate#toptions)

您可以检查密码类型的元素并在这种情况下省略错误放置。

另外一些代码：

```
$("#myform").validate({
  errorPlacement: function(error, element) {
        if(!element.is(':password'))
              element.after(error);
   },
   debug:true
 }) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:33:57.270

问题是调用`label.error`后添加的。`invalidHandler`

一个快速的解决方法可能是使用 setTimeout

```
setTimeout(function() {
            $('.passwordHolder label.error').hide();
          },100); 
```

# android - 无法从应用发布 - 报告错误的负面反馈

> ID：13923309
> 
> 赞同：1
> 
> 时间：2012-12-17T22:29:32.670
> 
> 标签：android, facebook, facebook-android-sdk

当我使用 Android Facebook SDK 从我的应用程序发布到我的墙上时，我在屏幕上看到消息框说：

> **帖子被阻止到上一个...** - 您尝试分享的内容已收到来自 Facebook 用户的大部分负面反馈。

然而，我的应用在 FB 上的见解显示没有任何负面反馈，今年有数万次展示。我现在收到用户对我的应用程序的负面评论，他们希望与他们的朋友分享东西，但不能！

其他用户在开发应用程序时可能会遇到类似的问题，因此为什么这个问题不是题外话。所以也许 FB 工程师可以调查一下我的应用程序 ID：285845051491947（Mood Meter）

这是怎么回事，为什么我的用户不能把东西贴到他们的墙上？

代码：

```
 if (facebook.isSessionValid())
  {
     Bundle params = new Bundle();
     params.putString("name", "Mood Meter for Android");
     params.putString("link", "https://www.facebook.com/MoodMeter");
     params.putString("caption", caption);
     params.putString("picture", "http://dl.dropbox.com/u/15008117/moodmeter/green_happy2.png");

     params.putString("description", desc+"Obtained from Mood Meter for android - download it today to see how happy you really are!");
     facebook.dialog(context, "feed", params, new DialogListener ()
     {

        .... 
```

# gwt - GWT FormPanel - 避免重定向

> ID：13923310
> 
> 赞同：0
> 
> 时间：2012-12-17T22:29:46.280
> 
> 标签：gwt

我有一个 FormPanel，它向服务器发送一个 POST 请求：

```
form.setAction("http://servlet_address") 
```

问题是，在触发 submit() 后，表单面板将页面重定向到“http://servlet_address”（发送请求的位置），但此操作是不需要的，因为 servlet 只是接收数据。如何避免这种重定向行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:56:25.217

这是一种标准的 HTML 表单行为。当您提交表单时，您实际上使用 HTTP 请求将表单数据发送到服务器。“方法”属性允许您定义对表单数据（URL 或 HTTP 请求正文）进行编码的位置。并且表单提交（HTTP 请求）的结果将显示在您的浏览器中。

据我了解，您想覆盖此行为。有几种方法可以做到这一点。所有这些都需要您手动处理表单数据并生成正确的请求。这意味着您不能提交表单。GWT 与服务器通信有两种常见的模式：

1.  GWT-RPC ( [https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC](https://developers.google.com/web-toolkit/doc/latest/tutorial/RPC) )
2.  请求工厂（[https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory](https://developers.google.com/web-toolkit/doc/latest/DevGuideRequestFactory)）

如果您有 Java Server 后端，它们都很容易使用。如果您需要将数据提交到非 java we-server，则只能使用 Request Factory，这是一项复杂的任务。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T09:45:51.217

请参阅以下代码，无需重定向即可正常工作（此代码在 onModuleLoad() 方法中正常工作）：

```
final FormPanel formPanel = new FormPanel();
formPanel.setEncoding(FormPanel.ENCODING_MULTIPART);
formPanel.setMethod(FormPanel.METHOD_POST);

VerticalPanel verticalPanel = new VerticalPanel();
verticalPanel.add(new Label("Username"));
TextBox userid = new TextBox();
userid.setName("username");
verticalPanel.add(userid);

verticalPanel.add(new Label("Password"));
PasswordTextBox passwd = new PasswordTextBox();
passwd.setName("pass");
verticalPanel.add(passwd);

verticalPanel.add(new Button("Submit", new ClickHandler() {

    @Override
        public void onClick(ClickEvent event) {
    formPanel.submit();
    }
}));

formPanel.add(verticalPanel);

formPanel.setAction("submit"); // e.g. servlet URL

// Add an event handler to the form.
formPanel.addSubmitHandler(new FormPanel.SubmitHandler() {
    public void onSubmit(SubmitEvent event) {
    // This event is fired just before the form is submitted. We can
    // take
    }
});
formPanel.addSubmitCompleteHandler(new FormPanel.SubmitCompleteHandler() {
    public void onSubmitComplete(SubmitCompleteEvent event) {
    // When the form submission is successfully completed,
    // this event is fired.
    Window.alert(event.getResults());
    }
});

RootPanel.get().add(formPanel); 
```

玩得开心。

# python - 为 python 2.7 安装 configobj

> ID：13923315
> 
> 赞同：2
> 
> 时间：2012-12-17T22:30:14.443
> 
> 标签：python, configobj

对不起，我是一个 Python 程序，我只是想确保我以正确的方式安装这个库。

我正在尝试为 Python 2.7 安装 configObj

我应该浏览到解压缩所在的目录和 python.exe setup.py 吗？如果我这样做，它会安装到正确的位置吗？我知道这看起来很基本，但我不经常使用 python，所以我只是想确保这个库似乎没有 windows msi。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-27T13:31:40.813

```
pip install configobj 
```

Tt 对于 Linux 版本也是一样的，只要你有 pip。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T21:54:06.970

按照 Tibo 提供的链接，我使用`pip install configobj`. [按照这篇文章](https://stackoverflow.com/questions/4750806/how-to-install-pip-on-windows)，您可以在 Windows 上获得点子。

# z3 - 不可打印的 Solver.model()

> ID：13923316
> 
> 赞同：1
> 
> 时间：2012-12-17T22:30:38.100
> 
> 标签：z3, z3py

以下程序使用 master git 分支 (commit 89c1785b) 中的最新版本 Z3 生成无法打印的 Z3 模型（即`print solver.model()`抛出异常）：

```
x = Int('x')
a = Array('a', IntSort(), BoolSort())
b = Array('b', IntSort(), BoolSort())
c = Array('c', BoolSort(), BoolSort())

e = ForAll(x, Or(Not(a[x]), c[b[x]]))
print e

solver = Solver()
solver.add(e)
c = solver.check()
print c
if c == sat:
    print solver.model() 
```

产生：

```
ForAll(x, Or(Not(a[x]), c[b[x]]))
sat
Traceback (most recent call last):
  File "z3bug.py", line 16, in <module>
    print solver.model()
  File "src/api/python/z3.py", line 5177, in __repr__
  File "src/api/python/z3printer.py", line 939, in obj_to_string
  File "src/api/python/z3printer.py", line 841, in __call__
  File "src/api/python/z3printer.py", line 831, in main
  File "src/api/python/z3printer.py", line 760, in pp_model
  File "src/api/python/z3printer.py", line 794, in pp_func_interp
  File "src/api/python/z3.py", line 5088, in else_value
  File "src/api/python/z3.py", line 818, in _to_expr_ref
  File "src/api/python/z3core.py", line 2307, in Z3_get_ast_kind
z3types.Z3Exception: 'invalid argument' 
```

我还可以在[http://rise4fun.com/Z3Py/lfQG](http://rise4fun.com/Z3Py/lfQG)的在线 z3py 界面中重现相同的行为。稍微多一点的调试表明模型的赋值`c`是`z3.FuncInterp`在你调用`else_value()`它时抛出一个“无效参数”异常。

这是 Z3 中的错误，还是我的期望不太正确？我的期望是应该总是可以得到`else_value()`a `FuncInterp`，否则它不是一个完整的功能，但也许这并不总是正确的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:23:27.203

这是 Z3 Python 打印机中的一个错误。我修复了该错误，并且该修复程序已在 codeplex 上可用。

[http://z3.codeplex.com/SourceControl/changeset/f8014f54c18a](http://z3.codeplex.com/SourceControl/changeset/f8014f54c18a)

为了得到修复（现在），我们必须检索“work-in-progress”（`unstable`）分支。该修复程序将`master`在下一个正式版本的分支中提供。要检索`unstable`分支，我们应该使用：

```
git clone https://git01.codeplex.com/z3 -b unstable 
```

另一种选择是使用`print solver.model().sexpr()`. 它将使用 Z3 内部打印机而不是基于 Python 的打印机。

关于`else_value()`，其值可能未由 Z3 指定。它的意思是：它是一个“不在乎”。也就是说，可以使用任何解释来满足该公式。我还修复了 Z3 Python API在未指定`None`时返回。`else_value`

# python - 解析化学式

> ID：13923325
> 
> 赞同：4
> 
> 时间：2012-12-17T22:31:19.890
> 
> 标签：python, parsing

解析：编写一个函数，该函数将接受一个表示化学物种的字符串并返回一个由元素和相应下标组成的元组列表。在没有下标的情况下，下标应为 1。示例：使用以下输入调用您的函数：

`H2SO4`

应返回以下输出：

`[('H', 2), ('S', 1), ('O', 4)]`

所以我正在尝试做一个项目，但我不知道如何开始它

谁能帮助我如何开始？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T22:33:53.843

以下将带您完成 90% 的过程：

```
In [6]: re.findall(r'([A-Z][a-z]*)(\d*)', 'H2SO4')
Out[6]: [('H', '2'), ('S', ''), ('O', '4')] 
```

剩下的 10% 留给读者作为练习（毕竟这是作业）。

提示：一个简单的列表推导可以完成剩下的工作。

# c++ - 将有理数转换为整数

> ID：13923330
> 
> 赞同：-1
> 
> 时间：2012-12-17T22:31:54.420
> 
> 标签：c++, integer, decimal, digits, rational-numbers

我怎样才能将有理数`1.24234`或`45.314`转换成整数`124234`或`45314`获得小数位数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:37:40.463

转换为字符串

找到小数点的位置。

从上述字符串的长度中减去它，得到小数位数。

然后从字符串中取出点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:42:27.197

```
int i=0;
float a = 1.24234;

for(i; i<20; i++){
    float b=pow(10,i);
    if((a*b)%10==0)
        break;
}
int c = pow(10,i-1);
int result = a*c; 
```

我认为这段代码会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:29:33.720

如果您的号码是 WD (Whole.Decimal)

要获得 W，只需执行 (int)WD 要获得 D，您可以执行 WD - (int) WD

现在你的整数和小数点分开了。要计算出 W 上的 x10 乘数，请继续将 D 除以 10，直到得到小于 10 的结果。

现在：WxN+D（其中 N 是你除以 10 的次数）

注意：我没有写代码作为例子，因为我觉得这可能是一个家庭作业。此外，如果您使用的时间很长（即：精确的浮点数），这将不成立，并且可能会溢出。在实施这样的事情之前检查你的界限。

# php - PHP 和 SQL 2008 - 截断表不起作用

> ID：13923331
> 
> 赞同：0
> 
> 时间：2012-12-17T22:32:04.107
> 
> 标签：php, sql, sql-server-2008

为什么这张表不会被截断？不返回错误。如果我在 SQL Server Management Studio 中运行截断 SQL，它会正常截断。

```
$truncate = "USE energyDB truncate table temp_energydata";

// Initiate connection to energyDB MS SQL server
    $connection = sqlsrv_connect($serverName, $connectionInfo);

    if( $connection ) {
     echo "Connection established.";
}else{
     echo "Connection could not be established.<br />";
     die( print_r( sqlsrv_errors(), true));
}

    // Start the query on the Database server
    $statement = sqlsrv_query($connection,$truncate);

    if( $statement ) {
     echo "Truncate Query completed.";
}else{
     echo "Query not completed.<br />";
     die( print_r( sqlsrv_errors(), true)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-08-15T12:26:31.097

@user1745767

$truncate = "使用 energyDB 截断表 [temp_energydata]";

像这样尝试也需要几个小时才能见面。

# .net - 等待异步方法回调

> ID：13923339
> 
> 赞同：0
> 
> 时间：2012-12-17T22:32:42.470
> 
> 标签：.net, visual-studio-2010, silverlight-4.0, c#-3.0

我想等到调用回调方法结束，然后继续我的工作。我试过类似的东西：

```
ThreadPool.QueueUserWorkItem(_ =>
{
    DoWOrk(callbackmethod, inputstring);
    ctx.Post(state => { }.null); 
```

但是在调用 ot DOwork 后回调没有触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:55:32.967

```
var tcs = new TaskCompletionSource<object>();
DoWork(() => { //wrap callback
  callbackmethod(); //call original callback
  tcs.SetResult(null); //signal task
}, inputstring);

var task = tcs.Task; //await this task or use ContinueWith 
```

# python - 从外部应用程序记录

> ID：13923344
> 
> 赞同：5
> 
> 时间：2012-12-17T22:33:10.237
> 
> 标签：python, logging

我正在编写一个研究工具，我最近从使用“打印”语句切换到使用 Python 内置的记录器功能。我推断，这将允许我为用户提供将输出转储到文件的选项，除了将其转储到屏幕上。

到目前为止，一切都很好。我在 Python 中的代码部分使用“logger.info”和“logger.error”转储到屏幕和文件。“logger”是模块范围的记录器。这部分就像一个魅力。

但是，在某些情况下，我使用“subprocess.call”通过 shell 运行可执行文件。所以，在整个代码中，我有类似的行

```
proc = subprocess.call(command) 
```

该命令的输出将一如既往地打印到屏幕上，但不会转储到用户指定的文件中。

一种可能的选择是打开文件的管道：

```
proc = subprocess.call(command, stdout=f, stderr=subprocess.OUTPUT) 
```

但这只会转储到文件而不是屏幕上。

基本上，我的问题归结为：有没有一种方法可以利用我现有的记录器，而不必为专门用于 subprocess.call 的文件构建另一个处理程序？（也许通过将输出重定向到记录器？）或者这是不可能的，给定当前的设置？如果是后者，我该如何改进设置？

（哦，另外，如果日志记录是“实时”的，那就太好了，这样来自可执行文件的消息就会在收到时被记录下来。）

谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:50:07.877

`stdout`您可以将其通过管道传输到 a ，而不是通过管道传输到文件，`PIPE`然后从该 PIPE 读取并写入记录器。像这样的东西：

```
proc = subprocess.Popen(command, stdout=subprocess.PIPE, stderr=subprocess.OUTPUT)
for line in proc.stdout:
    logging.info(line) 
```

但是，还有一个更简单的答案：您必须使用带有文件句柄的类文件对象，但您可以在将每一行传递到`logging`. 你可以自己写这个对象，但是，正如@unutbu 所说，有人已经在[这个问题](https://stackoverflow.com/questions/4713932/decorate-delegate-a-file-object-to-add-functionality/4838875#4838875)中完成了。所以：

```
with StreamLogger(logging.INFO) as out:
    proc = subprocess.call(command, stdout=out, stderr=subprocess.OUTPUT) 
```

当然，您也可以临时包装`stdout`以写入记录器，然后将输出通过，例如，使用[这个令人困惑的同名类](https://gist.github.com/2376336)：

```
with StreamLogger('stdout'):
    proc = subprocess.call(command, stderr=subprocess.OUTPUT) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T23:55:08.107

[`unutbu`的评论](https://stackoverflow.com/questions/13923344/logging-from-an-external-application/13924261#comment19194831_13923344)很好；你应该看看[Lennart 的回答](https://stackoverflow.com/a/4838875/)。

您需要的是类似 的功能`tee`，但该`subprocess`模块在操作系统句柄级别工作，这意味着您的 Python 代码无法看到由子进程写入的数据，例如您编写的一些类似文件的对象，哪些日志并打印写入其中的任何内容。

除了使用 Lennart 的答案外，您还可以使用第三方库（如[`sarge`](http://sarge.readthedocs.org/en/latest/)（披露：我是它的维护者）来做这种事情。它不仅适用于日志记录。假设您有一个生成输出的程序，例如：

```
# echotest.py
import time
for i in range(10):
    print('Message %d' % (i + 1)) 
```

并且您想在脚本中捕获它，将其记录下来并将其打印到屏幕上：

```
#subptest.py
from sarge import capture_stdout
import logging
import sys

logging.basicConfig(filename='subptest.log', filemode='w',
                    level=logging.INFO)

p = capture_stdout('python echotest.py', async=True)
while True:
    line = p.stdout.readline()
    line = line.strip()
    # depending on how the child process generates output,
    # sometimes you won't see anything for a bit. Hence only print and log
    # if you get something
    if line:
        print(line)
        logging.info(line)

    # Check to see when we can stop - after the child is done.
    # The return code will be set to the value of the child's exit code,
    # so it won't be None any more.

    rc = p.commands[0].process.poll()
    # if no more output and subprocess is done, break
    if not line and rc is not None:
        break 
```

如果你运行上面的脚本，你会被打印到控制台：

```
$ python subptest.py 
Message 1
Message 2
Message 3
Message 4
Message 5
Message 6
Message 7
Message 8
Message 9
Message 10 
```

当我们检查日志文件时，我们看到：

```
$ cat subptest.log 
INFO:root:Message 1
INFO:root:Message 2
INFO:root:Message 3
INFO:root:Message 4
INFO:root:Message 5
INFO:root:Message 6
INFO:root:Message 7
INFO:root:Message 8
INFO:root:Message 9
INFO:root:Message 10 
```

# c# - 通过另一个过滤列表

> ID：13923351
> 
> 赞同：3
> 
> 时间：2012-12-17T22:33:43.220
> 
> 标签：c#, linq

我需要根据客户在过去 x 个月内是否没有预订任何工作来过滤客户列表。在我的代码中，我有两个列表，一个是我的客户，另一个是从今天到 x 个月前过滤的工作列表，这个想法是根据他们没有出现在工作列表中的 ID 来过滤客户。我尝试了以下方法：

```
filteredClients.Where(n => jobsToSearch.Count(j => j.Client == n.ClientID) == 0).ToList(); 
```

但无论如何，我似乎得到了所有客户。我可以很容易地做一个 foreach 但这会严重减慢这个过程。如何有效地根据工作列表过滤客户列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:45:50.110

您做错的主要事情是您没有将结果分配回某事。这就是为什么您的原件似乎保留了所有客户。但是我们仍然可以在原来的基础上改进：

```
filteredClients = filteredClients.Where(n => !jobsToSearch.Any(j => j.Client == n.ClientId)).ToList(); 
```

这与您的`.Count()`解决方案之间的区别在于`.Any()`，一旦遇到第一个匹配项，就可以停止查看每个客户端的作业列表，因此它应该运行得更快一些。但我们还没有完成。通过将工作列表缩小到仅不同的客户，我们可以做得更好：

```
var badClients = jobsToSearch.Select(j => j.Client).Distinct().ToList();
filteredClients = filteredClients.Where(n => !badClients.Any(j => j == n.ClientId)).ToList(); 
```

使用[HashSet](http://msdn.microsoft.com/en-us/library/bb359438.aspx)可能会更好，它可以像字典一样进行 O(1) 查找。假设客户端 ID 是一个 int：

```
 var badClients = new HashSet<int>(jobsToSearch.Select(j => j.Client));
 filteredClients = filteredClients.Where(n => !badClients.Contains(n.ClientId)).ToList(); 
```

最后一个选项是否表现更好取决于有工作的客户数量......如果列表很短， .Distinct() 可能仍然会做得更好。

最后，我通常不建议`.ToList()`这样打电话。尽可能将实际实现 List、Array 或集合类型保存到最后一刻，并尽可能长时间地将其保留为 Enumerable。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:45:17.097

您是否考虑过使用“groupby”？

没有检查语法和编写代码（havnt vs available atm）：

```
var groupedJobs = jobsearch.GroupBy(job => job.Client);
var itemsWithJobs = filteredList.Where(item => groupedJobs.ContainsKey(item.ClientID)); 
```

明天早上我可以检查语法。

最大的优点是，您已经建立了一个字典，在其中搜索要快得多。比迭代列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:42:11.440

过滤属于`in`IdList 的客户；

```
List1.Where(x=> IdList.Contains(x.ClientId)); 
```

过滤属于`not in`IdList 的客户；

```
List1.Where(x=> !IdList.Contains(x.ClientId)); 
```

# wordpress - 在 WordPress 管理栏上方添加菜单栏

> ID：13923352
> 
> 赞同：0
> 
> 时间：2012-12-17T22:33:43.370
> 
> 标签：wordpress

我希望在管理区域的 WordPress 管理栏上方添加我们自己的服务菜单。我不想破解 WordPress 系统，但我找不到钩子。

有方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:50:19.907

您可以在管理员菜单栏中添加额外的菜单项，而不是删除/替换菜单栏。

下面是一个示例，它将插入一个带有两个子菜单项的菜单项。只需将代码粘贴到您的`functions.php`并登录到您的`WordPress`as `admin`。如果一切顺利，那么您可以在管理员栏中看到一个额外的菜单。为此，WordPress 提供了`admin_bar_menu`钩子：

```
add_action('admin_bar_menu', 'my_custom_menu', 1000);
function my_custom_menu()
{
    global $wp_admin_bar;
    if(!is_super_admin() || !is_admin_bar_showing()) return;
    // Add Parent Menu
    $argsParent=array(
        'id' => 'myCustomMenu',
        'title' => 'Services',
        'href' => false
    );
    $wp_admin_bar->add_menu($argsParent);

    // Add Sub Menus
    $argsSub1=array(
        'parent' => 'myCustomMenu',
        'title' => 'Visit Heera IT',
        'href' => 'http://heera.it',
         'meta' => array('target' => '_blank')
    );
    $wp_admin_bar->add_menu($argsSub1);
    $argsSub2=array(
        'parent' => 'myCustomMenu',
        'title' => 'Visit StackOverflow',
        'href' => 'http://stackoverflow.com/',
        'meta' => array('target' => '_blank')
    );
    $wp_admin_bar->add_menu($argsSub2);
} 
```

有关更多详细信息，您可以[访问 Codex](http://codex.wordpress.org/Function_Reference/add_menu)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T05:13:08.630

您还可以使用一个插件来完成此操作，该插件允许您轻松自定义 WordPress 管理栏的内容和外观。以下是一些需要考虑的插件：

[插件#1](http://wordpress.org/extend/plugins/ag-custom-admin/)

[插件#2](http://wordpress.org/extend/plugins/custom-adminbar-menus/)

[插件#3](http://wordpress.org/extend/plugins/wp-custom-admin-bar/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-30T09:07:09.193

```
$wp_admin_bar->add_menu(array
    (
        "parent" => "bba_booking_bank",
        "id"     => "bba_booking_bank_location",
        "title"  => $bba_location_providers_wizard_setup,
        "href"   => admin_url("admin.php?page=booking_bank"),
    ));
    $wp_admin_bar->add_menu(array
    (
        "parent" => "bba_booking_bank",
        "id"     => "bba_booking_bank_calendar",
        "title"  => $bba_booking_bank_calendar,
        "href"   => admin_url("admin.php?page=bba_booking_calendar"),
    )
); 
```

# xcode - 有没有一种简单的方法可以替换 Xcode 中已弃用的方法调用？

> ID：13923353
> 
> 赞同：1
> 
> 时间：2012-12-17T22:33:52.243
> 
> 标签：xcode, refactoring, automated-refactoring

因此，iOS 6 弃用了`presentModalViewController:animated:`and `dismissModalViewControllerAnimated:`，并将它们分别替换为`presentViewController:animated:completion:`and `dismissViewControllerAnimated:completion:`。我想我可以使用 find-replace 来更新我的应用程序，尽管使用这些`present*`方法会很尴尬，因为每次要呈现的控制器都不同。我知道我可以使用正则表达式来处理这种情况，但我对正则表达式感到不舒服，无法尝试将它与我的 1000+-files-big 应用程序一起使用。

所以我想知道：Xcode 是否有一些神奇的“更新不推荐使用的方法”命令或其他东西？我的意思是，我已经在上面描述了我的特殊情况，但总的来说，每个操作系统版本都会出现弃用。有没有比简单地使用查找替换更好的方法来更新应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T01:17:07.167

您可能对[程序转换系统](http://en.wikipedia.org/wiki/Program_transformation)感兴趣。

这些是可以自动修改源代码的工具，使用模式导向的源到源转换（“如果你看到*这个*源级模式，用*那个*源级模式替换它”）对代码结构而不是文本进行操作。如果处理得当，这些转换可以是可靠且语义正确的，并且它们比导航和破坏纳米级实际树结构的低级程序代码更容易编写。

使用这些工具并非易事。这些工具必须知道如何将感兴趣的语言解析为编译器数据结构（例如，ObjectiveC），处理模式，并从修改后的结构重新生成可编译的源代码。即使使用基本的转换引擎，也需要有人为感兴趣的语言的方言仔细定义解析器（和反解析器！）。即使你有这样的解析器/反解析器，学习如何使用它也需要时间。如果您需要进行的更改是“常规的”（在程序转换意义上，而不是正则表达式意义上）并且广泛（就像您的那样），这是值得的。

我们的 DMS 软件再造工具包有一个 ObjectiveC 前端，并且可以进行这样的转换。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T22:35:26.760

不，没有这样的魔法

# python - 为什么在控制台和管道中打印 unicode 字符串时 python 的行为不一样？

> ID：13923355
> 
> 赞同：2
> 
> 时间：2012-12-17T22:33:58.800
> 
> 标签：python, encoding, stdout

经过几次测试后，我设法在下面的最小 test.py 脚本中限制了功能错误：

```
# -*- coding: iso-8859-1 -*-
print u"Vérifier l'affichage de cette chaîne" 
```

注意：test.py 以 ISO-8859-1（即 latin-1）编码，即“é”等于“\xe9”，“î”等于“\xee”

```
D:\test>python --version
Python 2.7.3
D:\test>python test.py
Vérifier l'affichage de cette chaîne
D:\test>python test.py > test.log
Traceback (most recent call last):
  File "test.py", line 2, in <module>
    print u"VÚrifier l'affichage de cette cha¯ne"
UnicodeEncodeError: 'ascii' codec can't encode character u'\xe9' in position 1: ordinal not in range(128) 
```

这是问题：

为什么 python 在打印 unicode 字符串时的行为不一样，无论它的标准输出是到控制台还是被重定向或通过管道传输到其他东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T23:00:22.650

首先，`ISO-8859-1`不是有效的编码声明。你想要`iso-8859-1`。如果您查看[文档](http://docs.python.org/2/library/codecs.html)，您可以将其称为`latin_1`, `iso-8859-1`, `iso8859-1`, `8859`, `cp819`, `latin`, `latin1`, or `L1`，但不是`ISO-8859-1`。

它看起来像是`codecs.lookup`向后弯腰接受错误的输入，包括进行不区分大小写的查找。如果您追溯[`codecs.lookup`](http://hg.python.org/cpython/file/2.7/Lib/codecs.py)至[`_codecs.lookup`](http://hg.python.org/cpython/file/2.7/Modules/_codecsmodule.c)，[`_PyCodec_Lookup`](http://hg.python.org/cpython/file/2.7/Python/codecs.c)您可以看到以下评论：

```
/* Convert the encoding to a normalized Python string: all
   characters are converted to lower case, spaces and hyphens are
   replaced with underscores. */ 
```

但是源文件解码不会经过相同的编解码器查找过程。因为它发生在编译时而不是运行时，所以没有理由这样做。（无论如何，说“它似乎有效，即使文档说它是错误的......那为什么它不能完全正确？”首先有点愚蠢。）

为了演示，如果我创建两个 Latin-1 文件：

坏代码.py：

```
# -*- coding: ISO-8859-1 -*-
print u"Vérifier l'affichage de cette chaîne" 
```

好代码.py：

```
# -*- coding: iso-8859-1 -*-
print u"Vérifier l'affichage de cette chaîne" 
```

第一个失败，第二个成功。

现在，为什么它在控制台时“工作”但在管道时引发异常？

好吧，当您打印到 Windows 控制台或 Unix TTY 时，Python 有一些代码可以尝试猜测要使用的正确编码。（我不确定在 Windows 上会发生什么；据我所知，它甚至可能使用 UTF-16 输出。）当您不打印到控制台/TTY 时，它不能这样做，所以您必须明确指定编码。

您可以通过查看 、 和 来了解正在发生的`sys.stdout.isatty()`一些`sys.stdout.encoding`事情`sys.getdefaultencoding()`。以下是我在不同情况下在 Mac 上看到的内容：

*   Python 2，无重定向：`True, UTF-8, ascii, Vérifier`
*   Python 3，无重定向：`True, UTF-8, utf-8, Vérifier`
*   Python 2，重定向：`False, None, ascii, UnicodeEncodeError`
*   Python 3，重定向：`False, UTF-8, utf-8, Vérifier`

如果`isatty()`,`encoding`将是 TTY 的适当编码；否则，`encoding`将是默认值，即 2.x 中的`None`(meaning `ascii`)，并且 (我认为 - 我必须检查代码) 基于`getdefaultencoding()`3.x 中的某些内容。这意味着如果您尝试`stdout`在 2.x 中不是 TTY 时打印 Unicode，它将尝试将其编码为`ascii`, `strict`，如果您有非 ASCII 字符，这将失败。

如果您以某种方式知道要使用哪种编解码器，则可以在打印时通过检查`isatty()`并编码到该编解码器（或者甚至是`ascii`，`ignore`而不是`strict`，如果您愿意）手动处理此问题，而不是尝试打印 Unicode。（如果你知道你想要什么编解码器，你甚至可能希望在 3.x 中这样做——如果你试图生成 Windows-1252 文件，默认为 UTF-8 并没有太大帮助……）

那里的差异实际上与Latin-1无关。试试这个：

无码.py：

```
print u"V\xe9rifier l'affichage de cette cha\xeene"
print u"V\u00e9rifier l'affichage de cette cha\u00eene" 
```

我为我的 Mac 终端获取了编码为 UTF-8 的 Unicode 字符串，并且（显然）为我的 Windows cmd 窗口获取了 Windows-1252，但异常重定向到一个文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-01T19:04:25.737

因为我来这里是为了寻找“不要聪明”切换到 python 的 print() 并且答案提供了只读变量的提示，所以这里是“让 python 相信 stdout 可以处理 utf-8”片段：

```
import sys, codecs

# somewhere in the function you need it or global main():
sys.stdout = codecs.open('/dev/stdout', encoding='utf-8', mode='w', errors='strict') 
```

在那里，现在 python 不在乎它是 tty、tee(1)、文件重定向还是只是 cat(1)。

# ios - EAGLContext_presentRenderBuffer 在 OpenGLES 压力测试中花费了大部分时间

> ID：13923357
> 
> 赞同：1
> 
> 时间：2012-12-17T22:34:12.273
> 
> 标签：ios, performance, optimization, opengl-es

我正在使用仪器为我的引擎捕获有关 OpenGL 压力测试的信息。

经过很长一段时间后，前 3 个函数（使用 OpenGL ES Analyzer Instrument 的 API 统计数据）是：

1.  EAGLContext_presentRenderBuffer (654,827,246)
2.  glBufferData (16,128,155)
3.  glDrawElements (11,555,768)

为什么 EAGLContext_presentRenderBuffer 这么高？我的猜测是，因为 CPU 利用率很低，所以这个时间还包括在 CPU 上等待 vsync 所花费的时间。

那是对的吗？如果不是，还有什么可以解释这个功能的高成本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T04:52:14.320

根据我的经验，其中很大一部分来自 iOS 设备中使用的基于 tile 的延迟渲染器的“延迟”部分。在设置场景渲染时，GPU 会推迟很多绘制调用，直到需要它们之前。

在许多情况下，这可能意味着 OpenGL ES 绘制调用在 CPU 上计时时看起来非常快，但是从场景中读取或显示的最后一个元素似乎需要很多时间。最后一次调用将阻塞，直到所有渲染完成，因为它需要为真才能在屏幕上显示完成的图像。

不幸的是，这会使您的渲染分析变得困难，因为您无法准确评估 OpenGL ES 场景中的哪些阶段最慢。这就是我依靠 OpenGL ES 驱动程序工具来告诉我我是否受到几何或填充率限制的地方，然后将虚拟元素放入我的管道中以尝试定位瓶颈。

我们还没有一个很好的 OpenGL ES Time Profiler 对应物，如果您想看到它，我建议您提交一个功能请求。我知道我会的。

# c# - 如何在没有副本的情况下将结构转换为字节数组？

> ID：13923360
> 
> 赞同：3
> 
> 时间：2012-12-17T22:34:20.350
> 
> 标签：c#, arrays, struct, bytearray, unsafe

```
[StructLayout(LayoutKind.Explicit)]
public struct struct1
{
    [FieldOffset(0)]
        public byte a;   // 1 byte
    [FieldOffset(1)]
        public int b;    // 4 bytes
    [FieldOffset(5)]
        public short c;  // 2 bytes
    [FieldOffset(7)]
        public byte buffer;
    [FieldOffset(18)]
        public byte[] shaHashResult;   // 20 bytes
}

void DoStuff()
{
   struct1 myTest = new struct1();
   myTest.shaHashResult =  sha256.ComputeHash(pkBytes);  // 20 bytes

   byte[] newParameter = myTest.ToArray() //<-- How do I convert a struct 
                                          //     to array without a copy?
} 
```

如何获取数组`myTest`并将其转换为字节 []？由于我的对象很大，我不想复制数组（memcopy 等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:21:06.580

由于您有一个大数组，这确实是您能够做您想做的事情的唯一方法：

```
var myBigArray = new Byte[100000];

// ...

var offset = 0;
var hash = sha256.ComputeHash(pkBytes);
Buffer.BlockCopy(myBigArray, offset, hash, 0, hash.Length);

// if you are in a loop, do something like this
offset += hash.Length; 
```

这段代码非常高效，即使在一个紧密的循环中，结果`ComputeHash`也会被收集到一个快速的 Gen0 集合中，而`myBigArray`将在大对象堆上，而不是移动或收集。在`Buffer.BlockCopy`运行时进行了高度优化，即使面对固定目标和使用展开的指针副本，也能产生您可能实现的最快副本。

# sql - 计算特定领域一年中出现的次数

> ID：13923361
> 
> 赞同：1
> 
> 时间：2012-12-17T22:34:21.230
> 
> 标签：sql, ms-access

我有类似`FVS101209GO5`存储在 MS Access 数据表中的字符串，我想计算某一年的字符串数，所以在示例中是 2010 年

我在做

```
query = "SELECT SUM( IIF( Mid( KEYLastName, 4, 2) , 1,0)) AS occur FROM MyTable WHERE Year(mydate)=2010 ;" 
```

字符串的长度是 12 或 13，对于 @JW 添加的示例

```
qwe123456XXX       -  2012
asd345678XXX       -  2034  
FVS101209GO5       -  2010 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:09:45.150

似乎第 4 和第 5 个字符`KEYLastName`代表一年的最后 2 位数字，因此“FVS101209GO5”适用于 2010 年。如果正确，您可以`KEYLastName`使用以下两个查询中的任何一个来计算代表 2010 年的值的数量：

```
SELECT Sum(IIf(Mid(KEYLastName, 4, 2) = "10", 1, 0)) AS occur
FROM MyTable;

SELECT Count(IIf(Mid(KEYLastName, 4, 2) = "10", 1, Null)) AS occur
FROM MyTable; 
```

但是，我不确定为什么您还有一个`WHERE`子句将行限制`mydate`为从 2010 年开始的行。如果您也想要这样，请创建一个索引`mydate`并将此`WHERE`子句包含在上述查询之一中。

```
WHERE mydate >= #2010-1-1# AND mydate < #2011-1-1# 
```

使用索引`mydate`应该比要求数据库引擎将`Year()`函数应用于`mydate`表中每一行的值要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T00:53:46.010

如果您希望在字符串中查找不同年份的出现次数，您可能希望使用：

```
SELECT Mid([KEYLastName],4,2) AS [Year], 
       Count(KEYLastName) AS CountOfOccurances
FROM MyTable
GROUP BY Mid([KEYLastName],4,2) 
```

这将返回 (4,2) 处的所有两位数年份以及它们各自出现的次数。

编辑重新评论

```
SELECT KEYLastName, 
       Mid([KEYLastName],4,2) AS [Year], 
       DCount("*","MyTable","Mid([KEYLastName],4,2)=" 
          & Mid([KEYLastName],4,2)) AS YearCount
FROM MyTable 
```

# java - 模拟 MouseEvent、KeyEvent 等

> ID：13923364
> 
> 赞同：2
> 
> 时间：2012-12-17T22:34:27.667
> 
> 标签：java, swing, events, user-interface

我正在开发一个在无头环境中在 Java 上运行的应用程序。我正在通过自定义类处理所有输入和输出；我的根`JPanel`正在绘制到 a`BufferedImage`然后呈现给用户。但是，我无法`MouseEvents`让 the`JPanel`及其子级处理它们。

目前，我的主类（的子类）的构造函数`JPanel`使用：

```
this.enableInputMethods(true);
this.enableEvents(~0); 
```

然后，在`onMouseDown(MouseEvent e)`和朋友（*确实*被执行）：

```
dispatchEvent(e); 
```

我也试过`processEvent(e)`and `processMouseEvent(e)`，但无济于事。

我正在生成`MouseEvent`使用`JPanel`子类作为源，并使用`MOUSE_PRESSED`它的朋友作为 ID。

在构造函数或事件处理程序中我还能做些什么来允许将`JPanel`事件作为普通事件处理，将其传递给其子级并触发任何`ActionEvents`焦点更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:42:51.870

我有一个我目前正在实施的解决方法，手动创建`ActionEvents`并跟踪当前关注的组件。我目前正在努力将其传递`MouseEvents`给子组件，但这就是我所拥有的。

```
Component c = findComponentAt(e.getX(), e.getY());
if(c!=null){
    ActionEvent ae = new ActionEvent(c,ActionEvent.ACTION_PERFORMED,"");
    ActionListener[] listeners = c.getListeners(ActionListener.class);
    for(ActionListener l:listeners){
        l.actionPerformed(ae);
    }
    if(c.isFocusable()) setFocusedComponent(c);
} 
```

诚然，它非常混乱，但在没有更好的追求途径的情况下，我必须以这种方式实现它。

# android - 如何在列表视图中使用幻灯片导航 UI 模式？

> ID：13923365
> 
> 赞同：0
> 
> 时间：2012-12-17T22:34:28.040
> 
> 标签：android

我在我的 android 应用程序中使用了新的[幻灯片导航 UI 模式](http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html)，但是当我将它与垂直列表视图一起使用时它会一直崩溃。我的主屏幕上的 listview 侦听器与滑动菜单侦听器冲突，当它们都捕获运动事件时会导致崩溃。

我知道不建议对运动事件使用两个不同的侦听器，但现在许多应用程序都在使用它（例如 Youtube 和 Facebook）。他们是如何做到的？有什么有用的库可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:42:22.217

如果您想在主屏幕上实现列表视图，您可以使用任何 ListViewAdapter。要在滑动视图时在侧屏上实现 listView，您需要使用 ListFragment 来实现。

此外，您可以参考[https://github.com/jfeinstein10/SlidingMenu中的示例](https://github.com/jfeinstein10/SlidingMenu)

# haskell - 如何创建一个 Haskell 树结构以像 c# 继承的类结构一样显示。（如果我理解正确）

> ID：13923368
> 
> 赞同：-1
> 
> 时间：2012-12-17T22:35:06.373
> 
> 标签：haskell, types, tree

我熟悉 C# 相关的编程语言，但我有一个 Haskell 问题。

我有一个字符串，它是一个单词列表。我需要把它放在树形结构中，然后显示出来。例如，需要显示如下内容：

树应该是这样的：第一层一个字符串，第二层是 3 个字符串列表，从第一层字符串分组，第三层是 3 组类别名称作为枚举。

```
"the quick brown fox jumped over the lazy black dog"
("the", "quick", "jumped", "over", "the", "lazy"), ("brown", "black"), ("fox", "dog")
"Other Words", "Colour", "Animal" 
```

所以，我可以理解如果在c#中，这些可以在一个分层的类中，并`ToString`显示出来。

我是 Haskell 的新手。我编写了将字符串解析为最后一行类别的函数，但我不明白如何将数据放入树结构中并显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:43:30.370

Haskell 中的数据类型很便宜。让我们定义一些来证明它！

```
data Layer1 = L1 String [Layer2] 
```

这定义了一个名为的数据类型`Layer1`，它有一个名为 的构造函数`L1`。此构造函数包含两个字段：a`String`包含此节点的名称，以及一些尚未指定类型的子节点列表`Layer2`。

让我们定义第二种类型：

```
data Layer2 = L2 String [String] 
```

这种类型和前一种一样，只是它的子元素是字符串。

但是，如果我们想继续进行尽可能多的层呢？好吧，幸运的是，Haskell 接受递归定义的数据结构。如果我们概括我们的第一种类型，它可以将自己存储为孩子：

```
data Layer1 = Layer1 String [Layer1] 
```

换句话说，every`Layer1`包含一个字符串和一个包含更多`Layer1`s 的子节点的列表。事实上，这基本上是一棵树的定义：

```
data Tree a = Node a [Tree a] 
```

# c# - 返回 Task.Factory.StartNew( ()=>{ ; } ) 是否不正确？

> ID：13923371
> 
> 赞同：5
> 
> 时间：2012-12-17T22:35:25.803
> 
> 标签：c#, c#-4.0, asynchronous, task-parallel-library

这是我一直看到的代码-

```
public Task PossiblyAsyncOperation(bool condition)
    {
        //this condition means i need to do something async, for sure
        if (condition)
             return AsyncOp();

        //since it didnt hit the above condition
        //we're not doing the async op now
        //.....this just feels wrong
        return Task.Factory.StartNew(() => { ; });
    } 
```

当您实际上不打算最终运行异步操作时，是否有更好的返回方式？还是您必须返回一个新的、已开始的任务？这对性能有影响吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T22:47:21.570

`Task.FromResult<T>` 如果您使用的是 .Net 4.5，则可以使用

```
return Task.FromResult<object>(null); 
```

否则你可以编写自己的实现

```
public static Task CreateEmptyTask()
{
    var tcs = new TaskCompletionSource<object>();
    tsc.SetResult(null);
    return tcs.Task;
} 
```

正如评论指出的那样，您也许可以缓存此任务，但请注意您必须防止它被处置。例如以下将引发异常：

```
public static readonly Task EmptyTask = Task.FromResult<object>(null);

Task t = EmptyTask;
t.Dispose();
((IAsyncResult)t).AsyncWaitHandle.WaitOne(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:36:51.507

您总是可以只创建一个[TaskCompletionSource](http://msdn.microsoft.com/en-us/library/dd449174.aspx)，然后返回 Task 属性。这是一种完全跳过异步调用的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:38:13.680

如果你什么都没做，而且`Task`是一个类，所以一个*引用*，为什么不简单地返回一个`null`..

```
public Task PossiblyAsyncOperation(bool condition)
{
     //this condition means i need to do something async, for sure
     if (condition)
          return AsyncOp();

     //since it didnt hit the above condition
     //we're not doing the async op now
     //.....this just feels wrong
     return null; //RETURN NULL
} 
```

# indexing - 使用键值数据库作为具有持久索引的集合

> ID：13923374
> 
> 赞同：5
> 
> 时间：2012-12-17T22:35:29.563
> 
> 标签：indexing, key-value, openldap, leveldb, kyotocabinet

由于以下内容有点长：这是 tl;dr; 版本：是否存在用于快速键*和*值查找的键/值最佳实践，例如具有持久索引的基于哈希的集合？

我对键值数据库的世界很感兴趣，但到目前为止还没有弄清楚如何有效地实现以下用例：

假设我们想要序列化一些数据并通过一个持久的、唯一的整数索引在其他地方引用它们。因此例如：Key = unsigned int，Value = MyData。

数据库应具有快速键查找并确保 MyData 是唯一的。

现在，当我在我的数据库中插入一个新值时，我可以为其分配一个新的索引键，例如数据库的当前大小或防止删除项目后发生冲突，我可以在外部保留一些计数器。

但是我如何确保我不会将相同的 MyData 值插入到我的数据库中？到目前为止，在我看来，键值数据库似乎无法有效地实现这一点 - 这是正确的吗？即我*不想*迭代整个数据库只是为了确保 MyData 值不在那里......

那么，实现这一点的最佳做法是什么？

背景：我在 KDevelop 上工作，我们使用上面的代码分析缓存。我们实际上有上述用例[1](https://projects.kde.org/projects/extragear/kdevelop/kdevplatform/repository/revisions/master/entry/language/duchain/repositories/itemrepository.h)的自定义实现。如果您对内部结构感兴趣，请搜索 Bucket 和 ItemRepository，有关 ItemRepository 的示例性用法，请参见[2](https://projects.kde.org/projects/extragear/kdevelop/kdevplatform/repository/revisions/master/entry/language/duchain/indexedstring.cpp)。

但是您可能会同意，这段代码很难理解，因此也很难维护。我想将其性能与可能导致代码更简单的替代解决方案进行比较——但前提是它不会导致严重的性能损失。考虑到围绕 OpenLDAP MDB、Kyoto Cabinet 和 LevelDB 等键值存储性能的炒作，这就是我想开始的地方。

我们在 KDevelop 中所拥有的——据我所知——基本上是一种混合的磁盘/内存哈希映射，它会定期保存到磁盘（这当然会在崩溃等情况下导致重大数据损坏）。 ）。项目根据它们的散列值存储在一个位置，只要散列函数速度快，这当然也允许相对快速的值查找。增加的转折是您还可以获得某种持久性数据库索引，可用于非常有效地查找项目。

所以——长话短说——如何用一个键/值数据库来做到这一点，比如 LevelDB、Kyoto Cabinet、OpenLDAP MDB——你说的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T19:24:33.330

除非我在这里遗漏了一些东西——通常你的哈希算法是一致的，并且会为相同的数据提供相同的密钥。因此，您应该只需要查找密钥以查看它是否已经存在，或者处理数据库返回给您的（可能重复的密钥）错误。

afaik 键/值数据库可以并且将为您强制执行唯一的值约束，即如果您尝试保存已经存在的值，您将收到错误消息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T17:25:16.840

听起来您想做 OpenLDAP 对其平等索引所做的事情。也许这和OrientDB的例子一样，我没看过。

主表由一个单调递增的整数键（称为 entryID）索引，并存储数据值。相等索引由值的散列索引，并存储与散列匹配的 entryID 列表。由于散列可能有冲突，仅相等索引中的条目的存在并不能证明唯一性或重复性。您仍然需要检查实际值。

如果您使用 MDB、BDB 或其他支持重复键的数据库，一种更快/更简单的方法是只保留一个表，使用哈希作为键。在 MDB 和 BDB 中都有一个 GET_BOTH 请求，它匹配键和数据以执行提取。如果成功，那么您肯定知道该值已经存在。否则，它允许您保存任何数据值，而不必担心是否存在哈希冲突。

这里需要注意的是，在使用重复键的 MDB 中，值的大小限制为小于磁盘页面的一半。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T13:51:26.860

你的价值字符串有多大？

我只是将它们存储在一个密钥中，让数据库完成所有工作。

适用于大多数 KV 存储的典型 LevelDB 样式是使用一对键，前缀表示类型

例如：

```
Key = 'i' + ID 
Value = valueString

Key = 'v' + valueString
Value = ID 
```

在需要允许多个相同 valueStrings 的系统中，您可以将 ID 移动到第二个键的尾部

```
Key = 'v' + valueString + ID
Value = empty 
```

# java - Richfaces 3 试图让动态列正常工作 - 在类型上找不到属性“0”

> ID：13923376
> 
> 赞同：0
> 
> 时间：2012-12-17T22:35:33.550
> 
> 标签：java, jsf, richfaces, jsf-1.2

我正在尝试使用 Richfaces 3.3.Final 让 jsf 1.2 遗留项目工作。

我正在尝试使用动态列创建数据表，但出现错误：

```
Caused by: javax.el.PropertyNotFoundException: /index.xhtml @44,58 value="#{results[ind].columnName}": Property '0' not found on type ..../TableBean 
```

我基本上遵循此页面中的示例 - [http://livedemo.exadel.com/richfaces-demo/richfaces/columns.jsf?tab=usage&cid=278645](http://livedemo.exadel.com/richfaces-demo/richfaces/columns.jsf?tab=usage&cid=278645)但他们没有显示他们的支持 bean 代码。

这是我的相关代码

```
<rich:dataTable id="resultsTable" value="#{tableBacking.results}" var="results">
    <f:facet name="header">
        <h:outputText value="Results" />
    </f:facet>
    <rich:column>
        <f:facet name="header">
            <h:outputText value="First Columns" />
        </f:facet>
    </rich:column>
    <rich:columns value="#{tableBacking.columns}" var="columns" index="ind" id="column#{ind}">
        <f:facet name="header">
            <h:outputText value="#{columns.header}" />
        </f:facet>

        <h:outputText value="#{results[ind].columnName}" />

    </rich:columns>
 </rich:dataTable> 
```

支持豆

```
public class TableLookupBacking {

    private List<ColumnModel> columns = null;
    private List<TableBean> results = null;

        public List<ColumnModel> getColumns() {

        if(columns == null) {
            columns = new ArrayList<ColumnModel>();
            columns.add(new ColumnModel("header", "Property"));
            columns.add(new ColumnModel("header2", "Property"));
            columns.add(new ColumnModel("header3", "Property"));
            System.out.println("columns.size = "+columns.size());
        }
        return columns;
    }

        public List<TableBean> getResults() {

        if(results == null) {
            results = new ArrayList<TableBean>();
            results.add(new TableBean("id"));
            results.add(new TableBean("name"));
            System.out.println("results.size = "+results.size());
            System.out.println("results.0 = "+results.get(0).getColumnName());
        }
        return results;
    }

        public void setResults(ArrayList<TableBean> results) {
        this.results = results;
    }
        public void setColumns(ArrayList<ColumnModel> columns) {
        this.columns = columns;
    }
} 
```

表豆

```
public class TableBean {

    private String columnName;

    public TableBean(String columnName) {
        this.columnName = columnName;
    }
    public String getColumnName() {
        return columnName;
    }
    public void setColumnName(String columnName) {
        this.columnName = columnName;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:31:18.623

换行

```
<h:outputText value="#{results[ind].columnName}" /> 
```

到

```
<h:outputText value="#{results.columnName}" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T22:44:27.430

我终于发现您需要为richfaces 数据表提供一个列表。这不是使用我习惯使用的 primefaces 完成的方式。作为记录，richfaces 示例的支持 bean 代码的示例基本上为零，这只是 primefaces 好得多的另一个原因。

```
private List<List<TableBean>> results = null;

public List<List<TableBean>> getResults() {

    if(results == null) {
        results = new ArrayList<List<TableBean>>();
        results.add(new TableBean("id"));
        results.add(new TableBean("name"));
        System.out.println("results.size = "+results.size());
        System.out.println("results.0 = "+results.get(0).getColumnName());
    }
    return results;
} 
```

# jquery - 循环通过变量中的每个节点

> ID：13923378
> 
> 赞同：0
> 
> 时间：2012-12-17T22:35:38.547
> 
> 标签：jquery, html, css

我有一个变量，其中包含多个具有相同类的 HTML 节点。我想循环浏览它们中的每一个，并且想知道我会怎么做。

我尝试了以下操作，但没有发生任何事情（控制台没有打印出任何内容）。

```
var myVar = "<div class='item'>Item01</div>" +
            "<div class='item'>Item02</div>" +
            "<div class='item'>Item03</div>";

$(myVar).find('.item').each( function() {
    console.log( $(this) ); //console does not output anything
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:39:50.467

您的代码中有一些语法错误，使用`find`也是多余的。

```
var myVar = "<div class='item'>Item01</div>" +
            "<div class='item'>Item02</div>" +
            "<div class='item'>Item03</div>";

$(myVar).each(function() {
    console.log($(this))
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:37:47.673

`$(myVar).find('.item')`不会包含任何东西。

你需要做的是：

```
$(myVar).has('.item').each(...) 
```

要不就：

```
$(myVar).each(...) 
```

# java - 我在使用令牌、扫描多个输入并同时执行它们时遇到问题

> ID：13923379
> 
> 赞同：-2
> 
> 时间：2012-12-17T22:35:41.173
> 
> 标签：java, token, java.util.scanner

我有一个问题，我需要扫描用户将同时在屏幕上插入的不同输入。例如，我有一种打印在屏幕上的菜单，用户将选择是否要加载文件并键入文件名。我通过要求用户键入 load 来完成此操作，然后问他我需要同时加载什么文件。用户只需键入“load S.txt”并选择加载选项并同时打开文件。我的教授告诉我应该使用令牌，但我卡住了。（在 java 中）谢谢。

```
 private static void inspecting (){
    System.out.println("inspect word or byte?");
    Scanner input3 = new Scanner( System.in );
    String insp = input3.next();
    if(insp.equals("word")){
        System.out.println("select the adrress you want to inspect the value");
        Scanner input4 = new Scanner( System.in );
        int addr = input4.nextInt();

             what i need is the user to type "ispect word at adrress x" withou doing it step by step. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:47:10.113

如果我理解正确，您的扫描仪正在打破空间。您希望它换行：

```
Scanner scanner = new Scanner(System.in);
scanner.useDelimiter(System.getProperty("line.separator")); // this scans for lines
while (scanner.hasNext()) {
    String input = scanner.next();
    System.out.println(input); // take a look for yourself
} 
```

# linux - Linux 2.6 OSS 声音系统中是否有内核内重采样

> ID：13923381
> 
> 赞同：0
> 
> 时间：2012-12-17T22:35:54.877
> 
> 标签：linux, audio, linux-kernel

这是关于Linux内核的OSS声音子系统及其功能的问题。我正在使用 Linux 2.6 内核并且我有不寻常的声卡。此卡应仅输入和输出 48 kHz 信号；并且没有硬件重采样（我无法在这张卡上播放 16kHz WAV 文件）。此卡的其他缺点是它使用了一些更高级卡的 OSS 驱动程序（驱动程序不限制应用程序所需的采样率）。此卡没有 ALSA。

我想将此卡与一些 SIP 编解码器（语音实时压缩）一起使用，但它们仅支持 8 kHz、16 kHz、7 kHz、32 kHz，但不支持 48 kHz。现在我正在使用 linphone3 进行 SIP，并且在播放和录制声音方面存在一些问题。Linphone 以 16 kHz 速率 (Speex WB) 打开驱动程序，但卡以 48 kHz 发送和播放数据。

我可以在内核的 OSS 中从 16 kHz (SIP) 重新采样到 48 kHz (card) 吗？如何通过重采样激活 pcm 插件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:52:13.093

OSS 子系统不提供重采样。您可以更改声卡的设备驱动程序以进行此类重采样，但大多数 OSS 驱动程序没有实现此功能（想法是重采样最好在用户空间中完成）

# python - 如何在 peewee 2 中创建带有枚举的表模型？

> ID：13923382
> 
> 赞同：6
> 
> 时间：2012-12-17T22:35:56.703
> 
> 标签：python, peewee

我正在尝试创建一个模型来描述一个带有 enum 字段的表[peewee](https://github.com/coleifer/peewee)。

我看到 EnumField 在 2.0 版本之前已从 peewee.py 文件中删除，并且我在当前文档中找不到任何概述如何实现它的内容。有谁知道我是否可以只使用 CharField？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-20T17:07:42.163

这是 PostgreSQL 的有效解决方案：

[https://gist.github.com/b1n​​aryth1ef/607e92dc8c1748a06b5d](https://gist.github.com/b1naryth1ef/607e92dc8c1748a06b5d)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-05T01:16:10.180

在 2.0 之前没有 EnumField，但是有关于实现自定义字段的文档：http: [//peewee.readthedocs.org/en/latest/peewee/models.html#creating-a-custom-field](http://peewee.readthedocs.org/en/latest/peewee/models.html#creating-a-custom-field)

我希望这有帮助。

# python-2.7 - 在python中将滚动条添加到窗口

> ID：13923383
> 
> 赞同：1
> 
> 时间：2012-12-17T22:36:04.617
> 
> 标签：python-2.7, tkinter

我有一个软件，当调整到更小的高度/宽度时会丢失所有内容，即内容隐藏。有没有办法将滚动条添加到内容不是列表框、文本 elc 的窗口中。我已经尝试过画布的东西，但它真正做到的是它只是插入了一个什么也没做的滚动条。请帮忙。谢谢你。

# jquery - 过渡期间的jQuery重叠图像（尝试进行背景过渡）

> ID：13923384
> 
> 赞同：0
> 
> 时间：2012-12-17T22:36:05.867
> 
> 标签：jquery, jquery-ui, background-image, slideshow, fade

我正在尝试在图像之间进行背景过渡，但我遇到了这个问题，图像在过渡期间似乎位于所有内容的顶部，并覆盖了字段和按钮。然后它又回到他们身后。

在真正的内容之前，我有一个负边距（背景）的 div，如下所示：

```
<div id="background">
</div>
<div id="realcontent">
</div> 
```

你可以在这个 jfiddle 上看到它

[http://jsfiddle.net/k9e5f/2/](http://jsfiddle.net/k9e5f/2/)

如果我将所有内容放在同一个 div 中并更改不透明度，按钮和字段也会褪色，我不希望这样。

我尝试设置 z-indexes 但没有任何效果。

有没有办法在过渡期间将褪色图像保持在其他内容的底部？

为什么会出现这种情况？？！！

有没有更好的方法来做到这一点，而不使用插件？（这很简单，我不想只为此在我的服务器上发出另一个http请求）

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:46:00.560

请注意，为了使`z-index`属性起作用，您还必须在元素上设置位置：

`position: relative;`或者

`position: absolute;`或者

`position: fixed;`

只需添加`position: relative;`到`#home_background`CSS 中的元素，它应该可以正常工作。

# android - Android LocationListener：removeUpdates 是必要的吗？

> ID：13923386
> 
> 赞同：2
> 
> 时间：2012-12-17T22:36:07.843
> 
> 标签：android, locationmanager, locationlistener, looper

使用 开发位置感知 Android 应用程序`LocationListener`时，是否必须`LocationManager.removeUpdates()`在应用程序完成之前调用？

或者更一般地说，是否必须在传入退出`LocationManager.removeUpdates()`之前调用？`Looper``LocationManager.requestLocationUpdates()`

是否会`LocationManager`自动发现`Looper`不再存在并且不再需要位置更新？如果是，如何？如果没有，它会永远盲目地更新（并耗尽电池）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-16T15:34:52.467

当您的应用程序从堆栈中清除时，它也会删除位置更新。如果用户只是将您从前台删除，您将不断获得更新，直到系统清理您的应用程序。当您不再需要更新时删除更新是一个很好的做法，如果您再次尝试注册您的位置（假设在您的应用程序的另一个午餐中），它将抛出一个异常，说明您没有使用 unRegister。

# sql - 使用分号和撇号的 SQL 崩溃

> ID：13923388
> 
> 赞同：1
> 
> 时间：2012-12-17T22:36:10.563
> 
> 标签：sql, sql-server, crash, ssms

我通常同时打开多个标签。我也有直接打开表的 SQL 窗格。经常发生的情况是，在我匆忙的打字中，我执行了一个 select 语句并且不小心使用了分号而不是撇号（谁决定将这些键放在一起？）或者我在键入结束撇号之前执行它一纳秒。当然，这会使我的整个 SQL 实例崩溃，并且我会丢失在其他选项卡上所做的所有事情。

这可能是一个愚蠢的问题，但是除了我首先正确输入之外，有没有办法阻止崩溃？

```
Application Name:   SqlWb.exe
Application Version:    2005.90.4060.0
Application Timestamp:  4d826c90
Fault Module Name:  vdt80.dll
Fault Module Version:   8.0.50727.1826
Fault Module Timestamp: 480d6e41
Exception Offset:   0032ae42
Exception Code: c0000409
Exception Data: 00000000
OS Version: 6.1.7601.2.1.0.256.4
Additional Information 1:   31a8
Additional Information 2:   31a8d36109bc8f4df442fa2e6255122a
Additional Information 3:   3857
Additional Information 4:   3857f10478be418059bb6c2b00dfb3db 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T18:14:32.857

由于 2008 年的烦恼，我正在运行 2005 年的 SSMS。安装 2008 SSMS 后，我收到一条错误消息，而不是完全崩溃。每次打开一张桌子都是一个额外的步骤，但至少我不会丢失我的工作。

# android - 打开任意文件类型的正确意图操作

> ID：13923391
> 
> 赞同：2
> 
> 时间：2012-12-17T22:36:26.393
> 
> 标签：android

我正在尝试使用 Intents 打开任何任意文件。但是，对于安装了可以打开它们的应用程序的文件类型，我得到了 ActivityNotFoundException。在下面的源代码中，当`file`指向 PNG 文件时，我得到“使用完成操作”对话框。但是，当我尝试打开 mp3 时，出现异常。当我打开 Astro 并单击同一个 mp3 文件时，我会看到“使用完成操作”对话框，显示已安装的 MP3 播放器。如何从我的代码中显示相同的对话框？当我从调试器检查文件位置、扩展名和 MIME 类型时，它们看起来都是正确的。

```
 String url = file.toURL().toString();
      String extension = MimeTypeMap.getFileExtensionFromUrl(url);
      String type = typeMap.getMimeTypeFromExtension(extension);
      mimeType.setText(type);
      boolean fileExists = file.exists();
      Intent viewIntent = new Intent(Intent.ACTION_VIEW);
      viewIntent.setData(Uri.fromFile(file));
      viewIntent.setType(type);
      MainActivity.this.startActivity(viewIntent); 
```

* * *

答案是，`Intent.setType`并且`Intent.setData`是相互排斥的。呼叫一个清除另一个。所以打电话`setDataAndType`是解决办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:11:40.187

试试这个：

```
 Intent newIntent = new Intent();
        newIntent.setDataAndType(Uri.parse("file://"+filePath),mimeType);
        newIntent.setAction(Intent.ACTION_VIEW);
        try {

            startActivity(newIntent);

        } catch (android.content.ActivityNotFoundException e) {
            Toast.makeText(getApplicationContext(), "No handler for this type of file.", 4000).show();
        } 
```

# php - php mkdir 从命令行调用时有效，但从 apache (Windows) 调用时无效

> ID：13923392
> 
> 赞同：-1
> 
> 时间：2012-12-17T22:36:26.690
> 
> 标签：php, apache, windows-7, apache2.2

我已将我的问题缩小到以下情况。

我有一个简单的文件'test.php'

```
<?php
mkdir("w:/Input/47/");
?> 
```

当我从命令行（php -f test.php）运行它时，它成功地创建了目录。

当我通过 Windows 版本的 Apache 运行它时，我得到：

```
[17-Dec-2012 16:29:49] PHP Warning:  mkdir(): No such file or directory in C:\Program Files (x86)\Apache Software Foundation\Apache2.2\htdocs\ReportComp\test.php on line 2 
```

我在 Windows 7（64 位）中运行 Apache 2.2（64 位）作为我的域用户名（与我登录桌面的用户名相同）

'w' 驱动器是一个网络驱动器，（我相信）它也在运行 Windows。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T14:04:18.663

Windows 使用 '\' 作为目录分隔符 .. 这可能会导致我建议您使用 ' `DIRECTORY_SEPARATOR`' 的问题

# css - 使用 CSS 居中引导内容

> ID：13923403
> 
> 赞同：0
> 
> 时间：2012-12-17T22:37:04.850
> 
> 标签：css, twitter-bootstrap

当浏览器宽度最大化时，我试图使 Bootstrap 启发网格（下面的小提琴）的内容居中。我想在他们的屏幕上看到 4 块和 5 块的中心。我可以应用什么 CSS 来实现这一点？

```
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Scaffolding · Bootstrap</title>
    <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet">
    <link href="http://twitter.github.com/bootstrap/assets/css/docs.css" rel="stylesheet">
</head>
<body>
    <div class="row">
        <div class="span9">
            <div class="row show-grid">
                <div class="span4">
                    4</div>
                <div class="span5">
                    5</div>
            </div>
        </div>
    </div>
</body>
</html>
​ 
```

[小提琴](http://jsfiddle.net/jeljeljel/m4DqZ/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:41:28.763

给你的`body`标签 class `container`。这应该`div`以班级为中心`row`。

```
<body class="container"> 
```

# objective-c - 在 NSImage 和 Leptonica Pix 之间转换

> ID：13923404
> 
> 赞同：0
> 
> 时间：2012-12-17T22:37:07.893
> 
> 标签：objective-c, cocoa, nsimage, leptonica

我正在开发一个 Cocoa OS X 程序来清理扫描的页面，并希望使用[Leptonica 的库](http://www.leptonica.com)来完成繁重的工作。我在[这篇文章](https://stackoverflow.com/questions/9013475/create-uiimage-from-leptonicas-pix-structure)、[这个](https://stackoverflow.com/questions/11800177/create-leptonica-pix-struct-from-uiimage?rq=1)和[这个中找到了一些信息](https://stackoverflow.com/questions/9013475/create-uiimage-from-leptonicas-pix-structure). 我当然可以从 NSImage 获得 CGImage 并且可以将数据写入 Leptonica Pix 图像。我遇到的问题是，我的图像有 75% 的时间出现扭曲，并带有理发店杆型图案（从图像顶部到底部的每一连续像素行都向右移动得越来越远）。有时虽然图片出来很好。我认为我在设置图像数据时做错了，但这并不是我的强项，所以我无法理解这个问题。我正在使用以下代码创建 Pix 图像：

```
CGImageRef myCGImage = [processedImage CGImageForProposedRect:NULL context:NULL hints:NULL];
CFDataRef data = CGDataProviderCopyData(CGImageGetDataProvider(myCGImage));
const UInt8 *imageData = CFDataGetBytePtr(data);

Pix *myPix = (Pix *) malloc(sizeof(Pix));
myPix->w = (int)CGImageGetWidth (myCGImage);
myPix->h = (int)CGImageGetHeight (myCGImage);
myPix->d = (int)CGImageGetBitsPerPixel(myCGImage);
myPix->wpl =  ((CGImageGetWidth (myCGImage)*CGImageGetBitsPerPixel(myCGImage))+31)/32;
myPix->informat = IFF_TIFF;
myPix->data = (l_uint32 *) imageData;
myPix->colormap = NULL; 
```

pix 结构体定义如下：

```
/*-------------------------------------------------------------------------*
 *                              Basic Pix                                  *
 *-------------------------------------------------------------------------*/
struct Pix
{
uint32             w;           /* width in pixels                   */
uint32             h;           /* height in pixels                  */
uint32             d;           /* depth in bits                     */
uint32             wpl;         /* 32-bit words/line                 */
uint32             refcount;    /* reference count (1 if no clones)  */
int              xres;        /* image res (ppi) in x direction    */
                                  /* (use 0 if unknown)                */
int              yres;        /* image res (ppi) in y direction    */
                                  /* (use 0 if unknown)                */
int              informat;    /* input file format, IFF_*          */
char                *text;        /* text string associated with pix   */
struct PixColormap  *colormap;    /* colormap (may be null)            */
uint32            *data;        /* the image data                    */
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:57:55.253

“理发店杆型模式”是每行像素数据的字节数错误的典型标志。

您应该基于`wpl`返回的值[`CGImageGetBytesPerRow`](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CGImage/Reference/reference.html#//apple_ref/c/func/CGImageGetBytesPerRow)。最有可能的：

```
myPix->wpl = CGImageGetBytesPerRow(myCGImage) / 4; 
```

图像的每行字节数与您基于`CGImageGetWidth()`. 例如，出于性能原因，它可能会被四舍五入，或者图像可能是更宽图像的子图像。

# jquery - 溢出：滚动内容位置：绝对

> ID：13923418
> 
> 赞同：2
> 
> 时间：2012-12-17T22:38:30.993
> 
> 标签：jquery, css

我正在尝试通过滚动实现slideUp进入视图效果。这就像我们每天都使用的任何控制台（shell、浏览器 javascript、任何 REPL）一样，但带有一点动画风格。在小提琴中，我首先有一个所需效果的示例，然后是所需的`overflow: scroll`第二个示例。

我一直无法让这两个部分一起工作。我在这里看到过类似的例子，但没有一个小提琴，也没有回答！

插图：http: [//jsfiddle.net/n8tqw/](http://jsfiddle.net/n8tqw/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:18:14.387

这是一个非常有趣的谜题，但我终于让它工作了。本质上，您需要一个相对容器，它延伸到整个绝对容器的高度，然后拥有另一个具有设置高度（200px）的容器（相对或静态）。无论出于何种原因，浏览器都不认为“脱离顶部”的绝对内容位于滚动区域之外：

[http://jsfiddle.net/n8tqw/1/](http://jsfiddle.net/n8tqw/1/)

```
$('#add-one').click(function() {

   var $p = $('<p class="content">' + number++ + '</p>')
        .appendTo('#from-bottom');
    $("#beholder").height($("#from-bottom").height());
    $("#scrollable-container").scrollTop($("#beholder").height());
    $p.hide().slideDown();
}); 
```

新段落不能立即隐藏，因为相关容器需要获取总高度，如果隐藏，则不会添加新段落的高度。同样，`scrollable-container`的 scrollTop 如果隐藏起来会有点偏离。不过，最初不隐藏它似乎对用户来说是不明显的。

# javascript - JQuery - 在自我/垃圾收集中检测 DOMNodeRemoved

> ID：13923419
> 
> 赞同：2
> 
> 时间：2012-12-17T22:38:35.190
> 
> 标签：javascript, jquery, garbage-collection

我为这个糟糕的标题道歉，但我不知道如何措辞。我有附加到元素的逻辑，并且希望在删除元素时调用类似析构函数的函数。我试过使用 DOMNodeRemoved 作为这个触发器，但是，这不能正常工作，因为：

*   DOMNodeRemoved 仅针对元素的父级触发，而不是元素本身。
*   它似乎以特殊的顺序触发，因此有时我无法正确处理该事件。

代码：（或[小提琴](http://jsfiddle.net/cnurS/8/)）

```
<widget id="widget">
    <div>Widget 1</div>
    <widget id="widget2">
        <div>Widget 2</div>
    </widget>
</widget>

<input type="button" value="remove widget" />​ 
```

Javascript：

```
var Widget = function(element) {
    this.initialize(this.element = element);
};

Widget.prototype = {
    initialize: function() {

        // does not work for the elements at all
        $(this.element).on('DOMNodeRemoved', this.onRemoved.bind(this));

        // works, but is not optimal, fired whenever any node is removed.
        // DOMNodeRemovedFromDocument doesn't fire for me in latest Chrome
        $(this.element).parent().on('DOMNodeRemoved', this.onRemoved.bind(this));

        // here is code that adds to a manager
        console.log('ADD TO SOME MANAGER', $(this.element).attr('id'));
    },

    /**
     *  @private
     *  Callback for when the element is removed from the DOM
     */
    onRemoved: function(ev) {

        if (ev.target !== this.element) {
            return;
        }

        this.dispose();
    },

    /**
     *  My callback for disposal/destructor
     */
    dispose: function() {

        // here is code that removes from a manager
        console.log('REMOVE FROM SOME MANAGER', $(this.element).attr('id'));
    }
};

$(document).ready(function() {

    $(this.body).find('widget').each(function(index, element) {

       // store widget
       $(element).data('widget', new Widget(element));

    });

    $(this.body).find('input[type=button]').click(function() {
        $('#widget').remove();
    });

});​ 
```

上面的代码应该输出：

```
// ADD TO SOME MANAGER widget
// ADD TO SOME MANAGER widget2
// REMOVE FROM SOME MANAGER widget2  (this should be here but isn't)
// REMOVE FROM SOME MANAGER widget 
```

是否有某种标准用于将逻辑绑定到 jQuery 中的元素？或者我是否必须做某种猴子修补来覆盖“删除”方法（不是首选，因为某些元素可能会被删除而不使用 jquery 的方法）

编辑：我根本不关心 IE。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T23:00:25.113

jQuery UI 对触发删除事件的 cleanData 内部 jQuery 方法进行了内置更改。如果你在你的代码中实现它，你可以用它来解决你的问题。

```
var _cleanData = $.cleanData;
$.cleanData = function( elems ) {
    for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {
        try {
            $( elem ).triggerHandler( "remove" );
        // http://bugs.jquery.com/ticket/8235
        } catch( e ) {}
    }
    _cleanData( elems );
}; 
```

现在您可以使用 remove 事件，只要使用 jQuery 方法（例如`.empty()`、`.remove()`或`.html()`. [http://jsfiddle.net/2dwbk/](http://jsfiddle.net/2dwbk/)

当然，如果你有 jQuery UI，你根本不需要上面的代码，只需绑定到 remove 事件。

# mysql - Mysql - 如何加入 2 个表，并且只有在满足条件时才保持匹配行

> ID：13923420
> 
> 赞同：1
> 
> 时间：2012-12-17T22:38:36.623
> 
> 标签：mysql, join, replace

我有一个定期活动日历，允许人们注册活动。我有 2 个表`dynamic_events`，`recurring_events`结构如下：

```
dynamic events
id (int)
date (date)
time (time)
title (varchar[255])
desc (text)
max_attendees (int)
is_overwrite (tinyint[1])

recurring events
id (int)
day_of_week (int)
time (time)
title (varchar[255])
desc (text) 
```

每当更新重复发生的事件时，我都会使其动态化，以便在`attendee`表中唯一地标识它。它现在的工作方式是查询当天的所有动态事件，然后查询当天的所有重复事件，并将数组传递给 PHP 函数，如果日期和时间匹配，则将任何重复事件替换为其动态事件和`is_overwrite`等于 1。基本上意味着该日期和时间的重复事件已更新以允许人们注册。这行得通，但我想知道如果没有 PHP 和某种左连接，这是否可行。替换循环表中具有动态对应项的任何行以覆盖它同时保留所有其他事件？我只是不确定如何去做，并且正在寻找朝着正确方向迈出的一步。希望我的解释不会太混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:52:27.040

是的，这是可以做到的。使用左连接和调用来`ifnull()`进行覆盖：

```
select
    ifnull(d.time, r.time) as time,
    ifnull(d.title, r.title) as title,
    ifnull(d.desc, r.desc) as desc
from recurring_events r
left join dynamjc_events d on dayofweek(d.date) = r.day_of_week
    and d.time = r.time 
```

请注意，“覆盖”并非完全可能，因为列不同，但是您应该从任一表中选择您需要的任何列，如果没有匹配，它们将为动态事件为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:51:23.887

这是一种方法：

```
SELECT IF(d.id IS NOT NULL,'d','r')         AS dynamic_or_recurring
     , IF(d.id IS NOT NULL,d.id,r.id)       AS id
     , IF(d.id IS NOT NULL,d.title,r.title) AS title
     , ...
  FROM recurring_events r
  LEFT
  JOIN dynamic_events d
    ON d.time = t.time AND DAYOFWEEK(d.date) = r.day_of_week 
```

SELECT 列表可能只包含每个表中的列，并且根据返回的指示符，您可以选择您需要的列集...

```
SELECT IF(d.id IS NOT NULL,'d','r')      AS dynamic_or_recurring
     , d.id                              AS d_id
     , d.date                            AS d_date
     , d.time                            AS d_time
     , ...
     , r.id                              AS r_id
     , 
```

# c - C 预处理器与变量的连接

> ID：13923425
> 
> 赞同：8
> 
> 时间：2012-12-17T22:39:03.413
> 
> 标签：c, variables, concatenation, c-preprocessor

> **可能的重复：**
> [C 预处理器和连接](https://stackoverflow.com/questions/1489932/c-preprocessor-and-concatenation)

是否可以将**C**预处理器与变量名连接起来？

```
#define  WIDTH 32

int dataWIDTH;

// dataWIDTH should be interpreted as 'data32'

printf("%d",dataWIDTH); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-17T22:48:04.857

您的用例需要双重转义；单独使用标记粘贴 (##) 运算符只会附加预处理器指令的名称。

```
#define WIDTH 32

#define _MAKEDATA(n) data##n
#define MAKEDATA(n) _MAKEDATA(n)

int MAKEDATA(WIDTH) = 7;
int _MAKEDATA(WIDTH) = 8;

int main(int argc, char *argv[]) {
    printf("%d\n", data32);
    return 0;
} 
```

产量

```
$ gcc -E foo.c 
int data32 = 7;
int dataWIDTH = 8;

int main(int argc, char *argv[]) {
    printf("%d\n", data32);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:44:09.073

有一个名为 ## 的标记粘贴操作符，例如在这里阅读它：

[http://msdn.microsoft.com/en-us/library/09dwwt6y(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/09dwwt6y(v=vs.80).aspx)

# javascript - 我的 Javascript 不稳定行为或错误代码，数组值在实际操作之前增加

> ID：13923426
> 
> 赞同：0
> 
> 时间：2012-12-17T22:39:13.380
> 
> 标签：javascript, asynchronous

我有一堆javascript函数，在按钮点击时触发。所以假设我们有两个 button 触发了两种方法，例如：

```
 var universal = false;
    var collection = Array(); // assume it has 5 data elements( 0...4) upon page load

    function next()
    {
      if(universal)
         addToArray();

       // do whatever else
    }

    function addToArray()
    {

        console.log(collection);
       // perform some DOM calls,that simply Hide/change position of elements
       var newElement = 'some info';   
       collection.push(newElement);
    } 
```

在上面的 addToArray() 函数中，当单击“下一步”按钮并将通用变量设置为 true 时调用它。此时我们进入，addToArray() 方法和一个console.log 被调用来检查'collection'。

这在任何给定点上都不应超过 5 个元素，因为 addToArray 最终会将一个元素添加到集合中，但不会在一开始就添加。但是，console.log 显示该集合添加了新元素，该元素实际上应该在 addToArray 方法（）期间添加，而不是立即添加。

我知道这听起来很愚蠢，但这就是我得到的。我试图了解异步行为是否与它有关。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:42:17.950

如果您使用的是 Chrome，原因是该对象`console.log`的**实时**版本会在您稍后更改时在控制台窗口中更新。

如果你改变

```
console.log(collection); 
```

...至

```
console.log(collection.join(",")); 
```

...或者可能更有用

```
console.log(JSON.stringify(collection)); 
```

...您将看到数组的时间点版本。

的行为`console.log`实际上是相当棘手的，尽管一旦你明白了它的一致性。例如，考虑以下代码：

```
var a = [1, 2, 3];

console.log("first");
console.log(a);
console.log("second");
a[0] = '11';
a = ['a', 'b', 'c'];
console.log("third"); 
```

[实时复制](http://jsbin.com/izujer/1)| [资源](http://jsbin.com/izujer/1/edit)

如果您在运行时打开了控制台，您会看到：

```
第一个
*[1, 2, 3]*
第二
第三
```

...并且没有多少点击*`[1, 2, 3]`*会显示`"11"`放在 index 的代码`0`，更不用说我们放入的新数组了`a`。

但是如果你改变

```
var a = [1, 2, 3]; 
```

...至

```
var a = [[1, 1], 2, 3]; 
```

[实时复制](http://jsbin.com/izujer/2)| [资源](http://jsbin.com/izujer/2/edit)

...你看到这个：

```
第一个
*>[数组[2], 2, 3]*
第二
第三
```

...并单击数组旁边的箭头将其更改为：

```
第一个
*v[数组[2], 2, 3]*
    0：“11”
    1:2
    2：3
    长度：3
    __proto__: 数组[0]
第二
第三
```

...这看起来有点荒谬。

但这*确实是*有道理的，你必须从控制台的角度来考虑*你*要求它输出的东西。它为事物输出一条线，*这条线*是静态的。但是因为它看到对象图更深了，所以 Chrome 在数组旁边放了一个箭头，这样你就可以扩展它。*当您单击该数组时，然后*通过查看对象的*当前*版本，生成添加到输出的新行，该版本自输出第一行以来明显发生了变化。棘手，是吗？

在评论中，epascarello 提到了 using `console.dir`，但这只是让它更可靠地“活”，而不是成为一个时间点记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:44:51.120

您的问题可能`console.log`是异步的。尝试将其注释掉或在该行中放置超时/断点。

# facebook - Facebook 应用程序被限制，什么是 gr:post:User/external_edge

> ID：13923429
> 
> 赞同：1
> 
> 时间：2012-12-17T22:39:32.420
> 
> 标签：facebook, facebook-graph-api, facebook-insights, throttling

我们的应用程序目前正在受到限制，我们正在获取

```
{
  "error": {
    "message": "(#4) Application request limit reached", 
    "type": "OAuthException", 
    "code": 4
  }
} 
```

在`App`-> `Insights`-> `Developer`->`Activity & Errors`我们看到

```
Restrictions
App is unrestricted.

API Throttling
None during specified period. 
```

所以看起来我们不应该受到限制，但我*可以*看到一个警告，

```
Calls Are Too CPU Intensive  - 2 hours, 38 minutes
Method  Fraction of Budget

gr:post:User/external_edge  109%
gr:post:User/scores 1.8%
gr:get:User/external_edge   1.8%
gr:get:/fql 1.2%
ui:feed:async:get:  0.43%
gr:post:OpenGraphAction/commen  0.15%
ui:apprequests:iframe:get:  0.08%
gr:delete:Post  0.04%
gr:delete:  0.02%
ui:feed:async:post: 0.02% 
```

我认为这意味着我们过于频繁地向 User/external_edge...

我们不应该在被 API 切断之前收到电子邮件或警告吗？我们需要做什么才能不受约束？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:44:36.627

限制会在一段时间后自动重置，我认为这是一个 600 秒的滚动窗口来计算限制，但如果实际达到限制，可能会将阻塞延长到 3600 秒；不幸的是，API 响应中无法查看您与 CPU 和调用限制的接近程度，尤其是 CPU 限制难以预测，因为调用需要处理它们的资源差异很大。

`gr:post:User/external_edge`是 Open Graph 动作，其他方法以连接的名称命名（例如`gr:post:User/scores`是 Graph API ( `gr`) POST 请求 ( `post`) 针对对象的`scores`连接`User`）

如果您的应用程序在这些方面受到限制，并且您没有为每个用户发布大量操作，请检查使用哪个访问令牌来发布帖子；如果它是应用程序访问令牌，请使用用户访问令牌来代替发布帖子的用户

# matlab - 绘制拉格朗日点

> ID：13923432
> 
> 赞同：4
> 
> 时间：2012-12-17T22:39:42.040
> 
> 标签：matlab, physics

我试图通过在 Matlab 中绘制给定的势函数来找到三体系统的 5 个拉格朗日点。唯一的问题是我不太擅长编程。任何帮助将不胜感激。我想知道的是如何让这段代码给我一个像样的等高线图：

```
function Lagrange(a)

x = ( -10000: 1 : 10000);
y = ( -10000: 1 : 10000);
Potential = zeros(length(x));

for i = 1: length(x)
    for j = 1 : length(y)

    Potential(i,j) =  ( 1 - a ) / sqrt( ( x(i) - a )^2 + y(j)^2)  + a / sqrt( ( x(i) + 1    - a )^2 + y(j)^2 ) + ( x(i)^2 + y(j)^2 ) / 2 ;

    end

    j = 1;
end

contour(Potential);

xlabel('X axis'); 
ylabel('Y axis'); 
zlabel('Z axis'); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:11:43.550

三体问题的设置方式，距离坐标归一化为`a`。因此，您应该选择`x`并且`y`更像：

```
x = linspace(-1.5, 1.5, 1000);
y = linspace(-1.5, 1.5, 1000); 
```

对于等高线图，您可以使用`meshgrid`，它可以让您避免 for 循环并更轻松地绘制：

```
[X, Y] = meshgrid(x, y); 
```

对于势，尝试绘制 2U - 这称为[Jacobi 常数](http://ccar.colorado.edu/asen5519/imd/documents/CRTBP_Handout.pdf)，信息量更大。

```
U = (1-a)./sqrt(Y.^2 + (X + a).^2) + ...
     a./sqrt(Y.^2 + (X + a - 1).^2) + ...
     0.5*(Y.^2 + X.^2);
Z = 2*U; 
```

最后，你需要轮廓。你会想为你的情节调整这些，但我使用了类似的东西

```
c = [2.988:0.05:3.1, 3.2:0.2:5]; 
```

对于地月系统。现在，要绘制，只需使用`contourf`如下：

```
figure
contourf(X, Y, Z, c)
colorbar 
```

另请注意，您可以使用运动方程解析拉格朗日点本身 - 您也可以考虑绘制这些点，因为等高线只会会聚在点上，但永远不会碰到它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:54:26.070

**Recommendations**

*   Try using vector operations (rather than `for` loops), they're much faster. This is done by adding a '.' in front of the operator: `*` becomes `.*`
*   The matrix sizes suggested above may be a bit large, you'll likely run out of memory. Try first with a smaller step size, then increase resolution.
*   Your 'Z' axis in the Matlab `contour()` plot will be the color of the lines, so there is nothing to label. Try `colorbar` instead.
*   Use `...` to continue long statements on multiple lines.
*   By convention, words starting with a capital letter are reserved for class definitions.

**Suggested Code**

```
function lagrange(a)
  n = 100000;
  stepsize = 100;
  [x,y] = ndgrid(-n:stepSize:n, -n:stepSize:n)
  potential = ( 1 - a ) ./ sqrt( ( x - a ).^2 + y.^2)  + ...
    a ./ sqrt( ( x + 1 - a ).^2 + y.^2 ) + ( x.^2 + y.^2 ) ./ 2 ;

  contour(x,y,potential)
  xlabel('X axis')
  ylabel('Y axis')
  colorbar
end 
```

# c# - 从第二个键盘重定向键盘输入

> ID：13923436
> 
> 赞同：0
> 
> 时间：2012-12-17T22:40:00.897
> 
> 标签：c#, .net, usb, hid

我正处于为现有 POS 程序开发配套应用程序的初始阶段。基本上我正在寻找类似针垫的功能。我们有一个 Targus USB 数字键盘，希望客户可以使用它来输入 PIN 码。（这不适用于支付系统，仅用于客户帐户验证）。主 POS 程序将运行，但我需要我的应用程序在后台运行并等待输入 PIN，然后它将进行身份验证。

可能的解决方案 #1：我从 Code Project 下载了一个示例项目，该项目通过 VID 和 PID 寻址 USB HID 设备。这将是完美的，但是键盘以某种方式受 Windows 保护，无法通过这种方式访问​​。有没有办法在 Windows 中“取消保留”键盘，使其仍然是 HID 设备，但不被视为键盘？

可能的解决方案#2：有一些键盘挂钩示例，但这些也不起作用，因为键盘输出仍将发送到 POS 应用程序。无论哪个程序有焦点，我都需要键盘输出只进入我的后台应用程序。有没有办法将输出从特定键盘重定向到特定应用程序？

这将推广到远程位置的 100 多个 POS 终端，因此不需要重新配置窗口的解决方案将是可取的。它还需要在 C# .NET 2.0 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:28:31.053

我曾经为 POS 解决方案跨过这座桥。我发现一个keystroke就是一个keystroke就是一个keystroke，简单明了。如果不编写您自己的设备驱动程序，我无法找到实现此目的的方法。

因此，我们的方法只是在等待客户输入他们的密码时禁用收银员的输入访问权限，反之亦然，此时收银员应该有输入权限而不是客户。

我知道这不是你想听到的答案，但这是我通过经验找到的答案。

**编辑**：需要探索的东西......直接处理 COM 端口非常容易。您可以考虑使用 COM 键盘设备，而不是 USB 设备。这将使您更好地控制设备的输出。COM 是一项相当古老的技术，要找到具有这些端口的 POS 机可能会很困难。这对我们来说不是一个选择，所以我们从未探索过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:45:52.003

您最好的选择是购买操纵杆“键盘”，以便您可以将设备（USB HID）作为非键盘/非鼠标读取（因为键盘和鼠标受操作系统限制，不可绕过，因为它是硬编码的进入设备管理。）

我推荐的是寻找 PI Engineering 的键盘，因为他们的键盘可以注册为操纵杆。他们有自定义映射软件，可以模拟在他们的设备上按下一个键以在 Windows 消息队列中发送一个键（模拟键盘）。相反，您可以使用他们的 SDK 直接对设备进行编程（因为每个键只是一个操纵杆按钮），并且不会干扰 POS 软件。

[PI Engineering 可编程键盘](http://www.piengineering.com/xkeys.php)

[USB 访问描述](http://at.or.at/hans/research/nime/hid/apis.html)（下面列出的相关部分，以防链接失效）

**微软Windows**

*Windows 驱动程序开发工具包 HID*

Windows DDK HID API 类似于 Apple HID 管理器，它是一个复杂的低级 API，与 USB HID 非常相似。程序可以访问或多或少的每一个设备，包括输入和输出，除了键盘和鼠标，微软故意阻止了这个 API。与目前介绍的其他 API 不同，读取机制的性质使得如果没有专门用于从队列中读取事件的线程，则很难使用。虽然乍一看似乎需要购买 Microsoft 的驱动程序开发工具包才能使用此 API，但可以将其与免费的 MinGW 工具一起使用。

在 Windows 中，设备插入和拔出事件的通知被发送到窗口句柄，因此为了接收它们，hidio 对象需要它自己的（不可见）窗口，然后可以接收通知。在当前实现中，对象在收到此类通知时会自动重建设备列表。此外，如果设备当前处于打开状态，它会检查设备是否仍处于连接状态或已被移除。

*直接输入*

Microsoft 的 DirectInput API 提供了一个相对简单的接口，但以牺牲灵活性为代价。它对 USB HID 设备类型的支持有限，主要针对最流行的游戏设备；在 USB HID-speak 中，它只支持“通用桌面页面”。它确实提供了对鼠标和键盘数据的访问，但不是作为单独的设备。如果连接了多个鼠标或键盘，则所有数据都集中到一个虚拟设备中。它确实支持力反馈，但不支持任何其他输出类型。与 Linux input.h 一样，它有自己的简化事件方案，并且还会自动缩放一些传入的数据，这可能会出现问题。

*Windows 原始输入*

Raw Input 是从 Windows XP 开始提供的新 API，旨在响应开发人员对键盘和鼠标进行原始访问的愿望。这是从 Windows 上的鼠标和键盘获取原始数据的唯一方法。使用原始输入，可以获得任何 USB HID 设备的输入事件，但根本不支持输出。出于这个原因，我们还没有深入探索 Raw Input，但我们可能会使用它来完全支持 Windows 上的键盘和鼠标。

# php - PHP：尝试未捕获的异常...捕获

> ID：13923437
> 
> 赞同：3
> 
> 时间：2012-12-17T22:40:06.773
> 
> 标签：php, exception, runtime-error

我目前正在为我的一个项目开发一个自动加载器类。下面是控制器库的代码：

```
 public static function includeFileContainingClass($classname) {

        $classname_rectified = str_replace(__NAMESPACE__.'\\', '', $classname);
        $controller_path     = ENVIRONMENT_DIRECTROY_CONTROLLERS.strtolower($classname_rectified).'.controller.php';

        if (file_exists($controller_path)) {

           include $controller_path;
           return true;

        } else {

           // TODO: Implement gettext('MSG_FILE_CONTROLLER_NOTFOUND')
           throw new Exception('File '.strtolower($classname_rectified).'.controller.php not found.');
           return false;

        }

     } 
```

这是我尝试调用自动加载器的文件的代码：

```
 try {

     spl_autoload_register(__NAMESPACE__.'\\Controller::includeFileContainingClass');

  } catch (Exception $malfunction) {

     die($malfunction->getMessage());

  }

  // TESTING ONLY
  $test = new Testing(); 
```

当我尝试强制故障时，我收到以下消息：

```
Fatal error: Uncaught exception 'Exception' with message 'File testing.controller.php not found.' in D:\cerophine-0.0.1-alpha1\application\libraries\controller.library.php:51 Stack trace: #0 [internal function]: application\Controller::includeFileContainingClass('application\Tes...') #1 D:\cerophine-0.0.1-alpha1\index.php(58): spl_autoload_call('application\Tes...') #2 {main} thrown in D:\cerophine-0.0.1-alpha1\application\libraries\controller.library.php on line 51 
```

似乎有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:41:29.023

因为你没有抓住它...

```
spl_autoload_register(__NAMESPACE__.'\\Controller::includeFileContainingClass');

try {
    $test = new Testing();
} catch (Exception $malfunction) {
    die($malfunction->getMessage());
} 
```

# c# - 什么时候可以安全地读取文件

> ID：13923440
> 
> 赞同：2
> 
> 时间：2012-12-17T22:40:20.960
> 
> 标签：c#, file

我们将文件发送到我们的 FTP（Windows 服务器 2008 R2），我们的一项服务选择文件进行处理。到我们的 FTP 的文件大小为 500 MB 甚至更多。如何在 C# 中确定文件已完成复制到 FTP 目录中？我不想在文件仍在复制时阅读它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:47:51.360

尝试在阅读时使用排他锁

```
string filename = "Test.txt";

try
{
   using(FileStream fs = new FileStream(filename, FileMode.Open, FileAccess.Read, FileShare.None))
   {
      // Read content here
   }
}
catch(IOException)
{
    // Occurs if the file cannot be exclusively locked.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:46:16.227

通常文件会在写操作期间被 ftp-server 锁定。

所以你可以做的是尝试用排他锁打开文件进行读取。如果失败（抛出异常），您知道该文件不可用。

# java - 计算数组中元素的出现次数

> ID：13923442
> 
> 赞同：4
> 
> 时间：2012-12-17T22:40:34.300
> 
> 标签：java, arrays

```
char [] array = {a,a,a,b,b,c,c,c,a,d}; 
```

我想计算该数组中的每个相同元素，以便将其从最高频率排序到最低频率。我希望输出变成这样：

```
4 (for a)
2 (for b)
3 (for c)
1 (for d) 
```

我试过这个

```
public static void CountbyChar(String s){
    int [] arr = new int [s.length()];
    char [] c =s.toCharArray();
    for (int i=0;i<c.length;i++){
        arr[i]=1;
        for (int j=i+1;j<c.length;j++){
            if(c[i]==c[j]){
                arr[i]++;
            }
        }
    }
    for (int x:arr){
        System.out.println(x);
    }
} 
```

但我得到了：

```
4
3
2
2
1
2
1
1 
```

我的错在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:54:51.393

Here's a simple example of how to use a Map to achieve the same result:

```
char[] inputChars = { 'a', 'b', 'c', 'a', 'a', 'b', 'a', 'a' };

//  create a map whose keys will be the chars in the array and
//  whose values will represent the number of times each char 
//  occurs in the input array.

Map<Character, Integer> countMap = new HashMap<Character, Integer>();

// loop over the input array and populate the map

for (char c : inputChars) {
    if (countMap.containsKey(c)) {
        int currentCount = countMap.get(c);
        countMap.put(c, currentCount + 1);
    }
    else {
        countMap.put(c, 1);
    }
}

// test it

for (char c : countMap.keySet()) {
    print(c + ": " + countMap.get(c));
} 
```

More reading on Maps:

*   Map interface: [http://docs.oracle.com/javase/6/docs/api/java/util/Map.html](http://docs.oracle.com/javase/6/docs/api/java/util/Map.html)
*   HashMap implementation: [http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html](http://docs.oracle.com/javase/6/docs/api/java/util/HashMap.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T22:42:58.873

问题是您正在为字符串中的每个字符创建一个新计数器，而不是为每个可能的字母创建一个。本质上，您的程序计算一个字符在当前字符之后的位置出现在字符串中的次数。

解决这个问题应该相对容易：为字母表中的每个字母制作计数器，并在您看到相应的字母时增加它们。假设您区分大小写，您可以这样做：

```
public static void CountbyChar(String s){
    int [] arr = new int [256];
    for (char c : s.toCharArray()){
        if (c < 256) {
            arr[c]++;
        }
    }
    for (int i = 0 ; i != 256 ; i++) {
        if (arr[i] != 0) {
            System.out.print((char)i);
            System.out.print(" : ");
            System.out.println(arr[i]);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T22:54:19.613

You are basically having a counter for each letter in the string, you should keep one Map and accumulate the count for each letter.

Something like this should be sufficient

```
public static void CountbyChar(String s){
        HashMap<Character, Integer> letterCountMap = new HashMap<Character, Integer> ();
        char [] c =s.toCharArray();
        for (int i=0;i<c.length;i++){
            Integer count = 0;
            if (letterCountMap.containsKey(c[i])){
                count = letterCountMap.get(c[i]) + 1 ;
            }else {
                count = 1;
            }
            letterCountMap.put(c[i], count);
        }
        for (Map.Entry<String, String> entry : letterCountMap.entrySet())
        {
            System.out.println(entry.getValue() + "( for" + entry.getKey() + " )");
        }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T22:44:04.600

您想要迭代您的数组并构建元素映射，以便每个映射条目都是您遇到该键的次数的计数。因此，如果映射中不存在该键，则将其添加为 1，否则使用该键的递增计数更新映射。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-17T22:43:28.433

这是因为您正在独立处理每个角色的位置 - 这意味着您仅在角色出现后才进行计数。

编辑：因为我被打败了，这是一个正确的例子：

```
public int[] charFrequency(String s) {
    int[] frequencies = new int[256];
    for (char c : s.toCharArray()) {
        if (c > 0 && c < 256) {
            frequencies[c]++;
        }
    }
    return frequencies;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-17T23:12:17.420

这是使用地图的实现：

```
public static void countbyChar(String s){
    Map<Character, Integer> map = new HashMap<Character,Integer>();

    for (char c : s.toCharArray()){
         Integer count = map.get(c);
         if (count == null) {
            map.put(c, 1);
         }
         else {
            map.put(c, count + 1);
         }
    }

    for (Map.Entry<Character, Integer> entry : map.entrySet())
    {
        System.out.println(entry.getKey().toString() + "/" + entry.getValue().toString());
    }
} 
```

# android - 数据库 | if (c.moveToFirst()) | NPE

> ID：13923443
> 
> 赞同：0
> 
> 时间：2012-12-17T22:40:38.170
> 
> 标签：android, sql

所以我开始制作一个数据库，当我尝试获取所有记录时，应用程序会抛出一个空指针。

```
DBAdapter db = new DBAdapter(this); 
```

-

```
db.open();
        Cursor c = db.getAllRecords();
        if (c.moveToFirst()) //<--- NPE
        {
            do {          
                DisplayRecord(c);
            } while (c.moveToNext());
        }
        db.close(); 
```

我不明白它为什么这样做。我的插入语句是：

```
db.open();        
        long id = db.insertRecord("Peanuts");        
        id = db.insertRecord("Coconuts");
        id = db.insertRecord("Almonds");
        db.close(); 
```

我不明白为什么这会返回 null

**编辑：**每个请求的整个数据库代码

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DBAdapter {
public static final String KEY_ROWID = "id";
public static final String KEY_ITEM = "item";

private static final String TAG = "DBAdapter";

private static final String DATABASE_NAME = "InventoryDB";
private static final String DATABASE_TABLE = "inventory";
private static final int DATABASE_VERSION = 1;

private static final String DATABASE_CREATE =
    "create table if not exists inventory (id integer primary key autoincrement, "
    + "item VARCHAR not null);";

private final Context context;    

private DatabaseHelper DBHelper;
private SQLiteDatabase db;

public DBAdapter(Context ctx) 
{
    this.context = ctx;
    DBHelper = new DatabaseHelper(context);
}

private static class DatabaseHelper extends SQLiteOpenHelper 
{
    DatabaseHelper(Context context) 
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) 
    {
        try {
            db.execSQL(DATABASE_CREATE);    
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {
        Log.w(TAG, "Upgrading database from version " + oldVersion + " to "
                + newVersion + ", which will destroy all old data");
        db.execSQL("DROP TABLE IF EXISTS inventory");
        onCreate(db);
    }
}    

//---opens the database---
public DBAdapter open() throws SQLException 
{
    db = DBHelper.getWritableDatabase();
    return this;
}

//---closes the database---    
public void close() 
{
    DBHelper.close();
}

//---insert a record into the database---
public long insertRecord(String item) 
{
    ContentValues initialValues = new ContentValues();
    initialValues.put(KEY_ITEM, item);
    return db.insert(DATABASE_TABLE, null, initialValues);
}

//---deletes a particular record---
public boolean deleteContact(long rowId) 
{
    return db.delete(DATABASE_TABLE, KEY_ROWID + "=" + rowId, null) > 0;
}

//---retrieves all the records---
public Cursor getAllRecords() 
{
    return db.query(DATABASE_TABLE, new String[] {KEY_ROWID, KEY_ITEM}, null, null, null, null, null, null);
}

//---retrieves a particular record---
public Cursor getRecord(long rowId) throws SQLException 
{
    Cursor mCursor =
            db.query(true, DATABASE_TABLE, new String[] {KEY_ROWID,
            KEY_ITEM}, 
            KEY_ROWID + "=" + rowId, null, null, null, null, null);
    if (mCursor != null) {
        mCursor.moveToFirst();
    }
    return mCursor;
}

//---updates a record---
public boolean updateRecord(long rowId, String item) 
{
    ContentValues args = new ContentValues();
    args.put(KEY_ITEM, item);

    return db.update(DATABASE_TABLE, args, KEY_ROWID + "=" + rowId, null) > 0;
} 
```

}

# php - 如何不在 php 中自动加载类？

> ID：13923447
> 
> 赞同：3
> 
> 时间：2012-12-17T22:40:59.343
> 
> 标签：php, autoload, autoloader

我的 php 代码开头的自动加载器

```
function __autoload($class_name) {
    include_once $class_name . '.class.php';
} 
```

导致调用`new MongoClient();`失败并出现错误*`Warning: include_once(MongoClient.class.php): failed to open stream`*

如何在我的类中使用自动加载器并且仍然使用标准类？

注意：MongoDb 已经与 PECL 一起安装，并且在删除自动加载功能后可以正常工作。php 5.4.9 上的 mongo-1.3.0beta2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T22:42:46.060

PHP**不会**尝试自动加载 stl 中的任何内容（如 PDO、mysqli 等）

如果`MongoClient`不是这些类型的类之一，它将尝试自动加载它。

[确保您已安装 PECL](http://php.net/manual/en/class.mongoclient.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:47:42.517

`__autoload()`，如果已定义，则在您每次尝试访问尚未使用手动导入的类时调用，`require_once()`或者`include_once()`不是 PHP 内部类的一部分。

在您的情况下，`__autoload()`尽管您尝试访问 PHP 内部类（`MongoClient`由 php-mongo 扩展提供），但仍会触发。当您不使用`__autoload()`它时，它会按预期工作。

看起来扩展与 PHP 解释器不兼容。您应该首先尝试从 beta 更新到稳定的 1.3.1 版本。如果这没有帮助，则需要进一步调查。

* * *

顺便说一句，如果您尝试`MongoClient`在命名空间 use 中实例化一个对象`\MongoClient()`，如下所示：

```
namespace Foo;

$client = new \MongoClient(); 
```

`\`指的是全局命名空间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-04T13:38:41.580

正如 Neal 所指出的，请确保您已安装 PECL mongo 客户端，并请记住，有时 PHP`php.ini`会为 CLI 使用不同的文件。

如果在 CLI 中，您可以通过执行以下操作获得正确`php.ini`：

```
php -r "phpinfo();" | grep "php.ini" 
```

所以，在检查了 PECL 之后，确保你有`extension=mongo.so`正确的`php.ini`

# oracle - 无法在 Oracle 中选择视图的单个行

> ID：13923448
> 
> 赞同：0
> 
> 时间：2012-12-17T22:41:00.230
> 
> 标签：oracle, oracle10g

视图如下所示：

```
Create or Replace view MyView( Col1, Col2, Col3) as 
select count(OuterQ.Name), OuterQ.Year, Outer.Date 
      (select InnerQ.Name, InnerQ.Year, X.Date, 
         From X
            , ( select p.Id, p.Name, t.year from p,t where p.id = t.id) InnerQ 
        where X.field = 'YYY' 
          and X.value = t.value) OuterQ 
group by OuterQ.Date, OuterQ.Year 
```

例如，当我需要视图中的一个特定列值时，`select Col1 from MyView;`我收到错误*"904 invalid identifier"*。

但是当我运行时`select * from MyView`，查询运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:34:00.240

您有语法错误：

```
-- first off , remove ( Col1, Col2, Col3) 
Create or Replace view MyView( Col1, Col2, Col3) as

select count(OuterQ.Name), OuterQ.Year, Outer.Date

-- you should have FROM clause here or   
(select InnerQ.Name, InnerQ.Year, X.Date,

From X, (select p.Id, p.Name, t.year from p,t where p.id = t.id) InnerQ

where X.field = 'YYY' and X.value = t.value) OuterQ

 -- FROM Clause here of outer query    
group by OuterQ.Date, OuterQ.Year 
```

# jquery - 用于在输入键上提交表单且不刷新页面的 jquery 代码

> ID：13923449
> 
> 赞同：0
> 
> 时间：2012-12-17T22:41:10.693
> 
> 标签：jquery

我正在尝试做一些类似于 facebook 上发生的事情。我需要为我的博客制作它。下面给出的这段代码的问题是它没有响应回车键，因此没有进一步的执行。但是当我简单地使用没有 ajaxForm 功能的输入键检查代码时，它会响应。

代码：

```
$('#msg').keypress(function(e){
   if (e.keyCode == 13 && !e.shiftKey) {
      //checking for enter key as well as shift+enter
      $(document).ready(function() { 
         $('#form1').ajaxForm(function() {
            //for from id=form1 submitting without refreshing the page
            $('#msg').val(''); //clearing out the textarea with id=msg
           //loading fetchposts.php in id=display with new posts
            $("#displaychat").load("fetchposts.php")
         }); 
      }); 
   }
});​ 
```

简而言之，我想要的是当按下回车键时，表单被提交并显示新结果而不刷新页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:47:08.637

您的按键侦听器中有一个不必要的 document.ready 函数

在我的代码中，我已将按键侦听器附加到 body 元素。这应该够了吧

```
$('body').keypress(function(e) {
    if (e.keyCode == 13 && !e.shiftKey) {
        $('#form1').ajaxForm(function() { 
            $('#msg').val(''); 
            $("#displaychat").load("fetchposts.php") 
        });
    }
});​ 
```

# c# - MVC3 Linq 查询添加到列表

> ID：13923451
> 
> 赞同：0
> 
> 时间：2012-12-17T22:41:23.513
> 
> 标签：c#, list, generics

我正在尝试`db.tblSoftwares`通过使用查询来构建软件名称列表。

我尝试过使用`.Add`方法，但它不起作用。

任何建议，将不胜感激。

```
public ActionResult Details(int id)
{
   // this gets the hostname based on id//
   tblComputer tblcomputer = db.tblComputers.Find(id);
   var workstation  = tblcomputer.HostName;

   // next want to get the list of software names assigned to host name//

   // get the list of licenses for hostname based on id/
   var Licenses = (from n in db.tblLicenses
                   where n.tblComputerComputerId == id
                   select n.tblSoftwareSoftwareId).ToList();

   List<string> appslist = new List<string>();

   foreach (var l in Licenses)
   {
       var query1 = (from s in db.tblSoftwares
                     where s.SoftwareId == l
                     select new { s.Name }).ToList();

       // appslist = query1;           
   }                         

   var swList = new List<string> { "Adobe", "MS Office", "MS Visio" };

   var ViewModel = new ComputerSoftwareViewModel
   {
       HostName = workstation,
       Applications = swList                
   };

   return View(ViewModel);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:55:47.230

加入两个表并直接选择新列表。

试试这个： [C# Joins/Where with Linq and Lambda](https://stackoverflow.com/questions/2767709/c-sharp-joins-where-with-linq-and-lambda)

# windows-phone-7 - Windows Phone 相当于 Android 的 WebViewClient.shouldInterceptRequest 或 iOS 的 NSURLCache cachedResponseForRequest

> ID：13923457
> 
> 赞同：1
> 
> 时间：2012-12-17T22:41:43.563
> 
> 标签：windows-phone-7, webbrowser-control

我的任务是为基于 Web 的应用程序构建 Android、iOS 和 Windows Phone 包装器。

关键要求之一是某些资产捆绑在应用程序中（例如图像、CSS 和 JavaScript 文件），以减少带宽并帮助提高响应能力，同时仍然通过 Internet 拉取 HTML（和任何丢失的资产）。为此，我需要以某种方式拦截在每个平台的本机浏览器组件中发出的请求。

在 Android 中，我可以通过重写 WebViewClient.shouldInterceptRequest 方法来拦截请求，然后如果确定请求的文件存在并且文件扩展名以“.css”、“.jpg”、“. png”或“.js”。如果没有，资产将照常通过互联网提取。

在 iOS 下，我可以通过创建一个继承自 NSURLCache 对象的对象并覆盖 cachedResponseForRequest 方法来拦截请求，如果确定请求的文件存在并且文件扩展名以“.css”结尾，则再次替换来自应用程序文件系统的本地数据、“.jpg”、“.png”或“.js”。如果没有，资产将照常通过互联网提取。

这两个包装器都按预期工作。当相应的文件存在时，确认 CSS、图像和 JavaScript 文件已成功从本地资产中提取和执行。

我现在需要做的是为 Windows Phone 构建等效项，但到目前为止，我还没有设法弄清楚如何拦截 Microsoft.Phone.Controls.WebBrowser 对象发出的请求。

我已经到处寻找了，但到目前为止还没有发现任何有用的东西。

谁能指出我正确的方向？

# android - 如何使用蓝牙串口从 Arduino 接收数据到 Android？

> ID：13923458
> 
> 赞同：3
> 
> 时间：2012-12-17T22:41:47.743
> 
> 标签：android, bluetooth, serial-port, controls, arduino

我正在尝试使用 Android 设备通过蓝牙控制 Arduino。我能够控制 Arduino 上的 LED 和一些组件。但我不知道如何让 Android 从 Arduino 接收数据，类似于[BlueTerm](https://play.google.com/store/apps/details?id=es.pymasde.blueterm)应用程序的工作方式。任何人都可以帮助我吗？我不想使用[Amarino](http://www.amarino-toolkit.net/)库，因为我不想使用额外的`.jar`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:17:02.687

请参阅此工作示例：[通过蓝牙在 Android 和 Arduino 之间传输数据](http://english.cxem.net/arduino/arduino5.php)

# scala - 使用 Scala Combinator Parsers 区分整数和浮点数

> ID：13923463
> 
> 赞同：2
> 
> 时间：2012-12-17T22:42:19.287
> 
> 标签：scala, parser-combinators

我一直在让 scala 组合器解析器（特别是通过 JavaTokenParsers 的 RegexParsers）在整数和浮点数之间做出决定时遇到问题。我必须在这里遗漏一些非常基本的东西，因为我似乎无法在任何地方找到任何提及这个特定问题的内容。我已经在有问题的解析器代码中包含了一个规范（当然，减去了）。

```
@RunWith(classOf[JUnitRunner])
class SandboxSpec extends FlatSpec with ShouldMatchersForJUnit {

  sealed trait PropertyValue

  case class IntValue(value: Int) extends PropertyValue
  case class RealValue(value: Float) extends PropertyValue

  class Parser extends JavaTokenParsers {
    def propertyLiteral : Parser[PropertyValue] = intValue | realValue

    def realValue  = floatingPointNumber ^^ {
      s => RealValue(s.toFloat)
    }

    def intValue  = wholeNumber ^^ {
      s => IntValue(s.toInt)
    }
  }

  "A java token parser" should "parse a float" in {
    val p = new Parser()

    val result = p.parseAll(p.propertyLiteral, "5.4") match {
      case p.Success(x, _) => x
      case p.NoSuccess(msg, _) => fail(msg)
    }

    result should be(RealValue(5.4f))

  }
} 
```

这失败并显示以下错误消息：

```
string matching regex `\z' expected but `.' found 
```

一个想法是，基于这个[线程](http://www.scala-lang.org/node/3627)，我`<~ not(not('.'))`在整数之后放置了一个，但这似乎并没有解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T00:21:54.557

你快到了 - 你唯一需要改变的`not(not('.'))`是`not('.')`。为什么？

问题是`intValue`总是消耗点之前的部分。如果您现在编写`x ~ '.'`，请检查是否有一个点，并将其与点之前的部分一起使用。但是你想在没有点的时候消费，所以你必须写`x ~ not('.')`.

当你写作时，`x ~ not(not('.'))`你有一个双重否定，这与没有否定是相同的。这里唯一的区别是这种双重否定允许您查找下一个输入而不使用它。这是因为在失败时输入不会被消耗以允许以下解析器再次解析它。对于双重失败，您既不会消耗任何东西，也不会实现已经提到的查找。

# django - Django 管理文本编辑器中的 Html 标签

> ID：13923464
> 
> 赞同：1
> 
> 时间：2012-12-17T22:42:21.147
> 
> 标签：django, django-admin, django-cms

[我刚刚在这里](http://www.nigelrahkola.com/)建立了一个 Django CMS ，但在尝试发布内容时遇到了问题。我只能发布没有任何 html 标签的原始文本。

我想要 flatpages 应用程序的功能，我可以在其中标记自己的段落、标题等。

我的解决方案是像更改设置/修改我的模板一样简单，还是我必须考虑添加像 Dojo 这样的文本编辑器？

我的 Django CMS 的代码：[https ://github.com/Jollyra/blog](https://github.com/Jollyra/blog)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-13T11:19:27.187

您还可能会发现以下内容对您的网站很有用。你可以使用 markdown、Textile 或 reST。设置说明位于以下链接：

[https://docs.djangoproject.com/en/1.4/ref/contrib/markup/](https://docs.djangoproject.com/en/1.4/ref/contrib/markup/)。

如上所述，您需要将内容标记为安全，否则模板将转义输出以避免 HTML 或 Javascript 注入并为方便起见。您可以在 Django 模板语言中将标签的输出标记为安全，如下所示：

```
{{ tag|safe }} 
```

或者在平面页面的情况下：

```
{{ flatpage.content|safe }} 
```

# image-processing - 投影变换 - matlab 代码

> ID：13923470
> 
> 赞同：0
> 
> 时间：2012-12-01T19:32:17.957
> 
> 标签：image-processing, matlab

我不能使用我需要从头开始构建它的任何工具箱功能。

```
% load images
img1 = readImage('roadSign.tif');
img2 = readImage('lena.tif');

% call the main function  
mapIntoImage(img1,img2)

function    [newImage] = mapIntoImage(imageA,imageB)
%  Input:      imageA, imageB - a grayscale image in the range [0..255].
% 
%  Output:    newImage – imageA into which image B has been mapped.
% 
showImage(imageA)
hold on
% Initially, the list of points is empty.
xy = [];
% Loop, picking up the points.
disp('Please enter corners of place to insert image in clockwise order.')

for j = 1:4
   [xi,yi] = ginput(1);
   %draw a yellow dot
   plot(xi,yi,'yo')
   xy(:,j) = [xi;yi];
end

% get x1 y1 cordinates  - xy(:, 1)

imgRow = size(imageB,1);
imgCol = size(imageB,2);

[X,Y] = meshgrid(1:imgCol,1:imgRow);

imgBcords = [0 size(imageB, 1) size(imageB,1) 0 ;
        0 0 size(imageB,2) size(imageB,2)];
coefs = findCoefficients(xy, imgBcords);

A = [coefs(1) coefs(2) coefs(5);coefs(3) coefs(4) coefs(6); coefs(7) coefs(8) 1];

temp = zeros(size(X,1), size(X,2), 3);
new = ones(256);
for i = 1:size(X,1)
    for j = 1:size(X,2)
        temp(i,j,:) =A*[X(i,j); Y(i,j); new(i,j)];
end
end

end 

function [ result ] = findCoefficients( imageA, imageB )
% finds coefficients for inverse mapping algorithem 
%   takes 2 X 2d vectors each consists of 4 points x,y
%   and returns the coef accroding to reverse mapping function
%
% x y 0 0 1 0 -xx' -yx'
% 0 0 x y 0 1 -xy' -yy'  
%                       y' and x' are in the destenation picture;

A = [imageB(1,1) imageB(2,1) 0 0 1 0 -imageB(1,1)*imageA(1,1) -imageB(2,1)*imageA(1,1); 
    0 0 imageB(1,1) imageB(2,1) 0 1 -imageB(1,1)*imageA(2,1) -imageB(2,1)*imageA(2,1);
imageB(1,2) imageB(2,2) 0 0 1 0 -imageB(1,2)*imageA(1,2) -imageB(2,2)*imageA(1,2);
0 0 imageB(1,2) imageB(2,2) 0 1 -imageB(1,2)*imageA(2,2) -imageB(2,2)*imageA(2,2);
imageB(1,3) imageB(2,3) 0 0 1 0 -imageB(1,3)*imageA(1,3) -imageB(2,3)*imageA(1,3);
0 0 imageB(1,3) imageB(2,3) 0 1 -imageB(1,3)*imageA(2,3) -imageB(2,3)*imageA(2,3);
imageB(1,4) imageB(2,4) 0 0 1 0 -imageB(1,4)*imageA(1,4) -imageB(2,4)*imageA(1,4);
0 0 imageB(1,4) imageB(2,4) 0 1 -imageB(1,4)*imageA(2,4) -imageB(2,4)*imageA(2,4)];
B = [imageB(1,1); imageB(2,1); imageB(1,2); imageB(2,2); imageB(1,3); imageB(2,3); imageB(1,4); imageB(2,4)];

result = pinv(A)*B;
end 
```

我现在想构建变换 [x' y' 1] = A*[XY 1]; 我发现我需要使用 repmat，但我似乎无法在没有循环的情况下获得真正的语法。最有效的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T21:26:19.270

射影变换的形式为

$ x' = \frac {a_{11}x+a_{12}y+a_{13}}{a_{13}x+a_{23}y+a_{33}} \\ y' = \frac { a_{21}x+a_{22}y+a_{23}}{a_{13}x+a_{23}y+a_{33}} $

其中系数被定义为某个比例因子。确保比例因子恒定的方法之一是设置 $a_{33}=1$。考虑它的一种简单方法是使用齐次坐标：

$ \left( \begin{array}{ccc} x'\\y'\\S\end{array} \right) = \left( \begin{array}{ccc} a_{11} & a_{12} & a_{13}\\a_{21} & a_{22} & a_{23}\\ a_{31} & a_{32} & a_{33}\end{array} \right) \left( \begin {array}{ccc} x\\y\\1\end{array} \right) $

这些坐标是按比例定义的。那是，

$ \left( \begin{array}{ccc} x'/S\\y'/S\\1\end{array} \right) \equiv \left( \begin{array}{ccc} x'\\ y'\\S\end{数组} \right)$

因此，在您的情况下，您应该这样做：（假设`x`and`y`是列向量，并且`A`是我上面描述的矩阵的转置：

```
 XY = A * [x y ones(size(x))];
  XY(:,1) = XY(:,1)./XY(:,3);
  XY(:,2) = XY(:,2)./XY(:,3); 
```

# mysql - 从 MySQL 数据库中获取按字段分组的具有最高值的行

> ID：13923472
> 
> 赞同：2
> 
> 时间：2012-12-17T22:42:43.340
> 
> 标签：mysql, sql

我有下表

```
+----+----------+-----+
| id | priority | sub |
+----+----------+-----+
| 1  |    1     |  A  |
| 2  |    3     |  A  |
| 3  |    4     |  A  |
| 4  |    2     |  B  |
| 5  |    9     |  B  |
+----+----------+-----+ 
```

我正在尝试为每个子获取具有最高优先级的行。所以这个结果：

```
+----+----------+-----+
| id | priority | sub |
+----+----------+-----+
| 3  |    4     |  A  |
| 5  |    9     |  B  |
+----+----------+-----+ 
```

我尝试分组，但这会产生不可预测的结果。我的猜测是嵌套查询，首先开始查找最高优先级，如下所示：

```
select max(priority),sub from t group by sub 
```

这给了我

```
+----------+-----+
| priority | sub |
+----------+-----+
|    4     |  A  |
|    9     |  B  |
+----------+-----+ 
```

但我也需要 ID，添加到查询中显然给了我错误的 ID，将这个结果与同一张表上的查询结合起来给了我一个错误 (ER_NONUNIQ_TABLE(1066))，这是有道理的......任何可以推动我的人在正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T22:44:49.843

`PRIORITY`子查询背后的想法是它分别获取每个的最大值`SUB`。然后将其结果连接回原始表。

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  sub, max(priority) maxVal
            FROM    tableName
            GROUP BY sub
        ) b ON a.sub = b.sub AND
                a.priority = b.maxVal 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/75c50/5)

# c++ - 在哪里可以找到 Clang 的教程？

> ID：13923474
> 
> 赞同：12
> 
> 时间：2012-12-17T22:42:54.633
> 
> 标签：c++, clang

我一直在研究使用 Clang 作为工具。但我能找到的唯一“文档”是 Doxygen 输出，它与自动霰弹枪的错误末端一样有用，而 API 本身与核废料一样用户友好。它参考了程序员指南，但实际上我似乎找不到类似的东西。

有没有关于 Clang C++ API 的像样的教程？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T23:20:29.900

我发现以下信息具有说明性：

*   [注释教程代码设置解析器](https://github.com/loarabia/Clang-tutorial)
*   [AST 访客](http://clang.llvm.org/docs/RAVFrontendAction.html)
*   [Clang 工具的来源](http://clang.llvm.org/docs/ClangTools.html)
*   源代码库中的测试 (llvm/tools/clang/test)

虽然我也发现文档倾向于关注 c api；libclang。

在阅读了上面的一些教程之后，大多数注释的源代码都变得更有意义了。

*然而*，代码库移动很快，我发现有一些重构活动与来自 svn 的最新签出，因此教程可能需要稍微更新。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T22:53:40.410

Best you can use is [Eli Bendersky's blog posts](http://eli.thegreenplace.net/tag/llvm-clang) on llvm/clang.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-09T17:16:06.570

我发现[LLVM 的程序员手册](http://llvm.org/docs/ProgrammersManual.html)很有帮助。

# php - 无法让 PHP 在 Joomla 中填充选择列表代码！BreezingForms 工作

> ID：13923476
> 
> 赞同：0
> 
> 时间：2012-12-17T22:42:58.717
> 
> 标签：php, forms, joomla, selectlist, breezingforms

我正在使用由 BreezingForms for Joomla! 的开发人员托管的此页面中的确切代码片段（简单版本的第 1 步），仅修改为具有正确的表和字段名称，以及表单中选择列表的名称：[http ://crosstec.de/media/kunena/attachments/59203/BreezingFormsscriptdev.txt](http://crosstec.de/media/kunena/attachments/59203/BreezingFormsscriptdev.txt)

我想要在 BreezingForms 中做的就是填充一个选择列表，其中“地址”字段作为名称，“buildingID”作为值。我不需要步骤 2、3 等中的脚本，因为我不需要填充其他表单字段。但是，在“高级”>“表单选项”>“表单件”>“表单前”框中插入此代码后，选择列表甚至无法显示在带有表单的页面上，请参见此处：[http ://catondesigngroup.com/websites/joooid/select-测试/视图/form.html](http://catondesigngroup.com/websites/joooid/select-test/view/form.html)

表单域标签“选择列表”存在，但选择列表框未能出现。我看不出它为什么不起作用的任何原因。这里有什么问题？请帮忙！

*注意：我省略了这两行代码，因为我不需要用户名或用户 ID，但是尝试实现这些代码行确实有帮助：*

$user = &JFactory::getUser(); // 通过 JFactory 获取用户 $userid = $user->id; // 您可能需要为此使用不同的值或无

=========开始代码==============

```
this->execPieceByName('ff_InitLib');

$rows = ff_select("SELECT buildingID, address
FROM ty43k_building_inspection");
$listdata = "0;Please make a selection;0\n";
for ($i = 0; $i < count($rows); $i++) {
$listdata .= "0;{$rows[$i]->address};{$rows[$i]->buildingID}\n";
}

ff_setSelectList('select1', $listdata);

function ff_setSelectList($name, $value) {
global $ff_processor;
for ($r = 0; $r < $ff_processor->rowcount; $r++) {
$row =& $ff_processor->rows[$r];
if ($row->name==$name)
$row->data2 = $value;
unset($row);
} // for

} // ff_setSelectList 
```

========结束代码=========

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T05:57:12.023

尝试`$`在代码开头添加一个：

```
this->execPieceByName('ff_InitLib'); 
```

所以结果是：

```
$this->execPieceByName('ff_InitLib'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-03T10:53:05.217

可能是因为你使用函数

```
ff_setSelectList('select1', $listdata); 
```

在它的定义之前？

定义后尝试移动用法：

```
function ff_setSelectList($name, $value) {
 global $ff_processor;
 for ($r = 0; $r < $ff_processor->rowcount; $r++) {
  $row =& $ff_processor->rows[$r];
  if ($row->name==$name)
   $row->data2 = $value;
  unset($row);
  } // for
} // ff_setSelectList

ff_setSelectList('select1', $listdata); 
```

# qt - QT FramelessWindowHint Windows 7 停靠在一边

> ID：13923484
> 
> 赞同：2
> 
> 时间：2012-12-17T22:43:47.363
> 
> 标签：qt, windows-7, screen, qwidget, dock

我用“Qt::FramelessWindowHint | Qt::WindowMinimizeButtonHint | Qt::WindowSystemMenuHint” windowFlags 制作了一个 QWidget。

我重新实现了所有鼠标事件，以便能够移动/调整窗口大小。

我想做的最后一件事是能够获得与有关 Windows 7 Dock 系统的“普通窗口”相同的行为。

当我使用普通窗口将窗口移动到屏幕的左/右/顶部附近时，它会将其大小调整为 halfWindowSize 或全屏。

知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:24:50.687

Well that will be too obvious but still...

You need to listen `move` event and whenever you detect `top-left <= 0` or `top-right >= SCREEN_WIDTH` you will manually re-size your window. Surely you need to get screen size before all those and calculate half of it and so on.

No need to mention that, in half-maximized state you need to listen and check if the window is moved to restore its previous dimensions.

I really believe there is no trivial way to implement this unless you are to use `winapi`. Well in `winapi` case one can object trivialness and I can't deny.

Please let us know if you eventually come up with an easier solution.

# javascript - 当另一个 javascript 操作被点击时，jQuery 移动标题消失（变得不固定）

> ID：13923490
> 
> 赞同：3
> 
> 时间：2012-12-17T22:44:10.407
> 
> 标签：javascript, jquery-mobile

我有一个由 jQuery mobile 提供的页面。在我所有的移动设备中，当我按下另一个链接或图像或任何其他使用 javascript 事件（如 onclick）的启用 javascript 的元素时，我的布局中的标题会消失。它实际上并没有真正消失，只是将它的位置属性更改为不固定。当我向上滚动到页面顶部时，我的标题图像就在那里，并且它与页面的其余部分一起滚动。然后，当我单击页面上另一个启用了 javascript 的元素时，它会将标题再次更改回固定。

这种行为会随着我在页面上单击的任何元素来回出现......真的很奇怪。

其他人看过这个吗？谁知道怎么修它？

这是我的布局：

```
<div data-role="page" id="page1" data-add-back-btn="false">
            <div data-theme="a" data-role="header" data-position="fixed">
                <div style="text-align:left;padding-top:5px;padding-left:3px;">
                    <img src="/images/mylogo.png" alt="Logo" />
                </div>
            </div>
            <div data-role="content">
                @{Html.RenderAction("Items", "Feedback", new {area=""});}
                @RenderBody()
            </div>

        </div> 
```

TIA

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T16:22:06.933

不确定这是否能解决您的问题，但我遇到了同样的问题，只是无论我在哪里点击什么，它都会发生。

我添加`data-tap-toggle="false"`到固定元素。

希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T07:07:45.853

这真太了不起了。帮助我在应用程序上解决了这个问题。在列表选项中绑定一个类时发生这种情况很奇怪。单击列表中的任何选项时，页眉和页脚变为可移动，然后再次单击它们变为固定。

`data-tap-toggle="false"`使用您在`header`and the中建议的属性 `footer`，它就像一个魅力。谢谢。

# php - 在while循环中打印一次

> ID：13923491
> 
> 赞同：0
> 
> 时间：2012-12-17T22:44:23.500
> 
> 标签：php, if-statement, while-loop

我在while循环中有这段代码。

$hometeamwin=(lose,win) 所以上面的那段代码正在打印“winlose”

如果在 $hometeamwin 中出现“失败”，我希望它打印“失败”（但只有一次！）

如果没有出现“输”打印“赢”（但只有一次！）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:47:52.110

如果我了解您的问题（我不肯定），您想查看所有投注，如果其中任何一个导致输了，那么在您列出所有投注后，您想根据是否显示输赢结果中有损失。我复制了您的代码并添加了 3 行标有 #ADDED。添加这三行来实现我所描述的。

```
if($num_rows) {
    $wonBet = true;  #ADDED
    while ($row = mysql_fetch_assoc($result)) {
        echo "<tr>";
        if(!$row["ht_score"]) {
            $halftime = "-";
        } else {
            $halftime = $row["ht_score"];
        }
        if(!$row["ft_score"]) {
            $fulltime = "-";
        } else {
            $fulltime = $row["ft_score"];
        }

        echo "<td>" . $row["home_team"] . "</td>" . "<td>" . " vs " . "</td>" . "<td>" . $row["away_team"] . "</td>" . "<td>" . $halftime . "</td>" . "<td>" . $fulltime . "</td>";

        $value = $fulltime;
        $apart = explode('-',$value); 
        if($apart[0] > $apart[1] && $row["home_id"]==$row["winningid"]) {
            $hometeamwin = "Win";
        } else if($apart[0] < $apart[1] && $row["away_id"]==$row["winningid"]) {
            $hometeamwin = "Win"; 
        } else if($apart[0] == $apart[1] && !$row["winningid"]) {
            $hometeamwin = "Win"; 
        } else { 
            $hometeamwin = "lose";    
        }

        if($fulltime!=$row["ft_score"]) {
             $hometeamwin = "";
        }
        if($hometeamwin == "lose"){  #ADDED
            $wonBet = false;         #ADDED
        }                            #ADDED
        echo "<td>" . $hometeamwin . "</td>";
        echo "</tr>";
    }

    echo ($wonBet) ? "You won bet" : "You lost bet";  #ADDED
} 
```

# playlist - js 播放器 html5 视频标签生成器的视频播放列表

> ID：13923492
> 
> 赞同：1
> 
> 时间：2012-12-17T22:44:30.420
> 
> 标签：playlist

在我的 Video.js html5 视频播放器的右侧或底部添加播放列表的最简单方法是什么？

# objective-c - Objective-C 类初始化参数

> ID：13923495
> 
> 赞同：2
> 
> 时间：2012-12-17T22:44:50.203
> 
> 标签：objective-c, class, parameters

我目前正在重新开始使用一些 Objective-C。我遇到的问题是将变量传递给类实例的本机 init 方法。

我的@interface 中有这个自定义初始化：

```
-(id)init
{
    if(self = [super init]) {
        level = 1;
        NSLog(@"Debug response");
    }

    return ([NSObject init]); // return self;
} 
```

这是我的应用程序的主要课程：

```
#import "AppDelegate.h"
#import "PlayableCharacter.h"

@implementation AppDelegate

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    // Insert code here to initialize your application
    NSArray *params = [NSArray arrayWithObjects: @"Elf", nil];

    PlayableCharacter *allendar = [[PlayableCharacter alloc] init:params];
}

@end 
```

有人可以解释我做错了什么吗？我认为 NSArray 对象将适合“id”C 对象的配置文件。提供初始化参数是非法的还是必须以其他方式完成？

错误状态：“'PlayableCharacter' 没有可见的@interface 声明选择器'init：'”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T22:48:30.767

您的`-init`方法没有任何参数。它等价于以下 C：

```
void *init();

void *foo = init(bar); // error 
```

如果您想将其称为`-init:`，则将其声明为

```
- (id)init:(NSArray *)params; 
```

然而，这是一个非常不标准的命名。如果你真的想要一个需要一个的 init 方法`NSArray`，那么也许将它命名为

```
- (id)initWithArray:(NSArray *)array; 
```

但是从你的示例代码我猜你并不需要一个数组，你只需要一个参数。所以你会使用

```
- (id)initWithCharacterClass:(NSString *)className; 
```

然后将其称为

```
PlayableCharacter *allendar = [[PlayableCharacter alloc] initWithCharacterClass:@"Elf"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T22:51:01.970

如果要使用参数进行初始化，请创建如下`init`方法：

```
-(id)initWithParams:(NSArray *)params
{
    if(self = [super init]) {
        level = 1;
        NSLog(@"Debug response");

        // Do something with params
    }

    return self;
} 
```

另外，您应该只返回`self`，而不是`[NSObject init]`

# c# - 将此从 WP7 移植到 Windows 8

> ID：13923496
> 
> 赞同：0
> 
> 时间：2012-12-17T22:44:50.667
> 
> 标签：c#, xml, windows, linq, windows-8

我找不到如何从此代码中替换 Webclient。

什么是新的命名空间以及在 Windows 8 中创建它的方式...... Win 8 dev 的新功能。

任何提示或帖子都会有所帮助，或者下面的任何代码。

```
WebClient client = new WebClient();
 client.DownloadStringCompleted += new DownloadStringCompletedEventHandler(client_DownloadStringCompleted);
 Uri url2 = new Uri("http://www.buscms.com/api/XmlEntities/v1/stops.aspx", UriKind.Absolute);
 client.DownloadStringAsync(url2);

 void client_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e) 
{ 
    if (e.Error == null) 
    { 
        if (e.Result != null) 
        { 
            XDocument doc = XDocument.Parse(e.Result); 
            XNamespace ns = "http://schemas.datacontract.org/2004/07/BusExpress.ClassLibrary"; 
            var routeNames = (from n in doc.Descendants(ns + "ArrayOfStop") 
                             select new RootContainer2
                             { 
                                 Departures = (from s in n.Elements(ns + "Stop") 
                                          select new Departures
                                          {

                                              StopName = s.Element(ns + "StopName").Value,    

                                          }).ToList()
                             }).Single();

            listBox2.ItemsSource = routeNames.Departures;

      } 
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:47:46.600

您可以使用 HTTPClient 代替 WebClient，如下所示：

```
public async Task<string> DownloadTheString()
{
    HttpClient http = new System.Net.Http.HttpClient();
    HttpResponseMessage response = await http.GetAsync("http://www.buscms.com/api/XmlEntities/v1/stops.aspx");
    string result = await response.Content.ReadAsStringAsync();

    // Return the downloaded string
    return result;
} 
```

这也是另一个非常相似的问题：[Windows 8 中不存在 WebClient 类](https://stackoverflow.com/questions/9482402/webclient-class-doesnt-exist-in-windows-8)

# javascript - 在javascript中创建一个没有冗余的搜索字符串数组

> ID：13923504
> 
> 赞同：0
> 
> 时间：2012-12-17T22:45:11.827
> 
> 标签：javascript, jquery, arrays, string

给定一个用字符串填充的数组。我需要以下行为：

```
foo = []
foo = add_search_string(foo, 'a') 
```

foo 应该等于 ['a']

```
foo = add_search_string(foo, 'a') 
```

foo 应该等于 ['a'] 因为 'a' 已经是一个搜索字符串

```
foo = add_search_string(foo, 'ab') 
```

foo 应该等于 ['ab'] 因为 'a' 是 'ab' 的子字符串，因此可以删除

```
foo = add_search_string(foo, 'a') 
```

由于与上述相同的原因， foo 应该等于 ['ab']

```
foo = add_search_string(foo, 'c') 
```

foo 应该等于 ['ab', 'c']

我的功能如下所示：

```
function add_search_string(search_strings, new_search_string) {
    var keep = true;
    var new_search_strings = []
    $.each(search_strings, function(i, search_string) {
        if (new_search_string == search_string) {
            keep = false;
        } else if (search_string.indexOf(new_search_string) >= 0) {
            keep = false;
        }
    });

    if (keep) {
        $.each(search_strings, function(i, search_string) {
            if (new_search_string.indexOf(search_string) == -1) {
                new_search_strings.push(search_string);
            }
        });
        new_search_strings.push(new_search_string);
        search_strings = new_search_strings;
    }
    return search_strings;
} 
```

有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:51:34.623

如果打算继续更新同一个数组，我可能会这样做：

```
function add_search_string(search_strings, new_search_string) {
   var replaced = false;
   for (var i = search_strings.length -1; i >= 0; i--) {
      if (search_strings[i].indexOf(new_search_string) != -1) {
          // string found, so just return
          return search_strings;
      }
      if (new_search_string.indexOf(search_strings[i]) != -1){
          // existing string is a substring of new search string
          // if it already matched another element just remove the current one
          // otherwise replace the current one
          if (replaced)
              search_strings.splice(i,1);
          else
              search_strings[i] = new_search_string;
          replaced = true;
      }
   }
   // if not found add it
   if (!replaced)
      search_strings.push(new_search_string);
   return search_strings;
} 
```

尽管此函数返回数组，但它也会更新您传入的数组，因此您不必在调用该函数时将其分配回去，您只需说：

```
add_search_string(foo, 'a'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:51:00.583

没有一种快速的内置方法可以做到这一点。而且，如果您想测试真正的子字符串而不仅仅是“开始于”，这是一个二次问题，这意味着该函数将花费 n^2 倍的时间，而 n 是键的长度。如果密钥不是太长，它应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T23:39:36.420

由于您需要“包含”运算符，因此数组 join() 可能很有效：

```
var str = search_strings.join("|");

// if the new string can't be found
if str.indexOf(new_search_string)==-1 {
    // remove sub-strings of new_search_string (need to start from the top)
    for (var i=search_strings.length-1;i>=0;i--) {
        if (new_search_string.indexOf(search_strings[i])!=-1) {search_strings.splice(i,1);}
    }
    // add new
    search_strings.push(new_search_string);
}
// else new_search_string can be ignored 
```

为了加快处理速度，您还可以考虑按字符串长度对数组进行排序或过滤，并且仅循环遍历比 new_search_string 短的字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T23:11:35.943

对于高性能实现，您将使用[后缀树](http://en.wikipedia.org/wiki/Suffix_tree)在您的搜索字符串（及其子集）中快速搜索。但是，只有当您真的遇到简单实现的问题（如您的或@nnnnnn 的）时，您才应该这样做，因为 trie 会增加巨大的复杂性层。

# java - 理解 Java 中的 Set 接口

> ID：13923505
> 
> 赞同：1
> 
> 时间：2012-12-17T22:45:15.633
> 
> 标签：java, generic-collections

我一直在努力理解 Java 中 Set 接口的自定义实现背后的整个抽象概念。在我们的讲座中，我们已经实现了功能集甚至标志集，这两者似乎都是固有的递归列表，具有为集合实现精确构建的功能。

归根结底，即使某些自定义实现不会从列表中删除对象，也可以使用简单的 for-each 循环从集合中简单地调用集合中的对象。

例如，在提到的这个函数集中，{1,2,3} 表示为 Add 3, Add 2, Add 1, Empty，而直接调用的 remove(2) 方法看起来像 Remove 2, Add 3, Add 2 ，加1，空。那么 Java 在什么基础上决定元素是否是集合的一部分？它是否仅适用于 add() 和 remove() 方法来确定对象是否仍然存在于集合中？

我希望我足够连贯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:49:01.413

> 在我们的讲座中，我们已经实现了功能集甚至标志集，这两者似乎都是固有的递归列表，具有为集合实现精确构建的功能。

这些实现不太可能对 Java Sets 有特别的指导意义。Java 集是可变的……没有功能。无论如何，Java Set API 的通用规范由`java.util.Set`接口的 javadoc 给出。

* * *

> 那么 Java 在什么基础上决定元素是否是集合的一部分？

Set / Collection“合同”要求它使用`equals(Object)`来确定这一点。例如，[`Collection.contains(Object)`](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#contains%28java.lang.Object%29)方法指定如下：

> *“如果此集合包含指定元素 [o]，则返回 true。更正式地说，当且仅当此集合包含至少一个`e`这样的元素时，才返回 true `(o==null ? e==null : o.equals(e))`。”*

不同的集合实现用`Comparable`/ `Comparator`API 或`Object.hashCode()`. 详细信息在各自的实现类 javadocs 中。

但是，不能保证自定义`Set`实现会遵守合同。

* * *

> 它是否仅适用于 add() 和 remove() 方法来确定对象是否仍然存在于集合中？

其他`Set`方法（例如`contains()`）也需要知道一个对象是否是一个集合成员......如果这是您所要求的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:46:44.250

你查过Oracle提供的java源代码吗？这是一个很好的起点。检查类 Set 中的方法将回答您的问题。

set 和 list 之间的主要区别在于 set 不尊重顺序。因此，如果您按特定顺序添加项目，则无法保证以相同的顺序将它们取回。这是因为 Set 优化了顺序以实现尽可能快的访问时间。因此 Set 在大多数情况下更快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T22:48:05.850

> 那么 Java 在什么基础上决定元素是否是集合的一部分？

功能集实现的作者在任何基础上进行了编程。Java 中没有内置这样的实现，因此我们无法知道是否有源代码供您检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T22:51:29.770

从右侧（从`Empty`）开始，向左工作。你最终得到的是那个时候的 set 状态。

您的代码所做的是从现有集（从空集开始）和单个更改（添加或删除元素）创建一个新的不可变集。这就是你用函数式语言编写集合的方式，因为一切都是不可变的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T22:52:00.830

您问的是删除不存在或已添加两次的项目是否以与理论集合不一致的方式行事？然后不，通过and`Set`学习和忘记成员。`add()``remove()`

# php - 文件末尾出现意外的文件结尾错误

> ID：13923507
> 
> 赞同：0
> 
> 时间：2012-12-17T22:45:16.063
> 
> 标签：php

运行下面的示例代码时遇到问题。它在代码末尾说：“语法错误，文件意外结束”。有人能帮我吗？我也不明白是否`<? ?>`与`<?php ?>`. 谢谢

```
 <?php 
    /**
     * @copyright Copyright (C) DocuSign, Inc.  All rights reserved.
     *
     * This source code is intended only as a supplement to DocuSign SDK
     * and/or on-line documentation.
     * This sample is designed to demonstrate DocuSign features and is not intended
     * for production use. Code and policy for a production application must be
     * developed to meet the specific data and security requirements of the
     * application.
     *
     * THIS CODE AND INFORMATION ARE PROVIDED "AS IS" WITHOUT WARRANTY OF ANY
     * KIND, EITHER EXPRESSED OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE
     * IMPLIED WARRANTIES OF MERCHANTABILITY AND/OR FITNESS FOR A
     * PARTICULAR PURPOSE.
     */

    /*
     * Lists status of all envelopes in an account
     */

    //========================================================================
    // Includes
    //========================================================================
    include_once 'include/session.php'; // initializes session and provides
    include_once 'api/APIService.php';
    include 'include/utils.php';

    //========================================================================
    // Functions
    //========================================================================
    function createStatusTable() {
        $count = count($_SESSION["EnvelopeID"]);
        if (isset($_SESSION["EnvelopeID"]) && count($_SESSION["EnvelopeID"]) > 0) {
            $api = getAPI();

            $filter = new EnvelopeStatusFilter();
            $filter->AccountId = $_SESSION["AccountID"];
            $filter->EnvelopeIds = $_SESSION["EnvelopeID"];
            try {
                $rsexParams = new RequestStatusesEx();
                $rsexParams->EnvelopeStatusFilter = $filter;
                $statuses = $api->RequestStatusesEx($rsexParams)->RequestStatusesExResult;
            } catch (SoapFault $e) {
                $_SESSION["errorMessage"] = $e;

                header("Location: error.php");
            }

            if (isset($statuses)) {
                pr($statuses);
                ?> <ul class=""> <?
                foreach ($statuses->EnvelopeStatuses->EnvelopeStatus as $status) {
                   ?>
                        <li>
                            <span><u><?= $status->Subject ?></u> 
                                [ <?= $status->Status ?> ] - 
                                <?= $status->EnvelopeID; ?> 
                                <a href="getstatusofenvelope.php?envelopeid=<?= $status->EnvelopeID; ?>" target="_blank" title="Click to see a RequestStatus SOAP return for this Envelope">View RequestStatus</a>
                                &nbsp;&nbsp;<a href="getpdf.php?envelopeid=<?= $status->EnvelopeID; ?>" target="_blank" title="Click to download PDF for this Envelope">Download PDF</a></span>
                            <ul>
                                <!-- Recipients -->
                                <li>
                                    <span>Recipients ( <?= count($status->RecipientStatuses->RecipientStatus); ?> )</span>
                                    <ul id="<?= $status->EnvelopeID; ?>">

                                        <? foreach($status->RecipientStatuses->RecipientStatus as $rcpStatus){ ?>
                                                    <li>
                                                        <!-- Recipient Name and Start Signing -->
                                                        <?
                                                            echo $rcpStatus->UserName;
                                                        ?> 
                                                        <a href="embeddocusign.php?from_gsad=1&envelopeID=<?= $status->EnvelopeID; ?>&clientID=<?= $rcpStatus->ClientUserId ?>">Start Signing</a>
                                                    </li>
                                        <? } ?>

                                    </ul>
                                </li>

                                <!-- Documents -->
                                <li>
                                    <span>Documents ( <?= count($status->DocumentStatuses->DocumentStatus); ?> )</span>
                                    <ul>
                                        <? foreach($status->DocumentStatuses->DocumentStatus as $docStatus){ ?>
                                                <li>
                                                    <?= $docStatus->Name; ?>
                                                </li>
                                        <? } ?>
                                    </ul>
                                </li>

                            </ul>
                        </li>
                   <?
                    };
                ?> </ul> <?
            }
        } else {
          // No Envelopes created yet
                echo '<tr><td><div class="sampleMessage">';
                echo '  No envelopes created, yet. Use the tabs to create an Envelope.';
                echo '</div></td></tr>';

        }
    }

    //========================================================================
    // Main
    //========================================================================
    loginCheck();

    if ($_SERVER["REQUEST_METHOD"] == "POST") {

    }
    else if ($_SERVER["REQUEST_METHOD"] == "GET") {

    }

    ?>

    <!DOCTYPE html">
    <html>
        <head>
            <link rel="stylesheet" href="css/default.css" />
            <link rel="stylesheet" type="text/css" href="css/GetStatusAndDocs.css" />
            <script type="text/javascript" src="js/Utils.js"></script>
            <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        </head>
        <body>

            <script type="text/javascript">
                    // Invert rows when clicking (not implemented, simple enough to view without deep-clicking)
                    function invert(ident) {
                        var state = document.getElementById(ident).style.display;
                        if (state == 'block') {
                            document.getElementById(ident).style.display = 'none';
                        } else {
                            document.getElementById(ident).style.display = 'block';
                        }
                    }
                </script>

            <div class="container">
                <div class="authbox">
                    <span><?php echo $_SESSION["UserID"]; ?></span> 
                    (<a href="index.php?logout">logout</a>)
                </div>
                <table class="tabs" cellspacing="0" cellpadding="0">
                    <tr>
                    <td><a href="senddocument.php">Send Document</a></td>
                    <td><a href="sendatemplate.php">Send a Template</a></td>
                    <td><a href="embeddocusign.php">Embed Docusign</a></td>
                    <td class="current">Get Status and Docs</td>
                    </tr>
                </table>
                    <div id="statusDiv">
                    <?php createStatusTable(); ?>
                </div>
             <?php include 'include/footer.html'; ?>
            </div>
        </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:50:00.240

[啊！](http://i.stack.imgur.com/1T3SG.jpg)您必须`short_open_tag`在`php.ini`文件中打开才能使用速记`<? ?>`。

> 从[文档中](http://php.net/manual/en/ini.core.php#ini.short-open-tag)：
> 
> **`short_open_tag`** *boolean*`<? ?>` - 告诉 PHP 是否应该允许 PHP 的 open 标记的短格式 ( )。如果您想将 PHP 与 XML 结合使用，您可以禁用此选项以使用`<?xml ?>`内联。否则，您可以使用 PHP 打印它，例如：
> `<?php echo '<?xml> version="1.0"?>'; ?>`.
> 
> **此外，如果禁用，您必须使用 PHP 开放标记 ( `<?php ?>`)**的长格式。
> [（重点和格式已更改）]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-13T14:54:52.887

对于某些服务器，我有这个错误，因为我写`<?`而不是`<?php`......

# jquery - 如何仅删除按钮圆角的一侧？

> ID：13923508
> 
> 赞同：3
> 
> 时间：2012-12-17T22:45:20.670
> 
> 标签：jquery, jquery-mobile

我有两个与 data-role="button" 并排的链接。我确实在对照组中有它，但我无法将宽度更改为 100%。由于我将它们从控件组中删除，我可以设置适当的宽度，但我希望控件组具有相同的外观，其中按钮具有圆角并且彼此相邻。如何仅删除按钮圆角的一侧？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:20:38.673

这是一个例子：http: [//jsfiddle.net/Gajotres/4wd92/](http://jsfiddle.net/Gajotres/4wd92/)

在 div 中包装一个按钮，以便 css 只能应用于它：

```
<div id="custom-button-container">
    <input type="button" data-theme="a" value="Changed Button">
</div> 
```

CSS：

```
#custom-button-container .ui-btn-corner-all {
    border-radius: 0 1em 1em 0 !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T22:59:00.557

如果您可以发布一些代码，那就太好了，但是请尝试查看这些链接，听起来它们可以帮助您:)

你可以尝试这样的事情。测试

其他一些我发现的阅读，可能会有一些答案。

[从jquery mobile中的按钮中删除圆角](https://stackoverflow.com/questions/10886014/removing-round-corners-from-the-button-in-jquery-mobile)

[如何在 jQuery Mobile 中删除圆角？](https://stackoverflow.com/questions/8463300/how-to-remove-round-corners-in-jquery-mobile)

# apache - 避免在 url mod rewrite 上加上额外的斜线

> ID：13923509
> 
> 赞同：1
> 
> 时间：2012-12-17T22:45:28.203
> 
> 标签：apache, mod-rewrite

我在 .htacces 文件中使用这个重写规则

```
RewriteRule ^(main|login|apps|user)/?$ index.php?_app_schema=system&_app_group=$1&%{QUERY_STRING} [NC,L]
RewriteRule ^(main|login|apps|user)/([A-z0-9]+)/?$ index.php?_app_schema=system&_app_group=$1&_app_option=$2&%{QUERY_STRING} [NC,L]
RewriteRule ^(main|login|apps|user)/([A-z0-9]+)/([A-z0-9]+)/?$ index.php?_app_schema=system&_app_group=$1&_app_option=$2&_app_action=$3&%{QUERY_STRING} [NC,L] 
```

我想避免用户这样做

mysite.com//////用户/////登录

mysite.com//main////

mysite.com///apps////app001

出于某种原因，我可以放置所有我想要的斜线。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:54:07.383

I think your problem is that Apache is normalizing the URL before it gets to your rules. You can access the actual request using %{THE_REQUEST} but you will want to be careful since that variable will be completely un-sanitized. I'd suggest you either use RewriteCond rules to compare THE_REQUEST to what you would like to match, or you could use RewriteCond to check for instances of multiple slashes and kick those requests out.

# php - 从数组中生成php中的switch case？

> ID：13923512
> 
> 赞同：5
> 
> 时间：2012-12-17T22:45:56.440
> 
> 标签：php, foreach, switch-statement

是否可以使用数组为 php 中的 switch 生成案例？就像是：

```
$x=array(
    0 => 'foo',
    1 => 'bar',
    2 => 'foobar'
);

$y='foobar'

switch($y) {
    foreach($x as $i) {
        case $i:
            print 'Variable $y tripped switch: '.$i.'<br>';
            break;
    }
} 
```

我希望能够从数据库中提取案例值并使用 while() 循环遍历它们。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T23:27:04.887

我相信你正在寻找的是沿着这条线的东西

```
foreach ($x as $i) {
    switch($i){
        case $y:
            print 'Variable $x tripped switch: '.$i.'<br>';
            break;
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T23:21:12.473

不，开关是开关，但您可以使用数组键来选择正确的值。基本上在您的数组中，您可以使键和值相同，然后您可以像这样使用 if 函数：

```
如果 ($array[$key]) ....
```

# vb.net - 如何抑制用户控件的关键事件

> ID：13923514
> 
> 赞同：0
> 
> 时间：2012-12-17T22:45:59.047
> 
> 标签：vb.net

我有一个用户控件的情况，它只包含一个文本框，并且与 VB6 中的行为有很大不同。
必要性是在某些情况下取消 key.Down 的 usercontrol 提到它不会触发此事件（在外部程序中）。
在那里，我尝试将文本框的 _KeyDown 事件处理程序放入用户控件 e.handled = true 和 e.suppressKeyPress = true 但没有结果。
用户控件仍会通过击键发出 KeyDown 事件。

```
Private Sub myText_KeyDown(ByVal sender As Object, ByVal e As System.Windows.Forms.KeyEventArgs) Handles myText.KeyDown

If e.KeyCode = Keys.Down Then 
    If stop_Down Then    'property
        e.Handled = True
        e.SuppressKeyPress = True
        Exit Sub
    End If
End If 
```

程序正确地通过此代码关于属性。
但不要抑制用户控件的 _KeyDown 事件。

在上面代码中显示的情况下，如何抑制从用户控件触发的 _KeyDown 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:50:40.597

您可以覆盖该`ProcessCmdKey`功能。这是接收击键的链中的第一个函数。

返回 true 并且链的其余部分将不会收到笔画。

例如（对于用户控件）：

```
Protected Overrides Function ProcessCmdKey(ByRef msg As Forms.Message, _
                                           keyData As Forms.Keys) As Boolean

    If MyCriteriasToIgnoreStroke Then
        Return True
    End If

    Return MyBase.ProcessCmdKey(msg, keyData)

End function 
```

# gradle - 如何在 gradle 中排除传递项目依赖项

> ID：13923516
> 
> 赞同：16
> 
> 时间：2012-12-17T22:46:00.043
> 
> 标签：gradle, dependencies, project

给定

```
dependencies {
   compile project(':subproject') {
        transitive = false
   }
} 
```

这在 gradle 1.3 中无法正常工作。（即所有依赖项都包含在子项目中）

这是一个错误还是有不同的语法来排除项目​​依赖项？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-12-28T12:58:36.077

所示语法将为对象添加一个新的（所谓的*动态*）`transitive`属性`Project`，除非在其他地方使用，否则不会产生任何效果。您将收到动态属性已被弃用的警告，这表明构建脚本中存在潜在错误，并且在 Gradle 2.0 中将严重失败。

正确的语法是（正如您已经指出的那样）：

```
dependencies {
    compile(project(':subproject')) {
        transitive = false
    }
} 
```

# svg - 将 Raphaël 与 ZPD (Zoom-Panning-Drag) 插件一起使用 - 缩放不与光标一起使用

> ID：13923517
> 
> 赞同：2
> 
> 时间：2012-12-17T22:46:02.730
> 
> 标签：svg, raphael, zooming, drag

我使用 Raphäel 和 Raphäel Sketchpad 库在浏览器中创建一个画板，效果很好。我已经实现了 Rapäel ZPD (https://github.com/andrewseddon/raphael-zpd) 在画板/SVG 容器 div 上进行平移/缩放。当我缩小并重新缩小时，光标会错位（Firefox/Chrome）。

我在 ZPD 中发现了以下代码，导致缩放或拖动时光标的位置出错：

```
/**
 * Instance an SVGPoint object with given event coordinates.
 */
me.getEventPoint = function(evt) {
    var p = me.root.createSVGPoint();
    p.x = evt.clientX;
    p.y = evt.clientY;
    return p;
}; 
```

构建 ZPD 的 SVGPan 也有同样的问题：[http](http://code.google.com/p/svgpan/issues/detail?id=14&can=1&q=zoom) ://code.google.com/p/svgpan/issues/detail?id=14&can=1&q=zoom 。但是，报告的问题中的建议似乎都不起作用。关于如何或为什么会发生这种偏移以及任何解决方案的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:48:39.433

Raphaël ZPD 的开发者似乎已经放弃了他的代码。我认为问题在于 Raphaël Sketchpad 中的缩放问题。但是，现在审查和编辑代码库几个小时，我还没有找到解决方案。

# php - PHP 在数组中搜索多个键/值对

> ID：13923524
> 
> 赞同：20
> 
> 时间：2012-12-17T22:46:44.940
> 
> 标签：php, arrays, multidimensional-array

我有一个数组列表（对于这个例子，我使用的是手机）。我希望能够搜索多个键/值对并返回它的父数组索引。

例如，这是我的数组：

```
// $list_of_phones (array)
Array
(
    [0] => Array
        (
            [Manufacturer] => Apple
            [Model] => iPhone 3G 8GB
            [Carrier] => AT&T
        )

    [1] => Array
        (
            [Manufacturer] => Motorola
            [Model] => Droid X2
            [Carrier] => Verizon
        )
) 
```

我希望能够执行以下操作：

```
// This is not a real function, just used for example purposes
$phone_id = multi_array_search( array('Manufacturer' => 'Motorola', 'Model' => 'Droid X2'), $list_of_phones );

// $phone_id should return '1', as this is the index of the result. 
```

关于我可以或应该如何做到这一点的任何想法或建议？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-18T23:24:01.583

也许这会很有用：

```
 /**
   * Multi-array search
   *
   * @param array $array
   * @param array $search
   * @return array
   */
  function multi_array_search($array, $search)
  {

    // Create the result array
    $result = array();

    // Iterate over each array element
    foreach ($array as $key => $value)
    {

      // Iterate over each search condition
      foreach ($search as $k => $v)
      {

        // If the array element does not meet the search condition then continue to the next element
        if (!isset($value[$k]) || $value[$k] != $v)
        {
          continue 2;
        }

      }

      // Add the array element's key to the result array
      $result[] = $key;

    }

    // Return the result array
    return $result;

  }

  // Output the result
  print_r(multi_array_search($list_of_phones, array()));

  // Array ( [0] => 0 [1] => 1 )

  // Output the result
  print_r(multi_array_search($list_of_phones, array('Manufacturer' => 'Apple')));

  // Array ( [0] => 0 )

  // Output the result
  print_r(multi_array_search($list_of_phones, array('Manufacturer' => 'Apple', 'Model' => 'iPhone 6')));

  // Array ( ) 
```

如输出所示，此函数将返回一个包含满足所有搜索条件的元素的所有键的数组。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-17T23:07:54.757

你可以使用 array_intersect_key 和 array_intersect 和 array_search

检查[array_intersect_key php手册](http://php.net/manual/en/function.array-intersect-key.php)以获取具有匹配键的项目数组

和[array_intesect php 手册](http://php.net/manual/en/function.array-intersect.php)来获取数组，如果项目具有匹配的值

您可以使用获取数组中键的值`$array[key]`

并使用 array_search 获取数组中的键值`$key = array_search('green', $array);`

php.net/manual/en/function.array-search.php

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-18T22:50:08.373

我最终做了以下事情。它不漂亮，但效果很好。对于任何阅读的人，请随时使用 DRYer 答案进行更新：

```
// Variables for this example
$carrier = 'Verizon';
$model = 'Droid X2';
$manufacturer = 'Motorola';

// The foreach loop goes through each key/value of $list_of_phones and checks
// if the given value is found in that particular array. If it is, it then checks
// a second parameter (model), and so on.
foreach ($list_of_phones as $key => $object)
{
    if ( array_search($carrier, $object) )
    {
        if ( array_search($model, $object) )
        {
            if ( array_search($manufacturer, $object) )
            {
                // Return the phone from the $list_of_phones array
                $phone = $list_of_phones[$key];
            }
        }
    }
} 
```

奇迹般有效。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-03-05T14:08:14.663

这种方式适用于像你这样的多维数组：

```
$test = array_intersect_key($list_of_phones, array(array("Manufacturer" => "Motorola", "Carrier" => "Verizon"))); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-18T10:39:20.183

我通过添加对不同比较运算符的支持来扩展 @MichaelRushton 的代码：

```
function multi_array_search ($array, $search) {
    $result = [];

    foreach ($array as $key => $value) { //iterate over each array element
        foreach ($search as $k => $v) { //iterate over each search condition
            $operator = $v[0];
            $searchField = $v[1];
            $searchVal = $v[2];

            switch ($operator) {
                case '=':
                    $cond = ($value[$searchField] != $searchVal);
                    break;

                case '!=':
                    $cond = ($value[$searchField] == $searchVal);
                    break;

                case '>':
                    $cond = ($value[$searchField] <= $searchVal);
                    break;

                case '<':
                    $cond = ($value[$searchField] >= $searchVal);
                    break;

                case '>=':
                    $cond = ($value[$searchField] < $searchVal);
                    break;

                case '<=':
                    $cond = ($value[$searchField] > $searchVal);
                    break;
            }

            //if the array element does not meet the search condition then continue to the next element
            if ((!isset($value[$searchField]) && $value[$searchField] !== null) || $cond) {
                continue 2;
            }
        }
        $result[] = $key; //add the array element's key to the result array
    }
    return $result;
}

    //incoming data:
    $phonesList = [
        0 => [
            'Manufacturer' => 'Apple',
            'Model' => 'iPhone 3G 8GB',
            'Carrier' => 'AT&T',
            'Cost' => 100000
        ],
        1 => [
            'Manufacturer' => 'Motorola',
            'Model' => 'Droid X2',
            'Carrier' => 'Verizon',
            'Cost' => 120000
        ],
        2 => [
            'Manufacturer' => 'Motorola',
            'Model' => 'Droid X2',
            'Carrier' => 'Verizon',
            'Cost' => 150000
        ]
    ];

    var_dump(multi_array_search($phonesList, 
                             [ ['=', 'Manufacturer', 'Motorola'], 
                               ['>', 'Cost', '130000'] ]
            ));

   //output:
   array(1) { [0]=> int(2) } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-12-21T00:53:23.980

这与@Boolean_Type 相同，但进行了一些改进以简化事情。

```
function multi_array_search($array, $search)
{
    $result = array();

    foreach ($array as $key => $val)
    {
        foreach ($search as $k => $v)
        {
            // We check if the $k has an operator.
            $operator = '=';
            if (preg_match('(<|<=|>|>=|!=|=)', $k, $m) === 1)
            {
                // We change the operator.
                $operator = $m[0];

                // We trim $k to remove white spaces before and after.
                $k = trim(str_replace($m[0], '', $k));
            }

            switch ($operator)
            {
                case '=':
                    $cond = ($val[$k] != $v);
                    break;

                case '!=':
                    $cond = ($val[$k] == $v);
                    break;

                case '>':
                    $cond = ($val[$k] <= $v);
                    break;

                case '<':
                    $cond = ($val[$k] >= $v);
                    break;

                case '>=':
                    $cond = ($val[$k] < $sv);
                    break;

                case '<=':
                    $cond = ($val[$k] > $sv);
                    break;
            }

            if (( ! isset($val[$k]) && $val[$k] !== null) OR $cond)
            {
                continue 2;
            }
        }

        $result[] = $key;
    }

    return $result;
} 
```

这样，您可以像这样简单地搜索：

```
$keys = multi_array_search($phonesList, array(
    'Manufacturer' => 'Motorola',
    'Cost >'       => '130000',
)); 
```

如果找到，您将拥有如下索引数组：（`array(1, 25, 33)`这只是一个示例）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-04-22T15:18:52.853

```
// $needle example: ["Manufacturer" => "Motorola", "Carrier" => "Verizon"]
$needle = ['1st-key' => $value1, '2nd-key' => $value2];
$result = array_filter($haystack, function($item) use ($needle) {
  return ($item['1stkey'] == $needle['1st-key'] & $item['2nd-key'] == $needle['2nd-key']);
}); 
```

我正在使用这样的东西并且它有效。它返回一个由相应 $haystack 项的右键键入的数组。我认为这更有意义和紧凑。

# javascript - 我网站上的 Facebook Like 按钮

> ID：13923527
> 
> 赞同：0
> 
> 时间：2012-12-17T22:47:02.017
> 
> 标签：javascript, facebook-graph-api, facebook-like, facebook-javascript-sdk

我为我的网站创建了一个赞按钮，我想在弹出窗口中为不喜欢我网站的用户显示一个赞按钮，所以我必须检测当前用户是否喜欢我的页面，我在谷歌搜索，所有示例都是关于粉丝页面我怎样才能为我的网站做到这一点？这是我显示喜欢按钮的代码

```
<div id="fb-root"></div>
<script>

(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/fr_FR/all.js#xfbml=1&appId= my_real_app_id";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));

</script>
<div class="fb-like" data-href="www.website.com/example" data-send="false" data-layout="button_count" data-width="100" data-show-faces="false"></div> 
```

# android - Android，试图弄清楚如何更改包名

> ID：13923530
> 
> 赞同：0
> 
> 时间：2012-12-17T22:47:15.673
> 
> 标签：android

我正在尝试在 Eclipse 中复制我的 android 项目。我使用了 ctr c 和 ctr v，这很有效。但是，他们是一种更改包名称的方法吗？无法弄清楚如何做到这一点。我确实看到一条消息说您可以使用重构。我在重构中没有看到这个选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T22:48:37.493

应用程序构建时的包名来自AndroidManifest.xml

只需更改根元素的 package 属性：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
          package="com.yourdomain.newpackage"
          android:versionCode="28"
          android:versionName="2.2.1"
          android:installLocation="auto"> 
```

要更改所有类的包名称，请选择项目层次结构中的根元素，右键单击并选择 Refactor > Rename

# c# - 无法导出 Crystal Report

> ID：13923533
> 
> 赞同：0
> 
> 时间：2012-12-17T22:47:23.637
> 
> 标签：c#, crystal-reports, export

我正在尝试将 Crystal Report 导出为 PDF。这是代码（显然密码和服务器名称以及其他内容已更改以保护无辜者）...

```
public void RunReport(string outputFile, int cc, int yr, int wk)
{     
    ReportDocument rd = new ReportDocument();     
    rd.Load(FullFilePath("myreport.rpt"));     
    rd.Refresh();     
    rd.SetDatabaseLogon("userid", "password");     
    foreach (Table tbl in rd.Database.Tables)    
    {          
        tbl.LogOnInfo.ConnectionInfo.ServerName = "dbname";          
        tbl.LogOnInfo.ConnectionInfo.DatabaseName = "";          
        tbl.LogOnInfo.ConnectionInfo.UserID = "userid";          
        tbl.LogOnInfo.ConnectionInfo.Password = "password";     
    }     
    foreach (IConnectionInfo ci in rd.DataSourceConnections)     
    {          
        ci.SetLogon("userid", "password");     
    }     
    DiskFileDestinationOptions diskFileDestinationOptions = new DiskFileDestinationOptions();     
    ExportOptions exportOptions;     
    PdfRtfWordFormatOptions pdfFormatOptions = new PdfRtfWordFormatOptions();     
    diskFileDestinationOptions.DiskFileName = outputFile;     
    crExportOptions = rd.ExportOptions;     
    {          
        crExportOptions.ExportDestinationType = ExportDestinationType.DiskFile;          
        crExportOptions.ExportFormatType = ExportFormatType.PortableDocFormat;          
        crExportOptions.DestinationOptions = diskFileDestinationOptions;          
        crExportOptions.FormatOptions = pdfFormatOptions;     
    }     

    SetCurrentValuesForParameterField(rd, "IP_COMP_CODE", cc);     
    SetCurrentValuesForParameterField(rd, "IP_YEAR", yr);     
    SetCurrentValuesForParameterField(rd, "IP_WEEK", wk);          

    rd.Export();
}

private void SetCurrentValuesForParameterField(ReportDocument reportDocument, string paramFieldName, int value)
{ 
    ParameterDiscreteValue parameterDiscreteValue = new ParameterDiscreteValue(); 
    parameterDiscreteValue.Value = value.ToString();
    ParameterValues currentParameterValues = new ParameterValues(); 
    currentParameterValues.Add(parameterDiscreteValue);
    reportDocument.DataDefinition.ParameterFields[paramFieldName].ApplyCurrentValues(currentParameterValues);
} 
```

现在奇怪的是，当我第一次编写这段代码时（它在 SVN 中），它会给我一个 COM 异常，说我第一次导出时内存不足（这是在 ASP.NET MVC 应用程序中） )，但所有后续导出（直到我重新启动网络应用程序）都可以正常工作。

产生的错误是：

```
First-chance exception at 0x75a2c41f in w3wp.exe: Microsoft C++ exception: _com_error at memory location 0x20dee4b0.

A first chance exception of type 'System.Runtime.InteropServices.COMException' occurred in CrystalDecisions.CrystalReports.Engine.dll

An exception of type 'System.Runtime.InteropServices.COMException' occurred in CrystalDecisions.CrystalReports.Engine.dll but was not handled in user code

Additional information: Memory full.

Failed to export the report. 
```

我在 SAP 的网站上发帖，他们的支持人员提供了一些我包含的代码更改，然后它完全停止工作，出现以下错误：

```
An exception of type 'CrystalDecisions.CrystalReports.Engine.DataSourceException' occurred in CrystalDecisions.ReportAppServer.DataSetConversion.dll but was not handled in user code

Additional information: Failed to load database information.
Error in File myreport {6DC42165-A38A-4CB2-85FD-A77389827FA9}.rpt:

Failed to load database information. 
```

当我恢复代码更改时，它继续给我这个错误（并且从那以后）。现在我根本无法导出报告。

他建议的更改导致了以下代码：

```
ReportDocument rd = new ReportDocument();     
rd.Load(FullFilePath("myreport.rpt"));     
ConnectionInfo connectInfo = new ConnectionInfo()     
{          
    ServerName = "dbname",          
    DatabaseName = "",          
    UserID = "userid",          
    Password = "password"     
};     
rd.SetDatabaseLogon("userid", "password");     

foreach (Table tbl in rd.Database.Tables)     
{          
    tbl.LogOnInfo.ConnectionInfo = connectInfo;          
    tbl.ApplyLogOnInfo(tbl.LogOnInfo);     
} 
```

现在 SAP 说他们不会支持我，因为我使用的是 VS.NET 2012，即使我没有使用任何 VS.NET 集成，只是使用 SDK。他们非常无助。

我在 Windows 7 64 位上运行。我安装的 Crystal Reports SDK 是：CRforVS_redist_install_64bit_13_0_4.zip，可从他们的网站获得。

后端的数据库是Oracle，客户端是11g。

我已经卸载并重新安装了 Oracle 客户端和 Crystal Reports，但没有成功。我根本无法再导出报告。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T15:20:01.173

我最终不得不将所有事情都作为 32 位。我永远无法让 64 位水晶的东西工作。由于糟糕（粗鲁）的技术支持，我们将放弃 Crystal 用于 SSRS。

# c# - 如何对一堆 N x M 二进制矩阵进行排序，以便最相似的是双向链表中的邻居？

> ID：13923534
> 
> 赞同：4
> 
> 时间：2012-12-17T22:47:23.840
> 
> 标签：c#, sorting, data-structures, matrix, binary

如何对一堆 N x M 二进制矩阵进行排序，以便最相似的是双向链表中的邻居？

我有一组二维二进制矩阵，我需要有效地对某些数据结构中的矩阵集进行排序，以便彼此最相似的矩阵在数据结构中是彼此的“邻居”。我认为地图结构不会高效，因为我有近 40,000 个矩阵需要有效查找。

我的两个矩阵之间距离的公式是

```
getSimilarity(matrix toCompare)
    //initialize variable "sum" to 0
    //for each rowT in this and each rowC in toCompare
      //sum += max(rowT,rowC) - bitwiseAnd(rowT,rowC)
    // return sum 
```

我什至不需要你给我一个数据结构，我所需要的只是一种比较两个矩阵的方法，它可以让我得到相似矩阵尽可能靠近彼此聚集的结果。

编辑：2012 年 12 月 19 日下午 1:52 我的行代表用户属性，我的列代表页面属性。每个矩阵表示用户具有哪些属性同时还具有某些页面属性（例如用户的年龄小于 42 并且他们访问过第 4 页）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T01:16:07.433

我注意到矩阵上的相似性运算符定义了一个**[度量空间](http://en.wikipedia.org/wiki/Metric_space)**。那是：

*   D(M1, M2) = 0 当且仅当 M1 = M2
*   对于任何 M1、M2，D(M1, M2) ≥ 0。
*   D(M1, M2) = D(M2, M1)，并且
*   D(M1, M3) ≤ D(M1, M2) + D(M2, M3)（**[三角不等式](http://en.wikipedia.org/wiki/Triangle_inequality)**）

因此，可以想象存储所有数据的一种方法是在*度量空间树*中，这是一种用于在度量空间中存储对象的数据结构，可以轻松查找“接近”某个初始值的所有元素元素。

您的数据还有一个额外的优势，即它是一个*离散的度量空间*，这意味着您提供的距离函数始终输出一个完整的答案。也就是说，你不会有两个相距 1.5 的矩阵，也不能有两个相距 π 的矩阵

因此，您可能希望将矩阵存储在**[BK-tree](http://en.wikipedia.org/wiki/BK-tree)**中。BK-tree 通常用于存储字符串，但更普遍的是可以将元素存储在任何离散的度量空间中。这使得可以合理有效地对单个矩阵进行最近邻搜索（通常无需查看集合中的所有矩阵），尽管不可否认，它不会将双向链表穿过所有元素。

直观地说，BK-tree 的结构如下。选择您选择的矩阵作为“根节点”。然后，将集合中的每个矩阵与根矩阵进行比较，并根据它们与根矩阵的距离将它们分配到子树中。然后，您以相同的方式递归地细分这些子树中的每一个。由于三角不等式，您可以使用简单的递归算法在 BK 树中搜索附近的矩阵。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T05:27:30.800

我不明白你的相似函数。不应该将行与行进行比较吗？此外，一般来说，更高的 bitwiseAnd 意味着更高的相似性，而对于你来说，它有减号。

通常使用[局部敏感散列](http://en.wikipedia.org/wiki/Locality-sensitive_hashing)来解决像您这样的问题。例如，您可以想象您的矩阵是黑白图像，并且您想快速找到相似的图像。散列函数的设计使相似的图像具有相似的散列。所以你散列你的项目数据库，然后在散列空间中找到附近的项目作为候选者，然后对你的候选者进行更昂贵的完整相似性检查。

还有更高级的技术称为放大，您可以使用多个不同的 LSH，然后要求某些项目在至少两个 LSH 中接近，以保证进行全面比较。[挖掘海量数据集](http://infolab.stanford.edu/~ullman/mmds/ch3a.pdf)的第 3 章对您的问题进行了彻底的阐述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T07:40:11.563

您可能希望将“Voronoi 图”视为一种处理具有两个或多个维度的最近邻情况的技术。

您的相似性度量是否只是标量（= 一维）距离？总是积极的？或者使用二维或更多维向量距离是否有意义？

按位与对于获得差异并没有真正的用处。按位 EXOR 会更有意义。如果所有位都具有相同的重要性，您可能需要计算 EXOR 中的 1 位，这将是两个无符号整数之间的汉明距离。

布尔矩阵的差值计数距离函数：

```
int getSimilarity(matrix other) {
  int sum = 0;

  for(int col = 1; col < M; col++) {
    for (int row = 1; row < N; row++) {
       sum += (this[row, col] != other[row, col]) ? +1 : 0;
    }
  }

  return sum;
} 
```

这个距离函数可以通过将行/列距离乘以权重因子来调整。

# iphone - 关闭相机视图会使应用程序崩溃

> ID：13923543
> 
> 赞同：0
> 
> 时间：2012-12-17T22:48:04.510
> 
> 标签：iphone, ios, xcode, uiimagepickercontroller

当我尝试关闭我的 UIImagePickerController 时，它会使应用程序崩溃。错误是：“由于未捕获的异常'UIApplicationInvalidInterfaceOrientation'而终止应用程序，原因：'preferredInterfaceOrientationForPresentation 必须返回支持的界面方向！'”

我在视图控制器中设置了首选界面方向。

```
-(NSUInteger)supportedInterfaceOrientations
{
 return UIInterfaceOrientationMaskPortrait;
}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
return UIInterfaceOrientationPortrait;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
 {
return UIInterfaceOrientationIsPortrait(interfaceOrientation);
}

- (BOOL) shouldAutorotate {
return YES;
} 
```

这是我调用来调出摄像头的方法，这对于添加摄像头效果很好，但是就像我说的，当我尝试移除摄像头时会崩溃。

```
-(IBAction)addCamera:(id)sender
{

self.cameraController = [[UIImagePickerController alloc] init];
self.cameraController.sourceType = UIImagePickerControllerSourceTypeCamera;

self.cameraController.cameraViewTransform = CGAffineTransformScale(self.cameraController.cameraViewTransform,
                                                                   1.13f,
                                                                   1.13f);

self.cameraController.showsCameraControls = NO;
self.cameraController.navigationBarHidden = YES;

self.wantsFullScreenLayout = YES;

ar_overlayView = [[UIView alloc] initWithFrame:CGRectZero];

self.view = ar_overlayView;
[self.cameraController setCameraOverlayView:ar_overlayView];
[self presentViewController:cameraController animated:NO completion:nil];
[ar_overlayView setFrame:self.cameraController.view.bounds];
}

-(IBAction)back:(id)sender
{
[ar_overlayView removeFromSuperview];
[cameraController dismissViewControllerAnimated:NO completion:nil];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T04:16:56.970

好了，找到了解决办法，真的很简单，我只是把我的back方法改成：

```
 [self dismissModalViewControllerAnimated:YES]; 
```

现在我的相机消失了，当我按下后退按钮时，我可以看到我的原始视图。当我浏览了 info.plist 和支持方向的方法时，我仍然没有弄清楚是什么导致了原始问题，但这实现了我想要的。

如果有人有任何想法，我仍然对导致错误的原因感到好奇。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-09T06:51:28.583

您可以尝试删除此方法：

```
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation 
```

它会修复它。但有时它会导致减少 stateBar 高度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T05:11:33.953

如果它是相机叠加层，我认为您不需要自己添加`ar_overlayView`到当前视图中。

这是您的代码现在正在执行的操作：

1.  添加`ar_overlayView`到当前视图
2.  添加`ar_overlayView`为相机的叠加视图
3.  显示相机视图（模态）

此时，`ar_overlayView`正在显示**两次**。当您向它`removeFromSuperview`发送关于关闭相机视图的消息时，它可能会感到困惑，因为它同时位于两个视图层次结构中。

跳过`self.view = ar_overlayView;`or`[self.view addSubview:ar_overlayView];`行应该可以解决问题。

此外，`dismissViewControllerAnimated:completion:`应该发送到`presentViewController:animated:completion`被调用的同一对象（`self`在这种情况下）：

```
-(IBAction)addCamera:(id)sender
{
  // -- snip -- //
  ar_overlayView = [[UIView alloc] initWithFrame:self.cameraController.view.bounds];
  [self.cameraController setCameraOverlayView:ar_overlayView];
  [self presentViewController:self.cameraController animated:NO completion:nil];
}

-(IBAction)back:(id)sender
{
  [self dismissViewControllerAnimated:NO completion:nil];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-17T22:56:48.933

您不能从其父视图中删除 UIViewController 的主视图。

而不是这个：

```
self.view = ar_overlayView; 
```

尝试这个：

```
[self.view addSubview:ar_overlayView]; 
```

然后您将能够正确地将其从超级视图中删除。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T23:37:09.113

您应该使用类似于下面的 didFinishPickingMedieWithInfo 方法并使用 [self dismissModalViewControllerAnimated:YES];

```
-(void) imagePickerController:(UIImagePickerController *) picker didFinishPickingMediaWithInfo:(NSDictionary *)info

{

if (picker.sourceType == UIImagePickerControllerSourceTypeCamera) {

    NSLog(@"Camera");

}

else {

    NSLog(@"Album");

 }

 [self dismissModalViewControllerAnimated:YES];
 } 
```

# macos - 在 Mac 上使用 Homebrew 安装 Postgis 后，默认 Search_Path 变量卡住

> ID：13923546
> 
> 赞同：0
> 
> 时间：2012-12-17T22:48:24.667
> 
> 标签：macos, postgis, homebrew

在我的 Mac 上安装 postgresql 和 postgis 后...

```
brew install postgres
brew install postgis 
```

...我有一个 search_path，它只是设置为“postgis”。postgresql.conf 文件中的值被忽略或覆盖，默认情况下它甚至没有提到 postgis。另外，如果我运行诸如...之类的命令

```
ALTER USER ken SET search_path TO postgis,schema1,schema2;
ALTER DATABASE coneddb SET search_path TO postgis,shema1,schema2; 
```

...然后在开始新连接时，路径仍设置为“postgis”。我错过了什么覆盖了我的 search_path 并且不允许我用用户或数据库特定的设置覆盖它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T01:01:48.510

哎呀。当其他一切都失败时，我尝试重新启动机器。答对了。不知道为什么这里需要重新启动，但这似乎已经成功了。我的 search_path 现在是 postgresql.conf 文件中的内容。是的，我已经停止并启动了服务以重新加载 conf 文件。事实上，我什至通过更改端口号来确保对 conf 文件的更改能够被识别，并证明当我恢复 postgresql 时它正在侦听指定端口而不是原始端口。所以，真的不知道这里发生了什么。

# javascript - 如何在 knockout.js foreach 绑定中有条件地渲染 tr

> ID：13923547
> 
> 赞同：6
> 
> 时间：2012-12-17T22:48:24.417
> 
> 标签：javascript, knockout.js, template-engine

我想使用淘汰赛动态呈现行和列。这个想法是我想用一些单元格填充每一行，并在需要时动态添加更多行。让我们假设单元格的总数等于 4* 行数，然后我尝试了：

```
<table>
    <tbody data-bind="foreach: model">
        <!--ko if: $index() % 4 == 0--><tr><!--/ko-->
         <td>
              <label data-bind="text: Value"></label>
         </td>
         <td>
              <input type="checkbox" data-bind="checked: IsChecked"/>
         </td>
         <!--ko if: $index() % 4 == 0--></tr><!--/ko-->
     </tbody>
 </table> 
```

但它的工作原理是这样的：

```
<table>
    <tbody data-bind="foreach: model">
        <!--ko if: $index() % 4 == 0-->
         <td>
              <label data-bind="text: Value"></label>
         </td>
         <td>
              <input type="checkbox" data-bind="checked: IsChecked"/>
         </td>
         </tr><!--/ko-->
     </tbody>
 </table> 
```

通过不使用内容渲染整行，是否可以通过敲除来渲染所有单元格并仅在需要时添加行？

作为一种解决方法，我考虑使用嵌套的 foreach，但这需要我的模型从一维变为二维，这看起来很奇怪。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-18T02:29:58.280

Add another computed property that structures your data into rows:

```
<table>
    <tbody data-bind="foreach: rows">
        <tr>
            <!-- ko foreach: $data -->
            <td data-bind="text:$index"></td>
            <td data-bind="text:fname"></td>
            <td data-bind="text:lname"></td>
            <!-- /ko -->
        </tr>
    </tbody>
</table> 
```

with code:

```
var vm = {

    people: ko.observableArray([
        { fname: 'fname', lname: 'lname' },
        { fname: 'fname', lname: 'lname' },
        { fname: 'fname', lname: 'lname' },
        { fname: 'fname', lname: 'lname' }
    ])
};

vm.rows = ko.computed(function () {

    var itemsPerRow = 3, rowIndex = 0, rows = [];

    var people = vm.people();
    for (var index = 0; index < people.length; index++) {
        if (!rows[rowIndex])
            rows[rowIndex] = [];

        rows[rowIndex].push(people[index]);

        if (rows[rowIndex].length == itemsPerRow)
            rowIndex++;
    }

    return rows;
}, vm);

$(function () {
    ko.applyBindings(vm);
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T23:51:37.093

您的语法将不适用于剔除默认模板引擎，因为它使用 DOM。如果您需要这样做，请使用基于字符串的外部模板引擎（它将您的模板视为字符串，并将使用正则表达式和字符串操作，因此您将能够通过条件渲染开始/结束标记来完成此技巧）。您使用下划线 js 的示例：

[http://jsfiddle.net/2QKd3/5/](http://jsfiddle.net/2QKd3/5/)

**HTML**

```
<h1>Table breaking</h1>
<ul data-bind="template: { name: 'peopleList' }"></ul>

<script type="text/html" id="peopleList">
    <table>
    <tbody>
    {{ _.each(model(), function(m, idx) { }}
        {{ if (idx % 4 == 0) { }}
            <tr>
        {{ } }}
         <td>

              <label>{{= m.Value }}</label>
         </td>
         <td>
             <input type="checkbox" data-bind="checked: m.IsChecked"/>
         </td>
        {{ if (idx % 4 == 3) { }}
        </tr>
        {{ } }}
    {{ }) }}
            </tbody>
            </table>
</script> 
```

**Javascript**（这包括此处描述的下划线集成 - [http://knockoutjs.com/documentation/template-binding.html](http://knockoutjs.com/documentation/template-binding.html)

```
_.templateSettings = {
    interpolate: /\{\{\=(.+?)\}\}/g,
    evaluate: /\{\{(.+?)\}\}/g
};

/* ---- Begin integration of Underscore template engine with Knockout. Could go in a separate file of course. ---- */
    ko.underscoreTemplateEngine = function () { }
    ko.underscoreTemplateEngine.prototype = ko.utils.extend(new ko.templateEngine(), {
        renderTemplateSource: function (templateSource, bindingContext, options) {
            // Precompile and cache the templates for efficiency
            var precompiled = templateSource['data']('precompiled');
            if (!precompiled) {
                precompiled = _.template("{{ with($data) { }} " + templateSource.text() + " {{ } }}");
                templateSource['data']('precompiled', precompiled);
            }
            // Run the template and parse its output into an array of DOM elements
            var renderedMarkup = precompiled(bindingContext).replace(/\s+/g, " ");
            return ko.utils.parseHtmlFragment(renderedMarkup);
        },
        createJavaScriptEvaluatorBlock: function(script) {
            return "{{ " + script + " }}";
        }
    });
    ko.setTemplateEngine(new ko.underscoreTemplateEngine());
/* ---- End integration of Underscore template engine with Knockout ---- */

var viewModel = {
    model: ko.observableArray([
        { Value: '1', IsChecked: 1 },
        { Value: '2', IsChecked: 0 },
        { Value: '3', IsChecked: 1 },
        { Value: '4', IsChecked: 0 },
        { Value: '5', IsChecked: 1 },
    ])        
};

ko.applyBindings(viewModel); 
```

PS：但最好[避免使用表格进行 html 布局](https://stackoverflow.com/questions/83073/why-not-use-tables-for-layout-in-html)。您的示例可以使用具有更简洁代码的内联块元素呈现。

# c# - 更改 ListBoxItem 的选择颜色

> ID：13923550
> 
> 赞同：1
> 
> 时间：2012-12-17T22:48:33.863
> 
> 标签：c#, wpf, listbox, border, mouseevent

如何将`IsSelected`触发器添加到以下`ListBox`，这将更`Background`改为`Border`调用`PlaceHolder`。我不能通过在 .`IsSelected`旁边添加触发器来做到这一点`IsMouseOver`。我不想选择整体`ListBoxItem`，只是`Border`。感谢任何帮助！

```
<ListBox>
    <ListBox.Template>
        <ControlTemplate>
            <ItemsPresenter />
        </ControlTemplate>
    </ListBox.Template>

    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <UniformGrid Rows="2" Columns="3"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>

    <ListBox.ItemContainerStyle>
        <Style  TargetType="{x:Type ListBoxItem}">
            <Setter Property="ContentTemplate">
                <Setter.Value>
                    <DataTemplate>
                            <Border CornerRadius="5" x:Name="PlaceHolder" BorderBrush="PapayaWhip" BorderThickness="1">
                                <StackPanel Orientation="Horizontal" Width="148" Height="60">
                                    <Image Source="{Binding Image}"></Image>
                                    <Label VerticalAlignment="Center" x:Name="title" FontSize="12" FontWeight="SemiBold" Foreground="Gray" Content="{Binding Title}"></Label>
                                </StackPanel>
                            </Border>
                        <DataTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border"  Property="Background" Value="Bisque"></Setter>
                            </Trigger>
                        </DataTemplate.Triggers>
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </ListBox.ItemContainerStyle>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:13:20.747

您将必须绑定到该`ListBoxItem.IsSelected`属性。

这应该工作

```
<ListBox.ItemContainerStyle>
    <Style  TargetType="{x:Type ListBoxItem}">
        <Style.Resources>
            <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent" />
            <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Transparent" />
        </Style.Resources>
        <Setter Property="ContentTemplate">
            <Setter.Value>
                <DataTemplate>
                    <Border CornerRadius="5" x:Name="PlaceHolder" BorderBrush="PapayaWhip" BorderThickness="1">
                        <StackPanel Orientation="Horizontal" Width="148" Height="60">
                            <Image Source="{Binding Image}"></Image>
                            <Label VerticalAlignment="Center" x:Name="title" FontSize="12" FontWeight="SemiBold" Foreground="Gray" Content="{Binding Title}"></Label>
                        </StackPanel>
                    </Border>
                    <DataTemplate.Triggers>
                        <DataTrigger Binding="{Binding RelativeSource={RelativeSource  Mode=FindAncestor, AncestorType={x:Type ListBoxItem}}, Path=IsSelected}" Value="True">
                            <Setter TargetName="PlaceHolder" Property="Border.Background" Value="Red"/>
                        </DataTrigger>
                    </DataTemplate.Triggers>
                </DataTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</ListBox.ItemContainerStyle> 
```

# asp.net - 基于 DDL 改变视图的动态 SelectCommand

> ID：13923554
> 
> 赞同：1
> 
> 时间：2012-12-17T22:48:55.137
> 
> 标签：asp.net, visual-studio

这是我的下拉列表...

```
<asp:DropDownList
    ID="selectTimeFrame"
    runat="server"
    AutoPostBack="true"
    DataTextField="Increment"
    DataValueField="Increment"
    DataSourceID="SqlTimeFrame" 
</asp:DropDownList> 
```

及其数据源：

```
 <asp:SqlDataSource 
    ID="SqlTimeFrame"
    runat="server"
    ConnectionString="<% connectionstring %>"
    SelectCommand="Select [IncrementID], [Increment] FROM [TimeFrame] ORDER BY [IncrementID]" >
</asp:SqlDataSource> 
```

然后我有一个gridview，谁的数据源看起来像：

```
 <asp:SqlDataSource ID="SqlDataSource2" runat="server" ConnectionString="<% connectinstring %>"
    ProviderName="<% connectionstring %>"
    SelectCommand="SELECT * FROM @TimeFrame">

    <SelectParameters>
        <asp:ControlParameter ControlID="selectTimeFrame"
            Name="TimeFrame"
            PropertyName="SelectedValue"
            Type="String" />
    </SelectParameters> 
```

显然，我遇到问题的地方是“ FROM @TimeFrame ”没有做我想做的事。我有不同的视图，其名称对应于不同的时间范围，并且我希望能够根据用户通过下拉菜单选择的选项来更改网格视图以填充该信息。任何见解将不胜感激......谢谢！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:25:55.060

您可以使用[动态 SQL](http://www.codeproject.com/Articles/20815/Building-Dynamic-SQL-In-a-Stored-Procedure)来实现您正在寻找的东西，尽管您需要非常彻底地测试它以防止 SQL 注入攻击，因为我们永远无法相信从用户那里收到的输入。

我创建了一个简单的存储过程，它检查表是否存在于数据库中，如果存在，它会构造并执行您的动态 SQL 语句：

**存储过程：**

```
CREATE PROCEDURE dbo.GetData
@TableName NVARCHAR(200)
AS
BEGIN
IF OBJECT_ID(@TableName , N'U') IS NOT NULL
    BEGIN 
        EXEC('SELECT * FROM ' + @TableName);
    END
END 
```

**ASPX：**

```
<asp:DropDownList ID="selectTimeFrame" runat="server" AutoPostBack="true" DataTextField="Increment"
    DataValueField="Increment" DataSourceID="SqlTimeFrame" />
<asp:SqlDataSource ID="SqlTimeFrame" runat="server" ConnectionString="<%$ ConnectionStrings:connectionstring %>"
    SelectCommand="Select [IncrementID], [Increment] FROM [TimeFrame] ORDER BY [IncrementID]">
</asp:SqlDataSource>
<asp:SqlDataSource ID="dynamicDS" runat="server" ConnectionString="<%$ ConnectionStrings:connectionstring %>"
    SelectCommand="GetData" SelectCommandType="StoredProcedure">
    <SelectParameters>
        <asp:ControlParameter ControlID="selectTimeFrame" Name="TableName" PropertyName="SelectedValue"
            Type="String" />
    </SelectParameters>
</asp:SqlDataSource>
<asp:GridView ID="gvData" DataSourceID="dynamicDS" runat="server">
</asp:GridView> 
```

# php - PHP 相当于 python 的三引号 - 如何在 PHP 中打印大量/大量 HTML 而无需转义

> ID：13923556
> 
> 赞同：9
> 
> 时间：2012-12-17T22:49:06.293
> 
> 标签：php, python, codeigniter, heredoc, language-comparisons

> **可能重复：**
> [php 字符串转义，如 python 的“”“”“”？](https://stackoverflow.com/questions/6556178/php-string-escaping-like-pythons)

python 中的三引号会转义其中包含的所有引号和换行符。例如，

```
""" this
is all

just one string. I can even tell you "I like pi".
Notice that the single quotes are escaped - they don't end the string; and the newlines become part of the string
""" 
```

有谁知道 PHP 是否有与 python 的等价物

```
""" <form><h1>PUT HTML HERE</h1> </form> """
enter code here 
```

编辑：对于那些在未来看这个问题的人，我已经回答了，这里有一个例子：

`$heading = "Heading Gettizburgz"; print <<< END <p><h1>$heading</h1> "in quotes" 'in single' Four score and seven years ago<br/> our fathers set onto this continent<br/> (and so on ...)<br/> </p> END;`

印刷： `Heading Gettizburgz "in quotes" 'in single' Four score and seven years ago our fathers set onto this continent (and so on ...)`

请注意一件重要的事情，您必须确保最后一个`END`位于代码的最左侧（第一列），前面没有任何空格。

来源：[http ://alvinalexander.com/blog/post/php/php-here-document-heredoc-syntax-examples](http://alvinalexander.com/blog/post/php/php-here-document-heredoc-syntax-examples)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-17T22:50:41.923

您可以使用[heredocs](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)或 nowdocs（请参阅下面的 heredocs）。

**赫雷多克**

```
$bar = <<<EOT
bar
EOT; 
```

**诺多克**

```
$str = <<<'EOD'
Example of string
spanning multiple lines
using nowdoc syntax.
EOD; 
```

# java - 用 for 循环填充画线三角形

> ID：13923559
> 
> 赞同：0
> 
> 时间：2012-12-17T22:49:08.537
> 
> 标签：java, graphics, geometry, draw, fill

您好，我是一名初级编程学生，我被困在 for 循环中。我的任务是使用 for 循环填充一个三角形（我已经画过）。这个想法是在三角形内继续画线，直到它被填满。

```
import javax.swing.JApplet;
import java.awt.*;

public class OneLine extends JApplet
{
public void paint (Graphics page)
{

    page.drawLine (120,130,280,130);
    page.drawLine (120,130,200,65);
    page.drawLine (200,65,280,130);// 

}
} 
```

这是我到目前为止的三角形。我在想要填充它我会使用一个循环有点像

```
int x1=120;
int y1=130;
int x2=280;
int y2=130;
for (int x1>120 && int y1>130; page.drawLine x1-1,y1-1,x2-1,y2-1); 
```

然而，这看起来根本不对。我只是在学习循环，所以我对如何编写代码感到困惑。谁能帮我吗？我知道有一个 fill.polygon 方法，但我不应该在这里使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:11:26.883

由于您在点 (120, 0) 和 (280, 0) 之间有一条很好的直线，您可以使用 (0, 130) 作为您的固定点并连接 (120, 0) 和 (280, 0) 之间的点。这可能更容易在纸上可视化。

```
for(int a = 120; a <= 280; a++) {
     drawLine(a, 0, 0, 130);
} 
```

因此，您正在从 (0, 130) 绘制一条线，连接到 (120, 0) 和 (280, 0) 之间的每个点。当你从一侧穿越到另一侧时。你将填满你的三角形。

# android - 我将如何制作一个更改通知窗口的应用程序？

> ID：13923562
> 
> 赞同：0
> 
> 时间：2012-12-17T22:49:31.813
> 
> 标签：android, android-notifications, android-theme, android-notification-bar

我想制作一个可以控制通知窗口外观的应用程序（即当您从顶部状态栏向下滑动时，覆盖显示您的所有通知）。这可能吗？我需要哪些 API 才能做到这一点（并且知道哪些通知是最新的，等等）？

# java - 如何配置 Maven 以使用 GWT 模块源进行编译但不将它们包含在最终的 JAR/WAR 中？

> ID：13923565
> 
> 赞同：0
> 
> 时间：2012-12-17T22:49:52.547
> 
> 标签：java, gwt, maven, jar

我有一个 GWT 项目，我想使用其他一些内部 GWT 库作为依赖项。

我们不想在最终构建中包含源代码。大多数开源 GWT 库都在 JAR 中包含源代码，但我们希望将源代码分开，使用它们进行编译，然后将它们丢弃。

有没有办法用 Maven 做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T03:46:49.227

Brad's answer will fix the problem in a very narrow scenario. Setting the scope to provided totally avoids the jar from being pushed into War's lib. This is not what you would need in use case of the "lib" on to server side code. This usually happens 1) Constants. 2) DTO's/Beans. 3) RPC service interfaces 4) Request Factory proxy declarations

You have to have a mix of approaches.

1) Brad's approach when the "lib" in purely client and has no chance of being used in server clode.

2) Modularize code to have Constants/DTO's/Proxy/RF related interfaces and any such code in a project that generates two artifact jars.

```
 A) One with classes only - to be used to push stuff in to web-inf/lib i.e scope compile/runtime.

   B) Another with sources/classess - to be used with gwt compilation i.e scope provided. 
```

Generating two jars might seem redundant. This is the only sane option i have tried. Keen on check whether there is any other option that will be suggested.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-17T22:59:51.727

将范围设置为`provided`

```
<dependency>
  <groupId>com.you.gwt</groupId>
  <artifactId>gwt-ui</artifactId>
  <version>1.0.0</version>
  <scope>provided</scope>
</dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T10:28:24.783

GWT 中有两种库（打包在 jar 文件中）：

*   像“gwt-servlet.jar”这样的服务器端库在 jar 文件中不包含源代码，您可以在 pom 中添加这样的 maven 依赖项：

> ```
> <dependency>
>   <groupId>com.google.gwt</groupId>
>   <artifactId>gwt-servlet</artifactId>
>   <version>${gwtVersion}</version>
>   <scope>runtime</scope>
> </dependency> 
> ```

*   像“gwt-user.jar”这样的客户端库在jar文件中包含源代码，这种库不需要打包在你的war文件中，你可以在你的pom中添加这样的maven依赖：

> ```
> <dependency>
>   <groupId>com.google.gwt</groupId>
>   <artifactId>gwt-user</artifactId>
>   <version>${gwtVersion}</version>
>   <scope>provided</scope>
> </dependency> 
> ```

玩得开心。

# cmake - llvm 的 cmake 集成

> ID：13923568
> 
> 赞同：1
> 
> 时间：2012-12-17T22:50:03.673
> 
> 标签：cmake, llvm

我目前正在用 C/C++ 构建编译器/解释器。当我注意到 LLVM 时，我认为它非常适合我的需要，因此我正在尝试将 LLVM 集成到我现有的构建系统中（我使用 CMake）。

我在 CMake 中阅读[了](http://www.llvm.org/docs/CMake.html#embedding-llvm-in-your-project)LLVM 的集成。我复制并粘贴了示例 CMakeLists.txt，将 LLVM_ROOT 更改为 ~/.llvm/（这是我下载并构建 LLVM 和 clang 的地方），它说它不是有效的 LLVM 安装。我可以实现的最佳结果是通过将 LLVM_ROOT 更改为 ~/.llvm/llvm 来显示错误消息“找不到 LLVMConfig”。

我的 ~/.llvm/ 文件夹如下所示：

```
~/.llvm/llvm         # this folder contains source files
~/.llvm/build        # this folder contains object, executable and library files 
```

我通过 SVN 下载了 LLVM 和 clang。我没有用 CMake 构建它。只是我还是 CMakeLists.txt 有问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T03:45:01.043

This CMake documentation page got rotted, but setting up CMake for LLVM developing isn't different from any other project. If your headers/libs are installed into non-standard prefix, there is no way for CMake to guess it.

You need to set `CMAKE_PREFIX_PATH` to the LLVM installation prefix or `CMAKE_MODULE_PATH` to `prefix/share/llvm/cmake` to make it work.

And yes, use the second code snippet from documentation (under `Alternativaly, you can utilize CMake’s find_package functionality.` line).

# android - 爆炸动画

> ID：13923571
> 
> 赞同：1
> 
> 时间：2012-12-17T22:50:15.247
> 
> 标签：android, surfaceview

我想用三个不同的位图制作一个爆炸动画，代表爆炸的不同阶段我已经加载了位图，我尝试使用 for 循环，但图像太快而无法看到。我的surfaceview类中都有这一切，有没有办法正确地执行这种功能这种爆炸图像切换，或者没有图像快速闪烁的任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:16:52.337

看起来您对可绘制动画感兴趣。

[http://developer.android.com/guide/topics/graphics/drawable-animation.html](http://developer.android.com/guide/topics/graphics/drawable-animation.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T03:25:16.793

可绘制动画有效，但您也可以有一个可运行的对象来更改位图，休眠一段时间，然后再次更改位图。

它很hacky，但根据您的情况，可能更方便。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-03T05:20:53.870

你只需要写

`new ParticleSystem(this, numParticles, drawableResourceId, timeToLive) .setSpeedRange(0.2f, 0.5f) .oneShot(emitterview, numberOfParticles);`

还添加此依赖项

`dependencies { compile 'com.plattysoft.leonids:LeonidsLib:1.3.1' }`

有关更多详细信息，请参阅此库。 [https://github.com/plattysoft/Leonids](https://github.com/plattysoft/Leonids)

# mysql - mySQL - 从单个列中分离姓氏、名字和公司名条目

> ID：13923573
> 
> 赞同：1
> 
> 时间：2012-12-17T22:50:21.207
> 
> 标签：mysql, select, substring

我在数据库中有一个包含公司名称和客户名称的列......我想做*的*是保持 CompanyName 列完全不变，但是无论 CompanyName 中有逗号的地方我想采取该信息并将其填充到 FirstName 和 LastName 字段中。所以基本上...

（每个数字代表表格中的不同行）

前：

**公司名称列：**
1\. Big Company Inc
2\. Smith, John
3\. Sue, Maggie

后：

**公司名称列：**
1\. Big Company Inc
2\. Smith, John
3\. Sue, Maggie

**姓氏列：**
1\.
2\. Smith
3\. Sue

**名列：**
1\.
2\. John
3\. Maggie

这对我来说非常棘手......非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T19:14:54.453

试试这个：

```
select id, companyName, if(companyName like '%,%', substring_index(companyname, ',', -1), '') firstName, 
       if(companyName like '%,%', substring_index(companyname, ',', 1), '') lastName
from company; 
```

# ios - 如何让 UIGestureRecognizers 工作？

> ID：13923574
> 
> 赞同：0
> 
> 时间：2012-12-17T22:50:26.887
> 
> 标签：ios, uigesturerecognizer

我在我的代码中打开手势识别器时遇到了麻烦。我向点击手势识别器添加了一个 handleTap 回调，但打印语句从未发生。我只是没有运气。有人看到我在这里做错了吗？

在我的 ViewController.h

```
@interface ViewController : UIViewController<UITextFieldDelegate, UIGestureRecognizerDelegate> {

}

@end 
```

这就是我在 ViewController.m 中的内容

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];

        CGRect applicationFrame = [[UIScreen mainScreen] applicationFrame];
        View *myview = [[View alloc] initWithFrame:applicationFrame];

        myview.userInteractionEnabled = YES;
        myview.multipleTouchEnabled = YES;
        UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                       initWithTarget:self
                                       action:@selector(handleTap)];
        tap.numberOfTapsRequired = 1;
        tap.delegate = self;
        [myview addGestureRecognizer:tap];

        self.view = myview;
    }

-(void)handleTap:(UITapGestureRecognizer*)recognizer {
    NSLog(@"dismiss keyboard");
    //[usernameTextField resignFirstResponder];
}

- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch {
    return YES;
} 
```

**编辑：我添加了一个文本字段，当我单击文本字段时，我看到了分接选择器打印语句。但是，如果我点击文本字段，我不会得到选择器打印语句。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:53:03.703

I think the problem is with your selector. Try changing

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                   initWithTarget:self
                                   action:@selector(handleTap)]; 
```

And replace it with

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                   initWithTarget:self
                                   action:@selector(handleTap:)]; 
```

To make the selector match the signature for handleTap.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T22:53:35.810

You are passing the wrong selector when initialising.

The line should read like this:

```
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]
                                       initWithTarget:self
                                       action:@selector(handleTap:)]; 
```

Notice the colon after `handleTap` to match the method you want to use.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T03:49:25.110

Apparently subclassing the UIView and overriding drawrect with an empty function caused the selector to be called.

# html - CSS 布局的问题

> ID：13923579
> 
> 赞同：-2
> 
> 时间：2012-12-17T22:50:52.703
> 
> 标签：html, css

我想知道为什么我的`Right-nav`div 没有响应 CSS 中的任何内容。

HTML：

```
<body>
    <div id="header">Header</div>
    <div id="main-wrap">
        <div id="sidebarwrap">
        <div id="nav">Left Nav</div>
            advertisment pictures
        </div>
    <div id="content-wrap">
        <div id="picture-wrap">
        <div class="info">Picture</div>
        </div>
            <div id = "Content"><p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo.</p></div>
            <div class ="Right-nav"><p>right-nav</p></div>
        </div>
    </div>
    <div id="footer">Footer</div>
</body> 
```

CSS：

```
/**
 * custom layout
 */

#header,
#footer {
    background-color: #f1f1f1;
    width: 60%;
    margin: 0 auto;
}

#main-wrap {
    background-color: #D9D9D9;
    width: 60%;
    margin: 0 auto;
}

#sidebar {
    background-color: #d2d2d2;
}

#content-wrap {
    background-color: #c5c5c5;
}

.info {
    background-color: #DDD;
}
.info + .info {
    background-color: #e6e6e6
}

/* sizes */
#main-wrap > div {
    min-height: 450px;
}

#header,
#footer {
    min-height: 40px;
}

.info {
    min-height: 80px;
}

/* layout */

#main-wrap {
/* overflow to handle inner floating block */
    overflow: hidden;
}

#sidebarwrap {
    float: left;
    width: 30%;
    overflow:hidden;
    background-color:blue;
}

#nav{
    min-height: 80px;
    background-color: red;
}

#content-wrap {
    float: right;
    width: 70%;
    overflow:hidden;
    background-color:blue;
}

#Content{
    float:left;
    width:40%;
    min-height:370px;
    background-color:red;
}

#Right-nav{
    background-color:red;
}

#picture-wrap {
/* overflow to handle inner floating block */
    overflow: hidden;
}

.info {
    width:100%;
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T22:51:57.430

这是因为您`class`在 HTML 中给出了正确的 div a 而`id`在 CSS 中给出了 an ，将两者都更改为一个或另一个，问题应该得到解决。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T22:54:21.690

更改`<div class="Right-nav">`为`<div id="Right-nav">`

# android - 解析 XML 后的编码问题

> ID：13923580
> 
> 赞同：0
> 
> 时间：2012-12-17T22:50:56.337
> 
> 标签：android

在我得到 XML 的响应并阅读文档然后将其列出到 listview 之后，似乎 unicode 或其他东西有问题....我真的不明白问题出在哪里。我使用 encoding="utf-8" 在 XML 文件中使用阿拉伯语单词。
但解析后显示为“Ø±ÙˆØ§ÙŠØ§”。

有人可以解释一下如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T01:23:39.183

解决了 ！！！我刚刚使用 EntityUtils 在 HTTP 响应中添加了“UTF-8”

```
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = 新的 HttpPost(url);
HttpResponse httpResponse = httpClient.execute(httpPost);
HttpEntity httpEntity = httpResponse.getEntity();
xml = EntityUtils.toString(httpEntity, "UTF-8");

```

# php - 如何在 Jquery 按钮单击时加载表单？

> ID：13923581
> 
> 赞同：0
> 
> 时间：2012-12-17T22:50:59.163
> 
> 标签：php, javascript, jquery

我在一个 php 文件中有两种形式。Form1 将从用户那里获取输入并将查询传递给 Mysql 数据库并从数据库中检索数据，并且必须填充 Form2。

最初 Form2 是隐藏的，当用户在 Form1 中选择输入并单击提交时，Form 值将通过表单 POST 传递给 php 部分并执行 mysql fetch 并显示 Form2 的值。

Form1的输入按钮：

```
 <input id="buttonProductionSummary" class="buttonProductionSummary" type="submit" value="Submit" /> 
```

POST表单值的代码：

```
$date=$_POST['datepicker'];
$machine = $_POST['selectMachine'];
$user = $_POST['selectUser'];
$shift=$_POST['selectShift'];
$start_time_query = mysql_query("select time from rpt_shift_log where ((date='$date' and shift_def='$shift' and event_type='$even_type_up_id') and (machine='$machine' and employee='$user'))");

while($start_time_Row = mysql_fetch_assoc($start_time_query)) 
{
    $start_time = $start_time_Row['time'];      
} 
```

我正在像这样使用 Form2 的文本框中的计算值。

```
 <input id="start_time_text" class="start_time_text" type="text" name="start_time_text" value="<?php echo $start_time?>"> 
```

但现在我已经阻止了在单击按钮时加载 Form2 的脚本。在按钮单击上加载表单的 JQuery 代码：

```
<script type="text/javascript">
    $(document).ready(function(){

        $("#buttonProductionSummary").click(function(e) {

            $("#productionForm").show();

            e.preventDefault();
        });
    });
</script> 
```

问题是，如果 JQuery 脚本执行，Form POST 不会发生。如果要发布 POST，我必须评论脚本。

我怎样才能先进行 POST 并从数据库中检索数据，然后显示检索到的数据的 Form2。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:51:59.393

你知道做什么`e.preventDefault();`吗？它会阻止默认操作触发！所以表格不会提交。如果您不想回发页面，则需要对服务器进行[Ajax 调用](http://api.jquery.com/jQuery.post/)以获取第二个表单的数据。

```
 $("#buttonProductionSummary").click(function(e) {
        $.post("test.php", $("#testform").serialize(), function(data) {
            //do something with the data returned from the server.
            $("#productionForm").show();
        });
        e.preventDefault();
    }); 
```

# c# - 按钮和数据触发器不起作用

> ID：13923587
> 
> 赞同：2
> 
> 时间：2012-12-17T22:51:28.367
> 
> 标签：c#, wpf, xaml

我想用这个触发器制作一个按钮。但是这不起作用。即使自定义数据模板也没有。这失败了

> {"触发器集合成员必须是 EventTrigger 类型。"}

```
<Button cal:Message.Attach="Switch"  Width="55" HorizontalAlignment="Left" 
        Style="{StaticResource OrderProductButton}"  Margin="6,4,0,7">

    <StackPanel Orientation="Horizontal">
        <TextBlock x:Name="literal" Foreground="White" 
                   xml:space="preserve">€&lt;/TextBlock>
        <TextBlock Foreground="White"  xml:space="preserve"> / </TextBlock>
        <TextBlock x:Name="percent" Foreground="Gray"> %</TextBlock>
    </StackPanel>

    <Button.Triggers>
        <DataTrigger Binding="{Binding IsPercent}" Value="True">
            <Setter Property="TextBlock.FontWeight" Value="Bold" 
                    TargetName="percent"  />
            <Setter Property="TextBlock.Foreground" Value="White" 
                    TargetName="percent"  />
        </DataTrigger>
        <DataTrigger Binding="{Binding IsPercent}" Value="false">
            <Setter Property="TextBlock.FontWeight" Value="Bold" 
                    TargetName="literal"  />
            <Setter Property="TextBlock.Foreground" Value="White" 
                    TargetName="literal"  />
        </DataTrigger>
    </Button.Triggers>
</Button> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:04:07.477

使用风格对你有用吗？

```
<Style TargetType="Button"> <!-- use a key if you want to target only specific buttons -->
  <Style.Triggers>
    <DataTrigger Binding="{Binding IsPercent}" Value="True">
        <Setter Property="TextBlock.FontWeight" Value="Bold" 
                TargetName="percent"  />
        <Setter Property="TextBlock.Foreground" Value="White" 
                TargetName="percent"  />
    </DataTrigger>
    <DataTrigger Binding="{Binding IsPercent}" Value="false">
        <Setter Property="TextBlock.FontWeight" Value="Bold" 
                TargetName="literal"  />
        <Setter Property="TextBlock.Foreground" Value="White" 
                TargetName="literal"  />
    </DataTrigger>
  </Style.Triggers>
</Style> 
```

# git - 在 git 中将单个分支克隆到不同命名的分支

> ID：13923589
> 
> 赞同：1
> 
> 时间：2012-12-17T22:51:32.657
> 
> 标签：git, github

我在 GitHub 上有一个`foo`使用以下分支调用的存储库：

*   掌握
*   gh页面

我在 GitHub 上有第二个存储库，称为`<username>.github.com`（用户存储库），具有以下分支：

*   掌握
*   来源

我想使用 in`foo->master`中的代码，`<username>.github.com->source`并能够在更改`foo->master`发生时合并它们。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T13:47:50.627

您可以添加`foo/master`为遥控器，不时将其合并（在`<username>.github.com`repo 中执行此操作）：

```
# add foo as remote (once)
git remote add foo https://github.com/<username>/foo.git
# fetch from remote (often)
git fetch foo
# merge changes to source (when you want)
git checkout source
git merge foo/master 
```

您可以正常设置`origin/source`为远程主机`source`和`origin/master`远程主机。

您还可以使用`git fetch --all`更新所有遥控器，包括`origin`和`foo`。

如果您在 中没有太大变化`source`，那么合并几乎总是快进的。

* * *

您可能想为 foo 设置一个只读的远程 url。这样你就不会`<username>.github.com`意外推送，如果它是一个公共仓库，你不需要身份验证（或你的 ssh 密钥的密码）来获取。

* * *

您可以使用以下命令阻止 git 获取`gh-pages`分支

```
git config remote.foo.fetch "+/refs/heads/master:/refs/remotes/foo/master"
git branch -rD foo/gh-pages 
```

`master`当您期望任何其他分支而不是从`foo`远程出现时，您只需要记住设置。

参考规范的一个很好的解释是在[git book](http://git-scm.com/book/ch9-5.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:12:23.063

也许以下会有所帮助（虽然我不是 100% 确定这一点）：

```
# Add a remote foo
git remote add foo <foor-url>

# create a foo-master branch
git checkout -b foo-master

# Set upstream branch for foo-master
git branch --set-upstream foo-master foo/master

# fetch code from foo master 
git fetch foo master

# reset the current branch to foo master
git reset --hard foo/master

# merge in source
git checkout source
git merge foo-master 
```

要更新 foo-master：

```
git checkout foo-master
git pull 
```

# x3d - 将属性表显示为 x3dom 对象的弹出窗口

> ID：13923592
> 
> 赞同：2
> 
> 时间：2012-12-17T22:51:41.673
> 
> 标签：x3d, x3dom

我是这个领域的新手，一直在尝试使用 x3dom 对象。我现在面临的问题是如何将 x3dom 对象的属性显示为弹出窗口。我已经看过 x3dom 网站上给出的例子，但还没有找到任何相关的例子。如果有人有一些例子可以分享，我会很高兴。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T16:14:10.493

您可以使用`attributes`属性（例如`document.getElementById("id").attributes`），这是一个示例，当您单击任一按钮时会显示属性表：

```
<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
    <title>X3DOM</title>
    <link href="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.0.4/css/bootstrap.min.css" rel="stylesheet" />

</head>
<body class="container">

    <X3D width="100%" height="300px">
        <Scene>
            <Shape id="myShape">
                <Appearance>
                    <Material id="myMaterial" diffuseColor="0.6 0.6 0.6" specularColor="0.8 0.8 0.8" shininess="0.145" ambientIntensity="0.2" emissiveColor="0,0,0"/>
                </Appearance>
                <Sphere />
            </Shape>
        </Scene>
    </X3D>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script src="http://x3dom.org/x3dom/release/x3dom.js"></script>
    <script>
    function displayAttributes(objectId){
        var code = '';
        var attributes = document.getElementById(objectId).attributes;
        $.each(attributes, function(index, attr) {
            code += '<tr><th>' + attr.name +'</th><td>' + attr.value + '</td></tr>';
        });
        $("#attributesTable").html(code);
    }
    </script>

    <button onclick="displayAttributes('myShape')" class="btn btn-large">Attributes of the shape</button>
    <button onclick="displayAttributes('myMaterial')" class="btn btn-large">Attributes of the material</button>

    <table id="attributesTable" class="table table-striped table-bordered" style="margin-top:50px"></table>

</body>
</html> 
```

要点：[https ://gist.github.com/4329304](https://gist.github.com/4329304)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T09:53:05.750

您正在尝试的确切内容尚不清楚，不确定这是否有帮助

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="stylesheet" type="text/css" href="http://x3dom.org/x3dom/example/x3dom.css"></link>
<script type="text/javascript" src = "http://x3dom.org/x3dom/example/x3dom.js"></script>
</head>
<body>
<X3D showLog='true' width="400px" height="400px"><Scene>
<Shape><Box size="2 2 2" onclick="alert_attributes();" /></Shape>
</Scene></X3D>
<script>
function alert_attributes()
{
var size = document.getElementsByTagName("Box")[0].getAttribute('size');
x3dom.debug.logInfo( size );
alert( size );

}
</script>
</body>
</html> 
```

# c# - How to save ObservableCollection in Windows Store App?

> ID：13923600
> 
> 赞同：1
> 
> 时间：2012-12-17T22:52:51.033
> 
> 标签：c#, windows, windows-8, windows-runtime

I am creating Windows Store App based on Split App template. What is the best way to save data from SampleDataSource for later use?

I tried:

```
Windows.Storage.ApplicationDataContainer roamingSettings = Windows.Storage.ApplicationData.Current.RoamingSettings;
roamingSettings.Values["Data"] = AllGroups; 
```

It throws exception: 'Data of this type is not supported'.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T13:40:42.607

[RoamingSettings](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.roamingsettings.aspx)仅支持[运行时数据类型](http://msdn.microsoft.com/en-us/library/windows/apps/br205768.aspx)（Uri 除外）；此外，每个设置和总共可以保存多少数据是有限制的。

您最好使用[RoamingFolder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.roamingfolder.aspx)（或者可能是[LocalFolder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localfolder.aspx)）作为存储方面。

对于序列化方面，您可以尝试[DataContractSerializer](http://msdn.microsoft.com/en-us/library/vstudio/system.runtime.serialization.datacontractserializer%28v=vs.110%29.aspx)。如果你有这样的课程：

```
public class MyData
{
    public int Prop1 { get; set; }
    public int Prop2 { get; set; }
}
public ObservableCollection<MyData> coll; 
```

然后写如下

```
var f = await Windows.Storage.ApplicationData.Current.LocalFolder.CreateFileAsync("data.txt");
using ( var st = await f.OpenStreamForWriteAsync())
{
    var s = new DataContractSerializer(typeof(ObservableCollection<MyData>), 
                                       new Type[] { typeof(MyData) });
    s.WriteObject(st, coll); 
```

像这样读

```
using (var st = await Windows.Storage.ApplicationData.Current.LocalFolder.OpenStreamForReadAsync("data.txt"))
{
    var t = new DataContractSerializer(typeof(ObservableCollection<MyData>), 
                                       new Type[] { typeof(MyData) });
    var col2 = t.ReadObject(st) as ObservableCollection<MyData>;

} 
```

# c# - 无法使用 Rectangle.Intersects() 正确检测碰撞

> ID：13923602
> 
> 赞同：5
> 
> 时间：2012-12-17T22:52:59.097
> 
> 标签：c#, xna, collision-detection

我使用单个精灵表图像作为我的突破游戏的主要纹理。图像是这样的：

![breakout_sprite_sheet](../Images/4b34e253716552a7f37838521bfc0a0b.png)

我的代码有点混乱，因为我从同一个纹理创建两个元素，使用 a`Point`表示元素大小及其在图纸上的位置， a`Vector`表示其在视口上的位置， a`Rectangle`表示元素本身。

```
Texture2D sheet;

Point paddleSize = new Point(112, 24);
Point paddleSheetPosition = new Point(0, 240);
Vector2 paddleViewportPosition;
Rectangle paddleRectangle;

Point ballSize = new Point(24, 24);
Point ballSheetPosition = new Point(160, 240);
Vector2 ballViewportPosition;
Rectangle ballRectangle;
Vector2 ballVelocity; 
```

我的初始化也有点混乱，但它按预期工作：

```
paddleViewportPosition = new Vector2((GraphicsDevice.Viewport.Bounds.Width - paddleSize.X) / 2, GraphicsDevice.Viewport.Bounds.Height - (paddleSize.Y * 2));
paddleRectangle = new Rectangle(paddleSheetPosition.X, paddleSheetPosition.Y, paddleSize.X, paddleSize.Y);

Random random = new Random();
ballViewportPosition = new Vector2(random.Next(GraphicsDevice.Viewport.Bounds.Width), random.Next(GraphicsDevice.Viewport.Bounds.Top, GraphicsDevice.Viewport.Bounds.Height / 2));
ballRectangle = new Rectangle(ballSheetPosition.X, ballSheetPosition.Y, ballSize.X, ballSize.Y);
ballVelocity = new Vector2(3f, 3f); 
```

和图纸：

```
spriteBatch.Draw(sheet, paddleViewportPosition, paddleRectangle, Color.White);
spriteBatch.Draw(sheet, ballViewportPosition, ballRectangle, Color.White); 
```

问题是我无法正确检测到碰撞，使用以下代码：

```
if(ballRectangle.Intersects(paddleRectangle))
{
    ballVelocity.Y = -ballVelocity.Y;
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T23:20:28.380

您正在测试基于[`sourceRectangles`](http://msdn.microsoft.com/en-us/library/ff433990.aspx)精灵表纹理的碰撞。这些矩形 ( `paddleRectangle`, `ballRectangle`) 是根据*纹理坐标*定义的——即这些精灵在图纸上的位置。测试这些矩形的碰撞是没有意义的。

您需要**使用屏幕坐标进行碰撞**，也就是说，您需要使用*屏幕位置*定义不同的矩形：

```
Rectangle paddleViewportRectangle = new Rectangle(paddleViewportPosition.X, 
                                              paddleViewportPosition.Y, 
                                              paddleSize.X, 
                                              paddleSize.Y);

Rectangle ballViewportRectangle = new Rectangle(ballViewportPosition.X,
                                                ballViewportPosition.Y,
                                                ballSize.X,
                                                ballSize.Y);

if(ballViewportRectangle.Intersects(paddleViewportRectangle))
{
    ballVelocity.Y = -ballVelocity.Y;
} 
```

# php - Getting count() of class static array

> ID：13923606
> 
> 赞同：0
> 
> 时间：2012-12-17T22:53:10.783
> 
> 标签：php, arrays, static-members

Is it possible to get the count of a class defined static array? For example:

```
class Model_Example
{

    const VALUE_1 = 1;
    const VALUE_2 = 2;
    const VALUE_3 = 3;

    public static $value_array = array(
        self::VALUE_1 => 'boing',
        self::VALUE_2 => 'boingboing',
        self::VALUE_3 => 'boingboingboing',
    );

    public function countit()
    {
        // count number
        $total = count(self::$value_array );
        echo ': ';
        die($total);
    }
} 
```

At the moment calling the countit() method returns `:`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:00:29.390

对的，这是可能的。上面代码中的问题是 die() 函数。如果 die() 的参数是一个整数，它将被用作脚本的退出值，而不是打印到屏幕上。

将 countit() 方法更改为：

```
public function countit()
{
    // count number
    $total = count(self::$value_array );
    echo ': ', $total;
} 
```

[你会在这里](http://de1.php.net/manual/en/function.die.php)找到更多信息

# installation - 编译错误，因为我两次调用宏

> ID：13923608
> 
> 赞同：0
> 
> 时间：2012-12-17T22:53:33.253
> 
> 标签：installation, nsis

当我两次调用宏函数（在一个部分内）时，我得到了这个编译错误：

> 错误：标签“CheckForRMSCustomisationLoop：”已在部分中声明

我理解它，因为我定义了一个标签（跳转）两次，对吗？

**我怎样才能避免这个问题？**

我必须将宏转换为函数还是有更简单的方法？因为转换为函数意味着我不能传递参数，所以我必须使用堆栈。

```
Outfile "RequireAdmin.exe"
RequestExecutionLevel admin  ;Require admin rights on NT6+ (When UAC is turned on)
!include LogicLib.nsh

!macro Test param1 param2

    TestLabel1:
        DetailPrint "TestLabel1"
    TestLabel2:
        DetailPrint "TestLabel2"

!macroend

Section

    !insertmacro Test 1 2
    !insertmacro Test 3 4

  IfErrors 0 +2
    MessageBox MB_ICONEXCLAMATION|MB_OK "Unable to write to the registry" IDOK +1
SectionEnd

Function TestFunct # I MISS MY PARAMS :(

    Pop $R9 # represents param2: but actually having param2 is SO MUCH more descriptive
    Pop $R8 

    TestLabel1:
        DetailPrint "TestLabel1"
    TestLabel2:
        DetailPrint "TestLabel2"

FunctionEnd

/* Usage
    Push 1
    Push 2
    Call TestFunct
    Push 3
    Push 4
    Call TestFunct
*/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:20:53.510

你是对的，你定义了标签`TestLabel1`和`TestLabel2`两次。

您可以使用此方法使您的标签名称独一无二：

```
!macro Test param1 param2
    !define ID ${__LINE__}
    TestLabel1_${ID}:
        DetailPrint "TestLabel1"
    TestLabel2_${ID}:
        DetailPrint "TestLabel2"
!macroend 
```

更多信息在这里：

[http://nsis.sourceforge.net/Macro_vs_Function#labels](http://nsis.sourceforge.net/Macro_vs_Function#labels)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:53:53.807

看来这是一个解决方案，它也非常优雅：

```
!macro Test param1 param2 uid
    TestLabel1_${uid}:
        DetailPrint "TestLabel1"
    TestLabel2_${uid}:
        DetailPrint "TestLabel2"
!macroend 

# Usage:
Section
    !insertmacro Test 1 2 ${__LINE__}
    !insertmacro Test 3 4 ${__LINE__}
SectionEnd 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T19:40:37.687

```
!macro test p1
!define test_ "test${__LINE__}"
IntCmp ${p1} 3 ${test_}double 0
DetailPrint ${p1}
Goto ${test_}end
${test_}double:
IntOp $0 ${p1} * 2
DetailPrint $0
${test_}end:
!undef test_
!macroend

; If the macro is very large and you call it multiple times it might be better to use a function or a macro/function hybrid:
!include util.nsh
!macro testmacroasfunction
Pop $0
IntCmp $0 3 double 0
DetailPrint $0
Goto end
double:
IntOp $0 $0 * 2
DetailPrint $0
end:
!macroend
!macro test2 p1
Push ${p1}
${CallArtificialFunction} testmacroasfunction
!macroend

section
!insertmacro test 2
!insertmacro test 3
!insertmacro test 4

!insertmacro test2 2
!insertmacro test2 3
!insertmacro test2 4
sectionend 
```

# bash - sudoers file for rvmsudo passenger-install-apache2-module

> ID：13923611
> 
> 赞同：0
> 
> 时间：2012-12-17T22:53:39.177
> 
> 标签：bash, rvm, passenger, sudo, sudoers

BACKGROUND:

I have an application that is freshly deployed every day -- a VM is created, and then root for that system creates a "systemuser", which then installs the application.

It's running:

*   CentOS 6
*   RVM
*   Ruby 1.8.7 on Rails
*   passenger

The way it's set up, I have to have Ruby on Rails install itself, and install passenger. To this end the user running the service has sudo powers, but the intention is to only allow the commands needed during installation. For security and maintainability reasons we cannot put the sudo password in the script.

my /etc/sudoers includes:

```
systemuser ALL = NOPASSWD: /usr/bin/env, /bin/bash, /usr/local/rvm/rubies/ruby-1.8.7-p358/bin/gem, /bin/cp, /bin/ln, /bin/mv, /bin/rm, /etc/init.d/httpd * 
```

THE PROBLEM:

Until recently a variant of this worked great. However recently something changed somewhere (?) and the rvmsudo command no longer executes without a password prompt.

```
$ rvmsudo passenger-install-apache2-module

 We trust you have received the usual lecture from the local System
 Administrator. It usually boils down to these three things:

    #1) Respect the privacy of others.
    #2) Think before you type.
    #3) With great power comes great responsibility.

 [sudo] password for systemuser: 
```

THE QUESTION:

What is the minimal set of commands that should be in /etc/sudoers to install rvm, ruby, bundler/gem, and then passenger2 on apache?

Yes, I've read the "documentation" at [https://rvm.io/integration/passenger/](https://rvm.io/integration/passenger/)

Creative solutions welcomed! I realize one may say this looks like a pretty hacky system, and I'd agree with you. But at the moment it's hard for me to improve it without understanding what commands are being run by this passenger install script.

Removing "env" and "bash" from the front and adding "rvm" gets a little farther:

```
systemuser ALL = NOPASSWD: /usr/local/rvm/bin/rvmsudo, /usr/local/rvm/gems/ruby-1.8.7-p358/bin/passenger-install-apache2-module, /bin/cp, /bin/ln, /bin/mv, /bin/rm, /etc/init.d/httpd * 
```

running this:

```
$ rvmsudo passenger-install-apache2-module
[sudo] password for systemuser: 
```

Thanks for your attention!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:21:32.023

`/usr/bin/env`是一个允许运行任何命令的路由器，对于`/bin/bash`，您必须添加`which passenger-install-apache2-module`而不是它们。

# java - http client head method against a website returns 503 but the site just runs fine

> ID：13923618
> 
> 赞同：1
> 
> 时间：2012-12-17T22:54:15.853
> 
> 标签：java, http, httpclient, http-status-codes

we are using the following code to talk to our website from our client side app, for some reason, we always get back status code of 503\. but then when we manually load the site from browser, it just loads find. anything could be wrong with the code? or is there any special setting on server side that could cause this problem?

```
 // the head method
        httphead = new HttpHead(url);
        httphead.getParams().setParameter("http.socket.timeout", this.socketTimeout);
        httphead.getParams().setParameter("http.protocol.cookie-policy", CookiePolicy.IGNORE_COOKIES);

        HttpResponse response = this.httpClient.execute(httphead);
        statusCode = response.getStatusLine().getStatusCode(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T22:57:48.147

我将首先使用 tcpdump（或 windows 中的 winpcap）来获取数据包转储。然后您可以确切地看到这两个请求有何不同。如果您仍然无法解决问题，请在此处发布差异。

```
tcpdump -n -s 1000 -A port 80 and host {hostname} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:12:09.063

这是由许多不同的事情引起的。基本上，您将需要进行自己的调查：

*   检查您是否确实使用了正确的 URL ...

*   检查服务器端日志。

*   如果您在浏览器和服务之间有代理或反向代理，请检查请求到达多远...

*   尝试捕获请求和回复消息（对于有效和无效的情况）并找出差异是什么。

*   尝试重现 HttpClient 库的工作（浏览器）案例；即使用相同的 URL 和相同的标头执行 GET。

*   等等 ...

# google-analytics - What are proper ways to count application launches?

> ID：13923619
> 
> 赞同：2
> 
> 时间：2012-12-17T22:54:17.323
> 
> 标签：google-analytics, launching-application

Say, I'm developing a Windows (if OS is important) application that will be available to download for free and I would like then to collect some usage statistics. In the easiest case - count of application launches. It looks superfluous to maintain a server (e.g. VDS) just for this.

I've been thinking to use Google Analytics for this (manually send requests to GA server). This will probably work, but it is not GA designed for - the idea looks like a hack.

What are the options here?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:00:15.727

我不认为这是一个黑客。这只是关于用户交互的数据。打开桌面应用程序并单击按钮与打开网页并点击链接之间几乎没有逻辑上的区别。两者都是可衡量的用户操作，您可以跟踪、汇总和放在图表上。

事实上，谷歌提供了一个较低级别的基于 HTTP 的“测量协议”，它正是为此而设计的。

[https://developers.google.com/analytics/devguides/collection/protocol/v1/](https://developers.google.com/analytics/devguides/collection/protocol/v1/)

从概述：

> Google Analytics Measurement Protocol 允许开发人员发出 HTTP 请求，将原始用户交互数据直接发送到 Google Analytics 服务器。这允许开发人员在几乎任何环境中衡量用户如何与他们的业务交互

只需在应用程序启动或按钮单击代码中输入具有正确参数的 HTTP 请求，它就会收集数据。您想要收集的任何数据。

在这个问题的其他答案中，有一些建议，比如制作 Web 服务或在本地存储数据，但为什么要重新发明轮子呢？Google Analytics 已经提供了收集和报告工具，这似乎是一个很好的解决方案。

# ios - ios libpd app doesn't generate sound normally but if i launch with profiler it does

> ID：13923624
> 
> 赞同：1
> 
> 时间：2012-12-17T22:54:22.403
> 
> 标签：ios, xcode, cpu, instruments, profile

I have an intense cpu app (synth with 8 voices) based on libpd that doesn't generate any sound, however, if I launch it thru profiler, it generates sound and cpu usage is around 70%

why is this difference? why does profiler allows it to run? is there anything blocking apps that consume more than 50% cpu? can someone explain me this phenomena?

if I take synth voices out and leave only 2 for instance, it works without the profiler.

Any tips regarding would be nice.

Thanks,

With my best regards,

Nuno

# php - Picture upload folder has too many files (10k limit), now I need to change the php-sql control panel

> ID：13923636
> 
> 赞同：0
> 
> 时间：2012-12-17T22:55:08.853
> 
> 标签：php, sql, upload, directory, limit

I have quite the predicament and I'm looking for the most efficient strategy of dealing with it:

I run a simple news site with basic articles which have images attached to them, similar to a blog. PHP-SQL frontend and administration panel.

The problem is that whoever made the original source did not consider that number of jpgs uploaded would exceed certain system limits, and now I can't upload in that folder anymore.

Each solution I think of requires a compromise, the worst one of which is obviously... manually editing over 10000 sql records.

...Now I need to transition to a folder with subfolder or to another folder on the same level, but how can I best do this while still maintaining functionality in the frontend and backened (i.e. avoiding 404 on the image files).

I was thinking of creating a *switch* or an *if* statement that would assign fixed (by me) folders based on if the ID of the sql record is larger or smaller than the top most value the latest one of from today (when I hit this wall), but if so, I have to learn to work around the PHPMAKER source (it's a nice table manager generator software).

I would love to implement some dynamic upload folder based on variables, but I don't know how. Here's a sample of the code which deals with the configuring the uploading:

adding a picture to row to the folder "picarticles" (the one):

```
 $this->picture->UploadPath = "/../picarticles/";
    if ($this->picture->Upload->Action == "1") { // Keep
        if ($rsold) {
            $rsnew['picture'] = $rsold->fields['picture'];
        }
    } elseif ($this->picture->Upload->Action == "2" || $this->picture->Upload->Action == "3") { // Update/Remove
    if (is_null($this->picture->Upload->Value)) {
        $rsnew['picture'] = NULL;
    } else {
        $rsnew['picture'] = ew_UploadFileNameEx(ew_UploadPathEx(TRUE, $this->picture->UploadPath), $this->picture->Upload->FileName);
    }
    $this->picture->ImageWidth = 500; // Resize width
    $this->picture->ImageHeight = 400; // Resize height
    } 
```

or in rendering the picture from a row:

```
 $this->picture->UploadPath = "/../picarticles/";
        if (!ew_Empty($this->picture->Upload->DbValue)) {
            $this->picture->ViewValue = $this->picture->Upload->DbValue;
            $this->picture->ImageWidth = 100;
            $this->picture->ImageHeight = 80;
            $this->picture->ImageAlt = $this->picture->FldAlt();
        } else {
            $this->picture->ViewValue = "";
        }
        $this->picture->ViewCustomAttributes = ""; 
```

this is for adding the timestamp, which would be an interesting candidate for the dynamic stuff:

```
 $this->timestamp->SetDbValueDef($rsnew, ew_CurrentDateTime(), NULL);
    $rsnew['timestamp'] = &$this->timestamp->DbValue; 
```

or adding maybe I could use the first or second term out of a string of keywords to act as a folder, since that wouldn't create just as many new folders as there were new jpgs..

```
 $this->keywords->SetDbValueDef($rsnew, $this->keywords->CurrentValue, NULL, FALSE); 
```

# quartz.net - Quartz.NET 工作生命周期

> ID：13923637
> 
> 赞同：1
> 
> 时间：2012-12-17T22:55:12.770
> 
> 标签：quartz.net

我正在使用 Quartz.NET，但在查找有关工作生命周期的文档时遇到了麻烦。

每次运行作业时都会创建作业类的新实例，还是会重用现有实例？

如果触发器再次触发时作业当前正在运行怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T23:00:06.860

触发器的每次触发都会创建一个新的作业实例。如果两个触发器重叠，将创建两个实例。

这些实例不是池化的，一旦工作完成，它们就有资格进行垃圾收集。

# php - 浏览器刷新时删除默认控制器名称（CodeigniterPHP/Nginx 问题？）

> ID：13923638
> 
> 赞同：0
> 
> 时间：2012-12-17T22:55:24.473
> 
> 标签：php, codeigniter, nginx

对于我的 codeigniter 应用程序中的所有页面，除了我的默认控制器，`main.php`当我刷新浏览器时，url 不会像预期的那样受到影响。

但是，当我在“http://localhost/main”刷新浏览器时，该`main`部分会从 url 中删除。所以浏览器栏只显示“http://localhost”。

完全不知道从哪里开始，但只是想知道是否有人以前遇到过这个......？

这就是我认为可能是我的 nginx.conf 的相关部分（如果 Nginx 是问题）。

```
if ($request_uri ~* ^(/main(/index)?|/index(.php)?)/?$)
{
    rewrite ^(.*)$ / permanent;  
} 
```

请注意，将括号中的代码更改为：

```
rewrite ^(.*)$ /main permanent; 
```

导致错误消息`The webpage at http://localhost/main has resulted in too many redirects.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:10:50.063

好的，我回答了我自己的问题。只需注释掉我显示的 nginx.conf 代码即可解决问题。

所以就这样做（[Bo Jackson 说](http://www.gunaxin.com/wp-content/uploads/2011/06/Bo-Jackson.jpg)）：

```
#if ($request_uri ~* ^(/main(/index)?|/index(.php)?)/?$)
#{
#  rewrite ^(.*)$ / permanent;  
#} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:17:25.713

如果您尝试将您的请求路由到 index.php 引导程序，以便您可以从 CodeIgniter 中的 url 中删除 index.php，您可能应该尝试使用这个：

```
location / {
    try_files $uri $uri/ /index.php?$query_string;
} 
```

# c# - 新的空白、非空匿名类型

> ID：13923647
> 
> 赞同：2
> 
> 时间：2012-12-17T22:55:51.317
> 
> 标签：c#, linq

我需要在 linq 查询返回的其他匿名类型列表中插入一个新的空白但非空匿名类型。那可能吗？我能得到的只是空值

```
var something =
( from a in x.As
 where x != null
  join b in x.Bs
    on a.key equals b.key
select new
{
    a.prop1,
    a.prop2,
    b.prop1,
    b.prop2,
    b.prop3
}).ToList();

// insert blank
//something.InsertRange(0, something.DefaultIfEmpty());
//something.InsertRange(0, something.Take(0));
//? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:08:44.453

我不知道在单个查询中执行此操作的方法，因为匿名类型的默认值是`null`. 我要做的是预先创建一个“默认”项目并在必要时附加它：

```
var blank = new {
                prop1 = default(string),  // can't use null 
                prop2 = default(string),  // because the type cannot be inferred
                prop3 = default(string),
                prop4 = default(string)
                };

var something = /*...*/.ToList();
if(!something.Any())
    something.Add(blank); 
```

请注意，只要字段名称匹配（名称和类型）`blank`，其匿名类型就会与 Linq 查询创建的匿名类型相同。

# sidebar - 如何在侧边栏或页脚中包含联系表格？使用PHP？

> ID：13923648
> 
> 赞同：0
> 
> 时间：2012-12-17T22:55:53.820
> 
> 标签：sidebar, contact-form, php-include

我需要在现有网站的侧边栏或页脚中包含一个简单的联系表格，以便它出现在每个页面上。

这不是一个 WordPress 网站，我看到有几个 WordPress 插件。我需要一个不同的解决方案。我认为 php 包含将是我最好的选择。但是，我对 php 很陌生。有人可以指出我正确的方向吗？任何建议将不胜感激。

我已经搜索了一整天，还没有找到一个好的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T01:58:42.150

您可以尝试编写如下内容：

```
<?php include("form.php"); ?> 
```

直接进入html。如果您是 php 新手，您只需要确保在您的服务器上启用了 php [与网络主机交谈] 如果不确定。

**form.php**文件实际上只是文件名末尾带有 .php 而不是 .html 的文件

在文件中，它只会包含表单的 html。我不知道这是否是最合法的方法，但它很实用。【我自己学php】

# c# - 使用方法名的属性

> ID：13923649
> 
> 赞同：9
> 
> 时间：2012-12-17T22:55:54.140
> 
> 标签：c#, reflection, attributes

我想你不能，但有没有办法将方法引用为属性的参数？即像下面这样的东西？我可以回退到使用字符串，但更喜欢使用编译器时间来验证类型是否正确。

```
[LinkToAction(Something)]
public void SomethingElse()
{

}

public static void Something()
{

}

public class LinkToActionAttribute : Attribute
{
    public LinkToActionAttribute(MethodInfo info)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:06:19.867

对不起，但你不能。只是这些可以作为属性的参数传递：

*   以下类型之一：bool、byte、char、double、float、int、long、short、string。
*   类型对象。
*   类型 System.Type。
*   枚举类型，前提是它具有公共可访问性，并且它嵌套的类型（如果有）也具有公共可访问性。
*   上述类型的一维数组。

这个问题与您的问题相似：[是否可以将委托作为属性参数？](https://stackoverflow.com/questions/7705386/is-it-possible-to-have-a-delegate-as-attribute-parameter). 在那里，提供了一种对您有用的解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:12:46.707

不是直接没有。您可以将其作为字符串传递，然后使用反射生成 MethodInfo，或者更好的是，使用 LinkedFrom 和 LinkedTo 属性标记方法。

虽然它效率不高，但验证它也需要一些工作，这让你想知道属性是否是正确的解决方案。

# variables - 在 VBS 上使用变量

> ID：13923650
> 
> 赞同：1
> 
> 时间：2012-12-17T22:55:57.510
> 
> 标签：variables, vbscript, registry

我将 reg 文件转换为 VBS 命令。

```
[HKEY_CURRENT_USER\Software\Microsoft\Windows\CurrentVersion\Run]
@=""
"VPService"="C:\\Windows\\System32\\VPService.exe" 
```

但我不能使用 %systemroot% 变量代替 C:\Windows\ 。

```
Option Explicit
Dim objShell
Set objShell = CreateObject("WScript.Shell")

Dim strComputer, ArrOfValue, oReg
const HKEY_USERS = &H80000003
const HKEY_LOCAL_MACHINE = &H80000002
const HKEY_CURRENT_USER = &H80000001
const HKEY_CLASSES_ROOT = &H80000000
strComputer = "."
Set oReg=GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & strComputer & "\root\default:StdRegProv")
objShell.RegWrite "HKCU\Software\Microsoft\Windows\CurrentVersion\Run\", ""
objShell.RegWrite "HKCU\Software\Microsoft\Windows\CurrentVersion\Run\", "", "REG_SZ" 'Default value
objShell.RegWrite "HKCU\Software\Microsoft\Windows\CurrentVersion\Run\VPService", "C:\\Windows\\System32\\VPService.exe", "REG_SZ"
Set objShell = Nothing
WScript.Quit 
```

如何在此代码上使用 %systemroot% 变量而不是 C:\Windows\？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:01:38.160

WScript.Shell 可以扩展环境变量：

```
>> WScript.Echo CreateObject("WScript.Shell").ExpandEnvironmentStrings("%systemroot%")
>>
C:\WINDOWS 
```

[文档](http://technet.microsoft.com/de-de/subscriptions/index/dy8116cf%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:04:35.557

使值成为[可扩展的字符串](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724884%28v=vs.85%29.aspx)：

```
objShell.RegWrite "HKCU\Software\Microsoft\Windows\CurrentVersion\Run\VPService" _
  , "%SystemRoot%\\System32\\VPService.exe", "REG_EXPAND_SZ" 
```

# c# - 将“最大长度”添加到正则表达式

> ID：13923652
> 
> 赞同：7
> 
> 时间：2012-12-17T22:56:11.973
> 
> 标签：c#, regex

我如何扩展已经存在的正则表达式的属性，告诉正则表达式不能超过（比方说）255 的最大长度？

我有以下正则表达式：

`([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)`

我试过这样，但失败了：

`{.,255([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)}`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T23:16:25.870

如果它必须是一个完全基于正则表达式的解决方案，那么最好的方法是使用环视。

查看此示例：[http ://regex101.com/r/yM3vL0](http://regex101.com/r/yM3vL0)

我在这里所做的只是匹配最多*三个*字符长的字符串。当然，以我为例，这不是最好的方法。但忽略这一点，我只是想展示一个对你有用的例子。

您还必须锚定您的模式，否则引擎将忽略环视（我是否必须深入解释这一点？）

换句话说，您可以在正则表达式中使用以下内容将其限制为最多 255 个字符：

```
^(?!^.{256})([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?) 
```

我也觉得我有责任告诉你你的正则表达式很糟糕，你应该感到难过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:01:36.193

正则表达式并不是真正用来解决所有问题的。在这种情况下，我建议测试 255 的长度会很昂贵，因为这将需要基础表示中的 255 个状态。相反，只需单独测试字符串的长度。

但如果你真的必须，你需要让你的角色是可选的，比如：

```
.?{255} 
```

将匹配 255 个或更少字符的任何字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T01:00:33.090

为什么不检查字符串的最大长度呢？如果您使用 DataAnnotations，您可以在属性上粘贴 [StringLength(255)]。

如果您使用的是 ASP.NET 验证器，则可以使用 RangeValidator。

如果您使用的是自定义验证函数，那么在对它抛出复杂的正则表达式之前检查长度会更易读（也更快）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T01:50:25.857

您“可能”能够使用如下的前瞻：

```
^(?=.{0,255}$)your regex here$ 
```

所以...

```
^(?=^.{0,255}$)([a-zA-Z0-9_\-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([a-zA-Z0-9\-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$ 
```

# php - PHP/MySql/Jquery 脚本与 RAM

> ID：13923653
> 
> 赞同：1
> 
> 时间：2012-12-17T22:56:30.367
> 
> 标签：php, jquery, mysql, apache, ram

大家好，我对服务器的 RAM 和 PHP/MySQL/Jquery 脚本有疑问。

当脚本不占用额外的 RAM 时，脚本可以杀死 RAM 吗？（我知道当 RAM 增长到最大值或由于内存限制时可能会发生这种情况。但事实并非如此。）

我正在测试脚本，但每次我这样做时，RAM 都会迅速下降。脚本没有显示内存限制错误，它正确加载了所有数据。当我不测试脚本时，RAM 仍然处于关闭状态。

数据库中有几条记录 - 9 个表中可能有 350 条记录（大表有 147 条记录）。

（我没有任何日志只是简单地（非常简单）运行服务器的图表。）

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:32:38.813

如果您的 PHP 错误日志中没有出现有关未能分配内存的错误，并且您没有看到服务器内存不足的其他问题（例如由于内存页面被写入磁盘以进行按需分页而导致的极端性能下降） ) 你可能不需要真正担心它。Web 服务器在单个请求中使用这么多内存的任何用例都将非常罕见。

至于试图分析实际内存使用情况，试图通过观察任务管理器之类的东西来分析它是非常不可靠的。大多数 PHP 脚本将在几毫秒内完成，这不足以让内存分配真正注册到任务管理器中。

即使您有更可靠的方法来分析内存使用情况（我不记得 PHP 是否为此内置了函数，但可能确实如此），请记住，由于可能很难的原因，内存使用量会大幅波动去理解。特别是 PHP 是非常高级的：您可以打开一个数据库连接，这涉及到操作系统打开网络套接字、创建内部数据结构、缓存事物等等的所有内容，所有这些都在一行代码中完成。该脚本可能会为单个数据库行分配数兆字节的内存，但可能会在一毫秒后释放它。

这些数据库大小可以忽略不计。根据行的大小，它可能低于一兆字节的数据，这对于任何远程现代的内存来说只是桶中的一小部分。不要担心这样的事情的内存使用情况。只有当您看到您的脚本失败并且您的错误日志报告内存不足时，您才真正担心它。

# php - 测试php禁用缓存

> ID：13923655
> 
> 赞同：1
> 
> 时间：2012-12-17T22:56:40.210
> 
> 标签：php, http-headers

我的网站存在一个问题，即某些浏览器（尤其是 opera 和 gecko）“缓存过多”（缓存太多，不符合我的口味）。

我刚刚添加了以下 PHP 代码段，希望能在所有浏览器中禁用缓存：

```
<?php 
header("Expires: Tue, 01 Jan 2000 00:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate, max-age=0");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");
?> 
```

问题：您将如何测试它，以确保它确实有效？

补充，注释：我需要一个愚蠢的简单测试；我的技能水平很低。我无法进行缓存清除（网址更改），因为它是一个单页网站。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:00:34.053

获取当前时间（）并将其存储在 PHP 会话中。使用 var_dump() 打印出 $_SESSION 数组，并打印当前时间()。点击“刷新”几次。期望会话数组保持稳定并且当前时间发生变化。如果两者都保持稳定，则脚本输出将被缓存。

此处示例：[http ://www.laprbass.com/RAY_cache_test.php](http://www.laprbass.com/RAY_cache_test.php)

```
<?php // RAY_cache_test.php
error_reporting(E_ALL);
date_default_timezone_set('America/Chicago');

// SEND HEADERS
header("Expires: Tue, 01 Jan 2000 00:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: no-store, no-cache, must-revalidate, max-age=0");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

// START SESSION
session_start();

// GET CURRENT TIME
$now = date('c');

// IF NO TIME IN SESSION YET, STORE ONE
if (!isset($_SESSION['myTest'])) $_SESSION['myTest'] = $now;

// SHOW THE SESSION AND THE CURRENT TIME
echo 'SESSION TIME: ' . $_SESSION['myTest'];
echo '<br/>';
echo 'CURRENT TIME: ' . $now; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:00:45.613

大多数浏览器扩展，如 Chrome 的开发者工具或 Firefox 的 Firebug，都允许您检查包含缓存所需的所有信息的请求和响应标头。

此外，如果您在 Windows 上进行开发，我可以推荐使用**[Fiddler](http://www.fiddler2.com/fiddler2/)**，这是一个出色的调试代理，除了提供应用程序的深度流量分析之外，还可以用简单的英语向您解释缓存的情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:01:26.567

您应该在 Web 服务器日志中看到页面访问。比较访问模式，当页面被重新请求时，有和没有额外的标题。

# android - Android以编程方式添加textview

> ID：13923658
> 
> 赞同：-2
> 
> 时间：2012-12-17T22:56:53.027
> 
> 标签：android, xml, dynamic, textview, android-scrollview

所以从调试和注释掉的东西我得出的结论是这个程序的问题出在 addTextView() 方法中。我完全不知道问题出在哪里。我的猜测是在我试图添加到 TextView 的布局中。非常感谢您的帮助。

```
public class Books extends Activity{
    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.books);
        addTextView("Hello World");
    }

    public void addTextView(String text)
    {
        ScrollView viewport = (ScrollView)findViewById(R.id.books);
        TextView textview= (TextView)new TextView(this);
        textview.setText(text);
        //textview.setLayoutParams(new ScrollView.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        viewport.addView(textview, new ScrollView.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
    }

    public void addButton(String text)
    {
        ScrollView scrollview = (ScrollView)findViewById(R.id.books);
        Button btnTag = (Button)new Button(Books.this);
        btnTag.setLayoutParams(new ScrollView.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
        btnTag.setText(text);
        scrollview.addView(btnTag);
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-17T23:03:31.260

ScrollView 只能有一个孩子，通常是 LinearLayout。当您打电话时，`scrollview.addView(blah blah)`您正在向 ScrollView 添加更多的孩子，这是不允许的。

有关 ScrollView 的文档，请参见[此处](http://developer.android.com/reference/android/widget/ScrollView.html)。

--

附带说明一下，在 StackOverflow 上发布有关您遇到的错误的问题时，请说明：

*   您遇到的**错误**（在 Android 中，这将在 LogCat 视图中找到）
*   你的预期结果（你想要做什么）
*   相关代码（在这种情况下，您也应该包含布局 XML 文件 - 虽然 ScrollView 错误绝对是您会遇到的错误*之一*，但它可能不是第一个需要修复的错误，以便继续前进）。

它会帮助每个人，包括将来偶然发现这个问题的人。

# php - 使用 jquery $.get 函数从服务器检索数据

> ID：13923660
> 
> 赞同：0
> 
> 时间：2012-12-17T22:56:56.873
> 
> 标签：php, javascript, jquery, postgresql, flot

我正在使用 flot 库并使用 jquery $.get 函数创建一个实时图表。我希望图表每 5 秒更新一次，以检索记录的数据。X 轴处于时间模式。我一直在尝试检索必要的数据，但我还不能得到它。.php 文件很好，因为它连接到 postgresql 数据库并将数据写入请求的变量中。我认为我的问题出在 $.get 函数中。你能帮我看看我的Javascript代码是否正常吗？提前致谢

```
 <script type="text/javascript">
$(function () {
var data=[];
    var data_inicial = [];
    var data_actual = [];
    var x;
    var y;

    function data_init() 
    {
            $.get("param_pozos_linea1.php", function(data1) {  x= data1; });
            data_inicial.push([x]); 
            return data_inicial;
    }

    function actualiza_data() 
    {
            $.get("param_pozos_linea2.php", function(data2) {  y= data2; });
            data_actual.push(y); 
            return data_actual;
    }

    // control de velocidad 
    var updateInterval = 500;
    $("#updateInterval").val(updateInterval).change(function () {
        var v = $(this).val();
        if (v && !isNaN(+v)) {
            updateInterval = +v;
            if (updateInterval < 1)
                updateInterval = 1;

            $(this).val("" + updateInterval);
        }
    });

    // setup plot
    var options = {
        series: { shadowSize: 0 }, // drawing is faster without shadows
        yaxis: { min: 0, max: 100 },
        xaxis: { mode: "time",tickLength: 5, timeformat: "%d/%m - %h:%M %p"}
    };
    var plot = $.plot($("#placeholder"),  data_init() , options);

    function update() {
        plot.setData([ actualiza_data() ]);
        plot.draw();

        setTimeout(update, updateInterval);
    }

    update();
});
</script> 
```

从“param_pozos_linea1.php”文件中检索到的数据如下所示：

[1355767803000,0]，[1355767502000,0]，[1355767202000,0]，[1355766902000,0]，[13557666602000,0] ,0],[1355765103000,2570.17],[1355764803000,2569.63]

从“param_pozos_linea2.php”检索到的数据如下所示：[1355767803000,0]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:21:29.917

get 请求是异步的，它不可能像你想象的那样以同步的方式工作。

```
function data_init() 
{
        $.get("param_pozos_linea1.php", function(data1) {  x= data1; }); <-- calls the server asynchronously
        data_inicial.push([x]); <-- is called before code is set on server, so it is setting it with what ever the last value was
        return data_inicial;  <-- returns something you do not want
} 
```

你想要做的是调用设置数据的函数

```
function data_init() 
{
        $.get("param_pozos_linea1.php", 
            function(data1) {  
               data_inicial.push([data1]); 
               callYourPlotFunction(data_inicial);
            }
        );
} 
```

# java - Java - 添加到 DOM XML 文件

> ID：13923661
> 
> 赞同：2
> 
> 时间：2012-12-17T22:57:00.133
> 
> 标签：java, xml, dom

我有以下 XML，我想在 xml 中添加另一个“产品”。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<products>
    <product>
        <name>Computer</name>
        <code>PC1003</code>
        <description>Basic Computer</description>
        <price>399.99</price>
    </product>
    <product>
        <name>Monitor</name>
        <code>MN1003</code>
        <description>LCD Monitor</description>
        <price>99.99</price>
    </product>
    <product>
        <name>Printer</name>
        <code>PR1003x</code>
        <description>Inkjet Printer</description>
        <price>54.23</price>
    </product>
</products> 
```

这是我到目前为止的代码：

```
 // Variables
        File file = new File("db_products.xml"); // set xml to parse

        // Create builders
        DocumentBuilderFactory dbFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder dBuilder = dbFactory.newDocumentBuilder();
        Document doc = dBuilder.parse(file); // load xml file
        doc.getDocumentElement().normalize();

        doc.createElement("product"); 
```

我真的不在乎在哪里添加了新的“产品”部分。我似乎无法理解节点和元素之间的区别。我假设添加新“产品”部分的正确方法是将子项添加到“产品”，然后将子项（名称、代码等）添加到“产品”。

任何有关如何轻松执行此操作的帮助或指向简单教程的链接将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:13:30.770

您需要做的是`products`首先检索元素，然后`appendChild`在该元素上调用。像这样的东西：

```
Element productElement = doc.createElement("product");
productElement.setAttribute("name", "value");
//Other name value pairs...

//Append the products element to the right spot.
Element productsElement = (Element) doc.getElementByTagName("products").item(0);
productsElement.appendChild(productElement);

//Convert doc to xml string
DOMSource domSource = new DOMSource(doc);
StringWriter writer = new StringWriter();
StreamResult result = new StreamResult(writer);
TransformerFactory tf = TransformerFactory.newInstance();
Transformer transformer = tf.newTransformer();
transformer.transform(domSource, result);
String xmlAsString = writer.toString(); 
```

# iphone - 将 UINavigationBar 添加到 UITableView

> ID：13923669
> 
> 赞同：0
> 
> 时间：2012-12-17T22:58:10.110
> 
> 标签：iphone, objective-c, ios, xcode

[我在表格视图中添加了一个 UINavigationBar。](http://i50.tinypic.com/rihoiu.png)我知道这不是正确的方法，但我在想还有其他方法吗？当我试图将 UINavigationBar 和表视图放在视图控制器或表视图控制器中时，控制台会出现此错误：

```
Terminating app due to uncaught exception 'UIViewControllerHierarchyInconsistency',
reason: 'A view can only be associated with at most one view controller at a time!
View <UITableView: 0x1ebfb200; frame = (0 0; 320 480); clipsToBounds = YES; opaque
= NO; autoresize = W+H; gestureRecognizers = <NSArray: 0x1e5a0500>; layer =
<CALayer:0x1e5a94f0>; contentOffset: {0, 0}> is associated with <UITableViewController: 0x1e59f8c0>.
Clear this association before associating this view with <SheetsSavedViewController: 0x1f879660>.' 
```

现在，当我滚动时，导航栏会随着表格视图移动。有什么办法可以将其锁定在顶部吗？或者修复上面的错误...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T05:58:39.310

*   在 stroyboard 中选择您的 tableView 控制器
*   编辑器 -> 嵌入 -> 导航控制器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:03:45.537

为什么不使用文件菜单中的菜单选项将整个表格视图控制器嵌入到导航视图中。

# c - gcc 编译时类型解析

> ID：13923671
> 
> 赞同：3
> 
> 时间：2012-12-17T22:58:14.510
> 
> 标签：c, linux, gcc

我有三个文件，比如 Ac 、 Bc 和 Cc，所有这些文件都是 #include common.h

在 common.h 中，我包含“sys/socket.h”并通过宏保护 common.h：

```
#ifndef __COMMON_H
#define __COMMON_H
// body of file goes here
#endif 
```

当我编译代码时，我得到几个错误，如下所示

```
In file included from /usr/include/sys/socket.h:40,
             from tcpperf.h:4,
             from wrapunix.c:1:
/usr/include/bits/socket.h:425: error: conflicting types for 'recvmmsg'
/usr/include/bits/socket.h:425: note: previous declaration of 'recvmmsg' was here
In file included from /usr/include/sys/socket.h:40,
             from tcpperf.h:4,
             from wrapsock.c:1: 
```

正如你所看到的 wrapunix.c 和 wrapsock.c，它们都包含 tcpperf.h，但 tcpperf.h 由宏保护，但 gcc 抱怨 recvmsg 被多次声明。我该如何解决这个问题？

更新：这是导致问题的 tcpperf.h 的标头

```
#ifndef _TCPPERF_H
#define _TCPPERF_H
#include <sys/types.h>
#include <sys/socket.h>
#include <time.h>
#include <regex.h>
#include <errno.h>
#include <sched.h>
#include <pthread.h>
#include <argp.h>
#include <string.h>
#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>
#include <linux/tcp.h>
#include <netinet/in.h>
#include <arpa/inet.h>
#include <signal.h>
#include <sys/prctl.h>
#include <unistd.h>
#include <sys/wait.h>
#endif 
```

可以通过向 gcc 提供“-combine -fwhole-program”标志来重现上述错误，例如

gcc -std=gnu99 -Wall -combine -fwhole-program -I。error.c wrapunix.c wrapsock.c file1.c file2.c -o file2 -lrt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T02:54:07.200

错误是“'recvmmsg'的类型冲突”，而不仅仅是重复定义（如果相等，这是可以容忍的）。这意味着您的 .c 源会收到两个不同版本的 recvmmsg：一个是您直接包含的 tcpperf.h，另一个是通过 sys/socket.h 包含它。我相信您在包含路径的其他地方有另一个版本的 tcpperf.h，具有不同的（可能是旧版本）recvmmsg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T06:45:34.537

这个问题几乎肯定与`-combine`. 这有点猜测，但在查看 的定义时`recvmmsg`：

```
extern int recvmmsg (int __fd, struct mmsghdr *__vmessages,
                     unsigned int __vlen, int __flags,
                     __const struct timespec *__tmo); 
```

请注意，它需要 a`struct mmsghdr`作为参数。但是，虽然此原型是无条件的，但仅在设置`struct mmsghdr`时才定义`__USE_GNU`：

```
#ifdef __USE_GNU
/* For `recvmmsg'.  */
struct mmsghdr
  {
    struct msghdr msg_hdr;      /* Actual message header.  */
    unsigned int msg_len;       /* Number of received bytes for the entry.  */
  };
#endif 
```

`-combine`基本上相当于将所有文件连接在一起然后编译它们。有没有可能在 和 的文本之间`wrapunix.c`被`wrapsock.c`定义`GNU_SOURCE`？如果发生这种情况，那么第一个定义`recvmmsg`将使用`struct mmsghdr`仅对原型本地的定义，而第二个定义将使用真正的结构。这两个定义将不兼容，这将导致您收到错误消息。

# c# - 在 C# 中实现 Java 解密 AES 算法

> ID：13923672
> 
> 赞同：0
> 
> 时间：2012-12-17T22:58:17.187
> 
> 标签：c#, cryptography, aes, encryption

我们正在我们的应用程序中实现某种自动登录，并在 C# 中解密一些在 java 中加密的东西时感到震惊。

基本上，Java 应用程序会生成某种 URL。当用户点击链接时，我需要验证查询字符串，如果匹配，让用户登录。

有人提供了java代码。我需要将相同的代码转换为 C#，因为我的应用程序是 C#。当我在 C# 中完全实现它时出现错误。

这是java解密代码：

```
String vParameter= "ksyR31QsRcbeJoysNOsAGBHajLKWsT00wavt9LJYGOMRC8zc_vqrNOeOlGHKJHIt3sLmFhDVw_JZKr4JT0H3Jj7_Di9bKNw99qCzMOKCXYM=";  //The string that nees to be decoded.
byte[] encryptedV = Base64.decodeBase64(vParameter);
String salt = “jkjkyt4”; // the i parameter - user’s id
String password = “^hjkh673!v@!a89mz+%5rT”; // application specific
MessageDigest digester = MessageDigest.getInstance("SHA-1");
digester.update((salt + password).getBytes("UTF-8"));
byte[] key = digester.digest();
SecretKeySpec secretKey = new SecretKeySpec(key, 2, 16, “AES”);
String appIV = "SampleIV"// application specific
IvParameterSpec iv= new IvParameterSpec(appIV.getBytes(“UTF-8”));
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
cipher.init(Cipher.DECRYPT_MODE, secretKey, iv);
byte[] decryptedV = cipher.doFinal(encryptedV, 0, encryptedV.length);
String v = new String(decryptedV, “UTF-8”); 
```

这是对应的C#代码

```
 string vParameter = "ksyR31QsRcbeJoysNOsAGBHajLKWsT00wavt9LJYGOMRC8zc_vqrNOeOlGHKJHIt3sLmFhDVw_JZKr4JT0H3Jj7_Di9bKNw99qCzMOKCXYM="; //v parameter
        byte[] encryptedV = Encoding.UTF8.GetBytes(vParameter);
        String salt = "jkjkyt4"; // the i parameter - user’s id
        String password = "^hjkh673!v@!a89mz+%5rT"; // application specific
        var sha1 = SHA1Managed.Create();

        byte[] keyBytes = Encoding.UTF8.GetBytes(salt + password); //salt + password
        byte[] key = sha1.ComputeHash(keyBytes);
        byte[] finalKey = { 1, 2, 3, 4, 5, 6, 7, 8, 1, 2, 3, 4, 5, 6, 7, 8 };
        String appIV = "SampleIV";
        byte[] iv = Encoding.UTF8.GetBytes(appIV); //iv
        Array.Copy(key, 2, finalKey, 0, 16); //key 2, 16
        AesManaged tdes = new AesManaged();
        tdes.Key = finalKey;
        tdes.Mode = CipherMode.CBC;
        tdes.Padding = PaddingMode.PKCS7;
        tdes.IV = iv;
        ICryptoTransform crypt = tdes.CreateDecryptor();
        byte[] cipher = crypt.TransformFinalBlock(encryptedV, 0, encryptedV.Length);
        string decryptedText = Convert.ToBase64String(cipher);
        return decryptedText; 
```

我究竟做错了什么？谁能指出错误？

编辑：我已经更新了 V 参数...注意 - 密钥、密码和 IV 不是真实的。我不得不更改它们，因为我不希望我的公司密钥公开。

编辑 2：嗨，我已经更新了 vParameter.. 现在它们是一样的。Java 代码正在运行......它已在另一个应用程序中实现。现在，我必须为我的 C# 应用程序创建一个类似的版本。你们能指出 C# 代码中的任何问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T12:44:13.653

您正在混淆 UTF8 编码/解码和 base64 编码/解码。此外，发布的代码也不起作用，因为密文和 IV 的长度错误。我怀疑这只是因为您更改了它们以避免泄露您的真实数据。

无论如何，这是一个返回相同结果的 Java 片段和 C# 片段：

Java（我只将 vParameter 和 appIV 更改为有效的东西）：

```
String vParameter= "Lq4aURUiyvKvEZBWMWpUr2wRSMu96E+J1UeHLTOhKEM=";  //The string that needs to be decoded.
byte[] encryptedV = Base64.decodeBase64(vParameter.getBytes("ASCII"));
String salt = "jkjkyt4"; // the i parameter - user’s id
String password = "^hjkh673!v@!a89mz+%5rT"; // application specific
MessageDigest digester = MessageDigest.getInstance("SHA-1");
digester.update((salt + password).getBytes("UTF-8"));
byte[] key = digester.digest();
SecretKeySpec secretKey = new SecretKeySpec(key, 2, 16, "AES");
String appIV = "SampleIV12345678";// application specific
IvParameterSpec iv= new IvParameterSpec(appIV.getBytes("UTF-8"));
Cipher cipher = Cipher.getInstance("AES/CBC/PKCS5Padding");
cipher.init(Cipher.DECRYPT_MODE, secretKey, iv);
byte[] decryptedV = cipher.doFinal(encryptedV, 0, encryptedV.length);
String v = new String(decryptedV, "UTF-8");
System.out.println(v); // foobarfoobarfoobarfoobarfoobar 
```

C#（使用 Base64 解码 vParameter 并将解密的数据解码为 UTF-8。还将 AES 对象重命名为 aes 而不是 tdes。）：

```
string vParameter = "Lq4aURUiyvKvEZBWMWpUr2wRSMu96E+J1UeHLTOhKEM="; //v parameter
byte[] encryptedV = Convert.FromBase64String(vParameter);
string salt = "jkjkyt4"; // the i parameter - user’s id
string password = "^hjkh673!v@!a89mz+%5rT"; // application specific
var sha1 = SHA1Managed.Create();
byte[] keyBytes = Encoding.UTF8.GetBytes(salt + password); //salt + password
byte[] key = sha1.ComputeHash(keyBytes);
byte[] finalKey = { 1, 2, 3, 4, 5, 6, 7, 8, 1, 2, 3, 4, 5, 6, 7, 8 };
string appIV = "SampleIV12345678";
byte[] iv = Encoding.UTF8.GetBytes(appIV); //iv
Array.Copy(key, 2, finalKey, 0, 16); //key 2, 16
AesManaged aes = new AesManaged();
aes.Key = finalKey;
aes.Mode = CipherMode.CBC;
aes.Padding = PaddingMode.PKCS7;
aes.IV = iv;
ICryptoTransform crypt = aes.CreateDecryptor();
byte[] cipher = crypt.TransformFinalBlock(encryptedV, 0, encryptedV.Length);
string decryptedText = Encoding.UTF8.GetString(cipher);
Console.WriteLine(decryptedText); // foobarfoobarfoobarfoobarfoobar 
```

# ruby-on-rails - 使用 2 个 has_many 关系还是 2 个 HABTM？

> ID：13923673
> 
> 赞同：0
> 
> 时间：2012-12-17T22:58:18.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有`Product`和`Categories`模型。

每个产品可以有多个类别。每个类别将有许多产品。

我最好做 2`HABTM`还是`has_many`关系？

有人告诉我，它`HABTM`已被弃用 - 这是真的吗？

此外，对于两者，我假设我将不得不使用连接表`categories_products`。我该如何创建它？只是定期迁移？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:30:16.293

顶部（数字）的示例。更新。

```
 class Product < ActiveRecord::Base
      has_many :category_products do
                def with_categories
                  includes(:category)
                end
              end
      has_many :categories, :through => :category_products

      def top_categories(number)
        category_products.with_categories.order("purchases_count DESC").limit(number).map {|c| c.category} # category included
      end

    end

    class Category < ActiveRecord::Base
      has_many :category_products do
                def with_products
                  includes(:product)
                end
              end
      has_many :products, :through => :category_products

      def top_products(number)
        category_products.with_products.order("purchases_count DESC").limit(number).map {|c| c.product} # product included
      end

    end

    class CategoryProduct < ActiveRecord::Base
      belongs_to :product
      belongs_to :category

      validates_uniqueness_of :product_id, :scope => :category_id

      # attribute :purchases_count, :default => 0
    end 
```

# haskell - Project Euler #2 大极限

> ID：13923675
> 
> 赞同：2
> 
> 时间：2012-12-17T22:58:38.310
> 
> 标签：haskell

我有一个解决[Project Euler Problem 2](http://projecteuler.net/problem=2)的 Haskell 解决方案，它适用于 400 万限制以及高达 10^100000 的限制，在我的机器上只需要几秒钟。

但是对于任何更大的值，例如 10^1000000，计算不会及时返回，如果有的话（尝试将其放置几分钟）。这里的限制因素是什么？

```
evenFibonacciSum :: Integer -> Integer
evenFibonacciSum limit = 
  foldl' (\t (_,b) -> t + b) 0 . takeWhile ((<=limit) . snd) . iterate doIteration $ (1,2) where
    doIteration (a, b) = (twoAB - a, twoAB + b) where
      twoAB = 2*(a + b) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T00:13:42.783

问题是您正在对（偶数）斐波那契数进行求和。这意味着您必须全部计算。但

```
F(n) ≈ φ^n / √5, with  φ = (1 + √5)/2 
```

因此，您添加了很多大尺寸的`Θ(n)`位数，用于`F(n)`. 对于 的限制`10^1000000`，您需要大约 800000×2 个大于 的数字相加`10^500000`。通常，您需要`Θ(n)`将数字与`Θ(n)`位相加。

添加`d`数字[以任何基数]是一项`O(d)`操作。所以你的算法是指数的二次方。

为避免这种情况，请为`S(k)`第一个`k`偶数斐波那契数的总和找到一个封闭公式（提示：这是一个涉及*一个*斐波那契数的相对简单的公式），找到最大`k`的`F(3*k) <= limit`，然后使用公式和算法计算总和以`F(n)`计算`O(log n)`步骤例如[这里](http://hackage.haskell.org/packages/archive/arithmoi/0.4.0.3/doc/html/Math-NumberTheory-Lucas.html#v%3afibonacci)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:12:32.370

这里的问题似乎是您正在使用一个公式来计算需要线性时间的偶数斐波那契数。I如果你加倍你的限制，你的计算时间也会加倍。应该有一个只需要对数时间的算法（如果你把限制加倍，时间会改变一个常数值），但你的工作就是找出答案。我不会在这里破坏欧拉的答案。

# c# - 如何以编程方式禁用 IIS6 应用程序（不是虚拟目录）

> ID：13923676
> 
> 赞同：0
> 
> 时间：2012-12-17T22:58:57.553
> 
> 标签：c#, vb.net, iis-6

我正在寻找一种务实地删除 IIS6 应用程序（通过 vb 或 c#）的方法。通过 IIS 管理器，这就像导航到我要禁用的应用程序一样简单，右键单击属性并单击删除。这将使文件系统保持完整，并将文件夹从应用程序中删除。我已经看到很多关于如何删除整个虚拟目录和删除文件夹的信息，但我找不到任何解释如何简单地禁用应用程序的信息。

只是为了增加另一个复杂性，这些应用程序通常嵌套在几个文件夹深处，而不是根网站本身。但是，我确实知道它们的确切物理路径。

我一天中的大部分时间都在试图弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T00:12:45.800

对于这个问题，我能做的最好的事情就是停止并启动整个网站。如果您可以将您的应用程序移动到 IIS 中它自己的网站，这将满足您的需求。在此处阅读更多信息：http: [//adamprescott.net/2011/09/26/programmatically-start-stop-iis-web-sites-in-c/](http://adamprescott.net/2011/09/26/programmatically-start-stop-iis-web-sites-in-c/)

也可能值得考虑简单地将根目录重命名为“Foo.disabled”之类的名称。我知道这不是你要找的，但它会给你一个简单、直接的解决方案。由于您知道确切的物理路径，因此应该很容易确定当前状态并根据文件夹名称提供切换功能。我从来没有走这条路；我只是在大声思考。

# javascript - jQuery .html 和 .load

> ID：13923681
> 
> 赞同：0
> 
> 时间：2012-12-17T22:59:18.453
> 
> 标签：javascript, jquery

我正在尝试自学 jQuery，但我对 load() 方法有点不知所措。我正在处理 eBay 列表。是的，我知道 ebay 上不允许包含内容。但是，有一种解决方法已经存在了几年，而 ebay 似乎并没有对其进行打击。

```
var ebayItemID='xxxxxxxxxxxxxx'; // This is eBay code. I cannot edit it. 

<h1 id="title"> TO BE REPLACED</h1>

$(document).ready(function(){
var link = "http://www.ebay.com/itm/" + ebayItemID + "?item=" + ebayItemID +   &viewitem=&vxp=mtr";
var newTitle = $('#title').load(link + "#itemTitle");
$('#title').html(newTitle);
}); 
```

这有什么意义。我想在描述中显示项目标题，但我想动态地这样做，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:05:47.800

1.  load 不适用于不同的域（您的情况下是 ebay）
2.  load 会将内容直接设置为您的元素。您不能将其分配给 var。
3.  如果您想表明要从特定元素中提取内容，则需要在链接和元素 id 之间添加一个空格：

[您可以在jQuery 文档](http://api.jquery.com/load/)上找到更多信息

```
$('#title').load(link  + ' #itemTitle', function() {
  alert('Load was performed.');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:02:35.867

使用`load`时会将返回的 html 放入元素中（本例`#title`）。
所以你不需要`html`在它之后打电话。

# c++ - 类模板的单个成员可以部分特化吗？

> ID：13923684
> 
> 赞同：9
> 
> 时间：2012-12-17T22:59:23.787
> 
> 标签：c++, template-specialization

我遇到了一个有趣的观点，我无法解释或找到解释。考虑以下模板定义（使用 mingw g++ 4.6.2 编译）：

```
template <typename T, typename S>
class Foo
{
public:
    void f(){}
    void g(){}
}; 
```

如果我们愿意，我们可以完全专门化任何单个成员函数：

```
template <>
void Foo<char,int>::f() {} 
```

但部分特化失败，出现“无效使用不完整类型 'class Foo<...>'”错误：

```
template <typename T, typename S>
void Foo<T,S*>::f()
{
}

template <typename T>
void Foo<T,int>::f()
{
} 
```

我不知道为什么。这是为了避免一些我无法预见的问题而做出的有意识的设计决定吗？是疏忽吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T02:02:57.363

**部分**特化的概念只存在于类模板（由§14.5.5 描述）和成员模板（即模板类的成员本身就是模板函数，由§14.5.5.3/2 描述）。它不存在于类模板的普通成员中，也不存在于函数模板中——仅仅是因为标准没有描述它。

现在，您可能会争辩说，通过给出成员函数的部分特化的定义，例如

```
template <typename T>
void Foo<T,int>::f()
{ } 
```

您*隐式*定义了类模板的部分特化：`Foo<T,int>`. 然而，标准明确排除了这*一点：*

> (§14.5.5/2) 每个类模板部分特化是一个不同的模板，并且应为模板部分特化 (14.5.5.3) 的成员提供定义。
> 
> (§14.5.5.3/1) [...] 类模板部分特化的成员与主模板的成员无关。应定义以需要定义的方式使用的类模板偏特化成员；主模板成员的定义永远不会用作类模板部分特化成员的定义。[...]

后者意味着不可能通过简单地给出其成员之一的定义来*隐式*定义部分特化：该成员的存在本身不会来自主模板的定义，因此定义它等同于*定义*一个成员未*声明*的函数，这是不允许的（即使是非模板类）。

另一方面，对于类模板的成员函数，存在**显式特**化（或*完全特*化，你称之为）的概念。标准明确描述了它：

> （§14.7.3/1）以下任何一项的显式特化：
> [...]
> — 类模板的成员函数
> [...]
> 可以通过 template<> 引入的声明来声明；[...]

§14.7.3/14 描述了细节：

> (§14.7.3/14) 类模板的成员或成员模板可以显式地专门用于类模板的给定隐式实例化，即使成员或成员模板是在类模板定义中定义的。[...]

因此，对于成员的显式特化，类模板其余部分的实例化是隐式工作的——它派生自主模板定义，或任何部分特化（如果已定义）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T01:13:26.707

我试图从标准中找到一个简洁的引用，但我认为没有。事实是，不存在模板函数的部分特化（或者，就此而言，模板别名）。只有类模板可以具有部分特化。

让我们暂时忘记模板。在 C++ 中，类名和函数名之间有很大的区别。在给定范围内只能有一个类的定义。（你可以有各种声明，但它们都指的是 One True Class。）所以这个名字确实标识了这个类。

另一方面，函数名是一种组标识。您可以在一个范围内使用完全相同的名称定义任意数量的函数。当您使用函数名称来调用函数时，编译器必须通过查看各种可能性并将每个可能性的签名与提供的参数匹配来确定您真正指的是哪个函数。共享名称的各种功能之间没有关系；它们是完全独立的实体。

所以，没什么大不了的。这一切你都知道，对吧？但是现在让我们回到模板。

模板类的名称仍然是唯一的。尽管您可以定义部分特化，但您必须显式特化同一个模板类。这种机制表面上看起来像上面提到的函数名解析算法，但有很大的不同——其中之一是，与函数原型不同，您不能在同一范围内拥有两个具有不同类型模板参数的类模板。

另一方面，模板化函数不需要定义唯一名称。模板不会取代正常的函数重载机制。因此，当编译器试图弄清楚函数名的含义时，它必须考虑该函数名的所有模板化和非模板化声明，将模板化声明解析为一组模板参数分配（如果可能），然后一旦它有一个可能的函数对象列表，选择具有正常重载分辨率的最佳函数对象。

这是与模板化类模板参数解析完全不同的算法。它不能仅仅将提供的模板参数列表与声明的模板参数列表匹配，这就是它解析类模板的方式，它必须采用每个可能匹配的模板化函数（例如，至少具有正确数量的参数） ; 通过将提供的参数与模板统一来推断模板参数；然后将 resolve 特化添加到重载集以进行另一轮重载解析。

我想在这个过程中添加部分专业化解决方案也是可能的，但是部分专业化和函数重载之间的交互让我觉得很可能导致伪魔法行为。在这种情况下，没有必要，因此没有这样的机制。（你可以完全特化一个函数模板。完全特化意味着没有要推导的模板参数，所以这不是问题。）

这就是独家新闻：您不能部分专门化模板化函数，但没有什么能阻止您提供任意数量的同名函数模板。所有这些都将在重载决议中被考虑，并且像往常一样，最好的将获胜。

通常，这实际上足以满足您的重载需求。您应该像考虑普通函数一样考虑模板化函数：想出一种方法来根据提供的参数选择所需的函数。如果你觉得你真的需要在函数调用中提供模板参数，而不是让它们被推导，只需使函数成为模板类的（可能是静态的）成员，并将模板参数提供给类。

希望有帮助...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-17T23:09:59.507

我认为不同之处在于，当您执行以下第一个（有效）显式专业化时`f`：

```
template <>
void Foo<char,int>::f() {} 
```

您正在对`Foo<char,int>`. 但是当您尝试使用以下方法进行部分专业化时：

```
template <typename T>
void Foo<T,int>::f()
{
} 
```

编译器需要`Foo<T,int>`在进行特化之前隐式实例化，但由于`T`. 它失败了。

您可以使用以下代码检查是否属于这种情况：

```
template <typename T, typename S>
class Foo
{
public:
    void f(){}
    void g(){}
};

template <>
void Foo<char,int>::f() //line 11
{}

template <>
class Foo<char,int> //line 15
{}; 
```

它`g++`给出了错误：

```
test.cpp:15:7: error: specialization of ‘Foo<char, int>’ after instantiation
test.cpp:15:7: error: redefinition of ‘class Foo<char, int>’
test.cpp:2:7: error: previous definition of ‘class Foo<char, int>’ 
```

With`clang++`更清楚一点：

```
test.cpp:15:7: error: explicit specialization of 'Foo<char, int>' after instantiation
class Foo<char,int>
      ^~~~~~~~~~~~~
test.cpp:11:6: note: implicit instantiation first required here
void Foo<char,int>::f() 
     ^ 
```

# c# - 具有引用参数/参数或匿名函数的 Func / Action 委托

> ID：13923685
> 
> 赞同：7
> 
> 时间：2012-12-17T22:59:23.947
> 
> 标签：c#, delegates, lambda, inline, anonymous-function

我只是想知道，委托和内联 lambda 函数的确切语法`ref`和参数如何。`out`

这是一个例子

如果一个函数被定义为

```
 public void DoSomething(int withValue) { } 
```

可以通过以下方式创建函数中的委托

```
 public void f()
 {   
     Action<int> f2 = DoSomething;
     f2(3);
 } 
```

如果将原始函数定义为，该语法如何

```
 public void DoSomething(ref int withValue) { withValue = 3; } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T23:03:50.597

您需要为此方法签名定义一个新的委托类型：

```
delegate void RefAction<in T>(ref T obj);

public void F()
{
    RefAction<int> f2 = DoSomething;
    int x = 0;
    f2(ref x);
} 
```

.NET Framework 不包含此类型的原因可能是因为`ref`参数不是很常见，而且如果为每个可能的组合添加一个委托类型，所需类型的数量就会激增。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-17T23:04:16.170

您不能使用`Action`、`Func<T>`或内置委托，但在这种情况下需要定义您自己的委托：

```
delegate void ActionByRef<T>(ref T value); 
```

然后，鉴于此，您可以拥有：

```
int value = 3;
ActionByRef<int> f2 = DoSomething;
f2(ref value); 
```

# css-selectors - 与给定选择器匹配的节点的 YUI 第一个子节点

> ID：13923688
> 
> 赞同：1
> 
> 时间：2012-12-17T22:59:29.483
> 
> 标签：css-selectors, yui

我看过[类似标题的问题](https://stackoverflow.com/questions/10188508/how-to-select-the-first-child-node-with-class-via-css-selector)，但它们并不完全相同。

首先，我使用 YUI（3.2.0 与 Liferay 6.0 兼容）。

我已经有`Node`参考了。我的目标是获得`Node`与给定 CSS 选择器匹配的第一个孩子。起初，我是这样做的：

```
...
parse: function(node) {
    var title = node.one('>span, >div, >a, >h1');
    ...
},
... 
```

这适用于 Firefox、Chrome 和 IE 9+。但是，我们必须支持 IE 8。所以我深入研究并找到 w3c 参考说明：

> [子选择器由**两个或多个**以“>”分隔的选择器组成](http://www.w3.org/TR/CSS2/selector.html#child-selectors)

这似乎表明，根据规范，父母是必需的，尽管在实践中似乎并非如此。所以我再搜索了一下，发现 jQuery 实际上提到了这个特定的情况正在被弃用：

> [注意：$("> elem", context) 选择器将在未来的版本中被弃用。因此不鼓励使用它来代替使用替代选择器。](http://api.jquery.com/child-selector/)

我在 YUI 文档中找不到明确提及这种情况，但我仍然认为使用它并不安全（无论如何 IE8 都不支持它）。我尝试了很多东西，包括使用`*>span, *>div, ...`, `*:first-child+span, ...`，但它们没有用。所以我剩下的是：

```
var title = node.get('children').filter('>span, >div, >a, >h1').item(0); 
```

但这似乎不优雅且效率低下，因为它背后的代码会有很多循环（因为过滤器不会短路，我想要的只是第一次匹配）。有人有更好的建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:25:26.010

在这种情况下，也许退后一步是有意义的。目前，您的要求是“匹配此 CSS 选择器”。您能否将其框定为“获取此节点的第一个子节点，它是跨度、div、锚点或 h1”（或类似的东西？）

如果是这样，请放弃选择器引擎。相反，调用 node.get('children') 然后遍历生成的 NodeList - 您的迭代器函数可以简单地检查节点名称是否具有正确的值，如果是，则短路。这应该给你可靠的性能，并且应该是相当可读的。

# node.js - Node.js 和 Nginx 的负载均衡长轮询请求

> ID：13923691
> 
> 赞同：1
> 
> 时间：2012-12-17T22:59:48.497
> 
> 标签：node.js, nginx, erlang

什么是我可以用来支持大约 5000 万用户的最佳负载平衡策略和软件，每个用户都有 Http Long Polling/Websockets 请求（这很重要）。我现在正在尝试 Node.js + Nginx 选项，但我也听说过 Erlang。是否有已被证明可以处理此类负载的解决方案？

更新 - 我有一个错字。预计并发量约为 5000 万，而不是 5 亿。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:03:20.063

首先，5亿是美国人口的1.6倍。这个数字非常高，甚至可能过高。如果你真的需要扩展到这个数字，你需要一个策略来让不止一台机器工作。没有机器本身可以真正处理这个问题。单独的 TCP 套接字缓冲区很容易打破太字节的内存范围，特别是因为您想使用长轮询。我有一种预感，您的要求高于 Google 对长期连接的要求。

如果你想这样做，没有单一的技术可以做到。您需要使用几个不同的子系统，并且需要考虑如何存储数据、如何移动数据等等。考虑到一个相当大的集群，我认为 Node.js 或 Erlang 作为拼图的一部分确实是不错的选择。但这并不能解决为 5 亿用户存储数据的问题。

# php - 将价值传递给后续页面

> ID：13923702
> 
> 赞同：0
> 
> 时间：2012-12-17T23:00:29.953
> 
> 标签：php, mysql

有没有办法继续传递一个值，在第一个（或更早）下拉选择表单中提交到后续处理代码/文件 - 在第一个处理文件之后？

这就是我想要做的：我为鞋类创建了一个数据库（尺寸、类型、样式表），然后我创建了一个名为“syle_in_size”的查找表，它的大小与样式相关。这个想法是让查询从这个表开始，以便一切都基于用户在搜索开始时选择的 SIZE。从那里，将确定具体的鞋类（尺寸、款式和类型）。

所以我想出了从一个下拉/选项表传递到另一个的代码（我知道，不同的页面***我已经看到建议和页面在一个页面中完成所有操作，但我想连续执行 -部分是作为一个设计元素，也因为我不知道 javascript，因为我几个月前才开始编程——一次只使用一种语言）。

这是我所拥有的：

尺寸表

```
+--------+------+
| sizeid | size |
+--------+------+
|    7.0 |  7.0 |
|    7.5 |  7.5 |
|    9.0 |  9.0 |
|    9.5 |  9.5 |
|   11.0 | 11.0 |
+--------+------+ 
```

类型表

```
+--------+---------+
| typeid | type    |
+--------+---------+
|      1 | Shoes   |
|      2 | Boots   |
|      3 | Sandals |
+--------+---------+ 
```

风格表

```
+---------+--------+------------+
| styleid | typeid | style      |
+---------+--------+------------+
|       1 |      1 | Athletic   |
|       2 |      1 | Lace-up    |
|       3 |      1 | Loafers    |
|       4 |      1 | Moccasins  |
|       5 |      2 | Combat     |
|       6 |      2 | Hiking     |
|       7 |      2 | Riding     |
|       8 |      3 | Flip Flops |
|       9 |      3 | Slide      |
+---------+--------+------------+ 
```

STYLE_IN_SIZE 表

```
+---------------+--------+---------+
| sizeinstyleid | sizeid | styleid |
+---------------+--------+---------+
|             1 |    7.0 |       1 |
|             2 |    7.5 |       1 |
|             3 |   11.0 |       1 |
|             4 |    7.5 |       2 |
|             5 |    9.0 |       2 |
|             6 |    7.5 |       3 |
|             7 |   11.0 |       3 |
|             8 |    7.0 |       4 |
|             9 |    7.5 |       4 |
|            10 |    9.0 |       4 |
|            11 |   11.0 |       5 |
|            12 |    9.0 |       6 |
|            13 |   11.0 |       6 |
|            14 |    7.5 |       7 |
|            15 |    9.0 |       7 |
|            16 |   11.0 |       7 |
|            17 |    7.5 |       8 |
|            18 |    9.0 |       8 |
|            19 |   11.0 |       8 |
|            20 |    7.0 |       9 |
+---------------+--------+---------+ 
```

第一页：SELECT_SIZE.php

```
<?php

$con = mysql_connect("localhost", "xxxxx", "xxxxx") or die('Could not connect to server');
mysql_select_db("footwear", $con) or die('Could not connect to database');

echo "<form action=\"select_type.php\" method=\"get\">\n";

echo "<select name=\"size\">\n";

$query="SELECT sizeid,size FROM size WHERE sizeid";

$result=mysql_query($query);

      while($row=mysql_fetch_array($result,MYSQL_ASSOC))

      {
          $sizeid= $row['sizeid'];
          $size= $row['size'];
          echo "<option value=\"$sizeid\">$size</option>";

      }

      echo "</select>\n";
      echo "<input name=\"submit\" type=\"submit\" id=\"sizeid\" value=\"submit\" />\n";
      echo "</form> \n";

?> 
```

第一个处理页面：SELECT_STYLE.php 用户选择尺码后，代码会查找所有仅适用于该尺码的鞋类类型。你会注意到 9.5 中没有——那是我的小测试。

```
<?php

$con = mysql_connect("localhost", "xxxxx", "xxxxx") or die('Could not connect to server');
mysql_select_db("footwear", $con) or die('Could not connect to database');

$sizeid= $_GET['sizeid'];
$size= $_GET['size'];

$query="SELECT sizeid,size FROM size WHERE sizeid=$size";

$result = mysql_query($query) or die(mysql_error());

$row = mysql_fetch_array($result, MYSQL_ASSOC) or die(mysql_error());

$sizeid= $row['sizeid'];
$size= $row['size'];

{
echo "<form action=\"select_style.php\" method=\"get\">\n";

echo "<select name=\"type\">\n";

$query="SELECT DISTINCT type.typeid, type, style_in_size.sizeid FROM style_in_size, type, style, size
WHERE style_in_size.sizeid=$sizeid
AND style_in_size.styleid = style.styleid
AND style.typeid= type.typeid
GROUP BY type";

      $result=mysql_query($query);

      while($row=mysql_fetch_array($result,MYSQL_ASSOC))

      {

          $sizeid = $row['sizeid'];
          $size= $row['size'];
          $typeid = $row['typeid'];
          $type=$row['type'];

          echo "<option value=\"$typeid\" \"$sizeid\">$type $sizeid</option>";
//I want only the "type" /$type to show in the dropdown but included SIZE for now to see if it would help pass the value to the next page
      }

      echo "</select>\n";
      echo "<input name=\"submit\" type=\"submit\" id=\"typeid\" value=\"submit\" />\n";

      echo "</form> \n";
}

?> 
```

传递到我想显示类型和大小的这个页面（现在，因为我想为基于大小的样式创建另一个下拉列表。但是如果我无法让大小显示在这个页面上，那么我就无法继续) SELECT_STYLE.php

```
<?php

$con = mysql_connect("localhost", "xxxxx", "xxxxx") or die('Could not connect to server');
mysql_select_db("footwear", $con) or die('Could not connect to database');

$sizeid = $_GET['sizeid'];
$size= $_GET['size'];
$typeid = $_GET['typeid'];
$type=$_GET['type'];

$query = "SELECT  type, style_in_size.sizeid FROM size, type, style, style_in_size
WHERE type.typeid=$type
AND style_in_size.styleid = style.styleid
AND style.typeid= type.typeid
AND style_in_size.sizeid = size.sizeid";

$result = mysql_query($query) or die(mysql_error());

$row = mysql_fetch_array($result, MYSQL_ASSOC) or die(mysql_error());

$sizeid = $row['sizeid'];
$size= $row['size'];
$typeid = $row['typeid'];
$type=$row['type'];

{
    echo "You've chosen $type in size $size ";
} 
```

?>

如果我选择“Sandals”，前面的代码只会显示“You've selected Sandals in”；尺寸未显示/未通过。

我尝试了以下但没有任何效果：

```
$query = "SELECT  type.typeid, type, style_in_size.sizeid FROM size, type, style, style_in_size
WHERE type.typeid=$type
AND sizeid = $sizeid
AND size.sizeid = style_in_size.sizeid
AND style_in_size.styleid = style.styleid
AND style.typeid= type.typeid"; 
```

还：

```
$query = "SELECT  type.typeid, type, style_in_size.sizeid FROM size, type, style, style_in_size
WHERE style_in_size.sizeid = $sizeid
AND size.sizeid = style_in_size.sizeid
AND style_in_size.styleid = style.styleid
AND style.typeid= type.typeid
AND typeid=$type"; 
```

我希望我以一种有意义的方式写了我的问题。非常感谢您的帮助和意见。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:15:44.933

考虑到您在多个页面上执行此操作，最好的解决方案可能是使用会话（[请参见此处](http://php.net/manual/en/session.examples.basic.php)）。

例如，当您获得可以将其存储在会话中的大小时：

```
$_SESSION['size'] = $size; 
```

在后面的页面中，您可以检索到：

```
$sizeFromAPreviousPage = $_SESSION['size']; 
```

（注意：确保您`session_start()`在使用会话的页面开始时调用）。

同样正如查尔斯提到的，您应该采取措施防止 SQL 注入。mysql_* 现在已弃用。

# java - GWT 是如何工作的，或者更确切地说，GWT 是如何将代码加载到 app.html 文件中的？

> ID：13923716
> 
> 赞同：2
> 
> 时间：2012-12-17T23:01:29.737
> 
> 标签：java, javascript, gwt, mgwt

我想知道`rootPanel`（在 entryClass 中）到底是什么，以及 GWT 如何通过 rootpanel 将 Java 代码加载到 appname.html 文件中。那里到底发生了什么？根面板和 HTML 文件之间的联系在哪里？

我找不到任何详细解释这个过程的方面。如果有人可以解释它或向解释此问题的网站发送一些好的链接，那将非常有帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T23:57:11.150

你检查过`RootPanel`课程的来源吗？

有一种方法`RootPanel get(String id)`可以根据您传入的元素 ID 从页面返回元素（嗯，小部件）。如果您没有传递任何内容，例如请求`get()`或`get(null)`您将收到`<body>`请求的 RootPanel 实例。

所以，你有你的 index.html 内容：

```
<body>
<div id="myPanel"></div>
</body> 
```

在里面。

在`onModuleLoad()`你的入门课程的方法中，你做

```
FlowPanel myNewDiv = new FlowPanel();
// add some styles, more elements and event handlers to myNewDiv
// ...
RootPanel.get("myPanel").add(myNewDiv); 
```

这会将您的新 div 作为子项添加到`myPanel`最初位于 html 文件中的 div 中。

这有帮助吗？

# objective-c - 故事板元素在设备上的大小不正确

> ID：13923721
> 
> 赞同：1
> 
> 时间：2012-12-17T23:02:08.797
> 
> 标签：objective-c, ios, user-interface, storyboard

在情节提要中，我将一个表格视图元素放入子类 UIView 中。该元素没有出现在 iPad 设备上，但我运行它的方式与它出现在情节提要中的相同。这也发生在我放入故事板的其他内容中。下面是故事板中出现的屏幕截图，以及 UI 宽度/高度信息。

![正确的用户界面](../Images/9710f0bbbd00fa192b9a3a0434e37979.png)

这里是在 iPad 上运行的 UI 文件的描述。

[https://gist.github.com/4323186](https://gist.github.com/4323186)（将其直接嵌入到帖子中会给我带来问题）

您会注意到 tableview 被明确设置为 178 宽度，并且在描述中显示为 276 宽度。我最初的想法是，也许一个单元格迫使父级变大（我对 iOS UI 开发非常陌生），但深入研究显示原型单元格，它的宽度似乎是由它的父级在 178 处定义的。图像视图和标签也出现在不正确的位置，如下面的第二张图片所示。

![iPad 上的错误用户界面](../Images/7d2fe359c16db48f12157519cf8e9ab4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:47:15.387

尝试在检查器面板中为所有恶意视图关闭所有这些 Autosizing 约束，并仔细添加您需要的那些。在所有约束条件下，如您的第一个屏幕截图所示，父视图中的任何更改`bounds`都可能使这些子视图意外地尝试重新调整。

# jquery - 从空的 TD 中删除样式

> ID：13923726
> 
> 赞同：0
> 
> 时间：2012-12-17T23:02:52.570
> 
> 标签：jquery

> **可能重复：**
> [定位一个空的 <li>](https://stackoverflow.com/questions/5489162/target-an-empty-li)

我有一个带有值的表。可能有一些单元格中没有值。

我需要从那些空单元格中删除样式。

有没有办法用 jQuery 选择空的 TD？

```
<table>
<tr>
    <td class="val">1</td>
    <td class="val">2</td>
    <td class="val"></td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T23:04:39.690

您可以使用`:empty`选择器：

```
$('td:empty'); 
```

如果要删除该类，可以使用`removeClass`方法：

```
$('td:empty').removeClass('val'); 
```

但是，如果 TD 元素包含空格字符，`:empty`则不选择该元素，在这种情况下，您可以使用`filter`方法：

```
$('td').filter(function(){
     return !$.trim(this.innerHTML);
}).removeClass('val') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:04:54.583

你可以做这样的事情

```
$(".val:empty").removeClass("val"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:05:28.960

您可以使用`:empty`.

```
$('td:empty') 
```

[**演示**](http://jsfiddle.net/eHmVK/) [参考](http://api.jquery.com/empty/)

# mysql - Rails 停止迁移

> ID：13923738
> 
> 赞同：0
> 
> 时间：2012-12-17T23:04:02.870
> 
> 标签：mysql, ruby-on-rails, migration

它给出了以下错误：

```
Mysql2::Error: Table 'aperture_developement.content_pages' doesn't exist: SHOW FULL FIELDS FROM `content_pages` 
```

这很奇怪，因为它应该尝试创建该表。

移民：

```
class CreateContentPages < ActiveRecord::Migration
  def change
    create_table :content_pages do |t|
      t.string :title
      t.string :permalink
      t.string :subtitle
      t.text :content

      t.timestamps
    end
  end
end 
```

[完整的跟踪在这里](http://pastebin.com/VkH5thXt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:31:51.060

您可能在 ActiveAdmin 中设置了一个过滤器或其他设置，用于检索`ContentPages`并且您需要将其包装在`proc`. 看到这个问题：

[https://github.com/gregbell/active_admin/issues/1360](https://github.com/gregbell/active_admin/issues/1360)

# c# - 将控件拖放到 Windows 窗体设计器上什么都不做

> ID：13923742
> 
> 赞同：0
> 
> 时间：2012-12-17T23:04:27.697
> 
> 标签：c#, controls, visual-c#-express-2010

每当我尝试将自定义控件拖放到可视表单设计器上时，它都不会加载并且不会添加到表单中（即使突出显示控件区域也不会说它在那里）。但是，当我拖动其他自定义控件（我制作的控件）时，它们会完美地显示在表单/视觉设计器上。我正在使用 Visual C# 2010，我的自定义控件是一个类设置，如下所示：

```
class MyControl : UserControl
{
    //...
} 
```

我也尝试过更改`UserControl`但`Control`没有任何反应，它仍然没有出现。如果有帮助，我可以截取一些屏幕截图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:26:57.260

事实证明，该控件与可视化设计器使用的命名空间不同。我所要做的就是将我的控件的命名空间改回原来的样子，然后它就可以工作了。

# jquery - 如何在不改变列表高度的情况下更改溢出：在列表中隐藏为可见

> ID：13923751
> 
> 赞同：0
> 
> 时间：2012-12-17T23:05:13.657
> 
> 标签：jquery, overflow

我正在尝试做一些我在 alltop.com 等网站上看到的效果，其中有一个列表，当你将鼠标悬停在一个标题上（溢出设置为隐藏）时，你可以看到整个标题，而整个列表没有'不动，如可以在这里看到：

[http://screencast.com/t/fK5n4X3Fg](http://screencast.com/t/fK5n4X3Fg)

（注意：在工具提示类型效果中显示内容还有另一种效果，但我对此不感兴趣 - 已经解决了这个问题）。

这是我尝试过的……这是文字：

```
 <div id="wprssmi_alltop_wrapper"><ul class="wprssmi_alltop_list"><li id="wrapper" ><h3    class="list_title"><a href="">BBC Sports Personality of the Year - live coverage</a></h3></li><li id="wrapper"><h3 ><a href="">Serious vulnerability reportedly leaves Samsung Galaxy S III and other devices wide open to malware</a></h3></li><li id="wrapper"><h3><a href="">Lanza’s body found with ammo for even more carnage</a></h3></li></ul></div> 
```

这是jQuery

```
 jQuery('[id^=wrapper]').hover(function () {

    var cssObj = {
   'overflow': 'visible'
    }

   jQuery(this).css(cssObj);
  jQuery(this).next.hide();
 }); 
```

它本质上使用 jQuery 悬停在列表项上并尝试将溢出更改为可见并获取下一项并将其隐藏起来，就像它在 alltop.com 上工作一样......不幸的是我无法让它工作。

[http://jsfiddle.net/amweiss/xFmsJ/9/](http://jsfiddle.net/amweiss/xFmsJ/9/)

有谁知道你是如何获得这种效果的以及我如何修复代码？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:32:34.063

alltop.com 上的效果不是用 jQuery 完成的——它是纯 CSS。这是您[更新的 jsfiddle](http://jsfiddle.net/xFmsJ/27/)。

所有人`<li>`都具有`position:relative`并`height`设置为一行文本的高度（在他们的情况下为 1.25em）。

`<h3>`里面`<li>`都有`position:absolute`和`overflow:hidden`。_

**在 hover**、`<h3>`get`overflow:auto`和`height:auto`更大`z-index`的情况下，它们会呈现在以下列表项的上方。他们还得到一个白色背景来覆盖其他项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:34:44.297

好的，我已经看过视频，我知道你想要实现什么，我认为你的方法不是最好的，但我可以帮助你修复你的代码。

好的，首先，标记，你有 3 个共享相同 id 的 li 元素，一个带有 ID 的 jQuery 选择器只会返回第一个匹配的元素，所以不会返回你的所有 li 元素后。

只需将您的 ID 更改为类并做一个简单的`jQuery('.wrapper')`

对于第二件事，当您需要在 h3 上执行时，您正在应用溢出：在 li 元素上可见。

```
jQuery('.wrapper').hover(function(){
  // here jQuery(this) is returning the li, you need to find the h3
  jQuery(this).find('h3').css(cssObj);
}); 
```

在您的示例代码中，您忘记了下一个函数的 ()，这就是为什么不隐藏下一个 li 元素的原因。

```
jQuery(this).next().hide(); 
```

最后一件事，当你做悬停效果时，你可以设置两个功能，一个用于悬停，一个用于悬停

```
jQuery('.wrapper').hover(function(){
  // This will execute on the hover in
  jQuery(this).find('h3').css('overflow', 'visible');
  jQuery(this).next().hide();
}, function(){
  // This will execute on the hover out
  // Restore everything to default
}); 
```

希望这可以帮助

# javascript - 有没有办法删除一个脚本自动完成对象？

> ID：13923752
> 
> 赞同：1
> 
> 时间：2012-12-17T23:05:17.647
> 
> 标签：javascript, autocomplete, prototypejs, scriptaculous

我使用 scriptaculous 自动完成来创建一大页可编辑字段，字段的数量是动态的，因此我创建了一个数组来保存所有自动完成对象。

然后，我需要允许用户在页面的每个位置添加一个字段，因此，我创建了一个 javascript 函数来重做文本字段的序列，并重新创建所有自动完成的。

但是有一个问题，旧的自动完成也出现在页面上，即使将数组的长度设为零，旧的自动完成也是野兔。

有没有办法完全删除原型对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T21:14:25.340

*   自动完成器保存对输入字段和更新器的引用（具有可能选择的弹出元素）
*   输入字段和更新程序保存对事件观察者的引用（自动完成器对象中的方法）

您至少需要存储在自动完成器对象中的明确引用：

```
autocompleter.element = null;
autocompleter.update = null; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T23:10:58.407

要删除 DOM 引用，请执行

```
bigAutoCompleteObject = null; 
```

# macos - 具有 GCC 4.8 的 Mac 可执行文件，不依赖于 MacPorts

> ID：13923753
> 
> 赞同：0
> 
> 时间：2012-12-17T23:05:20.000
> 
> 标签：macos, gcc, ld, libgcc

```
gcc-mp-4.8 test.c
otool -L a.out 
```

显示可执行文件与 链接`/opt/local/lib/gcc48/libgcc_s.1.dylib`，这不是我想要的，因为该路径不会在股票 Mac OS X 系统上存在。

如何使用 MacPorts 安装的 GCC 4.8 来构建与 MacPorts 无关的可执行文件`/usr/lib/libgcc_s.1.dylib`？

我试过添加`-L/usr/lib/ -lgcc_s.1`参数，但这并没有改变任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:13:27.953

gcc 并不是要链接到旧版本的库。但是，您应该能够改为静态链接。

# java - Tomcat 无法部署 .war

> ID：13923759
> 
> 赞同：21
> 
> 时间：2012-12-17T23:06:22.783
> 
> 标签：java, rest, tomcat, war, illegalstateexception

我正在尝试按照[本](http://www.theserverside.com/tip/RESTful-Web-services-made-easy)教程创建一个简单的 REST Web 服务，但是我将其部署在 tomcat 上并引发异常：

```
FAIL - Application at context path /restful could not be started
FAIL - Encountered exception org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/restful]] 
```

我四处寻找解决方案，发现了这个[问题](https://stackoverflow.com/questions/8512588/tomcat-lifecycleexception-when-deploying)和这个[问题](https://stackoverflow.com/questions/11191025/fail-encountered-exception-org-apache-catalina-lifecycleexception)，他们让我认为这是一个 servlet 映射问题，但我不知道如何解决它！

这是我的日志文件：

```
18/12/2012 9:57:16 AM org.apache.catalina.startup.HostConfig deployWAR
SEVERE: Error deploying web application archive /opt/tomcat7/webapps/restful.war
java.lang.IllegalStateException: ContainerBase.addChild: start:
org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/restful]]
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:904)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:977)
    at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1655)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:619) 
```

这是我的 web.xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app
    xmlns="http://java.sun.com/xml/ns/javaee" version="3.0"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
        http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

  <servlet>
    <servlet-name>RestfulContainer</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>com.sun.jersey.config.property.packages</param-name>
        <param-value>com.mcnz.ws</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>RestfulContainer</servlet-name>
    <url-pattern>/resources/*</url-pattern>
  </servlet-mapping>    

</web-app> 
```

并且冒着给你太多信息的风险，这是我的文件夹结构的 ls ：

```
.:
WEB-INF

./WEB-INF:
classes
lib
web.xml

./WEB-INF/classes:
com

./WEB-INF/classes/com:
mcnz

./WEB-INF/classes/com/mcnz:
ws

./WEB-INF/classes/com/mcnz/ws:
HelloWorldResource.class
HelloWorldResource.java

./WEB-INF/lib:
asm-3.1.jar
jackson-core-asl-1.9.2.jar
jackson-jaxrs-1.9.2.jar
jackson-mapper-asl-1.9.2.jar
jackson-xc-1.9.2.jar
jersey-client-1.16.jar
jersey-core-1.16.jar
jersey-json-1.16.jar
jersey-server-1.16.jar
jettison-1.1.jar
jsr311-api-1.1.1.jar 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-18T04:48:45.400

正如上面的评论所示，问题原来是应用程序 web.xml 在 servlet 定义中引用了一个 java 类。通过确保应用程序实际上包含该类，该问题得到了纠正。找到丢失的 jar 文件并将其放在 WEB-INF/lib 目录中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-15T01:15:11.167

我在让 ncwms 在 Apache Tomcat/8.5.38 上运行时遇到了类似的问题，显然我现在需要添加一些在最新 Java 版本中已删除的额外 Java 库。

（请参阅此处的详细信息：[如何解决 java.lang.NoClassDefFoundError: javax/xml/bind/JAXBException in Java 9](https://stackoverflow.com/questions/43574426/how-to-resolve-java-lang-noclassdeffounderror-javax-xml-bind-jaxbexception-in-j)）

更改在此文件中：/opt/tomcat/bin/catalina.sh

```
JAVA_OPTS="$JAVA_OPTS $JSSE_OPTS --add-modules java.xml.bind" 
```

但即使这对 ncwms 来说还不够。后来在导入数据集时遇到了问题，所以我恢复到不同版本的 java：

```
java -version
openjdk version "1.8.0_191"
OpenJDK Runtime Environment (build 1.8.0_191-8u191-b12-2ubuntu0.18.04.1-b12)
OpenJDK 64-Bit Server VM (build 25.191-b12, mixed mode) 
```

# php - __toString() 必须返回一个字符串值

> ID：13923760
> 
> 赞同：11
> 
> 时间：2012-12-17T23:06:30.277
> 
> 标签：php, object, tostring

有人可以告诉我我做错了什么吗？这是我第一次使用 __toString。我收到以下错误：`Catchable fatal error: Method users_class::__toString() must return a string value`

这是我使用 Smarty 对对象的调用：

```
 {assign var='udatas' value="$userObj->fetchUser(array('id'=>$ststres[ststval].to_id))"} 
```

这是对象。

```
class users_class {

protected $users_class;

public function __toString() {

    return $this->users_class;
}
  public function fetchUser(array $conditions){
            $db = Core::getInstance();

            $sql = "SELECT * FROM ".USERS." WHERE ";
            $i=0;
            $params = array();
            //$where = array();
            foreach ($conditions as $column => $value) {
            if (preg_match('/^[a-z-.-_]+$/', $column)) {
                if($i!=0){
                    $sql .= " AND ";
                }
            $sql .= "$column = ?";
            $params[] = $value;
            $i++;

    }
   }            
            //$sql .= implode(' AND ', $where);
            //$sql .= " order by title asc";    
            $res = $db->dbh->prepare($sql);
            $res->execute(array_values($params));
            return $res->fetch(PDO::FETCH_ASSOC);               
}   
   } 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-17T23:09:47.083

错误消息`... must return a string value ...`只是意味着 __toString() 的返回值必须是数据类型字符串的值。如果您的示例中的 $users_class 不打算成为字符串值，则必须在返回之前将其转换为字符串。

但是在阅读上面的示例时，在我看来 var $users_class 可能还没有被初始化。在这种情况下，将方法 __toString() 更改为：

```
public function __toString() {
    if(is_null($this->users_class)) {
        return 'NULL';
    }
    return $this->user_class;
} 
```

要使上述代码正常工作，您还需要对 smarty 代码进行更改。`value=`删除属性值周围的双引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-12T07:15:47.797

只需替换为： **return (string)$this->user_class;**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:14:14.370

您正在使用`$res->fetch(PDO::FETCH_ASSOC)`which 将返回任何数组。您正在将值作为标准对象访问。您需要强制转换为一个类，您可以尝试使用`PDO::FETCH_CLASS`而不是`FETCH_ASSOC`.

您包含的代码很难说。

# ios - 我可以从 xcode 获得位置箭头、重新加载、搜索按钮吗？

> ID：13923763
> 
> 赞同：0
> 
> 时间：2012-12-17T23:07:02.023
> 
> 标签：ios, xcode, icons

我想在我的应用程序中使用一些标准图标来创建我正在创建的自定义视图。我只需要带有 alpha 的图像。我怎样才能在不重新设计它们并且最好不必从网上下载它们的情况下获得它们？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:28:48.863

试试这个免费选项可能有你需要的一切，如果不是你可以获取其他来源[http://www.glyphish.com](http://www.glyphish.com)你可以从 sdk 获取图像但是不确定你是否被允许......

[或者甚至更好地使用它，它应该在 psd http://www.teehanlax.com/downloads/ios-6-gui-psd-iphone-5/](http://www.teehanlax.com/downloads/ios-6-gui-psd-iphone-5/)中有你需要的东西

# build - Gradle buildscript 依赖项

> ID：13923766
> 
> 赞同：205
> 
> 时间：2012-12-17T23:07:11.137
> 
> 标签：build, repository, gradle

`buildscript`在 gradle 构建部分或构建的根级别声明存储库有什么区别。

```
buildscript {
    repositories {
        mavenCentral();
    }
} 
```

相对

```
repositories {
    mavenCentral();
} 
```

* * *

## 回答 #1

> 赞同：186
> 
> 时间：2012-12-18T12:15:42.753

块中的存储库`buildscript`用于获取依赖项的`buildscript`依赖项。这些是放在构建的类路径中的依赖项，您可以从构建文件中引用它们。例如互联网上存在的额外插件。

根级别的存储库用于获取项目所依赖的依赖项。因此，编译项目所需的所有依赖项。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2018-01-26T15:05:27.037

我想给你一个清晰的概念。出于这个原因，我附上**了 build.grade**快照代码以便更好地理解。

**构建脚本依赖项：**

```
buildscript {
    repositories {
        maven { url("https://plugins.gradle.org/m2/") }
    }

    dependencies {
        classpath 'net.saliman:gradle-cobertura-plugin:2.3.2'
        classpath 'com.netflix.nebula:gradle-lint-plugin:latest.release'
    }
} 
```

**根级别/核心依赖项：**

```
repositories{
    mavenLocal()
    maven { url("https://plugins.gradle.org/m2/") }
    maven { url "https://repo.spring.io/snapshot" }
}

dependencies {
        //Groovy
        compile group: 'org.codehaus.groovy', name: 'groovy-all', version: '2.3.10'

        //Spock Test
        compile group: 'org.spockframework', name: 'spock-core', version: '1.0-groovy-2.3'

        //Test
        testCompile group: 'junit', name: 'junit', version: '4.10'
        testCompile group: 'org.testng', name: 'testng', version: '6.8.5'
} 
```

所以，首先我想用一个词来澄清

> i) buildscript 依赖项 jar 文件将从 buildscript 存储库下载。**【项目外部依赖】**
> 
> ii) 根级依赖项 jar 文件将从根级存储库下载。**[对于项目依赖]**

这里，

“buildscript” 块只控制 buildscript 进程本身的依赖关系，而不是应用程序代码。作为各种 gradle 插件`gradle-cobertura-plugin`，`gradle-lint-plugin`可以从 buildscript repos 中找到。这些插件不会被引用为应用程序代码的依赖项。

但是对于项目编译和测试运行的 jar 文件，`groovy all jar, junit and testng jar`可以从根级存储库中找到。

**另一件事**，`maven { url("https://plugins.gradle.org/m2/") }`部分可以在两个块中使用。因为它们用于不同的依赖项。

**资源链接：** [buildscript 闭包和核心中的依赖关系之间的区别](https://discuss.gradle.org/t/what-is-difference-between-buildscript-classpath-and-dependencies-compile/4290)

# c# - 如何让用户在 Web 应用程序中备份他们的数据？

> ID：13923783
> 
> 赞同：2
> 
> 时间：2012-12-17T23:08:25.957
> 
> 标签：c#, asp.net, mysql

我有一个 ASP.NET Web 应用程序，后面有一个 MySQL 数据库。我的用户希望在单击按钮时备份他们的数据。我该怎么做？

我正在考虑使用 mysqldump 创建一个数据库并让用户下载这个文件。但这是最简单的方法吗？那么性能呢？我目前有 250 名用户同时使用 Web 应用程序。所以当他们都按下备份按钮时......我不想让我的服务器在创建备份时挂起。

有人有想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T15:26:34.690

你可以试试这个工具：**MySqlBackup.NET**，它是 MySqlDump 的替代品。

官方网站和文档 > [http://mysqlbackupnet.codeplex.com/](http://mysqlbackupnet.codeplex.com/)

**备份和下载 MySQL 数据库**

```
void Backup()
{
    string connection = "server=localhost;user=root;pwd=qwerty;database=test;";
    string fileOnDisk = HttpContext.Current.Server.MapPath("~/MyDumpFile.sql");
    // Example Result: C:\inetpub\wwwroot\MyDumpFile.sql
    string fileOnWeb = HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority) 
                       + "/MyDumpFile.sql";
    // Example Result: http://www.mywebsite.com/MyDumpFile.sql

    // Backup MySQL Database
    MySqlBackup mb = new MySqlBackup(connection);
    mb.ExportInfo.FileName = fileOnDisk;
    mb.Export();

    // Download the file
    Response.ContentType = "text/plain";
    Response.AppendHeader("Content-Disposition", "attachment; filename=MyDumpFile.sql");
    Response.TransmitFile(fileOnDisk);
    Response.End();
} 
```

**恢复 MySQL 数据库**

```
void Restore()
{
    string connection = "server=localhost;user=root;pwd=qwerty;database=test;";
    string fileOnDisk = HttpContext.Current.Server.MapPath("~/MyDumpFile.sql");
    string fileOnWeb = HttpContext.Current.Request.Url.GetLeftPart(UriPartial.Authority) 
                       + "/MyDumpFile.sql";
    // Upload the file
    if (FileUpload1.HasFile)
    {
        FileUpload1.SaveAs(fileOnDisk);

        MySqlBackup mb = new MySqlBackup(connection);
        mb.ImportInfo.FileName = fileOnDisk;
        mb.Import();
        Response.Write("Import Successfully");
    }
} 
```

从上面的示例中，**MySqlBackup.NET**将创建一个文件名**MyDumpFile.sql**（导出的 MySQL 数据库）。
您可以将文件缓存 5 或 10 分钟。如果任何用户想要在创建后的 5 或 10 分钟内获取导出的 MySQL 备份文件，将传输缓存文件供他/她下载。如果超过 5 或 10 分钟，将再次生成新的缓存文件。

我是这个工具的作者之一。

# asp.net - Connection.Close() 错误 ASP.NET

> ID：13923784
> 
> 赞同：1
> 
> 时间：2012-12-17T23:08:27.907
> 
> 标签：asp.net, database, connection

这是我发现的一个简单的数据插入脚本，它正在写入 access.db 这是我在以下代码中遇到的问题：

错误：第 16 行：Connection.Open()

如果你让我知道我应该在代码中简单地编辑什么，那就太好了。

非常感谢

```
 <%@ Page Language="VB" Debug="true"%>
<%@ Import Namespace="System.Data.Oledb" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script runat="server">

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs)
        If Page.IsPostBack = False Then
            Label1.Visible = False
        End If
    End Sub

    Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs)
        Dim Connection As New OleDbConnection("Provider=Microsoft.Jet.Oledb.4.0; Data Source=C:\inetpub\wwwroot\Thinkdebt\customers.mdb")
        Connection.Open()
        Dim Command As New OleDbCommand("INSERT INTO tblCustomers(FirstName," & _
        "LastName)VALUES(@FirstName,@LastName)", Connection)
        Command.Parameters.Add(New OleDbParameter("@FirstName", TextBox1.Text))
        Command.Parameters.Add(New OleDbParameter("@LastName", TextBox2.Text))
        Command.ExecuteNonQuery()

        Connection.Close()
        Label1.Text = "Record inserted."
        Label1.Visible = True

        TextBox1.Text = ""
        TextBox2.Text = ""
    End Sub

 </script>

<html xmlns="http://www.w3.org/1999/xhtml" >
<head id=Head1 runat="server">
<title>ASP.NET Form to Database Sample</title>
</head>
<body>
<div>
<h1>ASP.NET Form to Database</h1>
<form id="form1" runat="server">
First name:<asp:TextBox ID="TextBox1" runat="server" Text=""></asp:TextBox>
    <asp:RequiredFieldValidator ID="RequiredFieldValidator1" ControlToValidate="TextBox1" runat="server" ErrorMessage="Please enter a first name"></asp:RequiredFieldValidator><br /><br />
Last name:<asp:TextBox ID="TextBox2" runat="server" Text=""></asp:TextBox>
    <asp:RequiredFieldValidator ID="RequiredFieldValidator2" ControlToValidate="TextBox2" runat="server" ErrorMessage="Please enter a last name"></asp:RequiredFieldValidator><br /><br />

<asp:Button ID=Button1 runat="server" Text="Insert Record" OnClick="Button1_Click" />
<br />
<asp:Label ID=Label1 runat="server" Text=""></asp:Label>
</form>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:27:50.490

jet.Oledb.4.0 不适用于 64 位机器。

您可以将 Microsoft.ACE.OLEDB.12.0 用于 64 位系统。您可以检查它是 32 位还是 64 位系统。如果是 32 位，则使用 .JET.OLEDB，否则使用 ACE.OLEDB。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T23:35:36.860

您正在使用 Jet.OLEDB.4.0 驱动程序，在 64 位系统上运行时会出现该错误，最好安装新驱动程序 Microsoft Access Database Engine 2010 Redistributable

[http://www.microsoft.com/download/en/details.aspx?id=13255](http://www.microsoft.com/download/en/details.aspx?id=13255)

您还需要从“Provider=Microsoft.Jet.OLEDB.4.0;”更改连接字符串；“到”Provider=Microsoft.ACE.OLEDB.12.0;”</p>

来自我的博客的参考：'Microsoft.Jet.OLEDB.4.0' Office 2007/2010 Jet 驱动程序的 64 位版本

希望这可以帮助。

# jquery - 以两秒的间隔附加每个元素

> ID：13923786
> 
> 赞同：2
> 
> 时间：2012-12-17T23:08:41.927
> 
> 标签：jquery, html, css

我有一个包含一堆项目的 HTML 代码的变量。我想以两秒的间隔附加所有这些项目。我在下面编写的代码一次附加了所有项目。我不明白为什么它会这样做，`setTimeout()`因为`each()`.

```
var myVar = "<div class='item'>Item01</div>" +
            "<div class='item'>Item02</div>" +
            "<div class='item'>Item03</div>";

$(myVar).each( function() {
    var value = $(this);
    setTimeout( function {
        $('.item-list').append(value);
    }, 2000);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T23:14:41.300

尝试这个：

```
var myVar = "<div class='item'>Item01</div>" +
            "<div class='item'>Item02</div>" +
            "<div class='item'>Item03</div>";

$(myVar).each( function(index) {
    var value = $(this);
    setTimeout( function() {
        $('.item-list').append(value);
    }, 2000 * (index + 1));
}; 
```

## 解释

在您的原始代码中，循环发生得非常快。让我们假设循环的每次迭代需要 1 毫秒。这意味着第一项在 2001 毫秒后添加，第二项在 2002 毫秒后添加，第三项在 2003 毫秒后添加。

通过获取数组中项的索引，我们可以在 2000 毫秒后添加第一项，在 4000 毫秒后添加第二项，以此类推。

### 更新：修正语法错误。

# iphone - iOS 6 旋转不起作用

> ID：13923788
> 
> 赞同：1
> 
> 时间：2012-12-17T23:08:50.657
> 
> 标签：iphone, ios, cocoa-touch, uiinterfaceorientation

我已经覆盖了我的 UINavigationController 来实现这些方法：

```
-(BOOL)shouldAutorotate
{
    return [[self.viewControllers lastObject] shouldAutorotate];
}
-(NSUInteger)supportedInterfaceOrientations
{
    return [[self.viewControllers lastObject] supportedInterfaceOrientations];
}
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return [[self.viewControllers lastObject] preferredInterfaceOrientationForPresentation];
} 
```

[现在从我的第一个视图来看，我在这里](https://github.com/monospacecollective/MSNavigationPaneViewController)模态地展示这个 MSNavigationPaneViewController ，它就像一个 Facebook 侧滑动标签栏控制器。

我需要在此处显示的 1 个视图控制器仅显示横向，而应用程序的其余视图仅显示纵向。

因此，在我添加的所有其他视图控制器中：

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
}
- (BOOL)shouldAutorotate
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

在我想要的景观中，我添加了：

```
- (BOOL)shouldAutorotate
{
    return UIInterfaceOrientationMaskLandscape;
}
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
} 
```

然而，我所有的观点都在旋转。

如果我`shouldRotate`在这些其他视图上更改为 NO，那么它们会停留在 Portrait 并且我想要成为 Landscape 的视图可以旋转，但是我无法让它自行旋转。此外，一旦旋转，如果我回到另一个视图，`shouldRotate = NO;`它就无法旋转回纵向。

我已经在这工作了几个小时了，无法让它工作。

谢谢

编辑 - - -

我现在有这一半的工作，并开始了一个新问题，让自动旋转在[这里工作](https://stackoverflow.com/questions/13934807/trick-preferredinterfaceorientationforpresentation-to-fire-on-viewcontroller-cha)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T23:37:14.157

您似乎对在 shouldAutorotate 中返回的内容感到困惑。使用以下代码作为示例。

由于 iOS 正在调用应用程序的 shouldAutorotate 以响应来自加速度计的事件，因此它已经知道新的方向；如果您的应用回答“是”，则 iOS 可以根据支持的列表检查当前方向，并在您的应用不查询当前方向的情况下做出决定。

// iOS 6

```
- (BOOL)shouldAutorotate {
    return YES;
}

- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
} 
```

此外，您可以让呈现模态视图控制器的视图控制器通知它旋转。使用：presentViewController:animated:completion: 呈现视图控制器。presentModalViewController:animated: 如果您偶然使用它，则不推荐使用它。

如果添加`application:supportedInterfaceOrientationsForWindow:`，请确保遵循下面的代码指南。该文档指出，如果您`supportedInterfaceOrientations`在 VC 上实现它应该覆盖应用程序委托。但是，人们已经注意到，如何将其添加`rootViewController`到主窗口会有所不同。

利用：

```
window.rootViewController = viewController 
```

代替：

```
[window addSubview:viewController.view]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T07:05:32.390

我是这样做的

```
-(BOOL) shouldAutorotate{
    return YES;
}

-(NSUInteger) supportedInterfaceOrientations{
    if ([self.visibleViewController isKindOfClass:[ZoomPictureViewController class]]) {
        return UIInterfaceOrientationMaskAll;
    }
    return UIInterfaceOrientationMaskPortrait;
} 
```

确保您已单击 Xcode 中的方向按钮以启用所需的方向并在supportedInterfaceOrientations 方法中返回方向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T23:57:50.143

首先，确保您已单击 Xcode 中的方向按钮以启用所需的方向。然后花几个小时在谷歌上搜索人们在 iOS 6 中遇到的所有错误和问题。再花几个小时尝试各种技术。

[这篇文章](https://stackoverflow.com/a/13872283/581994)包含一些线索，但远非最终定论。

特别注意，您现在必须识别“根视图控制器”并将大部分（但不是全部）旋转控件集中在那里，而不是在每个视图控制器中实现它。

# hosting - 我可以使用 Google Drive 来托管 Facebook 应用吗？

> ID：13923789
> 
> 赞同：1
> 
> 时间：2012-12-17T23:08:53.330
> 
> 标签：hosting, google-drive-api, facebook-apps

我正在尝试为 Facebook 构建一个小型实验应用程序。由于它只包含静态文件，我决定尝试使用 Google Drive 进行托管。我一将 Google Drive 地址写入 Facebook 画布，就尝试启动该应用程序。我得到的是 Chrome js 控制台中的白屏和两条错误消息：

> [https://googledrive.com/host/myWebViewLink/](https://googledrive.com/host/myWebViewLink/) POST 405（不允许的方法）
> 
> [https://googledrive.com/host/myWebViewLink/:1](https://googledrive.com/host/myWebViewLink/:1)拒绝显示文档，因为 X-Frame-Options 禁止显示。

我尝试在不同网站的 iframe 中启动该应用程序，并且运行良好，因此错误可能不在 Google Drive iframe 限制中。

此外，我尝试将不在谷歌驱动器中托管的网页链接到 Facebook 画布，它再次对我有用，所以错误可能不在应用程序配置中。

你能帮我解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:55:53.917

首先，检查您在问题中提供的链接，因为它们无效（*404 not found*）。

至于*405 method not allowed*，您可以使用[网络嗅探器](http://web-sniffer.net/?url=https://googledrive.com/host/0BzEbtMoF6IXbaVN2Qmx1em9qS0k/&gzip=yes&http=1.1&type=POST)检查自己，google Drive 不支持 POST 方法，仅支持 HEAD 和 GET。

至于*X-Frame-Options*，Google Drive 不会在 GET 请求中显示此标头，因此您可以将它们放在框架中，就像在[GDrives](http://gdriv.es)上一样。

# kdtree - Quadtree 和 kd-tree 分裂和 mandelbrot 集？

> ID：13923792
> 
> 赞同：0
> 
> 时间：2012-12-17T23:09:07.803
> 
> 标签：kdtree, quadtree, mandelbrot

我已经阅读了有关四叉树或 kd-tree 拆分和 mandelbrot 集的信息，但是当第一次拆分之前的矩形和框架位于 mandelbrot 集中或具有相同的迭代深度并且算法从平铺返回时怎么办？当矩形太大时，如何强制跳过填充矩形？

# java - Java 文件 IO 中的 Excel 字节流

> ID：13923793
> 
> 赞同：0
> 
> 时间：2012-12-17T23:09:09.457
> 
> 标签：java, fileinputstream

我对java知之甚少。所以请帮助我朝着正确的方向前进。

我的要求是我必须以 HTML 形式上传一个 excel，并且我必须在 servlet 的对象中有 excel 字节数组。没有第三方api这可能吗？

我知道 Apache POI API 会给我答案。但根据我的要求，我不能使用任何第三方 api。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T23:23:30.967

这是通过 Struts 表单 bean 和表单文件实现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:08:41.643

为了最大限度地缩短开发时间，最好使用第三方库。

其他选择是，

*   您可以编写一个 VB 脚本来解析 Excel 并从 java 调用它。
*   您可以编写使用 COM 并产生所需结果的 C++ 应用程序。然后这可以在 Java 中作为本机公开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T04:16:38.143

在Java中没有任何第三方库的情况下解析标准的excel文件是不可能的，只有强制所有用户必须上传CSV格式的文件，这很容易处理。

# javascript - 如何在 QML 中执行“is_a”、“typeof”或 instanceof？

> ID：13923794
> 
> 赞同：33
> 
> 时间：2012-12-17T23:09:12.923
> 
> 标签：javascript, qml

我想浏览 QML 组件列表并选择一种类型：

```
for (var i = 0; i < controls.children.length; ++i) {
     if ( typeof (controls.children[i].height) == "QDeclarativeRectangle")
     {
        // do stuff
     }
} 
```

如何做到这一点？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2018-01-26T11:36:26.350

从 Qt 5.10 开始，您终于可以使用`instanceOf`来检查变量是否属于某个 QML 类型，请参阅[“QML Support for Enum and InstanceOf Type Checks”](https://felgo.com/updates/felgo-2-15-0-qt-5-10-qt-creator-4-5-support-firebase-data-structures-and-queries#qt-5-10-qml-enum-instanceof)。

```
import VPlayApps 1.0
import QtQuick 2.0

App {
  // two QML items, used for type checking
  Item { id: testItem }
  Rectangle { id: testRect }

  // function to check wheter an item is a Rectangle
  function isRectangle(item) {
    return item instanceof Rectangle
  }

  // type check example
  Component.onCompleted: {
    console.log("testItem is Rectangle? " + isRectangle(testItem))
    console.log("testRect is Rectangle? " + isRectangle(testRect))
  }
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-12-18T07:33:50.163

您不能直接为此使用**typeof**，因为它总是将**“object”**作为任何 QML 元素的类型返回给您。但是，您可以使用多种替代方法。一种是将每个元素的**objectName**设置为其类型并在循环中检查它或定义一个属性并检查该属性。这将需要更多的工作，但您可以创建具有此属性的 qml 元素，而不是在需要的任何地方使用它。这是一个示例代码：

```
Rectangle {
  id: main
  width: 300; height: 400

  Rectangle {
    id: testRect
    objectName: "rect"
    property int typeId: 1
  }

  Item {
    id: testItem
    objectName: "other"
  }

  Component.onCompleted: {
    for(var i = 0; i < main.children.length; ++i)
    {
        if(main.children[i].objectName === "rect")
        {
            console.log("got one rect")
        }
        else
        {
            console.log("non rect")
        }
    }
    for(i = 0; i < main.children.length; ++i)
    {
        if(main.children[i].typeId === 1)
        {
            console.log("got one rect")
        }
        else
        {
            console.log("non rect")
        }
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2015-02-07T15:59:58.063

这是使用 toString() 的另一种方法（可能无法移植到 QML 的未来版本）：

```
function qmltypeof(obj, className) { // QtObject, string -> bool
  // className plus "(" is the class instance without modification
  // className plus "_QML" is the class instance with user-defined properties
  var str = obj.toString();
  return str.indexOf(className + "(") == 0 || str.indexOf(className + "_QML") == 0;
}

...

for (var i = 0; i < controls.children.length; ++i) {
   if (qmltypeof(controls.children[i].height, "QDeclarativeRectangle"))
   {
     // do stuff
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-19T01:15:09.403

是的，这个线程已有 2 年历史，但也许我的回答可以帮助那里的人。

`JSON.stringify()`对我来说，比较 QML 元素就足够了。当然，如果两个不同的元素具有完全相同的属性和值，这会给您带来误报。（例如，当一个元素以相同的颜色、x、y 等位于另一个元素之上时）

toString() 对我不起作用，因为我从同一个基本组件创建了许多实例。将*objectName*设置为每个实例对于我的用例来说有点太多了。

# mysql - MySQL函数中的错误

> ID：13923797
> 
> 赞同：0
> 
> 时间：2012-12-17T23:09:35.140
> 
> 标签：mysql

你能告诉我我的mysql函数有什么问题吗？

```
DELIMITER //
CREATE FUNCTION avgRating( ide int(11), ident bool ) RETURNS float
BEGIN
IF ident!=1 THEN

RETURN (
SELECT SUM(RatingVal)/Count(*) 
FROM ratings WHERE id=ide
GROUP BY id
);
ELSE RETURN (
SELECT SUM(RatingVal)/Count(*) 
FROM ratings WHERE id=ide
GROUP BY id);
END IF;
END //
DELIMITER ; 
```

导入文件后来自 phpMyAdmin 的错误：

```
 Error
There seems to be an error in your SQL query. The MySQL server error output below, if there is any, may also help you in diagnosing the problem

ERROR: Unknown Punctuation String @ 104
STR: //
SQL: DROP FUNCTION IF EXISTS `avgRating`;# MySQL returned an empty result set (i.e. zero rows).

DELIMITER //
CREATE FUNCTION `avgRating`( ide int(11), ident bool ) RETURNS float
BEGIN
    IF ident!=1 THEN

    RETURN (
    SELECT SUM(RatingVal)/Count(*) 
    FROM ratings WHERE id=ide
    GROUP BY id
    );
    ELSE RETURN (
    SELECT SUM(RatingVal)/Count(*) 
    FROM ratings WHERE id=ide
    GROUP BY id);
    END IF;
END //

DELIMITER //
CREATE FUNCTION `avgRating`( ide int(11), ident bool ) RETURNS float
BEGIN
    IF ident!=1 THEN

    RETURN (
    SELECT SUM(RatingVal)/Count(*) 
    FROM ratings WHERE id=ide
    GROUP BY id
    );
    ELSE RETURN (
    SELECT SUM(RatingVal)/Count(*) 
    FROM ratings WHERE id=ide
    GROUP BY id);
    END IF;
END //

SQL query: 

DELIMITER // CREATE FUNCTION `avgRating`( ide int(11), ident bool ) RETURNS float BEGIN IF ident!=1 THEN RETURN ( SELECT SUM(RatingVal)/Count(*) FROM ratings WHERE id=ide GROUP BY id ); ELSE RETURN ( SELECT SUM(RatingVal)/Count(*) FROM ratings WHERE id=ide GROUP BY id); END IF; END //

MySQL said: 

#1418 - This function has none of DETERMINISTIC, NO SQL, or READS SQL DATA in its declaration and binary logging is enabled (you *might* want to use the less safe log_bin_trust_function_creators variable) 
```

# unit-testing - 忽略testng中的一个类

> ID：13923801
> 
> 赞同：5
> 
> 时间：2012-12-17T23:10:28.267
> 
> 标签：unit-testing, testing, testng

当我运行我的 testng 套件时，有一些测试类需要被忽略。我尝试对需要忽略的类和方法使用 @Test(enabled=false) 注释。但我的问题是需要忽略的类扩展了一个抽象类，即使我在基类上有 @Test(enabled=false) 注释，也不会忽略这个抽象类测试方法。在 Junit 中，我可以在基类上使用 @ignore，而扩展类上的测试方法根本不会被调用。如何在 testng 中复制这种行为。

此外，在我的 testng 套件中，我按包而不是按类运行测试。因此，即使我尝试将班级分组并忽略该小组，它也不起作用。 `<test name="Test"> <groups> <run> <exclude name="testClass"/> </run> </groups>
<packages>`

请帮忙

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-20T20:49:07.813

我收到了来自 google groups(Testng) 的 Cedric 对此的回复。我贴在下面供参考

嗨，保罗，

您所看到的是注释继承和默认属性在 TestNG 中相互交互的方式的不幸结果，并且已经提交了一个错误以使其更好地工作（我手边没有 id）。

考虑：

```
@Test(enabled = false)
public class C {
  @Test
  public void f()
} 
```

当 TestNG 解析这些注解时，它发现方法上的@Test 没有指定“启用”，因此它为其分配了默认值。示例变为：

```
@Test(enabled = false)
public class C {
  @Test(enabled = true)
  public void f()
} 
```

现在，在方法级别定义的值会覆盖在类中指定的值。

修复将涉及使用枚举而不是布尔值（启用、禁用、继承，这将是默认值），但这会破坏向后兼容性，所以我需要为此引入一个新注释（例如“runStatus”或其他东西像那样），你的例子会变成

```
@Test(runStatus = DISABLED)
public class C {
  @Test
  public void f()
} 
```

这有意义吗？

——塞德里克

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-24T19:26:33.530

正如 Cedric 的回应中提到的，方法级别的 Test 注释会覆盖类级别的 Test 注释。因此，即使您在类级别有 @Test(enabled=false)，也会启用测试方法。我面临着同样的问题。它通过以下方法得到修复。

最简单的解决方案是在类级别使用 @Test(enabled=false) 但从方法级别删除 @Test 注释。像这样：

```
@Test(enabled = false)
public class C 
{

  public void f()

} 
```

# java - zeon java库没有捕获异常

> ID：13923802
> 
> 赞同：0
> 
> 时间：2012-12-17T23:10:46.773
> 
> 标签：java, sftp

嗨，我正在使用 Zeon 库实现一个 sftp 客户端，它工作正常。当我测试失败时问题就开始了，这是我的代码：

```
int status = 0;
try {
    SFTPClient sftpClient = new SFTPClient(host, username, password);
    status = sftpClient.sendFolder(sendingFolder, destFolder, new BatchTransferProgressDefault());

    System.out.println("FileTransferStatus.SUCCESS: " + FileTransferStatus.SUCCESS);
    System.out.println("status: " + status);
}catch (FileTransferException e){
    LOGGER.error(e);
}catch (Exception e2){
    LOGGER.error(e2);
} 
```

所以我输入了错误的主机、用户名和密码，状态标志仍然返回 true，即使我的控制台显示异常并且它没有进入我的异常。

有谁知道如何强制 zeon 库进入我的异常块？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T00:06:47.993

这似乎是图书馆的一个错误，我将不得不寻找一个不同的图书馆。很遗憾，因为它很容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:17:28.547

您的问题是这可能正在发生：

```
boolean status = true;
// ... status flag doesn't ever get set to false ...
try {
    SFTPClient sftpClient = new SFTPClient(host, username, password);
    // Your error is thrown before you get this far.
    status = sftpClient.sendFolder(sendingFolder, destFolder, new BatchTransferProgressDefault());
    System.out.println("FileTransferStatus.SUCCESS: " + FileTransferStatus.SUCCESS);
    System.out.println("status: " + status);
} catch (FileTransferException e){
    // The error is logged which means you'll only see it wherever you log it.
    LOGGER.error(e);
} catch (Exception e2){
    LOGGER.error(e2);
} 
```

# wordpress - WordPress 可视化编辑器的自定义对话框

> ID：13923805
> 
> 赞同：0
> 
> 时间：2012-12-17T23:10:57.460
> 
> 标签：wordpress, tinymce

我正在尝试向 WordPress 可视化编辑器添加一个按钮，该按钮将弹出一个对话框，让用户选择一些选项，然后单击一个按钮以根据这些选项插入一些内容。

通过将其放入我的函数中，我已经能够调出对话框：

```
 <?php
    function fp_plugin_function_callback() { ?>
    <p><select name="my_dialog_options">
<option value="1">First option</option>
<option value="2">Second option</option>
<option value="3">Third option</option>
</select></p>
            <p><input type="submit" class="button-primary" value="Go" /></p>        
    <?php }

    add_action('wp_ajax_fp_plugin_function', 'fp_plugin_function_callback');
    ?> 
```

并使用此 javascript：

```
 (function() {
    tinymce.create('tinymce.plugins.fp_split_content', {
        init : function(ed, url) {
            ed.addButton('fp_split_content', {
                title : 'Insert Split Content',
                image : url+'/images/split.png',
                onclick : function() {
                    ed.windowManager.open({
                        file: ajaxurl + '?action=fp_plugin_function',
                        width : 400 + parseInt(ed.getLang('highlight.delta_width', 0)),
                        height : 400 + parseInt(ed.getLang('highlight.delta_height', 0))
                        });
                    var content = ed.selection.getContent({format : 'html'});
                        ed.execCommand('mceInsertContent', false, content);
                }
            });
        },
        createControl : function(n, cm) {
            return null;
        }
    });
    tinymce.PluginManager.add('fp_split_content', tinymce.plugins.fp_split_content);
})(); 
```

我找不到答案是如何将用户选择的选项放入可视化编辑器中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T07:54:16.163

Well, you open a new window. So adressing the document from which you opened it is not a problem - it is `window.opener` . You will need to use a onchangeHandler on your select-element and use the value of the option you selected. Once you got it you will have to use the following code:

```
// value is the value of the selected element
window.opener.tinymce.get('your_editor_id').execCommand('mceInsertContent', false, value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T16:59:48.747

我在我的 Browser Shots 插件中使用以下代码，我认为它或多或少是您正在寻找的。

```
/**
 * TinyMCE Integration
 */

(function () {
    "use strict";
    if (typeof (tinymce) != "undefined") {
        tinymce.create('tinymce.plugins.browsershots', {
            init: function (ed, url) {
                ed.addButton('browsershots', {
                    title: 'Browser Shots',
                    image: url.replace('/js', '/images') + '/browsershots-icon.png',
                    onclick: function () {

                        // Dialog prompt's
                        var width = prompt("Screenshot width:", "600");
                        var height = prompt("Screenshot height:", "450");
                        var website = prompt("What's the URL of the website?", "http://www.kevinleary.net");

                        // Build shortcode tag
                        if (website !== null && website !== '') {
                            var shortcode = '[browser-shot url="' + website + '"';
                            if (width !== null && width !== '') {
                                shortcode += ' width="' + width + '"';
                            } else if (height !== null && height !== '') {
                                shortcode += ' height="' + height + '"';
                            }
                            shortcode += ']';
                            ed.execCommand('mceInsertContent', false, shortcode);
                        }
                    }
                });
            },
            createControl: function () {
                return null;
            },
            getInfo: function () {
                return {
                    longname: "Browser Shots",
                    author: 'Kevin Leary',
                    authorurl: 'http://www.kevinleary.net',
                    infourl: 'http://wordpress.org/extend/plugins/browser-shots/',
                    version: "1.2"
                };
            }
        });
        tinymce.PluginManager.add('browsershots', tinymce.plugins.browsershots);
    }
})(); 
```

# objective-c - 核心图多线 x 轴标签

> ID：13923812
> 
> 赞同：0
> 
> 时间：2012-12-17T23:11:40.113
> 
> 标签：objective-c, ios, core-plot

我有一个核心绘图图，x 轴上的第 1-31 天代表每月的天数。我需要一个大写的第一个字母（星期几出现在每个 no 下方

IE：

1 2 3 4 5 6 7

MTWTFSS

我通过“1\nM”实现了它，但是行高太大，所以字母太远了。

有谁知道我怎样才能在他们之间建立一个近距离的区域

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:35:25.817

目前不支持更改行距。您可以请求对[Core Plot 问题跟踪器](http://code.google.com/p/core-plot/issues/list)进行增强。

一种解决方法是将每个标签呈现为具有所需外观的图像，然后使用这些图像创建自定义轴标签。

# javascript - 通过 ajax 将网站服务器上的文件上传到另一个服务

> ID：13923814
> 
> 赞同：0
> 
> 时间：2012-12-17T23:11:55.790
> 
> 标签：javascript, ajax, html, file-upload

我只是想知道我的建议是否可以用于任何文件，而不仅仅是图像。

基本上在网站服务器上，我有一个包含一些通用文件的资产目录。这些文件可以应用于不同数量的事物，例如用于关闭按钮的“x_button.png”，但该目录中也有 config.json 文件。我需要能够通过 AJAX 将这些文件中的任何一个推送到另一台服务器。

目前我们使用文件对话框并使用实际文件获取文件数组并使用表单数据，将其推送到服务器。

对于图像，我可以将图像标记设置为该本地位置，然后使用画布获取数据 uri 并将其更改为 Blob，但我不确定是否可以为 .json 文件甚至任何文件类型做任何事情。

我不是在寻找一个书面的解决方案，只是如果有人以前遇到过需要做这样的事情以及解决问题的基本步骤的要点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:24:00.047

您可以使用 ajax 调用 php 代码通过 ftp 上传文件

检查[ftp_exec](http://php.net/manual/en/function.ftp-exec.php)

或者您可以使用发送文件

# java - Proguard 使 android 应用程序中的 R 类的反射不再起作用

> ID：13923815
> 
> 赞同：7
> 
> 时间：2012-12-17T23:12:04.933
> 
> 标签：java, android, release, proguard

自从我试图在 Google Play 上发布它以来，我已经在我的项目中激活了 proguard。即使 proguard-android.txt 有

```
-keepclassmembers class **.R$* {
public static <fields>; 
```

}

这意味着它不应该混淆我需要的 R.raw 类，我发现在运行此代码时

```
import headwayEnt.Blackhole_Darksun.R;

private static final String RES_PATH = "headwayEnt.Blackhole_Darksun.R";

public static int getFileHandle(String fileName, String path) {
    String fullPath = RES_PATH + '$' + path;
    if (subClass == null) {
        Class<headwayEnt.Blackhole_Darksun.R> c = null;     
        try {
            c = (Class<R>)Class.forName(RES_PATH);
        } catch(ClassNotFoundException e) {
            e.printStackTrace();
        } catch(ClassCastException e) {
            e.printStackTrace();
        }
        subClass = c.getDeclaredClasses();
    }
    int fileHandle = 0;
    try {
        int i = 0;
        System.out.println("fullPath: " + fullPath + " subclass len: " +
                subClass.length);
        for (; i < subClass.length; ++i) {
            String name = subClass[i].getName();
            if (subClass[i].getName().equals(fullPath)) {
                break;
            }
        }
        System.out.println("found i: " + i);
        Field[] f = subClass[i].getDeclaredFields();
        for (i = 0; i < f.length; ++i) {
            if (f[i].getName().equals(fileName)) {
                break;
            }
        }

        try {
            fileHandle = f[i].getInt(null);
        } catch(IllegalAccessException e) {

        }
    } catch (RuntimeException e) {
        System.out.println("Could not find filename: " + fileName + 
                " with path: " + path);
        throw e;
    }
    return fileHandle;
} 
```

例如，路径 raw 和文件名从那里我得到一个 ArrayIndexOutOfBoundsException 在行

```
Field[] f = subClass[i].getDeclaredFields(); 
```

因为 subClass.length 为 0。

如果不混淆，这件事就可以正常工作，所以我认为问题出在proguard上。

我尝试使用不同的方法使其不会像这样混淆 R 类：

```
-keep public class headwayEnt.HotshotEngine.Resource.ENG_Resource { *; }
-keep class headwayEnt.HotshotEngine.** { *; }
-keep class **.R$*
-keep public class headwayEnt.Blackhole_Darksun.R { *; }
-keep public class headwayEnt.Blackhole_Darksun_Full.R { *; }
-repackageclasses ''
-keep public class **.R {
  public *;
}
-keep public class **.R$* {
  public *;
} 
```

仍然无法正常工作。

我必须提到我的所有代码都在一个库 (headwayEnt.Blackhole_Darksun) 中，并且我在 headwayEnt.Blackhole_Darksun_Full 中引用了该库。基本上我用相同的代码构建了两个版本，一个是完整版，一个是免费演示版。所有这些混淆都发生在应用程序中，而不是在引用的库中（为了清楚起见）。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-20T00:23:45.330

这应该有效：

```
-keepattributes InnerClasses

-keep class **.R
-keep class **.R$* {
    <fields>;
} 
```

该`InnerClasses`属性是从 中获取任何东西所必需的`Class$getDeclaredClasses()`。-keep 选项是保留相关类和字段及其原始名称所必需的。

# r - As.vector 不会将 data.frame 子集转换为向量

> ID：13923817
> 
> 赞同：3
> 
> 时间：2012-12-17T23:12:10.383
> 
> 标签：r, vector, casting, dataframe

下面我提供了一些我一直在处理的代码片段。我已经成功地将字符串作为表格阅读。我希望在我的表的某些子集上使用 median() 函数。根据我所做的研究和我自己的经验，median() 没有为 data.frame 或 data.frame 的子集定义行为。因此，为了让我的问题适合某些已定义的行为，我尝试将我想要的子集转换为向量。但是，即使在使用 as.vector 转换我想要的子集之后，我仍然有一个 data.frame。当我尝试对此调用中位数时，我得到“参数不是数字或逻辑：返回 NA。”

我自己玩过很多次，并试图在这里和其他地方找到信息。作为注释，我已经尝试了在这个线程[R-friendly way to convert R data.frame column to a vector 上的 accpeted 解决方案中列出的方法？](https://stackoverflow.com/questions/7070173/r-friendly-way-to-convert-r-data-frame-column-to-a-vector)并取得了与我现在相同的结果。我不太在乎我是如何做到这一点的；随意建议其他方法。

感谢您的时间。

```
for(i in 1:length(text_array)){
    temp= read.table(textConnection(text_array[i]), sep="\t",row.names=NULL, header= FALSE,  fill=TRUE) 
    value=""
    #we are now going to process temp and add it
    cur_DS=coll_data_sets[i]
    #median is the value that we are going to insert into the result array.
    #currently the logic behind it is not implemented.
    #the value will be the median of state1 divided by the median of state2.
    t_states=vector(length=ncol(temp))
    for(j in 1:ncol(temp)){
        t_states[j]=toString(temp[2,j])

    }
    t_states=(unique(t_states))
    #this logic is current is set to reject data from more than one state.
    # It will also reject anything that appears to lack state data.
    if(length(t_states) !=  2){
        value=NA
    }else{
        s1_expr=as.vector(x=(temp[3, temp[2,]==t_states[1]]))
        s2_expr=as.vector(x=temp[3, temp[2,]==t_states[2]])
        print(class(s1_expr))
    #   med1= (median(s1_expr))
    #   med2= (median(s2_expr))
    #   if(is.na(med1[1]) || is.na(med2[1])){
    #       value=-1
        }#else{
    #       value=med1[1]/med2[1]
    #       print(value)
    #   }

    }
[1] "data.frame"
[1] "data.frame"
[1] "data.frame" 
```

这是“temp”的示例值：

```
 V1        V2          V3          V4
1 GSM506899 GSM506900   GSM506901   GSM506902
2 wild type wild type Zbtb20 null Zbtb20 null
3      99.3     98.24        66.2      102.42
4      55.8     20.11        22.9       16.98
5     159.6     63.46       102.5       67.17
6       166     54.73         215       49.46 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-17T23:22:27.077

数据框是列表。即使您只选择了一行数据，它仍然是一个列表。

试试`unlist`。（假设您的“行”中的所有值当然都是数字。如果不是，那么您有更大的问题。）

# google-drive-api - IOS DrEdit 电子表格示例

> ID：13923821
> 
> 赞同：0
> 
> 时间：2012-12-17T23:12:17.923
> 
> 标签：google-drive-api

有没有办法使用谷歌的 DrEdit 示例来加载和上传电子表格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T04:25:38.757

当然有可能。

而不是上传类型`text/plain`的文件上传您自己的文件。`convert=True`它们可能是 CSV 或 Excel 文件，如果您希望将文件转换为 Google 电子表格格式，请确保传递参数。

下载 Google 电子表格时，您需要使用`exportLink`您希望将 Google 电子表格导出为的适当格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-08T19:45:55.780

我使用以下代码（来自 DrEdit loadFileContent 方法）将 Google Drive Sheets 下载到我的应用程序；

```
// Trying to access spreadsheet files using exportLinks metadata
    GTLDriveFileExportLinks *myExportLinks = self.driveFile.exportLinks;    
    NSString *spreadsheetURL = [[myExportLinks additionalProperties]objectForKey:@"text/csv"];
    NSLog(@"AND the WINNING URL is = %@", spreadsheetURL);   
    GTMHTTPFetcher *fetcher = [self.driveService.fetcherService fetcherWithURLString:spreadsheetURL]; 
```

该代码可以很好地将 CSV 格式的文件下载到 DrEdit 项目中。

当考虑到我的应用程序时，虽然获取只是停止并且没有完成下载。

# ios - Socket.io 蜂窝握手 iOS 超时

> ID：13923823
> 
> 赞同：0
> 
> 时间：2012-12-17T23:12:23.867
> 
> 标签：ios, socket.io, wifi, nsurlconnection, handshake

我正在通过标准 HTTP NSURLConnection 进行 socket.io 握手调用，奇怪的是我只有在通过 Wifi 连接时才得到响应，否则连接超时。我知道套接字不能通过 Wifi 工作，应该使用 xhr-polling 进行蜂窝连接，但是仅通过 Wifi 工作的 HTTP 连接没有意义，因此我什至无法轮询，因为我根本无法连接......

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T13:56:54.280

问题最终出在服务器上（虽然是前一段时间，但我相信这是防火墙或配置错误），而不是 iOS 问题。如果有人遇到这个并且很好奇，则正在使用以下库并且运行良好：

[https://github.com/pkyeck/socket.IO-objc](https://github.com/pkyeck/socket.IO-objc)

# rest - 如何将 MVC 休息服务与 Spring Integration 集成？

> ID：13923825
> 
> 赞同：2
> 
> 时间：2012-12-17T23:12:28.600
> 
> 标签：rest, spring-mvc, spring-integration

我的目标是使用 Spring Integration 来控制多个系统之间的流程并添加一些日志记录和监控。

其中一个系统是 RESTful MVC 服务。我在这里阅读了 Spring Integration 文档：http: [//static.springsource.org/spring-integration/reference/htmlsingle/#http-inbound](http://static.springsource.org/spring-integration/reference/htmlsingle/#http-inbound)。这里有一行我不明白：

> 如果您在 Spring MVC 应用程序中运行，则不需要前面提到的显式 servlet 定义。在这种情况下，网关的 bean 名称可以与 URL 路径匹配，就像 Spring MVC 控制器 bean 一样。

有人可以提供一个将 Spring MVC restful 端点与 Spring Integration 集成的示例吗？理想情况下，重用我已经定义的控制器中的映射定义会很好，但也许这不是预期的用例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T13:31:47.570

那里的讨论是将 HTTP 请求路由到 http 入站网关。

如果您已经有一个控制器，只需注入一个 MessagingGateway 来调用您的 Spring 集成流程......

[http://static.springsource.org/spring-integration/reference/html/messaging-endpoints-chapter.html#gateway](http://static.springsource.org/spring-integration/reference/html/messaging-endpoints-chapter.html#gateway)

# email - Magento 中的“setIsSubscribed”有什么作用？

> ID：13923829
> 
> 赞同：1
> 
> 时间：2012-12-17T23:13:12.790
> 
> 标签：email, magento, newsletter, subscribe

我正在努力在我的 Magento 商店中设置电子邮件时事通讯，并且在研究默认设置如何处理时事通讯时，我在 app/code/core/Mage/Customer/ 的 createPostAction 函数中遇到了这段代码控制器/AccountController.php：

```
if ($this->getRequest()->getParam('is_subscribed', false)) {
    $customer->setIsSubscribed(1);
} 
```

所以我知道条件检查在做什么，但我一辈子都找不到函数调用 setIsSubscribed() 做了什么。我知道我传入了 TRUE 或 FALSE，它会适当地设置它，但是函数定义在哪里？或者是否有某种 PHP voodoo 像在 Ruby 中那样调用在某处设置实例变量的 setter？或多或少，有人可以确切地告诉我调用 setIsSubscribed 时会发生什么和/或我可以在代码中的什么位置找到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:44:56.170

是的，非常 Ruby 风格的 PHP 重载。请参阅[`Varien_Object::__call()`[link]](https://github.com/benmarks/magento-mirror/blob/1.7.0.2/lib/Varien/Object.php#L622) - 继承是 via `Mage_Core_Model_Abstract`。

# node.js - Meteor.js 和 LDAP

> ID：13923831
> 
> 赞同：7
> 
> 时间：2012-12-17T23:13:18.833
> 
> 标签：node.js, ldap, meteor

LDAP 身份验证是否有机会在不久的将来集成到 Meteor.js 中？

关于如何让它在今天发挥作用的任何提示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-27T05:50:15.767

每当使用流星时，我建议查看可用于 node.js 的资源，何时以及是否某些内容不在流星文档中，并且此处还没有相关讨论。

这似乎是一个好的开始的原因是，meteor 在光纤内的 node.js 服务器实例中运行。至少现有的 node.js 模块可以帮助您了解下一步该去哪里。

通过粗略的 google 搜索`nodejs ldap`，我发现了一些非常有用的资源：

[http://blog.nodejs.org/2011/09/08/ldapjs-a-reprise-of-ldap/](http://blog.nodejs.org/2011/09/08/ldapjs-a-reprise-of-ldap/) [http://ldapjs.org/](http://ldapjs.org/)

最后，您可能需要这个问题的答案才能上路： [是否可以在流星应用程序中使用 nodejs 包？](https://stackoverflow.com/questions/11691513/it-possible-use-a-nodejs-package-inside-meteor-app)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T07:31:44.150

截至 2015 年，最佳可用软件包是[https://atmospherejs.com/typ/accounts-ldap](https://atmospherejs.com/typ/accounts-ldap)

```
meteor add typ:accounts-ldap 
```

我在几个项目中使用了这个包，根据我的经验，它总是需要`dn`进行身份验证。如果您想改用电子邮件，则首先必须`dn`使用单独的查询来查找（理想情况下，您的 LDAP 会为您提供某种解析器/API 来`dn`通过电子邮件查询）。

在服务器端，您配置以下默认值（暴露给服务器的任何文件）：

```
LDAP_DEFAULTS.url = 'ldap://my-ldap-host.com' 
```

在客户端，您可以调用：

```
Meteor.loginWithLDAP(login, password, { dn: 'the-resolved-dn' }, function(err) {
  if (err) {
    // login failed
  }
  else {
    // login successful
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T04:18:05.553

目前最好的办法是查看[https://github.com/emgee3/meteor-accounts-ldap](https://github.com/emgee3/meteor-accounts-ldap)中的代码，并尝试根据自己的目的对其进行调整。

# spring - 检索 bean 时扩展 groovy 类会导致运行时异常

> ID：13923839
> 
> 赞同：-1
> 
> 时间：2012-12-17T23:13:56.010
> 
> 标签：spring, groovy

我在尝试扩展 groovy 类时遇到问题。我通过构造文件路径、使用 Spring 的 BeanDefinitionRegistry 注册 bean，然后从应用程序上下文中检索它来扩展从 spring 应用程序上下文文件加载的 groovy 类。

```
private BeanDefinitionRegistry registry; 
```

...

```
 GenericBeanDefinition bd = new GenericBeanDefinition();
    bd.setBeanClass(GroovyScriptFactory.class);
    bd.setAttribute(
            ScriptFactoryPostProcessor.REFRESH_CHECK_DELAY_ATTRIBUTE,
            refreshDelay);

    ConstructorArgumentValues cav = bd.getConstructorArgumentValues();
    cav.addGenericArgumentValue(groovyLocation + WordUtils.capitalize(name)
            + ".groovy");

    registry.registerBeanDefinition(name, bd); 
```

...

```
 // retrieve it
        ExternalObject engine = (ExternalObject) this.applicationContext
                .getBean(engineName); 
```

这似乎可以正常工作，除非我像这样扩展一个 groovy 类：

**Cat.groovy：**

```
package com.mycomp.external.engine;

import com.mycomp.external.ExternalObject;

    public class Cat extends ExternalObject {

    } 
```

**Lion.groovy**

```
package com.mycomp.external.engine;

    public class Lion extends Cat {

    } 
```

然后我得到了一个非常糟糕的错误：

```
Lion: 4: unable to resolve class Cat 
 @ line 4, column 1.
   public class Lion extends Cat {
   ^

1 error

    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:452) [spring-beans-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:291) [spring-beans-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) [spring-beans-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:288) [spring-beans-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:190) [spring-beans-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1075) [spring-context-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at com.mycomp.external.ExternalAdFactoryImpl.getEngineByName(ExternalAdFactoryImpl.java:119) [adverter-1.9.0-SNAPSHOT.jar:na]
    at com.mycomp.external.BasicEngineTest.getEngine(BasicEngineTest.java:62) [test-classes/:na]
    at com.mycomp.external.BasicEngineTest.realModeGet(BasicEngineTest.java:108) [test-classes/:na]
    at com.mycomp.external.BasicEngineTest.testMany(BasicEngineTest.java:123) [test-classes/:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [na:1.6.0_37]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [na:1.6.0_37]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [na:1.6.0_37]
    at java.lang.reflect.Method.invoke(Method.java:597) [na:1.6.0_37]
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:76) [testng-6.0.1.jar:na]
    at org.testng.internal.MethodInvocationHelper$1.runTestMethod(MethodInvocationHelper.java:178) [testng-6.0.1.jar:na]
    at org.springframework.test.context.testng.AbstractTestNGSpringContextTests.run(AbstractTestNGSpringContextTests.java:158) [spring-test-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [na:1.6.0_37]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [na:1.6.0_37]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [na:1.6.0_37]
    at java.lang.reflect.Method.invoke(Method.java:597) [na:1.6.0_37]
    at org.testng.internal.MethodInvocationHelper.invokeHookable(MethodInvocationHelper.java:191) [testng-6.0.1.jar:na]
    at org.testng.internal.Invoker.invokeMethod(Invoker.java:666) [testng-6.0.1.jar:na]
    at org.testng.internal.Invoker.invokeTestMethod(Invoker.java:846) [testng-6.0.1.jar:na]
    at org.testng.internal.Invoker.invokeTestMethods(Invoker.java:1170) [testng-6.0.1.jar:na]
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:125) [testng-6.0.1.jar:na]
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:109) [testng-6.0.1.jar:na]
    at org.testng.TestRunner.runWorkers(TestRunner.java:1147) [testng-6.0.1.jar:na]
    at org.testng.TestRunner.privateRun(TestRunner.java:749) [testng-6.0.1.jar:na]
    at org.testng.TestRunner.run(TestRunner.java:600) [testng-6.0.1.jar:na]
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:317) [testng-6.0.1.jar:na]
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:312) [testng-6.0.1.jar:na]
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:274) [testng-6.0.1.jar:na]
    at org.testng.SuiteRunner.run(SuiteRunner.java:223) [testng-6.0.1.jar:na]
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:52) [testng-6.0.1.jar:na]
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:86) [testng-6.0.1.jar:na]
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1039) [testng-6.0.1.jar:na]
    at org.testng.TestNG.runSuitesLocally(TestNG.java:964) [testng-6.0.1.jar:na]
    at org.testng.TestNG.run(TestNG.java:900) [testng-6.0.1.jar:na]
    at org.apache.maven.surefire.testng.TestNGExecutor.run(TestNGExecutor.java:70) [surefire-testng-2.8.1.jar:2.8.1]
    at org.apache.maven.surefire.testng.TestNGDirectoryTestSuite.execute(TestNGDirectoryTestSuite.java:102) [surefire-testng-2.8.1.jar:2.8.1]
    at org.apache.maven.surefire.testng.TestNGProvider.invoke(TestNGProvider.java:114) [surefire-testng-2.8.1.jar:2.8.1]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [na:1.6.0_37]
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) [na:1.6.0_37]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [na:1.6.0_37]
    at java.lang.reflect.Method.invoke(Method.java:597) [na:1.6.0_37]
    at org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(ProviderFactory.java:103) [surefire-booter-2.8.1.jar:2.8.1]
    at $Proxy0.invoke(Unknown Source) [na:na]
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:150) [surefire-booter-2.8.1.jar:2.8.1]
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:91) [surefire-booter-2.8.1.jar:2.8.1]
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69) [surefire-booter-2.8.1.jar:2.8.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'Lion': Could not determine scripted object type for GroovyScriptFactory: script source locator [file:///Users/jkramer/source/backend/backend/config/../feeds/src/main/groovy/com/mycomp/external/engine/Lion.groovy]; nested exception is org.springframework.scripting.ScriptCompilationException: Could not compile script; nested exception is org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
Lion: 4: unable to resolve class Cat 
 @ line 4, column 1.
   public class Lion extends Cat {
   ^

1 error

    at org.springframework.scripting.support.ScriptFactoryPostProcessor.postProcessBeforeInstantiation(ScriptFactoryPostProcessor.java:297) [spring-context-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:848) [spring-beans-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.resolveBeforeInstantiation(AbstractAutowireCapableBeanFactory.java:820) [spring-beans-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:446) [spring-beans-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    ... 50 common frames omitted
Caused by: org.springframework.scripting.ScriptCompilationException: Could not compile script; nested exception is org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
Lion: 4: unable to resolve class Cat 
 @ line 4, column 1.
   public class Lion extends Cat {
   ^

1 error

    at org.springframework.scripting.groovy.GroovyScriptFactory.getScriptedObjectType(GroovyScriptFactory.java:217) [spring-context-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    at org.springframework.scripting.support.ScriptFactoryPostProcessor.postProcessBeforeInstantiation(ScriptFactoryPostProcessor.java:290) [spring-context-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    ... 53 common frames omitted
Caused by: org.codehaus.groovy.control.MultipleCompilationErrorsException: startup failed:
Lion: 4: unable to resolve class Cat 
 @ line 4, column 1.
   public class Lion extends Cat {
   ^

1 error

    at org.codehaus.groovy.control.ErrorCollector.failIfErrors(ErrorCollector.java:302) [groovy-all-1.8.0.jar:1.8.0]
    at org.codehaus.groovy.control.CompilationUnit.applyToSourceUnits(CompilationUnit.java:854) [groovy-all-1.8.0.jar:1.8.0]
    at org.codehaus.groovy.control.CompilationUnit.doPhaseOperation(CompilationUnit.java:544) [groovy-all-1.8.0.jar:1.8.0]
    at org.codehaus.groovy.control.CompilationUnit.compile(CompilationUnit.java:493) [groovy-all-1.8.0.jar:1.8.0]
    at groovy.lang.GroovyClassLoader.doParseClass(GroovyClassLoader.java:306) [groovy-all-1.8.0.jar:1.8.0]
    at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:287) [groovy-all-1.8.0.jar:1.8.0]
    at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:267) [groovy-all-1.8.0.jar:1.8.0]
    at groovy.lang.GroovyClassLoader.parseClass(GroovyClassLoader.java:214) [groovy-all-1.8.0.jar:1.8.0]
    at org.springframework.scripting.groovy.GroovyScriptFactory.getScriptedObjectType(GroovyScriptFactory.java:201) [spring-context-3.0.5.RELEASE.jar:3.0.5.RELEASE]
    ... 54 common frames omitted
17:26:54.942 [Hector.me.prettyprint.cassandra.connection.CassandraHostRetryService-1] INFO  m.p.c.c.CassandraHostRetryService - Not checking that 10.10.0.111(10.10.0.111):9160 is a member of the ring since there are no live hosts 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T05:06:57.117

似乎没有直接的方法将两者都包含在源路径中（除非您设置的定位器在`cav.addGenericArgumentValue(groovyLocation + WordUtils.capitalize(name) + ".groovy")`与样式定位器路径一起使用时允许多个类`classpath:`，我对此表示怀疑）。我认为目的是让您加载的脚本自给自足。

您可以尝试将两者合并为一个 .groovy 类，但“24.3.3\. Groovy beans”的结尾[似乎](http://static.springsource.org/spring/docs/2.0.8/reference/dynamic-language.html)将 kibosh 放在了上面。

如果您可以使用与加载类相同的机制加载超`ExternalObject`类，我认为这可能会做到（尽管这不太可能是您要寻找的）。

如果你可以避免使用继承，而是在你的`Lion`类中使用封装，你可能可以在你加载的类中使用 groovy 类加载器来安装一些 hacky 东西来拉入另一个类，但我承认我只是在那里挥手.

# php - 通过输入字段将数据从数据库更新到用户到数据库

> ID：13923840
> 
> 赞同：0
> 
> 时间：2012-12-17T23:14:04.133
> 
> 标签：php, sql-update

通过输入字段将数据从数据库更新到用户到数据库。谁能告诉我这个更新有什么问题。我正在从一个也从数据库写入的字段中获取数据，这不可能吗？

我的 sql 代码看起来像这样..

```
<?php session_start(); $brugerID = $_SESSION['brugerID']; $holdID = $_SESSION['holdID']; ?> 
```

我的 php 代码如下所示：

```
<form method="POST" action="" id="submitvaegt">
    <tr>
        <td colspan="5"><h2>Hvor meget vejer du idag?</h2></td>
    </tr>
        <?php
        $brugerensID = $_SESSION['brugerID'];
        $sql = "SELECT * FROM `brugere` 
        WHERE brugerID = '$brugerensID'";
        $result = mysql_query($sql);
        $row = mysql_fetch_assoc($result);

        echo '<tr>';
        echo '<td rowspan="3" valign="middle" width="128">';
        echo '<img src="http://www.mahogni.com/afs/wp-content/uploads/2012/12/weight.png" width="60"></td>';
        echo '<td>&nbsp;</td>';
        echo '<td colspan="3">&nbsp;</td>';
        echo '</tr>';

        echo '<tr>';
        echo '<td width="245" height="35">Jeg vejer i dag</td>'; //vaegtnu
        echo '<td width="280">';
        echo '<input class="textboxReport" type="text" name="vaegtnu" size="3" value="';
        if ($row['vaegtnu']==0) 
        { 
            echo $row['vaegtstart'];
        } 
        else 
        {
            echo $row['vaegtnu'];
        }           
        echo '"/>&nbsp;kg&nbsp;&nbsp;';
        echo '<input type="submit" name="submitvaegt" id="submitvaegt" value="GEM" />';
        echo '<td width="280" height="35">Jeg har til nu tabt</td>'; //vaegtstart - vaegtnu
        echo '<td align="right">';
        if ($row['vaegtnu']==0) 
        { 
            echo $row['vaegtstart']-$row['vaegtstart'];
        } 
        else 
        {
            echo $row['vaegtstart']-$row['vaegtnu'];
        }           
        echo '&nbsp;kg</td>';               
        echo ' </tr>';

        echo '<tr>';
        echo '<td height="35">Mit mål er</td>'; //vaegtslut
        echo '<td>'. $row['vaegtslut'] . '&nbsp;kg</td>'; 
        echo '<td height="28">Jeg mangler at tabe</td>'; //vaegtslut - vaegtnu ELLER vaegtslut - vaegtstart
        echo '<td>';

        if ($row['vaegtnu']==0) 
        { 
            echo $row['vaegtslut']-$row['vaegtstart'] . '&nbsp;kg';
        } 
        else 
        {
            echo $row['vaegtslut']-$row['vaegtnu'] . '&nbsp;kg';
        }
        echo '</td>';
        echo '</tr>';
        ?>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T00:47:34.577

你可以试试这个：

```
$vaegtnu=$_POST['vaegtnu'];

$brugerensID= $_SESSION['brugerID'];

mysql_query("UPDATE `brugere` SET vaegtnu='$vaegtnu' WHERE brugerID='$brugerensID'"); 
```

并告诉我它是否有帮助。

还要检查您的变量是否匹配，即`XXXX = $_POST['YYYY']`YYYY 应该是输入的名称，而 XXXX 应该是您在查询中使用的变量的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:44:21.227

不确定，但`$brugerensID`如果您的值是整数，可以尝试删除周围的单引号：

`mysql_query("UPDATE brugere SET vaegtnu='$vaegtnu' WHERE brugerID=$brugerensID");`

这取决于您的架构是如何设置的。您是否收到任何 PHP 警告或错误消息？

# ruby-on-rails - Postgresql Arel 和分组依据

> ID：13923843
> 
> 赞同：0
> 
> 时间：2012-12-17T23:14:26.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, ruby-on-rails-3.2

我使用 arel 在本地创建了这个方法来创建我自己的搜索。

```
def self.search(search)
    User.joins(:experience).where(Experience.arel_table[:description].matches("%#{search}%")
            .or(Experience.arel_table[:description].matches("%#{search.capitalize}%"))
            .or(Experience.arel_table[:job_title].matches("%#{search}%"))
            .or(Experience.arel_table[:job_title].matches("%#{search.capitalize}%")))
            .group(:user_id)
end 
```

一切都很好，直到推动heroku。

Heroku Logs 向我显示以下消息：

```
ActionView::Template::Error (PGError: ERROR:  column "users.id" must appear in the GROUP BY clause or be used in an aggregate function 
```

这是选择：

```
SELECT  "users".* FROM "users" INNER JOIN "experiences" ON "experiences"."user_id" = "users"."id" WHERE (((("experiences"."description" ILIKE '%rails%' OR "experiences"."description" ILIKE '%Rails%') OR "experiences"."job_title" ILIKE '%rails%') OR "experiences"."job_title" ILIKE '%Rails%')) GROUP BY user_id ORDER BY created_at DESC LIMIT 7 OFFSET 0): 
```

如您所见，我的方法中有 .group(:user_id) ，所以我不理解这个错误

在此先感谢您的帮助。

更新

在我改变这样的方法之后：

```
User.joins(:experience).where(Experience.arel_table[:description].matches("%#{search}%")
.or(Experience.arel_table[:description].matches("%#{search.capitalize}%"))
.or(Experience.arel_table[:job_title].matches("%#{search}%"))
.or(Experience.arel_table[:job_title].matches("%#{search.capitalize}%")))
.select("experiences.user_id, users.email")
.group("experiences.user_id, users.email") 
```

我认为这个错误

```
undefined method `name' for nil:NilClass 
```

在这一行

```
<%= user.information.name %> 
```

如果我删除此行，我会收到此错误

```
Routing Error

No route matches {:action=>"show", :controller=>"users", :id=>#<User email: "jgiron@hotmail.com">} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:16:48.287

你需要做一个`select`.

```
User.joins(:experience).where(Experience.arel_table[:description].matches("%#{search}%")
        .or(Experience.arel_table[:description].matches("%#{search.capitalize}%"))
        .or(Experience.arel_table[:job_title].matches("%#{search}%"))
        .or(Experience.arel_table[:job_title].matches("%#{search.capitalize}%")))
        .select("experiences.user_id, users.email")
        .group("experiences.user_id, users.email") 
```

如果您没有指定要选择的列，Rails 默认会尝试选择所有列。

**更新**

在进行 SQL 查询时，出现在 中的所有字段都`SELECT`必须出现在`GROUP BY`. 所以如果你有`SELECT foo, bar, baz, MAX(id) FROM foo_bars GROUP BY foo, bar, baz`，那么`foo`，`bar`而且`baz`必须在`GROUP BY`。由于`MAX(id)`是一个聚合函数，它不必出现在`GROUP BY`.

然而，如果你不想做这种`GROUP BY`，那么 Rails 有一个应用程序端的方法叫做`group_by`. 你像这样使用它：

```
@experiences.group_by {|x| x.user_id} 
```

它将返回一个散列，其中键作为用户 ID，值作为体验。

# vb.net - VB.net 将输入保存到函数中

> ID：13923846
> 
> 赞同：2
> 
> 时间：2012-12-17T23:14:31.480
> 
> 标签：vb.net, function, project

最近，我开始为我的 As 计算课程编写项目 VB，经过几个痛苦的 vb 编码后，我碰到了坚固的砖墙。看起来像这样

```
Private Function store(ByVal opt As Integer, ByVal inp As String, ByVal q As String) As String
        Dim na_me(20), amount(20), num1 As String
        Select Case opt
            Case 0
                na_me(num1) += inp
                amount(num1) += q
                num1 += 1
                Return "1"
            Case 1
                For Each Str As String In na_me
                    Console.WriteLine(Str)
                Next
                Return "1"
            Case 2
                num1 = 0
                Return "1"
            Case Else
                Return "0"
        End Select
    End Function 
```

每次调用参数 1 时，它只返回空白屏幕而不是充满数据的数组。该函数旨在保存和保存通过函数调用传递的任何数据，然后将其保存到数组中。一旦 1 作为 opt 参数传递，然后打印出数组中保存的所有数据。我知道这是一个菜鸟问题，但我以前从未使用过 vb.net，而且我只在学校这样做。

这是其余的代码[http://pastebin.com/nWxvx9pz](http://pastebin.com/nWxvx9pz)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T06:45:25.030

或者，您可以执行类似的操作并使用强类型集合/属性。

如果您确实需要将这些作为数组获取，那么您只需要 MyStoredValues.ToArray()

```
Module Module1

    Private na_me As List(Of String)
    Public Property MyStoredValues() As List(Of String)
        Get
            If na_me Is Nothing Then
                na_me = New List(Of String)
            End If
            Return na_me
        End Get
        Set(ByVal value As List(Of String))
            na_me = value
        End Set
    End Property

    Private amount As List(Of String)
    Public Property MyAmount() As List(Of String)
        Get
            If amount Is Nothing Then
                amount = New List(Of String)
            End If
            Return amount
        End Get
        Set(ByVal value As List(Of String))
            amount = value
        End Set
    End Property

    Sub Main()
        store(0, "TEST TEST TEST", "10.23")
        store(0, "TEST2 TEST2 TEST2", "11.33")
        store(1, "", "")
        Console.ReadKey()
    End Sub
    Private Function store(ByVal opt As Integer, ByVal inp As String, ByVal q As String) As Boolean

        Select Case opt
            Case 0
                MyStoredValues.Add(inp)
                MyAmount.Add(q)

                Return True
            Case 1
                For Each Str As String In MyStoredValues
                    Console.WriteLine(Str)
                Next
                Return True

            Case Else
                Return False
        End Select
    End Function
End Module 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T06:38:00.377

在程序注释上方的模块级别声明所有变量。完成后将它们从它们现在所在的位置删除。在销售屏幕的顶部显示正在出售的物品的选择作为目录。

就像是...

```
 Do
        Console.Clear()
        Console.WriteLine("CATALOGUE" & Chr(13) & Chr(13))
        Console.WriteLine("Id     Name                   Price" & Chr(13))
        Console.WriteLine("=======================================" & Chr(13))
        For num = 0 To 11
            Console.WriteLine(Format(num, "00") & "   " & product(num) & " " & price(num) & Chr(13))
        Next
        Console.WriteLine("=======================================" & Chr(13))
        Console.WriteLine(Chr(13)) 
```

不要忘记 NUM1 是一个整数，而不是另一个成员指出的字符串。

要在您的 STORE 过程中显示数量，请添加一个名为 num2 的变量并将其编码如下...

```
 Case 1
            Console.WriteLine("Your Selection" & Chr(13))
            For num2 = 0 To UBound(na_me) - 1
                Console.WriteLine(na_me(num2) & "   " & amount(num2) & Chr(13))
            Next 
```

通过使用 UBOUND(array-name-here) 语句，您将找到当前数组中数组元素的最大数量，您还可以通过 NUM2 变量访问 AMOUNT() 数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-29T15:33:44.527

```
Try
            Dim con As New OleDbConnection
            Dim cmd As New OleDbCommand
            Dim ads As OleDbDataReader
            Dim ads1 As OleDbDataReader
            Dim dr As OleDbDataReader
             sql = "select joindate from Employee where Empcode='" & empid & "'"
                    cmd = New OleDbCommand(sql, con)
                    dr = cmd.ExecuteReader
           While dr.Read
                        If dr(0) > dtpdate.Value Then
                            MsgBox("Can't Pay advance!  Joined only on " & Format(dr(0), "dd-MMM-yyyy") & "")
                            Exit Sub
                        End If
                    End While
                    dr.Close()
                    cmd.CommandText = "insert into advance (Date,Empid,Amount,Remark,CompanyId,Confir)values('" & Format(dtpdate.Value, "dd/MMM/yyyy") & "','" & empid & "'," & txtamt.Text & ",'" & txtremark.Text & "'," & CompanyCode & ",'NO')"
                    cmd.ExecuteNonQuery()
 End Sub 
```

# json - AngularJs：基于模型添加类

> ID：13923848
> 
> 赞同：13
> 
> 时间：2012-12-17T23:14:44.303
> 
> 标签：json, angularjs

如果事情属实，只是尝试申请一个课程。该文档非常简短[http://docs.angularjs.org/api/ng.directive:ngClass](http://docs.angularjs.org/api/ng.directive:ngClass)

试图`favorite`在`li`if上添加一个类`1 === true`

这是我的模拟对象

```
 $scope.restaurantListFromSearch = [
        {restaurantName: "Zocala",
        details: {
            image: "http://placehold.it/124x78",
            url: "#",
            cuisineType: ["Sandwiches", "American", "BBQ"],
            description: "Modern, healthy, awesome BBW",
            priceRange: "$",
            userFavorite: 0
        }},
        {restaurantName: "Subway",
        details: {
            image: "http://placehold.it/124x78",
            url: "#",
            cuisineType: ["Sandwiches", "American", "BBQ"],
            description: "Modern, healthy, awesome BBW",
            priceRange: "$",
            userFavorite: 1
        }},
        {restaurantName: "Hungry Howies",
        details: {
            image: "http://placehold.it/124x78",
            url: "#",
            cuisineType: ["Sandwiches", "American", "BBQ"],
            description: "Modern, healthy, awesome BBW",
            priceRange: "$",
            userFavorite: 0
        }}                      
    ]; 
```

这是我的标记。

```
 <ul>
            <li ng-repeat="restaurant in restaurantListFromSearch" ng-class="{restaurant.details.userFavorite === 1: favorite}">
                <img src="{{restaurant.details.image}}" alt="{{restaurant.restaurantName}}">

                <div class="details">
                    <a href="{{restaurant.details.url}}">{{restaurant.restaurantName}}</a>
                    <span class="cuisine-type">{{restaurant.details.cuisineType}}</span>
                    <p>{{restaurant.details.description}}</p>
                    <span class="price-rating">{{restaurant.details.priceRange}}</span>
                </div>

                <div class="clear"></div>   
            </li><!-- end restaurant result -->                                                                 
        </ul> 
```

添加了 jsFiddle 以提高可读性，由于缺少依赖项（requireJs 等）而实际上不起作用

[http://jsfiddle.net/HtJDy/](http://jsfiddle.net/HtJDy/)

谁能指出我正确的方向？:}

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-12-17T23:54:45.190

ngClass 正在寻找一个角度表达式来进行评估，“评估的结果可以是一个字符串，表示以空格分隔的类名、数组或类名到布尔值的映射。”

为了使您的示例起作用，它与您的想法有些相反，其中左侧是您要添加的类，右侧是布尔表达式。

```
<li ng-repeat="restaurant in restaurantListFromSearch" ng-class="{ favorite : restaurant.details.userFavorite == 1}"> 
```

如果您愿意，像这样的对象映射允许您拥有多个类：

```
<li ng-repeat="restaurant in restaurantListFromSearch" ng-class="{ favorite : restaurant.details.userFavorite == 1, otherClass: otherBooleanExpression }"> 
```

另请注意，布尔表达式并不完全是 JavaScript……如果插入严格的等于 '==='，你会得到一个错误。

希望有帮助！

# android - 在 Sqlite 中插入行很慢

> ID：13923850
> 
> 赞同：1
> 
> 时间：2012-12-17T23:14:52.263
> 
> 标签：android, database, sqlite

我正在尝试将行插入 SQLite DB。插入 130 行需要 7 秒，这对我来说似乎很慢。

表定义为：

```
 sd.execSQL("CREATE TABLE " + V2VocabsTable.TABLE_NAME + " (" 
            + V2VocabsTable.ID   + " VARCHAR(10) PRIMARY KEY ," 
            + V2VocabsTable.NAME    + " VARCHAR(255), " 
            + V2VocabsTable.LOADED  + " VARCHAR(1) " 
            + ");"
            ); 
```

要插入一行，我使用以下代码：

```
public void addTableStatus(String tableId, String name) {

    Log.d("DB","Before Insert");

    ContentValues cv = new ContentValues();
    cv.put(V2VocabsTable.ID, "Table " + tableId);
    cv.put(V2VocabsTable.NAME, name);
    cv.put(V2VocabsTable.LOADED, "NO");
    SQLiteDatabase sd = getWritableDatabase();
    long result = sd.insert(V2VocabsTable.TABLE_NAME,   null, cv);

    Log.d("DB","After Insert :: " + result);
    } 
```

日志文件中的时间是：

```
 12-17 23:00:11.445: D/SQLDB(25384): Init
 12-17 23:00:11.455: D/DB(25384): Before Insert
 12-17 23:00:11.505: D/SQLDB(25384): Open
 12-17 23:00:11.895: D/DB(25384): After Insert :: 1
 12-17 23:00:11.895: D/DB(25384): 0001 :: AdministrativeSex-v1.0.xml
 12-17 23:00:11.895: D/DB(25384): Before Insert
 12-17 23:00:11.965: D/DB(25384): After Insert :: 2
 12-17 23:00:11.965: D/DB(25384): 0002 :: MaritalStatus-v1.0.xml
 12-17 23:00:11.965: D/DB(25384): Before Insert
 12-17 23:00:12.005: D/DB(25384): After Insert :: 3
 12-17 23:00:12.005: D/DB(25384): 0004 :: PatientClass-v1.0.xml
 12-17 23:00:12.005: D/DB(25384): Before Insert
 12-17 23:00:12.145: D/DB(25384): After Insert :: 4

 12-17 23:00:18.815: D/DB(25384): Before Insert
 12-17 23:00:18.865: D/DB(25384): After Insert :: 131
 12-17 23:00:18.865: D/DB(25384): ZU057 :: LocationHiding-v1.0.xml
 12-17 23:00:18.865: D/DB(25384): Before Insert
 12-17 23:00:18.925: D/DB(25384): After Insert :: 132 
```

这对我来说似乎太慢了，什么可能会减慢它的速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T00:37:24.157

```
public DataBase openWithTrans() throws SQLException {
    ourHelper = new DataBaseHelper(ourContext, DATABASE_NAME,
            DATABASE_LOCATION);
    db = ourHelper.getWritableDatabase();
    db.beginTransaction();
    return this;
}

public void closeWithTrans() {
    try {

        db.setTransactionSuccessful();

    } catch (Exception e) {
        e.printStackTrace();
    }finally{

        db.endTransaction();
        Debug.debugMsg("end trans successful");
        db.close();
        Debug.debugMsg("close db successful");
        if (ourHelper != null) {
            ourHelper.close();
        }
    }

} 
```

上面的代码将使您能够进行交易。在交易模式下，您应该能够大大提高您的速度。正如评论指出的那样，您开始事务然后插入您的 x 行然后关闭它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:19:17.863

DB操作可能会很慢，因为涉及IPC，以及SD卡访问时间，但我没有测量过。但是，您可以执行 bulkInsert 或 applyBatch，而不是执行数百次插入。您是否打算调查为什么它很慢或寻找更快的方法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:33:40.413

作为替代方案，您可以将构建就绪的数据库文件保存在 /data/data/XX/database 下的评估和硬拷贝/写入中。

一次安装很有用。

# magento - 在 magento 中编辑配置值（magento 扩展）

> ID：13923854
> 
> 赞同：1
> 
> 时间：2012-12-17T23:15:25.590
> 
> 标签：magento

我创建了一个 Magento 扩展，它使用 /etc/ 目录中的 system.xml 文件（对于我的模块）将字段添加到我的配置中。Magento 1.5 是我目前的目标系统，但我也打算将兼容性扩展到 1.4 和 .16

```
<merchantid translate="label">
      <label>Merchant ID</label>
      <frontend_type>text</frontend_type>
      <sort_order>20</sort_order>
      <show_in_default>1</show_in_default>
      <show_in_website>1</show_in_website>
      <show_in_store>0</show_in_store>
</merchantid> 
```

我正在尝试在运行时填充此字段的值。目前，我在我的插件中运行它：`Mage::getStoreConfig('payment/mymerchant/merchantid');`它返回字段中填充的值。

我需要能够以编程方式更新这个字段，我试过这个：

```
 $installer = new Mage_Core_Model_Resource_Setup();
                $installer->startSetup();
                $installer->setConfigData("payment/mymerchant/merchantid", "TEST");
                $installer->endSetup(); 
```

但没有成功。我也无法在谷歌上搜索问题，因为大多数结果似乎并不相关。

有谁知道我如何设置这些值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T23:21:20.577

如果您正在寻找默认值，您可以执行以下操作：

```
<config>
...
    <default>
        <payment>
            <ezimerchant>
                <merchantid>TEST</merchantid>
            </ezimerchant>
        </payment>
    </default>
</config> 
```

如果您真的在寻找程序化解决方案，您可以执行以下操作：

```
$configModel = Mage::getModel('core/config');
$configModel->saveConfig('payment/ezimerchant/merchantid','TEST'); 
```

The third parameter is what cope to save it, 'default', 'website', 'store'. The fourth parameter defines which Website ID or Store ID you want to save it with.

Edit: You must either disable cache when doing this or refresh/flush cache afterwards for the change to take effect.

# php - 在 joomla / php 应用程序中使用第 3 方 Web 服务 API

> ID：13923855
> 
> 赞同：0
> 
> 时间：2012-12-17T23:15:33.423
> 
> 标签：php, api, joomla, joomla2.5

我正在使用 joomla 平台创建自定义应用程序。我有一些需要在我的应用程序中使用的第 3 方 Web 服务 API。

我不太确定如何从 API 发送和获取信息。是否可以做与浏览器相同的事情，即向 API 发送 get/post 请求，并返回响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:54:50.987

在 joomla API 中找到 JHttpTransportCurl 类。看起来这会奏效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:20:43.033

请看一下 curl 扩展。这使您可以像浏览器一样拨打电话。

[卷曲扩展](http://www.php.net/manual/en/book.curl.php)

# c# - 是否有用于比较 Mono 中的字节数组的 memcmp 等价物？

> ID：13923857
> 
> 赞同：7
> 
> 时间：2012-12-17T23:15:49.210
> 
> 标签：c#, c, mono, bytearray, memcmp

`memcmp`通过从 导入函数来比较 .Net 中的两个字节数组有一种众所周知的效率，如此[处](https://stackoverflow.com/a/1445405)`msvcrt.dll`所述。

单声道中是否有等效的库导入？在 Linux 或 Windows 上运行单声道时是否需要有所不同？还是有另一种在单声道中效果很好的快速字节数组比较技术？我正在寻找比仅在 c# 中迭代​​数组更好的东西。

**更新**

根据 Matt Patenaude 的评论，我认为这可能会很好：

```
#if __MonoCS__
    [DllImport("c", CallingConvention = CallingConvention.Cdecl)]
#else
    [DllImport("msvcrt.dll", CallingConvention = CallingConvention.Cdecl)]
#endif
    public static extern int memcmp(byte[] b1, byte[] b2, UIntPtr count); 
```

但我还没有尝试过。我以前从未在单声道上做过 p/invoke。我正在使用[pinvoke.net](http://www.pinvoke.net/default.aspx/msvcrt.memcmp)上推荐的签名。这会兼容吗？

寻找一个专注于单声道的答案。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T04:27:40.880

根据您的更新，您不应该使用`__MonoCS__`预处理器。这意味着您必须为 Mono 和 .NET 重新编译库。更好的方法是使用`dllmap`Mono 中的功能并且只使用`msvcrt.dll`DllImport。

而是定义一个“AssemblyName.dll.config”并在 Mono 上运行时使用该`dllmap`标记映射`msvcrt.dll`到。`c`

例子：

```
<configuration>
    <dllmap dll="msvcrt.dll" target="libc.so.6" />
</configuration> 
```

此处有关 dllmap 的更多详细信息：[http ://www.mono-project.com/Config_DllMap](http://www.mono-project.com/Config_DllMap)

**编辑**

如果由于某种原因`c`不起作用，`libc.so`应该起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T23:39:13.050

您可以使用`unsafe`代码块访问字节数组，其速度几乎与 native 一样快`memcmp`。在你沿着这条路走之前，确保直线`for`循环的速度不足以满足你的目的。

# asp.net-mvc - 尝试在 ASP MVC 中访问 Linq 查询的结果

> ID：13923859
> 
> 赞同：1
> 
> 时间：2012-12-17T23:15:54.327
> 
> 标签：asp.net-mvc, visual-studio-2010, linq

下面是我在一个 ASP MVC 控制器中使用的 Linq 查询。我试图从 SQL 数据库中提取一条记录，然后将其与用户的输入进行比较。如果用户输入的状态代码与用户输入的产品代码相关的状态代码不匹配，它将返回一条错误消息。

不过，我对如何从“课程”变量访问 StateCode 字段感到困惑。使用 Visual Studio，我可以单步执行代码并查看其中的值（通过 Locals 窗口/读数检查时），但是我不知道如何获得我正在寻找的值。

这是我第一次使用 Linq，所以任何和所有的帮助/建议都将不胜感激。谢谢！

```
 var course = from c in db.AgentContEd
                             where c.CourseCode == agentconted.CourseCode
                             select c;

                if (agentconted.StateCode.Equals(course.StateCode))
                {
                    db.AgentContEd.Add(agentconted);
                    db.SaveChanges();
                    return RedirectToAction("Details", "Agent", new { id = agentconted.SymetraNumber });
                }
                else
                {
                    ViewBag.ErrorMessaeg = "State code must match Product Training state code";
                } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-17T23:19:11.383

`IQueryable<T>`当您需要一个实体时，您正在撤回。如果您的查询没有产生结果记录，则 course 将设置为 null。返回超过 1 条记录的查询将引发异常。

```
(from c in db.AgentContEd
where c.CourseCode == agentconted.CourseCode
select c)
.SingleOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:24:20.417

还值得注意的是，如果您的 CourseCode 不受唯一键约束的约束，您将需要使用`FirstOrDefault`或将查询包装在 try/catch 块中，`SingleOrDefault`如果返回多个结果，则会引发错误。

# javascript - 在 Ember.js 中手动设置单向绑定的正确语法是什么？

> ID：13923862
> 
> 赞同：2
> 
> 时间：2012-12-17T23:16:07.320
> 
> 标签：javascript, ember.js

我阅读了文档和来源，但仍然对两者感到困惑。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T23:59:43.853

`Ember.Binding(to, from).oneWay().connect(obj)`是您如何直接创建一个但是有一个别名`Ember.oneWay(obj, to, from)`可以做同样的事情..一个示例用法：

```
App.aObject = Ember.Object.create({
    val: "blah blah"
});

App.bObject = Ember.Object.create({
    val: ""
});

Ember.oneWay(App, 'bObject.val', 'aObject.val');

Ember.get('App.bObject.val'); // => "blah blah" 
```

您可以将 Ember.oneway() 捕获到一个变量中，以用于稍后手动断开绑定，但通常我只是使用 Ember 的幕后巫术通过结束“绑定”中的值来创建绑定绑定创建，所以我们最终得到：

```
App.aObject = Ember.Object.create({
    val: "blah blah"
});

App.bObject = Ember.Object.create({
    valBinding: Ember.Binding.oneWay('App.aObject.val');
});

Ember.get('App.bObject.val'); // => "blah blah" 
```

# ruby - Sinatra 上没有方法错误

> ID：13923865
> 
> 赞同：0
> 
> 时间：2012-12-17T23:16:19.093
> 
> 标签：ruby, rubygems, sinatra, bundler, ruby-datamapper

设置好我的 config.ru 和 gemfile 后，我的帖子不再工作了。

首先，我必须在我的 main.rb 中有我的 DataMapper.setup，我不能在我的 irb 中运行任何 DataMapper 方法。

其次，每当我通过 POST 提交表单以将一些数据保存到我的 db Sinatra 时返回...

```
NoMethodError at /
undefined method `each' for "asdfasdf":String

file: resource.rb
location: attributes=
line: 329 
```

主文件

```
#Required Gems
  require 'sinatra'
  require 'data_mapper'

DataMapper.setup(:default, ENV['DATABASE_URL'] || 'postgres://host:password!@localhost
/blog_development')

#Database Migration
  class Code
    include DataMapper::Resource
    property :id,           Serial
    property :code,         String, :required => true
    property :translation,  String
    property :completed_at, DateTime
  end

#Set up Migration
  DataMapper.finalize

#Routes Section
get '/' do
  @codes = Code.all
  slim :index
end

#Get Code
get '/:code' do
  @morse_code = params[:code]
  slim :code
end

#POST Code
post '/' do
  @code = Code.create params[:code]
  redirect to('/')
end 
```

宝石文件

```
source :rubygems

gem "sinatra", "~> 1.3.3"

gem "data_mapper", "~> 1.2.0"

gem "slim", "~> 1.3.4"

gem "dm-postgres-adapter", "~> 1.2.0" 
```

配置.ru

```
require 'bundler'

Bundler.require

require './main'

DataMapper.setup(:default, ENV['DATABASE_URL'] || 'postgres://host:password@localhost

/blog_development')

run Sinatra::Application 
```

请注意，asdfasdf 是我在提交之前在表单输入框中输入的文本。

对于回购，以防有人想对其进行现场测试...... [https://github.com/thejourneydude/morsecode](https://github.com/thejourneydude/morsecode)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T23:50:12.403

你在打电话`Code.create params[:code]`。试试`Code.create :code => params[:code]`。这样，字符串不会在 datamapper 期望属性散列的地方结束。

# teamcity - 使用 TeamCity 运行 FitNesse 测试

> ID：13923866
> 
> 赞同：0
> 
> 时间：2012-12-17T23:16:20.747
> 
> 标签：teamcity, fitnesse

所以，我找到了这个应该运行 FitNesse 测试的 TeamCity 插件[https://github.com/EKibort/TeamCityFitnessePlugin](https://github.com/EKibort/TeamCityFitnessePlugin)

我正在努力安装它。自述文件中的说明说，

**安装副本`Fitnesse.zip`到插件目录（适用于 windows `%USERPROFILE%\.BuildServer\plugins`）并重新启动 TeamCity 服务器**

没有`Fitnesse.zip`。关于如何安装它的任何建议？

**第二个问题**：这是从 TeamCity 运行 FitNess 测试的最佳方式吗？欢迎任何替代选择建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T16:55:15.550

发现我将内置插件放在错误的位置。我按照指示安装在 BUILD AGENT 机器上，而不是 BUILD SERVER 机器上。

希望这对将来的某人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T10:07:57.453

您必须先构建插件。你读过自述文件吗？

# jquery - jQuery 正确执行但只进行一次更改

> ID：13923878
> 
> 赞同：0
> 
> 时间：2012-12-17T23:17:15.697
> 
> 标签：jquery, ruby, ajax, ruby-on-rails-3

我有这个 rails3 应用程序，它在弹出 div 中显示一个分数，每次用户选择分数时我都希望更新该分数......（提交表单。）在服务器端计算分数并以 AJAX 形式返回。这行得通，我可以在以下 JavaScript 中放置一个断点：

```
$('#eval_form')
    .bind("ajax:beforeSend", function (evt, xhr, settings) {
        xhr.setRequestHeader('accept', '*/*;q=0.5, ' + settings.accepts.script)
    })
    .bind("ajax:success", function (evt, data, status, xhr) {
        var $response = xhr.responseText
        var encoded = jQuery.parseJSON($response)
        $('#scoretotal').replaceWith('Total Evaluation Score: ' + encoded.scores[0])    

        //also change button text
        $('#score-popup').attr('value', 'testing value')
    });
}); 
```

`encoded.scores[0]`和 `encoded.scores[1] 等于他们想要的。jQuery 的其余部分执行，第一行 scoretotal 工作正常，它确实会改变这个分数...ONCE 任何后续的新商店，它只是不再更新或替换......

不仅如此，按钮

```
<button id="score-popup"><%= @document.score %></button> 
```

上面的 jquery 甚至 .prop 的值都不会改变我不知道为什么这会如此不稳定......这是视图中的其余代码：

```
<div id="element_to_pop_up" class="bobsyouruncle">
   <a class="bClose">x</a>
   <table cellpadding="10">
   <tr>
      <th colspan="3">OVERALL EVALUATION RATING</th>
   </tr>
   <tr>
     <td colspan="3" id="scoretotal">Total Evaluation Score: <%= @document.score %></td>
  </tr>
  ...etc...
  </table>
</div> 
```

所以我认为我在做一些愚蠢的事情，这一切都在执行，甚至是某种工作（总分改变了一次，之后不再有一次，并且分数弹出窗口永远不会改变......这与这篇文章有关吗：

[jQuery Ajax 只执行一次，但似乎每次都应该调用](https://stackoverflow.com/questions/9099589/jquery-ajax-only-executing-once-but-appears-to-call-every-time-it-should)

??

编辑：我确实通过这样做使按钮工作：

```
 $('#score-popup').html(encoded.scores[0]) 
```

（显然是因为它是一个 html 按钮）并且有效，尽管其余代码仅在第一次执行时才有效，随后的代码不会更改数据，也许我抓住了错误的东西？或者没有用 replaceWith 正确改变它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:36:51.313

您正在用其他东西替换整个表格单元格，因此在第一次之后不再有表格单元格。

仅将动态值包装在 span 标签中：

```
Total Evaluation Score: <span id="lbDocumentScore"><%= @document.score %></span> 
```

然后分配其内部文本：

```
var $response = xhr.responseText;
var encoded = jQuery.parseJSON($response);
$('#lbDocumentScore').text(encoded.scores[0]); 
```

# jquery - .focus() 不使用 .parent() 添加类

> ID：13923881
> 
> 赞同：1
> 
> 时间：2012-12-17T23:17:29.197
> 
> 标签：jquery, button, focus, parent, addclass

有一个问题我似乎无法动摇。我有几个表格行，我使用 jQuery 在单击它们时突出显示它们。我的一些行只有一个输入/按钮/复选框/文本区域，因此它们没有被跨度描绘，我正在使用另一个只有两个父级的函数。那些工作正常。寻址的“跨度输入”也是如此。另一方面，“跨度按钮”没有添加活动类。奇怪的是，如果我在桌面浏览器中查看它并单击它，使另一个应用程序的窗口处于活动状态或在浏览器中添加一个新选项卡，然后单击返回它，它会按应有的方式突出显示。

不知道发生了什么事。请帮忙！非常感谢！

HTML：

```
<tr>
    <td class="input">
        <span>
            <label for="buttonA">ButtonA Label</label>
            <button name="buttonA" type="button"/>ButtonA</button>
        </span>
        <span>
            <label for="buttonB">ButtonB Label</label>
            <button name="buttonB" type="button"/>ButtonB</button>
        </span>
    </td>
    <td class="unit">
        Unit
    </td>
    <td class="info">
        Description or additional info</br>
        With multiple lines
    </td>
    <td class="action">
        <div id="delete" class="btn"><img src="delete_icon.png"></div>
        <div id="drag" class="btn"><img src="drag_icon.png"></div>
    </td>
</tr> 
```

CSS：

```
.active {
    background: rgb(227,238,255) !important;
} 
```

jQuery：

```
$("span input,span button").focus(function() {
    $(this).parent().parent().parent().addClass('active');
}); 
```

# ruby - 用于 Ruby 的强大 TCP 服务器？

> ID：13923882
> 
> 赞同：2
> 
> 时间：2012-12-17T23:17:45.773
> 
> 标签：ruby, tcp, tcpserver

任何人都可以为 Ruby 推荐一个健壮的 TCP 服务器（比如用于 JavaScript 的 Node.js）吗？我知道有一个可用于 Ruby 的 TCPServer 类，但我需要更健壮的东西，因为我不想编写代码来处理多个客户端和多线程等。Ruby TCP 有没有库/框架有点像 Node.js 的服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:23:25.363

听起来您想要[EventMachine](https://github.com/eventmachine/eventmachine/wiki)或[Celluloid](http://celluloid.io/)。EM 是事件驱动的并发，其运行方式与 node.js 非常相似。赛璐珞是更传统的多线程。

如果您使用 MRI，我建议您先查看 EM，因为 MRI Ruby 的并发模型存在限制。如果您使用的是 JRuby，那么 Celluloid 可能是正确的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T14:17:28.290

看看[Sinatra](http://www.sinatrarb.com)，尤其是他们的“ [README](http://www.sinatrarb.com/intro) ”。它非常易于使用，可以处理多个客户端和多线程并且易于设置。

正如他们在网站首页上显示的那样，将其放入名为“hi.rb”的文件中：

```
require 'sinatra'

get '/hi' do
  "Hello World!"
end 
```

然后，在命令行类型：

```
gem install sinatra
ruby hi.rb 
```

你会跑起来。如果您使用安装[Thin](http://code.macournoyer.com/thin/)`gem install thin`，Sinatra 将使用它作为其底层 HTTPd，您将获得[Event Machine](http://rubyeventmachine.com)的基础。

据我所知，Sinatra 是使用 Ruby 在 Web 上获取内容的最快和最简单的方法，而且它非常健壮。对于正常的内部使用来说，它很棒。

作为 Sinatra 的下一步，请查看[Padrino](http://www.padrinorb.com)。它建立在 Sinatra 之上，但更像 Rails。

I'll also recommend looking at [HAML](http://haml.info) for generating your HTML content. It's a great tool.

# c - 在C中每x秒执行一个方法

> ID：13923885
> 
> 赞同：7
> 
> 时间：2012-12-17T23:18:07.587
> 
> 标签：c, linux, ubuntu, timer, intervals

是否有一个工作计时器的示例，它使用 C 每 x 秒执行一些功能。

我很感激一个示例工作代码。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-17T23:50:55.173

您可以生成一个新线程：

```
void *threadproc(void *arg)
{
    while(!done)
    {
        sleep(delay_in_seconds);
        call_function();
    }
    return 0;
}
...
pthread_t tid;
pthread_create(&tid, NULL, &threadproc, NULL); 
```

[`alarm(2)`](http://linux.die.net/man/2/alarm)或者，您可以使用or设置警报[`setitimer(2)`](http://linux.die.net/man/2/setitimer)：

```
void on_alarm(int signum)
{
    call_function();
    if(!done)
        alarm(delay_in_seconds);  // Reschedule alarm
}
...
// Setup on_alarm as a signal handler for the SIGALRM signal
struct sigaction act;
act.sa_handler = &on_alarm;
act.sa_mask = 0;
act.sa_flags = SA_RESTART;  // Restart interrupted system calls
sigaction(SIGALRM, &act, NULL);

alarm(delay_in_seconds);  // Setup initial alarm 
```

当然，这两种方法都有一个问题，即您定期调用的函数需要是线程安全的。

signal 方法特别危险，因为它还必须是异步安全的，这很难做到——即使是像`printf`不安全这样简单的事情，因为`printf`可能会分配内存，并且如果`SIGALRM`中断对 的调用`malloc`，你就会遇到麻烦，`malloc`因为不可重入。所以我不推荐使用信号方法，除非您所做的只是在信号处理程序中设置一个标志，该标志稍后会被其他一些函数检查，这会使您回到与线程版本相同的位置。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-17T23:54:12.853

使用间隔计时器和信号有多种传统方法可以做到这一点，但我将介绍两种现代方法：

### 使用 POSIX 计时器

POSIX`timer_create`函数创建一个计时器，该计时器可配置为在计时器到期时提供一次性或定期通知。创建计时器时，您可以通过信号或在新线程中请求传递。由于正确使用信号很复杂（对于信号处理程序可以做什么和不可以做什么有严格的规定，并且违反规则通常“似乎有效”，直到你不走运），我建议使用基于线程的交付。

### 用线程滚动你​​自己的计时器

这真的很简单。让一个新线程进入循环睡眠并在每次所需时间过去时做任何你需要做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-30T08:32:10.357

如果我们不想要线程，我们可以使用`sleep`

```
int time = 10;
printf("time: %ds\n", time);
int i = 0;
while(i<time) {

        printf("doing stuff in duration %d\n", i);
        //stuff();
        sleep(1);
        i++;
} 
```

东西每1s启动一次，所以我们希望能在这段时间内完成，否则它必须照顾资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-01T18:29:35.010

IMO，在这种情况下，您可以利用`gettimeofday()`以下算法：使用`while(1)`计算当前时间和 last_execution_time 之间的时间差的算法，每次差值达到 1 秒，更新 last_execution_time 并调用应该每 1 秒运行的函数。

```
#include <stdio.h>
#include <sys/time.h>

#DEFINE DESIRED_INTERVAL 1  //1 second
int get_tv_cur_minus_given(struct timeval *tv, struct timeval *tp_given, int *sign)
{
    struct timeval tp_cur;

    gettimeofday(&tp_cur,NULL);

    tv->tv_sec  = tp_cur.tv_sec - tp_given->tv_sec;
    tv->tv_usec = tp_cur.tv_usec - tp_given->tv_usec;

    if(tv->tv_sec > 0) {
        *sign = 1;
        if(tv->tv_usec < 0) {
            tv->tv_sec--;
            tv->tv_usec = 1000000 + tv->tv_usec;
        }
    }else
    if(tv->tv_sec == 0) {
        if(tv->tv_usec == 0)
            *sign = 0;
        else
        if(tv->tv_usec < 0) {
            *sign = -1;
            tv->tv_usec *= -1;
        }else
            *sign = 1;
    }else {
        *sign = -1;
        if(tv->tv_usec > 0) {
            tv->tv_sec++;
            tv->tv_usec = 1000000 - tv->tv_usec;
        }else
        if(tv->tv_usec < 0)
            tv->tv_usec *= -1;
    return 0;
        }
}

int main()
{
    struct timeval      tv_last_run;
    struct timeval  tv_diff;
    int sign;

    while(true)
    {

     get_tv_cur_minus_given(&tv_diff, &tv_last_run, &sign);

        if(tv_diff.tv_sec > DESIRED_INTERVAL)
        {
            gettimeofday(&tv_last_run,NULL);
            printf("\ncall the func here");
        }
    }

    return 0;
} 
```

如果您需要主线程之外的不同线程，请将 main() 中的行移动到函数指针中并通过 pthread_create 函数传递它，例如：

```
void *threadproc(void *arg)
{
   while(1)
   {
       //put the same lines as inside main() function in above code snippet. .
   }
}
pthread_create(&tid, NULL, &threadproc, NULL); 
```

# ruby-on-rails - 跟踪来自多个用户的点击

> ID：13923886
> 
> 赞同：0
> 
> 时间：2012-12-17T23:18:08.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

**我需要一些建议：**

我正在开发一个 Rails 应用程序，其中多个用户单击一个按钮。我需要知道按钮被点击了多少次，并在点击量达到一定数量时禁用按钮。

**什么是更好的？**

1.  在按钮表中包括一个名为“clicks”的列，并在每次单击按钮时将数字更新为 1？
2.  创建一个 clicks 表并在每次单击按钮时插入一行然后检查行数？
3.  其他建议也很好。

**编辑**

每个用户可以无限次单击该按钮，我需要知道哪个用户导致该按钮被禁用。

我最初的想法是一个有 4 列的表：每次`title` `goal` `user_id` `current_number` 只增加`current_number`1 并存储使数字达到目标的用户的用户 ID。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T00:10:51.117

您的第一个解决方案似乎是合适的，我看到的唯一缺点是，一旦达到点击目标，您的`current_number`领域就会变得多余，但我真的看不出有任何方法可以解决这个问题而不会使您的应用程序过于复杂。

我认为您唯一可以扩展的可能是将某种后台排队系统与 Res 后端（例如[Resque](https://github.com/defunkt/resque)或[Sidekiq ）结合起来](https://github.com/mperham/sidekiq)。但是，如果性能是一个问题，我只会看这条路。

您可以查看github 上的[推荐存储库，了解使用后台处理和 redis 的类似实现。](https://github.com/davidcelis/recommendable)

# python - 使用列表反转顺序后在python中重建字典

> ID：13923891
> 
> 赞同：1
> 
> 时间：2012-12-17T23:18:32.040
> 
> 标签：python, list, dictionary, reverse

我想在这篇文章[反向字典顺序](https://stackoverflow.com/questions/6083531/python-reverse-dictionary-order)中做同样的事情。我不明白如何使用 OrderedDict。我用反向列表上使用的 dict() 方法尝试了这段代码，但它给了我初始字典。

```
mydic = {'n1': 3, 'n2': 9}
ol = mydic.items()
ol.reverse()
print(ol)
dc = dict(ol)
print(dc) 
```

结果我得到：

```
ol >> [('n2', 9), ('n1', 3)]
dc >> {'n1': 3, 'n2': 9} 
```

有没有办法在颠倒顺序后重建字典？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:20:53.863

您的方法的主要问题是原始 dict 不保证其键的任何特定顺序。虽然您可以获得 的`mydic`项目的快照、颠倒顺序并将结果存储在 中`OrderedDict`，但其输出将是未定义的（因为输入未定义）。

换句话说，垃圾进垃圾出。

如果您从一个可迭代的键值对开始，那么您可以使用`OrderedDict`：

```
In [18]: ol = [('n2', 9), ('n1', 3)]

In [19]: OrderedDict(reversed(ol))
Out[19]: OrderedDict([('n1', 3), ('n2', 9)]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T23:21:15.030

常规 Python 字典不保留任何顺序，因此重新排列键不会有任何用处。

话虽这么说，`OrderedDict`使用起来真的很简单：

```
>>> from collections import OrderedDict
>>> 
>>> ol = [('n2', 9), ('n1', 3)]
>>> dc = OrderedDict(ol)
>>> dc
OrderedDict([('n2', 9), ('n1', 3)]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:22:19.153

使用[collections.OrderedDict](http://docs.python.org/2/library/collections.html#ordereddict-objects)

> 有序字典就像普通字典一样，但它们会记住插入项目的顺序。当迭代一个有序字典时，项目按照它们的键被第一次添加的顺序返回。

# symfony - Symfony 2 - 配置值：关联数组的数组

> ID：13923892
> 
> 赞同：3
> 
> 时间：2012-12-17T23:18:36.240
> 
> 标签：symfony

我想处理以下配置：

```
acme_demo:
    transitions:
        - { hc_cba: 180 }
        - { cba_hc: -1 } 
```

很明显，我需要添加一个arrayNode，比如

```
$rootNode
    ->children()
        ->arrayNode('transitions')
            ->beforeNormalization()
                ->ifArray()
                    ->then(function($values) {
                        return array('transition' => $values);
                    })
                ->end()
            ->end()
        ->end()
    ->end()
; 
```

但这给了我一个带有消息的 InvalidConfigurationException

```
Unrecognized options "transitions" under "acme_demo.state_machine" 
```

我应该如何处理那些“内在”价值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:32:59.183

在写下问题后，经过数小时的尝试后，巨大的压力促使我找到了解决方案：

```
$rootNode
        ->children()
            ->arrayNode('state_machine')
                ->requiresAtLeastOneElement()
                ->beforeNormalization()
                    ->ifArray()
                        ->then(function($values) {
                            $ret = array();

                            foreach ($values as $value) {
                                foreach ($value as $transition => $time) {
                                    $ret[] = array('transition' => $transition, 'time' => e);
                                }
                            }

                            return $ret;
                        })
                    ->end()
                    ->prototype('array')
                    ->children()
                        ->scalarNode('transition')->end()
                        ->scalarNode('time')->end()
                    ->end()
                ->end()
            ->end()
        ->end()
    ; 
```

# url-rewriting - 简单的 nginx 重写问题

> ID：13923897
> 
> 赞同：0
> 
> 时间：2012-12-17T23:18:56.717
> 
> 标签：url-rewriting, nginx, rewrite

我今天一直在努力了解 nginx 重写，并在这里阅读了几个问题/答案，并彻底阅读了我遇到的几个指南。

虽然大多数事情对我来说都很自然，但我只是没有掌握它，也许是因为我对任何形式的正则表达式都没有经验。

我有一个 download.php 脚本，它覆盖了我的 nginx 标头并强制浏览器使用“另存为”对话框执行下载，而不是打开一个新页面。

它工作得很好，但是我想对用户隐藏脚本本身的 url。

具体来说，我想更改此 URL：

```
http://www.example.com/scripts/download.php?id=http://www.example.com/images/0/1/fullsize/96698298450ca01a60875e_34.jpg 
```

这样对用户来说，它只是显示为`id`GET 参数：

```
http://www.example.com/images/0/1/fullsize/96698298450ca01a60875e_34.jpg 
```

但对于我的生活，我似乎无法让它发挥作用。

希望有人能来救援。提前致谢。

**编辑：**

只是为了让我的问题更加清晰......理想的解决方案是让我能够在我的网络应用程序中拥有这样的链接：

```
 http://www.example.com/images/0/1/fullsize/96698298450ca01a60875e_34.jpg?dl=1 
```

让 nginx 发现它有一个 dl=1 并且在 /images/ 目录中，然后重写它以使用下载脚本：

```
 http://www.example.com/scripts/download.php?id=http://www.example.com/images/0/1/fullsize/96698298450ca01a60875e_34.jpg 
```

这样，当仅查看图像时，它们将通过脚本，并且仅当 dl=1 参数到位时，图像才被重写并通过脚本路由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:58:04.810

如果我正确理解您的问题，您想`http://www.example.com/images/0/1/fullsize/96698298450ca01a60875e_34.jpg&dl=1`在您的网络应用程序中放置链接，当用户单击链接时，他们会被重定向到 download.php 脚本？

假设您要重定向到同一主机，下面的 rewrite 指令应该可以实现这一点。这将应用于以**和**查询参数开头的**任何**url 路径。这将执行 302（临时）重定向。如果您想要永久 (301) 重定向，请替换为.`/images/` **`dl=1``redirect``permanent`**

 **```
location /images/ {
    if ($args ~ "dl=1") {
        rewrite ^/images/(.*)$ /scripts/donwloads.php?id=$scheme://$host/images/$1 redirect;
    }
} 
```

如果您尝试另一种方式（具有指向 download.php 脚本的链接，但将用户重定向到实际资源 url - 不知道为什么，并且可能做这样的盲目重定向是一个坏主意），您可以这样做指令（值得检查`id`查询字符串参数是否存在）

```
location /scripts/download.php {
    rewrite ^(.*)$ $arg_id? permanent;
} 
```

让我知道这些解决方案中的任何一个是否朝着您想要的方向发展，我们可以对其进行调整以满足您的需求。**

# selection - 锦标赛选择的一般算法

> ID：13923900
> 
> 赞同：0
> 
> 时间：2012-12-17T23:19:10.117
> 
> 标签：selection, genetic-algorithm, tournament

我有一个关于如何在 GA 中使用锦标赛选择的问题。假设我有 100 个人作为初始种群，然后我想对 n 代应用锦标赛选择，所以每次迭代我最终只有 20% 的染色体。我想出的算法是：

```
choose 20% of the initial population
while (not end of iterations)
    select randomly n individuals from the left population (20%)
    if (number of chromosomes greater than two)
        select the best and mutate
        add to the population
    if (number of chromosomes greater than three)
        select best two of each pair and crossover them
        add crossover product to the population
    repeat process with new population
end while 
```

这个架构正确吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:46:21.997

无视 80% 的人口不是 GA 的本意。为什么你还有它们？这将增加遗传漂移并导致过早收敛。

比赛选择的工作方式是，您选择 n 个人，然后将最好的个人作为父母 1。然后您再次选择 n 个人并获得父母 2。这些是您交叉的人。

对于人数为 100 的二元锦标赛，通常应该施加足够的选择压力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T23:59:01.583

可能是，但这取决于您在该大纲中所做的一些细节：

*   参加比赛的人必须是这一代人中最适合的*人*
*   *从*比赛中选出的个人需要根据他们的健康状况进行一定比例的选择
*   当您为下一个种群生成新个体时，您需要生成足够的数量以使种群恢复到以前的水平

另外，上面说：

*   剔除到 20% 对我来说似乎非常陡峭
*   通常父母的数量是固定的，而不是可变的或随机的
*   通常（但并非总是）父母的数量是两个，因为您拥有的父母越多，您保留更长有益图式的可能性就越小

# java - SQL 查询中列名前面的值是什么？

> ID：13923906
> 
> 赞同：0
> 
> 时间：2012-12-17T23:19:44.163
> 
> 标签：java, sql

这可能是一个非常愚蠢的问题，但我正在重新利用一些代码。我不是一个 SQL 人。在这段代码中：

`select a1.email_id from v_account_email a1`

什么是a1？它有什么作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:22:01.150

它是表 v_account_email 的别名，它有一个长名称，因此您可以省去在查询的其余部分中键入的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:22:41.477

`a1`是表的别名`v_account_email`

它在sql的后半部分定义

```
 from v_acount_email a1 
```

这只是参考表格的一种简短方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T23:26:00.877

`a1`是 的别名`v_account_email`，这意味着您可以在`a1`此后引用该表实例。

对...有用

*   普遍的懒惰
*   如果由于某种原因需要将表与其自身连接，则在选择中对同一个表的多个引用。

# r - 拆分值，然后使用 R 对它们进行操作

> ID：13923907
> 
> 赞同：0
> 
> 时间：2012-12-17T23:19:51.927
> 
> 标签：r

我有一个包含 3 列的 data.frame。第三列有数字或字符类型“1:5”、“30:20”、“1:10”等。我试图将具有这些字符的值分成两部分，然后将它们分开，但我我坚持这个：

```
 datos[,3]=gsub(":", " ", datos[,3])
    if (datos[,1]==TRUE)
    {
    s=datos[,3]
    chr.pos <- which(unlist(strsplit(s,NULL)) == " ") 
    chr.count <- length(chr.pos)
    one=as.numeric(substr(s,1,chr.pos-1))
    two=as.numeric(substr(s,chr.pos+1,nchar(as.character(s))))
    datos[,3]=round(two/one,5)
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:25:11.863

如果您可以确定始终有两个数字用冒号分隔，`:`则可以执行以下操作：

```
x <- c('1:5', '30:20', '1:10')
strsplit(x, ':')

lapply(strsplit(x, ':'), function(v) as.integer(v[1])/as.integer(v[2])) 
```

然后将其分配回您想要的位置。如果它是一个data.frame：

```
datos[,3] <- unlist(lapply(strsplit(x, ':'), function(v) as.integer(v[1])/as.integer(v[2]))
) 
```

* * *

走过那些东西：

`strsplit`返回一个向量列表，其中包含您传递的拆分字符两侧的内容（我使用过`:`）。看看它的作用：

```
str(strsplit(x, ':'))

List of 3
 $ : chr [1:2] "1" "5"
 $ : chr [1:2] "30" "20"
 $ : chr [1:2] "1" "10" 
```

`lapply`作用于列表，将您指定的函数应用于列表的每个元素。我定义了一个将第一个值除以`v`第二个的函数。但是，我需要将它们强制转换为数字，因为它们来自`strsplit`as 字符串。

最后，`lapply`还返回一个列表。如果您将其直接分配给您的列，您`data.frame`会感到不快。相反，使用`unlist`将列表更改为向量并将其分配给您的`data.frame`列。

此外，正如评论中提到的 mnel ，`data.table`它是一个 R 包，它具有一些出色的功能，但与基本 R 数据结构有很大不同的语法`data.frame`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:53:36.350

试试这个。注意：添加了“col.names”以禁止默认处理行名。

```
x=c("1", "2", "3", "2:3","4","5","3:2")
 datos <- data.frame(1:7, 1:7, x=x)
newframe <- cbind( datos[1:2], 
                 read.table(text= as.character(datos[[3]]), sep=":",
                            fill=TRUE, colClasses="numeric", 
                           col.names=c("V3", "V4")
                           )
                  )

> newframe
  X1.7 X1.7.1 V3 V4
1    1      1  1 NA
2    2      2  2 NA
3    3      3  3 NA
4    4      4  2  3
5    5      5  4 NA
6    6      6  5 NA
7    7      7  3  2 
```

# java - 猜谜游戏 - 如何记分

> ID：13923909
> 
> 赞同：1
> 
> 时间：2012-12-17T23:20:00.163
> 
> 标签：java

本质上，我想在我目前构建的猜谜游戏中输入一个评分系统，代码如下。目前，当用户猜测正确的数字时，他们会被告知他们的分数当前设置为 10。我想要做的是将分数设置为 10，并且每次猜测不正确时，该值都会减一。在用户玩游戏时，我也很难实现退出功能。你们能建议我如何将这些东西添加到我的代码中吗？注意：我在服务器上做猜谜游戏，我只会发布协议部分。

协议

```
import java.util.*;

public class KKProtocol {
    int guess = 0, number = new Random().nextInt(100) + 1;
    int score = 0;
    Scanner scan = new Scanner(System.in);

    public String processInput(String theInput) {
        String theOutput = null;

        System.out.println("Please guess the number between 1 and 100.");

        while (guess != number) {
          try {
            if ((guess = Integer.parseInt(scan.nextLine())) != number) {
              System.out.println(guess < number ? "Higher..." : "Lower...");
            }
            else {
              System.out.println("Correct!");
              score = 1;
            }
          }   
          catch (NumberFormatException e) {
            System.out.println("Please enter a valid number! If you want to Quit just say'Goodbye'");
          }   

        }   

        return theOutput;   
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:27:19.930

你可以这样做：

```
if (score > 0 && (guess = Integer.parseInt(scan.nextLine())) != number) {
     System.out.println(guess < number ? "Higher..." : "Lower...");
     score--;
}
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T23:28:16.017

因猜错而降低分数：

```
if ((guess = Integer.parseInt(scan.nextLine())) != number) {
  System.out.println(guess < number ? "Higher..." : "Lower...");
  score = score - 1
} 
```

要结束游戏，您可以执行以下操作：

```
boolean gameRunning = true;
while (guess != number && gameRunning) {
  String input = scan.nextLine();
  if (input.toLowerCase().equals("Goodbye")) { // check for goodbye
    gameRunning = false;
  } else {
    try {
      if ((guess = Integer.parseInt(input)) != number) {
        ... 
```

您还可以使用`break`语句中断循环。

# sql - 将 BusinessObjects 用户 ID 传递给 CrystalReport

> ID：13923913
> 
> 赞同：1
> 
> 时间：2012-12-17T23:20:20.460
> 
> 标签：sql, oracle, crystal-reports, business-objects

是否可以在运行时将 Business Objects 用户 ID 传递给 Crystal 报表？我知道 BO 宇宙对此值有一个隐藏参数，我希望 CrystalReports/BO 有一个我可以使用的类似隐藏参数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T15:16:22.043

试试`CurrentCEUserID`物业。在公式编辑器的文档属性部分。

# jdbc - 如何使用 clojure.jdbc 查询列表

> ID：13923914
> 
> 赞同：2
> 
> 时间：2012-12-17T23:20:21.223
> 
> 标签：jdbc, clojure

```
(sql/with-connection {... mydatabase }
    (sql/with-query-results rows [ "select * from users where email in (?)" 
       [ "bob@site.com" "mary@other.com" ] ] 
       (doseq [rows row] 
            (prn row)))) 
```

这将始终不返回任何结果。我也试过只使用“？” 代替“（？）”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:17:51.007

AFAIR 你不能直接这样做。幕后宏`with-query-results`使用 java.sql.PreparedStatement 并为每个参数调用 .setObject。所以你必须写这样的东西

```
(sql/with-connection db
  (sql/with-query-results rs
    [(str "select * from users where email in ("
          (apply
           str
           (interpose ", " (map #(str "\"" % "\"")
                                ["bob@site.com" "mary@other.com"]))) ")")]
    ...)) 
```

使用“in”参数生成已经准备好的 sql 字符串：`"select * from users where email in (\"bob@site.com\", \"mary@other.com\")"`.

更好的方法是使用 clojure sql 库之一，如 sqlkorma。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-30T12:09:11.330

现在在 2020 年，您可以在没有字符串连接的情况下执行此操作，至少在 postgres 中是这样。

像这样扩展 ISQLParameter 协议：

```
; This allows us to use clojure arrays as query parameters for JDBC.
; Thus, we don't need to do string concatenation to make IN clauses.
(extend-protocol clojure.java.jdbc/ISQLParameter
  Sequential
  ; Important: Sometimes you have to explicitly specify the type of array like ?::text[].
  (set-parameter [v ^PreparedStatement stmt ^long i]
    (let [conn (.getConnection stmt)
          meta (.getParameterMetaData stmt)
          type-name (.getParameterTypeName meta i)]
      (if-let [elem-type (when (= (first type-name) \_) (apply str (rest type-name)))]
        (.setObject stmt i (.createArrayOf conn elem-type (to-array v)))
        (.setObject stmt i v))))) 
```

然后你可以运行像这样的查询

```
(jdbc/query db/db ["select 'banana' = ANY(?) as banana_included, 
                           'apple' = ANY(?) as apple_included" 
                   ["banana" "potato"] ["banana" "potato"]]) 
```

`= ANY(array)`语法与子句的作用相同——`in`据我所知，`IN`子句在 postgres 中被转换为`= ANY(array)`内部的——不过不要引用我的话。

# asp.net - 升级到 .NET Framework 4.5 后失去对 HTTP 请求的访问权限

> ID：13923920
> 
> 赞同：0
> 
> 时间：2012-12-17T23:20:44.813
> 
> 标签：asp.net, wcf, .net-4.5, asp.net-4.5

我有一个 WCF 服务，它以 HTML 表单的形式接受来自 jqGrid 的 POST 请求并返回 JSON。

虽然事情在 .NET 4.0 上，但一切正常。我可以通过`request["fieldName"]`. 一旦我升级到 .NET 4.5，我`request["fieldName"]`的所有内容现在都是空白的。.NET 4.5、WCF 和 .NET 是否存在某种已知问题`HttpContext.Current.Request`？

这是一个例子：

```
 POST http://{REMOVED}/Grid.svc/Execute HTTP/1.1
 Accept: application/json, text/javascript, */*; q=0.01
 X-Requested-With: XMLHttpRequest
 Content-Type: application/x-www-form-urlencoded; charset=UTF-8
 Accept-Encoding: gzip, deflate

 _search=false&nd=1355782305975&rows=15&page=1&sidx=modified&sord=desc&search=&category=all 
```

而且，这里是服务：

```
[AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
public class GridAccess
{
    [OperationContract]
    [WebInvoke(Method = "POST",
           BodyStyle = WebMessageBodyStyle.Bare,
           ResponseFormat = WebMessageFormat.Json,
           RequestFormat = WebMessageFormat.Json
    )]
    public GridResponse Execute()
    {
        var request = System.Web.HttpContext.Current.Request; 
```

所有对`request["fieldName"]`之前在 .NET 4.0 下工作的引用，现在，在升级到 .NET 4.5 后，它们返回 NULL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:41:42.077

该问题的根本原因看起来与帖子中描述的问题相同：[Visual Studio 2012 安装破坏了我的 2010 WCF 项目](https://stackoverflow.com/questions/12391586/visual-studio-2012-install-broke-my-2010-wcf-project)。如果我按照这篇文章中建议的解决方法，我可以看到您的代码再次开始工作。您可以参考[这篇](http://blogs.msdn.com/b/praburaj/archive/2012/09/13/accessing-httpcontext-current-request-inputstream-property-in-aspnetcompatibility-mode-throws-exception-this-method-or-property-is-not-supported-after-httprequest-getbufferlessinputstream-has-been-invoked.aspx)博文了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-30T13:28:29.437

来解决这类问题。只需将 System.Web DLL 添加到程序集中。然后像这样引用它，例如：

```
System.Web.HttpRequest request = System.Web.HttpContext.Current.Request; 
```

# javascript - 崇高的文本自动完成覆盖片段

> ID：13923930
> 
> 赞同：4
> 
> 时间：2012-12-17T23:21:16.187
> 
> 标签：javascript, sublimetext2, sublimetext

我有一个`console.log()`Sublime Text 的片段，当您键入“c”然后选项卡触发器时触发，但是如果页面上某处有以“c”开头的代码，自动完成会覆盖 console.log 片段。有没有办法解决这个问题，或者我应该为我的代码片段添加另一个修饰符？

```
<snippet>
    <content><![CDATA[console.log($1);$0]]></content>
    <!-- Optional: Set a tabTrigger to define how to trigger the snippet -->
    <tabTrigger>c</tabTrigger>
    <!-- Optional: Set a scope to limit where the snippet will trigger -->
    <scope>source.js</scope>
    <description>Log</description>
</snippet> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:20:07.593

在[https://sublime-text-unofficial-documentation.readthedocs.org/en/latest/extensibility/completions.html](https://sublime-text-unofficial-documentation.readthedocs.org/en/latest/extensibility/completions.html)上，它提到片段总是输给模糊匹配。由于缓冲区内容包含在自动完成中，我建议修改您的代码段以包含更多字符。

# meteor - Meteor：对客户端隐藏属性

> ID：13923933
> 
> 赞同：11
> 
> 时间：2012-12-17T23:21:26.470
> 
> 标签：meteor

有没有办法从客户端更新中排除某些属性？

在控制台中检查集合时应该看不到该属性

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-12-18T05:18:16.233

绝对地。

1.  移除`autopublish`默认开启的包：`meteor remove autopublish`

2.  创建您的集合：`Rooms = new Meteor.Collection("rooms");` *不需要条件 isServer 或 isClient，因为两者都应该存在*

3.  在您的服务器端代码中，通过清零您不希望客户端拥有的字段，仅[发布您的集合的一个子集：](http://docs.meteor.com/#meteor_publish)

    ```
    if (Meteor.isServer) {
        //you could also Rooms.find({ subsetId: 'some_id' }) a subset of Rooms
        Meteor.publish("rooms", function () {
            return Rooms.find({}, {fields: {secretInfo: 0}});
        });
    } 
    ```

    注意：`{secretInfo: 0}`上面的设置不会将集合`secretInfo`中每一行的所有实例都设置`Rooms`为零。它从客户端集合中完全**删除了该字段。**认为是`0`关闭开关:)

4.  将客户端订阅到已发布的集合：

    ```
    if (Meteor.isClient) {
        Deps.autorun(function() {
            Meteor.subscribe("rooms");
        });
    } 
    ```

希望这可以帮助！

# java - 获取选择字段的当前值

> ID：13923936
> 
> 赞同：0
> 
> 时间：2012-12-17T23:21:43.973
> 
> 标签：java, testing, testng, selenium-webdriver

我有一个我正在尝试测试的网站，它有几个下拉菜单。一个选择元素如下：

```
<select class="input-xxlarge" name="dosage">
  <option value="20 MG, Enteric Coated Capsule">20 MG, Enteric Coated Capsule</option>
  <option value="60 MG, Enteric Coated Capsule">60 MG, Enteric Coated Capsule</option>
  <option value="30 MG, Enteric Coated Capsule">30 MG, Enteric Coated Capsule</option>
</select> 
```

更改值后，我注意到的唯一变化是类名更改为：“input-xxlarge changedInput”。

我正在使用 WebDriver 进行测试，并希望获得当前值。我试图做以下事情：

```
 WebElement strengthForm = driver.findElement(By.xpath("/html/body/section/article[2]/div/table/tbody/tr["+rowNum2+"]/td/div/article/section/form/fieldset/label/select"));
    String strengthBeforeChoosing = strengthForm.getText().toString();
    System.out.println(strengthBeforeChoosing); 
```

问题是，这给了我所有的选择，而不是获取当前值。

20 MG，肠溶胶囊 60 MG，肠溶胶囊 30 MG，肠溶胶囊

我将如何获取下拉列表的当前值，以便在更改后将其与当前值进行比较？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:41:36.047

尝试使用：

```
Select select = new Select(driver.findElement(By.id("dosage")));
String selectedText = select.getFirstSelectedOption().getText(); 
```

# javascript - 在javascript中循环一组正则表达式

> ID：13923938
> 
> 赞同：0
> 
> 时间：2012-12-17T23:22:10.073
> 
> 标签：javascript, regex, for-loop

我有一组存储在对象中的正则表达式，沿着

```
myRegexes = {};
myRegexes.reg1 = /[a-z]+[0-9]+/;
myRegexes.reg2 = /[a-e]+/; 
```

然后我可以做 `myRegexes.reg1.exec(sampleStr)` ，它工作得很好。

但是，如果我遍历这个对象并说

```
for( reg in myRegexes ){
    reg.exec(sampleStr);
} 
```

我收到一个异常说“TypeError：Object reg1 has no method 'exec'”

我知道 javascript 在 for-in 循环的执行方式上很不稳定，但我看不到它是如何成功找到变量的，但在此过程中会丢失它的方法。谁能告诉我为什么会失败以及正确的方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-17T23:23:39.357

`reg`指的是属性名称，你必须抓住实际的正则表达式对象：

```
for( reg in myRegexes ) {
  myRegexes[ reg ].exec(sampleStr);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T23:24:11.827

[`for-in`-loop](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/for...in)枚举对象的属性，是`reg`属性名称（字符串）而不是属性值（您的正则表达式）。采用

```
for (reg in myRegexes)
    myRegexes[reg].exec(sampleStr); 
```

# java - 从哪里获得 Java 运行时可再发行组件？

> ID：13923942
> 
> 赞同：1
> 
> 时间：2012-12-17T23:22:33.053
> 
> 标签：java, redistributable

我在哪里可以下载 Java 运行时以下版本的可再发行组件？

```
Java 1.6 Update 29 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T23:25:58.850

Java 的可再发行组件是 JRE 和 JDK。您可以从 Oracle 网站获取它们。如果您想要最新版本以外的版本，请从这里开始：

*   [http://www.oracle.com/technetwork/java/javase/archive-139210.html](http://www.oracle.com/technetwork/java/javase/archive-139210.html)

我应该警告你 Java 6 补丁 29 已经过时了。最近的 Java 6 版本包含**重要的安全补丁**。您可能应该使用您可以获得的最新 Java 6，特别是如果您的 JRE / 应用程序可能暴露给不受信任的人......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T23:27:23.867

新的运行时可以直接从 Oracle 下载： [http ://www.oracle.com/technetwork/java/javase/downloads/index.html](http://www.oracle.com/technetwork/java/javase/downloads/index.html)

旧的可以在存档页面上找到： [http ://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html](http://www.oracle.com/technetwork/java/javasebusiness/downloads/java-archive-downloads-javase6-419409.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T23:26:40.303

[谷歌](https://www.google.com)[在这里](http://www.oracle.com/technetwork/java/javase/downloads/jdk-6u29-download-513648.html)告诉我SDK[或](http://www.oracle.com/technetwork/java/javase/downloads/jre-6u29-download-513650.html)JRE ......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-31T13:46:52.333

这是一个回答我的问题的链接：

[http://someslack.wordpress.com/2012/01/28/extract-deb-rpm-bin-files/](http://someslack.wordpress.com/2012/01/28/extract-deb-rpm-bin-files/)

总结一下：

1.  从 Oracle 下载 jre-whatever-linux-i586-rpm.bin。
2.  解压 jre-whatever-linux-i586-rpm.bin
3.  rpm2cpio [rpm 文件] | cpio-div

## 编辑

嗯。我有更好的运气去我的开发系统上的目录 /usr/java/jdk1.6.0_45 并从那里复制 jre 目录。

# facebook - 如何国际化元 og 标签以由 Facebook 正确解析？

> ID：13923944
> 
> 赞同：5
> 
> 时间：2012-12-17T23:22:37.873
> 
> 标签：facebook, facebook-graph-api, grails, facebook-opengraph

我有一个带有元 og 标签的 grails 应用程序，如下所示：

```
<meta property="og:description" content="${message(code:'description')}"/> 
```

如果用户的浏览器发送请求，则消息属性对 i18n 工作正常。但在 Facebook 的情况下，情况就不同了。Facebook 似乎总是在我的页面上请求 en_US 版本，这意味着如果用户从 de_DE 浏览器请求页面，meta og 标签总是使用错误的语言。

有没有办法告诉 facebook 使用与 en_US 不同的请求语言？

我试过了：

```
<meta property="og:locale" content="de_DE" /> 
```

但这也不会改变请求的语言。

我该怎么做才能获得正确的 i18n？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T03:05:48.737

如果您设置了一些`og:locale:alternate`元标记，Facebook 将通过传递带有区域设置值的`get`参数来重新抓取页面。`fb_locale`例如，如果您的网站是`http://mysite.com/share`并且它提供以下替代语言环境：

```
<html>
<head>
    <meta property="og:locale:alternate" content="fr_FR" />
    <meta property="og:locale:alternate" content="es_ES" />
    ...
</head>
    ...
</html> 
```

Facebook 将在您的网站上调用这些网址。

```
http://mysite.com/share
http://mysite.com/share?fb_locale=fr_FR
http://mysite.com/share?fb_locale=es_ES 
```

然后，您只需`og:locale`正确本地化您的内容（并设置）。

文档在这里：[https ://developers.facebook.com/docs/technical-guides/opengraph/internationalization/](https://developers.facebook.com/docs/technical-guides/opengraph/internationalization/)

# c - 前序二叉搜索树插入

> ID：13923948
> 
> 赞同：3
> 
> 时间：2012-12-17T23:23:05.987
> 
> 标签：c, binary-search-tree, insertion, preorder

一个令人痛苦的愚蠢问题，我几乎羞于问。我一直在搜索过去 4 个小时，测试了不同的算法，在纸上尝试了很多，但仍然无法让它工作。

我将为您省去项目实施的细节，但基本问题是：“您如何处理在预购二叉树中插入节点。

通过 Pre-Order BST，我的意思是所有节点都应该以这样的方式插入，即使用 pre-order 遍历（例如用于打印）遍历树应该按升序打印节点。

我只需要一个简单的算法。我尝试了一个简单的插入算法here（在stackoverflow上，但它似乎不正确（也在纸上尝试过））；。

节点基本上是这样的：

```
typedef struct testNode{
    int key;
    struct testNode *leftChild;
    struct testNode *rightChild;
}NODE; 
```

插入数据只是一个唯一整数列表。我创建一个以 int 为键的节点，然后应该将该节点添加到树中。我有根节点，它以 NULL 指针开始。

抱歉，如果有任何不清楚的地方。

谢谢您的帮助！

编辑：根据下面提供的算法，这就是我想出的：

```
void insert(NODE **tree,int key){
if(*tree){
    if ((*tree)->key >= key){
        //Insert before this .....
        NODE *temp = createNode(key);
        temp->lc = (*tree);
        (*tree) = temp;

    }
    else if(!(*tree)->rc){
        //Right Child doesn't exist ....
        insert(&(*tree)->lc,key);
    }
    else if((*tree)->rc->key < key){
        //Right child exists and is smaller than spread ... insert left ...
        insert(&(*tree)->lc,key);
    }
    else{
        //Right child exists and is greater than spread ... insert right ...
        insert(&(*tree)->rc,key);
    }
    //If the code as progressed to this point, insertion must have occured, 
            //and the code returns ......   
} else {
    //the **tree pointer points to NULL. Insert here ....
    SPREADNODE *temp = createSpreadNode(spread);
    //temp->lc = (*tree);
    (*tree) = temp;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:42:46.153

考虑预排序 BST 的定义：根节点是最小元素，它的两个子节点或也是预排序树，使得右子树的根大于左子树中的任何值。

因此，一种可行的算法是：

1.  如果新节点小于根节点，则使其成为新根节点并指向现有树作为两个子节点之一。
2.  如果新节点大于根，但小于右子树的根，则递归地将其插入左子树。
3.  否则，递归地将其插入右子树。

这不太可能产生一个非常平衡的树，但它应该可以工作。我至少可以想到一个其他简单的替代方案，毫无疑问，有一些方法可以让事情变得更加平衡，我将其作为练习留给读者 ;-)

# jquery - 查找输入 onClick 事件并替换 Value 属性

> ID：13923949
> 
> 赞同：2
> 
> 时间：2012-12-17T23:23:06.090
> 
> 标签：jquery, opencart

伙计们，这是一个广泛的问题，但我会尽量保持简单。

简单地说，我想要做的是，寻找一个特定的`onClick`, example `addToCart('57')`，并找到替换包含to`Value`的特定输入框的属性。`addToCart('57')``Added`

我使用了 onclick 事件字符串

```
var getOnClickValueForNotification = $('.cart input').attr("onclick"); 
```

但是我发现很难实现 jquery`find`来查找`getOnClickValueForNotification`和替换`Value`属性到`Added`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T09:37:41.333

您需要为输入使用 .on('click') 事件（请注意，可能已经有一个事件附加到此输入，因此如果是这样，您将需要找到并使用它）并将事件处理程序传递给找到点击的目标。

像这样的东西应该可以完成这项工作。

```
$('.cart input').on('click', function(e){
    e.target.attr('value', 'Added');
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T23:46:47.557

jQuery attr 函数在发送第二个参数时在第一个参数中设置给定属性的值。

```
$('.cart input').attr('onclick', 'Added'); 
```

这会将 onclick="addToCart('57')" 更改为 onclick="Added"

但我同意，使用数据来获取和设置值比依赖诸如 onclicks 之类的东西*要好*

# objective-c - 如何使用 UIButton 转移到另一个 Storyboard 场景

> ID：13923951
> 
> 赞同：0
> 
> 时间：2012-12-17T23:23:19.697
> 
> 标签：objective-c, xcode4.5, uistoryboardsegue

我有一个 iPad 应用程序，使用 XCode 4.5、Storyboards、UITabBarController 和 iOS 6。我想让用户点击一个按钮（“新建”），该按钮将转移到可以输入新**客户端信息的场景。**是的，他/她可以点击 UITabBar 并做同样的事情，但我需要让它非常非常用户友好。

我一直在寻找“推动”segues的SO，但不确定它是否能完成这项工作。有人可以指出我正确的方向吗？（将不胜感激提供文档的 URL）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T01:09:48.800

Push segues 仅在 a 的上下文中才有意义`UINavigationController`。

您需要做的只是将您的按钮关联到一个`IBAction`将以编程方式更改选项卡的按钮，例如

```
- (IBAction)switchToClientInfoTab {
    [self.tabBarController setSelectedIndex:1]; // change 1 to the actual index of your tab
} 
```

Segues现在是这里进行的方式。

# hibernate - Hibernate QueryParameterException Spring MVC & JSON

> ID：13923960
> 
> 赞同：1
> 
> 时间：2012-12-17T23:23:49.357
> 
> 标签：hibernate, spring-mvc, jqgrid, spring-data-jpa

我有一个基于[本教程](http://krams915.blogspot.com/2012/01/spring-mvc-31-jqgrid-and-spring-data_1887.html)的 spring mvc 3.1 应用程序。我已将应用程序修改为基于注释的应用程序，并调整视图处理程序以在 jstl 上使用 InternalResourceViewResolver，这工作正常。

简而言之，该应用程序使用 spring mvc、spring data jpa 和 jqgrid 来生成一个简单的用户列表，该列表具有基本的 crud 映射，通过响应将操作传递给控制器​​......

当我尝试通过更新操作修改记录时，我收到 500 个错误（aop 跟踪拦截器）...

**例外**...

```
 Servlet.service() for servlet [dispatcher] in context with path    
    [/spring-jqgrid-tutorial] threw exception [Request processing failed;    
    nested exception is org.springframework.dao.InvalidDataAccessApiUsageException:
    org.hibernate.QueryParameterException: 
    Position beyond number of declared ordinal parameters.    
    Remember that ordinal parameters are 1-based! 
    ...
    at org.beckett.service.UserService.update(UserService.java:32) 
```

**用户服务**...

```
 ...   
public Boolean update( User user ) {
    User existingUser = repository.findByUsername( user.getUsername() );
    if( existingUser == null ) {
        return false;
    }
    // Only firstName, lastName, and role fields are updatable
    existingUser.setFirstName( user.getFirstName() );
    existingUser.setLastName( user.getLastName() );
    existingUser.getRole().setRole( user.getRole().getRole() );

    User saved = repository.save( existingUser );
    if( saved == null )
        return false; {

    }
    return true;
}

    ... 
```

**用户实体**

```
 @Entity( name = "user" ) 
    @NamedQuery( name = User.FIND_BY_USERNAME, 
    query = "select u from user u where u.username = :username" )
    public class User {

    public static final String FIND_BY_USERNAME = "User.findByUsername";

    @Id @GeneratedValue( strategy = GenerationType.AUTO )
    private Long id;

    private String firstName;
    private String lastName;

    @Column( unique = true )
    private String username;

    @JsonIgnore
    private String password;

    @OneToOne( cascade =  CascadeType.ALL, mappedBy = "user" )
    private Role role;
... 
```

**用户存储库**

```
 public interface UserRepository extends JpaRepository<User, Long> {

    User findByUsername( String username );

    Page<User> findByUsernameLike( String username, Pageable pageable );

    Page<User> findByFirstNameLike( String firstName, Pageable pageable );

    Page<User> findByLastNameLike( String lastName, Pageable pageable );

    Page<User> findByFirstNameLikeAndLastNameLike( String firstName, String lastName, Pageable pageable );

    @Query( "select u from user u where u.role.role = :role" )
    Page<User> findByRole( @Param( "role" ) Integer role, Pageable pageable );
} 
```

**用户控制器**

```
 @RequestMapping( value = "/update", 
    produces = "application/json", 
    method = RequestMethod.POST )

    public @ResponseBody StatusResponse update( 
           @RequestParam String username, 
           @RequestParam String firstName, 
           @RequestParam String lastName, 
           @RequestParam Integer role ) {

       User existingUser = new User( username, firstName, lastName, new Role( role ) );
       Boolean result = service.update( existingUser );
       return new StatusResponse( result );
} 
```

我已经看到了几个关于这个异常的线程，说明了更改 HQL 查询的要求......但是，我不确定如何调试这个问题......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T01:29:20.197

这是通过用命名查询的[位置参数](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#objectstate-querying-executing-parameters)替换命名参数来解决的。

```
 @NamedQuery( name = User.FIND_BY_USERNAME, 
    query = "select u from user u where u.username = ?1" ) 
```

# combinations - 枚举所有扑克头对头手

> ID：13923962
> 
> 赞同：1
> 
> 时间：2012-12-17T23:23:56.003
> 
> 标签：combinations, probability, poker

![52C2 * 50C2 / 2 = 812175](../Images/ccf6d8302c643dcf21d120c04c4a5f70.png)德州扑克中可能存在正面交锋。假设我每张卡都有一个数组，我如何枚举所有这些匹配项？

例如，枚举所有可能的起手牌是：

```
for (int a = 0; a < 51; ++a) {
  for (int b = a + 1; b < 52; ++b) {
    println(cards[a] + "," + cards[b]);
  }
} 
```

我计算出所有比赛都可以进行两次（同时获得 As,Ah vs Kc,Kd 和 Kc,Kd vs As,Ah）：

```
long total = 0;
for (int a = 0; a < 51; ++a) {
  for (int b = a + 1; b < 52; ++b) {
    for (int c = 0; c < 51; ++c) {
      for (int d = c + 1; d < 52; ++d) {
        total++;
      }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:54:48.823

您的代码打印了正确的结果，但没有正确地遍历所有卡片。`a`并且`c`应该循环到 52。额外的手需要用一个`if`语句删除：

```
for (int a = 0; a < 52; ++a) {
  for (int b = a + 1; b < 52; ++b) {
    for (int c = 0; c < 52; ++c) {
      for (int d = c + 1; d < 52; ++d) {
        if (c != a && c != b && d != a && d != b) {
          total++;
        }
      }
    }
  }
} 
```

然后可以修改它以消除重复的手：

```
for (int a = 0; a < 52; ++a) {
  for (int b = a + 1; b < 52; ++b) {
    for (int c = a + 1; c < 52; ++c) {
      for (int d = c + 1; d < 52; ++d) {
        if (c != b && d != b) {
          total++;
        }
      }
    }
  }
} 
```

# c# - 正则表达式匹配另一个正则表达式匹配后的所有字符

> ID：13923964
> 
> 赞同：1
> 
> 时间：2012-12-17T23:24:00.517
> 
> 标签：c#, regex

我知道这听起来可能有点令人困惑，所以我愿意接受有关重命名标题的建议。

基本上我有诸如 C:...\Downloads\Folder\SubFolder\SubSubFolder 之类的字符串。我只想返回 SubFolder 和 SubSubFolder。

到目前为止，我的 Regex 看起来像`(?=\\Downloads\\.*?\\).*`which matches `Downloads\Folder\SubFolder\SubSubFolder`。

有没有人有任何想法我错过了什么？？？？

以下所有解决方案似乎都有效（除非您不知道“文件夹”）。我用来测试正则表达式的工具可能存在错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:35:45.113

您需要匹配字符串的结尾和非反斜杠序列：

```
/([^\\]+)\\([^\\]+)$/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-17T23:36:38.010

你少了一个`<`. 你想要一个后视 ( `(?<=...)`)，但你有一个前瞻 ( `(?=...)`)。

换句话说，您需要`(?<=\\Downloads\\.*?\\).*`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-17T23:28:59.900

这不是正则表达式，但我会这样做。

```
string marker = @"\Downloads\Folder\";
int i = path.IndexOf(marker);
if (i >= 0)
    return path.Substring(i + marker.Length); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-17T23:34:09.810

以下正则表达式将在正则表达式匹配中返回两个命名组（sub、subsub）。

```
(?<=\\Downloads\\[^\\]+\\)(?<sub>[^\\]+)\\(?<subsub>[^\\]+) 
```

检索组：

```
var regex = new Regex(@"(?<=\\Downloads\\[^\\]+\\)(?<sub>[^\\]+)\\(?<subsub>[^\\]+)");
var match = regex.Match(@"C:\...");
var sub = match.Groups["sub"].Value;
var subsub = match.Groups["subsub"].Value; 
```

# php - 如何在两个大小的数组之间找到唯一元素？

> ID：13923965
> 
> 赞同：-1
> 
> 时间：2012-12-17T23:24:01.990
> 
> 标签：php, arrays

> **可能重复：**
> [带有两个数组的array_unique](https://stackoverflow.com/questions/3436146/array-unique-with-two-arrays)

如何在两个大小的数组之间找到唯一元素？

```
$array1 = array(2,1,1,3,5,5);   
$array2 = array(2,1,3,5); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T23:42:42.560

### 如果您想要两个数组中都存在的值：

```
$array1 = array(2,1,1,3,5,5);   
$array2 = array(2,1,3,5);

$array1 = array_unique($array1, SORT_NUMERIC);
$array2 = array_unique($array2, SORT_NUMERIC);
$unique = array_intersect($array1, $array2);

var_dump($unique); 
```

产量：

```
array(4) {
  [0] =>
  int(2)
  [1] =>
  int(1)
  [3] =>
  int(3)
  [4] =>
  int(5)
} 
```

* * *

当然，在这个例子中，这意味着`$array2`已经是答案了。我假设情况并非总是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T23:40:01.227

我相信你正在寻找[array_intersect_assoc](http://www.php.net/manual/en/function.array-intersect-assoc.php)加上[array_unique](http://www.php.net/manual/en/function.array-unique.php)因为你的第一个数组有重复

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-17T23:44:25.217

好的，所以我不是 100% 确定您所说的“独特”是什么意思。我将假设您正在寻找一个在所有数组中出现一次的值。*不是每次一次*，而是一共一次。

借用我在[这里](https://stackoverflow.com/questions/3933760/how-to-remove-all-instances-of-duplicated-values-from-an-array)找到的一些代码，你可以做这样的事情 -

```
$array1 = array(2,1,1,3,5,5);
$array2 = array(2,1,3,5);

$array1 = array_unique($array1);
$array2 = array_unique($array2);

$merge = array_merge($array1,$array2);

// thanks @gumbo!
$final = array_diff($merge, array_diff_assoc($merge, array_unique($merge))); 
```

当我们执行这段代码时会发生什么？`$final`数组中会有什么？好吧，获取您的数据，`$final`数组将为空，因为数组之间没有唯一元素。如果您将另一个元素放在那里，该`$final`数组将被填充。例如 -

```
$array1 = array(2,1,1,3,5,5,7);
$array2 = array(2,1,3,5); 
```

在这种情况下，`$final`将仅包含元素`7`。

# django - 应用程序之间的 Django 关系：如何保持应用程序分离？

> ID：13923968
> 
> 赞同：4
> 
> 时间：2012-12-17T23:24:26.723
> 
> 标签：django, database-design, django-admin

我需要在 Django 项目中连接两个应用程序，但不想将模型从一个导入另一个。保持它们“干净”将使我以后可以单独重复使用它们。

在这种特殊情况下，我需要在这些单独的应用程序中的两个模型之间建立多对多关系。一种解决方案是在主项目应用程序中创建一个模型，为两者定义外键。这是 Django 的方式还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T01:45:42.547

也许您正在寻找一种[Mediator Pattern](http://en.wikipedia.org/wiki/Mediator_pattern)。如果您的应用程序不需要相互了解，一种方法可以是编写另一个可以同时了解两者的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T21:50:45.180

django-profiles、django-sorl、django- 都作为“多对一”类型的关系工作。当您选择使用这些插件/应用程序（和其他）时，您最终将使您设计的应用程序依赖于它们的存在。

选项 1：考虑到上述情况...使您打算设计的应用程序之一足够通用，以使依赖关系只有一种方式（因此，其他应用程序将依赖它，但不是相反）。这是大多数 django 应用程序已经做的。

选项 2：如果您的每个应用程序彼此共享依赖关系，那么您可能会让您的生活变得轻松很多，只需将其保留为同一个应用程序/插件的一部分。

# javascript - iframe中的javascript点击元素

> ID：13923969
> 
> 赞同：2
> 
> 时间：2012-12-17T23:24:48.870
> 
> 标签：javascript, ajax, html

> **可能重复：**
> [在 JavaScript 中，我可以通过编程方式为文件输入元素触发“点击”事件吗？](https://stackoverflow.com/questions/210643/in-javascript-can-i-make-a-click-event-fire-programmatically-for-a-file-input)

我想进行单击上传，所以我像这样隐藏 `<form>`内部`<iframe>`（我只是`<iframe>`在周围输入标签`<form>`来隐藏表单）：

```
<iframe id="iframe" name="iframe" height="1" width="1" frameborder="0">
    <form id="form1" enctype="multipart/form-data" method="post" action="uploaded.php">
        <div class="row">
        <label for="file">Select a File to Upload (up to 20MB)</label><br />
        <input type="file" name="file" id="file" size="40" onchange="uploadFile()" />
        </div>
    </form>
</iframe> 
```

然后在外面`<iframe>`我做了一个按钮：

```
<div align="center">
    <input type="button" value="Upload" align="center" onclick="browse();" />
</div> 
```

浏览（） javascript是这样的：

```
function browse()
{
    var iframe = document.getElementById.("iframe");
    var input = iframe.contentDocument || iframe.contentWindow.document;
    input.getElementById('file').click();
} 
```

但它不起作用。浏览文件对话框未打开。我正在使用 Firefox 17。有没有办法在`<input>`内部单击（）`<iframe>`或任何其他一键上传解决方案，但仍在使用我的 uploadFile() AJAX 功能？

```
function uploadFile() {
        var fd = new FormData();
        fd.append("file", document.getElementById('file').files[0]);
        var xhr = new XMLHttpRequest();
        xhr.upload.addEventListener("progress", uploadProgress, false);
        xhr.addEventListener("load", uploadComplete, false);
        xhr.addEventListener("error", uploadFailed, false);
        xhr.addEventListener("abort", uploadCanceled, false);
        xhr.open("POST", "uploaded.php");
        xhr.send(fd);
      } 
```

编辑：当表单不在 iframe 中时，这是有效的，所以我的问题不是我是否可以使用 click() on `<input type="file">`。我可以并且它在 Firefox 17 中工作。我的问题是如何在`<input type="file">`inside上使用 click() `<iframe>`。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-18T16:11:24.100

`<iframe>`如果浏览器不支持 iframe，则可以使用的替代内容。它们不构成加载到框架中的文档的一部分（这是`contentDocument`可以访问的）。

您的问题（或至少您的第一个问题）是您正试图将其用作隐藏内容的黑客。不要那样做。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-17T23:38:15.763

JavaScript 应该抛出一个错误，因为你有一个额外的类型`.`

```
var iframe = document.getElementById.("iframe");  
                                    ^-- typo 
```

# javascript - 带有自定义事件的 Google 分析跟踪页面缩放级别

> ID：13923972
> 
> 赞同：1
> 
> 时间：2012-12-17T23:25:08.107
> 
> 标签：javascript, google-analytics

我发现这个[脚本](https://github.com/yonran/detect-zoom/)将跟踪页面缩放。我已经用 a 对其进行了测试，`consol.log()`以确认结果是准确的并且该脚本正在运行。当我在我的谷歌事件跟踪代码中添加该值时，我没有看到它进入谷歌分析。我跟踪事件的方式有问题吗？

```
// Track page zoom level
var zoomLevel = DetectZoom.zoom();

$(document).ready(function() {
    _gaq.push(['_trackEvent', 'Site Info', 'Zoom Level', zoomLevel]);
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T03:27:24.190

可选的标签参数`_trackEvent`应该是一个字符串，`_trackEvent`如果它是一个 int 可能会导致静默失败。尝试

```
_gaq.push(['_trackEvent', 'Site Info', 'Zoom Level', zoomLevel.toString()]); 
```

另外，我建议使用可选的 nonenteraction 参数，这样`_trackEvent`调用就不会影响您的跳出率：

```
_gaq.push(['_trackEvent', 'Site Info', 'Zoom Level', zoomLevel.toString(), undefined, true]); 
```

# python - 保存朴素贝叶斯分类器 nltk

> ID：13923973
> 
> 赞同：1
> 
> 时间：2012-12-17T23:25:09.150
> 
> 标签：python, nltk, pickle

我无法腌制通过 nltk 训练的朴素贝叶斯分类器。这是我用来保存分类器的代码：

```
pickledfile=open('my_classifier.pickle','wb')
pickle.dump(classifier,pickledfile)
pickledfile.close() 
```

这似乎工作正常。但是，当我尝试使用以下代码加载腌制文件时：

```
f1=open('my_classifier.pickle')
classifier=pickle.load(f1)
f1.close() 
```

我收到 EOF 错误。我直接从这个问题中得到了这段代码，无论出于何种原因，它对我来说都不起作用：[Save Naive Bayes Trained Classifier in NLTK](https://stackoverflow.com/questions/10017086/save-naive-bayes-trained-classifier-in-nltk)。如果您知道这是怎么回事，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-12-09T06:52:00.010

我没有环境设置来测试你的代码，但我觉得它在你保存/加载泡菜的部分不正确。

参考 NLTK 书的[Storing Taggers](http://nltk.org/book/ch05.html)部分，我会更改您的代码并这样做：

```
def save_classifier(classifier):
   f = open('my_classifier.pickle', 'wb')
   pickle.dump(classifier, f, -1)
   f.close()

def load_classifier():
   f = open('my_classifier.pickle', 'rb')
   classifier = pickle.load(f)
   f.close()
   return classifier 
```

希望能帮助到你。

来自 [https://stackoverflow.com/posts/17635668/](https://stackoverflow.com/posts/17635668/)

# database - 如何在没有数据库文件的情况下将 wordpress 迁移到新服务器？

> ID：13923977
> 
> 赞同：0
> 
> 时间：2012-12-17T23:25:31.383
> 
> 标签：database, wordpress

我只有旧网站的主要 wordpress 文件和帖子和页面的 xml 文件。这就是我将网站放在新服务器上所需的全部内容吗？还是我需要从其他服务器导入数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T00:28:26.727

1.  拥有数据库是理想的，因为它将包含您所有的插件和管理设置。
2.  XML 导出文件包含帖子和页面内容（但不包含附加的图像和文件）。
3.  您还需要确保上传文件夹中的所有内容、已上传到 Wordpress 管理员的图像和文件。

# java - 在 JAVA 中使用信号量控制线程访问

> ID：13923980
> 
> 赞同：0
> 
> 时间：2012-12-17T23:25:39.120
> 
> 标签：java, multithreading, semaphore

我正在尝试运行此 java 代码，但它无法正常工作。

请让我知道我做错了什么。

for 循环的 i 小于 10；。如果它的 i 小于 1（意味着没有循环），则程序可以正常工作，但是对于（i 小于 n），其中 n 大于 1 它会引发异常

```
public class Main {

    public static void main(String[] args) {
        final Semaphore sem = new Semaphore(1, true);
        Thread t1 = new Thread("TA") {
            public void run() {
                try {
                    sem.acquire();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println("A");
                sem.release();
            }
        };
        Thread t2 = new Thread("TB") {
            public void run() {
                try {
                    sem.acquire();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println("B");
                sem.release();
            }
        };
        Thread t3 = new Thread("TC") {
            public void run() {
                try {
                    sem.acquire();
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                System.out.println("C");
                sem.release();
            }
        };

        for (int i = 0; i < 10; i++) {
            t1.start();
            t3.start();
            t2.start();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:27:45.420

您不能多次启动线程。所以在第二次循环中，第二次调用时会出现异常`t1.start()`。这在[javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#start%28%29)中有说明：

> 多次启动一个线程是不合法的。特别是，线程一旦完成执行就可能不会重新启动。
> 
> 抛出： IllegalThreadStateException - 如果线程已经启动。

您可以使用 ExecutorService 而不是直接操作线程。它可能看起来像这样：

```
public static void main(String[] args) throws Exception {
    ExecutorService executor = Executors.newFixedThreadPool(3);
    final Semaphore sem = new Semaphore(1, true);
    Runnable r1 = new Runnable() {
        public void run() {
            try {
                sem.acquire();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            System.out.println("A");
            sem.release();
        }
    };
    Runnable r2 = new Runnable() {
        public void run() {
            try {
                sem.acquire();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            System.out.println("B");
            sem.release();
        }
    };
    Runnable r3 = new Runnable() {
        public void run() {
            try {
                sem.acquire();
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
            System.out.println("C");
            sem.release();
        }
    };

    for (int i = 0; i < 10; i++) {
        executor.submit(r1);
        executor.submit(r2);
        executor.submit(r3);
    }

    executor.shutdown();
} 
```

# html - 如何嵌入填充容器元素的 SVG 对象

> ID：13923982
> 
> 赞同：1
> 
> 时间：2012-12-17T23:25:45.113
> 
> 标签：html, svg

我有一个`file.svg`嵌入在 DOM 对象（td 元素）中的 SVG 文件（从 pdf 转换）。我希望它拉伸以填充容器元素。我试过了

```
<td><object data="file.svg" type="image/svg+xml" max-width="100%"></object></td> 
```

显示它太大（可能是文件默认大小的大小），如果我这样做

```
<td><object data="file.svg" type="image/svg+xml" width="100%"></object></td> 
```

然后显示太小。设置大小以填充 td 元素的正确方法是什么？如果我使用像 raphael.js 这样的外部库会更容易，还是有不同的嵌入方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T23:52:24.673

我的快速评论。你忘了等号吗？

```
width "100%"
max-width "100%" 
```

也许试试这个，它对我有用。

```
<img src="file.svg" style="width:100%;height:100%;" /> 
```

# php - 通过ajax插入数据并通过php错误上传图片

> ID：13923992
> 
> 赞同：0
> 
> 时间：2012-12-17T23:26:20.930
> 
> 标签：php, ajax, upload

我正在尝试通过 ajax 插入数据并通过 php 上传图片，问题是，当我尝试将数据与图片一起插入到单个按钮中时，将不会插入数据并上传图片。当我尝试仅插入数据而不是图片文件（我将其留空）时，它运行良好（只需插入数据（文本））。

这是我的**ajax**：

```
$(document).ready(function() {              
    $("#submit1").click(function(){

            jQuery(function($) {
                vals = [];
                $('select.menu_paket').each(function() { vals.push($(this).val()); });
                vals2=vals.join(',')

            });                             
        alert('clicked!');      
        //alert(vals2);             

        var nama_paket=document.getElementById('nama_paket').value;
        var keterangan_paket=document.getElementById('keterangan_paket').value;
        var harga=document.getElementById('harga').value;

        $.ajax({
        type: "POST",
        url: "insert_paket_f.php",
        data: { data : vals2 ,nama_paket : nama_paket,keterangan_paket: keterangan_paket,harga : harga},
        cache: false,
            success: function(){
              alert("OK");
                }
        });                     
    });         
}); 
```

这是我的**表格**：

```
<form id="form2" name="form2" method="post" action="upload_pic_paket.php" enctype="multipart/form-data"><!-- -->
    <p>Nama Paket :
        <input name="nama_paket" type="text" id="nama_paket" />
    </p>                            
    <p>Keterangan Paket : 
        <input name="keterangan_paket" type="text" id="keterangan_paket" />
    </p>                            
    <p>Harga Paket :
        <input name="harga" type="text" id="harga" />
    </p>                    
    <p>Gambar Paket:                            
        <input type="file" name="picture" id="picture"/>                            
    </p>

    <table border="1">
        <tr><td colspan="4">Masukan Menu Paket</td></tr>
        <tr><td><label>Menu Paket : </label></td><td><select id="menu_paket" name="menu_paket" class="menu_paket">                                  

        </select></td>
        <td><input type="button" class="addRow" value="Add Row"/></td>
        <td><input type="button" class="delRow" value="Delete Row"/></td></tr>                          
    </table>    

    <p>
        <input type="button" id="submit1" name="Submit" value="Simpan"  onclick="saveForm(); return false;"/>
    </p>
</form> 
```

这是我的**upload_pic_paket.php**

```
<?php

    $fileName = $_FILES['picture']['name'];  
    $fileSize = $_FILES['picture']['size'];  
    $fileError = $_FILES['picture']['error'];  
    if($fileSize > 0 || $fileError == 0){  
    $move = move_uploaded_file($_FILES['picture']['tmp_name'], 'images/paket/'.$fileName);  

?> 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T23:43:51.103

我认为 ajax 和表单事件相互冲突。将它们都移到一个“onsubmit()”中，看看会发生什么。

# jquery - 如何将参数值从 jquery 函数传递到 struts2 url 标签

> ID：13923995
> 
> 赞同：0
> 
> 时间：2012-12-17T23:26:50.837
> 
> 标签：jquery, struts2-jquery

我正在尝试从 jquery 函数传递参数。一切都很好，但唯一的问题是传递参数值`rowObject.themeScreenshot`

```
 <script type="text/javascript">
   function formatLink(cellvalue, options, rowObject)
     {    
        var para=rowObject.themeScreenshot; //here value is coming fine 
        alert("Json object value-"+para);  //correctly i am geting the value of para.
        return "<a style='cursor:pointer;' onClick='javascript:openDialog("+cellvalue+")'><img src='<s:url action='ImageAction' namespace='/myimage/secure'><s:param name='imageId'>"+para+"</s:param></s:url>'></a>";
     //this is returning url with empty imagId  output in url:-http://localhost:8080/visionbooks/myimage/secure/ImageAction?imageId=  
   } 
```

**我想要的是：-**

`http://localhost:8080/visionbooks/myimage/secure/ImageAction?imageId=anyvalue`

**但目前我得到的输出是：**

`http://localhost:8080/visionbooks/myimage/secure/ImageAction?imageId="+para+"` 变量名作为参数值传递。为什么？

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T01:58:14.363

`Struts 2 tags`在页面**渲染**时进行评估，这远在您的脚本运行之前。

如果您检查页面的源代码，您会看到这些标签已被转换为常规的 html 元素。因此，`para`不会评估 javascript 变量。

您可以尝试将退货行更新为

```
return "<a style='cursor:pointer;' onClick='javascript:openDialog("+cellvalue+")'><img src='<s:url action='ImageAction' namespace='/myimage/secure'></s:url>" + "?imageId="+para+ "'></a>"; 
```

# magento - 在 Magento Enterprise 中设置和获取自定义客户属性

> ID：13923999
> 
> 赞同：2
> 
> 时间：2012-12-17T23:27:05.870
> 
> 标签：magento

我们在 Magento Enterprise (1.12.0.2) 中创建了一个自定义客户属性来存储用户帐户 ID，从而使我们的 RMS 与 Magento 保持同步。

我需要手动设置 RMS id（通过 PHP），然后再获取 RMS id。自定义属性是一个文本字段，它的标签是 rms_id。我需要执行以下操作：

1.  检查是否使用客户 ID 设置了 rms_id
2.  如果未设置，则使用提供的值更新客户 rms_id

看起来很简单，但是我是 Magento 开发的新手，无法找到解决此问题的方法。所有搜索都返回自定义*产品*属性的结果，这与自定义*客户*属性不同。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T00:16:58.367

```
/* @var $customer Mage_Customer_Model_Customer */    
$customer = Mage::getModel('customer/customer')->load({customer id});

if (!$customer->getRmsId()) {
    $customer->setRmsId({value});
    //the original version of this answer was wrong; need to use the resource model.
    $customer->getResource()->saveAttribute($customer,'rms_id');
} 
```