# StackOverflow 问答 14383000-14383999

# gwt - 将背景图像应用到 GWT 装饰器面板

> ID：14383003
> 
> 赞同：1
> 
> 时间：2013-01-17T15:57:26.317
> 
> 标签：gwt

这是我使用 DecoratorPanel 构建的视图。如何修改它以显示背景图像？我看到很多应用 CSS 样式的示例，但我的 CSS 知识有限，所以如果这是要走的路，那么任何人都会有一个如何创建和应用 CSS 样式的工作示例。

这是我的代码 public class EditContactView extends Composite implements EditContactPresenter.Display { private final TextBox firstName; 私人最终文本框姓氏；私有最终 FlexTable detailsTable；

```
 public EditContactView() {
        DecoratorPanel contentDetailsDecorator = new DecoratorPanel();
        contentDetailsDecorator.setWidth("18em");
        initWidget(contentDetailsDecorator);

        VerticalPanel contentDetailsPanel = new VerticalPanel();
        contentDetailsPanel.setWidth("100%");

        detailsTable = new FlexTable();
        detailsTable.setCellSpacing(0);
        detailsTable.setWidth("100%");         
        firstName = new TextBox();
        lastName = new TextBox();
        initDetailsTable();
        contentDetailsPanel.add(detailsTable);

        HorizontalPanel menuPanel = new HorizontalPanel();
        contentDetailsPanel.add(menuPanel);
        contentDetailsDecorator.add(contentDetailsPanel);
      }

      private void initDetailsTable() {
        detailsTable.setWidget(0, 0, new Label("Firstname"));
        detailsTable.setWidget(0, 1, firstName);
        detailsTable.setWidget(1, 0, new Label("Lastname"));
        detailsTable.setWidget(1, 1, lastName);
        firstName.setFocus(true);
      }

      public HasValue<String> getFirstName() {
        return firstName;
      }

      public HasValue<String> getLastName() {
        return lastName;
      }

      public Widget asWidget() {
        return this;
      }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:03:46.580

关于设置样式名称 - 您只需在您希望的任何小部件上调用 setStyleName ("myDecoratedPanelStyle") -[示例并检查 gwt 如何在](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/client/ui/TextBox.java)[standard.css](http://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/theme/standard/public/gwt/standard/standard.css)中添加样式 gwt-TextBox

在您的 .css 文件中添加 .myDecoratedPanelStyle

```
myDecoratedPanelStyle 
{
   background-image:url('path/paper.gif');
   background-color:#cccccc;
} 
```

另请参考 - [https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCss](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiCss)

# html - 使用链接在同一页面上显示图像

> ID：14383005
> 
> 赞同：1
> 
> 时间：2013-01-17T15:57:28.970
> 
> 标签：html, image, zooming, hyperlink, scaling

我有一大组缩略图，大小都一样。

我希望用户能够单击缩略图以在同一页面上显示该图像的完整版本。

完整的图像都是不同的尺寸（这是我设计的字符），它们彼此成比例，所以我还想为每个字符图像修复缩放百分比。我必须使用的空间区域只有 600 像素宽，并且一些图像比这更大，因此必须应用某种相对缩放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:14:11.520

您应该获得有关此操作的 Javascript 知识...

高级现成脚本可在此处获得[http://www.magictoolbox.com/magiczoom/examples/](http://www.magictoolbox.com/magiczoom/examples/)

这个演示网站..

祝你好运 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:09:30.560

我建议您为此使用第三方插件并节省大量时间

两个最爱：

*   [花式盒](http://www.fancyapps.com/fancybox/ "花式盒")
*   [画廊](http://www.twospy.com/galleriffic/ "画廊的")

# python - Python 从 tk.Frame 继承，具有内部布局和滚动条

> ID：14383009
> 
> 赞同：1
> 
> 时间：2013-01-17T15:57:47.910
> 
> 标签：python, oop, tkinter, scrollbar, frame

我使用过 AutoScrollbar (http://effbot.org/zone/tkinter-autoscrollbar.htm)，并添加了一个水平的。

```
from Tkconstants import VERTICAL, N, S, HORIZONTAL, W, E, END
import Tkinter as Tk
class AutoScrollbar(Tk.Scrollbar):
    """ a scrollbar that hides itself if it's not needed.  only
    works if you use the grid geometry manager."""
    def set(self, lo, hi):
        if float(lo) <= 0.0 and float(hi) >= 1.0:
            # grid_remove is currently missing from Tkinter!
            self.tk.call("grid", "remove", self)
        else:
            self.grid()
        Tk.Scrollbar.set(self, lo, hi)
    def pack(self, **kw):
        raise Tk.TclError, "cannot use pack with this widget"
    def place(self, **kw):
        raise Tk.TclError, "cannot use place with this widget"

if __name__ == '__main__':  
    root = Tk.Tk()
    scrollbarY = AutoScrollbar(root,orient=VERTICAL)
    scrollbarY.grid(column=1, row=0,sticky=N+S)
    scrollbarX = AutoScrollbar(root,orient=HORIZONTAL)
    scrollbarX.grid(column=0, row=1,sticky=W+E)

    mylist = Tk.Listbox(root, xscrollcommand = scrollbarX.set, yscrollcommand = scrollbarY.set )
    for line in range(50):
        mylist.insert(END, "This is line number " + str(line) + ", and then just for whatever reason this text goes on and on")

    mylist.grid(column=0, row=0,sticky=N+S+E+W)
    scrollbarX.config( command = mylist.xview )
    scrollbarY.config( command = mylist.yview )

    root.columnconfigure(0, weight=1)
    root.rowconfigure(0, weight=1)
    Tk.mainloop() 
```

现在我想：拥有这个功能而不是杂乱无章不是很有趣吗？所以我开始编写带有自动隐藏滚动条的 tk.Frame。想法是：您向 AutoscrollFrame 添加一个小部件，Atuoscrollframe 在内部将该小部件放置在 2x2 网格上的 (0,0) 处，其中 (0,1) 和 (1,0) 是 x- 和 y- 自动隐藏滚动条和(1,1) 留空。滚动条当然只有在需要时才可见。

现在这个想法在我脑海中似乎很容易实现。可悲的是，我很快就发现它不是。我必须重写什么方法来实现“将子小部件添加到框架”功能（通常不将小部件添加到框架而是添加到（0,0）网格位置，并且还使用小部件注册滚动条）？

到目前为止，我的代码如下所示：

```
import Tkinter as tk
from Tkconstants import VERTICAL, N, S, HORIZONTAL, W, E, END

class AutoscrollFrame(tk.Frame):
    """A Frame extension that automatically adds scrollbars
    if the content of the frame exceeds it's dimensions.
    """

    def __init__(self,master,*args,**kwargs):
        self.master = master
        super(AutoscrollFrame,self).__init__(master=master,*args,**kwargs)
        self.scrollbarY = _AutoScrollbar(self,orient=VERTICAL)
        self.scrollbarY.grid(column=1, row=0,sticky=N+S)
        self.scrollbarX = _AutoScrollbar(self,orient=HORIZONTAL)
        self.scrollbarX.grid(column=0, row=1,sticky=W+E)

        self.columnconfigure(0, weight=1)
        self.rowconfigure(0, weight=1)

    def add_child_placeholder(self,child):
        self.child = child
        self.child.config(xscrollcommand=scrollbarX.set, yscrollcommand=scrollbarY.set )
        self.child.grid(column=0, row=0,sticky=N+S+E+W)
        self.scrollbarX.config( command = self.child.xview )
        self.scrollbarY.config( command = self.child.yview ) 
```

这`add_child_placeholder`是发生这种情况时我想调用的方法的原型：

```
frame = AutoscrollFrame(root)
myList = tk.Listbox(frame) 
```

这意味着如果我将框架设置为另一个小部件的主控，我想调用框架`add_child_placeholder`方法。这是一种明智的做法吗？我不完全确定这不是脑残，因此将不胜感激。

PS：我想将此功能添加到 tk.Frame（而不是 tk.ListBox），因为我还不确定 Listbox 是否是我最终会使用的。

# css - SVG Rect忽略高度？

> ID：14383014
> 
> 赞同：10
> 
> 时间：2013-01-17T15:58:01.260
> 
> 标签：css, svg

这是一个矩形的[工作演示](http://jsfiddle.net/zKsFC/)。我想[将 height 属性移到 css](http://jsfiddle.net/zKsFC/1/)中，但是它不起作用，给了我一个空白。它发生在 Firefox 和 chrome 中。

它有不同的名称吗？我不明白为什么我不能使用 css 文件。填充颜​​色有效。

工作示例。

CSS：

```
rect {
    fill:rgb(0, 0, 255);
    /*doesnt work height:100;*/
} 
```

html:

```
<svg xmlns="http://www.w3.org/2000/svg" version="1.1">
    <rect width="100" height="100" style="stroke-width:1;stroke:rgb(0,0,0)"/>
</svg> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-17T16:14:20.137

`<rect>`在 SVG 中，元素的 x、y、宽度和高度是[属性](http://www.w3.org/TR/SVG/attindex.html)，而不是[CSS 属性](http://www.w3.org/TR/SVG/propidx.html)。只有 CSS 属性可以使用 CSS 设置样式。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T16:11:31.823

元素的不是 SVG 中`width`的`<rect>`CSS 属性，它只能用作属性。例如，它就像HTML`size`中的一个`<select>`元素。您只能将其设置为属性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-02-20T06:57:07.693

SVG 没有直接支持 CSS 来设置形状尺寸。

然而，rects 有一个解决方法，它也可以用来生成水平和垂直线：

*   将宽度和高度设置为 1，并使用 CSS 变换：scale(width, height)
*   不要指定 x,y 位置，并使用 transform: translate(x, y)

例如

```
.svg {
  width: 100px;
  height: 30px;
}
.rectangle {
  transform: scale(30, 10);
  fill: orange;
}
.horiz-line {
  transform: translate(15px,5px) scale(50, 1);
  fill: red;
}
.vert-line {
  transform: translate(10px, 5px) scale(1, 30);
  fill: blue;
}
```

```
<svg>
  <rect class="rectangle" width="1" height="1" />
  <rect class="horiz-line" width="1" height="1" />
  <rect class="vert-line" width="1" height="1" />
</svg>
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-28T17:16:09.787

对称矩形的解决方法：

```
rect:hover {
  stroke-width: 20 !important;
}
```

```
<svg width="100" height="100">
  <rect
    stroke-width="0"
    fill="blue" stroke="blue"
    x="30" y="30" width="40" height="40"
  />
</svg>
```

（darkreader 将使用不同的颜色进行描边和填充）

# java - 如何在java中链接ghost脚本以减小PDF大小？

> ID：14383015
> 
> 赞同：0
> 
> 时间：2013-01-17T15:58:10.010
> 
> 标签：java, pdf, ghostscript

```
 String[] cmd = {
"gs -sDEVICE=pdfwrite -dCompatibilityLevel=1.4 -dPDFSETTINGS=/screen -dNOPAUSE -dQUIET -dBATCH -sOutputFile=     C:\\Users\\342008\\Desktop\\t\\Pa_10_12.pdf C:\\Users\\342008\\Desktop\\t\\P1_10_12.pdf"
};
try {
     Runtime.getRuntime().exec(cmd);
    } catch (IOException e) {} 
```

我试图在命令行 argumenet 的帮助下使用 ghost 脚本来减小 PDF 文件的大小，我得到了上述输入字符串对象 cmd 的 IOexception，有人可以帮助运行这个命令来使用 ghostscript 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-18T08:20:22.987

首先，虽然通过 pdfwrite 设备运行 PDF 文件*可能*会使文件变小，但这不是设备的目的，在某些情况下它会产生更大的文件。

如果您真的想这样做，*请不要*使用 -dPDFSETTINGS 开关。而是单独设置每个参数，花时间阅读文档并查看它们的作用，以便您做出明智的选择。

你没有说你使用的是什么操作系统，也没有说 Ghostscript 的版本，但我可以看到几个可能的问题：

1) Ghostscript 可执行文件并非在所有操作系统上都称为“gs”，可能是您使用了错误的名称。参数的语法让我相信这是一个 Windows 系统，在这种情况下，可执行文件称为 gswin32（对于窗口版本）或 gswin32c（对于命令行版本）。

2）您没有指定可执行文件的路径。只有在操作系统的搜索路径（通常是 %PATH% 环境变量）上可以找到可执行文件时，这才有效

您的命令行显然包含“-sOutputFile= C:\Users\342008\Desktop\t\Pa_10_12.pdf” 您不得*在*参数中留下多余的空格。您在那里编写的内容将导致 GS 假定一个具有空名称的输出文件，然后将该文件名视为输入文件进行处理。

我建议您在 Java 中尝试此操作之前，请尝试从操作系统的命令行运行该命令。如果这不起作用，那么它也不会在 Java 中起作用......

# jquery-ui - 如何选择下一个选项卡

> ID：14383016
> 
> 赞同：0
> 
> 时间：2013-01-17T15:58:10.137
> 
> 标签：jquery-ui, tabs

因此，有很多解决方案可以像这样选择下一个选项卡

```
var selected = $("#tabs").tabs("option", "selected");
$("#tabs").tabs("option", "selected", selected + 1); 
```

但是，如果我的下一个选项卡被禁用，并且我希望它超过 2 个选项卡，这将不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:58:10.137

好吧，我在这里回答我自己的问题，并不太复杂，尽管我想我会分享我的想法（用咖啡脚本编写）

```
current = @$el.tabs('option', 'selected')
counter = 1
while current == @$el.tabs('option', 'selected') and current + counter <= @$el.tabs('length')
  @$el.tabs 'select', current + counter++ 
```

我还考虑过向选项卡发送键盘事件以模拟右箭头键。欢迎评论

# netty - 小程序中的 Netty 和代理服务器

> ID：14383017
> 
> 赞同：5
> 
> 时间：2013-01-17T15:58:11.500
> 
> 标签：netty

我们在 Java 小程序中使用 Netty 与 tomcat 服务器通信。这完美地工作。

我可以使用下面发布的帮助程序类获取代理信息。

我的问题是如何向 Netty 提供代理服务器信息？

更多信息：

我们有一个用户在 Internet Explorer 中配置了代理服务器。网页和 Java 小程序得到了服务，但是当 Netty 尝试连接时，它绕过了代理服务器并进行了直接连接；这失败了，因为用户设置了防火墙来阻止直接连接——所有客户端连接都必须通过代理服务器。

获取代理信息的帮助代码：

```
import java.net.InetSocketAddress;
import java.net.Proxy;
import java.net.ProxySelector;
import java.net.URI;
import java.net.URL;
import java.util.Iterator;
import java.util.List;

public class ProxyConfig {

    private static final String JAVA_NET_USE_SYSTEM_PROXIES = "java.net.useSystemProxies";
    private static String host;
    private static int port;
    private static String protUrlStr = null;

    public static void init(URL url) {
        // http://10.0.1.136
        protUrlStr = url.getProtocol() + "://" + url.getHost();
        System.setProperty(JAVA_NET_USE_SYSTEM_PROXIES, "true");
        Proxy proxy = getProxy();
        if(proxy != null) {
            InetSocketAddress addr = (InetSocketAddress) proxy.address();
            if(addr != null) {
                host = addr.getHostName();
                port = addr.getPort();
                System.setProperty(JAVA_NET_USE_SYSTEM_PROXIES, "false");
                System.setProperty("http.proxyHost", host);
                System.setProperty("http.proxyPort", port + "");
            }
        }
        System.setProperty(JAVA_NET_USE_SYSTEM_PROXIES, "false");
    }

    public static String getHost() {
        return host;
    }

    public static int getPort() {
        return port;
    }

    private static Proxy getProxy() {
        List<Proxy> l = null;
        try {
            ProxySelector def = ProxySelector.getDefault();
            System.out.println("Getting List<Proxy> for URL = " + protUrlStr);
            l = def.select(new URI(protUrlStr));
            ProxySelector.setDefault(null);
        } catch (Exception e) {
            e.printStackTrace();
        }
        if(l != null) {
            for(Iterator<Proxy> iter = l.iterator(); iter.hasNext();) {
                java.net.Proxy proxy = iter.next();
                return proxy;
            }
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T05:03:28.697

感谢您提出非常详细的问题。HTTP 和 SOCKS 代理支持还没有集成到 Netty 中。Netty 3.6.2 支持 SOCKS 但它仅作为编解码器提供，因此您需要稍作调整以使其透明地工作。

当前缺乏适当的代理支持与 Java NIO 的工作方式有关，尽管 Netty 绝对能够将代理支持集成到其核心。如果有人愿意贡献，Netty 项目组会很乐意审核并接受。

如果您打算仅使用 Netty 发送 HTTP 请求，您可能需要提供一个基于 Netty 的专用 HTTP 客户端库，该库支持代理，例如[AsyncHttpClient](https://github.com/AsyncHttpClient/async-http-client)。

# drupal-7 - 根据分类术语显示用户列表 (D7)

> ID：14383024
> 
> 赞同：1
> 
> 时间：2013-01-17T15:58:35.417
> 
> 标签：drupal-7, views, taxonomy

我有一个分类词汇“部门”。在用户帐户中，我有一个带有此词汇表的分类术语参考字段。因此，每个用户都可以分配到一个或多个部门。我使用模块 Taxonomy Meny 在我的主菜单中显示分类术语。

现在，当我单击菜单中的一个部门时，我想显示一个用户列表。有人知道我该怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:42:45.107

请注意这里，但我想你应该能够使用[视图](http://drupal.org/project/views)模块来实现这一点。使用可以显示所有用户节点（或通过选择字段的列表）并输入部门作为上下文过滤器。

Uou 可以通过两种方式使用视图来生成页面或块。上下文过滤器对页面来说更容易一些，但这可能会与 yout 模块相冲突。

我喜欢本教程，它对上下文过滤器提供了清晰的见解。它应该让你开始。 [http://www.metaltoad.com/blog/using-drupal-contextual-filters-views](http://www.metaltoad.com/blog/using-drupal-contextual-filters-views)

# python - Pydev：如何将一个 gae 项目导入 eclipse Pydev gae 项目？

> ID：14383025
> 
> 赞同：1
> 
> 时间：2013-01-17T15:58:37.990
> 
> 标签：python, google-app-engine, pydev

通过 googleappengine 启动创建了一个 gae 项目，并一直在使用 textmate 构建它。

现在，我想将它导入到 Eclipse PyDev GAE 项目中。尝试导入它，但它不起作用。

有谁知道该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:34:39.550

您可以尝试*不*使用 eclipse 导入功能。在 Eclipse 中，创建一个新的 PyDev GAE 项目，然后您可以复制现有文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T07:55:38.350

请遵循以下步骤：无论您是否（有/没有）将您的更改提交给 SVN / GIT

```
- create a new PyDev GAE project
 - Name the project
 - Then on the same window under Project contents:- uncheck Use Default and select the directory where your Scripts / src files are located.
 - Set Google App Engine Configuration - Path to the Google App Engine folder that you downloaded.
 - Select all, for libraries.
 - Then select Empty project
 - Now your project is created
 - Hit finish !!! you are good to go. 
```

在 Eclipse 中对文件所做的更改也将反映在您的 src 文件中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T19:59:39.703

如果您想使用 Eclipse 的 Import 功能，请使用 General -> File system。

# python - OpenCV 结合 SURF 和神经网络

> ID：14383034
> 
> 赞同：8
> 
> 时间：2013-01-17T15:59:06.980
> 
> 标签：python, image-processing, opencv, neural-network, surf

我想从静态图像中识别车辆（汽车、自行车等）。我正在考虑使用**SURF**来获取有用的**关键点**和**描述符**，然后训练 MLP（多层感知器）神经网络。但是我不知道神经网络的输入和输出是什么，以便我可以识别车辆位于图像的哪个部分（可能是围绕它绘制的矩形）。我知道 SURF 可以在图像中返回有用的关键点及其描述符（我已经这样做了）。关键点有**角度**，每个关键点对应一个**64 或 128 长的向量**作为描述符。我不知道这些关键点到底是什么，以及它们如何用作神经网络的输入。

我正在将 OpenCV 与**Python**一起使用。

我不熟悉使用 SURF 和其他特征提取方法。任何与此有关的帮助都会非常好。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-24T16:39:49.857

如果您使用冲浪特征，这意味着浮动偏移向量 [128] 或 [64] 取决于您的冲浪配置，您将设置神经网络如下

- 使用模型创建数据库：

```
-bikes
-cars
-autobus
-truck 
```

- 为每种类型的物体拍摄不同的照片，例如 10 张不同模型的汽车照片、10 张不同模型的自行车照片、10 张不同模型的卡车照片……等等，每个物体类别的每张照片都提取其冲浪特征向量。

- 每种类型的对象将代表神经网络中的一类对象，如下所示；

```
-car   ;object class 1 =binary representaation in 4 bits= 0 0 0 1
-bikes ;obejct class 2 =binary representaation in 4 bits= 0 0 1 0 
-truck ;obejct class 3 =binary representaation in 4 bits= 0 0 1 1
-ball  ;obejct class 4 =binary representaation in 4 bits= 0 1 0 0 
```

-二进制表示中的每一位将对应网络输出层中的一个神经元，代表一类待识别的对象

现在神经网络的配置将基于特征向量的大小和你想用这种方式识别的对象类型的数量；

输入层中的神经元数；64 或 128，取决于您配置和使用的 surf 特征向量的大小

神经网络中输出层中的神经元数量将是您在此示例中要识别的对象类别的数量 4

每个神经元所需的激活函数是 sigmoid 或 tanh 函数（[http://www.learnartificialneuralnetworks.com/](http://www.learnartificialneuralnetworks.com/)），因为 surf 特征由浮点数表示，如果您使用怪异特征或其他二进制局部特征描述符（Brisk， ORB, BRief ) 然后您将对每个神经元使用二进制激活函数，例如阶跃函数 o sigm 函数

用于训练网络的算法是反向传播

在继续之前，您需要设置并准备数据集以训练神经网络

例子

```
-all feature vector extracted from picture belong a car will be label or asociated to class 1               
-all feature vector extracted from picture belong a bike will be label or asociated to class 2
-all feature vector extracted from picture belong a truk will be label or asociated to class 3
-all feature vector extracted from picture belong a ball will be label or asociated to class 4 
```

在这个例子中，输出层有 4 个神经元，输入层有 128 个 0r 64 个神经元。

- 识别模式下神经网络的输出将是这4个神经元中具有最高值的神经元。

在开始训练阶段之前，它必须在 [0,1] 区间内对数据集中的所有特征使用归一化，因为神经网络的输出是输入向量属于一类对象的概率在数据集中。

训练网络的数据集必须拆分如下：

```
-70% off the data used to train
-15% off the data used to validate the network arquitecture (number of neurons in the hidden layyer)
-15% off the data used to test the final network 
```

训练神经网络时，停止标准是识别率，当识别率接近85-90%时

为什么使用神经网络而不是 svm 机器，svm 机器工作得很好，但它不能在像这样的非线性分类问题中或者当你有很多不同的对象类或对象类型时，它不能成为最好的分离类图，这种缺乏是识别阶段的结果

我建议您阅读一些有关神经网络理论的内容，以了解它们是如何工作的

[http://link.springer.com/chapter/10.1007%2F11578079_10](http://link.springer.com/chapter/10.1007%2F11578079_10)

opencv 有机器学习类到神经网络 mlp 模块

希望这可以帮到你

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T10:58:54.013

[分离检测到的对象的一种简单方法是在输入图像中像这样](http://docs.opencv.org/doc/tutorials/imgproc/shapedescriptors/find_contours/find_contours.html)运行轮廓检测器。

之后，您可以使用来自每个关键点的 x,y 坐标与神经网络识别的每个特征向量相关联，并检查这些关键点中有多少在每个对象的每个轮廓旁边，

同时它可以让您设置一个阈值来验证正确的汽车检测，例如，如果您有 2 辆出租车；2 个轮廓属于每辆车，然后检查每个轮廓中有多少个关键点；

*   轮廓属于出租车 1 里面有 20 个关键点
*   轮廓属于出租车 1 里面有 5 个关键点

您可以将出租车 1 或汽车 1 作为识别的对象

当您识别出验证对象及其轮廓时，您可以计算关闭对象的边界框

另一种方法是对每个训练图像提取属于每个对象的轮廓，计算其边界框，像纯图像一样使用它来提取特征并使其成为训练集中的所有图片

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-18T16:46:25.197

我的建议是观察 BOW 而不是神经网络。请参阅此处使用 SURF 和 Bag Of Words 模型进行对象分类的示例（[第一部分](http://app-solut.com/blog/2011/07/the-bag-of-words-model-in-opencv-2-2/)，[第二部分](http://app-solut.com/blog/2011/07/using-the-normal-bayes-classifier-for-image-categorization-in-opencv/)）。为了提高分类性能，您可以尝试用 SVM 替换朴素贝叶斯分类器。另外，作者提供了很好的[源代码示例](http://code.google.com/p/open-cv-bow-demo/downloads/detail?name=bowdemo.tar.gz&can=2&q=)。我认为这是一个很好的起点。

# javascript - AppleScript - 在 Firefox 上执行 JavaScript

> ID：14383039
> 
> 赞同：2
> 
> 时间：2013-01-17T15:59:26.427
> 
> 标签：javascript, firefox, applescript

Safari 和 Chrome 可以通过 AppleScript 执行 JavaScript

**苹果浏览器：**

```
 tell application "Safari"
    open location "http://example.com"
    activate
    do JavaScript "alert('example');" in current tab of first window
end tell 
```

**铬合金：**

```
tell application "Google Chrome"
    open location "http://example.com"
    activate
    execute front window's active tab javascript "alert('example');"
end tell 
```

**有没有办法在 Firefox 中做到这一点？**

*注意：关于 Opera 的相同问题在这里：[AppleScript - JavaScript execution on Opera](https://stackoverflow.com/questions/14383302/applescript-javascript-execution-on-opera)*

*我想一起问他们，但我决定问两个不同的问题，以便能够分别接受答案。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:05:05.873

在 Firefox 中使用 AppleScript 运行 javascript 尚未实现。[虫子故事](https://bugzilla.mozilla.org/show_bug.cgi?id=5704)。
它处于新状态并且没有受让人。你可以接受它:)

# c# - 使用引用 (ref) 作为同一基类的对象的参数 (C#)

> ID：14383040
> 
> 赞同：0
> 
> 时间：2013-01-17T15:59:27.537
> 
> 标签：c#, reference, subclass, ref

是否可以将对象引用传递给共享相同基类的类的方法签名？即，简化：

```
public class ClassA : System.Web.UI.Control 
public class ClassB : System.Web.UI.Control 
```

在页面中：

```
private void SetCurrentView(ref Control ctrl)
{
  ctrl.Visible = true;
}

protected void Page_Load(object sender, System.EventArgs e)
{
  aClass = new ClassA();
  bClass = new ClassB();
  SetCurrentView(ref aClass);
  SetCurrentView(ref bClass);
} 
```

显然，按原样，这是行不通的，并且在方法调用中强制转换它不是可分配的引用。想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:00:36.003

不，但无论如何你都不需要`ref`这里。

要设置可见性，以下正是您需要的：

```
private void SetCurrentView(Control ctrl)
{
  ctrl.Visible = true;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:03:59.267

你不需要`ref`在你的情况下使用。所有不是值类型（`char,int`等）的东西都将作为引用传递：这意味着变量将指向内存中的同一个对象，因此它将影响同一个实例

*不要将通过引用传递的概念与引用类型的概念混淆。这两个概念并不相同。方法参数无论是值类型还是引用类型，都可以通过 ref 进行修改。通过引用传递值类型时没有装箱。*

[http://msdn.microsoft.com/en-us/library/14akc2c7.aspx](http://msdn.microsoft.com/en-us/library/14akc2c7.aspx)

# java - 使用 jasperreports 在 java 中创建条形码图像，而不将图像保存在磁盘上

> ID：14383041
> 
> 赞同：2
> 
> 时间：2013-01-17T15:59:28.547
> 
> 标签：java, jasper-reports, ireport

我需要使用 jasperreports 在 java 中创建条形码图像，目前我正在将图像文件保存在磁盘上，但我需要这样做而不将图像保存在磁盘上。我需要在内存中创建条形码图像，然后将其作为参数发送到 iReport。

这就是我所做的：

```
Map<String, Object> parameters = new HashMap<String, Object>();
String imagePath = "\\\\netw\\barCode.jpg";
parameters.put("rutaCodigoBarrasVal", imagePath);

Barcode barCode = BarcodeFactory.createPDF417("1234567890");
barCode.setDrawingText(false);
barCode.setBarHeight(33);
barCode.setBarWidth(207);

FileOutputStream fOS = new FileOutputStream(imagePath);
BarcodeImageHandler.writeJPEG(barCode, fOS);
fOS.close(); 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:22:11.727

您应该首先尝试将 Barcode 写入字节数组或 InputStream，查看您的库文档。JasperReports 支持将图像作为 InputStream 参数传递，并将其绘制在报告中。

```
InputStream imageStream = ...;
parametros.put("image", imageStream ); 
```

从 JasperReports 接收作为 java.io.InputStream 的参数，然后使用图像小部件和以下属性绘制它： 图像表达式：$P{image} 表达式类：java.io.InputStream

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T13:00:01.743

最后这是我使用barcode4j库所做的：

```
ByteArrayOutputStream os = new ByteArrayOutputStream();
PDF417Bean barCode = new PDF417Bean();
boolean antiAlias = false;
int orientation = 0;
int dpi = 300;

BitmapCanvasProvider canvas = new BitmapCanvasProvider(dpi, BufferedImage.TYPE_BYTE_BINARY, antiAlias, orientation);

BarcodeDimension dim = new BarcodeDimension(207, 42);
canvas.establishDimensions(dim);
barCode.setColumns(7);
barCode.generateBarcode(canvas, codeToConvert);
canvas.finish();

String mime = MimeTypes.MIME_JPEG;
os = new ByteArrayOutputStream();

final BitmapEncoder encoder = BitmapEncoderRegistry.getInstance(mime);
encoder.encode(canvas.getBufferedImage(), os, mime, dpi);
fis = new ByteArrayInputStream(os.toByteArray()); 
```

# c++ - How to return a copy of a derived object in a vector of base classes?

> ID：14383049
> 
> 赞同：0
> 
> 时间：2013-01-17T16:00:24.040
> 
> 标签：c++, abstract-class, copy-constructor, derived-class

Here is the problem, I have a vector of pointers to an abstract base class filled with derived objects like so:

```
class AbstractBase { /* ... */ };  

clase Derived1 : public AbstractBase {
    Derived1() { }
    Derived1( const AbstractBase& abc ) { /* ... */ }
};

/* ... */

vector< AbstratcBase* > lThingies;

const AbstractBase& getThingie(int pos) {
    return *lThingies[pos];
} 
```

And to get copies of the elements I use the derived class "copy constructor" like so:

```
Derived1 d1 = getThingie(2); 
```

But the problem is that I don't like this: There is no way to force the implementation of this "copy constructor" when building the class "derived42" and even when you do remember it's very easy to get it wrong (like making it a recursive call, happened to me).

**My question is:** *Is there a better way to do this? how?*

**Update:**
One of the "unwritten" requirements of the solution that I'm looking for is to get a copy of the *derived* object as a local variable, so I don't forget to *delete* it.

**More info:**
There are a number of *lThingies* and, at runtime, I can tell what are the derived objects contained within (derived1, derived2, etc.), but not at compile time.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:07:03.617

You could make a pure virtual `clone` function in `AbstractBase` which returns an `AbstractBase` pointer, and override `clone` in your derived classes.

* * *

***STRICTLY OPINION:***

This is sort of a gross and outdated practice though (in my opinion). I suggest re-architecting to eliminate the need to do this in the first place.

To elaborate on my 'gross and outdated' opinion of the virtual constructor idiom (I'm sure this will be controversial):

*   To actually be robust/generic clone would need to be templated for an allocator, like some STL constructs are. But, it can't be.
*   When do you actually want to copy an object of which you don't know the concrete type? I question the legitimacy of that use case.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:29:16.943

Do you know your `getThingie` returns a `Derived1`? If you know this, possibly you should change the return type of `Derived1` and the storage in the `std::vector` to be `Derived1` instead of `AbstractBase`.

Assuming the above doesn't work, you can do a `Derived1 bob = dynamic_cast<Derived1&>(getThingie(...));`, which does a run-time check that the thingy is a `Derived1` or more derived instance, and if so it does the cast -- if not, it throws an exception.

If you don't want to bother with the run time check because you are so certain that it is a `Derived1`, simply use `Derived1 bob = static_cast<Derived1&>(getThingy(...));`.

However, working with actual instances of classes which have an inheritance hierarchy is very questionable. There are many, many things that can go wrong.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-14T22:46:51.087

```
class A
{
   public:
   virtual void toto() { std::cout << "Love Java" <<std::endl; }
   virtual A&& Duplicate() { return std::move(A()); }
};

class B : public A
{
   public:
   virtual void toto() { std::cout << "Love C++11" <<std::endl; }
   virtual B&& Duplicate() { return std::move(B()); }
};

int main()
{
   A *a = new B();;

   A&& b(a->Duplicate());

   a->toto();
   b.toto();
} 
```

In the main you create a B on stack without know his type. (with rvalue reference in c++11)

# layout - JavaFX 的控件/布局允许使用鼠标调整大小？

> ID：14383052
> 
> 赞同：5
> 
> 时间：2013-01-17T16:00:35.037
> 
> 标签：layout, resize, javafx-2

当我说“使用鼠标调整大小”时，我的意思是将指针放在边缘，单击并拖动它会调整大小。
默认情况下，是否有任何 JavaFX 控件或布局可以做到这一点？
谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T20:37:02.033

最接近的内置控件是[SplitPane](http://docs.oracle.com/javafx/2/api/javafx/scene/control/SplitPane.html)。

SplitPane 只有水平或垂直方向，因此您不能在两个方向上任意调整大小，除非您将垂直拆分窗格放置在水平窗格内（反之亦然）。

或者您可以按照 Alexander Kirov 的建议创建自己的用户可调整大小的窗格。

# ruby-on-rails-3 - 出现错误：Shouda::Matchers 的未定义方法“greater_than_or_equal_to”

> ID：14383054
> 
> 赞同：2
> 
> 时间：2013-01-17T16:00:37.880
> 
> 标签：ruby-on-rails-3, unit-testing, activerecord, rspec2, shoulda

这是我试图通过的规范：

```
context "when validating format of attributes" do
    it { should validate_numericality_of(:price).greater_than_or_equal_to(0.01) }
end 
```

我已经安装了`rspec`。`shoulda-matchers`但我得到了更大的`undefined method`_than_or_equal_to'`

现在该方法不在文档中，但它确实存在于此处：

[https://github.com/moffff/should-matchers/commit/7da06487d25c27d59d11fb7f2962e7ff345e45c4](https://github.com/moffff/shoulda-matchers/commit/7da06487d25c27d59d11fb7f2962e7ff345e45c4)

那么为什么这不起作用呢？我应该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:27:53.353

`thoughtbot/shoulda-matchers`该方法在您的应用程序中的原始文件中不存在。您所指的版本是原始 gem 的一个分支。

您可以使用这个 gem 代替原来的 gem，只需在 Gemfile 中设置它的源代码

```
gem 'shoulda-matchers', :git => 'https://github.com/moffff/shoulda-matchers.git' 
```

但是您应该了解，分叉和修改的版本可能会不稳定，不包括最新的更新和修复，等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-09-23T15:11:02.020

It must be `is_greater_than_or_equal_to` (with a `is_` prefix), not `greater_than_or_equal_to`.

See the docs: [https://matchers.shoulda.io/docs/v4.1.2/Shoulda/Matchers/ActiveModel.html#validate_numericality_of-instance_method](https://matchers.shoulda.io/docs/v4.1.2/Shoulda/Matchers/ActiveModel.html#validate_numericality_of-instance_method)

# c# - 在 Newtonsoft JObject 中查找 JToken 的路径/命名空间

> ID：14383055
> 
> 赞同：1
> 
> 时间：2013-01-17T16:00:38.167
> 
> 标签：c#, .net, json, path, json.net

我有以下代码示例（使用 Newtonsoft Json.NET 的 C#）将 Json 字符串序列化为 JObject：

```
var obj = JObject.Parse("{\"F01\" : \"f01\", " +
                    "\"F02\" : \"f02\", " +
                    "\"L01\" : [" +
                        "{" +
                            "\"L01F01\" : \"l01f01\", " +
                            "\"L01F02\" : \"l01f02\"" +
                        "}, " +
                        "{" +
                            "\"L01F01\" : \"l01f01\", " +
                            "\"L01F02\" : \"l01f02\"" +
                        "}, " +
                        "{" +
                            "\"L01F03\" : \"l01f03\" " +
                        "}, " +
                        "{" +
                            "\"L01F03\" : \"l01f03\", " +
                            "\"L01L02\" : [" +
                                "{" +
                                    "\"L01L02F01\" : \"l01l02f01\"" +
                                "}" +
                            "]" +
                        "}" +
                    "]" +
                    "}"); 
```

*请注意，JSON 具有动态结构，其中并非数组中的所有项目都具有相同的名称和属性。*

我制作了以下 JToken：

```
var test01 = obj["F01"];
var test02 = obj["L01"][0]["L01F01"];
var test03 = obj["L01"][3]["L01L02"][0]["L01L02F01"]; 
```

我想知道是否有人知道以类似于以下方式获取测试变量的“路径”的任何方法：

```
GetPathOf(test01) => "F01"
GetPathOf(test02) => "L01[0].L01F01"
GetPathOf(test03) => "L01[3].L01L02[0].L01L02F01" 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-02T21:56:45.203

在[版本 5.0.1](https://github.com/JamesNK/Newtonsoft.Json/releases/tag/5.0.1)（2013 年 4 月 7 日）中添加了一个[`Path`](http://www.newtonsoft.com/json/help/html/P_Newtonsoft_Json_Linq_JToken_Path.htm)属性，它完全符合您的描述。[`JToken`](http://www.newtonsoft.com/json/help/html/T_Newtonsoft_Json_Linq_JToken.htm)

因此，在您的示例中，您可以简单地编写：

```
string path03 = test03.Path; 
```

该`path03`变量将包含`L01[3].L01L02[0].L01L02F01`.

小提琴：[https ://dotnetfiddle.net/5Dhc4i](https://dotnetfiddle.net/5Dhc4i)

# android - 旋转时在片段中保留视频视图

> ID：14383056
> 
> 赞同：3
> 
> 时间：2013-01-17T16:00:46.087
> 
> 标签：android, android-fragments, android-view

我有一个包含 2 个片段的活动（一个 SlidingMenu 和另一个具有控制和其他视图的 VideoPlayer）。

旋转设备时如何保持视频播放状态？视频是 HLS 流，所以，旋转时我不需要重新开始缓冲。

我开始使用 savedInstanceState，但我无法让它工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-23T15:06:15.137

如果您在不同的屏幕方向上使用相同的资源，您可以[防止片段重新创建](https://stackoverflow.com/questions/7139488/androidconfigchanges-orientation-does-not-work-with-fragments).

如果您需要重新创建片段，您可以存储播放进度，并在重新创建后滚动视频到存储位置

```
@Override
protected void onPause() {
    ...
    if(playbackWasStarted) {
        video.pause();
        videoProgress = video.getCurrentPosition();
    }
    ...
}

@Override
protected void onResume() {
    ...
    if(playbackWasStarted && videoProgress!=0) {
        video.seekTo(videoProgress);
        video.start();
    }
    ...
} 
```

**编辑**哦，我没有注意到这个问题已经过时了......

# ios - 在两个 UIView 之间添加更多空间的约束

> ID：14383058
> 
> 赞同：1
> 
> 时间：2013-01-17T16:00:55.333
> 
> 标签：ios, retina-display, autolayout

我正在使用 XCode 4.5.2 和最新的 SDK 开发 iPhone 应用程序。

现在我正在使用 Autolayout 来处理一个故事板，并将其与 iPhone 4S 和 iPhone 5 一起使用。

这是您如何在 Retina 3.5 外形尺寸下看到它：

![在此处输入图像描述](../Images/38de2d11c33be5339806f9516a8484b3.png)

这就是您在 Retina 4 外形尺寸下看到它的方式：

![在此处输入图像描述](../Images/61a70e49aa75d4d772b199b0ba96b797.png)

我需要在**Todos los establecimientos**和**Todos los products**之间添加更多空间。而且，在**Todos los 产品**和**Por distancia >**之间。

**Todos los establecimientos**和**Todos los products**现在有一个`Top Space to: Superview`约束。

**当我使用 Retina 4 外形尺寸时，如何在这些元素之间添加更多空间？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:18:30.457

这可以通过优先级小于 1.0 的约束来完成。要在 2 个视图之间创建约束，请同时选择两者并单击界面构建器右下角的约束按钮以选择在这种情况下垂直间距所需的约束。

Raywenderlich 对此有一个很好的教程： [第 1](http://www.raywenderlich.com/20881/beginning-auto-layout-part-1-of-2) [部分第 2 部分](http://www.raywenderlich.com/20897/beginning-auto-layout-part-2-of-2)

或阅读 Apple 文档： [Apple Guide - Understanding Constraints](https://developer.apple.com/library/ios/recipes/xcode_help-interface_builder/articles-autolayout/UnderstandingAutolayout.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:46:56.747

如果您希望“Busqueda por filters”标签和“Por valoracion”标签保持它们与顶部和底部的固定距离（分别），那么您可以嵌入“Todos los establecimientos”、“Todos los products”和“Por distancia”在视图中。这三个项目将在该视图的顶部、中间和底部具有固定的空间。将该视图垂直间距约束赋予上方的“Busqueda por filters”标签和下方的“Por valoracion”标签，并删除主视图顶部或底部的任何间距约束。当屏幕尺寸变大时，此视图将拉伸，从而在其视图之间留出更多空间。

# unix - 排版功能位置

> ID：14383060
> 
> 赞同：0
> 
> 时间：2013-01-17T16:00:57.783
> 
> 标签：unix, ksh

当我使用 in 中的命令`typeset -f`时`ksh`，标准输出中会显示一个函数列表及其定义。我试图搜索这些函数的定义位置，但我找不到任何关于它们的提示。谁能帮我找到它们？

**编辑**

我只是在学习 typeset 命令的使用，输入`man typeset`game me nothing ( `no manual entry for typeset`)。为了定义将使用 显示`typeset -f`的函数，我们需要定义一个函数并使用 导出它`typeset -xf`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:34:43.837

函数可以在`.profile`, 或文件中声明，从 FPATH 变量引用的目录或文件中调用`.profile`或放入 FPATH 变量引用的目录中（可能还有其他地方）。仔细阅读您`man ksh`在启动时处理文件的顺序。搜索“调用”、“文件”和“函数”部分。

此外，还有一组 ksh 设置的默认函数。因此，请编辑您的问题以显示您关注的函数名称。

IHTH

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:24:20.577

Shell 不会记录函数（或别名，或变量等）的定义位置。从概念上讲，尽管有 shell 历史记录等交互式使用功能，但 shell 一次从输入中读取一个命令，执行它们，然后忘记它们。有时这些命令来自交互式输入，有时它们来自脚本。有时它们会产生副作用，例如在 shell 环境中定义函数，但 shell 在执行完命令后仍然不记得命令或其在 shell 输入流中的位置。

# php - 将 php 变量传递给 javascript（无法正常工作）

> ID：14383061
> 
> 赞同：1
> 
> 时间：2013-01-17T16:00:57.910
> 
> 标签：php, javascript, variables

我在将 php 变量添加到我的 .js 文件并使其工作时遇到问题。

这是我试图传递变量的 php 函数：

```
function java_scr_preview ($foto)
{
    echo '<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>';
    echo '<script type="text/javascript">';
    echo 'var pass_this_variable =  "'.$foto.'"'; 
    echo '</script>';
    echo '<script type="text/javascript" src="ddimgtooltip.js">';
    echo '<SCRIPT LANGUAGE="JavaScript">';
    echo 'function Preview(url)';
    echo '{';
    echo "window.open(url,'_blank','location=no,scrollbars=yes,toolbar=no,width=500,height=700')";
    echo '}';
    echo '</SCRIPT>';
} 
```

这是我的整个 php 脚本（如果需要）

```
<?php

    require ("auth.php");

    if (isset($_GET['cmd'])) 
        $cmd  = $_GET['cmd'];
    else 
        $cmd = "";

    switch ($cmd) {

        case "":
            html_open_std ();
            ingave_artikel ("", "", "", "");
            html_close ();
            break;

        case "search":
            html_open_std ();
            ingave_artikel ("", "", "", "");
            toon_banden ();
            html_close ();
            break;

        case "preview":
            $foto   = $_GET['foto'];
            toon_preview ($foto);
            break;
    }

#------------------------------------------------------------

function ingave_artikel ($art1, $art2, $art3, $errormelding)
{
    global $urlphp;
    global $urlcgi;
    global $ad;

    echo "<div id=\"invoeren\">";
    echo "<h1>Ingave bandenmaat</h1>\n";

    echo "<form method=\"POST\" action=\"?cmd=search\">\n";
    echo "<table border=\"0\" cellspacing=\"2\" cellpadding=\"2\">\n";

    echo "<tr>\n";
    echo "<td>Breedte</td>\n";
    echo "<td>&nbsp</td>\n";
    echo "<td>Hoogte</td>\n";
    echo "<td>&nbsp</td>\n";
    echo "<td>Diameter</td>\n";
    echo "</tr>\n";

    echo "<tr>\n";
    echo "<td><input type=\"text\" name=\"art1\" value=\"" . $art1 . 
            "\" size=\"5\"></td>\n";
    echo "<td>/</td>\n";
    echo "<td><input type=\"text\" name=\"art2\" value=\"" . $art2 . 
            "\" size=\"5\"></td>\n";
    echo "<td>x</td>\n";
    echo "<td><input type=\"text\" name=\"art3\" value=\"" . $art3 . 
            "\" size=\"5\"></td>\n";
    echo "</tr>\n";

    if (! empty ($errormelding))
            echo "<tr><td colspan=\"5\"><font color=\"red\">" . 
                $errormelding . "</td></tr>\n";

    echo "<tr>\n";
    echo "<td colspan=\"3\">\n";
    echo "<input type=\"submit\" value=\"Verwerk\">\n";
    echo "</td>\n";
    echo "</tr>\n";

    echo "</table>\n";
    echo "</form>\n";
    echo "</div>\n";

}

#------------------------------------------------------------

function toon_banden ()
{
    global $urlphp;
    global $urlcgi;
    global $gateway;

    java_scr_preview ();

    $art1 = trim($_POST["art1"]);
    $art2 = trim($_POST["art2"]);
    $art3 = trim($_POST["art3"]);

    if (empty ($art1)  || empty ($art3)) {
        ingave_artikel ($art1, $art2, $art3, 
                    "Alle velden ingeven s.v.p.");
        return (-1);
    }

        $f = open_url ($gateway . "?3," .  $art1 . $art2 . "R" . $art3);

    if ($f == NULL)
        return (-1);

    $t = 0;
    $ncol = 4;

    $ar = explode (PHP_EOL, $f);

    if (substr($ar[0],0,7) == "*ERROR*") {
                echo "<p>";
                echo "<h1>";
                echo "Gateway functions are disabled !" . "<br>";
                echo "</p>";
                return (-1);
    }

    foreach ($ar as $rec) {
            if ($rec == 0) {
        continue;
    }
                list ($sysnr,
                      $artikel,
                      $merk,
                      $rubriek,
                      $omschrijving,
                      $valuta,
                      $netto,
                      $bruto,
                      $beschikbaar,
                      $foto,
                      $draagvrm,
                      $levid,
                      $garpr,
                      $altpr,
                      $eancode) = explode ("\t", $rec);

        if ($sysnr == "*END*")
            break;

        if ($t == 0) {

                echo "<table border=0 cellspacing=0 cellpadding=0>";
    echo "<tr><td align=center>";
            echo "<div id=\"uitkomst\">";
            echo "<h1>Overzicht beschikbare voorraad</h1>\n";
            echo "<table border=\"0\" cellspacing=\"2\" cellpadding=\"5\">\n";
            echo "<td><b>Merk</td>\n";
            echo "<td><b>Omschrijving</td>\n";
            echo "<td><b>LI/SI</td>\n";
            echo "<td align=\"right\"><b>Bruto</td>\n";
            echo "<td align=\"right\"><b>Netto " . $valuta . "</td>\n";
            echo "<td align=\"right\"><b>Beschikbaar</td>\n";
            echo "<td></td>\n";
        }

        ### klantprijs opslag 25 %

        $klantpr = $netto * 1.25;
        $klantpr_str = sprintf ("%7.2f", $klantpr);
        echo "<tr>\n";
        echo "<td>" . $merk . "</td>\n";
        echo "<td>" . $omschrijving . "</td>\n";
        echo "<td>" . $draagvrm . "</td>\n";
        echo "<td align=\"right\">" . $bruto . "</td>\n";
        echo "<td align=\"right\">" . $klantpr_str . "</td>\n";
        echo "<td align=\"right\">" . $beschikbaar . "</td>\n";
        if (empty ($foto))
            echo "<td></td>\n";
        else {
            echo "<td>";
            echo '<a rel="imgtip[2]" href="javascript:Preview';
            echo "('?cmd=preview&foto=$foto')";
            echo '">';
            echo "Foto";
            echo '</a>';
            echo "</td>\n";
        }
        echo "</tr>\n";
        $t++;
    }

    if ($t == 0)
        ingave_artikel ($art1, $art2, $art3, 
                    "Geen artikelen gevonden !");
    else {
        echo '</table>';
        echo '</div>';
    }

}

#------------------------------------------------------------

function toon_preview ($fotonr)
{
        global $imglarge;

        html_open_std ();
    echo '<center>';
    echo '<br>';
    echo '<img border="0" src="' . $imglarge . '/' . $fotonr . '">';
        html_close ();
}

#------------------------------------------------------------

function toon_selektie ($merk, $model, $type, $diameter)
{
    echo '<table border="0" cellspacing="0" cellpadding="0">';
    echo '<tr><td width="70">Merk</td><td><b>' . $merk . '</td></tr>';
    echo '<tr><td>Model</td><td><b>' . $model . '</td></tr>';
    echo '<tr><td>Type</td><td><b>' . $type . '</td></tr>';
    echo '<tr><td>Diameter</td><td><b>' . $diameter . '</td></tr>';
    echo '</table>';
    echo '<hr>';
}

#------------------------------------------------------------

function open_url ($url)
{
    global $login;
    global $passwd;

    $ch = curl_init("http://$url");

    curl_setopt($ch, CURLOPT_USERPWD, "$login:$passwd");

    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

    $file = curl_exec($ch);

    $status = curl_getinfo($ch, CURLINFO_HTTP_CODE);
    $errno = curl_errno($ch);
    $error = curl_error($ch);

    if ($status == 200) {
        return ($file);
    }
    else {
        echo "<p>";
        echo "<h1>";
        if ($status == 401) {
            echo "Authentication failed !";
        }
        else {
            echo "Errno: " . $errno . "<br>";
            echo "Error: " . $error . "<br>";
            echo "HTTP status : " . $status . "<br>";
        }
        echo "</p>";
        return (NULL);
    }
}

#------------------------------------------------------------

function html_open_std ()
{
    echo '<html>';
    echo '<head>';
    echo '<title>Banden uit voorraad leverbaar</title>';
    echo '<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">';
    echo '<meta name="robots" content="noinclude, nofollow">';
    echo '<link rel="stylesheet" href="tyre.css" type="text/css">';
    echo '</head>';
    echo '<body>';
}

#------------------------------------------------------------

function html_close ()
{
    echo "</body>";
    echo "</html>";
}

#------------------------------------------------------------

function java_scr_preview ($foto)
{
    echo '<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>';
    echo '<script type="text/javascript">';
    echo 'var pass_this_variable =  "'.$foto.'"'; 
    echo '</script>';
    echo '<script type="text/javascript" src="ddimgtooltip.js">';
    echo '<SCRIPT LANGUAGE="JavaScript">';
    echo 'function Preview(url)';
    echo '{';
    echo "window.open(url,'_blank','location=no,scrollbars=yes,toolbar=no,width=500,height=700')";
    echo '}';
    echo '</SCRIPT>';
}
?> 
```

这是我的整个 .js 文件：

这是一个工具提示脚本，我想动态显示我的图像：

```
/* Image w/ description tooltip v2.0
* Created: April 23rd, 2010\. This notice must stay intact for usage 
* Author: Dynamic Drive at http://www.dynamicdrive.com/
* Visit http://www.dynamicdrive.com/ for full source code
*/

var ddimgtooltip={

    tiparray:function(){
        var tooltips=[]
        //define each tooltip below: tooltip[inc]=['path_to_image', 'optional desc', optional_CSS_object]
        //For desc parameter, backslash any special characters inside your text such as apotrophes ('). Example: "I\'m the king of the world"
        //For CSS object, follow the syntax: {property1:"cssvalue1", property2:"cssvalue2", etc}

        tooltips[0]=["red_balloon.gif", "Here is a red balloon<br /> on a white background", {background:"#FFFFFF", color:"black", border:"5px ridge darkblue"}]
        tooltips[1]=["duck2.gif", "Here is a duck on a light blue background.", {background:"#DDECFF", width:"200px"}]
        tooltips[2]=["http://www.website.net/preview/test/pass_this_variable"]
        tooltips[3]=["../dynamicindex17/bridge.gif", "Bridge to somewhere.", {background:"white", font:"bold 12px Arial"}]

        return tooltips //do not remove/change this line
    }(),

    tooltipoffsets: [20, -30], //additional x and y offset from mouse cursor for tooltips

    //***** NO NEED TO EDIT BEYOND HERE

    tipprefix: 'imgtip', //tooltip ID prefixes

    createtip:function($, tipid, tipinfo){
        if ($('#'+tipid).length==0){ //if this tooltip doesn't exist yet
            return $('<div id="' + tipid + '" class="ddimgtooltip" />').html(
                '<div style="text-align:center"><img src="' + tipinfo[0] + '" /></div>'
                + ((tipinfo[1])? '<div style="text-align:left; margin-top:5px">'+tipinfo[1]+'</div>' : '')
                )
            .css(tipinfo[2] || {})
            .appendTo(document.body)
        }
        return null
    },

    positiontooltip:function($, $tooltip, e){
        var x=e.pageX+this.tooltipoffsets[0], y=e.pageY+this.tooltipoffsets[1]
        var tipw=$tooltip.outerWidth(), tiph=$tooltip.outerHeight(), 
        x=(x+tipw>$(document).scrollLeft()+$(window).width())? x-tipw-(ddimgtooltip.tooltipoffsets[0]*2) : x
        y=(y+tiph>$(document).scrollTop()+$(window).height())? $(document).scrollTop()+$(window).height()-tiph-10 : y
        $tooltip.css({left:x, top:y})
    },

    showbox:function($, $tooltip, e){
        $tooltip.show()
        this.positiontooltip($, $tooltip, e)
    },

    hidebox:function($, $tooltip){
        $tooltip.hide()
    },

    init:function(targetselector){
        jQuery(document).ready(function($){
            var tiparray=ddimgtooltip.tiparray
            var $targets=$(targetselector)
            if ($targets.length==0)
                return
            var tipids=[]
            $targets.each(function(){
                var $target=$(this)
                $target.attr('rel').match(/\[(\d+)\]/) //match d of attribute rel="imgtip[d]"
                var tipsuffix=parseInt(RegExp.$1) //get d as integer
                var tipid=this._tipid=ddimgtooltip.tipprefix+tipsuffix //construct this tip's ID value and remember it
                var $tooltip=ddimgtooltip.createtip($, tipid, tiparray[tipsuffix])
                $target.mouseenter(function(e){
                    var $tooltip=$("#"+this._tipid)
                    ddimgtooltip.showbox($, $tooltip, e)
                })
                $target.mouseleave(function(e){
                    var $tooltip=$("#"+this._tipid)
                    ddimgtooltip.hidebox($, $tooltip)
                })
                $target.mousemove(function(e){
                    var $tooltip=$("#"+this._tipid)
                    ddimgtooltip.positiontooltip($, $tooltip, e)
                })
                if ($tooltip){ //add mouseenter to this tooltip (only if event hasn't already been added)
                    $tooltip.mouseenter(function(){
                        ddimgtooltip.hidebox($, $(this))
                    })
                }
            })

        }) //end dom ready
    }
}

//ddimgtooltip.init("targetElementSelector")
ddimgtooltip.init("*[rel^=imgtip]") 
```

而这条规则：

```
tooltips[2]=["http://www.website.net/preview/test/pass_this_variable"] 
```

应该显示变量 $foto...

任何人都可以帮我解决这个问题吗？现在工作2天，无法弄清楚...

**更新**

我已经尝试了一些事情，并且设法在我的 javascript 中获取了一些信息，如下所示：

.php 文件

```
function java_scr_preview ()
{
    echo '<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>';
?>

<?php
$foto = "image.jpg";
?>
<script type="text/javascript">
var foto = "<?= $foto ?>";
</script>
<?php

    echo '<script type="text/javascript" src="ddimgtooltip.js">';
    echo '<SCRIPT LANGUAGE="JavaScript">';
    echo 'function Preview(url)';
    echo '{';
    echo "window.open(url,'_blank','location=no,scrollbars=yes,toolbar=no,width=500,height=700')";
    echo '}';
    echo '</SCRIPT>';
}
?> 
```

.js 文件

```
tooltips[2]=["http://www.website.net/preview/test/"+ foto];
alert(tooltips[2]); 
```

这在我的警报中显示[http://www.website.net/preview/test/image.jpg ...](http://www.website.net/preview/test/image.jpg)

但是当我这样做时：

```
$foto = $_GET["foto"]; 
```

我收到一个错误：

注意：未定义索引：第 291 行 /var/www/html/website.nl/test/test.php 中的照片

在我的警报中只有[http://www.website.net/preview/test/](http://www.website.net/preview/test/) ...

我应该如何传递我的动态变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:02:56.547

改变

```
tooltips[2]=["http://www.website.net/preview/test/pass_this_variable"] 
```

至

```
tooltips[2]=["http://www.website.net/preview/test/" + pass_this_variable] 
```

您没有使用只是传递文本的变量。

[这里的简化示例](http://jsfiddle.net/manseuk/mJr3b/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:05:21.763

在函数**toon_banden()**中，您调用**java_scr_preview()**并且您没有传递预期的 arg。

# php - PHP MySQL 安全性，我真的需要它吗？

> ID：14383065
> 
> 赞同：2
> 
> 时间：2013-01-17T16:01:09.803
> 
> 标签：php, mysql, security

所以我一直想知道，在上一个[问题](https://stackoverflow.com/questions/7755145/is-my-ip-in-my-database-if-so-find-timestamp)中被建议使用 PDO 准备语句之后，为什么在连接到我的数据库以在这样的实例中使用它们时它很重要？

例如使用`$_SERVER['REMOTE_ADDR']`

我的意思是，如果没有人知道我正在使用数据库，他们不知道我在寻找什么，而我在数据库中寻找的东西（假设他们知道）是一个 IP 地址，为什么要它事情？这是 XSS 攻击的问题吗？

真正的问题。在这种情况下，永远无法找到使用 PDO 语句（或类似方法）的任何理由。确定我不是脆弱的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T16:18:05.693

所以你根本没有清理你的输入？真的吗？

当您有一个名为“Bob O'Reilly”的用户时会发生什么？你的代码能应付吗？你试过了吗？

或者如果有人在数字字段中输入字母会发生什么。你的代码能应付吗？

SQL 数据清理不仅仅是防止黑客攻击；它允许输入日常数据，而不必担心它是否包含引号或其他会破坏查询的字符。

防止黑客入侵是一件非常好的事情，但即使这不是考虑因素，您仍然需要清理您的数据库输入。

> ...如果没有人知道我正在使用数据库...

他们猜测，黑客并不“知道”；他们尝试了一些常见的黑客技术，看看会发生什么。如果该站点以他们希望的方式做出响应，那么他们就知道它很脆弱。那是他们真正开始攻击你的时候。

这些调查黑客通常是自动化的，只是在网络上搜寻要攻击的网站；只要上网，您就会很容易受到攻击。不要仅仅因为你是默默无闻的，或者因为没有人知道你的代码，或者因为没有人想破解你，就认为你是安全的。他们会找到你，他们会入侵你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T16:07:21.737

当您从 GET 或 POST 请求或从 Cookie 中获取值并使用该值来构建将要查询的字符串时，收到的数据可能已被恶意用户正确设置以将您的原始查询转换为一个不同的（使用不同的 SQL 语句）并控制您的数据。

这里就不一一解释了，Google for **SQL injection**。

当您使用“准备好的语句”时，几乎不可能使用传递的数据来更改查询语句。

**编辑**

> 例如使用 $_SERVER['REMOTE_ADDR']

如果唯一的值是那个值，那么你就很安全了。但是，谁知道...

也许将来会发现的 PHP 中的错误将允许客户端更改该值以调整您的查询...

怀疑坚持*准备好的陈述*模式。这对你来说有什么代价？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T16:17:59.390

使用准备好的语句，即使它可能不是绝对必要的，也会让您保持默认生成安全代码的心态，并避免您认为输入安全但实际上并不安全的情况（例如，`$_SERVER['HTTP_HOST']`看起来安全，但不一定） . 是的，特定的变量`$_SERVER['REMOTE_ADDR']` *应该*是安全的，但特别小心不会丢失任何东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T16:06:32.807

在你的 sql 语句中使用过你的 php vars？对于 where / order / limit 子句？如果是，则使用带有转义变量的 PDO 语句。

如果将来您迁移到 SQLServer、SQLite……您只需要用 PDO 更改驱动程序连接器（1 个代码行）。使用 mysql/mysqli，您必须更改所有 php 代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T16:06:53.510

PDO 有助于阻止攻击者提供的任意 SQL（SQL 注入）的执行。

如果攻击者可以在您的服务器上执行他们喜欢的任何 SQL，那么他们可以从数据库中检索/编辑数据，此外，在某些 DBMS 中，他们将能够根据所采取的安全措施访问/创建可能在您的 webroot 中的文件。

# python - python函数列表索引必须是整数错误

> ID：14383075
> 
> 赞同：0
> 
> 时间：2013-01-17T16:01:37.883
> 
> 标签：python, python-2.4

.txt 文件包含 3 个字段，以逗号 (,) 分隔的文本、数字和一些特殊字符，仅运行一个`for row in sortedlist: print row[1]`示例就可以正常工作。

```
import csv
import operator
import sys

inf = csv.reader(open('data.txt','r'))
sortedlist = sorted(inf, key=operator.itemgetter(2), reverse=True)

def dothis(x):
    for row in sortedlist:
        print row[x]

if __name__ == "__main__":
    c = sys.argv[0]
    if (c == ''):
        raise Exception, "missing first parameter - row"
    dothis(c) 
```

我收到以下错误 -

```
python test.py 1 Traceback (most recent call last):   File "test.py", line 16, in ?
    dothis(c)   File "test.py", line 10, in dothis
    print row[x] TypeError: list indices must be integers 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:02:49.687

在您显示的代码中，`c`因此`x`设置为`sys.argv[0]`，这是一个字符串。您不能使用字符串来索引列表。

你的意思是说：

```
if __name__ == "__main__":
    if len(sys.argv) < 2:
        raise Exception, "missing first parameter - row"
    c = int(sys.argv[1])
    dothis(c) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:06:58.270

命令行参数默认是字符串，即使它们是数字。如果您需要将其用作列表的索引，则需要将其转换为数字，可能与`int`

您的情况甚至更奇怪，您正在使用 sys.argv[0] 作为索引访问列表。请记住，[sys.argv[0]](http://docs.python.org/2/library/sys.html#sys.argv)始终是当前执行脚本的名称，并且在所有情况下都是非数字、非整数。我相信在所有情况下，你指的是`sys.argv[1]`你提到的任何地方`sys.argv[0]`

# php - Php - 下载希伯来语网站 - 字符问题

> ID：14383078
> 
> 赞同：-1
> 
> 时间：2013-01-17T16:01:47.223
> 
> 标签：php, curl, web-scraping, hebrew

有谁知道如何下载页面，例如：

```
http://www.zvz.co.il/SingleAd.aspx?p=76755307&t=11&m=p 
```

当我这样做时，我在标题中得到了这个：

```
<head id="Head1"><title> 
×–×”-×•×–×” - ×¨×›×‘: ×ž××–×“×” ×œ×× ×˜×™×¡ 323 ×ª×ª ×“×’× glx ××•×˜×•' â€1800, ×©× ×ª 1996, 8,000 â‚ª , ×ª. ×”×™×œ×•×›×™× ××•×˜×•×ž×˜×™×ª, ×™×“ ×¨××©×•× ×”, ××–×•×¨ ×™×™×©×•×‘×™× ×•×ž×•×©×‘×™× ×‘×“×¨×•× ×‘×¤×ª×— ×ª×§×•×•×”, ×ž× ×•×¢ 1,840 ×¡×ž"×§, ×ž× ×•×¢ ×‘× ×–×™×Ÿ, ×¦×‘×¢ ×›×¡×£, ×ž×¡' ×§"×ž 210,000, ×‘×¢×œ×•×ª × ×•×›×—×™×ª ×¤×¨×˜×™×ª, ×”×¢×¨×•×ª ×ž×¦×‘ ×ž×›× ×™ ×ž×¢×•×œ×” 
</title><link rel="Stylesheet" type="text/css" href="1.css" /> 
```

但真正存在的是：

```
<head id="Head1"><title>
    זה-וזה - רכב: מאזדה 2, שנת 2009, 80,000 ₪ , ת. הילוכים אוטומטית, יד שנייה, אזור רמת גן - גבעתיים ברמת גן, מנוע 1,400 סמ"ק, מנוע בנזין, צבע שחור, מס' ק"מ 30,000, בעלות קודמת פרטית, בעלות נוכחית פרטית, הערות שמורה ומתוחזקת.טסט לשנה(יוני 13).2 צמיגים קדמיים חדשים.בקיצור אחלה רכב עם מעט ק"מ.לרציניים בלבד., תוספות מערכת אבטחה של קוברה.מפוארת., טסט הבא 29/06/2013
</title><link rel="Stylesheet" type="text/css" href="1.css" /> 
```

我需要一些特殊的字符编码吗？我使用标准的 Php & cUrl 来做一个简单的网络请求和下载。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:08:43.063

有一些类似的线程可能对您有所帮助：

[R：从使用 RCurl 抓取的网页中提取“干净”的 UTF-8 文本](https://stackoverflow.com/questions/11069908/r-extracting-clean-utf-8-text-from-a-web-page-scraped-with-rcurl)

[使用“cat”将非英文字符写入 .html 文件（在 R 中）](https://stackoverflow.com/questions/7483742/using-cat-to-write-non-english-characters-into-a-html-file-in-r)

本质上不一样，但可能有帮助。

# asp.net - asp gridview中修改和删除项目

> ID：14383079
> 
> 赞同：0
> 
> 时间：2013-01-17T16:01:51.263
> 
> 标签：asp.net, sql-server, vb.net, visual-studio-2010, gridview

我目前正在使用 asp.net 的 gridview。

我正在使用 SELECT 语句来填充 gridview。当我在gridview中使用编辑和删除时，它不起作用，并且所有示例都需要预先定义gridvew的列，这意味着不会有SELECT语句来填充gridview。

即使我使用 SELECT 语句填充网格视图，有没有办法可以编辑和删除网格视图中的项目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:12:13.483

这是修改gridview单元格内容的一种方法：

```
Dim gvRow As GridViewRow

For Each gvRow In GridView1.Rows
  gvRow.Cells(rownumber).Text = "this was modified"
  next gvRow 
```

您可以使用`GridView.DeleteRow`删除一行。

# php - 数据未插入

> ID：14383083
> 
> 赞同：1
> 
> 时间：2013-01-17T16:02:00.560
> 
> 标签：php, mysql

我创建了一个简单的 Web 表单，您可以在其中输入数据，然后将其发布到数据库中，在提交信息时它已正确提交，但是当我在表中查看它时，数据是不可见的。

询问

```
CREATE TABLE `recipe` (
    `id` int(4) NOT NULL auto_increment,
    `recipename` varchar(65) NOT NULL default '',
    `ingredients` varchar(65) NOT NULL default '',
    `instructions` varchar(65) NOT NULL default '',
PRIMARY KEY (`id`)
) TYPE=MyISAM AUTO_INCREMENT=0 ; 
```

php代码

```
<?php

$host="localhost"; // Host name
$username="my username"; // Left empty due to privacy
$password="mypassword"; // Left empty due to privacy
$db_name="mydatabase"; // Left empty due to privacy
$tbl_name="recipe"; // Table name

mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");

$recipe=$_POST['recipename'];
$ingredients=$_POST['ingredients'];
$instructions=$_POST['instructions'];

$sql="INSERT INTO $tbl_name(recipename, ingredients, instructions)VALUES('$recipe', '$ingredients', '$instructions')";
$result=mysql_query($sql);

if($result){
    echo "Successful";
    echo "<BR>";
    echo "<a href='recipe.php'>Back to main page</a>";
} else {
   echo "ERROR";
}
?>

<?php
// close connection
mysql_close();
?> 
```

网页表格

```
<table width="300" border="0" align="center" cellpadding="0" cellspacing="1">
  <tr>
    <td>
      <form name="form1" method="post" action="insert_ac.php">
        <table width="100%" border="0" cellspacing="1" cellpadding="3">
          <tr>
            <td colspan="3"><strong>Insert Data Into mySQL Database </strong></td>
          </tr>
          <tr>
            <td width="71">Recipe name</td>
            <td width="6">:</td>
            <td width="301"><input name="name" type="text" id="recipe"></td>
          </tr>
          <tr>
            <td>Ingredients</td>
            <td>:</td>
            <td><input name="lastname" type="text" id="ingredients"></td>
          </tr>
          <tr>
            <td>Instructions</td>
            <td>:</td>
            <td><input name="email" type="text" id="instructions"></td>
          </tr>
          <tr>
            <td colspan="3" align="center"><input type="submit" name="Submit" value="Submit"></td>
          </tr>
        </table>
      </form>
    </td>
  </tr>
</table> 
```

我很想知道是否有人知道数据不可见的原因。![在此处输入图像描述](../Images/6ad736cc26fb232f977255a6f52ef0cf.png)

没有数据的表的图像

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:11:58.700

```
$recipe=$_POST['recipename'];
$ingredients=$_POST['ingredients'];
$instructions=$_POST['instructions']; 
```

需要是：

```
$recipe=$_POST['name'];
$ingredients=$_POST['lastname'];
$instructions=$_POST['email']; 
```

您的表单字段名称错误，因此它没有获取值并因此插入空数据。如果你设置`error_reporting`为`E_ALL`你会得到一个错误。确保在该设置下使用它进行开发。

`name`表单字段中的属性也是索引名称的含义`$_POST['INDEX_NAME']`，您错误地使用了该`id`属性。

# ember.js - ember.js 数组在视图中没有被破坏

> ID：14383084
> 
> 赞同：0
> 
> 时间：2013-01-17T16:02:10.423
> 
> 标签：ember.js

我有一个包含在其他视图中的 ember 视图，看起来有点像这样：

```
App.view = Em.View.extend
  buttons: [
    Em.Object.create
      label: 'one'
    Em.Object.create
      label: 'two'
  ] 
```

当视图被销毁时，按钮数组不会被销毁，因为它显然不知道这样做。

每次通过覆盖destroy方法来删除这个数组的最佳选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:29:50.470

我认为数组没有被破坏，因为它在所有未来的 App.view 实例之间共享，（参见[http://codebrief.com/2012/03/eight-ember-dot-js-gotchas-with-workarounds/](http://codebrief.com/2012/03/eight-ember-dot-js-gotchas-with-workarounds/)，第 6 章)

虽然我不是 100% 确定，但如果你在 init() 中定义按钮数组，我认为它将被删除以及视图实例被破坏。

```
App.View = Em.View.extend

 buttons: null
 init ->
   @buttons = [
     Em.Object.create
       label: 'one'
     Em.Object.create
       label: 'two'
  ] 
```

顺便说一句，建议大写视图类。

# cplex - 通过改变方向和优先级找到多种解决方案

> ID：14383087
> 
> 赞同：0
> 
> 时间：2013-01-17T16:02:14.350
> 
> 标签：cplex

使用 cplex，我想多次解决 SAT 问题，并通过更改变量的方向 (IloCplex.BranchDirection.Up | IloCplex.BranchDirection.Down) 和优先级来获得不同的解决方案。但是，我总是得到相同的解决方案（存在数千个）。

我或多或少做了以下事情：

```
IloCplex solver = new IloCplex();
solver.addEq(...);
solver.addGe(...);
solver.addLe(...);

while (true) {
  Collections.shuffle(vars);

  for (IloIntVar var : vars) {
    solver.setDirection(variables.get(object), random.nextBoolean() ? IloCplex.BranchDirection.Up : IloCplex.BranchDirection.Down);
    solver.setPriority(variables.get(object), vars.indexOf(var));
  }

  solver.solve();

  for (IloIntVar var : vars) {
      value = solver.getValue(var);
  }
} 
```

我想在每次迭代中为每个变量获得不同的（如果可行的话）值。有人知道我的错在哪里吗？我尝试了所有solver.clear* 方法来重置它，但这并没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:39:00.603

分支优先级改变了哪些节点在分支切割树上得到扩展。虽然您*可能*会通过更改它们获得不同的解决方案，但不能保证。事实上，很可能在根节点上使用启发式方法找到的第一个解决方案根本没有发生分支。在像你这样的纯 0-1 问题的情况下，你可以执行以下操作

1.  求解第一个解 (x ^* )
2.  设 y = x 的总和^* [i]
3.  添加约束总和 (2 x ^* [i] - 1) x[i] <= y

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-17T19:58:28.823

CPLEX 还具有用于在 MIP 优化期间累积多个解决方案的解决方案池功能。它具有控制细节的参数，因此您可以指示它仅接受最优百分比内的解决方案。由于解决方案池的底层一棵树算法只需要一个或两个分支定界通道来累积请求的解决方案，因此这可能比重复优化和添加约束以排除先前找到的解决方案运行得更快。有关更多信息，请参阅解决方案池和填充过程的 CPLEX 文档。

# html - 如何在 HTML 中创建下面给出的特定配置？

> ID：14383088
> 
> 赞同：1
> 
> 时间：2013-01-17T16:02:17.493
> 
> 标签：html

对于某些项目，我想创建一个配置，如下图所示的 HTML 图像。

![在此处输入图像描述](../Images/651286f80408a2e8ce89ef0a70eb9df1.png)

这是一个圆环（以两个圆圈为界），分为 10 个相等的单元格，每个单元格都有不同的颜色（10 种不同的颜色）。每个单元格也有一个数字（0-9）与之对应，并且数字的位置是固定的（例如：黑色的顶部单元格具有数字“0”，下一个单元格在顺时针方向具有数字“1”）。每个单元格的颜色必须动态变化（在每个会话中），并且所有单元格都有 10 种不同颜色中的唯一颜色。我想为它编写 HTML 代码。

我的方法是：首先我画两个圆圈，然后使用线条几何划分为 10 个相等的单元格。但问题是如何在每个单元格中填充颜色！

有什么建议么 ！！！请给我 HTML 代码或正确的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T10:20:18.857

有一个插件叫做`Set Text on a Circle`，它可能对你有用，在这里试试[http://css-tricks.com/set-text-on-a-circle/](http://css-tricks.com/set-text-on-a-circle/)

# jquery - 选择两个不同的单选按钮后如何触发事件

> ID：14383089
> 
> 赞同：0
> 
> 时间：2013-01-17T16:02:19.213
> 
> 标签：jquery

我有两组单选按钮：

```
<input type="radio" name="amount" value="1"/>
<input type="radio" name="amount" value="2"/>

<input type="radio" name="book" value="fiction"/>
<input type="radio" name="book" value="novel"/> 
```

```
function myEvent(){
    //do something
} 
```

我想触发一个事件，特别是在选中两个单选按钮时调用另一个函数。我尝试使用`click()`, 和`change()`函数，但是，在选中第一个单选按钮后调用该函数。我只想在选中两个单选按钮后才调用一个函数。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:04:57.160

像这样的东西应该工作：

```
$(':radio').change(function() {
    if($(':radio:checked').length === 2) {
        myEvent();
    }
}); 
```

关键部分是`if`语句，它选择所有单选按钮，然后在调用函数之前`checked`确保其中正好有两个（使用生成的 jQuery 对象的属性）。`length`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:06:12.143

```
$(':radio').change(function() {
    if ($("input:radio[name='name']").is(':checked') && $("input:radio[name='book']").is(':checked')) {
         myEvent();
    }
} 
```

# delphi - 使用 TArray 的原因是什么 而不是 T 的数组？

> ID：14383093
> 
> 赞同：32
> 
> 时间：2013-01-17T16:02:28.360
> 
> 标签：delphi, delphi-xe2

我正在将旧版 Delphi 应用程序迁移到 Delphi-XE2，我想知道是否有充分的理由替换定义`Array of MyType`为`TArray<MyType>`. `TArray<T>`所以问题是使用 Array of MyType 而不是使用的优缺点是什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-17T16:10:03.140

主要优点是不那么繁琐的类型标识规则。考虑：

```
a: array of Integer;
b: array of Integer; 
```

这两个变量不兼容赋值。这是一个编译器错误：

```
a := b; 
```

另一方面，如果您使用通用语法：

```
a: TArray<Integer>;
b: TArray<Integer>; 
```

那么这两个变量是赋值兼容的。

当然可以写

```
type
  TIntegerArray = array of Integer; 
```

但各方需要就同一类型达成一致。如果所有代码都在您的控制范围内，这很好，但是当使用来自各种来源的代码时，通用动态数组的出现会产生巨大的差异。

另一个类似的优点是你可以很容易地使用泛型数组类型作为泛型方法的返回类型。

如果没有泛型数组，您将不得不声明这种形式的类型：

```
TArrayOfT = array of T 
```

在您的通用类中，这相当混乱。而且，如果您在非泛型类中编写泛型方法，那么您将无法进行该声明。泛型数组再次解决了这个问题。

```
TMyClass = class
  class function Foo<T>: TArray<T>; static;
end; 
```

这一切都遵循[文档](http://docwiki.embarcadero.com/RADStudio/XE3/en/Overloads_and_Type_Compatibility_in_Generics)中描述的类型兼容性规则，如下所示：

> **类型兼容性**
> 
> 只有当两个非实例化的泛型相同或者是通用类型的别名时，它们才被认为是赋值兼容的。
> 
> 如果基本类型相同（或者是通用类型的别名）并且类型参数相同，则两个实例化的泛型被认为是赋值兼容的。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-17T16:09:45.903

`TArray<T>`您可以使用具有一种构造的值进行初始化：

```
var
  LArray: TArray<Integer>;
begin
  LArray := TArray<Integer>.Create(1, 2, 3, 4); 
```

因为`array of Integer`您需要编写更多代码：

```
var
  LArray: array of Integer;
begin
  SetLength(LArray, 4);
  LArray[0] := 1;
  LArray[1] := 2;
  LArray[2] := 3;
  LArray[3] := 4; 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-18T02:06:38.293

它对函数结果派上用场。

**例子：**

Delphi中不允许以下内容。您需要在这里声明一个单独的类型。真是浪费时间。

```
function MyFunc:array of integer; 
begin
end; 
```

等等，resque 的泛型：

```
function MyFunc:TArray<integer>;
begin
end; 
```

# visual-studio-2010 - Visual Studio 单实例部署错误

> ID：14383094
> 
> 赞同：1
> 
> 时间：2013-01-17T16:02:36.377
> 
> 标签：visual-studio-2010, amazon-web-services, amazon-ec2, amazon-rds

我正在尝试使用“发布到 AWS”功能通过 .NET SDK 将我的 Web 应用程序上传到 EC2 实例。对于我的其他 Web 应用程序，这非常有效！我可以看到两者之间的唯一区别是这个 Web 应用程序有一个连接字符串，连接到已经存在的附加 RDS 实例。

当发布确实通过时，实例启动并且似乎运行良好。在大约十分钟内，实例回滚并自行终止。取消选中“失败时终止”复选框后，实例不会终止，但是我无法访问我的 Default.aspx 页面。我无法在日志中找到任何有用的信息。我认为它必须与连接字符串和附加卷有关。

我将我的安全组添加到用于启动实例的 RDS 实例中，但它仍然返回相同的错误。

**发布信息：**

实例大小：Micro
SDK 版本：1.5.10
AMI：ami-10ec6520
地区：美国西部 2

**错误：**

WaitCondition 超时。期望 1 时收到 0 个条件。

**堆栈模板**

```
 {
  "AWSTemplateFormatVersion" : "2010-09-09",

  "Description" : "This will launch a single EC2 instance and deploy your application    to it. **WARNING** This template creates one or more Amazon EC2 instances. You will be billed for the AWS resources used if you create a stack from this template.",

"Parameters" : {
"InstanceType" : {
  "Type" : "String", 
  "Default" : "t1.micro", 
  "Description" : "EC2 instance type."
},
"KeyPair" : {
  "Type" : "String", 
  "Description" : "EC2 Key Pair."
},
"SecurityGroup" : {
  "Type" : "String",
  "Description" : "EC2 Security Group"
},
"BucketName" : {
  "Type" : "String",
  "Description" : "[Hidden]S3 Bucket for deployment."
},
"ConfigFile" : {
  "Type" : "String",
  "Description" : "[Hidden]Deployment Configuration File."
},
"AmazonMachineImage" : {
  "Type" : "String",
  "Default" : "ami-10ec6520",
  "Description" : "AMI to launch."
},
"UserData" : {
  "Type" : "String",
  "Description" : "[Hidden]Base64-Encoded user data."
}
  },

  "Resources" : {

"DeployedApplicationWaitHandle" : {
    "Type" : "AWS::CloudFormation::WaitConditionHandle",        
    "Properties" : {
    }
},

"DeployedApplicationWaitCondition" : {
    "Type" : "AWS::CloudFormation::WaitCondition",
    "DependsOn" : "Ec2Instance",
    "Properties" : {
        "Handle" : { "Ref" : "DeployedApplicationWaitHandle" },
        "Timeout" : "900"
    }
},

"Ec2Instance" : {
    "Type" : "AWS::EC2::Instance",      
    "Properties" : {
        "ImageId" : { "Ref" : "AmazonMachineImage" },
        "KeyName" : { "Ref" : "KeyPair" },
        "InstanceType" : { "Ref" : "InstanceType" },
        "SecurityGroups" : [{ "Ref" : "SecurityGroup" }],
        "UserData" : { "Fn::Base64" : {"Fn::Join" : [ "", ["[", { "Ref" :     "UserData" }, "]", "[", { "Ref" : "DeployedApplicationWaitHandle" }, "]"] ]}}
  }
}
      },

  "Outputs" : {
"URL" : {
  "Description": "URL of the deployed application",
  "Value" : { "Fn::Join" : [ "", [ "http://", { "Fn::GetAtt" : [ "Ec2Instance", "PublicDnsName" ] }]]}
},
"Bucket" : {
  "Description" : "The S3 Bucket where the Web Deploy archive and configuration file are uploaded",
  "Value" : { "Ref" : "BucketName" }
},
"ConfigFile" : {
  "Description" : "The deployment configuration for the application",
  "Value" : { "Ref" : "ConfigFile" }
    },
"VSToolkitDeployed" : {
  "Description" : "A flag indicating that the stack was created via VSToolkit Deploy wizard",
  "Value" : "True"
    }
  }
    } 
```

**2013 年 1 月 18 日更新**

我终于启动了一个实例，让我 RDP 进入它。下面是突出的错误。

**错误：**

Microsoft.Web.Deployment.DeploymentFatalException：由于缺少依赖项，SQL 提供程序无法运行。请确保已安装 Microsoft SQL Server 管理对象（版本 10 或更高版本）。---> System.IO.FileNotFoundException：无法加载文件或程序集 'Microsoft.SqlServer.Smo，Version=10.0.0.0，Culture=neutral，PublicKeyToken=89845dcd8080cc91' 或其依赖项之一。该系统找不到指定的文件。

任何帮助将不胜感激！如果有更多信息有助于提供，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T18:36:39.957

原来答案在我在 Visual Studio 中的部署设置中。对我来说非常业余的错误。在 Project Properties => Package/Publish Web 中，我需要取消选中“包括在 Package/Publish SQL 选项卡中配置的所有数据库”

由于我的数据库已经在 RDS 上进行了配置，因此我需要做的就是在 Web.config 文件中包含正确的连接字符串。

感谢大家的帮助！

# r - 滞后于data.table R

> ID：14383095
> 
> 赞同：7
> 
> 时间：2013-01-17T16:02:37.160
> 
> 标签：r, data.table

目前我有一个按组分组的实用程序`lags`功能`data.table`。功能很简单：

```
panel_lag <- function(var, k) {
  if (k > 0) {
    # Bring past values forward k times
    return(c(rep(NA, k), head(var, -k)))
  } else {
    # Bring future values backward
    return(c(tail(var, k), rep(NA, -k)))
  }
} 
```

然后我可以从以下位置调用它`data.table`：

```
x = data.table(a=1:10, 
               dte=sample(seq.Date(from=as.Date("2012-01-20"),
                                   to=as.Date("2012-01-30"), by=1),
                          10))
x[, L1_a:=panel_lag(a, 1)]  # This won't work correctly as `x` isn't keyed by date
setkey(x, dte)
x[, L1_a:=panel_lag(a, 1)]  # This will 
```

这要求我检查里面`panel_lag`是否`x`有键。有没有更好的方法来做滞后？表格往往很大，所以它们真的应该被键入。我只是`setkey`在我落后之前做。我想确保我不会忘记键入它们。所以我想知道人们是否有一种标准的方式来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:10:15.367

如果要确保按其他列的顺序滞后，可以使用以下`order`功能：

```
x[order(dte),L1_a:=panel_lag(a,1)] 
```

尽管如果您按日期顺序做很多事情，那么以这种方式键入它是有意义的。

# linux - 在 ext4 中增加范围树的深度

> ID：14383099
> 
> 赞同：1
> 
> 时间：2013-01-17T16:02:52.130
> 
> 标签：linux, filesystems, ext4

如何增加范围树的深度？应该分配多少空间？更准确地说，我只需要深度大于 1。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T01:51:21.837

在 ext4 中，一个 inode 默认使用 60 字节来寻址 4 个扩展区（12 字节用于标头 + 4*12 字节用于扩展区）。每个范围最多可以容纳 128MiB 的数据（默认情况下）。如果文件大于 4*128MiB (> 512MiB)，则 ext4 正在为此构建一个扩展树。所以你会达到depth = 1。

现在的问题是你什么时候能达到depth=2。我尝试使用 ~700MiB 的文件并检查范围深度为 1。然后我打开由范围索引的 fs 块并分析标题。

```
 0A F3 06 00 54 01 00 00 00 00 00 00 00 
```

它具有 f30A 的典型幻数，接下来的两个字节应指示扩展区的数量。（在这种情况下=6，这是有道理的，因为 700/128 = 6）。接下来的 2 个字节 0154 应该指示最大范围数（根据标头信息），在我的情况下达到 340。

-> 那为什么是 340？如果我们查看 ext4 的实际 fs-block 大小，默认值为 4096 字节。每个索引由 12 个字节组成。340 * 12 = 4080 + 12 用于标头 = 4092，因此它是可以放入此 fs 块的最大范围信息数。

如果我解释正确，您可以在这个 fs 块中保存多达 340 个其他指针/叶/索引。这 340 个中的每一个都指一个范围（最多可容纳 128MiB）-> 所以它涉及：340*128MiB ~ 43,5 GiB

此外，每个 inode 最多可容纳 4 个扩展区。所以我猜这个数字需要乘以 4。

```
 -> so I think your file should be > 4*340*128MiB ~ 174GiB to reach depth=2 
```

我还没有测试过这个假设，但我会尽快尝试。同时，如果有人能证明我错了，我也很高兴。:)

# mysql - MYSQL嵌套查询运行很慢？

> ID：14383100
> 
> 赞同：3
> 
> 时间：2013-01-17T16:02:52.663
> 
> 标签：mysql, join, sql-update, subquery

下面的查询不断超时，是否有一种开销较小的方法来实现相同的功能？

```
UPDATE Invoices SET ispaid = 0 
WHERE Invoice_number IN (SELECT invoice_number
    FROM payment_allocation
    WHERE transactionID=305) 
```

我正在做的是从交易中取消分配发票，最多可以返回 30 多条记录，但每次我尝试运行它时它都会停止数据库死机

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T16:05:35.753

使用**JOIN**而不是**子查询**将提高性能。

如果您尚未创建，请在两个表中的**Invoice_number**列上创建索引。

尝试这个：

```
UPDATE Invoices i 
INNER JOIN payment_allocation pa ON i.Invoice_number = pa.invoice_number 
SET i.ispaid = 0 
WHERE pa.transactionID = 305; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T16:07:09.297

我会尝试`EXISTS`：

```
UPDATE Invoices a set ispaid=0 
WHERE EXISTS 
(
 SELECT NULL FROM payment_allocation b 
 WHERE b.Invoice_number =a.Invoice_number AND b.transactionID=305
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T16:04:25.943

从 MySQL 5.5 开始，无法优化子查询选择（查询中的另一个完整选择语句）。这可能就是您的查询如此缓慢的原因。重构您的查询以摆脱内部选择语句。

```
 UPDATE Invoices, payment_allocation
  SET ispaid=0 
  WHERE payment_allocation.transactionID=305 AND       
        Invoices.Invoice_number = payment_allocation.invoice_number 
```

一个有趣的旁注......但是 MariaDB（原始创建者的 MySQL 的一个分支）已经实现了子查询选择优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T16:07:40.233

```
UPDATE invoices i
  JOIN payment_allocation pa
    ON pa.invoice_number = i.invoice_number
   SET i.ispaid=0 
 WHERE pa.transactionID = 305; 
```

# java - 如何在java中打印文本和图像“为初学者分享简单代码”

> ID：14383101
> 
> 赞同：1
> 
> 时间：2013-01-17T16:02:52.543
> 
> 标签：java, swing

我目前正在为一个行业开发发票生成/账单打印系统。

我需要一个打印文本以及公司图像徽标的代码。

在这里，我给出了我创建的 JFrame 代码，我需要一个打印代码，它通过从 SQL 2008 服务器获取数据作为后端来打印文本和图像。

```
here its is a code of netbeans frame 
here i need action implementation on Print Button below:

plz help me soon providing a appropriate way to print text and image.

package invoice2;

import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.HeadlessException;
import java.awt.image.BufferedImage;
import java.sql.PreparedStatement;
import java.sql.SQLException;
import javax.swing.JOptionPane;
import java.awt.print.*;
import java.awt.print.PageFormat;
import javax.swing.JTextPane;
import java.awt.print.PrinterException;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.sql.Connection;
import java.sql.DriverManager;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.imageio.ImageIO;
import javax.print.Doc;
import javax.print.DocFlavor;
import javax.print.DocPrintJob;
import javax.print.PrintService;
import javax.print.PrintServiceLookup;
import javax.print.SimpleDoc;
import javax.print.attribute.HashPrintRequestAttributeSet;
import javax.print.attribute.PrintRequestAttributeSet;
import javax.print.attribute.standard.Copies;
import javax.print.attribute.standard.Sides;
import javax.swing.Icon;
import javax.swing.ImageIcon;
import javax.swing.JFileChooser;
import javax.swing.SwingUtilities;
import javax.swing.filechooser.FileNameExtensionFilter;

/**
 *
 * @author Admin Param
 */
public class generate extends javax.swing.JInternalFrame {

    /**
     * Creates new form generate
     */
    public generate() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        jSeparator1 = new javax.swing.JSeparator();
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        jLabel8 = new javax.swing.JLabel();
        jLabel9 = new javax.swing.JLabel();
        t7 = new javax.swing.JTextField();
        t1 = new javax.swing.JTextField();
        t2 = new javax.swing.JTextField();
        t3 = new javax.swing.JTextField();
        t5 = new javax.swing.JTextField();
        t6 = new javax.swing.JTextField();
        t4 = new javax.swing.JScrollPane();
        t9 = new javax.swing.JTextArea();
        jButton1 = new javax.swing.JButton();
        d1 = new com.toedter.calendar.JDateChooser();
        jButton4 = new javax.swing.JButton();
        jButton5 = new javax.swing.JButton();
        logo = new javax.swing.JLabel();
        jLabel7 = new javax.swing.JLabel();
        jButton2 = new javax.swing.JButton();
        jButton3 = new javax.swing.JButton();
        print = new javax.swing.JButton();
        jSeparator2 = new javax.swing.JSeparator();
        jLabel10 = new javax.swing.JLabel();

        setClosable(true);
        setIconifiable(true);
        setMaximizable(true);
        setResizable(true);
        setTitle("Generate Bill/Print Invoice");
        setToolTipText("");
        getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        jPanel1.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());
        jPanel1.add(jSeparator1, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, -18, 490, 20));

        jLabel1.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        jLabel1.setText("No. Of Item :");
        jPanel1.add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(35, 20, 90, -1));

        jLabel2.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        jLabel2.setText("Price of Item :");
        jPanel1.add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(35, 60, 90, -1));

        jLabel3.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        jLabel3.setText(" Tex :");
        jPanel1.add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 280, -1, 30));

        jLabel4.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        jLabel4.setText("Invoice No :");
        jPanel1.add(jLabel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(41, 90, 80, 21));

        jLabel5.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        jLabel5.setText(" Billing Address :");
        jPanel1.add(jLabel5, new org.netbeans.lib.awtextra.AbsoluteConstraints(40, 130, -1, 21));

        jLabel6.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        jLabel6.setText("  Sub Total :");
        jPanel1.add(jLabel6, new org.netbeans.lib.awtextra.AbsoluteConstraints(60, 240, 80, 30));

        jLabel8.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        jLabel8.setText(" Total  :");
        jPanel1.add(jLabel8, new org.netbeans.lib.awtextra.AbsoluteConstraints(90, 330, -1, -1));

        jLabel9.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        jLabel9.setText("  Date :");
        jPanel1.add(jLabel9, new org.netbeans.lib.awtextra.AbsoluteConstraints(80, 210, -1, -1));

        t7.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                t7ActionPerformed(evt);
            }
        });
        jPanel1.add(t7, new org.netbeans.lib.awtextra.AbsoluteConstraints(170, 320, 140, 30));

        t1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                t1ActionPerformed(evt);
            }
        });
        jPanel1.add(t1, new org.netbeans.lib.awtextra.AbsoluteConstraints(170, 10, 140, 30));

        t2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                t2ActionPerformed(evt);
            }
        });
        jPanel1.add(t2, new org.netbeans.lib.awtextra.AbsoluteConstraints(170, 50, 140, 30));

        t3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                t3ActionPerformed(evt);
            }
        });
        jPanel1.add(t3, new org.netbeans.lib.awtextra.AbsoluteConstraints(170, 90, 140, 30));

        t5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                t5ActionPerformed(evt);
            }
        });
        jPanel1.add(t5, new org.netbeans.lib.awtextra.AbsoluteConstraints(170, 240, 140, 30));

        t6.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                t6ActionPerformed(evt);
            }
        });
        jPanel1.add(t6, new org.netbeans.lib.awtextra.AbsoluteConstraints(170, 280, 140, 30));

        t9.setColumns(20);
        t9.setRows(5);
        t4.setViewportView(t9);

        jPanel1.add(t4, new org.netbeans.lib.awtextra.AbsoluteConstraints(170, 130, 180, 60));

        jButton1.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        jButton1.setText("Generate  Total");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });
        jPanel1.add(jButton1, new org.netbeans.lib.awtextra.AbsoluteConstraints(350, 310, 150, 40));
        jPanel1.add(d1, new org.netbeans.lib.awtextra.AbsoluteConstraints(170, 200, 160, 30));

        jButton4.setFont(new java.awt.Font("Times New Roman", 0, 14)); // NOI18N
        jButton4.setText("Generate  SubTotal");
        jButton4.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton4ActionPerformed(evt);
            }
        });
        jPanel1.add(jButton4, new org.netbeans.lib.awtextra.AbsoluteConstraints(350, 230, 150, 40));

        jButton5.setText("image ");
        jButton5.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton5ActionPerformed(evt);
            }
        });
        jPanel1.add(jButton5, new org.netbeans.lib.awtextra.AbsoluteConstraints(370, 10, 100, 40));

        logo.setIcon(new javax.swing.ImageIcon(getClass().getResource("/invoice2/big.jpg"))); // NOI18N
        jPanel1.add(logo, new org.netbeans.lib.awtextra.AbsoluteConstraints(370, 70, 130, 130));

        getContentPane().add(jPanel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 30, 510, 360));

        jLabel7.setText(" Tex :");
        getContentPane().add(jLabel7, new org.netbeans.lib.awtextra.AbsoluteConstraints(70, 180, -1, 21));

        jButton2.setFont(new java.awt.Font("Times New Roman", 1, 18)); // NOI18N
        jButton2.setText("Exit");
        jButton2.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton2ActionPerformed(evt);
            }
        });
        getContentPane().add(jButton2, new org.netbeans.lib.awtextra.AbsoluteConstraints(390, 410, 120, 40));

        jButton3.setFont(new java.awt.Font("Times New Roman", 1, 18)); // NOI18N
        jButton3.setText("Save ");
        jButton3.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton3ActionPerformed(evt);
            }
        });
        getContentPane().add(jButton3, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 410, 120, 40));

        print.setFont(new java.awt.Font("Times New Roman", 1, 18)); // NOI18N
        print.setText("Print ");
        print.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                printActionPerformed(evt);
            }
        });
        getContentPane().add(print, new org.netbeans.lib.awtextra.AbsoluteConstraints(200, 410, 130, 40));
        getContentPane().add(jSeparator2, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 18, 480, 10));

        jLabel10.setFont(new java.awt.Font("Times New Roman", 0, 18)); // NOI18N
        jLabel10.setText(" Welcome To Invoice Print/Bill Generator Software By ArtSheoran");
        getContentPane().add(jLabel10, new org.netbeans.lib.awtextra.AbsoluteConstraints(20, 0, 510, 20));

        pack();
    }// </editor-fold>

    private void t7ActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:
    }                                  

    private void t1ActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:
    }                                  

    private void t2ActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:
    }                                  

    private void t3ActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:
    }                                  

    private void t5ActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:
    }                                  

    private void t6ActionPerformed(java.awt.event.ActionEvent evt) {                                   
        // TODO add your handling code here:
    }                                  

    private void jButton2ActionPerformed(java.awt.event.ActionEvent evt) {                                         
 dispose();        // TODO add your handling code here:
    }                                        

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
        // TODO add your handling code here:
    }                                        

    @SuppressWarnings("empty-statement")
    private void jButton3ActionPerformed(java.awt.event.ActionEvent evt) {                                         
  try
    {
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        String connectionUrl = "jdbc:sqlserver://localhost:1433;databaseName=invoice;integratedSecurity=true";
        Connection con = DriverManager.getConnection(connectionUrl);
        PreparedStatement pstmt=con.prepareStatement("insert into record values(?,?,?,?,?,?,?,?)");

        int f1=Integer.parseInt(t1.getText());
        pstmt.setInt(1,f1);

        int f2=Integer.parseInt(t2.getText());
        pstmt.setInt(2,f2);

        int f3=Integer.parseInt(t3.getText());
        pstmt.setInt(3,f3);

        pstmt.setString(4,t9.getText());

        java.util.Date date=d1.getDate();
        String d=String.format("%1$tm-%1$td-%1$ty",date);
        pstmt.setString(5,d);

       int f4=Integer.parseInt(t5.getText());
        pstmt.setInt(6,f4);

        int f5=Integer.parseInt(t6.getText());
        pstmt.setInt(7,f5);

        int f6=Integer.parseInt(t7.getText());
        pstmt.setInt(8,f6); 
        pstmt.executeUpdate();
        JOptionPane.showMessageDialog(null,"record saved successfully");
    }
    catch(ClassNotFoundException | SQLException | NumberFormatException | HeadlessException ob)
    {
        JOptionPane.showMessageDialog(null, ob.toString());
    }        // TODO add your handling code here:
    }                                        

    private void jButton4ActionPerformed(java.awt.event.ActionEvent evt) {                                         

        int nitem=Integer.parseInt(t1.getText());
        int price=Integer.parseInt(t2.getText());
        int s=nitem*price;
       t5.setText(Integer.toString(s));// TODO add your handling code here:
    }                                        

    private void printActionPerformed(java.awt.event.ActionEvent evt) {                                         

 // here need a action under print button for text and image printing.

    }                                        

    private void jButton5ActionPerformed(java.awt.event.ActionEvent evt) {

        try {

        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
        String connectionUrl = "jdbc:sqlserver://localhost:1433;databaseName=invoice;integratedSecurity=true";
        Connection con = DriverManager.getConnection(connectionUrl);
        PreparedStatement pstmt=con.prepareStatement("insert into saveimage values(?,?,?,?)");
pstmt.setString(1,"mahendra");
               pstmt.setString(2,"Delhi");
               pstmt.setString(4,"123456");
        JFileChooser chooser = new JFileChooser();
        String str="";
    FileNameExtensionFilter filter = new FileNameExtensionFilter(
        "JPG & GIF Images", "jpg", "gif");
    chooser.setFileFilter(filter);
    int returnVal = chooser.showOpenDialog(this);
    if(returnVal == JFileChooser.APPROVE_OPTION)
    {
       File ob=chooser.getSelectedFile();
       str=ob.getPath();
       Icon img = new ImageIcon(str);
       logo.setIcon(img);
        pstmt.setString(3, str);

              //executeUpdate() method execute specified sql query. Here this query 
               //insert data and image from specified address.
         int s = pstmt.executeUpdate();
               if(s>0) {
                      JOptionPane.showMessageDialog(null, "File Uploaded Sucessfully");;
               }
               else {
                   JOptionPane.showMessageDialog(null, "File Not uploaded a error has been occured");
               }
           }
}
           catch (ClassNotFoundException | SQLException | HeadlessException ex) {
                  System.out.println("Found some error : "+ex);
           }       // TODO add your handling code here:
    }

    // Variables declaration - do not modify
    private com.toedter.calendar.JDateChooser d1;
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    private javax.swing.JButton jButton5;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel10;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JLabel jLabel8;
    private javax.swing.JLabel jLabel9;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JSeparator jSeparator1;
    private javax.swing.JSeparator jSeparator2;
    private javax.swing.JLabel logo;
    private javax.swing.JButton print;
    private javax.swing.JTextField t1;
    private javax.swing.JTextField t2;
    private javax.swing.JTextField t3;
    private javax.swing.JScrollPane t4;
    private javax.swing.JTextField t5;
    private javax.swing.JTextField t6;
    private javax.swing.JTextField t7;
    private javax.swing.JTextArea t9;
    // End of variables declaration

    private static class OutputPrinter implements Printable {

        public OutputPrinter(String printData) {
        }

        @Override
        public int print(Graphics graphics, PageFormat pageFormat, int pageIndex) throws PrinterException {
            throw new UnsupportedOperationException("Not supported yet.");
        }
    }
}

Plz help me soon and write appropriate guide.to implement action of printing text and image from a JInternal Frame and using SQL Server 2008.
a good answer is awaited. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:11:35.093

您可以定义 HTML 并将其设置为`JTextPane`. 然后打印`JTextPane`'s 的内容。

如果您需要多页打印，请参阅[http://java-sl.com/JEditorPanePrinter.html](http://java-sl.com/JEditorPanePrinter.html)

# ruby - Ruby 将电子邮件直接发送到收件人的 SMTP 服务器

> ID：14383113
> 
> 赞同：0
> 
> 时间：2013-01-17T16:03:26.173
> 
> 标签：ruby, email

我想要一颗红宝石：

1.  浏览收件人列表并收集他们的所有域
2.  对于每个域，获取它的 MX 记录以获取 SMTP 服务器的地址
3.  使用这些 SMTP 服务器直接向收件人发送电子邮件（在端口 25 上）

那里的所有解决方案（如 Mail gem）似乎都要求您运行自己的 SMTP 服务器，或者拥有其他 SMTP 提供商的帐户。我认为这是一个不必要的并发症。

顺便说一句，我已经通过使用 Mail gem 并将 SMTP 服务器设置为 alt4.gmail-smtp-in.l.google.com （这是 gmail.com 在这里作为 MX 记录的内容）手动测试了此方法 - 它成功发送发送到我的 gmail 帐户的电子邮件，无需任何身份验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:31:50.583

解析 MX 记录并非易事，您会遇到各种边缘情况，而且并非所有服务器都能与 Net::SMTP 模块或 Mail gem 一起正常工作。

您可能想要的是[exim](http://www.exim.org/)、[postfix之类的服务器或](http://www.postfix-book.com/)[Port25 之](http://www.port25.com/)类的商业 MTA 。

# matlab - Matlab中的夏皮罗威尔克测试

> ID：14383115
> 
> 赞同：6
> 
> 时间：2013-01-17T16:03:28.237
> 
> 标签：matlab

我有一个包含 100 个数值的数组 A。[我想使用Shapiro-Wilk 测试](http://www.mathworks.com/help/symbolic/mupad_ref/stats-swgoft.html)来测试 A 中的数据是否是正态分布的。

Si 我`B = stats::swGOFT(A);`在 Matlab 命令行上写，我有错误：

```
??? B  = stats::swGOFT(A) Error: Unexpected MATLAB operator.
               | 
```

有人可以帮我如何[`stats::swGOFT()`](http://www.mathworks.com/help/symbolic/mupad_ref/stats-swgoft.html)正确使用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:09:07.287

swGOFT 是一个 MuPAD 库，因此您必须从 MuPAD 中执行它，而不是从 MATLAB 命令行本身。在 MATLAB 命令行中，键入`mupad`并按 Enter。您将获得所谓的 MuPAD 笔记本，您可以在其中输入命令。正如`B := stats::swGOFT(A)`Shai 在评论中提到的那样。

编辑：要从`A`Matlab 工作区带到 MuPAD 工作区，您首先必须将其更改为“sym”类型的对象。步骤是：

1.  使用命令从 A 创建一个 sym 对象`S = sym(A)`
2.  创建一个命名的 MuPAD 笔记本`note = mupad`
3.  将变量发送`S`到`note`with`setVar(note, S)`
4.  `S`在 MuPAD 命令中使用而不是`A`，例如：`B := stats::swGOFT(S)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-18T11:08:15.877

已经 6 年了，Matlab 说它将删除 MuPAD，但我的回答仍然可能对某人有用。

我使用并修改了 sundar 的答案。步骤是：

1.  确保 A 是行向量（即`size(A,1)==1`）
2.  `A`使用命令创建一个 sym 对象`S = sym(A)`
3.  创建一个命名的 MuPAD 笔记本`note = mupad`
4.  发送变量 S 以记录`setVar(note, 'S', S)`
5.  在 MuPAD 笔记本中，将类型变量转换`S`为类型`Dom::Matrix()`变量`DOM_LIST`：`S2:=coerce(S, DOM_LIST):`
6.  获取 p 值：`B := stats::swGOFT(S2[1])`

步骤 1 和 5 的原因如下。`coerce`函数将 转换`Dom::Matrix`为列表列表，其中 Matrix 的每一行都是一个列表。要将所有元素放在单个列表中，我们需要`S`成为行向量。

# android - 设置菜单和 Build.MODEL 之间的 Android 型号不匹配

> ID：14383116
> 
> 赞同：0
> 
> 时间：2013-01-17T16:03:28.760
> 
> 标签：android, api, model, adb

我测试了几款Android手机，发现在某些特定设备上，“设置->关于->（手机身份）->型号”中显示的型号与使用[Build.MODEL](http://developer.android.com/reference/android/os/Build.html#MODEL)检索到的型号不同。我正在寻找如何以编程方式检索通过“设置”菜单显示的型号。

我在几个设备上看到了这个问题：

1.  实际设备是 HTC Inspire 4G
    *   设置菜单中的型号：HTC Inspire ^(TM) 4G
    *   Build API 的型号：Desire HD
2.  实际设备是 Motorola Droid Razr Maxx HD
    *   设置菜单中的型号：DROID RAZR MAXX HD
    *   Build API 的型号：DROID RAZR HD

我尝试[检查 build.prop 文件](https://stackoverflow.com/questions/6377444/can-i-use-adb-exe-to-find-a-description-of-a-phone/6377603#6377603)，但没有找到通过“设置”菜单找到的型号。感谢您通过 Android API 或其他方式检索设置菜单值的想法和想法。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:08:11.413

您提到的设备不是普通的 Android 设备；它们包括一些制造商定制。摩托罗拉版本比HTC版本更接近香草Android，但即便如此......

设置菜单中显示的确切信息是制造商在打包其 Android 版本以包含在特定设备上时*可能自定义的内容之一。*不太可能有任何可移植的、可靠的方式来获取这些信息。

# jquery - 点击按钮没有用keydown响应

> ID：14383117
> 
> 赞同：0
> 
> 时间：2013-01-17T16:03:30.297
> 
> 标签：jquery

我有以下代码：

```
 <ul>
    <li id="1">same html structure as below...</li>
    .....
    <li id="42">
    <div class="input-prepend">
       <button class="btn btn-small companyListBtn addMarkerBtn btn-primary btn-warning" type="button">   </button>                                                                                   
       <input class="input-medium companyListInput" maxlength="60" type="text"/>
       <button class="companyListBtn editCompanyBtn" type="button"></button>
    </div>
    <div id="42Div" class="companyAddressDiv">
       <input type="text" id="test" class="companyAddress" placeholder="Enter the Address"/>
       <button  class="btn btn-small compAddressSubmit" style="height:30px;margin-top:-9px;" type="button"></button>
    </div>
    </li>
    </ul>

$(document).on('click','.compAddressSubmit', function () {

    alert("clicked"); 
     //my logic going on here...couldnt mention everything...

    }); 
```

上面的所有代码都工作正常......唯一的问题是**onclick**仅在我使用鼠标单击按钮时执行......但不适用于键盘输入按钮......我试过 **.keydown**，**.bind**和**.live**并尝试使用**列表器**，但对它们不清楚....我知道这不是一个大问题，但无法解决问题....请提供任何帮助....谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:08:59.623

您可以将 keydown 添加到 .on-binding 中：

```
$(document).on('click','.compAddressSubmit', function () {
    alert("clicked"); 
    }).on('keydown','.compAddressSubmit', function(e) {
      // bind this on the button or directly into the <input>-selector
      if(e.which === 13) {
       alert("you pressed enter");
      }
    }); 
```

但是如果您想触发表单提交，更好的解决方案是：

```
$(document).on('submit','#yourformId',function() {
   alert("your form submit");
}); 
```

# regex - 检查字符串是否是一堆字符的子集？（正则表达式）？

> ID：14383119
> 
> 赞同：1
> 
> 时间：2013-01-17T16:03:38.893
> 
> 标签：regex, string, perl, subset

我有一个小问题，我有 8 个字符，例如“abcdaef g”，还有一个单词列表，例如：mom、dad、bad、fag、abac

我如何检查我是否可以用我拥有的字母组成这些单词？在我的示例中，我可以组成 bad、abac 和 fag，但我不能组成 dad（我没有两个 D）和 mom（我没有 M 或 O）。

我很确定它可以使用 RegEx 来完成，但即使在 Perl 中使用某些函数也会有所帮助。在此先感谢各位！:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T16:59:16.680

最简单的方法是从要测试的单词中形成一个正则表达式。

这会对可用字符列表进行排序，并通过连接它们形成一个字符串。然后每个候选词被分割成字符，排序，并用正则表达式`.*`作为分隔符重新连接。因此，例如，`abac`将转换为`a.*a.*b.*c`.

然后通过针对派生的正则表达式测试可用字符的字符串来确定单词的有效性。

```
use strict;
use warnings;

my @chars = qw/ a b c d a e f g /;
my $chars = join '', sort @chars;

for my $word (qw/ mom dad bad fag abac /) {
  my $re = join '.*', sort $word =~ /./g;
  print "$word is ", $chars =~ /$re/ ? 'valid' : 'NOT valid', "\n";
} 
```

**输出**

```
mom is NOT valid
dad is NOT valid
bad is valid
fag is valid
abac is valid 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T16:22:19.170

## 这是为了证明这种可能性，而不是支持正则表达式方法。请考虑其他更明智的解决方案。

第一步，您需要计算可用字符数。

然后像这样构造你的正则表达式（*这不是 Perl 代码！*）：

从输入锚的开头开始，这匹配字符串的开头（列表中的单个单词）：

```
^ 
```

附加与唯一字符数一样多的这些：

```
(?!(?:[^<char>]*+<char>){<count + 1>}) 
```

示例：`(?!(?:[^a]*+a){3})`如果数量`a`为 2。

我在这里使用了一种高级正则表达式构造，称为零宽度负前瞻`(?!pattern)`。它**不会**使用文本，并且会尽力检查字符串中前面的内容是否与指定的模式匹配`(?:[^a]*+a){3}`。基本上，我的想法是检查我在字符串中是否找不到 3 'a'。如果我真的找不到 3 个 'a' 的实例，则意味着该字符串只能包含 2 个或更少的 'a'。

请注意，我使用`*+`，这是 0 或更多的量词，*所有格*。这是为了避免不必要的回溯。

将可以出现的字符放入`[]`：

```
[<unique_chars_in_list>]+ 
```

示例：对于`a b c d a e f g`，这将变为`[abcdefg]+`。这部分实际上会消耗字符串，并确保字符串只包含列表中的字符。

以输入锚的结尾结尾，它匹配字符串的结尾：

```
$ 
```

因此，对于您的示例，正​​则表达式将是：

```
^(?!(?:[^a]*+a){3})(?!(?:[^b]*+b){2})(?!(?:[^c]*+c){2})(?!(?:[^d]*+d){2})(?!(?:[^e]*+e){2})(?!(?:[^f]*+f){2})(?!(?:[^g]*+g){2})[abcdefg]+$ 
```

`i`您还必须为不区分大小写的匹配指定标志。

请注意，这仅考虑要匹配的单词列表中英文字母 (az) 的情况。此处（尚未）考虑空格和连字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T16:54:19.780

如何将两个字符串按字母顺序排序，然后为要检查的字符串在每个字母之间插入 .*，如下所示：

```
'aabcdefg' =~ m/a.*b.*d.*/
True
'aabcdefg' =~ m/m.*m.*u.*/
False
'aabcdefg' =~ m/a.*d.*d.*/
False 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T16:25:08.530

一些伪代码：

*   将可用字符按字母顺序排序
*   对于每个单词：

    *   将单词的字符按字母顺序排序
        *   对于单词的每个字符，向前搜索可用字符以找到匹配的字符。请注意，此搜索永远不会回到可用字符的开头，匹配的字符会被消耗。

甚至更好的是，使用字符的频率计数。对于您可用的字符，构建一个从字符到该字符出现计数的映射。对每个候选词执行相同操作并与可用映射进行比较，如果词映射包含可用映射不存在的字符的映射，或者词映射中的映射值大于可用映射，则该词不能使用可用的字符构造。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T22:52:09.887

这是一个非常简单的脚本，很容易概括：

```
#!/usr/bin/env perl

use strict;
use warnings;

sub check_word {
  my $word = shift;
  my %chars;
  $chars{$_}++ for @_;
  $chars{$_}-- or return for split //, $word;
  return 1;
}

print check_word( 'cab', qw/a b c/ ) ? "Good" : "Bad"; 
```

~~当然，如果字母列表每次都相同，则此功能的性能会大大提高。~~实际上对于八个字符，每次复制哈希与构建一个新的哈希可能是相同的速度。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-17T16:12:28.380

伪代码：

```
bool possible=true
string[] chars= { "a", "b", "c"}   
foreach word in words
{
     foreach char in word.chars
     {
          possible=possible && chars.contains(char)
     }
} 
```

# c - 将库添加到 autotools 文件不起作用（链接器忽略它）

> ID：14383126
> 
> 赞同：0
> 
> 时间：2013-01-17T16:03:57.503
> 
> 标签：c, makefile, shared-libraries, autotools

对于 C 构建工具，我是个傻瓜，所以我有一个分叉项目，我想向其中添加一个动态链接库：

[https://github.com/iem-projects/ncview/tree/26c3549d165dc6047dc37db252062fd73eb9282c](https://github.com/iem-projects/ncview/tree/26c3549d165dc6047dc37db252062fd73eb9282c)

基本上，我需要的是包括`liblo`. `netcdf`对于项目的现有库（例如），有各种各样的巫术。

我正在尝试遵循[本手册](http://www.openismus.com/documents/linux/using_libraries/using_libraries)，该手册基本上说，我应该添加东西到`configure.in`and `Makefile.am`，然后运行`autoreconf`​​, `autoconf`, and `automake`，然后`./configure`和 finally `make`。

这是我添加到`configure.in`：

```
# OSC support
PKG_CHECK_MODULES(LIBLO, liblo >= 0.26) 
```

我添加了这个`Makefile.am`：

```
bin_PROGRAMS = ncview

ncview_LDADD = $(LIBLO_LIBS) 
```

现在`configure`至少成功地检查了该库：

```
checking for LIBLO... yes 
```

但`make`似乎不包括带有链接器的库：

```
$ make
make  all-recursive
Making all in src
/usr/bin/gcc-4.2 -I/usr/X11/include -g -O2   -L/opt/local/lib -lnetcdf -lSM -lICE \
-L/usr/X11/lib -R/usr/X11/lib -lX11  -L/usr/X11/lib -R/usr/X11/lib  -Wl,-rpath,  -o \
ncview  ncview.o file.o util.o do_buttons.o file_netcdf.o view.o do_print.o \
epic_time.o interface.o x_interface.o dataedit.o display_info.o plot_xy.o utils.o \
range.o printer_options.o overlay.o filesel.o set_options.o plot_range.o udu.o \
SciPlot.o RadioWidget.o cbar.o utCalendar2_cal.o calcalcs.o colormap_funcs.o \
make_tc_data.o stringlist.o handle_rc_file.o   -lm -L/opt/local/lib -lnetcdf -lXaw \
-lXt  -L/usr/X11/lib -R/usr/X11/lib -lSM -lICE -L/usr/X11/lib -R/usr/X11/lib -lX11  \
-L/usr/X11/lib -R/usr/X11/lib  -lpng 

Undefined symbols:
  "_lo_address_new", referenced from:
      _main in ncview.o
  "_lo_send_internal", referenced from:
      _main in ncview.o
ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

所以它链接了旧的库（`netcdf`，`X11`），但没有选择我添加的库（`liblo`）

整个 makefile 业务对我来说都是黑魔法，所以欢迎任何关于为什么图书馆没有链接的线索。

* * *

**解决方案**：

的提示`AC_SUBST`，并再次仔细研究其他库的集成方式，我设法让它工作。无需添加任何内容`Makefile.am`。在`configure.in`(aka `configure.ac`) 中，添加了以下内容：

```
# OSC support
PKG_CHECK_MODULES(LIBLO, liblo >= 0.26)
LIBSsave=$LIBS
CFLAGSsave=$CFLAGS
CFLAGS=$LIBLO_CFLAGS
LIBS=$LIBLO_LIBS
# AC_MSG_CHECKING([for liblo OSC library])
# AC_MSG_RESULT()
# AC_CHECK_LIB(LIBLO,lo_address_new,[],[libloWorks=no])
echo "liblo OSC library: $LIBLO_LIBS"
AC_SUBST(LIBLO_CFLAGS)  # si?
AC_SUBST(LIBLO_LIBS)
LIBS+=$LIBSsave
CFLAGS+=$CFLAGSsave 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T13:45:53.380

之后`PKG_CHECK_MODULES`，变量`LIBIO_CFLAGS`和`LIBIO_LIBS`应该被定义。此时，您应该添加：

```
AC_SUBST(LIBIO_CFLAGS)
AC_SUBST(LIBIO_LIBS) 
```

到`configure.ac`文件。然后`Makefile.am`需要使用这些替换：

```
ncview_CPPFLAGS = $(LIBIO_CFLAGS)
ncview_LDADD = $(LIBIO_LIBS) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T14:09:56.097

您还可以使用如下语法直接替换 LIBLO-flags 的值：

配置.ac：

```
 PKG_CHECK_MODULES(LIBLO, liblo >= 0.26) 
```

生成文件.am：

```
 ncview_LDADD += @LIBLO_LIBS@ 
```

您还应该注意不要覆盖以前的 LDADD 值（或相反，因此您的值会被覆盖）

```
 ncview_LDADD = @LIBLO_LIBS@
  ncview_LDADD = -lm 
```

应该给你一个警告，@LIBLO_LIBS@ 将无效。

# jquery - 删除 HTML 长度小于 X 个字符的元素

> ID：14383128
> 
> 赞同：0
> 
> 时间：2013-01-17T16:03:58.347
> 
> 标签：jquery

我正在尝试查找所有`class=galleryLink`HTML 小于 X 字符的元素，然后将它们从 DOM 中删除。这是我最好的猜测：

```
if($('.galleryLink').html().length < 95){
    this.remove();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:06:36.823

你正在寻找正确的方向，但你并不完全在那里。在您的示例中，如何`this`引用您要删除的元素？

您必须将其应用于所有匹配元素：

```
$(".galleryLink").filter(function () {
    return $(this).html().length < 95;
}).remove(); 
```

请注意，该`.html()`方法返回元素内的标记。您可能更喜欢`.text()`.

该`.filter()`方法将函数应用于匹配集中的每个元素。如果它返回一个真值，则该元素保留在集合中。因此，在过滤器之后，您将得到所有内容长度小于 95 个字符的元素。

该`.remove()`方法适用于匹配集中的所有元素。由于该集合现在已被过滤为您想要摆脱的元素，它应该可以完成这项工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:06:56.160

您可以[`.filter()`](http://api.jquery.com/filter/)在删除元素之前使用它来过滤元素：

```
$('.galleryLink').filter(function() {
    return $(this).html().length < 95;
}).remove(); 
```

# javascript - Google Charts API，AnnotatedTimeline：正确设置多个系列和比例

> ID：14383134
> 
> 赞同：2
> 
> 时间：2013-01-17T16:04:11.887
> 
> 标签：javascript, scale, google-visualization

我正在使用包含三个不同系列的 Google Charts AnnotatedTimeline。

第一个系列有自己的规模。第二个和第三个应该具有相同的比例，因为它们代表相同类型的数据。

问题是我一次只能将秤与一个系列相关联。这是我目前绘制图表的方式：

```
chart.draw(chartData, {scaleType: 'allmaximized', scaleColumns:[0, 1], displayExactValues: true, dateFormat: 'dd MMMM yyyy'}); 
```

这样一来，第一个系列在左边就有了自己的比例，这很好。但是，第二个比例仅使用第二个系列的值计算，因此第三个系列在图表上放错了位置。将方法更改为：

```
chart.draw(chartData, {scaleType: 'allmaximized', scaleColumns:[0, 1, 2], displayExactValues: true, dateFormat: 'dd MMMM yyyy'}); 
```

在第三个系列的图表中间添加了第三个比例，这不是我想要的。

有没有办法对系列 2 和系列 3 进行分组以获得相同的比例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T03:55:25.923

我明白你现在想做什么。您只想有 2 个轴，1 个对应于 0/1 列中的值，另一个对应于第 2 列。我把这个例子放在一起（随意复制粘贴到谷歌游乐场）：

```
function drawVisualization() {
  var data = new google.visualization.DataTable();
  data.addColumn('date', 'Date');
  data.addColumn('number', 'Sold Pencils');
  data.addColumn('string', 'title1');
  data.addColumn('string', 'text1');
  data.addColumn('number', 'Sold Pens');
  data.addColumn('string', 'title2');
  data.addColumn('string', 'text2');
  data.addColumn('number', 'Sold Erasers');
  data.addColumn('string', 'title3');
  data.addColumn('string', 'text3');
  data.addRows([
    [new Date(2008, 1 ,1), 30000, null, null, 40645, null, null, 100, null, null],
    [new Date(2008, 1 ,2), 14045, null, null, 20374, null, null, 120, null, null],
    [new Date(2008, 1 ,3), 55022, null, null, 50766, null, null, 70, null, null],
    [new Date(2008, 1 ,4), 75284, null, null, 14334, 'Out of Stock', 'Ran out of stock on pens at 4pm', 100, null, null],
    [new Date(2008, 1 ,5), 41476, 'Bought Pens', 'Bought 200k pens', 66467, null, null, 110, null, null],
    [new Date(2008, 1 ,6), 33322, null, null, 39463, null, null, 130, 'Eraser Boom', 'People dig erasers']
  ]);

  var annotatedtimeline = new google.visualization.AnnotatedTimeLine(
      document.getElementById('visualization'));
  annotatedtimeline.draw(data, {'displayAnnotations': true, scaleType: 'allmaximized', scaleColumns:[0, 2]});
} 
```

这在左侧刻度上显示第 0/1 列，在右侧刻度上显示第 2 列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-06T09:17:18.453

为系列 2 和 3 获得相同的比例？
看起来唯一的方法是“破解”它。您可以通过在系列的末尾（或开头）添加两行**假值来做到这一点。**获取变量, , ,
中系列 2 和 3 的最大值和最小值。然后附加两行（假）值：`max2``max3``min2``min3`

```
 row1 = last value of series 1, Max(max2, max3), Max(max2, max3)
  row2 = last value of series 1, Min(min2, min3), Min(min2, min3) 
```

您还需要设置选项**scaleType:'allmaximized'**并且您的系列 2 和 3 将完全对齐。

# ruby-on-rails - Model.all 和 Model.find(id)：我可以用一个查询来做到这一点吗？

> ID：14383136
> 
> 赞同：0
> 
> 时间：2013-01-17T16:04:20.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-activerecord

我有两个模型：建筑和公寓。建筑物 has_many ：公寓和公寓 has_many ：建筑物。在公寓索引中，我想列出所有建筑物，以便用户可以根据他们所在的建筑物过滤公寓。但是，有时我还想拉出一个特定的公寓——如果公寓 ID 已经给出。现在，在 apartments#index 中，我有：

定义索引

```
@buildings = Buildings.all

    if params[:building_id] # the apartments resource is nested in the building resource route.
        @building = Building.find(params[:building_id])
    end

end 
```

有没有更好的方法来做到这一点，而无需运行两个查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:26:25.610

该`detect`方法在可枚举中搜索与该块匹配的对象，例如

```
building = buildings.detect {|b| b.id == params[:building_id].to_i} 
```

这将与要搜索的建筑物数量呈线性关系，尽管如果建筑物的数量足够小以至于您无论如何都要加载它们，这可能不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:06:41.320

很好的选择可能是。

```
@buildings = Building.all

    if params[:building_id] 
        @building = @buildings.select{|b| b.id == params[:building_id}.first
    end

end 
```

但是如果集合真的很大，那么性能就会很差，所以请保留 2 个数据库调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:27:21.473

您可以使用 ruby​​ 的 Array#select 从获取的数组中选择所需的项目。

```
def index
  @buildings = Buildings.all
  if params[:building_id] 
    @building = @buildings.select({|building| building.id == params[:building_id]}).first
  end
end 
```

# pinvoke - 对 PInvoke 函数 'ABC' 的调用使堆栈失衡。

> ID：14383141
> 
> 赞同：0
> 
> 时间：2013-01-17T16:04:38.163
> 
> 标签：pinvoke, unmanaged

我有一个调用 C 函数的 C# 应用程序（Windows 7 vs2010 上的 x86 .net 3.5）

当我将其升级到 .net 4 时，我收到以下消息：

这可能是因为托管 PInvoke 签名与非托管目标签名不匹配。检查 PInvoke 签名的调用约定和参数是否与目标非托管签名匹配。

C签名：

BOOL ABC( UDF_HANDLE 句柄, char* pQualifiedName ) //#define UDF_HANDLE void*

C# 方面：

```
 [SecuritySafeCritical]
    [DllImport(dllPath, CharSet = CharSet.Unicode, CallingConvention = CallingConvention.StdCall, ThrowOnUnmappableChar = true)]
    internal static extern int ABC(
        [In] IntPtr handle,
        [MarshalAs(UnmanagedType.LPStr)] string qualifiedName); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-30T06:29:17.207

C++ 代码使用 cdecl 调用约定。但是您已经在 p/invoke 中指定了 stdcall。在 C# 代码中更改它，您的两个声明将匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:35:58.447

我将 ABC 第一个参数重新定义为与函数中的第一个参数相同。

# postgresql - 从 psql 生成空输出

> ID：14383146
> 
> 赞同：3
> 
> 时间：2013-01-17T16:04:50.430
> 
> 标签：postgresql, psql

我正在运行一个执行复杂查询的 psql 命令。查询不会产生任何结果，因此 psql 在输出中返回“（无行）”。

有没有办法让 psql 返回一个空字符串？

我已经尝试在所有变体中使用 --pset=tuples-only=on 和 --pset=footer=off 和 -q ，但它似乎不起作用。

页脚选项在 psql shell 提示符下有效，但在脚本中无效。

在 9.1.7 上试过，8.4、9.1 和 9.2 需要这个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:10:10.717

可能已经足够好了：

```
$ psql -Axt -c 'select 1 where 1=0' 
```

产生一个空字符串

**编辑**以下评论：上面的命令产生一个空行，因此包括和行尾。

要完全不产生任何内容，请删除该`-x`选项。

并不是说它会对 shell 产生任何影响，如下所示：

与-x：

```
r=`psql -Atx -d test -c "select 1 where 1=0"`  
回声 $r | od -c  
0000000 \n  
0000001  

```

没有-x：

```
r=`psql -At -d test -c "select 1 where 1=0"`
回声 $r | od -c
0000000 \n
0000001

```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T01:46:44.780

> 有没有办法让 psql 返回一个空字符串？

您可以简单地`SELECT ''`在第一个查询之后追加。前任。：

```
psql -Atp5432 mydb -c "SELECT 1 WHERE FALSE; SELECT ''" 
```

替换`SELECT 1 WHERE FALSE`为不返回行的复杂查询。

# mysql - 执行基本 MySQL 插入时丢失换行符

> ID：14383148
> 
> 赞同：2
> 
> 时间：2013-01-17T16:04:54.313
> 
> 标签：mysql, insert, line-breaks

我有一个简单的 MySQL 查询，它接受一个 html 字符串并将其插入到数据库中，但是我总是丢失换行符 - 我需要做些什么来保留插入查询中的换行符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:18:08.497

使用查询重新加载字符串，它们会查看它们是否包含换行符。检查 ascii 13、10 以及两者的组合也可能是一个好主意。如果它带有换行符 (10)，则 MySQL 可能期待回车/换行组合，反之亦然。

# ios - 使用 UITabController 时将数据传递给 UIViewControllers 的一般方法

> ID：14383156
> 
> 赞同：0
> 
> 时间：2013-01-17T16:05:25.660
> 
> 标签：ios, uitabbarcontroller

我还没有掌握下面这个结构的转移。我已经阅读了很多帖子，并且看到了其他人的相同未答复的帖子，但没有解决方案。

我将尝试简化问题，以使所有人更容易。

项目结构为：UITabbar 带有tab1 和tab2

Tab1 有一个导航控制器-->ViewController1

Tab2 有一个导航控制器 -->ViewController2

在 viewcontroller1 (tab1) 我有对象 X。

在 ViewCONtroller2 (tab2) 我想显示对象 X。

不用担心显示，这是最容易的部分。

![在此处输入图像描述](../Images/fa7c9f684c88cfe2fe71247fee677476.png)

问题：如何将对象 X 从 tab1 传递到 tab2。（一般模式是什么）。

如果你想用 prepareForSegue 来做，这样可以吗，还是有更好的方法。

如果使用prepareForSegue，你将segue拖到哪里？

1.  标签栏控制器

    ![在此处输入图像描述](../Images/c0dbf0df7ae9a108a987ea19588d7b21.png)

OR***** 2\. 到第二个 VC ![在此处输入图像描述](../Images/a809f9b298962e2f0995399dfbbb2bed.png)

希望这足够清楚。考虑到这一点，您将如何执行传输？

使用转场 1： ![在此处输入图像描述](../Images/5ad694cee3f6ffd32ba7b1cb551b2116.png)

我试过这样做：

```
//(From View controller 1)

    - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
    {
    if ([segue.identifier isEqualToString:@"CreateObjectXToDisplayObjectX"])

            ViewController2* vc2 = [[ViewController2 alloc] init];
            UITabBarController* tbc = [segue destinationViewController];
            vc2 = (ViewController2 *)[[tbc customizableViewControllers] objectAtIndex:1];
    //Crash here with with [MainNavigationControllerDesign setViewController1Delegate:]: unrecognized selector sent to instance 0x1064ef70'
            vc2.viewController1Delegate=self;
            vc2.objectXAtViewController2 = _objectXFromViewController1;
        }
    } 
```

那么，这个 Object X 传输是如何完成的呢？先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:39:59.720

你不想以这种方式使用segues。Segue 总是在您访问新控制器时实例化它们，但是您已经将这些控制器嵌入到选项卡栏控制器中。如果您在代码中进行设置，我会说使用委托，但如果您在 IB 中进行设置，则很难做到这一点。在 VC2 中，您可以通过 self.tabBarController.viewControllers[0] 获得对 VC1 导航控制器的引用。VC1 将是导航控制器的 topViewController，因此，将它们放在一起并添加演员表，您可以像这样访问 VC1：

```
ViewController1 *vc1 = (ViewController1 *)[self.tabBarController.viewControllers[0] topViewController]; 
```

获得该引用后，您可以访问 vc1 的任何属性。不要忘记将 ViewController1.h 导入到 ViewController2 的 .m 文件中。

# php - AJAX GET后的JQuery

> ID：14383159
> 
> 赞同：0
> 
> 时间：2013-01-17T16:05:30.373
> 
> 标签：php, javascript, jquery, ajax

我有这个 AJAX GET：

```
function edit(str){  
    ajax.onreadystatechange=function()
    {
        if (ajax.readyState==4 && ajax.status==200)
        {
            document.getElementById("editaircraftdialog").innerHTML=ajax.responseText;
            $("#editaircraftdialog").dialog('open');

            $("#loadingdialog").dialog('close');
        }
    }
    ajax.open("GET","./edit_aircraft.php?icao="+str,true);
    ajax.send();
    $("#loadingdialog").dialog('open');
} 
```

edit_aircraft.php 中的 JQuery 代码不起作用。这是一个例子：

```
<script>
    $(function() {
        $("#insertaircraft")
            .button()
            .click(function(event) {
        });
    });
</script> 
```

我过去也遇到过同样的问题，我无法解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:14:19.307

您不能使用 innerHTML 加载 JavaScript。它没有得到评估。

使用 jQuery 来发挥你的优势

```
function edit(str){  
    var loading = $("#loadingdialog").dialog('open');
    var aircraft = $("#editaircraftdialog");
    aircraft.load("./edit_aircraft.php?icao="+str, function(){
        loading.dialog('close');
        aircraft.dialog('open');
    });
} 
```

# java - 通过 Stripes 将 POST 数据映射到对象

> ID：14383160
> 
> 赞同：2
> 
> 时间：2013-01-17T16:05:32.760
> 
> 标签：java, forms, jsp, stripes

我一直在像疯子一样在谷歌上搜索，试图弄清楚这一点。

所以我通常会看到 JSP 页面的表单值的名称如下：

```
<input name="${object.member}" type="text" /> 
```

它映射到 ActionBean 上的“对象”变量。在我正在查看的一些代码中，它变得更加深入

```
${object.memberMap[key].member} 
```

所以大概，当你提交一个表单时，你可以让它自动将这些值映射到 Java 对象，对吧？但是，这不是我所看到的，但我相当肯定其他代码会利用

我的问题是：有没有办法手动触发这种将表单中的 POST 数据自动映射到 ActionBean 上的对象值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T19:21:42.087

如果要将action类的变量映射到jsp变量中，需要创建对象的getter和setter方法并使用，`<s:text>`而不是`<input type="text">`例如

```
In Jsp
<s:text name="user.email"></s:text>

In java class

private User user;
public User getUser() {
    return user;
}
public void setUser(User user) {
    this.user = user;
}

And inside User class

private String email;
public String getEmail() {
    return email;
}

public void setEmail(String email) {
    this.email = email;
} 
```

# c# - 方法性能返回的 C# 结构

> ID：14383164
> 
> 赞同：0
> 
> 时间：2013-01-17T16:05:42.417
> 
> 标签：c#, performance, memory-management, struct

可以说我有一个这样的结构：

```
public struct MyCustomDataset : IEnumerable<float> {
    public float v1;
    public float v2;
    public float v3;

    public MyCustomDataset(float v1, float v2, float v3) {
        this.v1 = v1;
        this.v2 = v2;
        this.v3 = v3;
    }

    // Enumerable impl
    public IEnumerator<float> GetEnumerator() {
        yield return v1;
        yield return v2;
        yield return v3;
    }
    IEnumerator IEnumerable.GetEnumerator() {
        return GetEnumerator();
    }
} 
```

和这样的方法：

```
public static MyCustomDataset test() {
    return new MyCustomDataset(1,2,3);
}

public static void test2() {
    MyCustomDataset ds = test();
    /* doing stuff with ds */
} 
```

我想知道如果 MyCustomDataset 是类而不是结构，它是否更优化。我需要知道这一点，因为我在应用程序主循环中调用 test()，所以 MyCustomDataset 将在每次应用程序迭代中分配。因此，我不会将 MyCustomDataset 设为一个类，因为这就像性能自杀。我正在考虑使用 struct，因为我怀疑在这种情况下它的行为或多或少类似于原始类型。

性能好吗？

我不会将 MyCustomDataset 分配给任何类字段，我只会在方法体中读取它，并且可能会将它传递给几个方法调用，因此它会出现在少数本地范围内。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:28:47.070

你：

> 因为这就像表演自杀

你为什么这么认为？您指的结构和类之间有什么区别？

如果您觉得它或多或少像“原始类型”（您的话），我认为您应该使用结构。这只是三个`float`值（可能总共 96 位），因此对于值类型来说足够小。但是，如果您坚持使用结构，请创建 fields `readonly`。

# ruby - 如何在类中调用超类方法

> ID：14383166
> 
> 赞同：1
> 
> 时间：2013-01-17T16:05:48.967
> 
> 标签：ruby, class

如何在类中调用超类方法，例如：

```
class A  
  def foo  
    puts "lol"  
  end  
end

class B < A  
  foo  
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:11:51.093

您正在尝试从类的上下文中调用实例方法。这是无效的。

什么会起作用：

```
class A  
  def self.foo  
    puts "lol"  
  end  
end

class B < A  
  foo
end 
```

# silverlight-4.0 - 在 CRM 2011 中添加 CampaignActivityItem 会出现 403 错误

> ID：14383172
> 
> 赞同：1
> 
> 时间：2013-01-17T16:05:59.657
> 
> 标签：silverlight-4.0, dynamics-crm-2011, odata, crm, webresource

我正在使用 Otganizational Data 服务在 CRM 2011 中创建 Silverlight 4 Web 资源。我能够创建活动、营销列表和打印活动，以及将列表链接到活动。但是，当我使用 CampaignActivityItem 将营销列表链接到打印活动时，我收到 403 Forbidden 错误。下面是我正在使用的代码。

```
 Models.CampaignActivityItem activityItem = new CampaignActivityItem()
        {
            CampaignActivityItemId = Guid.NewGuid(),
            ItemId = EmailMarketingList.ListId, //Id of my marketing list I have 
                                                //already created
            CampaignActivityId = new Models.EntityReference()
            {
                Id = MyCampaignPrintActivity.ActivityId, //Id of the print activity
                                                         //I have already created
                LogicalName = "CampaignActivity",
                Name = "CampaignActivity"
            }
        };

        context.AddObject("CampaignActivityItemSet", activityItem);

        context.BeginSaveChanges(System.Data.Services.Client.SaveChangesOptions.ContinueOnError, OnChangesSaved, context);

    private void OnChangesSaved(IAsyncResult result)
    {
        // Use the Dispatcher to ensure that the 
        // asynchronous call returns in the correct thread.
        OnUiThread(() =>
        {
            try
            {
               DataServiceResponse response = context.EndSaveChanges(result);
            }
            catch (DataServiceRequestException ex) // Errors with code=403       
                                                   // message=Forbidden
            {
                WriteOperationResponse(ex.Response, "ListLink");
            }
            catch (InvalidOperationException ex)
            {
                MessageBox.Show(ex.Message);
            }
            finally
            {
            }
        }
        );
    } 
```

任何关于我做错了什么的方向都将不胜感激。使用上下文，我可以对其他对象执行操作，但不能对 CampaignActivityItemSet 执行操作。

# download - 如何获取 JDK 7u11？

> ID：14383174
> 
> 赞同：0
> 
> 时间：2013-01-17T16:06:01.230
> 
> 标签：download, java, wget

我想使用命令/工具 Wget 从 Oracle 页面下载[JDK 7 的最新更新 11](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html)，但我不知道怎么做？

```
wget --no-check-certificate http://download.oracle.com/otn-pub/java/jdk/7u11-b21/jdk-7u11-macosx-x64.dmg 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-20T12:38:23.427

Oracle 产品需要在下载前点击许可协议，这就是为什么它不能在没有特别注意的情况下与 wget 一起使用。

有几种使用 wget 下载 Oracle 产品的方法。大多数情况下，您会遇到将 cookie 文件复制到服务器并与 wget 一起使用的方法，但它似乎不再起作用了。

*我发现使用 wget 通过控制台下载 Oracle 产品的最简单方法是以下步骤。*

# 最简单的下载方式

1.  在任何机器上使用任何图形浏览器（Firefox、Chrome、IE 等）接受您要下载的产品的许可协议并开始下载文件
2.  立即取消下载，右键下载进度复制下载地址
3.  使用您在第 2 步复制的链接，然后以正常方式使用 wget 下载

    ```
    wget URL_YOU_HAVE_COPIED 
    ```

显然，在您开始在浏览器上复制后，URL 会失效之前有一个超时时间。不知道那个时间是多少。但它就像我每次使用它的魅力一样。

任何人有任何更简单的方法？请告知使用。

# tcl - 访问 TCL 库

> ID：14383179
> 
> 赞同：0
> 
> 时间：2013-01-17T16:06:13.323
> 
> 标签：tcl, tclsh

我是 TCL 新手，正在努力访问其他模块。SOURCE 命令帮助我包含了我在 TCL 程序中编写的其他代码。但是，我认为我在访问代码库时遇到了问题。

例如，当我引用一个数学函数时，找不到它。我认为在搜索通过 tchsh85 调用的程序时，我必须做一些事情来包括数学库在我的计算机上的位置。

```
invalid command name "::math::statistics::mv-ols" 
```

我的计算机上不存在以下目录：

```
info library= C:/Tcl/lib/tcl8.5
auto_path= C:/Tcl/lib/tcl8.5 C:/Tcl/lib c:/tcl/lib/teapot/package/win32-x86_64/lib               c:/tcl/lib/teapot/package/tcl/lib
tcl library= C:/Tcl/lib/tcl8.5
auto_index= source C:/Tcl/lib/tcl8.5/word.tcl
auto_index= source C:/Tcl/lib/tcl8.5/tm.tcl
auto_index= source C:/Tcl/lib/tcl8.5/tm.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/parray.tcl
auto_index= source C:/Tcl/lib/tcl8.5/history.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/history.tcl
auto_index= source C:/Tcl/lib/tcl8.5/package.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/history.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/word.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/word.tcl
auto_index= source C:/Tcl/lib/tcl8.5/package.tcl
auto_index= source C:/Tcl/lib/tcl8.5/tm.tcl
auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl
auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl
auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl
auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl
auto_index= source C:/Tcl/lib/tcl8.5/history.tcl
auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/history.tcl
auto_index= source C:/Tcl/lib/tcl8.5/package.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/history.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/tm.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/word.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/package.tcl
auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl
auto_index= source C:/Tcl/lib/tcl8.5/history.tcl
auto_index= source C:/Tcl/lib/tcl8.5/package.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/word.tcl
auto_index= source C:/Tcl/lib/tcl8.5/history.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/auto.tcl
auto_index= source C:/Tcl/lib/tcl8.5/history.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl
auto_index= source C:/Tcl/lib/tcl8.5/tm.tcl
auto_index= source C:/Tcl/lib/tcl8.5/tm.tcl
auto_index= source C:/Tcl/lib/tcl8.5/safe.tcl 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T08:32:45.663

您想要成功的命令是：

```
package require math::statistics 
```

您不应该通过其他方式（如直接`source`）获取代码，因为您随后将绑定到包的*实现*而不是它的*规范*。该软件包是 Tcllib 集合的一部分，您应该将其安装在计算机的某个位置。

如果你使用 ActiveTcl，你想做：

```
teacup update 
```

这将安装*许多*软件包并设置您需要的所有路径。

如果您使用自己的构建，则必须自己下载 Tcllib 的副本并按照其安装说明进行操作。我不记得它在 Window 上默认安装到哪里，但假设它是安装到`C:\Tcl\lib\Tcllib`（在其子目录中的实际包）：在这种情况下，您可以通过执行以下操作使包对 Tcl 可用：

```
lappend auto_path C:/Tcl/lib/Tcllib 
```

^(如果您正在制作可再分发的可执行文件，还有其他技术。在这种情况下再问一个问题。)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:30:29.243

::math::statistics 是 TCLlib 的一部分。要检查是否已安装，请键入

```
package require tcllib 
```

如果已安装，它会告诉您版本号。如果没有安装，您可以使用[Teacup](http://wiki.tcl.tk/17305)为您安装。

# sql-server - 如何使用实体命令获取所有子行？

> ID：14383180
> 
> 赞同：0
> 
> 时间：2013-01-17T16:06:16.667
> 
> 标签：sql-server, entity-framework, linq-to-entities, entity-framework-4.1, entity

我使用这个 SQL 命令来获取子用户的所有孩子和孩子，但我不知道如何用实体编写它？

```
WITH ParentUser AS (
SELECT  *, 1 AS nthLevel
FROM [OnlinePage].[dbo].[Users] usr1
WHERE ID = @UserID
UNION ALL
SELECT  usr2.*,
nthLevel + 1 AS nthLevel
FROM ParentUser pu INNER JOIN
[OnlinePage].[dbo].[Users] usr2 ON pu.ID = usr2.UserParentID
)
SELECT * FROM ParentUser WHERE 1 < nthLevel 
```

我的用户表是：

```
CREATE TABLE [dbo].[Users](
[ID] [int] IDENTITY(1,1) NOT NULL,
[Username] [nvarchar](50) NOT NULL,
[UserParentID] [int] NOT NULL
) 
```

它是这样的：

```
|--------------------------------------|
|ID |用户名 |UserParentID |
|-----|-----------|---------|
|1 |管理员 |0 |
|2 |经销商1 |1 |
|3 |用户1 |1 |
|4 |经销商2 |2 |
|5 |用户2 |4 |
|6 |用户3 |5 |
|--------------------------------------|

```

如果我想使用上面的 sql 命令获取 reseler1 的所有子项，我将 @UserID 更改为 2，我的结果是：

```
|--------------------------------------|
|ID |用户名 |UserParentID |
|-----|-----------|---------|
|2 |经销商1 |1 |
|3 |用户1 |1 |
|4 |经销商2 |2 |
|5 |用户2 |4 |
|6 |用户3 |5 |
|--------------------------------------|

```

现在我需要这个sql命令的实体模型，我在谷歌上搜索它，我在stackoverflow（[查询子实体](https://stackoverflow.com/questions/7753039/entity-framework-querying-child-entities)）中找到了一些东西，比如下代码，但不能正常工作，只能得到一个级别的孩子：

```
var query = from m in dbSet.Where(x => x.ID == 1)
join s in dbSet
on m.ID equals s.UserParentID into masterSlaves
from ms in masterSlaves.DefaultIfEmpty()
select ms; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:28:19.477

实体框架和 Linq-to-entities 不支持分层查询。您必须使用 SQL 查询并使用`dbSet.SqlQuery`or调用它`dbContext.Database.SqlQuery`。使用 EF 5 / .NET 4.5 和数据库优先方法，您还可以创建包装查询的 SQL 函数并对其进行映射（这样您就可以从 Linq-to-entities 查询中使用该函数），但这在早期版本和代码优先。

# html - HTML / CSS时间线效果的一些问题

> ID：14383184
> 
> 赞同：1
> 
> 时间：2013-01-17T16:06:25.730
> 
> 标签：html, css, timeline

我正在尝试对项目产生时间线效果。我做了一些研究，发现[了这个例子](https://stackoverflow.com/a/9141944/195999)

而且，正如您[在此处](http://labs.a.rnaud.be/testTL/)看到的那样，它效果不佳......这是制作它的部分：

```
section#lastPost {
  width: 960px;
  margin: 0 auto; }
section#lastPost .TLItem {
  clear: left;
  float: left; }
section#lastPost .TLItem:nth-child(2n) {
  clear: right;
  float: right; } 
```

好吧，正如你所看到的，有一点空间问题:)

任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:05:21.470

您基本上需要知道每个块的高度才能将其短路。您的答案取决于这篇文章： [如何以与 Facebook 时间线类似的方式布置我的内容 div？](https://stackoverflow.com/questions/8191015/how-do-i-lay-out-my-content-divs-in-a-similar-manner-to-facebook-timeline)

你可以在这里看到工作小提琴：http: [//jsfiddle.net/gK2Vn/](http://jsfiddle.net/gK2Vn/)

在某种程度上，您需要添加以下脚本：

```
$(document).ready(function() {
    var left_column_height = 0;
    var right_column_height = 0;
    var items = $('section#lastPost #TL .TLItem');
    for (var i = 0; i < items.length; i++) {
        if (left_column_height > right_column_height) {
            right_column_height += items.eq(i).addClass('right').outerHeight(true);
                        } 
        else {
            left_column_height += items.eq(i).outerHeight(true);
        }
    }
}); 
```

并将您的 CSS 更改为：

```
section#lastPost #TL .TLItem {
    clear: left;
    float: left;
}
section#lastPost #TL .TLItem.right {
    clear: right;
    float: right;
} 
```

# c# - 在 Word 2010 和 Visual Studio 2010 中显示与复选框名称相关的相应文本，在取消选中复选框时将其删除？

> ID：14383186
> 
> 赞同：0
> 
> 时间：2013-01-17T16:06:30.590
> 
> 标签：c#, visual-studio-2010, templates, ms-word

我当前在 Visual Studio 中用于在单击复选框时填充文本字段的代码是：

```
 private void checkBox1_CheckedChanged(object sender, EventArgs e)
    {
        this.displayText.Text += "Internal Use";
    }

    private void checkBox2_CheckedChanged(object sender, EventArgs e)
    {
        this.displayText.Text += "Company Confidential";
    }

    private void checkBox3_CheckedChanged(object sender, EventArgs e)
    {
        this.displayText.Text += "Customer Confidential";
    }

    private void checkBox4_CheckedChanged(object sender, EventArgs e)
    {
        this.displayText.Text += "Strictly Confidential";
    } 
```

这很好，但我希望在未选中这些框时删除文本。是否有人对我可能需要使此要求起作用的特定代码有任何见解？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:15:32.863

你的意思是像

```
private void checkBox1_CheckedChanged(object sender, EventArgs e)
{
    if (checkBox1.Checked)
        this.displayText.Text = "Internal Use";
    else
        this.displayText.Text = String.Empty;
} 
```

你确定这不是你在谈论的 C# 吗？

# breakpoints - 在断点处使用精灵无法正确运行

> ID：14383188
> 
> 赞同：0
> 
> 时间：2013-01-17T16:06:30.927
> 
> 标签：breakpoints, susy-compass

当我在断点（$desktop）（susy）中使用精灵时，基因精灵背景图像不会影响我的.logo类

```
SCSS :

@include at-breakpoint($desktop) {
  .logo{
     @include logos-sprite('my-set-m');
  }
}

CSS :

.logos-sprite { background: url('../images/spr/logos.png') no-repeat; } 
```

但是没有 at-breakpoint() 就可以了（.logo 与 .logo-sprite 合并）！（我需要将 sprite 包含到 brakpoint 中）

```
SCSS :

//@include at-breakpoint($desktop) {
  .logo{
     @include logos-sprite('my-set-m');
  }
//}

CSS :

.logos-sprite, .logo { background: url('../images/spr/logos.png') no-repeat; } 
```

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T03:45:55.940

那是因为`@extend`在媒体查询中不支持使用魔法精灵。您将不得不使用更精细的指南针精灵工具来创建自己的解决方法。

# api - 如何使用 uri 进行 Vimeo API 调用？

> ID：14383193
> 
> 赞同：2
> 
> 时间：2013-01-17T16:06:46.157
> 
> 标签：api, video, uri, vimeo

我想使用 Vimeo API 搜索带有特定标签的视频。为此，我知道我必须使用[Vimeo 的高级 API](https://developer.vimeo.com/apis/advanced)来进行[vimeo.search](https://developer.vimeo.com/apis/advanced/methods/vimeo.videos.search)调用。但是我实际上如何通过 uri 做到这一点？我也知道使用高级 API 我需要 OAuth oauth_consumer_key 和 oauth_signature。但是我将如何从 uri 传递这些信息？

如果我确实从 API 获取数据，那么我将使用 PHP 来处理它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T00:58:46.730

也许 [**是这样**](http://hurl.it/hurls/ac6ab0045daf805e4442aaa18d79942f8e03688e)？

```
GET /api/v2/video/6238577.xml HTTP/1.1
Host: vimeo.com
Accept: */* 
```

# perl - perl修改子中的哈希

> ID：14383195
> 
> 赞同：1
> 
> 时间：2013-01-17T16:06:51.153
> 
> 标签：perl, pointers, reference, hashtable

我无法理解引用如何与 subs 中的哈希一起工作。

在这段代码中，我尝试在子程序`%config`内部进行更改：`handleOptions()`

```
sub handleOption;

my %config = (  gpg => "",
                output => "",
                pass => "",
                host => "",
                type => "");

handleOptions(\%config);
print "\n";
print Dumper \%config;

sub handleOptions
{
    my ($gpgpath,$type,$pass,$host);
    my $pConfig=@_;

    GetOptions ("gpg=s" => \$gpgpath,
                "type=s" => \$type,
                "host=s" => \$type,
                "pass=s"=>\$pass);
    $pConfig->{'gpg'} = $gpgpath;
    $pConfig->{'type'} = $type;
    $pConfig->{'pass'} = $pass;
    $pConfig->{'host'} = $host;
    print Dumper %$pConfig;
} 
```

这是我给`--gpg='/home/daryl/gpg/pass.gpg`cli 中的选项时的输出：

```
$VAR1 = 'pass';
$VAR2 = undef;
$VAR3 = 'gpg';
$VAR4 = '/home/daryl/gpg/pass.gpg';
$VAR5 = 'type';
$VAR6 = undef;
$VAR7 = 'host';
$VAR8 = undef;

$VAR1 = {
          'pass' => '',
          'gpg' => '',
          'type' => '',
          'output' => '',
          'host' => ''
        }; 
```

我应该如何进行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:16:10.310

如果您使用`use strict`and `use warnings`，您会看到一条关于使用标量作为哈希引用的错误消息。这会提示您问题出在这一行：

```
my $pConfig=@_; 
```

您正在将数组的标量上下文分配给`@_`变量`$pConfig`。这意味着`$pConfig`存储数组中元素的数量`@_`。

相反，您可以这样做：

`my ($pConfig) = @_;`正如 KerrekSB 建议的那样，或者：

`my $pConfig = shift;`（自动`shift`来自`@_`）

查看[`perldoc perldata`](http://perldoc.perl.org/perldata.html)有关在标量上下文中调用非标量的更多信息。此外，除非您正在编写单行或简短的一次性脚本，否则请确保始终使用`use strict`和`use warnings`.

# c# - 需要准确编写RegEx查询

> ID：14383206
> 
> 赞同：0
> 
> 时间：2013-01-17T16:07:10.883
> 
> 标签：c#, .net, regex, powershell

我有一段我提取的 html 代码：

```
Server Address</span></td><td    ><span  class="hpPageText" >hostname0403.domain.tld</span></td>< 
```

从这个字符串中，我试图提取 fqdn (hostname0403.domain.tld)。我想我会使用以下逻辑：

1.  以 > 开头，以 < 结尾
2.  必须至少包含 1 个句点（点）。
3.  必须包括所有数字、所有字母或两者的组合。

我希望最终得到的是“>hostname0403.domain.tld<”，从那里我可以去掉><。这是我到目前为止的注册，它有效，但我认为它不准确：

```
$reg = ">[\w\.]+<" 
```

我对正则表达式很陌生，虽然这确实有效，但我不确定它是否安全。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:25:26.650

您可以使用以下内容（作为奖励，Regex 为您排除了 > 和 <）：

```
 string source = @"Server Address</span></td><td    ><span  class=""hpPageText"" >hostname0403.domain.tld</span></td><";
        Regex r = new Regex(@"(?<=\>)(([a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*([A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9])(?=\<)");

        string fqdn = "";
        Match fqdnMatch = r.Match(source);
        if (fqdnMatch.Success)
        {
            fqdn = fqdnMatch.Value;
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:13:58.107

正则表达式模式需要一些工作。例如，主机名之前和/或之后可能有空格。主机名可以包含“-”字符。您可以像这样处理空格：

```
'>\s*(..hostname regex)\s*<' 
```

有关更好的主机名正则表达式，请参阅此[SO](https://stackoverflow.com/questions/106179/regular-expression-to-match-hostname-or-ip-address)答案。以下是您将如何修改该正则表达式以满足您的需求：

```
$str = 'Server Address</span></td><td    ><span  class="hpPageText" >hostname0403.domain.tld</span></td><'
$ValidHostnameRegex = ">\s*((?:(?:[a-zA-Z0-9]|[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9])\.)*(?:[A-Za-z0-9]|[A-Za-z0-9][A-Za-z0-9\-]*[A-Za-z0-9]))\s*<"
$str -match $ValidHostnameRegex
$matches[1] 
```

输出：

```
hostname-0403.domain.tld 
```

# r - stat_summary：qplot 和 ggplot2 之间的不同行为/了解 ggplot2 的范例

> ID：14383207
> 
> 赞同：0
> 
> 时间：2013-01-17T16:07:21.497
> 
> 标签：r, ggplot2

我确信这将是一个“哦，天哪”的简单答案，但我总是无法理解 ggplot2 (0.9.3) 的基本范式。使用以下数据和辅助函数：

```
ltd <- data.frame(r = c(rnorm(5, 5, 1.5), rnorm(5, 8, 2)),
    f1 = c(rep("L", 5), rep("H", 5)))

seXy <- function (x) {
    m <- mean(na.omit(x))
    se <- sd(x, na.rm = TRUE)/sqrt(length(na.omit(x)))
    u <- m + se
    l <- m - se
    c(y = m, ymin = l, ymax = u)
    } 
```

此`qplot`请求工作正常：

```
tp <- qplot(x = f1, y = r, data = ltd, geom = "point")
tp <- tp + stat_summary(fun.data = "seXy", color = "red", geom = "linerange")
print(tp) 
```

但是这个`ggplot2`请求没有绘制线段，也没有给出错误（并且使用替代的注释行没有做任何不同的事情）：

```
tp <- ggplot()
tp <- tp + geom_point(aes(x = f1, y = r), data = ltd)
#tp <- tp + stat_summary(fun.data = "seXy", color = "red", geom = "linerange")
tp <- tp + stat_summary(fun.data = "seXy", color = "red", geom = "linerange", 
        aes(ymin = ..ymin.., ymax = ..ymax..))
print(tp) 
```

第二种方法需要什么才能`linerange`出现？我显然误解了一些东西。当然，这是一个 MWE，真实的上下文更复杂，但如果不理解这个简单的例子，我无法解决这个问题。看起来像是`qplot`在后台为我做某事，但我不知道是什么。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:19:47.830

问题可能是您仅在其中定义数据`geom_point()`，因此`stat_summary()`不使用它们。

如果将`data`and`aes()`放入`ggplot()`函数中，则`stat_summary()`给​​出`linerange`.

```
ggplot(ltd,aes(x = f1, y = r))+geom_point()+
  stat_summary(fun.data = "seXy", color = "red", geom = "linerange") 
```

如果`data`和`aes()`定义在`stat_summary()`

```
tp <- ggplot()
tp <- tp + geom_point(aes(x = f1, y = r), data = ltd)
tp <- tp + stat_summary(data=ltd,aes(x = f1, y = r),fun.data = "seXy", color = "red", geom = "linerange")
print(tp) 
```

# php - php类权限

> ID：14383210
> 
> 赞同：-2
> 
> 时间：2013-01-17T16:07:26.973
> 
> 标签：php, user-permissions

我想制作一个允许某些用户修改或删除某个项目的脚本。

例如：第 1 项 - 只能由 user1 编辑；第 2 项 - 只能由 user2 编辑；所有项目 - 可由管理员编辑

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:46:29.297

如果您存储用户及其权限，则需要数据库。根据登录的用户，您检查他的权限并允许或拒绝某些操作。

# php - 没有调用 WORDPRESS UPDATE DB 方法

> ID：14383211
> 
> 赞同：1
> 
> 时间：2013-01-17T16:07:28.047
> 
> 标签：php, mysql, wordpress, plugins

我正在制作一个 wordpress 插件，我在主 php 文件中有函数：

```
<?php
include_once "define.php";
include_once 'includes/form_processor.php';
include_once 'includes/email_subscriber.php';
include_once 'includes/options_page.php';
include_once 'includes/widget.php';

//register the plugin installation methods
register_activation_hook(__FILE__, 'install_simple_subscriber_plugin');
register_deactivation_hook(__FILE__, 'uninstall_simple_subscriber_plugin');

//register the plugin url
wp_enqueue_style('simple-email-subscriber-css', plugins_url('/simple_email_subscriber/stylesheets/style.css'));

function install_simple_subscriber_plugin(){
  add_action('plugins_loaded', 'setup_plugin_actions');
  email_subscriber::install_database();
  email_subscriber::update_database();
}

function setup_plugin_actions(){
  if(has_action('publish_post')){
   $simple_email_subscriber = new email_subscriber();
    //add action listener to post publication
    add_action('publish_post', array($simple_email_subscriber, 'on_publish_post'));
    add_action('publish__future_post', array($simple_email_subscriber, 'on_publish_post'));
  }

  //add the admin menu pages
  $options_page = new options_page();
}

function uninstall_simple_subscriber_plugin(){
  remove_action('plugins_loaded', 'setup_plugin_actions');
}
?> 
```

在我的自定义课程中，我有：

```
<?php
class email_subscriber{
  /*
   * Plugin Core Methods
   * */
  static function install_database() {
    //define create table query
    $sql = "CREATE TABLE IF NOT EXISTS ".SIMPLE_EMAIL_SUBSCRIBER_DB_NAME."(
      id mediumint(9) NOT NULL AUTO_INCREMENT,
      subscribe_time TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
      email VARCHAR(55) NOT NULL,
      UNIQUE KEY id (id)
    );";

    //update db and make it auto adjust
    require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
    dbDelta($sql);
  }

  //HERE IS THE NEW BITS ADDED TO THE EXISTING PLUGIN THAT'S NOT GET CALLED
  static function update_database(){
    $sql=
      "DELIMITER $$
      CREATE PROCEDURE Alter_Table()
      BEGIN
        DECLARE _count INT;
          SET _count = (  SELECT COUNT(*) 
                      FROM INFORMATION_SCHEMA.COLUMNS
                      WHERE   TABLE_NAME = 'email_subscription' AND 
                              COLUMN_NAME = 'subscribe_all');
      IF _count = 0 THEN
          ALTER TABLE ".SIMPLE_EMAIL_SUBSCRIBER_DB_NAME."
              ADD COLUMN subscribe_all TINYINT(1) DEFAULT 1,
              ADD COLUMN subscribe_category varchar(512) DEFAULT NULL;
      END IF;
  END $$
  DELIMITER ;
  CALL Alter_Table();
  DROP PROCEDURE Alter_Table;
  ";
//update db and make it auto adjust
require_once(ABSPATH . 'wp-admin/includes/upgrade.php');
dbDelta($sql);

//add the options for db defination
add_option("ses_db_version", SES_PLUGIN_VERSION);
  }

.................and other codes
} 
```

update_database() 方法是我添加的新方法，它试图更新数据库以获得额外的功能。但是当插件激活时它永远不会运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:16:40.740

您只想执行该查询。

```
global $wpdb;
$wpdb->query($sql); 
```

`dbDelta`用于创建新表或更新现有表以符合更新的方案。简而言之，它接受查询并在必要时`CREATE TABLE`将其转换为查询。[法典](http://codex.wordpress.org/Creating_Tables_with_Plugins#Creating_or_Updating_the_Table)说：`ALTER TABLE`

> dbDelta 函数检查当前表结构，将其与所需的表结构进行比较，并根据需要添加或修改表，因此它对于更新非常方便 [...] 请注意，dbDelta 函数相当挑剔，但是.

# git - Git从另一个存储库中拉出一个分支？

> ID：14383212
> 
> 赞同：106
> 
> 时间：2013-01-17T16:07:32.183
> 
> 标签：git, github, git-branch

我有一个本地 git 存储库，它是 github 上存储库的克隆。有人分叉了存储库并在新存储库的新分支中进行了更改。我想将这个新分支移动到我的存储库中（在与主分支合并之前先在本地处理它）。

我尝试创建一个新分支，然后从分叉存储库中提取，但它抱怨因为新分支是主分支的副本以及本地文件更改，所以它说

`error: Your local changes to the following files would be overwritten by merge`.

那么如何将另一个存储库中的分支拉到本地存储库的新分支中呢？

我希望这是有道理的。如果没有，这是我的存储库：[https ://github.com/MatthewLM/cbitcoin](https://github.com/MatthewLM/cbitcoin)

如您所见，有人创建了一个带有“linuxBuild”分支的新存储库：[https ://github.com/austonst/cbitcoin/tree/linuxBuild](https://github.com/austonst/cbitcoin/tree/linuxBuild)

我想要 MatthewLM/cbitcoin 的本地存储库中的那个分支。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2013-01-17T16:10:30.970

您需要确保`git status`显示本地存储库中不存在未暂存的更改。
您可以通过首先存储本地更改然后拉取该分支来做到这一点。之后，您可以应用您的存储。

* * *

如果要在本地存储库中重新创建 fork 的分支结构，可以执行以下操作：

```
git remote add fork <url of fork>
git fetch fork
git checkout -b fork_branch fork/<branch> 
```

这将创建具有与 fork 中相同历史记录的本地分支，`fork_branch`即将从您在 fork 中的where分支。此外，您的本地分支现在将跟踪 fork 中的该分支，因此您可以轻松地提取在 fork 中提交的新更改。`<branch>``fork_branch``master``<branch>`

我认为您仍然需要事先确保您的工作副本不包含任何更改。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2017-09-18T23:01:19.527

方法不加遥控器。

```
git checkout --orphan fork_branch
git reset --hard
git pull <url of fork> <branch> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-13T09:56:40.797

我能够使用...做类似的事情

```
git switch -c new_branch
git pull https://github.com/<user>/<forked-repo>.git <branch> 
```

# wpf - WPF：故事板样式返回“无法在不可变对象实例上设置动画'颜色'”。

> ID：14383214
> 
> 赞同：4
> 
> 时间：2013-01-17T16:07:38.157
> 
> 标签：wpf, xaml, animation, user-controls, stackpanel

我有以下 XAML：

```
<UserControl.Resources>
    <SolidColorBrush x:Key="Brush"></SolidColorBrush>

    <Style TargetType="{x:Type StackPanel}" x:Key="ColourChangingStyle">
        <Setter Property="Background" Value="{StaticResource Brush}" />

        <Style.Triggers>
            <DataTrigger Binding="{Binding Path='Stage'}" Value="1">
                <DataTrigger.EnterActions>
                    <BeginStoryboard>
                        <Storyboard>
                            <ColorAnimation Storyboard.Target="{StaticResource Brush}"
                              Storyboard.TargetProperty="Color" From="{StaticResource FirstColor}" To="{StaticResource FinishedColor}" Duration="0:0:10" BeginTime="0:0:0"/>
                        </Storyboard>
                    </BeginStoryboard>
                </DataTrigger.EnterActions>
            </DataTrigger>
        </Style.Triggers>
    </Style>
</UserControl.Resources>

<StackPanel x:Name="InfoPanel" Orientation="Vertical"  Margin="1,2" Style="{DynamicResource ColourChangingStyle}">
 ...
</StackPanel> 
```

而且我不断收到相同的错误：

> 无法在不可变对象实例上为“颜色”设置动画

这是刷子。我查找了问题，并认为这与将刷子绑定到`StackPanel`使其以后无法更改有关。

有没有办法解决这个问题，我真的不知道我的其他相同效果的选择是什么，没有硬编码颜色，并在代码中执行所有事件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T18:02:57.000

似乎您无法为`Brush`in`Resources`设置动画`Storyboard.Target`。但是你可以设置`Background`你的`Style`（你已经这样做了）并为这个属性设置动画。

```
<ColorAnimation Storyboard.TargetProperty="Background.Color"
                From="{StaticResource FirstColor}"
                To="{StaticResource FinishedColor}" 
                Duration="0:0:10" BeginTime="0:0:0" /> 
```

# gnu - 如何在 autotools 配置中检查 shell cmd 的返回值

> ID：14383222
> 
> 赞同：0
> 
> 时间：2013-01-17T16:07:45.427
> 
> 标签：gnu, autoconf, m4

我想在配置过程中运行一个shell命令——如果这个操作的返回值为0，我想使用它。否则，我想退出并显示错误消息。

我写了这样的东西：

```
LOC=$(perl -MExtUtils::Embed -e perl_inc | sed 's/[ \t]*-I//')
RC=$?
AS_IF([ test $RC != 0 ], [AC_MSG_ERROR([Can't find module MExtUtils::Embed in perl. Try installing perl 5.8.8 or above])],) 
```

这行不通。RC 总是得到值 0，即使命令失败。

有谁知道怎么做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T20:48:25.950

问题是你的管道总是成功的，因为`sed`无论 perl 做什么都会成功。一种方法是简单地延迟调用`sed`：

```
LOC=$( perl -MExtUtils::Embed -e perl_inc )
AS_IF([ test $? != 0 ], [AC_MSG_ERROR([...])])
LOC=$( echo "$LOC" | sed 's/[ \t]*-I//' ) 
```

另一方面，它看起来像是`perl_inc`perl 的命令而不是文件的名称，因此简单地将 sed 的替换添加到您的 perl 中可能会更容易。

另一方面，您可能应该只使用来查看是否安装了所需的模块。 [`AX_PROG_PERL_MODULES`](http://www.gnu.org/software/autoconf-archive/ax_prog_perl_modules.html)

# wpf - 将列表框选定项信息传递给用户控件（WPF）

> ID：14383226
> 
> 赞同：3
> 
> 时间：2013-01-17T16:07:59.530
> 
> 标签：wpf, user-controls, listbox, selecteditem

我有一个列表框，每个列表框项都是我制作的自定义用户控件。我已经使用样式来删除列表框项目的所有默认突出显示（即，删除选定项目的蓝色背景突出显示）。

我想要的是能够对我的用户控件做一些特殊的事情来表示列表框项目被突出显示。比如让用户控件上的边框更粗，诸如此类。

如果我可以在用户控件中获取布尔值，我想从那里我可以弄清楚如何对用户控件进行必要的更改......通过转换器或最有可能的东西。

我不确定的是如何将显示用户控件所在的列表框项目是否突出显示的信息传递给用户控件。

有问题的代码是这样的：

```
<ListBox.ItemTemplate>
 <DataTemplate>
  <hei:OrangeUserCtrl DataContext="{Binding}" Height="40" Width="40" />
 </DataTemplate>
</ListBox.ItemTemplate> 
```

如果突出显示它所在的列表框项目，我如何传递给用户控件（最好作为真/假）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:40:06.860

您可以使用`Tag`属性和RelativeSource 绑定。

在我的示例中，当项目突出显示时，我更改了边框属性（`BorderBrush=Red`和`BorderThickness=3`）。

源代码：

保存数据的简单类：

```
class Person
{
   public string Name { get; set; }
   public string Surname { get; set; }
} 
```

列表框：

```
 <ListBox ItemsSource="{Binding}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <local:MyCustomPresenter DataContext="{Binding}" 
                                             Tag="{Binding Path=IsSelected, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=ListBoxItem}, UpdateSourceTrigger=PropertyChanged}"
                                             Height="60" Width="120" />               
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

UserControl 显示自定义数据：

```
<UserControl x:Class="WpfTextWrapping.MyCustomPresenter"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Border Margin="10">
        <Border.Style>
            <Style TargetType="Border">
                <Setter Property="BorderBrush" Value="Green" />
                <Setter Property="BorderThickness" Value="1" />
                <Style.Triggers>
                    <DataTrigger Binding="{Binding Path=Tag, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType=UserControl}, UpdateSourceTrigger=PropertyChanged}" Value="True">
                        <Setter Property="BorderBrush" Value="Red" />
                        <Setter Property="BorderThickness" Value="3" />
                    </DataTrigger>
                </Style.Triggers>
            </Style>
        </Border.Style>

        <StackPanel Orientation="Vertical">
            <TextBlock Text="{Binding Name}" />
            <TextBlock Text="{Binding Surname}" />
        </StackPanel>        
    </Border>
</UserControl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:21:28.950

如果我理解你，你需要添加一个属性到你的自定义`UserControl`绑定到嵌套的`ComboBox`东西，比如：

```
 public object MySelectedItem
    {
        get { return myNestedCombox.SelectedItem; }
        set { myNestedCombox.SelectedItem = value; }
    } 
```

你也需要`NotifyPropertyChanged`。

# java - 价值比较让我感到困惑，无法正常工作

> ID：14383228
> 
> 赞同：0
> 
> 时间：2013-01-17T16:08:06.273
> 
> 标签：java, jakarta-ee

![屏幕截图](../Images/ba83cd20d1fe5ec921293a4f0dfe2b92.png)

我正在比较两个字符串，显然它们不相等，但它们是相等的。我想知道有哪些问题可能导致这种情况，可能是数据类型、我看不到的隐藏内容，或者是什么。任何输入都可能会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:09:01.653

字符串/对象比较应该使用`equals()`，而不是`==`（字符串文字比较的情况除外）

例子：

```
if(string.equals(string2)){
} 
```

`==`检查引用相等，`equals()`检查内容相等。阅读此[讨论](https://stackoverflow.com/questions/7479334/comparing-two-strings-with-when-will-it-work?lq=1)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T16:19:38.010

```
field.trim().equalsIgnoreCase("formDateCreated") 
```

尝试这个。String trim() 方法返回字符串的副本，省略前导和尾随空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T16:10:42.913

```
equalsIgnoreCase(String anotherString) 
```

当您不考虑案例时。此检查天气您的字符串内容是否等于 == 的参考

我建议你检查如下

```
"formDateCreated".equalsIgnoreCase(field) 
```

这样它可以帮助您克服可能的 NullPointerException

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T16:09:24.113

使用`.equals()`方法来检查**字符串是否相等**，例如`field1.equals("formDateCreated")`. `==`运算符只检查两个引用变量是否引用同一个字符串实例。`equals()`方法检查两个字符串是否有意义地相等。

# visual-studio - 缺少 Visual Studio 2012“显示所有文件”按钮

> ID：14383234
> 
> 赞同：51
> 
> 时间：2013-01-17T16:08:25.697
> 
> 标签：visual-studio

在我的解决方案中，我有三个项目：控制台应用程序、类库和网站项目。Show All Files 按钮在控制台和类库项目上可见，但只要我单击网站项目，该按钮就会消失。

我正在运行 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-08-04T07:22:19.520

我刚刚遇到了同样的问题“解决方案资源管理器工具栏丢失”，例如。“显示所有文件”。这是我所做的：

1.  右键单击您的“解决方案”。
2.  选择“新解决方案资源管理器视图”。这将弹出一个新的“解决方案资源管理器”窗口，其中包含工具栏。
3.  关闭您原来的“解决方案资源管理器”窗口。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-10-31T22:20:59.747

单击必须包含目标文件的文件夹，解决方案资源管理器属性将被更改。在那里你可以找到刷新按钮和显示所有文件按钮。

查看这篇文章： [Visual Studio 2012 中改进的解决方案资源管理器以提高生产力](http://www.codeproject.com/Articles/414268/Improved-Solution-Explorer-in-Visual-Studio-2012-t)

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2013-01-17T16:10:55.607

“显示所有文件”未显示在网站项目中，因为它不是必需的，并且所有文件都已显示在解决方案资源管理器中。我认为这种行为对于旧版本的 VS 是一样的

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-11-03T09:52:29.903

在解决方案资源管理器中，单击一个项目，然后将出现“显示所有文件”按钮。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-05-23T18:56:20.523

如果您在网站项目中，默认情况下会显示所有文件。如果有一些缺失（在调试等过程中添加），只需点击解决方案资源管理器顶部的刷新按钮，它们就会出现。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-05-12T18:37:17.970

以上答案都不适合我。如果是这种情况，请尝试右键单击项目中的任何文件，然后选择“显示所有文件”。“显示所有文件”图标现在应该出现在此和所有后续解决方案资源管理器窗口中。

YMMV，善良。:-)

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2015-08-12T17:39:38.150

“显示所有文件”自动隐藏。

单击具有隐藏文件的文件夹，该按钮应显示。

通过单击项目（解决方案下的文件夹），解决方案探索检查是否所有子文件夹都有隐藏文件，这将提示按钮显示。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-07-29T07:39:39.143

如果您想获得显示所有文件菜单，只需隐藏解决方案资源管理器并在视图 => 其他 Windows=> 解决方案资源管理器中打开它并单击它将显示所有文件菜单

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-10T12:12:26.270

如果您在“解决方案资源管理器”中单击解决方案名称，则可能看不到“显示所有文件”按钮。因为可能在解决方案中添加了 F# 或网站项目。如果您想看到“显示所有文件”按钮，您必须单击项目名称，即 C# 或本机 C++ 或 C++.net。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-10-04T09:17:39.867

尝试使用**ctrl+alt+a**打开任何文件 。一旦文件打开，“**显示全部**”按钮将自动出现。

# csv - 从 csv 中删除不需要的逗号

> ID：14383235
> 
> 赞同：4
> 
> 时间：2013-01-17T16:08:25.443
> 
> 标签：csv

例如，有“2,881,423”，如何从中删除“，”。我有数百万数据需要完成。是否可以进行批量操作？因此，我可以将任何工具用于 PC 或 Mac。

```
"Position","Value",
"1","1",
"2","1",
"3","1",
"4","2",
"5","2", 
```

...

```
"2,881,423","19",
"2,881,424","22",
"2,881,425","23",
"2,881,426","23",
"2,881,427","25",
"2,881,428","25",
"2,881,429","25", 
```

...

像上面一样是来自 csv 的一些片段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T08:01:46.013

以下代码将完成这项工作 - 它将遍历文件夹中具有给定掩码的所有文件：

```
Sub RemoveCommas()

Dim RegX_Comma As Object
'
Dim FileStream As Object
Dim FileContent As String
Dim SourceFolder As String
Dim FileName As String
'
Set RegX_Comma = CreateObject("VBScript.RegExp")
RegX_Comma.Pattern = "(?<=\d),(?=\d)" 'Comma between any digits
RegX_Comma.IgnoreCase = True
RegX_Comma.Global = True

Set FileStream = CreateObject("ADODB.Stream")
SourceFolder = "D:\DOCUMENTS\" 'Must be specified with trailing "\"

FileName = Dir(InputFolder & "*.txt") 'Specify ANY mask using wildcards, e.g. "*.csv*
Do While FileName <> ""

    FileStream.Open
    FileStream.Charset = "ASCII" 'Change encoding as required
    FileStream.LoadFromFile (SourceFolder & FileName)
    FileContent = RegX_Comma.Replace(FileStream.ReadText, "")
    FileStream.Position = 0
    FileStream.WriteText FileContent
    FileStream.SetEOS
    FileStream.SaveToFile SourceFolder & FileName, 2 'Will overwrite the existing file
    FileStream.Close

FileName = Dir
Loop

End Sub 
```

根据内联注释对代码进行必要的修改。

祝你好运！）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-20T08:25:16.477

在 Python 中：

```
import csv
with open("myfile.csv", "rb") as infile, open("output.csv", "wb") as outfile:
    reader = csv.reader(infile)
    writer = csv.writer(outfile)
    for row in reader:
        writer.writerow(item.replace(",", "") for item in row) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-23T00:04:29.473

由于您的目标是使用 R 中的数据，因此您可以在将数据读入 R 后进行替换：

```
df <- Path/To/File.csv
df$varname <- as.numeric(gsub(",", "", df$varname)) 
```

`df`您的数据框在哪里，并且`varname`是变量的名称。这不会检查逗号是否在两位数之间，因此您需要确保仅将您希望为数字的变量传递给此变量，而不是逗号实际上是数据一部分的任何字符串列。

这是一个类似的问题，询问如何从 R 中解决问题：

[当某些数字包含逗号作为千位分隔符时如何读取数据？](https://stackoverflow.com/questions/1523126/how-to-read-data-when-some-numbers-contain-commas-as-thousand-separator)

# r - 在R中的同一张图上绘制两个不同的系列

> ID：14383237
> 
> 赞同：0
> 
> 时间：2013-01-17T16:08:29.227
> 
> 标签：r, plot

我正在尝试将两个时间序列绘制到 R 中的同一个图中。

我的数据如下：

系列一：

```
 dates            values
1 2012-09-01 12:00:00   33.6
2 2012-09-05 13:00:00   32.0
3 2012-09-06 15:30:00   30.0
4 2012-09-07 12:45:00   30.0
5 2012-09-08 21:15:00   30.0
6 2012-09-11 15:00:00   28.4 
```

系列2：

```
 dates           values
1 2012-09-03 14:05:00  15.6
2 2012-09-05 08:00:00  23.0
3 2012-09-09 15:55:00  19.0
4 2012-09-11 23:00:00  22.0
5 2012-09-14 02:40:00  34.0
6 2012-09-15 12:09:00  29.4 
```

我拥有的代码是：

```
var1<-var1[,c("Sampling_Time","Value")]
var2<-var2[,c("Sampling_Time","Value")]

var1$Sampling_Time<- as.POSIXct(var1$Sampling_Time, format="%Y-%m-%d %H:%M:%S")
var2$Sampling_Time<- as.POSIXct(var2$Sampling_Time, format="%Y-%m-%d %H:%M:%S")

plot(var1$Sampling_Time, var1$Value, type= "p" , xlim= NULL, col = "red", size =1,
xlab= "Time",ylab= "Value", main= "Graphic",format="%Y-%b-%d")
par(new=TRUE)
plot(var2$Sampling_Time, var2$Value, type= "p" , xlim= NULL, col = "blue", size =1,
xlab= "Time",ylab= "Value", main= "Graphic",format="%Y-%b-%d") 
```

我想用相同的 x 轴按时间顺序绘制这两个系列，它们的比例相同，我的意思是在一个独特的按时间顺序排列的 x 轴上。

我怎样才能最好地在 R 中实现这一点？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:28:34.953

您需要在绘图中的 x 和 y 范围的限制之前定义，并且您需要对每个绘图具有相同的限制。

```
var1S <- c("2012-09-01", "2012-09-05", "2012-09-06", "2012-09-07", "2012-09-08", "2012-09-11")
var1S <- as.Date(var1S, "%Y-%m-%d")
var1T <- c(33.6,32.0,30.0,30.0,30.0,28.4)
var2S <- c("2012-09-03", "2012-09-05", "2012-09-09", "2012-09-11", "2012-09-14", "2012-09-15")
var2S <- as.Date(var2S, "%Y-%m-%d")
var2T <- c(15.6,23.0,19.0,22.0,34.0,29.4)
plot(var1T ~ var1S, type="l",col="red", xlim=range(c(var1S,var2S)), ylim=range(c(var1T,var2T)))
par(new=T)
plot(var2T ~ var2S, type="l",col="green", xlim=range(c(var1S,var2S)), ylim=range(c(var1T,var2T))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:53:05.010

```
plot(var1T ~ var1S, type="l",col="red", xlim=c(min(var1S, var2S), max(var1S, var2S)), ylim=c(min(var1T, var2T), max(var1T, var2T)), xlab=NA, ylab=NA)
par(new=TRUE)
plot(var2T~ var2S, type="l", col="green", xlim=c(min(var1S, var2S), max(var1S, var2S)), ylim=c(min(var1T, var2T), max(var1T, var2T)), xlab=NA, ylab=NA) 
```

# linux - 了解 Linux 内核循环缓冲区

> ID：14383238
> 
> 赞同：11
> 
> 时间：2013-01-17T16:08:31.620
> 
> 标签：linux, concurrency, circular-buffer, memory-barriers

有一篇文章在：[http](http://lwn.net/Articles/378262/) ://lwn.net/Articles/378262/描述了 Linux 内核循环缓冲区的实现。我有一些问题：

这里是“生产者”：

```
spin_lock(&producer_lock);

unsigned long head = buffer->head;
unsigned long tail = ACCESS_ONCE(buffer->tail);

if (CIRC_SPACE(head, tail, buffer->size) >= 1) {
    /* insert one item into the buffer */
    struct item *item = buffer[head];

    produce_item(item);

    smp_wmb(); /* commit the item before incrementing the head */

    buffer->head = (head + 1) & (buffer->size - 1);

    /* wake_up() will make sure that the head is committed before
     * waking anyone up */
    wake_up(consumer);
}

spin_unlock(&producer_lock); 
```

问题：

1.  既然这段代码明确地处理了内存排序和原子性，那么 spin_lock() 的意义何在？
2.  到目前为止，我的理解是 ACCESS_ONCE 停止编译器重新排序，对吗？
3.  producer_item(item) 是否简单地发出与该项目相关的所有写入？
4.  我相信 smp_wmb() 保证produce_item(item) 中的所有写入都在随后的“发布”写入之前完成。真的？
5.  我获得此代码的页面上的评论似乎暗示在更新头索引后通常需要 smp_wmb() ，但 wake_up(consumer) 会这样做，因此没有必要。真的吗？如果是，为什么？

这里是“消费者”：

```
spin_lock(&consumer_lock);

unsigned long head = ACCESS_ONCE(buffer->head);
unsigned long tail = buffer->tail;

if (CIRC_CNT(head, tail, buffer->size) >= 1) {
    /* read index before reading contents at that index */
    smp_read_barrier_depends();

    /* extract one item from the buffer */
    struct item *item = buffer[tail];

    consume_item(item);

    smp_mb(); /* finish reading descriptor before incrementing tail */

    buffer->tail = (tail + 1) & (buffer->size - 1);
}

spin_unlock(&consumer_lock); 
```

特定于“消费者”的问题：

1.  smp_read_barrier_depends() 有什么作用？从论坛中的一些评论来看，您似乎可以在此处发布 smp_rmb()，但在某些架构上，这是不必要的（x86）且过于昂贵，因此创建了 smp_read_barrier_depends() 来选择性地执行此操作......也就是说，我真的不明白为什么 smp_rmb() 是必要的！
2.  smp_mb() 是否可以保证它之前的所有读取在它之后的写入之前完成？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T17:39:37.220

对于生产者：

1.  这里`spin_lock()`是为了防止两个生产者同时尝试修改队列。
2.  `ACCESS_ONCE`确实可以防止重新排序，它还可以防止编译器稍后重新加载该值。（有[一篇关于`ACCESS_ONCE`LWN](https://lwn.net/Articles/508991/)的文章对此进行了进一步扩展）
3.  正确的。
4.  也正确。
5.  在唤醒消费者之前需要这里的（隐含的）写屏障，否则消费者可能看不到更新的`head`值。

消费者：

1.  `smp_read_barrier_depends()`是数据依赖屏障，它是读取屏障的较弱形式（参见[2](http://kernel.org/doc/Documentation/memory-barriers.txt)）。这种情况下的效果是确保`buffer->tail`在将其用作 中的数组索引之前读取它`buffer[tail]`。
2.  `smp_mb()`这是一个完整的内存屏障，确保此时提交所有读取和写入。

附加参考：

*   [关于内存屏障的 Linux 内核文档](http://kernel.org/doc/Documentation/memory-barriers.txt)

（注意：我不完全确定我对生产者 5 和消费者 1 的答案，但我相信它们是事实的近似值。我强烈建议阅读有关内存障碍的文档页面，因为它更多比我在这里写的任何东西都全面。）

# maven - 将 CodeNarc 与 Maven 一起使用

> ID：14383239
> 
> 赞同：2
> 
> 时间：2013-01-17T16:08:35.250
> 
> 标签：maven, groovy, jenkins, rules, codenarc

我正在尝试将 CodeNarc 与基于 Maven 的 Groovy 项目集成。CodeNarc Maven 插件站点上的文档很少。我想了解的使用方面是：

*   如何指向自定义规则集以及在项目中放置它们的位置？
*   如果违反任何规则，如何使 Jenkins 构建失败。

目前我可以使用命令运行 C​​odeNarc

> mvn codenarc:codenarc

当我将“报告”部分添加到 POM 文件中时（如[http://www.mojohaus.org/codenarc-maven-plugin/usage.html](http://www.mojohaus.org/codenarc-maven-plugin/usage.html)所述）并运行

> mvn网站

不会生成 CodeNarc 报告。我收到此警告

> [警告] 没有为项目定义 URL - 装饰链接将无法解析

但不清楚它与 CodeNarc 的关系在哪里。

将 CodeNarc 与 Maven 一起使用的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-25T10:07:38.957

我刚做了，以防你仍然需要小费。您可以通过在“build”->“plugins”->“plugin”下创建“plugin”条目来挂钩插件的执行。这就是我所拥有的。

```
<build>
  <plugins>
    <plugin>
      <groupId>org.codehaus.mojo</groupId>
      <artifactId>codenarc-maven-plugin</artifactId>
      <version>0.18-1</version>
      <configuration>
        <sourceDirectory>${project.basedir}/src/main/groovy</sourceDirectory>
        <maxPriority1Violations>0</maxPriority1Violations>
        <maxPriority2Violations>0</maxPriority2Violations>
        <maxPriority3Violations>0</maxPriority3Violations>
      </configuration>
      <executions>
        <execution>
          <phase>prepare-package</phase>
          <goals>
            <goal>codenarc</goal>
          </goals>
        </execution>
      </executions>
    </plugin>
    ...
  </plugins>
</build> 
```

请注意“maxPriority_Violations”值。这就是在违规情况下导致构建失败的原因。

我不使用任何自定义规则，但您似乎可以通过设置“rulesetfiles”配置选项来定义自己的规则。在此处查看配置选项：[http ://www.mojohaus.org/codenarc-maven-plugin/codenarc-mojo.html](http://www.mojohaus.org/codenarc-maven-plugin/codenarc-mojo.html)

具有此配置的项目示例：[https ://github.com/tveronezi/faceid/tree/master/faceid-web](https://github.com/tveronezi/faceid/tree/master/faceid-web)

# java - 使用 RestTemplate (3.1) 进行基本身份验证

> ID：14383240
> 
> 赞同：7
> 
> 时间：2013-01-17T16:08:36.550
> 
> 标签：java, spring-mvc, basic-authentication, apache-httpclient-4.x, resttemplate

我正在尝试使用 Java 重现以下 curl 命令：

```
curl -v -u user:pass http://myapp.com/api 
```

此命令返回一些 JSON 数据。

我的错误Java实现如下：

```
@Test
public void callTest() {
    RestTemplate restTemplate = createRestTemplate("user", "pass");
    URI uri = new URI("http://myapp.com/api");
    String res = restTemplate.getForObject(uri, String.class);
}

private static RestTemplate createRestTemplate(String username, String password) {

    UsernamePasswordCredentials cred = new UsernamePasswordCredentials(username, password);
    BasicCredentialsProvider cp = new BasicCredentialsProvider();
    cp.setCredentials(AuthScope.ANY, cred);
    DefaultHttpClient client = new DefaultHttpClient();
    client.setCredentialsProvider(cp);
    ClientHttpRequestFactory factory = new HttpComponentsClientHttpRequestFactory(client);

    RestTemplate restTemplate = new RestTemplate(factory);
    // set the media types properly
    return restTemplate;
} 
```

然而，当我执行测试时，它返回一个`org.springframework.web.client.HttpClientErrorException: 401 Unauthorized`异常。

登录时`DEBUG`，我看不到有关身份验证的信息...

设置身份验证凭据时我做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-12-08T00:22:55.127

使用实例化

```
HttpClient client = new HttpClient(); 
```

不再存在，并且从**版本 4.3的****HttpComponents HttpClient**`DefaultHttpClient`中弃用了类。因此，其他答案无效或已弃用。这是我的版本，我为需要基本身份验证的休息请求编写了这个类：

 ****```
import org.apache.http.auth.AuthScope;
import org.apache.http.auth.UsernamePasswordCredentials;
import org.apache.http.client.CredentialsProvider;
import org.apache.http.client.HttpClient;
import org.apache.http.impl.client.BasicCredentialsProvider;
import org.apache.http.impl.client.HttpClients;
import org.springframework.http.client.HttpComponentsClientHttpRequestFactory;
import org.springframework.web.client.RestTemplate;

public class RestClient extends RestTemplate {
    public RestClient(String username, String password) {
        CredentialsProvider credsProvider = new BasicCredentialsProvider();
        credsProvider.setCredentials(
                new AuthScope(null, -1),
                new UsernamePasswordCredentials(username, password));
        HttpClient httpClient = HttpClients.custom().setDefaultCredentialsProvider(credsProvider).build();
        setRequestFactory(new HttpComponentsClientHttpRequestFactory(httpClient));
    }
} 
```

然后像这样使用它，例如：

```
RestClient restClient = new RestClient("username", "password");

String result = restClient.postForObject(... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T12:46:41.967

我做了这样的事情 - 它对我有用：

```
private RestTemplate createRestTemplate(String username, String password) {
    return new RestTemplate(this.createSecureTransport(username, password));
}

protected ClientHttpRequestFactory createSecureTransport(String username, String password){
    HttpClient client = new HttpClient();
    UsernamePasswordCredentials credentials = new UsernamePasswordCredentials(username,password);
    client.getState().setCredentials(AuthScope.ANY, credentials);
    CommonsClientHttpRequestFactory commons = new CommonsClientHttpRequestFactory(client);

    return commons;
} 
```

此处使用：[参考代码](https://github.com/cts2/cts2-framework/blob/master/core/src/main/java/edu/mayo/cts2/framework/core/client/Cts2RestClient.java)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-25T22:24:40.787

httpclient v4.0 不支持抢先认证

看这个： http: [//forum.springsource.org/showthread.php?123385-Preemptive-Basic-Authentication-with-RestTemplate](http://forum.springsource.org/showthread.php?123385-Preemptive-Basic-Authentication-with-RestTemplate)

在 spring Source 中找到了这个解决方案。

这个对我有用。

看这个：[RestTemplate with Basic Auth in Spring 3.1](https://stackoverflow.com/questions/9048812/resttemplate-with-basic-auth-in-spring-3-1)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-24T15:25:35.027

此答案基于@kevinpeterson 的答案，但经过重写以使用更新的 Apache HTTP 客户端。

```
RestTemplate createRestTemplate(String username, String password, String host, int port ) {
    return new RestTemplate(this.createSecureTransport( username, password, host, port ));
}

ClientHttpRequestFactory createSecureTransport( String username, String password, String host, int port ){
    DefaultHttpClient client = new DefaultHttpClient();
    UsernamePasswordCredentials credentials = new UsernamePasswordCredentials( username, password );
    client.getCredentialsProvider().setCredentials( new AuthScope( host, port ), credentials );
    return new HttpComponentsClientHttpRequestFactory(client); 
```****

# java - 为什么 Java FTP 客户端的传输速率差异如此之大

> ID：14383243
> 
> 赞同：5
> 
> 时间：2013-01-17T16:08:39.757
> 
> 标签：java, apache, ftp

也许有人可以回答我这个问题。在我最近的工作中，我注意到我的应用程序（通过 FTP 下载更新）在与 Linux 一起使用时非常慢。我在 Mac 上开发这些东西，所以我之前没有注意到这个问题，因为在 Mac OS 下下载速度感觉不是很低。但是当迁移到 Linux 时，应用程序的行为就完全不同了。

FTP 服务器（在 Ubuntu 服务器上运行的纯 FTP）与客户端连接到同一个 LAN，因此不考虑互联网速度问题。由于性能低，我将 Apache FTPClient 更改为 edtFTPj/Free。差异仍然显着，但可以接受。作为测试用例，我总是下载大小约为 30 MB 的相同文件。然后我检查了 ftp 服务器日志以了解传输速率。

你自己看。提到的 VMWare 在 Mac 上运行。除非另有说明，Java 是 Oracle Java 1.7。

## 阿帕奇公共网络 2.3

代码看起来像这样

```
 FTPClient ftp = new FTPClient();
  ftp.connect("srv0006");
  ftp.login("anonymous", "asd");
  ftp.setFileType(FTP.BINARY_FILE_TYPE);
  File target = new File("/tmp/pub.tar");
  FileOutputStream fos = new FileOutputStream(target);
  ftp.retrieveFile("/pub.tar", fos);
  fos.close(); 
```

以下是 ftp 日志的结果

### Mac OS 从 IntelliJ Idea 开始

```
downloaded  (30452736 bytes, 21200.67KB/sec) 
```

### Mac OS 从 shell 启动

```
downloaded  (30452736 bytes, 21471.75KB/sec) 
```

### Windows 7（在 VMWare 中）

```
downloaded  (30452736 bytes, 65243.15KB/sec) 
```

### OpenSuse 运行 Oracle Java（在 VMWare 中）

```
downloaded  (30452736 bytes, 5274.56KB/sec) 
```

### OpenSuse 运行 OpenJDK（在 VMWare 中）

```
downloaded  (30452736 bytes, 7663.68KB/sec) 
```

### Ubuntu 12.04.1 LTS

在通过千兆以太网连接到同一 LAN 的另一台 PC 上运行。其他 Ubuntu 机器的行为方式完全相同。我在 20 分钟后退出了转移。查看传输速率。

```
downloaded  (7077888 bytes, 6.10KB/sec) 
```

## edtFTP4j 2.4.0

在此之后，我搬到了 edtFTP4j。结果好多了。

```
 FileTransferClient ftp = new FileTransferClient();
  ftp.setRemoteHost("srv0006");
  ftp.setUserName("anonymous");
  ftp.setPassword("asd");
  ftp.connect();
  ftp.downloadFile("/tmp/pub.tar", "/pub.tar");
  ftp.disconnect(); 
```

结果发生了显着变化：

### Mac OS 从 IntelliJ Idea 开始

```
downloaded  (30452736 bytes, 109431.60KB/sec) 
```

### Mac OS 从 shell 启动

```
downloaded  (30452736 bytes, 110333.66KB/sec) 
```

### Windows 7（在 VMWare 中）

```
downloaded  (30452736 bytes, 91318.64KB/sec) 
```

### OpenSuse 运行 Oracle Java（在 VMWare 中）

```
downloaded  (30452736 bytes, 89312.46KB/sec) 
```

### OpenSuse 运行 OpenJDK（在 VMWare 中）

```
downloaded  (30452736 bytes, 89041.05KB/sec) 
```

### Ubuntu 12.10（在 VMWare 中）

```
downloaded  (30452736 bytes, 81154.99KB/sec) 
```

### Ubuntu 12.04.1 LTS 在 i5 笔记本、Wifi (50 MBit/s) 上运行

```
downloaded  (30452736 bytes, 2883.84KB/sec) 
```

### 在 i5 笔记本电脑、千兆以太网上运行的 Ubuntu 12.04.1 LTS

```
downloaded  (30452736 bytes, 93822.44KB/sec) 
```

### Ubuntu 12.04.1 LTS

在前面提到的 PC 上运行（传输速率为 6.10 KB/sec 的 PC）

```
downloaded  (30452736 bytes, 11633.38KB/sec) 
```

我不明白这一点。谁知道这里发生了什么？

再见，托斯滕...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:59:12.540

有太多事情要从一些代码中查明它。

它可以是您的默认网络数据包大小 (MTU)、硬件基础设施、JVM、操作系统配置等。

你需要在更高的水平上玩很多小东西。诸如在硬件/操作系统级别检查您的 MTU 大小并将其与 API 套接字创建的默认设置相对应之类的事情。您的基础设施是否缓冲或具有窗口缩放或进行自动病毒检查。

我相信 Net Commons 缓冲区大小默认为 1024，您可以使用它。

除此之外，您需要进入嗅探器并查看发生了什么。可能是开关配置不正确，并且与一个 API 相比，另一个更好地工作。

希望我能给你一个更好的答案，但说到网络性能，它本身就是一个研究领域......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:55:56.357

在很多系统上，FTP的被动模式和主动模式也会有很大的不同；特别是当服务器只承认一种模式而客户端默认尝试使用另一种模式时。如果我没记错的话，主动模式比被动模式稍快，但使用禁止模式很容易将传输速度减慢一百或一千倍以上；如果不是简单地阻止。

即使这两种模式都被允许，防火墙也可以经常减慢被动模式，同时保持主动模式不变（或者它是相反的？）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T18:19:26.967

罪魁祸首之一是不同平台上的套接字发送和接收缓冲区大小。在 Windows 上，这些设置非常低，为 8k，这极大地限制了 TCP 吞吐量。一些 Windows 服务器版本将这些设置为巨大的值；不要问我是哪个。Unix 和 Linux 平台的合理值约为 43-48k。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-09T22:37:59.350

我推测真正的答案是没有人开发出快速复制命令。

要拥有“最终复制/传输”命令，它需要主动监控事物并适应环境。

例如。copy(ref,ref) .. 为了让这个速度更快，你不能使用 C 作为初学者，你需要使用像动态语言这样的东西，它可以选择 C ​​性能。很少有这样的语言存在。

“ref”是对任何内容的引用，复制命令是针对机器特定分支的 JIT，该分支根据源和目标选择适当的路径。

因此，根据 ref 在运行时的最终结果，实际命令可能是尝试多个路由*到*memcpy的自适应网络传输*与*仅添加新引用之间的任何命令（如果 src 是不可变的并且目标在同一个进程中并且 src 可访问它）。

# javascript - 使用访问表单中的文本区域

> ID：14383248
> 
> 赞同：0
> 
> 时间：2013-01-17T16:08:51.093
> 
> 标签：javascript, events, dom, onblur, onfocus

请您就以下问题提供建议：

我有一个注册表单，其中有一个文本区域

```
<form id="register" name="register" method="post" action="register.php">

<textarea rows="5" id="bio" name="bio" method="post">Biographical information</textarea>

</form> 
```

使用 java 脚本，我一直在尝试为 onfocus 和 onblur 事件创建一个事件处理程序，以便在焦点上删除默认文本并在模糊时恢复，如下所示：

```
var bioField = document.getElementById("bio");

bioField.onfocus = function() {
    if (bioField.value == "Biographical information") {
        bioField.value = "";
    }
};

bioField.onblur = function() {
    if (bioField.value == "") {
        bioField.value = "Biographical information";
    }
}; 
```

我认为通过 id 获取元素会起作用，但似乎不是。不存在其他名称/身份重复。

非常感谢任何帮助。多谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:10:29.250

使用占位符属性：

```
<textarea rows="5" id="bio" name="bio" method="post" placeholder="Biographical information"></textarea> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:14:53.830

它工作正常，也许问题是占位符默认为“传记信息”，而脚本正在测试“关于你的一切”。您在我发布此内容时所做的更改正是您所需要的。

```
var bioField = document.getElementById("bio");

bioField.onfocus = function() {
    if (bioField.value == "Biographical information") {
        bioField.value = "";
    }
};

bioField.onblur = function() {
    if (bioField.value == "") {
        bioField.value = "Biographical information";
    }
}; 
```

[http://jsfiddle.net/YeaTQ/1/](http://jsfiddle.net/YeaTQ/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T17:31:12.680

You have two solutions:

1.  In order to not use the javascript code you wrote, Use the following code:

    `<textarea cols="30" rows="5" id="bio" name="bio" onfocus="this.value = '' " onblur="this.value = 'All about you'">Biographical information</textarea>`

2.  I think the javascript code is located before control (in the header I guess), Because of this, the onfocus and onblur properties are not initialized. You'll have to put the script at the end of the document (before the tag).
    Also, you script is searching for another text ("All about you") and not the current text that's inside ("Biographical information"). Even if you insert the javascript code at the of the document, the code it will work.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T16:20:58.547

我有根据的猜测是，您已将代码按原样放入`<script>`内部标签中，`<head>`因此当脚本运行时，表单尚未加载。

将您`<script>`的表格移到表格下方或使用以下内容包装所有内容`window.onload`：

```
window.onload = function(){
   // Code goes here
}; 
```

# jquery - 在隐藏的 DIV 中打印图像在 Chrome 中失败

> ID：14383253
> 
> 赞同：2
> 
> 时间：2013-01-17T16:09:00.717
> 
> 标签：jquery, asp.net-mvc, google-chrome, jqprint, waitforimages

铬 24

我现在正在重写一个网站，它有一些奇怪的功能。有一个页面，用户可以在其中获得选择要打印的图像的选项列表。

用户选中他们想要的图像的复选框，然后单击一个按钮，该按钮向服务器进行回调，并将给定的图像注入所需的 HTML 到隐藏的 DIV 中。

更复杂一点的是，图像 src 属性实际上是指向 .NET MVC 服务器端操作的链接，用于从数据库中检索图像，我们在该数据库中抓取图像，然后在图像上的几个不同位置呈现一些文本。

输出 HTML 最终看起来像这样。

```
<div style="visibility: hidden;">
    <div id="PrintArea">
         <div><img width="1000" src="/Controller/GetImage/2"></div>
        <div><img width="1000" src="/Controller/GetImage/3"></div>
        <div><img width="1000" src="/Controller/GetImage/5"></div>
    </div>    
</div> 
```

这是 javascript 中的第一步，将 ajax 回调到服务器以填充此 PrintArea DIV。在此之后，我们执行以下操作：

```
//Print
$('#PrintArea').waitForImages(function () {
    $("#PrintArea").jqprint({ importCSS: true });
    //$.unblockUI();
}); 
```

为了适应服务器端加载图像，我们使用 waitForImages jquery 插件，然后使用 jqprint 打印内容。

为了完成这个等式，我们有一个打印样式表（主样式表是 media="screen" 所以它应该是唯一的样式表）。

```
body * {
    visibility:hidden;
  }

#PrintArea, #PrintArea * { visibility: visible; }

#PrintArea { position: absolute;left: 0;top: 0; }

img { display: block !important; } 
```

这在 Firefox 和 IE 中运行良好。

Chrome 无法*始终如一*地工作。What will happen is that when three images are selected the first two will be displayed but the third which should go on a second page *sometimes* is displayed and printed, but other times is not. 它似乎是零星的，非常随机的。

有什么建议或想法或如何让 Chrome 在分页符之间始终如一地打印图像？我们内部的想法是 Chrome 的打印预览窗口实际上是在 waitForImages 调用完成之前呈现的，因此内容没有显示，但我还没有想出一个具体的测试方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T22:13:19.883

也许尝试窗口加载：

```
$(window).load(function() {
    // executes when complete page is fully loaded, including all frames, objects and images
    $('#PrintArea').waitForImages(function () {
        $("#PrintArea").jqprint({ importCSS: true });
        //$.unblockUI();
    });
}); 
```

窗口加载事件在整个页面完全加载后执行，包括所有框架、对象和图像。因此，涉及图像或其他页面内容的函数应放置在窗口或内容标签本身的加载事件中。

**来源：http:** [//4loc.wordpress.com/2009/04/28/documentready-vs-windowload/](http://4loc.wordpress.com/2009/04/28/documentready-vs-windowload/)

**关于 chrome 问题：http:** [//forum.jquery.com/topic/document-ready-and-window-onload-difference](http://forum.jquery.com/topic/document-ready-and-window-onload-difference)

希望能帮助到你 ！

# c# - 非无限递归字符串搜索中的 StackOverflowException

> ID：14383255
> 
> 赞同：3
> 
> 时间：2013-01-17T16:09:06.777
> 
> 标签：c#, tail-recursion, stack-overflow

**背景。** 我的脚本在递归搜索大字符串中的特定文本时遇到 StackOverflowException。循环不是无限的；问题发生在 9,000-10,000 次合法搜索之间（对于特定搜索）——我需要它继续下去。我正在使用尾递归（我认为），这可能是我的问题的一部分，因为我认为 C# 做得不好。但是，我不确定如何避免在我的情况下使用尾递归。

**问题）。**为什么会发生 StackOverflowException？我的整体方法有意义吗？如果设计很糟糕，我宁愿从那里开始，而不仅仅是避免异常。但是如果设计是可以接受的，我能对 StackOverflowException 做些什么呢？

**代码。** 我编写的类在大量文本（约 6MB）中搜索联系人（来自指定列表的约 500 多个）。我使用的策略是搜索姓氏，然后在姓氏之前或之后不久的某处寻找名字。我需要在给定文本中找到每个联系人的每个实例。StringSearcher 类有一个递归方法，可以继续搜索联系人，只要找到一个就返回结果，但会跟踪搜索中断的位置。

我以下列方式使用这个类：

```
StringSearcher searcher = new StringSearcher(
    File.ReadAllText(FilePath),
    "lastname",
    "firstname",
    30
);

string searchResult = null;
while ((searchResult = searcher.NextInstance()) != null)
{
    // do something with each searchResult
} 
```

总的来说，该脚本似乎有效。大多数联系人返回我期望的结果。但是，当主要搜索字符串非常常见（数千次点击）而辅助搜索字符串从不或很少出现时，似乎会出现此问题。我知道它没有卡住，因为 CurrentIndex 正在正常推进。

这是我正在谈论的递归方法。

```
public string NextInstance()
{
    // Advance this.CurrentIndex to the next location of the primary search string
    this.SearchForNext();

    // Look a little before and after the primary search string
    this.CurrentContext = this.GetContextAtCurrentIndex();

    // Primary search string found?
    if (this.AnotherInstanceFound)
    {
        // If there is a valid secondary search string, is that found near the
        // primary search string? If not, look for the next instance of the primary
        // search string
        if (!string.IsNullOrEmpty(this.SecondarySearchString) &&
            !this.IsSecondaryFoundInContext())
        {
            return this.NextInstance();
        }
        // 
        else
        {
            return this.CurrentContext;
        }
    }
    // No more instances of the primary search string
    else
    {
        return null;
    }
} 
```

StackOverflowException 发生`this.CurrentIndex = ...`在以下方法中：

```
private void SearchForNext()
{
    // If we've already searched once, 
    // increment the current index before searching further.
    if (0 != this.CurrentIndex)
    {
        this.CurrentIndex++;
        this.NumberOfSearches++;
    }

    this.CurrentIndex = this.Source.IndexOf(
            this.PrimarySearchString,
            ValidIndex(this.CurrentIndex),
            StringComparison.OrdinalIgnoreCase
    );

    this.AnotherInstanceFound = !(this.CurrentIndex >= 0) ? false : true;
} 
```

如果需要，我可以包含更多代码。让我知道这些方法或变量之一是否有问题。

*性能并不是一个真正的问题，因为这可能会在晚上作为计划任务运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:25:44.420

你有一个 1MB 的堆栈。当该堆栈空间用完并且您仍然需要更多堆栈空间时，`StackOverflowException`就会抛出一个。这可能是也可能不是无限递归的结果，运行时不知道。无限递归只是使用更多可用堆栈空间的一种有效方法（通过使用无限量）。你可以使用一个有限的数量，恰好超过可用的数量，你会得到同样的例外。

虽然还有其他方法可以使用大量堆栈空间，但递归是最有效的方法之一。每种方法都基于该方法的签名和局部变量添加更多空间。深度递归会占用大量堆栈空间，因此如果您希望深度超过几百级（甚至很多），您可能不应该使用递归。请注意，任何使用递归的代码都可以迭代编写，或者使用显式的`Stack`.

很难说，因为没有显示完整的实现，但根据我所看到的，您或多或少地编写了一个迭代器，但您没有使用 C# 构造（即`IEnumerable`）。

我的猜测是“迭代器块”将允许您使该算法更易于编写，更易于以非递归方式编写，并且从调用者方面更有效。

以下是如何将此方法构造为迭代器块的高级视图：

```
public static IEnumerable<string> SearchString(string text
    , string firstString, string secondString, int unknown)
{
    int lastIndexFound = text.IndexOf(firstString);

    while (lastIndexFound >= 0)
    {
        if (secondStringNearFirst(text, firstString, secondString, lastIndexFound))
        {
            yield return lastIndexFound.ToString();
        }
    }
}

private static bool secondStringNearFirst(string text
    , string firstString, string secondString, int lastIndexFound)
{
    throw new NotImplementedException();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T16:27:02.217

似乎递归在这里不是正确的解决方案。通常对于递归问题，您有一些状态传递给递归步骤。在这种情况下，你真的有一个简单的`while`循环。下面我将您的方法主体放在一个循环中，并将递归步骤更改为`continue`. 看看有没有效果...

```
public string NextInstance()
{
    while (true)
    {
        // Advance this.CurrentIndex to the next location of the primary search string
        this.SearchForNext();

        // Look a little before and after the primary search string
        this.CurrentContext = this.GetContextAtCurrentIndex();

        // Primary search string found?
        if (this.AnotherInstanceFound)
        {
            // If there is a valid secondary search string, is that found near the
            // primary search string? If not, look for the next instance of the primary
            // search string
            if (!string.IsNullOrEmpty(this.SecondarySearchString) &&
                !this.IsSecondaryFoundInContext())
            {
                continue; // Start searching again...
            }
            // 
            else
            {
                return this.CurrentContext;
            }
        }
        // No more instances of the primary search string
        else
        {
            return null;
        }
    }
} 
```

# php - 在 htaccess / php 中传递动态变量

> ID：14383258
> 
> 赞同：8
> 
> 时间：2013-01-17T16:09:09.403
> 
> 标签：php, .htaccess

我创建了一个动态站点，并且信息（区域/类别/子类别）通过 htaccess 传递以获取漂亮的 URL。例如，当用户潜入类别时，其流程如下：

```
/parts/hard-drives

/parts/hard-drives/hard-drives-sas 
```

我想知道是否有一种方法可以从那时起在 htaccess 中扩展它，以便我可以传递更多项目并使用 php 获取变量，即：

```
/parts/hard-drives/hard-drives-sas/?manufacturer=dell&price=20 
```

我当前的 htaccess 文件行如下：

```
RewriteRule ^parts/([^/\.]+)/([^/\.]+)/?$ parts.php?p=$1&f=$2 [L]
RewriteRule ^parts/([^/\.]+)/?$ parts.php?p=$1 [L]
RewriteRule ^parts parts.php [L] 
```

您将看到第一行与`/products/hard-drives/hard-drives-sas`第二行相关`/products/hard-drives`，然后只是一个部件页面`/parts`

希望这是有道理的！

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T16:12:00.140

使用`QSA`flag 传递 GET 变量：

```
RewriteRule ^parts/([^/\.]+)/([^/\.]+)/?$ parts.php?p=$1&f=$2 [L,QSA]
RewriteRule ^parts/([^/\.]+)/?$ parts.php?p=$1 [L,QSA]
RewriteRule ^parts parts.php [L,QSA] 
```

文件：

> 当替换 URI 包含查询字符串时，RewriteRule 的默认行为是丢弃现有的查询字符串，并将其替换为新生成的查询字符串。使用 [QSA] 标志会合并查询字符串。
> 
> 考虑以下规则：
> 
> `RewriteRule /pages/(.+) /page.php?page=$1 [QSA]`
> 
> 使用 [QSA] 标志，对 /pages/123?one=two 的请求将被映射到 /page.php?page=123&one=two。如果没有 [QSA] 标志，相同的请求将被映射到 /page.php?page=123 - 也就是说，现有的查询字符串将被丢弃。

[http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_qsa](http://httpd.apache.org/docs/2.2/rewrite/flags.html#flag_qsa)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:16:59.173

我相信通过在服务器上编辑您的 .htaccess 来适应这个路由概念将是一个真正的痛苦。我建议你看看 CodeIgniter、CakePHP 等 PHP 框架。他们都已经准备好了你想要的路由机制。这很容易理解。通过编辑 .htaccess，会有一个明显的缺点，即当您对此类路由要求有大量需求时，您要添加多少规则。

# java - 子类继承基类构造函数，同时保持代码重用原则

> ID：14383259
> 
> 赞同：2
> 
> 时间：2013-01-17T16:09:09.877
> 
> 标签：java, oop, inheritance, constructor, hierarchy

所以这段代码有错误，因为基类有参数对吗？因为每个子类的默认构造函数都调用了基类的默认构造函数？并且我们没有导致错误的基类的默认构造函数？

我是否误解了它，在实现代码重用原则时最好的解决方法是什么，因为我正在尝试在 OOP 中练习编程

```
class A {
    int item;

    A(int item) {
        this.item = item;
    }
}

class B extends A {
    int subitem;

    B(int item) {
        super(item);
        subitem = item * 2;
    }
}

class C extends A {

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:13:52.923

首先，关于这个问题的标题：

> 子类继承基类构造函数，同时保持代码重用原则

构造函数*永远不会*被继承。它只是不会发生。您一直在演示的*不是*继承——它只是要求任何构造函数（除了 in 中的构造函数`java.lang.Object`）必须链接到同一类中的另一个构造函数，*或者**链接*到超类中的构造函数。

 *> 所以这段代码有错误，因为基类有参数对吗？

嗯，准确的说，是因为基类没有无参数的构造函数。

> 因为每个子类的默认构造函数都调用了基类的默认构造函数？

仅当您未明确指定任何构造函数时才提供默认构造函数。默认构造函数总是隐式调用基类中的无*参数构造函数。*

> 并且我们没有导致错误的基类的默认构造函数？

我们没有基类的无*参数构造函数。*基本上它相当于写：

```
class C extends A {
    C() {
        super();
    }
} 
```

如果你理解为什么*它*不能编译，你就会理解为什么没有任何显式声明的构造函数的版本不能编译，因为它们是等价的。

> 我误会了吗，还有什么是最好的解决方法

围绕什么？如果`A`不提供`item`. 如果它*确实*编译会很糟糕 - 那会`item`是什么？的每个实例`C`也可以被认为是一个`A`，这需要一个`item`...

您可以编写一个无参数构造函数，为超类构造函数提供某种默认值：

```
public C() {
    super("default item");
} 
```

如果那是你想要的。但除此之外，如果不知道您要达到的目标，我们就无法真正提出替代方案。

请注意，继承远非实现代码重用的唯一方法——事实上，我个人更喜欢通过组合重用，而不是一般的继承。继承功能强大，但过度使用了 IMO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:13:51.187

您的类`C`扩展`A`它必须满足在构造函数中显式调用其单参数构造函数的合同，或者您可以简单地在类 A 中定义一个无参数默认构造函数，例如：

```
class A {
    int item;

    A(int item) {
        this.item = item;
    }
    A(){
     //default stuff
     }
} 
```*

# java - ConcurrentHashMap 和线程

> ID：14383267
> 
> 赞同：-1
> 
> 时间：2013-01-17T16:09:33.727
> 
> 标签：java, concurrenthashmap

`ConcurrentHashMap`允许从多个线程同时修改`Map`元素而不需要阻塞它们，但`HashMap`阻塞整个`HashMap`对象而不是它的元素，`ConcurrentHashMap`对吗？

但是，如果一个线程的计数`ConcurrentHashMap`为 10，同时另一个线程从该线程中删除了一个项目，该怎么办。那么第一个线程数会变成错误的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:13:46.617

您的问题的答案在最自然的地方，即[`ConcurrentHashMap`](http://docs.oracle.com/javase/7/docs/api/).

见下文：

> 检索操作（包括 get）一般不会阻塞，因此可能与更新操作（包括 put 和 remove）重叠。***检索反映了最近完成的更新操作在其开始时保持的结果***。对于 putAll 和 clear 等聚合操作，并发检索可能仅反映插入或删除某些条目。类似地，迭代器和枚举返回反映哈希表在创建迭代器/枚举时或之后的某个时间点的状态的元素。它们不会抛出 ConcurrentModificationException。但是，迭代器被设计为一次只能由一个线程使用。

# c# - 将焦点设置在控件上而不将应用程序置于最前面

> ID：14383268
> 
> 赞同：0
> 
> 时间：2013-01-17T16:09:35.210
> 
> 标签：c#

我想将焦点设置在应用程序中的控件上，而不将焦点放在整个应用程序上。

例如：单击一个需要一段时间才能加载屏幕的按钮，当加载屏幕时，将焦点设置在其中一个控件上。与此同时，我去另一个应用程序做某事，焦点又回到了前一个应用程序。

当我使用键盘焦点或逻辑焦点时会发生这种情况。

有没有办法阻止这种情况发生？

这是代码：

```
 private void SetFocusInternal()
    {
        // Focus the first control we find with the 'PositionCursor' indicator expression
        FrameworkElement controlToFocus = GetFirstRequiresFocusControl();

        // Give focus back to the control which last had it (if any)
        if (controlToFocus == null)
            controlToFocus = GetLastFocusedControl();

        // Just focus the first thing we can find
        if (controlToFocus == null)
            controlToFocus = GetFirstFocusableControl();

        // Using any of the following goes wrong!!
        controlToFocus.Focus();
        Keyboard.Focus(controlToFocus);
        FocusManager.SetFocusedElement(FocusManager.GetFocusScope(this), controlToFocus);
    } 
```

# c - 计算一行 C 中的字符数

> ID：14383275
> 
> 赞同：-2
> 
> 时间：2013-01-17T16:09:58.593
> 
> 标签：c, strstr

> **可能重复：**
> [memcpy 和 malloc 打印出一个字符串](https://stackoverflow.com/questions/14368680/memcpy-and-malloc-to-print-out-a-string)

我需要在“=”符号之后找到文本文件的一行中的字符数，直到行尾或“#”符号。然后我需要向后工作，直到我到达第一个非空格并`memcpy`用来打印出字符串。

示例：如果行说：`myprop=this is a sentence #value`，我需要它打印出：“这是一个句子”。这是我打开文件并对其进行malloc后的代码。

```
while(fgets(buffer, 1024, fp) != NULL)
{
 if((strstr(buffer, propkey)) != NULL)
 {
  for (

   //need help here

  memcpy(value, buffer + 7, 7);  //the 7 represents the # of characters till the equal sign
  printf("\nvalue is '%s'\n", value);
  }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:23:26.690

你找到了`'='`via `strchr()`。

从那里循环直到你点击`'\0'`或`'#'`。计算循环。在循环内部，检查第一个非空格 ( `isspace()`)，并记住（即变量）在哪里找到它。

在循环之后，您将获得所需的所有信息：复制（从第一个非空白的记忆位置开始）相等的字节数（循环数 - 第一个非空白的位置）。

**话虽**如此，一旦您在 21 天国家/地区完成教程/C，您应该真正使用现成的库来处理此类内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:32:52.503

你可以这样得到它`sscanf`：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char buf[] = "myprop= this is a sentence #comment";
char value[100];

void get_value(char *buf, char *value)
{
    int len;
    sscanf(buf,"%*[^=]= %[^#]",value);
    len = strlen(value);
    while((--len) && value[len]==' ')
        value[len] = '\0';
}

int main()
{
    get_value(buf, value);
    printf ("The value is __%s__\n",value);
} 
```

`sscanf(buf,"%*[^=]= %[^#]",value);`：这将获取从`=`直到的字符串，`#`并且开头的空格字符不会被加盖，但末尾的空格字符将被加盖

并且要删除大写字符串末尾的空格字符，我使用了以下代码：

```
len = strlen(value);
while((--len) && value[len]==' ')
    value[len] = '\0'; 
```

# java - 初始化抽象类的成员，而子类没有写访问权限

> ID：14383276
> 
> 赞同：2
> 
> 时间：2013-01-17T16:10:00.733
> 
> 标签：java, visibility, encapsulation, software-design

我有一个抽象类：

```
public abstract class AbstractCommand {

    private static State state;
} 
```

### 意图

*   类的对象`State`由一些“控制类”提供，提供每个`AbstractCommand`子类所需的数据
*   每个子类都需要对其进行读取访问
*   子类不允许更改字段

### 目前的方法

该字段`state`应由程序的“控制类”初始化，以便子类（定义命令）可以使用它（只读）。子类是内部定义的，应该用作用户的接口。此用户不应具有对 的写入权限`state`。

### 问题

*   在其中添加一个公共`setState()`方法`AbstractCommand`将使所有子类都可以访问它，并且用户也可以访问它
*   使字段最终将强制对象的创建发生在抽象类中，并且“控制类”将不得不使用该对象，而且它是不可替换的

你如何处理这样的事情？

### 再试一次

因为一些答案建议使用包可见性的解决方案，所以我想知道这是否会做得很好：

通过将来自“控制类”（来自包外部）的调用委托给抽象类，在同一包中拥有一个提供所需信息的类。

听起来也有点模糊，但你怎么看？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:16:50.537

如果我理解正确，您正在寻找`protected`关键字。

在 java 中，此关键字允许子类和包字段访问，但不公开该字段。这允许您在不牺牲该领域的公共保护的情况下寻找您正在寻找的公共只读行为。唯一可以直接访问受保护字段的类将是同一包中的任何内容或直接子类（可能位于不同的包中）。

来源：[http ://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:45:12.383

我只能提供模糊的解决方案。

***先说一些解决方案：***

要么做

```
private static final State state = Controller.initState(); 
```

或者使用**控制反转**，依赖注入，`@Inject`. 这也将允许单元测试。网络上肯定有开源 DI 容器（Spring，还是 Pico 容器还在？）。或者从一些 DI 容器中请求 bean。

如果两者都为时过早，请进行惰性评估（部分静态初始化已经是惰性的）。有时会看到一个内部类：

```
private static class Singleton {
    private static final State state = Controller.initState();
} 
```

可能使用 getInstance。

***我的选择：***

不知何故没有静态，而是单例的吸气剂。一个 bean 框架与控制器一起工作。

* * *

***单例而不是静态。***

在之前的 eclipse 3 富客户端中大量使用的静态（静态函数），比如

```
IPreferenceStore store = IDEWorkbenchPlugin.getDefault().getPreferenceStore();
boolean autoPrint = store.getBoolean(AUTO_PRINT); 
```

现在可以通过 OSGi 容器和注解进行依赖注入：

```
@Inject @Preference(AUTO_PRINT)
boolean autoPrint; 
```

*来自：Eclipse 4，M. Teufel 和 J. Helming 的 Rich Clients*

除了更短之外，类之间的耦合更少，单元测试更容易编写，因为我们可以随心所欲地填写 autoPrint ，而不需要干预填充类。

如果有人犹豫添加这样一个容器的开销，最简单的方法是有几个静态的替代方案是拥有**一个全局应用程序上下文**，您可以在其中查找 java 对象，POJO bean。也许由 XML 文件支持：

```
State state = ApplicationContext.lookup(State.class, "state");

<bean name="state" class="org.anic.State" value="sleepy" depends="firstThis"/>
<bean name="firstThis .../> 
```

**请注意，不再需要*静态*。**

Spring 框架有这样一种 XML 方法。

优点是集中初始化，可以考虑顺序和不同的工厂/创建方法。

*（对不起，混乱的答案。）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T16:22:52.120

您可以将`AbstractCommand`“控制类”和特定实现放入同一个包中，并将其放入另一个包中。然后你可以提供一个包私有的 setter 和 protected getter。这将允许控制类设置值，并且实现只能访问 getter。

然而，这会弄乱你的包结构。如果您不希望这种情况发生 - 尝试使用工厂。您可以构建以下包结构：

```
 command
     impl
         CommandImpl1 //extends AbstractCommand
         CommandImpl2 //extends AbstractCommand
     AbstractCommand
     CommandFactory 
```

这个想法是工厂用于创建 AbstractCommand 的实例。因此，您将在任何其他包中将参数传递给 Factory，它会选择您需要的实现并返回一个新对象。在这种情况下，您可以使用前面的想法来授予对 getter 和 setter 的适当访问权限。但是，在这里您将能够设置该字段一次且永远。

如果您需要多次修改它，您可以创建一个评估器。这是与 AbstractCommand 在同一个包中的 CommandAccessor 类，它应该提供如下静态方法：

```
public static void setState(State newState, AbstractCommand command); 
```

没有什么可以阻止您在实现类中使用它，但是您可以设置一个不应该使用它的非正式规则。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-19T14:12:03.780

```
public abstract class AbstractCommand {
    private static State state;
    static {
        state = Controller.getState();
    }
    protected AbstractCommand(){
    }        
    public State getState(){
        return state;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T16:26:34.423

将其作为抽象类的构造函数传入

```
public abstract class AbstractCommand {
    private static State state;
    protected AbstractCommand(State state){
        this.state = state;
    }        

    public State getState(){
        return state;
    }
} 
```

在您的扩展课程中...

```
 public class Command1 extends AbstractCommand{
       public Command1(){
             super([some state]);
       }
 } 
```

扩展类可以`state`在初始化期间设置一次，但此后具有只读访问权限。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T16:31:32.963

所以我看到你想要 Magus 提到的行为“所以你希望 AbstractCommand 的子类不能设置状态值，但是另一个类可以做到吗？”

这是我的建议：

1.  创建一个带有一些规则的接口。您想在所有子类中应用

2.  现在让我们`AbstractCommand`实现该接口，它还应该包含`state`变量，通过这样做，您可以在较低级别维护一组规则

3.  在第 1 步中定义的接口的第二站中，让您不想访问`AbstractCommand`类变量的其他类

通过这样做，您可以维护您的包结构。希望这可以帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-17T17:07:54.207

这是我正在尝试的：

创建接口为：

`public interface RuleInterface { //Define rules here void method1(); }`

现在在您的 AbstractCommand 类中实现它

`public abstract class AbstractCommand implements RuleInterface{ private static String state; }`

有其他类，这个类可以修改`state`变量

`public class SubClassAbstractCommand extends AbstractCommand{ @Override public void method1() {
} }`

为接口再创建一条腿：

`public class AnotherLeg implements RuleInterface{ @Override public void method1() { } }`

现在 AnotherLeg 类无法访问`state`变量，但您仍然可以通过接口强制执行规则`RuleInterface`

# entity-framework - 用作实体框架的提供者时调试/显示 SQLite (System.Data.SQLite) 的查询？

> ID：14383277
> 
> 赞同：1
> 
> 时间：2013-01-17T16:10:02.480
> 
> 标签：entity-framework, sqlite, debugging, ado.net, system.data.sqlite

我将 Microsoft Entity Framework 与 SQLite 数据库一起使用。在调试方面，我真的很难。

现在我只在我调用“saveChanges()”-方法后在我的输出窗口中得到这个

```
SQLite error (1): near "SELECT": syntax error 
```

**显然 EF 在更新我的数据时搞砸了一些查询。我正在寻找一种获取查询的方法，这似乎是错误的。我不能听听对数据库发起了哪些查询吗？**

我尝试了其他的东西，也没有提供更多有用的信息：

*   在堆栈跟踪窗口中，它只显示 [外部代码]
*   我从 Microsoft 符号服务器下载了所有符号，但那里没有更多信息
*   我在“SaveChanges()”之前放置了一个断点，并使用 F11 逐步完成所有操作，但没有显示内部代码（如符号文件中的代码）
*   我下载了 SQLite 的源文件，并将这些项目包含在我的项目中并编译了源文件。但它仍然没有通过 SQLite 源。我可以在 ObjectExplorer 中看到它们，但是当我在那里设置 BreakPoint 时，它们不是完全红色的（没有达到断点。没有加载此文档的符号）
*   在检查 System.Data.UpdateException 时，我发现堆栈跟踪引用了 SQLite 包的一个类，但由于我无法在那里设置断点，因此我无法读取那里的参数值。这是堆栈：

> bei System.Data.SQLite.SQLite3.Prepare(SQLiteConnection cnn, String strSql, SQLiteStatement previous, UInt32 timeoutMS, String& strRemain) bei System.Data.SQLite.SQLiteCommand.BuildNextCommand() bei System.Data.SQLite.SQLiteCommand.GetStatement(Int32 index) bei System.Data.SQLite.SQLiteDataReader.NextResult() bei System.Data.SQLite.SQLiteDataReader..ctor(SQLiteCommand cmd, CommandBehavior 行为) bei System.Data.SQLite.SQLiteCommand.ExecuteReader(CommandBehavior 行为) bei System.Data .SQLite.SQLiteCommand.ExecuteDbDataReader(CommandBehavior 行为) 北 System.Data.Common.DbCommand.ExecuteReader(CommandBehavior 行为) 北 System.Data.Mapping.Update.Internal.DynamicUpdateCommand.Execute(UpdateTranslator 翻译器，EntityConnection 连接，字典`2 identifierValues, List`1 generateValues) bei System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter 适配器)

*   在一个相关的 SO-Question 中，答案是查看 StateEntries，但正如您在此处看到的那样。他们也不帮我。

![在此处输入图像描述](../Images/78559e93a79a46eaa86a713fe73d3321.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T20:44:41.137

对于查询，您可以尝试使用 .ToString() 或 .ToSqlString() （取决于您使用的是 ObjectQuery 还是 DbQuery），例如：

var sql = db.Entities.ToString()

其中 db 是一个 DbContext 实例。如果 db 是一个 ObjectContext 实例，您将使用`.ToTraceString()`.

对于更新，无法访问此信息。调试时，您可以使用 IntelliTrace 查看发送到数据库的命令。如果您需要跟踪/记录，您可以使用[EF Tracing provider](http://code.msdn.microsoft.com/EFProviderWrappers-c0b88f32)。需要一些技巧才能使其与 CodeFirst 一起使用。前段时间我[在博客上写过这个。](http://blog.3d-logic.com/2012/03/31/using-tracing-and-caching-provider-wrappers-with-codefirst/)

# ios - NSError 是可重用的吗？

> ID：14383280
> 
> 赞同：2
> 
> 时间：2013-01-17T16:10:07.040
> 
> 标签：ios

例如

```
NSError *error = nil;
if ([something error:&error]) {
   // ...
}    
// ...

if ([somethingElse error:&error]) {
  // ...
} 
```

如果我使用相同的 NSError 而不将其重置为零，我会遇到任何问题吗？

通常我会说没关系，但我担心其他人会在他们打算使用另一个错误时使用另一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:36:48.303

没有问题，但是在传递与参数相同的指针之前检查错误。如果 something 方法有错误，而 somethingElse 也有错误，error 变量将有一个指向第二个的指针。认为您将指针传递给指向对象的指针。

```
NSError *error = nil;
if ([something error:&error]) {
   // ...
}    

if (error) {
//...
}

if ([somethingElse error:&error]) {
  // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:18:55.233

我不认为你会有问题。您的`NSError`变量只会被重新分配。

# c# - 用户设置的 I/O 异常

> ID：14383285
> 
> 赞同：0
> 
> 时间：2013-01-17T16:10:22.573
> 
> 标签：c#, visual-studio-2012, application-settings

我在***Visual Studio 2012*****中创建了一个C#**项目。该项目具有与其关联的用户设置（通过项​​目属性）。 当我在我的项目发布文件夹中打开它时，它完全按预期工作，但是当我将它复制到另一个目录（以及所需的 DLL）时，它无法打开。它返回的错误是：

 *```
System.IO.FileLoadException 
```

没有用户设置的早期版本可以正常工作。此版本还进行了一些其他更改，但我认为用户设置是最有可能的罪魁祸首。

有人对可能是什么问题有任何建议吗？*

# ruby-on-rails - 如何从控制器中的索引中的两个不同按钮重定向两个不同的 url？

> ID：14383286
> 
> 赞同：0
> 
> 时间：2013-01-17T16:10:28.377
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

如何通过在控制器中使用单一方法将两个链接重定向到两个 url？

## 例子：

```
def index
  @location_id = Location.find(@location_id)
  @epc = Enr::Rds::CurrentEpc.find_by_location_id(@location_id)
  if # PDF EPC link clicked
    @epc.current_epc_path[-4..-1] == '.pdf'
    content = open(@epc.current_epc_path, "rb") {|io| io.read }
    send_data content, :filename => 'epc.pdf', :disposition => 'inline'
  end
  if # LIVE EPC link clicked
    @epc = Enr::Rds::XmlData.find_by_location_id(@location_id)
    redirect_to @epc.report_url
  end
end 
```

在我看来，

```
<%= link_to 'PDF', enr_location_current_epc_index_path(@location) %>
<%= link_to 'LIVE', enr_location_current_epc_index_path(@location) %> 
```

在我的路线中

```
resources :current_epc, only: [:index, :show] do
  get :download, :on => :collection
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:44:00.273

我会考虑创建 2 个不同的操作。每个案例一个。这将使您的操作和代码更易于阅读。

然后你会得到3个动作。仅加载初始对象的索引，一个用于通过第一个逻辑处理特定 id，另一个链接用于处理第二个逻辑。

```
def index
  @location_id = Location.find(@location_id)
  @epc = Enr::Rds::CurrentEpc.find_by_location_id(@location_id)
end

pdf_epc
  @location_id = Location.find(@location_id)
  @epc = Enr::Rds::CurrentEpc.find_by_location_id(@location_id)
  @epc.current_epc_path[-4..-1] == '.pdf'
  content = open(@epc.current_epc_path, "rb") {|io| io.read }
  send_data content, :filename => 'epc.pdf', :disposition => 'inline'
end

def live_epc
  @epc = Enr::Rds::XmlData.find_by_location_id(@location_id)
  redirect_to @epc.report_url
end 
```

在您的路线中

```
resources :current_epc, only: [:index, :show] do
  get :download, :on => :collection
end
get "/pdf_epc/:id" => "current_epc#pdf_epc", :as => enr_location_current_epc_pdf
get "/live_epc/:id" => "current_epc#live_epc", :as => enr_location_current_live_epc 
```

在你看来

```
<%= link_to 'PDF', enr_location_current_epc_pdf_path(@location) %>
<%= link_to 'LIVE', enr_location_current_live_epc_path(@location) %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:26:24.630

```
def pdf_url
    if (params[:url] == 1)
        do something
    else
        do something else
    end
    @epc = Enr::Rds::CurrentEpc.find_by_location_id(@location_id)
    if @epc != nil
      @epc.current_epc_path[-4..-1] == '.pdf'
      content = open(@epc.current_epc_path, "rb") {|io| io.read }
      send_data content, :filename => 'epc.pdf', :disposition => 'inline'
    end
end 
```

在您的 routes.rb 中：

```
match "/anything/pdf_url/:url" => "anything#pdf_url" 
```

还有你的两个链接：

```
<%= link_to "first", "/anything/pdf_url/1" %>
<%= link_to "second", "/anything/pdf_url/2" %> 
```

编辑：成员在需要 :id 参数时使用，如果不是，它是一个集合。无论如何，我会在这种情况下使用 match （括号中是可选的）：

```
 match "/anything(/download/:url)" => "anything#index" 
```

并像这样在控制器中获取参数：

```
def index
    if params[:url] == 1 # Or whatever you put in your link_to
        # redirect_to url 
    else
        # redirect_to url
    end
end 
```

编辑 2：索引控制器：

```
def index

  if params[:id]
      @location_id = Location.find(params[:id])
      @epc = Enr::Rds::CurrentEpc.find_by_location_id(@location_id)
      if params[:url] == 'pdf'
        @epc.current_epc_path[-4..-1] == '.pdf'
        content = open(@epc.current_epc_path, "rb") {|io| io.read }
        send_data content, :filename => 'epc.pdf', :disposition => 'inline'
      elsif params[:url] == 'live'
        @epc = Enr::Rds::XmlData.find_by_location_id(@location_id)
        redirect_to @epc.report_url
      end
  else
    @locations = Location.all
    respond_to do |format|
      format.html  
      format.json  { render :json => @locations }
    end
  end
end 
```

您的路线：

```
match "/anything(/:id(/:url))" => "anything#index" 
```

您的观点（更改链接以适应您的口味，这只是一个简单的示例）：

```
<%= link_to "first", "/anything/1/pdf" %>
<%= link_to "second", "/anything/1/live" %> 
```

# ruby-on-rails - 在 Rails 中为键/值对实现动态方法

> ID：14383290
> 
> 赞同：0
> 
> 时间：2013-01-17T16:10:40.553
> 
> 标签：ruby-on-rails, dynamic-method

假设我有一个名为“options”的数据库表，对应的模型名为 Option。该表的结构很简单，如下...

```
id    -> primary key, auto increment
name  -> key
value -> value for the key 
```

示例数据行可能如下...

```
id   name                         value     
---- ---------------------------- -----------
1    default_view                 DAILY     
2    show_registration_number     0         
3    notification_method          IMMEDIATE 
```

我想要的是我应该可以访问所有选项（键）作为方法名称。

例如，如果执行以下操作...

```
@options = Options.find(:all) 
```

是否可以访问`@options.default_view`应该将值返回为“每日”的数据，并且类似地`@options.show_registration_number`应该将值返回为 0。

此外，如果可能的话，是否允许修改，例如是否`@options.default_view = 'MONTHLY'`应该更新数据库中的相应记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T23:50:21.050

这将为您提供*几乎*您正在寻找的答案： [http ://code.dblock.org/how-to-define-enums-in-ruby](http://code.dblock.org/how-to-define-enums-in-ruby)

它依赖`const_missing`并假设您的“枚举”元素被定义为常量，在您的情况下`Option::default_view`

但是，很容易看出如何调整此代码以使用`method_missing`，以便您可以做到`Option.default_view`

这种相同方法的另一个示例包含在[rails-settings](https://github.com/ledermann/rails-settings) gem 中，因此您可以浏览[此代码](https://github.com/ledermann/rails-settings/blob/master/lib/rails-settings/settings.rb)以找到您正在寻找的答案

# jquery - jQuery :not() 选择器在 addClass() 之后的元素上不起作用（实时/实时）

> ID：14383291
> 
> 赞同：3
> 
> 时间：2013-01-17T16:10:41.857
> 
> 标签：jquery, selector, jquery-hover

我在使用 :not() 选择器/排除器时遇到问题。我正在做的是向打开的手风琴面板添加一个“.Activated”类（带有类“.panel”）。然后，当使用“.panel”类悬停所有元素时，我想运行一个函数。但是，有时会出现我不想在其上运行该函数的两个类“class="panel Activated"”的元素。

另外这里是我的一些相关代码：

```
function onOpenPanel(obj){
        var slideR = obj.index + 1;
        $('.panel:nth-child(' + slideR + ')').addClass('Activated');
    } 

$('.panel:not(.Activated)').hover(function(){
        $(this).css('background-position','0px top');
    },function(){
        $(this).css('background-position','-41px top');
    }); 
```

您会在网站上注意到，在打开的手风琴面板上，背景会跳跃 41 像素，因为我的 :not() 选择器没有选择面板也有 '.Activated' 类，因此不应受到影响.hover 功能。

HTML：

```
<div class="accordion">

    <!-- First slide -->

    <div>
        <img src="img/img-1.jpg" width="10" />

        <div class="caption">
        <p class="mask-1"></p>
            <p class="title sl1">
                Professional Products & Solutions
            </p>
            <p class="body one">As a global leader across many sectors, Sony Professional combine world class knowledge with groundbreaking technology – inspiring businesses to amaze their customers.<br />
            </p>

        </div>

    </div>

    <!-- First slide -->

    <!-- Second slide -->

    <div>
        <img src="img/img-2-1.jpg" />

        <div class="caption">
        <p class="mask-2"></p>
            <p class="title sl2">
                4K Digital Cinema
            </p>
            <p class="body two">Taking digital cinema to new levels of immersive engagement, the superior resolution of Sony 4K creates the ultimate in crowd-pleasing experiences – partner with us for business growth.
            </p>

            <a href="http://stg.sony.co.uk/pro/hub/digital-cinema" class="slide-link">Read more<img src="img/cta-block.jpg" class="cta-block"/></a>
        </div>

    </div>

    <!-- Second slide -->

    <!-- Third slide -->

    <div class="sonySlideIn">
        <img src="img/img-3.jpg" />

        <div class="caption">
        <p class="mask-3"></p>
            <p class="title sl3">
                Broadcast & Pro AV
            </p>
            <p class="body three">Shoot, edit, broadcast, archive. Whatever your priority – from image quality to production efficiency – Sony enables you realise your vision without compromises.
            </p>
            <img src="img/prod-3.jpg" width="400" height="98" id="prod-3"/>
            <a href="http://stg.sony.co.uk/pro/hub/broadcast-professional-audio-video" class="slide-link">Read more<img src="img/cta-block.jpg" class="cta-block"/></a>
        </div>

    </div>

    <!-- Third slide -->

    <!-- Fourth slide -->

    <div class="sonySlideIn">
        <img src="img/img-4.jpg" />

        <div class="caption">
        <p class="mask-4"></p>
            <p class="title sl4">
                Industrial Cameras
            </p>
            <p class="body four">From machine vision to visual communications and OEM conference solutions, see how the application of Sony imaging expertise delivers market-leading solutions for industrial environments.
            </p>
            <img src="img/prod-4.jpg" id="prod-4"/>
            <a href="http://stg.sony.co.uk/pro/hub/industrial-machine-vision-cameras" class="slide-link">Read more<img src="img/cta-block.jpg" class="cta-block"/></a>
        </div>

    </div>

    <!-- Fourth slide -->

    <!-- Fifth slide -->

    <div class="sonySlideIn">
        <img src="img/img-5.jpg" />

        <div class="caption">
        <p class="mask-5"></p>
            <p class="title sl5">
                Medical
            </p>
            <p class="body five">Driving the future of medical imaging by redefining clarity across monitors, cameras, radiology imagers, printers and recorders, Sony Medical creates pioneering solutions – including 3D – that enable clearer diagnoses and more efficient workflows.
            </p>
            <img src="img/prod-5.jpg" id="prod-5"/>
            <a href="http://stg.sony.co.uk/pro/hub/medical" class="slide-link">Read more<img src="img/cta-block.jpg" class="cta-block"/></a>
        </div>

    </div>

    <!-- Fifth slide -->

    <!-- Sixth slide -->

    <div class="sonySlideIn">
        <img src="img/img-6.jpg" />

        <div class="caption">
        <p class="mask-6"></p>
            <p class="title sl6">
                Projectors, Displays & Digital Signage
            </p>
            <p class="body six">Designed to attract attention, engage interest and add the wow factor to professional environments, Sony bring superior image quality to businesses, organisations, education establishments and venues of every size. 
            </p>
            <img src="img/prod-6.jpg" id="prod-6"/>
            <a href="http://stg.sony.co.uk/pro/hub/displays-projectors-digital-signage" class="slide-link">Read more<img src="img/cta-block.jpg" class="cta-block"/></a>
        </div>

    </div>

    <!-- Sixth slide -->

    <!-- Seventh slide -->

    <div class="sonySlideIn">
        <img src="img/img-7.jpg" />

        <div class="caption">
        <p class="mask-7"></p>
            <p class="title sl7">
                Sports & Stadiums
            </p>
            <p class="body seven">Maximising customer engagement and satisfaction, our range of leading AV solutions for large arenas drives footfall, spend, loyalty and advocacy – see the advantages of partnering with Sony.
            </p>
            <a href="http://stg.sony.co.uk/pro/hub/solutions-stadiums-arenas" class="slide-link">Read more<img src="img/cta-block.jpg" class="cta-block"/></a>
        </div>

    </div>

    <!-- Seventh slide -->

    <!-- Eigth slide -->

    <div class="sonySlideIn">
        <img src="img/img-8.jpg" />

        <div class="caption">
        <p class="mask-8"></p>
            <p class="title sl8">
                Video Security
            </p>
            <p class="body eight">See the most technically advanced, network based, end-to-end video security solutions – from hybrid and Full HD IP cameras to recorders and third-party compatible software.
            </p>
            <img src="img/prod-8.jpg" id="prod-8"/>
            <a href="http://stg.sony.co.uk/pro/hub/video-security" class="slide-link">Read more<img src="img/cta-block.jpg" class="cta-block"/></a>
        </div>

    </div>

    <!-- Eigth slide -->

</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T16:16:57.410

**jQuery 选择器在代码执行时**返回匹配的元素，因此它们不会反映以后对 DOM 的更改。

您的代码会将`hover`事件处理程序绑定到在代码执行时（可能是在 DOM 就绪时）没有`Activated`该类的元素，但添加该类不会删除这些事件处理程序。

如果您希望他们动态做出反应，请查看[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)。

# twitter-bootstrap - 模态选项卡索引问题中的 Twitter Bootstrap 表单

> ID：14383294
> 
> 赞同：1
> 
> 时间：2013-01-17T16:10:52.733
> 
> 标签：twitter-bootstrap, modal-dialog, tabindex

我在 twitter 引导模式中有一个表单，但选项卡索引不起作用。我尝试编辑模式的 tab-index 属性，但似乎没有任何影响。目标是用户可以在表单字段之间切换。可以在 hookahi.com 上看到示例，“加入”链接触发带有注册表单的模式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:15:45.420

在您的页面中运行此代码：

```
jQuery('[tabindex]').each(function() { 
    console.log(jQuery(this).attr('tabindex'));
}); 
```

如您所见，您有许多具有相同`tabindex`. 所以浏览器只是尽其所能。如果您希望 tab 键的行为正确，则每个键`tabindex`只能使用一次。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-10-29T05:38:27.860

放入`tabindex="-1"`模态窗口并删除模态窗口中`tabindex`的剩余输入。它解决了我的问题。你可以试试。

# ios - 企业部署中未显示图标

> ID：14383297
> 
> 赞同：0
> 
> 时间：2013-01-17T16:11:02.607
> 
> 标签：ios, xcode, deployment, enterprise, ipa

我添加了名为 allegroicon.png （ 57x57 和 117x117 ）的 png 文件来制作 plist。

单击目标时，我会在屏幕上看到启动图像和图标。

我还在我的 plist 中设置了图标名称。

在部署分发时，我设置了 url 图像，我尝试过不指定它们，但下载时只显示一个灰色图标。

在模拟器上，我看到了我的图标图形。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T18:38:32.417

释放缓存后，我可以看到图标并确保它们的名称或正确。

# jquery - 在 JQuery 中解析 Umbraco 节点的多维 JSON 数组

> ID：14383298
> 
> 赞同：0
> 
> 时间：2013-01-17T16:11:02.830
> 
> 标签：jquery, json, umbraco

希望有人可以提供帮助-我对此无能为力。我创建了一个由一些 Umbraco 节点组成的序列化 JSON 字符串，并且我正在尝试使用 JQuery 获取某些属性的值。

附图是数组的结构，使用 Chrome 开发工具检查： ![在此处输入图像描述](../Images/b92c7e02faa819ee656c14f3bc83b033.png)

如您所见，对象中有 3 个数组，每个数组中有 12 个具有 3 个属性的对象。数组是以这种方式构造的，因为我使用的是 getJSON() 方法。

尽我所能，我似乎无法访问其中的属性。

我已经从 JQuery 中剥离了所有内容，只留下了裸露的骨头：

```
<script type="text/javascript">
            $(document).ready(function () {
                $.getJSON('http://myURLCaseStudyImagesJSON', function (data) {

                });
            });
        </script> 
```

如果有人可以就如何做到这一点提出建议，我将不胜感激。我不想以大量嵌套的 for 循环结束，但即使尝试也不会给出结果。实际的原始 JSON 是这样的：

```
[[{"Alias":"googleAC","Value":"","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"metaKeywords","Value":"","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"metaDescription","Value":"","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"pageTitle","Value":"Royal","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"pageHeading","Value":"Royal Heading","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"pageSubHeading","Value":"Royal Sub Heading","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"pageContent","Value":"\u003cp\u003eRoyal\u003c/p\u003e","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"caption","Value":"Dave didn\u0027t wait to book. We didn\u0027t wait to blink.","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"caseStudyMainImage","Value":"1357","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"caseStudyImages","Value":"1357","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"displayHomePageCarousel","Value":"1","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"imageUrl","Value":"/media/8777/swimmer.jpg","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"caseStudyUrl","Value":"/our-work/advertising-and-promotions/royal/","Version":"00000000-0000-0000-0000-000000000000"}],[{"Alias":"googleAC","Value":"","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"metaKeywords","Value":"","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"metaDescription","Value":"","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"pageTitle","Value":"Walter Title","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"pageHeading","Value":"Walter Heading","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"pageSubHeading","Value":"Walter Sub Heading","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"pageContent","Value":"\u003cp\u003eWalter Content\u003c/p\u003e","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"caption","Value":"Mickey waved his magic wand and magic happened","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"caseStudyMainImage","Value":"1355","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"caseStudyImages","Value":"","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"displayHomePageCarousel","Value":"1","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"imageUrl","Value":"/media/8767/mickey.jpg","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"caseStudyUrl","Value":"/our-work/brandingcorporate-identity/walter/","Version":"00000000-0000-0000-0000-000000000000"}],[{"Alias":"googleAC","Value":"","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"metaKeywords","Value":"","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"metaDescription","Value":"","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"pageTitle","Value":"Sea Life","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"pageHeading","Value":"Sea Life Heading","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"pageSubHeading","Value":"Sea Life Sub Heading","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"pageContent","Value":"\u003cp\u003eSea Life Content\u003c/p\u003e","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"caption","Value":"Sea life it\u0027s an education","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"caseStudyMainImage","Value":"1356","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"caseStudyImages","Value":"1356","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"displayHomePageCarousel","Value":"1","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"imageUrl","Value":"/media/8772/shark.jpg","Version":"00000000-0000-0000-0000-000000000000"},{"Alias":"caseStudyUrl","Value":"/our-work/print-designproduction/sea-life/","Version":"00000000-0000-0000-0000-000000000000"}]] 
```

希望有人可以提供帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T23:01:35.013

你用什么将 Umbraco 对象序列化为 JSON？在 JSON.net 中，您可以创建可以重新格式化数据的序列化程序，以使 13 个对象中的每一个都成为实际的键/值对，以便它们具有您期望的属性。

以下是 JsonSerializer 上的一些链接：

[http://blog.maskalik.com/asp-net/json-net-implement-custom-serialization](http://blog.maskalik.com/asp-net/json-net-implement-custom-serialization)

[如何在 JSON.NET 中实现自定义 JsonConverter 以反序列化基类对象列表？](https://stackoverflow.com/questions/8030538/how-to-implement-custom-jsonconverter-in-json-net-to-deserialize-a-list-of-base)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:00:36.053

我设法通过嵌套 $.each 循环来做到这一点，这是我并不真正想要的——但我读了一篇论坛帖子，上面说你不能真正拥有多维 jQuery 数组，这将是最好的方法.

# perl - 构建 Qt5 Git / Perl - 路径

> ID：14383300
> 
> 赞同：6
> 
> 时间：2013-01-17T16:11:05.970
> 
> 标签：perl, git, qt

我有一点理解问题。

在[Qt Wiki](http://qt-project.org/wiki/Building_Qt_5_from_Git#aea23489ce3aa9b6406ebb28e0cda430)中写道，我必须：

> *提示：*确保将 Perl 添加到 git 前面的路径中，因为它附带过时的版本（Perl 5.8），这将导致脚本失败。

但这究竟意味着什么？这是否意味着PATH变量？它包含以下项目：

```
C:\Python33\
C:\Perl64\site\bin
C:\Perl64\bin
C:\Program Files (x86)\NVIDIA Corporation\PhysX\Common
C:\Program Files (x86)\AMD APP\bin\x86_64
C:\Program Files (x86)\AMD APP\bin\x86
%SystemRoot%\system32
%SystemRoot%
%SystemRoot%\System32\Wbem
%SYSTEMROOT%\System32\WindowsPowerShell\v1.0\
C:\Program Files (x86)\ATI Technologies\ATI.ACE\Core-Static
C:\Program Files\Microsoft SQL Server\110\Tools\Binn\
C:\Program Files\Common Files\Autodesk Shared\
C:\Program Files\Microsoft\Web Platform Installer\
C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v1.0\
C:\Program Files (x86)\Windows Kits\8.0\Windows Performance Toolkit\
C:\Program Files (x86)\Autodesk\Backburner\
C:\Program Files (x86)\Microsoft SQL Server\100\Tools\Binn\
C:\Program Files\Microsoft SQL Server\100\Tools\Binn\
C:\Program Files\Microsoft SQL Server\100\DTS\Binn\
C:\Python33\Lib\site-packages\PyQt4 
```

有人能告诉我如何在git前面设置路径吗？我不知道那是什么意思

问候

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T18:19:53.847

如果命令处理器在当前目录中没有找到程序，它将检查`PATH`环境变量中的每个目录并执行它找到的第一个。wiki 的意思是，因为 git 安装包含过时的 Perl 版本，如果 git 目录首先出现在`PATH`列表中，那么它将被选择而不是任何其他已安装的 Perl 版本。

`git`没有出现在你的`PATH`所以问题不会出现。在任何情况下， for 的条目`Perl`都在列表的开头附近，因此将首先选择已安装的 Perl。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-01T13:48:27.840

我遇到了同样的问题，我安装了 perl 5.16.3。但是perl -v显示的是5.8.8，我查看了perl的文件夹，发现有两个.exe文件，分别命名为perl.exe和perl5.16.3.exe。然后我输入“perl5.16.3 init-repository”，它运行正常！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-04T23:27:18.203

我的解决方案：

```
1.下载并安装最新版本的ActiveState perl（现在5.16.3）
2.复制内容（替换现有文件）
C:\Perl
至
C:\Program 文件 (x86)\Git
（是的，很多废话，但没关系）
3.卸载ActiveState perl

结果：您在 git 中有更新版本的 perl。

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-07T13:42:48.580

Here's the simplest solution:

Assuming that you installed some up-to-date version of Perl and it is already in PATH, simply go to where GIT executables are is, which is normally

```
C:\Program Files (x86)\Git\bin 
```

and **rename `perl.exe` to `perl1.exe`**. If you really are so unhappy about this, rename it back after you're done with whatever is getting the problem.

Why does this solve the problem? Because your program will not find perl in GIT's directory, and will try to find it somewhere else, and since your have the latest version of Perl in PATH, it will find it and everything will workout.

PS: It worked with me :-)

# c# - WebCrawler 中的 OutOfMemoryException

> ID：14383301
> 
> 赞同：0
> 
> 时间：2013-01-17T16:11:07.377
> 
> 标签：c#, exception, out-of-memory

所以我需要从一个站点保存几个链接，但是当它到达 64k 链接附近时，它给了我错误`OutOfMemoryException`。

这是我的代码，如果有人可以帮助我，那就太好了。

注意：如果你想测试（当然你必须编辑来测试，但编辑不多），它收到的 url 是：

```
http://santacatarina.entrei.net/busca/listar_empresas.php?filter={0}&pagina={1} 
```

编码 ：

```
namespace WebCrawler.SantaCatarina
{

class SCLinkFinder : ILinkFinder

{

private readonly Queue<char> _alfabeto;
private int _paginaAtual;
private char _letraAtual;

public SCLinkFinder()
{
    _alfabeto = new Queue<char>();
    _alfabeto.Enqueue('1');
    _alfabeto.Enqueue('A');
    _alfabeto.Enqueue('B');
    _alfabeto.Enqueue('C');
    _alfabeto.Enqueue('D');
    _alfabeto.Enqueue('E');
    _alfabeto.Enqueue('F');
    _alfabeto.Enqueue('G');
    _alfabeto.Enqueue('H');
    _alfabeto.Enqueue('I');
    _alfabeto.Enqueue('J');
    _alfabeto.Enqueue('K');
    _alfabeto.Enqueue('L');
    _alfabeto.Enqueue('M');
    _alfabeto.Enqueue('N');
    _alfabeto.Enqueue('O');
    _alfabeto.Enqueue('P');
    _alfabeto.Enqueue('Q');
    _alfabeto.Enqueue('R');
    _alfabeto.Enqueue('S');
    _alfabeto.Enqueue('T');
    _alfabeto.Enqueue('U');
    _alfabeto.Enqueue('V');
    _alfabeto.Enqueue('W');
    _alfabeto.Enqueue('X');
    _alfabeto.Enqueue('Y');
    _alfabeto.Enqueue('Z');

    _paginaAtual = 1;
    _letraAtual = _alfabeto.Dequeue();
}

public string[] Find(string url)
{
    List<string> _empresas = new List<string>();

    if (!_alfabeto.Any() && _letraAtual == ' ')
    {
        return _empresas.ToArray();
    }
    var webGet = new HtmlWeb();
    var formattedUrl = String.Format(url, _letraAtual, _paginaAtual++);
    var document = webGet.Load(formattedUrl);
    var nodes = document.DocumentNode.SelectNodes("//div[@id='conteudo']/div[@class='gratuito']/p/a");

    foreach (var node in nodes)
    {
        var href = node.GetAttributeValue("href", "");
        _empresas.Add(href);
    }

    var elUrlProximaPagina = document.DocumentNode.SelectSingleNode("//div[@id='principal']/div[@id='conteudo']/div[@class='paginacao']/a[contains(@class,'nextPage')]");
    if (elUrlProximaPagina == null)
    {
        _letraAtual = _alfabeto.Any() ? _alfabeto.Dequeue() : ' ';
        _paginaAtual = 1;
    }
    Console.WriteLine(_letraAtual);
    Console.WriteLine(_paginaAtual);

    DadoPo.SalvarUrl();         

    return Find(url);
} 
```

}

好的，现在错误在另一个地方，它在 var document = webGet.Load(formattedUrl);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:16:44.750

从网站抓取信息N次（例如1000次）后，将_empresas的内容保存在硬盘（数据库，物理文件）中。然后清理 _empresas 以获得一组新信息

您所做的几乎是使用 CLR 为您的 PE 允许的所有内存

```
namespace WebCrawler.SantaCatarina
{
class SCLinkFinder : ILinkFinder
{
    private readonly Queue<char> _alfabeto;

    private int _paginaAtual;
    private char _letraAtual;

    public SCLinkFinder()
    {
        _alfabeto = new Queue<char>();
        _alfabeto.Enqueue('1');
        _alfabeto.Enqueue('A');
        _alfabeto.Enqueue('B');
        _alfabeto.Enqueue('C');
        _alfabeto.Enqueue('D');
        _alfabeto.Enqueue('E');
        _alfabeto.Enqueue('F');
        _alfabeto.Enqueue('G');
        _alfabeto.Enqueue('H');
        _alfabeto.Enqueue('I');
        _alfabeto.Enqueue('J');
        _alfabeto.Enqueue('K');
        _alfabeto.Enqueue('L');
        _alfabeto.Enqueue('M');
        _alfabeto.Enqueue('N');
        _alfabeto.Enqueue('O');
        _alfabeto.Enqueue('P');
        _alfabeto.Enqueue('Q');
        _alfabeto.Enqueue('R');
        _alfabeto.Enqueue('S');
        _alfabeto.Enqueue('T');
        _alfabeto.Enqueue('U');
        _alfabeto.Enqueue('V');
        _alfabeto.Enqueue('W');
        _alfabeto.Enqueue('X');
        _alfabeto.Enqueue('Y');
        _alfabeto.Enqueue('Z');

        _paginaAtual = 1;
        _letraAtual = _alfabeto.Dequeue();
    }

    public string[] Find(string url)
    {
        List<string> _empresas = new List<string>();

        if (!_alfabeto.Any() && _letraAtual == ' ')
        {
            return _empresas.ToArray();
        }
        var webGet = new HtmlWeb();
        var formattedUrl = String.Format(url, _letraAtual, _paginaAtual++);
        var document = webGet.Load(formattedUrl);
        var nodes = document.DocumentNode.SelectNodes("//div[@id='conteudo']/div[@class='gratuito']/p/a");

        foreach (var node in nodes)
        {
            var href = node.GetAttributeValue("href", "");
            _empresas.Add(href);
        }

        var elUrlProximaPagina = document.DocumentNode.SelectSingleNode("//div[@id='principal']/div[@id='conteudo']/div[@class='paginacao']/a[contains(@class,'nextPage')]");
        if (elUrlProximaPagina == null)
        {
            _letraAtual = _alfabeto.Any() ? _alfabeto.Dequeue() : ' ';
            _paginaAtual = 1;
        }
        Console.WriteLine(_letraAtual);
        Console.WriteLine(_paginaAtual);

        //Your code to read _empresas and Persist in database(or file)            

        return Find(url);
    }
} 
```

}

# javascript - AppleScript - 在 Opera 上执行 JavaScript

> ID：14383302
> 
> 赞同：3
> 
> 时间：2013-01-17T16:11:16.887
> 
> 标签：javascript, applescript, opera

Safari 和 Chrome 可以通过 AppleScript 执行 JavaScript

**苹果浏览器：**

```
tell application "Safari"
    open location "http://example.com"
    activate
    do JavaScript "alert('example');" in current tab of first window
end tell 
```

**铬合金：**

```
tell application "Google Chrome"
    open location "http://example.com"
    activate
    execute front window's active tab javascript "alert('example');"
end tell 
```

**有没有办法在 Opera 中做到这一点？**

*注意：Firefox 的相同问题在这里：[AppleScript - JavaScript execution on Firefox](https://stackoverflow.com/questions/14383039/applescript-javascript-execution-on-firefox)*

*我想一起问他们，但我决定问两个不同的问题，以便能够分别接受答案。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-15T16:55:39.477

不，Opera 似乎没有 AppleScript 字典

根据[这个网站](http://books.gigatux.nl/mirror/applescript/0596008503/applescripttmm-chp-9-sect-2.html)：

> Opera (www.opera.com/download/) 是一款速度快、功能强大且价格昂贵（40 美元）的 Web 浏览器。如果您正在寻找 AppleScript 支持，请远离；Opera 也没有。

这一事实似乎得到了[这里](http://macscripter.net/viewtopic.php?id=43717)的讨论的支持。

* * *

话虽如此，您*也许*可以绕过该限制（但这将非常难看）。

根据[这里](https://webmasters.stackexchange.com/a/8555)：

> 要间接访问 Opera 中的控制台（在 v9.6 上检查），快捷方式是 CTRL + SHIFT + I

我认为这是 Windows 的方式，但 Mac 可能只是`command + shift + i`.

您让 Opera 成为前窗口，然后使用系统事件开始输入。例如：

```
tell application "System Events"
    keystroke "l" using command down
    keystroke "c" using command down
end tell 
```

（换句话说，您应该只使用另一个浏览器。）

# php - 关联视图中的虚拟字段

> ID：14383305
> 
> 赞同：0
> 
> 时间：2013-01-17T16:11:27.600
> 
> 标签：php, cakephp, cakephp-model

我`$virtualFields`在模型中设置了用户

```
public $virtualFields = array(
    'fullname' => 'CONCAT(user.firstname, " ", user.lastname)',
    [...]
); 
```

我想在关联视图中访问此字段，但我可以在另一个视图中加载用户数据，如名字，但不能加载组合字段全名。

我是否必须在控制器中添加一些东西才能获得这个字段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:50:44.500

您可能没有在这里阅读本书页面的最后一章：http: [//book.cakephp.org/2.0/en/models/virtual-fields.html#limitations-of-virtualfields](http://book.cakephp.org/2.0/en/models/virtual-fields.html#limitations-of-virtualfields)

否则你会看到，这里如何克服虚拟字段的限制：

```
$this->virtualFields['fullname'] = $this->User->virtualFields['fullname']; 
```

# printing - 在 Visual Studio 中插入一行注释

> ID：14383310
> 
> 赞同：2
> 
> 时间：2013-01-17T16:11:39.293
> 
> 标签：printing, insert, visual-studio-2012, comments, line

我正在寻找 Visual C# Studio 2012 中的快捷方式（如果存在），它将插入一行注释，如下所示：

```
/******************************************************************************/ 
```

这些使代码对我来说更具可读性。我想要实现的是分离为实现不同事物而编写的代码块。比方说：

```
/****************************************************************************/
{
        // block that does something
}

/****************************************************************************/

{
        // block that does something else
}

/****************************************************************************/ 
```

我不想做的是按住“*”，直到它打印出正确数量的星星。不想复制粘贴这样的评论。

有什么提示吗？

**--------------编辑-------------** 找到解决方案： *Steve Fenton* - 创建一个片段，tyvm ;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:16:04.023

您可以在 Visual Studio 中创建自定义代码片段以加快速度，但请对此进行讨论，以确保处理代码的每个人都对约定感到满意。在现代 IDE 中，这种注释真的很吵，很多人不希望代码中到处都是这种分隔符。

您使用适当的语言导入片段文件`Tools > Code Snippet Manager`并将它们放置在适当的语言下。

一旦导入（您可能需要重新启动 Visual Studio），您键入快捷方式并点击选项卡... 即`bigc`然后`TAB`。

文件：bigc.snippet

```
<?xml version="1.0" encoding="utf-8" ?> 
<CodeSnippets xmlns="http://schemas.microsoft.com/VisualStudio/CodeSnippet">
    <CodeSnippet Format="1.0.0">
        <Header>
          <Title>Crazy Big Comment</Title>
          <Description>Inserts a crazy big comment block.</Description>
          <Author>Steve Fenton</Author>
          <Shortcut>bigc</Shortcut>
          <SnippetTypes>
            <SnippetType>Expansion</SnippetType>
          </SnippetTypes>          
        </Header>
        <Snippet>
            <Code Language="CSharp" Kind="any">
                <![CDATA[
                    // ************************************************************************
                ]]>
            </Code>
        </Snippet>
    </CodeSnippet>
</CodeSnippets> 
```

有关于[在 Codeproject 上创建自定义片段的说明](http://www.codeproject.com/Articles/292073/Extending-Visual-Studio-Part-1-Creating-Code-Snipp)- 为 2010 年编写，但适用于 2012 年。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:26:37.080

虽然与您要求的不完全相同，但我认为提供相同的功能和更多功能。
您可以在 Visual Studio 中使用一些区域，这些区域会将您的代码分成可收缩和可扩展的部分，以便轻松分离代码块。

例如：

```
#Region "This is the code to be collapsed" 
    Private components As System.ComponentModel.Container
    Dim WithEvents Form1 As System.Windows.Forms.Form

    Private Sub InitializeComponent()
        components = New System.ComponentModel.Container
        Me.Text = "Form1" 
    End Sub
#End Region 
```

资料来源：[MSDN](http://msdn.microsoft.com/en-us/library/6xywk05b.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:30:44.720

如果您正在编写足够大的程序以保证将部分分离成单独的代码块，我建议这是开始创建子程序的好点。如果您选择代码并右键单击 Refactor | Visual Studio 提供创建子过程的支持。提取方法。

或者，您是否查看过 region 关键字？这具有类似于您请求的功能的意图，但得到了 Visual Studio IDE 的支持。 [http://msdn.microsoft.com/en-us/library/9a1ybwek(v=vs.110).aspx](http://msdn.microsoft.com/en-us/library/9a1ybwek(v=vs.110).aspx)

# c# - 从 ViewModel 的视图上创建自动生成的 DropDownList

> ID：14383311
> 
> 赞同：2
> 
> 时间：2013-01-17T16:11:41.527
> 
> 标签：c#, .net, asp.net-mvc

我希望在 .NET MVC 中实现，但试图弄清楚如何实际做到这一点。目前在我的 ViewModel 上，我有（例如）：

```
public class GroupPolicyViewModel
{
   public int PolicyId { get; set; }
   public int HistoryId{ get; set; }
   public SelectList ProductList { get; set; } // tried this
   public List<Product> ProductList1 { get; set; } // tried this
} 
```

每当我尝试从这个 ViewModel 自动生成我的视图时，ProductList 都会被忽略。有没有办法从 ViewModel 自动生成 DropDownList？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T16:16:12.503

有型号

```
public class GroupPolicyViewModel
{
   public int PolicyId { get; set; }
   public int HistoryId{ get; set; }
   public int SelectedProductId{ get; set; }   
   public List<Product> ProductList { get; set; } 
} 
```

您可以创建 DropDownList

```
@Html.DropDownListFor(m => m.SelectedProductId, 
                  new SelectList(Model.ProductList, "ProductId", "ProductName")) 
```

或者，如果您的模型中有 SelectList of products

```
@Html.DropDownListFor(m => m.SelectedProductId, Model.ProductSelectList) 
```

如果你想要一些生成的代码，你需要使用脚手架选项来提供数据上下文类。这是很好的教程[MVC 音乐商店](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-5)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T16:25:03.420

您可以（来自 VS2010）在创建新控制器和使用实体框架时。在向导中指定包括实体框架和读/写操作，向导将创建控制器和视图。

![在此处输入图像描述](../Images/514a9dd9a23301ba3cca924aeea3ef1b.png)

它会在控制器中生成这样的代码[还有更多]：

```
 public ActionResult Create()
    {
        ViewBag.CostCentre_ID = new SelectList(db.CostCentres, "ID", "Name");
        ViewBag.Location_ID = new SelectList(db.Locations, "ID", "Name");
        ViewBag.User_ID = new SelectList(db.UCMUsers, "User_ID", "EmployeeNo");
        return View();
    } 
```

这在视图中：

```
<div class="editor-field">
            @Html.DropDownList("User_ID", String.Empty)
            @Html.ValidationMessageFor(model => model.User_ID)
 </div> 
```

# android - Eclipse 打开资源声明 (F3)

> ID：14383320
> 
> 赞同：1
> 
> 时间：2013-01-17T16:12:07.493
> 
> 标签：android, eclipse, adt

如你所知 ：

在 Eclipse 中，当在一个类上按下 F3 时，会出现它的声明。但是如果我们在资源上按 F3，它会打开 R.java 并显示资源的 ID。

我的问题是：

有没有办法在 xml 文件而不是 R.java 中打开资源声明？（与早期版本的 ADT 插件一样？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T12:49:19.027

按 ctrl 然后单击资源名称，它将提示您在related.xml 文件中打开该资源。

其他想法可能像@Roman 提到的那样，但如果您的项目中有相同的 xml 文件，那就不好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T12:36:29.783

我怀疑您可以通过这种方式打开android资源。并非如此，但对于解决方法，您可以使用`Ctrl`++`Shift`按`R`名称打开资源文件。很方便。

# css - CSS中的前导连字符是什么意思？

> ID：14383322
> 
> 赞同：5
> 
> 时间：2013-01-17T16:12:09.203
> 
> 标签：css, hyphen

在[这篇博](http://css-tricks.com/perfect-full-page-background-image/)文中，我发现了以下 CSS 片段：

```
html { 
    background: url(images/bg.jpg) no-repeat center center fixed; 
    -webkit-background-size: cover;
    -moz-background-size: cover;
    -o-background-size: cover;
    background-size: cover;
} 
```

虽然我参加了一些基本的 CSS 课程，但我之前从未在 CSS 中看到过连字符`-webkit-...`。在这种情况下，它们似乎是指主要浏览器的布局引擎，但它们通常是什么意思？

谷歌搜索时，所有结果都以浏览器中的文本连字符为目标：-/

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T16:14:14.300

它们是供应商特定的 CSS 属性。

```
html { 
  background: url(images/bg.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover; /* WEBKIT - Chrome, Safari */
  -moz-background-size: cover; /* MOZILLA - Firefox */
  -o-background-size: cover; /* OPERA */
  background-size: cover;
} 
```

Hypens 用于引入**供应商特定**的 CSS 属性，这些属性由浏览器使用，但尚未被视为 CSS 的标准。

CSS中经常使用的前缀有：

```
Android: -webkit-
Chrome: -webkit-
Firefox: -moz-
Internet Explorer: -ms-
iOS: -webkit-
Opera: -o-
Safari: -webkit- 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T16:23:03.827

答案可以在[CSS 规范](http://www.w3.org/TR/CSS21/syndata.html#vendor-keywords)中找到：

> 以 -' 或 '_' 开头的关键字和属性名称保留用于特定于供应商的扩展。此类特定于供应商的扩展应具有以下格式之一：
> 
> '-' + 供应商标识符 + '-' + 有意义的名称
> '_' + 供应商标识符 + '-' + 有意义的名称

和：

> 任何当前或未来级别的 CSS 都保证不会在属性或关键字中使用初始破折号或下划线。因此，典型的 CSS 实现可能无法识别此类属性，并且可能会根据处理解析错误的规则忽略它们。然而，因为最初的破折号或下划线是语法的一部分，所以 CSS 2.1 实现者应该始终能够使用符合 CSS 的解析器，无论他们是否支持任何特定于供应商的扩展。

总而言之，带有初始破折号的属性名称被认为是无效的，因此它们可以被供应商特定的 CSS 规则使用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T16:15:17.683

连字符用于代替空格来分隔连接的单词。其他语言为此使用 CamelCase/snake case/et al..。

注意：这**并不**特定或仅限于浏览器前缀...

编辑： OP 澄清 - 他不想知道**前导**连字符表示什么...... [请参阅 Mathieu 的回答](https://stackoverflow.com/a/14383527/829835)，它几乎涵盖了它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T16:14:06.677

破折号表示它特定于特定浏览器并被视为非标准扩展。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T16:14:20.320

- 前缀表示它不是官方 CSS 规范的一部分，而是供应商特定的标签。它通常是为了让人们开始使用最终在 CSS 规范中但还没有准备好的特性。您应该避免在任何重要的事情上依赖它们。

所以 -moz- 例如意味着它特定于基于 Gecko 的浏览器（如 Mozilla Firefox）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T16:14:51.317

这些就是所谓的“供应商前缀”。通向浏览器名称的连字符仅针对这些浏览器。这用于实验性 CSS 属性。

# c# - 在 Monotouch 中下载多个文件的推荐模式（异步/多线程）

> ID：14383323
> 
> 赞同：2
> 
> 时间：2013-01-17T16:12:10.653
> 
> 标签：c#, .net, asynchronous, xamarin.ios, task-parallel-library

我有一个 MT 应用程序，可以从 Internet 下载内容（例如 - 大量图像 - 10K 到 5MB）。一个下载会话可以代表千兆字节的数据。我已将下载包装在 Parallel.ForEach 循环中，并且可以正常工作，但似乎在设备上使用的下载线程不止一个（我希望至少有两个线程来减少下载时间）。

注意：Parallel.ForEach**确实**在模拟器中创建了多个线程。我应该将所有下载作为任务放入线程池吗？我应该启动自己的队列和线程并绕过线程池吗？我知道线程池可以缩放以匹配设备，因此这可能不是最佳选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:01:28.167

在 IO 方面，只有应用程序开发人员知道他想要多少并行度。不要依赖 TPL——它对 IO 一无所知。

通过手动启动正确数量的任务、使用具有精确并行度的 PLINQ 或使用异步 IO（无线程）来自己创建适量的 IO 并行度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:45:28.283

你是通过 HTTP 下载的吗？我发现 WebClient 类适用于您所描述的事物类型。

就像是：

```
WebClient client = new WebClient();
client.DownloadFileCompleted += new AsyncCompletedEventHandler(client_DownloadFileCompleted);
client.DownloadFileAsync("http://stackoverflow.com", "test.txt"); 
```

```
void client_DownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
{
    //file finished downloading
} 
```

这样就不需要自己管理线程了。

此外，如果您想立即从文件中读取数据，您可能只想使用

```
DownloadDataAsync 
```

并自己保存文件。

# objective-c - 为什么 fscanf 在不使用参数 3+ 的地址的情况下可以正常工作？

> ID：14383324
> 
> 赞同：-1
> 
> 时间：2013-01-17T16:12:12.220
> 
> 标签：objective-c, c, memory-address

我正在按照本[教程](http://www.opengl-tutorial.org/beginners-tutorials/tutorial-7-model-loading/)（纯 c++）在 Objective-c 和 C 中制作 .obj 加载器。但我注意到，`fscanf()`即使您不向它发送要设置的变量的内存地址（仅发送值），该函数对我来说运行良好。对此有解释吗？

```
 Vec2 *uv;
 fscanf(file, "%f %f\n", uv.x, uv.y);
 [tempUVs addObject:uv]; 
```

请注意，参数 uv.x 和 uv.y 没有与号。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T16:17:07.427

当你这样做时，这是**未定义的行为。**任何事情都可能发生——它可能会崩溃，它可能碰巧正确运行，它可能*看起来*正确运行，同时默默地破坏内存，或者它可能会擦除你的硬盘驱动器。根据语言标准，这些都是允许的行为。

如果你用一个不错的编译器编译，你可以提高你的警告级别（例如`-Wall`，可能还`-Wextra -pedantic`使用 GCC 或 Clang），当你将错误的参数传递给`*scanf`/`*printf`系列函数时，它会警告你。具体来说，该[`-Wformat`](http://gcc.gnu.org/onlinedocs/gcc-4.7.2/gcc/Warning-Options.html#index-Wformat-264)选项会针对此类事情发出警告（`-Wformat`作为 的一部分包含在内`-Wall`）。

# amazon-web-services - 如何禁用 AWS CloudFront 中的目录列表？

> ID：14383326
> 
> 赞同：17
> 
> 时间：2013-01-17T16:12:15.460
> 
> 标签：amazon-web-services, amazon-s3, amazon-cloudfront

我有一个 S3 存储桶。通过[https://s3.amazonaws.com/...](https://s3.amazonaws.com/..)访问其根 URL 时。它告诉我`Access denied`。

此 S3 存储桶没有为 定义任何权限规则`Everyone`。

但是，通过我们的 CloudFront 访问同一个存储桶会返回`Domain Name`一个完整的存储桶。`ListBucketResult`

**CloudFront 提供了我们想要阻止的完整目录列表。**

如何通过 CloudFront 禁用该列表？

我尝试使`*`CloudFront 中的所有对象 ( ) 无效，但没有效果。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-24T04:56:29.250

你已经得到了吗？如果没有，您可以尝试为您的云端分发设置默认根对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-08-09T19:45:08.143

设置默认根应该可以工作。另一种选择是将任何 index.html 文件放在您的根目录下。您可以获取一个空白文本文件并将其重命名为“index.html”，或者也可以在文件中放入一些通用 HTML 消息。无论哪种方式，对您的云端分发的根目录的调用将默认为该文件，而不是列出您的目录/文件。

# python - 带有字符串索引的 Python 2 维度数组（矩阵）

> ID：14383333
> 
> 赞同：3
> 
> 时间：2013-01-17T16:12:36.130
> 
> 标签：python, data-structures, dictionary, matrix

在 Python (2.7) 中，是否有可以通过基于字符串的索引访问的原生二维数据结构？

我知道您可以拥有一个可以通过字符串索引访问的字典，例如：

```
>>> dic = dict()
>>> dic['grumpy'] = 'cat'
>>> print(dict['grumpy'])
'cat' 
```

但我想要的是一个可以像这样访问的数据结构：

```
>>> dic['grumpy']['frumpy'] = 'cat'
>>> print(dict['grumpy']['frumpy'])
'cat' 
```

数组似乎是不行的，因为它只允许基于整数的访问......有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T16:13:31.177

使用[`defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
from collections import defaultdict

nesteddict = defaultdict(dict)

nesteddict['abc']['spam'] = 'ham' 
```

请注意，您描述的是一个简单的嵌套结构；您也可以在不使用的情况下构建它，`defaultdict`但是该类使这样做更容易。

# ios - NSFetchedResultsController didChangeObject indexPath 为空

> ID：14383337
> 
> 赞同：3
> 
> 时间：2013-01-17T16:12:52.470
> 
> 标签：ios, objective-c, core-data, nsfetchedresultscontroller

我正在使用 NSFetchedResultsController 来管理带有 CoreData 的 PSTCollectionView 的实现。当我实现以下方法时， indexPath 和 newIndexPath 参数都通过 null

```
- (void)controller:(NSFetchedResultsController *)controller didChangeObject:(id)anObject atIndexPath:(NSIndexPath *)indexPath forChangeType:(NSFetchedResultsChangeType)type newIndexPath:(NSIndexPath *)newIndexPath
{
    switch (type) {
        case NSFetchedResultsChangeInsert:
            NSLog(@"%@", indexPath);
            NSLog(@"%@", indexPath);
            NSLog(@"______");
            break;

        default:
            break;
    }
} 
```

几个小时以来，我一直用这个把头撞在砖墙上，所以很感激任何指点。这可能与多线程有关吗？我正在一个单独的 NSManagedObjectContext 实例上的后台线程中处理一个大型 JSON 文件。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T16:14:56.010

因为插入没有 [old]indexPath？检查`newIndexPath`论据

# windows - windows下管理服务启动的脚本

> ID：14383339
> 
> 赞同：0
> 
> 时间：2013-01-17T16:13:01.863
> 
> 标签：windows, service, process, task

我目前正在寻找在 Windows 下管理服务启动/停止的最佳方法。

我将使用 windows 提供的任务调度器在特定时间启动脚本。

该脚本的目标是：

*   检查进程“X”是否正在运行
*   如果没有服务 Y 可以启动
*   如果是，请在一小时内检查进程“X”是否仍在运行

还有什么是最好的语言呢？Python是一个不错的选择吗？

塞巴斯蒂安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:50:22.897

这是一个批处理脚本（另存为.bat）

```
tasklist /nh /fi "imagename eq x.exe" | find /i "x.exe" >nul && goto :HOURCHECK || net start Y
exit >nul    
:HOURCHECK
timeout /t 3600
tasklist /nh /fi "imagename eq x.exe" | find /i "x.exe" >nul && REM Running || REM Not Running 
```

一小时后检查时，只需替换我的`REM`评论即可执行您想要的操作。

# css - 无法将 .svg 显示为背景图像

> ID：14383341
> 
> 赞同：0
> 
> 时间：2013-01-17T16:13:21.200
> 
> 标签：css, mobile, svg, screen-resolution

我正在尝试创建一个小的 HTML5 手机游戏。为了避免屏幕分辨率出现任何问题，我使用 .svg 作为背景图像。在本地服务器上工作时，图像不会显示在最终服务器上： http: [//tangera.bemoredifferent.com/](http://tangera.bemoredifferent.com/)。如果有人能解决这个问题，那就太好了。

丹尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:19:35.550

如果您喜欢使用 .svg 文件作为背景，您必须在样式表中添加以下代码

```
 background-size: cover; 
```

原因，请参阅文档[https://developer.mozilla.org/en-US/docs/CSS/background-size](https://developer.mozilla.org/en-US/docs/CSS/background-size)

在这里演示：http: [//jsfiddle.net/robertc/c9LgV/](http://jsfiddle.net/robertc/c9LgV/)

祝你好运 ！

# colors - Dynamics AX - 用不同颜色为多个网格单元着色

> ID：14383343
> 
> 赞同：2
> 
> 时间：2013-01-17T16:13:26.173
> 
> 标签：colors, grid, axapta, x++, dynamics-ax-2012

在 Dynamics AX 2012 中，有没有办法将多个单元格的背景颜色更改为不同的颜色？

```
Order Status     Ship Status     Order ID
[green]          [red]           SO-1234
[green]          [green]         SO-1235
[red]            [red]           SO-1236 
```

我编写了一个 displayOption 覆盖，可以更改一个单元格的颜色，但它似乎在最后应用了所有更改，所以无论您指定的最后一种颜色是应用于所有单元格的颜色。

```
_options.backColor(46080); //green
_options.affectedElementsByControl(OrderStatus.id());

//is there anyway to apply the first change, so I can make a second one?

_options.backColor(255); //red
_options.affectedElementsByControl(ShipStatus.id()); 
```

在上面列出的代码中，两种单元格背景颜色都是红色。

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T11:48:38.827

我有一个类似的任务要完成，但我没有找到在 Ax 中完成它的方法（好吧，从技术上讲，你可以尝试 Table control，但我强烈建议你不要这样做 - 你最终会大声咒骂）。

我所做的是实现了一个 WPF 用户控件并将[这篇文章用作模板](http://go4answers.webhost4life.com/Example/wpf-datagrid-change-single-cell-43270.aspx)。这是一个小教程（在答案 #7 中找到），它展示了如何在内置 WPF 数据网格控件中实现单元格背景转换器，以完成任务。

实现后，您可以使用 LINQ（如果使用 AX 2012 R2）、Web 服务或传递临时表来填充数据网格 - 有很多方法可以访问 AX 数据。

它可能不是最终的解决方案，但它确实有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T08:57:44.663

我是使用表格控件完成的（尽管 Maciej 建议您不要这样做）。 **它没有问题**。

您需要添加一个`table`控件来获取您的数据并将属性设置 `ColorScheme`为`RGB`

然后，覆盖您可以通过表控件的名称访问`FormControl editControl(int column, int row)` 每个值。请注意，您必须将具有正确数据类型的控件添加到表控件并为其命名。还将属性设置为。`value = data.cell(column, row).data();``data``ColorScheme``RGB`

如果您获得了所需背景颜色的 RGB 值，则可以通过以下方式设置此颜色

```
RealEdit.backgroundColor(WinAPI::RGB2int(real2int(R),real2int(G),real2int(B))); 
```

`RealEdit`是添加的控件的名称。

我这样做是为了显示一个填充了 0 到 1 之间值的矩阵，并显示一个颜色渐变叠加层，范围从绿色到红色。如果您想了解有关颜色转换的更多信息，请参阅[此链接。](https://en.wikipedia.org/wiki/HSL_and_HSV#From_HSV)

# javascript - 在 Android 网络浏览器上停止 300 毫秒的点击延迟

> ID：14383349
> 
> 赞同：2
> 
> 时间：2013-01-17T16:13:37.867
> 
> 标签：javascript, onclick, touch

我有一个在按下按钮时播放 mp3 文件的页面，使用 javascript 如下：

```
onclick="playAudio" 
```

有明显的 300ms 延迟。我只想通过 html5 浏览器使用它，只使用 nexus 7。所以我不想要 IE6 等的任何备份代码。我见过的每个解决方案似乎都非常复杂，我无法让它工作。

没有简单的javascript解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:27:25.467

查看 github 上的 Fastclick 项目。如果我理解您的问题，您只想摆脱触摸设备上的 300 毫秒延迟。这个项目是一个 polyfill，使触摸用户界面更加敏捷和响应。这是网址：

[https://github.com/ftlabs/fastclick](https://github.com/ftlabs/fastclick)

用例：

只需像这样包含 fastclick 库：

```
<script type='application/javascript' src='/path/to/fastclick.js'></script> 
```

然后只需通过在您的主应用程序 js 文件中添加以下内容来实例化它：

```
window.addEventListener('load', function() {
     new FastClick(document.body);
}, false); 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:31:45.950

据我了解您的问题，此问题与播放音频有关，不一定与按钮交互有关。因此，在此基础上，我将尝试在下面回答您的问题。

我假设您为此使用 HTML5 音频 API。你看过`preload`属性吗？它有一个名为的值`auto`，它告诉浏览器预加载音频可能是个好主意。这样做的缺点是您可能会给服务器带来不必要的开销，因为无论如何您几乎总是在下载音频。使用这种方法，您可以通过 JavaScript 订阅一个`canplaythrough`事件，告诉您音频何时已下载并准备好播放。

可以在此处找到有关此主题的更多详细信息：

*   [http://blogs.msdn.com/b/ie/archive/2011/05/13/unlocking-the-power-of-html5-lt-audio-gt.aspx](http://blogs.msdn.com/b/ie/archive/2011/05/13/unlocking-the-power-of-html5-lt-audio-gt.aspx)
*   [https://developer.mozilla.org/en-US/docs/HTML/Element/audio](https://developer.mozilla.org/en-US/docs/HTML/Element/audio)

# google-chrome - Selenium Standalone 无法在 Google Chrome 中运行测试

> ID：14383352
> 
> 赞同：0
> 
> 时间：2013-01-17T16:13:44.620
> 
> 标签：google-chrome, selenium, jenkins

我正在使用 jenkins 在 windows xp 节点中运行 selenium 独立服务器和 html 测试套件。我已经设法让它运行并为 iexplore 和 firefox 工作，但是当涉及到 googlechrome 时，它​​无法启动它。

这是我用来在 googlechrome 中运行测试的命令：

```
java -jar C:\...\selenium-server-standalone-2.28.0.jar -htmlSuite "*googlechrome C:\Program Files\Google\Chrome\Application\chrome.exe --allow-file-access-from-files –-disable-web-security" file:///C:/WebTest/Tests/ C:/WebTest/Tests/TestSuite.html C:\jenkins\workspace\sp-webTest\resultados\resultadoGC.html 
```

我得到的错误是：

```
12:43:08.044 INFO - Launching Google Chrome...
HTML suite exception seen:
java.lang.NullPointerException
    at org.openqa.selenium.server.browserlaunchers.GoogleChromeLauncher.createCommandArray(GoogleChromeLauncher.java:168)
    at org.openqa.selenium.server.browserlaunchers.GoogleChromeLauncher.launch(GoogleChromeLauncher.java:82)
    at org.openqa.selenium.server.browserlaunchers.AbstractBrowserLauncher.launchHTMLSuite(AbstractBrowserLauncher.java:47)
    at org.openqa.selenium.server.htmlrunner.HTMLLauncher.runHTMLSuite(HTMLLauncher.java:145)
    at org.openqa.selenium.server.htmlrunner.HTMLLauncher.runHTMLSuite(HTMLLauncher.java:196)
    at org.openqa.selenium.server.SeleniumServer.runHtmlSuite(SeleniumServer.java:611)
    at org.openqa.selenium.server.SeleniumServer.boot(SeleniumServer.java:285)
    at org.openqa.selenium.server.SeleniumServer.main(SeleniumServer.java:243)
    at org.openqa.grid.selenium.GridLauncher.main(GridLauncher.java:54) 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:07:40.447

在 java 中指定 webdriver 会有所帮助。

```
 System.setProperty("webdriver.chrome.driver", "c:/chromedriver.exe");
    driver = new ChromeDriver(); 
```

chrome 驱动程序的下载链接 [http://code.google.com/p/chromedriver/downloads/list](http://code.google.com/p/chromedriver/downloads/list)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:45:08.773

我让它工作了，以某种方式在命令中向 chrome 发送标志会导致 selenium 抛出空指针异常。所以我所做的是将chrome添加到mi xp节点中的PATH，使用Selenium插件在jenkins中运行html测试套件，并使用谷歌浏览器指定一个以“https://”开头的起始网址和一个以“开头的起始网址” file:///" 是一团糟，无法让它像那样工作。我还在“其他”输入框中添加了 -trustAllSSLCertificates。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-22T11:28:10.740

对我来说，它在 Windows 上工作：

```
java -jar "c:\selenium-server-standalone-2.35.0.jar" -forcedBrowserMode "*googlechrome c:\Program Files\Google\Chrome\Application\chrome.exe" 
```

# javascript - 回发到通过Javascript插入或附加的telerik文本框后，文本框不保留值或丢失值

> ID：14383354
> 
> 赞同：0
> 
> 时间：2013-01-17T16:13:46.643
> 
> 标签：javascript, asp.net, c#-4.0, textbox, telerik

我的 radTextBox 值有问题，通过 JavaScript 插入的值在回发后被删除，但通过 c# 插入的值在那里。我从 radgrid 中获取值并将它们插入到文本框中。

场景：

1：通过 JavaScript 插入或附加值 2：通过触发回发的 c# 方法插入或附加值

# 文本框的 HTML 代码：

```
<telerik:RadTextBox ID="rtxtToEmail" runat="server" Width="300px" Skin="Office2007"
                            TextMode="MultiLine" ViewStateMode="Enabled">
                        </telerik:RadTextBox> 
```

# 调用 JavaScript 函数的 Button 的 Html 代码：

```
<telerik:RadButton ID="rdbtnTo" runat="server" Skin="Office2007" Width="68px" Text="Selected" OnClientClicked="ToSelected" AutoPostBack="false">
                    </telerik:RadButton> 
```

# Javascript代码：

```
function ToSelected(sender, args) {
                         var grid = $find("<%=rgWOAssignedType.ClientID %>");
                        var DataItem = grid.get_masterTableView().get_dataItems()[grid._selectedIndexes];
                        var keyValues = DataItem.getDataKeyValue("Email");
                        //alert(keyValues); return false;

                        if (keyValues != "") {
                            document.getElementById("<%= rtxtToEmail.ClientID %>").value +=
                             keyValues + ";"
                        }
                        return false;
                    } 
```

# 触发回发的按钮单击事件上的 C# 代码：

```
protected void rbtnToClient_Click(object sender, EventArgs e)
        {
            try
            {
                #region Fill To CLient Email

                if (ViewState["ClientEmail"] != null)
                {
                    if (!string.IsNullOrWhiteSpace(ViewState["ClientEmail"].ToString()))
                    {
                        rtxtToEmail.Text += ViewState["ClientEmail"].ToString() + ";";
                    }
                }

                #endregion
            }
            catch (Exception ex)
            {
                try { throw new WTLIB.WTException(ex); }
                catch (WTLIB.WTException eX) { eX.WriteToEventLog(); eX.MessageError(Page); }
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:38:36.633

由于您使用的是服务器控件，因此您还必须使用提供的[javascript API](http://www.telerik.com/help/aspnet-ajax/input-client-side-basics.html)，否则该控件将无法正常工作。

> get_textBoxValue(), set_textBoxValue() string 获取或设置用户输入文本的值。如果它包含错误，则不会将其分配为输入控件的值。

# knockout.js - 两种视图模型，一种用于整个页面，另一种用于小区域

> ID：14383358
> 
> 赞同：1
> 
> 时间：2013-01-17T16:13:57.403
> 
> 标签：knockout.js

我知道 `ko.applyBindings`可以采用第二个参数，这是它将绑定到的 DOM 元素

但我的情况不同我有一个大页面我想通过使用为它指定一个视图模型 `ko.applyBindings(bigModel)`

然后在页面中间有一个小的侧边栏部分我想通过使用为其指定另一个视图模型 `ko.applyBindings(smallModel, $("#sidebar")[0])`

当我在小部分中使用敲除使用有界属性时，`#sidebar`它会引发错误`Unable to parse bindings`，但它仍然绑定值（例如`<span 'text:propertyOnSmallModel' />`），之后我尝试将这些属性添加为空属性`bigModel`，但没有抛出。

我如何应用这个，使用两个视图模型，一个用于整个页面，另一个用于特定部分

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T16:17:50.397

您可以使用此处理程序告诉 Knockout.js[停止绑定：](http://knockoutjs.com/documentation/custom-bindings-controlling-descendant-bindings.html)

```
ko.bindingHandlers.stopBinding = {
    init: function ()
    {
        return { controlsDescendantBindings: true };
    }
};

ko.virtualElements.allowedBindings.stopBinding = true; 
```

然后使用：

```
 <!-- ko stopBinding: true -->
        <!-- /ko --> 
```

html 注释在您的网页中停止绑定。

因此，您将较大的模型绑定到整个页面，使用上面的 html 注释来阻止该模型绑定到您的特定部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:52:35.403

我认为拥有子视图模型没有任何问题。将侧边栏视图模型添加为父视图模型的属性。使用“with”绑定将子视图模型绑定到您的侧边栏元素。

# c# - 为什么我的 Storboard 不显示？

> ID：14383386
> 
> 赞同：2
> 
> 时间：2013-01-17T16:15:40.257
> 
> 标签：c#, xaml, windows-phone-8

在我的`MainPage.xaml`我已经定义了这个故事板。当应用程序第一次运行时它运行良好，我可以调用该`Begin()`函数并且一切都很好。但是如果我转到另一个`.xaml`页面并返回，当我调用该`Begin()`函数时它不起作用。

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T17:37:53.480

当您说“返回”时，您是在使用 NavigationService.GoBack() 还是在使用 NavigationService.Navigate("myFirstPage.xaml")？如果您使用的是 Navigate() 方法，那么您正在向前导航到新页面。如果您使用后退导航，那么您将转到与以前相同的页面实例。

另请注意，WP7/8 并不总是将页面缓存在后台堆栈中。当内存压力出现时（例如，由于 D3D 使用），后台堆栈中的页面可能会被 GCed。[您可以使用Page.NavigationCacheMode](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.controls.page.navigationcachemode%28v=vs.105%29.aspx)和[Frame.CacheSize](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.windows.controls.frame.cachesize%28v=vs.105%29.aspx)微调应用程序的后台导航缓存。

# ubuntu - NAT 后面的 PC - 需要访问基于 Web 的应用程序（使用 Web 浏览器）

> ID：14383390
> 
> 赞同：-1
> 
> 时间：2013-01-17T16:15:55.520
> 
> 标签：ubuntu, ssh, remote-access, putty, nat

我有一台远程无头 PC，它位于 ISP 的 NAT 防火墙后面，这意味着没有公共 IP 地址。

这台远程/无头 PC 成功连接到反向 ssh 隧道，我可以通过以下方式从任何地方访问它

```
ssh -p port# remoteuseid@middleip# 
```

但是，我需要的是能够访问像 Nagios 和 Webmin 这样的应用程序（安装在远程/无头 PC 上），这样我就可以为它提供远程支持。（请注意，远程/无头 PC 基于 Ubuntu Server 12.04 Minimal，没有 GUI）

它实际上并不是为全世界托管网站的网络服务器；只是充当基于网络的患者记录系统的医疗诊所的服务器。除了 Patient Recod 系统之外，还安装了诸如 Nagios 和 Webmin 之类的东西，用于远程支持和管理。现在，这台 PC 位于 ISP 的 NAT 防火墙后面。但是，我已经成功配置了 Reverse-SSH-Tunneling，并且可以使用像 Putty 这样的 SSH 终端随时随地访问这台 PC。现在我需要能够使用我的网络浏览器从远程位置登录它的 Nagios 和 Webmin。

有人建议如下：

> 您可以使用 SOCKS 代理访问 Web 应用程序。查找使用 ssh 创建代理的示例 - 隧道连接的工作方式与任何其他 ssh 连接相同。

所以我需要一些帮助，请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:23:14.650

如果需要，ssh 将通过隧道传输 HTTP。

将您的 ssh 命令更改为

```
ssh -p port# -Lsomeport#:localhost:80 remoteuseid@middleip# 
```

然后，当您访问`http://localhost:someport#/xxx`本地计算机时，您的连接将被发送到您要通过 ssh 访问的计算机上的 Web 服务器。

# php - 如何在drupal中使用您所需的查询通过代码生成视图？

> ID：14383391
> 
> 赞同：0
> 
> 时间：2013-01-17T16:15:56.253
> 
> 标签：php, arguments, drupal-views

我想为视图创建一个过滤器，但该过滤器正在从用户那里获取价值。

我尝试了这样做的论据，但没有成功。

所以我才知道我可以直接使用查询来过滤我的视图。

如何通过在 drupal 中使用我自己的查询进行编码来呈现 drupl 的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:18:47.933

我认为您不允许使用手动查询。但是对于用户过滤器，您可以“公开”数据库字段，以便公开字段以用户可以输入所需数据的形式显示在“视图”页面上，或者如果公开字段是例如语言字段，则选择它。

# c# - 如何将 FontFamily 存储为静态资源？

> ID：14383400
> 
> 赞同：7
> 
> 时间：2013-01-17T16:16:29.930
> 
> 标签：c#, silverlight, xaml

我试图弄清楚如何在我的 App.xaml 中设置 FontFamily，以便我可以在需要的任何地方声明式地应用该样式。在`ResourceDictionary`我可以应用类似的东西：

```
<System:Double x:Key="SmallTextSize">10</System:Double> 
```

然后我想做的是：

```
<FontFamily x:Key="MainFont">Wingdings</FontFamily> 
```

但是，我唯一能做的就是隐式样式，它需要一个目标，以及我想要使用的字体的多个声明。我需要能够将最终得到的样式应用于任何控件的 FontFamily 属性。

这是我目前能来的最接近的：

```
<System:String x:Key="MainFont">Wingdings</System:String>
<Style TargetType="UserControl">
      <Setter Property="FontFamily" Value="{StaticResource MainFont}"></Setter>
</Style> 
```

此实现不适用于类似的东西，因为它期望 MainFont 是 FontFamily，而不是字符串：

```
<TextBlock Text="{Binding}" Margin="0,0,0,4" FontWeight="Normal" FontFamily="{StaticResource MainFont}" FontSize="14.667" /> 
```

我该如何处理？谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T16:56:24.420

不确定我是否完全理解这一点，因为我所做的是；

```
<FontFamily x:Key="MainFont">WingDings</FontFamily> 
```

如果您正在谈论然后将其应用于多个实例而不必向每个实例声明它，那么我会喜欢；

```
<Object>
   <Object.Resources>
      <Style TargetType="TextBlock" BasedOn="{StaticResource YourDefaultTextBlockStyleToInheritOtherProperties}">
         <Setter Property="FontFamily" Value="{StaticResource MainFont}"/>
      </Style>
   </Object.Resources>

   <!-- Your FontFamily automatically gets inherited to all children of the object 
        whether your object is say a Grid, or StackPanel, 
        or even an entire UserControl -->    
   <TextBlock Text="ABCDEFG"/>
   <TextBlock Text="12345"/>
   <TextBlock Text="!()*&@#"/>

</Object> 
```

# c# - 多个 Pen 对象 C#

> ID：14383406
> 
> 赞同：2
> 
> 时间：2013-01-17T16:16:39.790
> 
> 标签：c#, object, draw, pen

我有一个表格，我在其中使用 Pen 对象绘制了一些线条。

我想知道我是否应该使用一个共享对象笔，或者每画一条线使用一个对象笔。

更好用：（所有行共享一个对象）

```
Pen green;
green = new Pen(Color,size);
foreach(line to be drawn)
   graphics.DrawLine(green, x1, y1, x2, y2); 
```

或者如下：（每一行都是一个对象）

```
foreach(line to be drawn)
   Pen green = new Pen(Color.Green, 3);
   graphics.DrawLine(green, x1, y1, x2, y2);
   green.Dispose(); 
```

事实上，这两个例子都做了我想要的，但我想知道在这种情况下最推荐什么。

注意：我使用的是 C# (WinForms)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:30:27.413

如果我是你

```
using (var green = new Pen(Color,size)
{
    foreach(line to be drawn)
    {
        graphics.DrawLine(green, x1, y1, x2, y2);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T16:23:31.747

看看这个：[如果我不在笔对象上调用 Dispose 会发生什么？](https://stackoverflow.com/questions/4267729/what-happens-if-i-dont-call-dispose-on-the-pen-object) 似乎在这里得到了完美的解释......

简而言之，这个似乎更好：

```
Pen green = new Pen(Color,size);

foreach(line to be drawn)
   graphics.DrawLine(green, x1, y1, x2, y2);

green.Dispose(); 
```

# java - Android 更多菜单文本不可读（黑色背景上的黑色文本？）

> ID：14383412
> 
> 赞同：0
> 
> 时间：2013-01-17T16:16:47.833
> 
> 标签：java, android, menu, colors

我的 Android 应用程序中有一个菜单，其中包含超过 6 个项目（7 个项目），因此 Android 会自动添加一个“更多”项目作为最后一个项目。当我点击“更多”项目时，我会得到一个新菜单，其中包含我的第 6 项和第 7 项。但是，文本是不可见的。

该图像来自我的模拟器 Android 2.3.3，但同样出现在我的物理手机索尼爱立信 X10i 和三星 Galaxy S3 上。

这是在 styles.xml 中设置主题的方式：

```
<style name="SespActivityTheme" parent="android:Theme.Light.NoTitleBar">
    <item name="android:orientation">vertical</item>
    <item name="android:windowSoftInputMode">stateHidden</item>
</style> 
```

我尝试将应用程序的主题更改为 Light 和 Dark 主题，但没有结果。我试图谷歌这个，没有找到任何有同样问题的人。除了这种风格之外，我还没有尝试更改任何文本或图标的颜色。

如果我长按文本框，我会在菜单中出现相同类型的错误，但是它全是白色而不是黑色：

任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T12:48:25.663

我发现了问题！以下几行产生了这个奇怪的错误：

```
<item name="android:orientation">vertical</item> 
```

我无法解释为什么，但是如果我从我的样式中删除这一行并将其放在所有活动 XML 中，那么我可以再次阅读文本。

# python - 如何使用 Python 从文本文件中提取数据？

> ID：14383415
> 
> 赞同：-6
> 
> 时间：2013-01-17T16:16:52.163
> 
> 标签：python

这是示例文本：

```
ACCESSION NUMBER:           0001054274-12-000001
CONFORMED SUBMISSION TYPE:  D
PUBLIC DOCUMENT COUNT:      1
ITEM INFORMATION:           Rule 506
FILED AS OF DATE:           20120301
DATE AS OF CHANGE:          20120301
EFFECTIVENESS DATE:         20120301

FILER:

COMPANY DATA:   
    COMPANY CONFORMED NAME:               Alliqua, Inc.
    CENTRAL INDEX KEY:                    0001054274
    STANDARD INDUSTRIAL CLASSIFICATION:   SURGICAL & MEDICAL INSTRUMENTS & APPARATUS [3841]
    IRS NUMBER:                           582349413
    STATE OF INCORPORATION:               FL
    FISCAL YEAR END:                      1220A 
```

我正在尝试提取所有变量（登录号、符合的提交类型、...、会计年度结束）并最终将它们写入 .csv 文件。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:20:04.253

我会按第一个拆分行`:`并剥离结果：

```
data = {}
with open(filename) as inputf:
    for line in inputf:
        if not ':' in line:
            continue
        label, value = map(str.strip, line.split(':', 1))
        if label and value:
            data[label] = value 
```

它输出以下映射：

```
{'ACCESSION NUMBER': '0001054274-12-000001',
 'CENTRAL INDEX KEY': '0001054274',
 'COMPANY CONFORMED NAME': 'Alliqua, Inc.',
 'CONFORMED SUBMISSION TYPE': 'D',
 'DATE AS OF CHANGE': '20120301',
 'EFFECTIVENESS DATE': '20120301',
 'FILED AS OF DATE': '20120301',
 'FISCAL YEAR END': '1220A',
 'IRS NUMBER': '582349413',
 'ITEM INFORMATION': 'Rule 506',
 'PUBLIC DOCUMENT COUNT': '1',
 'STANDARD INDUSTRIAL CLASSIFICATION': 'SURGICAL & MEDICAL INSTRUMENTS & APPARATUS [3841]',
 'STATE OF INCORPORATION': 'FL'} 
```

# android - 广播以获取应用程序启动计数

> ID：14383421
> 
> 赞同：5
> 
> 时间：2013-01-17T16:17:00.193
> 
> 标签：android, android-activity, broadcast, launch

如何获取所有应用程序的启动次数？我有已安装应用程序的完整列表，并且在安装应用程序时有广播，但我需要任何应用程序的启动计数。我看到这个[应用程序](https://play.google.com/store/apps/details?id=com.rootuninstaller.bstatspro&feature=more_from_developer#?t=W251bGwsMSwxLDEwMiwiY29tLnJvb3R1bmluc3RhbGxlci5ic3RhdHNwcm8iXQ..)。你有 cpu 时间、前台时间和启动计数......他们是怎么做到的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T16:26:58.323

最后我做到了！我创建了一个 AlarmManager，它每分钟检查一次正在运行的应用程序，如果一个应用程序正在运行（后台或活动），我会检查我最后一次看到它的时间。如果这个时间大于一分钟，我会增加计数。现在我正在尝试将应用程序发送到外部服务器的数据数量，我有这些数据，但是你知道这些数据是来自我安装了我的应用程序还是来自我启动智能手机时？

```
 Long txByte = TrafficStats.getUidTxBytes(listApp.getAppsRunning().get(i).getPid()); 
```

此代码用于获取计数时间

```
for(int i=0; i< listApp.getAppsRunning().size(); i++)
    {
        String pName = listApp.getAppsRunning().get(i).getPackageName();
        String Ldate = "0";
        int Nrun = 0;
        Long Ntime = null, Ndata = null ;
        Cursor c=db.fetchInstalled(pName);
        if(c.moveToFirst())
        {
            Nrun =  c.getInt(2);
            Ldate = c.getString(3);
            Ntime = c.getLong(4);
            Ndata = c.getLong(5);

            Log.d("db", "last time: " + Nrun+ " time: " + Ldate);
        }

        if(Ldate.equalsIgnoreCase("0"))
        {
            Nrun++;
            db.updateLaunchAndTime(Nrun, lastUpdated, pName, Ntime, Ndata);
        }
        else
        {
            SimpleDateFormat dateFormat = new SimpleDateFormat("MMMM dd, yyyy h:mmaa"); 
            Date lastDate = null;
            Date currentDate = null;
            try {
                lastDate = dateFormat.parse(Ldate);
                currentDate = dateFormat.parse(lastUpdated);
            } catch (ParseException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            //int pid = android.os.Process.getUidForName(listApp.getAppsRunning().get(i).getPid());
            Long txByte = TrafficStats.getUidTxBytes(listApp.getAppsRunning().get(i).getPid());
            Log.d("pid process", "pid: " + listApp.getAppsRunning().get(i).getPid());

            Ndata = txByte;

            Log.d("data send", "send: " + Ndata);

            long diff =  currentDate.getTime() - lastDate.getTime();
            if(diff > 100* 1000)
            {
                Log.d("db", "difference plus 1 min app: " + pName);
                Nrun++;
            }
            Ntime = Ntime+diff;

            db.updateLaunchAndTime(Nrun, lastUpdated, pName, Ntime, Ndata);
        }
        //db.insertRunningP(pName   , lastUpdated);
    }
    db.close() 
```

我检查了这段代码的功耗，不到总电池的 3%，所以现在这是我找到的最好的解决方案

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T16:40:25.667

我以前从未这样做过，但我很确定[http://developer.android.com/reference/android/app/ActivityManager.html](http://developer.android.com/reference/android/app/ActivityManager.html)提供了您需要的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-26T07:37:57.703

如果您已植根您的设备，您还可以阅读使用情况统计文件以`/data/system/usagestats/usage-*`获取详细信息。

# r - R中的动态子集条件

> ID：14383422
> 
> 赞同：2
> 
> 时间：2013-01-17T16:17:06.517
> 
> 标签：r, subset

我正在尝试实现一个函数，该函数基于任意长度的列名列表获取动态子集

静态代码是：

```
s <- c("s0","s1","s2")
d.subset <- d[ d$s0 > 0 | d$s1 > 0 | d$s2 > 0,] 
```

但是，我想生成`d$s0 > 0 | d$s1 > 0 | d$s2 > 0`基于 s 的部分。我尝试使用 as.formula() 来生成它，但它给了我一个“无效的公式”错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T16:33:41.590

一个示例数据框：

```
d <- data.frame(s0 = c(0,1,0,0), s1 = c(1,1,1,0), s2 = c(0,1,1,0))

s <- c("s0","s1","s2") 
```

这是一个简单的解决方案`rowSums`：

```
d[as.logical(rowSums(d[s] > 0)), ] 
```

结果：

```
 s0 s1 s2
1  0  1  0
2  1  1  1
3  0  1  1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T16:30:48.440

你的代码是不可[重现](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)的，所以这是你想要的，我认为你想使用索引而不是`$`运算符：

```
s <- c("s0","s1","s2")
d.subset <- d[ d[, s[1]] > 0 | d[, s[2]] > 0 | d[, s[3]] > 0,] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-18T01:17:32.673

受@sven-hohenstein 的回答启发，这里是一个通用函数，它将基于谓词列表进行过滤，以形式指定`column=list(binary_operator, rhs)`（例如`x=list(`<=`, 3)`for `x <= 3`）。

```
#' Filter a data frame dynamically
#'
#' @param df data frame to filter
#' @param controls list of filters (with optional operators)
filter_data = function(df, controls) {

  evaluate = function(predicate, value) {
    if (is.list(predicate)) {
      operator = predicate[[1L]]
      rhs = predicate[[2L]]
    } else {
      operator = `==`
      rhs = predicate
    }
    return(operator(value, rhs))
  }

  index = apply(
    mapply(evaluate, predicate=controls, value=df[names(controls)]), 1L, all
  )

  return(df[index, ])

} 
```

这是一个使用过滤功能来应用条件的示例`x == 2 & y <= 2.5 & z != 'C'`：

```
# create example data
df = data.frame(
  x=sample(1:3, 100L, TRUE),
  y=runif(100L, 1, 5),
  z=sample(c('A', 'B', 'C'), 100L, TRUE)
)

controls = list(x=2L, y=list(`<=`, 2.5), z=list(`!=`, 'C'))

filter_data(df, controls) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T16:48:47.277

（编辑：强烈不推荐此解决方案。有关详细信息，请参阅评论和[此 Stack Overflow 问题](https://stackoverflow.com/questions/13649979/what-specifically-are-the-dangers-of-evalparse)。）

我刚刚学会了这个技巧：把它全部写成一个字符串并使用`eval(parse(text=`. 也许对于这个例子来说不是最好的，但它可以更普遍地使用。

```
s <- c("s0","s1","s2")
s.1 <- paste0("d$",s," > 0",collapse=" | ")
d.subset <- eval(parse(text=paste0("d[",s.1,",]"))) 
```

# ajax - ajax 页面加载视图页面的 ajax 寻呼机由 ajax

> ID：14383424
> 
> 赞同：1
> 
> 时间：2013-01-17T16:17:12.027
> 
> 标签：ajax, drupal, views, pager

我使用 Ajax 加载 vieschs views_embed_vesch。此视图包括 Ajax PAGER。这没用。Drupal.attachBehaviors 也不起作用。我认为 Drupal.settings 需要从视图中添加数据。

```
(function($){
 Drupal.behaviors.ajax_views = {
    attach: function (context, settings) {
        //alert('dddd');
        $('a.views-link').click(function(){
           // alert('sfsdfsd')
          var relArr = $(this).attr('rel').split(' ');

          $.ajax({
           type: "POST",
           url: Drupal.settings.basePath + 'ajax-views/'+relArr[0]+'/'+relArr[1],
           dataType: 'json',
           success: function (datad){
            alert(datad.seet.views);
          //  Drupal.settings.views = datad.seet.views ;              

             $('div#block-system-main > div.content').append(datad.view);

          },           
        });   
        return false;
        });     
} 
```

}; })(jQuery);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T15:35:42.577

试试这个模块通过 ajax 加载内容。它将自动附加行为与 ajax 加载的内容。

[https://drupal.org/project/ajax_links_api](https://drupal.org/project/ajax_links_api)

# sql - 在 Access 中填充项目

> ID：14383426
> 
> 赞同：0
> 
> 时间：2013-01-17T16:17:32.333
> 
> 标签：sql, ms-access

我在访问表单上有两个下拉菜单，一个用于主类别，一个用于子类别。根据您在主类别中选择的内容，应相应填充子类别下拉列表。

现在基于子类别中选择的内容，然后应该填充一个文本框。

自从我使用 SQL 完成任何工作以来已经有一段时间了，即使那时我也没有经常使用 MS 访问，因此非常感谢任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:25:46.103

因此，如果您有两个组合框，Combobox1 和 Combobox2，以及一个文本框，请像这样设置它们：像这样制作 Combobox2 属性（根据您的需要进行更改）

```
Row Source Type = Table/Query
Row Source = SELECT <Fields> FROM <Table> WHERE Crit_Field=[Combobox1] 
```

Combobox1 应该有一个用于 Change 事件的 Sub，它告诉 Combobox2 填充：

```
Private Sub Combobox1_Change()
    Me.Combobox2.Requery
End Sub 
```

Combobox2 的 Change 事件也应该有一个 Sub，它告诉文本框填充：

```
Private Sub Combobox2_Change()
    ' Stuff that populates the textbox
End Sub 
```

# javascript - 来自两个或多个函数的 Javascript 多个条件

> ID：14383430
> 
> 赞同：0
> 
> 时间：2013-01-17T16:17:45.407
> 
> 标签：javascript, conditional-statements

如果这很简单，请原谅我。我是 JavaScript 新手。

我正在尝试根据用户对问题的回答来显示或隐藏某些 div。我为每个问题创建了一个函数，该函数根据其值获取该问题的结果。但我无法让 && 附加条件起作用。仅当两个条件都为真时，我才需要 div 出现。它甚至似乎无法识别 && 及以后的任何东西。Q1 还会根据答案在 div 中设置一些文本。这似乎工作正常。

```
// Question 1
function analyzeQ1(answerQ1) {
    if (answerQ1 == "TMC" || answerQ1 == "CMH" || answerQ1 == "SLH" || answerQ1 == "KU" || answerQ1 == "UMKC") {
        document.getElementById('A1').innerHTML = " • Contact Research Administration at "+ answerQ1; + hideStuff('Q1a') + showStuff('A1')
    } else if 
        (answerQ1 == "Other") {
         showStuff('Q1a')
} 
```

}

```
//Question 3
function analyzeQ3(answerQ3) {
    if (answerQ3 == "no" &&  answerQ1 == "TMC") {
        showStuff('A3') + hideStuff('Q3a')
    } else if
        (answerQ3 == "yes") {
            showStuff('Q3a')
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:22:53.697

在第一个代码片段中，您有一个杂散的分号：

```
document.getElementById('A1').innerHTML = " • Contact Research Administration at "+ answerQ1;
hideStuff('Q1a');
showStuff('A1'); 
```

在第二个代码片段中，您引用 answerQ1 但从未将其传递给函数，因此您需要：

```
//Question 3
function analyzeQ3(answerQ3, answerQ1) {
    if (answerQ3 === "no" &&  answerQ1 === "TMC") {
        showStuff('A3') + hideStuff('Q3a')
    } else if
        (answerQ3 === "yes") {
            showStuff('Q3a')
} 
```

请注意，我使用了 === vs ==。== 是邪恶的，你应该忘记它存在于 Javascript 中。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Comparison_Operators)

# java - Java/Groovy - 简单的日期重新格式化

> ID：14383437
> 
> 赞同：56
> 
> 时间：2013-01-17T16:18:00.153
> 
> 标签：java, date, groovy, reformat

我是 Java/Groovy 开发的新手，我想重新格式化一个简单的字符串，但是当我尝试运行以下命令时出现“无法解析的日期”错误：

```
import java.text.SimpleDateFormat 
import java.util.Date

String oldDate
Date date
String newDate 

oldDate = '04-DEC-2012'
date = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.S").parse(oldDate)
newDate = new SimpleDateFormat("M-d-yyyy").format(date) 

println newDate 
```

我确定这很简单，但解决方案让我望而却步。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：87
> 
> 时间：2013-01-17T16:20:24.477

使用 Groovy，您不需要包含，只需执行以下操作：

```
String oldDate = '04-DEC-2012'
Date date = Date.parse( 'dd-MMM-yyyy', oldDate )
String newDate = date.format( 'M-d-yyyy' )

println newDate 
```

打印：

```
12-4-2012 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T16:20:49.363

您的`DateFormat`模式与您输入的日期不匹配`String`。你可以使用

```
new SimpleDateFormat("dd-MMM-yyyy") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T16:21:54.307

`oldDate`不是`SimpleDateFormat`您用来解析它的格式。

试试这种格式：`dd-MMM-yyyy` - 它与您要解析的内容相匹配。

# r - 基于列名和行名合并数据框，条件列创建

> ID：14383440
> 
> 赞同：2
> 
> 时间：2013-01-17T16:18:04.457
> 
> 标签：r, merge, dataframe, match, finance

我有一个包含每月回报及其相应月份的数据框。

```
Data <- read.csv("C:/Users/h/Desktop/overflow.csv", sep=";", dec=",")
Data$Date <- as.Date(as.character(Data$Date), format="%Y-%m-%d") 
```

数据框现在看起来像这样：

```
> Data
           Fund.A Fund.B Fund.C Fund.D
2012-01-01  -0.01   0.04   0.11   0.10
2012-02-01  -0.04  -0.06   0.08   0.11
2012-03-01  -0.04  -0.07   0.15  -0.03
2012-04-01   0.00  -0.08  -0.04   0.13
2012-05-01  -0.07   0.10   0.06   0.02
2012-06-01  -0.05   0.06   0.06  -0.02
2012-07-01   0.12  -0.06  -0.09  -0.06
2012-08-01   0.08  -0.03   0.05   0.13
2012-09-01   0.10   0.07  -0.02   0.15
2012-10-01  -0.08   0.14   0.00  -0.04
2012-11-01  -0.09   0.11  -0.07   0.12
2012-12-01  -0.01  -0.09   0.07  -0.02 
```

现在，我想通过简单地将新回报与“数据”中的适当基金匹配来继续使用来自新 csv 的新回报的时间序列。我的问题是可能已经添加了新资产，从而打乱了订单。

```
import <- read.csv("C:/Users/h/Desktop/import.csv", sep=";", dec=",")
import
           2013-01-01
1  Funds:          NA
2  Fund A        0.04
3  Fund AA      -0.09
4  Fund C       -0.10
5  Fund D        0.03
6  Fund B        0.14 
```

如您所见，“导入”csv 具有新资产（基金 AA）以及在“数据”中看到的资产（基金 a 到 D），其中资金在行中而不是列中。如何编写代码，匹配并添加一行到“数据”，其中“导入”中的值位于“数据”中的右列（基金）下？如果添加了新资产，是否为新资产创建列？

作为奖励，如果“导入”中的日期比“数据”中的最新日期更新，代码只会添加一行。只导入新的退货。

欣赏它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T02:16:02.800

出于时间序列目的，我建议使用[xts](http://cran.r-project.org/web/packages/xts/index.html)。它使生活更轻松。借用 Arun 的可用数据：

```
olddata <- structure(list(Date = structure(c(15340, 15371, 15400, 15431,
  15461, 15492, 15522, 15553, 15584, 15614, 15645, 15675), class = "Date"), 
  Fund.A = c(-0.01, -0.04, -0.04, 0, -0.07, -0.05, 0.12, 0.08, 0.1, -0.08,
  -0.09, -0.01), Fund.B = c(0.04, -0.06, -0.07, -0.08, 0.1, 0.06, -0.06,
  -0.03, 0.07, 0.14, 0.11, -0.09), Fund.C = c(0.11, 0.08, 0.15, -0.04,
  0.06, 0.06, -0.09, 0.05, -0.02, 0, -0.07, 0.07), Fund.D = c(0.1, 0.11,
  -0.03, 0.13, 0.02, -0.02, -0.06, 0.13, 0.15, -0.04, 0.12, -0.02)),
  .Names = c("Date", "Fund.A", "Fund.B", "Fund.C", "Fund.D"),
  row.names = c(NA, 12L), class = "data.frame")

newimport <- structure(list(funds = c("Fund.A", "Fund.AA", "Fund.C",
  "Fund.D", "Fund.B"), `2013-01-01` = c(0.04, -0.09, -0.1, 0.03, 0.14)),
  .Names = c("funds", "2013-01-01"), row.names = c(NA, -5L),
  class = "data.frame") 
```

将数据转换为 xts 以便于按日期进行子集：

```
olddata <- xts(olddata[,-1], olddata$Date)
newdata <- xts(t(newimport[,-1]), as.Date(colnames(newimport)[-1]))
colnames(newdata) <- newimport[,1] 
```

在处理任何新列的同时合并数据：

```
cols <- names(newdata) %in% names(olddata)
combineData <- merge(rbind(olddata, newdata[,cols]), newdata[,!cols])
combineData
           Fund.A Fund.B Fund.C Fund.D Fund.AA
2012-01-01  -0.01   0.04   0.11   0.10      NA
2012-02-01  -0.04  -0.06   0.08   0.11      NA
2012-03-01  -0.04  -0.07   0.15  -0.03      NA
2012-04-01   0.00  -0.08  -0.04   0.13      NA
2012-05-01  -0.07   0.10   0.06   0.02      NA
2012-06-01  -0.05   0.06   0.06  -0.02      NA
2012-07-01   0.12  -0.06  -0.09  -0.06      NA
2012-08-01   0.08  -0.03   0.05   0.13      NA
2012-09-01   0.10   0.07  -0.02   0.15      NA
2012-10-01  -0.08   0.14   0.00  -0.04      NA
2012-11-01  -0.09   0.11  -0.07   0.12      NA
2012-12-01  -0.01  -0.09   0.07  -0.02      NA
2013-01-01   0.04   0.14  -0.10   0.03   -0.09 
```

# tomcat - 使用命令文件复制更改的文件

> ID：14383442
> 
> 赞同：0
> 
> 时间：2013-01-17T16:18:06.113
> 
> 标签：tomcat, ant, batch-file, command

我给你一个例子，我想做什么，

我想为 tomcat 配置 SSL，这意味着，从 tomcat 中的 server.xml 中删除 SSL 配置部分的注释（或者如果注释的配置不存在，则编写新的）。我想在程序中进行；

我可以编写一个java代码并实现逻辑，但我想问我是否可以使用一些命令文件来做到这一点，

我在一个文件中编写了一堆命令，它会自动查找所有测试用例，例如是否已配置 SSL，然后不要触摸文件等。换句话说，我将更改 server.xml 文件。

我不知道技术，所以我可以指导我从哪里开始？它会是使用 Ant 构建的构建文件吗？或批处理文件？

如果您需要更多解释，我将编辑问题。如果您知道任何其他技术可以做到这一点，请为我添加标签。

PS 稍后，我将不得不为其他文件（如 db 文件等）做同样的事情（更改，在 xml 中复制）。

最好的祝福，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:50:52.880

我会考虑使用 XSLT：它是为操作 XML 文件而构建的。

`<xslt>`如果要编写脚本，可以使用 Ant 的任务。

在您的 XSL 模板中，您可以编写修改配置等所需的任何规则。在 XML 注释中检测 SSL 配置并删除周围的注释分隔符可能很困难，但您可以添加一个 SSL 配置，其中没有成立。

# c++ - 在 boost::asio 中，为什么没有用于读/写的套接字成员函数？

> ID：14383447
> 
> 赞同：4
> 
> 时间：2013-01-17T16:18:15.163
> 
> 标签：c++, sockets, boost, boost-asio

我使用 boost asio 开发客户端/服务器应用程序，专门`boost::asio::ip::tcp::socket`用于连接和传输数据。现在我`boost::asio::async_read`用来接收一定数量的字节。直到现在，在调用我的处理程序之前，在所有情况下我都知道我想要接收多少字节。因此，我看不出使用 sockets meber 函数的理由`read_some`。但我想知道为什么没有“async_read”成员函数，`boost::asio::ip::tcp::socket`而只有免费的。

所以我的问题是：是否有概念或技术原因导致有`read_some`成员函数但没有`read`成员函数，或者“Boost 只是忘记实现它”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T16:52:54.777

Asio 中的所有流接口都提供了方法`read_some`和`async_read_some`方法。这适用于 TCP 套接字、SSL 流和串行端口。基于使用该方法`read`， , 及其异步表亲的实现都具有相同的实现。该函数被编写为一个通用模板，它可以在其第一个参数上使用该方法来按照您的要求执行调用。`read_until``read_some``read``read_some`

有一些 C++ 倡导者建议尽可能使用非友元非成员函数，以便在类实现发生更改时将更改降至最低。 `read_some`是接口，`read`只是一个包装器，在对各种不同来源进行部分读取的情况下添加阻塞。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T17:16:56.983

正如 Dave S 所说，您会在 boost\boost\asio\read.hpp 中找到这些外部辅助函数

如果您查看[boost 1.52 asio 示例](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/examples.html)，[blocking_tcp_echo_client](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/example/echo/blocking_tcp_echo_client.cpp)和[blocking_tcp_echo_server](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio/example/echo/blocking_tcp_echo_server.cpp)示例使用`write()`. 该示例使用该示例`read_some()`是因为它不预先知道大小...但是 write 函数与您的 read 问题完全相似，并且也作为助手存在`write.hpp`于`read.hpp`.

基本上：

```
 tcp::socket s(io_service);
 char buff[LENGTH];
 boost::asio::write(s, boost::asio::buffer(buff, LENGTH));
 boost::asio::read(s, boost::asio::buffer(buff, LENGTH)); 
```

# html - HTML5 离线存储 - 动态生成 .manifest 文件

> ID：14383448
> 
> 赞同：1
> 
> 时间：2013-01-17T16:18:15.130
> 
> 标签：html, local-storage

我目前正在开发一个网络应用程序，要求下载后可以离线访问所选页面。我知道 HTML5 离线存储方法并且没有问题，但据我所知，它是开发人员指定的。

问题是，有没有一种方法可以设置一个函数，该函数将写入 .manifest 文件，例如，当用户单击他们希望在本地缓存以供离线查看的页面上的按钮时？

整个应用程序太大而无法在本地缓存（不仅是由于 HTML5 本地存储方法的限制，而且还需要大量时间）。

不依赖 HTML5 本地存储的替代方法的建议也将受到欢迎。

任何帮助将不胜感激。谢谢。

# ruby-on-rails - 从数组中随机输出文本到视图 - RAILS

> ID：14383449
> 
> 赞同：-6
> 
> 时间：2013-01-17T16:18:15.880
> 
> 标签：ruby-on-rails, arrays, output

从数组中随机输出文本到视图 - RAILS

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:21:06.467

这不是一个格式很好的问题......你应该更准确地了解你想要什么，你正在使用什么等。

假设您使用 Rails 3，ERB 生成 HTML：

```
# in your controller:
file_as_array = IO.readlines('filename.txt')
random_line = rand(file_as_array.size)
@my_random_string = file_as_array[random_line]

# in your view:
<%= @my_random_string %> 
```

# c# - 在构造函数与访问器中实例化默认值

> ID：14383453
> 
> 赞同：0
> 
> 时间：2013-01-17T16:18:26.470
> 
> 标签：c#, visual-studio-2010, oop, class

我已经用 C#（以及其他一些语言）编程有一段时间了，但最近我决定开始编写自定义类来更好地了解面向对象编程。为此，我从 Vehicle 的基类和一些派生类开始着手处理继承。

我在这里要做的是在 Vehicle 的基类中设置一些默认值和逻辑，同时让派生类实现一些确定差异的信息。例如，当我在基类中设置 _wheelsNumber、_motorType 和 _horsePower 变量和逻辑时，我会让每个类（Car、Truck、Semi、Moped 等）设置其 _wheelsNumber 并触发逻辑流来计算剩下的属性。

但是，我不确定我是否以正确的方式构建了我的课程来实现这些目标。我不清楚我是否使用我的构造函数和我的 get/set 访问器远程做正确的事情（因为我不希望用户选择汽车有多少个轮子之类的东西，我没有声明的集合访问器）。我想我注意到的一件事是，用户必须在电机类型和马力之前询问程序的车轮数量。我认为这是因为它们不是在构造函数中计算的，但我不确定。

任何人的清晰度将不胜感激。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace VehicleClasses
{
    abstract public class Vehicle
    {
        protected const int smallMotor = 1;
        protected const int mediumMotor = 3;
        protected const int largeMotor = 5;
        protected const int largerMotor = 7;
        protected const int hugeMotor = 9;
        protected const int wrongMotor = 9001;

        public Vehicle()
        {
            _horsePower = (_motorType * _motorType) * 8;
        }

        protected int _wheelsNumber;
        public int wheelsNumber
        {
            get
            {
                return _wheelsNumber;
            }
        }

        protected int _motorType;
        public int motorType
        {
            get
            {
                if (_wheelsNumber < 4)
            {
                _motorType = smallMotor;
            }

            else if (_wheelsNumber >= 4 && wheelsNumber <= 6)
            {
                _motorType = mediumMotor;
            }

            else if (_wheelsNumber > 6 && wheelsNumber < 10)
            {
                _motorType = largeMotor;
            }

            else if (_wheelsNumber >= 10 && wheelsNumber < 18)
            {
                _motorType = largerMotor;
            }

            else if (_wheelsNumber >= 18)
            {
                _motorType = hugeMotor;
            }

            else
            {
                _motorType = wrongMotor;
            }                
                return _motorType;
            }
        }

        protected int _horsePower;
        public int horsePower
        {
            get
            {
                return _horsePower;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:16:17.713

这是继承的常见误用。子类应该扩展*行为*，而不仅仅是修改状态的值。

在您的示例中，只有一个自由变量，即车轮数。其他一切都是基于此的衍生特征。更改车辆的构造函数以将轮数作为参数，然后（如果需要）您可以将公共静态方法添加到类中，例如“CreateMotorcycle()”，以创建具有正确轮数的车辆。

## 替代建议运动

就像我之前提到的，当您想要扩展行为时，继承很有用。例如，假设您有一个“Employee”基类。为简单起见，假设每个员工都有一个初级和一个高级。

每当员工想要休假时，他们都必须请示上级，但并非每个员工都能批准。请求必须通过链向上传递，直到它到达一个“管理器”，它是一个派生实例。

翻转它，假设最高级的员工是所有者。当他想让公司做某事时，他不会自己做。他将命令向下发送。每一层都可能修改需要做的事情。例如，老板说需要在 365 天内完成，每个经理说有一半的时间告诉他，工人完成任务。

这些示例中的每个“类”（Worker/Manager/Owner）在调用相同的方法时表现不同。但是让它们都实现相同的基类可以很容易地将它们链接在一起！这是[“责任链”](http://en.wikipedia.org/wiki/Chain-of-responsibility_pattern)和[“装饰者”](http://en.wikipedia.org/wiki/Decorator_pattern)模式的变体。

# javascript - Internet Explorer 8 弄乱了我的子弹图

> ID：14383456
> 
> 赞同：1
> 
> 时间：2013-01-17T16:18:43.610
> 
> 标签：javascript, html5-canvas, excanvas

我使用“canvas”HTML5 标签创建了 HTML 和 JavaScript 文件来显示项目符号图。我已经在 Chrome 中尝试过了，它运行良好，并且随着浏览器的大小改变宽度。我也必须让这个在 IE8 中工作，所以我使用了 Excanvas，除了一种方式之外，它在所有方面都可以工作：当我调整浏览器的大小时，我得到了 valueIndicator 的残余。这只发生在 IE8 上。

我试过四处寻找有关重绘画布的信息，但我认为这不是问题。谁能看看我哪里出错了，好吗？

***编辑*** 我将完整的代码保留在底部，但是，按照建议我已经将我的代码减少了一些。

在 IE8 中它看起来像这样：

![http://dl.dropbox.com/u/6985149/MessedUp.bmp](../Images/81d9eb2faecf8ca5280b60257fe35323.png)

在 Chrome 中它看起来像这样：

![在此处输入图像描述](../Images/3add3e4c0cf1463b9a9668c80fec476e.png)

当我刷新 IE8 页面时，它看起来又正常了。

缩减 Bulletgraph.html：

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Bulletgraph</title>
        <!--[if IE]><script src="excanvas.js"></script><![endif]-->
    </head>
    <body>
        <canvas id="graph1"></canvas>
        <script src="Scripts.js"></script>
        <script>
            drawGraphs();
            window.onresize=function() { drawGraphs() };

            function drawGraphs() {
                drawBulletGraph(getScreenWidth(),300,1000,350,"graph1");
            }
        </script>
    </body>
</html> 
```

* * *

**完整代码：**

缩减 Scripts.js：

```
function drawBulletGraph (cwidth, left, right, loValue, id) {
    var canvas=document.getElementById(id);
    var cheight=30;

    var multiplier=cwidth/(right-left);
    canvas.width=cwidth;
    canvas.height=cheight;

    var valueIndicator=canvas.getContext("2d");
    valueIndicator.lineWidth="1";
    valueIndicator.moveTo((loValue-left)*multiplier,0);
    valueIndicator.lineTo((loValue-left)*multiplier,cheight);
    valueIndicator.fill();
    valueIndicator.stroke();
}

function getScreenWidth () {
    return (window.innerWidth || document.documentElement.clientWidth)/7;
} 
```

子弹图.html：

```
<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>Bulletgraph</title>
        <!--[if IE]><script src="excanvas.js"></script><![endif]-->
    </head>
    <body>
        <canvas id="graph1"></canvas><br>
        <canvas id="graph2"></canvas>
        <script src="Scripts.js"></script>
        <script>
            drawGraphs();
            window.onresize=function() { drawGraphs() };

            function drawGraphs() {
                drawBulletGraph(bgWidth(getScreenWidth()),300,400,450,600,700,1000,800,350,850,"graph1");
                drawBulletGraph(bgWidth(getScreenWidth()),250,450,500,650,700,1200,600,350,850,"graph2");
            }
        </script>
    </body>
</html> 
```

脚本.js：

```
function drawBulletGraph (cwidth, left, loRed, loAmber, hiAmber, hiRed, right, value, loValue, hiValue, id) {
    var canvas=document.getElementById(id);
    var cheight=16;
    var colour="#008000";
    if (value <= loRed || value >= hiRed)
        {
            colour="#FF0000";
        }
    else if (value <= loAmber || value >= hiAmber)
        {
            colour="#FFA500";
        }
    var multiplier=cwidth/(right-left);
    canvas.width=cwidth;
    canvas.height=cheight;
    var red=canvas.getContext("2d");
    red.fillStyle="#F4C3C6";
    red.fillRect(0,0,cwidth,cheight);
    var amber=canvas.getContext("2d");
    amber.fillStyle="#F4F6C6";
    amber.fillRect((loRed-left)*multiplier,0,(hiRed-loRed)*multiplier,cheight);
    var green=canvas.getContext("2d");
    green.fillStyle="#CCE5CC";
    green.fillRect((loAmber-left)*multiplier,0,(hiAmber-loAmber)*multiplier,cheight);
    var valueIndicator=canvas.getContext("2d");
    valueIndicator.fillStyle=colour;
    valueIndicator.strokeStyle=colour;
    valueIndicator.lineWidth="2";
    valueIndicator.moveTo((loValue-left)*multiplier,0);
    valueIndicator.lineTo((loValue-left)*multiplier,cheight);
    valueIndicator.moveTo((loValue-left)*multiplier,cheight/2);
    valueIndicator.lineTo((hiValue-left)*multiplier,cheight/2);
    valueIndicator.moveTo((hiValue-left)*multiplier,0);
    valueIndicator.lineTo((hiValue-left)*multiplier,cheight);
    valueIndicator.moveTo(((value-left)*multiplier)-(cheight/2),cheight/2);
    valueIndicator.stroke();
    valueIndicator.lineWidth="1";
    valueIndicator.lineTo((value-left)*multiplier,cheight);
    valueIndicator.lineTo(((value-left)*multiplier)+(cheight/2),cheight/2);
    valueIndicator.lineTo((value-left)*multiplier,0);
    valueIndicator.lineTo(((value-left)*multiplier)-(cheight/2),cheight/2);
    valueIndicator.fill();
    valueIndicator.stroke();
}

function getScreenWidth () {
    return window.innerWidth || document.documentElement.clientWidth;
}

function bgWidth (screenWidth) {
    var graphWidth=screenWidth/7;
    if (graphWidth<70) {graphWidth=70;}
    if (graphWidth>260) {graphWidth=260;}
    return graphWidth;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T13:33:54.993

我设法得到了解决方案。感觉有点像黑客，但它确实成功了。基本上它涉及在画布周围绘制一条白线，并在每次再次绘制时填充它。以下代码位于行`var valueIndicator=canvas.getContext("2d");`和`valueIndicator.lineWidth="1";`行之间：

```
valueIndicator.fillStyle="#FFFFFF";
valueIndicator.strokeStyle="#FFFFFF";
valueIndicator.moveTo(0,0);
valueIndicator.beginPath();
valueIndicator.lineTo(0,cheight);
valueIndicator.lineTo(cwidth,cheight);
valueIndicator.lineTo(cwidth,0);
valueIndicator.closePath();
valueIndicator.fill();
valueIndicator.stroke();
valueIndicator.strokeStyle="#000000"; 
```

我已经在完整的代码中尝试过了，它可以工作。如果有人有更优雅的解决方案，我相信肯定有很多，我仍然很想看到它们。

# ruby-on-rails-3 - 设置设计只有一个主用户

> ID：14383459
> 
> 赞同：0
> 
> 时间：2013-01-17T16:18:51.240
> 
> 标签：ruby-on-rails-3, devise

我已经在一个站点上设置了设计，现在客户只想能够使用 1 个主密码并且不允许其他任何人创建帐户。我从登录页面中删除了创建帐户链接，并将我的 RegistrationsController 扩展为如下所示。

```
class CustomRegistrationsController < Devise::RegistrationsController

    # used to override normal create behavior
    def create
            redirect_to user_session_path
    end

    # used to override normal new behavior. Redirects user back to the login page
    def new
            redirect_to user_session_path
    end
end 
```

然后在我的路线文件中

```
devise_for :users, :path => '', :path_names => { :sign_in => 'login', :sign_out => 'logout'}, :controllers => { :registrations => "custom_registrations"} 
```

现在我正在尝试找到一种方法，可以硬编码主用户名和密码，或者想出更好的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:56:41.237

这绝不是一个优雅的解决方案，但您可以简单地使用迁移（或数据库种子文件，如果数据库仍然足够新以这种方式生成）来创建具有所需登录信息的单个用户对象，并添加如果已经存在用户，则返回 false 的用户验证。

# linq - 如何创建一个必须满足两个值的谓词，其中一个是值列表？

> ID：14383460
> 
> 赞同：3
> 
> 时间：2013-01-17T16:18:51.787
> 
> 标签：linq, entity-framework

使用以下代码，我如何获得包含任何 zip 列表但仅包含街道地址目的的记录的返回？这当前返回 zip 或街道地址的匹配项。

```
var zipPredicate = PredicateBuilder.False<NameAddress>();
        List<string> zips = new List<string>();
        zips.Add("90210");
        zips.Add("90211");
        foreach (var item in zips)
        {
            zipPredicate = zipPredicate.Or(n=> n.ZIP.Contains(item));        
        }
            zipPredicate = zipPredicate.And(n=> n.Purpose=="Street Address");        
        var zipResult = from s in NameAddresses 
        .AsExpandable()
        .Where(zipPredicate)
        select new{s.ID, s.ZIP, s.Purpose};

zipResult.Dump(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:25:36.643

我认为您正在寻找的是：

```
var zipPredicate = PredicateBuilder.False<NameAddress>();
    List<string> zips = new List<string>();
    zips.Add("90210");
    zips.Add("90211");
    foreach (var item in zips)
    {
        zipPredicate = zipPredicate.Or(n=> n.ZIP.Contains(item) && n.Purpose=="Street Address");        
    }        
    var zipResult = from s in NameAddresses 
    .AsExpandable()
    .Where(zipPredicate)
    select new{s.ID, s.ZIP, s.Purpose};

zipResult.Dump(); 
```

**编辑**

还有一件事，如果您想放弃构建谓词，您应该能够执行以下操作：`.Where(n=>zips.Contains(n.ZIP) && n.Purpose=="Street Address")`重要的是您的实体属性组件位于 .Contains() 中。这会将您的代码缩短为：

```
 List<string> zips = new List<string>();
    zips.Add("90210");
    zips.Add("90211");

    var zipResult = from s in NameAddresses 
    .AsExpandable()
    .Where(n=>zips.Contains(n.ZIP) && n.Purpose=="Street Address")
    select new{s.ID, s.ZIP, s.Purpose};

zipResult.Dump(); 
```

我更喜欢它的可读性。我希望最终执行的查询是相同的。

# c# - ASP.NET 获得每个月的工作周数

> ID：14383463
> 
> 赞同：2
> 
> 时间：2013-01-17T16:18:58.353
> 
> 标签：c#, asp.net, date, .net-2.0

我有一个接受“月”和“年”输入的表格，我在这里写信是为了询问我将如何获得所有“工作周”的任何想法？

我的意思是周一至周五的“工作周”

所以基本上我需要第 1 周到第 4 周，或者如果有的话，包括第 5 周。

例如，如果我输入 2013 年 1 月：

```
week1 = January 1 to January 4
week2 = January 7 to January 11
week3 = January 14 to January 18
week4 = January 21 to January 25
week5 = January 28 to January 31 
```

我怎样才能做到这一点？谢谢你的帮助！任何建议或想法将不胜感激。谢谢小伙伴们！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:51:46.333

你可以使用这个 Linq 查询：

```
int month = 1;
int year = 2013;
var cal = System.Globalization.CultureInfo.CurrentCulture.Calendar;
IEnumerable<int> daysInMonth = Enumerable.Range(1, cal.GetDaysInMonth(year, month));

List<Tuple<int, DateTime, DateTime>> listOfWorkWeeks = daysInMonth
    .Select(day => new DateTime(year, month, day))
    .GroupBy(d => cal.GetWeekOfYear(d, CalendarWeekRule.FirstFourDayWeek, DayOfWeek.Monday))
    .Select(g => Tuple.Create(g.Key, g.First(), g.Last(d => d.DayOfWeek != DayOfWeek.Saturday && d.DayOfWeek != DayOfWeek.Sunday)))
    .ToList();

// Item1 = week in year, Item2 = first day, Item3 = last working day
int weekNum = 1;
foreach (var weekGroup in listOfWorkWeeks)
{
    Console.WriteLine("Week{0} = {1} {2} to {1} {3}"
        , weekNum++
        , System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(month)
        , weekGroup.Item2.Day
        , weekGroup.Item3.Day);
} 
```

一月份的输出：

```
Week1 = January 1 to January 4
Week2 = January 7 to January 11
Week3 = January 14 to January 18
Week4 = January 21 to January 25
Week5 = January 28 to January 31 
```

二月：

```
Week1 = February 1 to February 1
Week2 = February 4 to February 8
Week3 = February 11 to February 15
Week4 = February 18 to February 22
Week5 = February 25 to February 28 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:25:25.897

查找月份和年份的第一个星期一。

```
int year = 2013;
int month = 1;

DateTime testDate = new DateTime(year,month,1);

while ( testDate.DayOfWeek != DayOfWeek.Monday )
{
   testDate = testDate.AddDays(1);
} 
```

然后每周迭代，直到你到达不是 2013 年的年份。

```
// Should have first monday now.
// Loop until the month changes
while ( testDate.Month == month)
{
   var monday = testDate;
   var friday = testDate.AddDays(4);

   // You now have both dates.  Do whatever you need to.
   // here.

   // Increment test date by a week
   testDate = testDate.AddDays(7)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:28:58.333

在伪代码中：

1.  从每月的第一天开始

2.  虽然（天！=星期一）取下一个日期（+1天）

    请参阅[此 SO 帖子](https://stackoverflow.com/questions/5170822/c-sharp-how-can-i-check-if-today-is-the-first-monday-of-the-month)（Jon Skeet 回答！）以检查一天是否为星期一。

3.  添加 4 天以找到工作周的结束时间

    如果是在同一个月，那么您有一个工作周的时间来回答。

4.  加 7 天查找下周一

5.  如果新的星期一仍在同一个月内：重复 3\. 和 4。

**编辑**上面找到所有*完整*的工作周。

还要找到其他周：

*   如果该月的第一天已经是工作日，则查找下一个星期五。-> 第一个工作周
*   如果最后一个星期五在下个月，则在该月的最后一天完成最后一个工作周。-> 上一个工作周

# python - 英文数字拼写

> ID：14383464
> 
> 赞同：-2
> 
> 时间：2013-01-17T16:19:09.890
> 
> 标签：python, numbers, spelling

我正在解决 Euler 项目中关于数字拼写 (GB) 的练习 17。我在网上搜索了数字拼写规则，但没有找到合适的。

**有没有人有英文数字拼写规则（GB）的链接（例如何时使用/不使用'and'）？**

例如，如何正确拼写 342？

这是我写的函数，你能找到任何错误吗？

```
def compose(x):
    digits = ['', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'ten']
    eleven_to_twenty = ['', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen']
    decades = ['', 'ten', 'twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety']
    if x < 1000:
        if x < 100:
            if x < 20:
                if x <= 10:
                    return digits[x]
                else:
                    return eleven_to_twenty[x - 10]
            else:
                return decades[x / 10] + digits[x % 10]
        else:
            return digits[x / 100] + 'hundredand' + compose(x % 100)
    else:
        return 'onethousand' + compose(x % 1000) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:27:33.573

来自[https://english.stackexchange.com/questions/10687/rule-for-adding-and-or-hyphens-between-numbers-that-are-spelled-out-fully-in-t](https://english.stackexchange.com/questions/10687/rule-for-adding-and-or-hyphens-between-numbers-that-are-spelled-out-fully-in-t)

**三百四十二**

省略“and”在美国英语中更为常见。两者都可以接受，但包括“和”更正确。

将 21 到 99 之间的所有复合数字连字符连接起来。

# objective-c - Cocoa - 使用 NSConnection 时超时

> ID：14383467
> 
> 赞同：0
> 
> 时间：2013-01-17T16:19:24.390
> 
> 标签：objective-c, cocoa, tcp, timeout, nsconnection

我正在尝试编写一个可以通过网络连接的程序。我有一个服务器和一个客户端，我想从服务器向客户端发送通知。

如果我使用我的客户端从服务器获取信息，一切正常，但如果我尝试将连接配置为双向工作，我得到：

```
2013-01-17 10:44:04.948 Test Client[11475:405] Distributed objects message send timed out (timeout: 10480150844.948212 at time: 380130944.948432) 
```

这是我的服务器的代码（其中 server 是自定义对象的实例）：

```
NSSocketPort* send = [[NSSocketPort alloc] initWithTCPPort:6139];
//    send=nil;
theConnection = [NSConnection connectionWithReceivePort:[[NSSocketPort alloc] initWithTCPPort:6138] sendPort:send];
[theConnection setRootObject:server]; 
```

和我的客户

```
NSSocketPort* recieve = [[NSSocketPort alloc]
                         initRemoteWithTCPPort:6139 host:@"127.0.0.1"];
//    recieve =nil;

NSConnection *connection = [NSConnection
                            connectionWithReceivePort: recieve sendPort:
         [[NSSocketPort alloc] initRemoteWithTCPPort:6138 host:@"127.0.0.1"]];
theProxy = [connection rootProxy]; 
```

如果我取消注释 =nil 行，这可行，但否则我得到错误。有人知道我做错了什么吗？

提前致谢。

祝你有美好的一天！

# android - 在 android 2.x 上显示 SherlockDialogFragment

> ID：14383469
> 
> 赞同：2
> 
> 时间：2013-01-17T16:19:37.400
> 
> 标签：android, actionbarsherlock

我正在尝试显示一个`SherlockDialogFragment`被调用的`PlayIt`

代码如下：

```
FragmentManager fm = getFragmentManager();
PlayIt p = new PlayIt();
p.show(fm, "play?"); 
```

但我在节目中遇到错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:56:18.840

您应该在使用 ActionbarSherlock 时使用`getSupportFragmentManager()`而不是。`getFragmentManager()`

# php - 知道 php 脚本是否仍在运行

> ID：14383473
> 
> 赞同：0
> 
> 时间：2013-01-17T16:19:55.407
> 
> 标签：php, cron, centos

我有一堆 php 脚本计划在 CentOS 机器上的 cron 中每隔几分钟运行一次。我希望每个脚本在启动时自我检查它的前一个实例是否仍在运行，如果是则停止。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:22:40.717

我这样做是为了管理任务并确保它们一次只运行一个

```
public function startTask($taskname)
{
    $running = "running";
    $lockfile = $taskname . "RUNNING";
    file_put_contents($lockfile, $running);
}

public function endTask($taskname)
{
    $lockfile = $taskname . "RUNNING";
    unlink($lockfile);
}

public function isTaskRunning($taskname)
{
    $lockfile = $taskname . "RUNNING";
    if (file_exists($lockfile))
    {
        return true;
    }
} 
```

您`startTask('name')`在开始任务时调用，然后`endTask('name')`在完成时调用。在您使用的任务的第一行

```
if (isTaskRunning('name')) {
   die('already running');
} 
```

将它们放在配置类或所有任务文件中包含的东西中，然后离开

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T16:26:31.287

使用锁定文件：

```
<?php
$lockfile = "/tmp/lock.txt";
$fp = fopen($lockfile, "r+");

if (flock($fp, LOCK_EX)) {  // acquire an exclusive lock
    ftruncate($fp, 0);      // truncate file
    fwrite($fp, sprintf("Started: %s\nPID: %s", date(), getmypid()));

    // perform your tasks here.

    fflush($fp);            // flush output before releasing the lock
    flock($fp, LOCK_UN);    // release the lock
} else {
    echo "Couldn't get the lock!\nCheck $lockfile for more info.";
}

fclose($fp); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T16:32:38.680

或者，如果您使用的是数据库，则可以执行以下操作`Named Lock`：

```
<?php

$process = "myProcess";

$sql = mysql_query("select get_lock('$process', 0)");
$got_lock = (bool)mysql_fetch_array($sql)[0];

// If process is already running exit
if(!$got_lock){
    echo "Process running";
    exit;
}

// Run my process
for($i=0;$i<100000000;$i++){
    echo $i;
}

// Release the lock
mysql_query("select release_lock('$process')"); 
```

这种形式的锁定称为 a `named lock`，它不会“锁定”数据库，它只是创建一个“命名锁定”，当您调用它时，它会检查名称是否存在。它与 a 完全不同`table lock`，`row lock`它内置于 mysql 中用于其他应用程序，例如 this。

您可以拥有任意数量的锁，一旦应用程序结束，它们就会自动释放，例如您的客户端与 mysql 断开连接：进程完成、php 中断/崩溃、mysql 崩溃（这不是 100% 确定）等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T16:22:09.803

您可以在 PHP 脚本的末尾添加一个简单的回显（可能带有 date()），这将在您的 cron 日志中可见，并显示脚本是否到达末尾（然后完成其任务）

# python - 在 Brive 中保存文档时将 / 重写为 _

> ID：14383474
> 
> 赞同：0
> 
> 时间：2013-01-17T16:20:01.903
> 
> 标签：python, google-drive-api

我下载了[Brive](https://github.com/x8wk/Brive)，它使用 Drive API 下载您的 Google 文档。如果文件名有斜线并使应用程序崩溃，我会遇到文件名无法保存的问题。如何修改 model.py 文件以重写`/`为`_`？

[模型.py](https://github.com/x8wk/Brive/blob/master/model.py)

[brive.py](https://github.com/x8wk/Brive/blob/master/brive.py)

我想我只需要在第 74 行重写“file_name”或“path”。

[后端.py](https://github.com/x8wk/Brive/blob/master/backend.py)：

```
def save(self, user, document):
    self._mkdir(user.login)
    prefix = self._root_dir + user.login + os.sep
    for file_name, content in document.contents.items():
        path = prefix + file_name
        Log.debug(u'Writing {}\'s {} to {}'.format(
            user.login, document.title, path
        ))
        f = open(path, 'w')
        f.write(content)
        f.close() 
```

这是错误：

```
[ 2013-01-17 T 06:17:08 Z ] Saving coral.lopez's doc "Lunchbox Monster High 4/7/12" (id: 1GyiuKFZeargO8KfzKS5H9V3PVbgTJufw2PwLaILzRVw)
[ 2013-01-17 T 06:17:08 Z ] Unexpected shutdown, deleting /home/davidneudorfer/google_docs_backup/2013-01-17T061021Z/ folder
### Unexpected error when saving coral.lopez's documents (doc id: 1GyiuKFZeargO8KfzKS5H9V3PVbgTJufw2PwLaILzRVw) ###
Traceback (most recent call last):
  File "brive.py", line 114, in <module>
    main()
  File "brive.py", line 92, in main
    user.save_documents(backend)
  File "/home/davidneudorfer/Brive/model.py", line 79, in save_documents
    self._save_single_document(backend, document)
  File "/home/davidneudorfer/Brive/model.py", line 105, in _save_single_document
    backend.save(self, document)
  File "/home/davidneudorfer/Brive/backend.py", line 78, in save
    f = open(path, 'w')
IOError: [Errno 2] No such file or directory: u'/home/davidneudorfer/google_docs_backup/2013-01-17T061021Z/coral.lopez/Lunchbox Monster High 4/7/12_1GyiuKFZeargO8KfzKS5H9V3PVbgTJufw2PwLaILzRVw.odt' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:50:33.320

您可以使用[`the_str.replace('/', '_')`](http://docs.python.org/2/library/stdtypes.html#str.replace)将其中包含`'/'`s 的路径转换为其中包含的路径`'_'`。

# ruby-on-rails - Rails：在工厂中获取先前定义的特征

> ID：14383481
> 
> 赞同：2
> 
> 时间：2013-01-17T16:20:29.187
> 
> 标签：ruby-on-rails, factories

我有以下工厂：

```
FactoryGirl.define do
  factory :group_member do |f|
    f.user_id { rand(1..100) }
    f.group_id { rand(1..100) }
    f.membership { ["accepted", "invited", "declined", "requested", "denied", "left", "removed"].sample }
    if "#{membership}" == "accepted"
        f.host { [true, false].sample }
    else
        f.host false
    end

  end
end 
```

该行：

```
if "#{membership}" == "accepted" 
```

正在抛出错误：

```
Trait not registered: membership 
```

我的目的是查明先前定义的特征“成员资格”是否设置为“接受”。但是，我不确定如何访问该特征。有小费吗？

另一方面，工厂创建类似于表单创建，只要有一个变量（在本例中为“f”）分配了各种特征。有没有一个词来描述这些类型的代码块？

更新：我已将工厂更改为使用 after_build 调用，但现在出现此错误：

```
undefined method `after_build=' for #<GroupMember:0x5dcb328> 
```

更新后的代码如下所示：

```
FactoryGirl.define do
  factory :group_member do |f|
    f.user_id { rand(1..100) }
    f.group_id { rand(1..100) }
    f.membership { ["accepted", "invited", "declined", "requested", "denied", "left", "removed"].sample }
    f.after_build do |obj|   
        if obj.membership == "accepted"
            obj.host = [true, false].sample
        else
            obj.host = false
        end 
    end

  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:32:06.030

**回复：检查已设置的值。**

```
f.after_build do |obj|   
  # Test your obj.membership here. 
end 
```

**回复：抱怨`after_build`不存在的错误消息。**

您的定义语法看起来不正确。改变这个：

```
FactoryGirl.define do
  factory :group_member do |f| 
```

对此：

```
FactoryGirl.define :group_member do |f| 
```

# php - 图片的简单网址 - 背景复杂

> ID：14383482
> 
> 赞同：0
> 
> 时间：2013-01-17T16:20:35.170
> 
> 标签：php, api, url, url-rewriting, image

我想实现简单的图片网址，就像 facebook 所做的那样。

如果您查看[http://developers.facebook.com/docs/reference/api/using-pictures/](http://developers.facebook.com/docs/reference/api/using-pictures/)

你会看到，他们只使用了带有 id 的 photo、even 和 application，但是 event、application 和 photo id 都是三个不同的 table id。

FB图片： http: [//graph.facebook.com/331218348435/picture](http://graph.facebook.com/331218348435/picture)

他们如何知道哪个 id 属于哪个类别（事件、应用程序或照片）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:53:56.700

Facebook 中的每个对象都可以有自己的唯一标识符。这意味着，例如，如果 FB 组的 ID 为 42，则应用程序、组或任何其他对象不能具有相同的 ID。这可以允许 Web 应用程序将 ID 直接映射到图片的 URL。

Facebook 正在使用一个 64 位标识符，该标识符很可能是用信息编码的。因此，我认为您不会看到像 42 这样小的 id。信息可以按以下方式编码：

```
64 bits total
1st 16 bits = Shard ID (where is the object is stored)
2nd 16 bits = Type ID (app, group, person)
Remaining 32 bits = Local unique ID (incremental id for example) 
```

使用一些按位逻辑，您可以从标识符中提取类型。尽管如果您有 ID 到图片 URL 的直接 1 对 1 映射，则可能不需要它。

我实际上并不知道 FB 的后端是如何构建的。以上只是一个示例实现。如果您有具有 32 位 id 的表，您仍然可以使用编码类型转换为 64 位，并使所有标识符无论对象类型如何都是唯一的。

这可能是矫枉过正，特别是如果您在生产中有一个现有的结构。我只是试图解释它是如何做到的，以及 Facebook 是如何做到的。

# sql - SQL根据另一列中的记录查找多列中的记录

> ID：14383483
> 
> 赞同：1
> 
> 时间：2013-01-17T16:20:35.070
> 
> 标签：sql, sql-server, tsql

我在执行以下任务时遇到了麻烦。

我有一个显示 BOM 结构的视图 - viewBOMsApprRevisions：

```
PartNumL1 PartNumL2 PartNumL3 PartNumL4 PartNumL5
```

我有一个包含选定 PartNum 的表 - 17 条记录，

我想要做的是从存在 PartNum（17 条记录）的视图中列出所有记录。

我知道如何用一条记录做到这一点

```
SELECT *
FROM viewBOMsApprRevisions 
WHERE '11614' in (PartNumL1,PartNumL2,PartNumL3, PartNumL4, PartNumL5) 
```

但我不知道如何使用另一个表中的记录列表。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:03:56.197

尝试这样的事情：

```
SELECT *
FROM viewBOMsApprRevisions 
WHERE EXISTS (SELECT * from Partnum 
              WHERE Partnum.Partnumber in (PartNumL1,PartNumL2,PartNumL3,
                                           PartNumL4, PartNumL5)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:33:15.973

如果我了解您的要求，您需要一个基本的[加入](http://msdn.microsoft.com/en-us/library/ms191517%28v=sql.105%29.aspx)。由于您没有提供表架构，因此这是一个通用示例：

```
SELECT        *
FROM          Table1
INNER JOIN    Table2 ON Table2.SomeKey = Table1.SomeKey
WHERE         '11614' IN(Table2.PartNumber) 
```

# php - 为什么 preg_match() 在返回数组的索引 1（不是 0）处返回第一个匹配项？

> ID：14383484
> 
> 赞同：1
> 
> 时间：2013-01-17T16:20:40.117
> 
> 标签：php, preg-match

我正在使用 cURL 开发小型网站**抓取**工具。

我决定使用 preg_match 来查找标题和文章内容。

这是我的代码：

```
preg_match('@<h2 class="title">(.*?)</h2>@s', $this->website, $this->title);

if(sizeof($this->title) > 1)
    $this->title = trim($this->title[1]); // rewrite first element of array to regular variable 
```

我正在试验它，我发现，如果有一个匹配 - 它在索引 1 的数组中返回它，而不是 0。

编辑问题：**为什么这是 1，而不是 0？我做错了什么？**

我的服务器：Apache/2.4.3 (Win32) PHP/5.4.7

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:34:57.003

preg_match 的默认行为是返回结果数组中索引 0 处匹配的整个字符串，然后返回后续结果数组索引中的每个匹配子模式。如果没有匹配，则结果数组为空。如果某些内容匹配，您将获得匹配的完整字符串，然后是任何子模式。

# .net - 我可以在实体框架中进行模型级过滤吗？

> ID：14383485
> 
> 赞同：2
> 
> 时间：2013-01-17T16:20:41.783
> 
> 标签：.net, entity-framework

在最新版本的 Lightswitch 中，他们添加了一个查询管道方法，允许您捕获对数据库的所有查询请求，并添加一个过滤器。这允许您添加（例如）一个过滤器，将数据限制为“活动”标志为真的数据，而不必担心在您编写的每个查询上都这样做。

现在，鉴于 Lightswitch 中的数据库级别的东西都是建立在实体框架上的，我想知道那里是否有类似的东西。我正在处理一个非常大的项目，在大约 50 或 60 个单独的存储库中进行大量查询，并且真的不想要求每个开发人员检查每个存储库中的每个查询并添加代码来检查活动标志。除了所涉及的时间之外，错过查询的可能性很高，有人忘记将其包含在未来的查询中的可能性也很高。

任何人都知道这是否可以在实体框架的低级别完成？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T16:46:28.513

您必须能够拦截和修改您的谓词。

一。如果您已经抽象了存储库，那么您可以执行以下操作：

您的所有实体都可以从具有 Active 属性的抽象类或接口继承，您的代码将是：

```
 interface IActivatable {
        bool IsActive {get;set;}
    }

    class Repository<EntityType>
        where EntityType : class, IActivatable {

        private StackOverflowEntities context;

        public IQueryable<EntityType> GetAll() {

                return context.Set<EntityType>().Where(e => e.IsActive == false);

        }
    } 
```

这样，GetAll 返回带有初始谓词的 IQueryable，其余部分将添加 AND。像这样：

```
 Repository<Person> persons;
            var results = persons.GetAll().Where(p => p.IsMarried == false); 
```

这将导致谓词等于`p.IsMarried == false && p.IsActive == false`

二。如果根本无法更改存储库代码或代码，您可以为每个表创建一个视图。该视图可以只在 where 子句中包含 IsActive 以排除记录，然后根据这些视图重新加载您的 EDMX - 至少这是我们过去常用的方式。

**编辑：**

三。如果您将生成的 DbContext 暴露给客户端代码，您可以这样做：

```
 public partial class StackOverflowEntities : DbContext
    {
        public StackOverflowEntities()
            : base("name=StackOverflowEntities")
        {
        }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            throw new UnintentionalCodeFirstException();            
        }

        public DbSet<Blog> Blogs {
            return this.Set<Blog>().Where(b => b.IsActive == false);
        }
    } 
```

只是意味着您必须关闭自动代码生成或修改 T4 模板。更容易获取生成的代码，打开 gen 和修改。

# django - 如果用户在另一个模型中没有数据，则从模型中删除所有数据

> ID：14383486
> 
> 赞同：-1
> 
> 时间：2013-01-17T16:20:43.573
> 
> 标签：django

如果用户在`Data`模型中有数据并且`Bank`模型一切正常，但如果用户在模型中没有数据`Bank`并且只有在模型中 -必须删除模型中的`Data`所有数据。`Data`

怎么做？

```
class Data(models.Model):
    user = models.ForeignKey(User, unique=True)
    something = models.CharField(max_length=255)

class Bank(models.Model):
    user = models.ForeignKey(User, unique=True)
    number = models.IntegerField()

class UserProfile(models.Model):
    user = models.ForeignKey(User, unique=True)
    name = models.CharField(max_length=255) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:29:26.090

在您的一个视图功能中（或在 cron 工作中......您的问题实际上是模糊的）：

```
bank = Bank.objects.get(user=user)
if not bank:
    data = Data.objects.filter(user=user).delete() 
```

警告：

*   `user`必须有一个有效值（即：必须定义）
*   此代码不检查任何内容，它只是执行您所要求的

添加`foreign_key`from `Bank`to `Data`（反之亦然，这取决于关系的强度）可能是对您的类的有效更改。像这样我们不知道如何`Data`相互`Bank`关联

# c# - 消息实现超时的状态栏

> ID：14383494
> 
> 赞同：3
> 
> 时间：2013-01-17T16:21:00.507
> 
> 标签：c#, wpf

我想实现一个状态栏，我将能够在指定的时间段内显示消息，之后它们将淡出。

这可以通过 wpf 中的任何现成控件来完成吗？我在 StatusBar 中找不到这样的功能，据我所知，它是其他项目的容器。

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T18:44:30.783

`StatusBar`确实只是其他物品的容器。
我认为没有这样的内置功能。

但是您可以使用 a[`Timer`](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)来实现您想要的。

制作一个方法，将文本消息设置为 的内容，在`StatusBarItem`中设置时间，`Timer`如果`Timer.Elapsed`您从 中删除文本`StatusBarItem`。

`StatusBar`XAML：

```
<StatusBar Height="25" Margin="5">
    <StatusBarItem x:Name="StatusMessage" />
</StatusBar> 
```

程序代码：

```
private void ShowStatusMessage(string message)
{
    StatusMessage.Content = message;
    var timer = new System.Timers.Timer();
    timer.Interval = 2000; //2 seconds
    timer.Elapsed += delegate(object sender, System.Timers.ElapsedEventArgs e)
    {
        //stop the timer
        timer.Stop();
        //remove the StatusMessage text using a dispatcher, because timer operates in another thread
        this.Dispatcher.BeginInvoke(new Action(() =>
        {
            StatusMessage.Content = "";
        }));
    };
    timer.Start();
} 
```

如果你想制作动画，你应该寻找[`DoubleAnimation`](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.doubleanimation.aspx)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T17:30:29.170

只需在进度条中绑定数据并在淡出时更新它。让我们知道更多细节以提供更好的解决方案

# excel - 如何在 Excel 公式中使用字符串字母和当前行号来表示单元格 ID？

> ID：14383495
> 
> 赞同：14
> 
> 时间：2013-01-17T16:21:01.487
> 
> 标签：excel, excel-formula

我想计算一列的总和，然后减去另一列的总和，**但**只使用从给定行到当前行（公式所在的行）的值。

所以，在“非正式的自定义语言”中，我需要这样的东西：

假设我在**C5**：`=(sum(A1:"A"+ROW())-sum(B1:"B"+ROW()))`

为此，我如何在 Excel 中编写正确的表达式？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-17T16:33:43.050

您可以尝试使用`INDIRECT`，它接受对范围的字符串引用并返回范围本身：

```
=SUM(INDIRECT("A1:A"&ROW()))-SUM(INDIRECT("B1:B"&ROW())) 
```

在这里，我们从`"A1:A"`. 然后我们用（在这个例子中是 5）获取当前行，`ROW()`并将它与我们的存根连接起来，给我们`INDIRECT("A1:A5")`. 由于`INDIRECT`将返回其参数（`"A1:A5"`此处）引用的范围，我们可以用`SUM`公式包装它以获得结果（与 相同`SUM(A1:A5)`）。然后我们对 column 做同样的事情`B`。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T16:39:54.023

我想你可能会向后看。您需要将调用中的第一个单元格引用锚定`SUM`到第一行，但让第二个单元格引用随行而变化。**在单元格C1**中试试这个：

```
=SUM(A$1:A1) - SUM(B$1:B1) 
```

现在，当您将其复制到列中时，它变为：

> **C2:** =SUM(A$1:A2) - SUM(B$1:B2)
> **C3:** =SUM(A$1:A3) - SUM(B$1:B3)
> **C4:** =SUM(A$1:A4) - SUM(B $1:B4)
> **C5:** =SUM(A$1:A5) - SUM(B$1:B5)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-22T08:39:48.503

```
C5:= (SUM))-(SUM)) 
```

试试这个：

```
C5:= (SUM(INDIRECT("A1:A" & ROW()))-(SUM(INDIRECT("B1:B" & ROW())) 
```

# java - 如何覆盖此运行方法调用另一个方法

> ID：14383496
> 
> 赞同：2
> 
> 时间：2013-01-17T16:21:02.587
> 
> 标签：java, multithreading, object, methods, queue

我有一个运行方法，它试图覆盖另一个运行方法。但它没有发生，因为在它传递给运行方法之前我得到了一个“找不到类的异常”。

这是我的带有运行方法的课程

```
 public class PollingSynchronizer implements Runnable{
   public Collection<KamMessage> incomingQueue,outgoingQueue,fetchedMessages;
   private Connection dbConnection;

/**
 * Constructor. Requires to provide a reference to the Kam message queue
 * 
 * @param incomingMessages reference to message queue
 * @param dbConnection 
 * 
 */
public PollingSynchronizer(Collection<KpiMessage> incomingQueue, Connection dbConnection) {
    super();
    this.incomingQueue = incomingQueue;
    this.dbConnection = dbConnection;
}
private int seqId;
public int getSeqId() {
    return seqId;
}
public void setSeqId(int seqId) {
    this.seqId = seqId;
}

@Override
/**
 * The method which runs Polling action and record the time at which it is done
 * 
 */

      public void run() {
    int seqId = 0;
    while(true) {
        List<KamMessage> list = null;
        try {
            list = fullPoll(seqId);
            if (!list.isEmpty()) {
                seqId = list.get(0).getSequence();
                incomingQueue.addAll(list);
                this.outgoingQueue = incomingQueue;
                System.out.println("waiting 3 seconds");
                System.out.println("new incoming message");
                Thread.sleep(3000);
               //when I debug my execution stops here and throws exception
                MessageProcessor processor = new MessageProcessor() {

                    @Override
                    public void run() {
            new MessageProcessor().generate(outgoingQueue);             
                    }
                };

            }
        } catch (Exception e1) {
            e1.printStackTrace();
        }

    }
} 
```

这是我必须调用才能执行的方法。

```
 public abstract class MessageProcessor implements Runnable {
private Collection<KpiMessage> fetchedMessages;
private Connection dbConnection;
Statement st = null;
ResultSet rs = null;
PreparedStatement pstmt = null;
private Collection<KpiMessage> outgoingQueue;

public KpiMsg804 MessageProcessor(Collection<KpiMessage> outgoingQueue, Connection
 dbConnection){
    this.outgoingQueue = outgoingQueue;
    this.dbConnection = dbConnection;
    return (KpiMsg804) fetchedMessages;
}

    public Collection<KamMessage> generate(Collection<KamMessage> outgoingQueue)
   {
    while(true){
        try {

            while (rs.next()) {
                KamMessage filedClass = convertRecordsetToPojo(rs);
                outgoingQueue.add(filedClass);

            }

            for (KamMessage pojoClass : outgoingQueue) {
                KamMsg804 updatedValue = createKamMsg804(pojoClass);
                System.out.print(" " + pojoClass.getSequence());
                System.out.print(" " + pojoClass.getTableName());
                System.out.print(" " + pojoClass.getAction());
                System.out.print(" " + updatedValue.getKeyInfo1());
                System.out.print(" " + updatedValue.getKeyInfo2());
                System.out.println(" " + pojoClass.getEntryTime());
            }
            return outgoingQueue;

        } catch (SQLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }

} 
```

我该如何实现呢？

由于我是新来的，请给出一个不满意的理由。这样我就可以解释我的问题了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T12:53:29.060

尝试这个：

```
MessageProcessor processor = new MessageProcessor() {

    @Override
    public void run() {
**new MessageProcessor()**.generate(outgoingQueue);             
    }
}; 
```

1.  MessageProcessor 是一个抽象类。run 方法中的对象创建应该在编译时失败。
2.  处理器对象已创建但未使用..您需要使用处理器实例创建一个线程并启动该线程。

# javascript - 在 jquery 中显示存储的值

> ID：14383497
> 
> 赞同：-1
> 
> 时间：2013-01-17T16:21:02.820
> 
> 标签：javascript, jquery

我想将表单值临时保存在 jquery 中（而不是数据库中），然后在同一页面上回显该值。

我有一个页面，其中有一个名为“添加项目”的按钮，当用户单击“添加项目”按钮时，一个表单会出现在弹出模式中。当在弹出模式上选择保存按钮时，弹出模式中的值将存储在 jquery 变量中。然后，这些变量的值将显示在我一开始隐藏的 div 上。

我不知道如何在 div 中显示值，这就是我正在做的事情：

```
<div id="items">
</div>

$('#items').hide();
$('#popupmodal').click(function(){

$('#savebutton').click(function() {
var price = $('#price').val();
alert(price); 
```

我想在 div“项目”中显示弹出模式的价格。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:23:37.223

您可以使用`html`jQuery 的方法来设置元素内容：

```
$('#items').html(price); 
```

[http://api.jquery.com/html/](http://api.jquery.com/html/)

如果要转义 html，请`text`改用：

```
$('#items').text(price); 
```

[http://api.jquery.com/text/](http://api.jquery.com/text/)

不要忘记展示您的物品：

```
$('#items').show(); 
```

# android - 在 Google Maps API v2 中收听我的位置图标点击事件

> ID：14383498
> 
> 赞同：3
> 
> 时间：2013-01-17T16:21:04.843
> 
> 标签：android, google-maps, geolocation, listener

对于新的 Maps API，我注意到当您按下地图上的“我的位置”图钉时，既[`onMapClick()`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.OnMapClickListener)不会触发也不会触发。[`onMarkerClick()`](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/GoogleMap.OnMarkerClickListener)

这向我表明，应该在某个地方有一个侦听器来侦听这些事件，在这些事件中按下了“我的位置”触摸事件，但我找不到任何东西。有人对此有解决方案吗？

我一直在考虑这样的解决方法：

禁用标准`MyLocation`图标并创建一个功能类似于我的位置图钉的普通标记。

```
myLocationPin = mMap.addMarker(new MarkerOptions()
                          .title("My Location")
                          .icon(BitmapDescriptorFactory.fromResource(R.drawable.mylocation))); 
```

并实施`LocationSource.OnLocationChangedListener`：

```
public void onLocationChanged (Location location) {
    myLocationPin.position(new LatLng(location.latitude, location.longitude)); 
} 
```

但是我对这种方法有两个问题：

1.  我不知道如何关闭标记
2.  我不知道`onLocationListener`如果我替换默认的`LocationSource`. 在上面找不到任何文档或源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T00:14:27.983

由于发布了此问题，`OnMyLocationChangeListener`因此已将其添加到 API 中，从而使解决方法的实施（很多）更容易（即不再需要自定义`LocationSource`）。

因此，您可以在“我的位置”点顶部绘制一个`Marker`（带有类似图标）以接收相应的`onMarkerClick()`回调。

```
public class DemoMapFragment extends SupportMapFragment implements OnMyLocationChangeListener, OnMarkerClickListener { 

    // Note that 'mMap' may be null if the Google Play services APK is not available. 
    private GoogleMap mMap; 
    private Marker myLocationMarker;
    private static BitmapDescriptor markerIconBitmapDescriptor;
    /* ... */

    @Override 
    public void onResume() { 
        super.onResume(); 
        setUpMapIfNeeded(); // Get a reference to the map      
        mMap.setMyLocationEnabled(true); // Enable the my-location layer 
        mMap.setOnMyLocationChangeListener(this); 
        mMap.setOnMarkerClickListener(this);
    }

    private void setUpMapIfNeeded() { 
        // Do a null check to confirm that we have not already instantiated the map. 
        if (mMap == null) { 
            mMap = getMap(); 
            // Check if we were successful in obtaining the map. 
            if (mMap != null) { 
                // The Map is verified. It is now safe to manipulate the map:

                // Load custom marker icon
                markerIconBitmapDescriptor = BitmapDescriptorFactory.fromResource(R.drawable.my_location_dot_icon); 

                // When the map is first loaded we need to add our marker on top of My Location dot
                myLocationMarker = mMap.addMarker(new MarkerOptions() 
                        .position(new LatLng(mMap.getMyLocation().getLatitude(),mMap.getMyLocation().getLongitude())) 
                        .icon(markerIconBitmapDescriptor)); 

                // Set default zoom 
                mMap.moveCamera(CameraUpdateFactory.zoomTo(15f)); 
            } 
        } 
    }   

    @Override
    public void onMyLocationChange(Location location) {
        // Remove the old marker object
        myLocationMarker.remove(); 

        // Add a new marker object at the new (My Location dot) location
        myLocationMarker = mMap.addMarker(new MarkerOptions() 
                .position(new LatLng(location().getLatitude(),location().getLongitude())) 
                .icon(markerIconBitmapDescriptor)); 
    }

    @Override
    public boolean onMarkerClick(Marker marker) {
        if (marker.equals(myLocationMarker)) {
            /* My Location dot callback ... */
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:18:14.763

“打破任何东西”是什么意思？你能详细说明一下吗？

另一种选择是，您也可以尝试从系统位置服务中收听位置变化。在您的活动中请求位置服务：

```
locationManager = (LocationManager)this.getSystemService(Context.LOCATION_SERVICE);
locatoinManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,2000,2f,this); 
```

您的活动扩展 LocationListener

```
public void onLocationChange(Location location){
     yourLocationPin.position(new LatLng(location.latitude, location.longitude)); 
} 
```

# build - 如何使用带有 js_of_ocaml 的模块？

> ID：14383500
> 
> 赞同：7
> 
> 时间：2013-01-17T16:21:08.813
> 
> 标签：build, module, ocaml, menhir, js-of-ocaml

我目前正在开发一个用 OCaml 编写并使用 js_of_ocaml 编译为 javascript 的网站项目。只要我只有一个使用该命令的源文件，它就可以很好地工作，`ocamlfind ocamlc -package js_of_ocaml -package js_of_ocaml.syntax -syntax camlp4o -linkpkg -o file.byte file.ml`但我想在我的项目中包含几个模块。我怎样才能做到这一点 ？

其他模块实际上是由 ocamllex 和 menhir 生成的词法分析器和解析器。我已经阅读了有关如何将 ocamllex 和 menhir 与 js_of_ocaml 一起使用的[教程](http://toss.sourceforge.net/ocaml.html)，但它对 js_of_ocaml 的安装位置做出了错误的假设（我使用 opam 安装它）并且它使用 ocamlbuild，我想知道如何在不使用自动化的情况下手动操作ocamlbuild 等工具。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T23:53:01.450

我通过尝试了解官方示例的 makefile 找到了解决方案。

这是我的 Makefile ：

```
OBJS=file1.cmo file2.cmo file3.cmo
NAME=projectname
OCAMLC=ocamlfind ocamlc -package js_of_ocaml -package js_of_ocaml.syntax -syntax camlp4o

$(NAME).byte: $(OBJS)
        $(OCAMLC) -linkpkg -o $@ $(OBJS)

$(NAME).js: $(NAME).byte
        js_of_ocaml $<

%.cmo: %.ml
        $(OCAMLC) -c $<
... 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T18:25:36.033

`ocamlbuild`记录它执行的操作。在 ocamlbuild 调用之后，查看`_build/_log`并查看它调用的所有命令，以及完整的参数等。这可能是您了解如何手动执行此操作的最简单方法。

（关于`+site-lib`假设和 OPAM，您应该向本教程的作者报告，他们会希望确保它也适用于 OPAM 用户。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-10T05:45:58.173

它进行了大量的实验，但我终于弄清楚了如何让 ocamlbuild 将相同的标志传递给 ocamlfind，因为 ocsigen 在这些 makefile 中使用。我还在使用随 OPAM 一起安装的 js_of_ocaml。

对于我的测试用例，我创建了一个非常小的示例，其中包含两个文件 - main.ml 和 square.ml。

平方毫升：

```
let square x = x * x 
```

主要.ml：

```
let () = (Js.Unsafe.coerce Dom_html.window)##square <- Js.wrap_callback Square.square 
```

成功构建的命令：

```
ocamlbuild -use-ocamlfind -pkgs js_of_ocaml,js_of_ocaml.syntax -syntax camlp4o main.byte 
```

这会产生与我的初始测试用例相同的 JS 输出，其中 square 函数位于 main.ml 中。ocamlbuild 日志完全显示了我的预期（两次调用 ocamldep，两次调用 ocamlc -c，一次调用 ocamlc -linkpkg）。

# android - 从android虚拟设备获取参数

> ID：14383501
> 
> 赞同：3
> 
> 时间：2013-01-17T16:21:09.583
> 
> 标签：android, android-emulator

当我在 android 虚拟设备管理器 (UI) 中制作设备时，我可以获取在命令行中创建这些设备的参数吗？

例如，从现有的模拟器中获取这些

```
android create avd -n Ev o4G -t 9 -c 8000MB 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-21T15:20:11.930

感谢朋友给我的帮助，但我终于找到了答案。在avd创建的每个模拟器中，使用的参数都保存在文件中：

```
.android/avd/your_emulator_name.avd/config.ini 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T16:50:32.757

是的。

检查[从命令行管理 AVD](http://developer.android.com/tools/devices/managing-avds-cmdline.html)，它将为您提供可以使用的各种命令。

例如

```
android create avd -n <name> -t <targetID> [-<option> <value>] 
```

**更新**

要获取当前详细的 AVD 列表，只需输入：

```
android list targets 
```

有关更具体的说明，请查看我发布的链接。

# mysql - 在重复密钥更新上与插入相同

> ID：14383503
> 
> 赞同：183
> 
> 时间：2013-01-17T16:21:17.003
> 
> 标签：mysql, on-duplicate-key

我四处寻找，但没有找到是否可能。

我有这个 MySQL 查询：

```
INSERT INTO table (id,a,b,c,d,e,f,g) VALUES (1,2,3,4,5,6,7,8) 
```

字段 id 有一个“唯一索引”，所以不能有两个。现在，如果数据库中已经存在相同的 id，我想更新它。但是我真的必须再次指定所有这些字段，例如：

```
INSERT INTO table (id,a,b,c,d,e,f,g) VALUES (1,2,3,4,5,6,7,8) 
ON DUPLICATE KEY UPDATE a=2,b=3,c=4,d=5,e=6,f=7,g=8 
```

或者：

```
INSERT INTO table (id,a,b,c,d,e,f,g) VALUES (1,2,3,4,5,6,7,8) 
ON DUPLICATE KEY UPDATE a=VALUES(a),b=VALUES(b),c=VALUES(c),d=VALUES(d),e=VALUES(e),f=VALUES(f),g=VALUES(g) 
```

我已经在插入中指定了所有内容......

额外说明一下，我想使用解决方法来获取 ID！

```
id=LAST_INSERT_ID(id) 
```

我希望有人能告诉我最有效的方法是什么。

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2013-01-17T16:26:58.667

给出该`UPDATE`语句以便可以将旧字段更新为新值。如果您的旧值与新值相同，为什么无论如何都需要更新它？

例如。如果您的列已设置`a`为；没有必要重新更新它。`g``2``8`

或者，您可以使用：

```
INSERT INTO table (id,a,b,c,d,e,f,g)
VALUES (1,2,3,4,5,6,7,8) 
ON DUPLICATE KEY
    UPDATE a=a, b=b, c=c, d=d, e=e, f=f, g=g; 
```

`id`从`LAST_INSERT_ID`; _ 您需要指定您正在使用的后端应用程序。

对于 LuaSQL，a`conn:getlastautoid()`获取值。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-01-17T16:38:46.120

有一个 MySQL 特定的 SQL 扩展，可能是您想要的 -[`REPLACE INTO`](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

但是它与“ON DUPLICATE UPDATE”的工作方式不同

1.  它删除与新行冲突的旧行，然后插入新行。只要表上没有主键就可以了，但是如果有，那么如果任何其他表引用该主键

2.  你不能引用旧行中的值，所以你不能做相当于

    ```
    INSERT INTO mytable (id, a, b, c) values ( 1, 2, 3, 4) 
    ON DUPLICATE KEY UPDATE
    id=1, a=2, b=3, c=c + 1; 
    ```

> 我想使用解决方法来获取 ID！

这应该可以——只要你的主键是自动递增的，last_insert_id() 就应该有正确的值。

但是，正如我所说，如果您实际上在其他表中使用该主键，`REPLACE INTO`您可能无法接受，因为它会删除通过唯一键发生冲突的旧行。

在您可以通过以下方式减少一些输入之前，有人[建议您：](https://stackoverflow.com/questions/9537710/is-there-a-way-to-use-on-duplicate-key-to-update-all-that-i-wanted-to-insert)

```
INSERT INTO `tableName` (`a`,`b`,`c`) VALUES (1,2,3)
ON DUPLICATE KEY UPDATE `a`=VALUES(`a`), `b`=VALUES(`b`), `c`=VALUES(`c`); 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2016-02-03T03:42:01.607

这是您的问题的解决方案：

我试图解决像你这样的问题，我想建议从简单的方面进行测试。

*请按照下列步骤操作： 从简单的解决方案中学习。*

第 1 步：使用此 SQL 查询**创建表模式：**

```
CREATE TABLE IF NOT EXISTS `user` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(30) NOT NULL,
  `password` varchar(32) NOT NULL,
  `status` tinyint(1) DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `no_duplicate` (`username`,`password`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=1; 
```

[![带有数据的表 <code>user</code>](../Images/f0157d05e90ccdad7156647ada8c5f2f.png)](https://i.stack.imgur.com/FW18K.jpg)

步骤 2：使用以下 SQL 查询**创建两列的索引**以防止重复数据：

```
ALTER TABLE `user` ADD INDEX no_duplicate (`username`, `password`); 
```

或者，**从 GUI 创建两列的索引，**如下所示： [![从 GUI 创建索引](../Images/bc20997bd9d910663a9363422e1f4650.png)](https://i.stack.imgur.com/tO83v.jpg) [![选择要创建索引的列](../Images/a198c38adc81e8be93fc8145e35988e6.png)](https://i.stack.imgur.com/Eq49M.jpg) [![表 <code>user</code> 的索引](../Images/df4d8e62e35bab8c194fbb6d358edb2e.png)](https://i.stack.imgur.com/3IQJS.jpg)

第 3 步：**如果存在则更新，如果不**使用则插入以下查询：

```
INSERT INTO `user`(`username`, `password`) VALUES ('ersks','Nepal') ON DUPLICATE KEY UPDATE `username`='master',`password`='Nepal';

INSERT INTO `user`(`username`, `password`) VALUES ('master','Nepal') ON DUPLICATE KEY UPDATE `username`='ersks',`password`='Nepal'; 
```

[![运行上述查询后的表 <code>user</code>](../Images/5eeae58306b080b6a6a01c10ee638408.png)](https://i.stack.imgur.com/YxPvX.jpg)

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2013-01-18T11:52:23.880

没有其他办法，我必须指定两次。首先是插入，其次是更新情况。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2016-12-06T17:23:31.580

以防万一您能够使用脚本语言来准备 SQL 查询，您可以通过使用`SET`而不是来重用 field=value 对`(a,b,c) VALUES(a,b,c)`。

PHP的一个例子：

```
$pairs = "a=$a,b=$b,c=$c";
$query = "INSERT INTO $table SET $pairs ON DUPLICATE KEY UPDATE $pairs"; 
```

示例表：

```
CREATE TABLE IF NOT EXISTS `tester` (
  `a` int(11) NOT NULL,
  `b` varchar(50) NOT NULL,
  `c` text NOT NULL,
  UNIQUE KEY `a` (`a`)
) ENGINE=MyISAM DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2015-10-07T11:07:00.490

您可能需要考虑使用`REPLACE INTO`语法，但请注意，在重复 PRIMARY / UNIQUE 键时，它会**删除**该行并**插入**一个新行。

您无需重新指定所有字段。但是，您应该考虑可能的性能降低（取决于您的表设计）。

## 注意事项：

*   如果您有 AUTO_INCREMENT 主键，它将被赋予一个新主键
*   索引可能需要更新

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2019-03-20T07:47:45.740

我知道已经晚了，但我希望有人能得到这个答案的帮助

```
INSERT INTO t1 (a,b,c) VALUES (1,2,3),(4,5,6)
ON DUPLICATE KEY UPDATE c=VALUES(a)+VALUES(b); 
```

你可以在这里阅读下面的教程：

> [https://mariadb.com/kb/en/library/insert-on-duplicate-key-update/](https://mariadb.com/kb/en/library/insert-on-duplicate-key-update/)
> 
> [http://www.mysqltutorial.org/mysql-insert-or-update-on-duplicate-key-update/](http://www.mysqltutorial.org/mysql-insert-or-update-on-duplicate-key-update/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-18T14:31:18.340

使用**MySQL v8.0.19**及更高版本，您可以这样做： [mysql doc](https://dev.mysql.com/doc/refman/8.0/en/insert-on-duplicate.html#docs-body:%7E:text=Beginning%20with%20MySQL%208.0.19)

```
INSERT INTO mytable(fielda, fieldb, fieldc) 
VALUES("2022-01-01", 97, "hello") 
AS NEW(newfielda, newfieldb, newfieldc) 
ON DUPLICATE KEY UPDATE
fielda=newfielda,
fieldb=newfieldb,
fieldc=newfieldc; 
```

* * *

* * *

**旁注**：此外，如果您想要**在重复键更新部分中使用条件，那么 MySQL 中会有一个扭曲。如果您将 fielda 更新为第一个参数并将其包含在 fieldb 的 IF 子句中，它将已经更新为新值！**将其移至末尾或类似位置。假设 fielda 是示例中的日期，并且您只想在日期比以前更新时更新：

```
INSERT INTO mytable(fielda, fieldb) 
VALUES("2022-01-01", 97) 
AS NEW(newfielda, newfieldb, newfieldc) 
ON DUPLICATE KEY UPDATE
fielda=IF(fielda<STR_TO_DATE(newfielda,'%Y-%m-%d %H:%i:%s'),newfielda,fielda),
fieldb=IF(fielda<STR_TO_DATE(newfielda,'%Y-%m-%d %H:%i:%s'),newfieldb,fieldb); 
```

在这种情况下**，**由于**<** ! 您需要将**fielda 的更新移到其下方或检查 <= 或 =** ...！

```
INSERT INTO mytable(fielda, fieldb) 
VALUES("2022-01-01", 97) 
AS NEW(newfielda, newfieldb, newfieldc) 
ON DUPLICATE KEY UPDATE
fielda=IF(fielda<STR_TO_DATE(newfielda,'%Y-%m-%d %H:%i:%s'),newfielda,fielda),
fieldb=IF(fielda=STR_TO_DATE(newfielda,'%Y-%m-%d %H:%i:%s'),newfieldb,fieldb); 
```

这与**使用 = 一样可以正常工作，因为在到达 fieldb 的 if 子句之前 fielda 已经更新**为其新值...就个人而言，如果您重新排列语句，我最喜欢 <= 在这种情况下...

* * *

## 回答 #9

> 赞同：-9
> 
> 时间：2015-07-08T09:44:50.923

您可以在这种情况下使用插入忽略，如果它得到重复记录，它将忽略 INSERT IGNORE ... ; -- 没有 ON DUPLICATE KEY

# android - 菜单处于活动状态时禁用用户输入？

> ID：14383506
> 
> 赞同：0
> 
> 时间：2013-01-17T16:21:29.857
> 
> 标签：android

我目前有一个从屏幕左侧滑出的菜单，并且正在为任何感兴趣的人使用此方法：

[Facebook 幻灯片滑出菜单（不使用该库）](https://stackoverflow.com/questions/11328895/facebook-lide-slideout-menu-not-using-that-library)

[Android - 在 LinearLayout 或 RelativeLayout 中为 View 的 topMargin/bottomMargin/etc 设置动画](https://stackoverflow.com/questions/2239442/android-animate-a-views-topmargin-bottommargin-etc-in-linearlayout-or-relativ)

一旦菜单出来，它只覆盖屏幕的 3/4，我仍然在屏幕的另外 1/4 显示我的主要活动。但是当我的 onMenuClick 被触发时，我试图“冻结”主要活动。因为现在即使打开了菜单，用户仍然可以滚动并点击屏幕 1/4 中的内容。

一旦我得到这个工作，如果他们点击主要活动上的任何地方，我就会将其设置为关闭菜单，但现在我只是试图在打开菜单时禁用输入，然后在菜单时再次启用输入已经关了。我知道有一种方法可以捕获当前的“屏幕”并将其呈现在屏幕上作为“锁定图像”可以这么说。我以前做过但不记得我是怎么做到的.

如果有人做过这样的事情并记得他们是如何实现的，那么我们将不胜感激:)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:42:17.863

尝试：

```
rightLayout.setOnClickListener(new OnClickListener() {

   @Override
   public void onClick(View v) {
        if(lhsMenu.getVisibility() == VISIBLE) {
           // Close the menu
           return;
        } else {
           // Handle the click normally
           super.onClick(v);
        }
}); 
```

rightLayout 和 lhsMenu 取自您在问题中发布的链接。

# r - 向现有数据集添加新列

> ID：14383507
> 
> 赞同：0
> 
> 时间：2013-01-17T16:21:36.987
> 
> 标签：r

```
 Date     City     Temp
  1/1/2012 Liverpool  10
  1/2/2012 Madrid     20
  1/3/2012 Milan      40
  1/4/2012 Istanbul   35
  1/5/2012 Munich      10 
```

我需要在此数据集中添加另一列，其中包含县列名称。如果 df$City 是马德里，则国家/地区必须是西班牙。我现在这是一个非常小的数据集，我需要能够以编程方式做这个瘦 R 吗？

我希望我的新数据框看起来像这样：

```
Date     City        Temp   Country
--------------------------------------
1/1/2012 Liverpool    10    England
1/2/2012 Madrid       20    Matrid
1/3/2012 Milan        40    Italy
1/4/2012 Istanbul     35    Turkey
1/5/2012 Munich       10    Germany 
```

任何指针我将如何在 R 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:33:24.833

提供您的确切数据的方式是：

```
 df <- read.table(text= " Date     City     Temp
                 1/1/2012 Liverpool  10
                 1/2/2012 Madrid     20
                 1/3/2012 Milan      40
                 1/4/2012 Istanbul   35
                  1/5/2012 Munich      10",header=TRUE)

df$Country <- ifelse(df$City == "Liverpool", "England",
                     ifelse(df$City == "Madrid", "Spain",
                         ifelse(df$City == "Milan", "Italy",
                           ifelse(df$City == "Istanbul", "Turkey", "Germany") ))) 
```

但是，我假设您可能有更多的城市和国家，在这种情况下，例如：

```
countrydf <- read.table(text= " City Country
                           Liverpool  England
                           Madrid     Spain
                           Milan      Italy
                           Istanbul   Turkey
                           Munich     Germany",header=TRUE,stringsAsFactors=FALSE)

merge(df,countrydf, by="City") 
```

笔记：

看看包装`maps`，这可能对你有用

```
library(maps)
data(world.cities)
head(world.cities)

world.cities[world.cities$name == "Istanbul" ,] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:42:58.577

如果不知道在您的情况下城市是如何映射到国家/地区的（即，它们是映射到`list`、`vector`、`data.frame`还是完全其他的？），很难猜出适合您的正确答案是什么。这是一种方法，其中城市-国家映射在列表中：

```
df <- read.table(text="Date     City     Temp
1/1/2012 Liverpool  10
1/2/2012 Madrid     20
1/3/2012 Milan      40
1/4/2012 Istanbul   35
1/5/2012 Munich      10", header=TRUE)

city.countries <- list(England=c('Liverpool', 'London'), 
                       Spain='Madrid', 
                       Italy='Milan', 
                       Turkey='Istanbul', 
                       Germany='Munich')

df <- transform(df, Country = with(stack(city.countries), ind[match(City, values)]))
#       Date      City Temp Country
# 1 1/1/2012 Liverpool   10 England
# 2 1/2/2012    Madrid   20   Spain
# 3 1/3/2012     Milan   40   Italy
# 4 1/4/2012  Istanbul   35  Turkey
# 5 1/5/2012    Munich   10 Germany 
```

# prolog - 深度列表的困难

> ID：14383510
> 
> 赞同：0
> 
> 时间：2013-01-17T16:22:08.497
> 
> 标签：prolog

这是我的代码，它不起作用。

```
skip([], []).

skip([H|T], [H|R]):-
    atomic(H),
    !,
    skip(T, R).

skip([_|T], R):-
    skip(T, R).

tails([], []).

tails([H|T], R]):-
    atomic(H),
    !,
    skip(T, T1),
    tails(T1, R).

tails([H|T], [H|R]):-
    tails(H, R1),
    skip(T, T1),
    tails(T1, R2),
    append(R1, R2, R). 
```

如果我们输入 list`L = [1, [2, 3, [4, 5] ] ]`结果应该是`R = [1, 3, 5].`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:22:24.533

不确定我是否理解您的要求，但此代码满足您的示例。

```
tails([], []).
tails([E], [E]) :-
    atomic(E), !.
tails([E,[H|T]|Es], [E|Rs]) :-
    atomic(E), !,
    tails([H|T], Qs),
    tails(Es, Ts),
    append(Qs, Ts, Rs).
tails([_|Es], Rs) :-
    tails(Es, Rs). 
```

测试：

```
?- tails([1,[2,3,[4,5]]],L).
L = [1, 3, 5]. 
```

# vb.net - 检查表单是否在所有屏幕的范围内

> ID：14383514
> 
> 赞同：7
> 
> 时间：2013-01-17T16:22:22.110
> 
> 标签：vb.net, winforms

如果完整的表格在屏幕上可见，我正在尝试详细说明。为了澄清这一点：我不在乎表单是否被另一个表单部分或完全隐藏，我只想知道表单是否完全在屏幕上。

在 Windows 中，可以四处移动表单，使它们隐藏到一半。那是因为您可以将它们移动到任何监视器的实际边界之外。（进一步向左、向右或底部。）如何以简单的方式检查是否是这种情况？

我想我可以做的是检查表单是否在`SystemInformation.VirtualScreen`. 这里的问题是，并非虚拟屏幕的每个像素实际上都是可见的。当然，如果`SystemInformation.MonitorCount = 1`

我仍然对此并不满意。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T16:26:14.130

```
Public Function IsOnScreen(ByVal form As Form) As Boolean
    Dim screens() As Screen = Screen.AllScreens

    For Each scrn As Screen In screens
        Dim formRectangle As Rectangle = New Rectangle(form.Left, form.Top, form.Width, form.Height)

        If scrn.WorkingArea.Contains(formRectangle) Then
            Return True
        End If
    Next

    Return False
End Function 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T21:28:20.353

我能想到的最好方法是检查表单的所有四个角是否都在屏幕上。像这样：

```
 public bool FormOnScreen(Form frm) {
        if (frm.IsHandleCreated) throw new InvalidOperationException();
        if (!frm.Visible || frm.WindowState == FormWindowState.Minimized) return false;
        return PointVisible(new Point(frm.Left, frm.Top)) &&
               PointVisible(new Point(frm.Right, frm.Top)) &&
               PointVisible(new Point(frm.Right, frm.Bottom)) &&
               PointVisible(new Point(frm.Left, frm.Bottom));
    }

    private static bool PointVisible(Point p) {
        var scr = Screen.FromPoint(p);
        return scr.Bounds.Contains(p);
    } 
```

# hyperlink - 如何使用 Interop 向幻灯片添加超链接

> ID：14383516
> 
> 赞同：0
> 
> 时间：2013-01-17T16:22:28.273
> 
> 标签：hyperlink, interop, powerpoint

如何使用 C# 将超链接添加到演示文稿内的具体幻灯片？现在我已经找到了如何超链接到一个站点：

TextRange.ActionSettings[Microsoft.Office.Interop.PowerPoint.PpMouseActivation.ppMouseClick].Hyperlink.Address = "http://www.google.com";

并找到 Last/First/Next 的选项

TextFrame.TextRange.ActionSettings[PpMouseActivation.ppMouseClick].Action = PpActionType.ppActionFirstSlide;

但不要滑动4

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T22:57:54.417

如果您在 PowerPoint 中手动添加设置，然后询问设置是什么，它会告诉您。例如，将幻灯片 4 的链接添加到文本框，确保选中文本框并运行：

```
Sub Thing()
    Dim oSh As Shape
    Set oSh = ActiveWindow.Selection.ShapeRange(1)
    With oSh
        Debug.Print .ActionSettings(1).Hyperlink.Address
        Debug.Print .ActionSettings(1).Hyperlink.SubAddress
    End With
End Sub 
```

结果，一个空行（没有超链接地址）和一个子地址：

```
259,4,Title of slide 4 
```

259 是 SlideID 4 是 SlideIndex “幻灯片 4 的标题”是幻灯片 4 上的标题文本

我相当确定 ID 和索引是必要的；标题不是。例如，在同一演示文稿中设置指向幻灯片 3 的链接：

```
Sub ThingTwo()
    Dim oSh As Shape
    Set oSh = ActiveWindow.Selection.ShapeRange(1)
    With oSh
        .ActionSettings(1).Hyperlink.Address = ""
        .ActionSettings(1).Hyperlink.SubAddress = "258,3,"
    End With
End Sub 
```

在 c# 中进行操作...留给读者作为练习。

# wpf - WPF上的自定义左侧菜单形状

> ID：14383518
> 
> 赞同：1
> 
> 时间：2013-01-17T16:22:40.267
> 
> 标签：wpf, wpf-controls

我正在设计一个 WPF 应用程序，我希望它有一个自定义的左侧菜单。实际上，我希望左侧菜单在图像上看起来像：

![在此处输入图像描述](../Images/6ac76b7ae844e74dca0b7c2caf0d1c1c.png)

我知道这与覆盖模板有关，但我不确定如何绘制该形状。请问有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:27:10.197

这可以通过在 WPF 中组合形状来完成。看看这个[教程](http://keyvan.io/combine-shapes-in-windows-presentation-foundation)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T16:32:07.863

好吧，我不知道这是否是您想要的，但请尝试以下代码：

```
 <WrapPanel>
        <Rectangle Width="50" HorizontalAlignment="Left" Height="200" Fill="Aqua"/>            
        <Border CornerRadius="0,100,100,0" Width="50" HorizontalAlignment="Left" Height="200" Background="Aqua"/>
    </WrapPanel> 
```

# asp.net - 下拉列表重置/值的索引保留在 selecteditemchanged

> ID：14383523
> 
> 赞同：0
> 
> 时间：2013-01-17T16:22:52.480
> 
> 标签：asp.net, drop-down-menu, indexing

我必须在 PageLoad 和运行时填写一些 DropDownLists。如果第一个调用它，则填充第二个 DropDownList，`onSelectedItemChanged()`因为我必须根据第一个 ddl 的选定值填充第二个 ddl。我从 sql 查询中获取了第二个 ddl 的数据。
这是我的代码：

```
private void fill_dropdown_schueler(string klasse)
{
    string query_select = "";
    SqlConnection con = new SqlConnection();
    SqlDataReader dr;
    SqlCommand select;
    ArrayList schueler = new ArrayList();

    con.ConnectionString = ConfigurationManager.ConnectionStrings["Projektwoche"].ConnectionString;

    try
    {
        if (con.State == ConnectionState.Closed)
            con.Open();

        /*** Fill DropDownList4 "Schüler" ***/
        query_select = "SELECT [Nachname], [Vorname], [Katalognummer] FROM [Projektwoche].[dbo].[Einträge] WHERE Klasse='" + klasse + "'ORDER BY [Nachname] ASC;";
        select = new SqlCommand(query_select, con);
        dr = select.ExecuteReader();
        int index = 0;
        while (dr.Read())
        {
            schueler.Add((String)dr["Nachname"] + " " + (String)dr["Vorname"] + "  Nr: " + (String)dr["Katalognummer"]);
            kata[index] = Convert.ToInt32((String)dr["Katalognummer"]);
            index++;
        }
        dr.Close();

        DropDownList4.DataSource = schueler;
        DropDownList4.DataBind();

        schueler.Clear();

        con.Close();
    }

    catch (Exception e)
    {
        Label7.Text = e.ToString();
    }
} 
```

所以我将 的值存储`Katalognummer]`在全局数组中`kata[]`，这样我就可以通过第二个 DropDownList 的索引访问它们的值（无需进行更多查询）。

如果我将数组的值`kata[]`放入标签中，它们就可以了，但前提是我将其`Label.Text = kata[].ToString();`放入此函数中。

此函数在`onSelectedItemChanged`第一个 ddl 的方法中调用。

如果我想`kata[]`在另一个函数中获取数组的值，所有值都是 0，而不是我想要从查询中获得的值。

似乎`kata[]`在这个函数之后数组被清除了？？？

# oracle - oracle动态验证

> ID：14383526
> 
> 赞同：0
> 
> 时间：2013-01-17T16:23:00.283
> 
> 标签：oracle, validation, dynamic

考虑一个有 3 列的表

```
Value1   operator     value2
abc          =               xyz
1            !=               2
5            >                8
9            <=              11
xyz          is not Null
{null val}   is null 
```

我想编写一个通用函数，它通过使用运算符验证 value1 和 value2 来返回验证结果为真或假，或者在“为空”和“非空”运算符的情况下检查 value1（最后两种情况）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:42:27.957

你可以用动态 SQL 做这样的事情（注意实际上你需要添加一堆逻辑来防止 SQL 注入攻击）

```
SQL> ed
Wrote file afiedt.buf

  1  create or replace function evaluate( p_val1 in varchar2,
  2                                       p_op   in varchar2,
  3                                       p_val2 in varchar2 )
  4    return varchar2
  5  is
  6    l_result varchar2(1);
  7    l_sql_stmt varchar2(1000);
  8  begin
  9    if( p_val2 is not null )
 10    then
 11      l_sql_stmt := 'select (case when :1 ' || p_op || ' :2 then ''Y'' else ''N'' end) from dual';
 12      execute immediate l_sql_stmt
 13         into l_result
 14        using p_val1, p_val2;
 15    else
 16      l_sql_stmt := 'select (case when :1 ' || p_op || ' then ''Y'' else ''N'' end) from dual';
 17      execute immediate l_sql_stmt
 18         into l_result
 19        using p_val1;
 20    end if;
 21    return l_result;
 22* end;
SQL> /

Function created.

SQL>  select evaluate( 'xyz', 'is not null', null )
  2     from dual;

EVALUATE('XYZ','ISNOTNULL',NULL)
--------------------------------------------------------------------------------
Y

SQL> select evaluate( 'abc', '=', 'xyz' )
  2    from dual;

EVALUATE('ABC','=','XYZ')
--------------------------------------------------------------------------------
N 
```

由于您将数据存储在表中，这意味着每列都是`VARCHAR2`. 不过，我的猜测是，您并不总是想使用字符串比较语义。例如，字符串 '9' 大于字符串 '11' 而数字 9 小于数字 11。如果您想使用字符串比较语义以外的其他内容，则需要添加检查参数的代码并应用您想要确定要应用的比较语义的任何逻辑，然后生成适当的动态 SQL 语句。

然而，我强烈质疑该要求是否明智。首先，从数据模型的角度来看，将数字数据存储在列中几乎没有意义`VARCHAR2`——当您发现自己试图在同一列中混合字符串和数字数据时，您几乎总是犯了数据模型错误。我也很难想象您要解决的业务问题会涉及这种动态功能——似乎有更好的方法来解决您要解决的任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-18T08:50:15.083

在我看来，您可以在规则列表中使用展开逻辑来逃避动态 SQL。如果您需要检查一条记录，请使用类似

```
with CheckedTable as (select * from t where primary_key = ID)
select count(*) from 
(
select * from CheckedTable where operator = '=' and value1 = value2
union all
select * from CheckedTable where operator = '!=' and value1 <> value2
union all
select * from CheckedTable where operator = '>' and value1 > value2
union all
...
select * from CheckedTable where operator = 'is null' and value1 is null
) 
```

所以 1 = TRUE 和 0 = FALSE。

PS 如果你想支持 IN 子句，你可以使用这个解决方法（从 value2 中删除括号！）

```
select * from CheckedTable where operator = 'in' and ',' || value2 || ',' like '%,' || value1 || ',%' 
```

[SQLFiddle 上的证明](http://www.sqlfiddle.com/#!4/58112/6)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T04:48:26.150

通过上面的问题和结果，我想出了一些我们应该注意使用字符串和比较的点：

-----> 可以将数值与任何比较函数进行比较，即；

```
=, !=, <, >, <=, >=, IS NULL, LIKE, BETWEEN, IN 
```

但要小心使用引号；

```
SELECT (CASE WHEN '9' > '12' THEN 'Y' ELSE 'N' END) FROM dual;-- results Y 
```

因为，这里的隐式位置比较是通过检查**9>1**（12 中的 1）来完成的，所以条件 9>1 为真，所以结果为 Y。

与数字进行比较的正确方法是不带引号：

```
SELECT (CASE WHEN 9 > 12 THEN 'Y' ELSE 'N' END) FROM dual;--results N 
```

----->用'>'和'<'将一个字符串与另一个字符串进行比较是没有意义的

-----> 我们`UTL_MATCH`专门为字符串匹配打包。

```
SELECT utl_match.edit_distance( 'abc','abcde' ) FROM dual;--results 2, shows no:of edits required to make string1 to string2.
SELECT UTL_MATCH.EDIT_DISTANCE_similarity('abc', 'abcde') FROM DUAL;-- results 60, shows the similarity percentage of two strings. 
```

# perl - Win32::Process::KillProcess 未返回正确的退出代码

> ID：14383528
> 
> 赞同：0
> 
> 时间：2013-01-17T16:23:04.363
> 
> 标签：perl

我正在用 perl 编写一个函数，它将杀死一个给定其 PID 的进程。

```
sub ShutPidForWindows()
{
    require Win32::Process;
    $PID = 1234;
    $count = 0;
    $ReturnStatus = 0;
    $ExitCode = 0 ;

    if ($PID == 0)
    {
        return ($ReturnStatus);
    }

    Win32::Process::KillProcess($PID, $ExitCode);
    print "PID = ".$PID."\n";
    print "Return Code = ".$ExitCode."\n";

    if ($ExitCode)
    {
        $ReturnStatus = 1;
    }
    else
    {
        $ReturnStatus = 2;
    }
    return ($ReturnStatus);
} 
```

当这个函数被执行时，它总是返回`2`。即使进程`1234`不存在。

我得到的 o/p 是：

```
PID = 1234
Return Code = 0 
```

Perl Doc 说这`ExitCode`将由进程返回的退出代码填充。那么`ExitCode`应该是`1`。

我做错什么了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:57:51.767

问题是您使用`require`而不是`use`加载模块。有时这没问题，但您应该始终遵循模块文档中的示例。

您还必须*始终* `use strict`并`use warnings`在您编写的每个 Perl 程序的顶部。这将使得有必要声明所有变量，这应该尽可能接近它们的第一个使用点。这些措施将揭示许多您可能会忽略的错误，并且在您向他人寻求代码帮助时尤其重要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T22:11:35.207

如果您[`$^E`](http://search.cpan.org/perldoc?perlvar#%24%5EE)在调用 后进行检查`Win32::Process::KillProcess`，您可能会看到类似的值

```
The parameter is incorrect 
```

这应该告诉你你做错了什么。

# tridion - Tridion 2011 中的所有签出项目在哪里？

> ID：14383532
> 
> 赞同：6
> 
> 时间：2013-01-17T16:23:21.900
> 
> 标签：tridion, tridion-2011

Tridion 2011 GUI 中的所有已签出项目在哪里？在 5.3 中，它位于工作流列表中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T17:04:01.423

它在 2011 年的工作流程领域。

快捷方式 -> 我的任务 -> 已签出项目

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-30T03:17:45.007

您需要在快捷方式 > 我的任务 > 签出项目下小心。这不仅可以列出您已签出的项目，还可以列出其他所有人的 . 所以请注意不要检查其他人的物品。

# unix - 命令参数的 Unix 管道

> ID：14383534
> 
> 赞同：4
> 
> 时间：2013-01-17T16:23:25.147
> 
> 标签：unix, io, pipe

我正在寻找有关如何使用管道将标准输出作为其他命令的参数传递的见解。

例如，考虑这种情况：

```
ls | grep Hello 
```

grep 的结构遵循以下模式：`grep SearchTerm PathOfFileToBeSearched`. 在我所说明的情况下，将单词 Hello 作为 the `SearchTerm`，并使用 ls 的结果作为要搜索的文件。但是，如果我想切换它怎么办？如果我希望 ls 的标准输出是 SearchTerm，并且 grep 后面的参数是 ，该`PathOfFileToBeSearched`怎么办？一般来说，我想控制管道用上一个命令的标准输出填充哪个参数。这是可能的，还是取决于命令（例如，`grep`）的脚本是如何编写的？

非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T16:24:45.880

`grep`本身将被构建，如果您没有指定文件名，它将打开标准输入（并因此获得 的输出`ls`）。这里没有真正的通用机制——只是约定。

如果您希望输出 of`ls`作为搜索词，您可以通过 shell 执行此操作。因此使用子shell和[替换](http://tldp.org/LDP/abs/html/commandsub.html)：

```
$ grep $(ls) filename.txt 
```

在这种情况下`ls`，在子 shell 中运行，它的标准输出被捕获并作为`grep`. 请注意，如果`ls`输出包含空格，这将导致`grep`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T16:40:11.347

基本上有两种选择：shell 命令替换和`xargs`. Brian Agnew 刚刚写过关于前者的文章。`xargs`是一个实用程序，它接受其标准输入并将其转换为要执行的命令的参数。所以你可以跑

```
ls | xargs -n1 -J % grep -- % PathOfFileToBeSearched 
```

对于每个输出的文件，它将`ls`运行`grep -e filename PathOfFileToBeSearched`到 grep 以获取`ls`您指定的另一个文件中的文件名输出。这是一个不寻常的`xargs`调用；通常它用于在命令末尾添加一个或多个参数，而在这里它应该在特定位置添加一个参数，所以我使用`-n`和`-J`参数来安排它。更常见的用法是

```
ls | xargs grep -- term 
```

搜索`ls`for输出的所有文件`term`。当然，如果您只想要当前目录中的文件，您可以更简单地无需管道：

```
grep -- term * 
```

同样在你相反的安排中，

```
for filename in *; do
  grep -- "$@" PathOfFileToBeSearched
done 
```

有一个重要的`xargs`警告：生成的文件名中的空白字符`ls`不会得到很好的处理。为此，只要您有 GNU 实用程序，您就可以使用它`find`。

```
find . -mindepth 1 -maxdepth 1 -print0 | xargs -0 -n1 -J % grep -- % PathOfFileToBeSearched 
```

使用 NUL 字符来分隔文件名而不是空格

# java - 如何从数组列表中获取随机项而不在android中重复

> ID：14383539
> 
> 赞同：1
> 
> 时间：2013-01-17T16:23:42.290
> 
> 标签：java, android

我有`ArrayList`一个对象，我想要一个特定位置的项目，但是每次我启动活动时，检索到的位置应该是随机的，并且在每个位置项目被完全检索到之前也不会重复。我使用了这种方法：

```
public static int getRandomNumber(ArrayList<Integer> arr)
            throws IllegalArgumentException {
        try {
            Random random = new Random();
            int select = random.nextInt(arr.size());
            int randomnum = arr.get(select);
            GlobalData.randList.remove(select);
            return randomnum;
        } catch (IllegalArgumentException e) {

            for (int i = 0; i < arr.size(); i++) {

                GlobalData.randList.add(i);

            }
            return 0;
        } 
```

但它不起作用，就像重复号码即将到来，可能是有原因的，因为每次我重新启动活动。我做了它`oncreate`而不是`onResume`但它没有按我预期的那样工作？还有其他方法可以使用它吗？有什么解决办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:38:18.093

用于`Collections.shuffle()`随机播放数组。使用另一个变量来跟踪数组中的当前位置。每次检索新值时都会增加变量。一旦到达数组的末尾，请重新洗牌。

参考： [洗牌算法](http://en.wikipedia.org/wiki/Shuffling#Shuffling_algorithms)

```
public class RandomArray {
    ArrayList<Integer> array = null;
    int position = 0;

    public RandomArray(ArrayList<Integer> arr) {
        array = arr;
        position = arr.size();
    }

    public int getNext() {
        if (position == array.size()) {
           position = 0;
           Collections.shuffle(array);
        }
        return array.get(position++);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:52:46.050

如果您不关心原始订单，可以尝试以下操作：

```
Object[] array = new Object[10];    // say 10 objects
int remain = array.length;
Random rnd = new Random();

public Object next () {
    if (remain == 0) {
        return null;
    } else {
        int i = rnd.nextInt(remain--);
        Object tmp = array[i];
        array[i] = array[remain];
        array[remain] = tmp;
        return tmp;
    }
} 
```

你也可以用 ArrayList 做类似的事情。

嗯，这样一来，就比 shuffle() 方法快了。[shuffle()](https://stackoverflow.com/questions/2249520/javas-collections-shuffle-is-doing-what)的时间复杂度为 O(n)，而我的代码为 O(1)。

# android - 从 Android 中的多个活动控制生成的线程

> ID：14383540
> 
> 赞同：0
> 
> 时间：2013-01-17T16:23:51.233
> 
> 标签：android, multithreading, object-reference

我有一个运行后台线程的应用程序，该线程定期执行任务。UI 线程在几个不同的活动中移动。

我使用的教程可以在[这个博客](http://mindtherobot.com/blog/159/android-guts-intro-to-loopers-and-handlers/)上找到，它的要点如下：

*   创建一个扩展 Thread 的类

`public final class JSONThread extends Thread {`

*   在该类中定义一个方法，将任务添加到 MessageQueue，在可以时提示执行。

`public synchronized void enqueueJSON(final JSON.JSON task) {`

但是，在我的主要活动中创建初始对象后，导航到另一个活动显然会丢失绑定到我的线程的对象。我不再能够调用该对象上的方法（因此无法添加到队列中）。

我不确定这是由于我在架构方面的错误决定还是由于监督了明显的解决方案造成的。有任何想法吗？请注意，出于此目的，我试图避免使用 AsyncTask，因为一个简单任务的五个线程池似乎有点太多了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:40:52.413

您需要将 Thread 对象存储为其他对象的成员，其生命周期比 Activity 长。

给你两个想法：

a) 它可能是 Application 的成员 (http://developer.android.com/reference/android/app/Application.html)

如果您没有运行服务，您可能会遇到问题。不能保证您的应用程序不会被杀死（例如，如果任何系统对话框将在您的活动之上弹出）

b）它可能是服务的成员（http://developer.android.com/reference/android/app/Service.html）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:40:39.843

您应该使用服务，而不是线程。只要有一个活动绑定到它上面，一个服务就会一直在后台运行，并且当一个活动退出时它不会被重置。

# mysql - MySQL：获取日期为 NULL 的行，或者如果存在获取具有设定日期的行

> ID：14383541
> 
> 赞同：0
> 
> 时间：2013-01-17T16:23:56.740
> 
> 标签：mysql, date, null

我得到了一些产品价格的表格，我可以在其中设置一个始终有效的价格，如果在查询运行时没有其他有效的价格。

```
id | item_id | valid_from | valid_to   | price
---+---------+------------+------------+------
1  | 1337    | 2013-01-17 | 2013-01-18 | 35.50
2  | 1337    | NULL       | NULL       | 39.95
3  | 1337    | 2013-01-13 | 2013-01-18 | 36.00 
```

我不知道如何获得正确的价格`NOW()`（今天是 35.50），需要一些帮助。如果有两个或更多价格在一段时间内有效，我希望得到稍后开始的价格。到目前为止，我得到了：

```
SELECT price
FROM my_table
WHERE item_id = 1337
AND (
    valid_from <= NOW() AND
    valid_to >= NOW()
) OR (
    id NOT IN (
        SELECT id
        FROM my_table
        WHERE item_id = 1337
        AND valid_from <= NOW()
        AND valid_to >= NOW()
    ) AND
    valid_from IS NULL AND
    valid_to IS NULL
)
ORDER BY valid_from DESC
LIMIT 1 
```

顺便说一句，我对这个表格结构并不满意。如果您对此有其他评论，我想阅读它们。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:37:57.523

除了将默认价格的日期值设置为 NULL，您还可以将它们设置得非常小和大：设置 valid_from = 1970 年 1 月 1 日和 valid_to = 2038 年 1 月 1 日。然后这些记录将始终包含在内，但不会包含在内如果有其他替代价格，则唯一的。

问题变成如何对结果集进行排序，但这取决于您的业务规则。现在你正在按 valid_from 排序，你可以继续这样做。如果您想要最低的价格，而默认价格总是最高的，您可以按价格排序。否则，您可以按 NOW() 和价格日期边界之间的时间长度以及最接近的日期获胜。正如我所说，这取决于你想如何在几个可能的竞争价格中进行选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:39:26.317

试试这个，我认为检查`valid_from`就`NULL`足够了。

```
SELECT item_id, price
FROM tbl
WHERE item_id = 1337
     AND  valid_from <= NOW()
     AND  valid_to >= NOW()
     OR (valid_from IS NULL AND item_id = 1337) 
ORDER BY CASE WHEN valid_from IS NULL 1 ELSE 0 END, valid_from
LIMIT 1 
```

# internet-explorer - FontAwesome 仅在 IE9 中显示“有时”

> ID：14383546
> 
> 赞同：0
> 
> 时间：2013-01-17T16:24:22.493
> 
> 标签：internet-explorer, cross-browser, font-awesome

我正在尝试用[FontAwesome](http://fortawesome.github.com/Font-Awesome/)的自定义图标字体替换基于图像的图标。我找到了这个[FontAwesome WordPress 插件](https://github.com/rachelbaker/Font-Awesome-WordPress-Plugin)，它可以为我做这件事。所有图标在以下位置正确显示：

*   OSX 谷歌浏览器 24.0.1312.52
*   OSX 苹果 Safari 6.0.2
*   OSX 使用 Internet Explorer 8.0.6001 运行 Windows XP VM

但是，这些图标不会显示在以下位置：

*   OSX Mozilla FireFox 18.0
*   运行 IE9 的 Windows 7
*   任何[SauceLabs](https://saucelabs.com/account)的 Internet Explorer 虚拟机

我检查了页面是否意外以怪癖模式呈现，但事实并非如此。我不知道问题可能是什么。有人可以帮我吗？？？

请在[此处](http://aashtowarebridge.com/)查看有问题的我的网站。我在[这里](http://aashtowarebridge.com/font/)设置了一个干净的测试页面，它似乎可以工作，这让我认为另一个插件正在弄乱我的网站，使图标不出现。

**编辑：**我相信我已经发现了问题。据我了解，IIS7 服务器不理解[此处](http://www.dirigodev.com/blog/404-errors-in-IIS7-for-embedded-woff-font-files/)详述的 .WOFF 文件。所以我尝试将 .WOFF 文件上传到另一个非 IIS7 服务器，结果发现 Mozilla Firefox 不允许从单独的服务器加载字体。所以，基本上，我的 IIS7 服务器上必须有字体。从那以后，我向我们的 IT 人员发送了即时消息，但没有收到他的回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:46:28.277

我在 MOZILLA 上发现了它！Internet Explorer 仍然无法正常工作。

*   我的网站托管在 IIS7 服务器上。IIS7 服务器无法识别 .WOFF 字体（无需更改某些设置）。
*   所以我尝试在非 IIS7 服务器上托管 .WOFF 文件。但是，Mozilla FireFox 不允许从单独的服务器加载字体。
*   您所要做的就是编辑*web.config*文件，使其看起来像[这样](https://stackoverflow.com/questions/13061524/how-to-set-access-control-allow-origin-on-particular-file-web-config)，以便能够从单独的服务器加载字体。

# resources - 如何检测/查找 Windows 8 当前比例百分比

> ID：14383551
> 
> 赞同：0
> 
> 时间：2013-01-17T16:24:32.040
> 
> 标签：resources, windows-runtime, scaling

在 Windows 8 中有三种缩放百分比： • 100%（未应用缩放） •140%（高清平板电脑） •180%（quad-XGA 平板电脑）

如何在 WinRT 代码中检测此时屏幕的百分比？

（我想制作一个从数据库加载最佳分辨率的自定义图像服务）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:43:14.567

利用

```
var currentScale = DisplayProperties.ResolutionScale; 
```

# html - 标记完美融入标记的单词并保持标记有效

> ID：14383553
> 
> 赞同：1
> 
> 时间：2013-01-17T16:24:34.910
> 
> 标签：html, css

有没有办法以某种方式标记文本中的几个单词只是为了进一步的程序处理，而不是任何视觉类型的东西？假设我有以下文字：

> Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua。在 vero eos et accusam et justo duo dolores et ea rebum。Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet。

假设`gubergren`是我的关键字。我不能只解析文本，`gubergren`因为我不知道关键字的值。我可以做的是在渲染时用标记标记我的关键字：

> Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua。在 vero eos et accusam et justo duo dolores et ea rebum。Stet clita kasd `<span class="keyword">`gubergren `</span>`, no sea takimata sanctus est Lorem ipsum dolor sit amet。

现在我可以轻松地解析`span`带有类名的元素的文本，`keyword`并且可以获取我的关键字列表。但是如果`span`与 CSS 样式相关联呢？这在浏览器中看起来很傻。另一方面，我不能仅仅发明一个自己的标签，因为我绝对希望我的网站保持 HTML 有效。

**你有什么建议？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:31:07.137

你有正确的方法。使用带有“关键字”类的跨度标签。您不必担心 css 问题，尤其是如果您是编写 css 的人。不要为“关键字”类设置样式。

如果您不编写 CSS，我无法想象为什么有人会在没有附加类选择器的情况下设置简单标签的样式*。*这样做有可能破坏很多事情。如果您担心“关键字”类附加了 css，那么请使类名具有唯一性。

如果您其他人正在为没有类选择器的标签设置样式，请定义您自己的样式，以摆脱专门为具有“关键字”类的跨度标签的格式。

```
span.keyword {
   border: 0px;
   display: inline;
   background-color: transparent;
   ... whatever other formatting you may need to remove...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:29:20.877

关键字周围有 2 个无形物怎么样？

例子 ：

```
<span style="display: none;">&nbsp;</span>gubergren<span style="display: none;">&nbsp;</span> 
```

您可以检索跨度并获取 2 个跨度之间的内容。但我不觉得这是一个很好的解决方案。

最好的解决方案是不将 css 应用于具有特定类的跨度。但我想你已经知道了。

您还可以使用简单的 html 属性。例子 ：

```
<p data-keyword="gubergren">Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:34:40.053

我不确定文本来自哪里。在我们的 CMS 中，我们使用 || 对于特殊代码。所以我的副本中有：

```
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor
invidunt ut labore et dolore ||keyword|| magna aliquyam erat, sed diam voluptua. At vero 
```

因为|| 很少用于其他任何事情，然后我解析我的数据服务器端寻找||。我将使用各种中间功能来获取我需要的数据并根据需要更改副本。在单词周围添加 html 元素，将单词替换为要处理的表单或其他服务器端代码。能力是无穷无尽的。

# javascript - 如何在使用“toDataURL”方法转换画布时设置图像质量？

> ID：14383557
> 
> 赞同：44
> 
> 时间：2013-01-17T16:24:53.453
> 
> 标签：javascript, image, html5-canvas, png, jpeg

我想在将画布元素编码为 jpg 时设置质量因子。

```
var data = myCanvas.toDataURL( "image/jpeg" ); 
```

它没有给我一个质量选择。我可以使用其他库吗？

相关：不同浏览器使用的默认质量设置是什么？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2013-01-17T16:28:15.827

该函数的第二个参数是质量。范围从 0.0 到 1.0

```
canvas.toDataURL(type,quality); 
```

[在这里](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement#Methods)你有扩展信息

而且我认为一旦转换就不可能知道图像的质量。正如您在此[提要](http://jsfiddle.net/Wc26H/1/)上看到的，在控制台上打印值时获得的唯一信息是类型和图像代码本身。

这是我制作的一段代码，用于了解浏览器使用的质量的默认值。

```
 var c=document.getElementById("myCanvas");
    var ctx=c.getContext("2d");
    ctx.fillStyle="#FF0000";
    ctx.fillRect(0,0,150,75);

    var url = c.toDataURL('image/jpeg');
    var v = 0
    for(var i = 0; i < 100; i++ ){

        v += 0.01;
        x = parseFloat((v).toFixed(2))
        var test = c.toDataURL('image/jpeg', x);

        if(test == url){
            console.log('The default value is: ' + x);
        }
    } 
```

基本上我认为图像本身的变化会反映在base64字符串上。所以代码只是尝试`toDataURL()`方法上的所有可能值，并将结果字符串与默认字符串进行比较。它似乎有效。对于铬，我得到 0.92。

[这](http://jsfiddle.net/ZHR6N/)是小提琴上的工作示例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-29T16:20:08.897

使用[Fabric.js](http://fabricjs.com/)是一种非常简单且易于阅读的方式，是这样的：

```
canvas.toDataURL({
   format: 'jpeg',
   quality: 0.8
}); 
```

这也允许您有其他选项，使您能够裁剪图像等：

```
canvas.toDataURL({
    format: 'png',
    left: 300,
    top: 250,
    width: 200,
    height: 150
}) 
```

jsFiddle：http: [//jsfiddle.net/7f9bqs00/30/](http://jsfiddle.net/7f9bqs00/30/)

# php - PHP 网页与 Web 服务

> ID：14383559
> 
> 赞同：0
> 
> 时间：2013-01-17T16:25:05.167
> 
> 标签：php, web-services, web-applications, wsdl

我有几个 PHP 库（脚本、类和函数文件），我想将它们作为可通过 Web 访问的服务提供。我试图在措辞上尽可能谨慎，因为“Web 服务”似乎相当微妙。据我所知，Web 服务有 2 种主要风格，REST 和 WSDL/SOAP，后者似乎更适用于我想做的事情，但它似乎有很多开销，而且可能有点矫枉过正。我可以简单地制作一个接受“函数”参数的 PHP 页面来指示要采取的操作，然后像正常一样回显响应吗？要求构建 SOAP 消息作为 AJAX 调用的一部分似乎很可怕。

*   请求 PHP 页面和 Web 服务响应之间有什么区别（除了 SOAP 协议）？
*   您会在 SOAP 中返回 JSON 字符串吗？
*   这些实现是分开的、排他的还是并行的？
*   您能否，甚至想要使用 Apache 重写来实现与 REST 或 WSDL 几乎相同的效果？将请求定向到为请求的操作附加参数的页面。
*   或者我是不是在想这一切，不应该担心 SOAP 而只是使用标准的 PHP 函数参数并返回文本或 json？

我也向前看了一下，因为我使用了很多遗留代码库，Ruby、Perl、Python 和 Java，并且最终也希望从它们中创建一个服务。或者至少以某种方式合并库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:32:50.420

我可以告诉你什么对我有用。

我必须创建一个小型 Web 服务，外部应用程序需要在其中获取产品列表。我回显了一个 JSON 编码的数组，同时使用 .htpasswd 来保护数据不被窥探:)。使用一个小的 CURL 脚本可以很容易地访问数据，大约需要 2-3 个小时。

如果您需要 Web 服务用户来管理信息，如果您需要 ACL，则必须更多地研究 SOAP 和/或 REST。对于我所需要的 - 这已经足够了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:30:54.000

我将向您推荐这本书，它是高级 PHP 主题的绝佳参考，而且非常流行。它有一章专注于使用 PHP 进行网络连接，还有一个特定的部分是关于创建您自己的基于 PHP 的 Web 服务。它还包含大量供 PHP 开发人员使用的其他最新功夫。

[http://www.amazon.com/PHP-Advanced-Object-Oriented-Programming-QuickPro/dp/0321832183/](https://rads.stackoverflow.com/amzn/click/com/0321832183)

# ant - 比较目录的ant脚本

> ID：14383567
> 
> 赞同：2
> 
> 时间：2013-01-17T16:25:38.200
> 
> 标签：ant, build

我有一个具有以下结构的 javascript 项目：

```
root - 
  /docs
  /dist
  /source
  /resources
  /plugins 
```

代码在`source`目录`ant`中，执行脚本在目录中生成压缩文件`dist`。所有文件都在源代码管理中。

我想在运行 ant 脚本之前运行目录差异，以确保文件列表`source`和`dist`目录相同。如果没有，请停止执行并告诉用户在运行构建之前检查所需的文件。

我是 ant 新手，无法找到任何文档来列出 2 个目录之间文件列表中的差异。感谢任何输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T21:11:25.747

您可以尝试以下方法。打印失败前要签入的文件列表：

```
<project name="demo" default="build">

    <target name="check">
        <apply executable="echo" failonerror="false" resultproperty="files.found">
            <arg line="missing file:"/>
            <srcfile/>
            <fileset id="srcfiles" dir="source" includes="*.txt">
                <present present="srconly" targetdir="dist"/>
            </fileset>
        </apply>

        <fail message="Files need to be checked in" if="files.found"/>
    </target>

    <target name="build" depends="check">
        ..
        ..
        ..
    </target>

</project> 
```

笔记：

*   在 Linux 上测试。可能不会在windows上运行。

# asp.net - 打开流式 Excel 文档时避免受保护的视图

> ID：14383571
> 
> 赞同：1
> 
> 时间：2013-01-17T16:25:58.750
> 
> 标签：asp.net, excel, office-2010

我们有一个 ASP.NET 应用程序，它使用 Response.WriteFile 动态生成 Excel 文档并将它们流式传输到客户端，请参见下面的代码。请注意，一旦将文件写入客户端，该文件就会被删除。因此，服务器上不会留下任何文档。

但是，我客户的用户现在已经全部升级到 Office 2010，现在文档将在“受保护的视图”中打开。为了编辑文档，用户必须首先单击“启用编辑”。这对于用户来说被认为是不可接受的。发生这种情况的原因是流文档被放置在 Internet 临时文件中，这被认为是“潜在的不安全位置”。并且这些位置的文档在受保护的视图中打开。我只是希望有一些方法可以解决这个问题。

从理论上讲，我可以将文档放在客户端可以访问的文件夹中，然后重定向到文档。但是，此解决方案不是一种选择。首先，由于文档将留在服务器上，其他用户可以访问它，这是一个问题，因为文档可能包含机密数据。这不是一个可行的选择还有其他原因。

另一个理论上的解决方法是要求所有用户禁用设置“为位于潜在不安全位置的文件启用受保护的视图”。当然，这也不是一个选择。

所以，简而言之，在使用下面描述的流技术时，是否有办法避免在“受保护的视图”中打开文档？

```
 Response.Buffer = true;
        Response.Clear();
        Response.AddHeader("Pragma", "no-cache");
        Response.Expires = 0;
        Response.AddHeader("Content-Type", contentType);
        Response.AddHeader("Content-Disposition", "attachment; filename=" + proposedFilename);
        Response.WriteFile(dstFullPathName);
        Response.Flush();
        Response.Close();
        File.Delete(dstFullPathName);
        HttpContext.Current.ApplicationInstance.CompleteRequest(); 
```

# jquery - Fancybox 无法使用 jQuery.Animate-Enhanced 正确设置动画

> ID：14383574
> 
> 赞同：0
> 
> 时间：2013-01-17T16:26:05.247
> 
> 标签：jquery, jquery-plugins, fancybox

我正在尝试在我正在开发的这个新网站上使用 Fancybox 2.1.3：http: [//egelect.com/2013/eg-electrique-maitre-electricien.php](http://egelect.com/2013/eg-electrique-maitre-electricien.php)

问题是 Fancybox 动画的原点不是屏幕中心，它应该是。我正在使用 Fancybox 开箱即用的规格。

我知道这是因为 jQuery.Animate-Enhanced.min.js (v0.99)，因为当我注释掉这个 .js 时，Fancybox 的行为是正确的。

在 Chrome、FF 和 IE9 上测试。

任何人作为线索我应该寻找什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T19:42:11.317

最初打开fancybox时，我遇到了与Fancybox 1.3相同的问题。但是，如果您注意到 - 如果您调整浏览器的大小 - 它会自行居中。

我还没有时间找到解决方案，但我确实设法在 $.fancybox.center 函数中找到了它 - 它在哪里调用 animate 函数 - 完成后，t webkit 动画的计算几乎最终否定了顶部和花式框的左侧位置。如果您在动画之后检查元素，您将看到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-24T15:35:56.670

我解决了这个问题，在重新定位函数（到 jquery.fancybox.js 脚本中）添加一个切换开关，以在定位fancybox 时避免 CSSTransitions。

我真的不太喜欢这个解决方案，但它确实有效。

我的代码：

```
 reposition: function(e, onlyAbsolute) {
        var current = F.current,
                wrap = current ? current.wrap : null,
                pos;

        if (wrap) {
            pos = F._getPosition(onlyAbsolute);

            if (e && e.type === 'scroll') {
                delete pos.position;

                wrap.stop(true, true).animate(pos, {avoidCSSTransitions:true}, 200);

            } else {
                $.toggleDisabledByDefault();
                wrap.css(pos);
                setTimeout(function(){
                    $.toggleDisabledByDefault();
                },1);
                current.pos = $.extend({}, current.dim, pos);
            }
        }
    }, 
```

# batch-file - 从批处理文件中逐个启动宏

> ID：14383576
> 
> 赞同：3
> 
> 时间：2013-01-17T16:26:17.147
> 
> 标签：batch-file, imacros

在 Firefox 中，使用 Imacros，我想从一个批处理文件中启动多个宏，但问题是：我希望它们一个一个地运行。
所以首先“宏 1”将运行，然后在它完成后，“宏 2”将运行，依此类推，直到“宏 7”。

我的批次代码：

```
cd C:\Program Files\Mozilla Firefox
start firefox.exe 
ping -n 05 127.0.0.1>nul
start firefox.exe imacros://run/?m=NAMEofMACRO.iim

Imacros VERSION BUILD=7601105 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T16:40:29.537

只需更改您的宏线以使用`start`开关`/wait`

```
start /wait firefox.exe imacros://run/?m=NAMEofMACRO.iim
start /wait firefox.exe imacros://run/?m=NAMEofNextMACRO.iim
start /wait firefox.exe imacros://run/?m=NAMEofNextMACRO.iim 
```

这将启动每个，等待它完成，然后开始下一个。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-12T23:08:53.037

在 imacros 中，另一种方法是在每个宏的 and 处添加。iim 行

```
URL GOTO=imacros://run/?m=NAMEofNextMACRO.iim 
```

所以你只需要运行第一个宏；这个宏最后会调用第二个，第二个最后会调用第三个，依此类推......

# objective-c - 为什么这个 Grand Central Dispatch 代码不起作用？

> ID：14383578
> 
> 赞同：-3
> 
> 时间：2013-01-17T16:26:21.397
> 
> 标签：objective-c, cocoa, concurrency, grand-central-dispatch

这是我的第一个 Grand Central Dispatch 代码，但它不起作用。在 Mac OS X 10.8 和最新的 Xcode 版本上工作。我知道这太基础了。谢谢。

```
#import <Foundation/Foundation.h>
#import <dispatch/dispatch.h>

void printResult(int r);

void printResult(int r)
{
    NSLog(@"%i", r);
}

int main(int argc, const char * argv[])
{
    @autoreleasepool {
        dispatch_queue_t queue = dispatch_queue_create("myQueue", NULL);
        dispatch_async(queue, ^{
            int number = pow(2, 5);
            dispatch_async(dispatch_get_main_queue(), ^{
                printResult(number);
            });
        });
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T16:50:41.613

第一的。您的应用程序实际上在您传入 GCD 的块完成*之前就退出了。*

要解决这个问题，您可以使用他们提供的 GCD**组**和同步工具。

```
@autoreleasepool {
    dispatch_group_t group = dispatch_group_create();
    dispatch_queue_t queue = dispatch_queue_create("myQueue", NULL);
    dispatch_group_async(group, queue, ^{
        int number = pow(2, 5);
        dispatch_group_async(group, dispatch_get_main_queue(), ^{
            printResult(number);
        });
    });

    dispatch_group_wait(group, DISPATCH_TIME_FOREVER);
}
return 0; 
```

第二。在这里你会遇到另一个叫做**死锁**的问题。第二个块被添加到主线程队列中。而主线程实际上是*在等待*这个块完成，所以它不能被执行。将第二个块添加到您之前创建的队列中。

```
dispatch_group_async(group, queue, ^{
    printResult(number);
}); 
```

现在您可以`32`在控制台中看到，这是您所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T17:03:31.613

```
int main(int argc, const char * argv[])
{
    @autoreleasepool {

        dispatch_queue_t queue = dispatch_queue_create("com.myQueue", NULL);
        dispatch_async(queue, ^{
            int number = pow(2, 5);
            dispatch_async(dispatch_get_main_queue(), ^{
                printResult(number);
            });
        });
    }
    [[NSRunLoop currentRunLoop] run]; 
    return 0;
} 
```

我认为你只需要一个运行循环。

# c++ - C++：设计对象以对系统中的独特项目进行建模

> ID：14383579
> 
> 赞同：0
> 
> 时间：2013-01-17T16:26:21.517
> 
> 标签：c++, design-patterns, modeling

我想为一组项目（人）建模，其中每个人都有一组独特的特征......如果我随意传递我的对象，那么复制构造函数等将导致我的对象发散，使得对象 A 将最终会有多个不同的版本浮动，从方法 X 返回的 A`，从方法 Y 返回的 A`，等等。哪种设计模式将帮助我确保如果我将对象传递给各种函数，我将确保始终对每个给定对象的唯一表示进行操作。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:28:19.390

要么使用智能指针，要么只通过引用传递。我不确定您期望需要哪种更高级的设计模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T16:30:46.293

只是不要复制你的对象。将它们全部存储在一个中心位置（使用像 std::vector 或 std::unordered_map 这样的容器），然后将引用传递给您的各种函数。例如：

```
void MutatePerson( Person& object );
void InspectPerson( const Person& object ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T16:29:25.197

正如其他人所说，指针、智能指针或传递引用。

如果您担心忘记，可以将复制构造函数设为私有。这样，按值传递将是编译器错误。

# java - Java，system.out.print 的行尾

> ID：14383580
> 
> 赞同：4
> 
> 时间：2013-01-17T16:26:22.297
> 
> 标签：java, printing, println

我做了一些研究，`System.out.print()`发现`System.out.println()`在`System.out.println()`打印行的末尾添加了行尾。

```
System.out.println("Test"); 
```

仅输出：

```
Test 
```

但不打印行尾。

```
System.out.print("Test"); 
```

仅输出：

```
Test 
```

但不会结束该行并为其他单词或数字等留出一些位置。

一个更具说明性的方法是：

```
Test_____________________________________________ (All "blank" spots) 
```

有没有办法`System.out.print()`直接在单词之后强制结束行`Test`？的使用`%`会去除“空白”点吗？

还是一种编写函数的方法，该函数将在我使用多个`System.out.print()`打印一个句子后结束该行？

举个例子 ：

```
System.out.print("Test);
System.out.print("Test); 
```

将前哨纯粹：

```
Test Test 
```

喜欢`System.out.println("Test Test")`

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-17T16:36:32.417

您可以附加行分隔符，注意它是平台相关的，所以：

*   窗口（“\r\n”）
*   Unix/Linux/OSX ("\n")
*   OSX 之前的 Mac ("\r")

如果您想根据实际系统获取行分隔符，您可以使用：

*   `System.getProperty("line.separator");`对于 Java 7 之前的版本
*   `System.lineSeparator();`对于 Java 7

然后，您只需将分隔符附加到您的字符串中`System.out.print`，例如：

*   `System.out.print("Word\n");`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-27T21:02:19.833

`System.out.println("Test");`将打印行尾。当您在 IDE 中看不到它时，并不意味着它不在这里。尝试：

```
System.out.println("Test1");
System.out.println("Test2");
System.out.println("Test3"); 
```

这将产生：

```
Test1
Test2
Test3 
```

从[文档](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#println%28java.lang.String%29)中`println(String)`：

*打印一个字符串，然后终止该行。这个方法的行为就像它调用 print(String) 然后 println()*

并来自以下[文档](http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html#println%28%29)`println()`：

*通过写入行分隔符字符串来终止当前行。行分隔符字符串由系统属性 line.separator 定义，不一定是单个换行符 ('\n')。*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T16:28:03.487

你可以做到`System.out.print("Test\n")`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-17T16:29:42.513

要获得独立于操作系统的 EOL 角色，您可以尝试

```
System.getProperty("line.separator"); 
```

然后将其附加到您的字符串？

为什么要手动执行此操作，因为有一个功能可以为您执行此操作？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T16:32:47.573

您可以像这样强制手动换行：

`System.out.print("Test\n");`

您也可以在需要打印时将两者混合，然后像这样结束行：

```
System.out.print("This is on ");
System.out.print("the same line.");
System.out.println(" and now we'll end the line");
System.out.println("This is on a different line."); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-17T16:28:40.247

您可以在打印的内容中显式包含换行符：

`System.out.print("Test\n");`

`print`这将在使用该功能时强制换行。

# html - 在 Eclipse 中使用正则表达式将未关闭的 HTML 标记替换为 JSP 中的自闭合 HTML 标记

> ID：14383583
> 
> 赞同：1
> 
> 时间：2013-01-17T16:26:29.353
> 
> 标签：html, regex, eclipse, jsp

最近我开始重构一个 Web 应用程序项目。很多用 JSP 编写的 HTML 标签不遵守 W3C 定义的标准。我想关闭所有未关闭的标签。

```
<img style="border:0px;"
     src="target/img/expande.gif"
     alt="Expand target information" > // --> this tag is not closed! 
```

所以，有了这个 expr，我可以搜索所有未关闭的标签：
`(?s)<img("[^"]*"|'[^']*'|[^'">/])*>`
我应该怎么做才能用 替换这段代码`/>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:35:49.087

我假设您在文件匹配上使用基于 Eclipse 内置正则表达式的搜索和替换`*.jsp`。

您需要用一组括号对感兴趣的部分进行分组。

```
(?s)(<img("[^"]*"|'[^']*'|[^'">/])*)(>) 
```

作为替代，每个组可以通过组的`$n`从`n`1 开始的索引来标识。因此，`$1`将返回整个`<img ...`元素而不返回`>`（并`$2`返回`>`自身；请注意，`$0`返回整个匹配项）。

所以，一旦像这样对正则表达式进行分组，这个替换应该做：

```
$1/> 
```

注意：仔细预览替换。正则表达式和 HTML 不一定能很好地结合在一起。

# java - github java api 授权我的应用程序的最佳方式

> ID：14383586
> 
> 赞同：0
> 
> 时间：2013-01-17T16:26:31.623
> 
> 标签：java, api, github, authorization, ratelimit

我正在使用 github java api，我想获取有关存储库及其用户的信息。我的问题是如何授权我的请求才能完全访问 api（5000 个请求/小时）。此外，如果有办法随时查看我的应用程序还有多少请求，以免超出 api 速率限制，那将是非常有益的。下面的代码是我现在所做的，但是使用此代码我超出了速率限制。

```
 this.username = ConfigurationParser.parse("username");
    this.password  = ConfigurationParser.parse("password");
    OAuthService oauthService = new OAuthService();
    oauthService.getClient().setCredentials(this.username, this.password);
    Authorization auth = new Authorization();
    try {
        auth = oauthService.createAuthorization(auth);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println(auth.getApp().getName());

    service.getClient().setOAuth2Token(auth.getToken()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-19T03:30:19.553

您可以使用[jcabi-github](http://github.jcabi.com/index.html)（我是它的开发人员之一），它会为您完成所有身份验证工作：

```
Github github = new RtGithub("user", "password"); 
```

现在您有了一个可以帮助您操作 Github 实体的客户端，例如，您可以列出给定存储库中的所有问题：

```
Coordinates coords = new Coordinates.Simple("jcabi/jcabi-github");
Repo repo = github.repos().get(coords);
for (Issue issue : repo.issues().iterate(Collections.<String, String>emptyMap())) {
  System.out.println("Issue found: #" + issue.number());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:11:17.827

[OAuthService](https://github.com/eclipse/egit-github/blob/master/org.eclipse.egit.github.core/src/org/eclipse/egit/github/core/service/OAuthService.java)类用于更改用户的OAuth 授权，而不是用于创建与 GitHub 的授权连接！如果您只想获取有关存储库的信息，则不需要它。

您应该首先决定是要使用基本身份验证（带有用户名和密码的身份验证）还是 OAuth 身份验证（使用令牌），然后根据您要检索的信息从[可用服务类](https://github.com/eclipse/egit-github/tree/master/org.eclipse.egit.github.core/src/org/eclipse/egit/github/core/service)之一实例化服务对象.

对于存储库信息，这将是：

```
RepositoryService service = new RepositoryService(); 
```

然后添加您的授权信息：

```
service.getClient().setCredentials("user", "passw0rd"); 
```

**或者**

```
service.getClient().setOAuth2Token("your_t0ken"); 
```

现在您可以查询存储库列表或执行其他任何操作：

```
List<Repository> repositories = service.getRepositories(); 
```

要获取剩余的请求，您可以调用：

```
service.getClient().getRemainingRequests(); 
```

这将返回您收到的最新[响应中包含的数字。](http://developer.github.com/v3/#rate-limiting)

# php - 弹出一个带有 php var 的 javascript 对话框

> ID：14383588
> 
> 赞同：0
> 
> 时间：2013-01-17T16:26:36.287
> 
> 标签：php, javascript, jquery, while-loop

当我在 PHP 中使用 While 时，如何弹出正确的 javascript 框。这是代码：

```
while($result= mysql_fetch_array($data)){
    <tr class="<?php echo $style;?>">
        <td><?php echo $result['commissie'];?></td>
        <td class="small"><?php echo $result['volgorde'];?></td>
        <td class="small">
            <div id="dialog-overlay"></div>
                <div id="dialog-box">
                    <div class="dialog-content">
                        <h1>Verwijder van commissie: "<?php echo $result['commissie'];?>"</h1>                                              
                        <div id="dialog-message">
                            <p>Weet je zeker dat je <?php echo $result['commissie'];?>. <?php echo $result_achternaam;?> wilt verwijderen uit de commissie? Dit betekend dat het contactpersoon automatisch zal worden verwijdert uit het systeem.</p>
                        </div>
                        <a href="../checks/delete_commissie.php?id=<?php echo $result['id'];?>" class="button">Ja</a>
                        <a href="#" class="button_no">Nee</a>
                        <div class="clear"></div>
                    </div>
                </div>
             </div> 
             <a href="javascript:popup('<?php echo $result['id'];?>')"><img src="../../images/delete.png"/></a>
         </td>
    </tr>
<?php }//CLOSE THE WHILE 
```

这是javascript：

```
$(document).ready(function () {

    $('a.button_no').click(function () {     
    $('#dialog-overlay, #dialog-box').hide();       
    return false;
    });
    $(window).resize(function () {
    if (!$('#dialog-box').is(':hidden')) popup();       
    }); 
});

function popup() {

    var maskHeight = $(document).height();  
    var maskWidth = $(window).width();

    var dialogTop =  (maskHeight/3) - ($('#dialog-box').height());  
    var dialogLeft = (maskWidth/2) - ($('#dialog-box').width()/2); 

    $('#dialog-overlay').css({height:maskHeight, width:maskWidth}).show();
    $('#dialog-box').css({top:dialogTop, left:dialogLeft}).show();           
} 
```

问题是当我显示一个对话框时，系统总是会弹出第一个对话框，因为在 WHILE 的表中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:33:58.993

查看您的代码所做的事情，您似乎可以通过使用事件处理程序和 contextual`this`关键字调用函数来更轻松地实现它。显然，正如@PassKit 提到的，您需要使用类而不是 ID

```
$("a").click(function(e){
e.preventDefault();
dialog = $(this).prev(); // will get the .dialog_overlay div
// now you can manipulate the dialog using `dialog` as a reference point. 
//e.g dialog.find(".dialog_box").show() etc...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:30:06.900

您的问题似乎是由于您的 while 循环中生成了重复的选择器。ID 属性必须是唯一的。

```
<div id="dialog-overlay"></div>
<div id="dialog-box"> 
```

jQuery`$('#dialog-box')`将始终选择#dialog-box 的第一个实例。

您可以在 while 循环中增加一个变量，然后使用它来触发您的框。

```
$i = 1;

while($result= mysql_fetch_array($data)){ ?>
    <tr class="<?php echo $style;?>">
        <td><?php echo $result['commissie'];?></td>
        <td class="small"><?php echo $result['volgorde'];?></td>
        <td class="small">
            <div id="dialog-overlay<?php echo $i; ?>"></div>
                <div id="dialog-box<?php echo $i; ?>">
                    <div class="dialog-content">
                        <h1>Verwijder van commissie: "<?php echo $result['commissie'];?>"</h1>                                              
                        <div id="dialog-message<?php echo $i; ?>">
                            <p>Weet je zeker dat je <?php echo $result['commissie'];?>. <?php echo $result_achternaam;?> wilt verwijderen uit de commissie? Dit betekend dat het contactpersoon automatisch zal worden verwijdert uit het systeem.</p>
                        </div>
                        <a href="../checks/delete_commissie.php?id=<?php echo $result['id'];?>" class="button">Ja</a>
                        <a href="#" class="button_no" data-buttonID="<?php echo $i; ?>">Nee</a>
                        <div class="clear"></div>
                    </div>
                </div>
             </div> 
             <a href="javascript:popup('<?php echo $result['id'];?>')"><img src="../../images/delete.png"/></a>
         </td>
    </tr>
<?php $i++; }//Increment $i andCLOSE THE WHILE 
```

Javascript

```
var dialogBox = 1;

$(document).ready(function () {

    $('a.button_no').click(function (e) {
        e.preventDefault();
        dialogBox = $(this).data('buttonID');   
        $('#dialog-overlay' + dialogBox + ', #dialog-box' + dialogBox).hide();       
    });

    $(window).resize(function () {
       if (!$('#dialog-box' + dialogBox).is(':hidden')) popup();       
    }); 
});

function popup() {

    var maskHeight = $(document).height();  
    var maskWidth = $(window).width();

    var dialogTop =  (maskHeight/3) - ($('#dialog-box' + dialogBox).height());  
    var dialogLeft = (maskWidth/2) - ($('#dialog-box' + dialogBox).width()/2); 

    $('#dialog-overlay' + dialogBox).css({height:maskHeight, width:maskWidth}).show();
    $('#dialog-box' + dialogBox).css({top:dialogTop, left:dialogLeft}).show();           
} 
```

# java - PlayFramework：渲染首页示例

> ID：14383593
> 
> 赞同：0
> 
> 时间：2013-01-17T16:26:41.780
> 
> 标签：java, scala, playframework

我是 play 框架的新手，并且遵循 play 2.0.4 的教程。尝试呈现页面时出现错误。在教程中你可以看到他们将任务列表和任务表单作为参数传递给`render`方法，但这个方法只接受字符串参数。如何传递这些参数？

```
public static Result tasks() {
    return ok(
        views.html.index.render(Task.all(), taskForm) 
    ); //render only accepts String parameters at least in play 2.0.4
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:44:03.147

我猜你在说这个：[教程](http://www.playframework.org/documentation/2.0.4/JavaTodoList)？

在本教程的开头文件 index.scala.html 将 String 作为参数。整个 index.scala.html 文件如下所示：

```
@(message: String)

@main("Welcome to Play 2.0") {

@play20.welcome(message) 
```

}

这部分：`@(message: String)`是参数的定义，您可以将其传递给控制器​​中的方法 index.render(someString)。

在本教程中 index.scala.html 的内容进一步更改为：

```
@(tasks: List[Task], taskForm: Form[Task])

@import helper._

@main("Todo list") {

<h1>@tasks.size() task(s)</h1>

<ul>
    @for(task <- tasks) { 
```

……………………

方法 index.render 的参数定义更改为：`@(tasks: List[Task], taskForm: Form[Task])`之后您可以在控制器代码中调用：

```
return ok(
views.html.index.render(Task.all(), taskForm)
); 
```

我想，你忘了更新 index.scala.html 文件。

# hibernate - 无法将持久性单元部署到 JBoss 7.1.1.Final 但没有告诉我它在哪个类上失败

> ID：14383594
> 
> 赞同：0
> 
> 时间：2013-01-17T16:26:51.407
> 
> 标签：hibernate, jboss7.x

我对 JBoss 7.1.1.Final 有一个非常奇怪的问题。

尝试使用我从 JBoss 5.1 迁移的持久性单元部署一个 jar（它可以正常工作）

我进行了必要的更改（我可以找到）并且在部署时，我收到一条无用的错误消息。

```
16:19:21,532 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-8) JBAS015876: Starting deployment of "DomainModel-0.1.0-SNAPSHOT.jar"
16:19:21,556 INFO  [org.jboss.as.jpa] (MSC service thread 1-1) JBAS011401: Read persistence.xml for admin
16:19:21,561 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-4) JBAS018567: Deployment "deployment.DomainModel-0.1.0-SNAPSHOT.jar" is using a private module ("org.apache.commons.collections:main") which may be changed or removed in future versions without notice.
16:19:21,562 WARN  [org.jboss.as.dependency.private] (MSC service thread 1-4) JBAS018567: Deployment "deployment.DomainModel-0.1.0-SNAPSHOT.jar" is using a private module ("org.apache.commons.lang:main") which may be changed or removed in future versions without notice.
16:19:21,566 INFO  [org.jboss.as.jpa] (MSC service thread 1-1) JBAS011402: Starting Persistence Unit Service 'DomainModel-0.1.0-SNAPSHOT.jar#admin'
16:19:21,566 INFO  [org.hibernate.ejb.Ejb3Configuration] (MSC service thread 1-1) HHH000204: Processing PersistenceUnitInfo [
    name: admin
    ...]
16:19:21,730 ERROR [org.jboss.msc.service.fail] (MSC service thread 1-1) MSC00001: Failed to start service jboss.persistenceunit."DomainModel-0.1.0-SNAPSHOT.jar#admin": org.jboss.msc.service.StartException in service jboss.persistenceunit."DomainModel-0.1.0-SNAPSHOT.jar#admin": Failed to start service
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1767) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110) [rt.jar:1.7.0_10]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603) [rt.jar:1.7.0_10]
    at java.lang.Thread.run(Thread.java:722) [rt.jar:1.7.0_10]
Caused by: javax.persistence.PersistenceException: [PersistenceUnit: admin] Unable to build EntityManagerFactory
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:914)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:889)
    at org.hibernate.ejb.HibernatePersistence.createContainerEntityManagerFactory(HibernatePersistence.java:73)
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.createContainerEntityManagerFactory(PersistenceUnitServiceImpl.java:162)
    at org.jboss.as.jpa.service.PersistenceUnitServiceImpl.start(PersistenceUnitServiceImpl.java:85)
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.startService(ServiceControllerImpl.java:1811) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    at org.jboss.msc.service.ServiceControllerImpl$StartTask.run(ServiceControllerImpl.java:1746) [jboss-msc-1.0.2.GA.jar:1.0.2.GA]
    ... 3 more
Caused by: org.hibernate.AnnotationException: Associated class not found: java.lang.String
    at org.hibernate.cfg.annotations.MapBinder.bindKeyFromAssociationTable(MapBinder.java:136)
    at org.hibernate.cfg.annotations.MapBinder.access$000(MapBinder.java:75)
    at org.hibernate.cfg.annotations.MapBinder$1.secondPass(MapBinder.java:114)
    at org.hibernate.cfg.CollectionSecondPass.doSecondPass(CollectionSecondPass.java:66)
    at org.hibernate.cfg.Configuration.originalSecondPassCompile(Configuration.java:1586)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1359)
    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:1724)
    at org.hibernate.ejb.EntityManagerFactoryImpl.<init>(EntityManagerFactoryImpl.java:84)
    at org.hibernate.ejb.Ejb3Configuration.buildEntityManagerFactory(Ejb3Configuration.java:904)
    ... 9 more

16:19:21,941 INFO  [org.jboss.as.server] (DeploymentScanner-threads - 1) JBAS015870: Deploy of deployment "DomainModel-0.1.0-SNAPSHOT.jar" was rolled back with failure message {"JBAS014671: Failed services" => {"jboss.persistenceunit.\"DomainModel-0.1.0-SNAPSHOT.jar#admin\"" => "org.jboss.msc.service.StartException in service jboss.persistenceunit.\"DomainModel-0.1.0-SNAPSHOT.jar#admin\": Failed to start service"}}
16:19:21,948 INFO  [org.jboss.as.server.deployment] (MSC service thread 1-3) JBAS015877: Stopped deployment DomainModel-0.1.0-SNAPSHOT.jar in 6ms
16:19:21,949 INFO  [org.jboss.as.controller] (DeploymentScanner-threads - 1) JBAS014774: Service status report
JBAS014777:   Services which failed to start:      service jboss.persistenceunit."DomainModel-0.1.0-SNAPSHOT.jar#admin": org.jboss.msc.service.StartException in service jboss.persistenceunit."DomainModel-0.1.0-SNAPSHOT.jar#admin": Failed to start service

16:19:21,950 ERROR [org.jboss.as.server.deployment.scanner] (DeploymentScanner-threads - 2) {"JBAS014653: Composite operation failed and was rolled back. Steps that failed:" => {"Operation step-2" => {"JBAS014671: Failed services" => {"jboss.persistenceunit.\"DomainModel-0.1.0-SNAPSHOT.jar#admin\"" => "org.jboss.msc.service.StartException in service jboss.persistenceunit.\"DomainModel-0.1.0-SNAPSHOT.jar#admin\": Failed to start service"}}}} 
```

我遇到的问题不是它本身的错误——我可能可以弄清楚。困扰我的是它没有告诉我它*在哪里*有这个问题 - 即哪个实体有这个问题。

在谷歌搜索中，我能够找到与 Maps 的 ElementCollections 相关的问题，我已经更新了这些问题，它更改为找不到 Longs - 更多更新，它又回到了 String。

有谁知道我怎样才能告诉我它在哪个班级遇到问题？

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T09:23:08.017

虽然我不知道如何让 JBoss / Hibernate 告诉我是哪个实体导致了问题，但我确实发现这个特定错误是由于从 @CollectionOfElements 错误迁移到 @ElementCollection 引起的

我能够使用 arquillian 并对每个使用它的类进行微部署（幸运的是，只有少数）并解决了这个问题。

就我而言，我将@MapKey 留在了需要用@MapKeyColumn 替换的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T03:30:08.873

尝试阅读迁移用户指南

[如何将我的应用程序从 JBoss AS 5 或 AS 6 迁移到 JBoss AS 7？](https://docs.jboss.org/author/display/AS7/Developer+Guide#DeveloperGuide-HowdoImigratemyapplicationfromJBossAS5orAS6toJBossAS7?)

# ios - 在 UIWebView 中播放 facebook 视频

> ID：14383600
> 
> 赞同：4
> 
> 时间：2013-01-17T16:27:07.717
> 
> 标签：ios, facebook, uiwebview

有谁知道如何在 a 中播放 facebook 视频`UIWebView`？

我的应用程序将视频上​​传到 facebook 并检索视频的 url。我想将此网址嵌入`UIWebView`到播放中。我已经为 youtube 而不是 Facebook 解决了这个问题。寻求帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-05-06T02:29:00.787

俄耳甫斯！

我迟到了几年，哈哈，但无论如何我都会在这里发布答案——从 2018 年开始在 Swift 中发布；）——以防万一有人需要它。

您可以使用以下 HTML 字符串：

```
let embedCode = "<iframe src=\"https://www.facebook.com/plugins/video.php?href=\([INSERT VIDEO URL])&show_text=0&width=\(Int([INSERT WIDTH]))\" width=\"\(Int([INSERT WIDTH]))\" height=\"\(Int([INSERT WIDTH] * 56.25))\" style=\"border:none;overflow:hidden\" scrolling=\”no\" frameborder=\"0\" allowTransparency=\”true\" allowFullScreen=\"true\"></iframe>" 
```

您将 [INSERT VIDEO URL] 替换为视频 URL，将 [INSERT WIDTH] 替换为所需的 Web 视图宽度。

然后将 HTML 加载到`UIWebView`类似的文件中：

```
webView.loadHTMLString(embedCode, baseURL: nil) 
```

# r - R gVisScatterChart viewWindowMode 显式

> ID：14383602
> 
> 赞同：1
> 
> 时间：2013-01-17T16:27:10.433
> 
> 标签：r, google-visualization

我尝试在 R 上使用 gVis 创建散点图。我想手动定义我的 vAxis，但无法弄清楚我做错了什么。就好像 WindowMode 仍然“漂亮”一样

```
 Scatter <- gvisScatterChart(data, 
                                options=list(legend="none",
                                             lineWidth=1, pointSize=2, 
                                             hAxis.gridlines.count = 3,
                                             vAxis.viewWindowMode='explicit',
                                             vAxis.viewWindow.max=24,
                                             vAxis.viewWindow.min=0,
                                             width=150, height=600)) 
```

谢谢，尼科

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:02:20.640

这应该有效：

```
Scatter <- gvisScatterChart(dat, 
                 options=list(legend="none",
                              lineWidth=1, pointSize=2, 
                              hAxis.gridlines.count = 3,
                              pointSize=0, 
                              lineWidth=2,
                              vAxis = list( list(viewWindowMode = "explicit",
                                            viewWindow = list(max = 24, min = 0))),
                              width=150, height=600)) 
```

# ios - 围绕屏幕制作 MapView 动画

> ID：14383604
> 
> 赞同：0
> 
> 时间：2013-01-17T16:27:18.687
> 
> 标签：ios, mkmapview

我有这个动画块：

```
[UIView animateWithDuration:10 animations:^{
            CGPoint centerLeft;
            centerLeft.x = self.leftMapPane.center.x - 100;
            centerLeft.y = self.leftMapPane.center.y;
            CGRect leftMove = CGRectMake(self.leftMapPane.frame.origin.x - 100, self.leftMapPane.frame.origin.x, self.leftMapPane.frame.size.width,     self.leftMapPane.frame.size.height);
            [self.leftMapPane setFrame:leftMove];
            [self.leftMapPane setCenter:centerLeft];
        }]; 
```

但由于某种原因，尽管它进入了动画块内，但它并没有移动我在屏幕上的 mapViews。应该注意的是，我说的不是移动地图，而是包含地图的视图，也就是地图视图。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:55:08.907

动画在 viewDidLoad 中不起作用，因为此时视图已加载到内存中，但不一定添加到视图层次结构中。因此，当您尝试为视图设置动画时，它将不起作用。

相反，将您的动画调用放在 viewDidAppear 中，它应该可以工作。这样您就可以确定您正在制作动画的视图在视图层次结构中。我使用您的动画代码在示例项目中尝试了此操作，并且效果很好。

# java - GenericDAO + Spring + JPA2 没有唯一bean

> ID：14383606
> 
> 赞同：2
> 
> 时间：2013-01-17T16:27:22.433
> 
> 标签：java, spring, jpa, annotations

在这里查看了几个类似的问题并将逻辑应用于我的情况后，我仍然对我的 Spring/JPA 应用程序中的依赖注入失败感到困惑。申请的前提是：

*   使用基于注释的 JPA2 减少 xml 配置；
*   [根据此处](http://www.baeldung.com/2011/12/08/simplifying-the-data-access-layer-with-spring-and-java-generics/)的参考教程，使用 @Autowire 为每个 DAO 类型从单个接口/实现自动生成 DAO ；

这是致命错误：

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'exampleInstanceBO': Injection of autowired dependencies failed; nested exception is org.springframework.beans.factory.BeanCreationException: Could not autowire field: com.***.dao.IGenericDAO com.***.bo.ExampleInstanceBO.dao; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.***.dao.IGenericDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true), @org.springframework.beans.factory.annotation.Qualifier(value=IGenericDAO)} 
```

...这是由以下原因引起的：

```
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type [com.***.dao.IGenericDAO] found for dependency: expected at least 1 bean which qualifies as autowire candidate for this dependency. 
```

它在以下服务类中调用：

**实例实例BO：**

```
    导入 org.springframework.beans.factory.annotation.Autowired；
    导入 org.springframework.beans.factory.annotation.Qualifier；
    导入 org.springframework.stereotype.Service；

    进口com.***.dao.*；
    导入 com.***.entity.*；

    @服务
    公共类 ExampleInstanceBO {
        @自动连线
        @Qualifier(value="IGenericDAO")
        IGenericDAO 道；

        公共无效 setDao（最终 IGenericDAO daoToSet）{
            dao = daoToSet;
            dao.setClazz( ExampleInstance.class );
        }

            //
    }

```

IGenericDAO 如下：

**IGenericDAO：**

```
    导入 org.springframework.stereotype.Component；
    导入 org.springframework.stereotype.Service；

    @Component("IGenericDAO")
    公共接口 IGenericDAO {
        public void setClazz(final Class clazzToSet);
        public T findById(final Long id);
        公共列表 findAll();
        公共无效保存（最终T实体）；
        公共无效更新（最终 T 实体）；
        公共无效删除（最终T实体）；
        public void deleteById( final Long entityId );
    }

```

其实现如下：

**通用DAO**

```
    导入 java.io.Serializable；  

    导入 org.springframework.context.annotation.Scope；
    导入 org.springframework.stereotype.Repository；

    @Repository
    @Scope("原型")
    公共类 GenericDAO 扩展 AbstractDAO 实现 IGenericDAO{
       //空，因为抽象类AbstractDAO中的大部分功能
    }

```

**抽象道**

```
    导入 java.io.Serializable；
    导入 java.util.List；    

    导入 javax.persistence.EntityManager；
    导入 javax.persistence.PersistenceContext；
    导入 org.springframework.stereotype.Service；
    /**
     * @作者  -  - 
     *
     */
    @服务
    公共抽象类 AbstractDAO {
           私人类 clazz；
           @PersistenceContext
           实体管理器实体管理器；
           公共无效 setClazz（最终类 clazzToSet）{
              this.clazz = clazzToSet;
           }
           public T findById(final Long id){
              返回 entityManager.find(clazz, id);
           }
           公共列表 findAll(){
              return entityManager.createQuery("来自" + clazz.getName())
               .getResultList();
           }

    // 其他保存/删除/更新等方法在这里
    }

```

以上是基于[这里](http://www.baeldung.com/2011/12/08/simplifying-the-data-access-layer-with-spring-and-java-generics/)的讨论，在配置和依赖项方面有很多是理所当然的。这是我的配置和 pom 文件，它们很可能导致了混乱，因为它们在我试图解决这个问题时已经进化了。

**beanDefinitions.xml**

```
<jpa:repositories base-package="com.***" />
<context:component-scan base-package="com.***" />

<bean class="org.springframework.orm.jpa.JpaTransactionManager"
  id="transactionManager">
  <property name="entityManagerFactory" 
      ref="entityManagerFactory" />
  <property name="jpaDialect">
    <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
  </property>
</bean>

<bean id="entityManagerFactory"
  class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
  <property name="dataSource" ref="dataSource" />
  <property name="packagesToScan" value="***" />
  <property name="jpaVendorAdapter">
    <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
      <property name="generateDdl" value="true" />
      <property name="database" value="HSQL" />
    </bean>
  </property>
</bean>

<bean 
class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location">
        <value>database.properties</value>
    </property>
</bean>

<bean id="dataSource" 
         class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
</bean>
</beans> 
```

最后是**pom.xml**：

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>maven_projects</groupId>
    <artifactId>***</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>***</name>
    <description>spring 3 plus maven</description>
    <packaging>war</packaging>
    <properties>
        <org.springframework.version>3.1.3.RELEASE</org.springframework.version>
        <hibernate.version>4.1.0.Final</hibernate.version>
        <mysql.version>5.1.13</mysql.version>
        <junit.version>4.7</junit.version>
        <slf4j.version>1.7.0</slf4j.version>
    </properties>
    <dependencies>
        <!-- Spring -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-web</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>jstl</groupId>
            <artifactId>jstl</artifactId>
            <version>1.2</version>
        </dependency>
        <!-- logging -->
        <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>jcl-over-slf4j</artifactId>
          <version>${slf4j.version}</version>
       </dependency>
       <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>slf4j-api</artifactId>
          <version>${slf4j.version}</version>
       </dependency>
       <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>slf4j-log4j12</artifactId>
          <version>${slf4j.version}</version>
       </dependency>
       <dependency>
          <groupId>log4j</groupId>
          <artifactId>log4j</artifactId>
          <version>1.2.14</version>
       </dependency>
        <!-- ORM/DB -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>${mysql.version}</version>
            <!-- perhaps using scope = provided, as this will often
             be present on the app server -->
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <!-- or hibernate-entitymanager if you use jpa -->
            <version>${hibernate.version}</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>
        <dependency>
                <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>${hibernate.version}</version>
        </dependency>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>${junit.version}</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-jpa</artifactId>
            <version>1.2.0.RELEASE</version>
        </dependency>
        <!-- 
            default Jave EE jars don't include code necessary for
         bytecode enhancement so we use these instead --> 
        <dependency>
            <groupId>org.jboss.spec</groupId>
            <artifactId>jboss-javaee-6.0</artifactId>
            <version>1.0.0.Final</version>
            <type>pom</type>
            <scope>provided</scope>
        </dependency>

        <!-- Jersey (RESTful web services -->
        <dependency>
            <groupId>com.sun.jersey</groupId>
            <artifactId>jersey-server</artifactId>
            <version>1.8</version>
        </dependency>
        <!-- Jersey + Spring -->
        <dependency>
            <groupId>com.sun.jersey.contribs</groupId>
            <artifactId>jersey-spring</artifactId>
            <version>1.8</version>
            <exclusions>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-core</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-web</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-beans</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-context</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-aop</artifactId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>cglib</groupId>
            <artifactId>cglib</artifactId>
            <version>2.2</version>
        </dependency>
    </dependencies>

    <!-- 
        Required for J2EE dependencies, see here: 
        http://www.ninthavenue.com.au/java-lang-classformaterror-exception-with-eclipselink-static-weaving-solved   
     -->
    <repositories>
        <repository>
        <id>repository.jboss.org-public</id>
        <name>JBoss repository</name>
        <url>https://repository.jboss.org/nexus/content/groups/public</url>
        </repository>
    </repositories>

</project> 
```

** 更新 **

谢谢，试过了，GenericDAO 现在看起来像这样：

```
    // @Component("GenericDAO")
    @Repository("GenericDAO")
    @Scope("原型")
    公共类 GenericDAO 扩展 AbstractDAO 实现 IGenericDAO{
     //
    }

```

使用 Component 或 Repository 注释，仍然是相同的结果。查看日志输出，生成的bean如下：

... **GenericDAO** ... 但它正在寻找 IGenericDAO - 当我更改为 @Repository("IGenericDAO") 时，它会引发空指针异常， - 困惑！

**更新 #2** - 数据源配置：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans
   xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:jpa="http://www.springframework.org/schema/data/jpa"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="
http://www.springframework.org/schema/beans
http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
http://www.springframework.org/schema/context
http://www.springframework.org/schema/context/spring-context-2.5.xsd
http://www.springframework.org/schema/data/jpa
http://www.springframework.org/schema/data/jpa/spring-jpa.xsd">

<!--<jpa:repositories base-package="***" />-->
<context:component-scan base-package="***" />

<bean class="org.springframework.orm.jpa.JpaTransactionManager"
  id="transactionManager">
  <property name="entityManagerFactory" 
      ref="entityManagerFactory" />
  <property name="jpaDialect">
    <bean class="org.springframework.orm.jpa.vendor.HibernateJpaDialect" />
  </property>
</bean>

<bean id="entityManagerFactory"
  class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
  <property name="dataSource" ref="dataSource" />
  <property name="packagesToScan" value="***" />
  <property name="jpaVendorAdapter">
    <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
      <property name="generateDdl" value="true" />
      <property name="database" value="HSQL" />
    </bean>
  </property>
</bean>

<bean 
class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location">
        <value>database.properties</value>
    </property>
</bean>

<bean id="dataSource" 
         class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
</bean>
</beans> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:08:42.387

将@Component 注释放在您的 GenericDAO 上，而不是接口上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-21T23:27:09.563

我看到一些看起来不正确的事情。

*   请去掉接口上的@Component("IGenericDAO")注解。这没有意义。您在实现而不是接口上设置 ID。
*   在 ExampleInstanceBO 类中，请删除您在 IGenericDao 上添加的限定符。只要您在类路径上只有一个该类型的 bean，您现在就不需要限定符。
*   我对“base-package="***"" 组件扫描配置非常怀疑。请通过调试您的应用程序确保它正常工作。启动一个远程调试会话并查看您的应用程序上下文 bean 映射以查看 bean 是否实际被拾取。
*   您还可以尝试在组件扫描中显式添加完整的包名称，以确保它被拾取。

祝你好运 ;）

# google-sheets - 绕过 Google 电子表格中的循环引用

> ID：14383613
> 
> 赞同：12
> 
> 时间：2013-01-17T16:27:40.493
> 
> 标签：google-sheets, circular-dependency

我有一个包含两列的谷歌文档电子表格：A 和 B。B 的值只是来自 A 的不同格式的值，我在 B 列中有一个公式可以进行转换。有时我没有 A 格式的值，但我有 B 格式的值。我想通过在 A 列中添加进行反向转换的公式来自动获取 A 列中 A 格式的值。当然，这会生成循环引用。有没有办法绕过它？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-01-23T13:12:00.273

在谷歌电子表格的顶部菜单上执行以下操作：

文件 > 电子表格设置

选择“计算”选项卡，然后将“迭代计算”更改为“开”。

享受：D。

PD：我知道这篇文章太旧了，但就在几天前，我需要解决这个问题，但我找不到任何解决方案。

[![在此处输入图像描述](../Images/371dc0b23a1213a110bf29d6e9cfbcd2.png)](https://i.stack.imgur.com/fozjd.png)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2016-12-09T02:24:09.653

从本周开始，谷歌表格已经宣布支持这一功能。您现在可以在电子表格设置中限制循环引用的迭代次数 :-)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-01-26T13:41:46.600

在 excel 中，您可以将其设置为允许循环依赖并限制它们运行的​​迭代次数（通常 1 是所需的结果）。

我看过，但床单中没有类似的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-09T18:04:51.497

我知道这篇文章已经很老了，但是我是在查看某个事物的应用程序时看到的。

在工作表中，您可以使用`importrange`来引用同一个工作表并调用所需的范围。例如，您可以将一个公式放入`B1`that is`=A1+1`并`A1`使用该公式`=importrange(<THIS SHEET ID>,"B1")+1`。

您可能需要先将公式放入`A2`，然后将其移至`A1`，但它应该可以工作。

做这样的事情基本上会产生第二个计数器，我猜这很整洁吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T16:40:55.810

使用实现以下算法的脚本解决

```
for each row{
   if (A != "" && B == "")
    B = conversionFromA(A);
   if (A == "" && B != "")
    A = conversionFrom(B);} 
```

当然它有它的缺点，（每次输入新数据时都必须调用脚本），但这是我找到的最佳解决方案

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-11-09T10:26:14.923

我会再添加两列：数据源和数据格式。然后，A 列中的公式将按原样（如果格式匹配）或转换（如果格式不匹配）从数据源获取值。B 列相同。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-06-03T06:24:34.513

不要引用您的共同依赖的公式单元格，而是使用其他单元格来保存您的实际（非公式）数据并使用公式单元格来显示您的结果。

# c# - 我们如何使用内部关键字声明接口

> ID：14383614
> 
> 赞同：2
> 
> 时间：2013-01-17T16:27:51.280
> 
> 标签：c#, .net, oop, interface

接口是客户端和服务器之间的契约，服务器必须定义或实现接口中声明的方法。这是 internal 的定义，我认为这意味着 Interface 应该只公开，但是当我在 interface 之前使用 internal 关键字创建接口时，它工作正常并且没有给我任何编译时错误，但我不明白为什么。

编辑：即使我们可以将接口声明为内部接口，实现接口成员的类方法也必须是公共的。为什么这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T16:30:21.693

internal 关键字表示该类或接口只能由同一程序集中的其他类使用。

[http://msdn.microsoft.com/en-us/library/7c5ka91b(VS.80).aspx](http://msdn.microsoft.com/en-us/library/7c5ka91b(VS.80).aspx)

接口不一定是两个客户端或服务器之间的契约，而是一个对象将实现某些方法或属性的承诺。

[http://msdn.microsoft.com/en-us/library/87d83y5b(v=VS.71).aspx](http://msdn.microsoft.com/en-us/library/87d83y5b(v=VS.71).aspx)

# css - 在 Windows 中使用 @font-face 额外填充？

> ID：14383615
> 
> 赞同：0
> 
> 时间：2013-01-17T16:27:52.593
> 
> 标签：css, fonts, cross-browser, operating-system, font-face

[我在 Windows 渲染 Font Squirrel @fontface 字体（ Lekton Regular](http://www.fontsquirrel.com/fonts/lekton)）时遇到了问题。

在 Chrome 和 Firefox 中，它完美呈现：

![在此处输入图像描述](../Images/5af0f86775ee8040c5371e23bfa97d6c.png)

但在 Windows 中的相同浏览器（XP 和 8 测试）中，它添加了顶部和底部填充：

![在此处输入图像描述](../Images/b3533c31b34792aae78c8450545e9696.png)

这两个元素的计算样式在两个浏览器和两个操作系统上都是相同的。

这是一个已知问题，是否有解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T10:27:58.143

问题出在字体文件上。当我加载替代（来自谷歌字体）时，问题消失了

# php - 使用 PHPDocumentor 创建 Eclipse 库

> ID：14383618
> 
> 赞同：0
> 
> 时间：2013-01-17T16:28:08.027
> 
> 标签：php, eclipse, phpdoc

我有一个不寻常的要求，

我正在使用 PHP 5.3，我的 IDE 是 Eclipse，我需要帮助设置一个文件，就像 php 函数默认提供的文件一样，所以我可以用它来完成代码，我可以在悬停时获得文档。

所以基本上，我有一个库，我想提取所有内容（函数、类等）和 PHPDoc 块的声明，并使用它们创建一个新文件，该文件将作为库添加到 Eclipse 上的 include小路。有人知道自动的方法吗？

编辑：更好地解释我想要做什么。我想运行一个几乎可以完成 PHPDoc 所做的脚本，但不是在加载文件后创建一组 html 文件，而是创建一个只有声明和注释的 php 文件的副本。因此可以将该文件提供给程序员，而不是提供带有源代码的完整库。

我虽然关于使用反射类，通过包含每个文件，检查定义的类\函数，然后编写新文件，但这意味着所有包含\需要按顺序发生，我不能保证

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T16:51:06.770

不确定这是否算作“自动”，但是您所描述的听起来可以通过将这个库本身作为一个开放的 Eclipse 项目来大致完成。如果您的“新代码”在一个单独的 Eclipse 项目中，那么您希望在新项目的包含路径配置中列出您的库项目。

在*新*项目的“PHP 包含路径”配置弹出窗口中，单击“添加”并选择库项目（如果它也是“打开”，它只会在此处可见）。您可以通过在“顺序”选项卡中移动内容来选择它是否应该出现在包含路径上的新项目之前。我倾向于首先列出我当前的项目，然后是依赖项，以防我的任何新项目的类优先于依赖项项目中的同名类。

这样做的另一个好处是，当您打开新项目时，包含路径配置中的任何引用项目也将自动打开。

# css - 使用任何动画/过渡时的 Webkit 边界半径和溢出错误

> ID：14383632
> 
> 赞同：40
> 
> 时间：2013-01-17T16:29:00.517
> 
> 标签：css, google-chrome, safari, webkit, overflow

当我使用、 和的组合时`overflow`，我遇到了一个奇怪的错误。我有一个 div，里面有一个 img：`border-radius``transition`

```
<a href="#" class="block size1 annualreport nonprofit">
    <div class="inner_block">
        <img src="http://i.imgur.com/8uuZB.jpg" />
    </div>
</a> 
```

div 有一个`border-radius`，并且溢出设置为隐藏：

```
body {background-color:#78735e;}

.block {
    position: absolute;
    left: 0px;
    top: 0px;
    border-radius: 10px;
    margin: 6px;
    box-shadow: 0px 0px 6px 2px rgba(0, 0, 0, 0.2);
    overflow:hidden;
}
.size1 {
    width: 226px;
    height: 464px;
    min-width: 160px;
    max-width: 226px;
}
.inner_block {
    overflow: hidden;
    border-radius: 10px;
}
.block img {
    width: 100%;
    height: 100%;
    transition: all 0.1s;
}

.block img:hover { width:115%; height:115%; } 
```

当我将鼠标悬停在 img 上时，会发生一个过渡，这会使图像变大以创建缩放效果。问题是`overflow`图像的左下角和右下角似乎中断了。

我已经创建了一个 JSFiddle 供您查看我在说什么。[http://jsfiddle.net/dmcgrew/HuMrC/1/](http://jsfiddle.net/dmcgrew/HuMrC/1/)

它在 Firefox 中运行良好，但在 Chrome 和 Safari 中会中断。

有谁知道这可能是什么原因或如何解决？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-05-21T23:25:44.067

我有同样的问题。将它添加到父容器为我解决了它（这是一个 LESS 混合）。

```
.transitionfix() {
    -webkit-backface-visibility: hidden;
    -moz-backface-visibility: hidden;
    -webkit-transform: translate3d(0, 0, 0);
    -moz-transform: translate3d(0, 0, 0)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-23T09:53:00.367

我为图像添加了负 z-index 值，为父级添加了更高的值

```
li {z-index:10; overflow: hidden;}

li img {z-index: -10;} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-09T04:50:10.180

我在 Safari 上遇到过这个问题（这是 Safari 中的一个已知错误）；通过应用修复它`-webkit-mask-image`，它非常适合我。干杯

```
.block {
  -webkit-mask-image: -webkit-radial-gradient(white, black);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T16:42:53.510

由于图像未加载，我不知道我是否正确理解了问题。如果你添加它对你`height: 100%;`的`.inner_block`问题有帮助吗？

[http://jsfiddle.net/HuMrC/2/](http://jsfiddle.net/HuMrC/2/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T16:50:26.860

接受的答案对我不起作用，因为我不能有清晰的边框来增加被屏蔽元素的可点击区域，我也不希望它掩盖其他元素的可点击区域（并且将高度设置为 100% 没有解决问题）。

请参阅[我对相关问题的回答以](https://stackoverflow.com/a/16109635/1502691)获取可能的解决方案。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-02T17:02:46.973

# -- 简单的解决方案 --

在具有动画过渡的同一元素上，只需添加：

```
.animated-item {
    will-change: transform; /* New line to add to your existing CSS */
} 
```

> CSS 属性向浏览器`will-change`提示元素应该如何改变。浏览器可能会在元素实际更改之前设置优化。这些类型的优化可以通过在实际需要之前执行潜在的昂贵工作来提高页面的响应能力。~ [https://developer.mozilla.org/en-US/docs/Web/CSS/will-change](https://developer.mozilla.org/en-US/docs/Web/CSS/will-change)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2018-08-03T03:29:22.770

我过去在尝试放大 div 内的照片时遇到过这样的问题。我通过向比例变换添加旋转`scale(1.05) rotate(0.02deg)`来修复它（它实际上消除了故障线）

我今天的问题是从 translateY div 悬停效果中消除故障线。令人惊讶的是，我通过删除它们摆脱了它们`overflow: hidden;`

希望这有助于未来的调试器。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2020-05-20T14:45:56.930

上面的答案对我有用，但稍作调整；

```
border: solid 0px transparent; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-10-27T14:48:01.997

这是关于堆叠上下文的问题。

[我们可以使用MDN - stacking context](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Positioning/Understanding_z_index/The_stacking_context)中列出的方法来形成 stacking context：

*   `position: relative; z-index: 1;`
*   `-webkit-mask-image: -webkit-radial-gradient(white, black);`
*   `opacity: 0.999;`
*   `will-change: transform;`

就我个人而言，第一种方法是最好的。

# soap - 如何在骡子中手动抛出肥皂故障

> ID：14383639
> 
> 赞同：3
> 
> 时间：2013-01-17T16:29:20.937
> 
> 标签：soap, cxf, mule

我面临一种情况，我们不能使用模式来验证传入的请求（基本上模式存在，但它接受请求中的任何字符串，wsdl 设计人员有自己的理由这样做以接受来自不同来源和灵活性的请求）。但是当收到请求时，我验证请求包装器的子元素是我们所期望的（为此使用 XPath）。现在，如果子元素不是预期的，我想抛出代码`Soap Fault`，`Client`并且可能包含模式验证失败的错误消息，请求不包含有效元素。

我正在使用 Mule 3.3 并`XPath`在元素中进行验证`<choice>`，我想在`<otherwise>`块中抛出异常。

1.  有没有办法`Soap Fault`手动投入骡流和
2.  如何添加自定义故障字符串。我不确定是否会解决这个目的，因为`outInterceptor`我没有使用.`schemaValidation``<cxf:proxyService>`

这是我的流程的一部分

```
<http:inbound-endpoint address="${service.address}" exchange-pattern="request-response">
  <cxf:proxy-service wsdlLocation="classpath:service.wsdl" namespace="http://company.com/services/service" service="CompanyService" />
</http:inbound-endpoint>
<choice>
  <when>.....</when>
  <otherwise><!-- Here I want to throw Soap Fault ---></otherwise>
</choice>
<catch-exception-strategy>
  <flow-ref name="generateErrorResponse" />
</catch-exception-strategy> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T19:02:45.297

由于您使用的是 a`cxf:proxy-service`您可以完全控制响应。例如，如果您在`otherwise`块中添加以下内容，您将能够创建您想要的任何 SOAP 错误：

```
<expression-component><![CDATA[
 message.payload = '<soap:Fault xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">'
                 + '<faultcode>A code</faultcode><faultstring>A string</faultstring>'
                 + '</soap:Fault>';
]]></expression-component> 
```

# lldb - 如何在lldb中选择不同的框架？

> ID：14383645
> 
> 赞同：4
> 
> 时间：2013-01-17T16:29:36.330
> 
> 标签：lldb

我怎样才能`frame select`真正使框架保持选中状态，而不是弹回第 0 帧？

这是解释问题的输出：

```
(lldb) frame select 6
frame #6: 0x06b35dc9 Foundation`__57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 40
Foundation`__57-[NSNotificationCenter addObserver:selector:name:object:]_block_invoke_0 + 40:
-> 0x6b35dc9:  addl   $24, %esp
   0x6b35dcc:  popl   %ebp
   0x6b35dcd:  ret    
   0x6b35dce:  nop    
(lldb) frame info
frame #0: 0x00c64123 Facebook`-[APHCurrentSession updateMessage:] + 1347 at APHCurrentSession.m:102 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T23:20:14.433

这是 Xcode 和 lldb 的一个已知错误。在调试器控制台窗口中更改选定的线程和选定的框架会立即丢失。或者更准确地说，lldb 不会将此状态更改广播到 Xcode 和 Xcode，在命令之间，将调试器状态重置为已知设置。不幸的是，在解决此问题之前，您需要使用 GUI 进行帧/线程更改，以便 Xcode 可以更新选定的线程/帧。

# machine-learning - 确定最佳聚类数和 Davies-Bouldin 指数？

> ID：14383648
> 
> 赞同：7
> 
> 时间：2013-01-17T16:29:57.963
> 
> 标签：machine-learning, cluster-analysis

我正在尝试评估对某些数据进行聚类所需的正确数量的聚类。

我知道使用 Davies–Bouldin Index (DBI) 可以做到这一点。

要使用 DBI，您必须为任意数量的集群计算它，最小化 DBI 的集群对应于所需的正确数量的集群。

问题是：

如何使用 DBI 知道 2 个集群是否优于 1 个集群？那么，当我只有 1 个集群时如何计算 DBI？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-22T01:13:44.347

只考虑所有集群的平均值`DBI`显然不是一个好主意。

当然，如果每个数据点都被认为是自己的集群（因为每个数据点与其自己的质心重叠），增加集群的数量 - `k`，在没有惩罚的情况下，总是会减少生成的集群中的 DBI 数量，达到零的极端情况`DBI`.

> 如何使用 DBI 知道 2 个集群是否优于 1 个集群？那么，当我只有 1 个集群时如何计算 DBI？

`DBI`因此，如果仅使用平均值作为性能指标，很难说哪个更好。

一个很好的实用方法是使用[肘部方法](http://en.wikipedia.org/wiki/Determining_the_number_of_clusters_in_a_data_set#The_Elbow_Method)。

> 另一种方法将方差百分比解释为集群数量的函数：您应该选择多个集群，以便添加另一个集群不会提供更好的数据建模。更准确地说，如果你绘制集群解释的方差百分比与集群数量的关系图，第一个集群将添加很多信息（解释很多方差），但在某些时候边际增益会下降，给出一个角度图形。此时选择集群的数量，因此是“肘部标准”。

![在此处输入图像描述](../Images/4632566cac2f5ded19ab57edf6567570.png)

关于选择最佳集群数量的其他一些不错的选择：

*   [确定数据集中的集群数量](http://en.wikipedia.org/wiki/Determining_the_number_of_clusters_in_a_data_set#The_Elbow_Method)
*   [如何定义 K-means 聚类中的聚类数？](https://stats.stackexchange.com/questions/9016/how-to-define-number-of-clusters-in-k-means-clustering)

# c# - 在 Visual Studio 中自动调整图像大小以适应屏幕分辨率

> ID：14383651
> 
> 赞同：1
> 
> 时间：2013-01-17T16:30:16.670
> 
> 标签：c#, visual-studio-2005

我正在使用 Visual Studio 2005 中的表单为桌面应用程序设计一个欢迎屏幕。我遇到了启动图像的一些问题。我希望它根据用户的屏幕分辨率自动重新调整大小。就目前而言，我有一个高分辨率的源图像，我一直在 Photoshop 中缩小它以适应表单设计窗口，但是当我构建和运行应用程序时，与我的屏幕 (1920 x 1080) 相比，图像很小。现在它被放置在一个面板内。我尝试过使用 AutoSize 选项，但效果不大。

问题：如何将图像设置为根据最终用户的屏幕分辨率自动调整大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:44:12.873

图片框已经具有此功能。加载图片并设置属性 SizeMode。

```
 // correct proportions
            pictureBox1.SizeMode = PictureBoxSizeMode.Zoom; 
        // or
        // larger, but distorted
        pictureBox1.SizeMode = PictureBoxSizeMode.StretchImage; 
```

在代码中或通过属性窗口，图像将填充完整的图片框。设置图片框的高度/宽度以缩放图像，如下所示：

```
 pictureBox1.Width = Screen.FromControl(this).WorkingArea.Width / 3; 
```

# matlab - MATLAB：读取无符号 16 位二进制文 件的两个字节

> ID：14383653
> 
> 赞同：5
> 
> 时间：2013-01-17T16:30:24.140
> 
> 标签：matlab, integer, byte, binaryfiles

我有一个二进制波段顺序（1 波段，BSQ 文件），它是一个无符号的 16 位（2 字节）整数。

目前我正在通过[multibandread](http://www.mathworks.co.uk/help/matlab/ref/multibandread.html)阅读整个（图像） ：

```
img=multibandread('IMAGE.bsq',[400 400 1],'uint16',0,'bsq','n'); 
```

MATLAB 中的哪个进程允许我分别读取两个字节？即我想将文件读入 MATLAB 中的 2 个新数组，例如 byte1 (400x400x1) 和 byte2 (400x400x1)。

这可以通过[fread](http://www.mathworks.co.uk/help/matlab/ref/fread.html)实现吗？我在“精度”部分注意到可以跳过源值（例如`'N*source=>output'`），但我不确定确切的过程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:37:46.797

一种方法是`img`用按位运算分割你的电流。LSB 图像将是：

```
img1 = bitand(img, 255);   %// 0x00FF 
```

和 MSB 图像将是：

```
img2 = bitsra(img, 8); 
```

不是强制性的，但也许您还想将这些转换为`uint8`s：

```
img1 = uint8(img1);
img2 = uint8(img2); 
```

# xpath - 如何从特定先前兄弟节点的节点获取文本

> ID：14383657
> 
> 赞同：0
> 
> 时间：2013-01-17T16:30:35.570
> 
> 标签：xpath

如果我的 XML 是这样的：

```
<sql result="success">
    <row>
        <column>
            <name>USER_ID</name>
            <value>TEST</value>
        </column>
        <column>
            <name>EMAIL_ADDRESS</name>
            <value>xxx@yyyy.com</value>
        </column>
    </row>
</sql> 
```

如何仅提取使用此 XPath 检索的节点的文本：

```
//value[preceding-sibling::name[1][. = 'USER_ID']] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:15:46.440

只需附加`/text()`即可获取元素的文本子项：

```
//value[preceding-sibling::name[1][. = 'USER_ID']]/text() 
```

# restkit - json 响应被解释为 text/plain

> ID：14383659
> 
> 赞同：11
> 
> 时间：2013-01-17T16:30:37.683
> 
> 标签：restkit

我有以下代码：

```
NSURL *URL = [NSURL URLWithString:[@"some-address"]];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:URL];

RKObjectRequestOperation *requestOperation = [[RKObjectRequestOperation alloc] initWithRequest:request responseDescriptors:[self.objectManager responseDescriptors]];

[requestOperation start];
[requestOperation waitUntilFinished]; 
```

我收到以下错误。

```
Object request failed: Underlying HTTP request operation failed with error: Error Domain=AFNetworkingErrorDomain Code=-1016 "Expected content type {(
    "application/x-www-form-urlencoded",
    "application/json"
)}, got text/plain" UserInfo=0x1f5e3c40 {NSLocalizedRecoverySuggestion={"total_rows":16,"offset":1,"rows":[

{"id":"1","key":1,"value":{"_id":"1","_rev":"1-e75042683867a7030fc4d3aa3b72ef35",
"user":{
"userId":"1",
"name":"A",
.......
]}}, ..... 
```

当响应为 Json 格式时，为什么会出现此错误？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-17T18:16:11.103

我们做到了。刚刚设置

```
[RKMIMETypeSerialization registerClass:[RKXMLReaderSerialization class] forMIMEType:@"text/plain"]; 
```

如果您使用 JSON 而不是 XML（XML 是我们的例子），请随意使用 RKNSJSONSerialization 类更改 RKXMLReaderSerialization 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:33:42.120

您没有在回复中正确设置 mime-type 标头。注意错误说`got text/plain`，而代码期望要么`application/json`要么`application/x-www-form-urlencoded`。

# javascript - 删除 HTML 元素的内联 css

> ID：14383668
> 
> 赞同：9
> 
> 时间：2013-01-17T16:30:50.560
> 
> 标签：javascript, jquery, html, css, inline

我正在使用 wordpress 3.5 并创建带有子菜单的菜单。它的结构是这样的：

```
<ul class="menu">
    <li id="menu1">Menu 1</li>
    <li id="menu2">Menu 2</li>
    <li id="menu3" style="z-index:100;">
        Menu 3
        <ul class="submenu">
            <li id="submenu1">submenu1</li>
            <li id="submenu2">submenu2</li>
            <li id="submenu3">submenu3</li>
        </ul>
    </li>
</ul> 
```

问题是带有子菜单的菜单，它自动附加了一个值为 100 的 z-index。我不希望它是那样的，因为它给我添加 lavalamp 效果到这些菜单时带来了麻烦。

在使用 wp_nav_menus 创建菜单之后，我尝试使用 jquery 编辑 z-index，如下所示：

```
jQuery(document).ready(function(){
     jQuery("#menu3").css("z-index", "0");
}); 
```

但不幸的是，它不起作用。如何删除该内联 CSS 样式？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-17T16:33:04.920

[`removeAttribute`](https://developer.mozilla.org/en-US/docs/Web/API/Element/removeAttribute)如果要删除使用 javascript 手动添加的所有内联样式，请使用该方法。

```
element.removeAttribute("style") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T16:43:22.783

# 将 z-index 重置为初始值

您可以简单地将 z-index 重置为其初始值，使其表现得就像`li`没有样式声明的情况一样：

```
$(function(){
    $('#menu3').css('z-index', 'auto');
}); 
```

您可以使用普通的 javascript（代码应该在您的菜单 html 加载后运行）：

```
// If you're going for just one item
document.querySelector('#menu3').style.zIndex = 'auto'; 
```

# 删除样式属性

您可以使用 jQuery 从所有列表中删除样式属性：

**注意：**请记住，这将删除所有使用 style 属性设置给您的元素的样式。

```
$(function(){
    $('#menu3').removeAttr('style');
}); 
```

或香草：

```
// Vanilla
document.querySelector('#menu3').style = ''; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T16:45:52.137

如果要删除所有内联样式，Pranay 的答案是正确的：

```
$("#elementid").removeAttr("style") 
```

如果您只想删除一个样式属性，例如 z-index，则将其设置为空值：

```
$("#elementid").css("zIndex","") 
```

来自 jQuery 文档（[http://api.jquery.com/css/](http://api.jquery.com/css/)）：

> 将样式属性的值设置为空字符串 — 例如 $('#mydiv').css('color', '') — 如果该属性已被直接应用，则从元素中删除该属性，无论是在 HTML 样式中属性，通过 jQuery 的 .css() 方法，或者通过 style 属性的直接 DOM 操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T16:44:04.247

这是我认为更好的方法，因为它只删除 z-index 样式而不是整个样式属性。这是一个工作[小提琴](http://jsfiddle.net/SjAM4/)。

```
//As commented by @DA this is enough
$("#elementid").css("zIndex","")

//this could be useful in another situation so I will leave it :) 
$(document).ready(function () {
  $('#menu3').attr('style', function(i, style){
    return style.replace(/\z-index\b[^;]+;?/g, '');
  });
}); 
```

希望能帮助到你。

# opencv - 使用 Eclipse 安装库 opencv 2.4.3 时出错

> ID：14383672
> 
> 赞同：0
> 
> 时间：2013-01-17T16:31:05.457
> 
> 标签：opencv

当我编译这个程序时：

`#include < C:\opencv\include\opencv\cv.h>`

`#include < C:\opencv\include\opencv\highgui.h>`

出来这个错误：

> C:\opencv\include\opencv\cv.h:63:33：致命错误：opencv2/core/core_c.h：没有这样的文件或目录

我需要做什么？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T10:44:54.797

Unfortunately, the path for the opencv2 in include have been changed. I solved this error including all necessary folders manually:

1.  Choose your opencv project on the left side located at Project Explorer.
2.  Click right click on selected project.
3.  Select Properties.
4.  Select C/C++ Build -> Settings -> Cross G++ Compiler -> Includes.
5.  In *INCLUDE PATHS (-I)* on the right side add path.
6.  The path is `<PATH_TO_OPENCV>/modules/highgui/include`.
7.  Do the same for other folders too.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:53:06.867

问题来自使用标题的绝对路径。您必须将 opencv 的头文件所在的目录添加到链接器中。从你的问题我想他们是：

`C:\opencv\include\opencv\`和`C:\opencv\include\`

在 Eclipse 中，您可以通过 C/C++ 构建设置下的项目属性添加它们。找到关于包含目录的位置并放置这两个。如果您还没有这样做，您还必须定义库目录和要链接的库。

最后但重要的是，不要使用包含但相对的绝对路径。

`#include "cv.h"`

`#include "highgui.h"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:27:14.590

将您的包含指向`opencv\build\include`而不是`opencv\include`

（前一个文件夹也包含模块，后者不包含，您必须手动添加所有这些条目）

# jquery-ui - 如何从 div 外部的链接中使用 jQuery UI 选项卡打开选项卡？

> ID：14383674
> 
> 赞同：12
> 
> 时间：2013-01-17T16:31:09.367
> 
> 标签：jquery-ui, jquery-ui-tabs

这可能有点难以解释，但我会尽力而为。我有一个带有两个选项卡、完整描述和视频的产品页面。这些是使用 jQuery UI 选项卡完成的。

在页面的此部分上方，我有一张带有缩略图的产品图片......但我希望其中一个缩略图成为查看视频的链接（当然包含在视频选项卡中）。

If I load the page as site.com/product#video it does load up the correct tab...but when the tab is not active, and I use a link outside of the #tab div, (ex: Video), it不做任何事情。

如果标签不包含在#tab div中，我如何获得打开标签的链接？

**代码**

***此代码在选项卡之外，需要打开#video 选项卡***

```
<a href="#video">Open Video Tab</a> 
```

***标签代码***

```
<div id="tabs" class="ui-tabs ui-widget ui-widget-content ui-corner-all">
<ul class="product-tabs ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all">
    <li class="ui-state-default ui-corner-top ui-tabs-selected ui-state-active ui-state-hover"><a href="#description">Full Description</a></li>
    <li class="ui-state-default ui-corner-top"><a href="#video">Video</a></li>
</ul>
<div class="product-collateral">
    <div class="box-collateral box-description">
        <div id="description" class="ui-tabs-panel ui-widget-content ui-corner-bottom">
           Content
        </div>
        <div id="video" class="ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide">
            <h2 class="video">Video Content</h2>
        </div>
    </div>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-24T09:05:21.753

对我有用的是：

**html**

```
<a href="#description" class="open-tab">Open Description Tab</a>
<a href="#video" class="open-tab">Open Video Tab</a>   

<div id="tabs">
    <ul>
        <li>
            <a href="#description">Full description</a>
        </li>
        <li>
            <a href="#video">Video content</a>
        </li>
    </ul>

    <div class="product-collateral">
        <div class="box-collateral box-description">
            <div id="description">
                Content
            </div>
            <div id="video">
                <h2 class="video">Video Content</h2>
            </div>
        </div>
    </div>
</div> 
```

**Javascript**

```
$(document).ready(function () {
    $('#tabs').tabs();

    $('.open-tab').click(function (event) {
        var tab = $(this).attr('href');
        $('#tabs').tabs('select', tab);
    });
}); 
```

因此，它的作用是提供指向描述和视频选项卡的链接，单击链接时会选择这些选项卡。

从[这里](http://docs.jquery.com/UI/Tabs#method-select)我们可以看到，在选择特定选项卡时，我们可以使用从零开始的索引或指向我们希望显示的选项卡的 href 片段。

这就是为什么元素的`href`属性与`a`元素的 Id 相匹配的原因`div`——当单击一个元素时，它的 href 片段将用于设置选定的选项卡。

* * *

**jQuery UI 1.11 更新**

随着 jQuery UI 的发展，用于设置活动选项卡的 API 也在发展。从 jQuery UI 1.11 开始，以下代码将选择活动选项卡：

```
//Selects by the zero-based index
$('#tabs').tabs("option", "active", index); 
```

现在因为我们现在必须提供一个从零开始的索引，所以我最初提供的代码将不再工作。

我们现在需要的是一个可以实际使用的索引。一种方法是：

```
$('.open-tab').click(function (event) {
    var index = $("selector-of-clicked-tab").index();
    $('#tabs').tabs("option", "active", index);
}); 
```

另一种是使用 HTML5`data-`属性：

```
<a href="#description" class="open-tab" data-tab-index="0">Open Description Tab</a>
<a href="#video" class="open-tab" data-tab-index="1">Open Video Tab</a> 
```

因此，您可以在处理这些链接的点击时执行此操作：

```
$('.open-tab').click(function (event) {
    $('#tabs').tabs("option", "active", $(this).data("tab-index"));
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-22T09:10:35.053

使用 jQuery：

```
$( "#tabs" ).tabs({ active: tabNumber }); 
```

请记住，索引从 0 开始

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-09T13:48:31.777

使用 jquery，将单击事件绑定到打开所需选项卡的链接。

```
$('#tabopenlink').click(function() {
    $('#tabs').tabs({active: tabidx});
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-12T16:46:25.373

我使用迷你插件。

```
 (function($) {
    $.fn.tabremote = function(options) {

          var settings = $.extend({
           panel: "#tabs",
           to: "data-to",
        }, options );

        $this=$(this);
        $panel=$(settings.panel);

    $this.click(function(){
                if($(this).attr("href"))
                    {var tos=$(this).attr("href");}
                else
                    {var tos=$(this).attr(settings.to);}

                to=tos.match(/\d/g);
    $panel.tabs({active: to-1});        
    return false;   
    });

        return this;
    }
})(jQuery); 
```

使用 href 或任何元素打开选项卡。

id panel 必须包含面板的编号。示例 (1-tabs, tabs-2, ...) 插件减 1 并打开面板。选项卡（活动，（id 数 -1））

利用

```
$("button.href").tabremote({panel:"#tabs",to:"data-href"}); 
```

panel:"#tabs" // 容器面板

to:"data-href" // 带有值的属性名

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-09-10T22:48:58.027

如果你使用 twitter bootstrap 而不是 jquery ui，那就很简单了。只需添加`data-toggle="tab"`链接并将其放在页面中您想要的任何位置：

```
 <a href="#video" data-toggle="tab">Open Video Tab</a> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-09-03T13:55:38.627

```
function openTabByLink(link) {
    $("#tabs").find("ul li[aria-controls='"+link+"'] a").trigger("click");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-04T10:48:41.700

对于 jQuery UI 1.11

HTML：

```
<div id="tabs">...</div>
...
<a href="#video" class="open-tab">Open Video Tab</a> 
```

JS：

```
$('.open-tab').click(function () {
  $("#tabs").tabs('option','active',$('#tabs a.ui-tabs-anchor[href="'+$(this).attr('href')+'"]').index('#tabs a.ui-tabs-anchor'));
}); 
```

# sql - “Explain plan for with”语句的 sql 语句无效

> ID：14383675
> 
> 赞同：0
> 
> 时间：2013-01-17T16:31:18.983
> 
> 标签：sql, oracle, oracle10g, sql-execution-plan

我正在执行以下查询：

```
explain plan for  
with Foo   
as (  
     select * from my_table 
   )  
select * from Foo  
where x = 7; 
```

这会导致Oracle10g 中出现无效SQL 语句异常。如果没有解释计划，with 语句将正确执行。为什么在 SQL Developer 的上下文中会出现此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:33:04.020

你有一个额外的括号：

```
explain plan for  
with Foo   
as (  
     select * from my_table)  -- < remove this
   )  
select * from Foo  
where x = 7; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T18:09:20.447

不确定这种细微差别，但还有另一种写法可以解释。

```
Select *
  From (
        Select * From my_table
       ) Foo
 Where Foo.x = 7; 
```

我远离子句，因为它们不能很好地移植，并且根据我的经验，优化器并没有对子句进行动态评估，但这些都是较早的经验。

# testing - 硒网络驱动程序。等待元素 click() 后冻结测试

> ID：14383676
> 
> 赞同：4
> 
> 时间：2013-01-17T16:31:20.393
> 
> 标签：testing, selenium, selenium-webdriver, automated-tests

我需要使用 Selenium WebDriver (Java API) 单击动态生成的元素。我正在等待这个元素与 WebDriverWait 一起出现，然后单击它。此单击成功，但随后单击不同的静态元素会冻结整个测试。这是代码：

```
webDriver.get(alfrescoURL + "/share/page/create-document");
WebDriverWait wait = new WebDriverWait(webDriver, 10);

WebElement documentTypeList = webDriver.findElement(By.id("template_x002e_create-document_x002e_create-document_x0023_default_documenttype-selected-form-button-button"));
documentTypeList.click();
WebElement listItem = wait.until(
    ExpectedConditions.visibilityOfElementLocated(By.id("yui-gen100")));
listItem.click();
// Choosing to create in new project
WebElement projectLink = webDriver.findElement(By.id("template_x002e_create-document_x002e_create-document_x0023_default_projecttype-entry1"));
projectLink.click(); 
```

`documentTypeList.click()`打开一个下拉列表，`listItem.click()`选择一个项目，`projectLink.click()`在单选按钮组中进行选择。测试静默冻结`projectLink.click()`。看起来这`click()`无限地等待由于某种原因发生的页面重新加载，而它不应该。（选择项目后列表消失是由不发出任何 AJAX 请求的 javascript 完成的。）

我认为有一些关于`click()`阻塞的东西我不明白。它在它的 javadoc 中说，它仅在导致页面加载时才尝试阻止。尽管如此，由于某种原因，我在这里遇到了障碍。

如果我在此之前插入一个线程睡眠，`projectLink.click()`那么测试工作正常。它与我得到一个无限块的假设一致`click()`。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:16:17.347

我之前遇到过这种情况，测试运行速度超过了下拉菜单的收缩速度，并且无法单击以下元素。除了使用任意睡眠（尽管在极少数情况下它们是必要的），您可以等待下拉列表中的类更改吗？

例如，如果我想在继续之前等待下拉菜单收缩，我将等待选择的类从“活动”变为“关闭”。当然，这假设您的 HTML 具有这些动态类。

另一种可能性是设置隐式等待，为以下实例提供足够的填充：

```
driver.manage().timeouts().implicitlyWait(1000, TimeUnit.MILLISECONDS); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-22T16:46:11.507

我建议您也尝试其他点击选项：

*   一个）`Actions#click()`
*   b) Javascript click()

如果这些点击中的任何一个有效，则意味着问题出在硒的 WebElement Click 方法上，需要报告。

# c++ - Eclipse CDT 错误地标记了 C++ 静态类型检查 (BOOST)

> ID：14383677
> 
> 赞同：0
> 
> 时间：2013-01-17T16:31:25.150
> 
> 标签：c++, eclipse, boost, eclipse-cdt, static-assert

所以，我想使用 BOOST 库来静态检查我的模板是否被某些基类使用，例如：

```
template <class T>
class A {
    // Code here
} 
```

所以，我想使用`BOOST_STATIC_ASSERT( ( boost::is_base_of<DesiredBaseClass, T>::value ) )`，这适用于 GCC。然而，Eclipse 对此非常恼火，它会列出错误（来自它自己的解析器）。

错误是：

```
Type 'T' could not be resolved  (Code Analysis Problem)
Type 'DesiredBaseClass' could not be resolved   (Code Analysis Problem)
Symbol 'value' could not be resolved    (Semantic Error) 
```

有谁知道阻止 Eclipse 抱怨的好方法？我可以关闭它的解析器，但我认为它通常很擅长解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:39:45.663

没关系，我将 Eclipse CDT 更新到最新版本，问题就消失了。

似乎解析器或生成警告的任何东西都已更新以解决问题。抱歉之前没有考虑过尝试。

# c++ - 强制提升使用 POSIX 共享内存而不是 System V？

> ID：14383679
> 
> 赞同：2
> 
> 时间：2013-01-17T16:31:32.823
> 
> 标签：c++, macos, boost, posix, shared-memory

默认情况下，Boost 使用 System V 共享内存并创建文件进行通信。我希望它使用 POSIX 共享内存。

他们是一种强制提升使用 POSIX 共享内存而不是尝试创建文件的方法吗？

我是否必须更改源代码（Boost.Interprocess）中的某些内容？

我在 OS X（10.6、10.7 和 10.8）上的项目中使用了 1.46.1 版本的 boost。但我也可以使用 1.52.0。在迁移之前，我想知道是否可以这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:17:29.893

根据文档，Boost Interprocess 将在可用时使用 POSIX。进一步深入研究，似乎在 Max OSX 上它没有，因为实现有一些不合格的行为（根据标题）。下面是来自的代码`boost/interprocess/detail/workaround.hpp`。

```
//Check for XSI shared memory objects. They are available in nearly all UNIX platforms
   #if !defined(__QNXNTO__)
      #define BOOST_INTERPROCESS_XSI_SHARED_MEMORY_OBJECTS
   #endif

   #if defined(_POSIX_SHARED_MEMORY_OBJECTS) && ((_POSIX_SHARED_MEMORY_OBJECTS - 0) > 0)
      #define BOOST_INTERPROCESS_POSIX_SHARED_MEMORY_OBJECTS
   #else
      //VMS and MACOS don't define it but they have shm_open/close interface
      #if defined(__vms)
         #if __CRTL_VER >= 70200000
            #define BOOST_INTERPROCESS_POSIX_SHARED_MEMORY_OBJECTS
         #endif
         //Mac OS has some non-conformant features like names limited to SHM_NAME_MAX
      #elif defined (__APPLE__)
         //#define BOOST_INTERPROCESS_POSIX_SHARED_MEMORY_OBJECTS
         //#define BOOST_INTERPROCESS_POSIX_SHARED_MEMORY_OBJECTS_NO_GROW
      #endif
   #endif 
```

# android - 在活动中嵌入 Google 日历

> ID：14383681
> 
> 赞同：1
> 
> 时间：2013-01-17T16:31:40.247
> 
> 标签：android, android-layout, android-intent, android-widget

我有一个选项卡式视图。我想将 Google 日历嵌入到我的标签视图中。因此，当用户单击“周”选项卡时，我将以编程方式将日历视图更改为每周。如果用户单击“月”选项卡，我将以编程方式将日历视图更改为“月”，依此类推。

我想由于日历来自谷歌，它会很容易嵌入。但似乎我错了。到目前为止，我只能找到这段代码：

```
ComponentName cn; 
Intent i = new Intent();         
cn = new ComponentName("com.android.calendar", "com.android.calendar.LaunchActivity");
i.setComponent(cn);
startActivity(i); 
```

但它会启动日历。相反，我希望它嵌入到我的应用程序中。可能吗？我不在乎它是否在模拟器上不起作用。我一直在真实设备上进行测试。

我的应用程序的其他信息：

```
MindSdkVersion = 8
TargetSdkVersion = 14 
```

但是，如果版本 8 真的没有解决方案，我可以在 minSdkVersion 上妥协。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:52:12.183

> 我想因为日历来自谷歌，所以很容易嵌入

您不能将其他应用程序嵌入到您自己的应用程序中。这与 AOSP 日历应用程序无关。

> 可能吗？

否。欢迎您`CalendarContract`在 API 级别 14+ 设备上使用以实现您自己的日历 UI，该 UI 由 AOSP 日历应用程序使用的相同数据支持。

# php - 如何读取不同 D：驱动器中文件的图片路径？

> ID：14383683
> 
> 赞同：0
> 
> 时间：2013-01-17T16:31:44.843
> 
> 标签：php

运行 php 的本地 windows 2008 服务器 iis。本网站路径 `C:\inetpub\wwwroot\xxx` 本图片路径`D:\Fotograflar` 如何阅读图片

这两个代码没有运行

```
<?php $file_dir = "D:/Fotograflar"; ?>
<img src="<?php echo $file_dir . '/' .$row[3];?>"></td>

<img src="<?php echo "file:///D:/Fotograflar/".$row[3];?>"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:35:55.590

您可能应该将图片位置更改为根目录内，这样您就可以制作图片网址并通过 IIS 向用户展示图片，而不会带来很大的安全风险。

# vb.net - vb.net - 动态生成 SQL 命令对象

> ID：14383689
> 
> 赞同：2
> 
> 时间：2013-01-17T16:32:02.543
> 
> 标签：vb.net

可以请一些帮助如何动态生成命令对象。见下文 - 我需要将数据库名称和表名传递给应该返回该表中的行数的函数。我正在努力编写此查询。查看我正在尝试的代码

```
 Using _Conn As New SqlConnection(_ConnString)
            _SQLCommand = New SqlCommand()
            _SQLCommand.CommandText = "Select count(*) from " & _
            "lvar_Database " + ".dbo." + lvar_Table
            _SQLCommand.Parameters.Add(New SqlParameter("@Database_Name", SqlDbType.NVarChar))
            _SQLCommand.Parameters.Add(New SqlParameter("@Table_Name", SqlDbType.NVarChar))
            _SQLCommand.Parameters("@Database_Name").Value = lvar_Database
            _SQLCommand.Parameters("@Table_Name").Value = lvar_Table
            Try
                _Conn.Open()
                GetNumberofRows = Convert.ToInt32(_SQLCommand.ExecuteScalar())
            Catch ex As Exception
            End Try
        End Using 
```

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:40:31.153

为此，您不需要命令参数。只需使用数据库和表名动态组合您的查询：

```
 Using _Conn As New SqlConnection(_ConnString)
        _SQLCommand = New SqlCommand()
        _SQLCommand.CommandText = _
            "Select count(*) from " + _
            lvar_database + _
            ".dbo." + _
            lvar_Table

        Try
            _Conn.Open()
            GetNumberofRows = Convert.ToInt32(_SQLCommand.ExecuteScalar())
        Catch ex As Exception
        End Try
    End Using 
```

# c# - 基本窗口的 WPF 样式未在 App.xaml 中应用，但在 Themes/Generic.xaml 中

> ID：14383696
> 
> 赞同：10
> 
> 时间：2013-01-17T16:32:47.570
> 
> 标签：c#, wpf, wpf-controls

我正在为我的大多数窗口创建一个基窗口类来派生。显然，最好的解决方案是一个单独的类，以及适用于它的样式。

问题是`<Style ../>`I have 在`App.Resources`. 也就是说，如果它是在 external 中定义的`ResourceDictionary`，并合并到`App.xaml`'s 资源中，或者是本地字典并合并，或者内联到`App.Resources`. 但是，当`<Style ../>`它被放入时应用`Themes/Generic.xaml`。

除了覆盖`DefaultStyleKeyProperty`.

下面是`ThemeWindow`：

```
public class ThemeWindow : Window
{
    static ThemeWindow()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(ThemeWindow), new FrameworkPropertyMetadata(typeof(ThemeWindow)));
    }
} 
```

`<Style ../>`这是我尝试应用的非常简单的方法（它使`Window`背景变为红色，仅此而已）：

```
<Style TargetType="{x:Type testing:ThemeWindow}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type testing:ThemeWindow}">
                <Grid>
                    <Grid.Background>
                        <SolidColorBrush Color="Red"/>
                    </Grid.Background>
                    <AdornerDecorator>
                        <ContentPresenter />
                    </AdornerDecorator>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

`MainWindow`使用,的`ThemeWindow`就是下面的 XAML：

```
<testing:ThemeWindow x:Class="Testing.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:testing="clr-namespace:Testing"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Content="Button" HorizontalAlignment="Left" Margin="125,83,0,0" VerticalAlignment="Top" Width="75"/>
    </Grid>
</testing:ThemeWindow> 
```

现在，如前所述，如果您将其`Style`放在它自己的`ResourceDictionary`中，并像这样包含它：

```
<App.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="/Themes/ThemeWindow.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</App.Resources> 
```

.. 这没用。如果将样式直接内联到`App.Resources`中，则不起作用。

我发现它工作的*唯一*`ResourceDictionary`情况是调用xaml `Generic.xaml`，并将其放入`Themes/`应用程序的目录中。

我想知道为什么会这样。

我唯一的理论是，当 WPF 看到一个控件类型时，它会转到`Themes`，并扫描所有`ResourceDictionary`s 以查找该类型，然后返回`Generic.xaml`并加载它。`<Style />`这并不能解释为什么如果在合并中可用，它不会加载`ResourceDictionary`。**请注意**，如果将`MergedDictionary`放入中，它确实有效`Generic.xaml`，原因很明显。

如果那是我必须做的，`ResourceDictionary`我完全可以不必合并。`Generic.xaml`我只是想了解一下为什么它需要这样的技术细节。

这个不工作/工作的截图： ![破碎的图像](../Images/67b06e0586721405ac82c88b62752b3e.png) ![工作图像](../Images/19e174d80ba6409b7b05e1098ff85e5d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:40:45.067

我有一个简单的解决方法，可以让您在 app.xaml 中设置样式。

在 app.xaml 中定义您的样式，如下所示：

```
<Style x:Key="{x:Type testing:ThemeWindow}" TargetType="{x:Type testing:ThemeWindow}"> 
```

并将您的 ThemWindow 更改为：

```
public class ThemeWindow : Window
{
    static ThemeWindow()
    {
        StyleProperty.OverrideMetadata(typeof(ThemeWindow), new FrameworkPropertyMetadata(GetDefautlStyle()));
    }

    private static Style GetDefautlStyle()
    {
        if (defaultStyle == null)
        {
            defaultStyle = Application.Current.FindResource(typeof(ThemeWindow)) as Style;
        }
        return defaultStyle;
    }

    private static Style defaultStyle = null;
} 
```

它并没有真正解决问题，但这可以让你实现你所需要的！

**编辑：**查看[DefaultStyleKey](http://msdn.microsoft.com/fr-fr/library/system.windows.frameworkelement.defaultstylekey.aspx)参考，明确说明它用于*主题样式查找*。这就解释了为什么它不会在 app.xaml 或任何其他字典中找到它。它只会在主题词典中搜索。所以你要么必须在主题字典中定义你的风格，要么像上面的例子一样直接使用 Style 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:26:50.987

我解决了 stackoverflow 中已经讨论过的以下解决方案。在加载应用程序时需要添加加载组件。

[参考解决方案](https://stackoverflow.com/questions/2753651/wpf-not-applying-default-styles-defined-in-mergeddictionaries)

# android - HoloEverywhere 的 SlidingMenu 和活动之间的转换

> ID：14383697
> 
> 赞同：0
> 
> 时间：2013-01-17T16:32:49.350
> 
> 标签：android, android-holo-everywhere

我正在使用 HoloEverywhere + ActionBar Sherlock + HoloEverywhere 的滑动菜单插件。单击滑动菜单中的项目时，我会启动各种活动。

我的问题是实现 Cyril Mottier 在[他关于 Prixing 的 SlidingMenu 的文章中谈到的内容](http://android.cyrilmottier.com/?p=717)： - 覆盖活动转换（这是简单的部分） - 保存/恢复活动之间的菜单状态（这是我无法做到的）：目前菜单消失，感觉不对。我想保存菜单状态，当下一个活动开始时，恢复该状态（例如动画关闭菜单）

Cyril 谈到使用视图的 saveHierarchyState，...：

> Prix​​ing 应用程序中的 Activity 转换依赖于 Android 框架用于在内存不足的情况下销毁 Activity 后恢复 Activity 的完全相同的技术。因此，每次需要打开一个新的 Activity 时，我们使用`View#onSaveInstanceState()`/保存当前 UI 状态中有趣的部分，`View#saveHierarchyState(SparseArray<Parcelable>)`然后将其重新应用到新创建的 Activity 中，感谢`View#onRestoreInstanceState(Parcelable)`/`View#restoreHierarchyState(SparseArray<Parcelable>)`

但是我很难看到如何实现它？有人会有任何线索吗？

我的活动都继承自一个基本活动类，该类保留其滑动菜单的实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T07:19:18.947

请参阅[SlidingMenu 问题](https://github.com/jfeinstein10/SlidingMenu/issues/140)

您可以将最新版本的 SlidingMenu 代码更新到 HoloEverywhere 的同一模块。或者等待 1.4.3，这个模块将由我更新。

# wordpress - tinysort 动态加载后无法正常工作

> ID：14383699
> 
> 赞同：2
> 
> 时间：2013-01-17T16:32:53.383
> 
> 标签：wordpress, google-chrome, sorting

我的 wordpress 网站发生了一个非常奇怪的问题。我的排序功能工作正常，然后我滚动到页面底部，它通过无限滚动加载更多帖子（这个插件[http://wordpress.org/extend/plugins/infinite-scroll/](http://wordpress.org/extend/plugins/infinite-scroll/)），然后突然我的排序功能（ tinysort used）开始表现得很奇怪，给了我随机的结果。只发生在新/旧和旧/新，而不是字母排序。这只会发生在 Chrome 中，不会发生在 firefox 或 safari 中。

[http://mammalian.ca/newSite/projects/](http://mammalian.ca/newSite/projects/)

怎么了？帮助！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T09:12:05.843

奇怪...您的代码看起来不错... TinySort 可能将属性作为字符串而不是数字处理。您可以尝试用 'data-time' 替换 'rel' 属性并按数据排序（如果我从控制台运行它看起来正确）：

```
// following commented line is only to test
// $('*[rel]').each(function(i,el){$(el).attr('data-time',$(el).attr('rel'))});
jQuery('div#sortDivs > div').tsort({data:'time',order:'desc'}); 
```

# c# - Workflow Foundation 4.5 异常处理

> ID：14383700
> 
> 赞同：0
> 
> 时间：2013-01-17T16:32:58.217
> 
> 标签：c#, wcf, workflow-foundation-4

我有一个非常简单、长时间运行、基于消息的 WCF 工作流，但我遇到了一个问题，因为每当我必须向向工作流发送消息的人抛出异常时，即使它是主动的（我的意思是错误地没有处理引发的异常...）工作流实例进入无法继续的“失败”状态...

我想知道如何关闭它......说不要将工作流的状态更改为“错误”！按照“抛出并继续”的顺序...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T19:06:09.073

您需要在 Receive/SendReply 对上实现 WCF FaultContract。

请参阅这篇文章[http://msmvps.com/blogs/theproblemsolver/archive/2010/03/24/workflow-4-and-soap-faults.aspx](http://msmvps.com/blogs/theproblemsolver/archive/2010/03/24/workflow-4-and-soap-faults.aspx)

# ajax - 如何从 ajax 回调中提取单个对象

> ID：14383707
> 
> 赞同：0
> 
> 时间：2013-01-17T16:33:26.023
> 
> 标签：ajax, json

我从与我手册中的语法完全匹配的 AJAX 调用中返回以下内容：

```
 var data = {        
    coach100:   {
        PID: '23169',
        POrt: '11'
        }, 

    coach200:   {
        PID: '23170',
        POrt: '11'
        } 
        }; 
```

现在我想提取一条数据。手动语法是：

```
 data.coach100.PID 
```

但 Firebug 控制台显示：“TypeError：data.coach100 未定义”

如何格式化变量“data”中的数据，以便可以使用点语法提取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:51:25.813

这在 JSfiddle 中运行得很好 - [http://jsfiddle.net/GWFe9/](http://jsfiddle.net/GWFe9/)

我的猜测是您在错误的位置定义和调用数据。

如果您在 ajax 的成功之外调用您的数据，但还在那里定义它，那么您将度过一段糟糕的时光。

尝试添加 var 数据；到你的文档的顶部，所以它是一个全局变量 - 然后当你从 ajax 获得成功时，像这样定义你的数据 -

```
data = {        
    coach100:   {
        PID: '23169',
        POrt: '11'
        }, 

    coach200:   {
        PID: '23170',
        POrt: '11'
        } 
        }; 
```

然后您可以在加载后随时调用它！

# delphi - 如何防止通过 Indy 发送附件时被编码

> ID：14383708
> 
> 赞同：1
> 
> 时间：2013-01-17T16:33:28.157
> 
> 标签：delphi, indy

我已经成功编写了一个程序，它可以发送编码为 UTF-8 的希伯来语 HTML 电子邮件以及嵌入的图片和附件。

我注意到虽然带有 JPG 或 TXT 类型附件的电子邮件可以快速发送，但带有 PDF 附件的电子邮件需要很长时间（一分钟）才能发送。我安排了一个 tmemo 组件从 SMTP 组件的 OnStatus 事件中接收 AStatusText 字符串，并看到该程序正在对文本（正确）和附件（不正确）进行编码。

如何防止附件被编码，从而更快地发送电子邮件？

这是显示时间的 SMTP 组件的日志

```
18:44:01 smtp: Connected.
18:44:04 smtp: Encoding text
18:44:04 smtp: Encoding attachment
18:44:04 smtp: Encoding attachment
18:45:05 smtp: Disconnecting.
18:45:05 smtp: Disconnected.
18:45:05 disconnected 
```

需要一分钟来编码一个 491KB 大小的 PDF 文件。在此期间程序没有响应（我认为程序挂起，直到我查看日志）。

也许我应该问一个稍微不同的问题：*为什么*必须对其进行编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T18:14:21.890

所有附件始终使用 MIME64 编码，否则您的电子邮件将无法被除您之外的任何人阅读。改变互联网电子邮件的工作方式不是您的工作。

您延迟的原因可能是您的托管公司正在对 PDF 进行“病毒扫描”，或者另一方面，如果您要附加一个巨大的 PDF，并且需要一分钟来对其进行编码，我并不感到惊讶一个巨大的 PDF 文件，当转换为 MIME64 时，这不是您可以跳过的步骤，需要很长时间。但是你的 PDF 是 491 KB，这是微不足道的，所以延迟可能在服务器端，它可能正在扫描你的 PDF。请记住，SMTP 过程是您的一方发送，然后另一方响应的对话。在对方响应之前的延迟不是您在不了解延迟发生原因的情况下可以解决的问题。您的“无编码”想法是不合理的。

但是，病毒/垃圾邮件扫描是一个合理的假设，这可能会使您已经 30 秒的正常传输时间增加 30 秒。要验证该假设，请将您的 pdf 从“test.pdf”重命名为“test.p@d@f$”，然后查看传输时间是否从 60 秒下降到大约 30 秒。您还没有说明您的互联网管道有多快，或者您认为 MIME64 编码的 EMAIL 可能有多大，但它可能比您的 PDF 大 1.5 倍，因此大约 600 到 800 KB。如果您的 DSL 或 ISDN 连接速度非常慢，那么这也可以解释。

# r - 读取固定宽度的文本文件

> ID：14383710
> 
> 赞同：95
> 
> 时间：2013-01-17T16:33:32.120
> 
> 标签：r, fixed-width

我正在尝试将这个格式丑陋的数据集加载到我的 R 会话中： [http ://www.cpc.ncep.noaa.gov/data/indices/wksst8110.for](http://www.cpc.ncep.noaa.gov/data/indices/wksst8110.for)

```
Weekly SST data starts week centered on 3Jan1990

Nino1+2      Nino3        Nino34        Nino4
Week          SST SSTA     SST SSTA     SST SSTA     SST SSTA 
03JAN1990     23.4-0.4     25.1-0.3     26.6 0.0     28.6 0.3 
10JAN1990     23.4-0.8     25.2-0.3     26.6 0.1     28.6 0.3 
17JAN1990     24.2-0.3     25.3-0.3     26.5-0.1     28.6 0.3 
```

到目前为止，我可以阅读这些行

```
 x = readLines(path) 
```

但是该文件将“空白”与“-”混合作为分隔符，我不是正则表达式专家。我感谢任何帮助将其变成一个漂亮而干净的 R 数据框。谢谢！

* * *

## 回答 #1

> 赞同：189
> 
> 时间：2013-01-17T16:45:20.467

这是一个固定宽度的文件。用来`read.fwf()`阅读它：

```
x <- read.fwf(
  file=url("http://www.cpc.ncep.noaa.gov/data/indices/wksst8110.for"),
  skip=4,
  widths=c(12, 7, 4, 9, 4, 9, 4, 9, 4))

head(x)

            V1   V2   V3   V4   V5   V6   V7   V8  V9
1  03JAN1990   23.4 -0.4 25.1 -0.3 26.6  0.0 28.6 0.3
2  10JAN1990   23.4 -0.8 25.2 -0.3 26.6  0.1 28.6 0.3
3  17JAN1990   24.2 -0.3 25.3 -0.3 26.5 -0.1 28.6 0.3
4  24JAN1990   24.4 -0.5 25.5 -0.4 26.5 -0.1 28.4 0.2
5  31JAN1990   25.1 -0.2 25.8 -0.2 26.7  0.1 28.4 0.2
6  07FEB1990   25.8  0.2 26.1 -0.1 26.8  0.1 28.4 0.3 
```

* * *

**更新**

该软件包`readr`（2015 年 4 月发布）提供了一种简单快速的替代方案。

```
library(readr)

x <- read_fwf(
  file="http://www.cpc.ncep.noaa.gov/data/indices/wksst8110.for",   
  skip=4,
  fwf_widths(c(12, 7, 4, 9, 4, 9, 4, 9, 4))) 
```

速度比较： 比 .`readr::read_fwf()`快约 2 倍`utils::read.fwf ()`。

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2014-06-12T21:42:00.613

另一种确定宽度的方法...

```
df <- read.fwf(
  file=url("http://www.cpc.ncep.noaa.gov/data/indices/wksst8110.for"),
  widths=c(-1, 9, -5, 4, 4, -5, 4, 4, -5, 4, 4, -5, 4, 4),
  skip=4
) 
```

widths 参数中的 -1 表示应该忽略一个单字符列，widths 参数中的 -5 表示应该忽略一个五字符列，同样...

参考：[https ://www.inkling.com/read/r-cookbook-paul-teetor-1st/chapter-4/recipe-4-6](https://www.inkling.com/read/r-cookbook-paul-teetor-1st/chapter-4/recipe-4-6)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-10-17T18:35:40.310

首先，这个问题直接来自 Leeks 的 Coursera“获取数据并清理它”课程。虽然问题的另一部分，但困难的部分是阅读文件。

也就是说，该课程主要用于学习。

我讨厌 R 的固定宽度程序。它很慢，并且对于大量变量，否定某些列等很快就会变得很痛苦。

我认为它更易于使用`readLines()`，然后从该用途`substr()`中生成变量

```
x <- readLines(con=url("http://www.cpc.ncep.noaa.gov/data/indices/wksst8110.for"))

# Skip 4 lines
x <- x[-(1:4)]

mydata <- data.frame(var1 = substr(x, 1, 10),
                     var2 = substr(x, 16, 19),
                     var3 = substr(x, 20, 23),
                     var4 = substr(x, 29, 32)  # and so on and so on
                     ) 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2015-04-10T10:20:15.277

您现在可以使用`read_fwf()`Hadley Wickham`readr`包中的函数。

*   公告：http : [//blog.rstudio.org/2015/04/09/readr-0-1-0/](http://blog.rstudio.org/2015/04/09/readr-0-1-0/)
*   开发页面：[https ://github.com/hadley/readr](https://github.com/hadley/readr)
*   CRAN 页面：[http ://cran.r-project.org/web/packages/readr/index.html](http://cran.r-project.org/web/packages/readr/index.html)

与 base 相比，预计会有巨大的性能提升`read.fwf()`。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-03-31T14:34:18.133

我[在这里](https://stackoverflow.com/a/34190156/3576984)记录了在 R 中读取固定宽度文件的替代方案列表，并提供了一些最快的基准。

我首选的方法是结合`fread`; `stringi`它作为最快的方法具有竞争力，并且具有将数据存储为的额外好处（IMO）`data.table`：

```
library(data.table)
library(stringi)

col_ends <- 
  list(beg = c(1, 10, 15, 19, 23, 28, 32, 36,
               41, 45, 49, 54, 58),
       end = c(9, 14, 18, 22, 27, 31, 35,
               40, 44, 48, 53, 57, 61))

data = fread(
  "http://www.cpc.ncep.noaa.gov/data/indices/wksst8110.for", 
  header = FALSE, skip = 4L, sep = NULL
  )[, lapply(1:(length(col_ends$beg)),
             function(ii) 
               stri_sub(V1, col_ends$beg[ii], col_ends$end[ii]))
    ][ , paste0("V", c(2, 5, 8, 11)) := NULL]
#              V1   V3   V4   V6   V7   V9  V10  V12  V13
#    1: 03JAN1990 23.4 -0.4 25.1 -0.3 26.6  0.0 28.6  0.3
#    2: 10JAN1990 23.4 -0.8 25.2 -0.3 26.6  0.1 28.6  0.3
#    3: 17JAN1990 24.2 -0.3 25.3 -0.3 26.5 -0.1 28.6  0.3
#    4: 24JAN1990 24.4 -0.5 25.5 -0.4 26.5 -0.1 28.4  0.2
#    5: 31JAN1990 25.1 -0.2 25.8 -0.2 26.7  0.1 28.4  0.2
#   ---                                                  
# 1365: 24FEB2016 27.1  0.9 28.4  1.8 29.0  2.1 29.5  1.4
# 1366: 02MAR2016 27.3  1.0 28.6  1.8 28.9  1.9 29.5  1.4
# 1367: 09MAR2016 27.7  1.2 28.6  1.6 28.9  1.8 29.6  1.5
# 1368: 16MAR2016 27.5  1.0 28.8  1.7 28.9  1.7 29.6  1.4
# 1369: 23MAR2016 27.2  0.9 28.6  1.4 28.8  1.5 29.5  1.2 
```

* * *

请注意，`fread`自动去除前导和尾随空格 - 有时，这是不可取的，在这种情况下 set `strip.white = FALSE`.

* * *

我们也可以`ww`通过执行以下操作从列宽向量开始：

```
ww <- c(9, 5, 4, 4, 5, 4, 4, 5, 4, 4, 5, 4, 4)
nd <- cumsum(ww)

col_ends <-
  list(beg = c(1, nd[-length(nd)]+1L),
       end = nd) 
```

* * *

我们可以通过使用负索引来选择更稳健地排除哪些列，例如：

```
col_ends <- 
  list(beg = c(1, -10, 15, 19, -23, 28, 32, -36,
               41, 45, -49, 54, 58),
       end = c(9, 14, 18, 22, 27, 31, 35,
               40, 44, 48, 53, 57, 61)) 
```

然后在下一行替换`col_ends$beg[ii]`为和：`abs(col_ends$beg[ii])`

```
paste0("V", which(col_ends$beg < 0)) 
```

* * *

最后，如果您还希望以编程方式读取列名，您可以使用以下命令进行清理`readLines`：

```
cols <-
  gsub("\\s", "", 
       sapply(1:(length(col_ends$beg)),
              function(ii) 
                stri_sub(readLines(URL, n = 4L)[4L], 
                         col_ends$beg[ii]+1L,
                         col_ends$end[ii]+1L)))

cols <- cols[cols != ""] 
```

（请注意，将此步骤与合并`fread`需要创建表的副本以删除标题行，因此对于大型数据集效率低下）

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-01-17T16:43:11.317

我对 R 一无所知，但我可以为您提供一个匹配这些行的正则表达式：

```
\s[0-9]{2}[A-Z]{3}[0-9]{4}(\s{5}[0-9]+\.[0-9]+[ -][0-9]+\.[0-9]+){4} 
```

# sql - 一条 SQL 语句生成三张表

> ID：14383714
> 
> 赞同：0
> 
> 时间：2013-01-17T16:33:43.930
> 
> 标签：sql, netezza

我需要创建一个将生成三个表的 sql 语句。

我有单独的 SQL 代码，如果我单独运行，我可以生成三个表： 表 1

```
select t.TRADE_ID, t.TRADE_VERSION, t.TRADE_SOURCE_SYSTEM, tl.LINK_PARENT_ID, 
tl.LINK_PARENT_VERSION, tc.CHARGE_AMOUNT, tc.CHARGE_SCOPE FROM EQ_MO_TRADE (NOLOCK) t, EQ_MO_TRADE_CHARGE (NOLOCK) tc, EQ_MO_TRADE_LINKAGE (NOLOCK) tl 
WHERE t.TRADE_OID = tl.TRADE_OID
AND t.TRADE_OID = tc.TRADE_OID
AND tl.LINK_TYPE = 'Allocation'
AND tc.CHARGE_NAME = 'Commission'
AND tc.CHARGE_AMOUNT != 0.0 
```

表 2

```
 select aD.ALLOCATION_ID, aD.ALLOCATION_VERSION, aD.ALLOCATION_SOURCE_SYSTEM, 
    al.LINK_PARENT_ID, al.LINK_PARENT_VERSION, ac.CHARGE_AMOUNT FROM EQ_MO_ALLOCATION_DETAIL aD, EQ_MO_ALLOCATION_DETAIL_CHARGE ac, EQ_MO_ALLOCATION_INSTR_LINKAGE al, EQ_MO_ALLOCATION_INSTR aI 
    WHERE  aD.ALLOCATION_DETAIL_OID = ac.ALLOCATION_DETAIL_OID
    AND aD.ALLOCATION_INSTR_ID = aI.ALLOCATION_INSTR_ID
    AND aI.ALLOCATION_INSTR_OID = al.ALLOCATION_INSTR_OID
    AND ac.CHARGE_NAME = 'Commission'
    AND ac.CHARGE_AMOUNT != 0.0
    AND ac.CHARGE_AMOUNT != -1.0
    and aD.ALLOCATION_ID in 

 (select tl.LINK_PARENT_ID FROM EQ_MO_TRADE t, EQ_MO_TRADE_CHARGE tc, EQ_MO_TRADE_LINKAGE tl 
    where t.TRADE_OID = tl.TRADE_OID
    AND t.TRADE_OID = tc.TRADE_OID
    AND tl.LINK_TYPE = 'Allocation'
    AND tc.CHARGE_NAME = 'Commission'
    AND tc.CHARGE_AMOUNT != 0.0) 
```

所以表 2 从表 1 的列中提取输入。表 3 从表 2 的列中提取输入。

如何重构这些 SQL 语句以删除代码重复并轻松将列值传递到下一个表。

是否可以将这些 SQL 合二为一？

编辑：通过 DBVisualizer 查询 Netezza DB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:13:12.810

你当然可以！可能有助于确切了解您需要哪些列，但我相信以下内容应该有效。哦，最好总是明确地限定您的连接，而不是使用隐式连接语法（逗号分隔`FROM`子句）。

```
WITH Charged_Allocated_Commission (trade_id, trade_version, trade_source_system, link_parent_id, link_parent_version, charge_amount, charge_scope) AS
     SELECT t.trade_id, t.trade_version, t.trade_source_system,
            tl.link_parent_id, tl.link_parent_version, 
            tc.charge_amount, tc.charge_scope
     FROM Eq_Mo_Trade t
     JOIN Eq_Mo_Trade_Linkage tl
       ON tl.trade_oid = t.trade_oid
          AND tl.link_type = 'Allocation'
     JOIN Eq_Mo_Trade_Charge tc
       ON tc.trade_oid = t.trade_oid
          AND tc.charge_name = 'Commission'
          AND tc.charge_amount != 0.0)
SELECT cac.trade_id, cac.trade_version, cac.trade_source_system, 
       cac.link_parent_id, cac.link_parent_version, 
       cac.charge_amount, cac.charge_scope,
       ad.allocation_version, ad.allocation_source_system,  
       -- I'm fairly certain these are duplicates of cac.trade_version/_source_system...
       al.link_parent_id, al.link_parent_version,
       ac.charge_amount
FROM Charged_Allocated_Commission cac
JOIN Eq_Mo_Allocation_Detail ad
  ON ad.allocation_id = cac.link_parent_id
JOIN Eq_Mo_Allocation_Detail_Charge ac
  ON ac.allocation_detail_oid = ad.allocation_detail_oid
     AND ac.charge_name = 'Commission'
     AND ac.charge_amount NOT IN (0.0, -1.0)
JOIN Eq_Mo_Allocation_Instr ai
  ON ai.allocation_instr_id = ad.allocation_instr_id
JOIN Eq_Mo_Allocation_Instr_Linkage al
  ON al.allocation_instr_oid = ai.allocation_instr_oid 
```

如果不了解更多关于您的布局的信息，就很难知道还有什么可能被消除。
几点注意事项：

*   我假设`Eq_Mo_Trade_Charge.charge_amount`and`Eq_Mo_Allocation_Detail_Charge.charge_amount`是十进制/货币类型，而**不是**某种浮点/真实类型。如果它们是浮点数，则不仅条件不起作用，您也不会存储确切的数量。
*   将所有内容都以前缀的“噪音”`Eq_Mo_...`有点磨损。Netezza 是否不支持可以放置表的模式？

# php - 为什么 PHP 将 $_COOKIE 中的加号替换为空格？

> ID：14383715
> 
> 赞同：19
> 
> 时间：2013-01-17T16:33:44.067
> 
> 标签：php, cookies, setcookie

因此，根据我对 PHP 和 cookie 的理解，如果我使用该`setcookie()`函数，那么我会得到一个自动 url 编码的 cookie。当我进入`$_COOKIE`数组时，我应该取回 cookie，自动对 url 进行解码。问题是，当我查看`$_COOKIE`.

假设我有一个值为“Name|ID|Email”的 cookie，例如：

> 乔|123|my+email@somewhere.com

这将被编码为：

> 乔%7C123%7Cmy%2Bemail%40somewhere.com

注意加号是编码的，所以理论上我应该把它解码回来。由于这是在 中自动完成的`$_COOKIE`，所以我应该找回我开始的内容。但相反，我回来了：

> 乔|123|我的电子邮件@somewhere.com

注意加号所在的空间。`urldecode()`如果我在 cookie 上运行一个附加项，这就是我所期望的。但我不是，所以我不知道为什么我会得到一个空间而不是一个加号。

另一个有趣的转折。页面上的刷新似乎会产生正确的输出。任何想法为什么它会这样？

仅供参考，要设置初始 cookie，我使用 javascript 和`escape()`脚本来生成编码字符串。这可能是javascript和PHP之间的一个交接问题吗？

想法将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T16:55:25.903

值得注意的是，“%20”和“+”都是空格字符的有效编码。根据关于[URL 编码](http://en.wikipedia.org/wiki/URL_encoding "维基百科：URL 编码")的 Wikipedia 文章（已添加重点）：

> 当提交已输入 HTML 表单的数据时，表单字段名称和值将被编码并使用方法 GET 或 POST 或过去通过电子邮件在 HTTP 请求消息中发送到服务器。默认使用的编码基于通用 URI 百分比编码规则的早期版本，**并进行了许多修改，例如换行规范化和用 "+" 而不是 "%20" 替换空格**。以这种方式编码的数据的 MIME 类型是 application/x-www-form-urlencoded，目前在 HTML 和 XForms 规范中定义（仍然以非常过时的方式）。

更具体地与 PHP 和 JavaScript 相关，请参阅此问题的最佳答案：

[何时将空格编码为加号 (+) 或 %20？](https://stackoverflow.com/questions/2678551/when-to-encode-space-to-plus-and-when-to-20)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:09:38.473

如果不想自动对 cookie 进行编码，可以使用[setrawcookie](http://php.net/manual/en/function.setrawcookie.php)函数。
此函数的例外是，您不能使用这些字符： (,; \t\r\n\013\014) ：

```
setrawcookie("NAME","Joe|123|my+email@somewhere.com");  

# Output in browser:   
Joe|123|my+email@somewhere.com 

# Output in PHP `echo $_COOKIE['NAME']`:  
Joe|123|my email@somewhere.com 
```

使用 PHP 5.3 测试

```
setcookie("NAME","Joe|123|my+email@somewhere.com");

# Output in browser:  
Joe%7C123%7Cmy%2Bemail%40somewhere.com  

# Output in PHP echo $_COOKIE['NAME']`:  
Joe|123|my+email@somewhere.com 
```

**now ：**作为另一种方法，您可以使用`setcookie()`, 和[rawurldecode()](http://php.net/manual/en/function.rawurlencode.php)对其进行解码：

```
 echo rawurldecode($_COOKIE['NAME']) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T17:15:48.340

首先，PHP 将始终在 JavaScript 之前运行 - 它是服务器端而不是客户端，因此在您刷新页面之前，您使用 JavaScript 设置的 cookie 实际上对 PHP 不可用（因此出现了这个问题）。

下一个 JavaScript 有不同的方式来编码字符串；只有一个会自动使用 PHP。

所以：

```
document.cookie = "testuser=" + "Joe|123|my+email@somewhere.com";
// Joe|123|my email@somewhere.com (when decoded by PHP)

document.cookie = "testuser=" + escape("Joe|123|my+email@somewhere.com");
// Joe|123|my email@somewhere.com (when decoded by PHP)

document.cookie = "testuser=" + encodeURI("Joe|123|my+email@somewhere.com");
// Joe|123|my email@somewhere.com (when decoded by PHP)

document.cookie = "testuser=" + encodeURIComponent("Joe|123|my+email@somewhere.com");
// Joe|123|my+email@somewhere.com 
```

所以，为了测试而试试这个（记住你需要刷新页面才能看到 cookie 值）：

```
<html>
<head>
    <title>Cookie Juggling</title>
    <script type="text/javascript">
        document.cookie = "testuser=" + encodeURIComponent("Joe|123|my+email@somewhere.com");
    </script>
</head>

<body>
    <div><?php echo !empty($_COOKIE['testuser']) ? $_COOKIE['testuser'] : "Cookie not set yet"; ?></div>
</body>
</html> 
```

# css - ColdFusion 日期字段干扰其他 CSS

> ID：14383719
> 
> 赞同：4
> 
> 时间：2013-01-17T16:34:28.747
> 
> 标签：css, html, coldfusion, cfinput

当我添加 cfinput type="datefield" 时，ColdFusion CFIDE/脚本会干扰页面上的另一个 div。

> 好的：
> 
> ![正确浮动](../Images/4c0cb7247716d9faefc8b3010d63de6a.png)
> 
> 坏的：
> 
> ![没有正确浮动](../Images/68b56ed60ca45e5fdb23904e73ed864b.png)

编码：

```
<aside id="sideLeft">
<--- CMS generated --->
<div  class="ktcssmenu thenav_ff_green"><div class="ktvertical ktopts_showtimeout_100 ktopts_hidetimeout_100 ktopts_imgreplace_no ktopts_imgreplacestyle_img ktopts_imgdir_ ktopts_imgnames_">
<ul class='lev1 clearfix'><li class="lev1 pos1 lev1_pos1 first lev1_first"><a href="/hr/index.cfm" class="lev1 pos1 lev1_pos1 first lev1_first" target="_self">Human Resources Home</a></li>
<li class="lev1 pos2 lev1_pos2 last lev1_last"><a href="http://www.blah.com/hr" class="lev1 pos2 lev1_pos2 last lev1_last" target="_new">Public Site</a></li>
</ul></div></div>
<--- regular non-CMS code --->
        <div class="gspecial">
            Restricted Access
            <a href="url.cfm">New Hire Forms</a>
            <a href="url.cfm">Jobs / Employment Admin</a>
            <a href="url.cfm">Eligibility Lists Admin</a>
        </div>  
... 
```

CSS：

```
#sideLeft {
    float: left;
    width: 230px;
    margin-left: -100%;
    position: relative;
    padding: 10px 10px 10px 10px;
    background-color: #f5f5f5;
    border: 1px solid #d5d5d5;
    }
/* test */
.thenav_ff_green {
    border: dashed 5px #990000;
    } 
.gspecial {
    border: dotted 5px #003333;
    } 
```

* * *

该网站正在使用 CMS，我无法在“绿色”预打包导航中进行太多编辑。

引起我头痛的 ColdFusion CFIDE/脚本是 /CFIDE/scripts/ajax/ext/adapter/yui/ext-yui-adapter.js

我尝试过各种 CSS 清除和浮动。

我愿意再次尝试任何事情。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T21:21:06.157

我觉得最好的解决方案是不使用 cfinput，而是尝试这样的事情：http: [//jqueryui.com/datepicker/#icon-trigger](http://jqueryui.com/datepicker/#icon-trigger)

然后，您将对样式和功能有更多的控制权，因为它是您可以实际编辑的东西，而不仅仅是接收 js/css cfinput 中提供的任何内容。

否则，您可能只需要使用 firebug 来查找导致问题的确切原因，然后添加一些额外的 css 来修复它。

像这样的 CSS 错误很难在没有示例页面的情况下进行调试。你有什么办法可以把它煮成一个可以与我们分享的页面？

# c++ - 'this' 类型为“Class* const”，即使方法不是 const

> ID：14383724
> 
> 赞同：4
> 
> 时间：2013-01-17T16:34:54.023
> 
> 标签：c++, constants

今天我注意到“this”的类型有些奇怪。如果你有这样的事情：

```
class C {
    void funcA() {
        funcB(this);
    }

    void funcB(C obj) {
        //do something
    }
}; 
```

你当然会得到一个错误，因为 funcB() 需要一个对象，而 'this' 是一个指针。我不小心忘记了星号，但对错误消息感到惊讶，因为它说：

```
no matching function for call to 'C::funcB(C* const)' 
```

当 funcA() 不是常量时，const 来自哪里？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T16:37:34.940

这就是说`this`指针*本身*——即`const`，您不能修改指针以指向不同的内存。

回到 C++ 的*早期*历史，在你可以重载`new`and`delete`或放置 new 之前，`this`是一个非常量指针（至少在 ctor 内部）。想要处理自己的内存管理的类通过在构造函数中为实例分配空间，并`this`在退出构造函数之前写入该内存的地址来实现。

在 const 成员函数中，您要处理的类型是`Class const *const this`，这意味着`this`指向的是`const`（以及指针本身`const`）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-17T16:37:17.937

`C* const`并不意味着类型的对象`C`是常量。那将是`C const*`或`const C*`。

`C* const`意味着指针本身是常量。

这是有道理的，因为你不能这样做

```
this = &something_else; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-17T16:37:58.267

`C const*`和之间有区别`C * const`。您需要了解其中的区别：

*   `C const*`意味着它是恒定的对象（由指针指向）。
*   `C * const`意味着它是指针本身是恒定的。

所以`this`根据定义是一个`C * const`类型的指针，所以它不能被修改，尽管它指向的对象仍然可以被修改。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-17T16:37:17.093

请注意，它不是`C const *`，而是`C* const`。即（从右到左读取）指向的常量指针`C`。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-17T16:38:51.650

指针本身是常量，而不是指向的数据。

# c# - 要使用的最佳标志值（提示和良好实践）

> ID：14383725
> 
> 赞同：4
> 
> 时间：2013-01-17T16:34:56.223
> 
> 标签：c#, enums, bit-manipulation, flags

在学习这项`flag`技术时，我遇到了一些问题，因此我使用 C# 和 Enum 来展示这个示例：

```
 [Flags]
    enum PermissionTypes : byte
    {
        None = 0x0,
        Read = 0x1,
        Write = 0x2,
        Modify = 0x4,
        Delete = 0x8,
        Create = 0x10,
        All = Read | Write | Modify | Delete | Create
    } 
```

检查 hasFlag 属性：

```
if((value & mask) == mask) {...} 
```

但是当 'hasFlag' 同时应用于 'None' 和 'Read' 时：

```
Denote x = Current_Permission_Setting,

x & PermissionTypes.None = always false
x & PermissionTypes.Read = always true IFF 
```

（续）IFF x = {**奇**字节值}

* * *

**问题：**可以安全使用的完美标志值集是什么？

* * *

**参考：** [这是完整的例子](http://www.codeproject.com/Articles/37921/Enums-Flags-and-C-Oh-my-bad-pun)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T16:41:49.067

正如@antlersoft 在评论中所说，您不能真正`NONE`用作位标志。
其余的标志是有意义的。您确实需要使用 2 的幂来获得每个标志 1 位。

无论如何，测试“Has READ and NONE”设置是没有意义的，因为 NONE 意味着没有设置 READ。

您用 X 的奇数值描述的问题似乎没有意义。仅当设置了位 1 时，该值才会是奇数。如果你一直使用你的标志，那么只有在 READ 为真时才会设置第 1 位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:49:20.773

`x & PermissionTypes.Read`检查是否设置了值的最后一位，`x`这本身没有任何意义，就像您发现的那样。程序员可以用几种方式解释它：

*   `x``Read`通过`x = Read`or设置了标志`x = x | Read`。
*   `x`是奇数（或者更准确地说，除以 2^1 时得到余数 1），类似于`x & 3`- 除以 2^2 时的提醒。

代表单个位值的标志通常在您显示的示例中使用。由程序员决定分配给每个标志的含义。

标志使用的另一个示例 - 通过检查“符号”位检查传入的整数是否为负：

```
[Flags]
enum StrangeFlags : uint {
    Negative = 0x80000000,
}

int x = -1;
var isNegative = ((StrangeFlags)x & StrangeFlags.Negative) != 0 
```

# ios - MKMapKit 不允许取消选择标注气泡

> ID：14383727
> 
> 赞同：1
> 
> 时间：2013-01-17T16:35:12.287
> 
> 标签：ios, objective-c, mapkit, callout

我想知道如何确保`callout`气泡不会在`MKMapView`.

每当我按地图（背景）时，此视图：
![有气泡](../Images/7d3f8ba1f9443dd66bccc2620d7a6ae2.png)

转为：
![无气泡](../Images/a84800539dce9b47d310a6c5ffbd769b.png)

我不想允许。但我确实想保持`callOutButton`支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:23:43.867

只要注释被取消选择（使用相应的委托方法），您就可以通过编程方式选择您的注释。如果您不对此选择进行动画处理，那么看起来注释就好像从未被取消选择一样。

例子：

```
// MKMapView Delegate 
- (void)mapView:(MKMapView *)mapView didDeselectAnnotationView:(MKAnnotationView *)view {
    // Replace "myAnnotation" with whichever annotation you need to remain selected
    [mapView selectAnnotation:self.myAnnotation animated:NO];
} 
```

我在一个测试项目中试过这个，它工作正常（它不会闪烁或任何东西）。它并不完全禁用取消选择，但产生的效果是相同的，因此它可能是一个很好的解决方法。

# csv - 连接所有值并将它们附加到同一个变量

> ID：14383728
> 
> 赞同：0
> 
> 时间：2013-01-17T16:35:11.893
> 
> 标签：csv, lua, append, concatenation

我正在尝试连接所有值并将它们附加到同一个变量，然后写入字符串的内容。我不断收到错误消息：“尝试连接全局 'arglist'（一个 nil 值）”

```
 eo_device = {}

  eo_device[1] = {node = "ME", t_object = "AV1", h_object = "AV2" }
  eo_device[2] = {node = "ME", t_object = "AV3", h_object = "AV4" }
  eo_device[3] = {node = "ME", t_object = "AV5", h_object = "AV6" }
  eo_device[4] = {node = "ME", t_object = "AV7", h_object = "AV8" }
  eo_device[5] = {node = "ME", t_object = "AV9", h_object = "AV10" }
  eo_device[6] = {node = "ME", t_object = "AV11", h_object = "AV12" }
  eo_device[7] = {node = "ME", t_object = "AV13", h_object = "AV14" }
  eo_device[8] = {node = "ME", t_object = "AV15", h_object = "AV16" }
  eo_device[9] = {node = "ME", t_object = "AV17", h_object = "AV18" }
  eo_device[10] = {node = "ME", t_object = "AV19", h_object = "AV20" }
  eo_device[11] = {node = "ME", t_object = "AV21", h_object = "AV22" }
  eo_device[12] = {node = "ME", t_object = "AV23", h_object = "AV24" }
  eo_device[13] = {node = "ME", t_object = "AV25", h_object = "AV26" }
  eo_device[14] = {node = "ME", t_object = "AV27", h_object = "AV28" }
  eo_device[15] = {node = "ME", t_object = "AV29", h_object = "AV30" }

-- Generate string with all arguments to be written to CSV
for deviceindex = 1,#eo_device do

 device_name = scl.nodes[eo_device[deviceindex].node][eo_device[deviceindex].t_object .. "_Object_Name"].value -- point to Object Names
 description = scl.nodes[eo_device[deviceindex].node][eo_device[deviceindex].t_object .. "_Description"].value -- point to Description of all objects     
 temperature = scl.nodes[eo_device[deviceindex].node][eo_device[deviceindex].t_object .. "_Present_Value"].value -- value of temperature object
 humidity = scl.nodes[eo_device[deviceindex].node][eo_device[deviceindex].h_object .. "_Present_Value"].value -- value of humidity object

 buflist = device_name .. "," .. description .. "," .. temperature .. "," .. humidity 

 arglist = arglist .. "," .. buflist  

 end -- end for

--then once outside of the loop:
arglist = arglist .. "," .. buflist 

buffer = os.date() .. arglist .. "\r\n"

file, info = io.open("trend.csv", "a+") -- write to CSV
if file then
file:write(buffer)
file:close()
end -- end if 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:14:23.233

> 我不断收到错误消息：“尝试连接全局 'arglist'（一个 nil 值）”

因为您试图`arglist`在代码的第 31 行连接（一个 nil 值）：

```
arglist = arglist .. "," .. buflist 
```

`arglist`从未初始化，因此当您尝试在 的右侧进行连接时`=`，您会收到该错误。

* * *

关于这个循环的旁注：

```
for deviceindex = 1,#eo_device do

    description = scl.nodes[eo_device[deviceindex].node][eo_device[deviceindex].t_object .. "_Description"].value 
```

Lua 有一个“通用”for 循环，它允许您遍历 的所有元素`eo_device`，为您提供索引*和*值，因此您不必在循环内建立索引。这将清理您的代码：

```
for deviceindex, device in ipairs(eo_device) do

    description = scl.nodes[device.node][device.t_object .. "_Description"].value 
```

* * *

关于此代码的旁注：

```
buflist = device_name .. "," .. description .. "," .. temperature .. "," .. humidity 
```

像这样构建字符串是非常低效的。在循环中执行此操作将导致数千个字符串连接并产生大量垃圾。更好的方法是将所有字符串部分添加到表中，然后通过`table.concat`.

例如，要创建一个包含`eo_device`表中所有字符串的逗号分隔字符串：

```
local buffer = {}

for i,device in ipairs(eo_device) do
    table.insert(buffer, device.node)
    table.insert(buffer, device.t_object)
    table.insert(buffer, device.h_object)
end

devices = table.concat(buffer, ',') 
```

# refresh - 如何在 Sencha Touch 2 中刷新标签面板项目

> ID：14383730
> 
> 赞同：1
> 
> 时间：2013-01-17T16:35:14.157
> 
> 标签：refresh, sencha-touch-2, tabpanel

我正在使用具有 4 个选项卡的选项卡面板（Ext.tab.Panel），当用户从单选按钮组中进行选择时，在其中一个子屏幕上，我希望选项卡面板能够自行刷新（即加载新文本，新图标）。如何强制选项卡面板（这是应用程序的核心导航元素）刷新？

我尝试在视图上设置 show: function() { } 方法，如下所示：

```
Ext.define('MyApp.view.Main', { 
    extend: 'Ext.tab.Panel',
...
    show: function() {
        this.callParent();
        ... reload stuff
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:10:30.070

a 中的选项卡/图标构成组件`Ext.tab.Panel`的`items`属性。要更改这些选项卡/图标，您必须更改项目。

用于[`setItems(items)`](http://docs.sencha.com/touch/2-0/#!/api/Ext.tab.Panel-method-setItems)有效地更改`Ext.tab.Panel`侦听器内部的选项卡/图标。

```
var tabpanel = Ext.getCmp('tabpanelid'); // Get appropriate panel using its id

// Removes the current tabs, and inserts the following 2 tabs
tabpanel.setItems([
    {
        title: 'Tab1',
        iconCls: 'info',
        html: 'Foo'
    },
    {
        title: 'Tab2',
        iconCls: 'reply',
        html: 'Bar'
    }
); 
```

[在这里查看一个工作示例。](http://www.senchafiddle.com/#FY3qi)

**更新：**要修改当前项目之一，请使用[`getItems()`](http://docs.sencha.com/touch/2-0/#!/api/Ext.tab.Panel-method-getItems)，修改适当的项目，然后调用`setItems(items)`。

[更新示例](http://www.senchafiddle.com/#ll8Pe)

# javascript - Javascript window.print() 无法识别窗口对象

> ID：14383733
> 
> 赞同：5
> 
> 时间：2013-01-17T16:35:22.807
> 
> 标签：javascript

我正在尝试提供一个按钮来在窗口上打开浏览器级别的打印对话框。我首先尝试了 window.print(); 在 an 上使用内联“onclick” `<input>`，然后在使用 jQuery 的输入上使用 click() 函数，并且在单击时都给出相同的错误：

> TypeError：对象[对象全局]的属性“打印”不是函数

我应该指出这是一个弹出窗口，但我认为这并不重要，除非在父页面上使用 window.print() 的任何形式都可以正常工作。

似乎某处的窗口对象必须发生某些事情，所以我在控制台中执行了以下操作：

**窗口名称**

“加入”

**窗口.self**

窗口{顶部：窗口，窗口：窗口，位置：位置，外部：对象，镀铬：对象...}

**窗口位置**

位置{分配：函数，替换：函数，重新加载：函数，祖先起源：DOMStringList，起源：“http://local.xxx.xxx:8080”…}

所以它看起来像窗口对象在那里并按预期定义。

我什至可以在同一个窗口对象上运行其他方法，如 close()、confirm()、alert()、scrollTo() 等，它们工作正常。那么为什么不打印（）？

页面的内容似乎并不重要，我还要说我们没有使用 iFrame 或框架。我确实将弹出窗口的所有内容替换为

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head></head>
<body>Foo</body>
</html> 
```

结果相同。所以我相当肯定我们的其他代码都没有干扰。

**编辑**

我用来触发 print() 的代码：

```
$('.foobar').click(function(){
    window.print();
}); 
```

现在我只是在控制台中进行操作。

按钮

```
<input type="button" class="foobar" value="Print" /> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-17T16:37:32.867

如果您有一个 id 为 的元素，就会发生这种情况`print`。

元素 ID 成为`window`（全局对象）的属性，隐藏任何现有的同名成员

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T17:11:50.800

我认为 SLaks 正在做某事。如果它不是 DOM 元素，您可以尝试使用 setter 函数来捕获任何可能定义全局变量的错误 javascript。在任何其他 javascript 之前在页面顶部粘贴这样的内容：

```
window.__defineSetter__(
    "print",
    function(){alert("GOTCHA!"); debugger;}
); 
```

在您的 javascript 调试器处于活动状态的情况下打开页面，它应该会在任何将 window.print 更改为其他内容时停止。向上调用堆栈查找有罪的一方。

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T17:11:50.493

解决。不是@SLaks 建议的确切方式，但它使我们走上了正确的轨道：

冉

```
window.__defineSetter__("print", function(){alert("GOTCHA!"); debugger;}); 
```

早些时候，发现上游的一个脚本正在定义打印：

```
var print = blah blah 
```

所以我们给 print() 方法起了别名：

```
window.realPrint = window.print; 
```

并使用它。这很 hacky，但在我们能够更彻底地解决上游问题之前，它会暂时起作用。无论如何，认为这种调试方法和小技巧可能对其他人有用。

# mysql - DB连接池过期了，怎么办？

> ID：14383735
> 
> 赞同：0
> 
> 时间：2013-01-17T16:35:30.113
> 
> 标签：mysql, jdbc, playframework, connection-pooling, c3p0

在我的连接池过期后，当我尝试并行打开比池中允许的最大连接数更多的连接时，我在尝试从池中获取连接时开始出现超时异常。

这是意料之中的，但是，池似乎处于该状态，自那一刻起我所做的所有其他事情都会得到相同的超时异常。好像池中的每个连接都处于忙碌状态，无法重用。我希望连接会随着时间的推移而释放，然后允许其他连接，但这并没有发生。

我正在使用带有 jdbc 驱动程序的 Play 1.2.5 到 mysql，从日志中我认为池是 C3P0。

我没有明确关闭连接，因为我相信在使用池时这样做是正确的，但我不是 100% 确定。

我不知道这是否可能是我正在使用的框架/库之一中的连接泄漏，或者我做错了什么或没有做我应该做的事情。

当我捕获其中一个超时异常时，正确的做法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:51:59.677

使用连接池时**必须**显式**关闭连接。**连接池具有与数据库的物理连接的集合。当您从池中请求连接时，它会将该物理连接标记为*正在使用*，并为您提供该连接的逻辑句柄。这个逻辑句柄本质上是一个包装器或代理，它将大多数方法调用（直接或经过一些修改）转发到物理连接。

当你调用`close()`这个逻辑句柄时，连接池会得到一个物理连接再次*可用*的信号（即：可以返回池中），逻辑句柄将从此表现为一个关闭的连接，但实际的物理连接连接仍然打开。如果您不调用`close()`，则连接池永远不会收到此信号，因此物理连接将保持*在使用中*且不可重复使用。

一些高级池配置允许池检测这种情况（例如使用超时，或者可能使用终结器等）并回收连接，但您不应该**依赖**它。

**TL;DR：**当您完成连接时，请始终调用`close()`您的连接，无论它来自连接池、非池化`DataSource`还是`DriverManager`.

# c# - 如何使用 Json.Net 序列化/反序列化具有附加属性的自定义集合

> ID：14383736
> 
> 赞同：30
> 
> 时间：2013-01-17T16:35:31.293
> 
> 标签：c#, .net, json, serialization, json.net

我有一个自定义集合（实现 IList），它有一些自定义属性，如下所示：

```
class FooCollection : IList<Foo> {

    private List<Foo> _foos = new List<Foo>();
    public string Bar { get; set; }        

    //Implement IList, ICollection and IEnumerable members...

} 
```

当我序列化时，我使用以下代码：

```
JsonSerializerSettings jss = new JsonSerializerSettings() {
    TypeNameHandling = TypeNameHandling.Auto
};
string serializedCollection = JsonConvert.SerializeObject( value , jss ); 
```

它正确地序列化和反序列化所有集合项；`FooCollection`但是，不考虑类中的任何额外属性。

反正有没有将它们包含在序列化中？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-17T17:34:26.117

问题如下：当一个对象实现时`IEnumerable`，JSON.net 将其标识为一个值数组并按照数组[Json 语法](http://www.w3schools.com/json/json_syntax.asp)（不包括属性）对其进行序列化，例如：

```
 [ {"FooProperty" : 123}, {"FooProperty" : 456}, {"FooProperty" : 789}] 
```

如果要序列化它并保留属性，则需要通过定义自定义来手动处理该对象的序列化`JsonConverter`：

```
// intermediate class that can be serialized by JSON.net
// and contains the same data as FooCollection
class FooCollectionSurrogate
{
    // the collection of foo elements
    public List<Foo> Collection { get; set; }
    // the properties of FooCollection to serialize
    public string Bar { get; set; }
}

public class FooCollectionConverter : JsonConverter
{
    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(FooCollection);
    }

    public override object ReadJson(
        JsonReader reader, Type objectType, 
        object existingValue, JsonSerializer serializer)
    {
        // N.B. null handling is missing
        var surrogate = serializer.Deserialize<FooCollectionSurrogate>(reader);
        var fooElements = surrogate.Collection;
        var fooColl = new FooCollection { Bar = surrogate.Bar };
        foreach (var el in fooElements)
            fooColl.Add(el);
        return fooColl;
    }

    public override void WriteJson(JsonWriter writer, object value, 
                                   JsonSerializer serializer)
    {
        // N.B. null handling is missing
        var fooColl = (FooCollection)value;
        // create the surrogate and serialize it instead 
        // of the collection itself
        var surrogate = new FooCollectionSurrogate() 
        { 
            Collection = fooColl.ToList(), 
            Bar = fooColl.Bar 
        };
        serializer.Serialize(writer, surrogate);
    }
} 
```

然后按如下方式使用它：

```
var ss = JsonConvert.SerializeObject(collection, new FooCollectionConverter());

var obj = JsonConvert.DeserializeObject<FooCollection>(ss, new FooCollectionConverter()); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2016-08-26T19:43:00.410

就我个人而言，我喜欢尽可能避免编写 custom `JsonConverter`，而是使用为此目的设计的各种 JSON 属性。您可以简单地用 装饰`FooCollection`，[`JsonObjectAttribute`](http://www.newtonsoft.com/json/help/html/JsonObjectAttributeOverrideIEnumerable.htm)这会强制序列化为 JSON 对象而不是数组。您必须装饰`Count`and`IsReadOnly`属性`JsonIgnore`以防止它们出现在输出中。如果你想保留`_foos`一个私有字段，你还必须用`JsonProperty`.

```
[JsonObject]
class FooCollection : IList<Foo> {
    [JsonProperty]
    private List<Foo> _foos = new List<Foo>();
    public string Bar { get; set; }  

    // IList implementation
    [JsonIgnore]
    public int Count { ... }
    [JsonIgnore]
    public bool IsReadOnly { ... }
} 
```

序列化产生如下内容：

```
{
  "_foos": [
    "foo1",
    "foo2"
  ],
  "Bar": "bar"
} 
```

显然，这仅在您能够更改定义`FooCollection`以添加这些属性时才有效，否则您必须采用自定义转换器的方式。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-09T23:02:45.173

如果您不想编写自定义`JsonConverter`或使用 JSON 属性 ( [JsonObjectAttribute](https://www.newtonsoft.com/json/help/html/JsonObjectAttributeOverrideIEnumerable.htm) )，您可以使用以下扩展方法：

```
public static string ToFooJson<T>(this FooCollection fooCollection)
{
     return JsonConvert.SerializeObject(new
     {
         Bar = fooCollection.Bar,
         Collection = fooCollection
     });
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-08-19T14:50:53.783

如果您还想保留列表或集合本身的内容，您应该考虑公开一个属性以返回列表。它必须被包装以防止序列化时出现循环问题：

**注意：**此解决方案同时支持**序列化**/**反序列**化。

```
[JsonObject]
public class FooCollection : List<int>
{
    public string Bar { get; set; } = "Bar";

    [JsonProperty]
    ICollection<int> Items => new _<int>(this);
}

internal class _<T> : ICollection<T>
{
    public _(ICollection<T> collection) => inner = collection;
    private ICollection<T> inner;
    int ICollection<T>.Count => inner.Count;
    bool ICollection<T>.IsReadOnly => inner.IsReadOnly;
    void ICollection<T>.Add(T item) => inner.Add(item);
    void ICollection<T>.Clear() => inner.Clear();
    bool ICollection<T>.Contains(T item) => inner.Contains(item);
    void ICollection<T>.CopyTo(T[] array, int arrayIndex) => inner.CopyTo(array, arrayIndex);
    IEnumerator<T> IEnumerable<T>.GetEnumerator() => inner.GetEnumerator();
    bool ICollection<T>.Remove(T item) => inner.Remove(item);
    IEnumerator IEnumerable.GetEnumerator() => inner.GetEnumerator();
} 
```

`new FooCollection { 1, 2, 3, 4, 4 }`=>

```
{
  "bar": "Bar",
  "items": [
    1,
    2,
    3
  ],
  "capacity": 4,
  "count": 3
} 
```

`new FooCollection { 1, 2, 3 }.ToArray()`=>`new []{1, 2, 3}.ToArray()`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-17T16:38:45.297

从 List 继承有效吗？

```
class FooCollection : List<Foo>, IList<Foo>
{
    public string Bar { get; set; }        
    //Implement IList, ICollection and IEnumerable members...
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-27T18:19:51.310

我最近正在测试类似的东西，并提出了以下示例（与[@Ahmed Alejo 的答案](https://stackoverflow.com/a/45772905/2263183)非常相似，但不需要公共属性），它不需要自定义序列化程序：

```
void Main()
{
    var test = new Container();
    test.Children.Add("Item 1");
    test.Children.Add("Item 2");
    test.Children.Add("Item 3");

    Console.WriteLine(JsonConvert.SerializeObject(test));
}

class Container {
    public CustomList Children { get; set; } = new CustomList() { Name = Guid.NewGuid().ToString() };
}

[JsonObject(MemberSerialization = MemberSerialization.Fields)]
class CustomList : IList<string>
{
    private List<string> items = new List<string>();
    private string name;

    public string this[int index] { get => items[index]; set => items[index] = value; }

    public string Name { get => name; set { name = value; } }

    public int Count => items.Count;

    public bool IsReadOnly => false;

    public void Add(string item)
    {
        items.Add(item);
    }

    public void Clear()
    {
        items.Clear();
    }

    public bool Contains(string item) => items.Contains(item);

    public void CopyTo(string[] array, int arrayIndex)
    {
        items.CopyTo(array, arrayIndex);
    }

    public IEnumerator<string> GetEnumerator() => items.GetEnumerator();

    public int IndexOf(string item) => items.IndexOf(item);

    public void Insert(int index, string item)
    {
        items.Insert(index, item);
    }

    public bool Remove(string item) => items.Remove(item);

    public void RemoveAt(int index)
    {
        items.RemoveAt(index);
    }

    IEnumerator IEnumerable.GetEnumerator() => ((IEnumerable)items).GetEnumerator();
} 
```

关键在于将显式添加`JsonObjectAttribute`到类中，这会将其视为对象而不是数组（也可以使用 显式表示`JsonArrayAttribute`）。上述测试的（美化）输出如下：

```
{
  "Children": {
    "items": [
      "Item 1",
      "Item 2",
      "Item 3"
    ],
    "name": "ff8768f7-5efb-4622-b7e2-f1472e80991c"
  }
} 
```

# facebook-graph-api - Graph API Search：返回不匹配的结果

> ID：14383737
> 
> 赞同：1
> 
> 时间：2013-01-17T16:35:32.213
> 
> 标签：facebook-graph-api, search

Facebook 帖子搜索不断返回非常奇怪的结果，每次我试图找出规则时，它都会变得更加混乱。我什至不是在谈论运算符和布尔逻辑，如 AND/OR。

例如，尝试搜索“橙色”一词。我的结果都包括“橙子”，但没有我最初寻找的术语：“橙子”。

有谁知道这可能是什么原因？

# javascript - Javascript/HTML — 两个不同列表的滑块

> ID：14383740
> 
> 赞同：0
> 
> 时间：2013-01-17T16:35:46.197
> 
> 标签：javascript, jquery, html

[参考这里的主题](https://stackoverflow.com/questions/4261363/javascript-html-toggle-visibility-automatically-causing-one-div-element-to-h)

我在这里使用这个模板来构建我的网站[//link](http://ramblingsoul.com/preview/rs15/)

在右边有一个显示不同列表项的 javascript

我正在尝试创建两个列表。用户可以单击顶部的链接并选择他想要查看的列表。

代码是这样的

```
<div id="right-column">

<a href="#" onclick="toggleVisibility('x');">X</a>

<a href="#" onclick="toggleVisibility('Y');">Y</a>

<div id="x" class="section">
<ul id="portfolio">
<li>...</li>
<li>...</li>
</ul>
</div>

<div id="y" class="section" style="display:hide">
<ul id="portfolio">
<li>...</li>
<li>...</li>
</ul>
</div>

</div> 
```

jQuery

```
$(document).ready(
                function(){
                    $('#news').innerfade({
                        animationtype: 'slide',
                        speed: 750,
                        timeout: 2000,
                        type: 'random',
                        containerheight: '1em'
                    });

                    $('ul#portfolio').innerfade({
                        speed: 1000,
                        timeout: 5000,
                        type: 'sequence',
                        containerheight: '220px'
                    });

                    $('.fade').innerfade({
                        speed: 1000,
                        timeout: 6000,
                        type: 'random_start',
                        containerheight: '1.5em'
                    });

                    $('.adi').innerfade({
                        speed: 'slow',
                        timeout: 5000,
                        type: 'random',
                        containerheight: '150px'
                    });
            }); 

function toggleVisibility(newSection) {
    $(".section").not("#" + newSection).hide();
    $("#" + newSection).show();
} 
```

可见性代码工作正常..

我的问题是：

1 滑块不适用于第二个列表

2 当我单击“Y”以显示第二个列表时，下面的 div 中的文本被下推

请帮忙..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:51:46.513

您列表中的重复 ID 将破坏 js 行为：

```
<ul id="portfolio"> 
```

在每个列表上都无法正常工作，每个页面的 ID 都必须是唯一的

# php - PHP 不会包含文件 - 而是显示数字？

> ID：14383742
> 
> 赞同：0
> 
> 时间：2013-01-17T16:35:49.890
> 
> 标签：php, module, include

我的 PHP webapp 遇到了一个非常奇怪的问题。我把它设计成模块化的，我的代码被分成更小的文件，所以它不会变得过于庞大。我的应用程序是一个非营利组织的资金申请管理系统，我遇到问题的模块计算并输出自申请提交以来的营业时间。

这个“时间”模块包含在我的应用程序的多个不同部分中。在某些地方，一切正常。然而，在一个特定的地方，模块似乎没有执行，而是输出了数字“12”。这可能是因为我的代码一次执行了太多操作，导致 PHP 内存不足吗？

“时间”模块：

```
<?php
/* Time Module
Added for Version: 1.1
Last Updated: 10/11/2012
*/

$timeSince = time() - (int)$item['timestamp']; //Calculate the number of seconds between now and the application's submission
$timeSince = $timeSince / 60 / 60; //60secs; 60mins - Convert the seconds to hours
$timeSince = round($timeSince); //Round up or down to give us a whole number

if( //Set the highlight color to green if we're within the review timeframe.
($timeSince <= 12 && $item['appStatus']=="0") ||
($timeSince <= 48 && $item['appStatus']=="1") ||
($timeSince <= 72 && $item['appStatus']=="2")
)
    $timeColor="#090";
elseif( //If we're slightly behind the timeframe, highlight as yellow
($timeSince <= 24 && $item['appStatus']=="0") ||
($timeSince <= 60 && $item['appStatus']=="1") ||
($timeSince <= 84 && $item['appStatus']=="2")
)
    $timeColor="#F90";
else //If we're far behind the timeframe, highlight as red
    $timeColor="#F33";
?>
Submitted: <?php echo date("F j, Y", $item['timestamp']) ?><br>

<?php if($item['appStatus']=="0" || $item['appStatus']=="1" || $item['appStatus']=="2") { ?>
<span style="color:<?php echo $timeColor ?>"><?php echo $timeSince ?></span> Hours Since Submission
<?php } ?> 
```

包含文件的代码（在一行操作按钮下）：

```
<div style="float:right; padding:10px; text-align:right;">
<?php if(isset($includePrefix)) { ?>
    <a href="appAssets/print.php?id=<?php echo $_GET['id'] ?>" target="_blank">
    <img src="appAssets/print.png" alt="Print This Application" align="middle" title="Print This Application" /></a>&nbsp;

    <a href="mailto:<?php echo $item['agencyEmail'] ?>">
    <img src="appAssets/email.png" alt="Email Agency" align="middle" title="Email Agency" /></a>

    <?php if(!$hide) { ?>
        <a href="#" id="disbursementLink">
        <img src="appAssets/dollar.png" alt="Disbursment Instructions" align="middle" title="Disbursement Instructions" /></a>
    <?php } ?>
    <br />
<?php } ?>

<?php include_once("time.php") ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:59:14.507

当我打开错误报告时，我发现由于某种原因，它包含了另一个名为“time.php”的文件，该文件位于站点的根目录中。这个特定的文件是我正在处理的一个测试脚本，我试图计算两个日期之间的营业时间（如果有人感兴趣，我可以分享它）。该文件输出数字“12”，因为那是我正在使用的测试日期之间的时间。

我的 webapp 由一个包含多个目录级别的 web 组成，因此 PHP 在这种情况下必须遵循它的规则。原始脚本的执行从站点的根目录开始，因此它必须先在那里查找文件，然后再查找子目录（“time”模块包含在另一个模块中，该模块位于“modules”子目录中）。由于站点根目录中有一个“time.php”，模块目录中有一个“time.php”，因此它倾向于站点根目录中的那个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:40:43.960

PHP 内存不足会产生一个非常具体的“内存不足”致命错误。我怀疑你的脚本正在做一些会使 PHP 耗尽内存的事情，因为你没有处理任何内存密集型的东西（没有图像/视频处理，没有加载大量的 SQL 数据）。

由于您没有看到错误，只是一个奇怪的输出 (12) 我假设您没有激活错误报告：

```
error_reporting(E_ALL); // or other level if it's more convenient
ini_set('display_errors', TRUE); // outputs errors to the browser
ini_set('scream.enabled', TRUE); // ignores the `@` error silencing operator 
```

如果没有错误（忽略通知和警告），那么您的代码很可能正在运行。问题变成了协调代码的编写方式和它的预期工作方式。

在一种`procedural programming`方法中，您使用的变量是全局的。退出过程范围（在右括号之后）或退出模块范围（在一个文件结束之后）时，环境不会取消设置这些变量。

像这样的环境可以允许在某个时候设置全局变量，并且代码的另一部分可以稍后尝试使用它 - 期望它具有不同的值。甚至更有可能——当多次调用一个模块时，它的变量继续具有它们在上次执行时的值。

# sql - JPA @ManyToOne 字段为空

> ID：14383744
> 
> 赞同：0
> 
> 时间：2013-01-17T16:36:00.240
> 
> 标签：sql, jpa, playframework

我花了几个小时寻找如何解决这个问题。当我试图从一个孩子那里得到父母时，除了它的 id 字段都是空的。这没有任何意义。如果这可能表明任何事情（除了糟糕的框架选择），我正在使用 PlayFramework 2.0.4。

TRoute.java（父）

```
@Entity  
@Table(name="routes")
public class TRoute extends Model {

    @Id
    public String route_id;
    public String agency_id;
    @Constraints.Required
    public String route_short_name;
    @Constraints.Required
    public String route_long_name;
    public String route_desc;
    @Constraints.Required
    public String route_type;
    public String route_url;
    public String route_color;
    public String route_text_color;

    @OneToMany(mappedBy="troute")
    public List<Trip> trips;

    public static Finder<String, TRoute> find = new Finder(
            String.class, TRoute.class
    );

} 
```

Trip.java（子）

```
@Entity  
@Table(name="trips")
public class Trip extends Model {

    @Constraints.Required
    public String route_id;
    @Constraints.Required
    public String service_id;
    @Id
    public String trip_id;
    public String trip_headsign;
    public String direction_id;
    public String block_id;
    public String shape_id;

    @ManyToOne
    @JoinColumn(name="route_id")
    public TRoute troute;

    public static List<Trip> byRouteId(String route_id) {
        List<Trip> trips = 
            Trip.find
            .where().like("route_id", route_id)
            .findList();
        return trips;
    }

    public static Finder<String, Trip> find = new Finder(
            String.class, Trip.class
    );

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:26:19.660

finder 有一个 fetch() 方法，可用于加载另一个表的属性。就像是：

```
public static List<Trip> byRouteId(String route_id) {
    List<Trip> trips = List<Trip> trips = Trip.find
        .fetch("troute") // fetch the other table's properties here
        .where()
        .like("route_id", route_id)
        .findList();
    return trips;
} 
```

# php - 无法发布到 Facebook 页面

> ID：14383750
> 
> 赞同：0
> 
> 时间：2013-01-17T16:36:22.567
> 
> 标签：php, facebook

我正在尝试设置我的 WP 网站，以便在发布帖子时将其发送到 Facebook 页面。不幸的是，我无法让它发挥作用。下面的代码被包括在内，但似乎什么也没做（可能 FB 正在发回一个错误，但 WP 没有显示它）。

当我尝试访问我希望发布的页面的提要（下）时，我被告知我没有正确的权限（也在下）

> [https://graph.facebook.com/163797013684290/feed](https://graph.facebook.com/163797013684290/feed)

```
/** The error I recieve when visiting the above page */
{
   "error": {
      "message": "An access token is required to request this resource.",
      "type": "OAuthException",
      "code": 104
   }
} 
```

到目前为止，我已经完成了这些设置 -

1.  访问[Graph API Explorer](http://developers.facebook.com/tools/explorer/)
2.  从下拉菜单中选择我希望发布到我的主页的应用程序
3.  单击“获取访问令牌”
4.  选择了“manage_pages”权限
5.  重新登录，授予应用访问我的页面的权限
6.  创建了以下脚本，包含已生成的访问令牌。

请有人帮忙，因为我不知道从这里去哪里。谢谢。

* * *

```
class Publish_To_Facebook{

    /**
     * The ID of the Page to edit
     *
     * @var string
     * @access private
     */
    private $page_id = '163797013684290';   

    /**
     * The Page access token given to the application set up to post to the Page
     *
     * @var string
     * @access private
     */
    private $page_access_token = 'my_access_token'; 

    /**
     * The back-end service for Page's wall
     *
     * @var string
     * @access private
     */
    private $post_url = '';

    /**
     * Constructor
     */
    public function __constructor(){

        $this->post_url = 'https://graph.facebook.com/'.$this->page_id.'/feed';

    }

    /**
     * Manages the POST message to post an update on a page wall
     * 
     * @param array $data
     * @return string the back-end response
     */
    public function message($data){

        /** Grab the $page_access_token */
        $data['access_token'] = $this->page_access_token;

        /** Initiate CURL */
        $ch = curl_init();

        curl_setopt($ch, CURLOPT_URL, $this->post_url);
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $data);

        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

        /** Execute and close CURL */
        $return = curl_exec($ch);
        curl_close($ch);

        return $return;

    }
}

$to_post = array(
    'message'     => 'The status header', 
    'link'        => 'http://theurltopoint.to', 
    'picture'     => 'http://thepicturetoinclude.jpg',
    'name'        => 'Name of the picture, shown just above it', 
    'description' => 'Full description explaining whether the header or the picture'
);
$facebook = new Publish_To_Facebook();
$facebook->message($to_post); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:40:37.687

以下行没有提及您的`$page_access_token`...

```
$this->post_url = 'https://graph.facebook.com/'.$this->page_id.'/feed'; 
```

你需要类似下面的东西......

```
$this->post_url = 'https://graph.facebook.com/'.$this->page_id.'/feed?access_token='.$this->page_access_token; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:50:00.553

我认为你应该看看这个页面来修复它。它描述了整个过程。

[作为页面登录](https://developers.facebook.com/docs/howtos/login/login-as-page/)

以下是有关页面访问令牌的文档中的一些信息：

> 页面访问令牌
> 
> 要以 Page 而非当前用户的身份执行以下操作，您必须使用 Page 的访问令牌，而不是通常用于读取 Graph API 对象的用户访问令牌。可以通过向具有 manage_pages 权限的 /USER_ID/accounts 发出 HTTP GET 来检索此访问令牌。这将返回用户具有管理权限的页面列表（包括应用程序配置页面），以及这些页面的 access_tokens。或者，您可以通过向具有 manage_pages 权限的 /PAGE_ID?fields=access_token 发出 HTTP GET 来获取单个特定页面的页面访问令牌，如上所述。除非另有说明，否则发布到页面还需要 publish_stream 权限。

[来源](https://developers.facebook.com/docs/reference/api/page/#page_access_tokens)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:43:40.390

作为替代方案，您可以使用 twitterfeed.com 自动将您的帖子提交到 Facebook，并提供其他几个选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T18:18:43.427

您从 Graph API 浏览器获得的`access_token`不是永久的。您需要至少每两个月刷新一次，或者在您退出 Facebook 的任何时候刷新。

与其自己从头开始编写代码，不如使用 Facebook PHP SDK？您将可以使用应用的 ID 和密码永久访问您的页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T13:04:34.417

我个人会说放弃 curl 并使用 PHP SDK。为您的网站分配自己的应用程序密码等，并将它们链接到您的代码。

现在，您要问自己的下一件事是，我是要复制 facebook 上的文章，还是要链接到 facebook 上的文章？

就个人而言，我会选择链接选项，在这种情况下，您想发布到 LINK 流。

如果您作为链接发布，那么它将看起来像一个正确的链接帖子，显示您的帖子的缩略图和摘要。您可以使用 OG 元标记调整那里显示的内容。

您可以将整篇文章直接发布到提要中，但这真的是您想要的吗？

这个答案在理论上很长，在代码上很短。如果您需要更多帮助，请根据我上面所说的具体说明您想要什么。

# .net - VB 表单发送一封电子邮件，其中包含文本文件中的表单字段作为附件

> ID：14383756
> 
> 赞同：0
> 
> 时间：2013-01-17T16:36:38.873
> 
> 标签：.net, vb.net, winforms, email, email-attachments

我是 VB 表单的新手，但如果可能的话，我需要一些建议。我想将表单字段作为单行管道分隔的文本文件附件通过电子邮件发送。因此，当您打开发送的电子邮件时，它将附加 *.txt 文件，第一行将如下所示

```
textbox1_value|textbox2_value|textbox3_value 
```

这是我的电子邮件代码：

```
Imports System.Net.Mail

Public Class Form1

    Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
        Using message As New MailMessage()
            'set to the from, to and subject fields
            message.From = New MailAddress(TextBox2.Text.ToString())
            message.[To].Add(New MailAddress("steve@steve.com"))
            message.Subject = "Certificate alert"
            'code the message body
            Dim MsgBody As String
            MsgBody = TextBox2.Text.ToString() & vbCr & _
                      TextBox3.Text.ToString() & vbCr & _
                      TextBox4.Text.ToString()
            message.Body = MsgBody
            Dim client As New SmtpClient()
            client.Host = "mailhost"
            client.Send(message)
        End Using
        'display submitted box
        MessageBox.Show("Your Incident has been submitted!", "Congratulations!")
        'close form
        Me.Close()
    End Sub
End Class 
```

任何想法将不胜感激

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:44:23.140

您可以将属于附件中的文本保存到文本文件中，然后：

```
message.Attachments.Add(New Attachment("filename"))
system.io.file.delete("filename") ' delete the file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:40:28.680

在磁盘上创建文件

```
Dim filename as String = "C:\Somefile.txt"
My.Computer.FileSystem.WriteAllText(filename, "value1|value2|value3") 
```

然后附加到您的邮件中：

```
Dim att as New System.Net.Mail.Attachment(filename)
message.Attachments.Add(att) 
```

之后不要忘记删除您的文件

# c - 警告：左移计数 >= 类型宽度

> ID：14383757
> 
> 赞同：3
> 
> 时间：2013-01-17T16:36:41.343
> 
> 标签：c, enums, 64-bit

我已经在我的头文件中声明了这个枚举：

```
enum wildcard {
  ....
  ....
  NW_SRC  = 0x111UL << 40,
  ....
}; 
```

当我编译它时，我收到以下警告：

```
warning: left shift count >= width of type [enabled by default] 
```

`int`我认为这是因为枚举类型被编译器视为一个。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:44:16.880

您有两个不同的问题，首先是操作，然后是常量的声明。

对于操作，您可以使用提供的宏`inttypes.h`

```
UINT64_C(0x111) << 40 
```

有一个适当宽度的常数。

但是枚举常量是由标准定义的，因此如果在您的平台上只有 32 位宽（很可能）`int`，这将无法帮助您定义一个足够大以容纳该值的枚举常量。`int`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T16:38:55.910

您平台上的`UL`可能是 32 位的。您可能需要`ULL`改用：

```
enum wildcard {
    ....
    ....
    NW_SRC  = 0x111ULL << 40,
    ....
}; 
```

这将修复警告，但表达式的结果可能不一定适合 an `enum`（有关详细信息和对相关标准文档的引用，请参阅[此答案）。](https://stackoverflow.com/a/366026/335858)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T16:39:19.483

`UL`是无符号长的，但大多数编译器上的长是 32 位的。你想要`ULL`unsigned long long。

**但**正如 Jens Gustedt 在他们的回答中正确指出的那样，在 C 中，枚举不能保存大于 int 的值，所以这无济于事。相比之下，C++ 确实允许用更大的整数类型来表示枚举。

# c++ - 运行 OpenNI 2 类（gcc 4.7.2 / ubuntu 12.10）时出错

> ID：14383759
> 
> 赞同：2
> 
> 时间：2013-01-17T16:36:48.257
> 
> 标签：c++, openni, gcc4.7

我正在尝试编译运行下面给出的一个非常基本的程序（test.cpp），它调用 OpenNI 类。您可以在此处查看它们所在的文件和目录。抱歉，有些字符在浏览器的编码中有点搞砸了。我正在使用 linux 命令：tree，如果您知道更好的命令，请告诉我，我会更新它。

[文件结构](http://evanrolfe.info/file_structure_for_stackoverflow_question.txt)

我在[这里](http://www.openni.org/wp-content/doxygen/html/getting_started.html)遵循指南，请参阅“GCC / GNU Make”。

```
#include < stdio.h > 
#include < OpenNI.h > 

using namespace openni; 

int 
main ( void ) 
{ 
    Status rc = OpenNI::initialize(); 

    if (rc != STATUS_OK) 
    { 
        printf("\nInitialize failed\n%s\n", OpenNI::getExtendedError()); 
        return 1; 
    } 

    printf("Hello, world!\n"); 
    return 0; 
} 
```

这是我在命令行中运行的编译它（gcc 4.7.2）：

```
gcc test.cpp -I../OpenNI-2.0.0/Include -L/home/evan/Code/OpenNi/Init -l OpenNI2 -o test 
```

这工作正常，但是当我运行 ./test 时，我收到以下错误：

```
Initialize failed 
DeviceDriver: library handle is invalid for file libOniFile.so 
Couldn't understand file 'libOniFile.so' as a device driver 
DeviceDriver: library handle is invalid for file libPS1080.so 
Couldn't understand file 'libPS1080.so' as a device driver 
Found no valid drivers in './OpenNI2/Drivers' 
```

谢谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:27:46.843

导游的指示说，

> 强烈建议将**“-Wl,-rpath ./”**添加到您的链接命令中。否则，运行应用程序时，运行时链接器将找不到 libOpenNI.so 文件。（默认的 Linux 行为是仅在 /lib 和 /usr/lib 中查找共享对象）。

看来您确实遇到了这个问题——它找不到一些库。尝试将正确的 rpath（在您的情况下似乎是 /home/evan/Code/OpenNi/Init/OpenNI2/Drivers ）添加到您的编译字符串中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-17T07:47:06.967

在用 Eclipse 编译这个小小的“Hello World”并尝试在命令行中运行它之后，我遇到了同样的问题。“Wl,-rpath=./”对我不起作用。正如[这里](https://github.com/ros-drivers/openni2_camera/issues/10)所讨论的，它在设置一些环境后对我有用。执行前的变量：

```
export LD_LIBRARY_PATH="/path/to/OpenNI2:$LD_LIBRARY_PATH"
export OPENNI2_DRIVERS_PATH="/path/to/OpenNI2/Drivers"
export LD_LIBRARY_PATH="/path/to/OpenNI2/Drivers:$LD_LIBRARY_PATH" 
```

在某个地方，我得到了前两行应该足够的信息，但第三行很重要。我也只使用第三行。

# perl - 使用 XML::Twig 复制 XML 值

> ID：14383761
> 
> 赞同：1
> 
> 时间：2013-01-17T16:37:09.717
> 
> 标签：perl, xml-parsing, xml-twig

`ExternalId`我已经嵌套了XML 标记，并且需要将`Product`XML 中的值添加到`ProductPageURL`使用`XML::Twig`.

```
<Products>
    <Product>
      <ExternalId>317851</ExternalId>
      <ProductPageUrl></ProductPageUrl>
    </Product>
    <Product>
      <ExternalId>316232</ExternalId>
      <ProductPageUrl></ProductPageUrl>
    </Product>
    <Product>
      <ExternalId>13472</ExternalId>
      <ProductPageUrl></ProductPageUrl>
    </Product>
</Products> 
```

预期结果：

```
<Products>
    <Product>
      <ExternalId>PF317851</ExternalId>
      <ProductPageUrl>317851</ProductPageUrl>
    </Product>
    <Product>
      <ExternalId>PF316232</ExternalId>
      <ProductPageUrl>316232</ProductPageUrl>
    </Product>
    <Product>
      <ExternalId>PF13472</ExternalId>
      <ProductPageUrl>13472</ProductPageUrl>
    </Product>
    </Products> 
```

我使用以下逻辑`XML::Twig`：

```
my $twig = XML::Twig->new( 
        twig_handlers => {      
            'Product/ExternalId' => sub {
                $_->prefix( 'PF' );
            },
             'Product/ProductPageUrl' => sub {
                $_->set_text($_->get('Product/ExternalId'));
            }, 

        },
        pretty_print => 'indented',
    keep_encoding => 1,
    )->parsefile($xml_path_filename )->print_to_file($xml_path_filename); 
```

你能告诉我如何使代码更容易吗？我无法达到预期的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:00:07.870

这是一种方法：

```
use warnings;
use strict;
use XML::Twig;

my $twig = XML::Twig->new( 
    twig_handlers => {      
        Product => \&prod,
    },
    pretty_print => 'indented',
    keep_encoding => 1,
);

$twig->parse(q(
<Products>
    <Product>
      <ExternalId>317851</ExternalId>
      <ProductPageUrl></ProductPageUrl>
    </Product>
    <Product>
      <ExternalId>316232</ExternalId>
      <ProductPageUrl></ProductPageUrl>
    </Product>
    <Product>
      <ExternalId>13472</ExternalId>
      <ProductPageUrl></ProductPageUrl>
    </Product>
</Products>
));

$twig->print();

sub prod {
    my ($t, $prod) = @_;
    my $extid = $prod->first_child('ExternalId');
    my $id = $extid->text();
    $extid->prefix('PF');
    my $url = $prod->first_child('ProductPageUrl');
    $url->set_text($id);
} 
```

**输出**

```
<Products>
  <Product>
    <ExternalId>PF317851</ExternalId>
    <ProductPageUrl>317851</ProductPageUrl>
  </Product>
  <Product>
    <ExternalId>PF316232</ExternalId>
    <ProductPageUrl>316232</ProductPageUrl>
  </Product>
  <Product>
    <ExternalId>PF13472</ExternalId>
    <ProductPageUrl>13472</ProductPageUrl>
  </Product>
</Products> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:14:30.930

您的初始代码中有两个问题：首先我不认为`get`是 XML::Twig::Elt 方法。然后您首先为`ExternalId`文本添加前缀，然后（一旦添加前缀）尝试使用它来更新`ProductPageUrl`. 那是行不通的。在这种情况下，我认为最好为`Product`标签使用一个处理程序，在其中获取 id 数据，然后更新两个子元素。

这是一个解决方案，作为测试编写，因此如果您的输出发生变化，更容易更新：

```
#!/usr/bin/perl

use strict;
use warnings;

use Test::More tests => 1;

use XML::Twig;

# in and expected are in the DATA section, separated by 2 \n
my( $in, $expected)= do { local $/="\n\n"; <DATA>};

my $t= XML::Twig->new( twig_handlers => { Product => \&update_product },
                       keep_spaces => 1,
                     )     
                 ->parse( $in);

is( $t->sprint, $expected, "one test to rule them all");

sub update_product
  { my( $t, $product)= @_;
    my $id= $product->field( 'ExternalId');
    $product->first_child( 'ExternalId')->prefix( 'PF');
    $product->first_child( 'ProductPageUrl')->set_text( $id);
  }

__DATA__
<Products>
    <Product>
      <ExternalId>317851</ExternalId>
      <ProductPageUrl></ProductPageUrl>
    </Product>
    <Product>
      <ExternalId>316232</ExternalId>
      <ProductPageUrl></ProductPageUrl>
    </Product>
    <Product>
      <ExternalId>13472</ExternalId>
      <ProductPageUrl></ProductPageUrl>
    </Product>
</Products>

<Products>
    <Product>
      <ExternalId>PF317851</ExternalId>
      <ProductPageUrl>317851</ProductPageUrl>
    </Product>
    <Product>
      <ExternalId>PF316232</ExternalId>
      <ProductPageUrl>316232</ProductPageUrl>
    </Product>
    <Product>
      <ExternalId>PF13472</ExternalId>
      <ProductPageUrl>13472</ProductPageUrl>
    </Product>
</Products> 
```

# passwords - 试图理解加盐密码的概念

> ID：14383762
> 
> 赞同：2
> 
> 时间：2013-01-17T16:37:11.260
> 
> 标签：passwords, cryptography

我知道如果我们只是散列密码，黑客可以使用预先计算的散列密码表并将其与实际的散列密码表进行比较。据我了解，如果我们在散列之前添加一个随机字符串作为盐，预先计算的散列表将不起作用。

现在我的问题是，假设用户密码是“password”，我在其中添加 999 并在保存之前对字符串“password999”进行哈希处理。现在当用户返回我的站点时，我怎么知道我需要在他的密码中添加 999 才能将其与数据库中的散列值进行比较？我是否维护一个单独的表，其中包含每个用户名的所有盐？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:38:42.307

您需要将每个用户的 salt 存储在密码旁边的单独*列中。*

# html - 如何将对象设置在同一行（对齐）？

> ID：14383763
> 
> 赞同：0
> 
> 时间：2013-01-17T16:37:12.477
> 
> 标签：html, css

我有说话的泡泡和图标。
如您所见，此图标出现在下一个新行。
如何将它们设置在同一行中？人 A 是戴眼镜的人，人 B 是推特鸟。

我怎样才能修复我的CSS？

**演示** [http://jsfiddle.net/4Tyey/](http://jsfiddle.net/4Tyey/)

![图片](../Images/c1a899ed098819226957cb294ed2361b.png)

**HTML**

```
<span id="chat">
  <span id="comment_645">
        <div class="me_icon">
          <p class="responsive-img">  
        <a href="/user/1"><img alt="X50" class="img-polaroid" src="http://t1.gstatic.com/images?q=tbn:ANd9GcTHwJFqUSlCJvXdCKEQ9dPxPhx_FYOcbQqD_Hco7vTSwEK_eVpnD-qTWcBCmg" style="width: 50px; height: 50px" /></a>
            </p>
        </div>
        <div class="bubble me">
    18:03:02：&lt;a href="/user/1">Person A</a><br />
    hi
        </div>
    </span>
  <span id="comment_644">
        <div class="me_icon">
            <p class="responsive-img">  
        <a href="/user/1"><img alt="X50" class="img-polaroid" src="http://t1.gstatic.com/images?q=tbn:ANd9GcTHwJFqUSlCJvXdCKEQ9dPxPhx_FYOcbQqD_Hco7vTSwEK_eVpnD-qTWcBCmg" style="width: 50px; height: 50px" /></a>
            </p>
        </div>
        <div class="bubble me">
            17:54:43：&lt;a href="/user/1">Person A</a><br />
    hey
        </div>
    </span>
    <span id="comment_643">
        <div class="me_icon">
            <p class="responsive-img">  
                <a href="/user/1"><img alt="X50" class="img-polaroid" src="http://t1.gstatic.com/images?q=tbn:ANd9GcTHwJFqUSlCJvXdCKEQ9dPxPhx_FYOcbQqD_Hco7vTSwEK_eVpnD-qTWcBCmg" style="width: 50px; height: 50px" /></a>
            </p>
        </div>
        <div class="bubble me">
            17:54:00：&lt;a href="/user/1">Person A</a><br />
            woohoo
        </div>
    </span>
  <span id="comment_642">
        <div class="me_icon">
            <p class="responsive-img">  
                <a href="/user/1"><img alt="X50" class="img-polaroid" src="http://t1.gstatic.com/images?q=tbn:ANd9GcTHwJFqUSlCJvXdCKEQ9dPxPhx_FYOcbQqD_Hco7vTSwEK_eVpnD-qTWcBCmg" style="width: 50px; height: 50px" /></a>
            </p>
        </div>
        <div class="bubble me">
            21:15:25：&lt;a href="/user/1">Person A</a><br />
            ok
        </div>
    </span>
    <span id="comment_641">
        <div class="me_icon">
            <p class="responsive-img">  
                <a href="/user/1"><img alt="X50" class="img-polaroid" src="http://t1.gstatic.com/images?q=tbn:ANd9GcTHwJFqUSlCJvXdCKEQ9dPxPhx_FYOcbQqD_Hco7vTSwEK_eVpnD-qTWcBCmg" style="width: 50px; height: 50px" /></a>
            </p>
        </div>
        <div class="bubble me">
            20:47:34：&lt;a href="/user/1">Person A</a><br />
            Howdy
      </div>
    </span>
    <span id="comment_638">
        <div class="bubble you">
            20:36:49：&lt;a href="/user/2">Person B</a><br />
            hello
        </div>
        <div class="you_icon">
            <p class="responsive-img">
                <a href="/user/2"><img alt="2011-08-16_20.01.51" class="img-polaroid" src="http://www.miraiha.net/wpblog/wp-content/uploads/2010/10/designreviver-free-twitter-social-icon.jpg" style="width: 50px; height: 50px" /></a>
            </p>
        </div>
    </span>
    <span id="comment_634">
        <div class="me_icon">
            <p class="responsive-img">  
                <a href="/user/1"><img alt="X50" class="img-polaroid" src="http://t1.gstatic.com/images?q=tbn:ANd9GcTHwJFqUSlCJvXdCKEQ9dPxPhx_FYOcbQqD_Hco7vTSwEK_eVpnD-qTWcBCmg" style="width: 50px; height: 50px" /></a>
            </p>
        </div>
        <div class="bubble me">
            13:48:48：&lt;a href="/user/1">Person A</a><br />
            How's this?
        </div>
    </span>
    <span id="comment_633">
        <div class="me_icon">
            <p class="responsive-img">  
                <a href="/user/1"><img alt="X50" class="img-polaroid" src="http://t1.gstatic.com/images?q=tbn:ANd9GcTHwJFqUSlCJvXdCKEQ9dPxPhx_FYOcbQqD_Hco7vTSwEK_eVpnD-qTWcBCmg" style="width: 50px; height: 50px" /></a>
            </p>
        </div>
        <div class="bubble me">
          13:48:29：&lt;a href="/user/1">Person A</a><br />
          test
        </div>
    </span>
    <span id="comment_631">
        <div class="me_icon">
            <p class="responsive-img">  
                <a href="/user/1"><img alt="X50" class="img-polaroid" src="http://t1.gstatic.com/images?q=tbn:ANd9GcTHwJFqUSlCJvXdCKEQ9dPxPhx_FYOcbQqD_Hco7vTSwEK_eVpnD-qTWcBCmg" style="width: 50px; height: 50px" /></a>
            </p>
        </div>
        <div class="bubble me">
            13:25:55：&lt;a href="/user/1">Person A</a><br />
            hello
        </div>
    </span>
    <span id="comment_630">
        <div class="me_icon">
            <p class="responsive-img">  
                <a href="/user/1"><img alt="X50" class="img-polaroid" src="http://t1.gstatic.com/images?q=tbn:ANd9GcTHwJFqUSlCJvXdCKEQ9dPxPhx_FYOcbQqD_Hco7vTSwEK_eVpnD-qTWcBCmg" style="width: 50px; height: 50px" /></a>
            </p>
        </div>
        <div class="bubble me">
            13:00:33：&lt;a href="/user/1">Person A</a><br />
            Nice to know you
        </div>
    </span>
</span> 
```

**CSS**

```
.chat {
    width: 100%;
    text-align: center;
    display:inline-block;

}

.bubble{
    background-color: #FFFFFF;
    border-radius: 5px;
    box-shadow: 0 0 6px #B2B2B2;
    display: inline-block;
    padding: 10px 18px;
    position: relative;
    vertical-align: top;
    word-break: break-all;
}

.bubble::before {
    background-color: #FFFFFF;
    content: "\00a0";
    display: block;
    height: 16px;
    position: absolute;
    top: 11px;
    transform:             rotate( 29deg ) skew( -35deg );
        -moz-transform:    rotate( 29deg ) skew( -35deg );
        -ms-transform:     rotate( 29deg ) skew( -35deg );
        -o-transform:      rotate( 29deg ) skew( -35deg );
        -webkit-transform: rotate( 29deg ) skew( -35deg );
    width:  20px;

}

.me {
    float: center;   
    margin: 5px 10px 5px 5px;
    width: 85%;
    text-align: left;   
}

.me_icon {
    float: left;   
    margin: 5px 10px 5px 5px;
    width: 85%;
    text-align: left;    
}

.me::before {
    box-shadow: -2px 2px 2px 0 rgba( 178, 178, 178, .4 );
    left: -9px;           
}

.you {
    float: center;    
    margin: 5px 10px 5px 5px;
    width: 85%;
    text-align: left;          
}

.you_icon {
    float: right;    
    margin: 5px 10px 5px 5px;
    width: 85%;
    text-align: right;          
}

.you::before {
    box-shadow: 2px -2px 2px 0 rgba( 178, 178, 178, .4 );
    right: -9px;   
} 
```

**我想要的输出**

```
 ____________________
IconA < 20:47:34: Person A |
       | Howdy             |
       |___________________|
        ____________________ 
       | 20:36:49: Person B |
       | hello ?             > IconB
       |____________________| 
```

**不像这样**

```
 ____________________
IconA < 20:47:34: Person A |
       | Howdy             |
       |___________________|
 ____________________ 
| 20:36:49: Person B |
| hello ?             > IconB
|____________________| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:23:15.973

为了完全实现这一点，您还需要更改 html 结构。使用百分比大小不是一个好主意。

在此处查看**[演示](http://jsfiddle.net/5r6UM/1/)**

**HTML**

```
<div id="chat">
 <div id="comment_641">
            <div class="me_icon">
                <p class="responsive-img">  
        <a href="/user/1"><img alt="X50" class="img-polaroid" src="http://t1.gstatic.com/images?q=tbn:ANd9GcTHwJFqUSlCJvXdCKEQ9dPxPhx_FYOcbQqD_Hco7vTSwEK_eVpnD-qTWcBCmg" style="width: 50px; height: 50px" /></a>
</p>
            </div>
            <div class="bubble me">
            20:47:34：&lt;a href="/user/1">Person A</a><br />
            Howdy
            </div>
    </div>
 <div id="comment_638">
   <div class="you_icon">
                <p class="responsive-img">  
        <a href="/user/2"><img alt="2011-08-16_20.01.51" class="img-polaroid" src="http://www.miraiha.net/wpblog/wp-content/uploads/2010/10/designreviver-free-twitter-social-icon.jpg" style="width: 50px; height: 50px" /></a>
</p>
            </div>
            <div class="bubble you">
               20:36:49：&lt;a href="/user/2">Person B</a><br />
            hello
            </div>

    </div>
</div> 
```

**CSS**

.chat { 宽度：100%; 文本对齐：居中；显示：内联块；

```
}    
.bubble{
    background-color: #FFFFFF;
    border-radius: 5px;
    box-shadow: 0 0 6px #B2B2B2;
    padding: 10px 18px;
    position: relative;
    vertical-align: top;
    word-break: break-all;
  margin-left:89px;
  margin-right:89px;
  margin-top:10px;
  margin-bottom:10px;
}    
.bubble::before {
    background-color: #FFFFFF;
    content: "\00a0";
    display: block;
    height: 16px;
    position: absolute;
    top: 11px;
    transform:             rotate( 29deg ) skew( -35deg );
        -moz-transform:    rotate( 29deg ) skew( -35deg );
        -ms-transform:     rotate( 29deg ) skew( -35deg );
        -o-transform:      rotate( 29deg ) skew( -35deg );
        -webkit-transform: rotate( 29deg ) skew( -35deg );
    width:  20px;

}
.me {
    float: center;   
    text-align: left;   
}    
.me_icon {
    float: left;   
    margin: 5px 10px 5px 5px;
    text-align: left;    
}    
.me::before {
    box-shadow: -2px 2px 2px 0 rgba( 178, 178, 178, .4 );
    left: -9px;           
}    
.you {
    float: center;    
    text-align: left;          
}
.you_icon {
    float: right;    
    margin: 5px 10px 5px 5px;
    text-align: right;          
}   
.you::before {
    box-shadow: 2px -2px 2px 0 rgba( 178, 178, 178, .4 );
    right: -9px;   
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:51:49.383

我不确定这是否是你想要的，但你的宽度在我和你的图标上太大了，所以我让它们变小了，将它们的宽度`40%`改为，`85%`然后`clear:both`在你的气泡类上添加一个：

[http://jsfiddle.net/4Tyey/1/](http://jsfiddle.net/4Tyey/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T16:58:56.967

您的图标宽度太宽`float:center`且不存在。

我相信这就是您正在寻找的：

[http://jsfiddle.net/4Tyey/2/](http://jsfiddle.net/4Tyey/2/)

# asp-classic - VBScript 中的应用程序对象限制

> ID：14383767
> 
> 赞同：0
> 
> 时间：2013-01-17T16:37:30.807
> 
> 标签：asp-classic, vbscript

我必须修改使用 VBScript 的页面。

我在函数中将局部变量设置为 Application 对象时遇到问题。下面的代码，在`getObjectSchema`函数中，会产生一个错误：

```
Set LocalSchema = Application("ObjectSchema") 
```

虽然下面的代码在主体中（在任何函数之外）工作得非常好：

```
Set Schema = Application("ObjectSchema") 
```

有谁知道出了什么问题？从函数访问应用程序对象是否有任何限制？

这是完整的代码

```
<!DOCTYPE html>
<html>
<head>
<title></title>
<style type="text/css">
    .style1 {
        width: 87px;
    }
</style>
</head>
<body>
    <script type="text/vbscript">
        Option Explicit

        Dim ObjectSchema
        Dim strXML
        Dim strXML1
        Dim sUserId

        On Error Resume Next

        Function GetUserID()
            GetUserID = "{3450E0D8-EE30-48EE-B63F-486506AD1D97}"
        End Function

        Function getObjectSchema()
            Dim LocalSchema

            Set LocalSchema = Application("ObjectSchema")

            If LocalSchema Is Nothing Then
                Set LocalSchema = CreateObject("Scripting.Dictionary")  
            End if

            If LocalSchema.Exists(sUserId) Then
                strXML = LocalSchema.Item(sUserId)
            Else
                strXML = "<head><title>Title</title></head><head1><title1>Title1</title1></head1>"
                LocalSchema.Add sUserId, strXML
                Set Application("ObjectSchema") = LocalSchema
            End if

            getObjectSchema = strXML
        End Function

        sUserId = GetUserID()
        strXML = ""
        strXML1 = ""
        strXML = getObjectSchema()
        strXML1 = getObjectSchema()
        strXML = getObjectSchema()
        strXML1 = getObjectSchema()

        Dim Schema

        Set Schema = Application("ObjectSchema")

        If Schema Is Nothing Then
            Set Schema = CreateObject("Scripting.Dictionary")  
        End if

        If Schema.Exists(sUserId) Then
            strXML = LocalSchema.Item(sUserId)
        Else
            strXML = "<head><title>Title</title></head><head1><title1>Title1</title1></head1>"
            Schema.Add sUserId, strXML
            Set Application("ObjectSchema") = Schema
        End if   

        strXML1 = strXML
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:42:59.753

在设置之前尝试空检查`LocalSchema`：

```
If Not Application("ObjectSchema") Is Nothing Then
    Set LocalSchema = Application("ObjectSchema")
End If 
```

**更新**

你有这个在一个`<script type="text/vbscript">`元素中运行，我认为这意味着它是由浏览器解释的（由于`vbscript`业务原因，特别是 Internet Explorer）。

浏览器可能没有`Application`对象的概念。

尝试将您的代码包含在代码块中（以在服务器上运行它）：

```
<body>
    <%
    Option Explicit

    Dim ObjectSchema
    Dim strXML
    Dim strXML1
    Dim sUserId

    ...

    strXML1 = strXML
    %>
</body> 
```

# php - 多选，将文本添加到默认值（选项）

> ID：14383768
> 
> 赞同：0
> 
> 时间：2013-01-17T16:37:31.650
> 
> 标签：php, joomla, joomla2.5, joomla1.5, joomla1.7

有人可以帮我，请在多选选项的默认“值”之前添加一些文本。

对此作出响应的代码是：

```
if (!K2HelperPermissions::canAddItem($categories[$i]->value)) {
$categories[$i]->disable = true;
}

$lists['categories'] = JHTML::_('select.genericlist', $categories_options, 'catid[]', 'multiple="multiple" style="height:150px"', 'value', 'text',$catid ); 
```

这是“选项”现在的样子`<option value="891">Uncategorized</option>`

我想要的是在 value="" 中的字母之前添加一些文本，例如它看起来像：

`<option value="sometext_891">Uncategorized</option>`

有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:57:44.150

尝试：

```
$lists['categories'] = JHTML::_('select.genericlist', $categories_options, 'catid[]', 'multiple="multiple" style="height:150px"', 'value', 'text','sometext' . $catid ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T08:35:56.597

在这之前

`$lists['categories'] = JHTML::_('select.genericlist', $categories_options, 'catid[]', 'multiple="multiple" style="height:150px"', 'value', 'text',$catid );`必须是循环或一些字符串：

```
$categories_options[] = JHTML::_('select.option', option-value, option-text); 
```

如果您将在此编辑“值”，则选择中的值将更改

# python - Python Zipfile - 无效参数 Errno 22

> ID：14383773
> 
> 赞同：6
> 
> 时间：2013-01-17T16:37:34.853
> 
> 标签：python, zipfile

我有一个 .zip 文件，想知道其中文件的名称。这是代码：

```
zip_path = glob.glob(path + '/*.zip')[0] 
file = open(zip_path, 'r') # opens without error
if zipfile.is_zipfile(file):
    print str(file) # prints to console
my_zipfile = zipfile.ZipFile(zip_path) # throws IOError 
```

这是回溯：

```
<open file u'/Users/me/Documents/project/uploads/assets/peter/offline_message/offline_imgs.zip', mode 'r' at 0x107b2a150>
Traceback (most recent call last):
  File "/Users/me/Documents/project/admin_dev/proj_name/views.py", line 1680, in get_dps_app_builder_assets
    link_to_assets_zip = zip_dps_app_builder_assets(server_url, app_slug, button_slugs)
  File "/Users/me/Documents/project/admin_dev/proj_name/views.py", line 1724, in zip_dps_app_builder_assets
    my_zipfile = zipfile.ZipFile(zip_path)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/zipfile.py", line 712, in __init__
    self._GetContents()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/zipfile.py", line 746, in _GetContents
    self._RealGetContents()
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/zipfile.py", line 779, in _RealGetContents
    fp.seek(self.start_dir, 0)
IOError: [Errno 22] Invalid argument 
```

我很困惑为什么会发生这种情况，因为该文件显然在那里并且是一个有效的 .zip 文件。文档清楚地指出，您可以将文件的路径或类似文件的对象传递给它，这两种方法在我的情况下都不起作用：

[http://docs.python.org/2/library/zipfile#zipfile-objects](http://docs.python.org/2/library/zipfile#zipfile-objects)

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-18T14:13:51.950

我无法解决这个问题，最终以完全不同的方式解决了这个问题。

编辑：在我使用的 Django 应用程序中，用户需要能够以 .zip 文件的形式上传资产，然后将他们上传的所有内容（以及我们动态生成的其他内容）下载到另一个具有不同结构的 zip 文件中。所以，我想解压缩之前上传的文件，然后将该文件的内容压缩到另一个 zip 文件中，但由于错误，我无法这样做。当用户请求下载时，我没有读取 zip 文件，而是从 Django InMemoryUploadedFile （我能够成功读取其内容）中解压缩它，并将解压缩的文件留在文件系统上以供以后使用。zip 的内容只有两个较小的图像文件，因此提前解压缩 zip 以供以后使用的解决方法对我来说可以正常工作。

# visual-studio - 如何在 Windows CE 设备上调试正在运行的 .NET 程序

> ID：14383775
> 
> 赞同：2
> 
> 时间：2013-01-17T16:37:37.933
> 
> 标签：visual-studio, debugging, windows-ce

我无法让模拟器为我的目标设备工作，我想调试一个正在运行的程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:37:37.933

**一次性设置**

使用 ActiveSync 将设备连接到计算机。基本连接没问题。

第一次为每个设备执行以下五个步骤（来自[http://msdn.microsoft.com/en-us/library/b1ksfbk7(VS.80).aspx](http://msdn.microsoft.com/en-us/library/b1ksfbk7(VS.80).aspx)）

1.  在 Windows 开始菜单上，依次指向所有程序、Microsoft Visual Studio 2005、Visual Studio 工具，然后单击远程注册表编辑器。
2.  使用远程注册表编辑器连接到设备。
3.  导航到或创建以下项：HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft.NETCompactFramework\Managed Debugger
4.  设置或创建一个名为 AttachEnabled 的 DWORD 值。
5.  将值的数据设置为 1。

第一次也执行以下操作（来自[http://social.msdn.microsoft.com/Forums/en/vssmartdevicesvbcs/thread/5271dbc0-f4a0-422b-9ea3-3c4e9c99ace2](http://social.msdn.microsoft.com/Forums/en/vssmartdevicesvbcs/thread/5271dbc0-f4a0-422b-9ea3-3c4e9c99ace2)）

将 eDbgTL.dll 和 TcpConnectionA.dll 从 C:\Program Files (x86)\Common Files\microsoft shared\CoreCon\1.0\Target\wce400\armv4i\ 复制到设备上的 \Windows\。

**调试**

1.  在设备上启动程序。
2.  在 Visual Studio 中，转到“调试”>“附加到进程”。
3.  选择传输：智能设备。
4.  单击浏览，选择 Windows CE 设备，然后单击连接。
5.  从可用进程列表中选择程序并单击附加。

# sql - Sql Server - 一起执行的 2 个查询需要更长的时间

> ID：14383776
> 
> 赞同：1
> 
> 时间：2013-01-17T16:37:40.123
> 
> 标签：sql, sql-server

我有 2 个查询。

查询＃1：将一些数据插入临时表

查询#2：将临时表中的数据（带有一些连接）插入到一个新表中。

单独运行 Query #1 需要 3 秒。单独运行 Query #2 需要 12 秒。

当我将它们一起作为一次执行运行时，它会永远运行（超过 4 分钟）。

这可能是什么原因？

（我会发布我的代码，但它*很*长，外人无法理解。）

这是我的 SQL（风险自负）：记住它们在单独运行时运行良好。

```
-- START QUERY #1
SELECT * INTO #TempProdForSiteGoingTrim
FROM 
    (
        SELECT
            p.idProduct
            , p.active
            , p.sku
            , p.description
            , p.listprice
            , p.price
            , p.imageurl
            , p.smallimageurl
            , p.idManufacturer
            , sortOrder 
            , CASE WHEN p.pgroup = '' OR p.pgroup IS NULL THEN CAST(p.idProduct AS VARCHAR) ELSE pgroup END [pgroup]
            , CASE WHEN pa2.attr IS NULL  THEN CAST(p.idProduct AS VARCHAR) ELSE CASE WHEN p.pgroup = '' OR p.pgroup IS NULL THEN CAST(p.idProduct AS VARCHAR) ELSE pgroup END END [RugGroup] 
            , pa1.attr [Color]
            , pa3.attr [Collection]
            , pa2.attr [RugSize]
            , pa4.attr[RugShape]
        FROM
            (SELECT DISTINCT idProduct  FROM ProdSite WHERE idSite = 39 ) s 
            INNER JOIN (SELECT * FROM products p  WHERE active = -1 ) p ON s.idproduct = p.idproduct 
            LEFT OUTER JOIN (SELECT t.idproduct, attr FROM  (SELECT max(idprodattr) [idprodattr], idproduct, b.idattrset  FROM productattr a JOIN product_attr b on a.idattr = b.idattr WHERE idattrset = 1 GROUP BY a.idproduct, b.idattrset )t JOIN productattr a ON t.idprodattr = a.idprodattr JOIN product_attr b ON a.idattr = b.idattr) pa1 ON p.idproduct = pa1.idproduct  
            LEFT OUTER JOIN  (SELECT t.idproduct, attr FROM  (SELECT max(idprodattr)[idprodattr], idproduct, b.idattrset  FROM productattr a JOIN product_attr b on a.idattr = b.idattr WHERE idattrset = 160 GROUP BY a.idproduct, b.idattrset )t JOIN productattr a ON t.idprodattr = a.idprodattr JOIN product_attr b ON a.idattr = b.idattr) pa2 ON p.idproduct = pa2.idproduct  
            LEFT OUTER JOIN (SELECT t.idproduct, attr FROM  (SELECT max(idprodattr)[idprodattr], idproduct, b.idattrset  FROM productattr a JOIN product_attr b on a.idattr = b.idattr WHERE idattrset = 6  GROUP BY a.idproduct, b.idattrset )t JOIN productattr a ON t.idprodattr = a.idprodattr JOIN product_attr b ON a.idattr = b.idattr) pa3 ON p.idproduct = pa3.idproduct 
            LEFT OUTER JOIN (SELECT t.idproduct, attr FROM  (SELECT max(idprodattr)[idprodattr], idproduct, b.idattrset  FROM productattr a JOIN product_attr b on a.idattr = b.idattr WHERE idattrset = 62  GROUP BY a.idproduct, b.idattrset )t JOIN productattr a ON t.idprodattr = a.idprodattr JOIN product_attr b ON a.idattr = b.idattr) pa4 ON p.idproduct = pa4.idproduct 
    )t 
 -- END QUERY #1

-- START QUERY #2
DECLARE @listRugSizes TABLE (idmanufacturer int, RugGroup VARCHAR(500), RugSizes VARCHAR(1000))  
INSERT INTO @listRugSizes 
SELECT
    t1.idmanufacturer
    , t1.RugGroup 
    , STUFF(( SELECT ', ' + RugSize FROM  #TempProdForSiteGoingTrim t2 WHERE t2.RugGroup = t1.RugGroup and t2.idmanufacturer = t1.idmanufacturer FOR XML PATH(''), TYPE ).value('.', 'varchar(max)'), 1, 1, '') [Values] 
FROM 
    #TempProdForSiteGoingTrim t1
GROUP BY
    t1.RugGroup 
    , t1.idmanufacturer

INSERT INTO [NewTableForSiteGoingTrim]
SELECT
    p.idProduct
    , p.sku
    , p.description
    , p.listPrice
    , p.price
    , p.imageUrl
    , p.smallImageUrl
    , p.sortOrder
    , p.idManufacturer
    , p.pgroup 
    , p.ruggroup  
    , c.idCategory
    , c.idCategory [fidcategory]
    , c.idParentCategory
    , c.idParentCategory [gidcategory]
    , pc.idParentCategory [hidCategory]  
    , ppc.idParentCategory [iidCategory]
    , m.Name 
    , rp.rewrite_key [rewrite_index]
    , rm.rewrite_key [rewrite_key] 
    , color [Color]
    , collection [Collection]
    , rugsize [RugSize] 
    , ruggroup.rugcount
    , ruggroup.maxprice
    , ruggroup.minprice
    , rs.RugSizes 
    , p.rugshape  
FROM
    #TempProdForSiteGoingTrim p 
    LEFT OUTER JOIN  ( 
                        SELECT
                            MIN(c.idCategory) [idCategory]
                            , c.idProduct
                        FROM
                            (
                                SELECT
                                    cp.idProduct
                                    , cp.idCategory
                                FROM
                                    dbo.categories_products cp 
                                    JOIN categories c ON cp.idcategory = c.idCategory
                                WHERE
                                    c.idSite = 24  
                            ) c
                        GROUP BY
                            c.idProduct 
                    ) cp ON p.idProduct = cp.idProduct 
    LEFT OUTER JOIN categories c ON cp.idCategory = c.idCategory  
    LEFT OUTER JOIN categories pc ON c.idParentCategory = pc.idCategory 
    LEFT OUTER JOIN categories ppc ON pc.idParentCategory = ppc.idCategory 
    LEFT OUTER JOIN manufacturer m ON p.idManufacturer = m.idManufacturer  
    LEFT OUTER JOIN (SELECT * FROM rewrite WHERE type = 3) rm ON p.idManufacturer = rm.id   
    LEFT OUTER JOIN (SELECT * FROM rewrite WHERE type = 1) rp ON p.idProduct = rp.id  
    LEFT OUTER JOIN @listRugSizes rs ON p.RugGroup = rs.RugGroup and p.idmanufacturer = rs.idmanufacturer
    LEFT OUTER  JOIN
        ( 
                SELECT
                    p.ruggroup 
                    , p.idmanufacturer
                    , min(price) [minPrice] 
                    , count(*) [RugCount] 
                    , m.maxprice
                FROM 
                    #TempProdForSiteGoingTrim p  
                    LEFT OUTER JOIN
                        (
                            SELECT
                                r.ruggroup
                                , r.idmanufacturer
                                , max(price) [maxprice]
                            FROM
                                #TempProdForSiteGoingTrim r
                            WHERE
                                r.idproduct = (SELECT MAX(idproduct) FROM #TempProdForSiteGoingTrim WHERE ruggroup = r.ruggroup AND price = r.price and idmanufacturer = r.idmanufacturer) 
                            GROUP BY
                                ruggroup 
                                , idmanufacturer
                        ) m ON p.ruggroup = m.ruggroup and p.idmanufacturer = m.idmanufacturer
                GROUP BY
                    p.ruggroup 
                    , m.maxprice 
                    , p.idmanufacturer

        ) ruggroup ON p.ruggroup = ruggroup.ruggroup  and p.idmanufacturer = ruggroup.idmanufacturer
-- END QUERY #2 
```

**编辑**

当我将最后一个加入“ruggroup”更改为仅分组并按列“ruggroup”而不是“ruggroup”和“idmanufacturer”加入时，它工作正常。

# php - 使用命名空间在 php 中解析 RSS/XML

> ID：14383782
> 
> 赞同：1
> 
> 时间：2013-01-17T16:37:57.687
> 
> 标签：php, xml, parsing, rss

我有一些看起来像这样的 RSS：

```
<item>
<guid isPermaLink="false">2284767032</guid>
<title>title goes here...</title>
<description> Description </description>
<author>author name</author>
<dcterms:valid>start=2012-09-28T17:06:00Z;scheme=W3C-DTF</dcterms:valid>
<media:category scheme="" label="">cat1</media:category>
<media:category scheme="" label="">cat2</media:category>
<media:category scheme="" label="">cat3</media:category>

<media:copyright>Big Company</media:copyright>
<media:keywords>some;keywords;</media:keywords>
<media:group>
<media:content bitrate="643.386" medium="video" duration="72.144" expression="full" fileSize="5802051" framerate="29.97" type="video/x-flv" height="360" url="..." width="640"/>
<media:content bitrate="1242.571" medium="video" duration="72.144" expression="full" fileSize="11205501" framerate="29.97" type="video/x-flv" height="480" url="..." width="854"/>
</media:group>
<link>a234dfasf4f</link>
<plmedia:defaultThumbnailUrl>
  http://url.jpg
</plmedia:defaultThumbnailUrl>
</item> 
```

我正在使用以下代码来解析它：

```
 $feed = simplexml_load_file('http://feedurl.com');
  echo "<pre>";
  print_r($feed);
  echo "</pre>"; 
```

问题是我得到了所有的标签，比如**guid 、 title 和 description**，但是没有`media:category`or`media:group`或`something:anything`出现 - 它们只是被剥离了。

如何在不丢失它们的情况下解析此提要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:52:54.790

您需要找到命名空间的定义位置，并找到命名空间映射到的字符串。例如，如果`media`命名空间映射到`http://example.com/something`：

```
echo (string)$feed->children('http://example.com/something')->copyright; 
```

输出：

> 大公司

SimpleXML的结果`print_r()`并不总是为您提供完整的结构，但元素在那里。

要获取嵌套元素，请尝试以下操作：

```
foreach($feed->children('http://example.com/something')->group->children('http://example.com/something')->content as $content)
{
    echo (string)$content->attributes()->bitrate;
} 
```

# c# - OpenPop.Net - 服务器没有响应

> ID：14383785
> 
> 赞同：0
> 
> 时间：2013-01-17T16:38:09.720
> 
> 标签：c#, asp.net

我正在使用 OpenPop.NET，我正在尝试从服务器下载电子邮件。但是，它给出了以下错误消息同时，我可以使用与 OpenPop.NET 相同的设置在 Outlook 中配置和下载邮件而不会出现任何问题。

服务器没有响应 + 响应。响应是：“-ERR 命令在此状态下无效。”

```
FetchAllMessages(smtpserver, 110, false, emailId, password);

public static List<Message> FetchAllMessages(string hostname, int port, bool useSsl, string username, string password)
    {
        using (Pop3Client client = new Pop3Client())
        {
            client.Connect(hostname, port, useSsl);

            client.Authenticate(username, password);

            int messageCount = client.GetMessageCount();

            List<Message> allMessages = new List<Message>(messageCount);

            for (int i = messageCount; i > 0; i--)
            {
                allMessages.Add(client.GetMessage(i));
            }

            return allMessages;
        }
    } 
```

在client.Authenticate（用户名，密码）中抛出异常；

# java - 在java中测试REST服务

> ID：14383787
> 
> 赞同：1
> 
> 时间：2013-01-17T16:38:27.407
> 
> 标签：java, web-services, rest, testing, tdd

所以，事情就是这样。
我正在使用的 REST 服务应该经过测试，但我无法访问代码。

我在 java 中创建了某种库，因此我可以与该服务进行交互，但我需要对我的库进行单元测试（实际上它还没有实现，我正在使用 TDD）所以我可以确定它是否有效。

我该怎么做才能不弄乱服务（我不想创建或删除任何东西）？我应该使用某种模拟还是存根？如果是这样，怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:57:54.027

我使用[Jersey 测试框架](http://jersey.java.net/nonav/documentation/latest/test-framework.html)来测试 - 如果您使用 Jersey 编写代码。它在后台运行灰熊。

您可以使用 HttpUnit 的 PseudoServer 创建虚假响应。

或者您可以使用[HttpClient](http://hc.apache.org/downloads.cgi)生成帖子并获取对您正在运行的服务的请求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:57:53.240

您可以使用模拟框架（我喜欢[Mockito](https://code.google.com/p/mockito/)）来模拟您的 API 端点库。然后，您可以使用传统的 junit 测试来确保您的库正在进行预期的 API 调用。

如果您想实际进行 HTTP 调用，您可以使用其他几个库（已经建议使用 Jersey 客户端）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-13T09:20:52.670

[放心](http://code.google.com/p/rest-assured/)是你想要找到的东西吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T17:11:07.530

我的组织使用 spring 来生成我们的模拟休息服务。[Spring MVC 测试框架（以前称为 spring social test）](http://blog.springsource.org/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework/)工作得很好。但是，如果您还没有使用 spring，我建议您使用 Jmock、mockito 或 easy mock 来伪造响应。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-16T11:27:37.237

我不喜欢使用模拟的想法，因为它遗漏了 HTTP 的东西。最好使用模拟服务器，例如[在此处输入链接描述](http://mock-server.com)。首先这有点棘手，但是一旦您启动并运行了测试用例，它就会变得轻而易举。我使用随机端口来启动模拟服务器，以便可以并行运行测试。

# windows - Qt QFileInfo::lastread() Windows (ntfs) 不工作需要解决方案

> ID：14383790
> 
> 赞同：1
> 
> 时间：2013-01-17T16:38:37.563
> 
> 标签：windows, qt, filesystems

我需要知道我的文件是否被访问，所以我使用了 QFileInfo::lastRead()...

文档是这么说的：

“在此信息不可用的平台上，返回与 lastModified() 相同。”

是否有可能为 Windows (ntfs) 修复该问题，或者是否有一个列表包含 QFileInfo::lastRead() 工作的所有文件系统类型或系统？

分别 sys/stat.h 是否有任何解决方法（？？我想 - 仅适用于 x16 和 x32 ？？）
我得到了 x64，但我不确定。

先感谢您！

马蒂亚斯

# javascript - 文件之间的 Javascript 变量

> ID：14383795
> 
> 赞同：-2
> 
> 时间：2013-01-17T16:38:51.570
> 
> 标签：javascript, variables, window, global

好的，所以我有两个文件，index.html 和 functions.js（index.html 正确包含 functions.js）。

单击网页中的按钮时，函数文件中会调用一个函数，该函数会更新网页中的元素（正确）并尝试设置两个全局变量（通过执行`window.var1`和来解决这个问题`window.var2`。到目前为止，Web 控制台中没有错误.

在调用此函数后，我在 index.html 中运行了一段 JS 代码，该代码尝试读取`window.var1`和`window.var2`，但发现它们都为空。

这是为什么 ？您能否请我指出一些关于为什么会发生这种情况的材料，而不仅仅是解决方案？

*编辑* 我正在使用 jquery 和 jquery mobile。调用这两个函数的事件处理程序是

```
 $('#map').live('pageshow',function(){
            console.debug('clicked button, calling function');
            position(longitude,latitude); //sets the global vars
            initializeMap();
            console.debug('finished with map calling');
        }); 
```

并位于 document.ready() 内。

*编辑 2* 我知道这两个函数是按顺序发生的，我在它们的入口点做了一个 console.log() 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:07:55.100

在没有完整代码的情况下，我会四处走动......

可能是您在函数中声明和设置这些变量。函数范围意味着它们不存在于*声明*它们的任何函数之外。解决方案是在任何函数之外（即在文件顶部）声明它们（使用`var`关键字），并将它们设置在函数内部。

否则，它们不是全球性的。

如果完全*不是这样，请*原谅我。

```
var myGlobal = 0;

myFunction = function() {
    myGlobal = 42;
}

// myGlobal now is equal to 42 
```

然而...

```
myFunction = function() {
    var myGlobal = 42;
}

// myGlobal now is null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:14:39.650

纬度和经度变量在函数的本地范围内声明。（我假设您显示的代码是完整的代码）

要正确使用全局范围，请将其添加到您的代码上方：

```
var latitude = 0;
var longtitude = 0; 
```

现在您的功能将正常工作。但是请记住，全局变量是不好的。从长远来看，它们可能会弄乱您的代码。我建议您使用[模块](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#modulepatternjavascript)设计模式。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-17T16:48:07.623

因此，我通常对希望在全局范围内访问的变量执行此操作，但不会污染实际的全局区域：

```
window.PositionData = window.PositionData || {}; 
```

此行要么实例化变量，要么如果它已经存在，则将其设置为等于自身，因此不会被覆盖。

```
PositionData.var1;
PositionData.var2; 
```

然后像这样设置/检索值：

```
PositionData.var1 = 1;
PositionData.var2 = PositionData.var1; 
```

# python - 让狮身人面像识别正确的签名

> ID：14383797
> 
> 赞同：13
> 
> 时间：2013-01-17T16:38:55.603
> 
> 标签：python, decorator, python-sphinx

我一直在尝试为我正在处理的开源项目获取我的文档，该项目涉及镜像客户端和服务器 API。为此，我创建了一个装饰器，它可以在大多数情况下用于记录一个简单地对其输入执行验证的方法。您可以在此处找到一个包含这些方法的类，并在[此处](https://github.com/alistair-broomhead/robotframework-sikuliserver/blob/0.1.0/sikuli_client/region.py)[找到](https://github.com/alistair-broomhead/robotframework-sikuliserver/blob/0.1.0/sikuli_client/sikuli_class.py)装饰器的实现。

如您所见，装饰器`functools.wraps`用于保存文档字符串，我还认为是签名，但是源代码与生成的文档如下所示：

资源：![源代码](../Images/6cc27cffb32e32354e5d04d0d950055e.png)

对比

文件：![狮身人面像文档](../Images/4c52b2c5e8fb939cb5ca3c5413d0abf6.png)

有谁知道有什么方法可以让`setH`生成的文档显示正确的调用签名？（没有每个签名的新装饰器 - 我需要镜像数以百计的方法）

我找到了一种解决方法，其中涉及让装饰器不更改未绑定的方法，但让类在绑定时改变方法（对象实例化） - 这似乎是一个 hack，所以对此有任何评论，或者其他方法这将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-22T11:20:18.790

我想避免依赖标准库之外的太多垃圾，所以当我查看装饰器模块时，我主要尝试重现它的功能......不成功......

于是换个角度看问题，现在有了部分可行的解决方案，主要可以看[这个commit](https://github.com/alistair-broomhead/robotframework-sikuliserver/commit/a32d9d561a39459927a636df160e284a5ed0aeca)来描述。它并不完美，因为它依赖于使用部分，这破坏了 REPL 中的帮助。这个想法是，不是替换应用装饰器的函数，而是增加属性。

```
+def s_repr(obj):
+    """ :param obj: object """
+    return (repr(obj) if not isinstance(obj, SikuliClass)
+            else "self._get_jython_object(%r)" % obj._str_get)
+
+
 def run_on_remote(func):
     ...
-    func.s_repr = lambda obj: (repr(obj)
-                               if not isinstance(obj, SikuliClass) else
-                               "self._get_jython_object(%r)" % obj._str_get)
-
-    def _inner(self, *args):
-        return self.remote._eval("self._get_jython_object(%r).%s(%s)" % (
-            self._id,
-            func.__name__,
-            ', '.join([func.s_repr(x) for x in args])))
-
-    func.func = _inner
+    gjo = "self._get_jython_object"
+    func._augment = {
+        'inner': lambda self, *args: (self.remote._eval("%s(%r).%s(%s)"
+                                      % (gjo, self._id, func.__name__,
+                                         ', '.join([s_repr(x)for x in args]))))
+    }

     @wraps(func)
     def _outer(self, *args, **kwargs):
         func(self, *args, **kwargs)
-        if hasattr(func, "arg"):
-            args, kwargs = func.arg(*args, **kwargs), {}
-        result = func.func(*args, **kwargs)
-        if hasattr(func, "post"):
+        if "arg" in func._augment:
+            args, kwargs = func._augment["arg"](self, *args, **kwargs), {}
+        result = func._augment['inner'](self, *args, **kwargs)
+        if "post" in func._augment:
             return func.post(result)
         else:
             return result

     def _arg(arg_func):
-        func.arg = arg_func
-        return _outer
+        func._augment['arg'] = arg_func
+        return func

     def _post(post_func):
-        func.post = post_func
-        return _outer
+        func._augment['post'] = post_func
+        return func

     def _func(func_func):
-        func.func = func_func
-        return _outer
-    _outer.arg = _arg
-    _outer.post = _post
-    _outer.func = _func
-    return _outer
+        func._augment['inner'] = func_func
+        return func
+
+    func.arg  = _outer.arg = _arg
+    func.post = _outer.post = _post
+    func.func = _outer.func = _func
+    func.run  = _outer.run = _outer
+    return func 
```

所以这实际上并没有改变未绑定的方法，因此生成的文档保持不变。诡计的第二部分发生在类初始化时。

```
 class ClientSikuliClass(ServerSikuliClass):
     """ Base class for types based on the Sikuli native types """
     ...
     def __init__(self, remote, server_id, *args, **kwargs):
         """
         :type server_id: int
         :type remote: SikuliClient
         """
         super(ClientSikuliClass, self).__init__(None)
+        for key in dir(self):
+            try:
+                func = getattr(self, key)
+            except AttributeError:
+                pass
+            else:
+                try:
+                    from functools import partial, wraps
+                    run = wraps(func.run)(partial(func.run, self))
+                    setattr(self, key, run)
+                except AttributeError:
+                    pass
         self.remote = remote
         self.server_id = server_id 
```

因此，在实例化任何继承类`ClientSikuliClass`的实例时，会尝试获取该实例的每个属性的 run 属性，并使其在尝试获取该属性时返回，因此绑定方法现在是部分应用`_outer`函数。

所以这个问题是多方面的：

1.  在初始化时使用部分会导致丢失绑定的方法信息。
2.  我担心破坏恰好具有属性的`run`属性...

因此，虽然我对自己的问题有答案，但我对此并不十分满意。

* * *

## 更新

好的，经过更多的工作，我最终得到了这个：

```
 class ClientSikuliClass(ServerSikuliClass):
     """ Base class for types based on the Sikuli native types """
     ...
     def __init__(self, remote, server_id, *args, **kwargs):
         """
         :type server_id: int
         :type remote: SikuliClient
         """
         super(ClientSikuliClass, self).__init__(None)
-        for key in dir(self):
+
+        def _apply_key(key):
             try:
                 func = getattr(self, key)
+                aug = func._augment
+                runner = func.run
             except AttributeError:
-                pass
-            else:
-                try:
-                    from functools import partial, wraps
-                    run = wraps(func.run)(partial(func.run, self))
-                    setattr(self, key, run)
-                except AttributeError:
-                    pass
+                return
+
+            @wraps(func)
+            def _outer(*args, **kwargs):
+                return runner(self, *args, **kwargs)
+
+            setattr(self, key, _outer)
+
+        for key in dir(self):
+            _apply_key(key)
+
         self.remote = remote
         self.server_id = server_id 
```

这可以防止对象上的文档丢失。您还将看到 func._augment 属性被访问，即使它没有被使用，所以如果它不存在，对象属性将不会被触及。

如果有人对此有任何意见，我会很感兴趣？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-25T19:07:31.527

在[PRAW](https://praw.readthedocs.org/en/latest/)中，我通过在 sphinx 构建发生时返回原始函数（而不是修饰函数）的条件装饰器来处理这个问题。

在 PRAW 的 sphinx conf.py 中，我添加了以下内容来确定 SPHINX 当前是否正在构建：

```
import os
os.environ['SPHINX_BUILD'] = '1' 
```

然后在 PRAW 中，它的装饰器看起来像：

```
import os

# Don't decorate functions when building the documentation
IS_SPHINX_BUILD = bool(os.getenv('SPHINX_BUILD'))

def limit_chars(function):
    """Truncate the string returned from a function and return the result."""
    @wraps(function)
    def wrapped(self, *args, **kwargs):
        output_string = function(self, *args, **kwargs)
        if len(output_string) > MAX_CHARS:
            output_string = output_string[:MAX_CHARS - 3] + '...'
        return output_string
    return function if IS_SPHINX_BUILD else wrapped 
```

该`return function if IS_SPHINX_BUILD else wrapped`行允许 SPHINX 获取正确的签名。

[相关来源](https://github.com/praw-dev/praw/blob/master/praw/decorators.py)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-21T22:34:52.737

`functools.wraps`只保留`__name__`,`__doc__`和`__module__`. 要保留签名，请查看 Michele Simionato 的[Decorator 模块](http://pypi.python.org/pypi/decorator)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-29T15:20:51.443

[为了扩展我对Ethan 的回答的](https://stackoverflow.com/a/14448445/1424462)简短评论，这是我使用该`functools`包的原始代码：

```
 import functools

def trace(f):
    """The trace decorator."""
    logger = ... # some code to determine the right logger
    where = ... # some code to create a string describing where we are

    @functools.wraps(f)
    def _trace(*args, **kwargs):
        logger.debug("Entering %s", where)
        result = f(*args, **kwargs)
        logger.debug("Leaving %s", where)
        return result

    return _trace 
```

这里是使用`decorator`包的代码：

```
 import decorator

def trace(f):
    """The trace decorator."""
    logger = ... # some code to determine the right logger
    where = ... # some code to create a string describing where we are

    def _trace(f, *args, **kwargs):
        logger.debug("Entering %s", where)
        result = f(*args, **kwargs)
        logger.debug("Leaving %s", where)
        return result

    return decorator.decorate(f, _trace) 
```

出于性能原因，我们希望将代码移出实际的函数包装器，以确定正确的记录器和 where-string。因此，在两个版本中都使用了嵌套包装函数的方法。

两个版本的代码都适用于 Python 2 和 Python 3，但第二个版本在使用 Sphinx 和 autodoc 时为修饰函数创建了正确的原型（无需在 autodoc 语句中重复原型，如[this answer](https://stackoverflow.com/a/25103071/1424462)中所建议）。

这是使用 cPython，我没有尝试过 Jython 等。

# java - 使用 Java 中的复选框启用/禁用 JComponents 的困难

> ID：14383800
> 
> 赞同：0
> 
> 时间：2013-01-17T16:39:02.447
> 
> 标签：java, swing, checkbox, actionlistener, jcomponent

在运行时使用复选框禁用/启用几个 JComponents 时，我在这里没有什么困难。我试过做`if(checkbox.isSelected(){}` ，但没有奏效。当我尝试添加时`addActionListener(this)`，出现错误“AbstractButton 类中的方法 addActionListiner 不能应用于给定类型：必需的动作监听器：找到 JudgeMain（它的类名）-在构造函数中泄漏“this”

```
public class JudgeMain extends JFrame {
Connection conn = null;
ResultSet rs = null;
PreparedStatement pst = null;
LogInJ id = new LogInJ();
public String IdNumber;
public JudgeMain(LogInJ id) 
{
    initComponents();
    ButtonGroup();
    this.id = id;
    initDetails();
    yesCB.addActionListener(this);
    if(yesCB.isSelected())
    {
        timeF.setEnabled(true);
        catF.setEnabled(true);
        yearsCB.setEnabled(true);
        monthsCB.setEnabled(true);            
    }
} 
```

帮助感谢谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:42:44.903

类`JudgeMain`不代表类型`ActionListener`。

您需要实现此接口才能调用

```
yesCB.addActionListener(this); 
```

或者只使用匿名侦听器（注意，无需检查源）：

```
yesCB.addActionListener(new ActionListener() {

   @Override
   public void actionPerformed(ActionEvent e) {
      timeF.setEnabled(yesCB.isSelected());
      catF.setEnabled(yesCB.isSelected());
      yearsCB.setEnabled(yesCB.isSelected());
      monthsCB.setEnabled(yesCB.isSelected());
}}); 
```

* * *

*旁注：*首选方法是创建一个实例`JFrame`并直接使用，而不是子类化该类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:44:07.107

您的班级需要实现`ActionListener`：

像这样的东西应该可以工作（虽然我不能确定，因为你的原始代码没有编译）：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

import javax.swing.JFrame;

public class JudgeMain extends JFrame implements ActionListener {
    Connection conn = null;
    ResultSet rs = null;
    PreparedStatement pst = null;
    LogInJ id = new LogInJ();
    public String IdNumber;

    public JudgeMain(LogInJ id) {
        initComponents();
        ButtonGroup();
        this.id = id;
        initDetails();
        yesCB.addActionListener(this);

    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (yesCB == e.getSource()) {
            timeF.setEnabled(yesCB.isSelected());
            catF.setEnabled(yesCB.isSelected());
            yearsCB.setEnabled(yesCB.isSelected());
            monthsCB.setEnabled(yesCB.isSelected());
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T16:54:16.483

如果需要，您可以在 JCheckBox 上使用 ChangeListener 而不是 ActionListener。

# php - 合并 2 个数组

> ID：14383802
> 
> 赞同：-3
> 
> 时间：2013-01-17T16:39:07.423
> 
> 标签：php, arrays

> **可能重复：**
> [将 3 个数组合并为一个数组](https://stackoverflow.com/questions/14381139/combing-3-arrays-into-one-array)

我有以下数组：

```
$front = array("front_first","front_second");
$back = array("back_first", "back_second", "back_third","back_fourth"); 
```

我想要做的是合并它们，这样会产生这样的输出：

```
$final = array(
    "back_first",
    "front_first",
    "back_second",
    "front_second",
    "back_third",
    "front_second",
    "back_fourth",
    "front_second"
); 
```

我怎样才能让它重复最短数组中的最后一个值，以便它可以组合成一个`$final[]`没有空值的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:44:01.623

工作[键盘](http://codepad.org/bgIYz9iw)- [bgIYz9iw](http://codepad.org/bgIYz9iw)

```
$final = array();
for( $i = 0; $i < 4; $i++ ) {
  if( $i > 1 ) {
    $final[] = $back[$i];
    $final[] = $front[1];
  }
  else {
    $final[] = $back[$i];
    $final[] = $front[$i];
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:40:34.037

php的[array_merge](http://php.net/manual/en/function.array-merge.php)

```
$final = array_merge($front, $back); 
```

也许与[array_pad](http://php.net/manual/en/function.array-pad.php)组合？

```
$front = array_pad($front, count($back)-1, 'second_front');
 $final = array_merge($front, $back); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:41:26.970

第一点很简单，只需使用[array_merge()](http://www.php.net/array_merge)来构造您的组合数组。

第二位需要任意排序，因此需要使用[usort()](http://www.php.net/usort)根据您在回调函数中实现的规则对数组进行排序。

顺序真的很重要吗？

# .net - 检查表中是否存在列？

> ID：14383803
> 
> 赞同：0
> 
> 时间：2013-01-17T16:39:07.653
> 
> 标签：.net, vb.net, exists

我必须检查表中是否存在列，如果存在，则必须将其删除，如果不存在，则必须添加它，并且仅在 vb.xml 中。

我读过一些关于`DataColumnCollection.Contains`- 检查列是否存在的内容，但我真的不明白如何使用它。任何帮助都是有用的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:42:30.093

要从 中删除它`DataTable`，首先检查它是否存在，`Contains`然后使用`Remove`Try：

```
If myDataTable.Columns.Contains("columnName") Then
    myDataTable.Columns.Remove("columnName");
End If 
```

# post - 单个更大的 POST 到谷歌脚本还是几个更小的？

> ID：14383804
> 
> 赞同：2
> 
> 时间：2013-01-17T16:39:13.877
> 
> 标签：post, google-apps-script

我有一个脚本，它收集有关我计算机中某些文件的一些数据，然后对作为服务发布的谷歌脚本进行 POST。

我想知道什么应该更好：收集所有数据（不能超过几 MB，可能是 10 个）并进行一次 POST，或者为每个部分（只有一些 kb）发出一个 POST 请求？

哪一个对双方的性能更好，我的本地计算机和谷歌服务器？发一百个帖子可以理解为滥用？它将每月运行一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T22:09:59.480

有很多因素会影响这个决定——

*   一般来说，我认为最好上传一次，因为 10mb 不是大量数据
*   这是异步（或自动）还是有用户单击按钮？如果它自动发生，那么您不必担心向用户准确报告进度。如果有用户观看上传，那么较小的上传会更好，因为您将能够测量有多少单元（或块）被正确上传。
*   您的计算机根本不应该出现在图片中 - Google Apps 脚本在 Google 服务器上运行。也许这里有些混乱？

# django - 无法弄清楚 Django 中的 join 语句

> ID：14383806
> 
> 赞同：0
> 
> 时间：2013-01-17T16:39:24.117
> 
> 标签：django, django-models, django-queryset

我试图弄清楚如何在 Django 中执行以下 sql join 语句，而无需仅使用原始 sql。有没有办法做到这一点？

```
Select * from playertable, seasontable where player.id = season.player_id 
```

这是我的模型。只是为了澄清，我在上面的查询中使用了缩写表名来澄清

```
class Player(models.Model): 
    name = models.CharField(max_length=200)
    team = models.CharField(max_length=3)
    position = models.CharField(max_length=3)

class PlayerSeason(models.Model):

    player = models.ForeignKey(Player)
    year = models.IntegerField()
    games_played = models.IntegerField()
    goals = models.IntegerField()
    assists = models.IntegerField()
    points = models.IntegerField()
    plusminus = models.CharField(max_length=200)
    pim = models.IntegerField()
    ppg = models.IntegerField()
    shg = models.IntegerField()
    gwg = models.IntegerField()
    otg = models.IntegerField()
    shots = models.IntegerField()
    shooting_percentage = models.DecimalField(max_digits=5, decimal_places=2)
    toi = models.CharField(max_length=200)
    sftg = models.DecimalField(max_digits=5, decimal_places=2)
    face_off = models.DecimalField(max_digits=5, decimal_places=2) 
```

我应该如何用 Django 做到这一点`QuerySet`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T18:28:08.783

如果您只想让所有与给定赛季相关联的球员，您可以利用[Django 的反向关系](https://docs.djangoproject.com/en/1.4/topics/db/queries/#following-relationships-backward)

当您将 ForeignKeyField 用于模型时，在本例中为 Season，该模型实例会获得一个属性，该属性允许您获取所有相关对象的查询集。

在您的示例中，您可以使用`season.player_set.all()`.

您可以将可选参数传递`related_name`给`ForeignKeyField`允许您更改季节属性的名称。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-17T16:43:32.583

> 有没有办法做到这一点？

不。Django 的 ORM 一次处理一个模型，并且您从两个表中获取列。对任一模型执行查询，然后访问相应字段以获取相关模型。

# google-maps - 谷歌地图 - 在现有标记周围创建一个多边形

> ID：14383807
> 
> 赞同：2
> 
> 时间：2013-01-17T16:39:25.597
> 
> 标签：google-maps, google-maps-markers, polygon

我不知道这是否可能，但我使用谷歌地图通过叠加层上的标记绘制实体的位置。我希望能够在所有创建的标记周围创建一个多边形或某种其他类型的叠加对象，突出标记的范围，类似于集水区图。在从数据库中检索所有标记并映射范围之前，我不会知道。

任何人都知道如何解决这个问题..？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-18T01:02:20.093

我认为您正在寻找[点的凸包](http://en.wikipedia.org/wiki/Convex_hull)

> 在数学中，欧几里得平面或欧几里得空间中点集 X 的凸包或凸包络是包含 X 的最小凸集。例如，当 X 是平面的有界子集时，凸包可以可视化就像被围绕 X 拉伸的橡皮筋包围的形状。

[在一组随机点上使用 Google Maps API v3 的示例](http://www.geocodezip.com/v3_map-markers_ConvexHull.asp)

# java - Corba 操作返回的序列大小是否有限制？

> ID：14383809
> 
> 赞同：1
> 
> 时间：2013-01-17T16:39:29.647
> 
> 标签：java, sequence, corba

我的 Corba 操作之一是返回联合类型的序列（二维数组）。

在一项测试中，结果证明此操作一次无法处理超过 32 kB 的返回数据。如果整个数组大小超过 32 kB，则客户端的响应只能正确解组至 32 kB。从那时起，它由未初始化的数据填充（最终使解组失败）。

在相同的环境中，还有其他操作能够返回更大尺寸的数据。然而，这是返回序列序列的唯一操作。

我应该注意的一般通过 Corba 传输的序列或数据的长度是否存在限制？

我的环境由一个 32 位 Java 6 客户端（使用标准 Java ORB）和一个 64 位服务器（C，具有 2AB ORB 实现）组成。

到目前为止我已经尝试过：

调整了客户端和服务器端的几个 Orb 属性，这似乎相关 - 超时设置（`transport.ORBTCPReadTimeout`- 超时设置为一个大数字），GIOP 设置（`giop.ORBFragmentSize`，`giop.ORBBufferSize`- 都设置为大数字）。这些设置都没有改变行为。

使用数据包嗅探器，我可以确认数据已发送到客户端。该问题发生在解组期间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-20T01:22:59.253

CORBA 无界序列实际上是有界的——但还不足以让您注意到它。

它们被编组为无符号长整数（或 CORBA 术语中的 a `CORBA::ULong`），它告诉编组引擎接下来每个元素将出现多少次。它应该始终能够包含多达 2,147,483,647 个元素（即 2^32，a 的大小`CORBA::ULong`）。这比 32kb 大得多，所以听起来你的 ORB 有一个错误。

此外，它通过部分填充而不是抛出`CORBA::MARSHAL`异常来静默失败，这一事实非常糟糕。告诉您的 ORB 供应商开始测试基础知识。

# css - 未应用样式

> ID：14383815
> 
> 赞同：2
> 
> 时间：2013-01-17T16:39:43.717
> 
> 标签：css, html, css-selectors

我有一个 html 菜单，开头是这样的：

```
<nav id='main'>
<ul> 
```

我的 CSS 文件是这样的：

```
nav #main ul {
    list-style: none;
} 
```

但由于某种原因，这似乎不起作用......我做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T16:43:04.890

尝试使用

```
nav#main ul {
  list-style: none;
} 
```

即删除和之间的空格`nav`-`#main`使用空格表示`#main`是后代`nav`而不是说`#main`是 id 属性`nav`

[有关 CSS2 中的模式匹配，请参阅此处的文档](http://www.w3.org/TR/CSS2/selector.html#pattern-matching)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T16:45:30.810

空间是[后代选择器](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)。

您正在尝试将此样式应用于：

*   `<ul>`一个对象的所有后代`id="main"`都是一个对象的后代`<nav>`。

您应该改为将样式应用于：

*   带有 的对象的所有`<ul>`后代。`<nav>``id="main"`

可以删除第一个空格：

```
nav#main ul {
   list-style: none;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T16:43:03.927

删除空间

```
nav#main ul {
   list-style: none;
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-17T16:43:10.230

它真的应该是

```
nav#main ul { } 
```

# php - 动态下拉文件上传的文件上传进度

> ID：14383817
> 
> 赞同：0
> 
> 时间：2013-01-17T16:39:44.803
> 
> 标签：php, javascript, html, ajax, file-upload

我做了一个动态下拉文件上传系统，用户可以选择工程流，然后是学期，然后是主题，文件被上传到所需的目录。这正常工作。我遇到了 PHPAcademy 的 Javascript/AJAX 文件上传进度教程，一切正常，直到我陷入困境。

在不添加 javascript 文件（用于上传进度）的情况下，文件会上传到正确的目录中，不会在 firebug 中显示错误，并且还会在文件上传后提供指向文件的链接。

但是我添加JS文件后，上传后链接没有出现，它总是上传到根目录，但显示进度，控制台显示两个错误。

这是我的PHP代码：

```
<?php

    if(isset($_POST['upload']))   { 
      $path1=$_POST['one']."/"; 
      $path2=$_POST['two']."/"; 
      $path3=$_POST['three']."/";   
      $upload_path=$path1.$path2.$path3;
    }
    else  {
          echo "Follow the instructions before uploading a file";
    }    

    if(!empty($_FILES['file'])) {
        foreach($_FILES['file']['name'] as $key => $name) {
            if($_FILES['file']['error'][$key]==0 && move_uploaded_file($_FILES['file']['tmp_name'][$key], $upload_path."$name")) {
                $uploaded[] = $name;
            }
        }
        if(!empty($_POST['ajax'])) {
            die(json_decode($uploaded));
        }   
    }  
?>
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title> SRMUARD - Upload </title>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script type="text/javascript" src="upload.js"></script>        
        <script type="text/javascript">
            function val()
            {
                if(document.uploads.three.selectedIndex == 0)
                {
                    alert("Please choose all the appropriate options");
                }
            }
        </script>   
        <script>
            $(function() {
                $("#text-one").change(function() {
                $("#text-two").load("textdata/" + $(this).val() + ".txt");
                });
                $("#text-two").change(function() {
                $("#text-three").load("textdata/" + $(this).val() + ".txt");
                });
            });
        </script>
    </head>
    <body>
        <div value="<?php $upload_path ?>" id="uploadpath"></div>
        <div id="uploaded">
            <?php
                if(!empty($uploaded)) {
                    foreach($uploaded as $name) {
                        echo 'File Link: '.'<a href="' . $upload_path . $name . '" >', $name, '</a><br/>';
                    }
                }
            ?>
        </div>
        <div id="upload_progress" style="display: none"></div>
        <div>
            <form action="" method="POST" enctype="multipart/form-data" name="upload" id="upload">
                <label for="file">Choose a file: </label><br/>
                    <input type="file" name="file[]" id="file" multiple="multiple"><br/><br/>               
                    <select id="text-one" name="one">                   
                        <option selected value="base">Select Department</option>
                        <option value="CSE" name="cse">Computer Science Engineering</option>
                        <option value="ECE" name="ece">Electronics & Communication Engineering</option>
                        <option value="MECH" name="mech">Mechanical Engineering</option>                        
                    </select><br/><br/> 
                    <select id="text-two" name="two"> //Displays options dynamically using text files
                        <option>Select Semester</option>
                    </select><br/><br/>                  
                    <select id="text-three" name="three"> //Displays options dynamically using text files
                        <option>Select Subject</option>
                    </select><br/><br>  
                    <input type="submit" name="upload" id="submit" value="Upload" onClick="val()" />        
            </form>
        <div>
    </body>
</html> 
```

这是我的javascript代码：

```
var handleUpload = function(event) {

    event.preventDefault();
    event.stopPropagation();

    var fileInput = document.getElementById('file');

    var data = new FormData();

    data.append('ajax', true);

    for(var i = 0; i < fileInput.files.length; ++i) {
        data.append('file[]', fileInput.files[i]);
    }

    var request = new XMLHttpRequest();

    request.upload.addEventListener('progress', function(event) {
        if(event.lengthComputable) {

            var percent = event.loaded / event.total;
            var progress = document.getElementById('upload_progress');

            while(progress.hasChildNodes()) {
                progress.removeChild(progress.firstChild);
            }

            progress.appendChild(document.createTextNode(Math.round(percent * 100) + '%'));
        }
    });

    request.upload.addEventListener('load', function(event) {
        document.getElementById('upload_progress').style.display = 'none';
    });

    request.upload.addEventListener('error', function(event) {
        alert('Upload failed due to some reason!');
    });

    request.addEventListener('readystatechange', function(event) {
        if(this.readyState == 4) {
            if(this.status == 200) {

                var links = document.getElementById('uploaded');
                var uploaded = eval(this.response);
                var div, a;
                var phpval = document.getElementById('uploadpath').value;
                for(var i=0; i < uploaded.length; ++i) {
                    div = document.createElement('div');
                    a = document.createElement('a');
                    a.setAttribute('href', phpval + uploaded[i]);
                    a.appendChild(document.createTextNode(uploaded[i]));
                    div.appendChild(a);
                    links.appendChild(div);
                }

            } else {
                console.log('Server replied with HTTP status ' + this.status);
            }
        }
    });

    request.open('POST','upload.php');
    request.setRequestHeader('Cache-Control','no-cache');

    document.getElementById('upload_progress').style.display = 'block';

    request.send(data);

}

window.addEventListener('load',function(event) {
    var submit = document.getElementById('submit'); 
    submit.addEventListener('click', handleUpload);
}); 
```

控制台中显示的错误是：

```
TypeError: document.uploads is undefined
[Break On This Error]   

if(document.uploads.three.selectedIndex == 0) 
```

和

```
SyntaxError: missing ; before statement upload.js file line 47 which is var uploaded = eval(this.response); 
```

另一个我觉得我犯了错误的地方是：

```
a.setAttribute('href', phpval + uploaded[i]); 
```

phpval 必须对应动态上传链接。我不能在 JS 中使用 $upload_path，所以用它做了一个 div，然后用来获取这样的值：

```
var phpval = document.getElementById('uploadpath').value; 
```

对于演示，你可以参考这个链接，事情会更精确，请打开你的 firebug 控制台并检查错误并帮助我。我无法解决这个问题。

[带有进度指示的动态下拉文件上传](http://ankursinha.net/ARD/upload.php)

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:41:23.820

您可以尝试许多 JQuery 选项。这是来自[Blueimp](http://blueimp.github.com/jQuery-File-Upload/)的一个。希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T13:37:04.163

还要考虑正确放置脚本。有时发生的情况是您放置脚本的位置可能会导致冲突。我可以看到您已经有了动态下拉功能的脚本。尝试将其放在您的表单之后并检查它是否有效。

希望这可以帮助。

# ruby-on-rails - 带有 Java7 的 JRuby 通过代理破坏了 HTTPS 数据

> ID：14383819
> 
> 赞同：3
> 
> 时间：2013-01-17T16:39:46.933
> 
> 标签：ruby-on-rails, https, proxy, jruby, java-7

我正在尝试在我们的 jruby (1.6.8/1.7.2) rails (3.2.11) 项目中使用库 restclient (1.6.7) 和 jrubyopenssl (0.7.3)。它过去在 Java 6 上工作得非常好。现在，当我更新到 Java 7 时，它停止工作了。我发现，需要满足所有这些条件才能重现错误：

*   发布数据
*   通过 HTTPS
*   跨代理
*   使用 Java 7

通信似乎搞砸了，连接的服务器无法解码请求中的数据（甚至无法解码完整的请求）。我知道，这并不容易复制。也许有人知道，如果 Java 7 的实现在 HTTPS 加密方面发生了变化，以及如何解决这个问题。

代码：

```
RestClient.proxy = ENV['https_proxy']
RestClient.post 'https://server.com/path', data,  { 'Content-type' => 'application/json' } 
```

非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T05:02:18.007

我有一些像这样的“时髦”问题，它是从 java 6 到 7。

对我来说，主要区别是“”“新”“”首选加密模式。现在是椭圆曲线和AES。但是我之前有一个完整的堆栈工作良好，压力是巨大的。我决定“降级我的加密算法”并禁用 ECC 和 AES。--> 火焰战会来，我就不解释为什么了。

到目前为止，一切都很好。

这是一个很大的变化，数据包的“大小”变化，握手变化等。

看看这些：[1] - [http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html#knownissues](http://www.oracle.com/technetwork/java/javase/jdk7-relnotes-418459.html#knownissues) ---> 安全会话...

[2] - [http://docs.oracle.com/javase/7/docs/technotes/guides/security/enhancements-7.html](http://docs.oracle.com/javase/7/docs/technotes/guides/security/enhancements-7.html) --> 再次相同..

我希望这些链接能让你走上正确的方向。但我认为你应该禁用 ecc 和 aes 并使用其他方式（RSA？）

# geoip - 仅将 GeoIP 用于美国位置并非 100% 准确

> ID：14383820
> 
> 赞同：1
> 
> 时间：2013-01-17T16:39:48.170
> 
> 标签：geoip

我有一个为使用 GeoIP 数据库而构建的模块。我使用它来获取访问网站的用户的位置，我们可以提供从 YQL 天气中提取的他们所在城市（仅限美国）的当前天气。我发现这个[https://stackoverflow.com/questions/12365078/best-way-to-get-location-weather-details-accurately](https://stackoverflow.com/questions/12365078/best-way-to-get-location-weather-details-accurately)如果不让用户输入他们的位置，它的读数不会非常准确。

到目前为止，它已成功显示 90% 的正确位置，有时我们必须更新 DHCP 租约才能获得正确的位置……但我的客户仍然无法在他们的办公室中找到正确的城市。我对他们的网络连接不太了解，但我想知道它是否正在被转发，等等......

以下是我在模块上获取用户 IP 的方式：

```
function getIpAddresses() {
   $ipAddresses = array();
   if (isset($_SERVER["HTTP_X_FORWARDED_FOR"])) {

  $ipAddresses['proxy'] = isset($_SERVER["HTTP_CLIENT_IP"]) ? $_SERVER["HTTP_CLIENT_IP"] : $_SERVER["REMOTE_ADDR"];
  $ipAddresses['user'] = $_SERVER["HTTP_X_FORWARDED_FOR"];

  } else {
  $ipAddresses['user'] = isset($_SERVER["HTTP_CLIENT_IP"]) ? $_SERVER["HTTP_CLIENT_IP"] : $_SERVER["REMOTE_ADDR"];
  }
   return $ipAddresses;
  } 
```

有没有更好的方法来获取 IP/提高准确性而不要求用户输入他们的位置？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T23:48:36.253

你有几个选择：

*   寻找更好的 GeoIP 数据提供者。有几个免费的数据提供商，根据我的经验，他们在国家层面非常擅长，因为您需要查看商业解决方案的粒度更细。
*   记录他们所在的 IP，即使他们正在更新他们的 IP，他们也可能停留在特定的子网中。将子网硬编码到正确的位置。
*   合并一个 javascript 位置 API，并将该数据发送到服务器。如果客户端计算机是笔记本电脑，它可以提供比简单的 GeoIP 更好的位置信息。

# php - 正则表达式查找数字和括号之间的数字

> ID：14383821
> 
> 赞同：3
> 
> 时间：2013-01-17T16:39:48.177
> 
> 标签：php, regex

我有类似的东西

```
Page 1 of 7 (1-49 of 325) 
```

我需要使用正则表达式找到最后一页。

这是我所拥有的正则表达式

```
<?php

$page = 'Page 1 of 7 (1-49 of 325)';

$matches = array();
$t = preg_match('/of(.*?)\(/s', $page, $matches);
print_r($matches[1]);

?> 
```

它工作正常，它输出 7。

我的问题是我什么时候使用

```
<?php

$page = file_get_contents('http://www.exaample.com');

$matches = array();
$t = preg_match('/of(.*?)\(/s', $page, $matches);
print_r($matches[1]);

?> 
```

我得到了很多文本，但我没有得到输出“7”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:42:00.183

这有效：

```
$t = preg_match('/Page [0-9]+ of ([0-9]+)/i', $page, $matches); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:42:08.103

使用这个正则表达式`\d+(?=\s*\()`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T16:41:38.993

```
<?php
$str = 'Page 1 of 7 (1-49 of 325)';
preg_match('/\([0-9]+\-([0-9]+) of [0-9]+\)/', $str, $matches);
var_dump($matches); 
```

未测试。

# bash - 从文件中间删除“#”注释行

> ID：14383823
> 
> 赞同：2
> 
> 时间：2013-01-17T16:39:51.750
> 
> 标签：bash, shell

我想从文件中间删除以“#”开头的注释行，而不删除文件顶部的标题注释行。如何使用 shell 脚本和标准 Unix 工具来做到这一点？

```
#DO NOT MODIFY THIS FILE.
#Mon Jan 14 22:25:16 PST 2013
/test/v1=1.0
#PROPERTIES P1\.   <------REMOVE THIS 
/test/p1=1.0
/test/p2=1.0
/test/p3=3.0
/test/p41=4.0
/test/v6=1.0
#. P2 PROPERTIES   <------REMOVE THIS
/test/p1=1.0
/test/p2=1.0
/test/p3=3.0
/test/p41=4.0
/test/v6=1.0
.................
................. 
```

输出

```
#DO NOT MODIFY THIS FILE.
#Mon Jan 14 22:25:16 PST 2013
/test/v1=1.0
/test/p1=1.0
/test/p2=1.0
/test/p3=3.0
/test/p41=4.0
/test/v6=1.0
/test/p1=1.0
/test/p2=1.0
/test/p3=3.0
/test/p41=4.0
/test/v6=1.0
.................
................. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T16:45:58.943

你可以试试[awk](http://www.gnu.org/software/gawk/manual/gawk.html)：

```
awk 'NR==1 || NR==2 || !/^#/' file.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-17T16:51:28.447

如果您不想使用 awk：

```
head -n 2 file.txt > output.txt
grep -v "^#.*" file.txt >> output.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T16:51:35.677

您想回显以“#”开头的行，但仅在开头，仅使用 bash？以布尔值开头`start=true`；然后逐行进行，`start=false`在该行不以 开头时设置`#`，并且仅当您在开头或该行不以 开头时才回显每一行`#`。

这是文件`script`：

```
#!/bin/bash

start=true
while read line; do
    if $start; then
        if [ "${line:0:1}" != "#" ]; then
            start=false
        fi
    fi
    if $start || [ "${line:0:1}" != "#" ];  then
        echo "${line}"
    fi
done 
```

运行它：

```
$ cat input
#DO NOT MODIFY THIS FILE.
#Mon Jan 14 22:25:16 PST 2013
/test/v1=1.0
#PROPERTIES P1.
/test/p1=1.0
/test/p2=1.0
/test/p3=3.0
/test/p41=4.0
/test/v6=1.0
#. P2 PROPERTIES
/test/p1=1.0
/test/p2=1.0
/test/p3=3.0
/test/p41=4.0
/test/v6=1.0
$ ./script < input
#DO NOT MODIFY THIS FILE.
#Mon Jan 14 22:25:16 PST 2013
/test/v1=1.0
/test/p1=1.0
/test/p2=1.0
/test/p3=3.0
/test/p41=4.0
/test/v6=1.0
/test/p1=1.0
/test/p2=1.0
/test/p3=3.0
/test/p41=4.0
/test/v6=1.0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T18:49:23.613

使用 GNU sed，你有

```
sed '3,${/^#/d}' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T21:31:56.857

这可能对你有用（GNU sed）；

```
 sed '/^[^#]/,$!b;/^#/d' file 
```

# neo4j - 在 neo4j grap db 中发现节点属性

> ID：14383834
> 
> 赞同：7
> 
> 时间：2013-01-17T16:40:16.733
> 
> 标签：neo4j, graph-databases, cypher

我在 Neo4j 中发现了一个新的图形数据模型，我想知道如何列出所有可能的节点属性，但如果可能的话不列出它们的值。

对于关系，我发现这个非常方便的通用密码查询：

```
start n=node(*)
match n-[r]-m
return distinct type(r) 
```

它返回一个有用的属性列表，您可以开始使用它来更具体地查询图形：

```
==> +------------+
==> | type(r)    |
==> +------------+
==> | "RATED"    |
==> | "FRIEND"   |
==> | "DIRECTED" |
==> | "ACTS_IN"  |
==> +------------+
==> 4 rows
==> 0 ms
==> 
```

除了节点属性之外，是否有任何函数/表达式允许这样做？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T19:25:41.930

`type()`不返回关系属性，而是关系*类型*。

节点和关系都可以有属性，但只有关系可以有类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-06T05:16:47.560

要列出图形数据库中节点的所有属性，您可以尝试使用以下密码：

```
match (n) 
WITH distinct keys(n) as properties 
UNWIND properties as property 
return distinct property 
```

谢谢， 维沙尔

# java - 从文件中读取字符串数据

> ID：14383835
> 
> 赞同：0
> 
> 时间：2013-01-17T16:40:23.380
> 
> 标签：java, bufferedreader

```
public class Main {

public static void main(String[] args)
{
int ch = 0;
do
{

Scanner in = new Scanner(System.in);

String s;
System.out.println("Enter the part number");
s=in.nextLine();

try{

  BufferedReader br = new BufferedReader(new FileReader("C:\\Users\\Ankit\\Documents\\NetBeansProjects\\tcs_1\\number.txt"));
  BufferedReader Br = new BufferedReader(new FileReader("C:\\Users\\Ankit\\Documents\\NetBeansProjects\\tcs_1\\number1.txt"));

  String strLine;
  int flag=0;
  while ((strLine = br.readLine()) != null)
  {
        if(strLine.equals(s))
        {
            flag=1;
            System.out.println ("Part Number exists in 1");
            break;
        }
        else
        {
            flag=0;
            System.out.println ("Part Number doesnot exist in 1");
            break;
        }

    }

    if(flag==0)
    {

        while ((strLine = Br.readLine()) != null)
        {
            if(strLine.equals(s))
            {
                System.out.println ("Part Number exists in 2");
                break;
            }
     else
            {
                System.out.println("File does not exist in 2");
                break;
     }

        }
    }
        System.out.println ("Do you want to continue-Press1 for yes and 2 for no");

        ch= in.nextInt();
        br.close();
        Br.close();

}
catch (Exception e)
{
    System.err.println("Error: " + e.getMessage());
  }
}
while(ch==1);
  }
} 
```

这是我从 2 个差异文本文件中搜索用户给定字符串的程序。它工作正常，但只搜索第一行。例如：如果一个文件有 1000 1001 1002 它只会搜索 1000。我如何转到下一行并继续使用该`.equals()`方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:47:05.063

您应该使用 Scanner 而不是 BufferedReader，因为它是较新的课程，我觉得这项任务做得更好。特别是因为您已经在代码中的其他地方使用了 Scanner 并因此将其导入。下面是一个扫描仪，它将读取文件中的所有行，同时还有下一个要读取。

```
import java.io.File;
import java.io.FileNotFoundException;
import java.util.Scanner;

public class JavaApplication32 
{
    public static void main(String[] args) 
    {
        Scanner keyboard = new Scanner(System.in);
        Scanner scanner1 = null;
        Scanner scanner2 = null;
        String partCheck;
        String repeatLoop;
        boolean isInOne;
        boolean isInTwo;

        File file1 = new File("data1.txt");
        File file2 = new File("data2.txt");

        try
        {
            scanner1 = new Scanner(file1);
            scanner2 = new Scanner(file2);
        }
        catch(FileNotFoundException e)
        {
            e.printStackTrace();
        }
            do
            {
                isInOne = false;
                isInTwo = false;
                System.out.println("Enter the part number");
                partCheck = keyboard.nextLine();
                while (scanner1.hasNextLine() && !isInOne)
                {
                    String line = scanner1.nextLine();
                    if(line.equals(partCheck))
                    {
                        System.out.println("Part Number exists in 1");
                        isInOne = true;
                    }
                }
                if(!isInOne)
                {
                    System.out.println("Part Number does not exist in 1");
                }
                while(scanner2.hasNextLine() && !isInOne && !isInTwo)
                {
                    String line = scanner2.nextLine();
                    if(line.equals(partCheck))
                    {
                        System.out.println("Part Number exists in 2");
                        isInTwo = true;
                    }
                }
                if(!isInTwo)
                {
                    System.out.println("Part Number does not exist in 2");
                }
                System.out.println("Do you want to continue? (Y/N)");
                repeatLoop = keyboard.nextLine();
            } while(repeatLoop.equalsIgnoreCase("y"));
        scanner1.close();
        scanner2.close();
    }
} 
```

示例文本文件 data1.txt：

```
Test1
Test2
Test3
Test4 
```

示例测试文件 data2.txt

```
Check1
Check2
Check3
Check4 
```

使用这些数据文件运行代码时的示例标准输出：

```
run:
Enter the part number
Test1
Part Number exists in 1
Part Number does not exist in 2
Do you want to continue? (Y/N)
y
Enter the part number
Check1
Part Number does not exist in 1
Part Number exists in 2
Do you want to continue? (Y/N)
n
BUILD SUCCESSFUL (total time: 19 seconds) 
```

您也不应该将所有读取的信息放在一个循环中。通过将 do 放在顶部，您可以有效地继续创建一组新的 BufferedReader 并将它们命名为相同的事情并告诉他们做同样的事情，然后告诉他们在第一次点击后中断。如果你真的摆脱了休息，你会遇到更多问题，因为所有这些其他的东西都在不应该出现的循环中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:45:59.057

既然你用过

```
 break; 
```

在 while 循环中，它将在检查第一行后退出循环。尝试删除中断；如果您想阅读所有行。

# sql - 将同一记录的行连接到一行

> ID：14383836
> 
> 赞同：0
> 
> 时间：2013-01-17T16:40:25.090
> 
> 标签：sql, sql-server-2008, concatenation

您好，我需要在同一行中包含员工的所有任务。有些员工有 1 个任务，有些有 3 个或更多。这是进入 sproc 并带回该记录下的所有分配。

数据库中包含 3 条记录的记录示例：
John doe - assign1
John doe - assign2
John doe - assign3

期望的结果：
3、assign1、assign2、assign3

数据库中带有 1 条记录的记录示例：
John doe - assign1

期望的结果：
1，assign1

这是我到目前为止所拥有的，但无法让它发挥作用。

```
 SELECT cast(count(*) as varchar(10))+', ' + min([Assign1])+', '+
max([Assign1]), max([Assign1])
From assignment
where year = '2012'
and first_name = 'firstname'
and last_name = 'lastname' 
```

这是愚蠢的表结构：

```
Create INTO [database].[dbo].[assignment]
           ([employee_key]
           ,[last_name]
           ,[first_name]
           ,[assignment_code]
           ,[assignment_desc] ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:55:22.850

我会考虑使用该`STUFF`命令。如果你有一个 ID 列（需要你的表模式），这可以优化，但是给定上面的代码，如下所示：

```
Select cast(count(*) as varchar) + ', ' +
   stuff((select  ', '+A2.Assign1
         from Assignment A2
         where year = '2012'
             and first_name = 'john'
             and last_name = 'doe'
         for xml path(''), type).value('.', 'nvarchar(max)'), 1, 2, '')
FROM Assignment A1
WHERE year = '2012'
   and first_name = 'john'
   and last_name = 'doe' 
```

还有[SQL 小提琴](http://www.sqlfiddle.com/#!3/2dd19/3)。

这里没有对 WHERE 子句进行两次硬编码：

```
Select count(*), 
   stuff((select  ', '+A2.Assign1
         from Assignment A2
         where A2.Year = A1.Year and 
            A2.First_Name = A1.First_Name and 
            A2.Last_Name = A1.Last_Name
         for xml path(''), type).value('.', 'nvarchar(max)'), 1, 2, '')
FROM Assignment A1
WHERE year = '2012'
    and first_name = 'john'
    and last_name = 'doe'
GROUP BY year, first_name, last_name 
```

祝你好运。

# c# - 将报表查看器 PDF 附加到 Outlook 电子邮件 C#、WINForms

> ID：14383838
> 
> 赞同：0
> 
> 时间：2013-01-17T16:40:27.470
> 
> 标签：c#, winforms, reporting-services

我正在尝试将从 ReportViewer 控件生成的 PDF 附加到 Outlook 电子邮件。我有 Office 2013。

当我尝试它时，会发生以下情况（例外：“对不起，出了点问题。您可能想再试一次。”有什么想法吗？

![将报表查看器附加到电子邮件](../Images/e53a0c0cc7dc07a8a360d008a2813035.png)

```
private void btnEmail_Click(object sender, EventArgs e)
    {
        Warning[] warnings;
        string[] streamids;
        string mimeType;
        string encoding;
        string filenameExtension;

        byte[] bytes = reportViewer1.LocalReport.Render(
            "PDF", null, out mimeType, out encoding, out filenameExtension,
            out streamids, out warnings);

        using (FileStream fs = new FileStream("Confirmation Letter.pdf", FileMode.Create))
        {
            fs.Write(bytes, 0, bytes.Length);
            School school = School.FromID(Convert.ToInt32(booking.School));

            Outlook.Application outlookApp = new Outlook.Application();
            Outlook.MailItem mailItem = (Outlook.MailItem)outlookApp.CreateItem(Outlook.OlItemType.olMailItem);
            mailItem.Subject = SystemData.SystemInformation.GetValue("LetterSubject");
            mailItem.To = school.MainEmail;
            mailItem.Body = SystemData.SystemInformation.GetValue("LetterMessage");
            mailItem.Importance = Outlook.OlImportance.olImportanceLow;

            Attachment att = new Attachment(new MemoryStream(bytes), "Confirmation Letter.pdf");

            mailItem.Attachments.Add(att);
            mailItem.Display(true);
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T05:30:57.237

当我研究outlook.MailItem.Attatchment.add() 函数时，它接受两个参数： 1\. 您要作为附件附加的文件的物理路径。2\. 一个邮件项目对象，它已经有一个文件作为附件。（这又是一个物理文件路径。）

所以我们必须为attatchment.add() 方法传递一个物理文件路径

因此，在您的情况下，您必须将渲染流保存为硬盘上的文件，然后在此方法中传递文件的物理路径。

例如：MailItem.Attachment.add(@"C:\temp\abc.pdf");

供参考通过以下链接

[http://msdn.microsoft.com/en-us/library/office/ff869553.aspx](http://msdn.microsoft.com/en-us/library/office/ff869553.aspx)

如果满意，标记答案。

快乐的编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-28T07:08:30.440

使用此代码，我认为这将起作用。

```
Microsoft.Office.Interop.Outlook.Application oApp = new Microsoft.Office.Interop.Outlook.Application();
Microsoft.Office.Interop.Outlook.MailItem oMsg = (Microsoft.Office.Interop.Outlook.MailItem)oApp.CreateItem(Microsoft.Office.Interop.Outlook.OlItemType.olMailItem);

oMsg.To = "";
oMsg.Subject = "Here comes your subject";
oMsg.BodyFormat = Microsoft.Office.Interop.Outlook.OlBodyFormat.olFormatHTML;
oMsg.HTMLBody = "text body"; //Here comes your body;
oMsg.Attachments.Add("c:/yourSavedFile.pdf", Microsoft.Office.Interop.Outlook.OlAttachmentType.olByValue, Type.Missing, Type.Missing);
oMsg.Display(true); 
```

# ios - Xcode 没有复制我文件夹中的文件

> ID：14383842
> 
> 赞同：0
> 
> 时间：2013-01-17T16:40:31.957
> 
> 标签：ios, xcode, build, copy

在我的构建过程中，我的文件并不总是被复制。即使我修改它们。

它是一个正在构建的 Web 应用程序，并且未复制的文件夹是：HTML（蓝色文件夹图标）它引用了磁盘上的 HTML 文件夹。

它似乎没有复制。

我试过做一个运行脚本说 Shell: /bin/sh Script: touch -cm ${SRCROOT}

它没有任何区别。

我如何强制 xcode 始终复制每个文件？

例如一个脚本来触摸每个文件和文件夹以确保它被复制？

我在这里死胡同！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:41:27.247

蓝色文件夹代表文件夹引用，它是一种文件引用，就像您项目中对 .h 和 .m 文件的所有引用一样。

Xcode 关心的唯一修改时间是被引用项的修改时间——在本例中是文件夹。不是文件夹中的任何项目，也不是任何后代项目，也不是任何祖先文件夹（例如您的项目目录，这就是`$SRCROOT`所指的）。

因此，您需要专门触摸文件夹。每当您修改文件夹中的任何内容时，您都需要触摸该文件夹。

如果您在文件夹中添加或删除文件，则这不适用，因为这被视为修改文件夹本身。

如果您真的想每次都无条件地复制文件夹，您可以在 Copy Files 阶段之前创建一个 shell 脚本阶段，该阶段将文件夹作为输入并将其生成为输出，并*专门接触该文件夹*。之后的 Copy Files 阶段会看到文件夹已被“修改”并重新复制。

如果你这样做，预计构建时间会很长。

# java - Java中将JTable的值替换为计算结果的值

> ID：14383849
> 
> 赞同：1
> 
> 时间：2013-01-17T16:40:47.327
> 
> 标签：java, swing, jtable, defaulttablemodel

我想替换索引 [0][2] 中变量数组的值，列标题的名称为“1/y”。以前的值是 0.0，我想用计算结果的值替换它，但是当我尝试显示它时，它的值仍然是 0.0，这是我的代码

```
titleColoumn = new Object[]{"Time (Second)","Medicine", "1/y",  "x2", "X/Y", "Y^", "Error"};
                                    //0    1   2   3   4   5   6
         allData = new Double[][]  {{1.0,1.02,0.0,0.0,0.0,0.0,0.0},
                                    {2.0,0.667,0.0,0.0,0.0,0.0,0.0},
                                    {3.0,0.367,0.0,0.0,0.0,0.0,0.0},
                                    {4.0,0.278,0.0,0.0,0.0,0.0,0.0},
                                    {5.0,0.237,0.0,0.0,0.0,0.0,0.0},
                                    {6.0,0.187,0.0,0.0,0.0,0.0,0.0},
                                    {7.0,0.155,0.0,0.0,0.0,0.0,0.0},
                                    {8.0,0.156,0.0,0.0,0.0,0.0,0.0},
                                    {9.0,0.142,0.0,0.0,0.0,0.0,0.0},
                                    {10.0,0.111,0.0,0.0,0.0,0.0,0.0},
                                    {11.0,0.12,0.0,0.0,0.0,0.0,0.0},
                                    {12.0,0.097,0.0,0.0,0.0,0.0,0.0},
                                    {14.0,0.089,0.0,0.0,0.0,0.0,0.0},
                                    {15.0,0.079,0.0,0.0,0.0,0.0,0.0},
                                    {0.0,0.0,0.0,0.0,0.0,0.0,0.0}};

    tableObservation = new DefaultTableModel(allData, titleColoumn);
    table.setModel(tableObservation);

    int row,coloumn;
    //calculation 1/y
    row = 0;
    coloumn = 1;
    int inputRow = 0;
    int inputColoumn = 2;
    double onePerY;
    for(int a=0;a<allData.length;a++){
        onePerY = 1/allData[row][coloumn];
        //replace value
        allData [inputRow][inputColoumn] = onePerY;
        inputRow++;
        row++;
        System.out.println(onePerY);
    } 
```

我应该怎么做才能更换它？您提供的所有帮助，我将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:59:21.363

您更新数组值而不是`TableModel`值。为它们使用`jTable.getModel().setValueAt()`传递 inputRow、inputColoumn 和适当的值。您的模型必须是可编辑的。如果您使用`DefaultTableModel`它，默认情况下是可编辑的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:12:23.143

阅读[DefaultTableModel](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/DefaultTableModel.html)并使用它来存储表的数据。当数据发生变化时，您必须在表模型中更新。

也看看[如何使用表格](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)

# java - Java - 深度优先搜索

> ID：14383852
> 
> 赞同：1
> 
> 时间：2013-01-17T16:40:52.367
> 
> 标签：java, search, depth-first-search

我已经在 J​​ava 中实现了两种算法，在测试深度优先搜索时，当有 12 个节点时，它似乎花费了令人难以置信的时间，当使用 A* 时，它在几秒钟内完成，我只是想知道这是否可以预期或难道我做错了什么？它现在在后台运行搜索，因为我输入了这个并且已经持续了几分钟。我通常不会介意，但我必须测试多达 500 个节点，以这种速度可能需要几天时间，这是我应该预料到的还是我做错了什么？

谢谢！

* * *

```
import java.util.*;

@SuppressWarnings({ "rawtypes", "unchecked" })

public class DepthFirstSearch {

    Routes distances;
    static Routes routes;

    int firstNode;
     String result = new String();

    ArrayList firstRoute, bestRoute;
    int nodes = 0;
    int routeCost = 0;
    int bestCost = Integer.MAX_VALUE;

    public DepthFirstSearch(Routes matrix, int firstNode) { //new instance

        distances = matrix;
        this.firstNode = firstNode;
    }

    public void run () { //run algorithm
        long startTime = System.nanoTime();
        firstRoute = new ArrayList();
        firstRoute.add(firstNode);
        bestRoute = new ArrayList();
        nodes++;
        long endTime = System.nanoTime();

        System.out.println("Depth First Search\n");
        search(firstNode, firstRoute);
        System.out.println(result);
        System.out.println("Visited Nodes: "+nodes);
        System.out.println("\nBest solution: "+bestRoute.toString() + "\nCost: "+bestCost);
        System.out.println("\nElapsed Time: "+(endTime-startTime)+" ns\n");
    }

    /**
     * @param from node where we start the search.
     * @param route followed route for arriving to node "from".
     */
    public void search (int from, ArrayList chosenRoute) {

        // we've found a new solution
        if (chosenRoute.size() == distances.getCitiesCount()) {

            chosenRoute.add(firstNode);
            nodes++;

            // update the route's cost
            routeCost += distances.getCost(from, firstNode);

            if (routeCost < bestCost) {
                bestCost = routeCost;
                bestRoute = (ArrayList)chosenRoute.clone();
            }

            result += chosenRoute.toString() + " - Cost: "+routeCost + "\n";

            // update the route's cost (back to the previous value)
            routeCost -= distances.getCost(from, firstNode);
        }
        else {
            for (int to=0; to<distances.getCitiesCount(); to++){
                if (!chosenRoute.contains(to)) {

                    ArrayList increasedRoute = (ArrayList)chosenRoute.clone();
                    increasedRoute.add(to);
                    nodes++;

                    // update the route's cost
                    routeCost += distances.getCost(from, to);

                    search(to, increasedRoute);

                    // update the route's cost (back to the previous value)
                    routeCost -= distances.getCost(from, to);
                }
            }
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:00:22.027

您没有正确更新 selectedRoute；您总是将具有相同值的“firstNode”添加到您的数组列表中，我认为您应该添加访问过的节点。我稍后会尝试检查

# java - 在不影响插入顺序的情况下修改 LinkedHashMap 中的键和值

> ID：14383855
> 
> 赞同：2
> 
> 时间：2013-01-17T16:41:05.073
> 
> 标签：java, collections

我从文件中读取行并将它们加载到 a`LinkedHashMap`中以保留插入顺序。在我的算法的某个时刻，我必须同时修改一个键和它的对应值，而不影响插入顺序。这是一个例子：

这是我的初始内容`LinkedHashMap`

```
"k1" -> "v1"
"k2" -> "v2"
"k3" -> "v3"
"k4" -> "v4"
"k5" -> "v5" 
```

我想修改`k3`，`v3`以便我得到：

```
"k1" -> "v1"
"k2" -> "v2"
"k33" -> "v33"
"k4" -> "v4"
"k5" -> "v5" 
```

但是如果我使用

```
map.remove("k3");
map.put("k33", "v33"); 
```

然后我得到的是：

```
"k1" -> "v1"
"k2" -> "v2"
"k4" -> "v4"
"k5" -> "v5"
"k33" -> "v33" 
```

这是一种完全正常的行为，但不是我想做的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-17T17:07:33.410

如果性能不重要，我可以提供一种解决方法

```
public class ReplaceLinkedHashMap<K, V> extends LinkedHashMap<K, V> {

    public void replace(K oldKey, K newKey, V newValue) {
        LinkedHashMap<K, V> tmp = new LinkedHashMap<>(this);
        clear();
        for (Entry<K, V> e : tmp.entrySet()) {
            if (e.getKey().equals(oldKey)) {
                put(newKey, newValue);
            } else {
                put(e.getKey(), e.getValue());
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-17T16:45:06.100

如果输入的顺序很重要，我会保留一个单独的列表来维护该顺序 - 这将使随后查看您的代码的任何人都清楚发生了什么。

# ruby-on-rails-3 - Rails 3 - 回形针 - 电子邮件附件

> ID：14383857
> 
> 赞同：0
> 
> 时间：2013-01-17T16:41:13.960
> 
> 标签：ruby-on-rails-3, paperclip, actionmailer

尝试在 Rails 3 中通过电子邮件发送回形针附件。

发票型号：

```
class Invoice < ActiveRecord::Base

has_attached_file :attachment,
:url => "http://server/app/attachments/:id/:style/:basename.:extension",
:path => ":rails_root/public/attachments/:id/:style/:basename.:extension"
validates_attachment_presence :attachment
validates_attachment_size :attachment, :less_than => 5.megabytes

end 
```

account_mailer：

```
 def email_approver(invoice)
    @subject          = 'Invoice Approval Request'
    @body["invoice"]  = invoice
    #attachment  "application/octet-stream" do |a|
          #a.body = File.read(invoice.attachment.to_file.path)
          #a.filename = invoice.attachment_file_name
      #end
    @recipients = [invoice.approver_email, invoice.alternate_approver_email].compact
    @from             = "ADMIN"
    @sent_on          = Time.now
    @headers          = {}    
 end 
```

错误：

```
NoMethodError (undefined method `filename=' for #<Mail::Part:0x00000002566dd0>): 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:23:04.220

你有没有尝试过这样的事情

```
attachments[invoice.attachment_file_name] = File.read(invoice.attachment.to_file.path) 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-26T09:26:05.107

这是一个老问题，但这是我的工作解决方案：

```
attachments[mymodel.attachment.filename] = File.read(mymodel.attachment.path) 
```

# ruby - jmongo中的身份验证异常

> ID：14383868
> 
> 赞同：0
> 
> 时间：2013-01-17T16:41:51.490
> 
> 标签：ruby, mongodb, jruby

我在 Jruby 1.6.7 下运行的 Rails 应用程序中使用 Jmongo 1.1.5 我正在尝试连接到启用身份验证的 mongodb 实例。使用 db.auth('user', 'pass') 从 mongo CLI 工具执行此操作没有任何问题。

在我的 Jruby 应用程序中，我这样连接：

```
client = Mongo::Connection.new
db = client.db('my_database')
db.authenticate('user', 'pass') 
```

当服务器不使用 --auth 运行时，我以这种方式使用 mongo 没有问题。#authenticate 调用始终返回具有有效凭据的 false。进一步挖掘，我发现在 gems/jmongo-1.1.5/lib/jmongo/db.rb 中捕获并吃掉了一个异常：

```
caught in authenticate:  user: cannot convert instance of class 
org.jruby.RubyString to
class [C lib/jmongo/db.rb:50:in `authenticate' 
```

（我破解了 gem 的 db.rb 以查看异常）

有没有人见过这样的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:31:38.903

原来是一个jmongo错误修复

[https://github.com/marclove/jmongo/commit/788244d6b575d49715809e7668e3ad548951e6b6](https://github.com/marclove/jmongo/commit/788244d6b575d49715809e7668e3ad548951e6b6)

要解决此问题，请像这样包装密码：

```
db.authenticate('user', java.lang.String.new('password').toCharArray) 
```

# c# - C# Powershell 脚本失败：“无法获取区域信息”

> ID：14383872
> 
> 赞同：3
> 
> 时间：2013-01-17T16:41:57.190
> 
> 标签：c#, powershell, dns, windows-server-2012

我创建了一个实用地创建 DNS NS 记录的小站点。当我在 PS（在我的 site.com 服务器上）中执行我的代码时，它运行良好，但是当我从网站（托管在我的 site.com 服务器上）运行它时，它失败并出现错误：“创建 IP 1.1.1.1 时出错。错误：无法在服务器 myServer 上获取 site.com 的区域信息”

我的 PS 脚本是：

```
Add-DnsServerZoneDelegation site.com –childzonename lab00012 –IPAddress 1.1.1.1 –nameserver 1.1.1.1 
```

我的 C# 代码是：

```
var labString = "lab" + tenantString;
var scriptText = "Add-DnsServerZoneDelegation site.com –childzonename " + labString
            + " –IPAddress " + ipAddress + " –nameserver " + ipAddress;
using (var runspace = RunspaceFactory.CreateRunspace())
{
    runspace.Open();
    Pipeline pipeline = runspace.CreatePipeline();
    pipeline.Commands.AddScript(scriptText);
    var results = pipeline.Invoke();;
} 
```

我已经确认该站点将运行 PS 命令，例如

```
Get-WmiObject Win32_BIOS -Namespace 'root\\CIMV2' -computername . 
```

没有问题。

Powershell 版本是 3.0，服务器是运行 IIS 6.2 的 Windows Server 2012。

非常感谢任何帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T18:40:22.983

我发现 Power Shell 需要增强权限才能更改 DNS（以及相关的文件夹和文件）。经过一番研究，我最终使用了这段代码：

```
pipeline.Commands.AddScript("$pw= convertto-securestring 'adminPassword' -asplaintext –force");
pipeline.Commands.AddScript("$user = New-Object Management.Automation.PSCredential('machine\\Administrator', $pw)");
pipeline.Commands.AddScript("Invoke-Command -ComputerName . -Credential $user -ScriptBlock {"+scriptText+"}"); 
```

我认识到硬编码我的管理员密码是错误的形式，但是时间不多了，我无法找到更好的解决方案。

如果其他人有更好的解决方案，我愿意接受。

# java - Jasper 在 Liferay 中报告 Image Servlet

> ID：14383880
> 
> 赞同：1
> 
> 时间：2013-01-17T16:42:18.263
> 
> 标签：java, jasper-reports, portlet, liferay-6

我使用 Liferay CE 6.1 创建了一个 portlet，它查询 Oracle 数据库并显示来自 Jasper 4.5 的 HTML、PDF 和 Excel 报告。我正在尝试让 HTML 报告显示图像。我的 PDF 和 Excel 报告中有图像。我可以相信，从这里正确调用了报告，因为信息显示在那里，动态查询正常工作。我相信我的设置正确，但我无法显示图像。我是 Java 新手，所以我试图确定调试它的最佳方法。我的代码在这里：

报告生成代码：

```
Connection conn = myconnection.getconnection;
JasperPrint print = null;
String reportPath = "/html/reports/MyReport.jasper";

PortletContext context = getPortletContext();
InputStream reportStream = context.getResourceAsStream(reportPath);
Map<String, Object> map = new HashMap<String, Object>();
print = JasperFillManager.fillReport(reportStream, map, conn); 
```

HTML 导出器类：

```
JRHtmlExporter exporter = new JRHtmlExporter();
request.getPortletSession().setAttribute(ImageServlet.DEFAULT_JASPER_PRINT_SESSION_ATTRIBUTE,printObject);
exporter.setParameter(JRExporterParameter.JASPER_PRINT, printObject);
exporter.setParameter(JRExporterParameter.OUTPUT_STRING_BUFFER, outputBuffer);
exporter.setParameter(JRHtmlExporterParameter.IMAGES_URI, "../servlets/image?image=");
exporter.setParameter(JRHtmlExporterParameter.IS_WHITE_PAGE_BACKGROUND,java.lang.Boolean.FALSE);
exporter.setParameter(JRHtmlExporterParameter.IGNORE_PAGE_MARGINS, java.lang.Boolean.TRUE);
exporter.exportReport(); 
```

我的 web.xml 中有这段代码

```
<servlet>
    <servlet-name>ImageServlet</servlet-name>
    <servlet-class>net.sf.jasperreports.j2ee.servlets.ImageServlet</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>ImageServlet</servlet-name>
    <url-pattern>/servlets/image</url-pattern>
</servlet-mapping> 
```

我所读到的每一个地方都让我相信我有这个权利，但我在 HTML 版本中一无所获。报告的 PDF 和 XLS 版本均显示图形和图表。关于如何调试或排除故障并追踪它的任何线索？

谢谢，乔治

# ruby-on-rails - 如何使用 to_s 将哈希值作为字符串返回

> ID：14383884
> 
> 赞同：0
> 
> 时间：2013-01-17T16:42:32.060
> 
> 标签：ruby-on-rails, ruby, string, hash

这是我的代码：

```
def return_rider_values(pol_option, pro_endorsement, prop_coverage, *par)

  rider_values
  par.each do |p|
    rider_values << RiderValue.find_all_by_rider_id(p)
  end

  rider_hash = { }
  rider_values.each do |rv|
    if rv.attributes["name"].downcase == "yes"
      rider_hash.merge!({par[0].to_s => rv.attributes['id'].to_s})
    elsif rv.attributes["position"] == pol_option.to_i && rv.attributes["rider_id"] == par[1]
      rider_hash.merge!({par[1].to_s => rv.attributes["id"].to_s})
    elsif rv.attributes["position"] == prop_coverage.to_i && rv.attributes["rider_id"] == par[2]
      rider_hash.merge!({par[2].to_s => rv.attributes["id"].to_s})
    elsif rv.attributes["position"] == pro_endorsement.to_i && rv.attributes["rider_id"] == par[3]
      rider_hash.merge!({par[3].to_s => rv.attributes["id"].to_s})
    end
  end
  rider_hash
end 
```

输出如下所示：

```
rider_hash  #=> '22' -> 58
                '23' -> 61
                '25' -> 66
                '26' -> 68 
```

我期待，并且显然需要，因为它后来无法正常工作：

```
rider_hash  #=> '22' -> '58'
                '23' -> '61'
                '25' -> '66'
                '26' -> '68' 
```

我不知道为什么程序后面的查找函数希望 id 是字符串而不是整数。我只知道它确实如此，而且我无法更改它，因为许多其他方法都在使用它。

我有`to_s`哈希键和值。我意识到在 Ruby 1.9`to_s`中是一个别名，`inspect`但即使在[Hash](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-inspect)文档中它也说，`inspect or to_s`应该“将此哈希的内容作为字符串返回”。

那么为什么只有键作为字符串返回呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T20:02:50.230

你有一个哈希数组，所以试试这个：

```
def return_rider_values
    par = [1,2,3,6]
    rider_hash = {}
    rider_values = [element1: {:attributes => {:id => 1, :name => 'yes', :position => 1, :rider_id => 1}}, 
                    element2: {:attributes => {:id => 2, :name => 'no', :position => 2, :rider_id => 2}},
                    element3: {:attributes => {:id => 3, :name => 'something', :position => 1, :rider_id => 3}}, 
                    element4: {:attributes => {:id => 4, :name => 'something_else', :position => 2,   :rider_id => 6}}]

    rider_values.each_with_index do |hash, idx|
        rider_values[idx].each_pair do |k, v|
            if v[:attributes][:name].downcase == "yes"
                rider_hash.merge!({par[0].to_s => v[:attributes][:id].to_s})

            elsif v[:attributes][:position] == 2 && v[:attributes][:rider_id] == par[1]
                rider_hash.merge!({par[1].to_s => v[:attributes][:id].to_s})

            elsif v[:attributes][:position] == 3 && v[:attributes][:rider_id] == par[2]
                rider_hash.merge!({par[2].to_s => v[:attributes][:id].to_s})

            elsif v[:attributes][:position] == 4 && v[:attributes][:rider_id] == par[3]
                rider_hash.merge!({par[3].to_s => v[:attributes][:id].to_s})

            end
        end
    end
rider_hash
end

test = return_rider_values

puts test 
```

输出：`#=> {"1"=>"1", "2"=>"2"}`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T21:28:27.813

通过添加以下内容，我最终得到了我想要的：

```
rider_hash.each{ |_,v| v.replace "'#{v}'"} 
```

但这似乎是一个肮脏的解决方案。

# google-chrome-extension - 后台自动提交表单

> ID：14383890
> 
> 赞同：0
> 
> 时间：2013-01-17T16:42:51.603
> 
> 标签：google-chrome-extension

我想创建一个在后台持续运行的 Google Chrome 扩展程序，即使 Chrome 窗口关闭 - 这就是 a`Background Page`的用途，对吗？还是我应该看别的东西？

基本上我想做的是`setTimeout()`每 5 分钟加载一个页面，如果它显示一个登录页面，则使用给定的用户名和密码自动登录，否则它什么也不做。

这只是为了保持会话活着......

这可能吗？

# c# - MVC 4 单击按钮以获取部分页面

> ID：14383893
> 
> 赞同：0
> 
> 时间：2013-01-17T16:42:57.880
> 
> 标签：c#, ajax, asp.net-mvc-4

我正在创建一个带有搜索属性的页面。用户将在搜索字段中输入一个数字并点击提交按钮。我需要能够调用控制器方法才能运行搜索代码。

现在我只是想点击一个部分页面来获得一些功能。以下是我到目前为止的代码。到目前为止，当我单击按钮时没有任何反应。我听说 Ajax 很有用，所以我一直在使用它。我还在学习这个框架，所以请耐心等待。

```
<div class="span6 roundedCorners">
    <div class="row-fluid Title">
        <div class="span6">
            Search Area
        </div>
    </div>
    <div class="row-fluid individual">
        <div class="row-fluid">
            <div class="span4"><span class="pull-right fieldDescription">Number</span></div>
            <div class="span8"><input /></div>
        </div>
        <div class="row">
            <div class="span12" id="adminSubmitButton">
                @using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = "_adminDetails" }))
                {
                    <button type="submit" class="btn btn-inverse">Submit</button>
                }
            </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:59:56.917

您的表单是空的，它只有一个提交按钮。您需要在表单内移动搜索按钮。像这样的东西：

模型

```
public class SearchModel
{
    [Required]
    public string Query { get; set; }
} 
```

看法

```
@model SearchModel

...
@using (Ajax.BeginForm(new AjaxOptions { UpdateTargetId = "_adminDetails" }))
{
   @Html.EditorFor(m => m.Query)
   @Html.ValidationMessageFor(m => m.Query)
   <button type="submit" class="btn btn-inverse">Submit</button>
}

<div id="_adminDetails"></di> 
```

**注意：**确保你有一个带有 id 的元素`_adminDetails`

您的控制器必须获取模型并执行搜索。例子：

控制器

```
 [HttpPost]
 public ActionResult Index(SearchModel model)
 {
    //do something with your model (perform search)
    return View(results);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:26:01.533

好的，我现在部分工作。当我单击按钮时，我可以使用以下方法调用控制器方法：

```
function adminButton()
        {
            $("#adminDetails").load("@Url.Action("ControllerMethod", "ControllerName")");
        } 
```

@Url.Action 帮助器允许我调用返回部分视图的方法。这是朝着正确方向迈出的一步。但从我正在阅读的内容来看，我应该能够使用以下 Url 助手而不是 @Url.Action：

```
"@Url("ControllerMethod", "ControllerName")/" + submitButton.Value 
```

我已经尝试了一些变化，但我仍在阅读以找出解决方案。有帮手可以让我这样做吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T14:22:36.270

谢谢你们的帮助。我确实在星期五晚上解决了我的问题。基本上我所做的是在通过 JS/jQuery 和 Razor @Url.Action() 的帮助单击按钮时加载部分页面，以调用返回 PartialView 的控制器方法：

```
<script type="text/javascript">
    function adminButton()
    {
        var link = "@Url.Action("ControllerMethod", "ControllerClass", new { 
                                         number = -1})";

        var num = parseInt($("#number").val());

        link = link.replace(-1, num);

        $("#details").load(link);
    }
</script> 
```

# dependencies - 使用 MySQL 运行应用程序

> ID：14383899
> 
> 赞同：0
> 
> 时间：2013-01-17T16:43:09.143
> 
> 标签：dependencies, packaging

（我不确定这是不是正确的论坛，但如果不是，请原谅我，并请指点我到正确的论坛）

如果我正在编写一个使用 MySQL 作为数据库的应用程序。是否可以打包应用程序，以便在没有 MySQL 的机器上安装它时，应用程序仍然运行？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:46:17.473

仅当您设置远程 mySQL 服务器时。他们需要 mySQL。由于 mySQL 是免费的，您可以让他们安装它。

我会考虑改用 SQlite。因为它只是文本文件，并且更容易集成到应用程序中。

[http://www.sqlite.org/](http://www.sqlite.org/)

# android - 如何使用 HTTPUrlConnection urlConnection.setRequestMethod("PUT"); 上传文件 还是HttpPut？

> ID：14383909
> 
> 赞同：0
> 
> 时间：2013-01-17T16:43:36.673
> 
> 标签：android, file-upload, http-put

所以，我无法摆脱这个问题：我需要将一个`XML`文件和一个`.jpg`文件从我的 android 应用程序（API 8）上传到 HTTP 服务器（带有 IIS 7.5 的 win 2008 服务器）。我已经按照之前搜索的建议启用了`PUT`动词和卸载和 webdav 方法。`WebDav`另外，我不确定我是否在服务器端做这件事，因为我无法得到任何回复。

这是我的代码

```
 URL fileurl = new URL("Server Upload Path");

        HttpURLConnection urlConnection = (HttpURLConnection) fileurl
                .openConnection();
        urlConnection.setRequestMethod("PUT");
        urlConnection.setDoOutput(true);
        urlConnection.connect();

        OutputStream os = urlConnection.getOutputStream();

        File upFile = new File("My Local File");
                    //I'm sure the file exists
        FileInputStream fis = new FileInputStream(upFile);
        BufferedInputStream bfis = new BufferedInputStream(fis);
        byte[] buffer = new byte[1024];
        int bufferLength = 0;

        // now, read through the input buffer and write the contents to the
        // file
        while ((bufferLength = bfis.read(buffer)) > 0) {
            os.write(buffer, 0, bufferLength);

        } 
```

抱歉，如果我忘记了一些您可能需要帮助的信息。我`IIS`也是安卓新手。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-17T17:27:26.223

为什么不尝试标准的多部分文件上传请求（基于 POST 而不是 PUT）：

```
 final static String MULTIPART_BOUNDARY = "------------------563i2ndDfv2rTHiSsdfsdbouNdArYfORhxcvxcvefj3q2f";

 public static void sendFileToServer(String url, File logFiles) {
    HttpURLConnection connection = null;
    OutputStream os = null;
    DataInputStream is = null;
try {
    StringBuilder fullUrl = new StringBuilder(url);
    connection = (HttpURLConnection) new URL(url).openConnection();
    connection.setRequestMethod("POST");
    connection.setRequestProperty("Content-Type", "multipart/form-data;boundary=" + MULTIPART_BOUNDARY);
    connection.setDoOutput(true);
    connection.setDoInput(true);
    connection.setRequestProperty("Connection", "Keep-Alive");
    connection.connect();
    os = new BufferedOutputStream(connection.getOutputStream());
    if(os != null) {
          os.write(("--" + MULTIPART_BOUNDARY + EOL).getBytes());
          os.write(String.format("Content-Disposition:form-data;name=\"UploadedFile\";filename=\"%s\"\r\nContent-Type: application/x-zip-compressed\r\n\r\n", UPLOADED_FILE_NAME).getBytes());

          // Upload file(s) data here and send

          os.write((EOL + "--" + MULTIPART_BOUNDARY + "--" + EOL + EOL).getBytes());
          os.flush();
          os.close();
          os = null;
       }
       if(connection.getResponseCode() == HttpURLConnection.HTTP_OK) {
                // Process server response
       }
   } catch (MalformedURLException e) {

   } catch (IOException e) {

   } catch (Exception e1) {

   } finally {
    try {
        if(os != null) {
            os.close();
        }
    } catch (IOException e) {
        Log.e(TAG, "sendFileToServer exception: close OutputStream", e);
    }
    try {
        if(is != null) {
            is.close();
        }
    } catch (IOException e) {
        Log.e(TAG, "sendFileToServer exception: close InputStream", e);
    }
    if(connection != null) {
        connection.disconnect();
    }
   }
} 
```

# android - 如何使用带有自定义适配器的 GridView 作为首选项？

> ID：14383912
> 
> 赞同：2
> 
> 时间：2013-01-17T16:43:54.153
> 
> 标签：android, android-layout, android-listview, android-preferences, android-gridview

我有以下文件和类：

**xml/preferences.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android">
    <PreferenceCategory android:title="@string/characters_list">
        <Preference
            android:enabled="true"
            android:key="characters_view"
            android:layout="@layout/characters_view"
            android:selectable="false"/>
    </PreferenceCategory>
</PreferenceScreen> 
```

**布局/character_view.xml**：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <com.xxx.widget.ExpandableHeightGridView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/characters_gridview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:columnWidth="380dip"
        android:numColumns="auto_fit"
        android:stretchMode="columnWidth"/>

</LinearLayout> 
```

**CharacterAdapter**类

```
class CharacterAdapter extends BaseAdapter {
    @Override
    public int getCount() {
        return characters.size();
    }

    @Override
    public Object getItem(int position) {
        return null;
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        HashMap<String, String> character = characters.get(position);

        View view;

        if (convertView == null) { 
            view = inflater.inflate(R.layout.characters_view_item, null);
        } else {
            view = convertView;
        }

        // ... 

        return view;
    }
} 
```

在**PreferenceActivity**我试图用项目填充网格视图：

```
protected void onCreate(Bundle bundle) {
     super.onCreate(bundle);

     setContentView(R.layout.settings);

     Preference characters = findPreference("characters_view");
     View view = characters.getView(null, null);

     ExpandableHeightGridView grid = (ExpandableHeightGridView) view.findViewById(R.id.characters_gridview);
     grid.setExpanded(true);
     grid.setAdapter(new CharacterAdapter(getCharacters()));
} 
```

但是什么也没发生，只看到空的首选项:(

有人知道如何在 Preference 项中呈现 GridView 吗？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T01:45:45.873

刚刚做到了！

解决方案非常简单。需要补充`addOnGlobalLayoutListener`。`getListView().getViewTreeObserver()`

**PreferenceActivity**中的finally`onCreate`方法如下所示：

 **```
protected void onCreate(Bundle bundle) {
     super.onCreate(bundle);

     setContentView(R.layout.settings);

     final ListView list = getListView();
     list.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() {
        @Override
        public void onGlobalLayout() {
            // make sure it is not called anymore
            list.getViewTreeObserver().removeGlobalOnLayoutListener(this);

            View view = list.getChildAt(1);

            ExpandableHeightGridView grid = (ExpandableHeightGridView) view.findViewById(R.id.characters_gridview);
            grid.setExpanded(true);
            grid.setAdapter(new CharacterAdapter(getCharacters()));
        }
    });
} 
```**

# php - PHP OOP 会话对象 - 序列化 UnSerialize - 处理它

> ID：14383914
> 
> 赞同：1
> 
> 时间：2013-01-17T16:43:59.920
> 
> 标签：php

我正在构建一些常见的类对象，这些对象将被常规地隐藏在 $_SESSION 对象中。我了解到，在将对象添加到会话时，有时可以在不序列化的情况下添加它，但它不可靠，所以我先序列化并且它每次都有效。

我发现以下内容非常乏味/重复和笨重......就像我必须从会话中检查对象做一些工作然后记得以正确的方式检查它。有没有更好/更有创意的方式也有效且可重复使用。帮助php专家

```
// Painful Code
$tmpObj = new clsSession;  // Class setup for intellisense to work.
$tmpObj = unserialize($_SESSION['objSession']);  // I assign so i can get intellisense as well.  
$tmpObj //... do some work make some changes some other logic could be lengthy... 
// and then i have to remember to do the following
$_SESSION['objSession'] = serialize($tmpObj);
unset $tmpObj;

/* or better */

$tmpObj = $_SESSION['objSession'];
$tmpObj = unserialize($tmpObj);
$tmpObj //... do some work make some changes some other logic
//and then i have to remember to do the following
$_SESSION['objSession'] = serialize($tmpObj);
unset $tmpObj; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:50:57.143

在被序列化的对象中使用`__sleep`魔术方法。这只是返回请求之间所需的属性数组，并允许 SESSION 中的自动序列化对象正常工作。

例如

```
public function __sleep() {
    return array('these', 'are', 'property', 'identifiers');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:52:32.877

您可以将对象直接存储到会话中，而无需先对其进行序列化。这是因为在保存会话时会自动进行序列化。只要确保您正在自动加载类定义。如果没有，您将必须在您希望使用存储的会话对象的每个页面上包含类定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T16:59:21.663

除非我遗漏了什么，否则您所做的就是序列化两次：

```
<?php

class Foo{
    public $id;
}

$f = new Foo;
$f->id = 33;

var_dump( serialize($f) ); // Standard storage
var_dump( serialize(serialize($f)) ); // Yours 
```

我能发现的唯一区别是标准的*自动反*序列化发生在会话加载（on `session_start()`）上，这通常发生在早期阶段，并且您可能还没有加载类定义。使用您的代码，首先读取会话并在您`unserialize()`手动调用时重新组合对象。

我建议您查看您的`include_once()`指令并确保在 session_start() 发生之前加载所有必需的类定义。

这是一个非常强制的测试用例：

```
<?php

session_start();
if( empty($_SESSION) ){
    require_once('./foo.php');

    $f = new Foo;
    $f->id = 33;

    $_SESSION['f'] = $f;
    // object(Foo)#1 (1) { ["id"]=> int(33) } 
}else{
    $f = $_SESSION['f'];
    // object(__PHP_Incomplete_Class)#1 (2) { ["__PHP_Incomplete_Class_Name"]=> string(3) "Foo" ["id"]=> int(33) } 
}
var_dump($f); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-18T14:05:38.013

蒂姆，谢谢你的意见。几年前，我遇到了对象和会话的稳定性问题；序列化和非序列化。会话反序列化期间缺少类定义很常见。如果类定义未定义，PHP 会创建类 __PHP_Incomplete_Class 的不完整对象。这个退化的对象错过了每一个方法。为避免此错误，必须在开始会话之前包含每个类定义。因此，如果您在开始会话之前实现自动加载器，您将不会遇到任何问题。该解决方案在过去 6 年多的时间里运行良好。

# c++ - 运行示例程序 Magick++ 将库导入 Visual C++ 2010 时出错

> ID：14383918
> 
> 赞同：0
> 
> 时间：2013-01-17T16:44:05.817
> 
> 标签：c++, magick++

我将所有库和头文件复制到 Visual C++ 2010 中，但无法运行任何示例程序，因为过去 2 天我不断收到此错误。

```
1>e:\program files (x86)\imagemagick-6.8.1-q16\include\magick++\stl.h(1867): warning C4251: 'Magick::x11DisplayImage::_display' : class 'std::basic_string<_Elem,_Traits,_Ax>' needs to have dll-interface to be used by clients of class 'Magick::x11DisplayImage'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>man.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual __thiscall Magick::Image::~Image(void)" (__imp_??1Image@Magick@@UAE@XZ) referenced in function _main
1>man.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __thiscall Magick::Image::write(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (__imp_?write@Image@Magick@@QAEXABV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function _main
1>man.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: void __thiscall Magick::Image::pixelColor(long,long,class Magick::Color const &)" (__imp_?pixelColor@Image@Magick@@QAEXJJABVColor@2@@Z) referenced in function _main
1>man.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: virtual __thiscall Magick::Color::~Color(void)" (__imp_??1Color@Magick@@UAE@XZ) referenced in function _main
1>man.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall Magick::Geometry::~Geometry(void)" (__imp_??1Geometry@Magick@@QAE@XZ) referenced in function _main
1>man.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall Magick::Image::Image(class Magick::Geometry const &,class Magick::Color const &)" (__imp_??0Image@Magick@@QAE@ABVGeometry@1@ABVColor@1@@Z) referenced in function _main
1>man.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall Magick::Geometry::Geometry(char const *)" (__imp_??0Geometry@Magick@@QAE@PBD@Z) referenced in function _main
1>man.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) public: __thiscall Magick::Color::Color(char const *)" (__imp_??0Color@Magick@@QAE@PBD@Z) referenced in function _main
1>man.obj : error LNK2019: unresolved external symbol "__declspec(dllimport) void __cdecl Magick::InitializeMagick(char const *)" (__imp_?InitializeMagick@Magick@@YAXPBD@Z) referenced in function _main
1>MSVCRTD.lib(crtexew.obj) : error LNK2019: unresolved external symbol _WinMain@16 referenced in function ___tmainCRTStartup
1>C:\Users\Z-Axis\documents\visual studio 2010\Projects\sassada\Debug\sassada.exe : fatal error LNK1120: 10 unresolved externals
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

值得一提的是，我下载了 Magick++ dll。

**更新：**

在包含 Magick++ 自带的库之后，

我现在收到这些错误，

```
1>e:\program files (x86)\imagemagick-6.8.1-q16\include\magick++\stl.h(1867): warning C4251: 'Magick::x11DisplayImage::_display' : class 'std::basic_string<_Elem,_Traits,_Ax>' needs to have dll-interface to be used by clients of class 'Magick::x11DisplayImage'
1>          with
1>          [
1>              _Elem=char,
1>              _Traits=std::char_traits<char>,
1>              _Ax=std::allocator<char>
1>          ]
1>MSVCRTD.lib(crtexew.obj) : error LNK2019: unresolved external symbol _WinMain@16 referenced in function ___tmainCRTStartup
1>C:\Users\Z-Axis\documents\visual studio 2010\Projects\sassada\Debug\sassada.exe : fatal error LNK1120: 1 unresolved externals
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

这是什么意思 ？

```
needs to have dll-interface to be used by clients of class 'Magick::x11DisplayImage' 
```

# javascript - node.js 上的客户端 ssl 授权

> ID：14383924
> 
> 赞同：7
> 
> 时间：2013-01-17T16:44:44.037
> 
> 标签：javascript, node.js, http, ssl, openssl

我正在尝试使用 self-signed 进行客户端授权。

首先，我正在创建证书：

CA 证书

```
openssl genrsa -des3 -out ca.key 2048
openssl req -new -x509 -days 365 -key ca.key -out ca.crt 
```

服务器证书

```
openssl genrsa -out server.key 1024
openssl req -new -key server.key -out server.csr
openssl x509 -req -in server.csr -out server.crt -CA ca.crt -CAkey ca.key -CAcreateserial -days 365 
```

客户证书

```
openssl genrsa -out client.key 1024
openssl req -new -key client.key -out client.csr
openssl x509 -req -in client.csr -out client.crt -CA ca.crt -CAkey ca.key -CAcreateserial -days 365 
```

将客户端证书转换为 p12

```
openssl pkcs12 -export -in client.crt -inkey client.key -name "My cert" -out client.p12 
```

打开并安装p12证书打开client.p12

我的 node.js 服务器（使用 express.js）

```
var express = require('express')
    , routes = require('./routes')
    , user = require('./routes/user')
    , http = require('http')
    , path = require('path')
    , https = require('https')
    , fs = require('fs');

var app = express();

app.configure(function () {
    app.set('port', process.env.PORT || 3000);
    app.set('views', __dirname + '/views');
    app.set('view engine', 'ejs');
    app.use(express.favicon());
    app.use(express.logger('dev'));
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(path.join(__dirname, 'public')));
});

app.configure('development', function () {
    app.use(express.errorHandler());
});

app.get('/', function(req, res) {
    console.log(req.client.authorized);
    res.send(req.client.authorized)
});

var options = {
    key:fs.readFileSync('ssl/server.key'),
    cert:fs.readFileSync('ssl/server.crt'),
    ca:[fs.readFileSync('ssl/ca.crt')],
    requestCert:true,
    rejectUnauthorized:false,
    passphrase: 'passphrase',
    agent: false
    };

    https.createServer(options,app).listen(app.get('port'), function () {
        console.log("Express server listening on port " + app.get('port'));
    }); 
```

服务器运行时，我`https://localhost:3000`在 Chrome 中打开，但身份验证未通过：req.client.authorized 为 false

Chrome 消息是

```
The identity of this website has not been verified.
 • Server's certificate does not match the URL. 
```

我的错误在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T08:39:25.377

服务器 URL 与服务器证书的公用名部分匹配。

创建服务器证书请求时，请记住将服务器的主机名放在 Common Name 部分。如果您只是在本地进行测试（使用`https://localhost`作为地址），请使用 localhost 作为通用名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T19:18:43.113

使用 HTTPS 支持，使用`request.connection.verifyPeer()`和`request.connection.getPeerCertificate()`获取客户端的身份验证详细信息。

[http://nodejs.org/api/http.html#http_request_connection](http://nodejs.org/api/http.html#http_request_connection)

# java - 为什么用日历设置日期会给我错误的日期

> ID：14383927
> 
> 赞同：1
> 
> 时间：2013-01-17T16:44:51.010
> 
> 标签：java, calendar

我将日期设置为 2013-01-01 00:00:00，但日期显示为 Fri Feb 01 00:00:00 GMT+01:00 2013

为什么？

```
Calendar calendar = Calendar.getInstance();
calendar.set(2013, 1, 1, 0, 0, 0);
Date startDate = calendar.getTime(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T16:45:55.563

1 表示二月。0 是一月。月份从 0 开始索引。使用助记符总是更好：`Calendar.JANUARY`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-17T16:47:36.000

在 Java 的日期类中，月份编号从 0 开始。在类中使用月份常量[`Calendar`](http://docs.oracle.com/javase/6/docs/api/java/util/Calendar.html)来避免这种常见错误。

```
calendar.set(2013, Calendar.JANUARY, 1, 0, 0, 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-01T20:19:16.140

只是一个相关的问题......

起初我认为这与我遇到的问题不同，因为我的年份错了。我已经为 12 月设置了“12”，但是因为月份是一个偏移量并且从 0 开始，日历实际上会将 12 滚动到下一年的 1 月，所以如果你的年份是错误的，请检查你的月份是否也是错误的，它可能会像我的一样翻滚。

即 setDate(2015, 12, 6) 导致日期为 2016 年 1 月 6 日

所以使用日历月常数。

# emacs - Eshell/Shell 对 Mx 的别名

> ID：14383928
> 
> 赞同：0
> 
> 时间：2013-01-17T16:44:53.960
> 
> 标签：emacs, elisp, eshell

在 Emacs 中，如何使用 Mx 调用别名？例如，我有别名来打开文件，如'alias ff find-file $1'。我喜欢将其调用为 Mx ff RETURN $1。同样，我为查看目录定义了别名，我喜欢用 Mx 调用它而不提供参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:59:09.957

为此，您应该将别名定义为全局 Emacs 别名，而不是特定于 Eshell 的别名：

```
(defalias 'ff 'find-file) 
```

# windows - WinDbg 在按钮单击时中断

> ID：14383929
> 
> 赞同：3
> 
> 时间：2013-01-17T16:44:56.687
> 
> 标签：windows, debugging, windbg

想象一个显示按钮的应用程序：`OK`. 是否可以在按钮收到点击后立即中断程序的执行并使用 WinDbg 查看反汇编？我该怎么做？在这种情况下，源代码不可用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-19T18:28:26.330

因此，您的描述非常笼统，并且定义不明确，并且确切的研究实际上取决于您要反转的应用程序。如果您有符号，您将有更轻松的时间，但这些不是必需的。

首先，一些（琐碎的）背景：Windows 通过 Windows Messages 与应用程序通信。应用程序将从消息队列中获取消息，并且几乎总是将这些消息分派给适当的 Windows 过程。

那么，首先 - 你是什么意思：“在按钮收到点击之后”？我怀疑您实际上并不关心此代码。尽管您的应用程序可能有一个自定义按钮，但您真的很关心该按钮如何处理 WM_LBUTTONDOWN 消息。我将假设您的应用程序有一个 Windows 股票按钮（在 user32.dll 或 comctl32.dll 中实现），而您并不关心这一点。

处理 WM_LBUTTONDOWN 的按钮控件的默认实现是将 WM_COMMAND 发送到包含该按钮的窗口。通常，您要调查的应用程序会在那里处理“点击”。现在，如果这是“确定”按钮，它的 ID 将为 IDOK（定义为 1），当您单击“Enter”键时，Windows 也会向您发送相同的消息。

所以，我们现在正在寻找应用程序如何处理 WM_COMMAND。您要查找的是 Windows 程序。用 Spy++ 做到这一点。打开 Spy 并找到包含您的按钮的窗口。您要查找的代码很可能在该窗口的 Windows 过程中。Spy++ 会告诉你窗口过程的地址。

例如，让我们看一下记事本中“另存为”对话框的“保存”按钮。在我的机器上地址是：0x73611142，在 ComCtl32.dll

去WinDbg，看看函数。

```
0:000> u 73611142
COMCTL32!MasterSubclassProc
73611142 8bff            mov     edi,edi
73611144 55              push    ebp
73611145 8bec            mov     ebp,esp
73611147 6afe            push    0FFFFFFFEh
73611149 6858126173      push    offset COMCTL32!Ordinal377+0x146 (73611258)
7361114e 68a1b06273      push    offset COMCTL32!DllGetVersion+0x336f (7362b0a1)
73611153 64a100000000    mov     eax,dword ptr fs:[00000000h]
73611159 50              push    eax 
```

这确实是一个功能。像所有 Windows 一样，它以 开头`move edi,edi`，然后设置帧指针。

设置一个断点，点击 go，你几乎会立即中断。让我们来看看：

```
0:000> bu 73611142
0:000> g
0:000> kb1 
```

ChildEBP RetAddr Args to Child
0101f220 75d87443 00120c6a 00000046 00000000 COMCTL32!MasterSubclassProc

第一个参数 (00120c6a) 是窗口句柄。对比 Spy++ 上的值，应该是一样的。第二个参数是消息。就我而言，它是 0x46，即 WM_WINDOWPOSCHANGING。

好的，我不关心所有这些消息，我只想打破我关心的消息。您关心的是 0X0111 (winuser.h) 的 WM_COMMAND

现在，输入以下内容（有点复杂的命令）：

```
0:000> bu 73611142 "j poi(esp+4)==00120c6a AND poi(esp+8)==111 AND poi(esp+''; 'gc'"
breakpoint 0 redefined 
```

您在 windows 过程上设置了一个断点，并告诉 WinDbg 仅在第一个参数（即 poi(esp+4) ）是您的 Windows 句柄并且第二个参数是 111 时才中断。“gc”告诉 WinDBG 继续条件不满足时的执行。

现在可以调试反汇编了。如果你有符号，你的工作会更轻松，但这不是必需的。在任何情况下，请记住从符号服务器下载 Microsoft 精简符号，因此如果您正在调试的代码正在调用 Windows API，您可以看到它。

就是这样。如果您的要求不同（不同的窗口、不同的消息等），请修改此技术。如果您无法可靠地找到 Windows 过程，作为最后的手段，请考虑在 PostMessage 或 DispatchMessage 上放置一个断点（尽管您必须遵循该代码）。对于繁重的倒车使用IDA，它将反汇编可执行文件，并解决各种交叉引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T17:08:01.547

假设您有 pdbs 并且它们没有剥离私有符号，那么您将在按钮处理程序上设置断点，如下所示：

```
bp myDLL!myWindowApp::onOKBtnClicked 
```

如果您有 pdb，那么您可以使用 x 搜索可能的处理程序：

```
x myDLL!myWindowApp::*ok* 
```

这假定您知道或可以猜出哪个 dll 和函数名称是什么，否则您可以使用 spy++、Win Spy++ 或 Win Detective 获取此信息以获取按钮的句柄并拦截窗口消息并从该信息中设置断点.

一旦它到达断点，您可以使用[u](http://msdn.microsoft.com/en-gb/library/windows/hardware/ff541965%28v=vs.85%29.aspx)查看汇编代码，如果需要，可以使用[msdn 指南。](http://msdn.microsoft.com/en-gb/library/windows/hardware/ff541965%28v=vs.85%29.aspx)

# asp.net-mvc-3 - 使用 jquery.form.js 在 MVC 4 中上传 Ajax 文件

> ID：14383931
> 
> 赞同：1
> 
> 时间：2013-01-17T16:45:07.407
> 
> 标签：asp.net-mvc-3, jquery

我正在使用 MVC 。我的场景就像我需要将文件和表单变量发布到控制器。

我尝试了 AjaxSubmit，它适用于除 IE 之外的所有浏览器。它显示“访问被拒绝”。

```
 $(".WW_Register_Form").ajaxSubmit({ url: url, type: 'post', enctype: 'multipart/form-data'}); 
```

我的要求是在 ajax 中发布文件和表单参数。

是否有任何其他 jquery 插件可以实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:53:45.887

由于跨域`access denied`限制，您可能会收到错误消息。`XMLHttpRequests`

您是否尝试访问另一个不属于 的域`same-origin`？即使是像删除`www`关闭这样简单的事情`www.formsubmit.com`也可能导致您的请求出现问题，并且浏览器不会将其视为`same-origin`

看看这里[https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript](https://developer.mozilla.org/en-US/docs/JavaScript/Same_origin_policy_for_JavaScript)和这里[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)进行澄清。

我的建议是确保您尝试联系同源的应用程序/脚本。

# ios - 将 CMSampleBufferRef 转换为 UIImage

> ID：14383932
> 
> 赞同：3
> 
> 时间：2013-01-17T16:45:08.797
> 
> 标签：ios, core-graphics, avfoundation

我正在使用 AVCaptureSession 捕获视频。但我想将捕获的图像转换为 UIImage。

我在网上找到了一些代码：

```
- (UIImage *) imageFromSampleBuffer:(CMSampleBufferRef) sampleBuffer
{

    NSLog(@"imageFromSampleBuffer: called");
    // Get a CMSampleBuffer's Core Video image buffer for the media data
    CVImageBufferRef imageBuffer = CMSampleBufferGetImageBuffer(sampleBuffer);
    // Lock the base address of the pixel buffer
    CVPixelBufferLockBaseAddress(imageBuffer, 0);

    // Get the number of bytes per row for the pixel buffer
    void *baseAddress = CVPixelBufferGetBaseAddress(imageBuffer);

    // Get the number of bytes per row for the pixel buffer
    size_t bytesPerRow = CVPixelBufferGetBytesPerRow(imageBuffer);
    // Get the pixel buffer width and height
    size_t width = CVPixelBufferGetWidth(imageBuffer);
    size_t height = CVPixelBufferGetHeight(imageBuffer);

    // Create a device-dependent RGB color space
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();

    // Create a bitmap graphics context with the sample buffer data
    CGContextRef context = CGBitmapContextCreate(baseAddress, width, height, 8,
                                                 bytesPerRow, colorSpace, kCGBitmapByteOrder32Little | kCGImageAlphaPremultipliedFirst);
    // Create a Quartz image from the pixel data in the bitmap graphics context
    CGImageRef quartzImage = CGBitmapContextCreateImage(context);
    // Unlock the pixel buffer
    CVPixelBufferUnlockBaseAddress(imageBuffer,0);

    // Free up the context and color space
    CGContextRelease(context);
    CGColorSpaceRelease(colorSpace);

    // Create an image object from the Quartz image
    UIImage *image = [UIImage imageWithCGImage:quartzImage];

    // Release the Quartz image
    CGImageRelease(quartzImage);

    return (image);
} 
```

但是我遇到了一些错误：

> ```
> Jan 17 17:39:25 iPhone-4-de-XXX ThinkOutsideTheBox[2363] <Error>: CGBitmapContextCreate: invalid data bytes/row: should be at least 2560 for 8 integer bits/component, 3 components, kCGImageAlphaPremultipliedFirst.
> Jan 17 17:39:25 iPhone-4-de-XXX ThinkOutsideTheBox[2363] <Error>: CGBitmapContextCreateImage: invalid context 0x0
> 2013-01-17 17:39:25.896 ThinkOutsideTheBox[2363:907] image <UIImage: 0x1d553f00>
> Jan 17 17:39:25 iPhone-4-de-XXX ThinkOutsideTheBox[2363] <Error>: CGContextDrawImage: invalid context 0x0
> Jan 17 17:39:25 iPhone-4-de-XXX ThinkOutsideTheBox[2363] <Error>: CGBitmapContextGetData: invalid context 0x0 
> ```

编辑：我还使用 UIImage 来获取 rgb 颜色：

```
-(void) captureOutput:(AVCaptureOutput*)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection*)connection
{

    UIImage* image = [self imageFromSampleBuffer:sampleBuffer];
    unsigned char* pixels = [image rgbaPixels];
    double totalLuminance = 0.0;
    for(int p=0;p<image.size.width*image.size.height*4;p+=4)
    {
        totalLuminance += pixels[p]*0.299 + pixels[p+1]*0.587 + pixels[p+2]*0.114;
    }
    totalLuminance /= (image.size.width*image.size.height);
    totalLuminance /= 255.0;
    NSLog(@"totalLuminance %f",totalLuminance);

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T17:00:52.793

您最好的选择是将[捕获视频数据输出设置为`videoSettings`](http://developer.apple.com/library/ios/documentation/AVFoundation/Reference/AVCaptureVideoDataOutput_Class/Reference/Reference.html#//apple_ref/occ/instp/AVCaptureVideoDataOutput/videoSettings)[指定所需像素格式](http://developer.apple.com/library/ios/documentation/QuartzCore/Reference/CVPixelBufferRef/Reference/reference.html#//apple_ref/c/data/kCVPixelBufferPixelFormatTypeKey)的字典，您需要将其设置为 CGBitmapContext 可以处理的 RGB 的一些变化。

该文档[列出了 Core Video 可以处理的所有像素格式](http://developer.apple.com/library/ios/documentation/QuartzCore/Reference/CVPixelFormatDescriptionRef/Reference/reference.html#//apple_ref/doc/uid/TP40010034-CH3-SW28)。CGBitmapContext 仅支持其中的一小部分。您在 Internet 上找到的代码所期望的格式是`kCVPixelFormatType_32BGRA`，但这可能是为 Mac 编写的——在 iOS 设备上，`kCVPixelFormatType_32ARGB`(big-endian) 可能更快。*在设备上*尝试它们，并比较帧速率。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-01-15T09:32:40.787

你可以试试这段代码。

```
-(UIImage *) screenshotOfVideoStream:(CMSampleBufferRef)samImageBuff
  {
       CVImageBufferRef imageBuffer =  
         CMSampleBufferGetImageBuffer(samImageBuff);
       CIImage *ciImage = [CIImage imageWithCVPixelBuffer:imageBuffer];
       CIContext *temporaryContext = [CIContext contextWithOptions:nil];
       CGImageRef videoImage = [temporaryContext
                         createCGImage:ciImage
                         fromRect:CGRectMake(0, 0,
                         CVPixelBufferGetWidth(imageBuffer),
                         CVPixelBufferGetHeight(imageBuffer))];

       UIImage *image = [[UIImage alloc] initWithCGImage:videoImage];
       CGImageRelease(videoImage);
      return image;
} 
```

它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-25T08:32:18.157

如果有人像我一样期待 jpeg 图像，Apple 提供了简单的 API：

```
[AVCaptureStillImageOutput jpegStillImageNSDataRepresentation:photoSampleBuffer]; 
```

和：

```
[AVCapturePhotoOutput JPEGPhotoDataRepresentationForJPEGSampleBuffer:photoSampleBuffer previewPhotoSampleBuffer:previewPhotoSampleBuffer] 
```

# python - 检查可打印的 Unicode

> ID：14383937
> 
> 赞同：1
> 
> 时间：2013-01-17T16:45:20.963
> 
> 标签：python, unicode

我知道要检查字符串是否可打印，我们可以执行以下操作：

```
def isprintable(s,codec='utf8'):
    try: 
        s.codec(codec)
    except UnicodeDecodeError: 
        return False
    else: 
        return True 
```

但是有没有办法用 Unicode 而不是字符串呢？顺便说一句，我正在处理推文，我将推文转换为 Unicode，如下所示

```
text=unicode(status.text) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-25T10:42:24.770

面对 Unicode 标准更改或不同的编码，我不确定使用代码点的解决方案是否可靠。一个更抽象的解决方案：

```
import unicodedata

if unicodedata.category(char) == 'Cc':
        raise UnhandledKeypressError('unprintable char') 
```

换句话说，如果字符串的所有字符（unicode 对象）不具有值为“控制”的属性类别，则该字符串是可打印的。

为了比较，Qt 的 QChar.isPrint() ：

> 如果字符是可打印字符，则返回 true；否则返回假。这是任何不属于 Cc 或 Cn 类别的字符。请注意，这并未表明该字符是否可用于特定字体。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T17:05:07.910

您正在寻找对一系列代码点的测试，因此您需要一个正则表达式：

```
import re
# match characters from ¿ to the end of the JSON-encodable range
exclude = re.compile(ur'[\u00bf-\uffff]')

def isprintable(s):
    return not bool(exclude.search(s)) 
```

这将返回任何代码点过去("¾")`False`的 unicode 文本。`\u00BE`

```
>>> isprintable(u'Hello World!')
True
>>> isprintable(u'Jeg \u00f8ve mit Norsk.')
False 
```

# java - RSA keyczar 和 js

> ID：14383944
> 
> 赞同：1
> 
> 时间：2013-01-17T16:45:51.653
> 
> 标签：java, javascript, rsa, keyczar

我已经在我的应用程序中使用 RSA 实现了一个安全系统。我已经使用 Keyczar 工具生成了公钥和私钥。仅使用 keyczar 我可以用公钥加密并用私钥解密，完全没有问题。

我想在 JS 中加密一些数据，然后将其传递给 Java。为此，我正在尝试使用这个库（[https://github.com/ziyan/javascript-rsa](https://github.com/ziyan/javascript-rsa)），但我无法加密数据或至少无法正确加密数据（它比 keyczar 大）。

如何使用我的公钥使用此工具进行加密？谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:55:21.077

keyczar 没有 javascript 客户端，所以如果你想生成 keyczar 可使用的密文。

查看 keyczar 公钥格式，您需要将公钥信息从您的服务器提供给您的 javascript 加密器。 [http://code.google.com/p/keyczar/wiki/RsaPublicKey](http://code.google.com/p/keyczar/wiki/RsaPublicKey)

或者，看起来您的 javascript 库将读取 PEM 格式。您可以使用 KeyczarTool 以 PEM 格式导出您的公钥，并使用`export`.

查看 rsa 的 Keyczar 密文格式 [http://code.google.com/p/keyczar/wiki/CiphertextFormat](http://code.google.com/p/keyczar/wiki/CiphertextFormat)

您需要将标头添加到使用 javascript 生成的密文中。

从技术上讲，您需要生成一个 keyhash 来附加一个正确的标头，但是无论密文如何，给定的标头对于给定的密钥总是相同的，因此您只需向其提供由 java keyczar 代码生成的公钥即可。

# windows-7 - 打开 Com 端口并从 windows 命令提示符发送十六进制字节

> ID：14383946
> 
> 赞同：1
> 
> 时间：2013-01-17T16:45:53.587
> 
> 标签：windows-7, command-line, hex, decimal, command-prompt

我需要编写一个批处理文件来打开一个 com 端口并将十进制或十六进制命令发送到一个 com 端口。如果我知道用于打开 com 端口并发送十进制或十六进制格式字节的 Windows 命令提示符的命令和格式，我可以编写此文件。如果有人知道如何做到这一点，请插话。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:59:08.940

根据： http: [//www.virtualblueness.net/asem51/bbatch.htm](http://www.virtualblueness.net/asem51/bbatch.htm)

打开 Com 端口（根据需要调整 com 端口设置）：

```
MODE COMX:9600,N,8,1,P 
```

稍等一下

```
SLEEP 9600 
```

%1 是一个参数，即你的十六进制文件

```
COPY %1.HEX COMX 
```

# actionscript-3 - 如何检查鼠标点击是否在元素内

> ID：14383950
> 
> 赞同：0
> 
> 时间：2013-01-17T16:45:59.530
> 
> 标签：actionscript-3, apache-flex, flash-builder

当单击事件针对父元素时，检查鼠标是否在子元素内单击的代码是什么。仅当单击位于子元素内时，我才需要区分以执行某些任务。flex中发生了什么样的传播？我对此有点陌生。

我有一个带有视频显示和视频控制栏的视频播放器。我为占据全屏的视频播放器注册了点击事件。单击时，控制栏应切换（如编程），但单击控制栏中的任何元素时，整个栏都会消失。

```
<!-- Player Container -->
<s:BorderContainer width="100%" height="100%"
           backgroundAlpha="0"
           borderVisible="false">

  <s:VideoPlayer id="vid_player"
          width="100%" height="100%"
          verticalCenter="0"
          horizontalCenter="0"
          skinClass="Skins.VideoPlayerSkin"
          maintainProjectionCenter="true"
          mouseDown="hideControls(event)"
          autoPlay="true" source="{current_video.getSource()}"/>            
</s:BorderContainer><!-- Player Container -->

public function hideControls(event:Event):void {
  hidePlaylist();
  toggleElem(header);
  toggleElem(sec_drop_container);
  toggleVideoPlayer();
}

public function toggleVideoPlayer() {
    var controls:Object = vid_player.videoDisplay.parent.getChildAt(1);
    if(controls.visible)
        controls.visible=false;
    else
        controls.visible  = true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T18:19:46.530

可能最简单的方法是：

```
private function mouseHandler(event:MouseEvent/*was e:MouseEvent*/):void {
    whateverObject.hitTestPoint(event.stageX, event.stageY, false); // use shape flag is 3rd argument
} 
```

# iphone - UIWebview 加载带有桌面版本视图的页面

> ID：14383951
> 
> 赞同：1
> 
> 时间：2013-01-17T16:46:05.523
> 
> 标签：iphone, ipad, uiwebview, loading

我使用 UIWebView 加载网页

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response 
```

它运行良好，但我的问题是它总是加载桌面版本视图。我不想加载桌面版本视图。请帮我 。我会一直感激你的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:42:41.510

这和 UIWebView 无关，你的网站需要检测到 user-agent 是移动设备并转发到你的移动版本。

# crystal-reports - 如何使 Crytal Report 的标题标题反映用户从 Web 应用程序的选择？

> ID：14383954
> 
> 赞同：0
> 
> 时间：2013-01-17T16:46:16.320
> 
> 标签：crystal-reports, crystal-reports-2008

我不是 Crystal Reports 的人；为我们编写 Crystal 报告的个人正在休假两周，用户需要进行一些紧急更改。

我已经设法做出了我能做的改变，但我被卡住了。

我无法处理的另一个更改是显示为标题用户的选择。

例如，在我们的网络应用程序中，我们有一个包含 3 个选项的下拉列表框，教育工作组 (ETF)、法院审查委员会 (CRB) 和冲突解决小组 (CRG)。

如果用户从下拉列表中选择 ETF，Crystal Reports 报表标题需要读取`Education Task Force`

如果用户选择 CRB，则报告标题应为`Court Review Board`，如果来自 Web 应用程序的选择是 CRG，则报告应为`Conflict Resolution Group`

这可能吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:23:45.303

创建一个公式并将其放在报表标题中

```
select {?YourParameter}
case "ETF" : "Education Task Force"
case "CRB" : "Court Review Board"
case "CRG" : "Conflict Resolution Group"
default : "Unknown" 
```

# asp.net-mvc-4 - Visual Studio 2012 Professional 中没有 MVC4 模板

> ID：14383957
> 
> 赞同：4
> 
> 时间：2013-01-17T16:46:29.123
> 
> 标签：asp.net-mvc-4, visual-studio-2012

我最近安装了 Visual Studio 2012 Pro，并注意到我没有创建 ASP.Net MVC4 项目的选项。

这是为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T23:09:15.733

我通过将文件夹 WPT 从安装 iso 复制到我的桌面解决了这个问题。在这个文件夹中有四个 msi

*   aspnetmvc3.msi
*   aspnetmvc3vs11tools.msi
*   aspnetmvc4.msi
*   aspnetmvc4vs11tools.msi

我按照列出的顺序卸载并重新安装了这些并启动了 VS2012，然后 MVC 模板出现在我的新项目对话框中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T16:54:51.633

不确定 2012 Pro 但对于 2010 Express 我需要单独安装它。

[http://www.asp.net/mvc/mvc4](http://www.asp.net/mvc/mvc4)

# c# - 从 2D 相机和独立分辨率获取鼠标坐标

> ID：14383960
> 
> 赞同：1
> 
> 时间：2013-01-17T16:46:45.800
> 
> 标签：c#, xna

我一直在尝试将 David Amador 的这两个样本结合起来：

[http://www.david-amador.com/2010/03/xna-2d-independent-resolution-rendering/](http://www.david-amador.com/2010/03/xna-2d-independent-resolution-rendering/)

[http://www.david-amador.com/2009/10/xna-camera-2d-with-zoom-and-rotation/](http://www.david-amador.com/2009/10/xna-camera-2d-with-zoom-and-rotation/)

一切正常，除了我在获取鼠标坐标时遇到了一些困难。我能够为每个单独的样本获得它们，但我将两者都考虑在内的数学似乎是错误的。

如果我的虚拟分辨率和正常分辨率相同，则鼠标坐标是正确的。当我在移动相机时坐标慢慢不同步时，我会执行 Resolution.SetVirtualResolution(1920, 1080) 和 Resolution.SetResolution(1280, 720, false) 之类的操作。

这是代码：

```
 public static Vector2 MousePositionCamera(Camera camera)
    {
        float MouseWorldX = (Mouse.GetState().X - Resolution.VirtualWidth * 0.5f + (camera.position.X) * (float)Math.Pow(camera.Zoom, 1)) /
            (float)Math.Pow(camera.Zoom, 1);

        float MouseWorldY = ((Mouse.GetState().Y - Resolution.VirtualHeight * 0.5f + (camera.position.Y) * (float)Math.Pow(camera.Zoom, 1))) /
        (float)Math.Pow(camera.Zoom, 1);

        Vector2 mousePosition = new Vector2(MouseWorldX, MouseWorldY);
        Vector2 virtualViewport = new Vector2(Resolution.VirtualViewportX, Resolution.VirtualViewportY);
        mousePosition = Vector2.Transform(mousePosition - virtualViewport, Matrix.Invert(Resolution.getTransformationMatrix()));

        return mousePosition;     
    } 
```

在决议中我添加了这个：

```
virtualViewportX = (_Device.PreferredBackBufferWidth / 2) - (width / 2);
virtualViewportY = (_Device.PreferredBackBufferHeight / 2) - (height / 2); 
```

其他一切都与示例代码相同。提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T19:57:20.897

感谢 David Gouveia，我能够确定问题所在……我的相机矩阵使用了错误的数学。

我将发布我所有的代码，希望能帮助那些试图做类似事情的人。

相机变换矩阵：

```
 public Matrix GetTransformMatrix()
        {
            transform = Matrix.CreateTranslation(new Vector3(-position.X, -position.Y, 0)) * Matrix.CreateRotationZ(rotation) *
                        Matrix.CreateScale(new Vector3(Zoom, Zoom, 1)) * Matrix.CreateTranslation(new Vector3(Resolution.VirtualWidth
                            * 0.5f, Resolution.VirtualHeight * 0.5f, 0));

            return transform;
        } 
```

这也将使相机居中。以下是结合分辨率类和相机类获取鼠标坐标的方法：

```
 public static Vector2 MousePositionCamera(Camera camera)
    {
        Vector2 mousePosition;
        mousePosition.X = Mouse.GetState().X;
        mousePosition.Y = Mouse.GetState().Y;

        //Adjust for resolutions like 800 x 600 that are letter boxed on the Y:
        mousePosition.Y -= Resolution.VirtualViewportY;

        Vector2 screenPosition = Vector2.Transform(mousePosition, Matrix.Invert(Resolution.getTransformationMatrix()));
        Vector2 worldPosition = Vector2.Transform(screenPosition, Matrix.Invert(camera.GetTransformMatrix()));

        return worldPosition;     
    } 
```

结合我发布/提到的所有其他代码，这应该是实现分辨率独立性和出色相机所需的全部内容！

# c# - 用于记录历史记录的数据库触发器似乎导致死锁异常？

> ID：14383962
> 
> 赞同：0
> 
> 时间：2013-01-17T16:46:50.343
> 
> 标签：c#, sql, sql-server

当我调用存储过程以更新/插入`Configuration`表时，我的 C# 代码中出现死锁异常。

存储过程将`SP_Update_Configuration`插入新记录或更新现有记录。

触发器被设置为在历史表中保留以前记录的历史。如果`Configuration`表有更新或插入，那么它应该将该记录添加到`Configuration_History`表中。

我相信触发器导致了僵局？在添加触发器之前我没有任何问题....有什么想法吗？

我正在使用 SQL Server 2012 Express。

这是我的 SQL 示例：

```
CREATE PROCEDURE SP_Update_Configuration
( 
--Input variables
) 
AS
BEGIN TRANSACTION
DECLARE @RetCode INT
DECLARE @RowCnt INT
    --Standard Update Logic
SELECT @RowCnt = @@ROWCOUNT

IF @@ERROR <> 0
   BEGIN
    ROLLBACK TRAN
    SET @RetCode = 5
    RETURN @RetCode
   END

IF @RowCnt = 0
    BEGIN
        --Standard Insert Logic
    END

IF @@ERROR <> 0
   BEGIN
    ROLLBACK TRAN
    SET @RetCode = 5
    RETURN @RetCode
   END

COMMIT TRANSACTION
GO

create trigger dbo.Configuration_Log_Insert 
on dbo.Configuration
  for insert
as
  set nocount on
  insert into Configuration_History
    select *
      from Configuration
go

exec sp_settriggerorder @triggername = 'Configuration_Log_Insert', @order = 'last', @stmttype = 'insert'  

create trigger dbo.Configuration_Log_Update 
on dbo.Configuration
  for update
as
  set nocount on
  insert into Configuration_History
    select *
      from Configuration
go

exec sp_settriggerorder @triggername = 'Configuration_Log_Update', @order = 'last', @stmttype = 'update' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:53:42.033

```
SELECT @RowCnt = @@ROWCOUNT

IF @@ERROR <> 0 
```

在这里你有麻烦，因为`@@ERROR`是错误代码

```
SELECT @RowCnt = @@ROWCOUNT 
```

你可以这样做：

```
SELECT @RowCnt = @@ROWCOUNT, @error = @@ERROR

IF @error <> 0 
```

在触发器中你有

```
 insert into Configuration_History
    select *
      from Configuration 
```

但必须是

```
 insert into Configuration_History
    select *
      from inserted 
```

# python - Scipy 最小化 fmin - 语法问题

> ID：14383964
> 
> 赞同：6
> 
> 时间：2013-01-17T16:46:54.390
> 
> 标签：python, optimization, scipy, minimize

我有一个函数，它接受多个参数（一个数组和两个浮点数）并返回一个标量（浮点数）。现在我想通过改变两个参数来最小化这个函数：两个浮点数。数组在函数内部“解包”，然后使用其内容（数组和浮点数）。

如何使用 SciPy 的 fmin 函数来做到这一点？我很难为此找出正确的语法..

该功能类似于：

```
def func(x, y, data)
    data1=data[0]
    data2=data[...]
    ...
    ...
    result = ...x...y...data1...data2... #result is a scalar (float)
    return result 
```

在这种情况下应该是什么`scipy.optimize.fmin`样子？

```
optimize.fmin(func, ???) 
```

提前谢谢了！

万事如意，pp

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T16:51:07.747

`scipy`假设参数在一个数组中。您可以定义一个辅助函数：

```
def helper(xy):
    return func(xy[0], xy[1], data) 
```

并最小化它`optimize.fmin`：

```
optimize.fmin(helper, np.array([x0, y0]), ...) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-18T09:44:47.520

我在 SciPy 的[文档](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin.html#scipy.optimize.fmin)中找到了答案！我只是不习惯文档的编程“行话”......（尽管文档对我这样的新手非常有用）。

所以，这样做的方法如下：

*   与其在我的问题中定义函数（要最小化），不如将其定义为

    > ```
    > def func(x, *args) #it is literally "*args"!
    >     y=x[0]
    >     z=x[1]
    >     data1=data[0]
    >     data2=data[...]
    >     ...
    >     result = ...y...z...data1...data2... #result is a scalar (float)
    >     return result 
    > ```

*   现在，`optimize.fmin`函数应该是

    > ```
    > optimize.fmin(func, x0=[y_estimate, z_estimate], args=(data)) 
    > ```

显然（也许我错了）当你向函数提供数组`x0`（初始猜测）时`optimize.fmin`，它就会知道它必须优化一个“大小”为`x0`. 函数中需要的所有其他数据都必须在元组中给出`args`（在这个例子中，元组中只有一个数组`args`，但它可能是`args=(data1, data2, ...)`，在这种情况下，你不需要在函数中解包它）。

总结：最初的猜测`x0`只是一个数组；额外的参数`args`只是一个元组；该函数应该（字面意思！）定义为 def `func(x, *args)`；然后可以在函数内部“解包”数组`x`和元组（使用, , ... 和, , ...）。`args``y=x[0]``z=x[1]``data1=args[0]``data2=args[1]`

# android - UserRecoverableAuthException：需要权限

> ID：14383965
> 
> 赞同：33
> 
> 时间：2013-01-17T16:47:04.147
> 
> 标签：android, google-drive-api, google-play-services

我尝试按照教程：[https](https://developers.google.com/android/guides/http-auth) ://developers.google.com/android/guides/http-auth 。

代码：

```
token = GoogleAuthUtil.getToken(getApplicationContext(),
                        mEmail, mScope); 
```

显现：

```
<uses-permission android:name="android.permission.GET_ACCOUNTS"/>
<uses-permission android:name="android.permission.NETWORK"/>
<uses-permission android:name="android.permission.USE_CREDENTIALS"/>
<uses-permission android:name="android.permission.INTERNET"/> 
```

错误：

```
01-17 18:37:38.230: W/System.err(3689): com.google.android.gms.auth.UserRecoverableAuthException: NeedPermission
01-17 18:37:38.230: W/System.err(3689):     at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source)
01-17 18:37:38.230: W/System.err(3689):     at com.google.android.gms.auth.GoogleAuthUtil.getToken(Unknown Source)
01-17 18:37:38.230: W/System.err(3689):     at com.example.mgoogleauth.MainActivity$GetIOStreamTask.doInBackground(MainActivity.java:39)
01-17 18:37:38.230: W/System.err(3689):     at com.example.mgoogleauth.MainActivity$GetIOStreamTask.doInBackground(MainActivity.java:1)
01-17 18:37:38.230: W/System.err(3689):     at android.os.AsyncTask$2.call(AsyncTask.java:287)
01-17 18:37:38.230: W/System.err(3689):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
01-17 18:37:38.230: W/System.err(3689):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
01-17 18:37:38.230: W/System.err(3689):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
01-17 18:37:38.230: W/System.err(3689):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
01-17 18:37:38.230: W/System.err(3689):     at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-01-17T19:05:14.290

尝试遵循适用于 Android 的 Drive 快速入门，这是一个分步指南，展示了如何授权和上传文件到 Drive：[https ://developers.google.com/drive/quickstart-android](https://developers.google.com/drive/quickstart-android)

更具体地说，您似乎没有捕获 UserRecoverableException 并触发意图让用户授权应用程序。这记录在您在快速入门示例中链接和处理的 Google Play 服务文档中，如下所示：

```
...
} catch (UserRecoverableAuthIOException e) {
  startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
}
... 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-29T19:41:25.813

[官方 GoogleAuthUtil 教程](http://developer.android.com/reference/com/google/android/gms/auth/GoogleAuthUtil.html)的 getAndUseAuthTokenBlocking() 方法很好地解释了如何处理异常：

```
// Example of how to use the GoogleAuthUtil in a blocking, non-main thread context
   void getAndUseAuthTokenBlocking() {
       try {
          // Retrieve a token for the given account and scope. It will always return either
          // a non-empty String or throw an exception.
          final String token = GoogleAuthUtil.getToken(Context, String, String)(context, email, scope);
          // Do work with token.
          ...
          if (server indicates token is invalid) {
              // invalidate the token that we found is bad so that GoogleAuthUtil won't
              // return it next time (it may have cached it)
              GoogleAuthUtil.invalidateToken(Context, String)(context, token);
              // consider retrying getAndUseTokenBlocking() once more
              return;
          }
          return;
       } catch (GooglePlayServicesAvailabilityException playEx) {
         Dialog alert = GooglePlayServicesUtil.getErrorDialog(
             playEx.getConnectionStatusCode(),
             this,
             MY_ACTIVITYS_AUTH_REQUEST_CODE);
         ...
       } catch (UserRecoverableAuthException userAuthEx) {
          // Start the user recoverable action using the intent returned by
          // getIntent()
          myActivity.startActivityForResult(
                  userAuthEx.getIntent(),
                  MY_ACTIVITYS_AUTH_REQUEST_CODE);
          return;
       } catch (IOException transientEx) {
          // network or server error, the call is expected to succeed if you try again later.
          // Don't attempt to call again immediately - the request is likely to
          // fail, you'll hit quotas or back-off.
          ...
          return;
       } catch (GoogleAuthException authEx) {
          // Failure. The call is not expected to ever succeed so it should not be
          // retried.
          ...
          return;
       }
   }
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-11-10T20:27:36.257

我有同样的错误，在我的情况下，我使用了错误的范围，我只是改变

```
https://www.googleapis.com/auth/plus.login 
```

为了

```
https://www.googleapis.com/auth/userinfo.profile 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-04-22T18:13:46.790

在此文档页面 [https://developers.google.com/+/mobile/android/sign-in](https://developers.google.com/+/mobile/android/sign-in)上，该示例对此异常有很好的解释。

特别是，看起来应该注意这一行：

> 请求授权代码将始终在第一次调用 GoogleAuthUtil.getToken 时抛出 UserRecoverableAuthException

```
catch (UserRecoverableAuthException e) {
  // Requesting an authorization code will always throw
  // UserRecoverableAuthException on the first call to GoogleAuthUtil.getToken
  // because the user must consent to offline access to their data.  After
  // consent is granted control is returned to your activity in onActivityResult
  // and the second call to GoogleAuthUtil.getToken will succeed.
  startActivityForResult(e.getIntent(), AUTH_CODE_REQUEST_CODE);
  return;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-15T08:20:48.080

我发现这里的答案是被动的解决方案，而不是预防性的。
根据我很短的经验，UserRecoverableAuthException: NeedPermission 会在以下3种情况下抛出：

**#1 登录 Google 时未请求适当的范围**

检查您请求的范围是否正确。Android 应该通过权限请求对话框要求用户在身份验证过程之后允许权限。这将在调用 API 时防止 UserRecoverableAuthException。

```
GoogleSignInOptions o = new GoogleSignInOptions.Builder(GoogleSignInOptions.DEFAULT_SIGN_IN)
            .requestScopes(new Scope(DriveScopes.DRIVE)) // request permission for Drive API
            .requestScopes(new Scope(SheetsScopes.SPREADSHEETS)) // request permission for Sheets API
            .requestEmail()
            .build(); 
```

**#2 用户拒绝了权限**

用户在权限请求对话框上按下了“拒绝”按钮。

**#3 用户拒绝了您应用的权限**

对于 Android 8.1.x，有一个菜单，您可以在其中拒绝个别应用程序的权限。不过，不确定其他版本。

```
Settings > Google > Connected apps 
```

#2 和 #3 抛出的 UserRecoverableAuthException 是不可避免的，因为它们是用户活动的结果。但是，尽管用户拒绝了，但用下面的代码再次显示权限请求对话框不是没有意义吗？

```
} catch (UserRecoverableAuthIOException e) {
  startActivityForResult(e.getIntent(), REQUEST_AUTHORIZATION);
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-04-06T19:22:26.133

文档最近已更新，现在支持 SDK M（请求权限）并显示 OAuth 对话框。

**注意** Google Docs 通常不是最新的，但在您报告问题时它们似乎会引起注意。该示例已更新，我在一周内发送了反馈。因此，如果您看到无效的示例，请发送反馈！

[https://developers.google.com/drive/v3/web/quickstart/android](https://developers.google.com/drive/v3/web/quickstart/android)

# java - Spring：如何通过自动装配设置多个属性？

> ID：14383967
> 
> 赞同：1
> 
> 时间：2013-01-17T16:47:07.333
> 
> 标签：java, spring, properties, autowired

在我发现的所有自动装配示例中，该示例是关于一个`<bean>` `autowire`属性，例如设置为`byName`，并且只有一个应该通过自动装配设置的属性值。

我的问题是，如果`<bean>`您想通过自动装配设置多个属性怎么办？似乎没有人解释这种情况。有人可以解释我是否可以或是否应该使用`autowire`在 bean 中设置多个属性？以下是我想通过自动装配设置客户 bean 的帐户和信用属性的这种情况的示例：

```
<beans>
    <bean name="customer" class="ultratech.com.Customer" autowire="byName">
         <bean name="account"/>
         <bean name="credit>
    </beam>

    <bean name="account" class="ultratech.com.Account"/>
    <bean name="credit" class="ultratech.com.Credit"/>
</beans> 
```

另外，如果我错了，请纠正我，但如果我使用注解（`@Autowire`），那么我的问题很容易解决，因为我可以单独添加`@Autowire`到 bean 的任何属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T16:56:08.340

[编辑：编辑以反映更新的问题]

你的问题现在更清楚了。您似乎认为（如果我正确地遵循您的想法），`autowire="byName"`您应该提供一个 bean 名称而不是`byName`值。这是不正确的。autowire 属性可以采用一些可能的值，并且`byName`是其中之一。当你在这里设置`autowire`喜欢`byName`时：

```
<bean name="someBean" class="foo.bar.Baz" autowire="byName /> 
```

然后 Spring 将查看`someBean`( `foo.bar.Baz`class) 中的所有字段，并尝试按名称连接该对象的所有字段。也就是说，（在您的情况下）如果 Customer 类有一个 field `account`，Spring 将在其上下文中查找并尝试找到一个具有 name 的 bean`account`以注入 Customer bean。

如果你定义了两个这样的 bean：

```
 <bean name="customer" class="ultratech.com.Customer" autowire="byName" />
 <bean name="account" class="ultratech.com.Account" /> 
```

那么你很好，如果 Customer 是这样的类：

```
public class Customer {
    (...)
    private Account account;
    (...)
} 
```

假设您的 Customer 类具有名为 account 和 credit 的字段，您的 XML 代码片段应该如下所示：

```
<beans>
    <bean name="customer" class="ultratech.com.Customer" autowire="byName" />
    <bean name="account" class="ultratech.com.Account" />
    <bean name="credit" class="ultratech.com.Credit" />
</beans> 
```

除了“byName”自动装配外，您还可以自动装配：

1.  no - 默认 - 不自动装配
2.  byType - 查找属性类型的 bean - 但要小心 - 只有一个这种类型的 bean 允许自动装配 byType；如果有不止一个，则会引发异常
3.  constructor - 与 byType 一样工作，但仅查找构造函数参数；所有构造函数参数都必须满足每个相应类型的一个 bean

有关更多信息，请参阅 Spring 参考：http: [//static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-autowire](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-autowire)

# php - jquery调用中的PHP var

> ID：14383968
> 
> 赞同：-2
> 
> 时间：2013-01-17T16:47:09.093
> 
> 标签：php, jquery

这是可行的，但可能有更好的方法来传递 php var。有没有人有任何选择？谢谢

```
<?php $slide = "fade"; ?>

$(document).ready(function()
{   

    $("#showcase_right").awShowcase({transition : "<?php echo $slide; ?>"});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T16:49:26.617

不，你做对了。放松 ：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:52:34.990

更好的方法是`json_encode`将 PHP 字符串转换为 JavaScript。在这种情况下，它没有真正的区别，但是当您有其他字符串时，它可以确保您始终拥有有效的 JavaScript，无论 PHP 变量包含什么。

```
$(document).ready(function() {   
    $("#showcase_right").awShowcase({
        transition : <?php echo json_encode($slide); ?>
    });
}); 
```

另一种选择是将值存储在`data-`属性中，例如`<body>`标签中：

```
<body data-transition="<?php echo htmlspecialchars($slide); ?>"> 
```

然后你可以在你的 JavaScript 代码中使用`$('body').data('transition')`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T16:54:40.553

您所做的并不是真正定义变量。您正在以变量形式定义一个常量。

如果用户可以更改转换值，则可以将其全部保留在客户端上。

```
$(document).ready(function(){  
    $("#showcase_right").awShowcase({transition : strSlide || 'fade'});
}); 
```

`strSlide`“变量”在哪里。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T16:49:45.037

您可以将 PHP 变量插入隐藏的输入字段，然后将该输入抓取到 javascript 变量中。我认为你的方法更好，那只是在猜测其他方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-17T16:52:32.617

如果您不喜欢当前的方法，可以执行以下操作（根据自己的喜好更改实现）：

```
var config = {
    "slide":"<?php echo "fade"; ?>" // or have a variable here
}

$(document).ready(function()
{   

    $("#showcase_right").awShowcase({transition : config['slide']});
}); 
```

这样，您就可以尽可能地将 PHP 与 javascript 分离。允许您相对轻松地更改配置。

# delphi - 什么是 dclsmpedit？

> ID：14383971
> 
> 赞同：3
> 
> 时间：2013-01-17T16:47:20.993
> 
> 标签：delphi

什么是 dclsmpedit 包（Embarcadero Editor Script Enhancements）？
我需要吗？

我不确定“编辑器脚本增强”的作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T17:01:18.287

它是添加键绑定（您自己的代码编辑器键盘分配）、保存键盘宏（为播放而记录的击键）的能力以及使用 ToolsAPI 将编辑缓冲区列表添加到 IDE 的示例。仅当您想使用它的功能时才需要它。如果您想通过他们演示的 ToolsAPI 的部分来扩展 IDE，则该源代码很有用。中的键绑定功能`BufferList.pas`实现了`New IDE Classic`IDE 本身中的键映射（正如@LURD 在下面的评论中指出的那样）。

如果您使用的是 Delphi 2007，您可以在 Delphi Demos 文件夹中找到源代码（默认情况下在 Windows 7 中`C:\Users\Public\Documents\RAD Studio\5.0\Demos\DelphiWin32\VCLWin32\ToolsAPI\Edit Keybinding`），使用`Start->CodeGear RAD Studio->Samples`菜单项更容易找到。添加的功能的源代码也在那里，因此您可以看到它们的作用以及它们是如何实现的。

在 XE3 中，可以在`C:\Users\Public\Documents\RAD Studio\10.0\Samples\Delphi\VCL\ToolsAPI\Editor KeyBinding`或通过找到源代码`Start->All Programs->Embarcadero RAD Studio XE->Samples`。

# requirejs - Requirejs + 文本插件 + 糖语法 + almond.js

> ID：14383976
> 
> 赞同：2
> 
> 时间：2013-01-17T16:47:40.817
> 
> 标签：requirejs, almond

我正在使用糖语法将模板加载到我的视图中：

```
...
var template = require('text!templates/toolbar/toolbar.html') 
```

一切正常，但是当我运行 r.js 优化器时出现错误

```
TypeError: Object function () {
        //A version of a require function that passes a moduleName
        //value for items that may need to
        //look up paths relative to the moduleName
        return req.apply(undef, aps.call(arguments, 0).concat([relName, forceSync]));
    } has no method 'toUrl' 
```

# ios - 在 UITableView Cell 中实现 UIWebView

> ID：14383980
> 
> 赞同：0
> 
> 时间：2013-01-17T16:47:46.387
> 
> 标签：ios, objective-c, uitableview, uiwebview

我从 Web获取**JSON MutableArray****包含 YouTube URL 字符串**..

目的是**在每个单元格中****执行`UIWebView`**。

我的代码：如何实现代码？谢谢。

```
@property (nonatomic, strong) NSMutableArray* arrMovies;
@synthesize arrMovies;

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyIdentifier"];

        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MyIdentifier"];

            cell.selectionStyle = UITableViewCellSelectionStyleBlue;
        }

        cell.textLabel.text = [[self.arrMovies objectAtIndex:indexPath.row] valueForKey:@"title"];

        cell.detailTextLabel.text = [NSString stringWithFormat:@"%@ views | Duration: %i",

      [[self.arrMovies objectAtIndex:indexPath.row] valueForKey:@"viewCount"],intMinutes];

        return cell;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:32:27.657

我认为您误解了 UIWebView 是什么。UIWebView 允许您在应用程序中嵌入 Web 内容。这与发出 Web 请求、获取 JSONString、解析它并在视图中显示它不同。我认为这就是您真正要问的问题。请编辑您的问题/确认这一点。

您上面的代码具体有什么问题？您面临哪些问题？我认为你的问题是你需要一个`@property (nonatomic, strong) NSMutableArray* arrMovies;`and`@synthesize artMoves = _artMovies;`在你的实现文件中。

确保也覆盖你的 artMovies 属性的 getter。

# git - 运行 git gc --aggressive 时出错

> ID：14383982
> 
> 赞同：1
> 
> 时间：2013-01-17T16:47:53.147
> 
> 标签：git, ubuntu-12.04

运行“git gc”时出现以下错误：

```
 chris@chris-VirtualBox:~/code/dataquality$ git gc --aggressive
Counting objects: 3849, done.
error: object file .git/objects/1e/6a84c4e4202c469c188b69fd23407fca44d69d is empty
error: unable to find 1e6a84c4e4202c469c188b69fd23407fca44d69d
error: object file .git/objects/95/9dbfcdfd3ef09088e652d4e5526df66bc53323 is empty
error: unable to find 959dbfcdfd3ef09088e652d4e5526df66bc53323
error: object file .git/objects/9c/3f15a856fda402d82131bb9ea35ea7d27ae05d is empty
error: unable to find 9c3f15a856fda402d82131bb9ea35ea7d27ae05d
error: object file .git/objects/cf/bdc18aab11c9cbada9fb1ac73c347352b7a4fb is empty
error: unable to find cfbdc18aab11c9cbada9fb1ac73c347352b7a4fb
error: object file .git/objects/db/0ee0587a14cc0cdfa43ccda0d0b2010c7701b6 is empty
error: unable to find db0ee0587a14cc0cdfa43ccda0d0b2010c7701b6
Delta compression using up to 8 threads.
Compressing objects: 100% (3539/3539), done.
error: object file .git/objects/db/0ee0587a14cc0cdfa43ccda0d0b2010c7701b6 is empty
fatal: loose object db0ee0587a14cc0cdfa43ccda0d0b2010c7701b6 (stored in .git/objects/db/0ee0587a14cc0cdfa43ccda0d0b2010c7701b6) is corrupt
error: failed to run repack 
```

我不知道如何解决这些错误。我应该采取哪些步骤？

当我运行`git fsck --full`这是输出：

```
chris@chris-VirtualBox:~/code/dataquality$ git fsck --full
error: object file .git/objects/1e/6a84c4e4202c469c188b69fd23407fca44d69d is empty
fatal: loose object 1e6a84c4e4202c469c188b69fd23407fca44d69d (stored in .git/objects/1e/6a84c4e4202c469c188b69fd23407fca44d69d) is corrupt 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T17:39:49.980

由于`git fsck --full`在新克隆上返回了相同的错误，因此损坏的对象在分支中使用。来自的讨论部分`git help fsck`对您的情况有这样的说法：

```
 Any corrupt objects you will have to find in backups or other archives 
       (i.e., you can just remove them and do an rsync with some other site in
       the hopes that somebody else has the object you have corrupted). 
```

因此，如果您有一个带有此对象的旧克隆，您可能能够恢复。如果您没有备份[，此答案](https://stackoverflow.com/a/12371337/166732)可能对您有用。

# java - 如何阻止 Jackson JSON 映射器隐式转换为字符串？

> ID：14383983
> 
> 赞同：1
> 
> 时间：2013-01-17T16:48:04.677
> 
> 标签：java, jackson

我有一个 JSON 数组，我想确保它只包含字符串。Jackson 隐式地将整数和日期转换为字符串。我想确保 JSON 数组中的每个元素实际上都是一个字符串。

```
 Object[] badModuleArray = new Object[]{"case", 1, 2, "employee", new Date()};

    ObjectMapper objectMapper = new ObjectMapper();
    String jsonModules = objectMapper.writeValueAsString(badModuleArray);

    try
    {
        TypeFactory typeFactory = TypeFactory.defaultInstance();
        mapper.readValue(modules, typeFactory.constructCollectionType(List.class, String.class));
    }
    catch(IOException e)
    {
        logger.error("something other than strings in JSON object");

    } 
```

在上面的示例中，我希望 ObjectMapper 不将整数、日期等转换为字符串。如果 JSON 数组中的每个元素都不是字符串，我希望抛出异常。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T17:43:52.633

Jackson 将每个对象转换为字符串，因为您已经告诉它您想要一个`List<String>`.

相反，如果其中任何一个不是字符串，请向 Jackson 询问`List<Object>`并检查 List 的内容以抛出错误：

```
List list = objectMapper.readValue(jsonModules, typeFactory.constructCollectionType(List.class, Object.class));
for (Object item : list) {
    System.out.println(item + " is a: " + item.getClass());
    if (!(item instanceof String)) {
        System.out.println("Not a string!");
    }
} 
```

对于`["case",1,2,"employee",1358444552861]`我得到的 JSON：

> case is a: class java.lang.String
> 1 is a: class java.lang.Integer
> 不是字符串！
> 2 是：class java.lang.Integer
> 不是字符串！
> 员工是：class java.lang.String
> 1358444552861 是：class java.lang.Long
> 不是字符串！

# android - 使用 JSONArray 或普通 Array 存储/读取数据是否更有效？

> ID：14383984
> 
> 赞同：3
> 
> 时间：2013-01-17T16:48:05.357
> 
> 标签：android, arrays, json, arraylist

我正在使用一个连接到服务器的应用程序，从该服务器以格式`PHP/MySQL`返回所有内容。`JSON`例如，用户列表以 of 形式`JSONArray`返回`JSONObject`。每个对象都包含单个用户的信息（姓名、位置、电话号码等）。

在使用这种格式的信息时，将所有内容保留在`JSON`格式中并仅根据需要从数组/对象中提取项目会更有效吗？还是从`JSONArray`对象和包含的对象中提取所有内容以构建常规对象`Array`或`ArrayList`第一个对象更好？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T16:55:23.580

`JSONArray`内部使用`ArrayList`. 它只是包装结束`ArrayList`。所以我会说没有区别。`JSONObject`再次使用`HashMap`所以没有真正的缺点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:02:34.947

总之，JSON（可以被认为是 JavaScript 的一个子集）比 XML 更精简。这有几个积极的副作用

*   JSON 小于对应的 XML
*   JSON更快，即更简单的语法`->`更容易解析（faster parsing）

JSON 是 JavaScript 的，我认为它是近亲。但是 JSON 是独立的，[JSON.org](http://www.json.org/)在描述 JSON 方面做得很好。它还为 JavaScript 提供了一个兼容性库，增加了对浏览器的支持`JSON.parse`和不支持的情况。`JSON.stringify`

虽然`eval`当时（2009 年中期）用于评估 JavaScript，但它也可以评估 JSON，即解析 JSON，但它被认为是不安全的，因为它允许任意 JavaScript 代替执行。

JSON 恰好非常适合浏览器，并且由于它与 JavaScript 的密切关系，它是一种发展平台的自然方式。

虽然 XML 可能被认为具有更好的严格性，因为您可以键入它，但也正是这些东西使它变得慢了很多（我认为它也有点冗长）。但如果这是您真正想要的东西，您应该使用它，XML 同样无处不在。

我不会讨论动态或静态类型，但我会这么说。在无模式数据之上添加东西真的很容易，并且有很多方法可以进行验证，无论模式或没有模式。

# event-log - “在写入事件日志之前未设置源属性。”

> ID：14383986
> 
> 赞同：-2
> 
> 时间：2013-01-17T16:48:10.547
> 
> 标签：event-log

应用程序的一位用户收到错误“在写入事件日志之前未设置源属性”。当用户上传文件时。同一应用程序的其他用户在上传文件时不会收到此错误。可能的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T16:52:55.080

如果您在 Dotnet Framkework 上开发应用程序 - 您是否在代码中创建如下事件源。

VB代码

```
EventLog.CreateEventSource("ApplicationError","MyApp") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-11T18:20:58.617

以管理员用户身份运行应用程序为我解决了这个问题。运行应用程序的用户无权写入错误日志。

# dependency-injection - 单例中数据连接依赖注入的最佳方法

> ID：14383987
> 
> 赞同：5
> 
> 时间：2013-01-17T16:48:11.903
> 
> 标签：dependency-injection, ef-code-first, singleton

我的应用程序中有一些“缓存”对象，它们`IRepository`通过依赖注入（Ninject）获得（自定义存储库模式合同）。这些对象只使用存储库一次，但它们具有强制所有者刷新自身的刷新功能。它们是单例，只创建一次，并`ManualResetEvent`确保所有请求都被阻塞，直到它被加载。

`IRepositories`它们是基于**EF CodeFirst 的**，所以只需确保连接已关闭并`DbContext`永远保持对那里的引用就可以了吗？

我已经禁用了代理和延迟加载，所以......可以从缓存对象的根目录对数百个这些缓存的 POCO 实体进行长引用吗？

干杯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-21T13:50:47.983

我们参考 Julie Lerman 的评论， http: [//msdn.microsoft.com/en-us/magazine/ee532098.aspx](http://msdn.microsoft.com/en-us/magazine/ee532098.aspx?sdmr=JulieLerman) ?sdmr=JulieLerman 建议使用多个/多个较小的上下文，并在 Web 场景的情况下创建一个每次调用都有新的上下文。尽管她在实体框架和 AppFabric 中撰写了有关二级缓存的文章。

随着时间的推移，上下文将包含许多对象，性能会相应下降。我认为这个网站有一些关于 EF 性能的好技巧。例如生成的视图。 [http://msdn.microsoft.com/en-us/data/hh949853](http://msdn.microsoft.com/en-us/data/hh949853)

我个人的建议，我不能声称是最佳实践，但来自关心性能的人，每次调用都是一个可靠的长期折衷方案。使用生成的视图来尽可能缩短初始加载时间。

您可能会以从上下文中删除未使用的对象的方式管理永久 DBContext。或者使用带有事件的缓存库来执行此操作。不是一个小任务。

我会对您最终选择的解决方案感兴趣。请张贴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-24T14:37:37.797

最后，我找到的最佳解决方案是创建一种新的包装器：

```
 public class Generator<T> where T : IDisposable
    {
        readonly Func<T> _generate;
        public Generator(Func<T> generate)
        {
            _generate= generate;
        }

        public T Generate()
        {
            return _generate();
        }
    } 
```

并以这种方式或多或少地创建绑定：

```
// Dependency Injection bindings declaration section
DI.Bind<Generator<IRepository>>()
  .To(()=> new Generator<IRepository>(()=> DI.Get<IRepository>())); 
```

因此，在只需要创建和销毁元素的长寿对象中，我可以请求`Generator<IRepository>`服务，而不是`IRepository`. 因此，每次我需要刷新时，我都会创建一个新的 IRepository，而不知道它是如何构建的：

```
 using (var repository = repositoryGenerator.Generate())
 {
     repository.DoStuff();
 } 
```

到目前为止，它就像一个魅力。

实际上，我已将此功能添加到我的 DI 框架中。我现在可以绑定 IAnything 和稍后请求生成器，框架将使用此技术为我提供完全准备好的对象[如何以编程方式创建 Func<> 委托](https://stackoverflow.com/questions/19545539/how-to-create-a-func-delegate-programmatically)

干杯。

# excel - excel vba运行时错误7-内存不足

> ID：14383991
> 
> 赞同：0
> 
> 时间：2013-01-17T16:48:32.880
> 
> 标签：excel, excel-2010, vba

我在工作表中有两个宏。第一个检查某些单元格是否已寻址并具有某些值，然后运行另一个宏。以下代码用于此目的：

```
Private Sub Worksheet_Change(ByVal Target As Range)

If Not Intersect(Target, Range("K10:K1000")) Is Nothing And Target.Value = "Trapezoidal       roof 0.6mm and above" Or Target.Value = "LightBox ballasted" Then

Application.ScreenUpdating = False

Call PPAPricePerkWp

End If

End Sub 
```

这本身就可以正常工作。

第二个宏在单击按钮时运行。此宏将单元格/行复制并粘贴到电子表格的其他部分。

当宏运行时，我得到了错误`Runtime error 7 - out of memory`，它在上面的代码中中断。

是否有另一种方法可以检查某个列中的单元格是否已寻址并具有某些值并且不会导致上述错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T17:33:19.260

您可能希望在调用子例程之前禁用事件，以便每次更改单元格时都不会触发 Worksheet_Change

`Application.EnableEvents = False`

完成后不要忘记重新打开它

# php - Jquery表单带参数序列化

> ID：14383992
> 
> 赞同：0
> 
> 时间：2013-01-17T16:48:38.310
> 
> 标签：php, jquery, mysql, ajax

我制作了一个包含多个输入的表单。如果我键入其中一个输入，它将向 mysql 插入一个新行。但是，如果我想用每个新的字段日期更新我的 sql，它就会丢失，因为我不知道如何将数据发送到 mysql，

这是我的脚本：

```
<script>

Here I check and post a row to sql if this is the first keyup.

$('.ajax').keyup(function(){
if(document.getElementById("id").value==0){
$.ajax({
    type:'get',
    data: { insert: "1" },
    url:location.href,
    dataType:'json',
    success:function(response){
       var id = response.id;
       if(typeof(id) != 'undefined'){
          $('#id').val(id);
       }
    }
  });
document.getElementById("id").value="1";
$("#rejtett1").show();
$("#rejtett2").show();
$("#rejtett3").show();
}
else{

  If not, here I post the form!

    $('#addfelhasznalo').delay(200).submit();
}

});

There I want to update the data to mysql.

$("#addfelhasznalo").submit(function (event) {
    event.preventDefault();
    $.ajax({
        type: "get",
        dataType: "json",
        url: location.href+"?update=1",
        data: $("#addfelhasznalo").serialize(),
        success: function (response) {
                 }
    });
});

</script>

if($_GET["insert"]){

mysql_query("INSERT into accounts() VALUES()");

}

if($_GET["update"]){

mysql_query("UPDATE accounts SET ".$_GET["field"]."=".$_GET["fielddata"]." WHERE id='".$_GET["id"]."'");

} 
```

# objective-c - 动态更改 UICollectionReuseableView（集合部分标题）的高度

> ID：14383995
> 
> 赞同：31
> 
> 时间：2013-01-17T16:48:50.453
> 
> 标签：objective-c, ios6, xcode4.5

我正在尝试`UICollectionView`动态设置节标题的高度，但是使用下面的代码，我没有看到任何变化。视图中包含正确的项目，但高度不会改变。抱歉，如果这是一个重复的问题，但我似乎找不到与该`UICollectionView`对象特别相关的任何内容。提前致谢。

```
- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView
           viewForSupplementaryElementOfKind:(NSString *)kind
                                 atIndexPath:(NSIndexPath *)indexPath
{
    PhotoVideoHeaderCell *headerView = [collectionView dequeueReusableSupplementaryViewOfKind:UICollectionElementKindSectionHeader
                                                                          withReuseIdentifier:@"videoHeaderView"
                                                                                 forIndexPath:indexPath];
    if (indexPath.section == 0) {
        // photos
        [headerView setSection:@"Photo"];
    } else {
        [headerView.VehicleDetailView removeFromSuperview];
        CGRect frame = headerView.frame;
        frame.size.height = 60;
        [headerView setFrame:frame];
        [headerView setNeedsDisplay];
        [headerView setBackgroundColor:[UIColor grayColor]];
        [headerView setSection:@"Video"];
    }

    return headerView;
} 
```

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-01-17T17:27:29.723

假设您使用的是流布局，您的委托应实现以下功能：

```
- (CGSize)collectionView:(UICollectionView *)collectionView layout:(UICollectionViewLayout*)collectionViewLayout referenceSizeForHeaderInSection:(NSInteger)section; 
```

您可以为每个标题返回不同的大小。在水平滚动的集合视图中，仅使用宽度。在垂直滚动中，仅使用高度。未使用的值将被忽略——您的视图将始终被拉伸以分别填充水平/垂直集合视图的整个高度/宽度。

页脚也有相应的方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-11-22T20:28:11.680

Swift 3 和 4 中接受的答案：

```
func collectionView(_ collectionView: UICollectionView, layout collectionViewLayout: UICollectionViewLayout, referenceSizeForHeaderInSection section: Int) -> CGSize {
    return CGSize(width: collectionView.frame.size.width, height: 250)
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-04-05T07:51:52.323

好吧，而不是使用嘈杂的委托方法，我更喜欢使用这个：（只有在你有一个唯一的标题大小时才有效）

```
 let layout = self.collectionView.collectionViewLayout as! UICollectionViewFlowLayout // Assuming you use the default flow layout 
    layout.headerReferenceSize = CGSize(width: 42, height: 42) //Set the header size 
```

也适用于 itemSize：

```
 layout.itemSize = CGSize(width: 42, height: 42) //Set a custom item size 
```

例如，这对于设置相对于屏幕宽度的项目大小非常有用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-17T17:16:43.157

尝试这样的事情：

```
- (UICollectionReusableView *)collectionView:(UICollectionView *)collectionView viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath {
    UICollectionReusableView *header = [siteMapCollection dequeueReusableSupplementaryViewOfKind: UICollectionElementKindSectionHeader withReuseIdentifier: @"headerID" forIndexPath: indexPath];
    NSString *headerText = @"This is my header";
    UIFont *labFont = [UIFont fontWithName: @"HelveticaNeue-CondensedBold" size: 20.0];
    CGSize textSize = [dummyText sizeWithFont: labFont];
    UILabel *headerLabel = [[UILabel alloc] initWithFrame: CGRectMake(0, header.frame.size.height - (textSize.height + 12), header.frame.size.width, textSize.height + 8)];
    [headerLabel setFont: labFont];

    [header addSubview: headerLabel];

    return header;
} 
```

# java - 一个核心库和多个本地化的多个android项目

> ID：14383996
> 
> 赞同：2
> 
> 时间：2013-01-17T16:49:00.320
> 
> 标签：java, android, eclipse, ant

我基于同一个核心库（包含整个 UI 和所有业务逻辑）为多个客户开发了一个软件。如果一切都很简单，我会从启动项目时引用该库，并使用变量修改核心库中的不同标签。

例如 ：

```
Core library : com.test.core

package (and apk) 1 : com.test.core.customer1

apk 2 : com.test.core.customer2 
```

最终结果：对起始包装（标签等）的矿石包装进行了一些修改。

我尝试更改启动包上的语言（例如 package1 = fr，package2 = es）：[启动具有不同资源文件的 android 应用程序](https://stackoverflow.com/questions/9160693/launch-an-android-application-with-different-resource-file)

但缺点很简单：如果我使用一些 Android 功能，比如复制/粘贴，就会显示错误的语言。

一个想法是用ant（或类似的东西）配置eclipse，以便在我编译customer1或customer2时在编译时动态修改values/strings.xml包，但我不知道该怎么做。

我将 Eclipse Juno 与使用 android >= 3.2 的应用程序一起使用。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T09:27:25.423

这种情况可以用ant解决。

我下载了ant-contrib，放到C:\ant-contrib\ant-contrib-1.0b3.jar

在项目中，我创建了文件*specific/lm/strings.xml*。

我创建了 custom_rules.xml 文件并使用 ant 启动它。

它使用应该设置为 true的*lm属性。*您也可以使用目标*lm*。

```
<?xml version="1.0" encoding="UTF-8"?>
<project
    name="com.test"
    default="help" >

    <target name="lm">
        <property name="lm" value="true"/>
    </target>

    <taskdef resource="net/sf/antcontrib/antcontrib.properties" >
        <classpath>
            <pathelement location="C:/ant-contrib/ant-contrib-1.0b3.jar" />
        </classpath>
    </taskdef>

    <if>
        <equals
            arg1="${lm}"
            arg2="true" />
        <then>
            <property name="startproject" value="specific/lm"/>
            <echo message="Build spécial LM / Projet : ${startproject}" />
        </then>
    </if>

    <copy file="${startproject}/strings.xml"
        tofile="res/values/strings.xml"
        overwrite="true" />
</project> 
```

您还可以将 Maven [Skinning Android 应用程序与 Maven 构建配置文件一起使用](https://stackoverflow.com/questions/9699485/skinning-android-app-with-maven-build-profiles/9715183#9715183)

# c# - C# Scope_Identity 问题

> ID：14383997
> 
> 赞同：3
> 
> 时间：2013-01-17T16:49:09.327
> 
> 标签：c#, sql, scope-identity, executescalar

浏览了一些答案，似乎对我不起作用。

我需要返回表的 ID 字段，以便我可以在程序的不同部分使用它，我尝试过使用

```
 Convert.ToInt32(sqlComm.ExecuteScalar()); 
```

但没有运气，同样的

```
 Convert.ToInt32(sqlComm.Parameters["ID"].Value); 
```

即使记录确实插入到表中，两者都返回 0。

我将转储下面的代码，任何人都可以看到我做错了什么？

```
 using (SqlConnection sqlConnect = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString))
        {
            using (SqlCommand sqlComm = new SqlCommand("up_Insert_Address", sqlConnect))
            {
                sqlComm.CommandType = CommandType.StoredProcedure;
                sqlComm.Parameters.Add("@AddressID", SqlDbType.BigInt).Direction = ParameterDirection.Output;
                sqlComm.Parameters.Add("@AddressLineOne", SqlDbType.NVarChar, 40).Value = address.AddressLineOne;   

                try
                {
                    sqlComm.Connection.Open();
                    return Convert.ToInt32(sqlComm.ExecuteScalar());
                }

                catch (SqlException)
                {
                }

                finally
                {
                    sqlComm.Connection.Close();
                }
            }
        } 
```

和存储过程：

```
 @AddressID   Bigint OUTPUT,
    @AddressLineOne  NVarChar(40)
    AS
     BEGIN
      BEGIN TRY
      INSERT INTO Address
      (
         AddressLineOne
      )
      VALUES 
      (
         @AddressLineOne
      )

      SET @AddressID = SCOPE_IDENTITY();
    END TRY
    BEGIN CATCH
       DECLARE @Err nvarchar(500)
       SET @Err = ERROR_MESSAGE()
       RAISERROR(@Err, 16, 1)
    END CATCH
   END 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T16:52:12.940

你应该使用

```
Convert.ToInt64(sqlComm.Parameters["@AddressID"].Value); 
```

使用 . 执行命令后`ExceuteNonQuery`。以供将来参考，`ExecuteScalar` 返回查询返回的结果集中第一行的第一列。你没有返回任何东西，只是设置一个`OUTPUT`参数的值。

此外，您绝对不应该吞下任何`SqlException`. 由于您的命令和连接已经在`using`块中，您不需要添加另一个 try/catch/finally。将其更改为：

```
//try
//{
    sqlComm.Connection.Open();
    sqlComm.ExecuteNonQuery();
    return Convert.ToInt64(sqlComm.Parameters["@AddressID"].Value);
    // using Int64 since the SQL type is BigInt
//}

//catch (SqlException)
//{
//}

//finally
//{
//    sqlComm.Connection.Close();
//} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:02:50.203

```
var connectionstring = ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString;

var addressId = 0L; // long value (64bit)

using (var connection = new SqlConnection(connectionString))
using (var command = new SqlCommand("up_Insert_Address", connection))
{
  command.CommandType = CommandType.StoredProcedure;

  command.Parameters.AddWithValue("@AddressID", addressId);    
  command.Parameters.AddWithValue("@AddressLineOne", address.AddressLineOne); 

  command.Parameters["@AddressID"].Direction = ParameterDirection.Output;

  try
  {
    if(connection.State != ConnectionState.Open)
      connection.Open();

    var rowsAffected = command.ExecuteNonQuery();
    addressId = Convert.ToInt64(command.Parameters["@AddressID"].Value);
  }
  catch (SqlException)
  {
    // Handle SQL errors here.
  }
} 
```

# properties - 如何达到具有类的 NSDictionary 属性？

> ID：14383999
> 
> 赞同：0
> 
> 时间：2013-01-17T16:49:23.263
> 
> 标签：properties, nsdictionary, ios5.1

我已经为它的对象创建了一个带有“Adealer”类的 NSMutableArray。在我的“listVC”中，我在一个循环中填充所有属性（如下所示），其中“Adealer”类用于创建对象。

然后我通过 segue 将该数组中的一个对象转移到我的“detailsVC”中。在这里，我首先导入 Adealer 类，当我在“detailsVC”中调用它时；

```
NSLog(@"restGPSTransfer (NSDictionary) class = %@, content is = %@",[restGPSTransfer class],[restGPSTransfer description]); 
```

我明白了；

```
restGPSTransfer (NSDictionary) class = Adealer, content is = 
theDealer object and it's properties:
dealerID = 7
dealerName = Uppsala Centrum Test
dealerAdressStreet = Dragarbrunnsgatan 55
dealerAdressZip = 75320
dealerAdressCity = Uppsala
dealerTel = 
dealerMail = 
dealerWeb = www.uppsala.se
dealerLogo = 
dealerImages = 
dealerText = Uppsala centrum
dealerProducts = 
dealerLongitude = 17.63893
dealerLatitude = 59.85856
dealerDistance = (null)   // This is ok
dealerDistance2 = 8586398.000000 
```

到目前为止，上帝，**但我无法**在“detailsVC”（？！）中通过这样的简单调用获得上述属性；

```
self.labelRestName.text = [restGPSTransfer objectForKey:@"dealerName"]; 
```

...它因错误而崩溃：“-[Adealer objectForKey:]: unrecognized selector sent to instance 0x8a92db0”（然后以 InvalidArgumentExeption 终止...）

**我错过了什么？**

更多细节可以在我的问题中找到（我仍然没有答案！）； [如何从我的 NSDirectory 中获取数据（不仅仅是属性错字）？](https://stackoverflow.com/questions/14366891/how-do-i-get-out-data-from-my-nsdirectory-not-just-a-property-typo)

谢谢你的帮助 ：-）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T14:10:27.160

好像是内存问题

你在用ARC吗？你能添加你的字典分配代码吗？