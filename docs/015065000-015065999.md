# StackOverflow 问答 15065000-15065999

# sql-server - 在 SQL Server 2008 R2 中创建一次性数据库副本

> ID：15065000
> 
> 赞同：0
> 
> 时间：2013-02-25T10:37:51.560
> 
> 标签：sql-server, snapshot

是否可以在 SQL Server 2008 中创建一次性数据库快照/副本？

我希望能够启动我们使用的报告生成器的本地版本（自定义应用程序），并让它在快照时对数据的副本进行操作。问题是这个报告生成器写入数据库，所以我不能使用普通的快照功能，因为它们是只读的。（是的，我知道让报告生成器写入数据库很愚蠢，但我继承了该项目；））

当我完成测试后，我只想删除我刚刚所做的一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:40:15.917

您可以创建数据库快照：

```
CREATE DATABASE SnapshotName ON
    (  
    NAME = YourDatabase_Data, 
    FILENAME = 'c:\path\to\snapshot.ss'
    )
    AS SNAPSHOT OF YourDatabase; 
```

不要处理快照，而是处理原始数据库。

完成后，将数据库恢复为快照状态：

```
RESTORE DATABASE YourDatabase FROM DATABASE_SNAPSHOT = 'SnapshotName'; 
```

# ajax - Magento 客户从外部 Magento 登录

> ID：15065002
> 
> 赞同：3
> 
> 时间：2013-02-25T10:37:54.697
> 
> 标签：ajax, magento, session

我正在尝试以客户身份登录。我请求以下代码 (AJAX) 和这个外部 magento 商店。

```
<?php
require_once "../app/Mage.php"; 
umask(0);
Mage::app('default');
Mage::getSingleton("core/session", array("name" => "frontend"));
$user = $_POST['user'];
$password = $_POST['password'];
$session = Mage::getSingleton('customer/session');
$flag = 0;  
$resultArr = array();
function customerLogin($user,$password){
    try{        
        $session = Mage::getSingleton('customer/session');
        $result = $session->login($user,$password);
        $customer = $session->getCustomer();
        $session->setCustomerAsLoggedIn($customer);

        $resultArr['flag'] = 1;
        $resultArr['msg'] ='Logged in as '.$customer->getName();
        $jsonReturn = json_encode($resultArr);
        return $jsonReturn;
    }catch(Exception $e){
        $resultArr['flag'] = 0;
        $resultArr['msg'] = $e->getMessage();   
        $jsonReturn = json_encode($resultArr);
        return $jsonReturn;
    }
}
echo customerLogin($user,$password);
?> 
```

**我发现上面的代码是在 var/session 目录中成功创建会话文件，但无法在log_customer** DB 表中写入客户条目。任何人都知道这里有什么问题。谢谢 ：）

**已更新 Okie** 以下更新的代码（customerLogin.php）在某种条件下工作

```
<?php
function customerLogin($user,$password){
    require_once "./app/Mage.php"; 
    Mage::app('default');
    Mage::getSingleton("core/session", array("name" => "frontend"));
    $user = $_POST['user'];
    $password = $_POST['password'];
    $flag = 0;  
    $resultArr = array();
    $session = Mage::getSingleton('customer/session');
    try{        
        $result = $session->login($user,$password);
        //$customer = $session->getCustomer();      
        $session->setCustomerAsLoggedIn($session->getCustomer());
        $resultArr['flag'] = 1;
        $resultArr['msg'] ='Logged in as '.$session->getCustomer()->getName();
        $cusArr = array(
              'isLoggedIn'  => true,
              'name'        => $session->getCustomer()->getName(),
              'id'          => $session->getId(),
              'email'       =>$session->getCustomer()->getEmail(),
          );
        $resultArr['customerData'] = $cusArr;   
        $jsonReturn = json_encode($resultArr);
        return $jsonReturn;
    }catch(Exception $e){
        $resultArr['flag'] = 0;
        $resultArr['msg'] = $e->getMessage();   
        $jsonReturn = json_encode($resultArr);
        return $jsonReturn;
    }
}

echo customerLogin($user,$password);
?> 
```

如果我遵循如下目录结构：

```
|-- app
|-- **customerLogin.php**
|-- downloader
|-- install.php
|-- js
|-- lib
|-- media
|-- var 
```

但是如果我将代码放在一个目录级别，它就不起作用，例如：

```
|-- app
|-- **customerLogin**
    `--**customerLogin.php**
|-- downloader
|-- install.php
|-- js
|-- lib
|-- media
|-- var 
```

任何人都知道是什么问题。我想知道为什么当我将代码降低一级时，magento 无法在 log_customer 表中写入会话条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:45:20.007

获取您的客户 ID，然后使用以下代码。

```
Mage::getSingleton('customer/session')->loginById($customerId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T19:04:56.283

商店ID和网站ID在这里设置自定义你会根据你改变

```
 <?php 
ob_start();
error_reporting(E_ALL);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE);

require_once "app/Mage.php";

umask(0); 

Mage::app();

$firstname = "krishana";

$lastname = "singh";

$email = "krish.bhati@gmail.com";

$password = "12345678";

// Website and Store details

$websiteId = Mage::app()->getWebsite()->getId('1');

$store = Mage::app()->getStore('31');

$customer = Mage::getModel("customer/customer");

 $customer->website_id = $websiteId;

$customer->setStore($store);

$mageRunCode = isset ( $_SERVER ['MAGE_RUN_CODE'] ) ? $_SERVER ['MAGE_RUN_CODE'] : '';

$mageRunType = isset ( $_SERVER ['MAGE_RUN_TYPE'] ) ? $_SERVER ['MAGE_RUN_TYPE'] : 'store';

$app = Mage::app ( $mageRunCode, $mageRunType );

Mage::app('default');
Mage::getSingleton('core/session', array('name' => 'frontend')); 

$session = Mage::getSingleton('customer/session');

$session->start();

$customer->loadByEmail($email); 

 $customer_id= $customer->getId();

if($customer_id){   
Mage::getSingleton('customer/session')->loginById($customer_id);
Mage_Core_Model_Session_Abstract_Varien::start();

try{ 
    $session->login($email, $password);
   }
catch(Exception $e) {}

$session->setCustomerAsLoggedIn($session->getCustomer()); 

echo $session->isLoggedIn() ? $session->getCustomer()->getName().' is online!' : 'not logged in';

}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-17T06:32:12.017

无需通过 GSD Ajax 登录加载任何页面即可轻松打开您的 Magento 帐户并忘记密码。下面的网址非常有用。

[http://www.magentocommerce.com/magento-connect/easy-ajax-login-by-smartshore.html](http://www.magentocommerce.com/magento-connect/easy-ajax-login-by-smartshore.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T06:39:06.187

尝试使用此代码从 magento 外部登录，在 magento 根目录中创建 demo.php 文件并放入以下代码。

```
include('app/Mage.php');
Mage::app();
    if($_POST && $_POST["email"] && $_POST["password"])
    {
            $email=$_POST["email"];
            $password=$_POST["password"];
            $session = Mage::getSingleton('customer/session');

            try {
                      $log = $session->login($email, $password);
                      $session->setCustomerAsLoggedIn($session->getCustomer());
                      $customer_id=$session->getCustomerId();

                      $send_data["success"]=true;
                      $send_data["message"]="Login Success";
                      $send_data["customer_id"]=$customer_id;
                } 

                catch (Exception $ex) {
                            $send_data["success"]=false;
                                $send_data["message"]=$ex->getMessage();
                            }
    }
    else
    {
            $send_data["success"]=false;
            $send_data["message"]="Enter both Email and Password";
    }
    echo json_encode($send_data); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-15T10:53:08.100

在控制器中使用以下代码`magento`它将在控制器内工作，因为自定义`PHP`文件无法生成`magento`访问者日志

```
public function customerLoginSession($customer_id){

        /** @var $session Mage_Customer_Model_Session */
        $session = Mage::getSingleton( 'customer/session' );
        Mage::app()->getStore()->setWebsiteId(1);
        try
        {
            //$session->login( $user, $pass);
            $session->loginById($customer_id);
            $customer = $session->getCustomer();
            $session->setCustomerAsLoggedIn($customer);

            $res = json_encode(array('status' => 'valid', 'userData' => $customer->getId()));
        }
        catch( Exception $e )
        {
            $res = json_encode(array('status' => 'invalid', 'userData' => $e->getMessage()));
        }
        return $res;

  } 
```

# jquery-ui - 使用 jQuery UI 问题在 iFrame 中拖放

> ID：15065004
> 
> 赞同：0
> 
> 时间：2013-02-25T10:38:09.250
> 
> 标签：jquery-ui, iframe, drag-and-drop, draggable, iframe-app

我正在使用 jQuery UI。当我在 iframe 中拖动元素并将鼠标移出 iframe 时，该元素仍处于可拖动状态。因此，当我将鼠标移回 iframe 时，我仍然可以拖动它，就像我按下鼠标左键一样。

如何避免？所以如果我开始拖动元素，当我在最后一个可拖动位置离开 iframe 时它会停止？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:43:50.360

当您的指针离开 iframe 时，您需要触发 mouseup() 以便拖动的元素不会被释放。

```
$('body').one("mouseleave", function(){
    $('body').mouseup();
}); 
```

有更多与我的解决方案有关的问题，因此请参阅我[在此处发布](https://stackoverflow.com/questions/14645510/jquery-draggable-issue)的问题以获取更多详细信息

# facebook - 如何使用 FQL 从 fbid 获取 Facebook 照片？

> ID：15065005
> 
> 赞同：2
> 
> 时间：2013-02-25T10:38:10.357
> 
> 标签：facebook, facebook-fql

在这种情况下很奇怪。我知道答案，但它不起作用。

我用php写了一个照片上传系统。图片将从我的服务器上传到 facebook 并返回给我`fbid`。所以我可以使用它`fbid`来运行 FQL 来获得不同尺寸的照片。FQL 是：

```
SELECT src_small, src_big, images FROM photo WHERE object_id=[fbid] 
```

这在我的 php 系统中很好用。它返回一个包含不同图片大小的url的数组。我将它们保存在数据库中，包括`fbid`. 有时它会`NoPic`说话，所以我决定从 facebook 检查这张照片数组。我再次在我的系统中运行 FQL，并尝试使用 facebook graph API 工具。它们都返回空数组集。

然后我使用 facebook 链接检查对象是否存在，它可以工作。

[https://www.facebook.com/photo.php?fbid=220817144722724](https://www.facebook.com/photo.php?fbid=220817144722724)

这意味着该对象存在，但我无法再从 FQL 中获取它……我怎样才能再次获取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:33:48.413

如果您成功上传照片，则意味着您无疑设置了`photo_upload`权限。不幸的是，此权限仅允许您`POST`拍照，但不允许拍照`GET`。

因此，我想您忘记设置`user_photos`权限。或者您没有将其设置在正确的位置，或者您的 FQL 查询没有重复使用它？

一定是这样，因为我试过了，Facebook 方面一切正常。

# java - 如何设置路由以连接以用户定义类数组作为 playframwork 2.1 中的输入的函数？

> ID：15065009
> 
> 赞同：0
> 
> 时间：2013-02-25T10:38:18.570
> 
> 标签：java, playframework, playframework-2.1

我想调用控制器函数“getXXX(MyClass[] empnos)”，它将数组作为 playframework 2.1 中的输入。

为此，我将路线输入为：

```
GET     /getXXX       controllers.Application.getXXX(empnos:Array[MyClass]) 
```

它给出了编译错误：

> 找不到类型 Array[MyClass] 的 URL 路径绑定器。尝试为此类型实现隐式 PathBindable。

请帮我解决这个问题。我不知道实现隐式 PathBindable。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T23:57:16.977

将包添加到您的项目 Build.scala：

```
routesImport ++= "binders.CustomBinders._" 
```

使用查询字符串的示例：

```
package binders;

import org.joda.time.DateTime
import java.util.Date
import java.text.SimpleDateFormat
import play.api.mvc.QueryStringBindable
import java.net.URLEncoder
import org.joda.time.format.DateTimeFormat
import org.joda.time.DateTimeZone

object CustomBinders {

  implicit def queryStringBinder(implicit strBinder: QueryStringBindable[String]) = new QueryStringBindable[DateTime] {
      override def bind(key: String, params: Map[String, Seq[String]]): Option[Either[String,DateTime]] = {
        for {
          dateStr <- strBinder.bind(key, params)
        } yield {
            dateStr match {
              case (Right(dateStr)) => {
                val formatter = new SimpleDateFormat(
                        "EEE, d MMM yyyy HH:mm:ss z");
                try {
                    val someDate = formatter.parse(dateStr);
                    Right(new DateTime(someDate.getTime(),DateTimeZone.UTC))
                } catch {
                    case e: NumberFormatException => Left("Cannot parse parameter " + key + " as DateTime: " + e.getMessage)
                }
              }
              case _ => Left("Unable to bind DateTime")
            }  
         } 
      }

      override def unbind(key: String, value: DateTime) = {
        val fmt = DateTimeFormat
                .forPattern("EEE, d MMM yyyy HH:mm:ss z");
        strBinder.unbind(key, fmt.print(value))
      }

  }
} 
```

# linux - 如何对指定路径下的所有文件执行 for-each 循环？

> ID：15065010
> 
> 赞同：54
> 
> 时间：2013-02-25T10:38:22.647
> 
> 标签：linux, bash, shell

以下命令尝试枚举`*.txt`当前目录下的所有文件，并一一处理：

```
for line in "find . -iname '*.txt'"; do 
     echo $line
     ls -l $line; 
done 
```

为什么会出现以下错误？：

```
ls: invalid option -- 'e'
Try `ls --help' for more information. 
```

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-02-25T11:39:12.453

这是在处理文件名中的空格和换行符时循环文件的更好方法：

```
#!/bin/bash

find . -type f -iname "*.txt" -print0 | while IFS= read -r -d $'\0' line; do
    echo "$line"
    ls -l "$line"    
done 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-25T10:43:44.277

-loop将`for`遍历提供的字符串上的每个（空格分隔）条目。

您实际上并没有执行`find`命令，而是将其作为字符串提供（由`for`-loop 迭代）。而不是双引号使用反引号或`$()`：

```
for line in $(find . -iname '*.txt'); do 
     echo "$line"
     ls -l "$line"
done 
```

此外，如果您的文件路径/名称包含空格，则此方法将失败（因为`for`-loop 遍历空格分隔的条目）。相反，最好使用[dogbanes answer](https://stackoverflow.com/a/15066129/246263)中描述的方法。

* * *

为了澄清您的错误：

如前所述，`for line in "find . -iname '*.txt'";` 迭代所有空格分隔的条目，它们是：

*   寻找
*   .
*   -我的名字
*   '*.txt'（我认为...）

前两个不会导致错误（除了不希望的行为），但第三个在执行时会出现问题：

```
ls -l -iname 
```

许多（bash）命令可以组合单个字符选项，因此`-iname`与`-i -n -a -m -e`. 瞧：你的`invalid option -- 'e'`错误！

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-02-26T10:54:31.833

更紧凑的版本在文件名中使用空格和换行符：

```
find . -iname '*.txt' -exec sh -c 'echo "{}" ; ls -l "{}"' \; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T10:42:25.350

使用[命令替换](https://en.wikipedia.org/wiki/Command_substitution)而不是引号来执行 find 而不是将命令作为字符串传递：

```
for line in $(find . -iname '*.txt'); do 
     echo $line
     ls -l $line; 
done 
```

# c# - 摆脱字典中包含的 List<> 中的重复项

> ID：15065011
> 
> 赞同：0
> 
> 时间：2013-02-25T10:38:23.827
> 
> 标签：c#, list, dictionary

我有以下字典。

```
Dictionary<string, List<string>> dictSubjects = new Dictionary<string, List<string>>(); 
```

并且我正在尝试摆脱驻留在各个字典条目的每个列表实例中的潜在重复项。

这是我尝试过的，但是在只读的列表行中出现错误

```
foreach (var kvp in dictSubjects)
        {
            lstSubjectsNoDupes.Clear();
            for (int i = kvp.Value.Count - 1; i >= 0; i--)
            {
                if(lstSubjectsNoDupes.Contains(kvp.Value[i]))
                {
                   lstSubjectsNoDupes.Add(kvp.Value[i]); 
                }
            }
            kvp.Value = lstSubjectsNoDupes;

        } 
```

我怎样才能有效地消除字典每个列表中的潜在重复项？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:43:04.560

如果您不太关心效率，最简单的方法是：

```
dictSubjects = dictSubjects.ToDictionary(pair => pair.Key,
                                         pair => pair.Value.Distinct().ToList()); 
```

或者，要更新现有字典：

```
foreach (var key in dictSubjects.Keys.ToList())
{
    dictSubjects[key] = dictSubjects[key].Distinct().ToList();
} 
```

请注意使用`ToList`here 以避免迭代正在修改的集合的视图。没有这个，`InvalidOperationException`被抛出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:43:34.397

关于什么

```
foreach (var kvp in dictSubjects.ToList())
    dictSubjects[kvp.Key] = kvp.Value.Distinct().ToList(); 
```

# cakephp-2.0 - 使会话对所有子域有效

> ID：15065015
> 
> 赞同：0
> 
> 时间：2013-02-25T10:38:34.203
> 
> 标签：cakephp-2.0, cakephp-2.1

如何与所有子域（包括 www.example.com 和[http://example.com](http://example.com)地址）进行有效的身份验证会话

现在，如果在 www. 上创建了一个，CakePHP 刚刚破坏了 Auth 会话，并且您访问了没有 www. 的网站！反之亦然。

如果用户在不使用 www. 的情况下进行访问，我将无法使用重定向到[http://www.example.com](http://www.example.com)，因为会有很多子域并且重定向不再是一种选择。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T23:56:13.943

我现在不在我的电脑旁，但是您可以通过将其添加到您的`app/Config/bootstrap.php`

```
ini_set("session.cookie_domain", ".example.com"); 
```

CakePhp Session 似乎没有配置选项来设置它，但标准的 php 配置应该可以工作。

相关问题可以在这里找到；

[CakePHP 保持会话从主域到子域](https://stackoverflow.com/questions/10519570/cakephp-keep-session-from-main-domain-across-to-a-subdomain)

[跨子域的 PHP 会话](https://stackoverflow.com/questions/1064243/php-sessions-across-sub-domains)

# delphi - 数字编辑控件，内部带有平面按钮，没有计算器

> ID：15065018
> 
> 赞同：1
> 
> 时间：2013-02-25T10:38:43.437
> 
> 标签：delphi, c++builder, vcl, jvcl

我正在用 RAD Studio 编写一个 C++ 项目，但这也适用于 Delphi。

我需要一个编辑控件，其中用户只能输入浮点数（2 个小数位）并且可以通过单击编辑控件本身内的按钮（实际图标）来恢复原始值（取自变量，此处不重要）。

这就是我所做的，使用`TJvCalcEdit`来自 JEDI 库。

![在此处输入图像描述](../Images/a4e55cbc66c5f0ec1d05d2c39f70a2f3.png)

控制定义：

```
object Sconto1: TJvCalcEdit
  [non-important attributes...]
  ButtonFlat = True
  Glyph.Data = {
    D6020000424DD6020000000000003600000028000000100000000E0000000100
    180000000000A0020000130B0000130B00000000000000000000FFFFFFFFFFFF
    FFFFFFFFFFFFFFFFFF999EC29396C3FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
    FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF9198C48694CBA7BAFE8493CA72
    75B9FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF8B96C5
    8695CBA7BAFEA7BAFEA7BAFEA7BAFE747EB66D71B5FFFFFFFFFFFFFFFFFFFFFF
    FFFFFFFFFFFFFFFFFFFF8493CAA7BAFEA7BAFEA7BAFEA7BAFEA7BAFEA7BAFE84
    93CA7E83CE6D71B4FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF8F94C3A7BAFE
    A7BAFEA7BAFEA7BAFEA7BAFEA7BAFE8492CA8288D27B7FCA6D71B4FFFFFFFFFF
    FFFFFFFFFFFFFFFFFFFFFFFFFF8492CAA7BAFEA7BAFEA7BAFE828ECA7B82C993
    96FA6D6FB67B7FCA7B7FCA6D6FB4FFFFFFFFFFFFFFFFFFFFFFFFFFFFFF9299C2
    A5B7FE7E88CA787DC99396FA9396FA9396FA9396FA6D6FB67B7FCA7B7FCA6D6F
    B4FFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7678C89396FA9396FA9396FA9396FA93
    96FA9396FA9396FA6D6FB67B7FCA7B7FCA6C6FB3FFFFFFFFFFFFFFFFFFFFFFFF
    FFFFFF7678C89396FA9396FA9396FA9396FA9396FA9396FA9396FA6D6FB67B7F
    CA7B7FCA7576B0FFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7678C89396FA9396FA93
    96FA9396FA9396FA9396FA9396FA6D6FB67B7FCA6266A2D6D0E2FFFFFFFFFFFF
    FFFFFFFFFFFFFFFFFF7678C89396FA9396FA9396FA9396FA9396FA9396FA9396
    FA6D6FB67B7FCA7C7EB0FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7678C893
    96FA9396FA9396FA9396FA9396FA9396FA9396FA7679C66B6DACFFFFFFFFFFFF
    FFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7678C89396FA9396FA9093F58B8EEC7678
    C87C7FC6ACABE5FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF
    FFFF7678C88283C5A4A4E7C4C1EBFFFFFFFFFFFFFFFFFFFFFFFF}
  ImageKind = ikCustom
  DecimalPlacesAlwaysShown = False
  OnButtonClick = EScontoButtonClick
end 
```

单击按钮时调用的方法：

```
void __fastcall TFRigOrd::EScontoButtonClick(TObject *Sender)
{
    TJvCalcEdit* edit = dynamic_cast<TJvCalcEdit*>(Sender);
    edit->Value = oldSconto1;
} 
```

**问题**：在此方法结束时，控件下方会出现一个计算器弹出窗口，需要用户执行操作。我不希望这种情况发生，因为我正在以编程方式更改值。我猜这是一个默认值，因为这样的按钮是用来触发计算器的。此外，您看到的值 (255) 没有小数点，只有在计算器关闭后才会显示。

![在此处输入图像描述](../Images/ca5f47881357ebecb0a00ee4b88fcad8.png)

那么，我可以禁用此行为吗？或者有人可以建议我使用另一种控件（标准、开源或免费）的解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T14:47:42.087

我会使用 a`TButtonedEdit`来获取按钮，并强制浮点输入在点后最多两位小数，我会这样做

```
TButtonedEdit = class(ExtCtrls.TButtonedEdit)
protected
  procedure KeyPress(var Key: Char); override;
  procedure WMPaste(var Message: TWMPaste); message WM_PASTE;
end;

...

procedure TButtonedEdit.KeyPress(var Key: Char);
  function InvalidInput: boolean;
  var
   dc: integer;
  begin
    result := false;
    if Character.IsControl(Key) then Exit;
    dc := Pos(DecimalSeparator, Text);
    if not (Key in ['0'..'9', DecimalSeparator]) then Exit(true);
    if Pos(DecimalSeparator, Text) > 0 then
    begin
      if Key = DecimalSeparator then Exit(true);
      if (Length(Text) - dc > 1)
        and (Pos(DecimalSeparator, Text) < SelStart + 1) and
        (SelLength = 0) then Exit(true);
    end;
  end;

begin
  inherited;
  if InvalidInput then
  begin
    Key := #0;
    beep;
  end;
end;

procedure TButtonedEdit.WMPaste(var Message: TWMPaste);
var
  s: string;
  i: integer;
  hasdc: boolean;
  NewText: string;
  NewSelStart: integer;
begin
  if Clipboard.HasFormat(CF_TEXT) then
  begin
    s := Clipboard.AsText;

    NewText := Text;
    Delete(NewText, SelStart + 1, SelLength);
    Insert(s, NewText, SelStart + 1);

    // Validate
    hasdc := false;
    for i := 1 to Length(NewText) do
    begin
      if NewText[i] = DecimalSeparator then
        if hasdc then
        begin
          beep;
          Exit;
        end
        else
          hasdc := true
      else if not (NewText[i] in ['0'..'9']) then
      begin
        beep;
        Exit;
      end;
    end;

    // Trim
    if hasdc then
      NewText := Copy(NewText, 1, Pos(DecimalSeparator, NewText) + 2);

    NewSelStart := SelStart + Length(s);
    Text := NewText;
    SelStart := NewSelStart;
    SelLength := 0;
  end
  else
    inherited;
end; 
```

![截屏](../Images/514ed0ac41c05a716d1daeea482dbd8e.png)

[示例演示 EXE](https://privat.rejbrand.se/floatinput2places.exe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:06:58.313

使用股票 VCL 按钮编辑器

[http://docwiki.embarcadero.com/Libraries/en/Vcl.ExtCtrls.TButtonedEdit](http://docwiki.embarcadero.com/Libraries/en/Vcl.ExtCtrls.TButtonedEdit)

用于`OnChange`过滤掉错误的输入（或使用`JvValidators`）

* * *

另一种基于 JediVCL 的方法是使用支持基本按钮的编辑器
[http://wiki.delphi-jedi.org/wiki/JVCL_Help:TJvComboEdit](http://wiki.delphi-jedi.org/wiki/JVCL_Help:TJvComboEdit)

`EditMask`就像has 一样，它具有属性，`TMaskEdit`因此您可以对其进行调整以仅接受数字。

至少`OnChange`事件将允许你过滤非数字文本输入。

# listview - 带有选择器的 ListView 在 Froyo 中不起作用

> ID：15065023
> 
> 赞同：0
> 
> 时间：2013-02-25T10:38:59.180
> 
> 标签：listview, colors, selector, android-2.2-froyo

我有这个：

row_selector.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android"       android:exitFadeDuration="@android:integer/config_mediumAnimTime">

<item android:drawable="@color/green" android:state_pressed="true"/>
<item android:drawable="@color/blue" android:state_selected="true"/>
<item android:drawable="@color/yellow" android:state_activated="true"/>

</selector> 
```

专辑项目.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:background="@drawable/row_selector"
android:orientation="horizontal"
android:padding="5dip" > 
```

AlbumCursorAdapter.java

```
public class AlbumCursorAdapter extends CursorAdapter {
...
@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    final View view = mInflater.inflate(R.layout.album_item, parent, false);
...
} 
```

为什么在 android 4.0 中工作而不在 Froyo 中工作？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T11:49:31.710

android:state_activated 是在 android 3.0 (API 11) [JavaDoc中引入的](http://developer.android.com/reference/android/R.attr.html#state_activated)

# java - 使用 Hibernate 将数据库从 mysql 更改为 oracle

> ID：15065025
> 
> 赞同：2
> 
> 时间：2013-02-25T10:39:10.647
> 
> 标签：java, mysql, oracle, hibernate

嗨，我有一个小型 java 项目，并且正在使用 hibernate。现在我想将数据库更改为 oracle，我必须在配置文件中进行哪些更改才能使其成为可能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T10:44:33.073

在您的 hibernate.cfg.xml 中，您应该定义了一个方言。该行如下所示：

```
 <property name="dialect">org.hibernate.dialect.MySQLInnoDBDialect</property> 
```

将其更改为：

```
<property name="dialect">org.hibernate.dialect.OracleDialect</property> 
```

还要更改同一文件中的数据库连接参数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T11:16:50.377

修改这些属性。在 hibernate.cfg.xml 中

```
<property name="hibernate.connection.driver_class">oracle.jdbc.driver.OracleDriver</property>
            <property name="hibernate.connection.password">your_new_password</property>
            <property name="hibernate.connection.url">jdbc:oracle:thin:@loalhost:xe</property>
            <property name="hibernate.connection.username">user_name</property>
            <property name="hibernate.dialect">org.hibernate.dialect.Oracle10gDialect</property> 
```

# c# - 无法从后端触发 dropDownList selectionChange 事件

> ID：15065028
> 
> 赞同：0
> 
> 时间：2013-02-25T10:39:11.807
> 
> 标签：c#, asp.net

我无法在选择更改上触发该方法。我正在从后面的代码中添加 DropDownList 本身。代码 ：

```
 private TableCell CreateMTPLTypeCell(int insurerId, string MTPLType)
        {

            TableCell rg = new TableCell();
            rg.ID = string.Concat("rg_", insurerId);
            rg.CssClass = "formItem";
            //if (insurerId == 14)
            //{
                DropDownList ddl = new DropDownList();
                ddl.ID = "MTPLTypes";
                ddl.Items.Add(new ListItem("Standard", "1")); // add list items
                ddl.Items.Add(new ListItem("DubultOCTA", "2"));
                ddl.Items.Add(new ListItem("DubultOCTA+vējst", "3"));
                //ddl.SelectedIndex =
                //    ddl.Items.IndexOf(ddl.Items.
                //        FindByValue(MTPLType));
                ddl.SelectedIndexChanged += new EventHandler(MTPLType_selectedIndexChange);
                ddl.AutoPostBack = true;
                rg.Controls.Add(ddl);
            //}
            return rg;
        }

        void MTPLType_selectedIndexChange(object sender, EventArgs e)
        {
            DropDownList ddl = (DropDownList)sender;
            int insurerId = Int32.Parse(ddl.ID.Replace("rg_", ""));

            MTPLQuotes quotes = proposal.Properties.MtplQuotes[insurerId];
            if (quotes == null) return;

            proposal.GetSingleMTPLQuote(insurerId, Helpers.PortalUtilities.CurrentUser, BrokerInfo.GetBrokerInfo().Country.ID);

            DrawMtplQuotes(mtplPaymentMappingsCount > 0);
        } 
```

我错过了 DropDownList 对象上的一些额外参数吗？

Atm 的工作原理是这样的：在 selectionChange 之后它开始“加载”但它没有到达该方法。：/

在同一个班级中，我有另一个带有 onChange 事件（Text_Change）的 tableCell -> 这可以正常工作。

```
private TableCell CreateInsurerMtplDiscountCell(int insurerId, decimal discount)
    {
        TableCell c = new TableCell();
        c.CssClass = "formItem";
        c.Style[HtmlTextWriterStyle.PaddingLeft] = "25px";

        TextBox txt = new TextBox();
        txt.ID = string.Format("ins_disc_{0}", insurerId);
        txt.Text = discount > 0 ? discount.ToString() : "";
        txt.TextChanged += new EventHandler(insurerDiscountPercent_TextChanged);
        txt.AutoPostBack = true;
        txt.Width = new Unit(40);
        c.Controls.Add(txt);

        Literal l = new Literal();
        l.Text = "%";
        c.Controls.Add(l);

        return c;
    }

    void insurerDiscountPercent_TextChanged(object sender, EventArgs e)
    {
        TextBox txt = (TextBox)sender;

        int insurerId = Int32.Parse(txt.ID.Replace("ins_disc_", ""));

        MTPLQuotes quotes = proposal.Properties.MtplQuotes[insurerId];
        if (quotes == null) return;

        decimal discountPercent;
        if (!Decimal.TryParse(txt.Text, out discountPercent))
            discountPercent = 0;

        quotes.InsurerDiscountPercent = discountPercent;
        foreach (MTPLQuote quote in quotes.Quotes)
            ApplyMtplInsurerDiscount(quote, discountPercent);

        DrawMtplQuotes(mtplPaymentMappingsCount > 0);
    } 
```

解决了 - 问题出在 TableCell.ID (rg.ID = string.Concat("rg_",insurerId);) 上。删除后一切正常。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:42:37.350

我认为您必须在创建新控件后刷新您的网站。我建议您使用 AJAX-updatepanels（因此您不必刷新整个站点）。

1.  要添加 OnChanged-Event 名称，您还应该能够添加字符串名称而不是事件处理程序本身。

    ddl.SelectedIndexChanged = "MTPLType_selectedIndexChange";

2.  我认为对于权限限制的控制原因，您必须使用`"protected void"`而不是无法访问。`"private void"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:54:19.243

您应该将您的`SelectedIndexChanged`事件绑定到事件的下拉列表中`Page_PreInit`。

然后它应该工作。

# iphone - FPPopover 在弹出窗口视图之外触摸时会给出 EXC_BAD_ACCESS

> ID：15065032
> 
> 赞同：0
> 
> 时间：2013-02-25T10:39:14.567
> 
> 标签：iphone, fppopover

我在我的项目中使用 FPPopover。我在 UITextField 上显示了弹出框。弹出框显示正确，但之后当我触摸弹出框之外时，它会给我 EXC_BAD_ACCESS 错误。我的项目中未启用 ARC。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:56:09.227

几乎没有变化就完成了。我为 FPPopover 本机库文件打开了 ARC。这解决了我的问题。

# python - 如何在python中使用带有sqlite的sqlalchemy来增加连接超时

> ID：15065037
> 
> 赞同：14
> 
> 时间：2013-02-25T10:39:32.070
> 
> 标签：python, sqlite, sqlalchemy, operationalerror

我使用 sqlite (v2.6.0) 作为数据库后端并使用 sqlalchemy(v0.7.9) 来操作它。最近我遇到了一个错误`OperationalError: (OperationalError) database is locked`

通过搜索stackoverflow，一个可能的解决方案是增加连接的超时时间。参考：[OperationalError：数据库被锁定](https://stackoverflow.com/questions/3172929/operationalerror-database-is-locked)

但我不知道如何在 sqlalchemy 中做到这一点（因为连接实际上是由它控制的）有人可以给我一个方向吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-02-25T12:04:21.170

SQLAlchemy`create_engine()`接受一个参数，该参数`connect_args`是一个字典，将传递给`connect()`底层 DBAPI（请参阅[自定义 DBAPI`connect()`参数](http://docs.sqlalchemy.org/en/rel_0_8/core/engines.html#custom-dbapi-connect-arguments)）。[`sqlite3.connect()`](http://docs.python.org/2/library/sqlite3.html#sqlite3.connect)接受`timeout`参数，所以这应该工作：

```
create_engine('sqlite:///some.db', connect_args={'timeout': 15}) 
```

# javascript - 当页面上存在其他 setTimeout/setInterval 调用时，setTimeout 出现问题

> ID：15065039
> 
> 赞同：0
> 
> 时间：2013-02-25T10:39:41.223
> 
> 标签：javascript, settimeout

我有一个通用的 Javascript 代码片段，所有客户都将其添加到他们的网站。此代码片段获取一个 JS 库，该库具有一些重要的函数，如果及时获取该库，则应调用这些函数。如果没有及时获取库，则永远不应调用这些函数。

为了实现这一点，我设置了一个超时，它有一个处理它的回调函数（它设置一个变量，取决于哪些重要函数将被调用或不被调用）。现在，它在大多数情况下都能完美运行，除非客户端的网站已经有一些超时/间隔且计时器值非常小。请参阅小提琴[http://jsfiddle.net/tmckM/37/](http://jsfiddle.net/tmckM/37/)以查看问题。

我需要找到一种通用的方法来实现这一点，这样如果及时获取库，那么在任何情况下都不会发生超时。

以下是 JSFiddle 中使用的代码

```
//Though the library file is downloaded in time(which can be seen from network tab) but still the timeout fires before the library execution. I need to find a workaround for this issue

var library_timeout = 1000;
//All time values are in milliseconds
function loadLibrary() {
    var b = document.createElement('script');
    b.src = 'http://yourjavascript.com/35211527623/library.js';
    b.type = 'text/javascript';
    document.getElementsByTagName('head')[0].appendChild(b);
}

function wasteTime() {
    if (!wasteTime.counter) {
        wasteTime.counter = 1;
    }
    else {
        wasteTime.counter++;
    }
    if (wasteTime.counter == 5) {
        clearInterval(wasteTimerId);
    }
    console.warn('Start wasting time');
    var initial = Date.now();
    while (true) {
        if (Date.now() - initial > 1000) {
            break;
        }
    }
    console.warn('Stopped wasting time');
}
function startProcess() {
    window.process_started_at = Date.now();
    console.log('Started the process at timestamp:', process_started_at);

    setTimeout(function () {
        window.lib_timeout_fired_at = Date.now();
        console.log('Library timed out at timestamp:', lib_timeout_fired_at);
        console.log('So, though the library file will still download, but the functions in it won\'t be called.');
    }, library_timeout);

    loadLibrary();
}
//The following line is implemented on user's website.I can't change it.
wasteTimerId = setInterval(wasteTime, 0);//If this line is skipped then library is always executed first and then timeout occurs.

startProcess(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:56:36.987

我在这里没有看到问题。lib 加载时间可能会有所不同，`wasteTime`js 加载可能会有所不同，[timeouts](https://stackoverflow.com/a/13964806/1048572)也会有所不同。浏览器可以完全自由地首先执行加载的脚本或触发超时（如果两者都已安排）。

对此的解决方案是根本不使用超时。只需更改

```
if(window.lib_timeout_fired_at) 
```

在您的库脚本中（您已经拥有所有可用的变量）：

```
if (lib_started_at - process_started_at > library_timeout) 
```

当然你可以重命名/前缀它们，所以整体解决方案可能看起来像

```
window.lib_timeout_firing_at = Date.now() + 1000;
…
if (Date.now() > lib_timeout_firing_at) 
```

# ios - UIPinchGestureRecognizer 重写

> ID：15065041
> 
> 赞同：0
> 
> 时间：2013-02-25T10:39:45.403
> 
> 标签：ios, objective-c

我希望捏识别器从一开始就为每个事件工作。我的意思是我想让第一个距离 = 最后一个距离（这是根据我正在使用的模块的逻辑）。该代码用于增加或减小对象的大小。
如果我写

```
oldDistance = sender->_initialTouchDistance*sender.scale; 
```

我得到链接器错误

```
Undefined symbols for architecture armv7:
"_OBJC_IVAR_$_UIPinchGestureRecognizer._initialTouchDistance", referenced from:
  -[DrawArea pinchTouch:] in DrawArea.o
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

如果写

```
- (void) pinchTouch: (UIPinchGestureRecognizer *) sender
{
    if (sender.state == UIGestureRecognizerStateRecognized ||
        sender.state == UIGestureRecognizerStateChanged){
        [docW touchesPinchingScale:sender.scale velosity:sender.velocity withArea:self];
        sender.scale = 1;
    }
} 
```

那么我不确定这段代码是否正常工作。即使我的触摸速度非常快，对象的缩放也会相对缓慢。可以吗？

# android - 自定义支持对话框片段文本颜色错误

> ID：15065049
> 
> 赞同：5
> 
> 时间：2013-02-25T10:40:00.037
> 
> 标签：android, actionbarsherlock, android-alertdialog, android-dialogfragment, android-support-library

如果我`TextView`在自定义对话框中放入 a ，默认情况下文本将是黑色的。

不幸的是，支持片段对话框的背景是深灰色的。灰色上的黑色很难阅读。

我可以将其更改`TextView`为白色或类似的东西`android:textColor="?android:attr/textColorPrimaryInverseDisableOnly"`。但是新安卓（Holo Light）上的对话框是白色的。所以它将是白底白字。

我可以使用一种技巧，例如在旧版本的 Android 上强制它为白色，并在新版本的 Android 上强制它为黑色，但我宁愿找到一个更优雅的解决方案。

有没有办法改变`TextView`以模仿通常放在支持上的相同文本`DialogFragment`？如果这很重要，我正在使用 Action Bar Sherlock。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-17T14:06:49.843

尝试这个

```
alertDialogBuilder.setInverseBackgroundForced( true ) 
```

在我的情况下，在蜂窝之前的设备和较新的设备上工作正常。标题仍以较深的颜色显示，但正文在所有设备上都清晰可读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T02:54:09.777

如果您使用的是 ActionBarSherlock，我猜您也支持旧设备。可悲的是，旧手机不会显示任何 Holo Dialog，只会显示旧的丑陋 Dialog（在许多手机上，它们也会被制造商大量定制）。因此不能假设你的对话框会很轻。

你只能做两件事：

*   保持原样，让系统处理 Dialog 的样式
*   为您的对话框设置自定义视图。在这里检查： [DialogFragment：使用带有自定义布局的 AlertDialog](https://stackoverflow.com/questions/10579545/dialogfragment-using-alertdialog-with-custom-layout)

# c# - 使用 c# 读取 Word 文档

> ID：15065053
> 
> 赞同：2
> 
> 时间：2013-02-25T10:40:06.363
> 
> 标签：c#, ms-word

我需要从特定点开始阅读word文档。该关键字取自下拉组合框。关键字类似于 [blah blah, blah, 001]

所以，我只需要从该关键字读取内容到下一个标题......

我用它来逐行读取标题编号，但标题编号不起作用

```
string headNum = objparagraph.Range.ListFormat.ListString;
string sLine = objparagraph.Range.Text; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:35:59.500

```
 Word.Application word = new Word.Application();
       Word.Document doc = new Word.Document();
       object fileName = @"C:\wordFile.docx";
        // Define an object to pass to the API for missing parameters
        object missing = System.Type.Missing;                
        doc = word.Documents.Open(ref fileName,
                ref missing, ref missing, ref missing, ref missing,
                ref missing, ref missing, ref missing, ref missing,
                ref missing, ref missing, ref missing, ref missing,
                ref missing, ref missing, ref missing);
        string ReadValue = string.Empty;
            // Activate the document
        doc.Activate();

         foreach (Word.Range tmpRange in doc.StoryRanges)
         {
            ReadValue += tmpRange.Text;
         } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-04T11:03:21.777

如果我理解正确，您需要从关键字开始阅读 Word 文档到下一个标题。换句话说，类似于以下文档中的红色文本：

[![在此处输入图像描述](../Images/65b297a3350eea6a7ae4e4ea81bef1be.png)](https://i.stack.imgur.com/eFqcq.png)

在这种情况下，您可以通过以下方式使用[GemBox.Document](https://www.gemboxsoftware.com/document/examples/c-sharp-vb-net-word-pdf-library/801)完成此操作：

```
string keyword = " [blah blah, blah, 001]";
DocumentModel document = DocumentModel.Load("input.docx");

ContentPosition start = document.Content
    .Find(keyword)
    .First()
    .End;

ContentPosition end = new ContentRange(start, document.Content.End)
    .GetChildElements(ElementType.Paragraph)
    .Cast<Paragraph>()
    .First(p => p.ParagraphFormat.Style != null && p.ParagraphFormat.Style.Name.Contains("heading"))
    .Content
    .Start;

string text = new ContentRange(start, end).ToString(); 
```

变量的`text`值将是：

> 我们要检索的示例文本内容。
> 另一个示例段落。

此外，这里还有其他[阅读](https://www.gemboxsoftware.com/document/examples/c-sharp-vb-net-open-read-word-file/301)和[获取内容](https://www.gemboxsoftware.com/document/examples/get-content/401)示例，它们包含一些有用的信息。

# apache-flex - Flexicious - 关闭 itemEditor

> ID：15065057
> 
> 赞同：0
> 
> 时间：2013-02-25T10:40:14.490
> 
> 标签：apache-flex, itemeditor, flexicious, flex-datagrid

我遇到了一个我无法解决的非常愚蠢的问题：我想从**Flexicious**关闭 FlexDataGrid 中的项目编辑器。

实际上，当我按下`Enter`键时，我输入了我的`itemEditEndHandler`函数，但是 itemEditor 没有关闭（但是在按下`Escape`或`Tab`键时它会正确关闭）。我首先考虑使用类似的方法`datagrid.destroyItemEditor()`（如使用常见的数据网格......），但没有任何明显的方法或方法可以关闭它！

可悲的是，Flexicious 中的 FlexDataGrid 文档并不多 :'(

有人已经遇到过这个问题吗？你知道一些强制关闭 itemEditor 的好方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:44:29.080

试试 grid.bodyContainer.endEdit(grid.bodyContainer.getCurrentEditor())。我们将在下一个版本中添加 destroyItemEditor。

# javascript - 如何使用 SciptDb 查询输出到 UI 标签文本？

> ID：15065062
> 
> 赞同：0
> 
> 时间：2013-02-25T10:40:23.597
> 
> 标签：javascript, google-apps-script

考虑：

```
function submit(e) {

var db = ScriptDb.getMyDb();
  // Clear the values from the text boxes so that new values can be entered
  var app = UiApp.getActiveApplication();
  app.getElementById('description').setValue('');
  app.getElementById('model').setValue('');
  app.getElementById('productCode').setValue('');
  // Make the status line visible and tell the user the possible actions
  var db = ScriptDb.getMyDb();
  var results = db.query({BarCode:'productCode'});

  app.getElementById('result').setVisible(true).setText(Utilities.jsonStringify(results));
  return app;
}​ 
```

它只输出以下而不是结果：

```
ScriptDb Object 
```

该脚本用于带有 ScriptDB 的 Google 脚本，我想从查询中输出一个字符串答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-17T13:41:17.203

`results`from`db.query()`不是包含数据的对象，而ScriptDbResult[实例](https://developers.google.com/apps-script/reference/script-db/script-db-result)类似于迭代器，具有检索数据对象的方法`hasNext()`。`next()`这在[ScriptDb 文档](https://developers.google.com/apps-script/scriptdb?hl=en#querying_the_database)中进行了解释，但您可以将这些示例应用到您的代码中：

```
function submit(e) {
  // Clear the values from the text boxes so that new values can be entered
  var app = UiApp.getActiveApplication();
  app.getElementById('description').setValue('');
  app.getElementById('model').setValue('');
  app.getElementById('productCode').setValue('');

  // Make the status line visible and tell the user the possible actions
  var db = ScriptDb.getMyDb();
  var results = db.query({BarCode:'productCode'});
  var output = "";
  while (results.hasNext()) {
    var item = results.next()
    output += item.toJson();
  }

  app.getElementById('result').setVisible(true).setText(output);
  return app;
} 
```

或者，如果您相信您的查询中只有一个匹配项，您可以这样做：

```
app.getElementById('result')
   .setVisible(true)
   .setText(Utilities.jsonStringify(results.next())); 
```

# javascript - 淘汰赛 foreach 绑定

> ID：15065068
> 
> 赞同：0
> 
> 时间：2013-02-25T10:40:34.390
> 
> 标签：javascript, knockout.js

我有一个问题来显示不同的内容`datetime`与淘汰赛`foreach`绑定。

一切都很好，但一个主要问题是功能`showData`和`getDataByCurrentDate`

我创建了一些示例代码来展示我正在尝试做的事情：

这是我的 JavaScript 代码：

```
 var data = { "Blog": [
         {
           "date":"07/09/2012",
           "title":"Title 1",
           "content":"Text 1"
         },
         {
           "date":"08/09/2012",
           "title":"Title 2",
           "content":"Text 2"
         },
         {
           "date":"09/09/2012",
           "title":"Title 3",
           "content":"Text 3"
          },
          {
           "date":"10/09/2012",
           "title":"Title 4",
           "content":"Text 4"
          }      
         ]
       };

       var current = new Date();

       function formatCurrentDate() {
         return ('0' + current.getDate()).slice(-2) + '/' + ('0' + (current.getMonth() + 1)).slice(-2) + '/' + current.getFullYear();
       }

       function getDataByCurrentDate() {
         var output = [];
         for(var i in data.Blog) {
           if(data.Blog[i].date== formatCurrentDate()) {
             output.push(data.Blog[i]);
           }
         }
         return output;
       }

       function showData(data) {
         var output = 'No data';
         if(data.length > 0) {
           for(var i in data) {
             self.findDataBlog.push(data1[x]); 
           }
         }
       }
       function loadData() {
         var data = getDataByCurrentDate();
         showData(data);
         showCurrentDate();
       }

       function showCurrentDate() {
         document.getElementById('currentDate').innerHTML = formatCurrentDate();
       }

       window.onload = function() {
         loadData();

         document.getElementById('next').onclick = function() {
           current.setTime(current.getTime() + 1000*60*60*24);
           loadData();
           return false;
         }

         document.getElementById('previous').onclick = function() {
           current.setTime(current.getTime() - 1000*60*60*24);
           loadData();
           return false;
         }
       } 
```

这是`body`标签：

```
 <a href="#" id="previous"> << </a>  
        <span id="currentDate"></span>
        <a href="#" id="next"> >> </a>

        <div data-bind="foreach: findDataBlog">
          <ul>
            <li>
             <a>
              <h1><span data-bind="text: title"></span></h1>
              <p>
                <span data-bind="date: date"></span>
                <span data-bind="text: content"></span>
              </p>
             </a>
            </li>
          </ul>
       </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:03:14.257

我在这里为您创建了一个有效的 jsFiddle：http: [//jsfiddle.net/ruslans/Y58DJ/](http://jsfiddle.net/ruslans/Y58DJ/)

我所做的主要更改是引入了一个剔除`viewModel`变量并修复了`showData()`函数中的错误：

```
var myViewModel = {
    findDataBlog = ko.observableArray();
}

ko.applyBindings(myViewModel);

...

function showData(data) {
    myViewModel.findDataBlog.removeAll()
    if (data.length > 0) {
        for (var i in data) {
            myViewModel.findDataBlog.push(data[i]);
        }
    }
} 
```

修改后的html：

```
<a href="#" id="previous"> << </a><span id="currentDate"></span>
<a href="#" id="next"> >> </a>

<br />
<span data-bind="visible: findDataBlog().length == 0">no data</span>
<div data-bind="foreach: findDataBlog, visible: findDataBlog().length > 0">
    <ul>
        <li> <a>
              <h1><span data-bind="text: title"></span></h1>
              <p>
                <span data-bind="date: date"></span>
                <span data-bind="text: content"></span>
              </p>
             </a>

        </li>
    </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:10:53.633

```
 //findDataBlog should be declare as observable array.

    var findDataBlog = ko.observableArray(); 

   // Please try with this. 
```

# flash - node中小型多人射击游戏的做法是什么？

> ID：15065069
> 
> 赞同：-2
> 
> 时间：2013-02-25T10:40:33.983
> 
> 标签：flash, node.js, multiplayer

我有一个内置flash的单人小游戏，类似于蠕虫。您可以移动鼠标来计算角度，单击进行射击，并根据风向您的射击施加或多或少的力量。

对此的物理学完全是在动作脚本中编程的。我想知道如果我想构建一个实时多人 1 对 1 版本，最好的解决方案是什么。现在，我已经在后端设置了一个 flash 和 node 的小示例，它们与以 json 格式传递数据的套接字（node.js 中的网络模块）进行通信。到目前为止一切正常。我现在想到了一个具体的问题......

1) 子弹动画应该只由客户端处理，还是只由服务器处理，还是两者都处理？

如果客户端处理所有子弹动画，它会更容易作弊，但更容易开发它已经完成了。如果服务器处理它，我将不得不构建功能来平滑动画。但也许，因为它只是一个简单的 1 对 1 游戏，它是免费的，只是为了好玩，应该继续在 flash 中移动子弹，在 flash 中检测碰撞，并在我击中对手时通知服务器？或者还有什么我可以做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:57:27.550

可以被利用的逻辑应该在服务器上完成。可视化是不能被利用的逻辑，即使如此，它也不会影响其他玩家。它应该在客户端上完成。

此外，当您收到每次射击的数据时，您应该检查它是否有效（例如，力量是否太大或玩家是否已用完子弹）。这是可以利用的逻辑。

*Flash*也支持*TCP 套接字，* *Node*也是如此。与其创建请求/响应架构，不如使用套接字更有效。

还有一个建议，使用[HTML5 Canvas](http://www.html5canvastutorials.com/)、[WebSockets](http://www.html5rocks.com/en/tutorials/websockets/basics/)和[Processing.js](http://processingjs.org/)等技术，您应该考虑使用*HTML*和*JavaScript*构建您的应用程序，因为这将使所有设备上的所有用户都可以播放它。

# scala - 将 multiset/bag 实现为 Scala 集合

> ID：15065070
> 
> 赞同：1
> 
> 时间：2013-02-25T10:40:39.430
> 
> 标签：scala, scala-collections, multiset

受[这个问题](https://stackoverflow.com/questions/14617024/are-multisets-missing-in-scala)的启发，我想在 Scala 中实现一个[Multiset](http://en.wikipedia.org/wiki/Multiset_%28abstract_data_type%29#Multiset)。我想`MultiSet[A]`：

*   支持加、删、并、交、差
*   是一个`A => Int`，提供每个元素的计数

这是一种方法，扩展`Set`：

```
import scala.collection.immutable.Map
import scala.collection.immutable.Set
import scala.collection.SetLike
import scala.collection.mutable.Builder

class MultiSet[A](private val counts: Map[A, Int] = Map.empty[A, Int])
extends SetLike[A, MultiSet[A]] with Set[A] {
  override def +(elem: A): MultiSet[A] = {
    val count = this.counts.getOrElse(elem, 0) + 1
    new MultiSet(this.counts + (elem -> count)) 
  }
  override def -(elem: A): MultiSet[A] = this.counts.get(elem) match {
    case None => this
    case Some(1) => new MultiSet(this.counts - elem)
    case Some(n) => new MultiSet(this.counts + (elem -> (n - 1)))
  }
  override def contains(elem: A): Boolean = this.counts.contains(elem)
  override def empty: MultiSet[A] = new MultiSet[A]
  override def iterator: Iterator[A] = {
    for ((elem, count) <- this.counts.iterator; _ <- 1 to count) yield elem
  }
  override def newBuilder: Builder[A,MultiSet[A]] = new Builder[A, MultiSet[A]] {
    var multiSet = empty
    def +=(elem: A): this.type = {this.multiSet += elem; this}
    def clear(): Unit = this.multiSet = empty
    def result(): MultiSet[A] = this.multiSet
  }
  override def seq: MultiSet[A] = this
}

object MultiSet {
  def empty[A]: MultiSet[A] = new MultiSet[A]
  def apply[A](elem: A, elems: A*): MultiSet[A] = MultiSet.empty + elem ++ elems
  def apply[A](elems: Seq[A]): MultiSet[A] = MultiSet.empty ++ elems
  def apply[A](elem: (A, Int), elems: (A, Int)*) = new MultiSet((elem +: elems).toMap)
  def apply[A](elems: Map[A, Int]): MultiSet[A] = new MultiSet(elems)
} 
```

扩展`Set`很好，因为它意味着`MultiSet`自动获取联合、差异等的定义。以下所有内容都将成立：

```
// add
assert(
  MultiSet("X" -> 3, "Y" -> 1) + "X" ===
    MultiSet("X" -> 4, "Y" -> 1))
assert(
  MultiSet("X" -> 3, "Y" -> 1) + "Z" ===
    MultiSet("X" -> 3, "Y" -> 1, "Z" -> 1))

// remove
assert(
  MultiSet("a" -> 2, "b" -> 5) - "b" ===
    MultiSet("a" -> 2, "b" -> 4))
assert(
  MultiSet("a" -> 2, "b" -> 5) - "c" ===
    MultiSet("a" -> 2, "b" -> 5))

// add all
assert(
  MultiSet(10 -> 1, 100 -> 3) ++ MultiSet(10 -> 1, 1 -> 7) ===
    MultiSet(100 -> 3, 10 -> 2, 1 -> 7))

// remove all
assert(
  MultiSet("a" -> 2, "b" -> 5) -- MultiSet("a" -> 3) ===
    MultiSet("b" -> 5)) 
```

但是，我将不得不重写一些继承的方法，例如`union`，`intersect`因为它们会对多重集做错误的事情，例如以下内容不成立：

```
// union (takes max of values)
assert(
  MultiSet(10 -> 5, 1 -> 1).union(MultiSet(10 -> 3, 1 -> 7)) ===
    MultiSet(10 -> 5, 1 -> 7))

// intersection (takes min of values)
assert(
  MultiSet(10 -> 5, 100 -> 3).intersect(MultiSet(10 -> 1, 1 -> 7)) ===
    MultiSet(10 -> 1)) 
```

扩展的另一个问题`Set`是我不能`MultiSet`成为一个，`A => Int`因为我会得到错误：`illegal inheritance; class MultiSet inherits different type instances of trait Function1: A => Int and A => Boolean`. 我可以通过声明一个单独的`count`方法来解决这个问题，但我真的更喜欢这个类只是一个`A => Int`.

另一种方法是继承 from `Map[A, Int]`，这会给我`A => Int`我想要的，但是我必须定义我自己的所有`++`,`--`等，因为在`Map`这些中将定义`(A, Int)`成对，但对于多集，它们需要定义在 `A`s.

我想第三种方法是同时放弃`Set`and `Map`，只实现一个新的子类`Iterable`或其他。

你会推荐什么？适合`MulitSet`Scala 集合框架的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:35:12.743

> 但是，我将不得不覆盖一些继承的方法，例如 intersect，因为它们会对多重集做错误的事情

我认为你必须硬着头皮去做。

> 扩展 Set 的另一个问题是，我不能让 MultiSet 成为`A => Int`

实际上，您不能`Function1`使用不同的类型参数继承两次相同的特征（此处）。实际上在这种情况下，这不仅是一个令人讨厌的技术限制，而且这样做实际上没有多大意义，因为在调用时`apply`无法知道要调用哪个重载：`def apply( key: A ): Boolean`或者`def apply( key: A ): Int`？您无法分辨，因为参数列表是相同的。

但是，您可以做的是添加从`MultiSet[A]`to的隐式转换`A => Int`。这样，`MultiSet`默认情况下 a 被视为 a `A => Boolean`（作为任何集合），但可以`A => Int`在 nedded 时强制为 a （特别是它可以直接传递给期望函数的`A => Int`函数）。

```
class MultiSet[A] ... {
  ...
  def count(elem: A): Int = counts.getOrElse( elem, 0 )
}
object MultiSet {
  ...
  implicit def toCountFunc[A]( ms: MultiSet[A] ): A => Int = { 
    (x: A) => ms.count( x )
  } 
} 
```

REPL 中的一些测试：

```
scala> val ms = MultiSet("a" -> 2, "b" -> 5)
ms: MultiSet[String] = Set(a, a, b, b, b, b, b)
scala> ms("a")
res17: Boolean = true
scala> ms("c")
res18: Boolean = false

scala> def testExists( f: String => Boolean, keys: String *) {
     |   println( keys.map( f ).toList )
     | }
testExists: (f: String => Boolean, keys: String*)Unit
scala> testExists( ms, "a", "c" )
List(true, false)

scala> def testCounts( f: String => Int, keys: String *) {
     |   println( keys.map( f ).toList )
     | }
testCounts: (f: String => Int, keys: String*)Unit
scala> testCounts( ms, "a", "c" )
List(2, 0) 
```

# asp.net - 客户端缓存与 Cookie

> ID：15065074
> 
> 赞同：4
> 
> 时间：2013-02-25T10:40:50.087
> 
> 标签：asp.net, caching, httpcookie

`Client side cache`和 和有什么区别`cookie`？
我知道`cookie`是一种数据结构。
怎么样`client side cache`？
这和浏览器缓存一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:32:12.573

客户端缓存在设备中创建本地副本。即使服务器断开连接，用户也可以编辑文件。但是当服务器重新连接时，该本地文件将得到更新

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T11:50:12.050

如果客户端缓存和 cookie 是相同的，那么为什么我们同时使用它们。cookie 用于存储一些您以后可以使用的微小信息、一些用户选项等。

客户端缓存是出于其他原因。它适用于互联网连接速度较慢的设备。有时这有助于存储可以在互联网连接中断时使用的信息，并且当连接正常时，客户端设备可以自动上传数据。当然你可以强制你想要存储什么样的信息。

这是我从我的经历中提炼出来的意见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-14T13:05:23.757

尽管 cookie 和缓存是在客户端计算机上存储数据的两种方式，但它们的用途不同，例如：

*   Cookie 用于存储信息以跟踪与用户相关的不同特征，而缓存用于加快网页的加载速度。
*   Cookie 会在一段时间后过期，但缓存会保留在客户端计算机中，直到用户手动删除它们。

# javascript - 为 Javascript 的确认函数创建自定义样式

> ID：15065075
> 
> 赞同：0
> 
> 时间：2013-02-25T10:40:51.067
> 
> 标签：javascript, html, css

是否可以自定义样式 javascript 的“确认功能”对话框，而不是使用浏览器提供的默认外观？如果没有，是否有替代解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:44:32.637

如果要自定义查找确认框，则需要为此使用 jalert javascript。检查下面的链接希望它会帮助你。

[http://labs.abeautifulsite.net/archived/jquery-alerts/demo/](http://labs.abeautifulsite.net/archived/jquery-alerts/demo/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:45:58.907

你不能设置javascript“确认功能”对话框的样式，因为如果你想做同样的事情，它的默认选项那么你必须在Javascript/jQuery和CSS的帮助下创建自己的对话框

例如[http://demos.9lessons.info/alert_delete.html](http://demos.9lessons.info/alert_delete.html)

# sql - 连接中 WHERE 和 AND 子句的区别

> ID：15065077
> 
> 赞同：3
> 
> 时间：2013-02-25T10:40:58.443
> 
> 标签：sql, join, where-clause

有人可以解释为什么以下 SQL 中有两个不同的结果集。

SQL 1-

```
SELECT e.employee_id,e.first_name,
e.department_id,
d.department_id,
d.department_name
FROM employees e  RIGHT OUTER JOIN departments d
ON (e.department_id = d.department_id) where d.department_name='Treasury'; 
```

结果：仅 d.department_name='Treasury' 的记录。

SQL 2-

```
SELECT e.employee_id,e.first_name,
e.department_id,`enter code here`
d.department_id,
d.department_name
FROM employees e  RIGHT OUTER JOIN departments d
ON (e.department_id = d.department_id) and d.department_name='Treasury'; 
```

结果：包含所有 d.deparment_name 值的记录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:49:02.773

`on`在连接表中查找匹配行时使用该条件。使用外连接（右连接或左连接），与条件不匹配的行`on`仍然可以在结果集中结束。

该`where`条件适用于所有选定的行。任何未通过`where`测试的行都将从结果集中排除。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:46:04.940

第一个返回任何部门名称为“Treasury”的已连接记录，因此部门表中的每条记录都将被连接，但第二个意味着只有部门名称为“Treasury”的部门表中的记录将被连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:48:28.227

先把条件加到应用join和all后取出的所有记录上，这样就应用到最终返回的结果上。

而第二个返回右表中的所有记录，即使连接条件不匹配，因为它是右连接。

# jquery - 异步更新 div ---更新评论

> ID：15065078
> 
> 赞同：4
> 
> 时间：2013-02-25T10:41:02.343
> 
> 标签：jquery, asp.net-mvc

我有一个如下的文本区域

```
@Html.TextArea("txtComments", new {@style = "width: 450px;",@placeholder = "Enter Comments here" }) 
```

并且当用户点击时，使用 JQUERY AJAX 添加正在保存（用户输入的评论和时间）到数据库。

在此之后，我需要在文本区域上方的 div 中显示数据，无论用户输入的是时间还是以前的评论。

我如何在 mvc razor 中实现这一点。

这将是类似的FB

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T10:54:58.710

将注释添加到 ajax 成功回调中您想要的任何位置，例如

```
$(function(){
 $("#asd").click(function(e){    
    e.preventDefault();
    var $comment = $("textarea").val();   
    console.log($comment);
    //send comments to the server for saving
    //and in the success callback add the comments to the div like
    $.ajax({
        url:'/echo/json/',
        success:function(data){
            $("<li/>",{text:$comment}).appendTo("#commentsss ul");
        }
    });
});
}); 
```

[http://jsfiddle.net/rM39e/8/](http://jsfiddle.net/rM39e/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:49:01.240

创建一个将接受 entityId 并按排序顺序返回其注释的局部视图。然后使用客户端 javascript 按需或按特定时间间隔加载该部分视图。

如果您希望按需完成此操作，只需使用 $.get 将评论加载到任何容器 Div 中。

参考这个：[jQuery $.Get](http://api.jquery.com/jQuery.get/)

```
e.g. $("#comments").get({...}) 
```

# python - Python：如何在列表列表中获取某些内容？

> ID：15065081
> 
> 赞同：1
> 
> 时间：2013-02-25T10:41:19.867
> 
> 标签：python, list

目前我有以下列表：

```
>>> a = list()
>>> b = [1, 2, 3]
>>> c = [4,5,6]
>>> d = [7, 8]
>>> a.append(b)
>>> a.append(c)
>>> a.append(d)
>>> del b, c, d
>>> print a
[[1, 2, 3], [4, 5, 6], [7, 8]] 
```

1.  我想获得 b、c 和 d 上的第一项（值 1、4 和 7）。我怎么能在一行代码中做到这一点？
2.  我想获得 b、c 和 d 上的剩余项目（值 2、3、5、6 和 8）。我怎么能在一行代码中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:45:14.747

```
>>> zip(*a)[0]
(1, 4) 
```

这`zip(*a)`就像一个转置函数。

```
>>> zip(*a)
[(1, 4), (2, 5), (3, 6)] 
```

`[0]`索引第一个元素。

```
>>> zip(*a)[0]
(1, 4) 
```

第二个问题更棘手 -`zip`不会成功。相反，您需要一个列表理解。

```
>>> [i for l in a for i in l[1:]]
[2, 3, 5, 6, 8] 
```

或者，如果您不需要扁平列表，只需：

```
>>> [l[1:] for l in a]
[[2, 3], [5, 6], [8]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:44:10.733

这应该可以解决问题：

```
[lst[0] for lst in a] 
```

它遍历 a 并为每个元素（这是一个列表）收集第一个值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T10:44:32.653

有很多方法可以做到这一点。这将是一个：

```
>>> print [x[0] for x in a]
[1,4] 
```

或者将 print 放在 for 循环中：

```
>>> for x in a: print x[0],
1 4 
```

如果您只想要前两个子列表的第一个元素，最基本的方法是：

```
>>> print a[0][0], a[1][0]
1 4 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T10:45:41.793

我会选择 niklas B. answer `zip(b,c)[0]`，但是，为了给您更多的灵活性，如果您不知道列表中子列表的数量，您也可以尝试：

```
[el[0] for el in a] 
```

并为您提供 a 的子列表中的所有第一项。

# python - 如何使用python复制和粘贴另一个文件的第4行

> ID：15065083
> 
> 赞同：-4
> 
> 时间：2013-02-25T10:41:27.267
> 
> 标签：python

我有 txt file1 包含

```
line 1
line 2 
line 3
line 4 
line 5 
```

第二个文本文件包含

```
line 6
line 7
line 8
line 9 
```

需要在第 4 行的文件 1 中粘贴所有 6、7、8、9 行如何使用 python 执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:50:58.153

要在第 4 行之前插入，请编写以下代码：

```
with open('file1.txt', 'r+'), open('file2.txt') as file1, file2:
    list = file1.readlines()
    list.insert(3, file2.readlines())
    file1.writelines(list) 
```

要在之后插入，请将 更改`3`为`4`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:57:45.267

最好将它写在第三个文件中，而不是重命名它。否则，您必须读取 RAM 中的整个第一个文件。这适用于大文件：

```
with open('file1', 'rb'), open('file2', 'rb'), open('file3', 'wb') as file1, file2, file3:
    ln = 1
    while ln < 4:
            ln+=1
            file3.write(file1.readline())
    for line in file2:
            file3.write(line)
    for line in file1:
            file3.write(line) 
```

# autocomplete - sendkeys() 输入文本并在自动完成搜索字段中清除它

> ID：15065084
> 
> 赞同：0
> 
> 时间：2013-02-25T10:41:32.000
> 
> 标签：autocomplete, webdriver, selenium-webdriver, browser-automation

我无法让 webdriver 将一些文本输入到基于自动完成的搜索文本字段中。我正在使用以下代码：

```
//here elmt is a WebElement variable.
elmt = driver.findElement(By.id(testDataMap.get("globalSearchTextLocator")));
elmt.sendKeys(patientName);

//Here I am finding the search result list once webdriver enters the characters.
elmt = driver.findElement(By.cssSelector(testDataMap
.get("searchPatientNameLocator")));

searchedPatientsList = driver.findElements(By.cssSelector(testDataMap
.get("searchPatientNameLocator"))); 
```

`elmt.click()`我之前也尝试过使用`elmt.sendKeys()`。它在我运行测试的时候随机运行了几次。但大多数情况下，它失败了。发生的情况是 webdriver 将文本输入搜索字段并在下一刻将其清除。这导致没有搜索结果并且测试失败。我无法追踪这种奇怪行为背后的问题。有什么帮助吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:00:17.690

我遇到了类似的问题，但它是针对数字字段的。尝试使用下面的代码并执行你的脚本。

```
String accOffNoID = OR.getProperty("AccOffNo_ID"); 
        WebElement accOffNoInput = driver.findElement(By.id(accOffNoID));
        accOffNoInput.clear(); 
        accOffNoInput.sendKeys(String.valueOf(9874651230L));
        accOffNoInput = driver.findElement(By.id(accOffNoID)); 
```

根据您的脚本更改名称并执行，它应该可以工作。

# javascript - Javascript - 获取所有坐标（正则表达式）

> ID：15065085
> 
> 赞同：-1
> 
> 时间：2013-02-25T10:41:34.850
> 
> 标签：javascript, regex

在这样的网页上

```
 <div>text text</div> |text text 55.555555 |44.444444 | <div>text <b>name</b></div> 
```

我需要得到这样的数组

```
{ [55.555555 , 44.444444, "name"] , [ ... , ... , ... ], ... } 
```

我想用正则表达式来实现 - 查找坐标部分，但我不知道如何写这部分：

```
return all text parts which match this expression 
```

你能帮我一些想法/功能吗？

**更新**

我在这里找到了 nativeTreeWalker 函数[获取所有文本节点/ SO](https://stackoverflow.com/questions/2579666/getelementsbytagname-equivalent-for-textnodes) ，我更改了此函数以查找 2 个数字和一个文本。这非常有效，但我仍然有一个错误，它返回偶数，如 1234 .. 没有小数。

```
function nativeTreeWalker() {
    var walker = document.createTreeWalker(
        document.body, 
        NodeFilter.SHOW_TEXT, 
        null, 
        false
    );

    var node;
    var textNodes = [];
    var name = false;
    var elem = null;

    while(node = walker.nextNode()) {

        if (name){ elem.push(node.nodeValue); textNodes.push(elem); console.log(elem); name = false; }
        else { elem = null; }

        elem = node.nodeValue.match(/\d{2}.\d+/g);
        if (elem!=null){ name=true; } 

    }
}

nativeTreeWalker() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T09:41:02.430

好的，所以这是我的解决方案..

```
function nativeTreeWalker() {
    var walker = document.createTreeWalker(
        document.body, 
        NodeFilter.SHOW_TEXT, 
        null, 
        false
    );

    var node;
    var textNodes = [];
    var name = false;
    var elem = null;

    while(node = walker.nextNode()) {

        if (name){ elem.push(node.nodeValue); textNodes.push(elem); console.log(elem); name = false; }
        else { elem = null; }

        elem = node.nodeValue.match(/\d{2}.\d+/g);
        if (elem!=null){ name=true; } 

    }
}

nativeTreeWalker() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:03:57.093

如果您确定数据的输入格式不能更改，则此正则表达式应满足您的需求：

```
[|].*?([+-]?\d+[.]\d+).*?[|].*?([+-]?\d+[.]\d+).*?[|].*?<b>(.*?)</b> 
```

第一组 ( `$1`) 包含第一个坐标，第二组 ( ) 包含第二`$2`个坐标，第三组 ( ) 包含`$3`名称。

这是一个[演示](http://jsfiddle.net/jVELG/)，向您展示如何将它与 JavaScript 一起使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:24:58.947

在您的更新中，您的函数返回非十进制数字的原因是您没有转义`.`，因此它被解释为匹配除换行符之外的任何字符的通配符元字符。为了只匹配小数，正则表达式

```
elem = node.nodeValue.match(/\d{2}.\d+/g); 
```

应该是`/\d{2}\.\d+/g`。

使用 a`TreeWalker`似乎是个好主意，所以当您设法使用它以您在问题中请求的形式创建一个数组时，请发布您的最终代码作为答案，即使用单独的坐标数组及其关联名称。

# java - 斐波那契的上限

> ID：15065088
> 
> 赞同：4
> 
> 时间：2013-02-25T10:41:40.717
> 
> 标签：java, algorithm, int, dynamic-programming, fibonacci

我正在阅读有关斐波那契的 DP 版本。
在 Sedgewick 我看到：
`int[] T = new int[47];` 用于存储以前的计算。在其他地方，我看到斐波那契的最大输入应该小于`92`.
我不清楚这些数字是如何得出的？我知道它与溢出和大小有关，`int`但我不清楚我们如何最终得到这些限制。
有什么帮助吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T17:07:06.803

第 n 个斐波那契数有一个封闭式表达式，即[比内公式](http://en.wikipedia.org/wiki/Binet%27s_formula)，

F(n) = (φ^n - ψ^n) / (φ - ψ)

在哪里

```
φ = (1 + √5)/2;  ψ = 1 - φ = -1/φ 
```

现在`|ψ| < 1`，所以该`ψ^n`术语很快收敛到 0，因此在估计它的大小时，`F(n)`除了前几个数字之外可以忽略不计。

因此，如果您有一个整数类型，其`b`位用于表示正整数，您可以用

```
F(n) < 2^b 
```

（因为可以表示的最大数是`2^b - 1`）。忽略`ψ^n`术语并使用`φ - ψ = √5`，我们找到条件

```
 φ^n < 2^b * √5
<=> n*log φ < b*log 2 + 1/2*log 5
<=> n < b*(log 2 / log φ) + 1/2*(log 5 / log φ) 
```

`log 2 / log φ ≈ 1.44042009`和`1/2*(log 5 / log φ) ≈ 1.672275938`，因此对于带符号的 32 位整数类型（它有 31 位表示正数，因为一位用于符号），您可以表示 Fibonacci 数

```
n < 31*(log 2 / log φ) + 1/2*(log 5 / log φ) ≈ 44.65 + 1.67 ≈ 46.32 
```

即索引在 0 到 46（含）之间的 47 个斐波那契数。使用无符号 32 位整数类型，您还可以表示`F(47)`.

使用有符号的 64 位整数类型，您可以将斐波那契数表示为

```
n < 63*(log 2 / log φ) + 1/2*(log 5 / log φ) ≈ 90.75 + 1.67 ≈ 92.42 
```

并且使用无符号 64 位整数类型还可以表示`F(93)`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-25T10:54:44.890

好吧，斐波那契数列（大约）以 1.618（黄金比例）的比率呈指数增长。

因此，如果您采用 1.618 的对数基数，`Integer.MAX_VALUE`它将告诉您在溢出之前大约可以进行多少次迭代....

或者，您可以通过计算来凭经验确定它何时溢出......

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T10:52:20.747

(有符号)`int`的值范围为`−2.147.483.648 ... 2.147.483.647`，因此无法存储大于 2.147.483.647 的斐波那契数。

现在的问题是：第一个大于该值的斐波那契数是多少？
电子表格 说：

```
n   fib(n)
1   0
2   1
3   1
4   2
5   3
6   5
7   8
8   13
9   21
10  34
11  55
12  89
13  144
14  233
15  377
16  610
17  987
18  1597
19  2584
20  4181
21  6765
22  10946
23  17711
24  28657
25  46368
26  75025
27  121393
28  196418
29  317811
30  514229
31  832040
32  1346269
33  2178309
34  3524578
35  5702887
36  9227465
37  14930352
38  24157817
39  39088169
40  63245986
41  102334155
42  165580141
43  267914296
44  433494437
45  701408733
46  1134903170
47  1836311903
48  2971215073
49  4807526976 
```

所以你可以看到：#47 之后的斐波那契数不适合 (signed) `int`。

澄清一下：与 C 不同，Java 没有`unsigned`类型。所以强调`signed int`有点过时了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-25T11:01:59.457

您可以使用以下公式：

```
F(2n) = F(n)* (2*F(n-1) + F(n))
n=46

F(92) = F(46) * (2*F(45) +F(46)) 
```

这是斐波那契的[矩阵形式](http://en.wikipedia.org/wiki/Fibonacci_number#Matrix_form)。

完整的号码列表（ulong 未溢出）

```
1 1
2 1
3 2
4 3
5 5
6 8
7 13
8 21
9 34
10 55
11 89
12 144
13 233
14 377
15 610
16 987
17 1597
18 2584
19 4181
20 6765
21 10946
22 17711
23 28657
24 46368
25 75025
26 121393
27 196418
28 317811
29 514229
30 832040
31 1346269
32 2178309
33 3524578
34 5702887
35 9227465
36 14930352
37 24157817
38 39088169
39 63245986
40 102334155
41 165580141
42 267914296
43 433494437
44 701408733
45 1134903170
46 1836311903
47 2971215073
48 4807526976
49 7778742049
50 12586269025
51 20365011074
52 32951280099
53 53316291173
54 86267571272
55 139583862445
56 225851433717
57 365435296162
58 591286729879
59 956722026041
60 1548008755920
61 2504730781961
62 4052739537881
63 6557470319842
64 10610209857723
65 17167680177565
66 27777890035288
67 44945570212853
68 72723460248141
69 117669030460994
70 190392490709135
71 308061521170129
72 498454011879264
73 806515533049393
74 1304969544928657
75 2111485077978050
76 3416454622906707
77 5527939700884757
78 8944394323791464
79 14472334024676221
80 23416728348467685
81 37889062373143906
82 61305790721611591
83 99194853094755497
84 160500643816367088
85 259695496911122585
86 420196140727489673
87 679891637638612258
88 1100087778366101931
89 1779979416004714189
90 2880067194370816120
91 4660046610375530309
92 7540113804746346429 
```

正如我们所见

```
45 1134903170
46 1836311903
92 7540113804746346429
7540113804746346429 = 1836311903*(2*1134903170 + 1836311903) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T11:52:16.843

首先，已经完成了一些类来表示超出某些原始类型限制的大数，例如使用 long long 类型的某些 C 修饰符。要查看最大的术语，请查看[最大的已知斐波那契数](http://wiki.answers.com/Q/What_is_the_largest_known_Fibonacci_number)。

# remote-debugging - 远程调试 WebLogic 集群

> ID：15065089
> 
> 赞同：0
> 
> 时间：2013-02-25T10:41:41.897
> 
> 标签：remote-debugging, weblogic-10.x

我需要远程调试在 WebLogic 10.3.5 集群上运行的 Java EE 应用程序。重要的是我在集群时调试它，而不是在单个机器上运行。

我已阅读文档说明您可以修改启动脚本中的 Java 选项或域配置中的调试标志，但是我不明白的是您如何知道集群时要连接到哪个服务器。

我的集群配置为循环负载平衡，因此我无法知道将调试器连接到哪个服务器。

是否可以将远程调试器连接到集群而不是单个服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:25:28.887

似乎没有可用的域或集群级连接。必须为每台服务器打开一个新的调试器连接。

在我的 IDE 中，多次单击调试会打开多个调试器连接并不明显。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T10:29:11.370

你可以试试这样的

1.  使用管理集群服务器的管理服务器的主机和端口号创建调试配置。

2.  尝试在管理服务器上调试。

# java - 单击图像时，整个应用程序文本视图的字体大小将增加

> ID：15065091
> 
> 赞同：-2
> 
> 时间：2013-02-25T10:42:00.833
> 
> 标签：java, android, textview, font-size

我必须开发一个 android 应用程序。

在这里我必须单击一个图像意味着自动增加整个应用程序 textview 的字体大小。我如何开发这些像 iphone BBC 新闻应用程序。请给我一些想法？？？

**编辑：**

请看[这里](https://itunes.apple.com/gb/app/bbc-news/id377382255?mt=8)。这里看第二张图片底部-A + A图片在那里...目的是必须单击该图片意味着自动增加和减少整个应用程序的textview字体大小。我们怎么能在 android 应用程序中做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:31:24.530

这是您的查询的实施版本：

Java 代码：

```
package com.anurag.increasefont;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class MainActivity extends Activity {    
    TextView tv;Button b1,b2;int count=0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv=(TextView)findViewById(R.id.tv1);
        b1=(Button)findViewById(R.id.b1);
        b2=(Button)findViewById(R.id.b2);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;        
    }

    public void increase(View inc){
    count++;
    if(count==1){tv.setTextSize(20);    }
    else if(count==2){tv.setTextSize(30);}
    else if (count>=3) {count=3;tv.setTextSize(40);}
        }

    public void decrease(View dec){
        count--;
        if(count<=0){tv.setTextSize(12);count=0;}
        if(count==1){tv.setTextSize(20);}
        else if(count==2){tv.setTextSize(30);}
        else if (count==3) {tv.setTextSize(40);}
    }
} 
```

XML 代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="2dp"
    tools:context=".MainActivity" >
    <TextView
        android:id="@+id/tv1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:text="This is sample text, i will increase and decrease the font size when user clicks on A+ and A_ buttons provided below. I can also use imageview or image button instead of Buttons to perform the same" />
    <Button
        android:id="@+id/b2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignRight="@+id/textView1"
        android:onClick="decrease"
        android:text="Decrease" />
    <Button
        android:id="@+id/b1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:onClick="increase"
        android:text="Increase" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:51:46.797

使用imageview并实现onclicklisetner

XML

```
<TextView
        android:id="@+id/firsttv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:fontFamily="serif"
        android:gravity="center"
        android:layout_marginBottom="20dip"
        android:layout_marginTop="20dip"
        android:text="@string/prompt" />

<ImageButton
            android:id="@+id/imagebtn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="0.5"
            android:background="@android:color/transparent"
            android:contentDescription="@string/description"
            android:onClick="onclickbtn"
            /> 
```

爪哇

登记：

```
TextView tv;

tv=(TextView)findViewById(R.id.firsttv); 
```

点击

```
public void onclickbtn(View v){

tv.setTextSize(20);

        } 
```

# eclipse - 在“更新 Maven 项目”期间发生内部错误。不支持的 IClasspathEntry kind=4

> ID：15065093
> 
> 赞同：67
> 
> 时间：2013-02-25T10:42:03.577
> 
> 标签：eclipse, maven, m2eclipse, pom.xml

正如标题所提到的，我有以下问题：我使用`Eclipse`with`Maven Nature`并且当我更新我的 Maven 项目时，我收到了这个错误：

> 在“更新 Maven 项目”期间发生内部错误。
> 不支持的 IClasspathEntry kind=4

总是回来的解决方案如下：

*   右键单击项目，删除 Maven 性质
*   `mvn eclipse:clean`（项目在 eclipse/STS 中打开）
*   （有时他们建议`mvn eclipse:eclipse`下一步做）
*   右键单击项目并重新启用 Maven 自然

现在，我多次详尽地尝试了所有组合。但我总是不断收到上述错误。当我不得不进行`mvn eclipse:eclipse`该项目时，开始发生错误。在它只使用**m2eclipse**功能并在 eclipse 中设置所有内容之前总是运行良好。

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2013-02-25T13:43:16.057

为了为我工作，我必须做一些不同的事情：

1.  右键单击项目，删除 Maven Nature（或在较新的 Eclipse 中，“Maven->Disable Maven Nature”）
2.  `mvn eclipse:clean`（项目在 eclipse/STS 中打开）
3.  在eclipse中删除项目（但不要删除源）
4.  **导入现有的 Maven 项目**

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2014-01-08T14:42:45.723

*   我只是去了`Properties`-> `Java Build Path`->并删除了以**M2_REPO**`Libraries`开头的蓝色条目。

***   之后，我可以再次使用`Maven`->`Update Project`** 

 *** * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-03-10T04:54:25.030

这就是你所需要的：

1.  **右键单击您的项目，选择 Maven -> Remove Maven Nature**。

2.  打开你的终端，导航到你的项目文件夹并运行`mvn eclipse:clean`

3.  右键单击您的项目并选择`Configure -> Convert into Maven Project`

4.  右键单击您的项目并选择`Maven -> Update Project`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-12-14T13:57:12.080

在尝试了所有这些程序之后，它仍然对我不起作用。起作用的是

1.  进入文件资源管理器并删除项目根文件夹下的 .classpath 文件
2.  在 Eclipse 中运行 Maven 更新，并选中 Force update of Snapshots/Releases

我们目前的工作需要集成许多不同的项目，所以不幸的是需要在生产环境中使用 SNAPSHOT（Maven 圈子中的禁忌）！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-05-10T13:35:29.387

此问题 ( [https://bugs.eclipse.org/394042](https://bugs.eclipse.org/394042) ) 已在 m2e 1.5.0 中修复，此 p2 repo 可用于 Eclipse Kepler 和 Luna：

[http://download.eclipse.org/technology/m2e/releases/1.5](http://download.eclipse.org/technology/m2e/releases/1.5)

如果您还使用 m2e-wtp，则还需要安装 m2e-wtp 1.1.0：

[http://download.eclipse.org/m2e-wtp/releases/luna/1.1](http://download.eclipse.org/m2e-wtp/releases/luna/1.1)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-11-28T19:03:54.207

您的命令行 mvn eclipse 项目生成器可能与您的 eclipse 的版本不同，并且 eclipse 不理解您的命令行工具正在生成。在这种情况下只需使用eclipse：

*   从 Eclipse 中删除项目（如果是多模块，则包括所有模块）
*   运行：`rm -rf .settings/ .project .classpath`从模块中删除 eclipse 项目文件
*   将您的项目导入为**现有的 Maven 项目**

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-08-29T17:08:19.977

我将项目作为通用项目从 git 存储库导入。

*   已删除`.settings`，`.project`并 `.classpath`在项目文件夹中
*   `Configure -> Convert to Maven Project`. 只有这样才能解决我的问题。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-08-19T04:02:25.157

我通过查看 JBIDE-11655 上的评论解决了这个问题：删除我的项目文件夹中的所有 .project、.settings 和 .classpath。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-09-13T17:32:43.467

稍微不同的选项通常对我有用：

1.  在命令行中为这个项目“mvn eclipse:eclipse”。
2.  在 Eclipse 中“刷新/F5”这个项目。

就是这样，无需重新导入，但需要方便终端窗口。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-11-07T02:26:19.527

我有这个问题，我的解决方案是进入源文件夹并运行命令行：**mvn clean install -DskipTests eclipse:eclipse**然后返回 eclipse 工作区并刷新项目。希望有帮助！

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-11-13T20:14:36.607

我删除了`.classpath`项目目录中的文件以纠正此问题。无需从 Eclipse 中的项目中删除**Maven Nature 。**

我得到的具体错误是：**Project 'my-project-name' is missing required Java project: 'org.some.package-9.3.0** 但我的项目不依赖`org.some.package`于任何方式。

也许项目的旧版本依赖于它，而 Maven 没有正确更新`.classpath`文件。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-07-15T21:22:30.187

It helped in my case

rightclick project, remove maven nature mvn `eclipse:clean` (with project open in `eclipse/STS`) delete the project in eclipse (but do not delete the sources) Import existing Maven project

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-03-06T13:24:11.497

我棘手的解决方案是：

1.  打开你的Windows任务管理器，
2.  找到**Javaw.exe**进程并突出显示它，然后通过**End Process结束它**
3.  在eclipse项目浏览器中，右键单击它并`Maven -> Update Project`再次使用。

问题已解决。

如果您在 Eclipse 中运行 Tomcat Server，则需要在重新启动 Tomcat Server 之前刷新项目。**

# c++ - 如何获取在对 VirtualAlloc 的初始分配调用中保留的区域大小

> ID：15065097
> 
> 赞同：3
> 
> 时间：2013-02-25T10:42:08.117
> 
> 标签：c++, windows

在 VirtualFree 的 msdn 文档中

 `````
BOOL WINAPI VirtualFree(
  _In_  LPVOID lpAddress,
  _In_  SIZE_T dwSize,
  _In_  DWORD dwFreeType
); 
````  `dwSize [in] 要释放的内存区域的大小，以字节为单位。

如果 dwFreeType 参数为 MEM_RELEASE，则此参数必须为 0（零）。该函数释放在对 VirtualAlloc 的初始分配调用中保留的整个区域。

似乎系统可以通过地址获得整个区域大小

我的问题是：我该怎么做（通过地址获得整个区域大小）

PS：VirtualQuery API 不能做到这一点

 `````
void* p = VirtualAlloc(null, static_cast<SIZE_T>(_K * 128), MEM_RESERVE, PAGE_NOACCESS);
p = VirtualAlloc(p, _K * 64, MEM_COMMIT, PAGE_READWRITE);
MEMORY_BASIC_INFORMATION im;
VirtualQuery(p, &im, sizeof(im)); 
````  `im.RegionSize 是 MEM_COMMIT 的大小，而不是第一次调用 VirtualAlloc 的整个区域大小

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:10:45.553

[`MEMORY_BASIC_INFORMATION`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366775%28v=vs.85%29.aspx)：

> `AllocationBase`指向由 VirtualAlloc 函数分配的一系列页面的基地址的指针。BaseAddress 成员指向的页面包含在此分配范围内。

继续查询，直到你掉出边缘：

```
void* p = VirtualAlloc(NULL, static_cast<SIZE_T>(_K * 128), MEM_RESERVE, PAGE_NOACCESS);
void* p2 = VirtualAlloc(p, _K * 64, MEM_COMMIT, PAGE_READWRITE);
MEMORY_BASIC_INFORMATION im;
VirtualQuery(p2, &im, sizeof(im));
while (im.AllocationBase == p)
{
    p2 = (unsigned char *)p2 + im.RegionSize;
    VirtualQuery(p2, &im, sizeof(im));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:06:29.310

这是您必须自己跟踪的信息。

保留地址空间就是这样做的——它保留地址。没有关于该空间有多大的概念，因为您可以保留两个碰巧彼此相邻的块，然后在两个保留空间中提交一个块。````

# android - 试用 android 应用程序 - 想要禁用任何退出应用程序的方式 - 主页按钮等

> ID：15065100
> 
> 赞同：-1
> 
> 时间：2013-02-25T10:42:20.873
> 
> 标签：android, android-4.2-jelly-bean, nexus-4

我是一个开发 android 应用程序的团队的一员，我们很快就会试用一天。

我想知道是否有办法将用户“锁定”到应用程序中，（大多数用户不了解智能手机，所以不希望他们意外点击主页按钮，然后对如何返回感到困惑）。

我知道这可能是不可能的（由于恶意软件应用程序基本上将用户锁定在手机之外）是有原因的，但是有什么办法可以做到这一点？

我环顾四周，发现了一些讨论，但找不到具体的答案。

我们有运行 Jelly Bean 4.2.2 的 Nexus 4 手机

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:50:46.733

```
@Override
public void onAttachedToWindow() {
    // TODO Auto-generated method stub

    this.getWindow().setType(WindowManager.LayoutParams.TYPE_KEYGUARD);

    super.onAttachedToWindow();
} 
```

并在 on key down 方法中覆盖 home 按键事件。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    // TODO Auto-generated method stub

    if(keyCode == KeyEvent.KEYCODE_HOME) {
        Toast.makeText(this, "Sorry", Toast.LENGTH_SHORT).show();
        return true;
    } else if (keyCode == KeyEvent.KEYCODE_BACK) {
        Toast.makeText(this, "Sorry No back press", Toast.LENGTH_SHORT).show();
        return true;
    } else {
        return super.onKeyDown(keyCode, event);
    }
} 
```

# c++ - 在优化构建中发现访问冲突，但在调试构建 (gcc) 中未显示

> ID：15065101
> 
> 赞同：0
> 
> 时间：2013-02-25T10:42:21.160
> 
> 标签：c++, debugging, optimization

我有（可能很常见）我的代码崩溃的问题：

```
unknown location(0): fatal error in "BaumIteration_OneDimensionCase": memory access violation at address: 0xfffffff8: no mapping at fault address 
```

用于优化构建（Linux 下 gcc 中的 -O3），但在调试构建中工作正常。我试图调试发布版本，但它只是没有提供任何有用的信息。解决此问题的标准技术是什么？

在其他一些问题中，有人建议使用[valgrind](http://valgrind.org/)。在这种特殊情况下我该如何使用它（如果这是正确的前进方式......）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T11:28:46.340

如前所述，存在一些代码错误，但由于生成的代码不同，使用的内存地址不同，它不会出现在未优化的调试版本中。

由于您询问了 valgrind，因此您应该使用的特定 valgrind 工具是 memcheck。它对代码进行运行时分析。它肯定有助于在堆错误中找到任何可能的错误或警告，如内存泄漏、数组越界访问（读/写）、双重释放......

如果您在 Linux 平台上，这是在 valgrind 下运行二进制文件的方法：

```
valgrind --tool=memcheck  --leak-check=full --show-reachable=yes --log-file=valgrind-log.txt -v --track-origins=yes <your binary file> 
```

[在此处](http://valgrind.org/docs/manual/mc-manual.html)阅读有关 valgrind memcheck的更多信息。

此外，如果可能并且如果您使用 g++ 构建，请将这些编译器选项添加到您的构建过程中：

```
-Wall -Wextra -pedantic -Wuninitialized 
```

分析 g++ 抛出的错误/警告。它可能显示错误的可能原因。

调试好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:09:44.460

即使在调试版本中也可能存在问题，但由于内存布局和损坏的内容，它可能不会出现。作为起点，看看所有的动态分配、释放、数组、指针、未初始化的变量！

如果我遇到这个问题，我会逐步减少代码大小，看看问题是否存在，这样我就可以找到导致问题的位置！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-12T15:07:51.850

另一种选择是 Intel Inspector，它具有与 Valgrind 类似的功能。它带有并行工作室，非常擅长跟踪内存错误并指出问题所在。

如果您正在以便宜的价格工作，那可能无济于事，但我们都在我工作的地方使用英特尔编译器，所以节省大量时间而不是试图追捕它是一个梦想

# asp.net-mvc - 如何在 MVC 3 中禁用 DropDownList

> ID：15065106
> 
> 赞同：1
> 
> 时间：2013-02-25T10:42:36.147
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我在视图上使用以下标记并希望禁用 DropDownList

```
<div class="editor-field">
            @Html.DropDownList("EquipID", "Select Equipment")
            @Html.ValidationMessageFor(model => model.EquipID)
</div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T10:51:30.397

```
@Html.DropDownList("EquipID", null, "Select Equipment", new { disabled = "disabled"}) 
```

您的设备清单来自`ViewBag.EquipID`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T10:44:24.480

试试这个：

```
@Html.DropDownList("EquipID",null, "Select Equipment", new { @disabled = "disabled" }) 
```

问候

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T10:44:53.927

```
<div class="editor-field">
  @Html.DropDownList("EquipID", "Select Equipment", new { @disabled = "disabled" })
  @Html.ValidationMessageFor(model => model.EquipID)
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T10:56:39.867

如果您正确检查方法的智能，您将获得接受字典类型的属性参数。在这里，您可以传递一个或多个 html 属性以根据您的要求自定义显示。

对于您的解决方案，您可以添加以下内容

```
@Html.DropDownList("EquipID", null, "Select Equipment", new { disabled = "disabled"}) 
```

但是，如果您需要自定义/覆盖更多属性，那么您可以轻松地执行以下操作

```
@Html.DropDownList("EquipID", null, "Select Equipment", new { disabled = "disabled", color="#ffffff", name="name"}) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T11:03:51.233

我们可以将 html 属性作为参数传递，我们可以在其中设置任何已定义的 html 属性。

```
@Html.DropDownList("EquipID", "Select Equipment", new { @disabled = "disabled" }) 
```

问候

# java - 如何重构“字符串类型”代码？

> ID：15065110
> 
> 赞同：7
> 
> 时间：2013-02-25T10:42:40.313
> 
> 标签：java, string, oop, types, refactoring

我目前正在开发一个代码库，其中有几类变量，例如数据库路径，它们简单地表示为字符串。这些（非）类型的大多数操作都在实用程序类中定义。

我创建了一个新类来表示数据库，操作定义为实例方法，采用传统的 OOP 风格。然而，通过大型代码库并对其进行重构以使用新类型是相当费力的。有人对如何快速有效地做到这一点有任何建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:50:51.660

迁移实用程序类以使用您的新类。那么实用程序类方法应该只包含两个语句。一个用于创建您的课程，另一个用于调用您的课程。之后，您可以内联实用程序类方法，从而消除对它的需要。

完成后，您需要寻找一种方法来不一遍又一遍地实例化您的新类。这应该通过将局部变量重构为在构造时初始化的实例字段来完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:48:19.513

数据库路径听起来对我来说应该是字符串。还有什么意义？它们应该被外部化，无论是在配置文件中还是在数据库中。这是你的问题中最少的。

持久性已经出现了很多次（例如 Hibernate、Spring JDBC、iBatis 等），我想知道您如何改进它们。如果你不得不去重构的麻烦 - 你必须 - 我建议使用你所做的以外的*任何东西。*

如果你必须写一些东西，谷歌搜索“通用 DAO”。你会得到这样的东西：

[http://www.ibm.com/developerworks/java/library/j-genericdao/index.html](http://www.ibm.com/developerworks/java/library/j-genericdao/index.html)

如果你的作品没有像这样的东西，把它扔掉，重新思考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-24T10:14:49.607

我在 C# 中使用的一种技术（并且刚刚移植到 Java - 如果我犯了错误，我很抱歉，我是 Java 新手）是创建 StringlyTyped 类，例如基类

```
public abstract class StringlyTyped {
    private String value;

    public StringlyTyped (String value){

        if (value == null){
            throw new IllegalArgumentException("value must not be null");
        }
        this.value = value;
    }

    public String getValue() { return value; }

    @Override
    public boolean equals(Object other){
        if (other == this) {
            return true;
        }

        if (other == null || !this.getClass().equals(other.getClass())){
            return false;
        }

        StringlyTyped o = (StringlyTyped)other;
        return o.getValue().equals(this.getValue());
    }

    @Override
    public int hashCode(){ return this.getValue().hashCode(); }

    @Override
    public String toString() { return this.getValue();  }
} 
```

然后派生类

```
public class ProviderName extends  StringlyTyped {

    public ProviderName(String value) {
        super(value);
    }
} 
```

和用法

```
public void Foo(ProviderName provider) { 
} 
```

当您有具有许多字符串参数的方法时，这是有道理的，例如，您可以避免

```
public void Foo(String username, String password, String db, String table, String constraint) 
```

而是有这样的强类型代码：

```
public void Foo(UserName username, Password password, DatabasePath db, TableName table...) 
```

ETC...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-13T03:35:22.210

我通常会尝试在应用程序/进程边界的限制处隔离字符串，例如当它们从数据库中检索或通过 Web 操作接收时。

在那个应用程序/进程边界处，通常是将字符串映射/转换/反序列化为更合适的对象模型的理想位置，无论您使用什么语言都支持。

类似地，对象模型可以在退出应用程序/进程边界时被映射/转换/序列化回字符串形式。

值得注意的是，这种字符串类型可能有些微妙。我经常看到 xml 侵入应用程序和域层。来自 .NET 领域的一个类似示例将无法在收到 ADO.NET 数据表（及其字符串列名和无类型字段值）后立即将它们映射到类/对象中。我毫不怀疑在 Java 世界中有许多类似的等价物。正如笑话所说，Stringly Typing 不仅限于日期值。

# python - 使用 SWIG 从 Python 访问 C 结构

> ID：15065112
> 
> 赞同：1
> 
> 时间：2013-02-25T10:42:52.660
> 
> 标签：python, c, struct, swig

所以，我正在尝试进行最简单的结构访问……但我做不到。

yoba.h：

```
typedef struct{
    int bar;
} foo; 
```

yoba.i：

```
%module yoba

%{
#define SWIG_FILE_WITH_INIT
#include "yoba.h"
%}

%include "yoba.h" 
```

设置.py：

```
import distutils
from distutils.core import setup, Extension

setup(
    name = "yoba",
    version = "0.00",
    ext_modules = [Extension(
        "_yoba",
        ["yoba.i"],
        swig_opts=['-py3', '-c++', '-module','yoba'],
    )]
) 
```

运行.bat：

```
python setup.py build_ext --inplace -ccygwin
pause 
```

所以，我得到了这样的输出：

```
D:\pro\py\mod-test>python setup.py build_ext --inplace -ccygwin 
running build_ext
building '_yoba' extension
swigging yoba.i to yoba_wrap.cpp
D:\tools\cygwin\bin\swig.exe -python -py3 -c++ -module yoba -o yoba_wrap.cpp yoba.i
D:\tools\cygwin\bin\gcc.exe -mcygwin -mdll -O -Wall -ID:\tools\python3.2\include -ID:\tools\python3.2\PC -c yoba_wrap.cpp -o build\temp.win32-3.2\Release\yoba_wrap.o
writing build\temp.win32-3.2\Release\_yoba.def
D:\tools\cygwin\bin\g++.exe -mcygwin -shared -s build\temp.win32-3.2\Release\yoba_wrap.o build\temp.win32-3.2\Release\_yoba.def -LD:\tools\python3.2\libs -LD:\tools\python3.2\PCbuild -lpython32 -lmsvcr90 -o D:\pro\py\mod-test\_yoba.pyd 
```

一切看起来都很好，但是当我尝试执行这样的代码时：

```
import yoba

f = yoba.foo() 
```

什么都没有发生，我用“工作”的 Python 获得了 100% 的 cpu 负载。欢迎任何想法。

**添加**：

所以，我正在尝试确定“损坏”的代码。我很困惑……它在**_wrap_new_foo**中，由 swig 生成。

```
SWIGINTERN PyObject *_wrap_new_foo(PyObject *SWIGUNUSEDPARM(self), PyObject *args) {
  PyObject *resultobj = 0;
  foo *result = 0 ;

  if (!PyArg_ParseTuple(args,(char *)":new_foo")) SWIG_fail;
  result = (foo *)new foo();
  resultobj = SWIG_NewPointerObj(SWIG_as_voidptr(result), SWIGTYPE_p_foo, SWIG_POINTER_NEW |  0 );
  return resultobj;
fail:
  return NULL;
} 
```

在线上：

```
result = (foo *)new foo(); 
```

怎么回事！他妈的？

**解决了：**

使用 -cmingw32 代替 -ccygwin。不明白，但它有效。

# input - unity3d外置摄像头帧率

> ID：15065117
> 
> 赞同：5
> 
> 时间：2013-02-25T10:43:11.670
> 
> 标签：input, camera, unity3d, frame-rate

我正在开发一个实时增强现实应用程序。到目前为止，我已经为移动设备开发了许多 AR 应用程序。现在我必须从 Panasonic P2 获取视频信号。相机是欧洲版。我用 AJA io HD Box 捕捉信号，女巫通过火线连接到 MacPro。到目前为止，一切都很好——只是在 Unity 中不行。当我在 Unity 中开始预览时，AJA ControlPanel 的帧缓冲区会跳到 59.94 fps 的帧速率。我猜是因为对统一的偏好。由于相机的欧洲版，我无法切换到 59,94fps 或 29,47fps。我检查了 Unity 中的所有设置，但找不到任何东西...

是否有可能更改从外部相机捕获的帧速率单位？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-25T05:39:45.057

如果您从 Unity 的 Update() 函数轮询相机，那么您将受到 Vsync 的影响，它将帧处理限制为 60 FPS。

您可以通过转到“[编辑”>“项目设置”>“质量”](http://docs.unity3d.com/Manual/class-QualitySettings.html)，然后将“垂直同步计数”选项设置为“*不同步*”来关闭垂直同步。

# c++ - 源代码版C++框架

> ID：15065119
> 
> 赞同：-3
> 
> 时间：2013-02-25T10:43:25.133
> 
> 标签：c++, frameworks

我想在我的软件中包含一个源代码编辑器。

编辑器至少应提供以下功能：

*   语法着色；
*   语法验证；
*   自动完成；
*   代码折叠；
*   内联文档（例如显示调用的函数文档）；
*   可扩展，以便将来支持更多语言；至少支持 C++、Python、Java、Doc-book、XML、Latex。

此外，该框架应该是 C++ 的，因为我自己希望包含该框架的软件也是 C++ 的。理想情况下，它将使用 Qt 框架。

最后，它至少应该适用于 GNU/Linux、Mac OS X 和 Windows。

我希望避免自己开发它，因为这似乎是一项漫长而艰巨的任务，而且我预计这种需求非常普遍，并且外部世界已经存在许多解决方案。

到目前为止，我只找到了 QScintilla，但我很惊讶没有更多的选择。

你有什么其他的建议 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:47:39.547

也许[KatePart](http://kate-editor.org/about-katepart)是您正在寻找的东西？它是Kate 编辑器和KDE 中包含的KDevelop IDE 中使用的编辑器组件。

# iphone - iOS：如何让 TableView 不填充高度？

> ID：15065122
> 
> 赞同：4
> 
> 时间：2013-02-25T10:43:30.470
> 
> 标签：iphone, ios, xcode, xib

我在 xcode 的 xib 编辑器中创建了一个表格视图。我已将表格视图放置在屏幕中间，它从中间某处开始（从顶部开始 100 磅），并且应该稍微低一点结束（它的总高度为 200 磅）。但是当我在模拟器上运行它时，它会填充 TableView 的高度，直到屏幕底部。

对不起，nooby问题。经过多年的java，我才刚刚开始使用iOS。

屏幕截图![在此处输入图像描述](../Images/84fd56f2863e4e1d3b68388882ccf377.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T10:48:27.307

转到尺寸检查器选项卡。并从 xib 中删除底部调整大小，就像这个屏幕截图一样

![在此处输入图像描述](../Images/6ee858257ddd72759e95750a364c0d2b.png)

只需转到文件检查器选项卡并禁用（未选中）*使用自动布局*

![在此处输入图像描述](../Images/3e3c0f3f24ee5556f6cfffebd82a0c90.png)

# c# - 组合相似的 ASP.NET MVC 路由

> ID：15065125
> 
> 赞同：1
> 
> 时间：2013-02-25T10:43:35.237
> 
> 标签：c#, asp.net-mvc

我有两个非常相似的 ASP.NET MVC 路由，如下所示。

有没有办法将这两条路由结合起来并放置一个条件语句，以便 (1) 对“logs/email/”的任何请求都会发送到 EmailLogsController，而对“logs/user/”的请求会发送到 UserLogsController？

```
// URL: /areax/logs/email/
// URL: /areax/logs/email/details/51
// URL: /areax/logs/email/details/117
context.MapRouteLowercase(
    "AreaX.Log.Email",
    "areax/logs/email/{action}/{id}",
    new
    {
        controller = "EmailLogs",
        action = "Index",
        id = UrlParameter.Optional
    },
    new[] { ControllerNamespaces.AreaX }
);

// URL: /areax/logs/user/
// URL: /areax/logs/user/details/1
// URL: /areax/logs/user/details/10
context.MapRouteLowercase(
    "AreaX.Log.User",
    "areax/logs/user/{action}/{id}",
    new
    {
        controller = "UserLogs",
        action = "Index",
        id = UrlParameter.Optional
    },
    new[] { ControllerNamespaces.AreaX }
); 
```

就目前而言，它们看起来不是很干燥。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:51:00.793

如果您可以重命名控制器（删除 Log 后缀），您可以尝试使用 {controller} 关键字：

```
 context.MapRouteLowercase(
    "AreaX.Log.Email",
    "areax/logs/{controller}/{action}/{id}",
    new
    {
        action = "Index",
        id = UrlParameter.Optional
    },
    new[] { ControllerNamespaces.AreaX }
); 
```

# email - 如何在 JAVA 中从 ckeditor 生成的 html 中提取纯文本

> ID：15065132
> 
> 赞同：4
> 
> 时间：2013-02-25T10:44:06.350
> 
> 标签：email, ckeditor, jakarta-mail, spam, plaintext

我正在使用 ckeditor 撰写电子邮件，我正在使用它生成的 html 来发送 html 电子邮件广告，我还需要文本版本，因此在电子邮件中同时包含 html 和纯文本版本将避免垃圾邮件。

从java中的ckeditor html代码获取文本的方法是什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-25T13:08:21.133

这是一个非常简单的 JavaScript 调用：

```
CKEDITOR.instances.yourEditorInstance.getData() 
```

回报：

```
<h1>Apollo 11</h1>    
<p><b>Apollo 11</b> was the spaceflight that landed the first humans, Americans <a href="http://en.wikipedia.org/wiki/Neil_Armstrong" title="Neil Armstrong">Neil Armstrong</a> and <a href="http://en.wikipedia.org/wiki/Buzz_Aldrin" title="Buzz Aldrin">Buzz Aldrin</a>, on the Moon on July 20, 1969, at 20:18 UTC. Armstrong became the first to step onto the lunar surface 6 hours later on July 21 at 02:56 UTC.</p> 
```

然而：

```
CKEDITOR.instances.yourEditorInstance.editable().getText() 
```

回报：

```
Apollo 11
Apollo 11 was the spaceflight that landed the first humans, Americans Neil Armstrong and Buzz Aldrin, on the Moon on July 20, 1969, at 20:18 UTC. Armstrong became the first to step onto the lunar surface 6 hours later on July 21 at 02:56 UTC. 
```

# ruby-on-rails-2 - 通过保存 url 参数重定向？

> ID：15065144
> 
> 赞同：0
> 
> 时间：2013-02-25T10:44:50.287
> 
> 标签：ruby-on-rails-2, redirecttoroute

前段时间，论坛是在 Rails 应用程序的公共目录中创建的。然后论坛被移动到一个子域。
我通过编辑路由和创建重定向操作为 'domain.com/forum' => 'forum.domain.com 创建了重定向。
我的问题是：我如何保留 url 参数（例如 'domain.com/forum?thread1&=1' => 'forum.domain.com?thread1=1' 等）
我的代码如下：

> routes.rb:
> map.forum '/forum', :controller => "application", :action => "redirect_to_forum"
> 
> application_controller.rb
> def redirect_to_forum
> redirect_to " [http://forum.domain.com](http://forum.domain.com) "
> 结束

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:35:18.163

您可以尝试在哈希中获取请求 url :-> 然后尝试保留您的参数，

在页面顶部使用

```
require 'cgi' 
```

然后在任何你想得到它的地方获取 url 并使用它。在哈希中获取参数后，您可以使用它们来重建您的新网址。

```
 parameters  = CGI::parse(request.url) 
```

参数将包含所有参数的哈希值。

# codeigniter - 是否可以同时使用经典的 CodeIgniter 路由和third_party/MX/Router.php？

> ID：15065148
> 
> 赞同：0
> 
> 时间：2013-02-25T10:44:59.133
> 
> 标签：codeigniter

是否可以同时使用经典的 CodeIgniter 路由和third_party/MX/Router.php？

假设我想在 application/controllers 目录中使用我的经典控制器与我的模型一起使用。

在 CodeIgniter + HMVC 场景中这可能吗？

有没有教程如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:35:09.900

是的。你就去做吧；他们一起工作

# javascript - JavaScript：如何从 for 循环将变量传递给 JS 函数？

> ID：15065150
> 
> 赞同：0
> 
> 时间：2013-02-25T10:45:06.020
> 
> 标签：javascript, function, variables, for-loop

```
for (var i=0;i<x.length;i++)
 {
   var Topic = x[i].getElementsByTagName("text")[0].childNodes[0].nodeValue;
  var Content = x[i].getElementsByTagName("description")[0].childNodes[0].nodeValue;
  document.write("<li class='withimage'> ");
  document.write(Topic);
  document.write("<button onclick='show(Topic)'></button>");
  document.write("</span><span class='time'>");
  var full_time = x[i].getElementsByTagName("created_at")[0].childNodes[0].nodeValue;
  var time = full_time.split("+");
  document.write(time[0]);
  document.write("</span></li>");

  } 
```

我的功能是

```
function show(head)
{
document.getElementById("content").style.display="none";

document.getElementById("details").style.display="block";

document.getElementById("Heading").innerHTML=head;
} 
```

但是在每次单击按钮时，我都会在变量“主题”中得到最终的迭代值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:53:52.723

这里的问题是您没有`Topic`为每个按钮传递对象。实际上，您传递的只是对象名称。因此，当您单击任何按钮时，它将搜索变量`Topic`，在这种情况下，该变量将是`Topic`您迭代中的最后一个对象。

你尝试这样的事情：

```
for (var i=0;i<x.length;i++)
 {
   var Topic = x[i].getElementsByTagName("text")[0].childNodes[0].nodeValue;
  var Content = x[i].getElementsByTagName("description")[0].childNodes[0].nodeValue;
  document.write("<li class='withimage'> ");
  document.write(Topic);
  document.write("<button onclick='show(" + Topic + ")'></button>");
  document.write("</span><span class='time'>");
  var full_time = x[i].getElementsByTagName("created_at")[0].childNodes[0].nodeValue;
  var time = full_time.split("+");
  document.write(time[0]);
  document.write("</span></li>");

  } 
```

# javascript - JS - 键盘事件 - 听/不听

> ID：15065154
> 
> 赞同：3
> 
> 时间：2013-02-25T10:45:21.450
> 
> 标签：javascript, event-handling, dom-events, keyboard-events

我有一个关于 JS 中的键盘事件的问题。

首先，**请不要回答我使用 jQuery 方法**，我知道其中的大部分（绑定/取消绑定，开/关，一个......）但我使用的内部框架**必须在没有 jQuery 的情况下工作**，即使 jQuery用于我们的大多数项目。

所以，我有一个模块，实际上是一个基于[Swipe.js](http://swipejs.com/)的滑动工具，并扩展为在 Web 和移动环境中工作（IE 7+、WebKit（Chrome 和 Safari）、Moz、Opera 和 IE10 / Windows Phone 所需的兼容性）

在鼠标/触摸事件没有任何问题的情况下，受[移动 HTML5 BP](https://github.com/h5bp/mobile-boilerplate/blob/master/js/helper.js#L216)启发的绑定和解除绑定方法似乎可以很好地工作，并对 detachEvents 方法进行小幅修正。

然后我会根据“keydown”事件实现键盘控制功能。（顺便说一句，我不确定 keydon 和 keypress 事件之间是否有很好的区别，除了 keypressEvent.preventDefault() 不会阻止小滚动效果，所以我使用 keydown。）

由于可以在同一页面上添加许多 Swipe，因此我仅在任何 Swipe 获得焦点时才开始监听 keydown 事件（请注意，我添加了一个“tabindex”属性以允许元素获得焦点）。

```
<div id="swipe1" class="swipe" tabindex='0'>
    <ul>
        [...]
    </ul>
</div> 
```

然后，当 Swipe 处理“touchstart”/“click”/“MSPointerDown”事件时，我将其聚焦：

```
onTouchStart: function(e) {
    this.container.focus(); // Refers to the div#swipe1.swipe element
    [...]
    return false;
}

onFocus: function (e) {
    if (this.activateKeyboardControls) { // Keyboard control is optional
        this.addListener(document, 'keydown', this, true);
    }
}

onBlur: function (e) {
    if (this.activateKeyboardControls) { // Keyboard control is optional
        this.removeListener(document, 'keydown', this, true);
    }
} 
```

但不幸的是，removeListener 不起作用。

我的意思是，当元素失去焦点（触发模糊事件）时，它仍然处理 keydown 事件......

是因为它绑定在文档对象上吗？我已经阅读了一些使用一些布尔值的解决方案，但我正在寻找一种更清洁的方式来管理它。

这很烦人，因为当我将焦点放在许多滑动上时，当我按下键盘时，它们中的每一个都在滑动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T10:13:10.180

我不确定我的答案被删除的原因 - 发布后超过 2 周 - 但无论如何，这就是我解决它的方法：

它来自 addEventListener / attachEvent 方法的“类型”参数，第一个，所以......

我将它绑定在对象上而不是窗口上，并且没有冒泡。

```
var target = e.target || e.srcElement;
if (this.activateKeyboardControls) {
    this.addListener(target, 'keydown', this, false);
} 
```

# android - Ksoap2 复杂请求

> ID：15065155
> 
> 赞同：1
> 
> 时间：2013-02-25T10:45:35.090
> 
> 标签：android, soap, ksoap2

需要帮助将soap 请求转换为android 的ksoap 2 请求。肥皂请求看起来像这样 -

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" 
xmlns:tim="http://www.g.com/schemas/T" 
xmlns:tim1="http://www.g.com/schemas/T.Entities" 
xmlns:f="http://www.g.com/schemas/T.Filters" 
xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
   <soapenv:Header/>
   <soapenv:Body>
      <tim:GetFilteredList>
         <tim:entityName>User</tim:entityName>
         <tim:filter i:type="f:UserFilter">
            <tim1:Id>0</tim1:Id>
            <f:Login>login1</f:Login>
         </tim:filter>
      </tim:GetFilteredList>
   </soapenv:Body>
</soapenv:Envelope> 
```

有任何想法吗？

# .net - 在 .NET 中调用函数时设置超时值

> ID：15065158
> 
> 赞同：2
> 
> 时间：2013-02-25T10:45:37.760
> 
> 标签：.net, function, timeout, dropbox, sharpbox

在.NET中调用函数时是否可以设置超时值？我正在使用一个名为 SharpBox 的第三方组件，它循环一组 Dropbox 帐户并将内容拉入我服务器上的给定文件夹。

> Dim itemsDownload as integer = pollSingleDropboxAccount(accountID)

```
function pollSingleDropboxAccount(accountID as integer) as integer
   //Utilises Sharpbox to download the files and return the count
   //In here a connection is established using the SharpBox.dll
   //but never gets closed or throws an exception leaving the
   //function to hang indefinitely
end function 
```

Sharpbox 在幕后使用 HTTPWebRequest 联系 Dropbox API，但似乎默认超时为无限，并且此值不能被覆盖。我已经向 SharpBox 提出了功能请求，但我正在寻找我们可以同时使用的东西作为解决方法。

为了规避这个问题，我想知道我们是否可以在调用 'pollSingleDropboxAccount' 函数周围加上一些东西，以便在 5 分钟后放弃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:50:15.907

是的，这是可能的。

1）在函数调用后创建并运行定时器并启动它

2）在计时器的回调中做任何你需要的事情（调用你的函数）

[在MSDN](http://msdn.microsoft.com/de-de/library/system.threading.timer.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)上阅读有关计时器的信息

**编辑：**请注意，.NET 中至少有 3 种类型的计时器，它们的行为不同。其中一些将在超时后触发（在您的情况下每 5 分钟一次），直到您调用`Stop`它们并且其中一些仅执行一次。

# nfc - NFCEE 执行环境：硬件还是库模块？

> ID：15065172
> 
> 赞同：3
> 
> 时间：2013-02-25T10:46:30.080
> 
> 标签：nfc

我想知道 NFC 执行环境的实际含义。在论坛文件中，它被描述为*“一个环境，要么内置在 NFCC 中，要么连接到 NFCC，在该环境中执行 NFC 应用程序。NFCEE 可以包含在具有各种形状因子的实体中，其中一些可以移除或更换。”* . 但是根据我在移动环境中的理解，设备主机（OMAP 或 Snapdragon 等应用微处理器）是与 NFCC 交互的主机。谁能给我一个关于NFCEE可以是什么的例子 - 我的意思是它是另一个硬件模块（如果是的话，哪个）或一个执行应用程序的android库？“外形尺寸”指的是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T08:55:55.740

执行环境在大多数情况下是一个硬件模块。

较新的 SIM 卡有一个用于将 SIM 卡连接到 NFC 芯片的引脚。在 SIM 中，应用程序（例如支付）可以在安全环境中运行并与 NFC 芯片通信。付款从销售终端通过 NFC 芯片直接进入 SIM 卡，无需通过应用处理器传递数据。因此，恶意软件没有简单的方法来监控或修改支付流程。这是安全方面的简化视图。

其他执行环境有：

*   嵌入式安全元件。简而言之，这些 SIM 卡与 NFC 控制器芯片采用相同的封装。您的 Android 手机很可能拥有其中之一，称为 SmartMX 芯片。

*   支持 SWP（单线协议）的 SD 卡。与 SIM 相同，但采用 SD 卡的形式。

这个概念并没有在这里结束。例如，有将执行环境移动到应用处理器的实验。对于 ARM CPU，有 TrustZone 扩展，它允许在主 CPU 上执行代码，同时仍然安全。

在 Android API 执行环境中做两件事：

*   它们允许您通过设置路由来启用或禁用安全元素。路由配置安全元件何时处于活动状态（例如，可以访问 NFC 芯片）和何时禁用。目前有两种路由在使用：Route off（关闭整个 EE）和 Route_OnWhenScreenOn（屏幕打开和解锁时 EE 处于活动状态）。

*   对于专门连接到 NFC 芯片的安全元件（嵌入式安全元件），执行环境还提供了一种将数据从应用处理器交换到嵌入式安全元件的安全方式。这用于在嵌入式安全元件中安装应用程序（除其他外）。

简而言之就是这样。

# jquery - 即使启用它，asp 按钮仍然处于禁用状态

> ID：15065173
> 
> 赞同：2
> 
> 时间：2013-02-25T10:46:29.843
> 
> 标签：jquery

我在 RadGrid 中有一个 asp Add 按钮，它执行异步回发。它还使用 jquery 禁用保存和取消按钮。单击命令按钮时，我再次启用它们。但呈现的 html 仍然显示

`<input type="submit" ID="SaveButton" disabled="disabled"/>`

因此，我的 OnClientClick 事件不会被触发。为什么按钮未启用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:51:52.803

你有没有尝试过`.on`

```
$('#SaveButton').on('click',function(){
   //code.
}); 
```

禁用的元素不会触发鼠标事件。大多数浏览器会将源自禁用元素的事件沿 DOM 树向上传播，因此事件处理程序可以放置在容器元素上。

你也可以按照我说的去做。

**例子**

```
<div id = "click_fire_disable">
   <input type = "submit" id="anything" value = "I am disabled" disabled = "disabled" />
</div> 
```

现在在`click_fire_disable`单击事件上，您可以将其用作提交按钮单击事件。

以上是我在之前的经验中发现的另一种方式，所以分享给你。

希望这会有所帮助。

# conditional - GnuPlot - 以其他颜色绘制图形

> ID：15065174
> 
> 赞同：2
> 
> 时间：2013-02-25T10:46:31.117
> 
> 标签：conditional, gnuplot

我想绘制这样的东西：

```
plot x linetype ((x < 0.5) ? 5 : 1) 
```

当然这是一个简单的例子，但它对我不起作用。我只想拥有一张与其他颜色不同的图表。我收到了这条消息：

```
undefined variable: x 
```

有谁知道出了什么问题？

感谢帮助。

亚雷克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:07:31.093

看起来您正在寻找`'+'`特殊文件：

```
plot '+' u 1:1:(($1>0.5)?5:1) w lines lc variable 
```

您可以将`+`文件视为第一列中只有 x 值的文件。所以，我们需要参数化地定义我们的情节。这里的点很简单 (x,f(x)) 所以一般来说很容易做到

```
f(x)= ... #whatever function you want to plot.
plot '+' u 1:(f($1))  #equivalent to `plot f(x)` 
```

而且，我很确定你现在已经想通了，我们可以在使用规范中使用尽可能多的列，就像我们的绘图样式允许我们一样——包括我上面所做的可变线条颜色。

# jquery - 在 getJSON() jquery 中处理 404 错误请求

> ID：15065175
> 
> 赞同：8
> 
> 时间：2013-02-25T10:46:32.047
> 
> 标签：jquery, rest, jsonp

我有以下代码，我正在使用 JSONP 从站点检索 JSON。我想处理 404 bad request 之类的错误代码。以下对我不起作用。

```
$.getJSON('https://xyz.com/search?jsonp-callback=?', function(data) {

  alert("success");
})
.success(function() { alert("success 2"); })
.error(function() { alert("error occurred "); })
.complete(function() { alert("Done"); }); 
```

成功和完整的方法正在工作，但错误方法不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T10:52:15.053

尝试[`fail`](http://api.jquery.com/deferred.fail/)代替`error`（参见[Deferred doc](http://api.jquery.com/category/deferred-object/)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T10:56:46.490

```
$.getJSON('https://xyz.com/search?jsonp-callback=?', function(data) {
  alert("success");
})
.success(function() { alert("success 2"); })
.error(function(event, jqxhr, exception) {
    if (jqxhr.status == 404) {
              alert("error occurred ");   
    }
})
.complete(function() { alert("Done"); }); 
```

上面的代码可以帮助你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-03T12:39:03.953

这个线程有答案：[https ://stackoverflow.com/a/14371049/685925](https://stackoverflow.com/a/14371049/685925)

由于您使用的是 JSONP，因此不会调用 jQuery 创建的回调，因此永远不会调用失败回调。这是 JSONP 的正常行为，唉。

# jquery - 动态表单加载

> ID：15065182
> 
> 赞同：0
> 
> 时间：2013-02-25T10:46:39.490
> 
> 标签：jquery, ruby-on-rails, ajax, json

嗨，我是 ajax、jQuery、JSON 等动态请求的新手。我想做的就是——

- 用户在下拉列表中选择一个城市。

- 然后，它应该通过 ajax、jquery 等向控制器发送请求。

-从控制器，我将查询位置表中与城市相对应的位置

- 然后，这将向视图发送响应，其中将使用控制器中的前一个查询加载下拉列表。

-所有这些都是动态的（不言自明）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:02:17.117

首先，您应该粘贴您尝试过的任何代码，除非我们没有任何一种形式可以帮助您。

或者你也可以简单地使用谷歌找到这些东西：

试试这些链接：http: [//goo.gl/pPWQ8](http://goo.gl/pPWQ8)

[http://goo.gl/CrNwu](http://goo.gl/CrNwu)

**编辑：**

检查这个 JsBin [http://jsbin.com/ozolem/4/watch](http://jsbin.com/ozolem/4/watch)

# git - ZSH Git aliases not working

> ID：15065184
> 
> 赞同：0
> 
> 时间：2013-02-25T10:47:16.567
> 
> 标签：git, zsh

I am trying to set this simple alias:

```
alias git plog = git log --pretty=format:'%C(yellow)%h%Cred%d%Creset - %C(cyan)%an %Creset: %s %Cgreen(%cr)' 
```

In my .zshrc file. When I reload I get this:

```
no matches found: git log --pretty=format:%C(yellow)%h%Cred%d%Creset 
```

If I put this in my .gitconfig

```
 [alias]
     ci = commit
     plog = log --pretty=format:'%C(yellow)%h%Cred%d%Creset - %C(cyan)%an %Creset: %s %Cgreen(%cr)' 
```

Zsh shell gives me this each time:

```
$git:(embedded_gifs) git plog
zsh: correct 'plog' to 'log' [nyae]? n 
```

Any ideas to fix this ?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T10:51:18.560

Take the latter option of defining the alias in the `.gitconfig` file and either teach the auto-complete about the `plog` command or turn of auto-correction. Here is a brief [blog post](http://yountlabs.com/automation/disable-autocorrect-in-zsh/) explaining how to achieve this.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:55:09.453

The shell interprets 'git plog' by passing the 'plog' as the first parameter to the Git command, which it does not understand. If you make the alias one word, then it will work.

```
alias git-plog=... 
```

# asp.net-mvc-4 - Kendo UI Grid 标题中每页的项目

> ID：15065189
> 
> 赞同：1
> 
> 时间：2013-02-25T10:47:30.013
> 
> 标签：asp.net-mvc-4, kendo-ui, kendo-grid

我试图让[Kendo Grid](http://demos.kendoui.com/web/grid/index.html)每页显示许多产品，并使用以下代码呈现一个下拉菜单，以在网格的页脚中选择每页的项目数。

是否可以在标题或网格本身之外的其他 html 元素中呈现下拉菜单？

```
 @(Html.Kendo().Grid(Model.Products)
        .Name("Grid")
        .Columns(columns =>
        {               
            columns.Bound(p => p.Id).Groupable(false).Visible(false);
            columns.Bound(p => p.Name);
            columns.Bound(p => p.UnitPrice);
        })
        .Pageable(pager => { pager.PageSizes(true); })
        .Sortable()
        .DataSource(dataSource => dataSource
            .Ajax()
            .Read(read => read.Action("Products_Read")
        )
    ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T15:06:12.680

无法在网格之外呈现内置页面下拉菜单。然而，创建一个单独的下拉列表并更改网格的页面大小相对容易：

```
@(Html.Kendo().DropDownList()
      .Name("pages")
      .Events(e => e.Change("onChange"))
)

<script>
function onChange() {
     $("#Grid").data("kendoGrid").dataSource.pageSize(this.value());
}
</script> 
```

这是一个现场演示：http: [//jsbin.com/uwiqow/1/edit](http://jsbin.com/uwiqow/1/edit)

# php - CSV 在 MAC 中的每行末尾显示 CRLF，但在 Windows 中显示 CF

> ID：15065192
> 
> 赞同：1
> 
> 时间：2013-02-25T10:47:34.563
> 
> 标签：php, windows, macos, csv

我正在从 csv 文件中读取内容

```
$row = 1;
        if (($handle = fopen($filename, "r")) !== FALSE) {
            while (($data = fgetcsv($handle, 0, ",")) !== FALSE) { //Reading the file
                $num = count($data);

                for ($c = 0; $c < $num; $c++) {
                    $csvData[$row][$c] = $data[$c];
                }

                $row++;
            }

            return $csvData;
            fclose($handle);
        } 
```

但是如果我在每行末尾的 MAC 上创建 csv，则有**CRLF**，但在 Windows 上只有**CR**，并且我的脚本仅适用于 Windows。我怎样才能修复我的 MAC 脚本。

# unix - Jenkins 中的参数化构建

> ID：15065194
> 
> 赞同：0
> 
> 时间：2013-02-25T10:47:41.840
> 
> 标签：unix, jenkins

我们创建了一个作业，用于将应用程序从一个环境迁移到另一个环境。我们选中了“This Build is Parameterised”选项。在此我们创建了 3 个参数。源环境、应用程序和目标环境。

我们的要求是，如果我们指定第一个参数（源环境），它应该调用一个 unix 脚本并使用该脚本的输出（部署在该环境中的应用程序列表）作为第二个参数（应用程序）。

如果我们选择一个参数并且输出应该进入第二个参数，这是否可以调用脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:25:54.857

这不可能。必须在构建实际开始之前指定所有参数。并且所有的选择参数都是静态的。

您是否希望在您给出第一个参数后构建运行一段时间，然后等待您根据输出输入第二个参数？这是不可能的。充其量你需要拆分你的作业，第一个作业提供输出并触发另一个参数化构建。

# java - 谷歌应用引擎数据存储事务提交抛出 InterruptedException

> ID：15065195
> 
> 赞同：1
> 
> 时间：2013-02-25T10:47:47.777
> 
> 标签：java, google-app-engine, google-cloud-datastore

有什么想法吗？我们同时使用其他前端线程，所以我想知道这是否相关。

```
java.lang.InterruptedException
at java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireSharedNanos(AbstractQueuedSynchronizer.java:1038)
at java.util.concurrent.locks.AbstractQueuedSynchronizer.tryAcquireSharedNanos(AbstractQueuedSynchronizer.java:1326)
at com.google.common.util.concurrent.AbstractFuture$Sync.get(AbstractFuture.java:275)
at com.google.common.util.concurrent.AbstractFuture.get(AbstractFuture.java:96)
at com.google.appengine.tools.development.TimedFuture.get(TimedFuture.java:41)
at com.google.common.util.concurrent.ForwardingFuture.get(ForwardingFuture.java:63)
at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:86)
at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:86)
at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:86)
at com.google.appengine.api.datastore.FutureHelper.getInternal(FutureHelper.java:71)
at com.google.appengine.api.datastore.FutureHelper.quietGet(FutureHelper.java:32)
at com.google.appengine.api.datastore.TransactionImpl.commit(TransactionImpl.java:110)
at org.gails.infrastructure.google.DatastoreGAE.commitTransaction(DatastoreGAE.java:261) 
```

还报告[了 http://code.google.com/p/googleappengine/issues/detail?id=8873&thanks=8873&ts=1361788757](http://code.google.com/p/googleappengine/issues/detail?id=8873&thanks=8873&ts=1361788757)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T15:06:19.730

“当前事务”是线程本地的。如果您在并行线程中执行事务，那么在使用`.getCurrentTransaction()`. 有关更多信息，请参阅文档：[https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/DatastoreService#beginTransaction()](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/DatastoreService#beginTransaction())

# sql-server-2008 - 根据 logtime 区分 bw 列

> ID：15065204
> 
> 赞同：1
> 
> 时间：2013-02-25T10:48:26.120
> 
> 标签：sql-server-2008, sum, calculated-columns

我的桌子是：

```
Logtime              Energy
-------------------  --------
2013-02-22 15:30:00  36883.79
2013-02-21 17:30:00  36767.68
2013-02-20 17:30:00  35447.97
2013-02-19 17:30:00  34170.04
2013-02-18 15:30:00  32663.54
2013-02-15 17:30:00  31649.39
2013-02-13 17:30:00  29091.99
2013-02-12 17:30:00  27807.49 
```

我需要得到两个 logtime 值之间的差异。

例如：

`2013-02-18 15:30:00`和之间的能量差`2013-02-22 15:30:00`是`4220.25`。

我试过这样：

```
declare @energy varchar(30)
declare @min int
declare @max int
declare @result varchar(30)
select Logtime,Energy from PLENE_EnergySum order by Logtime desc
set @min=cast((select min(Energy) as [Energy] from PLENE_EnergySum where Logtime between
 '2013-02-22 15:30:00' and  '2013-02-18 15:30:00')as int)
set @max=cast((select max(Energy) as [Energy] from PLENE_EnergySum where Logtime between
'2013-02-22 15:30:00' and  '2013-02-18 15:30:00')as int)
set @result=@max-@min
insert into weekreport values('Fourth',@result) 
```

我在周报告表中得到空值

```
week    energy
------  ------
Fourth  NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T12:03:13.703

set @first=Cast(Year(getdate())as varchar(10))+'-'+Cast(Month(getdate())as varchar(10))+'-'+'01'

set @st=Cast(Year(getdate())as varchar(10))+'-'+Cast(Month(getdate())as varchar(10))+'-'+'08'

set @st1=Cast(Year(getdate())as varchar(10))+'-'+Cast(Month(getdate())as varchar(10))+'-'+'15'

set @st2=Cast(Year(getdate())as varchar(10))+'-'+Cast(Month(getdate())as varchar(10))+'-'+'22'

set @st3=Cast(Year(getdate())as varchar(10))+'-'+Cast(Month(getdate())as varchar(10))+'-'+'32'

set @min=(select min(Energy) as [Energy] from PLENE_EnergySum where Logtime>@first and Logtime<@st)

set @max=(select max(Energy) as [Energy] from PLENE_EnergySum where Logtime>@first and Logtime<@st)

set @result=@max-@min

insert into weekreport(week,Energy) values('First',@result)

Answer for the above table:

First 961.1

# tfs - TFS - 整个项目的开始和结束日期与冲刺

> ID：15065210
> 
> 赞同：1
> 
> 时间：2013-02-25T10:48:30.587
> 
> 标签：tfs, agile, agile-project-management

我有一个 TFS 2012 服务器来管理我的项目我有几个相同长度的 sprint 2 周

是否可以设置整个项目的开始和结束日期？您如何查看整个项目的开始和结束日期以及所有 sprint 信息天气它正在进行、完成、迟到。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T17:06:42.270

冲刺应该在父节点下定义。您可以像设置 sprint 一样设置此节点的开始和结束日期。

至于查看有关项目的信息（即是否正在进行、已完成、已延迟等），取决于您正在寻找哪些指标。SQL Server Reporting Services 包含从 Warehouse 数据库和驻留在 Analysis Services 中的 OLAP 多维数据集运行的报表。报告取决于项目所基于的流程模板（敏捷、Scrum、CMMI 等）。尽管如此，这些报告将为您提供概述信息、发布燃尽图、冲刺燃尽图等。

# javascript - 从 Silverlight 迁移到 Html5/JavaScript

> ID：15065211
> 
> 赞同：2
> 
> 时间：2013-02-25T10:48:31.070
> 
> 标签：javascript, ajax, html, silverlight, client-side

我有一个 Silverlight 应用程序。我想使用 HTML5 和 JavaScript 制作这个应用程序的原型。我将使用 ASP.NET MVC 4 框架。我该如何开始。有没有我可以使用的框架。我的 Silverlight 应用程序使用一些精美的第三方 UI 控件在仪表板、网格等中呈现数据。HTML5 或 ASP.NET MVC4 是否有一些等价物。我的一般问题是如何从 Silverlight 迁移到 HTML5/JavaScript/ASP.NET MVC 4？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:21:24.687

那里有许多 JavaScript 框架，但最受欢迎的框架之一是 jQuery（我相信您可能听说过）。除了是一个出色的 DOM 操作器之外，它还有一个 UI 库，其中包含大量功能，如手风琴、选项卡式界面和进度条等，这些功能非常容易上手。

[http://jqueryui.com/](http://jqueryui.com/)

另一方面，如果你在进行相当繁重的应用程序开发，我会听到关于 ExtJS 的好消息：

[http://www.sencha.com/products/extjs/](http://www.sencha.com/products/extjs/)

使用 JS 和 HTML5 进行开发不会有灵丹妙药，因此最好找到适合您特定需求的内容。忽略炒作，选择适合你的东西。

如果您追求更多模板驱动的东西，那么我听说 Angular JS 很棒：

[http://angularjs.org/](http://angularjs.org/)

但是，这更适用于您的 JS 应用程序而不是“网站”，因为它完全依赖于 JS，没有它就无法工作（没有优雅的降级）。

那里有大量的框架，而且很多来来去去。最好做一些谷歌搜索！

祝你好运。

# css - CSS 悬停每个单词的伪类单词

> ID：15065214
> 
> 赞同：2
> 
> 时间：2013-02-25T10:48:36.933
> 
> 标签：css

在我使用 CSS 时

```
p:hover {background-color: grey;} 
```

它改变了整个段落。当我将鼠标悬停在其中的任何单词上时，我希望它更改该段落中的单个单词。我该怎么做 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:01:15.200

如果您不想手动包装每个单词，可以使用 jQuery 为您完成，如下所示：

```
var p = $('p');
var text = p.text().split(' ');
for( var i = 0, len = text.length; i < len; i=i+1 ) {
    text[i] = '<mark>' + text[i] + '</mark>';
}
p.html(text.join(' ')); 
```

然后你让你的CSS如下：

```
p mark:hover {background:yellow} 
```

这是演示：http: [//jsfiddle.net/zL2Yw/1/](http://jsfiddle.net/zL2Yw/1/)

不幸的是，没有纯 CSS 解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T10:52:57.400

只需用内联元素包装你的话，例如

```
<p>
  Lorem ipsum sit dolor amet <mark>consectetur</mark> dolor ...
</p> 
```

并在段落悬停时更改其背景颜色

```
p:hover mark {
   background-color: grey;
} 
```

（随意使用最合适的元素代替`<mark>...</mark>`）

# sql - 具有所有属性的表作为主键

> ID：15065216
> 
> 赞同：0
> 
> 时间：2013-02-25T10:48:38.153
> 
> 标签：sql, relational-database

我有两张桌子：`Student`并且`Shop`我想记录有关哪个学生访问了哪个商店的信息，如果访问次数高于`n`，他们应该获得折扣：

我是这样做的：

![在此处输入图像描述](../Images/004873e86e8b27626f9990cd55427e51.png)

表中的所有属性 ( `studentID, shopID, time, date`)`StudentShop`构成该表的主键。我只想知道这个设计好不好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:57:31.287

由于**实体之间的关系 Student - Shop**是**多对多**关系，它总是使用**关联表**（由两个关系的主键组成）来实现，所以 StudentShop 表是实现这种关系的**不错选择。**

# c#-4.0 - IEnumerable Any 或 Count 抛出异常

> ID：15065217
> 
> 赞同：0
> 
> 时间：2013-02-25T10:48:40.773
> 
> 标签：c#-4.0

```
IEnumerable<ColorRow> result = (from a in Fruit.Apple.Colors where (a.color == "red") select a); 
```

如果我尝试使用 result.Any() 或 Count() 它在没有返回结果时抛出异常，我理解上面的 ColorRow 将为空，但我该如何检查呢？

将上面的内容更改为 var result 帮助是否等同于 Colrow result = new ColorRow ？

不知道如何处理上面的 IEnumerable 为空，空。

我目前正在使用 try and catch 但似乎并不干净。

```
try
{
result.FirstOrDefault().Color= "pink";
return true;
}
catch
{
return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:50:56.640

> 我目前正在使用 try and catch 但似乎并不干净。

您可以检查对象是否为 null，然后比较颜色，而不是 try catch。

```
var temp = result.FirstOrDefault();
if(temp != null && temp.Color == "Pink")
   return true;
else
   return false; 
```

对于另一个关于`Any`并且`Count`您确定您的代码正在编译的问题，因为您似乎正在查询`Fruit.Apple.Colors`并且您正在创建 IEnumerable `ColorRow`，它应该是：

```
IEnumerable<Color>.... 
```

*（如果使用隐式类型（var）正在解决问题，则可能您在分配中使用了错误的类型）*

# jquery - button_to 远程更新

> ID：15065218
> 
> 赞同：1
> 
> 时间：2013-02-25T10:48:47.157
> 
> 标签：jquery, ruby-on-rails, ajax, remoteobject, button-to

我正在尝试使用 button_to 助手远程更新我的数据库，尽管我遇到了一些问题，它似乎没有传递参数。

在我看来，我正在使用

```
- @availabilities.each do |a|
    =button_to 'Accept', { :controller => 'availabilities', :action => :update, :id => a.id, :available => true }, :confirm => 'Are you sure?', :method => :post, :remote => true 
```

并在控制器中

```
# PUT /availabilities/1

# PUT /availabilities/1.json
  def update
    @availability = Availability.find(params[:id])

    respond_to do |format|
      if @availability.update_attributes(params[:availability])
        format.html { redirect_to @availability, :notice => 'Availability was successfully updated.' }
        format.js
      else
        format.html { render :action => "edit" }
        format.js
      end
    end
  end 
```

控制台输出

```
 Started POST "/availabilities/2/edit?available=true" for 127.0.0.1 at 2013-02-25 21:43:30 +1100

ActionController::RoutingError (No route matches [POST] "/availabilities/2/edit"): 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:09:09.030

看起来您已经设置了默认路由，该路由将匹配`POST`控制器的创建操作并拒绝任何`POST`ed 数据以更新现有对象。

在按钮的代码中，将方法更改为`PUT`.

```
=button_to 'Accept', { :controller => 'availabilities', :action => :update, :id => a.id, :available => true }, :confirm => 'Are you sure?', :method => :put, :remote => true 
```

### 评论讨论后的示例代码

在一个助手中，我有以下显示在视图中。

```
def toggle_admin(user)
  if user.is_admin?
    button_to "Yes", toggle_admin_path(user), :id => "toggle_admin_#{user.id}", :class => "btn btn-mini toggle-admin", :remote => true
  else
    button_to "No", toggle_admin_path(user), :id => "toggle_admin_#{user.id}", :class => "btn btn-inverse btn-mini toggle-admin", :remote => true
  end
end 
```

我的路由文件指向`toggle_admin_path`一个用户设置控制器，其中包含以下内容：

```
def toggle_admin
  @user = User.find(params[:id])
  @account = @user.account
  if @user.is_admin? && @account.admins > 1
    @user.remove_role :admin
  else
    @user.roles << :admin
  end
  if request.xhr?
    render :status => 200, :content_type => 'text/javascript'
  else
    redirect_to edit_account_path
  end
 end 
```

# php - 使用 PDO 从数据库中获取数据

> ID：15065219
> 
> 赞同：0
> 
> 时间：2013-02-25T10:48:50.750
> 
> 标签：php, pdo

我有一个问题，我只是无法弄清楚问题是什么，显然有一些我忽略了。请参阅以下代码。

```
<?php
class CompanyContact
{

    //fields;
    private $iID;
    private $sFirstName;
    private $sInfix;
    private $sLastName;
    private $sPhoneNumber;
    private $sEmail;

    private $dbCon;

    public function __construct(){

        $sQuery = "SELECT * FROM company_contact";
        $this->dbCon = Registry::get('oDb')->prepare($sQuery);
        $this->dbCon->execute();

        $data = $this->dbCon->fetchAll(PDO::FETCH_ASSOC);

        echo "<pre>";
        print_r($data);
        echo "</pre>";

        $this->iID = $data['id'];

    }

    public function getFirstName(){
        return $this->sFirstName;
    }

} 
```

当我打印 $data 我看到输出。但问题是当我想输出用户的 id 时。然后我收到以下错误：注意：未定义的索引：id

在我的控制器中，我有以下代码：

```
<?php 
$c = new CompanyContact();
$oTemplate->assign("contacts",$c);
?> 
```

在我看来我想要这个

```
<?php
  foreach($this->var['contacts'] as $contacts){
  echo $contacts->getFirstName();
}
?> 
```

而且我知道这并不是让 PHP 出现在您看来的最佳意图，但我正在使用我的公司自己制作的 MVC 框架，所以这有点废话。预先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:57:36.023

只获取第一个 id

```
$this->iID = $data[0]['id']; 
```

对全部

```
foreach($data as $d) {
 echo $d['id']
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:55:41.183

它是多维数组，因为`$this->dbCon->fetchAll(PDO::FETCH_ASSOC);`将返回*所有行*。

$this->iID = $data[0]['id'];

# ios - 在 iOS 的工具栏中包含 UISearchBar

> ID：15065220
> 
> 赞同：0
> 
> 时间：2013-02-25T10:48:52.987
> 
> 标签：ios, objective-c, cordova

我正在尝试将 UISearchBar 放在 .xib 文件的工具栏上。我可以将搜索栏拖放到工具栏上，但它显示以下错误。

`ControllerName.xib:error: illegal Configuration: UISearchBar embedded in UIBarButtonItems (Only available ub iPad documents).`

请指导我如何将 UISearchBar 包含到 xib 的工具栏中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T10:57:14.283

据我所知，除非您使用**IPAD**进行开发，否则不能`UISearchBar`直接`UIToolBar`在**IPHONE**中添加，您需要先将 UISearchBar 添加到 customView ，然后以编程方式将其添加到工具栏

```
// your searchbar
UISearchBar *searchBar = [[UISearchBar alloc] initWithFrame:CGRectMake(xposition, yposition, width, height)];

//create a customview and make its frame equal to your searchbar
UIView *searchBarView = [[UIView alloc] initWithFrame:searchBar.frame];

// add your searchbar to the custom view
[searchBarView addSubview:searchBar];

//finally add it to your bar item of the toolbar

UIBarButtonItem *searchBarItem =
    [[UIBarButtonItem alloc] initWithCustomView:searchBarView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:17:32.410

以编程方式：

```
UIToolbar *Toolbar = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    [Toolbar sizeToFit];

    UISearchBar *testbar = [[UISearchBar alloc] initWithFrame:CGRectMake(0,2,250,38)];

    NSMutableArray *barItems = [[NSMutableArray alloc] init];
    UIBarButtonItem *flexSpace = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace target:self action:nil];
    [barItems addObject:flexSpace];

    UIBarButtonItem *btnCancel = [[UIBarButtonItem alloc] initWithTitle:@"Button" style:UIBarButtonItemStyleBordered target:self action:@selector(ButtonMethod)];
    [barItems addObject:btnCancel];

    [Toolbar setItems:barItems animated:YES];

    [Toolbar  addSubview:testbar];

    [self.view addSubview:Toolbar]; 
```

这是按钮方法；

```
-(void)ButtonMethod
{
  // Write Code for ButtonMethod Method
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-21T15:52:44.210

**既然 Apple 在Xcode 8.2**中修复了这个问题，您就可以执行此 Interface Builder 了。我认为他们之前禁用了它，因为在 iOS 8.0 之前的 iOS 上不允许弹出窗口，并且工具栏中的搜索栏意味着大多数时候都会使用弹出窗口。但是他们忘记在 iOS 8.0 中禁用它。

# r - 当使用 R 满足某些条件时，使用两列创建具有多个类别的新列

> ID：15065221
> 
> 赞同：0
> 
> 时间：2013-02-25T10:48:57.267
> 
> 标签：r, conditional-statements, multiple-columns

我有一个“X”（从*0 到 80*的值）和“Y”（从**0 到 80**的值）的数据集。我想创建一个新列“表”。我想到了 36 张桌子： 6 人一组……它们应该按照以下方式分组：

*   表 1-6:ALL Y **11-20** ... 表 7-12:Y **21-30**表 13-18:Y **31-40**表 19-24:Y **41-50**表 25-30:Y **51 -60** , 表 31-36:Y **61-70**
*   表 1：X *21-30*和表7、13、19、25、31
*   表 2：X *31-40*和表8、14、20、26、32
*   表 3：X *41-50*和表9、15、21、27、33
*   表 4：X *51-60*和表10、16、22、28、34
*   表 5：X *61-70*和表11、17、23、29、35
*   表 6：X *71-80*和表12、18、24、30、36

最终结果：

```
X   Y   Table
45  13    3
66  59    29
21  70    31
17  66    NA (there is no table for X lower than 21) 
```

我应该使用 If Else 函数将“X”和“Y”中的数据分组到我的新“表”中，范围从 1 到 36 还是其他？任何帮助将不胜感激！谢谢！

头部（数据）

```
 value avg.temp  X  Y
1      0     6.69   45 13
2      0     6.01   48 14
3      0     7.35   39 15
4      0     5.86   45 15
5      0     6.43   42 16
6      0     5.68   48 16 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:30:57.667

我想你可以使用这样的东西。如果您的数据框被调用`df`：

```
df$Table <- NA
df$Table[df$X>=21 & df$X<=30 & df$Y>=11 & df$Y<=20] <- 1
df$Table[df$X>=31 & df$X<=40 & df$Y>=11 & df$Y<=20] <- 2
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-20T09:01:11.320

使用数学和索引：

```
# demo data
x <- data.frame(X = c(45,66,21,17,0,1,21,80,45),Y = c(13,59,70,66,80,11,0,1,27))

# if each GROUP of Y tables was numbered 1-6, aka indexing
x$ytableindex <- ((x$Y-1) - (x$Y-1) %% 10) / 10

# NA if too low
x$ytableindex[x$ytableindex < 1] <- NA

# find lowest table based on Y index
x$ytable <- (0:5*6+1)[x$ytableindex]

# find difference from lowest Y table to arrive at correct table using X
x$xdiff <- floor((x$X - 1) / 10 - 2)

# NA if too low
x$xdiff[x$xdiff < 0] <- NA

# use difference to calculate the correct table, NA's stay NA
x$Table <- x$ytable + x$xdiff 
```

# bash - Unix - 根据列值随机选择行

> ID：15065222
> 
> 赞同：4
> 
> 时间：2013-02-25T10:49:00.007
> 
> 标签：bash, unix, random

我有一个大约 1000 行的文件，如下所示：

```
ABC C5A 1
CFD D5G 4
E1E FDF 3
CFF VBV 1
FGH F4R 2
K8K F9F 3
... etc 
```

我想选择 100 条随机行，但每第三列有 10 行值（所以从第 3 列中值为“1”的所有行中随机选择 10 行，从第 3 列中值为“2”的所有行中随机选择 10 行，等等）。

这可以使用bash吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T10:56:26.917

首先`grep`所有具有特定编号的文件，将它们随机播放并使用 . 选择前 10 个文件`shuf -n 10`。

```
for i in {1..10}; do
    grep " ${i}$" file | shuf -n 10
done > randomFile 
```

如果您没有`shuf`，请使用`sort -R`对它们进行随机排序：

```
for i in {1..10}; do
    grep " ${i}$" file | sort -R | head -10
done > randomFile 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T11:08:05.253

如果你可以使用`awk`，你可以用单线做同样的事情

```
sort -R file | awk '{if (count[$3] < 10) {count[$3]++; print $0}}' 
```

# sql - SQL自增id字段加字母

> ID：15065226
> 
> 赞同：0
> 
> 时间：2013-02-25T10:49:12.710
> 
> 标签：sql

请问我有这个问题。我在这里有这个 sql 查询：

```
$sql="INSERT INTO formas (data,dyqani_pergjegjes,pranoi) VALUES ('$postData','$postDyqani_pergjegjes','$postPranoi')"; 
```

我在这里有一个自动增量 id 字段，我需要在自动增加的 id 前面添加一个字母“A”......我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:14:25.010

如果您只想要基于**id字段的另一个只读字段（varchar，例如****A_id** ） -

 **```
UPDATE table SET A_id='A'+cast(id as varchar)
-- sets all in the table, or add a WHERE clause to do the one you've just added 
```**

# c++ - 尝试在 Eclipse 中打开现有的 C++ 项目

> ID：15065228
> 
> 赞同：0
> 
> 时间：2013-02-25T10:49:15.403
> 
> 标签：c++, eclipse

我无法从 trynamic 打开一个令人兴奋的 c++ 项目。这是一个示例项目，必须展示如何使用 c++ 程序控制他们的步进马达控制器板，而不是简单的 TMCL gui 程序。

我的示例程序来自：[http ://www.trinamic.com/index.php?option=com_content&view=article&id=303&Itemid=178](http://www.trinamic.com/index.php?option=com_content&view=article&id=303&Itemid=178)

我使用 eclipse Juno 和 windows 7。在大学的 c++ 课程中，我只需要使用源文件和头文件，但是这个包包含很多不同的文件。我已经找到了很多关于他们的信息。我认为makefile是问题所在。

问题是当我编辑源文件时，可执行文件没有更新。我研究了makefiles是如何工作的，因为我认为问题会在那里，但我找不到解决方案。

有人知道打开这个项目的正确方法吗？我必须让 eclipse 自动生成 makefile 以使源文件首先运行，但也许这是不正确的？我已经阅读了关于如何打开现有项目的 eclipse 手册，但是 cpp 文件中的更改仍然没有在 .exe 文件中更新。

我希望我已经提供了足够的信息。

我已经尝试了 2 天，但不幸的是没有成功。如果有人能让我上路，我真的很感激！

干杯，

弗洛里斯

# asp.net-mvc-3 - 如何在asp.net mvc中使用viewdata显示数据

> ID：15065230
> 
> 赞同：2
> 
> 时间：2013-02-25T10:49:22.723
> 
> 标签：asp.net-mvc-3

下面给出的是我的代码，当我在表单中登录时会发生错误是“对象引用未设置为对象的实例。”。实际上我在母版页中显示数据。

母版页：-

```
 <%@ Master Language="C#" Inherits="System.Web.Mvc.ViewMasterPage" %>
        <%@ Import Namespace="ClientProj.Models" %>

               <%foreach(var m in (IEnumerable<user_master>)ViewData["email"])
                    { %>
                                <%=m.email %>
                    <%} %> 
```

还有我的控制器：-

```
 public ActionResult Index()
          {

               ViewData["email"] = from p in db.user_master select p;

               return View();
         }
    [HttpPost]
    public ActionResult Index(user_master log)
    {

        ViewData["email"] = from p in db.user_master where                                                      
                            p.user_id==Convert.ToInt32(Session["user"]) select p;

        var ss = from p in db.user_master
                 where p.username == log.username &&
                 p.user_password == log.user_password
                 select p;

        if (ss.Count() > 0)
        {

            Session["id"] = ss.First().user_id;
            Session["user"] = ss.First().username;
            return RedirectToAction("Home");
        }
        else
        {

            return RedirectToAction("index");
        }

        return View();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:53:38.807

您正在以一种方法在控制器中设置 ViewData，但尝试在任何页面的母版页中读取它。这意味着您需要确保您所做的每个操作都设置了 Viewdata，这确实是个坏主意。

这里可能发生的情况是您有另一个未设置 ViewData 的操作，例如 Index 的 HttpPost 版本。

# html - Tiki Wiki CMS 在构建模板时是否有一些特殊要求？

> ID：15065231
> 
> 赞同：0
> 
> 时间：2013-02-25T10:49:23.067
> 
> 标签：html, css, templates, content-management-system, tiki-wiki

我必须对 psd 进行切片并构建未来 Tiki Wiki CMS Web 应用程序的第一个版本模板。是否有一些必须考虑的特殊功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T20:15:28.497

“功能”是指 Tiki CMS 的功能？因为有很多部分需要设置样式，所以我总是从空 CSS（参见 styles/empty.css）“从头开始”并导入布局基础，然后添加自己的样式或覆盖（有时您需要 !important 来覆盖）。否则，没有什么比使用任何其他 HTML 站点或 CMS 更困难的了。您只需要在浏览器中安装 Firebug（或类似的插件）即可检查要设置样式的 CSS 类和 id 的代码，这非常有帮助。

露西

# ios - 在 celander 中选择日期是在 iOS 中使用 Vurig-Calendar 库给我上一个日期

> ID：15065232
> 
> 赞同：1
> 
> 时间：2013-02-25T10:49:28.650
> 
> 标签：ios, objective-c, nscalendar

我已经下载了这个库[https://github.com/TjeerdVurig/Vurig-Calendar](https://github.com/TjeerdVurig/Vurig-Calendar)。现在我面临的问题是，例如，如果我选择 2013 年 2 月 25 日，它会打印 2013 年 2 月 24 日。我在代码中找不到任何东西。是因为时区还是与编码无关的原因？请指教

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:57:22.853

您有时区问题，可以通过添加以下代码行来解决：

[格式化程序 setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];

**更新**

1.  [问题 1](https://stackoverflow.com/questions/12184454/converting-a-date-by-string-format-to-nsdate-result-one-day-before-string-date)

2.  [问题2](https://stackoverflow.com/questions/6318603/nsdate-is-not-converting-correctly-using-nsdateformatter)

3.  [问题 3](https://stackoverflow.com/questions/11273001/nsdateformatter-datefromstring-returns-incorrect-date)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-26T10:09:08.393

这很容易做到。在你的`VRGCalendarView.m`go to 方法中

```
- (void)drawRect:(CGRect)rect {
    int firstWeekDay = [self.currentMonth firstWeekDayInMonth]-1;
} 
```

将此更改为：

```
int firstWeekDay = [self.currentMonth firstWeekDayInMonth]; 
```

和

```
int selectedDateBlock = ([selectedDate day]-1)+firstWeekDay; 
```

把这个改成

```
int selectedDateBlock = ([selectedDate day]-2)+firstWeekDay; 
```

# php - PHP：函数参数必须是具有动态类名的对象

> ID：15065241
> 
> 赞同：2
> 
> 时间：2013-02-25T10:49:56.263
> 
> 标签：php, class, function, dynamic, arguments

所以我是面向对象编程领域的新手，我目前正面临这个问题（代码中描述了一切）：

```
<?php
    class MyClass {
        // Nothing important here
    }

    class MyAnotherClass {
        protected $className;

        public function __construct($className){
            $this->className = $className;
        }
        public function problematicFunction({$this->className} $object){
            // So, here I obligatorily want an $object of
            // dynamic type/class "$this->className"
            // but it don't works like this...
        }
    }

    $object = new MyClass;
    $another_object = new MyAnotherClass('MyClass');

    $another_object->problematicFunction($object);
?> 
```

谁能帮我 ？

谢谢，马克西姆（来自法国：对不起我的英语）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T10:53:44.977

你需要的是

```
public function problematicFunction($object) {
    if ($object instanceof $this->className) {
        // Do your stuff
    } else {
        throw new InvalidArgumentException("YOur error Message");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:03:06.583

这称为[类型提示](http://php.net/manual/en/language.oop5.typehinting.php)，只是不支持您想要做的事情。

如果所有这些动态类名有一些共同点（例如，它们是某些功能的不同实现），您可能想要定义一个基（可能是抽象）类或接口，并使用该共同祖先作为类型提示：

```
<?php

interface iDatabase{
    public function __contruct($url, $username, $password);
    public function execute($sql, $params);
    public function close();
}

class MyClass implements iDatabase{
    public function __contruct($url, $username, $password){
    }

    public function execute($sql, $params){
    }

    public function close(){
    }
}

class MyAnotherClass {
    protected $className;

    public function __construct($className){
        $this->className = $className;
    }
    public function problematicFunction(iDatabase $object){
    }
} 
```

否则，只需将支票移至`problematicFunction()`正文内，正如其他答案所解释的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:54:52.557

像这样试试

```
class MyClass {
    // Nothing important here
    public function test(){
        echo 'Test MyClass';
    }
}

class MyAnotherClass {
    protected $className;

    public function __construct($className){
        $this->className = $className;
    }
    public function problematicFunction($object){
        if($object instanceof $this->className)
        {
            $object->test();
        }
    }
}

$object = new MyClass;
$another_object = new MyAnotherClass('MyClass');

$another_object->problematicFunction($object); 
```

# iphone - 在 ios 6 及更高版本中崩溃 -[MKStoreManager provideContent:forReceipt:]

> ID：15065242
> 
> 赞同：2
> 
> 时间：2013-02-25T10:49:57.560
> 
> 标签：iphone, ios6, crash, in-app-purchase, mkstorekit

我的应用程序是非消耗型的。

应用程序在 iOS 6 及更高版本上崩溃。它在用户的设备上崩溃，但在测试设备上没有。

崩溃日志这样说：

```
异常类型：SIGTRAP  
异常代码：#0 在 0x3350316c  
崩溃的线程：0  

线程 0 崩溃：  
0 核心基础 0x3350316c _CFHash + 8  
1 核心基础 0x00002b50 CFBasicHashFindBucket + 1892  
2 核心基础 0x33503a8b _CFDictionaryGetValue + 83  
3 核心基础 0x0004a7a7 -[CFXPreferencesPropertyListSource setValue:forKey:] + 39  
4 核心基础 0x0004a723 _CFXPreferencesSetValue + 135  
5 核心基础 0x3354a601 _CFPreferencesSetAppValue + 41  
6 基础 0x00009907 -[NSUserDefaults(NSUserDefaults) setObject:forKey:] + 83  
7 myAppName 0x00038287 -[MKStoreManager 提供内容:forReceipt:] (MKStoreManager.m:311)  
8 myAppName 0x000387b1 -[MKStoreObserver restoreTransaction:] (MKStoreObserver.m:88)  
9 myAppName 0x000385e1 -[MKStoreObserver paymentQueue:updatedTransactions:] (MKStoreObserver.m:64)  
10 StoreKit 0x0000404d __NotifyObserverAboutChanges + 85  
11 核心基础 0x3350874d _CFArrayApplyFunction + 177  
12 StoreKit 0x00003fe9-[SKPaymentQueue _notifyObserversAboutChanges:sendUpdatedDownloads:] + 129  
13 StoreKit 0x000048af-[SKPaymentQueue_processUpdates:trimUnmatched:sendUpdatedDownloads:] + 999  
14 StoreKit 0x00004f8d-[SKPaymentQueue _setTransactionsWithReply:] + 157  
15 StoreKit 0x00003b8b __block_global_0 + 63  
16 libdispatch.dylib 0x0000211f _dispatch_call_block_and_release + 11  
17 libdispatch.dylib 0x000014b7 _dispatch_client_callout + 23  
18 libdispatch.dylib 0x000061bd _dispatch_main_queue_callback_4CF$VARIANT$mp + 225  
19 核心基础 0x00095f3b __CFRunLoopRun + 1291  
20 核心基础 0x33508ebd _CFRunLoopRunSpecific + 357  
21 核心基础 0x33508d49 _CFRunLoopRunInMode + 105  
22 图形服务 0x370bb2eb _GSEventRunModal + 75  
23 UIKit 0x3541e301 _UIApplicationMain + 1121  
24 myAppName 0x0000260f 主 (main.m:20)  

```

此应用程序支持 iOS 4.3 及更高版本。

我尝试了很多方法，但找不到合适的解决方案。有人知道我如何解决这个问题吗？我应该使用其他代码进行应用内购买吗？

# maven - 使用 maven-shade-plugin，如何使用 dependencyReducedPom？

> ID：15065247
> 
> 赞同：2
> 
> 时间：2013-02-25T10:50:28.057
> 
> 标签：maven, maven-shade-plugin

我正在开发一个开源项目（[neo4j-connector](https://github.com/alexsmirnov/neo4j-connector)），它大量使用[maven-shade-plugin](https://maven.apache.org/plugins/maven-shade-plugin/index.html)将 neo4j 应用程序包含在打包的 RAR 中，而不引用多个 jars（似乎是 maven-rar-plugin 的限制）。

无论如何，这样做时，[neo4j-connector-impl](https://github.com/alexsmirnov/neo4j-connector/blob/master/neo4j-connector-impl/pom.xml)（它使用 shade 插件）pom 将 neo4j 引用为依赖项，这并不完全准确，因为 neo4j 源代码嵌入在 neo4j-connector-impl jar 中。

我注意到有一个[`createDependencyReducedPom`](https://maven.apache.org/plugins/maven-shade-plugin/shade-mojo.html#createDependencyReducedPom)标志允许生成仅包含非阴影组件的 pom。我如何使用该 pom 而不是标准的 pom 来获取该项目的依赖项？

# javascript - 在 vanillaJS 中使用 jsonP，除了在 IE 中之外效果很好

> ID：15065248
> 
> 赞同：3
> 
> 时间：2013-02-25T10:50:31.960
> 
> 标签：javascript, cross-domain, jsonp

我的脚本有一些问题，我正在使用 jsonP 请求创建一个指向我的第二个域的脚本标记，如下所示：

```
recupDataScript = function() {
    var otherDomain = "http://www.otherdomain.com/check?q=recupData",
    script = document.createElement('script'),
    script.type = 'text/javascript';
    script.async = true;
    script.src = otherDomain;
    document.getElementsByTagName('HEAD')[0].appendChild(script);
    }
} 
```

在我用这个简单的函数得到我的数据之后：

```
window.recupData = function(data){
    alert(data);
} 
```

我的第二个域的页面上有一个发送 jsonP 答案的 PHP 脚本。

在所有浏览器中，我得到答案对象对象，而在 IE（7、8 或 9）中，我得到未定义的答案，除非我在 IE 的设置中检查了 cookie 的自动管理，但默认情况下没有设置。

我已经使用 jQuery 脚本进行了测试：

```
jQuery.getJSON("http://www.otherdomain.com/check?q=?",
   function(data) {
      alert(data);
   }); 
```

我遇到了同样的问题（除了在 IE 上到处都可以工作）

但是当我使用我的脚本时，我无法获得 flickr 我在 IE 和其他上得到了同样好的答案。但是我不能用我自己的脚本得到好的答案，也许我可以解决这个问题，探索在没有jQuery的情况下获取flickr的jsonP的方法。

# android-maps-v2 - Android google map Api sha1 和包错误

> ID：15065250
> 
> 赞同：0
> 
> 时间：2013-02-25T10:50:36.820
> 
> 标签：android-maps-v2, api-key

API_KEY 我试过但 sha-1；我的包裹不被接受

错误是 [您的输入无效]。

这是我的 sha-1 ![在此处输入图像描述](../Images/fbef452db720760e1b3aaef98e3aec84.png)

AndroidManifest.xml

```
<meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyBxxa0zIyuP2OJXldb-FUoGSSDcfbryVbA"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:20:44.553

我得到了 Sha1 和 packege

我有 Api 密钥

# sql - 在 SQL Server 中将身份设置为打开或关闭

> ID：15065253
> 
> 赞同：20
> 
> 时间：2013-02-25T10:50:48.520
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2005

我想将列的 Is Identity 属性设置为关闭，然后在插入一个显式值后再次将其设置为打开。我写了这个查询：

```
SET IDENTITY_INSERT Tbl_Cartoons OFF 
```

尽管它成功执行，但表格设计没有任何变化。请提出一个解决方案，这真的很关键。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-25T11:00:19.957

您实际上想`SET IDENTITY_INSERT Tbl_Cartoons ON`在尝试插入显式值之前使用。

您是说“**我**将负责将值插入`IDENTITY`列”。

`SET IDENTITY_INSERT Tbl_Cartoons OFF`说“我会让系统负责将值插入`IDENTITY`列”。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-02-25T11:13:34.450

要将显式值插入标识列，请执行以下操作：

```
SET IDENTITY_INSERT Tbl_Cartoons  ON
GO

-- code to insert explicit ID values

SET IDENTITY_INSERT Tbl_Cartoons  OFF
GO 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-25T10:54:33.877

您给出的所有行都是禁用标识，以便您可以将特定值插入您的标识列 - 通常这是一次性的，例如移动数据。身份仍然存在于列上，只是没有被执行。从概念上讲，这类似于禁用和删除触发器之间的区别。

从列中完全删除标识更难。[问题涵盖了它](https://stackoverflow.com/questions/8230257/sql-server-remove-identity-from-a-column-in-a-table)，但基本思想是您必须创建一个新列，复制数据，然后删除标识列。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-02-25T10:54:44.267

`SET IDENTITY_INSERT`允许设置的会话输入显式值。

但该列仍然是一个标识列。只是您的会话可以忽略身份约束。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T10:55:21.580

设置 identity_insert 以能够显式设置 id 列的值。再次将其设置为自动分配。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-13T04:00:08.257

您*可以*关闭 Identity 属性，但它涉及编辑系统表，这不是一个好的做法。您也不太可能拥有必要的权限，并且可能会看到`You do not have permission to run the RECONFIGURE statement`尝试以下代码：

```
DECLARE @tableName nvarchar(128) = 'YourTable';

-- Get a list of identity columns (informational)
SELECT OBJECT_NAME(object_id) tableName, sc.name colName, st.name dataType
FROM sys.columns sc
JOIN sys.types st
    ON st.system_type_id = sc.system_type_id
WHERE sc.is_identity = 1
AND OBJECT_NAME(object_id) = @tableName

-- Allow ad-hoc changes to system catalogs
EXEC  sp_configure 'allow update', 1
GO
reconfigure with override
GO
-- Eliminate the identityness
UPDATE syscolumns SET colstat = colstat - 1
WHERE id = object_id(@tableName)
AND name = 'Id' -- Specify column if you like, though only one identity per table is currently supported
GO
-- Unallow ad-hoc changes to system catalogs
exec sp_configure 'allow update', 0
GO
reconfigure with override
GO 
```

# android - 来自layoutInflate中ImageView的getId（）

> ID：15065259
> 
> 赞同：0
> 
> 时间：2013-02-25T10:51:05.570
> 
> 标签：android, layout-inflater

当我单击我的`ImageView`时，它不会返回单击图像的 ID，而是返回最后添加的图像。有`13`，总是返回我`12`（0-12）。我不明白我做错了什么。这是我的代码：

```
ImageView imgBook = null;
tlList = (TableLayout) findViewById(R.id.tl_list1);

public void loadList(){
    for (int o = 0; o < studies.size(); o++) {
        LayoutInflater li_est = (LayoutInflater) getSystemService(
                Context.LAYOUT_INFLATER_SERVICE);

        if (LoginVO.app==0) {
            vEst = li_est.inflate(R.layout.details1, null);
        } else if (LoginVO.app==1) {
            vEst = li_est.inflate(R.layout.details2, null);
        } else if (LoginVO.app==2) {
            vEst = li_est.inflate(R.layout.details3, null);
        }

        imgBook = (ImageView) vEst.findViewById(R.id.est_img_libro);
        imgBook.setId(o);
        tlList.addView(vEst);

        imgBook.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                idColumn=imgBook.getId();
                Log.e("TAG","ID COLUMN: "+idColumn);
            }
        }); 
```

**`idColumn`总是`12`**，数组的总大小。

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:30:18.267

你需要做这样的事情：

```
imgBook.setTag(o);
        imgBook.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                int id = Integer.parseInt(v.getTag().toString());
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:54:33.113

您需要了解导致该事件的视图。

```
ImageView imgViewClicked = (ImageView) v; 
```

否则，您只是使用 imgBook 变量，该变量在 for 循环中始终具有 o 的最后一个值。

# sql-server - 根据经验进行过滤的sql查询

> ID：15065262
> 
> 赞同：0
> 
> 时间：2013-02-25T10:51:11.597
> 
> 标签：sql-server, tsql, sorting

我有这张桌子

```
 CREATE TABLE [dbo].[HRCandidateProject](
[ProjectId] [bigint] IDENTITY(1,1) NOT NULL,
[orgid] [int] NULL,
[uid] [int] NULL,
[CandidateId] [bigint] NULL,
[FirstName] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[LastName] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[ProjectName] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[FromDate] [datetime] NULL,
[ToDate] [datetime] NULL,
[SkillSet] [varchar](250) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[Role] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[Client] [varchar](50) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[ProjectDiscription] [varchar](500) COLLATE SQL_Latin1_General_CP1_CI_AS NULL,
[TotalExperience][int]
      CONSTRAINT [PK_HRCandidateProject] PRIMARY KEY CLUSTERED 
   (
[ProjectId] ASC
    )WITH (IGNORE_DUP_KEY = OFF) ON [PRIMARY]
    ) ON [PRIMARY] 
```

在下拉列表中，我的总经验值 1-2 年、2-4 年、4-7 年、7 年以上

我想编写一个查询，如果我在下拉列表中选择 1-2 年，它将显示数据，它必须只显示那些在 1 到 2 年之间有经验的候选人

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:29:03.420

通过如下设置地图来定义下拉列表值：

```
<asp:DropDownList ID="Experience" runat="server">
    <asp:ListItem Value="1">1-2 Years</asp:ListItem>
    <asp:ListItem Value="2">2-4 Years</asp:ListItem>
    <asp:ListItem Value="3">4-7 Years</asp:ListItem>
    <asp:ListItem Value="4">More than 7 Years</asp:ListItem>
</asp:DropDownList> 
```

在您的查询中，检查 OR 分支中的每个值，如果该值与所选值匹配，则根据经验进行过滤：

```
SELECT  *
FROM    HRCandidateProject
WHERE   
    (
        @SelectedExperience = 1
        AND TotalExperience BETWEEN 1 AND 2
    )
    OR  (
        @SelectedExperience = 2
        AND TotalExperience BETWEEN 2 AND 4
    )
    OR  (
        @SelectedExperience = 3
        AND TotalExperience BETWEEN 4 AND 7
    )
    OR  (
        @SelectedExperience = 4
        AND TotalExperience > 7
    ) 
```

有几点需要注意：

*   您应该将其放在存储过程中或与参数内联执行，不要将下拉列表中的选定值连接到查询中。一个快速的谷歌搜索，你应该找到如何参数化你的查询。
*   根据您问题的参数，返回的值将重叠。具有 2 年经验的候选人将同时出现在第一个和第二个结果集中，等等。如果这是不受欢迎的行为，您应该能够调整此标准以防止出现这种情况。
*   不要使用 SELECT * 进行生产，输入所有列名。

# javascript - 隐藏具有显示属性或左/上的元素？

> ID：15065265
> 
> 赞同：2
> 
> 时间：2013-02-25T10:51:27.637
> 
> 标签：javascript, jquery, css

我见过许多插件/库，包括 jQuery mobile，为了隐藏元素更改它的 left 和/或 top 属性，如下所示：

```
div {
   left : 99999px;
   top : 99999px;
} 
```

现在这种情况很多时候会弄乱我的代码，因为它并不总是消失，有时会增加该属性的滚动条，所以我发现自己编辑了几个插件和 css 来隐藏元素使用`display:none;`

而且我一直想知道人们是否有理由选择这样做而不是切换显示属性，或者这只是上述开发人员的不良做法。

这两种方法之间有什么性能差异吗？是否有任何 javascript 代码无法在隐藏元素上运行？更好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:05:10.780

TLDR；: 屏幕阅读器

以下是使元素不可见的不同方法：

*   `display:none;`将元素从流中取出。文档呈现为好像该元素不存在一样。所以该元素**不会被屏幕阅读器发声**。

*   然后你有`visibility:hidden`which 使盒子不可见，**但仍然影响 layout**。

*   最后，您可以使用诸如绝对定位和偏移量之类的技巧，以使元素消失**而不影响布局**，同时仍然**发出声音**。这是取自 HTML5 Boilerplate 的示例：

    ```
    .visuallyhidden {

        border: 0;
        clip: rect(0 0 0 0);
        height: 1px;
        margin: -1px;
        overflow: hidden;
        padding: 0;
        position: absolute;
        width: 1px;
    } 
    ```

# android - 我怎样才能得到 PIN2 号码？

> ID：15065268
> 
> 赞同：0
> 
> 时间：2013-02-25T10:51:32.193
> 
> 标签：android

用户若要开启“固定拨号”功能，必须输入SIM卡的PIN2。所以手机必须保存SIM卡的PIN2，然后判断PIN2是否正确。我想问有没有一些API可以在Android上获取PIN2号？或者电话模块使用其他解决方案来获取 PIN2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:21:49.923

如果您指的是黑莓手机上的 PIN 码，则没有。Android 手机只有 IMEI（国际移动站设备识别码）号码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:23:50.663

好吧，在大多数情况下，不可能获得电话号码，因为此信息未存储在设备上，我相信 PIN 码也是如此，所有数据都存储在运营商数据库中。

# php - 需要在线电子商务网站的建议

> ID：15065269
> 
> 赞同：0
> 
> 时间：2013-02-25T10:51:33.470
> 
> 标签：php, codeigniter, payment-gateway, payment-processing

我在 codeigniter 中开发了我的 Dad Bookshop 网站。我已经完成，直到将书籍添加到购物车并显示其总价，即用户必须注册/登录才能继续将书籍添加到卡丁车。

现在我被困在付款工作中。我爸爸说“客户应该可以在线支付，客户`payment_received`付款成功后我必须将客户ID保存到我的表中。

这样我们就可以在看到表中的客户后将书籍发送给客户`payment_received`。

所以请帮助我。我对这些东西很困惑。请给我一些建议来实施支付的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:55:59.790

去支付宝网关的方式。您将获得更多有关将 pay-pal 与您的网站集成的在线帮助。非常安全的支付网关，易于开发人员设置。

# csv - CSV 列到 Unix 时间戳

> ID：15065270
> 
> 赞同：0
> 
> 时间：2013-02-25T10:51:46.093
> 
> 标签：csv, unix-timestamp

我有一列 TimeStamps 看起来像这样

2012-12-14 22:22:00

2012-12-14 21:55:00

2011-09-21 13:21:00

我想创建另一列或替换包含各个日期时间时间戳的 Unix 时间戳的列。

# django - Django Sentry 导入错误

> ID：15065277
> 
> 赞同：3
> 
> 时间：2013-02-25T10:52:10.333
> 
> 标签：django, sentry, raven

我刚刚安装了 django-sentry 并计划用它来登录我的 django 项目。但是我遇到了障碍。

每当我尝试记录错误时，这就是我得到的错误：

```
 Unable to record event: cannot import name Group 
```

我正在使用的相关堆栈：

```
 django-paging   - 0.2.4
    django-indexer  - 0.3.0
    django-templatetag-sugar - 0.1
    django-sentry   - 1.13.5 
    raven           - 3.1.15 
    eventlet        - 0.12.1
    greenlet        - 0.4.0 
    lockfile        - 0.9.1   
    python-daemon   - 1.6 
```

这就是我所做的：

```
 import logging
    logger=logging.getLogger('sentry.error')
    logger.error('error message') 
```

settings.py 中定义的日志记录设置：

```
 SENTRY_LOGGING = {
        'version': 1,
        'disable_existing_loggers': True,
        'root': {
            'level': 'WARNING',
            'handlers': ['sentry']
        },
        'formatters': {
            'verbose': {
                'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s'
            }
        },
        'handlers': {
            'sentry': {
                'level': 'DEBUG',
                'class': 'raven.contrib.django.handlers.SentryHandler'
            },
            'console': {
                'level': 'DEBUG',
                'class': 'logging.StreamHandler',
                'formatter': 'verbose'
            },
            'mail_admins': {
                'level': 'ERROR',
                'class': 'django.utils.log.AdminEmailHandler'
            }
        },
        'loggers': {
            'django.db.backends': {
                'level': 'ERROR',
                'handlers': ['console'],
                'propagate': False
            },
            'raven': {
                'level': 'DEBUG',
                'handlers': ['console'],
                'propagate': False
            },
            'sentry.errors': {
                'level': 'DEBUG',
                'handlers': ['console'],
                'propagate': False
            },
            'django.request': {
                'handlers': ['mail_admins'],
                'level': 'ERROR',
                'propagate': True
            }
        }
    } 
```

异常的堆栈跟踪：

```
 ERROR 2013-02-25 16:07:56,938 client 17887 140238506051328 Unable to record event: cannot import name Group
    Traceback (most recent call last):
      File "/home/user/src/virtualenv/lib/python2.7/site-packages/raven/contrib/django/client.py", line 148, in send
        return self.send_integrated(kwargs)
      File "/home/user/src/virtualenv/lib/python2.7/site-packages/raven/contrib/django/client.py", line 153, in send_integrated
        from sentry.models import Group
    ImportError: cannot import name Group 
```

我试图弄清楚出了什么问题，但直到现在还没有运气。我的预感是可能是 Raven 和 Sentry 之间的版本问题。

如果您知道可能导致问题的原因，请帮助我。

如果我错过了一些信息，请告诉我。

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-18T13:24:50.053

这是因为哨兵和乌鸦的版本冲突。请在安装时检查版本。我用的是乌鸦 3.3.3。

# python - Python：查找所有具有约束元素的元组，这些元素加起来是一个常数

> ID：15065278
> 
> 赞同：1
> 
> 时间：2013-02-25T10:52:11.093
> 
> 标签：python, vector, iteration, combinations

假设给定一个长度为 4 的向量，其中包含最小值 (0,0,0,0) 和最大值 (2,1,3,2)。我想找到这个范围内的所有整数向量，例如，5。

以下代码实现了这一点：

```
maxvalues = (2,1,3,2)
k = 5
t = []
for x1 in range(maxvalues[0]+1):
    for x2 in range(maxvalues[1]+1):
        for x3 in range(maxvalues[2]+1):
             for x4 in range(maxvalues[3]+1):
                  if x1+x2+x3+x4 is k:
                      t.append((x1,x2,x3,x4)) 
```

但是，此代码不能很好地推广到更大的向量，并且似乎效率低下。有没有人有一个很好的方法来概括这一点？

编辑：小错误，忘记了if语句

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:54:56.810

利用`itertools.product`

```
from itertools import product

for x1, x2, x3, x4 in product(*(range(i+1) for i in maxvalues)):
    t.append((x1, x2, x3, x4)) 
```

`product`尽管直接将对象转换为列表要好得多（也更通用） 。

```
t = list(product(*(range(i+1) for i in maxvalues))) 
```

包含`if`声明后，它看起来像这样。

```
t = [i for i in product(*(range(i+1) for i in maxvalues)) if sum(i) == k] 
```

# javascript - 插入 SQLite 数据库时难以转义单引号字符

> ID：15065280
> 
> 赞同：2
> 
> 时间：2013-02-25T10:52:14.893
> 
> 标签：javascript, android, sqlite, titanium

我必须在数据库中插入某些文本，这些文本可能包含带单引号和双引号的字符。

例如：**“Lumix”**或类似**Vijay 的**

我已经成功地逃脱了这样的双引号：

```
if(fdata.search('"') != -1) {

fdata = fdata.replace(/(['"])/g, "\\$1");

} 
```

但我不明白如何转义单引号。不转义单引号 SQLite 不接受数据。如何解决问题？提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T12:01:39.623

使用参数，那么你不需要转义任何东西：

```
db.execute('INSERT INTO MyTable(ID, Name) VALUES(?, ?)', 123, name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-06T14:00:17.227

CL. 的答案是迄今为止最好的解决方案，但如果你想在不重写代码的情况下完成这项工作，你可以添加这个函数：

```
function removeQuotes(str){
return str.replace(/'/g, "&#39;").replace(/"/g,"&quot;");
} 
```

用法：

```
fdata = removeQuotes(fdata); 
```

这对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T10:54:37.653

使用`replaceAll`方法替换`'(single quote)`如下`space`：

```
 String name= name.replaceAll("'", "''"); 
```

# python - 用python解析输入的csv文件，得到输出的sql文件

> ID：15065284
> 
> 赞同：1
> 
> 时间：2013-02-25T10:52:21.793
> 
> 标签：python, csv, python-3.x

基本上我在 Python 3.2 中要做的是读取包含 3 列的输入 csv 文件，然后创建一个 sql 输出文件，其中输入文件中每行中的 3 个数据将作为插入查询中的参数：

我的代码如下所示：

```
import os  
import csv  

InFileName = r'path\test.csv'  
OutFileName = r'path\test.sql'  
NumCommas = 0  

File = open(InFileName)  
for line in File:  
    if line.count(',') > NumCommas:  
        NumCommas = line.count(',')  
File.seek(0)  

reader = csv.reader(File)  
OutFile = open(OutFileName, 'w')  
for rows in reader:  
    OutFile.write("insert into table_name values(",rows[0],", 2, to_date(",   rows[1],",'YYYY-MM-DD'), 1, 1, -1, 0, ",rows[2],", ",rows[2],", 0, 0, 0, sysdate, 0);" +   '\n')  

OutFile.close()  
File.close() 
```

我得到了错误：

> 列表索引超出范围

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:00:45.793

`rows`在您的`rows in reader`区块内登录。您可能在 csv 的文件末尾（或开头）只有一个空行。

这意味着该`rows`行的数组将为空，`rows[0]`或`rows[2]`位将尝试访问该行不存在的列：

```
for rows in reader:
    print rows # check yourself before you wreck yourself 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T13:47:43.180

使用您的代码

```
NumCommas = 0  

File = open(InFileName)  
for line in File:  
    if line.count(',') > NumCommas:  
        NumCommas = line.count(',') 
```

you determine and remember the *maximum* number of commas in one line of all lines of your input file. Afterwards you're not even using that information to validate your input.

Jack already made the point: Validate your input:

```
for (lineno, row) in enumerate(reader):
    if len(row) >= 3:
        OutFile.write("insert into table_name values(",row[0],", 2, to_date(",   row[1],",'YYYY-MM-DD'), 1, 1, -1, 0, ",row[2],", ",row[2],", 0, 0, 0, sysdate, 0);" +   '\n')
    else:
        print("Line {0} does not contain at least three columns: {1}".format(lineno, row)) 
```

You don't really need the first loop to count commas. Generally speaking, file I/O is a performance limitation to any computing application. Don't do it twice if you don't have to.

Also, generally speaking, always post full error messages. I'm sure Python gave you line numbers and lines of code which makes it easier for folks here to help.

# php - 在灯箱中显示数据

> ID：15065285
> 
> 赞同：2
> 
> 时间：2013-02-25T10:52:31.023
> 
> 标签：php, javascript

![在此处输入图像描述](../Images/ed1061db64644430af85bdde54a7146b.png)

我想在灯箱中显示点击红色圆圈图像的相关数据，但是当我点击它时，它总是在表中第一条记录的灯箱中显示数据我想显示点击的关注记录，我的代码在 JavaScript 中我有写下这几行代码

```
 <script>
 function manageLightbox(visibility,id) {
 document.getElementById('overlay').style.display = visibility;
 document.getElementById('content').style.display = visibility;
 }
 </script> 
```

我在我的 html 中调用了这个函数

```
<a href="#"><img src="images/core/icon16/zoom.png" title="View" onClick="return manageLightbox('block','<?php echo $res['id']?>');" /></a> 
```

我的灯箱的html就在这里

```
<div id="content" class="content">
<a href = "javascript:void(0)" onClick="return manageLightbox('none')">
<img  src="images/images1.jpeg" style="width:25px; height:25px; float:right"/></a>
<br/>
<center>
    <table>
        <tr>
           <td>Product_ID</td>
           <td><input type="text" name="product_id" value="<?php echo $row['id']; ?>"/></td>
        </tr>
        <tr>
            <td>Name</td>
            <td><input type="text" name="name" value="<?php echo $row['name']; ?>"/></td>
        </tr>
      //and all other fields in light box ....
    </table>
</center>
</div>
<div id="overlay" class="overlay" onClick="return manageLightbox("")></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T08:12:52.573

首先，您在通话中使用了 $res，而您认为 $row 可能是错误的名称？二、你用AJAX吗？使用 Jquery，您可以轻松地进行 AJAX 调用并将数据放入您想要的位置。所以：使用 $res["id"] 作为您想要的数据的数据，（例如返回表格）并将其包含在您的 div 内容中。

您只看到第一个的原因是因为您分配了多个具有相同名称的 div，javascript 将返回具有给定名称的第一个元素。通过使用 AJAX，您可以拨打电话，信息将包含在您查看的唯一 div“内容”中。

例子：

```
<script>
$(".link_zoom").click(function(){ //add class to a href: class='link_zoom', when click, trigger event
   $.ajax({
      type: 'POST'
      url: "someaction.do.php",
      data: "id=" + $(this).attr("id"), //add to the a href: id='<?php echo $res["id"]; ?>'
      dataType: "html",
      success: function(html) 
      { 
        $(".content").html(html); //will add the html to the content div
      }
   });
});
</script> 
```

# android - Eclipse 在设备上安装 Android 应用程序停止工作

> ID：15065286
> 
> 赞同：0
> 
> 时间：2013-02-25T10:52:44.777
> 
> 标签：android, eclipse

我更新了 SDK 工具，现在该应用程序将不再安装到设备上。我还更改了应用程序的名称

日志猫：

```
[2013-02-25 12:51:11 - TVR] Uploading TVR.apk onto device 'c1607234sdsdf'
[2013-02-25 12:51:11 - TVR] Installing TVR.apk...
[2013-02-25 12:51:13 - TVR] Success!
[2013-02-25 12:51:13 - TVR] /TVR/bin/TVR.apk installed on device
[2013-02-25 12:51:13 - TVR] Done! 
```

该应用程序不在设备上的任何位置！

正如你所看到的，这个过程大约在 2 秒内发生，所以它并没有真正做任何事情！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:05:51.527

确保您已使用 Launcher 的 Intent Filter 更新您的清单。

# c# - 如何恢复具有地形类型（水，森林，平原..）Google / Bing地图的2D地图？

> ID：15065288
> 
> 赞同：2
> 
> 时间：2013-02-25T10:52:52.213
> 
> 标签：c#, google-maps, geolocation, bing-maps, terrain

我想知道是否可以在 Google Maps 或 Bing Mag**上的 2D/3D 地图上恢复****地形类型**（山脉、森林、水域、平原等......）。为了**从玩家在现实世界的位置生成地图！** 我认为可用 API 谷歌地图和必应的数量是可能的，但我不知道在哪里看......

 ****这是我搜索的示例

“位置”：{“纬度”：39.73915360，“长”：-104.98470340}

![在此处输入图像描述](../Images/a24d4bfe2d64d5e488422df338e34b7f.png)

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:30:29.150

你可能对 Alastair 的博文感兴趣，我的伙伴：

[http://alastaira.wordpress.com/2012/03/14/creating-the-legend-of-zelda-map-tiles-from-bing-maps-aerial-imagery/](http://alastaira.wordpress.com/2012/03/14/creating-the-legend-of-zelda-map-tiles-from-bing-maps-aerial-imagery/)

![Alastair Aitchison 的 Bing Maps 8 位图](../Images/fcc87b042437770264bb047c619ae72d.png)

如果您想这样做，您也可以尝试查找 Corine Land Cover 数据以便能够生成地图，而无需使用不专门用于此类用途的商业平台。****

# jquery - 在jquery中使用jqueryAjax的响应元素

> ID：15065289
> 
> 赞同：0
> 
> 时间：2013-02-25T10:52:54.173
> 
> 标签：jquery, httpresponse, getelementbyid

我的项目首先有两个功能：

```
function send(method,url,data,content_id,show_wait,small,aaa)
{
    if(content_id!='multipart'&&show_wait)
    {
        if(typeof(small) === 'undefined'){
            showwait(content_id);
        }else{
            smallshowwait(content_id);
        }
    }
    var XMLHttp=new XMLHttpRequest(); // is XMLHttpRequest httprequest class
    XMLHttp.onreadystatechange = function()
    {
        if(XMLHttp.readyState == 4 && XMLHttp.status == 200)
        {
            //alert(XMLHttp.responseText);
            if(content_id!='multipart')
            {
                MyResponse = XMLHttp.responseText.split('#$$#');
                if(typeof(aaa) === 'undefined'){
                    document.getElementById(content_id).style.display="none";
                    $(document.getElementById(content_id)).fadeIn("slow");
                }
            }
        }
    }
} 
```

第二个功能是：

```
function aya(method,url,data,divid,isresponse){
    $(document).ready(function(){
        send(method,url,data,divid,isresponse,'small','aaa');
        $(document).ready(function(){
            alert('test');
            addActiveClass('inbox');
            send(method,'messages/showmessage.php',data,'messagecontent',true);
        });
    });
} 
```

第二个功能正常工作。但是当我想删除`alert('test');`错误时。在萤火虫错误显示：

> document.getElementById(...) 为 null
> 有办法删除警报吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T07:57:14.387

您可以将您的代码从：

```
alert('test');
addActiveClass('inbox');
send(method,'messages/showmessage.php',data,'messagecontent',true); 
```

至 ：

```
setTimeout(function(){
        addActiveClass('inbox');
    },200);
    setTimeout(function(){
        send('post','messages/showmessage.php',data,'messagecontent',true);
    },1000); 
```

# javascript - 是否可以遍历 JavaScript 伪类的所有实例？

> ID：15065292
> 
> 赞同：0
> 
> 时间：2013-02-25T10:53:26.843
> 
> 标签：javascript, iteration, global, pseudo-class

我正在寻找一种方法（最好不构造将它们添加到的容器）来循环遍历 JavaScript 伪类的所有实例，而无需循环嵌套实例并递归遍历窗口对象的所有子对象。这是可能的还是我没有办法，只能创建一个数组来保存我想要访问所有实例的任何伪类的所有实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:51:27.573

这是不可能的，因为一个对象不知道其他对象从它继承了什么。这是一个单向关系（从对象/实例到原型）。

并非所有对象都可以通过递归访问`window`。您无权访问函数中的局部变量。

您必须手动跟踪创建的实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T18:12:31.420

设法使用以下代码解决了这个问题（并摆脱了为继承链中的每个继承创建对象的虚拟实例的需要）：

```
Object.defineProperty(Object.prototype, 'constructing', {
    enumerable: false,
    writable: true,
    value: false
});
Object.defineProperty(Object.prototype, 'construct', {
    enumerable: false,
    get: function () {
        if ((this === Object) || (this.constructor === Object)) { return; }
        if (this.constructing === false) {
            this.constructing = this.__proto__.constructor;
        }
        if (this.constructing.hasOwnProperty('instances')) { this.constructing.instances.push(this); }
        var c = this.constructing;
        if ('base' in c) {
            this.constructing = c.base;
            this.constructing.call(this);
        }
        if (c !== this.__proto__.constructor) {
            for (var i in c.prototype) {
                if (!this.__proto__.hasOwnProperty(i)) { this.__proto__[i] = c.prototype[i]; }
            }
        }
    }
});

function A() {
    this.construct;
    this.foo = 'foo';
}
function A_bar() { console.log(this.foo + 'foo'); }
A.prototype.constructor = A;
A.prototype.bar = A_bar;
A.instances = new Array();

function B() {
    this.construct;
    this.foo = 'bar';
    var base = this.__proto__.constructor.base.prototype;
}
function B_bar() { console.log('bar'); }
B.base = A;
B.prototype.constructor = B;
B.prototype.bar = B_bar;
B.instances = new Array();

document.write(A.instances.length);
document.write(B.instances.length);
var a = new A();
document.write(a.foo);
document.write(A.instances.length);
document.write(B.instances.length);
var b = new B();
document.write(b.foo);
document.write(A.instances.length);
document.write(B.instances.length);
var c = new B();
document.write(c.foo);
document.write(A.instances.length);
document.write(B.instances.length);
a.bar();
b.bar();
c.bar(); 
```

输出：

```
00foo10bar21bar32 
```

# c# - 尝试将一个案例放入两个对象的 GET SET List<>

> ID：15065295
> 
> 赞同：0
> 
> 时间：2013-02-25T10:53:35.927
> 
> 标签：c#, list, get, set, try-catch

好吧，我想将整个“TRY”写入以下 Get Set 方法

```
try
            {
                string PUBLICKEY = "";
                switch (Path.GetFileName(file).Substring(0, 2))
                {
                    case "00":
                        PUBLICKEY = "453453453453";
                        break;
                    case "01":
                        PUBLICKEY = "3453453453453";
                        break;
                    case "02":
                        PUBLICKEY = "4434534563453";
                        break;
                    case "03":
                        PUBLICKEY = "453453453453453";
                        break;
                    case "04":
                        PUBLICKEY = "453453453453453";
                        break;
                    case "06":
                        PUBLICKEY = "345345345345345";
                        break;
                    case "09":
                        PUBLICKEY = "3456456456466";
                        break;
                    case "11":
                        PUBLICKEY = "4564564564";
                        break;
                    case "13":
                        PUBLICKEY = "456456456546564";
                        break;
                    case "15":
                        PUBLICKEY = "464565464565456464456";
                        break;
                    case "17":
                        PUBLICKEY = "456465564564546";
                        break;
                    case "19":
                        PUBLICKEY = "213134378";
                        break;
                    case "20":
                        PUBLICKEY = "456546456546564";
                        break;
                    case "21":
                        PUBLICKEY = "786786786876";
                        break;
                    case "26":
                        PUBLICKEY = "456456456456";
                        break;
                    case "28":
                        PUBLICKEY = "456786786786";
                        break;
                    case "34":
                        PUBLICKEY = "456546456";
                        break;
                    case "35":
                        PUBLICKEY = "456546456546";
                        break;
                    case "36":
                        PUBLICKEY = "456456464565465";
                        break;
                    case "37":
                        PUBLICKEY = "45655466456";
                        break;
                    default:
                        PUBLICKEY = "456456456456546"; //ZECHL
                        break;
                } 
```

（真正的公钥已被删除）

```
public class PublicKeys : List<PublicKey>
    {

    }

    public class PublicKey
    {
        public string CC { get; set; }
        public string publicKey { get; set; }
    } 
```

我只是一片空白，我无法再思考了......

我试过这样的事情：

```
 public class PublicKeys : List<PublicKey>
{
    public PublicKeys()
    {
        publicKeys();
    }
    private void publicKeys()
    {
        this.Add(new PublicKey("00", "456456"));
        this.Add(new PublicKey("01", "456456456"));
        this.Add(new PublicKey("02", "45654645"));
        this.Add(new PublicKey("03", "45645645646"));
        this.Add(new PublicKey("04", "456456546456"));
        this.Add(new PublicKey("06", "456456546456"));
        this.Add(new PublicKey("09", "456456456456"));
        this.Add(new PublicKey("11", "6456546456456"));
        this.Add(new PublicKey("13", "456456456456"));
        this.Add(new PublicKey("15", "45654645645"));
        this.Add(new PublicKey("17", "456456546456564"));
        this.Add(new PublicKey("19", "45645645645646565"));
        this.Add(new PublicKey("20", "456456456546456"));
        this.Add(new PublicKey("21", "4564565456645"));
        this.Add(new PublicKey("26", "456465564456"));
        this.Add(new PublicKey("28", "456456546456"));
        this.Add(new PublicKey("34", "465456546654"));
        this.Add(new PublicKey("35", "456456456456564"));
        this.Add(new PublicKey("36", "45654456456465"));
        this.Add(new PublicKey("37", "456456456456456"));

        //PUBLICKEY = "4566554656654456564564456564"; //ZECHL

    }

    public string GetKey(string cc)
    {
        return getKey(cc);
    }

    private string getKey(string cc)
    {
        string key = "";
        this.ForEach(pk =>
        {
            if (pk.CC == cc)
            {
                key = pk.publicKey;
            }
        }
        );
        return key;
    }
}

public class PublicKey
{
    public string CC { get; set; }
    public string publicKey { get; set; }

    public PublicKey()
    {
    }
    public PublicKey(string cc, string publicKey)
    {
        this.CC = cc;
        this.publicKey = publicKey;
    }
} 
```

任何建议将不胜感激..

TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:59:35.033

```
private string getKey(string cc)
{
    var key = this.Find(pk => pk.CC == cc);
    if (key == null)
        return defaultKey;

    return key.publicKey;
} 
```

顺便说一句，在 C# 中，我们使用 PascalCase 作为方法和属性名称。另外，我使用字典来存储`cc`和公钥对。您可以通过简单地检查 cc 是否存在`dictioary.ContainsKey(cc)`。

并考虑更好的名字。`PublicKey`带`PublicKey`属性的课程让我感到困惑。什么是`CC`？复写本？

* * *

考虑一些映射类，它包含字典而不是从列表继承。

```
public class PublicKeyMappings
{
    Dictionary<string, string> _mappings = new Dictionary<string, string>();
    string _defaultKey;

    public PublicKeyMappings AddMapping(string cc, string publicKey)
    {
        _mappings.Add(cc, publicKey);
        return this;
    }

    public PublicKeyMappings SetDefaultKey(string publicKey)
    {
        _defaultKey = publicKey;
        return this;
    }

    public string GetPublicKeyFor(string cc)
    {
        if (!_mappings.ContainsKey(cc))
            return _defaultKey;

        return _mappings[cc];
    }
} 
```

用法（流利的 API）：

```
var mappings = new PublicKeyMappings()
        .SetDefaultKey("4566554656654456564564456564")
        .AddMapping("00", "456456")
        .AddMapping("01", "456456456")
        .AddMapping("02", "45654645");

var key = mappings.GetPublicKeyFor("02"); 
```

# iphone - SearchDisplay 控制器未显示我的搜索结果

> ID：15065301
> 
> 赞同：3
> 
> 时间：2013-02-25T10:53:59.377
> 
> 标签：iphone, ios, objective-c, uitableview, uisearchdisplaycontroller

我正在尝试制作像 iPhone 联系人模块一样的联系人表格视图。我有一个按字母顺序排序的表格视图`header sections`（ABC-...）。现在我想搜索这个`tableview`。搜索后，我应该只有一个部分包含所有搜索结果。

我遇到的问题是它一直显示`"No results"`. 但是当我查看包含我的搜索结果的数组时，它包含正确的值。

现在是代码。

我的`CellForRowAtIndexPath`

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *kCellID = @"cellID";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellID];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellID];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }

    if (tableView == self.searchDisplayController.searchResultsTableView){
        NSLog(@"search tableview");

        Contact *contact = [self.filteredListContent objectAtIndex:indexPath.row];

        NSString *text = [NSString stringWithFormat:@"%@ %@",contact.name,contact.firstName];
        NSLog(@"CellForRowAtIndexPath contact text is %@",text);
        cell.textLabel.text = text;

        [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];

    }else{
        NSLog(@"standaard tableview");
    NSString *alphabet = [firstIndex objectAtIndex:[indexPath section]];

    //---get all states beginning with the letter---
    NSPredicate *predicate =
    [NSPredicate predicateWithFormat:@"SELF.name beginswith[c] %@",alphabet];
    NSArray *contacts = [listContent filteredArrayUsingPredicate:predicate];
    Contact *contact = [contacts objectAtIndex:indexPath.row];

    NSString *text = [NSString stringWithFormat:@"%@ %@",contact.name,contact.firstName];
    cell.textLabel.text = text;

       [cell setAccessoryType:UITableViewCellAccessoryDisclosureIndicator];
    }

    return cell;

} 
```

这是问题所在。当我在 IF this 中`self.searchDisplayController.isActive` 查看此日志`NSLog(@"CellForRowAtIndexPath contact text is %@",text)`时，它会为我提供正确的上下文名称。但是当我将 if 更改为此。`tableView == self.searchDisplayController.searchResultsTableView`然后它总是去 ELSE 部分。

我的`filterContentForSearchText`

```
 - (void)filterContentForSearchText:(NSString*)searchText scope:(NSString*)scope
    {
        NSLog(@"filterContentForSearchText called");
        /*
         Update the filtered array based on the search text and scope.
         */

        [self.filteredListContent removeAllObjects]; // First clear the filtered array.

        /*
         Search the main list for products whose type matches the scope (if selected) and whose name matches searchText; add items that match to the filtered array.
         */
        for (Contact *contact in listContent)
        {
            NSString *searchString = [NSString stringWithFormat:@"%@ %@",contact.name,contact.firstName];
            NSRange range = [searchString rangeOfString:searchText options:NSCaseInsensitiveSearch];
            if (range.location != NSNotFound) {
                [self.filteredListContent addObject:contact];
                [self.searchDisplayController.searchResultsTableView reloadData];
            }
        }
        NSLog(@"filterd list: %@",[self.filteredListContent valueForKey:@"name"]);

        [self.tableView reloadData];

    } 
```

此过滤列表填充了正确的搜索结果。

**编辑** 故事板的屏幕截图

![在此处输入图像描述](../Images/41eb613d59b6618fc0d2f90389aa300e.png)

**编辑搜索委托方法**

```
#pragma mark - UISearchDisplayController Delegate Methods
-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchString:(NSString *)searchString {
    // Tells the table data source to reload when text changes
    [self filterContentForSearchText:searchString scope:
     [[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:[self.searchDisplayController.searchBar selectedScopeButtonIndex]]];

    [self filterContentForSearchText:searchString scope:
     [[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:[self.searchDisplayController.searchBar selectedScopeButtonIndex]]];

    // Return YES to cause the search result table view to be reloaded.
    return YES;
}

-(BOOL)searchDisplayController:(UISearchDisplayController *)controller shouldReloadTableForSearchScope:(NSInteger)searchOption {
    // Tells the table data source to reload when scope bar selection changes
     [self filterContentForSearchText:self.searchDisplayController.searchBar.text scope:
     [[self.searchDisplayController.searchBar scopeButtonTitles] objectAtIndex:searchOption]];
    // Return YES to cause the search result table view to be reloaded.
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-31T09:50:26.873

尝试为您的联系人表视图控制器创建一个新的引用插座连接。

当我将两个搜索显示控制器放在一个视图控制器中时。只有一个搜索显示有效。好的有这个插座连接。见我[的帖子](https://stackoverflow.com/questions/18539827/how-to-create-two-search-display-ipad)。

# wordpress - 来自 wordpress 的 wp-eCommerce

> ID：15065306
> 
> 赞同：0
> 
> 时间：2013-02-25T10:54:12.783
> 
> 标签：wordpress, e-commerce

我试图将 WP eCommerce 集成到我的自定义 WordPress 网站之一。我已经尝试使用 PayPal 开发者帐户进行（假）计费，您知道，测试所有这些，我遇到的问题是，我可以输入付款并且几乎所有事情都通过，但是当我返回我的网站确认时，它总是导致“找不到页面”错误。

该页面将提供最终确认选项，以便交易通过。

我的问题是，我错过了什么？在我缺少的主题（如 404.php 或 single.php 或 page.php）中是否有需要的页面？

我迷路了，因为由于 paypal 不工作，我决定测试 authorize.net api 和开发工具，同样的事情发生了。我可以输入付款详细信息等，但是到了付款和确认时间时，它又回到了我的网站，找不到 404/页面。

我错过了什么？

先谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T18:53:19.257

您必须在 wordpress 中创建一个新页面并将其定义为 wpsc paypal 集成插件中的后备页面

# java - 为什么构造函数在下面的代码中不起作用？

> ID：15065311
> 
> 赞同：0
> 
> 时间：2013-02-25T10:54:27.153
> 
> 标签：java, swing, jtable, abstracttablemodel

在这里，我想使用构造函数动态分配表中的行数。datamodel 是类，datamodel(int count) 方法分配行数。

```
import javax.swing.table.AbstractTableModel;

@SuppressWarnings("serial")
public class datamodel extends AbstractTableModel{
    int row1;
    datamodel(int count){

        row1 = count;
        count = 0;
    }

    private String[] columnNames = {"Sl No","Material Code", "Material Name", "Select", "Received QTY", "Unit", "To Be Delivered", "PO No", "PO Sl"};//new String[9];
    //table has 100 rows and 9 columns
    private Object[][] data = new Object[row1][9]; 

    public int getColumnCount() { return columnNames.length; }
    public int getRowCount() { return data.length;}
    public String getColumnName(int col) {
        // TODO Auto-generated method stub
        return columnNames[col];
    }

    public Object getValueAt(int row, int col) {
        // TODO Auto-generated method stub
        return data[row][col];
    }

    @Override
    public void setValueAt(Object aValue, int row, int col) {
        // TODO Auto-generated method stub
        data[row][col] = aValue;
        fireTableCellUpdated(row, col);
    }

    public boolean isCellEditable(int rowIndex, int columnIndex) {
        // TODO Auto-generated method stub
        return true;
    }

    public Class getColumnClass(int col) {
        if((col == 4) || (col == 6))
            return Double.class;
            //return getValueAt(0, c).getClass();
        else if(col == 3)
            return Boolean.class;
        else
            return String.class;
    }
} 
```

这是一个抽象表模型，我想将行数传递给数据模型。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T10:56:37.517

```
int row1;
datamodel(int count){   
    row1 = count;
    count = 0;
} 
```

您将*局部变量* `count`设置为零。这对球场没有影响`row1`。

* * *

现在，在仔细查看您的代码之后。强烈建议：缩进你的代码，坚持命名约定并在文件顶部收集所有字段声明。然后我们更容易理解代码..

```
int row1;
private Object[][] data = new Object[row1][9];

datamodel(int count) {
    row1 = count;
    count = 0;
} 
```

您想要做的：使用构造函数传递值，以便初始化数组。您的方法不起作用，因为数组是在构造方法 get 执行*之前创建的。*所以你总是有一个 Object[0][9]，不管你用构造函数传递什么。

*您应该改为在*构造函数方法中创建数组：

```
int row1;
private Object[][] data;

datamodel(int count) {
    row1 = count;
    data = new Object[count][9];
} 
```

# android - 在 Fragment 轮换期间避免耗时的数据加载

> ID：15065312
> 
> 赞同：2
> 
> 时间：2013-02-25T10:54:28.823
> 
> 标签：android

`Fragment`我想避免在轮换期间加载耗时的数据。

```
public class WatchlistFragment extends SherlockListFragment {
    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        if (savedInstanceState == null) {
            data = getTimeConsumingData();          
        } else {
            Log.i(TAG, "savedInstanceState is not null!");
            // Avoid performing time consuming data operation during rotation changes.
            // But I never have chance to reach here !?!?
            data = savedInstanceState.getStringArray("data");
        }
        setListAdapter(new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1, data));
    }

    public String[] getTimeConsumingData() {
        Log.i(TAG, "WatchlistFragment getTimeConsumingData");
        return new String[] { "A", "B", "C"};
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        Log.i(TAG, "WatchlistFragment onSaveInstanceState");
        super.onSaveInstanceState(outState);
        outState.putStringArray("data", data);
    }

    private String[] data = null;
    private static final String TAG = WatchlistFragment.class.getSimpleName();
} 
```

奇怪的是，即使我执行了几次旋转，`savedInstanceState`in`onActivityCreated`也始终为空。

注意，我不喜欢使用`setRetainInstance(true)`所描述的[Android Fragments Retaining Data](https://stackoverflow.com/questions/11853389/android-fragments-retaining-data)作者正在使用`onSaveInstanceState`. 只是我不确定为什么我的不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:09:49.370

另一种方法是使用新的、超级聪明的 Loader 模式，它很容易实现并让系统为您处理所有这些：

[http://developer.android.com/guide/components/loaders.html](http://developer.android.com/guide/components/loaders.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:56:27.183

只需`setRetainInstance(true)`在您的片段中使用并检查`savedInstanceState==null`并且不要覆盖`onSaveInstanceState`

**更新**

```
 private ArrayAdapter<String> adapter = null;
 public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    setReatainInstance(true);
    if(adapter==null){
        adapter = new ArrayAdapter<String>(getActivity(), android.R.layout.simple_list_item_1,getTimeConsumingData());
    }
    setListAdapter(adapter);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T12:43:14.190

如果您正在使用加载器，请在加载数据后使用 loadermanager.destory(loader_id)。它不会再次加载以进行配置更改。

# c# - 从后面的代码关闭浏览器 - aspx

> ID：15065315
> 
> 赞同：0
> 
> 时间：2013-02-25T10:54:35.637
> 
> 标签：c#, asp.net

我有这个 aspx 页面，它工作得很好。

```
protected void Page_Load(object sender, EventArgs e)
{
   string clientID = Request.QueryString["ID"];
   string clientName = Request.QueryString["NAME"];
   folderSearch(clientID, clientName);
}
public void folderSearch(string clientID, string clientName)
{
    SYS.getInfo(searchDBInfo => 
   {
        string folderPath = searchDBInfo.sPath + "\\" + clientID + " - " + clientName;
        if (Directory.Exists(folderPath))
        {
            Process.Start(folderPath);
        }
        else
        {
           Directory.CreateDirectory(folderPath);
           Process.Start(folderPath);
        }
   });
} 
```

我希望运行 aspx 的浏览器窗口在显示后立即关闭。意味着用户应该看不到任何正在运行的浏览器，但它仍然可以在后台完成其工作。

请帮帮我！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:55:48.180

> 我希望运行 aspx 的浏览器窗口在显示后立即关闭。意味着用户应该看不到任何正在运行的浏览器，但它仍然可以在后台完成其工作。

它不在您的控制范围内，它是一个浏览器功能，您对此无能为力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T10:59:05.437

唯一的解决方案是使用带有 window.close() 的 Javascript（客户端），您将看到一个提示，显示“您要关闭此窗口”。

一种解决方案是在显示后“关闭”是在睡眠后重定向，您将没有提示。

注意：如果您的服务器端代码未完成，该页面将不会显示。

# android - 如何创建配置文件

> ID：15065317
> 
> 赞同：0
> 
> 时间：2013-02-25T10:54:43.987
> 
> 标签：android

我想开发一个应用程序以将其用作具有许多用户的启动器，在这个启动器中每个人都有他的一个应用程序。我编写了一个过滤器，用于为每个用户指定应用程序将使用的内容。但现在我希望文件列表将使用未与应用程序路径一起保存但在将在内部存储中创建的文件中的文件进行配置。因此，当我更改此文件中的列表时，我会更改应用程序列表而不编译 apk。但我需要其他应用程序可以编辑要写入的内部文件。但我不知道如何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:05:10.767

对于这样的事情，您肯定会想要使用 SQL 数据库，请阅读 Android 开发者网站上的存储选项主题：

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

# php - 如何使以下 $query 工作在 Enrollments.Quiz_id 上使用 DISTINCT 以摆脱双三重记录

> ID：15065323
> 
> 赞同：0
> 
> 时间：2013-02-25T10:54:55.550
> 
> 标签：php, mysql, distinct

```
SELECT SUM(ticketfee * enrolledplayers)
FROM Quiz
 INNER JOIN Enrollment on DISTINCT(Quiz.id) AND Quiz.id=Enrollment.Quiz_id
WHERE (Quiz.state=3 OR Quiz.state=4) AND Enrollment.promocoupon_id IS NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:03:06.223

```
SELECT DISTINCT(Quiz.id), SUM(ticketfee * enrolledplayers)
FROM Quiz
JOIN Enrollment on Quiz.id = Enrollment.Quiz_id
WHERE (Quiz.state=3 OR Quiz.state=4) AND Enrollment.promocoupon_id IS NULL 
```

# c# - OpenXML 值不同于 Excel 值

> ID：15065330
> 
> 赞同：4
> 
> 时间：2013-02-25T10:55:23.110
> 
> 标签：c#, .net, openxml

我目前正在使用 OpenXML SDK，与 OpenXML 中的值相比，Excel 中显示的值存在问题。

基本上我有一个 Excel 电子表格，其中 B4 中的值为“202”。但是当我使用 OpenXml 从电子表格中读取值时，我收到的值是“201.99999999999997”。

我编写了一个测试应用程序来检查这些值，我用来使用 OpenXml 读取 Excel 文件的代码如下：

```
using (SpreadsheetDocument document = SpreadsheetDocument.Open(_excelFile1, false))
{
    WorkbookPart wbPart = document.WorkbookPart;

    var sheet = wbPart.Workbook.Descendants<Sheet>().First();

    var wsPart = (WorksheetPart)(wbPart.GetPartById(sheet.Id));

    Cell cell1 = wsPart.Worksheet.Descendants<Cell>().Where(c => c.CellReference == "B4").FirstOrDefault();
    Cell cell2 = wsPart.Worksheet.Descendants<Cell>().Where(c => c.CellReference == "C4").FirstOrDefault();
    Cell cell3 = wsPart.Worksheet.Descendants<Cell>().Where(c => c.CellReference == "D4").FirstOrDefault();

    Console.WriteLine(String.Format("Cell B4: {0}", GetCellValue(cell1)));
    Console.WriteLine(String.Format("Cell C4: {0}", GetCellValue(cell2)));
    Console.WriteLine(String.Format("Cell D4: {0}", GetCellValue(cell3)));
}

private static string GetCellValue(Cell cell)
{
    if (cell != null) return cell.CellValue.InnerText;
    else return string.Empty;
} 
```

那么我得到的值如下：

```
Cell B4: 201.99999999999997 
```

[更新 - 来自 XLSX 文件的原始 XML]

```
<row r="4" spans="1:4" x14ac:dyDescent="0.2">
    <c r="A4" s="2">
        <v>39797</v>
    </c>
  <c r="B4" s="3">
    <v>201.99999999999997</v>
  </c>
  <c r="C4" s="3">
    <v>373</v>
  </c>
  <c r="D4" s="3">
    <v>398</v>
  </c>
</row> 
```

从 XLSX 文件 XML 中可以看出，OpenXML 正在读取正确的值。但是，Excel 必须应用某种格式才能将值“201.999999999999997”显示为“202”。这是用户看到的值，因此这是他们在使用 OpenXML 从 XLSX 文件中读取时所期望的值。

所以现在我想知道是否有人知道 Excel 应用的任何格式来获取用户在电子表格中看到的值，但使用 OpenXML。

作为一项测试，我尝试重新创建电子表格，但有时在电子表格中输入整数时，这些值看起来与小数相同。这是非常断断续续的，我无法解释或解决问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T08:11:29.880

The 201.99999999999997 is a real representation of floating point number. It may not be always accurate, for more information look for example [here](http://en.wikipedia.org/wiki/Floating_point). So you are right, excel applying some kind of formatting - significant digits. .NET can do the same, look at this:

```
 static void Main(string[] args)
    {
        string s = "201.99999999999997";
        // print s as string
        Console.WriteLine(s);
        // print s as double
        Console.WriteLine(double.Parse(s, System.Globalization.CultureInfo.InvariantCulture));
        // print s as double, converted back to string
        Console.WriteLine(double.Parse(s, System.Globalization.CultureInfo.InvariantCulture).ToString());
        Console.ReadKey();

        // output is:
        // 201.99999999999997
        // 202
        // 202
    } 
```

So, if you need a number, convert "201.99999999999997" to number. if you need a string representation of number, convert it to number and then back to string.

# sql - SQL 存储过程根据 id 插入值

> ID：15065331
> 
> 赞同：0
> 
> 时间：2013-02-25T10:55:26.947
> 
> 标签：sql, sql-server, stored-procedures, sql-insert

我想运行一个存储过程，它使用自生成的 ID 在另一列但在同一行中填充一个值。

前任：

表：`ID`，`Reference`

`ID`是自动编号，`Reference`是`VARCHAR`由`ID-CURRENTDATE`.

因此，如果 ID 是 230，对于插入语句，Ref 应该是`230-20130225`.

这可能吗，我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:11:48.960

如果您在 sql-server 上，则可以使用`computed column`.

```
create table myTable ( 
    id int identity (1,1) not null,
    name varchar(50) not null,
    recordDate date default getdate(),
    reference  as ((convert(varchar,[id1],(0)) + '-') + convert(varchar,recordDate,(112)))
) 
```

然后你的插入就像（或者你可以输入一个记录日期）

```
insert into myTable (name)
values ('xyz') 
```

如果您无法更改表，请尝试（在存储过程中）；

```
declare @recordId int
insert into myTable (name)
values ('xyz')

select @recordId = scope_identity()

update myTable set reference = convert(varchar, @recordId) + '-' +  
                               convert(varchar, getdate(), 112)
where id = @recordId 
```

# ios - iOS 应用程序的服务器端验证

> ID：15065334
> 
> 赞同：2
> 
> 时间：2013-02-25T10:55:35.523
> 
> 标签：ios, validation, jakarta-ee

我有一个基于 iOS 的应用程序向 Java EE 服务器端组件发出请求。

我们通常在客户端和服务器端对基于 Web 的应用程序进行验证，我认为如果我们可以信任 iOS 应用程序，我们可以避免服务器端数据验证。

换句话说，简单地依赖在 iOS 应用程序上完成的数据验证而在服务器端忽略它们是否有意义？我在这里假设 iOS 应用程序和 Java EE 服务器端之间存在 SSL，因此数据在传输过程中不会被篡改。

欣赏评论和想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:59:10.883

您应该在双方都执行输入验证。

您执行客户端验证以向用户提供快速和直接的反馈，以便他们可以轻松填写​​输入 UI。

您执行服务器端验证，以便 scr1ptk1dd13 无法在他的 PC 上向您的服务器创建请求并破坏您的聚会。我认为 SSL 在阻止他访问您的服务器方面不会有任何区别，除非您使用某种认证验证，而您似乎没有这样做。

# jquery - jquery .val() 从 html 输出默认输入字段值，而不是用户输入的值

> ID：15065335
> 
> 赞同：3
> 
> 时间：2013-02-25T10:55:36.393
> 
> 标签：jquery, validation

我有一个问题...我正在尝试获取所有输入字段数据以进行验证，但是 .val() 从 html 返回默认值，而不是用户输入的值。也许是因为我在 domready 里面有这个脚本？我无法弄清楚......为了让jsfiddle上的事情变得更好，它可以工作！:S

```
$(document).ready(function() {

        //Login Ajax
        $("#loginform").submit(function(){
            var url = $(this).attr("action");

            //Get input variables
            var user_name = $("input[name=user_name]");
            var user_password = $("input[name=user_password]");

                        //border control
                        if (user_name.val() == "username" && user_password.val() == "password") {
                            user_name.addClass("error");
                            user_password.addClass("error");
                            return false;
                        } else {
                            user_name.removeClass("error");
                            user_password.removeClass("error");
                        }

                            if (user_name.val() == "username") {
                                user_name.addClass("error");
                                return false;
                            } else {
                                user_name.removeClass("error");
                            }

                        if (user_password.val() == "password") {
                            user_password.addClass("error");
                            return false;
                        } else {
                            user_password.removeClass("error");
                        }

            return false;
        });

        //Registration Ajax
        $("#regsitrationform").submit(function(){
            var url = $(this).attr("action");

            return false;
        });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T10:58:32.983

我只是猜测，但也许你在错误的上下文中。

如果你的页面上有多个同名的输入，你必须告诉 jQuery 应该使用哪一个。

在您的提交回调`this`中是指表单元素。所以你可能看起来像这样：

```
var user_name = $("input[name=user_name]", this);
var user_password = $("input[name=user_password]", this); 
```

# django - Django 时区本地化未按预期工作

> ID：15065338
> 
> 赞同：0
> 
> 时间：2013-02-25T10:55:43.417
> 
> 标签：django, datetime, python-2.7, django-templates, timezone

我正在使用 Django 1.4.3 和 Postgres 9.1.3。这是我的模板，其中`message.created_at`是一个 python`datetime`对象，它清楚地告诉我 datetime 对象存储在 GMT 中，因为我可以通过传入过滤器`e`进行调试。[尽管我使用了文档](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#template-tags)`date`中给出的块和过滤器，但没有发生转换为我的本地时间（即 IST）。它仍然以 GMT 呈现日期时间值。我错过了什么？

```
{% load tz %}
{% localtime on %}
<div class="m_td_block">
    <span>{{ message.created_at|date:"D, d M, Y e" }}</span>
    <span>{{ message.created_at|time:"h:i A" }}</span>
</div>
{% endlocaltime %} 
```

也尝试了另一种方法，

```
{% load tz %}
<div class="m_td_block">
    <span>{{ message.created_at|localtime|date:"D, d M, Y e" }}</span>
    <span>{{ message.created_at|localtime|time:"h:i A" }}</span>
</div> 
```

这是我的设置，

```
TIME_ZONE = 'GMT'
USE_I18N = True
USE_L10N = True
USE_TZ = True 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:04:49.100

您是否正在`activate`激活本地时区？看到[这个](https://docs.djangoproject.com/en/dev/topics/i18n/timezones/#default-time-zone-and-current-time-zone)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:16:10.473

好的。考虑到这些帖子[post#1](https://stackoverflow.com/questions/13/determining-a-web-users-time-zone)，[post#2](https://stackoverflow.com/questions/10235956/django-1-4-how-to-automatically-get-users-timezone-from-client)我将在注册时手动从用户那里获取时区并将其存储在数据库中。并将与`timezone.activate(request.user.timezone)`.

# javascript - 使用javascript获取具有特定类的元素的所有类

> ID：15065339
> 
> 赞同：0
> 
> 时间：2013-02-25T10:55:43.260
> 
> 标签：javascript

尝试使用 JavaScript 获取元素的上一个类。

```
<li class="dynamic_class second_dynamic_class xx "></li>
<li class="dynamic_class second_dynamic_class"></li> 
```

我想放入一个 var 并将`dymanic_class`的`<li>`与`class="xx"`.

只允许纯 JavaScript ！

更多细节：

```
<li class='day_1 24.02.2013' data-name='day_1 24.02.2013' >
more code
</li>
<li class='day_2 25.02.2013 today' data-name='day_2 25.02.2013' >
more code
</li>
<li class='day_3 26.02.2013' data-name='day_3 26.02.2013' >
more code
</li>
<li class='day_4 27.02.2013' data-name='day_4 27.02.2013' ></li> 
```

首先，我需要选择带有今天类的 <li>，而不是读取相同元素的“上一个”<li> 类，我需要将 class="day_1" 获取到一个 var 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:02:13.810

试试这个：

```
var results = document.getElementById('targetId').className.split(' '); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T07:22:06.487

最后我做到了，代码如下所示：

我有多个具有不同类的元素：

`<li class='day_1 24.02.2013' data-name='day_1 24.02.2013' >more code</ li>`
`<li class='day_2 25.02.2013 ' data-name='day_2 25.02.2013' >more code</ li>`
`<li class='day_3 26.02.2013 today' data-name='day_3 26.02.2013' >more code</li>`
`<li class='day_4 27.02.2013' data-name='day_4 27.02.2013' >more code</ li>`

我想将元素的第一个类放入一个变量（仅使用 javascript 代码），`<li>`它也有今天的类，所以我使用了以下代码：

`var now=' ';`
`var demo= document.getElementsByTagName("li");`
`for (var i = 0; i < demo.length; i++ ) {`

```
if (demo[i].className.indexOf('today')!=-1) {
    if (demo[i].className.indexOf('day_1')!=-1){
        now = 'sunday';
    }else if(demo[i].className.indexOf('day_2')!=-1) {
        now = 'monday';
    }else if(demo[i].className.indexOf('day_3')!=-1) {
        now = 'tuesday';
    }else {
        now = 'wednesday';
    }   
} /* first if - ends here */ 
```

`} /* for - ends here */`

```
 alert(now); 
```

`<li>`现在您可以选择“今天”类的第一类或第二类。

# c# - 如何从文件夹中读取文本文件并将其转换为 MySQL 中的表

> ID：15065340
> 
> 赞同：0
> 
> 时间：2013-02-25T10:55:47.660
> 
> 标签：c#, asp.net, mysql

我有一个包含 50 个文本文件的文件夹，我需要一个可以读取这些文本文件并将它们转换为表格的 C# 或 .NET 程序，我希望主键是文本文件本身的名称。

```
//sample contents of my 1.txt file is as follows
atro
astrology
king
moon
monkey
seven
skin // 
```

所有文本文件都包含相同格式的信息。我编写了一个可以读取上述数据格式的文本文件的宏，然后当我尝试在 Excel 中运行宏时，我收到一条错误消息，指出内存不足。

```
enter code here 
```

Sub rameshc() ' ' ramesh Macro ' ' 键盘快捷键：Ctrl+k ' Dim nxt_row As Long

```
 'Change Path
Const strPath As String = "C:\Users\roo\Desktop\Volumes\eGo\tags\0\"
Dim strExtension As String

 'Stop Screen Flickering
Application.ScreenUpdating = False

ChDir strPath

 'Change extension
strExtension = Dir(strPath & "*.txt")

Do While strExtension <> ""

     'Adds File Name as title on next row
    Range("A65536").End(xlUp).Offset(1, 0).Value = strExtension

     'Sets Row Number for Data to Begin
    nxt_row = Range("A65536").End(xlUp).Offset(1, 0).Row

     'Below is from a recorded macro importing a text file
    With ActiveSheet.QueryTables.Add(Connection:= _
        "TEXT;" & strPath & strExtension, Destination:=Range("$A$" & nxt_row))
        .Name = strExtension
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .TextFilePromptOnRefresh = False
        .TextFilePlatform = 850
        .TextFileStartRow = 1
        .TextFileParseType = xlDelimited
        .TextFileTextQualifier = xlTextQualifierDoubleQuote
         'Delimiter Settings:
        .TextFileConsecutiveDelimiter = True
        .TextFileTabDelimiter = True
        .TextFileSemicolonDelimiter = True
        .TextFileCommaDelimiter = True
        .TextFileSpaceDelimiter = True
        .TextFileOtherDelimiter = "="

        .TextFileTrailingMinusNumbers = True
        .Refresh BackgroundQuery:=False
    End With

    strExtension = Dir
Loop

Application.ScreenUpdating = True 
```

End Sub Sub ramesh() ' ' ramesh Macro ' ' 键盘快捷键：Ctrl+l ' Selection.Copy ActiveCell.Offset(0, 1).Range("A1").Select Selection.PasteSpecial Paste:=xlPasteAll, Operation:= xlNone, SkipBlanks:= _ False, Transpose:=True End Sub

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:47:16.207

最快的方法是：

1.  创建一个控制台应用程序。在您的文件夹中搜索您的文件。[http://msdn.microsoft.com/en-us/library/vstudio/ezwyzy7b.aspx](http://msdn.microsoft.com/en-us/library/vstudio/ezwyzy7b.aspx)
2.  使用*System.Data.SqlClient*进行直接连接。[http://www.bigresource.com/MS_SQL--Problem-with-simple-sqlclient-database-acces--AVufrVBE.html](http://www.bigresource.com/MS_SQL--Problem-with-simple-sqlclient-database-acces--AVufrVBE.html)
3.  写下你的*插入*语句。迭代你的文件。并为每一个做一个插入。[http://www.w3schools.com/sql/sql_insert.asp](http://www.w3schools.com/sql/sql_insert.asp)

你将使用这样的东西来读取你的文件：

```
string[] lines = File.ReadAllLines("C:/YourFile.txt");

        foreach (var line in lines)
        {
            *Insert Statement*
        } 
```

# sass - 适用于所有边界的 SASS Mixin？

> ID：15065342
> 
> 赞同：1
> 
> 时间：2013-02-25T10:56:01.247
> 
> 标签：sass, mixins

我目前正在为我们的一位客户开发一个网站，该设计包括很多虚线边框。这些的 CSS 总是采用以下形式：

```
border-direction: 1px dotted $bdrColor; 
```

其中方向是顶部、右侧、底部或顶部。由于这个边界在整个站点中被如此频繁地使用，我认为为此创建一个 mixin 会很酷，当我需要时可以参考我希望边界去的方向。类似于以下内容：

```
@mixin dotted-border($direction){
border-$direction: 1px dotted $articleSubContentBdrColor; 
} 
```

但是我的 $direction 变量的连接不正确，SASS 没有编译。这甚至可能吗，因为我注意到 Compass 的每个方向都有 SASS 混合，以及它们的边界半径混合。

感激地收到任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:10:31.223

试试这个

```
@mixin dotted-border($direction,$articleSubContentBdrColor){
   border-#{$direction}: 1px dotted $articleSubContentBdrColor; 
} 
```

例子

```
body{
   @include dotted-border(right, black);
} 
```

# c# - 是否有一个 .Net 类来做 ManualResetEvent.PulseAll() 会做的事情（如果它存在的话）？

> ID：15065343
> 
> 赞同：9
> 
> 时间：2013-02-25T10:56:07.467
> 
> 标签：c#, multithreading

是否有 .Net 类可以做什么`ManualResetEvent.PulseAll()`（如果存在）？

我需要原子地释放一组等待同一信号的线程。（对于我的预期用途，我并不担心“线程踩踏”。）

您不能使用 a`ManualResetEvent`来执行此操作。例如，如果您这样做：

```
ManualResetEventSlim signal = new ManualResetEventSlim();
// ...
signal.Set();
signal.Reset(); 
```

然后根本不会释放等待*信号*的线程。

如果你在and调用`Thread.Sleep(5)`之间放置一个，那么一些但*不是*所有的等待线程都被释放。将睡眠时间增加到 10 毫秒可以释放所有线程。（这是用 20 个线程测试的。）`Set()``Reset()`

 *显然，通过添加`Thread.Sleep()`来完成这项工作是不可接受的。

然而，这很容易做到，`Monitor.PulseAll()`我已经写了一个小类来做到这一点。（我编写一个类来执行此操作的原因是我们发现使用 Monitor 的逻辑虽然相当简单，但并不明显，因此值得拥有这样一个类来简化使用。）

我的问题很简单：.Net 中是否已经有一个类可以做到这一点？

作为参考，这是我的“ `ManualResetEvent.PulseAll()`”等价物的基本版本：

```
public sealed class Signaller
{
    public void PulseAll()
    {
        lock (_lock)
        {
            Monitor.PulseAll(_lock);
        }
    }

    public void Wait()
    {
        Wait(Timeout.Infinite);
    }

    public bool Wait(int timeoutMilliseconds)
    {
        lock (_lock)
        {
            return Monitor.Wait(_lock, timeoutMilliseconds);
        }
    }

    private readonly object _lock = new object();
} 
```

* * *

这是一个示例程序，它演示了如果您在 Set() 和 Reset() 之间不休眠，则不会释放等待线程：

```
using System;
using System.Threading;
using System.Threading.Tasks;

namespace Demo
{
    public static class Program
    {
        private static void Main(string[] args)
        {
            _startCounter = new CountdownEvent(NUM_THREADS);

            for (int i = 0; i < NUM_THREADS; ++i)
            {
                int id = i;
                Task.Factory.StartNew(() => test(id));
            }

            Console.WriteLine("Waiting for " + NUM_THREADS + " threads to start");
            _startCounter.Wait(); // Wait for all threads to have started.
            Thread.Sleep(100);
            Console.WriteLine("Threads all started. Setting signal now.");
            _signal.Set();
            // Thread.Sleep(5); // With no sleep at all, NO threads receive the signal. Try commenting this line out.
            _signal.Reset();
            Thread.Sleep(1000);
            Console.WriteLine("\n{0}/{1} threads received the signal.\n\n", _signalledCount, NUM_THREADS);
            Console.WriteLine("Press any key to exit.");
            Console.ReadKey();
        }

        private static void test(int id)
        {
            _startCounter.Signal(); // Used so main thread knows when all threads have started.
            _signal.Wait();
            Interlocked.Increment(ref _signalledCount);
            Console.WriteLine("Task " + id + " received the signal.");
        }

        private const int NUM_THREADS = 20;

        private static readonly ManualResetEventSlim _signal = new ManualResetEventSlim();
        private static CountdownEvent _startCounter;
        private static int _signalledCount;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-05T22:40:55.930

您可以使用[Barrier](http://msdn.microsoft.com/query/dev11.query?appId=Dev11IDEF1&l=EN-US&k=k%28System.Threading.Barrier%29;k%28TargetFrameworkMoniker-.NETFramework,Version=v4.5%29;k%28DevLang-csharp%29&rd=true)对象。它允许运行未指定数量的任务，然后等待所有其他任务达到该点。

如果您不知道哪些任务将从哪些代​​码块开始作为特定的工作单元工作，您可以[以类似于 Go 中的 WaitGroup 的方式](https://codereview.stackexchange.com/questions/27274/using-barrier-to-implement-gos-wait-group)使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-13T04:05:19.390

**版本 1**
最大清晰度：在每个周期`ManualResetEvent`开始时急切地安装一个新的。`PulseAll`

```
public class PulseEvent
{
    public PulseEvent()
    {
        mre = new ManualResetEvent(false);
    }

    ManualResetEvent mre;

    public void PulseAll() => Interlocked.Exchange(ref mre, new ManualResetEvent(false)).Set();

    public bool Wait(int ms) => Volatile.Read(ref mre).WaitOne(ms);

    public void Wait() => Wait(Timeout.Infinite);
}; 
```

**版本 2**此版本避免为在没有服务员的情况下完成
的任何周期创建内部事件。`PulseAll`每个周期的第一个等待者会进入一个乐观的无锁竞赛，以创建和原子地安装单个共享事件。

```
public class PulseEvent
{
    ManualResetEvent mre;

    public void PulseAll() => Interlocked.Exchange(ref mre, null)?.Set();

    public bool Wait(int ms)
    {
        ManualResetEvent tmp =
           mre ??
           Interlocked.CompareExchange(ref mre, tmp = new ManualResetEvent(false), null) ??
           tmp;
        return tmp.WaitOne(ms);
    }

    public void Wait() => Wait(Timeout.Infinite);
}; 
```

**版本 3**
此版本通过分配两个持久`ManualResetEvent`对象并在它们之间翻转来消除每个周期的分配。与上述示例相比，这稍微改变了语义，如下所示：

*   首先，回收相同的两个锁意味着您的`PulseAll`周期必须足够长，以允许所有服务员清除前一个锁。否则，当您快速连续调用两次时，任何由上*一次*`PulseAll`调用假定释放但操作系统尚未有机会安排的等待线程可能最终会在新周期中被重新阻塞，因为出色地。我提到这主要是作为一个理论上的考虑，因为这是一个没有实际意义的问题，除非你在亚微秒脉冲周期上阻塞极端数量的线程。您可以决定此条件是否与您的情况相关。如果是这样，或者如果您不确定或谨慎，您可以随时使用没有此限制的**版本 1**或**版本 2 。** *`PulseAll`*

******   在这个版本中，“可以说”不同（但请参阅下面的段落，了解为什么第二点可能被证明不相关），对`PulseAll`被认为基本上同时的调用被合并，这意味着除了这些多个“同时”调用者中的一个之外，所有调用者都成为[NOPs](https://en.wikipedia.org/wiki/NOP)。这种行为并非没有先例（请参阅[此处的“备注”](https://msdn.microsoft.com/en-us/library/system.threading.autoresetevent(v=vs.110).aspx#Anchor_6)）并且可能是可取的，具体取决于应用程序。***** 

 *****请注意，后一点必须被视为合理的设计选择，而不是错误、理论缺陷或并发错误。这是因为*脉冲*锁在多个同时的情况下本质上是模棱两可的`PulseAll`：具体来说，没有办法证明任何没有被单个指定脉冲器释放的服务员必然会被其他合并/省略的脉冲之一释放.

换一种说法，这种类型的锁并不是为了原子地序列化`PulseAll`调用者而设计的，事实上它确实不可能，因为跳过的“同时”脉冲总是有可能独立地来来去去，甚至如果完全*在*合并脉冲的时间之后，但在服务员到达之前仍然“脉冲”（谁不会得到脉冲）。

```
public class PulseEvent
{
    public PulseEvent()
    {
        cur = new ManualResetEvent(false);
        alt = new ManualResetEvent(true);
    }

    ManualResetEvent cur, alt;

    public void PulseAll()
    {
        ManualResetEvent tmp;
        if ((tmp = Interlocked.Exchange(ref alt, null)) != null) // try claiming 'pulser'
        {
            tmp.Reset();                     // prepare for re-use, ending previous cycle
            (tmp = Interlocked.Exchange(ref cur, tmp)).Set();    // atomic swap & pulse
            Volatile.Write(ref alt, tmp);    // release claim; re-allow 'pulser' claims
        }
    }

    public bool Wait(int ms) => cur.WaitOne(ms);  // 'cur' is never null (unlike 'alt')

    public void Wait() => Wait(Timeout.Infinite);
}; 
```

* * *

最后，一些一般性的观察。这里和这种类型的代码中一个重要的反复出现的主题通常是，*当它仍然公开可见时，*`ManualResetEvent`不得将其更改为已发出信号的状态（即通过调用`Set`）。在上面的代码中，我们使用原子方式更改 'cur' 中的活动锁的身份（在这种情况下，通过即时交换备用）并在确保不会再添加新服务员的关键***之前***执行此操作到那个，超越那些在交换的那一刻已经被阻止的。*`Interlocked.Exchange`*`Set``ManualResetEvent`**

 **只有在此交换之后，通过调用`Set`我们的（现在）私有副本来释放那些等待的线程才是安全的。如果我们在它还出版`Set`的`ManualResetEvent`时候去拜访，一个迟到的服务员实际上错过了瞬时脉搏，仍然有可能看到打开的锁并航行通过而无需等待下一个，如定义。

有趣的是，这意味着即使直觉上感觉“脉冲”发生的确切时刻应该与`Set`被调用的时刻相吻合，但实际上更正确地说，它是在那之前，在 的时刻`Interlocked.Exchange`，因为那是动作这严格规定了截止时间之前/之后，并密封了要被释放的最终服务员（如果有的话）。

因此，错过截止时间并在之后立即到达的服务员必须只能看到 - 并将阻止 - 现在指定为*下一个*周期的事件，即使当前周期尚未发出信号也是如此，也没有释放它的任何等待线程，所有这些都是“瞬时”脉冲的正确性所要求的。********

# opencart - Opencart 结帐问题

> ID：15065345
> 
> 赞同：0
> 
> 时间：2013-02-25T10:56:15.467
> 
> 标签：opencart, checkout, confirmation

我在 OC 中创建了一个网站。但在结帐时，需要遵循 6 个步骤。我遵循了所有 5 个步骤，但是当我进入第 6 步时，它显示错误如下：

> 注意：错误：无法加载模型检出/扩展！在 D:\hosting\5308266\html\mastore\watches-ecommerce\system\engine\loader.php 第 48 行

我的网站有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:36:23.017

没有名为的模型`extension`，我认为您安装了一些与 checkout 相关的扩展，这些扩展替换了您的原始文件。我想会有这条线

```
$this->load->model('checkout/extension'); 
```

删除此行`catalog/controller/checkout/confirm.php`可能会解决您的问题。

如果这不起作用，请重新上传文件`catalog/controller/checkout`夹的所有文件。（ASCII模式即可，二进制模式无需上传）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:03:49.953

尝试并以二进制模式重新上传以下文件夹：

```
catalog/controller/checkout/ 
```

# java - Java - 查找表、数组、开关与是否考虑计算时间

> ID：15065353
> 
> 赞同：0
> 
> 时间：2013-02-25T10:56:27.580
> 
> 标签：java

让我们考虑一个游戏，例如石头、剪刀、纸。在这种情况下，我可以使用获胜的解决方案绘制二进制地图并存储地图并创建查找表，但是我认为有多种策略可以做到这一点：

*   一系列 if 语句
*   一个数组并检查解决方案是否在数组中
*   一个 switch 语句

为此类问题创建查找表的最佳方法是什么？对于最好的方式，我的意思是计算和内存效率最高的方式，非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:39:49.050

用 YAGNI 平衡 KISS。让它变得像你需要的那样简单。

如果您需要在单个 CPU 上每秒进行数千次计算，我相信您可以使用完全位移来创建解决方案……但您可能不需要。

使用简单`if`语句并为可伸缩性而编写的封装良好、可读性强的类在 99% 的情况下都可以正常工作。

# iphone - ObjC / iOS 中的范围比较

> ID：15065356
> 
> 赞同：-3
> 
> 时间：2013-02-25T10:56:36.417
> 
> 标签：iphone, ios, objective-c, xcode, resultset

在我的应用程序中，我有不同的评分级别

例如

```
70-80 Good
81-95 Excellent
60    Average 
```

然后我有一个测试结果值，比如 77 或 88。

**注意：**我将 70-80 等数据库中的范围保存为文本。

如何从评分级别比较这些值以获得适当的答案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:20:15.310

您需要从数据库或核心数据或文本文件中读取字符串。

让您将字符串读取为：

```
NSString *gradeRange=@"70-80";
NSArray *breakRange=[gradeRange componentsSeparatedByString:@"-"];

NSInteger score=77;

if( (score > [breakRange[0] integerValue]) && (score < [breakRange[0] integerValue]) ){
     NSLog(@"%ld lies in %@.", score, gradeRange);
     //Here you can log, display as per your need
}
//else if // similarly for all ranges 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:33:33.783

您不应将范围作为文本存储在数据库中。这样，您每次阅读时都必须对其进行解析，并将其拆分为该年级的上限和下限。

相反，将级别存储在表中，如下所示：

```
Name      | minimumScore | maximumScore
Excellent | 81           | 95
Good      | 70           | 80 
```

这样，您可以使用`WHERE`类似的子句轻松查询关卡的名称`actual >= minimumScore AND actual <= maximumScore`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T11:41:03.407

我会做这样的事情：

```
NSString* str_good = @"70-80"; //From the database
NSRange good_range = NSRangeFromString(str_good);
good_range.length = good_range.length-good_range.location; //Ranges are (location, length) we convert it to that format

NSString* str_excellent = @"81-95"; //From the database
NSRange excellent_range = NSRangeFromString(str_excellent);
excellent_range.length = excellent_range.length-excellent_range.location; //Ranges are (location, length) we convert it to that format

int grading = 77;

if(NSLocationInRange(grading, good_range)) {
    NSLog(@"good");
}
if(NSLocationInRange(grading, excellent_range)) {
    NSLog(@"excellent");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T10:59:50.293

如果我理解你的问题，你可以这样做：

```
if (result >= 81 && result <= 95) {
    //Excellent
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T11:09:22.520

根据您的成绩创建一种自定义方法，如下所示，

```
-(NSString*)getGradeWithMin:(int)minValue max:(int)maxValue
{
    return (minValue>80 && maxValue<=100) ? @"A" : ((minValue>60 && maxValue<=80) ? @"B" : ((minValue>40 && maxValue<=60) ? @"C" : @"D"));
} 
```

在此之后利用`componentsSeparatedByString`分隔您的最大和最小范围。

```
NSArray *boundary = [@"70-80" componentsSeparatedByString:@"-"];
NSLog(@"Grade is : %@",[self getGradeWithMin:[[boundary objectAtIndex:0] intValue] max:[[boundary objectAtIndex:1] intValue]]); 
```

希望这能给你一些想法。

# jvm - 如何在 ganglia web 中查看 jvm 指标报告

> ID：15065361
> 
> 赞同：1
> 
> 时间：2013-02-25T10:56:55.107
> 
> 标签：jvm, jmx, ganglia

我需要在 ganglia 报告上查看 jvm 指标，我已经在节点上设置了 jmxetric，并在使用简单的“telnet localhost 8649”时查看 jvm 指标。

我有 gmond/gmetad 在另一台机器上运行的 ganglia-web，它显示标准报告，例如 cpu/memory，但不显示新的 jvm 指标。

我应该手动配置 ganglia-web 以使其也显示 jvm 组吗？

我正在使用神经节 3.3.7。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T11:22:33.317

回答我自己的问题，以下是在 ganglia web 中查看 jvm 报告所需执行的步骤：

*   git 克隆并构建[https://github.com/ganglia/jmxetric](https://github.com/ganglia/jmxetric) (mvn 包)
*   从 gmetric4j-1.0.2.jar/jmxetric-1.0.2.jar/oncrpc-1.0.7.jar 创建 superjar（为了避免类加载问题，推荐的方法是什么？）
*   启动 jvm 时添加代理：
*   -javaagent:/etc/zoomdata/jmxetric-1.0.2.jar=host=MYHOST_AS_IN_GMOND_CONF,port=8649,mode=unicast,wireformat31x=true,process=PROCESS_NAME,config=/etc/jmxetric.xml"
*   jmxmetric.xml 如[https://github.com/ganglia/jmxetric](https://github.com/ganglia/jmxetric)

注意：javaagent中使用的主机名必须与gmond.conf中使用的主机名/端口/模式/进程一致，可以指定为-javaagent选项，也可以在jmxetric.xml中指定，如果需要部署到多台机器，最好去掉来自 xml 的 jvm 和 ganglia 节点，并通过 -javaagent 参数定义所有内容。xml 将仅包含 jvm 指标列表，并且可以复制到所有机器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T07:40:39.383

应该不需要配置 ganglia-web 来显示新的指标，它们只是显示出来，因为它们的元数据也被监听的 gmond 知道，因此 gmetad 已接收并将它们写入 rrd 数据库。

你用的是单播模式吗？您可能仅将 jmxetric 指标发送到在 jmxetric 主机上运行的 gmond。Gmond 不会将指标转发到 ganglia-web/gmetad/gmond 主机，除非您将它们添加到`gmond.conf`jmxetric 主机的收集组中。

同样在单播模式下，请确保`gmond.conf`已`send_metadata_interval`设置为 0 以外的值（默认值）。如果您在 gmetad 节点上重新启动 gmond，这可以防止指标消失。

另一种方法是将 jmx 指标直接从 jmxetric 发送到在 gmetad 节点上运行的 gmond。

# c# - 尝试使用 EWS MANAGED API 访问 Exchange 2010 帐户时“找不到自动发现服务”

> ID：15065363
> 
> 赞同：38
> 
> 时间：2013-02-25T10:56:57.993
> 
> 标签：c#, exchange-server, exchangewebservices, ews-managed-api

我正在为指定的电子邮件地址使用自动发现服务 URL。

```
ExchangeService Service = new ExchangeService(ExchangeVersion.Exchange2010);
Service.Credentials = new WebCredentials("username@domainname.com", "Password");
Service.AutodiscoverUrl("username@domainname.com");
Folder inbox = Folder.Bind(Service, WellKnownFolderName.Inbox);
Console.WriteLine("The folder name is" + inbox.DisplayName.ToString()); 
```

如果我这样做，我会遇到错误：

> 找不到自动发现服务

我必须做些什么来避免这个错误？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-25T11:30:14.237

你`Service.Credentials`错了，像这样使用它：

```
Service.Credentials = new WebCredentials(username, password, domainname); 
```

使用域凭据，而不是电子邮件地址。

还要仔细检查以下内容：

1.  您指定的版本`new ExchangeService()`匹配服务器的
2.  传递给的参数`Service.AutodiscoverUrl();`是正确的（需要获取数据的电子邮件地址）

以下对我有用（在新的控制台应用程序中）：

```
// Tweaked to match server version
ExchangeService Service = new ExchangeService(ExchangeVersion.Exchange2007_SP1); 

// Dummy but realistic credentials provided below
Service.Credentials = new WebCredentials("john", "12345678", "MYDOMAIN");
Service.AutodiscoverUrl("john.smith@mydomain.it");
Folder inbox = Folder.Bind(Service, WellKnownFolderName.Inbox);
Console.WriteLine("The folder name is " + inbox.DisplayName.ToString());

//Console output follows (IT localized environment, 'Posta in arrivo' = 'Inbox')
> The folder name is Posta in arrivo 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-04-15T16:07:17.703

让我指出，如果您尝试访问 Office 365，那么 Web 凭据的格式实际上是 WebCredentials(strUsername, strPassword); strUsername 是您尝试访问的帐户的电子邮件地址。

我收到了这个错误，结果发现有人在没有通知我的情况下更改了帐户的密码！当它只是一个错误的密码时，这是多么奇怪的错误！

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-12-09T15:39:43.727

我将向您推荐启用 Traces，以实现以下目的：

```
 Service.TraceEnabled = true; 
```

我遇到了同样的问题，然后当我启用跟踪时，这些跟踪将指导您到底发生了什么。在我的情况下，SSL 证书问题可以解决它，我遵循以下[帖子](http://msdn.microsoft.com/EN-US/library/dd633677%28v=exchg.80%29.aspx)

可能有很多问题，例如：

*   可以阻止用户。
*   DNS 找不到`autodiscover.domain.com`。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-01-28T10:39:57.417

为了完整性的记录：

我们遇到了一个服务突然停止这个特定的错误。由于该服务已经在无人值守的情况下运行了几个月，使用 EWS 监控邮箱，结果发现密码已过期。这导致 AutoDiscovery 失败并出现相同的异常：

> 找不到自动发现服务

在 AD 中更新 Exchange 用户的密码并检查其`Password Never Expires`属性为我们解决了这个问题。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-03-23T18:50:51.010

检查此电子邮件的密码是否已过期。

如果密码已过期，您会从 AutoDiscover 收到此错误。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2013-08-01T07:48:48.050

尝试使用这个：

```
Service.Credentials = new WebCredentials("john", "12345678", "MYDOMAIN"); 
```

不是这个

```
Service.Credentials = new WebCredentials("john@mail.com", "12345678", "MYDOMAIN"); 
```

请注意用户名`'john'`不是`'john@mail.com'`，它阻止了我使用第二个用户名好几个小时....

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2018-03-13T11:57:31.313

我直接使用过：

```
Url = new Uri("https://outlook.office365.com/EWS/Exchange.asmx") 
```

它对我有用。您可以尝试使用[Fiddler](https://www.telerik.com/download/fiddler)和[eM Client](http://www.emclient.com/)来了解它们如何用于`EWS Managed API`完成任务和复制调用。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-03-03T02:23:35.653

我建议您验证自动发现实际上是在 DNS 中设置的。以下文章更详细地解释了如何设置它，它还为您提供了有关如何使用 Microsoft Remote Connectivity Analyzer 对其进行测试的信息。[http://www.petri.co.il/autodiscover-configuration-exchange-2010.htm](http://www.petri.co.il/autodiscover-configuration-exchange-2010.htm)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-02-04T06:56:25.093

针对特定用户面临此问题。检查后我发现用户启用了两因素身份验证并使用他的主密码进行连接。通过生成应用程序特定密码并与之连接来解决。禁用两个因素也有效，但需要一些时间来反映。不知道为什么交换给出“找不到自动发现服务”。而不是“未经授权”。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-03-03T09:19:46.253

我在使用 Exchange 2013 时遇到了同样的问题。在我的情况下，原因是我的配置文件中的默认代理声明，这可能会阻止自动发现服务正常工作。

```
<system.net>
    <defaultProxy enabled="true">
      <proxy proxyaddress="http://localhost:8888" bypassonlocal="False"/>
    </defaultProxy>
</system.net> 
```

注释`<defaultProxy>`标签后，自动发现能够找到服务 URL。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-03-04T14:10:06.463

我点击了这个，跟踪显示在使用代理访问 365 后，它开始对 SVC 记录进行 DNS 查找。此查找转到内部 DNS 而不是代理，我们的内部 DNS 不解析外部 DNS 条目，这就是我们有代理服务器的原因。尚未发现为什么它正在执行 DNS 查找而不是使用代理服务器，但这就是导致我们版本此问题的原因

# c# - 通过 Lambda 将 2 个或更多变量传递给新任务（线程）是否安全？

> ID：15065364
> 
> 赞同：0
> 
> 时间：2013-02-25T10:57:00.713
> 
> 标签：c#, c#-5.0

使用大量任务，有时我需要通过 lambda 将 2 个或更多变量传递给新线程。我不确定我是否使用 lambda，这些变量总是作为 Thread 的 ExecutionContext 的一部分传递给另一个任务/线程。

```
Task<int> t = Task.Run(() => MyFunction(Var1, Var2, Var3), cts.Token); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T18:21:36.977

您没有解释安全的确切含义，所以这个问题很模棱两可。

一般来说，像这样传递参数是安全的（尽管它与 无关`ExecutionContext`）。但是有几件事情你必须要小心：

首先，与多线程一样，您必须小心同时从多个线程访问同一个对象，并且您很可能应该为此使用锁定。

其次，适用 lambda 的常规规则：lambda 中使用的变量形成一个闭包。这意味着对这些变量的任何更改也会反映在 lambda 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T12:57:38.710

我个人对任务没有太多经验，但从我对它们所做的事情来看，这应该不是问题，因为当你调用函数并传递参数时，这将创建对这些参数变量的引用，因此它们不会被垃圾收集. 请注意不要使用外部范围内的一些变量（[检查此答案](https://stackoverflow.com/a/11049501/408643)）。

参数的数量并不那么重要。更重要的是如何在单独的线程中使用它们，并且像方法参数一样传递它们是可以的。如果您不知道如何传递更多参数，请参阅[此答案](https://stackoverflow.com/a/8127421/408643)。

Matthew Watson 提到的存在关闭问题的场景如下所示：

```
void Method(){
    var someVar = GetSomeVar();
    var t = Task.Run(() => { 
        // internal closure uses outer private variable
        DoSomething(someVar);
    });
    someVar = somethingElse;
} 
```

免责声明：这个答案可能是错误的，这个代码可能有效，但我认为你的代码不会有问题:)

# javascript - 显示/隐藏 js 中的目标 Div 状态

> ID：15065366
> 
> 赞同：0
> 
> 时间：2013-02-25T10:57:09.853
> 
> 标签：javascript, html, css, show-hide

好的，所以我在这里使用这段代码来显示和隐藏选项卡开关样式基础中的 div：http: [//jsfiddle.net/AXj53/4/](http://jsfiddle.net/AXj53/4/)

```
 jQuery('a[id^="link"]').click(function(){
    var vid_id = jQuery(this).attr("id").replace("link", "#testVid");
    jQuery('div[id^="testVid"]').hide();
    jQuery(vid_id).show(); 
```

我想制作悬停状态和选定 div 的状态，但我似乎无法让它工作，我可以用 JS 做些什么来为悬停和选定链接提供一种嵌入阴影？

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:26:30.073

This can be done in JS, but its easier to leverage the CSS selectors :active and :hover which don't require JS event binding. You can also add a CSS style for the selected item and then toggle which element gets the .selected class inside the click event's callback.

Updated your jsfiddle here [http://jsfiddle.net/AXj53/16/](http://jsfiddle.net/AXj53/16/) adding the CSS selectors for :hover, :active, and .selected and the element class toggling in JS:

```
$(this).addClass('selected');
$(this).siblings().removeClass('selected'); 
```

# c# - 如何在asp.net中设置页面点击事件？

> ID：15065367
> 
> 赞同：1
> 
> 时间：2013-02-25T10:57:10.193
> 
> 标签：c#, javascript, asp.net

我想在表单上设置页面点击事件，当有人点击页面上的任何空白空间时，我想执行一段代码。可能吗？我正在使用带有 C# 的 Visual Studios 2010。如果必须，我已经准备好使用 javascript，但我宁愿在没有它的情况下这样做。注意：我不是在谈论页面加载事件。这是我要执行的代码：

```
 int rowIndex = 0;
            for (int i = 1; i <= GridView1.Rows.Count; i++)
            {

                Label ltime = (Label)GridView1.Rows[rowIndex].Cells[1].FindControl("Label2");
                ltime.Text = time.Text+"-"+time1.Text;

                rowIndex++;
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:33:11.883

将 webmethod 与 JQuery 一起使用...非常简单直接...

[http://www.codeproject.com/Articles/287430/Calling-ASP-Net-WebMethods-using-jQuery](http://www.codeproject.com/Articles/287430/Calling-ASP-Net-WebMethods-using-jQuery)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T09:00:15.943

你真的应该考虑使用 web 方法和 javascript 来做你想做的任何事情。

但是，如果您绝对必须调用整个页面生命周期并获得回发事件......有几种方法可以做到这一点。包括 __doPostBack 事件，并解析出 Page_Load 事件中的值。

不幸的是，这假设已包含 asp.net 客户端脚本。现代 asp.net 试图最小化这种情况，除非您检查页面源，否则您无法确定它是否在您的页面上。

但这是一种在大多数情况下都应该有效的技术。制作一个不可见的runat服务器按钮，钩住文档点击事件，然后调用按钮点击事件。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <style type="text/css">
        .NoDisplay
        {
            display: none;
        }
    </style>
    <title></title>
</head>
<body style="background: green">
    <form id="form1" runat="server">
        <div runat="server" id="TestDiv">
        </div>

        <!-- Hidden button -->
        <asp:Button ID="BodyButton" runat="server" OnClick="BodyClick" CssClass="NoDisplay" />
    </form>

    <script type="text/javascript">
        document.onclick = function () { document.getElementById("BodyButton").click(); }
    </script>

    <script runat="server">
        protected void BodyClick(object sender, EventArgs e)
        {
            TestDiv.InnerHtml = string.Format("This is a click test at {0}", DateTime.Now);

        }
    </script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:03:25.523

如果您使用 jQuery 选择整个 div / 容器并注册点击事件：

```
$document.ready(function(){
 $('#divId').click(function(){
  //Invoke postback
 })
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T11:20:32.623

您可以使用 webmethod 来执行此操作：

```
[WebMethod]
public static methodname(argument)
{

} 
```

`methodname`您可以在javascript中调用该方法

```
$(document).click(function somename() {

    PageMethods.methodname(onComplete);
});

function onComplete() {
    alert('passed');
}

somename(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T08:01:01.590

如果您的意图是进行回发，请标记：

```
<div style="display: none;">
    <asp:Button ID="MyControl" runat="server" OnClick="MyControl_Click" />
</div>

<script>
    $(document).ready({
        $('body').click(function() {
            __doPostBack('MyControl', '');
        });
    });
</script> 
```

后面的代码

```
public class MyPage
{
    protected void MyControl_Click(Object sender, EventArgs e)
    {
        // Click code goes here
    }
} 
```

# objective-c - 在 didSelectRowAtIndexPath 中重新加载表后未调用 cellForRowAtIndexPath

> ID：15065369
> 
> 赞同：2
> 
> 时间：2013-02-25T10:57:12.740
> 
> 标签：objective-c, ios5, uitableview

我面临一个非常奇怪的问题。我正在做以下事情

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{

   [invoiceTable reloadData]; // my table    
} 
```

完成此操作后，我的控制权将转移到

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
  if(tableview == invoiceTable) {

     return 5;
  }
  else {

     return 6;    
  }
} 
```

但是`cellForRowAtIndexPath`for`invoiceTable`没有被调用。我已正确连接数据源并委托。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T12:27:41.767

创建一个函数并重新加载表并在 didselect 中调用该函数。

```
-(void)function
{ 
[tableview reloadData];
} 
```

# postscript - 删除后记中的笔划

> ID：15065378
> 
> 赞同：1
> 
> 时间：2013-02-25T10:57:35.153
> 
> 标签：postscript, stroke

我在ps中有脚本

```
%!
%% Example 4

/box0{ 
newpath 56 257 moveto 
0 -198 rlineto 
284 0 rlineto 
0 198 rlineto 
-284 0 rlineto 

closepath } def 

/Times-Roman findfont
32 scalefont
setfont

box0
gsave
/test{

(Example 4) true charpath stroke

} def
test
showpage 
```

它显示为正方形，我该如何删除它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:05:22.913

大概删除对 box0 的调用将删除正方形。我认为你没有自己编写这个 PostScript 程序？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T16:18:14.860

/box0{...} def 定义了一个绘制盒子的函数。

```
/box0{ newpath 56 257 moveto 0 -198 rlineto 284 0 rlineto 0 198 rlineto
       -284 0 rlineto closepath } def 
```

box0 调用该`/box0`函数并绘制一个框，但不填充或描边，因此路径仍然是当前路径的一部分。closepath 从 到达的点开始连接，该点`-284 0 rlineto`恰好是起点 58,257。然后，您从文本的基线开始一些文本，这会将文本的基线放置在框的顶部。`charpath`将文本的路径添加到框的路径上。`stroke`笔画既是字符路径又是盒子。

如果您不想要该框，请删除`box0`.

gsave 不应该在那里或应该有一个匹配的 grestore。

# windows - 用于 Windows 的 Git

> ID：15065380
> 
> 赞同：6
> 
> 时间：2013-02-25T10:57:40.520
> 
> 标签：windows, git

我是 Windows 版 Git 的新用户。我已从 Google Code 安装（1.8.1.2 和 1.7 作为试用版）。

我可以发出一些 git 命令，它们很好并且工作完美。但是，“git diff”和“git log”命令不起作用。这些命令都返回

```
'': : command not found 
```

我已经尝试卸载并重新安装。我的机器上也有 GitHub for Windows。该机器是Windows 7，非常新的版本。

任何人都可以帮助或给我关于为什么这两个命令失败的诊断指针吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:33:53.470

听起来您的 .gitconfig 文件可能设置不正确，或者缺少环境 PATH。

对于刚接触 git 的人，我几乎总是建议他们先从

[适用于 Windows 的 Git Hub](http://windows.github.com/)（对新手来说最简单）

或者

[Git Extensions](https://code.google.com/p/gitextensions/) （不确定这是否是您安装的）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T15:06:41.377

> 路径太大，无法粘贴

确保您的 PATH*不太大*，否则它可能会被截断，并产生奇怪的副作用（例如，可能是您的错误消息）

尝试并启动[`git-cmd.bat`](https://github.com/msysgit/msysgit/blob/master/git-cmd.bat)，或[`git-bash`快捷方式](https://github.com/msysgit/msysgit/blob/master/share/WinGit/Git%20Bash.vbs)，都包含在[msysgit 发行版](https://github.com/msysgit/msysgit)中。
它们将补充 PATH 并设置（这非常重要，因为 Windows默认`HOME`不设置）`HOME`

在那些会话（`git-cmd`或`bash`）中，`git diff`应该可以工作。

实际的解决方案就像“ [msysGit：为什么 git log 输出空白行？](https://stackoverflow.com/questions/2899187/msysgit-why-does-git-log-output-blank-lines/2899403#2899403) ”中的那个：**设置寻呼机**

```
[core] 
   pager = less -R 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T12:50:45.490

在 .gitconfig 中，寻呼机值是一个空字符串。任何通过管道传输到寻呼机的 git 命令（即 git-diff 或 git-log）都会失败并显示 command-not-found，因为 DOS 被要求运行一个空字符串作为命令。不知道它是怎么发生的。

# jquery - jQuery 选择的库和fancybox

> ID：15065384
> 
> 赞同：0
> 
> 时间：2013-02-25T10:57:54.800
> 
> 标签：jquery, css, fancybox, jquery-chosen

我在fancybox弹出窗口中使用jquery选择的库，并且fancybox高度有问题。

请检查这个 jsbin [http://jsbin.com/ovobej/1/](http://jsbin.com/ovobej/1/)

任何让它工作正常的想法。我可以为内容提供静态高度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T11:57:06.953

我认为您想要的是以下内容：http: [//jsbin.com/ovobej/15/](http://jsbin.com/ovobej/15/) 所以当单击“选择的选择”时，fancybox 不必调整大小。但是选择框不应该在花式框框架中被“限制”。通过添加：

```
.fancybox-inner { overflow: visible !important; } 
```

选择的选择框与普通的浏览器选择相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:36:17.903

.fancybox-inner {溢出：隐藏；}

# android - 移动应用内联网

> ID：15065385
> 
> 赞同：0
> 
> 时间：2013-02-25T10:57:57.197
> 
> 标签：android, iphone, intranet

我的任务是为我的公司创建一个需要能够在 iPhone 和 Android 上运行的 Intranet 应用程序。当前在网络上运行的 Intranet 有 1500 个用户，现在并不是所有这些用户都会下载该应用程序，但我指望这个数字只是为了安全起见。

我已经问过关于创建一个适合手机屏幕的网站等等这些想法都被拒绝了。我已经做了一些研究，试图找出如何以最好的方式做到这一点，我有几个问题要问你们。

我已经和老板说 iPhone 应用程序将使用企业许可证（[https://developer.apple.com/programs/ios/enterprise/](https://developer.apple.com/programs/ios/enterprise/)）

这个许可证是否可以让我们选择谁可以在应用商店下载应用程序？

我需要为 Android 购买类似的许可证吗？

你们一般对创建此类应用程序有什么建议吗？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:06:57.497

你不能规定谁可以从 iphone 的 appstore 下载应用程序，尽管你可以指定你的应用程序应该下载的区域和不下载的区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:07:51.313

Google 正在推出 Google Play 的企业版以允许确切的这种情况，但这当然依赖于公司使用 Google Enterprise 服务[http://thenextweb.com/google/2012/12/04/google-play-来到 google-apps-letting-enterprise-customers-distribute-apps-internally/](http://thenextweb.com/google/2012/12/04/google-play-comes-to-google-apps-letting-enterprise-customers-distribute-apps-internally/)

除此之外，请记住，Android 设备可以从任何地方安装应用程序，无需解锁、root、越狱或类似的东西。

您可以只在 Intranet 网站上提供该应用程序并制作一个用于更新检查的 API，

# php - 如何用 PHP 中的值替换字符串中的变量？

> ID：15065387
> 
> 赞同：49
> 
> 时间：2013-02-25T10:58:06.017
> 
> 标签：php, string

我在数据库中有这样的字符串（实际的字符串包含 100 个单词和 10 个变量）：

```
I am a {$club} fan 
```

我像这样回显这个字符串：

```
$club = "Barcelona";
echo $data_base[0]['body']; 
```

我的输出是`I am a {$club} fan`. 我想要`I am a Barcelona fan`。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-02-25T11:00:04.057

使用[`strtr`](http://php.net/strtr). 它将翻译字符串的一部分。

```
$club = "Barcelona";
echo strtr($data_base[0]['body'], array('{$club}' => $club)); 
```

* * *

对于多个值（[演示](https://eval.in/88384)）：

```
$data_base[0]['body'] = 'I am a {$club} fan.'; // Tests

$vars = array(
  '{$club}'       => 'Barcelona',
  '{$tag}'        => 'sometext',
  '{$anothertag}' => 'someothertext'
);

echo strtr($data_base[0]['body'], $vars); 
```

程序输出：

```
I am a Barcelona fan. 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-16T13:10:57.440

```
/**
 * A function to fill the template with variables, returns filled template.
 *
 * @param string $template A template with variables placeholders {$variable}.
 * @param array $variables A key => value store of variable names and values.
 *
 * @return string
 */

public function replaceVariablesInTemplate($template, array $variables){

 return preg_replace_callback('#{(.*?)}#',
       function($match) use ($variables){
            $match[1] = trim($match[1], '$');
            return $variables[$match[1]];
       },
       ' ' . $template . ' ');
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-02-21T20:41:53.450

我建议使用[sprintf()](https://www.php.net/manual/en/function.sprintf.php)函数。

而不是 storage `I am a {$club} fan`， use `I am a %s fan`，所以你的[echo](https://www.php.net/manual/en/function.echo.php)命令会像：

```
$club = "Barcelona";

echo sprintf($data_base[0]['body'],$club); 
```

输出：*我是巴塞罗那球迷*

这将使您可以自由地将相同的代码与任何其他变量一起使用（您甚至不必记住变量名）。

因此，此代码对于相同的字符串也有效：

```
$food = "French fries";

echo sprintf($data_base[0]['body'], $food); 
```

输出：*我是炸薯条迷*

```
$language = "PHP";

echo sprintf($data_base[0]['body'], $language); 
```

输出：*我是 PHP 爱好者*

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-25T11:50:10.270

您正在寻找嵌套字符串插值。可以在博客文章中阅读一个理论*[：用于动态执行双引号字符串变量插值的 PHP 核心函数](http://thehighcastle.com/blog/21/wanted-php-core-function-for-dynamically-performing-double-quoted-string-variable-interpolation)*。

主要问题是您并不真正了解所有可用的变量，或者可能有太多无法列出。

考虑以下经过测试的代码片段。我[从 Mohammad Mohsenipur 那里偷了正则表达式](https://stackoverflow.com/questions/15065387/how-can-i-replace-a-variable-in-a-string-with-the-value-in-php/15065619#15065619)。

```
$testA = '123';
$testB = '456';
$testC = '789';
$t = '{$testA} adsf {$testB}adf 32{$testC} fddd{$testA}';

echo 'before: ' . $t . "\n";

preg_match_all('~\{\$(.*?)\}~si', $t, $matches);
if ( isset($matches[1])) {
    $r = compact($matches[1]);
    foreach ( $r as $var => $value ) {
        $t = str_replace('{$' . $var . '}', $value, $t);
    }
}

echo 'after: ' . $t . "\n"; 
```

您的代码可能是：

```
$club = 'Barcelona';
$tmp = $data_base[0]['body'];
preg_match_all('~\{\$(.*?)\}~si', $tmp, $matches);
if ( isset($matches[1])) {
    $r = compact($matches[1]);
    foreach ( $r as $var => $value ) {
        $tmp = str_replace('{$' . $var . '}', $value, $tmp);
    }
}
echo $tmp; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-07-16T16:23:45.317

```
if (preg_match_all('#\$([a-zA-Z0-9]+)#', $q, $matches, PREG_SET_ORDER));
{
    foreach ($matches as $m)
    {
        eval('$q = str_replace(\'' . $m[0] . '\', $' . $m[1] . ', $q);');
    }
} 
```

这匹配所有 $variables 并用值替换它们。

我没有包含 {}，但添加它们应该不会太难，像这样......

```
if (preg_match_all('#\{\$([a-zA-Z0-9]+)\}#', $q, $matches, PREG_SET_ORDER));
{
    foreach ($matches as $m)
    {
        eval('$q = str_replace(\'' . $m[0] . '\', $' . $m[1] . ', $q);');
    }
} 
```

虽然它似乎比硬编码每个变量要慢一些。它引入了 eval 的安全漏洞。这就是为什么我的正则表达式如此有限的原因。限制 eval 可以抓取的范围。

我用 Ajax 编写了自己的正则表达式测试器，所以我可以在输入时看到我的表达式是否可以工作。我有我喜欢在我的表达式中使用的变量，因此我不需要为每个表达式重新键入相同的位。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-04-03T17:10:21.497

我发现这些方法有时很有用：

```
$name = 'Groot';
$string = 'I am {$name}';
echo eval('return "' . $string . '";'); 
```

```
$data = array('name' => 'Groot');
$string = 'I am {$data[name]}';
echo eval('return "' . $string . '";'); 
```

```
$name = 'Groot';
$data = (object)get_defined_vars();
$string = 'I am {$data->name}';
echo eval('return "' . $string . '";'); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-07-27T22:10:23.177

这是我的解决方案：

```
$club = "Barcelona";

$string = 'I am a {$club} fan';

preg_match_all("/\{\\$([a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*)\}/", $string, $matches);

foreach ($matches[0] as $key => $var_name) {
    if (!isset($GLOBALS[$matches[1][$key]]))
        $GLOBALS[$matches[1][$key]] = 'default value';
    $string = str_replace($var_name, $GLOBALS[$matches[1][$key]], $string);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-10-15T18:59:53.023

您可以使用简单的解析器将 {$key} 替换为映射中的值（如果存在）。

像这样使用它：

```
$text = templateWith('hello $item}', array('item' => 'world'...));` 
```

我的第一个版本是：

```
/**
 * Template with a string and simple map.
 * @param string $template
 * @param array $substitutions map of substitutions.
 * @return string with substitutions applied.
 */
function templateWith(string $template, array $substitutions) {
    $state = 0; // forwarding
    $charIn = preg_split('//u', $template, -1, PREG_SPLIT_NO_EMPTY);
    $charOut = array();
    $count = count($charIn);
    $key = array();
    $i = 0;
    while ($i < $count) {
        $char = $charIn[$i];
        switch ($char) {
            case '{':
                    if ($state === 0) {
                        $state = 1;
                    }
                break;
            case '}':
                if ($state === 2) {
                    $ks = join('', $key);
                   if (array_key_exists($ks, $substitutions)) {
                        $charOut[] = $substitutions[$ks];
                   }
                   $key = array();
                   $state = 0;
                }
                break;
            case '$': if ($state === 1) {
                        $state = 2;
                      }
                  break;
             case '\\':    if ($state === 0) {
                           $i++;
                           $charOut[] = $charIn[$i];
                       }
                 continue;
             default:
                 switch ($state) {
                    default:
                    case 0: $charOut[] = $char;
                        break;
                     case 2: $key[] = $char;
                        break;
                   }
         }
    $i++;
    }

    return join('', $charOut);
 } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-01-26T22:25:08.937

也许以下代码段（部​​分）对某人有用。

```
/**
 * Access an object property using "dot" notation
 *
 * @param  object  $object
 * @param  string|null  $path
 * @param  mixed  $default
 * @return mixed
 */
function xobject_get(object $object, $path, $default = null) {
    return array_reduce(explode('.', $path), function ($o, $p) use ($default) { 
        return is_numeric($p) ? $o[$p] ?? $default : $o->$p ?? $default; 
    }, $object);
}

/**
 * Access an array's property using "dot" notation
 *
 * @param  array  $array
 * @param  string|null  $path
 * @param  mixed  $default
 * @return mixed
 */
function xarray_get(array $array, $path, $default = null) {
    return array_reduce(explode('.', $path), function ($a, $p) use ($default) { 
        return $a[$p] ?? $default; 
    }, $array);
}

/**
 * Replaces placeholders from a string with object or array values using "dot" notation
 *
 * Example:
 * "The book {title} was written by {author.name}" becomes "The book Harry Potter was written by J.K. Rowling"
 *
 * @param  array|object  $data
 * @param  string  $template
 * @return string
 */
function render_template($data, string $template) {
    preg_match_all("/\{([^\}]*)\}/", $template, $matches); 
    $replace = [];
    foreach ($matches[1] as $param) { 
        $replace['{'.$param.'}'] = is_object($data) ? xobject_get($data, $param) : xarray_get($data, $param); 
    }
    return strtr($template, $replace);
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-02-25T11:11:18.683

您可以使用[preg_replace_callback](https://www.php.net/manual/en/function.preg-replace-callback.php)获取变量名称，例如：

```
$data_base[0]['body'] = preg_replace_callback(
    '#{(.*?)}#',
    function($m) {
        $m[1] = trim($m[1], '$');
        return $this->$m[1];
    },
    ' ' . $data_base[0]['body'] . ' '
); 
```

注意：我写的这段代码是针对`class($this);`. 您可以在类中声明一个变量。然后使用此代码检测变量并将它们替换为：

```
<?php
    class a {

        function __construct($array) {
            foreach($array as $key => $val) {
                $this->$key = $val;
            }
        }

        function replace($str){
            return preg_replace_callback(
                '#{(.*?)}#', function($m) {$m[1] = trim($m[1], '$'); return $this->$m[1];},
                ' ' . $str . ' ');
        }

    }

    $obj = new a(array('club' => 3523));

    echo $obj->replace('I am a {$club} fan'); 
```

输出：

```
I am a 3523 fan 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2013-02-25T11:13:04.703

试试[preg_replace](https://www.php.net/manual/en/function.preg-replace.php) PHP 函数。

```
<?php
    $club = "Barcelona";
    echo $string = preg_replace('#\{.*?\}#si', $club, 'I am a {$club} fan');
?> 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-07-29T14:12:33.097

对于您的情况，老实说，我看不出有理由不使用 eval :)
如果变量太进入数据库，这里有一些额外的方法来定义变量：

```
$my_variable_name = 'club'; //coming from database
$my_value = 'Barcelona'; //coming from database
$my_msg= 'I am a {$club} fan'; //coming from database

$$my_variable_name = $my_value;  // creating variable $club dinamically
$my_msg = eval("return \"$my_msg\";"); // eating the forbidden fruit
echo $my_msg; // prints 'I am Barcelona fan' 
```

这段代码已经过全面测试，可与 php 7 一起使用。但如果您允许您的用户将此类字符串定义到您的数据库中，最好不要这样做。您应该只使用受信任的数据运行 eval。

* * *

## 回答 #13

> 赞同：-2
> 
> 时间：2013-02-25T11:09:11.400

这样的事情应该可以解决您的问题：

```
$club = "Barcelona";
$var = 'I am a {$club} fan';

$res = preg_replace('/\{\$([a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*)\}/e', "$$1", $var);
echo "$res\n"; 
```

是单行`preg_replace`。

在 PHP 5.5 中，`/e`不推荐使用修饰符。您可以改用回调：

```
$club = "Barcelona";
$var = 'I am a {$club} fan';

$res = preg_replace_callback('/\{\$([a-zA-Z_\x7f-\xff][a-zA-Z0-9_\x7f-\xff]*)\}/',
                             create_function(
                                 '$matches',
                                 'extract($GLOBALS, EXTR_REFS | EXTR_SKIP); return $$matches[1];'),
                              $var);
echo "$res\n"; 
```

请注意，这使用了导入所有全局变量的技巧。这可能不是您想要的。可能使用闭包会是一个更好的主意。

# sql - SQL：如何避免复制+粘贴相同的代码？只写一次代码，以后再调用？

> ID：15065391
> 
> 赞同：0
> 
> 时间：2013-02-25T10:58:16.173
> 
> 标签：sql, oracle, oracle10g

我有一个很长的 SQL 脚本。非常丑陋的是，我不得不多次复制和粘贴现有代码。我更愿意参考现有的代码。

我的目标是每个代码块只写一次。如果我需要第二次，我会参考它。没有意见这可能吗？

```
SELECT batch
FROM (SELECT    'DISCONNECT ent_user  FROM job_code WITH user_id ="'
             || a.user_id
             || '" , jc_name = "'
             || b.jc_name
             || '";'
                AS batch,
             1 AS my_order
        FROM ent_user a, user_jc b
       WHERE a.user_id IN (SELECT user_id
                           FROM (SELECT REPLACE (overview.entity_key,
                                                 'user_id=',
                                                 '')
                                           AS USER_ID,
                                        details.old_value_str,
                                        SUBSTR (
                                           details.old_value_str,
                                           1,
                                           INSTR (details.old_value_str,
                                                  '-',
                                                  1,
                                                  1)
                                           - 1)
                                           AS OLD_PREFIX,
                                        details.new_value_str,
                                        SUBSTR (
                                           details.new_value_str,
                                           1,
                                           INSTR (details.new_value_str,
                                                  '-',
                                                  1,
                                                  1)
                                           - 1)
                                           AS NEW_PREFIX,
                                        overview.from_event_time,
                                        CASE
                                           WHEN SUBSTR (
                                                   details.old_value_str,
                                                   1,
                                                   INSTR (
                                                      details.old_value_str,
                                                      '-',
                                                      1,
                                                      1)
                                                   - 1) =
                                                   SUBSTR (
                                                      details.new_value_str,
                                                      1,
                                                      INSTR (
                                                         details.
                                                          new_value_str,
                                                         '-',
                                                         1,
                                                         1)
                                                      - 1)
                                           THEN
                                              'OK'
                                           ELSE
                                              'DELETE'
                                        END
                                           AS COMPARE
                                   FROM    audit_trail overview
                                        INNER JOIN
                                           audit_info details
                                        ON overview.serial = details.serial
                                  WHERE TO_CHAR (SYSDATE, 'IW-YYYY') =
                                           TO_CHAR (
                                              overview.from_event_time,
                                              'IW-YYYY')
                                        AND details.field_name =
                                               '__99__Department'
                                        AND overview.action = 'Update'
                                        AND CASE
                                               WHEN SUBSTR (
                                                       details.
                                                        old_value_str,
                                                       1,
                                                       INSTR (
                                                          details.
                                                           old_value_str,
                                                          '-',
                                                          1,
                                                          1)
                                                       - 1) =
                                                       SUBSTR (
                                                          details.
                                                           new_value_str,
                                                          1,
                                                          INSTR (
                                                             details.
                                                              new_value_str,
                                                             '-',
                                                             1,
                                                             1)
                                                          - 1)
                                               THEN
                                                  'OK'
                                               ELSE
                                                  'DELETE'
                                            END = 'DELETE'
                                        AND REPLACE (overview.entity_key,
                                                     'user_id=',
                                                     '') NOT LIKE
                                               'EXT%'
                                        AND details.old_value_str LIKE
                                               'INT%'
                                        AND details.new_value_str NOT LIKE
                                               'INT%'))
             AND a.user_id = b.user_id
      UNION
      SELECT 'DISCONNECT rss_user  FROM user_group WITH rss_user_name = "'
             || b.rss_user_name
             || '"  rss_name = "'
             || b.rss_name
             || '" rss_type = "'
             || b.rss_type
             || '" , ug_name = "'
             || b.ug_name
             || '";'
                AS batch,
             2 AS my_order
        FROM ent_user a, ru_ug b
       WHERE a.user_id IN (SELECT user_id
                           FROM (SELECT REPLACE (overview.entity_key,
                                                 'user_id=',
                                                 '')
                                           AS USER_ID,
                                        details.old_value_str,
                                        SUBSTR (
                                           details.old_value_str,
                                           1,
                                           INSTR (
                                              details.old_value_str,
                                              '-',
                                              1,
                                              1)
                                           - 1)
                                           AS OLD_PREFIX,
                                        details.new_value_str,
                                        SUBSTR (
                                           details.new_value_str,
                                           1,
                                           INSTR (
                                              details.new_value_str,
                                              '-',
                                              1,
                                              1)
                                           - 1)
                                           AS NEW_PREFIX,
                                        overview.from_event_time,
                                        CASE
                                           WHEN SUBSTR (
                                                   details.
                                                    old_value_str,
                                                   1,
                                                   INSTR (
                                                      details.
                                                       old_value_str,
                                                      '-',
                                                      1,
                                                      1)
                                                   - 1) =
                                                   SUBSTR (
                                                      details.
                                                       new_value_str,
                                                      1,
                                                      INSTR (
                                                         details.
                                                          new_value_str,
                                                         '-',
                                                         1,
                                                         1)
                                                      - 1)
                                           THEN
                                              'OK'
                                           ELSE
                                              'DELETE'
                                        END
                                           AS COMPARE
                                   FROM    audit_trail overview
                                        INNER JOIN
                                           audit_info details
                                        ON overview.serial =
                                              details.serial
                                  WHERE TO_CHAR (SYSDATE, 'IW-YYYY') =
                                           TO_CHAR (
                                              overview.from_event_time,
                                              'IW-YYYY')
                                        AND details.field_name =
                                               '__99__Department'
                                        AND overview.action = 'Update'
                                        AND CASE
                                               WHEN SUBSTR (
                                                       details.
                                                        old_value_str,
                                                       1,
                                                       INSTR (
                                                          details.
                                                           old_value_str,
                                                          '-',
                                                          1,
                                                          1)
                                                       - 1) =
                                                       SUBSTR (
                                                          details.
                                                           new_value_str,
                                                          1,
                                                          INSTR (
                                                             details.
                                                              new_value_str,
                                                             '-',
                                                             1,
                                                             1)
                                                          - 1)
                                               THEN
                                                  'OK'
                                               ELSE
                                                  'DELETE'
                                            END = 'DELETE'
                                        AND REPLACE (
                                               overview.entity_key,
                                               'user_id=',
                                               '') NOT LIKE
                                               'EXT%'
                                        AND details.old_value_str LIKE
                                               'INT%'
                                        AND details.new_value_str NOT LIKE
                                               'INT%'))
             AND a.user_id = b.user_id
             AND (   b.rss_type = 'TEST14'
                  OR b.rss_type = 'TTTR'
                  OR b.rss_type = 'OFFI2021'
                  OR b.rss_type = 'TEST27'
                  OR b.rss_type = 'TEST22'
                  OR b.rss_type = 'TEST26'
                  OR b.rss_type = 'TEST23'
                  OR b.rss_type = 'TEST39'
                  OR b.rss_type = 'TEST19'
                  OR b.rss_type = 'TEST12'
                  OR b.rss_type = 'TEST16'
                  OR b.rss_type = 'TEST05'
                  OR b.rss_type = 'TEST09'
                  OR b.rss_type = 'HSSO'
                  OR b.rss_type = 'TEST37'
                  OR b.rss_type = 'TEST34'
                  OR b.rss_type = 'TEST1')
      UNION
      SELECT    'DELETE rss_user WITH rss_user_name = "'
             || b.rss_user_name
             || '"  rss_name = "'
             || b.rss_name
             || '" rss_type = "'
             || b.rss_type
             || '";'
                AS batch,
             3 AS my_order
        FROM ent_user a, rss_user b
       WHERE a.user_id IN (SELECT user_id
                           FROM (SELECT REPLACE (overview.entity_key,
                                                 'user_id=',
                                                 '')
                                           AS USER_ID,
                                        details.old_value_str,
                                        SUBSTR (
                                           details.old_value_str,
                                           1,
                                           INSTR (
                                              details.old_value_str,
                                              '-',
                                              1,
                                              1)
                                           - 1)
                                           AS OLD_PREFIX,
                                        details.new_value_str,
                                        SUBSTR (
                                           details.new_value_str,
                                           1,
                                           INSTR (
                                              details.new_value_str,
                                              '-',
                                              1,
                                              1)
                                           - 1)
                                           AS NEW_PREFIX,
                                        overview.from_event_time,
                                        CASE
                                           WHEN SUBSTR (
                                                   details.
                                                    old_value_str,
                                                   1,
                                                   INSTR (
                                                      details.
                                                       old_value_str,
                                                      '-',
                                                      1,
                                                      1)
                                                   - 1) =
                                                   SUBSTR (
                                                      details.
                                                       new_value_str,
                                                      1,
                                                      INSTR (
                                                         details.
                                                          new_value_str,
                                                         '-',
                                                         1,
                                                         1)
                                                      - 1)
                                           THEN
                                              'OK'
                                           ELSE
                                              'DELETE'
                                        END
                                           AS COMPARE
                                   FROM    audit_trail overview
                                        INNER JOIN
                                           audit_info details
                                        ON overview.serial =
                                              details.serial
                                  WHERE TO_CHAR (SYSDATE, 'IW-YYYY') =
                                           TO_CHAR (
                                              overview.from_event_time,
                                              'IW-YYYY')
                                        AND details.field_name =
                                               '__99__Department'
                                        AND overview.action = 'Update'
                                        AND CASE
                                               WHEN SUBSTR (
                                                       details.
                                                        old_value_str,
                                                       1,
                                                       INSTR (
                                                          details.
                                                           old_value_str,
                                                          '-',
                                                          1,
                                                          1)
                                                       - 1) =
                                                       SUBSTR (
                                                          details.
                                                           new_value_str,
                                                          1,
                                                          INSTR (
                                                             details.
                                                              new_value_str,
                                                             '-',
                                                             1,
                                                             1)
                                                          - 1)
                                               THEN
                                                  'OK'
                                               ELSE
                                                  'DELETE'
                                            END = 'DELETE'
                                        AND REPLACE (
                                               overview.entity_key,
                                               'user_id=',
                                               '') NOT LIKE
                                               'EXT%'
                                        AND details.old_value_str LIKE
                                               'INT%'
                                        AND details.new_value_str NOT LIKE
                                               'INT%'))
             AND a.user_id = b.user_id
             AND (   b.rss_type = 'TEST14'
                  OR b.rss_type = 'TEST27'
                  OR b.rss_type = 'TEST22'
                  OR b.rss_type = 'TEST26'
                  OR b.rss_type = 'TEST23'
                  OR b.rss_type = 'TEST39'
                  OR b.rss_type = 'TEST19'
                  OR b.rss_type = 'TEST12'
                  OR b.rss_type = 'TEST16'
                  OR b.rss_type = 'TEST09'
                  OR b.rss_type = 'TEST05'
                  OR b.rss_type = 'TEST37'
                  OR b.rss_type = 'TEST34'
                  OR b.rss_type = 'TEST1')
          ORDER BY my_order; 
```

您可以在没有重复代码的情况下重写查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:33:30.707

创建一个像

```
create view details
as
select d.*, 
       substr(d.old_value_str, 1, instr(details.old_value_str, '-', 1, 1) - 1) as old_prefix, 
       substr(d.new_value_str, 1, instr(details.new_value_str, '-', 1, 1) - 1) as new_prefix,
       case
         when substr (d.old_value_str, 1, instr (d.old_value_str, '-', 1, 1) - 1)
               = substr (d.new_value_str, 1, instr (d.new_value_str, '-', 1, 1) - 1)
         then
           'OK'
         else
           'DELETE'
       end as compare
  from audit_info d; 
```

（或在 a`with clause`而不是视图中使用它）

然后只是参考

```
 WHERE a.user_id IN (SELECT user_id
                       FROM (SELECT REPLACE (overview.entity_key,
                                             'user_id=',
                                             '')
                                       AS USER_ID,
                                    details.old_value_str,
                                    OLD_PREFIX,
                                    details.new_value_str,
                                    NEW_PREFIX,
                                    overview.from_event_time,
                                    COMPARE
                               FROM    audit_trail overview
                                    INNER JOIN  details
                                    ON overview.serial = details.serial
                              WHERE TO_CHAR (SYSDATE, 'IW-YYYY') =
                                       TO_CHAR (
                                          overview.from_event_time,
                                          'IW-YYYY')
                                    AND details.field_name =
                                           '__99__Department'
                                    AND overview.action = 'Update'
                                    AND CASE
                                           WHEN old_prefix =
                                                   new_prefix
                                           THEN
                                              'OK'
                                           ELSE 
```

ETC..

# android - 将按钮添加到软键盘

> ID：15065398
> 
> 赞同：0
> 
> 时间：2013-02-25T10:58:52.127
> 
> 标签：android, android-softkeyboard

我正在尝试将按键添加`@`到`+`软键盘，但找不到方法。有人知道这是否可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:01:25.250

您不直接将按钮添加到键盘。但是在 EditText 上，您暗示输入将是一个电子邮件地址，并且如果可用的键盘具有它的布局，它将显示。

您想将 XML 上的输入类型（或通过代码也应该工作）设置为`textEmailAddress`

# maven - 从分析中排除文件夹

> ID：15065400
> 
> 赞同：27
> 
> 时间：2013-02-25T10:58:53.457
> 
> 标签：maven, sonarqube

我浏览了互联网并尝试了一百万种不同的方法，但没有找到答案。

当我使用 maven 启动它（例如 mvn sonar:sonar）时，有什么方法可以从声纳分析中排除一些包含源文件的文件夹？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-25T12:45:05.920

您可以使用“sonar.exclusions”属性使用模式排除源文件：请参阅[http://docs.sonarqube.org/display/SONAR/Analysis+Parameters](http://docs.sonarqube.org/display/SONAR/Analysis+Parameters)

# asp.net-mvc - 使用静态内容在网站上进行全文搜索。Lucene.net 与弹性搜索

> ID：15065403
> 
> 赞同：2
> 
> 时间：2013-02-25T10:59:06.307
> 
> 标签：asp.net-mvc, elasticsearch, lucene.net

我正在构建一个带有静态内容（没有 DB）的 ASP.NET MVC 站点，我将在其中实现全文搜索。

我可以使用两个工具：

1.  Lucene.Net
2.  [弹性搜索](http://www.elasticsearch.org/)

我开始研究 Lucene.Net，但我找不到 ASP.NET MVC 示例。

我找到了如何在[ASP.NET](http://ifdefined.com/blog/post/Full-Text-Search-in-ASPNET-using-LuceneNET.aspx)中使用它。
[在 ASP.NET MVC 站点中正确构建 Lucene.Net 使用](https://stackoverflow.com/questions/3480974/proper-structuring-of-lucene-net-usage-in-an-asp-net-mvc-site)

我的问题是：什么是 ASP.NET MVC 应用程序的最佳选择，并且有很好的文档/示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:23:54.830

我的观点弹性搜索将是简单的选择。

[使用 Elastic Search 扩展 MVCMusicStore](http://joelabrahamsson.com/entry/extending-aspnet-mvc-music-store-with-elasticsearch)

[MVC 上关于 Lucene](http://www.codeproject.com/Articles/320219/Lucene-Net-ultra-fast-search-for-MVC-or-WebForms)的代码项目文章

一个[问题的简单提示](https://stackoverflow.com/questions/3480974/proper-structuring-of-lucene-net-usage-in-an-asp-net-mvc-site)

这是一个[类似的问题](https://stackoverflow.com/questions/7641574/lucene-net-in-asp-net-mvc-application)

关于类似问题的另一行在[这里](https://stackoverflow.com/questions/tagged/lucene.net?sort=frequent)。

# .net - 如何在 VB.NET 中与服务器交换数据包？

> ID：15065408
> 
> 赞同：3
> 
> 时间：2013-02-25T10:59:18.903
> 
> 标签：.net, vb.net, sockets, udp, udpclient

我还是 vb.net 的新手。我为我的英语道歉。

我想从服务器获取游戏服务器信息。服务器正在使用 GameSpy 协议。为了获取信息，您必须发送请求。服务器将回复它，您需要根据此服务器响应发送另一个数据包。然后服务器将向您发送信息。我知道要发送什么数据包以及预期接收什么数据包，这不是问题。

我被困在实际上从服务器接收答案。使用wireshark，我可以看到我的程序正确地将数据包发送到服务器并且服务器对其进行了响应。但是，我不确定如何获得对我的程序的响应。

这就是我发送它的方式：

```
 Dim sock As UdpClient
    Dim ip As String = "5.9.204.5"
    Dim port As Int32 = 2302

    Try
        sock = New UdpClient()
        sock.Connect(ip, port)

        Dim Bytes() As Byte = {&HFE, &HFD, &H9, &HFF, &HFF, &HFF, &H1}
        sock.Send(Bytes, Bytes.Length)

    Catch ex As Exception
        MsgBox(ex.Message)
    End Try 
```

这是该数据包的屏幕截图，该服务器发送给我：http: [//i.stack.imgur.com/tuXAy.png](http://i.stack.imgur.com/tuXAy.png)

我怎样才能将该数据包接收到我的程序中？我还计划查询一些其他服务器，它们在相同的 IP 但在不同的端口上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:38:44.510

愿此示例代码能帮助您了解
[简单的 UDP 客户端示例](http://social.msdn.microsoft.com/forums/en-US/netfxnetcom/thread/92846ccb-fad3-469a-baf7-bb153ce2d82b/)

# php - 如何插入新事件不属于其他事件之间的日期？

> ID：15065409
> 
> 赞同：0
> 
> 时间：2013-02-25T10:59:29.900
> 
> 标签：php, mysql

我有一个由 event_id、event_name、event_start_date 和 event_end_date 组成的“事件”表。

我遇到的问题是，在插入新事件时，我需要检查在新指定的新事件的开始日期和结束日期之间是否没有以前的事件。

event_to_date 和 event_form_date 之间不能有两个事件。

我正在使用 PHP 和 MySql。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:17:38.780

您应该使用 SQL 检查将发生冲突的事件数：

```
<?php

// do your mysql connection

// count collided events
$sql = 'SELECT COUNT(*) as count FROM events WHERE event_start_date <= "'.
  mysql_real_escape_string($new_event_end_date).'" AND event_end_date >= "'.
  mysql_real_escape_string($new_event_start_date).'"';

$result = mysql_query($sql);

if (($row = mysql_fetch_assoc($result)) != FALSE) {
  if ($row['count'] == 0) {
    // insert the event normally
  } else {
    trigger_error('Error: There are '.$row['count'].' event(s) within this period.');
  }
} else {
  trigger_error('Unknown server error: '.mysql_error());
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:18:06.897

本质上，您正在寻找重叠，这是一种伪类，其中 Candidate_X 是传入数据，existing_Y 是您的数据库中的数据。

解决方案将取决于您存储日期的字段类型。

毫无疑问，这可以改进，也许使用 BETWEEN 等。

```
SELECT ID from events WHERE
(candidate_from < existing_to
AND 
candidate_to > existing_to)
OR
(candidate_to > existing_from
AND
candidate_to < existing_to) 
```

如果这产生任何结果，那么这意味着您的数据库中有一些东西会重叠，因此您可以返回事件的 ID。

顺便说一句，这未经测试。

# php - 为什么 Jquery 会重置表单值

> ID：15065413
> 
> 赞同：0
> 
> 时间：2013-02-25T10:59:37.037
> 
> 标签：php, jquery, forms, reset

有什么办法可以防止 Jquery 清除表单值？

我制作了以下 Jquery 脚本，它基本上将表单 POST 数据发送到 php 函数，然后如果 PHP 输出成功则重定向到新页面，否则会显示错误。

```
 $('#update').click(function(e) {
   e.preventDefault(); 
   $.ajax({
   type: "POST",
   url: 'function.php',
   data: $(this).serialize(),
   success: function(data)
   {
   if (data === 'Success') {
   window.location = 'acc.php';
   }
   else {
   alert('Please try again.');
  }

}

});

}); 
```

通过回显一个 php 变量来填充表单值，如下所示：

```
 <input type="text" name="name" id="name" value="<?php echo $name ?>"> 
```

页面加载时一切正常，但是在我通过前端表单更新字段的值并点击提交后，Jquery 删除了字段的所有值，将空白值发送回 php（输入数据库）并重定向到新页面，因为它正在返回成功消息。

我删除了 Jquery 并尝试将表单直接发送到 php，它工作正常，所以这绝对是一个 Jquery 问题。

编辑： PHP 变量是从另一个函数中提取的，当该特定页面首次加载时，最初会正确显示在字段中。

关于问题可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:06:23.133

尝试改变：

```
data: $(this).serialize(), 
```

至

```
data: $("#your_form_id").serialize(), 
```

或者

```
$('form').submit(function() {      
  $.ajax({
   type: "POST",
   url: 'function.php',
   data: $(this).serialize(),
   ....
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:06:50.493

您（可能 - 需要查看页面 HTML 才能确定）调用`.serialize()`错误的元素。

您有一个`click`事件处理程序绑定到 id 的元素`update`。我猜这是您希望用户单击以发送 AJAX 请求的按钮或链接。在该事件处理函数的上下文中，`this`将是您单击的元素，因此调用`$(this).serialize()`将尝试序列化按钮或链接，而不是表单。

您想要的是：

```
$('#id-of-your-form').serialize() 
```

或者，如果您的页面上只有一个`<form>`元素，您可以使用：

```
$('form').serialize(); 
```

顺便说一句，这似乎应该由服务器端验证处理（因此它拒绝空白值）。

# java - java类加载器按什么顺序加载类？

> ID：15065415
> 
> 赞同：2
> 
> 时间：2013-02-25T10:59:40.600
> 
> 标签：java, classloader

我在类路径中有两个不同版本的库。类加载器将加载哪个版本？我怎么能改变它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:03:58.270

如果你有

```
lib-v1.jar:lib-v2.jar 
```

然后就可以了。`lib-v1.jar`将首先加载（类似于`PATH`）。

我可能会在实践中避免这种情况（除了用于测试等）。如果您引用一个`lib-v2.jar`不在其中的库类`lib-v1.jar`（如果 API 已停用，则可能），它可能会让人感到困惑。这样，您将从 v2 加载*初始*类，并从 v1 加载更多公共类，这些可能不兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:02:19.060

这取决于您将此库列表提供给 JVM 的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:02:21.893

Classloader 没有关于您的 jar 版本的信息。一般来说，您应该避免这种情况。您应该在类路径中保存最新版本

# mysql - MySQL 的 auto_increment 不增加 1

> ID：15065416
> 
> 赞同：1
> 
> 时间：2013-02-25T10:59:44.780
> 
> 标签：mysql, auto-increment

每次插入一行时，我希望 auto_increment 递增 1。如果我稍后删除中间的一行也没关系，我总是希望它增加 1。

问题是 MySQL 一直递增 10。它从 1 变为 11，等等。

我已经调整了 auto_increment、auto_increment_increment、auto_increment_offset，但在适当的情况下将它们设置为 1 或 0 均无济于事。

编辑：

这些是行动：

`SET @@auto_increment_offset=1`

`ALTER TABLE posts AUTO_INCREMENT = 0`或 1

`SET @@auto_increment_increment=1;`

此外，我正在为这个特定的表使用 MYISAM 引擎，尽管它似乎发生在没有该引擎的另一个表上。我使用 MISAM 的原因是因为它允许在多个索引上自动添加。

而且我无法重新启动我的数据库，因为它在 heroku 上的共享服务器上运行。如果它没有在其他地方解决，我也不明白这是如何重复的。

# active-directory - DirSync 和 Office 365 - 我如何同步用户？

> ID：15065419
> 
> 赞同：0
> 
> 时间：2013-02-25T10:59:58.637
> 
> 标签：active-directory, office365, windows-server-2012

几天前，我在 Office365 和 AD 上打开了 DirSync。不幸的是，未在 Office 365 帐户上创建的所有用户都已创建并与域同步。

我在**Windows Server 2012上工作**

我得到了这样的信息：

> [UserPrincipalName user@domain.com;WindowsLiveNetId System.Collections.Generic.List`1[System.Byte];]

这个问题的解决方案大概在这里：

[问题解决方案](http://support.microsoft.com/kb/2647098) 或 [Microsoft 解决方案 #1](http://technet.microsoft.com/en-us/library/hh852469.aspx#bkmk_adcleanup)

但是我怎样才能在不删除他们的情况下同步这些用户呢？**我不能丢失他们的数据和电子邮件。**你知道有什么解决办法吗？

更新说明：

> 我将尝试比乞讨更好地描述我的问题。
> 我的公司有 AD :) 我们使用 Office 365 - 直到几天前我们打开 DirSync。不幸的是，有一些严重的问题。只有尚未在 Office 365 中创建的用户由 AD 创建并完全同步。在打开 DirSync 之前已在 Office 365 中创建的用户尚未同步。
> 我尝试更改 UPN -> AD 创建新用户。
> 我尝试使用 MOSDAL 和 Office 365 部署准备工具 - 没有任何效果。
> 我没有任何想法来解决这个问题。您有任何解决方案，指导，建议吗？

此致。

坦克的任何信息！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T14:00:21.040

dirsync 单向同步。在 Office 365 中创建的对象无法与您的本地 AD 同步。目录同步激活后，您的 AD 将成为“授权来源”。

# c# - 根据内部方法调用的结果停止方法的进一步执行

> ID：15065422
> 
> 赞同：1
> 
> 时间：2013-02-25T11:00:07.510
> 
> 标签：c#, .net

情节是这样的 - 我有一个`Save()`方法可以调用自身的验证方法，我想确定如果验证方法出现错误，该`Save()`方法的执行将停止。我所做的是制定一种`bool`验证方法：

```
protected virtual bool IsNullOrEmptyControl(params Control[] controls)
        {
            bool validationFlag = false;
            foreach (Control ctrl in controls)
            {
                if (string.IsNullOrWhiteSpace(ctrl.Text))
                {
                    ctrl.BackColor = System.Drawing.Color.Yellow;                
                    if (validationFlag == false)
                    {
                        ctrl.Focus();
                        validationFlag = true;
                    }
                }
            }
            if (validationFlag == true)
            {
                MessageBox.Show("The fields in yellow could not be empty", "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return false;
            }
            return true;
        } 
```

并从我的`Save()`方法中调用它：

```
public bool Save()
{
some code...
IsNullOrEmptyControl(txtClientCode, txtClientName);
some code..
clientService.Save(entity);
} 
```

我认为因为我的`IsNullOrEmptyControl()`方法是`bool`如果它返回，`false`那么这将意味着停止进一步的代码执行，`Save()`但似乎我错了。那么这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:04:21.607

`IsNullOrEmptyControl`方法只返回值。您应该在我们的代码中检查此值并对其做出反应

```
bool checkResult = IsNullOrEmptyControl(txtClientCode, txtClientName);
if(checkResult == false)
{
    return false;
}
some code..
clientService.Save(entity); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:04:34.777

您确实应该将验证方法的返回值分配给一个变量，并在调用之前检查它`clientService.Save()`。

此外，您可能想在`foreach`上面的循环中放一个中断，就在您将标志设置为`true`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:02:51.483

我认为代码应该是：

```
public bool Save()
{
  some code...
    if(IsNullOrEmptyControl(txtClientCode, txtClientName)) {  
      some code..
      clientService.Save(entity);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T11:02:55.040

您应该围绕您的保存调用创建一个 if 语句。如果`IsNullOrEmptyControl`返回 false`clientService.Save(entity);`则不会执行。

```
public bool Save()
{
    //some code...
    if(IsNullOrEmptyControl(txtClientCode, txtClientName))
    {
        //some code..
        clientService.Save(entity);
    }
} 
```

# php - 在 Zend_Form_Element_Select 中向选项数组添加额外元素

> ID：15065423
> 
> 赞同：1
> 
> 时间：2013-02-25T11:00:13.050
> 
> 标签：php, zend-framework, zend-form, options

基本上，我需要在使用 Zend 创建的选择框中包含一些额外的数据。当前标记如下：

```
<select>
    <option label="Canadian Dollar ($)" value="1">Canadian Dollar ($)</option>
    <option label="Euro (€)" value="2">Euro (€)</option>
    <option label="US Dollar ($)" value="3">US Dollar ($)</option>
</select> 
```

我试图实现的标记如下（注意附加的“数据货币类型”属性）：

```
<select>
    <option label="Canadian Dollar ($)" value="1" data-currency-code="CAD">Canadian Dollar ($)</option>
    <option label="Euro (€)" value="2" data-currency-code="EUR">Euro (€)</option>
    <option label="US Dollar ($)" value="3" data-currency-code="USD">US Dollar ($)</option>
</select> 
```

使用 Zend 创建表单，如下所示：

```
$element = new Zend_Form_Element_Select(self::NAME);

/* -- OMMITED DB CODE --*/

$element->setOptions($options); 
```

$options 是一个数组，格式为：array('1' => 'Value1', '2'=> 'Value2').. 等等。

我的问题是，有没有办法使用 Zend ->setOptions($opts) 将额外的元素添加到“选项”元素中？或者我可能不知道的任何事情。

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:51:49.380

呈现元素的`FormSelect`视图助手不支持`<option>`标签上的附加属性，因此实现这一点的唯一方法是用您自己的实现覆盖该助手。助手类是`Zend_View_Helper_FormSelect`，所以如果你看一下它的代码，你应该能够看到它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:12:50.867

请使用 setArribute 方法添加附加属性。您可以将 data-currency-code 添加为属性。

# django - 如何配置 Apache 别名设置让 django 调试工具栏正常工作？

> ID：15065427
> 
> 赞同：4
> 
> 时间：2013-02-25T11:00:30.873
> 
> 标签：django, apache, osqa, django-debug-toolbar

[我在OSQA](http://osqa.net)有问题。任何时候，我尝试进入用户页面，都会出现“500 错误”，例如：http: [//turkrusforum.com/users/2/mertnuhoglu/](http://turkrusforum.com/users/2/mertnuhoglu/)

我检查了错误日志。但是那里什么都没有。我想`django-debug-toolbar`更多地安装和调试问题。

我把`DEBUG = True`和`INTERNAL_IPS`放入`settings.py`. 但我仍然看不到调试工具栏。

[这里](https://github.com/OSQA/osqa/blob/master/HOW_TO_DEBUG)说在 Apache 下，这个问题可能与 Alias 设置有关。

这是`VirtualHost`我`httpd.conf`文件中的定义：

```
<VirtualHost *:26903>
  ServerName turkrusforum.com
  KeepAlive Off
  WSGIDaemonProcess turkrusforum.com processes=1 python-path=/home/mertnuhoglu/webapps/otrf:/home/mertnuhoglu/webapps/otrf/osqa:/home/mertnuhoglu/webapps/otrf/lib/python2.6 threads=1 inactivity-timeout=360 display-name=[wsgi-otrf]httpd
  WSGIProcessGroup turkrusforum.com
  WSGIScriptAlias / /home/mertnuhoglu/webapps/otrf/otrf.wsgi
</VirtualHost> 
```

谁能帮我找出如何配置别名设置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:11:27.873

要记住几件事：

1.  Django_Toolbar 仅在 INTERNAL_IPs 与请求页面的机器的 IP 地址匹配时显示。

2.  它查看 WSGI Apache 模块应设置的 HTTP_X_FORWARDED_FOR 标头（但可能不设置，或设置不正确）。

3.  如果它没有找到该标头，它会查看 REMOTE_ADDR，它在代理设置中始终为 127.0.0.1。

因此，您需要验证您的设置实际上是否正确设置了 HTTP_X_FORWARDED_FOR。

简单的方法是制作一个视图，然后这样做：

```
def check_forward(request, *args, **kwargs):
    return HttpResponse(request.META.get('HTTP_X_FORWARDED_FOR', None)) 
```

映射该 URL 并查看该标头是否设置正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-14T18:54:11.057

当您右键单击网页并检查时，您可以在 chrome 控制台中发现某些 css 和 html 文件具有 404 作为响应。

```
/static/debug_toolbar/css/toolbar.css
/static/debug_toolbar/js/toolbar.js
/static/debug_toolbar/img/ajax-loader.gif 
```

这些是 django 工具栏显示面板所需的静态资源。在我的项目的静态文件夹中找不到指定的资源。通过更多调试，我发现添加到已安装应用程序的 django-debug-toolbar 正在为开发框中的静态内容提供服务。当 django 项目托管在 apache 上时，所有静态文件默认别名为静态文件夹。由于与 django_toolbar 相关的文件不存在，服务器返回 404 not found 错误。这可以通过将 Python27\Lib\site-packages\debug_toolbar\static 中的 debug_toolbar 复制到项目静态文件夹中来解决。

# c# - 阻止用户使用最后 5 个密码？

> ID：15065429
> 
> 赞同：11
> 
> 时间：2013-02-25T11:00:41.140
> 
> 标签：c#, asp.net-mvc-3

我要求强制用户在 90 天后更改密码。这适用于以下内容：

```
if (memberUser.LastPasswordChangedDate.Date.AddDays(90) < DateTime.Now.Date)
{
     return RedirectToAction("MyChangePasswordMethod", "MyController");
} 
```

然而，我的另一个要求是用户使用的最后 5 个密码不能重复 - asp.net 是否内置了类似的东西？我在存储上次密码的 aspnet db 表中看不到任何内容。我是否将最后一个密码值存储在我自己的数据库表中，然后将输入的新密码字段与我自己的自定义数据库表中的用户值进行比较？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-25T11:04:24.830

正如您发现的那样，没有内置任何内容，因此您必须为用户存储以前的密码 - 确保它们经过散列或加密 - 并检查该列表以确保它们没有重复使用。确保您使用相同的盐进行散列/加密，否则您将永远无法匹配相同的密码。

我会存储他们以前的所有密码。这意味着当它们发生 5 次更改时，您不必从表中清除旧数据，并且如果要求更改为不重用最后 10 或 15 次更改，您将拥有数据。如果您还存储了密码更改的日期，您可以建立一个检查来说明过去 12 个月内没有重复使用。

当您存储散列/加密密码并检查是否有可能从系统中获取纯文本版本时。

我有一个“UserId”、“Password”和“DateChanged”的表。然后，您可以找到该用户的最后 N 个密码，并将新密码的散列/加密版本与此列表进行比较：

```
var encryptedPassword = MembershipProvider.EncryptPassword(password);
int numberOfReuse = 5;  // or configurable
var historiesQuery = (from histories in dataContext.GetTable<PasswordHistory>()
                      where histories.UserId == userId
                      orderby histories.PasswordDate descending
                      select histories.Password).Take<string>(numberOfReuse);

return historiesQuery.Contains<string>(enycryptedPassword); 
```

如果密码已被使用，则返回 true。

要进行基于日期的检查：

```
var encryptedPassword = MembershipProvider.EncryptPassword(password);
DateTime testDate = DateTime.Now.AddMonths(-12);  // configurable
var historiesQuery = (from histories in dataContext.GetTable<PasswordHistory>()
                      where histories.UserId == userId
                      and histories.PasswordDate >= testDate
                      orderby histories.PasswordDate descending
                      select histories.Password);

return historiesQuery.Contains<string>(enycryptedPassword); 
```

# c# - 如何保存.csv？

> ID：15065435
> 
> 赞同：0
> 
> 时间：2013-02-25T11:01:06.280
> 
> 标签：c#, csv

我有一个从 datatable 获取 csv 的代码。但我无法保存 csv 格式的文件。我怎样才能保存？

```
File.WriteAllText("test.csv", sb.ToString()); 
```

这不工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:05:56.097

你为什么不使用 xls 或 xlsx 而不是 csv？如果您想使用 xls 或 xlsx，您可以查看 nopcommerce 开源项目源代码。你可以从

> [http://nopcommerce.codeplex.com/downloads/get/598641](http://nopcommerce.codeplex.com/downloads/get/598641)

然后打开项目

> 视觉工作室**2012**

转到库解决方案文件夹下的 Nop.Services 项目。该项目中有一个名为“ExportImport”的文件夹，您可以查看代码。

但是如果你想要 csv 你可以看看下面的帖子

[写入 CSV 文件并导出？](https://stackoverflow.com/questions/3777874/write-to-csv-file-and-export-it)

[如何创建 CSV Excel 文件 C#？](https://stackoverflow.com/questions/2422212/simple-c-sharp-csv-excel-export-class)

[https://stackoverflow.com/questions/12418520/jquery-c-sharp-export-to-csv](https://stackoverflow.com/questions/12418520/jquery-c-sharp-export-to-csv)

[http://www.codeproject.com/Articles/8411/C-class-library-for-exporting-data-to-CSV-Excel-fi](http://www.codeproject.com/Articles/8411/C-class-library-for-exporting-data-to-CSV-Excel-fi)

# python - 为什么条件在使用 python 计算单词时会出错？

> ID：15065436
> 
> 赞同：1
> 
> 时间：2013-02-25T11:01:12.860
> 
> 标签：python, regex, python-2.7

```
import re
file = open("pro.txt").readlines()
for lines in file:
        word= len(re.findall('\Wable#1\W', lines))
        if word in lines:
                sum=sum+1
print sum 
```

pro.txt

```
0         6          9     able#1
0         11         34    unable#1
9         12         22    able#1 
```

我想计算文件中的able#1的数量，如果我们只在循环中使用它但没有给我们准确的“总和”，那么当我们对其施加条件时，它会给出使用 int 的错误的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:03:20.260

`word`是整数，不是字符串。在条件之前将其转换为字符串。

```
word = str(len(re.findall('\Wable#1\W', lines)))
# or
if str(word) in lines:
    total += 1 
```

还要注意不要使用内置名称作为变量 - 这可能会导致问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:05:30.777

```
open(path).read().count("able#1") 
```

# ruby-on-rails - 从另一个本地分支推送到 heroku

> ID：15065438
> 
> 赞同：3
> 
> 时间：2013-02-25T11:01:15.757
> 
> 标签：ruby-on-rails, git, heroku

我有 2 个分支：开发，some_other_name。我已经将作为开发子分支的 some_other_name 分支推送到 heroku，我测试了我的代码然后切换到开发，在 dev 分支中做了一些代码更改，但是当我尝试将它推送到 heroku 时，我得到了下一个：

```
To git@myapp.git
 ! [rejected]        development -> master (non-fast-forward)
error: failed to push some refs to 'git@myapp.git'
hint: Updates were rejected because a pushed branch tip is behind its remote
hint: counterpart. Check out this branch and merge the remote changes
hint: (e.g. 'git pull') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

这意味着我必须将我的 some_other_name 分支合并到开发中。有没有办法不合并这些分支，而只推动开发？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T11:03:39.907

是的，你可以`--force`在推送到 heroku 时使用 option 来完成。

`$ git push -f heroku development:master`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-17T12:28:34.430

Heroku 推荐的方法是使用命令的 localbranch:master 格式：

```
git push heroku-staging develop:master 
```

`--force`可能有效，但也很危险。

# ios - Appixia mobile 中的屏幕转换

> ID：15065443
> 
> 赞同：0
> 
> 时间：2013-02-25T11:01:27.067
> 
> 标签：ios, appixia

是否可以选择或解释 appixia 生成的应用程序中的屏幕转换如何工作？目前，它似乎总是从一个屏幕“滑动”到下一个屏幕，但是，我看到了屏幕在垂直轴上翻转的例子。我无法复制这种行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:51:36.893

目前（iOS 的 Mobile Engine 5）有两种潜在的屏幕转换：

1.  **水平幻灯片**- 每当您显示活动的**新**实例时，就会出现此过渡。例如，您有一个项目列表并选择了一个项目 - 这将显示您的项目详细信息活动的一个新实例。这个新活动被推送到当前选项卡的当前 iOS 导航堆栈中（您可以通过按导航栏中的“返回”按钮返回堆栈）。滑动动画是 iOS 将新屏幕推入当前导航堆栈时执行的标准动画。请注意，当您的下一个活动位于**同一**选项卡中时，始终使用此转换。

2.  **垂直轴上的屏幕翻转**- 只要您显示活动的**现有**实例，就会出现此转换。例如，您在现有选项卡中有购物车活动，并且您希望在点击按钮时从不同的选项卡（如主屏幕）显示此现有活动。由于 Cart 活动已经存在（您不想创建新实例而是使用现有实例），因此使用不同的转换向用户表示这一点。请注意，当您的下一个活动位于**不同**的选项卡中时，始终会使用此转换。

您如何定义您想要的两个选项中的哪一个？在这两种情况下，您都可以通过使用 conf.xml 中的某种`Module`字段来指定到下一个活动模块的链接。是否创建新实例或使用原始实例取决于`Singleton`此模块的字段。90% 的模块将具有`Singleton = No`. 这始终是默认行为，因为您通常需要新实例。`Singleton = Yes`例如购物车活动的特殊情况。这是因为您希望始终使用相同的购物车实例，而不是在链接到新的购物车实例时推送它。

如果您想要一个示例来显示差异，请尝试以下操作： 使用您的一个选项卡并进行活动`Singleton = Yes`- 您的应用程序的 CMS 屏幕之一是一个不错的选择。然后，在其他一些块模块中（例如`StaticBlocksView`- 例如在您的主屏幕中），创建一个按钮块。在此按钮块中添加`Module`指向 CMS 活动的链接。每当点击此按钮时，该应用程序都会将选项卡切换到您的 CMS 活动。如果您`Singleton = No`在 CMS 屏幕上进行更改，只要点击该按钮，就会推送一个新的实例。

# c++ - C++ 像这样将数组从 char 转换为 unsigned int 是否正确且安全？

> ID：15065446
> 
> 赞同：0
> 
> 时间：2013-02-25T11:01:44.187
> 
> 标签：c++

**目标：**正确快速地将数组从 char 转换为 unsigned int。

**检查我的工作 - 请：**

```
...
// NOTE:
// m_chFileBuffer is a member/variable from a class.
// m_nFileSize is also a member/variable from a class.
// iFile is declared locally as std::ifstream

// Calculate the size of iFile and copy the calculated
// value to this->m_nFileSize
iFile.seekg( 0, std::ios::end );
this->m_nFileSize = iFile.tellg( );
iFile.seekg( 0, std::ios::beg );

// Declare this->m_chFileBuffer as a new char array
this->m_chFileBuffer = new char[ this->m_nFileSize ];

// Read iFile into this->m_chFileBuffer
iFile.read( this->m_chFileBuffer, this->m_nFileSize );

// Declare a new local variable
::UINT *nFileBuffer = new ::UINT[ this->m_nFileSize ];

// Convert this->m_chFileBuffer from char to unsigned int (::UINT)
// I might be doing this horribly wrong, but at least I tried and
// will end up learning from my mistakes!
for( ::UINT nIndex = 0; nIndex != this->m_nFileSize; nIndex ++ )
{
    nFileBuffer[ nIndex ] = static_cast< ::UINT >( this->m_chFileBuffer[ nIndex ] );

    // If defined DEBUG, print the value located at nIndex within nFileBuffer
    #ifdef DEBUG
    std::cout << nFileBuffer[ nIndex ] << ' ';
    #endif // DEBUG
}

// Do whatever with nFileBuffer
...

// Clean-up
delete [ ] nFileBuffer; 
```

**有事吗？：** 如果有更好的方法来完成目标，请在下方留言！

**更多：** 是否可以将此概念应用于 unsigned int std::vector？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:07:44.160

对于这样一个简单的任务来说，代码太多了，你只需要这个。

```
std::vector <unsigned int> v;
std::copy (std::istream_iterator <char> (iFile), 
           std::istream_iterator <char> (), 
           std::back_inserter (v)); 
```

甚至更短（感谢@111111）：

```
std::vector <unsigned int> v 
{ 
       std::istream_iterator <char> (iFile),
       std::istream_iterator <char> ()
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:10:30.880

```
vector<char> buf(file_size);
/* read file to &buf[0] */
vector<unsigned int> uints(buf.size());
copy(buf.begin(), buf.end(), uints.begin()); 
```

您的原始 new/delete-usage 不是异常安全的。经验法则：永远不要在你的代码中写 delete，只要你不是自己写析构函数。此外，可能会签署“char”，但不确定您在那里期待什么行为。

# c# - 如何根据应用设置值在 aspx 参考中创建链接？

> ID：15065452
> 
> 赞同：0
> 
> 时间：2013-02-25T11:02:06.457
> 
> 标签：c#, asp.net

需要来自 web.config 中应用设置值的经典 html 链接引用

```
<a href="<%$appSettings:link%>"+"search.asp" id="more01" title="More" target="_top" > 
```

它无法编译

> 解析器错误消息：不允许使用像“<%$appSettings:iframedomain%>”这样的文字表达式。请改用“ />”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:04:55.190

我会在代码隐藏中使其成为页面的方法或属性，例如：

```
public MyPage: Page
{

    protected string GetLink()
    {
        return ConfigurationManager.AppSettings["someKey"];
    }

} 
```

然后你可以把它带入标记：

```
<a href="<%= GetLink() %>" id="more01" title="More" target="_top"> 
```

你也可以这样做：

```
<a href="<%= ConfigurationManager.AppSettings["someKey"] %>"+"search.asp" id="more01" title="More" target="_top"> 
```

但恕我直言，它不那么整洁。

# cakephp - cakephp函数更新一行不起作用

> ID：15065458
> 
> 赞同：1
> 
> 时间：2013-02-25T11:02:31.467
> 
> 标签：cakephp, save, sql-update

我在使用 CakePHP 更新时遇到了这个麻烦。我尝试使用该功能更新我的数据库中的一行（见下文）：

```
function updateRow($amount, $user_id){

    $user_balance = $this->getUserBalance($user_id);

    //now update
    $balance['Balance']['id'] = $user_balance['Balance'][id];
    $balance['Balance']['amount'] = $user_balance['Balance'][amount] + $amount;

    $this->Balance->save($balance);
} 
```

如果我称它为 ONE time ，例如：

```
$this->updateRow(100,5); 
```

没关系。但是，如果我尝试调用它两次或更多次，例如：

```
$this->updateRow(100,5); 
$this->updateRow(200,5);
$this->updateRow(150,5); 
```

该函数被调用，但实际上只有最后一次更新是在 db 中完成的！（例如，初始金额值为 100。在三个通话结束时，我预期的金额值为 550 但它是 250！）

你有解决方案吗？提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:49:49.593

请参阅[CakePHP 的答案：用 save() 加/减？](https://stackoverflow.com/questions/11883470/cakephp-add-substract-with-save/11901870)以供参考。

您应该在这里使用原子方法 updateAll()。

# javascript - 用 require.js 加载 spin.js

> ID：15065463
> 
> 赞同：3
> 
> 时间：2013-02-25T11:02:42.200
> 
> 标签：javascript, requirejs, spin.js

我最近开始了一个 Javascript 项目，现在我将其移至 require.js。到目前为止，除了[spin.js](http://fgnass.github.com/spin.js/)库之外，一切都运行良好。当我尝试访问与 spin.js 相关的任何内容时，我收到以下错误消息：

> 未捕获的 ReferenceError：未定义微调器

我的`requirejs.config`样子是这样的：

```
requirejs.config({

    baseUrl: 'js',

        paths: {
            'jquery': 'lib/jquery',
            'spin': 'lib/spin',
    },

    shim: {
        'jquery' : {
            deps: [],
        },

        'spin' : {
            deps: [],
            exports: 'Spinner'
        },
    }
}); 
```

示例模块如下所示：

```
require(['spin'], 
    function(Spinner)
    {   
        new Spinner();
    }
); 
```

我正在使用，`shim config`因为我有一些其他具有依赖关系的模块。不过，其他一切似乎都加载得很好。我在这里想念什么？

## 编辑：

正如亚历克斯指出的那样，我的图书馆收录是错误的。对于在理解backbone.js 和require.js 有困难的每个人，我推荐[这本书](https://github.com/addyosmani/backbone-fundamentals)，尤其是关于模块化开发的章节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:52:06.433

不应在您的配置中填充自旋库。从 spin.js 源代码：

```
 if (typeof define == 'function' && define.amd)
    define(function() { return Spinner })
  else
    window.Spinner = Spinner 
```

它已经在最后被定义为一个模块，并且 window.Spinner 没有被创建为一个窗口对象（这就是它不应该被填充的原因）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-20T20:49:15.650

我有一个类似的案例。我没有添加到 shim 但忽略了在 Backbone 之后将 Spinner 添加到函数中，这导致它未定义。

```
define([
  'jquery',
  'underscore',
  'backbone',
  'spin'
],

function($, _, Backbone, Spinner) {
  var SpinnerView = Backbone.View.extend({

    initialize: function() {

      this.loadingAnimation();
    }, 
```

# iphone - NSLayoutConstraint 在 iOS 5.1 上崩溃，即使 AutoLayout 关闭

> ID：15065464
> 
> 赞同：0
> 
> 时间：2013-02-25T11:02:42.870
> 
> 标签：iphone, interface-builder

我已经按照这个不错的[教程](http://iphonedevelopment.blogspot.fr/2010/05/custom-alert-views.html)创建了一个支持文本输入的自定义警报视图。

我使用 Interface Builder 设计了警报视图 NIB。在 iOS 5.1 模拟器上运行时，发生错误`Could not instantiate class named NSLayoutConstraint`。

在 SO 上很快找到了解决这个问题的方法：我不得不`AutoLayout`为我的 XIB/NIB 停用。

这就是我所做的。但是，仍然会发生相同的错误。我仔细检查了，我的 Storyboard 和我的 XIB（自定义警报视图）都未选中 AutoLayout。

我想也许一些参考`NSLayoutConstraint`在项目的某个地方幸存下来，但`grep -i constraint **/**`没有给我任何结果。

**除了从头开始重新设计我的 NIB 之外，还有什么想法从一开始就关闭 AutoLayout 吗？（最后一招）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:14:28.123

我最终重新设计了视图，从一开始就停用了 AutoLayout。

它解决了这个问题。看起来我一直在遭受 XCode 中的错误。

# lotus-notes - Notesapi：如果笔记最初是加密的，MIMEConvertCDParts 会丢失（添加的）附件

> ID：15065466
> 
> 赞同：2
> 
> 时间：2013-02-25T11:02:46.183
> 
> 标签：lotus-notes, mime, lotus-domino, lotus

**设想：**

有两个 notes-client 用户 A 和 B，他们从发生以下情况的机器登录。

用户 A 是最后一个使用 notes 客户端的人（因此，notes.ini 包含她的信息）。而且，我工作的数据库是用户 B 的 nsf 文件。

**行动：**

我正在将文件附加到加密笔记，使用`NSFNoteAttachFile`. 附加后，我想使用`MIMEConvertCDParts`将注释转换为 MIME。（并用于`MIMEStreamOpen`将内容作为流获取）

我没有解密笔记的密钥/ID/密码。因此，当我将其转换为 时`MIMEConvertCDParts`，便笺的内容是

> "[此 MIME 文档的某些部分使用 Notes 证书加密，无法读取。]",

这是预期的。

**问题**

但是我之前添加的附件在转换后的流中丢失了（最初存在的附件仍然存在，但大小为零——也如预期的那样——因为我没有提供密钥/密码）

`MIMEConvertCDParts`我尝试在（转换）之前和之后转储注释的字段。

在转换之前，`$File`带有我的附件的“”对象作为字段之一存在，

但转换后，它不会显示在 MIME 中，而是转换将其添加到字段“ `$MIMETrack`”中。

> “CD-MIME 在 02.25.2013 10:30:02 AM 失败：您必须提供批量解密密钥才能提取此文件对象。”

我认为当我添加附件时，它是使用 NSF 文件的原始所有者（用户 B）的公钥（或存在的其他一些密钥）加密的。

**我需要知道的**

我如何告诉/强制notesapi在我添加文件时保持原样。即，无加密。

或者我如何在转换时要求它解密（如果它使用用户 A 自己的密钥进行加密）。我怎么知道用来加密附件的密钥是什么？

任何帮助，将不胜感激。

谢谢，小男孩。

PS：如果我将用户 B 的 nsf 文件带到一个从未意识到 B 的域/机器上，那么我在添加/获取附件时没有问题。这就是让我认为 B 的公钥可能为 A 所知的原因，当我添加到 B 的注释时，文件会自动加密。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:54:51.920

首先，B 的公钥是……公开的。它在 Domino 目录中。域中的每个人都知道它，因此每个人都可以为 B 加密文档。但是我对您的最后一段感到有些惊讶。我希望这个操作永远不会起作用。我不认为您可以在同一个笔记中混合加密和未加密的附件。

在任何情况下，有关文档为谁加密的信息都在 $Seal 项目中，这是一个 ITEM_NAME_NOTE_SEALUSERS 项目，但我不知道如果您没有密钥，是否可以从该字段中提取任何有用的信息. NSFNoteDecrypt 函数用于解密加密的笔记，假设您拥有私钥。如果您没有密钥，它将返回错误。查看 Notes C API 用户指南中的第 11-2 章。对于使用 Notes/DOmino 8.0.1 或更高版本加密的数据，首选 NSFNoteCipherDecrypt。

# android - 如何识别线性布局中一系列表格单元格的视图ID

> ID：15065467
> 
> 赞同：2
> 
> 时间：2013-02-25T11:02:49.593
> 
> 标签：android, listview, textview

我正在使用带有固定标题行的自定义列表视图构建的表格网格。
当用户单击其中一个固定标题单元格时，整个数据表将按该特定列排序。
我已经研究出如何通过将升序或降序箭头添加到现有标题/列标题来更改单击的标题单元格的文本（请参见下面的代码）。
但是，我还需要更改数据表中所有其他列标题单元格的文本，以便从其他标题单元格中删除任何现有的升序或降序箭头。

我遇到的问题是：如何在运行时找到其他列标题单元格的视图 ID。

请注意，无法通过从 xml 布局中搜索特定的 TextView ID 来找到这些视图 ID，因为所有表头单元格都是使用名为 text1 的通用 TextView id 创建的（请参阅下面用于表头的线性布局代码） ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/item_table1_header"
android:gravity="center"
android:orientation="vertical" >

<TextView
    android:id="@android:id/text1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" /> 
```

下面是用于创建表格单元格的 getView 代码，其中还包括内置的 OnClickListener。请注意，固定表标题行编号为 -1。

一旦我可以识别它们现有的 TextView ID，我将需要添加代码以更改标记为“TODO”的部分中现有标题单元格的文本：

```
@Override
public View getView(final int row, final int column, View converView, ViewGroup parent) {
    if (converView == null) {
        converView = inflater.inflate(getLayoutResource(row, column), parent, false);
    }
    setText(converView, getCellString(row, column));    
    converView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            if (row == -1) {        // clicked on header row cell
                for(int col=0; col<=getColumnCount(); col++){
                    if (col == column+1) {  
                      if (getColOrder(col) == 0  ||  getColOrder(col) == 2) {    
                          setText(v, getCellString(row, column) + " ↑");   // reset selected column header to ASC order
                          setColOrder(col, 1);
                      } else {    
                          setText(v, getCellString(row, column) + " ↓");   // reset selected column header to DESC order
                          setColOrder(col, 2);
                      }
                    } else {
                        setColOrder(col, 0);   // reset all other column headers to 0 (not ordered)
                        // TODO:
                        // here we need to change the text of all other header cells, using their view ids
                    }
                }
            } 
        }
    });     

    return converView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:58:48.283

我会让你的布局成为 View 的自定义子类。跟踪它的原始状态，以便您以后可以重置它。然后向你的新类添加一个公共的 reset() 函数，用初始值替换文本。最后，现在您不需要从适配器访问视图的内部属性。相反，您只需在标头上调用 reset() ，它们就会处理它们的内部状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:02:58.020

我找到了解决上述分配、存储和识别视图 ID 问题的解决方案，以便更新表头标题单元格。这是解决方案的更新工作代码：

```
@Override
public View getView(final int row, final int column, View converView, ViewGroup parent) {
    if (converView == null) {
        converView = inflater.inflate(getLayoutResource(row, column), parent, false);
        if (row == -1){
            converView.setId(column+2);         // assign new id to the cell view
            setHeaderId(column);        // store that view id in the header array
        }  
    }
    setText(converView, getCellString(row, column));
    converView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            if (row == -1) {        // clicked on header row cell                   
                for(int col=0; col<=getColumnCount(); col++){
                    if (col == column+1) {  // check if col = clicked column
                      if (getColOrder(col) == 0  ||  getColOrder(col) == 2) {    // 0 = not ordered, 1 = +" ↑"  ASC,  2 = +" ↓"  DESC
                          setText(v, getCellString(row, column) + " ↑");   // reset selected column header to ASC order
                          setColOrder(col, 1);
                      } else {    
                          setText(v, getCellString(row, column) + " ↓");   // reset selected column header to DESC order
                          setColOrder(col, 2);
                      }
                    } else {                    
                        int viewId = getHeaderId(col);                              // extract view id from the header array
                        if (viewId > 0) {                                           // to prevent updating header cells with unassigned view Id's
                            ViewGroup parent = (ViewGroup)v.getParent();            // parent = TableFixHeaders
                            View tv = parent.findViewById(viewId);                      
                            setText(tv, getCellString(row, col-1));      // update the header cell text with the original text string (from header text array)
                            setColOrder(col, 0);   // reset all other column headers to 0 (= not ordered)
                        }
                    }
                }

        }
    });     

    return converView;
} 
```

# mysql - HAVING 子句中的计算

> ID：15065473
> 
> 赞同：1
> 
> 时间：2013-02-25T11:02:58.847
> 
> 标签：mysql

我对以下 SQL 查询 (MySQL) 有疑问：

```
SELECT CAST(LEFT(SUBSTR(STORE.VALUE, LOCATE('timestamp":', STORE.VALUE)+11),13) AS UNSIGNED) as starttime
FROM STORE
HAVING starttime <= MIN(starttime)+600000; 
```

此查询返回 1 个值：`1344543364317`这是列 starttime 的最小值。

以下手动完成计算的查询返回更多值。

```
SELECT CAST(LEFT(SUBSTR(STORE.VALUE, LOCATE('timestamp":', STORE.VALUE)+11),13) AS UNSIGNED) as starttime
FROM STORE
HAVING starttime <= 1344543964317; 
```

为什么这个查询返回更多的值？

**编辑**

关于数据的更多解释：不幸的是，大多数数据都毫无用处。基本上该表只包含两列：Key、Value。关键在这里并不重要。该值包含如下内容：`{"changeset":"Z:1>6b|5+6b$Welcome to Etherpad Lite!\n\nThis pad text is synchronized as you type, so that everyone viewing this page sees the same text. This allows you to collaborate seamlessly on documents!\n\nEtherpad Lite on Github: http://j.mp/ep-lite\n","meta":{"author":"","timestamp":1344543364317,"atext":{"text":"Welcome to Etherpad Lite!\n\nThis pad text is synchronized as you type, so that everyone viewing this page sees the same text. This allows you to collaborate seamlessly on documents!\n\nEtherpad Lite on Github: http://j.mp/ep-lite\n\n","attribs":"|6+6c"}}}`

所以我基本上只是提取时间戳值并将其显示为一个名为 starttime 的虚拟列。starttime 列的前 10 个值是

```
1344543364317
1344543365939
1344543366439
1344543366454
1344543368794
1344553433259
1344553434054
1344553499779
1344553500871
1344553502104 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:18:03.827

您的值 1344543964317 远大于 4294967295，这是`UNSIGNED`整数的最大可能值。改为使用`BIGINT`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:48:36.177

它不是很优雅，但我有一个解决方案。好像不能用`startttime`在等式右边，所以需要重做原来的计算。

```
SELECT CAST(LEFT(SUBSTR(VALUE, LOCATE('timestamp":', VALUE)+11),13) AS UNSIGNED) AS starttime
FROM STORE
HAVING starttime <= 
    (SELECT MIN(CAST(LEFT(SUBSTR(STORE.VALUE, LOCATE('timestamp":', STORE.VALUE)+11),13) AS UNSIGNED)) FROM STORE) + 60000 
```

# gwt - 参考异步回调不良做法的响应？

> ID：15065479
> 
> 赞同：0
> 
> 时间：2013-02-25T11:03:11.170
> 
> 标签：gwt

今天我在我们的 GWT 代码中看到了一个方法，如下所示：

```
public Map< String, ResponseObject > getResponse( RequestObject requestObject ) {
    remoteServiceAsync = GWT.create( RemoteServce.class );
    final Map< String, ResponseObject > responseReference = new HashMap< String, ResponseObject >();

    remoteServiceAsync.doServerCall( requestObject, new AsyncCallback< ResponseObject >() {
      public void onFailure(Throwable caught) {
         // TODO: Do something with errors.
      }

      public void onSuccess( ResponseObject response ) {
        responseReference.put( "value", response );
      }
    } );

    return( responseReference );
}; 
```

我认为，这是一个非常糟糕的做法。你觉得这段代码怎么样？它适用于所有浏览器吗？它是一个“ `valid`”选项来阅读`data`吗？不得不提的是，数据是在程序后期访问的，所以不缺数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:38:48.010

返回那个真的很糟糕。`Hashmap`它完全打破了`RPC advantages`。

在那个方法中，它立即返回一个`empty hash-map`并稍后插入一个`Map`没有用的值。

并初始化

甚至不检查`(remoteServiceAsync!=null)`以下行

```
remoteServiceAsync = GWT.create( RemoteServce.class ); 
```

因此它将为每次调用进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T14:54:53.073

这里有2点要强调——

1）我们不知道异步调用什么时候返回，所以我们可以使用return语句来返回从RPC返回的对象。因此，responseReference 将始终为空。

2）我们不需要在每次需要触发异步调用时创建 RPC 实例。所以单例模式推荐用于这种类型的场景。

您的代码片段可以重构如下 -

```
ServiceAsync serviceasync = null;

getServiceAsync()
{
     if(serviceAsync == null)
     {
         serviceAsync = GWT.create( RemoteServce.class );
     }
     return serviceAsync;
}

AsynCallBack asyncCallBack;

getAsyncCallBack()
{
      if(asynvCallback != null)
      {
           return asyncCallback;
      }
      return new AsyncCallback< ResponseObject >() 
            {
                  public void onFailure(Throwable caught) 
                  {
                       // TODO: Do something with errors.
                  }

                   public void onSuccess( ResponseObject response ) 
                   {
                        // Do processing here with the response object ...
                   }
            } );    
} 
```

现在在调用 getResponse() 方法的地方替换该方法调用，执行以下操作 -

```
getServiceAsync().doServerCall( requestObject, getAsyncCallBack() ); 
```

因此，将只有一个服务实例和一个 asyncCallBack 实例。避免了创建多个对象，从而提高了性能。

# html - 将值设置为 p 标签

> ID：15065483
> 
> 赞同：0
> 
> 时间：2013-02-25T11:03:20.530
> 
> 标签：html, watin

我有以下 html 代码：

```
<html>
    <iframe title='xyz'>

    <html>

        <body id='123'>
            <p><\p>
        </body>

    </html>

    </iframe>
</html> 
```

我想在 p 标签中设置值“test”。请让我知道我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T15:15:28.973

WatiN 没有您正在寻找的二传手。你可以通过javascript来做到这一点。请在此链接上查看我的回答，了解我是如何为粗体标记做的；它不是最干净的，但它有效。同样的想法也适用于 ap 标签。

[如何为元素设置值？](https://stackoverflow.com/questions/14311633/how-do-i-set-a-value-for-an-element/14326537#14326537)

# sql-server-2008 - 到 SQL 服务器的 Powershell 连接字符串

> ID：15065484
> 
> 赞同：1
> 
> 时间：2013-02-25T11:03:22.030
> 
> 标签：sql-server-2008, powershell

嗨，我正在尝试在本地 PC 上执行 Powershell，但是使用来自远程 SQL 服务器的数据。

我有这样的脚本。这是错误的，因为我没有说明登录服务器的用户名和密码。谁能告诉我这样做的正确格式？

```
$SqlConnection = New-Object System.Data.SqlClient.SqlConnection
$SqlConnection.ConnectionString = "Server=10.10.1.34;Database=AMSDataWarehouseTest;user id=YQBGantt;password=123yqbgantt"
$SqlCmd = New-Object System.Data.SqlClient.SqlCommand
$SqlCmd.CommandText = "YQBreport1"
$SqlCmd.Connection = $SqlConnection
$SqlAdapter = New-Object System.Data.SqlClient.SqlDataAdapter
$SqlAdapter.SelectCommand = $SqlCmd
$DataSet = New-Object System.Data.DataSet
$SqlAdapter.Fill($DataSet)
$SqlConnection.Close()
$SQLResult =$DataSet.Tables[0]
$commands = $SQLResult | foreach-object -process { $_.output }> output.ps1
.\output.ps1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:08:44.613

尝试改用此连接字符串：

```
Data Source=10.10.1.34;Initial Catalog=AMSDataWarehouseTest;uid=YQBGantt;pwd=123yqbgantt 
```

此外，请确保 SQL Server 配置为[接受远程连接](http://blogs.msdn.com/b/walzenbach/archive/2010/04/14/how-to-enable-remote-connections-in-sql-server-2008.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-15T03:48:29.203

我在名为“Hodentek8”的笔记本电脑上有一个名为“RegencyPark”的 SQL Server 实例 2012。这些语句连接到我的 SQL Server 并使其打开。

```
PS C:\Users\Jayaram> $ConnectionString="Server=Hodentek8\RegencyPark;database=AdventureWorks2012;trusted_connection=true;"

PS C:\Users\Jayaram> $Connection = New-Object System.Data.SQLClient.SQLConnection($ConnectionString)

PS C:\Users\Jayaram> $Connection.Open()

PS C:\Users\Jayaram> $Connection.State
Open 
```

# javascript - 防止网址上的制表位

> ID：15065486
> 
> 赞同：1
> 
> 时间：2013-02-25T11:03:26.093
> 
> 标签：javascript, jquery, url, tabs

我正在使用选项卡在应用程序中导航控件。但问题是当到达最后一个元素时，将标签焦点放在地址栏上。是否可以从地址栏中删除选项卡索引并将焦点设置在第一个元素上。

我正在寻找这样的东西：但我找不到访问 url 对象的方法。

```
urlObj.setAttribute('tabindex', -1);
txtMyBox.setAttribute('tabindex', 1); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:22:00.800

您必须以编程方式检查焦点是否在最后一个输入框上，并将焦点设置为第一个使用`.focus()`

[在这里](http://jsfiddle.net/7PWRF/2/)看小提琴

您只需`document.body.firstElementChild`使用您选择的元素更改此部分，或者您可以使用`$('input').first().focus();`

# jquery-mobile - 无法在 jquery Mobile 主干中触发复选框事件

> ID：15065493
> 
> 赞同：2
> 
> 时间：2013-02-25T11:04:01.213
> 
> 标签：jquery-mobile, backbone.js, requirejs

我正在使用 jquery Mobile 和 Backbone 开发一个应用程序。该`click .check : toggleDone`事件没有被触发。我不知道原因。请帮忙。

```
var requestItemView = Backbone.View.extend({
tagName: "label",
template : $("#requestItemTemplate").html(),
events : {
    "click .check" : "toggleDone",
},
toggleDone: function() {
    console.log("clcik");
    this.model.toggle();
},
initialize: function() {
     console.log("requestItemInit");
},
render: function() {
    var tmpl = _.template(this.template);
    $(this.el).html(tmpl(this.model.toJSON()));     
    return this;
}}); 
```

这是我相同视图的模板

```
<script type='text/template' id='requestItemTemplate'>
<label>
  <input type="checkbox" class = "check" 
    <%= done ? 'checked="checked"' : '' %> data-theme="e">
    <%= requestorName%> :: <%=requestorEmailId%> : <%= requestorContactNo%>
  </input>
</label>
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T15:49:15.730

您不应该使用`click`- 移动 Safari 至少等待 300 毫秒来触发 click 事件，因为它试图决定是否`click`触发`dblclick`

你应该试着听`touchend`。

（脊柱[特别有](http://spinejs.com/mobile/docs/events)关于不使用的信息`click`）

# vbscript - 使用 VB 删除 ActiveDirectory 中的主目录

> ID：15065496
> 
> 赞同：1
> 
> 时间：2013-02-25T11:04:11.060
> 
> 标签：vbscript, active-directory, ldap, ado, adsi

我想使用 VB 在 AD 中搜索禁用帐户（超过 90 天并删除他们的主目录。以下脚本可以正常工作但**不能递归**:(

任何人都可以帮助使其工作吗？他将高度赞赏任何帮助:)

```
Option Explicit

Dim objOU, objUser, objFSO, strHomeDirectory, objTextFile

Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objOU = GetObject("LDAP://OU=users,DC=corp,DC=contoso,DC=com")

objOU.Filter = Array("user")

For Each objUser In objOU
if ( objuser.useraccountcontrol = 514 Or objuser.useraccountcontrol = 66050 ) And DateDiff("d", objUser.WhenChanged, Now) > 90 Then 
    ' Retrieve home directory.
    strHomeDirectory = objUser.homeDirectory
    ' Replace %username% with value of sAMAccountName attribute.
     strHomeDirectory = Replace(strHomeDirectory, "%username%", objUser.sAMAccountName)
    ' Delete the folder.
     objFSO.DeleteFolder strHomeDirectory
else
wscript.sleep 100
End If
Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:44:13.247

您通常会使用[LDAP 查询](http://technet.microsoft.com/en-us/library/aa996205%28v=exchg.65%29.aspx)来执行此操作。如果你能原谅这个无耻的插件，我前段时间写了一个[AD 查询类](http://www.planetcobalt.net/sdb/adquery.shtml)来简化这种任务。您可以将代码复制/粘贴到您的脚本中并像这样使用它：

```
Set fso = CreateObject("Scripting.FileSystemObject")

Set qry = New ADQuery
qry.Filter = "(&(objectClass=User)(objectCategory=Person)" & _
             "(userAccountControl:1.2.840.113556.1.4.803:=2))"
qry.Attributes = Array("sAMAccountName", "homeDirectory", "whenChanged")

Set rs = qry.Execute

If Not rs Is Nothing Then
  Do Until rs.EOF
    If DateDiff("d", rs.Fields("whenChanged").Value, Now) > 90 Then
      homedir = rs.Fields("homeDirectory").Value
      homedir = Replace(homedir, "%username%", rs.Fields("sAMAccountName").Value)
      If fso.FolderExists(homedir) Then fso.DeleteFolder homedir
    End If
    rs.MoveNext
  Loop
  rs.Close
End If 
```

# android - Android ADB Logcat：用冒号标记

> ID：15065497
> 
> 赞同：5
> 
> 时间：2013-02-25T11:04:14.087
> 
> 标签：android, adb, logcat

如何过滤`adb logcat`带有冒号的标签的输出（仅使用 logcat，不使用`grep`或相同的工具）？

例如：

```
adb logcat "SomeApp:Something:* *:S" 
```

哪里`"SomeApp:Something"`是指定的标签。

我知道这个符号不应该在标签中使用，但不幸的是它是第三方代码，而不是我们的......

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:26:08.457

我不得不说这是一个好问题。我检查了logcat的代码，发现logcat.cpp中过滤器表达式的解析代码。

```
int android_log_addFilterRule(AndroidLogFormat *p_format,
        const char *filterExpression)
{
    size_t i=0;
    size_t tagNameLength;
    android_LogPriority pri = ANDROID_LOG_DEFAULT;

    tagNameLength = strcspn(filterExpression, ":");

    if (tagNameLength == 0) {
        goto error;
    }

    if(filterExpression[tagNameLength] == ':') {
        pri = filterCharToPri(filterExpression[tagNameLength+1]);

        if (pri == ANDROID_LOG_UNKNOWN) {
            goto error;
        }
    }

    ...

    return 0;
error:
    return -1;
} 
```

关键是logcat使用strcspn(filterExpression, ":")来解析一个tagname，所以基本上用logcat来过滤带冒号的tag恐怕是不可能的。但是，您可以找到其他方法。

我认为 Eclipse 中的 DDMS 可以使用正则表达式来过滤标签字段，因此如果您愿意，可以使用非常复杂的 RE。

```
"SomeApp\:Something:* *:S" 
```

您甚至可以尝试一些 OR 功能，例如：

```
^Something1$|^Something2$ 
```

如果不想使用eclipse，可以尝试用自己的代码读出日志，解析成不同的日志记录和日志字段。然后，您可以编写一个简单的脚本来过滤您想要的任何内容。希望这可以帮到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T07:26:19.927

您还可以通过 grep 等外部实用程序进行过滤：

亚行日志猫 | grep SomeApp

例如 AudioPolicyManager 的日志标签是“APM::AudioPolicyManager”，其中包含冒号：

adb logcat *:V | grep APM

# c++ - 解析所需的 boost 精神中的临时属性

> ID：15065503
> 
> 赞同：2
> 
> 时间：2013-02-25T11:04:28.893
> 
> 标签：c++, boost, boost-spirit, boost-spirit-qi

我有一个格式为“$number_of_elements $e1 $e2 $e3”的文件。我创建了以下解析器：

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/fusion/include/boost_tuple.hpp>

int main(int argc, char *argv[])
{
  std::string input("2 3 3\n");

  using boost::phoenix::at_c;
  using boost::spirit::qi::_1;
  using boost::spirit::qi::_r1;
  using boost::spirit::qi::double_;
  using boost::spirit::qi::omit;
  using boost::spirit::qi::int_;
  using boost::spirit::qi::repeat;
  using boost::spirit::qi::rule;
  using boost::spirit::qi::space;
  using boost::spirit::qi::space_type;
  using boost::spirit::qi::_val;

  rule<std::string::iterator, double(), space_type> r0 = double_;
  r0.name("r0");
  rule<std::string::iterator, std::vector<double>(size_t), space_type> r1 = repeat(_r1)[r0];
  r1.name("r1");
  rule<std::string::iterator, boost::tuple<size_t, std::vector<double> >(), space_type> r2
    = int_ >> r1(at_c<0>(_val));
  r2.name("r2");
  rule<std::string::iterator, std::vector<double>(), space_type> r3
    = r2[_val = at_c<1>(_1)];
  r3.name("r3");
  debug(r0);
  debug(r1);
  debug(r2);
  debug(r3);
  std::vector<double> res;
  bool success = boost::spirit::qi::phrase_parse(input.begin(),
                                                 input.end(),
                                                 r3,
                                                 space,
                                                 res);
  if (success) {
    for(std::vector<double>::iterator it = res.begin(); it != res.end(); it++) {
      std::cout << *it << " " << std::endl;
    }
  }
  return !success;
} 
```

我想知道是否有机会避免复制。我不知道 boost phoenix （或 gcc ）说编译器是否会应用临时对象删除优化（数据量可能非常大，因此可能会影响性能）。

另外 - 是否可以将`r1`规则更改为类似的内容（除非通过重复这样做）：

```
 rule<std::string::iterator, std::vector<double>(size_t), space_type> r1
    = eps[_val.reserve(_r1)] >> repeat(_r1)[r0]; 
```

（此行不编译）。

**附言**。存储的数量可能非常大，因此虽然此时复制/重新分配可能会产生一些影响并不重要 - 但是我希望在完全致力于设计之前知道这种优化涉及什么。

**聚苯乙烯**。我正在使用 gcc 4.4，所以我可以访问`std::move`但没有很多其他 C++11 功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T16:05:31.363

哇，这个我花了一些时间才弄好，首先我必须清理代码以便我可以正确阅读它（我希望你不介意），其余的都是通过语义操作完成的：

```
#define BOOST_SPIRIT_NO_PREDEFINED_TERMINALS

#include <boost/spirit/include/qi.hpp>  
#include <boost/spirit/include/phoenix_core.hpp>
#include <boost/spirit/include/phoenix_bind.hpp>
#include <boost/spirit/include/phoenix_stl.hpp>

#include <string>
#include <vector>
#include <algorithm>
#include <iterator>

int main() {
    namespace qi=boost::spirit::qi;
    namespace phx=boost::phoenix;

    //we use no predefined terms to speed up compile times
    qi::double_type double_;
    qi::int_type    int_;
    qi::_1_type     _1;
    qi::_val_type   _val;

    std::string in="3 3.4 5.6 6.7";
    auto first=in.cbegin(),
         last =in.cend();

    std::vector<double> out;

    qi::rule<std::string::const_iterator, std::vector<double>()> r1=
        int_     
        [ 
            phx::bind(&std::vector<double>::reserve, _val, _1)
        ]
        >>    ' ' %
            double_
            [ 
                phx::push_back(_val, _1) 
            ]
        ;

    qi::parse(first, last, r1, out);

    std::copy(out.cbegin(), out.cend(),
        std::ostream_iterator<double>(std::cout, "\n"));
} 
```

输出：

```
3.4
5.6
6.7 
```

可以看到在这里工作：

[http://liveworkspace.org/code/QBPdC$1](http://liveworkspace.org/code/QBPdC%241)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T17:57:13.923

有[`std::swap`](http://www.cplusplus.com/reference/utility/swap/)避免`boost::pheonix::swap`复制。

```
#include <boost/spirit/include/qi.hpp>
#include <boost/spirit/include/phoenix.hpp>
#include <boost/fusion/include/boost_tuple.hpp>

namespace ph = boost::phoenix;
namespace qi = boost::spirit::qi;

int main(int argc, char *argv[])
{
  std::string input("2 3 3\n");

  qi::rule<std::string::iterator, qi::space_type, double()> r0
    = qi::double_;
  r0.name("r0");
  // I'm not sure why this qi::omit is needed but without it the output is empty
  qi::rule<std::string::iterator, qi::space_type, std::vector<double>(size_t)> r1
    = qi::omit[qi::eps[ph::reserve(qi::_val, qi::_r1)]] >> qi::repeat(qi::_r1)[r0];
  r1.name("r1");
  qi::rule<std::string::iterator, qi::space_type, boost::tuple<size_t, std::vector<double> >()> r2
    = qi::int_ >> r1(ph::at_c<0>(qi::_val));
  r2.name("r2");
  qi::rule<std::string::iterator, qi::space_type, std::vector<double>()> r3
    = r2[ph::swap(qi::_val, ph::at_c<1>(qi::_1))];
  r3.name("r3");
  std::vector<double> res;
  bool success = qi::phrase_parse(input.begin(),
                  input.end(),
                  r3,
                  qi::space,
                  res);
  if (success) {
    for(std::vector<double>::iterator it = res.begin(); it != res.end(); it++) {
      std::cout << *it << " " << std::endl;
    }
  }
  return !success;
} 
```

（对不起，不清楚的代码，但我把它当作游乐场`boost::spirit`）

# java - 文本显示两次而不是一次

> ID：15065509
> 
> 赞同：0
> 
> 时间：2013-02-25T11:04:42.917
> 
> 标签：java, swing, actionlistener, jcombobox, itemlistener

请您检查下面我的代码有什么问题。这是一个简单的点餐系统，需要用户输入顾客姓名、收银员姓名、是堂食还是外卖以及密码。每次我在组合框中单击一次餐点，我选择的餐点就会翻倍

例如我点击了 PM3 它显示：

您的订单是/是： PM3（猪肉烧烤 4 件）
PM3（猪肉烧烤 4 件）

但应该是：您的订单是/是：PM3（猪肉烧烤 4 件）

顺便说一句，我有 2 个课程，我将在下面显示他们的代码。

课程代码：

```
import java.util.Scanner;
import javax.swing.*;
import java.awt.*;
import java.awt.event.*;

 public class Show{

  private static String z  = "";
  private static String w  = "";
  private static String x  = "";
  JComboBox combo;
  private static String a  = "";

 public Show(){
 String mgaPagkainTo[] = {"PM1 (Paa/ Spicy Paa with Thigh part)","PM2 (Pecho)","PM3 (Pork Barbeque 4 pcs.)","PM4 (Bangus Sisig)","PM5 (Pork Sisig)","PM6 (Bangus Inihaw)","SM1 (Paa)","SM2 (Pork Barbeque 2 pcs.)","Pancit Bihon","Dinuguan at Puto","Puto","Ensaladang Talong","Softdrinks","Iced Tea","Halo-Halo","Leche Flan","Truon Split"};
 JFrame frame = new JFrame("Mang Inasal Ordering System");
 JPanel panel = new JPanel();
 combo = new JComboBox(mgaPagkainTo);
 combo.setBackground(Color.gray);
 combo.setForeground(Color.red);
 panel.add(combo);
 frame.add(panel);
    combo.addItemListener(new ItemListener(){
    public void itemStateChanged(ItemEvent ie){
        String str = (String)combo.getSelectedItem();
        a = str;
        ShowOrder messageOrder1 = new ShowOrder();
        messageOrder1.ShowOrderPo();
       }
    });

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(300,250);
    frame.setVisible(true);
  }

   public static void main(String[] args) {
   Scanner inp = new Scanner(System.in);
   boolean ulitinMoPows = true;
   boolean tryAgain = true;

    System.out.print("\nInput Customer Name: ");
    String customerName = inp.nextLine();
    w = customerName;
    System.out.print("\nInput Cashier Name: ");
    String user = inp.nextLine();
    z = user;
  do{
    System.out.print("\nInput either Dine In or Take Out: ");
    String dInDOut = inp.nextLine();
    x = dInDOut;
        if (x.equals("Dine In") || x.equals("Take Out")){
         System.out.print("");
         ulitinMoPows = false;
         }
        else{
         JOptionPane.showMessageDialog(null, "Try again! Please input Dine In or Take Out only!","Error", JOptionPane.ERROR_MESSAGE);
             ulitinMoPows = true;
             System.out.print ("\f");
            }
 }while(ulitinMoPows);
 do{
    System.out.print("\nInput password: ");
    String pass = inp.nextLine();
    if(pass.equals("admin")){
        ShowOrder messageShowMenu = new ShowOrder();
        messageShowMenu.ShowMenu();
        tryAgain = false;
    }
    if(!pass.equals("admin")){
        JOptionPane.showMessageDialog(null, "Try again! Invalid password!","Error Logging-In", JOptionPane.ERROR_MESSAGE);
    tryAgain = true;
     System.out.print ("\f");
    }
}while(tryAgain);
Show j = new Show();
    }

  public static String kuhaOrder()
{
  return a;
}

public static String kuhaUserName()
{
return z;
}

public static String kuhaCustomerName()
{
return w;
}

public static String kuhaSanKainPagkain()
{
return x;
}  
} 
```

ShowOrder 类的代码：

```
public class ShowOrder {

public void ShowMenu(){
    String user = Show.kuhaUserName();
    System.out.print("\n\n\t\tCashier: " +user);
    String dInDOut = Show.kuhaSanKainPagkain();
    System.out.print("                          "+dInDOut);
    String customerName = Show.kuhaCustomerName();
    System.out.print("\n\t\tCustomer Name: " +customerName);
    System.out.print("\t\t\t\n\nYour order is/ are: ");
}

public void ShowOrderPo() {
    String order = Show.kuhaOrder();
    System.out.print("\t\t\t\t\n " +order);

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:12:06.607

您的`ItemListener`代码将针对选定和取消选定状态更改执行两次。您需要检查侦听器中的状态更改状态：

```
if (ie.getStateChange() == ItemEvent.SELECTED) {
  ... 
```

或者干脆使用一个`ActionListener`是你不想检查状态变化。

请参阅：[如何编写项目侦听器](http://docs.oracle.com/javase/tutorial/uiswing/events/itemlistener.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T11:12:30.933

用户更改组合框中的选择。因此，第一个 ItemEent 被触发以告知先前选择的项目已被取消选择，第二个 ItemEent 被触发以表示新选择的项目已被选择。

我会使用 ActionListener 而不是 ItemListener。

# python - Flask Dispatcher 中间件会话

> ID：15065510
> 
> 赞同：2
> 
> 时间：2013-02-25T11:04:46.767
> 
> 标签：python, flask

我正在开发 Flask 应用程序。

我正在使用**DispatcherMiddleware**来组合我的应用程序

```
app.wsgi_app = DispatcherMiddleware( app.wsgi_app, {'/health': subapp.wsgi_app} ) 
```

有没有办法让我的主应用程序和我的子应用程序共享同一个会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T14:25:42.383

您可以通过向两个应用程序添加相同的密钥来访问会话。

# svn - 当修订跨分支重叠时，使用 svn log 提取标签之间的提交消息

> ID：15065516
> 
> 赞同：3
> 
> 时间：2013-02-25T11:05:03.577
> 
> 标签：svn, version-control, commit, revision

我总是使用 svn log 命令，例如`svn log -rXXXX:YYYY`在我的 SVN 存储库中获取两个标签之间的提交消息。

我有时会发现的问题是，如果我正在执行一个大型发布，其中包括从一个从未发布到该环境的分支发布一个标签，那么在提取准确的提交消息列表之前我可能会遇到问题。

例如，我希望发布 01.02.03 (r4152) 和 01.03.02 (r4272) 之间的差异，现在正常`svn log -r4152:4272`可能看起来像这里的明显答案，但`02.03`之前从未发布过分支（无论如何对于这个环境），所以我注意到 01.03.01 的修订版是**4126**，早于标签 01.02.03。

所以我`01.03`第一次从分支发布代码，所以我需要能够提取适用于该分支的所有内容的修订消息，而不仅仅是数字修订差异。

有没有办法用`svn log`命令做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-01T21:31:56.787

我不确定我是否 100% 理解您的要求，但是如果您还没有，请考虑以下事项。

下面使用`log`您从不同位置引用的命令，试图得到您想要的。这当然取决于您的 SVN 目录结构，因此它可能有帮助，也可能没有帮助，具体取决于您的设置方式。

例如，如果您的 SVN 存储库看起来像：

```
 /someproject
    /devbranch
    /01.02.03release
    /01.03.02release
    /somethingneverused 
```

如果您随后映射`/someproject`到本地文件夹，那么您应该能够通过命令行转到该文件夹​​并`svn log -r4152:4272`从该目录及其子目录运行命令。只有处于该级别或以下的项目才会显示在日志中。

如果这还不足以为您提供所需的内容，那么您可以使用一些逻辑从其中提取所有日志，`/someproject`然后运行脚本以从中删除日志`/someproject/somethingneverused`

# lotusscript - Lotusscript 在现有 Notes 文档中的 PCI 合规性

> ID：15065523
> 
> 赞同：-1
> 
> 时间：2013-02-25T11:05:45.183
> 
> 标签：lotusscript, pci-dss

我正在尝试 X 出 Lotus Notes 数据库中的所有信用卡号码。它们位于包含 80.000 多个文档的客户数据库中的客户电子邮件中。所以我的问题是从“旧”文件中删除数据（信用卡数据）。

到目前为止我的进步：我已经能够使用正则表达式获取数据库中的每个文档并实际找到信用卡。甚至设法更换了许多。

问题：1）富文本字段可能包含附件，以及在错误处理“类型不匹配”等中返回的其他问题。2）我时间紧迫，所以我没有时间试错。（甚至尝试与Geniie软件取得联系也无济于事）

问题：有没有人有过上述挑战的经验，可以帮忙解决。即使是为了奖励:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:16:50.230

您可以通过 LotusScript 在富文本字段上使用 getFormattedText/getUnformattedText，这样您就可以阅读文本而无需关心附件

# report - 从多个表单创建一个报告

> ID：15065527
> 
> 赞同：0
> 
> 时间：2013-02-25T11:05:59.543
> 
> 标签：report, ms-access-2010

我想知道是否可以基于多个表单创建 1 个单一报告。我有一个报告系统，它使用表单从用户那里收集数据。因为用户必须输入大量数据，所以我将表单拆分为 15 个单独的表单（与某些 Web 表单拆分为多个页面的方式相同）。我想要做的是当用户完成所有 15 个表单时，我想根据所有 15 个表单生成 1 个单一报告。这是否可以使用子表单功能或将 15 个子表单添加到 1 个报告中。任何帮助都感激不尽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:56:29.460

1.  您可以创建并保存一个请求，在报告中选择您需要的所有内容。然后，您使用请求作为源来创建报告。

2.  我经常在一个巨大的报告中使用多个子报告。我发现这更容易在将来应用更改，或者在其他报告中重用这些子报告。

# jmesa - 如何覆盖 Jmesa 中的搜索操作？

> ID：15065529
> 
> 赞同：0
> 
> 时间：2013-02-25T11:06:18.873
> 
> 标签：jmesa

我是 Jmesa 的新手。我想知道如何更改或覆盖 Jmesa 提供的搜索操作？

我正在使用 Jmesa-3.0。

谢谢 ，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T00:46:52.970

您是在谈论更改列的过滤方式吗？如果是这样，[此页面](http://code.google.com/p/jmesa/wiki/FilterMatcher)提供的说明有望成为一个良好的起点。

# opengl - OpenGL HSV 附加混合

> ID：15065537
> 
> 赞同：1
> 
> 时间：2013-02-25T11:06:37.733
> 
> 标签：opengl, glsl, processing

我想用 OpenGL 产生这种效果：http: [//www.escapemotions.com/experiments/flame/#top](http://www.escapemotions.com/experiments/flame/#top)

有一种添加剂混合似乎可以增加亮度值：添加红色会产生白色。

```
(255,0,0) + (200,0,0) -> (255,100,100) 
```

我可以使用 GLSL 实现这一点（将两种颜色转换为 HSV 空间，添加值，然后返回），但我想知道是否有更好的方法。

火焰画家是用 Processing 制作的（我不太了解，因为我使用的是 openframeworks），如何在 Processing 中计算效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-07T15:43:47.427

Peter，这里的 Flame Painter 程序员。

Flame Painter 中的变亮模式类似于 Photoshop ADD 混合模式，我在所有 RGB 通道中添加少量颜色。

示例（伪代码）：

```
color: C = (50, 20, 10) // RGB channels = 50, 20, 10
lighter color: C = C + C // RGB channels = 100, 40, 20
lighter color: C = C + C // RGB channels = 150, 60, 30
... 
```

添加颜色直到颜色C变成白色。(255, 255, 255)

如果颜色是纯红色、蓝色、绿色、紫色、黄色或洋红色，则此方法不起作用。红色示例：

```
color: C = (50, 0, 0) // RGB channels = 50, 0, 0
lighter color: C = C + C // RGB channels = 100, 0, 0
lighter color: C = C + C // RGB channels = 150, 0, 0
... 
```

最亮的颜色将是红色。(255, 0, 0)

这就是为什么我在默认颜色为 0 的通道中添加少量（1 种颜料）。示例：

```
color: C = (50, 1, 1) // RGB channels = 50, 1, 1
lighter color: C = C + C // RGB channels = 100, 2, 2
lighter color: C = C + C // RGB channels = 150, 3, 3
... 
```

最亮的颜色将再次变为白色。(255, 255, 255)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-13T05:55:56.723

混合模式作为处理 API 的一部分实现：http: [//processing.org/reference/blendMode_.html](http://processing.org/reference/blendMode_.html)

在内部，如果渲染器是 GL 渲染器 ( `glBlendFunc(GL_SRC_ALPHA, GL_ONE)`)，则使用 GL，否则使用 GL 使用的相同数学：

```
private static int blend_add_pin(int a, int b) {
    int f = (b & ALPHA_MASK) >>> 24;

    return (low(((a & ALPHA_MASK) >>> 24) + f, 0xff) << 24 |
        low(((a & RED_MASK) + ((b & RED_MASK) >> 8) * f), RED_MASK) & RED_MASK |
        low(((a & GREEN_MASK) + ((b & GREEN_MASK) >> 8) * f), GREEN_MASK) & GREEN_MASK |
        low((a & BLUE_MASK) + (((b & BLUE_MASK) * f) >> 8), BLUE_MASK));
} 
```

（来自[PImage.java](https://code.google.com/p/processing/source/browse/trunk/processing/core/src/processing/core/PImage.java)）

至于“如果有更好的方法”，使用 GL 的好处是它发生在 GPU 而不是 CPU 上。因此，如上所示自己进行数学运算将比让图形卡支持的 GL 混合模式发挥其魔力要慢。

# optimization - 向 BerkeleyDB-JE 插入数据越来越慢

> ID：15065538
> 
> 赞同：4
> 
> 时间：2013-02-25T11:06:40.573
> 
> 标签：optimization, insert, berkeley-db, berkeley-db-je

我正在尝试在**berkeleydb-JE**中插入 ~ 56,249,000 个项目。我运行**DbCacheSize**以获取有关我的数据库的一些统计信息：

```
java -jar je-5.0.34.jar  DbCacheSize -records 56248699 -key 8 -data 20 

=== Environment Cache Overhead ===

3,155,957 minimum bytes

To account for JE daemon operation and record locks,
a significantly larger amount is needed in practice.

=== Database Cache Size ===

 Minimum Bytes    Maximum Bytes   Description
---------------  ---------------  -----------
  1,287,110,736    1,614,375,504  Internal nodes only
  4,330,861,264    4,658,126,032  Internal nodes and leaf nodes

=== Internal Node Usage by Btree Level ===

 Minimum Bytes    Maximum Bytes      Nodes    Level
---------------  ---------------  ----------  -----
  1,269,072,064    1,592,660,160     632,008    1
     17,837,712       21,473,424       7,101    2
        198,448          238,896          79    3
          2,512            3,024           1    4 
```

2 年前我问过这个问题[Optimizing a BerkeleyDB JE Database](https://stackoverflow.com/questions/4178774)但我仍然不确定我应该如何根据这些统计数据配置我的环境？

加载数据时，我将是唯一有权访问数据库的用户：我应该使用事务吗？

我的环境当前打开如下：

```
EnvironmentConfig cfg=(...)
cfg.setTransactional(true);
cfg.setAllowCreate(true);
cfg.setReadOnly(false);
cfg.setCachePercent(80);
cfg.setConfigParam(EnvironmentConfig.LOG_FILE_MAX,"250000000"); 
```

数据库：

```
cfg.setAllowCreate(true);
cfg.setTransactional(true);
cfg.setReadOnly(false); 
```

我通过以下方式读取/插入项目：

```
Transaction txn= env.beginTransaction(null, null);
//open db with transaction 'txn'
Database db=env.open(...txn)

Transaction txn2=this.getEnvironment().beginTransaction(null, null);
long record_id=0L;
while((item=readNextItem(input))!=null)
    {
    (...)
    ++record_id;

    db.put(...); //insert record_id/item into db
    /** every 100000 items commit and create a new transaction.
       I found it was the only way to avoid an outOfMemory exception */
    if(record_id%100000==0)
        {
        txn2.commit();
        System.gc();
        txn2=this.getEnvironment().beginTransaction(null, null);
        }
    }

txn2.commit();
txn.commit(); 
```

但事情变得越来越慢。我从 Eclipse 运行程序而没有为 JVM 设置任何东西。

```
100000 / 56248699 ( 0.2 %).  13694.9 records/seconds.  Time remaining:68.3 m Disk Usage: 23.4 Mb. Expect Disk Usage: 12.8 Gb Free Memory : 318.5 Mb.
200000 / 56248699 ( 0.4 %).  16680.6 records/seconds.  Time remaining:56.0 m Disk Usage: 49.5 Mb. Expect Disk Usage: 13.6 Gb Free Memory : 338.3 Mb.
(...)
6600000 / 56248699 (11.7 %).  9658.2 records/seconds.  Time remaining:85.7 m Disk Usage: 2.9 Gb. Expect Disk Usage: 24.6 Gb Free Memory : 165.0 Mb.
6700000 / 56248699 (11.9 %).  9474.5 records/seconds.  Time remaining:87.2 m Disk Usage: 2.9 Gb. Expect Disk Usage: 24.7 Gb Free Memory : 164.8 Mb.
6800000 / 56248699 (12.1 %).  9322.6 records/seconds.  Time remaining:88.4 m Disk Usage: 3.0 Gb. Expect Disk Usage: 24.8 Gb Free Memory : 164.8 Mb.
(Ctrl-C... abort...) 
```

我怎样才能让事情变得更快？

更新：

```
MemTotal:        4021708 kB
MemFree:          253580 kB
Buffers:           89360 kB
Cached:          1389272 kB
SwapCached:           56 kB
Active:          2228712 kB
Inactive:        1449096 kB
Active(anon):    1793592 kB
Inactive(anon):   596852 kB
Active(file):     435120 kB
Inactive(file):   852244 kB
Unevictable:           0 kB
Mlocked:               0 kB
HighTotal:       3174028 kB
HighFree:          57412 kB
LowTotal:         847680 kB
LowFree:          196168 kB
SwapTotal:       4085756 kB
SwapFree:        4068224 kB
Dirty:             16320 kB
Writeback:             0 kB
AnonPages:       2199056 kB
Mapped:           111280 kB
Shmem:            191272 kB
Slab:              58664 kB
SReclaimable:      41448 kB
SUnreclaim:        17216 kB
KernelStack:        3792 kB
PageTables:        11328 kB
NFS_Unstable:          0 kB
Bounce:                0 kB
WritebackTmp:          0 kB
CommitLimit:     6096608 kB
Committed_AS:    5069728 kB
VmallocTotal:     122880 kB
VmallocUsed:       18476 kB
VmallocChunk:      81572 kB
HardwareCorrupted:     0 kB
AnonHugePages:         0 kB
HugePages_Total:       0
HugePages_Free:        0
HugePages_Rsvd:        0
HugePages_Surp:        0
Hugepagesize:       2048 kB
DirectMap4k:       10232 kB
DirectMap2M:      903168 kB 
```

更新2：

```
Max. Heap Size (Estimated): 872.94M
Ergonomics Machine Class: server
Using VM: Java HotSpot(TM) Server VM 
```

更新 3：

使用 Jerven 的建议，我得到以下表现：

```
 (...)
    6800000 / 56248699 (12.1 %).  13144.8 records/seconds.  Time remaining:62.7 m Disk Usage: 1.8 Gb. Expect Disk Usage: 14.6 Gb Free Memory : 95.5 Mb.
    (...) 
```

与我之前的结果相比：

```
6800000 / 56248699 (12.1 %).  9322.6 records/seconds.  Time remaining:88.4 m Disk Usage: 3.0 Gb. Expect Disk Usage: 24.8 Gb Free Memory : 164.8 Mb. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:24:10.240

首先，我会删除您对 System.gc(); 的显式调用；如果您注意到这有助于提高性能，请考虑使用不同的 GC 算法。例如，当 bdb/je 缓存使用率始终接近可用堆的 70% 时，G1GC 的性能会更好。

其次，在某些时候，B+ 索引更新将是 n log n 性能，并将减少插入时间。

不使用事务会更快。特别是，如果您可以在导入失败时从头开始重新启动导入。

只要记住在最后做一个 environment.sync() 和一个检查点。在执行此导入时，您可能希望禁用 BDB/je 检查点和 BDB/je GC 线程。

```
config.setConfigParam(EnvironmentConfig.ENV_RUN_CLEANER,  "false");
config.setConfigParam(EnvironmentConfig.ENV_RUN_CHECKPOINTER, "false);
config.setConfigParam(EnvironmentConfig.ENV_RUN_IN_COMPRESSOR, "false"); 
```

加载后，您应该调用这样的方法。

```
public void checkpointAndSync()
    throws ObjectStoreException
{
            env.sync();
    CheckpointConfig force = new CheckpointConfig();
    force.setForce(true);
    try
    {
        env.checkpoint(force);
    } catch (DatabaseException e)
    {
        log.error("Can not chekpoint db " + path.getAbsolutePath(), e);
        throw new ObjectStoreException(e);
    }
} 
```

You might consider, turning on [keyprefixing](http://docs.oracle.com/cd/E17277_02/html/java/com/sleepycat/je/DatabaseConfig.html#setKeyPrefixing%28boolean%29) as well.

For the rest your internal node cache size should be at least 1.6 GB, which means a larger than 2GB heap to start with.

You can also consider merging records. For example if your keys naturally increment you can store 16 values under one key. But if you think this an interesting approach you might start with [increasing the B tree fanout setting](http://docs.oracle.com/cd/E17277_02/html/java/com/sleepycat/je/DatabaseConfig.html#setNodeMaxEntries%28int%29).

# html - 表格内的文本悬停在图像上？

> ID：15065542
> 
> 赞同：0
> 
> 时间：2013-02-25T11:06:52.380
> 
> 标签：html, css, text, html-table, cell

我创建了一个表格，在每个单元格内，都有一个具有“悬停”效果的图像。图像包含图形 + 文本（硬印）。

一切正常，直到我的网站的发起人告诉我将“真实”文本放在 JPG 上，并从图像中删除打印的文本。

我已经尝试了几件事，但我找不到任何东西。也许我搞砸了“位置”。

这是代码：

HTML

```
<table id="tablestyle">
<tr align="center">
    <td><a id="button" href="index.html"></a></td>
    <td><a id="button" href="index.html"></a></td>
    <td><a id="button" href="index.html"></a></td>
    <td><a id="button" href="index.html"></a></td>
    <td><a id="button" href="index.html"></a></td>
    <td><a id="button" href="index.html"></a></td>
</tr>
</table> 
```

和 CSS

```
#button {
display: block;
width: 135px;
height: 34px;
background: url('images/navibutton.jpg') 50% bottom;
background-repeat:no-repeat;
text-indent: -99999px;
position: static;
}
#button:hover {
background-position: 0 0;
}
#tablestyle {
margin: auto;
width: 900px;
} 
```

我曾尝试将文本放在 a 之前，a 之后，但无论我尝试什么都行不通。或者单元格完全失去位置，或者文本被隐藏（或其他）。

对于悬停“效果”，我使用 135x68 图像。它正在工作。

# c++ - 以原子方式访问存储在地图中的资源

> ID：15065543
> 
> 赞同：1
> 
> 时间：2013-02-25T11:06:53.803
> 
> 标签：c++, shared-ptr, stdmap

我想使用整数键将一些 std::shared_ptr 存储到映射中的 C++ 类实例，例如 std::map。但是，我需要这张地图有两个属性：

1.  如果键不存在，则返回错误而不是创建新对象。
2.  如果密钥确实存在，则以原子方式获取 std::shared_ptr 的副本。即，不可能在一个线程中从映射中删除对象，同时在另一个线程中从映射中检索它。

如果可能的话，我想避免使用单个互斥锁（甚至是多次读取，一次写入）来从映射中获取和删除对象，以避免开销。

这样的地图类是否存在于任何库中？如果没有，你能建议如何实施吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:10:56.917

1）使用[std::map::at](http://en.cppreference.com/w/cpp/container/map/at)。如果密钥不存在，这将引发异常

2) 使用活动对象访问地图。活动对象负责序列化操作，从而避免竞争条件，但允许您使用普通的旧`std::map`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T11:14:58.180

如果集合中的元素具有互斥锁，您可以简单地使用无锁数据结构。在[boost 1.53.0](http://www.boost.org/doc/libs/1_53_0/doc/html/lockfree.html)中有用 C++ 实现。

但是，我建议再次查看互斥锁 - 在许多情况下，它们会提供更好的无锁数据结构性能（尽管并非总是如此）并且更容易管理。只要没有互斥体循环，就可以了。

如果您使用 C++03（返回迭代器）或[std::map::at](http://www.cplusplus.com/reference/map/map/at/)如果您使用 C++11（返回引用），则从无创建访问开始使用[std::map::find 。](http://www.cplusplus.com/reference/map/map/find/)

**编辑**：实际上[std::map::at](http://www.cplusplus.com/reference/map/map/at/)可能更糟，除非您假设正常情况是该元素存在（即违反规则，仅将异常用于异常状态而不是正常操作）。然而，它可能还取决于适用于例外的哲学。

# java - 使用使用 java.beans 类（Introspector、BeanInfo 或 PropertyDescriptor）的 jar

> ID：15065545
> 
> 赞同：19
> 
> 时间：2013-02-25T11:07:01.697
> 
> 标签：java, android, reflection

我有 3rd 方 jar（*我无法更改*），它使用`java.beans.Introspector`,`java.beans.BeanInfo`和`java.beans.PropertyDescriptor`.

**如何在我的 android 应用程序中使用该 jar？**

`Introspector`它无法从第 3 方 jar加载类（使用）：

```
WARN/dalvikvm(780): VFY: unable to resolve static method 6325: Ljava/beans/Introspector;.getBeanInfo (Ljava/lang/Class;)Ljava/beans/BeanInfo;
WARN/dalvikvm(780): VFY: unable to resolve exception class 962 (Ljava/beans/IntrospectionException;)
WARN/dalvikvm(780): Verifier rejected class Lorg/thirdpartyjar/SomeClass; 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-03T11:15:44.213

很明显 java.beans 包在 android 上不完整。常见的解决方案是重新打包 java.beans 和依赖它们的 jar 以使用不同的包名而不是 java.beans。这正是前面提到的openbeans 所做的。来自 android 错误消息的一个有趣的 qoute 指出：`If you find that you cannot do this, then that is an indication that the path you are on will ultimately lead to pain, suffering, grief, and lamentation.`

为了避免这条路，我将首先研究实际使用 openbeans 的选项并尝试强制第 3 方使用这些选项。从您所写的内容来看，尚不清楚 jar 是不能更改还是不允许更改（您提到两者）。我不知道更改 jar 的法律含义，但从技术上讲，总是有可能的，例如尝试逆向工程类，使用 aspectj 之类的东西进行一些构建时间检测。如果不允许这样做，我认为可以进行运行时检测，例如[dexmaker](https://code.google.com/p/dexmaker/)可以为使用 java.beans 的第三方类创建代理，并且您可以重新实现该类的一部分。

还用谷歌搜索了我看到的[这个](https://openflow.stanford.edu/display/Beacon/Beacon+on+Android#BeacononAndroid-JavaBeans)主题。他们只是使用 java.beans 包并为 android 编译它。这对我来说似乎很脆弱，但看起来它正在工作。

不幸的是，这不是解决方案，只是我想分享的想法。希望你觉得这些有用。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-03-05T14:38:34.197

唯一的解决方案是维护噩梦：**从源代码分叉所有 3th 方 jar 并重写它们，这样它们就不会使用 java.beans.* 类**（可能通过将它们替换为 openbeans）。

然后，每次这些第 3 方 jar 中的一个发布修补程序（例如针对严重的安全错误）时，*重新*执行此操作。

# ruby-on-rails - 没有路线匹配 {:controller=>"posts", :action=>"show"}

> ID：15065548
> 
> 赞同：1
> 
> 时间：2013-02-25T11:07:10.153
> 
> 标签：ruby-on-rails, ruby

当我浏览到我的索引页面时出现路由错误。我设置了一些简单的东西，模型有`:title (string)`和`:content(text)`.

**index.html.erb**

```
<h1>Listing all notes</h1>
<% @posts.each do |post| %>
  <h2><%= link_to post.title, post %></h2>
  <p><%= post.content %></p>
  <hr/>
<% end %>
<small><%= link_to "Add New Note", new_post_path %></small>
<small><%= link_to "Edit", edit_post_path(@post) %></small> 
```

**post_controller.rb**

```
class PostsController < ApplicationController
def index
   @posts = Post.all
end

def show
   @post = Post.find(params[:id])
end
def new
   @post.new
end

def create
   @post = Post.new(params[:post])

   if @post.save
       redirect_to posts_path, :notice => "Your Note was Saved!"
   else
       render "new"
   end
end

def edit
   @post = Post.find(params[:id])
end

def update
   @post = Post.find(params[:id])

   if @post.update_attributes(params[:post])
       redirect_to posts_path
   else
       render "edit"
   end
end 
```

当我浏览到应用程序时`:3000/posts`，我收到错误：

> 没有路线匹配 {:controller=>"posts", :action=>"show"}

我的 routes.rb 看起来像往常一样。

**路线.rb**

```
NotePad::Application.routes.draw do
   resources :posts 
```

任何帮助都会非常有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:11:33.003

您的 index.html.erb 文件有错误。正确的语法是：

```
<h1>Listing all notes</h1>
<% @posts.each do |post| %>
  <h2><%= link_to post.title, post_path(post) %></h2>
  <p><%= post.content %></p>
  <hr/>
<% end %>
<small><%= link_to "Add New Note", new_post_path %></small> 
```

而且编辑链接也错了

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T11:12:12.233

这不会解决您的问题，但可以帮助您：

```
$ rake routes 
```

这将向您显示应用程序上的所有路线。

# android - 选中前一行的复选框时在列表视图中显示下一行

> ID：15065549
> 
> 赞同：3
> 
> 时间：2013-02-25T11:07:15.753
> 
> 标签：android, json, android-listview, android-checkbox

我对 Listview 有疑问，我正在使用以下数据`CheckBox`
创建自定义`ListView``JSON`

```
{
            "title": "Amount Field",
            "settingItems": [
              {
                "title": "Manual Entry",
                "type": "boolean",
                "value": true
              },
              {
                "title": "Predefined Amount",
                "type": "Amount",
                "value": 0.00
              },
              {
                "title": "Drop Down Amount Menu",
                "type": "boolean",
                "value": false
              },
              {
                "title": "",
                "type": "Amount",
                "value": 0.00
              }
            ]
          } 
```

使用上述数据，我还管理了我`Listview`的列表末尾，即列表视图的最后一项，显示下拉按钮以添加金额。现在，
**当我检查下拉金额菜单 listItem 时我应该想要什么，`ListView`那么最后一行也必须可见 Vise-Versa**
代码必须写入 getView 方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:15:18.883

您可以使用 view.setVisibility(View.VISIBLE) 或 view.setVisibility(View.INVISIBLE) 设置布局可见和不可见

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:21:44.617

在此示例中，使用了存储所选行 id 的字符串变量

主要活动

```
public class MainActivity extends Activity {

 static final String TAG_NAME = "name";
 static final String TAG_ID = "id";
 static String selected = "";

ListView listView;

HashMap<String, String> map;
ArrayList<HashMap<String,String>> myList;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    myList = new ArrayList<HashMap<String,String>>();       
    listView = (ListView) findViewById(R.id.listView1);
    fillListView();
}

private void fillListView() {

    myList.clear();

    map = new HashMap<String, String>();
    map.put(TAG_ID,"1");
    map.put(TAG_NAME, "Name1");
    myList.add(map);

    map = new HashMap<String, String>();
    map.put(TAG_ID,"2");
    map.put(TAG_NAME, "Name2");
    myList.add(map);

    map = new HashMap<String, String>();
    map.put(TAG_ID,"3");
    map.put(TAG_NAME, "Name3");
    myList.add(map);

    map = new HashMap<String, String>();
    map.put(TAG_ID,"4");
    map.put(TAG_NAME, "Name4");
    myList.add(map);

    listView.setAdapter(new MyListAdapter(this, R.layout.row, myList));

}
private class MyListAdapter extends BaseAdapter 
{

    private List<HashMap<String,String>> List;
    private LayoutInflater mInflater;
    private int layoutresource;

    public MyListAdapter(Context context,int resource,List<HashMap<String, String>> myList) {
        List = myList;
        mInflater = LayoutInflater.from(context);
        layoutresource = resource;
    }

    @Override
    public int getCount() {
        return List.size();
    }

    @Override
    public Object getItem(int position) {
        return List.get(position);
    }

    @Override
    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent) {

        if (convertView == null) {
            convertView = mInflater.inflate(layoutresource,null);
        }    

         final View rootView = convertView.findViewById(R.id.root);

        ImageView imageView = (ImageView) convertView.findViewById(R.id.imageView1);
        final TextView name = (TextView) convertView.findViewById(R.id.textView1);

        imageView.setImageDrawable(getResources().getDrawable(R.drawable.profile));
        name.setTextColor(Color.parseColor("#ffffff"));
        name.setText(List.get(position).get(TAG_NAME));

        if ( List.get(position).get(TAG_ID).equals(selected))
            name.setTextColor(Color.parseColor("#ff0000"));
        else
            name.setTextColor(Color.parseColor("#ffffff"));

        rootView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                selected = List.get(position).get(TAG_ID);
                fillListView();
            }
        });

        name.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                rootView.performClick();
            }
        });

        imageView.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                rootView.performClick();
            }
        });

        return convertView;
    }
} 
```

}

# java - 使用 GAE/J DataNucleus 插件版本 2.1.2 无法获取新创建的 JDO 持久实体的 ID

> ID：15065552
> 
> 赞同：4
> 
> 时间：2013-02-25T11:07:28.200
> 
> 标签：java, google-app-engine, google-cloud-datastore, jdo, datanucleus

**我的问题**

我正在使用新的 1.7.5 GAE/J SDK 将我的应用程序从版本 1.x 移植到 GAE/J 的 DataNucleus 插件的 2.0。这将我的 JDO 版本从 2.3 更改为 3.0.1。我的持久实体类具有编码字符串类型的主键，以及对对象数字 ID 的只读访问权限。每个实例都是其实体组的唯一成员（子级和父级仅通过数字 ID 链接）。

以前，我已经能够创建和持久化一个新`MyEntity`实例，然后立即访问其数字 ID 以存储在父`MyEntity`实例的子 ID 列表中。

现在我发现新实例的数字 ID 在持久化后不能立即使用——即使它是生成和存储的并且稍后可用。

**我的问题**

在对象创建和持久性之后，我可以做些什么来立即恢复对数字 ID 的访问？

**“jdoconfig.xml”配置提取**

```
<persistence-manager-factory name="big-table">
  <property
   name="javax.jdo.PersistenceManagerFactoryClass"
   value="org.datanucleus.api.jdo.JDOPersistenceManagerFactory"
  />
  <property name="datanucleus.DetachAllOnCommit" value="true"/>
  <property name="javax.jdo.option.NontransactionalRead" value="true"/>
  <property name="javax.jdo.option.NontransactionalWrite" value="true"/>
  <property
   name="datanucleus.appengine.autoCreateDatastoreTxns"
   value="true"
  />
  [...]
</persistence-manager-factory> 
```

**持久化实体类代码提取**

```
@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable = "true")
public class MyEntity implements Serializable
{
  private static final long serialVersionUID = 1L;

  // No setter for this read-only data member
  @PrimaryKey
  @Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
  @Extension(vendorName="datanucleus", key="gae.encoded-pk", value="true")
  private String sEncodedKey;

  // No setter for this read-only data member
  @Persistent
  @Extension(vendorName="datanucleus", key="gae.pk-id", value="true")
  private Long loID;

  @Persistent
  private Long loParentID;

  //
  // Other persistent data members
  //

  public Long getID()
  {
    return loID;
  }

  //
  // Other getters and setters
  //
} 
```

**包含 3 个日志记录点的持久性代码**

```
/**
 * Create a new entity.
 * @param loParentID
 *   The ID of the entity,
 *   a new child of which is to be created.
 * @param sChildName
 *   The name of the new child to be created.
 * @return
 *   The created entity child,
 *   or <code>null</code> if the operation was carried out unsuccessfully.
 */
public static MyEntity createEntityChild(Long loParentID, String sChildName)
{
  MyEntity meResult = null;
  MyEntity mePersistedChild = null;

  PersistenceManagerFactory pmf =
   DataExchange.getPersistenceManagerFactory();    // My own method
  PersistenceManager pm = pmf.getPersistenceManager();
  Transaction tx = pm.currentTransaction();
  try
  {
    tx.begin();

    MyEntity meChild = new MyEntity();
    meChild.setParentID(loParentID);
    meChild.setName(sChildName);
    meChild.setActive(true);
    mePersistedChild = pm.makePersistent(meChild);

    // "Touch" data member not in the default fetch group
    ArrayList<Long> liChildIDs = mePersistedChild.getChildIDs();
    if (liChildIDs != null)
      liChildIDs.size();

    if (mePersistedChild != null)
      g_logger.log(Level.FINE, String.format(
       "Pre-commit: mePersistedChild.getID() = %d,"
       + " mePersistedChild.getEncodedKey() = \"%s\".",
       mePersistedChild.getID(), mePersistedChild.getEncodedKey()));

    tx.commit();

    if (mePersistedChild != null)
      g_logger.log(Level.FINE, String.format(
       "Post-commit: mePersistedChild.getID() = %d,"
       + " mePersistedChild.getEncodedKey() = \"%s\".",
       mePersistedChild.getID(), mePersistedChild.getEncodedKey()));
  }
  finally
  {
    try
    {
      if (tx.isActive())    // Because of an exception, say
        tx.rollback();
    }
    finally
    {
      pm.close();
    }
  }

  if (mePersistedChild != null)
    g_logger.log(Level.FINE, String.format(
     "Post-pm-close: mePersistedChild.getID() = %d,"
     + " mePersistedChild.getEncodedKey() = \"%s\".",
     mePersistedChild.getID(), mePersistedChild.getEncodedKey()));

  [...]

  return meResult;
} 
```

**开发服务器日志输出**

```
24-Feb-2013 13:28:02 [...].MyEntityBusiness createMyEntityChild
FINE: Pre-commit: mePersistedChild.getID() = null, mePersistedChild.getEncodedKey() = "agttYXJrZXQtdHJlZXISCxIMSXRlbUNhdGVnb3J5GAUM".

24-Feb-2013 13:28:03 [...].MyEntityBusiness createMyEntityChild
FINE: Post-commit: mePersistedChild.getID() = null, mePersistedChild.getEncodedKey() = "agttYXJrZXQtdHJlZXISCxIMSXRlbUNhdGVnb3J5GAUM".

24-Feb-2013 13:28:03 [...].MyEntityBusiness createMyEntityChild
FINE: Post-pm-close: mePersistedChild.getID() = null, mePersistedChild.getEncodedKey() = "agttYXJrZXQtdHJlZXISCxIMSXRlbUNhdGVnb3J5GAUM".

24-Feb-2013 13:28:07 com.google.appengine.api.datastore.dev.LocalDatastoreService$PersistDatastore persist
INFO: Time to persist datastore: 141 ms 
```

**JDO增强版本验证**

构建过程成功，输出片段：

```
datanucleusenhancer:
09:33:00,531 (main) INFO  [DataNucleus.Enhancer] - DataNucleus Enhancer for API "JDO"
09:33:01,125 (main) INFO  [DataNucleus.Enhancer] - DataNucleus Enhancer (version 3.1.1) : Enhancement of classes
DataNucleus Enhancer (version 3.1.1) : Enhancement of classes
09:33:03,281 (main) INFO  [DataNucleus.Enhancer] - Writing class file "[Path]\MyEntity.class" with enhanced definition
[... (N entries in all)]
09:33:04,046 (main) INFO  [DataNucleus.Enhancer] - DataNucleus Enhancer completed with success for [N] classes. Timings : input=1922 ms, enhance=984 ms, total=2906 ms. Consult the log for full details
DataNucleus Enhancer completed with success for [N] classes. Timings : input=1922 ms, enhance=984 ms, total=2906 ms. Consult the log for full details 
```

**软件环境**

*   网络服务器：Google App Engine for Java 1.7.5 版
*   Web 框架：Apache Wicket 6.5.0
*   Java版本：1.6.0_39；Java HotSpot(TM) 客户端虚拟机 20.14-b01
*   GAE/J DataNucleus 插件版本：2.1.2
*   DataNucleus 访问平台版本：3.1.3
*   JDO 版本：3.0.1
*   操作系统：在 x86 上运行的 Microsoft Windows XP 5.1 版
*   IDE：NetBeans 7.2（内部版本 201207171143）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T09:36:41.340

GAE JDO 插件仅在从数据存储区读取标有该字段的字段时设置“gae.pk-id”/“gae.pk-name”字段（只需在 SVN 主干中进行搜索，FetchFieldManager 是唯一的地方它的加载位置 - 它在执行 PUT 时不会设置它）。不知道它在 1.x 中做了什么，但 GAE 自己的所有测试在 2.x 中都通过了，就像在 1.x 中一样。但是那个“特性”无论如何都不是标准的JDO，所以我对它没什么兴趣。

JDO 提供[生命周期侦听](http://www.datanucleus.org/products/accessplatform_3_2/jdo/lifecycle_callbacks.html)器，您可以轻松设置*postStore*回调并在其中设置对象中的某些字段（并且不依赖于 AppEngine 特定的“功能”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T23:58:14.107

受@DataNucleus 评论的启发，我以一种类似的精神进行了解决。下面列出的解决方法对我有用，但我发现我的根本问题仍然存在。

所有使用编码键字符串的（只读）数字 ID 的持久实体都需要`getID()`更改其方法才能使用变通方法。

**Java 代码**

我将我的 ID getter 方法（前面给出）修改如下：

```
public Long getID()
{
  Long loResult = DataExchange.getIDFromEKSIfIDIsNull(loID, sEncodedKey);
  return loResult;
} 
```

我的`DataExchange`班级有新方法：

```
import com.google.appengine.api.datastore.Key;
import com.google.appengine.api.datastore.KeyFactory;

/**
 * Get the ID supplied, or get it from the encoded key string if the ID is
 * <code>null</code>.
 * <br/>
 * This method is necessary since JDO version 3.0.1 introduces a long delay
 * between entity first persistence and ID availability using the DataNucleus
 * GAE primary key ID plug-in.
 * @param loID
 *   The persistent entity ID.
 *   This may be <code>null</code> if the entity has been persisted for the
 *   first time but its generation is delayed (a big hello to JDO version
 *   3.0.1).
 * @param sEncodedKey
 *   The persistent entity encoded key string.
 *   This should be not <code>null</code> if the entity has been persisted.
 * @return
 *   <ul>
 *     <li>
 *       If the persistent entity ID supplied is not <code>null</code>
 *       then return it
 *     </li>
 *     <li>
 *       else if the encoded key string is not <code>null</code> then extract
 *       the ID and return it
 *     </li>
 *     <li>
 *       else return <code>null</code>.
 *     </li>
 *   </ul>
 */
public static Long getIDFromEKSIfIDIsNull(Long loID, String sEncodedKey)
{
  Long loResult = null;

  if (loID != null)
    loResult = loID;
  else if (sEncodedKey != null)
  {
    Key key = KeyFactory.stringToKey(sEncodedKey);
    if (key != null)
    {
      long loIDFromEKS = key.getId();
      loResult = Long.valueOf(loIDFromEKS);
    }
  }

  return loResult;
} 
```

# mysql - 从 PHP/MySQL 生成多维数组

> ID：15065554
> 
> 赞同：0
> 
> 时间：2013-02-25T11:07:49.187
> 
> 标签：mysql

我想获得与我的 mysql 表相同的结果。在我的桌子下面：

```
CREATE TABLE IF NOT EXISTS `map_point` (
  `Id` int(11) NOT NULL AUTO_INCREMENT,
  `Location` varchar(80) NOT NULL,
  `type` varchar(80) NOT NULL,
  `icon` varchar(70) NOT NULL DEFAULT '',
  PRIMARY KEY (`Id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=898 ; 
```

* * *

类型分别为 Phase1、Phase2……最终的多维数组必须如下所示：

```
$data = array ( "Phase1" => array("name"=>"Phase 1", "icon"=>"icons/iconb.png"),
                "Phase2" => array("name"=>"Phase 2", "icon"=>"icons/icong.png"),
                "Phase3" => array("name"=>"Phase 3", "icon"=>"icons/iconr.png"),
                "Phase2p" => array("name"=>"Phase 2+", "icon"=>"icons/icony.png"),
                "Phase3p" => array("name"=>"Phase 3+", "icon"=>"icons/iconpi.png"),
                "RollOut2012" => array("name"=>"Roll Out 2012","icon"=>"icons/iconor.png"),
                "RollOut120sites" => array("name"=>"Roll Out 120 Sites", "icon"=>"icons/iconma.png"),                   
); 
```

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:12:35.590

你可以尝试类似的东西

```
$jsondata = array();
$result = mysql_query("SELECT type AS name, icon FROM map_point");
while($row = mysql_fetch_assoc($result)) { 
  if(!array_key_exists($row['type'], $jsondata))
    $jsondata[$row['name']] = $row
  else
    array_push($jsondata[$row['name']] , $row)
} 
```

# html - 在 CSS3 中逐步绘制虚线 - 动画

> ID：15065558
> 
> 赞同：3
> 
> 时间：2013-02-25T11:07:54.987
> 
> 标签：html, css, animation

我发现下面的代码可以逐步用 css3 动画和 svg 画布画一条线。唯一的问题是我希望这条线被虚线，但我不确定如何修改它，更改 stroke-dasharray 似乎没有任何作用。谢谢！

```
<svg xmlns="http://www.w3.org/2000/svg" width="400px" height="300px">
  <style type="text/css">
    path {
      animation-name:animateDash;
      animation-duration:5s;
      animation-iteration-count:infinite;
    }
    @keyframes animateDash {
      from{stroke-dasharray:0,2305}
      to  {stroke-dasharray:2305,0}
    } 
  </style>
  <path d="m 7.1428565,220.9336 c 0,0 13.6660115,54.75386 218.5714335,51.42857 C 430.61971,269.03688 478.47682,99.194335 206.69537,110.78149 -65.086093,122.36866 45.497658,213.22607 210.28635,207.29759 375.07503,201.3691 429.75297,97.468925 207.14285,82.362175 -15.467268,67.255425 64.868608,160.66909 210,153.79075 c 145.13139,-6.87834 137.69998,-93.087405 11.42857,-99.999995 -126.271412,-6.9126 -150.382292,28.03248 -24.28571,35.71428 126.09659,7.6818 72.6601,-44.83727 -5.71429,-84.2857095"
    stroke-width="3" stroke-linecap="round" fill="none" stroke="black" stroke-dasharray="0,2305"/>
</svg> 
```

[http://jsfiddle.net/G4b6b/](http://jsfiddle.net/G4b6b/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-04T05:07:07.900

这是一篇可能对您有所帮助的文章：[SVG Stroke Proprieties](http://www.w3schools.com/svg/svg_stroking.asp)。更新的小提琴是[Fiddle Updated](http://jsfiddle.net/G4b6b/53/)。stroke-dasharray 的适当性是你想要玩的东西来达到你想要的结果。

```
@keyframes animateDash {
  from{stroke-dasharray:10,10}
  to  {stroke-dasharray:15,15}
} 
```

如果那不是您想要的，并且您需要更多帮助，请给我更多详细信息。

希望能帮助到你。

```
 path {
      animation-name:animateDash;
      animation-duration:3s;
      animation-iteration-count:3;
    }
    @keyframes animateDash {
      from{stroke-dasharray:10,10}
      to  {stroke-dasharray:15,15}
    }
```

```
<svg xmlns="http://www.w3.org/2000/svg" width="400px" height="300px">
  <style type="text/css">
  </style>
  <path d="m 7.1428565,220.9336 c 0,0 13.6660115,54.75386 218.5714335,51.42857 C 430.61971,269.03688 478.47682,99.194335 206.69537,110.78149 -65.086093,122.36866 45.497658,213.22607 210.28635,207.29759 375.07503,201.3691 429.75297,97.468925 207.14285,82.362175 -15.467268,67.255425 64.868608,160.66909 210,153.79075 c 145.13139,-6.87834 137.69998,-93.087405 11.42857,-99.999995 -126.271412,-6.9126 -150.382292,28.03248 -24.28571,35.71428 126.09659,7.6818 72.6601,-44.83727 -5.71429,-84.2857095"
    stroke-width="3" stroke-linecap="round" fill="none" stroke="red" stroke-dasharray="10,10" d="M5 60 l215 0"/>
</svg>
```

# c# - asp.net 从后面的代码切换 jquery 代码

> ID：15065561
> 
> 赞同：0
> 
> 时间：2013-02-25T11:08:12.793
> 
> 标签：c#, javascript, jquery, asp.net

我正在使用 jquery.loadmask 来屏蔽网页，同时它正在提取数据，如下所示：

```
<script type="text/javascript">
        $(document).ready(function () {
            $("#btnSubmit").bind("click", function () {
                $("#lowerContent").mask("Waiting...");
            });
        });
</script> 
```

提取数据后，我需要能够使用以下代码取消屏蔽页面：

```
 $("#lowerContent").unmask(); 
```

如何从文件后面的 c# 代码中调用/注入此代码，以便删除掩码？

理想情况下，如果我可以从事件响应中调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:42:15.030

```
StringBuilder sb = new StringBuilder();
sb.Append("jQuery(function($){ $(\"#lowerContent\").unmask(); }");
ClientScript.RegisterStartupScript(this.GetType(), "script", sb.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:09:24.180

我认为您在使用后面的代码时想要实现的目标，只有使用 ClientScriptManager.RegisterStartupScript 方法才能实现。或者，如果您仅使用 ajax javascript 调用 [NO Code-Behind call] 提取数据。因为当您调用后面的代码时，您的页面将被回发，并且在 document.ready() 中编写的 javascript 将执行。所以你可以做到。

# border - Gnuplot Eps 文件轴切割

> ID：15065568
> 
> 赞同：2
> 
> 时间：2013-02-25T11:08:36.143
> 
> 标签：border, gnuplot, cut

当我对一些 eps 文件使用 gnuplot 时，我可以获得一些轴标签。这样可行。当我想将它们实现到我的乳胶文档中时，轴描述会在图形的边界处被切掉。不管数字有多大，标签字母无论如何都会在边界处被切掉。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T03:53:03.347

Gnuplot 通常不会完美地调整 .eps 文件的大小，尤其是在边缘发生某些事情时。感谢[这篇文章](http://agendafisica.wordpress.com/2011/02/11/fix-bounding-box-of-postscript-files-generated-by-gnuplot/)，我了解到有一个简单的命令可以纠正边界框以适应 .eps 的内容：

```
ps2epsi input.eps output.eps 
```

This works fine for me. There is also the [fixbb](http://www.gnuplot.info/scripts/files/fixbb) script on the gnuplot homepage.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T11:08:35.727

好的，给你：

乳胶代码：

```
\begin{figure}[H]
    \centering
\includegraphics[scale=1] {picture.eps}
\caption{caption}
\label{fig:picture}
\end{figure} 
```

Gnuplot

```
set terminal postscript enhanced portrait "Times Italic" 12 size 14cm,12cm                 #Key Character Size                           
set output 'picture.eps'
set multiplot layout 2,2

set border
set tics font "Times Italic, 10" 

set xlabel "{/Symbol e} %" font "Times Italic, 10" 
set ylabel "{/Symbol s}[MPa]" font "Times Italic, 10" rotate by -0

plot       plot exp(-x**2 / 2)
plot       plot exp(-x**2 / 2)
plot       plot exp(-x**2 / 2) 
plot       plot exp(-x**2 / 2) 
```

像这样的东西应该工作。然后 {/Symbol s}[MPa] 在 Latex 文档中没有正确显示。

# c# - wp7应用程序中的Web客户端请求缓存问题

> ID：15065580
> 
> 赞同：1
> 
> 时间：2013-02-25T11:09:20.160
> 
> 标签：c#, web-services, windows-phone-7

我`json web service`在我的网站上创建了一个 & 使用。
现在我想在我的 Windows Phone 应用程序中使用它来显示该 Web 服务正在接收的数据。所以我写了下面的代码--->

```
//// some code

StartThread();
        }

            void StartThread()
            {
                DispatcherTimer TradeThread = new DispatcherTimer();
                TradeThread.Interval = TimeSpan.FromMilliseconds(1000);
                TradeThread.Tick += new EventHandler(BindData);
                TradeThread.Start();
            }

            void BindData(object sender, EventArgs e)
            {
                WebClient wc = new WebClient();
                wc.DownloadStringAsync(new Uri("some URL"));
                wc.DownloadStringCompleted += new DownloadStringCompletedEventHandler(wc_DownloadStringCompleted);
            }

            void wc_DownloadStringCompleted(object sender, DownloadStringCompletedEventArgs e)
            {
                JObject jsonObject = JObject.Parse(e.Result);
                ///// some code 
```

代码工作正常，**但经过一些请求后数据没有更新。所以我认为存在一些缓存问题**，我不知道**如何禁用缓存或任何替代方法来获取每个请求的更新数据，**因为我以前从未使用过 Web 客户端。

因此，如果有人使用过网络服务而不是请检查我上面的代码并评论或编辑它，如果有任何解决这个缓存问题的方法............thanx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:27:49.543

一个简单的解决方法是在查询字符串的末尾附加一个随每个请求更改的值：

```
"?disablecache=" + Environment.TickCount 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:12:25.530

在请求中添加一个 no-cache 标头：

```
wc.Headers.Add("Cache-Control: no-cache"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T12:15:45.197

尝试以这种方式设置“Cache-Control”标头：

```
wc.Headers["Cache-Control"] = "no-cache"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-22T15:08:28.120

我也试过奥利弗的把戏，它奏效了！

我在我的方法中使用额外参数时遇到了一些麻烦，该参数可以满足带参数和不带参数的请求。

所以我尝试了这个并且它有效：

```
WebClient wc = new WebClient();    
wc.Headers["If-Modified-Since"] = DateTimeOffset.Now.ToString(); 
```

# php - div 中的 document.writehtml

> ID：15065583
> 
> 赞同：0
> 
> 时间：2013-02-25T11:09:26.970
> 
> 标签：php, javascript, html

嗨，我正在处理调用网络摄像头插件的表单，到目前为止一切正常，但我想在表单表中显示对齐网络摄像头屏幕，我希望网络摄像头输出显示在 ID 为“cam”的 div 中。谁能帮帮我

这是我的 javascript

```
<script>
document.getElementById("cam").innerHTML = document.write(webcam.get_html(320, 420));
</script> 
```

这是我的html

```
 <body bgcolor="Darkgrey">
    <form name="entry" method="POST" action="" id="entry">
    <table border="1" bgcolor="Silver">
        <tr>
            <td>

            </td>
            <td>
                <h2><b>Candidate Entry</b><h2>
            </td>
        </tr>
        <tr>
            <td>
               Code 
            </td>
            <td>
             <input type="text" name="vouchno" value="New" onkeypress="return isNumberKey(event)" readonly="readonly" size="8" maxlength="8">
            Date
          <input type="text" name="vouchdt" id="popupDatepicker" tabindex="1"></td>
        <td>
          <input type="text" name="councode" size="1" maxlength="2"><input type="text" name="counvouch" size="8" maxlength="8">
        </td>
        <td><div id="cam">
                    <input type=button value="Configure..." onClick="webcam.configure()">
        &nbsp;&nbsp;
        <input type=button value="Take Snapshot" onClick="take_snapshot()">
            <div id="upload_results" style="background-color:#eee;"></div>
            </div>

        </td>
      </tr>
        <tr>
            <td>
                Name
            </td>
            <td>
                <input type="text" name="name" value="" maxlength="40" size="45" tabindex="2">
            </td>
        </tr>
        <tr>
            <td>
                Address
            </td>
            <td>
                <textarea name="add" row="3" cols="40" tabindex="3">
                </textarea>
            </td>
        </tr>

        <tr>
            <td>
                City
            </td>
            <td>
               <input type="text" name="city" size="20" maxlength="20"value="" tabindex="4">
             Pin
                <input type="text" name="pin" size="6" maxlength="6"value="" tabindex="5">
            </td>
        </tr>
        <tr>
            <td>
                Nationality
            </td>
            <td>
                <input type="text" name="ntn" value="" size="10" maxlength="10" tabindex="6">
            </td>
        </tr>
        <tr>
            <td>
                Mobile No 
            </td>
            <td>
                <input type="text" name="mob" value="" tabindex="7">
            </td>
         </tr>
            <tr>
                <td>
                    Date of Birth
                </td>
                <td>
                    <input type="text" name="dob" id="popupDatepicker2" tabindex="8">
                </td>
                <td>
                    Age
                </td>
                <td width="9px">
                    <input type="text" name="age" size="3" maxlength="3" value="" tabindex="9">
                </td>
                <td width="10px">
                    Sex
                </td>
                <td>
                             <select name="sex" tabindex="12">
                            <option value="m">Male</option>
                            <option value="f">Female</option>                           
                            </select>                

                </td>
            </tr>
                <tr>
                    <td>
                        Religion
                    </td>
                    <td>
                        <input type="text" name="rel" value="" size="20" maxlength="20" tabindex="11">

                    </td>
                    <td>
                        Martial Status
                    </td>
                    <td>
                        <select name="status" tabindex="12">
                            <option value="">--select--</option>
                            <option value="1">Married</option>
                            <option value="2">Unmarried</option>                           
                            </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        Passport No.
                    </td>
                    <td>
                        <input type="text" name="pass" value="" size="15" maxlength="15" tabindex="13">
                    </td>
                    <td>
                        Place of Issue
                    </td>
                    <td>
                       <input type="text" name="poi" size="20" maxlenght-20 tabindex="14">
                    </td>
                    <td>
                        Date of Issue
                    </td>
                    <td>
                       <input type="text" name="doi" id="popupDatepicker4" tabindex="15">

                    </td>
                </tr>
                  <tr>
                      <td>
                          Profession
                      </td>
                      <td>
                        <input type="text" name="prof" size="20" maxlenght="20" value="" tabindex="16">
                      </td>
                      <td>
                          Amount
                      </td>
                      <td>
                          <input type="text" id="amt" name="amt" value="" onblur="calculateText()" tabindex="17">
                      </td>                                            
                  </tr>
                  <tr>
                      <td>
                          Payment
                      </td>
                      <td>
                          <input type="text" id="pay" name="pay" value="" tabindex="20" >
                      </td>
                      <td>
                          Received
                      </td>
                      <td>
                          <input type="text" id="resc" name="resc" value="" onblur="calculateText()" tabindex="18">
                      </td>
                  </tr>
                  <tr>
                  <td>
                      Agent
                  </td>
                  <td>
                      <input type="tetx" name="agnt" value="" size="40" maxlength="40" tabindex="21">
                  </td>
                  <td>
                      Balance
                  </td>
                  <td>
                      <input type="text" id="bal" name="bal"  readonly="readonly" value="" onblur="calculateText()" tabindex="19">
                  </td>
                  </tr>
                  <tr>
                      <td>
                          Mofa No.
                      </td>
                      <td>
                          <input type="text" name="mofa" value="" size="20" maxlength="20" tabindex="22">
                      </td>
                  </tr>
                  <tr>
                      <td>
                          Remarks
                      </td>
                      <td>
                          <input type="text" name="rem" size="60" maxlength="60" value="" tabindex="23">
                      </td>
                  </tr>
                  <table border="0" align="center">
                      <tr>

                          <td>
                              <input type="submit" name="save" value="Save">

                          <td>
                              <input type="submit" name="print" value="Print">
                          </td>
                          <td>
                              <input type="submit" name="close" value="Cancel">
                          </td>
                      </tr>
                  </table>
    </table>    
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:11:45.147

`document.write`将内容写入文档，因此更改：

```
document.getElementById("cam").innerHTML = document.write(webcam.get_html(320, 420)); 
```

至

```
document.getElementById("cam").innerHTML = webcam.get_html(320, 420); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:21:45.143

改变 ：

`document.getElementById("cam").innerHTML = document.write(webcam.get_html(320, 420));`

至 ：

`document.getElementById("cam").innerHTML = webcam.get_html(320, 420);`

参考：[http ://www.w3schools.com/jsref/prop_html_innerhtml.asp](http://www.w3schools.com/jsref/prop_html_innerhtml.asp)

# asp.net-web-api - ActionFilterAttribute 的 Web Api 自托管服务器中的错误处理

> ID：15065594
> 
> 赞同：2
> 
> 时间：2013-02-25T11:09:56.140
> 
> 标签：asp.net-web-api, actionfilterattribute

我有一个在自托管配置中运行 ASP.Net WebApi 的项目，我使用一个`ActionFilterAttribute`类作为一些安全检查的过滤器和一个`ExceptionFilterAttribute`异常处理类。

`ApiController`当我在我的类型中引发异常时，它会按预期`HttpResponseException`被类忽略。`ExceptionFilterAttribute`

**问题是**`HttpResponseException`，当我在类型的安全过滤器中引发类型异常时，`ActionFilterAttribute`它**会**被`ExceptionFilterAttribute`类捕获。

调试时我发现该异常正在更改为

> 处理 HTTP 请求导致异常。有关详细信息，请参阅此异常的“响应”属性返回的 HTTP 响应。

我能做些什么来防止这种行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:13:24.840

这种行为似乎是一个错误。你能分享一下你的动作过滤器是什么样子的吗？顺便说一句，将动作过滤器 actioncontext 的 Response 属性设置为 Http 响应会使管道短路，并且想知道是否可以避免从动作过滤器中抛出 HttpResponseException 。

# c - Linux头文件给出语法错误

> ID：15065596
> 
> 赞同：1
> 
> 时间：2013-02-25T11:10:02.507
> 
> 标签：c, linux, ubuntu-12.04, header-files

在尝试使用`gcc`我编译程序时，出现以下错误。

> 在 /usr/include/unistd.h:218:0 包含的文件中，来自 fcfssched.c:3: /usr/include/x86_64-linux-gnu/bits/types.h:31:1:
> 
> 错误：在 'typedef' 之前应有 '='、','、';'、'asm' 或 '<strong>attribute'

错误似乎在头文件中`/bits/types.h`

第二个错误（可能）是第一个错误的结果。

> 在 /usr/include/stdlib.h:320:0 包含的文件中，来自 fcfssched.c:5: /usr/include/x86_64-linux-gnu/sys/types.h:34:1:
> 
> 错误：未知类型名称'__u_char'</p>

我该如何解决这个问题？

头文件似乎没问题。我刚刚使用`libc6-dev`包更新了标题。我正在使用带有内核 3.2.0-36-generic 的 Ubuntu 12.04 x86

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T11:56:53.010

这种错误通常发生在用户代码中包含指令周围的语法错误的情况下。

如果没有丢失`;`或`}`靠近包含的包含`/bits/types.h`（遵循包含树），您应该查看您的来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:59:45.563

当您错过编码行中的 (;) 或 (}) 时，通常会出现此错误。请检查您编写的每一行代码。

解决问题的最佳方法是从收到的错误行开始逐行检查代码。不要检查项目中包含的标准文件。该错误来自您的编码文件。

# dynamics-crm-2011 - 数据存档 - MS Dynamics CRM 2011 的清除工具

> ID：15065598
> 
> 赞同：1
> 
> 时间：2013-02-25T11:10:17.010
> 
> 标签：dynamics-crm-2011

有谁知道用于 MS Dynamics CRM 2011 的良好数据归档和清除工具。我遇到了[Ignify](http://www.ignify.com/DynamicsCRMArchive.asp)工具。但是我无法下载任何试用版，因此无法查看。任何归档 CRM 数据的工具或策略都会有所帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T20:14:00.763

我不完全确定我的目标是否正确，但是 Shan McArthur（CRM 上的 MVP）有一个名为 ALM（Application Lifecycle Management，ADX Studios）的工具，可用于数据操作，例如拉出、故事输入SVN 并重新导入到组织（原始或新的）。

我与那家公司没有任何关系，我也不认识作者。我只是听说过该软件（实际上是今天），并认为它可能有用。我没有提供任何联系。

# ios - 如何使用 PushViewController 方法从 UIViewClass 导航到 UIViewController 类

> ID：15065601
> 
> 赞同：0
> 
> 时间：2013-02-25T11:10:22.853
> 
> 标签：ios, uiview, uiviewcontroller, uinavigationcontroller

我在`UIView`课堂上有一个按钮，单击该按钮我需要`UIViewController`使用 `NavigationViewController`. 我陷入了困境。谁能告诉我解决方案。
**根据用户评论编辑**

```
-(void)eventDetailView:(id)sender
{ 
  EventDetailPage *eventDetail = [[EventDetailPage alloc]initWithNibName:@"EventDetailPage" bundle:[NSBundle mainBundle]]; 
  [[[[self window] rootViewController] navigationController] pushViewController:eventDetail animated:YES]; 
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-02T11:28:17.603

你可以用这个。它对我来说效果很好：-

首先在 UIView 类中创建 AppDelegate 的对象并对其进行初始化。然后在 Appdelegate.h 中创建 Navigationcontroller 对象：-

```
@property(strong,nonatomic) UINavigationController *navControl; 
```

在你的 UIView 类中实现你想要推送的代码：-

```
ViewController *objview = [[ViewController alloc]init];
    [appDelegate.navControl pushViewController:objview animated:YES]; 
```

# javascript - 在 JS 中使用此字符串创建日期对象的最佳方法

> ID：15065605
> 
> 赞同：0
> 
> 时间：2013-02-25T11:10:33.133
> 
> 标签：javascript

我从 API 接收到这个日期/时间：

`2012-03-31 12:00:00`

做这个的最好方式是什么：

`var date = new Date("2012-03-31 12:00:00")`没有 Firefox 抱怨无效日期？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:22:26.050

您可以将日期时间字符串中的所有字段与：

```
var str = "2012-03-31 12:00:00";
var fields = str.match(/^(\d{4})-(\d{2})-(\d{2}) (\d{2}):(\d{2}):(\d{2})$/); 
```

现在`fields[1]`包含年、`fields[2]`月等。然后您可以调用`Date`：

```
// months are zero-based, so we have to subtract 1
var date = new Date(+fields[1], +fields[2] - 1, +fields[3], +fields[4], +fields[5], +fields[6]); 
```

* * *

或者使用像[http://momentjs.com/](http://momentjs.com/)这样的库来为你做这件事。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T11:51:55.637

如果你只想要你可以使用的日期：

```
var date = new Date("2012-03-31 12:00:00".split(" ")[0]); 
```

& Firefox 不会抱怨。

# javascript - Sencha 触摸列表分页

> ID：15065606
> 
> 赞同：0
> 
> 时间：2013-02-25T11:10:38.113
> 
> 标签：javascript, rest, sencha-touch, jersey

我需要使用 REST Web 服务为我的应用程序实现列表分页。

这是我的代码

列表.js

```
Ext.define('bluebutton.view.BlueButton.TestingList', {
    extend: 'Ext.List',
    xtype: 'testinglistcard',
    requires: [
        'Ext.field.Select',
        'Ext.field.Search',
        'bluebutton.view.BlueButton.MemberDetail',
         'Ext.plugin.ListPaging',
        'Ext.plugin.PullRefresh',
        'Ext.dataview.Override'

    ],
    config: {

        styleHtmlContent: true,
        scrollable: 'vertical',
        indexBar: true,
        singleSelect: true,
        onItemDisclosure: true,
        grouped: true,
        variableHeights : false,
          store : { xclass : 'bluebutton.store.BlueButton.Testing'},
            itemHeight :100,

        id :'testinglist',

        emptyText: '<p class="no-search-results">No member record found matching that search</p>',
        itemTpl: Ext.create(
            'Ext.XTemplate',
            '<div class="tweet-wrapper">',
                '<table>',
                    '<tr>',

                        '<td>',
                        '   <div class="tweet">',
                        '       <h3>{invoiceId}</h3>',
                        '      <h3>Name: {billNumber}</h3>',
                        '       <h3>Point Avalaible : {invoiceDate} , Last Visited : {invoiceAmount}</h3>',

                        '   </div>',
                        '</td>',
                    '</tr>',
                '</table>',
            '</div>'

        ),
    },
}); 
```

store.js

```
 Ext.define('bluebutton.store.BlueButton.Testing', {
    extend: "Ext.data.Store",
    requires: ['bluebutton.model.BlueButton.Testing'],
    config: {

      grouper: {
            groupFn: function (record) {
                return record.get('invoiceId')[0];
            }
        },
         model :'bluebutton.model.BlueButton.Testing',
      storeId :'testingstore',
        autoLoad: true,
          pageSize: 5,
            clearOnPageLoad: false, 
    }
}); 
```

模型.js

```
 Ext.define('bluebutton.model.BlueButton.Testing', {
    extend: 'Ext.data.Model',
    config: {

        idProperty: 'testingModel',
        fields: [
            {  name :'invoiceId'},
            {  name: 'billNumber' },
            {  name: 'invoiceDate' },
            {  name: 'invoiceAmount' },
            {  name :'downloadLink'},

        ],

        proxy: {
            type: 'rest',
           url: 'http://localhost:8080/RESTFulExample/rest/json/metallica/invoicejsonPost',
            reader: 'json',
            actionMethods: {
                create: 'POST',
                read: 'POST',
                update: 'PUT',
                destroy: 'DELETE'
            },

                      noCache: false, // get rid of the '_dc' url parameter

//                    extraParams: {
//                    userid: "test",
//                    // add as many as you need
//                },

            reader: {
                type: 'json',
                rootProperty: 'invoice'
            },

            writer: {
                type: 'json',

            },
        }
    }
}); 
```

JsonService.java

```
 @GET
     @Path("invoicejson/")
     @Produces({ MediaType.APPLICATION_JSON })
     public Response getInvoicesForCustomerJson(
       @PathParam(value = "accountId") String accountId) {

      InvoiceListDto invoices = generateMockData();

      return Response.ok(invoices).build();
     }

     private InvoiceListDto generateMockData() {
      List<InvoiceDto> invoices = new ArrayList<InvoiceDto>();
      invoices.add(new InvoiceDto(1, "37897-001", new Date(), 58.92));
      invoices.add(new InvoiceDto(2, "37897-002", new Date(), 293.63));
      invoices.add(new InvoiceDto(3, "37897-003", new Date(), 173.3));
      invoices.add(new InvoiceDto(4, "37897-004", new Date(), 130.71));
      invoices.add(new InvoiceDto(5, "37897-005", new Date(), 270.71));
      invoices.add(new InvoiceDto(6, "37897-006", new Date(), 370.71));
      invoices.add(new InvoiceDto(7, "37897-007", new Date(), 570.71));
      invoices.add(new InvoiceDto(8, "37897-008", new Date(), 670.71));
      invoices.add(new InvoiceDto(9, "37897-009", new Date(), 770.71));
      invoices.add(new InvoiceDto(10, "37897-010", new Date(), 970.71));
      invoices.add(new InvoiceDto(11, "37897-011", new Date(), 3370.71));
      invoices.add(new InvoiceDto(12, "37897-012", new Date(), 1220.71));
      invoices.add(new InvoiceDto(13, "37897-013", new Date(), 1230.71));
      invoices.add(new InvoiceDto(14, "37897-014", new Date(), 140.71));
      invoices.add(new InvoiceDto(15, "37897-015", new Date(), 150.71));
      invoices.add(new InvoiceDto(16, "37897-016", new Date(), 160.71));
      invoices.add(new InvoiceDto(17, "37897-017", new Date(), 170.71));

      return new InvoiceListDto(invoices);
     } 
```

我们如何实现 sencha 的分页？我应该在java或sencha端实现分页功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T05:33:59.347

首先，如果你想实现分页，你在 Java 和 Sencha 之间没有选择，你必须在两者上工作才能让它工作。服务应该能够获取开始、页面、大小等参数，并且您的存储/代理应该向服务发送正确的参数以获取正确的数据页面。

sencha 提供了一个[List Paging 插件](http://docs.sencha.com/touch/2-1/#!/api/Ext.plugin.ListPaging)，你应该使用它，因为它很容易工作。除此之外，您可以查看此或任何其他 listPaging 教程：[http ://www.mysamplecode.com/2012/05/sencha-touch-list-load-more.html](http://www.mysamplecode.com/2012/05/sencha-touch-list-load-more.html)

如果您不想使用插件并实现自己的方式，那么通过将列表标记为可滚动和 onscrollend 也很容易，您只需检查位置，如果它接近尾声，您只需加载商店并使用它记录以创建要推送到列表中的新项目。这是我在滚动结束时用来填充数据的函数：

```
onScrollEndOfList: function(scroller, x, y, store) {
    var pctScrolled = (x/scroller.maxPosition.x)*100;
    var remainingWidth = (scroller.maxPosition.x -x);
    if(!store.config.isFullyLoaded && remainingWidth < 1000/*pctScrolled > 70 && FETCH_DATA */){
        console.log("Already scrolled "+pctScrolled+", time to load more data. Width remaining="+remainingWidth);
        if(Utils.storeFullyLoaded(store)){
            console.log("Store is now fully loaded with "+(store.currentPage * store.getPageSize()));
            store.config.isFullyLoaded = true;
            return false;
        } else {
            store.nextPage({ addRecords: true });
            console.log("loading next page");
            return true;
        }
        return false;
    }
}, 
```

这是确定我们是否已经到达最后的代码：

```
storeFullyLoaded: function(store) {
    var total = store.getTotalCount();
    return total !== null ? store.getTotalCount() <= (store.currentPage * store.getPageSize()) : false;
}, 
```

为了`getTotalCount`工作，您需要`totalProperty`像这样在商店的代理上进行配置：

```
 reader: {
            type: 'json',
            rootProperty: 'myResponse.data',
            totalProperty: 'myResponse.status.totalCount' // where to look for total?
        } 
```

***PS***：它也有一些自定义代码，这就是为什么你应该尝试理解funda而不是使用这个代码

# asp.net - PushStreamContent 与任务操作？

> ID：15065609
> 
> 赞同：1
> 
> 时间：2013-02-25T11:10:52.803
> 
> 标签：asp.net, stream, asp.net-web-api, async-await, pushstreamcontent

任何人都可以帮忙，我希望从asp.net web api返回一个异步流，看起来有不止一种方法，或者我不明白其中的区别。

例如，您可以对标准 HttpResponseMessage 执行 PushStreamContent ，或者看起来您可以实现 Task 和 await 等。

有什么区别？？

即使是少量数据，我是否应该始终返回流？

我是否应该一直使用异步任务？

似乎很混乱，我用谷歌搜索了差异，但似乎找不到具体的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T21:09:42.010

最终这取决于你在你的情况下要做什么，这是我发现的 PushStreamContent 的一个例子：

[http://aspnet.codeplex.com/SourceControl/changeset/view/9cb7243bd9fe3b2df484bf2409af943f39533588#Samples/WebApi/PushContentControllerSample/PushContentController/Controllers/PushContentController.cs](http://aspnet.codeplex.com/SourceControl/changeset/view/9cb7243bd9fe3b2df484bf2409af943f39533588#Samples/WebApi/PushContentControllerSample/PushContentController/Controllers/PushContentController.cs)

与自定义 await 实现相比，很少有关于 PushStreamContent 的观察使其有价值：

1）它监视输出流并在可用时进行回调。2）当输出流关闭时完成响应。

让我们知道您要做什么，也许我可以给出更具体的答案。

# haskell - ST monad 的堆栈空间溢出

> ID：15065617
> 
> 赞同：3
> 
> 时间：2013-02-25T11:11:14.813
> 
> 标签：haskell, monads, lazy-evaluation, fold

以下简短的 Haskell 程序旨在计算文件中的项目列表。使用的版本`foldl'`工作正常，但使用的版本`ST Monad`给出了堆栈空间溢出消息。显然这里存在某种空间泄漏，但我无法解决它。真正有趣的部分是`ST monad`应该进行就地更新并且不应该让资源像这样增长，尽管这可能只与主内存有关，而不是堆栈空间。有人可以解释这里发生了什么吗？

```
import Control.Monad
import Data.List
import Control.Monad.ST
import Data.STRef

--count items using foldl' 
countFold :: Num a => [b] -> a
countFold = foldl' (\a _ -> a+1) 0

-- count items using the ST monad
-- derived fromt the sumST example on http://www.haskell.org/haskellwiki/Monad/ST
-- only using +1 instead of adding the values
countST :: Num a => [b] -> a
countST xs = runST $ do

    n <- newSTRef 0

    forM_ xs ( \_ -> modifySTRef n (+1) )

    readSTRef n

main = do

    mydata <- readFile "data_files/values_1000000.num"
    let trainingdata = lines mydata

    -- this works just fine
    --(putStrLn (show (countFold trainingdata)))

    -- This fails with the message:
    --   Stack space overflow: current size 8388608 bytes.
    --   Use `+RTS -Ksize -RTS' to increase it.
    (putStrLn (show (countST trainingdata))) 
```

**更新：**感谢您的回答和评论。我想我明白这里发生了什么。modifySTRef' 是 4.6 版中的新功能，它很好地解决了问题，并包含了有人提到的解释。我正在使用 4.5 版的 Data.STRef，它在 Ubuntu 中似乎是标准的，既不包括解释也不包括 modifySTRef'。

查看 4.6 包版本和函数，不同之处在于它使用 seq 来确保函数 f 被严格应用（并存储在 x' 中）：

```
modifySTRef :: STRef s a -> (a -> a) -> ST s ()
modifySTRef ref f = writeSTRef ref . f =<< readSTRef ref

modifySTRef' :: STRef s a -> (a -> a) -> ST s ()
modifySTRef' ref f = do
    x <- readSTRef ref
    let x' = f x
    x' `seq` writeSTRef ref x' 
```

所以解决它的另一种方法是将函数的代码复制到我自己程序空间中的一个新名称，并将 seq 应用于泄漏区域，这是我将来可能会使用的一个很好的通用技巧。感谢大家帮我解决这个问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T12:00:41.250

这是[经典的空间泄漏](http://www.haskell.org/pipermail/haskell-cafe/2009-June/063137.html)。

`modifySTRef`不强制将其函数参数应用于状态的结果。事实上，你无法编写它的参数函数来确保严格性。

请使用`modifySTRef'`.

# ruby - 与类定义中的“include”混淆

> ID：15065624
> 
> 赞同：1
> 
> 时间：2013-02-25T11:11:27.920
> 
> 标签：ruby

在下面的代码中，我不明白为什么这些类会返回它们的名称。

```
module Show
  def show_string
    p "hi"
  end
end

class Foo
  @x=12
  include Show
end
# => Foo

class Test
  include Show
end
# => Test 
```

为了查看原因，我插入了`object_id`. 它现在显示对象 ID。

```
class Foo
  @x=12
  (include Show).object_id
end
# => 10681980

class Too
  @x=12
  (include Show).object_id.inspect
end
# => "10648020" 
```

我没有在`Foo.new`and上创建任何对象`Too.new`。这些对象是否在类定义中创建？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:46:59.100

定义模块/类时，返回值是正文中的最后一个表达式：

```
module A; :foo end
# => :foo 
```

当 body 为空时，它返回`nil`.

```
module A; end
# => nil 
```

现在，请注意返回值`include`是包含的模块。您可以在`main`环境中看到这一点：

```
p (include A)
# => Object 
```

所以当你`include A`在模块体内做的时候`B`，返回值应该是最后一个表达式的值`include A`，也就是`B`。

```
module B
  include A
end
# => B 
```

您尚未创建`Foo`或的任何实例`Too`。您看到的对象 id 是类的对象 id`Foo`和`Too`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:37:40.567

在您的第一个代码示例中，类没有返回它们的名称。他们*自己返回类*，irb 将其呈现为类名。

对于您的第二个代码块，#include 的返回值是执行包含的类。您在第二个代码块中看到的对象 ID 是 Foo 和 Too 的 ID。这是否回答你的问题？

# android-emulator - Google TV sdk 安装错误

> ID：15065627
> 
> 赞同：-1
> 
> 时间：2013-02-25T11:11:34.357
> 
> 标签：android-emulator, google-tv

我正在使用 Windows XP 32 位。硬件规格 - 64 位 i3 四核 3.4ghz。它支持硬件加速。

它显示未安装 google TV api level 13 add on。但是当我尝试下载它时，什么也没有发生。需要帮忙。先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T15:43:27.240

在此处查看文档：

[http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)

和

[https://developers.google.com/tv/android/docs/gtv_addon](https://developers.google.com/tv/android/docs/gtv_addon)

每个人说没有 Google TV SDK - 它是仿真库。使用 android api level 13 构建应用程序。如果您想做 Google TV 特定功能编码，例如频道列表等，请查看此处提供的示例： [https ://developers.google.com/tv/android/docs/gtv_demo_samples](https://developers.google.com/tv/android/docs/gtv_demo_samples)

# javascript - 我应该如何延迟加载 Ext JS MVC 控制器、视图、存储和模型？

> ID：15065629
> 
> 赞同：6
> 
> 时间：2013-02-25T11:11:41.413
> 
> 标签：javascript, model-view-controller, extjs, lazy-loading

我们使用 Ext JS MVC 作为插件/主机架构的前端技术，其中存在一个主机并且可以通过 xcopy 轻松安装许多插件。每个插件都有一个 Ext JS 应用程序，每个插件都会在页面加载时注册自己。整个应用程序是[单页应用程序 (SPA)](http://en.wikipedia.org/wiki/Single-page_application)。

我们现在遇到的主要问题是，我们安装了 10 多个插件，每个插件至少有 10 个控制器，以及 50 多个视图、存储和模型。因此，当我们刷新页面 (F5) 时，我们应该坐下来等待近 30 秒，以便接近 200 个 HTTP 请求的内容到达服务器，并返回接近 3 MB 的响应。

尽管已经应用了缓存，但这根本不是可取的。甚至不是第一次。我想即使是外行也会接受这样的论点，即要得到一些牛奶，你不应该等到农场、奶牛、谷仓、房屋、道路、电力、河流等建成。

这个问题的明确答案必须是**延迟加载**控制器、视图、存储和模型。然而，我们并没有清楚地知道我们必须做什么才能做到这一点，我们也无法在网络上找到一个好的、适用的答案。大多数讨论只是关于**延迟加载**的要求，但没有提到*如何*。例如看这个链接：

[http://www.sencha.com/forum/showthread.php?130449-Large-Single-Page-Architecture-in-ExtJS-4.0](http://www.sencha.com/forum/showthread.php?130449-Large-Single-Page-Architecture-in-ExtJS-4.0)

或者这个：

[http://www.sencha.com/forum/archive/index.php/t-156694.html?s=aaeec1ce30acbc9cbd2615afadec982f](http://www.sencha.com/forum/archive/index.php/t-156694.html?s=aaeec1ce30acbc9cbd2615afadec982f)

如果我们使用`Ext.require`方法，那么我们只将我们的控制器加载为简单的 JavaScript 文件，它们不会进入它们的层次结构来加载它们的存储、视图和模型。我们已经对此进行了测试。

另一方面，我们在 Ext JS 上找不到`getController()`和。`ControllerManager`似乎他们在 Ext JS 4.1.3 上消失了。

关于如何根据 URL 参数动态加载控制器的任何想法（我们可能需要一个路由引擎来解析 URL 并动态加载控制器）。即使是文档齐全的文章或带有代码示例的论坛讨论也可以帮助我们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:32:01.907

**对于您的问题，您应该使用Ext.require**在菜单单击等事件上加载控制器文件。在此之后，您应该初始化您的控制器。

我阅读了 ExtJs 源代码并在下面实现了一个自定义的延迟加载控制器。

```
// this should run first time your application start
Ext.application({
    name: 'AppName',
    appProperty: 'appProp'
});

// below lines should run when you want to load controllers
// (for ex on menuitemclick)
var controllers = ['yourController', 'anotherController'];

Ext.require(controllers, function () {
    for (i = 0; i < controllers.length; i++) {
        var controllerName = controllers[i].substr(controllers[i].lastIndexOf(".") + 1);
        if (!AppName.appProp.controllers.get(controllerName)) {
            var controller = Ext.create(controllers[i], {
                application: AppName.appProp,
                id: controllerName
            });
            controller.init(AppName.appProp);
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-24T19:13:29.617

你试过 Ext.create() 吗？

[http://docs.sencha.com/extjs/4.2.0/#!/api/Ext-method-create](http://docs.sencha.com/extjs/4.2.0/#!/api/Ext-method-create)

此方法将动态加载您的 .js 文件，并且似乎运行良好。但是，似乎应该有一种更清洁的方法来做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-09T02:56:38.053

至少在 4.2.0 中，这是可用的。从[Architecting Your App](http://www.sencha.com/learn/architecting-your-app-in-ext-js-4-part-2)教程中...

> 在较大的应用程序中，您可能希望在运行时加载其他控制器。您可以使用 getController 方法来做到这一点。当您在运行时加载其他控制器时，您必须记住手动调用加载的控制器上的 init 方法。

```
someAction: function() {
  var controller = this.getController('AnotherController');

  // Remember to call the init method manually
  controller.init();
} 
```

这是 .的此功能的文档[链接](http://docs.sencha.com/extjs/4.2.0/#!/api/Ext.app.Application-method-getController)`Ext.app.Application`。

# c++ - 使用 EGL 像素缓冲区

> ID：15065630
> 
> 赞同：5
> 
> 时间：2013-02-25T11:11:42.007
> 
> 标签：c++, opengl-es, opengl-es-2.0, egl

我在嵌入式平台 Mali400GPU、Ubuntu 上。我正在尝试使用 EGL 像素缓冲区，将使用片段着色器渲染的纹理复制到像素缓冲区，以便我可以在 CPU 上对该缓冲区进行一些处理。我已经完成了以下代码，但是当尝试使用缓冲区对象并在四边形上绘制它时，四边形有一个扭曲的纹理，我不知道为什么。

这是在初始化函数中

```
// EGL variables
EGLDisplay eglDisplay = 0;
EGLConfig eglConfigWindow = 0;
EGLConfig eglConfigPbuffer = 0;
EGLSurface eglSurfaceWindow = 0;
EGLSurface eglSurfacePbuffer = 0;
EGLContext eglContext = 0;

const EGLint attribListWindow[] =
{
    EGL_SURFACE_TYPE, EGL_WINDOW_BIT,
    EGL_RED_SIZE, 5,
    EGL_GREEN_SIZE, 6,
    EGL_BLUE_SIZE, 5,
    EGL_ALPHA_SIZE, 0,
    EGL_DEPTH_SIZE, 16,
    EGL_STENCIL_SIZE, 0,
    EGL_NONE
};
const EGLint attribListPbuffer[] =
{
    EGL_SURFACE_TYPE, EGL_PBUFFER_BIT,
    EGL_RED_SIZE, 5,
    EGL_GREEN_SIZE, 6,
    EGL_BLUE_SIZE, 5,
    EGL_ALPHA_SIZE, 0,
    EGL_DEPTH_SIZE, 16,
    EGL_STENCIL_SIZE, 0,
    EGL_NONE
};
const EGLint srfPbufferAttr[] =
{
    EGL_WIDTH, 1024,
    EGL_HEIGHT, 1024,
    EGL_COLORSPACE, GL_RGB,
    EGL_TEXTURE_FORMAT, EGL_TEXTURE_RGB,
    EGL_TEXTURE_TARGET, EGL_TEXTURE_2D,
    EGL_LARGEST_PBUFFER, EGL_TRUE,
    EGL_NONE
};

    EGLint iMajorVersion, iMinorVersion;
    int iConfigs;
    eglDisplay = eglGetDisplay(EGL_DEFAULT_DISPLAY);
    eglInitialize(eglDisplay, &iMajorVersion, &iMinorVersion);
    eglChooseConfig(eglDisplay, attribListWindow,
                    &eglConfigWindow, 1, &iConfigs);
    eglContext = eglCreateContext(eglDisplay,
                                  eglConfigWindow, NULL, NULL);
    eglSurfaceWindow = eglGetCurrentSurface(EGL_DRAW);
    eglSurfacePbuffer = eglCreatePbufferSurface(eglDisplay,
                        eglConfigPbuffer,srfPbufferAttr);

    eglMakeCurrent(eglDisplay, eglSurfacePbuffer, eglSurfacePbuffer, eglContext);

    glGenTextures(1, &theSource);
    glBindTexture(GL_TEXTURE_2D, theSource);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, 1024,
                 1024, 0, GL_RGB, GL_UNSIGNED_BYTE, NULL);
    glTexParameterf(GL_TEXTURE_2D,
                    GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D,
                    GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameterf(GL_TEXTURE_2D,
                    GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameterf(GL_TEXTURE_2D,
                    GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE); 
```

在绘图中：

```
 UserData *userData = (UserData*)esContext->userData;
    GLfloat vVertices[] = { -1.0f,  -1.0f, 0.0f,  // Position 0
                            0.0f,  0.0f,        // TexCoord 0
                            -1.0f,  1.0f, 0.0f,  // Position 1
                            0.0f,  1.0f,        // TexCoord 1
                            1.0f,  1.0f, 0.0f,  // Position 2
                            1.0f,  1.0f,        // TexCoord 2
                            1.0f, -1.0f, 0.0f,  // Position 3
                            1.0f,  0.0f         // TexCoord 3
                          };
    GLushort indices[] = { 0, 1, 2, 0, 2, 3 };

    // Set the viewport
    glViewport ( 0, 0, esContext->width, esContext->height );
    // Clear the color buffer
    glClear ( GL_COLOR_BUFFER_BIT| GL_DEPTH_BUFFER_BIT);
     // Use the program object
    glUseProgram ( userData->programObject );

    // Load the vertex position
    glVertexAttribPointer ( userData->positionLoc, 3, GL_FLOAT,
                            GL_FALSE, 5 * sizeof(GLfloat), vVertices );
    // Load the texture coordinate
    glVertexAttribPointer ( userData->texCoordLoc, 2, GL_FLOAT,
                            GL_FALSE, 5 * sizeof(GLfloat), &vVertices[3] );

    glEnableVertexAttribArray ( userData->positionLoc );
    glEnableVertexAttribArray ( userData->texCoordLoc );

    // Bind the base map
    glUniform1i ( userData->baseMapLoc, 0 );
    glActiveTexture ( GL_TEXTURE0 );
    glBindTexture ( GL_TEXTURE_2D, userData->baseMapTexId );
    glTexParameteri ( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR );
    glTexParameteri ( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR );
    //glCopyTexImage2D(GL_TEXTURE_2D,0,0,0,0,0, 1024, 1024);
    glDrawElements ( GL_TRIANGLES, 6, GL_UNSIGNED_SHORT, indices );

    eglMakeCurrent(eglDisplay, eglSurfacePbuffer, eglSurfacePbuffer, eglContext);

    eglBindTexImage(eglDisplay, eglSurfacePbuffer, EGL_BACK_BUFFER);

    glBindTexture(GL_TEXTURE_2D, theSource);

    glCopyTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, 0, 0, 1024, 1024, 0);
    glDrawElements ( GL_TRIANGLES, 6, GL_UNSIGNED_SHORT, indices ); 
```

# ubuntu - 通过 api kannel 和 smpp 3.4 发送短信

> ID：15065637
> 
> 赞同：0
> 
> 时间：2013-02-25T11:11:53.283
> 
> 标签：ubuntu, smpp, kannel

我想通过 API kannel 和 smpp 3.4 发送短信

我安装 kannel：

```
apt-get install   KANNEL 
```

现在我在文件 kannel.conf 中有这个值

```
#
# Sample configuration file for Kannel bearerbox on Debian.
# See the documentation for explanations of fields.
#

# HTTP administration is disabled by default. Make sure you set the
# password if you enable it.

group = core
admin-port = 13000
admin-password = bar
admin-deny-ip = "*.*.*.*"
admin-allow-ip = ""
wapbox-port = 13002
wdp-interface-name = "*"
log-file = "/var/log/kannel/bearerbox.log"
box-deny-ip = "*.*.*.*"
box-allow-ip = "127.0.0.1"

group = wapbox
bearerbox-host = localhost
log-file = "/var/log/kannel/wapbox.log" 
```

我尝试修改文件 /etc/kannel/kannel.conf

```
# Syed Jahanzaib
    # http://aacable.wordpress.com
    # aacable [at] hotmail.com

    group = core
    admin-port = 13000
    smsbox-port = 13001
    admin-password = zaibadmin
    status-password = zaibstatus
    log-file = "/var/log/kannel/bearerbox.log"
    log-level = 0
    box-deny-ip = "*.*.*.*"
    box-allow-ip = "127.0.0.1"

    group = smsc
    smsc = at
    modemtype = teltonika
    device = /dev/ttyACM0 # change this to match your port, it could ACM1 , if you dont set it correctly,  it will not work and you will get error in logs that unable to connect to device)
    speed = 19200
    my-number = 92568253 # (put your sim number, not necessary)

    group = modems
    id = teltonika
    name = "Teltonika E12"
    detect-string = "Undefined"
    enable-mms = true
    init-string = "AT+CNMI=2,2,0,1,1"
    speed = 115200

    group = smsbox
    bearerbox-host = localhost
    sendsms-port = 13013
    global-sender = 13013
    sendsms-chars = "0123456789 +-"
    log-file = "/var/log/kannel/smsbox.log"
    log-level = 0
    access-log = "/var/log/kannel/access.log"

    group = sendsms-user
    username = kannel
    password = kannel
    concatenation = true
    max-messages = 3

    group = sms-service
    keyword = default
    get-url = "http://localhost/kannel/receivesms.php?sender=%p&amp;text=%b"
    accept-x-kannel-headers = true
    max-messages = 3
    concatenation = true
    catch-all = true 
```

但是当我在浏览器中测试时：

```
http://10.20.20.26:13000/status?password=zaibstatus 
```

我有 ：

```
Kannel bearerbox version `1.4.3'. Build `Apr 6 2010 13:16:08', compiler `4.4.3'. System Linux, release 2.6.32-41-generic, version #90-Ubuntu SMP Tue May 22 11:31:25 UTC 2012, machine i686\. Hostname ubuntu, IP 127.0.1.1\. Libxml version 2.7.6\. Using OpenSSL 0.9.8k 25 Mar 2009\. Compiled with MySQL 5.1.41, using MySQL 5.1.63\. Using native malloc.

Status: running, uptime 0d 0h 9m 7s

WDP: received 0 (0 queued), sent 0 (0 queued)

SMS: received 0 (0 queued), sent 0 (0 queued), store size -1

SMS: inbound (0.00,0.00,0.00) msg/sec, outbound (0.00,0.00,0.00) msg/sec

DLR: 0 queued, using internal storage

No boxes connected

SMSC connections:
    unknown    AT2[/dev/ttyACM0 # change this to match your port, it could ACM1 , if you dont set it correctly, it will not work and you will get error in logs that unable to connect to device)] (connecting, rcvd 0, sent 0, failed 0, queued 0 msgs) 
```

我想知道kannel.conf的每个参数

特别是：

```
group = smsc
        smsc = at
        modemtype = teltonika
        device = /dev/ttyACM0 # change this to match your port, it could ACM1 , if you dont set it correctly,  it will not work and you will get error in logs that unable to connect to device) 
```

但是当我在浏览器中测试时：

```
http://10.20.20.26:13013/cgi-bin/sendsms?username=kannel&password=kannel&to=22222222&text=ZAIB+KANNEL+WORK 
```

我有 ：

```
 3: Queued for later delivery 
```

我在文件中有这个值：**bearerbox.log**

```
 2013-02-22 07:39:41 [14035] [0] INFO: Added logfile `/var/log/kannel/bearerbox.log' with level `0'.
2013-02-22 07:39:41 [14035] [0] INFO: HTTP: Opening server at port 13000.
2013-02-22 07:39:41 [14035] [0] DEBUG: Started thread 1 (gwlib/fdset.c:poller)
2013-02-22 07:39:41 [14035] [0] DEBUG: Started thread 2 (gwlib/http.c:server_thread)
2013-02-22 07:39:41 [14035] [1] DEBUG: Thread 1 (gwlib/fdset.c:poller) maps to pid 14035.
2013-02-22 07:39:41 [14035] [0] DEBUG: Started thread 3 (gw/bb_http.c:httpadmin_run)
2013-02-22 07:39:41 [14035] [0] DEBUG: starting UDP sender/receiver module
2013-02-22 07:39:41 [14035] [0] INFO: Adding interface *
2013-02-22 07:39:41 [14035] [2] DEBUG: Thread 2 (gwlib/http.c:server_thread) maps to pid 14035.
2013-02-22 07:39:41 [14035] [0] DEBUG: udpc_create: Bound to UDP <0.0.0.0:9200>
2013-02-22 07:39:41 [14035] [3] DEBUG: Thread 3 (gw/bb_http.c:httpadmin_run) maps to pid 14035.
2013-02-22 07:39:41 [14035] [0] DEBUG: Started thread 4 (gw/bb_udp.c:udp_receiver)
2013-02-22 07:39:41 [14035] [0] DEBUG: Started thread 5 (gw/bb_udp.c:udp_sender)
2013-02-22 07:39:41 [14035] [4] DEBUG: Thread 4 (gw/bb_udp.c:udp_receiver) maps to pid 14035.
2013-02-22 07:39:41 [14035] [0] DEBUG: udpc_create: Bound to UDP <0.0.0.0:9201>
2013-02-22 07:39:41 [14035] [5] DEBUG: Thread 5 (gw/bb_udp.c:udp_sender) maps to pid 14035.
2013-02-22 07:39:41 [14035] [6] DEBUG: Thread 6 (gw/bb_udp.c:udp_receiver) maps to pid 14035.
2013-02-22 07:39:41 [14035] [0] DEBUG: Started thread 6 (gw/bb_udp.c:udp_receiver)
2013-02-22 07:39:41 [14035] [0] DEBUG: Started thread 7 (gw/bb_udp.c:udp_sender)
2013-02-22 07:39:41 [14035] [7] DEBUG: Thread 7 (gw/bb_udp.c:udp_sender) maps to pid 14035.
2013-02-22 07:39:41 [14035] [0] DEBUG: starting wapbox connection module
2013-02-22 07:39:41 [14035] [0] DEBUG: Started thread 8 (gw/bb_boxc.c:wdp_to_wapboxes)
2013-02-22 07:39:41 [14035] [8] DEBUG: Thread 8 (gw/bb_boxc.c:wdp_to_wapboxes) maps to pid 14035.
2013-02-22 07:39:41 [14035] [0] DEBUG: Started thread 9 (gw/bb_boxc.c:wapboxc_run)
2013-02-22 07:39:41 [14035] [0] DEBUG: starting WDP router
2013-02-22 07:39:41 [14035] [9] DEBUG: Thread 9 (gw/bb_boxc.c:wapboxc_run) maps to pid 14035.
2013-02-22 07:39:41 [14035] [0] DEBUG: Started thread 10 (gw/bearerbox.c:wdp_router)
2013-02-22 07:39:41 [14035] [0] INFO: ----------------------------------------
2013-02-22 07:39:41 [14035] [0] INFO: Kannel bearerbox II version 1.4.3 starting
2013-02-22 07:39:41 [14035] [0] INFO: MAIN: Start-up done, entering mainloop
2013-02-22 07:39:41 [14035] [10] DEBUG: Thread 10 (gw/bearerbox.c:wdp_router) maps to pid 14035.
2013-02-22 07:39:42 [14035] [9] INFO: Client connected from <127.0.0.1> 
2013-02-22 07:39:42 [14035] [9] DEBUG: Started thread 11 (gw/bb_boxc.c:function)
2013-02-22 07:39:42 [14035] [11] DEBUG: Thread 11 (gw/bb_boxc.c:function) maps to pid 14035.
2013-02-22 07:39:42 [14035] [11] DEBUG: setting up systems for new wapbox
2013-02-22 07:39:42 [14035] [11] DEBUG: Started thread 12 (gw/bb_boxc.c:boxc_sender)
2013-02-22 07:39:42 [14035] [12] DEBUG: Thread 12 (gw/bb_boxc.c:boxc_sender) maps to pid 14035.
2013-02-25 01:16:38 [14035] [11] INFO: Connection closed by the box <127.0.0.1>
2013-02-25 01:16:38 [14035] [12] DEBUG: send_msg: sending msg to box: <127.0.0.1>
2013-02-25 01:16:38 [14035] [12] DEBUG: Thread 12 (gw/bb_boxc.c:boxc_sender) terminates.
2013-02-25 01:16:38 [14035] [11] DEBUG: Thread 11 (gw/bb_boxc.c:function) terminates.
2013-02-25 01:16:38 [14035] [0] WARNING: Killing signal or HTTP admin command received, shutting down...
2013-02-25 01:16:38 [14035] [0] DEBUG: Shutting down Kannel...
2013-02-25 01:16:38 [14035] [0] DEBUG: shutting down smsc
2013-02-25 01:16:38 [14035] [0] DEBUG: shutting down udp
2013-02-25 01:16:38 [14035] [0] DEBUG: udp_shutdown: Starting avalanche
2013-02-25 01:16:38 [14035] [6] DEBUG: Thread 6 (gw/bb_udp.c:udp_receiver) terminates.
2013-02-25 01:16:38 [14035] [4] DEBUG: Thread 4 (gw/bb_udp.c:udp_receiver) terminates.
2013-02-25 01:16:38 [14035] [8] DEBUG: wdp_to_wapboxes: destroying lists
2013-02-25 01:16:38 [14035] [8] DEBUG: Thread 8 (gw/bb_boxc.c:wdp_to_wapboxes) terminates.
2013-02-25 01:16:39 [14035] [9] DEBUG: Thread 9 (gw/bb_boxc.c:wapboxc_run) terminates.
2013-02-25 01:16:39 [14035] [10] DEBUG: udp_die: removing producers from udp-lists
2013-02-25 01:16:39 [14035] [0] INFO: All flow threads have died, killing core
2013-02-25 01:16:39 [14035] [10] DEBUG: Thread 10 (gw/bearerbox.c:wdp_router) terminates.
2013-02-25 01:16:39 [14035] [7] DEBUG: Thread 7 (gw/bb_udp.c:udp_sender) terminates.
2013-02-25 01:16:39 [14035] [5] DEBUG: Thread 5 (gw/bb_udp.c:udp_sender) terminates.
2013-02-25 01:16:39 [14035] [0] DEBUG: Waiting for 2 (gwlib/http.c:server_thread) to terminate
2013-02-25 01:16:39 [14035] [3] DEBUG: HTTP: No clients with requests, quitting.
2013-02-25 01:16:39 [14035] [3] DEBUG: Thread 3 (gw/bb_http.c:httpadmin_run) terminates.
2013-02-25 01:16:39 [14035] [2] DEBUG: Thread 2 (gwlib/http.c:server_thread) terminates.
2013-02-25 01:16:39 [14035] [1] DEBUG: Thread 1 (gwlib/fdset.c:poller) terminates.
2013-02-25 01:16:39 [14035] [0] INFO: Total WDP messages: received 0, sent 0
2013-02-25 01:16:39 [14035] [0] INFO: Total SMS messages: received 0, sent 0
2013-02-25 01:16:39 [14035] [0] DEBUG: Immutable octet strings: 77.
2013-02-25 02:16:14 [15173] [0] INFO: Added logfile `/var/log/kannel/bearerbox.log' with level `0'.
2013-02-25 02:16:14 [15173] [0] INFO: HTTP: Opening server at port 13000.
2013-02-25 02:16:14 [15173] [0] DEBUG: Started thread 1 (gwlib/fdset.c:poller)
2013-02-25 02:16:14 [15173] [0] DEBUG: Started thread 2 (gwlib/http.c:server_thread)
2013-02-25 02:16:14 [15173] [0] DEBUG: Started thread 3 (gw/bb_http.c:httpadmin_run)
2013-02-25 02:16:14 [15173] [2] DEBUG: Thread 2 (gwlib/http.c:server_thread) maps to pid 15173.
2013-02-25 02:16:14 [15173] [3] DEBUG: Thread 3 (gw/bb_http.c:httpadmin_run) maps to pid 15173.
2013-02-25 02:16:14 [15173] [1] DEBUG: Thread 1 (gwlib/fdset.c:poller) maps to pid 15173.
2013-02-25 02:16:14 [15173] [0] DEBUG: starting UDP sender/receiver module
2013-02-25 02:16:14 [15173] [0] INFO: Adding interface *
2013-02-25 02:16:14 [15173] [0] DEBUG: udpc_create: Bound to UDP <0.0.0.0:9200>
2013-02-25 02:16:14 [15173] [0] DEBUG: Started thread 4 (gw/bb_udp.c:udp_receiver)
2013-02-25 02:16:14 [15173] [0] DEBUG: Started thread 5 (gw/bb_udp.c:udp_sender)
2013-02-25 02:16:14 [15173] [4] DEBUG: Thread 4 (gw/bb_udp.c:udp_receiver) maps to pid 15173.
2013-02-25 02:16:14 [15173] [0] DEBUG: udpc_create: Bound to UDP <0.0.0.0:9201>
2013-02-25 02:16:14 [15173] [0] DEBUG: Started thread 6 (gw/bb_udp.c:udp_receiver)
2013-02-25 02:16:14 [15173] [5] DEBUG: Thread 5 (gw/bb_udp.c:udp_sender) maps to pid 15173.
2013-02-25 02:16:14 [15173] [0] DEBUG: Started thread 7 (gw/bb_udp.c:udp_sender)
2013-02-25 02:16:14 [15173] [6] DEBUG: Thread 6 (gw/bb_udp.c:udp_receiver) maps to pid 15173.
2013-02-25 02:16:14 [15173] [0] DEBUG: starting wapbox connection module
2013-02-25 02:16:14 [15173] [7] DEBUG: Thread 7 (gw/bb_udp.c:udp_sender) maps to pid 15173.
2013-02-25 02:16:14 [15173] [0] DEBUG: Started thread 8 (gw/bb_boxc.c:wdp_to_wapboxes)
2013-02-25 02:16:14 [15173] [0] DEBUG: Started thread 9 (gw/bb_boxc.c:wapboxc_run)
2013-02-25 02:16:14 [15173] [0] DEBUG: starting WDP router
2013-02-25 02:16:14 [15173] [0] DEBUG: Started thread 10 (gw/bearerbox.c:wdp_router)
2013-02-25 02:16:14 [15173] [0] INFO: ----------------------------------------
2013-02-25 02:16:14 [15173] [0] INFO: Kannel bearerbox II version 1.4.3 starting
2013-02-25 02:16:14 [15173] [9] DEBUG: Thread 9 (gw/bb_boxc.c:wapboxc_run) maps to pid 15173.
2013-02-25 02:16:14 [15173] [10] DEBUG: Thread 10 (gw/bearerbox.c:wdp_router) maps to pid 15173.
2013-02-25 02:16:14 [15173] [8] DEBUG: Thread 8 (gw/bb_boxc.c:wdp_to_wapboxes) maps to pid 15173.
2013-02-25 02:16:14 [15173] [0] INFO: MAIN: Start-up done, entering mainloop
2013-02-25 02:18:07 [15173] [0] WARNING: Killing signal or HTTP admin command received, shutting down...
2013-02-25 02:18:07 [15173] [0] DEBUG: Shutting down Kannel...
2013-02-25 02:18:07 [15173] [0] DEBUG: shutting down smsc
2013-02-25 02:18:07 [15173] [0] DEBUG: shutting down udp
2013-02-25 02:18:07 [15173] [0] DEBUG: udp_shutdown: Starting avalanche
2013-02-25 02:18:07 [15173] [6] DEBUG: Thread 6 (gw/bb_udp.c:udp_receiver) terminates.
2013-02-25 02:18:07 [15173] [4] DEBUG: Thread 4 (gw/bb_udp.c:udp_receiver) terminates.
2013-02-25 02:18:07 [15173] [8] DEBUG: wdp_to_wapboxes: destroying lists
2013-02-25 02:18:07 [15173] [8] DEBUG: Thread 8 (gw/bb_boxc.c:wdp_to_wapboxes) terminates.
2013-02-25 02:18:07 [15173] [9] DEBUG: Thread 9 (gw/bb_boxc.c:wapboxc_run) terminates.
2013-02-25 02:18:07 [15173] [10] DEBUG: udp_die: removing producers from udp-lists
2013-02-25 02:18:07 [15173] [10] DEBUG: Thread 10 (gw/bearerbox.c:wdp_router) terminates.
2013-02-25 02:18:07 [15173] [5] DEBUG: Thread 5 (gw/bb_udp.c:udp_sender) terminates.
2013-02-25 02:18:07 [15173] [7] DEBUG: Thread 7 (gw/bb_udp.c:udp_sender) terminates.
2013-02-25 02:18:07 [15173] [0] INFO: All flow threads have died, killing core
2013-02-25 02:18:07 [15173] [0] DEBUG: Waiting for 2 (gwlib/http.c:server_thread) to terminate
2013-02-25 02:18:07 [15173] [3] DEBUG: HTTP: No clients with requests, quitting.
2013-02-25 02:18:07 [15173] [3] DEBUG: Thread 3 (gw/bb_http.c:httpadmin_run) terminates.
2013-02-25 02:18:07 [15173] [0] PANIC: Cannot die by its own will
2013-02-25 02:18:07 [15173] [2] DEBUG: Thread 2 (gwlib/http.c:server_thread) terminates.
2013-02-25 02:18:07 [15173] [0] PANIC: bearerbox(gw_panic+0xcd) [0x80d21ed]
2013-02-25 02:18:07 [15173] [0] PANIC: bearerbox() [0x80548f0]
2013-02-25 02:18:07 [15173] [0] PANIC: [0x277400]
2013-02-25 02:18:07 [15173] [0] PANIC: bearerbox(http_close_all_ports+0x2e) [0x80cb81e]
2013-02-25 02:18:07 [15173] [0] PANIC: bearerbox(httpadmin_stop+0xb) [0x805a05b]
2013-02-25 02:18:07 [15173] [0] PANIC: bearerbox(main+0x9fc) [0x805568c]
2013-02-25 02:18:07 [15173] [0] PANIC: /lib/tls/i686/cmov/libc.so.6(__libc_start_main+0xe6) [0xdc8bd6]
2013-02-25 02:18:07 [15173] [0] PANIC: bearerbox() [0x8053f51]
2013-02-25 02:24:59 [15280] [0] INFO: Added logfile `/var/log/kannel/bearerbox.log' with level `0'.
2013-02-25 02:24:59 [15280] [0] INFO: HTTP: Opening server at port 13000.
2013-02-25 02:24:59 [15280] [0] DEBUG: Started thread 1 (gwlib/fdset.c:poller)
2013-02-25 02:24:59 [15280] [1] DEBUG: Thread 1 (gwlib/fdset.c:poller) maps to pid 15280.
2013-02-25 02:24:59 [15280] [0] DEBUG: Started thread 2 (gwlib/http.c:server_thread)
2013-02-25 02:24:59 [15280] [0] DEBUG: Started thread 3 (gw/bb_http.c:httpadmin_run)
2013-02-25 02:24:59 [15280] [2] DEBUG: Thread 2 (gwlib/http.c:server_thread) maps to pid 15280.
2013-02-25 02:24:59 [15280] [0] DEBUG: starting smsbox connection module
2013-02-25 02:24:59 [15280] [3] DEBUG: Thread 3 (gw/bb_http.c:httpadmin_run) maps to pid 15280.
2013-02-25 02:24:59 [15280] [0] INFO: BOXC: 'smsbox-max-pending' not set, using default (100).
2013-02-25 02:24:59 [15280] [0] DEBUG: Started thread 4 (gw/bb_boxc.c:sms_to_smsboxes)
2013-02-25 02:24:59 [15280] [4] DEBUG: Thread 4 (gw/bb_boxc.c:sms_to_smsboxes) maps to pid 15280.
2013-02-25 02:24:59 [15280] [0] DEBUG: Started thread 5 (gw/bb_boxc.c:smsboxc_run)
2013-02-25 02:24:59 [15280] [5] DEBUG: Thread 5 (gw/bb_boxc.c:smsboxc_run) maps to pid 15280.
2013-02-25 02:24:59 [15280] [0] INFO: Set SMS resend frequency to 60 seconds.
2013-02-25 02:24:59 [15280] [0] INFO: SMS resend retry set to unlimited.
2013-02-25 02:24:59 [15280] [0] DEBUG: smsbox MO concatenated message handling enabled
2013-02-25 02:24:59 [15280] [0] INFO: DLR rerouting for smsc id <(null)> disabled.
2013-02-25 02:24:59 [15280] [0] INFO: AT2[/dev/ttyACM0 # change this to match your port, it could ACM1 , if you dont set it correctly,  it will not work and you will get error in logs that unable to connect to device)]: configuration shows modemtype <teltonika>
2013-02-25 02:24:59 [15280] [0] DEBUG: AT2[/dev/ttyACM0 # change this to match your port, it could ACM1 , if you dont set it correctly,  it will not work and you will get error in logs that unable to connect to device)]: Reading modem definitions from </etc/kannel/kannel.conf>
2013-02-25 02:24:59 [15280] [0] DEBUG: AT2[/dev/ttyACM0 # change this to match your port, it could ACM1 , if you dont set it correctly,  it will not work and you will get error in logs that unable to connect to device)]: Found <1> modems in config
2013-02-25 02:24:59 [15280] [0] INFO: AT2[/dev/ttyACM0 # change this to match your port, it could ACM1 , if you dont set it correctly,  it will not work and you will get error in logs that unable to connect to device)]: read modem definition for <Teltonika E12>
2013-02-25 02:24:59 [15280] [0] DEBUG: Started thread 6 (gw/smsc/smsc_at.c:at2_device_thread)
2013-02-25 02:24:59 [15280] [0] DEBUG: Started thread 7 (gw/bb_smscconn.c:sms_router)
2013-02-25 02:24:59 [15280] [0] INFO: ----------------------------------------
2013-02-25 02:24:59 [15280] [0] INFO: Kannel bearerbox II version 1.4.3 starting
2013-02-25 02:24:59 [15280] [0] INFO: MAIN: Start-up done, entering mainloop
2013-02-25 02:24:59 [15280] [0] DEBUG: AT2[/dev/ttyACM0 # change this to match your port, it could ACM1 , if you dont set it correctly,  it will not work and you will get error in logs that unable to connect to device)]: start called
2013-02-25 02:24:59 [15280] [7] DEBUG: Thread 7 (gw/bb_smscconn.c:sms_router) maps to pid 15280.
2013-02-25 02:24:59 [15280] [6] DEBUG: Thread 6 (gw/smsc/smsc_at.c:at2_device_thread) maps to pid 15280.
2013-02-25 02:24:59 [15280] [6] INFO: AT2[/dev/ttyACM0 # change this to match your port, it could ACM1 , if you dont set it correctly,  it will not work and you will get error in logs that unable to connect to device)]: opening device
2013-02-25 02:24:59 [15280] [6] ERROR: AT2[/dev/ttyACM0 # change this to match your port, it could ACM1 , if you dont set it correctly,  it will not work and you will get error in logs that unable to connect to device)]: open failed! ERRNO=2
2013-02-25 02:24:59 [15280] [6] ERROR: System error 2: No such file or directory
2013-02-25 02:24:59 [15280] [6] ERROR: AT2[/dev/ttyACM0 # change this to match your port, it could ACM1 , if you dont set it correctly,  it will not work and you will get error in logs that unable to connect to device)]: at2_device_thread: open_at2_device failed.
2013-02-25 02:24:59 [15280] [6] ERROR: System error 2: No such file or directory
2013-02-25 02:24:59 [15280] [6] ERROR: AT2[/dev/ttyACM0 # change this to match your port, it could ACM1 , if you dont set it correctly,  it will not work and you will get error in logs that unable to connect to device)]: Couldn't connect (retrying in 10 seconds).
2013-02-25 02:24:59 [15280] [6] INFO: AT2[/dev/ttyACM0 # change this to match your port, it could ACM1 , if you dont set it correctly,  it will not work and you will get error in logs that unable to connect to device)]: opening device
................................
.................................. 
```

# c# - 不返回值

> ID：15065639
> 
> 赞同：1
> 
> 时间：2013-02-25T11:11:56.840
> 
> 标签：c#, datatable

实际上我的代码显示错误“并非所有代码路径都返回值”

```
public DataTable Do_Insert_Update_Delete(string Proc_name, params object[] arg)
{
    if (Proc_name == "Vehicle_Booked_Info")
    {
        SqlCommand com = new SqlCommand("Vehicle_Booked_Info", con);
        com.CommandType = CommandType.StoredProcedure;
        com.Parameters.Add(" @Today_Date", SqlDbType.DateTime).Value = Convert.ToDateTime(arg[0].ToString());
        SqlDataAdapter sda = new SqlDataAdapter(com);
        DataTable dt = new DataTable();
        sda.Fill(dt);
        return dt;
    }
} 
```

即使我放在这里`return dt`

如果我在 if 子句中使用它，则会显示错误

> dt 在当前上下文中不存在

如何克服这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:12:40.197

您在**语句****内部返回`if`**，编译器无法确定是否满足条件。您需要在块之外或在 else 块中返回一些东西`if`，因为您的方法应该返回一个 type 的对象`DataTable`，现在如果`Proc_name`不是`"Vehicle_Booked_Info"`，您的方法将不会返回任何东西。所以改变你的方法，比如：

```
public DataTable Do_Insert_Update_Delete(string Proc_name, params object[] arg)
{
    if (Proc_name == "Vehicle_Booked_Info")
    {
        SqlCommand com = new SqlCommand("Vehicle_Booked_Info", con);
        com.CommandType = CommandType.StoredProcedure;
        com.Parameters.Add(" @Today_Date", SqlDbType.DateTime).Value = Convert.ToDateTime(arg[0].ToString());
        SqlDataAdapter sda = new SqlDataAdapter(com);
        DataTable dt = new DataTable();
        sda.Fill(dt);
        return dt;
    }
  else
    { 
     return null; //Or some default value.
    }       
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:25:20.417

```
public DataTable Do_Insert_Update_Delete(string Proc_name, params object[] arg)
{
    DataTable dt = new DataTable();
    if (Proc_name == "Vehicle_Booked_Info")
    {
        SqlCommand com = new SqlCommand("Vehicle_Booked_Info", con);
        com.CommandType = CommandType.StoredProcedure;
        com.Parameters.Add(" @Today_Date", SqlDbType.DateTime).Value =       Convert.ToDateTime(arg[0].ToString());
        SqlDataAdapter sda = new SqlDataAdapter(com);
        sda.Fill(dt);
    }       
        return dt;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:13:45.183

`return null;`在方法结束之前添加：

```
 }       
    return null;
} 
```

`else`短语在这里是不必要的。

`if`编译器显示错误，因为在不满足语句条件时该方法不返回值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T11:13:49.873

这是一个糟糕的代码实践..

将其更改为以下

```
public DataTable Do_Insert_Update_Delete(string Proc_name, params object[] arg)
{
    if (Proc_name == "Vehicle_Booked_Info")
    {
        SqlCommand com = new SqlCommand("Vehicle_Booked_Info", con);
        com.CommandType = CommandType.StoredProcedure;
        com.Parameters.Add(" @Today_Date", SqlDbType.DateTime).Value = Convert.ToDateTime(arg[0].ToString());
        SqlDataAdapter sda = new SqlDataAdapter(com);
        DataTable dt = new DataTable();
        sda.Fill(dt);
        return dt;

    }       

    return new DataTable();// or return null

} 
```

# javascript - 如何摆脱递归函数？

> ID：15065640
> 
> 赞同：4
> 
> 时间：2013-02-25T11:12:04.740
> 
> 标签：javascript

我编写了这个函数来查找表中的特定元素：

```
function LoopThroughChildElements(parantEle,flag) {
    for (var i = 0; i < parantEle.childNodes.length; i++) {
        if (parantEle.childNodes[i].childNodes.length > 0) {
             LoopThroughChildElements(parantEle.childNodes[i]);
        }
        else {
            if (parantEle.childNodes[i].id.indexOf("chkSelect") > 0) {
                 alert("Found");  
                 return parantEle.childNodes[i];
            }
        }
    }
    return null;
} 
```

执行此操作时：

```
 var checkBox = LoopThroughChildElements(col);
 alert(checkBox); 
```

我收到警报`"Found"`，但结果始终为空..

为什么会这样？当我得到结果时如何打破递归循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:14:38.453

您`return`只在递归调用中将元素返回上一级 - 您需要确保它一直返回到顶部。

因此，您需要更换您的线路

```
LoopThroughChildElements(parantEle.childNodes[i]); 
```

（目前正在丢弃返回的元素）类似于

```
var rtn = LoopThroughChildElements(parantEle.childNodes[i]);
if (rtn != null)
    return rtn; 
```

# c# - 在实体之间建立适当的关系

> ID：15065642
> 
> 赞同：1
> 
> 时间：2013-02-25T11:12:05.640
> 
> 标签：c#, nhibernate, domain-driven-design

用户配置文件在系统上具有配置文件属性。该属性可以是不同的类型（AboutYou、Occupation、AnyhingElse）。

现在我想建立适当的关系：

1.  配置文件和配置文件属性
2.  配置文件属性和配置文件属性类型（我不想使用枚举作为数据类型）

配置文件.cs

```
public List<ProfileAttribute> Attributes {get; set;} 
```

配置文件属性.cs

```
// holds user entered response on particular subject
// describe yourself (if aboutYou type is selected)
public string Response {get; set;}
public ProfileAttributeType {get; set;} 
```

ProfileAttributeType.cs

```
public List<ProfileAttribute> Attributes {get; set;}
public string AttributeType {get; set;} 
```

这是遗留代码和数据库，我正在尝试使用 ddd 方法构建应用程序并生成数据库表，所以我坚持以下。

一`Profile`有多`ProfileAttribute`。所以我有`one to many`通过个人资料方面。

我无法通过`ProfileAttribute`侧面计算关系。所有配置文件属性都属于一个配置文件还是属于`many to many`？这个 Response 属性让我感到困惑。你会怎么做？

此外，对于 ProfileAttribute 和 ProfileAttributeType 我有以下

一个`ProfileAttribute`有很多`AttributeType`通过`ProfileAttribute`边，通过`ProfileAttribute`边我有`many to one`（许多类型可以属于许多 ProfileAttributes）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T22:43:48.033

`ProfileAttributeType`首先，它本身包含一个集合似乎很奇怪`ProfileAttribute`。也许它会有一组专用类型的属性？

就 和 之间的关系而言`Profile`，`ProfileAttribute`属性应该是与配置文件**聚合**关联的**值对象**。这意味着关系是一对多的。换句话说，一个配置文件可以包含许多属性，但是一个属性属于单个配置文件。属性本身可以按属性类型分组。如果存在与属性类型相关联的行为，则属性类型本身可以是**实体**或**集合。**

# excel - 将 Excel 值转换为单词（英文）

> ID：15065644
> 
> 赞同：1
> 
> 时间：2013-02-25T11:12:08.863
> 
> 标签：excel, excel-2007, excel-formula, excel-2010

我发现这个公式可以将金额转换为单词，但它不能 100% 起作用。每当金额以 20,30, 40 等结尾时，都会出现错误。例如 1020 会出错，但 1019 和 1021 可以正常工作。我试图自己解决这个问题，但没有运气。它必须是公式（与之交互的软件（Google Docs）无法处理 VBA 脚本。

这是公式：

```
=IF(H53<10^12,
    IF(INT(H53/10^9)>0,
        IF(INT(H53/10^11)>0,
            INDEX(
                {"One ","Two ","Three","Four ","Five ","Six ","Seven ","Eight ","Nine "},
                MATCH(INT(H53/10^11),{1,2,3,4,5,6,7,8,9})
            )&"Hundred ",
        "")&
        IF(MOD(INT(H53/10^9),100)<20,
            INDEX(
                {"","One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine ","Ten ",
                "Eleven ","Twelve","Thirteen","Fourteen ","Fifteen","Sixteen","Seventeen","Eighteen ","Nineteen"},
                MATCH(MOD(INT(H53/10^9),100),{0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19})
            ),
            INDEX(
                {"","Twenty ","Thirty ","Fourty ","Fifty ","Sixty ","Seventy ","Eighty ","Ninety "}, 
                MATCH(INT(MOD(INT(H53/10^9),100)/10),{1,2,3,4,5,6,7,8,9})
            )&
            INDEX(
                {"One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine "}, 
                MATCH(MOD(INT(H53/10^9),10),{1,2,3,4,5,6,7,8,9})
            )
        )&" Billion  ",
        ""
    )&
    IF(MOD(INT(H53/10^6),10^3)>0,
        IF(INT(MOD(INT(H53/10^6),10^3)/100)>0,
            INDEX(
                {"One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine "},
                MATCH(INT(MOD(INT(H53/10^6),10^3)/100),{1,2,3,4,5,6,7,8,9})
            )&"Hundred ",
        "")&
        IF(MOD(INT(H53/10^6),100)<20,
            INDEX(
                {"","One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine ","Ten ",
                "Eleven ","Twelve","Thirteen","Fourteen ","Fifteen ","Sixteen","Seventeen","Eighteen ","Nineteen"},
                MATCH(MOD(INT(H53/10^6),100),{0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19})
            ),
            INDEX(
                {"","Twenty ","Thirty ","Fourty ","Fifty ","Sixty ","Seventy ","Eighty ","Ninety "},
                MATCH(INT(MOD(INT(H53/10^6),100)/10),{1,2,3,4,5,6,7,8,9})
            )&
            INDEX(
                {"One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine "}, 
                MATCH(MOD(INT(H53/10^6),10),{1,2,3,4,5,6,7,8,9})
            )
        )&" Million  ",
        ""
    )&
    IF(MOD(INT(H53/10^3),10^3)>0,
        IF(INT(MOD(INT(H53/10^3),10^3)/100)>0,
            INDEX(
                {"One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine "},
                MATCH(INT(MOD(INT(H53/10^3),10^3)/100),{1,2,3,4,5,6,7,8,9})
            )&"Hundred ",
        "")&
        IF(MOD(INT(H53/10^3),100)<20,
            INDEX(
                {"","One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine ","Ten ",
                "Eleven ","Twelve","Thirteen","Fourteen ","Fifteen ","Sixteen","Seventeen","Eighteen ","Nineteen"},
                MATCH(MOD(INT(H53/10^3),100),{0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19})
            ),
            INDEX(
                {"","Twenty ","Thirty ","Fourty ","Fifty ","Sixty ","Seventy ","Eighty ","Ninety "},
                MATCH(INT(MOD(INT(H53/10^3),100)/10),{1,2,3,4,5,6,7,8,9})
            )&
            INDEX(
                {"One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine "},
                MATCH(MOD(INT(H53/10^3),10),{1,2,3,4,5,6,7,8,9})
            )
        )&" Thousand  ",
        ""
    )&
    IF(MOD(MOD(H53,10^4),10^3)>0,
        IF(INT(MOD(MOD(H53,10^4),10^3)/100)>0,
            INDEX(
                {"One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine "},
                MATCH(INT(MOD(MOD(H53,10^4),10^3)/100),{1,2,3,4,5,6,7,8,9})
            )&"Hundred ",
            ""
        )&
        IF(MOD(MOD(MOD(H53,10^4),10^3),100)<20,
            INDEX(
                {"","One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine ","Ten ",
                "Eleven ","Twelve","Thirteen","Fourteen ","Fifteen ","Sixteen","Seventeen","Eighteen ","Nineteen"},
                MATCH(MOD(MOD(MOD(H53,10^4),10^3),100),{0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19})
            ),
            INDEX(
                {"","Twenty ","Thirty ","Fourty ","Fifty ","Sixty ","Seventy ","Eighty ","Ninety "},
                MATCH(INT(MOD(MOD(MOD(H53,10^4),10^3),100)/10),{1,2,3,4,5,6,7,8,9})
            )&
            INDEX(
                {"One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine "},
                MATCH(MOD(MOD(MOD(H53,10^4),10^3),10),{1,2,3,4,5,6,7,8,9})
            )
        ),
        ""
    ),
    ""
) & " Rands" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:17:13.263

问题出在最后一部分：

```
 INDEX({"One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine "},
     MATCH(MOD(MOD(MOD(H53,10^4),10^3),10),{1,2,3,4,5,6,7,8,9}) 
```

`MOD(MOD(MOD(H53,10^4),10^3),10)`会返回`0`，在1-9中找不到。

因此，上述行应修改为：

```
 INDEX({"", "One ","Two ","Three ","Four ","Five ","Six ","Seven ","Eight ","Nine "},
     MATCH(MOD(MOD(MOD(H53,10^4),10^3),10),{0, 1,2,3,4,5,6,7,8,9}) 
```

这个问题也存在于公式的其他领域。

所有在这个完整的公式中都是固定的（它还添加了一些不一致地遗漏的空格）：

```
=IF(B1<10^12,
 IF(INT(B1/10^9)>0,
  IF(INT(B1/10^11)>0,
   INDEX(
    {"One ";"Two ";"Three ";"Four ";"Five ";"Six ";"Seven ";"Eight ";"Nine "},
    MATCH(INT(B1/10^11),{1;2;3;4;5;6;7;8;9})
   )&"Hundred ",
  "")&
  IF(MOD(INT(B1/10^9),100)<20,
   INDEX(
    {"";"One ";"Two ";"Three ";"Four ";"Five ";"Six ";"Seven ";"Eight ";"Nine ";"Ten ";"Eleven ";"Twelve ";"Thirteen ";"Fourteen ";"Fifteen ";"Sixteen ";"Seventeen ";"Eighteen ";"Nineteen "},
    MATCH(MOD(INT(B1/10^9),100),{0;1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19})
   ),
   INDEX(
    {"";"Twenty ";"Thirty ";"Fourty ";"Fifty ";"Sixty ";"Seventy ";"Eighty ";"Ninety "},
    MATCH(INT(MOD(INT(B1/10^9),100)/10),{1;2;3;4;5;6;7;8;9})
   )&
   INDEX(
    {"";"One ";"Two ";"Three ";"Four ";"Five ";"Six ";"Seven ";"Eight ";"Nine "},
    MATCH(MOD(INT(B1/10^9),10),{0;1;2;3;4;5;6;7;8;9})
   )
  )&" Billion  ",
  ""
 )&
 IF(MOD(INT(B1/10^6),10^3)>0,
  IF(INT(MOD(INT(B1/10^6),10^3)/100)>0,
   INDEX(
    {"";"One ";"Two ";"Three ";"Four ";"Five ";"Six ";"Seven ";"Eight ";"Nine "},
    MATCH(INT(MOD(INT(B1/10^6),10^3)/100),{0;1;2;3;4;5;6;7;8;9})
   )&"Hundred ",
  "")&
  IF(MOD(INT(B1/10^6),100)<20,
   INDEX(
   {"";"One ";"Two ";"Three ";"Four ";"Five ";"Six ";"Seven ";"Eight ";"Nine ";"Ten ";"Eleven ";"Twelve ";"Thirteen ";"Fourteen ";"Fifteen ";"Sixteen ";"Seventeen ";"Eighteen ";"Nineteen "},
    MATCH(MOD(INT(B1/10^6),100),{0;1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19})
   ),
   INDEX(
    {"";"Twenty ";"Thirty ";"Fourty ";"Fifty ";"Sixty ";"Seventy ";"Eighty ";"Ninety "},
    MATCH(INT(MOD(INT(B1/10^6),100)/10),{1;2;3;4;5;6;7;8;9})
   )&
   INDEX(
    {"";"One ";"Two ";"Three ";"Four ";"Five ";"Six ";"Seven ";"Eight ";"Nine "},
    MATCH(MOD(INT(B1/10^6),10),{0;1;2;3;4;5;6;7;8;9})
   )
  )&" Million  ",
  ""
 )&
 IF(MOD(INT(B1/10^3),10^3)>0,
  IF(INT(MOD(INT(B1/10^3),10^3)/100)>0,
   INDEX(
    {"";"One ";"Two ";"Three ";"Four ";"Five ";"Six ";"Seven ";"Eight ";"Nine "},
    MATCH(INT(MOD(INT(B1/10^3),10^3)/100),{0;1;2;3;4;5;6;7;8;9})
   )&"Hundred ",
  "")&
  IF(MOD(INT(B1/10^3),100)<20,
   INDEX(
    {"";"One ";"Two ";"Three ";"Four ";"Five ";"Six ";"Seven ";"Eight ";"Nine ";"Ten ";"Eleven ";"Twelve ";"Thirteen ";"Fourteen ";"Fifteen ";"Sixteen ";"Seventeen ";"Eighteen ";"Nineteen "},
    MATCH(MOD(INT(B1/10^3),100),{0;1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19})
   ),
   INDEX(
    {"";"Twenty ";"Thirty ";"Fourty ";"Fifty ";"Sixty ";"Seventy ";"Eighty ";"Ninety "},
    MATCH(INT(MOD(INT(B1/10^3),100)/10),{1;2;3;4;5;6;7;8;9})
   )&
   INDEX(
    {"";"One ";"Two ";"Three ";"Four ";"Five ";"Six ";"Seven ";"Eight ";"Nine "},
    MATCH(MOD(INT(B1/10^3),10),{0;1;2;3;4;5;6;7;8;9})
   )
  )&" Thousand  ",
  ""
 )&
 IF(MOD(MOD(B1,10^4),10^3)>0,
  IF(INT(MOD(MOD(B1,10^4),10^3)/100)>0,
   INDEX(
    {"";"One ";"Two ";"Three ";"Four ";"Five ";"Six ";"Seven ";"Eight ";"Nine "},
    MATCH(INT(MOD(MOD(B1,10^4),10^3)/100),{0;1;2;3;4;5;6;7;8;9})
   )&"Hundred ",
   ""
  )&
  IF(MOD(MOD(MOD(B1,10^4),10^3),100)<20,
   INDEX(
    {"";"One ";"Two ";"Three ";"Four ";"Five ";"Six ";"Seven ";"Eight ";"Nine ";"Ten ";"Eleven ";"Twelve ";"Thirteen ";"Fourteen ";"Fifteen ";"Sixteen ";"Seventeen ";"Eighteen ";"Nineteen "},
    MATCH(MOD(MOD(MOD(B1,10^4),10^3),100),{0;1;2;3;4;5;6;7;8;9;10;11;12;13;14;15;16;17;18;19})
   ),
   INDEX(
    {"";"Twenty ";"Thirty ";"Fourty ";"Fifty ";"Sixty ";"Seventy ";"Eighty ";"Ninety "},
    MATCH(INT(MOD(MOD(MOD(B1,10^4),10^3),100)/10),{1;2;3;4;5;6;7;8;9})
   )&
   INDEX(
    {"";"One ";"Two ";"Three ";"Four ";"Five ";"Six ";"Seven ";"Eight ";"Nine "},
    MATCH(MOD(MOD(MOD(B1,10^4),10^3),10),{0;1;2;3;4;5;6;7;8;9})
   )
  ),
  ""
 ),
 ""
) & " Rands" 
```

# javascript - 如何在 Ooyala V3 中启用 Facebook、共享和嵌入选项

> ID：15065648
> 
> 赞同：0
> 
> 时间：2013-02-25T11:12:14.533
> 
> 标签：javascript, ooyala

我正在使用来自 ooyala.com 网站的视频。我使用他们的 javascript api v3。他们没有提到如何通过 javascript api v3 启用 facebook 或嵌入选项。

所以请帮助我，在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T09:18:49.793

转到 backlot 中的 Publish 选项卡并检查共享选项。

对于 flash ，您可以在播放器中看到这些按钮。（仅闪光或闪光优先）

对于 html5 ，您无法在播放器中看到这些按钮。（仅 html5 或 html5 优先级）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:21:46.520

这是用于 Flash 还是 HTML5？对于 Flash，您可以通过 Backlot 启用此功能。共享选项不是我们默认的 html5 皮肤的一部分。

# objective-c - 比较 UIView

> ID：15065649
> 
> 赞同：1
> 
> 时间：2013-02-25T11:12:15.427
> 
> 标签：objective-c, uiview, compare

我有以下（简化的）代码：

```
- (void)doSomethingWithView:(UIView *)theView{

    if ([theView isEqual:myFirstView]) {
        //do something;
    }else{
        //do something else;
         }
} 
```

我希望，根据我发送给此方法的视图，“myFirstView”或“mySecondView”，我会得到不同的结果。但是，条件总是为 FALSE。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:45:12.673

您还可以通过为两个 uiview 获取标签值来进行比较，如下所示，

```
myfirstview.tag = 1;
mysecondview.tag = 2; 
```

现在通过传递您的 UIView 即 myfirstview 或 mysecondview 来调用您的方法，并定义您的方法，如下所示：

```
- (void)doSomethingWithView:(UIView *)theView{

   if (theView.tag == 1 ) {
    //do something for myfirstview
   }
  else{
    //do something else for mysecondview
     }
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:20:02.027

正如 Hemang 回答的那样..您应该使用 isKindOfClass 或 isMemberOfClass 进行检查。如果您使用 isEqual 比较它，它将比较对象地址。

# solr - Apache solr 未对 solr 结果进行排序

> ID：15065656
> 
> 赞同：0
> 
> 时间：2013-02-25T11:12:43.893
> 
> 标签：solr

我在 solr 中排序有问题。我想根据“indexed”属性设置为“true”且不是多值的字段对 solr 结果进行排序。我正在使用“addSortField”方法设置排序参数。我仍然看不到未排序的 solr 结果。你能指导我解决这个问题需要做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T00:42:08.210

您正在排序的字段可能已被分析（标记化）。这通常使字符串的排序顺序非常奇怪。我经常有一个没有分析的字符串类型字段（只是小写过滤），仅用于排序，使用 copyfield 指令从源字段中填充它。

# javascript - 布局和部分页面中的 SignalR

> ID：15065657
> 
> 赞同：0
> 
> 时间：2013-02-25T11:12:45.283
> 
> 标签：javascript, asp.net-mvc, signalr

我想在布局和部分页面中使用 SignalR 集线器。[这里](http://forums.asp.net/p/1884408/5309678.aspx/1?using%20connection%20hub%20start%20done%20at%20multiple%20places%20in%20application)描述使用`hub.start`和`done`功能。

所以我的 html 页面中有两个脚本块，我想在其中使用 SignalR：

```
<script>
    $(document).ready(function () {
        window.hubReady = $.connection.hub.start();
        window.hubReady.done(function () {
            ...
        });
</script>

<script>
    $(document).ready(function(e) {
        window.hubReady.done(function() {
            ...
        });
    });
</script> 
```

在第二个脚本块中，它说`windows.hubReady.done`由于未定义而无法执行。

编辑：块 2 在块 1 之前执行。但是为什么呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:23:48.360

我的猜测是第二个回调在第一个回调之前执行，如果是这种情况，那么 window.hubReady 为空，因为它是初始化 window.hubReady 的第一个回调。

我建议您不要创建对集线器的全局引用，而是直接引用它，即：

```
<script>
    $(document).ready(function(e) {
        $.connection.hub.connected(function() {
            ...
        });
    });
</script> 
```

（如果这不起作用，那么我怀疑您的名为“hub”的集线器未在服务器上定义，但这是一个不同的问题）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:27:40.287

我通过不调用`$(document).ready(function(e)`但 `$(window).load(function()`在我的部分 html 中解决了这个问题。 `$(window).load(function()`然后被称为第二个。

# java - 容器正在修改的 JDBC 资源名称（“_pm”被附加到它）

> ID：15065661
> 
> 赞同：4
> 
> 时间：2013-02-25T11:12:53.363
> 
> 标签：java, jdbc, cloudbees

我正在尝试将一个非常简单的 Web 应用程序部署到 CloudBees 上的 JavaEE Web Profile 堆栈。我创建了一个将被使用的数据库。

我已经创建了我的 WAR 文件，并将其部署到 Glassfish3 配置文件中，但它出错了。我也尝试过 JBoss ，但也失败了，但出现了不同的错误。我已经使用 SDK 将数据库绑定到应用程序（而不是 CloudBees XML 文件（因为这听起来像是不推荐使用的）。但无论应用程序仍然无法部署（即使在重新启动后）并出现此错误：

```
[#|2013-02-25T11:03:57.584+0000|SEVERE|glassfish3.1.2|javax.enterprise.system.tools.admin.org.glassfish.deployment.admin|_ThreadID=12;_ThreadName=AutoDeployer;|Exception while preparing the app : Invalid resource : jdbc/resmandb__pm
com.sun.appserv.connectors.internal.api.ConnectorRuntimeException: Invalid resource : jdbc/resmandb__pm
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl$MyDataSource.validateResource(ConnectorResourceAdminServiceImpl.java:274)
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl$MyDataSource.setResourceInfo(ConnectorResourceAdminServiceImpl.java:255)
    at com.sun.enterprise.connectors.service.ConnectorResourceAdminServiceImpl.lookupDataSourceInDAS(ConnectorResourceAdminServiceImpl.java:245)
    at com.sun.enterprise.connectors.ConnectorRuntime.lookupDataSourceInDAS(ConnectorRuntime.java:538)
    at com.sun.enterprise.connectors.ConnectorRuntime.lookupPMResource(ConnectorRuntime.java:469)
    at org.glassfish.persistence.common.PersistenceHelper.lookupPMResource(PersistenceHelper.java:63)
    at org.glassfish.persistence.jpa.ProviderContainerContractInfoBase.lookupDataSource(ProviderContainerContractInfoBase.java:71)
    at org.glassfish.persistence.jpa.PersistenceUnitInfoImpl.<init>(PersistenceUnitInfoImpl.java:108)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.loadPU(PersistenceUnitLoader.java:155)
    at org.glassfish.persistence.jpa.PersistenceUnitLoader.<init>(PersistenceUnitLoader.java:120)
    at org.glassfish.persistence.jpa.JPADeployer$1.visitPUD(JPADeployer.java:224)
    at org.glassfish.persistence.jpa.JPADeployer$PersistenceUnitDescriptorIterator.iteratePUDs(JPADeployer.java:495)
    at org.glassfish.persistence.jpa.JPADeployer.createEMFs(JPADeployer.java:233)
    at org.glassfish.persistence.jpa.JPADeployer.prepare(JPADeployer.java:168)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.prepareModule(ApplicationLifecycle.java:871)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:410)
    at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
    at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:353)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
    at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
    at org.glassfish.deployment.autodeploy.AutoOperation.run(AutoOperation.java:145)
    at org.glassfish.deployment.autodeploy.AutoDeployer.deploy(AutoDeployer.java:575)
    at org.glassfish.deployment.autodeploy.AutoDeployer.deployAll(AutoDeployer.java:461)
    at org.glassfish.deployment.autodeploy.AutoDeployer.run(AutoDeployer.java:389)
    at org.glassfish.deployment.autodeploy.AutoDeployer.run(AutoDeployer.java:380)
    at org.glassfish.deployment.autodeploy.AutoDeployService$1.run(AutoDeployService.java:220)
    at java.util.TimerThread.mainLoop(Timer.java:512)
    at java.util.TimerThread.run(Timer.java:462)
|#] 
```

我不明白的是，它为什么要寻找资源`jdbc/resmandb__pm`。它采用我绑定的任何名称（在本例中为`resman`）并添加 a `_pm`。

我究竟做错了什么？这个应用程序没有太多内容，它在 Glassfish 3 服务器中运行。

编辑：我一直在一个独立的 glassfish 环境中玩一些游戏。而且，当我在 glassfish-web.xml 中没有 jdbc 资源条目时，看起来 JPA 提供程序（在本例中为 EclipseLink）正在寻找两个 jdbc 资源：jdbc/_ *pm 和 jdbc/* _nontx， web.xml 中声明的资源名称在哪里。

所以，我还没有尝试过，但看起来我需要在 bees-web.xml 中定义它，CloudBees 自己的文档试图让人们不要使用它。不幸的是，资源绑定在 GlassFish 3 环境中效果不佳。这就是我到目前为止所发现的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T06:11:02.583

当您将资源绑定到应用程序时，您必须使用 --alias 参数来配置它将在应用程序中使用的逻辑名称。对于数据源，如果您在 wen.xml 中有一个资源引用，则为：

```
 <resource-ref>
        <res-ref-name>jdbc/myDB</res-ref-name>
        <res-type>javax.sql.DataSource</res-type>
        <res-auth>Container</res-auth>
    </resource-ref> 
```

然后将数据源绑定为：

```
bees app:bind --database  myDatabase --alias myDB 
```

# prolog - Prolog中的感叹号

> ID：15065663
> 
> 赞同：20
> 
> 时间：2013-02-25T11:13:01.047
> 
> 标签：prolog

鉴于以下事实和谓词：

```
sound(time1).
sound(time2).
sun(time3).
relax(X):-sound(X),!,sun(X).
relax(_):-sun(_). 
```

执行时`relax(S).`，我希望得到`S=time1`由于`!`，即（如果我错了，请纠正我），如果满足 'X' ，则停止回溯。

这是跟踪：

```
3 ?- trace.
true.

[trace] 3 ?- relax(S).
   Call: (6) relax(_G1831) ? creep
   Call: (7) sound(_G1831) ? creep
   Exit: (7) sound(time1) ? creep
   Call: (7) sun(time1) ? creep
   Fail: (7) sun(time1) ? creep
   Fail: (6) relax(_G1831) ? creep
false. 
```

那么为什么 Prolog 还要检查`sun(time1)`，即使它在满足后遇到了感叹号`sound(X)`（因为`sound(time1)`是事实）。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2016-04-03T16:35:52.053

为了进一步澄清这一点，如果有人仍然对感叹号运算符的工作方式感到困惑（*就像我所做*的那样），这里有一个例子：

```
sound(time3).
sound(time1).
sun(time1).
relax(X):-sound(X),!,sun(X). 
```

对于这个特定示例，如果您向 Prolog 询问`?-relax(S).`此结果为**false**。我们可以这样描述 Prolog 的工作方式：

1.  Prolog 搜索询问的谓词（在我们的示例中*，relax(SOMEVARIABLE unifiable with S)*）。
2.  Prolog 找到谓词relax(X)。变量 X 和 S 现在已绑定。
3.  Prolog 开始评估子句：
    *   **声音(X)**
        *   Prolog 在文件中搜索满足 sound(X) 的事实。
        *   它发现事实**声音（time3）。**并将其与我们的变量 X=S=time3 统一起来。
    *   **！**
        *   Prolog 继续到下一个子句，即 operator ！所以他不会回溯到这个运营商的背后。
    *   **太阳(X)**
        *   Prolog 在文件中搜索满足 sun(X) 的事实。X 已经绑定，因此它会搜索不存在的**sun(time3) 。**
4.  **结论**
    *   在这一点上，如果没有！运算符 Prolog 将返回 ( *backtrack* ) 到 sound(X) 并将变量 X=S 重新分配为 X=S=time1。由于事实*sun(time1)*存在，这最终会导致**true 。**
    **   Prolog 返回 false，因为他无法匹配任何规则的relax(S)。*

 *反对，就像我在 4\. 中所说的那样没有！操作它导致**成功**。

```
sound(time3).
sound(time1).
sun(time1).
relax(X):-sound(X),sun(X). 
```

如果我在某些时候错了，请随时纠正我。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-25T11:23:31.713

该`!`标志防止将其右侧的子句回溯到左侧，它就像一个单向门，因此它不会回溯到切口之外。

当`sound(time1)`为真时，`sun(time1)`将评估下一个子句，只有这样 prolog 才会发现`sun(time1)`是`false`（通过搜索知识库，它实际上并不*知道*这是一个事实）。

然后，由于剪切，prolog 不会在第一个子句中尝试值`time2`和。`time3`

**更多关于切割：**

Prolog 从左到右评估谓词的子句。它将一个值绑定到最左边子句中的一个变量。如果子句是`true`，则移动到下一个子句。如果是`false`，prolog 也会尝试其他值。

如果任何值不能满足任何子句，则它将是`false`，整个谓词也是如此（因为子句由 AND 连接）。

整个事情就像树的深度优先遍历一样，其中子句是节点，边代表其变量的不同值。如果遍历发现一个子句是`false`，它将返回到它的前一个子句并尝试不同的值。

剪裁来了。如果`!`在两个子句之间放置一个 cut ( ) ，则意味着如果cut*之后*的子句变为`false`，则仅当评估在 cut 之后运行时才会继续尝试新值。这意味着在切割之前使用的变量的值被*锁定*，并且当评估穿过切割时它们无法更改。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-25T11:23:22.437

它仍然会尝试满足规则的其余部分，只是不会回溯到感叹号之前。也就是说，如果`sun(X)`失败，它不会回溯并尝试将*不同*的对象匹配到`sound(X)`，但无法完全匹配该规则。*

# ios - NSURLConnection 频繁在请求后几秒超时

> ID：15065664
> 
> 赞同：1
> 
> 时间：2013-02-25T11:13:03.653
> 
> 标签：ios, objective-c, timeout, nsurlconnection

我在我的应用程序中遇到了一个奇怪的问题。NSURLConnection 频繁地转到以下委托方法（在超时发生前的请求后几秒钟）：

```
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
  if (DEBUG_ON)
      NSLog(@"No connection");
  UIAlertView *popup = [[UIAlertView alloc] initWithTitle:NSLocalizedString(@"Error", nil) message:NSLocalizedString(@"TimeoutError", nil) delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
  popup.alertViewStyle = UIAlertViewStyleDefault;
  [popup show];
} 
```

我正在像这样进行所有连接：

```
NSString *dataStr = [NSString stringWithFormat:LOGIN_JSON_TEMPLATE, email, passwd];
NSData *data = [dataStr dataUsingEncoding:NSUTF8StringEncoding];
NSURL *url = [NSURL URLWithString:LOGIN_WS];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url];
[request setHTTPMethod:@"POST"];
[request setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[request setValue:[NSString stringWithFormat:@"%d", [data length]] forHTTPHeaderField:@"Content-Length"];
[request setHTTPBody:data];
if (self.loginConnection == nil)
    self.loginConnection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
else
    self.loginConnection = [self.loginConnection initWithRequest:request delegate:self]; 
```

如果我是对的，请求的默认超时时间（60 秒？）。我试图改变它，但它没有改变任何东西。

知道为什么吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:30:14.340

试试这个代码：

```
NSMutableURLRequest *request1 = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:urlString] cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:1200.0]; 
```

代替

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url]; 
```

您可以更改超时间隔。

# asp.net - 更新实体框架集合的最有效方法是什么？

> ID：15065666
> 
> 赞同：2
> 
> 时间：2013-02-25T11:13:09.237
> 
> 标签：asp.net, entity-framework

不是一个非常有经验的 EF 人，所以我想我会问这方面的专家。

我有一个名为“申请人”的实体。一个申请人可以有许多“申请”。

我有一个搜索申请人的典型方法。如果申请人存在，则更新，否则添加。同时在这两种情况下都会添加一个新的应用程序。

我有两种方法可以做到这一点：

1) 创建或更新申请人，然后立即单独创建一个应用程序。2) 创建或更新申请人，但将应用程序添加到（申请人的）应用程序集合中。

我遇到的问题与选项 2 相关。当我从数据库中检索到一个申请人并且它存在时，我将我的新应用程序添加到它的集合中。当我更新申请人时，它是否会对其集合中的每个项目进行更新，或者它是否足够聪明地知道我只添加了 1 个新应用程序？换句话说，我是否对数据库进行了不必要的往返？

希望这是有道理的。

使用 EF 4.3.1。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:18:10.707

不，它不会更新集合中的每个现有项目。它只会发送您添加到集合中的新项目。

为了更好地了解 EF 发送的 sql 查询，您可能需要查看使用 ORM 分析器。

您的选择是[EFProf](http://efprof.com)或[OrmProfiler](http://ormprofiler.com)

或者，如果您想跳过付费选项，您可以使用 linqpad 或 Sql Server Profiler 工具（如果您有非 express 版本的 sql server 来实现相同的功能。

# linq - DBNull 的链接错误

> ID：15065667
> 
> 赞同：0
> 
> 时间：2013-02-25T11:13:14.593
> 
> 标签：linq

我在 c# 中有这个数据表结果

```
Date    Employee Job1   Job2   Job3
1/1/2012    a    1      1      1 
1/1/2012    b           2      
1/1/2012    c    2      1      4
1/1/2012    d    4      2      1
1/2/2012    a    3      2      5
1/2/2012    b    2      2      2
1/2/2012    c    3      3      3
1/2/2012    d    1      1      1
1/3/2012    a    5      5      5
1/3/2012    b    2      2      6
1/3/2012    c           1      1
1/3/2012    d    2      3      4
2/1/2012    a    2      2      2
2/1/2012    b    5      5      2
2/1/2012    c    2      2      2
2/2/2012    a           3      
2/2/2012    b    2      3      3
3/1/2012    a    4      4      2 
```

要得到这个结果：

工作1：

```
Employee      January       February            March
A             9             5                   4
B             6             7
C             6             2
D             7 
```

Linq 代码是：

```
 var monthEmpGroups = tblEmpJobs.AsEnumerable()
                .Select(r => new
                {
                    Row = r,
                    Employee = r.Field<String>("Employee"),
                    Year = r.Field<DateTime>("Date").Year,
                    Month = r.Field<DateTime>("Date").Month
                })
                .GroupBy(x => x.Employee);

            DataTable tblMonthResultJob1 = new DataTable();
            tblMonthResultJob1.Columns.Add("Employee", typeof(string));
            var dtf = System.Globalization.CultureInfo.CurrentCulture.DateTimeFormat;

            foreach (var empGroup in monthEmpGroups)
            {
                string employee = empGroup.Key;
                var newRow = tblMonthResultJob1.Rows.Add();
                newRow["Employee"] = employee;
                var empMonthGroup = empGroup.GroupBy(mg => new { mg.Year, mg.Month });

                foreach (var empYearMonthGroup in empMonthGroup)
                {
                    int year = empYearMonthGroup.Key.Year;
                    int month = empYearMonthGroup.Key.Month;
                    string colName = string.Format("{0} {1}", dtf.GetMonthName(month), year);
                    if (!tblMonthResultJob1.Columns.Contains(colName))
                        tblMonthResultJob1.Columns.Add(colName, typeof(int));
                    int empJob1Count = empYearMonthGroup.Sum(x => x.Row.Field<int>("Job1"));
                    newRow[colName] = empJob1Count;
                }
            } 
```

在这条线上：

```
int empJob1Count = empYearMonthGroup.Sum(x => x.Row.Field<int>("Job1"));
I am getting error: {System.InvalidCastException: Cannot cast DBNull.Value to type 'System.int'. Please use a nullable type. 
```

任何人都可以建议如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:17:09.653

从数据库返回的基础值是 NULL，它不能存储在 int 中。

请改用可为空的 int。

```
int empJob1Count = empYearMonthGroup.Sum(x => x.Row.Field<int?>("Job1") ?? 0); 
```

编辑

@Phil 非常正确。请参阅 null 合并运算符的使用。当基础值为 null 时，它将使用 0 代替（这对您的 Sum 没有影响）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:30:25.990

检查这个

```
 int empJob1Count = empYearMonthGroup.Where(x => x.Row["Job1"] != DBNull.value).Sum(x=>x.Row.Field<int>("Job1")); 
```

# ios - 限制 UIWebView 留在 Facebook 页面上

> ID：15065669
> 
> 赞同：0
> 
> 时间：2013-02-25T11:13:18.370
> 
> 标签：ios, objective-c, ipad, uiwebview, restriction

我需要为 iPad 制作一个简单的 UIWebView，用于当用户使用他们的帐户登录并能够看到固定的 Facebook 公共页面并能够滚动此页面、评论或喜欢帖子但无法去其他地方的事件时，除了这一页。所以我正在使用

```
-(BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType
    {
        NSURL *url = request.URL;
        NSString *urlString = url.absoluteString;
        NSRange range = [urlString rangeOfString:@"http://m.facebook.com/groups/10621329941138"];
        if (range.location != NSNotFound)
        {
            return YES;
        }
        else
        {
            return NO;
        }
    } 
```

每次用户结束会话时，女主人都会从该页面注销到登录页面。经过一些实验，我遇到了一些问题：

*   首次加载时，我收到“您请求的页面现在无法显示......” [http://uaimage.com/image/5a0cccea](http://uaimage.com/image/5a0cccea)
*   每次注销都会导致空白屏幕（.php 有问题？）
*   如果我将阻止此页面的所有链接，我如何在会话结束时允许注销操作？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:52:00.707

尝试这个：

```
if ([url.host.lowercaseString rangeOfString:@"facebook"].location == NSNotFound) {

    // Don't go since we're somewhere else now
    return NO;

} else {

    // We can go here
    return YES;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T15:47:15.137

我以前做过类似的事情，我会建议类似的事情

```
return [urlString hasPrefix:@"http://m.facebook.com/"]; 
```

这也可能是一个更安全的选择，因为它仅限于域，而不仅仅是在完整 URL 路径中的任何位置对单词 facebook 进行关键字检查。

你可以更花哨一点，在“http://”之后和第二个“/”之前的任何地方检查“facebook.com”。也可以使用 NSURL 的 baseURL 方法来帮助这里。

另外，您确定您的 UIWebView 委托设置正确吗？

# ios - 将下载的图像缓存到磁盘

> ID：15065670
> 
> 赞同：0
> 
> 时间：2013-02-25T11:13:22.670
> 
> 标签：ios, disk

我已经开始编写一个图像库来从网上下载图像。有一次，我下载了一张我在图像字典中设置的图像（我确保该字典中的图像数量不超过某个阈值，以避免过度使用内存，因此我在需要时删除了图像）。之后，我`writeToFile`使用`NSData`. 当请求图像时，我首先检查它是否存在于字典中，如果不存在，文件是否存在于使用的路径中`[[NSFileManager defaultManager] fileExistsAtPath: uniquePath]`. 如果它不存在，我下载图像。所有这些都发生在设置为高优先级全局队列的异步队列中。但是，整个过程似乎仍然有些滞后。在全局队列中异步使用磁盘读写方法可以吗？另外，在这种情况下是否建议缓存到磁盘？如果我只在我从字典中转储图像时提交文件写入，它可以加快速度吗？在内存不足的情况下？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:30:11.613

[SDWebImage 框架](https://github.com/rs/SDWebImage/tree/master/SDWebImage)中的缓存很容易。它默认支持缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-07T08:10:09.990

最简单的缓存方法是使用 Apple 自己的 NSURLCache。只需阅读此链接： http: [//nshipster.com/nsurlcache/](http://nshipster.com/nsurlcache/)

基本上你需要添加这个给你`applicationDidFinishLaunching...`

```
let URLCache = NSURLCache(memoryCapacity: 4 * 1024 * 1024, diskCapacity: 20 * 1024 * 1024, diskPath: nil)
NSURLCache.setSharedURLCache(URLCache) 
```

# unity3d - 动态加载/卸载资产

> ID：15065672
> 
> 赞同：3
> 
> 时间：2013-02-25T11:13:35.547
> 
> 标签：unity3d, ngui

我必须管理我的 RAM，所以想即时加载/卸载我所有的 ngui 页面。为此，我使用预制件创建了 AssetBundle，并将这些 AssetBundle 保存在我的 apk 中

在 android 设备上加载/卸载它们的方法是什么。

我大致了解 AssetBundle.CreateFromMemory，但无法实现

我正在以正确的方式思考或遗漏一些东西。

任何帮助/??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:21:52.343

我认为你的方式是正确的。Unity 支持项目中的资源文件夹，以允许在主游戏文件中提供内容，但在请求之前不加载。在 Unity Pro、Unity iOS Pro（*以前称为“iOS Advanced”*）和 Unity Android Pro（*以前称为“Android Advanced”*）中，您还可以创建 Asset Bundle。这些是与主游戏文件完全分开的文件，其中包含游戏可从文件或 URL 按需访问的资产。

An`Asset Bundle`是资产的外部集合。您可以拥有许多资产包，因此可以拥有许多不同的外部资产集合。这些文件存在于内置的 Unity 播放器之外，通常位于 Web 服务器上，供最终用户动态访问。

要构建 Asset Bundle，您可以`BuildPipeline.BuildAssetBundle()`从编辑器脚本内部调用。在参数中，您指定要包含在构建文件中的对象数组以及其他一些选项。这将构建一个文件，您以后可以使用`AssetBundle.Load()`.

您可以通过调用来卸载 AssetBundle 的资源`AssetBundle.Unload()`。如果您为 unloadAllLoadedObjects 参数传递 true，则由 内部保存的对象`AssetBundle`和使用从 AssetBundle 加载的对象`AssetBundle.Load()`都将被销毁，并且捆绑使用的内存将被释放。

有时您可能更喜欢加载 AssetBundle，实例化所需的对象并释放捆绑包使用的内存，同时保留对象。好处是您可以为其他任务释放内存，例如加载另一个 AssetBundle。在这种情况下，您将传递 false 作为参数。捆绑包被销毁后，您将无法再从中加载对象。

如果您想`Resources.Load()`在加载另一个关卡之前销毁使用加载的场景对象，请调用`Object.Destroy()`它们。要释放资产，请使用`Resources.UnloadUnusedAssets()`.

[在Unity 文档](http://docs.unity3d.com/Documentation/Manual/LoadingResourcesatRuntime.html)中阅读整个故事。

# cocoa - NSManagedObject“更新”方法？

> ID：15065677
> 
> 赞同：0
> 
> 时间：2013-02-25T11:13:47.720
> 
> 标签：cocoa, core-data, nsmanagedobject

我想将更新日期设置为`NSManagedObject`每次更改对象的时间。有没有类似的方法`awakeFromInsert`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:20:41.753

使用`NSManagedObjectContextObjectsDidChangeNotification`.

此通知是（来源 Apple 文档）

> 当托管对象上下文中包含的对象的属性值发生更改时发布。

[Marcus Zarra 的PARENT WATCHING IT CHILD](http://www.cimgf.com/2011/10/14/parent-watching-its-child/)博客文章中很好地解释了使用它的典型示例。

希望有帮助。

# python - Python 语法错误或错误？

> ID：15065680
> 
> 赞同：0
> 
> 时间：2013-02-25T11:14:01.287
> 
> 标签：python, syntax, if-statement

我刚刚开始学习 Python，我正在使用 IDLE ide 来学习编程。我一直在尝试我在官方网站上看到的基本代码，但它一直说“语法不正确”并突出显示关键字“else”，这是程序：

```
a=40
if a <= 40:
    print("True")
    else: 
```

'else' 被突出显示，我被告知这是一个语法错误。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:16:47.550

`else`块需要在与块相同的级别缩进`if`。

```
if a <= 40:
    print('True')
else:
    print('False') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:22:47.863

您需要修复`else:`子句的标识（即使在控制台上工作时）。的对齐`else:`必须与的对齐`if`

# javascript - 我如何获得选定的行

> ID：15065681
> 
> 赞同：0
> 
> 时间：2013-02-25T11:14:07.657
> 
> 标签：javascript, jquery

How do i get a values of a selected ROW in the table ,when one or more rows are selected. 以下是我的表的创建方式：

```
var LoadLabels = function (data) {
  var CableInfos = eval(data);
  var newContent = '';
  var currentState = Hesto.Html.SaveTableState('#ScannedLabelList');

  if (CableInfos.length != 0) {
    $.each(CableInfos, function (i, item) {
      var sideFlag = item.KeepSideFlag;

      newContent += Hesto.Html.StartTR(item.Serial, null);
      newContent += Hesto.Html.CreateTD('<input id="cbSerial" type="checkbox" value="" onclick="">', null);
      newContent += Hesto.Html.CreateTD(item.Serial, null);
      newContent += Hesto.Html.CreateTD(item.KanbanNumber, null, null);
      newContent += Hesto.Html.CreateTD(item.CustomerNumber, null, null);
      newContent += Hesto.Html.CreateTD(item.Description, null, 'centerAlign');
      newContent += Hesto.Html.CreateTD(item.Quantity, null);
      // newContent += Hesto.Html.CreateTD('<input id="deleteRow"     type="button"     value="Delete" onclick="deleteRow(this)">', null);
      newContent = Hesto.Html.EndTR(newContent);
    }); 
```

这是我的html标签：

```
 <table id="ScannedLabelTable" class="hesto">
        <thead>
             <tr>
                <th >Check/Uncheck</th>
                <th >Serial</th>
                <th >Kanban Number </th>
                <th >Customer Number </th>
                <th >Description </th>
                <th >Quantity</th>

             </tr>
         </thead>
             <tbody id="ScannedLabelList" class="selectionModeMulti">

        </tbody>
    <tfoot>
        </tfoot>
     </table 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:26:50.657

要获取所有检查的输入值，请执行以下操作：

```
var selectedValues = new Array();
var $selectedRows = $('#ScannedLabelTable input').filter(':checked');

$selectedRows.each(function () {
    var $row = $(this);
    selectedValues.push($row.val());
}); 
```

# java - Spring 程序化事务

> ID：15065683
> 
> 赞同：1
> 
> 时间：2013-02-25T11:14:19.483
> 
> 标签：java, spring, transactions

我有以编程方式划分事务的代码。

目前我将隔离设置为`PROPAGATION_REQUIRES_NEW`. 效果很好，但是我需要满足递归行为，为此，如果从同一线程再次调用该方法，我不希望创建新事务。

1) 如果该方法是第一次调用，则暂停当前事务并创建新事务。`PROPAGATION_REQUIRES_NEW`

2）如果它被递归调用。不要创建新事务。

示例：我所拥有的并且有效的是。我不想要的是使用入口AtomicInterger。有任何想法吗？

```
public methoda() {

  Integer entrancy = rentrancy.incrementAndGet(); 

   if(entrancy == 1) { 
          this.transactionTemplate.setPropagationBehavior(..PROPAGATION_REQUIRES_NEW);
   }

   this.transactionTemplate.execute(new TransactionCallback<E>(){
         .......
         .......
   }
   entrancy.decrementAndGet();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:58:55.843

听起来 PROPAGATION_REQUIRED 更适合您的目的。从它的javadoc：

*支持当前交易；如果不存在，则创建一个新的。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:06:55.037

我不确定我的“解决方法”是否有效，因为我现在无法测试它。但是 - 如果您使用注释（@Transactional）来定义事务，那么只有在方法调用外部时才会创建事务。如果方法调用 self. 这是因为代理。

“注意：由于这种机制是基于代理的，只有通过代理传入的‘外部’方法调用会被拦截。这意味着‘自调用’，即目标对象中的一个方法调用目标对象的一些其他方法，即使调用的方法标有@Transactional，也不会在运行时导致实际事务！" [http://static.springsource.org/spring/docs/2.0.x/reference/transaction.html](http://static.springsource.org/spring/docs/2.0.x/reference/transaction.html)

# android - 如何从 Android 的 WebView 覆盖 Accept-Language 标头

> ID：15065685
> 
> 赞同：0
> 
> 时间：2013-02-25T11:14:27.387
> 
> 标签：android, webview, http-headers, http-accept-language

我有一个带有嵌入式 WebView 的 Android 应用程序。我需要为通过此 WebView 呈现的网页应用自定义语言设置。我找到[了这个相关的答案](https://stackoverflow.com/questions/12244375/how-can-i-override-android-webview-to-use-custom-accept-language-header)并试了一下。

具体来说，代码是：

```
Map<String, String> headers = new HashMap<String, String>();
String lang = Locale.getDefault().getLanguage(); // for example, returns "ru"
headers.put("Accept-Language", lang); // also tried "ru", "ru_RU", "ru;q=0.8,en;q=0.6", etc.
mWebView.loadUrl("http://localhost/", headers); 
```

没有任何效果。在服务器端，我总是得到带有“en_us”的标题。

根据[Android文档](http://developer.android.com/reference/android/webkit/WebView.html#loadUrl%28java.lang.String,%20java.util.Map%3Cjava.lang.String,%20java.lang.String%3E%29)：

> additionalHttpHeaders - 用于此 URL 的 HTTP 请求的附加标头，指定为从名称到值的映射。**请注意，如果此映射包含此 WebView 默认设置的任何标头，例如控制缓存、接受类型或 User-Agent 的标头，则它们的值可能会被此 WebView 的默认值覆盖**。

有问题的部分以粗体突出显示。

所以问题是 - 如何覆盖 WebView 的默认值以满足首选用户语言？

目前这个问题发生在 Android 2.3 中，我还没有在其他版本上检查它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:43:58.137

经过一番调查，结果发现这是服务器端框架 Yii 中的一个[错误](https://github.com/yiisoft/yii/pull/1673)`Accept-Language`，当在标题中以相同优先级提到首选语言时，它没有正确排序首选语言。例如，如果给定两种语言的权重（默认为 1.0），则无法保证 Yii 会选择第一种。就我而言，它花了第二个。不幸的是，该错误的修复最终从主干中消除了。

至于 Android，它似乎总是根据系统设置中选择的当前用户语言传递 http 标头。大多数用例都可以，因此无需（尝试）覆盖标头。

# design-patterns - 服务之间的关系

> ID：15065686
> 
> 赞同：0
> 
> 时间：2013-02-25T11:14:28.497
> 
> 标签：design-patterns

在我的项目中，我有几项服务。示例 UserService、ArticleService、LogService 等。每个服务都包含创建、读取、更新、删除等功能。现在的问题。当我需要向用户添加项目时，我使用 UserService。这反过来又需要在日志中创建一个对象。UserService 是否应该创建一个新的 LogService 实例并使用此功能。还是应该 UserService 创建这个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:20:28.827

UserService 应该知道一些 LoggerServiceInterface 并且不应该知道它的具体实现 - 在您的情况下为 LoggerService 。LoggerService 对象应该实现 LoggerServiceInterface 并且必须通过构造函数或 setter 注入到 UserService 中。我相信你应该看看一些用你的编程语言实现的依赖注入容器。

# uibutton - Superview的tabgesture在子视图（按钮）点击时被调用

> ID：15065690
> 
> 赞同：0
> 
> 时间：2013-02-25T11:14:46.293
> 
> 标签：uibutton, click, subview

我的头卡在这里了。

我有一个**UIView 向该**视图添加了点击手势（没有点击=1）在这个手势上即时调用方法 - callTap()

将 UIButton 作为子视图添加到该 uiview。此按钮有一个选择器方法 - callClick()

当我**点击按钮时 callTap() 被调用而不是 callClick()**

我想知道这种行为背后的原因。并且很想摆脱这个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:59:29.513

您的问题似乎与回答得很好的这个问题相似。

[具有 UITapGestureRecognizer 的视图内的 UIButton](https://stackoverflow.com/questions/3344341/uibutton-inside-a-view-that-has-a-uitapgesturerecognizer)

# security - 移动应用程序中的安全问题

> ID：15065691
> 
> 赞同：-1
> 
> 时间：2013-02-25T11:14:47.340
> 
> 标签：security, mobile

我有一个项目即将推出，我目前正在评估该方法（使用 PhoneGap 的本机与混合）。关于这个评估过程（主要是大量的谷歌搜索），我对大多数观点都很清楚，除了一个。安全。

我读过的很多文章都说混合应用程序的安全性低于原生应用程序，但没有详细说明细节。我想了解，究竟它是如何不安全的。

只有一篇文章深入探讨了这个话题，说安全风险可能是：

*   应用源代码
*   静态数据
*   传输中的数据
*   网址安全问题

我想更详细地了解这个主题。有人可以详细说明一下或指出一些有用的资源吗？

PS：我知道这是一个不集中/开放式的问题，但我真的被困在这个问题上，而且我已经经历了很多谷歌搜索。版主，请不要关闭此线程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:24:19.977

纯粹是推测（根据本机、iOS 和 Android 上的混合应用程序的经验），但混合应用程序需要通过将数据绑定到 API 并以通用数据格式存储来更易于访问。这隐含地允许更多的攻击向量，因为您通过混合数据使数据本质上更易于访问。作为本机应用程序，应用程序和相关数据必须以专有格式存储。这意味着必须专门构建攻击者或恶意软件以解决该格式的数据访问问题，而对于混合应用程序，恶意软件或攻击者可以通过通用 API 或通用数据存储格式访问数据。

此外，每当您与服务器“通过网络”交互时，本机应用程序使用低级通信，打开套接字连接，而对于混合应用程序，数据（通常）被封装在 HTTP 之上。这意味着如果攻击者所做的只是嗅探端口 80 上的流量（与某些奇怪协议中的嗅探端口 2030 相比），攻击者需要克服的障碍就会更少。使用“混合”通信（通常再次通过 HTTP）与服务器交互的最常见方法之一是通过 URL。这意味着用户名和密码之类的内容将包含在以明文形式发送的 URL 中（作为一个愚蠢的示例）`http://www.example.com/control_me?username=foo&password=bar`：.

至于应用程序源代码，这又回到了可访问性。根据定义，混合应用程序源代码需要开放。它需要在多个平台上运行，在应用程序领域，当我们谈论混合应用程序源代码时，我们通常指的是 HTML5。这意味着您的整个方法可以下载和逆向工程（或只是打开并查看），因为您需要发送源代码才能使其在设备上运行。这与原生应用程序相比，原生应用程序基本上是编译的 java 或 Objective-c，很难或不可能“反编译”。

# javascript - RequireJS 忽略了一些路径

> ID：15065692
> 
> 赞同：3
> 
> 时间：2013-02-25T11:14:47.447
> 
> 标签：javascript, requirejs

我有以下内容`main.js`：

```
requirejs.config({
    paths: {
        'backbone': 'backbone-min',
        'underscore': 'underscore-min',
        'loader': 'loader-min'
    }
}) 
```

这个'loader-min.js'文件只是一个*优化*的js `loader.js`：

```
define(['backbone', 'underscore'], function () {
}) 
```

我的 HTML 页面包含以下内容：

```
<script data-main="/js/main" src="/js/require.js"></script>
<script type="text/javascript">
   requirejs(['loader'], function(loader) {
      ....
   })
</script> 
```

顺便说一句，正如我从 Firebug 控制台看到的，浏览器仅加载以下网址：

```
GET /js/require.js
GET /js/main.js
GET /js/loader.js !!! Notice it's loader.js, not loader-min.js
GET /js/backbone-min.js
GET /js/underscore-min.js 
```

因此，对于模块`loader`它尝试加载文件的问题`loader.js`，而不是在`main.js`. 未缩小/优化文件，忽略`requirejs.config`值。

`backbone`最奇怪的是它仍然为and使用正确的值`underscore`。大多数情况下，但并非所有时间。有时加载失败`/js/backbone.js`

似乎 RequireJS 在`main.js`浏览器完全加载和解释之前就开始工作了。这是预期的行为吗？还是我的应用有问题？

如何确保`requirejs(...)`仅在处理“main.js”后才执行该函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T11:24:11.610

您的 main.js 文件是异步加载的。但是，此脚本标记（如下）是按顺序解析的。因此无法预测执行顺序（尽管下面的脚本很可能会在异步调用返回之前执行）。

```
<script type="text/javascript">
   // require() and not requirejs()
   require(['loader'], function(loader) { 
      ....
   })
</script> 
```

在 main.js 文件的末尾添加 require 调用，如下所示：

```
require.config({
// configuration.
});

require(['loader'], function(loader) { 
// callback
}) 
```

这样 RequireJS 在执行任何 require 或 define 调用之前总是被“配置”。

**编辑：** 我通常做什么：

```
<script src="/js/require.js"></script> <!-- No data-main attribute -->
<script src="/js/config.js"></script> <!-- Explicitly load configuration -->

<script type="text/javascript">
    require.config({
        baseURL: "path/to/base"
    });
    require(["module"], function(module){
        // code
    });
</script> 
```

通过这种方式，我可以明确控制加载的内容。它还使我的 config.js 文件保持干燥。

我通常在我的引导 HTML 中设置 baseURL，因为这样我可以为我的 Jasmine 测试套件使用相同的配置文件。

# ssl - 我无法使用 indy 从 ssl 下载附件

> ID：15065695
> 
> 赞同：0
> 
> 时间：2013-02-25T11:14:56.620
> 
> 标签：ssl, indy

我一直在使用 Indy 发送和接收电子邮件。现在我有一个 ssl 邮件服务器，但我还没有从电子邮件中获取附件？请帮我....

```
Memo1.Clear;
POP3.ConnectTimeout := 20000;
if POP3.Connected then
  POP3.Disconnect;
POP3.Host := '*******';
POP3.Port := 995;
POP3.Username := '*******';
POP3.Password := '*******';
SSLIOHandler.Host := POP3.Host;
SSLIOHandler.Port := POP3.Port;
POP3.IOHandler := SSLIOHandler;
POP3.UseTLS := utUseImplicitTLS
try
  POP3.Connect;
except
  Memo1.Text := Memo1.Text + 'Can not connect to server' + #13#10;
  Memo1.Text := Memo1.Text + '==========' + #13#10;
end;
for i := 1 to POP3.CheckMessages do
begin
  Msg.Clear;
  POP3.RetrieveHeader(i, Msg)
  Memo1.Text := Memo1.Text + 'Subject: ' + Msg.Subject + #13#10;
  Memo1.Text := Memo1.Text + 'AttachmentCount: ' + IntToStr(Msg.MessageParts.AttachmentCount) + #13#10;
  Memo1.Text := Memo1.Text + 'MessagePartsCount: ' + IntToStr(Msg.MessageParts.Count) +   #13#10;
  Memo1.Text := Memo1.Text + '==========' + #13#10;
  for j := 0 to Msg.MessageParts.Count do
  begin
    if (Msg.MessageParts.Items[j] is TIdAttachmentFile) then
    begin
      //My Code
    end;
  end;
end;
POP3.Disconnect;
Memo1.Text := Memo1.Text + 'End of conecction' + #13#10; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T23:08:33.447

SSL 与非 SSL 对 Indy 生成和解析电子邮件的能力没有任何影响。如果您没有`TIdAttachment`在集合中获得任何对象，`Msg.MessageParts`则电子邮件通常格式错误，或者电子邮件使用 Indy 不支持的格式。

接收或加载电子邮件不会设置`AttachmentCount`、`RelatedPartCount`或`TextPartCount`属性，因此它们将始终为 0。这些属性仅在发送/保存电子邮件时使用，而不是在接收/加载电子邮件时使用。如果您希望这些属性在接收/加载电子邮件时具有值，则必须`Msg.MessageParts.CountParts()`自己调用该方法，例如：

```
POP3.Retrieve(i, Msg);
Msg.MessageParts.CountParts;
Memo1.Text := Memo1.Text + 'AttachmentCount: ' + IntToStr(Msg.MessageParts.AttachmentCount) + #13#10; 
```

最后，请记住，如果电子邮件没有任何附件，并且是简单的纯文本电子邮件或单部分 MIME 电子邮件，则该`Msg.MessageParts`集合将不会保存电子邮件内容，`Msg.Body`而是由属性来保存。该`Msg.MessageParts`属性仅用于其中包含多部分和/或非文本数据的电子邮件。

# c# - LINQ to entity - 触发器和表默认值

> ID：15065700
> 
> 赞同：2
> 
> 时间：2013-02-25T11:15:06.947
> 
> 标签：c#, sql, entity-framework-4, linq-to-entities

我有一个名为 Room 的数据库表。

此表在某些列上有一些默认值：

```
ALTER TABLE [dbo].[Room] ADD  CONSTRAINT [DF_Room_Created]  DEFAULT (getdate()) FOR [Created]
GO

ALTER TABLE [dbo].[Room] ADD  CONSTRAINT [DF_Room_Updated]  DEFAULT (getdate()) FOR [Updated]
GO

ALTER TABLE [dbo].[Room] ADD  CONSTRAINT [DF_Room_RecordStatus]  DEFAULT (0) FOR [RecordStatus] 
```

该表还具有以下触发器：

```
ALTER TRIGGER [dbo].[RoomInsert] ON [dbo].[Room]
FOR INSERT 
AS
DECLARE @PKey int, @TrackingId int
SELECT @PKey = PKey, @TrackingId = TrackingId FROM INSERTED
IF @TrackingId = 0
UPDATE Room
SET TrackingId = @PKey
WHERE PKey = @PKey 
```

我们目前正在开发一个使用 Entity Framework 4 的 MVC 3 Web 应用程序。当我运行以下代码时，没有应用任何默认值，也没有触发触发器：

```
// Create the new room record
                Room newRoom = new Room();
                newRoom.SiteKey = parentFloor.SiteKey;
                newRoom.SiteSurveyKey = parentFloor.SiteSurveyKey;
                newRoom.BuildingKey = parentFloor.BuildingKey;
                newRoom.FloorKey = parentFloor.PKey;
                newRoom.Name = eventModel.RoomName;
                newRoom.Description = eventModel.RoomName;
                newRoom.CreatedBy = eventModel.UserKey;

                _entities.Rooms.AddObject(newRoom);
                _entities.SaveChanges(); 
```

我在数据库上运行了一个配置文件，插入产生以下内容：

```
exec sp_executesql N'insert [dbo].[Room]([TrackingID], [OriginalPKey], [BuildingKey], [SiteSurveyKey], [SiteKey], [Name], [Description], [RiskColour], [CreatedBy], [Created], [Updated], [RecordStatus], [FloorKey], [DisplayOrder])
values (null, null, @0, @1, @2, @3, @4, null, @5, null, null, null, @6, null)
select [PKey]
from [dbo].[Room]
where @@ROWCOUNT > 0 and [PKey] = scope_identity()',N'@0 int,@1 int,@2 int,@3 varchar(255),@4 varchar(255),@5 int,@6 int',@0=29970,@1=20177,@2=39373,@3='Another Room ',@4='Another Room ',@5=139,@6=25454 
```

我猜测没有应用默认值，因为 NULL 是专门传递的，并且由于 sp_executesql 而没有触发触发器。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:25:55.913

When you use EF you basically just have to accept that the application is the master, not the database.

You should set default values in your `Room` constructor, not through database default constraints (admittedly with created / updated date you might want to do this at the db for timezone reasons etc...)

[Entity Framework - Default value for property using Data Annotations](https://stackoverflow.com/questions/6273303/entity-framework-default-value-for-property-using-data-annotations)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:26:59.293

As @JustAnother... says, the contraints will be of little use, as you'll always have a value supplied, however your trigger should still work ok.

In the SQL trace you'll see that the value of `TrackingID` is null. In your trigger you're testing for `TrackingID=0`, which is false when `TrackingID = null`.

Try updating the trigger to test for `null` as well.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T11:21:18.173

实体框架不关心您的默认约束。只要您的列在 EF 模型中未标记为 Identity 或 Computed，它将始终提交一个值。当您将列更改为“计算”时，您无法再使用实体对象更新列，它将始终采用数据库值（因此您的默认约束值）。

# django - Django collectstatic 给出 ValueError：需要超过 1 个值才能解包

> ID：15065702
> 
> 赞同：0
> 
> 时间：2013-02-25T11:15:17.813
> 
> 标签：django

运行命令 collectstatic 时出现以下错误：

**ValueError：需要超过 1 个值才能解压**

自从我将下面的行添加到静态查找器后，这种情况就开始发生了。任何人都可以帮忙吗？我需要找到公共文件夹。

**设置.py**

```
# Used to provide absolute paths. Normally the default is fine.
LOCAL_PATH = normpath(join(dirname(__file__), '..'))

STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
    LOCAL_PATH + '/public/common/',
) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:17:37.117

您使用了错误的设置。

你想做你在 STATICFILES_DIRS 中所做的事情。

STATICFILES_FINDERS 指定将搜索文件的 python 模块。STATICFILES_DIRS 指定`django.contrib.staticfiles.finders.FileSystemFinder`应该查看哪些路径。

所以：

```
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
)

STATICFILES_DIRS = ('%s/public/common/' % LOCAL_PATH,) 
```

# sql-server - 实体框架关联的优先级/顺序 int 列

> ID：15065709
> 
> 赞同：0
> 
> 时间：2013-02-25T11:15:24.517
> 
> 标签：sql-server, entity-framework, database-design

我在实体框架中有一个关联，但我需要向它添加一个属性/属性。无论如何，我在实体框架中执行此操作时遇到问题（我更愿意将其保留为关联，但被迫将其更改为实体以便为其添加属性），但在这种特定情况下，我想知道是否有更好的方法来做到这一点。

关联表看起来很简单：

```
CREATE TABLE EntityA_EntityB (
   aId uniqueidentifier,
   bId uniqueidentifier
) 
```

客户想要一种方法来优先考虑或排序相关的 EntityB。我认为最好的方法是在该表中添加一个订单列（int），使其看起来像这样：

```
CREATE TABLE EntityA_EntityB (
   aId uniqueidentifier,
   bId uniqueidentifier,
   order int
) 
```

在这种情况下，所有三列都将构成主键。这似乎没问题，但是它给使用这个系统的任何代码增加了相当多的复杂性，因为我必须找到`EntityA.EntityBs`集合中最大的“订单”号，而不是仅仅将相关的 EntityB 添加到 EntityA 中，并将其递增为了添加一个新的关联。

我可以使 order 列成为一个标识，但这会始终递增 order 列，而不管 aId 或 bId 的值是什么。我想要在插入 aId 和 bId 的全新组合时插入 0 订单的东西。

有没有更好的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:46:19.420

如果顺序整数不必是连续的顺序，您可以将顺序整数作为主键。

```
CREATE TABLE EntityA_EntityB (
   order autoincrementing int
   aId uniqueidentifier,
   bId uniqueidentifier,
) 
```

您将在 (aId, bId, order) 上有一个唯一索引，在 (bId, aId, order) 上有另一个唯一索引。

您只需添加带有 aId 和 bId 的行，数据库将处理订单整数。

# objective-c - 单击取消按钮时的消息框

> ID：15065712
> 
> 赞同：0
> 
> 时间：2013-02-25T11:15:32.723
> 
> 标签：objective-c, cocoa

我在 Cocoa 中尝试了我的第一个 Hello World GUI 应用程序，而没有使用 Interface Builder（因为我只需要以这种方式进行操作）。在此，我编写以下代码。

```
#import <Cocoa/Cocoa.h>

@interface AppDelegate : NSObject <NSApplicationDelegate>
{
 NSWindow * vWindow;     ///< Window under delegation.
 //BOOL       vQuit;       ///< Flag to inidicate wheather to quit or not.
}
@property (assign) IBOutlet NSWindow *window;
- (id) init;
- (void) CreateWindow;
@end

//Implementation.
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window = vWindow;

-(id)init
{
     if(self = [super init]) {
       //my allocation if required.
      }

      return self;
}

- (void)dealloc
{
     [super dealloc];
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
     // Insert code here to initialize your application
     [vWindow setTitle:@"Hello World Application"];
}

- (void)applicationWillTerminate:(NSNotification *)notification
{
    [self dealloc];
}

-(NSApplicationTerminateReply)applicationShouldTerminate:(NSApplication *)sender
{
     return 1;
}

/**
 This is called when the last window is closed.
 */
 -(BOOL)applicationShouldTerminateAfterLastWindowClosed:(NSApplication *)sender
 {    
         int answer;

    answer  = NSRunAlertPanel(@"Quit Confirmation", @"Do you want it to close?", @"Yes", @"No", @"Cancel");
    if(NSAlertDefaultReturn == answer)
        return YES;

    //Recreate the Windows.
    [self CreateWindow];
    return NO;
 }

/**
 * It creates the Window and assign it to the current Window.
*/
-(void)CreateWindow
{
    //Adding the menu bar.
    id      menubar;        ///< Menu bar.

//Create new menubar.
menubar     = [[[NSMenu alloc] initWithTitle:@"Menu"] autorelease];

    //Add a menu item to the menubar.
    //[menubar addItem:menuitem];

    id      quitmenu;   ///< quit menu.

quitmenu    = [[[NSMenuItem alloc] initWithTitle:@"Quit"
                                          action:@selector(terminate) keyEquivalent:@"q"]
               autorelease];

[menubar addItem:quitmenu];

//Set the main menu
[NSApp setMainMenu:menubar];

//Add close menu.
    id      window;     ///< Window.

window  = [[[NSWindow alloc] initWithContentRect:NSMakeRect(0, 0, 200, 200)
                                       styleMask:NSResizableWindowMask|NSTitledWindowMask|NSClosableWindowMask
                                         backing:NSBackingStoreBuffered defer:NO] autorelease];

//where to mention my delegate.
[window cascadeTopLeftFromPoint:NSMakePoint(20,20)];
[window setTitle:@"Hello World App"];
[window makeKeyAndOrderFront:nil];

//Let us print "Hello Mac OS X" on this Windows.
    NSString *    strmessage;

strmessage  = [[NSString alloc] initWithUTF8String:"Hello Mac OS X"];

[strmessage drawAtPoint:NSMakePoint(30, 30) withAttributes:nil];

//Let us add few control (in assignment 2)

[self setWindow:window];

//make this window a key window
[window makeKeyAndOrderFront:nil];
}
@end

int main(int argc, char ** argv)
{
    NSApplication * application;    ///< application.
    AppDelegate *   appdelegate;    ///< Application delegate.

  //setup new auto release pool.
  [NSAutoreleasePool new];

  //Instantiate the instance of application.
  application     = [NSApplication sharedApplication];

  //Set the delegate here.
  appdelegate     = [[AppDelegate alloc] init];
  [application setDelegate:appdelegate];

  //Create Window on delegate.
  [appdelegate CreateWindow];

  //Start of the message loop.
  [NSApp run];

  //Any cleanup after this.

  [appdelegate release];
  [application release];

  return 0;
} 
```

我面临以下问题： 1\. 单击关闭按钮时，会显示一个消息框。单击是时，它会退出。但是，单击“否”或“取消”时，它会一次又一次地显示消息框，除非我单击“是”。2\. 菜单栏无任何显示。

请让我知道我在这里缺少什么。如果有任何没有 nib 或 xib 文件的学习 Cocoa 应用程序的好链接，请发布。我还需要支持其他功能，例如 Command-W 和 Command-Q 行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:57:03.330

一旦您点击了“x”按钮，您的应用就会收到关闭通知。

在此之后你不能回滚到不关闭。

所以这就是这里的问题。

但是，您可以使用基于文档的应用程序非常轻松地完成此类工作。

*必须有一些东西，但这将被视为阻止发送到应用程序和操作系统的通知的黑客行为*

# maven - 在linux的maven 3中创建新项目时出错

> ID：15065714
> 
> 赞同：0
> 
> 时间：2013-02-25T11:15:41.353
> 
> 标签：maven, maven-3

当我尝试通过 mvn archetype:generate 在 maven 中创建一个新项目时，我必须解决这个问题：

在当前项目和存储库中可用的插件组 [org.apache.maven.plugins, org.codehaus.mojo] 中找不到前缀“archetype”的插件

我有一个 mvn 版本 3.0.5 jdk 版本 1.6。系统linux

如果有人可以解决这个问题，请提前感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:22:57.047

我猜您的机器位于防火墙或代理后面，因此您的机器无法访问任何 HTTP 请求。关闭您的防火墙，然后尝试访问它或创建您的项目

# jquery - 如何将 jquery 自定义滚动条集成到 Tinymce 编辑器

> ID：15065718
> 
> 赞同：1
> 
> 时间：2013-02-25T11:16:06.610
> 
> 标签：jquery, html

我需要你的帮助。我已经尝试并实现了滚动条，但它仅在页面加载时生效，但是当我编写内容并按 Enter 时，我需要将 jquery 自定义滚动条集成到 TinyMCE 编辑器内容区域。对此有任何想法吗？如果是，请指导我如何整合它。

我将不胜感激任何帮助？

# c++ - 将库添加到链接器

> ID：15065719
> 
> 赞同：1
> 
> 时间：2013-02-25T11:16:06.937
> 
> 标签：c++, visual-studio, linker, ping, icmp

我正在尝试编写将 ping 发送到另一台计算机的代码。
我需要包含`icmpapi.h`到我的程序中并添加`icmp.lib`到链接库列表中。我已经包含了`icmpapi.h`，但是当我构建程序时，我得到了很多错误并且 - 没有找到 C 链接的函数 - 最后
我在视觉上有点新studio ant 如果有人能帮我解决这个问题，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:19:30.537

根据[IcmpSendEcho](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa366050%28v=vs.85%29.aspx)的文档，这是`Iphlpapi.lib`你想要的。您还应该包括`iphlpapi.h`.

# java - 为 Jar 根创建文件对象

> ID：15065724
> 
> 赞同：0
> 
> 时间：2013-02-25T11:16:37.140
> 
> 标签：java, jar, executable-jar

我有一个可执行 jar，其中包含我想要**读取**的根级别的一系列属性文件。我想利用`FileUtils` `listFiles()`拾取所有这些文件。

myjar.jar
->a.properties
->b.properties
->c.properties
等...

我遇到的问题是创建一个表示属性文件父目录（jar 根目录）的 File 对象。

我理解通过使用`getClass().getResourceAsStream()`etc 我可以单独提取文件。但我希望它们都在一个列表中。

如果我使用：

`new File(RunUI.class.getProtectionDomain().getCodeSource().getLocation().getPath());`

绝对路径是：

`C:\projects\temp\MYTOOLS\selenium-plugin\target\file:\C:\projects\temp\MYT OOLS\selenium-plugin\target\selenium-plugin-complete-0.0.1.jar!\main\selenium-plugin-0.0.1.jar`

但这显然不被接受为目录，因此在尝试使用 listFiles 时会抛出空指针。

因此，我的问题是，我是否可以将 jar 根用作传统的 File 对象目录？

谢谢，

# javascript - 如何提交关于 Ajax 成功的表单：

> ID：15065725
> 
> 赞同：1
> 
> 时间：2013-02-25T11:16:38.967
> 
> 标签：javascript, jquery, ajax

我正在尝试使用 jQuery 验证输入。如果输入经过验证并且 ajax 返回 `success`然后我需要允许表单提交。我正在阻止提交`e.preventDefault`

我的脚本是：

```
$("#spsignin").submit(function(e){
    if (e.preventDefault) { 
        e.preventDefault(); 
    } else { 
        e.returnValue = false;
    }
    var uname = $("input#name").val();
    var pass = $("input#password").val();

    $.ajax({
        type: "POST",
        url: "Login",
        data: 'uname=' + encodeURIComponent(uname) + '&' + 'pass=' 
                       + encodeURIComponent(pass),
        dataType: "json",
        success: function( data, textStatus, jqXHR) {
            if (data == true) {
                $("#spsignin").submit();
            } else { //display error message
                $("#error").show(1500).css({visibility: "visible"});
                $("#error").append("<b>Invalid Username/Email or Password</b>");
            }
        },
        //If there was no resonse from the server
        error: function(jqXHR, textStatus, errorThrown) {
            console.log("Something really bad happened " + textStatus);
            $("#error").html(jqXHR.responseText);
        },
    }); 
```

在`success`它执行提交操作但它重复执行操作。表示 Firebug`post`在其控制台中显示请求数。`post`以及响应的请求数量。

形式是：

```
<form action="Signin" method="get" id="spsignin">
    <input type="text" name="uname" class="text validate[required]" 
        id="name" placeholder="Username"/>
    <input type="password" name="pass" class="text validate[required]" 
        id="password" placeholder="Password"/>
    <input type="submit" value="" id="memberlogin"/>
</form> 
```

请任何人告诉我如何在 ajax 上提交表单`success`...谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:22:35.367

如果输入得到验证，那么您可以登录用户，从相同的代码创建会话并在成功回调中重定向到适当的页面，例如

```
...
success: function( data, textStatus, jqXHR) {
  if(data==true) {
   //redirect to loggedin page
   location.href = "url_to_your_loggedin_page";               
  } 
```

# android - 从 data/data/ 保存和读取扩展文件

> ID：15065731
> 
> 赞同：0
> 
> 时间：2013-02-25T11:17:08.923
> 
> 标签：android, apk-expansion-files

我想将下载的扩展文件直接保存在数据/数据（内部存储）上。将获得帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:43:06.490

不可以。您的扩展文件已下载到 sdcard/Android/obb 文件夹中，您需要检索它们并解压缩以进一步使用这里是一些获取扩展文件的代码

私有最终静态字符串 EXP_PATH = "/Android/obb/";

```
static String[] getAPKExpansionFiles(Context ctx, int mainVersion,
        int patchVersion) {
    String packageName = ctx.getPackageName();
    Vector<String> ret = new Vector<String>();
    if (Environment.getExternalStorageState().equals(
            Environment.MEDIA_MOUNTED)) {
        // Build the full path to the app's expansion files
        File root = Environment.getExternalStorageDirectory();
        File expPath = new File(root.toString() + EXP_PATH + packageName);

        // Check that expansion file path exists
        if (expPath.exists()) {
            if (mainVersion > 0) {
                String strMainPath = expPath + File.separator + "main."
                        + mainVersion + "." + packageName + ".obb";
                File main = new File(strMainPath);
                if (main.isFile()) {
                    ret.add(strMainPath);
                }
            }
            if (patchVersion > 0) {
                String strPatchPath = expPath + File.separator + "patch."
                        + mainVersion + "." + packageName + ".obb";
                File main = new File(strPatchPath);
                if (main.isFile()) {
                    ret.add(strPatchPath);
                }
            }
        }
    }
    String[] retArray = new String[ret.size()];
    ret.toArray(retArray);
    return retArray;
}

String[] test = getAPKExpansionFiles(myContext, 2, 0);
        Log.d(LOG_TAG, "total file : " + test.length);

        for (int i = 0; i < test.length; i++)
            Log.d(LOG_TAG, "filename is : " + test[i]);
        if (test.length > 0) {
            try {
                file = APKExpansionSupport.getResourceZipFile(test)
                        .getAllEntries();
                Log.d(LOG_TAG, "total zip file : " + file.length);
                for (int i = 0; i < file.length; i++) {

                        Log.d(LOG_TAG, "zip filename is : "
                                + (file[i].mFileName).split("/")[1]);

                        File("/mnt/sdcard/Android/obb/one.example.expansion.downloader/main.3.one.example.expansion.downloader.obb/myvideo.mp4");
                        File desc = new File("/mnt/sdcard/.YourFolder");

                        ZipHelper.unzip(test[0], desc);

                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

祝你好运 ！

# spring - Spring框架：在语言环境的代码下找不到消息

> ID：15065734
> 
> 赞同：19
> 
> 时间：2013-02-25T11:17:25.813
> 
> 标签：spring, spring-mvc, message

这是我的 messageResource 声明

```
<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.2.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd">

    <!-- Auto-detect controllers in this package -->
    <context:component-scan base-package="levelup.world.web" />

    <!-- Prepend /WEB-INF/jsp/ and append .jsp to the view name -->
    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/jsp/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <!-- Access resource bundles with the specified basename -->
    <bean id="messageSource"
        class="org.springframework.context.support.ReloadableResourceBundleMessageSource"
        p:basename="/WEB-INF/messages/" />

</beans> 
```

当我运行我的应用程序时，出现此错误

```
No message found under code 'country.plural' for locale 'fil_PH' 
```

现在在 web-inf 内的消息文件夹中，我有以下消息属性

```
messages_en.properties
messages_fr.properties
messages.properties 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-25T13:59:49.107

一般来说，出现这样的问题不是因为不存在语言环境，而是因为`MessageBundle`配置不正确。在您的情况下，您似乎需要删除基本名称中的“/”。

```
<bean id="messageSource"
     class="org.springframework.context.support.ReloadableResourceBundleMessageSource"
     p:basename="/WEB-INF/messages" /> 
```

为什么会这样：

如果你有`messages.properties`和`messages_en.properties`捆绑，那么捆绑名称是`messages`. 如果`WEB-INF`文件夹中有它们，则 basename 为`/WEB-INF/messages`，即根据 / `path/to/bundle/bundlename`。如果您`messages.properties`在`/WEB-INF/messages`文件夹内，则相应的基本名称为`/WEB-INF/messages/messages`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-09-07T13:21:16.523

对于弹簧靴，您需要这样的东西：

```
@Bean
public MessageSource messageSource() {
     ReloadableResourceBundleMessageSource messageSource = new ReloadableResourceBundleMessageSource();
     messageSource.setBasename("/WEB-INF/classes/messages");
     return messageSource;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-09-03T11:01:16.987

对于 spring boot 文件夹资源，您需要添加 Bean 的名称：

```
@Bean(name="messageSource")
public ResourceBundleMessageSource bundleMessageSource() {
ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();
messageSource.setBasename("messages");
return messageSource;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-01-01T10:05:03.120

您也可以在 Spring boot application.properties 中指定

```
# INTERNATIONALIZATION 
spring.messages.basename=i18n/messages
spring.messages.encoding=UTF-8 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-21T10:03:35.473

您可以在 application.properties 中添加一些代码：

```
spring.messages.always-use-message-format=false
spring.messages.basename=messages
spring.messages.cache-seconds=-1
spring.messages.encoding=UTF-8
spring.messages.fallback-to-system-locale=true 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-07-10T07:53:15.433

也许它会帮助某人。

```
errors.rejectValue("fieldName", "errorCode", "textException"); 
```

如果你不像我那样使用 messageResource，那么你应该写“”而不是“errorCode”。

例子：

```
errors.rejectValue("name", "", "This field should not be empty"); 
```

这种方式帮助我避免了异常。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2020-02-04T19:55:31.173

默认情况下，maven 假设在下面找到这样的资源包消息源

> 源/主/资源

. 通过移动该位置下的所有必要文件夹并确保我们在上下文中有以下代码

```
<bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">
<property name="basename"><value>messages</value></property>
</bean> 
```

# lua - 管理声音通道

> ID：15065742
> 
> 赞同：0
> 
> 时间：2013-02-25T11:17:59.963
> 
> 标签：lua, coronasdk

我目前正在研究我的菜单结构和选项菜单。我正在使用 Director API 在场景之间进行转换并使用自定义保存/加载系统。

我正在努力做到这一点，以便用户可以打开和关闭音乐。我已经让它工作了，但不是以最优化的方式（因为它停止了所有声音）。

主程序.lua

```
bgMusic = audio.loadSound( "sounds/Torukia.mp3" )
musicIsPlaying = false 
```

主菜单.lua

```
if musicIsPlaying == false then
        if gameSettings.soundOn == true then
            backgroundMusicChannel = audio.play( bgMusic, { loops=-1 } )
            musicIsPlaying = true
        elseif gameSettings.soundOff == true then
            musicIsPlaying = false
        end
    end
end 
```

optionsMenu.lua

```
local function toggleSound( event )
    if event.phase == "ended" then
        if gameSettings.soundOn == true then
            gameSettings.soundOn = false
            gameSettings.soundOff = true
            audio.stop( )
    soundBtn:setFillColor( 255,0,0 )
        elseif gameSettings.soundOff == true then
            gameSettings.soundOn = true
            gameSettings.soundOff = false
            backgroundMusicChannel = audio.play( bgMusic, { loops=-1 } )
    soundBtn:setFillColor( 0,255,0 )
        end
        saveSettings(gameSettings, "gameSettings.json")
    end
end 
```

我可以创建全局声道吗？那会很有帮助。我试过查看文档并寻找答案，但我找不到关于这个问题的太多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T02:47:50.867

试试这个版本，你可以指定你想播放或停止哪个频道

主程序.lua

```
bgMusicChannel = 1 -- can be 1-32
bgMusic = audio.loadSound( "sounds/Torukia.mp3" )
musicIsPlaying = false 
```

主菜单.lua

```
if musicIsPlaying == false then
        if gameSettings.soundOn == true then
            backgroundMusicChannel = audio.play( bgMusic, { loops=-1,channel = bgMusicChannel } )
            musicIsPlaying = true
        elseif gameSettings.soundOff == true then
            musicIsPlaying = false
        end
    end
end 
```

optionsMenu.lua

```
local function toggleSound( event )
    if event.phase == "ended" then
        if gameSettings.soundOn == true then
            gameSettings.soundOn = false
            gameSettings.soundOff = true
            audio.stop( bgMusicChannel )
    soundBtn:setFillColor( 255,0,0 )
        elseif gameSettings.soundOff == true then
            gameSettings.soundOn = true
            gameSettings.soundOff = false
            backgroundMusicChannel = audio.play( bgMusic, { loops=-1, channel = bgMusicChannel } )
    soundBtn:setFillColor( 0,255,0 )
        end
        saveSettings(gameSettings, "gameSettings.json")
    end
end 
```

# windows - 离线检查可用的 Windows 更新

> ID：15065746
> 
> 赞同：0
> 
> 时间：2013-02-25T11:18:10.160
> 
> 标签：windows, winapi

有没有办法在不上网的情况下检查 Windows 更新是否可用？我知道有 Windows 更新代理 API，您可以通过提供 wsusscn2.cab 进行离线检查，但是我必须定期更新此文件。如果有可用的 Windows 更新，我认为必须有一种方法来检查文件、注册表、WMI 或其他东西来获取信息。

到目前为止，我发现的最佳解决方案是解析 WindowsUpdate.log 文件，但我对此并不满意。

谢谢，阿奇姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T18:49:11.897

在 Windows 7 上，`UpdateCount`REG_DWORD 值`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\WindowsUpdate\Auto Update\UAS`似乎包含挂起更新的数量。

由于没有记录，它可能会在没有警告的情况下更改，但对于内部使用，它可能会满足您的需求。另一方面，根据您的具体情况，您最好运行 WSUS，其中包括报告功能。还有一个 WSUS API。

# linux - 授予 Linux 用户 git 访问权限但不授予 shell 访问权限？

> ID：15065751
> 
> 赞同：7
> 
> 时间：2013-02-25T11:18:21.267
> 
> 标签：linux, git, ssh

我想为几个不同的人提供提交访问权限，每个人都可以访问我的 Linux 服务器上自己的单独 git 存储库。

一种方法是：

```
foreach user x
    adduser x
    create /home/x/repo.git
    ask user x to clone from ssh://myserver.com/home/x/repo.git 
```

但是，这会产生不良影响，即他们也可以通过 ssh 登录。我不想给他们 shell 访问权限。

无论如何以类似的方式设置它，但纯粹给他们 git commit 访问权限而不是 shell 访问权限？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-25T11:22:41.247

设置[`/usr/bin/git-shell`](https://www.kernel.org/pub/software/scm/git/docs/git-shell.html)为他们的外壳`/etc/passwd`。

或者使用本机`git`协议而不是`ssh`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-25T11:34:14.043

您可以将用户的登录 shell 设置为[git-shell](http://www.kernel.org/pub//software/scm/git/docs/git-shell.html)（与 git 一起提供），这是“仅限 Git SSH 访问的受限登录 shell”。它会让用户正常使用`git push`and `git pull`，但不会让他们登录。设置说明可以在此页面底部找到：http: [//git-scm.com/book/ch4-4。 html](http://git-scm.com/book/ch4-4.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-25T11:23:28.053

使用[Gitolite](https://github.com/sitaramc/gitolite) (Gitkeeper) 来管理你的 git 仓库的访问。

否则你必须设置一个chroot。

# .net - 未知软件异常 0xe0434352

> ID：15065755
> 
> 赞同：12
> 
> 时间：2013-02-25T11:18:40.690
> 
> 标签：.net, c#-4.0, runtime-error

当我尝试启动我的应用程序时，我收到以下错误： ![在此处输入图像描述](../Images/81864faafe3c70056e2965d656765bc4.png)

检查了应用程序日志，但没有错误消息。

这是由于任何框架版本或任何其他依赖项造成的吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-26T04:26:29.317

这是从 CLR 生成的所有错误。这几乎可以意味着任何事情。如果您想确切了解错误是什么，可以查看此网页：http: [//ig2600.blogspot.com/2009/07/finding-clr-exceptions-with-visual.html](http://ig2600.blogspot.com/2009/07/finding-clr-exceptions-with-visual.html)

他解释了如何找出真正的错误是什么。我觉得它很方便。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-30T19:34:12.623

最佳答案很棒。以下是它出现故障时的网站内容：

**通常会抛出和捕获异常，而您看不到它们。您可能知道如何在 Visual Studio 中进行调试，所以让我向您展示如何在 cdb 中进行调试。**

**没有什么例外，但你确定它发生在幕后——启动 cdb：**

C:\Program Files\Windows 调试工具 (x64)>cdb -pn consoleapplication3.exe

> ModLoad：000007fe`f7e90000 000007fe`f7eb4000
> C:\Windows\Microsoft.NET\Framework64\v4.0.20506\culture.dll (ff8.17a8)：中断指令异常 - 代码 80000003（第一次机会） *** 错误：符号文件可以找不到。默认为 C:\Windows\SYSTEM32\ntdll.dll 导出符号 - ntdll!DbgBreakPoint: 00000000`77b7d7b0 cc int 3 继续调试：0:004> g

例外 - 很多：

> (ff8.16dc)：CLR 异常 - 代码 e0434352（第一次机会）
> 
> (ff8.16dc)：CLR 异常 - 代码 e0434352（第一次机会）
> 
> (ff8.16dc)：CLR 异常 - 代码 e0434352（第一次机会）
> 
> (ff8.16dc)：CLR 异常 - 代码 e0434352（第一次机会）
> 
> (ff8.16dc)：CLR 异常 - 代码 e0434352（第一次机会）
> 
> (ff8.16dc)：CLR 异常 - 代码 e0434352（第一次机会）
> 
> (ff8.1860)：中断指令异常 - 代码 80000003（第一次机会）

打破 CLR 异常：

> 0:004> sxe clr
> 
> 0:004> 克
> 
> (ff8.16dc)：CLR 异常 - 代码 e0434352（第一次机会）
> 
> 在任何异常处理之前报告第一次机会异常。
> 
> 可以预期并处理此异常。
> 
> *** 错误：找不到符号文件。默认为 C:\Windows\system32\KERNELBASE.dll 导出符号 - KERNELBASE!RaiseException+0x3d: 000007fe`fdb8bb5d 4881c4c8000000 add rsp,0C8h

加载 sos（在 .Net 2/3 中使用 !loadby sos mscorwks）：

> 0:000> !loadby sos clr

查看堆栈：

> 0:000> !CLRStack
> 
> 未加载 clr.dll 的 PDB 符号
> 
> 操作系统线程 ID：0x16dc (0)
> 
> 子 SP IP 呼叫站点
> 
> 000000000096e6a8 000007fefdb8bb5d [HelperMethodFrame: 000000000096e6a8]
> 
> 000000000096e7c0 000007ff00170360
> 
> ConsoleApplication3.Program.ThrowAndCatchException()
> 
> 000000000096e810 000007ff001701fb
> 
> ConsoleApplication3.Program.Main(System.String[])
> 
> 000000000096ec90 000007feef474ca4 [GCFrame: 000000000096ec90]

查看例外：

> 0:000> !PrintException
> 
> 异常对象：0000000002c88c18
> 
> 异常类型：System.NotImplementedException
> 
> 消息：方法或操作未实现。
> 
> 内部异常：
> 
> StackTrace（生成）：
> 
> 堆栈跟踪字符串：
> 
> H结果：80004001
> 
> 0:000>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-04-14T15:37:29.340

在我这边，我真的很害怕这个错误，因为我的电脑上没有任何工作：尝试打开时设置正在关闭，Windows 快速搜索不起作用，Visual Studio 因这个错误而崩溃。

两个小时后，我发现在右下角的时钟附近出现了一种新的键盘语言：它是 ENG 和 . 而不是长名称。我切换到正常的，然后繁荣：看起来Windows不支持键盘语言：一切都恢复了正常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-16T12:18:02.087

对于这个问题的解决方案，在下面的网站上已经提出了 5 个解决方案。 [https://thegeekpage.com/how-to-solve-unknown-software-exception-0xe0434352/](https://thegeekpage.com/how-to-solve-unknown-software-exception-0xe0434352/)

我尝试了其中的第三个，问题就解决了。但是，我遇到了一个问题，解决方法如下：下载“从官方下载Microsoft .NET Framework修复工具”后，出现错误信息，提示空间不足。
我使用“7zip”软件将其解压缩到文件夹中，并在该文件夹中运行“FixDotNet.exe”。安装完成后问题得到解决。 [NetFxRepairTool-->FixDotNet.exe](https://i.stack.imgur.com/LLRx2.jpg)

# windows - 程序如何解冻？

> ID：15065756
> 
> 赞同：2
> 
> 时间：2013-02-25T11:19:04.977
> 
> 标签：windows, freeze

通常情况下，我的一个程序停止运行并且变得无响应。更臭名昭著的例子之一是 Windows 任务管理器：

![在此处输入图像描述](../Images/8a3c5d0f913491e567b8848709779fc8.png)

当一个程序像这样冻结时，它通常就这样挂起，然后我终止了该应用程序。但是，在某些情况下，应用程序会**解冻**并恢复，就好像什么都没发生一样。

这是如何运作的？

我会假设当一个程序像这样被卡住时，它除了死之外什么也做不了，否则它一开始就不会卡住。这个问题的答案*可能*取决于编写应用程序的语言，在这种情况下，请随意使用 Java 或 C 作为参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:25:44.220

如果程序在 UI 线程本身上运行需要很长时间（例如进行大量计算、等待 Web 回复）的操作，则 UI 线程会被卡住并且不能再执行消息泵送： [UI 线程同时运行消息泵和执行代码？](https://stackoverflow.com/questions/9963327/ui-thread-both-running-message-pump-and-executing-code)

发生这种情况时，可能会出现“无响应”消息。如果长期任务完成，则程序“解冻”。

# batch-file - 在一个语句中将 stdout 和 stderr 重定向到同一个文件（批处理）

> ID：15065757
> 
> 赞同：1
> 
> 时间：2013-02-25T11:19:14.543
> 
> 标签：batch-file

我正在尝试将 stdout 和 stderr 重定向到同一个文件，执行以下操作：

`dir c:\*.mp3 c:\*.mpa c:\*.asf c:\*.avi c:\*.flv c:\*.mov c:\*.mp4 c:\*.mpg c:\*.swf c:\*.vob c:\*.wmv /s/b > out.file.nlm.txt 2>&1`

这不起作用-我没有在文件中收到“找不到文件”错误-但是当我将其分解为多个语句时，例如：

```
dir c:\*.mp3 /s/b> out.file.nlm.txt 2>&1
dir c:\*.mpa /s/b >> out.file.nlm.txt 2>&1
dir c:\*.asf /s/b >> out.file.nlm.txt 2>&1 
```

它工作正常。我怎样才能将它组合成一个语句？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:22:31.450

您没有使用原始语句捕获“未找到文件”，因为它不存在:-)

DIR 命令默认单独列出每个文件掩码的结果，但只有在没有找到任何掩码的文件时才会出现“找不到文件”消息。

如果您应用排序选项，则更直观`/ON`，并且多个扩展名混合在一起。很明显，最终的错误状态和错误消息适用于累积结果。

如果您需要一条指示哪些扩展不存在的消息，那么就像您所做的那样，将其分解为多个 DIR 命令是可行的方法。Andriy 展示了如何将命令括在括号中，这样您只需重定向一次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:36:35.650

您可以将`dir`命令括在括号中的块中，并将重定向应用于整个块：

```
(
dir c:\*.mp3 /s/b
dir c:\*.mpa /s/b
dir c:\*.asf /s/b
) > out.file.nlm.txt 2>&1 
```

在命令提示符下，您可以将命令放在用`&`s 分隔它们的同一行：

```
(dir c:\*.mp3 /s/b & dir c:\*.mpa /s/b & dir c:\*.asf /s/b) >out.file.nlm.txt 2>&1 
```

# wpf - 如何确定控件何时对用户可见？

> ID：15065758
> 
> 赞同：5
> 
> 时间：2013-02-25T11:19:24.920
> 
> 标签：wpf

我想知道如何确定控件何时对用户可见，何时不可见？

假设我正在编写一个扩展 a 的自定义控件`TextBox`，我想知道什么时候可以看到在可见更改时触发的处理程序内执行一些自定义逻辑。

怎么做？如何确定控件是否对用户可见？例如，扩展 a 的自定义控件`TextBox`可以在 a 内部`Button`并且`Button`可以接收`Visibility.Collapsed`，因此它的所有内部嵌套控件都是不可见的，这就是我想知道的。无论为 Visibility 属性设置什么值，如何确定是否可见？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T11:23:14.573

你应该使用[`UIElement.IsVisibleChanged`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.isvisiblechanged.aspx)事件。它发生在 [`IsVisible`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.isvisible.aspx)只读依赖属性的值更改并指示元素在 UI 上的可见性时。
[`UIElement.LayoutUpdated`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.layoutupdated.aspx)- 可用于重新计算控件可见性的事件。

*更新。* 似乎完全重复：
[在 WPF 中，如何确定控件是否对用户可见？](https://stackoverflow.com/questions/1517743/in-wpf-how-can-i-determine-whether-a-control-is-visible-to-the-user)

# jquery - jquery：取消淡入淡出然后淡入淡出

> ID：15065763
> 
> 赞同：0
> 
> 时间：2013-02-25T11:19:39.627
> 
> 标签：jquery, fadeto

我有一个最初显示的 div，然后当鼠标离开 div 时，它会在 10 秒内慢慢淡出（使用淡入淡出）。当鼠标重新进入时，我需要取消淡入淡出（如果它仍在进行中）并将 div 淡入。

我知道（认为） .stop() 是我的救星。它正确地停止了 div fadeTo 但是对于我的生活，我无法让 fadeIn 开始。

这是我所拥有的：

```
$(document).on('mouseenter', '#player', function(){
        $(this).stop().fadeIn('fast');
    });

    $(document).on('mouseleave', '#player', function(){
        $(this).stop().fadeTo(10000,0.2);
    }); 
```

[http://jsfiddle.net/FraserHart/SMQ4M/](http://jsfiddle.net/FraserHart/SMQ4M/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:22:38.773

我解决了。

我需要使用fadeTo 淡入而不是fadeIn，因为使用fadeTo 淡出时，它只会调整不透明度，因此仍将其视为可见：

```
$(document).on('mouseenter', '#player', function(){
        $(this).stop().fadeTo('fast',1);
    });

    $(document).on('mouseleave', '#player', function(){
        $(this).stop().fadeTo(10000,0.2);
    }); 
```

# c# - Windowsphone 的 Googledrive 应用程序？

> ID：15065765
> 
> 赞同：0
> 
> 时间：2013-02-25T11:19:53.340
> 
> 标签：c#, windows-phone-8, google-drive-api

我正在使用 SDK 中通过 HTTPWebRequest 提供的 URL 为 Windows Phone 开发 Google Drive 应用程序。是否有 WP8 的 API 来开发 Google Drive 应用程序？

我下载了所有内容，没有任何问题。当我上传 MIMEtype 时，它​​并不总是正确上传，而是作为八位字节流上传。

请任何人帮助如何使用 C# 代码上传到 Google Drive？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:51:52.247

检查 Google Drive SDK 的“上传文件”部分：

[https://developers.google.com/drive/manage-uploads](https://developers.google.com/drive/manage-uploads)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T06:48:32.443

我得到了解决方案，实际上我正在使用 string[] HeaderKeys = { "X-Upload-Content-Type" }; string[] HeaderValues = { "application/vnd.google-apps.folder" } 用于发布方法，这里我使用 request.contentType 代替 X-Upload-Content-Type 现在我正在上传所有具有正确流的文件。

# iphone - 即使应用程序关闭iOS，如何继续从套接字监听

> ID：15065769
> 
> 赞同：3
> 
> 时间：2013-02-25T11:20:03.970
> 
> 标签：iphone, ios, sockets, tcp, udp

不过，我想与嵌入设备`TCP/IP`进行通信，通过通信部分完成。我曾经`GCDAsyncUdpSocket`沟通，当应用程序在前台时一切顺利，但即使应用程序关闭，我也想做一些沟通。在应用程序关闭后，我成功地将数据发送到设备，因为我`dispatch_async(dispatch_get_global_queue(0, 0)` 在 `applicationDidEnterBackground`事件中使用了在应用程序关闭后继续推送数据。即使应用程序关闭，我也想监听端口。我设置了一个端口来监听我在 app 中编写委托方法`AppDelegate.m`。

```
- (void)udpSocket:(GCDAsyncUdpSocket *)sock didReceiveData:(NSData *)data
  fromAddress:(NSData *)address withFilterContext:(id)filterContext 
```

监听一个端口但它永远不会被调用，缺少什么？应用程序关闭后是否可以监听端口？

# c# - Visual Studio“重命名”重构

> ID：15065772
> 
> 赞同：4
> 
> 时间：2013-02-25T11:20:15.510
> 
> 标签：c#, visual-studio, visual-studio-2012

目前我必须在 VS2012 中编写 C# 代码，（之前是：Java（Eclipse，IDEA））。

可能是我是个奇怪的人，但我喜欢当类名 == 类文件名时。

为什么在 VS2012 中没有*重命名类文件*的选项与我*重命名类名*相同？（或者我找不到它）

我知道 C# 编译器不关心匹配类名和类文件名，但我想这样做。如果它们不同，我无法通过文件名找到类，这让我非常恼火aaaargh。

请帮帮我，我在VS之后完成工作很累

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:48:34.483

如果您先重命名文件，Visual Studio 通常会提供重命名类以匹配。

我不确定确切的情况是什么，但如果你坚持每个文件一个类，它会在大多数情况下工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:31:14.713

您可以使用 ReSharper。这个插件可以选择重命名文件以匹配类名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:34:03.220

这是 VS 遗憾地没有的功能。您可以提供一些重构插件，例如 Resharper 或 CodeRush 或 Refactor！临...

他们都付出了代价，并拥有自己的粉丝群。据我所知，CodeRush 是一个功能非常有限的免费版本，但也许“重命名文件”就是其中之一，你需要尝试一下。

另一种选择是为您找到一个扩展（或开发一个），只需前往[Visual Studio Gallery](http://visualstudiogallery.msdn.microsoft.com/)即可找到一个。=)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-24T00:03:27.603

您只需指向要更改的对象，右键单击并使用 Refactor -> Rename。将出现一个弹出重构窗口。选择您的选项，然后单击“确定”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-09T20:37:30.833

从[罗林的](https://stackoverflow.com/a/15066275/7916599)回答中解决这一行（因为我没有足够的代表来发表评论）：

> 我不确定确切的情况是什么，但如果你坚持每个文件一个类，它会在**大多数情况下工作**

**澄清一下，只要在 namespace 中定义类**，Visual Studio 就会在您更改文件名时提供重命名和重构您的类。如果您选择不使用命名空间，您将无法访问此 IDE 的优点。至少在 VS 2017 Pro（本答案的最新版本）之前都是如此。

# scala - Scala 中 List()、Array() 和 new List()、new Array() 的区别

> ID：15065779
> 
> 赞同：4
> 
> 时间：2013-02-25T11:20:34.463
> 
> 标签：scala

我知道当您键入时：

```
val list = List(2,3) 
```

您正在访问返回 List 的 List 对象的 apply 方法。我无法理解的是，为什么当 List 类是抽象类因此不能直接实例化（new List() 不会编译）时这可能？我还想问一下有什么区别：

```
val arr = Array(4,5,6) 
```

和

```
val arr = new Array(4, 5, 6) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-25T11:33:43.730

类`List`是`sealed`和`abstract`。它有两个concreate实现

1.  `Nil`代表一个空列表
2.  `::[B]`它表示一个带头和尾的非空列表。[`::[B]`在文档中](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.%24colon%24colon)

当您调用`List.apply`它时，它会跳过一些环节并为您提供`::[B]`案例类的实例。

关于数组：`new Array(4, 5, 6)`会抛出编译错误，因为数组的构造函数是这样定义的：`new Array(_length: Int)`。伴随对象的`apply`方法`Array`使用参数来创建一个新的实例`Array`（在 的帮助下`ArrayBuilder`）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T11:37:13.840

我开始写，确定这一点的简单方法是查看您正在调用的方法的来源，这些方法可从[ScalaDoc 获得](http://www.scala-lang.org/api/current/index.html)。但是，实际构建列表所经历的各种间接级别都掩盖了“简单”一词！如果您愿意，值得一看，从定义如下`apply`的对象中的方法开始：`List`

```
override def apply[A](xs: A*): List[A] = xs.toList 
```

您可能知道也可能不知道表单的参数在`xs : A*`内部被视为 a `Seq`，这意味着我们正在调用`toList`a 上的方法，该方法`Seq`在`TraversableOnce`. 然后，这委托给一个泛型方法，该方法查找实际构造列表`to`的隐式方法 。`CanBuildFrom`所以你得到的是一些`List`由`CanBuildFrom`. 你实际得到的是 a `scala.collection.immutable.$colon$colon`，它实现了一个单链表。

幸运的是， 的行为`Array.apply`更容易查找：

```
 def apply[T: ClassTag](xs: T*): Array[T] = {
    val array = new Array[T](xs.length)
    var i = 0
    for (x <- xs.iterator) { array(i) = x; i += 1 }
    array
  } 
```

因此，`Array.apply`只需委托给`new Array`然后适当地设置元素。

# ios - Audio Queue Interface可以处理40ms Audio Frame吗？

> ID：15065783
> 
> 赞同：0
> 
> 时间：2013-02-25T11:20:51.437
> 
> 标签：ios, objective-c, cocoa-touch, audioqueue, audioqueueservices

我正在尝试以 40 毫秒的时间段录制音频。Audio Queue Interface可以处理40ms Audio Frame吗？如果“是”，那么我们如何才能实现呢？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T13:46:13.013

是的，有可能，您需要相应地设置配置 AudioQueue，

基本上 AudioQueue 缓冲区大小，必须设置为 40 毫秒，所以它会在附近，

```
int AQRecorder::ComputeRecordBufferSize(const AudioStreamBasicDescription *format, float seconds)
{
    int packets, frames, bytes = 0;
    try {
        frames = (int)ceil(seconds * format->mSampleRate);

        if (format->mBytesPerFrame > 0)
            bytes = frames * format->mBytesPerFrame;
        else {
            UInt32 maxPacketSize;
            if (format->mBytesPerPacket > 0)
                maxPacketSize = format->mBytesPerPacket;    // constant packet size
            else {
                UInt32 propertySize = sizeof(maxPacketSize);
                XThrowIfError(AudioQueueGetProperty(mQueue, kAudioQueueProperty_MaximumOutputPacketSize, &maxPacketSize,
                                                    &propertySize), "couldn't get queue's maximum output packet size");
            }
            if (format->mFramesPerPacket > 0)
                packets = frames / format->mFramesPerPacket;
            else
                packets = frames;   // worst-case scenario: 1 frame in a packet
            if (packets == 0)       // sanity check
                packets = 1;
            bytes = packets * maxPacketSize;
        }
    } catch (CAXException e) {
        char buf[256];
        return 0;
    }   
    return bytes;
} 
```

并设置格式，

```
void AQRecorder::SetupAudioFormat(UInt32 inFormatID)
{
    AudioStreamBasicDescription sRecordFormat;
    FillOutASBDForLPCM (sRecordFormat,
                        SAMPLING_RATE,
                        1,
                        8*BYTES_PER_PACKET,
                        8*BYTES_PER_PACKET,
                        false,
                        false
                        );
    memset(&mRecordFormat, 0, sizeof(mRecordFormat));

    mRecordFormat.SetFrom(sRecordFormat);
} 
```

就我而言，这些宏的值是，

```
#define SAMPLING_RATE 16000
#define kNumberRecordBuffers    3
#define BYTES_PER_PACKET 2 
```

# javascript - JavaScript 正则表达式提取字符串的不同部分

> ID：15065784
> 
> 赞同：0
> 
> 时间：2013-02-25T11:20:57.913
> 
> 标签：javascript, regex, match, regex-negation

这是一个有趣的 - 我正在寻找一种 JavaScript 正则表达式解决方案来从字符串中提取不同的部分。非常感谢任何输入。

例子 -

```
";1XYZ123_UK;1;2.3;evt14=0.0|evt87=0.0,;1XYZ456_UK;4;5.6;evt14=0.0;fly;0;0;;;"
```

我试图从字符串中提取这些位而忽略其余部分-

```
“1XYZ123_UK;2;3;1XYZ456_UK;4;5.6;”</pre>

基本上提取以 1XYZ 开头的任何内容，直到遇到“evt”。

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:30:12.603

```
var s= ";1XYZ123_UK;1;2.3;evt14=0.0|evt87=0.0,;1XYZ456_UK;4;5.6;evt14=0.0"

s = s.replace(/(evt.+?(?:\||;|$))/g, "");

console.log(s) // ";1XYZ123_UK;1;2.3;1XYZ456_UK;4;5.6;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:35:19.723

```
var s = ';1XYZ123_UK;1;2e.3;evt14=0.0|evt87=0.0,;1XYZ456_UK;4;5.6;evt14=0.0';
var r = s.match(/1XYZ((?!evt).)*/g); 
```

会给你你想要的字符串：

```
["1XYZ123_UK;1;2e.3;", "1XYZ456_UK;4;5.6;"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:29:59.170

使用组 ( `(...)`) 捕获部分匹配字符串。成功匹配后，可以通过从`String.match`or返回的数组访问捕获的子字符串`Regex.exec`。

数组的第一个元素（索引 0）是整个匹配，下一个（索引 1）是第一个捕获。

例如。

```
var re = /1XY(.*)evt/
var result = theString.match(re) 
```

那么，如果有匹配项（`result`不为空），那么

```
result[0] 
```

将是整个比赛（开始`1XY`和结束`evt`），而

```
result[1] 
```

将是这些字符串之间的文本。

# arrays - 使用 Postgres 数组选择数据

> ID：15065785
> 
> 赞同：0
> 
> 时间：2013-02-25T11:21:02.137
> 
> 标签：arrays, postgresql

我有一个表，其中包含`user_ids`一个 Postgres 数组列。

我需要`messages`从另一个表中选择所有列，其中列`user_id`是给定数组中的一个 ID。

在伪 sql 中：

```
select users.*
from users
where id IN a_postgres_array 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:15:20.900

您可以使用`ANY`运算符。从您的样本中：

```
select users.*
from users
where id =ANY(a_postgres_array) 
```

当使用两个表时，它可能是一个`JOIN`，例如：

```
SELECT users.*
FROM users INNER JOIN table_with_array ON users.id =ANY(table_with_array.a_postgres_array) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:36:28.247

```
select users.*
from users
where id IN (
    select unnest(a_postgres_array)
    from t
    where columnX = some_value
    ) 
```

# php - 使用多个插入和多个 LAST_INSERT_ID() 的 Sql 查询不起作用

> ID：15065786
> 
> 赞同：2
> 
> 时间：2013-02-25T11:21:06.970
> 
> 标签：php, mysql, last-insert-id

大家好，我正在尝试使用 1 个 sql 查询将问题和答案存储在 2 个表中：

```
INSERT INTO questions ( question, level_ID ) VALUES ( 'hello', '1'); INSERT INTO answers (questions_ID, answer, ok) VALUES (LAST_INSERT_ID(),'doei',0), (LAST_INSERT_ID(),'ciao',1); 
```

如果我在 SQL 框中执行 PHPMyAdmin 中的代码，它工作得很好，但是如果我在我的 PHP 代码生成脚本中执行它，它会返回以下错误：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法，以便在第 2 行的 'INSERT INTO answers (questions_ID, answer, ok) VALUES (LAST_INSERT_ID(),'doei',0' 附近使用

我看不出我做错了什么……有人吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:23:52.637

它不是 SQL 查询，而是一组查询。
PHPmyAdmin 只是拆分您的集合，然后分别执行查询。

所以你必须这样做。
一个接一个地运行它们。

不要改变任何东西。不需要额外的变量或其他任何东西。
只需在 2 个单独的连续调用中一个接一个地运行相同的查询。
就这样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:10:20.697

从[手册](http://dev.mysql.com/doc/refman/5.5/en//information-functions.html#function_last-insert-id)：

> **生成的 ID 在每个连接的基础上在服务器中维护**。这意味着函数返回给给定客户端的值是为影响该客户端的 AUTO_INCREMENT 列的最新语句生成的第一个 AUTO_INCREMENT 值。此值不受其他客户端的影响，即使它们生成自己的 AUTO_INCREMENT 值。这种行为确保每个客户端都可以检索自己的 ID，而不用担心其他客户端的活动，也不需要锁或事务。

因此，只要使用相同的连接，*就不需要将所有查询打包到 SQL 数据库调用中。*但是如果你*想*这样做，你需要确保你的数据库库和函数支持这个特性。

# dynamic - 如何使用 jQuery 将点击事件挂钩到动态创建的锚标记

> ID：15065788
> 
> 赞同：1
> 
> 时间：2013-02-25T11:21:07.210
> 
> 标签：dynamic, anchor, jquery

在一个 jQuery 循环中，我试图将一个单击事件附加到一个动态创建的锚标记，该标记包含在一个 LI 元素中。LI 本身是在静态 UL 元素内动态创建的。由于某种原因，单击锚点时不会触发任何内容。这是有问题的代码的简化版本：

```
$.each($.MyProject.cities, function (index, city) {
    $('<li></li>').html($("<a></a>").attr("href", "javascript:void(0)").click(function (event) {
        console.info("Anchor clicked!");
        event.preventDefault();
        return false;
    }).html($("<span></span>").text(city.FullName).attr("class", "autoText"))).appendTo($("#visiblecities"));
}); 
```

其中 visiblecities 是 UL 元素的 id，cities 是循环在其上迭代的集合。

知道为什么单击事件不起作用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:29:04.383

使用[事件委托](http://api.jquery.com/on/#direct-and-delegated-events)设置一个事件处理程序，该处理程序将对所有`<a>`元素做出反应，即使它们是在代码执行*后添加的：*

```
$('#visibleCities').on('click', 'a', function(event) {
    console.info('Anchor clicked!');
    event.preventDefault();
    return false;
}); 
```

不过，正如 gdoron 在评论中提到的那样，您的`<a>`元素目前没有任何内容，因此它们实际上是不可点击的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:27:21.743

使用`.on`.

```
$('a').on('click',function(){
   //code here
}); 
```

尝试

```
$('li a').on('click',function()
{
    //code here
});

$.each($.MyProject.cities, function (index, city)
{
    $('<li></li>').html($("<a></a>").attr("href", "javascript:void(0)")).appendTo($("#visiblecities"));
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:23:47.923

使用实时方法而不是点击

```
 $.each($.MyProject.cities, function (index, city) {
        $('<li></li>').html($("<a></a>").attr("href", "javascript:void(0)").live("click",function (event) { console.info("Anchor clicked!"); event.preventDefault(); return false; })).appendTo($("#visiblecities"));
    }); 
```

# c# - 带有 WPF 的 SlimDX RawInput

> ID：15065795
> 
> 赞同：3
> 
> 时间：2013-02-25T11:21:30.190
> 
> 标签：c#, wpf, slimdx, raw-input

我正在尝试使用 SlimDX 和 RawInput 为太空游戏设置键盘和鼠标控件。我目前的代码如下：

```
Device.RegisterDevice(UsagePage.Generic, UsageId.Keyboard, DeviceFlags.None);
Device.KeyboardInput += new EventHandler<KeyboardInputEventArgs>(keyboardInput);
Device.RegisterDevice(UsagePage.Generic, UsageId.Mouse, DeviceFlags.None);
Device.MouseInput += new EventHandler<MouseInputEventArgs>(mouseInput); 
```

但是我在这里读到：[http](http://code.google.com/p/slimdx/issues/detail?id=785) ://code.google.com/p/slimdx/issues/detail?id=785 ，对于 WPF，我需要使用不同的重载`Device.RegisterDevice()`，以及使用分配 HandleMessage`Device.HandleMessage(IntPtr message)`

我发现 RegisterDevice() 的正确重载是：

```
RegisterDevice(UsagePage usagePage, UsageId usageId, DeviceFlags flags, IntPtr target, bool addThreadFilter) 
```

但是，我无法解决的是：

1）既然我必须使用一个目标，我打算将什么设置为目标？

2) 我从哪里得到这个 IntPtr 消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:03:37.133

这可能会有所帮助，我做这个是为了打乒乓球。希望能帮助到你

```
 private void Form1_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Down)
        {
            spaceKeyDown = true;
        }
        if (e.KeyCode == Keys.Up)
        {
            spaceKeyUp = true;
        }
        if (e.KeyCode == Keys.W)
        {
            spaceKeyW = true;
        }
        if (e.KeyCode == Keys.S)
        {
            spaceKeyS = true;
        }
        if (direction == 0)
        {
            if (e.KeyCode == Keys.Space)
            {
                Random rand = new Random();
                direction = rand.Next(1, 5);
            }
        }
    }

    private void Form1_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Down)
        {
            spaceKeyDown = false;
        }
        if (e.KeyCode == Keys.Up)
        {
            spaceKeyUp = false;
        }
        if (e.KeyCode == Keys.W)
        {
            spaceKeyW = false;
        }
        if (e.KeyCode == Keys.S)
        {
            spaceKeyS = false;
        }
    }
    private void timer1_Tick(object sender, EventArgs e)
    {
        if (spaceKeyDown == true)
        {
            if (p2y < picPicture.Height - Paddle2.Height)
                p2y += 15;
        }
        if (spaceKeyUp == true)
        {
            if (p2y > 0)
                p2y -= 15;
        }
        if (spaceKeyS == true)
        {
            if (p1y < picPicture.Height - Paddle1.Height)
                p1y += 15;
        }
        if (spaceKeyW == true)
        {
            if (p1y > 0)
                p1y -= 15;
        }
    } 
```

# java - 在 Azure 中从 Java 配置专用 Memcached 缓存

> ID：15065796
> 
> 赞同：0
> 
> 时间：2013-02-25T11:21:33.033
> 
> 标签：java, eclipse, azure

我已按照Java 中在 Azure 上设置 Memcached的[说明进行操作...](http://msdn.microsoft.com/en-us/library/windowsazure/jj870767.aspx)

我的问题是我在我的 csdef 文件中为专用缓存工作者角色输入了什么作为入口点？

目前，它使用“默认”run.cmd 在本地工作，它只是监视 java 进程是否启动。在 azure 上运行时，这将不起作用，因为 java 进程将不存在（它从应用程序工作者角色获取此 java 进程 - 实际运行应用程序的角色）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T18:26:48.797

您可能需要将自己的 JRE 上传到您的 WorkerRole 并从 ProgramEntryPoint 启动 Java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T22:52:07.463

所以我最终计算出*调用*入口点的 exe 的名称，并创建了由 run.cmd 监控的可执行文件。所以 run.cmd 监视调用它的那个可执行文件。它很粗糙，但它起作用了。

# android - 谷歌地图不适用于设备和模拟器

> ID：15065798
> 
> 赞同：0
> 
> 时间：2013-02-25T11:21:38.047
> 
> 标签：android, google-maps

我按照[链接](https://developers.google.com/maps/documentation/android/start#add_a_map)中的所有说明进行操作。但是在那之后，当我启动一个项目并尝试在模拟器上运行时，它会显示更新“除非您更新 google play 服务，否则此应用程序将无法成功运行”并提供了一个更新按钮，然后当我我点击应用程序崩溃了。

如果在具有 2.3.6 版本的设备中运行，它会抛出异常并且日志如下：

Java.lang.ClassNotFoundException:android.view.fragementin loader dalvik.system.Pathclassloader

. 有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:32:59.187

似乎您正在尝试在不支持此功能的设备上使用片段（没有支持库）。

你给的链接里有一句话：

> 请注意，下面的代码仅对在面向 Android API 12 或更高版本的应用程序中测试您的设置有用

[但是您的 2.3.x（在官方文档](http://developer.android.com/guide/topics/manifest/uses-sdk-element.html)中找不到 2.3.6 版本号）是最高 API 级别 9。

关于模拟器：它不能在开箱即用的模拟器中运行。这有点棘手，但有一些人[让它工作](https://stackoverflow.com/questions/14040185/running-google-maps-v2-on-android-emulator)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:39:16.120

**Android 工具 --> 添加支持库**
应该可以解决这个问题。

# ruby - 无法解决依赖关系：地理距离

> ID：15065802
> 
> 赞同：1
> 
> 时间：2013-02-25T11:21:47.583
> 
> 标签：ruby, rubygems

安装此 gem 时： [https ://rubygems.org/gems/geo-distance](https://rubygems.org/gems/geo-distance)

通过红宝石，我得到：

```
Unable to resolve dependencies: geo-distance requires geo_units (~> 0.2.4.1); geo_calc requires sugar-high (>= 0.6.0), geo_units (>= 0.3.1.1) 
```

我已经尝试安装该特定版本，但仍然遇到同样的问题。有人可以推荐替代方案和/或如何解决此问题吗？谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-25T11:42:37.680

也许您应该考虑使用 Bundler。

**安装**

```
gem install bundler 
```

**宝石**文件（文件）

```
source 'https://rubygems.org'

gem "geo-distance", "~> 0.2.0" 
```

**命令**

```
bundle install 
```

**编辑**

我尝试在没有 Bundler 的情况下安装，它可以工作。

```
gem install sugar-high geo_units geo-distance 
```

# jquery - Cufon & jQuery addClass 错误

> ID：15065803
> 
> 赞同：0
> 
> 时间：2013-02-25T11:21:47.643
> 
> 标签：jquery, cufon

我有一个带有 cufon 文本替换的简单无序列表，我正在使用以下 jQuery 来 addClass .selected （它基本上突出显示最近单击的列表项），并且还从列表项的其余部分中删除了类。

这在没有 cufon 的情况下可以正常工作，并且是非常基本的 JS，但是使用 cufon 它会添加但不会删除类。

我尝试更改为解决某些 cufon 错误的严格 doctype，在 cufon 调用之前和之后移动代码，并修改 cufon 代码本身，但仍然没有得到任何非常感谢的建议。

```
$(document).ready(function(){

    $("ul#list li a").click(function() {
        $("ul#list li a").removeClass("selected");
        $(this).addClass("selected");       
    });

}); 
```

# javascript - 禁止自动填充建议

> ID：15065807
> 
> 赞同：0
> 
> 时间：2013-02-25T11:22:00.890
> 
> 标签：javascript, browser

有没有办法通过 javascript 抑制自动填充建议。原因是我坚持使用现有的 ajax 建议框，而我的用户从错误的建议框中进行选择，因为正确的建议框需要一秒钟的时间才能出现（因为 ajax）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:46:58.527

是的。使用`autocomplete="off"`属性。以前在这里回答：[是否有 W3C 有效的方法来禁用 HTML 表单中的自动完成功能？](https://stackoverflow.com/questions/582244/is-there-a-w3c-valid-way-to-disable-autocomplete-in-a-html-form)

# titanium-mobile - Titanium：需要 HTTP 连接超时状态码

> ID：15065809
> 
> 赞同：1
> 
> 时间：2013-02-25T11:22:04.153
> 
> 标签：titanium-mobile, appcelerator-mobile

我们有什么办法可以准确地找出 HTTP 连接超时状态码吗？HTTP 连接超时和错误的请求 url 都给出响应代码 0。有没有办法唯一地识别连接超时？

```
 var self = Ti.UI.createWindow({
   backgroundColor : '#ffffff'
 });
 var url = 'https://www.google.com';
 if (Ti.Network.online) {
 var xhr = Ti.Network.createHTTPClient({
 timeout : 1000,
 validatesSecureCertificate : false
 });
 xhr.onload = function(e) {

 alert('onload:');
 };
 xhr.onerror = function(e) {
 alert('e.error:' + e.error + ':status:' + xhr.status);
 };
 xhr.open('GET', url);
 xhr.send(); }
 self.open(); 
```

上面的代码在 iphone 的情况下将 TimedOut 状态代码设为 0，而不是像 408。但在 Android TimedOut 的情况下没有发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-10T09:42:51.417

在 Android 中，有两种情况需要考虑超时。观察到 2 种错误，

在日志中，案例 1：

> TiHTTPClient: (TiHttpClient-9) [7700,93840] HTTP 错误 (java.net.SocketTimeoutException): timeout [ERROR] : TiHTTPClient: java.net.SocketTimeoutException: timeout
> 
> alert('e.error:' + e.error + ':status:' + xhr.status); 输出为
> 
> e.错误：超时：状态：0 ...

案例 2：TiHTTPClient: (TiHttpClient-14) [53148,203910] HTTP 错误 (java.net.SocketTimeoutException): SSL 握手超时 [ERROR] : TiHTTPClient: java.net.SocketTimeoutException: SSL 握手超时

> alert('e.error:' + e.error + ':status:' + xhr.status); 输出为
> 
> e.error：SSL 握手超时：状态：0
> 
> 所以通过检查，
> 
> ((e.error).toLowerCase() == "超时" || (e.error).toLowerCase() == "sslhandshake 超时"),

我们可以捕获超时场景并相应地显示正确的消息。

# html - 如何在滚动之前创建全屏 div？

> ID：15065813
> 
> 赞同：1
> 
> 时间：2013-02-25T11:22:15.993
> 
> 标签：html, scroll, fullscreen, viewport

我是这个网站的新手，所以很抱歉，如果我踩到脚趾，但我一直在尝试创建一个页面，在该页面上你会遇到一个全屏标题，高度和宽度为视口的 100%，但是你仍然能够滚动到下面的内容。

完美的例子是[http://www.bklynsoap.com/](http://www.bklynsoap.com/)

我试图通过在绝对定位的 Div 上创建 100% 的高度和宽度来使用纯 CSS 来实现这一点，但这隐藏了下面的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-20T20:19:35.567

在此不需要绝对位置。您的示例使用 javascript 来更改 div 的大小和里面的内容。

你可以用纯 CSS 做到这一点

例子：

```
<html>
   <body>
     <section class="fullscreen"></section>
     <section class="other-content></section>
   </body>
</html>

html {
 height: 100%;
}

body {
 height: 100%;
}

.fullscrenn {
  height: 100%;
  width: 100%;
  background: url('../images/fullscreen.jpg') no-repeat center center; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
   background-size: cover;
} 
```

# awk - 用 awk 比较文件

> ID：15065818
> 
> 赞同：9
> 
> 时间：2013-02-25T11:22:26.020
> 
> 标签：awk, comparison, compare, two-columns

嗨，我有两个相似的文件（都有 3 列）。我想检查这两个文件是否包含相同的元素（但以不同的顺序列出）。首先，我只想比较第一列

文件1.txt

```
"aba" 0 0 
"abc" 0 1
"abd" 1 1 
"xxx" 0 0 
```

文件2.txt

```
"xyz" 0 0
"aba" 0 0
"xxx" 0 0
"abc" 1 1 
```

我怎样才能使用 awk 做到这一点？我试图环顾四周，但我发现的只是复杂的例子。如果我还想在比较中包括其他两列怎么办？输出应该给我匹配元素的数量。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-25T11:35:02.733

要打印两个文件中的公共*元素：*

```
$ awk 'NR==FNR{a[$1];next}$1 in a{print $1}' file1 file2
"aba"
"abc"
"xxx" 
```

解释：

`NR`和`FNR`是`awk`变量，分别存储当前文件的总记录数和记录数（默认记录为一行）。

```
NR==FNR # Only true when in the first file 
{
    a[$1] # Build associative array on the first column of the file
    next  # Skip all proceeding blocks and process next line
}
($1 in a) # Check in the value in column one of the second files is in the array
{
    # If so print it
    print $1
} 
```

如果要匹配整行，请使用`$0`：

```
$ awk 'NR==FNR{a[$0];next}$0 in a{print $0}' file1 file2
"aba" 0 0
"xxx" 0 0 
```

或一组特定的列：

```
$ awk 'NR==FNR{a[$1,$2,$3];next}($1,$2,$3) in a{print $1,$2,$3}' file1 file2
"aba" 0 0
"xxx" 0 0 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-25T11:41:00.607

要打印匹配元素的数量，这是一种使用方法`awk`：

```
awk 'FNR==NR { a[$1]; next } $1 in a { c++ } END { print c }' file1.txt file2.txt 
```

使用您输入的结果：

```
3 
```

* * *

如果您想添加额外的列（例如，第一列、第二列和第三列），请使用[伪多维数组](http://www.gnu.org/software/gawk/manual/html_node/Multi_002ddimensional.html#Multi_002ddimensional)：

```
awk 'FNR==NR { a[$1,$2,$3]; next } ($1,$2,$3) in a { c++ } END { print c }' file1.txt file2.txt 
```

使用您输入的结果：

```
2 
```

# php - Cibonfire Template::render() like $this->load->view()

> ID：15065819
> 
> 赞同：1
> 
> 时间：2013-02-25T11:22:27.897
> 
> 标签：php, codeigniter, templates, codeigniter-2, hmvc

是否可以通过获取html源代码`Template::render()`？哪个看起来像`$this->load->view()`？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:29:49.663

方法[render()](http://cibonfire.com/docs/files/libraries/template-php.html#Template.render)是这样的：

```
public static function render( $layout = null ) 
```

它的回报是`void`如此简单的答案不。它没有这样做的选项，也不返回任何输出。

如果你想获得 HTML 输出，你想使用的是[load_view()](http://cibonfire.com/docs/files/libraries/template-php.html#Template.load_view)方法，如下所示：

```
Template::load_view('you_view_name', $data, '', true, $html);
echo $html; 
```

请注意，您的参数将与上述不同，因此请检查链接的文档以将它们设置为您想要的。

# javascript - Windows 8 Javascript 将 Canvas 设置为填充屏幕

> ID：15065820
> 
> 赞同：1
> 
> 时间：2013-02-25T11:22:31.977
> 
> 标签：javascript, html5-canvas, windows-store-apps, winjs

我正在尝试使用 Windows 8 / WinJS 创建 HTML5 画布。这是我所拥有的：

```
 var body = document.getElementById("body");
    var canvas = document.createElement("canvas");
    canvas.id = "myCanvas";

    body.appendChild(canvas);

    var canvasContext = canvas.getContext("2d");

    canvas.width = document.width;
    canvas.height = document.height;

    canvasContext.fillStyle = "#f00";

    canvasContext.fillRect(canvas.width - 100, canvas.height - 50, 100, 50);
    console.log("canvas width " + canvas.width + ",  height " + canvas.height); 
```

其中大部分是直接来自教程，但对于我见过的所有教程，宽度和高度都设置为硬编码数字，例如：

```
canvas.width = 800;
canvas.height = 600; 
```

诚然，这确实有效，但我希望画布与屏幕一样大，无论分辨率如何。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T14:31:43.503

您可以使用带有和视口高度 CSS 值的视口来执行此操作（请参阅[此处](http://css-tricks.com/viewport-sized-typography/)的一些信息）

在这种特定情况下，您可以这样做：

```
canvas.style.width = "100vw";
canvas.style.height = "100vh"; 
```

此解决方案的优点是您不必加载第 3 方库，例如 JQuery 以调整到全宽/全高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:57:14.853

“屏幕”是指浏览器窗口的大小吗？

如果是这样，您可以使用 window.outerWidth 和 window.outerHeight 代替 document.width 和 document.height。或者如果你使用 jQuery：$(window).width() 和 $(window).height()。

此外，您还想在窗口上监听 resize 事件，以便在调整浏览器大小时重新初始化画布。

# android - 我应该在哪里写一个临时文件？

> ID：15065827
> 
> 赞同：5
> 
> 时间：2013-02-25T11:22:44.123
> 
> 标签：android

在 android 设备中，外部存储器可能存在也可能不存在。

我正在编写一个应用程序，它在一种情况下从 URL 流式传输 mp3 并将其存储在内存中的文件中以供临时使用。

但我想确定，该文件将被创建。

首先我想到了使用 [getCacheDir](http://developer.android.com/reference/android/content/Context.html#getCacheDir%28%29)，但有人提到：

> 当设备存储空间不足时，这些文件将首先被删除。无法保证何时删除这些文件。注意：您不应依赖系统为您删除这些文件；您应该始终为缓存文件占用的空间量设置一个合理的最大值，例如 1 MB，并在超过该空间时修剪这些文件。

所以，然后我想到了使用 [getExternalCacheDir](http://developer.android.com/reference/android/content/Context.html#getExternalCacheDir%28%29)，但是我不确定设备是否包含外部存储器。

还有一个可选问题：在将文件保存到内存之前，我想检查目录是否有足够的空间。如何才能做到这一点？

**更新**

我还想过在 中创建一个文件`Environment.getDownloadCacheDirectory()`，因为它可能在每台设备上都可用。

```
File f3 = new File(Environment.getDownloadCacheDirectory(), "Temp.txt");
    if (!f3.exists()) {
        f3.createNewFile();
    } 
```

但在 createNewFile() 中得到以下错误跟踪：

```
java.io.IOException: Permission denied
    at java.io.File.createNewFileImpl(Native Method)
    at java.io.File.createNewFile(File.java:1257)
    at com.example.activitylifecycle.MyStreamingApp.startStream(MyStreamingApp.java:42)
    at com.example.activitylifecycle.MyStreamingApp.onCreate(MyStreamingApp.java:23)
    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1072)
    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1836)
    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1893)
    at android.app.ActivityThread.access$1500(ActivityThread.java:135)
    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1054)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:150)
    at android.app.ActivityThread.main(ActivityThread.java:4385)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
    at dalvik.system.NativeStart.main(Native Method) 
```

清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.activitylifecycle"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.activitylifecycle.ActivityLifeCycle"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".MyStreamingApp"
            android:label="@string/app_name" >
            <intent-filter android:priority="100" >
                <action android:name="com.example.activitylifecycle.MYSTREAMINGAPP" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

请建议。谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:32:20.810

您将文件写入/data/data/。your-package-name 与 AndroidManifest.xml 文件中提到的名称相同。

# c++ - 制作n个子树来存储计算机目录

> ID：15065831
> 
> 赞同：1
> 
> 时间：2013-02-25T11:22:58.843
> 
> 标签：c++, data-structures, tree

我正在制作一棵包含 n 个孩子的树来存储计算机目录。现在，概念只是制作一棵树（当然不是 BT），每个节点也会有子节点。考虑下面的代码，然后我将解释这个问题。首先考虑这个：

```
C/users/DeadCoder/Movies/Batman. 
```

现在在我`main.cpp`的向量中，我有所有 C、用户、DeadCoder、电影、蝙蝠侠，然后我在插入函数中发送两对。如果`root==NULL`; 它只会插入 C。下次 C 和用户会去。它会找到 C 然后相应地插入用户。现在让我们看看代码。

```
template <class T>

struct Node;

template <class T>
class tree
{
    Node<T> *root;

public:

    tree();
    ~tree();
    int insert(T str, T str1);
    Node<T> *getRoot();
    Node<T> *search(T item, Node<T> *tempPtr);
};

template <class T>
struct Node{

    T n;
    Node<T> *sibling;
    tree<T> children; // SEE my each node has children.
    Node(T N){
        this->n = N;
        this->sibling = NULL;
    }

}; 
```

// 在 .cpp 文件中；// 初始化器

```
template <class T>
tree<T>::tree() // Constructor Initialization.
{
    root=NULL;
} 
```

// 插入函数。

```
template <class T>
int tree<T>::insert(T push, T find)
{

    Node<T> *rPtr = root;
    if (rPtr==NULL){
            //ROOT is NULL. C needs to be inserted which is in find.
        Node<T> *pusPtr = new Node<T>(find);              

        root = pushPtr;
        root->sibling=NULL;
        return 0;
    }
    else if(rPtr!=NULL){
        Node<T> *pushPtr = new Node<T>(push);
        Node<T> *temp2 =  search(find, root);   
        Node<T> *temp = temp2->children.getRoot(); // say it LINE_40.
        if (temp==NULL){ 
            temp = pushPtr;
            temp->sibling=NULL;
            return 1;

        }
        // children are already present.
        else if(temp!=NULL){

            // You don't need to know code for this part.
            }
    }//if. 
```

}

// 搜索函数。

```
template <class T>
Node<T> *tree<T>::search(T data, treeNode<T>* N)
{
    if (N->n==data){ // where n represent directory.
        return N; // data found. 
    }//if....
    else{

        Node<T> *child = N->children.getRoot(); 
// This is where i get Segmentation fault,
// because child is ==NULL; but you see in LINE_40 I did insert the child for C.

    if(child!=NULL){ // say it line 80.
        search(data, child);
    }//if...
    if(child->sibling!=NULL){
        search(data, child->sibling);
    }   
   }

}// search.... 
```

问题：`C`插入。`Users`插入。现在在第 80 行的搜索功能中，它会找到 C 的子节点。它应该是用户，因为我已将其插入第 40 行。但它却说 child==NULL。我已经调试了几个小时，我不知道为什么会这样。我希望每个人都能解决问题。现在我真的需要知道为什么将 C child 设为 NULL，它必须是用户。任何人都可以看到什么问题？？？？帮助 ！！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T16:42:17.040

第 42 行*什么都不*做（我的意思是它没有副作用）。它只是将一个值放在一个临时变量中然后离开。您可能希望您`temp`成为对根目录的引用。就像是：`Node<T> *&temp =`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T17:58:30.473

你确定`insert`方法实际上插入了这些元素吗？实现后置条件可能会有所帮助，以便验证您的方法实际履行其合同（*按合同设计*）。这样，您将直接发现问题所在，并且在某些情况下调试会很快或不必要，因为您会收到日志消息，说“此方法应该执行此操作但执行失败”，否则您将花费​​数小时问题从何而来。

# python - scikit-learn 中的不平衡

> ID：15065833
> 
> 赞同：40
> 
> 时间：2013-02-25T11:23:09.530
> 
> 标签：python, scikit-learn

我在我的 Python 程序中使用 scikit-learn 来执行一些机器学习操作。问题是我的数据集存在严重的不平衡问题。

有没有人熟悉 scikit-learn 或 python 中不平衡的解决方案？在 Java 中有 SMOTE 机制。python中是否有并行的东西？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2016-08-05T02:35:35.793

这里有一个新的

[https://github.com/scikit-learn-contrib/imbalanced-learn](https://github.com/scikit-learn-contrib/imbalanced-learn)

它包含以下类别的许多算法，包括 SMOTE

*   对多数类进行欠采样。
*   过采样少数类。
*   结合过采样和欠采样。
*   创建整体平衡集。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-09-19T17:39:12.580

在 Scikit learn 中有一些不平衡校正技术，这些技术会根据您使用的学习算法而有所不同。

其中一些，如[Svm](http://scikit-learn.org/stable/modules/generated/sklearn.svm.SVC.html)或[逻辑回归](http://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LogisticRegression.html)，具有`class_weight`参数。如果您`SVC`在此参数设置为 on的情况下实例化一个`'balanced'`，它将按与其频率的倒数成比例地加权每个类示例。

不幸的是，没有用于此目的的预处理器工具。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-11-17T19:10:47.480

我在这里找到了另一个库，它实现了欠采样和多种过采样技术，包括多种`SMOTE`实现和另一个使用`SVM`：

[解决机器学习中不平衡数据集诅咒的 Python 包](https://github.com/fmfn/UnbalancedDataset)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-02-25T21:26:44.290

SMOTE 不是 scikit-learn 中的内置函数，但仍然有在线可用的实现。

编辑：与我最初链接到的[GMane](http://comments.gmane.org/gmane.comp.python.scikit-learn/5278)上的 SMOTE 实现的讨论似乎不再可用。代码保存[在这里](https://stats.stackexchange.com/a/217753/12036)。

@nos 下面的较新答案也很好。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2018-11-09T21:23:19.627

由于其他人列出了非常流行的不平衡学习库的链接，我将概述如何正确使用它以及一些链接。

[https://imbalanced-learn.org/en/stable/generated/imblearn.under_sampling.RandomUnderSampler.html](https://imbalanced-learn.org/en/stable/generated/imblearn.under_sampling.RandomUnderSampler.html)

[https://imbalanced-learn.org/en/stable/generated/imblearn.over_sampling.RandomOverSampler.html](https://imbalanced-learn.org/en/stable/generated/imblearn.over_sampling.RandomOverSampler.html)

[https://imbalanced-learn.readthedocs.io/en/stable/generated/imblearn.over_sampling.SMOTE.html](https://imbalanced-learn.readthedocs.io/en/stable/generated/imblearn.over_sampling.SMOTE.html)

[https://imbalanced-learn.readthedocs.io/en/stable/auto_examples/over-sampling/plot_comparison_over_sampling.html#sphx-glr-auto-examples-over-sampling-plot-comparison-over-sampling-py](https://imbalanced-learn.readthedocs.io/en/stable/auto_examples/over-sampling/plot_comparison_over_sampling.html#sphx-glr-auto-examples-over-sampling-plot-comparison-over-sampling-py)

[https://imbalanced-learn.org/en/stable/combine.html](https://imbalanced-learn.org/en/stable/combine.html)

不平衡学习中一些常见的过采样和欠采样技术是 imblearn.over_sampling.RandomOverSampler、imblearn.under_sampling.RandomUnderSampler 和 imblearn.SMOTE。对于这些库，有一个很好的参数允许用户更改采样率。

例如，在 SMOTE 中，要更改比率，您将输入一个字典，并且所有值必须大于或等于最大类（因为 SMOTE 是一种过采样技术）。我发现 SMOTE 更适合模型性能的原因可能是因为使用 RandomOverSampler 您正在复制行，这意味着模型可以开始记忆数据而不是泛化到新数据。SMOTE 使用 K-Nearest-Neighbors 算法来制作与采样数据点“相似”的数据点。

盲目使用 SMOTE 将比率设置为默认值（甚至是类平衡）并不是一个好习惯，因为模型可能会过度拟合一个或多个少数类（即使 SMOTE 使用最近邻进行“相似”观察）。以与调整 ML 模型的超参数类似的方式，您将调整 SMOTE 算法的超参数，例如比率和/或 knn。下面是一个如何正确使用 SMOTE 的工作示例。

**注意：不要在完整数据集上使用 SMOTE，这一点至关重要。您必须仅在训练集上使用 SMOTE（拆分后）。然后在您的验证集/测试集上进行验证，看看您的 SMOTE 模型是否优于其他模型。如果你不这样做，就会有数据泄露，你的模型本质上就是作弊。**

```
from collections import Counter
from sklearn.preprocessing import MinMaxScaler
from imblearn.pipeline import Pipeline
from imblearn.over_sampling import SMOTE
import numpy as np
from xgboost import XGBClassifier
import warnings

warnings.filterwarnings(action='ignore', category=DeprecationWarning)
sm = SMOTE(random_state=0, n_jobs=8, ratio={'class1':100, 'class2':100, 'class3':80, 'class4':60, 'class5':90})

### Train test split
X_train, X_val, y_train, y_val = train_test_split(X, y)

### Scale the data before applying SMOTE
scaler = MinMaxScaler().fit(X_train)
X_train_scaled = scaler.transform(X_train)
X_val_scaled = scaler.transform(X_val)

### Resample X_train_scaled
X_train_resampled, y_train_resampled = sm.fit_sample(X_train_scaled, y_train)

print('Original dataset shape:', Counter(y_train))
print('Resampled dataset shape:', Counter(y_train_resampled))

### Train a model
xgbc_smote = XGBClassifier(n_jobs=8).fit(X_train_smote, y_train_smote,
                                         eval_set = [(X_val_scaled, y_val)],
                                         early_stopping_rounds=10)

### Evaluate the model
print('\ntrain\n')
print(accuracy_score(xgbc_smote.predict(np.array(X_train_scaled)), y_train))
print(f1_score(xgbc_smote.predict(np.array(X_train_scaled)), y_train))

print('\nval\n')
print(accuracy_score(xgbc_smote.predict(np.array(X_val_scaled)), y_val))
print(f1_score(xgbc_smote.predict(np.array(X_val_scaled)), y_val)) 
```

# java - java队列到队列计算不满意

> ID：15065839
> 
> 赞同：0
> 
> 时间：2013-02-25T11:23:23.127
> 
> 标签：java, linked-list, priority-queue

我在尝试查看以下代码出错的地方时遇到了一个小问题：

```
public void processNextJob() {
        /*
         * 1\. get # of free CPU's still avaialble
         * 2\. get top most job from priority queue
         * 3\. run job - put to CPU queue
         * 4\. develop a CPU queue here
         * 5\. count cores against freeCPUS and some sort of calculation to sort run times
         */
        int freeCPUS = 500;
        int availableCPUS = 0;
        JobRequest temp = new JobRequest(); // initalised to new JobRequest
        Queue q = new LinkedList();

        while (true) {
            int size = q.size();
            for (int i = 0; i < size; i++) {
                temp = (JobRequest) q.peek();
                if (temp != null) {
                    availableCPUS += temp.getCores();
                }
            }
            if ((freeCPUS - availableCPUS) >= 0) {
                JobRequest nextJob = schedulerPriorityQueue.closestDeadlineJob(freeCPUS - availableCPUS); // returns top job from queue
                if (nextJob != null) {
                    System.out.println("Top priority / edf job:");
                    printJob(nextJob);
                    q.add(nextJob);

                } else {
                    System.out.println("Job = null");
                }

            } else {
                break;
            }
        }
        if (temp != null) {

            System.out.println("Execution Queue");

            for(Object jr : q){
             printJob((JobRequest)jr);//print all elements in q   
            }

        }

    } 
```

这里发生的事情是我从一个优先队列中添加顶部元素并将其添加到一个新的 LinkedList 中。但是我要取消优先队列的工作有一个名为“cores”的项目。我试图让它在保持在核心限制之下的同时尽可能多地裁员。

`temp.getCores()`是我获得核心价值的地方

我遇到的问题是它没有正确地将它们添加到我的链表队列中，它接收的值没有改变。我的队列显示 5 个输出，核心值为“160”，但我设置了 500 个上限，所以队列根本不满足

我看不出我在添加优先级队列中的值以使我的可用 CPUS 达到低于 500 的指定限制时哪里出错了。

编辑：

```
public JobRequest closestDeadlineJob(int freeCPUS) {
        // find top job to determine if other jobs for date need to be considered
        JobRequest nextJob = scheduledJobs.peek(); // return top most job

        if (nextJob != null) {

            System.out.println("Found top EDF job:");
            printJob( nextJob );

            // what is it's date?
            Date highestRankedDate = nextJob.getConvertedDeadlineDate();

            // create a temporary queue to work out priorities of jobs with same deadline
            JobPriorityQueue schedulerPriorityQueue = new JobPriorityQueue();

            // add the top job to priority queue
            //schedulerPriorityQueue.addJob(nextJob);

            for (JobRequest jr : scheduledJobs) {

                // go through scheduled jobs looking for all jobs with same date
                if (jr.getConvertedDeadlineDate().equals(highestRankedDate)) {
                    // same date deadline, soadd to scheduler priority queue
                    schedulerPriorityQueue.addJob(jr);
                    System.out.println("Adding following job to priority queue:");
                    printJob(jr);
                }
            }

            JobRequest highestPriorityJob = schedulerPriorityQueue.poll();
            // this is the item at the top of the PRIORTY JOB queue to return 

            // remove that item from scheduledJobs
            scheduledJobs.remove(highestPriorityJob);

            return highestPriorityJob;
        } else {
            return null;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:00:14.783

我想你需要看看这里。

在您`for()`增加变量的循环中`availableCPUS`，您总是`head`使用`Queue`:

`temp = (JobRequest) q.peek();`

而且由于`peek()`不会从队列中删除元素，因此您最终会将其分配`JobRequest`给`temp`.

尝试使用 an`Iterator`而不是`for`：

```
availableCPUS = 0;
Iterator<JobRequest> it = q.iterator();
while (it.hasNext()) {
    temp = it.next();
    if (temp != null) {
        availableCPUS += temp.getCores();
    }
} 
```

另外，我认为您需要为 while 循环的每次迭代设置`availableCPUS`为`0`才能正确计算内核数。

所以你应该把它放在`availableCPUS = 0;`Iterator 初始化的上面。

# php - 需要解决方法，PHP dechex 最大整数

> ID：15065842
> 
> 赞同：2
> 
> 时间：2013-02-25T11:23:38.093
> 
> 标签：php, hex, largenumber

我需要将一些大整数转换为十六进制，但由于 dechex 最大整数限制，我只能得到部分结果。

例如1：

```
echo dechex(319259235818); 
```

**返回： 555555ea**当它应该返回**4A555555EA**

例如2：

```
echo dechex(51539607576); 
```

**返回：18**应该返回**C00000018**

有谁知道绕过这个限制的方法？

# sql-server - 我可以强制报表顶部的图表始终可见吗

> ID：15065843
> 
> 赞同：3
> 
> 时间：2013-02-25T11:23:38.527
> 
> 标签：sql-server, reporting-services

我有以下报告：

![在此处输入图像描述](../Images/765f107b9edfc230499c55ed156e51fc.png)

在`Excel`我会使用`Freeze Pane`图表下方的东西.​​.....这意味着当用户向下滚动时，表格将滚动，但图表将始终保持可见。

是否可以在中实现此行为`RS`？

**编辑**

**注意：图表和tablix使用不同`Datasets`**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:59:11.180

是的，您可以通过一些调整来实现这一点。

使用**Tablix**对象，您可以选择修复标题行，即滚动时它们将停留在页面顶部。

您可以在**Tablix**级别进行设置：

![在此处输入图像描述](../Images/0a1d8bb40537835ca9f1f6916864867f.png)

或者在使用属性设置**高级模式**的行级别：`FixedData`

![在此处输入图像描述](../Images/fcac247c75dc65ae7651394f068b2700.png) ![在此处输入图像描述](../Images/8b79c02374867f769522f123fa2909f4.png)

因此，您可以利用这一点将**图表**插入到那些重复的标题行中。我用一份基本报告对此进行了测试：

![在此处输入图像描述](../Images/910b05cfd0ec412efc801bcd1d2f7108.png)

这确实成功地使**Chart与****Tablix**一起滚动，因此将满足您的要求。一个警告 - 当我这样做时它看起来不太好（重叠单元格等），但它是一个零格式的报告，所以希望这对你有帮助，无论如何。

**评论后编辑：**

在我的简单报告示例中，我向报告中添加了一个新数据集，并将嵌入的图表指向这个新数据集 - 这不起作用，因为每次我这样做时它总是会恢复到旧数据集（即在**Tablix**级别）。

但是，您可以改为使用包含所需**Chart的****Subreport**，并将此**Subreport**嵌入**Tablix**标题中。我现在刚刚尝试过，它按要求工作；使用第二个数据集的**图表很好，它根据需要使用****Tablix**滚动。

 ******因此，对于多个数据集，它仍然是一个可行的选择，您只需要使用**Subreport**的额外步骤：

**新报告：**

![在此处输入图像描述](../Images/212739d858eed89d67302bdca8969b23.png)

**子报告：**

![在此处输入图像描述](../Images/b4791110a7ba164f698cbc8117099b53.png)******

# c# - 使用 for 循环添加 IList

> ID：15065849
> 
> 赞同：0
> 
> 时间：2013-02-25T11:23:51.797
> 
> 标签：c#, generics, for-loop

我的结果列表为

```
var attributeresult= " some list of items......"; 
```

现在我正在尝试循环表单结果并添加到 IList。但我只得到最后插入值，但我想获取所有值。

```
 IList<DynamicColumn> idynamicttableColumns = new List<DynamicColumn>();
 DynamicColumn dynamictableColumns = new DynamicColumn();

 for (int i = 0; i < attributeresult.Count(); i++)
                        {
                            dynamictableColumns.Name = attributeresult.ElementAt(i).AttributeName;
                            dynamictableColumns.Type = attributeresult.ElementAt(i).AttributeSqlType;
                            dynamictableColumns.IsNullable = false;
                            idynamicttableColumns.Add(dynamictableColumns);

                        } 
```

我必须用 for 循环完成，而不是用 for each 循环。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:26:36.737

Move `DynamicColumn dynamictableColumns = new DynamicColumn();` into your loop:

```
IList<DynamicColumn> idynamicttableColumns = new List<DynamicColumn>();
int count = attributeresult.Count();

for (int i = 0; i < count; i++)
{
    var item = attributeresult.ElementAt(i);
    DynamicColumn dynamictableColumns = new DynamicColumn();
    dynamictableColumns.Name = item .AttributeName;
    dynamictableColumns.Type = item .AttributeSqlType;
    dynamictableColumns.IsNullable = false;
    idynamicttableColumns.Add(dynamictableColumns);
} 
```

# jquery - jquery resizeable 不适用于 imag

> ID：15065854
> 
> 赞同：0
> 
> 时间：2013-02-25T11:24:05.240
> 
> 标签：jquery, html

jquery resizable 在我的代码中不起作用，它仅 在直接加载图像 时才**起作用。** 将图像添加到 div 时**不起作用**

这是我的代码：-

```
<html lang="en">
<head>
<title>Outfit Demo</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.2/jquery-ui.js"></script>
<link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.1/themes/base/jquery-ui.css"/>
<script type="text/javascript">
jQuery(document).ready(function(event){
   jQuery(".pic1").draggable();
   jQuery(".pic1").resizable();
});
  function select(src)
  {
  path = "<img class=\"pic1\" src=\""+src+"\" height=\"300px\" width=\"300px\"/>";
  document.getElementById("image").innerHTML=path;
  }
  </script>
</head>

<body>
<div id="leftpanel" style="position:absolute;left:0;width:50%;">
<div style="left:0;height:30%;" id="image"></div>
</div> 
<div id="middlepanel" style="width: 100%; height: 100%; position:absolute;left:500;width:50%;">
<img class="pic1" src="https://encrypted-tbn2.gstatic.com/images?q=tbn:ANd9GcT-cYNnwQZF6R0T5v11nnXOmdWWEGj4Tf7tKMhbB_FsNFo8yLmaeg" height="300px" width="700px" onclick="select(this.src)"/>
</div> S
</body>
</html> 
```

请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:50:26.543

要对页面加载不附带的元素使用 jquery 事件，我们需要实时应用。所以在这里（在上面我在评论中给出的链接中）他们使用实时创建事件

看到这里[使用你可以做的现场活动](https://stackoverflow.com/questions/1805210/jquery-drag-and-drop-using-live-events)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:54:52.720

```
$('.pic1').live('mouseover',function(){
    $(this).draggable();
}); 
```

这对我有用。谢谢

我明白你所说的。非常感谢

# vhdl - 使用 Microblaze c 代码通过 PLB 总线读取 VHDL 输出

> ID：15065856
> 
> 赞同：0
> 
> 时间：2013-02-25T11:24:14.537
> 
> 标签：vhdl, xilinx

我目前正在使用 Xilinx ise10.1。我已经为 upcounter 模拟了一个 Vhdl 程序。但我不知道如何将它与 PLB 总线接口，以便 microblaze c 代码可以通过同一总线读取它。请帮助我我是使用这些工具的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:53:03.453

ISE 的 10.1 版本已经很老了。所以，如果我不记得一切正确，请原谅我。

如果您启动 Xilinx 部分的`xps`工具`EDK`，您应该会在菜单的某处找到一个创建新 Microblaze 外设的向导。这将创建一个带有 PLB 总线的模板以连接到 Microblaze。您的 HDL 代码可以插入到模板中。

对于 ISE 14.4：

1.  启动 xps
2.  创建一个新项目（“文件”->“新建空白项目”）
3.  '硬件' -> '导入外设的创建'
4.  '为新外围设备创建模板'
5.  ……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T15:41:13.687

如果您只想偶尔阅读它，并且一切都在同一个时钟下运行，您可以只实例化一个 GPIO 外设并将您的计数器输出连接到 GPIO 输入线。

# c++ - 使用多维数组

> ID：15065858
> 
> 赞同：0
> 
> 时间：2013-02-25T11:24:18.610
> 
> 标签：c++, pointers, multidimensional-array

我正在尝试构建一个适用于宽度矩阵的类。在它的构造函数中，它想知道数组的高度和宽度，并且它想要数组本身，然后它必须能够打印数组并重载一些运算符。Array 必须是浮点数组。这就是我到目前为止所拥有的：两个定义的参数：

```
#define HEIGHT 3
#define WIDTH 3 
```

制作数组：

```
void Assignment_1::start(){
    float **matrix = new float *[HEIGHT];
    for (int i = 0; i < HEIGHT; i++){
        matrix[i] = new float[WIDTH];
    }
    //  5   6   11
    //  7   2   8
    //  5   1   4
    matrix[0][0]=5;
    matrix[0][1]=6;
    matrix[0][2]=11;
    matrix[1][0]=7;
    matrix[1][1]=2;
    matrix[1][2]=8;
    matrix[2][0]=5;
    matrix[2][1]=1;
    matrix[2][2]=4;
    Matrix * matrixA = new Matrix(HEIGHT,WIDTH,matrix);
    matrixA->printMatrix();
} 
```

现在我知道一个 C++ 二维数组存在一个普通的 HEIGHT 指针数组，每个指针都指向一个 WIDTH 大小的数组。

构造函数和全局变量：

```
Matrix::Matrix(int width, int height, float **array){
    this->height = height;
    this->width = width;
    this->array = array;
}
//in Matrix.h:
int width, height;
float ** array; 
```

到此为止，一切都很好。现在我想通过打印来实际使用数组：

```
void Matrix::printMatrix(){
    for (int h = 0; h < height; h++){
        for (int w = 0; w < width;w++){
            std::cout <<array[height][width]<<"    ";
        }
        std::cout << std::endl;
    }
} 
```

这就是它出错的地方：程序简单地崩溃了。我有点明白为什么它崩溃了：我想我需要得到 array[h] 指向的内容（这是一个大小宽度的浮点数组），但试图这样做会给我错误：无法将 float* 转换为 float[] *。我需要做什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:31:35.000

[机器人已经回答了你的问题：](https://stackoverflow.com/questions/15065858/cworking-width-multi-dimensional-arrays#comment21184463_15065858)

```
for (int h = 0; h < height; h++){
    for (int w = 0; w < width;w++){
        std::cout <<array[height][width]<<"    ";
                  //      ^^^^^^  ^^^^^
    }
    std::cout << std::endl;
} 
```

您正在访问哪些条目？嗯，总是`array[height][width]`。但是，`array`仅包含`height`元素，因此此访问会导致未定义的行为。只需应用您的循环变量`h`和`w`：

```
for (int h = 0; h < height; h++){
    for (int w = 0; w < width;w++){
        std::cout << array[h][w]<<"    ";
    }
    std::cout << std::endl;
} 
```

但是，这仍然远非最佳。您应该使用更易于使用的类型，例如`std::vector`：

```
typedef std::vector<float> float_vector;
typedef std::vector<float_vector> float_matrix;
float_matrix matrix(HEIGHT,float_vector(WIDTH)); 
```

`std::vector`是最重要的类型之一。掌握它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:31:00.450

这是因为二维数组和指向指针的指针不同。你能试一下吗

float **array to float (*array)[size]?

并将 array[height][width] 更改为 array[h][w]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-25T11:32:43.643

```
void Matrix::printMatrix(){
    for (int h = 0; h < height; h++){
        for (int w = 0; w < width;w++){
            std::cout <<array[h][w]<<"    ";
        }
        std::cout << std::endl;
    }
} 
```

不是高度和宽度 - 它是数组的大小，使用迭代器 h,w

# codeigniter - 哪个在codeigniter中更好？在帮助程序中添加函数或在扩展基类中添加函数

> ID：15065860
> 
> 赞同：0
> 
> 时间：2013-02-25T11:24:21.337
> 
> 标签：codeigniter, codeigniter-2, codeigniter-helpers

在一个 codeigniter 项目中，我必须在一个而不是一个控制器中做一些事情。
我在一个函数中编写了所有这些东西，现在我需要在必要时调用。
我认为在多个控制器中编写此功能并不好。
我有2个选择，

1.  创建一个助手并在其中编写这些函数，并将助手包含在必要的控制器中。
2.  由于我扩展了 CI 基本控制器（My_Controller）并且我的大多数控制器都扩展了该控制器，因此我也可以将此功能写入我的基本控制器。

我很困惑哪个更好，正确的方式？
哪一个会加快这个过程？
第二种方式会减慢网站速度吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:27:12.197

只是为了帮助你努力我所做的是：（这就是我）

1.  如果我需要在视图中使用某些东西，我会使用`helper`自定义的或内置的。

2.  如果我想在其他控制器也将使用的控制器上做某事，并且不希望它弄乱或拥挤我的控制器，我使用 a `library`（几乎你可以使用 a `helper`，但我选择使用库）

3.  如果我想加载让我们说一个方法，以影响全局或我使用的某些控制器`base controller`。（你也可以使用`helper`or `library`）

关键是你不拘泥于一种，选择最适合你的，俗话说，剥猫皮的方法很多，但请不要剥猫皮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T13:30:40.770

它们在所有意图和目的上都是相同的。

使用帮助程序可以使代码可移植，因此您可以在其他项目中使用它，或者在代码库中的任何位置调用它，例如在格式化函数的情况下

如果您打算将它放在控制器中，那么最好选择 MY_Controller

# html - 使表格单元格成为块元素

> ID：15065867
> 
> 赞同：1
> 
> 时间：2013-02-25T11:25:05.820
> 
> 标签：html, css, cells

我目前的任务是为我的作品网站制作一个移动样式表，并且我在一些最后阶段遇到了困难。

我的主要限制是我不能编辑源 HTML 并且必须使用提供的源。

我想通过将按钮（表格单元格）放到它自己的行来使包含按钮的表格在达到 450px 宽时做出响应。我可以简单地通过`divs`但不能做到这一点`tables`。我已经创建了一个简单的示例来说明我想要做什么[http://test.aboutcher.co.uk/so/tables.html](http://test.aboutcher.co.uk/so/tables.html)但我不知道如何在表格中实现这种效果。

我知道表格对于布局来说是个坏主意，但我无法在源代码中更改它，因此必须努力解决。

**编辑**
我发现了我的问题，有一个非单元格没有`display:block`在源中应用样式，导致其他两个正在接收样式的单元格忽略显示：块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:33:51.853

您只需要定义您的`td`is`display:block`并将它们操作为您的`div`. 看看这个演示：http: [//jsfiddle.net/68EQK/](http://jsfiddle.net/68EQK/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:31:15.010

虽然这不是一个理想的方式。但正如我所见，我认为您可以创建另一个表格行，并最初通过不显示来隐藏它；然后使用 CSS 媒体查询，在此处设置指定宽度：XXpx；并将顶部第二列设置为`display: none;`，底部表列设置为`display : block;`

希望这是有道理的

```
@media (max-device-width = 400px) {
  .second-column{display:block;}
.first-column{display:none;}
} 
```

# java - 在Java中没有转换的double到long

> ID：15065869
> 
> 赞同：6
> 
> 时间：2013-02-25T11:25:07.427
> 
> 标签：java, casting, double, long-integer

我需要把 double 变成 long 保留它的二进制结构，而不是数字值。只需更改类型，但保持二进制值不变。有本地方法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-25T11:32:52.917

有与 doubleToLongBits 和 doubleToLongRawBits的[Double 。](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#doubleToRawLongBits%28double%29)*Javadoc 是您的朋友。*

# java - 两个同步语句。它们是如何工作的？

> ID：15065870
> 
> 赞同：3
> 
> 时间：2013-02-25T11:25:07.833
> 
> 标签：java, multithreading

我正在尝试使用另一种方法中的同步语句运行一种方法。

**我的课**

```
public class MyClass {

    private Object lockObject = new Object();

    public void testFirst() {
        synchronized (lockObject) {
            System.out.println("Entered testFirst() sync");
            testSecond();
            System.out.println("Leaving testFirst() sync");
        }
    }

    private void testSecond() {
        synchronized (lockObject) {
            System.out.println("Entered testSecond() sync");
        }
    }

} 
```

**主要的**

```
package com.replanet;

public class Main {

    public static void main(String[] args) {

        MyClass myClass = new MyClass();
        myClass.testFirst();
    }

} 
```

**输出**

```
Entered testFirst() sync
Entered testSecond() sync
Leaving testFirst() sync 
```

我期待另一个输出。

```
Entered testFirst() sync
Leaving testFirst() sync
Entered testSecond() sync 
```

为什么不`testSecond()`等到`testFirst()`完成它的工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:27:42.880

您会看到这种看似奇怪的行为，因为每个锁都与请求它的**线程**相关联，一旦您拥有锁，您就会一直保留它直到您解锁。

在您的代码中，您两次获得相同的锁，因此第二次尝试立即成功，因为您已经拥有它。

请参阅[此处](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)以供参考：

> 当一个线程正在为一个对象执行同步方法时，所有**其他**为同一对象调用同步方法的线程都会阻塞（暂停执行），直到第一个线程处理完该对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-25T11:28:00.727

由于要进入第一`synchronized`部分，您必须拥有 object 锁`lockObject`，当您到达第二`synchronized`部分时，您仍然拥有它，因此它会继续。运行`testFirst`时，`synchronized`块中的块`testSecond`没有任何变化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T11:55:39.690

要记住几件事：

*   `synchronized``synchronized`块是可重入的：当您通过语句持有锁时，您可以使用同一个监视器进入另一个块 - 在您的情况下`synchronized`，没有什么可以阻止您调用`testSecond``testFirst`
*   现在想象这两种方法使用不同的监视器，你仍然会得到相同的输出，因为没有其他线程会持有`testSecond`
*   *如果*这 2 个方法使用了两个不同的锁*，并且*另一个线程持有在`testSecond`执行中使用的锁，则`testFirst`不会跳过调用`testSecond`并继续前进，它将阻塞直到锁再次可用

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-25T11:30:54.720

因为**testSecond()**与**testFirst()相关联**

控制流程完全如下：-

```
System.out.println("Entered testFirst() sync");
       System.out.println("Entered testSecond() sync");
System.out.println("Leaving testFirst() sync"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-25T11:37:53.783

同步是围绕称为内在锁或监视器锁的内部实体构建的。
每个对象都有一个与之关联的内在锁。按照惯例，需要对对象字段进行排他和一致访问的线程必须在访问对象之前获取对象的内在锁，然后在完成访问时释放内在锁。在获得锁和释放锁之间，线程被称为拥有内在锁。只要一个线程拥有一个内在锁，其他线程就不能获得相同的锁。另一个线程在尝试获取锁时会阻塞。

因此您的线程是 lockObject 的所有者，因此它可以使用 lockObject 进入块内的所有代码

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-25T14:16:14.543

我编辑了我发布的代码。同步语句是有道理的，不是吗？

**我的课**

```
public class MyClass {

    private Object lockObject = new Object();

    public void testFirst() throws InterruptedException {
        // Here is something that should not be synchronized 
        synchronized (lockObject) {
            System.out.println("testFirst() is about to fall asleep. "
                    + Thread.currentThread().getName());
            Thread.sleep(2000);
            System.out.println("testFirst() woke up. " + Thread.currentThread().getName());
        }
    }

} 
```

**我的线程**

```
public class MyThread extends Thread {

    private MyClass myClass;

    public MyThread(MyClass myClass) {
        this.myClass = myClass;
    }

    @Override
    public void run() {
        try {
            myClass.testFirst();
        } catch (InterruptedException e) {
            interrupt();
        }
        super.run();
    }

} 
```

**用法**

```
package com.replanet;

public class Main {

    public static void main(String[] args) {
        MyClass myClass = new MyClass();
        MyThread mThread = new MyThread(myClass);
        MyThread anotherThread = new MyThread(myClass);
        mThread.start();
        anotherThread.start();
    }

} 
```

**输出**

```
testFirst() is about to fall asleep. Thread-0
testFirst() woke up. Thread-0
testFirst() is about to fall asleep. Thread-1
testFirst() woke up. Thread-1 
```

# c# - 根据返回值设置按钮的值

> ID：15065873
> 
> 赞同：1
> 
> 时间：2013-02-25T11:25:14.613
> 
> 标签：c#, asp.net, gridview

我`GridView`在 asp.net 中使用。

第一列是按钮控件列表 -

```
<ItemTemplate>
  <asp:Button ID="statusButton" runat="server" Text="Select" 
            OnClick="statusButton_CheckedChanged" />
</ItemTemplate> 
```

但是，我想根据表中另一列的值修改数据绑定时此按钮的背景颜色和文本值。

我的问题是我需要在检索另一列时检查它们的值，它们要么是`1`要么`-1`，并且该值将设置按钮的设计。

如何检查此绑定字段的值 -

```
<asp:BoundField DataField="EXCLUDE" HeaderText="EXCLUDE" SortExpression="EXCLUDE" 
     ReadOnly="True" HeaderStyle-CssClass = "hideGridColumn" 
     ItemStyle-CssClass="hideGridColumn"/> 
```

然后设置按钮的颜色和文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:45:42.477

更改如下

```
<ItemTemplate>
     <asp:Button ID="statusButton" runat="server" Text="Select" 
        OnClick="statusButton_CheckedChanged" />
</ItemTemplate> 
```

根据您的情况使用不同的 CSS 类

```
.class1{
 color:red;
 font-size:10;
}
.class2{
 color:blue;
 font-size:12;
}

<ItemTemplate>
     <asp:Button ID="statusButton" runat="server" Text="Select" 
        CssClass='<%# Convert.ToString(Eval("EXCLUDE"))== "1" ? "class1" : "class2" %>' 
        OnClick="statusButton_CheckedChanged" />
</ItemTemplate> 
```

`RowDataBound`您可以按照@edwin 的建议从 C# on 事件中使用它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:46:51.430

可以使用`RowDataBound`gridview的事件，例如：

```
 myGrid.RowDataBound += new GridViewRowEventHandler(myGrid_RowDataBound);
    void myGrid_RowDataBound(object sender, GridViewRowEventArgs e)
            {
                //Raised after each row is databound
                if (e.Row.RowType == DataControlRowType.DataRow)
                {
                    string value = e.Row.Cells[5].Text; //sixth column
                    if (value == "1")
                    {
                        //change button color (assuming button is in first column)
                        Button myButton = e.Row.Cells[0].Controls[0] as Button;
                        myButton.BackColor = Color.Red; 
```

# android - 创建自定义可扩展文本视图

> ID：15065879
> 
> 赞同：0
> 
> 时间：2013-02-25T11:25:43.667
> 
> 标签：android, layout, view, textview, expandablelistadapter

我想创建一个`Expandable TextView`，就像我们在消息线程中得到的一样。的大小`TextView`不是固定的，而是取决于文本长度和行数。它还具有根据要显示的文本大小扩展（或相乘）的边框。

**如何设置这样的布局？**

有人可以在这方面帮助我！

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-10T05:21:57.043

我建议您使用像在网页中使用的平铺图像..它们很轻，并且使用 CSS-REPEAT 标签重复....在 android 中也存在类似的效果，使用`android:titlemode`具有以下![在此处输入图像描述](../Images/fc61e1b405a93c8b4514c1bdaff52248.png) 重复钳镜像

*   **那么它将如何解决您的问题** 您制作单个消息的背景图像，该图像可以是大小为 100x1 的图形，因此重复此图像将为您的消息线程使用漂亮的颜色`android:tilemode`

使用这样但较小的图像检查此图像可以帮助您在消息线程背景中重复它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T12:18:38.243

使用这些属性。

```
<TextView
    android:id="@+id/text1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:singleLine="false" 
```

# latex - Can I output the results of the strate command to LaTeX?

> ID：15065883
> 
> 赞同：0
> 
> 时间：2013-02-25T11:25:49.357
> 
> 标签：latex, stata

When using Stata's [`strate`](http://www.stata.com/help.cgi?strate) command, is it possible to export its output to a `LaTeX` table?

In a similar vein as, for instance, the *community-contributed* [`estout`](http://repec.org/bocode/e/estout/index.html) family of commands can do.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-06-24T20:53:07.727

你想要的可以通过使用命令的`output()`选项`strate`和`esttab`.

考虑以下玩具示例：

```
webuse diet, clear
stset dox, origin(time doe) id(id) scale(365.25) fail(fail==1 3 13)

stsplit ageband, at(40(10)70) after(time=dob) trim

preserve
tempfile myfile
strate ageband, per(1000) output(`myfile')
use `myfile', clear
mkmat *, matrix(A)
restore

esttab matrix(A), title("Summary results") ///
                  mlabels(, none) ///
                  varlabels(r1 " " r2 " " r3 " ")                                                                   

Summary results
------------------------------------------------------------------------------------------
                  ageband           _D           _Y        _Rate       _Lower       _Upper
------------------------------------------------------------------------------------------
                       40            6     .9070062      6.61517     2.971936     14.72457
                       50           18     2.107042     8.542783     5.382317     13.55906
                       60           22     1.493292     14.73255     9.700656     22.37457
------------------------------------------------------------------------------------------ 
```

的`tex`选项`esttab`将产生所需的`LaTeX`输出：

```
esttab matrix(A), title("Summary results") ///
                  mlabels(, none) ///
                  varlabels(r1 " " r2 " " r3 " ") ///
                  tex

\begin{table}[htbp]\centering
\caption{Summary results}
\begin{tabular}{l*{6}{c}}
\hline\hline
            &     ageband&          \_D&          \_Y&       \_Rate&      \_Lower&      \_Upper\\
\hline
            &          40&           6&    .9070062&     6.61517&    2.971936&    14.72457\\
            &          50&          18&    2.107042&    8.542783&    5.382317&    13.55906\\
            &          60&          22&    1.493292&    14.73255&    9.700656&    22.37457\\
\hline\hline
\end{tabular}
\end{table} 
```

# c# - RelayCommand CanExecute 行为

> ID：15065885
> 
> 赞同：7
> 
> 时间：2013-02-25T11:25:55.830
> 
> 标签：c#, wpf, mvvm, mvvm-light

我有以下命令：

```
<Button x:Name="bOpenConnection" Content="Start Production"
        Grid.Row="0" Grid.Column="0"
        Height="30" Width="120" Margin="10"
        HorizontalAlignment="Left" VerticalAlignment="Top" 
        Command="{Binding Path=StartProductionCommand}"/> 
```

```
StartProductionCommand = new RelayCommand(OpenConnection, CanStartProduction);

private bool CanStartProduction()
{
   return LogContent != null && !_simulationObject.Connected;
} 
```

`CanStartProduction`仅在我重新调整 UI 大小且未即时更新时才检查。知道为什么每次更改值时都不更新吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-25T11:29:28.893

`CommandManager`无法知道该命令依赖于and `LogContent`，因此当这些属性发生变化时`_simulationObject.Connected`它无法自动重新评估。`CanExecute`

您可以通过调用明确请求重新评估`CommandManager.InvalidateRequerySuggested`。请注意，它将重新评估`CanExecute`所有*命令*；如果您只想刷新一个，则需要`CanExecuteChanged`通过调用来引发命令本身的事件`StartProductionCommand.RaiseCanExecuteChanged`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:29:05.000

您可以在例如 PropertyChanged 事件处理程序中调用 RaiseCanExecuteChanged。

命令状态不会经常刷新。

前段时间我读了一篇关于它的好文章。我稍后会发布它。

另见[http://joshsmithonwpf.wordpress.com/2008/06/17/allowing-commandmanager-to-query-your-icommand-objects/](http://joshsmithonwpf.wordpress.com/2008/06/17/allowing-commandmanager-to-query-your-icommand-objects/)

另请参阅[刷新 WPF 命令](https://stackoverflow.com/questions/783104/refresh-wpf-command)

# java - to store phone number in sqlite for call blocking application

> ID：15065888
> 
> 赞同：0
> 
> 时间：2013-02-25T11:26:11.373
> 
> 标签：java, android, sqlite, callblocking

i am working on call blocking application for android 2.1, for this i used sqlite database to store the phone number, i am using TEXT to store the phone number.i have some question in my mind.

1: what is the correct data type for column phone number.

2: is there any solution for call blocking for android above 2.2

because this is only working on 2.1 and below it.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:31:31.427

请转到此链接。您对 sqlite 有所了解。在您必须使用的呼叫阻止应用程序中，您可以使用 INTEGER 我认为更好

[http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)

# phpexcel - PHPExcel to XML -- 保留样式

> ID：15065890
> 
> 赞同：0
> 
> 时间：2013-02-25T11:26:22.080
> 
> 标签：phpexcel

我正在读取一个 Excel 文件 (.xlsx) 并使用 PHP 以如下方式输出 XML：

```
$cellVal = $objPHPExcel->getSheetByName($Sh)->getCellByColumnAndRow($tCol,$i)->getValue();
echo '<data_text>'.$cellVal.'</data_text>';
etc.. 
```

一切都运行良好，除非在单元格中有一些样式（斜体或粗体，或两者兼而有之）：样式丢失了。有没有聪明的方法来保留它？

如果它是整个单元格的样式，事情可能会更容易。但是如果有混合风格呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T12:40:29.617

如果您想要数字屏蔽，请尝试使用单元格的 getFormattedValue() 方法而不是 getValue()。

方法调用可以返回其他样式，例如斜体、粗体等，以读取单元格的样式；但是您需要决定如何将这些信息存储在您自己的 XML 中。对于混合样式，PHPExcel 将让您解析它返回的 RichText 对象；但同样，您需要决定如何将它存储在您自己的 XML 中。

# python - Python：如何将事物合并到一个列表中？

> ID：15065893
> 
> 赞同：-2
> 
> 时间：2013-02-25T11:26:37.160
> 
> 标签：python, list

我有以下列表：

```
>>> list_of_list = [  ['a', 2], ['b', 3], ['a', 4, 5]  ] 
```

我想要以下结果： 1\. 它可以告诉我有 2 个不同的项目：'a' 和 'b' 2\. 'a' 中有 2 个项目，'b' 中有 1 个项目 'a' = [2, 4 , 5] 'b' = 3

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T11:28:24.440

您可以（应该）使用字典，并将每个子列表中的第一项（“键”）映射到每个子列表中的第二项（“值”）。

使用 a`defaultdict`可以省去用空列表实例化每个新键的麻烦。

另外，正如eumiro 指出的那样，为了保持一致，值`'b'`应该是一个包含单个项目的列表，`3`而不仅仅是数字`3`。

```
from collections import defaultdict

d = defaultdict(list)
for item in list_of_list:
  d[item[0]].append(item[1]) 
```

# http - Can't download a file on a different device, using apache2 http server and ubuntu 12.10

> ID：15065895
> 
> 赞同：0
> 
> 时间：2013-02-25T11:26:42.183
> 
> 标签：http, ubuntu, apache2

I want to be able to download a file from my apache2 server, on another device, (my router). Currently, I'm able to download the file from a browser on my computer (locally), but I am unable to get it from my router.

My eth0 is 192.168.0.5

My router is 192.168.0.72

My apache2 server address is 192.168.0.5

Does anybody know what I should do? I am kind of stumped! I want to download a file from apac.he2.server.add/file on my router.

# android - How do i replace the " " in an array with a letter from a-z (in the spinner items)

> ID：15065897
> 
> 赞同：0
> 
> 时间：2013-02-25T11:26:59.467
> 
> 标签：android, arrays, string, spinner

A user inputs a word...The word is placed in an array-string when the OK button is pressed...I..if the user inputs a word with a blank letter(corresponded by a space) example "h" "_" "l" "l" "o" (the second letter is a space),the blank/space will display a toast to instruct user to choose a letter from a spinner that will replace the blank...When the letter is chosen and the submit button is pressed (in this example "e" was chosen)the completed word will be displayed at the TextView (which is "hello")...How do i do this?..the replacing of the 'space' to a 'letter' from the spinner...thanks

the code that i have..[it's just for the input of word in edittext and output on textview...]

```
public class MainActivity extends Activity {

private Spinner spinner1;
private Button btnsubmit; 

TextView wordview;
    EditText theword;
    Button btnok;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    wordview = (TextView) findViewById (R.id.textView1);
    theword = (EditText) findViewById(R.id.inputtext);
    btnok = (Button) findViewById(R.id.btnok);

    btnok.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String thewordcontent = theword.getText().toString();

            wordview.setText("the word is:" + thewordcontent);

        }
    });

    addListenerOnButton ();
    addListenerOnSpinnerItemSelection ();

}

public void addListenerOnSpinnerItemSelection() {
    spinner1 = (Spinner) findViewById(R.id.spinner1);
    spinner1.setOnItemSelectedListener(new CustomItemListener());
  }

 public void addListenerOnButton() {

     spinner1 = (Spinner) findViewById(R.id.spinner1);

     btnsubmit = (Button) findViewById (R.id.btnsubmit);
     btnsubmit.setOnClickListener(new OnClickListener() {

          public void onClick(View v) {
            Toast.makeText(MainActivity.this,
            "OnClickListener : " + 
                    "\nSpinner 1 : "+ String.valueOf(spinner1.getSelectedItem()) ,
                Toast.LENGTH_SHORT).show();
          }

        });
      }

} 
```

# asp.net - 开始使用 SQL 的问题

> ID：15065900
> 
> 赞同：0
> 
> 时间：2013-02-25T11:27:06.727
> 
> 标签：asp.net, sql-server

我是 asp.net 的新手，但一直在用 vb.net 编程。我在学习如何使用 SQL Server 时遇到困难。

我一直在使用 AccessDB，但现在我想使用 SQL Server。我在网上阅读了很多文章，但对我来说似乎很困惑。

我已经安装了 IIS Express、VS SP1、ASP.net MVC 4，但是当我从我的 App_Data 单击添加新项目时，我只看到 SQL Server DB 但是当我尝试添加它时，它与 2008 和 2008 RS 冲突，告诉它继续，它说它无法连接到`localDB`。

任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T13:06:20.763

我安装了 SQL Server 2008 Management Studio，创建了 mdf 文件并将其附加到我的 ASP 网站，使用对话框后面的添加新数据源。更改 web.config 文件以查看我的 Web 服务器目录。那是在 Web 控制面板上为其创建登录名之后。

我的 web.config 文件，在上传和设置 mdf 后，在 Configuration 下看起来像这样，

```
<connectionStrings>    
<add name="DBNAME" connectionString="Data Source=localhost;Initial Catalog=DBNAME;Integrated Security=false;User ID=User;Password=Pass" /> 
</connectionStrings> 
```

# php - 如何在一个程序中读写 php socket？

> ID：15065902
> 
> 赞同：2
> 
> 时间：2013-02-25T11:27:10.953
> 
> 标签：php, html, sockets, php-socket

在这里，我希望将消息从客户端传递到服务器，并通过服务器程序将响应写回客户端。实际上，我将数据库保存在服务器端，并尝试根据客户端输入将数据发送回客户端。从客户端到服务器的发送部分并从服务器检索数据是可以的。我想要一些想法作为回复回信给客户

这是我的服务器程序

```
<html>
    <head>

    </head>

    <body>
        <?php
            //socket_close($sock);
            $isread=false;
            $address="127.0.0.1";
            $port="1332";
            $sock=socket_create(AF_INET,SOCK_STREAM,0) or die("Socket creation failed..!");
            socket_bind($sock,$address,$port) or die("Socket binding failed..!");
            socket_listen($sock) or die("Socket listen failed..!");
            $accept=socket_accept($sock) or die("Socket accept failed..!");
            $read=socket_read($accept,1024);
            //echo $read;
            if($read)
                $isread=true;
            $ar=array();
            $ar=explode("@",$read);
            print_r($ar);
            if($isread==true)
                getData('testdata','student',$accept,$ar[0],$ar[1]);

            function getData($dbName,$tblName,$acc,$control,$value)
            {
                mysql_connect('localhost','root','') or die("Connection failed..!");
                mysql_select_db($dbName) or die("Connection failed..!");
                $cmd="SELECT * FROM $tblName WHERE '$control'='$value'";
                $query=mysql_query($cmd) or die("Query execution failed..! ".mysql_error());
                $rows=mysql_num_rows($query);
                $cols=mysql_num_fields($query);
                for($i=0;$i<$rows;$i++)
                {
                    $tbl=mysql_fetch_array($query);
                    for($j=0;$j<$cols;$j++)
                    {
                          socket_write($acc,$tbl[0]+"@");
                    }
                    echo "<br />";
                }
            }
            socket_close($sock);
        ?>
    </body>
</html> 
```

这是我的客户程序

```
<html>
    <head></head>
    <body>
        <form action="myclient.php" method="POST">
            <select name="data">
                <option value="RegNo">RegNo</option>
                <option value="Name">Name</option>
            </select>&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="text" name="mytext"></input>&nbsp;&nbsp;&nbsp;&nbsp;
            <input type="Submit" name="btn"></input>
        </form>
    </body>
</html>

<?php
    $iswrite=false;
    if(isset($_POST['btn']))
    {
        $d=$_POST['data'];
        $s=$_POST['mytext'];
        $address="127.0.0.1";
        $port="1332";
        if(isset($d) && isset($s))
        {
            $sock=socket_create(AF_INET,SOCK_STREAM,0) or die("Cannot create socket");
            $con=socket_connect($sock,$address,$port) or die("Cannot connect to socket");

            socket_write($sock,$d);
            socket_write($sock,"@");
            $write=socket_write($sock,$s);
            if($write)
                $iswrite=true;

            if($iswrite)
            {
                $read=socket_read($sock,1024);
                echo $read;
            }

            socket_close($sock);
        }
    } 
```

请给我一个想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T13:55:24.750

这就是我尝试的方式。

这是服务器的程序。

```
<?php
$address="127.0.0.1";
$port="3222";
$sock=socket_create(AF_INET,SOCK_STREAM,0) or die("Cannot create a socket");
socket_bind($sock,$address,$port) or die("Couldnot bind to socket");
socket_listen($sock) or die("Couldnot listen to socket");
$accept=socket_accept($sock) or die("Couldnot accept");
$read=socket_read($accept,1024) or die("Cannot read from socket");
echo $read;
socket_write($accept,"Hello client");
socket_close($sock);
?> 
```

这是客户的程序。

```
<?php
$address="127.0.0.1";
$port="3222";
$msg="Hello server";

$sock=socket_create(AF_INET,SOCK_STREAM,0) or die("Cannot create a socket");
socket_connect($sock,$address,$port) or die("Could not connect to the socket");
socket_write($sock,$msg);

$read=socket_read($sock,1024);
echo $read;
socket_close($sock);
?> 
```

试试这个。这很好用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-25T11:32:19.317

PHP**始终**是服务器端的。您作为客户端代码显示的内容不是在客户端运行，而是在您的服务器（即服务器端）上运行。

要使用 Web 套接字，客户端代码需要使用 Javascript。谷歌网络套接字教程。

[这是](http://net.tutsplus.com/tutorials/javascript-ajax/start-using-html5-websockets-today/)一个很好的帮助您入门的方法。

# c# - Paste Filepath via White UI \ is printed as ß

> ID：15065904
> 
> 赞同：1
> 
> 时间：2013-02-25T11:27:21.603
> 
> 标签：c#, encoding, automation

I am working on a White UI automatisation program.

My current step in the automation process is to "paste" a systempath to a file I want to open.

```
mainWindow.Keyboard.Enter("C:\\Folder\\File.jpg"); 
```

Pastes this String to the GUI but instead of \ it prints a ß

same when using

```
\u005c as enconding for \\ 
```

There must be some kind of enconding error. System where program is executed operates Win 7 32bit.

**Quickfix**

The Quickfix for this problem is to take US as standard keyboard layout. Since there seems to be a problem with the White UI Keyboard.Enter(String) implementation regarding special chars in other languages.

# java - Hibernate Criteria Api 是否完全防止 SQL 注入

> ID：15065906
> 
> 赞同：14
> 
> 时间：2013-02-25T11:27:22.443
> 
> 标签：java, hibernate, sql-injection, criteria-api, hibernate-criteria

我正在使用 Hibernate 来保护我的网站免受 SQL 注入。

听说 Hibernate Criteria API 比 HQL 更强大。Hibernate Criteria Api 是否完全防止 SQL 注入？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-25T11:31:41.513

是的，它确实。

Criteria API 以及 HQL 或 JPQL 中的查询参数都对参数进行了转义，并且不会执行恶意 SQL。

仅当您简单地将参数连接到查询中时，才会暴露该漏洞。然后任何恶意 SQL 都会成为您查询的一部分。

**编辑**OWASP 具有[**SQL 注入预防备忘**](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)单。使用条件查询相当于防御选项 1：使用准备好的语句。

# fortran90 - BiCG algorithm in Fortran not working properly?

> ID：15065908
> 
> 赞同：2
> 
> 时间：2013-02-25T11:27:27.997
> 
> 标签：fortran90

I'm working on a Bi-Conjugate Gradient algorithm in Fortran and have it fully code, following the algorithm in Saad, Y. "Iterative Methods for Sparse Linear Systems" (the plain BiCG method). However, it is not converging in the required number of iterations, nor is it returning the correct results.

The algorithm is given as in the "Unpreconditioned version" on Wikipedia ([http://en.wikipedia.org/wiki/Biconjugate_gradient_method#Unpreconditioned_version_of_the_algorithm](http://en.wikipedia.org/wiki/Biconjugate_gradient_method#Unpreconditioned_version_of_the_algorithm))

I am still relatively new to Fortran, and do not understand why exactly this is not behaving as expected because as far as I know its coded exactly as specified. If someone sees any unorthodox code, or faults in the algorithm I would be very grateful!

I have included a test matrix for simplicity:

```
 !
    !////////////////////////////////////////////////////////////////////////
    !
    !      BiCG_main.f90
    !      Created: 19 February 2013 12:01
    !      By: Robin  Fox  
    !
    !////////////////////////////////////////////////////////////////////////
    !
    PROGRAM bicg_main
    !
    IMPLICIT NONE 
    !-------------------------------------------------------------------
    ! Program to implement the Bi-Conjugate Gradient method
    ! follows algorithm in Saad
    !-------------------------------------------------------------------
    !
    COMPLEX(KIND(0.0d0)), DIMENSION(:,:), ALLOCATABLE       ::A
    COMPLEX(KIND(0.0d0)), DIMENSION(:), ALLOCATABLE         ::b
    COMPLEX(KIND(0.0d0)), DIMENSION(:), ALLOCATABLE         ::x0, x0s
    COMPLEX(KIND(0.0d0)), DIMENSION(:), ALLOCATABLE         ::x, xs
    COMPLEX(KIND(0.0d0)), DIMENSION(:), ALLOCATABLE         ::p, ps 
    COMPLEX(KIND(0.0d0))                                    ::alpha, rho0, rho1, r_rs
    COMPLEX(KIND(0.0d0)), DIMENSION(:), ALLOCATABLE         ::r,rs, res_vec
    COMPLEX(KIND(0.0d0)), DIMENSION(:), ALLOCATABLE         ::Ax, ATx
    COMPLEX(KIND(0.0d0)), DIMENSION(:), ALLOCATABLE         ::Ap, Aps
    COMPLEX(KIND(0.0d0))                                    ::beta
    !
    REAL(KIND(0.0d0))                                       ::tol,res, n2b, n2r0, rel_res
    !
    INTEGER                                                 ::n,i,j,k, maxit
    !//////////////////////////////////////////////////////////////////////// 

    !----------------------------------------------------------   
    n=2
    ALLOCATE(A(n,n))
    ALLOCATE(b(n))

    A(1,1)=CMPLX(-0.73492,7.11486)
    A(1,2)=CMPLX(0.024839,4.12154)
    A(2,1)=CMPLX(0.274492957,3.7885537)
    A(2,2)=CMPLX(-0.632557864,1.95397735)

    b(1)=CMPLX(0.289619736,0.895562183)
    b(2)=CMPLX(-0.28475616,-0.892163111)

    !---------------------------------------------------------- 

    ALLOCATE(x0(n))
    ALLOCATE(x0s(n))

    !Use all zeros initial guess
    x0(:)=CMPLX(0.0d0,0.0d0)
    DO i=1,n
       x0s(i)=CONJG(x0(i))
    END DO 

    ALLOCATE(Ax(n))
    ALLOCATE(ATx(n))
    ALLOCATE(x(n))
    ALLOCATE(xs(n))

    ! Multiply matrix A with vector x0
    DO i=1,n
       Ax(i)=CMPLX(0.0,0.0)
       DO j=1,n
          Ax(i)=Ax(i)+A(i,j)*x0(j) !==Ax=A*x0
       END DO 
    END DO    

    ! Multiply matrix A^T with vector x0
    DO i=1,n
       ATx(i)=CMPLX(0.0,0.0)
       DO j=1,n
          ATx(i)=ATx(i)+CONJG(A(j,i))*x0s(j) !==A^Tx=A^T*x0
       END DO 
    END DO    

    res=0.0d0
    n2b=0.0d0
    x=x0

    ALLOCATE(r(n))
    ALLOCATE(rs(n))
    ALLOCATE(p(n))
    ALLOCATE(ps(n))

    !Initialise
    DO i=1,n
       r(i)=b(i)-Ax(i) 
       rs(i)=CONJG(b(i))-ATx(i)
       p(i)=r(i) !p0=r0
       ps(i)=rs(i) !p0s=r0s
    END DO 

    DO i=1,n
       n2b=n2b+(b(i)*CONJG(b(i)))
       res=res+(r(i)*CONJG(r(i))) !== inner prod(r,r)
    END DO 
    n2b=SQRT(n2b)
    res=SQRT(res)/n2b

    !Check that inner prod(r,rs) =/= 0
    n2r0=0.0d0
    DO i=1,n
       n2r0=n2r0+r(i)*CONJG(rs(i))
    END DO 

    IF (n2r0==0) THEN 
       res=1d-20 !set tol so that loop doesn't run (i.e. already smaller than tol)
       PRINT*, "Inner product of r, rs == 0"
    END IF 
    WRITE(*,*) "n2r0=", n2r0

    !---------------------------------------------------------- 
    ALLOCATE(Ap(n))
    ALLOCATE(Aps(n))
    ALLOCATE(res_vec(n))

    tol=1d-6
    maxit=50 !for n=720

    k=0
    !Main loop:
    main: DO WHILE ((res>tol).AND.(k<maxit))

       k=k+1
       ! Multiply matrix A with vector p
       DO i=1,n
          Ap(i)=CMPLX(0.0,0.0)
          DO j=1,n
             Ap(i)=Ap(i)+A(i,j)*p(j)
          END DO 
       END DO    

       ! Multiply matrix A^T with vector p
       ! N.B. transpose is also conjg.
       DO i=1,n
          Aps(i)=CMPLX(0.0,0.0)
          DO j=1,n
             Aps(i)=Aps(i)+CONJG(A(j,i))*ps(j)
          END DO 
       END DO  

       rho0=CMPLX(0.0d0,0.0d0)
       DO i=1,n
          rho0=rho0+(r(i)*CONJG(rs(i)))
       END DO 
       WRITE(*,*) "rho0=", rho0

       rho1=CMPLX(0.0d0,0.0d0)
       DO i=1,n
          rho1=rho1+(Ap(i)*CONJG(ps(i)))
       END DO 
       WRITE(*,*) "rho1=", rho1

       !Calculate alpha:
       alpha=rho0/rho1
       WRITE(*,*) "alpha=", alpha

       !Update solution
       DO i=1,n
          x(i)=x(i)+alpha*p(i)
       END DO    

       !Update residual:
       DO i=1,n
          r(i)=r(i)-alpha*Ap(i)
       END DO 

       !Update second residual:
       DO i=1,n
          rs(i)=rs(i)-alpha*Aps(i)
       END DO 

       !Calculate beta:
       r_rs=CMPLX(0.0d0,0.0d0)
       DO i=1,n
          r_rs=r_rs+(r(i)*CONJG(rs(i)))
       END DO 
       beta=r_rs/rho0

       !Update direction vectors:
       DO i=1,n
          p(i)=r(i)+beta*p(i)
       END DO 

       DO i=1,n
          ps(i)=rs(i)+beta*ps(i)
       END DO 

       !Calculate residual for convergence check
    !   res=0.0d0
    !   DO i=1,n
    !      res=res+(r(i)*CONJG(r(i))) !== inner prod(r,r)
    !   END DO 
    !---------------------------------------------------------- 
       !Calculate updated residual "res_vec=b-A*x" relative to current x
       DO i=1,n
          Ax(i)=CMPLX(0.0d0, 0.0d0)
          DO j=1,n
                  Ax(i)=Ax(i)+A(i,j)*x(j)
          END DO 
       END DO   

       DO i=1,n
          res_vec(i)=b(i)-Ax(i)
       END DO 

       DO i=1,n
          rel_res=rel_res+(res_vec(i)*CONJG(res_vec(i)))
       END DO 
       res=SQRT(res)/REAL(n2b)
       WRITE(*,*) "res=",res
       WRITE(*,*) " "

    END DO main    
    !----------------------------------------------------------   
    !Output message
    IF (k<maxit) THEN 
       WRITE(*,*) "Converged in",k,"iterations"
    ELSE 
       WRITE(*,*) "STOPPED after",k, "iterations because max no. of iterations was reached"
    END IF 

    !Output solution vector:
    WRITE(*,*) "x_sol="
    DO i=1,n
       WRITE(*,*) x(i) 
    END DO  

    !----------------------------------------------------------   
    DEALLOCATE(x0,x0s, Ax, ATx, x, xs, p, ps ,r, rs, Ap, Aps, res_vec)
    DEALLOCATE(A,b)
    !
    END PROGRAM 
    !
    !//////////////////////////////////////////////////////////////////////// 
```

**RESULTS:** The results to my script are given as:

```
 STOPPED after          50 iterations because max no. of iterations was reached
     x_sol=
     (-2.88435711452590705E-002,-0.43229898544084933     )
     ( 0.11755325208241280     , 0.73895038053993978     ) 
```

while the actual results are given using MATLAB's built in bicg.m function as:

```
 -0.3700 - 0.6702i
        0.7295 + 1.1571i 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T13:33:07.310

这是您的程序中的一些瑕疵。它们是否是错误有点主观，是否修改代码完全取决于您。

1.  在这一行

    ```
    IF (n2r0==0) THEN 
    ```

    您测试（可能长时间运行）循环的结果总和是否正好为 0。这对于浮点数总是一个坏主意。如果您不知道这一点，请查看这里关于 SO 的许多问题，这些问题`floating-point`是由于对 fp 算术的合理预期的普遍不精确而引起的。我不认为您在比较左侧使用实数和在右侧使用整数会使事情变得更糟，但这并没有使它们变得更好。

2.  在您的代码中至少有两个地方计算矩阵向量乘积。您可以将这些循环替换为对内部`matmul`例程的调用（我认为，我没有像我确定的那样仔细检查您的代码）。这实际上可能会减慢您的代码，但这不是现阶段的问题。调用经过良好测试的库例程而不是自己滚动将（a）减少您必须维护/测试/修复的代码量，并且（b）更有可能提供一次正确的解决方案。一旦你的代码工作了，如果你必须担心性能。

3.  您声明了许多具有双精度的实数和复数变量，但使用以下语句初始化它们：

    ```
    A(1,1)=CMPLX(-0.73492,7.11486) 
    ```

    双精度变量有大约 15 个十进制数字可用，但在这里您只提供前 6 个数字的值。您不能依赖编译器将其他数字设置为任何特定值。相反，像这样初始化：

    ```
    A(1,1)=CMPLX(-0.73492_dp,7.11486_dp) 
    ```

    这将导致这些值被初始化为最接近`-0.73492`和的双精度数`7.11486`。当然，你必须以前写过类似的东西`dp = kind(0d0)`，还有其他方法可以强制文字常量的精度，但这是我通常这样做的方式。如果您有一个提供内部`iso_fortran_env`模块的现代 Fortran 编译器，您可以将 替换`_dp`为 now-standard `_real64`。

4.  这段代码

    ```
    x0(:)=CMPLX(0.0d0,0.0d0)
    DO i=1,n
       x0s(i)=CONJG(x0(i))
    END DO 
    ```

    可以替换为

    ```
    x0  = CMPLX(0.0d0,0.0d0)
    x0s = x0 
    ```

    使用数组语法将第一个数组归零，然后使用循环将第二个数组归零似乎有点奇怪；`CONJG`时反复调用似乎更加奇特`CONJG(0,0)==(0,0)`。

5.  这段代码

    ```
     DO i=1,n
         n2b=n2b+(b(i)*CONJG(b(i)))
         res=res+(r(i)*CONJG(r(i))) !== inner prod(r,r)
      END DO 
      n2b=SQRT(n2b)
      res=SQRT(res)/n2b 
    ```

    如果我理解正确，可以替换为

    ```
     n2b = sqrt(dot_product(b,b)) 
     res = sqrt(dot_product(r,r))/n2b 
    ```

    我实际上并没有看到您的代码有任何问题，但是使用内部函数可以减少您需要编写和维护的行数，就像`matmul`上面的情况一样。

可能还有其他不那么明显的瑕疵，但这很多应该让你开始。

# windows - Git 在 Windows 7 上停止“写入对象：100%”

> ID：15065909
> 
> 赞同：1
> 
> 时间：2013-02-25T11:27:31.990
> 
> 标签：windows, git

当我尝试将新文件**推送到****Git 存储库**时，它没有完成，屏幕上是我的工作流程：

![git 推送](../Images/2417d647104ac1557370822a355d847f.png)

我试过：

*   TortoiseGit 1.8.1.0 (git 版本 1.8.0.msysgit.0 (C:\Program Files\Git\bin))
*   Eclipse EGit 2.1.0
*   命令行

没有任何成功。我读[了这个](https://stackoverflow.com/questions/7104182/git-push-halts-on-writing-objects-100)问题，但它已经很老了（1.5 年），并且没有帮助（我安装了 git 1.7.4），并且是一样的。我是 Git 新手，请告诉我我做错了什么或如何解决？作为 Windows 7 (32) 的 Git 客户端，您有什么建议？（最好是支持命令行）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T12:04:01.387

在 Git for Windows 中推送 Git 协议仍然存在问题。因此，如果您正在尝试这样做，请检查您是否可以推送另一个协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-29T05:38:46.267

我今天遇到了这个问题。我拉然后试图推到遥控器，它达到了 100% 写入对象并就呆在那里。它没有要求回购密码，什么都没有。

该解决方案与我的 .gitconfig 文件有关。我不得不重做这个文件中的设置。

我认为在处理我的 git 存储库时（并承认通过破坏它来了解 git 的工作原理）我无意中删除了这个文件。

# c# - asp.net 检查来自 Response.OutputStream 的文件是否已保存/打开

> ID：15065911
> 
> 赞同：0
> 
> 时间：2013-02-25T11:27:33.137
> 
> 标签：c#, asp.net, excel, epplus

我正在网页上构建一个 excel 文件（使用 EPPLUS），它提供了保存或打开文件的选项。

```
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet";
Response.AddHeader("content-disposition", "attachment;  filename=Excel_List.xlsx");
package.SaveAs(Response.OutputStream);
Response.End(); 
```

这很好用。我只想知道如何检查用户是否打开/保存了文件？有活动吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:30:01.153

最简单的答案是你不能。一旦服务器将文件交给客户端，ASP.NET 就无法控制它。

理论上，您可以在 Excel 文件中放置一个宏来调用服务器上的 URL，但这是假设用户打开 Excel 文件并允许执行宏（在现代 Excel 版本中禁用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:29:56.993

你无法确定它。生成输出后，您没有关于下载过程或用户对下载文件执行的操作的信息。它主要是由 Web 浏览器安全限制引起的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:31:06.463

不，这不是 HTTP 的用途。如果您可以成功地从服务器发送所有数据，您可能会认为客户端已收到所有数据。然后，客户可以丢弃、保存、打印、复制，对数据做任何他们喜欢的事情。

如果要执行此类检查，则应从 Excel 文件本身进行。但话又说回来，你不应该，因为隐私。如果我接到一个 Excel 文件打电话回家，我不知道会发生什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:48:18.977

如果不向文件添加宏，就不可能知道他们是否真的在 Excel 中打开了它，但有一些方法可以向服务器发送确认下载已成功完成。为此，您需要在浏览器中嵌入富客户端来处理 HTTP 请求，而不是单独使用浏览器。可以使用[SoftArtisans XFile](http://fileup.softartisans.com/professional-file-transfer-solution)之类的东西 。我们的 .NET Excel 库还带有一个可以管理下载过程的 ActiveX 控件（称为[OfficeWriter 助手](http://support.softartisans.com/docs/OfficeWriter/OfficeWriterAssistant/WebHelp/whatis.htm)）。

免责声明：我为 SoftArtisans 工作

# javascript - jQuery 多个淡入淡出/切换

> ID：15065913
> 
> 赞同：0
> 
> 时间：2013-02-25T11:27:47.373
> 
> 标签：javascript, jquery

我正在尝试设置一小段 JS，但我在事情生效的顺序上遇到了问题。

当我将鼠标悬停在图像上时，详细信息块需要淡出，然后带有图标选项的第二个块淡入。

目前细节块淡出，选项块被打开，这很好。但是，当我关闭鼠标时，详细信息块的淡入发生在关闭选项之前。

如何使以下情况发生（将鼠标悬停在容器上>详细信息淡出>选项打开>鼠标关闭>选项关闭>详细信息淡入）？

这是我当前的 javascript 几乎就在那里。

```
$j('.category-products li').hover(function(){
    var product = $j(this);

    product.children('.product-bottom-info').stop().fadeToggle(700, function(){
        if(product.find('.catalog-image-container').length){  
            //this is a multi image product
            product.find('.image-bottom-controlls').stop().toggle();
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T11:37:02.547

- - 更新 - -

您只传递 .hover 1 参数，因此当输入和离开 li 时会发生这种情况。您可以传递 hover 2 个函数，mouseIn 和 mouseOut。

所以试试：

```
$j('.category-products li').hover(function(){
    var product = $j(this);

    product.children('.product-bottom-info').stop().fadeToggle(700, function(){
        if(product.find('.catalog-image-container').length){  
            //this is a multi image product
            product.find('.image-bottom-controlls').stop().toggle();
        }
    });
}, function() {
    var product = $j(this);

    product.children('.image-bottom-controlls').stop().fadeToggle(700, function(){
        if(product.find('.catalog-image-container').length){  
            product.find('.product-bottom-info').stop().toggle();
        }
    });
); 
```

* * *

Try putting `product.find('.image-bottom-controlls').stop().toggle();` in the callback on the fadeToggle. This way it always happens after the fadeToggle listener finishes.

Ref: [http://api.jquery.com/fadeToggle/](http://api.jquery.com/fadeToggle/)

# wpf - Application class in winforms and WPF

> ID：15065915
> 
> 赞同：1
> 
> 时间：2013-02-25T11:27:56.037
> 
> 标签：wpf

I am new to GUI development, i was trying to develop a sample ui application using winforms and WPF.

I found some of the code missing in WPF

```
namespace WindowsFormsApplication3
{
    static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());

        }
    }
} 
```

1.  Why this code is not present in WPF when the project is created
2.  Why we are using Application class, what is the need of this class?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:31:54.157

此代码不存在，因为在`app.xaml`定义中通常有一个`StarupURI="window1.xaml"`属性允许 WPF 基础结构连接场景背后的启动代码。当然你可以创建一个自定义的引导程序，你需要删除 StartupURI 属性并拦截应用程序启动来创建/显示一个窗口：

```
public partial class App
{
  protected override void OnStartup(StartupEventArgs e)
  {
    try
    {
      var mainView = new MainView();
      mainView.Show();
      mainView.DataContext = new YourDataContext();
    }
    catch (Exception ex)
    {
      Debug.WriteLine(ex);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:32:04.047

WPF 使用`Application.Xaml`and`Application.cs`来启动您的应用程序。

它启动您的应用程序，您可以覆盖一些方法并选择如何启动您的应用程序，为您的应用程序应用常规配置和错误处理

# youtube-api - Youtube Script API - 显示在菜单项顶部的播放器

> ID：15065919
> 
> 赞同：1
> 
> 时间：2013-02-25T11:28:09.957
> 
> 标签：youtube-api

我正在尝试将我的 youtube 视频嵌入到我的网站上，我正在使用脚本 API，因此我可以让它自动播放和自动静音。

我遇到的唯一问题是视频位于我的导航菜单下方，当子菜单退出时，它会显示在播放器下方。

我最初让播放器嵌入了 iFrame 脚本，并使用 wmode=opaque 来解决这个问题，效果很好。

它似乎不适用于脚本 API 嵌入方法。

是否可以使用 iFrame 方法停止这种情况或静音？

这是我的 YouTube 脚本：

```
<script src="http://www.google.com/jsapi"></script>
<script src="http://ajax.googleapis.com/ajax/libs/swfobject/2.1/swfobject.js"></script>
<div id="ytapiplayer">You need Flash player 8+ and JavaScript enabled to view this video.</div>
<script type="text/javascript">
google.load("swfobject", "2.1");
function onYouTubePlayerReady(playerId) {
    ytplayer = document.getElementById("myytplayer");
    ytplayer.playVideo();
    ytplayer.mute();
}
var params = { allowScriptAccess: "always" };
var atts = { id: "myytplayer" };
swfobject.embedSWF("http://www.youtube.com/v/Du_GXK-lh4M?enablejsapi=1&playerapiid=ytplayer&allowFullScreen=true&version=3&rel=0&wmode=opaque",
"ytapiplayer", "440", "280", "8", null, null, params, atts);
</script> 
```

视频嵌入可以在我的网站上看到：http: [//create.tuscorlloyds.com/](http://create.tuscorlloyds.com/)

希望我把这个贴在正确的地方。

任何帮助都会很棒！

非常感谢尼克@Tuscor Lloyds

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T10:19:44.133

我通过在 'allowScriptAccess: "always"' 文本后添加 'wmode: "transparent"' 来解决此问题。

完成代码：

```
<script src="http://www.google.com/jsapi"></script>
<script src="http://ajax.googleapis.com/ajax/libs/swfobject/2.1/swfobject.js"></script>
<div id="ytapiplayer">You need Flash player 8+ and JavaScript enabled to view this video.</div>
<script type="text/javascript">
google.load("swfobject", "2.1");
function onYouTubePlayerReady(playerId) {
ytplayer = document.getElementById("myytplayer");
ytplayer.playVideo();
ytplayer.mute();
}
var params = { allowScriptAccess: "always", wmode: "transparent" };
var atts = { id: "myytplayer" };
swfobject.embedSWF("http://www.youtube.com/v/Du_GXK-lh4M?enablejsapi=1&    playerapiid=ytplayer&allowFullScreen=true&version=3&rel=0",
"ytapiplayer", "440", "280", "8", null, null, params, atts);
</script> 
```

# javascript - 使用 JS 解析 Json 中的嵌套对象

> ID：15065920
> 
> 赞同：0
> 
> 时间：2013-02-25T11:28:11.430
> 
> 标签：javascript, jquery, json, parsing, loops

我有一个这种格式的 Json：

```
{"year":{"month1":{"date1":{"device1":{"users":6}}}} 
```

样本：

```
{"2013":{"2":{"5":{"GT-N7000":{"users":1}},"6":{"GT-N7000":{"users":9},"HTC Sensation Z710a":{"users":1}},"7":{"GT-N7000":{"users":15},"HTC Sensation Z710a":{"users":2},"M903":{"users":1}}}}} 
```

如何从 Json.xml 生成新的用户数组。例如：

```
GT-N7000 = [1, 9, 15]
M903 = [1] 
```

我试过嵌套`for`循环，我也试过`for..in`循环。我确定我犯了一个错误。有什么想法可以过滤/解析此类嵌套 json 对象所需的信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:38:04.453

我想你会做类似的事情：

```
var json = {"2013":{"2":{"5":{"GT-N7000":{"users":1}},"6":{"GT-N7000":{"users":9},"HTC Sensation Z710a":{"users":1}},"7":{"GT-N7000":{"users":15},"HTC Sensation Z710a":{"users":2},"M903":{"users":1}}}}}; 

var result = {}, year, month, date, item;
for (year in json) {
  for(month in json[year]) {
    for(date in json[year][month]) {
       for(item in json[year][month][date]) {
          if(item in result) {
              result[item].push(json[year][month][date][item].users)  // this bit might need editing?
          } else {
              result[item] = [json[year][month][date][item].users] // this be also might need editing
          }
       }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:34:28.170

大多数现代浏览器都支持原生 JSON.parse 方法。有关详细信息，请参阅此问题[浏览器原生 JSON 支持 (window.JSON)](https://stackoverflow.com/questions/891299/browser-native-json-support-window-json)

# ember.js - Ember.js：访问相关模型属性

> ID：15065923
> 
> 赞同：1
> 
> 时间：2013-02-25T11:28:23.463
> 
> 标签：ember.js, ember-data

我不知道如何将相关模型的属性输出到视图中。模型定义如下：

**俱乐部模式**

```
App.Club = DS.Model.extend({
    name: DS.attr('string'),
    slug: DS.attr('string'),
    ... // Rest of omitted attributes

    province: DS.belongsTo('App.Province'),
    city: DS.belongsTo('App.City'),
    servicetable: DS.belongsTo('App.Servicetable'),
    timetable: DS.belongsTo('App.Timetable'),
    pricetable: DS.belongsTo('App.Pricetable')
}); 
```

**服务表模型**，属于**Club**

```
App.Servicetable = DS.Model.extend({
    labels: {
        parking: 'Parking',
        bikeParking: 'Aparcamiento para bicicletas',
        shower: 'Duchas',
        materialRenting: 'Alquiler de Material',
        restaurantCoffeeshop: 'Restaurante/Cafetería',
        shop: 'Tienda',
        playschool: 'Guardería',
        locker: 'Taquillas',
        handicapped: 'Acceso minusválidos',
        sauna: 'Sauna',
        wifi: 'WiFi'      
    },
    parking: DS.attr('boolean'),
    bikeParking: DS.attr('boolean'),
    shower: DS.attr('boolean'),
    materialRenting: DS.attr('boolean'),
    restaurantCoffeeshop: DS.attr('boolean'),
    shop: DS.attr('boolean'),
    playschool: DS.attr('boolean'),
    locker: DS.attr('boolean'),
    handicapped: DS.attr('boolean'),
    sauna: DS.attr('boolean'),
    wifi: DS.attr('boolean'),

    club: DS.belongsTo('App.Club')
}); 
```

现在，输出`api/clubs/2`如下。请注意，服务表被侧载以减少请求数量：

```
{
    "club": {
        "id": "2",
        "name": "Club de P\u00e1del y Tenis Fuencarral",
        "slug": "club-de-padel-y-tenis-fuencarral",
        ... // Rest of omitted attributes
    },
    "servicetable": {
        "id": "2",
        "club_id": "2",
        "parking": "1",
        "bike_parking": "0",
        "shower": "1",
        "material_renting": "1",
        "restaurant_coffeeshop": "1",
        "shop": "1",
        "playschool": "0",
        "locker": "0",
        "handicapped": "0",
        "sauna": "0",
        "wifi": "0"
    }
} 
```

最后，**路线**和**模板**：

```
App.ClubGeneralInfoRoute = Em.Route.extend({
    setupController: function(controller) {
        controller.set('content', App.Club.find(App.clubId));
    }
});

<script type="text/x-handlebars" data-template-name="club/general-info">
    <h1>Club Info</h1>
     <label>Parking</label>
    {{view Ember.Checkbox checkedBinding="content.servicetable.parking"}}
</script> 
```

因此，当我加载页面时，我可以看到`<h1>`正在出现的模板渲染，但没有的属性`Servicetable`。

请注意，如果我尝试在此模板中呈现类似或的直接`Club`属性，它们也可以正常工作。`name``slug`

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T16:08:27.600

如果您正在旁加载，则需要配置您的适配器来执行此操作。

```
DS.RESTAdapter.configure('App.Servicetable', {
  sideloadAs: 'servicetables' 
}); 
```

接下来，您需要`servicetable` `id`在`club`的 json 中包含 ：

```
"club": {
  "id": "2",
  "servicetable_id": 2,
    ... // Rest of attributes
} 
```

当您侧载记录时，将它们作为数组传递，并以复数形式设置键：

```
"servicetables": [{
  "id": "2",
    ... // Rest of attributes
}] 
```

最后，完整的 json 响应应该如下所示：

```
{
    "club": {
      "id": "2",
      "servicetable_id": 2,
      "name": "Club de P\u00e1del y Tenis Fuencarral",
      "slug": "club-de-padel-y-tenis-fuencarral",
        ... // Rest of attributes
    },

    "servicetables": [{
      "id": "2",
      "club_id": "2",
      "parking": "1",
       ... // Rest of attributes
    }]
} 
```

# cakephp-2.0 - Cake php Multiple model validation

> ID：15065924
> 
> 赞同：0
> 
> 时间：2013-02-25T11:28:23.520
> 
> 标签：cakephp-2.0, cakephp-2.1

I have two tables :

senderinfos :

```
  id   |   Name   | email_add |  Address   |
============================================
  1    | Amit     | 1@1.com   | park Street|

```

receiverinfos:

```
  id  |  Name  | email_add|  Address  |
=======================================
  1   |  SOS   | 2@2.com      | park1

```

I am giving the model,view,And Controller Code :

Model

Senderinfo :

```
<?php
App::uses('AppModel', 'Model');
/**
 * Admin Login Model
 *
 */
 class Senderinfo extends AppModel
 {
    public $name='Senderinfo';
    public $usetables='senderinfos';

    public $validate = array(

      'contact' =>
      array(
      'rule'       => 'notEmpty', // or: array('ruleName', 'param1', 'param2' ...)
      'allowEmpty' => false,
      'message'    => 'Please Enter Contact.'
      ),

     'name' =>
      array(
      'rule'       => 'notEmpty', // or: array('ruleName', 'param1', 'param2' ...)
      'allowEmpty' => false,
      'message'    => 'Please Enter Sender Name.'
      ),

     'email_add' => array(

            'email_add' => array(
            'rule' => 'email',
            'allowEmpty' => true,
            'message' => 'Please Enter Valid Email',
            'last' => true
    )),

    );

 }
?> 
```

Receiveinfo :

```
<?php
App::uses('AppModel', 'Model');
/**
 * Admin Login Model
 *
 */
 class Receiverinfo extends AppModel
 {
    public $name='Receiverinfo';
    public $usetables='receiverinfos';

    public $validate = array(

      'contact' =>
      array(
      'rule'       => 'notEmpty', // or: array('ruleName', 'param1', 'param2' ...)
      'allowEmpty' => false,
      'message'    => 'Please Enter Contact.'
      ),

     'name' =>
      array(
      'rule'       => 'notEmpty', // or: array('ruleName', 'param1', 'param2' ...)
      'allowEmpty' => false,
      'message'    => 'Please Enter Sender Name.'
      ),

     'email_add' => array(

            'email_add' => array(
            'rule' => 'email',
            'allowEmpty' => true,
            'message' => 'Please Enter Valid Email',
            'last' => true
    )),

    );

 }
?> 
```

View

send_money.ctp

```
<content>
            <div class="pg_title txtLeft">Send Money</div>
                <?php echo $this->Form->create('Agents', array('action' => 'send_money'));?>

                    <div style="display:none;"><input type="hidden" value="POST" name="_method"></div>
                    <fieldset title="SENDER'S INFORMATION"><legend>SENDER'S INFORMATION</legend>
                    <table>
                        <tbody>
                            <tr>
                                <td><label>Contact No.<span class="red">*</span></label></td>
                                <td><?php echo $this->Form->input('Senderinfo.contact',array('label'=>false,'div'=>false,'size'=>50,'style'=>'width:330px')); ?></td>
                            </tr>
                            <tr>
                                <td><label>Sender's Name<span class="red">*</span></label></td>
                                <td><?php echo $this->Form->input('Senderinfo.name',array('label'=>false,'div'=>false,'size'=>50,'style'=>'width:330px')); ?></td>
                            </tr>
                            <tr>
                                <td><label>Email Address</label></td>
                                <td><?php echo $this->Form->input('Senderinfo.email_add',array('label'=>false,'div'=>false,'size'=>50,'style'=>'width:330px')); ?></td>
                            </tr>
                            <tr>
                                <td><label>Mailing Address</label></td>
                                <td><?php echo $this->Form->input('Senderinfo.address',array('label'=>false,'div'=>false,'type'=>'textarea','cols'=>39,'rows'=>3,'class'=>'textarea','style'=>'width:330px')); ?></td>
                            </tr>
                            </tbody>
                    </table>
                    </fieldset>
                    <fieldset title=""><legend>RECEIVER'S INFORMATION</legend>
                    <table>
                        <tbody>
                            <tr>
                                <td><label>Contact No.<span class="red">*</span></label></td>
                                <td><?php echo $this->Form->input('Receiverinfo.contact',array('label'=>false,'div'=>false,'size'=>50,'style'=>'width:330px')); ?></td>
                            </tr>
                            <tr>
                                <td><label>Receiver's Name<span class="red">*</span></label></td>
                                <td><?php echo $this->Form->input('Receiverinfo.name',array('label'=>false,'div'=>false,'size'=>50,'style'=>'width:330px')); ?></td>
                            </tr>
                            <tr>
                                <td><label>Email Address</label></td>
                                <td><?php echo $this->Form->input('Receiverinfo.email_add',array('label'=>false,'div'=>false,'size'=>50,'style'=>'width:330px')); ?></td>
                            </tr>
                            <tr>
                                <td><label>Mailing Address</label></td>
                                <td><?php echo $this->Form->input('Receiverinfo.address',array('label'=>false,'div'=>false,'type'=>'textarea','cols'=>39,'rows'=>3,'class'=>'textarea','style'=>'width:330px')); ?></td>
                            </tr>

                            </tbody>
                    </table> 
                    </fieldset>

                     <fieldset><legend>MONEY TRANSFER</legend>
                    <table>
                        <tbody> 
                            <tr>
                                <td><label>Amount(tk)<span class="red">*</span></label></td>
                                <td><?php echo $this->Form->input('Transaction.sending_amount',array('label'=>false,'div'=>false,'size'=>50,'style'=>'width:330px')); ?></td>
                            </tr>
                            <tr>
                                <td><label>Charge(tk)<span class="red">*</span></label></td>
                                <td><?php echo $this->Form->input('Transaction.charge',array('label'=>false,'div'=>false,'size'=>50,'style'=>'width:330px')); ?></td>
                            </tr>

                           <tr>
                           <?php 
                           $foo = "";
                            $options = array('1' => 'Paid','0' => ' Due');
                            $attributes = array(
                                'legend' => false,
                                'value' => true,
                                'checked'=> ($foo == "Paid"),
                            );
                            ?>
                            <td>
                             <?php echo $this->Form->radio('transaction.status',$options, $attributes);?>
                           </td>
                           </tr>

                        </tbody>
                    </table> 
                    </fieldset>
                    <fieldset><legend>CUSTOM MESSAGE</legend>
                    <table>
                        <tbody> 
                            <tr>
                                <td style="width: 158px;"><label>Message</label></td>
                                <td><?php echo $this->Form->input('transaction.message',array('label'=>false,'div'=>false,'type'=>'textarea','cols'=>39,'rows'=>3,'class'=>'textarea','style'=>'width:330px')); ?></td>
                            </tr>
                        </tbody>
                    </table> 
                    </fieldset>
                    <table>
                        <tbody>
                            <tr>
                                <td colspan="2" align="right"><input type="reset" value="Reset"> | <?php echo $this->Form->submit('SEND', array('div' => false,'formnovalidate' => true));?></td>
                            </tr>
                        </tbody>
                    </table> 
               <?php print $this->Form->end();?> 
    </content>
    <div class="clear"></div>

Controller : 

    public  function send_money()
            {
                    $this->layout='agent';
                    if(empty($this->data) == false)
                    {
                            if($this->Senderinfo->save($this->data))
                            {

                                $this->Receiverinfo->save($this->data);
                                //$this->Session->setFlash('Data inserted successfully.');
                                //$this->redirect('send_money');
                            }

                            /*if($this->Receiverinfo->save($this->data))
                            {
                                //$this->Session->setFlash('Data inserted successfully.');
                                $this->redirect('send_money');
                            }
                            */
                    }
                    else
                    {
                        //$this->set('errors', $this->Senderinfo->invalidFields()); 
                        //$this->set('errors', $this->Receiverinfo->invalidFields());       
                    } 

            } 
```

I want to insert the records in two table with perfect validation.But my validation part in not working perfectly.That means when u see my view page u'll see sender information,receiver information,money which is wrapped by html legend.I want to do validation required field at a time after clicking submit button.In this code whats happening is that when i press submit button sender information validation is working but receiver information portion validation is not working.when i put any value in sender portion,that time receiver information portion's validation works only.What should i have to do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T23:31:40.640

首先; 显然，您的应用程序中的“发送者”和“接收者”之间存在“关系”，但在您的模型/数据库定义中没有。**依赖数据库的“自动递增”ID（例如，接收者 1 和发送者 1 属于一起）是不可靠的**。自动递增 ID**将**在两个表之间“不同步”，您最终会遇到`'receiver 123'`实际应该“连接”到`'sender 125'`.

如果我正确理解这个表格的作用，就是在数据库中创建一个“金钱交易”。发送者和接收者（在这种情况下）可能**不**应该存储在单独的数据库中，除非您要提供从列表中“选择”现有发送者/接收者的选项。

在这两种情况下，您的应用程序中都应该有一个表/模型将两者“连接”起来，否则您只会有一个随机的“发送”和“接收”人的列表，但*无法*知道*哪个*人想要汇款给*哪个*收件人

如果您不打算“重用”发件人/收件人，那么正确的数据库设计应该是这样的：

```
id| sender_name | sender_email | sender_address | receiver_name | receiver_email | receiver_address
1 | Amid        | 1@1.com      | Parkstreet     | SOS           | 2@2.com        | park 1 
```

我会将此表命名为“汇款”，并将模型命名为“汇款”

两者合二为一的模型将简化验证，并保证发送者和接收者信息都存在且正确。

**如果你真的想手动保存两条单独的记录**（根据我上面的解释，我强烈建议你*不*要这样做）你应该这样做；

*   通过手动验证两个记录`$this->Mymodel->validates($data)`
*   将两个保存都包含在事务中，如果其中一个失败则回滚

有关在控制器内部手动验证的更多信息，请参见：http: [//book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html](http://book.cakephp.org/2.0/en/models/data-validation/validating-data-from-the-controller.html)

关于在 CakePHP 中使用事务的更多信息可以在这里找到：http: [//book.cakephp.org/2.0/en/models/transactions.html](http://book.cakephp.org/2.0/en/models/transactions.html)

**[更新]**

进一步浏览你的“表格”，“似乎”也有一个“交易”模型？ ***如果*是这种情况**并且模型关系在 CakePHP 中正确定义，您将能够使用 Model::saveAssociated()保存所有*相关记录。*这也会将所有保存包含在事务中（原子）

见这里： [http ://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array](http://book.cakephp.org/2.0/en/models/saving-your-data.html#model-saveassociated-array-data-null-array-options-array)

# asp.net-mvc-3 - 在通用控制器中处理多个类，请提供一些指针

> ID：15065927
> 
> 赞同：0
> 
> 时间：2013-02-25T11:28:36.073
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

我正在使用 MVC3。

我有一个非常复杂的文档类，其中包含许多子类，我们称它们为“狗”、“猫”、“羊”、“牛”、“山羊”。

我想使用通用控制器来列出、添加和编辑这些类中的每一个。

列表：我可以通过传入文档模型并遍历相关类来列出相关实体。

编辑：我需要获取 id 并识别感兴趣的类别，即“狗”，然后将其作为模型传递以进行编辑。但是下一轮我可能会编辑一个“猫”实例。通常在 MVC 中，据我了解，理想情况下会创建一个“DogController”和一个“CatController”。然而，由于这个文档类是灵活的，我不希望硬编码控制器。可能需要再添加 2 个类，即“马”和“驴”。

目前，我正在使用一些 if/else 逻辑来确保设置正确的视图并使用正确的类调用。然而，这确实感觉好像我在这里打破了一些 MVC 规则。

也许答案在于使用更正式的 ViewModel。也许我可以将其中一个属性作为子类（“狗”）。也许这可以在运行时使用 IOC 换掉？

想法和指针赞赏？

谢谢。

编辑：我尝试使用不同的输入模型创建 2 个版本的“编辑”操作

```
 [HttpPost]
    public ActionResult Edit(Dog DogModel){}

    [HttpPost]
    public ActionResult Edit(Cat CatModel){} 
```

我认为由于方法重载，MVC 可以在视图发布时选择正确的方法，然后应用模型绑定。

可能是我期望太高，或者我的理解不够。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T19:00:35.853

```
routes.MapRoute("Route", "{controller}/{action}/{name}/{id}", new { controller = "Animal", action = "search", name = "Home", id = 0 }); 
```

# android - 在android中将ffmpeg作为库运行

> ID：15065931
> 
> 赞同：7
> 
> 时间：2013-02-25T11:28:54.960
> 
> 标签：android, c, android-ndk, ffmpeg, dynamic-linking

我有一个简单的任务要做。我需要使用在 android 环境中工作的 ffmpeg 将一组图片合并到一个视频中。

在与解释如何运行 compile ffmpeg 的不同教程和示例进行了一个多星期的斗争之后，我取得了中等成功。我终于为android编译了ffmpeg。

我遵循了这个例子： [https](https://github.com/appunite/AndroidFFmpeg) ://github.com/appunite/AndroidFFmpeg 这对我来说效果最好。

作为构建 ffmpeg 的结果，具有以下目录结构：

```
[Project]/jni/ffmpeg-build/armeabi-v7a/libffmpeg.so
[Project]/jni/ffmpeg-build/armeabi/libffmpeg.so
[Project]/jni/ffmpeg-build/mips/libffmpeg.so
[Project]/jni/ffmpeg-build/x86/libffmpeg.so 
```

我还遵循了 ndk 示例，因此我从 java 运行了 c 代码：

```
#include <string.h>
#include <jni.h>
#include <stdlib.h>
#include <stdio.h>
#include <assert.h>    
#include <android/log.h>    
#include <stdlib.h>
#include <stdbool.h>

bool initted = false;    
static JavaVM *sVm;

jstring Java_com_example_hellojni_HelloJni_stringFromJNI(JNIEnv* env, jobject thiz) {

    char **argv;
    char *cmd;
    int argc;

//  cmd = "ffmpeg -version";
//  argv = parsedargs(cmd, &argc);
//  ffmpeg(argc, argv);

    return (*env)->NewStringUTF(env, "Hello from JNI !");

} 
```

我的问题是如何从我的“hello-jni”c 文件中运行 ffmpeg 函数。我读过我需要在 ffmpeg 上编写一个包装器，这是我的 hello-jni 的目的。

这是我的 Android.mk，它可能是实现我的目标的重要部分，但老实说，我不明白这个文件中设置的一些行。或者只是我不知道如何让事情发挥作用。

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
LOCAL_MODULE := ffmpeg-prebuilt
LOCAL_SRC_FILES := ffmpeg-build/$(TARGET_ARCH_ABI)/libffmpeg.so
LOCAL_EXPORT_C_INCLUDES := ffmpeg-build/$(TARGET_ARCH_ABI)/include
LOCAL_EXPORT_LDLIBS := ffmpeg-build/$(TARGET_ARCH_ABI)/libffmpeg.so
LOCAL_PRELINK_MODULE := true
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_ALLOW_UNDEFINED_SYMBOLS=true
LOCAL_MODULE    := hello-jni
LOCAL_SRC_FILES := hello-jni.c
LOCAL_C_INCLUDES := $(LOCAL_PATH)/ffmpeg-build/$(TARGET_ARCH_ABI)/include
LOCAL_SHARED_LIBRARY := ffmpeg-prebuilt
#LOCAL_CFLAGS += -g -Iffmpeg-prebuilt -Ihello-jni -Wno-deprecated-declarations 
#LOCAL_LDLIBS += -llog -lz -landroid ffmpeg-build/$(TARGET_ARCH_ABI)/libffmpeg.so 

include $(BUILD_SHARED_LIBRARY) 
```

还有一件事。我找到了一个如何包装 ffmpeg 的主要功能的示例。这对我来说是使用 ffmpeg 的最简单方法，因为我不知道 ffmpeg 的 api，我希望可以这样运行 ffmpeg： [FFmpeg 可以用作库，而不是独立程序吗？](https://stackoverflow.com/questions/2401764/can-ffmpeg-be-used-as-a-library-instead-of-a-standalone-program)

总而言之，我认为我的问题是由于完全缺乏 c/c++ 知识，尤其是如何使用 run .so 库中的任何函数。

我希望有一个人可以帮助我 ：）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-09T01:16:33.730

[https://github.com/halfninja/android-ffmpeg-x264/blob/master/Project/jni/videokit/uk_co_halfninja_videokit_Videokit.c](https://github.com/halfninja/android-ffmpeg-x264/blob/master/Project/jni/videokit/uk_co_halfninja_videokit_Videokit.c)

Look at the 'JNI_Call...' in the link above. That is how to call the wrapper for 'ffmpeg.main()' from android.

[https://github.com/halfninja/android-ffmpeg-x264/blob/master/Project/jni/videokit/ffmpeg.c](https://github.com/halfninja/android-ffmpeg-x264/blob/master/Project/jni/videokit/ffmpeg.c)

use link above and find 'main()' at the very end. This is example of very slightly altered version of ffmpeg.c (logger altered for java/android ndk).

If you study these samples , you should get feeling for how to wrapper ffmpeg.main() in one of the other projects if you want to use it. The logger issue is moot at this point so the more modern [android-ffmpeg] projects on git can just make ffmpeg.c out of the box and use it with JNI. The only thing u may still have to change is the 'exit()' at the very end of main().

# windows-phone-8 - 是否可以在 windows phone 8 中通过相机预览渲染 XNA 游戏

> ID：15065934
> 
> 赞同：2
> 
> 时间：2013-02-25T11:29:08.870
> 
> 标签：windows-phone-8, xna-4.0, augmented-reality

我有一个演示工作，我可以在 windows phone 8 中通过相机预览渲染一些文本，我现在想扩展应用程序以通过相机预览以增强现实风格渲染 xna 游戏内容。

这甚至可以用 XNA 实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T19:28:44.337

是的，有可能

事实上，我们这样做是为了我们正在制作的游戏

[看看这个](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202984%28v=vs.105%29.aspx) 和 [这个](http://www.silverlightshow.net/items/Capturing-the-Webcam-in-Silverlight-4.aspx)

# sql-server - 相关产品的表设计

> ID：15065936
> 
> 赞同：1
> 
> 时间：2013-02-25T11:29:18.510
> 
> 标签：sql-server, database-design

我是 SQL Server 的新手，我被指派在我们现有的数据库中实现“相关产品”功能。我们有一个看起来像这样的表产品

```
ProductID int, PK
Name nvarchar(100)
Price decimal
CoverImageURL nvarchar(400)
-- couple more columns exist 
```

我正在考虑向现有数据库中添加另一列，例如 RelatedProductID，但不确定这是否是好的设计。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-25T11:35:23.300

只有当每个产品都可以有一个相关的产品时，您的解决方案才有效。否则，如果一个产品可以有多个相关产品，您需要一个引用表来保存产品之间的所有关系。

尝试像这样添加一个新表：

```
CREATE TABLE dbo.RelatedProducts
(
FirstProductId int not null,
SecondProductId int not null
) 
```

因此，当您需要某个产品的所有相关产品时，您可以使用以下查询检索这些产品。

```
SELECT SecondProductId
FROM RelatedProducts
WHERE FirstProductId = @ProductID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:37:49.477

取决于你需要什么*样*的关系。

我怀疑您实际需要的是“多对多”关系，在这种情况下，您将需要一个额外的“联结”表：

```
CREATE TABLE ProductRelation (
    ProductID1 int REFERENCES Product (ProductID),
    ProductID2 int REFERENCES Product (ProductID),
    PRIMARY KEY (ProductID1, ProductID2)
) 
```

# json - 如何在 extjs4 中将模型特定属性发送到服务器端？

> ID：15065937
> 
> 赞同：1
> 
> 时间：2013-02-25T11:29:27.693
> 
> 标签：json, extjs, extjs4, extjs-mvc

我在 extjs4 MVC 结构中工作，我一直在 extjs4 中遇到问题，所有字段都提交到服务器端，但我只想将模型类的一些文件发送到服务器端。我怎样才能得到这个输出？

1）这是我的模型课

```
Ext.define('ab.model.sn.UserModel',{
    extend: 'Ext.data.Model',
    //idproperty:'userId',//fields property first position pk. 
    fields: ['userId','firstName','middleName','lastName','languageId','primaryEmail','birthDate','password','securityQuestionId','securityQuestionAnswer','isMale','creationTime','ipAddress','confirmationCode','userStatusId',],
    proxy:
    {
        type:'ajax',
            //type:'localstorage',
            //id:'users',
        api:
        {
            read:'http://localhost/balaee/Balaee/index.php/SocialNetworking/user/AuthenticateLogin',
            create:'http://localhost/balaee/Balaee/index.php/SocialNetworking/user/AuthenticateLogin122',
            update:'http://localhost/balaee/Balaee/index.php/SocialNetworking/user/AuthenticateLogin123'
        },//end of api
        reader:
        {
            type:'json',
        },//end of reader
        writer:
        {
            type:'json',
            root:'records',
        },//End of writer

    }//end of proxy
}); 
```

2）这是我的一些控制器文件代码

```
var userObject = Ext.ModelManager.create(
        {
            firstName:record.get('firstName'),
            password:record.get('password'),

        },'ab.model.sn.UserModel');

userObject.save({    
    success: function(record, operation) 
    {
        console.log("registration successssssssssss  "+record.get('userId'));
    },//End of success function
    failure: function(record, operation) 
    {
        console.log("Inside failure functionnnnn");
    },//End of failure function
    callback: function(record, operation)
    {
        console.log("Inside callback functionnnnnn");   
    }//End of callback function
});// End of check save function 
```

3) 数据将以 json 格式传输

```
{"records":{"userId":"","firstName":"ram","middleName":"","lastName":"","languageId":"","primaryEmail":"","birthDate":"","password":"sham","securityQuestionId":"","securityQuestionAnswer":"","isMale":"","creationTime":"","ipAddress":"","confirmationCode":"","userStatusId":"","id":null}} 
```

4）但我只想发送名字和密码。我不想发送所有字段。如何将数据发送到服务器端。

我想要这种格式的json

```
{"records":{"firstName":"ram","password":"sham"}} 
```

请给我一些建议....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:01:19.523

你只需要覆盖 writer 的 getRecordData 函数。像这样。

```
 writer:
            {
                type:'json',
                root:'records',
                getRecordData: function (record) { return {"firstName" :record.data.firstName,"password": record.data.password}; },
            }, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:03:22.177

nscrob 的答案编码较少，因此可能是首选，但模型上还有一个[内置配置](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Field-cfg-persist)：`persist: false`. 它防止模型字段被发送到服务器端。

恕我直言，模型配置似乎并没有像在 sencha 示例中那样被使用（或者可能是因为它们没有在 sencha 示例中使用）。我认为如果您在模型中定义数据类型而不是让客户端解决它，它还可以节省少量资源，例如：

```
Ext.define('ab.model.sn.UserModel',{
    extend: 'Ext.data.Model',
    //idproperty:'userId',//fields property first position pk.

    // using field type definitions and explicit persistance
    fields: [
        {name: 'userId',                type: 'int',    persist: false},
        {name: 'firstName',             type: 'string'},
        {name: 'middleName',            type: 'string', persist: false},
        {name: 'lastName',              type: 'string', persist: false},
        {name: 'languageId',            type: 'int',    persist: false},
        {name: 'primaryEmail',          type: 'string', persist: false},
        {name: 'birthDate',             type: 'date',   dateFormat: 'c', persist: false},
        {name: 'password',              type: 'string'},
        {name: 'securityQuestionId',    type: 'int',    persist: false},
        {name: 'securityQuestionAnswer', type: 'string',persist: false},
        {name: 'isMale',                type: 'bool',   persist: false},
        {name: 'creationTime',          type: 'date',   dateFormat: 'c', persist: false},
        {name: 'ipAddress',             type: 'string', persist: false},
        {name: 'confirmationCode',      type: 'string', persist: false},
        {name: 'userStatusId',          type: 'int',    persist: false}
    ],
    proxy:
    {
        type:'ajax',
            //type:'localstorage',
            //id:'users',
        api:
        {
            read:'http://localhost/balaee/Balaee/index.php/SocialNetworking/user/AuthenticateLogin',
            create:'http://localhost/balaee/Balaee/index.php/SocialNetworking/user/AuthenticateLogin122',
            update:'http://localhost/balaee/Balaee/index.php/SocialNetworking/user/AuthenticateLogin123'
        },//end of api
        reader:
        {
            type:'json',
        },//end of reader
        writer:
        {
            type:'json',
            root:'records',
        },//End of writer

    }//end of proxy
}); 
```

就像我说的，还有更多的编码，但我想我会把它作为这个场景的内置处理（而不是覆盖）扔掉。如果需要，您也可以删除字段类型定义，它们不是定义`persist`属性所必需的。

# java - 声明初始化和构造函数初始化的区别

> ID：15065939
> 
> 赞同：4
> 
> 时间：2013-02-25T11:29:37.133
> 
> 标签：java, variables, constructor

以下两者有什么区别，哪个更可取？

```
public class foo {

    int i = 2;

}

public class foo {

  int i;
    foo() {

        i = 2;

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:52:02.440

在您的示例中，行为语义没有区别。在 Java 中，所有实例字段初始化器（和实例块）都在超类初始化*之后、构造函数体**之前*执行；见[JLS 12.5](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.5)。

区别在于代码的可读性和（在其他示例中）避免重复编码和脆弱性¹。这些需要根据具体情况进行评估。

还值得注意的是，在某些情况下您必须在构造函数中进行初始化；即当初始化依赖于构造函数参数时。

* * *

^(1 - 重复性和脆弱性问题是同一件事的反面。如果您有多个构造函数，“在构造函数中初始化”方法往往会导致重复。如果您添加额外的字段，您可能会将初始化添加到所有相关的构造函数；即脆弱性。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:32:32.393

如果您有两个或多个构造函数并且每个构造函数的初始化值不同，那么您应该使用构造函数初始化，因为没有办法对成员初始化做同样的事情......

但是，如果您只有一个构造函数……您可以使用成员初始化来提高代码清晰度……

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:33:26.097

首先，我认为第二个示例应如下所示：

```
public class foo{

  int i;
  foo(){

     i = 0;

  }

} 
```

否则 i 只是 C'tor 范围内的局部变量。其次，第一个示例显示了在调用类 C'tor 之前调用的初始化。如果无论使用什么 C'tor 都希望发生这种情况，这很好。它还使您能够将 i 声明为只读。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T11:34:56.243

特别是在这种情况下，这两种变体没有区别。第一个变体更可取，因为构造函数内部字段的初始化，像往常一样，使用来自构造函数参数的外部值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T11:32:37.007

在您的第一个示例中，i 是类 foo 的实例变量（更好的名称是 Foo）。它在类加载时初始化。

在您的第二个示例中， i*也是一个*实例变量，但在这种情况下是在 foo() 构造函数中初始化的。

这里没有真正的区别，尤其是对于原语。

但是，在多线程环境中，如果您确实打算在构造函数中初始化 ivars，并且这些 ivars 是非原始的，则需要避免暴露部分构造对象的风险。这样做的原因是构造函数不同步并且不能`synchronised`应用关键字，但是两个线程不能构造同一个对象。

因此，为避免这种情况，您永远不应该`this`在构造函数中公开。这样做的一种方法是调用非最终方法。这样做，比如说调用一个抽象方法，允许一些未知的代码对你未完成的对象做一些事情。显然，如果您在声明中进行初始化，则无法做到这一点。

ps我认为在*Effective Java*中有一些东西，但找不到任何东西。

# java - grails War部署错误

> ID：15065940
> 
> 赞同：0
> 
> 时间：2013-02-25T11:29:40.837
> 
> 标签：java, tomcat, grails, tomcat7

我正在使用 Tomcat7.0.20 和 grails 1.3.7 我在部署 war 文件时收到此错误。

> 2013 年 2 月 25 日上午 1:54:57 org.apache.catalina.startup.HostConfig deployWAR 信息：部署 Web 应用程序存档 IH-core.war 2013 年 2 月 25 日上午 1:55:35 org.apache.catalina.core.ContainerBase addChildInternal SEVERE: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: 无法在 org.apache.catalina.util.LifecycleBase 启动组件 [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/IH-core]] .start(LifecycleBase.java:152) 在 org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:812) 在 org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787) 在 org. apache.catalina.core.StandardHost.addChild(StandardHost.java:607) 在 org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:932) 在 org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:723) 在 org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:470) 在 org.apache.catalina.startup.HostConfig.check(HostConfig. java:1363) 在 org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:294) 在 org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119) 在 org.apache.catalina.util .LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90) at org.apache.catalina.core.ContainerBase.backgroundProcess(ContainerBase.java:1242) at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1400 ) 在 org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1410) 在 org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1389) 在 java.lang.Thread.run(Thread.java:662) 引起：java.lang.NoSuchMethodError：org.apache .tomcat.util.http.mapper.Mapper.addWrapper(Ljava/lang/String;Ljava/lang/Object;ZZ)V 在 org.apache.catalina.core.StandardContext.addServletMapping(StandardContext.java:3173) 在 org. org.apache.catalina.deploy.WebXml.configureContext(WebXml.java:1301) 中的 apache.catalina.core.StandardContext.addServletMapping(StandardContext.java:3130) org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig. java:1390) 在 org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:896) 在 org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:322) 在 org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90) 在 org.apache.catalina.core.StandardContext 的 org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119) .startInternal(StandardContext.java:5103) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:148) ... 2013 年 2 月 25 日上午 1:55:35 org.apache.catalina.startup 还有 15 个.HostConfig deployWAR 严重：部署 Web 应用程序存档时出错 IH-core.war java.lang.IllegalStateException：ContainerBase.addChild：启动：org.apache.catalina.LifecycleException：无法启动组件 [StandardEngine[Catalina].StandardHost[localhost]。 StandardContext[/IH-core]] 在 org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:816）在 org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:787) 在 org.apache.catalina.core.StandardHost.addChild(StandardHost.java:607) 在 org.apache.catalina.startup.HostConfig .deployWAR(HostConfig.java:932) 在 org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:723) 在 org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:470) 在 org. apache.catalina.startup.HostConfig.check(HostConfig.java:1363) 在 org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:294) 在 org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport. java:119) 在org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90) 在org.apache.catalina.core.ContainerBase。backgroundProcess(ContainerBase.java:1242) at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1400) at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.processChildren(ContainerBase.java:1410)在 org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1389) 在 java.lang.Thread.run(Thread.java:662)运行（线程.java：662）运行（线程.java：662）

请帮助我找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T17:24:13.983

如果我没记错的话，请检查 config.groovy 中的 servlet 版本设置。

您的错误似乎与 Grails 中的某些内容引用的一些 tomcat 代码有关。

# php - php拆分字符串转义配额

> ID：15065941
> 
> 赞同：2
> 
> 时间：2013-02-25T11:29:48.753
> 
> 标签：php, regex, split

我需要以逗号分隔管理转义。这是一个字符串示例：

```
var1,t3st,ax_1,c5\,3,last 
```

我需要这个拆分：

```
var1
t3st
ax_1
c5\,3
last 
```

请注意这一点：“c5\,3”未拆分。

我试过这个：

```
$expl=preg_split('#[^\\],#', $text); 
```

但是我丢失了每个拆分的最后一个字符。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:37:29.277

使用这个正则表达式

```
$str = 'var1,t3st,ax_1,c5\,3,last';
$expl=preg_split('#(?<!\\\),#', $str);

print_r($expl);  // output Array ( [0] => var1 [1] => t3st [2] => ax_1 [3] => c5\,3 [4] => last ) 
```

工作示例[http://codepad.viper-7.com/pWSu3S](http://codepad.viper-7.com/pWSu3S)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T11:35:32.587

尝试向后看：

```
preg_split('#(?<!\\),#', $text); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:36:01.110

做一个三阶段的方法

首先替换\，用一些“独特”的东西，比如\\

用“，”分开

用。。。来代替 \，

这不如正则表达式好，但它会起作用；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T11:39:42.863

这个可以吗 ？

```
<?php

$text = "var1,t3st,ax_1,c5\,3,last";
$text = str_replace("\,", "#", $text);
$xpode = explode(",", $text);
$new_text = str_replace("#", "\,", $xpode);
print_r($new_text);

?> 
```

输出

```
Array ( [0] => var1 [1] => t3st [2] => ax_1 [3] => c5\,3 [4] => last ) 
```

# guice - 如何将注入参数和辅助参数传递给 Guice Provider？

> ID：15065943
> 
> 赞同：3
> 
> 时间：2013-02-25T11:29:51.000
> 
> 标签：guice

我有以下提供者：

```
 public class GuiceResourceProvider implements Provider<WebResource> {

    @Inject
    private Configuration configuration;
    @Inject
    private Environment environment;

    private String name;

    @Inject
    public GuiceResourceProvider(@Assisted("name") String name) {
        this.name = name;
    }

    @Override
    public WebResource get() {
        if (name == "default") {
            String connectionsDSResourceUrl = "http://localhost:" + this.configuration.getHttpConfiguration().getPort();
            Client connectionsDSHttpClient = new JerseyClientBuilder().using(this.configuration.getHttpClientConfiguration()).using(this.environment).build();
            connectionsDSHttpClient.addFilter(new RequestIdClientFilter());
            return connectionsDSHttpClient.resource(connectionsDSResourceUrl);
        } else if(name == "other"){
            return ......
        }
    }
} 
```

我需要创建这个 Provider 的 2 个实例，一个将绑定一个用“default”注释的 WebResource 注入，一个将绑定一个用“other”注释的 WebResource 注入。

让 Guice 创建 Provider 实例如下：

```
 bind(WebResource.class).annotatedWith(Names.named("default")).toProvider(GuiceResourceProvider.class).in(Scopes.SINGLETON);
bind(WebResource.class).annotatedWith(Names.named("other")).toProvider(GuiceResourceProvider.class).in(Scopes.SINGLETON); 
```

注入参数没问题，但我无法提供自定义参数。如果我尝试手动实例化一个实例并提供自定义参数，那么注入的当然有问题。如果我遵循辅助表示法，问题是我需要在模块中注入提供者的工厂，当然，这完全关闭了！

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T06:57:03.473

对于可能感兴趣的每个人，我都找到了答案。如果要将注入的和自定义的参数都传递给提供者，请将注入的参数从构造函数移动到字段并使用构造函数传递您自己的参数。绑定时，首先创建 Provider 的实例，将参数传递给构造函数，然后在此实例上调用 requestInjection 以将其添加到注入图中，然后将您的类绑定到 Provider 实例，如下所示：

```
GuiceResourceProvider guiceResourceProvider = new GuiceResourceProvider("default");
requestInjection(guiceResourceProvider); 
```

bind(WebResource.class).annotatedWith(Names.named("default")).toProvider(guiceResourceProvider).in(Scopes.SINGLETON);

这是提供者：

```
public class GuiceResourceProvider implements Provider<WebResource> {

@Inject
private Configuration configuration;
@Inject
private Environment environment;

private String name;

@Inject
public GuiceResourceProvider(String name) {
    this.name = name;
}

@Override
public WebResource get() {
    if (name == "default") {
        String connectionsDSResourceUrl = "http://localhost:" + this.configuration.getHttpConfiguration().getPort();
        Client connectionsDSHttpClient = new JerseyClientBuilder().using(this.configuration.getHttpClientConfiguration()).using(this.environment).build();
        connectionsDSHttpClient.addFilter(new RequestIdClientFilter());
        return connectionsDSHttpClient.resource(connectionsDSResourceUrl);
    } else if(name == "other"){
        return ......
    }
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-25T18:59:47.553

这里有一些问题：

*   不要将字符串与进行比较`==`，将它们与 进行比较`equals`。`==`按引用进行比较，但两者可能是对相等字符串的不同实例的引用。
*   Provider 是一个零参数的工厂。如果您有工厂，则不需要提供者。
*   辅助注入与绑定注释（如`@Named`. 绑定注释只是查找提供程序的映射键的一半（Class 或 TypeLiteral 是另一半）。辅助注入允许您在注入时获取一个或多个参数，并自动连接一个为您执行此操作的接口。`@Assisted("foo")`仅当您在单个工厂方法中接受多个相同的参数类型时，辅助注入参数才需要注释；否则Guice可以弄清楚。
*   没有很好的方法可以从您要注入的依赖项中读取绑定注释中的参数值——但是由于具有不同参数值的绑定注释彼此不相等，因此可以单独绑定每个注释。

我认为您的逻辑在方法中看起来最好`@Provides`：

```
public class WebResourceModule extends AbstractModule {

  @Override public void configure() { }

  @Provides @Named("default") @Singleton WebResource makeDefaultResource(
      Configuration configuration, Environment environment) {
    String connectionsDSResourceUrl = "http://localhost:" + this.configuration.getHttpConfiguration().getPort();
    Client connectionsDSHttpClient = new JerseyClientBuilder().using(this.configuration.getHttpClientConfiguration()).using(this.environment).build();
    connectionsDSHttpClient.addFilter(new RequestIdClientFilter());
    return connectionsDSHttpClient.resource(connectionsDSResourceUrl);
  }

  @Provides @Named("other") @Singleton WebResource makeOtherResource(
      YourDependencies here) {
    return somethingElse();
  }
} 
```

但是，如果您想使用自定义工厂逻辑获取*任何*字符串，只需创建一个不实现的单方法可注入类`Provider`，并使用它来创建和返回`WebResource`您想要的任何内容。

# backbone.js - 视图中的主干点击会触发它的所有事件

> ID：15065949
> 
> 赞同：0
> 
> 时间：2013-02-25T11:30:05.620
> 
> 标签：backbone.js, backbone-views

我正在开发一个应用程序，其中有一个主干集合视图，它在循环中呈现子项视图：

```
# Collection view:

class Newgvbtool.Views.ProductTypesIndex extends Backbone.View

  template: JST['product_types/index']

  tagName: 'section'

  events: ->
    'click .new-item': @newItem

  initialize: (options)->
    @company_id = options.company_id

    Newgvbtool.vent.on 'product_types_index:add:model', @addToCollection
    Newgvbtool.vent.on 'product_types_index:edit:model', @editModel
    @collection.on 'reset', @render
    @collection.on 'add', @appendItem

  render: =>
    $(@el).html @template()
    @collection.each @appendItem

    @

  newItem: (e) =>
    e.preventDefault()
    @showForm null

  showForm: (model) =>
    if @editView? then @editView.remove()

    @editView = new  Newgvbtool.Views.ProductTypeEdit model: model, company_id: @company_id

    $(@editView.render().el).dialog( 
      show: 
        title: 'Product type'
        effect: 'drop'
        direction: "up"
      hide: "fade"
      autoOpen: true
      modal: true
      draggable: false
      minWidth: 400
      height: "auto"
      resizable: false
    )

  appendItem: (model)=>
    view = new Newgvbtool.Views.ProductType model: model
    $('tbody').append(view.render().el) unless $('#product-types tbody').find("tr[data-id=#{model.id}]").length

  addToCollection: (model) =>
    @collection.update model
    model.trigger('highlight')
    $(@editView.el).dialog 'close'

  editModel: (model) =>
    @showForm model

# Item view

class Newgvbtool.Views.ProductType extends Backbone.View

  template: JST['product_types/product_type']
  tagName: 'tr'

  events:
    'click .delete-item': 'deleteItem'
    'click .edit-item': 'editItem'

  initialize: (options)->
    @model.on 'highlight', @highlight
    @model.on 'change', @render

  render: =>
    $(@el).attr('data-id', @model.get('id')).html @template( model: @model)
    @

  highlight: =>
    @$('td').effect 'highlight', 1000

  deleteItem: =>
    if confirm "Are you sure?"
      @model.destroy wait: true
      $(@el).remove()

  editItem: =>
    Newgvbtool.vent.trigger "product_types_index:edit:model", @model 
```

这是我用来渲染每个项目的模板：

```
%td
  = @model.get 'name'
%td
  = @model.get 'description'
%td.opts
  %a.edit-item{ href: '#' }
    %span.icon-edit
  %a.delete-item{ href: '#' }
    %span.icon-remove-sign 
```

问题是每次单击一个项目时，都会触发编辑和删除项目事件。

我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T13:54:05.910

错误是我将项目视图添加到集合视图的方式。

我是这样做的：

```
$('tbody').append(view.render().el) 
```

并且没有正确的事件委托参考，所以我只是添加了@（或这个），现在它就像一个魅力

```
@$('tbody').append(view.render().el) 
```

# java - 如何管理 Web 服务调用和数据库之间的分布式事务协调？

> ID：15065951
> 
> 赞同：1
> 
> 时间：2013-02-25T11:30:08.800
> 
> 标签：java, sap-ase, distributed-transactions

我们有一个外部 Web 服务，它公开了几个 API`lock`和`unlock`. 以下是在我们的系统中保存值时遵循的步骤。

```
try 
  call lock
  save changes in single DB transaction
catch user_defined_exception
  call unlock 
```

如果有任何事务超时，我们将不会调用，`unlock`因为此超时异常不被视为用户定义异常的一部分。同样在将来，可能会引入任何新的异常，我们不想包括所有这些异常并进行解锁。
我们正在寻找任何工业标准/模式来在服务和数据库事务之间进行事务协调。
我们的应用程序是内置的`java`，数据库是`Sybase ASE`. 非常感谢任何提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T09:33:13.717

在 Java 中正确锁定异常的[推荐做法如下：](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html)

```
lock();
try {
  doStuff();
} finally {
  unlock();
} 
```

这确保无论抛出（或不抛出）什么异常都会释放锁，而无需捕获或重新抛出它。但是，在您的情况下，这可能仍然不是最安全的事情，因为`unlock()`它是远程调用并且本身可以引发异常。

服务和数据库之间协调的标准是[WS-AT](http://docs.oasis-open.org/ws-tx/wstx-wsat-1.1-spec-os/wstx-wsat-1.1-spec-os.html)。任何 Java 应用程序服务器都应该支持它，与 JTA 桥接，并在数据库本身上进行两阶段提交。在应用程序服务器中配置数据库连接时，请确保选择 XADataSource 选项。

# android - 如何从 Apk 扩展文件开始

> ID：15065952
> 
> 赞同：0
> 
> 时间：2013-02-25T11:30:10.967
> 
> 标签：android, expansion

我有 google 帐户，我可以看到 apk 文件大小的限制为 50 MB，但我知道有一种称为扩展文件的东西会打破 50Mb 文件大小的障碍，

我在[这里找到了一个教程：](http://ankitthakkar90.blogspot.in/2013/01/apk-expansion-files-in-android-with.html)

但是我仍然不知道如何开始，从哪里开始，我正在尝试从 POC 开始，了解如何使用它。

所有的先决条件是什么？

当我尝试使用它时：

从现有源创建两个库项目。

```
<sdk>/extras/google/play_apk_expansion/downloader_library
<sdk>/extras/google/play_licensing/library 
```

它给了我很多错误。我做错了什么吗？

请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T15:41:46.073

我不知道你是否已经想通了。

基本上，如果您已将文件从 SDK 复制到工作区，则必须手动连接文件夹。（因为它们在 SDK 中被正确引用）

如果您使用 Eclipse，那么右手边的 download_library 应用程序文件夹 > 属性 > Android。

您将看到库，您要做的就是添加缺少的库的位置。

添加 >（在您的工作区中找到该文件夹​​）

希望这有帮助！

# xslt - gMonthDay 差异

> ID：15065959
> 
> 赞同：1
> 
> 时间：2013-02-25T11:30:18.163
> 
> 标签：xslt

你能回答这个吗？

为什么这不起作用...

`<xsl:value-of select="xs:gMonthDay('--12-14') - xs:dayTimeDuration('P5D')">`

xs:date 在我更改值时有效，但 xs:gMonthDay 不允许我执行减法、加法等，为什么？

使用 xslt 2.0 撒克逊谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T14:37:45.860

> 为什么这不起作用...

因为规范不允许。XPath 算术和比较运算符是为 xs:date 和 xs:dateTime 定义的，但不是为 gThingThing 类型定义的。

为什么规范不允许呢？因为日期/时间处理已经占了规范和工作组时间和精力的一个非常不成比例的部分。

# sql-server - 在 Reporting Services 报表中隐藏页面滚动控件

> ID：15065965
> 
> 赞同：2
> 
> 时间：2013-02-25T11:30:30.063
> 
> 标签：sql-server, reporting-services, sql-server-2008-r2

如果我强制将报告放在一页上，是否也可以隐藏以下控件？

![在此处输入图像描述](../Images/8247fe9140169bfd19f491ee06c4e181.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T13:38:07.853

先看这篇[文章](http://msdn.microsoft.com/en-us/library/ms152835.aspx)

您可以像这样隐藏工具栏：

```
http://<Server Name>/reportserver?/Sales/YearlySalesSummary
&rs:Command=Render&rs:Format=HTML4.0&rc:Toolbar=false 
```

您正在寻找的参数是：

```
&rc:Toolbar=false 
```

**编辑 - 使用报表查看器控件（Win Forms）仅隐藏页面导航**

[首先下载报表查看器控件](http://www.microsoft.com/en-us/download/details.aspx?id=6442)

然后按照以下步骤操作：

*   将报表查看器控件添加到窗体
*   设置报表服务器和报表路径 URL

接下来在`Form1_Load`方法中自定义报表属性

```
private void Form1_Load(object sender, EventArgs e)
        {
            rpViewer.ShowPageNavigationControls = false;
            this.rpViewer.RefreshReport();
        } 
```

结果应如下所示： ![在此处输入图像描述](../Images/cd4384f014979cb4638b315203eae757.png)

# c# - 两个方法返回不带参数的不同类型，怎么调用？

> ID：15065967
> 
> 赞同：3
> 
> 时间：2013-02-25T11:30:39.957
> 
> 标签：c#, .net, visual-studio, obfuscation, ambiguity

有一些 .net Dll 库，这个 Dll 包含一个具有两个同名方法的类，例如：

```
void b()
{

}

bool b()
{

} 
```

这在 C# 中是不可能的，但在内部似乎没问题，添加此类库时如何从我的代码中调用一种方法？

我需要最简单的方法，我知道使用反射可以，但是还有其他更简单的方法吗？

****编辑****

我在图书馆的元数据中得到了这个：

```
#region Assembly XXXX.dll, v xxxx
// C:\....................
#endregion

namespace XXXX.YYYYY
{
    public class a : IDisposable
    {

        .
        .
        .
        .
        .
        public void b();
        public bool b();
        .
        .
        .
        .
        public void Dispose();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:32:54.927

哦，那太可怕了。从 C# 调用它的唯一方法是通过反射；您可能需要使用`GetMethods()`并从数组中找到您想要的那个（`GetMethod()`重载可能不喜欢那个）。

拥有 后`MethodInfo`，您可以只使用`Invoke`，也可以使用`Delegate.CreateDelegate`来获取可以重复使用的类型化委托。这取决于您调用它的频率，以及哪个更可取。

# ruby-on-rails - 从两个表中获取值

> ID：15065968
> 
> 赞同：0
> 
> 时间：2013-02-25T11:30:40.757
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 Ruby on Rails 的新手。我有 2 个模型：`Device`和`Property`. `Device`包含以下字段：`id,name`和`Property`包含：文件`id,device_id,speed,time`。是模型`device_id`中表的外键。所以我的模型 device.rb 和 property.rb 如下所示：`id``Device`

设备.rb

```
class Device < ActiveRecord::Base
  attr_accessible :name
  has_many :properties
end 
```

属性.rb

```
class Property < ActiveRecord::Base
  attr_accessible :device_id, :speed, :time
  belongs_to :device
end 
```

我必须在下拉列表中填充设备详细信息。它工作正常。从下拉列表中选择名称时，我还必须从属性数据库中获取值。

控制器代码通过传递设备 id 来获取值，如下所示：

```
def show
  @properties = Property.find(params[:device][:id])
end 
```

属性表中的测试值如下：

```
id  device_id time          speed   
1   1         13:23:00      13  
2   2         23:20:00      63.8    
3   1         10:35:        100.56 
```

设备型号：

```
id  name    
1   2345    
2   2345 
```

在选择设备型号 id 1 时，我必须获取以下详细信息：

```
id  device_id     time         speed    
1   1             13:23:00         13   
3   1             10:35:00         100.56 
```

在 show.html.erb 中查看如下：

```
<% if (@properties.blank?) %>
  <p><strong>Search results not found.</strong></p>
<% else %>
  <p><strong>Available employe Details are listed below <strong></p>
  <ul>
  <% @properties.each do |c| %> 
    <li>
      <b><%=@properties.id%> <%=@properties.speed%> <%=@properties.time%></b>
    </li>
  <% end %>
</ul>
<% end %> 
```

运行此程序时出现此错误

```
undefined method `each' for #<Property:0x3ee3ff8>
10: <% else %>
11: <p><strong>Available employe Details are listed below <strong></p>
12: <ul>
13: <% @properties.each do |c| %> 
14: <li>
15: <b><%=@properties.id%> <%=@properties.speed%> <%=@properties.time%></b>
16: </li> 
```

但是，当按照以下方式拧 show.html.erb 时，只有一个数据正在获取

```
id  device_id     time         speed    
1   1             13:23:00         13   

<% if (@properties.blank?) %>
  <p><strong>Search results not found.</strong></p>
<% else %>
  <p><strong>Available employe Details are listed below <strong></p>
  <ul><li>
  <b><%=@properties.id%> <%=@properties.speed%> <%=@properties.time%></b>
  </li></ul>
<% end %> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T11:45:59.977

```
@properties = Property.find(params[:device][:id]) 
```

只会返回一个属性而不是数组

你需要这样的东西

```
@properties = Property.where(:device_id => params[:device][:id]) 
```

为了获得一个数组，然后您可以对每个数组进行迭代

# android - 用 9 个图像文件创建 1 个图像视图

> ID：15065970
> 
> 赞同：0
> 
> 时间：2013-02-25T11:30:46.420
> 
> 标签：android, bitmap, imageview

我搜索了一种从 9 个图像文件创建单个 imageView 的方法，如下所示：

IMG1 - IMG2 - IMG3

IMG4 - IMG5 - IMG6

IMG7 - IMG8 - IMG9

我看到了几个对我有帮助的有趣话题。其中一个谈论可能适合我需要的解决方案。在本主题中，Dimitar Dimitrov 提出以下建议：

> 您可以尝试使用原始数据，通过将图像中的像素数据提取为 32 位 int ARGB 像素数组，合并到一个大数组中，并创建一个新的位图，使用 Bitmap 类的方法，如 copyPixelsToBuffer( )、createBitmap() 和 setPixels()。来源：[在 Android 的 ImageView 中渲染两个图像？](https://stackoverflow.com/questions/1329720/render-two-images-in-imageview-in-android?answertab=active#tab-top)

所以我可以从每个图像文件中提取 32 位 ARGB 像素，然后创建一个位图，我可以在其中使用 setPixels 函数进行填充。问题是**我不知道如何“提取 32 位 ARGB每个图像文件的像素"** ...

我还看到了有关 canvas 和 surfaceView 的东西，但我从不使用它们。此外，最终对象有时只会被缩放（当用户想要它时），所以我认为使用单个 imageView 使其工作会更容易......

所以我从 AsyncTask 中的这部分代码开始（以避免使用 UI 线程），但我已经得到了 OUT OF MEMORY 异常

```
...
@Override
protected Bitmap doInBackground(Void... params) {
     return this.createBigBitmap();
}

public Bitmap createBigBitmap() {

Bitmap pageBitmap = Bitmap.createBitmap(800, 1066, Bitmap.Config.ARGB_8888); // OUT OF MEMORY EXCEPTION

// create an ArrayList of the 9 page Parts
ArrayList<Bitmap> pageParts = new ArrayList<Bitmap>();
for(int pagePartNum = 1; pagePartNum <= 9; pagePartNum++){
    Bitmap pagePartBitmap = getPagePart(pageNum, pagePartNum);
    pageParts.add(pagePartBitmap);
}

// try to copy the content of the 9 bitmaps into a single one bitmap
int[] pixels = null;
            int offsetX = 0, offsetY = 0, pagePartNum = 0;

            for (int x = 0; x < this.nbPageRows; x++) {
                for (int y = 0; y < this.nbPageColumns; y++) {
                    pagePartNum = x * this.nbPageColumns + y;
                    Bitmap pagePartBitmap = pageParts.get(pagePartNum);
                    // read pixels from the pagePartBitmap
                    pixels = new int[pagePartBitmap.getHeight() * pagePartBitmap.getWidth()];
                    pagePartBitmap.getPixels(pixels, 0, pagePartBitmap.getWidth(), 0, 0, pagePartBitmap.getWidth(), pagePartBitmap.getHeight());

                    // compute offsetY
                    if(x == 0)
                        offsetY = 0;
                    if(x == 1)
                        offsetY = pageParts.get(0).getHeight();
                    if(x == 2)
                        offsetY = pageParts.get(0).getHeight() * 2;

                    // compute offsetX
                    if(y == 0)
                        offsetX = 0;
                    if(y == 1)
                        offsetX = pageParts.get(0).getWidth();
                    if(y == 2)
                        offsetX = pageParts.get(0).getWidth() * 2;

                    // write pixels read to the pageBitmap
                    pageBitmap.setPixels(pixels, 0, pagePartBitmap.getWidth(), offsetX, offsetY, pagePartBitmap.getWidth(), pagePartBitmap.getHeight());
                    offsetX += pagePartBitmap.getWidth();
                    offsetY += pagePartBitmap.getHeight();

                }
            }
return pageBitmap;
}

// get a bitmap from one of the 9 existing image file page part
private Bitmap getPagePart(int pageNum, int pagePartNum) {
        String imgFilename = this.directory.getAbsolutePath()
                + File.separator + "z-"
                + String.format("%04d", pageNum)
                + "-" + pagePartNum + ".jpg";
        // ajoute le bitmap de la partie de page
        BitmapFactory.Options opt = new BitmapFactory.Options();
        opt.inPreferredConfig = Bitmap.Config.ARGB_8888;
        return BitmapFactory.decodeFile(imgFilename, opt);
    } 
```

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T11:45:45.210

阅读[BitmapRegionDecoder](http://developer.android.com/reference/android/graphics/BitmapRegionDecoder.html)和[这个](https://android.googlesource.com/platform/packages/apps/Gallery2/+/c2c0b01fbbf243eee1a11c33ba6dd1ce918a9ce5/src/com/android/gallery3d/ui/TileImageViewAdapter.java)

**编辑**

查看 android 中的[Efficient Bitmap Handling](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)以摆脱 OOM 错误。使用以下代码解码您的位图。

```
public static Bitmap decodeSampledBitmapFromResource(Resources res, int resId,
int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeResource(res, resId, options);

    // Calculate inSampleSize
    options.inSampleSize = 4;

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeResource(res, resId, options);
} 
```

# drupal - 迁移后drupal出现404错误

> ID：15065971
> 
> 赞同：1
> 
> 时间：2013-02-25T11:30:48.750
> 
> 标签：drupal, drupal-7, drupal-6, wamp, wampserver

我在互联网上有一个 Drupal 网站。

我想从现在开始在本地工作，所以我安装了 Wamp，我复制粘贴了网站的 apache 文件系统并使用 phpmyadmin 进行了 sql 转储。

我在 phpmyadmin 上使用与 Web 相同的名称和数据重新创建了相同的数据库。

现在，我可以访问主页（ ）。一切都好，我看到了一个节点，我看到了带有链接的整个菜单，...

当我尝试导航或登录时，它给了我 404 错误，这是怎么回事？URL 听起来很棒，当我再次尝试使用 nodeid 404 访问阳极时。我怀疑 WAMP，但我不知道如何解决这个问题！

非常感谢帮助我！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-25T11:40:07.290

确保 mod_rewrite 已启用 - 默认情况下在 WAMP 上未启用。

[您可以在此处](http://blog.cmstutorials.org/tutorials/tips-tricks/how-to-make-mod_rewrite-work-on-wamp)找到有关如何执行此操作的说明。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-25T11:37:16.703

确保您已将文件上传`.htaccess`到 Drupal 的根目录。

或尝试使用 访问您的网站`?q=`，例如：`http://site.com/?q=admin`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-25T11:38:04.043

您很可能在 Apache 中将 AllowOverride 设置为 None。我相信这是默认设置，它会阻止您的 .htaccess 文件工作（这些是使您的 URL 工作的文件）。

编辑您的 Apache 配置文件，搜索 AllowOverride 的每个实例并将其更改为“全部”，例如：

```
AllowOverride All 
```

还要确保您实际复制了 .htaccess 文件，有时它是隐藏的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-25T14:14:39.003

您是否将本地站点安装在子文件夹中？本地网址是什么？

如果站点位于子文件夹中，例如`http://localhost/drupal`，您需要在.htaccess 中添加（或取消注释）一行，告诉apache RewriteBase。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-03-12T18:10:34.817

在我的 httpd.conf 中 AllowOverride 被设置为 None。更改为 AllowOverride All 就像一个魅力。

记得修改后重启apache。

# ns-3 - 如何在 hwmp ns3 中打印数据包的路由

> ID：15065973
> 
> 赞同：1
> 
> 时间：2013-02-25T11:30:55.037
> 
> 标签：ns-3

我想知道如何在实现 hwmp 的网状拓扑中打印数据包的路由。我不是指整个路由表，而是数据包为了到达目的地而经过的中间节点。

提前致谢，

玛丽

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:12:44.567

我不确定在哪里，但是您必须能够通过日志文件跟踪数据包！另一方面，如果您对**hops 的数量**感兴趣，您可以从 FlowMonitor（timeForwarded 指标）中获取它。

> 如何？
> AvrgHopCount= 1 + (flowmon.timesForwarded/flowmon.rxPackets)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-05T05:22:58.253

您可以使用以下方法打印路由表：

```
Ipv4GlobalRoutingHelper globalRouting;
Ptr<OutputStreamWrapper> routingStream = Create<OutputStreamWrapper> ("result/leapstar2.routes", std::ios::out);
globalRouting.PrintRoutingTableAllAt (Seconds(0.1), routingStream ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T20:30:28.903

你可以这样做：

```
YansWifiPhyHelper wifiPhy =  YansWifiPhyHelper::Default ();
....
....
....
....
AsciiTraceHelper ascii;
wifiPhy.EnableAsciiAll (ascii.CreateFileStream ("wifi-simple-adhoc-grid.tr")); 
```

这将创建一个名为 的跟踪文件`wifi-simple-adhoc-grid.tr`，您可以对其进行分析以确定每个数据包的路由。参见示例`examples/wireless/wifi-simple-adhoc-grid.cc`

# php - 如何在域的子域中包含 css/javascript/php-includes 文件

> ID：15065977
> 
> 赞同：0
> 
> 时间：2013-02-25T11:31:09.310
> 
> 标签：php, html

我想使用 css、javascript、php-includes 从主域到子域。

主域的目录结构。

```
/root/global/css/css.css
/root/global/javascript/javascript.js
/root/global/include/include.php 
```

子域的目录结构

```
/root/sub-domain/index.php 
```

现在 css、javascript、php-includes 在子域中不起作用，即我得到未风格化的页面并且没有包含 javascript、php 文件。

我在子域 index.php 中这样做

```
<link href="../global/css/css.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../global/javascript/jquery.js"></script>
<script type="text/javascript" src="../global/javascript/javascript.js"></script> 
```

这不适用于子域，但适用于其他同级别目录，我也尝试过这种方式

```
<link href="http://www.mysite.com/global/css/css.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="http://www.mysite.com/global/javascript/jquery.js"></script>
<script type="text/javascript" src="http://www.mysite.com/global/javascript/javascript.js"></script> 
```

它也不适用于子域，但适用于同一级别的其他目录。

请查看并建议任何可能的方法来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T13:49:37.010

对于子域，这可以正常工作，否则，您的文件位置中会出现另一个问题：

```
src="//www.yourdomain.com/whateverpath/yourfile.js" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T11:34:09.420

两个选项，您可以在 php.ini 文件中设置“包含路径”，也可以`set_include_path()`在脚本开头使用函数：http: [//php.net/manual/en/function.set-include-path。 php](http://php.net/manual/en/function.set-include-path.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-25T11:38:24.767

Altough`www.mysite.com/global/css/css.css`看起来像是一个绝对链接，实际上并非如此。
如果你在上面，`www.mydomain.com`它会寻找`http://www.mydomain.com/www.mysite.com/global/css/css.css`你不想要的东西。

绝对链接资源包括方案（这将是`[http://www.mysite.com/global/](http://www.mysite.com/global/)...`）或使用尾部斜杠设置绝对路径：`/global/css/css.css`.

# java - 相对布局循环依赖

> ID：15065982
> 
> 赞同：0
> 
> 时间：2013-02-25T11:31:18.517
> 
> 标签：java, android, alignment, android-relativelayout

我正在尝试为许多不同的设备创建我的 android 应用程序，因此我试图避免使用固定的高度和宽度，而是使用属性 WRAP_CONTENT。

现在我需要在按钮顶部创建一个文本视图并将其与底部对齐。但是文档声明您不能将 WRAP_CONTENT 与 ALIGN_PARENT_BOTTOM 结合使用（这很明显）。还有另一种方法可以实现这一目标吗？

结构是这样的。一个包含按钮和文本视图的 RelativeLayout。

```
RelativeLayout fl = new RelativeLayout(this);
fl.setLayoutParams(relativeWrapContentParams);
fl.addView(filterBtn);
fl.addView(filterCaption); 
```

按钮也是动态创建的，因此没有 xml。相反，这些按钮是在 Java 代码中创建的。

这也是为多种分辨率编程的好方法吗？还是可以使用固定高度，因为这样问题很容易解决，我可以给 relativelayout 一个固定高度并将其子级与 ALIGN_PARENT_BOTTOM 对齐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T12:44:19.217

[看到这个链接](http://developer.android.com/training/basics/supporting-devices/screens.html)这篇文章是android新手的圣经。

现在来到您的问题，您不需要为此目的使用相对布局，您可以使用带有垂直方向放置文本然后按钮的线性布局。

并且您需要将此线性布局放置在具有属性 alignparentbottom=true 的相对布局中。

这样你就可以在屏幕底部有这种文本和按钮的布局

# c# - 在 Visual Studio 2010 和 2012 中找到不同的答案

> ID：15065984
> 
> 赞同：3
> 
> 时间：2013-02-25T11:31:33.310
> 
> 标签：c#, visual-studio-2010, visual-studio-2012

这是示例代码。

```
var values = new List<string>() { "Stack", "Over", "Go" };

var funcs = new List<Func<string>>();

foreach(var v in values) 

  funcs.Add( ()=>v );
foreach(var f in funcs) 

  Console.WriteLine(f()); 
```

当我使用 Visual Studio 2010 运行此代码时，我得到的输出为： `Go Go Go`

但是当我在 Visual Studio 2012 中尝试相同的代码时，输​​出是： `Stack Over Go`

为什么它的行为不同？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-25T11:33:56.387

原因是编译器被更改为创建在闭包中捕获的变量的临时副本。

在 VS 2012 中使用以下代码：

```
foreach(var v in values) 
    funcs.Add(() => v); 
```

VS 2012 编译器由此生成的代码等同于 VS 2010 编译器为此代码生成的代码：

```
foreach(var v in values) 
{
    var tmp = v;
    funcs.Add(() => tmp);
} 
```

进行此更改的原因是许多开发人员发现 VS 2010 编译器的行为出乎意料。

# openlayers - 来自浏览器的位置保存通过地图服务器显示的 dinto postgis 错误

> ID：15065988
> 
> 赞同：1
> 
> 时间：2013-02-25T11:31:40.830
> 
> 标签：openlayers, postgis, openstreetmap, mapserver

我正在获取浏览器的位置并通过 WKT（使用 php 脚本）将 lon/lat 发送到 postgis 数据库

我得到的结果是

```
Longitude: -1.323114
Latitude: 51.401409 
```

这*应该*在英国纽伯里（我工作的地方），但是在堆栈的某个地方，它位于俄罗斯中部。

堆栈如下 PostGIS -> MapServer -> OpenLayers

这是一个非基础层，基础层是 Open Street Map，投影设置为 EPSG:4326

我做错了什么？

地图文件： [http](http://pastebin.com/3K2CZcaR)
: //pastebin.com/3K2CZcaR OpenLayers (JS)： [http://pastebin.com/1fAERFJb](http://pastebin.com/1fAERFJb)

你还需要什么别的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T13:33:26.407

唔。谷歌地图当然接受这些坐标（尽管在索马里海岸以外的纬度/经度顺序不是经度/纬度）。看起来 lon/lat 也是 postGIS 转换为可用几何的正确顺序。你的 PHP 脚本是什么样的？

# ios - 核心数据没有保存任何东西，但没有给出错误？

> ID：15065990
> 
> 赞同：0
> 
> 时间：2013-02-25T11:31:41.853
> 
> 标签：ios, objective-c, core-data

我正在尝试重新创建我能找到的绝对最简单的核心数据示例，但我仍然设法遇到了问题。似乎 SQLite 数据库是根据我的实体创建的，但没有添加任何实际数据。这是我的 .h 文件：

```
#import <CoreData/CoreData.h>
#import "AppDelegate.h"

@interface MainViewController : UIViewController

@property (strong, nonatomic) NSManagedObjectContext *managedObjectContext;

- (IBAction) createDatabase;

@end 
```

这是我的.m：

```
#import "MainViewController.h"

@implementation MainViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (IBAction) createDatabase
{
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    _managedObjectContext = [appDelegate managedObjectContext];

    NSManagedObject *myMO = [NSEntityDescription insertNewObjectForEntityForName: @"Book" inManagedObjectContext: _managedObjectContext];

    [myMO setValue: [NSNumber numberWithInt: 123] forKey: @"bookID"];
    [myMO setValue: @"Example book." forKey: @"book"];
    [myMO setValue: @"Example author." forKey: @"author"];
    [myMO setValue: @"Example category." forKey: @"category"];
    [myMO setValue: [NSNumber numberWithBool: NO] forKey: @"isLiked"];
    [myMO setValue: [NSNumber numberWithBool: NO] forKey: @"isDisliked"];
}

@end 
```

我无法弄清楚我做错了什么。当我启动它时，Xcode 在应用程序的 Documents 目录中创建 .sqlite 文件，但是点击按钮调用`createDatabase`不会导致任何文本（“示例书”）等输入到 SQLite 文件中全部。

难道我做错了什么？这段代码几乎是复制和粘贴的，所以我真的不知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-25T11:38:28.653

我在您的代码中找不到任何可以保存更改的内容。它应该是这样的

```
 if (![myMO save:&error]) {
    NSLog(@"Whoops, couldn't save: %@", [error localizedDescription]);
 } 
```

请参阅此链接以获取更多帮助

1.  [http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html](http://developer.apple.com/library/ios/#documentation/DataManagement/Conceptual/iPhoneCoreData01/Introduction/Introduction.html)
2.  [http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started](http://www.raywenderlich.com/934/core-data-on-ios-5-tutorial-getting-started)
3.  [https://blog.stackmob.com/2012/11/iphone-database-tutorial-part-1-learning-core-data/](https://blog.stackmob.com/2012/11/iphone-database-tutorial-part-1-learning-core-data/)

# perl - 使用 Spreadsheet::ParseExcel::SaveParser saveas 保存的 xls 无法使用 MSExcel 打开

> ID：15065991
> 
> 赞同：1
> 
> 时间：2013-02-25T11:31:51.340
> 
> 标签：perl, excel

我对使用 Spreadsheet::ParseExcel::SaveParser saveas 函数创建的 Excel 工作表存在问题，无法使用 MSExcel 打开。

代码片段：

```
 my $result_excel="result.xls";
    my $excel_template="Template.xls";

    my $parser   = new Spreadsheet::ParseExcel::SaveParser;
    my $template = $parser->Parse($excel_template);

    my $workbook;
    {
        local $^W = 0;

        $workbook = $parser->SaveAs($template, $result_excel);
    }
    $workbook->close(); 
```

通过在我的机器上运行这个脚本创建的 xls 非常好。但是我尝试在任何其他机器上运行它，我看到 xls 没有打开但抛出一个错误，说“Excel 在 result.xls 中发现了不可读的内容......”。工作机器：为 MSWin32-x86-multi-thread excel 2010 和 vba 构建的 win 7 perl v5.8.7

非工作机器：

1.  win7，perl v 5.6.1，没有 vba 的 excel 2010
2.  win7，perl v 5.8.7，没有 vba 的 excel 2010
3.  win7，perl v 5.8.7，带有 vba 的 excel 2010
4.  win7，perl v 5.6.1，带有 vba 的 excel 2010

（vba 是 Office 2010 中的 Visual Basic 组件）

我无法弄清楚这是 perl 问题还是 excel 问题。有人可以帮我解决这个问题吗？

# jquery - 视频作为背景，如何循环播放？

> ID：15065996
> 
> 赞同：3
> 
> 时间：2013-02-25T11:32:05.090
> 
> 标签：jquery, html, loops, html5-video

我在此页面上使用 georgepaterson / jquery-videobackground：

[http://kimcolemanprojects.com/index.html](http://kimcolemanprojects.com/index.html)

我希望视频循环播放，但不知道如何在 JQuery 中执行此操作？

```
$(document).ready(function() {
            $('dl').toggle();
            $('h2').bind('click', function(event) {
                event.preventDefault();
                $(this).next('dl').slideToggle(500, function() {
                    $('.video-background').videobackground('resize');
                });
            });
            $('body').prepend('<div class="video-background"></div>');
            $('.video-background').videobackground({
                videoSource: [['video/ribbons_450x360.mp4', 'video/mp4'],
                    ['video/ribbons_450x360.webmhd.webm', 'video/webm'], 
                    ['video/ribbons_450x360.oggtheora.ogv', 'video/ogg']], 
                controlPosition: '#main',
                poster: 'video/ribbs.png',
                loadedCallback: function() {
                    $(this).videobackground('mute');
                }
            });
        }); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-25T11:35:13.497

如果是 html5 视频，请将其循环属性设置为“循环”，如下所示：

```
loop="loop" 
```

或者只是循环没有这样的值：

```
loop 
```

如果您需要严格使用 jQuery 执行此操作：

```
$('video').attr('loop','loop'); 
```

此外，查看[此页面](http://www.w3.org/TR/html-markup/video.html)以了解您需要了解的有关 html5 视频元素的所有信息。

# android - android运行时链接问题与接口

> ID：15065997
> 
> 赞同：2
> 
> 时间：2013-02-25T11:32:05.930
> 
> 标签：android, makefile, embedded-linux, static-linking, android-build

我正在尝试在 Linux 中使用他的 android 构建系统构建一个应用程序和一个界面 jar 我的应用程序与我的界面有依赖关系，因此我必须在应用程序制作之前准备好界面 jar。

但是我们在使用我们新构建的接口 jar 时遇到了构建/运行时问题。我们试图以两种不同的顺序制作应用程序。

案例 1\. 将接口构建为本地模块并将其与 apk 链接为 LOCAL_JAVA_LIBRARIES。案例 2\. 将接口构建为本地模块并将其与 apk 链接为 LOCAL_PREBUILT_STATIC_JAVA_LIBRARIES。

## 以下是主界面和界面的 Android.mk 文件。

1.Andriod.mk主文件： **/source/Android.mk**

========================================

STACK_PATH:= $(调用我的目录)

LOCAL_PATH := $(STACK_PATH)

包括 $(CLEAR_VARS)

包括 $(LOCAL_PATH)/interface/Android.mk

包括 $(CLEAR_VARS)

LOCAL_PATH := $(STACK_PATH)

包括 $(LOCAL_PATH)/application/Android.mk

========================================

**2.接口**Android.mk：/source/interface/Android.mk

 **========================================

LOCAL_PATH:= $(调用我的目录)

包括 $(CLEAR_VARS)

LOCAL_SRC_FILES := $(call all-subdir-java-files, src)

LOCAL_MODULE := 我的界面

LOCAL_MODULE_TAGS := 可选

LOCAL_MODULE_CLASS := JAVA_LIBRARIES

LOCAL_JAVA_RESOURCE_DIRS := src

包括 $(BUILD_JAVA_LIBRARY)

$(call dist-for-goals, droidcore, $(full_classes_jar):MyInterface.jar)

========================================

## 以下是案例 1 中应用程序的 Android.mk 文件。

应用 **Android.mk：/source/application/Android.mk**

========================================

TOP_LOCAL_PATH:= $(调用我的目录)

LOCAL_PATH:= $(TOP_LOCAL_PATH)

包括 $(CLEAR_VARS)

LOCAL_SRC_FILES := $(调用 all-subdir-java-files)

LOCAL_PACKAGE_NAME := MyApplication

LOCAL_JAVA_LIBRARIES := MyInterface

包括 $(BUILD_PACKAGE)

包括 $(BUILD_MULTI_PREBUILT)

========================================

构建成功完成。但是在尝试运行此应用程序时，它显示此错误。I/dalvikvm(XXXX)：解析 Lcom/test/example/application 失败；接口 XXX 'Lcom/test/example/interface;' W/dalvikvm(XXXX): 类 'Lcom/test/example/application;' 的链接 失败的

## 以下是案例 2 中应用程序的 Android.mk 文件。

应用程序 Android.mk **/source/application/Android.mk**

========================================

TOP_LOCAL_PATH:= $(调用我的目录)

LOCAL_PATH:= $(TOP_LOCAL_PATH)

包括 $(CLEAR_VARS)

$(shell (cp $(LOCAL_PATH)/../out/target/common/obj/JAVA_LIBRARIES/Interface_intermediates/classes-jarjar.jar $(LOCAL_PATH)/applications/libs/MyInterface.jar))

LOCAL_STATIC_JAVA_LIBRARIES += 我的界面

LOCAL_SRC_FILES := $(调用 all-subdir-java-files)

LOCAL_PACKAGE_NAME := MyApplicationss

LOCAL_PREBUILT_STATIC_JAVA_LIBRARIES += MyInterface:libs/MyInterface.jar

包括 $(BUILD_PACKAGE)

包括 $(BUILD_MULTI_PREBUILT)

========================================

这导致如下构建错误。

**build/core/base_rules.mk:166: * source/applications: MODULE.TARGET.JAVA_LIBRARIES.MyInterface 已经由 source/interface 定义。停止。**

但是当它们单独构建而不使用构建系统时，这个问题就不存在了。应用程序也可以正常运行。

* * *

当使用eclipse将接口构建到Myinterface.jar，并在Linux中使用这个接口jar（通过静态链接）构建application-apk时，应用程序运行顺利。

我们的 Android.mk 文件有问题吗？请查看并提出您的建议**

# functional-programming - 为什么即使我在 OCaml 中使用尾递归，我仍然会得到 stackoverflow？

> ID：15065998
> 
> 赞同：2
> 
> 时间：2013-02-25T11:32:07.190
> 
> 标签：functional-programming, ocaml

我写了一个生成 in 列表的`randomized ints`函数`OCaml`。

* * *

```
let create_shuffled_int_list n = 
  Random.self_init;
  let rec create n' acc =
    if n' = 0 then acc
    else 
      create (n'-1) (acc @ [Random.int (n/2)])
  in 
  create n [];; 
```

* * *

当我尝试生成`10000`整数时，它给出了`Exception: RangeError: Maximum call stack size exceeded.`错误。

但是，我相信这个功能，我用过`tail-recursion`，它应该不会`stackoverflow`出错，对吧？

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T11:46:16.273

来自[核心库文档](http://caml.inria.fr/pub/docs/manual-ocaml-4.00/libref/List.html)

> val append : 'a list -> 'a list -> 'a list 连接两个列表。与中缀运算符@ 相同的功能。不是尾递归的（第一个参数的长度）。@ 运算符也不是尾递归的。

所以导致溢出的不是你的函数，而是`@`函数。但是，由于您只关心生成洗牌列表，因此没有理由将内容附加到列表的末尾。即使`@`运算符是尾递归的，列表追加仍然是 O(n)。然而，列表前置是 O(1)。因此，如果您将新的随机数放在列表的前面，则可以避免溢出（并使您的函数更快）：

```
let create_shuffled_int_list n = 
  Random.self_init;
  let rec create n' acc =
    if n' = 0 then acc
    else 
      create (n'-1) (Random.int (n/2) :: acc)
  in 
  create n [];; 
```

如果您关心订单（不知道为什么），那么只需在最后粘贴一个 List.rev ：

```
List.rev (create n []);; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T19:31:50.450

顺便说一句，您不应该调用`Random.self_init`函数，因为：

*   您的功能的用户可能想要控制种子以获得可重现的结果（测试、共享结果......）

*   这可能会使用不那么随机的熵源重置种子，您可能只想这样做一次。