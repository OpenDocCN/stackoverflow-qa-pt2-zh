# StackOverflow 问答 15908000-15908999

# jquery - 使用 jquery 模板的 chrome 中的最大调用堆栈大小超出错误

> ID：15908000
> 
> 赞同：2
> 
> 时间：2013-04-09T16:59:47.873
> 
> 标签：jquery, google-chrome, jquery-templates

我正在加载超过 7000 条记录并将它们显示在我的页面上。

Firefox 运行良好，但使用 Chrome 时出错

部分代码：

```
<tbody>
    {{each(i, item) value}}
    <tr>
        <td class="item_action">
            <a class="edit_item" data-item="${item.id}">
                <img src="path/to/image_edit.png" />
            </a>

            <img src="path/to/image_separator.png" />

            <a class="delete_item" data-item="${item.id}">
                <img src="path/to/image_delete.png" />
            </a>
        </td>
        <td class="item_name">${item.name}</td>
    </tr>
    {{/each}}
</tbody> 
```

如果不是上面我呈现这个：

```
<tbody>
    {{each(i, item) value}}
    <tr>
        <td class="item_name">${item.name}</td>
    </tr>
    {{/each}}
</tbody> 
```

那么Chrome就没有问题了。因此，我想这与我在[此处](http://shareddev.blogspot.com.ar/2011/11/javascript-maximum-call-stack-size.html)阅读时尝试渲染的 HTML 的大小有关。

这个问题有解决方案吗？一世

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-03T15:44:29.057

我遇到过同样的问题。如果您查看 jquery.tmpl 代码，您可以找到

```
function build( tmplItem, nested, content ) { ... 
```

问题出在

```
jQuery.map( content, function( item ) { 
```

对于“内容”数组中的每个项目（我猜这里有超过 50000 个元素）应该被称为函数。这对于 Webkit 浏览器来说太过分了。这段代码稍作修改以解决我的问题：

```
function build( tmplItem, nested, content ) {
    // Convert hierarchical content into flat string array
    // and finally return array of fragments ready for DOM insertion
    var processMap = function(){
        var result = [];
        var items = [];
        for(var i = 0; i<content.length; (i = i+10000)){
            var subcontent = content.slice(i, i+10000);
            items =  jQuery.map( subcontent, function( item ) {
                        return (typeof item === "string") ?
                            // Insert template item annotations, to be converted to jQuery.data( "tmplItem" ) when elems are inserted into DOM.
                            (tmplItem.key ? item.replace( /(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g, "$1 " + tmplItmAtt + "=\"" + tmplItem.key + "\" $2" ) : item) :
                            // This is a child template item. Build nested template.
                            build( item, tmplItem, item._ctnt );
            });
            result = result.concat(items);
        }
        return result;
    };
    var frag, ret = content ?  processMap():
    // If content is not defined, insert tmplItem directly. Not a template item. May be a string, or a string array, e.g. from {{html $item.html()}}.
    tmplItem;
    if ( nested ) {
        return ret;
    } ... 
```

因此 jQuery.map 函数处理每 10000 个元素，并且不允许“超出最大调用堆栈大小”。

这是一个粗略的解决方案，但希望对您有所帮助:)

# ruby-on-rails - 用于时间警报的 Rails/Sinatra gem

> ID：15908004
> 
> 赞同：0
> 
> 时间：2013-04-09T16:59:59.543
> 
> 标签：ruby-on-rails, ruby, sinatra

我有一个网络应用程序，它假设允许用户设置计时器，它会在时间到时通知他们（通过推送通知）。用户也可以随时取消这些定时器。

有没有已经这样做的宝石？我需要它能够动态分配时间并传入一个关于当时要做什么的块。此外，我能够取消特定块的执行，这一点非常重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:51:22.433

试试[`timers`](http://rubygems.org/gems/timers)宝石。

使用 Timers.new 创建一个新的计时器组：

```
require 'timers'
timers = Timers.new 
```

使用 Timers#after 安排一个 proc 在 5 秒后运行：

```
five_second_timer = timers.after(5) { puts "Take five" } 
```

该`five_second_timer`变量现在绑定到一个`Timers::Timer`对象。要取消计时器，请使用`Timers::Timer#cancel`

有关更多信息，请查看此处的自述文件： [https ://github.com/celluloid/timers](https://github.com/celluloid/timers)

# sql - 如何在一个选择查询中执行此操作？

> ID：15908009
> 
> 赞同：0
> 
> 时间：2013-04-09T17:00:21.527
> 
> 标签：sql, sqlalchemy

我需要显示帖子列表。对于每个帖子，我还需要显示：

1.  有多少人“喜欢”这个帖子。
2.  三个“喜欢”帖子的人的名字（最好是查看用户的朋友）。
3.  如果查看用户“喜欢”该帖子，我希望他/她成为三者之一。

如果不查询 for 循环中的每个项目，我不知道该怎么做，这被证明非常慢。当然缓存/非规范化会有所帮助，但我想知道是否可以这样做。脸书是如何做到的？

假设这个基本的数据库结构，有什么建议吗？

```
users
-----
id
username

posts
---------
id
user_id
content

friendships
-----------
user_id
friend_id
is_confirmed (bool)

users_liked_posts
-----------------
user_id
post_id 
```

作为旁注，如果有人知道如何在 SQLAlchemy 中做到这一点，那将非常感激。

编辑：SQLFiddle [http://sqlfiddle.com/#!2/9e703](http://sqlfiddle.com/#!2/9e703)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:41:11.550

你可以在你的 sqlfiddle 中试试这个。条件“WHERE user_id = 2”需要将 2 替换为您当前的用户 ID。

```
SELECT numbered.*
FROM
 (SELECT ranked.*,
       IF (post_id=@prev_post,
           @n := @n + 1,
           @n := 1 AND @prev_post := post_id) as position
 FROM
   (SELECT users_liked_posts.post_id,
          users_liked_posts.user_id,
          visitor.user_id as u1,
          friendships.user_id as u2,
          IF (visitor.user_id is not null, 1, IF(friendships.user_id is not null, 2, 3)) as rank
   FROM   users_liked_posts
   INNER JOIN posts
   ON     posts.id = users_liked_posts.post_id
   LEFT JOIN friendships
   ON     users_liked_posts.user_id = friendships.user_id
   AND    friendships.friend_id = posts.user_id
   LEFT JOIN (SELECT post_id, user_id FROM users_liked_posts WHERE user_id = 2) visitor
   ON     users_liked_posts.post_id = visitor.post_id
   AND    users_liked_posts.user_id = visitor.user_id
   ORDER BY users_liked_posts.post_id, rank) as ranked
   JOIN
   (SELECT @n := 0, @prev_post := 0) as setup) as numbered
WHERE numbered.position < 4 
```

您可以轻松地将“编号”子查询与“用户”表连接起来，以获取更多用户信息。有额外的字段 u2, u3 可以帮助查看正在发生的事情。您可以删除这些。

查询的总体思路：

1) 两次左加入 users_liked_posts。第一次仅限于当前访问者，创建子查询访问者。第二次仅限于朋友。

2) 列rank, IF (visitor.user_id is not null, 1, IF(friendships.user_id is not null, 2, 3))，为users_liked_posts中的每个用户分配一个rank。此查询按帖子和排名排序。

3）使用前一个作为子查询来创建相同的数据，但每个帖子都有用户的运行位置。

4）使用previous作为子查询来提取每个帖子的前3个位置。

不，这些步骤不能合并，特别是因为 MySQL 不允许 WHERE 条件中的别名使用计算列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:47:43.237

@koriander 给出了 SQL 答案，但至于 Facebook 是如何做到的，你已经部分回答了这个问题；他们使用*高度*非规范化的数据和缓存。此外，它们实现了原子计数器、内存中的边列表来执行图形遍历，而且它们肯定不使用关系数据库概念（如 JOIN），因为它们不能扩展。即使是它们运行的​​ MySQL 集群，本质上也只是键/值对，只有在缓存层丢失时才会被访问。

我可能会建议您使用图形数据库而不是 RDBS，例如[neo4j](http://www.neo4j.org/ "新4j")

祝你好运。

**编辑：**

如果您对使用 Neo4j 感兴趣，那么您真的将不得不使用它。您可能会或可能不会发现它*更容易*来自 SQL 背景，但它肯定会提供*更强大*且可能更快的查询来执行图形遍历。

下面是几个可能对您有用的 Cypher 查询示例。

**计算有多少人喜欢一个帖子：**

```
START post=node({postId})
MATCH post<-[:like]-user
RETURN count(*) 
```

（真的，你应该使用原子计数器，如果它是你要查询很多的东西）

**获得三个喜欢帖子** *的人，并具有以下限制：*

1.  如果他/她喜欢该帖子，第一个`likingUser`将始终是当前用户。
2.  如果当前用户的朋友喜欢该帖子，他们将出现在任何非朋友之前。

```
开始帖子=节点（{postId}），用户=节点（{currentUserId}）
匹配路径 = post<-[:like]-likeingUser-[r?:friend*0..1]-user
返回喜欢用户，计数（r）为rc，长度（路径）为len
ORDER BY rc desc, len asc
限制 3

```

我将尝试解释上述查询......如果可以的话。

1.  首先抓取两个节点，the`post`和 current`user`
2.  匹配所有*喜欢*帖子的用户 ( `likingUser`)
3.  此外，测试是否存在`likingUser`通过*友谊*关系连接到当前的长度为 0 或 1`user`的路径（长度为 0 的路径表示`likingUser==user`）。
4.  现在，首先根据是否`r`存在关系对结果进行排序（如果`likingUser`是朋友`user`或 if 则存在`likingUser==user`）。因此，`count(r)`每个结果将是 0 或 1。由于我们更喜欢结果 where `count(r)==1`，因此我们将按降序对其进行排序。
5.  接下来，执行第二次排序，`user`如果他/她是结果集的一部分，则强制当前列在列表的顶部。我们通过检查 的长度来做到这一点`path`。当 时`user==likingUser`，路径长度会比当`user`的朋友时更短`likingUser`，所以我们可以通过升序排序`length(path)`来强制到顶部。`user`
6.  最后，我们将结果限制为仅前三个结果。

希望这有点道理。作为旁注，您实际上可以通过分离查询来获得更好的性能。例如，一个查询查看用户是否喜欢该帖子，然后另一个查询最多三个喜欢该帖子的朋友，最后另一个查询最多三个喜欢该帖子的非朋友。我说它可能会更快，因为每个查询在获得三个结果后都会短路，而我编写的大单查询必须考虑所有可能性，然后对它们进行排序。因此，请记住，仅仅因为您可以将多个问题组合到一个查询中，它实际上可能比多个查询执行得更差。

# javascript - 自定义显示/隐藏链接

> ID：15908013
> 
> 赞同：1
> 
> 时间：2013-04-09T17:00:35.147
> 
> 标签：javascript, jquery, html

我计划在链接上应用自定义显示/隐藏效果，这样当用户将鼠标悬停在链接上时，会出现一个不同的链接。我的javascript不太好，这就是我正在尝试的：

```
<div id="nav">
    <a href="#"><li id="a1">hover link 1</li></a>
    <a href="#"><li id="a2">show link 1</li></a>
    <a href="#"><li id="b1">hover link 2</li></a>
    <a href="#"><li id="b2">show link 2</li></a>
    <a href="#"><li id="c1">hover link 3</li></a>
    <a href="#"><li id="c2">show link 3</li></a>
</div> 
```

的JavaScript：

```
$("#nav a.li").hover(function () {
    (this.id.charAt(0)+"1").hide();
}); 
```

[这是小提琴](http://jsfiddle.net/8chbP/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:01:34.203

您错过了`$`并且需要添加，`#`因为`id`您还需要更改选择器，因为您没有 li 类的锚点

*改变*

```
(this.id.charAt(0)+"1").hide(); 
```

*到*

```
$('#' +this.id.charAt(0)+"1").hide(); 
```

*你的代码是*

**[现场演示](http://jsfiddle.net/8chbP/4/)**

```
$("#nav a li").hover(function () {
    $('#'+ this.id.charAt(0)+"1").hide();
}); 
```

**编辑**如果要删除悬停的项目，请使用`$(this)`

**[现场演示](http://jsfiddle.net/8chbP/5/)**

```
$("#nav a li").hover(function () {
    $(this).hide();
}); 
```

# c# - 如何在 C# 中使用 WPF 将列动态添加到 DataGrid

> ID：15908016
> 
> 赞同：2
> 
> 时间：2013-04-09T17:00:43.170
> 
> 标签：c#, wpf, wpfdatagrid

有谁知道动态向 WPF DataGrid 添加列的方法？我希望在我的 GUI 中使用 DataGrid 来显示标准数据，并且还允许用户添加和删除列。当用户添加一列时，用户应该能够指定将在该列的每一行上输入的值。过去，我通过创建一个具有属性的类来使用 DataGrid，这些对象的列表很容易填充网格，其中列表中的每个对象都是一行。如果我可以动态创建一个新类或动态添加一个新属性到我现有的类，这似乎是可能的。

我一直在寻找一种将属性动态添加到对象的方法作为一种可能的解决方案，但我还没有找到一种方法来做到这一点，我不知道它是否是一个可行的解决方案。我还没有找到一种即时创建新课程的方法，而且我也不知道这是否可能。我也尝试过使用 DataTable，但我也无法让它工作。

这里有更多关于我想要完成的细节。下面包含一个屏幕截图。数据网格将填充数据。然后用户可以输入列标题和列数据。当按下“更新列”按钮时，如果数据字段包含“！REMOVE_COL”，则该列如果存在则删除，不存在则不添加。如果该列不存在，它将添加该列，并且在数据字段中输入的值将添加到每一行。如果该列已存在，则该列数据将使用数据字段中的值进行更新。

哈哈，截图就不用说了。显然我没有足够的代表来发布图片。:/ 你可以在这里找到截图：

[https://docs.google.com/document/d/1B4UVhVDqFdBbsUMOtMLK2PGTrnKLLux2leo_gas9rdw/edit?usp=sharing](https://docs.google.com/document/d/1B4UVhVDqFdBbsUMOtMLK2PGTrnKLLux2leo_gas9rdw/edit?usp=sharing)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:09:07.933

请注意，`DataGrid`在运行时访问 WPF 与对 WinForms 执行等效操作完全不同`DataGridView`。无论如何，您要做的是创建一个构建并返回 a 的方法`DataSet`（可能有也可能没有数据，没有数据只会定义列结构）

```
private DataSet BuildDataGridColumns()
{
    // Build the data.
    DataSet ds = new DataSet();
    DataTable dt = new DataTable();
    ds.Tables.Add(dt);

    // Add the columns to the DataTable.
    DataColumn indexCol = new DataColumn("Key Index", typeof(String));
    dt.Columns.Add(indexCol);
    DataColumn fileCol = new DataColumn("File Name", typeof(String));
    dt.Columns.Add(fileCol);
    DataColumn resCol = new DataColumn("Resource Name", typeof(String));
    dt.Columns.Add(resCol);
    return ds;
} 
```

要创建`DataGrid`被叫`dataGrid`，您可以使用

```
dataGrid.ItemsSource = BuildDataGridColumns().Tables[0].AsDataView(); 
```

要删除/更改显示的列，请更改`ItemSource`，使用上述内容应该可以完成您需要的所有操作。

我希望这有帮助。

# pandas - 如何将第一级 MultiIndex 作为列？

> ID：15908017
> 
> 赞同：1
> 
> 时间：2013-04-09T17:00:47.570
> 
> 标签：pandas

假设我有一个 MultiIndex 数据框，例如：

```
In [1]: arrays = [['one','one','one','two','two','two'],[1,2,3,1,2,3]]      

In [2]: df = pa.DataFrame(randn(6,1),index=pa.MultiIndex.from_tuples(zip(*arrays)),columns=['A'])

In [3]: df                                                                  
Out[3]:                                                                     
              A                                                             
one 1  0.229037                                                             
    2 -1.640695                                                             
    3  0.908127                                                             
two 1 -0.918750                                                             
    2  1.170112                                                             
    3 -2.620850 
```

我想将其更改为一个新的数据框，列作为 MultiIndex 数据框的第一级索引？有没有简单的方法？（下面是一个例子）

```
In [12]: dft = df.ix['one']                                                 

In [13]: dft = dft.rename(columns={'A':'one'})                              

In [14]: dft['two'] = df.ix['two']['A']                                     

In [15]: dft                                                                
Out[15]:                                                                    
        one       two                                                       
1  0.229037 -0.918750                                                       
2 -1.640695  1.170112                                                       
3  0.908127 -2.620850 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T17:22:56.163

也许您正在寻找[pandas.unstack](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.unstack.html)：

```
In [56]: df
Out[56]: 
              A
one 1  0.229037
    2 -1.640695
    3  0.908127
two 1 -0.918750
    2  1.170112
    3 -2.620850

In [57]: df.unstack(level=0)
Out[57]: 
          A          
        one       two
1  0.229037 -0.918750
2 -1.640695  1.170112
3  0.908127 -2.620850 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:34:26.363

`reset_index()`只是要为此添加一些内容，还有另一种选择，即使用该函数在列中创建多索引。这里的区别在于它只是将值“弹出”为新列。取决于您的用例：

```
In [5]: df
Out[5]: 
              A
one 1 -1.598591
    2 -0.354813
    3 -0.435924
two 1  1.408328
    2  0.448303
    3  0.381360

In [6]: df.reset_index()
Out[6]: 
  level_0  level_1         A
0     one        1 -1.598591
1     one        2 -0.354813
2     one        3 -0.435924
3     two        1  1.408328
4     two        2  0.448303
5     two        3  0.381360 
```

# haskell - Haskell 和懒惰：将常用的值存储为成员或只是即时计算？

> ID：15908018
> 
> 赞同：1
> 
> 时间：2013-04-09T17:00:48.763
> 
> 标签：haskell

在 Haskell 中，考虑到其惰性，将经常计算的值存储为数据成员是否更好，或者在标准的非扩展 Haskell 中不这样做是否安全。

为了更好地理解我的意思，举个例子：

```
data Image = Image { size :: Int, inverse_size :: RealFrac }

new_image size = Image { size = size, inverse_size = 1.0 / fromIntegral size } 
```

或者我应该在使用它的地方声明它，假设它`function`经常被调用：

```
data Image = Image { size :: Int } -- no tainting

something (Image size) =
    let inverse_size = 1.0 / fromIntegral size -- possibly make a function of it
    in ... 
```

作为一种懒惰的语言，并且来自 C++ 模板元编程，我不确定 Haskell 会记住多少这样的计算。

这在运行时速度和存储方面有什么不同吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:49:45.843

非规范化 - 性能权衡不是 Haskell 特有的事情。如果`Image`您给出的示例类型接近实际，并且您使用大量`Image`s 进行操作，则通过预先计算几乎不会提高性能`inverse_size`，因为您节省了 1 次将值放在 FPU 堆栈上的操作和 1 次浮点数以 1 个额外的内存负载为代价进行除法（如果与 一起`size`在`something`函数中使用`inverse_size`），并且 x2-3 内存使用量增加。这不是一个伟大的成就。

无论如何，给`inverse_size`你一个机会应该确保这个字段是严格的：

```
data Image = Image { size :: !Int, inverse_size :: !Float } 
```

否则，这种预先计算肯定是没有意义的。

如果您想知道 GHC 编译器是否自己优化了这些事情，答案是：GHC 能够在一个函数（或多个（通过调用嵌套）函数，如果它们是内联的）中浮动重复计算，但它不会产生数据结构本身中的新字段。

# c# - Simple Injector 无法在 Web API 控制器中注入依赖项

> ID：15908019
> 
> 赞同：44
> 
> 时间：2013-04-09T17:00:51.773
> 
> 标签：c#, asp.net-web-api, dependency-injection, simple-injector

我正在尝试使用 Simple Injector 做一些基本的构造函数 DI，它似乎无法解决 Web API 控制器的依赖关系。

*   我在“API”文件夹中有一个 API 控制器，它位于“Controllers”文件夹之外。
*   我也尝试将它放在“Controllers”文件夹中，但这似乎没有太大区别。我收到的堆栈跟踪类似于[此问题](https://stackoverflow.com/questions/11347152/simpleinjector-injection-does-not-work-with-mvc-4-asp-net-web-api)中提供的堆栈跟踪。
*   我正在使用全新安装的“Simple Injector MVC Integration Quick Start”NuGet Package (v. 2.1.0)。
*   我有来自文档的基础，这也与在[此处](https://stackoverflow.com/questions/11254292/does-simple-injector-supports-mvc-4-asp-net-web-api)`SimpleInjectorWebApiDependencyResolver`找到的相同。
*   我正在使用实体框架，并查看了有关更改以正确加载上下文的[讨论线程。](http://simpleinjector.codeplex.com/discussions/363935)

这似乎不是问题，但我仍然收到以下错误：

> 类型“MyProject.API.ArticleController”没有默认构造函数
> 
> System.ArgumentException 在
> 
> System.Linq.Expressions.Expression.New(Type type) at System.Web.Http.Internal.TypeActivator.Create[TBase](Type instanceType) at System.Web.Http.Dispatcher.DefaultHttpControllerActivator.GetInstanceOrActivator(HttpRequestMessage request, Type controllerType , Func`1& activator) 在 System.Web.Http.Dispatcher.DefaultHttpControllerActivator.Create(HttpRequestMessage request, HttpControllerDescriptor controllerDescriptor, Type controllerType)

如果有人能给我一些建议，关于是否应该从当前状态/呼叫顺序修改任何内容，我们将不胜感激。

ArticleController（基本结构）：

```
public class ArticleController : ApiController
{
    private readonly IArticleRepository articleRepository;
    private readonly IUserRepository userRepository;
    private readonly IReleaseRepository releaseRepository;

    public ArticleController(IArticleRepository articleRepository, IUserRepository userRepository, IReleaseRepository releaseRepository)
    {
        this.articleRepository = articleRepository;
        this.userRepository = userRepository;
        this.releaseRepository = releaseRepository;
    }

    // GET api/Article
    public IEnumerable<Article> GetArticles(){ // code }

    // GET api/Article/5
    public Article GetArticle(int id){ // code }

    // PUT api/Article/5
    public HttpResponseMessage PutArticle(int id, Article article){ // code }

    // POST api/Article
    public HttpResponseMessage PostArticle(ArticleModel article){ // code }

    // DELETE api/Article/5
    public HttpResponseMessage DeleteArticle(int id){ // code }
} 
```

SimpleInjectorInitializer：

```
public static class SimpleInjectorInitializer
{
    public static void Initialize()
    {
        var container = new Container();
        InitializeContainer(container);
        container.RegisterMvcControllers(Assembly.GetExecutingAssembly());
        container.RegisterMvcAttributeFilterProvider();
        container.Verify();

        DependencyResolver.SetResolver(new SimpleInjectorDependencyResolver(container));
    }

    private static void InitializeContainer(Container container)
    {
        container.Register<IArticleRepository, ArticleRepository>();
        container.Register<IUserRepository, UserRepository>();
        container.Register<IReleaseRepository, ReleaseRepository>();
    }
} 
```

全球.asax.cs：

```
public class WebApiApplication : System.Web.HttpApplication
{
    private void ConfigureApi()
    {
        // Create the container as usual.
        var container = new Container();

        // Verify the container configuration
        // container.Verify();

        // Register the dependency resolver.
        GlobalConfiguration.Configuration.DependencyResolver =
                new SimpleInjectorWebApiDependencyResolver(container);
    }

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        ConfigureApi();

        WebApiConfig.Register(GlobalConfiguration.Configuration);
        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
    }
} 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-09T19:24:01.413

**TLTR：**问题是由 Web API 处理解析控制器类型的隐式方式引起的；显式注册您的 Web API 控制器，您将看到问题出在哪里。

以下是幕后发生的一步一步：

1.  `System.Web.Http.DefaultHttpControllerActivator`调用并`SimpleInjectorWebApiDependencyResolver`请求创建 API 控制器。
2.  `SimpleInjectorWebApiDependencyResolver`将该调用转发给`SimpleInjector.Container`实例。
3.  但是，该`Container`实例没有对该 API 控制器的任何显式注册（因为您向解析器提供了一个空容器）。
4.  由于没有显式注册，因此容器会尝试为该类型进行最后一分钟的注册。
5.  但是，该控制器类型取决于无法解析的接口，因为它们没有在容器中注册（请记住，您的容器是空的）。
6.  虽然容器通常会抛出异常，但在这种情况下返回 null，因为类型是通过`IServiceProvider.GetService`方法请求的，并且类型没有显式注册。
7.  `SimpleInjectorWebApiDependencyResolver`'`GetService`方法也将返回，`null`因为根据定义它应该返回 null；当不存在注册时（目前就是这种情况），它应该返回 null。
8.  由于`DependencyResolver`返回的 null，`DefaultHttpControllerActivator`将回退到其默认行为，这意味着自己创建该类型，但这需要控制器具有默认构造函数。

长话短说，问题是由 Web API 处理解析控制器类型的隐式方式引起的。

所以这里的解决方案是：

1.  `Container`在您的 Web 应用程序中只有一个。这可以防止配置的各种麻烦和复杂性。
2.  在容器中显式注册所有 Web API 控制器。显式注册控制器将确保 Simple Injector 在无法解析控制器时抛出异常。此外，这允许您在配置无效时调用`container.Verify()`将使应用程序在启动过程中失败（[可验证的配置很重要](https://simpleinjector.org/howto#verify-the-container-s-configuration)）。这还允许您[诊断配置](https://simpleinjector.org/diagnostics)，从而使您对配置的正确性更有信心。

我的[建议是将 MVC 和 Web API 放在他们自己的项目](https://stackoverflow.com/questions/15494920/what-is-the-difference-between-dependencyresolver-setresolver-and-httpconfigurat/15495934#15495934)中。这将使事情变得容易得多。

可以使用以下代码注册所有 Web API 控制器：

```
container.RegisterWebApiControllers(GlobalConfiguration.Configuration); 
```

**更新：**

因为这个错误很常见，当请求控制器类型时，新版本的`SimpleInjectorWebApiDependencyResolver`类将**永远不会**返回。`null`相反，它会抛出一个描述性错误。因此，只要您使用官方的`SimpleInjectorWebApiDependencyResolver`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-18T11:15:59.457

以下设置对我有用：

1) 在 UnityConfig 中包含**来自**https://www.nuget.org/packages/Unity.WebAPI/[的](https://www.nuget.org/packages/Unity.WebAPI/)**Unity.WebAPI** 2)

 **```
public static class UnityConfig
    {
        public static void RegisterComponents()
        {
            var container = new UnityContainer();
            // **** Important note -----
            // register all your components with the container here
            // e.g. container.RegisterType<ITestService, TestService>();

            DependencyResolver.SetResolver(new Unity.Mvc5.UnityDependencyResolver(container));

            GlobalConfiguration.Configuration.DependencyResolver = new Unity.WebApi.UnityDependencyResolver(container);
        }
    } 
```

3) 在**Global.asax**文件中

```
 public class MvcApplication : System.Web.HttpApplication
        {
            protected void Application_Start()
            {
                AreaRegistration.RegisterAllAreas();
                UnityConfig.RegisterComponents();
                GlobalConfiguration.Configure(WebApiConfig.Register);
                FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
                RouteConfig.RegisterRoutes(RouteTable.Routes);
                BundleConfig.RegisterBundles(BundleTable.Bundles);
            }
        } 
```

* * *

## Unity.WebAPI 入门

首先，只需在 Global.asax.cs 的 Application_Start 方法中添加对 UnityConfig.RegisterComponents() 的调用，然后 Web API 框架将使用 Unity.WebAPI DependencyResolver 来解析您的组件。

例如

```
public class WebApiApplication : System.Web.HttpApplication
{
  protected void Application_Start()
  {
    AreaRegistration.RegisterAllAreas();
    UnityConfig.RegisterComponents();                           // <----- Add this line
    GlobalConfiguration.Configure(WebApiConfig.Register);
    FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
    RouteConfig.RegisterRoutes(RouteTable.Routes);
    BundleConfig.RegisterBundles(BundleTable.Bundles);
  }           
} 
```

在 UnityConfig 类的 RegisterComponents 方法中添加您的 Unity 注册。所有实现 IDisposable 的组件都应该向 HierarchicalLifetimeManager 注册，以确保它们在请求结束时被正确处理。**

# database-design - 创建oracle数据库和表

> ID：15908021
> 
> 赞同：0
> 
> 时间：2013-04-09T17:00:54.393
> 
> 标签：database-design, oracle-apex

我已成功安装 Oracle Application Express 并使用 home page 创建了工作区`http://localhost:8080/apex`。

现在我想创建数据库和表，但在那里找不到任何指令。在主页界面下方。 ![在此处输入图像描述](https://i.stack.imgur.com/kFca5.png)

我擅长 phpmyadmin，但在 Oracle 方面是新手。有人可以告诉创建数据库和表的说明吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T18:46:58.520

我假设您已经安装了 Oracle XE。

您已经有一个可用的数据库，否则您将没有架构计数 1。

为了作为开发人员使用 APEX，您需要使用具有开发人员权限的用户登录。我看到您有 2 个用户可用。您可以使用菜单项“管理工作区”->“管理开发人员和用户”来设置新用户。

如果您使用开发人员用户，应看到以下输入屏幕：

![Oracle Apex 开发者主页] <抱歉无法发布图片 - stackflow 不允许我这样做>

使用 SQL Workshop 菜单，您可以使用创建表等工具。但顺便说一下，使用 Oracle SQL Developer 来做数据库工作要容易得多。

希望答案有帮助。

brgds，出生

# c++ - Win32 屏幕保护程序多台显示器，主显示器不在最左边

> ID：15908022
> 
> 赞同：2
> 
> 时间：2013-04-09T17:00:55.327
> 
> 标签：c++, winapi, screensaver

我制作了一个屏幕保护程序，它可以简单地将用户定义的文本从右向左滚动，如果超出左边界，则会自动跳回右侧。

它可以完美地与多台显示器配合使用，除非有一个例外：如果“主显示器”在*右侧*（即显示器#2 是主显示器），那么我没有得到滚动文本，但是显示器被代码涂黑了。如果主显示器是#1，则没有问题。

我已经研究了好几个小时的代码，无法确定问题出现在哪个阶段；我可以确认文本位于正确的位置（我插入了验证其当前位置的日志记录代码），但好像其中一个 API 调用只是将其删除。我已经阅读了他们的文档，看起来一切正常。

我通过以下方式在 WM_CREATE 中创建了一个自定义 DC：

```
if (( hDC = CreateDC(TEXT("DISPLAY"), NULL, NULL, NULL)) == NULL ) 
```

为了防止闪烁，我创建了兼容的对象来更新：

```
void
TickerScreensaver::Paint_Prep(HDC hDC)
{
    _devcon_mem = CreateCompatibleDC(hDC);
    _devcon_orig = hDC;
    _bmp_mem = CreateCompatibleBitmap(hDC, _width, _height);
} 
```

并且在 WM_PAINT 中绘画时（在 BeginPaint 等之后），将位块传输到实际的设备上下文：

```
void
TickerScreensaver::Paint(HDC hDC, RECT rect)
{
    _bmp_orig = (HBITMAP)SelectObject(_devcon_mem, _bmp_mem);

    FillRect(_devcon_mem, &rect, (HBRUSH)GetStockObject(BLACK_BRUSH));

    if ( _gdiplus_token != NULL )
    {
        Graphics    graphics(_devcon_mem);
        SolidBrush  brush(cfg.display.font_colour); 
        FontFamily  font_family(cfg.display.font_family.c_str());
        Font        font(&font_family, cfg.display.font_size, FontStyleRegular, UnitPixel);
        PointF      point_f((f32)cfg.display.text_pos.x, (f32)cfg.display.text_pos.y);
        RectF       layout_rect(0, 0, 0, 0);
        RectF       bound_rect;

        graphics.SetTextRenderingHint(TextRenderingHintAntiAlias);

        graphics.MeasureString(cfg.display.text.c_str(), cfg.display.text.length(), &font, layout_rect, &bound_rect);
        cfg.display.offset.x = (DWORD)(0 - bound_rect.Width);
        cfg.display.offset.y = (DWORD)(bound_rect.Height / 2);

        graphics.DrawString(cfg.display.text.c_str(), cfg.display.text.length(), &font, point_f, &brush);
    }

    BitBlt(hDC, 0, 0, _width, _height, _devcon_mem, 0, 0, SRCCOPY);

    SelectObject(_devcon_mem, _bmp_orig);
} 
```

我这样计算尺寸：

```
void
TickerScreensaver::GetFullscreenRect(HDC hDC, RECT *rect)
{
    RECT    s = { 0, 0, 0, 0 };

    if ( EnumDisplayMonitors(hDC, NULL, EnumMonitorCallback, (LPARAM)&s) )
    {
        CopyRect(rect, &s);

        s.left < 0 ?
            _width = s.right + (0 + -s.left) :
            _width = s.right;

        s.top < 0 ?
            _height = s.bottom + (0 + -s.top) :
            _height = s.bottom;
    }
} 
```

请注意，计算出的宽度、高度等都是100%准确的；仅当它在右侧时（将原点设置为 {0,0}，监视器 #1 为负值），它纯粹是在主显示器上似乎不起作用的绘图代码。它也可以在三显示器上再现，主要位于中心。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T06:06:52.810

好吧，事实证明它既好又简单 - 在 中`Paint()`，我们应该使用使用真实宽度和高度的矩形，而不是检索到的包含负值的矩形（实际从 API 函数检索到的）：

```
RECT r = { 0, 0, _width, _height }; 

_bmp_orig = (HBITMAP)SelectObject(_devcon_mem, _bmp_mem);

FillRect(_devcon_mem, &r, (HBRUSH)GetStockObject(BLACK_BRUSH)); 
```

# javascript - 学习编程真的很麻烦

> ID：15908025
> 
> 赞同：0
> 
> 时间：2013-04-09T17:01:00.230
> 
> 标签：javascript, web

让我先说如果这是题外话，我很抱歉，我只是想获得一些关于该去哪里的指示。

我非常想擅长编程，我是一名 28 岁的设计师，想朝着更技术的方向前进，但我真的很挣扎。我的目标是完美地使用 Ruby/Rails 或类似工具，并能够构建完整的应用程序。

多年来，我一直使用 HTML/CSS 作为设计师，这很好，但过去三个月我一直在学习 JavaScript，但我似乎无法真正用它来制作东西。我读过多本书，通过 CodeAcademy 并且我明白了，当它呈现在我面前时，我理解语法、模式等，但是当涉及到我自己实际做某事时，我画了一个空白。试着做一个测验，甚至不知道从哪里开始。

说真的，我能做的最令人兴奋的事情就是验证一个表单域或其他东西。已经 3 个月了，我觉得我应该比这更进一步，否则我永远不会进入 Rails 或任何其他语言。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:15:23.423

学习一些服务器端编程，然后 javascript 将更有可能到位，因为您会发现它的真正用途。从简单开始，例如创建一个列出数据库中单个表中的项目的页面。这将为您提供基础知识，然后开始使用 javascript 添加一些装饰，例如对列进行排序、删除行等。

祝你好运，不要放弃！

皮特

# javascript - 带有修饰键的 JavaScript 键盘快捷键？

> ID：15908027
> 
> 赞同：0
> 
> 时间：2013-04-09T17:01:03.233
> 
> 标签：javascript, jquery

我有执行一些 jQuery 的键盘快捷键：

```
$('body').on('keyup', function(e) {
  if (e.keyCode == 70) {
    $('html').addClass('example');
    $('#example').focus();
    return false;
  }
}); 
```

当用户按下`f`时，它将执行 jQuery。

我怎样才能改变`keyCode`so 而不是它`f`，我希望它是当用户按下时`alt + f`？

这是我尝试过的：

```
$('body').on('keyup', function(e) {
  if (e.keyCode == 18 && 70) {
    $('html').addClass('example');
    $('#example').focus();
    return false;
  }
}); 
```

但它没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:02:57.050

[键盘事件](https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent)具有修饰键的属性：

```
if (e.keyCode == 18 && e.altKey) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:03:14.743

`$('#example')`选择*ID* `example`。改为使用`$('.example')`。你也应该使用`e.keyCode == 70 && e.altKey`.

# qt - Qt PNG图像不显示

> ID：15908036
> 
> 赞同：0
> 
> 时间：2013-04-09T17:01:35.763
> 
> 标签：qt, qimage, qpixmap

我只是无法显示 png 图像，我检查它是否正确加载，但我的空白画布上没有显示任何内容。第三个用于显示图像。有人可以快速浏览一下吗？谢谢。

```
QImage * QI = new QImage;
bool Check = QI->load("test.png");
QGraphicsPixmapItem * QII = new QGraphicsPixmapItem(QPixmap::fromImage(*QI));

QRect ImagePanelArea1(0, MenuBarHeight, 
                      ScreenWidth / 3, (ScreenHeight / 2) - MenuBarHeight);
QRect ImagePanelArea2(ScreenWidth / 3, MenuBarHeight, 
                      ScreenWidth / 3, (ScreenHeight / 2) - MenuBarHeight);
QRect ImagePanelArea3((ScreenWidth / 3) * 2, MenuBarHeight, 
                      ScreenWidth / 3, (ScreenHeight / 2) - MenuBarHeight);

QGraphicsScene * QGS1 = new QGraphicsScene(ImagePanelArea1, this);
QGraphicsScene * QGS2 = new QGraphicsScene(ImagePanelArea2, this);
QGraphicsScene * QGS3 = new QGraphicsScene(ImagePanelArea3, this); 
QGS3->addItem(QII);

QGraphicsView * QGV1 = new QGraphicsView(QGS1, this); 
QGV1->setGeometry(ImagePanelArea1); 
QGV1->show();
QGraphicsView * QGV2 = new QGraphicsView(QGS2, this); 
QGV2->setGeometry(ImagePanelArea2); 
QGV2->show();
QGraphicsView * QGV3 = new QGraphicsView(QGS3, this); 
QGV3->setGeometry(ImagePanelArea3); QGV3->show(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:02:20.030

你确定你的项目不在你的场景之外`QGS3`吗？

`QII`是在位置`(0;0)`。您的`QRect`场景的 是在 point`((ScreenWidth / 3) * 2, MenuBarHeight)`和 point之间定义的`(ScreenWidth / 3, (ScreenHeight / 2) - MenuBarHeight)`。

因此，如果您的图像小于`(ScreenWidth / 3) * 2`，您的项目将不可见。

# command-line - Jenkins CLI 获取测试结果

> ID：15908037
> 
> 赞同：1
> 
> 时间：2013-04-09T17:01:36.813
> 
> 标签：command-line, jenkins, command-line-interface

我试图找出 Jenkins 的 CLI 中是否有一个命令，它为您提供了一个 xml、txt、html 或一些文件，其中包含刚刚执行的作业的测试结果。有没有人知道这样的命令或方法来做到这一点？我问的原因是我正在通过 Jenkins 的 CLI 从 xml 文件创建一个作业。然后，我正在执行我刚刚创建的作业，一旦作业完成，我想使用命令并获取测试结果。

谢谢你先进的大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:22:12.477

您可以将测试结果保存为工件，然后下载它，因为已知 url 类似于`http://jenkins.yourcompany.com/job/yourjob/buildId/artifact/testResults.xml`

# django - django 无休止的分页不在生产中工作，但在开发中工作

> ID：15908039
> 
> 赞同：0
> 
> 时间：2013-04-09T17:01:40.353
> 
> 标签：django, django-endless-pagination

我正在为我的网站使用带有 twitter 风格的 django-endless-pagination，它在开发中工作得非常好，但是当我转向生产时，它甚至没有显示条目。我正在使用 webfaction，下面是我已采取的操作列表。

1) PYTHONPATH=$HOME/webapps/csiop/lib/python2.7 easy_install-2.7 --install-dir=$HOME/webapps/csiop/lib/python2.7 --script-dir=$HOME/webapps/csiop/ bin django-endless-pagination 2) python manage.py syncdb 3) 在 settings.py 和下面的 settings.py 中添加 never_pagination

```
 PAGINATION_SETTINGS = {
  'PAGE_RANGE_DISPLAYED': 10,
  'MARGIN_PAGES_DISPLAYED': 2,
 } 
```

4）我的views.py更改为如下所示

```
 def homepage(request):
       item_list = items.objects.filter(show_on_website=True)
       template = 'homepage.html'
       page_template = 'home_page_index.html'

       if request.is_ajax():
             template = page_template

       return render_to_response(template,
         {'page_template': page_template,
         'item_list': item_list},
       context_instance=RequestContext(request)) 
```

5）我的模板如下所示。

Homepage.html:-

```
 <h2>Entries:</h2>
    {% include page_template %}

    {% block js %}
       {{ block.super }}
       <script src="http://code.jquery.com/jquery-latest.js"></script>
       <script src="{{ STATIC_URL }}endless_pagination/js/endless-pagination.js"></script>
       <script>$.endlessPaginate();</script>
    {% endblock %} 
```

home_page_index.html:-

```
 {% load endless %}

   {% lazy_paginate entries %}
      {% for entry in entries %}
        {# your code to show the entry #}
      {% endfor %}
   {% show_more " " %} 
```

上面的代码在我的开发中工作得很好，但在生产中却不行。有人可以帮助我缺少什么吗？

编辑： - 如果我在我的开发环境中将调试模式设置为 False，我会收到以下错误。我也在网站上使用 django-seo，它似乎在抱怨，但我不确定这个错误到底是什么。

```
 Traceback (most recent call last):
  File            "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/wsgiref/handlers.py", line 85, in run
  self.result = application(self.environ, self.start_response)
  File "/Users/django1.5/django1.5_ve/lib/python2.7/site-  packages/django/core/handlers/wsgi.py", line 255, in __call__
  response = self.get_response(request)
  File "/Users/django1.5/django1.5_ve/lib/python2.7/site-packages/django/core/handlers/base.py", line 178, in get_response
  response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
  File "/Users/django1.5/django1.5_ve/lib/python2.7/site-packages/django/core/handlers/base.py", line 224, in handle_uncaught_exception
  return callback(request, **param_dict)
  File "/Users/django1.5/django1.5_ve/lib/python2.7/site-packages/django/utils/decorators.py", line 91, in _wrapped_view
  response = view_func(request, *args, **kwargs)
  File "/Users/django1.5/django1.5_ve/lib/python2.7/site-packages/django/views/defaults.py", line 41, in server_error
   return http.HttpResponseServerError(template.render(Context({})))
   File "/Users/django1.5/django1.5_ve/lib/python2.7/site-packages/django/template/base.py", line 140, in render
   return self._render(context)
   File "/Users/django1.5/django1.5_ve/lib/python2.7/site-packages/django/template/base.py", line 134, in _render
   return self.nodelist.render(context)
   File "/Users/django1.5/django1.5_ve/lib/python2.7/site-packages/django/template/base.py", line 830, in render
   bit = self.render_node(node, context)
   File "/Users/django1.5/django1.5_ve/lib/python2.7/site-packages/django/template/base.py", line 844, in render_node
   return node.render(context)
   File "/Users/django1.5/django1.5_ve/lib/python2.7/site-packages/django/template/loader_tags.py", line 124, in render
   return compiled_parent._render(context)
   File "/Users/django1.5/django1.5_ve/lib/python2.7/site-packages/django/template/base.py", line 134, in _render
   return self.nodelist.render(context)
   File "/Users/django1.5/django1.5_ve/lib/python2.7/site-packages/django/template/base.py", line 830, in render
   bit = self.render_node(node, context)
   File "/Users/django1.5/django1.5_ve/lib/python2.7/site-packages/django/template/base.py", line 844, in render_node
   return node.render(context)
   File "/Users/django1.5/django1.5_ve/lib/python2.7/site-packages/rollyourown/seo/templatetags/seo.py", line 25, in render
   raise template.TemplateSyntaxError(msg)
   TemplateSyntaxError: {% get_metadata %} needs some path information.
    Please use RequestContext with the django.core.context_processors.request context  processor.
    Or provide a path or object explicitly, eg {% get_metadata for path %} or {%        get_metadata for object %}
   [09/Apr/2013 18:22:49] "GET / HTTP/1.1" 500 59 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:43:45.907

当您关闭调试模式时，Django 会停止为您处理静态文件。在您的远程主机上，您需要在 settings 和[manage.py collectstatic](https://docs.djangoproject.com/en/dev/ref/contrib/staticfiles/)中设置您的 STATIC_ROOT 路径。你也可以看看[这个问题](https://stackoverflow.com/questions/5836674/why-does-debug-false-setting-make-my-django-static-files-access-fail)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:06:46.400

我已经使用 pip 而不是 easy-install 重新安装了 django-endless-pagination，它现在工作正常。看起来问题是因为我之前安装了easy-install，但之前没有-Z。

# java - 我可以从托管 bean 在 JSF 中发送电子邮件吗？

> ID：15908040
> 
> 赞同：0
> 
> 时间：2013-04-09T17:01:41.343
> 
> 标签：java, jsf, jakarta-mail

我想从 JSF 应用程序发送电子邮件。我创建了简单的 Java SE 应用程序和发送电子邮件的方法，它可以工作。所以我将此代码移至托管 Bean，但在 JSF 应用程序中这不起作用。我是 Java 新手，我尝试调试它，但虽然调试已启动，但它说该站点位于 localhost:8080 上，但该站点没有出现，所以我只能运行项目并单击我的按钮以验证是否收到电子邮件收件箱。

我在 Ubuntu 12.10 上，使用 NetBeans。而且由于它在其他项目（Java Se 应用程序）中完美运行，我想也许我必须在 JSP Web 应用程序中触发这种发送不同的方式？ **为什么它在 ManagedBean 中不起作用？**

这是我的带有复制方法的类（此方法适用于 Java Se 应用程序）：

```
import javax.mail.Address;
import javax.mail.*;
import org.apache.commons.mail.Email;
import org.apache.commons.mail.EmailException;
import org.apache.commons.mail.SimpleEmail;
import org.apache.commons.mail.DefaultAuthenticator;

public class myEmailSend {
    public void sendMail(){

        Email email = new SimpleEmail();
        try {
            String authuser = "me@gmail.com";
            String authpwd = "password";
            email.setSmtpPort(587);
            email.setAuthenticator(new DefaultAuthenticator(authuser, authpwd));
            email.setDebug(true);
            email.setHostName("smtp.gmail.com");
            email.getMailSession().getProperties().put("mail.smtps.auth", "true");
            email.getMailSession().getProperties().put("mail.debug", "true");
            email.getMailSession().getProperties().put("mail.smtps.port", "587");
            email.getMailSession().getProperties().put("mail.smtps.socketFactory.port", "587");
            email.getMailSession().getProperties().put("mail.smtps.socketFactory.class",   "javax.net.ssl.SSLSocketFactory");
            email.getMailSession().getProperties().put("mail.smtps.socketFactory.fallback", "false");
            email.getMailSession().getProperties().put("mail.smtp.starttls.enable", "true");
            email.setFrom("me@gmail.com", "Agencja Ubezpieczeniowa");
            email.setSubject("TestMail");
            email.setMsg("This is a test mail3");
            email.addTo("someone@gmail.com", "ToName");
            //email.setStartTLSRequired(false);
            email.send();
        } catch (EmailException e) {
            e.printStackTrace();
        }
    }
} 
```

我有这个豆子。我都尝试了：创建 myEmailSend 对象并使用它的方法，并通过 sendMail2() 直接发送：这些都不起作用：

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import javax.mail.*;
import org.apache.commons.mail.DefaultAuthenticator;
import org.apache.commons.mail.Email;
import org.apache.commons.mail.EmailException;
import org.apache.commons.mail.SimpleEmail;

/**
 *
 * @author root
 */
@ManagedBean
@RequestScoped
public class mySendBean {

    private myEmailSend mE;
    /**
     * Creates a new instance of mySendBean
     */
    public mySendBean() {
        mE=new myEmailSend();
    }

    public void sendMail(){
        mE.sendMail();
    }
    public void sendMail2(){

        Email email = new SimpleEmail();
        try {
            String authuser = "me@gmail.com";
            String authpwd = "password";
            email.setSmtpPort(587);
            email.setAuthenticator(new DefaultAuthenticator(authuser, authpwd));
            email.setDebug(true);
            email.setHostName("smtp.gmail.com");
            email.getMailSession().getProperties().put("mail.smtps.auth", "true");
            email.getMailSession().getProperties().put("mail.debug", "true");
            email.getMailSession().getProperties().put("mail.smtps.port", "587");
            email.getMailSession().getProperties().put("mail.smtps.socketFactory.port", "587");
            email.getMailSession().getProperties().put("mail.smtps.socketFactory.class",   "javax.net.ssl.SSLSocketFactory");
            email.getMailSession().getProperties().put("mail.smtps.socketFactory.fallback", "false");
            email.getMailSession().getProperties().put("mail.smtp.starttls.enable", "true");
            email.setFrom("me@gmail.com", "Agencja Ubezpieczeniowa");
            email.setSubject("TestMail");
            email.setMsg("This is a test mail3");
            email.addTo("someone@gmail.com", "ToName");
            //email.setStartTLSRequired(false);
            email.send();
        } catch (EmailException e) {
            e.printStackTrace();
        }
    }
} 
```

并尝试从现场按钮触发它：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html">

    <body>
        <div>zapytaj <br></br>TODO write content<br></br></div>
        <h:form>
            <h:commandButton id="comand1" value="sendEmail" action="#{mySendBean.sendMail2()}" />
        </h:form>
    </body>
</html> 
```

发生了一些事情，因为我在 Firefox 中看到：“waiting for localhost ...”，但仍然没有邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T19:35:54.050

是的，你可以：p 我只需要使用 jsf 模板

# vbscript - 如何将日志添加到我的 vbscript

> ID：15908042
> 
> 赞同：8
> 
> 时间：2013-04-09T17:01:46.997
> 
> 标签：vbscript

我有这个脚本可以读取计算机列表并检查计算机是否安装了正确的软件版本。脚本向我回显版本错误的计算机，但我想创建一个日志

```
Dim strComputer, objFSO, ObjShell, strDisplayName, objList, strObject
Dim objReg, arrSubKeys, strProduct, strVersion, strReqVersion
Const For_Writing = 2
Const ForReading = 1
const ForAppending = 3
Const HKLM        = &H80000002
Const strKeyPath  = "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall"
strReqVersion = "8.2.1 MP2"
Set objFSO = CreateObject("Scripting.FileSystemObject")
Set objShell = CreateObject("WScript.Shell")
Set objList = objFSO.OpenTextFile("c:\test\test.txt",ForReading)
Do While Not objList.AtEndOfStream
    strComputer = objList.ReadLine
    If HostOnline(strComputer) = True Then 
       Inventory(strComputer)
    End If 
Loop 
Function Inventory(strComputer)
Set objTextFile = objFSO.OpenTextFile("c:\test\inventory.txt",2,true)
'creating a dictionary object
Set objDictionary = CreateObject("Scripting.Dictionary")
Set objReg = GetObject("winmgmts:{impersonationLevel=impersonate}!\\" & _ 
     strComputer & "\root\default:StdRegProv")
     ' Enumerate the subkeys of the Uninstall key
    objReg.EnumKey HKLM, strKeyPath, arrSubKeys
    For Each strProduct In arrSubKeys
  ' Get the product's display name
        objReg.GetStringValue HKLM, strKeyPath & "\" & strProduct, "DisplayName", strDisplayName
  ' Process only products whose name contain 'symantec'
        If InStr(1, strDisplayName, "Symantec", vbTextCompare) > 0 Then
    ' Get the product's display version
        objReg.GetStringValue HKLM, strKeyPath & "\" & strProduct, "DisplayVersion", strVersion
        If strReqVersion <> strVersion Then
            WScript.Echo strObject
            objDictionary.Add strComputer, strVersion
            For Each strObject In objDictionary
             WScript.Echo strObject

             objTextFile.WriteLine(strObject)
            Next   
            objTextFile.Close               
         End If    
        End If  
    Next
End Function
Function HostOnline(strComputername)
'---------- Test to see if host or url alive through ping -----------------
' Returns True if Host responds to ping
' 
' strComputername is a hostname or IP 
    Const OpenAsASCII = 0 
     Const FailIfNotExist = 0 
     Const ForReading =  1 
     Dim objShell, objFSO, sTempFile, fFile 
    Set objShell = CreateObject("WScript.Shell") 
     Set objFSO = CreateObject("Scripting.FileSystemObject") 
    sTempFile = objFSO.GetSpecialFolder(2).ShortPath & "\" & objFSO.GetTempName 
    objShell.Run "cmd /c ping -n 2 -l 8 " & strComputername & ">" & sTempFile, 0 , True 
    Set fFile = objFSO.OpenTextFile(sTempFile, ForReading, FailIfNotExist, OpenAsASCII) 
    Select Case InStr(fFile.ReadAll, "TTL=") 
         Case 0
            HostOnline = False 
         Case Else
            HostOnline = True 
    End Select 
    ffile.close 
     objFSO.DeleteFile(sTempFile)
    Set objFSO = Nothing
    Set objShell = Nothing
End Function 
```

有人可以帮我吗谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-09T17:37:00.227

有几种方法可以做到这一点。最简单的方法是在不修改脚本的情况下使用`cscript.exe`（在命令提示符中）调用脚本并将输出重定向到文件：

```
cscript your.vbs > output.log 
```

但是，如果您希望即使用户双击您的脚本也能创建日志，您必须更改您的脚本，以便它写入文件而不是回显输出。打开脚本开头的日志文件：

```
Set myLog = objFSO.OpenTextFile("C:\my.log", For_Writing, True) 
```

替换`WScript.Echo ...`为`myLog.WriteLine ...`，并在退出脚本之前关闭文件：

```
myLog.Close 
```

一种更复杂的方法是创建一组日志记录函数，这将允许您根据特定条件创建日志行，例如`LogInfo()`信息性日志消息和`LogError()`错误。

**无耻插件：**前段时间我厌倦了一遍又一遍地编写相同的样板日志记录函数，所以我写了一个[记录器类](http://www.planetcobalt.net/sdb/clogger.shtml)，它封装了常用的日志记录工具（交互式控制台、文件、事件日志）并提供了 4 个日志级别的日志记录方法（错误、警告、信息、调试）。该类可用于记录到这样的文件：

```
Set myLog = New CLogger
myLog.LogToConsole = False
myLog.LogFile = "C:\my.log"

myLog.LogInfo "info message"
...
myLog.LogError "an error occurred" 
```

释放对象时会自动关闭日志文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-03T07:12:06.657

为什么不使用系统的事件日志？我在[这个答案中描述了如何](https://stackoverflow.com/questions/19574317/vbs-to-event-log/19590044#19590044)

这意味着大部分工作已为您完成，您无需担心将日志文件放在哪里

# javascript - 在头部隐藏javascript

> ID：15908044
> 
> 赞同：0
> 
> 时间：2013-04-09T17:01:55.627
> 
> 标签：javascript

大家好：我一定是个菜鸟——我的 html 文件头部有这两个 javascript 脚本，但我想隐藏 api 编号以及第二个 js。我需要写什么才能将这些 js 放在另一个文件中，当右键单击鼠标/显示源代码时没有人可以阅读，并且在 div 中显示相同的谷歌地图

我试图把 src="filename.js" 但谷歌地图根本不会加载。

混淆 JS 代码？但是我们怎样才能把它放在一个侧面文件中呢？src="obfuscated code.js" 根本不会加载谷歌地图只把混淆代码放在头上，但它会弄乱谷歌索引吗？

1.  ```
     <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=   
     ...&sensor=false"></script> 
    ```

2.  ```
     <script type="text/javascript">
        function initialize() {
            var latlng = new google.maps.LatLng(-19.991901,57.592607);

            var settings = {
                zoom: 1,
                disableDoubleClickZoom: true,
                draggable: false,
                scrollwheel: false,
                minZoom: 1,
                maxZoom: 18,
                center: latlng,
                mapTypeControl: false,
                navigationControl: true,
    navigationControlOptions: {style: google.maps.NavigationControlStyle.BIG},   
                mapTypeId: google.maps.MapTypeId.ROADMAP};
       var map = new google.maps.Map(document.getElementById("map_canvas"), settings);

            var companyImage = new google.maps.MarkerImage('images/logo.png',
                new google.maps.Size(100,50),
                new google.maps.Point(0,0),
                new google.maps.Point(50,50)
            );

                 var companyShadow = new google.maps.MarkerImage('images/logo_shadow.png',
                new google.maps.Size(130,50),
                new google.maps.Point(0,0),
                new google.maps.Point(65, 50));

            var companyPos = new google.maps.LatLng(-19.9913,57.592607);

            var companyMarker = new google.maps.Marker({
                position: companyPos,
                map: map,
                icon: companyImage,
                shadow: companyShadow,
                title:"Bur-Nas Beach",
                zIndex: 3});

            google.maps.event.addListener(companyMarker, 'click', function() {
                infowindow.open(map,companyMarker);
            });
        }
    </script> 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:36:10.220

好的，有一种方法可以通过动态加载您的 javascript（这意味着通过其他一些 javascript 动态注入脚本标签）并在它保留在浏览器内存中时将其删除。

```
 (function() {

    var script_tag = document.createElement('script');
    script_tag.setAttribute("type","text/javascript");
    script_tag.setAttribute("src",
        "https://maps.googleapis.com/maps/api/js?key=YOURKEYHERE");
    if (script_tag.readyState) {
      script_tag.onreadystatechange = function () { // For old versions of IE
          if (this.readyState == 'complete' || this.readyState == 'loaded') {
              main();
          }
      };
    } else { // Other browsers
      script_tag.onload = main;
    }
    // Try to find the head, otherwise default to the documentElement
    (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);

    function removejscssfile(filename, filetype){
var targetelement=(filetype=="js")? "script" : (filetype=="css")? "link" : "none" //determine element type to create nodelist from
 var targetattr=(filetype=="js")? "src" : (filetype=="css")? "href" : "none" //determine corresponding attribute to test for
 var allsuspects=document.getElementsByTagName(targetelement)
 for (var i=allsuspects.length; i>=0; i--){ //search backwards within nodelist for matching elements to remove
  if (allsuspects[i] && allsuspects[i].getAttribute(targetattr)!=null && allsuspects[i].getAttribute(targetattr).indexOf(filename)!=-1)
   allsuspects[i].parentNode.removeChild(allsuspects[i]) //remove element by calling parentNode.removeChild()
 }
}

/******** Our main function called when Maps has loaded ********/
function main() {
//initiate maps here

//remove all occurences of your script on page
    removejscssfile("https://maps.googleapis.com/maps/api/js?key=YOURKEYHERE", "js") //remove all occurences of your script on page
    //Do some cool googlemaps based stuff here

}

})(); // We call our anonymous function immediately 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:05:03.290

解决方案之一是混淆您的文件，使其不适合人类阅读。 [看到这个线程](https://stackoverflow.com/questions/194397/how-can-i-obfuscate-javascript)

# html - 这种网络漏洞怎么称呼？

> ID：15908053
> 
> 赞同：-1
> 
> 时间：2013-04-09T17:02:17.673
> 
> 标签：html, security, web-applications, terminology

在黑客挑战中，我发现了以下内容：

```
<input type="hidden" value="1500" name="price"> 
```

这个挑战让你明白，如果你足够聪明地改变价值（这是由 Web 应用程序的客户端强加的），你基本上可以在购买之前改变商品的价格。
这是一个影响 Web 应用程序的众所周知的漏洞，但我真的不知道如何更准确地命名这种类型的漏洞。感谢任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T17:06:09.817

这称为[Web 参数篡改](https://www.owasp.org/index.php/Web_Parameter_Tampering)，或称为[假定不可变 Web 参数的外部控制 (CWE-472)](http://cwe.mitre.org/data/definitions/472.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:07:38.240

我会将其归类为客户端漏洞。虽然开发人员使用隐藏字段来存储可能被认为敏感的信息是闻所未闻的，但开发新手可能会将其用于“简单”解决方案。

显然隐藏字段没有被渲染，但是从源代码中很容易看到。

# jquery - 与滚动相关的淡化 div

> ID：15908058
> 
> 赞同：1
> 
> 时间：2013-04-09T17:02:50.377
> 
> 标签：jquery, css, scroll

当页面内容覆盖它时，我正在尝试淡化固定的背景 div。

理想情况下，如果可能的话，希望使用 CSS，否则 jquery

现有示例：http: [//jsfiddle.net/HsRpT/](http://jsfiddle.net/HsRpT/)

**HTML**

```
<div class="block">
     <h2>Fade this in / out as scroll down<h2>
</div>

<div class="content">
    <div class="headerbar">
    </div>
        </div 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:33:06.193

希望这是您正在寻找的：

[http://jsfiddle.net/HsRpT/6/](http://jsfiddle.net/HsRpT/6/)

```
<div class="block">
    <h2>Fade this in / out as scroll down</h2>
</div>
<div class="content">
    <div class="headerbar">
    </div>
</div>

.block {
    background: #339994;
    width:100%;
    padding-top:140px;
    height: 200px;
    position: fixed;
}
h2 {
    color: #fff;
    margin: 0px;
    text-align: center;
}
.headerbar {
    background: #f5dc61;
    width:100%;
    height: 680px;
}
.content {
    position: relative;
    top: 300px;
}
body {
    margin: 0;
    font-family: arial;
}

$(window).scroll(function() {
    var el = $('.block');    
    var offset = el.offset();  
    var opacity = ( (offset.top - el.height() ) / 100 ) * -1;
    $('.block').css('opacity', opacity );
}); 
```

# php - ZF2 如何获取最后插入的 id 值？

> ID：15908065
> 
> 赞同：17
> 
> 时间：2013-04-09T17:03:12.677
> 
> 标签：php, postgresql, insert, frameworks, zend-framework2

我坚持使用 Zend 框架 2 获取最后一个插入 id，我放弃了这个......

有尝试过的组合：

```
var_dump($this->tableGateway->insert($insert));
var_dump($this->tableGateway->lastInsertValue);
var_dump($this->tableGateway->getLastInsertValue());
var_dump($this->tableGateway->getAdapter()->getDriver()->getConnection()->getLastGeneratedValue()); 
```

值正在插入到表中，但每一行（除了第一行，它给出 int“1”）都返回 null。请不要告诉我，这么大的框架不提供获取最后插入 id 值的可能性！？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-06-08T19:41:12.017

Here is what I use:

```
$data = array()// Your data to be saved;
$this->tableGateway->insert($data);
$id = $this->tableGateway->lastInsertValue; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-04T17:43:36.747

我知道这是很久以前的事了，但是在花了很多时间解决这个特殊问题之后，我想为未来遇到同样问题的谷歌员工发布解决方案。

问题是 Pgsql 驱动程序需要序列的名称才能返回最后一个 id，如下所示：

```
$adapter->getDriver()->getLastGeneratedValue("sequence_name"); 
```

这适用于 2.3.1。在 2.2.2（可能更高版本）中存在一个错误，其中 name 不是驱动程序中 getLastGeneratedValue 的参数，因此您必须直接调用连接。

```
$adapter->getDriver()->getConnection()->getLastGeneratedValue 
```

这就是我通过查看代码发现的。最好的解决方案是确保您已更新 ZF2，并使用

```
$adapter->getDriver()->getLastGeneratedValue("sequence_name"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-20T17:40:41.100

在 postgres 中，您需要设置 SequenceFeature：

```
...
use Zend\Db\TableGateway\Feature;
...
public function setDbAdapter( Adapter $adapter ) {
   ...
   $this->featureSet = new Feature\FeatureSet();
   $this->featureSet->addFeature(new Feature\SequenceFeature('YOUR_FIELD_NAME','YOUR_SEQUENCE_NAME'));
   $this->initialize();
} 
```

现在`$this->tableGateway->getLastInsertValue();`应该可以了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-12-05T15:26:23.570

好的，我知道这个问题是几个月前的问题，尽管它可能对那些正在寻找解决这个问题的人有用，以获取最后的插入值最好的方法是从适配器接口获取值

```
do your insert //then
$id = $adapter->getDriver()->getLastGeneratedValue(); 
```

这对我来说很适合mysql数据库

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-22T13:30:47.507

在`App\Model\AlbumTable`哪个扩展中，`AbstractTableGateway`我得到最后一个 id`$inserted_id = $this->lastInsertValue;`

举个例子：

```
 if ($id == 0) {
            $this->insert($data);
            $inserted_id = $this->lastInsertValue;    
        } elseif ($this->getAlbum($id)) {
            $this->update(
                $data, array(
                'id' => $id,
                )
            );
        } else {
            throw new \Exception('Form id does not exist');
        } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-17T16:59:58.147

这不适用于 oracle oci8，因为它尚未实现。见这里：[https ://github.com/zendframework/zf2/blob/master/library/Zend/Db/Adapter/Driver/Oci8/Connection.php#L343](https://github.com/zendframework/zf2/blob/master/library/Zend/Db/Adapter/Driver/Oci8/Connection.php#L343)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-14T14:06:01.860

还有另一种可能将 FeatureSet 添加到 TableGateway。

在 Module.php 中，您可以定义（例如表用户）

```
 'UserTableGateway' => function ($sm) {
                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                $resultSetPrototype = new ResultSet();
                $resultSetPrototype->setArrayObjectPrototype(new UserEntity());
                return new TableGateway('user', $dbAdapter, new Feature\SequenceFeature('user','user_id_seq'), $resultSetPrototype); 
```

但是SequenceFeature 中有一个错误。当您使用公共架构时，一切都很好。当您必须使用其他模式时，您应该使用 Zend\Db\Sql\TableIdentifier;

在这种情况下 Module.php 应该是：

```
 'UserTableGateway' => function ($sm) {
                $dbAdapter = $sm->get('Zend\Db\Adapter\Adapter');
                $resultSetPrototype = new ResultSet();
                $resultSetPrototype->setArrayObjectPrototype(new UserEntity());
                return new TableGateway(new TableIdentifier('user','someSchema'), $dbAdapter, new Feature\SequenceFeature(new TableIdentifier('user','someSchema'),'user_id_seq'), $resultSetPrototype); 
```

在这种情况下，Postgresql 查询 SELECT NEXTVAL 会出错，因为 Feature\SequenceFeature 将使用公共模式而不是在第一个参数中定义来准备查询

选择 NEXTVAL('user_id_seq')

在这种情况下，sql查询应该是

SELECT NEXTVAL('someSchema'.'user_id_seq')

# javascript - 在同步回调中 使用dust.js（异步）

> ID：15908072
> 
> 赞同：2
> 
> 时间：2013-04-09T17:03:22.270
> 
> 标签：javascript, asynchronous, callback, dust.js

我正在尝试为即将到来的项目选择一个 JS 模板引擎，而我最喜欢的一个似乎是[dust.js。](http://akdubya.github.io/dustjs/)

我喜欢它是异步的想法，即我只是为渲染准备一些模板，当它准备好时，回调将渲染的 HTML 插入到 DOM 中。

但是我不确定如何解决同步回调中​​的异步渲染问题。例如 - 我经常使用[DataTables](http://www.datatables.net/)插件，它提供了一些回调，允许我在实际插入 DOM 节点之前修改它们。

为了说明这个问题 - 让我们假设我有一个以下片段（从[DataTables website](http://www.datatables.net/usage/callbacks)获取和修改）：

```
$(document).ready( function() {
  $('#example').dataTable( {
    "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
      // modify the node before it's actually inserted into the document
      $('td:eq(4)', nRow).html( '<b>' + aData[4] + '</b>' );
    }
  } );
} ); 
```

现在-我想摆脱`'<b>' + aData[4] + '</b>'`并使用带有某些上下文的模板来代替（这是一个微不足道的示例，但显示了问题）。

如果我理解正确，我不能强制`dust.js`同步渲染模板，因此可能会发生未处理的节点将被插入到文档中（用户会看到它未处理），然后在`dust.js`实际渲染模板时，该节点将被修改.

从用户的角度来看，这显然看起来不太好。

那么真的是这种情况（`dust.js`不能强制同步），如果是的话 - 如何应对？我应该使用同步引擎吗，`handlebars`或者`mustache`我在这里看不到明显的东西？

非常欢迎任何帮助、见解或建议。谢谢！:)

**编辑：**

这个问题不是关于如何渲染模板，而是关于如何确保它在`fnRowCallback`完成之前被渲染。感谢@robertklep 用您的（已删除）答案指出这一点。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-04-18T00:12:42.810

编辑：要清楚，我认为这是一个不好的做法，你通常不应该做这样的事情。我将下面的代码仅作为一个示例，说明如果技术或架构限制迫使您这样做，一个人如何做这样的事情。但是，它只能作为最后的手段使用。

我过去做过一些令人讨厌的事情，涉及使用布尔值和循环来“捕获”异步调用，但我不会真的推荐它作为一个特别好的做法。不过，如果你想要它，它就在这里。

```
// name is the template identifier, template is the template contents,
// data is the "context" of the template (its model), callback (optional)
// is the method you want the rendered template passed to, cbContext
// (optional) is the context in which you want the callback to execute
asyncToSync = function (name, template, data, callback, cbContext) {
    // Tracks if it's time to return or not
    var finished = false;
    // Gives us an exit condition in case of a problem
    var maxLoops = 10000;
    // Create a variable to store the return value
    var outVal = 'Template rendering did not finish';
    // And the callback function to pass to dust
    var dustCb = function (err, html) {
        finished = true;
        outVal = html;
    }
    var i = 0;
    // We create this as a function so that increment goes to the bottom
    // of the execution queue, giving dustCb a chance to execute before
    // the counter hits max.
    var incrementCounter = function () {
        i += 1;
    };
    // Compile, load, and render the template
    var compiled = dust.compile(template, name);
    dust.loadSource(compiled);
    // Pass our callBack so the flag gets tripped and outVal gets set
    dust.render(name, data, dustCb);
    // count up to maxLoops
    while(!finished && (i < maxLoops)) {
        incrementCounter();
    }
    // If a callback is defined, use it
    if (callback) {
        // If a callback context is defined, use it
        return (cbContext) ? callback.call(cbContext, outVal) : callback(outVal);
    }
    // otherwise just return the rendered HTML
    return outVal;
} 
```

# c# - 如何设置 Tesseract 2 在 C# 中读取单个字符？

> ID：15908074
> 
> 赞同：3
> 
> 时间：2013-04-09T17:03:29.143
> 
> 标签：c#, ocr, tesseract, image-recognition

我在 C# 中编写了一个简单的 OCR，并使用 tesseract 2.0

在我的程序中，我只会识别大写字母。

出于这个原因，我使用：

```
Tesseract ocr = new Tesseract();
ocr.SetVariable("tessedit_char_whitelist", "ABCDEFGHIJKLMNOPQRSTUVWXYZ"); 
```

所以此时我将传递一个大写字母的图像。它工作得很好，但有时它会返回给我一个带有两个字母的字符串。

```
Input:
R
Output:
FE 
```

现在我需要知道如何将页面分割模式设置为“单字符”。以改善结果。

任何人都知道如何在 C# 中使用 tesseract 2 做到这一点？

因为在 Tesseract ocr 对象中我只有 SetVariable 方法。在 iOS apis 中有这种方法可以做到这一点：

```
setPageSegMode(TessBaseAPI.PSM_SINGLE_CHAR); 
```

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:16:01.177

PSM 仅在 Tesseract 3.0x 中可用；因此，您需要一个兼容的 .NET 包装器。[https://github.com/charlesw/tesseract](https://github.com/charlesw/tesseract)有一个。

# xslt - 在 XSLT 转换中获得第一个孩子

> ID：15908079
> 
> 赞同：1
> 
> 时间：2013-04-09T17:03:47.083
> 
> 标签：xslt

我有以下 XSL，我用它来将 Oracle SQL 开发人员的 XML 格式转换为 DBUnit 期望的“完整”XML 格式（用于创建用于测试的数据集）。

```
<?xml version="1.0"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:java="java"
    xmlns:dbutil="com.jason.util.DatabaseTestUtil">
    <xsl:output method="xml" indent="yes" />
    <xsl:template match="/">
        <xsl:text disable-output-escaping="yes">&lt;dataset&gt;</xsl:text>
        <xsl:text>&#xa;</xsl:text>
            <xsl:text disable-output-escaping="yes">&lt;table name=""&gt;</xsl:text>
            <xsl:text>&#xa;</xsl:text>
            <xsl:for-each select="RESULTS/ROW">
                <xsl:for-each select="COLUMN">
                    <xsl:text disable-output-escaping="yes">&lt;column&gt;</xsl:text>
                        <xsl:value-of select="@NAME" />
                    <xsl:text disable-output-escaping="yes">&lt;/column&gt;</xsl:text>
                    <xsl:text>&#xa;</xsl:text>
                </xsl:for-each>
            </xsl:for-each>
            <xsl:for-each select="RESULTS">
                <xsl:for-each select="ROW">
                    <xsl:text disable-output-escaping="yes">&lt;row&gt;</xsl:text>
                        <xsl:for-each select="COLUMN">
                            <xsl:text disable-output-escaping="yes">&lt;value descriptor="</xsl:text>
                            <xsl:value-of select="@NAME"/>
                            <xsl:text disable-output-escaping="yes">"&gt;</xsl:text>
                            <xsl:choose>
                                <xsl:when test="@NAME='NAME'">
                                    <xsl:value-of select="dbutil:generateRandomName()" />
                                </xsl:when>
                                <xsl:when test="@NAME='MEMBER_SSN'">
                                    <xsl:value-of select="dbutil:generateRandomSsn()" />
                                </xsl:when>
                                <xsl:when test="@NAME='SPOUSE_SSN'">
                                    <xsl:variable name="spouseSsn">
                                        <xsl:value-of select="." />
                                    </xsl:variable>
                                    <xsl:if test="dbutil:hasSpouseSsn($spouseSsn)"><xsl:value-of select="dbutil:generateRandomSsn()" /></xsl:if>
                                </xsl:when>
                                <xsl:when test="@NAME=E_MAIL_ADDRESS">
                                    <xsl:text>noname@mail.com</xsl:text>
                                </xsl:when>
                                <xsl:otherwise>
                                    <xsl:value-of select="." />
                                </xsl:otherwise>
                            </xsl:choose>
                            <xsl:text disable-output-escaping="yes">&lt;/value&gt;</xsl:text>
                            <xsl:text>&#xa;</xsl:text>
                        </xsl:for-each>
                        <xsl:text>&#xa;</xsl:text>
                    <xsl:text disable-output-escaping="yes">&lt;/row&gt;</xsl:text>
                    <xsl:text>&#xa;</xsl:text>
                </xsl:for-each>
            </xsl:for-each>
            <xsl:text disable-output-escaping="yes">&lt;/table&gt;</xsl:text>
            <xsl:text>&#xa;</xsl:text>
        <xsl:text disable-output-escaping="yes">&lt;/dataset&gt;</xsl:text>
        <xsl:text>&#xa;</xsl:text>
    </xsl:template>
</xsl:stylesheet> 
```

我调用了一些“后端”java，这样我就不会在我的测试集中嵌入人们的私人信息。

不幸的是，通过/RESULTS/ROW 的第一个循环应该只是通过/RESULT/ROW 的第一个子项的列的循环。

谁能告诉我如何得到第一个孩子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:14:32.967

> 不幸的是，通过/RESULTS/ROW 的第一个循环应该只是通过/RESULT/ROW 的第一个子项的列的循环。
> 
> 谁能告诉我如何得到第一个孩子？

**替换**：

```
 <xsl:for-each select="RESULTS/ROW">
            <xsl:for-each select="COLUMN">
              .  .  .  .  .  .  .  .  .  
           </xsl:for-each>
        </xsl:for-each> 
```

**与**：

```
 <xsl:for-each select="RESULTS/ROW[1]/Column">
              .  .  .  .  .  .  .  .  .  
        </xsl:for-each> 
```

# ios - 将“initWithNibName”更改为“storyboardWithName”

> ID：15908080
> 
> 赞同：1
> 
> 时间：2013-04-09T17:03:48.193
> 
> 标签：ios, xcode, uistoryboard, nib

我按照一些教程在应用程序启动期间创建了一个开门动画，但它正在调用

xib 文件，我想调用情节提要，但我对此没有足够的经验。这是我的代码

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    self.viewController = [[[OpenDoorsViewController alloc] initWithNibName:@"OpenDoorsViewController" bundle:nil] autorelease];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T17:21:06.247

如果您只是想在应用程序启动时加载情节提要的*初始视图控制器*，只需`YES`在`application:didFinishLaunchingWithOptions:`.

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    return YES;
} 
```

如果要从情节提要中加载特定的控制器，则需要首先通过以下方式获取情节提要实例

```
UIStoryboard * storyboard = [UIStoryboard storyboardWithName:@"StoryboardName" bundle:nil]; 
```

然后用它来实例化你需要的控制器

```
UIViewController * controller = [storyboard instantiateViewControllerWithIdentifier:@"controllerIdentifier"]; 
```

其中`controllerIdentifier`已作为*情节提要标识符*分配给 Interface Builder 中的控制器。

这是一个加载特定视图控制器的示例，并在启动时显示它。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    UIStoryboard * storyboard = [UIStoryboard storyboardWithName:@"StoryboardName" bundle:nil];
    UIViewController * controller = [storyboard instantiateViewControllerWithIdentifier:@"controllerIdentifier"];
    self.window.rootViewController = controller;
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:16:06.380

如果您开始一个新的 iOS 项目并选择“使用故事板”，故事板将自动为您预加载。

Storyboard 是一个包含应用程序所有控制器（场景）的地方，要引用其中一个，您需要使用

```
 UIViewController *controller = [[UIStoryboard storyboardWithName:@"storyboard" bundle:[NSBundle mainBundle]] instantiateViewControllerWithIdentifier:@"an identifier"]; 
```

# camera - 三个 js 第三人称相机不工作

> ID：15908081
> 
> 赞同：0
> 
> 时间：2013-04-09T17:04:06.013
> 
> 标签：camera, three.js

我正在尝试在我的对象上实现第三人称相机。

我用立方体试过了，效果很好

立方体：

```
var object, camera;
cubeGeometry = new THREE.CubeGeometry( 50, 50, 50 );
cubeMaterial = new THREE.MeshLambertMaterial({ color: 0xFF0000 });
object = new THREE.Mesh( cubeGeometry, cubeMaterial );
scene.add( object );

camera = new THREE.PerspectiveCamera( 45, ASPECT, 0.2, 10000);
camera.position.z = -300;
camera.position.y = 100;
object.add(camera); 
camera.lookAt(object.position);
renderer.render( scene, camera ); 
```

但我的模型不起作用：

```
var object, camera;
var loader = new THREE.OBJMTLLoader();
loader.addEventListener('load', function (event){
    object = event.content;
    object.updateMatrix();
    object.scale.set(20,20,20);
    scene.add(object);
}, false);
loader.load( "models/dragster.obj", "models/dragster.mtl" );

    camera = new THREE.PerspectiveCamera( 45, ASPECT, 0.2, 10000);
    object.add(camera);
camera.position.z = -300;
camera.position.y = 100;    
camera.lookAt(object.position);
renderer.render( scene, camera ); 
```

当我将相机添加到场景时它可以工作，但是当我将它添加到对象时它不会

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T00:18:36.863

你的问题很简单。执行此操作时，OBJ 尚未加载：

```
object.add( camera ); 
```

尝试将该代码移动到事件侦听器内部。

# php - 连接客户端服务器时出错 [主机查找失败 [0]:]

> ID：15908082
> 
> 赞同：-1
> 
> 时间：2013-04-09T17:04:09.060
> 
> 标签：php

我尝试连接客户端服务器，但在客户端出现以下错误。

> 主机查找失败 [0]：

可能的解决方案是什么？

```
<?php
$host    = "192.168.1.7";
$port    = 2300;
$message = "Hello Server";
echo "Message To server :".$message;
// create socket
$socket = socket_create(AF_INET, SOCK_STREAM, 0) or die("Could not create socket\n");
// connect to server
$result = socket_connect($socket, $host, $port) or die("Could not connect to     server\n");  
// send string to server
socket_write($socket, $message, strlen($message)) or die("Could not send data to    server\n");
// get server response
$result = socket_read ($socket, 1024) or die("Could not read server response\n");
echo "Reply From Server  :".$result;
// close socket
socket_close($socket);
?> 
```

我想将一个简单的 php 客户端连接到 php 服务器 .. 服务器和客户端位于同一网络中的两个不同系统中.. 我通过 xampp 使用 Apache ..

这是实际的错误

> 警告：socket_connect() [function.socket-connect]：主机查找失败 [0]：请求的名称有效，但未找到请求类型的数据。在第 9 行的 D:\Program Files\XAMPP\htdocs\php\client.php 中无法连接到服务器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:18:18.053

```
$host    = "1292.168.1.7"; 
```

这看起来不是一个有效的 IP 地址。它可能应该是 xxx.xxx.xxx.xxx 的形式（xxx 是 1 到 255 之间的数字）。

> 警告：socket_connect() [function.socket-connect]: 无法连接 [0]: 由于目标机器主动拒绝，无法建立连接

只有在此 IP 地址和您在脚本中指定的端口上运行服务器时，您的脚本才能连接到指定的 IP 地址。检查服务器是否正在运行，是否正在接受连接（是否有防火墙？）以及端口是否正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:18:43.257

这是错误的：

```
$host    = "1292.168.1.7"; 
```

我怀疑你的意思是

```
$host    = "192.168.1.7"; 
```

# vb.net - 在VB中查找子字符串的字符串而不使用库函数

> ID：15908084
> 
> 赞同：0
> 
> 时间：2013-04-09T17:04:12.443
> 
> 标签：vb.net

我对这个程序有点困惑。我是 Visual Basic 的新手，但对 C 来说是中级。实际上我想在不使用 Visual Basic 的库函数的情况下获取字符串的子字符串。这是我也给出了我的 VB 代码的 C 源代码。1.程序将从用户那里获得两个输入，即 A 和 B 2.然后从 B 中找到子字符串。3.最后打印结果。

```
int i,j=0,k=0,substr=0;
            for(i=0;i<strlen(a);i++)
            {

                if(a[i]==b[j])
                {
                    j++;

                    if(b[j]==0)
                    {
                        printf("second string is substring of first one");
                        substr=1;
                        break;
                    }
                }
            }
            for(i=0;i<strlen(b);i++)
            {
                if(b[i]==a[k])
                {
                    k++;
                    if(a[k]==0)
                    {
                        printf(" first string  is substring of second string");
                        substr=1;
                        break ;
                    }
                }
            }
            if(substr==0)
            {
                         printf("no substring present");
             } 
```

虽然我的代码是

```
 Dim a As String
    Dim b As String
    a = InputBox("Enter First String", a)
    b = InputBox("Enter 2nd String", b)
        Dim i As Integer
        Dim j As Integer = 0
        Dim k As Integer = 0
        Dim substr As Integer = 0
        For i = 0 To a.Length - 1

            If a(i) = b(j) Then
                j += 1

                If b(j) = 0 Then
                MsgBox("second string is substring of first one")
                    substr = 1
                    Exit For
                End If
            End If
        Next i
        For i = 0 To b.Length - 1
            If b(i) = a(k) Then
                k += 1
                If a(k) = 0 Then
                MsgBox(" first string  is substring of second string")
                    substr = 1
                    Exit For
                End If
            End If
        Next i
        If substr = 0 Then
        MsgBox("no substring present")
        End If
End Sub 
```

编译时会出现以下调试错误。

```
 Line Col
Error 1 Operator '=' is not defined for types 'Char' and 'Integer'. 17  24  
Error 2 Operator '=' is not defined for types 'Char' and 'Integer'. 27  24 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:36:41.390

您的部分困惑是 .Net 字符串不仅仅是字符缓冲区。我将假设您至少可以使用字符串。如果不能，请改用需要声明字符数组。顺便说一句，这应该可以让您以 1:1 的形式进行翻译：

```
Private Shared Function search(ByVal a As String, ByVal b As String) As Integer
    Dim i As Integer = 0
    Dim j As Integer = 0
    Dim firstOcc As Integer

    While i < a.Length

        While a.Chars(i)<>b.Chars(0) AndAlso i < a.Length
            i += 1
        End While

        If i >= a.Length Then Return -1 'search can not continue

        firstOcc = i

        While a.Chars(i)=b.Chars(j) AndAlso i < a.Length AndAlso j < b.Length
            i += 1
            j += 1
        End While

        If j = b.Length Then Return firstOcc
        If i = a.Length Then Return -1

        i = firstOcc + 1
        j = 0
    End While
    Return 0
End Function

Shared Sub Main() As Integer
    Dim a As String
    Dim b As String
    Dim loc As Integer

    Console.Write("Enter the main string :")
    a = Console.ReadLine()

    Console.Write("Enter the search string :")
    b = Console.ReadLine()

    loc = search(a, b)

    If loc = -1 Then
      Console.WriteLine("Not found")
    Else
      Console.WriteLine("Found at location {0:D}",loc+1)
    End If 

    Console.ReadKey(True)
End Sub 
```

但请不要真正使用它。你真正需要的是：

```
Private Shared Function search(ByVal haystack as String, ByVal needle As String) As Integer
     Return haystack.IndexOf(needle)
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:26:35.110

VB 有一个名为 InStr 的内置函数，它是语言的一部分。它返回一个整数，指定一个字符串在另一个字符串中第一次出现的起始位置。

[http://msdn.microsoft.com/en-us/library/8460tsh1(v=VS.80).aspx](http://msdn.microsoft.com/en-us/library/8460tsh1(v=VS.80).aspx)

皮特

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T19:30:05.100

![在此处输入图像描述](https://i.stack.imgur.com/qgeMX.png)

试试这个，这将返回一个 List(Of Integer)，其中包含在指定搜索起始位置之后源文本中所有出现的查找文本的索引。

```
Option Strict On
Public Class Form1
''' <summary>
''' Returns an array of indexes where the find text occurred in the source text.
''' </summary>
''' <param name="Source">The text you are searching.</param>
''' <param name="Find">The text you are searching for.</param>
''' <param name="StartIndex"></param>
''' <returns>Returns an array of indexes where the find text occurred in the source text.</returns>
''' <remarks></remarks>
Function FindInString(Source As String, Find As String, StartIndex As Integer) As List(Of Integer)
    If StartIndex > Source.Length - Find.Length Then Return New List(Of Integer)
    If StartIndex < 0 Then Return New List(Of Integer)
    If Find.Length > Source.Length Then Return New List(Of Integer)
    Dim Results As New List(Of Integer)
    For I = StartIndex To (Source.Length) - Find.Length
        Dim TestString As String = String.Empty
        For II = I To I + Find.Length - 1
            TestString = TestString & Source(II)
        Next
        If TestString = Find Then Results.Add(I)
    Next
    Return Results
End Function
Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    Try
        Dim Search As String = "Hello world, this world is an interesting world"
        Dim Find As String = "world"
        Dim Indexes As List(Of Integer) = New List(Of Integer)
        Try
            Indexes = FindInString(Search, Find, 0)
        Catch ex As Exception
            MsgBox(ex.ToString)
        End Try
        RichTextBox1.Text = "Search:" & vbCrLf
        RichTextBox1.Text = RichTextBox1.Text & Search & vbCrLf & vbCrLf
        RichTextBox1.Text = RichTextBox1.Text & "Find:" & vbCrLf
        RichTextBox1.Text = RichTextBox1.Text & Find & vbCrLf & vbCrLf
        RichTextBox1.Text = RichTextBox1.Text & "-----------" & vbCrLf
        RichTextBox1.Text = RichTextBox1.Text & "Result Indexes:" & vbCrLf & vbCrLf
        For Each i As Integer In Indexes
            RichTextBox1.Text = RichTextBox1.Text & i.ToString & vbCr
        Next
    Catch ex As Exception
        MsgBox(ex.ToString)
    End Try
End Sub
End Class 
```

**这是另一种方式，不使用 .Net 函数。**

```
Function FindInString(Source As String, Find As String, StartIndex As Integer) As Integer()
    If StartIndex > Len(Source) - Len(Find) Then Return {}
    If StartIndex < 0 Then Return {}
    If Len(Find) > Len(Source) Then Return {}
    Dim Results As Integer() = {}, ResultCount As Integer = -1
    For I = StartIndex To Len(Source) - Len(Find)
        Dim TestString As String = ""
        For II = I To I + Len(Find) - 1
            TestString = TestString & Source(II)
        Next
        If TestString = Find Then
            ResultCount += 1
            ReDim Preserve Results(ResultCount)
            Results(ResultCount) = I
        End If
    Next
    Return Results
End Function 
```

# python - Python 重复捕获组

> ID：15908085
> 
> 赞同：2
> 
> 时间：2013-04-09T17:04:20.460
> 
> 标签：python, regex

我正在尝试解析一系列 SHOW CDP NEIGHBORS DETAIL 输出，以便捕获每个设备及其 IP 地址。

我遇到的问题是某些设备可能分配了多个 IP 地址，这是一个示例输出。

```
Device ID: RTPER1.MFN21Mb.domain.local
Entry address(es): 
  IP address: 200.152.51.3
  IP address: 82.159.177.233
  IP address: 201.152.51.140
  IP address: 84.252.100.3
Platform: Cisco 2821,  Capabilities: Router Switch IGMP 
```

我编写了这个正则表达式来捕获输入，根据 gskinner 它匹配所有 4 个 ip 地址，但捕获只是最后一个（正如正则表达式所预期的那样）

```
Device ID: ([0-9A-Za-z-.&]+)\s+Entry address\(es\):\s+(?:IP address: ([0-9.]+)\s+)+ 
```

所以我上网想知道如何做到这一点。我尝试了此处建议的正则表达式[Capturing repeating subpatterns in Python regex](https://stackoverflow.com/questions/9764930/capturing-repeating-subpatterns-in-python-regex)但使用正则表达式模块并没有改变输出。我仍然只得到列表中的最后一个 IP 地址，而没有其他的。

按照我得到的例子

```
temp = regex.match(r'Device ID: ([0-9A-Za-z-.&]+)\s+Entry address\(es\):\s+(?:IP address: ([0-9.]+)\s+)+', file)
print temp 
```

临时返回无。

如果我确实找到了。我只返回最后一个 ip 地址 84.252.100.3

如果我添加多个捕获组，例如

```
temp = regex.findall(r'Device ID: ([0-9A-Za-z-.&]+)\s+Entry address\(es\):\s+(?:IP address: ([0-9.]+)\s+)?\s+(?:IP address: ([0-9.]+)\s+)?\s+(?:IP address: ([0-9.]+)\s+)?\s+(?:IP address: ([0-9.]+)\s+)?\s+(?:IP address: ([0-9.]+)\s+)?', file)
print temp 
```

它只匹配具有多个 ip 地址的那些，而不匹配其他的

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:16:12.707

据我所知，只有 .NET 允许您遍历量化（重复）捕获组。考虑这个（有限的）替代方案：

```
Device ID: ([0-9A-Za-z-.&]+)\s+Entry address\(es\):\s+(?:IP address: ([0-9.]+)\s+)(?:IP address: ([0-9.]+)\s+)?(?:IP address: ([0-9.]+)\s+)?(?:IP address: ([0-9.]+)\s+)?
                                                                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ 
```

这将在、和中捕获最多 1 个 IP 地址`$2`和最多 3 个IP 地址。（当然，我习惯性地使用该符号。）您可以添加任意数量的内容。如果您需要所有 IP 地址都出现在一个组中，*即*，那么您唯一的选择是在其中包含文本：`$3``$4``$5``$` *`$2`*

 *```
Device ID: ([0-9A-Za-z-.&]+)\s+Entry address\(es\):\s+((?:IP address: (?:[0-9.]+)\s+)+)
                                                      ^                ^^             ^ 
```*

# sql - Oracle SQL - 用获得的学分满足学生的毕业要求。（循环或创意连接？）

> ID：15908090
> 
> 赞同：0
> 
> 时间：2013-04-09T17:04:26.400
> 
> 标签：sql, oracle, loops, join

我对如何构造这个查询有点困惑。我有两张表，一张有毕业要求（GradReq），一张有获得的学生学分（StoredGrades）。GradReq 列出了每个“学分桶”以及可以填充它的相关课程编号。StoredGrades 列出了课程编号以及学生是否通过了课程。理论例子如下。

```
GradReq:
CreditBucket   CourseNumber
Algebra I        100000
Algebra I        100001
Algebra II       100001
Algebra II       100002

StoredGrades:
CourseNumber   Passed   StudentID
100001            1       30003 
```

我遇到的问题是，通过标准（左）加入，代数 I 和代数 II 学分桶将为学生 30003 填充，而实际上该学分只能使用一次。有任何想法吗？

我认为最好遍历每个信用桶并一次评估它们，但我不确定这会是什么样子。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:10:24.693

你目前的数据模型只能回答“student1满足哪些要求”这样的资格问题。当你做outer join时，你得到2个结果，这是正确的。Student 1已经完成了一门课程，满足他的grad要求代数 1 或代数 2。

您尝试实施的实际信用关联通常在不同的实体/表中完成。就像是...

```
GradReqUsed (or GradReqConsumtion, perhaps?)

CreditBucket  CourseNumber StudentID

Algebra I     100001       30003 
```

这基本上意味着学生将有 100001 计入 Algebra1 存储桶。

# jquery - 如何使用 jquery 仅显示隐藏的文本片段

> ID：15908092
> 
> 赞同：0
> 
> 时间：2013-04-09T17:04:36.543
> 
> 标签：jquery, show-hide

我有一个带有日历和一堆“天气历史中的今天”信息的 html 文件。我想隐藏所有的天气历史，直到有人点击日历上的某一天，然后我只想显示那一天的历史。

每日天气信息是隐藏的，但当它是日历日时，它不会显示特定的日子。我假设我做错了。更好的解决方法将不胜感激。

日历日链接：

```
<td align="right"><a id="c0408" href="#"> 8</a></td> 
```

天气历史：

```
<div id="allhistory">
  <div id="hc0408" style="display:none">
    <ul>
      <li class="dateheader">April 8, 2007</li>
      <li>The Savannah Airport drops to 28 degrees, its lowest April 
          temperature.</li>
      <li class="dateheader">April 8, 2007</li>
      <li>Summerville has their coldest April temperature, when the mercury 
          falls to 27 degrees.</li>
    </ul>
  </div>

  <div id="hc0409" style="display:none">
    <ul>
      <li class="dateheader">April 9, 2011</li>
      <li>Severe thunderstorms impact Berkeley County in South Carolina, 
          with hail as large as tennis balls (2.5 inches) and winds as 
          high as 64 mph.</li>
    </ul> <!-- 0409 -->
  </div>
</div> <!-- all history div --> 
```

jQuery代码：

```
<script>
  $(document).ready(function() { 
    $('#calendar a').click(function() {
      var dateid = $(this).attr('id');
      var selection = "div#h"+dateid;
      $("selection").show();
     })
  });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:06:45.587

连接 id 并显示相应的 jquery 对象

试试这个

```
$('#calendar a').click(function(e) {
   e.preventDefault();  //to prevent the default behaviour of a
  var dateid = $(this).attr('id');
  var selection = $("#h"+dateid); //assign selection as jquery object
  selection.show(); //show it
  ..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:07:37.627

`$("selection").show();`

这是你的问题。您正在提供字符串“selection”作为选择器。您想提供变量；像这样：

`$(selection).show();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:24:03.747

试试这个：

```
$(document).ready(function() { 
    $('#calendar a').click(function(e) {
      e.preventDefault();
      $('#allhistory [id^="h"]').hide();
      $('#h'+$(this).attr('id')).css('display','inline-block');
     })
}); 
```

# firefox - 即使在开发中也有必要将 firefox 扩展文件打包到 xpi 中吗？

> ID：15908094
> 
> 赞同：1
> 
> 时间：2013-04-09T17:04:38.980
> 
> 标签：firefox, firefox-addon

我正在为 Mozilla Firefox 开发一个扩展。有没有什么方法可以让我在不将文件打包到 xpi 的情况下进行开发（比如在 Chrome 中）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T20:11:59.037

是的。为此，首先关闭 Firefox。

然后在您的配置文件扩展目录中创建一个与您的扩展具有相同 ID 的文件。

在该文件中，您应该将完全限定的路径放置到您正在开发扩展的位置。特别是与 install.rdf 相同的目录。

当 Firefox 重新启动时，它应该会询问您是否要安装扩展。完成此操作后，扩展程序将从本地副本运行。进行更改后，您只需关闭并重新启动浏览器即可。

有关更多信息，请查看此页面：

[https://developer.mozilla.org/en-US/docs/Setting_up_extension_development_environment](https://developer.mozilla.org/en-US/docs/Setting_up_extension_development_environment)

我还建议您安装 Developer Assistant - [https://addons.mozilla.org/en-US/firefox/addon/extension-developer/](https://addons.mozilla.org/en-US/firefox/addon/extension-developer/) - 它会设置一些首选项，以便更轻松地创建 Firefox 扩展。

# css - 相似的代码，不同的效果

> ID：15908096
> 
> 赞同：1
> 
> 时间：2013-04-09T17:04:45.670
> 
> 标签：css

我是设计师的初学者，我必须开发一个小型网站，在那里我设计了一个 ui，但我在 css 方面遇到了问题。

这是我写的风格

```
background-image: url("../images/border_bottom_left.png"), url("../images/border_bottom_right.png"), url("../images/border_top_left.png"), url("../images/border_top_right.png");
background-position: bottom left, bottom right, top left, top right;
background-color:grey;
background-repeat: no-repeat; 
```

它将四个图像插入四个角，并用灰色背景填充所有其他部分

现在，我想插入一个图像而不是灰色，所以我替换`background-color`为`background-image: url("../images/bg_content.png")`但它对我没有帮助。我尝试`bg_content.png`在第一个中使用`background-image`并将其对应位置写入`center`，它没有工作？

你们中的任何人都可以帮助我吗！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:15:16.043

只需将图像添加到您的`background-image`和您的`background-position`，然后扩展您的`background-repeat`：

```
background-image: url("../images/border_bottom_left.png"), url("../images/border_bottom_right.png"), url("../images/border_top_left.png"), url("../images/border_top_right.png"), url("../images/bg_content.png");
background-position: bottom left, bottom right, top left, top right, top left;
background-color:grey;
background-repeat: no-repeat, no-repeat, no-repeat, no-repeat, repeat; 
```

[http://jsfiddle.net/5k8eg/2/](http://jsfiddle.net/5k8eg/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:07:07.040

`background-color`不能指定网址，只能指定颜色。您将需要使用多个`div`（或您正在使用的任何元素）来做您想做的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T17:11:52.497

这可能是因为您的背景图像不会重复（角落图像也是如此），因此它会被其中一张角落图片覆盖。尝试将第一个背景图像设置为重复：

```
background-repeat: repeat, no-repeat, no-repeat, no-repeat, no-repeat; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T17:08:02.147

只要我知道`background-color`不接受图像文件。试试`background-color:#4B4C4D`吧。要选择 HTML 颜色，您可以使用[此在线颜色选择器](http://www.colorpicker.com/)。

**编辑**：将 a`div`放在另一个内部`div`并赋予这些`div`不同的`background-image`值。一个 div 只能有一个背景图像。

但是在 CSS3 中，您可以拥有多个背景图像。为此目的访问[此链接](http://www.css3.info/preview/multiple-backgrounds/)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T17:11:17.153

你确定你为第五张图片的 X 和 Y 指定了中心吗？

```
background-position: bottom left, bottom right, top left, top right, center center; 
```

[http://jsfiddle.net/YhZ8e/](http://jsfiddle.net/YhZ8e/)

# ado.net - 使用 ADO.NET 数据服务工具包时将 OData 属性标记为 Nullable

> ID：15908097
> 
> 赞同：1
> 
> 时间：2013-04-09T17:04:49.417
> 
> 标签：ado.net, wcf-data-services

我们正在使用[ADO.NET 数据服务提供程序工具包](http://www.odata.org/ecosystem)来实现在 SharePoint 2010 中运行的自定义 OData 服务端点（使用 .NET 3.5）。

在为服务端点生成元数据时，默认情况下**Edm.DateTime 似乎被标记为 Nullable="false" ：**

```
<Property Name="DATE" Type="Edm.DateTime" Nullable="false" /> 
```

有没有办法更改可以为 NULL 的 DateTime 属性的此设置？

**Edm.Boolean**以及一些数字类型似乎也是如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:18:30.380

如果属性的类型是 Nullable，那么 OData 属性也是如此。

在这种情况下，而不是 DateTime，属性需要是 DateTime？（可以为空）。

# c# - 由于继承是不可能的，有没有办法在静态类中重用代码？

> ID：15908101
> 
> 赞同：1
> 
> 时间：2013-04-09T17:04:53.510
> 
> 标签：c#, class, static, overriding, reusability

有时我的静态类型实际上应该是静态的，但在极少数情况下，我需要重用它们的一些代码（几个方法）。我可以创建一个接口或另一个基本抽象类并解决几个静态类的问题，这些静态类都确实需要相同的方法和成员被覆盖但**稍作修改**。但它仍然需要我复制粘贴大部分代码，我将无法再将它们标记为静态。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T17:07:16.000

你可以通过构建单例类来解决这个问题。然后，它们可以利用基`abstract`类以及任何必要的继承层次结构，但它们仍然可以具有仅在必要时利用私有实例的静态方法。

查看 Jon Skeet[在 Singleton 上的博客，](http://csharpindepth.com/Articles/General/Singleton.aspx)以便正确构建自己的博客。

# tfs - TFS - 专业组无权访问工作项

> ID：15908105
> 
> 赞同：1
> 
> 时间：2013-04-09T17:05:10.980
> 
> 标签：tfs, group-membership

我创建了一个 tfs 组，该组将处理位于集合中的特定项目。现在我们正在使用工作项来跟踪错误等，但该组无法通过 Team Web Access 门户访问这些工作项。我不希望这个小组可以访问集合中的所有项目，而只是他们正在处理的项目。但我需要他们能够访问出现的工作项目。

目前，当他们访问团队 Web 访问门户时，他们会收到指示此团队项目集合中没有可访问的团队项目的消息。

如果他们已经可以访问集合中的代码，为什么他们看不到工作项，我该如何更改它，但仍然限制他们看到的内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T15:10:47.067

好的，一段时间后找到了我想要的东西。为了社区的利益，这里是完成隐藏安全设置的地方。

对于新组，我需要进入团队/团队项目设置/区域和迭代！！！！

是的，这个愚蠢的地方只有一个安全按钮。如果您进入那里，单击对话框底部的安全按钮，您将看到所有与 WORK ITEM 相关的权限。

*   编辑此节点中的工作项；
*   管理测试计划；
*   查看此节点；
*   查看此节点中的工作项。

我需要检查所有这些以允许。

再一次，与通过 TEAM 项目设置的所有其他安全设置相比，放置这些设置似乎是一个愚蠢的地方。我希望他们有充分的理由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:19:03.737

他们需要将`View collection-level details`权限添加到他们的组（在集合级别）。默认情况下，该`Project Collection Valid Users`组具有这些权限，因此您只需将您的组添加为有效用户组的成员即可。

# c# - 图标存在于系统托盘中？

> ID：15908108
> 
> 赞同：7
> 
> 时间：2013-04-09T17:05:17.330
> 
> 标签：c#, vb.net, visual-studio, system-tray, systray

我想检查系统托盘中是否存在图标；如，如果“X”应用程序已在系统托盘区域显示其系统托盘图标。

我在 Google 上搜索了有关如何执行此操作的信息，但没有找到任何信息。

> 更新 ：

这是我在 VB.NET 中尝试翻译 Robert 评论给出的 url 的 C# 示例，但我不知道如何继续。

```
Imports System.Runtime.InteropServices

Public Class Form1

    Public Declare Function FindWindow Lib "user32.dll" Alias "FindWindowA" (ByVal lpClassName As String, ByVal lpWindowName As String) As Long
    Public Declare Function FindWindowEx Lib "user32.dll" Alias "FindWindowExA" (ByVal hWndParent As IntPtr, ByVal hWndChildAfter As IntPtr, ByVal lpClassName As String, ByVal lpWindowName As String) As IntPtr

    Public Shared Function WindowHandle(sTitle As String) As Long
        Return FindWindow(vbNullString, sTitle)
    End Function

    Private Shared Function GetSystemTrayHandle() As IntPtr
        Dim hWndTray As IntPtr = FindWindow("Shell_TrayWnd", Nothing)
        If hWndTray <> IntPtr.Zero Then
            hWndTray = FindWindowEx(hWndTray, IntPtr.Zero, "TrayNotifyWnd", Nothing)
            If hWndTray <> IntPtr.Zero Then
                hWndTray = FindWindowEx(hWndTray, IntPtr.Zero, "SysPager", Nothing)
                If hWndTray <> IntPtr.Zero Then
                    hWndTray = FindWindowEx(hWndTray, IntPtr.Zero, "ToolbarWindow32", Nothing)
                    Return hWndTray
                End If
            End If
        End If

        Return IntPtr.Zero
    End Function

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        MsgBox(WindowHandle("Steam")) ' 6687230
        MsgBox(GetSystemTrayHandle()) ' 62789
    End Sub

End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:06:05.233

您应该阅读[这篇](http://www.codeproject.com/Articles/10497/A-tool-to-order-the-window-buttons-in-your-taskbar)代码项目文章。

# javascript - 隐藏在 IE9 中的基于 JS 的 webapp 底图

> ID：15908114
> 
> 赞同：0
> 
> 时间：2013-04-09T17:05:34.257
> 
> 标签：javascript, internet-explorer, jquery-mobile, parent-child, arcgis-server

我认为这个问题与/或原始Javascript和JQuery有关..但我认为它也与ArcGIS Javascript API地图类有关..我的问题是IE9问题；该应用程序在 Chrome 和 FF 中运行良好。（我也在 E​​SRIs JS 论坛上问过这个问题，但到目前为止没有答案......）

我有一个网络应用程序，其中地图在地图单击时在其自己的 div 中打开（不使用 window.open 或 iframes）。第一次加载应用程序后，底图按预期打开（起初地图只是没有其他图层的底图）......但是当我关闭地图div，然后再次打开它时，底图出现了大约1第二，然后消失......但背景颜色和缩放按钮仍然存在......

地图是这样以 HTML 格式设置的：

```
 <div class="map-content">
        <div class="map-close" style="display: none;"><a href="#">Close</a>      </div><!--buttons--->
        <div class="map-fullscreen" style="display: none;"><a href="#">Fullscreen</a></div>
        <div style='width:100%;  height:100%'><object type="text/html" name ="mapPage" style='width:100%;         
                       height:100%' data='mapPage.html'>

            </object></div>
    </div> 
```

在 init JS 中，底图被添加为 TiledMapServiceLayer。

..没有更多的代码！正如我所说，所有这些都在 FF 和 Chrome 中正常工作.....

我已经尝试过我遇到的 HTML 中的每个 IE 标签或条件，但没有一个能解决这个问题......我有 meta http-equiv="X-UA-Compatible" content="IE=7,IE=9 " /> 在标题和脚本中 type="text/javascript" src="JavaScript/modernizr-2.5.3.js">

也在里面......

我的主索引页面中也有这些标签：

```
<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-  ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><html class="no-js"><![endif]--> 
```

（*ps 我也在使用 Jquery Mobile ......）

这是打开地图的按钮的 JS（主要是很多调整大小的东西：）

```
 mapTrigger.click(function(){

    $FirstConstrainerWidth = $('.firstConstrainer').outerWidth();

    console.log("locsizeConstWidth: " + $SizeConstrainerWidth + "  locfirstConstrainer: " + $FirstConstrainerWidth);

    if  ($SizeConstrainerWidth > $FirstConstrainerWidth)
    {
        $SizeConstrainerWidth=$FirstConstrainerWidth;
    }
    // scroll to top to make sure header is visible
    $('html, body').animate({scrollTop:0}, 'fast');
    //animate the containers height to the height of the slideshow

        mapContainer.animate({

            "height" : $('#sizeConstrainer').outerHeight() - $('#bg').outerHeight() - $('#footer').outerHeight(), // TODO:adjust the height of the map on window resize
            "width" : $SizeConstrainerWidth,
            "top" : $('#bg').outerHeight(),
            "left" : $SizeConstrainerLeft,
            "bottom" : $('#footer').outerHeight()
        }, 300, function() {
            // When the animation is complete
            // hide the loading indicator
            // Fade in the controls

            $(".map-close, .map-fullscreen").fadeIn("slow");

        });

}); 
```

我通过点击关闭地图的功能与此比较相似......

我还将这段代码添加到地图页面 html 中，我认为这应该有助于 IE 版本正确解释 JQuery Mobile：

```
<script type="text/javascript">
//run this script after jQuery loads, but before jQuery Mobile loads

//customize jQuery Mobile to let IE7+ in (Mobile IE)
$(document).bind("mobileinit", function() {
    $.extend($.mobile, {
        //extend gradeA qualifier to include IE7+
        gradeA : function() {
            //IE version check by James Padolsey, modified by jdalton - from http://gist.github.com/527683
            var ie = ( function() {
                    var v = 3, div = document.createElement('div'), a = div.all || [];
                    while (div.innerHTML = '<!--[if gt IE ' + (++v) + ']><br><![endif]-->', a[0]);
                    return v > 4 ? v : !v;
                }());
            //must either support media queries or be IE7+
            return $.support.mediaquery || (ie && ie >= 7);
        }
    });
});

    </script> 
```

...到目前为止没有任何效果..ap 在 FF 和 Chrome 中再次按预期工作，但是 IE 中的这个闪烁的地图让我发疯（还有一些其他较小的 css 问题，但这是最大的问题）。 ..当然，当使用早期版本的 IE 查看时，我的应用程序看起来和行为更加怪异。

帮助？谢谢！// 杰森

# iphone - 如何在 ios6 中定位 UILabel？

> ID：15908119
> 
> 赞同：0
> 
> 时间：2013-04-09T17:05:59.160
> 
> 标签：iphone, ios

我认为 2 个标签，较大的一个和较小的一个正好位于屏幕的中心。更改坐标似乎对它们的放置位置没有影响。为什么？

理想情况下，我希望它们具有相同的大小，而不是重叠，并且一个在另一个之下，以便它们几乎覆盖整个屏幕。

我认为 labelframe 使用格式 - 起始坐标，大小。我的出身在哪里？是在屏幕的左上角吗？我可以在 xcode 中翻译它吗？

```
#import "ViewController.h"

@interface ViewController ()
@property (nonatomic, strong) UILabel *label;
@property (nonatomic, strong) UILabel *label1;

@end

@implementation ViewController

- (void)viewDidLoad{
    [super viewDidLoad];
    self.view.backgroundColor = [UIColor whiteColor];
    CGRect labelFrame = CGRectMake(-200.0f,0.0f, 200.0f, 200.0f);
    self.label = [[UILabel alloc] initWithFrame:labelFrame];
    //self.label.adjustsFontSizeToFitWidth = YES;
    self.label.text = @"One two three four five six seven eight nine.";
    self.label.font = [UIFont boldSystemFontOfSize:28.0f];
    self.label.numberOfLines  = 5;
    self.label.center = self.view.center;
    [self.view addSubview:self.label];

    CGRect labelFrame1 = CGRectMake(600.0f,600.0f, 100.0f, 100.0f);
    self.label1 = [[UILabel alloc] initWithFrame:labelFrame1];
    self.label1.text = @"One 1 two three four five six seven eight nine.";
    self.label1.font = [UIFont boldSystemFontOfSize:18.0f];
    self.label1.numberOfLines  = 0;
    self.label1.center = self.view.center;
    [self.view addSubview:self.label1];

}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:13:53.433

您正在覆盖您调用时设置的来源

```
self.label.center = self.view.center 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:15:57.283

~~原点 0,0 是屏幕~~superview的左上角。如果您希望标签位于屏幕中央，一个在另一个之上，您可以执行以下操作：

```
self.label = [[UILabel alloc] init];
// setup label text, font..
[self.label sizeToFit]; // automatically set the appropriate size
self.label.center = self.view.center;
[self.view addSubview:self.label];

self.label1 = [[UILabel alloc] init];
// setup label text, font..
[self.label sizeToFit]; // automatically set the appropriate size
self.label1.center = self.view.center; // set at center of screen
// just overwrite origin.y to set it below the previous label
self.label1.frame = (CGRect) { self.label1.frame.origin.x, self.label.frame.origin.x + self.label.frame.size.height, self.label1.frame.size };
[self.view addSubview:self.label1]; 
```

更新：根据您的评论，两行一列更容易。只需将框架设置为全宽和半高：

```
self.label = [[UILabel alloc] initWithFrame:CGrectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height / 2];
self.label1 = [[UILabel alloc] initWithFrame:CGRectMake(0, self.view.frame.size.height / 2, self.view.frame.size.width, self.view.frame.size.height / 2]; 
```

# php - 无法保存集合字段数据

> ID：15908121
> 
> 赞同：1
> 
> 时间：2013-04-09T17:05:59.417
> 
> 标签：php, symfony, doctrine-orm

我无法收集 [Purchase Entity] 数据

我的 PO 实体 --- 创建控制器

```
public function createAction(Request $request)
{
    $entity  = new PO();
    $form = $this->createForm(new POType(), $entity);
    $form->bind($request);

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getManager();
        $em->persist($entity);
        $em->flush();

        return $this->redirect($this->generateUrl('po_show', array('id' => $entity->getId())));
    }

    return array(
        'entity' => $entity,
        'form'   => $form->createView(),
    );
} 
```

我的表单生成器 - PO

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->add('orderno','text',array('attr'=>array
            ('placeholder'=>"Order No",'class'=>'input-medium','pattern'=>'[a-zA-Z0-9]+')))
        ->add('invoiceno','text',array('attr'=>array
            ('placeholder'=>"Invoice No",'class'=>'input-medium','pattern'=>'[a-zA-Z0-9]+')))
        ->add('buyervat','text',array('attr'=>array
            ('placeholder'=>"Buyer VAT No",'class'=>'input-medium')))
        ->add('sellervat','text',array('attr'=>array
            ('placeholder'=>"Seller VAT No",'class'=>'input-medium')))
        ->add('vatamount','number',array('attr'=>array
            ('placeholder'=>"Vat Amount",'class'=>'input-medium','pattern'=>'[0-9]+')))
        ->add('orderdate','date')
        ->add('payment','text',array('attr'=>array
            ('placeholder'=>"Payment Type:Ref No",'class'=>'input-medium',)))
        ->add('credit','number',array('attr'=>array
            ('placeholder'=>"Credit",'class'=>'input-medium',)))
        ->add('note','text',array('attr'=>array
            ('placeholder'=>"Note",'class'=>'input-medium',)))
        ->add('purchases','collection',array(
            'type'=>new PurchaseType(),
            'allow_add'=> true,
            'allow_delete'=>true,
            'by_reference' => false,))
    ;
} 
```

采购实体

```
<?php

namespace CJ\BusinessBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

/**
 * Purchase
 *
 * @ORM\Table()
 * @ORM\Entity
 */
class Purchase
{

/**
 * @ORM\ManyToOne(targetEntity="PO", inversedBy="purchases")
 * @ORM\JoinColumn(name="po_id", referencedColumnName="id")
 */
protected $po;

public function __construct()
{
    $this->setUpdatedAt(new \DateTime());
}

/**
 * Set po
 *
 * @param \CJ\BusinessBundle\Entity\PO $po
 * @return Purchase
 */
public function setPo(\CJ\BusinessBundle\Entity\PO $po = null)
{
    $this->po = $po;

    return $this;
}

/**
 * Get po
 *
 * @return \CJ\BusinessBundle\Entity\PO 
 */
public function getPo()
{
    return $this->po;
}
} 
```

我的采购订单实体

```
<?php

namespace CJ\BusinessBundle\Entity;

use Doctrine\ORM\Mapping as ORM;

use Doctrine\Common\Collections\ArrayCollection;

/**
 * PO
 *
 * @ORM\Table()
 * @ORM\Entity
 */

class PO
{
...

/**
 * @ORM\OneToMany(targetEntity="Purchase", mappedBy="po", cascade={"persist"})
 */
protected $purchases;

public function __construct()
{
    $this->purchases =  new ArrayCollection();
    $this->setUpdatedAt(new \DateTime());
}

/**
 * Add purchases
 *
 * @param \CJ\BusinessBundle\Entity\Purchase $purchases
 * @return PO
 */
public function addPurchase(\CJ\BusinessBundle\Entity\Purchase $purchases)
{
    $this->purchases[] = $purchases;

    return $this;
}

/**
 * Remove purchases
 *
 * @param \CJ\BusinessBundle\Entity\Purchase $purchases
 */
public function removePurchase(\CJ\BusinessBundle\Entity\Purchase $purchases)
{
    $this->purchases->removeElement($purchases);
}

/**
 * Get purchases
 *
 * @return \Doctrine\Common\Collections\Collection 
 */
public function getPurchases()
{
    return $this->purchases;
} 
```

我究竟做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T05:26:00.803

您必须手动将 PO 对象传递给 Purchase 对象。

编辑`addPurchase`方法如下：

```
public function addPurchase(\CJ\BusinessBundle\Entity\Purchase $purchases)
{
    $this->purchases[] = $purchases;
    $purchases->setPo($this);

    return $this;
} 
```

# c++ - LoadLibrary 导致访问冲突

> ID：15908122
> 
> 赞同：0
> 
> 时间：2013-04-09T17:05:59.383
> 
> 标签：c++, windows, directinput

我正在尝试创建一个代理 dinput8.dll 以允许在游戏中重新映射键盘，并拼凑了一些说明等以提出以下内容：

```
#include <windows.h>
#include <strsafe.h>
#pragma pack(1)

HINSTANCE hLThis = 0;
HINSTANCE hL = 0;
FARPROC p[5] = {0};

BOOL WINAPI DllMain(HINSTANCE hInst,DWORD reason,LPVOID) {
    if (reason == DLL_PROCESS_ATTACH) {
        hLThis = hInst;
        hL = LoadLibrary("originaldinput8.dll");
        if (!hL) return false;
        p[0] = GetProcAddress(hL,"DllCanUnloadNow");
        p[1] = GetProcAddress(hL,"DllGetClassObject");
        p[2] = GetProcAddress(hL,"DllRegisterServer");
        p[3] = GetProcAddress(hL,"DllUnregisterServer");
        p[4] = GetProcAddress(hL,"DirectInput8Create");
    } else if (reason == DLL_PROCESS_DETACH) {
        FreeLibrary(hL);
    }

    return 1;
}

extern "C" __declspec(naked) void __stdcall __E__0__()
    {
    __asm
        {
        jmp p[4];
        }
    }

// DllCanUnloadNow
extern "C" __declspec(naked) void __stdcall __E__1__()
    {
    __asm
        {
        jmp p[0];
        }
    }

// DllGetClassObject
extern "C" __declspec(naked) void __stdcall __E__2__()
    {
    __asm
        {
        jmp p[1];
        }
    }

// DllRegisterServer
extern "C" __declspec(naked) void __stdcall __E__3__()
    {
    __asm
        {
        jmp p[2];
        }
    }

// DllUnregisterServer
extern "C" __declspec(naked) void __stdcall __E__4__()
    {
    __asm
        {
        jmp p[3];
        }
    } 
```

它链接的模块定义文件如下：

```
EXPORTS
DirectInput8Create=__E__0__ @1
DllCanUnloadNow=__E__1__ @2
DllGetClassObject=__E__2__ @3
DllRegisterServer=__E__3__ @4
DllUnregisterServer=__E__4__ @5 
```

该项目构建良好并生成 DLL，然后我将其放在 originaldinput8.dll（C:\Windows\SysWOW64\dinput8.dll 的重命名版本）旁边并运行游戏。但它立即崩溃 - 调试器运行会在调用 LoadLibrary 时产生以下错误。

```
First-chance exception at 0x75ed75f8 in th06e.exe: 0xC0000005: Access violation reading location 0x00000250.

 *** An Access Violation occurred in "C:\Users\Username\Documents\Visual Studio 2010\Projects\dinput8\Debug\th06e.exe" :

The instruction at 00000000775A1221 tried to read from an invalid address, 0000000000000250

 *** enter .exr 000000000008E030 for the exception record
 ***  enter .cxr 000000000008DB40 for the context
 *** then kb to get the faulting stack

Unhandled exception at 0x75ed75f8 in th06e.exe: 0xC000041D: An unhandled exception was encountered during a user callback.
The program '[5704] th06e.exe: Native' has exited with code -1073740771 (0xc000041d). 
```

这以前是有效的（在我使用 64 位原始 DLL 而不是 32 位的问题之后）但不知何故它现在已经停止工作，我不确定问题是什么。

我认为查找 DLL 文件不是问题 - 删除 DLL 文件或使用错误的文件会导致 LoadLibrary 失败而不会导致崩溃，错误代码 193。

有任何想法吗？

# c# - c#实现IEqualityComparer 对于通用类 T

> ID：15908123
> 
> 赞同：0
> 
> 时间：2013-04-09T17:06:01.983
> 
> 标签：c#, generics, iequalitycomparer

有什么方法可以为泛型类实现 IEqualityComparer 吗？

我试过：

```
public class MyComparer : IEqualityComparer<MyGenericClass> 
```

这是错误的，因为 MyGenericClass 将 3 个参数作为泛型，所以下一个

```
public class MyComparer : IEqualityComparer<MyGenericClass<A, B, C>> 
```

这是错误的，因为我不知道类型 A、B、C。所以

```
public class MyComparer<MyGenericClass<A, B, C>> : IEqualityComparer<MyGenericClass<A, B, C>> 
```

是错的。有没有办法实现这一点？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T17:07:45.990

你很近

```
public class MyComparer<A, B, C> : IEqualityComparer<MyGenericClass<A, B, C>> 
```

旁注，请不要将事物命名为 A、B 和 C。这对任何人都没有帮助。标准命名约定是`T<SomethingDescriptive>`. 在 EF 的情况下，它可能是`TEntity`，在 MVC 或 MVVM 中，它可能是`TModel`或`TViewModel`。

# actionscript-3 - 套接字服务器 - 从客户端发送消息到客户端

> ID：15908124
> 
> 赞同：0
> 
> 时间：2013-04-09T17:06:05.000
> 
> 标签：actionscript-3, sockets, air, client

我有一个使用 Adob​​e AIR 设置的套接字服务器，我试图允许两个客户端使用服务器在彼此之间发送消息（这是一个基于 Android 的项目，因此服务器必须充当 PC 上的中间人）。出于某种原因，我发送的消息只被发送回它来自的同一个客户端，而不是发送给另一个客户端。我已经建立了一个系统来识别每条消息的来源，以及如何在另一端处理它。

变量'connectionNum' int 基本上代表了客户端是数字0还是1，并且发送到服务器和从服务器发送的数据前面有0或1。

理想情况下，我想要一种将数据一次定向到一个特定客户端的方法，而不是尝试在每条消息的开头使用 int 将其发送到两者。

目前，只有第二个客户端连接的消息实际上是通过服务器发送的，第一个发送一个空白消息，不知道为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T18:42:46.720

> 目前，只有第二个客户端连接的消息实际上是通过服务器发送的，第一个发送一个空白消息，不知道为什么。

这是因为您在服务器上只有一个`clientSocket`对象，并且当其他人连接时您正在覆盖它，所以当第二个客户端连接时，您将丢失第一个客户端套接字。当您`sendData`在服务器上调用时，它总是使用`clientSocket`最后连接的人。

要解决此问题，您需要`clientSocket`服务器上的一组对象。然后，如果要广播消息，您可以选择正确的发送消息或将消息发送给所有客户端。

# windows - 在自动热键中取消现有的键重映射

> ID：15908126
> 
> 赞同：0
> 
> 时间：2013-04-09T17:06:11.730
> 
> 标签：windows, autohotkey, remap

我有一个 AutoHotKey 脚本，它询问我是否要将我的 Win 键重新映射到 Ctrl 或取消它们的重新映射，从而再次使它们成为 Win 键。

但是我找不到取消重映射的方法。如果我使用该命令`LWin::Lwin`，我会收到错误消息，即存在“重复键”。

我是 AutoHotKey 的新手，但我先搜索过，所以请不要咬我的头，这是一个愚蠢的问题。（这是一台装有 Windows7-64 的联想笔记本电脑）。

这是脚本：

```
MsgBox, 4, , Remap CTRL for Desktop Keyboard?
IfMsgBox, Yes
   LWin::LCtrl
   RWin::RCtrl
   return
; Otherwise, the user picked No
;   LWin::LWin
;   RWin::RWin
;   return 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:28:50.910

各种方式。

创建一个热键来关闭 ahk，例如`^!x::ExitApp`= [Ctrl]+[Alt]+[x]

创建一个热键以禁用/启用所有热键，例如`f12::suspend`

创建仅适用于特定应用程序的热键。

以下是所有建议的组合。一般情况下：`LWin::LCtrl`和`RWin::RCtrl`都是活动的，除非你按了F12。您可以在 AHK_L 中设置可在 中使用的变量，您可以在`#If (Var = 1)`其中定义仅在该变量设置为 1 (true) 时才起作用的热键。

```
SetTitleMatchMode, 2 ; Allow the use of a portion of the wintitle
F12::
Suspend
If A_IsSuspended
    TrayTip, HotKeys, Off, 3, 0
Else
    TrayTip, HotKeys, On, 3, 0
Return

^!x::ExitApp
LWin::LCtrl
RWin::RCtrl
F1::MsgBox, Normal Mode

#IfWinActive, Window title
  F1::MsgBox, Window X is active
  F2::MsgBox, You pressed F2 inside Window x
#IfWinActive

Toggle := False
F10::Toggle := !Toggle ; Turns Mouse button ON|Off
#if Toggle ; ONLY worls in AHK_L
     LButton::Return ; Disables Mouse button
#if 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-02T02:12:51.417

这是您可以从命令行驱动的版本：

```
; Allow the script to be reloaded multiple times
#SingleInstance force

; Check the command line for input
NumberOfParameters = %0%

; If any command line param was passed then just unload the mappings
If ( NumberOfParameters > 0 )
{
  MsgBox Command line parameter was passed, unloading...
  ExitApp
}
Else
{
  ; Let's ask the user what they want to do
  MsgBox, 4, , Remap CTRL for Desktop Keyboard?

  IfMsgBox, Yes
  {
    ; If yes, then remap
    MsgBox Keys have been mapped.
  }
  Else
  {
    ; If no, then unload
    MsgBox Unloading mapping.
    ExitApp
  }
}

; Keys will be mapped so long as the script remains resident
LWin::LCtrl
RWin::RCtrl 
```

# python - 如何使用Python在Windows下删除文件名中的无效字符

> ID：15908133
> 
> 赞同：1
> 
> 时间：2013-04-09T17:06:47.000
> 
> 标签：python, python-2.7, character-encoding

我需要做很多关于powerpoint文件的工作，我使用win32com来处理工作，我是台湾人，我的操作系统是Windows 7-64bit繁体版本，文件名中有一些汉字，但有些字符没有允许作为 Windows 中的文件名。

```
like '\xe8\xaa\xb2\x0b\xe6\xb0\xb4' 
```

上面的行在 Windows 中包含无效字符，我怎样才能删除无效字符？实际上，\xe8\xaa\xb2\x0b\xe6\xb0\xb4 是一个字符串，如果我打印出来，它会在我的控制台中显示奇怪的符号。但是我不知道哪个字符是奇怪的符号。

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:13:59.053

试试这个：

```
dosnames=['CON', 'PRN', 'AUX', 'NUL', 'COM1', 'COM2', 'COM3', 'COM4', 'COM5', 'COM6', 'COM7', 'COM8', 'COM9', 'LPT1', 'LPT2', 'LPT3', 'LPT4', 'LPT5', 'LPT6', 'LPT7', 'LPT8', 'LPT9']
final=''
string='th\xe8is i\xaas \xb2a te><s\x0b\xe6t\xb0.\xb4'
for char in string:
  if not (char in '<>:"/\|?*'):
    if ord(char)>31:
      final+=char
if final in dosnames:
  #oh dear...
  raise SystemError('final string is a DOS name!')
elif final.replace('.', '')=='':
  raise SystemError('final string is all periods!') 
```

这将检查 dos 名称和不允许的 ascii 字符。然后，`print final`给我`'this is a test.'`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:15:07.133

它失败是因为`\x0b`字节代表一个垂直选项卡，它不允许成为 Windows 中文件名的一部分。

在 Windows 下，您可以使用任何 unicode 字符作为文件名的一部分，但以下情况除外：

*   < > : " / \ | ? *
*   整数表示为 0-31（小于 ASCII 空格）的字符
*   目标文件系统不允许的任何其他字符（例如，尾随句点或空格）
*   任何 DOS 名称：CON、PRN、AUX、NUL、COM1、COM2、COM3、COM4、COM5、COM6、COM7、COM8、COM9、LPT1、LPT2、LPT3、LPT4、LPT5、LPT6、LPT7、LPT8、LPT9（并避免 AUX.txt 等）
*   文件名是所有句点

# forms - form_tag 不起作用

> ID：15908136
> 
> 赞同：0
> 
> 时间：2013-04-09T17:06:50.903
> 
> 标签：forms, ruby-on-rails-3.2

我对rails有点陌生，我有以下代码：

```
 <% form_tag "/producers/#{@user.id}", method: :get do %>
    <p>
      <%= text_field_tag :search, params[:search] %>
      <%= submit_tag "Search", name: nil %>
    </p>
  <% end %> 
```

它什么也没做。将其替换为

```
 <form action="/producers/<%= @user.id %>" method="get">
    <p>
      <%= text_field_tag :search, params[:search] %>
      <%= submit_tag "Search", name: nil %>
    </p>
  </form> 
```

一切都很好。我知道我应该做 producer_path(@user) 但我试图找出问题所在。

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T01:06:56.507

你有线

`<% form_tag %>`

**这不会在页面上打印任何内容**

`<%= %>`

是当你想打印东西时的 ERB 标签

```
<%= 'hello' %> 
```

打印你好

```
<% 'hello' %> 
```

只是评估它

# java - 24/32 位 WAV 文件的波形

> ID：15908138
> 
> 赞同：0
> 
> 时间：2013-04-09T17:06:52.457
> 
> 标签：java, wav, 32-bit, waveform, 24-bit

我正在使用 Java 中的 WAV 文件并创建了一个波形，但它只能显示来自 16 位文件的波形。我为样本帧创建一个循环，为通道创建另一个循环，允许为每个通道创建波形。

```
for (int indexNumSampleFrames = 0; indexNumSampleFrames < intNumSampleFrames; indexNumSampleFrames++) {
    for (int indexNumChannels = 0; indexNumChannels < intNumChannels; indexNumChannels++) {

        long lgnAmplitude = 0;

        lgnAmplitude = (short) ( arrayData[intPointer] & 0xff) | 
                   (short) ((arrayData[intPointer + 1] & 0xff) << 8);

        intPointer += intBytesPerSample;

        matrixAmplitudes[indexNumChannels][intSampleIndex] = lgnAmplitude;
    }

    intSampleIndex++;
} 
```

我正在努力创建 24 位和 32 位的波形......我试图找到任何解决方案但我找不到，我还尝试了以下代码但没有成功。

```
lgnAmplitude = (long) ( arrayData[intPointer] & 0xff) | 
                               (long) ((arrayData[intPointer + 1] & 0xff) << 8) |
                               (long) ((arrayData[intPointer + 2] & 0xff) << 16); 
```

提前致谢！

# c - C - malloc 或 fgets，我不知道什么不起作用

> ID：15908144
> 
> 赞同：0
> 
> 时间：2013-04-09T17:07:22.987
> 
> 标签：c

这是我的问题：我有一个二维字符矩阵，我用一个函数进行了 malloc。之后，我想从文件中获取地图，但我有一个分段错误，我不知道为什么......这是一个代码示例：

```
// struct where I put the map and others informations from the  
typedef struct problem_t
{
    char *nom;
    Coordonnees arrivee, depart;
    int nb_ligne, nb_col;
    char **     
} Problem;

// Function wich malloc the map
int mallocCarte( char *** carte, int nbLigne, int nbCol )
{
    *carte = malloc( nbLigne * sizeof( char* ) );

    if ( *carte == NULL )
    {
        return false;
    }

    int i;
    for ( i = 0; i < nbLigne ; ++i )
    {

        (*carte) [i] = malloc( nbCol * sizeof( char ) );
        if ( (*carte) [i] == NULL )
        {
            return false;
        }
    }

    return true;

} // mallocCarte  ()

// Code sample, I've already got the others informations, now, I'd like to get the map
// On commence par reserver l'espace memoire reserve à la carte.
int res = mallocCarte( &problem->carte, problem->nb_ligne, problem->nb_col );

// Si l'allocation s'est mal passée, on renvoie un message
if ( res == false )
{
    exc.num_Exc = MALLOC_ERROR;
    exc.msg_Err = "Erreur lors de l'allocation mémoire de la carte";
    return exc;
}

printf( "Recuperation de la carte 2 ...%d %d\n", problem->nb_ligne,
        problem->nb_col );
int nbLi = 0;
int nbCol = 0;
while ( fgets( fromFile, 1, file ) != NULL && nbLi < problem->nb_ligne )
{
    if ( fromFile [0] == '\n' )
    {
        nbCol = 0;
        ++nbLi;
        continue;
    }

    if ( nbCol == problem->nb_col )
    {
        printf( "malformed input file!\n" );
        exit( -1 );
    }

    ( problem->carte ) [nbLi] [nbCol++] = fromFile [0];
} 
```

已经很多天了，我真的不知道该怎么办......如果有人可以帮助我，我会非常感激！

谢谢

（这是我获取信息的源文件。首先是问题名称，然后是一些坐标，最后是地图大小。文件末尾是地图 [https://dl.dropbox.com/u/56951442/地图.txt](https://dl.dropbox.com/u/56951442/map.txt) )

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:12:50.873

当您增加`nbLi`时`main`，您需要重置`nbCol`为零。您允许列继续无限增加并超过数组的大小。

此外，[您不应该`malloc`在 C 中强制转换](https://stackoverflow.com/questions/1565496/specifically-whats-dangerous-about-casting-the-result-of-malloc)。

此外，您应该将 &problem->carte 传递给您的分配函数...

```
// Function wich malloc the map
int mallocCarte( char *** carte, int nbLigne, int nbCol )
{
    *carte = malloc( nbLigne * sizeof( char* ) );
...
    (*carte)[i] = malloc( nbCol * sizeof( char ) );
...
}

main()
{
   ...
   int res = mallocCarte( &problem->carte, problem->nb_ligne, problem->nb_col );
   ...
} 
```

您可能还应该添加一个测试，以确保如果您的输入文件格式不正确，您不会离开列的末尾......

```
 if ( isspace( fromFile [0] ) )
   {
       nbCol = 0;
       ++nbLi;
       continue;
   }

   if( nbCol == problem->nb_col )
   {
       printf( "malformed input file!\n" );
       exit( -1 );
   } 
```

你确定你的意思是使用`fgets( fromFile, 1, file )`？下面的描述意味着**在文件结束之前总是**`fgets()`返回一个空字符串，并且一直是until 。你应该使用**`fromFile[0]``'\0'``EOF``fgets( fromFile, 2, file )`**

 **> fgets() 从流中最多读入**一个小于 size 的字符**，并将它们存储到 s 指向的缓冲区中。在 EOF 或换行符后停止读取。如果读取了换行符，则将其存储到缓冲区中。'\0' 存储在缓冲区中的最后一个字符之后。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T17:40:44.110

问题是结构问题_t 的对象。它不是指针，您应该访问结构变量，例如

```
problem.carte,
problem.nb_ligne
problem.nb_col 
```

* * *

我在我的系统上尝试了你的代码。使用给定的 map.txt，您的代码对我来说运行良好。我刚刚声明了 char fromFile[2]; While(fgets(fromFile,2,file) != NULL) {//打印文件}。它的打印文件适合我。**

# javascript - CKEditor 删除“i”标签

> ID：15908145
> 
> 赞同：1
> 
> 时间：2013-04-09T17:07:33.143
> 
> 标签：javascript, ckeditor, codemirror

我有[HTML](http://en.wikipedia.org/wiki/HTML)内容，它使用`i`带有 font-awesome 的图标的标签。

```
<div class="service-icon"><i class="icon-exchange"></i></div> 
```

[CKEditor](http://en.wikipedia.org/wiki/CKEditor)正在剥离这些标签，结果是：

```
<div class="service-icon">&nbsp;</div> 
```

我找不到允许保留这些标签的正确配置。

我已经确定这是因为[CodeMirror](http://ckeditor.com/addon/codemirror)插件而发生的。如果我注释掉 CodeMirror 插件，`<i class="icon-exchange"></i>`则不会删除空标签。

我该如何解决这个问题？

# delphi - 如何检测单击和双击 TreeView 中的节点？

> ID：15908154
> 
> 赞同：2
> 
> 时间：2013-04-09T17:08:07.150
> 
> 标签：delphi, delphi-7

如何在树视图中跟踪单击节点或双击节点项（即加号旁边的文本）的事件，而不是树视图本身？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:13:17.883

`OnClick`通常使用和`OnDblClick`事件检测控件的单击或双击。要找出单击了哪个特定节点，请将控件的[`GetNodeAt`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ComCtrls.TCustomTreeView.GetNodeAt)方法与鼠标的当前坐标一起使用。

您可以使用点击获取坐标[`GetMessagePos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644938.aspx)；reading`Mouse.CursorPos`将在您读取属性时为您提供坐标，如果系统上有任何类型的负载，这可能与点击时间有很大不同，这可能会导致检测到在不均匀的地方的点击在你的控制范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:21:57.970

使用通常`OnClick`和`OnDblClick`事件并查看哪个是当前节点项。

[http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ComCtrls.TCustomTreeView.Selected](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ComCtrls.TCustomTreeView.Selected)

另请参阅链接示例。

* * *

但最好使用 VirtualTreeView。

*   [http://www.lischke-online.de/VirtualTreeview/VTGallery.php](http://www.lischke-online.de/VirtualTreeview/VTGallery.php)
*   [http://code.google.com/p/virtual-treeview/](http://code.google.com/p/virtual-treeview/)

# php - phpDoc 中的“没有属性的简短描述”是什么意思？

> ID：15908161
> 
> 赞同：1
> 
> 时间：2013-04-09T17:08:31.970
> 
> 标签：php, phpdoc

在我的类文件上运行 phpDoc 时出现此严重错误：

```
No short description for property $id. 
```

这是相关代码：

```
/** @type int The user's id. */
private $id = 0; 
```

我相信这是[文档中使用](http://www.phpdoc.org/docs/latest/for-users/introduction/definitions.html)的方式。

那么这个错误是什么意思，我该如何解决呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:11:44.640

使用`@var`代替`@type`：

```
/**
 * @var integer The user's id. 
 */
private $id = 0; 
```

# css - CSS悬停在李子身上

> ID：15908163
> 
> 赞同：0
> 
> 时间：2013-04-09T17:08:44.973
> 
> 标签：css, hover

我这里有这个 CSS 脚本

```
#social_side_links li:nth-child(3):hover {

image

} 
```

但它不起作用....我的图像没有显示出来，是的，路径绝对正确...我需要这样写吗

```
#social_side_links li:hover nth-child(3) { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:16:03.377

这应该可以正常工作。

[http://jsfiddle.net/EeHdF/](http://jsfiddle.net/EeHdF/)

```
#social_side_links li:nth-child(3):hover {
    border:1px solid #000;
} 
```

像您在此处那样链接 :nth-child 和 :hover 应该可以正常工作。但是，如果您使用的是 IE6，则只会识别链中的最后一个伪类。

我知道您觉得图像是正确的，但请尝试另一个 CSS 定义，如边框（上图），看看您的定义或选择器是否有问题。

# c# - Google Maps API v3 / MVC 4 - 对传递到 MVC 4 应用程序中（部分视图）模式窗口的地址进行地理编码

> ID：15908168
> 
> 赞同：0
> 
> 时间：2013-04-09T17:09:06.203
> 
> 标签：c#, jquery, asp.net-mvc, google-maps-api-3, asp.net-mvc-4

我有一个搜索结果列表。每个结果旁边都有一个按钮，单击该按钮会启动包含 Bootstrap 模式的局部视图。

模态是强类型的，传入的对象表示具有地址的住宅物业。地址显示在模态标题中。

我正在尝试获取地址并将其传递给 JS 函数，该函数将对其进行地理编码并将其显示在模式中的选项卡上。

我试过的：

```
<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
    <h4 id="myModalLabel" data-id="@Model.Address.Line1,@if (Model.Address.Line2 != null)
    { @Model.Address.Line2; },@Model.Address.TownCity,@Model.Address.County">
        // display the address
    </h4>
</div>

<div class="modal-body">
    <div id="map-canvas" style="width: 400px; height: 400px">map canvas</div>
</div>
<div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
</div> 
```

JS 作为部分的结尾：

```
<script type="text/javascript">
initialize();

var geocoder;
var map;

function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(-34.397, 150.644);
    var myOptions = {
        zoom: 8,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    map = new google.maps.Map(document.getElementById("map-canvas"), myOptions);
}

function codeAddress() {
    var address = $('#myModalLabel').attr('data-id');
    geocoder.geocode({ 'address': address }, function (results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location
            });
        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
    });
}
google.maps.event.addDomListener(window, "load", initialize); 
```

所以我尝试将`data-id`属性添加到显示地址的模态标签，然后在`codeAddress()`函数中选择它。

显示带有硬编码 latlng 的默认地图，但没有进行地理编码。有人可以指出我正确的方向吗？也许提供一种更优雅的方式从模型中获取地址并将其传递给`codeAddress()`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:29:31.707

我正在使用谷歌教程中的代码，他们在那里调用`codeAddress()`了按钮点击事件。我实际上并没有打电话`codeAddress()`。

添加`codeAddress()`后`initialize()`已解决问题。

# php - 显示包含会话名称的消息

> ID：15908170
> 
> 赞同：0
> 
> 时间：2013-04-09T17:09:13.330
> 
> 标签：php, html

有没有办法在使用 HTML 和 PHP 单击按钮时显示包含已启动会话名称、选中的单选按钮以及选择的日期和时间的警报消息？该按钮包含在一个表单中，所以我正在寻找是否有办法完成这些事情......

这是我的代码：

```
<?php

if (!isset($_SESSION)) {
    session_start();
}

echo $_SESSION["uname"]; ?>

</div>

<br>

<form id="form1" action="welcome.php" method="post" >

    Blood Type Needed :
    <br>
    <br>
    <input id="input1" type="Radio" value="A+" name="bn"/> A

    <input id="input1" type="Radio" value="B+" name="bn"/> B

   <input type="hidden" id="sessionId" value="<?php echo $_SESSION['uname']; ?>" />

$('input[@name="bn"]:checked').val();

var radios = document.getElementsByName('bn');

if (radios.checked) {
    function showSession(){

 var x=document.getElementById("sessionId");

var y=new Date();

 alert(x.value+" wants "+radios.value+y);

}
}

            </script>
                 <input id="done" class="button1" type="button" onClick="showSession();"  value="   DONE   ">

            </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:19:54.823

我将使用 INPUT hidden 和 javascript 函数，在将其攻击到按钮上的 onClick 事件后，但建议您使用 Jquery 使所有跨浏览器：

**HTML 输入**

```
<input type="hidden" id="sessionId" value="<?php echo $_SESSION['uname']; ?>" /> 
```

**JAVASCRIPT**

```
function showSession(){
   var x=document.getElementById("sessionId");
   alert(x.value);
} 
```

**HTML 按钮**

```
<input type="button" value="Click me" onClick="showSession();" /> 
```

**完整脚本**

```
<?php
    if (!isset($_SESSION)) session_start();
    echo "Session ID: ".$_SESSION["uname"]; 
?>
</div><br/>
<script>
    function showData(){
        var sessionId = document.getElementById("sessionId").value;
        var today = new Date();
        var x = document.getElementsByName('bn')
        var selected = false;
        // Check the selected value

        for(var k=0;k<x.length;k++)
          if(x[k].checked){
            alert(' '+ sessionId + " wants " + x[k].value + " " +today);
            selected = true;
          }
        if (!selected) alert('Select something please...');
    }
</script>
<form id="form1" action="welcome.php" method="post" ><br/>
    Blood Type Needed :<br/><br/>
    <input id="AP" type="Radio" value="A+" name="bn"/><label for="AP"> A</label><br/>
    <input id="BP" type="Radio" value="B+" name="bn"/><label for="BP"> B</label><br/><br/>
    <input id="done" type="button" onClick="showData();" value="   DONE   " class="button1">
    <input type="hidden" id="sessionId" value="<?php echo $_SESSION['uname']; ?>" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:25:38.987

您可以使用简单的 Javascript 来做到这一点

```
<script>
   function showValue()
   {
       var sessionVal=<?php echo $_SESSION['uname']; ?>;
       var selectedDate=documnet.form1.dt.value;
       var selectedRadio=document.form1.bn.value;
       alert(sessionVal+" "+selectedRadio+" "+selectedDate); //what ever format you want to show.
       document.form1.actiom='welcome.php';
       document.form1.submit();
   }
 </script> 
```

在你的 html 中添加 onsubmit 函数

```
 <form id="form1" action="" onsubmit="return showValue();" method="post" > 
```

# c++ - 正确别名向量

> ID：15908172
> 
> 赞同：4
> 
> 时间：2013-04-09T17:09:26.177
> 
> 标签：c++, templates, vector, alias

我无法在其他地方找到答案，所以我想我只需要问这个：我正在尝试获取向量的别名（其中存储了 int 指针），如下所示：

```
 void conversion(Engine * ENGINES) 
    {//The Engine class has a vector of int* as a public data member called SITE
        for (int i = 0; i < 3; i++)
        {
            vector <int*>* current = &(ENGINES[i].SITE);//the problematic line
            int j_max = current -> size();
            cout << j_max << endl;
            for (int j = 0; j < j_max; j++)
            {
                for (int k = 0; k < 3; k++)
                {
                     if (*current[j][k] == 2)
                    *current[j][k] = 1;
                     if (*current[j][k] == -1)
                    *current[j][k] = 0;
                }
            }
        }
    } 
```

问题是 *current[a][b] 的索引似乎有反转。我希望能够将 current 用作法线向量，但现在与以下相比，索引是相反的：

```
vector <int*> current1 = ENGINES[1].SITE; 
```

所以`*current[i][j] = current1[j][i]`出于某种原因。我的语法有错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:14:38.187

我相信您的问题是它`[]`的优先级高于 unary `*`。所以你得到`*(current[j][k])`的不是`(*current)[j][k]`，这就是你想要的。

但是，您可以通过仅获取引用而不是指针来消除该问题：

`vector <int*>& current = (ENGINES[i].SITE);`然后只需`*`在访问`current`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:14:43.630

问题是它`[]`的优先级高于`*`(dereference)，因此`*current[i][j]`被解释为`*(current[i][j])`，这可能不是你想要的。

实际上，这种别名习惯用法通常表示为引用，而不是指针：

```
vector <int*>& current = ENGINES[i].SITE; 
```

并简单地使用`current[i][j]`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:16:15.240

正如我在评论中怀疑的那样，请使用参考。

```
vector <int*> &current = ENGINES[i].SITE; 
```

# python - Django查询/迭代问题

> ID：15908176
> 
> 赞同：1
> 
> 时间：2013-04-09T17:09:28.467
> 
> 标签：python, django, python-2.7

关于迭代，我有一个相当菜鸟的问题，我似乎无法正确回答。

我有一个表格，其中包含用户完成的每个月度测试的记录，如果他们错过了一个月，那么表格中就没有记录。

我想从表中提取用户历史记录，然后在 12 个月的每个月中为其完成状态设置 Y 或 N。

这是我的代码：

```
 def getSafetyHistory(self, id):
    results = []
    safety_courses = UserMonthlySafetyCurriculums.objects.filter(users_id=id).order_by('month_assigned')
    for i in range(1, 13):
        for s in safety_courses:
            if s.month_assigned == i:
                results.append('Y')
            else:
                results.append('N')

    return results 
```

所以我的理想结果将是一个包含 12 个条目的列表，Y 或 N 即 results = [N,N,Y,N,N,Y,Y,Y,N,N,N,Y]

上面的查询为用户返回了 2 条记录，这是正确的，但在我的迭代中，我不断收到 24 个条目，显然是由于外部和内部循环，但我不确定“pythonic”方式我应该这样做没有大量的嵌套循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:45:58.467

可能有很多方法可以做到这一点。这是一个想法。

看起来您只会获得已完成课程的记录。所以你可以预先建立一个包含 12 个结果的列表，全部设置为 no。然后在查询数据库后，将与您得到的结果相对应的那些翻转为是。

```
results = ['N'] * 12  # prebuild results to all no

safety_courses = UserMonthlySafetyCurriculums.objects.filter(
                     users_id=id).order_by('month_assigned')

for course in safety_courses:
    results[course.month_assigned - 1] = 'Y' 
```

正如您的代码所暗示的那样，这假定`month_assigned`是 1 到 12 之间的整数。

# javascript - 使用 putImageData 从画布上的像素数组绘制图像

> ID：15908179
> 
> 赞同：13
> 
> 时间：2013-04-09T17:09:50.537
> 
> 标签：javascript, arrays, canvas, pixel, putimagedata

我正在开发一个可以加密图像并在画布上重绘解密图像的项目。由于我对编码和编程仍然很陌生，因此我目前在重绘解密的图像数据时遇到问题，这是一个 R、G、B、A 形式的像素数组。我认为只需将数据放入

```
ctx.putImageData(imgd,0,0); 
```

但是萤火虫告诉我该值没有实现图像数据的接口。[我已经在这里](http://pastebin.com/KDZrXzbU)发布了整个数组。图像宽 160 像素，高 120 像素。

有没有办法重新格式化数组，使其可以在画布上绘制？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2014-04-01T05:15:05.780

使用 Uint8 你可以更快：

```
var canvas = document.createElement("canvas"),
    ctx = canvas.getContext("2d"),
    img = [27,32,26,28, ... ];

// Get a pointer to the current location in the image.
var palette = ctx.getImageData(0,0,160,120); //x,y,w,h
// Wrap your array as a Uint8ClampedArray
palette.data.set(new Uint8ClampedArray(img)); // assuming values 0..255, RGBA, pre-mult.
// Repost the data.
ctx.putImageData(palette,0,0); 
```

除非您需要先修改值，否则无需逐字节进行。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-04-09T17:46:59.640

假设`imgd`只是一个包含所有字节值的数组，您仍然需要将数组转换为 ImageData。

```
var imgd = [27,32,26,28,33,27,30,35,29,31.....]

// first, create a new ImageData to contain our pixels
var imgData = ctx.createImageData(160, 120); // width x height
var data = imgData.data;

// copy img byte-per-byte into our ImageData
for (var i = 0, len = 160 * 120 * 4; i < len; i++) {
    data[i] = imgd[i];
}

// now we can draw our imagedata onto the canvas
ctx.putImageData(imgData, 0, 0); 
```

# objective-c - arc4随机符号

> ID：15908180
> 
> 赞同：1
> 
> 时间：2013-04-09T17:09:55.000
> 
> 标签：objective-c, random, cocos2d-iphone, chipmunk

为什么这段代码不起作用？

```
-(void)tick:(ccTime)dt
   {
    ......

    float impulse =  - (arc4random() % 2500) ;

    cpBody *body = cpShapeGetBody(player.shape);

    cpBodyApplyImpulse(body, cpv( 0 , impulse), cpv(0,0));

    .....

    } 
```

这个代码有效吗？

```
 -(void)tick:(ccTime)dt
    {
    ......

    float impulse =  arc4random() % 2500 ;

    cpBody *body = cpShapeGetBody(player.shape);

    cpBodyApplyImpulse(body, cpv( 0 ,(- impulse)), cpv(0,0));

    .....

    } 
```

我真的不明白为什么如果我在不同的地方改变“冲动”的标志，代码工作或不能正常工作。是与 arc4random 函数有关的问题吗？

第一个代码中有“脉冲”值....

```
2013-04-09 18:28:31.697 ProvaCocos2D[7086:907] impulse 4294967296.000000
2013-04-09 18:28:31.864 ProvaCocos2D[7086:907] impulse 4294966016.000000
2013-04-09 18:28:32.197 ProvaCocos2D[7086:907] impulse 4294966016.000000
2013-04-09 18:28:33.197 ProvaCocos2D[7086:907] impulse 4294966272.000000
2013-04-09 18:28:33.864 ProvaCocos2D[7086:907] impulse 4294964992.000000
2013-04-09 18:28:34.197 ProvaCocos2D[7086:907] impulse 4294967296.000000
2013-04-09 18:28:35.197 ProvaCocos2D[7086:907] impulse 4294967040.000000
2013-04-09 18:28:35.531 ProvaCocos2D[7086:907] impulse 4294966528.000000 
```

第二，这项工作：

```
2013-04-09 19:05:38.492 ProvaCocos2D[7158:907] impulse 1712.000000
2013-04-09 19:05:38.994 ProvaCocos2D[7158:907] impulse 2365.000000
2013-04-09 19:05:39.320 ProvaCocos2D[7158:907] impulse 630.000000
2013-04-09 19:05:39.486 ProvaCocos2D[7158:907] impulse 331.000000
2013-04-09 19:05:40.153 ProvaCocos2D[7158:907] impulse 2268.000000
2013-04-09 19:05:40.486 ProvaCocos2D[7158:907] impulse 2166.000000 
```

谁能解释我？我使用 XCode 4.6 和 cocos2d 2.0

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:15:32.463

`arc4random()`返回一个`uint32_t`(aka `unsigned int`)，因此

```
- (arc4random() % 2500) 
```

计算为*无符号*整数，给出范围内的一些大数

```
2^32 - 2500 ... 2^32 - 1 
```

然后将其转换为`float`. 如果您将代码更改为

```
float impulse =  - (int)(arc4random() % 2500) ; 
```

然后你会得到预期的结果。

# c++ - MFC 绘制的元素在 30-60 分钟后发生变化

> ID：15908184
> 
> 赞同：4
> 
> 时间：2013-04-09T17:09:59.330
> 
> 标签：c++, winapi, mfc, gdi

我有一个具有完全自定义绘制的 UI 的应用程序（即只是一堆带有文本的填充框）。运行大约 30-60 分钟后，UI 元素会自发变化。例如，白线（框边框）消失，文本调整大小等。

我已经链接到其中一个屏幕的前后图像。这表明所有的白线都消失了。其他屏幕显示文本大小的显着变化。

之前：[http ://s21.postimg.org/cogqodson/BEFORE.png](http://s21.postimg.org/cogqodson/BEFORE.png)

之后：[http ://s24.postimg.org/7skx21sid/AFTER.png](http://s24.postimg.org/7skx21sid/AFTER.png)

该项目使用 MFC 用 MS Visual C++ 2010 编写，并在 Windows 7 Pro 上运行。

这是我的 OnPaint() 代码：

```
void CMainWindow::OnPaint()
{
    CPaintDC dcScreen( this );
    CBitmap bitmap;
    bitmap.CreateCompatibleBitmap( &dcScreen, m_rect.Width(), m_rect.Height() );

    CDC dc;
    dc.CreateCompatibleDC( &dcScreen );
    CBitmap* pOldBitMap = dc.SelectObject( &bitmap );

    dc.FillRect(m_rect, &BGBRUSH);
    int bkmode = dc.SetBkMode(TRANSPARENT);
    dc.SelectObject(&BGBRUSH);

    CPen brightwhitepen(PS_SOLID, 5, RGB(255,255,255));
    CPen* pOldPen = dc.SelectObject(&brightwhitepen);

    // draw some stuff:
    // dc.Rectangle, dc.DrawText, etc.
    // ...

    // Blit the memory device context to the screen device context
    dcScreen.BitBlt
        (
        0, 
        0, 
        m_rect.Width(), 
        m_rect.Height(),
        &dc, 
        0, 
        0, 
        SRCCOPY
        );

    dc.SetBkMode( bkmode );     // Restore old background mode
    dc.SelectObject( pOldPen ); // reselect old pen
    dc.SelectObject( pOldBitMap ); // Restore old bitmap
} 
```

有没有人见过这样奇怪的行为？关于在哪里调查的任何提示？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:19:17.923

当我忘记恢复其中一个 GDI 句柄的状态时，我曾经解决过这样的问题。解决方案是使用`SaveDC`and `RestoreDC`，这意味着您在使用完之后不必恢复 DC 中的任何对象。你可以在这里下载一个[非常方便的 RAII 类](http://www.flounder.com/savedc.htm)，它可以为你完成所有的工作。

第二个建议是使用库存对象和内置 DC 句柄，而不是创建自己的。因此，像这样替换您的`brightwhitepen`代码：

```
dc.SetDCPenColor(RGB(255,255,255));
CPen* pBrightwhitepen = CPen::FromHandle((HPEN)GetStockObject(DC_PEN));

dc.SetDCBrushColor(RGB(0,0,255));
CBrush* pBgBrush = CBrush::FromHandle((HBRUSH)GetStockObject(DC_BRUSH)); 
```

现在使用这两个指针来绘制你的东西。优点是你没有分配任何东西，所以你不能泄漏任何东西，并且调用不会失败，因为股票对象总是存在的。

# mysql - MYSQL 数据库：如何为多个设备和多个数据构建数据库？

> ID：15908185
> 
> 赞同：0
> 
> 时间：2013-04-09T17:10:02.913
> 
> 标签：mysql, database, performance

我必须创建一个大型数据库。它将保存来自 100 多个设备的数据，这些设备将不断更新数据库。每 10 秒，每个设备将更新数据库中的一行。是为每个设备数据创建一个单独的表，还是在同一个表中具有设备 ID 的数据更好。

问题：我想了解如果我为每个设备使用单独的表，更新数据库是否会显着提高性能？

我还想了解从数据库中检索相同数据是否会提高性能。我们也将每 10 秒查询一次数据库以更新新行。我正在使用 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:11:17.310

我认为没有理由在这里创建一个单独的表。您可以简单地拥有一个名为的表`device_data`，它将设备的 保存`id`到列出所有设备`foreign key`的表中。`device`

这也将使您在查询数据库时*变得更加*轻松，因为您不需要从几十个不同的表中获取数据，您将所有数据都放在一个共同的地方。

示例查询可能如下所示：

```
Select DD.device_name, DD.device_data From
device_data
INNER JOIN device D On
DD.id = D.id 
```

# r - 如何更改 xyplot 中标题的颜色？

> ID：15908188
> 
> 赞同：9
> 
> 时间：2013-04-09T17:10:05.137
> 
> 标签：r, lattice

我正在使用 lattice 包中的 xyplot，我想更改 hte 标头的颜色。目前，它是一种难看的浅橙色。

```
library(lattice)

x <- c(1:10, 1:10)
y <- c(10:1, 10:1)
z <- c(1:10, seq(1,20, by=2))
a = c(rep("one",10),rep("two",10))
DF <- data.frame(x, y, z, a)
xyplot(y ~ x | a, groups = z < 5, data = DF, col = c("black", "red"),
 pch=20, cex=0.3) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-09T17:25:41.403

您需要重置`trellis.par.get()$strip.background$col`.

要对单个图执行此操作，请使用以下`par.settings=`参数：

```
xyplot(y ~ x | a, groups = z < 5, data = DF, col = c("black", "red"),
       pch = 20, cex = 0.3, 
       par.settings = list(strip.background=list(col="lightgrey"))) 
```

要更持久地重置条带背景颜色，请使用`trellis.par.set()`：

```
trellis.par.set(strip.background=list(col="lightgrey")) 
```

要查看您自己是如何发现这一点的，请尝试以下操作：

```
names(trellis.par.get())
trellis.par.get("strip.background") 
```

最后，有关更复杂（并且在美学上令人震惊）的条形背景操作的示例，[请参见此处](https://stackoverflow.com/questions/8536239/change-background-and-text-of-strips-associated-to-muliple-panels-in-r-lattice/8537752#8537752)。

# c# - 如何在 MVC4 中获取 TempData 对象识别

> ID：15908189
> 
> 赞同：2
> 
> 时间：2013-04-09T17:10:06.730
> 
> 标签：c#, asp.net-mvc-4

我有一个创建 TempData 对象的 ActionMethod

```
TempData["Message"] = new Message {Text = txtMessage, Success = false}; 
```

然后我在视图中读取了 TempData

```
@{var message = TempData["Message"];} 
```

但是当我尝试使用 var "message.Success" 时，编译器无法识别该属性。当我在调试期间查看 var 消息和 TempData 时，我可以看到对象的 txtMessage 和 Success 值。我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:14:24.600

尝试

```
@{dynamic message = TempData["Message"];} 
```

或者

```
@{Message message = TempData["Message"] as Message;} 
```

或者，如果你知道它只会是一条消息

```
@{Message message = (Message)TempData["Message"];} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:12:37.810

我不相信`TempData`是动态类型的，所以你需要转换它。但是，对于匿名类型，您不能这样做。您需要将匿名类型转换为实际类。

如果您不想这样做，则可以使用`ViewBag`动态类型的替代方法。

# c# - 在c#中从.xml文件中获取多个属性

> ID：15908191
> 
> 赞同：3
> 
> 时间：2013-04-09T17:10:24.877
> 
> 标签：c#, xml

我有一个具有以下结构的 .xml 文件。我想获取特定 EndPointChannelID 的属性值 0.05 等。我目前能够获得该值，但它适用于每个 EndPointChannelID 而不是所需的。另一个转折是读数并不总是 6。我怎样才能实现只存储来自所需 EndPointChannelID 的值？任何建议将不胜感激！

```
 <Channel ReadingsInPulse="false">
       <ChannelID EndPointChannelID="5154131" /> 
         <ContiguousIntervalSets>
            <ContiguousIntervalSet NumberOfReadings="6">
               <TimePeriod EndRead="11386.22" EndTime="2013-01-15T02:00:00Z"/> 
                  <Readings>
                     <Reading Value="0.05" /> 
                     <Reading Value="0.04" /> 
                     <Reading Value="0.05" /> 
                     <Reading Value="0.06" /> 
                     <Reading Value="0.03" /> 
                     <Reading Value="0.53" /> 
                  </Readings>
               </ContiguousIntervalSet>
           </ContiguousIntervalSets>
       </Channel> 
```

下面是我必须找到值的当前代码。

```
 XmlReader reader = XmlReader.Create(FileLocation);
        while (reader.Read())
        {
             if((reader.NodeType == XmlNodeType.Element) && (reader.Name == "Reading"))
             {
                 if (reader.HasAttributes)
                 {
                      MessageBox.Show(reader.GetAttribute("Value"));
                 }
              }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:19:16.150

继续使用`XMLReader`路径，您可以通过设置结果列表来完成，等待所需的通道 ID，开始收集值，然后在所需的通道 ID 标签结束时结束收集它们：

```
var values = new List<string>();
var collectValues = false;
var desiredChannelId = "5154131";
while (reader.Read())
{
     if((reader.NodeType == XmlNodeType.Element))
     {
         if (reader.Name == "ChannelID" && reader.HasAttributes) {
             collectValues = reader.GetAttribute("EndPointChannelID") == desiredChannelId;
         }
         else if (collectValues && reader.Name == "Reading" && reader.HasAttributes)
         {
              values.Add(reader.GetAttribute("Value"));
         }
      }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:14:39.307

你的代码有点太简单了。您需要逐行阅读并首先匹配 EndPointChannelId。设置一个标志以明确表明您具有正确的 ChannelId，然后在满足该条件时读取`Value`属性。你需要一个数组来保存它们。An`ArrayList`将是理想的，因为它的长度可变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:15:50.637

使用 LINQ to XML 可以轻松完成：

```
// load document into memory
var xDoc = XDocument.Load("Input.txt");

// query the document and get List<decimal> as result
List<decimal> values = (from ch in xDoc.Root.Elements("Channel")
                        where (int)ch.Element("ChannelID").Attribute("EndPointChannelID") == 5154131
                        from r in ch.Descendants("Reading")
                        select (decimal)r.Attribute("Value")).ToList(); 
```

# cuda - 关于 CUDA 共享内存的奇怪行为

> ID：15908192
> 
> 赞同：1
> 
> 时间：2013-04-09T17:10:27.640
> 
> 标签：cuda, shared-memory

我正在使用 GTX9800，它报告可用共享内存为 16384 字节

给定以下内核代码，使用 T = int (4 bytes) 运行

```
template <typename T>
__global__ void foo(unsigned n, T *x)
{
    unsigned idx    = blockIdx.x * blockDim.x + threadIdx.x;
    __shared__ T sx[4096];
    x[idx] = 0;
} 
```

我得到了预期的结果，即最初非零的数组 x 将用零填充。

但是，添加一行不执行任何操作的代码：

```
template <typename T>
__global__ void foo(unsigned n, T *x)
{
    unsigned idx    = blockIdx.x * blockDim.x + threadIdx.x;
    __shared__ T sx[4096];
    sx[0] = 0;
    x[idx] = 0;
} 
```

现在 x 在调用内核后根本不包含任何零！

但是，如果我将 sx 的大小更改为 <= 4088，我会再次得到预期的结果。

这是怎么回事？我比较困惑。

编辑：

更正错字：将 16384 "KB" 更改为 "bytes"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:32:09.397

计算能力 1.x 设备上的共享内存大小是每个 SM 16384*字节，而不是千字节。*

此外，每个块将消耗 16 个字节用于内部目的（存储块索引等），以及内核参数的额外存储空间。

所以不幸的是，你不能在一个块中使用完整的 16kb 共享内存。

对于更高的计算能力，这些数据将存储在其他地方（常量内存和特殊寄存器），因此整个共享内存都在那里可用。

# java - 在文本文件上多次匹配模式？

> ID：15908197
> 
> 赞同：0
> 
> 时间：2013-04-09T17:10:41.063
> 
> 标签：java, regex, string, matcher

## 问题：

在 Java 中，我将解析脚本并从文件中提取以

```
 ${GLOBAL_} or ${AUTO_} 
```

我想拾取所有东西，直到最后一个花括号，例如，如果我有以下字符串：

```
 "this is a String ${AUTO_TEST_f} body ${GLOBAL_SYNC} ${AUTO_2} ${OTHER_VAR}" 
```

结果应该是：

```
${AUTO_TEST_f} 

${GLOBAL_SYNC}

${AUTO_2} 
```

## 我尝试过的：

我试图创建正则表达式模式（我相信它确实有效）并使用它们来创建匹配器。然后我尝试使用 Matcher 将所有匹配项打印到控制台，但我遇到了一些问题。出于某种原因，它跳过了 ${GLOBAL_VARIABLE_1}。另外，我怎样才能实现这个给我所有的比赛？一个while循环[while match.group(0) != null]？

这是我的代码：

```
 String re1="(\\$)";    // Any Single Character 1
String re2="(\\{)"; // Any Single Character 2
String re3="(G)";   // Any Single Character 3
String re4="(L)";   // Any Single Character 4
String re5="(O)";   // Any Single Character 5
String re6="(B)";   // Any Single Character 6
String re7="(A)";   // Any Single Character 7
String re8="(L)";   // Any Single Character 8
String re9="(_)";   // Any Single Character 9
String re10="(.*?)";    // Any Single Character 10
String re11="(\\})";    // Any Single Character 11

String r1="(\\$)";  // Any Single Character 1
String r2="(\\{)";  // Any Single Character 2
String r3="(A)";    // Any Single Character 3
String r4="(U)";    // Any Single Character 4
String r5="(T)";    // Any Single Character 5
String r6="(O)";    // Any Single Character 6
String r7="(_)";    // Any Single Character 7
String r8="(.*?)";  // Any Single Character 8
String r9="(\\})";  // Any Single Character 9

Pattern p = Pattern.compile((re1+re2+re3+re4+re5+re6+re7+re8+re9+re10+re11));
Pattern p2 = Pattern.compile(r1+r2+r3+r4+r5+r6+r7+r8+r9);

 Matcher m = p.matcher(txt);
 Matcher m1 = p2.matcher(txt);
 m1.find();
 System.out.println(m1.group(0));
 m.find();
 System.out.println(m.group(0)); 
```

这是控制台结果：

```
 Actual Results:
 ${AUTO_1}
 ${GLOBAL_VARIABLE_2} 
```

这是我的预期结果：

```
 Expected Results:
 ${GLOBAL_VARIABLE_1}
 ${AUTO_1}
 ${GLOBAL_VARIABLE_2}
 ${GLOBAL_VARIABLE_3} 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:19:05.207

不要过于复杂：

```
String txt = "this is a String ${AUTO_TEST_f} body ${GLOBAL_SYNC} ${AUTO_2}";
String regex = "\\$\\{(AUTO|GLOBAL)_(.*?)\\}";
Pattern pattern = Pattern.compile(regex);
Matcher matcher = pattern.matcher(txt);
while (matcher.find()) {
    System.out.println(matcher.group() + "\t->\t" + matcher.group(2) + "\t(" + matcher.group(1) + ")" );
} 
```

输出：

```
${AUTO_TEST_f}  ->  TEST_f  (AUTO)
${GLOBAL_SYNC}  ->  SYNC    (GLOBAL)
${AUTO_2}       ->  2       (AUTO) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:14:45.247

试试这个：

```
String data = "this is a String ${AUTO_TEST_f} body ${GLOBAL_SYNC} ${AUTO_2}";
    Pattern pattern = Pattern.compile("\\$\\{.+?\\}");

    Matcher matcher = pattern.matcher(data);

    while (matcher.find()) {
        // Indicates match is found. Do further processing
        System.out.println(matcher.group());
    } 
```

输出是：

${AUTO_TEST_f}
${GLOBAL_SYNC}
${AUTO_2}

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T17:16:14.583

无论您在做什么，这都不是正确的编码方式。从较小的组件组​​成一个正则表达式很好，但是当您将组件分解为单个字符时它是没有意义的。

如果你想得到那些以`GLOBAL`or开头的`AUTO`，它很简单：

```
\$\{(GLOBAL|AUTO)_.*?\} 
```

将正则表达式放入字符串文字中：

```
"\\$\\{(GLOBAL|AUTO)_.*?\\}" 
```

# c# - Visual C# DataGridView 编辑；已设置所有可能的编辑选项；不会编辑

> ID：15908202
> 
> 赞同：0
> 
> 时间：2013-04-09T17:11:13.833
> 
> 标签：c#, mysql, datagridview, phpmyadmin

我花了大约三周的时间试图找到这方面的信息，但没有成功。与编辑相关的 DGV 设置：只读在 DGV 上为 false 编辑模式是 DGV 上的击键。

代码在这里： http: [//pastebin.com/eCv3iBcF](http://pastebin.com/eCv3iBcF)

但是，当尝试编辑时，什么也没有发生，框只是从选择中变成颜色；鼠标不会改变以识别文本，击键什么也不做。

这应该做什么（至少在我的脑海中并且根据 tut）：打电话给桌子。填充 DGV。允许通过击键编辑所选字段。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:20:20.070

问题是您将 Bi​​ndingSource 对象的数据源设置为 SQLDataReader 对象。这是一个只读对象。

> DataReader 仅限于只读和只进。即从数据库中检索到的信息不能被DataReader修改，DataReader也不能以随机顺序检索记录。相反，DataReader 仅限于按顺序访问记录，从第一个到最后一个，一次一条记录。”

您应该改用 DataAdpater 并填充 DataTable。

然后使用 DataTable 作为 BindingSource 的数据源。

Alternativley，您可以像这样使用 DataReader 打勾：-

```
 using(SqlDataReader reader = command.ExecuteReader())
            {
                DataTable data = new DataTable();
                data.Load(reader);

            } 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:31:25.443

如下更改您的编码...它将帮助您...

```
string query = "SELECT * FROM catalog";
using (MySqlConnection con  = new MySqlConnection (connectionString))
{
 con.Open();
 using (MySqlDataAdapter dataAdapter = new MySqlDataAdapter(query , con))
 {
  DataSet ds = new DataSet();
  dataAdapter.Fill(ds);
  dataGridView1.DataSource = ds.Tables[0];
 }
 con.Close();
} 
```

# bash - bash 脚本中的空格

> ID：15908205
> 
> 赞同：2
> 
> 时间：2013-04-09T17:11:35.420
> 
> 标签：bash, space, pdftk

所以，我已经尝试了一段时间，这真的行不通。我正在尝试编写一个脚本，它将许多 pdf 文件连接成一个文件，而无需在命令行界面中指定它们（它们都有相似的名称）。

```
#!/bin/bash 

i=1 
list="science.pdf" 
outputfile="file.pdf" 

while [ $i -le 3 ]; do 
    file="science (${i}).pdf" 
    list="$list $file" 
    let i=i+1 
done 

pdftk $list cat output $outputfile 
```

这是我的输出：

```
sean@taylor:~/Downloads/understanding/s0$ ./unite.sh 
Error: Failed to open PDF file: 
   science
Error: Failed to open PDF file: 
   (1).pdf
Error: Failed to open PDF file: 
   science
Error: Failed to open PDF file: 
   (2).pdf
Error: Failed to open PDF file: 
   science
Error: Failed to open PDF file: 
   (3).pdf
Errors encountered.  No output created.
Done.  Input errors, so no output created. 
```

我认为脚本以某种方式认为应该在有空格的地方拆分文件，但是我尝试在空格 (\) 之前使用反斜杠并用引号 (\") 将文件名括起来，但无济于事。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:16:38.357

不要将文件名附加到字符串。改用数组：

```
i=1 
list=( "science.pdf" )
outputfile="file.pdf" 

while [ $i -le 3 ]; do 
    file="science (${i}).pdf" 
    list+=( "$file" )
    let i=i+1 
done 

pdftk "${list[@]}" cat output $outputfile 
```

您还可以使用 for 循环进一步简化脚本，如下所示：

```
list=( "science.pdf" )
for (( i=1; i<=3; i++ )); do
    file="science (${i}).pdf"
    list+=( "$file" )
done
pdftk "${list[@]}" cat output $outputfile 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-09T17:17:29.890

当您执行最终命令时

```
pdftk $list cat output $outputfile 
```

$list 变量不再被引用，即实际执行的是

```
pdftk science.pdf science (1).pdf ... science (3).pdf cat output file.pdf 
```

您需要超级引用您的 $list 变量。尝试：

```
while [ $i -le 3 ]; do 
    file="science (${i}).pdf" 
    list="$list \"$file\""
    let i=i+1 
done 
```

您可能需要使用不同的连接变量的方法，因为您的循环可能会不断地取消引用先前连接的值。

# maven - 多个 Maven 项目针对一个公共时间戳发布

> ID：15908212
> 
> 赞同：0
> 
> 时间：2013-04-09T17:12:23.017
> 
> 标签：maven, release

我们有几个项目正在进行，它们之间存在依赖关系。所有项目构成最终软件。

我们设置了一个 DEV 构建环境，使用 LASTEST 依赖项进行快照构建。任何更改都会触发快照构建（jekins 作业），并且所有依赖项的快照构建也将被触发，因此如果任何更改破坏了某个项目，该项目自己的构建将通知所有者。

问题是关于发布的。DEV 构建是连续的，当它是所有项目的绿色开发构建时，我们希望针对某个时间戳发布每个项目。

如何获得这样的发布过程设置？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:24:25.603

jenkins 提供了一些 Post-Build-Actions。您可以使用它们将每个成功构建的工件发布/存档到您想要的任何地方。

您的 Release-Job 可以获取所有工件并部署它们。因此，您确定所有工件都来自 GREEN 构建，并且独立于所有连续作业。

如果你想变得很酷，也可以在 Release-Job 中进行一些冒烟测试（例如，数据库连接是否正常工作、外部 API 是否正常工作等）。

最好的，马可

# jquery - jQuery在点击时显示隐藏的热点？

> ID：15908216
> 
> 赞同：1
> 
> 时间：2013-04-09T17:12:36.033
> 
> 标签：jquery, show-hide

我有一系列 DIV，每个都有一个 X 的图像：

`<div class="hotspot" id="hs1" class="hotspot"><img src="images/xmark.png" alt="x"></div>`

我想要做的是从它们隐藏但仍然可以点击开始，然后点击显示里面的图像。

如果我使用

```
<div class="hotspot" id="hs1" class="hotspot">
    <img class="x" src="images/xmark.png" alt="x">
</div>

.hotpsot img { visibility: hidden;} 
```

接着

```
$('#hs1').click(function(){
        $(this).find(img).show();
}); 
```

div 确实获得了点击，但未显示图像。

我也试过 display:none 和 children()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:13:36.570

尝试这个：

```
$('#hs1').click(function(){
    $(this).find('img').show();
}); 
```

只是缺少选择器周围的引号`img`。

另外，提个建议。`class`请删除以下 HTML 标记中的双重属性：

```
<div class="hotspot" id="hs1" class="hotspot">
    <img class="x" src="images/xmark.png" alt="x">
</div> 
```

一个`class`属性就足够了：

```
<div class="hotspot" id="hs1">
   <img class="x" src="images/xmark.png" alt="x">
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:13:26.530

用引号`img`括起来以使用标签选择器获取元素，否则`img`将被假定为变量。您没有正确关闭 img 标记`/`丢失。

图像被隐藏，但 show 使用 show 方法不使用的`visibility:hidden`显示属性。`visibility``display:none``css`

**[现场演示](http://jsfiddle.net/xztqD/1/)**

```
$('#hs1').click(function(){
    $(this).find('img').show();
}); 
```

# svg - 如何更改沿路径/线的笔画宽度？

> ID：15908218
> 
> 赞同：13
> 
> 时间：2013-04-09T17:12:49.487
> 
> 标签：svg, inkscape

阅读了 SVG2 草案后，我有点失望地得知不会有比标准 3[新的线帽。](http://www.w3.org/TR/2013/WD-SVG2-20130409/painting.html#LineCaps)[然而，新的弧线连接很棒](http://www.w3.org/TR/2013/WD-SVG2-20130409/painting.html#LineJoin)，但不是这个问题的意义（我只是想提一下）。

我一直希望有一个以三角形结尾的帽子。但考虑到我的用例，这可能也不理想。

据我所知，我自己不使用的 Adob​​e Illustrator 允许笔画的宽度是可变的。这在从绘图板绘图时很有用，可以突出线条的压力。确实，这个功能在很多位图绘制程序中都有，但是有没有办法在SVG中实现这个效果，而不用画多条线呢？

这个想法是每个节点都应该有一个宽度，然后线条应该“平滑”地缩放每个具有不同宽度的节点之间的宽度。

这可能吗？如果没有，是否可以考虑？

PS我应该指出，这更像是一个思想实验和一个想法，而不是阻碍我的过程的东西。拥有比需要拥有更多。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T06:35:36.017

虽然这可能不是一个真正的答案（至少是 SVG 标准），但事实证明，在当前的 Inkscape 主干版本中，这个[名为 PowerStroke 的功能已经存在](http://wiki.inkscape.org/wiki/index.php/Release_notes/0.49#PowerStroke)。有一些[PowerStroke 的截图](http://www.inkscapeforum.com/viewtopic.php?t=12230&p=45492#p45492)。

这应该能满足我暂时的追求。

事实证明，弧线连接实际上也是[由 Inkscape 提出的](http://tavmjong.free.fr/blog/?p=646)，它们在 Inkscape 中被称为外推。

# java - 什么可能导致使用 SQLiteOpenHelper 创建多个表时出错？

> ID：15908220
> 
> 赞同：0
> 
> 时间：2013-04-09T17:12:52.460
> 
> 标签：java, android, sql, sqliteopenhelper, sqlite

数据库处理程序代码：

```
public class DatabaseHandler extends SQLiteOpenHelper { 

private static final String DATABASE_NAME = "mydb";

// 1st table --------------------------------------
private static final String TABLE_MODULE = "module";    
// Module table columns
private static final String KEY_MODULE_CODE = "code";
private static final String KEY_MODULE_TITLE = "title";
private static final String KEY_MODULE_SEMESTER = "semester";
private static final String KEY_MODULE_TIMETABLE= "timetable";

// 2nd table --------------------------------------
private static final String TABLE_URIS = "applicationURLs"; 
// Module table columns
private static final String KEY_SERVER_URI = "serverURI";
private static final String KEY_NEWS_URI = "newsURI";
private static final String KEY_MODULES_URI= "moduleURI";

// Constructor
public DatabaseHandler(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

/**
 * Creating tables
 */
@Override
public void onCreate(SQLiteDatabase db) {

      String CREATE_MODULE_TABLE = "CREATE TABLE "+ TABLE_MODULE + "("
            +   KEY_MODULE_CODE         +" TEXT PRIMARY KEY," 
            +   KEY_MODULE_TITLE        +" TEXT," 
            +   KEY_MODULE_TIMETABLE    +" TEXT," 
            +   KEY_MODULE_SEMESTER     +" TEXT);";     

      String CREATE_URIS_TABLE = "CREATE TABLE " + TABLE_URIS + "("
            + KEY_SERVER_URI    + " TEXT PRIMARY KEY," 
            + KEY_NEWS_URI      + " TEXT," 
            + KEY_MODULES_URI   + " TEXT);";

      db.execSQL(CREATE_MODULE_TABLE + CREATE_URIS_TABLE);       
}

/**
 * Upgrading database
 */
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    // Drop older table if existed
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_MODULE);
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_URIS);
    //Create tables again
    onCreate(db);
}

public void addModule(Module module) {

    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();

    values.put(KEY_MODULE_TITLE, module.getTitle());                
    values.put(KEY_MODULE_CODE, module.getCode());  
    values.put(KEY_MODULE_TIMETABLE, module.getTimetable()); 
    values.put(KEY_MODULE_SEMESTER, module.getSemester());  

    db.insert(TABLE_MODULE, null, values); 
    db.close(); // Closing database connection
}

/**
 * Adding new server URIs
 * @param uris
 */
public void addURIs(ServerURIs uris){

    SQLiteDatabase db = this.getWritableDatabase();
    ContentValues values = new ContentValues();

    values.put(KEY_SERVER_URI, uris.getServerURI()); 
    values.put(KEY_NEWS_URI, uris.getNewsURI());        
    values.put(KEY_MODULES_URI, uris.getModulesURI());  

    // Inserting Row
    db.insert(TABLE_URIS, null, values);
    db.close(); // Closing database connection
}
} 
```

将新记录添加到第二个表时会引发错误，指出第二个表不存在。onCreate() 中将数据添加到数据库的活动中的代码：

```
DatabaseHandler dbh  = new DatabaseHandler(this);
dbh.addURIs(serverURLs); 
```

不知道是什么原因。先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:14:56.970

您不能在一次调用中执行多个语句，只需使用两个。

```
db.execSQL(CREATE_MODULE_TABLE);
db.execSQL(CREATE_URIS_TABLE); 
```

引用 SQLiteDatabase 的[`execSQL(String sql)`文档](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#execSQL%28java.lang.String%29)：

> **参数**
> *sql* - 要执行的 SQL 语句。不支持以分号分隔的多个语句。

# javascript - 为什么我使用 Powershell/.NET 和 Javascript 为同一字符串获得不同的 base64 编码？

> ID：15908233
> 
> 赞同：0
> 
> 时间：2013-04-09T17:13:30.263
> 
> 标签：javascript, .net, powershell

在网页上，我使用 Javascript 将字符串转换为 Base64：

```
<script type="text/javascript">
    function base64_encode (data) {
    var b64 = ""ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="";
    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,
    ac = 0,
    enc = """",
    tmp_arr = [];
    if (!data) { return data; }
    do { 
        o1 = data.charCodeAt(i++);
        o2 = data.charCodeAt(i++);
        o3 = data.charCodeAt(i++);
        bits = o1 << 16 | o2 << 8 | o3;
        h1 = bits >> 18 & 0x3f;
        h2 = bits >> 12 & 0x3f;
        h3 = bits >> 6 & 0x3f;
        h4 = bits & 0x3f;    
        tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);
    } while (i < data.length);
    enc = tmp_arr.join('');
    var r = data.length % 3;
    return (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);
}
</script> 
```

这是来自这里的代码：http: [//phpjs.org/functions/base64_encode/](http://phpjs.org/functions/base64_encode/)

当我使用上面的代码对字符串进行 base64 编码时`cat`，它会以`Y2F0`.

当我在 Powershell/.NET 中编码相同的单词时，我得到了这个：

```
PS C:\> [System.Convert]::ToBase64String([System.Text.Encoding]::Unicode.GetBytes("cat"))
YwBhAHQA 
```

为什么它们不同，如​​何使 Javascript 函数与 .NET 输出匹配？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:15:42.587

base64 编码二进制数据。'cat' 的二进制表示在 JS（很可能是 UTF-8 编码）和 .NET（Unicode 16 位编码）中是不同的，因此 base64 编码必然不同。

尝试在 .NET 中将字符串转换为 UTF-8 (byte[])，然后进行编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:15:02.317

为了将字符串转换为 base64，必须首先将字符编码为字节。

Unicode 为每个字符使用两个字节对字符进行编码，而您粘贴的 JavaScript 编码器假定`data`已经编码为字节（或至少为 ASCII）。

尝试在您的 Powershell 脚本中使用`UTF8.GetBytes`而不是。`Unicode.GetBytes`UTF-8 将尽可能使用一个字节来表示字符，并在必要时使用多个字节。

# vim - 在 Windows 7（64 位）上为 gvim 编译 ctags

> ID：15908234
> 
> 赞同：1
> 
> 时间：2013-04-09T17:13:33.273
> 
> 标签：vim, windows-7, ctags

我想在 Windows 7 上构建支持自定义语言的 ctags。我发现了一些支持 JavaScript*或*PHP*或*CSS 的 ctags 的 Windows 构建，但我希望支持所有这三个。我已经适当地修改了 ctags 源。

问题是我不知道如何在 Windows 中运行 makefile。在 ctags 源代码中有一个 Borland c++ 的 makefile，但是当我尝试在 Windows 上安装 Borland 时，它遇到了一些兼容性问题并且拒绝运行安装程序。我知道您可以通过向 .ctags 文件添加正则表达式来“即时”修改 ctags。我正在寻找一个比这更强大的解决方案。

# c# - 在 WPF 中更新具有不同内容的列表框按钮单击

> ID：15908243
> 
> 赞同：0
> 
> 时间：2013-04-09T17:13:57.557
> 
> 标签：c#, .net, wpf, data-binding

所以我的 WPF 应用程序中有一个列表框和一个工具栏。工具栏只有常规控件，列表框有垂直扩展器。

我需要列表框有一组不同的扩展器，具体取决于单击的按钮。现在它看起来像这样：

```
<ListBox>
    <local:Select_Analysis_Panel/>
</ListBox> 
```

`local:Select_Analysis_Panel`包含扩展器的单独用户控制文件在哪里。单击按钮时动态更新 ListBox 控件内容的最佳方法是什么？

在过去的几个小时里，我一直在尝试为每个扩展器集使用 set DataTemplates 并将其绑定到项目控件属性，但使用下面的代码几乎没有用处。我只是想在设置 MVVM 接口之前布置基本框架。后来我打算`ItemsSource="Network_anal"`用你知道的`ItemsSource="{Binding WhatExpanderViewModelProperty}"`或类似的东西代替。

```
 <ListBox Width="250"  Margin="5,0,0,0">
            <ListBox.Resources>

                <DataTemplate DataType="Select_Analysis_Panel">
                    <local:Select_Analysis_Panel/>
                </DataTemplate>

                <DataTemplate x:Key="Network_anal" DataType="NetworkAnalysis">
                    <local:NetworkAnalysis/>
                </DataTemplate>.Resources>

            <ListBox.Template>                    
                <ControlTemplate>
                    <Border Background="Red"/>
                </ControlTemplate>                    
            </ListBox.Template>

            <ItemsControl ItemsSource="Network_anal"/>
</ListBox> 
```

我对此采取了正确的方法吗？

这就是我想要做的。当单击“文件”按钮时，下面的侧栏会显示这两个扩展器：

![在此处输入图像描述](https://i.stack.imgur.com/xJhY7.png) 当“网络设计”按钮显示这些扩展器时：

![在此处输入图像描述](https://i.stack.imgur.com/iOlmN.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:24:07.150

**选项1：**

子类化部分：

这些部分中的每一个都可以从基本部分类中子类化，并且`DataTemplate`可以为每个部分使用特定的：

```
<Window x:Class="MiscSamples.MultiToolbar"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:MiscSamples"
        Title="MultiToolbar" Height="300" Width="300">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Window.Resources>
    <DockPanel>
        <ListBox ItemsSource="{Binding Sections}"
                 SelectedItem="{Binding SelectedSection}"
                 DisplayMemberPath="Name"
                 DockPanel.Dock="Top">
            <ListBox.ItemContainerStyle>
                <Style TargetType="ListBoxItem">
                    <Setter Property="IsEnabled" Value="{Binding IsEnabled}"/>
                    <Setter Property="Visibility" Value="{Binding IsVisible, Converter={StaticResource BoolToVisibilityConverter}}"/>
                    <Setter Property="MinWidth" Value="80"/>
                    <Setter Property="MinHeight" Value="40"/>
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ListBoxItem">
                                <Border BorderBrush="Black" BorderThickness="1">
                                    <ToggleButton IsChecked="{Binding IsSelected, Mode=TwoWay,RelativeSource={RelativeSource TemplatedParent}}">
                                        <ContentPresenter ContentSource="Content"/>
                                    </ToggleButton>
                                </Border>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </ListBox.ItemContainerStyle>
            <ListBox.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ListBox.ItemsPanel>
        </ListBox>

        <ScrollViewer Width="300" DockPanel.Dock="Left">
            <ContentPresenter Content="{Binding SelectedSection}">
                <ContentPresenter.Resources>
                    <DataTemplate DataType="{x:Type local:FileSection}">
                        <TextBlock Text="User Control For File Section"/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type local:NetworkDesignSection}">
                        <TextBlock Text="User Control For Network Design"/>
                    </DataTemplate>
                    <DataTemplate DataType="{x:Type local:SelectAnalysisSection}">
                        <TextBlock Text="User Control For Select Analysis"/>
                    </DataTemplate>
                </ContentPresenter.Resources>
            </ContentPresenter>
        </ScrollViewer>

        <Grid Background="Gray">
            <TextBlock Text="Design Surface" TextAlignment="Center" VerticalAlignment="Center" FontWeight="Bold"/>
        </Grid>
    </DockPanel>
</Window> 
```

代码背后：

```
public partial class MultiToolbar : Window
    {
        public MultiToolbar()
        {
            InitializeComponent();

            var vm = new MainViewModel();
            vm.Sections.Add(new FileSection() {Name = "File"});
            vm.Sections.Add(new NetworkDesignSection() { Name = "Network Design" });
            vm.Sections.Add(new SelectAnalysisSection() { Name = "Select Analysis" });

            DataContext = vm;
        }
    } 
```

主视图模型：

```
public class MainViewModel: PropertyChangedBase
    {
        private ObservableCollection<Section> _sections;
        public ObservableCollection<Section> Sections
        {
            get { return _sections ?? (_sections = new ObservableCollection<Section>()); }
        }

        private Section _selectedSection;
        public Section SelectedSection
        {
            get { return _selectedSection; }
            set
            {
                _selectedSection = value;
                OnPropertyChanged("SelectedSection");
            }
        }
    } 
```

部分：

```
public abstract class Section:PropertyChangedBase
    {
        public string Name { get; set; }

        private bool _isEnabled = true;
        public bool IsEnabled
        {
            get { return _isEnabled; }
            set
            {
                _isEnabled = value;
                OnPropertyChanged("IsEnabled");
            }
        }

        private bool _isVisible = true;
        public bool IsVisible
        {
            get { return _isVisible; }
            set
            {
                _isVisible = value;
                OnPropertyChanged("IsVisible");
            }
        }

        //Optionally
        //public string ImageSource {get;set;}
        //ImageSource = "/Resources/MySection.png";
    }

    public class FileSection: Section
    {
        ///... Custom logic specific to this Section
    }

    public class NetworkDesignSection:Section
    {
        ///... Custom logic specific to this Section
    }

    public class SelectAnalysisSection: Section
    {
        ///... Custom logic specific to File Section
    }

    //...etc etc etc 
```

结果：

![在此处输入图像描述](https://i.stack.imgur.com/qSQmL.png)

请注意，我使用`ToggleButton`s 绑定到`ListBoxItem.IsSelected`属性来模拟类似`TabControl`- 的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:17:05.023

您可以设置`DataContext`整个表单`ItemsSource`的并将`listbox`或`ItemsSource`的`listbox`集合直接绑定到某个集合。

# iphone - 样式 UITableViewCell

> ID：15908245
> 
> 赞同：0
> 
> 时间：2013-04-09T17:14:03.743
> 
> 标签：iphone, objective-c, uitableview, customization

我需要为分组的 TableView 设置样式。我找到了这个教程：[http](http://www.raywenderlich.com/2033/core-graphics-101-lines-rectangles-and-gradients) ://www.raywenderlich.com/2033/core-graphics-101-lines-rectangles-and-gradients 。但不幸的是，简单版本（红色）对我不起作用。我正在使用 ARC，因此只有一行代码

`cell.backgroundView = [[[CustomCellBackground alloc] init] autorelease]; cell.selectedBackgroundView = [[[CustomCellBackground alloc] init] autorelease];`

不起作用。上面代码的 ARC 版本是什么。我在情节提要中使用原型单元。也许这就是它的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:17:01.943

ARC 不使用`autorelease`，所以只需键入：

```
cell.backgroundView = [[CustomCellBackground alloc] init];
cell.selectedBackgroundView = [[CustomCellBackground alloc] init]; 
```

# jquery - jQuery UI 自动完成中的自定义属性问题

> ID：15908247
> 
> 赞同：3
> 
> 时间：2013-04-09T17:14:10.830
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

在使用 jQuery UI 的自动完成功能时，我遇到了自定义属性的问题。出于某种奇怪的原因，自动完成功能不允许我对 or 使用 make 或 id 属性`ui.item.make`，`ui.item.id`但是当它设置为`ui.item.label`.

这是[JSFiddle](http://jsfiddle.net/yvakc/9/)和我遇到的问题的一个例子。这是自动完成工作的另一个[示例](http://jsfiddle.net/yvakc/8/)，但区别仅在于 label 属性。

任何为什么使用自定义属性对我不起作用的信息将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:36:02.493

我相信默认识别的属性只包括标签和值。如果要使用自定义属性，则需要实现自定义数据属性。

看起来像这样：

```
$("#vehicle_make").autocomplete({
    source: carMake,
    delay: 0,
    minLength: 1,
    autoFocus: false,
    select: function(event, ui) {
      $('#vehicle_make').val(ui.item.make);
    }
  })
  .data( "ui-autocomplete" )._renderItem = function( ul, item ) {
      return $( "<li>" )
        .append( "<a>" + item.make+ "<br>" + item.id + "</a>" )
        .appendTo( ul );
    }; 
```

或通过[jsfiddle](http://jsfiddle.net/yvakc/13/)

这应该允许您使用自定义属性访问 ui.item 对象。
（如果您不希望 id 可见，您可以使用列表项中的隐藏字段将其隐藏）

请参阅[http://jqueryui.com/autocomplete/#custom-data](http://jqueryui.com/autocomplete/#custom-data)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T18:37:23.823

您可以简单地预处理品牌列表（请参阅 forEach） - 如果您通过 ajax 获取数据，您也可以执行类似的操作。注意：我还添加`return false`到您的选择中，因此它不会使用该值并使用您的 make 代替。

```
var carMake = [{
    "make": "Smart",
        "id": '200038885'
}, {
    "make": "Bomb",
        "id": '200038885'
}, {

    "make": "Volkswagen",
        "id": '200000238'
}];

function addlabel(row) {
    row.label = row.make;
    row.value = row.id;
}
carMake.forEach(addlabel);
$("#vehicle_make").autocomplete({
    source: carMake,
    delay: 0,
    minLength: 1,
    autoFocus: false,
    select: function (event, ui) {
        $(this).val(ui.item.make);
        return false;
    }
}); 
```

编辑：Ajax 数据说明：要使用 ajax 数据进行处理，这将是一种方法：

```
success: function (data) {
    response($.map(data, function (item) {
        return {
                 label: item.make
                 value: item.id,
                 make: item.make,
                 id: item.id
               }
    }))
}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:34:36.463

根据[API](http://api.jqueryui.com/autocomplete/#option-source)文档：

> 数组：数组可用于本地数据。有两种支持的格式： ...
> 
> 具有**标签**和**值**属性的对象数组： [ { label: "Choice1", value: "value1" }, ... ]

因此，它要求它们像这样专门命名。

# java - EJB Session Bean / Client Hibernate Session 交互？

> ID：15908250
> 
> 赞同：0
> 
> 时间：2013-04-09T17:14:13.807
> 
> 标签：java, hibernate, jakarta-ee, servlets, ejb

在一个学校项目中，我们正在使用一个 EJB 会话 Bean，这个 EJB 提供简单的服务，例如添加、删除、修改、findAll、findbyId。此类方法是使用 hibernate 4.0 实现的（添加 -> saveOrUpdate，修改 -> saveOrUpdate...）并且可用于客户端

我有两个类：游戏（id、描述、类别）和类别（id、标题）。一个类别也有一组游戏。id 是使用身份生成器生成的。使用的数据库是mysql。

在客户端中，应用程序用户使用表单来填写有关游戏的信息（描述和类别）在控制器中，我使用 findById 方法获取用户选择的类别，然后使用该类别创建一个新游戏并我保存它（使用 SaveOrUpdate）

我注意到的第一个问题：在 EJB 中正确生成了 id，并且修改了传递的游戏，但是在客户端中，游戏没有 id（我猜在客户端和 EJB 之间传递对象不是通过引用）可以有人确认吗？

第二个问题：当游戏保存时，我尝试将此游戏添加到类别集并更新此类别（也使用 saveOrUpdate）。我得到异常 org.hibernate.NonUniqueObjectException: 一个具有相同标识符值的不同对象已与我不理解的会话相关联

谁能帮我 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:31:23.847

对于第一个问题，听起来 ID 没有被发送回客户端，或者与控制器一起存储。您可以通过将其添加到 URL 将其发送回客户端，即在客户端调用的返回中添加“？id =”+ newGameId

有了这个，您可以使用 id 字段的 setter 和 getter 将值填充回控制器；

```
long id; 
```

# objective-c - 为什么不需要取消引用 NSString 指针？

> ID：15908251
> 
> 赞同：7
> 
> 时间：2013-04-09T17:14:14.947
> 
> 标签：objective-c, c, nsstring

在示例中

```
NSString *message = @"Hello";
message = @"World"; 
```

如果 message 只是一个指针，为什么我不需要明确地说 message 中的内容现在等于 string 或`*message = @"World";`类似于 C 中的内容？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T17:47:52.357

**免责声明**

下面的讨论给出了一个关于为什么在 Objective-C 中从不取消引用指向对象的指针的一般概念。然而，关于`NSString`文字的具体情况，这不是现实中发生的事情。虽然下面描述的结构仍然是合理的并且它可能以这种方式工作，但实际发生的是字符串文字的空间是在编译时分配的，并且您可以取回它的地址。这对于字符串文字来说是正确的，因为它们是不可变的和恒定的。因此，为了提高效率，每个文字只分配一次。

事实上

```
NSString * a = @"Hello";
NSString * b = @"Hello";
NSLog(@"%@ %p", a, a); // Hello 0x1f4958
NSLog(@"%@ %p", b, b); // Hello 0x1f4958 
```

* * *

**原始答案**

因为它会被翻译成

```
message = [[NSString alloc] initWithUTF8String:"Hello"]]; 
```

这将归结为

```
message = objc_msgSend(objc_msgSend(objc_getClass("NSString"), @selector(alloc)), @selector(initWithUTF8String:), "Hello"); 
```

现在，如果我们看一下签名`objc_msgSend`

```
id objc_msgSend(id theReceiver, SEL theSelector, ...) 
```

我们看到该方法返回一个`id`类型，在 Objective-C 中是对象类型。但`id`实际上是如何定义的？

```
typedef struct objc_object {
    Class isa;
} *id; 
```

`id`被定义为指向结构的指针`objc_object`。

所以最终`@"string"`将在一个函数调用中进行转换，该函数调用将产生一个指向对象的指针（即一个`objc_object`结构，如果你愿意的话），这正是你需要分配给`message`.

底线，**您分配指针，而不是对象**。

为了更好地阐明最后一个概念，请考虑这个

```
NSMutableString * a = [NSMutableString stringWithString:@"hello"];
NSMutableString * b = a;
[a setString:@"hola"];
NSLog(@"%@", a); // "hola"
NSLog(@"%@", b); // "hola" 
```

如果您正在分配对象，`b`则将是 的副本，`a`并且任何进一步的修改`a`都不会影响`b`.

相反，你得到的是`a`两个`b`指向堆中同一个对象的指针。

# rendering - maxscript 滑块，读取值

> ID：15908253
> 
> 赞同：3
> 
> 时间：2013-04-09T17:14:16.577
> 
> 标签：rendering, maxscript

我有两个滑块，我需要在渲染中使用他的值...

定义：

```
slider maximum  "xxxx" orient:#horizontal  type:#integer range:[0,10,10]
slider minimum  "xxxx" orient:#horizontal  type:#integer range:[0,10,0] 
```

利用：

```
myanim = render camera:$Camera001 fromframe:minimum.val*30 toframe:maximum.val*30 outputfile:myoutput 
```

我需要使用滑块中的值...我尝试使用 .val、.value 但编译器说“它未定义”。

感谢您的回答

* * *

我解决了它，它：

```
myanim = render camera:$Camera001 fromframe:(minimum.value*30) toframe:(maximum.value*30) outputfile:myoutput 
```

# c++ - 在 xcode 中构建错误

> ID：15908256
> 
> 赞同：0
> 
> 时间：2013-04-09T17:14:29.287
> 
> 标签：c++, xcode, build, linker

我有一个主要功能，如下所示：

```
#include <vector>
#include "mins_ndim.h"
#include "ObjectiveFunction.h"

int main (int argc, char * const argv[]) {

  ObjectiveFunction objective;
  Frprmn<ObjectiveFunction> frprmn(objective);
  std::vector<double> p(2);
  p[0]=7; p[1]=3;
  frprmn.eat();
} 
```

但这给了我错误：

```
Undefined symbols:
  "Frprmn<ObjectiveFunction>::eat()", referenced from:
      _main in main.o
ld: symbol(s) not found
collect2: ld returned 1 exit status 
```

`eat()`列在 Frprmn 的结构定义中`mins_ndim.h`并定义在`mins_ndim.cpp`. 如果我在其中定义它，`mins_ndim.h`那么我不会收到此错误。我认为这与链接有关，但我不知道如何让 xcode 对其进行排序？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:17:53.187

类模板的成员函数的定义在使用时必须对编译器可见。当编译器遇到`frprmn.eat();`它没有看到的实现`eat`（它只看到了中的声明`mins_ndim.h`），因此无法生成适当的代码。

请记住，模板本质上是一段代码，编译器必须用适当的模板参数替换模板类型来实例化它。编译器需要能够看到 的实现`eat`才能将其`ObjectiveFunction`作为模板参数生成。

出于这个原因，通常的做法是在头文件中实现函数模板或类模板的成员函数。

如果您想将类模板的定义与其实现分开，另一种方法是在头文件的*底部包含实现文件。*这颠倒了典型的包含方法。为了更清楚地说明这一点，通常使用`.tpp`扩展名（`t`用于模板）来命名实现文件。这使得哪些文件包含哪些文件更加明显。

# asp.net - ASP.NET MasterPage 中的链接按钮和子 Webform 数据控件创建额外的 href=""

> ID：15908257
> 
> 赞同：1
> 
> 时间：2013-04-09T17:14:33.847
> 
> 标签：asp.net, master-pages, repeater, href, linkbutton

编辑最终：以防万一其他人看到这种行为，我想解释一下我的工作。我在我的母版页上为下面描述的网络表单使用了占位符。我在母版页 OnInit 事件的占位符中添加了一个服务器控件。通过排除过程，我发现只有当我将此服务器控件添加到母版页时才会发生下面描述的行为。

```
titlebarPlaceHolder.Controls.Add(sctitlebar) 
```

我重新编写了母版页，不需要添加服务器控件，并且下面描述的行为消失了。我不知道是什么原因造成的。这是一个简单的服务器控件，但这是我的工作。

编辑 2：当容器是转发器控件中的表时，会发生相同的行为：

```
<asp:Repeater ID="rptAuditList" runat="server">
     <ItemTemplate>
        <tr class="odd">
           <td><asp:LinkButton ID="lnkOpenAudit" runat="server" Text='<%# Eval("auditname") %>'></asp:LinkButton> </td>
        </tr>
      </ItemTemplate>  
  </asp:Repeater> 
```

这是 HTML 输出：

```
<td><a href="" id="contentMain_rptAuditList_lnkOpenAudit_0" href="javascript:__doPostBack(&#39;ctl00$contentMain$rptAuditList$ctl00$lnkOpenAudit&#39;,&#39;&#39;)">Demo PreClose July 2012</a> </td> 
```

编辑：在我的测试中，我刚刚注意到，如果我在 MasterPage 的外部运行完全相同的控件，它可以正常工作，但如果我在 MasterPage 内运行它，它的行为方式如下所述。

我已经用Repeater、DataList 和Listview 试过了，结果总是一样的。

这是HTML：

```
<asp:ListView ID="lvwAuditList" runat="server" >
<LayoutTemplate>
<ul><li runat="server" id="itemPlaceholder"></li></ul>
</LayoutTemplate>
<ItemTemplate>
<li><asp:LinkButton ID="lnkAudit" runat="server" Text='<%# Eval("auditname") %>' >            
</asp:LinkButton></li>
</ItemTemplate>               
</asp:ListView> 
```

这是输出：

```
 <ul>
<li><a href="" id="contentMain_lvwAuditList_lnkAudit_0" href="javascript:__doPostBack(&#39;ctl00$contentMain$lvwAuditList$ctrl0$lnkAudit&#39;,&#39;&#39;)">Demo PreClose July 2012</a></li>
 <li><a id="contentMain_lvwAuditList_lnkAudit_1" href="javascript:__doPostBack(&#39;ctl00$contentMain$lvwAuditList$ctrl1$lnkAudit&#39;,&#39;&#39;)">Demo PostClose Audit June 2012</a></li>
 </ul> 
```

第一行总是有一个额外的 href="" 添加。我以前从未见过这种行为。我已经将 html 和代码简化为最基本的，但我仍然得到这个额外的 href=""。后面的代码只是设置数据源并绑定它，没有别的。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:04:44.913

如果您使用第一个列表标记作为占位符并替换后面代码中的内容，我将使用稍微不同的方法在列表标记内添加一个 ASP.NET PlaceHolder，如下所示：

```
<ul><li><asp:PlaceHolder runat="server" ID="itemPlaceholder" /></li></ul> 
```

在以非特别预期的方式使用 ASP.NET 标记时，我在响应代码中遇到了一些不寻常的伪影。这也可能导致您的问题！

# java - protobuf 序列化错误

> ID：15908268
> 
> 赞同：20
> 
> 时间：2013-04-09T17:15:13.353
> 
> 标签：java, serialization, protocol-buffers

我正在尝试使用 protobuf 序列化结构。经过几个小时试图找出我做错了什么后，我决定测试谷歌的示例，但效果不佳

我有来自谷歌的以下协议（[https://developers.google.com/protocol-buffers/docs/javatutorial](https://developers.google.com/protocol-buffers/docs/javatutorial)）：

```
package tutorial;
option java_package = "com.example.tutorial";
option java_outer_classname = "AddressBookProtos";

message Person {
    required string name = 1;
    required int32 id = 2;
    optional string email = 3;
    repeated PhoneNumber phone = 4;

    enum PhoneType {
        MOBILE = 0;
        HOME = 1;
        WORK = 2;
    }

    message PhoneNumber {
        required string number = 1;
        optional PhoneType type = 2 [default = HOME];
    }
}

message AddressBook {
    repeated Person person = 1;
} 
```

我正在尝试使用以下方法对其进行序列化：

```
Person john = Person.newBuilder()   
    .setId(1234)
    .setName("John Doe")
    .setEmail("jdoe@example.com")
    .addPhone(
        Person.PhoneNumber.newBuilder()
            .setNumber("555-4321")
            .setType(Person.PhoneType.HOME))
    .build(); 
```

> 字节[] 序列化 = john.toByteArray();

我得到“java.lang.UnsupportedOperationException：这应该被子类覆盖”。

谢谢;

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-04-09T22:05:27.287

正如 Marc 所说，Protocol Buffer 版本不匹配会给你这个确切的信息。特别是如果

*   使用 2.4.3（或更早版本）protoc.exe 将 .proto 定义转换为 java
*   您使用 2.5.0 protobuffers 库

**您将在GeneratedMessage**类的许多方法（例如 getParserForType、getUnknownFields）中收到此消息。毫无疑问，其他潜在的不匹配会导致此错误

* * *

使用**protocol buffers 2.5.0**，您**必须**使用2.5.0 版本的protoc（或windows protoc.exe）**重新生成所有java 类。**

* * *

如果您使用**2.4 版协议缓冲区**的库执行**protoc 2.5 版**生成的反向运行代码。您将收到以下消息

 **```
java.lang.VerifyError: class xxx.xxx.xx.. 
overrides final method getUnknownFields.()Lcom/google/protobuf/UnknownFieldSet; 
```**

# python - 使用我的 python 类绘图时遇到问题

> ID：15908272
> 
> 赞同：0
> 
> 时间：2013-04-09T17:15:26.527
> 
> 标签：python, tkinter

我的目标是创建一个模拟赛马的程序，我的问题是当我用 Tkinter 绘制时，我得到一个空白画布。我确定这是一些明显的错误，但我找不到。有什么帮助吗？

```
class Horse ():

    def __init__ (self, color, number, slot):
        self.xPos = 0
        self.yPos = self.xPos - 59
        self.move = 0
        self.slot = slot
        self.size = 40
        self.color = color
        self.number = number

    def horseMove (self):
        self.Erase()
        self.move= random.randint(20,80)
        self.xPos = self.xPos + self.move
        self.Draw()
        myCanvas.update()
        return self.xPos

    def Erase (self):
        myCanvas.create_rectangle (self.xPos, self.yPos, self.xPos + 75, self.yPos +    40, fill = 'white', outline ='white')

    def Draw (self):
        myCanvas.create_oval (self.xPos, self.yPos, self.xPos + 75, self.yPos + 40, fill = color)
        myCanvas.create_text (self.xPos + 35, self.yPos, text = self.number, fill = 'blue', font = ("Times","17"))
        time.sleep (0.5) 
```

这是我的课程代码

```
Horses= []
slot=0
for i in range (0,3):
    number=input("what is the horses number: ")
    color=input("what is the horses color: ")
    slot += 1
    animal=Horse(color, number, slot)
    Horses.append(animal)

import random
from tkinter import *
import time
root = Tk()
myCanvas = Canvas (root, width =1000, height=1000, background='white')
myCanvas.pack()

while True:
    for i in range (0,len(Horses)):
        animal.horseMove() 
```

这是我的主线

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:20:37.920

您的代码中有很多问题。为了解决为什么你得到一个空白画布的具体问题，这是因为你因为这条线而将马对象从屏幕上画了出来：

```
 self.yPos = self.xPos - 59 
```

`self.xPos`是 0，`self.yPos`-59 也是，但默认的顶部 y 坐标是 0，所以你正在画出屏幕。

您的代码中还有许多其他问题。最令人不安的是，你调用`time.sleep`的正是你认为的那样——它会导致你的整个程序进入休眠状态。你*永远不*应该调用`time.sleep`GUI 的主线程。

您正在（试图）在比赛的每一刻删除并重新创建对象。但是，您实际上并没有擦除任何内容，而只是将其隐藏了。您应该调用`delete`画布的方法来擦除对象。另外，您是否知道画布具有`move`可用于移动项目的方法？因此，您无需删除并重新创建它们 - 只需画一次马，然后调用`move`以在屏幕上移动它。

最后，您正在执行一个无限循环，并在该循环中调用`update`. 虽然这通常适用于这样一个简单的程序，但这是使用 Tkinter 制作动画的错误方法。一个好的经验法则是，`update`除非你知道为什么永远不应该打电话，否则你永远不应该直接打电话`update`（即使那样，这也很少是正确的做法）

您需要编写一个函数，而不是`while True`循环，将所有内容移动一次，然后安排每秒调用一次（或半秒，无论如何）。该模式看起来像这样：

```
def draw_one_frame():
    <do whatever you need to do to move each item once>
    root.after(500, self.draw_one_frame) 
```

通常你有某种“开始”函数调用它一次，然后在它导致自身被再次调用之后。通常你会有一个“停止”按钮，它调用一个函数来设置一个标志，然后你检查那个标志以最终停止动画。所以，最终版本看起来更像：

```
def start():
    running = True
    draw_one_frame()
def stop():
    running = False
def draw_one_frame():
    if running:
        <do whatever...>
        root.after(500, self.draw_one_frame) 
```

（当然，我提倡一种更 OO 风格的方法，但为了简单起见，我省略了它）

# android - Android onTouch 监听器背景颜色变化

> ID：15908274
> 
> 赞同：2
> 
> 时间：2013-04-09T17:15:27.697
> 
> 标签：android, ontouchlistener

我正在使用 onTouchListener 在用户手指向下时更改背景颜色，并在用户手指向上时更改回默认颜色。问题在于，当用户的手指向下时，背景颜色会发生变化，但如果用户不抬起手指并开始滚动，则背景颜色不会更改为默认值。请帮忙。

下面是我的代码：

```
 V.setOnTouchListener(new OnTouchListener() {
    @Override
       public boolean onTouch(View v, MotionEvent event) {
           switch(event.getAction()) {
               case MotionEvent.ACTION_DOWN:
                    V.setBackgroundColor(Color.BLUE);
                    break;
               case MotionEvent.ACTION_UP:
                    V.setBackgroundColor(Color.BLACK);
                    break;
           }
        return true;
      }
   }); 
```

我也试过返回 false 但结果是一样的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:18:56.380

您可以使用几种不同的方法。您可以查看 MotionEvent.ACTION_MOVE 并在您的 onTouch 中收到它时采取行动。您可以查看 MotionEvent.ACTION_OUTSIDE 并查看他们是否已离开您正在检查的区域。

您还可以在滚动视图上放置一个侦听器，并在它移动时更改背景。[同步 ScrollView 滚动位置 - android](https://stackoverflow.com/questions/3948934/synchronise-scrollview-scroll-positions-android)

或者，您可以使用gestureListener 并检测到它。

# java - 如何向现有的 Java Swing 程序添加登录屏幕？

> ID：15908275
> 
> 赞同：2
> 
> 时间：2013-04-09T17:15:28.813
> 
> 标签：java, swing, security, user-interface

我已经有一个非常基本的 Java Swing 程序，但我意识到我可以使用一个简单的用户名/密码登录屏幕来限制只有拥有用户名和密码的人才能访问它。

无论如何，我可以在 main 方法的开头插入一些代码，这将阻止执行超出它，直到在出现的屏幕上输入用户名和密码？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-29T13:08:10.883

这是登录对话框的示例。关闭整个程序并关闭对话框。

> 用户名：**`stackoverflow`**密码：**`stackoverflow`**

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class TestFrame extends JFrame {

    private PassWordDialog passDialog;

    public TestFrame() {
        passDialog = new PassWordDialog(this, true);
        passDialog.setVisible(true);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new TestFrame();
                frame.getContentPane().setBackground(Color.BLACK);
                frame.setTitle("Logged In");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLocationRelativeTo(null);
                frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
            }
        });
    }
}

class PassWordDialog extends JDialog {

    private final JLabel jlblUsername = new JLabel("Username");
    private final JLabel jlblPassword = new JLabel("Password");

    private final JTextField jtfUsername = new JTextField(15);
    private final JPasswordField jpfPassword = new JPasswordField();

    private final JButton jbtOk = new JButton("Login");
    private final JButton jbtCancel = new JButton("Cancel");

    private final JLabel jlblStatus = new JLabel(" ");

    public PassWordDialog() {
        this(null, true);
    }

    public PassWordDialog(final JFrame parent, boolean modal) {
        super(parent, modal);

        JPanel p3 = new JPanel(new GridLayout(2, 1));
        p3.add(jlblUsername);
        p3.add(jlblPassword);

        JPanel p4 = new JPanel(new GridLayout(2, 1));
        p4.add(jtfUsername);
        p4.add(jpfPassword);

        JPanel p1 = new JPanel();
        p1.add(p3);
        p1.add(p4);

        JPanel p2 = new JPanel();
        p2.add(jbtOk);
        p2.add(jbtCancel);

        JPanel p5 = new JPanel(new BorderLayout());
        p5.add(p2, BorderLayout.CENTER);
        p5.add(jlblStatus, BorderLayout.NORTH);
        jlblStatus.setForeground(Color.RED);
        jlblStatus.setHorizontalAlignment(SwingConstants.CENTER);

        setLayout(new BorderLayout());
        add(p1, BorderLayout.CENTER);
        add(p5, BorderLayout.SOUTH);
        pack();
        setLocationRelativeTo(null);
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);

        addWindowListener(new WindowAdapter() {  
            @Override
            public void windowClosing(WindowEvent e) {  
                System.exit(0);  
            }  
        });

        jbtOk.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if ("stackoverflow".equals(String.valueOf(jpfPassword.getPassword()))
                        && "stackoverflow".equals(jtfUsername.getText())) {
                    parent.setVisible(true);
                    setVisible(false);
                } else {
                    jlblStatus.setText("Invalid username or password");
                }
            }
        });
        jbtCancel.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                setVisible(false);
                parent.dispose();
                System.exit(0);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:08:01.143

这是非常棘手的事情（正如您可能意识到的那样），以确保有人无法回避您的身份验证。

如果您不太关心是否有人可以通过它，那么完成您正在尝试的一个简单方法是创建一个变量跟踪登录过程，并且不允许您的主线程启动 GUI 线程主应用程序，直到身份验证完成。像这样的东西会起作用：

```
public class MyApp {

    private static boolean isAuthenticated;

    public static void main( String args[] ) {
        isAuthenticated = false;
        while( !isAuthenicated ) {
            authenticateUser();
            try{ Thread.sleep( 200 ); } catch( InterruptedException ie ){ }
        }

        new JFrame();
        // finish rest of GUI code.
    }

    private static void authenticateUser(){
        dialog = new MyAuthenticationDialog();
        dialog.show();
        if( isValid( dialog.getUsername(), dialog.getPassword() )
            isAuthenticated = true;
        else 
            isAuthenticated = false;
    }
} 
```

但是，如果您关心这是否可以被逆向工程（这个例子对我来说是微不足道的），那么您将需要一些使用正确的用户名和密码作为密钥的加密值。将这些散列到一个 SHA-256 密钥中并加密该值。请注意，RE 仍然可以绕过这一点，但需要付出更多努力，特别是如果您反复检查是否可以使用用户在代码中随机提供的凭据解密该值。不要使用单个函数，否则 RE 只需要修补一个函数，他的工作很容易。归根结底，您无法控制客户端，因此没有完美的解决方案。这些是一些想法。还要通过[Java obfuscator](https://stackoverflow.com/questions/2537568/best-java-obfuscator)运行您的最终代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T17:42:35.897

执行您的`main`方法后，您可以立即将 DialogBox 与 Swing 一起使用。然后，根据代码，您可以进行验证。如果输入的值与身份验证数据（来自数据库、文件等）一致，那么您将显示您的主 UI，如果不是，也许您可​​以显示一个带有“重试”之类的对话框或关闭对话框。

[http://java.about.com/od/UsingDialogBoxes/a/How-To-Make-A-Password-Dialog-Box.htm](http://java.about.com/od/UsingDialogBoxes/a/How-To-Make-A-Password-Dialog-Box.htm)

希望它有帮助，最好的问候。

# java - JPanel 没有显示任何内容

> ID：15908277
> 
> 赞同：1
> 
> 时间：2013-04-09T17:15:34.580
> 
> 标签：java, swing, netbeans

我在 JPanel 中遇到了 JComponent 的问题，但没有显示出来。

我部分使用 Netbeans 的 Java GUI Builder 来构建 GUI。我有一个使用 GUI Builder 构建的 MainFrame 类来处理菜单项。我有一个 MainPanel 类，它位于 MainFrame 类中（在菜单栏下）。

然后我手动将另一个 JPanel 添加到该 MainPanel 中，这样我就可以再次完全控制 GUI，而 Netbeans GUI 不会打扰我。

但是，当我向该 JPanel 添加一个 JButton 时，什么都没有出现。

MainFrame.java（包括 Netbeans 代码）：

```
package gui;

import javax.swing.JFrame;

/**
 *
 * @author Frank
 */
public class MainFrame extends javax.swing.JFrame {

    /**
     * Creates new form MainFrame
     */
    public MainFrame() {
        initComponents();
        customInit();
    }

    private void customInit() {
        this.setTitle("Trading Card Game");
        this.setExtendedState(JFrame.MAXIMIZED_BOTH);
    }

    /**
     * This method is called from within the constructor to initialize the form. WARNING: Do NOT
     * modify this code. The content of this method is always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        mainPanel1 = new gui.MainPanel();
        jMenuBar1 = new javax.swing.JMenuBar();
        menuFile = new javax.swing.JMenu();
        menuFileQuit = new javax.swing.JMenuItem();
        menuPreview = new javax.swing.JMenu();
        menuPreviewStart = new javax.swing.JMenuItem();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        javax.swing.GroupLayout mainPanel1Layout = new javax.swing.GroupLayout(mainPanel1);
        mainPanel1.setLayout(mainPanel1Layout);
        mainPanel1Layout.setHorizontalGroup(
            mainPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 400, Short.MAX_VALUE)
        );
        mainPanel1Layout.setVerticalGroup(
            mainPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 279, Short.MAX_VALUE)
        );

        menuFile.setText("File");

        menuFileQuit.setText("Quit");
        menuFileQuit.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                menuFileQuitActionPerformed(evt);
            }
        });
        menuFile.add(menuFileQuit);

        jMenuBar1.add(menuFile);

        menuPreview.setText("Preview");

        menuPreviewStart.setText("Start");
        menuPreview.add(menuPreviewStart);

        jMenuBar1.add(menuPreview);

        setJMenuBar(jMenuBar1);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(mainPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(mainPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void menuFileQuitActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_menuFileQuitActionPerformed
        System.exit(0);
    }//GEN-LAST:event_menuFileQuitActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(MainFrame.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                new MainFrame().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JMenuBar jMenuBar1;
    private gui.MainPanel mainPanel1;
    private javax.swing.JMenu menuFile;
    private javax.swing.JMenuItem menuFileQuit;
    private javax.swing.JMenu menuPreview;
    private javax.swing.JMenuItem menuPreviewStart;
    // End of variables declaration//GEN-END:variables
} 
```

MainPanel.java（包括 Netbeans 代码）：

```
package gui;

import java.awt.BorderLayout;
import java.awt.Color;
import javax.swing.BorderFactory;
import javax.swing.JButton;
import model.Game;

/**
 *
 * @author Frank
 */
public class MainPanel extends javax.swing.JPanel {

    /**
     * Creates new form MainPanel
     */
    public MainPanel() {
        initComponents();
        initPanel();
    }

    private void initPanel() {
        this.setBorder(BorderFactory.createLineBorder(Color.yellow));
        this.add(new JButton("Test"), BorderLayout.CENTER);
        revalidate();
    }

    /**
     * This method is called from within the constructor to initialize the form. WARNING: Do NOT
     * modify this code. The content of this method is always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        setLayout(new java.awt.BorderLayout());
    }// </editor-fold>//GEN-END:initComponents
    // Variables declaration - do not modify//GEN-BEGIN:variables
    // End of variables declaration//GEN-END:variables
} 
```

黄色边框出现在 JPanel 周围。

任何线索为什么带有“测试”的 JButton 没有出现？

描述情况的图片（看没有按钮！）： [![没有按钮](https://i.stack.imgur.com/ibHG6.jpg)](https://i.stack.imgur.com/ibHG6.jpg)

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:31:24.780

这是因为您正在覆盖 mainPanel1 的布局。

我注释掉了这些行，`MainFrame.java`测试按钮按预期显示。

```
//        javax.swing.GroupLayout mainPanel1Layout = new javax.swing.GroupLayout(mainPanel1);
//        mainPanel1.setLayout(mainPanel1Layout);
//        mainPanel1Layout.setHorizontalGroup(
//            mainPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
//            .addGap(0, 400, Short.MAX_VALUE)
//        );
//        mainPanel1Layout.setVerticalGroup(
//            mainPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
//            .addGap(0, 279, Short.MAX_VALUE)
//        ); 
```

# actionscript-3 - 在没有调试器的情况下运行闪存应用程序的堆栈跟踪

> ID：15908282
> 
> 赞同：1
> 
> 时间：2013-04-09T17:15:52.497
> 
> 标签：actionscript-3, flash, stack-trace

我正在尝试为我的应用程序创建崩溃报告。当游戏使用调试运行时，获取堆栈跟踪很容易：它包含在崩溃中创建的错误对象中。但是在没有调试的情况下运行时，缺少此信息。

有什么方法可以获取这些信息吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T11:49:48.837

如果您在调试模式下编译，则必须通过 ExternalInterface 将参数传递给 javascript。然后您应该能够从浏览器的控制台输出中看到堆栈跟踪。

例子：

```
flash.system.Security.allowDomain(sourceDomain)
ExternalInterface.call("print", error.getStackTrace()); 
```

在 JavaScript 中应该有一个函数

```
function takeLog(string) {
    console.log("stacktrace: " + string);
} 
```

在非调试模式下，getStackTrace() 函数返回 null。

更多信息在官方文档 [ExternalInterface.call()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html#call%28%29) , [getStackTrace()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Error.html#getStackTrace%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T05:27:58.433

您可以在应用的可疑位置使用 try-catch 块。

```
try {
    ExternalInterface.call('conf', 4);
    ExternalInterface.addCallback('transcodeReqAnswer', analyseTranscodeAnswer);
} catch(er:Error) {
    debugTextField.text = er.getStackTrace();
} 
```

# objective-c - Setter 方法真的在 Obj-C 中做吗？

> ID：15908288
> 
> 赞同：0
> 
> 时间：2013-04-09T17:16:11.743
> 
> 标签：objective-c, release

这是一个setter方法的实现：

```
- (void)setCount:(NSNumber *)newCount {
    [newCount retain];
    [_count release];
    // Make the new assignment.
    _count = newCount;
} 
```

如果`retainCount`of `_count`is <=0，它如何释放？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:18:49.490

唯一可以保留计数为 0 的有效对象是`nil`. 并且发送任何消息`nil`只返回 0 而不做任何其他事情，因此这种情况已涵盖。

如果你的意思是“这怎么能与一个释放的对象一起工作”——好吧，它不能。一个被释放的对象的保留计数并不是真正的 0，因为该对象不再存在——它已经被销毁，现在只是一块内存——所以它没有任何属性。对释放的对象做任何事情都是无效的，并且会发生什么是未定义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T15:24:59.510

想象一个带有`retainCount`实例变量的类。

```
@implementation MyClass
{
   NSUInteger retainCount;
}

- (id) retain {
    retainCount++;
    return self;
}

- (void) release {
    if (retainCount > 1)
        retainCount--;
    else
        [self dealloc];
}
...
@end 
```

一旦一个对象被释放，它就死了，消失了，完成了，等等......因此，将retainCount减为0是没有意义的，因为根据定义，对象将被释放并与一个释放的对象一起工作是未定义的行为。

上面是 NSObject 的确切逻辑，但是完全不同的实现（你真的不想看到 NSObject 的*实际*实现——这很痛苦）。

* * *

混淆的另一个来源似乎是引用的含义。

```
 NSObject *foo;
 char *bar;
 NSUInteger baz; 
```

出于所有意图和目的，上述三个变量声明的行为相同[在手动保留/释放中]。

当你说 时`bar = "Hello, World!";`，你是在告诉编译器'复制包含字符串“Hello, World!”的内存地址。到名为`bar`“”的内存中。同样`foo`，只有您要复制包含该类实例的内存地址`NSObject`。

现在，`baz`可能看起来不一样了。但它确实不是，只是它包含数字，而不是地址。但是，真的，地址就是一个数字！

所以，在一个二传手::

```
- (void)setCount:(NSNumber *)newCount {
    // increment newCount's retain count
    [newCount retain];
    // decrement the _count's retain count (which may cause it to be deallocated or not)
    [_count release];
    // copy the address of the memory that holds the NSNumber instance referenced
    // by `newCount` into the instance variable `_count`.
    _count = newCount;
} 
```

该分配没有什么神奇的[在手动保留释放下]。它只是将一个数字从一个变量复制到另一个变量。对象完全不受此影响。

# css - 导航栏子菜单容器：如何通过包装处理长列表项溢出？

> ID：15908292
> 
> 赞同：0
> 
> 时间：2013-04-09T17:16:16.967
> 
> 标签：css, overflow, containers, submenu, navbar

我有一个托管博客，我正在修改模板，但是将子菜单添加到导航栏的代码直接来自这个很棒的教程：

[http://www.devinrolsen.com/pure-css-horizo​​ntal-menu/](http://www.devinrolsen.com/pure-css-horizontal-menu/)

[我还阅读了有关 Stackoverflow http://bit.ly/16KQN0M](http://bit.ly/16KQN0M)问题的答案

但如果是清除浮点数的问题，我看不到`"clear: both;"`将 HTML 放在哪里（至少，我尝试过的任何方法都没有奏效）。

并且更改`#dropnav li li`为`display: block;`也不起作用。一定有什么我错过了......

这是CSS。顶部的类与模板相关，但我会将它们保留在其中，因为它们可能相关。

```
<style type="text/css">
/* Derived from http://www.devinrolsen.com/pure-css-horizontal-menu/ */

#pagebody { position: inherit !important; width: 100%; } 
#pagebody-inner { position: inherit !important; width: 100%; } 

#alpha, #beta, #gamma, #delta {
    display: inline; 
    position: inherit !important; 
    float: left; 
    min-height: 0px; 
}

#dropnav 
{height:31px;} 

#dropnav ul
{margin:0px; padding:0px;}

#dropnav ul li
{display:inline; float:left; list-style:none; position: relative; height:31px; 
width: 175px; } 

#dropnav li a
{color:#efe1ca; font-family:'Roboto Condensed', sans-serif; font-weight:400;      
font-size:12px; }

#dropnav li a:hover
{color:#fff; text-decoration: none;}

#dropnav li ul
{margin: 0px; padding: 0px; display: none; position: absolute;  z-index: 99; top: 
31px; background-color: #f6f3cb; width: 250px;} 

#dropnav li:hover ul
{display:block; width:250px; } 

#dropnav li li
{list-style:none; display:list-item; font-size:100%;} 

#dropnav li li a
{color: #7a3535; text-decoration:underline; width: 250px; font-size: 16px; } 

#dropnav li li a:hover
{color:#000000; text-decoration:none; } 

li#main {padding: 0px;} /* Sets the padding of items in the main menu */

</style> 
```

和 HTML 标记，删除了标题：

```
<div id="main">
<div id="dropnav">
<ul>

<li class="nav-list-item"><a href="">-------</a>
  <ul id="subnav">
    <li style="width:180px;"><a href="">-------</a></li>
    <li style="width:180px;"><a href="">-------</a></li>
    <li style="width:180px;"><a href="">-------</a></li>
    <li style="width:180px;"><a href="">-------</a></li>
  </ul> 
</li>

<li class="nav-list-item"><a href="">-------</a>
  <ul id="subnav">
    <li style="width:180px;"><a href="">-------</a></li>
    <li style="width:180px;"><a href="">-------</li>
  </ul> 
</li>

</ul> 
</div>
</div> 
```

# ruby-on-rails - 安装导轨的问题

> ID：15908293
> 
> 赞同：1
> 
> 时间：2013-04-09T17:16:24.377
> 
> 标签：ruby-on-rails, ruby

我刚刚在我的mac上安装了rails。但是，当我为应用程序创建目录时，出现以下错误。

```
:~ shankey$ rails tickets
/Users/shankey/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/rubygems/dependency.rb:296:in `to_specs': Shankey Could not find 'railties' (>= 0) among 8 total gem(s) (Gem::LoadError)
    from /Users/shankey/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/rubygems/dependency.rb:307:in `to_spec'
    from /Users/shankey/.rvm/rubies/ruby-2.0.0-p0/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb:47:in `gem'
    from /Users/shankey/.rvm/rubies/ruby-2.0.0-p0/bin/rails:22:in `<main>' 
```

我是rails新手，如果我遗漏了一些明显的东西，请原谅。感谢期待。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:40:30.383

通过键入以下命令验证当前是否安装了 ruby

```
$ ruby -v
ruby 2.0.0p0 (2013-02-24 revision 39474) [x86_64-linux] 
```

你应该得到类似的输出。一次，您已验证 ruby​​ 已正确安装。然后按照命令安装rails

```
$ gem install rails 
```

一旦 gem 安装完成，此命令将需要一段时间。您可以创建新应用程序并尝试通过以下操作运行服务器

```
$ rails new demo_app
$ cd demo_app
$ rails server 
```

如果您已正确完成所有操作，您应该会看到著名的“骑在铁轨上”欢迎页面。最后，以防您遇到任何错误。只需再次发布错误消息。

# file-io - 将变量的字面值写入文件

> ID：15908300
> 
> 赞同：1
> 
> 时间：2013-04-09T17:16:53.883
> 
> 标签：file-io, tcl

我有这段令人生畏的代码：

```
exec zip -r $FULLPATH error.log [ append datetime $RECENT ".bwdb" ] [ append txt $testName  ".txt" ] [ append lancap $testName "-lan.cap" ] \
        [ append lanmcap $testName "-lan-m.cap" ] [ append wancap $testName "-wan.cap" ] [ append wanmcap $testName "-wan-m.cap" ] [ append conf $confFile ".conf" ] \
        start.txt start-lan.cap start-lan-m.cap start-wan.cap start-wan-m.cap [ append comments "comments-" $RECENT ".bwc" ] 
```

这实际上只是将一堆文件压缩在一起。我正在改变生成 zip 文件的方式（更准确地说，我在生成它们*时正在改变）。*我决定这样做的方式是将每个命令保存到一个文本文件中，然后当我需要创建它们时只需遍历文件中的每个命令。问题是我有一堆变量需要转换成文字形式。

有谁知道我如何将此命令转换为它的文字值并将其存储到文本文件中？

编辑：我也愿意听到解决同一问题的其他建议，和/或按照我建议的方式进行操作的任何优点/缺点。

Edit2：感谢所有帮助，我选择这样做：

```
set data123 "exec zip -r $FULLPATH error.log [ append datetime $RECENT \".bwdb\" ] [ append txt $testName  \".txt\" ] [ append lancap $testName \"-lan.cap\" ] \
        [ append lanmcap $testName \"-lan-m.cap\" ] [ append wancap $testName \"-wan.cap\" ] [ append wanmcap $testName \"-wan-m.cap\" ] [ append conf $confFile \".conf\" ] \
        start.txt start-lan.cap start-lan-m.cap start-wan.cap start-wan-m.cap [ append comments \"comments-\" $RECENT \".bwc\" ]"

set datafile123 "datafile123.txt"
set fileId123 [ open $datafile123 "w" ]
puts $fileId123 $data123
close $fileId123 
```

但是，当我查看生成的文件时，我看到：

```
exec zip -r /home/IOL/TR069_Certification/Results/TEST_Round99_GetRPCMethods_CDR1_20130410172812 error.log 20130410172812.bwdb20130410172812".bwdb" GetRPCMethods.txtGetRPCMethods".txt" GetRPCMethods-lan.capGetRPCMethods"-lan.cap"  GetRPCMethods-lan-m.capGetRPCMethods"-lan-m.cap" GetRPCMethods-wan.capGetRPCMethods"-wan.cap" GetRPCMethods-wan-m.capGetRPCMethods"-wan-m.cap" IOL.confIOL".conf"  start.txt start-lan.cap start-lan-m.cap start-wan.cap start-wan-m.cap comments-20130410172812.bwc"comments-"20130410172812".bwc" 
```

这似乎是在每个附加结束时制作连接字符串的第二个副本，我不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:45:46.333

为什么不那么简单的字符串？你知道一个`"`字符串可以跨越多行吗？

```
set f [open /p/t/f w]
puts $f "error.log
$datetume$RECENT.bwdb
$txt$testName.txt
$lancap$testName-lan.cap
$lanmcap$testName-lan-m.cap
$wancap$testName-wan.cap
$wanmcap$testName-$wan.cap
$conf$confFile.conf
start.txt
start-lan.cap
start-lan-m.cap
start-wan.cap
start-wan-m.cap
${comments}comments-$RECENT.bwc"
close $f 
```

**编辑**：您不应该缩进后续行，否则此缩进将显示在结果文件中。
我个人通常使用模板文件，并使用`subst`来替换变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:34:43.120

我基本上只是按照您的建议去做：将文字值写入文本文件。一种方法很简单：

```
set s ""
append s \
  error.log \n \
  $datetime $RECENT .bwdb \n \
  $txt $testName .txt \n \
  $lancap $testName -lan.cap \n \
  $lanmcap $testName -lan-m.cap \n \
  $wancap $testName -wan.cap \n \
  $wanmcap $testName -wan-m.cap \n \
  $conf $confFile .conf \n \
  start.txt \n start-lan.cap \n \
  start-lan-m.cap \n start-wan.cap \n start-wan-m.cap \n \
  $comments comments- $RECENT .bwc
set f [open /path/to/file w]
puts $f $s
close $f 
```

这将创建一个文本文件，每行一个文件名。

另一个更直接的返工可能如下所示：

```
set files [list]
lappend files \
  error.log \
  [ append datetime $RECENT ".bwdb" ] \
  [ append txt $testName  ".txt" ] \
  [ append lancap $testName "-lan.cap" ] \
  [ append lanmcap $testName "-lan-m.cap" ] \
  [ append wancap $testName "-wan.cap" ] \
  [ append wanmcap $testName "-wan-m.cap" ] \
  [ append conf $confFile ".conf" ] \
  start.txt start-lan.cap start-lan-m.cap start-wan.cap start-wan-m.cap \
  [ append comments "comments-" $RECENT ".bwc" ]
set f [open /path/to/file w]
puts $f [join $files \n]
close $f 
```

我对这种用法表示怀疑，`append`因为这里该命令似乎仅用于其副作用。`append`获取其倒数第二个参数的字符串并将它们附加到位于变量中的字符串，该变量的名称作为其第一个参数传递，返回结果字符串。而且我不喜欢在您的原始示例（以及我的第二个示例）中`append`似乎仅用于该返回值的事实。

所以可能一种更惯用的方法是使用 Tcl 的简单字符串连接方式，如下所示：

```
set files [list]
lappend files \
  error.log \
  ${datetime}${RECENT}.bwdb \
  ${txt}${testName}.txt \
  ${lancap}${testName}-lan.cap \
  ${lanmcap}${testName}-lan-m.cap \
  ${wancap}${testName}-wan.cap \
  ${wanmcap}${testName}-wan-m.cap \
  ${conf}${confFile}.conf \
  start.txt start-lan.cap start-lan-m.cap start-wan.cap start-wan-m.cap \
  ${comments}comments-${RECENT}.bwc
set f [open /path/to/file w]
puts $f [join $files \n]
close $f 
```

# javascript - jQuery Validate select on change

> ID：15908307
> 
> 赞同：1
> 
> 时间：2013-04-09T17:17:29.447
> 
> 标签：javascript, jquery, jquery-validate

我在我的表单中使用 jQuery Validate 插件，当用户选择任何选项以立即显示错误时，我需要验证选择，现在我对输入和文本区域使用“onfocusout”选项，但显然不是等待的好习惯使用选择时要集中注意力。

如果它有帮助，这是我现在用来验证我的表单的代码：

```
$('form#cars').validate({
    onfocusout: function(e){
        this.element(e);
    },
    errorElement: 'span',
    errorClass: 'error help-inline',
    highlight: function(element, errorClass, validClass){
        $(element).addClass(errorClass).removeClass(validClass);
        $(element).closest('.control-group').addClass(errorClass);
    },
    unhighlight: function(element, errorClass, validClass){
        $(element).removeClass(errorClass).addClass(validClass);
        $(element).closest('.control-group').removeClass(errorClass);
    },
    messages: {
        'vehicle_city': 'Debes especificar la cuidad donde circula tu auto.'
    }
}); 
```

有人知道做我想做的事情的方法吗？有办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:20:32.293

```
$('select').on("change", function(){
    var optionVal = $(this + " option:selected")
}); 
```

# json - 未命名的 JSON 响应

> ID：15908311
> 
> 赞同：1
> 
> 时间：2013-04-09T17:17:31.487
> 
> 标签：json, api, parsing

我正在编写一个从[http://labs.bible.org/](http://labs.bible.org/)访问圣经段落的 API，返回的 JSON 响应没有“响应”标头或任何层次结构名称。Firebug 显示我的 GET 请求以 200 状态返回，但响应选项卡始终为空。如果我直接在浏览器中输入 url，我会得到我想要的结果，但我不知道如何处理这样的 JSON。示例：[http](http://labs.bible.org/api/?passage=luke+9&formatting=full&type=json) ://labs.bible.org/api/?passage=luke+9&formatting=full&type=json 。

这就是 JSON 的样子。

```
[
    {
      "bookname": "Luke",
        "chapter": "9",
        "verse": "1",
        "text": "<t /><p class=\"bodytext\">After<n id=\"1\" /> Jesus<n id=\"2\" /> called<n id=\"3\" /> the twelve<n id=\"4\" /> together, he gave them power and authority over all demons and to cure<n id=\"5\" /> diseases,",
        "title": "The Sending of the Twelve Apostles"
    },
    {
      "bookname": "Luke",
        "chapter": "9",
        "verse": "2",
        "text": "and he sent<n id=\"1\" /> them out to proclaim<n id=\"2\" /> the kingdom of God<n id=\"3\" /> and to heal the sick.<n id=\"4\" />"
    },
    {
        "bookname": "Luke",
        "chapter": "9",
        "verse": "3",
        "text": "He<n id=\"1\" /> said to them, “Take nothing for your<n id=\"2\" /> journey &#8211; no staff,<n id=\"3\" /> no bag,<n id=\"4\" /> no bread, no money, and do not take an extra tunic.<n id=\"5\" />"
    },
    {
        "bookname": "Luke",
        "chapter": "9",
        "verse": "4",
        "text": "Whatever<n id=\"1\" /> house you enter, stay there<n id=\"2\" /> until you leave the area.<n id=\"3\" />"
    },
    {
        "bookname": "Luke",
        "chapter": "9",
        "verse": "5",
        "text": "Wherever<n id=\"1\" /> they do not receive you,<n id=\"2\" /> as you leave that town,<n id=\"3\" /> shake the dust off<n id=\"4\" /> your feet as a testimony against them.”"
    },
    {
        "bookname": "Luke",
        "chapter": "9",
        "verse": "6",
        "text": "Then<n id=\"1\" /> they departed and went throughout<n id=\"2\" /> the villages, proclaiming the good news<n id=\"3\" /> and healing people everywhere.</p>"
    },
    {
        "bookname": "Luke",
        "chapter": "9",
        "verse": "7",
        "text": "<t /><p class=\"bodytext\">Now Herod<n id=\"1\" /> the tetrarch<n id=\"2\" /> heard about everything that was happening, and he was thoroughly perplexed,<n id=\"3\" /> because some people were saying that John<n id=\"4\" /> had been raised from the dead,",
        "title": "Herod&#8217;s Confusion about Jesus"
    },
   (...)
] 
```

那么如何编写代码来访问和解析 JSON，以及如何循环遍历所有结果？

这些是我获取和解析 JSON 的函数：

```
function callApi(argument, callBack){

        var requestUrl = apiUrl+argument+type;

        try{
            var request = new XMLHttpRequest();

            request.addEventListener("readystatechange",
            function() {callBack(request);}, false);

            request.open("GET", requestUrl, true);
            request.setRequestHeader("Accept", "application/json; charset=utf-8");
            request.send();
        }//end try
        catch(exception){
            alert("Request Failed");
        }//end catch
    }//end function callApi

function parseData(request){

    if(request.readyState==4 && request.status==200){
        var data = JSON.parse(request.responseText);
        displayNames(data);
    }//end if
}// end function parseData 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:03:18.467

如果您尝试使用像这样的不同 JSON URL 会怎样：（*在末尾*`http://labs.bible.org/api/?passage=luke+9:3&type=json&callback=?` *删除`&formatting=full`和添加。）`&callback=?`*

如果你得到没有格式化标签*（所有`<HTML>`标签）*的响应，它似乎为我解析，至少在 jsFiddle 上的这个例子中：http: [//jsfiddle.net/L8Fed/2/](http://jsfiddle.net/L8Fed/2/)

**更新：**这是一个如何在这里使用 jQuery 从您的 URL 中获取 JSON 的示例：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>
$(function() {
    var json_url = "http://labs.bible.org/api/?passage=luke+9:3&type=json&callback=?";

    $.getJSON(json_url, function(json_response) { 
        for(var i = 0; i < json_response.length; i++) {
            alert(json_response[i].text);
        }
    });
});
</script> 
```

基本上，这段代码：

1.  包括[jQuery](http://jquery.com/)
2.  将 JavaScript 放入`ready`函数中*（[更多细节在这里](http://docs.jquery.com/Tutorials:Introducing_$%28document%29.ready%28%29)......）*
3.  确保调用最后包含的 API URL `&callback=?`（*出于[这个原因](https://stackoverflow.com/a/2686406/1167750)）*
4.  调用 jQuery 的`$.getJSON()`函数*（使用您的 API URL 并返回命名的响应`json_response`）*
5.  循环`json_response`并允许您获得所需的任何值。 *（而且您可能希望`alert()`在某个时候取消该功能......；）*

# ffmpeg - ffmpeg 合并来自 iPhone 的两个 mov 文件

> ID：15908328
> 
> 赞同：6
> 
> 时间：2013-04-09T17:18:06.107
> 
> 标签：ffmpeg

我正在尝试使用 ffmpeg 将 iPhone 上录制的两个视频合并到一个文件中。

我已经尝试了所有我能找到的东西，但我无法让任何东西正常工作。

我目前的线路是

```
ffmpeg -i 'concat:output.mov|capturedvideo.MOV' -vcodec copy -acodec copy output2.mov 
```

这目前行不通。最终结果需要在 iPhone 上播放。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T17:23:31.383

由于您没有转码，因此您不能像这样连接两个 mp4 容器。请参阅[此页面](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20concatenate%20%28join,%20merge%29%20media%20files)。

本质上，您必须将文件（无需转码）转换为 MPEG 传输流：

```
ffmpeg -i input1.mp4 -c copy -bsf:v h264_mp4toannexb -f mpegts intermediate1.ts
ffmpeg -i input2.mp4 -c copy -bsf:v h264_mp4toannexb -f mpegts intermediate2.ts
ffmpeg -i "concat:intermediate1.ts|intermediate2.ts" -c copy -bsf:a aac_adtstoasc output.mp4 
```

您需要最新版本的`ffmpeg`. 尝试`sudo apt-get update; sudo apt-get install ffmpeg`（在 Ubuntu Linux 上）或`brew update; brew install ffmpeg`（在 Mac OS X 上）

# perl - 如何在 perl 中使用 hash 和 getopts

> ID：15908335
> 
> 赞同：0
> 
> 时间：2013-04-09T17:18:24.647
> 
> 标签：perl

我必须`GetOptions`在哈希数组中使用。

我的要求是编写一个结合多个选项的 Perl 脚本，例如：

```
test.pl -a mango -s ripe -d <date value> 
```

或者

```
 test.pl -a apple -s sour 
```

其中`mango`, `ripe`, `apple`,`sour`等是用户输入，也用于在查询的 SQL`WHERE`子句中绑定变量`SELECT`以生成报告。

我这个代码

```
use vars qw ($opt_a $opt_s $opt_d)
Getopts('a:s:d:') 
```

现在我在写哈希时遇到了一个问题

```
my %hash = @ARGV 
```

上面的哈希定义是否正确？有没有更好的方法来使用哈希？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T21:55:49.180

不，这个哈希“定义”不正确。如果`-amango -sripe`给出命令行会发生什么？你会得到一个带有“-amango => -sripe”的哈希值。如果`-amango -s ripe`给定 @ARGV 的大小将是奇数，并会显示警告（如`Odd number of elements in hash assignment at ./x.pl line 6.`）。

您可以使用 getopts 直接创建哈希。尝试：

```
use strict;
use warnings;
use Getopt::Std;

my %opts;
getopts("a:s:d:", \%opts) or die;

while (my($k, $v) = each %opts) {
    print "$k => $v\n";
} 
```

`-amango -s ripe`使用args调用输出：

```
a => mango
s => ripe 
```

# core-data - iOS 中的 NSInternalInconsistencyException posErrorMarker 错误

> ID：15908337
> 
> 赞同：8
> 
> 时间：2013-04-09T17:18:34.070
> 
> 标签：core-data, ios6, objective-c-blocks, uicollectionview

我收到一个无法确定性地重新创建的随机错误，这使得调试很痛苦。例外是

NSInternalInconsistencyException { 行：0x1e5eb080.posErrorMarker == 1 + 1*0x1e5eb080.negError + 1*0x1fa51a40.marker 0x1f933020.negError == 274 + 1*0x1f933020.posErrorMarker + -1*0x1fb84100.f.ne 0x=b 284100.f.ne 0x=

```
> 
0CoreFoundation 0x32c1b3e7 + 162
1libobjc.A.dylib 0x3a916963 objc_exception_throw + 30
2CoreFoundation 0x32c1b307 + 106
3Foundation 0x335ce24f + 190
4Foundation 0x335d0871 + 60
5Foundation 0x335d19e9 + 624
6Foundation 0x335d9eab + 230
7UIKit 0x34e6211b + 162
8UIKit 0x34e67b9f + 26
9CoreFoundation 0x32b61acd CFArrayApplyFunction + 176
10UIKit 0x34e67bdf + 90
11CoreFoundation 0x32b61acd CFArrayApplyFunction + 176
12UIKit 0x34e67bdf + 90
13CoreFoundation 0x32b61acd CFArrayApplyFunction + 176
14UIKit 0x34e67bdf + 90
15CoreFoundation 0x32b61acd CFArrayApplyFunction + 176
16UIKit 0x34e67bdf + 90
17UIKit 0x34e67c6f + 26
18UIKit 0x34a2d769 + 732
19UIKit 0x34a78091 + 72
20UIKit 0x34e3b80d + 132
21UIKit 0x34e48e17 + 1830
22UIKit 0x34e46f37 + 7530
23MyApp 0x00093dd1 __32-[MyController requestStuff:]_block_invoke (MyController.m:123) + 298449 
```

MyController.m:123 实际上只是对我在 MyController.m 中定义的另一个名为 requestLocalStuff 的方法的调用：

```
[self requestLocalStuff]; 
```

这很奇怪，因为它似乎没有在 requestLocalStuff 中的特定行上引发异常。

关于如何调用它的一些上下文：

*   这是从网络调用返回的。我正在使用 AFNetworking。
*   进行网络调用的方法以一个块为参数，在网络调用成功返回后调用该块；因此堆栈跟踪中的 _block_invoke 。
*   requestLocalStuff 调用 CoreData 并最终使用 insertItemsAtIndexPaths 更新控制器中的 UICollectionView。但正如堆栈跟踪所示，错误似乎不是从 requestLocalStuff 中抛出的
*   由于[UICollectionView](https://stackoverflow.com/questions/13904049/assertion-failure-in-uicollectionviewdata-indexpathforitematglobalindex)中的错误，我被迫将 UICollectionViewFlowLayout 子类化以捕获导致应用程序崩溃的异常。不确定是否可以参与。

我的 UICollectionViewFlowLayout 子类：

```
-(void)prepareForCollectionViewUpdates:(NSArray *)updateItems{
  @try {
  [super prepareForCollectionViewUpdates:updateItems];
  }
  @catch (NSException *exception) {
  DDLogError(@"Error in the layout: %@", exception);
  }
  @finally {

  }
} 
```

我在[Google](https://www.google.com/search?q=posErrorMarker)上搜索了 posErrorMarker 的解释，但无济于事。有没有人知道这里可能发生了什么？

# paypal - PayPal Express Checkout - 根据位置添加邮资选项

> ID：15908348
> 
> 赞同：0
> 
> 时间：2013-04-09T17:18:51.350
> 
> 标签：paypal, express-checkout

我在我的网站上使用贝宝快速结账，它会根据客户在世界上的任何地方花费多少来添加特定的邮资金额。但是，随着最近海外邮资的增加，我希望根据客户在世界上的哪个位置增加另一个邮资金额？非常感谢史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:44:11.040

如果您使用 Express Checkout，您可以使用回调 API 来计算运费和税金，并将其正确显示在结帐页面上。您的服务器将执行计算，然后将其发送到 PayPal，以根据他们从 PayPal 帐户中选择的送货地址更新结帐页面。一些商家甚至会通过 3rd 方运输将其与其他 API 绑定，以获得准确的运输费用。您可以在第 55 页的[开发人员指南](https://www.paypalobjects.com/webstatic/en_US/developer/docs/pdf/pp_nvpapi_developerguide.pdf)中找到有关回调 API 的更多信息。[这里](https://www.x.com/developers/paypal/documentation-tools/api/callback-api-operation-nvp)也有一些信息。

# mysql - 用 .com 替换 .com/**** 忽略的 Mysql 函数

> ID：15908349
> 
> 赞同：0
> 
> 时间：2013-04-09T17:18:56.503
> 
> 标签：mysql, function

mysql中是否有一个函数可以替换说我的属性是“URL”

如果我使用替换将是

```
REPLACE(URL,".com/index" , ".com") 
```

但我希望能够用“.com”替换 .com -> “.com/*” 之后的任何其他内容有没有一种简单的方法可以使用函数来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:29:40.523

我想有很多方法可以做到这一点。这是其中之一：

```
SELECT REPLACE(URL,SUBSTRING_INDEX(URL,'.com',-1) , ""); 
```

`SUBSTRING_INDEX(URL,'.com',-1)`将返回 .com 之后的部分
然后`REPLACE`使用空字符串将其删除。

# performance - 使用 Criteria API 或 java.util.List contains() 方法？

> ID：15908351
> 
> 赞同：1
> 
> 时间：2013-04-09T17:19:04.737
> 
> 标签：performance, jpa, criteria-api, memory-efficient

让我们假设以下情况：我有两个实体类 Person 和 Comment。

```
//Person class
@Entity
public class Person extends AbstractBusinesObject{

@OneToMany(mappedby ="owner")
private List<Comment> comments;

//Comment class
@Entity
public class Comment extends AbstractBusinesObject{

@ManyToOne
private Person owner; 
```

我想从以下两种选择中了解哪种方法更好（性能，内存效率），以确定特定评论是否属于特定人。

```
public boolean isUsersComment(Person p, Comment c){
    return p.getComments().contains(c);
} 
```

或者

```
public boolean isUsersComment(Person p, Comment c){
    CriteriaBuilder cb = getEntitymanager().getCriteriaBuilder();
    CriteriaQuery<Comment> cq = cb.createQuery(Comment.class);
    Root<Comment> root = cq.from(Comment.class);
    cq.select(root).where(cb.and(cb.equal(root, c), cb.isTrue(root.in(p.getComments())));
    try{
        getEntityManager().createQuery(cq).getSingleResult();
        return true;
    } catch (NoResultException ex){
        return false;
    } catch (NoUniqueResultException ex){
        throw new IllegalStateException(message);
    }
} 
```

据我所知，criteria api 生成一个数据库查询，而第一个解决方案在集合中搜索。

谢谢您的回答。

ps：我是 Criteria API 的新手，所以我也接受修复/建议。

**编辑**

好的，我发现这是一个愚蠢的问题；正如我声明的双向关系，解决方案非常简单：

```
return c.getOwner.equals(p); 
```

无论如何，单向关系的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:18:02.120

取决于原始集合是否已经加载，不是吗？如果 Collection 被加载，那么它是一个直接的 contains() 调用，否则它可能相当于查询（Criteria 或 JPQL）会做的事情。

如果集合很大，那么我会一直进行查询（因为我不想加载整个集合）。否则我会使用 Collection.contains

# java - 变量 sc 可能尚未初始化

> ID：15908353
> 
> 赞同：1
> 
> 时间：2013-04-09T17:19:08.203
> 
> 标签：java

我已经有 2 年多没有编码了，而且非常生疏，但是在谷歌上搜索了一段时间后，我无法弄清楚我做错了什么。首先我会解释这个程序，即使它很简单。我有一个 .txt 文件，其中包含 680 个数字，每行一个数字，并试图找到范围为 000-999 的数字的频率。我相信我可以弄清楚频率部分，因为它看起来很基本，但是我无法弄清楚如何从 .t​​xt 文件中导入数字。这是我遇到的错误：

```
C:\Users\Arthur\Documents\FrequencyStraightPlay\FrequencyStraightPlay.java:17: error: variable sc might not have been initialized
        while (sc.hasNextInt()) {
               ^
1 error 
```

编码：

```
import java.io.*;
import java.util.*;

public class FrequencyStraightPlay {

public static void main(String[] args) {

    int [] rawNumbers = new int [680];
    int i = 0;

    Scanner sc;
    try {
        sc = new Scanner(new File("Numbersnospaces.txt"));
    } catch (FileNotFoundException e) {
        System.out.println("File not Found!");
    }
    while (sc.hasNextInt()) {
        rawNumbers[i++] = sc.nextInt();
    }

    System.out.println("The Raw Numbers: ");

    for (i = 0; i < 680; i++) {
        System.out.println(rawNumbers[i]);
    }

}

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T17:21:15.710

如果你 catch `FileNotFoundException`，那么`sc`就不会被初始化。

将`while`循环放在`try`块内，这样你就知道`sc`在你到达它的时候已经初始化了。

有人可能认为解决方案是在声明时初始化`sc`，`null`但这是不正确的，因为不移动块`while`内的循环，如果你抓住 a ;`try`你可能会得到 a 还是会。`NullPointerException``FileNotFoundException``sc``null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:21:27.347

您需要处理找不到文件的情况。考虑抛出异常（或返回）而不是继续代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:22:05.347

如果 try catch 块中的代码抛出异常，则 sc 的值为 null。一旦你发现异常，你不应该继续 sc.hasNextInt() 。

```
try {
        sc = new Scanner(new File("Numbersnospaces.txt"));
    } catch (FileNotFoundException e) {
        System.out.println("File not Found!");
        return; // this will remove that error/warning
    } 
```

# sql - TOAD SQL CASE 语句

> ID：15908354
> 
> 赞同：0
> 
> 时间：2013-04-09T17:19:12.580
> 
> 标签：sql, select, case, toad

我正在尝试做我认为相当复杂的案例陈述。我想要实现的是：

当 DATE+365 小于 OTHERDATE 并且等于 YETANOTHER DATE THEN 'Correct'

现在我的代码如下所示：

```
(CASE WHEN ((X2.TERMDATE + 365) < X1.LASTHIRE) IS (X1.ORIGINALHIRE) THEN 'Correct' 

WHEN ((X2.TERMDATE + 365) < X1.LASTHIRE) IS (X3.LASTHIRE) THEN 'Correct' 

WHEN ((X2.TERMDATE + 365) > X1.LASTHIRE) IS (X1.LASTHIRE) THEN 'Correct' 

ELSE 'ERROR' END) 
```

这可能吗？我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:42:14.130

我不确定，但我认为问题出在以下部分：

```
IS (X1.ORIGINALHIRE) 
```

您可能必须用这种东西替换它

```
and something = x1.originalhire 
```

# mysql - 使用标识编号系统在数据库之间映射记录

> ID：15908357
> 
> 赞同：0
> 
> 时间：2013-04-09T17:19:18.597
> 
> 标签：mysql, synchronization, replication, sync

我有 2 个数据库，一个 mySQL 数据库和一个 SQLite，它们来回同步以维护相同的数据。为了防止任何一方出现重复，我正在考虑为记录设置一个识别编号系统，但我不确定我将如何去做？

我需要以某种方式为两个数据库上的记录创建一个唯一 ID，例如：

mySQL ===> 数据 = 1, 5 id=???

sqLITE===> 数据 = 1, 5 id=???

我需要相同的 ID，所以当我同步时它不会转移到另一个数据库。

我想到的另一种方法是在数据库中的 2 列之间创建一个哈希，如果相同的数据在另一台服务器上，那么它不会同步该数据记录。

在我的情况下，使用数据库表的列作为唯一标识符是不合适的。

我真的不知道该怎么做，所以任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:39:43.487

我理解这个问题的方式是，您需要以某种方式确定两个不同 SQL 数据库中的两行是否相同，或者是因为它们是独立创建的，或者是因为较早的同步。

我认为您使用哈希值的想法很好。它应该可以解决问题。但是，您也可以只连接字符串中的列值并获得相同的结果，如果您有多个数据列会变得模棱两可（“12-2”和“1-12”是然后不同）

但是您仍然需要发送生成的哈希值或所有行的连接字符串才能同步。也许跟踪已经同步的行是有意义的？但是，如果发生行数据值的更新，您可能需要取消跟踪它们。

我不确定这个答案是否对您有帮助，因为这个问题留下了许多值得猜测的地方。我可以建议更清楚地说明您要达到的目标吗？

# android - 添加 setOnTouchListener 后 Webview 不滚动

> ID：15908362
> 
> 赞同：4
> 
> 时间：2013-04-09T17:19:32.350
> 
> 标签：android, uiwebview, webview, scroll

我有一个带有以下代码的网络视图：

```
WebSettings webSettings = webView.getSettings();
    webSettings.setLayoutAlgorithm(LayoutAlgorithm.SINGLE_COLUMN);
    webSettings.setSavePassword(false);
    webSettings.setSaveFormData(false);
    webSettings.setSupportZoom(false);
    webView.setBackgroundColor(0);
     webView.loadDataWithBaseURL(null, text, "text/html", "UTF-8", null);
webView.setOnTouchListener(onTouchListener);
webView.setVerticalScrollBarEnabled(true); 
```

如果我对此发表评论`webView.setOnTouchListener(onTouchListener);`，那么 webview 将滚动，但如果我添加它，那么 webview 将不会滚动，为什么会这样？

**编辑**

我的听众

```
OnTouchListener onTouchListener = new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {

        int action = event.getAction();
        if (action == MotionEvent.ACTION_UP) {
        //do something
        }

        return false;
    }
    }; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-09T17:25:56.420

你的`onTouchListener`变量引用了一个总是返回的实现`true`？
从 [http://developer.android.com/reference/android/view/View.OnTouchListener.html](http://developer.android.com/reference/android/view/View.OnTouchListener.html)
的文档中，如果侦听器已经消费了事件，则 返回
True，否则返回 false。

确保返回`false`。

# frameworks - gumbyframework：智能手机上的响应式菜单问题

> ID：15908364
> 
> 赞同：0
> 
> 时间：2013-04-09T17:19:35.977
> 
> 标签：frameworks, menu, responsive-design

我正在开发一个响应式网站，我使用 gumby 框架[http://gumbyframework.com/](http://gumbyframework.com/)

现在，当我尝试调整窗口大小并出现响应式菜单时，我单击该图标，它就可以工作了。但是，如果我尝试使用智能手机，什么都不会发生

这是我正在开发的网站[http://www.francescomigliorato.it/lachicca](http://www.francescomigliorato.it/lachicca)

任何帮助深表感谢。提前感谢，对不起我的英语

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:16:28.477

解决方案是使用jquery 1.8.3 版本。最新的gumbyframework有问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:09:18.687

我在 main.js 的第 78 行注意到你有一个 javascript 错误......我会先解决这个问题，看看会发生什么。

$('input.data').datepick({ Uncaught TypeError: Object [object Object] has no method 'datepick' showTrigger: '#calImg' });

# python - 如何重做这个 ROT13 函数

> ID：15908366
> 
> 赞同：1
> 
> 时间：2013-04-09T17:19:52.293
> 
> 标签：python, python-2.7, rot13

我知道 ROT13 有无数种方法，Python 甚至有一个内置函数，但我真的很想了解如何修改我编写的代码。当我在我的编辑器中测试它时它工作正常（保留空格、标点符号和大小写），但在我的网页中不起作用。有人告诉我，我只是将字符打印出来，而不是将它们复制到结果字符串中。我已经玩了好几个小时了，但还没有弄清楚如何操纵它来合并一个 return 语句。

抱歉，如果这是一个愚蠢的问题 - 我是新手 :) 非常感谢任何帮助。

```
dictionary = {'a':'n', 'b':'o', 'c':'p',
             'd':'q', 'e':'r', 'f':'s',
             'g':'t','h':'u','i':'v',
             'j':'w', 'k':'x','l':'y',
             'm':'z','n':'a','o':'b',
             'p':'c','q':'d','r':'e',
             's':'f','t':'g','u':'h',
             'v':'i', 'w':'j','x':'k',
             'y':'l','z':'m'}

def rot(xy):

    for c in xy:

        if c.islower():
            print dictionary.get(c),

        if c.isupper():
            c = c.lower()
            result = dictionary.get(c)
            print result.capitalize(),

        if c not in dictionary:
            print c,

    return rot 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:29:02.993

正如您自己编写的那样，您正在打印结果。打印到标准输出在 Web 应用程序中不起作用，因为它们通常使用协议（unix 套接字等）将数据传回 Web 服务器进程（或者您使用基于 Python 的 Web 服务器，例如 Twisted，在这种情况下标准输出将转到您开始该过程的控制台）。

因此，再次在您编写时，您需要修改函数以*返回*值而不是*打印*它。有无数种方法可以做到这一点，最简单的就是用一个`StringIO`对象替换标准输出：

```
from StringIO import StringIO

def rot(xy):
    rot = StringIO()
    for c in xy:

        if c.islower():
            print >>rot, dictionary.get(c),

        if c.isupper():
            c = c.lower()
            result = dictionary.get(c)
            print >>rot, result.capitalize(),

        if c not in dictionary:
            print >>rot, c,

    return rot.getvalue() 
```

一种更基本的方法是将输出存储在列表中：

```
def rot(xy):
    rot = []
    for c in xy:

        if c.islower():
            rot.append(dictionary.get(c))

        if c.isupper():
            c = c.lower()
            result = dictionary.get(c)
            rot.append(result.capitalize())

        if c not in dictionary:
            rot.append(c)

    return ''.join(rot) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:25:28.440

您只是在打印出价值，而不是在腐烂。实际上，您正在返回函数本身，这根本不对。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:06:59.837

```
dictionary = {'a':'n', 'b':'o', 'c':'p',
             'd':'q', 'e':'r', 'f':'s',
             'g':'t','h':'u','i':'v',
             'j':'w', 'k':'x','l':'y',
             'm':'z','n':'a','o':'b',
             'p':'c','q':'d','r':'e',
             's':'f','t':'g','u':'h',
             'v':'i', 'w':'j','x':'k',
             'y':'l','z':'m'}

def rot(xy):
    rot13 = ''
    for c in xy:
        if c.islower():
            rot13 += dictionary.get(c)
        if c.isupper():
            c = c.lower()
            rot13 += dictionary.get(c).capitalize()
        if c not in dictionary:
            rot13 += c
    print "ROTTED: ", rot13  
    return rot13 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T19:56:16.880

```
#!/usr/bin/env python
import string

# Create alpha using 'string.ascii_uppercase' and 'string.ascii_lowercase' methods.
# Create rotated 13 using list/array positioning
# Create translation table using string.maketrans()
# Use translation table using string.translate()

# Get the alpha
alphaUpper=string.ascii_uppercase
rotatedUpper=alphaUpper[-13:] + alphaUpper[:-13]

alphaLower=string.ascii_lowercase
rotatedLower=alphaLower[-13:] + alphaLower[:-13]

combinedOriginal=alphaLower + alphaUpper
combinedRotated=rotatedLower + rotatedUpper

print combinedOriginal
print combinedRotated

translation_table = string.maketrans( combinedOriginal, combinedRotated )

message="This is the original message."

print message.translate(translation_table)
print message.translate(translation_table).translate(translation_table) 
```

运行脚本将产生：

```
$ ./rot.py 
abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ
nopqrstuvwxyzabcdefghijklmNOPQRSTUVWXYZABCDEFGHIJKLM
Guvf vf gur bevtvany zrffntr.
This is the original message. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-13T16:28:14.800

```
alphabets = ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']
c_alphabets = []
for i in alphabets:
   c_alphabets.append(i.capitalize())
def rot13(s):
    out_string=''
    for i in s:
        if i in alphabets:
            j = alphabets[(alphabets.index(i) + 13) % 26]
            out_string += j
        elif i in c_alphabets:
            j = c_alphabets[(c_alphabets.index(i) + 13) % 26]
            out_string += j
        else:
            out_string += i
    return out_string 
```

# php - 在 Wordpress 中应用 Pretty Permalinks 后如何从 URL 更改 GET 参数的显示？

> ID：15908367
> 
> 赞同：0
> 
> 时间：2013-04-09T17:19:53.513
> 
> 标签：php, wordpress, .htaccess, url, permalinks

我的 wordpress 安装中有一个页面的“漂亮的永久链接”，并且我有一个带有这样的 URL 的页面。

```
http://my-domain.com/bklorito/pedido-exitoso/ 
```

但是，通过与其他插件（WP-e-commerce）的交互，为了使页面正常工作，URL 加载如下：

```
http://my-domain.com/bklorito/pedido-exitoso/?sessionid=5801363279057 
```

（它使用 $_GET 变量进行操作）

但我被要求将其更改为：

```
http://my-domain.com/bklorito/pedido-exitoso/5801363279057/ 
```

我在 .htaccess 和 functions.php 上尝试了很多东西，但我没有成功。

我已经添加了：

```
function change_transaction_url() {
        if (isset($_GET['sessionid']) && !empty($_GET['sessionid'])) {
            $url_constructed = "pedido-exitoso/" . urlencode($_GET['sessionid'])."/";
            wp_redirect(home_url($url_constructed));
            exit();
        } else {
            $url_constructed = "pedido-exitoso/";
            wp_redirect(home_url($url_constructed));
            exit();
        }
}

add_action('template_redirect', 'change_transaction_url'); 
```

我得到了 URL 格式，但是，我得到一个 404 Not Found 错误，因为 Wordpress 不知道他的真正目标是什么。

关于我应该做什么的任何想法？

# python - matplotlib：颜色条及其文本标签

> ID：15908371
> 
> 赞同：134
> 
> 时间：2013-04-09T17:20:06.707
> 
> 标签：python, matplotlib, label, legend, colorbar

我想`colorbar`为 a 创建一个图例`heatmap`，使标签位于每个离散颜色的中心。[从这里借来的例子](https://stackoverflow.com/questions/14406214/moving-x-axis-to-the-top-of-a-plot-in-matplotlib)：

```
import matplotlib.pyplot as plt
import numpy as np
from matplotlib.colors import ListedColormap

#discrete color scheme
cMap = ListedColormap(['white', 'green', 'blue','red'])

#data
np.random.seed(42)
data = np.random.rand(4, 4)
fig, ax = plt.subplots()
heatmap = ax.pcolor(data, cmap=cMap)

#legend
cbar = plt.colorbar(heatmap)
cbar.ax.set_yticklabels(['0','1','2','>3'])
cbar.set_label('# of contacts', rotation=270)

# put the major ticks at the middle of each cell
ax.set_xticks(np.arange(data.shape[1]) + 0.5, minor=False)
ax.set_yticks(np.arange(data.shape[0]) + 0.5, minor=False)
ax.invert_yaxis()

#labels
column_labels = list('ABCD')
row_labels = list('WXYZ')
ax.set_xticklabels(column_labels, minor=False)
ax.set_yticklabels(row_labels, minor=False)

plt.show() 
```

这会生成以下图：

[![网格图](https://i.stack.imgur.com/v07GA.png)](https://i.stack.imgur.com/v07GA.png)

理想情况下，我想生成一个具有四种颜色的图例栏，并且对于每种颜色，其中心都有一个标签：`0,1,2,>3`。如何做到这一点？

* * *

## 回答 #1

> 赞同：143
> 
> 时间：2013-04-09T22:05:00.503

```
import matplotlib.pyplot as plt
import numpy as np
from matplotlib.colors import ListedColormap

#discrete color scheme
cMap = ListedColormap(['white', 'green', 'blue','red'])

#data
np.random.seed(42)
data = np.random.rand(4, 4)
fig, ax = plt.subplots()
heatmap = ax.pcolor(data, cmap=cMap)

#legend
cbar = plt.colorbar(heatmap)

cbar.ax.get_yaxis().set_ticks([])
for j, lab in enumerate(['$0$','$1$','$2$','$>3$']):
    cbar.ax.text(.5, (2 * j + 1) / 8.0, lab, ha='center', va='center')
cbar.ax.get_yaxis().labelpad = 15
cbar.ax.set_ylabel('# of contacts', rotation=270)

# put the major ticks at the middle of each cell
ax.set_xticks(np.arange(data.shape[1]) + 0.5, minor=False)
ax.set_yticks(np.arange(data.shape[0]) + 0.5, minor=False)
ax.invert_yaxis()

#labels
column_labels = list('ABCD')
row_labels = list('WXYZ')
ax.set_xticklabels(column_labels, minor=False)
ax.set_yticklabels(row_labels, minor=False)

plt.show() 
```

你非常亲近。一旦你有了对颜色条轴的引用，你就可以做任何你想做的事情，包括将文本标签放在中间。您可能想要使用格式以使其更明显。

![演示](https://i.stack.imgur.com/OemtT.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2019-07-24T21:11:46.607

要添加到[tacaswell 的答案](https://stackoverflow.com/a/15913419/3585557)，该`colorbar()`函数有一个可选`cax`输入，您可以使用它来传递应该在其上绘制颜色条的轴。如果您正在使用该输入，则可以使用该轴直接设置标签。

```
import matplotlib.pyplot as plt
from mpl_toolkits.axes_grid1 import make_axes_locatable

fig, ax = plt.subplots()
heatmap = ax.imshow(data)
divider = make_axes_locatable(ax)
cax = divider.append_axes('bottom', size='10%', pad=0.6)
cb = fig.colorbar(heatmap, cax=cax, orientation='horizontal')

cax.set_xlabel('data label')  # cax == cb.ax 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-05-07T16:37:06.193

这将使您添加标签并更改颜色条的刻度和标签大小：

```
clb=plt.colorbar()
clb.ax.tick_params(labelsize=8) 
clb.ax.set_title('Your Label',fontsize=8) 
```

如果您有子批次，这也可以使用：

```
plt.tight_layout()
plt.subplots_adjust(bottom=0.05)
cax = plt.axes([0.1, 0, 0.8, 0.01]) #Left,bottom, length, width
clb=plt.colorbar(cax=cax,orientation="horizontal")
clb.ax.tick_params(labelsize=8) 
clb.ax.set_title('Your Label',fontsize=8) 
```

# jscript - 为什么这个元素是“未定义的”——它显然存在

> ID：15908372
> 
> 赞同：1
> 
> 时间：2013-04-09T17:20:08.920
> 
> 标签：jscript

我在网页中遇到了一个非常奇怪的错误。这发生在 VS2008 和 VS2012 中。在下面的：

```
<div class="content_header" onclick="tierMenu(menu2,img2)">
    <img id="img2" alt="Colapse Trips" height="9" src="Images/plus.gif" width="9" />
    Travel Summary
</div> 
```

单击加号图像应该将图像更改为减号（扩展项目以显示数据）。tierMenu javascript 方法在点击时被调用，并且存在。但我收到一个错误：

> 0x800a1391 - Microsoft JScript 运行时错误：“img2”未定义

“Img2”肯定存在。页面的其他地方也有类似的代码，它们的行为方式都相同——得到相同的错误。奇怪的是，代码在生产中运行良好。它在呼唤：

```
function tierMenu(objMenu,objImage)
{
   if(objMenu && objImage)
   {
    ...
   }
} 
```

碰巧我的开发机器是 64 位 Windows 7。我无法想象这会是个问题。有任何想法吗？

**编辑添加**：工作站是 Win XP 的同事在 VS2008 上尝试过这个，问题没有出现。真的很奇怪。即使在 Visual Studio 之外运行，即直接从浏览器使用 localhost 时，我的工作站也会出现问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:37:19.140

原来这是浏览器兼容性问题。如果我将 IE9 置于兼容模式，问题就会消失。

这不是第一次兼容性让我大吃一惊。一旦发生这种奇怪的事情，我将不得不学会尝试第一件事。

感谢所有看到这个并和我一起困惑的人。

# c# - 有没有办法结合这两种方法？

> ID：15908378
> 
> 赞同：1
> 
> 时间：2013-04-09T17:20:33.193
> 
> 标签：c#, .net

我有以下两种方法：

```
class Debug
{
    static bool OutputToConsole = true;

    public static void Log(string Type, string URL, StringBuilder Parameters)
    {
        string Output = Type + ":" + new string(' ', 9 - Type.Length) + URL + " { " + Parameters.ToString() + " }";
        Trace.WriteLine(Output);
        if(OutputToConsole) Console.WriteLine(Output);
    }

    public static void Log(string Data)
    {
        string Output = "Response: " + Data;
        Trace.WriteLine(Output);
        if(OutputToConsole) Console.WriteLine(Output);
    }
} 
```

如果你会注意到，它只是`string Output`改变。

它后面的 2 行在两种方法中都是相同的。

我只是想知道是否有办法保持[DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)并将这两种方法结合起来？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:25:21.613

将公共代码重构为私有辅助函数：（Visual Studio 将通过突出显示代码的相关部分、右键单击并选择重构 -> 提取方法来为您完成所有这些工作...）

```
private static void LogHelper(string text)
{
    Trace.WriteLine(text);
    if(OutputToConsole) Console.WriteLine(text);
} 
```

（注意名称更改以确保它具有与 不同的签名`Log(string Data)`。）

然后只需从其他两个函数调用该函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T17:25:22.027

不知道这是多大的进步……

```
class Debug
{
    static bool OutputToConsole = true;

    public static void LogRequest(string type, string url, StringBuilder params)
    {
        log(type + ":" + new string(' ', 9 - type.Length) + url + " { " + params.ToString() + " }");
    }

    public static void LogResponse(string data)
    {
        log("Response: " + data);
    }

    private static void log(string msg)
    {
        Trace.WriteLine(msg);
        if(OutputToConsole) Console.WriteLine(msg);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T17:23:31.203

可能无法将这两种方法**结合起来**并从中获得任何真正的*价值，*因为`Output`生成的不同，但您可以创建一个执行实际跟踪的方法：

```
public static void Trace(string Output)
{
    Trace.WriteLine(Output);
    if(OutputToConsole) Console.WriteLine(Output);
} 
```

然后从这些方法中调用它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T17:33:06.227

如果需要，您可以使用可选参数，这有点不寻常，但很有趣：

```
public static void Log(string Data = null, string Type = null, string URL = null, StringBuilder Parameters = null)
{
    string Output = "";
    if (Data != null)
    {
        Output = "Response: " + Data;
    }
    else if (Type != null && URL != null && Parameters != null)
    {
        Output = Type + ":" + new string(' ', 9 - Type.Length) + URL + " { " + Parameters.ToString() + " }";
    }
    else
    {
        throw new ArgumentException("Provide yada yada arguments lala");
    }
    Trace.WriteLine(Output);
    if (OutputToConsole) Console.WriteLine(Output);
} 
```

像这样使用它：

```
Log(Data: "Test");
StringBuilder sb = new StringBuilder();
Log(Type: "myType", URL: "www.bla", Parameters: sb); 
```

# php - 使用 php 使用 socket_write 发送大数据包

> ID：15908380
> 
> 赞同：1
> 
> 时间：2013-04-09T17:20:46.567
> 
> 标签：php, image, networking, packets

我正在尝试将图像编码为 base64 编码并将其发送到我正在创建的 C++ 服务器。我正在使用 PHP 来做到这一点。

因此，PHP 代码是客户端，C++ 代码是监听服务器。

问题出现在大图像上；例如 70KB 图像。它在小图像上正常工作；比如5KB。

发生的错误是：警告：：`socket_write() [function.socket-write]`无法写入套接字 [0]：在数据报套接字上发送的消息大于内部消息缓冲区或其他网络限制，或者用于接收数据报的缓冲区小于数据报本身。

不把图像分成几个小包可以解决这个问题吗？

我只需要发送数据包为 1MB。

这是我正在使用的代码：

```
$con=file_get_contents("image url");
$binary_data=base64_encode($con);
$host = "192.168.35.54";
$port = 1060;
$message = $binary_data;
// No Timeout 
set_time_limit(0);
$socket = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP) or die("Could not create socket\n");
socket_connect($socket, $host, $port) or die("Could not connect to server\n");
socket_write($socket, $message, strlen($message)) or die("Could not send data to server\n"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:25:41.453

您可能会遇到许多问题。我假设您正在使用 TCP。我还假设您在一次调用 socket_write 时写入整个图像。我的第一个猜测是问题出在接收方。当您在接收端读取套接字时，不能保证一次读取就获得整个数据块。通常，在读取 TCP 套接字时，您会循环读取并以这种方式累积数据，直到您获得所有您期望的数据，或者您遇到错误。

您可以在其他 SO 帖子中看到一些示例代码：

[从套接字读取：是否保证至少获得 x 个字节？](https://stackoverflow.com/a/1251512/71074)

**编辑**

在看到这些额外的细节后，我的第一个建议是切换到 TCP。您可以通过这种方式进行一次发送，然后像上面的示例代码一样在接收端循环读取。否则，您将不得不分解数据包，并构建自己的错误检测代码以确保所有部分都到达，再加上按顺序重新组装它们的序列代码，这基本上只是复制了一堆 TCP 功能提供。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T00:44:58.370

您需要将套接字发送缓冲区设置为至少与您发送的最大 UDP 数据报一样大。

不要问我如何在 PHP 中做到这一点，但在 Sockets API 级别它是`setsockopt()`带有`SO_SNDBUF`选项的。

# azure - Azure 网站 PHP API - PUT 和 DELETE 上不允许使用 405 方法

> ID：15908381
> 
> 赞同：6
> 
> 时间：2013-04-09T17:20:47.053
> 
> 标签：azure, web-config, azure-web-app-service, http-method

我正在使用 Azure 网站构建一个简单的 PHP Web 服务，但无法让它支持 PUT 和 DELETE http 方法。假设它必须进入 web.config 文件 - 我已经尝试了一些来自互联网的选项，但它们似乎都不能正常工作。有任何想法吗？

这是当前的 web.config 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
  <system.webServer>
    <handlers>
    </handlers>
    <security>
    </security>
    <directoryBrowse enabled="false" />
    <caching>
      <profiles>
        <add extension=".php" policy="DontCache" kernelCachePolicy="DontCache" />
        <add extension=".html" policy="CacheForTimePeriod" kernelCachePolicy="CacheForTimePeriod" duration="14:00:00" />
      </profiles>
    </caching>
    <rewrite>
      <rules>
        <rule name="block favicon" stopProcessing="true">
          <match url="favicon\.ico" />
          <action type="CustomResponse" statusCode="404" subStatusCode="1"
          statusReason="The requested file favicon.ico was not found"
          statusDescription="The requested file favicon.ico was not found" />
        </rule>
        <rule name="Cols Rule" stopProcessing="true">
          <match url="^(.*)$" ignoreCase="false" />
          <conditions>
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
            <add input="{URL}" pattern="^/favicon.ico$" ignoreCase="false" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
          </conditions>
          <action type="Rewrite" url="index.php?q={R:1}" appendQueryString="true" />
        </rule>
      </rules>
    </rewrite>
    <defaultDocument>
      <files>
        <remove value="index.php" />
        <add value="index.php" />
      </files>
    </defaultDocument>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T23:23:32.637

我没有看到您在 web.config 中添加了处理程序。我没有亲自测试过，但有人建议 PUT 和 DELETE 应该与 Windows Azure 网站一起使用，但是您需要通过 web.config 在 Windows Azure 网站上正确配置它们。

以下是您可以用来设置它的简单配置：

```
<configuration>
 <system.webServer>
    <handlers>
        <remove name="PHP53_via_FastCGI" />
        <add name="PHP53_via_FastCGI" path="*.php"
               verb="GET, PUT, POST, HEAD, DELETE" 
               modules="FastCgiModule" 
               scriptProcessor="D:\Program Files (x86)\PHP\v5.3\php-cgi.exe"
               resourceType="Either" requireAccess="Script" />
    </handlers>
 </system.webServer>
</configuration> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T11:26:43.720

它不适用于 DELETE 作为最后一个选项，这是针对 Azure 上的 PHP54 修改的代码。但感谢 Avkash！

```
<handlers> 
    <remove name="PHP54_via_FastCGI" />
        <add name="PHP54_via_FastCGI" path="*.php"
               verb="GET, PUT, POST, DELETE, HEAD" 
               modules="FastCgiModule" 
               scriptProcessor="D:\Program Files (x86)\PHP\v5.4\php-cgi.exe"
               resourceType="Either" requireAccess="Script" />
    </handlers> 
```

# python - Python - 画了一个游戏板，如何给“边框”上色？

> ID：15908383
> 
> 赞同：2
> 
> 时间：2013-04-09T17:20:48.383
> 
> 标签：python, python-2.7, zelle-graphics

我创建了一个游戏板：

```
win = GraphWin ("Gameboard",500,500)
win.setCoords(0.0,0.0,10.0,10.0)
drawBoard(win)
for i in range(10):
    Line(Point(0,i),Point(10,i)).draw(win)
for x in range(10):
    Line(Point(x,0),Point(x,10)).draw(win) 
```

我有一个 10x10 的网格，其可播放范围将从 (2,2) 到 (9,9)。对于 x = 1、x = 10、y = 1 或 y = 10 的任何网格标记，我希望网格的这些部分为黑色并形成边框。我一直在向谷歌征集如何做到这一点，但我还没有找到一个似乎适用的填充选项。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-09T21:57:00.863

> 我想我可以用黑色矩形覆盖网格的这些部分，但我确信有一个更优雅的解决方案。

一个更优雅的解决方案可能是将窗口背景设置为黑色，放下一个代表实际游戏区域的白色矩形，然后仅将线条应用于该矩形：

```
from graphics import *

win = GraphWin("Gameboard", 500, 500)
win.setCoords(0, 0, 10, 10)

def drawBoard(window):
    window.setBackground("black")
    rectangle = Rectangle(Point(1, 1), Point(9, 9))
    rectangle.setFill("white")
    rectangle.draw(window)

    for i in range(1, 10):
        Line(Point(1, i), Point(9, i)).draw(window)
    for x in range(1, 10):
        Line(Point(x, 1), Point(x, 9)).draw(window)

drawBoard(win)

win.getMouse()
win.close() 
```

这为您提供了一个 8 x 8 板，而无需绘制单独的边框方块：

[![在此处输入图像描述](https://i.stack.imgur.com/wLMIh.png)](https://i.stack.imgur.com/wLMIh.png)

# django - 设置表单字段值 django

> ID：15908384
> 
> 赞同：0
> 
> 时间：2013-04-09T17:20:52.443
> 
> 标签：django, django-models, django-views

我想设置表单值..我不是在表单中显示它，而是想在我的视图中设置字段的值？

这是我的模型：

```
 class payment_detail(models.Model):
    status = (
        ('Paid','Paid'),
        ('Pending','Pending'),
    )
    id =             models.AutoField(primary_key=True)
    #ref_id =             models.CharField(max_length=32, default=_createId)

    #user = models.ForeignKey(User, editable = False)
    payment_type= models.ForeignKey(Payment_types,to_field = 'payment_types',  null=True, blank=True)

    job_post_id= models.ForeignKey(jobpost,to_field = 'job_id', null=True, blank=True)
    price= models.ForeignKey(package,to_field = 'amount',  null=True, blank=True)
    created_date =    models.DateField(("date"), default=datetime.date.today)
    payment_status =    models.CharField(max_length=255, choices=status,default='Pending')
    transaction_id =    models.CharField(max_length=255, null=True, blank=True)
    payment_date =    models.DateField(null=True, blank=True)
    email =    models.CharField(max_length=255, null=True)

    def __unicode__(self):
        #return self.user
        return unicode(self.id)
        #return self.ref_id
        return unicode(self.payment_type)
        return unicode(self.job_post_id)
        return unicode(self.price) 
        return unicode(self.created_date)
        return unicode(self.payment_status)
        return unicode(self.payment_date)
        return unicode(self.transaction_id)
        return unicode(self.email)

admin.site.register(payment_detail) 
```

我的观点：

```
def payment(request):

    if "pk" in request.session:
     pk = request.session["pk"]
     Country = request.session["country"]

    price = package.objects.filter(item_type__exact='Job' ,country__country_name__exact=Country, number_of_items__exact='1')

    if request.method == 'POST':

        entity = payment_detail()
        form = jobpostForm_detail(request.POST, instance=entity) 

        if form.is_valid():  
          #form.fields["transaction_id"] = 100
          form.save()
          #message = EmailMessage('portal/pay_email.html', 'Madeeha ', to=[form.cleaned_data['email']])
          #message.send()

          return HttpResponseRedirect('/portal/pay/mail/')
    else:
        form = jobpostForm_detail(initial={'transaction_id': "US"})

    c = {}
    c.update(csrf(request))

    return render_to_response('portal/display.html',{
        'form':form,'price':price
    },context_instance=RequestContext(request)) 
```

就像我想设置 job_location 的值并且不想以形式显示它..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:32:38.560

表格.py

```
//this is how you hide the field
class jobpostForm(ModelForm):
    def __init__(self, *args, **kwargs):
        super(jobpostForm, self).__init__(*args, **kwargs)
        self.fields['job_location'].widget = forms.HiddenInput()

    class Meta:
        model = jobpost 
```

视图.py

```
.........
if request.method == 'POST':
    entity = payment_detail(transaction_id="US") #change
    form = jobpostForm_detail(request.POST, instance=entity)

    if form.is_valid():
      #form.fields["transaction_id"] = 100
      form.save()
      #message = EmailMessage('portal/pay_email.html', 'Madeeha ', to=[form.cleaned_data['email']])
      #message.send()

      return HttpResponseRedirect('/portal/pay/mail/')
else:
    form = jobpostForm_detail()

 .................. 
```

# android - 在android中打开菜单的滑动效果

> ID：15908389
> 
> 赞同：0
> 
> 时间：2013-04-09T17:21:11.950
> 
> 标签：android, android-layout

当我们点击顶部按钮时，我想打开一个滑动菜单。请检查下图。当我单击红色标记的图像/按钮时，如何打开滑动菜单/列表项，如您在第二张图像中看到的那样。

当此菜单打开时，主窗口会滑向屏幕右侧，主屏幕的一小部分将可见。

我不确定这个菜单是否是视图列表！请帮帮我。![在此处输入图像描述](https://i.stack.imgur.com/sNuO1.png)

![在此处输入图像描述](https://i.stack.imgur.com/fTn5Z.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:28:13.393

最好的图书馆是Github 上[jfeinstein10](https://github.com/jfeinstein10/SlidingMenu)的 SlindingMenu。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:27:57.850

使用两个面板设计您的布局。可见性消失的左侧面板。然后在右上角按钮的 onClick 方法中，使左侧面板可见。您可以创建一个动画来平滑地打开左侧面板。

# android - 单击差异通知后如何打开相同的活动

> ID：15908395
> 
> 赞同：4
> 
> 时间：2013-04-09T17:21:22.910
> 
> 标签：android, notifications

我花了很多时间来解决我的问题。我在android中写了一个信使客户端。我的申请收到收入消息并发出通知。在通知栏中，我在通知项中显示每条收入消息。当单击通知项目时，它将打开一个对话活动以列出从开始到现在的所有消息。一切都很完美，但是当我单击通知栏中的另一个项目时，什么也没有发生！（它必须为另一个对话重新加载数据）。这是我发出通知的代码：

```
private void showNotification(String message, Class activity, Message messageObject) {
        //Get the Notification Service
        NotificationManager notificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
        CharSequence text =  message;//getText(R.string.service_started);
        Notification notification = new Notification(R.drawable.ic_launcher, text, System.currentTimeMillis());
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        Intent callbackIntent = new Intent(context, activity);
        if(messageObject != null)
        {
            callbackIntent.putExtra("conversation", MessageManager.getProvider().getConversation(messageObject.getConversationId()));
        }
        //callbackIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        int myUniqueValue = new Random().nextInt();
        PendingIntent contentIntent = PendingIntent.getActivity(context, myUniqueValue, callbackIntent, PendingIntent.FLAG_ONE_SHOT);
        notification.setLatestEventInfo(context, messageObject.getFrom(), text, contentIntent);
        notificationManager.notify(messageObject.getFrom(), myUniqueValue, notification);
    } 
```

这是调用 showNotification 函数的代码块

```
showNotification(message.getBody(), ConversationActivity.class, messageObject); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T04:08:34.377

尽管您努力提供唯一值，但`PendingIntent`系统会将这些 s 视为相同，因此一旦您单击一个，其余的就会变为惰性。

您需要添加一些区别于`callbackIntent`; 我建议发明一个数据 URI，其中包含对话 ID 或其他保证每个通知都不同的内容（请参阅[setData](https://developer.android.com/reference/android/content/Intent.html#setData%28android.net.Uri%29)）。

最后，我鼓励您尝试将多个通知折叠到一个图标中——您不想向用户发送垃圾邮件。请参阅[Android 设计指南中的“通知”部分](http://developer.android.com/design/patterns/notifications.html)，在“堆叠您的通知”下。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T10:59:23.190

我改变了我的代码，它工作得很好

```
private void showNotification(Context context, CharSequence contentTitle, CharSequence contentText, CharSequence notificationContent, Class activity, Conversation conversation) {
        //Get the Notification Service
        NotificationManager notificationManager = (NotificationManager)context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification notification = new Notification(R.drawable.ic_launcher, notificationContent, System.currentTimeMillis());
        notification.flags |= Notification.FLAG_AUTO_CANCEL;
        Intent callbackIntent = new Intent(context, activity);
        if(conversation != null)
        {
            callbackIntent.putExtra("conversation", conversation);
        }
        callbackIntent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
        int myUniqueValue = new Random().nextInt();
        PendingIntent contentIntent = PendingIntent.getActivity(context, myUniqueValue, callbackIntent, PendingIntent.FLAG_ONE_SHOT);
        notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
        notificationManager.notify(myUniqueValue, notification);
    } 
```

# latex - 将 mathjax 导出到乳胶

> ID：15908396
> 
> 赞同：9
> 
> 时间：2013-04-09T17:21:25.933
> 
> 标签：latex, mathjax

是否有一些工具可以将带有 mathjax 的 HTML 转换为有效的 LaTeX 文档？我知道 mathjax 已经是 LaTeX，但如果它与文本混合，那么简单地保存 HTML 文档的文本表示是行不通的。例如，下划线应该变成反斜杠 + _，当它在文本部分时，如果它在数学环境中，则应该单独放置。我的问题是，是否有办法自动执行此操作。我更喜欢 javascript 解决方案，但如果这绝对不可能，我可以使用可以从命令行调用的工具（例如 python）。

谢谢，

# node.js - Node.js module.exports 分配导致方法未定义错误

> ID：15908399
> 
> 赞同：0
> 
> 时间：2013-04-09T17:21:31.027
> 
> 标签：node.js

为了使 mongoose 设置更容易，我在 /lib 目录中创建了一个 mongoose.js 文件。它设置了 mongoose，因此消耗模块可以准备好连接等。问题是，当尝试访问 product.js 上的**mongoose.Schema**方法时，它会抛出未定义的方法。在为我自己的对象做类似的练习时，这不会发生。这是有问题的代码。

**/lib/mongoose.js（lib**文件）

```
var mongoose = require('mongoose');
mongoose.connect(process.env.PPC_API_MONGODB_URL);

var db = mongoose.connection;
db.on('error', console.error.bind(console, 'connection error:'));
db.once('open', function callback () {
  console.log('db open');
});

exports = mongoose; 
```

**/models/product.js** （消费文件）

```
var mongoose = require('../lib/mongoose.js');

var productSchema = mongoose.Schema({ // results in method undefined here
    name: String
});

exports = mongoose.model('Product', productSchema); 
```

如果我在 /lib/mongoose.js 中执行以下操作，我可以让它工作

```
exports.mongoose = mongoose; 
```

然后在 /models/product.js

```
var mongoose = require('mongoose').mongoose; 
```

但这并不干净，我根本不明白为什么第一个选项不起作用。

如果您可以向我展示我做错了什么或解释为什么第一种方法不起作用，那将被视为我赞成的已核对答案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T17:54:43.097

您不能重新分配`exports`变量，但可以使用`module.exports`

```
module.exports = mongoose; 
```

如果您想知道为什么，每个模块中的内容基本上是这样的：

```
var module = { exports: {} };
var exports = module.exports; 
```

因此，如果您将属性添加到 上`exports`，您仍然可以通过`module.exports`

```
exports.test = function () { console.log('test'); };
module.exports.test(); // outputs 'test' 
```

但是，如果您重新分配`exports`, 那么`module.exports`和`exports`指向不同的东西。

```
var module = { exports: {} };
var exports = module.exports;

exports = { test: 'test' };

console.log(exports);        // { test: 'test' }
console.log(module.exports); // {} 
```

当`require()`查找要包含的内容时，它使用`module.exports`.

# asp.net-mvc - 如何让 Unity 向服务注入对 HttpSessionState 的引用

> ID：15908400
> 
> 赞同：1
> 
> 时间：2013-04-09T17:21:32.627
> 
> 标签：asp.net-mvc, unity-container, session-state

*免责声明：我对 DI 容器有相当多的经验，但对 Unity 还是很陌生。*

我有一个 MVC 项目，它使用构造函数注入与 Unity DI 连接起来，效果很好。但是我现在有一个服务，我想将它注入到我的控制器中（可能在某些时候注入到控制器以外的地方），并且该服务需要访问 ASP.NET 会话状态。该服务的目的是管理会话中的列表，我不希望控制器中的列表机制。

我意识到我可以在使用服务之前向我的控制器可以调用的服务（和它的接口）添加一个 Setup 方法，传入对 Session 的引用，但我不喜欢这样，因为我可能想要实现使用 Session 以外的东西进行我的状态管理的服务，而且它是泄漏到我的界面中的实现细节。我也意识到我可以在我的服务中使用 HttpContext.Current 但出于多种原因我不想这样做，特别是因为它为单元测试带来的问题。

Unity 可以将 HttpSessionState 的引用注入到服务的构造函数中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:21:47.727

有几种方法可以做到这一点。最简单的可能是使用注入工厂：

```
container.RegisterType<HttpSessionState>(
    new InjectionFactory(c => { return HttpContext.Current.Session; })); 
```

然后，在图中任何对 HttpSessionState 有依赖关系的地方，给定的委托都会运行并将其从 HttpContext.Current 中拉出。

当然，这仅在您针对每个请求进行新解析时才有效。

# php - PHP 为什么我不能运行空（FALSE）代码？

> ID：15908404
> 
> 赞同：1
> 
> 时间：2013-04-09T17:21:51.520
> 
> 标签：php

我只是想确保如果您将`FALSE`其作为参数传递给 an `empty()`，它将返回`TRUE`：

```
var_dump(empty(FALSE)); 
```

但我不能。这是我得到的：

```
PHP Parse error:  syntax error, unexpected ')', expecting :: (T_PAAMAYIM_NEKUDOTAYIM) in Command line code on line 1 
```

当我在 cmd 中运行此代码时：

```
C:\>php -r "echo empty(FALSE);"; 
```

我得到了这个结果：

```
PHP Parse error:  syntax error, unexpected ')', expecting :: (T_PAAMAYIM_NEKUDOTAYIM) in Command line code on line

Parse error: syntax error, unexpected ')', expecting :: (T_PAAMAYIM_NEKUDOTAYIM) in Command line code on line 1 
```

我以为我会回声`1`或回声`0`。但事实并非如此。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:23:36.273

`empty`只允许传递命名变量。

来自[http://php.net/empty](http://php.net/empty)

> 在 PHP 5.5 之前，empty() 只支持变量；其他任何事情都会导致解析错误。换句话说，以下内容将不起作用：empty(trim($name))。相反，使用 trim($name) == false。

同样来自同一页面，

> 如果变量不存在，empty() 不会生成警告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:24:09.470

`empty`需要一个变量。你需要像这样传递一个变量：

```
$var = false;
if (empty($var)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T17:24:24.283

```
Changelog

Version    Description
5.5.0      empty() now supports expressions, rather than only variables. 
```

[http://php.net/manual/en/function.empty.php](http://php.net/manual/en/function.empty.php)

# javascript - 有条件地加载仅具有特定宽度的台式电脑（非触摸设备）的 JS 脚本

> ID：15908406
> 
> 赞同：1
> 
> 时间：2013-04-09T17:21:53.223
> 
> 标签：javascript, if-statement, touch, media

在我的网站上，我使用 JS 进行视差滚动。我想有条件地仅在 >= 1025 px 宽度的台式机上加载该 JS。我迫切需要优化和整合方面的帮助。

## 我目前拥有的

具有视差效果的部分有几个数据属性：

```
<section id="profile" class="slide" data-speed="2" data-offsetY="185" data-type="background"> 
```

这些部分还具有通过 css 设置的背景图像。

```
.slide { 
padding:0;
width:100%; 
position:relative; 
margin:0 auto; 
overflow:hidden;
}
#profile { 
background: url(../assets/backgrounds/02_profile_back.jpg) 50% 185px no-repeat fixed, #0f0f11;
height:1027px;
} 
```

### JAVASCRIPT

到目前为止我得到了什么：

*   在 $(document).ready 上执行的自定义函数 (myFunction)
*   检查 window.on('scroll resize load')
*   通过 enquire.js 执行 JS @breakpoint of 1025 px（匹配）
*   设置替代/默认行为（不匹配）
*   使用 enquire.js 的监听器。

到目前为止的代码如下：（视差脚本是：Richard Shepherd 编写，Ryan Boudreaux 修改）

```
function myFunction(){

// Cache the Window object
$window = $(window);

// Cache the Y offset and the speed of each sprite
$('[data-type]').each(function() {  
    $(this).data('offsetY', parseInt($(this).attr('data-offsetY')));
    $(this).data('Xposition', $(this).attr('data-Xposition'));
    $(this).data('speed', $(this).attr('data-speed'));
});

// For each element that has a data-type attribute
$('section[data-type="background"]').each(function(){

    // Store some variables based on where we are
    var $self = $(this),
        offsetCoords = $self.offset(),
        topOffset = offsetCoords.top;

// This is the part I'm having trouble with //
// When the window is scrolled, resized, loaded...
    $(window).on('scroll resize load',function(e){

        // Check if Screen-width is higher or equal to 1025px
        enquire.register('screen and (min-width:1025px)', {

            match : function() {

            // If this section is in view
            if ( ($window.scrollTop() + $window.height()) > (topOffset) &&
            ( (topOffset + $self.height()) > $window.scrollTop() ) ) {
            // Scroll the background at var speed
            // the yPos is a negative value because we're scrolling it UP!                              
            var yPos = -($window.scrollTop() / $self.data('speed')); 
            // If this element has a Y offset then add it on
            if ($self.data('offsetY')) {
                yPos += $self.data('offsetY');
            }
            // Put together our final background position
            var coords = '50% '+ yPos + 'px';
            // Move the background
            $self.css({ backgroundPosition: coords });
                }; // in view
        },

        unmatch : function() {
            $('#profile').css('background-position', '50% 0px');
        }

    }).listen(); // Check Screen Width

    }); // window load resize scroll

}); // each data-type
} // myFunction 
```

## 我想实现但无法弄清楚

我正在寻找一种方法来挤入另一个 if 循环，如果设备不是触摸设备，它只会执行第一个“匹配”部分。我找到`var isTouch = (('ontouchstart' in window) || !!('msmaxtouchpoints' in window.navigator));`了，但我无法弄清楚如何实现这一点，所以一切都融合在一起。

### 问题

1.  有没有办法实现“如果桌面PC具有1025px和更高宽度”的条件？
2.  是否有在移动优先结束时有条件地加载视差 JS 的最佳实践/通用解决方案？

我知道我的代码一团糟，你现在可能知道我是个菜鸟。尽管如此，我渴望学习并期待您的回复。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:46:01.847

Well you could use [yepnope](http://yepnopejs.com/) to load your JavaScript dynamically, and then use window.innerWidth to check the screen width. I'm not sure on checking specifically for a mobile device, unless you use browser user agent strings.

# java - 从 spring mvc 中的视图中从选定的会话 id 注销

> ID：15908408
> 
> 赞同：0
> 
> 时间：2013-04-09T17:21:57.380
> 
> 标签：java, spring, spring-mvc, spring-security, jstl

我不知道标题是否说明了我在寻找什么。基本上我有一个显示当前登录会话的表。我希望能够更改他们的状态并将其注销。这是 JSTL 代码：

```
<div id="users_table_div">
                <table id="box-table" style="width: 690px">
                <thead>
                    <tr>
                        <th>IP</th>
                        <th>USER NAME</th>
                        <th>LAST ACTIVITY</th>
                        <th>LOGIN STATUS</th>
                    </tr>
                </thead>
                <tbody>
                   <c:forEach var="userDetail" items="${userSessionData}">
                      <tr>
                        <td><c:out value="${userDetail.ip}"/></td>
                        <td><c:out value="${userDetail.username}"/></td>
                        <td><c:out value="${userDetail.lastActivity}"/></td>
                        <td><a href="logoutUser(<c:out value='${userDetail.sessionId}'/>)"><img src="images/sign-out.png" /></a></td>
                      </tr>
                   </c:forEach>
                </tbody>
                </table>
            </div> 
```

目前我已经在 sessionId 中设置了一个 javascript 函数，但是可能还有另一种方法可以使用 spring security MVC 通过其 sessionId 注销选定的用户。

所以从控制器，我从所有用户那里得到不同的会话数据。IP、用户名、LastActivity 和它们的 SessionId（将它们注销）

有没有很好的方法来管理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:00:15.067

这已经解决了。

以防万一其他人遇到同样的问题：

我刚刚使用从视图传递的 sessionId 在控制器中创建了另一个 @RequestMapping，如下所示：

```
<a href="<c:url value='/endsession?sessionId=${userDetail.sessionId}' />"> 
```

然后在Controller中代码非常简单：

```
@RequestMapping(value="/endsession", method = RequestMethod.GET)
public String endSession(String sessionId, Principal principal) {
    logger.info("Removing sessionID = " + sessionId);       
    sessionRegistry.getSessionInformation(sessionId).expireNow();

    return "activeusers";
} 
```

和塔拉姆：D

希望它对其他人也有帮助。

# ios - iPad Mini 上的 UIImage 渲染不清晰

> ID：15908410
> 
> 赞同：2
> 
> 时间：2013-04-09T17:22:00.033
> 
> 标签：ios, objective-c, ios6, uiscrollview, uiimage

下面的代码块在我的应用程序中用于截取 iPad mini(768 x 1024) 的当前屏幕截图：

```
UIImage *img;
UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.layer renderInContext:UIGraphicsGetCurrentContext()];
img = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
return img; 
```

在不同的视图控制器中，我展示了一个宽度为 540、高度为 290 的 UIScrollView。我在 UIImageView 中显示屏幕捕获 UIImage，我以编程方式创建了 initWithFrame，矩形宽度为 250，高度为 250。滚动视图的内容大小是 768 乘 250。

现在运行应用程序，我显示四个矩形并使用上面的代码块截取屏幕。过渡到 UIScrollView，图像不清晰（由于不清晰，一些矩形缺少边，而有些比其他矩形更厚）。有没有办法让图像更清晰？我知道图像必须从原来的 768 x 1024 缩小到 250 x 250。这可能是问题吗？如果是这样，最好的解决办法是什么？

**编辑**：

![屏幕截图](https://i.stack.imgur.com/WdPPr.png)

在我要捕获的图像的屏幕截图上方。

下面是 UIScrollView 中 UIImageView 中的 UIImage：

![在此处输入图像描述](https://i.stack.imgur.com/Hcdek.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:04:23.933

将每个坐标转换为 int，或使用 CGRectIntegral，直接在 CGRect 上执行此操作，小数点需要 AA 并使图像模糊。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:48:10.557

尝试更改 UIImageViews 的[内容模式](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/instp/UIView/contentMode)。如果你使用`UIViewContentModeScaleAspectFill`，你不应该在边缘看到任何额外的空间。

**更新**：从您发布的屏幕截图来看，这似乎只是 UIKit 中内置缩减的效果。[首先尝试使用 Core Graphics](http://vocaro.com/trevor/blog/2009/10/12/resize-a-uiimage-the-right-way/)手动缩小图像以适应。或者，您可能想要使用[CILanczosScaleTransform](https://developer.apple.com/library/ios/documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html#//apple_ref/doc/filter/ci/CILanczosScaleTransform) Core Image 过滤器（iOS 6+）之类的东西。

# wordpress - 让 Woocommerce 默认管理库存

> ID：15908411
> 
> 赞同：6
> 
> 时间：2013-04-09T17:22:04.447
> 
> 标签：wordpress, woocommerce

**是否有一个钩子可以允许在全球范围内的 woocommerce 中设置“库存”>“管理库存”复选框？**

我所有的产品都是单品数量，所以总是要记得检查它似乎很反干燥，尤其是对于其他员工。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-25T11:34:12.107

虽然这已经*很晚*了，因为你问了一个钩子：虽然似乎没有专门用于打开`Manage Stock`选项的钩子、动作或函数，但你仍然可以钩入后保存功能并以这种方式自动启用它，因为它只是一个 post_meta 值：

```
add_action('save_post', 'myWoo_savePost', 10, 2);

function myWoo_savePost($postID, $post) {
    if (isset($post->post_type) && $post->post_type == 'product') {

        update_post_meta($post->ID, '_manage_stock', 'yes');
    }
} 
```

请注意，库存水平将始终默认为 0，因此您可能还需要添加以下行：

```
update_post_meta($post->ID, '_stock', '1'); 
```

*...这会将您的库存数量更新为 1。但请注意，每次*保存产品时都会发生这种情况。

我不确定这是否会在 WooCommerce 的其他地方对更大的库存数量产生连锁反应，但是当您处理单数量商品时，我猜您可能还好。

**更新（使用 $update）：**

从 Wordpress 3.7 开始，添加了第三个参数，[`save_post`](https://developer.wordpress.org/reference/hooks/save_post/)因此您可以轻松判断它是正在创建的新帖子还是正在更新的现有帖子。*因此，您只能*在创建新帖子时触发上述功能（可以说是所需的效果）：

```
add_action('save_post_product', 'myWoo_savePost', 10, 3);

function myWoo_savePost($postID, $post, $update) {
    if (!$update) {
        //  $update is false if we're creating a new post
        update_post_meta($post->ID, '_manage_stock', 'yes');
        update_post_meta($post->ID, '_stock', '1');
    }
} 
```

*（感谢[Dylan](https://stackoverflow.com/questions/15908411/get-woocommerce-to-manage-stock-as-a-default/25485005#comment67019876_25485005)提醒有关后期类型特定保存的信息）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-31T19:59:56.550

有点晚了，但这是其他需要这样做的人的方法......我在其他地方找到了大部分代码，但我没有找到它的链接了。稍微调整了一下，这就是我最终得到的（添加到functions.php）：

```
add_action( 'admin_enqueue_scripts', 'wc_default_variation_stock_quantity' );
function wc_default_variation_stock_quantity() {
  global $pagenow, $woocommerce;

  $default_stock_quantity = 1;
  $screen = get_current_screen();

  if ( ( $pagenow == 'post-new.php' || $pagenow == 'post.php' || $pagenow == 'edit.php' ) && $screen->post_type == 'product' ) {

    ?>
<!-- uncomment this if jquery if it hasn't been included
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
-->
    <script type="text/javascript">
    jQuery(document).ready(function(){
        if ( !jQuery( '#_manage_stock' ).attr('checked') ) {
          jQuery( '#_manage_stock' ).attr('checked', 'checked');
        }
        if ( '' === jQuery( '#_stock' ).val() ) {
          jQuery( '#_stock' ).val(<?php echo $default_stock_quantity; ?>);
        }
    });
    </script>
    <?php
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-18T16:59:10.647

Woocommerce 现在有自己的挂钩来保存产品。对于一个简单的产品，它是`woocommerce_process_product_meta_simple`.

在更新元数据之前，我们应该首先检查是否`_manage_stock`为空，即复选框没有被选中，这样它只会触发尚未设置的产品。

然后切换管理库存并设置默认库存编号。

```
function manage_stock_default( $post_id ) {
    if (empty($_POST['_manage_stock'])) {
      update_post_meta($post_id, '_manage_stock', 'yes');
      update_post_meta($post_id, '_stock', '1');
    }
}
add_action( 'woocommerce_process_product_meta_simple', 'manage_stock_default'); 
```

# javascript - 使用 DC.js（crossfilter 和 d3 便利库）时遇到问题 - 条形图未显示值

> ID：15908418
> 
> 赞同：4
> 
> 时间：2013-04-09T17:22:28.493
> 
> 标签：javascript, d3.js, crossfilter, dc.js

我正在使用这个库：[Dimensional Charting](http://nickqizhu.github.io/dc.js/)来构建一些需要 CrossFilter 功能的相对标准的图表。

我一直在关注这些例子，但它们对我不起作用。

这是我的代码：

```
var dashData = crossfilter(data.report),
dataByHour = dashData.dimension(function(d){ return d3.time.hour(new Date(d.timestamp))}),
totalByHour = dataByHour.group().reduceSum(function(d) { return d.amount }),

dc.barChart("#graphTimeOverview")
    .width(990) // (optional) define chart width, :default = 200
    .height(250) // (optional) define chart height, :default = 200
    .transitionDuration(500) // (optional) define chart transition duration, :default = 500
    .margins({top: 10, right: 50, bottom: 30, left: 40})
    .dimension(dataByHour) // set dimension
    .group(totalByHour) // set group
    .elasticY(true)
    .centerBar(true)
    .gap(1)
    .x(d3.time.scale().domain([new Date(data.report[0].timestamp), new Date(data.report[(data.report.length - 1)].timestamp)]))
    .round(d3.time.hour.round)
    .xUnits(d3.time.hours)
    .renderHorizontalGridLines(true);

dc.renderAll(); 
```

我知道交叉过滤器数据工作正常，这是该组的一个示例：

```
totalByHour:

[ {key:(new Date(1361746800000)), value:6170.17},
  {key:(new Date(1361678400000)), value:3003},
  {key:(new Date(1361581200000)), value:2350.42}, 
  {key:(new Date(1361667600000)), value:1636.19},
    etc... 
] 
```

不幸的是，这一切让我得到一个空图，它似乎正确地计算了 y 轴，所以在我看来它可以读取数据，但是我从来没有看到任何条形值：

![在此处输入图像描述](https://i.stack.imgur.com/Hcj1H.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-16T15:15:37.710

也许`data.report`数组没有按时间戳排序（提供的样本未排序）。在您的代码中，您假设这些值已排序。您可以尝试使用

```
// Compute the timestamp extent
var timeExtent = d3.extent(data.report, function(d) { return d.timestamp; });

dc.barChart("#graphTimeOverview")
    // more settings here
    .x(d3.time.scale().domain(timeExtent.map(function(d) { return new Date(d); })))
    .round(d3.time.hour.round)
    .xUnits(d3.time.hours)
    .renderHorizontalGridLines(true); 
```

如果您提供 jsFiddle，则更容易说出问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:19:28.643

我几天前开始使用 dc.js，所以我不确定。但是，我认为你的代码应该进入

`d3.csv("data.csv", function(data) { //your-code };` 或 `d3.json("data.json", function(data) {//your-code};` 或 `jQuery.getJson("data.json", function(data){//your-code});`

# symfony - Symfony2中非数据库函数的模型在哪里

> ID：15908419
> 
> 赞同：2
> 
> 时间：2013-04-09T17:22:31.197
> 
> 标签：symfony, symfony1

我现在一直在使用 Symfony 1.x，并且开始掌握 2.x。从 1.x 转换到 2.x 是一项多么艰巨的任务，我相信你们中的许多人已经知道了。

我对非数据库内容的模型有疑问。

在 1.x 中，你有`/lib/model/doctrine/abc.class.php`和`/lib/model/doctrine/abcTable.class.php`。你所有的非数据库模型函数都放在 abc.class.php 中，你所有的数据库东西都放在 abcTable.class.php 中

我想添加几个 GD 函数来制作上传图像的缩略图，但我很确定在 MVC 约定中它们不应该放在控制器文件中。但是我在 Symfony2 文档中的任何地方都找不到模型文件夹或任何地方，甚至找不到非数据库内容的模型。

有人可以让我知道用于非数据库元素的“模型”的新约定和用于进入 lib/model 文件夹的自定义函数现在位于（或调用）在 Symfony2 中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:48:37.927

每个人都说这种类型的东西并没有真正的约定。您可以将方法添加到模型中，也可以创建一个单独的类来使用模型并完成所有需要完成的工作。

我个人会创建一个处理该过程的服务。从控制器获取输入，创建模型和缩略图。我不会将 gd 函数放入我的模型类中。

# python - 从python中的绘图中检索数据？

> ID：15908421
> 
> 赞同：1
> 
> 时间：2013-04-09T17:22:31.970
> 
> 标签：python, python-2.7

假设我有

`t= [0,7,10,17,23,29,31]`

`f_t= [4,3,11,19,12,9,17]`

我已经绘制了 f_t vs t。

现在通过绘制这 7 个数据点，我想检索 100 个数据点并将它们保存在一个文本文件中。我需要做什么？

请注意，我不是在询问情节的拟合；我知道两点之间的情节是线性的。

我在问什么如果我创建一个类似的数组`t=np.arange(0,31,.1)`，那么与前面的图非常吻合的 f_t 的对应数组是什么，即对于 t=0 到 t=7 之间的任何 t，f_t 将通过使用直线来确定连接 (0,4) 和 (7,3)，依此类推。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:37:18.353

您应该使用线性回归，它为您提供一个直线公式，您可以在其中掌握任意数量的点。

如果这条线更像是一条曲线，那么您应该尝试进行更高阶的多项式回归。

IE：

```
import pylab
import numpy

py_x =  [0,7,10,17,23,29,31]

py_y = [4,3,11,19,12,9,17] 

x = numpy.asarray(py_x)
y = numpy.asarray(py_y)

poly = numpy.polyfit(x,y,1) # 1 is the degree here. If you want curves, put 2, 3 or 5... 
```

poly 现在是您可以用来计算其他点的多项式。

```
for z in range(100):
    print numpy.polyval(poly,z) #this returns the interpolated f(z) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:53:19.810

该函数`np.interp`将在您的数据点之间进行线性插值：

```
f2 = np.interp(np.arange(0,31,.1), t, ft) 
```

# tinymce - 如何阻止 TinyMCE 将 HTML 实体转换回特殊字符？

> ID：15908422
> 
> 赞同：2
> 
> 时间：2013-04-09T17:22:41.303
> 
> 标签：tinymce, special-characters

当我在我的 TinyMCE 编辑器中输入`&pound;`或`&copy;`保存文本时，当我从数据库中加载文本时，它似乎变成了实际的 £ 和 © 字符。我不想要那个。当我检查我的数据库时，我看到这些符号存储为`&pound;`and `&copy;`，所以这不是存储问题。此外，如果我尝试将符号存储为`&amp;pound;`and `&amp;copy;`，那也不起作用，因为字符序列仍会转换为原始符号。

我能做些什么来解决这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:00:26.967

`&`您可以在和之间插入一个零宽度无中断空格`pound`。这样编辑器就不会将其识别为实体/字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T21:21:11.537

事实证明，我可以只对 PHP 脚本中的文本进行 htmlspecialchars() 处理，它可以正确处理输入的格式和序列。这是相当出乎意料的，但它实际上可以做正确的事情。

# php - 从远程数据库Android获取数据

> ID：15908424
> 
> 赞同：1
> 
> 时间：2013-04-09T17:22:49.893
> 
> 标签：php, android, json

我正在制作一个 Android 应用程序，我正在尝试从远程数据库中检索数据。

我的问题是如何检查查询结果是否包含数据并且不为空？

我正在使用 JSON，但我是新手。这是我的代码：

```
public class MainActivity extends Activity {

    private TextView txt;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        LinearLayout rootLayout = new LinearLayout(getApplicationContext());
        txt = new TextView(getApplicationContext());
        rootLayout.addView(txt);
        setContentView(rootLayout);

        txt.setText("Connexion...");
        txt.setText(getServerData(strURL));

    }

    public static final String strURL = "http://.../marecherche/adresse.php";

    private String getServerData(String returnString) {
        InputStream is = null;
        String result = "";

        ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
        nameValuePairs.add(new BasicNameValuePair("adresse","adr casa"));

        try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(strURL);
            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();
        }catch(Exception e){

            Log.e("log_tag", "Error in http connection " + e.toString());
        }

        try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
        }catch(Exception e){
            Log.e("log_tag", "Error converting result " + e.toString());
        }

        try{

            JSONArray jArray = new JSONArray(result);
            for(int i=0;i<jArray.length();i++){
                JSONObject json_data = jArray.getJSONObject(i);

                Log.i("log_tag","raison sociale: "+json_data.getString("raison_social")+
                        ", Adresse: "+json_data.getString("adresse")
                        );

                returnString += "\n\t" + jArray.getJSONObject(i);
            }
        }catch(JSONException e){
            Log.e("log_tag", "Error parsing data " + e.toString());
        }
        return returnString;
    }
} 
```

和 php 文件：

```
<?php
mysql_connect("localhost", "root", "passwd");
mysql_select_db("dbname");
$mots = explode(' ', $_REQUEST['adresse']);
$like = array();
foreach ($mots AS $mot) {
    $like[] = ' "%' . mysql_real_escape_string($mot) . '%" ';
}

$condition = implode(' OR adresse LIKE ', $like);

$sql = mysql_query("SELECT * FROM entreprise WHERE adresse like " . $condition);
while ($row = mysql_fetch_assoc($sql))
    $output[] = $row;
print(json_encode($output));
mysql_close();
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:36:54.367

您可以创建自己的退货来检查，*例如*：

PHP 文件：

```
if (is_array($output)) {
    print(json_encode($output));
} else 
    echo "empty";
} 
```

爪哇：

```
if (result.equals("empty")) {
    return;
}
JSONArray jArray = new JSONArray(result);
// etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:33:49.533

> 我的问题是如何检查查询结果是否包含数据并且不为空？

=>`result`在创建 JSONArray 之前检查字符串是否为空。

# visual-c++ - 有凸缺陷的例外

> ID：15908427
> 
> 赞同：0
> 
> 时间：2013-04-09T17:22:53.037
> 
> 标签：visual-c++, opencv, convexity-defects

我正在尝试从以下代码中获取凸面缺陷，但不断收到未处理的异常。我究竟做错了什么？

```
vector<Vec4i> defects;
ContourPoly = vector<Point>(contour.size());
approxPolyDP( Mat(contour), ContourPoly,20, false );
convexHull(Mat(ContourPoly), HullPoints, false, true);
// The following line wont work
convexityDefects(Mat(ContourPoly),HullPoints,defects); 
```

而 HullPoints 的 type`vector<Point>` 异常如下

```
OpenCV Error: Assertion Failed (ptnum >3) is unknown function, file ..\..\..\src\opencv\modules\imgproc\src\contours.cpp, line 1969 
```

但是使用 `vector<Point> defects;`or`vector<Vec4i> defects` 我得到以下异常

```
 OpenCV Error: Assertion Failed (hull.checkVector(1,CV_32S) is unknown function, file ..\..\..\src\opencv\modules\imgproc\src\contours.cpp, line 1971 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:29:38.253

`defects`应该`vector<Vec4i>`

从文档中：

> 每个凸面缺陷表示为 4 元素整数向量`cv::Vec4i`（`(start_index, end_index, farthest_pt_index, fixpt_depth)`aka `fixpt_depth`) 的最远轮廓点与船体之间的距离。也就是说，要获得深度的浮点值将是`fixpt_depth/256.0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-29T20:33:40.940

首先

```
vector<vector<Vec4i> > defects; 
```

应该：

```
vector<vector<Vec4i> > defects( contour.size() ); 
```

另外，在调用`convexityDefects`函数之前，检查 的大小`HullPoints`是否大于 3。

# wpf - 可以使用 UserControl 进行“简单”绑定吗？

> ID：15908430
> 
> 赞同：0
> 
> 时间：2013-04-09T17:22:59.993
> 
> 标签：wpf, binding, user-controls

我有一个用户控件，其中有一些文本块。我想将此用户控件包含到列表框（或列表视图中，以防它引起任何问题）。

当我检查输出窗口时，我没有看到任何绑定异常，但我也没有在文本块中看到任何内容。

反正有没有使这项工作？

谢谢 ：

这是我现在使用的列表框：

```
<ListBox AllowDrop="True"  Grid.Row="1" 
         Style="{StaticResource BaseListBox}" x:Name="LstEquipeDefaut">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel>
                <my:ucEquipe x:Name="ucEquipe" Grid.Row="1" Margin="5,0,5,2"/>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

这是用户控件：

```
<UserControl x:Class="ucEquipe"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
         mc:Ignorable="d"       
         d:DesignHeight="350" d:DesignWidth="180" MinWidth="180" >
<Border Style="{StaticResource UControlBorder}">
    <Grid x:Name="LayoutRoot">
        <Grid.RowDefinitions>
            <RowDefinition Height="32" />
            <RowDefinition Height="25" />
            <RowDefinition Height="35" />
            <RowDefinition Height="100" />
            <RowDefinition Height="35" />
            <RowDefinition Height="100" />
        </Grid.RowDefinitions>

        <TextBox AllowDrop="True" x:Name="TxtChiefEquipe" 
                 Style="{StaticResource BaseTextBox}" 
                 Text="{Binding Mode=OneWay,Path=chefEquipe.NomComplet}" 
                 Grid.Row="1"  />           
    </Grid>
</Border> 
```

这是我使用的对象：

```
Public Class Equipe

Public Property ID As Long = 0
Public Property Couleur As String = ""
Public Property Semaine As New Date(1900, 1, 1)
Public Property chefEquipe As Employe = Nothing

Public Property ListEquipeEmploye As New List(Of EquipeEmploye)
Public Property ListEquipeEquipement As New List(Of EquipeEquipement)

End Class 
```

对象 Employe 有一个名为 NomComplet 的属性。现在，我在列表框中手动添加了新对象以进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:04:57.927

你的`Equipe`类需要实现[`INotifyPropertyChanged`](http://msdn.microsoft.com/en-us/library/ms743695.aspx)

```
private Employe _chefEquipe;
public Employe ChefEquipe
{
    get { retun _chefEquipe; }
    set 
    {
        _chefEquipe = value;
        NotifyPropertyChanged("ChefEquipe");
    }
} 
```

对不起 C#，我不记得 VB 语法了 =)

# c++ - 光线追踪器纹理映射留下伪影

> ID：15908432
> 
> 赞同：0
> 
> 时间：2013-04-09T17:23:07.463
> 
> 标签：c++, debugging, geometry, texture-mapping, raytracing

所以我试图让 OBJ 加载在我的光线跟踪器中工作。加载 OBJ 工作正常，但我在纹理映射工作时遇到了一些麻烦。

这是我的结果的图像。它应该是一个带有彩色“经纬度”线的黑色球体，中间有一个黑点。但似乎每隔一个三角形都是黑色的。你可以在这里看到结果：

![在此处输入图像描述](https://i.stack.imgur.com/DNZb4.jpg)

我的教授说看起来法线是向后的，但我不认为是这种情况，因为形状仍在被击中 - “错误”三角形的颜色是纹理背景颜色的颜色（即. 在这种情况下为黑色）。

当我加载 OBJ 时，每个顶点都有一个与之关联的 UV 坐标。当射线击中形状时，我为获得 UV 坐标所做的工作如下：

```
T: the triangle that was hit
hp: where on the triangle the ray hit
v1,v2,v3: the vertices of the triangle, each has a UV coord UV1, UV2, UV3

find the distance to each v[i] from hp (d1,d2,d3 respectively)
find the weight of each of these (w1 = d1/(d1+d2+d3), same for d2,d3)
find the weighted UV coord: UV1/w1 + UV2/w2 + UV3/w3

find the pixel color based on this weighted coord 
```

有没有人有任何想法可能会发生什么？如果您认为这会有所帮助，我可以发布我的部分代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:40:48.577

您的 UV 坐标计算中确实存在错误（无论您的法线是否存在其他错误）。

我这么说的原因是：例如，如果你的 hp 非常接近 v1，你最终的权重 w1 会非常接近于零，当你计算 UV1/w1 时，它会趋向于 +infinity 而不是期望值紫外线1。

因此，您需要查看[重心坐标](http://en.wikipedia.org/wiki/Barycentric_coordinate_system#Interpolation_on_a_triangular_unstructured_grid)

# python - 添加 hstore 字段后如何创建迁移？（django-hstore vs. South）

> ID：15908434
> 
> 赞同：1
> 
> 时间：2013-04-09T17:23:19.730
> 
> 标签：python, django, postgresql, django-south, hstore

我在数据库中有一个现有模型。我想用一个 hstore 字段来增强它。我安装了 hstore Postgres 扩展，django-hstore 应用程序，更改了 django 项目中的相应设置：

```
SOUTH_DATABASE_ADAPTERS = {'default': 'south.db.postgresql_psycopg2'}
DATABASES = {
    'default': {
        'ENGINE': 'django_hstore.postgresql_psycopg2',
        ... 
```

我检查了 django 应用程序是否适用于新设置——确实如此。所以我将新字段添加到其中一个模型中：

```
data = hstore.DictionaryField(db_index=True) 
```

下一步：数据库迁移。在这里我迷路了。尝试为新字段创建迁移时，我得到以下信息：

```
The field 'Project.data' does not have a default specified, yet is NOT NULL.
Since you are adding this field, you MUST specify a default
value to use for existing rows. Would you like to:
 1\. Quit now, and add a default to the field in models.py
 2\. Specify a one-off value to use for existing columns now 
```

我在这里做什么？我错过了什么？在任何 django-hstore 相关文章中，我都没有找到对默认值（或 null=True）的任何引用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T17:47:23.440

如前所述，当您点击 2 时，您可以选择一个空字符串 ("") 或按照其存储方式填充该字段：

```
? The field 'MyModel.data' does not have a default specified, yet is NOT NULL.
? Since you are adding this field, you MUST specify a default
? value to use for existing rows. Would you like to:
?  1\. Quit now, and add a default to the field in models.py
?  2\. Specify a one-off value to use for existing columns now
? Please select a choice: 2
? Please enter Python code for your one-off default value.
? The datetime module is available, so you can do e.g. datetime.date.today()
>>> "foo=>bar,foo2=>bar2" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:24:34.627

当 South 尝试更新数据库中的模型并在您尝试修改的表上找到现有行时，通常会出现此消息。为了继续并在数据库上创建新字段，您必须为要迁移的表的现有行指定一个值。我通常做的事情，如果是开发阶段，我会选择 2 号选项并将值设置为 0，{} 空字典，甚至 NULL，具体取决于字段类型。

# jquery-mobile - 如何在 jQuery Mobile 中以优雅的风格动态添加标题栏

> ID：15908439
> 
> 赞同：1
> 
> 时间：2013-04-09T17:23:29.823
> 
> 标签：jquery-mobile

我的移动网站动态添加标题栏以减少代码冗余。

但是，我坚持使用 jquery 移动页面的样式标题部分。

当我看到生成的 HTML 标签时，它看起来还不错，

但它的元素没有被 jQuery Mobile 修饰。

添加内容后，我调用了

```
$(pageId).trigger('create'); 
```

你有什么想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:13:10.020

这对我有用：http: [//jsfiddle.net/emBxx/2/](http://jsfiddle.net/emBxx/2/)

**HTML：**

```
<script type="text/javascript" src="js/main.js"></script> 
```

...

```
<div data-role="page" data-theme="b">
    <header></header>
    <div data-role="content">
        <div class="content-primary">
            <br />
            <ul data-role="listview" data-filter="true">
                <li><a href="index.html">Some</a></li>
                <li><a href="index.html">random</a></li>
                <li><a href="index.html">searchable</a></li>
                <li><a href="index.html">content</a></li>
                <li><a href="index.html">(list!)</a></li>
            </ul>
        </div><!--/content-primary -->  
    </div>
    <footer></footer>
</div><!-- page end-->
<script>      
    appendJQMHeader('Injected header !'); 
    appendJQMFooter('—Injected ftr!', 'JQM 1.3.1Beta');
</script> 
```

**JS，在 js/main.js 中：**

```
function appendJQMHeader(pageTitle) {
    $('header').replaceWith(
        '<header data-role="header" data-theme="f">'+
        '<h1>'+pageTitle+'</h1>'+
        '<a href="index.html"  data-transition="slide" data-rel="back" data-icon="home" data-iconpos="notext" data-ajax="true">Home</a>'+
        '</header><!-- /header -->');
}

function appendJQMFooter(left, right) {
    $('footer').replaceWith('<footer data-role="footer" data-theme="f" class="jqm-footer"><p>&copy;'+left+'!</p><p class="jqm-version">—'+right+'</p></footer>');
} 
```

**注意：**对于 JSfiddle，它需要 ' `Framework & extension`> `No wrap - in <head>`'
对于独立版本，它可以与包含 JS 的 html 头调用 js/main.js 一起正常工作。然后 html 正文与`appendJQMHeader()`& `appendJQMFooter()`。看小提琴:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:39:04.920

我没有调用触发方法，而是执行了以下命令，它运行良好。

```
$('#pageHome').closest(":jqmData(role='page')").trigger('pagecreate'); 
```

# java - XML / JSP HTTP 500 - 在第 22 行处理 JSP 页面时发生异常 - 根本原因是什么？

> ID：15908442
> 
> 赞同：0
> 
> 时间：2013-04-09T17:23:33.303
> 
> 标签：java, xml, jsp, tomcat

InventoryReport.jsp 必须分析inventory.XML 文件，以便生成一个将列出商店中的每本书的融洽关系，为每本书生成一个警告，从数量低于指定的库存限制，列出所有从书籍开始的书籍较高的库存数量到较低的数量。

Tomcat生成的错误说：

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /inventoryReport.jsp at line 22

19: <div>
20: <ul>
21: 
22: <x:forEach var="book" select="$doc/inventory/book">
23:    
24:     <li><x:out select="$book/title" /></li>
25: </x:forEach> 
```

我试图分析这个错误，但由于我对这一切都不熟悉，所以看不到出了什么问题。

我的xml文件

```
<?xml version="1.0" encoding="utf-8"?>

<inventory>
  <book>
    <author>Pierre</author>
    <title>D&#233;veloppez vos applications web avec JRuby !</title>
    <date>Janvier 2012</date>
    <price>22</price>
    <stock>127</stock>
    <minimum>10</minimum>
  </book>
  <book>
    <author>Paul</author>
    <title>D&#233;couvrez la puissance du langage Perl</title>
    <date>Avril 2017</date>
    <price>26</price>
    <stock>74</stock>
    <minimum>10</minimum>
  </book>
  <book>
    <author>Matthieu</author>
    <title>Apprenez &#224; programmer en C</title>
    <date>Novembre 2009</date>
    <price>25</price>
    <stock>19</stock>
    <minimum>20</minimum>
  </book>
  <book>
    <author>Matthieu</author>
    <title>Concevez votre site web avec PHP et MySQL</title>
    <date>Mars 2010</date>
    <price>30</price>
    <stock>7</stock>
    <minimum>20</minimum>
  </book>
  <book>
    <author>Cysboy</author>
    <title>La programmation en Java</title>
    <date>Septembre 2010</date>
    <price>29</price>
    <stock>2000</stock>
    <minimum>20</minimum>
  </book>
</inventory> 
```

我的 .jsp 文件

```
<%@ page pageEncoding="UTF-8" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/xml" prefix="x" %>

<!DOCTYPE html>
<html>
  <head>
     <meta charset="utf-8" />
     <title>Inventory report</title>
  </head>
  <body>

<c:import url="inventory.xml" var="documentXML" />

<x:parse var="doc" doc="${documentXML}" />

<p><b>List of all the books :</b></p>
<div>
<ul>

<x:forEach var="book" select="$doc/inventory/book">

    <li><x:out select="$book/title" /></li>
</x:forEach>
</ul>
</div>

<p><b>List of books that needs re-stock :</b></p>
<div>
<ul>

<x:forEach var="book" select="$doc/inventory/book[stock < minimum]">

    <li><x:out select="$book/title" /> : <x:out select="$book/stock" /> 
    books in stock (limit before warning : <x:out select="$book/minimum" />)</li>
</x:forEach>
</ul>
</div>

<p><b>List of books classified by stock :</b></p>

  </body>
</html> 
```

![在此处输入图像描述](https://i.stack.imgur.com/E8uNk.jpg)

我尝试了一个更简单的练习（见下面的代码）但是tomcat不断返回这个错误：

```
org.apache.jasper.JasperException: An exception occurred processing JSP page /inventoryReport.jsp at line 17

14: <c:import url="inventory.xml" varReader="monReader">
15: 
16:    <x:parse var="doc" doc="${monReader}" />
17:   <x:out select="$doc/news/article/auteur" />
18:    
19:    
20: 
```

我的xml文件

```
<news>
  <article id="1">
    <auteur>Pierre</auteur>
    <titre>Foo...</titre>
    <contenu>...bar !</contenu>
  </article>
  <article id="27">
    <auteur>Paul</auteur>
    <titre>Bientôt un LdZ J2EE !</titre>
    <contenu>Woot ?</contenu>
  </article>
  <article id="102">
    <auteur>Jacques</auteur>
    <titre>Coyote court toujours</titre>
    <contenu>Bip bip !</contenu>
  </article>
</news> 
```

我的 Jsp 文件

```
<%@ page pageEncoding="UTF-8" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/xml" prefix="x" %>

<!DOCTYPE html>
<html>
  <head>
     <meta charset="utf-8" />
     <title>Inventory report</title>
  </head>
  <body>

<c:import url="inventory.xml" varReader="monReader">

   <x:parse var="doc" doc="${monReader}" />
  <x:out select="$doc/news/article/auteur" />

</c:import>

  </body>
</html> 
```

# maven - IntelliJ Maven 正确生成 Maven 本地存储库，但未添加依赖项

> ID：15908448
> 
> 赞同：2
> 
> 时间：2013-04-09T17:23:51.333
> 
> 标签：maven, intellij-idea

您好我正在尝试将一个中型 Maven 项目移植到 IntelliJ Idea 12（来自 Eclipse）。

项目中有大约 30 个不同的模块。

我通过 IntelliJ 生命周期管理在每个模块上运行 MVN 安装。罐子正在正确生成，并存放到我的本地存储库目录中。它也正确地选择了第三方库。

但是 IntelliJ 有时会要求我将生成的 jar 作为依赖项添加到我的类路径中。（仅仅说“添加 Maven 依赖项”是不够的，我必须将生成的 jar 物理添加为库。）

在其他情况下，它可以正常工作。不知道为什么不一致。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-03T15:44:58.300

您是否尝试过在 IntelliJ IDEA 中更新本地 Maven 存储库？您可以通过打开 Preferences->Maven->Repositories 来执行此操作，然后选择您的本地存储库并单击“更新”。

# python - 将 Session 数据从 Flask 传递到 WTForms

> ID：15908453
> 
> 赞同：2
> 
> 时间：2013-04-09T17:24:02.470
> 
> 标签：python, session, flask, wtforms

所以我在将一个列表从我的 Flask 会话对象传递到我正在使用的 WTForms 时遇到了问题。我正在尝试访问会话对象中的“策略”对象（它是一个列表）。

目标是列出与当前用户关联的所有策略。

在 Flask 应用程序中：

```
class Create_Indicator_Form(Form):
    security = TextField('Ticker Name', [
                         validators.Required(),
                         validators.Length(min=1, max=6)])
    mva_10 = BooleanField('10 day moving average')
    mva_25 = BooleanField('25 day moving average')
    strategy = SelectField('strategy', session['strategy'])
    def validate_mva_10(form, field):
        if form.mva_25.data is True and field.data is True:
            raise ValidationError('You can only choose one reference')
        if form.mva_25.data is False and field.data is False:
            raise ValidationError('You must choose at least one reference')

@app.route('/create_indicator', methods=['GET', 'POST'])
def create_indicator():
    check_if_logged_in()
    f = request.form
    create_indicator_form = Create_Indicator_Form(f)
    if request.method == 'POST' and create_indicator_form.validate():
        indicator_id = get_next_index('indicator', 'indicator_id')
        ticker = create_indicator_form.security.data
        if create_indicator_form.mva_10.data is True:
            mva_10_day = 'Y'
            mva_25_day = 'N'
        else:
            mva_10_day = 'N'
            mva_25_day = 'Y'
        row = [indicator_id, ticker, mva_10_day, mva_25_day]
        add_data('indicator', row)
        # adding relation
        criteria_row = [session['strategy'][0], indicator_id]
        add_data('criteria', criteria_row)
        return redirect(url_for('home'))
    create_indicator_form.strategies = session['strategy']
    return render_template('create_indicator.html',
                           form=create_indicator_form) 
```

当我尝试运行烧瓶应用程序时，我抛出了这个错误：

```
RuntimeError: working outside of request context 
```

回溯到我在 Create_Indicator_Form 类中访问会话对象的位置。

自从开始尝试解决此问题以来，我已经意识到使用选择字段在 mva_10 和 mva_25 之间进行选择会更有效，但我想在重构之前解决此问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T17:42:29.727

# 为什么

这是因为该`strategy = SelectField('strategy', session['strategy'])`行是在加载文件时执行的，因为它是`Create_Indicator_Form`类定义的一部分。

这个时候你确实`working outside of request context`

# 如何修复它

使用类工厂将在这里工作：

```
def CreateIndicatorForm():

    class IndicatorForm(Form):
        security = TextField('Ticker Name', [
                             validators.Required(),
                             validators.Length(min=1, max=6)])
        mva_10 = BooleanField('10 day moving average')
        mva_25 = BooleanField('25 day moving average')
        strategy = SelectField('strategy', session['strategy'])
        def validate_mva_10(form, field):
            if form.mva_25.data is True and field.data is True:
                raise ValidationError('You can only choose one reference')
            if form.mva_25.data is False and field.data is False:
                raise ValidationError('You must choose at least one reference')

    return IndicatorForm 
```

请注意，调用会`CreateIndicatorForm()`返回一个*Form 类*，因此要实例化一个实际的表单，您需要使用：（`CreateIndicatorForm()()`即“调用”该类，就像您为任何其他类创建一个新实例一样）。

实例化表单时，您可以（并且应该）将参数传递给表单构造函数，例如请求数据：`CreateIndicatorForm()(request.form)`.

* * *

此外，在`session['strategy']`这里制作工厂函数的参数将是更好的做法 - 这将使工厂在请求上下文之外可重用，并确保您不必为每个请求创建新的表单*类。*

# asp.net - 在网站中的asp.net c#中显示用户准确或近似的位置n谷歌地图

> ID：15908456
> 
> 赞同：0
> 
> 时间：2013-04-09T17:24:06.960
> 
> 标签：asp.net, google-maps, compass-geolocation, ip-geolocation

我想使用asp.net c#在我的网站上的谷歌地图上显示用户当前位置或大致位置。这可能吗？？？如果它是善意的帮助我。我看了很多教程但失败了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:37:47.833

**首先**，您需要获取本地主机的 google maps API 密钥，此链接提供了有关如何执行此操作的详细信息： [http ://www.aspdotnet-suresh.com/2013/01/generate-google-maps-api-key-for .html](http://www.aspdotnet-suresh.com/2013/01/generate-google-maps-api-key-for.html)

**第二个**在你的 default.aspx 页面中执行以下操作：

**脚本标签：**

```
<script type="text/javascript"
src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC6v5-2uaq_wusHDktM9ILcqIrlPtnZgEk&sensor=false">
</script>
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false&libraries=places">
</script>
<script type="text/javascript">
if (navigator.geolocation) {
navigator.geolocation.getCurrentPosition(success);
} else {
alert("Geo Location is not supported on your current browser!");
}
function success(position) {
var lat = position.coords.latitude;
var long = position.coords.longitude;
var city=position.coords.locality;
var myLatlng = new google.maps.LatLng(lat, long);
var myOptions = {
center: myLatlng,
zoom: 12,
mapTypeId: google.maps.MapTypeId.ROADMAP
};
var map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
var marker = new google.maps.Marker({
position: myLatlng,
title: "lat: " + lat + " long: " + long
});

marker.setMap(map);
var infowindow = new google.maps.InfoWindow({ content: "<b>User Address</b><br/> Latitude:"+lat+"<br /> Longitude:"+long+"" });
infowindow.open(map, marker);
}
</script> 
```

在**body 标签**中只包含一个空的 div：

```
<div id="map_canvas" style="width: 800px; height: 500px"></div> 
```

**CSS：**

```
html { height: 100% }
body { height: 100%; margin: 0; padding: 0 }
#map_canvas { height: 100% } 
```

**这是你应该得到的结果：**

![在此处输入图像描述](https://i.stack.imgur.com/nW9wP.gif)

**教程：** [http ://www.aspdotnet-suresh.com/2013/01/show-user-current-location-on-google.html](http://www.aspdotnet-suresh.com/2013/01/show-user-current-location-on-google.html)

# jquery - 使用 Jquery 获取日期和月份

> ID：15908458
> 
> 赞同：-5
> 
> 时间：2013-04-09T17:24:10.120
> 
> 标签：jquery, date

我需要使用 Jquery 提取日期和月份，所以剩下 0913 。我也需要以这种格式提取日期：20130409，有什么建议吗？我知道我可以得到这样的完整日期：

```
var fullDate = new Date(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:27:17.887

使用 jQuery 从文本框中获取日期字符串：

```
var dateParts,
    myDate;

$calendarBox = $('input[id="myCalendarTextBox"]');

$(document).ready(function () {
    $calendarBox.datepicker({
        dateFormat= 'yy/mm/dd',
        onClose: function () {
            if($calendarBox.val() != '') {
                dateParts = $calendarBox.val().split('/');
                myDate = new Date(dateParts[0], dateParts[1], dateParts[2]);
            }
    });
}); 
```

# c# - 帖子中的评论数

> ID：15908466
> 
> 赞同：0
> 
> 时间：2013-04-09T17:24:32.790
> 
> 标签：c#, asp.net-mvc, linq, razor, data-access-layer

我正在尝试计算帖子中的评论数量（尝试创建某种博客）并将其显示在帖子的标题中。这是一些代码。

我的模型：

```
public class Post
{
    public int ID { get; set; }
    public string Title { get; set; }
    public string Message { get; set; }
    public string Author { get; set; }
    public DateTime DateTime { get; set; }

    public List<Comment> Comments { get; set; }
}

public class Comment
{
    public int ID { get; set; }
    public int PostID { get; set; }
    public string Message { get; set; }
    public string Author { get; set; }
    public DateTime DateTime { get; set; }
} 
```

我的控制器：

```
public ActionResult Index()
{
    var dbPosts = (from p in db.Posts
                orderby p.ID descending
                select p).ToList();

    return View(dbPosts);
} 
```

我的观点：

```
@foreach (var post in Model) {
    **@post.Comments.Where(x => x.PostID == post.ID).Count()**

    <h3>@Html.ActionLink(post.Title, "Details", new { id = post.ID })</h3>
    <span class="written">skrevet d. @post.DateTime.ToLongDateString() @post.DateTime.ToShortTimeString() af @post.Author</span>
    <p>@post.Message</p>
    <hr />
} 
```

我用星星标记了我的错误。它给了我一个错误，说“值不能为空”。

谁能帮我解决这个问题？

提前致以诚挚的问候和感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:27:22.907

在 foreach 循环中的视图中，您正在访问您的帖子，所以就这样做

```
@post.Comments.Count 
```

另外我认为您在控制器中的查询可能会延迟加载评论，并且当您将它们发送到您的视图时它们实际上并没有包含在内，因此急切加载评论：

```
var dbPosts = db.Posts.Include("Comments").OrderByDescending(p => p.ID).ToList(); 
```

# c++ - 调试版本运行但发布给出 0xc000007b - 缺少 dll？

> ID：15908467
> 
> 赞同：1
> 
> 时间：2013-04-09T17:24:38.043
> 
> 标签：c++, visual-studio-2010, release

当通过 VS2010 通过 Project Only > ProjectName 运行我的 Visual Studio C++ 应用程序调试版本时，生成的 exe 运行良好。但是，当我生成发布版本并转到创建 exe 的文件夹时，我收到以下错误：

```
The application was unable to start correctly (0xc000007b). Click Ok to close the application 
```

文件夹中的文件只是 exe 文件，而我的项目使用各种 boost 库。是否有可能因为缺少 boost dll 而发出此消息？有没有办法让编译器将所有必要的 dll 粘贴到 exe 文件夹中。

有什么方法可以从 VS2010 启动发布版本，就像我们在调试 >> 启动新实例中的调试版本一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:39:36.487

我讨厌这种情况发生。可能是它缺少 bloost DLL 的事实：解决此问题的最简单方法是将文件夹添加到 Path 环境变量中。可悲的是，我们没有从您的帖子中获得足够的信息来确认这是问题所在。常见的其他问题包括：您正在链接到为不同架构构建的库/正在使用不同的运行时库，您缺少其他 3rd 方 dll，您在链接器中使用的 .lib 文件指向不同版本的代码比你指向的 dll ......列表还在继续。

至于在运行时复制 dll，您可以使用自定义构建事件 [http://msdn.microsoft.com/en-us/library/e85wte0k%28v=vs.80%29.aspx]。只需编写一个将 dll 复制为“构建后事件”的批处理脚本，您应该一切顺利，但我建议先使用 Path 方式。

# sigabrt - SIGABRT - 发生了什么？死亡标签

> ID：15908469
> 
> 赞同：0
> 
> 时间：2013-04-09T17:25:00.823
> 
> 标签：sigabrt

我正在编写一个涉及从 NSUserDefaults 加载数据的应用程序。因此，当我确认传递的整数为 1 时，我希望它显示某个文本。但是，当我的 .Xib 上没有 UILabel 时。很好，但是一旦我为标签添加了一个出口，将它放在 .Xib 上并将其全部链接起来，它就会出现 SIGABRT

```
-(void)viewDidLoad {

int page = [[[NSUserDefaults standardUserDefaults] objectForKey:@"Page"] integerValue];

NSString *log = [NSString stringWithFormat:@"%d", page];

NSLog(log);

if (page == 1 ) {
    NSLog(@"redstone block");
title.text = @"redstone Blcok";
}

[super viewDidLoad];
// Do any additional setup after loading the view from its nib.
} 
```

我得到的错误：

2013-04-09 18:16:13.910 redstoneGuide[94905:c07] -[UILabel copyWithZone:]：无法识别的选择器发送到实例 0x756b910 2013-04-09 18:16:13.911 redstoneGuide[94905:c07] *** 终止应用程序uncaught exception 'NSInvalidArgumentException', reason: '-[UILabel copyWithZone:]: unrecognized selector sent to instance 0x756b910' *** First throw call stack: (0x1599012 0x12a6e7e 0x16244bd 0x1588bbc 0x158894e 0x12baae9 0x2cd32b 0xcd45be 0xcd40e7 0xcfeb58 0x408019 0x12ba663 0x159445a 0x406b1c 0x2cb7e7 0x2cbdc8 0x2cbff8 0x2cc232 0x2d7c25 0x4d73a3 0x2d4ee3 0x2d5167 0x33cc 0x12ba705 0x1ee2c0 0x1ee258 0x2af021 0x2af57f 0x2ae6e8 0x4b21d3 0x1561afe 0x1561a3d 0x153f7c2 0x153ef44 0x153ee1b 0x25fa7e3 0x25fa668 0x1eaffc 0x1fcd 0x1ef5) libc++abi.dylib: terminate called throwing an exception (lldb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T05:37:12.137

事实证明你做不到

```
Iboutlet uilabel *title; 
```

名称 title 会导致应用程序崩溃。但是，以下工作。

```
Iboutlet uilabel *Gtitle 
```

# highcharts - Highchart中的最大Y轴值

> ID：15908471
> 
> 赞同：3
> 
> 时间：2013-04-09T17:25:15.003
> 
> 标签：highcharts

[http://jsfiddle.net/BYeBa/](http://jsfiddle.net/BYeBa/)

```
yAxis: {

           min: 0,

           max: 75,

           title: {

               text: ''

           } 
```

我不知道为什么我不能在这个高图中设置 y 轴的最大值。我不希望它超过 75。我填充的数据都没有接近 75 的值。

为什么它停留在100？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T07:37:07.773

这是由 endOnTick 引起的。如果你设置

```
endOnTick:false 
```

75 将是您的最大值。

见[http://jsfiddle.net/kzoon/BYeBa/4/](http://jsfiddle.net/kzoon/BYeBa/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:41:46.320

您可以将 tickInterval 设置为 25。

[http://api.highcharts.com/highcharts#yAxis.tickInterval](http://api.highcharts.com/highcharts#yAxis.tickInterval)

# c# - 为什么我必须将子查询分配给主查询之外的变量

> ID：15908475
> 
> 赞同：1
> 
> 时间：2013-04-09T17:25:27.750
> 
> 标签：c#, linq-to-entities

在下面的 GetTransfers() 方法中，我必须将 GetAllocations() 的结果分配给我的主查询之外的变量，否则查询将失败。为什么我必须这样做？有没有更好的办法？当查询失败时，我收到此错误：

{System.NotSupportedException：LINQ to Entities 无法识别方法 'System.Linq.IQueryable`1[XCBusinessLogic.Presentation.Allocation] GetAllocations()' 方法，并且此方法无法转换为存储表达式。

此查询有效：

```
public IQueryable<Transfer> GetTransfers()
    {
        IQueryable<Allocation> wxyz = GetAllocations();

        IQueryable<Transfer> query =
            from transfer in Context.XC_TRANSFERS
            //let wxyz = GetAllocations()
            join trader in Context.MGRS on transfer.TRADER_ID equals trader.MGR_NO
            join ssm in Context.SSM_CORES on transfer.SSM_ID equals ssm.SSM_ID
            join desk in Context.XC_DESKS on transfer.DESK_ID equals desk.DESK_ID

            select new Transfer
            {
                // snip
                _AllocationList = wxyz.Where(x => x.TRANSFER_ID == transfer.TRANSFER_ID)
            };
        return query;

    } 
```

此查询失败：

```
public IQueryable<Transfer> GetTransfers()
    {
        //IQueryable<Allocation> wxyz = GetAllocations();

        IQueryable<Transfer> query =
            from transfer in Context.XC_TRANSFERS
            let wxyz = GetAllocations()
            join trader in Context.MGRS on transfer.TRADER_ID equals trader.MGR_NO
            join ssm in Context.SSM_CORES on transfer.SSM_ID equals ssm.SSM_ID
            join desk in Context.XC_DESKS on transfer.DESK_ID equals desk.DESK_ID

            select new Transfer
            {
                // snip
                _AllocationList = wxyz.Where(x => x.TRANSFER_ID == transfer.TRANSFER_ID)
            };
        return query;

    } 
```

此查询失败：

```
public IQueryable<Transfer> GetTransfers()
    {
        //IQueryable<Allocation> wxyz = GetAllocations();

        IQueryable<Transfer> query =
            from transfer in Context.XC_TRANSFERS
            //let wxyz = GetAllocations()
            join trader in Context.MGRS on transfer.TRADER_ID equals trader.MGR_NO
            join ssm in Context.SSM_CORES on transfer.SSM_ID equals ssm.SSM_ID
            join desk in Context.XC_DESKS on transfer.DESK_ID equals desk.DESK_ID

            select new Transfer
            {
                // snip
                _AllocationList = GetAllocations().Where(x => x.TRANSFER_ID == transfer.TRANSFER_ID)
            };
        return query;

    } 
```

获取分配方法：

```
public IQueryable<Allocation> GetAllocations()
    {
        IQueryable<Allocation> query =
            from alloc in Context.XC_ALLOCATIONS
            join acm in Context.ACMS on alloc.ACCT_NO equals acm.ACCT_NO
            join b in Context.BUM_DETAILS.Where(x => x.FIRM_NO == 1 && x.CATEGORY_ID == 1937) on acm.ACCT_NO equals b.ACCT_NO into bumDetails
            from bumDetail in bumDetails.DefaultIfEmpty()
            where acm.FIRM_NO == 1
            select new Allocation
            {
                AccountName = acm.ACCT_NAME
                // snip

            };
        return query;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:38:04.747

Linq to Entities 将查询中的所有内容`from transfer in Context.XC_TRANSFERS ...`转换为 SQL。因此，该查询中允许的唯一表达式是可以轻松转换为 SQL 的表达式。

Linq to Entities 无法弄清楚 .NET 方法是如何`GetAllocations()`工作的。它应该怎么做？方法中可能有任何形式的疯狂代码。它怎么能把它变成 SQL 呢？

在您的情况下，该方法实际上包含另一个 Linq to Entities 查询。也许您可以将一个查询复制粘贴到另一个查询的内部。但我认为这不会改善您的代码！

因此，请保留您拥有的工作解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:40:29.920

你可以通过使用`join`你的方法来解决这个问题，然后是`into`

```
IQueryable<Transfer> query =
            from transfer in Context.XC_TRANSFERS
            join allocation in GetAllocations() on transfer.TRANSFER_ID equals allocation.TRANSFER_ID into allocationList
            join trader in Context.MGRS on transfer.TRADER_ID equals trader.MGR_NO
            join ssm in Context.SSM_CORES on transfer.SSM_ID equals ssm.SSM_ID
            join desk in Context.XC_DESKS on transfer.DESK_ID equals desk.DESK_ID

            select new Transfer
            {
                // snip
                _AllocationList = allocationList
            }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-13T22:13:37.527

我遇到了一个非常相似的问题，Aducci 的回答为我做了。这就是我想要做的：

```
query = from x in query
        where GetServicesQuery(db, options).Any(service => /*my criteria*/)
        select x; 
```

按照 Aducci 的建议，通过这样做解决了问题：

```
query = from x in query
        join service in GetServicesQuery(db, localOptions) on x.ID equals service.ID into services
        where services.Any(service => /*my criteria*/)
        select x; 
```

我发布此解决方案是因为我的情况与上面不同（需要在 where 不是 select 中的子查询）。如果有人偶然发现这个线程与我有同样的问题，希望这可以为他们节省一些搜索。

这让我很紧张，因为 GetServicesQuery 有很多我不想重复的标准。

# spss - 如何在 SPSS/PASW 中将“999”设置为默认缺失值？

> ID：15908482
> 
> 赞同：2
> 
> 时间：2013-04-09T16:03:27.013
> 
> 标签：spss, missing-data

我正在将一个非常大的数据集导入 SPSS。数据集中的许多字段包含“999”值，表示缺失值。我想指示 SPSS 如此查看它们。但是，默认情况下，SPSS 中的每个变量都设置为“无缺失值”。在变量视图中，您必须将“999”定义为每个变量的“离散缺失值”。虽然有数百个变量，但这是很多工作：

![在此处输入图像描述](https://i.stack.imgur.com/NJUlu.png)

因此：有没有办法将“离散缺失值 999”定义为导入时每个变量的默认缺失值？这将为我节省大量工作，但我无法在网上找到答案（我只获得关于如何将 999 单独定义为每个变量的缺失值的教程，就像我现在所做的那样）。

非常感谢您的帮助！

**编辑**现在我想一想：我可以轻松地将数据集中的每个“999”替换为一个空单元格。SPSS不会将空单元格视为缺失值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T12:54:58.300

正如 MISSING VALUES 命令所指出的那样，语法是您的朋友。但是对于许多变量，例如值标签或测量级别，您可能有其他相同的元数据。您可以为多个命令设置语法，但您可能需要研究 APPLY DICTIONARY 命令（菜单中的数据 > 复制数据属性）。使用它，您可以设置一个包含所有要共享的元数据的变量，然后将所有这些规范应用于一堆其他变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T16:15:46.443

我认为您可以将其更改为变量，而不是复制该单元格，选择缺失列中的所有其他单元格（在变量视图中）并一次粘贴到所有其他单元格。

（ctrl-C、ctrl-V 快捷键可能不起作用）

但是，是的，空单元格也被视为丢失。

# java - Double 不是抽象的，不会覆盖 ListInterface 中的抽象方法 getNext()？

> ID：15908485
> 
> 赞同：0
> 
> 时间：2013-04-09T17:25:50.993
> 
> 标签：java, compiler-errors, linked-list

我正在尝试编译以下程序并不断收到抽象方法错误。我正在尝试编译的程序如下（虽然尚未完成）。我收到的错误如下：

```
Double.java:5: error: Double is not abstract and does not override abstract method getNext() in ListInterface
public class Double<T extends Comparable<T>> implements ListInterface<T>{
       ^
  where T is a type-variable:
    T extends Comparable<T> declared in class Double
1 error 
```

* * *

```
import java.io.*;
import ch06.lists.*;
import support.DLLNode;

public class Double<T extends Comparable<T>> implements ListInterface<T>{

    protected DLLNode<T> front;
    protected DLLNode<T> rear;
    protected DLLNode<T> curPosition;
    protected int numElements;

    public Double(){
        front = null;
        rear = null;
        curPosition = null;
        numElements = 0;
    }

    protected DLLNode<T> find(T target){

    }

    public int size(){
        return numElements;
    }

    public boolean contains(T element) throws NullPointerException{
        if (DLLNode.getInfo()!=element){
            return false;
        }
        else{
            return true;
        }
    }

    public boolean remove(T target) throws StackUnderflowException{
        if (!contains(target)){
            return false;
        }
        else{
            return true;
            DLLNode.setLink()==null;
        }
    }

    public T get(T element){
        return find(element);
    }

    public String toString(){

    }   

    public void reset(){

    }

    @Override
    public T getNext(){
        return null;
    }

    public void resetBack(){

    }

    public T getPrevious(){

    }

    public void add(T element){

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:31:00.433

它说您没有覆盖 中的`getNext()`方法`ListInterface`，目前您有两种`getNext()`方法。我很惊讶它没有告诉你这件事，但我猜它正在查看第一个并且看到它与它所期望的不一样`ListInterface.java`。删除该`public DLLNode<T> getNext()`方法，错误应该会消失。

问题的真正解决方案是让自己拥有一个好的 IDE，比如 Eclipse 或 IntelliJ。他们将突出显示所有问题在您的代码中的位置，并为您提供如何解决这些问题的建议。通常，使用 IDE 最难的部分是正确设置它，所以我建议为您决定的任何 IDE 搜索教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:37:38.737

知道了！

您在以下位置缺少 }：

```
public boolean remove(T target) throws StackUnderflowException{
    if (DLLNode.contains()==target){
        return true;
        DLLNode.setLink()==null;
} 
```

虽然我真的不明白你在这里尝试做什么......

在：

```
 public boolean remove(T target) throws StackUnderflowException{
        if (!contains(target)){
            return false;
        }
        else{
            return true;
            DLLNode.setLink()==null;
        }
    } 
```

您不能返回一个值并在之后执行另一个命令。切换返​​回顺序 &`DLLNode.setLink()==null;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:52:53.630

这里有很多错误。

一些：

1.

```
 protected DLLNode<T> find(T target){ 
```

需要返回一些东西。

2.

```
 public String toString(){ 
```

需要返回一些东西。

3.

```
public T getPrevious(){ 
```

需要返回一些东西。

4.

```
 protected DLLNode<T> find(T target) { 
```

尽管

```
 public T get(T element) {
        return find(element);
    } 
```

看到 get() 返回 T 并且 find() 返回`DLLNode<T>`

* * *

编译器只是对这一切感到困惑，并告诉你至少要修复一些东西:)

# internet-explorer - PrimeFaces 如何检测浏览器？

> ID：15908487
> 
> 赞同：0
> 
> 时间：2013-04-09T17:25:54.470
> 
> 标签：internet-explorer, primefaces, user-agent

1.  PrimeFaces 如何处理浏览器检测？它是否依赖 jQuery 来做到这一点？它是否使用用户代理字符串？

2.  prime-faces 如何处理[此处讨论的 IE 用户代理更新](http://blogs.msdn.com/b/ie/archive/2009/01/09/the-internet-explorer-8-user-agent-string-updated-edition.aspx)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:47:21.823

Primefaces 依赖于 jQuery，有一些（我发现 8 个）基于浏览器的条件执行。

检查它是否是 IE 以及版本是否与参数匹配的函数（例如`isIE(9)`：

```
isIE: function (a) {
    return ($.browser.msie && parseInt($.browser.version, 10) == a)
}, 
```

检查 IE 6 或 7 的条件：

```
if ($.browser.msie && /^[6,7]\.[0-9]+/.test($.browser.version)) {
    this.panel.parent().css("z-index", PrimeFaces.zindex - 1)
} 
```

检查 IE 版本低于 9 的条件：

```
if ($.browser.msie && parseInt($.browser.version) < 9) {
    b.trigger("change")
} 
```

# c++ - c++ 将二维数组传递给函数

> ID：15908496
> 
> 赞同：1
> 
> 时间：2013-04-09T17:26:15.517
> 
> 标签：c++, arrays, function, 2d

我知道我的代码还没有完成，但我没有要求它完成。它应该输入 3 只猴子一周内吃掉的食物和其他东西。但我遇到了一个障碍。当我将 cin 放在磅Eaten 函数中时，它给了我一个错误（错误：没有运算符“<<”与这些操作数匹配）。我没有正确传递数组是为什么它不起作用吗？谢谢你的帮助

```
#include <iomanip>
#include <iostream>
using namespace std;

//Global Constants
const int NUM_MONKEYS = 3;
const int DAYS = 7;

//Prototypes
void poundsEaten(const double[][DAYS],int, int);
void averageEaten();
void least();
void most();

int main()
{
    //const int NUM_MONKEYS = 3;
    //const int DAYS = 7;
    double foodEaten[NUM_MONKEYS][DAYS]; //Array with 3 rows, 7 columns

    poundsEaten(foodEaten, NUM_MONKEYS, DAYS);

    system("pause");
    return 0;
}

void poundsEaten(const double array[][DAYS], int rows, int cols)
{
    for(int index = 0; index < rows; index++)
    {
        for(int count = 0; count < DAYS; count++)
        {
            cout << "Pounds of food eaten on day " << (index + 1);
            cout << " by monkey " << (count + 1);
            cin >> array[index][count];
            // Here is where i get the error
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:28:27.440

您已声明`array`包含`const double`s。它们是恒定的，因此您无法像尝试使用`cin >> array[index][count];`. 只需将参数声明更改为：

```
double array[][DAYS] 
```

也许您应该考虑何时以及为什么应该将变量声明为`const`.

为了避免以后的混淆，这里值得一提的是，没有数组类型参数之类的东西。上面的参数实际上转化为：

```
double (*array)[DAYS] 
```

但是，您的代码被适当地编写以使用它（您将`row`s 的数量传递给函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:29:12.253

你声明：

```
const double array[][DAYS], 
```

但是，在`poundsEaten`函数内部，您要求用户输入信息以填写`array`，这意味着`array`它不是 const，因此是错误的。从参数中删除`const`限定符，以便`array`可以通过用户输入进行更改。

```
void poundsEaten(double array[][DAYS], int rows, int cols) 
```

顺便说一句：不要`array`用作数组的变量名，使用一些其他名称以获得良好实践。同时，在你的函数`cols`内部不使用。`poundsEaten`

# mysql - mysql substr 不像 php 那样工作

> ID：15908498
> 
> 赞同：0
> 
> 时间：2013-04-09T17:26:21.490
> 
> 标签：mysql, substr

请帮助我在使用查询时解决我的查询 - 我只想减去几个字符，然后使用 % 来查找匹配的 LIKE：

```
select * from `providers` WHERE `name` LIKE SUBSTR('telin',1,4)% 
```

请让我知道我做错了什么，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:28:04.570

假设`telin`是列名而不是文字字符串，它应该用反引号引起来。如果是文字串，那么显然没有必要从中提取子串。但是，我怀疑这是您在回显完整查询后粘贴到此处的 PHP 变量的结果，然后它是正确的单引号。

无论如何，您需要将`SUBSTR()`结果连接到`'%'`via `CONCAT()`：

```
SELECT * FROM `providers` WHERE `name` LIKE CONCAT(SUBSTR(`telin`,1,4), '%'); 
```

但更好的是用来[`LEFT()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_left)比较每个字符的前 4 个字符：

```
SELECT * FROM `providers` WHERE LEFT(`name`, 4) = LEFT(`telin`,4); 
```

# ffmpeg - FFMPEG：我需要音频通道 7 和 8 作为视频的主要音轨

> ID：15908499
> 
> 赞同：0
> 
> 时间：2013-04-09T17:26:23.820
> 
> 标签：ffmpeg, transcoding, mixing, transcode

我有一个带有 8 个音频通道的视频。

我需要轨道 7（左立体声）和 8（右立体声）作为视频的音频（我将其转换为 flv）。

我尝试过使用`-filter_complex`、和过滤器以及参数`join`，但我似乎找不到正确的值组合：-/`amix``amerge``-map`

输出：

```
/usr/local/bin/ffmpeg-1.0/bin/ffmpeg -i '/folder/video_name.mov' -f 'flv' \
-s '320x240' -b '250k' -aspect '4:3' -ac 1 -ab '64k' -ar '22050' -y \
/folder/video_name.flv

ffmpeg version N-46241-g09ea482 Copyright (c) 2000-2012 the FFmpeg developers
  built on Nov  5 2012 07:33:09 with gcc 4.1.2 (GCC) 20080704 (Red Hat 4.1.2-46)
  configuration: --prefix=/usr/local/bin/ffmpeg-1.0
  libavutil      52\.  1.100 / 52\.  1.100
  libavcodec     54\. 70.100 / 54\. 70.100
  libavformat    54\. 35.100 / 54\. 35.100
  libavdevice    54\.  3.100 / 54\.  3.100
  libavfilter     3\. 21.105 /  3\. 21.105
  libswscale      2\.  1.101 /  2\.  1.101
  libswresample   0\. 16.100 /  0\. 16.100
Guessed Channel Layout for  Input Stream #0.1 : mono
Guessed Channel Layout for  Input Stream #0.2 : mono
Guessed Channel Layout for  Input Stream #0.3 : mono
Guessed Channel Layout for  Input Stream #0.4 : mono
Guessed Channel Layout for  Input Stream #0.5 : mono
Guessed Channel Layout for  Input Stream #0.6 : mono
Guessed Channel Layout for  Input Stream #0.7 : mono
Guessed Channel Layout for  Input Stream #0.8 : mono
Guessed Channel Layout for  Input Stream #0.9 : mono
Guessed Channel Layout for  Input Stream #0.10 : mono
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/folder/video_name.mov':
  Metadata:
    major_brand     : qt
    minor_version   : 537199360
    compatible_brands: qt
    creation_time   : 2013-04-03 19:45:26
  Duration: 00:00:39.03, start: 0.000000, bitrate: 122149 kb/s
    Stream #0:0(eng): Video: prores (apch / 0x68637061), yuv422p10le, 1920x1080, 110585 kb/s, SAR 1:1 DAR 16:9, 23.98 fps, 23.98 tbr, 23976 tbn, 23976 tbc
    Metadata:
      creation_time   : 2013-04-03 19:45:26
      handler_name    : Apple Alias Data Handler
      timecode        : 00:59:53:00
    Stream #0:1(eng): Audio: pcm_s24le (in24 / 0x34326E69), 48000 Hz, mono, s32, 1152 kb/s
    Metadata:
      creation_time   : 2013-04-03 19:45:26
      handler_name    : Apple Alias Data Handler
    Stream #0:2(eng): Audio: pcm_s24le (in24 / 0x34326E69), 48000 Hz, mono, s32, 1152 kb/s
    Metadata:
      creation_time   : 2013-04-03 19:45:26
      handler_name    : Apple Alias Data Handler
    Stream #0:3(eng): Audio: pcm_s24le (in24 / 0x34326E69), 48000 Hz, mono, s32, 1152 kb/s
    Metadata:
      creation_time   : 2013-04-03 19:45:26
      handler_name    : Apple Alias Data Handler
    Stream #0:4(eng): Audio: pcm_s24le (in24 / 0x34326E69), 48000 Hz, mono, s32, 1152 kb/s
    Metadata:
      creation_time   : 2013-04-03 19:45:26
      handler_name    : Apple Alias Data Handler
    Stream #0:5(eng): Audio: pcm_s24le (in24 / 0x34326E69), 48000 Hz, mono, s32, 1152 kb/s
    Metadata:
      creation_time   : 2013-04-03 19:45:26
      handler_name    : Apple Alias Data Handler
    Stream #0:6(eng): Audio: pcm_s24le (in24 / 0x34326E69), 48000 Hz, mono, s32, 1152 kb/s
    Metadata:
      creation_time   : 2013-04-03 19:45:26
      handler_name    : Apple Alias Data Handler
    Stream #0:7(eng): Audio: pcm_s24le (in24 / 0x34326E69), 48000 Hz, mono, s32, 1152 kb/s
    Metadata:
      creation_time   : 2013-04-03 19:45:26
      handler_name    : Apple Alias Data Handler
    Stream #0:8(eng): Audio: pcm_s24le (in24 / 0x34326E69), 48000 Hz, mono, s32, 1152 kb/s
    Metadata:
      creation_time   : 2013-04-03 19:45:26
      handler_name    : Apple Alias Data Handler
    Stream #0:9(eng): Audio: pcm_s24le (in24 / 0x34326E69), 48000 Hz, mono, s32, 1152 kb/s
    Metadata:
      creation_time   : 2013-04-03 19:45:26
      handler_name    : Apple Alias Data Handler
    Stream #0:10(eng): Audio: pcm_s24le (in24 / 0x34326E69), 48000 Hz, mono, s32, 1152 kb/s
    Metadata:
      creation_time   : 2013-04-03 19:45:26
      handler_name    : Apple Alias Data Handler
    Stream #0:11(eng): Data: none (tmcd / 0x64636D74)
    Metadata:
      creation_time   : 2013-04-03 19:45:30
      handler_name    : Apple Alias Data Handler
      timecode        : 00:59:53:00
Please use -b:a or -b:v, -b is ambiguous
Output #0, flv, to '/folder/video_name.flv':
  Metadata:
    major_brand     : qt
    minor_version   : 537199360
    compatible_brands: qt
    encoder         : Lavf54.35.100
    Stream #0:0(eng): Video: flv1 ([2][0][0][0] / 0x0002), yuv420p, 320x240 [SAR 1:1 DAR 4:3], q=2-31, 250 kb/s, 1k tbn, 23.98 tbc
    Metadata:
      creation_time   : 2013-04-03 19:45:26
      handler_name    : Apple Alias Data Handler
      timecode        : 00:59:53:00
    Stream #0:1(eng): Audio: adpcm_swf ([1][0][0][0] / 0x0001), 22050 Hz, mono, s16, 88 kb/s
    Metadata:
      creation_time   : 2013-04-03 19:45:26
      handler_name    : Apple Alias Data Handler
Stream mapping:
  Stream #0:0 -> #0:0 (prores -> flv)
  Stream #0:1 -> #0:1 (pcm_s24le -> adpcm_swf)
Press [q] to stop, [?] for help
frame=   33 fps=0.0 q=2.0 size=     108kB time=00:00:01.99 bitrate= 442.4kbits/s    
frame=   66 fps= 65 q=2.0 size=     225kB time=00:00:02.97 bitrate= 619.0kbits/s    
frame=   99 fps= 65 q=2.0 size=     341kB time=00:00:04.96 bitrate= 561.8kbits/s    
frame=  136 fps= 67 q=2.0 size=     400kB time=00:00:05.99 bitrate= 547.5kbits/s    
frame=  177 fps= 70 q=3.0 size=     482kB time=00:00:07.98 bitrate= 494.3kbits/s    
frame=  210 fps= 69 q=3.7 size=     590kB time=00:00:08.96 bitrate= 539.7kbits/s    
frame=  240 fps= 68 q=6.3 size=     660kB time=00:00:10.01 bitrate= 539.7kbits/s    
frame=  264 fps= 65 q=6.7 size=     719kB time=00:00:11.01 bitrate= 535.2kbits/s    
frame=  288 fps= 63 q=8.4 size=     772kB time=00:00:12.02 bitrate= 526.1kbits/s    
frame=  312 fps= 62 q=15.4 size=     829kB time=00:00:13.65 bitrate= 497.4kbits/s    
frame=  336 fps= 60 q=10.4 size=     875kB time=00:00:14.02 bitrate= 511.1kbits/s    
frame=  360 fps= 59 q=10.6 size=     916kB time=00:00:15.01 bitrate= 499.9kbits/s    
frame=  383 fps= 58 q=17.8 size=     957kB time=00:00:15.97 bitrate= 490.6kbits/s    
frame=  411 fps= 58 q=6.5 size=    1008kB time=00:00:17.97 bitrate= 459.3kbits/s    
frame=  437 fps= 57 q=9.7 size=    1046kB time=00:00:18.99 bitrate= 451.3kbits/s    
frame=  460 fps= 57 q=7.7 size=    1086kB time=00:00:20.01 bitrate= 444.6kbits/s    
frame=  489 fps= 57 q=11.3 size=    1144kB time=00:00:20.99 bitrate= 446.3kbits/s    
frame=  512 fps= 56 q=10.3 size=    1182kB time=00:00:22.01 bitrate= 439.8kbits/s    
frame=  535 fps= 55 q=21.5 size=    1225kB time=00:00:22.98 bitrate= 436.7kbits/s    
frame=  564 fps= 55 q=18.3 size=    1280kB time=00:00:24.00 bitrate= 436.8kbits/s    
frame=  587 fps= 55 q=8.5 size=    1311kB time=00:00:24.98 bitrate= 429.7kbits/s    
frame=  610 fps= 54 q=11.9 size=    1349kB time=00:00:26.00 bitrate= 424.9kbits/s    
frame=  636 fps= 54 q=7.5 size=    1383kB time=00:00:26.98 bitrate= 419.8kbits/s    
frame=  659 fps= 54 q=9.6 size=    1421kB time=00:00:28.00 bitrate= 415.6kbits/s    
frame=  683 fps= 54 q=20.0 size=    1471kB time=00:00:29.02 bitrate= 415.1kbits/s    
frame=  711 fps= 54 q=6.4 size=    1518kB time=00:00:30.00 bitrate= 414.5kbits/s    
frame=  742 fps= 54 q=6.2 size=    1558kB time=00:00:31.02 bitrate= 411.5kbits/s    
frame=  774 fps= 54 q=2.5 size=    1601kB time=00:00:33.01 bitrate= 397.1kbits/s    
frame=  816 fps= 55 q=2.0 size=    1632kB time=00:00:34.50 bitrate= 387.6kbits/s    
frame=  861 fps= 56 q=2.0 size=    1670kB time=00:00:35.99 bitrate= 380.1kbits/s    
frame=  905 fps= 57 q=2.0 size=    1706kB time=00:00:38.03 bitrate= 367.4kbits/s    
frame=  936 fps= 58 q=2.0 Lsize=    1730kB time=00:00:39.05 bitrate= 362.8kbits/s
video:1278kB audio:423kB subtitle:0 global headers:0kB muxing overhead 1.654557% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:53:35.210

你在正确的轨道上[`amerge`](http://ffmpeg.org/ffmpeg-filters.html#amerge)。

```
ffmpeg -i input -filter_complex "scale=320:-1;[0:7][0:8]amerge" -codec:v libx264 \
-preset medium -crf 23 -codec:a libmp3lame -q:a 5 -ar 44100 output.flv 
```

我建议使用H.264 视频编码，因为与命名的编码器（输出 FLV / Sorenson Spark / Sorenson H.263 的编码器）`libx264`相比，它可以提供更高的每比特率质量。`flv`FLV 容器可以利用 H.264 视频。

我还建议使用`libmp3lame`对音频进行编码，否则你会变得很糟糕，很老`adpcm_swf`。

您的构建尚未配置为支持这些外部编码库，但有些[静态构建](http://ffmpeg.org/download.html#LinuxBuilds)确实包含这些。

另见：

*   [FFmpeg Wiki：x264 编码指南](https://ffmpeg.org/trac/ffmpeg/wiki/x264EncodingGuide)
*   [FFmpeg Wiki：MP3 编码指南](https://ffmpeg.org/trac/ffmpeg/wiki/Encoding%20VBR%20%28Variable%20Bit%20Rate%29%20mp3%20audio)

# python - 如何修改作为字典中值的列表？

> ID：15908500
> 
> 赞同：1
> 
> 时间：2013-04-09T17:26:26.647
> 
> 标签：python, list, dictionary

如果我有这样的字典：

```
d = {'USA' : [0,0,0], 'CAN' : [0,0,0]} 
```

如何更新值中的特定元素？

我的目标是将其更新为（例如）如下所示：

```
d = {'USA' : [0,1,0], 'CAN' : [1,0,0]} 
```

我在想类似的东西

```
d['USA'] = d.get('USA')[1] +  1

d['CAN'] = d.get('CAN')[0] +  1 
```

但这似乎不起作用。有什么建议么？我希望这很清楚。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:28:08.600

您的字典中有列表，因此`d[key]`表达式的一部分返回一个列表。只需继续添加`[..]`索引：

```
d['USA'][1] += 1
d['CAN'][0] += 1 
```

如果这更容易，您可以使用中间变量将其分解：

```
sublist = d['USA']
sublist[1] += 1
sublist = d['CAN']
sublist[0] += 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:29:23.307

最简单的方法就是说

d['美国'][1] += 1

这将为您提供更新的列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:28:30.523

做

```
d['USA'][1]=d['USA'][1]+1
d['CAN'][0]=d['USA'][0]+1 
```

在您的示例中，您将整个列表替换为一个数字。

# java - 将 spring XML 文件添加到类路径（Windows cmd-line）

> ID：15908503
> 
> 赞同：2
> 
> 时间：2013-04-09T17:26:39.323
> 
> 标签：java, spring, classpath

我正在尝试通过使用 Spring 和 spring xml 配置文件的 cmd 行运行 jar 文件。

cmd 行调用类似于：

```
java -cp lib/MyJar.jar my.package.MyClass 
```

我得到的错误是：

```
Caused by: java.io.FileNotFoundException: class path resource 
   [myPath/mySpringCfg.xml] cannot be opened because it does not exist
    at org.springframework.core.io.ClassPathResource.getInputStream(ClassPathResource.java:157) 
```

我的清单类路径类似于：

```
Class-Path: 3rdPartyJar1.jar 3rdPartyJar2.jar ./myPath/ 
```

加载文件的调用等同于：

```
context = new ClassPathXmlApplicationContext("myPath/mySpringCfg.xml"); 
```

有没有办法在类路径中正确拉入 XML 文件，以便 Spring 按预期工作？似乎类路径文档只讨论存档文件和文件夹。

谢谢！

## 更新

当我切换到 FileSystemXmlApplicationContext 时，它似乎运行良好。我猜 ClassPathXmlApplicationContext 不能从命令行使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:40:07.453

您对 XML 的引用是`myPath/mySpringCfg.xml`- 这意味着它`myPath`必须在类路径中。

将您的清单更改为：

```
Class-Path: 3rdPartyJar1.jar 3rdPartyJar2.jar ./ 
```

这种方式`myPath`将成为类路径的一部分，而不仅仅是其内容。

**注意：** 应用程序配置 XML 是应用程序代码的一部分，不要将其误认为是配置。

如果您需要配置 - 将其放在属性文件中，并在 XML 配置文件中使用占位符。

**更新：**

我认为你的问题的根本原因在于代码（虽然我没有测试它） - 试试这个：

```
context = new ClassPathXmlApplicationContext("/myPath/mySpringCfg.xml"); 
```

区别在于 'myPath' 之前的 '/'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:31:30.093

我不知道你项目的架构，但为什么不把你的xml配置文件放到你的项目jar中呢？

# sql-server - 查找将触发 sql server 触发器的代码

> ID：15908504
> 
> 赞同：0
> 
> 时间：2013-04-09T17:26:46.927
> 
> 标签：sql-server, tsql

我的数据库及其父表中有一个触发器列表，我想找到最终触发触发器的原始事件。我有许多使用数据库的项目，包括 Silverlight、ASP.net 和 WPF。所有应用程序都必须使用 DML 存储过程。

除了将存储过程编写成文本文件然后执行手动搜索之外，有没有办法查询我的存储过程“guts”以查找触发器父表上的插入和更新？我在想有一个系统视图或我可以使用的东西。

一旦我能够查明存储过程，我就可以搜索项目源代码并识别调用 DML 的事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:31:16.827

一个简单的查询可以为您提供该信息

```
SELECT Name
FROM sys.procedures
WHERE OBJECT_DEFINITION(OBJECT_ID) LIKE '%<table_name_here>%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T08:58:39.207

如果有多个外部事件使用相同的存储过程来触发触发器，那么仅查找存储过程将无济于事，因为您将不知道是什么外部事件启动了它。

您可以使用 sys 表来查找正在操作数据和触发触发器的存储过程，但这无助于您首先确定是哪个事件触发了它。

为此，您需要分析器来帮助您捕获解决此问题所需的应用程序、主机和其他详细信息。

# ios - 在 UITextView 上采取有限的字符形式粘贴操作

> ID：15908507
> 
> 赞同：0
> 
> 时间：2013-04-09T17:27:02.157
> 
> 标签：ios, objective-c, xcode, cocoa-touch, uitextview

我有一个 UITextView，我限制用户输入超过 150 个字符。我通过实现以下方法来做到这一点。现在，当用户复制超过 150 个字符并将它们粘贴到此文本视图中时，由于此方法验证，不允许粘贴操作。在超过 150 个字符的粘贴操作中，我想获取前 150 个字符并将其粘贴到 UITextView 中。我怎样才能做到这一点？

```
- (BOOL)textView:(UITextView *)iTextView shouldChangeTextInRange:(NSRange)iRange replacementText:(NSString *)iText 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T17:31:22.303

```
- (BOOL)textView:(UITextView *)iTextView shouldChangeTextInRange:(NSRange)iRange replacementText:(NSString *)iText {
    if (iText.length < 150) {
        return YES;
    }
    iTextView.text = [iText substringToIndex:150];
    return NO;
} 
```

简而言之，通过获取输入字符串的子字符串，检查输入是否超出界限并获取前 150 个字符。手动将其插入文本视图并返回`NO`。

# api - DbContext API 忽略每个实体

> ID：15908509
> 
> 赞同：0
> 
> 时间：2013-04-09T17:27:11.330
> 
> 标签：api, entity-framework, dbcontext

我正在尝试使用 CodeFirst EF。问题是它为每个域上下文（DbContext）加载了 50 多个表。如果我传递强名称类，则忽略工作，因此编译器知道它是什么，但是硬编码所有忽略将太难。

有没有办法遍历引用的 DLL 中的所有类并将其传递给忽略？我的代码很接近（从帖子中获取代码），但我想不出一种方法来传递带有程序集信息的类类型。我离得那么近又那么远……</p>

```
Assembly pocoQMAssembly = AssemblyInformationPOCO_QM.Get;
foreach (Type typeInfo in pocoQMAssembly.GetTypes())
{
    //Make sure it is not one of the classes used in DbSet<> 
    if (typeInfo != typeof(tbl_age_groups) ||
        typeInfo != typeof(tbl_axis)

        )
    { 
        //This line will show an error on typeInfo
        //Is there a way to cast it to a class in some way so it likes it?
        modelBuilder.Ignore<typeInfo>();
    }
} 
```

这将暴露程序集以轻松获取它。

```
public class AssemblyInformationPOCO_QM
{

    public static System.Reflection.Assembly Get
    {
        get
        {
            return typeof(AssemblyInformationPOCO_QM).Assembly;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:24:52.913

这是一些代码，可以满足您的需求。它查找明确包含在 DbSet 属性中的所有类型，然后使用它来查找模型程序集中不在 DbSet 中的所有类型，然后对它们调用 Ignore。

```
public class MyContext : DbContext
{

    // DbSet properties go here

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        var dbSetTypes = this.GetType()
            .GetProperties()
            .Where(p => p.PropertyType.Name == "DbSet`1")
            .Select(s => s.PropertyType.GenericTypeArguments.Single());

        var nonDbSetTypes = typeof(MyEntityClass).Assembly // <- replace MyEntityClass with one of your types
            .GetTypes()
            .Except(dbSetTypes);

        modelBuilder.Ignore(nonDbSetTypes);
    }
} 
```

# matlab - 如何在matlab中指定迭代的不收敛标准？

> ID：15908510
> 
> 赞同：0
> 
> 时间：2013-04-09T17:27:12.170
> 
> 标签：matlab, matrix

大家好，这是我为执行迭代方法（高斯赛德尔）所做的，我希望当迭代次数大于 30 时，它将停止并生成最多 30 次迭代的相应结果。但我想知道为什么输出`result`如此奇怪，我尝试通过键入来检查命令窗口上的值，`x_ans(:,1)`它给了我正确的值。为什么生成的结果不一样真的让我很沮丧。或者可以使用任何其他情况或功能来设置不收敛条件。预先真诚地感谢每一个帮助。

```
clear;clc
A = [2 8 3 1;0 2 -1 4;7 -2 1 2;-1 0 5 2]
B = [-2;4;3;5]
Es = 1e-5

n = length(B);
x = zeros(n,1);
Ea = ones(n,1);
iter = 0;

while max(Ea) >= Es
    if iter <= 30
        iter = iter + 1;
        x_old = x;
        for i = 1:n
           j = 1:n;
           j(i) = [];
            x_cal = x;
            x_cal(i) = [];
            x(i) = (B(i) - sum(A(i,j) * x_cal)) / A(i,i);
        end
    else
        break
    end

    x_ans(:,iter) = x;
    Ea(:,iter) =abs(( x - x_old) ./ x);

    end

result = [1:iter; x_ans; Ea]' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-10T16:20:20.663

我已经通过了公式，它们都很好。附带说明，总和不是必需的。问题在于您的输入数据 - 尝试重新排序！检查例如以下，它的工作原理

```
A = [7 -2 1 2;
     2 8 3 1;
     -1 0 5 2;
     0 2 -1 4;]
B = [3;-2;5;4] 
```

请参阅收敛下的[wiki 。](http://en.m.wikipedia.org/wiki/Gauss%E2%80%93Seidel_method)

# python - Bash 无法识别 python 命令

> ID：15908517
> 
> 赞同：1
> 
> 时间：2013-04-09T17:27:30.597
> 
> 标签：python, bash

我将此命令作为 bash 脚本的一部分

```
$(python -c "import urllib, sys; print urllib.unquote(sys.argv[0])", "h%23g") 
```

但是当我运行它时，我得到了这个：

```
-bash: -c: command not found 
```

好像 bash 错过了阅读`python`, 并且正在考虑`-c`命令的名称。使用反引号时会发生完全相同的情况。

我怎样才能让 bash 识别`python`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T17:37:24.527

Python 命令从您的 $(...) 结构中返回字符串“-c”，然后 bash 会尝试执行该字符串。

例如

```
python -c "import urllib, sys; print urllib.unquote(sys.argv[0])" 
```

打印“-c”，因此您实际上是在要求 bash 解释 $(-c)，对于该错误有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T17:37:14.270

我认为您想要以下内容：

```
$(python -c "import urllib, sys; print urllib.unquote(sys.argv[1])" "h%23g") 
```

这将导致`h#g`，如果这是您在一行上的全部内容，那么它还将尝试运行一个名为 的命令`h#g`，所以我假设您实际上将其用作更大命令的一部分。

您的版本的问题`sys.argv[0]`是`-c`来自命令，并且`urllib.unquote('-c')`只会返回`'-c'`.

从[文档中`sys.argv`](http://docs.python.org/2/library/sys.html#sys.argv)：

> 如果命令是使用`-c`解释器的命令行选项执行的，`argv[0]`则设置为字符串`'-c'`。

将其与[手册页](http://linux.die.net/man/1/python)中的信息相结合（强调我的）：

> **-c** *command*
> 指定要执行的命令（见下一节）。这将终止选项列表**（以下选项作为参数传递给命令）**。

因此，当您使用`-c`, `sys.argv[0]`will be`'-c'`时，提供给的参数`-c`是脚本，因此它不会包含在 中`sys.argv`，并且任何其他参数都`sys.argv`将从索引 1 开始添加。

# php - 防止用户在上传过程中关闭浏览器/更改 url

> ID：15908518
> 
> 赞同：2
> 
> 时间：2013-04-09T17:27:34.497
> 
> 标签：php, javascript, jquery, http, upload

如何防止用户在文件上传期间关闭浏览器/更改 url。我创建了一个用于文件上传的网络应用程序，它将上传巨大的文件（1-2GB）并且工作正常。除非，如果用户关闭浏览器，它就会死掉。如何在上传期间使用 javascript 显示确认框（例如：您确定要关闭浏览器）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T17:28:45.703

打开它：

```
window.onbeforeunload = "Are you sure you want to leave?"; 
```

要关闭它：

```
window.onbeforeunload = null; 
```

请记住，这不是一个正常的事件 - 您不能以标准方式绑定到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:31:07.057

为“onbeforeunload”事件定义一个自定义函数。

```
var window.onbeforeunload = function(){ alert('window is closing'); } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T17:33:26.860

```
$(window).bind('beforeunload', function(){
      return 'custom message go here';
    }); 
```

# rest - 调用 Checking out REST Api of Broadleaf commerce 的 JSON 格式如何

> ID：15908519
> 
> 赞同：0
> 
> 时间：2013-04-09T17:27:36.230
> 
> 标签：rest, broadleaf-commerce

[我已经按照其文档（ http://docs.broadleafcommerce.org/current/REST-Tutorials.html](http://docs.broadleafcommerce.org/current/REST-Tutorials.html)）设置了 Broadleaf 以使其运行。我想使用 REST Api 检查购物车；即**/cart/checkout**。因此，我查看了代码内部，以了解发送的 JSON 格式的外观。通过查看代码，我发现需要传递 JSON 数据，如下所示：

```
{
   "paymentInfo": {
      "id": ,
      "orderId": ,
      "type": ,
      "address": {
         "id":
         "firstname":
         "lastname":
         "addressLine1":
         "addressLine2":
         "city":
         "state":
         "country":
         "postalCode":

      },
      "phone": "",
      "additionalFields": "",
      "amount": "",
      "amountItems": "",
      "customerIpAddress": "",
      "referenceNumber": ""
   }, 
   "referenced": {
      "id": "",
      "referenceNumber": "",
      "type": "",
      "pan": "",
      "cvvCode:" "",
      "expirationMonth": "",
      "expirationYear": "",
      "accountNumber": "",
      "routingNumber": "",
      "pin": ""
   }
} 
```

但是，我不知道 JSON 数据的样子。因此，如果有人曾经使用过 api，请通过显示数据示例来帮助我，以便提出请求。期待答案。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T19:32:19.950

我们所有的 REST API 都是通过“包装器”概念公开的。例如，有 CustomerWrapper、OrderWrapper 等。这些包装器定义了哪些属性使用 REST API 来回序列化。

对于您的具体情况，您应该查看 PaymentReferenceMapWrapper。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-07T06:56:47.437

```
{
    "id": 1751,
    "status": "IN_PROCESS",
    "totalTax": {
        "amount": "0.00",
        "currency": "INR"
    },
    "totalShipping": {
        "amount": "0.00",
        "currency": "INR"
    },
    "subTotal": {
        "amount": "860.00",
        "currency": "INR"
    },
    "total": {
        "amount": "860.00",
        "currency": "INR"
    },
    "customer": {
        "id": 2600
    },
    "orderItems": [
        {
            "id": 1752,
            "name": "abc",
            "quantity": 2,
            "retailPrice": {
                "amount": "430.00",
                "currency": "INR"
            },
            "salePrice": {
                "amount": "430.00",
                "currency": "INR"
            },
            "orderId": 1751,
            "categoryId": 10300,
            "skuId": 10212,
            "productId": 10212,
            "isBundle": false,
            "orderItemPriceDetails": [
                {
                    "id": 1752,
                    "totalAdjustmentValue": {
                        "amount": "0.00",
                        "currency": "INR"
                    },
                    "totalAdjustedPrice": {
                        "amount": "860.00",
                        "currency": "INR"
                    },
                    "quantity": 2,
                    "adjustments": []
                }
            ],
            "isDiscountingAllowed": true
        }
    ],
    "fulfillmentGroups": [
        {
            "id": 1502,
            "orderId": 1751,
            "total": {
                "amount": "860.00",
                "currency": "INR"
            },
            "fulfillmentGroupItems": [
                {
                    "id": 1752,
                    "fulfillmentGroupId": 1502,
                    "orderItemId": 1752,
                    "totalTax": {
                        "amount": "0.00",
                        "currency": "INR"
                    },
                    "quantity": 2,
                    "totalItemAmount": {
                        "amount": "860.00",
                        "currency": "INR"
                    }
                }
            ]
        }
    ],
    "payments": [
        {
            "id": 601,
            "orderId": 1751,
            "type": "COD",
            "amount": "860.00",
            "currency": "INR",
            "gatewayType": "Passthrough",
            "transactions": [
                {
                    "id": 601,
                    "orderPaymentId": 601,
                    "type": "AUTHORIZE_AND_CAPTURE",
                    "success": true,
                    "amount": "860.00",
                    "currency": "INR"
                }
            ]
        }
    ]
} 
```

这是您在成功执行 /cart/checkout/payment 后使用方法 GET 从 /cart?customerId="" 获得的相同 json

# c# - 通过比较计数检索不同的项目

> ID：15908520
> 
> 赞同：-2
> 
> 时间：2013-04-09T17:27:44.247
> 
> 标签：c#, linq

```
int itemCount=3;

prod.Add("P1");
prod.Add("P2");
prod.Add("P1");
prod.Add("P2");
prod.Add("P1");
prod.Add("P3"); 
```

在此产品列表中，我想获取每个项目的计数，如果计数匹配，`itemCount`则需要将其放入数组中。

在这种情况下，只有 P1 必须放入数组。

谁能帮我吗？我想要 C# 中的代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:29:37.963

如果`prod`是 a `IEnumerable<string>`，您可以使用 linq 执行此操作

```
var results =
    (from s in prod
     group s by s into g
     where g.Count() == itemCount
     select g.Key)
    .ToArray(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:29:54.680

我认为这`prod`是`List<string>`或`IEnumerable<string>`一般来说：

```
var items = prod.GroupBy(x => x)
                .Where(g => g.Count() == itemCount)
                .Select(g => g.Key)
                .ToArray(); 
```

# iis - IIS Windows 身份验证 (NTLM)

> ID：15908533
> 
> 赞同：0
> 
> 时间：2013-04-09T17:28:20.470
> 
> 标签：iis

我们正在使用仅启用 Windows 身份验证的 IIS 7.5。提供者是 ntlm 和 negogiate（因为我们希望它可以通过互联网访问）。

客户端是 silverlight 调用 wcf 服务。即使我们已经建立了会话，客户端也会发送协商，服务器返回 401 并带有一些身份验证令牌。这发生在互联网上，有许多成功的呼叫（与失败的呼叫混杂在一起）

许多电话工作正常，只需发送 sessionid，一切正常。

在提琴手中，我们在下面看到

客户端发送

授权：协商 TlRMTVNTUAABAAAAl4II4gAAAAAAAAAAAAAAAAAAAAAGAbEdAAAADw== ASP.NET_SessionId=0ix0fqf02j1imrpfc4awit3w

服务器发送

WWW-Authenticate: Negotiate TlRMTVNTUAACAAAACgAKADgAAAAVgonitqRU/FVLp9EAAAAAAAAAAI4AjgBCAAAABgGxHQAAAA9BAEQATABBAEIAAgAKAEEARABMAEEAQgABAA4AQwBJAFIAVAAtAEQAMwAEABYAYQBkAGwAYQBiAC4AbABvAGMAYQBsAAMAJgBDAEkAUgBUAC0ARAAzAC4AYQBkAGwAYQBiAC4AbABvAGMAYQBsAAUAFgBhAGQAbABhAGIALgBsAG8AYwBhAGwABwAIAMsTFgtFNc4BAAAAAA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-04T17:53:56.353

我不确定我理解你的问题，但我猜你想解决间歇性 NTLM 故障？

[您描述的标头是NTLM](http://en.wikipedia.org/wiki/NTLM)质询响应协议的一部分。这是一个更完整的示例：

```
Client: Get / HTTP/1.1

Server: HTTP/1.1 401 Unauthorized
        WWW-Authenticate: Negotiate
        WWW-Authenticate: NTLM

Client: Get / HTTP/1.1
        Authorization: Negotiate ###################### (encrypted Negotiate)

Server: HTTP/1.1 401 Unauthorized
        WWW-Authenticate: Negotiate ###################### (encrypted Challenge)

Client: Get / HTTP/1.1
        WWW-Authenticate: Negotiate ###################### (encrypted Response)

Server: HTTP/1.1 200 OK 
```

在公共互联网上使用这种身份验证方法可能是个坏主意；它旨在用于客户端和服务器都可以访问公共 Windows Active Directory 域的私有 Intranet。

我怀疑您的问题可能会在“[连接到 Authenticated Services 时间歇性提示您输入凭据或遇到超时](http://support.microsoft.com/kb/975363/en-us)”知识库文章中得到解决。

以下是一些其他相关参考资料：

*   [NTLM 瓶颈和 RPC 运行时](http://blogs.technet.com/b/askds/archive/2011/09/15/is-this-horse-dead-yet-ntlm-bottlenecks-and-the-rpc-runtime.aspx)
*   [NTLM 和 MaxConcurrentApi 问题](http://blogs.technet.com/b/ad/archive/2008/09/23/ntlm-and-maxconcurrentapi-concerns.aspx)
*   [NTLM 身份验证的性能调整](http://support.microsoft.com/kb/2688798)

# asp.net - 在c#中更改查询字符串值而不重定向

> ID：15908535
> 
> 赞同：1
> 
> 时间：2013-04-09T17:28:29.467
> 
> 标签：asp.net, c#-4.0, asp.net-4.0

我有一个看起来像这样的查询字符串：

“somename1=123&QueryString=PlaceHolder%3dNothing%26anotherid%3dsomevalue&somename=somevalue”

但我希望查询字符串类似于下面的查询字符串，并用更新的查询字符串替换整个查询字符串有没有办法在没有重定向的情况下做到这一点？

"somename1=somevalue1&PlaceHolder=Nothing&somename2=somevalue2&somename3=somevalue3"

基本上需要删除： "QueryString=" with empty string "%3d" with "&" "%26" with "="

到目前为止我所做的是：

```
string strQueryString = Request.QueryString.ToString();
if (strQueryString.Contains("QueryString="))
{
    strQueryString = strQueryString.Replace("QueryString=", "");
    if (strQueryString.Contains("%26")) strQueryString = strQueryString.Replace("%26", "&");
    if (strQueryString.Contains("%3d")) strQueryString = strQueryString.Replace("%3d", "=");
    string x = strQueryString;
} 
```

和：

```
 // reflect to readonly property
PropertyInfo isreadonly = typeof(System.Collections.Specialized.NameValueCollection).GetProperty("IsReadOnly", BindingFlags.Instance | BindingFlags.NonPublic);
// make collection editable
isreadonly.SetValue(this.Request.QueryString, false, null);
if (this.Request.QueryString.ToString().Contains("QueryString="))
{
    this.Request.QueryString.ToString().Replace("QueryString=", "");
    if (this.Request.QueryString.ToString().Contains("%26")) this.Request.QueryString.ToString().Replace("%26", "&");
    if (this.Request.QueryString.ToString().Contains("%3d")) this.Request.QueryString.ToString().Replace("%3d", "=");
    string x = this.Request.QueryString.ToString();
}

// make collection readonly again
isreadonly.SetValue(this.Request.QueryString, true, null); 
```

代码的第二部分没有替换字符，我不知道在删除所有字符或替换它们后如何将查询字符串更改为新的查询字符串。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T17:44:38.783

不支持更改当前请求的查询字符串。使用私有反射来编辑一些内存状态很可能会破坏 ASP.NET，因为它假定查询字符串是不可变的。更改查询字符串的唯一方法是发出新请求，或者通过执行重定向，或者通过执行某种子请求，例如通过向同一页面发出新的 HTTP 请求但使用不同的查询字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-02T08:54:45.613

我可以建议一个不太知名的内置键/值字典[Context.Items](https://msdn.microsoft.com/en-us/library/system.web.httpcontext.items(v=vs.110).aspx)。

有了这个，您非常希望获得比切换只读 QueryString 对象更好的性能，并且它还在整个请求中持续存在，因此您可以在模块、处理程序等之间共享它。

创造

```
string strQueryString = Request.QueryString.ToString();
if (strQueryString.Contains("QueryString="))
{
    HttpContext.Current.Items("qs") = strQueryString.Replace("QueryString=", "").Replace("%26", "&").Replace("%3d", "=");
} 
```

采用

```
string x = HttpContext.Current.Items("qs_d").ToString(); 
```

*旁注：我缩短了一些代码，因为不需要先检查是否包含任何内容，如果是，请替换，只需运行替换，它会更快*

# php - 字符串中的与号导致不正确的长度/比较

> ID：15908537
> 
> 赞同：3
> 
> 时间：2013-04-09T17:28:31.263
> 
> 标签：php, string, urlencode, urldecode

我有两个字符串（应该是相同的）。一个从 API 结果中提取，一个由用户输入。我试图比较它们并失败了。当我 var_dump 时，我得到以下信息：

```
var_dump($str1);
var_dump($str2);

string(21) "Software & Technology" 
string(25) "Software & Technology" 
```

注意 $str2 的长度不正确。有人知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T17:37:43.940

看来您`&amp;`在其中一个字符串中有 HTML & 字符。您应该在比较字符串之前使用[**html_entity_decode ：**](http://php.net/manual/en/function.html-entity-decode.php)

```
if (html_entity_decode($str1) == html_entity_decode($str2)) {
    // ...
} 
```

### 现场演示：http: [//ideone.com/pkWEJC](http://ideone.com/pkWEJC)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-11T16:35:47.443

使用 html_entity_decode 将解决与号（和其他字符）问题，使用 strcmp 将处理其余的问题。

```
if (strcmp(html_entity_decode($str1), html_entity_decode($str2)) == 0) {
    // ..
} 
```

# python - python解包缓冲区数据

> ID：15908541
> 
> 赞同：5
> 
> 时间：2013-04-09T17:28:37.030
> 
> 标签：python, linux, tcp, dhcp

我在半径中使用模块，它以十六进制或二进制格式从 coovachilli`rlm_python`获取 DHCP 位置。`option82`

将其作为字符串捕获显示为 this value `\001\027\002\025\001+\001\024`，但看起来 python 显示的值被截断，因为`option82`contains`suboptions` 编码在`TLVs-type,length,values`这意味着该字段以 type 开头`0x01(circuit ID, per RFC 3046)`，后跟一个字节长度。

知道如何抓住这个并正确解压缩选项吗？

我已经使用`struct.unpack`但没有意义解压缩了字符串……因为它没有说明打包`suboptions`的`option82`字段。

```
Python 2.4.3 (#1, May  5 2011, 16:39:10) 
[GCC 4.1.2 20080704 (Red Hat 4.1.2-50)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> from struct import *
>>> unpack('=hhl',"\001\027\002\025\001+\001\024" )
(5889, 5378, 335620865) 
```

有任何想法吗？

**更新：**

Coovachilli 是用它编译的`--locationopt82`，它会将位置作为属性发送，就像这样......

```
rad_recv: Accounting-Request packet from host 10.66.53.49 port 53178, id=101, length=342
        ChilliSpot-Version = "1.3.0"
        ChilliSpot-Acct-View-Point = ChilliSpot-Client-View-Point
        Event-Timestamp = "Apr 18 2013 11:59:16 BST"
        User-Name = "3C-D0-F8-4A-05-68"
        Acct-Input-Octets = 0
        Acct-Output-Octets = 22851
        Acct-Input-Gigawords = 0
        Acct-Output-Gigawords = 0
        Acct-Input-Packets = 0
        Acct-Output-Packets = 370
        Acct-Session-Time = 5401
        ChilliSpot-Session-State = Authorized
        Acct-Status-Type = Interim-Update
        Acct-Session-Id = "516fbceb00000002"
        Framed-IP-Address = 10.75.33.46
        NAS-Port-Type = Wireless-802.11
        NAS-Port = 2
        NAS-Port-Id = "00000002"
        Calling-Station-Id = "3C-D0-F8-4A-05-68"
        Called-Station-Id = "00-50-56-B7-66-00"
        NAS-IP-Address = 10.75.32.7
        ChilliSpot-Location = "\001\030\002\026\001+\001\024"
        ChilliSpot-Location-Change-Count = 15
        NAS-Identifier = "VLAN299-REGENT"
        WISPr-Location-ID = "isocc=GR,cc=44,ac=01200,network=mywifi,my_Network_regent"
        WISPr-Location-Name = "REGENT" 
```

freeradius 具有`rlm_python`查找会计请求的模块

```
def accounting(p):
    file = open("/tmp/test.log","a")
    username = None
    chillilocation = None
    output = StringIO.StringIO()

    for t in p:
        if t[0] == 'User-Name':
            username = t[1]
        elif t[0] == 'ChilliSpot-Location':
            chillilocation = t[1]a
             output.write(t[1])

    content = output.getvalue()

    file.write("I am being called in radius accouting section as %s and location is %s \n" % (username,content))
    file.close()
    print "---Accounting---"
    radiusd.radlog(radiusd.L_INFO, '*** radlog call in accounting (0) ***')
    print
    print p
    return radiusd.RLM_MODULE_OK 
```

我尝试将 ChilliSpot-Location 存储在`string`and中`stringIO`，使用 struct 解包但无济于事，它看起来像是 TLV 格式...

任何想法如何剥离它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T04:46:02.170

解包不会解包到“有意义的”值。它将字符串解包为数字字段序列，以便每个字段的大小由格式字符串的每个字符指定（字母前面的数字是乘数）。

解包不应该使用八位字节大小的字段吗？

> >>> unpack('=8B',"\001\027\002\025\001+\001\024")
> (1, 23, 2, 21, 1, 43, 1, 20)
> # 或者可能是 '+ ' 是分隔符 (43):
> >>> unpack('=6Bh',"\001\027\002\025\001+\001\024")
> (1, 23, 2, 21, 1, 43, 5121 )

第一个字节可能是一个电路子选项代码 (unpack()[0]==1)，其大小为 23，这意味着我们没有得到整个子选项值。但我们也可能只有大小 == 10 或 8 字节内容的子选项的包含值。

我不太确定选项 82 是否应该包含可读字符串，尽管“ChilliSpot-Location”确实如此。RFC3046 表示电路子选项应包含“路由器接口号”、端口号和其他数值等内容。但是 rad_recv 的那个属性真的来自 82 选项吗？

# c# - 2nd Page_Load 上的 NullReferenceException

> ID：15908543
> 
> 赞同：3
> 
> 时间：2013-04-09T17:28:42.070
> 
> 标签：c#, asp.net, .net, nullreferenceexception

首先我想说：是的，我知道有很多问题与我的相似，但又不一样。

当我在我的开发人员机器上启动我的 12 个站点中的一个时，一切都运行良好，并且在服务器上，其中 11 个站点也可以正常工作。

当我启动第 12 个站点时，它首先工作正常，但是当它导致回发（按钮、带有 AutoPostBack 的 DropDownList 等...）时，我收到以下错误：

```
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.NullReferenceException: Object reference not set to an instance of an object.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[NullReferenceException: Object reference not set to an instance of an object.]
   Infoscreen.Anzeigeeinstellungen.Page_Load(Object sender, EventArgs e) in C:\Users\Krusty\Desktop\Schule\Diplomarbeit\Infoscreen\Infoscreen\Anzeigeeinstellungen.aspx.cs:97
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +24
   System.Web.UI.Control.LoadRecursive() +70
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3047 
```

路径（C:\Users\Krusty\Desktop\Schule\Diplomarbeit\Infoscreen\Infoscreen\Anzeigeeinstellungen.aspx.cs）是文件在我的开发人员机器上的路径。但为什么？？我从未在我的程序中对任何路径进行硬编码，甚至重新创建该站点也不起作用。

我该怎么办？任何提示/提示将不胜感激。

**编辑：**

```
91    if (!Page.IsPostBack)
92    { 
93        Response.Cookies["Infoscreen_Anzeigeeinstellungen_Ausgewählte_Abteilung"].Value =  ausgewählte_Abteilung.ToString(); 
94    }
95    else
96    { 
97        ausgewählte_Abteilung = Request.Cookies["Infoscreen_Anzeigeeinstellungen_Ausgewählte_Abteilung"].Value; 
98    } 
```

**编辑：**

是的，IIS 配置为使用 Cookie

**编辑：**

解决了！在 VisualStudio2010 Server 中，char 'ä' 有效......
在 IIS7 中它没有......
所以 cookie 永远不会被正确设置并且 get 请求挂起

将 cookie 命名为“Infoscreen_Anzeigeeinstellungen_Ausgewaehlte_Abteilung”，现在可以正常工作

**可以关闭**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-13T14:25:30.847

正如您已经发现自己但仅供将来参考：

在处理 cookie 的代码中，c# 中允许使用“名称”（使用变音符号），但根据[RFC2616](https://www.rfc-editor.org/rfc/rfc2616#section-2.2)，cookie 的令牌必须包含 US-ASCII 字符的子集。

```
if (!Page.IsPostBack)
    { 
        Response.Cookies["Infoscreen_Anzeigeeinstellungen_Ausgewählte_Abteilung"].Value =  ausgewählte_Abteilung.ToString(); 
    }
    else
    { 
        ausgewählte_Abteilung = Request.Cookies["Infoscreen_Anzeigeeinstellungen_Ausgewählte_Abteilung"].Value; 
    } 
```

因此，如果您的 cookiekey 是基于表单/控件名称生成的，那么一种拥有安全 Cookies 密钥的方法可能是：

```
static string TokenRFC2616(string key)
{
    const string separators = "()|<>@,;:\\\"/[]?={} ";
    var chars = from ch in key.Normalize(NormalizationForm.FormD)
            where CharUnicodeInfo.GetUnicodeCategory(ch) 
                     != UnicodeCategory.NonSpacingMark &&
                  separators.IndexOf(ch)==-1
            select ch;
    return String.Concat(chars);
}

string cookiekey = TokenRFC2616(
       "Infoscreen_Anzeigeeinstellungen_Ausgewählte_Abteilung");
if (!Page.IsPostBack)
{ 
   Response.Cookies[cookieKey].Value =  ausgewählte_Abteilung.ToString(); 
}
else
{ 
    ausgewählte_Abteilung = Request.Cookies[cookieKey].Value; 
} 
```

（在上面的示例中，cookie 名称将是`Infoscreen_Anzeigeeinstellungen_Ausgewahlte_Abteilung` ）

# javascript - 如何从这个范围设置 req.session？

> ID：15908546
> 
> 赞同：0
> 
> 时间：2013-04-09T17:28:50.273
> 
> 标签：javascript, node.js, express

我正在使用 Express 编写 Node.js 应用程序，并使用 node-postgres 编写 PostgreSQL 数据库。我想根据他们的电子邮件查找当前用户的用户名和真实姓名，并将它们设置在req.session中。但是，如果我在下面的代码中将它们设置在我所在的位置，当我们离开该块时它们是未定义的（即第一个 console.log 语句打印正确的信息，第二组打印未定义。我该如何解决这个问题？

```
var client = new pg.Client(app.conString);
    var realname = "";
    var username = "";

    client.connect();
    var query = client.query(
        "SELECT * FROM users WHERE email = $1;",
        [req.session.email]
    );

    query.on('row', function(row) {
        req.session.realname = row.realname;
        req.session.username = row.username;
        console.log(req.session.realname);
        console.log(req.session.username);   
    });

    console.log(req.session.realname);
    console.log(req.session.username);

    query.on('end', function() {
        client.end();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:40:46.117

第二对`console.log`将在查询结果可用之前执行（在`row`事件处理程序中）。

如果您的代码将在 Express 路线中使用，您将使用如下内容：

```
app.get('/', function(req, res) {
  var client = new pg.Client(app.conString);
  var realname = "";
  var username = "";

  client.connect();
  var query = client.query(
    "SELECT * FROM users WHERE email = $1;",
    [req.session.email]
  );

  query.on('row', function(row) {
    req.session.realname = row.realname;
    req.session.username = row.username;
  });

  query.on('end', function() {
    client.end();
    res.send(...); // <-- end the request by sending back a response
  });
}); 
```

使用 EventEmitter 接口的另一种方法是`node-postgres`将回调传递给`query`（使用 Express 恕我直言看起来更好）：

```
 client.query(
    "SELECT * FROM users WHERE email = $1;", 
    [req.session.email], 
    function(err, results) {
      if (err)
         // handle error
      else
      if (results.length)
      {
        req.session.realname = results[0].realname;
        req.session.username = results[0].username;
      }
      res.send(...); // done
    }); 
```

# sql - SQL 循环遍历表中的记录

> ID：15908548
> 
> 赞同：1
> 
> 时间：2013-04-09T17:28:50.863
> 
> 标签：sql, loops, cursor, case

我有一个名为 master 的表，主键是 account_num。每个帐号都有一个 account_type（单个字符）。我需要执行以下操作：

1.  查找类型为 A 或 B 的所有帐户。
2.  将该帐号与交易发生时间的时间戳一起存储在名为 year_end_close 的新表中
3.  将 master 中所有类型为 A 的帐户设置为 C，并将所有类型为 B 的帐户设置为 D

在 SQL 中处理这个问题的最佳方法是什么？while循环？案例陈述？光标？任何帮助表示赞赏。该表有大约 17,000 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:12:40.113

您不需要使用光标/循环来执行此类操作。在编写 SQL 时，始终尝试首先寻找基于集合的解决方案。我会推荐一个`CASE`声明，这是你提到的选项之一。

试试这个：

```
BEGIN TRAN;

SELECT account_num, CURRENT_TIMESTAMP
INTO year_end_close
FROM dbo.master
WHERE account_type IN ('a','b');

UPDATE dbo.master
SET account_type = CASE account_type
                     WHEN 'a' THEN 'c'
                     WHEN 'b' THEN 'd'
                     ELSE account_type
                     END
WHERE account_type IN ('a','b');

COMMIT TRAN; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T17:45:51.013

你在寻找这样的东西吗？（将“PRINT”语句替换为您的实际 SQL 语句）

```
DECLARE @MasterTable TABLE
(
  account_num int,
  account_type varchar(1)
)
INSERT INTO @MasterTable VALUES (1, 'A')
INSERT INTO @MasterTable VALUES (2, 'A')
INSERT INTO @MasterTable VALUES (3, 'B')
INSERT INTO @MasterTable VALUES (4, 'B')
INSERT INTO @MasterTable VALUES (5, 'C')
INSERT INTO @MasterTable VALUES (6, 'C')

DECLARE @account_num int
DECLARE @account_type varchar(1)
DECLARE @switch_type varchar(1)

DECLARE db_cursor CURSOR FOR  
SELECT account_num, account_type 
FROM @MasterTable
WHERE account_type IN ('A', 'B')  

OPEN db_cursor   
FETCH NEXT FROM db_cursor INTO @account_num, @account_type  

WHILE @@FETCH_STATUS = 0   
BEGIN   
    IF @account_type = 'A'
        SET @switch_type = 'C'
    ELSE
        SET @switch_type = 'D'

    PRINT 'INSERT year_end_close (account_num, timestampfield) VALUES (' + CAST(@account_num AS VARCHAR) + ', GETDATE())'
    PRINT 'UPDATE @MasterTable SET account_type = ' + @switch_type + ' WHERE account_num = ' + CAST(@account_num AS VARCHAR)
FETCH NEXT FROM db_cursor INTO @account_num, @account_type   
END   

CLOSE db_cursor   
DEALLOCATE db_cursor 
```

# php - 我正在尝试在外部 url 上提交表单，但出现错误：不允许您请求的操作

> ID：15908549
> 
> 赞同：0
> 
> 时间：2013-04-09T17:28:58.550
> 
> 标签：php, curl

在我制作脚本后，我试图自动将 cron 上的表单提交到外部 url 我从外部站点收到此错误

```
An Error Was Encountered

The action you have requested is not allowed. 
```

无论如何我可以解决这个问题吗？

这是卷曲代码

```
$ch = curl_init();

curl_setopt($ch, CURLOPT_URL, "http://www.extsite.com/submit"); 
  curl_setopt($ch, CURLOPT_POST, true);
  curl_setopt($ch, CURLOPT_POSTFIELDS, array(
  'contenttitle' => '$title',
  'contentpath' => '$path',
  'submit' => 'submit'
  ));
  curl_setopt($ch, CURLOPT_HEADER, false);
  curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

  $result = curl_exec($ch);
  echo "$result"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:33:21.263

如果站点的管理员不希望有人自动提交表单，他们可能会检查`Origin`HTTP 标头并检查它是否属于他们的域。如果不是，他们将返回该错误消息。

如果这是您即将采取的法律行动，您可以通过电子邮件询问网站管理员。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:33:00.433

尝试删除变量周围的引号

```
 '$title' should be just $title 
```

还可以检查您是否提交了正确的参数？'submit'=>'submit' 对我来说看起来不合适

我说尝试 print_r 你的数组，看看它是否还好。

# ruby-on-rails - 如何在 Rails 中处理“软孤儿”帖子（并转移所有权）

> ID：15908551
> 
> 赞同：0
> 
> 时间：2013-04-09T17:29:05.117
> 
> 标签：ruby-on-rails, devise, associations, roles

我有一个名为帖子的模型，我有用户（使用 Devise、CanCan 和 Rolify），每个帖子都有不同的角色。与帖子相关的用户角色是所有者、版主和任何内容（普通用户或访客）。

这是我想要发生的事情：

用户最初创建帖子，然后可以邀请其他人帮助对其进行审核。所有者拥有版主的所有能力，并具有邀请更多版主的额外能力。我需要一种方法来处理所有者用户取消他的帐户（软删除），而不会孤立该帖子并且不会让它没有所有者。我还想要一种将所有者角色从管理员帐户或所有者自己转移给另一个用户的方法。

现在我有属于用户的帖子和用户有很多帖子，但不确定这是否是正确的开始方式......

关于如何通过 Gem 或从头开始实现这一点的任何指导？

# excel - 如何使用 vbscript 获取正在运行的 excel 实例的工作簿名称..？

> ID：15908553
> 
> 赞同：4
> 
> 时间：2013-04-09T17:29:13.090
> 
> 标签：excel, vbscript

```
Dim objXL, strMessage

On Error Resume Next

Set objXl = GetObject(, "Excel.Application")

If Not TypeName(objXL) = "Empty" then
    strMessage = "Excel Running"    
Else 
    strMessage = "Excel NOT Running"
End If

MsgBox strMessage, vbInformation, "Excel Status" 
```

嘿，非常感谢朋友。这真的让我更接近正在寻找的东西，更接近解决方案。让我告诉你我的确切要求/问题：实际上我的问题是，我试图从 Java 中找到具有特定工作簿名称的 Excel 实例，但即使它出现也没有返回 Excel 实例。就我而言，我打开了一个 Excel，其中包含 2 个工作簿“Book1”和“Book2”。当我尝试使用这些工作簿名称中的任何一个查找 Excel 时，没有给出任何结果。为了缩小范围，仅在我的一台客户端计算机上观察到此问题。在其他机器上，同样的 java 代码运行良好。这在卸载 Excel2010 并安装 Excel2007 后开始发生。

所以我想要做的是，想要创建一个 vbscript，我可以在其中将工作簿名称作为输入，它会返回我是否有这样的 Excel 实例以给定的工作簿名称运行。

嘿，请指导我进一步创建这样的脚本，我将在其中给出工作簿名称，脚本将查找此类 Excel 实例是否正在运行。即使工作簿名称作为脚本中的硬编码输入传递也不是问题。我将根据我的工作簿名称进行更改。

感谢您之前的回复，也正在等待这个回复.. :))

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T05:39:57.843

如果您可能打开了多个[excel](/questions/tagged/excel "显示标记为“excel”的问题")实例而不是检测特定工作簿是否打开，您可以使用：

1.  此代码用于检查所有实例中所有打开的工作簿[VBA 可以跨 Excel 实例吗？](https://stackoverflow.com/questions/2971473/can-vba-reach-across-instances-of-excel)
2.  检测文件是否已被使用。请参阅[检测 Excel 工作簿是否已打开中](https://stackoverflow.com/questions/9373082/detect-whether-excel-workbook-is-already-open-using-vba)的[Sid 建议](https://stackoverflow.com/a/9373914/641067)
3.  [Doug 的建议](http://www.pcreview.co.uk/forums/getobject-more-than-1-excel-running-t3575757.html)用于`GetObject`附加到您知道工作簿名称的主机实例。根据[Microsoft 支持文章](http://support.microsoft.com/kb/288902)，您可以使用它`Set xlApp = GetObject("YourExcelName").Application`来检测“YourExcelName”是否在任何实例中打开

在您最初提出的问题中，下面的代码`GetObject`用于检测是否有任何实例是打开的，以及是否有一个`ActiveWorkbook`以及那个名称是什么。从您编辑的问题中，我上面的三个链接比这段代码更相关。

```
Dim objXL, WB, strMessage
On Error Resume Next
Set objXL = GetObject(, "Excel.Application")
Set WB = objXL.ActiveWorkbook
On Error GoTo 0
If Not TypeName(objXL) = "Empty" Then
    If Not TypeName(WB) = "Nothing" Then
    strMessage = "Excel Running - " & objXL.ActiveWorkbook.Name & " is active"
    Else
    strMessage = "Excel Running - no workbooks open"
    End If
Else
    strMessage = "Excel NOT Running"
End If
MsgBox strMessage, vbInformation, "Excel Status""" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:21:24.113

我不会使用 Excel，希望接下来的代码能给你一个起点。但是，如果您有许多 Excel 实例正在运行，那么您应该更多地自己调查未来。

```
Dim objXL, strName, bFound, strMsg

On Error Resume Next
Set objXl = GetObject(, "Excel.Application")
On Error GoTo 0
If Err Then
    MsgBox "Excel NOT Running", vbInformation, "Excel Status"
    WScript.Quit(-1)
End If

strName = InputBox("Enter Workbook Name:", "Required")
If Len(strWBName) = 0 Then WScript.Quit(-2)

bFound = False
If objXL.Workbooks.Count > 0 Then
    For Each wb In objXL.Workbooks
        If wb.Name = strName Then
            bFound = True
            Exit For
        End If
    Next
End If

strMsg = "Workbook " & UCase(strName) & " is "
If bFound Then
    MsgBox strMsg & "open", vbInformation, "Result"
Else
    MsgBox strMsg & "not open", vbInformation, "Result"
End If 
```

**PS**在阅读 Brettdj 后更新的答案看起来`GetObject`可以帮助多个 Excel 实例，因此如果可行，您可以将您的测试封装在一个函数中。

```
Function IsWBookOpen(strWBook)
    On Error Resume Next
    Dim wb: Set wb = GetObject(strWBook)
    IsWBookOpen = Not Err
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T18:30:34.697

您可以使用以下命令捕获活动工作簿名称。objXL.ActiveWorkbook.Name

```
Dim objXL, strMessage

On Error Resume Next

Set objXL = GetObject(,"Excel.Application")

If Not TypeName(objXL) = "Empty" then
    strMessage = "Excel Running"    
    WScript.Echo "The active workbook name is " & objXL.ActiveWorkbook.Name
Else 
    strMessage = "Excel NOT Running"
End If

MsgBox strMessage, vbInformation, "Excel Status" 
```

# entity-framework - 在运行时获取实体方面和其他元数据

> ID：15908554
> 
> 赞同：1
> 
> 时间：2013-04-09T17:29:13.240
> 
> 标签：entity-framework, metadata, entity-framework-5, ef-model-first, facets

我有 .NET 4.0 WinForms 应用程序，并且我使用带有模型优先方法的实体框架 5。在 VS EF 设计器中，我创建了十几个具有大量标量`String`类型属性的实体，然后在属性工具栏中我为它们配置了参数（即**常规**参数、**Facets**参数），以满足数据库要求。

在 BL 层中，我能够验证实体对象，以检查它是否包含正确的值，例如通过使用`DbContext.Entry(Of T)(entity).GetValidationResult()`方法。但我还需要为 WinForms 开发 GUI 层输入字段验证。我想实现基于实体集属性的元数据值的动态 GUI 验证，以使 BL 验证与 GUI 验证同步，并避免编写源代码的冗余。

我的问题是：如何在运行时获取自动生成实体的元数据值，尤其是方面元数据值（即**Fixed Length**、**Max Length**、**Nullable ）？**

据我所知，有可能利用基于手动创建的部分类中的属性属性的数据注释。但是，在 Model First 方法中，此解决方案还可能涉及冗余问题和与 VS EF Designer 属性工具栏和数据库中的元数据的同步问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:26:56.360

这应该可以帮助您入门，但是您需要使用调试器并专门进行测试才能获得所需的东西...

一个示例代码...

```
using (var db = new MyContext())
{
var objectContext = ((IObjectContextAdapter)db).ObjectContext;

var baseset = objectContext
    .MetadataWorkspace
    .GetEntityContainer(objectContext.DefaultContainerName, DataSpace.CSpace)
    .BaseEntitySets
    .First(meta => meta.ElementType.Name == "YourEntityClassName");

var elementType = objectContext
    .MetadataWorkspace
    .GetEntityContainer(objectContext.DefaultContainerName, DataSpace.CSpace)
    .BaseEntitySets
    .First(meta => meta.ElementType.Name == "YourEntityClassName")
    .ElementType;

EdmMember member = elementType.Members[2];

Facet item;
// if (member.TypeUsage.Facets.TryGetValue(EdmProviderManifest.StoreGeneratedPatternFacetName, false, out item))
if (member.TypeUsage.Facets.TryGetValue("StoreGeneratedPattern", false, out item))
{
    var value = ((StoreGeneratedPattern)item.Value) == StoreGeneratedPattern.Computed;
} 
```

但这只是故事的一部分。

我意识到这在某些情况下是有效的（因此您需要进行一些实验），具体取决于您的需要。但你也`other spaces`有 - 例如`SSpace`. 因此，例如对于表名，这效果更好......

```
var ssSpaceSet = objectContext.MetadataWorkspace.GetItems<EntityContainer>(DataSpace.SSpace).First()
    .BaseEntitySets
    .First(meta => meta.ElementType.Name == "YourTableName"); 
```

...然后是私有`Table`财产。

在您的情况下，您应该在那里提供大多数信息 - 但例如上面生成的商店没有在那里填充 - 但我猜在其他一些“空间”中（更多在其中一个链接中）。

并查看以下链接：

* * *

[获取模型架构以使用不支持 CreateDatabase 的提供程序以编程方式创建数据库](https://stackoverflow.com/questions/15891112/get-model-schema-to-programmatically-create-database-using-a-provider-that-doesn/15891802#15891802)
[如何以编程方式读取 EF DbContext 元数据？](https://stackoverflow.com/questions/15718301/how-i-can-read-ef-dbcontext-metadata-programmatically/15720297#15720297)
[如何通过单元测试检查属性标记为在 ORM 模型中计算？](https://stackoverflow.com/questions/15866272/how-check-by-unit-test-that-properties-mark-as-computed-in-orm-model/15867365#15867365)

# mysql - 使用 NHibernate 映射文件添加 MySQL 列注释？

> ID：15908555
> 
> 赞同：0
> 
> 时间：2013-04-09T17:29:19.300
> 
> 标签：mysql, nhibernate, nhibernate-mapping

有没有办法添加一些 NHibernate XML 配置节点或属性，以便为 MySQL 生成的创建表脚本将包含列注释？

这种脚本的一个例子如下：

```
CREATE TABLE table_with_comments(
  column1 INT(11) NOT NULL AUTO_INCREMENT COMMENT 'this is the primary key.',
  column2 TEXT DEFAULT NULL,
  PRIMARY KEY (column1)
) 
```

我的问题是是否可以将注释放在 xml 映射文件中。或者如果我们使用 NHibernate.Mapping.Attributes，有没有办法将注释放在属性注释中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:06:17.770

我知道将特定于数据库的元数据添加到映射的唯一方法是通过标签使用[辅助数据库对象。](http://www.nhforge.org/doc/nh/en/index.html#mapping-database-object)`<database-object>`

Ayende Rahien 也有一个简短的[博客文章](http://ayende.com/blog/3947/nhibernate-mapping-database-object)，其中包含其使用示例。

同样的问题，除了甲骨文，已经被问到并得到了回答。有关详细信息，请参阅[使用 NHibernate 设置 Oracle 的 Column COMMENTS 属性](https://stackoverflow.com/questions/4796448/setting-oracles-column-comments-attribute-with-nhibernate)。

# email - 有没有办法在 Play 框架中限制发送的电子邮件？

> ID：15908557
> 
> 赞同：1
> 
> 时间：2013-04-09T17:29:19.893
> 
> 标签：email, playframework-1.x, amazon-ses

如何实现 RateLimit 以通过 play.mvc.Mailer 发送电子邮件？

我正在为我的游戏框架 1.2.5 应用程序实现 SES 以替换 GMAIL。该应用程序遇到了一次可能发送 200 封电子邮件（通知）的情况，因此我需要将它们的速率限制为 5 个收件人/秒。亚马逊推荐 Google Guava 的 RateLimit 类 ( [http://sesblog.amazon.com/post/TxKR75VKOYDS60/How-to-handle-a-quot-Throttling-Maximum-sending-rate-exceeded-quot-error](http://sesblog.amazon.com/post/TxKR75VKOYDS60/How-to-handle-a-quot-Throttling-Maximum-sending-rate-exceeded-quot-error) )。我目前正在扩展 Play 的 Mailer 类。如果我尝试调用自己的发送方法，例如 sendWithRateLimit(Object...args)，我会丢失使用 play 的 LocalvariablesNamesEnhancer 类获取的上下文，因此它不知道要调用哪个模板。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T12:28:51.097

现在为时已晚，但这样做的方法是：

1.  创建一个代表您的电子邮件的模型，让我们调用它`Email`，将它们保存到数据库
2.  创建一个获取下 X`Email`条记录的作业，并计划以允许的速率运行
3.  对于每条`Email`记录，使用邮件程序发送电子邮件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T22:19:25.210

我沿着这条路走了大约 6 个小时，并意识到为了利用 SES，我编写了太多代码。我们将使用 Mandrill 的 Heroku 插件：[https ://addons.heroku.com/mandrill](https://addons.heroku.com/mandrill)

# matlab - 在MATLAB中选择数组中的元素

> ID：15908559
> 
> 赞同：0
> 
> 时间：2013-04-09T17:29:25.577
> 
> 标签：matlab

我有一个矩阵

```
A = 
[ 10 20;
  30 40;
  50 60 ] 
```

我也有一个像

```
idx = 
[ 2; 1; 1] 
```

这意味着我想要

第一行的第二列 (=20)，

第二行的第一列 (=30)，以及

第三行的第一列 (=50)。

我怎样才能得到一个带有 [20; 的向量？30; 50]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:58:47.177

您可以使用[SUB2IND](http://www.mathworks.com/help/matlab/ref/sub2ind.html)功能；

```
result = A(sub2ind(size(A),(1:numel(idx))',idx)); 
```

对于一些性能改进，您可以替换 SUB2IND 手动计算线性索引：

```
linidx = (1:numel(idx))' + (idx - 1).*size(A,1);
result = A(linidx); 
```

在任何情况下，请确保`numel(idx)`不超过矩阵行数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:34:42.837

```
A = [ 10 20; 30 40; 50 60 ]
idx = [ 2; 1; 1]
t =(idx==2)*2 + idx
t1 = (idx==1)
A( t+ (t1 .* [0:2]')) 
```

输出

```
ans =
 20
 30
 50 
```

现在使用通用数字，它将适合任何其他尺寸。

# arrays - 无法在电子表格中将类转换为对象

> ID：15908563
> 
> 赞同：0
> 
> 时间：2013-04-09T17:29:34.590
> 
> 标签：arrays, object, google-apps-script, google-sheets

我希望获得 GDrive 中所有文件夹的几个属性并将这些属性写入电子表格。由于文件夹数量众多（超过 300 个），我决定使用分页和批处理。这似乎有效，但我似乎无法将我在批处理中创建的 Array[][] 写入电子表格。

当我尝试在电子表格中设置值时出现以下错误：

> 无法将 (class)@3cc8188e 转换为 Object[][]。

我没有找到与我的问题相似的任何列出的问题。

出现错误时，脚本的最后一行会突出显示。代码是：

```
function myFunction() {
  var folder = DocsList.getFolder('MyFolder');
  var subfolders = null;
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getActiveSheet();
  var cell = sheet.getRange('a1');
  var x = 0;
  var pageSize = 250;
  var token = null;
  var xfolders = new Array(500);

  do {
       var resultset = folder.getFoldersForPaging(pageSize, token);
       subfolders = resultset.getFolders();
       token = resultset.getToken();
       x = subfolders.length;

       for (var a = 0; a < subfolders.length; a++) {
          var contents = subfolders[a].getFiles();
          xfolders[a] = new Array(6);
          if(contents.length>0) {
             xfolders[a][0] = subfolders[a].getName();
             xfolders[a][1] = subfolders[a].getDateCreated();
             xfolders[a][2] = subfolders[a].getLastUpdated();
             xfolders[a][3] = contents.length;
             xfolders[a][4] = subfolders[a].getSize();
             xfolders[a][5] = a;
          }
       }
  } while (subfolders.length > pageSize) 
```

**sheet.getRange(1, 1, x, 6).setValues(xfolders);** }

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:03:08.603

`xfolders`您已经从一个已初始化长度的数组开始。没有必要这样做——知道它是一个数组就足够了。稍后您`getRange()`使用`rows==x`, where `x = subfolders.length`... 调用，如果不是 500（ 的长度`xfolders`），您最终会遇到错误。（...因为您有未定义的数组元素。）

您需要做的是确保您写入的范围与您呈现的值具有相同的尺寸。一种方法是使用`xfolders`自身计算范围尺寸。

这是您的函数，经过重构以动态增长`xfolders`，然后使用其维度输出到电子表格。

```
function myFunction() {
  var folder = DocsList.getFolder('MyFolder');
  var subfolders = null;
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getActiveSheet();
  var cell = sheet.getRange('a1');
  var pageSize = 250;
  var token = null;
  var xfolders = [];

  do {
       var resultset = folder.getFoldersForPaging(pageSize, token);
       subfolders = resultset.getFolders();
       token = resultset.getToken();

       for (var a in subfolders) {
          var contents = subfolders[a].getFiles();
          xfolders[a] = [];
          if(contents.length>0) {
             xfolders[a][0] = subfolders[a].getName();
             xfolders[a][1] = subfolders[a].getDateCreated();
             xfolders[a][2] = subfolders[a].getLastUpdated();
             xfolders[a][3] = contents.length;
             xfolders[a][4] = subfolders[a].getSize();
             xfolders[a][5] = a;
          }
       }
  } while (subfolders.length == pageSize)  // Quit when we aren't getting enough folders
  sheet.getRange(1, 1, xfolders.length, xfolders[0].length).setValues(xfolders); 
} 
```

# asp.net - 用于国际化的 asp.net MVC 源文件

> ID：15908564
> 
> 赞同：0
> 
> 时间：2013-04-09T17:29:35.850
> 
> 标签：asp.net, asp.net-mvc-4, internationalization

基于[本教程](http://afana.me/post/aspnet-mvc-internationalization-part-2.aspx)，我试图在我的项目中具有国际化能力。我有这些资源文件用于保存不同语言的单词：

resources.resx --> 默认语言 (en-US)

resources.fa.resx --> 波斯语

resources.es.resx --> 西班牙语

文字喜欢`fa`并`es`显示文化。

在`views`我以这种方式将资源文件中的单词替换为相等的单词：

```
<a href="#" >@Resources.IranNewsStand</a> 
```

**编辑：**我已经根据教程实现了所有逻辑。但是我对所有语言都有一个视图，在这个视图中我使用的是 resources.resx 。这是一个正确的逻辑吗？

我的问题是我的项目如何知道根据 的值加载哪个资源文件`Thread.CurrentThread.CurrentCulture`？我错过了什么？

**编辑：**我已经实施了这些步骤：

1-我有一个包含三个`Class Library Project`提到的`Resources`resx 文件的名称（resources.resx、resources.fa.resx、resources.es.resx）。

2-`Resource project`作为参考添加到我的 mvc 应用程序中。

3-controllers 继承了这个 Base Controller ：

```
public class BaseController : Controller
{
    protected override void ExecuteCore()
    {
        string cultureName;
        HttpCookie cultureCookie = Request.Cookies["_culture"];
        if (cultureCookie != null)
            cultureName = cultureCookie.Value;
        else
            cultureName = Request.UserLanguages[0];
        cultureName = utilities.CultureHelper.GetValidCulture(cultureName);
        Thread.CurrentThread.CurrentCulture = new System.Globalization.CultureInfo(cultureName);
        Thread.CurrentThread.CurrentUICulture = Thread.CurrentThread.CurrentCulture;
        base.ExecuteCore();
    }
} 
```

4-正如我所说，`view`我使用`resource.resx`了包含默认语言（en-US）字符串的文件中的资源字符串：

```
<p>@Resources.Resources.Home</p> 
```

5-in view 我有一个链接，当点击它时，这个 jquery 代码运行：

```
 <script type="text/javascript">
        $("#btnChangeLanguage").click(function () {
            $.cookie("_culture", "fa-IR", { expires: 365, path: '/' });
            window.location.reload(); // reload 
        })
    </script> 
```

`fa-IR`是用户选择的文化。但点击此链接时，语言不会改变。

**编辑：解决方案**

我在我的项目中发现了 2 个问题，解决它们后一切正常：

1-jQuery cookie 插件需要让 jquery 代码正确工作：

```
<script type="text/javascript" src="~/Scripts/jquery.cookie.js" ></script> 
```

2- ExecuteCore 事件`BaseController`不会触发，这听起来像是`asp.net MVC 4`. 所以基于[这个问题](https://stackoverflow.com/questions/9555069/executecore-in-base-class-not-fired-in-mvc-4-beta)我试图覆盖`OnActionExecuted`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:40:35.517

基于当前文化拉取资源的逻辑内置于 .NET 本身。

有两个步骤：

1.  当前的文化需要在请求中适当设置。ASP.NET 有一些内置机制来执行此操作，例如您链接到的文章中描述的内容。
2.  设置后，.NET Framework 将使用请求的当前区域性来加载适当的资源。如果请求的语言环境不可用，则将加载文化中性资源（“后备”）。

# iphone - 如何在不编辑 3.5 英寸的情况下编辑 4 英寸 iPhone 的界面

> ID：15908565
> 
> 赞同：1
> 
> 时间：2013-04-09T17:29:35.887
> 
> 标签：iphone, xcode, size, screen

所以我制作了这个应用程序，在提交时我需要抓取 4' 的屏幕截图。

我基于我的应用程序在 3.5 英寸设备上运行，所以我想，当我在 4 英寸设备上运行它时，可能会有信箱。

不知何故，界面适应了 4' 屏幕，但图像和标签放错了位置。

当我将 .xib 编辑为在 4' 屏幕上看起来不错时，在 3.5 屏幕上会发生完全相反的情况。东西放错了地方。

在创建我的项目（大约 20 个 .xib）时，我总是选择“3.5' 屏幕”而不是“Freeform”或默认的“4' 屏幕”。

现在如何将其更改为在两种屏幕尺寸上看起来都不错？有没有一种方法可以编辑两种大小的 xib 而不必重建它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T18:44:05.983

*   复制每个 XIB 并给它一个后缀，例如 MyViewController.xib -> MyViewController_568.xib
*   重新安排新的 XIB
*   覆盖 initWithNib

    ```
    - (id)initWithNibName:(NSString *)nibName bundle:(NSBundle *)nibBundle { 
    if ([UIScreen mainScreen].bounds.size.height > 480) {
        nibName = [NSString stringWithFormat:@"%@_568", nibName];
    }
    if (self = [super initWithNibName:nibName bundle:nibBundle]) {

    }
    return self; 
    ```

    }

# javascript - textarea 输出 p - 最大长度或高度

> ID：15908572
> 
> 赞同：0
> 
> 时间：2013-04-09T17:29:54.327
> 
> 标签：javascript, jquery

我有一个`textarea`文本框和一个`p`显示输入的可视区域。
我正在尝试根据`p`高度或`textarea`最大字符串长度来控制文本输入量。
我面临两个问题：

1）一旦`p`超过最大高度或达到`textarea`最大长度，`textarea`应停止接受输入。

2）在上面的最大值发生后，按退格键或删除键`textarea`不会改变`p`。

[这是我的小提琴](http://jsfiddle.net/nalagg/sPeas/9/)

**编辑**： [这对](https://stackoverflow.com/questions/10414420/how-to-prevent-user-to-enter-text-in-textarea-after-reaching-max-character-limit)第 1 部分有帮助，但必须使用`keydown`（textarea 停止接受输入），但随后按退格键仍然没有反映`p`

```
 if (this.value.length == max || height>50) {
            e.preventDefault();
    } else if (this.value.length > max) {
            // Maximum exceeded
            this.value = this.value.substring(0, max);
    }else{
        recField.html(this.value);
        height = recField.height()
        $('.temp').text(height);
    } 
```

**经过更多测试**，`keydown`有问题，`p`不反映来自`textarea`喜欢的输入`keyup`。
: (
回到广场 1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:31:10.987

我为你创建了这个小提琴，它也适用于 IE7（或至少 IE10 中的兼容模式）：http: [//jsfiddle.net/jy4qK/11/](http://jsfiddle.net/jy4qK/11/)

不幸的是，当我调整它以在 IE7 中工作时它变得有点混乱，例如在`onkeydown`.

编辑：

关于您自己关于在以下位置复制文本的更新的快速说明`onkeydown`：

之所以没有将 textarea 的值复制到 上的段落`onkeydown`，是因为 keycode 尚未发送到元素。这发生`onkeypress`在某些浏览器（不可靠）和`onkeyup`或`oninput`（比 onkeyup 更快，它仅每 20 毫秒处理一次，但它是 HTML5 的一部分，因此如果您希望支持 IE < 10，则不是一个选项）。

至少如果我的记忆正确的话..

# java - MedianCalc() 方法给我 IndexOutOfBounds 异常

> ID：15908574
> 
> 赞同：0
> 
> 时间：2013-04-09T17:29:56.360
> 
> 标签：java, android, indexoutofboundsexception

我有这个方法来获得中值，

```
public double getMedian(double[] numberList) {
        int factor = numberList.length;
        double[] first = new double[(int) factor / 2];
        double[] last = new double[first.length];
        double[] middleNumbers = new double[1];
        for (int i = 0; i < first.length; i++) {
            first[i] = numberList[i];
        }
        for (int i = numberList.length; i >= last.length; i--) {
            last[i] = numberList[i];
        }
        for (int i = 0; i <= numberList.length; i++) {
            if (numberList[i] != first[i] || numberList[i] != last[i])
                middleNumbers[i] = numberList[i];
        }
        if (numberList.length % 2 == 0) {
            double total = middleNumbers[0] + middleNumbers[1];
            return total / 2;
        } else {
            return middleNumbers[0];
        }
    } 
```

但给我一个**IndexOutOfBounds**异常。有人可以帮我解决错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:31:26.170

您应该使用`i < numberList.length`，而不是`i <= numberList.length;`数组的合法索引`[0, array.length-1]`，即`array.length`不是合法索引

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T18:00:26.950

**简化答案**
如果您只想要[中值](http://www.mathsisfun.com/median.html)，只需使用 if-else on `numberList`，就不需要任何子数组：

```
public double getMedian(double[] numberList) {
    int middle = numberList.length / 2;
    if (numberList.length % 2 == 0) {
        double total = numberList[middle - 1] + numberList[middle]
        return total / 2;
    } else {
        return numberList[middle];
    }
} 
```

* * *

**原始答案**
正如我在 Zim-Zam 的回答中所说，这个循环也没有使用正确的索引：

```
for (int i = numberList.length; i >= last.length; i--) {
    last[i] = numberList[i];
} 
```

`last`只能`0`通过`numberList.length / 2`（向下舍入）。
看起来您想要将两个拆分`numberList`为`first`and `last`，只需使用：

```
int[] first = Arrays.copyOfRange(numberList, 0, factor);
int[] last = Arrays.copyOfRange(numberList, factor, numberList.length); 
```

而不是你的 for 循环。

# php - 离开页面时在 cakephp 中销毁会话？

> ID：15908575
> 
> 赞同：2
> 
> 时间：2013-04-09T17:29:58.117
> 
> 标签：php, session, cakephp, cakephp-2.3

我如何以及在哪里可以使用

```
$this->Session->destroy() 
```

每当页面关闭时会话就被销毁？

以及如何在页面关闭之前保持会话打开，与时间无关？

我需要这个，因为当用户进入页面时，会话中的一些特定变量未设置，当他出来时，我需要销毁这个会话。我无法使用 cakephp 做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:04:18.087

会话存储在服务器上，因此如果浏览器关闭或用户转到不同的页面，它没有义务通知服务器此操作。

会话会在服务器中存储一段时间，并且在一段时间不活动或正确注销后，它将在那里自动销毁。

查看[CakePHP 食谱](http://book.cakephp.org/2.0/en/development/sessions.html)中的 Sessions 信息以获取有关 Sessions 的更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T09:18:08.060

您可以尝试使用`$(window).unload(function(){alert('Closing browser')});` And do ajax call to server 来销毁会话，但这可能不适用于某些浏览器并且 jQuery 1.8 中已弃用的功能以获取更多信息 [http://api.jquery.com/unload/](http://api.jquery.com/unload/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T13:45:31.567

如果您使用过 Auth cakephp 3.0 组件，则无需对会话核心组件进行的所有会话和 cookie 管理进行任何操作。

$this->Session->destroy()

它将销毁所有 cookie 和会话数据，但如果您想销毁特定会话，则可以通过此代码执行

$this->Session->destroy('$val');

这里，$val 代表要销毁的特定会话

# matlab - 3d体积matlab上的滑动窗口

> ID：15908576
> 
> 赞同：0
> 
> 时间：2013-04-09T17:29:59.090
> 
> 标签：matlab, 3d, computer-vision, convolution, sliding-window

我需要在 3d 卷上滑动一个窗口。滑动仅在 3d 体积的一层上，即对于每个 x,y 具有一个特定的 z。这就是我想要循环执行的操作：对于每个 x、y、z，例如：

```
px =9; py =9; pz =12;

a = rand(50,50,50);
[x y z] = meshgrid(1:50,1:50,1:50);
r = 3;

%-------------loop starts here: 
% creating  a shaped window, for example sphere of radius r
inds = find((x-px).^2 + (y-py).^2 + (z-pz).^2 <= r.^2);
% getting the relevant indices, here, it is the sphere around px,py,pz
[i,j,k] = ind2sub(size(a),inds);
% adjust the center of the sphere to be at (0,0,0) instead of (px,py,pz)
adj_inds = bsxfun(@minus,[i,j,k],[px,py,pz]);

% Computing for each sphere some kind of median point
cx = sum(a(inds).*adj_inds(:,1))./sum(a(inds));
cy = sum(a(inds).*adj_inds(:,2))./sum(a(inds));
cz = sum(a(inds).*adj_inds(:,3))./sum(a(inds));

%Saving the result: the distance between the new point and the center of the sphere.
res(yc,xc) = sqrt(sum([cx,cy,cz].^2));
%------------- 
```

现在，所有这些都应该发生很多次，（〜300000），循环需要很长时间，卷积返回3d体积（对于每个x，y，z），而我只需要为每个（x，y）和一个列表执行此操作z的。请帮忙...谢谢matlabit

# asp.net - system.web.compilation.debug 与 system.codedom.compilers.compiler.compilerOptions /define:Debug=True

> ID：15908579
> 
> 赞同：7
> 
> 时间：2013-04-09T17:30:10.607
> 
> 标签：asp.net, debugging, configuration, web-config

当我将 ASP.NET Web 应用程序部署到生产环境时，我使用配置转换`debug="true"`从`<compilation>`. 然而，就在今天，我注意到 web.config 中的另一个部分如下所示：

```
<system.codedom>
    <compilers>
        <compiler compilerOptions="/define:Debug=True" />
    </compilers>
</system.codedom> 
```

这是什么？那里的事实是否违背了将其从中删除的目的`<compilation>`？如果我如上所示删除该属性会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-17T13:46:32.643

> 是否存在破坏了将其从其中删除的目的的事实`<compilation>`

来自[MSDN C# Compiler Options](http://msdn.microsoft.com/en-us/library/6s2x2bzy.aspx)
要打开**调试**，编译器上的标志`/debug`不是`/define:Debug=True`

> /debug ：**指示编译器发出调试信息。**
> /define ：**定义预处理器符号。**

因此，当您定义时，`Debug=True`您只会使这种代码情况成为现实：

```
#if DEBUG == true
// Compile what is inside here !
#endif 
```

除非您在上面的`/define:Debug=True`代码中手动包含它们，否则不会添加任何额外的调试信息。

## 测试页面

我使用以下代码进行测试，看看会发生什么。

```
 txtDebug.Text = HttpContext.Current.IsDebuggingEnabled.ToString();

    #if DEBUG
    txtDebug.Text +=  "<br>defined Debug is on";
    #endif
    #if DEBUG == true
    txtDebug.Text +=  "<br>defined Debug = true is on";
    #endif 
```

## 结果 1

现在如果`debug="false"`and`compilerOptions="/define:Debug=True"`结果是

> 错误
> 定义 Debug = true 开启

## 结果 2

如果`debug="true"`和`compilerOptions="/define:Debug=True"`结果是

> true
> 已定义 Debug 已开启 已
> 定义 Debug = true 已开启

## 结果 3

现在我再做一个测试，我在 web.config 上添加了这一行

```
 <compiler language="c#;cs;csharp" extension=".cs" 
    compilerOptions="/define:Debug=True /D:DEBUG,TESTFLAG" 
   type="Microsoft.CSharp.CSharpCodeProvider, System, 
     Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" 
       warningLevel="4" /> 
```

结果与`debug=false`

> 假（调试为假）
> 定义调试打开（但定义的调试现在运行）
> 定义调试=真打开（这也是运行）
> 测试标志（但定义的额外标志也运行）

## MSDN

查看[/define （预处理器定义）的 MSDN](http://msdn.microsoft.com/en-us/library/0feaad6z(v=vs.71).aspx)我看声明

```
/define:Debug=True 
```

仅适用于这种代码情况

```
#if DEBUG == true
txtDebug.Text +=  "<br>defined Debug = true is on";
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T17:06:29.833

您设置的字符串`compilerOptions`基本上是一段命令行，它被添加到所有编译中。

如果您使用 aspx 页面，您也可以在其中设置它，使其仅适用于一页。例如

```
<%@ Page Language="C#" CompilerOptions="etc..." %> 
```

您是如何在配置中将其设置为“/define:Debug=True”的？有这种情况并不典型。`debug`但是要回答您的问题，是的，无论属性的值如何，这都会有效地打开调试。

除非您有充分的理由拥有它，否则我会完全取消它。

# php - 使用 array_diff 比较两个数组

> ID：15908583
> 
> 赞同：-1
> 
> 时间：2013-04-09T17:30:44.950
> 
> 标签：php, arrays, api

我有以下代码，并试图将两个数组与 array_diff 进行比较，但是我一直没有得到任何结果。我不确定这是否重要，但数组中有很多字段，我真的只想比较 1 个字段……这可能吗？我错过了什么？

```
<?php
$json = file_get_contents("http://ebird.org/ws1.1/data/obs/region/recent?rtype=subnational1&r=US-AZ&back=7&fmt=json");
$json2 = file_get_contents("http://ebird.org/ws1.1/data/obs/region/recent?rtype=subnational1&r=US-NV&back=7&fmt=json");

$array1 = json_decode($json, TRUE);
$array2 = json_decode($json2, TRUE);

if ( $array1 == $array2 ) {
echo 'There are no differences';
}else 
var_dump(array_diff($array2, $array1));
echo 'they are different';

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:49:27.177

您将需要相互检查数组：

```
$Array_1 = array (1,2,3,4,5);
$Array_2 = array(1,2,3,4,5,6);

print_r(array_diff($Array_1,$Array_2)); 
```

将输出：

```
Array
(
) 
```

然而：

```
 print_r(array_diff($Array_2,$Array_1)); 
```

将输出：

```
Array
(
    [5] => 6
) 
```

所以这可能是一个解决方案：

```
function ArrayDiff ($Array_1, $Array_2){
    $Compare_1_To_2 = array_diff($Array_1,$Array_2);
    $Compare_2_To_1 = array_diff($Array_2,$Array_1);
    $Difference_Array = array_merge($Compare_1_To_2,$Compare_2_To_1);
    return $Difference_Array;

}

print_r(ArrayDiff($Array_1,$Array_2)); 
```

这将输出：

```
Array
(
    [0] => 6
) 
```

* * *

将其放入 if 语句中：

```
$Differences = ArrayDiff($Array_2,$Array_1);
if (count($Differences) > 0){
    echo 'There Are Differences Between The Array:';
    foreach ($Differences AS $Different){
        echo "<br>".$Different;
    } 
```

所有示例和代码都基于开头的数组（$Array_1 和 $Array_2）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-29T05:49:58.800

```
 $po_line_array=array();
    $po_line_clone_array=array();

    foreach($cart->line_items as $line_no => $po_line)
         $po_line_array[$line_no]=$po_line->labdip_details_id;
       print_r($po_line_array,1);
    foreach($cart->line_items_clone as $line_no_clone => $po_line_clone)
         $po_line_clone_array[$line_no_clone]=$po_line_clone->labdip_details_id;
       print_r($po_line_clone_array,1);

     $result=array_diff($po_line_clone_array,$po_line_array);
     print_r($result,1); 
```

输出：

```
 Array ( [0] => 101 )

    Array ( [0] => 101 [1] => 103 )

    Array ( [1] => 103 ) 
```

# composer-php - 作曲家最佳实践？

> ID：15908588
> 
> 赞同：2
> 
> 时间：2013-04-09T17:31:05.353
> 
> 标签：composer-php

我在一个有大约 15 位开发人员的团队中工作，我们一直在问自己：*与 composer 合作的最佳实践是什么？*

我们`composer.json`有 ~5 包。我们使用 Bamboo 作为持续集成系统和 Subversion。

今天，我们运行`composer self-update`/`composer update`并将`vendor`文件夹提交到存储库中。

这样做感觉有点不对劲。最好的做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T07:47:13.297

1.  您将要求（开发和正常）放入`composer.json`文件中
2.  您运行`composer update`以更新所有依赖项
3.  此命令创建一个`composer.lock`文件，其中包含使用了哪些版本的依赖项。
4.  提交该文件并排除（忽略）该`vendor/`目录
5.  每当你想安装依赖项时，你运行`composer install`. 这将使用存储在`composer.lock`文件中的版本安装所有依赖项。这意味着每个人都有相同的版本。
6.  每周一次，有人跑来`composer update`更新所有依赖项并`composer.lock`使用更新的版本创建一个新文件。
7.  该文件被提交
8.  每个人都运行`composer install`（一天一次或两天一次）并安装新版本。

# joomla - Joomla 2.5 自定义 mvc 组件：任务添加的不同形式

> ID：15908591
> 
> 赞同：0
> 
> 时间：2013-04-09T17:31:12.643
> 
> 标签：joomla, joomla-extensions

我正在为 Joomla 2.5 开发一个自定义 mvc 组件。

对于我的管理部分，我在工具栏中添加了一个“新建”按钮。通过单击此按钮，我想显示一个具有较少字段的单独表单。到目前为止一切正常，但视图工具栏的按钮不会重定向（即“取消”）

为了重定向任务“添加”，我将方法“add()”的覆盖添加到我的控制器：

```
class ArchitectProjectControllerArchitectProject extends JControllerForm
{
    public function add()
    {
        JRequest::setVar('layout',  'add');
        $result = parent::add();
    return $result;
    }
} 
```

我不知道我是否走在正确的轨道上。可能有人可以给我一个提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:30:52.667

例如，如果您希望在“取消”上重定向，请在控制器中尝试以下操作：

```
public function cancel()
{
   $this->setRedirect('index.php?option='.$this->option.'&view=yourview');
} 
```

# android - 设置按钮的选中状态 = 按下状态

> ID：15908603
> 
> 赞同：0
> 
> 时间：2013-04-09T17:31:35.980
> 
> 标签：android, android-layout

我想设置一个按钮，其中选定状态应与按下状态具有相同的方面。这样做的最终目标是让我在 onClick 之后使按钮保持“点击”状态。（或者在这种情况下，看起来像它）

有没有办法用选择器只覆盖一个状态？如果是这样，我该如何覆盖它并将其设置为看起来像按下状态？

# python - Beautifulsoup for row 循环只运行一次？

> ID：15908604
> 
> 赞同：1
> 
> 时间：2013-04-09T17:31:36.453
> 
> 标签：python, loops, beautifulsoup

我几乎完成了一个抓取桌子的网络爬虫。这仅输出表中的第一行。任何人都可以帮助确定为什么这不会返回表中的所有行。请忽略 while 循环，因为它最终会有一个循环部分。

```
import urllib
from bs4 import BeautifulSoup

#file_name = "/user/joe/uspc-cpc.txt
#file = open(file_name,"w")
i=125
while i==125:
    url = "http://www.uspto.gov/web/patents/classification/cpc/html/us" + str(i) + "tocpc.html"
    print url + '\n'
    i += 1
    data = urllib.urlopen(url).read()
    print data
    #get the table data from dump
    #append to csv file
    soup = BeautifulSoup(data)
    table = soup.find("table", width='80%')
    for tr in table.findAll('tr')[2:]:
        col = row.findAll('td')
        uspc = col[0].get_text().encode('ascii','ignore')
        cpc1 = col[1].get_text().encode('ascii','ignore')
        cpc2 = col[2].get_text().encode('ascii','ignore')
        cpc3 = col[3].get_text().encode('ascii','ignore')
        print uspc + ',' + cpc1 + ',' + cpc2 + ',' + cpc3 + '\n'
        #file.write(record)

#file.close() 
```

我正在运行的代码：

```
import urllib
from bs4 import BeautifulSoup

#file_name = "/users/ripple/uspc-cpc.txt"
#file = open(file_name,"w")
i=125
while i==125:
    url = "http://www.uspto.gov/web/patents/classification/cpc/html/us" + str(i) + "tocpc.html"
    print 'Grabbing from: ' + url + '\n'
    i += 1
    #get the table data from the page
    data = urllib.urlopen(url).read()
    #send to beautiful soup
    soup = BeautifulSoup(data)
    table = soup.find("table", width='80%')
    for tr in table.findAll('tr')[2:]:
        col = tr.findAll('td')

        uspc = col[0].get_text().encode('ascii','ignore').replace(" ","")
        cpc1 = col[1].get_text().encode('ascii','ignore').replace(" ","")
        cpc2 = col[2].get_text().encode('ascii','ignore').replace(" ","")
        cpc3 = col[3].get_text().encode('ascii','ignore').replace(" ","").replace("more...", "")
        record = uspc + ',' + cpc1 + ',' + cpc2 + ',' + cpc3 + '\n'
        print record
        #file.write(record)

#file.close() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:37:11.630

您正在`tr`用作循环变量，但`row`在循环中引用。如果你之前`row`定义过它可能会产生令人困惑的结果。

```
for tr in table.findAll('tr')[2:]:
    col = tr.findAll('td') 
```

为我工作：

```
125/1,B 28D 1/00,B 28D 1/221,E 01C 23/081,B 28D 1/005,B 28D 1/06more...

125/2,B 23Q 35/10,B 22C 9/18,B 23B 5/162,B 23D 63/18,B 24B 53/07more...

125/3,B 28D 1/18,B 28D 1/003,B 28D 1/048,B 28D 1/181,B 24B 7/22more... 
```

等等

# ios - 获取Objective C中两个NSString之间的时间差

> ID：15908605
> 
> 赞同：0
> 
> 时间：2013-04-09T17:31:41.513
> 
> 标签：ios, objective-c, nsstring, nsdate

我有两个来自存储时间的服务器的字符串，我需要比较这两个字符串之间的时间间隔，以分钟为单位，如果有必要，以小时为单位。我应该转换为`NSDate`还是使用`NSString`？

`NSString`s 看起来像：

```
NOW 14:22
LAST TIME 10:18 
```

编辑#1 由于每个人都说我使用 NSDate，我将数据库中的数据转换为 DATETIME，现在我可以使用以下代码比较两个 NSDate：

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"pt_BR"]];
    [dateFormatter setDateFormat: @"yyyy-MM-dd HH:mm:ss"];

    NSDate *currentDateTimeWithOffset = [NSDate dateWithTimeIntervalSinceNow:[[NSTimeZone localTimeZone] secondsFromGMT]];

    NSString *strDate = [dateFormatter stringFromDate:currentDateTimeWithOffset];
    NSDate * now = [dateFormatter dateFromString:strDate];
NSDate *date = [dateFormatter dateFromString:@"2013-04-09 12:10:18"];

NSLog(@"Difference %f",[now timeIntervalSinceDate:date]); 
```

结果如下：

```
 Difference 864.000000
 NOW 2013-04-09 15:24:42 +0000
 LAST DATE 2013-04-09 12:10:18 
```

那是对的吗？差异以秒为单位？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T17:34:55.273

如果格式变得比您显示的更复杂，请考虑使用 NSDateFormatter。对于简单的示例：

```
NSArray *hoursMins = [timeString componentsSeparatedByString:@":"];
NSInteger timeInMins = [hoursMins[0] intValue] * 60 + [hoursMins[1] intValue]; 
```

然后在分钟内减去两次。日期格式化程序方法如下所示：

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"HH:mm"];
NSDate *date = [df dateFromString:timeString]; 
```

您可以使用以下方法获得两个日期之间的秒数差异：

```
[date timerIntervalSinceDate:anotherDate]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:41:41.340

NSDateFormatter 是做到这一点的“干净”方式。但是，如果您正在寻找快速和肮脏的东西，并且这些是您得到的实际字符串（包括现在和上次时间），我只需使用特定的 NSRange 来提取小时和分钟并进行比较。

请确保，尽管您检查了时间，并且如果“现在”时间在“最后一次”时间之前，则将 24 添加到现在以进行当天翻转。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T17:42:20.203

使用 only `NSString`，[NSDateFormatter](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfDateFormatting10_4.html)用于获取[NSDate](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html)

```
NSDateFormatter *rfc3339DateFormatter = [[NSDateFormatter alloc] init];
NSLocale *enUSPOSIXLocale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];

[rfc3339DateFormatter setLocale:enUSPOSIXLocale];
[rfc3339DateFormatter setDateFormat:@"yyyy'-'MM'-'dd'T'HH':'mm':'ss'Z'"];
[rfc3339DateFormatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

// Convert the RFC 3339 date time string to an NSDate.
NSDate *date = [rfc3339DateFormatter dateFromString:rfc3339DateTimeString]; 
```

如果您有单独的小时、分钟和秒值，您可以使用[NSCalendar](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html)

```
NSDateComponents *comps = [[NSDateComponents alloc] init];
[comps setYear:1965];
[comps setMonth:1];
[comps setDay:6];
[comps setHour:14];
[comps setMinute:10];
[comps setSecond:0];
NSDate *date = [gregorian dateFromComponents:comps];
[comps release]; 
```

一个完美的解决方案是使用时间戳而不是 NSString。不仅很容易将时间戳转换为`NSDate`( `NSDate +dateWithTimeIntervalSinceReferenceDate`)，然后`NSString`在需要时转换为，而且您还可以通过减法获得时间差。

对于两个`NSDate`对象，时间差是用 计算的`NSDate -timeIntervalSinceDate`。

# java - 流的进度监视器

> ID：15908615
> 
> 赞同：-1
> 
> 时间：2013-04-09T17:32:12.750
> 
> 标签：java, stream, progress

我已经创建了一个从客户端到服务器的流。`ProgressMonitorInputStream`对于这段代码，如何创建或其他类似的东西？

```
 FileInputStream fileStream = new FileInputStream(file);
        int ch;
        do
        {
            ch = fileStream.read();
            exitStream.writeUTF(String.valueOf(ch));
        }
        while(ch != -1);
        fileStream.close(); 
```

更新的代码 - 窗口出现，但它是空的。只有一个框架。如何解决？

```
 String fileName = "aaa.jpg";
         File fileToBeSend = new File(fileName);

         InputStream input = new ProgressMonitorInputStream(
         null, 
         "Reading: " + fileName, 
         new FileInputStream(fileToBeSend));

         int ch;
         do 
         {
             ch = input.read();
            exitStream.writeUTF(String.valueOf(ch)); 
         } while(ch != -1);

         input.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:12:05.873

为了[`ProgressMonitorInputStream`](http://docs.oracle.com/javase/6/docs/api/javax/swing/ProgressMonitorInputStream.html)工作，您需要阅读非常大的文件。在其文件中规定：

> 这将创建一个进度监视器来监视读取输入流的进度。**如果需要一段时间，会弹出一个 ProgressDialog 来通知用户。**如果用户点击 Cancel 按钮，则会在下一次读取时抛出 InterruptedIOException。当流关闭时，所有正确的清理工作都完成了。

这是示例。确保您输入的文件（`bigFile.txt`）包含许多要阅读的内容。

![在此处输入图像描述](https://i.stack.imgur.com/WkM06.jpg)

```
import java.awt.Color;
import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.InputStreamReader;

import javax.swing.JLabel;
import javax.swing.ProgressMonitorInputStream;

public class ProgressMonitorInputStreamDemo {

  public static void main(String args[]) throws Exception {
  String file = "bigFile.txt";
  FileInputStream fis = new FileInputStream(file);
  JLabel filenameLabel = new JLabel(file, JLabel.RIGHT);
  filenameLabel.setForeground(Color.black);
  Object message[] = { "Reading:", filenameLabel };
  ProgressMonitorInputStream pmis = new ProgressMonitorInputStream(null, message, fis);
  InputStreamReader isr = new InputStreamReader(pmis);
  BufferedReader br = new BufferedReader(isr);
  String line;
  while ((line = br.readLine()) != null) {
    System.out.println(line);
  }
  br.close();
  }
} 
```

**注意：** *如果要查看`ProgressBar`，无论您正在阅读的文件多么小，都可以使用[`SwingWorker`](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html). 看看* **[这篇文章](https://stackoverflow.com/a/15710912/1981279)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:33:05.200

你的意思是，如何使用嵌套流，像这样？

```
 ProgressMonitorInputStream input = new ProgressMonitorInputStream(
         null, 
         "Reading: " + file, 
         new FileInputStream(file));

    ProgressMonitor monitor = input.getProgressMonitor();
    // do some configuration for monitor here

    int ch;
    do {
        ch = input.read();
        // note: writing also the last -1 value
        exitStream.writeUTF(String.valueOf(ch)); 
    } while(ch != -1);

    input.close(); 
```

# java - String, int 的 ArrayList 排序

> ID：15908621
> 
> 赞同：0
> 
> 时间：2013-04-09T17:32:44.683
> 
> 标签：java, arrays, collections, arraylist

`ArrayList`我正在寻找`<String,int>`根据`int`.

所以，我的变量是`var<String,int>`

```
India    2
Pakistan 3
USA      1 
```

输出变为：

```
USA      1
India    2
Pakistan 3 
```

我很困惑它如何与 int 一起工作。`Collections.sort(var)`不适用于它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:38:15.710

您不能使用 ArrayList 类型

```
 <String, int> 
```

1.  ArrayList 中不能有原语，因为 ArrayList 包含对象。因此，您可以做的最接近的是存储 Integer 对象。
2.  如果要对其进行参数化，则 ArrayList 只能是一种类型。

如果要保存 String 和 int，可以创建一个 CountryInfo 类，其中包含字段名称和排名。然后创建

```
 ArrayList<CountryInfo> list =new ArrayList<CountryInfo>(); 
```

然后你可以使用

```
 Collections.sort(list, <Comparator>) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:44:46.680

那不是 ArrayList。代替使用 TreeMap。

```
 Map<String, Integer> countryInfo = new TreeMap<String,Integer>(); 
```

这样会自动排序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:49:27.307

**ArrayList 是一种对象的集合。它不像地图可以接受两个输入。**

## 因此，有三种选择：

**1.利用一个同时包含Key和Map的TreeMap，并自动按key排序**或

**2\. 使用未排序的映射并使用比较器进行排序 - 请参阅[Sort a Map<Key, Value> by values (Java)](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)**或

**3\. 使用带有比较器的自定义类的数组列表。**

-

*1) 使用树形图*

树图是红黑树的一种实现。请参阅：[http ://docs.oracle.com/javase/1.5.0/docs/api/java/util/TreeMap.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/TreeMap.html)

```
 TreeMap<Integer,String> countries = new TreeMap<Integer,String>();
    countries.put(2, "India");
    countries.put(1, "USA");
    countries.put(3, "Pakistan");

    Iterator<Entry<Integer, String>> it = countries.entrySet().iterator();
    Entry<Integer, String> entry;
    while(it.hasNext())
    {
        entry = it.next();
        System.out.println(entry.getValue() + " " + entry.getKey());            
    } 
```

这会产生：

```
USA 1
India 2
Pakistan 3 
```

-

*2）利用未排序的映射并使用比较器进行排序* 请参阅：[按值排序 Map<Key, Value>（Java）](https://stackoverflow.com/questions/109383/how-to-sort-a-mapkey-value-on-the-values-in-java)，因为答案很容易写。

- *3) 使用带有 Country 类的 ArrayList*

为了支持您的示例，您需要创建一个 Country 类。您需要执行以下操作：

1.  在您的国家/地区类中实现 Comparable 并将比较逻辑放置在其中。
2.  创建一个自定义比较器，将其提供给 Collection.sort 调用。

    导入 java.util.ArrayList；导入 java.util.Collections；导入 java.util.InputMismatchException；导入 java.util.Iterator；

    公共类 CountrySortExample {

    ```
    public static void main(String[] args) {
        new CountrySortExample();
    }

    public ArrayList<Country> countries = new ArrayList<Country>();

    public CountrySortExample()
    {
        countries.add(new Country("India",2));
        countries.add(new Country("Pakistan",3));
        countries.add(new Country("USA",1));

        Collections.sort(countries);

        Iterator<Country> it = countries.iterator();
        Country count;
        while(it.hasNext())
        {
            count = it.next();
            System.out.println(count.CountryName + " " + count.CountryIndex);
        }
    }

    class Country implements Comparable
    {
        public String CountryName;
        public int CountryIndex;

        public Country(String CountryName,int  CountryIndex )
        {
            this.CountryName = CountryName;
            this.CountryIndex = CountryIndex;
        }

        @Override
        public int compareTo(Object o) {

            if(! (o instanceof Country))
            throw new InputMismatchException("Country is expected");

            Country other = (Country)o;

            if(other.CountryIndex > CountryIndex)
            return -1;

            else if(other.CountryIndex == CountryIndex)
            return 0;

            else return 1;
        }
    } 
    ```

    }

更多信息请访问：[http ://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/](http://www.mkyong.com/java/java-object-sorting-example-comparable-and-comparator/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T17:50:01.940

您可以
使用 Collections.sort(list,Comparator implementation)进行排序

在实现中（这里我使用了**匿名**实现）覆盖比较方法

您将每个字符串的最后一个字符转换为字符串并进行比较的位置

```
ArrayList<String> a=new ArrayList<String>();
    a.add("India    2");
    a.add("Pakistan 3");
    a.add("USA      1");
    Collections.sort(a, new Comparator<String>() {

        @Override
        public int compare(String o1, String o2) {
            Integer i=Integer.valueOf(o1.substring((o1.length() -1),o1.length()));
            Integer j=Integer.valueOf(o2.substring((o2.length() -1),o2.length()));

            return i.compareTo(j);
        }
    }); 
```

你可以乐观代码

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T18:33:04.183

如果您有一个要以多种方式排序的对象，您可以为每种要执行的排序类型定义一个 Comparator 类。

使用 OP 给出的示例，这是定义对象和比较器的一种方法。

这是一个测试结果：

```
CountryRating [name=India, rating=2]
CountryRating [name=Pakistan, rating=3]
CountryRating [name=USA, rating=1]

CountryRating [name=USA, rating=1]
CountryRating [name=India, rating=2]
CountryRating [name=Pakistan, rating=3] 
```

这是示例代码：

```
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

public class CountryRating {

    private String  name;

    private int     rating;

    public CountryRating(String name, int rating) {
        this.name = name;
        this.rating = rating;
    }

    public String getName() {
        return name;
    }

    public int getRating() {
        return rating;
    }

    @Override
    public String toString() {
        StringBuilder builder = new StringBuilder();
        builder.append("CountryRating [name=");
        builder.append(name);
        builder.append(", rating=");
        builder.append(rating);
        builder.append("]");
        return builder.toString();
    }

    public static void main(String[] args) {
        List<CountryRating> list = new ArrayList<CountryRating>();
        CountryRating cr1 = new CountryRating("USA", 1);
        CountryRating cr2 = new CountryRating("India", 2);
        CountryRating cr3 = new CountryRating("Pakistan", 3);
        list.add(cr1);
        list.add(cr2);
        list.add(cr3);

        Collections.sort(list, new CountrySort());
        printList(list);
        System.out.println(" ");
        Collections.sort(list, new RatingSort());
        printList(list);
    }

    private static void printList(List<CountryRating> list) {
        for (int i = 0; i < list.size(); i++) {
            System.out.println(list.get(i));
        }
    }

}

class CountrySort implements Comparator<CountryRating> {
    @Override
    public int compare(CountryRating cr1, CountryRating cr2) {
        return cr1.getName().compareTo(cr2.getName());
    }
}

class RatingSort implements Comparator<CountryRating> {
    @Override
    public int compare(CountryRating cr1, CountryRating cr2) {
        return cr1.getRating() - cr2.getRating();
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T18:42:27.720

我创建了一个示例，您可以在其中对 ArrayList 进行排序，即使它带有对象。您可以通读它，看看它是否有帮助。

我做了两个类和一个测试类：

第一类是国家：

```
public class Country {
   private String countryName;
   private int number;

   public Country(String countryName, int number){
       this.countryName = countryName;
       this.number = number;
   }

   public String getCountryName(){
       return countryName;
   }

   public void setCountryName(String newCountryName){
       countryName = newCountryName;
   }

   public int getNumber(){
       return number;
   }

   public void setNumber(int newNumber){
       number = newNumber;
   }

   public String toString(){
       return getCountryName() + getNumber();
   }
} 
```

下一个类是方法：

```
public class Methods {

    private Country country;
    private ArrayList<Country> overview = new ArrayList<Country>();
    private ArrayList<Country> overviewSorted = new ArrayList<Country>();
    int [] test;

    public void regCountry(String countryname, int numbers){
        if(!(countryname == "" && numbers == 0)){
            overview.add(new Country(countryname, numbers));
        } else {
            System.out.println("The input was null");
        }
    }

    public void showRegisteredCountries(){
        if(!(overview.size() < 0)){
            for(int i = 0; i < overview.size(); i++){
                System.out.println("The country: " + overview.get(i).getCountryName() + " has the number: " + overview.get(i).getNumber() + " registered");
            }
        } else {
            System.out.println("There are no country registered");
        }
    }

    public void numbersOverFromArrayList(){
        if(!(overview.size() < 0)){
            test = new int [overview.size()];
            for(int i = 0; i < overview.size(); i++){
                test[i] = overview.get(i).getNumber();
            }
        }
    }

    public void sortArrayAndCopyItBack(){
        if(!(test.length < 0)){
            java.util.Arrays.sort(test);
            for(int i = 0; i < test.length; i ++){
                for(int j = 0; j < overview.size(); j++){
                    if(test[i] == overview.get(j).getNumber()){
                        overviewSorted.add(new Country(overview.get(j).getCountryName(), overview.get(j).getNumber()));
                    }
                }
            }
        }
    }

    public void showTableSorted(){
        if(!(overviewSorted.size() < 0)){
            for(int i = 0; i < overviewSorted.size(); i++){
                System.out.println("Country name: " +     overviewSorted.get(i).getCountryName() + " with number: " +     overviewSorted.get(i).getNumber());
            }
        } else {
            System.out.println("There are non countrys in table that is sorted");
        }
    }

} 
```

接下来是测试类：

```
public class test2 {
    public static void main(String [] args){

        Methods methodes = new Methods();

        for(int i = 0; i < 4; i++){
        String inCountry = JOptionPane.showInputDialog("Country:");
        String inNumber = JOptionPane.showInputDialog("number:");
        String country = inCountry;
        int number = Integer.parseInt(inNumber);
        methodes.regCountry(country, number);
        }

        methodes.showRegisteredCountries();
        methodes.numbersOverFromArrayList();
        methodes.sortArrayAndCopyItBack();
        methodes.showTableSorted();
    }
} 
```

我的输出：

```
The country: Norway has the number: 5 registered
The country: Sweden has the number: 2 registered
The country: Denmark has the number: 9 registered
The country: Finland has the number: 7 registered
Country name: Sweden with number: 2
Country name: Norway with number: 5
Country name: Finland with number: 7
Country name: Denmark with number: 9 
```

# vb.net - VB.NET 从列表中删除包含在另一个列表中修改的坏词的行？

> ID：15908622
> 
> 赞同：-1
> 
> 时间：2013-04-09T17:32:46.647
> 
> 标签：vb.net, list

我正在寻找想法，如何从另一个自定义列表中删除包含坏词的选定列表中的行？这是一个小例子：

列表：

```
<Index item="25" name="Colligan">
<Index item="26" name="Michael">
<Index item="229" name="Julie">
<Index item="288" name="Robby">
<Index item="200" name="Andrea">
<Index item="299" name="Tommy"> 
```

带有坏词的自定义列表：

*   科利根
*   朱丽叶
*   安德烈亚
*   汤米

所以在运行清理过程之后，我得到了这样的清理列表：

```
<Index item="26" name="Michael">
<Index item="288" name="Robby"> 
```

我发现了如何删除一两个自定义坏词的小应用程序，但问题是，有时我会有超过 1000 个坏词。期待每一个解决方案。

我发现这段代码对一个坏词很有用，但没有列出它们：

```
Dim lines() As String
        Dim outputlines As New List(Of String)
        Dim searchString As String = "3"
        lines = IO.File.ReadAllLines("C:\Temp\test.txt")
        For Each line As String In lines
            If line.Contains(searchString) = False Then
                outputlines.Add(line)
            End If
        Next

        IO.File.WriteAllLines("C:\Temp\test.txt", outputlines) 
```

我是编程初学者，所以不要为我的问题生气。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:08:20.027

原则上，您的代码看起来应该可以工作。但是，它的唯一问题是它只查找一个坏词。您可以使用嵌套循环将其更改为搜索所有单词，如下所示：

```
Dim outputlines As New List(Of String)()
Dim badWords() As String = File.ReadAllLines("C:\Temp\badwords.txt")
For Each line As String In File.ReadAllLines("C:\Temp\test.txt")
    Dim badWordFound As Boolean = False
    For Each badWord As String in badWords
        If line.Contains(badWord) Then
            badWordFound = True
            Exit For
        End If
    Next
    If Not badWordFound Then
        outputlines.Add(line)
    End If
Next
File.WriteAllLines("C:\Temp\test.txt", outputlines) 
```

# c++ - 从 C++ 中的函数返回二维数组

> ID：15908632
> 
> 赞同：3
> 
> 时间：2013-04-09T17:33:13.520
> 
> 标签：c++, arrays, return-type

我想使用从函数返回的二维 int 数组我应该如何定义函数返回值？我使用了 int** 但编译器给出了错误：

```
int**  tableCreator(){
    int** table=new int[10][10];
    for(int xxx=1;xxx<10;xxx++){
        for(int yyy=1;yyy<10;yyy++){
            table[xxx][yyy]=xxx*yyy;
        }
    }
    return(table);  //Here:cannot convert from 'int (*)[10]' to 'int **'
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T17:42:51.837

试试这个：

```
#include <cstdio>
#include <cstdlib>

int** createTable(int rows, int columns){
    int** table = new int*[rows];
    for(int i = 0; i < rows; i++) {
        table[i] = new int[columns]; 
        for(int j = 0; j < columns; j++){ table[i][j] = (i+j); }// sample set value;    
    }
    return table;
}
void freeTable(int** table, int rows){
    if(table){
        for(int i = 0; i < rows; i++){ if(table[i]){ delete[] table[i]; } }
        delete[] table;    
    }
}
void printTable(int** table, int rows, int columns){
    for(int i = 0; i < rows; i++){
        for(int j = 0; j < columns; j++){
            printf("(%d,%d) -> %d\n", i, j, table[i][j]);
        }    
    }
}
int main(int argc, char** argv){
    int** table = createTable(10, 10);
    printTable(table, 10, 10);
    freeTable(table, 10);
    return 0;
} 
```

您需要第二个循环在 C 中分配一个二维数组和类似的操作来释放它。二维数组本质上是数组数组，因此可以表示为指针数组。循环初始化指向指针的数组。

根据下面与@Eric Postpischil 的对话进行澄清：更改 createTable 以获取行/列计数以实现真正的动态分配。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T17:34:07.430

```
int** table=new int[10][10]; 
```

这是错误的。在 C/C++ 中，您不能以这种方式为 2D 动态数组分配空间。

同时，您将数组大小声明为`10`，因此索引来自`0-9`，但是您试图`10`在嵌套的 for 循环中为索引分配值，这也不正确。

您可以执行以下分配：

```
int** table = new int*[10];
for (int i = 0; i < 10; ++i)
{
   table[i] = new int[10];
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T17:50:51.267

通常，用于指向数组的类型是指向数组元素的指针。由于二维数组`int`是 的数组`int`，因此您需要一个指向 的数组的指针`int`。这种类型的 C++ 语法`int (*)[N]`对于某些维度是`N`. 此代码演示：

```
#define N   10

int (*tableCreator())[N]
{
    int (*table)[N] = new int[N][N];

    for (int i = 0; i < N; ++i)
        for (int j = 0; j < N; ++j)
            table[i][j] = i*j;

    return table;
}

#include <iostream>

int main()
{
    int (*t)[N] = tableCreator();

    for (int i = 0; i < N; ++i)
    {
        for (int j = 0; j < N; ++j)
            std::cout << t[i][j] << ' ';
        std::cout << '\n';
    }

    delete [] t;

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T17:35:59.650

I.***数组不是指针。***

二、为什么不`vector<vector<int> >`呢？

三、如果没有，那么：

```
typedef int Int10Array[10];
Int10Array *arr = new Int10Array[10]; 
```

四。为什么要写越界？你想要明确的鼻恶魔吗？

```
for(int xxx = 0; xxx < 10; xxx++)
             ^^^      ^^^^ 
```

# iphone - 访问捆绑包上的资源

> ID：15908641
> 
> 赞同：0
> 
> 时间：2013-04-09T17:33:50.880
> 
> 标签：iphone, ios, ipad, cocoa-touch, cocoa

我创建了一个子项目作为静态库并向其中添加了一个包，因此我可以包装将由使用该库的所有程序使用的项目和资源。

我已按照此处的说明进行操作。 [http://www.galloway.me.uk/tutorials/ios-library-with-resources/](http://www.galloway.me.uk/tutorials/ios-library-with-resources/)

它工作正常，除非我必须使用图像和其他文件等资源。

我认为通过将库及其资源导入另一个项目，我可以轻松访问它们，但事实并非如此。

每次我必须访问库包中的资源文件时，我都必须使用它：

```
NSBundle *bundle = [NSBundle bundleWithURL:[[NSBundle mainBundle] URLForResource:@"MyLibraryBundle" withExtension:@"bundle"]];

path = [bundle pathForResource:@"readme" ofType:"txt"]; 
```

但是如果资源在主程序上，我必须使用 [NSBundle mainBundle] 代替。

这是一个非常复杂的逻辑，因为我可能有不止一个子项目，而且我将不得不创建数以千计的变体。

有没有办法让应用程序可以使用简单的语法找到资源，或者我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:56:34.280

将您的资源访问分解为一个单独的类。例如，这样的事情可能对您有用：

```
@interface CSResourceManager

+ (NSString *)pathForResource:(NSString *)resource ofType:(NSString *)type;

@end

@implementation CSResourceManager

+ (NSArray *)resourceBundles
{
    NSBundle *mainBundle = [NSBundle mainBundle];

    NSURL *libraryBundleURL = [mainBundle URLForResource:@"MyLibraryBundle" withExtension:@"bundle"];
    NSBundle *libraryBundle = [NSBundle bundleWithURL:libraryBundleURL];

    // Add more bundles here and/or cache as necessary
    return @[ libraryBundle, mainBundle ];
}

+ (NSString *)pathForResource:(NSString *)resource ofType:(NSString *)type
{
    NSString *path = nil;
    for (NSBundle *bundle in [self resourceBundles]) {
        if ((path = [[self resourceBundle] pathForResource:resource ofType:type])) {
            break;
        }
    }
    return path;
}

@end 
```

如果每次定位资源包太慢，您可能需要缓存它，即使用静态变量。

要使用它，您现在只需编写：

```
NSString *path = [CSResourceManager pathForResource:@"readme" ofType:@"txt"]; 
```

除了让你的代码更容易编写之外，使用这样的类也会更容易维护（例如，如果你想更改资源包的名称，添加额外的资源存储位置或回退等）。

**更新 #1**：请参阅上面的修改代码以支持用于定位资源的各种“搜索路径”。

**更新#2**：管理资源的其他想法：

完全使用捆绑包的替代方法是让您的子项目共享资源文件的命名约定，本质上是扁平化命名空间。例如，在每个资源文件前面加上与之关联的库的名称。

# c++ - 将基数 10 转换为 12，递归添加字母字符时遇到问题

> ID：15908644
> 
> 赞同：0
> 
> 时间：2013-04-09T17:34:01.667
> 
> 标签：c++, recursion

我在使用递归将字母添加到 base 10 - base 12 转换时遇到问题。我将如何在我的函数中添加字母？我正在考虑在其中添加一个 if 语句，但我不知道在哪里以及如何去做。感谢指点谢谢！

给定从 1 到 12 的计数：

```
Dec 1 2 3 4 5 6 7 8 9 10 11 12 

Duo 1 2 3 4 5 6 7 8 9 X  E  10 
```

我的功能：

```
template<class myType>
myType convertDec(myType number){
    if(number == 0)
        return number;
    //if statement somewhere in here? not sure considering i can't touch the return statement
    return (number % 12) + 10*convertDec(number / 12);
} 
```

理想输出示例：

65280 = 31940 **（工作正常）**

2147483626 = 4EE23088X **（不起作用！）**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T17:49:19.760

```
#include <iostream>
#include <string>

using namespace std;

string ConvertToDuodecimal(unsigned long long n)
{
  if (n < 12)
    return string() + "0123456789XE"[n];
  return ConvertToDuodecimal(n / 12) + ConvertToDuodecimal(n % 12);
}

int main()
{
  cout << ConvertToDuodecimal(0) << endl;
  cout << ConvertToDuodecimal(1) << endl;
  cout << ConvertToDuodecimal(10) << endl;
  cout << ConvertToDuodecimal(11) << endl;
  cout << ConvertToDuodecimal(12) << endl;
  cout << ConvertToDuodecimal(13) << endl;
  cout << ConvertToDuodecimal(65280) << endl;
  cout << ConvertToDuodecimal(2147483626) << endl;
  return 0;
} 
```

输出（[ideone](http://ideone.com/YXTBgY)）：

```
0
1
X
E
10
11
31940
4EE23088X 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:48:23.130

基数是数字显示方式的属性，与它的内部表示无关。您需要编写一个使用基数 12 打印普通 int 的函数。

```
a = 12;         // A = 12 (in base 10)
printf("%d",a); // Prints a in base 10 (still 12)
printf("%x",a); // Prints a in base 16 (now C) 
```

您的代码正在更改实际值，这不是正确的做法。

（是的，在书呆子罢工之前， printf 不是好的 C++ ......）

# javascript - 在 Firefox 中使用键盘快捷键弹出新窗口或标签

> ID：15908647
> 
> 赞同：3
> 
> 时间：2013-04-09T17:34:11.213
> 
> 标签：javascript, firefox

我正在开发一个 Web 应用程序，并且我有一种情况，我希望允许用户按下键盘快捷键以在新选项卡或窗口中打开某些内容。显然，弹出窗口拦截器会在这里产生问题。我知道他们试图通过确定弹出窗口是否是从某种用户交互（点击、按键等）启动的来变得聪明。Chrome 似乎可以很好地处理这个问题，按下键盘快捷键时会打开新标签，但 Firefox 会阻止它。

[我已经尝试了很多东西，包括这个](https://stackoverflow.com/questions/4907843/open-url-in-new-tab-using-javascript)SO question中提出的几乎所有解决方案，但似乎对 FF 没有任何作用。如果弹出新窗口的函数是从单击事件处理程序调用的，而不是从键盘事件处理程序调用的，则它在 FF 中工作正常。问题是，有人知道如何通过 FF 中的键盘事件来完成这项工作吗？

这是我使它工作的最新尝试（适用于 Chrome，但不适用于 FF）：

```
var $newTabEl = $('<div>');
$(document.body).append($newTabEl);
$newTabEl.click(function() {
  $(this).target = "_blank";
  window.open('/request/preview/requestId/' + data.get('id'));
  return false;
});
$newTabEl.click();
$newTabEl.remove(); 
```

# nginx - nginx 限制总缓存大小

> ID：15908648
> 
> 赞同：5
> 
> 时间：2013-04-09T17:34:11.583
> 
> 标签：nginx

我正在使用 nginx 缓存对我的 uwsgi 后端的请求

```
uwsgi_cache_path /var/cache/nginx/uwsgi keys_zone=cache:15M max_size=5G; 
```

我的后端设置了一个很长的过期标题（1 年以上）。但是，当我的系统运行时，我看到缓存达到 15M。它上升到那个水平，然后修剪到 10M。

这会导致对我的后端进行大量不必要的调用。当我更改 keys_zone 大小时，它似乎控制了整个缓存的大小。它似乎忽略了 max_size 而是替换了 keys_zone 大小。(*)

谁能解释这种行为？此版本中是否存在已知错误？我错过了重点吗？我不想将 5G 分配给缓存管理器..

```
# nginx -V
nginx version: nginx/1.2.0
built by gcc 4.6.3 (Ubuntu/Linaro 4.6.3-1ubuntu5) 
TLS SNI support enabled
configure arguments: --conf-path=/etc/nginx/nginx.conf --pid-path=/var/run/nginx.pid --user=www-data --group=www-data --with-http_ssl_module --with-http_stub_status_module 
```

(*) 更新：我想这是我试图在混乱中找到模式的过度活跃的想象力。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T23:57:02.010

Expires 标头（[和其他一些标头](http://wiki.nginx.org/HttpProxyModule#proxy_cache)）由 nginx 来确定响应是否可缓存，但它不用于确定缓存多长时间。

默认情况下，您的非活动缓存将在 10 分钟后被删除。你能增加这个数字，看看它是否有影响吗？

> proxy_cache_path 路径 [levels=levels] keys_zone=name:size [inactive=time] [max_size=size] [loader_files=number] [loader_sleep=time] [loader_threshold=time];
> 
> 在 inactive 参数指定的时间内未访问的缓存数据将从缓存中删除，无论其新鲜度如何。默认情况下，非活动设置为 10 分钟。

参考： http: [//nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_path](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_cache_path)

# c# - 如何以编程方式覆盖构建和启动操作？

> ID：15908652
> 
> 赞同：4
> 
> 时间：2013-04-09T17:34:24.680
> 
> 标签：c#, visual-studio-2012, visual-studio-extensions, extensibility, visual-studio-sdk

我创建了一个与自定义项目类型关联的自定义项目模板。该解决方案严重依赖于[Projects-Visual Studio 2012 框架的 MPF](http://mpfproj11.codeplex.com/)。

接下来我想做的是覆盖**此自定义项目类型**的默认“构建”（F6）和“不调试启动”（ctrl + F6）事件。解决方案本身将部署为 VSIX 包。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-14T13:31:25.940

您可以在 VSPackage 中拦截来自 Visual Studio UI 的任何命令。为此，您应该订阅所需的事件`DTE.Events.CommandEvents`。您必须将 GUID 和 Id 传递给 CommandEvents。

```
private void Initialize()
{
  var dte = GetService(typeof(SDTE)) as EnvDTE.DTE;
  _startCommandEvents = dte.Events.CommandEvents["{5EFC7975-14BC-11CF-9B2B-00AA00573819}", 295];
  _startCommandEvents.BeforeExecute += OnLeaveBreakMode;
}

private void OnBeforeStartCommand(string guid, int id, object customIn, object customOut, ref bool cancelDefault)
{
  //your event handler this command
} 
```

您的事件处理程序具有`ref bool cancelDefault`参数，传入`cancelDefault`TRUE 您取消 VS 命令，从而用它们替换 VS 行为。

要获取 GUID 和 Id 命令，您可以使用 VSIP 日志记录功能。要启用此功能，请设置注册表项的值：

```
[HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\<version>\General] "EnableVSIPLogging"=dword:00000001 
```

并重新启动 Visual Studio IDE。然后使用 Ctrl-Shift，单击一个菜单项，您将收到如下消息：

![Guid 和 Id 命令](https://i.stack.imgur.com/oZGm8.png)

消息中的 Guid 和 CmdID 是 CommandEvents 的必需参数。

**如果您正在实现一种新语言**（创建一种新类型的项目），添加自定义调试引擎和 MSBuild 集成更为正确。[您可以在IronPython](http://ironpython.net/)或[Nemerle](https://github.com/rsdn/nemerle)项目中看到此类实现的示例。

# iphone - 将视频嵌入 UIWebView - 使用“http//qa.test.com/2323bjdsdd2232332”之类的链接

> ID：15908659
> 
> 赞同：0
> 
> 时间：2013-04-09T17:34:47.810
> 
> 标签：iphone, ios, uiwebview, html5-video

众所周知，我们可以将本地媒体文件嵌入 webview 和来自 youtube 的链接（可流式传输）。

但我不确定我们是否可以链接到上面的网址。我试过了`<embed>, <video>, <iframe> and <object>`。没有什么对我有用。

> NSString *htmlString = `@"<html><head></head><body><video width="%0.0f" height="%0.0f" src="%@"></video></body></html>"`;

```
NSString* html = [NSString stringWithFormat:url,self.webView.frame.size.width,self.webView.frame.size.height,self.htmlstr];
[self.webView loadHTMLString:html baseURL:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T12:03:45.050

我以一定的观察回答，如果它错了，请纠正我（这个答案）。

1.  本地文件或链接（iTunes 音乐或电影链接）可以在 UIWebView 上播放
2.  远程链接（文件）也可以显示，但它必须像 youtube 链接一样可流式传输。只是提供一个链接并不能解决看起来的问题。

# facebook - 如何在 bash 脚本中从 Facebook 的图表中获取个人资料的“链接”？

> ID：15908660
> 
> 赞同：1
> 
> 时间：2013-04-09T17:34:50.983
> 
> 标签：facebook, bash

我正在尝试编写一个脚本，该脚本需要提取公共 facebook 页面 URL 列表并将它们存储在平面文本文件中。我已经使用 wget 下载了一些[http://graph.facebook.com/](http://graph.facebook.com/) $NUMBER 文件，但是由于它们使用的奇怪分隔符，我无法分离出 URL。这是一般格式（我将使用一个虚构的示例）：

```
{"id":"4","name":"John Smith","first_name":"John","last_name":"Smith","link":"http:\/\/www.facebook.com\/john.smith","username":"john.smith","gender":"male","locale":"en_US" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:43:11.303

那是 JSON，所以最好的办法是使用真正理解 JSON 的工具。如果您安装了 python，它会提供 json 支持，因此很容易执行以下操作：

```
$ echo '{"id":"4","name":"John Smith","first_name":"John","last_name":"Smith","link":"http:\/\/www.facebook.com\/john.smith","username":"john.smith","gender":"male","locale":"en_US"}' | python -c 'import json,sys; print json.load(sys.stdin)["link"]'
http://www.facebook.com/john.smith 
```

不是一个纯粹的 bash 解决方案，但在 bash 中解析 JSON 似乎是一项艰巨且不必要的工作，imo。

# php - 使用 If/Else 进行 PHP 菜单导航

> ID：15908661
> 
> 赞同：0
> 
> 时间：2013-04-09T17:34:52.510
> 
> 标签：php, html, navigation

我正在寻找一些关于使用 If/Else 进行菜单导航或资源链接的反馈。我做了一些快速搜索，并找到了与使用 PHP 来跟踪当前页面并应用特定 CSS 而不是实现菜单本身相关的项目。

我想做的是让菜单根据菜单更改我的内容 div。因此，如果单击“home”，则 div 变为 home，如果单击“about”，则 div 变为 about。

到目前为止，我所做的是创建一个变量“cl”，我使用每个 div 中的 id 属性设置它。在我的索引页面中，我使用以下内容：

```
//if cl is not set include default content div
if(!isset($_GET['cl']))
{
     //include main div
}

//if cl is set, check value and include the correct div
//anything that does not match a hard-coded cl value --SHOULD-- default to main
//div...may change this to be a custom error page
if(isset($_GET['cl']))
{
    if($_GET['cl']=="content-main")
    {
        //include main content div
    }
    elseif($_GET['cl']=="content-anotherPage")
    {
        //include another page div
    }
    else
    {
        //include main content or possibly custom error
    }
} 
```

我为其他菜单项添加了更多 elseif 块，但留下这个小块只是为了显示我在做什么。

这种方法是有效的方法吗？有没有我应该注意的基本事情？我的 If/else 块是否安全？（通过安全，我的意思是更改 URL 的值应该只是恢复为默认内容 div。我尝试将基本的 javascript 警报脚本放入 URL，它确实默认为主页，但不确定我的基本测试是否与实际安全有关）。

第一次发帖……如果我没有遵守礼仪，请告诉我，我很乐意纠正！

麦克风

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:37:23.493

而不是一堆`if`/`elseif`我宁愿使用`switch/case`语法：

```
switch( $_GET['cl'] ) {
    case "content-main":
       ...
       break;

    default:
       ...
       break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:38:42.133

如果您有很多条件，我会使用[switch](http://php.net/manual/en/control-structures.switch.php)语句而不是 [http://www.w3schools.com/php/php_switch.asp](http://www.w3schools.com/php/php_switch.asp)，因为它要快得多。如果您只有几个条件，例如少于 5 或​​ 6，则 if/else 很好。

# java - 重置文本区域内容

> ID：15908663
> 
> 赞同：2
> 
> 时间：2013-04-09T17:34:53.983
> 
> 标签：java, applet, textarea, textfield

我有这个代码.. 当我在文本字段中输入数字“6”时，文本应该显示在 textarea 中..但是之后如果我输入任何其他数字，我希望 textarea 内容清晰。但是当我执行我的代码时，即使我输入了不同的数字，textarea 的旧内容仍然存在。请帮忙！

```
import java.awt.*;
import java.awt.event.*;
import java.applet.*;
/* <applet code="front" width=500 height=500></applet> */
public class front extends Applet implements ActionListener {
  String msg="";
  TextArea text,text1;
  TextField txt;
  Button load, enter;

  public void init() {
    enter=new Button("Enter");
    load=new Button("Load");
    txt=new TextField(5);
    text=new TextArea(10,15);

    add(load);
    add(text);

    add(txt);
    add(enter);

    load.addActionListener(this);
    txt.addActionListener(this);
    enter.addActionListener(this);
  }

  public void actionPerformed(ActionEvent ae)
  {
    String str = ae.getActionCommand();
    if(str.equals("Load")) {
      msg = "You pressed Load";
    } else {
      if(txt.getText().toString().equals ("6")) {
        msg="Set the text for 6";
        text.setText("Text");
      } else {
        msg="Invalid number";
        text.setText("");
      }
    }
    repaint();
  }

  public void paint(Graphics g) {
    g.drawString(msg,350,250);
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:44:31.867

编写您的 actionPerformed() 方法如下

```
 public void actionPerformed(ActionEvent ae)
  {
    String str = ae.getActionCommand();
    if(str.equals("Load")) {
      msg = "You pressed Load";
    } else {
      if(txt.getText().toString().equals ("6")) 
         {
        **text.setText("");**
        msg="Set the text for 6";
        text.setText("Text");
         } 
         else {
        msg="Invalid number";
        text.setText("");
      }
    }
    repaint();
  } 
```

错误是您在写入文本字段后没有清除它！现在通过使用条件清除`text.setText("");`它`if`

希望这能解决您的问题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:48:57.883

您应该在方法`super.paint(g)`内调用`paint(Graphics g)`：

```
public void paint(Graphics g) {
    super.paint(g);
    g.drawString(msg,350,250);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-16T20:25:16.313

现在，`text.setText("");`不会做任何事情，它将与`//text.setText("");`

所以更好的方法是借助 ASCII 码，

对于 Null Character ASCII 值为`0`，在 unicode 中我们可以将其写为`'\u0000'`

最后，这个声明肯定会起作用：`text.setText(""+'\u0000');`

注意：他们没有方法是 textArea 类来清除区域......所以你必须自己做。

# c# - 替换表达式树中的参数值

> ID：15908669
> 
> 赞同：4
> 
> 时间：2013-04-09T17:35:26.350
> 
> 标签：c#, linq, expression

搜索了很长一段时间后，我仍然没有找到我正在寻找的答案。我找到了有关从树中添加和删除参数的答案，但没有找到有关替换特定参数的任何答案。

我的第一个方法按我的意愿工作，我需要用 Uri 转义值替换 partitionKey 值，然后返回未转义的结果。

```
public override IList<T> GetRowEntityList(string partitionKey)
{
    IList<T> rowEntities =  base.GetRowEntityList(Uri.EscapeDataString(partitionKey));
    return rowEntities.Select(UnEscapeRowEntity).ToList();
} 
```

我遇到的问题是重写此方法以使其行为相同。我已经知道该类型`T`具有属性`PartitionKey`，`RowKey`但也可以具有任何其他数量的属性。

对于示例谓词：

```
x => x.RowKey == "foo/bar" && x.SomeValue == "test" 
```

我希望它成为

```
x => x.RowKey == Uri.EscapeDataString("foo/bar") && x.SomeValue == "test" 
```

有没有办法做到这一点？

`T`我的基类使用此谓词对包含使用`Where(predicate)`调用的实体类型的表进行表查找

```
public override IList<T> GetRowEntityList(System.Linq.Expressions.Expression<Func<T, bool>> predicate)
{
    //modify predicate value here

    return base.GetRowEntityList(predicate);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:50:51.073

您需要实现一个[ExpressionVisitor](http://msdn.microsoft.com/en-us/library/dd323984.aspx)：

```
class MyVisitor : ExpressionVisitor
{
    protected override Expression VisitBinary(BinaryExpression node)
    {
        if(CheckForMatch(node.Left))
            return Expression.Equal(node.Left, Rewrite(node.Right));

        if(CheckForMatch(node.Right))
            return Expression.Equal(Rewrite(node.Left), node.Right);

        return Expression.MakeBinary(node.NodeType, Visit(node.Left), Visit(node.Right));
    }

    private bool CheckForMatch(Expression e)
    {
        MemberExpression me = e as MemberExpression;
        if(me == null)
            return false;

        if(me.Member.Name == "RowKey" || me.Member.Name == "PartitionKey")
            return true;
        else
            return false;
    }

    private Expression Rewrite(Expression e)
    {
        MethodInfo mi = typeof(Uri).GetMethod("EscapeDataString");

        return Expression.Call(mi, e);
    }
} 
```

我认为这是对的。测试有点难。请注意，这仅适用于`(x => x.RowKey == "some string")`. 它不会为`(x => x.RowKey.Equals("somestring")`. 它也不会为`(x => x.RowKey() == "some string")`.

然后使用实现的访问者重写谓词：

```
Expression<Func<T, bool>> predicate = (s => s.RowKey == "1 2");

ExpressionVisitor v = new MyVisitor();
Expression<Func<T, bool>> rewrittenPredicate = v.Visit(predicate);

//rewrittenPredicate then tests if s.RowKey == "1%202" 
```

# mysql - Rails 服务器无法使用 mysql2 启动 - 它需要的 Gems 存在

> ID：15908670
> 
> 赞同：0
> 
> 时间：2013-04-09T17:35:27.877
> 
> 标签：mysql, ruby-on-rails, ruby, ruby-on-rails-3.2, windows64

这是我第一次尝试在 Rails 上使用 MySql。使用 sqlite3 也会发生这种情况，除了它指向我做“gem install activerecord-sqlite3-adapter”，它告诉我没有这样的 gem 命名它。

我正在使用最新的 Ruby 2.0。我正在使用最新的 Rails 3.2.13 我有 mysql2 (0.3.11) gem 我也有 activerecord-mysql2-adapter (0.0.3)

然而......它给了我以下信息：

`C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.5/lib/bundler/rubygems_integration.rb:214:in 'block in replace_gem': Please install the mysql2 adapter: 'gem install activerecord-mysql2-adapter' (mysql2 is not part of the bundle. Add it to Gemfile.) (LoadError)`

当我执行时捆绑器运行`rails new [project name]`

如果是 mysql2 gem 的错误，这个命令在 64 位 Windows 系统上成功安装了 mysql2：`gem install mysql2 -v '0.3.11' -- '--with-mysql-lib="C:\MySQL\lib" --with-mysql-include="C:\MySQL\include"'`

生成的 Gemfile 使用`gem 'mysql2'`正常，正如我被告知的那样。

Database.yml 如下：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: shop_development
  pool: 5
  username: charlie
  password: *******
  host: localhost 
```

我已经手动创建了一个名为 [projectname]_development 的数据库。

```
C:\Users\Charlie\Documents\RailsProject\demo_app>rails s
=> Booting WEBrick
=> Rails 3.2.13 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/bundler-1.3.5/lib/bundler/rubygems_integ
ration.rb:214:in `block in replace_gem': Please install the mysql2 adapter: `gem
 install activerecord-mysql2-adapter` (mysql2 is not part of the bundle. Add it
to Gemfile.) (LoadError)
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/act
ive_record/connection_adapters/mysql2_adapter.rb:3:in `<top (required)>'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/ac
tive_support/dependencies.rb:251:in `require'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/ac
tive_support/dependencies.rb:251:in `block in require'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/ac
tive_support/dependencies.rb:236:in `load_dependency'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/ac
tive_support/dependencies.rb:251:in `require'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/act
ive_record/connection_adapters/abstract/connection_specification.rb:50:in `resol
ve_hash_connection'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/act
ive_record/connection_adapters/abstract/connection_specification.rb:41:in `resol
ve_string_connection'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/act
ive_record/connection_adapters/abstract/connection_specification.rb:25:in `spec'

        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/act
ive_record/connection_adapters/abstract/connection_specification.rb:130:in `esta
blish_connection'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/act
ive_record/railtie.rb:82:in `block (2 levels) in <class:Railtie>'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/ac
tive_support/lazy_load_hooks.rb:36:in `instance_eval'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/ac
tive_support/lazy_load_hooks.rb:36:in `execute_hook'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/ac
tive_support/lazy_load_hooks.rb:43:in `block in run_load_hooks'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/ac
tive_support/lazy_load_hooks.rb:42:in `each'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activesupport-3.2.13/lib/ac
tive_support/lazy_load_hooks.rb:42:in `run_load_hooks'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/act
ive_record/base.rb:720:in `<top (required)>'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/activerecord-3.2.13/lib/act
ive_record/railtie.rb:88:in `block in <class:Railtie>'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/i
nitializable.rb:30:in `instance_exec'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/i
nitializable.rb:30:in `run'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/i
nitializable.rb:55:in `block in run_initializers'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/i
nitializable.rb:54:in `each'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/i
nitializable.rb:54:in `run_initializers'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/a
pplication.rb:136:in `initialize!'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/r
ailtie/configurable.rb:30:in `method_missing'
        from C:/Users/Charlie/Documents/RailsProject/demo_app/config/environment
.rb:5:in `<top (required)>'
        from C:/Users/Charlie/Documents/RailsProject/demo_app/config.ru:3:in `re
quire'
        from C:/Users/Charlie/Documents/RailsProject/demo_app/config.ru:3:in `bl
ock in <main>'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rack-1.4.5/lib/rack/builder
.rb:51:in `instance_eval'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rack-1.4.5/lib/rack/builder
.rb:51:in `initialize'
        from C:/Users/Charlie/Documents/RailsProject/demo_app/config.ru:in `new'

        from C:/Users/Charlie/Documents/RailsProject/demo_app/config.ru:in `<mai
n>'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rack-1.4.5/lib/rack/builder
.rb:40:in `eval'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rack-1.4.5/lib/rack/builder
.rb:40:in `parse_file'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rack-1.4.5/lib/rack/server.
rb:200:in `app'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/c
ommands/server.rb:46:in `app'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rack-1.4.5/lib/rack/server.
rb:304:in `wrapped_app'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/rack-1.4.5/lib/rack/server.
rb:254:in `start'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/c
ommands/server.rb:70:in `start'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/c
ommands.rb:55:in `block in <top (required)>'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/c
ommands.rb:50:in `tap'
        from C:/Ruby200-x64/lib/ruby/gems/2.0.0/gems/railties-3.2.13/lib/rails/c
ommands.rb:50:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:44:54.997

检查以下内容

*   你`Gemfile`有条目说`gem 'mysql2'`吗？
*   运行`$ bundle update`命令时会发生什么？任何错误
*   您可以尝试以下命令来生成您的应用程序，

    `rails new demo_app -d mysql`

尝试上述应用程序时遇到什么错误？

# mysql - 如何在 Windows/WAMP/phpmyadmin 上导入 .tar.gz 文件

> ID：15908672
> 
> 赞同：0
> 
> 时间：2013-04-09T17:35:32.367
> 
> 标签：mysql, import, tar, gzip

我的网络主机刚刚从上周向我发送了一个数据库备份，我想看看它，但它是一个 .tar.gz

phpmyadmin 无法识别我的导入文件夹中的文件，只能识别 .sql 文件。Sypex Dumper 也没有接受它。

我用 7-Zip 解压它，但也没有用 .tar 解压。

我在 Windows 7 上也使用 Wamp。

有任何想法吗？

# javascript - 如何为当前的css值添加新值

> ID：15908674
> 
> 赞同：-1
> 
> 时间：2013-04-09T17:35:48.220
> 
> 标签：javascript, jquery, html, css

我有这样的 CSS 样式：

```
#div1 {
    display:block;
    position: fixed;
    top: 30px;
} 
```

无论当前数字是多少，我如何将 20px 添加到最高值，因为该值应该是动态的。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:36:52.987

[您可以在css()](http://api.jquery.com/css/#css-propertyName-functionindex--value)的回调函数中设置新值：

```
$('#div1').css('top', function(index ,value) {
    return value + 20;
}); 
```

对于 jQuery 版本 1.6+，您可以使用：

```
$('#div1').css('top','+=20px') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:37:19.983

```
$('#div1').css({top: "+20px"}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T21:57:30.417

```
//Returns current Top Value.
var origTop = $('#div1').position().top;

//Value you wish to increment original Top Value by.
var topIncrement = 20; 

// Sets new Top Value
$('#div1').css('top', origTop + topIncrement); 
```

jQuery.position().top 返回 Top 的 int 值。然后，您可以声明您希望增加的变量。在第三行代码中为新的 Top Value 设置 CSS 值。应该管用。如果我错了，请纠正。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T17:36:57.540

您可以使用[css](http://api.jquery.com/css/) jQuery 函数来获取或设置 css 属性。

```
$('#div1').css('top', '+=20px') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T17:38:32.113

尝试如下...

```
$('#div1').css('top','20px'); 
```

# xna - 处理游戏光标，而不是 Windows 光标

> ID：15908675
> 
> 赞同：0
> 
> 时间：2013-04-09T17:35:56.410
> 
> 标签：xna, xna-4.0

早些时候，我遇到了我的 Windows 光标与游戏不协调的问题，并在这里询问我如何解决这个问题。一位成员建议我隐藏 Windows 光标并创建自定义游戏光标，所以我这样做了。然而，新的问题出现了。

我的游戏光标通常偏向Windows鼠标的右侧，所以当我想将游戏光标移动到窗口左侧并单击鼠标左键时，会对游戏造成干扰，例如带一个应用程序在后台到顶部。

这是我的意思的图片：http: [//i.imgur.com/nChwToh.png](http://i.imgur.com/nChwToh.png)

如您所见，游戏光标偏移到 Windows 光标的右侧，如果我使用游戏光标单击窗口左侧的某些内容，则后台应用程序（本例中为 Google Chrome）将被带到最前面，对比赛造成干扰。

我可以做些什么来不受任何干扰地使用我的游戏光标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:37:44.017

通常，游戏中的光标会为您提供纹理，例如，[16,16] 处的像素是您“瞄准”的位置（例如，十字准线的中心）。您应该以鼠标为中心绘制它是使用 Mouse.GetState() 来获取位置，然后将鼠标纹理的绘制偏移“目标”点的“中心”的负值。

假设我们制作了一个自定义的 Mouse-Class：

```
public class GameMouse
{
    public Vector2 Position = Vector2.Zero;
    private Texture2D Texture { get; set; }
    private Vector2 CenterPoint = Vector2.Zero;
    public MouseState State { get; set; }
    public MouseState PreviousState { get; set; }

    //Returns true if left button is pressed (true as long as you hold button)
    public Boolean LeftDown
    {
        get { return State.LeftButton == ButtonState.Pressed; }
    }

    //Returns true if left button has been pressed since last update (only once per click)
    public Boolean LeftPressed
    {
        get { return (State.LeftButton == ButtonState.Pressed) && 
            (PreviousState.LeftButton == ButtonState.Released); }
    }

    //Initialize texture and states.
    public GameMouse(Texture2D texture, Vector2 centerPoint)
    {
        Texture = texture;
        CenterPoint = centerPoint;
        State = Mouse.GetState();

        //Calling Update will set previousstate and update Position.
        Update();
    }

    public void Update()
    {
        PreviousState = State;
        State = Mouse.GetState();
        Position.X = State.X;
        Position.Y = State.Y;
    }

    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Begin();
        spriteBatch.Draw(Texture, Position - CenterPoint, Color.White);
        spriteBatch.End();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T02:36:00.253

我刚刚尝试将所有内容从他们的课程中移出，全部移到主游戏课程中。这解决了问题，但没有给我答案为什么会发生这种情况。

代码完全相同，只是组织成单独的类。

那么，有谁知道这是为什么？为什么使用面向对象编程而不是把所有东西都放在游戏类中会弄乱我的鼠标协调和东西？

# c# - C#中的静态richbox

> ID：15908680
> 
> 赞同：1
> 
> 时间：2013-04-09T17:36:07.243
> 
> 标签：c#, .net, static-methods

如何`richtextbox`在表单（C#）中创建一个静态，以便在其他类中调用它并定义一个可以更改它的静态方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:40:56.203

3个步骤：

1.  将富文本框属性设置`Modifiers`为`Public`
2.  制作表单的静态实例：

    ```
     public Form1()
        {
            InitializeComponent();
            _form1inc = this;
        }
        public static Form1 _form1inc; 
    ```

3.  在其他类中使用

    ```
    Form1._form1inc.richTextBox1 
    ```

# ios - 区域监控和应用关闭

> ID：15908682
> 
> 赞同：0
> 
> 时间：2013-04-09T17:36:27.223
> 
> 标签：ios, notifications, location, background-process, regions

我在 iOS 中基于 Region Monitoring 的应用程序有问题；

假设我有一个半径为 300 米的受监控区域，并且我的位置距离该区域的中心 350 米（但我乘坐的汽车正在靠近我的区域）。

如果我在那一刻关闭我的应用程序，GPS 会立即关闭，并且永远不会调用方法“didEnterRegion”。如果我的位置距离我监控的区域更远（例如 500 米远），则不会发生此问题

有可能解决这个问题吗？我尝试使用“后台模式”在后台设置“所需的位置服务”，但这使得使用 GPS 而不是“区域监控”并且 GPS 永远不会停止。

区域监控的问题在于，当用户已经“在区域内”时，此功能永远不会起作用，这会导致及时通知出现很多问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:02:50.633

首先，您不需要后台模式来进行区域监控，即使您让设备休眠（按下顶部按钮），区域监控仍将继续运行。另外，如果您不使用 BG 模式，Apple 可以根据他们的需要拒绝您的应用程序。

对于您的问题，如果您已经在里面并且由于某种原因没有得到 didEnterRegion，您应该使用备份计划。在您的 CLRegion 类中，您可以调用`containsCoordinate`以查看您是否在该区域内。

您可能由于某种原因没有收到 didEnterRegion 调用，您的添加区域被重新初始化。即您重新添加了您的区域。

# javascript - 单选按钮的验证

> ID：15908683
> 
> 赞同：-1
> 
> 时间：2013-04-09T17:36:27.833
> 
> 标签：javascript, radio-button

这是我的代码.. 投标组织注册 *标记的字段是强制性的 登录名 联系人* 公司名称* 邮政地址* 国家 印度 城市* 手机号码* 电话号码 EmailID* 以前的项目* 成立年份* 类型*

```
<tr>
<td> TERMS & CONDITIONS</td>
<td> 
1\. Tenderer certifies that to the best of his knowledge the particulars furnished as above by him are true, correct, complete and current in every respect. If any stage it is found that information furnished by Tenderer is untrue, inaccurate, incomplete or not-current, Railway reserves its right to reject Tenderer?s offer or terminate his contract beside taking any other legal course of action as deemed fit. 2\. Permitting downloading of tender document by Railway is an added facility for convenience of Tenderer/s. Railway, however, reserves right to extend this facility for selected works or continue only with direct sale of tender forms. In case, tender document is not uploaded on website or download failure or incomplete document downloaded, Railway shall not be responsible in anyway. Railway shall not be responsible for any direct/indirect loss of business/profit resulting from inability to use this facility.<br>
3\. Tenderer intends to download and print the tender document solely for the purpose of bidding for above work and downloaded document shall not be used, copied or reproduced for any other purpose. 
```

4\. 投标人同意在提交报价时按照招标公告规定的形式支付不可退还的投标文件费用。未按规定格式提供投标文件所需费用的，其报价将被拒绝。6、招标人应及时了解铁路通过报纸、网站或电子邮件等方式发布的招标公告和招标文件的任何修改，并据此行事。投标人？如果他没有随下载的投标文件附上所有的更正/更正，报价将被拒绝。

```
</td>
</tr>
<tr>
<td>  </td>
<td> 
<form name="terms" action="#" method="post">
<input type= "radio" name = "term"> Agree
<input type = "radio" name = "term"> Disagree
</form>
</td>
</tr>
<tr>
<td>  </td>
<td> 
<form>
<input type = "submit" value = "Save" onClick=" return save_form()"> 
<input type = "reset" name = "reset" onClick="reset_form()"> 
</form>
</td>
</tr>
</table>

<script type= "text/javaScript">
 function save_form()
         { 
        var a= document.getElementById("text1").value;
        var b= document.getElementById("text2").value;
        var c= document.getElementById("text3").value;
        var d= document.getElementById("text4").value;
        var e= document.getElementById("text5").value;
        var f= document.getElementById("text6").value;
        var g= document.getElementById("text7").value;
        var h= document.getElementById("text8").value;
        var i= document.getElementById("text9").value;
        var j= document.getElementById("text10").value;
        var atpos= g.indexOf("@");
        var dotpos= g.lastIndexOf(".");

if (((document.form.term[0].checked==false) && (terms.term[1].checked==true)) || ((terms.term[0].checked==false) && (terms.term[1].checked==false)))
{
alert(" Agree with our agreement for your submission");
return (false);
}

else
    {
alert("You are registered");
return(true);
}
  } 
```

但单选按钮的验证不起作用..请提出可能的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:39:58.263

布尔表达式不是这样工作的。你不能这样做：

```
if((a || b || c ... || j) == null) 
```

这就是`OR`所有值并将它们与 进行比较`null`，这不是您想要的。你想做的是：

```
if((a == null) || (b == null) ... (j == null)) {
   ...
} 
```

您对`a.length`. 您不能简单地`OR`将所有`.length`值放在一起，然后检查它是否小于或等于 1。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:43:41.573

您可以做的是将它们全部放在一个控件中，然后遍历该 Divs 子项（这将是您要检查的字段）并以编程方式检查它们的所有值，而不是将每个字段硬编码到一个`if`语句中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T18:11:24.643

使用 jQuery 验证单选按钮很容易：

```
<form>
    <input type="radio" name="term" id="agree" value="agree"> Agree
    <input type="radio" name="term" id="disagree" value="disagree"> Disagree
<form>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.js">
    var termChoice;

    $(document).ready(function() {
        $('input:radio[name="term"].change(function() {
            termChoice = $(this).is(':checked').val();
        });    
    });

    //have fun with the termChoice variable
</script> 
```

//在纯js中，这可能是在一个被调用的验证函数中

```
if (document.getElementById('agree').checked) {
    //do stuff
}
else if (document.getElementById('disagree').checked) {
    //do stuff
} 
```

# haskell - [Char] a -> IO 一个函数

> ID：15908684
> 
> 赞同：2
> 
> 时间：2013-04-09T17:36:34.197
> 
> 标签：haskell

我如何编写一个函数，`Left x`以便出现 IO 错误但`Right x`像往常一样返回其结果，即该函数具有签名`Either [Char] a -> IO a`？

基本上我希望`Left err`结果成为`err`IO Monad 中的结果。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T17:40:03.857

一个简单的定义是：

```
f :: Either String a -> IO a
f = either (ioError . userError) return 
```

请注意，我们可以用 来通用`fail`，但这实际上是一个历史事故`fail`，`Monad`所以我不会使用这个定义：

```
f :: Monad m => Either String a -> m a
f = either fail return 
```

更好的通用版本可能会使用`MonadError`该类：

```
import Control.Monad.Error.Class

f :: MonadError e m => Either String a -> m a
f = either (throwError . strMsg) return 
```

# asp.net-mvc-4 - KnockoutJS 和 ASP.NET MVC 表单验证

> ID：15908689
> 
> 赞同：1
> 
> 时间：2013-04-09T17:36:52.060
> 
> 标签：asp.net-mvc-4, knockout.js

我知道这个话题有点复杂。我会尽量保持简单，并根据需要添加细节。

我有一个 ASP.NET MVC 4 网站，它使用 Web API 进行数据访问，并在前端使用 KnockOutJS 来保持 AJAX 风格的嗡嗡声。

由于我使用的是 Web API，而不是使用 MVC 中的经典脚手架，因此我为每个可以执行所有 CRUD 操作的模型创建了一个管理页面。一般来说，这非常有效。模式弹出窗口用于输入信息以创建新对象。更新是在网格中“内联”完成的。

在模式对话框中输入新信息时，表单验证按预期工作。例如，当数据标记为 [Required()] 时将字段留空，提交时将显示错误。

然而，数据的内联编辑并没有验证。在这种情况下，我实际上使用了两个字段。<span> 标签用于显示数据。单击“编辑”链接时，跨度被隐藏，而是显示 < input > 标记。这可能与问题有关。（可见性通过 KnockOutJS 控制。Editable() 是一个布尔值）

```
 <div class="span3">
                <span data-bind="text: Name, visible: !Editable()"></span>
                @Html.TextBoxFor(model => model.Name, new { data_bind = "value: Name, visible: Editable()", @class="fullwidth"})
                @Html.ValidationMessageFor(model => model.Name)
            </div> 
```

请注意，所涉及的数据 (model.Name) 是 KO observable。不确定这是否也是一个问题。

有没有人有让这些技术很好地结合在一起的经验？

# gcc - 仅在使用 makefile 时出现 Gcc 错误（CreateProcess：没有这样的文件或目录）

> ID：15908694
> 
> 赞同：0
> 
> 时间：2013-04-09T17:37:05.733
> 
> 标签：gcc, makefile, createprocess, gsl

我在带有 gcc 和 gsl 库的 windows 7 中使用 make 编译时遇到问题。它仅在使用 make 时发生（当我在 cmd 行中手动键入编译命令时，它会正确编译）。我发现了一些帖子，人们在 gcc 中遇到了类似的错误，但在正常输入时却没有，但在使用 make 时却没有。我的 Makefile 的内容如下所示：

```
#Compiler
COMP=gcc
# Compiler Flags.  -Wall turns on all warnings
FLAGS=-Wall
# GSL include file dir
INCLUDES=GnuWin32/include
# GSL Libraries directory
LIB=GnuWin32/lib
# Library Flags
LFLAGS=-lgsl -lgslcblas -lm
# Target Program
EXE=ex2.1.exe
# Dependencies needed for $(PROGRAM)
OBJ=ex2.1.o
# List of source files for objects
SRC=ex2.1.c
# List with types of files to be cleared by clean:
TRASH=*.exe *.o
# I/O files to be cleaned with 'very clean' target
#IOFILES= *.dat *.out *.csv *.mod

all: $(SRC) $(EXE)

$(EXE): $(OBJ)
    $(COMP) -L/$(LIB) $(OBJ) $(LFLAGS) -o $(EXE)

$(OBJ): $(SRC)
    $(COMP) -I/GnuWin32/include -c ex2.1.c
    #$(COMP) -I/$(INCLUDES) -c $(SRC)

clean:
    del $(TRASH) 
```

如果我只使用目录中的 ex2.1.c 键入 make，我会得到以下输出和错误：

```
gcc -I/GnuWin32/include -c ex2.1.c
gcc: error: CreateProcess : No such file or directory
make: *** [ex2.1.o] Error 1 
```

但是，如果我首先输入“gcc -I/GnuWiun32/include -c ex2.1.c”，ex2.1.o 会成功创建且没有错误。如果然后键入'make'，我会得到以下输出/错误：

```
gcc -L/GnuWin32/lib ex2.1.o -lgsl -lgslcblas -lm -o ex2.1.exe
gcc: fatal error: -fuse-linker-plugin, but liblto_plugin-0.dll not found
compilation terminated
make: *** [ex2.1.exe] Error 1 
```

但是，如果我手动输入“gcc -L/GnuWin32/lib ex2.1.o -lgsl -lgslcblas -lm -o ex2.1.exe”，那么可执行文件会按应有的方式编译和运行，所以问题似乎出在如何make 正在调用 gcc？我的 PATH 变量包含 make.exe 和 gcc.exe 的路径，所以我不确定我没有正确设置什么。有谁知道可能出了什么问题？谢谢。

# ios - 从 NSOperation 添加 NSOperation

> ID：15908695
> 
> 赞同：0
> 
> 时间：2013-04-09T17:37:05.763
> 
> 标签：ios, multithreading, thread-safety, nsoperation, nsoperationqueue

从 的方法中`NSOperation`添加新内容是否安全？我应该在添加之前暂停吗？这有什么陷阱吗？我必须使用在主线程中添加它吗？`NSOperationQueue``main()``NSOperation``NSOperationQueue``dispatch_get_main_queue`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:00:44.423

是的，在您使用一个线程访问队列之前，它应该是安全的。您还可以在向队列添加操作时使用互斥锁来锁定队列。

# c# - RESTful Web 服务中的 URL

> ID：15908697
> 
> 赞同：0
> 
> 时间：2013-04-09T17:37:13.397
> 
> 标签：c#, java, web-services, rest

我已阅读这本电子书，并且我已阅读您应该尝试将自己限制在两个基本 URL 中。因此，如果您有测验资源，您将拥有`/quizes`and `/quizes/{id}`。然后使用 HTTP 动词进行操作。但是，当您尝试遵循这种模式时，您将如何从服务器获得由随机问题动态生成的测验？

我认为`/quizes?type=random`，但是假设您希望 type 属性是可选的，默认为 random，并且您已经使用该`/quizes`路径来列出所有已保存的测验。

创建`/quizes/generate?type=random`路径不遵循建议，我认为生成术语也不适合，因为它是动词。

并且是诸如`/quizes`“保留”之类的返回集合的路径（我知道 REST 不是规范），还是`/quizes`用于生成测验服务器端并返回它是完全合法的？

[http://apigee.com/about/content/web-api-design](http://apigee.com/about/content/web-api-design)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:02:47.353

应该做的是为您`/quizzes`提供一个 URL 列表，让您可以访问不同的测验，所以假设您已经定义了`/quizzes`返回的媒体类型是 JSON 像这样（可能是特定类型，如`application/json+quiz`）：

```
{ 
    quizzes = [
        { description: "Quiz 1", url: "/quizzes/1" },
        { description: "Quiz 2", url: "/quizzes/2" }
    ]
} 
```

所以你可以有一个条目，让你访问一个随机测验，可以是这样的：

```
{ 
    quizzes = [
        { description: "Quiz 1", url: "/quizzes/1" },
        { description: "Quiz 2", url: "/quizzes/2" },
        { description: "Random", url: "/quizzes/random" },
    ]
} 
```

这个想法是有一个 REST 端点，所有后续 URL 都是通过语义媒体类型发现的。因此，如果您的媒体类型指定将有一个带有描述的条目`Random`会给您一个随机测验，那么端点消费者可以使用它。

# git - 移动 git 存储库时会发生什么。安全吗？

> ID：15908699
> 
> 赞同：0
> 
> 时间：2013-04-09T17:37:16.577
> 
> 标签：git

移动 git 存储库是否安全？（假设其他人都更新了他们的`remotes`and `symlinks`）

在最初的问题中，我注意到 git 在`.git/objects`. 但我现在意识到它们不是符号链接。

请注意，此问题与以下问题不同：[git 如何处理符号链接？](https://stackoverflow.com/questions/954560/what-does-git-do-to-files-that-are-a-symbolic-link)因为我问的是 git**创建的符号链接。**

根据评论中的要求，这是一个示例：

```
$ ls -ld ./something.git/objects/7a/f87b48b897fde759daaff2b0a781691d5a625a
-rwxrwxrwx 1 XXX YYY 188 Jan 25 17:12 ./something.git/objects/7a/f87b48b897fde759daaff2b0a781691d5a625a* 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:56:31.950

如果“移动”是指命令`mv`，那么是的，这是安全的。Git 不会在给定存储库目录之外进行相对路径引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:35:54.640

在 git 中，您可以移动、重命名副本等而不会产生任何副作用。

Git 将其所有信息存储在 .git 文件夹中（在根目录内），只要您不弄乱 .git 文件夹，您就可以安全地移动、复制、重命名该文件夹。

# php - 检查常量已定义但为空？

> ID：15908703
> 
> 赞同：1
> 
> 时间：2013-04-09T17:37:23.393
> 
> 标签：php, constants

```
<?php
    define ('foo','');
if (defined('foo')){
    if (empty(foo)){
        echo "Notice: Foo Is Defined, But Does Not Carry A Value. Please Set It";
    }
} 
```

如果有这个当前脚本，我正在对用户需要在配置页面中定义的已定义常量运行一组检查。问题是，配置发出时没有任何定义：

```
define ('foo',''); 
```

并且在运行脚本时，我首先检查必要的常量是否正确定义并带有一个值。

问题是，如果值已定义，我可以得到，但我无法正确检查它是否为空。

我知道空期望传递的变量，如果我将定义的常量传递给变量，这不是有点失败吗？

```
<?php
 define ('Foo','');
 $Foo = Foo;
 if (empty($Foo)){
  echo "Foo Is Empty"; 
}
?> 
```

而我不妨设置：

```
$Foo = 'Value';
$OtherConstant = 'Another'; 
```

那么如何检查我的常量在定义时是否带有一个值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T17:54:20.050

你可以简单地这样做：

```
if (defined('foo')) {
    echo 'defined';
    if (foo) {
        echo 'not empty';
    }
    else {
        echo 'empty';
    }
}
else {
    echo 'not defined';
} 
```

如果 foo 是一个空字符串，则`if(foo)`条件将评估为假。`empty()`转换为布尔值和转换为布尔值之间存在细微差别。其他情况请参考 PHP 手册。[布尔转换](http://www.php.net/manual/en/language.types.boolean.php#language.types.boolean.casting)，[empty()](http://php.net/manual/en/function.empty.php)

# java - 自定义 Swarm Connect 排行榜

> ID：15908710
> 
> 赞同：0
> 
> 时间：2013-04-09T17:37:33.270
> 
> 标签：java, android, leaderboard

现在我正在以`SwarmConnect`这种方式显示在线排行榜：

```
public void showLeaderboard() {
    SwarmLeaderboard.showLeaderboard(LEADERBOARD_ID);
} 
```

它显示以下排行榜：

![在此处输入图像描述](https://i.stack.imgur.com/LMTRb.png)

这显然是格式化的，`SwarmConnect`在游戏过程中看起来和我的应用程序完全不同。有什么方法可以自定义这个排行榜，例如只提取值并将其放入我自己创建的高分表中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:38:31.290

是的，这是可能的，不是那么容易，但他们可能在他们的页面上给出了一个很好的例子

在这里查看。[http://swarmconnect.com/admin/docs/kissthefish](http://swarmconnect.com/admin/docs/kissthefish)

# c# - 为集合集合实现比较器

> ID：15908715
> 
> 赞同：0
> 
> 时间：2013-04-09T17:37:45.370
> 
> 标签：c#, generics, dictionary, iequalitycomparer

我有我的课

```
MyClass<MyTriple<FirstG, SecondG, ThirdG>> : ICollection<MyTriple<FirstG, SecondG, ThirdG>> 
```

我的数据存储在：

```
Dictionary<FirstG, Dictionary<SecondG, ThirdG>> Data 
```

我想`IEqualityComparer`为我的数据实现。的构造函数`MyClass`必须作为参数比较器`MyTriple`：

```
public MyClass(IEqualityComparer<MyTriple<FirstG, SecondG, ThirdG>> comparer) {...} 
```

我想（以某种方式）将此比较器传递给`Data`并在构造函数中创建它，例如：

```
Data = new Dictionary<FirstG, new Dictionary<SecondG, ThirdG>(SecondAndThirdGComparer)>(FirstGComparer); 
```

我真的很绝望，我尝试创建实现的比较器`IEqualityComparer`，但我不知道如何获得`FirstGComparer<FirstG>`比较器。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:15:51.213

好的，所以用户带有一个`comparer`类型的参数（给构造函数）：

```
IEqualityComparer<MyTriple<FirstG, SecondG, ThirdG>> 
```

现在，这可能是“3D”中任何疯狂的比较器。没有人可以保证这`comparer`以坐标方式或字典方式工作。因此，例如，您绝对*不可能*“分解”出 only 的比较器`FirstG`。

假设您有两个实例`firstG_X`，`firstG_Y`例如。然后从`comparer`你无法判断这两者是否相等。您只能要求`comparer`比较*两个三元组*。如果您“扩展”`firstG_X`到某个三元组和`firstG_Y`其他某个三元组，则必须做出任意选择，而神谕的答案`comparer`很可能取决于该选择。

希望我说的有道理。

# asp.net - 无法访问 DataList 中的复选框 checkedchanged 事件

> ID：15908719
> 
> 赞同：0
> 
> 时间：2013-04-09T17:37:49.730
> 
> 标签：asp.net, checkbox, datalist

我在数据列表项模板中有复选框..但我无法访问复选框 chechedchange 事件。我设置`AutoPostBack`为真。但仍然不能触发事件。这是我的代码。

```
<ul class="commentlist" >
                    <asp:DataList ID="datalistYorum" runat="server" DataSourceID="ods_yorumlar"  
                            RepeatLayout="Flow" ItemStyle-Wrap="True" RepeatDirection="Horizontal" 
                            onitemcreated="datalistYorum_ItemCreated" 
                            onitemdatabound="datalistYorum_ItemDataBound" onload="datalistYorum_Load" 
                            ondatabinding="datalistYorum_DataBinding">
                      <ItemTemplate>
                        <li class="comment">
                         <div class="comment-body">
                            <div class="comment-author vcard">
                                <div class="lightbox-photo">
                                    <a class="image-overlay" href='<%# "Foto/profil/foto_buyuk/" + Eval("Yorum_Profil_Foto_Buyuk") %>' data-rel="prettyPhoto" title='<%# Eval("Yorum_UserName")%>'>
                                    <img src='<%# "Foto/profil/foto_kucuk/" + Eval("Yorum_Profil_Foto_Kucuk") %>' alt='<%# Eval("Yorum_UserName")%>' class="avatar" />
                                    </a>
                                 </div>
                                 <cite class="fn"><asp:HyperLink ID="linkProfil" runat="server" Text='<%# Eval("Yorum_UserName")%>' NavigateUrl='<%# "~/profil.aspx?user_id="+ Eval("User_ID") %>'></asp:HyperLink></cite>
                                 <cite class="fn-time"><%# Eval("Yorum_Gecen_Zaman")%></cite> 
                            </div>
                            <p><%# Eval("Yorum_Text")%></p>
                             <div class="reply"><asp:CheckBox ID="checkLike" runat="server" CssClass="comment-reply-link"   AutoPostBack="True" />
                                 <asp:ToggleButtonExtender ID="ToggleButtonLike" runat="server" TargetControlID ="checkLike" ImageHeight="32" ImageWidth="52" CheckedImageUrl="~/images/liked.png" UncheckedImageUrl="~/images/like.png" CheckedImageAlternateText="Like">
                                 </asp:ToggleButtonExtender>
                             </div>
                    <div class="reply"><asp:CheckBox ID="checkDislike" runat="server" CssClass="comment-reply-link"  AutoPostBack="True" />
                     <asp:ToggleButtonExtender ID="ToggleButtonDislike" runat="server" TargetControlID="checkDislike" ImageHeight="32" ImageWidth="62" UncheckedImageUrl="~/images/dislike.png" CheckedImageUrl="~/images/disliked.png">
                     </asp:ToggleButtonExtender>
                     </div>
                      </div>
                       </li>
                        </ItemTemplate>

                        </asp:DataList>
                       <asp:ObjectDataSource ID="ods_yorumlar" runat="server" 
                            DataObjectTypeName="Yorum" TypeName="yonet" SelectMethod="PostYorumlariGetir" 
                            ondatabinding="ods_yorumlar_DataBinding" 
                            onselecting="ods_yorumlar_Selecting" onselected="ods_yorumlar_Selected">
                       <SelectParameters> 
```

和后面的代码：

```
 protected void datalistYorum_ItemDataBound(object sender, DataListItemEventArgs e)
    {
        if (e.Item.ItemType == ListItemType.Item || e.Item.ItemType==ListItemType.AlternatingItem)
        {
            CheckBox checkLike = (CheckBox)e.Item.FindControl("checkLike");
            CheckBox checkDislike = (CheckBox)e.Item.FindControl("checkDislike");

            if (!Page.IsPostBack)
            {
                checkLike.CheckedChanged += new EventHandler(checkLike_CheckedChanged);
                checkDislike.CheckedChanged += new EventHandler(checkDislike_CheckedChanged);
            }
        }
    }

 public void checkLike_CheckedChanged(object sender, EventArgs e)
    { 
        object user_id =  Membership.GetUser().ProviderUserKey;
        DateTime event_date = DateTime.Now;
        CheckBox checkLike = (CheckBox)datalistYorum.FindControl("checkLike");
         if (checkLike.Checked == true)
        {
            try
            {
                using (SqlConnection baglanti = new SqlConnection(ConfigurationManager.ConnectionStrings["xxx"].ConnectionString.ToString()))
                {

                    SqlCommand komut = new SqlCommand("sp_likeordislike", baglanti);
                    komut.CommandType = CommandType.StoredProcedure;
                    komut.Parameters.AddWithValue("@comment",1);
                    komut.Parameters.AddWithValue("@user_id", user_id);
                    komut.Parameters.AddWithValue("@likeordislike", 1);
                    komut.Parameters.AddWithValue("@event_date", event_date);
                    baglanti.Open();
                    komut.ExecuteNonQuery();
                    baglanti.Close();
                }
            }
            catch (Exception)
            {
                throw;
            }
        }

    } 
```

但什么也没发生。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:41:29.750

试试这个：

```
protected void checkDislike_CheckedChanged(Object sender, EventArgs e)
{
    CheckBox cb = (CheckBox) sender;
    DataListItem item = (DataListItem) cb.NamingContainer;
    //
    //
} 
```

您的标记将如下所示：

```
<asp:CheckBox ID="checkDislike" runat="server" CssClass="comment-reply-link"  AutoPostBack="True" OnCheckedChanged="checkDislike_CheckedChanged" /> 
```

> 在尝试此评论之前`checkbox events`

检查此[链接](http://www.c-sharpcorner.com/forums/thread/120618/how-do-i-access-checkbox-checkchanged-event-in-gridview.aspx)：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:51:42.160

除非您在 Page_Load 中为“checklike”复选框添加事件处理程序，否则它看起来好像缺少分配。

更改“checklike”复选框声明，如下所示：

```
<asp:CheckBox ID="checkLike" runat="server" CssClass="comment-reply-link" AutoPostBack="True" OnCheckedChanged="checkLike_CheckedChanged" /> 
```

# html - 根据媒体加载特定的 .dart 文件

> ID：15908724
> 
> 赞同：4
> 
> 时间：2013-04-09T17:38:10.263
> 
> 标签：html, dart

我知道可以根据媒体类型加载特定的 CSS 文件，但是是否可以对 dart 文件执行相同的操作？

例如，我想根据媒体类型是“手持”还是“屏幕”来加载特定的 dart 文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:22:17.313

要回答我自己的问题，可以这样做，但不能通过媒体。解决方案是动态加载正确的脚本：

```
<script>

  var scriptSrc = 'firstScript.dart';
  if (screen.width <= 800)
  scriptSrc = 'secondScript.dart';
  var script = document.createElement('script');
  script.type = "application/dart";
  script.src = scriptSrc;
  var body = document.getElementsByTagName('body')[0];
  body.appendChild(script); 

</script> 
```

# jquery - jQuery 故障灯箱

> ID：15908726
> 
> 赞同：-1
> 
> 时间：2013-04-09T17:38:19.400
> 
> 标签：jquery, html, css

我正在为我正在做的网站使用一个名为 fancybox 的 jQuery 插件。它似乎有问题，因为在首页有某种不可见的覆盖，但它激活了我页面底部的缩略图视图，并掩盖了我的链接并破坏了整个页面。

有问题的网站：http: [//johns-webdesign.com/client/Andy/gallery.html](http://johns-webdesign.com/client/Andy/gallery.html)

HTML

```
<div id="content" style="height:350px">
        <h1>Our Work</h1>

<div class="photo_thumb"><a href="#"><img src="img/work/construction bathroom.jpg" width="160" height="100"></a><p>Title</p>
<div class="overlay"><a class="fancybox" href="img/work/construction bathroom.jpg" title="Test">Hi</a></div></div>

<div class="photo_thumb"><a href="#"><img src="img/work/construction best windows.jpg" width="160" height="100"></a><p>Title</p>
<div class="overlay"><a class="fancybox" href="img/work/construction best windows.jpg" title="Test">Hi</a></div></div>

<div class="photo_thumb"><a href="#"><img src="img/work/construction block.jpg" width="160" height="100"></a><p>Title</p>
<div class="overlay"><a class="fancybox" href="img/work/construction block.jpg" title="Test">Hi</a></div></div>

<div class="photo_thumb"><a href="#"><img src="img/work/construction floors.jpg" width="160" height="100"></a><p>Title</p>
<div class="overlay"><a class="fancybox" href="img/work/construction floors.jpg" title="Test">Hi</a></div></div>

<div class="photo_thumb"><a href="#"><img src="img/work/construction hygiene.jpg" width="160" height="100"></a><p>Title</p>
<div class="overlay"><a class="fancybox" href="img/work/construction hygiene.jpg" title="Test">Hi</a></div></div>

<div class="photo_thumb"><a href="#"><img src="img/work/construction sanity.jpg" width="160" height="100"></a><p>Title</p>
<div class="overlay"><a class="fancybox" href="img/work/construction sanity.jpg" title="Test">Hi</a></div></div>

<div class="photo_thumb"><a href="#"><img src="img/work/construction stair railings.jpg" width="160" height="100"></a><p>Title</p>
<div class="overlay"><a class="fancybox" href="img/work/construction stair railings.jpg" title="Test">Hi</a></div></div>

<div class="photo_thumb"><a href="#"><img src="img/work/constructions stairs railings.jpg" width="160" height="100"></a><p>Title</p>
<div class="overlay"><a class="fancybox" href="img/work/constructions stairs railings.jpg" title="Test">Hi</a></div></div>

        </div> 
```

CSS

```
.photo_thumb {
    height:100px;
    width:160px;
    float:left;
    margin:4px 4px 15px 4px;
    padding:5px;
    background-color:#999;
}
.overlay {
    height:100px;
    width:160px;
    display:none;
    margin-top:-137px;  
    background-color:#666;
    opacity:0.5;
    background-position:center;
    background-image:url(../img/zoom.png);
    background-repeat:no-repeat;
    background-position: 1 0;
}
.photo_thumb:hover > .overlay {
    position:relative;
    z-index:2;
    display:block;
    opacity:0.6;
    background-position:center; 
    background-color:#666;
    height:100px;
    width:160px;
    opacity:0.5; 
}
.photo_thumb p {
    margin-top:3px;
    margin-left:-20px;
}
.overlay a{
    position:absolute;
    width:100%;
    height:100%;
    top:0;
    left:0;
    text-decoration:none; /* Makes sure the link   doesn't get underlined */
    z-index:10; /* raises anchor tag above everything else in div */
    background-color:white; /*workaround to make clickable in IE */
    opacity: 0; /*workaround to make clickable in IE */
    filter: alpha(opacity=1); /*workaround to make clickable in IE */
}
.fancybox {
    display:none;
} 
```

我目前将fancybox 的显示设置为无，因为它无法正常工作。以下是我已经讨论过的一些事情；

```
.overlay > .fancybox {
display:block;
} 
```

这并没有解决问题，所以我尝试了一些 JavaScript

```
<script type="text/javascript">
   $('.overlay').hover(function() {
    $('.fancybox').toggle(show)();
});
    </script> 
```

由于某种原因，这没有做任何事情。

我很难说实话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:52:47.140

```
 <script type="text/javascript">   
    $(document).ready(function(){ 
  $('.overlay').hover(function() {
    $('.fancybox').toggle()();
    });
});
</script> 
```

修复了问题。感谢评论但随后删除他的帖子的人，它解决了问题，但我只需要从 toggle() 中删除属性 hide

# emacs - 使用特定的 emacs 服务器

> ID：15908734
> 
> 赞同：3
> 
> 时间：2013-04-09T17:38:36.667
> 
> 标签：emacs

我通常会打开 3 或 4 个 emacs，因为我在不同工作区的 3 或 4 个不同项目中工作。现在，当我尝试使用 emacsclient 打开一个新文件时，我无法控制它转到哪个 emacs。通常它会转到其他工作区中的 emacs。有没有办法指定将它打开到哪个 emacs 中？

一种方法是重新启动我希望该文件所在的服务器，但这不是我正在寻找的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T00:59:57.210

Burton 的解决方案是在正确的轨道上，但过于复杂，因为您不应该需要使用临时目录的名称来解决问题。你可以这样做：

```
(defun start-named-server (name)
  (let ((server-name name))
    (server-start))) 
```

然后使用

```
emacsclient -s <name> "$@" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T18:26:25.660

您可以为服务器套接字文件指定一个特定名称，然后调用 emacsclient 以使用该套接字：

```
(defun get-tmpdir ()
    (or (getenv "TMPDIR") "/tmp"))

(defun start-named-server (name)
    (let ((server-name (format "%s/emacs-%s" (get-tmpdir) name))
        (server-start)) 
```

现在定义一个 shell 脚本“ec”，它允许您指定服务器名称：

```
emacsclient -s ${TMPDIR-/tmp}/emacs-${1?"usage: ec [emacs server name] ..."} "$@" 
```

因此，现在您可以在您的 emacs 中运行 M-: (start-named-server "1") 后转到“ec 1 myfile”，然后对所有其他 emacs 重复 2、3、4 ...

# mysql - Mysql：如何处理具有自己属性的类别

> ID：15908743
> 
> 赞同：0
> 
> 时间：2013-04-09T17:39:05.680
> 
> 标签：mysql, filter, attributes

假设我有一家商店，销售一般产品……例如自行车和电脑。一个项目只能有一个类别。

因此，我的项目具有类别（自行车、计算机、衣服等），并且根据类别，项目具有属性，而这些属性的值也取决于类别。

例如我有一个

*   具有“衣服”类别的“毛衣”及其属性可能是：**尺寸**为“ *M* ”，**颜色**为“*蓝色*”

*   具有“计算机”类别及其属性的“上网本”可能是：值为“ *Core i3* ”的**CPU和值为“** *1 To* ”的内存

 **对此有什么好的方法？到目前为止，我还没有那么多......只是一个表格“项目”和“类别”......也许是“过滤器”，但不确定。

谢谢您的帮助。**

# ios - AppStore 的屏幕截图语言

> ID：15908744
> 
> 赞同：6
> 
> 时间：2013-04-09T17:39:09.727
> 
> 标签：ios, app-store

将多语言应用程序的屏幕截图提交到 AppStore 时，我的屏幕截图必须是哪种语言？他们必须使用默认语言或任何语言吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T17:41:04.013

您将为应用程序的每个本地化提交一组不同的屏幕截图。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T17:43:34.327

您可以为不同的应用商店上传不同的屏幕截图，如果可能的话，您应该为您支持的每种语言本地化屏幕截图。您可以在元数据中上传新的屏幕截图，您可以在同一位置编辑不同应用商店的描述和关键字。

# javascript - 概念 - 单击链接时关注当前页面？

> ID：15908748
> 
> 赞同：1
> 
> 时间：2013-04-09T17:39:34.470
> 
> 标签：javascript, html

我在用着

```
target = "_blank" 
```

单击链接时生成一个新选项卡。但是，浏览器会将焦点移至该选项卡。

有没有办法让注意力集中在当前标签上？

**答案摘要**

基本上，只需调度一个模拟控件单击的当前事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:39:37.557

您可以使用此功能。

```
<button id="openLink" value="http://www.google.com">Open Link</button> 
```

首先，您必须将事件添加到对象

```
document.getElementById("openLink").addEventListener("click", openTab, false); 
```

这是功能。

```
function openTab(){
    var a = document.createElement("a");
    a.href = document.getElementById("openLink").value;
    var evt = document.createEvent("MouseEvents");    
    evt.initMouseEvent("click", true, true, window, 0, 0, 0, 0, 0, true, false, false, false, 0, null);
    a.dispatchEvent(evt);
} 
```

我想我在论坛上看到了这个问题，如果我找到链接我会坚持

我做了一些更改，并创建了一个新的 jsfiddle -> [http://jsfiddle.net/PXR8f/](http://jsfiddle.net/PXR8f/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:51:59.113

试试下面...它会帮助你....

```
<a href="http://www.google.com" onclick="window.open(this.href,'_self');window.open('#','_blank');">
    Click Here
 </a> 
```

# c# - 从全景页面导航到非全景页面（列表项）

> ID：15908751
> 
> 赞同：0
> 
> 时间：2013-04-09T17:39:44.037
> 
> 标签：c#, windows-phone-7

这是我的全景页面项目的 xaml。

```
<controls:PanoramaItem x:Name="deeln" Header="Deelnemers" Style="{StaticResource subtitle}">
                <!--Double line list with image placeholder and text wrapping-->
                <ListBox Margin="12,0,-12,0" ItemsSource="{Binding ItemsDeelnemer}" x:Name="lbDeelnemer" SelectionChanged="lbDeelnemer_SelectionChanged">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <ScrollViewer HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Disabled">
                                <StackPanel Orientation="Horizontal" Margin="0,0,0,17">
                                    <TextBlock Foreground="Black" TextWrapping="Wrap" Text="{Binding LineNr}" Style="{StaticResource PhoneTextExtraLargeStyle}" ></TextBlock>
                                    <StackPanel Width="430" Height="100">
                                        <TextBlock Foreground="Black" TextWrapping="Wrap" Text="{Binding LineNaamWielrenner1}" Style="{StaticResource PhoneTextExtraLargeStyle}" FontSize="35"></TextBlock>
                                        <TextBlock Foreground="Black" TextWrapping="Wrap" Text="{Binding LineNaamWielrenner2}" Style="{StaticResource PhoneTextExtraLargeStyle}" FontSize="35"></TextBlock>
                                    </StackPanel>
                                </StackPanel>
                            </ScrollViewer>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </controls:PanoramaItem> 
```

这是我在全景页面中的代码。

private void lbDeelnemer_SelectionChanged(object sender, SelectionChangedEventArgs e) { #region 转到特定的 deelnemerinfo 屏幕

```
 // If selected index is -1 (no selection) do nothing
        if (lbDeelnemer.SelectedIndex == -1)
            return;

        // Navigate to the new page

        if (lbDeelnemer.SelectedIndex == 0)
        {
            NavigationService.Navigate(new Uri("/DeelnemerInfo.xaml", UriKind.Relative));
            //NavigationService.Navigate(new Uri("/DeelnemerInfo.xaml?selectedItem=" + lbDeelnemer.SelectedIndex, UriKind.Relative));
        }

        // Reset selected index to -1 (no selection)
        lbDeelnemer.SelectedIndex = -1;

        #endregion
    } 
```

这是我来自非全景页面的代码。

protected override void OnNavigatedTo(NavigationEventArgs e) { //第二次尝试 string strItemIndex; if (NavigationContext.QueryString.TryGetValue("goto", out strItemIndex)) PanoramaControl.DefaultItem = MyPanorama.Items[Convert.ToInt32(strItemIndex)];

```
 base.OnNavigatedTo(e);

        //first try
        string selectedIndex = "";
        if (NavigationContext.QueryString.TryGetValue("selectedItem", out selectedIndex))
        {
            int index = int.Parse(selectedIndex);
            DataContext = App.ViewModel.ItemsDeelnemer[index];
        }
    } 
```

我的问题，我想像使用默认数据绑定应用程序一样导航。您单击第一个列表项，然后转到新页面（非全景）。它看起来很简单，但我找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:20:14.697

尝试将标签属性绑定到索引/项目值

```
 <ListBox>
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel>
                        <HyperlinkButton Tag="{Binding FileName}" Click="location_Click"/>
                        <TextBlock Text="{Binding DateCreated}"/>                                       
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

相应地导航

```
private void location_Click(object sender, RoutedEventArgs e)
        {
            HyperlinkButton clicked = (HyperlinkButton)sender;
            string uri = "/noteapp;component/ViewEdit.xaml?id=" + clicked.Tag;
            NavigationService.Navigate(new Uri(uri, UriKind.Relative));
        } 
```

并在 panaroma 页面上使用类似这样的东西来检索值

```
filename = NavigationContext.QueryString["id"];
var storage = IsolatedStorageFile.GetUserStoreForApplication();
using (var file = storage.OpenFile(filename, FileMode.Open)) 
```

# php - 尝试在不允许使用索引类型的情况下使用索引类型“-1”（仅限 1 或 -1）

> ID：15908755
> 
> 赞同：1
> 
> 时间：2013-04-09T17:39:48.850
> 
> 标签：php, mongodb, mongodb-php

我在用：

```
$db->collection->find()->sort(array('username' => '-1')); 
```

我不断收到错误：

> MongoCursorException: localhost:27017: 尝试在不允许使用索引类型的情况下使用索引类型“-1”（仅限 1 或 -1）。

我正在使用 MongoDB 2.4.1 和 PHP 驱动程序 1.3.x。

为什么是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:39:48.850

你已经像这样调用排序了：

```
sort(array('username' => '-1')); 
```

这是一个问题。在 MongoDB 2.4.1 中有一个小问题（错误？），这意味着它将不再接受字符串进行排序。

由于这不在驱动程序中，而是在服务器（MongoDB 本身）中，因此仅更改驱动程序版本将无法解决此问题。

这可能比 MongoDB 2.4.1 更早存在，但是，我只是在 MongoDB 2.0.0 和 2.1.x 上测试了它，因此我没有在相同的 PHP 驱动程序版本（1.2.x 和 1.3.x）上观察到这种行为。

要解决此问题，您必须指定一个带符号的数字，如下所示：

```
sort(array('username' => -1)); 
```

那可行。

### 编辑

在 mongodb-user 谷歌组发帖后，我发现这不是一个错误，但是，它仍然需要注意。

# asp.net - .NET 中的 COM 组件是什么？

> ID：15908758
> 
> 赞同：1
> 
> 时间：2013-04-09T17:39:53.587
> 
> 标签：asp.net

dot net 中的 com 组件是什么？我已经阅读了几篇文章，我对它到底是什么感到困惑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:41:31.473

### [组件对象模型](http://en.wikipedia.org/wiki/Component_Object_Model)

> 组件对象模型 (COM) 是 Microsoft 于 1993 年推出的软件组件的二进制接口标准。它用于在多种编程语言中实现进程间通信和动态对象创建。COM 是其他几种 Microsoft 技术和框架的基础，包括 OLE、OLE 自动化、ActiveX、COM+、DCOM、Windows shell、DirectX 和 Windows 运行时。

# php - 如何从数据库中获取变量并编写 if 语句

> ID：15908759
> 
> 赞同：1
> 
> 时间：2013-04-09T17:39:54.240
> 
> 标签：php, database, variables, conditional, opencart

所以，我使用的是 OpenCart 1.4.9。

我想要做的是获取由定制运输产品制作的变量。

它来自的表是`product`，列是`shipping_by_product`：

![在此处输入图像描述](https://i.stack.imgur.com/u9FYx.png)

我想在浏览类别时添加一张小图片，以便他们可以看到它是免费送货的。

现在，我可以在产品详细信息（`product.tpl`模板）中添加它： ![在此处输入图像描述](https://i.stack.imgur.com/KIKEK.png)

使用此代码：

```
<?php if($product_info['shipping_by_product'] == '0.0000'){ ?> 
<img src="LINK HERE" alt="Recommended by MADNESS">
<br />
<?php
} 
?> 
```

`category.tpl`但是该代码在（类别模板）中不起作用

我得到一个未定义的索引错误 for`$product_info`和 for `shipping_by_product`。

所以我想只运行一个查询来从数据库中获取信息，然后添加条件，或者我可以用其他什么方式来做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:44:32.563

数据由控制器传递给模板，控制器从模型（数据层）获取数据。如果尚未通过，您可能必须自定义控制器和模型以获取该数据。您可以使用[vqmod](http://ocextensions.ritey.com/how-to-install-vqmod)扩展添加您自己的代码，而无需更改核心代码。[在此处](http://code.google.com/p/vqmod/)查找有关扩展的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:26:39.230

弄清楚了。

添加：'shipping_by_product' => $result['shipping_by_product']，到 category.php

据我了解，$result 与此文件中的 $product_info 几乎相同。

然后我将它用于我的代码：

```
<?php if($products[$j]['shipping_by_product'] == '0.0000'){ ?> <img style="position: absolute;margin-left: -100px;" src="IMAGE " alt="Free Continental US shipping!"> <br /> <?php } ?> 
```

:)

# css - 2 100% 宽度的 div，不使用 Top 清除：

> ID：15908767
> 
> 赞同：0
> 
> 时间：2013-04-09T17:40:19.673
> 
> 标签：css, html

我遇到了一个问题。

我知道这可能是一个菜鸟错误，但请耐心等待。

我在顶部制作了两个顶部栏菜单，我可以使用绝对定位和顶部放置它们，但是当浏览器大小发生变化时，它会使顶部栏看起来一团糟。

有没有办法在不使用绝对位置和顶部的情况下放置这些？

这就是我目前拥有的：
HTML

```
<div id="nav">
<div class="logo"><h1>Health Numeric ©</h1>Live a Something Life</div>
<div style="display:inline-block">
<ul>
    <li><a href="#"><img class="icons" src="img/icons/dashboard.png" />Dashboard</a></li>
    <li><a href="#"><img class="icons" src="img/icons/patient.png" />Patients</a></li>
    <li><a href="#"><img class="icons" src="img/icons/devices.png" />Devices</a></li>
    <li><a href="#"><img class="icons" src="img/icons/account.png" />Account</a></li>
    <li><a href="#"><img class="icons" src="img/icons/support.png" />Support</a></li>
</ul>
</div>
<div class="end"><strong>LifeView</strong> Portal</div>
</div>
<div id="subnav">
<span class="clientname">Patient: Brian Town</span>
</div>

<div id="bod">
<h1> test</h1>
</div> 
```

CSS

```
#nav h1 {
font: Verdana, Geneva, sans-serif;
font-size: 24px;
margin-bottom: 2px;
}
.logo {
width: 190px;
margin:  auto 80px auto 50px;
display: inline-block;
vertical-align: top;
}
#nav {
position: fixed;
/*height: 65px;*/
width: 100%;
float: left;
left: 0px;
top: 0px;
margin: 0px;
padding: 0px;
color: #FFFFFF;
/* IE10 Consumer Preview */ 
background-image: -ms-linear-gradient(top, #0389FF 0%, #000000 100%);
/* Mozilla Firefox */ 
background-image: -moz-linear-gradient(top, #0389FF 0%, #000000 100%);
/* Opera */ 
background-image: -o-linear-gradient(top, #0389FF 0%, #000000 100%);
/* Webkit (Safari/Chrome 10) */ 
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #0389FF), color-stop(1, #000000));
/* Webkit (Chrome 11+) */ 
background-image: -webkit-linear-gradient(top, #0389FF 0%, #000000 100%);
/* W3C Markup, IE10 Release Preview */ 
background-image: linear-gradient(to bottom, #0389FF 0%, #000000 100%);
}
#nav ul {
list-style: none;
width: 450px;
margin: 0 auto;
padding: 0; 
}
#nav li {
float: left; 
}
#nav li a {
display: inline-block;
padding: 8px 15px;
text-decoration: none;
font-weight: bold;
color: #FFF;
border-right: 1px solid #ccc;   
}
#nav li:first-child a {
border-left: 1px solid #ccc; 
}
#nav li a:hover {
color: #23afff;
}
.end {
width: 200px;
margin: 10px auto auto 50px;
display: inline-block;
word-spacing: 20px;
vertical-align: top;
}
strong {
font: Verdana, Geneva, sans-serif;
font-size: 36px;
margin-bottom: 2px;
}
.icons {
display: block;
margin-left: auto;
margin-right: auto;
margin-bottom: 1px;
height: 35px;
width: 35px;
}
#subnav {
position: fixed;
overflow:hidden;
height: 20px;
width: 100%;
float: left;
left: 0px;
/*top: 65px;*/
margin: 0px;
padding: 0px;
border: 1px solid #333;
border-bottom: 1px solid #ccc;
color: #000000;
/* IE10 Consumer Preview */ 
background-image: -ms-linear-gradient(top, #666666 0%, #FFFFFF 100%);
/* Mozilla Firefox */ 
background-image: -moz-linear-gradient(top, #666666 0%, #FFFFFF 100%);
/* Opera */ 
background-image: -o-linear-gradient(top, #666666 0%, #FFFFFF 100%);
/* Webkit (Safari/Chrome 10) */ 
background-image: -webkit-gradient(linear, left top, left bottom, color-stop(0, #666666), color-stop(1, #FFFFFF));
/* Webkit (Chrome 11+) */ 
background-image: -webkit-linear-gradient(top, #666666 0%, #FFFFFF 100%);
/* W3C Markup, IE10 Release Preview */ 
background-image: linear-gradient(to bottom, #666666 0%, #FFFFFF 100%);
}
.clientname {
float: right;
margin-right: 120px;
color: #000000;
font-weight: bold;
}
#bod {
position: absolute;
width: 100%;
float: left;
left: 0px;
top: 85px;
margin: 0px;
padding: 0px;
color: #000000;
} 
```

这是一个 JSfiddle：http: [//jsfiddle.net/Artsen/HYZLR/](http://jsfiddle.net/Artsen/HYZLR/)

谢谢

# java - javap 和泛型的类型擦除

> ID：15908771
> 
> 赞同：8
> 
> 时间：2013-04-09T17:40:32.260
> 
> 标签：java, generics, type-erasure, javap

我正在阅读 Herbert Schilds 关于 Java 泛型中的类型擦除。假设在一个类上运行 javap 应该在类型擦除后给我关于公共、包保护和受保护字段和方法的字节码信息。但是，我写了以下课程：

```
 class Ambiguity<T, V extends String>{
    T ob1;
    V ob2;

    void set(T o){
        ob1 = o;
    }

    void set(V o){
        ob2 = o;
    }
} 
```

并在生成的类文件上运行 javap 并得到以下输出

编译自“Test.java”

```
class Ambiguity<T, V extends java.lang.String> {
  T ob1;
  V ob2;
  Ambiguity();
  void set(T);
  void set(V);
} 
```

根据我阅读的内容，我期待一个看起来像这样的输出。

```
Compiled from "Test.java"
class Ambiguity<java.lang.Object, java.lang.String> {
  java.lang.Object ob1;
  java.lang.String ob2;
  Ambiguity();
  void set(java.lang.Object);
  void set(java.lang.String);
} 
```

我在这里错过了什么吗？我应该补充一点，我理解以上述方式重载方法不是一个好习惯。我只是对在这种模棱两可的情况下看到 javap 的结果感兴趣。

**编辑：**这似乎是 javap 中新修复的结果。 [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4870651](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4870651)

如果我从 JDK 1.6 运行 javap，我会得到预期的结果。如果我从最初使用的 JDK 1.7 b30 运行 javap，我会得到带有通用信息的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-09T15:11:37.720

我不确定。但似乎`signature`属性是在 jvm 7 中引入的[（请参阅 jvm 规范）](https://docs.oracle.com/javase/specs/jvms/se7/html/jvms-4.html#jvms-4.3.4)。

此属性将捕获用于调试和反射 api 的签名信息。

查看`signature`属性使用`javap -v <class>`

# android - 找不到使用 android:onclick 的方法

> ID：15908774
> 
> 赞同：2
> 
> 时间：2013-04-09T17:40:39.877
> 
> 标签：android, xml, methods, onclick

我在列表视图中有一个带有图像按钮的 ListFragment。在 imageButton XML 中，我有 android:onclick，并且在 Main.java 中有正确格式化的方法，但我仍然收到找不到该方法的错误。有任何想法吗？

XML：

```
<ImageButton
    android:id="@+id/delete_img"
    android:layout_width="wrap_content"
    android:layout_height="fill_parent"
    android:layout_alignParentRight="true"
    android:onClick="myFunction"
    android:paddingRight="10dip"
    android:paddingTop="3dip"
    android:src="@drawable/delete_icon" /> 
```

我的活动：

```
public class Main extends Activity {
    public static Context appContext;
    private CommentsDataSource datasource;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        datasource = new CommentsDataSource(this);
        datasource.open();

        // returnNotes();

        List<Comment> values = datasource.getAllComments(); // unnecessary?
        ArrayAdapter<Comment> adapter = new ArrayAdapter<Comment>(this,
            android.R.layout.simple_list_item_1, values);
        // setListAdapter(adapter); this must be imported to listFragment
        // notesfragment

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        appContext = getApplicationContext();

        // ActionBar
        ActionBar actionbar = getActionBar();
        actionbar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        ActionBar.Tab NotesTab = actionbar.newTab().setText("Notes");
        ActionBar.Tab FoldersTab = actionbar.newTab().setText("Folders");
        ActionBar.Tab OptionsTab = actionbar.newTab().setText("Options");

        Fragment NotesTest = new NotesFragment();
        Fragment FoldersFragment = new FoldersFragment();
        Fragment OptionsFragment = new OptionsFragment();

        NotesTab.setTabListener(new MyTabsListener(NotesTest));
        FoldersTab.setTabListener(new MyTabsListener(FoldersFragment));
        OptionsTab.setTabListener(new MyTabsListener(OptionsFragment));

        actionbar.addTab(NotesTab);
        actionbar.addTab(FoldersTab);
        actionbar.addTab(OptionsTab);

    }

    public List<Comment> returnNotes() {
        datasource = new CommentsDataSource(this);
        datasource.open();
        List<Comment> theNotes = datasource.getAllComments();
        return theNotes;
    }

    // Constructs the options menu with tabs
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    protected void onDestroy() {
        datasource.close();
        super.onDestroy();
    }

    // Tab event listener
    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        switch (item.getItemId()) {
        case R.id.new_note:
            Intent intentnote = new Intent(this, NewNote.class);
            startActivity(intentnote);
            return true;
        case R.id.new_folder:
            Intent intentfolder = new Intent(this, NewFolder.class);
            startActivity(intentfolder);
            return true;
        }
        return false;
    }

    @Override
    protected void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("tab", getActionBar().getSelectedNavigationIndex());
    }
} 
```

我的标签监听器：

```
class MyTabsListener implements ActionBar.TabListener {
    public Fragment fragment;

    public MyTabsListener(Fragment fragment) {
        this.fragment = fragment;
    }

    @Override
    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // do something on tab reselected?
    }

    @Override
    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        ft.replace(R.id.fragment_container, fragment);
    }

    @Override
    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        ft.remove(fragment);
    }

    public void myFunction(View v) {
        Log.d("uniNote", "hello world");
    }
} 
```

日志输出：

> 04-09 17:36:28.080: E/AndroidRuntime(536): 致命异常: main
> 04-09 17:36:28.080: E/AndroidRuntime(536): java.lang.IllegalStateException: 找不到方法 myFunction(View ) 在活动类 com.finalProject.uniNote.Main 中，用于视图类 android.widget.ImageButton 上的 onClick 处理程序，id 为“delete_img”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:49:43.653

假设您的按钮在您的内部，`R.layout.main`您需要在`onClick`类中实例化该布局的方法，在本例中是您的`Main`类：

```
public class Main extends Activity {
    public static Context appContext;
    private CommentsDataSource datasource;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        datasource = new CommentsDataSource(this);
        datasource.open();
        List<Comment> values = datasource.getAllComments(); // unnecessary?
        ArrayAdapter<Comment> adapter = new ArrayAdapter<Comment>(this,
                android.R.layout.simple_list_item_1, values);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        // etc 
    }

    // Inside Main class - outside of onCreate
    public void myFunction(View v) {
        Log.d("uniNote", "hello world");
    }

} 
```

# windows-8 - 修改清单文件会删除 Windows 8 Metro 应用程序中的 indexdb

> ID：15908775
> 
> 赞同：1
> 
> 时间：2013-04-09T17:40:40.033
> 
> 标签：windows-8, winjs, indexeddb

我的应用程序（Windows 8 Metro，使用 javascript）使用 indexDb 作为数据库，我在修改清单文件时看到 indexDB 数据库被删除。

这是一个错误还是一个功能？？

现在我的应用程序已经在 Windows 商店中，我担心如果我要修改清单文件（我想做），用户数据库将被删除，这对用户来说将是一个巨大的损失。

那么解决这个问题的方法是什么。

你可以试试他们的官方demo，你会发现同样的问题 [http://code.msdn.microsoft.com/windowsapps/IndexedDB-sample-eb1e95af](http://code.msdn.microsoft.com/windowsapps/IndexedDB-sample-eb1e95af)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:54:14.307

这不是错误 - 当您使用 Visual Studio 修改清单和部署应用程序时，本地数据会被清除。对于 JS、C++ 和 C# 项目，这种行为是相同的。

当您的用户通过商店更新应用程序时，他们不会发生这种情况。

# android - 诊断不常见的 android 冷重启

> ID：15908777
> 
> 赞同：0
> 
> 时间：2013-04-09T17:40:44.673
> 
> 标签：android

我正在编写一个导致我的手机重启的 android 应用程序。

以前也有人问过类似的问题，但我希望根据我的具体情况得到一些关于如何诊断问题的建议，如下所示。

*一些上下文：* 应用程序使用在后台运行的服务，定期从服务器下载 JSON 数据。根据这些数据，它在 AlarmManager 的警报和 LocationManager 的接近警报中设置 PendingIntent。pendingIntent 使用 webview 组件实例化一个活动，该组件基于该 JSON 文本呈现一个界面。

关于重启：*

*   当手机通过 USB 电缆连接到电脑时，永远不会重新启动。
*   重新启动非常稀缺。它们可能每天发生一次，有时甚至更远。它们似乎也是不可预测的。因此，即使通过 wifi 等待调试日志`adb`似乎也无济于事。
*   重新启动后立即感觉手机时，我的印象是它的背面电池所在的位置比平时特别热（但也许这只是一种印象）

对于诊断问题的任何建议将不胜感激。

# vmware - 如何在 VMware PowerCLI 中为多个目录级别使用 get-template

> ID：15908778
> 
> 赞同：0
> 
> 时间：2013-04-09T17:40:45.663
> 
> 标签：vmware, powercli

在我的 vCenter 集群中，我有以下目录结构来存储模板

```
Templates
   Project1Templates
      Linux-OS-Template
      Windows-OS-Template 
```

get-template comdlet 在编写脚本时获取 Project1Template 子文件夹中的模板名称的语法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:24:52.603

```
get-folder templates | get-folder Project1Templates | get-template -name Linux-OS-Template 
```

或者我对这个问题仍然很模糊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:51:11.407

根据 noam 的建议，这是我从 PowerCLI 社区得到的答案：

```
Get-Folder -Name Templates |
Get-Folder -Name Project1Teamplates |
Get-Template -Name Linux-OS-template 
```

归功于 RvdNieuwendijk 的答案：http: [//communities.vmware.com/message/2225618#2225618](http://communities.vmware.com/message/2225618#2225618)

# c# - C# 2012 列表对象限制

> ID：15908781
> 
> 赞同：1
> 
> 时间：2013-04-09T17:40:47.063
> 
> 标签：c#, sql-server, list, visual-studio-2012

我有一大段代码我知道可以做得更好，我只是不知道如何去做。我认为有一些方法可以帮助解决这个问题，但我不确定，所以如果这是基本编程，请原谅我。

我正在遍历一个 DataReader 以填充对象列表，但我想限制列表中的索引数量。我当前的代码如下所示：

```
while (dr.Read())
{
    temp.Add(new Object()
        {
            PropertyA = dr.GetString(0),
            ...
            ...
        });
}

if (temp.Count > 100)
{
    for (int i = 0; i <= 100; i++)
    {
        retObject.Add(new Object()
            {
                PropertyA = temp[i].PropertyA,
                ...
                ...
             });
    }

    return retObject;
}
else
{
    return temp;
} 
```

这实际上在数据集上循环了两次......因此，在这里听起来不太像新手程序员，在查询本身中不使用 TOP(###) 将结果集限制为 100 的最佳方法是什么？（我们使用存储过程，因此更改查询是不可能的）。

谢谢各位！我期待着你的回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:42:56.150

在您的第一个循环中，只需保留一个计数器：

```
int found = 0;
while (dr.Read() && found < 100)
{
    ++found;
    retObject.Add(new Object() // No need for "temp" anymore
    {
        PropertyA = dr.GetString(0),
        ...
        ...
    });
}

return retObject; 
```

# mysql - 如何处理mysql中的“太多列”

> ID：15908782
> 
> 赞同：1
> 
> 时间：2013-04-09T17:40:46.797
> 
> 标签：mysql, sql, partitioning, bigdata

我在制表符分隔的文件中有 1800 列和大约 400 万行。我正在尝试将其加载为 mysql 关系。mysql是给我 `ERROR 1117 (HY0000): Too many columns`的。我在网上查了一下，发现 MySQL 无法处理这么大的数据，有人建议将表垂直分区。

我正在寻找的是有关如何对此进行分区以及如何对分区表执行选择查询的示例。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:04:22.500

您可以拥有任意数量的表来定义单个关系。由于几个原因（性能、安全性），它也被认为是可接受的做法。

您只需要拆分 csv 文件并保持表与相同的主键链接。

要拆分 csv 文件，您可以轻松使用 cut （希望没有大小限制）：

```
cut -d"," -f1-1000 patients.csv > cols1000.csv
cut -d"," -f1001-1800 patients.csv > cols1800.csv 
```

当然，如果您愿意，您可以拆分更多。对于表格，我知道您已经知道如何导入。只需在两个表中使用 auto_increment pkey 来保持关系。

# macos - 错误 pip install psycopg2 on osx

> ID：15908783
> 
> 赞同：0
> 
> 时间：2013-04-09T17:40:49.690
> 
> 标签：macos, virtualenv, pip, psycopg2

我试图通过安装`psycopg2`在 virtualenv 中`pip install psycopg2`，并收到以下错误：[https](https://gist.github.com/pjhoberman/5347708) ://gist.github.com/pjhoberman/5347708 。

[我在这里](https://stackoverflow.com/questions/5427157/cannot-install-psycopg2-on-osx-10-6-7-with-xcode4)尝试了解决方案，但收到了同样的错误。

我在 OSX 10.7.5、Python 2.7.3、GCC 4.2.1 上。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T22:16:16.930

你没有安装 libpq

# java - 我怎样才能使这个Java方法完全通用

> ID：15908784
> 
> 赞同：0
> 
> 时间：2013-04-09T17:40:54.560
> 
> 标签：java, templates

我有一种方法可以计算包含统计数据的 Float 类型的 ArrayList 的第 95 个百分位数：

```
 public String calculatePercentile(ArrayList<Float> arrayOfStats) {
    this.statistics = (ArrayList<Float>) arrayOfStats.clone();
    int N = statistics.size();
    int integerPart =0;
    int fractionalPart =0;
    int fraction =0;
    float rank =0;
    float floatPoint =0;
    float interpolate=0;
    float interpolateFirstPart =0;
    float interpolateSecondPart =0;

      if (N == 0) {
        return Float.toString(0);
       } else {   
         Collections.sort(statistics);
         rank = (float) ((P / 100.0) * (N - 1));
            if (rank == Math.round(rank)) {
              return Float.toString(statistics.get((int) rank));               
            } else {
                String split = Float.toString(rank);
                Pattern pattern = Pattern.compile(floatRegExPattern);
                Matcher matcher = pattern.matcher(split); 
                while(matcher.find()) {
                integerPart = Integer.parseInt(matcher.group(1));
                fractionalPart = Integer.parseInt(matcher.group(3));
                }

                if (fractionalPart < 10) {
                    floatPoint = (float) (fractionalPart / 10);
                } else {
                    floatPoint = (float) fractionalPart / 100;
                }        
         fraction = integerPart + 1;
         interpolateFirstPart = statistics.get(fraction);
         interpolateSecondPart = statistics.get(integerPart);
         interpolate = interpolateFirstPart - interpolateSecondPart;
         return roundToTwoDecimalPlaces((floatPoint * interpolate) + interpolateFirstPart);
       }
      }
} 
```

我的问题是如何使这个方法通用，以便它不仅可以接受和计算 Float 类型的 ArrayLists，而且还可以执行 Integers 等。我尝试使用模板，例如

```
ArrayList<? as Number> 
```

但是当我到达 Collections.sort 时，它会抱怨，我不知道出了什么问题。返回值必须是字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:44:25.147

您可以使用

```
public <T extends Number> String calculatePercentile(ArrayList<T> arrayOfStats) { 
```

然后用于`Number.floatValue`将每个统计信息检索为`float`. 您可能必须使用它来编写自己的比较器来进行排序。比较器可能如下所示：

```
Comparator<Number> c = new Comparator<Number>() {
    public int compare(Number a, Number b) {
        return Float.compare(a.floatValue(), b.floatValue());
    }
} 
```

顺便说一句，分配给的更好方法`statistics`是：

```
this.statistics = new ArrayList<Number>(arrayOfStats); 
```

您不需要克隆和投射。

# jquery - jquery.tools / jquery.min 冲突

> ID：15908788
> 
> 赞同：0
> 
> 时间：2013-04-09T17:41:03.173
> 
> 标签：jquery

我正在尝试安装两个 jquery 插件，一个需要

```
 <script src="http://cdn.jquerytools.org/1.2.7/full/jquery.tools.min.js"></script> 
```

另一个需要

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script> 
```

但这会引发冲突，使其中一个失效（显然是第二个）

有没有办法解决这个问题？

谢谢你们 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:00:35.500

包括 jQuery，然后是不带 jQuery 的 jQuery 工具。

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="http://cdn.jquerytools.org/1.2.7/all/jquery.tools.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:06:29.063

按照 Kevin B;s 的建议，我去了[jQuerytools](http://jquerytools.org/download/)并重新下载了**不**包含 jQuery 的 jQuery Tools。

现在一切都像魅力一样

# c++ - 用于 Windows 和 Linux 的 C++ 中 64 位整数的跨平台定义

> ID：15908789
> 
> 赞同：10
> 
> 时间：2013-04-09T17:41:03.733
> 
> 标签：c++, cross-platform, mingw, long-integer, int64

我正在尝试用 C++ 为 Windows（MinGW）和 Linux（g++）编写跨平台代码。我习惯在 Linux 中将 64 位整数定义为“long”，但是当我转到 MinGW 时，sizeof(long) 返回 4 个字节。然后我发现我可以在 MinGW 中使用“long long”或“__INT64”来定义 64 位整数。我有两个问题：

**1.-为 Windows 和 Linux 定义 64 位整数的最便携方式是什么？**我目前正在使用#ifdef，但我不知道这是否是最好的方法：

```
#ifdef LINUX
    #define INT64 long 
#elif WIN32
    #define INT64 long long
#endif 
```

2.-**我应该在 MinGW 中使用“long long”还是“__INT64”？为什么？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-09T17:43:18.677

您可以使用`int64_t`在标头中定义的类型`cstdint`。这是 C++11 的标准。

请注意，如果您使用的平台不支持 64 位整数，则此类型可能不存在。

至于`long long`，那是另一种可能。`long long`s 至少为 64 位宽。请注意，它也是 C++11 的标准，尽管在使用 C++03 时它可以在多个编译器上工作。

正如 Pete Becker 所说，您可以使用`int_least64_t`. 如果您不介意完全使用 64 位整数，但使用*至少*64 位宽的某些整数类型，这是一个不错的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T20:37:28.367

我相信如何获得 64 位整数的问题已得到充分回答，但我将尝试第二个问题，无论是使用“long long”还是“__INT64”。你需要首先回答的问题就是你需要的。如果出于某种原因您需要正好 64 位，请务必使用能够准确提供 64 位的东西，即 int64_t。即使您的平台/编译器没有 stdint.h，也请将您的 typedef 创建为合适的类型作为解决方法（#ifdef'd 用于编译器），因为它使您的代码更具自我记录性。另一方面，如果您正在处理例如大内存段（例如 DVD 映像）中的偏移量，请使用 size_t 或 ssize_t，因为它们通常与指针大小相同，这也是自记录的。同样，文件中的偏移量最好使用 fpos_t 表示。

顺便说一句：“long”在 Linux 中是 64 位的假设是错误的。特别是在 32 位变体上，它*不是*64 位，我也不确定是否真的所有 64 位变体都使用 64 位长整数。这些不同的系统称为 ILP32、LP64 和 LLP64。在网络上搜索这些术语！

# windows - 使用 windbg 监控内存泄漏

> ID：15908791
> 
> 赞同：0
> 
> 时间：2013-04-09T17:41:08.113
> 
> 标签：windows, debugging, windbg

使用 WinDbg 监控内存泄漏？我正在寻找一种方法来使用 !htrace (!htrace enable --> !htrace -snapshot --> !htrace -diff) 来确定我们遇到的 MEM 泄漏。我目前可以获得持有资源的线程堆栈，但我无法获得足够深的堆栈跟踪（我希望在每个堆栈上看到更多帧。我只看到堆栈中对我来说不太感兴趣的部分）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:55:35.160

默认情况下 20 是堆栈帧限制，您可以更改：

```
.kframes 0n100 
```

这将限制设置为 100（`0n`表示数字是基于十进制的，否则它将假定您传递的是十六进制值）更多信息[在这里](http://msdn.microsoft.com/en-gb/library/windows/hardware/ff563850%28v=vs.85%29.aspx)。

# wpf - 从代码后面到 xaml 的类数组

> ID：15908795
> 
> 赞同：0
> 
> 时间：2013-04-09T17:41:15.173
> 
> 标签：wpf, arrays, xaml, code-behind

我想在 app.xaml.cs 中定义的类数组的 xaml 数据中显示。

这是我所做的。

保存数据的类。个人.cs

```
public class Person : INotifyPropertyChanged
{
    #region Constructors and Destructors

    public Person(int id, string name)
    {
        this.Name = name;
        this.Id = id;
    }

    #endregion

    #region Public Events

    public event PropertyChangedEventHandler PropertyChanged;

    #endregion

    #region Public Properties

    public int Id { get; set; }

    public string Name { get; set; }

    #endregion

    #region Methods

    [NotifyPropertyChangedInvocator]
    protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        PropertyChangedEventHandler handler = this.PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion
} 
```

像这样在 App.xaml.cs 中声明了 Person。

```
public partial class App : Application
{
    public static Person[] People =
        {
            new Person(1, "John"),
            new Person(2, "Jake"),
            new Person(3, "James"),
            new Person(4, "Jack")
        };
} 
```

我想在 xaml 中显示数据。我似乎无法弄清楚该怎么做。

```
<StackPanel>
    <StackPanel Orientation="Horizontal">
        <TextBox Height="23" TextWrapping="Wrap" Text="id"/>
        <TextBox Height="23" TextWrapping="Wrap" Text="name"/>
    </StackPanel>
    <StackPanel Orientation="Horizontal">
        <TextBox Height="23" TextWrapping="Wrap" Text="id"/>
        <TextBox Height="23" TextWrapping="Wrap" Text="name"/>
    </StackPanel>
    <StackPanel Orientation="Horizontal">
        <TextBox Height="23" TextWrapping="Wrap" Text="id"/>
        <TextBox Height="23" TextWrapping="Wrap" Text="name"/>
    </StackPanel>
    <StackPanel Orientation="Horizontal">
        <TextBox Height="23" TextWrapping="Wrap" Text="id"/>
        <TextBox Height="23" TextWrapping="Wrap" Text="name"/>
    </StackPanel>
</StackPanel> 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:45:27.310

您应该使用集合控件，例如 an`ItemsControl`并将其绑定`ItemsSource`到您的静态属性：

```
<ItemsControl ItemsSource="{Binding ...}">
   <ItemTemplate>
      <DataTemplate>
         <StackPanel Orientation="Horizontal">
            <TextBox Height="23" TextWrapping="Wrap" Text="{Binding Id}" />
            <TextBox Height="23" TextWrapping="Wrap" Text="{Binding Name}" />
         </StackPanel>
      </DataTemplate>
   </ItemTemplate>
</ItemsControl> 
```

您不应该使用静态属性，而是将服务注入您的视图模型（充当此视图的数据上下文），并确保此服务是单例的。

您还需要`PropertyChanged`在属性的设置器中调用事件，`Person`以便通知 UI。

如果您想坚持使用静态属性，请查看[此处](https://stackoverflow.com/questions/936304/binding-to-static-property)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:07:46.990

通常使用它的一个`ItemsControl`或一个子类是要走的路。如果您希望 xaml 与原始帖子中输入的完全一样，这将是这样做的方法：

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:a="clr-namespace:WpfApplication1"
    Title="MainWindow" Height="350" Width="525">
  <StackPanel DataContext="{x:Static a:App.People}">
    <StackPanel Orientation="Horizontal">
      <TextBox Height="23" TextWrapping="Wrap" Text="{Binding [0].Id}"/>
      <TextBox Height="23" TextWrapping="Wrap" Text="{Binding [0].Name}"/>
    </StackPanel>
    <StackPanel Orientation="Horizontal">
      <TextBox Height="23" TextWrapping="Wrap" Text="{Binding [1].Id}"/>
      <TextBox Height="23" TextWrapping="Wrap" Text="{Binding [1].Name}"/>
    </StackPanel>
    <StackPanel Orientation="Horizontal">
      <TextBox Height="23" TextWrapping="Wrap" Text="{Binding [2].Id}"/>
      <TextBox Height="23" TextWrapping="Wrap" Text="{Binding [2].Name}"/>
    </StackPanel>
    <StackPanel Orientation="Horizontal">
      <TextBox Height="23" TextWrapping="Wrap" Text="{Binding [3].Id}"/>
      <TextBox Height="23" TextWrapping="Wrap" Text="{Binding [3].Name}"/>
    </StackPanel>
  </StackPanel>
</Window> 
```

有关 xaml 中属性路径的更多信息，请查看此处：http: [//msdn.microsoft.com/en-us/library/ms742451](http://msdn.microsoft.com/en-us/library/ms742451(v=vs.110).aspx) (v=vs.110).aspx 。

# data-mining - 韦卡先验法

> ID：15908797
> 
> 赞同：2
> 
> 时间：2013-04-09T17:41:25.120
> 
> 标签：data-mining, weka

在 weka 中，我的主要目标是在 0.004 支持阈值下找到所有可能的频繁项集。但是，在 weka，我还没有看到任何写支持阈值的专栏。它需要一些参数，例如 -n -t -c -d 。要使用支持阈值运行 appriori，应该编写什么参数或者我如何使用支持阈值运行 weka apriori？

注意：这是我的第一个问题，可能有错误的部分，请说

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T02:22:28.720

以下命令将为您提供所有命令行参数：

```
java -cp weka.jar weka.associations.Apriori -h 
```

你在找什么：

```
-M <lower bound for minimum support>
The lower bound for the minimum support. (default = 0.1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-19T06:51:15.653

Weka 的 Apriori 挖掘关联规则与 min。支持等于最小支持的上限和给定的最小置信度。如果它至少获得所需数量的规则，则输出该规则并停止。如果它获得的规则数量少于要求的数量，它会减少最小值。Delta的支持。它重复这个过程，直到它获得足够的规则或最小值。支持达到最小支持的给定下限。（来源：[http](http://web.cs.wpi.edu/~cs4445/b12/Exams/solutions_cs4445_b12_exam2.pdf) ://web.cs.wpi.edu/~cs4445/b12/Exams/solutions_cs4445_b12_exam2.pdf ）

# sharepoint-2010 - 如何为在 Visual Studio 中开发的列表定义指定自定义 XSL？

> ID：15908798
> 
> 赞同：1
> 
> 时间：2013-04-09T17:41:30.170
> 
> 标签：sharepoint-2010, contenttype, list-definition

我正在尝试将 AllItems.aspx 页面上的超链接更改为指向名为 CustomUpload.aspx 的文档库的自定义上传页面。

假设我有两个文档库（列表）。一个称为**vsList**，在 Visual Studio 中创建并作为 SharePoint 解决方案的一部分部署，另一个称为**sdList**，从浏览器创建通常的方式。

这是我迄今为止能够成功完成的事情：

1.  在基于 Web 的编辑器中编辑**sdList**的 AllItems.aspx 页面。通过将其工具栏类型设置为“摘要”来自定义包含“添加新项目”超链接的 XsltListViewWebPart。然后，使用 SharePoint Designer (SPD)，我在设计器视图中单击“添加新项目”超链接，然后出现向右的小箭头，允许我编辑超链接选项（即，将值设置为我自己的自定义 URL）。
2.  将上面的 XSL 代码复制并粘贴到**vsList**文档库的 AllItems.aspx 文件中，并确保 url 的路径是正确的，因为 SharePoint 永远找不到任何东西，因为映射目录和虚拟目录“是“共享点。

选项 #1 不是真正的解决方案，因为它仅适用于通过 SP 门户中基于 Web 的 GUI 编辑器直接创建的文档库。我需要在我在 VS 中创建的列表定义中定义所有这些。至于选项＃2，问题几乎相同。如果我将自定义 XSL 复制并粘贴到 AllItems.aspx 页面中，那么每次我重新部署包含自定义列表定义的 VS 解决方案时，它将被覆盖。所以我真的需要一个解决方案，允许我在我的 VS 列表定义中定义自定义 URL。

这是应该工作的 - 但不是：

1.  创建一个自定义 Xsl 文件，其中包含覆盖默认“添加新项目”链接所需的所有调整。使用 Site Action => Edit Page => Edit Web Part => Miscellaneous => XSL Link 编辑**sdList**文档库的 AllItems.aspx 页面中 XsltListViewWebPart 的 XslLink 属性。
2.  编辑列表定义的 Elements.xml 文件，添加必要的 Module 和 File XML 标记以指向将覆盖“Add new item” URL 的自定义 XSL 文件。无论我做什么，当我添加标签时它都不会部署，因为它只是找不到自定义 XSL 文件。

我已经尝试将文件放在 100 个不同的位置，并且它一直试图在“Features[MY PROJECT NAME]_PrimaryFeature\CustomStyle.xsl”中查找它。它从哪里得到我将文件存储在该路径/位置的想法？即使我尝试将 XSL 文件存储在 SharePoint 映射的 LAYOUTS/XSL 目录或实际 SharePoint 网站的样式库文档库中，它仍然找不到它。这简直令人抓狂。路径、位置、目录结构和 XSL 已成为我尝试在 SharePoint 中完成任何事情的最大障碍。

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T15:06:14.317

所以这就是我最终做的......

我在最初的尝试中基本上执行了上面的步骤 1 和 2，并将整个站点模板导出到我工作站上的本地文件中。然后，我在 Visual Studio 中创建了一个新的 SharePoint 项目/解决方案（以免弄乱我现有的项目），选择从现有网站模板导入数据并仅选择**sdList**以导入我的新解决方案。

导入过程完成后，我可以查看为 AllItem.aspx 生成的源代码（其中包含我使用 SPD 手动更新的 XSL 代码），然后将该代码复制到 Schema.xml 文件中**vsList**在我现有的 SharePoint 解决方案中。

在 Schema.xml 文件的 View 部分中，我在 BaseViewID #1 的标记之后添加了标记（即 AllItems.aspx 视图）并将代码粘贴在那里。

在理想情况下，我宁愿将所有 Xsl 代码转储到外部文件中，然后只使用标签，但我无法让它工作。由于某种原因，SharePoint 无法找到该文件。这是我对 SharePoint 的不满之一（如我原来的帖子中所述）：文件夹映射和文件位置。不必要的混乱。

对于那些感兴趣的人，这里是自定义 Xsl 的样子。查找带有“CustomUpload.aspx”的行以及紧接在它之前和之后的行。不幸的是，我无法在此编辑器中加粗或突出显示代码部分，因此您必须自己进行一些调查。

```
 <Xsl>
          <![CDATA[
              <xsl:stylesheet xmlns:x="http://www.w3.org/2001/XMLSchema" xmlns:d="http://schemas.microsoft.com/sharepoint/dsp" version="1.0" exclude-result-prefixes="xsl msxsl ddwrt" xmlns:ddwrt="http://schemas.microsoft.com/WebParts/v2/DataView/runtime" xmlns:asp="http://schemas.microsoft.com/ASPNET/20" xmlns:__designer="http://schemas.microsoft.com/WebParts/v2/DataView/designer" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:SharePoint="Microsoft.SharePoint.WebControls" xmlns:ddwrt2="urn:frontpage:internal" xmlns:o="urn:schemas-microsoft-com:office:office"> 
  <xsl:include href="/_layouts/xsl/main.xsl"/> 
  <xsl:include href="/_layouts/xsl/internal.xsl"/> 
            <xsl:param name="AllRows" select="/dsQueryResponse/Rows/Row[$EntityName = '' or (position() &gt;= $FirstRow and position() &lt;= $LastRow)]"/>
            <xsl:param name="dvt_apos">&apos;</xsl:param>
            <xsl:template name="Freeform" ddwrt:ghost="" xmlns:ddwrt2="urn:frontpage:internal">
                <xsl:param name="AddNewText"/>
                <xsl:param name="ID"/>
                <xsl:variable name="Url">
                    <xsl:choose>
                        <xsl:when test="List/@TemplateType='119'"><xsl:value-of select="$HttpVDir"/>/_layouts/CreateWebPage.aspx?List=<xsl:value-of select="$List"/>&amp;RootFolder=<xsl:value-of select="$XmlDefinition/List/@RootFolder"/></xsl:when>
                        <xsl:when test="$IsDocLib"><xsl:value-of select="$HttpVDir"/>/_layouts/Upload.aspx?List=<xsl:value-of select="$List"/>&amp;RootFolder=<xsl:value-of select="$XmlDefinition/List/@RootFolder"/></xsl:when>
                        <xsl:otherwise><xsl:value-of select="$ENCODED_FORM_NEW"/></xsl:otherwise>
                    </xsl:choose>
    </xsl:variable>
                <xsl:variable name="HeroStyle">
                    <xsl:choose>
                        <xsl:when test="Toolbar[@Type='Standard']">display:none</xsl:when>
                        <xsl:otherwise></xsl:otherwise>
                    </xsl:choose>
    </xsl:variable>
                <xsl:if test="$ListRight_AddListItems = '1' and (not($InlineEdit) or $IsDocLib)">
      <table id="Hero-{$WPQ}" width="100%" cellpadding="0" cellspacing="0" border="0" style="{$HeroStyle}">
        <tr>
          <td colspan="2" class="ms-partline">
            <img src="/_layouts/images/blank.gif" width="1" height="1" alt="" />
          </td>          
        </tr>
        <tr>
          <td class="ms-addnew" style="padding-bottom: 3px">
          <span style="height:10px;width:10px;position:relative;display:inline-block;overflow:hidden;" class="s4-clust"><img src="/_layouts/images/fgimg.png" alt="" style="left:-0px !important;top:-128px !important;position:absolute;"  /></span>
            <xsl:text disable-output-escaping="yes" ddwrt:nbsp-preserve="yes">&amp;nbsp;</xsl:text>
            <xsl:choose>
                <xsl:when test="List/@TemplateType = '115'">
              <a class="ms-addnew" id="{$ID}-{$WPQ}"
                 href="{$Url}"
                 onclick="javascript:NewItem2(event, &quot;{$Url}&quot;);javascript:return false;"
                 target="_self">
                <xsl:value-of select="$AddNewText" />
              </a>
            </xsl:when>
                <xsl:otherwise>
                       <xsl:variable name="CustomUrl">
                          ../../../_layouts/MyControls/CustomUpload.aspx?List=<xsl:value-of select="$List"/>
                       </xsl:variable>
                       <a href="{$CustomUrl}"><xsl:value-of select="$AddNewText" /></a>
                    </xsl:otherwise>
            </xsl:choose>
          </td>
        </tr>
        <tr>
          <td>
            <img src="/_layouts/images/blank.gif" width="1" height="5" alt="" />
          </td>
        </tr>
      </table>
                    <xsl:choose>
                        <xsl:when test="Toolbar[@Type='Standard']">
          <script type='text/javascript'>
            if (typeof(heroButtonWebPart<xsl:value-of select="$WPQ"/>) != &quot;undefined&quot;)
            {
                <xsl:value-of select="concat('  var eleHero = document.getElementById(&quot;Hero-', $WPQ, '&quot;);')"/>
                if (eleHero != null)
                    eleHero.style.display = &quot;&quot;;
            }
          </script>
        </xsl:when>
                        <xsl:otherwise>
        </xsl:otherwise>
                    </xsl:choose>
                    <xsl:if test="List/@TemplateType = '115'">
          <script type='text/javascript'>
            if (typeof(DefaultNewButtonWebPart<xsl:value-of select="$WPQ"/>) != &quot;undefined&quot;)
            {
                <xsl:value-of select="concat('  var eleLink = document.getElementById(&quot;', $ID, '-', $WPQ, '&quot;);')"/>
                if (eleLink != null)
                {
                    DefaultNewButtonWebPart<xsl:value-of select="$WPQ"/>(eleLink);
                }
            }
          </script>
      </xsl:if>
    </xsl:if>
  </xsl:template></xsl:stylesheet>
              ]]>
        </Xsl> 
```

无论如何，我希望这可以帮助某人。

# jenkins - 如何部署和运行 Play！2.1 通过 Jenkins 到 EC2

> ID：15908801
> 
> 赞同：0
> 
> 时间：2013-04-09T17:41:36.197
> 
> 标签：jenkins, continuous-integration, playframework-2.0, continuous-deployment

我已经为我的 Play 设置了 Jenkins！2.1

我已经设置了构建和部署作业，它们运行良好。但我似乎无法弄清楚如何部署和运行 Play！从詹金斯到 EC2。

例如，我使用此命令`play dist`将所有内容打包到 Build 作业中的 zip 文件中，并将工件复制到 Deploy 作业中。然后使用`scp`通过 Publish-Over-SSH 插件上传到 EC2，效果很好。现在，如果我想让 Jenkins 立即运行应用程序，我将解压缩文件并运行`sh start`命令。那将运行应用程序，但播放！不会发布控制台，所以詹金斯的工作永远不会完成。那么，我该如何运行 Play！2.1 并释放控制台以便 Jenkins 可以完成工作，如果有新的提交进入，我如何杀死旧应用程序？因此，该过程将继续进行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:51:05.803

使用与char`nohup`结合的命令。`&`

```
nohup ./start.sh & 
```

这应该在后台运行该进程，并且在您注销时不会终止应用程序。

**注意**：您可能需要安装`nohup`.

# git - Git 克隆不工作 - 错误 443

> ID：15908802
> 
> 赞同：9
> 
> 时间：2013-04-09T17:41:37.640
> 
> 标签：git, github

我在家工作，试图从 Github 克隆一个 repo，但出现以下错误：

```
git clone https://github.com/account/repo.git 
```

也试过

```
git clone git://github.com/account/repo.git

Error: Failed connect to github.com:443; No error while accessing https://github.com/account/repo/info/refs?service=git-upload-pac
fatal: HTTP request failed 
```

我什至尝试使用 SSH，这就是我得到的：

> ssh：连接到主机 github.com 端口 22：错误文件号致命：无法从远程存储库读取。

我只是能够在我的笔记本电脑上克隆它，所以我知道我有正确的权限，我只需要帮助试图弄清楚为什么会在我的桌面上发生这种情况，而且似乎所有其他建议似乎都不是在职的。

*   我没有使用代理。
*   我也不能对已经存在的其他存储库进行拉取。

**编辑** 好的，我运行了建议的命令，结果如下：

```
$ ssh -i ~/.ssh/id_rsa -vvv git@github.com
OpenSSH_4.6p1, OpenSSL 0.9.8e 23 Feb 2007
debug2: ssh_connect: needpriv 0
debug1: Connecting to github.com [204.232.175.90] port 22.
debug1: connect to address 204.232.175.90 port 22: Not owner
ssh: connect to host github.com port 22: Bad file number 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-13T16:57:05.297

我知道这可能是一般性的，但我决定我想得到这个答案，所以这就是我所做的，它现在可以正常工作：

*   通过 Windows 卸载了所有 git 客户端（我最初有几个用于测试）
*   [从git](http://git-scm.com/)安装基本的 git bash
*   关闭智能屏幕并确保防火墙和防御者已关闭（他们是）

又试了一次，现在可以了。我最好的猜测是某处存在错误配置 - 可能是错误的密钥（不知道自从我更新它以来这是怎么发生的）。无论如何，它正在工作。这可能是核选项，但我希望这可以帮助遇到此问题的其他人。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-06-18T16:50:37.043

我可以通过发出以下命令来解决 443 错误：

```
git config --global http.proxy <proxyname:port> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-18T07:37:02.217

通常这意味着您的网络受到代理服务器的保护。要将 git 配置为使用代理，请使用以下命令：

```
git config --global http.proxy <http[s]://userName:password@proxyaddress:port> 
```

如果代理服务器没有用户名和密码，请使用此命令

```
git config --global http.proxy <proxyaddress:port> 
```

# javascript - 在 ajax 调用中设置代理授权标头

> ID：15908805
> 
> 赞同：1
> 
> 时间：2013-04-09T17:41:50.047
> 
> 标签：javascript, ajax, jquery, http-headers

我很震惊，我在网上找不到任何关于此的信息，但是当我尝试在我的 ajax 调用的标头中发送代理授权时遇到了麻烦。如果我发送如下所示，我不会收到错误消息，但服务器在标头中看不到代理授权：

```
$.ajax({
     url:"https://myurl.com",
     beforeSend: function(xhr){xhr.setRequestHeader('Proxy-Authorization', 'Basic XXX');}
}); 
```

如果我按如下方式发送调用，我会收到一条错误消息：**拒绝设置不安全的标头“代理授权”**

```
$.ajax({
     url:"https://myurl.com",
     headers:{
         "Authorization":_this.pasToken,
         "Proxy-Authorization":'Basic xxx'
     }    
}); 
```

有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:45:33.523

我发现了这个问题，我将发布答案以防万一它对其他人有帮助。

据此[，](http://news.anarchy46.net/2012/06/refused-to-set-unsafe-header.html)**Chrome 不会让您设置 Proxy-Authorization 标**头。

# git - Windows 上的 Git：“我不处理协议 'git clone http'”

> ID：15908811
> 
> 赞同：17
> 
> 时间：2013-04-09T17:42:17.200
> 
> 标签：git, windows-7, tortoisegit

我正在尝试在 Windows 7 机器（Windows 8 Hyper V 中的虚拟机）上安装 git 和 tortoisegit。

我按照说明进行操作，但是现在当我尝试克隆某些内容时，出现错误*“我不处理协议'git clone http'”*

关于发生了什么的任何线索？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-09T17:47:40.810

您可能`git clone http://repo/url`在只需要 url 的地方输入命令，即`http://repo/url`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-30T16:10:13.657

`git clone`寻找`<options>`然后`<repo>`. 通常你可以跳过这些选项，但是对于最新版本的 Windows git bash，我必须添加一个选项`git clone https...`才能工作。

如果您不使用选项，只需使用`git clone -q https....`“安静”选项，它应该可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-09T18:14:31.737

引用网址。例如，

```
git clone "https://github.com/git/git.git" 
```

我只需要在 Windows 上使用 Git Bash（例如 MINGW64）执行此操作。如果使用 Windows `cmd.exe`shell，则不需要引号。

# javascript - 在一个 Google Maps Marker 中包含 3 张图片

> ID：15908813
> 
> 赞同：0
> 
> 时间：2013-04-09T17:42:20.913
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试使用 Google Maps API 完成此操作。我尝试了几个 javascript 插件，例如来自的组件，`google-maps-utility-library-v3`但似乎没有为此目的真正做任何事情。

基本上我想要做的是有一个阴影层，一个用户的图片层，在它上面有一层用于标记图像。我的标记图像中有一个透明的孔，所以我希望用户的脸显示在那个孔中，这就是我尝试这样做的原因。

我现在拥有的非常简单：

```
var shadow = {
    url: '/data/images/map/pin_shadow.png',
    size: new google.maps.Size(108, 95),
    anchor: new google.maps.Point(30, 47)
};

var image = {
    url: '/data/images/map/pin.png',
    size: new google.maps.Size(60, 95),
    anchor: new google.maps.Point(30, 47)
};

var marker = new google.maps.Marker({
    position: new google.maps.LatLng(venue.lat, venue.lng),
    map: map,
    icon: image,
    shadow: shadow
}); 
```

我想知道是否有人曾经这样做过？

编辑：不过，我最好喜欢客户端解决方案。谢谢

我希望我可以在阴影和图像之间添加另一个图像。任何想法？

感谢，并有一个愉快的一天！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:11:40.507

你可以尝试这样的事情：

从 PHP/.NET/JSP/... 即时创建 pin 图像

```
var image = {
    url: 'my_script.php?user=12345',
    size: new google.maps.Size(60, 95),
    anchor: new google.maps.Point(30, 47)
}; 
```

我不知道您使用哪种语言，所以这是一个脚本伪代码：

```
Set headers to print script as image
if image exists for specified user : 
    return this image;
else
    create image for user with the 3 layers
    return image
end if 
```

# android - 使用 android 相机创建色度键效果的第一步

> ID：15908814
> 
> 赞同：5
> 
> 时间：2013-04-09T17:42:21.560
> 
> 标签：android, image-processing, opengl-es, opengl-es-2.0, android-camera

我想使用 android 相机创建一个色度键效果。我不需要一步一步，但我想知道劫持android相机并应用过滤器的最佳方法。我检查了 API 并没有发现任何关于如何操作来自相机的数据的超级权威。起初我考虑使用表面纹理，但我不完全了解它如何帮助或如何使用它。然后我使用 GLSurfaceView 进行了检查，这可能是正确的方向，但不太确定。

另外，为了补充我的问题，我将如何处理图像的预览和保存？我会至少处理图像两次吗？预览时一次，保存时一次？我认为这可能是最好的解决方案。

最后，创建一个 C/++ 包装器来处理处理以优化速度是否有意义？

任何帮助都将不胜感激。一些示例的链接也将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-16T00:02:21.597

唯一真正的机会是使用 openGL ES 和片段着色器（至少需要 openGL ES 2.0）并在 GPU 上执行色度键效果。着色器本身将非常简单（谷歌）。

但要做到这一点，您需要显示带有回调的相机预览。您将必须实现[`Camera.PreviewCallback`](http://developer.android.com/reference/android/hardware/Camera.PreviewCallback.html)、为图像数据创建缓冲区并使用`setPreviewCallbackWithBuffer`方法。你可以从我对类似问题的[回答](https://stackoverflow.com/a/8372731/683905)中得到基本的想法。请注意，此自定义相机预览的性能存在重大问题，但它可能适用于支持 ES 2.0 的硬件。

要使用 openGL 显示预览，您需要扩展[`GLSurfaceView`](http://developer.android.com/reference/android/opengl/GLSurfaceView.html)并实现`GLSurfaceView.Renderer`. 然后，您将相机预览帧作为纹理绑定`glTexImage2D`到一些简单的矩形，其余部分将由着色器处理。[在这里](https://stackoverflow.com/questions/4850025/shader-for-android-opengl-es)查看如何在 ES 中使用着色器，或者如果您没有使用着色器的经验，[本教程](http://blog.shayanjaved.com/2011/03/13/shaders-android/)可能是一个好的开始。

对于另一个问题：您可以从预览中保存当前图像，但预览的分辨率低于拍摄的照片，因此您可能想要拍摄一张照片然后单独处理它（您可以使用相同的着色器） .

至于 C++，需要付出很多额外的努力才能得到有问题的输出。但如果做得好，它可以提高性能。尝试查看这篇[文章，](http://nhenze.net/?p=253)它是一个类似的主题，它描述了如何使用 NDK 处理相机预览并在 openGL 中显示。但是如果你想在 C++ 中做色度键效果，它会比着色器慢得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-15T23:26:30.063

你可以查看这个库：[https](https://github.com/cyberagent/android-gpuimage) ://github.com/cyberagent/android-gpuimage 。它提供了一个框架来使用 GL 着色器在设备的 GPU 上进行图像处理。还有一个示例展示了如何将库与相机一起使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T11:24:47.267

Google-Code 上有一个 Chroma-Key-Project：[http](http://code.google.com/p/chroma-key-project/) ://code.google.com/p/chroma-key-project/它包括一种使用 chroma-key 上传作为令牌的图片的方法：

> 在网上进行了详尽的搜索后，我没有找到任何使用 Android 设备的 Chroma-keying 的开源项目。该项目的目的是提供一个有用的>色度键库，这将使实现可以在绿色或蓝色屏幕前拍摄>图片并将图片应用到选定背景上的应用程序和游戏变得容易。>此外，该应用程序还将允许用户使用 Intent 上传图片。

# javascript - 获取并显示 jQuery GET 请求的结果

> ID：15908816
> 
> 赞同：0
> 
> 时间：2013-04-09T17:42:25.063
> 
> 标签：javascript, jquery, ajax, api, get

我正在尝试从 ESV API 检索和显示数据：http: [//www.esvapi.org/](http://www.esvapi.org/)
它适用于 codecademy.com 域，但不适用于 esvapi.org 域。
见小提琴：http: [//jsfiddle.net/BinaryAcid/yqCcn/](http://jsfiddle.net/BinaryAcid/yqCcn/)

```
<input type="button" value="get data" id="btn" >

$("#btn").click(function() {

    var response = '';
    $.ajax({ type: "GET",   
        // url: "http://www.esvapi.org/v2/rest/passageQuery?key=IP&passage=John+1",
        url: "http://www.codecademy.com/",
        async: false,
        success : function(text)
        {
         response = text;
        }
    });

    document.write(response);

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:02:51.023

我尝试了小提琴示例，但不适用于第一个或第二个 URL，问题与跨域调用有关，除非您使用 jsonp 或设置一些，否则您不能直接调用不在您自己域上的服务服务器中的标头明确允许跨域调用（此技术在 IE 中不起作用）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:33:31.073

这行得通。见jsfiddle：http: [//jsfiddle.net/BinaryAcid/qDrw8/1/](http://jsfiddle.net/BinaryAcid/qDrw8/1/)

```
<input type="button" value="get data" id="btn" >

$("#btn").click(function() {
reference='Jhon+1'
$.getJSON('http://www.esvapi.org/crossref/ref.php?reference=' + reference + '&callback=?',
    function(text){
        if(text){
            $('body').html(text.content);
        } else {
            $('body').html('Error');
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:39:32.397

使用 Yahoo 查询语言 (YQL) 的解决方案。见jsfiddle：http: [//jsfiddle.net/BinaryAcid/jbCuH/1/](http://jsfiddle.net/BinaryAcid/jbCuH/1/)

```
<input type="button" value="get data" id="btn">

$("#btn").click(function () {
var response = '';
var url = "http://www.esvapi.org/v2/rest/passageQuery?key=IP&passage=John+1";
var yql = "select content from data.headers where url='" + url + "'";
$.ajax({
    type: "GET",
    url: "http://query.yahooapis.com/v1/public/yql?q=" + encodeURIComponent(yql) + "&format=json&diagnostics=true&env=store%3A%2F%2Fdatatables.org%2Falltableswithkeys&callback=?",
    async: false,
    dataType: "json",
    success: function (data) {
        response = data.query.results.resources.content;
        document.write(response);
    }
});

}); 
```

# c# - 如何循环所有功能？

> ID：15908817
> 
> 赞同：2
> 
> 时间：2013-04-09T17:42:27.477
> 
> 标签：c#, .net, for-loop

我正在做一个项目，但我被卡住了:(....我有 9（九）个函数，名称为：getM1()、getM2()、getM3()、getM4()....getM5( ). 所有这些函数都返回一个值。

现在我需要创建一个循环来检查这些函数的值。像这样的东西：

```
public void show()
{
    for (int i = 1; i <= 9; i++)
    {
        if (obj.getM[i]() == 1)
        {
          .......;
        }
    }
} 
```

当然它向我显示了一个错误，因为 getM 不包含任何索引。我想问你，你能帮我解决这个问题吗？或者有人有其他想法我如何检查所有 getM() 函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:47:49.240

创建一个委托数组`Func<int>`并使用它来访问您的方法：

```
var functions = new Func<int>[9];
functions[0] = getM1;
functions[1] = getM2;
functions[2] = getM3;
// (...)

for (int i = 0; i <= 9; i++)
{
    if (functions[i]() == 1)
    {
        ;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:48:37.650

将函数放入数组怎么样：

```
var functionList = new [] { obj.getM1, obj.getM2, ... }; 
```

然后循环它

```
foreach (var f in functionList)
{
    if (f() == 1) 
    ...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T17:48:49.993

用这个替换方法：

```
int getM(int index) 
```

如果这个和其他建议的解决方案真的没有任何意义，你可以使用反射做你想做的事：

```
var t = obj.GetType();
for (int i = 1; i <= 9; i++)
{
    var m = t.GetMethod("getM" + i);
    int result = (int)m.Invoke(obj, null);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T17:48:58.557

制作一个数组`Func<T>`，其中`T`是函数的返回类型。然后，您将能够或多或少地按照您在代码中描述的方式调用您的函数。

例如，如果你的函数 return `int`，你可以这样做：

```
Func<int>[] ems = new Func<int>[] {
    () => obj.getM1(), () => obj.getM2(), () => obj.getM3()
,   () => obj.getM4(), () => obj.getM5(), () => obj.getM6()
,   () => obj.getM7(), () => obj.getM8(), () => obj.getM9()
};
foreach (Func<int> em in ems)
{
    if (em() == 1)
    {
      .......;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T17:46:10.563

```
public void Show()
{
   Func<int>[] arr = new[]
   {
       obj.GetM1,
       obj.GetM2,
       ...
   };
   foreach(Func<int> func in arr)
   {
       if (func() == 1)
       {
           //
       }
   }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T17:49:44.553

您可以将所有这些方法存储在一个列表中，遍历列表并执行它们。

```
var funcList = new List<Func<int>>{ getM1, getM2, ... }; 
```

然后您可以遍历列表并执行每个方法。

```
foreach(var func in funList)
{
    if(func() == 1)
        ...
} 
```

# ember.js - 在 helper 中使用 linkTo

> ID：15908825
> 
> 赞同：1
> 
> 时间：2013-04-09T17:43:02.077
> 
> 标签：ember.js, handlebars.js

我正在尝试创建一个以逗号分隔的班级教师名字列表。

所以首先我创建了一个计算属性，如：

```
App.Class = DS.Model.extend({
    title: DS.attr('string'),
    description: DS.attr('string'),
    start_date: DS.attr('date'),
    end_date: DS.attr('string'),
    teachers: DS.hasMany('App.Teacher'),
    department: DS.attr('string'),

    teacher_list: Ember.computed(function() {
        var teachers = this.get('teachers');
        var teachers_list = '';
        teachers.forEach(function (teacher) {
            teachers_list += teacher.get('first_name');
            if (teachers.indexOf(teacher) < teachers.get('length') - 1) teachers_list += ', ';
        });
        return teachers_list;
    }).property('teachers.@each.first_name')
}); 
```

在模板中，它看起来像这样：

```
...
<td>{{class.teacher_list}}</td>
... 
```

但是后来我想到了将 first_names 链接到教师自己的页面，而我在这里卡住了。我试过下面的代码，但没有运气。

应用程序.js

```
Ember.Handlebars.registerBoundHelper('teachers_list', function(teachers) {
    var teachers_list = '';
    teachers.forEach(function (teacher) {
        teachers_list += "{{#linkTo 'teacher' " + teacher.id + "}}{{teacher.first_name}}{{/linkTo}}";
        if (teachers.indexOf(teacher) < teachers.get('length') - 1) teachers_list += ', ';
    });
    return (teachers_list);
}); 
```

模板

```
...
<td>{{teachers_list class.teachers}}</td>
... 
```

输出

```
{{#linkTo 'teacher' 0}}{{teacher.first_name}}{{/linkTo}}, {{#linkTo 'teacher' 1}}{{teacher.first_name}}{{/linkTo}}, {{#linkTo 'teacher' 2}}{{teacher.first_name}}{{/linkTo}} 
```

有没有我从助手内部可以创建正确的链接？

干杯

**解决方案**

模板：

```
<td id="teacher-list">{{#each teacher in course.teachers}}<span>{{#linkTo 'teacher' teacher}}{{teacher.first_name}}{{/linkTo}}</span>{{/each}}</td> 
```

CSS：

```
#teacher-list span:not(:last-of-type)::after { content: ", "; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:11:00.947

我宁愿在模板中使用简单的`{{#each teachers}}...{{/each}}`. 或者，如果您坚持使用 Handlebars 助手，您可以这样做：[http ://www.thesoftwaresimpleton.com/blog/2013/04/07/handlebars-helper/](http://www.thesoftwaresimpleton.com/blog/2013/04/07/handlebars-helper/)

调用`linkTo`辅助函数可能会很棘手，所以作为中间立场，我建议构建一个视图：

```
App.TeachersListView = Ember.View.extend({
  teachers: null,
  template: Ember.Handlebars.compile(
    '{{#each teacher in view.teachers}}' +
      '{{#linkTo "teachers" teacher}}{{teacher.name}}{{/linkTo}}' +
    '{{/each}}'
  )
}); 
```

然后像这样使用它：

```
{{view App.TeachersListView teachersBinding="teachersList"}} 
```

但是你不应该在模型中这样做，因为它不属于那里。另外，我会避免将任何内容命名为`class`/ `Class`，因为它是几乎所有语言中的保留字，您可能会遇到意外错误。

这是您问题的答案，还是您需要帮助者的进一步帮助`linkTo`？

# php - API 缓存和搜索

> ID：15908826
> 
> 赞同：1
> 
> 时间：2013-04-09T17:43:03.820
> 
> 标签：php, api, mongodb, caching, mongodb-php

我正在创建一个产品（在 php 中），它通过调用 api 来提取所需的信息，我想根据使用的查询字符串将这些结果缓存/保存到 mongodb 中，以便下一次调用相同的查询字符串从 mongodb 拉取而不是再次调用 api。

我试图确保我涵盖的唯一问题是这个例子：搜索 John Doe 可能会在结果中返回 John Michael Doe，再次搜索 John Michael Doe 我实际上希望这个搜索能够命中 api，因为它会深入挖掘，并且下次 John Michael Doe 正在搜索从 mongo 中提取。

我了解如何编写代码和进行拉取等，我只需要存储缓存的理论，我是否应该在 mongo 中创建一个表来保存每个搜索到的查询字符串并进行精确匹配，如果它没有找到任何匹配项打API？

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:02:13.023

我认为一种常见的做法是使用 md5 对查询参数进行哈希处理，然后使用它作为存储结果的键。下次有人发送查询时，您再次散列他们的查询参数并检查该键是否已存在于数据库中。如果是，则从数据库提供结果，如果不是，则调用 API。

```
$key = md5(serialize($queryParams)); 
```

# c++ - 如何将 C++ 变量存储在寄存器中

> ID：15908835
> 
> 赞同：16
> 
> 时间：2013-04-09T17:43:26.427
> 
> 标签：c++, inline-assembly, cpu-registers

我想澄清一下关于寄存器变量存储的一点：有没有办法确保如果我们在代码中声明了一个寄存器变量，它只会存储在寄存器中？

```
#include<iostream>

using namespace std;

int main()
{
    register int i = 10;// how can we ensure this will store in register only.
    i++;
    cout << i << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-09T17:45:14.387

你不能。这只是对编译器的提示，表明该变量被大量使用。这是 C99 的措辞：

> 为具有存储类说明符的对象声明标识符`register`表明对对象的访问尽可能快。这些建议的有效程度由实施定义。

这是 C++11 的措辞：

> 说明`register`符是对实现的提示，即如此声明的变量将被大量使用。[ 注意：提示可以被忽略，并且在大多数实现中，如果变量的地址被获取，它将被忽略。这种用法已被弃用（见 D.2）。——尾注]

事实上，`register`存储类说明符在 C++11（附件 D.2）中已被弃用：

> 不推荐使用`register`关键字作为*存储类说明符*(7.1.1)。

请注意，您不能`register`在 C 中获取变量的地址，因为寄存器没有地址。这个限制在 C++ 中被删除，并且几乎可以保证获取地址以确保变量不会最终出现在寄存器中。

许多现代编译器只是忽略`register`C++ 中的关键字（当然，除非它以无效的方式使用）。`register`与关键字有用时相比，它们在优化方面要好得多。我希望小众目标平台的编译器更认真地对待它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-09T21:22:22.240

该`register`关键字在 C 和 C++ 中具有不同的含义。在 C++ 中，它实际上是多余的，而且现在似乎已被弃用。

在 C 中它是不同的。首先不要从字面上理解关键字的名称，它并不总是与现代 CPU 上的“硬件寄存器”有关。对变量施加的限制是`register`不能取地址，`&`不允许操作。这允许您标记一个变量以进行优化，并确保如果您尝试获取它的地址，编译器会向您喊叫。特别是一个`register`同样合格的变量`const`永远不能别名，所以它是一个很好的优化候选者。

在 C 中使用`register`as 系统地迫使您考虑获取变量地址的每个地方。这可能不是您在 C++ 中想要做的事情，C++ 严重依赖于对对象和类似事物的引用。这可能是 C++ 没有`register`从 C 复制此变量属性的原因。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-09T18:01:11.497

一般是不可能的。具体来说，可以采取一定的措施来增加概率：

使用适当的优化级别，例如。`-O2`

保持变量的数量很小

```
register int a,b,c,d,e,f,g,h,i, ... z;  // can also produce an error
// results in _spilling_ a register to stack
// as the CPU runs out of physical registers 
```

不要获取寄存器变量的地址。

```
register int a;
int *b = &a;  /* this would be an error in most compilers, but
                 especially in the embedded world the compilers
                 release the restrictions */ 
```

在某些编译器中，您可以建议

```
register int a asm ("eax");  // to put a variable to a specific register 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-09T17:45:21.930

这只是对编译器的提示；你不能*强迫*它把变量放在寄存器中。无论如何，编译器编写者可能比应用程序程序员更了解目标体系结构，因此更适合编写做出寄存器分配决策的代码。换句话说，您不太可能通过使用`register`.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-09T18:20:26.247

“register”关键字是编译器必须适应具有 2MB RAM 的机器（在 18 个终端之间共享，每个终端都有一个用户登录）的时代的残余。或具有 128-256KB RAM 的 PC/家用电脑。那时，编译器无法真正运行一个大函数来确定哪个寄存器用于哪个变量，以最有效地使用寄存器。因此，如果程序员使用 给出“提示” `register`，编译器会将其放入寄存器中（如果可能的话）。

现代编译器无法在 2MB 的 RAM 中多次安装，但它们在将变量分配给寄存器方面要聪明得多。在给出的示例中，我发现编译器不会将其放入寄存器是非常不可能的。显然，寄存器的数量是有限的，并且给定一段足够复杂的代码，一些变量将不适合寄存器。但是对于这样一个简单的例子，现代编译器会创建`i`一个寄存器，它可能直到内部的某个地方才会触及内存`ostream& ostream::operator<<(ostream& os, int x)`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-02-12T21:40:18.293

确保您使用寄存器的唯一方法是使用内联汇编。但是，即使您这样做，也不能保证编译器不会将您的值存储在内联汇编块*之外。*当然，您的操作系统可能会决定在任何时候中断您的程序，将所有寄存器存储到内存中，以便将 CPU 交给另一个进程。

因此，除非您在禁用所有中断的情况下在内核中编写汇编代码，否则绝对无法确保您的变量永远不会撞到内存。

当然，这仅在您担心安全时才有意义。从性能的角度来看，编译`-O3`通常就足够了，编译器通常可以很好地确定哪些变量要保存在寄存器中。无论如何，将变量存储在寄存器中只是性能调整的一小部分，更重要的方面是确保在内循环中不会完成多余或昂贵的工作。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-08-04T08:32:11.457

通常 CPP 编译器 (g++) 会对代码进行很多优化。因此，当您声明一个寄存器变量时，编译器没有必要将该值直接存储在寄存器中。（即）代码“register int x”可能不会导致编译器将该 int 直接存储在寄存器中。但是如果我们可以强制编译器这样做，我们可能会成功。

例如，如果我们使用下面的一段代码，那么我们可能会强制编译器做我们想做的事情。以下代码的编译可能会出错，这表明 int 实际上是直接存储在寄存器中的。

```
int main() {
    volatile register int x asm ("eax"); 
    int y = *(&x);
    return 0;
} 
```

对我来说，g++ 编译器在这种情况下会抛出以下错误。

```
[nsidde@nsidde-lnx cpp]$ g++ register_vars.cpp 
register_vars.cpp: In function ‘int main()’:
register_vars.cpp:3: error: address of explicit register variable ‘x’ requested 
```

'volatile register int x asm ("eax")' 行指示编译器将整数 x 存储在 'eax' 寄存器中，并且这样做不做任何优化。这将确保该值直接存储在寄存器中。这就是为什么访问变量的地址会引发错误。

或者，C 编译器 (gcc) 可能会因以下代码本身出错。

```
int main() {
    register int a=10;
    int c = *(&a);
    return 0;
} 
```

对我来说，gcc 编译器在这种情况下会抛出以下错误。

```
[nsidde@nsidde-lnx cpp]$ gcc register.c 
register.c: In function ‘main’:
register.c:5: error: address of register variable ‘a’ requested 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-04-06T16:22:38.993

在这里您可以`volatile register int i = 10`在 C++ 中使用以确保`i`存储在寄存器中。`volatile`关键字将不允许编译器优化变量`i`。

# java - 当电子邮件地址在“@”符号前包含句点时，在 Java 中以电子邮件地址命名包

> ID：15908836
> 
> 赞同：1
> 
> 时间：2013-04-09T17:43:26.857
> 
> 标签：java, naming-conventions, packages

我相信我们都知道，可以通过购买像“somedomain.org”这样的域名来为其Java产品命名包，在这种情况下，包将遵循“org.somedomain.packagename”模式（相关来源：[http ://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)）。

但是，对于那些没有域名的人，电子邮件地址作为替代提供。例如，一个名叫 John Bob Doe 的人可能创建了一个 GMail 帐户，例如“john_bob_doe@gmail.com”，因此会将他们的包命名为：“com.gmail.john_bob_doe”和“com.gmail.jon_bob_doe”。一些内包”

这一切都很好，但如果他的电子邮件地址是“john-bob-doe@gmail.com”会发生什么？好吧，根据上面的链接，在存在连字符的情况下，我们可以用下划线替换连字符。因此，再次：“com.gmail.john_bob_doe”和“com.gmail.jon_bob_doe.someinnerpackage”。

现在这是“真正的”问题：如果他的电子邮件地址是“john.bob.doe@gmail.com”会发生什么？那么包命名应该是“com.gmail.john.bob.doe”吗？或者也许是“com.gmail.doe.bob.john”？基本上，问题是：当他们的电子邮件地址在“@”符号之前包含句点时，应该如何命名他们的包？

**推理：**我有一个这样的电子邮件地址，我想用它来命名我的项目的包。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T17:46:19.420

Please note that naming conventions of Java packages are just that; conventions. You can name them whatever you want. The only thing that is enforced is that a `.` delineates a subdirectory in the filesystem where the compiler looks for the source.

Also note that with gmail, at least, the `.` is ignored in the email. Therefore `myname@gmail.com` and `my.name@gmail.com` are equivalent. Because they are equivalent, `com.gmail.myname` would be an appropriate package name tied to such an email address.

The reason for using domain names/email addresses is that they are a convenient way to (probably) avoid namespace collisions for packages. However, with modern refactoring technology available in your local IDE, this should not be a blocker for progress. Choose a non-top-level-domain prefix and name your program or library whatever you want `rogue.my.awesome.java.program`.

Finally, note that naming your package something like `com.google.myname` implies that google developed the package. Most programmers, for this reason, put some amount of work into establishing some screen name or shortening of their actual name as an online presence so that they can use that as a prefix for this and similar projects: `myname.awesome.java.program`. This satisfies an elegant secondary concern of naming: knowing who to contact if, upon coming across the source, you have questions.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T17:55:35.210

没有单一的正确方法可以做到这一点。

您需要牢记的是这个约定/包名称形成指南的目的......这是：

*   最大限度地减少相互独立开发的 Java 代码库之间意外包名称冲突的风险，以及

*   传达有关谁或什么“拥有”您正在创建的命名空间的一些信息。

从这个角度来看`com.gmail.john.bob.doe`，还是`com.gmail.doe.bob.john`同样可以很好地将碰撞风险降到最低，并且有最小的风险，聪明的人会认为`com.gmail`（即谷歌）拥有命名空间。

* * *

使用下划线违反了一般的 Java 标识符命名约定......我建议不要这样做

# php - PHP 和 Javascript 兼容的加密功能

> ID：15908840
> 
> 赞同：1
> 
> 时间：2013-04-09T17:43:31.733
> 
> 标签：php, javascript, function, encryption

我想知道 PHP oppenssl_encrypt 和 openssl_decrypt 函数是否有 Javascript 对应项。

我开发了一个独特的 PHP 和 AJAX 组合，用户可以使用他们的用户名和密码登录网站，并且无需将用户名或密码传输到服务器即可进行身份验证。关键是，服务器和用户都有一个从未传输过的密钥，可以用作加密密钥。

*我提到这一点是因为我在这里找到的许多“答案”都是关于为什么有人需要这样做的争论，因为“你使用的任何密钥都必须被传输”。这里不是这种情况，所以如果你是反对者，请不要发表评论。*

我真正要寻找的是两组字符串加密/解密函数，它们使用密钥在 PHP 和 Javascript 之间兼容。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:49:31.253

好吧..我不知道，但你可以下载一个js来用算法`openssl_...`加密/解密东西。`blowfish`Blowfish 也在 php 中（mcrypt 默认包含此算法）。

我用谷歌搜索并找到了一个链接

[http://dren.ch/js_blowfish/](http://dren.ch/js_blowfish/)

你总是可以用谷歌搜索东西，你也可以在 openssl 上找到同样的东西！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:52:01.133

查看关于[`openssl_decrypt()`](http://php.net/manual/en/function.openssl-decrypt.php)PHP 位的第一条评论，然后您可以在[此处获得 Gibberish Javascript 位](https://github.com/ivantcholakov/gibberish-aes-php)。

# c# - 使用 lambda 函数合并包含不同对象的列表

> ID：15908845
> 
> 赞同：2
> 
> 时间：2013-04-09T17:43:37.210
> 
> 标签：c#, list, function, lambda

我有三个不同`List<string>`的长度相等的 s，它们包含不同类型的数据。例如：

```
List<string> dates = new List<string>() { "20120301", "20120401", "20120501", "20120601", "20120701"};
List<string> times = new List<string>() { "0500", "0800", "0100", "1800", "2100" };
List<string> quantities = new List<string>() { "1", "2", "1", "3", "1" }; 
```

实际数据可以是任何数据，但列表始终具有相同的长度。我想将它们合并为一个`List<DTQ>`.

```
public struct DTQ
{
    DateTime dt;
    double q;
    public DTQ(DateTime dt, double q) { this.dt = dt; this.q = q; }
} 
```

有没有办法用 lambda 函数做到这一点？到目前为止，我已经设法创建了一个 lambda 函数，该函数描述了如果数据是 3`strings`而不是`List<string>`s，我将如何映射数据：

```
Func<string, string, string, DTQ> mergeFields = (d, t, q)
            => new DTQ(DateTime.ParseExact(string.Format("{0}{1}", d, t), "yyyyMMddhhmm", CultureInfo.InvariantCulture), double.Parse(q)); 
```

不过，我不确定我能从那里去哪里。这个想法是将此函数应用于列表的每个索引。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T17:52:06.337

看起来像是 的工作[`Zip`](http://msdn.microsoft.com/en-us/library/dd267698.aspx)，只是您有 3 个列表而不是 2 个。

使用您当前的定义`mergeFields`，您可以执行以下操作：

```
var dateAndTimes = dates.Zip(times, (d, t) => new { Date = d, Time = t });
var all = dateAndTimes.Zip(quantities, (dt, q) => new { dt.Date, dt.Time, Quantity = q });
var result = all.Select(x => mergeFields(x.Date, x.Time, x.Quantity)).ToList(); 
```

如果您想要一个更通用的解决方案，您还可以创建一个`Zip`需要 3 个集合的重载：

```
public static IEnumerable<TResult> Zip<TFirst, TSecond, TThird, TResult>(
    this IEnumerable<TFirst> first,
    IEnumerable<TSecond> second,
    IEnumerable<TThird> third,
    Func<TFirst, TSecond, TThird, TResult> resultSelector)
{
    return first.Zip(second, (f, s) => new { f, s })
                .Zip(third, (fs, t) => resultSelector(fs.f, fs.s, t));
} 
```

（或者，您可以使用 Romoku 的实现，这可能会快一点）

然后像这样使用它：

```
var result = dates.Zip(times, quantities, mergeFields).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T18:01:18.673

你可以做双拉链，但效率低下。这是压缩三个枚举的扩展方法。

```
public static class EnumerableExtensions
{
    public static IEnumerable<TResult> Zip<TFirst, TSecond, TThird, TResult>(
        this IEnumerable<TFirst> first,
        IEnumerable<TSecond> second,
        IEnumerable<TThird> third,
        Func<TFirst, TSecond, TThird, TResult> resultSelector )
    {
        if( first == null )
            throw new ArgumentNullException( "first cannot be null" );
        if( second == null )
            throw new ArgumentNullException( "second cannot be null" );
        if( third == null )
            throw new ArgumentNullException( "third cannot be null" );
        if(resultSelector == null)
            throw new ArgumentNullException( "resultSelector cannot be null" );

        using ( var iterator1 = first.GetEnumerator() )
        using ( var iterator2 = second.GetEnumerator() )
        using ( var iterator3 = third.GetEnumerator() )
        {
            while ( iterator1.MoveNext() && iterator2.MoveNext() && iterator3.MoveNext() )
            {
                yield return resultSelector(
                    iterator1.Current,
                    iterator2.Current,
                    iterator3.Current );
            }
        }
    }
} 
```

用法：

```
var result = dates.Zip(times, quantities, mergeFields); 
```

# php - 如何修改这个 MySQL 查询以获得特定的数据结构？

> ID：15908846
> 
> 赞同：0
> 
> 时间：2013-04-09T17:43:40.270
> 
> 标签：php, mysql

如果我有两个简单的表：

相片 ：

```
photoid | filename            | albumid
1       | something.jpg       |    1
2       | somethingelse.jpg   |    1 
```

还有一张专辑表：

```
 albumid   | album_name        | owner_id
    1       | My Holiday 2012   |    1
    2       | My Holiday 2013   |    6 
```

我想获取给定所有相册中包含的所有照片`owner_id`

我可以执行以下操作：

```
select albums.*, photos.*
from photo_albums as albums
left join photos as photos
on albums.albumid = photos.albumid
where albums.owner_id = :owner_id 
```

这将为每张照片以及相关的相册数据返回 2 行。

但是，我想做的是仅返回每张专辑的行。照片行嵌套在每个相册行中。

返回类似于以下内容的输出：

```
[{
    albumid : 1,
    album_name : My Holiday 2012,
    owner_id : 1,
    photos : {
                 photoid : 1,
                 filename : something.jpg
             },
             {
                 photoid : 2,
                 filename : somethingelse.jpg
             }   
}] 
```

在 MySQL 查询本身中是否有一种简单有效的方法来执行此操作？如果有怎么办？或者，我是否更好地从原始查询中获取完整的行数据，并通过循环遍历 php 中的行来将数据构造到这个输出中？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:48:39.377

你只是不能通过修改 SQL 查询来做到这一点。

我看到了两种实现目标的方法：

1.  后处理您的输出以构建所需的数组结构。
2.  使用[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping)（对象关系映射）将查询结果自动映射到对象。例如，参见[教义](http://www.doctrine-project.org)。

# bash - 我的测试中询问的 Shell 表达式

> ID：15908850
> 
> 赞同：1
> 
> 时间：2013-04-09T17:43:58.680
> 
> 标签：bash, shell

我最近在测试中得到了这个，我被难住了。问题是解释以下 shell 表达式的作用：

```
bang(){bang|bang&};bang 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:08:03.300

看起来像[叉子炸弹](http://wikipedia.org/wiki/Fork_bomb)

> 在计算中，分叉炸弹是一种拒绝服务攻击，进程不断复制自身以耗尽可用的系统资源。

典型的例子

```
:(){ :|: & };: 
```

# c++ - 为什么 num_get 和 num_put 不对称？

> ID：15908853
> 
> 赞同：8
> 
> 时间：2013-04-09T17:44:08.657
> 
> 标签：c++, locale, iostream

算术提取运算符对所有 8 种整数类型`std::basic_istream`都有[非虚拟重载](http://en.cppreference.com/w/cpp/io/basic_istream/operator_gtgt)（不列出字符，无论如何处理方式不同），它调用`num_get::get`，其中有 6 个有单独的[*虚拟*重载](http://en.cppreference.com/w/cpp/locale/num_get/get)（缺少 short 和 int 的有符号版本）

算术插入运算符对于所有 8 种整数类型`std::basic_ostream`也有[非虚拟重载](http://en.cppreference.com/w/cpp/io/basic_ostream/operator_ltlt)，它调用`num_put::put`，它只[对 4 种类型有虚拟重载](http://en.cppreference.com/w/cpp/locale/num_put/put)，它们是`long`，`long long`以及它们的无符号变体。对于较小的类型，插入运算符执行整数提升。

为什么在用户可扩展性方面存在差距？似乎不可能为每个整数类型提供用户定义的处理（例如，在 iostream 接口之上构建一个类型保留的序列化库），而且它是不对称的。不费吹灰之力就可以实现。有取舍吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T18:05:09.230

当您读取值时，您必须允许溢出，因此每种类型都需要一个提取器。当您编写值时，您不会，因此最大的类型就足够了。在过去，最大的类型是`long`. 添加`long long`后，`long`为向后兼容保留了 for 的版本。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T18:14:08.080

根据[标准 C++ Iostreams 和 Locales](http://books.google.co.jp/books?id=5qybChHSk7QC&pg=PA288&lpg=PA288&dq=%22at+first+sight+it+might+look+as+if+versions+of+put%28%29%22&source=bl&ots=dpfS6B0q4_&sig=xJogbk_4iA1HRcxYoffZ3amDDDo&hl=ja&sa=X&ei=eVhkUcrtMsnxiAeE34CYDg&ved=0CCwQ6AEwAA#v=onepage&q=%22at%20first%20sight%20it%20might%20look%20as%20if%20versions%20of%20put%28%29%22&f=false)：

> 乍一看，它可能看起来好像缺少用于 short、int 或 float 的 put() 版本。目的是保持标准库的接口简洁，long 版本可以处理 short 或 int 类型的值。类似地，float 类型的值可以由 double 的 put() 版本处理。

然后是关于`num_get::get()`：

> 同样，与 num_put::put() 一样，省略了非绝对必要的类型。

# events - 在 symfony2 登录成功之后和重定向之前做些什么？

> ID：15908856
> 
> 赞同：12
> 
> 时间：2013-04-09T17:44:19.220
> 
> 标签：events, authentication, symfony, hook

我现在正在寻找有关在 symfony2 中身份验证成功后如何做某事的任何信息。我想在使用旧哈希成功认证后重新哈希用户密码以使用 bcrypt。当我仍然有有效的纯密码时，我需要这样做，所以它应该在凭据检查之后和重定向之前。

任何线索如何实现这一目标？

我在 Symfony 中发现了一些关于事件调度程序的信息，但我~~无法找到成功认证后是否有任何事件。~~

如果我试图以错误的方式做这件事，请纠正我并提出一些更好的方法。

//**编辑**

好的，我发现在身份验证成功后触发了事件，它被称为`security.authentication.success`. 所以我现在可以附加到这个事件但现在我不确定我应该在我的边界代码中的哪个位置附加我的事件监听器？我应该在我`/src/Pkr/BlogUserBundle/DependencyInjection/PkrBlogUserExtension.php`的`load()`方法中这样做吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-09T19:15:12.427

您可以指定在成功登录时执行的登录成功处理程序。

例如，您的 security.yml

```
firewalls:
    main:
        pattern: ^/
        form_login:
            success_handler: my.security.login_handler 
```

现在创建实现`Symfony\Component\Security\Http\Authentication\AuthenticationSuccessHandlerInterface`并成功登录的类，您可以做任何您需要的事情并按照您认为合适的方式处理重定向。

```
/**
 * 
 */
public function onAuthenticationSuccess(Request $request, TokenInterface $token)
{
    // handle it and return a response
} 
```

然后在你的包的 services.xml 中创建一个具有该名称的服务，或者使用新创建的处理程序在你的 config.yml 中创建一个服务。

我最初在本教程之后发现了如何执行此操作：

[http://www.reecefowell.com/2011/10/26/redirecting-on-loginlogout-in-symfony2-using-loginhandlers/](http://www.reecefowell.com/2011/10/26/redirecting-on-loginlogout-in-symfony2-using-loginhandlers/)

# javascript - Javascript inq：通过javascript控制要显示的输入字段的数量

> ID：15908860
> 
> 赞同：0
> 
> 时间：2013-04-09T17:44:31.137
> 
> 标签：javascript, upload

脚本：图片上传脚本，但重点是javascript。

javascript，到目前为止，每次单击“添加图像”按钮时，都会为用户提供一个新字段来上传图像。

问题：该脚本在大多数情况下都有效，但它为用户提供了无限的上传字段。

需要：

1.  控制用户可以点击“添加图片”按钮的次数，如果用户超过设定的上传文件数量，“添加图片”按钮应该被禁用。
2.  如果列表中的一个图像被删除，则应再次启用“添加图像”按钮以添加另一个图像。

示例：允许用户上传 3 个成像器。如果用户超过上传，则禁用上传按钮。如果用户删除。应启用图像上传按钮中的一个文件以上传另一个文件，使其与允许上传的文件数量保持一致。

## 您能给我的任何帮助将不胜感激。谢谢

```
 $(function()
{   $('#add-file-field').click(function()
    {   $("#addField").append('<div class="added-field"><input type="file" name="data[]"><input type="image" src="delete.png" class="remove-btn" value="Remove"></div>');
    });
    $('.remove-btn').live('click',function()
    {   $(this).parent().remove();  });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:47:24.433

您可以添加一个隐藏字段并将值设置为您希望允许用户单击上传按钮的最大次数。然后，当您每次从隐藏字段检查该计数时用户上传图像时，

如果计数大于零，则允许用户添加图像并将隐藏字段值计数减 1。

# boost - boost::get_reference() 现在在哪里？

> ID：15908863
> 
> 赞同：0
> 
> 时间：2013-04-09T17:44:34.883
> 
> 标签：boost

由于 boost::mutex 不是“默认可构造”，我无法直接获得它的引用。我用谷歌搜索了这个问题，发现 get_reference() 可能是解决方案。但我发现在我的“boost/utility/”文件夹中，没有“get_reference.hpp”。

有谁知道 get_reference() 是否仍然受支持？或者这个问题的任何替代解决方案（获取 boost::mutex 的参考）？

谢谢，崔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:42:10.970

`boost::mutex` **是**默认可构造的。它是不可*复制的*。您的问题不清楚，但我想您正试图`mutex`在`bind`表达式中使用或传递`mutex`给复制其参数的算法，并且您正在寻找`boost::ref`包装器，不是吗？

```
#include <boost/ref.hpp>
//...
boost::ref(yourMutex) 
```

# javascript - 将 jquery 选择器更改为不选择特定的 div id

> ID：15908864
> 
> 赞同：0
> 
> 时间：2013-04-09T17:44:36.990
> 
> 标签：javascript, jquery, jquery-selectors

我有一个 jquery 选择器，我想更改它以使其不会选择`<div id="divA"></div>`。

这是当前的选择器：

```
$('ul.toggle a').on('click', function () {
  //does some work
}); 
```

我试过`$('ul.toggle a [id!=divA]')`了，但这会出错。
这个选择器的预期格式是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T17:46:01.480

您可以使用[**:not**](http://api.jquery.com/not/)从匹配元素集中删除元素。

```
$("ul.toggle a:not('#mhs-link')") 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T17:45:59.513

这个怎么样-

```
$('ul.toggle a').not('#divA') 
```

该`.not()`函数只是从先前的元素列表中删除元素。由于一些漂亮的函数链接，您可以将其插入到您当前的定义中 -

```
$('ul.toggle a').not("#divA").on('click', function () {
  //does some work
}); 
```

参考

*   [`not()`](http://api.jquery.com/not/)- 从匹配元素集中删除元素。

# spring - SpEL 使用函数

> ID：15908867
> 
> 赞同：0
> 
> 时间：2013-04-09T17:44:38.530
> 
> 标签：spring, spring-el

我将下一个 bean 添加到我的 xml 中：

```
<bean id="PracticeFactory" class="WordsLearning.PracticeFactory">
    <constructor-arg value="#{teacher.getPracticeType()}"/>
    <constructor-arg value="#{teacher.getAboutType()}"/>
</bean> 
```

现在，当我运行应用程序时，它处于循环状态：

```
INFO: Refreshing    org.springframework.context.support.ClassPathXmlApplicationContext@77a9aacd: startup date   [Tue Apr 09 20:35:47 EEST 2013]; root of context hierarchy
апр 09, 2013 8:35:47 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [EntityOperatorBean.xml]
апр 09, 2013 8:35:47 PM org.springframework.beans.factory.support.DefaultListableBeanFactory registerBeanDefinition
INFO: Overriding bean definition for bean 'stopTimer': replacing [Root bean: class [org.springframework.aop.aspectj.AspectJExpressionPointcut]; scope=prototype; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null] with [Root bean: class [org.springframework.aop.aspectj.AspectJExpressionPointcut]; scope=prototype; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null]
апр 09, 2013 8:35:47 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@b4599c9: defining beans [entityOperator,word,timer,English-Russian,teacher,steady,terse,saver,Keyboard input,Vival trusted,PracticeFactory,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.aop.aspectj.AspectJPointcutAdvisor#0,org.springframework.aop.aspectj.AspectJPointcutAdvisor#1,org.springframework.aop.aspectj.AspectJPointcutAdvisor#2,startTimer,stopTimer]; root of factory hierarchy
апр 09, 2013 8:35:47 PM org.springframework.context.support.ClassPathXmlApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@1c038a03: startup date [Tue Apr 09 20:35:47 EEST 2013]; root of context hierarchy
апр 09, 2013 8:35:47 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [EntityOperatorBean.xml]
апр 09, 2013 8:35:47 PM org.springframework.beans.factory.support.DefaultListableBeanFactory registerBeanDefinition
INFO: Overriding bean definition for bean 'stopTimer': replacing [Root bean: class [org.springframework.aop.aspectj.AspectJExpressionPointcut]; scope=prototype; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null] with [Root bean: class [org.springframework.aop.aspectj.AspectJExpressionPointcut]; scope=prototype; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null]
апр 09, 2013 8:35:47 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@24fbe4: defining beans [entityOperator,word,timer,English-Russian,teacher,steady,terse,saver,Keyboard input,Vival trusted,PracticeFactory,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.aop.aspectj.AspectJPointcutAdvisor#0,org.springframework.aop.aspectj.AspectJPointcutAdvisor#1,org.springframework.aop.aspectj.AspectJPointcutAdvisor#2,startTimer,stopTimer]; root of factory hierarchy
апр 09, 2013 8:35:47 PM org.springframework.context.support.ClassPathXmlApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@5b3a6eda: startup date [Tue Apr 09 20:35:47 EEST 2013]; root of context hierarchy
апр 09, 2013 8:35:47 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [EntityOperatorBean.xml]
апр 09, 2013 8:35:47 PM org.springframework.beans.factory.support.DefaultListableBeanFactory registerBeanDefinition
INFO: Overriding bean definition for bean 'stopTimer': replacing [Root bean: class [org.springframework.aop.aspectj.AspectJExpressionPointcut]; scope=prototype; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null] with [Root bean: class [org.springframework.aop.aspectj.AspectJExpressionPointcut]; scope=prototype; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null]
апр 09, 2013 8:35:47 PM org.springframework.beans.factory.support.DefaultListableBeanFactory preInstantiateSingletons
INFO: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@1b9156ad: defining beans [entityOperator,word,timer,English-Russian,teacher,steady,terse,saver,Keyboard input,Vival trusted,PracticeFactory,org.springframework.aop.config.internalAutoProxyCreator,org.springframework.aop.aspectj.AspectJPointcutAdvisor#0,org.springframework.aop.aspectj.AspectJPointcutAdvisor#1,org.springframework.aop.aspectj.AspectJPointcutAdvisor#2,startTimer,stopTimer]; root of factory hierarchy
апр 09, 2013 8:35:47 PM org.springframework.context.support.ClassPathXmlApplicationContext prepareRefresh
INFO: Refreshing org.springframework.context.support.ClassPathXmlApplicationContext@18c0364a: startup date [Tue Apr 09 20:35:47 EEST 2013]; root of context hierarchy
апр 09, 2013 8:35:47 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [EntityOperatorBean.xml] 
```

没有那个bean，它就可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:47:57.497

这是因为教师 bean 请求“beans.xml”，而 priceFactory bean 请求“beans.xml”，这是我的周期。

# html - 高度没有达到 100%

> ID：15908872
> 
> 赞同：0
> 
> 时间：2013-04-09T17:44:54.910
> 
> 标签：html, css, height

我有两个部分，左侧的结果和右侧的 main 位于 html > wrapper > container 中。

现在，这两个的高度都不是固定的，并且希望它们根据它们的内容拉伸到 100%。在某些情况下，结果比主要结果长，反之亦然。我已经使用了 100% 的高度，但它似乎不起作用。请帮忙！

```
html, body {
margin: 0;
padding: 0;
height: 100%;
}

#wrapper {
min-height: 100%;
position: relative;
width: 100%;
}

#container {
width: 1007px;
padding: 130px 0 0 0;
display: block;
}

.results {
width: 383px;
float: left;
background: 
#fff;
display: block;
-webkit-box-shadow: -2px 0px 8px -6px #000;
-moz-box-shadow: -2px 0px 8px -6px #000;
box-shadow: -2px 0px 8px -6px #000;
padding-bottom: 60px;
}

.main {
width: 606px;
float: left;
padding: 15px 0 0 16px;
position: relative;
background: url(images/pattern.png) repeat;
height: 100%;
bottom: 0px;
}

<html lang="en>
  <head></head>
  <body>
     <div id="wrapper">
        <div id="container" class="clear fix">
            <section class="results">
            </section>
            <section class="main">
            </section>
        </div>
     </div>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:54:59.363

尝试在位置属性中使用“绝对”而不是“相对”。我在这里工作过。

例如：

```
.main {
width: 606px;
float: left;
padding: 15px 0 0 16px;
position: absolute;
background: url(images/pattern.png) repeat;
height: 100%;
bottom: 0px;
} 
```

拥抱，维尼修斯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:57:21.650

在许多情况下，当一个人声明高度应该是 100% 但您需要问“100% 是什么？”时，就会出现问题。该答案是该元素的父元素，因此下一个问题是“父元素的高度设置为多少？”。如果您没有为父级设置高度，那么 100% 的空无是空的。

# c# - 从 url 中删除一些错误

> ID：15908874
> 
> 赞同：0
> 
> 时间：2013-04-09T17:44:58.427
> 
> 标签：c#, asp.net, url, anchor, query-string

我有一个这样的 url `index.aspx`，但是当我点击一个链接到`anchor`标签的按钮时，它会添加这个`#video`

所以看起来

```
index.aspx#video 
```

有什么可以删除`#video`的`url`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:46:31.143

由于您的问题含糊不清，我没有得到太多反馈，因此这里有三个选项。

**选项 1 - 使用锚点位置，移除锚点，适当地重新滚动窗口。**

[您可以使用本文](https://stackoverflow.com/questions/3163615/how-to-scroll-html-page-to-given-anchor-using-jquery-or-javascript)引用的 location.hash 访问 # 值。不幸的是，一旦您设置了 location.hash = ''，页面就会重新导航到屏幕顶部（并在 URL 中留下 # 符号）。如果您设置 location.href，页面导航离开页面，丢失任何存储的局部变量。

您可以做的一种可能的解决方法如下：

```
function RemoveHash(){
  var y = location.hash.substring(1, location.hash.length);
  location.hash = '';
  window.scrollTo(0, y);
} 
```

这样做的缺点是屏幕会在将屏幕移回顶部并返回到您的位置时闪烁。另一种方法是不使用锚点，而是在页面上查找元素的位置，但根据我的经验，这并不准确，并且因浏览器而异，并且成为维护问题。JQuery 库可能对此有所帮助，如果您沿着这条路线走，可能值得研究。

**选项 2 - 获取不带锚标记的 Url**

您可以执行替换 RegEx 以从 url 中删除锚点，您可以使用以下内容：

```
location.href.replace(/\#\w+/g, ""); 
```

**选项 3 - 不要使用锚点并使用 JavaScript 滚动**

您可以不使用锚点，而只需按照本[教程](http://www.itnewb.com/tutorial/Creating-the-Smooth-Scroll-Effect-with-JavaScript)使用 JavaScript 将页面滚动到正确的位置。基本思想是获取元素的滚动偏移量并将屏幕滚动到该位置。

```
function elmYPosition(eID) {
    var elm = document.getElementById(eID);
    var y = elm.offsetTop;
    var node = elm;
    while (node.offsetParent && node.offsetParent != document.body) {
        node = node.offsetParent;
        y += node.offsetTop;
    } return y;
} 
```

并使用超链接调用 javascript：

```
<a href="javascript:void(0);" onclick="window.scrollTo(0, elmYPosition('myAnchor'))>myAnchor</a> 
```

# android - Android：未安装应用程序

> ID：15908879
> 
> 赞同：1
> 
> 时间：2013-04-09T17:45:21.027
> 
> 标签：android

我有一个问题，我正在开发一个应用程序，当我通过 eclipse 运行它时，我可以在我的手机上运行它。

但是当我将它导出为未签名的 apk 时，我会在安装结束时收到以下消息：

> 未安装应用

问题是我没有得到任何关于错误的进一步信息。

我怎样才能找出问题出在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T17:49:47.950

您不能在 Android 上运行未签名的 apk。您必须先直接在 Eclipse 中或使用 keytool（命令行）对其进行签名。

即使从 Eclipse 运行应用程序，它也会被签名 - 使用生成的调试密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T07:45:27.930

您可能在新版本之上安装旧版本。

在这种情况下，您将找到以下日志。

W/PackageManager(404)：无法安装更新 some.package.name 的更新版本 1 比安装的版本 2 旧

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T17:21:20.167

尝试删除其他/较旧的应用程序版本，例如 prod/sandbox。

# wolfram-mathematica - Xor 线程和 False 列表

> ID：15908881
> 
> 赞同：2
> 
> 时间：2013-04-09T17:45:24.550
> 
> 标签：wolfram-mathematica

我正在尝试实现 BitXor 的变体，它将两个真值列表作为输入，并返回逐元素 Xor 真值列表作为输出。

```
MyXor = Thread[Xor[#, #2]] &; 
```

它工作正常，除非输入相同。我希望得到

```
{False,False,False,False,False,False,...} 
```

但我只是得到

```
False 
```

有没有办法解决这个问题，而不强制函数检查这种情况并重建 False 列表以输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:36:24.347

问题是当 to 参数相同时`Xor`总是给出。一种解决方案是`False`阻止评估`Xor``Thread`

```
MyXor = Thread[Unevaluated[Xor[#, #2]]] &

l = RandomChoice[{True, False}, 10];
MyXor[l, l] 
```

# heroku - What does heroku rake and restart commands do?

> ID：15908884
> 
> 赞同：1
> 
> 时间：2013-04-09T17:45:31.097
> 
> 标签：heroku, command-line, heroku-toolbelt

I'm using heroku for a sort time and I have some doubts on what exactly do 2 'commands'

The first is `rake`, I've seen here some people use it and some others, use the same instructions without `rake`, so I'd like to know if there's any difference in using `rake` or not

The other is more simple: `heroku restart` Does this only affect the database or it also affect the code? If it only affects the database, what happens to the data? Should I use it, or it's an emergency command?

All info explained here and related to these instructions will be really helpful

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:54:23.300

`rake`是一个已弃用的电话。

```
Heroku ❯ heroku help rake
Alias: rake redirects to run:rake
Usage: heroku run:rake COMMAND

 WARNING: `heroku run:rake` has been deprecated. Please use `heroku run rake` instead." 
```

基本上它是/曾经是运行`rake`Rails 应用程序调用的快捷方式。

**你应该`heroku run rake <task>`改用。**

`heroku restart`重新启动应用程序进程，这里有更详细的解释：[https ://devcenter.heroku.com/articles/process-model](https://devcenter.heroku.com/articles/process-model)

`heroku help restart`了解更多信息。

`heroku restart`不会**重新**启动您的数据库。

# android - GCM 使用两个不同的工作注册 ID 进行注册

> ID：15908886
> 
> 赞同：8
> 
> 时间：2013-04-09T17:45:35.303
> 
> 标签：android, notifications, push-notification, google-cloud-messaging

我的客户端/服务器上用于推送通知的设备注册管理存在小问题。

### 问题

我遇到的问题是，当我卸载应用程序并重新安装它时，应用程序返回一个空字符串作为注册 id ( `GCMRegistrar.getRegistrationId(this)`)，我用我的服务器重新注册设备。问题是我得到了一个新的、不同的注册 ID（有时）并且两者都有效！所以我不知道服务器端如何知道它是否适用于同一设备。我还应该注意我没有更改应用程序版本。清单的任何更改都会触发新的注册 ID 发出吗？

在 Android 端，我执行以下操作：

```
    /**
     * 用 GCM 注册这个 android 设备
     */
    私人无效 registerDeviceWithGCM() {
        GCMRegistrar.checkDevice(this);
        GCMRegistrar.checkManifest(this);
        字符串 regId = GCMRegistrar.getRegistrationId(this);
        如果（regId.equals（“”））{
            log.debug("向 GCM 注册应用程序");
            GCMRegistrar.register(this, ApplicationData.SENDER_ID);
        } 别的 {
            log.debug("已经注册：" + regId);
            deviceRegistrationService.updateServerRegistrationData(this, regId);
        }
    }

```

在我的`GCMIntentService.java`我做以下：

```
    /**
     * 新设备注册时触发，并与服务器更新注册信息
     *
     * @param 上下文上下文接收自
     * @param regId 设备的注册ID
     */
    @覆盖
    受保护的无效onRegistered（上下文上下文，字符串regId）{
        Log.d(TAG, "注册：" + regId);
        Intent intent = new Intent(RegistrationReceiver.REGISTRATION_INTENT);
        intent.putExtra(RegistrationReceiver.REGISTRATION_ID, regId);
        context.sendBroadcast（意图）；
    }

```

在我的`RegistrationReceiver.java`我有以下内容：

```
    /**
     * 使用 cirrus 触发设备注册
     *
     * @param 上下文未使用
     * @param intent 用于获取注册 ID
     */
    @覆盖
    公共无效句柄接收（上下文上下文，意图意图）{
        log.debug("收到注册意图操作：" + intent.getAction());
        if (intent.getAction().equals(REGISTRATION_INTENT)) {
            字符串 regId = intent.getStringExtra(REGISTRATION_ID);
            log.debug("收到注册意图，注册ID：" + regId);
            deviceRegistrationService.updateServerRegistrationData(loginActivity, regId);
        } else if (intent.getAction().equals(REGISTRATION_FAILED_INTENT)) {
            log.debug("收到注册失败意图，显示错误信息");
            showRegistrationFailedMessage（意图）；
        }
    }

```

同样，这里的问题是我有两个或更多的注册 id 都可以工作（如果我在尝试从服务器发布消息时旧的注册 ID 根本不起作用，因为我可以简单地清理它，这不会是一个问题向上）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T18:23:03.057

有时 Google 会更改注册 ID，您会关联多个 ID。发送通知的服务器（您的服务器）必须使用新 ID 更新数据库。

有关更多信息，请查看此文档：

[http://developer.android.com/google/gcm/adv.html](http://developer.android.com/google/gcm/adv.html)

说的是：

> 在服务器端，只要应用程序运行良好，一切都应该正常工作。但是，如果应用程序中的错误触发同一设备的多个注册，则可能很难协调状态，并且您最终可能会收到重复的消息。
> 
> GCM 提供了一种称为“规范注册 ID”的工具，可以轻松地从这些情况中恢复。规范注册 ID 定义为您的应用程序请求的最后一次注册的 ID。这是服务器在向设备发送消息时应使用的 ID。
> 
> 如果稍后您尝试使用不同的注册 ID 发送消息，GCM 将照常处理请求，但它将在响应的 registration_id 字段中包含规范注册 ID。确保使用此规范 ID 替换存储在您服务器中的注册 ID，因为最终您使用的 ID 将停止工作。

# java - How to annotate deprecation of a class in Java?

> ID：15908887
> 
> 赞同：14
> 
> 时间：2013-04-09T17:45:36.613
> 
> 标签：java, annotations, deprecated

I am going to deprecate a class in Java.

```
@Deprecated
class deprecatedClass 
```

and I have list of this deprecated class,

```
List<deprecatedClass> listOfDeperecatedClass 
```

So do I need to add the `@Deprecated` tag for this list too?

* * *

Edit: `@Deprecated` should have a capital 'D'.
See: [http://docs.oracle.com/javase/7/docs/api/java/lang/Deprecated.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Deprecated.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-12T07:45:37.547

不，你不需要。添加注释`@Deprecated`将`DeprecatedClass`在每次使用时生成警告。

* * *

但是，您*应该做的是将**其他*类中的方法标记为将您已弃用的类作为参数或将其返回为已弃用的方法。这适用于其他代码可能对您已弃用的类的实例进行的任何访问——公共字段、常量等。当然，如果没有已弃用的类的实例，就不能使用这些，因此无论如何都会给出警告，但是在正确的弃用注释和注释中，您应该提供解释并指出替代方案，这是您*需要*的有价值的信息给。

方法签名类似于合同，类签名也是如此。您是在告诉其他程序员他们可以调用哪些方法以及如何调用它们。您是在告诉他们哪些字段可以访问。其他程序员以此为基础编写代码。如果您确实需要打破该合同，您首先需要提供该合同的替代品（具有相同功能的新方法），并告诉他们并给他们时间切换到该新合同（弃用旧方法和类） .

当然，以上假设您正在向观众编码。如果您是唯一使用您的代码的人，并且您只想弃用以清理代码而不破坏构建，只需弃用该类，修复警告并将其删除。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T17:46:58.447

Do you have operations on the `List` as part of your public interface? In that case, mark all those methods as `deprecated` too. Otherwise you should be fine.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T17:48:15.903

您只需要将弃用消息添加到您要弃用的任何内容的声明中。它作为一个警告，人们应该避免使用已弃用的类的实现，例如在`List<DeprecatedClass>`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T17:57:42.657

只需标记为：

```
@Deprecated
List<deprecatedClass> listOfDeperecatedClass 
```

应该没问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-01T23:26:54.223

对于像我一样偶然发现这个问题的人需要注意的一点......我在 OpenJDK 14 上，我看到大写 D 不起作用，但小写 D 起作用！我的 Intellij 说错误的标签 @Deprecated 与小写 D 没有这样的警告。

其次，当我编译我的 maven 项目时，也只有小写 D 显示下面的警告......

```
[WARNING] <....>.java: <....>.java uses or overrides a deprecated API.
[WARNING] <....>.java: Recompile with -Xlint:deprecation for details. 
```

# javascript - debug javascript written in object literal pattern?

> ID：15908888
> 
> 赞同：0
> 
> 时间：2013-04-09T17:45:41.183
> 
> 标签：javascript, jquery, debugging, google-chrome

i have some code like

```
var innerPage = {

/* declare vars, cache selectors */
leftWidth           : $("#episodes-nav").width(),
right               : $("#episodes-right"),
theWindow           : $(window),
heroImageHolder     : $("#hero-image-holder"),
heroImage           : $("#hero-image"),

whiteOverlay        : $("#white-overlay"),
tilesContainer      : $("#tiles-container"),

heroPercentToShow   : 0.6,
// heroHolderWidth      : this.heroImageHolder.width(),
// heroHolderHeight : this.heroImageHolder.height(),

heroImgRealW        : null,
heroImgRealH        : null,

/* init */
init                : function(){
    var that = this;
    this.heroImage.on('load', function(){
        // image loaded .. do something
        that.heroImgRealW = this.naturalWidth;
        that.heroImgRealH = this.naturalHeight;
        that.fitHeroImage();

        that.buildInnerBlocks();  
    });

},

fitHeroImage        : function(){

    var desiredWidthToFit = this.heroPercentToShow * this.heroNaturalW;
    var scaleRatio = this.heroViewportWidth / desiredWidthToFit;
    //trace(scaleRatio);

    this.heroImage.width( this.heroImage.width() * scaleRatio );
    var offsetSides = (600 -this.heroImage.width() ) / 2;
    var offsetTop = (containerHeight -this.heroImage.height() ) / 2;
    //trace("top"+offsetTop);
    this.heroImage.css("left", offsetSides);
    this.heroImage.css("top", offsetTop);

    this.heroImage.height( this.heroImage.height() * scaleRatio );
},

/* destroy */
destroy             : function(){

},

/* sizeChildren */
sizeChildren        : function(){

    this.right.width( this.theWindow.width() -  this.leftWidth );
    this.whiteOverlay.width( this.right.width() - this.heroImageHolder.width() +2000 );
    this.tilesContainer.width( this.whiteOverlay.width() );

    this.fitHeroImage();

    //$("#tiles-container").empty();
}

} 
```

when i set breakpoints on functions or inside of them, they don't get triggered (testing in chrome). How do i go around that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:50:33.710

当您调用这些函数时，您的函数中的断点将触发，但您应该能够在创建 innerPage 后设置断点以检查它。

# python-3.x - How to install Sympy on Python 3.3 in Windows 7?

> ID：15908889
> 
> 赞同：2
> 
> 时间：2013-04-09T17:45:42.413
> 
> 标签：python-3.x, sympy

I have already check Sympy.org website and the following link. But I didn't find any executable file to install the Sympy on Python 3.3\.

[http://code.google.com/p/sympy/downloads/list](http://code.google.com/p/sympy/downloads/list)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:41:22.100

抱歉，我们从未`bdist_wininst`在 Python 3 中工作过。您需要从源代码安装。

# hadoop - Size of map output partitions?

> ID：15908891
> 
> 赞同：2
> 
> 时间：2013-04-09T17:45:48.523
> 
> 标签：hadoop, mapper, reducers

Let's assume that we have 3 mappers (m1, m2 and m3) and 2 reducers (r1 and r2).

Each reducer fetches its input partitions from the generated files by each mapper.

From the job history, I can extract the total input for each reduce task, but I would like to know the contribution of each mapper to this reducer input ?

For example, the reducer r1 will receive an INPUT_r1 such as:

INPUT_r1 = ( partition fetched from m1 ) + ( partition fetched from m2 ) + ( partition fetched from m3 )

I would like to know the size of those partitions from mappers ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:01:56.470

为了从映射器中找到分区的大小，需要考虑几件事。

首先，我们应该明白，在 Hadoop 中，*分区器在组合器之前执行，*因此如果您的逻辑中有组合器，您将需要考虑它......如果它影响您查找大小的尝试。如果您发现尺寸与我在这里建议的不同，这很重要。

其次，默认分区`HashPartitioner`器为每个 reducer 分配大致相同数量的键。使用的方法是：

```
public int getPartition(K2 key, V2 value, int numReduceTasks) {

     return (key.hashCode() & Integer.MAX_VALUE) % numReduceTasks;
} 
```

请注意，partitioner 只考虑 key 而忽略 value，这可能导致分发给 reducer 的数据分布不均匀。

我要找出大小的方法是在您`HashPartitioner`或自定义分区器附近设置一个计数器，并说明每个所收集的键值对大小。然后为每个分区器打印此值。您可能需要跟踪每个分区将其数据发送到何处，因为分区器本身不知道他们将数据发送给谁。

[MapReduce Book](http://lintool.github.com/MapReduceAlgorithms/MapReduce-book-final.pdf)引用了这个问题的大量研究

# android - 当我进入我的应用程序时，如何始终执行一段代码？

> ID：15908897
> 
> 赞同：0
> 
> 时间：2013-04-09T17:45:59.967
> 
> 标签：android, android-activity, android-sqlite

每次我进入应用程序时，我都需要从任何活动（不仅来自启动器活动）初始化应用程序的 SQLite 数据库。

我的应用程序有`alwaysRetainTaskState="true"`，但这个标志似乎对我的数据库没有影响，该数据库存储在 assets 文件夹中。

当我进入我的应用程序时，如何始终执行一段代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:49:21.283

尝试实现一个[Application](http://developer.android.com/reference/android/app/Application.html)。那存在于您的应用程序的整个生命周期中。

# sql - Oracle SQL group by queries, Kind of PIVOT

> ID：15908900
> 
> 赞同：1
> 
> 时间：2013-04-09T17:46:09.497
> 
> 标签：sql, oracle, string-aggregation

Till now i haven't got a need to post a query, almost everything is available. This is my first question.

I have a different requirement, I have the below table name say alarmdb

------------------INT_ID----------------------------------------------------- ALARM_NUMBER----------------------------

```
 101212121                               7762
             101212121                               8212
             101212121                               3423
             101313131                               7734
             101313131                               7743 
```

Basically its kind of grouping, and pivoting. Final output can be like this.

------------------INT_ID----------------------------------------------------- ALARM_NUMBER----------------------------

```
 101212121                           7762,8212,3423
             101313131                               7734,7743 
```

Kind of shrinking many cells data into one.

Can anyone please suggest.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T17:49:59.113

根据您的 Oracle 版本，您有不同的选择。

您可以`LISTAGG`用于 Oracle 11g+：

```
select int_id,
  listagg(alarm_number, ', ') within group (order by int_id) as alarm_number
from yourtable
group by int_id; 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/e15c6/2)

或者您可以`wm_concat()` 用于早期版本：

```
select int_id,
  wm_concat(alarm_number) as alarm_number
from yourtable
group by int_id 
```

# c++ - how to avoid objects from array going out of scope after file is closed?

> ID：15908903
> 
> 赞同：0
> 
> 时间：2013-04-09T17:46:18.440
> 
> 标签：c++, arrays, polymorphism

So basically what is going on is this. The code works perfectly fine to add the objects into the array. But when I close the accountFile, the entire array becomes NULL. How can I avoid this so that I can use the array for other things?

```
accounts = new Account*[numAccounts];

for (int i = 0; !accountFile.eof(); i++)
{
    if (accountFile >> tempAccountType)
    {
        if (tempAccountType == "Checking")
        {
            accountFile >> tempAccountNum >> tempBalance >> tempTransFee;
            CheckingAccount tempAccount(tempBalance, tempAccountNum, tempTransFee);
            accounts[i] = &tempAccount;
        }
        else
        {
            accountFile >> tempAccountNum >> tempBalance >> tempIntRate;
            SavingsAccount tempAccount(tempBalance, tempAccountNum, tempIntRate);
            accounts[i] = &tempAccount;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:54:28.533

```
std::vector<std::unique_ptr<Account>> accounts;

while(accountFile >> tempAccountType)
{
    if(tempAccountType == "Checking")
    {
        accountFile >> tempAccountNum >> tempBalance >> tempTransFee;
        accounts.emplace_back(new CheckingAccount(tempBalance, tempAccountNum, tempTransFee));
    }
    else
    {
        accountFile >> tempAccountNum >> tempBalance >> tempIntRate;
        accounts.emplace_back(new SavingsAccount(tempBalance, tempAccountNum, tempIntRate));
    }
} 
```

1) 检查 !eof() 还不够好。我重组了循环

2) 使用向量

3) 使用智能指针（在本例中为 unique_ptr）

4) 不要存储指向本地范围对象的指针。你必须分配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T17:50:34.797

问题不在于您关闭文件时，问题在于您正在对本地对象进行引用，当本地对象超出 socope 时该对象被破坏

首先，我将帐户定义为智能指针的向量

```
std::vector< shared_ptr<Account> > 
```

然后每次读取文件时创建一个新文件

```
accounts.push_back( make_shared<SavingsAccount)(tempBalance, tempAccountNum, tempTransFee); 
```

只要向量存在，它就会存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T17:51:28.923

由于您的对象的范围，会发生此错误。您的 tempAccount 对象在超出其范围时将被销毁。尝试这个：

```
//some stuff
if (tempAccountType == "Checking")
{
    accountFile >> tempAccountNum >> tempBalance >> tempTransFee;
    CheckingAccount *tempAccount=new CheckingAccount(tempBalance, tempAccountNum, tempTransFee);
    accounts[i]=tempAccount;
}
else
{
    accountFile >> tempAccountNum >> tempBalance >> tempIntRate;
    SavingsAccount *tempAccount=new SavingsAccount(tempBalance, tempAccountNum, tempIntRate);
    accounts[i] = tempAccount;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T17:50:26.397

对象超出范围是因为它们是在 if 块中声明的。您通过引用保存它们，因此当它们超出范围时，引用变得无效。

尝试以下操作：

`accounts[i] = tempAccount;`

这将调用 for 的复制构造函数`CheckingAccount`，它将保存副本而不是引用。

# vhdl - how can i determine successive (logic'1') bits in a std_logic_vector

> ID：15908908
> 
> 赞同：1
> 
> 时间：2013-04-09T17:46:28.940
> 
> 标签：vhdl

i am pretty a new vhdl user and i am trying to solve a problem,which is difficult for me nowadays . I have two std_logic_vectors.First one has 5 bits,which must have (11111).Second one has 2040 bits,which is arbitral and i must divide up 2040 bits to 24 outputs that means each output must have 85 bits .First i must determine by using a small vector(5bits) the place of successive 5 bits(11111) in a std_logic_vector,which has 2040 bits.After determing if there are (11111) in a 2040bits vector ,the output should be '1' which is responsible 85 bits where there is (11111) .

to summarize

for example i have 24 outputs each control 85 bits of std_logic-vector(2040bits) if there is a 11111 in first 85 bits then output1 should be '1'
if there is a 11111 in 86 to 170 bits then output2 should be '1'
if there is a 11111 in 172 to 255 bits then output3 should be '1' so on...

(11111) is the minimum value .it can be bigger to make an output logic '1' Does someone have any idea about it??... and ((if 2040bits are massive then i can reduce the number of bits))

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T20:44:16.297

我怀疑您的意思是在第二个向量中搜索第一个向量，但是如果您知道它们都将是 '1'，那么 and_reduce 宏就可以很好地工作。否则用比较替换它。

一般原则是将其分成两个循环，外部用于每个输出结果，内部用于每个可能的 5 位组。该过程可以串行或并行完成，如下所示。

如果 81 to 86 = "11111" 将没有模式匹配，那么您描述问题的方式。如果应该返回 1，则需要稍微更改数组边界。

```
type slvArray is array (natural range <>) of standard_logic_vector;
subtype outputRange is natural range 0 to 23;
subtype partitionRange is natural range 0 to 84;

proc:process(clock)
    variable andResult : slvArray(outputRange)(partitionRange);
begin
    if rising_edge(clock) then
        for olc in outputRange loop
            for ilc in partitonRange'low to partitionRange'high-4 loop
               andResult(olc)(ilc) <= and_reduce(slv2(olc*partitionRange'length + ilc to olc*partitionRange'length+ ilc + 4);
            end loop;
            output(olc) <= or_reduce(andResult);
        end loop;
    end if;
end process; 
```

# c# - Accessing remote MQ server from MQ.NET

> ID：15908912
> 
> 赞同：0
> 
> 时间：2013-04-09T17:46:36.737
> 
> 标签：c#, websphere, ibm-mq, mq

How do i access the remote server of queue manager from my MQ.NET?

i.e. If the queue manager is IBM MQ 7x, i would like to enable auto reconnect, if not no auto reconnect. Like, is there any attribute to find the version # of MQ installed in the remote server?

if remote queue manager of remote server is 7x

```
var mqQMgr = new MQQueueManager("My queue Manager", MQC.MQCNO_RECONNECT_Q_MGR, "my channel name", "my connection name"); 
```

else

```
var mqQMgr = new MQQueueManager("My queue Manager", "my channel name", "my connection name"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:22:25.637

我认为在您建立连接之前不可能确定队列管理器的版本。有几个选择是：

1.  具有用户设置的参数以指定 MQ 的版本，如果版本大于或等于 7，则包含该`MQC.MQCNO_RECONNECT_Q_MGR`选项。
2.  连接到队列管理器，就好像它正在运行早期版本的 MQ，确定使用的队列管理器的版本，`mqQMgr.getCommandLevel()`然后如果它大于或等于 700，则断开连接并使用`MQC.MQCNO_RECONNECT_Q_MGR`选项重新连接到队列管理器。

# javascript - 如何进行对角网格布局？

> ID：15908915
> 
> 赞同：-1
> 
> 时间：2013-04-09T17:46:41.170
> 
> 标签：javascript, html, css

我想为项目库开发对角网格布局。我找到了一个有我需要的项目 - [http://neolab.no/](http://neolab.no/)。

这是我必须做的布局。 [http://felipefernandes.nu/beta/fsmohan/screenshot/Wireframe_Site_FSMohan-05.jpg](http://felipefernandes.nu/beta/fsmohan/screenshot/Wireframe_Site_FSMohan-05.jpg)

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:59:18.797

您有一些选择，但没有一个非常好：

*   切碎图像：这看起来不错，但是您的悬停会很困难，因为它们将基于矩形。
*   使用图像地图：您的悬停区域将能够正确排列，但效果会很困难。
*   CSS3 转换：如果您只能处理 IE9+，这可能是一个选项。您必须保存顺时针旋转的图像，然后通过 CSS 逆时针旋转它们（反之亦然）。这是[一个简单的例子](http://jsfiddle.net/Tbucy/)。
*   采用`<canvas>`
*   使用 Flash：老实说，这可能是您在功能和外观方面的最佳选择，但强迫您的网站依赖插件会带来很多问题。

# asp.net-mvc-4 - Parent Child Relationship in ASP.NET MVC 4

> ID：15908916
> 
> 赞同：1
> 
> 时间：2013-04-09T17:46:41.173
> 
> 标签：asp.net-mvc-4

I am trying to do this:

[Hibernate: Parent-Child Relationship to Itself](https://stackoverflow.com/questions/7607128/hibernate-parent-child-relationship-to-itself)

but in ASP.NET MVC 4

here are my 2 models (which i have no clue if this is the correct way to do this):

```
public class Group
{
    public int GroupID { get; set; }

    [Required]
    [StringLength(50)]
    public string Name { get; set; }

    public virtual ICollection<GroupRelation> GroupRelations { get; set; }
}

public class GroupRelation
{
    public int GroupRelationID { get; set; }

    public int? ParentID { get; set; }

    public int? ChildID { get; set; }

    [ForeignKey("ParentID")]
    public virtual Group ParentGroups { get; set; }

    [ForeignKey("ChildID")]
    public virtual Group ChildGroups { get; set; }
} 
```

Here is my Context(again no clue if this is right):

```
public class TaskTrackerContext : DbContext
{
    public DbSet<Group> Groups { get; set; }
    public DbSet<GroupRelation> GroupRelations { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<Group>()
            .HasMany(g => g.GroupRelations).WithOptional(g => g.ChildGroups).HasForeignKey(g => g.ChildID);
        modelBuilder.Entity<Group>()
            .HasMany(g => g.GroupRelations).WithOptional(g => g.ParentGroups).HasForeignKey(g => g.ParentID);

    }
} 
```

With this setup i get the following in my database:

(i tried to put in a pic or a link to a pic and it wont let me...)

So it makes the 2 relationships i am expecting "PK_GroupID - FK_ParentID" and "PK_GroupID - FK_ChildID", but then it creates an extra column called "Group_GroupID" and makes the following relationship: "PK_GroupID - FK_Group_GroupID".

So what am I doing wrong?

# qt - Need to draw Transparent qimage that includes drawing of a circle using Qt

> ID：15908918
> 
> 赞同：5
> 
> 时间：2013-04-09T17:46:50.030
> 
> 标签：qt, background, transparent, qimage, blackberry-cascades

I am trying to draw a transparent image using QImage but everytime it gives black background. I have a image background,on that I want to draw a circle which should be trasparent(with no background).How can I do that?

I have used this code

```
QImage image(size, QImage::Format_ARGB32);
    image.fill(qRgba(0,0,0,0));

// Pick an arbitrary size for the circle
const int centerX = size.width() / 2;
const int centerY = size.height() / 2;
const int radius = std::min(centerX, centerY) * 2 / 3;
const int diameter = radius * 2;

// Draw the circle!
QPainter painter(&image);
painter.setPen(Qt::yellow);
painter.drawEllipse(centerX-radius, centerY-radius, diameter, diameter); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T20:07:45.707

[http://qt-project.org/doc/qt-4.8/qpainter.html#settings](http://qt-project.org/doc/qt-4.8/qpainter.html#settings)

[http://qt-project.org/doc/qt-4.8/qpainter.html#setBrush](http://qt-project.org/doc/qt-4.8/qpainter.html#setBrush)

> 画家的画笔定义了如何填充形状。

希望有帮助。

编辑：添加了一个很棒的例子：

基本上下面发生的事情是将窗口设置为具有背景颜色（以便 alpha 值`QImage`是明显且可预测的）。被`QImage`初始化为具有小于 255 的 alpha 值的颜色。当小部件更新时（当显示在主窗口中时），图像被绘制。

小部件.cpp

```
#include "widget.h"
#include <QImage>
#include <QPainter>
#include <QPalette>

Widget::Widget(QWidget *parent)
    : QWidget(parent)
{
    init_image();

    QPalette p = this->palette();
    p.setColor(QPalette::Background, Qt::white);
    this->setPalette(p);
}

void Widget::init_image()
{
    image = new QImage(200, 200, QImage::Format_ARGB32);

    int opacity = 50;// Set this between 0 and 255
    image->fill(QColor(0,0,0,opacity));

    QPainter painter (image);
    painter.setPen(Qt::green);

    painter.drawEllipse(10, 10, 100, 100);
}

Widget::~Widget()
{

}

void Widget::paintEvent(QPaintEvent * e)
{
    QPainter painter(this);
    painter.drawImage(0,0, *image,0,0,-1,-1,Qt::AutoColor);
} 
```

小部件.h

```
#ifndef WIDGET_H
#define WIDGET_H

#include <QWidget>
#include <QPaintEvent>

class Widget : public QWidget
{
    Q_OBJECT

public:
    Widget(QWidget *parent = 0);
    ~Widget();
    void init_image();

public slots:
    void paintEvent(QPaintEvent *);
private:
    QImage * image;
};

#endif // WIDGET_H 
```

主文件

```
#include "widget.h"
#include <QApplication>

int main(int argc, char *argv[])
{
    QApplication a(argc, argv);
    Widget w;
    w.show();

    return a.exec();
} 
```

# firefox - header div disappears only in firefox (on mouseover)

> ID：15908919
> 
> 赞同：1
> 
> 时间：2013-04-09T17:46:52.573
> 
> 标签：firefox, header

I have a very odd glitch that only happens in firefox. The header div of my site will disappear from view only after the user has scrolled down the page and then moved the mouse on to the header nav. I have been searching for a couple of hours now on what piece of code I may be missing.

The site is not super dynamic as it does need to be so I don't think there is any Jquery/javascript with improperly formatted event listeners or anything. What I suspect the problem to be is something in the CSS code. I have done 3 different things for this site that I normally do not do. I used an absolutely positioned div, I used z-index and I constructed a CSS only nested menu structure in the nav.

While none of these things by themselves (except the ap div) is truly offensive in nature, I wonder if the combination of these 3 items is causing me a problem?

Here is the page structure for the header div and the governing CSS

```
 <div id="header">

        <div id="headwrap">

            <div id="logo">
                <img src="images/logo.png" height="35px" width="35px"/>                    
            </div>  <!-- end logo -->

            <div id="logotitle" class="ie">
                Cambridge Companies
            </div>  <!-- end logotitle -->

            <div class="headnav">

            <ul id="top-menu">
                <li><a href="?page=home"><span>Home</span></a></li>
                <li> <a href="#"><span>Company</span></a>
                    <ul class="sub-menu">
                        <li><a href="?page=company">Overview</a></li>
                        <li><a href="?page=mission">Our Mission</a></li>
                        <li><a href="?page=team">Meet the Team</a></li>
                    </ul>
                </li>
                <li> <a href="#"><span>Investments</span></a>
                    <ul class="sub-menu">
                        <li><a href="?page=completed">Completed</a></li>
                        <li><a href="http://www.cambridgecompanies.us/wordpress/">Opportunities</a></li>
                    </ul>
                </li>
                <li><a href="?page=investments"><span>Services</span></a></li>
                <li><a href="#"><span>Careers</span></a>
                    <ul class="sub-menu">
                        <li><a href="?page=vp">VP of Business Development</a></li>
                        <li><a href="?page=assistant">Assistant</a></li>
                        <li><a href="?page=intern">Intern</a></li>                          
                    </ul>
                </li>
                <li><a href="?page=contact"><span>Contact</span></a></li>
            </ul>

            </div>  <!-- end headnav -->

            <div id="address" align="right">
                <strong>1.888.615.6166</strong><br/>9075 W. Diablo Dr., Las Vegas, NV 89148
            </div>  <!-- end address -->

        </div>  <!-- end headwrap -->

    </div>  <!-- end header -->

#header{
position:absolute;
/*background-color:#F90;*/      /* position testing */
background:url(../images/navigation-background.png) repeat;
width:100%;
height:50px;
z-index:2;
}

#logo{
display:inline-block;
padding-top:6px;
margin-left:80px;   
}

#logotitle{
position:absolute;
/*background-color:#CC9900;*/   /* position testing */
display:inline-block;
color:#FFFFFF;
height:26px;
width:auto;
font-size:26px;
font-family:Arial, Helvetica, sans-serif;
margin-left:4px;
margin-top:10px;
}

.headnav{
/*background-color:#0099FF;*/   /* position testing */
display:inline-block;
/*margin-left:12px;*/
font-family:Arial, Helvetica, sans-serif;
font-size:14px;
letter-spacing:1pt;
height:10px;
padding-bottom:24px;
margin-left:280px;
}

.navitem{
display:inline-block;
color:#ccb38b;
}

.navitem a:link{color:#ccb38b;}
.navitem a:visited{color:#ccb38b;}
.navitem a:hover{color:#FFF;}
.navitem a:active{color:#ccb38b;}

#address{
/*background-color:#99FF33;*/   /* position testing */
display:inline-block;
float:right;
margin-right:80px;
margin-top:9px;
font-family:Arial, Helvetica, sans-serif;
font-size:14px;
color:#ccb38b;

}

#top-menu {
display:block;
float:left;
list-style:none;
margin:0;
padding:0;
}

#top-menu > li {
float:left;
display:block;
height:52px;
}

#top-menu > li > a {
color:#ccb38b;
font-size:12px;
text-decoration:none;
display:block;
}

#top-menu  > li > a > span {
border-left:1px solid #ccb38b;
display:inline-block;
padding:0 12px;
height:12px;
margin:12px 0;
}

#top-menu > li:first-child > a > span {
border-left:0;
}

#top-menu > li:hover > a > span {
color:#fff;
text-decoration:none;
}

#top-menu li:hover .sub-menu {
display:block;
}

#top-menu .sub-menu {
position:absolute;
width:210px;
background:transparent url(../images/navigation-background.png) repeat;
list-style:none;
padding:0;
display:none;
margin:0;
margin-top:7px;
}

#top-menu .sub-menu a {
display:block;
padding:10px;
color:#ccb38b;
font-size:12px;
text-decoration:none;
}

#top-menu .sub-menu a:hover {
text-decoration:none;
color:#fff;
} 
```

Any help, suggestions, comments on cleaning up my code or general thoughts are appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T04:37:17.483

！更新！——我已经解决了这个问题。起初我认为它是 z-index，然而，改变它只会让事情变得更糟。问题是#header 元素上的定位。由于我将其定位为“绝对”，因此它被渲染为错误的。解决方法是将其更改为以下内容：

```
#header{
    position:fixed; /* note that this changed to fixed instead of absolute */
    /*background-color:#F90;*/      /* position testing */
    background:url(../images/navigation-background.png) repeat;
    width:100%;
    height:50px;
    z-index:2;
 } 
```

一旦我改变了定位，标题按设计运行。无论滚动如何，它都很好地粘在窗口顶部，并且不会像以前报道的那样在 Firefox 中消失。

我觉得我很愚蠢，我没有早点想到这个，但是嘿，你就是这样学习的对吧？

我希望这可以帮助其他有同样问题的人。

# css - disable IE specific gradient properties in less

> ID：15908921
> 
> 赞同：2
> 
> 时间：2013-04-09T17:46:59.220
> 
> 标签：css, internet-explorer, less

While using, [.gradient in less](http://lesshat.com/#gradient), I've tried the "false" toogle within lesshat.less under:

```
 // Config supported browsers for your project
    @ms: false;  // IE 10+ 
```

but I still get the SVG gradient.

Any ideas? Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:53:24.210

实际上，必须在 .gradient 指令下进行更改：

> 。坡度（...）{
> 
> ```
>  //  Local config for disabling properties
> 
>   @svg: false; //  SVG gradient for IE9 
> ```

# c# - Convert the contents of a byte array to string

> ID：15908923
> 
> 赞同：2
> 
> 时间：2013-04-09T17:47:01.173
> 
> 标签：c#, jquery, asp.net, bytearray, stringbuilder

I have a byte array that contains the data of an uploaded file which happens to be a Resume of an employee(.doc file). I did it with the help of the following lines of code

```
 AppSettingsReader rd = new AppSettingsReader();

    FileUpload arr = (FileUpload)upresume;
    Byte[] arrByte = null;
    if (arr.HasFile && arr.PostedFile != null)
    {
        //To create a PostedFile
        HttpPostedFile File = upresume.PostedFile;
        //Create byte Array with file len
        arrByte = new Byte[File.ContentLength];
        //force the control to load data in array
        File.InputStream.Read(arrByte, 0, File.ContentLength);
    } 
```

Now, I would like to get the contents of the uploaded file(resume) in string format either from the byte array or any other methods. PS: 'contents' literally refers to the contents of the resume; for example if the resume(uploaded file) contains a word 'programming', I would like to have the same word contained in the string. Please help me to solve this.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:43:28.003

几年前我做过一个类似的项目。长话短说...我最终重建了文件并将其保存在服务器上，然后以编程方式将其转换为 pdf，然后索引 pdf 的内容，这在当时的实践中证明要容易得多。

或者，如果您可以将简历上传限制为 docx 文件格式，则可以使用 Microsoft 的 OpenXML 库非常轻松地解析和索引内容。但在实践中，这可能会导致网站用户的可用性问题。

# php - 显示每 10 个结果 Drupal 7 视图

> ID：15908926
> 
> 赞同：0
> 
> 时间：2013-04-09T17:47:17.120
> 
> 标签：php, drupal-7, highcharts, drupal-views

我有 Drupal 7 视图。它包含要在图表上显示的 2249 个结果。我正在使用 highcharts 模块来显示该数据。我已经使用全局数学表达式字段创建了整数数据的运行总计。我想在图表上保留表达式的总数，但限制结果的数量，因为它们相互重叠，看起来真的很糟糕。

我正在使用聚合来组合相似的日期，但此时日期粒度似乎不适用于视图中的日期模块。

有没有一种方法可以查看 php 过滤器并使用一些 php 来进行数学运算，这样它就可以工作了？

我有一个 Global:PHP 过滤器，里面有这个，但它没有做任何正确的事情，也许有人有提示让它正常工作 -

```
if( $row->id % 10 == 0 ) return TRUE; 
```

谢谢

# xml - xsd 验证 xml 可选子元素

> ID：15908930
> 
> 赞同：0
> 
> 时间：2013-04-09T17:47:27.517
> 
> 标签：xml, validation, xsd

我一直在尝试构建一个 XSD 文件来验证一些 xml

*XSD 示例*

```
<xs:element name="person" type="persontype"/>
<xs:complexType name="persontype">
  <xs:sequence>
    <xs:element name="firstname" type="xs:string"/>
    <xs:element name="lastname" type="xs:string"/>
  </xs:sequence>
</xs:complexType> 
```

*XML 示例*

```
<persontype>
  <firstname/>
  <lastname/>
</persontype> 
```

我如何构造 xsd 以要求“名字”是强制性的，而“姓氏”甚至不是 xml 有效所必需的，而且只要层次结构是，序列不必按顺序排列尊重？

可能遇到的 XML 的最终结果，我希望根据我的最终 xsd 将其视为有效。

**有效场景 1**

```
<persontype>
  <firstname/>
</persontype> 
```

**有效场景 2**

```
<persontype>
  <lastname/>
  <firstname/>
</persontype> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:02:02.677

我已经从[关于指标的 XML Schema 教程中](http://www.w3schools.com/schema/schema_complex_indicators.asp)改编了这个：

```
<xs:element name="person">
  <xs:complexType>
    <xs:all>
      <xs:element name="firstname" type="xs:string"/>
      <xs:element name="lastname" type="xs:string" minOccurs="0"/>
    </xs:all>
  </xs:complexType>
</xs:element> 
```

如果您使用`all`指标，您的元素的顺序可以是任意的，但默认情况下，每个元素必须恰好出现一次。要使姓氏可选，您可以通过提供`minOccurs`指示符并将其设置为零来更改默认值。

这将允许您有选择地为每个人指定一个姓氏，具有任何元素顺序。

# iphone - 使用 iPod 库中的音乐录制视频

> ID：15908932
> 
> 赞同：1
> 
> 时间：2013-04-09T17:47:28.143
> 
> 标签：iphone, avfoundation, avassetwriter, mpmediapickercontroller, avassetreader

我正在尝试使用 AVFoundation (AVCaptureOutput + AVAssetWriter) 录制视频，同时从 iPod 库而不是麦克风播放音频。我采用了 RosyWriter 示例代码并删除了 AudioInput，而是设置 AVAssetReader 以读取未压缩格式的歌曲，

```
NSDictionary *outputSettings = [NSDictionary dictionaryWithObjectsAndKeys:
                                    [NSNumber numberWithInt:kAudioFormatLinearPCM], AVFormatIDKey,
                                    [NSNumber numberWithFloat:44100.0], AVSampleRateKey,
                                    [NSNumber numberWithInt:16], AVLinearPCMBitDepthKey,
                                    [NSNumber numberWithBool:NO], AVLinearPCMIsNonInterleaved,
                                    [NSNumber numberWithBool:NO], AVLinearPCMIsFloatKey,
                                    [NSNumber numberWithBool:NO], AVLinearPCMIsBigEndianKey,
                                    nil];

    mAssetReader = [[AVAssetReader alloc] initWithAsset:mAsset error:nil];
    mAssetReaderOutput = [[AVAssetReaderTrackOutput alloc] initWithTrack:audioTrack outputSettings:outputSettings];

    if ([mAssetReader canAddOutput:mAssetReaderOutput]) {
        [mAssetReader addOutput:mAssetReaderOutput];
    } 

    [mAssetReader startReading]; 
```

然后定期轮询音频样本。但它不能正常工作。关于 VideoStar 或 Blux Movie 等应用程序如何实现它的任何建议？

# java - 保存应用数据？

> ID：15908935
> 
> 赞同：1
> 
> 时间：2013-04-09T17:47:36.553
> 
> 标签：java, android

在我的应用程序中，它会保存数据，例如，当点击某物时，它会计算点击次数，但是当您卸载应用程序时，它会删除数据！

我想通过创建一个设置菜单来解决这个问题，用户可以将他们当前的计数保存到一个文件中，该文件可以保存到手机中，然后如果他们要从头开始重置手机则加载？

我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:18:53.033

当您删除应用程序时，如果您使用与您的应用程序相关的外部存储，所有应用程序数据都将被删除（外部、内部、共享首选项）。

例如，外部存储的路径是：

（API 8+）：getExternalFilesDir()

（API 7-）：getExternalStorageDirectory()

如果你想持久化数据，你可能想写在一个可共享的外部

（API 8+）：getExternalStoragePublicDirectory()

（API 7-）：getExternalStorageDirectory()

**音乐/** - 媒体扫描仪将此处找到的所有媒体分类为用户音乐。

**Podcasts/** - 媒体扫描仪将此处找到的所有媒体分类为播客。

**铃声/** - 媒体扫描仪将此处找到的所有媒体分类为铃声。

**警报/** - 媒体扫描仪将此处找到的所有媒体分类为警报声音。

**Notifications/** - 媒体扫描器将此处找到的所有媒体分类为通知声音。

**图片/** - 所有照片（不包括用相机拍摄的照片）。

**电影/** - 所有电影（不包括用摄像机拍摄的电影）。

**下载/** - 其他下载。

在[开发人员中解释](http://developer.android.com/guide/topics/data/data-storage.html#filesExternal)

我记得，在您的应用程序卸载后共享路径不会被删除，但不好的是其他应用程序可以访问它。

顺便说一句，外部只是一个示例，您可能想要使用内部存储，因为并非所有手机都有 SD 卡。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T18:47:16.043

或者，也许您可​​以将您的数据存储在 Google 的“云”上。每次用户更改值时，您都可以调用“备份代理”将您需要的所有内容存储在 Google 服务器上。因此，如果用户卸载该应用程序并再次安装，您的“备份代理”将再次调用存储在云中的数据并恢复您想要的值。为此，您的应用程序必须相同并使用相同的密钥签名。使用此服务时，不同的密钥（例如发布和调试密钥）是不同的应用程序。

有关备份服务的更多信息，请访问[http://developer.android.com/guide/topics/data/backup.html](http://developer.android.com/guide/topics/data/backup.html)和代码示例，请访问[http://developer.android.com/training/cloudsync/backupapi.html](http://developer.android.com/training/cloudsync/backupapi.html)

你只需要修改你的 AndroidManifest`android:backupAgent`和一个实现`BackupAgent`接口的类`onBackup`和`onRestore`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T17:49:47.967

将您的数据保存到 SD 卡，以防止卸载时删除数据。或将其存储在远程服务器上。

# mysql - 可能有多个时的 MySQL 索引

> ID：15908944
> 
> 赞同：1
> 
> 时间：2013-04-09T17:47:51.600
> 
> 标签：mysql, indexing

鉴于以下 -

```
drop table if exists learning_indexes;

create table learning_indexes (
    id INT NOT NULL,
    col1 CHAR(30),
    col2 CHAR(30),
    col3 CHAR(30), 
    PRIMARY KEY (id),
    index idx_col1 (col1),
    index idx_col1_col2 (col1,col2)
);

explain

select
    col1,col2
from
    learning_indexes
where
    col1 = 'FOO'
    and col2 = 'BAR' 
```

为什么 MySQL 选择 idx_col1 而不是 idx_col1_col2？

```
+----+-------------+------------------+------+------------------------+----------+---------+-------+------+-------------+
| id | select_type | table            | type | possible_keys          | key      | key_len | ref   | rows | Extra       |
+----+-------------+------------------+------+------------------------+----------+---------+-------+------+-------------+
|  1 | SIMPLE      | learning_indexes | ref  | idx_col1,idx_col1_col2 | idx_col1 | 91      | const |    1 | Using where |
+----+-------------+------------------+------+------------------------+----------+---------+-------+------+-------------+ 
```

这是我的版本信息 -

```
+-------------------------+---------------------+
| Variable_name           | Value               |
+-------------------------+---------------------+
| innodb_version          | 1.1.8               |
| protocol_version        | 10                  |
| slave_type_conversions  |                     |
| version                 | 5.5.29              |
| version_comment         | Source distribution |
| version_compile_machine | i386                |
| version_compile_os      | osx10.7             |
+-------------------------+---------------------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:04:41.323

我无法在这里解释你的情况，但有时 MySQL 只是选择了“错误”的索引。也许数据库足够小，以至于它知道在这种情况下它没有任何区别。

这个查询非常简单，它应该知道哪个索引是最合适的。

我可以根据经验说，当查询变得越来越复杂，特别是当表变得非常大时，MySQL 有时（随机？）决定选择另一个索引并使用它，然后查询可以从 0.01 秒到 100+ 秒，因此，如果您知道哪个索引是正确的，请使用 FORCE INDEX()。即使你使用 USE INDEX() MySQL 有时会选择另一个索引，对查询速度有各种破坏性的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:29:51.683

我同意 Floaf 的观点，即 MySQL 有时会选择错误的索引，但我认为这里不是这种情况。MySQL 将行数和数据结构包括在其决定选择哪个索引中。

对于像这样一个相当简单的查询，如果表包含少于大约 100 行甚至是空的，MySQL 可能根本不会使用任何索引。仅扫描所有表行似乎比使用索引在计算上更便宜。在您的解释计划中，您可以看到“key”列显示 idx_col1，但“Extra”列没有显示“使用索引”。

如果表包含超过 100 行，MySQL 将开始使用 idx_col1。解释计划将向您展示这一点。只有当 col1 中实际包含字符串 'FOO' 的行超过大约 100 行时，MySQL 才会注意到使用 idx_col1 并不能充分减少暂定结果集，因为它必须扫描剩余的 100 行以查找值 '在 col2 中的 BAR'。因此，它将切换到 idx_col1_col2。

我不完全确定 MySQL 如何快速决定使用哪个索引，但我认为这与启发式和索引中各个行的基数有关，即索引行的“选择性”程度。

# mysql - 在 MySQL 中存储 URL 的最有效方法是什么？

> ID：15908946
> 
> 赞同：0
> 
> 时间：2013-04-09T17:47:55.473
> 
> 标签：mysql, space, varchar

这实际上不是一个编码问题，但我想学习一些东西。

我正在尝试为数据库中的项目保存图片 URL。起初，我创建了 type 的 *img_url* 列`TEXT`，但事实证明它不能有我需要的默认值。

所以我想我会使用类似的东西`VARCHAR(2000)`，但另一方面，大多数项目将具有值“local”，即 varchar(5)。所以我想了解的是，即使大多数单元格包含 5 个字符的字符串，表格是否会像所有行都有 2000 个字符的字符串一样使用内存空间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T17:51:03.443

查看有关[存储要求](http://dev.mysql.com/doc/refman/5.5/en/storage-requirements.html)的 MySQL 文档。

正如您将看到的，存储值的成本不在 VARCHAR(length) 中，而是与它存储的数据直接相关，并带有一些开销。

> VARCHAR(M), VARBINARY(M) 如果列值需要 0 – 255 个字节，则 L + 1 个字节，如果值可能需要超过 255 个字节，则 L + 2 个字节

因此 value`local`将占用 6 个字节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T17:49:04.533

不，这就是`VAR`in所`VARCHAR`表示的。

请参阅[VARCHAR 的文档](http://dev.mysql.com/doc/refman/5.0/en/char.html)，尤其是有关存储使用情况的表。

# ruby-on-rails - Rails 3中的PDF生成器

> ID：15908957
> 
> 赞同：0
> 
> 时间：2013-04-09T17:48:29.250
> 
> 标签：ruby-on-rails

我在产品控制器索引方法中有这段代码：

```
 def index

    @products = Product.all

    respond_to do |format|
      format.html
      format.pdf do
        pdf = PDF::Writer.new
        @products.each do |product|
          pdf.text product.name 
        end        
        send_data pdf.render, :filename => 'products.pdf', :type => 'application/pdf', :disposition => 'inline'
      end
    end   
  end 
```

在 environment.rb 文件中

```
require 'pdf/writer'

Mime::Type.register 'application/pdf', :pdf 
```

运行程序时出现错误

> “笔”的未定义方法“每个”：字符串

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T18:56:27.913

啊哈。根据[PDF::Writer 的主页](http://ruby-pdf.rubyforge.org/pdf-writer/index.html)，“PDF::WRITER 已于 2010 年 4 月 15 日停产。请使用其精神继承者，PRAWN。”

我个人很高兴使用 prawn 生成 PDF。但是要直接回答您的问题，我的猜测是您可能正在使用 ruby​​ 1.9.x，它稍微改变了 String API，而 PDF::Writer 用于 ruby​​ 1.8.7。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-25T20:36:19.737

使用 metaskills-pdf-writer gem。发生此错误是因为 Ruby 1.8 上的每个字符串方法在 1.9 版中已更改。所以这不再适用于新版本的 ruby​​。我提到的这个宝石将解决这个问题。

# php - 根据组合框选择显示结果

> ID：15908958
> 
> 赞同：0
> 
> 时间：2013-04-09T17:48:31.787
> 
> 标签：php

我有一个动态组合框，我有我的 Fetch 按钮。当用户从组合框中选择一个值并单击获取按钮时，所有其他相关值都显示在一个文本框中，供用户编辑和更新记录。这很好用。

```
<form id="form1" method="post" action="edit.php">   
  <select name="ID" id="select">
     <?php display_Id();?>
  </select> 
  <input type="submit" name="Fetch" id="Fetch" value="Fetch" />
</form>

function display_Id() {
    $query = "SELECT * FROM Flight";

    $result = mysql_query($query) or die("Failed to fetch records");
    confirm_query($result);

    while($rows = mysql_fetch_array($result)) {
        $flightNum = $rows['FlightNo'];
        echo "<option value=\"$flightNum\" ";
        echo " selected";
        echo "> $flightNum </option>";
    }       
} 
```

问题出在 Fetch 按钮上。当用户单击 Fetch 时，其他值正在显示，但组合框中的选定值正在刷新。即使按下 Fetch 按钮，如何使值保持选中状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T17:57:15.853

从某种意义上说，您的问题是不完整的，因为您没有在 `dislay_Id()`此处显示您的代码。但是，一般来说，您应该 以编程方式添加`selected`之后，`<option value="something"`

代码应该是这样的：

```
function displayId(){
  if($value[x]== $currentValue) {
    echo "<option value='$value[x]' selected>sth</option>";
  } 
  else
  {
    echo "<option value='$value[x]'>sth</option>";
  }
} 
```

编辑：：您的代码为每个值添加了“选定”，您只能将“选定”添加到当前值。

因此，您的代码必须如下所示：

```
echo "<option value=\"$flightNum\" ";

if($_POST['ID'] == $flightNum)
{        
  echo " selected";
}
echo "> $flightNum </option>"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:01:00.517

```
while($rows = mysql_fetch_array($result))
{
    $flightNum = $rows['FlightNo'];
    echo "<option value=\"$flightNum\" ";
    if($_POST['ID'] == $flightNum)
    {
        echo " selected";
    }
    echo "> $flightNum </option>";
} 
```

# gcc - 带有 Eclipse 的 GNU blackfin 工具链所需的教程

> ID：15908959
> 
> 赞同：0
> 
> 时间：2013-04-09T17:48:32.820
> 
> 标签：gcc, eclipse-cdt, gnu-toolchain

任何人都知道在 Windows 上使用 GNU blackfin 工具链和 Eclipse 的好教程吗？

我正在尝试在 blackfin 上开发裸机应用程序，并且我已经安装了工具链和 eclipse C/C++ Juno，但我无法编译。目前我得到了**make：***没有规则使目标“全部”**错误，但我发现自己迷失了许多其他事情。

提前谢谢了，

哈桑。

编辑：我已经阅读了一些关于“make”程序的信息，并决定启动一个单文件测试项目来学习命令行工具链（没有 eclipse 环境）。这是我的 main.c 和相关的 makeFile：

```
//main.c
#include <stdio.h>
int main(void)
{
    volatile int x = 42;
    printf("%i\n", x);
    return 0;
} 
```

* * *

```
#makeFile

CPU = bf533-any
CROSS_COMPILE = bfin-elf-
CC = $(CROSS_COMPILE)gcc
LD = $(CROSS_COMPILE)gcc

CFLAGS = -c -Wall

bfin_test: main.o
    $(LD) main.o -mcpu=$(CPU) -o $@

main.o: main.c
    $(CC) $(CFLAGS) main.c -mcpu=$(CPU) -o $@ 
```

* * *

下面是在 cmd 控制台上运行 make 命令的结果：

```
D:\work\experiments\bfin_test_project>dir
 Volume in drive D is Data
 Volume Serial Number is 248D-2C8D

 Directory of D:\work\experiments\bfin_test_project

14/04/2013  12:30    <DIR>          .
14/04/2013  12:30    <DIR>          ..
11/04/2013  13:30               102 main.c
14/04/2013  12:29               257 makeFile
14/04/2013  12:29               264 makeFile~
               3 File(s)            623 bytes
               2 Dir(s)  634,582,650,880 bytes free

D:\work\experiments\bfin_test_project>make
bfin-elf-gcc -c -Wall main.c -mcpu=bf533-any -o main.o
bfin-elf-gcc main.o -mcpu=bf533-any -o bfin_test
c:/program files (x86)/analog devices/gnu toolchain/2012r2/elf/bin/../lib/gcc/bf
in-elf/4.3.5/../../../../bfin-elf/lib\libc.a(lib_a-closer.o): In function `close
_r':
/usr/src/packages/BUILD/blackfin-toolchain-2012R2/gcc-4.3/newlib/libc/reent/clos
er.c:53: warning: _close is not implemented and will always fail
c:/program files (x86)/analog devices/gnu toolchain/2012r2/elf/bin/../lib/gcc/bf
in-elf/4.3.5/../../../../bfin-elf/lib\libc.a(lib_a-fstatr.o): In function `fstat
_r':
/usr/src/packages/BUILD/blackfin-toolchain-2012R2/gcc-4.3/newlib/libc/reent/fsta
tr.c:62: warning: _fstat is not implemented and will always fail
c:/program files (x86)/analog devices/gnu toolchain/2012r2/elf/bin/../lib/gcc/bf
in-elf/4.3.5/../../../../bfin-elf/lib\libc.a(lib_a-isattyr.o): In function `isat
ty_r':
/usr/src/packages/BUILD/blackfin-toolchain-2012R2/gcc-4.3/newlib/libc/reent/isat
tyr.c:58: warning: _isatty is not implemented and will always fail
c:/program files (x86)/analog devices/gnu toolchain/2012r2/elf/bin/../lib/gcc/bf
in-elf/4.3.5/../../../../bfin-elf/lib\libc.a(lib_a-lseekr.o): In function `lseek
_r':
/usr/src/packages/BUILD/blackfin-toolchain-2012R2/gcc-4.3/newlib/libc/reent/lsee
kr.c:58: warning: _lseek is not implemented and will always fail
c:/program files (x86)/analog devices/gnu toolchain/2012r2/elf/bin/../lib/gcc/bf
in-elf/4.3.5/../../../../bfin-elf/lib\libc.a(lib_a-readr.o): In function `read_r
':
/usr/src/packages/BUILD/blackfin-toolchain-2012R2/gcc-4.3/newlib/libc/reent/read
r.c:58: warning: _read is not implemented and will always fail
c:/program files (x86)/analog devices/gnu toolchain/2012r2/elf/bin/../lib/gcc/bf
in-elf/4.3.5/../../../../bfin-elf/lib\libc.a(lib_a-writer.o): In function `write
_r':
/usr/src/packages/BUILD/blackfin-toolchain-2012R2/gcc-4.3/newlib/libc/reent/writ
er.c:58: warning: _write is not implemented and will always fail 
```

这产生了 .o 和（据说）elf 文件。这是尝试使用工具链模拟器运行 elf 文件的结果：

```
D:\work\experiments\bfin_test_project>bfin-elf-run bfin_test
program stopped with signal 11 (Segmentation fault). 
```

根据[http://docs.blackfin.uclinux.org/doku.php?id=toolchain:sim](http://docs.blackfin.uclinux.org/doku.php?id=toolchain%3asim)，这应该是在虚拟模式下运行模拟器。（不确定我是否应该提供其他文件）

另外我不确定输出文件（bfin_test）是否实际上是一个elf文件，或者它是否可以使用模拟器（bfin-elf-run）运行。但如果是这样，我想知道为什么我会遇到这样一个看似简单的程序的分段错误。有人知道吗？请注意，将 main 更改为仅包含“return 0;”时，我得到了同样的错误。

有人可以告诉我哪里出错了。

再次感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T18:31:07.753

哈桑，

看看这些链接。他们可能会提供一些帮助。

[https://docs.blackfin.uclinux.org/doku.php?id=toolchain:bare_metal :编译](https://docs.blackfin.uclinux.org/doku.php?id=toolchain:bare_metal:compile) [https://docs.blackfin.uclinux.org/doku.php?id=toolchain:bare_metal:link](https://docs.blackfin.uclinux.org/doku.php?id=toolchain:bare_metal:link)

让 GNU 工具链为 Blackfin 流动是一场真正的斗争，但是一旦你把它的工作做得很好。

吉姆

# jquery - 滚动到位置时将 div 位置设置为固定 - jQuery

> ID：15908968
> 
> 赞同：4
> 
> 时间：2013-04-09T17:48:44.877
> 
> 标签：jquery, html, scroll, position, css-position

我正在使用包含三个垂直对齐的滑块的右侧边栏。当我向下滚动到 200 像素时，我希望固定侧边栏的位置。到目前为止，这是我的代码：

```
$(document).ready(function() {
    window.onscroll = function() {
        if (window.pageYOffset >= 200){
            $('.col-right').css({position: 'fixed', right: '490px'});
        }
    }
} 
```

当我使用这段代码时没有任何反应。它检测到我正在滚动，但它没有将 CSS 属性设置为“col-right”类，即侧边栏。我这样做对吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T22:50:12.547

好的，我想通了。我改为`$`并且`jQuery`一切正常。这是我的工作解决方案：

```
jQuery(document).ready(function(){
    window.onscroll = function() {
        if (window.pageYOffset >= 200){
            jQuery('.col-right').css({position: 'fixed', right: '490px', top: '40px'});
        }
        else {
            jQuery('.col-right').css({position: '', right: '', top: ''});
        }
    }
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T17:50:06.810

代替：

```
.css({position: fixed, right: 490px}); 
```

和

```
.css({position: 'fixed', right: '490px'}); 
```

字符串应该被引用！

# ruby - 从 .each 块访问对象的参数？

> ID：15908970
> 
> 赞同：0
> 
> 时间：2013-04-09T17:48:47.700
> 
> 标签：ruby, ruby-on-rails-3

我已经对此进行了广泛的搜索（也许我搜索错了），但我似乎找不到任何答案。我的目标是遍历数据库中的一堆评论并将信息输出到我的视图中。不幸的是，我的`.each do`块似乎没有工作。

**模型/comment.rb**

```
class Comment < ActiveRecord::Base
  attr_accessible :content, :photo_id, :user_id
  belongs_to :user
  belongs_to :photo 
```

.

**控制器/photos_controller.rb**

```
def show
  @photos = Photo.all
  @photo = Photo.find(params[:id])
  @user_likes = user_likes(@photo.id)
  @comments = Comment.find_all_by_photo_id(@photo.id) 
```

.

**意见/照片/show.html.erb**

```
 <% if !@comments.blank? %>
    <% @comments.each do |c| %>
      <%= link_to c.user.name, c.user_id %><br />
      <%= c.content %>
    <% end %>
  <% end %> 
```

.

如果我使用`@comments.each do |c|, c.(anything)`，它不会返回任何内容。我也在 Rails 控制台中验证了这一点。但是，`@comments.first.content`或者`@comments.first.user.name`将返回我正在寻找的内容。为什么`.first`允许我返回**内容**和**用户**字段，但`.each do |c|`什么也不返回？

这是 rails 控制台的输出：

```
1.9.3-p385 :072 > @comments.each do |c|
1.9.3-p385 :073 >     c.content
1.9.3-p385 :074?>   end
 => [#<Comment id: 1, user_id: 8, photo_id: 27, content: "lalala", created_at: "2013-04-09 15:36:22", updated_at: "2013-04-09 15:36:22">, #<Comment id: 2, user_id: 8, photo_id: 27, content: "abcd", created_at: "2013-04-09 15:42:00", updated_at: "2013-04-09 15:42:00">, #<Comment id: 3, user_id: 8, photo_id: 27, content: "abadsf", created_at: "2013-04-09 15:58:33", updated_at: "2013-04-09 15:58:33">, #<Comment id: 4, user_id: 8, photo_id: 27, content: "asdf", created_at: "2013-04-09 15:59:12", updated_at: "2013-04-09 15:59:12">] 

1.9.3-p385 :075 > @comments.first.content
 => "lalala" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:06:27.270

您从控制台发布的输出是正常的：

*   您正在迭代每个评论（以便`c`块中的变量包含评论）
*   然后你只是调用该`content`实例上的属性而不做任何事情

所以输出是变量的内容`@comments`。现在，如果你打电话`puts c.content`，你会得到你所期望的。

评论：

1.  如果您使用的是 Rails 3（如该问题的标签所述），则不应使用`find_by_all_`帮助程序，而是使用`where()`方法（您应该看看这个**免费**的railscast：[http: //railscasts.com/episodes/202- active-record-queries-in-rails-3](http://railscasts.com/episodes/202-active-record-queries-in-rails-3)）。

2.  您应该使用 Rails 关系，以便`Comment.find_all_by_photo_id(@photo.id)`您可以做而不是做`@photo.comments`. 然后你可以在你的视图中使用它：

```
<% if @photo.comments.present? %>
  <% @photo.comments.each do |comment| %>
    <%= link_to comment.user.name, comment.user_id %><br />
    <%= comment.content %>
  <% end %>
<% end %> 
```

# c# - 更新查询不适用于日期字段

> ID：15908977
> 
> 赞同：0
> 
> 时间：2013-04-09T17:48:59.383
> 
> 标签：c#, ms-access, oledb

`string date= DateTime.Now.ToString("d.M.yyyy",System.Globalization.DateTimeFormatInfo.InvariantInfo);`

```
String MyString = @"UPDATE cas SET Odhod= '" + label1.Text + "' 
WHERE sifra = " + textBox1.Text + " and Datum = "+date+""; 
```

当我在没有`Datum`（德语为“日期”）的情况下进行此更新时，它可以工作，但`Datum`如果它不起作用。我已连接到 Accesss 数据库，并且表字段的类型`Datum`是`Date/Time`.

**这是程序：** [https:](https://www.dropbox.com/s/hx4zduvul8mh2uy/8.4.zip)
**//www.dropbox.com/s/hx4zduvul8mh2uy/8.4.zip 问题图片： http:** [//img43.imageshack.us/img43/5189/errorbh.jpg](http://img43.imageshack.us/img43/5189/errorbh.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T18:10:29.780

缺少一些撇号？

```
String MyString = @"UPDATE cas SET Odhod= '" + label1.Text + "' 
WHERE sifra = " + textBox1.Text + " and Datum = '"+date+"'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T18:30:41.070

使用参数化查询。您不必担心日期格式，它会使您的查询 SQL 注入安全。

```
string fileName = @"C:\mydb.accdb";
string query = "UPDATE cas SET Odhod = ? WHERE sifra = ? AND Datum = ?";

using (OleDbConnection conn = new OleDbConnection(
       "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" + fileName)) {

    OleDbCommand cmd = new OleDbCommand(query, conn);

    cmd.Parameters.AddWithValue("?", label1.Text);
    cmd.Parameters.AddWithValue("?", textBox1.Text);
    cmd.Parameters.AddWithValue("?", date);

    conn.Open();
    cmd.ExecuteNonQuery();
} 
```

# c# - 使用 ASP.Net，在这种情况下最好使用什么控件？

> ID：15908978
> 
> 赞同：2
> 
> 时间：2013-04-09T17:49:00.870
> 
> 标签：c#, asp.net, linq, webforms

我正在编写一个让用户输入关键字的小程序。然后程序搜索数据库表并找到所有符合用户搜索条件的记录（使用 LINQ）。

返回的结果记录将以图像的形式显示在屏幕上（很像 Google 的图像搜索页面）。然后，用户将能够单击任何返回的图像并被带到一个页面，其中包含有关该图像的更多详细信息。

我的问题是，用于显示用户初始搜索结果的图像的最佳控件是什么？这是一个 ASP.Net 程序。在网格视图中显示图像会更好吗？还是列表视图？或者建立一个表格并用图像按钮填充每个单元格？我以前从未这样做过，所以我基本上只是想知道如何呈现数据。

我不是在寻找代码，但我很想听听你会如何处理这个问题。

谢谢！

编辑：

我应该补充一点，所有图像的大小都相同，我想我会返回所有图像并让用户向下滚动页面。实际上，我认为不会有超过 50 张图片供用户选择。我设想在返回的每行结果中有五个图像，如下图所示： ![网格样机](https://i.stack.imgur.com/vp3dn.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T18:01:03.413

我一直很喜欢通过尽可能使用中继器来保持简单。您可以更好地控制为自己的 HTML 编写的内容。

由于您使用的是图像，并且我假设它们的大小不同，因此我会让 Itemtemplate 包含一个带有锚点的 div 和内部的 img。在图像上设置一个最大宽度并隐藏 div 上的溢出，这样图像就不会看起来皱巴巴的。

只需设置从过滤器返回的数据源属性，调用 databind() 就可以了。

这就是我处理这种情况的方式。我也有兴趣听取其他人的比较。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T17:56:05.417

我会选择可靠的[中继器](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.repeater.aspx)控制。这使您可以灵活地为任何集合呈现您想要的任何内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T18:16:29.473

我将创建一个构建动态[表控件的控件](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.table.aspx)。你可以有一个`List<string>`保存每张图片的网址。我将公开一个名为的公共方法`AddImage(string imageUrl)`，该方法会将 url 添加到`List<string>`集合中。

准备好呈现页面后，我会将您拥有的图像数量除以 5（这将为您提供所需的行数），然后只呈现表格。另外，在渲染之前，你可以使用 LINQ 来获取渲染之前的数据（例如，排序）

# spring - 使用 Spring REST API 上传文件

> ID：15908983
> 
> 赞同：0
> 
> 时间：2013-04-09T17:49:13.937
> 
> 标签：spring, rest, file-upload

我有这样的控制器，我正在使用 POSTMAN REST 客户端上传 pdf 文件。设置内容类型：multipart/form-data;boundary=randomBoundaryNotInAnyOfParts 它正在创建文件但没有在其中写入任何内容。我在这里错过了什么吗？

```
@RequestMapping(value = "/uploadfile", method = RequestMethod.POST)
public @ResponseBody String upload(HttpServletRequest request) {

InputStream is = null;
OutputStream out = null; 
try {

is = request.getInputStream();
byte[] b = new byte[1024];
out = new FileOutputStream(new File("C:\\tmp\\upload.txt"));
out.write(b);
} catch (IOException e) {
e.printStackTrace();
} finally{

try{
if(out != null){
out.close();
}
if(is != null){
is.close();
}
}catch(IOException io){
io.printStackTrace();
}

}
return null;
} 
```

谢谢， 维奈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T09:52:33.563

你的 byte[] 是空的，因此它没有在文件中写入任何内容。将请求的内容获取到 byte[] 中，然后将其写入文件。

或者你可以使用 BufferedWriter 也更快。

谢谢，布里杰什

# c# - 如何使用 Fiddler 捕获非浏览器调用？

> ID：15908985
> 
> 赞同：1
> 
> 时间：2013-04-09T17:49:18.823
> 
> 标签：c#, asp.net, .net, fiddler

我有一个本地网站，它在其他服务器上调用多个 WCF 服务。当我在网站上点击一个我知道会调用其他服务器上的服务的页面时，Fiddler 中唯一出现的就是 localhost。有没有办法查看所有的服务调用？

# jsp - 从 jsp 调用 servlet 并使用 if

> ID：15908994
> 
> 赞同：-2
> 
> 时间：2013-04-09T17:49:29.560
> 
> 标签：jsp, servlets, tomcat6

一段时间以来一直试图为此寻找解决方案，我在 html 文件中有一个表单

```
 <form id="form" name="form" method="post" ACTION="First_Q.jsp" > 
```

提交时如上所示的当前来源只是转到一个jsp ...

但是，我有一个表单 servlet，我想将表单数据传递到将执行 IF 以决定用户是否返回的位置。如其他示例所示，我已尝试将 ACTION 多次更改为 Game.FormServlet 和 Game/FormServlet ，但这不起作用。

Game 文件夹与 src 文件夹中的其他 servlet 一起放置。

基本上我想知道 1.如何将表单数据传递给 servlet 2.如何对 servlet 进行编程以获取 if 语句的结果并基于该移动到另一个 jsp ..

设置 The_Quiz.RegistrationServlet.java

如其中一个答案中所建议的，会引发以下错误

给我错误

cvc-complex-type.2.4.a：发现以元素“servlet-path”开头的无效内容。'{"http://java.sun.com/xml/ns/j2ee":servlet-class, "java.sun.com/xml/ns/j2ee":jsp-file}' 之一是预期的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T18:22:05.290

必须声明 servlet 并将其映射到 webapp 的 web.xml 文件中的 URL 模式。

```
<servlet>
     <servlet-name>SomeUniqueName</servlet-name>
     <servlet-path>the.fully.qualified.name.of.the.ServletClass</servlet-path>
</servlet>
<servlet-mapping>
     <servlet-name>SomeUniqueName</servlet-name>
     <url-pattern>/foobar</url-pattern>
</servlet-mapping> 
```

完成后，您可以使用选择的 URL 来调用 servlet：

```
<form id="form" name="form" method="post" action="${pageContext.request.contextPath}/foobar" > 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T18:23:48.607

表单操作映射到 URL，而不是类。`web.xml`URL 通过或注解映射到类。

表单数据通过[`getParameter(String)`方法](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getParameter%28java.lang.String%29)在请求中可用。

获得数据后，您可以根据需要对其进行操作，并使用 a[`RequestDispatcher`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html)转发到相应的 JSP：

```
ServletContext context = getServletContext();
RequestDispatcher rd = context.getRequestDispatcher("/WEB-INF/jsp/result.jsp");
rd.forward(request, response); 
```

任何 servlet/JSP 教程都会为您提供更多信息；我建议您先阅读一本，然后再继续深入——您会为自己节省很多时间。根据您的应用程序容器，您可能还想利用新的注释。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T10:14:15.590

我添加了一个 doPost 然后清理了解决问题的解决方案

# iphone - 您将如何保存要放置在 CollectionView 中的视频缩略图

> ID：15908999
> 
> 赞同：0
> 
> 时间：2013-04-09T17:49:43.230
> 
> 标签：iphone, video, camera, uiimagepickercontroller, uicollectionview

我正在开发一个记录“视频”的应用程序，并将其保存到文档目录中的文件夹中。我想知道如何获得像 Photo 应用程序中的缩略图。这样当用户点击它时，我就会全屏播放视频。

这是一个屏幕截图。

![在此处输入图像描述](https://i.stack.imgur.com/515IE.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:14:40.537

也许这可以帮助你：

```
MPMoviePlayerController *movie = [[MPMoviePlayerController alloc] initWithContentURL:fileUrl];
movie.shouldAutoplay = NO;
UIImage *image = [movie thumbnailImageAtTime:0 timeOption:MPMovieTimeOptionNearestKeyFrame];
[movie release]; 
```