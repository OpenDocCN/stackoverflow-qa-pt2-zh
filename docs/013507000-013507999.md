# StackOverflow 问答 13507000-13507999

# java - 如何使单击区域仅成为图像非矩形部分的一部分？

> ID：13507000
> 
> 赞同：0
> 
> 时间：2012-11-22T06:28:48.773
> 
> 标签：java, image, mouseevent, rectangles

我只使用图像，我用来查看我的应用程序的窗口的尺寸在不同的系统上可能不同。我有一个鼠标动作监听器，它正在监听我的程序主视图上的点击。我有一个看起来像按钮的圆角矩形。我想让鼠标动作监听器只监听圆角矩形的区域，而不是所有系统上的整个图像。就像标题说的那样，不是整个图像都有内容，特别是角落看起来不像是图像的一部分，所以我不想让用户能够在没有内容的情况下点击图像的某些部分内容并获得与单击有内容的部分相同的结果。我的图像看起来与此类似[（来源：][[youthedesigner.com](http://www.youthedesigner.com/wp-content/uploads/2011/02/gimp-tutorial-on-creating-buttons-421.png)][）][![图片](../Images/7a3fc0a818f8f658b8819a7f9536aa10.png)](https://i.stack.imgur.com/XxQMi.png)

所以我只希望程序在用户点击图像内的按钮而不是按钮周围的好东西时做一些事情。这就是我现在要收听点击的内容：

```
@Override
public void mouseClicked(MouseEvent e) {
    for(int i = 0; i <= 200; i++) {
        if(e.getY() >= 100+i && e.getY() <= 300) {
            if(e.getX() >= 10+100-Math.pow(10000-(Math.pow((i-100),2.0)),.5)) && e.getX() <= 10+400-Math.pow(10000-(Math.pow((i-100),2.0)),.5))) {
                // do stuff
                i = 201;
            }
        }
    }
} 
```

我在我的代码中使用的数学方程看起来像 110-(10000-(y-100)^2)^(1/2))，如果用图表表示，它看起来像一个左括号，而 410+(10000- (y-100)^2)^(1/2))，它看起来像一个距离第一张图 400 个单位的右括号。

该代码在我的系统上运行良好，但在其他系统上，它根本不起作用，我很好奇如何移动我正在收听的位置以对应于图像的缩放方式。

非常感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:48:31.233

for 循环是多余的。

您可以确保按钮 (.png) 外部的像素具有一定的透明度，然后检查 alpha 颜色分量。

在这种情况下，您可以添加一个 Rect 并查找：

```
private boolean insideButton(Rectangle buttonRect, Point mousePt) {
    if (buttonRect.contains(mousePt)) {
        int r = buttonRect.height() / 2;
        if (mousePt.x < r) {
            // Left circle with O at (r, r)
            int xFromO = r - mousePt.x;
            int yFromO = r - mousePt.y;
            if (xFromO * xFromO + yFromO * yFromO > r * r) {
                return false; // Outside circle
            }
        }
        if (mousePt.x > buttonRect.right - r) {
            // Right circle:
            ...
        }
        return true;
    }
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T02:58:05.040

所以，我用乔普的答案来解决我的问题。他的回答不是我想要的，但它给了我解决问题所需的想法。我得出的解决方案是：

```
private boolean insideButton(Rectangle buttonRect, Point mousePt) {
    if (buttonRect.contains(mousePt)) {
        int r = (int)buttonRect.getHeight()/2; // radius of either of the circles that make up the sides of the rectangle
        if(mousePt.x <= buttonRect.getWidth()/2) { // if it is on the left of the button
            Point center = new Point((int)buttonRect.getX()+r, (int)buttonRect.getY()+r); // the center of the circle on the left
            double lengthToPoint = Math.pow(Math.pow(mousePt.x-center.x, 2)+Math.pow(mousePt.y-center.y, 2), 1.0/2); // length from center to the point that the user clicked at
            if(lengthToPoint > r && mousePt.x < center.x) { // if it is to the left of the center and out of the circle
                return false;
            } else {
                return true;
            }
        } else { // if it is on the right, the rest of the code is just about the same as the left circle
            Point center = new Point((int)buttonRect.getWidth()-r, (int)buttonRect.getY()+r);
            double lengthToPoint = Math.pow(Math.pow(mousePt.x-center.x, 2)+Math.pow(mousePt.y-center.y, 2), 1.0/2);
            if(lengthToPoint > r && mousePt.x > center.x) {
                return false;
            } else {
                return true;
            }
        }
    } else {
        return false;
    }
} 
```

我知道它的计算有点过分而且效率低下，但我想以这种方式呈现它，以更好地了解我的解决方案是如何工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:24:55.497

我至少能想到两种方法。

第一个是生成蒙版图像（黑白），其中（例如）白色表示可点击区域。基本上，您可以根据原始图像的点击选取点来比较蒙版的像素颜色。

另一种方法是构建图像映射，基本上使用`Shape`API 之类的东西来允许非矩形形状。这将允许用于`Shape#contains`确定鼠标是否在其中单击

无论哪种情况，您都需要考虑原始图像的 x/y 位置

# python - Fabric Python运行命令不显示远程服务器命令“历史”

> ID：13507002
> 
> 赞同：1
> 
> 时间：2012-11-22T06:29:06.310
> 
> 标签：python, shell, command, fabric

我似乎无法弄清楚这一点，但是当我对 localhost 进行非常简单的测试以让结构执行此命令**run('history')**时，命令行上的结果输出为空白。

这也行不通：**run('history > history_dump.log')**

这是下面完整的 FabFile 脚本，显然我在这里遗漏了一些东西。

-- FabFile.py

```
    从 fabric.api 导入运行、环境、主机、角色、并行、CD、任务、设置、执行
    从 fabric.operations 导入本地，放置

    部署类型=“本地”

    如果（部署类型==“本地”）：
        env.roledefs = {       
            '初始'：['127.0.0.1']，
            '网络服务器'：['127.0.0.1']，
            'dbservers'：['127.0.0.1']
        }

    env.use_ssh_config = False

    # 获取历史
    #------------------------------------------------ ----------------------------------
    @任务        
    @角色（'初始'）    
    def showHistoryCommands():
         print("登录 %s 并访问命令历史" % env.host_string)
         run('history') #不显示任何东西
         run('history > history_dump.log') #不写任何东西

         print "完成显示命令历史"

```

任何建议/解决方案都将受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T11:51:19.460

History 是一个内置的 shell，所以它不像普通命令那样工作。我认为您最好的选择是尝试从文件系统中读取历史文件。

```
local('cat ~/.bash_history')
       or
run('cat ~/.bash_history') 
```

替换适当的历史文件路径。

经过一些研究后扩展一点，该命令在运行时成功，但由于某种原因，fabric 既不捕获也不打印输出。或者历史打印输出的方式。而 env 等其他内置命令可以正常工作。所以现在我不知道到底发生了什么。

# android - 如何在 Android 中生成唯一的 10 位字母数字值？

> ID：13507005
> 
> 赞同：0
> 
> 时间：2012-11-22T06:29:54.583
> 
> 标签：android

如何在android中生成唯一ID ..任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:37:12.720

让我们看看，你需要 10 位字母数字，所以大约是 60 位？

```
UUID random = UUID.randomUUID();
long first64 = random.getLeastSignificantBits();
long last64 = random.getMostSignificantBits(); 
```

那里有 128 个随机位，您可以将其转换为 alpha 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:43:44.247

查看 Android 文档的[UUID 类](http://developer.android.com/reference/java/util/UUID.html#randomUUID%28%29)。

您可能会发现以下有用：[UUIrandomUUID()](http://developer.android.com/reference/java/util/UUID.html#randomUUID%28%29)

# iphone - 如何“旋转图像，只有在纵向模式下（但不是在横向模式下）”

> ID：13507012
> 
> 赞同：0
> 
> 时间：2012-11-22T06:30:27.433
> 
> 标签：iphone, objective-c, uiimageview, uiimage, uiimagepickercontroller

在我的**iphone**应用程序*中，我使用图像视图来显示放大的图像，从另一个视图获取*，

在**第一个视图**中，我有一个指定的位置来*显示从 imagePicker 捕获的图像*， *`Here images are displayed in correct orientation what we captured`*

在**（第二个）细节视图**中，*我有一个大的（3x4）图像视图以大尺寸显示捕获的图像*，*`(Here ALSO images are displayed in correct orientation what we captured)`*

**但**

我的要求是我需要在 3x4 像素比例的图像视图中显示大图像，

为了这

**如果风景模式中的图像按方向显示，**

**如果它处于纵向模式，我们需要将其旋转到横向（90°）。**

怎么可能**`rotate image , ONLY IF it is in portrait mode (But not in landScape mode)`**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:06:35.390

您需要做的就是根据高度和宽度检查图像的大小。如果图像的高度大于单击图像的宽度，则表示您已以纵向模式拍摄图像。

# glassfish - 在 glassfish 服务器上使用 JMS 发送文本消息

> ID：13507013
> 
> 赞同：2
> 
> 时间：2012-11-22T06:30:35.227
> 
> 标签：glassfish, jms, jndi

我正在使用 glassfish 服务器测试 JMS，因此我想在 glassfish 服务器队列上发送简单的文本消息。我已经尝试过使用 ActiveMQ 并且一切正常，但我无法理解我可以在配置 jndi.properties 文件中放入什么以及 glassfish 服务器需要哪个 jar。请给我一些想法来实现这一点。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:39:37.507

由于您使用的是 Glassfish，因此最简单的方法是编写简单的应用程序 (EJB) 来执行该任务。您必须在 GF 中定义：

*   ConnectionFactory (Resources -> JMS Resources -> Connection Factory)，我们给它取JNDI名字`jms/ConnectionFactory`
*   消息队列（Resources -> JMS Resources -> Destination Resources），我们给它命名为 JNDI`jms/myQueue`

下一步是在您需要编写的一些 EJB 中使用这些。这并不难：首先，你必须注入：

```
@Resource(mappedName="jms/ConnectionFactory")
private ConnectionFactory cf;

@Resource(mappedName="jms/myQueue")
private Queue messageQueue; 
```

然后像这样使用它：

```
..
    javax.jms.Connection conn = null;
    javax.jms.Session s = null;
    javax.jms.MessageProducer mp = null
    try {
        conn = cf.createConnection();
        s = conn.createSession(false, Session.AUTO_ACKNOWLEDGE);
        mp = s.createProducer(messageQueue);
        javax.jms.TextMessage msg = s.createTextMessage();
        msg.setStringProperty("your-key", "your-value");
        msg.setText("Your text message");
        mp.send(msg);        
    }
    catch(JMSException ex) {
        // exception handling
    }
    finally {
        try {
            // close Connection, Session and MessageProducer
        } catch (JMSException ex) {
                //exception handling
        }
    } 
```

关于配置，您不需要任何外部 JAR，所需的一切都已交付。如果您不想编写 EJB，而是编写常规的 Java（独立）应用程序，那么您必须包含`jms.jar`和`imq.jar`.

# mysql - 从多行中选择 DISTINCT，如果包含具有不需要值的行，则不要返回

> ID：13507015
> 
> 赞同：1
> 
> 时间：2012-11-22T06:30:40.913
> 
> 标签：mysql

```
ID_Number|Subject_Code|Grade
000001   |Math        |Dropped
000001   |English     |Passed
000001   |Physics     |Passed
000002   |Math        |Passed
000002   |English     |Passed
000002   |Physics     |Passed
000003   |Math        |Passed
000003   |English     |Passed
000003   |Physics     |Passed 
```

现在我想要`SELECT DISTINCT ID_Number`其中所有的subject_code都应该有等级作为通过，查询应该返回000002和000003，因为000001有1个放弃的主题，其他不包括的等级是'撤回'和'失败'。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:32:40.543

```
SELECT DISTINCT ID_Number
FROM   <table>
WHERE  ID_Number not in(select ID_Number from <table> where Grade <> 'Passed') 
```

### [SQL小提琴演示](http://sqlfiddle.com/#!2/efa94/1)

# objective-c - 如何禁止 NSDate 进行自动时区转换

> ID：13507016
> 
> 赞同：0
> 
> 时间：2012-11-22T06:30:43.930
> 
> 标签：objective-c, ios, macos, nsdateformatter

我的 Web 服务在 JSON 响应中返回以下日期字符串。此日期字符串已采用 UTC。

{“last_updated_at”：“2012-11-19 07:55:30”}

我使用 NSDateFormatter 解析响应日期字符串，如下所示。

```
NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];

if ([ticketFields objectForKey:@"last_updated_at"] != [NSNull null]) {
    self.lastUpdatedAt = [dateFormatter dateFromString:[ticketFields objectForKey:@"last_updated_at"]];

    NSLog(@"Time Response string %@", [ticketFields objectForKey:@"last_updated_at"]);
    NSLog(@"Formatted NSDate %@", self.lastUpdatedAt);
} 
```

这是我的日志输出

```
Time Response string 2012-11-21 11:38:44
Formatted NSDate 2012-11-21 06:08:44 +0000 
```

如您所见，NSDateFormatter 除了解析日期字符串外，还认为日期字符串在 UTC+530（我的本地时区）中，并通过从给定日期减去 530 小时自动将其转换为 UTC。我不希望这种情况发生。NSDateFormatter 应该从给定的字符串转换日期，理想情况下给出以下输出。

```
Time Response string 2012-11-21 11:38:44
Formatted NSDate 2012-11-21 11:38:44 +0000 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:04:53.603

此数据格式化程序配置阻止了转换，并将日期响应字符串视为 UTC 日期。

```
NSDateFormatter* dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
[dateFormatter setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@"GMT"]]; 
```

它奏效了。

# javascript - 以不可读的格式响应

> ID：13507018
> 
> 赞同：0
> 
> 时间：2012-11-22T06:30:53.287
> 
> 标签：javascript, android, cordova

```
var httpc = new XMLHttpRequest(); // simplified for clarity
        httpc.open("POST", url, true); // sending as POST
        httpc.setRequestHeader("Content-Type",
                "application/x-www-form-urlencoded");
        httpc.onreadystatechange = function() { // Call a function when the
            // state changes.
            if (httpc.readyState == 4 && httpc.status == 200) {
            //MY JSON RESPONSE  
                        alert(JSON.stringify(httpc.responseText));
            }
        }
        httpc.send(params); 
```

上面的代码在 android 4.0 中运行良好，响应以有效的 JSON 格式获取。但是当我在 android 2.3 中运行相同的代码时，我得到了未知格式的响应，并且我的 url 和参数对于两个 android 版本都是相同的。

**在 2.3 中，我的回答是**。�<code>I�%&/m�{J�J��t��$ؐ@������iG#)�*��eVe]f@�흼��{���{�� ;�N'����?\fdl��J�ɞ!���?~|?"��?�YQ~�里F�������n���/������& ����2����u�~����)`�U��TH��2Ϛ<}S_��Y��z:%����,�o�e��tv� �X��E��{?v��U��V�j�B�s�FU�~�p�Զ�ɢ�i�2[^�i�S��W���_� ��'������

**在 4.0 中，我的回复是** [{"email":"","password":"","user_id":"","store_id":"","message":"警告！，错误的电子邮件或密码请重试.","success":"0","nick_name":"","magazine_genre_id":"","magazine_genre_name":"","newspaper_genre_id":"","newspaper_genre_name":"","old_password": "","new_password":"","mode":"","languagecode":"","URL":""}] 在 file:///android_asset/www/project.js:717

**Logcat 异常：** SyntaxError: Parse error at undefined:1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:42:07.203

在我看来，你正在做相反的事情。

您希望将 JSON 字符串解析为对象，而不是从对象中提取 JSON 字符串，这就是 JSON.stringify() 所做的。

请改用 JSON.parse()。eval() 也可以完成这项工作，但速度慢且不推荐使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:06:45.050

您是否尝试`responseType`将`json`. 我只在 jquery 中使用过它。如果您有任何疑问，请检查此[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#responseType)

**回答**
此 SO 帖子中提供了一些替代方法[JSON Parsing 适用于 Android 4.0 但不适用于 Android < 4.0](https://stackoverflow.com/questions/11064244/json-parsing-works-on-android-4-0-but-not-on-android-4-0)

# c# - C#日期时间格式转换

> ID：13507021
> 
> 赞同：1
> 
> 时间：2012-11-22T06:31:08.887
> 
> 标签：c#, datetime

我有日期时间的转换问题。我有一个日期字符串作为`MM/dd/yyyy`. 现在我需要将其转换为`yyyy-MM-dd`.

但我面临一些错误。请帮忙

```
 public static DateTime ToDBDateTime(string _dateTime)
 {
        string sysFormat = "MM/dd/yyyy hh:mm:ss tt";

        string _convertedDate = string.Empty;

        if (_dateTime != null || _dateTime != string.Empty)
        {
            _convertedDate = DateTime.ParseExact(_dateTime, sysFormat, System.Globalization.CultureInfo.InvariantCulture).ToString(_toDBDateFormat);
            //_convertedDate = Convert.ToDateTime(_dateTime).ToString(_toDBDateFormat);
           /// Debug.Print(sysFormat);
        }

        return Convert.ToDateTime(_convertedDate);
    } 
```

而且我想知道有没有办法以`datetime`各种格式传递它，它会返回预期的格式。

例如：如果我将日期传递为`dd/MM/yyyy`或`MM/dd/yyyy`，则上述函数将返回格式为 的日期`yyyy-MM-dd`。

请提供一些解决`datetime`问题的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T06:46:08.240

> 我有一个日期字符串为 MM/dd/yyyy

对......但你正试图像这样解析它：

```
string sysFormat = "MM/dd/yyyy hh:mm:ss tt";
...
_convertedDate = DateTime.ParseExact(_dateTime, sysFormat,
                                     CultureInfo.InvariantCulture) 
```

您需要提供与您的输入相匹配的格式字符串 - 那么为什么要包含时间部分？你可能只想：

```
string sysFormat = "MM/dd/yyyy"; 
```

然而，这并不是问题的结束。*然后*，您将其转换`DateTime` *回*这样的字符串：

```
.ToString(_toDBDateFormat) 
```

...并再次*解析它：*

```
return Convert.ToDateTime(_convertedDate); 
```

你到底为什么要这么做？您应该尽可能*避免*字符串转换。除了别的，还有什么说`_toDBDateFormat`（一个引起我怀疑的变量名）和`Convert.ToDateTime`（它总是使用当前的文化进行解析）将是兼容的？

你应该：

*   弄清楚你想如何处理给定一个空字符串或 null，然后返回一个适当的`DateTime`then
*   *否则，只需使用正确*的格式进行解析。

您的这部分问题也与我有关：

> 例如：如果我将日期传递为 dd/MM/yyyy 或 MM/dd/yyyy，则上述函数将以 yyyy-MM-dd 格式返回日期。

没有“格式为 yyyy-MM-dd 的日期”之类的东西。A`DateTime`只是*一个*日期和时间值。它没有内在格式。*您在格式化时*指定要如何格式化。但是，如果您将该值用于数据库查询，则*无论如何*都不应该将其再次转换为字符串- 您应该使用参数化 SQL，并将其*作为*`DateTime`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T06:34:15.947

由于您在格式为“MM/dd/yyyy”的字符串中有一个日期，并且想要将其转换为“yyyy-MM-dd”，您可以这样做：

```
DateTime dt = DateTime.ParseExact(dateString, "MM/dd/yyyy", CultureInfo.InvariantCulture);
        dt.ToString("yyyy-MM-dd"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T06:35:27.427

像这样使用内置的 tostring：

```
Convert.ToDateTime(_convertedDate).ToString("MM/dd/yyyy") or whatever format you want. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T06:34:54.663

我试过这个并且它工作正常。

```
DateTime date1 = new DateTime(2009, 8, 1);
date1.ToString("yyyy-MM-dd hh:mm:ss tt"); 
```

您可以在此 ToString 中应用任何格式。

希望对米林有帮助

# java - URL的编码和重写

> ID：13507024
> 
> 赞同：0
> 
> 时间：2012-11-22T06:31:33.520
> 
> 标签：java, jsp, servlets, url-rewriting, urlencode

我们使用 URL 重写或 cookie 来维持 Web 服务器和浏览器之间的会话，因为它们使用本质上是无状态的 HTTP 协议进行通信。由于其无状态的性质，服务器永远不会识别任何客户端（浏览器），无论它之前是否发出过任何请求。因此，我们需要在它们之间维护一个唯一标识符。

当浏览器（客户端）不支持 cookie 或在浏览器上禁用 cookie 时，将使用称为*URL 重写*的技术，并且`sessionID`需要在 URL 中进行编码，例如，

```
try
{
    response.sendRedirect(response.encodeRedirectURL("index.jsp?param=value"));
}
catch(Exception e)
{

} 
```

重新分级 JSP 中的普通链接，我使用 JSTL 的[`<c:url>`](http://java.sun.com/products/jsp/jstl/1.1/docs/tlddocs/c/url.html)标记，例如，

```
<c:url value="Category.htm" var="url">
    <c:param name="id" value="${row.category.catId}"/>
</c:url>

<a href="${url}" 
   name="catId${row.category.catId}" 
   title="Click to view the details.">${row.category.catName}
</a> 
```

它嵌入在一个`<c:forEach>`循环中。

但是，如果浏览器支持 cookie 或会话跟踪被关闭，则 URL 编码是不必要的并且不会发生。

那么，在这种情况下，如果 URI 或查询包含特殊字符（如`+`, `&`, ）`@`怎么办？

它们需要编码，如果 URI 和查询字符串分别编码，会`URL rewriting`自动完成，以防 cookie 被禁用或不被浏览器支持？

```
URI uri = new URI(
                  "http", 
                  null, 
                  request.getServerName(), 
                  request.getServerPort(), "/WebApp/index.jsp", 
                  "param="+URLEncoder.encode("some value@+", "UTF-8"), null);

String uriString = uri.toASCIIString(); 
```

在这种情况下，参数`param`需要在检索时进行解码，

```
out.println(URLDecoder.decode(request.getParameter("param"), "UTF-8")"); 
```

这种情况下的 URL 重写呢，我不确定是 Servlet Container 完成还是我们自己单独处理。

* * *

另外一件事，在使用`RequestDispatcher`,`<jsp:forward page="index.jsp"/>`和`<jsp:include page="template.jsp"/>`时，是否有必要像处理 URL 编码一样？

```
try
{
    RequestDispatcher requestDispatcher=
    request.getRequestDispatcher(response.encodeURL("index.jsp?param=value"));

    requestDispatcher.forward(request, response);
}
catch(Exception e)
{

} 
```

我总是使用`<c:url>`表单的 action 属性，比如（关于 Spring），

```
<c:url value="${param.url}" var="url">
    <c:param name="id" value="${param.id}"/>
</c:url>

<form:form action="${url}" id="dataForm" name="dataForm" method="post" commandName="someBean">
    .

    .

    .
</form:form> 
```

它指的是当前的 URL。是否真的需要（即使我没有提供任何参数）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T15:11:05.020

关于最后一个问题，Spring 3.0.5 的经验告诉您可以省略 form:form 中的 action 属性，它将使用当前 URL 并附加会话 ID 参数以防不使用 cookie。

与此相关，是否可以使用更短的语法，例如 <form:form action="<c:url value="foo"/>" ... ？这种确切的语法不起作用，因为标签不能以这种方式嵌套。额外变量的使用对我来说有点太长了。

# java - 避免重新分配参数

> ID：13507025
> 
> 赞同：4
> 
> 时间：2012-11-22T06:31:37.613
> 
> 标签：java, pmd

我收到 PMD 红色违规

避免重新分配参数，例如“bankRequest”

这是我的方法

```
 @Override
public BankDTO loadTariff(BankDTO bankRequest, int[] executionLevels) {
    double[] fee = null;
    for (int level : executionLevels) {

        // Check the tariff availability from execution level one to .....
        fee = loadCokaAndBankFee(bankRequest,level);

        if (fee != null) { // if fee found reload the bank request with new
                            // amount
            bankRequest = reloadBankRequest(bankRequest, fee);
            break; // no need to go for any other level deep level cover //
                    // here.
        } // if tariff not found use the esb provided amounts
    }

    return bankRequest;
} 
```

有人可以解释这段代码有什么问题。如果我忽略它会有什么影响。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T06:36:30.673

在您的情况下，有一个名为`bankRequest`. 在方法内部，您正在分配`bankRequest`一个值。

某些人认为，将值分配给方法体内的参数是一种不好的方法，因为它有时会令人困惑。一些开发人员更喜欢始终假设在方法运行期间从未为参数分配任何值。

为避免这种情况，您可以声明一个替代变量 type `BankDTO`：

```
BankDTO updatedRequest = bankRequest;
...
...
updatedRequest = reloadBankRequest(bankRequest, fee);
...
...
return updatedRequest; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T07:36:21.837

由于已经给出的原因，您应该避免重新分配变量。无论如何，与其分配一个新变量，不如考虑在找到正确值时从循环中返回。这也会使“中断”变得多余。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T06:37:56.180

在java中，参数是通过引用调用的。在您的情况下，这意味着，如果您更改对象`bankRequest`，它在 method 之外是不可见的`loadTariff`。

在该行之后`bankRequest = reloadBankRequest(bankRequest, fee);`，变量 bankRequest 指向 BankDTO 的不同对象。

如果您想更改 bankRequest 的内部值并在调用后使用它，`loadTariff`您应该执行类似`bankRequest.loadRokaAndBankFee(fee)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T13:09:24.993

不建议将值重新分配给传入参数。**请改用临时局部变量。**

```
Example(s): 

public class Foo {
  private void foo(String bar) {
    bar = "something else";
  }
} 
```

参考： http: [//pmd.sourceforge.net/pmd-5.0.1/rules/java/design.html](http://pmd.sourceforge.net/pmd-5.0.1/rules/java/design.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-20T11:59:59.240

**不建议为传入参数重新分配值。使用临时局部变量。**

```
public BankDTO loadTariff(BankDTO bankRequest, int[] executionLevels) {
    double[] fee = null;

BankDTO updatedBankRequest = bankRequest;

    for (int level : executionLevels) {

        fee = loadCokaAndBankFee(bankRequest,level);

        if (fee != null) { 
            updatedBankRequest = reloadBankRequest(bankRequest, fee);
            break; 
        }        }

    return updatedBankRequest;
} 
```

# iphone - 从 gdata 集成中的 uiweb 视图重定向返回

> ID：13507026
> 
> 赞同：2
> 
> 时间：2012-11-22T06:31:39.857
> 
> 标签：iphone, objective-c, ios, uiview, gdata

我正在制作一个将 gmail 集成到我的应用程序的应用程序。我可以通过 gadata-objective c-client-1.11.0.a 登录到 gmail。我给代码

```
-(IBAction)googlelogin
{
    NSString *scope = @"https://www.googleapis.com/auth/plus.me"; // scope for Google+ API

    GTMOAuth2ViewControllerTouch *viewController = [[[GTMOAuth2ViewControllerTouch alloc] initWithScope:scope clientID:kMyClientID clientSecret:kMyClientSecret keychainItemName:nil delegate:self finishedSelector:@selector(viewController:finishedWithAuth:error:)] autorelease];

    NSString *html = @"<html><body><div align=center>Loading sign-in page...</div></body></html>";
   [viewController setInitialHTMLString:html];

   [self presentModalViewController:viewController animated:NO];        

} 
```

现在我想在谷歌登录后重定向回我的应用程序以获取 gmail 的联系人。帮助我如何在登录后生成已拍摄并返回我的应用程序

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:36:25.953

你应该实现这个方法

```
- (void)viewController:(GTMOAuth2ViewControllerTouch *)viewController
  finishedWithAuth:(GTMOAuth2Authentication *)auth
             error:(NSError *)error {
 if (error != nil) {
  // Authentication failed
 }   else {
     // Authentication succeeded
   // here you should push your the root view controller of your app.
 } 
```

}

# regex - 排除模式的Jmeter正则表达式问题

> ID：13507031
> 
> 赞同：2
> 
> 时间：2012-11-22T06:31:47.903
> 
> 标签：regex, jmeter

我需要一个正则表达式来查找 JMETER 中模式的最后一个匹配项 这是我拥有的字符串

> "等等等等 n="12" 等等等等 n="13" 等等等等 n="14" 关键字等等等等"

我想要的是关键字之前的最后一个 n=value

这是我尝试过的正则表达式，

```
n="(.(?!n=).)"KEYWORD 
```

但正则表达式匹配第一个 n= 和 KEYWORD 之间的所有内容。它不排除介于两者之间的 n= 模式

有人可以帮我破解这个坚果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:39:18.067

当有关键字时，为什么需要负前瞻？然后你可以使用

```
n="(\d+)"\s*KEYWORD 
```

并在“$1”中找到您的价值。[在 Regexer 上](http://regexr.com?32t2k)查看。

如果 KEYWORD 可以更改，您可以通过否定前瞻确保行中不再有“n =”

```
n="(\d+)(?!.*n=) 
```

[在 Regexr 上查看](http://regexr.com?32t2n)

如果您不希望 "n="" 成为匹配的一部分，请将其放在断言后面：

```
(?<=n=")\d+(?!.*n=) 
```

[在 Regexr 上查看](http://regexr.com?32t2q)

# android - 基于 Spinner 值变化的 sqllite Db 值的柱形图？

> ID：13507033
> 
> 赞同：0
> 
> 时间：2012-11-22T06:31:52.793
> 
> 标签：android, database, sqlite, charts

我对这个 API 很陌生。我知道用这个 API 做样本。之后我的要求是显示基于 Spinner Values 选择的列图。查询表数据正确出现问题是没有将最新值附加到图表 。

```
 In My App i have one spinner name it as Customer Name:
when i change the spinner-value i am sending the Customer name to input parameter to sqllite and display the graph for that i write the following code.

package com.appulento.salestracking;

import java.util.ArrayList;
import java.util.Collection;
import java.util.HashMap;
import java.util.Vector;

import android.app.Activity;
import android.content.pm.ActivityInfo;
import android.database.Cursor;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemSelectedListener;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Spinner;

import com.appulento.salestrackingdb.DBAdapter;
import com.artfulbits.aiCharts.ChartView;
import com.artfulbits.aiCharts.Base.ChartArea;
import com.artfulbits.aiCharts.Base.ChartAxis;
import com.artfulbits.aiCharts.Base.ChartCollection;
import com.artfulbits.aiCharts.Base.ChartCollection.IChangeListener;
import com.artfulbits.aiCharts.Base.ChartNamedCollection;
import com.artfulbits.aiCharts.Base.ChartPalette;
import com.artfulbits.aiCharts.Base.ChartPoint;
import com.artfulbits.aiCharts.Base.ChartSeries;
import com.artfulbits.aiCharts.Types.ChartTypes;

public class SalesTrackingByCustomer extends Activity {

    private DBAdapter db;
    private Spinner spinner1, spinner2;
     private String[] prodctnames;
     private String[] prodctnames1;
     private double[] product_1;
     private double[] product_2;
     public int count;
     public String custid;
     public Sample customerdetails;
     public ChartCollection<String> collection;
     ChartArea area;
     ChartArea area1;

      private SimpleAdapter mSchedule;

     Vector<String> vec_custid=new Vector<String>();
     Vector<String> vec_oldno=new Vector<String>();
     Vector<String> vec_productid=new Vector<String>();
     Vector<String> vec_qty=new Vector<String>();
     private ListView mListView;

  @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.bycustomers);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
    mListView=(ListView)findViewById(R.id.listView1);
    prodctnames=new String[10];
    product_1=new double[10];

    prodctnames1=new String[10];
    product_2=new double[10];

    db=new DBAdapter(this);

    final ChartView chartView = (ChartView) findViewById(R.id.chartView);

    ChartPalette palette = new ChartPalette(0xffffd7e8);
    chartView.setPalette(palette);
    final ChartSeries product1 = new ChartSeries("P1", ChartTypes.Column);

    spinner1 = (Spinner) findViewById(R.id.spinner1);
    spinner1.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            // TODO Auto-generated method stub

            int position=spinner1.getSelectedItemPosition();
            System.out.println("=====ITEM POSITION======"+position);

            final String selected=arg0.getItemAtPosition(arg2).toString();
            System.out.println("=====IN SELECTED======"+selected);
                    //finish();
            db.open();
            Cursor customer=db.fetchorderCustomername(selected);
            custid=customer.getString(0);
            System.out.println("=====CUSTOMER NAME ID======"+custid);
            Cursor cursor=db.fetchorderDetails(custid);
            count=cursor.getCount();
            System.out.println("=====COUNT======"+count);

            int i=0;
                    while (i<count)
                    {
                        String productid=cursor.getString(1);
                        prodctnames[i]=productid;

                        String qty=cursor.getString(2);
                        product_1[i]=Double.parseDouble(qty);
                        System.out.println("=====PROID======"+prodctnames[i]+"=====QUANTITY======"+product_1[i]);
                        cursor.moveToNext();
                        i++;

                    }

                    for (int j = 0; j < count; j++)
                    {
                        ChartPoint point = product1.getPoints().addXY(j, product_1[j]);
                        point.setAxisLabel(prodctnames[j]);
                    }

                    if(position==0)
                    {
                       chartView.refreshDrawableState();

                       chartView.getSeries().add(product1);

                       area = chartView.getAreas().get(0);

                    area.getDefaultXAxis().setLabelsMode(ChartAxis.LabelsMode.SeriesLabels);

                    }
                    if(position==1)
                    {

                       chartView.refreshDrawableState();

                       chartView.getSeries().add(product1);
                        area1 = chartView.getAreas().get(0);

                        area1.getDefaultXAxis().setLabelsMode(ChartAxis.LabelsMode.SeriesLabels);
                    }

                  //area.refresh();
                    db.close();

                            }
        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });

  My problem is at first time Application Launch the graph is Displaying  successfully when i change the Spinner value selection the app got closed and display the  fallowing exception in my log cat:

java.security.InvalidParameterException: This name already presents at com.artfulbits.aiCharts.Base.ChartNamedCollection.validateName(SourceFile:128 ) at com.artfulbits.aiCharts.Base.ChartNamedCollection.validate

please see once and let me know where i am doing Mistake in my code.The dynamic vlaues is not appending to that chart in the above code.
Thanks in Advance.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:40:32.733

问题是您正在尝试添加具有相同名称的新区域。我对 API 不够精通，但我想当你第二次尝试这条线时问题就会出现：

```
chartView.getSeries().add(product1); 
```

我还注意到您从未使用过以下内容：

```
prodctnames1=new String[10];
product_2=new double[10]; 
```

如果我可以提出建议，也许最好将您的所有代码都放在点击侦听器中。也许您可以在开始时填写数据集，然后仅在使用微调器时显示图表。因为如果多次单击微调器，您必须去数据库获取相同的信息。

# android - 为什么主屏幕上有隐藏的 appWidget？

> ID：13507035
> 
> 赞同：1
> 
> 时间：2012-11-22T06:31:55.740
> 
> 标签：android, android-widget, android-appwidget, appwidgetprovider

从主屏幕删除我的最后一个 appWidget 实例后`onDisabled`，`onEnabled`无法正常工作。

我将我的小部件注册为广播接收器，主屏幕上没有实例，但广播接收，而且我看到我的日志写在我的 appWidget 核心类中！

卸载我的应用程序并再次安装后，问题解决了，并且`onDisabled`在`onEnabled`添加（删除）第一个（最后一个）实例后正常工作。

我手动收集了 appWidgetIds 并将其保存在一个文件中，以提供一些更好的方式来访问我所有的小部件 ID，但隐藏的 appWidget 并未从我收集的小部件 ID 中删除，并且还存在于主屏幕中！

**问题：**

问题是 Android 版本 2.3.4（测试设备）上的错误吗？在这种情况下，解决方案是什么？

**代码的重要部分：**

```
@Override
public void onEnabled(Context context) {
    G.logger.out("Enabled");
    super.onEnabled(context);
}

@Override
public void onDisabled(Context context) {
    super.onDisabled(context);
    G.logger.out("Disabled");
    File file = new File(G.infoDir + "/" + getClass().getSimpleName() + ".dat");
    if (file.exists()) {
        file.delete();
    }
}

@Override
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {
    WidgetProperty property = G.widgetPropertyMap.get(getClass().getSimpleName());
    property.appWidgetIds = appWidgetIds;

    addWidgetIds(appWidgetIds, getClass().getSimpleName()); // add widget ids to a file ( duplicates will skip )
    updateAll(getClass(), context);
}

@Override
public void onDeleted(Context context, int[] appWidgetIds) {
    G.logger.out("Deleted");
    removeWidgetIds(appWidgetIds, getClass().getSimpleName()); // remove widget ids from file
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T07:32:46.477

android 中 AppWidgets 的设计非常糟糕。

要重现错误：

*   选择小部件（放在主屏幕上）
*   选择返回（硬件键）取消放置小部件
*   现在你有隐藏的小部件。

我被包括在内`setResult(RESULT_CANCELED);`以防止这个问题，但不会被android框架处理！！！

所以我用这段代码作为一个愚蠢的解决方案：

```
@Override
protected void onDestroy() {
    if ( !submitted) {
        AppWidgetHost host = new AppWidgetHost(this, 1);
        host.deleteAppWidgetId(mAppWidgetId);
    }
} 
```

# java - 通过 RMI 传递 EventListener

> ID：13507038
> 
> 赞同：0
> 
> 时间：2012-11-22T06:32:12.433
> 
> 标签：java, rmi, event-listener

我需要在 RMI 服务中运行一个任务，它需要为它实现一个事件监听器。现在，当我通过 RMI 传递 EventListener 时，它确实执行了调用，但是没有调用 Listener 的回调方法，它仍然处于等待状态。我应该如何让它工作？

```
public class MyEventListener implements Serializable, ABCEventListener {

    private static final long serialVersionUID = -4686421592620210489L;
    private boolean registrationCompleted = false;

    public boolean getRegistrationCompleted(){
        return registrationCompleted;
    }
    @Override
    public void onSomethingDiscovered(Agent agent) {            
        System.out.println("Added agent "+agent.toString()+" to the set \n");

    }

    @Override
    public void onDiscoveryComplete() {
        this.registrationCompleted = true;
        System.out.println("Discovery process completed. \n");
    }
} 
```

这是我将事件监听器传递给 RMI 服务“ds”的地方

```
MyEventListener myEL = new MyEventListener();
ds.discoverAsync(val, myEL);
waitForRegistration();
.
.
    private void waitForRegistration() {

    try{
    while(!dcev.getRegistrationCompleted()){
        System.out.println("Please wait...");
        Thread.sleep(15000);
    }
    }catch(InterruptedException e){
        logger.error("InterruptedException raised while waiting for registration",e);
        e.printStackTrace();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:41:45.450

问题在于，因为您的事件侦听器是可序列化的，所以您的事件侦听器的数据字段通过网络发送，并在服务器端创建了一个新对象。在您的事件侦听器的此副本上调用该方法。这对数据对象非常有意义，但对于事件侦听器之类的东西，您希望您的客户端代码获得调用，因此无法正常工作。

[如果您的事件侦听器扩展RemoteObject](http://docs.oracle.com/javase/1.4.2/docs/api/java/rmi/server/RemoteObject.html) ，我相信您可以完成这项工作。如果您这样做，而不是复制您的对象，当您调用服务器时，它将作为 RMI 服务公开。服务器不会获取对象的副本，而是获取事件侦听器的代理。对事件侦听器的调用将导致反向调用 RMI 以调用您的事件侦听器。

有关详细信息，请参阅RMI 指南中的[传递远程对象](http://docs.oracle.com/javase/1.4.2/docs/guide/rmi/spec/rmi-objmodel7.html)。

# php - 在正文 onload 事件上调用一次 javascript 函数

> ID：13507039
> 
> 赞同：3
> 
> 时间：2012-11-22T06:32:19.623
> 
> 标签：php, javascript

我目前正在从事具有 2 个 php 文件 category.php 和 product.php 的项目。

在 category.php 文件中，我放置了如下所示的链接。

```
<a href="product.php?cat=getcate" class="option">click here</a> 
```

我在 product.php 页面的正文 onload 上调用了以下 js 函数。

```
<body onload="font_select(1760,'No',239)"> 
```

当用户单击链接时，他们将被重定向到调用 body onload 函数的 product.php 文件。此函数工作正常。

我的问题是，当用户进入 product.php 页面时，我只需要调用一次这个函数。目前这个函数在页面重新加载时也会被调用。

我如何只调用一次这个函数？提前感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:36:00.500

最有效的方法是使用[Cookie](http://www.quirksmode.org/js/cookies.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:35:39.657

（这有点笨拙，但您可以在 font_select 中检查 document.referrer）这是错误的，至少在 Firefox 中，当页面刷新时，引用者并没有明显改变。

您可能想看看[这个问题](https://stackoverflow.com/questions/5004978/check-if-page-reloaded-or-refresh-in-js)，他们在其中使用 cookie 处理检测刷新，但是您应该知道这实际上只是检查该页面之前是否已访问过，因此除非您还清除该 cookie，否则它将无法工作从您的 category.php 页面检测到对链接的点击。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T06:36:56.040

去[javascript cookie](http://www.w3schools.com/js/js_cookies.asp)

要跟踪函数是否被调用，您可以使用 javascript cookie。比如说你设置了一个任何名称的cookie，比如`functioncalled`初始值为0，当用户进入产品页面时，检查这个cookie。如果值为0，则调用一个函数，然后将cookie的值设置为1，下次重新加载页面时不会调用该函数。

# web-crawler - 如何抓取单个页面而不是其中包含的任何链接并输出源？

> ID：13507046
> 
> 赞同：0
> 
> 时间：2012-11-22T06:32:49.283
> 
> 标签：web-crawler, phpcrawl

我正在使用`phpcrawl`，下面是代码。我想抓取提到的链接并获得所有工作。

现在，我通过传递链接来抓取它，但它抓取了我们在页面源视图中看到的所有链接。但我只想查看我传递的链接的来源，并使用 xpath 来实现抓取作业。

```
 <?php

    // It may take a whils to crawl a site ...
    set_time_limit(10000);

    // Inculde the phpcrawl-mainclass
    include("libs/PHPCrawler.class.php");

    // Extend the class and override the handleDocumentInfo()-method 
    class MyCrawler extends PHPCrawler 
    {
      function handleDocumentInfo($DocInfo) 
      {
        // Just detect linebreak for output ("\n" in CLI-mode, otherwise "<br>").
        if (PHP_SAPI == "cli") $lb = "\n";
         else $lb = "<br />";

    // Print the URL and the HTTP-status-Code
    echo "Page requested: ".$DocInfo->url." (".$DocInfo->http_status_code.")".$lb;

    // Print the refering URL
    echo "Referer-page: ".$DocInfo->referer_url.$lb;

    // Print if the content of the document was be recieved or not
    if ($DocInfo->received == true)
      //echo "Content received: ".$DocInfo->bytes_received." bytes".$lb;
      echo $DocInfo->bytes_received;
    else
      echo "Content not received".$lb; 

    // Now you should do something with the content of the actual
    // received page or file ($DocInfo->source), we skip it in this example 

    echo $lb;

    flush();
    } 
    }

    // Now, create a instance of your class, define the behaviour
    // of the crawler (see class-reference for more options and details)
    // and start the crawling-process. 

    $crawler = new MyCrawler();

    // URL to crawl
    $crawler->setURL("http://careers.republic.co.uk/pb3/corporate/Republic/search.php?page=1 ");

    // Only receive content of files with content-type "text/html"
    $crawler->addContentTypeReceiveRule("#text/html#");

   // Ignore links to pictures, dont even request pictures
   $crawler->addURLFilterRule("#\.(jpg|jpeg|gif|png)$# i");

   // Store and send cookie-data like a browser does
   $crawler->enableCookieHandling(true);

   // Set the traffic-limit to 1 MB (in bytes,
   // for testing we dont want to "suck" the whole site)
   $crawler->setTrafficLimit(1000 * 1024);

   // Thats enough, now here we go
   $crawler->go();

   // At the end, after the process is finished, we print a short
   // report (see method getProcessReport() for more information)
   $report = $crawler->getProcessReport();

   if (PHP_SAPI == "cli") $lb = "\n";
   else $lb = "<br />";

   echo "Summary:".$lb;
   echo "Links followed: ".$report->links_followed.$lb;
   echo "Documents received: ".$report->files_received.$lb;
   echo "Bytes received: ".$report->bytes_received." bytes".$lb;
   echo "Process runtime: ".$report->process_runtime." sec".$lb; 
   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T09:24:01.430

只需在 phpcrawl 中设置页面限制为 1： $crawler->setPageLimit(1); (http://phpcrawl.cuab.de/classreferences/PHPCrawler/method_detail_tpl_method_setPageLimit.htm)

# c++ - 这种反转字符串的方式安全吗？

> ID：13507047
> 
> 赞同：2
> 
> 时间：2012-11-22T06:32:50.767
> 
> 标签：c++, string

我想知道这种反转字符串的方式是否安全？

```
void ReverseString( std::string & stringToReverse )
{
    stringToReverse.assign( stringToReverse.rbegin(), stringToReverse.rend() );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:44:56.543

根据 §21.4.6.3/20，`assign(first,last)`（使用迭代器`first`和`last`）相当于

```
assign(string(first,last)) 
```

因此它首先创建一个新的字符串对象，然后分配它。当您仍在复制时（如果这是您所害怕的），您复制的字符串（反向）被修改是没有风险的。

但是，`std::reverse(begin(str),end(str))`按照其他人的建议使用会更好，并且可能更有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:36:37.880

我不知道这是否是要求审查您的代码，或者您不知道其他选项，但您应该使用`std::reverse`from`<algorithm>`

```
std::string str = "Hello world!";
std::reverse(str.begin(), str.end()); 
```

这将字符串反转到位。如果您想创建一个新字符串，您实际上是在使用构造函数执行代码中`assign()`的操作`std::string`：

```
std::string reversed(str.rbegin(), str.rend()); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T07:50:34.860

正如其他人所建议的那样，实际上，您所做的事情颠倒了`char`顺序。这实际上反转*字符串*的事实取决于“ *reverse* ”和“ *string* ”和“ *char* ”的概念是什么意思。

An`std::string`是一个`char`8 位长的序列（至少在大多数平台上）。一个日语字符串（甚至是法语、意大利语或德语字符串）可以包含超出 0..127 范围的代码点，因此需要进行一些编码才能表示为 8 位字符，因此“字符”可能会保留更多比 1 `char`。以相反的顺序放置`char`-s 不会颠倒文本，它只会把它完全弄乱。

假设`1 character <=> 1 char`仅适用于纯 ASCII 文本。

# iphone - iOS 6 Autorotation 仅适用于 Multiple ViewController App 中的 SingleViewController

> ID：13507056
> 
> 赞同：3
> 
> 时间：2012-11-22T06:34:02.057
> 
> 标签：iphone, xcode, ios6

有什么方法可以为我们的 iPhone 应用程序提供自动旋转，`SingleViewController`因为我们的 iPhone 应用程序有多个视图控制器，并且只需要为一个进行自动旋转。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:44:30.300

是的，您可以用于您的 VC（不旋转）

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation

    {
        //return (interfaceOrientation == UIInterfaceOrientationPortrait);
        return NO;
    }
// New Autorotation support for iOS 6.
- (BOOL)shouldAutorotate NS_AVAILABLE_IOS(6_0);
{
     Return NO;
    } 
```

另请参阅[Apple Doc](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/RespondingtoDeviceOrientationChanges/RespondingtoDeviceOrientationChanges.html) 它会有所帮助。

# android - 如何将文本从 EditText 显示到 ListView？

> ID：13507060
> 
> 赞同：2
> 
> 时间：2012-11-22T06:34:20.680
> 
> 标签：android, listview, android-edittext

我是 Android 编程的初学者，希望在用户单击按钮时将用户在 EditText 中输入的文本显示到 ListView 中。我写的代码是：

```
public class MainActivity extends Activity {

    @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);     
    ListView myListView = (ListView) findViewById(R.id.myListView);
    final EditText myEditText = (EditText) findViewById(R.id.myEditText);       
    final ArrayList<String> todoItems = new ArrayList<String>();
    final ArrayAdapter<String> aa;
    aa = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, todoItems);
    myListView.setAdapter(aa);      
    Button myButton = (Button) findViewById(R.id.myButton);     
    myButton.setOnClickListener(new View.OnClickListener() {
    String item;
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            item = myEditText.getText().toString();
            //Toast.makeText(null, item, Toast.LENGTH_SHORT).show();//Problem here

        }
    });
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:42:29.520

嗨 asp_NewBee，您应该将新输入的 EditText 项目添加到您的列表 todoItems 中，如下面的 onclick 块内。从你的代码

```
 myButton.setOnClickListener(new View.OnClickListener() {
        String item;
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                item = myEditText.getText().toString();
                //Toast.makeText(getApplicationContext(), item, Toast.LENGTH_SHORT).show();//Problem here

// Add your input text to list as follows
              todoItems.add(item );  // Now list todoItems has been added with new item at end of list.

       aa.notifyDataSetChanged();   // So your list adapter to be refreshed with new item

            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:41:21.240

我认为-在按钮上单击按钮的布局将不可见，而列表的布局将可见。

```
 doItems.add(item)
& After that  myListView.setAdapter(aa); 
```

# android - 从 android 中存储在 web 上的 mySQL 数据库中获取特定值

> ID：13507062
> 
> 赞同：3
> 
> 时间：2012-11-22T06:34:36.607
> 
> 标签：android

在我的应用程序中，我有本地 Sqlite 数据库以及保存在 Web 上的其他 mySQL 数据库（当前使用 localhost）。我想从 mySQL 数据库中获取特定值，并在本地 Sqlite 数据库中更新这些值。

作为回报，从本地 Sqlite 数据库到 web（或本地主机）上的 MySQL 数据库的一些值相同。

如您所知，在 android 中保存数据很容易，我做了这些事情，但在实现时遇到了问题

ANDROID-->WEB-->ANDROID 交互，如果你以前做过或有任何想法、任何链接或示例代码，请帮助我......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:48:22.280

如果您想尝试一下，`localhost`那么下面的链接很好。

[http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/](http://www.androidhive.info/2012/05/how-to-connect-android-with-php-mysql/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T12:52:25.030

您尝试实现的机制如 Android -> Web -> Android，可以在此处实现并解释[检查它](https://stackoverflow.com/a/29943178/1878148)。

# jquery - 符号“$.something = {”是什么意思？

> ID：13507064
> 
> 赞同：0
> 
> 时间：2012-11-22T06:34:45.673
> 
> 标签：jquery

如果 js 文件中有此代码：

```
(function($) {
  $.cleditor = {
  ...
  };
  ...
})(jQuery); 
```

这是我第一次看到符号`$.`：那是什么意思？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:36:05.750

美元。用于调用像 $.trim() 这样的 jquery 方法，或者简单来说`(function($) { })(jQuery)`就是**self invoking on anonymous function**。**[您可以在此处](http://lostechies.com/derickbailey/2012/05/22/function%E2%80%A6-vs-function%E2%80%A6-or-domready-vs-the-module-pattern/)**阅读有关此符号的更多信息。`Immediately-Invoked Function Expression`

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:37:31.967

这只是意味着一个新的自定义`function`已添加到 jQuery 核心。

尽管对 cleditor 的快速搜索显示它是一个 jQuery 插件，并且应该像这样使用：

```
$(selector).cleditor({options}); // where selector is either an input or textarea element 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T06:51:15.253

默认情况下，jQuery 使用“$”作为“jQuery”的快捷方式

因此 - 使用 $(".class") 或 jQuery(".class") 是一样的。

在编写插件以避免问题时，您可以将“jQuery”传递给函数：

```
function($) {

//use $ writing your plugin

}(jQuery) 
```

现在，$.cleditor 对象包含用于创建自定义插件和覆盖内置功能的全局属性和方法。

以下链接将使您对 $.cleditor 有更多了解

[http://premiumsoftware.net/cleditor/docs/GettingStarted.html](http://premiumsoftware.net/cleditor/docs/GettingStarted.html)**

# mongodb-php - Doctrine ODM: 不能素数->(true) getSingleResult(); 引发光标错误

> ID：13507066
> 
> 赞同：0
> 
> 时间：2012-11-22T06:34:51.127
> 
> 标签：mongodb-php, doctrine-odm, doctrine-query

我有一个文档，该文档具有另一个文档的 ReferenceMany 属性。引用设置正常，数据从查询返回正常，但 arraycollection 中的每个文档都作为代理返回。在这个网站上，我看到有人提到我应该添加`->prime(true)`以返回实际引用的文档。

当返回文档的 ArrayCollection 时，我正在运行一个已提交给服务器的 id 循环，以将它们从引用的集合中删除。该`removeElement`方法不起作用 b/c 返回的文档是代理，我正在比较实际文档与那些代理。所以基本上我正在尝试：

1.  查找单个文档
2.  强制`ReferenceMany`属性中的所有文档为实际文档而不是代理文档
3.  循环遍历我的 id 数组并加载每个文档
4.  将文档发送到 removeElement 方法

在下面的第一个`getSingleResult`查询方法中，我收到一个错误`cannot modify cursor after beginning iteration`。我在这个网站上看到一个帖子提到你应该初始化结果，以便获取实际文档而不是代理，在他的示例中，他使用了`getSingleResult`.

```
$q = $this->dm->createQueryBuilder('\FH\Document\Person')->field('target')->prime(true)->field('id')->equals($data->p_id);
$person = $q->getQuery()->getSingleResult();

foreach($data->loc_id as $loc) {
    $location = $this->dm->createQueryBuilder('\FH\Document\Location')->field('id')->equals(new \MongoId($loc))->getQuery()->getSingleResult();
    $person->removeTarget($location);
}

....
....
....
public function removeTarget($document)
{
    $this->target->removeElement($document);

    return $this;
} 
```

如果我`->prime(true)`从第一个查询中删除，它不会引发错误，但它实际上并没有删除任何元素，即使我在方法上设置断点，比较两个文档，并且数据完全相同，除了`$this->target`它们是`Location`代理文档，加载的是一个实际的`Location`文档。

我可以以某种方式启动单个结果，以便我可以`ArrayCollection`正确使用这些方法，还是我需要做一些 for 循环并比较 id？

**更新**

所以这是一个显示我遇到的问题的更新。虽然下面的解决方案只使用 MongoId(s)，但当我提交一个实际的 Document 类时，它从未真正删除该文档。ArrayCollection 作为 PersistentCollection 从 Doctrine 中返回。中的每个元素`$this->coll`都属于此 Document 类型：

```
DocumentProxy\__CG__\FH\Document\Location 
```

实际的文件是这样的：

```
FH\Document\Location 
```

该`removeElement`方法执行这样的array_search：

```
public function removeElement($element)
{
    $key = array_search($element, $this->_elements, true);

    if ($key !== false) {
        unset($this->_elements[$key]);

        return true;
    }

    return false;
} 
```

所以因为对象类型并不完全相同，即使代理对象应该是从我创建的实际 Document 继承的，也`$key`总是返回 0（false），因此不会删除该元素。两个文档之间的所有内容都完全相同，除了对象类型。

就像我说的，我想我可以通过 MongoId 来做到这一点，但是为什么不能通过提交整个对象来工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T11:41:56.510

暂时不要担心主要（真实）的东西。所做的只是告诉教条现在提取引用的数据，因此当您遍历游标时，它不必多次调用数据库。

我要做的是更改您的 removeTarget 方法以执行以下操作。

```
$this->dm->createQueryBuilder('\FH\Document\Person')->field('id')->equals($data->p_id);
$person = $q->getQuery()->getSingleResult();
$person->removeTargets($data->loc_id); 
```

**人.php**

```
public function removeTargets($targets)
{
    foreach ($targets as $target) {
        $this->removeTarget($target);
    }
}

public function removeTarget($target)
{
    if ($target instanceof \FH\Document\Location) {
        return $this->targets->removeElement($target);
    }

    foreach ($this->targets as $t) {
        if ($t->getId() == $target) {
            return $this->targets->removeElement($t);
        }
    }
    return $this;
} 
```

这意味着您不必手动执行第二个查询，因为当您迭代它时，教义会知道它需要提取该引用上的数据。然后，您可以通过使用 prime(true) 调用使其在一次调用中提取所需的信息而不是在请求对象时动态执行此操作，从而加快此操作。

# perl - 从 perl 中的脚本调用脚本

> ID：13507070
> 
> 赞同：1
> 
> 时间：2012-11-22T06:35:13.563
> 
> 标签：perl

我想通过另一个 perl 脚本调用 perl 脚本。我用过，

```
system('/home/arun/title_verifier.pl'); 
```

但它抛出，

```
sh: 1: /home/arun/title_verifier.pl: Permission denied 
```

那我怎样才能做到...

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T06:38:19.613

确保 Perl 脚本具有执行权限

```
chmod +x /home/arun/title_verifier.pl 
```

或调用脚本`perl`

```
system('perl /home/arun/title_verifier.pl'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T13:49:08.763

您也可以不使用环境 perl 运行它，但使用 perl 运行您的脚本

system($^X, "/home/arun/title_verifier.pl") == 0 or die "$!";

# iphone - 如何在 iOS 中将录制的语音修改为播放和听起来“有趣”？

> ID：13507077
> 
> 赞同：0
> 
> 时间：2012-11-22T06:35:36.927
> 
> 标签：iphone, ios, voice-recording, audio-processing, pitch-shifting

我正在创建一个需要录制声音然后播放有趣的声音的应用程序。

是否有任何库可以更好地使用此工作功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T06:51:46.527

SDK 站点提供的[SpeakHere](http://developer.apple.com/library/ios/#samplecode/SpeakHere/Introduction/Intro.html)示例应用程序有一个工作示例，说明如何使用麦克风录制语音。

现在如何播放有趣的声音。

为此，没有内置的 iOS API 可以进行独立的时间音调修改。

[Audacity](http://audacity.sourceforge.net/)中有实现时间间距拉伸的开源代码，但不知道这段代码是否已经移植到iOS。与[SoundTouch](http://www.surina.net/soundtouch/)相同。

在 DSP Dimensions 网站上有一个[Time-Pitch Stretch](http://www.dspdimension.com/admin/time-pitch-overview/) Tutorial。

还有一些关于它的博客

1.  [http://purplelilgirl.tumblr.com/post/9377269385/making-that-talking-app](http://purplelilgirl.tumblr.com/post/9377269385/making-that-talking-app)
2.  [http://maniacdev.com/2011/08/tutorials-how-to-change-pitch-instantenously-without-changeing-tempo-like-the-talking-tom-app/](http://maniacdev.com/2011/08/tutorials-how-to-change-pitch-instantenously-without-changing-tempo-like-the-talking-tom-app/)
3.  [http://dirac.dspdimension.com/Dirac3_Technology_Home_Page/Dirac3_Technology.html](http://dirac.dspdimension.com/Dirac3_Technology_Home_Page/Dirac3_Technology.html)

# git - GIT - 无法推送，因为我的路径由 git 解释

> ID：13507080
> 
> 赞同：1
> 
> 时间：2012-11-22T06:35:40.797
> 
> 标签：git, ssh

在我的服务器“源代码”上，我这样做：

```
cd /home/AyamJ/pbGIT
git --bare init 
```

在我的本地笔记本上，我这样做：

```
git push AyamJ@sourcecode:/home/AyamJ/pbGIT master 
```

我得到了错误：

```
git:'/home/AyamJ/pbGIT' is not a git command. See 'git --help'
fatal: the remote end hung up enexpectedly 
```

在我的 ~/.ssh/config

```
Host sourcecode
user AyamJ
port 31313
Host localhost
user Dell
port 22 
```

为什么该路径由 git 解释？

== 更新 ==

我有 2 个服务器（通过 git --bare init）“localhost”和“sourcecode”

我做

```
GIT_TRACE=1 git push sourcecode:/home/AyamJ/pbGIT master

got 

trace: built-in : git 'push' 'sourcecode:/home/AyamJ/pbGIT' 'master'
trace: run_command : 'ssh' 'sourcecode' 'git-receive-pack '\''/home/AyamJ/pbGIT'\'''

AyamJ@sourcecode's password:
git: '/home/AyamJ/pbGIT' is not a git command. See  'git --help'
fatal: The remote end hung up unexpectedly 
```

和

```
GIT_TRACE=1 git push localhost:/home/Dell/pbGIT master

got 

trace: built-in : git 'push' 'localhost:/home/Dell/pbGIT' 'master'
trace: run_command : 'ssh' 'localhost' 'git-receive-pack '\''/home/Dell/pbGIT'\'''

Dell@sourcecode's password:
Everything up-to-date 
```

两个服务器都有类似的 cygwin 和包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:47:24.347

如果你有一个配置文件，那么你应该使用：

```
git push sourcecode:/home/AyamJ/pbGIT master 
```

之后，尝试：

```
GIT_TRACE=1 git push sourcecode:/home/AyamJ/pbGIT master 
```

并查看“ [GIT：克隆有效，远程推送无效。通过 copssh 远程存储库](https://stackoverflow.com/questions/2736862/git-clone-works-remote-push-doesnt-remote-repository-over-copssh)”：
添加一个`--receive-pack='git receive-pack'`可能会有所帮助。
或者至少，一个`git config --global remote.origin.receivepack "git receive-pack"`.
并检查您是否设置了[`GIT_SSH`变量](https://stackoverflow.com/a/2737826/6309)。

确保使用最新的 Git 版本进行尝试，看看问题是否仍然存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:54:04.190

## 使用相对路径

使用相对路径它可能会起作用：

```
git push AyamJ@sourcecode:pbGIT master 
```

我不确定原因，但是用 abs 路径测试它对我来说失败了，所以这可能是你的错误/部分错误。**但这**不是使用 git 的正常方式。

## 保持正常

首先确保设置了 ssh 配置，这样您就不需要用户名和密码，即这应该可以工作：

```
(notebook)$ ssh sourcecode
...
(server)$ 
```

在本地 git repo - 创建一个指向远程服务器存储库的远程[：](http://www.kernel.org/pub/software/scm/git/docs/git-remote.html)

```
(notebook)$ git remote add sourcecode:pbGIT origin
(notebook)$ git push 
```

故意让最后一个命令没有参数 - 使用最新版本的 git 它会给出如下错误消息：

```
fatal: The current branch master has no upstream branch.
To push the current branch and set the remote as upstream, use
   git push --set-upstream origin <current branch name> 
```

错误消息告诉您如何制作它，以便您可以在没有参数的情况下推/拉，因此执行该命令。对于旧版本的 git，命令是相同的，只是没有错误消息。执行此命令后，例如：

```
git push --set-upstream origin master 
```

从这一点开始，没有必要将参数与`git push`and一起使用`git pull`

## 反过来做

从头开始，或者如果远程存储库已经存在，实际上相反更容易做这些事情

```
(notebook)$ ssh sourcecode
...
(sourcecode)$ mkdir x.git
(sourcecode)$ cd x.git
(sourcecode)$ git init --bare
(sourcecode)$ exit
(notebook)$ git clone sourcecode:x.git
Cloning into 'x'...
warning: You appear to have cloned an empty repository. 
```

请注意，上面已经在名为的文件夹中创建了远程 git 存储库`whatever.git`- 这只是标识 git 文件夹/存储库的约定，它没有任何特殊含义，尽管它可能在所有示例中都有。

如果之后您查看`.git/config`文件，您会看到如下内容：

```
(notebook)$ cd x; more .git/config
    [core]
    repositoryformatversion = 0 
    filemode = true
    bare = false
    logallrefupdates = true
[remote "origin"]
    fetch = +refs/heads/*:refs/remotes/origin/*
    url = sourcecode:x.git
[branch "master"]
    remote = origin
    merge = refs/heads/master 
```

这表明远程源点指向源代码服务器，并且存在的一个分支`master`, 跟踪远程`origin`.

# d3.js - 识别此 d3 堆积条形图示例中使用的函数

> ID：13507083
> 
> 赞同：2
> 
> 时间：2012-11-22T06:35:51.787
> 
> 标签：d3.js, stackedbarseries

我正在学习 d3 教程，并在学习过程中同时学习 d3 和 javascript。我的目标是了解和更改此 URL 上的堆叠条形图示例：

[http://bl.ocks.org/3886208](http://bl.ocks.org/3886208)

在这张图表的代码中，有这样一段话：

```
data.forEach(function(d) {
    var y0 = 0;
    d.ages = color.domain().map(function(name) **{ return {name: name, y0: y0, y1: y0 += +d[name]}; });**
    d.total = d.ages[d.ages.length - 1].y1;
  }); 
```

您能否告诉我在粗体行“{ return {name: name, y0: y0, y1: y0 += +d[name]}”中正在执行什么样的过程或功能？我知道它正在定义 (name) 的处理方式，但代码非常简洁，以至于我无法找出搜索词来发现它在做什么。我希望得到这样的回应：“这是某人在 js 或 d3 中执行 x 的示例，您需要去这里阅读更多相关信息。”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T14:23:15.730

大括号包围的东西是一个**对象字面**量。**匿名函数** 为返回的`function(name)`数组中的每个值返回一个对象字面量`color.domain()`。 `map`是一个内置的 javascript 数组。

希望这足以让您搜索更多信息。对象字面量在 javascript 中被大量使用；您最好阅读一本体面的入门书（例如 Crockford 的*Javascript：The Good Parts*），其中将涵盖此内容、匿名函数、闭包等（这是在 d3 等框架中经常使用的习语）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-04T22:27:08.403

我相信您指的是[堆叠条形图的 D3.js 示例](http://bl.ocks.org/mbostock/3886208)

代码返回一个对象，该对象被初始化为包含 3 个不同的对象（`name`和`y0`）`y1`，在将值分配给`y1`它之后，变量的值也增加`y0`了`d[name]`. 我正在重写相同的代码，但语法不同，所以更容易理解。

```
var y0 = 0;
d.ages = color.domain().map(function(name) { return {name: name, y0: y0, y1: y0 += +d[name]}; }); 
```

可以翻译成：

```
var y0 = 0; // Initialize the temp var

d.ages = color.domain()
  .map(function(name) { 
    var myObj = { // Create and initialize the variable that will be returned
      name: name, 
      y0: y0, 
      y1: y0 + Number(d[name])
    };

  y0 += Number(d[name]); // Increase y0

  return myObj; // return the object and continue with the remaining values if there's a list
}); 
```

因此，例如，如果在您的输入数据中，您收到一个列表，其中包含一行的值`[3, 5, 9]`，它将`ages`为该行创建一个包含 3 个其他对象的对象，例如：

```
 ages: [
    Object { name="youVariableName", y0=0, y1=3}
    Object { name="youVariableName", y0=3, y1=8}
    Object { name="youVariableName", y0=8, y1=17}
  ] 
```

其余的行以此类推，以及它们的对应值。

# ios - 如果 iCloud 针对应用程序 ID 禁用，iOS 会备份文档文件夹吗？

> ID：13507087
> 
> 赞同：3
> 
> 时间：2012-11-22T06:36:20.580
> 
> 标签：ios, icloud

我正在开发应用程序，在文档文件夹中创建数千个文件和文件夹。我不想在 iCloud 上进行备份。我已针对应用程序 ID 禁用 iCloud。iCloud 会针对我的应用使用自动应用同步功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T05:01:45.667

事实证明，针对 app_id 禁用 iCloud 支持与 iCould 备份/恢复功能没有任何关系，如果我想避免将我的数据存储在 iCloud 上，那么我可以使用缓存，或者我必须明确地将 NSURLIsExcludedFromBackupKey 键传递给文件，正如指出的那样通过@Suresh

# c++ - 扫描头文件并报告可用代码的程序？

> ID：13507095
> 
> 赞同：1
> 
> 时间：2012-11-22T06:36:51.783
> 
> 标签：c++, c, header, static-analysis

当我包含一个头文件时，我经常想知道拉入了什么。

*   我现在可以使用哪些功能？
*   我可以实例化哪些类，它们的功能是什么？
*   命名空间中是否包含任何内容？
*   全局命名空间中有任何东西吗？

文档并不总是回答这些问题，也不提供任何保证。

我可以查看源代码，但很难观察还包含其他头文件树的大型头文件。
有没有什么好的程序可以进行这种分析？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T08:39:44.463

使用像[doxygen](http://www.doxygen.nl/)这样的工具。你向它提供你图书馆的资源，它会输出交叉引用的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T06:54:19.290

您可以使用编译器的`-E`(或`/E`; 所有 C 和 C++ 编译器使用此选项完全使用此名称) 选项来获取翻译单元的预处理输出。这会转储编译器看到的所有声明。看来，您只关注函数和类，而该`-E`选项还将编写所有声明。如果你真的只想要函数和类，你可以使用 clang 库来获取抽象语法树 (AST) 并只转储这些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T09:56:05.600

如果您使用的是 Visual Studio，则可以选择使用代码助手，例如 MS intellisense、[wholetomato 视觉辅助](http://www.wholetomato.com/)或[resharper](http://www.jetbrains.com/resharper/)。这些可以在给定的上下文中为您提供所有可访问的变量、类、函数、类型、命名空间、常量等。

其他 IDE 也可能提供此功能，但我从未在 Visual Studio 中使用过它。[正如这里](https://stackoverflow.com/questions/780837/what-is-a-good-linux-ide-for-code-completion)所指出的，QtCreator 似乎是一个不错的选择。

# visual-studio-2010 - ClickOnce 应用程序 EXE 文件证书签名

> ID：13507098
> 
> 赞同：2
> 
> 时间：2012-11-22T06:36:56.327
> 
> 标签：visual-studio-2010, clickonce

我正在通过 ClickOnce 分发我的应用程序。

现在我正在签署 ClickOnce 清单。setup.exe 由有效的发布者签名。安装后，还有另一个 EXE 文件供应用程序运行。

如何签署应用程序 EXE 文件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-05T12:17:17.717

您应该在您的 CSPROJ 文件中使用 postbuild 任务（请注意，我仅签署“RELEASE”配置）：

```
 <Target Name="SignOutput" AfterTargets="CoreCompile" Condition="'$(ConfigurationName)'=='Release'">
    <PropertyGroup>
      <TimestampServerUrl>http://timestamp.verisign.com/scripts/timestamp.dll</TimestampServerUrl>
      <ApplicationDescription>my app</ApplicationDescription>
      <SigningCertificateCriteria>/n "my company."</SigningCertificateCriteria>
    </PropertyGroup>
    <ItemGroup>
      <SignableFiles Include="$(ProjectDir)obj\$(ConfigurationName)\$(TargetName)$(TargetExt)" />
    </ItemGroup>
    <Exec Condition=" '$(ConfigurationName)'=='Release'" Command="&quot;c:\Program Files (x86)\Windows Kits\8.0\bin\x64\signtool.exe&quot; sign $(SigningCertificateCriteria) /d &quot;$(ApplicationDescription)&quot; /t &quot;$(TimestampServerUrl)&quot; &quot;%(SignableFiles.Identity)&quot;" />
  </Target> 
```

# .net - 如何编写一个 SQL Server 过程来执行多个查询？

> ID：13507099
> 
> 赞同：-2
> 
> 时间：2012-11-22T06:36:57.863
> 
> 标签：.net, sql, sql-server, stored-procedures

.net 网络应用程序开发。

我参与了一个关于大学的项目。在这个项目中，我必须通过单击一次按钮来影响 3 个表，因为我必须一次执行 3 个查询。

所以我的要求是编写一个程序来一次执行 3 个查询。

请帮助我前进。

谢谢你，再见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:40:27.210

问题非常广泛且不具体......

因此，您只需编写该过程并执行三个查询....

```
CREATE PROCEDURE dbo.YourProcedureNameHere  
     *possibly a list of parameter*
AS BEGIN
   -- Query #1
   DELETE FROM dbo.YourTableNo1
   WHERE (some condition)

   -- Query #2
   UPDATE dbo.YourTableNO2
   SET SomeColumn = SomeSIllyValue
   WHERE (yet another condition)

   -- Query #3
   SELECT (list of columns)
   FROM dbo.YourTableNo3
   WHERE (you guessed it - another condition)
END 
```

除非您能提供，否则我们真的无法为您提供更多帮助

*   表结构
*   有关您要运行的查询的更多详细信息
*   您面临什么样的问题/问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:42:21.097

有什么问题？

```
create procedure dbo.usp_3Queries
(
    @Variable1 int,
    @Variable2 int,
    @Variable3 int
)
as
begin
    update dbo.Table1 set Column1 = @Variable1 where Column2 = @Variable2

    update dbo.Table3 set Column3 = @Variable3 where Column2 = @Variable2

    update dbo.Table4 set Column3 = @Variable3 where Column2 = @Variable2
end 
```

# openerp - 是否可以在 openerp 中使用电子邮件模板发送内联图像？

> ID：13507104
> 
> 赞同：2
> 
> 时间：2012-11-22T06:37:20.393
> 
> 标签：openerp

我必须在 OpenERP 中使用电子邮件模板发送图像，但我必须插入它，就像我们在 gmail、yahoo 和 stackoverflow.com 中都有插入图像的功能一样。

我必须像这样发送图像是因为我希望它应该在打开邮件的同时显示，以及文本。

如果我使用附件发送它，它会包含在附件中，我们可以在下载图像后立即看到。我不需要这个下载选项，我需要的是打开图像。

提前致谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T09:56:54.627

在电子邮件中嵌入图像的常用方法有 3 种（按复杂度递增的顺序）：使用公共 URL、使用 Data URI 将图像数据内联到`src`属性中，以及使用附加到电子邮件的图像。在所有 3 种情况下，您都可以使用常规 HTML 技术将它们包含在 OpenERP 电子邮件模板的 HTML/Rich-Text 正文中：例如使用[`<img src="..."/>`](https://developer.mozilla.org/en-US/docs/HTML/Element/Img)标签或 CSS[`background-image`](https://developer.mozilla.org/en-US/docs/CSS/background-image)属性。只有前两种技术可以在 OpenERP 的电子邮件模板中开箱即用。

## 1.使用托管图像

图片 URL 可以只是您网站上的公共 URL 或 Internet 上的任何图片托管服务：`<img src="http://www.example.com/myimage.png">`. 这与在 stackoverflow 上嵌入图像时发生的情况非常相似，因为图像首先会自动上传到[imgur.com](http://imgur.com)，并且`img src`属性指的是 imgur.com 上上传图像的 URL。

这是可行的，但现在大多数电子邮件客户端（thunderbird、gmail、outlook ......）都会阻止远程图像，因为它们通常被滥用来检测给定电子邮件被其收件人打开的事实（如果图像被下载，这意味着邮件已打开）。通常，收件人必须单击横幅或警告才能显示这些远程图像。

这是与 OpenERP 的电子邮件模板开箱即用的唯一技术。

## 2.使用Data URI内联图片数据

标记的`src`属性`img`可以使用[Data URI](http://en.wikipedia.org/wiki/Data_URI_scheme) ( [RFC 2397](http://tools.ietf.org/rfc/rfc2397.txt) ) 方案来内联包含图像二进制源。图像标签如下所示：

```
<img src="data:mime-type;encoding,<encoded_image_data>"/> 
```

对于 PNG 图像，这可能看起来像这样

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA..."/> 
```

您可以将此技术用于 OpenERP 电子邮件模板，并且它没有被电子邮件客户端阻止的缺点。但是，您需要手动将图像转换为 base64 ^([A])。这也将大大增加您的模板和外发电子邮件的大小，并有一些限制（例如，如果您想要最大的兼容性，最大 32KB）。

^([A]) :如果你想要一个简单的方法来做转换，谷歌“[在线 base64 文件编码器”](https://www.google.be/webhp#q=online+base64+file+encoder)

## 3.使用附加图像（OpenERP目前不支持）

[RFC 2111](http://tools.ietf.org/rfc/rfc2111.txt)`cid:`为消息正文部分指定了一种使用URL引用其他正文部分的方法。例如，`img src`电子邮件中的属性可以引用其中一个附件。从技术上讲，`img`标签可能如下所示：

```
<img src="cid:some_unique_content_id/> 
```

其中`some_unique_content_id`是包含图像的消息部分的 Content-ID。这是最终（原始）电子邮件中的样子：

```
------=_NextPart_WHATEVER_ID
Content-Type: image/jpeg;
    name="image.jpg"
Content-Transfer-Encoding: base64
Content-ID: <some_unique_content_id>
Content-Disposition: inline;
    filename="image.jpg"

/9j/4AAQ...continuation_of_the_base64_encoded_image 
```

此技术也没有被电子邮件客户端阻止的缺点，但实施起来更复杂，因为您需要为`Content-ID`每个附件专门分配一个，并且通过网络发送的最终电子邮件更大，因为它必须包含实际图像。

OpenERP 中目前不提供此功能，但实施起来并不困难。一种简单的方法是在最终邮件[由电子邮件层制作](http://bazaar.launchpad.net/~openerp/openobject-server/6.1/view/4304/openerp/addons/base/ir/ir_mail_server.py#L264)时自动为所有附件（例如`attachment_1`，附件。`attachment_2``cid`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:45:43.530

这可能有用[的在 html 电子邮件中嵌入图像](https://stackoverflow.com/questions/6706891/embedding-image-in-html-email)

虽然我不认为这是一个与 openerp 相关的问题......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-16T07:43:26.993

以下是我使用 Odoo 11 在我的销售订单电子邮件模板中添加公司徽标的方法：

```
<p>
% set company = object.company_id or ctx.get('company')
% if company.logo:
% set field_value = '%s' % company.logo
% set company_logo_base64 = 'data:image/*;base64,%s' % field_value[2:-1]
% endif
<img t-if="company_logo_base64" src="${company_logo_base64}">
</p> 
```

# c++ - 表达式必须有指向函数类型的指针

> ID：13507105
> 
> 赞同：-1
> 
> 时间：2012-11-22T06:37:22.143
> 
> 标签：c++, function, pointers, reference

我对 C++ 相当陌生，我正在尝试学习如何使用指针。我有以下文件创建坐标，然后使用随机数生成器在随机方向上移动它们。

值 sigmaf_point 是从文本文件中输入的：

```
 void methane_coords(double *&sigmaf_point)

 double dummy_int = 1;
 string dummystring;
        string s;

        ifstream Dfile;
        std::stringstream out;

        out << 1;
        s = out.str() + ".TXT";
        Dfile.open (s.c_str());

        if (Dfile.fail())
        {
            return;
        }

        for (int i=0; i<dummy_int; i++)
        {
        Dfile >> sigmaf_point[i];
        } 
```

然后我在另一个函数中使用它：

```
double initial_energy(double **coords_fluid, const double *box_size){

// Loop over all pairs of atoms and calculate the LJ energy
double total_energy = 0;

for (int i = 0; i <= n_atoms-1; i++)
{   

        sf1=sigmaf_point(coords_fluid[i][3]);
        ef1=epsilonf_point(coords_fluid[i][3]);

        // Energy fluid-fluid
        for (int j = i+1; j <= n_atoms-1; j++)
        {               
            sf2=sigmaf_point(coords_fluid[j][3]);
            ef2=epsilonf_point(coords_fluid[j][3]);             

            double delta_x = coords_fluid[j][0] - coords_fluid[i][0];
            double delta_y = coords_fluid[j][1] - coords_fluid[i][1];
            double delta_z = coords_fluid[j][2] - coords_fluid[i][2];

            // Apply periodic boundaries
            delta_x = make_periodic(delta_x, box_size[0]);
            delta_y = make_periodic(delta_y, box_size[1]);
            delta_z = make_periodic(delta_z, box_size[2]);

            // Calculate the LJ potential
            s=(sf1+sf2)/2.0;
            e=pow((ef1*ef2),0.5);
            double r = pow((delta_x*delta_x) + (delta_y*delta_y) +
                      (delta_z*delta_z),0.5)/s;

        double e_lj = 4*((1/pow(r,12.0))-(1/pow(r,6.0))/e);

        total_energy = (total_energy + e_lj);
        }
    } 
```

coords_fluid 在主文件中创建，如下所示：

```
double **coords_fluid = new double*[5000]; 
```

现在问题出在 sf1=sigmaf_point(coords_fluid[i][3]);

对于 sigmaf_point，我收到错误“表达式必须具有指向函数类型的指针”。我对此有点困惑，我知道这是关于我如何调用变量但似乎无法修复它。

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T12:04:01.500

首先：对指针的引用完全没有用，因为指针已经是一种引用。所以`double *&`改为`double *`or `double &`。它会更快。

此外，我看到您将`sigmaf_point`其用作函数和数组。哪一个？你能给出声明`sigmaf_point`吗？

假设这是一个数组更改

```
sf1 = sigmaf_point(coords_fluid[i][3]); 
```

至

```
sf1 = sigmaf_point[coords_fluid[i][3]]; 
```

# iphone - 在 uitextfield 中看不到数字

> ID：13507107
> 
> 赞同：0
> 
> 时间：2012-11-22T06:37:22.887
> 
> 标签：iphone, objective-c, ios, ipad, uitextfield

我有一个 UITextField 可以输入宽度为 50 和高度为 24 的数字，但是当我输入数字时，这些数字在返回键盘后部分可见（数字的一半），这是完美的。以下是我的代码。任何想法请帮助我

```
 TxtFieldAdditionalFee=[[UITextField alloc]initWithFrame:CGRectMake(150, 37, 50, 25)];
    TxtFieldAdditionalFee.backgroundColor=[UIColor whiteColor];
    [TxtFieldAdditionalFee setTextColor:[UIColor colorWithRed:(66/255.f) green:(119/255.f) blue:(169/255.f) alpha:1.0f]];
    TxtFieldAdditionalFee.keyboardAppearance=UIKeyboardAppearanceAlert;
    [TxtFieldAdditionalFee setKeyboardType:UIKeyboardTypeNumbersAndPunctuation];
    TxtFieldAdditionalFee.font=[UIFont fontWithName:@"Verdana" size:12];
    TxtFieldAdditionalFee.delegate=self; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:49:13.170

删除 UItextfield 的背景颜色。使其成为 clearColor 并在最后创建文本字段的代表。

让我知道它是否有效..!!!

快乐编码！！！

# django - Django 和 nginx。我还需要apache吗？

> ID：13507118
> 
> 赞同：4
> 
> 时间：2012-11-22T06:38:14.670
> 
> 标签：django, nginx, fastcgi, wsgi

我已经搜索了这个主题，建议似乎是 nginx 应该在那里提供静态文件和 apache+wsgi 来处理 Django。很多这些信息都是几年前的，所以我想知道是否有一种方法可以在不降低性能的情况下简化它，并且只依赖 Nginx 和 fastCGI 和/或 wsgi。

我是非 Heroku 部署的新手，所以这就是为什么我可能听起来我不知道我在说什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T09:34:34.113

不，你不需要 Apache+wsgi 和 Nginx+fCGI/wsgi。Nginx 可以非常快速地提供静态文件，并且它将使用 fCGI/wsgi 来处理其余的请求。

您应该阅读此问题[1] 的答案以及此处提到的其他相关问题。

[1]。[使用Django的fastcgi服务器有什么缺点](https://stackoverflow.com/questions/11216658/what-is-the-disadvantage-of-using-djangos-fastcgi-server)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T09:12:35.100

如果你想走nginx路线，最好的选择是：

*   nginx -> gunicorn
*   nginx -> uWSGI

由于 FASTCGI/WSGI 适配器以及它们如何与服务器一起部署的问题，在 FASTCGI 之上运行 Python WSGI 应用程序通常不是那么好的体验。

Apache/mod_wsgi 仍然是一个超出可接受的解决方案，并且在运行时它实际上会以更少的资源更好地执行：

*   nginx -> Apache/mod_wsgi

因为瓶颈不会是网络服务器，所以最终你选择哪个并不重要，只要你正确设置它，大多数人不会这样做，因为那里的网站无论如何都没有获得足够的流量，或者他们没有适当的监控来知道他们需要改变什么。

总的来说，选择你认为更容易管理的东西是开始时最好的做法。

有关您的实际性能瓶颈将是什么以及监控的重要性的一些背景信息，请观看：

*   [http://lanyrd.com/2012/pycon/spcdg/](http://lanyrd.com/2012/pycon/spcdg/)

话虽如此，你提到了 Heroku。现在，Heroku 确实只有一次选择，那就是使用 gunicorn，您无需担心 nginx。不过，这本身就是一个问题，因为仅使用 gunicorn 并不是提供静态媒体资产的好选择，因此 Heroku 几乎被迫在其他地方提供静态资产。

# jquery - 如何向左滚动页面 - 在左侧 div 超出屏幕的右侧

> ID：13507140
> 
> 赞同：0
> 
> 时间：2012-11-22T06:40:16.547
> 
> 标签：jquery, html, css

我在主页、模板和 3d 的页面中有三个 div。模板和 3d div 将驻留在屏幕外。

当我单击导航锚时，页面滚动到目标 div。

我需要使用 jQuery 的滚动功能，因为将来我会在平行中使用这个滚动功能。

下面是用于滚动但无法显示屏幕外的左 div 的代码。

和 js 小提琴链接 [http://jsfiddle.net/naresh_kumar/CEC3L/4/](http://jsfiddle.net/naresh_kumar/CEC3L/4/)

```
<div id="page" class="clearfix" style="width: 1800px; left: -500px;">
    <div id="header">  
        <div class="nav-enabled">
            <ul id='navigation'>
                <li><a href="#home">Home</a></li>
                <li><a href="#templates">Templates</a></li>
                <li><a href="#3d">3D</a></li>
            </ul>
        </div>
    </div>

    <div id="templates" class="content" style="height: 378px; width: 516px;">
        Template
    </div>

    <div id="home" class="content" style="height: 378px;  width: 516px;">
        Home
    </div>

    <div id="3d" class="content" style="height: 378px; width: 516px;">
        3D
    </div>
</div>   

<script>
   $(function() {
       $('ul#navigation a').bind('click',function(event){
           var $anchor = $(this);
           $('html, body').stop().animate({
               scrollLeft: $($anchor.attr('href')).offset().left
                   }, 1000);
               event.preventDefault();
           });
       });
</script>

<style>
    #page
    {
        background: none repeat scroll 0 0 #E6E6E8;
        height: auto;
        min-height: 100%;
        position: relative;
        top: 0;
    }
    .content
    {
        background: none repeat scroll 0 0 #E6E6E8;
        color: #000000;
        float: left;
    }
    #header
    {
        clear: both;
        color: #FFFFFF;
        display: block;
    }
    #header .nav-enabled
    {
        display: block;
        float: left;
        height: auto;
        left: 0;
        opacity: 0.72;
        padding: 20px;
        position: fixed;
        top: 0;
        width: auto;
        z-index: 5;
    }
</style> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T07:01:46.737

解决了。您可以查看链接

请参见下面的示例..
只需重新排列 div 位置。

```
<div id="home" class="content" style="height: 378px;  width: 516px;">
    Home
</div>
     <div id="templates" class="content" style="height: 378px; width: 516px;">
   Template
</div>
<div id="3d" class="content" style="height: 378px; width: 516px;">
    3D
    </div>
</div>   ​ 
```

[http://jsfiddle.net/CEC3L/8/](http://jsfiddle.net/CEC3L/8/)

[http://jsfiddle.net/CEC3L/26/](http://jsfiddle.net/CEC3L/26/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:49:00.917

你的`#page`div 有`left: -500px`.

```
<div id="page" class="clearfix" style="width: 1800px; left: -500px;"> 
```

删除那个

```
<div id="page" class="clearfix" style="width: 1800px;"> 
```

它工作正常。

* * *

如果您希望“主页”面板在页面加载时可见，那么您需要保留偏移量，然后在页面加载时使用一点 javascript 来“取消”偏移量，并将 scrollLeft 调整为同时。

[http://jsfiddle.net/CEC3L/20/](http://jsfiddle.net/CEC3L/20/)

# css - 弹出的 HTML5 选项卡超链接

> ID：13507156
> 
> 赞同：0
> 
> 时间：2012-11-22T06:42:00.653
> 
> 标签：css, html

在将其发布在这里之前，我已经做了很多研究。所以，在这里我有一些不完美之处。[我的链接](http://eminli.net/test)

**问题1：**如何使CV按钮自动弹出pdf简历或简历。因此，完成此操作后，我不需要 div 将 lorem 作为超链接。

在导航类下：

```
<li><a href="#cv" target="_blank">CV</a></li> 
```

当我用pdf链接替换href中的#cv时，整个网站都出错了。

暂时就是这样。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:00:06.723

Javascript：

```
<script language="javascript" type="text/javascript">
<!--
function popitup(url) {
    newwindow=window.open(url,'name','height=200,width=150');
    if (window.focus) {newwindow.focus()}
    return false;
}

// -->
</script> 
```

HTML：

```
<li><a href="" onclick="return popitup('cv.pdf')" >CV</a></li> 
```

# php - 为什么这个错误虽然我的 php 版本大于 5

> ID：13507158
> 
> 赞同：-3
> 
> 时间：2012-11-22T06:42:09.850
> 
> 标签：php, datetime

```
$dateq = date_create();
echo date_timestamp_get($dateq); 
```

**错误**-

```
Fatal error: Call to undefined function date_timestamp_get() in /home/Sites 
```

PHP版本——

```
echo phpversion(); //5.2.17 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:44:46.200

php版本必须大于5.3.0

请参阅[http://php.net/manual/en/function.date-timestamp-get.php](http://php.net/manual/en/function.date-timestamp-get.php)更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:44:34.227

因为 date_timestamp_get 需要 5.3 版本

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:09:11.530

```
    date_timestamp_get 需要 php 版本 >= 5.3.0

```

# linux - *.dsc 文件如何与 *.deb 和源代码文件相关联

> ID：13507162
> 
> 赞同：12
> 
> 时间：2012-11-22T06:42:52.143
> 
> 标签：linux, ubuntu, compilation, package, debian

在没有打包系统的情况下，我们有 (A) 源代码，可以将其翻译/编译为 (B) 二进制代码。

对于 debian/ubuntu 包，我们有 (1) 源代码，(2) 源包 - **dsc**文件和 (3) 二进制包 - **deb**文件。(2) 与 (1) 和 (3) 相关的源包如何？为什么我们需要它？而且，最重要的问题是：从 (1) 生成 (2) 和 (3) 的工作流是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-22T17:29:16.673

工作流程通常大致如下：

1.  不隶属于 Debian 的人编写了一些源代码并将其作为一个包发布在网络上，例如[splint-3.1.2.tar.gz](http://www.splint.org/downloads/splint-3.1.2.src.tgz)
2.  Debian 的某个人下载了源代码，并写道

    1.  一组补丁文件，用于在 Debian 上构建源代码并符合 Debian 指南。跑

        ```
        curl -s 'http://archive.ubuntu.com/ubuntu/pool/universe/s/splint/splint_3.1.2.dfsg1-2.diff.gz' | gunzip -dc | less 
        ```

        看到这个示例包。

    2.  描述包的[文本元数据文件](http://archive.ubuntu.com/ubuntu/pool/universe/s/splint/splint_3.1.2.dfsg1-2.dsc)——这是`.dsc`文件和`debian/control`文件。“DSC”是 Debian 源代码控制的首字母缩写。
3.  二进制`.deb`包是从原始上游源代码为每个架构构建的，并应用了 Debian 特定的补丁。[这是一个这样的文件](http://archive.ubuntu.com/ubuntu/pool/universe/s/splint/splint_3.1.2.dfsg1-2_amd64.deb)。[Debian Binary Package Building HOWTO](http://tldp.org/HOWTO/html_single/Debian-Binary-Package-Building-HOWTO/)解释了这些文件的格式以及如何检查它们。

该`.dsc`文件不用于构建逻辑，更多用于元数据。然而，沿途的许多工具都需要它。例如，该`Build-Depends:`字段用于安装所需的构建依赖项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T15:45:40.823

它实际上比这复杂得多。Debian 软件包背后的理念是它们包含构建页面所需的所有信息。通常，源被修改为包含一个`debian`目录，该目录包含一个文件，该`control`文件描述了该包和它与之交互的其他包的依赖关系（例如，中断、替换、提供虚拟包）。一个`rules`文件解释了如何构建和安装包。由于单个源包可以变成许多二进制包（例如，、、、），因此也有关于如何打包`foo-utils`的`libfoo0`说明`libfoo-dev`。`debuild`实际上读取这些信息，进行编译，并生成二进制包。一个微妙之处：如果`foo`使用`libbar-dev`，我实际上可能不知道/关心什么版本`libbar`我使用的二进制包。`pbuilder`在干净的环境中运行`debuild`，因此没有机会针对您未明确指定的内容进行编译。

有关详细信息，请参阅[Debian 新维护者指南](http://www.debian.org/doc/manuals/maint-guide/)。

# ios - 得到零而不是浮点值-Objective C

> ID：13507163
> 
> 赞同：0
> 
> 时间：2012-11-22T06:42:59.340
> 
> 标签：ios, expression

我有一个来自 strCal 字符串 strcal 值的表达式是 @"((24 - 18) / 87) * 100" 我想让结果正确为 4 位小数，所以我使用 floatValue 方法检索结果

但是我得到 0 而不是 6.8966

这是我的代码

```
NSString *strCal=[NSString stringWithFormat:@"   
                      ((%d%@)%@)%@",number,strMinus,strDivide,strMultiple];
    NSExpression *exp=[NSExpression expressionWithFormat:strCal];
    float result=[[exp expressionValueWithObject:nil context:nil] floatValue];
    NSLog(@"result:%f",result); 
```

结果：0.000000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:55:08.233

我通过将字符串 strCal 中的 87 转换为如下所示的浮点值自己找到了它

@"((24 - 18) / 87.00) * 100"

为什么因为意味着被除数或除数必须为浮点数，以便编译器（LLVM）以浮点数输出答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T05:36:47.753

我认为您需要 User [DDMathParser](https://github.com/davedelong/DDMathParser)在这种情况下最好。我在我的一个项目中使用了它，该项目面临与您遇到的相同问题

`DDMathEvaluator *eval = [DDMathEvaluator defaultMathEvaluator]; id value=[eval evaluateString:@"1/2" withSubstitutions:nil error:&error]; NSLog(@"Result %@",value); Result 0.5`

# iphone - 如何避免这个度数到弧度误差？

> ID：13507171
> 
> 赞同：10
> 
> 时间：2012-11-22T06:43:58.400
> 
> 标签：iphone, core-animation, core-plot, pie-chart

在使用核心图开发饼图时，我为给定代码添加了动画

```
 CABasicAnimation *rotation = [CABasicAnimation animationWithKeyPath:@"transform"];
   CATransform3D transform = CATransform3DMakeRotation(DegreesToRadians(360), 0, 0, 1);
   rotation.toValue = [NSValue valueWithCATransform3D:transform];  
    rotation.duration = 10.0f;
    [pieChart addAnimation:rotation forKey:@"rotation"]; 
```

此代码给出以下错误语义问题：

```
Implicit declaration of function 'DegreesToRadians' is invalid in C99 
```

我能做些什么来避免这种情况？

并且运行时也会出现以下错误：

```
Apple_o  Linker id error  "_DegreesToRadians", referenced from: 
```

谢谢并恭祝安康

维杰亚古玛

Rhytha 的 iOS 开发人员

[https://rhytha.com/](https://rhytha.com/)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-22T06:54:10.830

只需定义一个宏，如：

```
#define DEGREES_RADIANS(angle) ((angle) / 180.0 * M_PI) 
```

并更改您的方法，例如：

```
CATransform3D transform = CATransform3DMakeRotation(DEGREES_RADIANS(360), 0, 0, 1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T06:52:29.690

```
#define RADIANS_TO_DEGREES(radians) ((radians) * (180.0 / M_PI)) 
```

将此代码写在要转换的 .m 文件顶部

让我知道它是否有效

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-18T06:39:53.340

对于简单的角度，只需使用弧度：

```
Transform3D transform = CATransform3DMakeRotation(2 * M_PI, 0, 0, 1); 
```

典型角度的快速列表：

```
Degrees | Code
--------+---------
360     | 2 * M_PI
180     | M_PI
90      | M_PI_2
45      | M_PI_4 
```

# ssl - SSL 数据包末尾的额外字节（超出数据包长度）

> ID：13507172
> 
> 赞同：1
> 
> 时间：2012-11-22T06:44:01.037
> 
> 标签：ssl, openssl

我的应用程序使用 SSL over SMTP。但我最后遇到了额外字节的问题。

我收到的数据包如下：（SSL 记录数据包的十六进制转储）

17 *03 01* **01 00** 9A 07 74 E3 4B E0 07 17 71 38 BF 29 7E 70

E9 14 CC B1 97 77 4C B9 AB A0 9F 88 7B D4 ED 14 8E 97 F2

5A BE 46 56 D4 12 BC 15 01 49 EE CE A1 ED 3F D3 6E 7F AA

DC 6B DF 41 11 74 7B 55 B8 D3 3E 8D EF 96 52 B0 BD 50 35

09 E7 2A FF 0E 39 58 C7 91 99 95 22 6F B0 73 57 28 B4 EA

C6 28 4C DC 5C DA 6C 31 FB 63 71 7D 08 F0 DD 78 C4 08 C5

27 90 04 C7 09 59 E4 83 F4 4D 9A 7B 65 E9 AF 38 44 B4 CD

9E 4D BE 80 0D 07 24 8D C3 79 99 DC 02 81 D7 97 21 16 0B

28 44 82 ED E4 5F E6 91 81 A5 28 C1 C8 92 60 36 4E DE 27

AF D0 2B EE FB 9D 12 9C 2B 4F 3F 29 F2 04 8F DC 21 39 4F

80 23 7E 78 3C A0 29 E0 67 E7 9F 90 B6 1F D4 08 63 3E CE

73 E1 17 72 8D B1 8C 3D A8 59 C0 0F 03 59 7A A6 5D F9 7A

40 57 D6 8D 94 48 93 BF D8 17 C6 70 79 36 13 D0 F1 D1 D2

69 D4 05 9D 67 86 6D E9 66 D0 83 4A D8 5E **20**

从 SSL 3.1 协议看，这个数据包的长度是 256 字节。但最后多了一个字节（最后以**粗体显示**）。

由于末尾有这个额外的字节，当读取下一个数据包时，也会读取这个 20 并导致**SSL_R_WRONG_VERSION_NUMBER**错误（我正在使用 OpenSSL Library for SSL）。我收到的下一个数据包就像（根据数据包嗅探器）17 03 01 00 18 ...

但是当下一次读取完成时，OpenSSL 将数据包读取为 20 17 03 01 .. 这会导致错误（因为 17 03 是 03 01 的错误版本）

我想知道这（最后的额外字节）是否是 SSL 标准的一部分。请建议我如何在 OpenSSL 中处理这种情况。OpenSSL 版本是 1.0.0。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-03T08:08:30.467

不，额外的字节不是 SSL 标准的一部分。

根据 SSL 标准（TLS 1.0 的 RFC 2246，TLS 1.2 的最新是 RFC 5246），SSL 的记录如下：

```
struct {
    ContentType type;
    ProtocolVersion version;
    uint16 length;
    select (CipherSpec.cipher_type) {
        case stream: GenericStreamCipher;
        case block:  GenericBlockCipher;
    } fragment;
} TLSCiphertext; 
```

该片段将完全符合`uint16 length`成员指定的长度。因此，这 20 必须被服务器实现错误地插入，或者当数据在网络中时，中间的某些其他软件正在插入它。

Openssl 准确读取成员指定的字节数，`uint16 length`这就是它不读取 20 的原因。

您可以关注以下几点：
1\. 握手后立即传输的第一个应用程序数据包是否会发生这种情况？（根据内容类型，我假设此数据包转储用于应用程序数据）
2\. 这是随机发生的吗？与该特定服务器的所有连接是否都表现出相同的行为？
3.您可以尝试获取在服务器端发送的数据包的转储，以查看数据包在服务器端本身发送时是否存在 20 或在其飞行过程中被添加。
4\. 会不会是防火墙相关的问题？（我不了解防火墙，所以这里没有提供更多细节）

希望这可以帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T23:20:19.497

我今天用这个砸我的头；最后求助于这个：

_sslStream.Write（合并，0，合并。长度 - 1）

问题解决了，继续！

# google-drive-api - 是否有用于 Google Drive API 的记录在案的 XD postMessage 代理？

> ID：13507173
> 
> 赞同：0
> 
> 时间：2012-11-22T06:44:08.690
> 
> 标签：google-drive-api

我正在为 Google Data API 编写[客户端接口](http://adodson.com/hello.js/)，同时试图避免使用任何提供的专有 Javascript SDK。

我已经成功发出了 XHR2 和 JSONP GET 请求，但是在 POST 带有附加文件的多部分消息时却是一片空白。我从窥探[Javascript SDK](https://developers.google.com/drive/quickstart-js)中看到，它使用 iframe 和 proxy.html 并且可能是 postMessage 来绕过相同的起源问题。我不知道检测 postMessage 通信的方法。

XD postMessage hack 是否记录在任何地方？

谢谢安德鲁

# inno-setup - 如何检查字符串是否包含给定的子字符串？

> ID：13507174
> 
> 赞同：14
> 
> 时间：2012-11-22T06:44:09.250
> 
> 标签：inno-setup

我需要找出字符串是否包含给定的子字符串。

例如，如果我正在寻找这样的字符串`ABC`中的子字符串：

```
S := 'ABC String'; 
```

我应该得到结果 True，而对于以下字符串，我应该得到结果 False：

```
S := 'DEF String'; 
```

如何检查字符串是否包含 InnoSetup 中的子字符串？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-22T07:28:59.150

Innosetup 有一个 Pos() 函数，其工作方式与 Delphi 的完全一样。[请参阅http://www.jrsoftware.org/ishelp/index.php?topic=scriptfunctions](http://www.jrsoftware.org/ishelp/index.php?topic=scriptfunctions)上的支持功能参考

# blackberry - 如何通过命令提示符在黑莓模拟器中启动应用程序

> ID：13507180
> 
> 赞同：2
> 
> 时间：2012-11-22T06:44:28.617
> 
> 标签：blackberry, command-prompt, blackberry-simulator

我想打开模拟器，加载 cod 文件并通过命令提示符在黑莓模拟器中运行应用程序。

我可以使用 fledgecontroller 命令打开文件并将其加载到模拟器，但无法启动应用程序。谁能告诉我如何从 cmdpmpt 启动应用程序？是否有相同的 fledgecontroller cmd？请指教。

提前致谢..！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:31:15.110

这是一个棘手的问题。

你有三个选择：

1.  应该 100% 工作 - 让您的应用程序自动启动。如果您使用[bb-ant-tools](http://bb-ant-tools.sourceforge.net/docs)搜索**runonstartup**参数。不要忘记在应用程序中等待，直到“设备”完全启动（`ApplicationManager.inStartup()`）
2.  不是 100% 工作 - 将应用程序位置放在主屏幕上的 jad 文件中，然后说要导航到主屏幕上的特定位置并点击它。如果您使用[bb-ant-tools](http://bb-ant-tools.sourceforge.net/docs)搜索**ribbonposition**参数。但这对小于 6 的模拟器版本有效。我认为系统会忽略 6+ 操作系统
3.  还没有尝试过 - 开始搜索并输入应用程序名称以及与上一个案例中的导航相同的步骤

您是否正在尝试设置验收测试？

# iphone - 如何将根视图控制器更改为 iPhone 中的视图控制器

> ID：13507188
> 
> 赞同：0
> 
> 时间：2012-11-22T06:45:30.100
> 
> 标签：iphone

我是 Iphone 编程新手。在创建项目时，我采用了根视图控制器类。默认情况下，已创建 Appdelegate.h、.m、根视图控制器.h、.m，第一类是根视图控制器，第二类是我采用的视图控制器。当我在模拟器中运行项目时，第一个视图是显示表视图。现在我想做的是，当我运行项目时，我想显示第二类，即视图控制器不是根视图控制器（我不想先显示表格视图我想显示视图）。是否可以这样做。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:53:38.560

是的。您需要做的是，在 AppDelegate.m 文件中创建第二类的对象并将其分配为根视图。

例子：

```
#import "ExampleClass.h"

ExampleClass *exp = [[ExampleClass alloc] initWithNibName:@"ExampleClass" bundle:nil]];
exp.title = @"ExampleClass";

// Navigation controller
self.navigationController = [[[UINavigationController alloc] initWithRootViewController:exp] autorelease]; 

[self.window setRootViewController:self.navigationController]; 
```

# string - 如何在 R 数据框中插入缺少的换行符

> ID：13507190
> 
> 赞同：1
> 
> 时间：2012-11-22T06:45:35.760
> 
> 标签：string, r, split, dataframe

我需要在单列 R 数据框中插入一些缺少的换行符。数据收集阶段缺少这些换行符。

数据如下：

```
V1
Apple
OrangeBanana
BananaBananaBanana
Watermelon
GrapeBanana 
```

所以“香蕉”之前的所有换行符都不见了

我想搜索“香蕉”并添加那些缺少的换行符，所以它看起来像：

```
V1
Apple
Orange
Banana
Banana
Banana
Banana
Watermelon
Grape
Banana 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:05:53.573

这是一个稍微更通用的解决方案，但可以很容易地用于明确使用“香蕉”。

```
V1 <- c("Apple", "OrangeBanana", "BananaBananaBanana", "Watermelon", "GrapeBanana") 
```

首先，让我们通过查找所有不是单词边界的大写字母并将它们替换为空格和大写字母来拆分它们：

```
splits <- gsub("(?:\\B)([[:upper:]])"," \\1" , V1, perl=TRUE)
[1] "Apple" "Orange Banana" "Banana Banana Banana" "Watermelon" "Grape Banana" 
```

然后由空格字符分割并从列表转换为向量：

```
unlist(strsplit(splits, " "))
[1] "Apple" "Orange" "Banana" "Banana" "Banana" "Banana" "Watermelon" "Grape" "Banana" 
```

或者在一行中：

```
unlist(strsplit(gsub("(?:\\B)([[:upper:]])"," \\1" , V1, perl=TRUE), " ")) 
```

编辑：对于明确与“香蕉”一起使用的正则表达式：

```
gsub("(?:\\B)(Banana)"," \\1" , V1, perl=TRUE) 
```

# asp.net - 回发时 ListView 的 LayoutTemplate 中的数据绑定表达式

> ID：13507192
> 
> 赞同：2
> 
> 时间：2012-11-22T06:45:44.953
> 
> 标签：asp.net, listview, data-binding

`<%# PageProperty %>`我正在尝试在列表视图的 LayoutTemplate 中使用数据绑定表达式（例如 ）。

我看过的资源：

[访问 ListView 的 LayoutTemplate 中的控件](https://stackoverflow.com/questions/433846/access-a-control-inside-a-the-layouttemplate-of-a-listview)

[将代码隐藏中的公共字符串获取到 ListView 的 LayoutTemplate](https://stackoverflow.com/questions/1581515/get-public-string-in-codebehind-into-layouttemplate-of-listview)

[http://forums.asp.net/p/1201992/3319344.aspx](http://forums.asp.net/p/1201992/3319344.aspx)

[http://www.codeproject.com/Articles/42962/Databind-Expression-in-ListView-LayoutTemplate](http://www.codeproject.com/Articles/42962/Databind-Expression-in-ListView-LayoutTemplate)

我可以使用以下两种方法成功地使数据绑定表达式在初始数据绑定上工作：

```
protected void lvwExample_OnLayoutCreated(object sender, EventArgs e) {
       lvwExample.Controls[0].DataBind();          
} 
```

和

```
protected void lvwExample_OnLayoutCreated(object sender, EventArgs e) {        
        ListView lv = lvwExample ;
        Control template = new Control();
        lv.LayoutTemplate.InstantiateIn(template);
        template.DataBind(); // resolve the problem
        // remove current layout (without databind expressions)
        lv.Controls.RemoveAt(0);
        //add again the layout but with databound content
        lv.Controls.Add(template);           

} 
```

问题是，当列表视图`listView.DataBind()`在回发中被反弹（）时，数据绑定表达式会从布局模板中丢失。以前的数据绑定表达式现在是模板中的静态文本。

当为列表视图禁用视图状态时它工作正常，但在这种情况下需要视图状态来维护分页和排序（我相信这些视图状态是必需的，但我还没有真正研究它，可能处于控制状态）。

我该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T05:27:34.837

我有一个似乎可以正常工作的解决方案/解决方法。

我所做的是将布局模板内容包装在 2 个服务器端控件（占位符）中

```
 <LayoutTemplate>
                <asp:PlaceHolder runat="server" ID="phHeader">  
                 ...          
                </asp:PlaceHolder>
                <asp:PlaceHolder runat="server" ID="itmPlaceholder"></asp:PlaceHolder>    <!-- ItemTemplate holder-->
                <asp:PlaceHolder runat="server" ID="phFooter">
                 ...
                </asp:PlaceHolder>
            </LayoutTemplate> 
```

在调用`databind()`listview 之后，我调用`databind()`了这两个控件（phHeader 和 phFooter）是 listview 的`FindControl`方法。

`onLayoutCreated`数据绑定控件在事件处理程序中不起作用。通常它会导致列表视图的布局模板内容的状态为 1 回发过期。

我认为打开或关闭视图状态对此解决方案/解决方法没有任何影响。

# c++ - 在其类中声明一个对象

> ID：13507196
> 
> 赞同：0
> 
> 时间：2012-11-22T06:46:12.020
> 
> 标签：c++, processing, openframeworks

我正在尝试将[Bouncing Bubbles](http://processing.org/learning/topics/bouncybubbles.html) Processing 示例移植到 C++（使用 OpenFrameworks）中，但遇到了一些麻烦。在类的定义中：

```
class Ball {
  float x, y;
  float diameter;
  float vx = 0;
  float vy = 0;
  int id;
  Ball[] others;

...

void collide() {
  for (int i = id + 1; i < numBalls; i++) {
    float dx = others[i].x - x;
    float dy = others[i].y - y;
    float distance = sqrt(dx*dx + dy*dy);

... 
```

看起来对象，“其他”正在其自己的类中声明。我尝试添加 `Ball others(<arguments>);`到我的 C++ 类中，但 XCode 对我生气并留下一条控制台消息，威胁要吃掉我未来的孩子，所以我一定做错了什么。我在想这可能是 Java/Processing 的事情——但我对 C++ 类还是很陌生。

有没有办法在 C++ 中完成同样的事情，或者我最好将碰撞函数移出类并通过一些修改进入 testApp 类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T06:54:26.713

似乎您想要一个根据需要增长/缩小的对象数组。在这种情况下，您可以使用`Ball`指针向量：

```
std::vector<Ball*> others; 
```

创建新`Ball`实例并将它们插入数组中的工作方式如下：

```
others.push_back(new Ball); 
```

但是，与 Java 不同的是，C++ 没有垃圾收集器。因此，请确保再次删除元素。例如，在您的类的析构函数中：

```
for (size_t i = 0; i < others.size(); ++i) {
    delete others[i];
} 
```

或者，如果您使用的是 C++-11，则使用基于范围的 for 循环的较短版本：

```
for (auto ball : others) {
    delete ball;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T06:49:57.703

您需要有一个指针而不是一个数组：

```
...
Ball *others;
... 
```

您不能在类定义中声明相同类型的对象，因为这意味着您需要一个无限大小的对象，一个包含自身的对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-26T04:24:08.863

**不可能**声明一个对象是它自己的类的一个字段。因为如果发生这种情况，当您声明该类的对象时，初始化过程就是递归调用。它类似于这样的Java代码

```
class Test {
Test t = new Test();
} 
```

上面的代码会导致 java.lang.StackOverflowError

# jquery - jQuery 避免在元素添加到页面时重新绑定

> ID：13507197
> 
> 赞同：0
> 
> 时间：2012-11-22T06:46:12.567
> 
> 标签：jquery, function, events, initialization, bind

我有一个非常复杂的方法绑定到页面上的所有输入。但是，有时输入会动态添加到页面中，因此不会绑定到相同的方法。我认为我可以通过将事件绑定到变量并在将它们添加到页面时使用附加输入更新变量来变得聪明......但没有。

IE

```
inputs.click(function(){ // stuff });

// add inputs to page

inputs = $('input'); 
```

有没有更隐秘的方法来做到这一点？OBV我可以将整个shebang`($('input').click()...)`放入一个函数中并以这种方式重新初始化......但肯定有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:52:32.707

您必须将事件绑定到页面上已经存在的元素，因此使用`on()`并绑定到页面上已经存在的动态输入的最近祖先，例如表单本身：

```
$('form').on('change', 'input', function() {
    // do something
}); 
```

第一个字符串是一个以空格分隔的事件列表，第二个是一个 jQuery 选择器，用于标识事件的目标（如果不是事件`form`本身）。

参考：

*   [`on()`](http://api.jQuery.com/on).

# scala - 如何使用 ToFunctorOps 的提升

> ID：13507202
> 
> 赞同：4
> 
> 时间：2012-11-22T06:46:45.813
> 
> 标签：scala, scalaz

`ToFunctorOps`通过隐式定义一个`lift`方法`ToLiftV`，但我似乎无法让它找到我的仿函数实例：

```
import scalaz.std.option._
import scalaz.syntax.functor._
import scalaz.syntax.id._
import scalaz.syntax.std.option._

def inc(x: Int) = x + 1

1.some |> (inc _).lift

<console>:16: error: could not find implicit value for parameter F: scalaz.Functor[F]
              1.some |> (inc _).lift 
```

option 的仿函数实例是可见的，但编译器似乎找不到它。关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T15:15:29.883

我不明白为什么这不起作用（我刚刚问了一个关于我不理解的部分[的后续问题），但我可以提供三种解决方法。](https://stackoverflow.com/q/13515169/334519)

第[一个](https://gist.github.com/4131492)对我来说没有意义，并且需要对您的代码和笨拙的语法进行一些更深入的更改，所以我只会顺便提一下。

第二个是导入适当的`FunctorSyntax`隐式（而不是`ToFunctorOps`那些不能正常工作的）：

```
scala> val of = implicitly[scalaz.Functor[Option]]
of: scalaz.Functor[Option] = scalaz.std.OptionInstances$$anon$1@377d4c39

scala> import of.functorSyntax._
import of.functorSyntax._

scala> 1.some |> (inc _).lift
res0: Option[Int] = Some(2) 
```

但这要求您为`Functor`要使用它们的每个人导入这些隐式，并且并不比仅编写`of lift inc`.

最后一个需要更多的代码，但更令人满意。您需要以下新的语法特征，以及以in`myLift`为模型的方法：`lift``Function2Ops`

```
trait MyFunction1Syntax[A, R] extends scalaz.syntax.Ops[A => R] {
  def myLift[F[_]](implicit F: scalaz.Functor[F]) = F lift self
}

implicit def toMyFunction1Syntax[A, R](f: A => R) =
  new MyFunction1Syntax[A, R] { def self = f } 
```

现在您可以编写以下内容：

```
scala> 1.some |> (inc _).myLift
res3: Option[Int] = Some(2) 
```

在 Scalaz 邮件列表中提出这个问题可能是值得的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T11:25:45.233

您的问题可以像这样轻松解决

```
import scalaz.syntax.std.option._
import scalaz.std.option._
import scalaz.syntax.id._

implicit def liftIt[F[_], A, B](f: A => B)(implicit F: Functor[F]): F[A] => F[B] =
  F lift f

def inc(x: Int) = x + 1

2.some |> inc 
```

问题来自`LiftV`FunctorSyntax 中使用的一个特征。坦率地说，我怀疑它可能对某人有用。为了工作，它必须明确输入：

```
import scalaz.syntax.functor._

val f: LiftV[Option, Int, Int] = (inc _)

2.some |> f.lift 
```

# python - 查找内存使用情况、CPU 使用情况、运行 python 脚本的执行时间

> ID：13507205
> 
> 赞同：11
> 
> 时间：2012-11-22T06:47:23.050
> 
> 标签：python, memory, cpu-usage, execution-time

我正在使用python，假设我有一些代码如下

**例子.py**

```
import os, psutil
import MySQLdb as mdb

conn = mdb.connect(user='root', passwd='redhat', db='File_Data', host='localhost', charset="utf8")
file_path = "/home/local/user/Module/File_processing/part-file.txt"
p = psutil.Process(os.getpid())
cursor = conn.cursor()

for line in file_open:
    result = line.split('\t')
    query = "insert into PerformaceReport (campaignID, keywordID, keyword, avgPosition)"
    query += " VALUES (%s,%s,'%s',%s)%(result[0],result[1],result[2],result[3])"
    cursor.execute( query )
conn.commit()

print p.get_cpu_times()
print p.get_memory_percent() 
```

上面的代码从文本文件中读取数据并保存到数据库并且工作正常

我正在使用命令运行文件`python path/to/the/example.py`

现在我要做的是查找/捕获以下三个值/信息

1.  `execution time`python script( `example.py`)读取数据并将数据保存到数据库所花费的总数
2.  `CPU utilization`当 python 脚本（`example.py`）运行（执行）时
3.  `Memory usage`当 python 脚本（`example.py`）运行（执行）时

我已经用谷歌搜索了很多，并在这里找到了一些信息 [，这里](https://stackoverflow.com/questions/938733/total-memory-used-by-python-process)和[这里](https://stackoverflow.com/questions/276052/how-to-get-current-cpu-and-ram-usage-in-python)，[每个](https://stackoverflow.com/questions/110259/python-memory-profiler)解释都有不同的方法，我真的很困惑，无法理解当脚本运行时如何捕获上述三个值的方法，所以在 SO 中询问`example.py`

任何人都可以为我提供一个适合/捕获上述值以满足我上面提到的需要的工作示例（代码），以便我可以进一步扩展我的进一步需求

**已编辑**

遵循的过程

**1\. 用于查找执行时间**

使用以下命令运行 example.py 文件

```
 python -m cProfile -o file.profile example.py 
```

**2\. 用于查找 CPU 使用率**

`top`在 example.py 运行后在终端中执行命令

**结果：**

```
 PID USER      PR  NI  VIRT  RES  SHR S %CPU %MEM    TIME+  COMMAND
  1354 root      20   0  138m  17m 7200 S  2.0  0.6   2:40.50 Xorg                                             
  2672 shivakri  20   0  581m  19m  12m S  1.3  0.6   0:07.60 gnome-terminal                                   
  2587 shivakri  20   0  987m 168m  33m S  1.0  5.6   5:25.26 firefox                                          
  2780 shivakri  20   0 1233m  51m  16m S  1.0  1.7   0:16.51 gedit                                            
  2163 shivakri  20   0  821m 135m  43m S  0.7  4.5   4:58.74 chrome                                           
  1938 shivakri  20   0  567m  15m  11m S  0.3  0.5   0:06.64 metacity  
  ........
  ........ 
```

现在在上面的结果中，我如何/在哪里可以找到 CPU/内存利用率值，我是否需要`%CPU %MEM`从包含的行中获取值`gnome-terminal`？（因为我们是通过终端运行文件？）

Aslo`top`用于查找正在运行的总 cpu 利用率进程，但我们只需要在执行/运行时查找 example.py 脚本的 cpu 利用率，我的意思是当我们运行文件时使用了多少 CPU、内存（例如.py)

最后，当我运行 python 脚本（example.py）时，我的意图是执行时间、运行脚本所占用的 CPU 利用率以及用于运行脚本的内存必须记录/存储在某个位置（在文本文件）或其他东西

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T07:34:51.297

**用于时间分析**

1.  `cd`进入包含的目录`example.py`（让我们称之为这个`exampledir`）。
2.  跑`python -m cProfile -o example.profile example.py`
3.  [下载 RunSnake](http://pypi.python.org/pypi/RunSnakeRun/2.0.2b1)并在任何地方解压
4.  `cd`进入解压 RunSnake 的目录
5.  跑`python runsnake.py exampledir/example.profile`

**用于 CPU 分析**

1.  采用[`psutil`](http://code.google.com/p/psutil/wiki/Documentation#Processes)
    1.  创建一个新`psutil.Process`的`myProcess = psutil.Process(os.getpid())`
    2.  致电`myProcess.get_memory_info()`或`myProcess.get_ext_memory_info()`或`myProcess.get_memory_percent()`根据需要

**用于内存分析**

1.  安装 meliae`easy_install`或`pip`
2.  将以下代码行添加到顶部`example.py`：

* * *

```
from meliae import scanner # [[source](http://www.vrplumber.com/programming/runsnakerun/)]
scanner.dump_all_objects( filename ) # you can pass a file-handle if you prefer 
```

* * *

3.  run ，您在上面的代码中使用的文件的路径在`runsnakemem fpath`哪里。`fpath`

这应该会为您提供一个类似于 RunSnakeRun 的可视化内存分析器。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-06T05:51:26.730

如果有人仍在搜索有关此要求的任何内容，这是一篇内容丰富的博客文章：

[监控正在运行的 Python 程序的内存使用情况](https://medium.com/survata-engineering-blog/monitoring-memory-usage-of-a-running-python-program-49f027e3d1ba)

# java - 这个 Handler 类应该是静态的，否则可能会发生泄漏：final Handler

> ID：13507208
> 
> 赞同：5
> 
> 时间：2012-11-22T06:47:34.070
> 
> 标签：java, android, memory-leaks

在下面的代码 Eclipse 生成警告“这个处理程序类应该是静态的，否则可能会发生泄漏”。

```
public class MyActivity extends Activity implements Runnable
 {
   final Handler handler = new Handler()
    {
      @Override
      public void handleMessage( Message message)
       {
         String sResult = (String) message.obj;
         if( (sResult != null) && (sResult != ""))
           {
             MyNonStatic = (TableLayout) findViewById( R.id.tableLayout); // any non-static method
           }
         return;
       }
    };

   public void run()
    {
      final Message message = handler.obtainMessage( 1, MyFunction( context));
      handler.sendMessage( message);
    }

   public String MyFunction( Context context)
    {
      return "MyNewString";
    }
  } 
```

我在现场查看了许多主题，但没有得到解决方案。请帮我这个代码？

补充：我需要在handleMessage()中调用非静态方法（例如findViewById()）！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-07T18:15:55.463

以下是使用弱引用和静态处理程序类来解决 Lint 文档中建议的问题的示例：

```
public class MyClass{

  //static inner class doesn't hold an implicit reference to the outer class
  private static class MyHandler extends Handler {
    //Using a weak reference means you won't prevent garbage collection
    private final WeakReference<MyClass> myClassWeakReference; 

    public MyHandler(MyClass myClassInstance) {
      myClassWeakReference = new WeakReference<MyClass>(myClassInstance);
    }

    @Override
    public void handleMessage(Message msg) {
      MyClass myClass = myClassWeakReference.get();
      if (myClass != null) {
        ...do work here...
      }
    }
  }

  private final MyHandler mHandler = new MyHandler(this);

  public MyHandler getHandler() {
    return new MyHandler(this);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T08:11:01.747

从[Android lint 检查](http://tools.android.com/tips/lint-checks)：

```
处理程序泄漏
------------
摘要：确保 Handler 类不持有对
外层

优先级：4 / 10
严重性：警告
类别：性能

在 Android 中，处理程序类应该是静态的，否则可能会发生泄漏。留言
在应用程序线程的 MessageQueue 上排队也保留了它们的目标
处理程序。如果 Handler 是一个内部类，它的外部类将被保留为
出色地。为避免泄漏外部类，请将 Handler 声明为静态嵌套
具有对其外部类的 WeakReference 的类。

```

警告的第一部分是因为`final Handler handler = new Handler()`创建了一个匿名内部类。内部类不能以独立的方式创建，你总是需要一个外部实例。请记住您将如何在 Java 中创建它`OuterClass.InnerClass innerObject = outerObject.new InnerClass();`。每个内部类对象还必须保持对外部对象的引用`Outer.this`才能访问外部的成员。

第二部分是`final Message message = handler.obtainMessage( 1, MyFunction( context));`你的内部处理程序类的句柄（它有一个外部 Activity 类的处理程序）。如果此消息存在的时间足够长，则无法对您的 Activity 进行垃圾收集。

什么会阻止您的消息被处理？不幸的是，lint 工具无法解决这个问题，因此它总是警告您可能存在内存泄漏。如果您确定自己在做什么，可以通过[各种方法](http://tools.android.com/recent/ignoringlintwarnings)抑制这些消息。

`Activity`对于您的情况，制作a看起来不是一个好主意，`Runnable`但无论如何您可能应该使用[Handler.post](http://developer.android.com/reference/android/os/Handler.html#post%28java.lang.Runnable%29)或最好的[Activity.runOnUIThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T06:57:00.747

**handler** - 识别回调应该发生的线程的处理程序。如果为 null，则回调将从进程的线程池中发生。

想象一下情况。一些 Activity 调用`PendingIntent.send(...)`并将`non-static inner subclass of Handler`. 然后活动被破坏。**但内部阶层生活**。

*内部类仍然拥有指向已销毁活动的链接，它不能被垃圾收集。*

因此，您需要将其设为静态。

资料来源：[Android 中的处理程序和内存泄漏](https://stackoverflow.com/questions/11278875/handlers-and-memory-leaks-in-android)

# javascript - 在字符串之间插入 javascript 变量

> ID：13507210
> 
> 赞同：-4
> 
> 时间：2012-11-22T06:47:41.797
> 
> 标签：javascript, jquery

```
<script type="text/javascript">
$('#did').html('<input type="submit" name="mybtn" value="Save" onClick="saveContent('+valA+')">');
function saveContent(con){
 alert (con);
}
</script> 
```

*我正在使用此代码来显示提交按钮，它涉及页面正文。但是当单击按钮时，它不会提醒该值。请帮助我...谢谢*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:10:51.883

为什么`type="submit"`？

假设`#did`是`id`您的 div 或某个容器的

```
$("#did").html($("<input type='button' value='save' />").click(function(){
    alert(valA);
})); 
```

这将在您的 div 中附加一个带有 click 事件的按钮。在这种情况下，请记住类型应该是按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:16:32.270

转义插入变量

你的结果是：

```
<input type="submit" name="mybtn" value="Save" onClick="saveContent(sometext)"> 
```

**错误**：`sometext is not defined`

```
$('#did').html('<input type="submit" name="mybtn" value="Save" onClick="saveContent(\''+valA+'\')">');
function saveContent(con){
 alert (con);
} 
```

结果：

```
<input type="submit" name="mybtn" value="Save" onClick="saveContent('sometext')"> 
```

**但使用更好的先前答案**

# xsd - Siebel 标头的架构

> ID：13507212
> 
> 赞同：1
> 
> 时间：2012-11-22T06:48:08.753
> 
> 标签：xsd, jdeveloper, bpel, soapheader, siebel

```
<wsse:Security xmlns:wsse="http://schemas.xmlsoap.org/ws/2002/07/secext">
        <wsse:UsernameToken xmlns:wsu="http://schemas.xmlsoap.org/ws/2002/07/utility">
          <wsse:Username>Username</wsse:Username>
          <wsse:Password Type="wsse:PasswordText">Password</wsse:Password>
        </wsse:UsernameToken>
    </wsse:Security> 
```

上述行作为 XML 片段输入到 JDeveloper 的 BPEL 流程中。
问题：如何设计合适的模式来获取 Siebel 标头的用户名和密码以调用 Siebel 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T07:19:10.970

这是一个打开 WSSOAP 选项的 siebel Web 服务请求示例：

```
<SOAP-ENV:信封 xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
    <SOAP-ENV:标头>
        <ns:UsernameToken xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns="http ://siebel.com/webservices" xmlns:ns0="http://schemas.xmlsoap.org/soap/envelope/">用户名放在这里</ns:UsernameToken>
        <ns:PasswordText xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns="http ://siebel.com/webservices" xmlns:ns0="http://schemas.xmlsoap.org/soap/envelope/">密码在这里</ns:PasswordText>
        <ns:SessionType xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns="http ://siebel.com/webservices" xmlns:ns0="http://schemas.xmlsoap.org/soap/envelope/">会话类型在这里</ns:SessionType>
        <ns:SessionToken xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:ns="http ://siebel.com/webservices" xmlns:ns0="http://schemas.xmlsoap.org/soap/envelope/">会话令牌放在这里</ns:SessionToken>
    </SOAP-ENV:Header>
    <SOAP-ENV:正文>
    </SOAP-ENV:Body>
</SOAP-ENV:信封>

```

如果没有 WSSOAP 选项，您将不得不以匿名用户身份调用它（在 Siebel 端配置）或将用户名和密码放在 URL 中。在这里您可以找到更多信息（Siebel 书架）：[http ://docs.oracle.com/cd/B40099_02/books/EAI2/EAI2_WebServices.html](http://docs.oracle.com/cd/B40099_02/books/EAI2/EAI2_WebServices.html)

# button - 带有不可选择 ='on' 的文本框在 ie 中被选中

> ID：13507215
> 
> 赞同：2
> 
> 时间：2012-11-22T06:48:17.970
> 
> 标签：button, input, tabs, focus, selected

`textbox`从上`unselectable ='on'`一个文本字段中选择 ie 以进行制表符按下。

在选项卡上形成“input1”，按下它应该转到“input3”而不选择 input2。

```
< input name="input1" type="text" value="input1"  / >
< input name="input2" type="text" value="input2" unselectable="on" />
< input name="input3" type="text"  />
< button>clickme< /button> 
```

我试过如下，

```
$("input[unselectable]").focus(function(){
            $(this).blur();
        });
$(input[unselectable]).focus(function(){
        $(this).next('input').focus();
     }); 
```

但它不起作用，即。

这里的另一种情况是，如果“input3”也在`unselectable="on"`“input1”的按下选项卡上，它应该转到按钮/锚点等。

解决方案`javascript`或`jquery`任何其他想法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T06:11:51.987

只需定义 tabindex = -1 in

```
< input name="input2" type="text" value="input2" unselectable="on" tabindex = -1 /> 
```

# .htaccess - 重定向来自某些推荐人的传入流量

> ID：13507221
> 
> 赞同：2
> 
> 时间：2012-11-22T06:48:26.273
> 
> 标签：.htaccess

我正在尝试找到执行以下操作的 htaccess 或 PHP 代码。我将把它作为伪代码输入：

IF（传入流量来源）=referrer.com、refer1.com、anotherrefer3.com 和 site4.com、REDIRECT_GOTO_THIS_PAGE => [http://www.mysite.com/specific-landing-page-for-those-people](http://www.mysite.com/specific-landing-page-for-those-people)

我发现很多与此接近的 htaccess 重写，但到目前为止还没有一个做这个特定的事情。我希望找到能一次性处理一大堆引荐来源网址/传入网址的东西；谢谢。

更新：

这个看起来很有希望：

```
 RewriteEngine on
 RewriteCond %{HTTP_REFERER} ^http://(www\.)?partnerwebsite\.com
 RewriteRule ^$ /other_directory/specific_page.shtml [L] 
```

我将如何在第 2 行添加几个 url？

唷。访问。哇。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-15T10:14:54.387

这对我来说就像一个魅力：

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} .*xxx.org.*$ [OR]
RewriteCond %{HTTP_REFERER} .*yyy.org.*$ [OR]
RewriteCond %{HTTP_REFERER} .*zzz.com.*$ [OR]
RewriteCond %{HTTP_REFERER} .*aaa.net.*$
RewriteRule ^(.*)$ http://your_site/different_page/ 
```

将其添加到您的 .htaccess 文件中。如果您没有 .htaccess 文件（通常用于从不同目录加载的索引页面），只需创建一个空白并添加上述内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T06:53:44.997

如果我理解正确，那么我会在 php 中执行如下操作：

```
 $refs = array("http://referer1.com","http://referer2.com");
  if (in_array($_SERVER['HTTP_REFERER'],$refs)) {
      header("location: http://redirected_here.com");
  } 
```

# asp.net-mvc - 在 .Net MVC Razor 中处理会话超时

> ID：13507224
> 
> 赞同：1
> 
> 时间：2012-11-22T06:48:55.423
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor, session-state

我正在开发一个基于 API 的网站，客户端正在.Net MVC 中开发。对于异常处理，我正在使用

```
 public void Application_Error(object sender, EventArgs e)
        {
            string action = "Index";
            Exception exception = Server.GetLastError();
            Response.Clear();

            HttpException httpException = exception as HttpException;

            if (httpException != null)
            {

                switch (httpException.GetHttpCode())
                {
                    case 404:
                        // page not found
                        action = "Error404";
                        break;
                    default:
                        action = "Index";
                        break;
                }

                // clear error on server
                Server.ClearError();
            }
            Response.Redirect(String.Format("/error/{0}", action));
        } 
```

因此对于控制器的 try catch 抛出的任何异常，页面都会重定向到错误页面。

现在我希望当会话过期时它应该重定向到登录页面，我该怎么做？

现在发生的事情是，在会话到期后，当我尝试访问会话值时，它会抛出异常“ `object reference not set to an instance of object`。” 然后它重定向到默认错误页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:00:55.883

我认为您无法从通用异常处理程序内部执行此操作，因为-正如您所说-缺少会话变量只会抛出`NullReferenceException`. 从控制器对会话变量执行空检查：

```
Public ActionResult MyAction ()
{
    if (Session["myVariable"] == null)
    {
        RedirectToAction("SessionTimeOut", "Error");
    }

    ...

} 
```

如果您的会话变量应该始终存在，除非会话已过期，您可以尝试覆盖`OnActionExecuting`控制器的方法并在那里执行您的空检查。要为多个控制器执行此操作，请定义 a `BaseController`，覆盖其`OnActionExecuting`方法，然后在其他控制器中继承此方法。

# php - MySQL 连接 PHP

> ID：13507230
> 
> 赞同：1
> 
> 时间：2012-11-22T06:49:40.200
> 
> 标签：php, mysql, mysqli, connect

在 MySQL 上连接 PHP 应用程序的最佳方法是什么。

到目前为止，我有以下连接类。

```
class Connection{
    private static $server = "127.0.0.1";
    private static $catalog = "schemadb";
    private static $username = "rootuser";
    private static $password = "password";
    public static $current = null;

    public static function Open(){
        self::$current = mysqli_init();
        if(!self::$current){
            die("Failed to initialize connection");
        }
        if(!self::$current->real_connect(self::$server,self::$username,self::$password,self::$catalog)){
            die("Cannot connect to server");
        }
        return self::$current;
    }
    public static function Close(){
        self::$current->close();
    }
} 
```

我也有

```
abstract class abstractDAO
{
    protected function getConnection()
    {
        $mysqli = new mysqli("127.0.0.1","rootuser","password","schemadb");
        return $mysqli;
    }

} 
```

或者是否有任何其他最佳方法可以在 MySQL 上连接 PHP 应用程序。请指教谢谢。。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:04:08.197

您可以尝试使用 PDO 对象：

```
<?php
try {
    $dbh = new PDO('mysql:host=localhost;dbname=test', $user, $pass);

} catch (PDOException $e) {
    print "Error!: " . $e->getMessage() . "<br/>";
    die();
}
?> 
```

查看[PHP PDO 文档页面](http://php.net/manual/en/pdo.connections.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-05T13:17:41.007

尝试使用 php 框架，如 codeigniter、Yii、cake php。如果你在这个框架中实现任何一个，不需要编写 php mysql 查询它会自动生成。您只需要输入您的数据库配置，如下所示

```
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'root';
$db['default']['password'] = '';
$db['default']['database'] = 'sample'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-27T18:48:50.050

您可以使用 PDO 通过数据连接，这是一个示例

```
<?php
$servername = "localhost";
$username = "root";
$password = "nopass";

try {
    $conn = new PDO("mysql:host=$servername;dbname=wireframe", $username, $password);
    // set the PDO error mode to exception
    $conn->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    echo "Connected successfully"; 

    $stmt = $conn->prepare("SELECT * FROM todolist"); 
    $stmt->execute();

    }
catch(PDOException $e)
    {
    echo "Connection failed: " . $e->getMessage();
    }
?>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<body>

<table border="1" align="center">
<tr>
  <th>name</th>
  <th>type</th>
  <th>status</th>
</tr>

<?php

foreach($stmt->fetchAll() as $k=>$v){
     echo
   "<tr>
    <td>{$v['name']}</td>
    <td>{$v['type']}</td>
    <td>{$v['status']}</td>
   </tr>\n";

}

?>
</table>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-01-05T00:26:58.967

试试这个

```
<?php

  $user = $_POST["username"];//if this doesnt work try the next line
  $user = (isset($_POST["username"]) ? $_POST["username"] : "");

  $host = "localhost";//mysql password
  $username = "";//mysql username
  $password = "";//mysql password
  $db_name = "database";//database name
  $tbl_name ="test";//table name
  //make the connection
  $con = mysql_connect("$host","username","password")or die("Could not connect.");
  $conn = mysql_select_db("$db_name")or die("Could not select database.");

  $sql = "SELECT * FROM $tbl_name WHERE username='$username'";
  //query mysql
  $result = mysql_query($sql);

  if($result){
  //if it works show this

  }else{

  //if it doesnt work show this

  }

?> 
```

我尝试了很多次来建立与数据库的连接，我终于找到了一个。

# ruby - JSON解析的最小输入

> ID：13507237
> 
> 赞同：1
> 
> 时间：2012-11-22T06:50:17.813
> 
> 标签：ruby, json

我正在使用反序列化字符串`JSON.parse`。大多数时候，我有一个内容对象序列化为一个字符串，并`JSON.parse`在该字符串上工作，但在某些情况下，我想向 发送一个最小输入`JSON.parse`，其结果将被丢弃。当我发送`""`like:`JSON.parse("")`时，它返回一个错误：`unexpected token at '""'`。我违反的 JSON 规范的限制是什么，我可以发送什么替代的最小字符串`JSON.parse`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:07:46.050

阅读 Musa 提供链接的 JSON 规范，可以字符串化并发送到 JSON 的最小对象似乎是：

```
[null] 
```

或类似的东西。或者，在字符串化的形式中，它将是：

```
"[null]" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:48:26.203

我会发送`null`，因为这代表“无”。

```
require 'json'

nil.to_json
#=> "null" 
```

# mobile - 如何在服务器脚本中检索查询参数

> ID：13507238
> 
> 赞同：0
> 
> 时间：2012-11-22T06:50:17.303
> 
> 标签：mobile, azure

我正在使用 Windows Azure 移动服务为我的应用程序构建后端。对于服务器脚本的读取操作，现在我想检索脚本中的 $filter、$select 等查询参数。知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:56:08.417

在“读取”函数的参数中使用“查询”对象（通过使用 console.log ）进行修改后，我终于找到了解决方案：

```
function isObject(variable) {
    return variable !== null && 
        variable !== undefined && 
        typeof variable === 'object';
}

// Find all the member-value pairs from the expression object
function findMemberValuePairsFromExpression (expr, ret) {
    if (!isObject(expr)) {
        return null;
    }
    ret = ret || {};
    for (var name in expr) {
        if (expr.hasOwnProperty(name)) {
            var prop = expr[name];
            if (name === 'parent') { // Ignore parent property since it's added by us
                continue;
            }
            else if (name === 'left') { // member expression are in the left subtree
                if (isObject(prop)) {
                    prop.parent = expr; // Remember the parent
                    findMemberValuePairsFromExpression(prop, ret);
                }
            }
            else if (name === 'member') {
                // Found a member expression, find the value expression 
                // by the knowledge of the structure of the expression
                var value = expr.parent.right.value;
                ret[prop] = value;
            }
        }
    }

    if (expr.parent) {
        // Remove the added parent property
        delete expr.parent;
    }

    return ret;
}

// Get the filters component from query object and 
// find the member-value pairs in it
function findMemberValuePairsFromQuery (query) {
    var filters = query.getComponents().filters;
    return findMemberValuePairsFromExpression(filters);
}

function read (query, user, request) {
    request.execute();
} 
```

请记住，这种方法严重依赖查询对象的内部结构，因此将来可能会中断。

query.getComponents() 还返回查询的其他部分，例如“select”、“skip”、“top”等。基本上是 oData 协议的任何内容

# c - 为什么在这个程序中出现分段错误

> ID：13507239
> 
> 赞同：0
> 
> 时间：2012-11-22T06:50:30.230
> 
> 标签：c

```
#include<stdio.h>

main()
{
int *A=NULL; 
*A=12; 
printf("The value of the ponter A is=%d",*A); 
} 
```

### 该程序即将出现分段错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T06:51:26.960

取消引用`NULL`指针是`undefined behaviour`

```
 int *A=NULL; // creating a pointer to int and setting it to NULL
                 //means it points to nothing
    *A=12; // Now you try to dereference it so it's giving seg fault. 
```

另一件事`int *A`不是`NULL`指针仍然直接将值分配给指针是无效的手段，

```
int *A ;
*A=12; // It's invalid too 
```

你应该试试这个：

```
int a=12;
int *A ;
A=&a; // assign later or you can so it in initialization 
```

编辑：ISO c99 标准：在给定段落的最后一行突出显示

6.5.3.2 地址和间接运算符约束

```
4    The unary * operator denotes indirection. If the operand points to a function,

 the result is a function designator; if it points to an object, the result is an lvalue 

    designating the object. If the operand has type ‘‘pointer to type’’, the result has 

type ‘‘type’’. If an invalid value has been assigned to the pointer, the behavior of the 

unary * operator is undefined.84) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T06:53:50.670

您需要为指针分配内存位置`A`。

以下声明

```
int *A = NULL; 
```

仅声明 A 是指向整数的指针，当前它指向的地址为 NULL。由于写入 NULL 和取消引用 NULL 是未定义的行为，因此您遇到了分段错误。

您需要使用[malloc](http://www.manpagez.com/man/3/malloc/)分配内存来解决问题或使指针指向有效对象。

# mysql - 无法在 JRE6 更新 37 中启动 mysql

> ID：13507241
> 
> 赞同：0
> 
> 时间：2012-11-22T06:50:32.120
> 
> 标签：mysql, java, jdk1.5

我已经在我的产品中安装了`Jre6`更新 37，但我的`JDK`版本仍然是`1.5.`

由于我的产品在旧版本中作为服务器运行`JVM`（我没有在下找到服务器文件夹`jre/bin`），我只是将客户端复制`jvm.dll`到服务器`jvm.dll`并启动服务。连接到`MySql`它时会抛出“ `Cannot run program "33366": CreateProcess error=2, The system cannot find the file specified`”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T17:39:45.120

JRE7 破坏了一些 Oracle 应用程序。您需要恢复到 JRE6

资料来源： http: [//oracleformsinfo.wordpress.com/2012/06/17/frm-92095-oracle-jinitiator-version-too-low-disable-jre-1-7-auto-update-for-all-e-业务套件和 Oracle 表单最终用户/](http://oracleformsinfo.wordpress.com/2012/06/17/frm-92095-oracle-jinitiator-version-too-low-disable-jre-1-7-auto-update-for-all-e-business-suite-and-oracle-forms-end-users/)

# android - 如何添加动态jquery移动后退按钮？

> ID：13507243
> 
> 赞同：1
> 
> 时间：2012-11-22T06:51:08.013
> 
> 标签：android, jquery, cordova, jquery-mobile

由于 jquery 移动后退按钮在不同页面中无法正常工作，我尝试添加动态后退按钮。这就是我所做的

```
$("#page1").bind("pagecreate",function() {
if(page2 == 1){
            $('<div data-role="button" id="back"><a data-icon="arrow-l" href="pag2.html">Back</a></div>').prependTo("div:jqmData(role='header')");
            $("back").button();
        }else{
            $('<div data-role="button" id="back"><a data-icon="arrow-l"   href="default.html">Back</a></div>').prependTo("div:jqmData(role='header')");
            $("back").button();
        }
} 
```

当按钮附加到标题时，它没有 jquery 移动按钮样式，它像普通链接一样显示，并将所有其他标题内容向下移动。任何帮助都会得到满足。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T23:36:50.697

您需要通过以下方式增强新标记：

触发器（“创建”）

看看[这个](http://jquerymobile.com/test/docs/pages/page-scripting.html)jQuery 移动文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-18T11:23:54.420

将按钮添加到特定 id 的格式不是，

```
$("back").button(); 
```

它应该是，

```
$("#back").button(); 
```

如果你正在使用类，

```
$(".back").button(); 
```

请更新您的代码。希望这对您的情况有所帮助。

# php - 通过 api 进行 Google Place 验证

> ID：13507248
> 
> 赞同：1
> 
> 时间：2012-11-22T06:51:29.470
> 
> 标签：php, google-places-api

我已经使用 google place api 在谷歌地图上添加位置。我已成功添加位置。我的输出如下 -

```
{
   "id" : "0ad0070d7c11c58b3ec04088b621df840e1bf0db",
   "reference" : "CkQxAAAA5zX4eD-zw11AXYr655m1YY6Gg4HKyTR5p1OxW2_9Y1iQmEYP125ityHf5T4H7i05K_feYF7Xo4FQ6acTzxdgSBIQwi0bg7iu1sSDWIpYhHT0zhoU2NP_Hfa7Rs_Urdo9g0nHmIJr1VE",
   "status" : "OK"
} 
```

但是当我在谷歌地图上搜索时（公开）。它没有出现。如果需要验证，请通过api向我解释验证过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:21:10.447

文件说：

> 新地点将立即在您的应用程序发起的地点搜索中可用，并将进入审核队列以考虑用于 Google 地图。在审核过程批准之前，新添加的场所将无法用于其他应用程序。

在 Google 地图版主接受之前，只有您可以使用 Places ADD 操作。所以我们什么也做不了，也没有别的办法。

# mysql - Mysql查询根据值长度检索数据

> ID：13507252
> 
> 赞同：1
> 
> 时间：2012-11-22T06:51:54.680
> 
> 标签：mysql

嗨伙计们！！！我有一个名为 cdrcost 的表，其中包含 dst 列。我需要根据列值中的数字检索值。例如：

夏令时

0001266 2545 874545565612 25452`

任何建议都将受到欢迎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:33:28.660

假设我理解你的要求：

```
SELECT * 
FROM cdrcost 
WHERE LENGTH(dst) = 31; 
```

# c# - 正则表达式帮助我分解电话号码？

> ID：13507260
> 
> 赞同：0
> 
> 时间：2012-11-22T06:52:26.973
> 
> 标签：c#, regex

我的任务是不可能的，也许吧？

我有一张电话号码表。但是它们是手动输入的，而且很脏。

例子：

```
0711112399
07 1111 3288
07 1111 4832 NIKKI
0711117929
0711113616X123
0
NULL
1300 111 782 
```

.

（数字改变以保护无辜者。:)）

我需要将这些分解为 CountryCode AreaCode Number Extension

所以，`0711112399`会变成 CountryCode = +61 （因为这个号码上没有代码） AreaCode = 07 Number = 11112399 Extension = NULL

`11113616X123`将是 Country +61 AreaCode = NULL Number = 11113616 Extension = 123

规则是：

可能的区号：

> 02 03 04 07 08

这甚至可能吗？

对于 07 1111 4832 NIKKI - 我将删除字母数字，除非它是 2 个数字之间的 X。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:12:06.540

你可以试试这个

```
^(00\d{2}|\+\d{2})?(0\d)?([\d ]+)(?:[xX](\d+))? 
```

[在 Regexr 上](http://regexr.com?32t36)查看。将鼠标悬停在突出显示的蓝色匹配项上时，您可以查看组的内容。

它将国家代码放在Group1中，地区代码放在Group 2中，号码放在Group 3中，分机放在Group 4中。除号码外，所有部分都是可选的。当没有找到某个部分时，没有设置组的值，那么您必须输入默认值。

我发现国家代码有问题。它在这里用 2 位数字进行硬编码，但我知道也有一些国家有 3 位数字代码。对于具有 1 位代码的国家/地区，我不确定是否可能有一个前导 0。但我需要知道区号/号码何时开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:14:06.273

我不会说不可能，但这需要严格的测试。但我不一定会专注于正则表达式。使用其他技术实现可能更简单。

这是进行测试驱动开发的理想案例。首先列出所有可能的案例，为每个案例编写一个单元测试，并为案例调整清理代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T11:47:51.647

有专门的库来规范电话号码，它们非常专业。但他们也倾向于依赖正则表达式。Lync Server（Microsoft 的 IP 语音解决方案）有一​​个依赖于正则表达式的规范化库。他们的页面包含相当多的示例，它们会派上用场：

[http://technet.microsoft.com/en-us/library/gg413082.aspx](http://technet.microsoft.com/en-us/library/gg413082.aspx)

最后，构建多个将规范化为通用格式的表达式可能比尝试创建一个表达式来规范化所有内容更容易。

# knockout.js - ko 模板中的 DatePicker

> ID：13507264
> 
> 赞同：-1
> 
> 时间：2012-11-22T06:52:31.463
> 
> 标签：knockout.js

我在ko模板中有一个foreach，在里面我想绑定datepicker。它是如何完成的

```
<script type="text/html" id="Date_List">
       From &nbsp;&nbsp;<input type="text" id = "DateFrom" name="DateFrom" data-bind="value: Queries()[0].QueryValueFrom" class="calendar" /><br/><br/>
    To &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<input type="text" id = "DateTo" name="DateTo" data-bind="value: Queries()[0].QueryValueTo" class="calendar" />
</script> 
```

当我将它与 for each loop 绑定时。我无法弹出日历

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:21:26.310

使用自定义日期选择器绑定，我的绑定集合中有一个

[https://github.com/AndersMalmgren/Knockout.Bindings](https://github.com/AndersMalmgren/Knockout.Bindings)

```
<input data-bind="datepicker: date, datepickerOptions: { minDate: date }" /> 
```

# wordpress - wordpress the_content 在页面模板上不起作用

> ID：13507270
> 
> 赞同：1
> 
> 时间：2012-11-22T06:53:07.177
> 
> 标签：wordpress, templates

我有一个 WordPress 模板页面，它显示页眉、页脚和侧边栏，但是内容没有显示任何人都可以帮忙吗？

```
<?php
/**
 * Template Name: Template 2
 */
?>

<?php get_header(); ?>

<div class="main_right" style="float:right;">
    <?php get_sidebar(1); ?>                        
 </div> 
<div style="float:left">    

<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

<?php echo the_content();?>

<?php endwhile; endif; ?>
</div>

<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:09:58.687

这是在您的 wordpress 循环中吗？它必须是为了使 the_content 起作用。

此外，您不需要回显该功能，只需将其放在您的文件中……</p>

```
<?php the_content(); ?> 
```

另外，为什么要将内容包装在`<p>`标签中？Wordpress 会自动为您执行此操作。如果你想把它包装起来`<div>`会更好，可能带有一个用于css的类或id。

你看过wordpress codex吗？- [http://codex.wordpress.org/Function_Reference/the_content](http://codex.wordpress.org/Function_Reference/the_content)

# ios - IOS 5 中不加载多值字段

> ID：13507272
> 
> 赞同：-1
> 
> 时间：2012-11-22T06:53:32.530
> 
> 标签：ios, xcode, plist

![在此处输入图像描述](../Images/25ca387a02c8a5ef3143208c225f70f2.png)

![在此处输入图像描述](../Images/69c62368995f37f25276dee0aa0fb87f.png)

为什么不为我加载多值字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:38:05.917

`Multi Value`为窗格指定默认选择值，它将起作用。

# properties - websphere 属性文件

> ID：13507275
> 
> 赞同：1
> 
> 时间：2012-11-22T06:53:44.003
> 
> 标签：properties, websphere, datasource

我想将数据源属性和队列属性存储在单独的属性文件中，因此 WebSphere Application Server 将在 sturtup 期间加载此属性。是否可以为 WAS 6.1 和 7 创建这样的属性文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:23:37.903

不，最接近的方法是运行 wsadmin 脚本，该脚本将使用属性文件使用`AdminTask.applyConfigProperties()`命令更新服务器配置，但无法设置服务器以在启动时自动运行这样的脚本。

# android - gmaps-samples 在没有当前上下文的情况下调用 OpenGL ES API

> ID：13507278
> 
> 赞同：2
> 
> 时间：2012-11-22T06:53:49.260
> 
> 标签：android, api, google-maps

我正在尝试在 Android 中使用 Google Maps API v3 开发应用程序。该代码由本网站参考[https://developers.google.com/maps/articles/android_v3#nextsteps](https://developers.google.com/maps/articles/android_v3#nextsteps) （代码细节是常规的，所以我不再发布！）

但是，当我启动我的应用程序时，logcat 会为我反馈消息

```
11-22 14:40:22.530: E/libEGL(24624): call to OpenGL ES API with no current context (logged once per thread) 
```

我该如何解决这个问题？

# android - 如何在具有适合所有设备的屏幕的 Webview 中显示网页的某些部分

> ID：13507281
> 
> 赞同：12
> 
> 时间：2012-11-22T06:54:00.207
> 
> 标签：android, webview, android-webview, webpage, android-websettings

我想在 WebView 中显示网页。到此为止还好。

但我有网页（如下所示），我想要它的某些部分。我的意思是在所有设备的适合屏幕模式下应该只看到左上角。

自过去两三天以来，我一直在解决此问题。

**我想要什么：** 我想显示网页的左上角以显示在 Webview 中，无论策略可能是缩放或任何其他选项，但它应该适合所有设备的屏幕。

还有一件事**我不能改变网页的源代码，因为它是固定的。** 我必须通过代码本身进行管理。

![在此处输入图像描述](../Images/a2993df183dc259c1c262fd30584e251.png)

**我尝试过的：** 我参考了 Stackoverflow 链接，但没有运气。

这是我的代码。：

```
 WebView wv;
        wv = (WebView) findViewById(R.id.webview_MyPoops);
        wv.getSettings().setJavaScriptEnabled(true);

        // wv.setInitialScale(185);

        // wv.setInitialScale(30);
        String URL = "MY_LINK";

        wv.loadUrl(URL);

        WebSettings webSettings = wv.getSettings();
        webSettings.setSavePassword(false);
        webSettings.setSaveFormData(false);
        webSettings.setJavaScriptEnabled(true);
        webSettings.setSupportZoom(true);
        webSettings.setLoadWithOverviewMode(true);
        webSettings.setUseWideViewPort(true); 
```

我正在设备中显示完整的网页。

它在我的 LG 设备（分辨率为 480*800）中运行良好，但在大型设备或 Galaxy Tab2 等标签中，我得到的左上角图像非常小，屏幕的所有其他区域只是网页的背景。

下面是运行上述代码后 Galaxy Tab2 的屏幕截图。 ![在此处输入图像描述](../Images/674c0098c406c7946947d07418f4e176.png) 请给你任何我缺乏的建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T07:05:54.970

try with this code hop this work for u.

```
webview.setInitialScale(getScale()); 

private int getScale(){
            Display display = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay(); 
            int width = display.getWidth(); 
            Double val = new Double(width)/new Double(200);
            Log.e("hh", "** "+val);
            val = val * 100d;
            Log.e("hh", "** "+val);
            return val.intValue();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-06T04:45:03.590

```
WebView x;

x.setInitialScale(1); 
```

这是可能的最大变焦。但对于某些网站来说，它只是看起来很丑陋。

这是我找到的第二个版本

```
test1.getSettings().setDefaultZoom(ZoomDensity.FAR); 
```

这是一个很好的多面手，似乎只是缩小了很多，但仍然不是我想要的。

现在这是我的最终解决方案。

```
x.getSettings().setLoadWithOverviewMode(true);
x.getSettings().setUseWideViewPort(true); 
```

基本上这些所做的事情在另一个这样的问题中得到了回答。

```
setLoadWithOverviewMode(true) 
```

加载完全缩小的 WebView

```
setUseWideViewPort(true) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T15:15:12.850

在 HTML 页面上，您可以`target-densitydpi=240;` 根据设备类型在 Java 代码中设置此参数，页面将自动适应目标密度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-22T03:58:18.273

我相信修复应该只在网页级别完成，理想情况`WebView`下不能在这里做任何技巧。`WebView`只是一个浏览器（具体来说是 chromium 浏览器），它应该按照网页的指示进行渲染。

为了真正解决您的问题，您应该尝试修改网页的 CSS。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-25T23:08:39.643

您可以尝试使用[HtmlCleaner](http://htmlcleaner.sourceforge.net/)（如何在[此处](http://htmlcleaner.sourceforge.net/javause.php)使用它的示例）从网页中获取 html，然后提取您要显示的部分并将其加载到 WebView 中使用： `WebView.loadData();`。

我在我的一个应用程序中使用了这种方法来重新格式化页面，以便在移动设备上更容易使用。

# exception - 使用 Handlers 处理 JSF 中的构造函数抛出的异常

> ID：13507282
> 
> 赞同：2
> 
> 时间：2012-11-22T06:54:07.670
> 
> 标签：exception, jsf-2, exception-handling

大家好，虽然这是我的第一个问题，但我习惯于阅读 stackoverflow 中的解决方案，并且很高兴得到适当的答案。

我的问题是：有没有办法使用一些处理程序来处理构造函数抛出的异常（而不是在每个构造函数中编写 try 和 catch）并将页面重定向到 error.xhtml。我正在使用 JSF2。以及我如何识别构造函数引发的异常。等待你的回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T16:47:53.093

首先，尽量避免在托管 bean 的构造函数中做任何事情，这是不必要且丑陋的。使用注释对公共的、无参数的方法进行`@PostConstruct`注释，并且该方法保证在托管 bean 被实例化后立即运行。

为了解决您的主要问题，JSF 提供了一个`ExceptionHandler`您可以覆盖的类，以便自定义异常处理。它以半声明的方式实现，并在全局范围内应用，即适用于整个 JSF 应用程序上下文。本[教程](http://javalabor.blogspot.com.es/2011/09/jsf-2-global-exception-handling.html)提供了有关实现处理程序的良好指南。从该教程中，请注意，该`ExceptionQueuedEvent`对象提供了有关引发异常的所有可用信息，包括引发异常的 JSF 阶段，甚至是生成异常的组件

# android - 几个小时后，所有请求都开始失败并出现 UnknownHostException

> ID：13507286
> 
> 赞同：1
> 
> 时间：2012-11-22T06:54:18.230
> 
> 标签：android, httpconnection, intentservice, android-networking, android-internet

我正在使用每 30 秒`IntentService`接收一次意图并更新我的应用小部件的 。`AlarmManager`每次运行时，它都会使用`DefaultHttpClient`.

几个小时内一切正常，但几个小时后请求停止工作并总是返回一个`UnknownHostException`. **每次**我将设备打开半天时，都会发生这种情况。

重新启动设备即可解决问题，因此这不是服务器问题。

我将非常感谢任何帮助，因为我已经在这个问题上苦苦挣扎了几天了！

# c# - 快捷方式文件路径

> ID：13507291
> 
> 赞同：1
> 
> 时间：2012-11-22T06:54:33.883
> 
> 标签：c#

C# 有人知道如何创建文件的快捷方式声明路径。

```
picturebox.imagelocation = @"C:\ApplicationFolder\picture.jpg"; 
```

现在，如果用户将应用程序安装在不同的驱动器中会导致错误，那么有没有人知道如何制作短路径并在制作路径声明时忽略驱动器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T06:57:28.923

您应该使用应用程序文件夹中的[相对路径。](http://support.dtsearch.com/webhelp/dtsearch/relative_paths.htm)如果您需要绝对路径，您仍然可以使用[Path.GetFullPath](http://msdn.microsoft.com/en-us/library/system.io.path.getfullpath.aspx)方法

# javascript - 无法通过 Jquery 动态添加下拉菜单

> ID：13507294
> 
> 赞同：0
> 
> 时间：2012-11-22T06:54:49.217
> 
> 标签：javascript, jquery, html, drop-down-menu

这听起来可能微不足道，但我做不到。

这是简单的代码：我在这里做错了什么？

是不是我误解了这个功能？如果是，请纠正我。

```
 <html>
  <head>
   <script type="text/javascript" src="jquery.js"></script>                             
    <script type="text/javascript">
      $(document).ready(function(){
       $(".button").click(function(){
        jQuery('#id').append('<select></select>');
       });     
      });
   </script>
  </head>

  <body >
    <input type="submit" class="button" id="id" value="submit"/>
  </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:59:40.233

您的正文中没有容器/元素可以容纳新`select`添加的内容，请在您的 html 中添加一个容器，如下所示`id="id"`

```
<body >
     <div id="id">
     </div>
    <input type="submit" class="button" value="submit"/>
</body> 
```

[演示](http://jsfiddle.net/RwvQd/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:01:15.393

文档中是否`#id`存在？

你想添加`<option>`到`<select>`?

```
$(document).ready(function() {
    $(".button").click(function() {
        jQuery('body').append('<select><option value="1">One</option><option value="2">Two</option></select>');
    });
});​ 
```

小提琴 - [http://jsfiddle.net/XVmuZ/](http://jsfiddle.net/XVmuZ/)

如果您想添加它，请`#id`确保它存在（就像在 rahul 的回答中一样）

小提琴 - [http://jsfiddle.net/XVmuZ/1/](http://jsfiddle.net/XVmuZ/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T08:00:58.480

考虑到您自己的代码，您可以简单地编写

```
$('#id').after('<select></select>'); 
```

通常 append 与容器一起使用，因为#id 与按钮相关联，因此它不起作用。如果您仍想使用追加，请使用 div/span，但如果您不想使用 .after() 可以正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T07:14:31.187

第一件事不要使用提交按钮，因为它会回发您的页面，因此 jquery 将不起作用。试试这个代码

```
<html>
  <head>
   <script type="text/javascript" src="jquery.js"></script>                             
    <script type="text/javascript">
      $(document).ready(function(){
       $(".button").click(function(){
        $('#ddl').append('<select><option>abc</option><option>def</option></select>');
       });     
      });
   </script>
  </head>

  <body >
    <input type="button" class="button" id="id" value="submit"/>
    <div id="ddl">
    </div>
  </body> 
```

# iphone - Tableview 延迟加载中的问题

> ID：13507295
> 
> 赞同：-1
> 
> 时间：2012-11-22T06:54:56.080
> 
> 标签：iphone, ios, uitableview, lazy-loading

我有表格视图名称“tableAll”，数组“thumbVideoListArray”（首先这个数组是空的）并且有数组“objDelegate.listVidArray”，它有图像的url。我认为我有错误检查。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
  if([thumbVideoListArray count] == 0)
        {
            [NSThread detachNewThreadSelector:@selector(fetchImage:) toTarget:self withObject:indexPath];
        }
        else
        {
             UIImage *img1 = [thumbVideoListArray objectAtIndex:indexPath.row];
            if(img1)
            {

                cell.thumbImage =  [thumbVideoListArray objectAtIndex:indexPath.row];
            }
            else
            {
                [NSThread detachNewThreadSelector:@selector(fetchImage:) toTarget:self withObject:indexPath];
            }
        }
}

- (void)fetchImage:(NSIndexPath *)indexPath
{

NSLog(@"in thead");

if([[[[objDelegate.listVidArray objectAtIndex:[objDelegate.listVidArray count]-(indexPath.section+1)]valueForKey:@"videoList"]valueForKey:@"media_id"]objectAtIndex:indexPath.row])
{
    NSData *dataImage = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@",[[[[objDelegate.listVidArray objectAtIndex:[objDelegate.listVidArray count]-(indexPath.section+1)]valueForKey:@"videoList"]valueForKey:@"img"]objectAtIndex:indexPath.row]]]];

    if([dataImage length])
    {

        UIImage *imageThumb = [UIImage imageWithData:dataImage];

        [thumbVideoListArray addObject:imageThumb];

        // Reload rows with the fetched image in other thread
        [self performSelectorOnMainThread:@selector(reloadTable:) withObject:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:indexPath.row inSection:indexPath.section]] waitUntilDone:NO];
    }
}

}

- (void)reloadTable:(NSArray *)array
{

[tableAll reloadRowsAtIndexPaths:array withRowAnimation:UITableViewRowAnimationNone];

 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:02:11.507

在 -tableView:cellForRowAtIndexPath: 你永远不会抓住你的单元格对象。您需要在设置其属性之前使可重用单元出列。您还需要返回单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:08:21.897

我认为您可以尝试[使用 AsyncImageView](https://github.com/nicklockwood/AsyncImageView)从网络延迟加载图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:18:11.910

您需要进行一些修改，因为这不是一个好方法，而不是它，您可以做什么，您只需根据您的要求在 viewDidLoad 或 viewWillAppear 调用您的获取过程，然后重新加载您的表......更重要的是不要忘记在这里使用 NSOperation 并标记您加载的数据，以便它可以根据您的单元格进行调整...希望它会解决您的问题...就像我已经做过很多次一样。

# c++ - 一个带有两个纹理的矩形（两个连接的四边形） - 其公共边界错误

> ID：13507296
> 
> 赞同：0
> 
> 时间：2012-11-22T06:55:02.430
> 
> 标签：c++, mapping, directx, textures, blending

我有一个由两个四边形组成的矩形（8个顶点，我使用索引三角形）：

```
------+------
| \   | \   |
|  \  |  \  |
|   \ |   \ |
______+______ 
```

我也有两个纹理。我将它们都绑定到着色器。

我想用第一个纹理纹理矩形（左四边形）的一部分，用第二个纹理纹理另一部分。

但是当我根据顶点在像素着色器中的位置选择纹理时，我对标有“+”的顶点有疑问。有一次我正在分析第一个四边形的“+”顶点，但具有相同位置的顶点也在第二个四边形中（并且必须有第二个纹理）。所以按位置设置贴图会报错。

如何确定要分配的纹理（在采样器中）？我不想进行第二次传递或向着色器添加其他信息（如果有任何选项可以在没有它的情况下进行）。

基本上说：我有模型和优势。该边缘告诉纹理变化的位置。但是如何实现这个目标呢？当我在该边缘的顶点上设置纹理 1 或纹理 2 时，会出现一些错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T15:48:49.320

我认为你的方法是错误的。着色器中的条件分支会减慢着色器的速度，应尽可能避免。原因是着色器经过优化，可以为每个像素并行执行相同的代码。如果根据图形卡实现在着色器中放置条件，则会发生以下情况之一：着色器将执行条件的两个分支并在执行后为每个像素选择适当的路径，或者让所有像素等到最长的路径在继续之前，条件已完成执行。

在您的情况下，您正在尝试使用两种纹理绘制一个图元。当以这种方式定义时，这实际上是不可能的。换个概念就能轻松达到你想要的效果：

我可以想到两种可能的方法（可能还有更多）：

1.  第一个也是最简单的方法是绘制两个四边形，每个四边形都有自己的纹理。确实，您将调用着色器两次，但我几乎看不到任何真正的减速，因为无论如何都会绘制确切数量的像素。
2.  第二种方法稍微复杂一些，但可以让你只画一次。您需要做的是创建一个大纹理，其中包含两个纹理并排放置，并将整个纹理映射到整个三角形条带。这样，渲染器将为您确保每个四边形都有其“自己的”纹理。使用 OpenGL，这是使用`glTexSubimage2D`. 在direct3d 9中它更复杂，您使用以下顺序：
    A.使用B创建纹理`CreateTexture`
    。使用C获取级别0`IDirect3DTexture9::GetSurfaceLevel()`
    的表面。使用D将图像加载到表面中`D3DXLoadSurfaceFromMemory()`
    。释放表面

因此，您将水平纹理坐标从 0 到 0.5 映射到第一个四边形的顶点，并将从 0.5 到 1 的坐标映射到第二个四边形的顶点。如果四边形大小不同或纹理大小不同，您只需相应地更改映射

如果您坚持在着色器中使用条件分支，您应该记住您所说的是一列像素，而不仅仅是两个顶点（毕竟这是一个像素着色器），因此您应该检查所有像素。这可能是个问题，因为除非没有变换，否则您无法知道每个像素的变换结果。最好不要在像素着色器中查询顶点值。

希望这能让你走上正确的轨道

# node.js - 无法使用 nodejs/expressjs 从 MongoDB GridFS 下载文件作为流

> ID：13507298
> 
> 赞同：0
> 
> 时间：2012-11-22T06:55:17.027
> 
> 标签：node.js, mongodb, stream, express, gridfs

我正在使用带有 express 3.x、mongoose 3.3.x 和 gridfs-stream 模块的 NodeJs 1.9.x。以下是上传代码。效果很好。

```
var mongoose = require('mongoose');
var fs       = require('fs');
var GridStrm = require('gridfs-stream');

exports.stream_ajax_upload_file = function(req, res){
    var fileType =  req.header('X-File-Type');
    var fileName =  req.header('X-File-Name');
    var uniqId   =  req.param('uniqId', '112211112111');
    var conn     = mongoose.createConnection('localhost', 'TestArun', 27017);
    conn.once('open', function () {

        var gfs     = GridStrm(conn.db, mongoose.mongo);
        var fileId  = new ObjectID(uniqId);
        writestream = gfs.createWriteStream(fileId, [{"content_type": fileType, "metadata":{ "fileName": fileName, "uploaded_at": (new Date()).toString() }}]);

        req.on('data', function(data) {
            console.log("Writing stream in to gridfs");
            writestream.write(data);
        });

        req.on('end', function(data) {
            writestream.end();
            res.send("I think it is uoploaded: ID::" + uniqId);
        });
    });

} 
```

我可以在 gridfs 中看到上传的数据块。以下是下载代码。

```
var mongoose = require('mongoose'); 
var fs       = require('fs');
var GridStrm = require('gridfs-stream');

exports.download_file_as_stream = function(req, res){
    var uniqId =  req.param('uniqId', '112211112111');
    var conn = mongoose.createConnection('localhost', 'TestArun', 27017);
    conn.once('open', function () {     
        var gfs         = GridStrm(conn.db, mongoose.mongo);
        var fileId      = new ObjectID(uniqId);
        var readstream  = gfs.createReadStream(fileId, [{"content_type": 'application/pdf'}]);
        //res.header('content-type','application/pdf');
        readstream.pipe(res);
    }); 
} 
```

问题是我无法下载正确的文件。当我尝试下载时，我得到了一些以请求 url 的名称下载的文件，**即： download_file_as_stream**。但大小与上传的文件相同。我认为内容类型等设置的问题。我不确定问题出在哪里。无论是在上传还是下载部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T06:34:42.710

要`content_type`在您的 writeStream 中工作，您还应该传递 option `mode = 'w'`。默认模式是 w+，但使用 w+ 时 content_type 不会更新。

在您的 readStream 中，您不需要提供 content_type 设置，因为它存储在数据库中！

# dojo - 如何在道场网格单元中添加多个按钮

> ID：13507299
> 
> 赞同：0
> 
> 时间：2012-11-22T06:55:19.963
> 
> 标签：dojo, dojox.grid.datagrid, dojox.grid

我是 dojo 的新手，我正在尝试将一些按钮放入数据网格单元格中。我阅读了文档并成功使用格式化程序将一个按钮放入网格中：

```
{
    name: "oper",
    field: "id",
    type: dojox.grid.cells._Widget,
    editable: false,
    formatter: function(id){
        return new Button({
            label:"oper",
            onClick: function(){
                    oper(id);
            }
        });
    } 
```

}

我的问题是如何将两个或两个以上的按钮放入单元格中。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-29T14:43:50.090

这是关于dojo Datagrids 的一个经常性问题。这里的主要问题是行格式化程序通常返回 dijit 小部件或 html。我找到并测试了一种简单的方法来克服这个问题。
1\. 为您的小部件创建您的 div 持有人。例如 var holderDiv = dojo.toDom("");
2\. 动态创建你的 wigets 例如 var editBtn = new dijit.form.Button({...});
var saveBtn = new dijit.form.Button({...});
var deleteBtn = new dijit.form.Button({...});
3\. 将您的小部件放在持有人 div 中。
4.返回持有人div的innerHtml。

```
 **Hier is the full code:**
        function controlBtnsFormatter(data, rowIndex) {
            var holderDiv = dojo.toDom("<div></div>");
            var editBtn = new dijit.form.Button({...});
            var saveBtn = new dijit.form.Button({...});
            var deleteBtn = new dijit.form.Button({...});
            // destroy them on remove
            editBtn._destroyOnRemove = true;
            saveBtn._destroyOnRemove = true;
            deleteBtn._destroyOnRemove = true;
            // place buttons inside div
            editBtn.placeAt(holderDiv);
            saveBtn.placeAt(holderDiv);
            deleteBtn.placeAt(holderDiv);

            return holderDiv.innerHTML;

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T14:19:48.510

在您的格式化程序函数中，创建一个 div 并将所有按钮添加到您的 div 中并返回创建的 div

```
formatter: function(id){
    var result = "<div>"
    //add all your buttons in the div, you can also apply some styles

    result += "</div>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-04T10:49:40.923

更好的解决方案是使用 dijit.form.Form 小部件来包围按钮：

```
 require(['dojo/_base/lang', 'dojo/dom', 'dijit/form/Button', 'dijit/form/Form', 'dojo/domReady!'],
               function(lang, dom, Button, Form){

                function formatter(){

                    var form = new Form();
                    var w1 = new Button({
                        label: "Edit",
                        onClick: function() {
                            alert("Thanks for all the fish.  ");
                        }
                    });

                    var w2 = new Button({
                        label: "Delete",
                        onClick: function() {
                            alert("Thanks for all the fish 2\.  ");
                        }
                    });

                    w1._destroyOnRemove = true;
                    w2._destroyOnRemove = true;

                    w1.placeAt(form);
                    w2.placeAt(form);

                    return form;
                } ..... 
```

# php - Doctrine2 将实体导出到数组

> ID：13507300
> 
> 赞同：14
> 
> 时间：2012-11-22T06:55:20.883
> 
> 标签：php, doctrine, doctrine-orm

我有`Product`实体与多对一`Category`实体。我需要`Product`在会话中存储。首先，我尝试`\Serializable`在 Product 上实现接口。我应该如何序列化我的相关`Category`实体？我还应该实现`\Serializable`接口吗？

我读到，学说中的序列化是非常痛苦的操作，我想到了这一点：

我们可以从实体中获取原始值吗？正是存储在数据库中的数据。如果我们能得到这个值，我们就可以将它存储在任何地方并重新创建对象！

我阅读了学说 2`Doctrine\ORM\Internal\Hydration\ObjectHydrator:hydrateRowData`的代码并找到了方法，但它受到了保护。是否有任何公共 api 可以做到这一点？

# 更新：

我只是从 BasicEntityPersister 复制粘贴并集成了一些代码，它似乎可以工作。

```
 $product = $productsRepository->find($id);

    if (!$product) {
        throw $this->createNotFoundException('No product found for id ' . $id);
    }

    $uow = $em->getUnitOfWork();
    $entityPersister = $uow->getEntityPersister(get_class($product));
    $classMetadata = $entityPersister->getClassMetadata();

    $originalData = $uow->getOriginalEntityData($product);

    $result = array();
    foreach ($originalData as $field => $value) {
        if (isset($classMetadata->associationMappings[$field])) {
            $assoc = $classMetadata->associationMappings[$field];

            // Only owning side of x-1 associations can have a FK column.
            if ( ! $assoc['isOwningSide'] || ! ($assoc['type'] & \Doctrine\ORM\Mapping\ClassMetadata::TO_ONE)) {
                continue;
            }

            if ($value !== null) {
                $newValId = $uow->getEntityIdentifier($value);
            }

            $targetClass = $em->getClassMetadata($assoc['targetEntity']);
            $owningTable = $entityPersister->getOwningTable($field);

            foreach ($assoc['joinColumns'] as $joinColumn) {
                $sourceColumn = $joinColumn['name'];
                $targetColumn = $joinColumn['referencedColumnName'];

                if ($value === null) {
                    $result[$owningTable][$sourceColumn] = null;
                } else if ($targetClass->containsForeignIdentifier) {
                    $result[$owningTable][$sourceColumn] = $newValId[$targetClass->getFieldForColumn($targetColumn)];
                } else {
                    $result[$owningTable][$sourceColumn] = $newValId[$targetClass->fieldNames[$targetColumn]];
                }
            }
        } elseif (isset($classMetadata->columnNames[$field])) {
            $columnName = $classMetadata->columnNames[$field];
            $result[$entityPersister->getOwningTable($field)][$columnName] = $value;
        }
    }

    print_r($result); 
```

在`$result`我们有原始值。现在我们需要方法如何通过这个数组创建对象

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-23T02:36:15.407

```
<?php

namespace Acme\ServiceBundle\Services;

use Doctrine\ORM\EntityManager;

class EntitySerializer
{
    protected $em;

    public function __construct(EntityManager $em)
    {
        $this->em = $em;
    }

    public function serialize($entity)
    {
        $className = get_class($entity);

        $uow = $this->em->getUnitOfWork();
        $entityPersister = $uow->getEntityPersister($className);
        $classMetadata = $entityPersister->getClassMetadata();

        $result = array();
        foreach ($uow->getOriginalEntityData($entity) as $field => $value) {
            if (isset($classMetadata->associationMappings[$field])) {
                $assoc = $classMetadata->associationMappings[$field];

                // Only owning side of x-1 associations can have a FK column.
                if ( ! $assoc['isOwningSide'] || ! ($assoc['type'] & \Doctrine\ORM\Mapping\ClassMetadata::TO_ONE)) {
                    continue;
                }

                if ($value !== null) {
                    $newValId = $uow->getEntityIdentifier($value);
                }

                $targetClass = $this->em->getClassMetadata($assoc['targetEntity']);
                $owningTable = $entityPersister->getOwningTable($field);

                foreach ($assoc['joinColumns'] as $joinColumn) {
                    $sourceColumn = $joinColumn['name'];
                    $targetColumn = $joinColumn['referencedColumnName'];

                    if ($value === null) {
                        $result[$sourceColumn] = null;
                    } else if ($targetClass->containsForeignIdentifier) {
                        $result[$sourceColumn] = $newValId[$targetClass->getFieldForColumn($targetColumn)];
                    } else {
                        $result[$sourceColumn] = $newValId[$targetClass->fieldNames[$targetColumn]];
                    }
                }
            } elseif (isset($classMetadata->columnNames[$field])) {
                $columnName = $classMetadata->columnNames[$field];
                $result[$columnName] = $value;
            }
        }

        return array($className, $result);
    }

    public function deserialize(Array $data)
    {
        list($class, $result) = $data;

        $uow = $this->em->getUnitOfWork();
        return $uow->createEntity($class, $result);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-06T13:49:22.940

我遇到了同样的问题，我也想关联数组中的数据。所以我想出了以下内容：

```
$serializer = new Serializer($this->em); // Pass the EntityManager object
$array = $serializer->serialize($message); // Returns the array (with associations!) 
```

资源：

```
<?php

/**
 * Class Serializer
 *
 * @author Steffen Brem
 */
class Serializer
{
    /**
     * @var Doctrine\ORM\EntityManager
     */
    private $_em;

    /**
     * Constructor
     *
     * @param \Doctrine\ORM\EntityManager $em
     */
    public function __construct(\Doctrine\ORM\EntityManager $em)
    {
        $this->_em = $em;
    }

    /**
     * Serialize entity to array
     *
     * @param $entityObject
     * @return array
     */
    public function serialize($entityObject)
    {
        $data = array();

        $className = get_class($entityObject);
        $metaData = $this->_em->getClassMetadata($className);

        foreach ($metaData->fieldMappings as $field => $mapping)
        {
            $method = "get" . ucfirst($field);
            $data[$field] = call_user_func(array($entityObject, $method));
        }

        foreach ($metaData->associationMappings as $field => $mapping)
        {
            // Sort of entity object
            $object = $metaData->reflFields[$field]->getValue($entityObject);

            $data[$field] = $this->serialize($object);
        }

        return $data;
    }
} 
```

# python-2.7 - 在 Python 中插入大于 10 的数字以列出

> ID：13507301
> 
> 赞同：1
> 
> 时间：2012-11-22T06:55:37.040
> 
> 标签：python-2.7

我有一个列表，例如`list=['a','b']`. 我想在“a”和“b”之间插入一个数字，例如 1234。当我使用`list[1:1]=str(1234)`它时返回`['a','1','2','3','4','b']`. 我想以这种模式输出：`['a','1234','b']`. 请你帮助我好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T06:59:22.510

您可以使用该`insert`方法，它将索引位置作为第一个参数，将要插入的项目作为第二个参数：

```
In [1]: l = ['a', 'b']

In [2]: l.insert(1, 1234)

In [3]: l
Out[3]: ['a', 1234, 'b'] 
```

请注意，这`l`是此处的列表 - 您要避免使用内置 Python 关键字（例如`list`）作为变量名，因为它最终会导致您（和其他阅读您的代码的人 :)）在路上头疼。至于为什么你的不起作用 - 当你分配给列表的一部分时（`l[1:1]`例如），等式右侧的部分需要是可迭代的（即你可以迭代的东西，就像另一个列表、字符串等）。然后它使该可迭代的每个元素在主列表中成为自己的元素，从您指定的位置开始。当您说 时`str(1234)`，您会返回，当您将其分配给列表的切片时`'1234'`，它会分解。`['1', '2', '3', '4']`

如果你想使用切片赋值完成插入，你可以做这样的事情（注意数字是如何包裹在列表括号中的，使它成为一个单元素列表），但这只是作为一个例子来看看发生了什么-`insert`具有更好的性能：

```
In [18]: l = ['a', 'b']

In [19]: l[1:] = [1234] + l[1:]

In [20]: l
Out[20]: ['a', 1234, 'b'] 
```

这需要从 开始的列表切片`'b'`并将其替换为列表`[1234]`加上从 开始的原始列表部分`'b'`，这基本上产生了相同的结果。

# big-o - 为什么方阵乘法的时间复杂度定义为 O(n^3)？

> ID：13507302
> 
> 赞同：7
> 
> 时间：2012-11-22T06:55:38.327
> 
> 标签：big-o, matrix-multiplication

我在多个来源（在线和书籍）中遇到过这个问题 - 对于大小为 nXn 的矩阵，方阵乘法的运行时间为 O(n^3)。（示例 -[矩阵乘法算法时间复杂度](https://stackoverflow.com/questions/8546756/matrix-multiplication-algorithm-time-complexity)）

该语句表明该乘法过程的运行时间上限是 Cn^3，其中 C 是某个常数，n>n0，其中 n0 是某个输入，超出该上限成立。（[http://en.wikipedia.org/wiki/Big_O_notation](http://en.wikipedia.org/wiki/Big_O_notation)和[Θ(n) 和 O(n) 之间有什么区别？](https://stackoverflow.com/questions/471199/what-is-the-difference-between-n-and-on)）问题是，我似乎无法导出常数 C 和 n0 的值。

我的问题-

1.  有人可以为“方阵乘法的大哦是 O(n^3)”这句话提供数学证明吗？

2.  C 和 n0 的值是多少？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-22T08:22:30.607

1.  彼此之间有 3 个 for 循环，每个循环从 0 到 n-1（或 1 到 n）（如[您提供的链接](https://stackoverflow.com/questions/8546756)中所示，即使它不完全正确），这会导致 O(n ³ )。将其形式化为适当的证明应该很容易。

2.  a) 对于形式化证明，运行时间需要根据一组操作来定义，通常被认为是任何算术运算。在 3 个 for 循环内有 2 个算术运算（1 个乘法，1 个加法），因此我们得到，因此 C = 2。`2.n³`

    b) n0 = 0 因为这在 n = 1 时成立

请注意，由于 big-O 只是一个上限，我们也可以说对于任何 k >= 3，该算法的复杂度是 O(n ^k )（如果我们使用 big-Theta 表示法，则情况并非如此）。我们也可以将 C 和 n0 分别取为大于 2 和 0 的任何值（因为要求不是找到可能的最小值）。

# sql - 使用“For XML Path”构建查询

> ID：13507306
> 
> 赞同：-1
> 
> 时间：2012-11-22T06:55:59.000
> 
> 标签：sql, sql-server

我有一个包含以下数据的表：

列：级别、类、属性、值

数据：

0、衣服、鞋1、耐克

0、衣服、鞋2、阿迪达斯

0、衣服、鞋3、FILA

0，衣服，帽子，汤姆

1、卫衣、Dash1、红色

1、卫衣、Dash2、蓝色

我想生成一个 xml，其中包含每个级别的数据（迭代级别）。这就是我所期待的：

```
<Root>
 <Level>
   <Clothes>
      <Shoe1>Nike</Shoe1>    
      <Shoe2>Adidas</Shoe2>
      <Shoe3>FILA</Shoe3>
   </Clothes>
   <Clothes>
      <Hat>Tom</Hat>
   </Clothes>
 </Level>
 <Level>
     <Sweatshirt>
         <Dash1>Red</Dash1>             
         <Dash2>Blue</Dash2>
     </Sweatshirt>
 </Level>
</Root> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:00:47.140

尝试使用 dbms_xmlgen

```
select dbms_xmlgen.getxml('your query') from dual; 
```

您可以使用光标遍历每个项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:56:17.477

那么你可以尝试做这样的事情

```
select
    cast(
        '<' + T.Class + '>' +
        cast(
            (
                select
                    cast('<' + TT.Property + '>' + TT.Value + '</' + TT.Property + '>' as xml)
                from #MyTable as TT
                where TT.Level = T.Level and TT.Class = T.Class
                for xml path('')
            )
         as nvarchar(max)) +
         '</' + T.Class + '>'
     as xml) as [Level]
from (select distinct TT.Level, TT.Class from #MyTable as TT) as T
for xml path(''), root('Root'), type 
```

**`[sql fiddle demo](http://sqlfiddle.com/#!3/ac0eb/2)`**

这并不是说我真的很喜欢这种解决方案。你也可以试试动态SQL

# java - 在 Mac 上许可软件的方法（基于文件/离线）

> ID：13507307
> 
> 赞同：1
> 
> 时间：2012-11-22T06:56:20.093
> 
> 标签：java, swing, dmg

我为 Mac 创建了一个 Java 应用程序，我计划将其作为 dmg 文件分发 - 用户可以简单地挂载 dmg 并运行该应用程序。我面临的问题是许可问题。

到目前为止，我已经编写了基于文件的许可证的代码。但是，我没有预见到当直接从挂载的 dmg 打开应用程序时，无法写入磁盘映像，并且应用程序无法在当前目录中创建和保存基于文本的许可证文件！

作为一种解决方法，我能想到的唯一方法是将应用程序从已安装的 dmg 复制到我 Mac 上的文件夹中，然后从那里运行应用程序并输入许可证详细信息，以便将它们保存在许可证文本文件中。

有人可以建议我一种更好的方法，因为这个方法不必要地麻烦和负担。

我不想每次用户想要运行应用程序时都对许可证进行在线验证，所以我热衷于探索其他方法来对软件许可证进行离线验证，这样更容易使用。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:19:21.363

您可以为此使用[License3j](http://projects.verhas.com/com.verhas.licensor/license3j/license3j/)。我用它来许可我的 java 应用程序。

你可以在这里找到一个[样本](http://projects.verhas.com/com.verhas.licensor/license3j/license3j/sample.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T12:39:06.177

[您可以按照此处](https://stackoverflow.com/a/11724866/230513)的建议或按照[此处](https://stackoverflow.com/a/6886694/230513)`java.util.Preferences`的建议将您的许可证密钥写入其中。`javax.jnlp. PersistenceService`

# ajax - 为什么 Codeigniter/Ajax 中出现此 URL 错误？

> ID：13507308
> 
> 赞同：0
> 
> 时间：2012-11-22T06:56:27.097
> 
> 标签：ajax, codeigniter, url, jquery

我正在 Codeigniter 框架中构建一个应用程序。我在视图文件中有一个 Ajax 函数，它调用 Controller(Me) 函数(getUser)。但是如果我更改触发方式，我必须更改 Ajax 函数中的 URL 参数那个功能。代码如下

方法一

```
$('#project').click(function(){
        $.ajax({
            type: "POST",
            url: "me/getUser"  // Controller name is added before func name
        }).done(function( html ) {
            $(".dashboard-project").html(html);
        });
    }); 
```

方法二

```
$('#project').click(function(){
    ajaxfunc123();
   });

 ajaxfunc123(){
   $.ajax({
      type: "POST",
      url: "getUser"    // Direct function called
      }).done(function( html ) {
           $(".dashboard-project").html(html);
      });
 } 
```

上述两种方法都有效..但是如果两个功能都在同一页面上，为什么需要更改 URL，我感到很困扰？有人可以解释一下原因还是我做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T10:07:54.760

你使用`index.php`还是删除了它？

那么你应该尝试：

```
url: "<?php echo site_url('me/getUser'); ?>" 
```

和

```
url: "<?php echo site_url('getUser'); ?>" 
```

`data:{}`也不要忘记`dataType:""`在你的 ajax 调用中

# javascript - 跳过导航在 Firefox 的新打开窗口中不起作用，但在 IE 和 Chrome 中有效

> ID：13507309
> 
> 赞同：3
> 
> 时间：2012-11-22T06:56:27.747
> 
> 标签：javascript, jquery, html, firefox, navigation

当我在firefox中使用window.open打开一个新窗口并尝试使用跳过导航在新窗口中导航页面的不同部分时不起作用并且预览窗口被重新加载。这就是我正在做的事情。

```
<html>
<head>
    <script>
    function openWindow()
        {
            var win = window.open("","_blank");
            win.document.write("<!DOCTYPE html><html><head></head><body><a href='#rajeev'>hi</a><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div id='rajeev'>To Come Here</div></html>");
            win.document.close();
        }
    </script>
</head>
<body>
    <button type="button" onclick="openWindow()">Display Date</button>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:39:59.980

您应该能够将以下 onclick 代码添加到您的链接，而不是哈希：

```
onclick='$(document).scrollTop($(\"#rajeev\").offset().top);'
// Escaped the quotes since it will be placed in a document.write(""); 
```

您需要在弹出窗口的代码中导入 jQuery，但如果我只使用它：

```
`win.document.write("<script src='http://code.jquery.com/jquery-1.8.2.js' type='text/javascript'></script>` 
```

浏览器似乎将该`</script>`标记解释为整个“弹出式书写”脚本的结束标记。这可以通过切割`</script>`字符串中的标签来规避，如下所示。

[此代码](http://jsfiddle.net/4ypFq/4/)适用于 Firefox 和 Chrome：

```
<html>
    <head>
        <script>
            function openWindow()  {
                var win = window.open("","_blank");
                win.document.write("<!DOCTYPE html><html><head><script src='http://code.jquery.com/jquery-1.8.2.js' type='text/javascript'></scr");
                // Split up the </script> tag.
                win.document.write("ipt></head><body><a  onclick='$(document).scrollTop($(\"#rajeev\").offset().top);'>hi</a><br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br>&nbsp;<br><div id='rajeev'>To Come Here</div></html>");
                win.document.close();
            }
        </script>
    </head>
    <body>
        <button type="button" onclick="openWindow()">Display Date</button>
    </body>
</html>​ 
```

现在，您只需设置 的样式`<a>`，使其看起来像您可以单击它，或者将其替换为`<button>`，例如。

^(（Stackoverflow 有点弄乱了上面代码中的语法突出显示，但它是有效的 js。此外，您通常不希望在 HTML 中添加内联事件侦听器。）)

# sql-server - SQL Server 2008 - 从命令行运行 SQL 语句

> ID：13507310
> 
> 赞同：0
> 
> 时间：2012-11-22T06:56:31.300
> 
> 标签：sql-server

有人可以请教 - 我们如何从命令行运行 SQL Query 语句。我们想创建一个批处理文件，其中包含最终用户可以从命令行执行的 SQL 语句。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:29:41.997

只需输入 sqlcmd /? 在命令行上，给定的提示应该会有所帮助。

# python - 在 matplotlib 中创建具有不同形状的子图

> ID：13507315
> 
> 赞同：5
> 
> 时间：2012-11-22T06:56:50.707
> 
> 标签：python, matplotlib, subplot

[![气象图](../Images/dedbf0f1f3404f6e4669d6188dd3f93e.png)](https://i.stack.imgur.com/vvuaG.jpg)

我正在寻找一个具有多个子图的图形，就像 matplotlib 中的这个气象图。我将需要多个不同高度的子图（宽度都相同，但有些会“更瘦”，有些会“更胖”）。就像上图一样，有些子图需要很大，有些需要很小，但是无论有多少子图，它们都需要足够大以传达有用的信息。

当我将子图创建为 pyplot.subplot(2,1,1) 时，它具有我需要的纵横比，但如果我增加行数（例如 subplot(3,1,1)），子图会变得“太瘦” . 我将需要在一个图形上放置六个这样的图，但是如果我开始在图形上放置更多的子图，它们就会变得太“小”。

简而言之，在 matplotlib 中是否有可能在不将多个图像拼接在一起的情况下制作像这样的气象图？这些图像将通过 url 请求从服务器返回，因此从技术上讲这是可能的，但如果我可以在库中解决这个问题，那将是首选。

matplotlib 的文档非常棒，但似乎 matplotlib 已调整为为您提供具有相同纵横比的子图，而不是让您在子图数量增加时提供具有任意纵横比的子图。我在不同子图大小的网络上找不到单个示例。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T11:46:26.127

您可以通过在归一化坐标中给它一个边界框（在构造时）来完全控制轴定位。格式为[左、上、宽、高]。

我将如何设置图形的示例：

```
import matplotlib.pyplot as plt

left = 0.1
width = 0.8

ax1 = plt.axes([left, 0.5, width, 0.45])
ax2 = plt.axes([left, 0.3, width, 0.19])
ax3 = plt.axes([left, 0.2, width, 0.09], sharex=ax2)
ax4 = plt.axes([left, 0.1, width, 0.09], sharex=ax2)

# ticks at the top of the top plot
ax1.xaxis.tick_top()

# remove ticks for ax2 and ax3
ax2.xaxis.set_visible(False)
ax3.xaxis.set_visible(False)

# only put ticks on the bottom of ax4
ax4.xaxis.tick_bottom()

plt.show() 
```

我添加了一些您可能会觉得有用的功能（删除顶部刻度、共享 xaxis、将刻度移动到轴的顶部）。

结果：

![示例输出](../Images/7295b41a813a7cee566a317f63f216e9.png)

高温高压

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T11:51:41.840

您可以使用`Gridspec`或`subplot2grid`。我发现后者使用起来更自然，但这是个人喜好。此外，佩尔森的回答是另一种方法。

看看[这个例子](http://matplotlib.org/examples/pylab_examples/demo_tight_layout.html)中最底层的两个代码块。

# sql - 如何在 SQL Server 2008 的存储过程中编写游标

> ID：13507317
> 
> 赞同：11
> 
> 时间：2012-11-22T06:57:03.717
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的数据库中有两个表

**优惠券表**

*   标识（整数）
*   名称 (nvarchar(max))
*   NoofUses (int)

**优惠券使用表**

*   编号（整数）
*   优惠券(int)
*   创建日期（日期时间）

每当用户单击优惠券时，都会进入`CouponUse`包含该优惠券 ID 的表中的条目

现在`coupon`表中有一个名为的列`NoofUses`。我想在一个存储过程中编写一个游标，该过程循环遍历`couponuse`表并查看一张优惠券有多少行，然后`NoofUses`在优惠券的字段中填写该数字。

我有这个查询

```
 select COUNT(*) as totalcount , Name as name from Coupon as coupon 
  join CouponUse as couponuse on coupon.id = couponuse.couponid
  group by couponuse.couponid , coupon.Name 
```

这给了我优惠券名称及其计数`couponuse`

但我不知道如何使用游标在存储过程中实现它？

您提出的任何问题将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-22T07:14:09.183

试试下面的代码片段。您可以从您的应用程序中调用以下存储过程，以便`NoOfUses`更新优惠券表。

```
CREATE PROCEDURE [dbo].[sp_UpdateCouponCount]
AS

Declare     @couponCount int,
            @CouponName nvarchar(50),
            @couponIdFromQuery int

Declare curP cursor For

  select COUNT(*) as totalcount , Name as name,couponuse.couponid  as couponid from Coupon as coupon 
  join CouponUse as couponuse on coupon.id = couponuse.couponid
  where couponuse.id=@cuponId
  group by couponuse.couponid , coupon.Name

OPEN curP 
Fetch Next From curP Into @couponCount, @CouponName,@couponIdFromQuery

While @@Fetch_Status = 0 Begin

    print @couponCount
    print @CouponName

    update Coupon SET NoofUses=@couponCount
    where couponuse.id=@couponIdFromQuery

Fetch Next From curP Into @couponCount, @CouponName,@couponIdFromQuery

End -- End of Fetch

Close curP
Deallocate curP 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-22T08:06:04.213

仅仅使用一个简单的`UPDATE`语句有什么问题？

```
UPDATE dbo.Coupon
SET NoofUses = (SELECT COUNT(*) FROM dbo.CouponUse WHERE Couponid = dbo.Coupon.ID) 
```

这就是所需要的！没有混乱和复杂的游标，没有循环，没有 RBAR（逐行）处理......只是一个漂亮、简单、干净的基于集合的 SQL 语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-10T05:48:38.950

您可以创建一个触发器，该触发器`NoofUses`在`Coupon`表 `couponid`中使用时更新表中的`CouponUse`列

询问 ：

```
CREATE TRIGGER [dbo].[couponcount] ON [dbo].[couponuse]
FOR INSERT
AS
if EXISTS (SELECT 1 FROM Inserted)
  BEGIN
UPDATE dbo.Coupon
SET NoofUses = (SELECT COUNT(*) FROM dbo.CouponUse WHERE Couponid = dbo.Coupon.ID)
end 
```

# verilog - $display 每次 $monitor 在 Verilog 中工作

> ID：13507318
> 
> 赞同：5
> 
> 时间：2012-11-22T06:57:07.367
> 
> 标签：verilog

在 Verilog 测试台中，我有一个`$monitor`看起来像这样的语句：

```
initial begin  
$monitor("a=%h, b=%h",a,b)  
end 
```

这意味着`a`和`b`都在显示器的敏感度列表中。我真正想做的只是监视对 的更改`a`，以及何时`a`更改 display`b`的值。我不知道该怎么做。有没有简单的方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T11:02:06.117

我认为监视器不可能有这种行为，但你总是可以在`a`更改时显示：

```
always @(a) begin  
  $display("a=%h, b=%h",a,b);
end 
```

# opengl - OpenGL处理 多个对象

> ID：13507319
> 
> 赞同：6
> 
> 时间：2012-11-22T06:57:13.020
> 
> 标签：opengl, object, matrix, rendering, transformation

我在理解如何使用 OpenGL 处理/渲染多个对象时遇到了一点困难。我环顾四周，在谷歌和 OpenGL 红皮书中找到了答案，这些答案与我试图弄清楚的内容类似，但我需要看看我是否有正确的想法。

我的第一个想法是我应该分别处理带有 X、Y 和 Z 的平移和旋转变量的位置数据。将单个网格存储在该类的静态 VBO 中，然后对于我要渲染的每个实例执行 for-next 循环

*   加载标识
*   变换到特定对象的位置/旋转
*   使用 drawarrays 在该位置渲染网格
*   循环到下一个对象并为每个对象重复上述操作

为每个帧更新处理这样的转换是否会显着影响性能？

有人提到的另一种方法是将每个顶点的所有位置数据粘贴在单个 VBO 中，然后通过单个调用对其进行渲染。在这种方法中，我假设“创建”一个对象，我需要通过一个函数处理每个顶点的位置数据，该函数将获取其局部坐标（通过静态数组）并将该特定对象的位置数据添加到顶点，然后将其存储在 VBO 中？如果是这种情况，我将如何处理旋转？

我的第三个想法是在对象的每个实例中存储一个 4x4 矩阵来保存平移/旋转信息，然后当我去渲染时，我只需加载该对象的矩阵，从单个 VBO 绘制网格，然后加载下一个对象的矩阵，从同一个 VBO 中绘制，等等......

最后，我看到有些人建议为每个对象设置一个 VBO，并为每个实例调用 drawarray。这种方式对我来说似乎非常低效，并且让我想知道如果您为每个网格都调用它，那么拥有 VBO 的意义何在。似乎立即模式（我知道它已贬值）会更快，因为您没有为每个对象创建和绑定 VBO 的开销。

这些处理/渲染多个对象的任何/所有方法是否有效？如果是这样，每种方法的优缺点是什么？

最有意义的方法是每个网格有一个 VBO，然后在每次更新时转换它们，或者在每次更新时加载每个对象的矩阵并以这种方式渲染。我对 OpenGL 和图形渲染还很陌生，所以我试图完全理解处理渲染多个对象所需信息的最佳方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:20:38.030

> *   变换到特定对象的位置/旋转

这只是意味着您将 4x4 矩阵加载到统一变量。

> 为每个帧更新处理这样的转换是否会显着影响性能？

转换将在您的顶点着色器中执行，通过将上述矩阵乘以顶点坐标，并行处理许多顶点。

> 有人提到的另一种方法是将每个顶点的所有位置数据粘贴在单个 VBO 中，然后通过单个调用对其进行渲染。在这种方法中，我假设“创建”一个对象，我需要通过一个函数处理每个顶点的位置数据，该函数将获取其局部坐标（通过静态数组）并将该特定对象的位置数据添加到顶点，然后将其存储在 VBO 中？如果是这种情况，我将如何处理旋转？

这似乎不是一个好主意，因为您必须在每一帧上上传数据（或者至少在对象位置/方向发生变化时）。

第三种方法似乎与第一种相同，只是在 OGL3+ 术语中，而第一种似乎在 OGL 2.x 术语中:)

> 最后，我看到有些人建议为每个对象设置一个 VBO，并为每个实例调用 drawarray。

也许您误解了，他们的意思是 VAO，而不是 VBO？使用 VAO，您上传顶点属性（在 VBO 中），绑定 VAO，将每个 VBO 绑定到适当的属性位置，并且在开始时只执行一次。在每一帧上，您只需执行以下操作：

```
// Bind the VAO
glBindVertexArray(vao)

// Draw the object
glDrawArrays/glDrawArraysInstanced/etc.

// CLear VAO binding
glBindVertexArray(0) 
```

请注意，您仍然可以在同一个 VBO 中为许多不同的对象拥有顶点属性，记住`glDrawArrays`和其他人有一个参数，该参数决定从数组中的哪个位置开始绘制。

# iphone - iOS 带通滤波器

> ID：13507321
> 
> 赞同：2
> 
> 时间：2012-11-22T06:57:17.397
> 
> 标签：iphone, ios, audio, signal-processing, core-audio

我正在使用音频单元开发一个 iPhone 应用程序来执行带通滤波器。iOS 带通滤波器 API 需要两个参数：中心频率（以 Hz 为单位）和带宽（以美分为单位，范围从 100 到 12000）。但我不明白什么是仙？如何将美分转换为频率？

例如，如果我想执行一个滤波器以通过从 500 到 8000 的频率。我应该使用什么中心频率和带宽？

谢谢您的帮助。任何解释都会非常有帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:36:18.840

[音分](http://en.wikipedia.org/wiki/Cent_%28music%29)是音乐间隔的对数度量单位。[您可以在此处](http://www.sengpielaudio.com/calculator-centsratio.htm)找到从[美分](http://en.wikipedia.org/wiki/Cent_%28music%29)到频率比的转换器。如果您搜索***Audio Cents to Frequency*** ，谷歌上也有相当多的信息。希望有帮助！

# php - PHP 和 MySQL 查询不显示

> ID：13507330
> 
> 赞同：1
> 
> 时间：2012-11-22T06:58:10.827
> 
> 标签：php, mysql

我正在使用本教程[跟踪工具](http://www.solarisedesign.co.uk/a-simple-ip-address-and-php-visitor-tracking-tool-with-mysql/)，我得到了它的工作。我正在尝试对其进行修改以满足我的需求，以跟踪 Verizon Wirless（我的手机连接）以观察他们何时开始限制我的 ip 更改。我哥哥有 AT&T，所以我在我的数据库中添加了一个主机名字段，这样我们就可以区分我们的手机......但可以让它显示在 IP 旁边的报告页面中。当我单击视图以显示我访问过的页面时，我可以在其中显示它，但不能在主页上显示，如果有人能够指出它不显示的原因或我更改错误的原因，这是我的代码

> **只是提到注意到两个已删除的帖子...我不跟踪任何人但我自己,,, 我在 verizon 无线上有一个根深蒂固的迅雷,,, 一旦我在一天内达到 4 gig 数据 (仍然有无限计划) verizon喜欢从一个 IP 启动我，然后将我切换到另一个更慢的 IP，我试图找出我注意到哪些 IP 带宽更好，所以我可以循环无线电，直到它再次恢复正常**

**MySQL**

```
DROP TABLE IF EXISTS `testing_db`;
CREATE TABLE IF NOT EXISTS `testing_db` (
  `entry_id` INT(11) NOT NULL AUTO_INCREMENT,
  `visitor_id` INT(11) DEFAULT NULL,
  `ip_address` VARCHAR(15) NOT NULL,
  `hostname` VARCHAR(295) NOT NULL,
  `server_name` text,
  `useragent` text,
  `page_name` text,
  `query_string` text,
  `timestamp` TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY  (`entry_id`),
  KEY `visitor_id` (`visitor_id`,`timestamp`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1; 
```

**ip_tracker.php**

```
<?php
//define our "maximum idle period" to be 30 minutes

$mins = 1;

//set the time limit before a session expires
ini_set ("session.gc_maxlifetime", $mins * 60); 

session_start();

$ip_address = $_SERVER["REMOTE_ADDR"];
$page_name = $_SERVER["SCRIPT_NAME"];
$query_string = $_SERVER["QUERY_STRING"];
$hostname = gethostbyaddr($_SERVER['REMOTE_ADDR']);
$host_name = $hostname; //$_SERVER['HTTP_HOST'];
$server_name = $_SERVER['SERVER_NAME'];
$useragent=$_SERVER['HTTP_USER_AGENT'];

$current_page = $page_name."?".$query_string;

//connect to the database using your database settings
include("db_connect.php");

if(isset($_SESSION["tracking"])){

    //update the visitor log in the database, based on the current visitor    //id held in $_SESSION["visitor_id"]
    $visitor_id = isset($_SESSION["visitor_id"])?$_SESSION["visitor_id"]:0;

    if($_SESSION["current_page"] != $current_page){
        $sql = "INSERT INTO testing_db 
            (ip_address, page_name, query_string, visitor_id, hostname, host_name, server_name, useragent)
            VALUES ('$ip_address', '$page_name', '$query_string', '$visitor_id','$hostname','$host_name','$server_name','$useragent')";
        if(!mysql_query($sql)){
            echo "Failed to update visitor log";   
        }
        $_SESSION["current_page"] = $current_page;        
    }
    $_SESSION["tracking"] = false;
}else{
    //set a session variable so we know that this visitor is being tracked

    //insert a new row into the database for this person
    $sql = "INSERT INTO testing_db 
            (ip_address, page_name, query_string, visitor_id, hostname, host_name, server_name, useragent)
            VALUES ('$ip_address', '$page_name', '$query_string', '$visitor_id','$hostname','$host_name','$server_name','$useragent')";
    if(!mysql_query($sql)){
        echo "Failed to add new visitor into tracking log";
        $_SESSION["tracking"] = false;   
    } else {
        //find the next available visitor_id for the database
        //to assign to this person
        $_SESSION["tracking"] = true;
        $entry_id = mysql_insert_id();
        $lowest_sql = mysql_query("SELECT MAX(visitor_id) as next FROM testing_db");
        $lowest_row = mysql_fetch_array($lowest_sql);
        $lowest = $lowest_row["next"];
        if(!isset($lowest))
            $lowest = 1;
        else
            $lowest++;
        //update the visitor entry with the new visitor id
        //Note, that we do it in this way to prevent a "race condition"
        mysql_query("UPDATE testing_db SET visitor_id = '$lowest' WHERE entry_id = '$entry_id'");
        //place the current visitor_id into the session so we can use it on
        //subsequent visits to track this person
        $_SESSION["visitor_id"] = $lowest;
        //save the current page to session so we don't track if someone just refreshes the page
        $_SESSION["current_page"] = $current_page; 
```

**ip_report.php**

```
<?php
include("db_connect.php");
//retrieve the appropriate visitor data
$view = $_GET["view"];
//set a default value for $view
if($view!="all" && $view!="record")
  $view = "all";
if($view == "all")
{
    //show all recent visitors
    $sql = "SELECT visitor_id, GROUP_CONCAT(DISTINCT ip_address) as ip_address_list,
COUNT(DISTINCT ip_address) as ip_total, COUNT(visitor_id) as page_count,
MIN(timestamp) as start_time, MAX(timestamp) as end_time FROM testing_db GROUP BY visitor_id";
    $result = mysql_query($sql);
    if($result==false){
        $view = "error";
        $error = "Could not retrieve values";
    }
} else {
    //show pages for a specific visitor
    $visitor_id = $_GET['id'];
    //rung $visitor_id through filter_var to check it's not an invalid
    //value, or a hack attempt
    if(!filter_var($visitor_id, FILTER_VALIDATE_INT, 0)){
        $error = "Invalid ID specified";
        $view = "error";
    } else {
        $sql = "SELECT timestamp, page_name, query_string, ip_address, hostname, host_name, server_name, useragent FROM
testing_db WHERE visitor_id = '$visitor_id'";
        $result = mysql_query($sql);
    }
}
function display_date($time){
    return date("F j, Y, g:i a", $time);
}

?>
<html>
<head>
<title>IP Tracker Report Page</title>
<style>
html {font-family:tahoma,verdana,arial,sans serif;}
body {font-size:62.5%;}
table tr th{
font-size:0.8em;
background-color:#ddb;
padding:0.2em 0.6em 0.2em 0.6em;
}
table tr td{
font-size:0.8em;
background-color:#eec;
margin:0.3em;
padding:0.3em;
}
</style>
</head>
<body>
<h1>IP Tracker Report</h1>
<?php if($view=="all") {
    //display all of the results grouped by visitor
    if($row = mysql_fetch_array($result)){
    ?>
<table>
<tbody>
<tr>
<th>Id</th>
<th>IP Address(es)</th>
<th>Host Name</th>
<th>Entry Time</th>
<th>Duration</th>
<th>Pages visited</th>
<th>Actions</th>
</tr>
<?php
      do{
        if($row["ip_total"] > 1)
            $ip_list = "Multiple addresses";
        else
            $ip_list = $row["ip_address_list"];
        $start_time = strtotime($row["start_time"]);
        $end_time = strtotime($row["end_time"]);
        $start = display_date($start_time);
        $end = display_date($end_time);
        $duration = $end_time - $start_time;
        if($duration >= 60) {
            $duration = number_format($duration/60, 1)." minutes";
        }
        else {
            $duration = $duration." seconds";
        }
        $host - $row["hostname"];
        echo "<tr>";
        echo "<td>{$row["visitor_id"]}</td>";
        echo "<td>$ip_list</td>";
        echo "<td>$host</td>";
        echo "<td>$start</td>";
        echo "<td>$duration</td>";
        echo "<td>{$row["page_count"]}</td>";
        echo "<td><a href='ip_report.php?view=record&id={$row["visitor_id"]}'>view</a></td>";
        echo "</tr>";
      } while ($row = mysql_fetch_array($result));
    ?>

</tbody>
</table>
<?php } else { ?>
<h3>No records in the table yet</h3>
<?php } ?>
<?php } elseif($view=="record"){ ?>
<h3>Showing records for Visitor <?php echo $visitor_id; ?></h3>
<p><a href="ip_report.php">back</a></p>
<?php
    //show all pages for a single visitor
    if($row = mysql_fetch_array($result)){
    ?>
<table>
<tbody>
<tr>
<th>Page viewed</th>
<th>User Agent</th>
<th>Time of view</th>
</tr>
<?php
      do{
        if($row["ip_total"] > 1)
            $ip_list = "More than 1";
        else
            $ip_list = $row["ip_address_list"];
        $time = display_date(strtotime($row["timestamp"]));
        echo "<tr>";
        echo "<td>{$row["page_name"]}</td>";
        echo "<td>{$row["hostname"]}</td>";
        echo "<td>$time</td>";
        echo "</tr>";
      } while ($row = mysql_fetch_array($result));
    ?>
</tbody>
</table>
<?php } else { ?>
<h3>No records for this visitor</h3>
<?php
    }
} elseif($view=="error") { ?>
<h3>There was an error</h3>
<?php echo $error;
}
?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:16:07.673

将最后一行添加到您的报告脚本中：

```
 do{
    if($row["ip_total"] > 1)
        $ip_list = "Multiple addresses";
    else
        $ip_list = $row["ip_address_list"];

        // Add the following line here
        $host = $row["hostname"]; 
```

# vb.net - SerialPort.DataReceived 和文件输出

> ID：13507332
> 
> 赞同：1
> 
> 时间：2012-11-22T06:58:19.123
> 
> 标签：vb.net, multithreading

我正在创建一个 vb.net windows 应用程序来做很多事情，包括从 EEProm 下载一堆数据，然后将其保存到文件中。我正在使用 DataReceived 例程来捕获传入的数据，然后尝试将每 16 个字节写入一个二进制文件。我可以正常写入文件，但是我似乎遇到了我不太熟悉的交叉线程等问题。进度条工作正常，所以我现在需要做的就是将 16 个字节写入文件。

```
Private Sub btnTestCom_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnTestCom.Click

    Dim BaseFolder As String = "c:\"
    CurrentFileName = BaseFolder + "byteArray1.dat"
    Dim fStream As New FileStream(CurrentFileName, FileMode.Truncate, FileAccess.Write, FileShare.ReadWrite)
    fStream.Close()

    uart_operation = 2
    DayNum = 0

    If mySerialPort.IsOpen() Then mySerialPort.Close()

    mySerialPort.BaudRate = 256000
    mySerialPort.Parity = Parity.None
    mySerialPort.StopBits = StopBits.One
    mySerialPort.DataBits = 8
    mySerialPort.Handshake = Handshake.None
    mySerialPort.Open()

    AddHandler mySerialPort.DataReceived, AddressOf mySerialPort_DataReceived

    'This is my start byte to the microprocessor
    Dim b() As Byte = New Byte() {254}
    mySerialPort.Write(b, 0, b.Length)
    mySerialPort.BaseStream.Flush()

End Sub

Private Delegate Sub UpdateProgressBar1(ByVal value As Integer)

Public Sub SetProgress(ByVal paramvalue As Integer)
    If Me.InvokeRequired Then
        Me.Invoke(New UpdateProgressBar1(AddressOf Me.SetProgress), paramvalue)
    Else
        Me.ProgressBar1.Value = paramvalue
    End If

End Sub

Private Sub mySerialPort_DataReceived(ByVal sender As Object, ByVal e As SerialDataReceivedEventArgs)

    Dim tmpbyte As Byte
    fStream = New FileStream(CurrentFileName, FileMode.Append, FileAccess.Write, FileShare.ReadWrite)
    Dim bw As New BinaryWriter(fStream)

    'Try

    While mySerialPort.BytesToRead > 0
        Dim msgCharArray(255) As Char
        If mySerialPort.BytesToRead >= 256 Then
            mySerialPort.Read(msgCharArray, 0, 256)
        Else
            'mySerialPort.Read(msgCharArray, 0, mySerialPort.BytesToRead)
            Select Case uart_operation
                Case 2
                    If mySerialPort.ReadByte() = &HFF Then
                        uart_operation = 22
                    End If
                Case 22
                    tmpbyte = mySerialPort.ReadByte()
                    bytearray(bytecount) = tmpbyte
                    bytecount += 1

                    If bytecount = 16 Then
                        bw.Write(bytearray)
                        bytecount = 0
                        DayNum += 1
                        Dim b() As Byte = New Byte() {255}
                        mySerialPort.Write(b, 0, b.Length)
                        mySerialPort.BaseStream.Flush()

                        If DayNum = 366 Then
                            Me.SetProgress(DayNum)
                            MsgBox("Done")
                            Me.SetProgress(0)

                            bw.Close()
                            fStream.Close()
                            bw = Nothing
                            fStream = Nothing

                        Else
                            Me.SetProgress(DayNum)
                        End If

                    End If

            End Select

        End If
    End While
    'Catch ex As Exception
    '   MessageBox.Show("Exception Occured: " + ex.Message)
    'End Try
End Sub 
```

结束类

# java - Azure Android Java 客户端

> ID：13507333
> 
> 赞同：2
> 
> 时间：2012-11-22T06:58:31.840
> 
> 标签：java, android, azure, jaxb

我正在编写一个利用 Microsoft Azure 云的**Android 应用程序**

*   页 blob（Blob 服务）
*   关系数据库表 (SQL Azure)
*   队列

一切看起来都很棒，但是我遇到了一个看起来很坚固的技术砖墙，这可能会阻止我们使用 AZURE；即，Microsoft Java Azure SDK 使用 JAXB。

1.  Android 不提供 JAXB（如果您想捆绑它，它会非常大）
2.  Dalvik VM 无法在 JAXB 中执行反射调用
3.  由于 JAXB 使用 javax 包结构，因此无法编译为 dex，使用 --core-library 几乎可以肯定会进一步保证失败。

其他 Azure Java SDK maven 依赖项也在受保护的 javax 包结构中定义类：

*   javax.xml.bind jaxb-api
*   javax.inject javax.inject
*   com.sun.jersey jersey-core
*   stax stax-api
*   javax.activation 激活
*   javax.mail 邮件

在我看来，这实际上阻止了使用 Azure 服务来支持 Android 应用程序（对我而言），因为编写我自己的 Android 友好 API 来询问 Azure 超出了该项目的范围。

有没有人通过其他机制在 Android 上使用 Azure 服务的经验？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-23T00:04:32.600

我建议将大部分 azure 特定功能隐藏在托管在 Azure WebRole 上的 RESTful Web 服务（使用 WCF）之后。[这](http://debugmode.net/2012/02/28/how-to-create-wcf-rest-service-and-host-in-windows-azure/)是一个教程，介绍了如何设置 Azure 以提供基本的 RESTful Web 服务。然后，您的 Android 客户端可以使用 HTTP/JSON/XML 以符合标准的方式与 Azure 进行通信。

您的目标是让 Web 服务与后端 Azure 组件通信，而不是 Android 客户端直接与它们通信，例如：

Android -> Azure RESTful WebRole -> Blob、SQL DB、队列、工作角色

尽管在某些情况下您可能希望您的 Android 客户端直接与 Blob 存储进行通信（通过 Blob REST 接口）

Android -> Blob
&
Android -> Azure RESTful WebRole -> Blob、SQL DB、队列、工作角色

如果 WebRole 太贵，您可以用[本教程](http://www.windowsazure.com/en-us/develop/net/tutorials/rest-service-using-web-api/)中介绍的更便宜的 RESTful Azure 网站替换它。

与您直接与后端 Azure 组件通信的预期方法需要考虑的其他事项是，您的 Android 客户端将需要存储您的 Azure 帐户密钥，这与将您的帐户密码交给使用您的 Android 客户端的人基本相同......即一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:14:14.137

1) 微软不使用 JAXB。Java 服务器和客户端使用 JAXB 来使用 SOAP Web 服务。

一种替代方法是尝试不同的 SOAP 库。例如：

*   [http://code.google.com/p/ksoap2-android/](http://code.google.com/p/ksoap2-android/)

*   [http://code.google.com/p/icesoap/](http://code.google.com/p/icesoap/)

*   [如何在 Android 上调用 SOAP Web 服务](https://stackoverflow.com/questions/297586/how-to-call-soap-web-service-in-android)

2) 另一种可能更好的方法可能是使用 REST 而不是 SOAP 调用 Azure：

*   [http://msdn.microsoft.com/en-us/library/windowsazure/ff800682.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ff800682.aspx)

*   [http://msdn.microsoft.com/en-us/library/windowsazure/dd135733.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd135733.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T00:55:27.293

目前，Windows Azure SDK for Java 不支持 Android。但由于它是开源的，如果你愿意，你几乎可以自己做。源代码位于

[https://github.com/WindowsAzure/azure-sdk-for-java](https://github.com/WindowsAzure/azure-sdk-for-java)

# html - 内阴影和交替的单元格颜色

> ID：13507334
> 
> 赞同：0
> 
> 时间：2012-11-22T06:58:40.200
> 
> 标签：html, css

这是我的目标

![在此处输入图像描述](../Images/1de849029b093bde735fe25644bb3450.png)

如何使用 html/css 和以下代码基础来完成此操作？

```
 <div class="classname">                      
    <table>                              
      <tbody>                                      
        <tr>                            <td></td>                           <td></td>                                      
        </tr>                                      
        <tr>                            <td></td>                           <td>                  
            </td>                                      
        </tr>                                      
        <tr>                            <td></td>                           <td></td>                                      
        </tr>                                      
        <tr>                            <td></td>                           <td></td>                                      
        </tr>                                      
        <tr>                            <td></td>                           <td></td>                                      
        </tr>                                      
        <tr>                            <td></td>                           <td></td>                                      
        </tr>                                      
        <tr>                            <td></td>                           <td>                             
      </tbody>                         
    </table>                                                                                                                             
  </div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T07:06:01.030

**CSS**

```
 tr:nth-child(even) td:last-child{
    background-color:#ccc;
    width:80%
}
table{
 -moz-box-shadow:
        inset 5px 0 5px -2px #ccc,
        inset -5px 0 5px -2px #ccc;
    -webkit-box-shadow:
        inset 5px 0 5px -2px #ccc,
        inset -5px 0 5px -2px #ccc;
    box-shadow:
        inset 5px 0 5px -2px #ccc,
        inset -5px 0 5px -2px #ccc;
}
td{
    border-bottom:#ccc solid 1px;
    border-right:#ccc solid 1px;
    height:30px
}
​ 
```

**[演示](http://jsfiddle.net/K7WvP/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:38:49.103

![在此处输入图像描述](../Images/3d1dca87cf95025d6619f21d518037eb.png)**css**

在表格单元格上设置背景颜色。

```
table {

    border:1px solid #000;
    box-shadow: 7px 0px 7px -5px #777 inset,-7px 0px 7px -5px #777 inset;

}

table tr td {

    background:#fff;
    z-index:-1;
    position:relative;

} 
```

**html**

```
<table border="0" cellpadding="10" cellspacing="0">
  <tr>
    <td>Day</td>
    <td>Month</td>
    <td>Year</td>

  </tr>
  <tr>
    <td>$100</td>
    <td>$1000</td>
    <td>$1000</td>
  </tr>
</table> 
```

# iphone - iPhone 应用程序因 NSCFType setImage:forState 崩溃

> ID：13507337
> 
> 赞同：0
> 
> 时间：2012-11-22T06:59:02.040
> 
> 标签：iphone, crash

我有一个应用程序，我从相机捕获图像并将其设置为按钮。

因此，在从相机捕获图像并点击使用按钮后，我的应用程序因 [NSCFType setImage:forstate] 无法识别的实例而崩溃

```
 - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
   [picker dismissModalViewControllerAnimated:YES];

   UIImage *image = [info objectForKey:UIImagePickerControllerOriginalImage];
    UIImage *resizeImage = [image imageWithImage:image scaledToSize:CGSizeMake(320, 480)];    

   //convert the selected image to NSData
   toShowFullImage = UIImageJPEGRepresentation(resizeImage, 0.8);

    //retain it for further use 
    [toShowFullImage retain];

    //set the selected image to button

    UIImage *newimage=[image imageScaleAndCropToMaxSize:CGSizeMake(75, 75)];

    [button setImage:newimage forState:UIControlStateNormal];
} 
```

此崩溃发生在 iOS 6.0.1 中，出现 Abort trap 6 错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:28:34.123

我认为问题在于当您设置按钮的背景图像时，它已经发布。

**此问题的可能方式：**

1.  当您将按钮添加到视图时，您调用了`[button release];`
2.  您使用工厂方法创建了按钮，例如`buttonWithType:`

**可能的解决方案：**

1.  设置为查看后不要调用release。
2.  如果您使用创建按钮，只需保留按钮`buttonWithType:`
3.  使用标签设置图像。

添加按钮时，请设置如下标签：

```
button.tag = 7;
[self.view addSubview:button]; 
```

并将图像设置为：

```
 [[self.view viewWithTag:7] setImage:newimage forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:20:46.700

只需检查您是否分配了按钮，并在将图像设置在您释放此按钮的任何位置之前，还是否提供了插座参考，然后发生此类错误，因此请检查此流程伙伴..并查看此代码可能也很容易给你用。。

而不是 newimage.. 直接将图像设置为按钮的背景，例如..

```
[button setBackgroundImage:image forState:UIControlStateNormal]; 
```

# python - 在 matplotlib 上绘制定性数据

> ID：13507341
> 
> 赞同：0
> 
> 时间：2012-11-22T06:59:12.057
> 
> 标签：python, numpy, matplotlib

我有三个相同长度的一维数组。这些是：

1.  温度 (F)
2.  风速
3.  风向

温度和风速都有浮点值，而风向有字符串值，如“南”、“北”、“东北”、“西”等。现在，我想用这些数组创建一个 3D 散点图。什么是可能的方式（因为风向数组有字符串值）？可以将一些逻辑应用于这种情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T09:08:28.547

您可以定义一个字典角度来定义 x 轴（东方向）和风向之间的角度，例如：

```
angles = {'East': 0., 'North': math.pi/2., 'West': math.pi, 'South': 3.*math.pi/2.} 
```

然后您可以计算 x（东）和 y（北）方向的速度，如下例所示：

```
import math

angles = {'East': 0., 'North': math.pi/2., 'West': math.pi, 'South': 3.*math.pi/2.}

directions = ['East', 'North', 'West', 'South']
vtot = [1.5, 2., 0.5, 3.]
Temperature = [230., 250\. , 200., 198.] # K

vx = [vtot[i]*math.cos(angles[directions[i]]) for i in range(len(directions))] # velocity in x-direction (East)
vy = [vtot[i]*math.sin(angles[directions[i]]) for i in range(len(directions))] # velocity in y-direction (North)

print (vx)
print (vy) 
```

然后您可以在 matplotlib 的任何 3D 图中绘制`vx`、`vy`和`Temperature`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:09:03.840

像@pwagner 一样，我会选择极地情节，但会选择 3D 情节。基本上你可以做的是将你的风重新映射到极坐标，如下例所示：

```
angles = {'east':0, 'northeast':np.pi/4, 'north':np.pi/2, 'northwest':3*np.pi/4,
          'west':np.pi, 'southwest':5*np.pi/4, 'south':3*np.pi/2, 'southeast':7*np.pi/4}
wind_angle = np.array([angles[i] for i in wind]) 
```

这将为您提供风向；然后您可以将（风，速度）坐标转换为笛卡尔坐标并通过 3D 散点图绘制。您甚至可以在颜色图中对温度进行编码，完整示例如下所示：

```
import numpy as np
from matplotlib import cm
from matplotlib import pyplot as plt

fig = plt.figure()
ax = fig.add_subplot(111, projection='3d')

wind_dirs = ['east', 'northeast', 'north', 'northwest',
             'west', 'southwest', 'south', 'southeast']
# data
speed = np.random.uniform(0,1.25,100)
temp = np.random.uniform(-10,20,100)
wind = [wind_dirs[i] for i in np.random.randint(8, size=100)]

#transform data to cartesian
angles = {'east':0, 'northeast':np.pi/4, 'north':np.pi/2, 'northwest':3*np.pi/4,
          'west':np.pi, 'southwest':5*np.pi/4, 'south':3*np.pi/2, 'southeast':7*np.pi/4}
wind_angle = np.array([angles[i] for i in wind])
X,Y = speed*np.cos(wind_angle),speed*np.sin(wind_angle)

ax.scatter3D(X, Y, temp, c = temp, cmap=cm.bwr)
ax.set_zlabel('Temp')
plt.show() 
```

这会产生一个可以旋转和缩放的漂亮图形：

![在此处输入图像描述](../Images/b597c866b14fb9e54886f4c4a1d7caa4.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:34:53.870

当我阅读这个问题时，我必须想到一个极坐标图（自然是风向）和编码为颜色的温度。快速搜索了一个现有的[matplotlib 示例](http://matplotlib.org/examples/pylab_examples/polar_scatter.html)。重写示例它可能如下所示：

```
import numpy as np
import matplotlib.pyplot as plt
from matplotlib import cm

N = 150
r = 2.0 * np.random.randn(N)
theta = 2.0 * np.pi * np.random.randn(N)
area = 10.0 * r**2.0 * np.random.randn(N)
colors = theta
ax = plt.subplot(111, polar=True)
c = plt.scatter(theta, r, c=colors, cmap=cm.hsv)
c.set_alpha(0.75)

ticklocs = ax.xaxis.get_ticklocs()
ax.xaxis.set_ticklabels([chr(number + 65) for number in range(len(ticklocs))])

plt.show() 
```

我希望您可以根据您的需要进一步采用该示例。

# python - 如何返回列表中的最大出现字符？由蟒蛇。X = ['(a,20)','(b,30)','(c,15)','(d,45)']

> ID：13507345
> 
> 赞同：0
> 
> 时间：2012-11-22T06:59:25.443
> 
> 标签：python, list, max

在列表中`X = ['(a,20)','(b,30)','(c,15)','(d,45)']` 在列表 X 中，a 出现了 20 次，b 出现了 30 次，c 出现了 15 次，d 出现了 45 次如何将出现次数最多的字符返回为 d ？你能告诉我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:01:14.877

```
In [295]: L
Out[295]: [('a', 20), ('b', 30), ('c', 15), ('d', 45)]

In [296]: max(L, key=operator.itemgetter(1))
Out[296]: ('d', 45) 
```

如果您的数据确实是列表中的字符串化元组：

```
In [300]: L = ['(a,20)','(b,30)','(c,15)','(d,45)']

In [301]: max(L, key=lambda s: int(s.rstrip(")").split(',')[1]))
Out[301]: '(d,45)' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T07:04:25.950

您还可以使用 lambda 函数：

```
max(L, key=lambda x: x[1]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T10:36:09.063

```
 python 3.2
      from itertools import Counter

      lis=['(a,20)','(b,30)','(c,15)','(d,45)','(d,45)','(d,45)','(d,45)']
      mx=Counter(lis)
      mx.most_common()[0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T08:48:55.253

您可以使用以下功能。

```
import sys
sys.stdin = open('in.txt', 'r')

def max_occurrence_element(p):
    cnt = {}
    for item in p:
        cnt.setdefault(item, 0)
        cnt[item] += 1
    return max(cnt.items(), key = lambda x: x[1])[0]

print max_occurrence_element(map(int, raw_input().split())) 
```

# android - android中的滑动抽屉布局

> ID：13507348
> 
> 赞同：1
> 
> 时间：2012-11-22T06:59:37.050
> 
> 标签：android, android-layout

我的应用程序中有一个滑块，在单击按钮时从左向右滑动。抽屉的 xml 代码是：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/pic4" >

<com.facebook.android.LoginButton
    android:id="@+id/login"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_margin="30dp"
    android:src="@drawable/login_button"
     />

<TextView
    android:id="@+id/txt"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:text="@string/hello"
    android:textColor="@drawable/black" />

        <com.facebook.android.TransparentPanel
            android:id="@+id/popup_window"
            android:layout_width="250dp"
            android:layout_height="485dp"
            android:layout_alignParentLeft="false"
            android:background="@drawable/black"
            android:gravity="left"
            android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/content"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:showDividers="middle" >

        <ListView
            android:id="@+id/listView1"
            android:layout_width="fill_parent"
            android:layout_height="378dp" >
        </ListView>

    </LinearLayout>

</com.facebook.android.TransparentPanel>
<Button
    android:id="@+id/show_popup_button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/nextnew" /> 
```

图形布局完美地显示了滑块，但唯一的问题是抽屉也显示了一条白线作为边框。我希望它消失或变成黑色。任何提示将不胜感激。谢谢

# jfreechart - 带有次要网格线的 JFreechart

> ID：13507350
> 
> 赞同：0
> 
> 时间：2012-11-22T06:59:41.683
> 
> 标签：jfreechart, gridlines

我已经为动态 jfreechart 生成了一个代码，并且我希望该图表具有主要网格线和次要网格线。

jfreechart有可能发生这种情况吗？

提前致谢！！！

编辑：

不幸的是，我不使用 XYplot，但我使用 TimeSeries Chart，如下所示：

```
JFreeChart chart = ChartFactory.createTimeSeriesChart(
                       "Measurement",
                       "Date",
                       "Measurement",
                       dataset,
                       true,
                       true,
                       false); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T09:47:56.467

如果您使用的是 XYPlot，您可以使用以下方法打开次要网格线：

*   `XYPLot#setDomainMinorGridlinesVisible()`

*   `XYPLot#setRangeMinorGridlinesVisible()`

以及控制颜色和线条样式，[文档中的完整详细信息](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/plot/XYPlot.html)

您正在使用 XYPLot，如果您查看源代码，`ChartFactory#createTimeSeriesChart()`您会看到第 6 行是：

```
XYPlot plot = new XYPlot(dataset, timeAxis, valueAxis, null); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T07:20:29.527

这是我使用的代码：

```
 TimeSeries ts= new TimeSeries("Metrisi", Day.class);
     ts.add(new Day(day1, month1, year1), 100);
     ts.add(new Day(day2, month2, year2), 150);
     ts.add(new Day(day3, month3, year3), 250);
     ts.add(new Day(day4, month4, year4), 275);

     TimeSeriesCollection dataset = new TimeSeriesCollection();
 dataset.addSeries(ts);
 JFreeChart chart = ChartFactory.createTimeSeriesChart(
 "Measurement",
 "Date",
 "Measurement",
 dataset,
 true,
 true,
 false); 
```

结果，当我创建 TimeSeriesChart 时，我无法创建主要网格线和次要网格线？

# joomla - 登录后如何重定向到joomla1.5中的当前页面

> ID：13507351
> 
> 赞同：1
> 
> 时间：2012-11-22T06:59:49.153
> 
> 标签：joomla, joomla1.5

我在 joomla 1.5 站点工作。登录时，我想重定向到当前页面。无需转到索引页面。我正在使用redirecttofirstlogin 插件重定向到所需的页面。它完美地工作。但我想将当前页面 url 传递给该链接。如何获取当前的 url。

这将返回错误的 url: `JURI::getInstance()->toString()`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:44:56.400

您可以使用以下行在 Joomla 中获取当前 URL

```
$current_url = JURI::getInstance(); 
```

之后，您必须`$current_url`根据您的功能将变量传递给所需的链接。

* * *

对于连接 URL，您已使用此语法，

```
$base_url = JURI::BASE(); 
```

对于连接：

`$full_url = $base_url."index.php?option=com_properties&view=property&id=19&Itemid=54";`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:49:36.580

试试`JURI::current()`它会给你当前的网址。

joomla 1.5 更新：-

```
$u =& JURI::getInstance( );
echo 'URI is ' . $u->toString(); 
```

有关更多信息，您可以在此处查看 - [http://docs.joomla.org/JURI](http://docs.joomla.org/JURI)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T13:34:55.123

如果您只是想在登录后重定向到当前页面，那么无需任何代码即可完成。

在 Joomla 后端，转到模块管理器并打开登录模块。有一个参数叫做**“登录重定向页面”**，你只需将它设置为**“选择项目”**，所以它基本上是未选中的。

我刚刚自己测试过它并且它有效

# jquery - 我的 jQuery 动画不工作

> ID：13507352
> 
> 赞同：-1
> 
> 时间：2012-11-22T06:59:58.470
> 
> 标签：jquery, facebook, html

我有一个 div 位于屏幕的一部分，当你点击一个按钮时它应该移出。我在这里发布了我的脚本[http://jsfiddle.net/53bSe/](http://jsfiddle.net/53bSe/)当我按下按钮时它似乎不起作用。在 jsfiddle 中，它没有正确显示。它应该看起来像这样[http://i.imgur.com/8DBzz.jpg](http://i.imgur.com/8DBzz.jpg)然后当按下灰色按钮时右边的东西应该动画出来。

我的 HTML

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<link type="text/css" rel="stylesheet" href="style.css">
<title>Facebook and Twitter Sliding Like and Follow</title>
</head>

<body>
<script>
$('#test').click(function() {
  $('.facebook-sw').animate({
    left: '+=300'
  }, 5000, function() {
    // Animation complete.
  });
});
</script>
    <div class="wrapper">
        <p id="test"></p>
        <div class="facebook-sw">
            <img class="fb-icon" src="image/fb-icon.PNG" width="110" height="113" alt="">
            <img class="fb-like-box" src="image/example.JPG" height="544" width="292" alt="">
        </div>
    </div>
</body>
</html> 
```

我的 CSS

```
@charset "utf-8";
/* CSS Document */
* {
    margin:0;
    padding:0;
}

body {
    background-color:#636363;
}

.facebook-sw {
    margin-top:120px;
    float:right;
    margin-right:-300px;
}

.fb-icon {
    float:left;
    margin-right:14px;
}

.fb-like-box {
    float:left;
}

#test {
    float:left;
    width:100px;
    height:50px;
    background-color:#CCC;
    margin-top:100px;
    margin-left:50px;
    display:block;
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:10:03.750

```
.facebook-sw {
position: relative
}

.wrapper {
overflow: hidden;
} 
```

演示 - [http://jsfiddle.net/53bSe/1/](http://jsfiddle.net/53bSe/1/)

# javascript - Javascript 正则表达式用分号替换所有其他逗号

> ID：13507354
> 
> 赞同：2
> 
> 时间：2012-11-22T07:00:02.680
> 
> 标签：javascript, regex, replace

我有一串像`5:11,14:00,17:11,22:00`.

我需要用分号替换所有其他逗号以获得`5:11,14:00;17:11,22:00`​​ .

正则表达式是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T07:03:28.133

这应该这样做：

```
var times = '5:11,14:00,17:11,22:00';
times.replace(/(,[^,]*),/g, '$1;'); 
```

# git - git 是否允许删除在参考存储库中找到的对象？

> ID：13507355
> 
> 赞同：1
> 
> 时间：2012-11-22T07:00:05.740
> 
> 标签：git

我使用 . 创建缓存 git 存储库`git clone --mirror ...`，然后通过 cron 定期更新它，例如`git remote update -p`. 根据需要，我还创建了一些本地存储库`git clone --reference <local repo> ...`并与之合作——拉取、提交和推送。

如何从我的存储库中删除缓存存储库中出现的 git 对象？- 远程仓库非常大，我不想浪费我的空间。

# java - 将 JSONObject/JSONArray 从 AsyncTask 传递到 UI 线程

> ID：13507357
> 
> 赞同：1
> 
> 时间：2012-11-22T07:00:11.057
> 
> 标签：java, android, json

我见过人们从 onProgressUpdate()/onPostExecute() 方法向 UI 线程发布 Toast 或类似的东西，但我想做一些可以将 JSONObject 或 JSONArray 传递回 UI 线程的事情。

在我的 AsyncTask 中，我调用了一个 Web 服务，它返回一个 JSONObject 或 JSONArray，我想将其显示在 UI 线程的页面片段中。

有谁知道我怎么能做到这一点，或者可以指出我可以向我展示的教程？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:06:30.123

如果您查看[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)文档，您会发现您实际上可以将几乎所有内容传递给`onPostExecute`and `onProgressUpdate`：

```
private class JsonAsyncTask extends AsyncTask<URL, String, JSONObject> {

    protected JSONObject doInBackground(URL... urls) {
         // usrls to connect to server
         publishProgress(/* some string you got, for example */
         // ...
         return /* a json object you created from data received */;
     }

     protected void onProgressUpdate(String ... progress) {
         // parse the string and display it
     }

     protected void onPostExecute(JSONObject result) {
         // display results from the JSONObject
     }
 } 
```

下面的示例可以更改为任何其他参数，其中泛型类型的排序如下：

1.  第一个是接收的类型`doInBackground`。
2.  第二个是传递给`publishProgress`和接收的类型`onProgressUpdate`。
3.  第三个是 from`doInBackground`和接收的返回类型`onPostExecute`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:07:19.253

您可以将侦听器传递给您的异步任务并调用它 onPostExecute

```
public interface MyListener {
  public abstract void onResult(Object json);
}

MyTask mt = new MyTask(new MyListener() {
  public void onResult(Object json) {
    //catch your object here
  }
});
mt.execute();

class MyTask extends AsyncTask<Void, Void, Object> {

  private MyListener listener;

  public MyTask(MyListener listener) {
    this.listener = listener;
  }

  protected void onPostExecute(Object result) {
    if (listener != null) {
      listener.onResult(result);
    }
  }

  protected void doInBackground(Void... params) {
    Object result = new Object();
    //your task
    return result;
  }

} 
```

# android - 适用于 Windows 的 ADT 捆绑包安装指南

> ID：13507359
> 
> 赞同：1
> 
> 时间：2012-11-22T07:00:26.317
> 
> 标签：android, eclipse

最近，有一个新的 android SDK-“Windows 的 ADT 包”，其中包括除 jdk 之外的所有内容。这就是为什么当我运行 eclipse 时，它​​说 - “JRE / JDK 必须可用于运行 eclipse，在 ...[我的解压缩文件夹位置] 中找不到 JRE/JDK”我尝试在 eclipse 中添加以下（在开头）行.ini，但无济于事。

> --vm C:\Program Files\Java\jdk1.7.0_06

我应该怎么做才能运行 Eclipse 包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:08:12.073

它应该是：-vm "C:\Program Files\Java\jdk1.7.0_06\bin\javaw.exe"

PS：JDK home 最好没有空格，比如在“程序文件”中！

参考这个[链接](http://wiki.eclipse.org/Eclipse.ini "设置")

# variables - 如何阿拉伯语变量

> ID：13507361
> 
> 赞同：1
> 
> 时间：2012-11-22T07:00:36.907
> 
> 标签：variables

> **可能重复：**
> [如何在 Android 中支持阿拉伯语文本？](https://stackoverflow.com/questions/7962704/how-to-support-arabic-text-in-android)

我想在我的项目中使用阿拉伯语单词，我使用了一个类，我的问题就解决了。
我用过`setTypeFace`，但现在我想用阿拉伯语显示敬酒信息。

我的消息在一个变量中，我无法转换它。如何为变量选择字体并以阿拉伯语显示 toast 消息？

# java - 如何覆盖 Netbeans 向导工具栏保存按钮功能？

> ID：13507362
> 
> 赞同：0
> 
> 时间：2012-11-22T07:00:37.037
> 
> 标签：java, swing, netbeans

我有一个在 Netbeans 7.0 中开发的应用程序，其中应用程序的工具栏上有一个保存按钮（我认为它是由 Netbeans 提供的）和一个第二个自定义保存按钮。

在使用自定义保存按钮保存时，我必须检查是否所有字段都已填写。如果不是，它会引发错误。但是如果用户单击顶部的保存按钮（工具栏），此验证将不起作用。

如何覆盖 Netbeans 向导模块工具栏中的保存按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:36:26.393

这个问题的答案可以在这里找到：

[https://blogs.oracle.com/geertjan/entry/bye_savecookie_hello_org_netbeans](https://blogs.oracle.com/geertjan/entry/bye_savecookie_hello_org_netbeans)

# matlab - 在 MATLAB 中播放录制的语音

> ID：13507364
> 
> 赞同：0
> 
> 时间：2012-11-22T07:00:42.773
> 
> 标签：matlab, playback

我正在尝试录制语音，然后从用户提供的时间索引播放。问题是这段代码没有播放录制的声音并给出“无效的播放选择”错误。我究竟做错了什么？这是代码：

```
function musiceditor(UserPassedTimeIndex)

Fs=44110;

y = wavrecord(5*Fs,Fs,'int16');

wavwrite(y,'Alfred.wav');

[Magnitude,SampleRate,x]=wavread('Alfred.wav');

AudioPlayer=audioplayer(Magnitude,SampleRate,x);

TotalPlayTime= length(Magnitude)/SampleRate;

Index= round((UserPassedTimeIndex/TotalPlayTime)*length(Magnitude));

play(AudioPlayer,Index); 
```

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:41:29.870

从方程

```
(UserPassedTimeIndex/TotalPlayTime)*length(Magnitude), 
```

UserPassedTimeIndex 必须以秒为单位，并且小于音频的总录制时间（否则会出错）。

根据 TotalPlayTime 的定义，这个等式简单地等价于

```
UserPassedTimeIndex * SampleRate 
```

请注意，这将以秒为单位的时间转换为以样本为单位的时间。因为 MATLAB 的索引是从 1 开始的，所以您还需要添加 1 来获取给定开始时间的样本*索引*。

# java - 验证 Java 平台独立性

> ID：13507371
> 
> 赞同：4
> 
> 时间：2012-11-22T07:01:20.997
> 
> 标签：java

我创建了一个在 Windows 上运行的 jar。在这个 jar 中，我与 Cognos 系统集成，我们正在使用 Oracle 数据库进行一些文件写入和一些数据库操作。

我的任务是检查 jar 是否可以在 Linux 系统上运行。

有没有办法检查 Jar 文件是否独立于平台？

我觉得文件写入和数据库操作应该像现在一样运行。但是我仍然不确定Fie。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:11:15.463

> 我有一个任务来检查 jar 是否可以运行 Linux 系统。有没有办法检查 Jar 文件是否独立于平台？

**唯一****确定**的方法是将其安装在 Linux 系统上，并对所有功能进行全面测试。（如果这太繁重，至少测试所有可能依赖于平台的功能。）

* * *

作为记录，有很多事情可以使您的代码平台依赖，包括：

*   将换行符硬连接到您的代码中，
*   将路径名硬连接到您的代码中，
*   在组装路径名时假设 Windows（或 Linux）文件分隔符/路径名语法，
*   与 Windows 文件锁定和其他特定于平台的文件系统行为有关的东西，
*   将外部命令名称硬连接到您的代码中，
*   使用本机代码库，
*   对输入/输出编码做出假设（例如，假设默认为 UTF-8 或其他），
*   Swing GUI 渲染和（偶尔）行为中的奇怪事情，
*   可能还有其他我没有想到的。

确保您没有错过任何事情的唯一方法是测试，测试，测试

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:11:43.183

在 linux 或 mac 上检查它，但您需要检查一些依赖于平台的东西，例如使用正确的路径分隔符进行文件操作、换行符

您可以使用[java.io.File.separatorChar](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#separatorChar)或`System.getProperty("path.separator");`路径分隔符和`System.getProperty("line.separator");`换行符。

# asp.net-mvc-3 - 使用 WCF 的 Kendo ui 自动完成

> ID：13507373
> 
> 赞同：2
> 
> 时间：2012-11-22T07:01:29.777
> 
> 标签：asp.net-mvc-3, wcf, entity-framework-4, kendo-ui

我想在我的剑道自动完成中同时显示描述和日期。以下代码将按预期显示，但日期除外。日期显示奇怪的格式

```
xml:
<d:SDate  m:type="Edm.DateTime">2012-11-21T18:30:51.097</d:SDate> 
```

如果我输入 Nike，它将出现 Nike (/Date(13534560000)/)

$("#titles").kendoAutoComplete({ minLength: 3, dataTextField: "SDesc", dataValueField: "RefID", template: '${ data.SDesc } ' + '(' + '${ data.SDate }' + ')',

```
 dataSource: {
                type: "odata",
                serverFiltering: true,
                serverPaging: true,
                pageSize: 20,
                transport: {
                    read: "http://localhost:54329/HH_WcfDataService.svc/Product"
                }
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:46:18.467

你得到了*奇怪*的日期格式，因为`Date`它实际上存储为一个数字。您需要将其格式化为您想要的格式`yyyy-mm-dd`, `mm-dd-yyyy`, `dd-mm-yyyy`,... 尝试使用`kendo.format`和/或`kendo.toString`（查看[http://docs.kendoui.c​​om](http://docs.kendoui.com/getting-started/framework/globalization/dateformatting) /getting-started/framework/globalization/dateformatting以获取有关在本地显示日期的信息/所需的格式）。我认为这`kendo.toString`对你有用，因为它接受`number`作为日期的参数（http://docs.kendoui.c​​om/api/framework/kendo#tostring）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T11:58:26.860

您可以尝试在模板中使用[kendo.parseDate](http://docs.kendoui.com/api/framework/kendo#parsedate)：

```
template: '${ data.SDesc } ' + '(' + '${ kendo.parseDate(data.SDate) }' + ')', 
```

这是一个现场演示：http: [//jsbin.com/ekogex/1/edit](http://jsbin.com/ekogex/1/edit)

# twitter-bootstrap - twitter bootstrap 中固定行和流动行的基本区别

> ID：13507375
> 
> 赞同：9
> 
> 时间：2012-11-22T07:01:33.897
> 
> 标签：twitter-bootstrap

谁能告诉我 twitter bootstrap 中的固定行和流动行有什么区别。我是初学者。

谢谢，阿比

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-23T02:53:51.977

固定行是给定的像素宽度（940 像素），分为 12 列。

流体行是基于百分比 (100%) 的，再次分为 12 列。

此信息可**[在此处轻松获得](http://getbootstrap.com/2.3.2/scaffolding.html#gridSystem)**

# android - 编辑文本框在小屏幕中不可调整

> ID：13507376
> 
> 赞同：0
> 
> 时间：2012-11-22T07:01:39.373
> 
> 标签：android

在我的应用程序中，edittextbox 在小屏幕上不可调节，从角落 [http://imgur.com/pcA9b](http://imgur.com/pcA9b)看这张图片 是源代码我如何将屏幕设置为所有尺寸？我的代码在正常屏幕中工作正常，但在小屏幕 UI 中现在可以正确地适合这个 iamge 我在这里发布的 url 是我的屏幕 edittextbox 不适合屏幕尺寸请帮助我

```
 <?xml version="1.0" encoding="utf-8"?>

<LinearLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:orientation="vertical"
      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:background="#D3D3D3"

      >

  <LinearLayout
         android:layout_width="fill_parent"
         android:layout_height="wrap_content"
         android:background="#000000"
         android:orientation="horizontal" >

           <LinearLayout
                android:layout_width="100dip"
                android:layout_height="40dp"
                android:background="#000000"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="70dip"
                    android:layout_height="wrap_content"
                    android:layout_gravity="left"
                    android:src="@drawable/logo1" />

        </LinearLayout>

         <LinearLayout
        android:layout_width="wrap_content"
        android:layout_marginLeft="110dp"
        android:layout_height="40dp"
        android:background="#000000"
        android:orientation="vertical" >

            <TextView

        android:layout_width="wrap_content"
        android:layout_height="20dp"            
        android:layout_gravity="right"             
        android:text="My Account"
        android:textColor="#FFCC00" />

   <View
       android:id="@+id/view1"
       android:layout_marginLeft="30dip"    
       android:layout_width="75dip"
       android:layout_gravity="right"
       android:layout_height="1dip"
       android:background="#99CC00" />

           <TextView

        android:layout_width="wrap_content"
        android:layout_height="20dp"           
        android:layout_gravity="right"
        android:textSize="10dip"
        android:text="Balance Inquiry"
        android:textColor="#FFCC00" />        

         </LinearLayout> 

          </LinearLayout>

          <LinearLayout
              android:layout_width="fill_parent"
              android:layout_height="fill_parent"
              android:layout_marginLeft="4dp"
              android:layout_marginTop="15dp"
              android:layout_marginRight="4dp"
              android:background="@drawable/curved2"
              android:orientation="vertical" >

                  <LinearLayout
                      android:layout_width="fill_parent"
                      android:layout_height="wrap_content"
                      android:layout_marginTop="35dip"
                      android:orientation="horizontal" >

                  <TextView
                      android:id="@+id/lblPinno"
                      android:layout_width="wrap_content"
                      android:layout_height="wrap_content"
                      android:layout_marginLeft="10dp"
                      android:text="Transaction PIN "

                      android:textColor="#FFCC00" />

                  <EditText
                      android:id="@+id/txtPinno"
                      style="?android:attr/buttonStyleSmall"
                      android:layout_width="fill_parent"
                      android:layout_height="wrap_content"
                      android:layout_marginBottom="5dip"
                      android:layout_marginRight="10dp"

                      android:layout_marginTop="2dip"
                      android:inputType="textPassword"
                      android:gravity="left" 
                      android:singleLine="true"
                      />
              </LinearLayout>

              <LinearLayout
                  android:layout_width="fill_parent"
                  android:layout_height="wrap_content"
                  android:layout_marginTop="50dip"
                  android:orientation="horizontal" >

                  <!-- Register Button -->

                  <Button
                      android:id="@+id/btngoback"
                      style="@style/HomeButton"         
                      android:layout_width="70dip"
                      android:layout_height="30dp"              
                      android:layout_marginTop="5dip"
                     android:drawableTop="@drawable/back"

            />

                  <Button
                      android:id="@+id/clearButton"
                      style="?android:attr/buttonStyleSmall"
                      android:layout_width="100dip"
                      android:layout_height="wrap_content"
                      android:layout_marginTop="10dip"
                      android:layout_marginRight="10dip"
                      android:background="@drawable/curved"
                      android:textColor="@drawable/button_text_color"
                      android:text="Clear" />

                  <Button
                       android:id="@+id/btnsubmit"
                       style="?android:attr/buttonStyleSmall"
                       android:layout_width="100dip"
                       android:layout_height="wrap_content"
                       android:layout_marginRight="10dp"
                       android:background="@drawable/curved"
                       android:textColor="@drawable/button_text_color"
                       android:layout_marginTop="10dip"
                       android:text="Submit" />
              </LinearLayout>
          </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:30:18.280

如果你想要`EditText`并且应该在同一个**LinearLayout**`TextView`中获得相等的空间，这就是我正在展示这个模板的方式。

 **```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal"
    android:weightSum="1" >

    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:gravity="center"
        android:text="hi" />

    <EditText 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:gravity="center"
        android:text="slgfdsig"
        />

</LinearLayout> 
```

希望这可以帮助您解决查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:05:55.487

您必须创建不同的布局来处理屏幕尺寸和方向。那么你就不会面对这个问题了。请参考[链接](https://stackoverflow.com/questions/13189869/layout-change-drastically-on-orientation-change)**

# php - 当我在实时服务器上比较当我在本地主机（xampp）上工作时，Simplepie 正在中断

> ID：13507379
> 
> 赞同：1
> 
> 时间：2012-11-22T07:02:02.093
> 
> 标签：php, xml-parsing, webserver, hosting, simplepie

我收到这个错误

```
This XML document is invalid, likely due to invalid characters. XML error: not well-formed (invalid token) at line 35, column 44 
```

当我在我的实时服务器上执行此操作时，但是当我尝试在 localhost(xampp) 上运行 SimplePie 时，我看不到该错误。我在`http://splashpage.mtv.com/feed/`实时服务器和我的本地主机（xampp）上都使用这个提要 url。我需要在我的服务器上启用某些东西吗？我正在使用 SimplePie 1.3 版。请在这件事上帮助我。

顺便说一句，我在另一个线程上看到了这个：[simplepie not parsing google news rss feed](https://stackoverflow.com/questions/8663744/simplepie-not-parsing-google-news-rss-feed)，其中一个问的人告诉了一些关于他的托管/服务器的事情。

请帮忙！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:28:33.533

问题是`rss`提要中的标签格式不正确：

```
<rss version="2.0"
xmlns:content="http://purl.org/rss/1.0/modules/content/"
xmlns:wfw="http://wellformedweb.org/CommentAPI/"
xmlns:dc="http://purl.org/dc/elements/1.1/"
xmlns:atom="http://www.w3.org/2005/Atom"
xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
xmlns:slash="http://purl.org/rss/1.0/modules/slash/"
xmlns:media="http://search.yahoo.com/mrss/"xmlns:advertorial="http://wordpress.mtvn.com/plugins/MTVNAdvertorials" > 
```

`xmlns:advertorial`属性前缺少一个空格。

尝试使用更宽松的 XML 解析器 - 可能是 simplexml (http://php.net/manual/en/book.simplexml.php) 或 XML 解析器 (http://php.net/manual/en/book.xml。 php) 将工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:55:31.883

我通过这个解决了这个

```
$SimplePieFeed = new SimplePie();
$SimplePieFeed->set_feed_url("http://splashpage.mtv.com/feed/");
$SimplePieFeed->enable_cache(true);
$SimplePieFeed->enable_order_by_date(true);
$success = $SimplePieFeed->init();
$SimplePieFeed->handle_content_type(); 
```

我刚刚添加`$SimplePieFeed->enable_cache(true);`

希望这会对某人有所帮助。

# backbone.js - 将木偶从 v0.9.10 更新到 v1.0.0-beta6

> ID：13507381
> 
> 赞同：1
> 
> 时间：2012-11-22T07:02:12.603
> 
> 标签：backbone.js, marionette

我正在使用 marionette v0.9.10 。最近我有一个[问题](https://stackoverflow.com/questions/13228750/calling-custom-method-on-add-event-of-collection-in-backbone-marionette)。所以我看到在新的牵线木偶中，某些功能被移到了不同​​的插件中

*   Backbone.EventBinder*   骨干网.Wreqr*   Backbone.BabySitter

我只是想知道使用它比以前的版本有什么优势

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T13:55:16.317

从 Marionette 中提取其他存储库的目的有两个：

1.  为更大的 Backbone 开发社区提供更多价值
2.  允许 Marionette 的发布计划在所有情况下都与这些组件不直接相关

第一个原因：有很多人对这些插件所涵盖的每个领域都表达了直接的兴趣。我已经在 SO 和社区的其他地方回答了许多关于解耦架构、子视图管理、事件管理等的问题。通过将这些代码块拆分到单独的存储库中，更大的 Backbone 社区可以利用这个功能的。

出于第二个原因：拥有单独的存储库和插件允许我们对特定的功能子集进行更改，而不必对 Marionette 本身进行完整的发布/版本升级。例如，我可以将 BabySitter 从 v0.0.1 移到 v1.0，而无需更改 Marionette 的任何代码。将发布周期解耦可以在交付更新和修复时提供更大的灵活性。

最后，这些库的分离在 Marionette 的各个部分之间提供了更好的抽象层。我们不再想直接将此功能编码到想要使用它的对象中。相反，我们必须使用单独的库并将其适当地合并到 Marionette 中。核心 Marionette.View 是一个很好的例子，说明了问题以及我们为什么要这样做。Marionette.View 中有太多不同的部分 - 太多的东西并不真正相关，但我们希望它出现在其他视图之一中。将库拆分为多个库可以让我们解决这个问题。

就管理这些依赖项而言，您至少有 4 个选项。

1.  [从http://marionettejs.com](http://marionettejs.com)获取“预打包的构建” - 它包含所有入门内容（主干、下划线、jquery、所有先决条件、木偶等）
2.  在一个文件中获取包含所有先决条件和木偶的“捆绑”构建
3.  获取各个部分和“核心”构建 - 自己将各个部分组合在一起，并自己管理版本
4.  使用像 JamJS 或 Bower 这样的包管理器

关于使用更新版本的 Marionette 的优势：错误修复、新功能、更稳定的代码、更一致的 API、更新更好的对象以支持开发以及对当前版本的支持。

如果它可以满足您的所有需求，那么坚持使用旧版本就可以了。目前，几乎所有 .minor 版本的 Marionette 都在网络上运行着实时应用程序。这些应用程序可能不需要更新，所以他们坚持现有的。但老实说，你不会得到对旧版本的太多支持。

在 v1.0 最终版本发布之前，几乎不存在向后兼容性和支持。一旦 v1.0 发布，我们将在短时间内提供错误修复，但会在新版本中推进新功能。

高温高压

# iphone - 如何在 iOS 中实现 Blowfish 算法

> ID：13507384
> 
> 赞同：6
> 
> 时间：2012-11-22T07:02:22.633
> 
> 标签：iphone, ios, xcode, ipad, blowfish

**在iOS**中实现**BlowFish ECB**加密的最佳方法是什么？？？我一直在谷歌搜索，发现[这里](http://www.schneier.com/blowfish-download.html)的图书馆。但是没有这个库的文档。不知道如何使用它。

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-10T05:11:33.523

我从[Bruce Schneier 的网站上](http://www.schneier.com/blowfish-download.html)得到了 Paul Kocher 的实现。以下是加密方法的样子：

```
#define PADDING_PHRASE @"       "

#import "CryptoUtilities.h"
#import "blowfish.h"
#import "NSData+Base64Utilities.h"

@implementation CryptoUtilities

+ (NSString *)blowfishEncrypt:(NSData *)messageData usingKey:(NSData *)secretKey
{
    NSMutableData *dataToEncrypt = [messageData mutableCopy];

    if ([dataToEncrypt length] % 8) {
        NSMutableData *emptyData = [[PADDING_PHRASE dataUsingEncoding:NSUTF8StringEncoding] mutableCopy];

        emptyData.length = 8 - [dataToEncrypt length] % 8;
        [dataToEncrypt appendData:emptyData];
    }

    // Here we have data ready to encipher    
    BLOWFISH_CTX ctx;
    Blowfish_Init (&ctx, (unsigned char*)[secretKey bytes], [secretKey length]);

    NSRange aLeftRange, aRightRange;
    NSData *aLeftBox, *aRightBox;
    unsigned long dl = 0, dr = 0;

    for (int i = 0; i < [dataToEncrypt length]; i += 8) { // Divide data into octets...
        // …and then into quartets
        aLeftRange = NSMakeRange(i, 4);
        aRightRange = NSMakeRange(i + 4, 4);

        aLeftBox = [dataToEncrypt subdataWithRange:aLeftRange];
        aRightBox = [dataToEncrypt subdataWithRange:aRightRange];

        // Convert bytes into unsigned long
        [aLeftBox getBytes:&dl length:sizeof(unsigned long)];
        [aRightBox getBytes:&dr length:sizeof(unsigned long)];

        // Encipher
        Blowfish_Encrypt(&ctx, &dl, &dr);

        // Put bytes back
        [dataToEncrypt replaceBytesInRange:aLeftRange withBytes:&dl];
        [dataToEncrypt replaceBytesInRange:aRightRange withBytes:&dr];
    }

    return [dataToEncrypt getBase64String];
} 
```

我的 C 语言不是很好，但似乎我的实现工作正常。要解密，您只需重复相同的步骤，但您需要调用*Blowfish_Decrypt而不是**Blowfish_Encrypt*。 这是一个源代码（我假设您只是解密密文，但这里不处理填充）：

 *```
+ (NSData *)blowfishDecrypt:(NSData *)messageData usingKey:(NSData *)secretKeyData
{
    NSMutableData *decryptedData = [messageData mutableCopy];

    BLOWFISH_CTX ctx;
    Blowfish_Init (&ctx, (unsigned char*)[secretKeyData bytes], [secretKeyData length]);

    NSRange aLeftRange, aRightRange;
    NSData *aLeftBox, *aRightBox;
    unsigned long dl = 0, dr = 0;

    for (int i = 0; i< [decryptedData length]; i += 8) { // Divide data into octets...
        // …and then into quartets
        aLeftRange = NSMakeRange(i, 4);
        aRightRange = NSMakeRange(i + 4, 4);

        aLeftBox = [decryptedData subdataWithRange:aLeftRange];
        aRightBox = [decryptedData subdataWithRange:aRightRange];

        // Convert bytes into unsigned long
        [aLeftBox getBytes:&dl length:sizeof(unsigned long)];
        [aRightBox getBytes:&dr length:sizeof(unsigned long)];

        // Decipher
        Blowfish_Decrypt(&ctx, &dl, &dr);

        // Put bytes back
        [decryptedData replaceBytesInRange:aLeftRange withBytes:&dl];
        [decryptedData replaceBytesInRange:aRightRange withBytes:&dr];
    }

    return decryptedData;
} 
```

您可能希望返回纯字节或 Base64 字符串。对于最后一种情况，我有一个类别，它添加了一个初始化程序，它使用 Base64 字符串和一个方法初始化 NSData 对象，该方法允许从 NSData 获取 Base64 字符串。

您还应该考虑使用 PADDING_PHRASE，例如，如果您不仅要添加几个空格，还要添加一些随机字节怎么办？在这种情况下，您应该以某种方式发送填充长度。

**更新：**实际上，你**不应该**在你的过程中使用 PADDING_PRASE。[相反，您应该使用维基百科页面](http://en.wikipedia.org/wiki/Padding_(cryptography)#Block_cipher_mode_of_operation)上描述的分组密码的标准算法之一

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-27T21:11:02.303

Apple 自己的 CommonCrypto API 提供（除其他外）Blowfish 实现。您可以在 CBC（默认）或 ECB 模式下加密和解密。

有关文档，请参阅 CommonCrypto.h、CommonCryptor.h 和 CommonCrypto 联机帮助页。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-01-07T20:49:16.987

我已经为河豚算法编写了一个本机实现，因为前段时间没有满足我需要的实现

也许这是一个老问题，但我想帮助需要河豚算法本机类的人。

它的作品与 PHP 完全兼容

> Objective-C Blowfish 实现
> 
> *   支持EBC和CBC模式
> *   支持填充 RFC 和零填充
> *   与 PHP 的 Mcrypt 兼容
> *   最初为 iOS SDK 编码。它也适用于 OS X SDK

更多关于 github；

[https://github.com/cantecim/FclBlowfish](https://github.com/cantecim/FclBlowfish)***

# db2 - 如何优化给定的 db2 查询，

> ID：13507385
> 
> 赞同：-1
> 
> 时间：2012-11-22T07:02:34.160
> 
> 标签：db2

考虑我的 DB2 查询如下。

```
Select something from some tables,
(select something from some tables where bhla=bhla
Unionall
select something from some tables where bhla=bhla
union
select something from some tables where bhla=bhla) x 
where bhla=bhla 
```

它看起来像

```
select x.something, y.somethingelse from table y,
(select something from some tables where bhla=bhla
    Unionall
    select something from some tables where bhla=bhla
    union
    select something from some tables where bhla=bhla) x 
where bhla=bhla 
```

我的查询是优化上述查询（使用查询的更好方式）。请提供一些关于索引的输入以及如何使用它。我需要优化上述查询，所以请提出一些建议。

你能建议 hw 重新编码下面的 where 子句吗

在哪里

```
(ID.EXCH_RT <> 0.000000 AND ID.EXCH_RT IS NOT NULL)  
AND I.ACT_LOC_TS BETWEEN ( :Param_290_From_Date CONCAT ' 00:00:00.00000')  AND ( :Param_300_To_Date CONCAT ' 23:59:59.99999') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T11:03:07.193

**无法使用给定的信息进行优化。**

通常，当人们提出一个不够具体的问题时，他们只会提到[如何提出问题。](https://stackoverflow.com/questions/how-to-ask)但是，我看到很多这种特殊情况：寻求帮助以优化定义不明确的 SQL 查询。所以我想更详细地解决这里的问题。

为什么不能优化？

1.  **我们不知道任务。** 优化是您为一项*任务*所做的事情，而不是一段代码。您的目标是尽可能高效地完成任务。您发布的代码可能是也可能不是最好的方法。如果我们只有代码，不知道代码的用途，我们就无法评估您的代码是否合适。

2.  **我们不知道表结构**。SQL 的优化很大程度上取决于相关表的结构。涉及哪些列，哪些数据类型？这些表是如何相互关联的？在这种情况下，我们甚至不知道涉及多少表，因为一些查询作用于“某些表”。

3.  **我们不知道数据**。每张桌子有多大？考虑下面的示例查询。优化了吗？答案是，这一切都取决于数据。如果`table1`小而`table2`大，那将是优化查询的好方法。但是，如果`table1`是大而`table2`小，那将是一个非常糟糕的查询设计，会浪费大量时间。如果对数据一无所知，就无法说出最佳设计。

4.  **这取决于您使用的数据库**（感谢 WarrenT）。在本例中，您已经指定了 DB2，与许多仅陈述“SQL”的问题相比，这是一个好的开始。但是，了解您使用的平台和版本仍然会有所帮助。这对可用的功能产生了重大影响。

示例查询：

```
with complicated as (
    select id, 
        char(foo) || case when bar = 1234 then 'a' else 'c' end || 'baz'
             as complicated_field
        from table1
)
select * from table2
    join complicated on 
        complicated.id = table2.id and
        complicated.complicated_field = table2.some_field 
```

我希望这是有帮助的。如果您提供更多信息，我们很乐意为您提供进一步帮助。

# c++ - 删除二叉搜索树的 fcn

> ID：13507389
> 
> 赞同：0
> 
> 时间：2012-11-22T07:02:50.917
> 
> 标签：c++

二叉搜索树的这个删除函数看起来正确吗？当我尝试删除一个节点时，它会运行并返回调用它的开关菜单，但在重新打印树时实际上并没有删除它。我不确定我的退货是否不合适，可能吗？

我的问题是：这个删除语句是否真的删除了传递的项目，还是只是以一种残忍的方式玩弄它让我头疼？

```
void BinarySearchTree::remove(int d)
    {
       //Locate the element
       bool found = false;
       if(isEmpty())
       {
          cout<<" This Tree is empty! "<<endl;
          return;
       }

       tree_node* curr;
       tree_node* parent;
       curr = root;

       while(curr != NULL)
       {
          if(curr->data == d)
          {
             found = true;
             break;
          }
          else
          {
             parent = curr;
             if(d>curr->data) curr = curr->right;
             else curr = curr->left;
          }
        }
        if(!found)
        {
          cout<<" Data not found! "<<endl;
          return;
        }

        // 3 cases :
        // 1\. We're removing a leaf node
        // 2\. We're removing a node with a single child
        // 3\. we're removing a node with 2 children

        // Node with single child
            // Node with single child
if((curr->left == NULL && curr->right != NULL) || (curr->left != NULL && curr->right == NULL))
{
  if(curr->left == NULL && curr->right != NULL)
  {
     if(parent->left == curr)
     {
        parent->left = curr->right;
        delete curr;
     }
     else
     {
        parent->right = curr->right;
        delete curr;
     }
   }
   else // left child present, no right child
   {
     if(parent->left == curr)
     {
        parent->left = curr->left;
        delete curr;
     }
     else
     {
        parent->right = curr->left;
        delete curr;
     }
   }
   return;
}

        //We're looking at a leaf node
        if( curr->left == NULL && curr->right == NULL)
        {
          if(parent->left == curr)
          {
             parent->left = NULL;
          }
          else
          {
             parent->right = NULL;
          }
          delete curr;
          return;
        }

        //Node with 2 children
        // replace node with smallest value in right subtree
        if (curr->left != NULL && curr->right != NULL)
        {
           tree_node* chkr;
           chkr = curr->right;
           if((chkr->left == NULL) && (chkr->right == NULL))
           {
             curr = chkr;
             delete chkr;
             curr->right = NULL;
           }
           else // right child has children
           {
             //if the node's right child has a left child
             // Move all the way down left to locate smallest element

             if((curr->right)->left != NULL)
             {
                tree_node* lcurr;
                tree_node* lcurrp;
                lcurrp = curr->right;
                lcurr = (curr->right)->left;
                while(lcurr->left != NULL)
                {
                   lcurrp = lcurr;
                   lcurr = lcurr->left;
                }
                curr->data = lcurr->data;
                delete lcurr;
                lcurrp->left = NULL;
             }
             else
             {
                tree_node* tmp;
                tmp = curr->right;
                curr->data = tmp->data;
                curr->right = tmp->right;
                delete tmp;
             }

          }
          return;
       }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:41:25.803

我读了你的代码，我在纸上写了不同的情况，我认为在节点有 2 个孩子的情况下，代码应该是这样的

```
 //Node with 2 children
    if (curr->left != NULL && curr->right != NULL)
    {
        tree_node* chkr; 
        if(parent==NULL || parent->left==curr){  //if parent==NULL it means that the node that we want to delete is root
            chkr=curr->right;
            while(chkr->left!=NULL)
                chkr=chkr->left;
            if(parent!=NULL)
                parent->left=curr->right;
            else
                root=curr->right;
            chkr->left=curr->left;
            curr->left=curr->right=NULL;
            delete curr;
        }else if(parent->right==curr){
            chkr=curr->left;
            while(chkr->right!=NULL)
                chkr=chkr->right;
            parent->right=curr->left;
            chkr->right=curr->right;
            curr->left=curr->right=NULL;
            delete curr;
        }
        return;
   } 
```

我没有编译或测试它，但我认为它会工作，请让我知道

# java - Android日期选择器侦听器不会工作超过一次..

> ID：13507394
> 
> 赞同：2
> 
> 时间：2012-11-22T07:03:46.067
> 
> 标签：java, android, eclipse, datepicker, listeners

我有一个活动，我有两个日期选择器，首先我用这些语句初始化它们

```
 public class birthDate extends Activity{

Calendar c = Calendar.getInstance();
    int currentYear = c.get(Calendar.YEAR); 
    int currentMonth = c.get(Calendar.MONTH);
    int currentDay = c.get(Calendar.DAY_OF_MONTH);
  public void onCreate(Bundle savedInstanceState) 
{

 super.onCreate(savedInstanceState);  

 setContentView(R.layout.birthdate);

    DatePicker birthDayDatePicker,periodDatePicker;
            birthDayDatePicker = (DatePicker)findViewById(R.id.DatePickerBirthDay);
            periodDatePicker = (DatePicker)findViewById(R.id.DatePickerPeriod);
             periodDatePicker.init(currentYear, currentMonth, currentDay, new OnDateChangedListener()
            {

                @Override
                public void onDateChanged(DatePicker arg0, int arg1, int arg2,int arg3) {
                    // TODO Auto-generated method stub
                    birthDateCalculations();
                }
            });

            birthDayDatePicker.init(currentYear, currentMonth, currentDay, new OnDateChangedListener() {

                @Override
                public void onDateChanged(DatePicker arg0, int arg1, int arg2, int arg3) {
                    // TODO Auto-generated method stub

                    periodDateCalculations();

                    }
            });

    }} 
```

我意识到那些监听器只发生了一次，就好像我再次单击日期选择器一样，这些语句将不会被应用。我想要一种方法来让监听器在我每次单击日期选择器时都处于活动状态。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:08:59.500

请在活动的**oncreate**方法中初始化选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T10:04:51.047

```
 birthDayDatePicker = (DatePicker)findViewById(R.id.DatePickerBirthDay);
        periodDatePicker = (DatePicker)findViewById(R.id.DatePickerPeriod);

        //initialize period date picker with current date and on date change listener 
        periodDatePicker.init(currentYear, currentMonth, currentDay, new OnDateChangedListener()
        {

            @Override
            public void onDateChanged(DatePicker periodDatePicker, int currentYear, int currentMonth,int currentDay) {
                // TODO Auto-generated method stub
                Number = 1;
                birthDayDatePicker.init(currentYear, currentMonth, currentDay, null);
                birthDateCalculations();

            }
        });

        //initialize birth date picker with current date and on date change listener 
        birthDayDatePicker.init(currentYear, currentMonth, currentDay, new OnDateChangedListener () {

            @Override
            public void onDateChanged(DatePicker birthDayDatePicker, int currentYear, int currentMonth, int currentDay) {
                // TODO Auto-generated method stub
                Number = 2;
                periodDatePicker.init(currentYear, currentMonth, currentDay, null);
                periodDateCalculations();

                }
        });

}

> Blockquote 
```

# jquery - div上的fancybox双击

> ID：13507395
> 
> 赞同：1
> 
> 时间：2012-11-22T07:03:53.190
> 
> 标签：jquery, ruby-on-rails, fancybox

我的要求是在双击一个 div 时，另一个 div 应该打开为 fancybox .. 如何在带有 rails 3.1 的 Jquery 中做到这一点

我在 document.ready() 中有以下函数

```
$("#a1").dblclick(function () {
  $.get("/projects/edit/"+this.id,{
  u:$('#user').val()
  },
  function(data)
  {
  $("#edit_proj").fancybox();
  $("#edit_proj").html(data);

  }); 
```

但是edit_proj div没有在fancybox中打开。我不知道如何在fancybox中打开它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:11:43.267

确保`#edit_proj`你的页面上存在也改变这个

```
 $("#edit_proj").fancybox();
  $("#edit_proj").html(data); 
```

对此

```
 $("#edit_proj").html(data);
 $("#edit_proj").fancybox(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T18:45:13.380

我不知道你的结构`divs`是否`<div id="edit_proj"></div>`存在于你的文档结构中（你可以评估它并动态附加`div`到父容器中）......所以猜测你有这个（渲染的 html）结构：

```
<div id="a1">double click me</div>
<div id="container"></div> 
```

...`#container`的父级在哪里（将是）`div`，`#edit_proj`那么你可以试试这个脚本

```
$("#a1").dblclick(function() {
    $.get("/projects/edit/" + this.id, {
        u: $('#user').val(),
    }, function(data) {
        if ($("#edit_proj").length == 0) {
            console.log("it doesn't exist"); // so append it
            $("<div id='edit_proj' />").appendTo("#container").html(data);
            $.fancybox("#edit_proj"); // fancybox
        } else {
            console.log("it does exist"); // so add data
            $("#edit_proj").html(data);
            $.fancybox("#edit_proj"); // fancybox
        }
    }); // get
}); // dblclick 
```

见**[JSFIDDLE](http://jsfiddle.net/jPm2d/)**

**重要提示**：请记住，由于您使用的是`inline`内容，fancybox 将返回`<div id='edit_proj'></div>`其在文档结构中的位置，并带有属性`display:none;`

**注意**：此演示使用 fancybox v2.1.3+。

# ios - 为什么 NSLineBreakByWordWrapping 有时不起作用

> ID：13507397
> 
> 赞同：6
> 
> 时间：2012-11-22T07:04:01.107
> 
> 标签：ios, uilabel

我创建了一个 UILabel 并将 lineBreakMode 设置为 NSLineBreakByWordWrapping，但有时一个单词会分成两行。

我的代码如下

```
 _sentenceLabel.textAlignment = UITextAlignmentCenter;

    if (_sentenceLabel.bounds.size.width > self.bounds.size.width - 100) {
       CGSize size = [_info.sentence sizeWithFont:sentenceFont
                                constrainedToSize:CGSizeMake(self.bounds.size.width - 100, 1000)];
        _sentenceLabel.frame = CGRectMake(0, 0, size.width, size.height);

        _sentenceLabel.numberOfLines = 0;
        _sentenceLabel.lineBreakMode = NSLineBreakByWordWrapping;
    } 
```

当字体名称为@"Gill Sans" 时，换行不正确。（“结果”一词分为两行） ![在此处输入图像描述](../Images/6b3ec36479dcd0f16e6205bd925adca6.png)

当我更改为其他字体时，它会再次起作用。真奇怪。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-26T16:10:00.843

这也发生在韩文字符上，字体 AppleSDGothicNeo-Bold 和其他字体。在带有拉丁语和韩语单词的独特标签中，对于拉丁语单词，自动换行有效，但不适用于韩语单词。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-19T10:05:17.450

文档内容如下：

```
NSLineBreakByWordWrapping 
```

换行发生在单词边界，**除非单词本身不适合单行**。

# java - 使用 Reflection-with 构造函数参数在抽象类中创建实例

> ID：13507412
> 
> 赞同：0
> 
> 时间：2012-11-22T07:05:45.643
> 
> 标签：java, reflection, abstract-class

[使用反射在抽象类中创建一个实例](https://stackoverflow.com/questions/13450953/create-an-instance-within-abstract-class-using-reflection) 我之前打开了类似的问题。但是现在我通过添加带有 int 参数的构造函数来更改派生类。现在我有并且“没有这样的方法异常”。这是源代码和异常。

```
public abstract class Base {

    public Base(){
        this(1);
    }

    public Base(int i){
        super();
    }

    public Base createInstance() throws Exception{
        Class<?> c = this.getClass();       
        Constructor<?> ctor = c.getConstructor();
        return ((Base) ctor.newInstance());     
    }

    public abstract int  getValue();

    }

    public class Derived extends Base{

    public Derived(int i) {
        super(2);
    }

    @Override
    public int getValue() {
        return 10;
    }

    public static void main(String[] args) {
        try {
            Base b1=new Derived(2);
            Base b2 =b1.createInstance();

            System.out.println(b2.getValue());

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

} 
```

它抛出这个堆栈跟踪

```
java.lang.NoSuchMethodException: reflection.Derived.<init>()
    at java.lang.Class.getConstructor0(Unknown Source)
    at java.lang.Class.getConstructor(Unknown Source)
    at reflection.Base.createInstance(Base.java:17)
    at reflection.Derived.main(Derived.java:18) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:15:49.903

请试试

```
import java.lang.reflect.Constructor;

public abstract class Base {

    public Base() {
        this(1);
    }

    public Base(int i) {
        super();
    }

    public Base createInstance() throws Exception {
        Class<?> c = this.getClass();
        Constructor<?> ctor = c.getConstructor(new Class[] { int.class });
        return ((Base) ctor.newInstance(new Object[] { 1 }));
    }

    public abstract int getValue();

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:09:45.663

正如例外明确指出的那样，问题是`reflection.Derived.<init>()`不存在的。这是因为您的`Derived`类没有任何默认构造函数。

您将需要使用：

```
Class<?> c = this.getClass();
Constructor<?> ctor = c.getConstructor(Integer.class);
ctor.newInstance(intValue); 
```

# apache-poi - 如何使用 Apache POI 创建 Word 文档？

> ID：13507424
> 
> 赞同：6
> 
> 时间：2012-11-22T07:06:23.680
> 
> 标签：apache-poi

如何使用 Apache POI 创建 Word 文档？

我正在为 Atlassian Confluence 开发一个简历编辑器作为商业插件。

很抱歉我不得不问这个问题，但我没有找到可以帮助我的教程。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-23T20:33:20.360

您附加的代码文件“DownloadAsMicrosoftWordDocument.java.txt”具有文件下载功能的编码；不创建 Word 文档。

当您寻找 Word 文档创建时，请在下面找到参考：

**HWPF Reference(.doc):** POI trunk 没有 XWPF 的例子，但是 POI Scratchpad 周围有 Testcases，请找

*   [POI 便签本](http://svn.apache.org/repos/asf/poi/trunk/src/scratchpad/testcases/org/apache/poi/hwpf/)
*   Javadoc [HWPF 文档](http://poi.apache.org/apidocs/org/apache/poi/hwpf/HWPFDocument.html)
*   Javadoc [org.apache.poi.hwpf.usermodel](http://poi.apache.org/apidocs/org/apache/poi/hwpf/usermodel/package-summary.html)

**XWPF 参考（.docx）：**来自 Apache POI SVN Repo 的示例

*   [简单文档.java](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/xwpf/usermodel/examples/SimpleDocument.java)
*   [简单图像.java](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/xwpf/usermodel/examples/SimpleImages.java)
*   [简单表.java](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/xwpf/usermodel/examples/SimpleTable.java)
*   [UpdateEmbeddedDoc.java](http://svn.apache.org/repos/asf/poi/trunk/src/examples/src/org/apache/poi/xwpf/usermodel/examples/UpdateEmbeddedDoc.java)

还可以参考 POI [Javadocs](http://poi.apache.org/apidocs/org/apache/poi/xwpf/usermodel/package-summary.html) for XWPF（Word 文档）。

我希望它能为你提供启动！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-22T13:08:22.650

```
package org.poi.images;

import java.io.File;   
  import java.io.FileOutputStream;   
  import org.apache.poi.xwpf.usermodel.XWPFDocument;   
  import org.apache.poi.xwpf.usermodel.XWPFParagraph;   
  import org.apache.poi.xwpf.usermodel.XWPFRun;   
  public class DocFile {   
    public void newWordDoc(String filename, String fileContent)   
         throws Exception {   
       XWPFDocument document = new XWPFDocument();   
       XWPFParagraph tmpParagraph = document.createParagraph();   
       XWPFRun tmpRun = tmpParagraph.createRun();   
       tmpRun.setText(fileContent);   
       tmpRun.setFontSize(18);   
       FileOutputStream fos = new FileOutputStream(new File("C:\\Users\\amitabh\\Pictures\\pics\\"+filename + ".doc"));   
       document.write(fos);   
       fos.close();   
    }   
    public static void main(String[] args) throws Exception {   
         DocFile app = new DocFile();   
         app.newWordDoc("testfile", "Hi hw r u?");   

    }   
  } 
```

# git - 终端中的 Git 提交打开 VIM，但无法返回终端

> ID：13507430
> 
> 赞同：224
> 
> 时间：2012-11-22T07:06:50.620
> 
> 标签：git, vim, terminal, command-line-interface, commit

目前正在尝试学习 GitHub，并在 nettuts 上完成这个[Git 基础教程。](https://tutsplus.com/course/git-essentials/)我正在学习关于提交的课程。

老师输入`git commit`并打开 VIM 作为他的编辑器（我也想知道如何让它在[Sublime Text](http://www.sublimetext.com/) 2 中打开）无论如何它在 VIM 中打开，我添加了 1 行说这是我的第一次提交并点击保存.

接下来，它会提示我将输出保存到桌面，这是我在他的截屏视频中没有看到的。现在我还在 VIM 中，不知道如何回到“正常”终端:(

我想不通，所以我只是退出终端并重新启动它，再次 git commit 并收到一些关于重复的警告消息！不知道我是否需要`(E)edit`反正或`(A)abort`。

**状态**

![在此处输入图像描述](../Images/6ad76d9815ea06b6fba1ef6cd1d006f4.png)

**vim**

![在此处输入图像描述](../Images/6f76aa096f2e7c80f8c8d451a84a6396.png)

**当我重新打开终端并再次执行 git commit 时的**消息****

 **![在此处输入图像描述](../Images/32d988f667c6028730921d531a54002e.png)

* * *

## 回答 #1

> 赞同：399
> 
> 时间：2012-11-22T07:09:20.210

要保存您的工作并退出，请按`Esc`然后`:``w``q`（w 表示写入，q 表示退出）。

或者，您可以通过按`Esc`然后保存和退出`:``x`

`export EDITOR=myFavoriteEdior`要在终端上设置另一个编辑器运行，`myFavoriteEdior`可以是`vi`, `gedit`, `subl`（用于崇高）等。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-11-22T07:09:43.170

不是 VIM 问题的真正答案，但您可以使用命令行也输入提交消息：

```
git commit -m "This is the first commit" 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-11-22T07:10:11.567

您需要返回*正常*模式并使用以下任一方式保存提交消息

```
<Esc>:wq 
```

或者

```
<Esc>:x 
```

或者

```
<Esc>ZZ 
```

该`Esc`键将您从*插入*模式返回到*正常*模式。,`:wq`或序列写入更改并退出编辑器`:x`。`ZZ`

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-11-22T07:09:42.597

只需执行 vim“保存并退出”命令`:wq`就可以了。

为了让 Git 在另一个编辑器中打开它，您需要将 Git`core.editor`设置更改为运行所需编辑器的命令。

`git config --global core.editor "command to start sublime text 2"`

* * *

## 回答 #5

> 赞同：16
> 
> 时间：2016-10-04T15:30:05.877

这是为了回答你的问题...

> *我也想知道如何让它在 Sublime Text 2 中打开*

**对于 Windows：**

```
git config --global core.editor "'C:/Program Files/Sublime Text 2/sublime_text.exe'" 
```

检查路径`sublime_text.exe`是否正确，并根据需要进行调整。

**对于 Mac/Linux：**

```
git config --global core.editor "subl -n -w" 
```

如果您收到错误消息，例如：

> 错误：编辑器“subl -n -w”有问题。

为`subl`

```
sudo ln -s /Applications/Sublime\ Text.app/Contents/SharedSupport/bin/subl /usr/local/bin/subl 
```

再次检查路径是否与您的机器匹配。

对于 Sublime Text，只需保存`cmd S`并关闭窗口`cmd W`即可返回 git。**

# c# - 在 Visual Studio 中创建单元测试后项目未构建？

> ID：13507433
> 
> 赞同：1
> 
> 时间：2012-11-22T07:07:02.117
> 
> 标签：c#, visual-studio-2010, nunit

项目之间有很多相互依赖的产品。最初为一个项目创建单元测试。成功创建测试并使用 InternalsVisibleTo() 访问该项目的非公共类成员。但是当我构建项目时，因为它具有依赖项，所以它会抛出错误。在创建测试之前没有错误。

错误列表：

> 无法加载“..\xxx1.dll”，因为它不是有效的 .NET 程序集：RegAsm
> 
> 命令 "%SystemRoot%\Microsoft.NET\Framework64\v4.0.30319\regasm" xxx1.dll /tlb:"..\xxx1.tlb" /verbose" 以代码 100 退出。
> 
> 没有为项目设置输出属性。请检查以确保您指定了有效的组合。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T10:40:07.147

将“解决方案平台”更改为“x64”后解决。由于依赖项中的一个项目间接依赖于需要为 x64 机器构建的项目。

# python - 为什么我在 python 文本中的所有文本前面看到“u”

> ID：13507434
> 
> 赞同：0
> 
> 时间：2012-11-22T07:07:14.210
> 
> 标签：python, scrapy

我正在使用scrapy来废弃网站。我的物品看起来像这样

`{'company': [u'Resource Agility'],`

我厌倦了这个`u`。

这正常吗？

我想知道，如果我将我的值存储在数据库中，是否`u`也会进入那里？

有什么办法可以隐藏`u`吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T07:09:18.897

不... u 只是python 2.x[中 unicode 字符串的语法糖。](http://docs.python.org/2/howto/unicode.html)它不会存储在您的数据库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T07:09:13.403

在显示字符串时添加该`u`符号以表示对象是 Unicode 字符串。同样，如果您在代码中使用 unicode 字符串，则可以通过`u`在字符串本身旁边添加一个符号来使用 unicode 文字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T07:08:39.167

这是在控制台中打印 unicode 字符串的方式。只需阅读它们。

[http://docs.python.org/2/tutorial/introduction.html#unicode-strings](http://docs.python.org/2/tutorial/introduction.html#unicode-strings)

它说“引号前面的小 'u' 表示应该创建一个 Unicode 字符串。”

# xml - 先删除 使用 XSLT 标记

> ID：13507437
> 
> 赞同：3
> 
> 时间：2012-11-22T07:07:32.057
> 
> 标签：xml, xslt, transformation

我正在尝试使用 XSLT 将多项选择题类型的 QTI 标准 xml 转换为 XHTML 文件。我发现从“simpleChoice”标签值中删除第一个“p”标签有困难。

以下是我试图转换为 XHTML 的 QTI

```
 <?xml version="1.0" encoding="utf-8"?>
<assessmentItem xsi:schemaLocation="http://www.imsglobal.org/xsd/imsqti_v2p1 http://www.imsglobal.org/xsd/imsqti_v2p1.xsd" identifier="choice" title="Item Title will come here" adaptive="false" timeDependent="false" xmlns="http://www.imsglobal.org/xsd/imsqti_v2p1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <responseDeclaration identifier="RESPONSE" cardinality="single" baseType="identifier">
    <correctResponse>
      <value>ChoiceA</value>
    </correctResponse>
  </responseDeclaration>
  <outcomeDeclaration identifier="SCORE" cardinality="single" baseType="integer">
    <defaultValue>
      <value>0</value>
    </defaultValue>
  </outcomeDeclaration>
  <itemBody>
    <div id="item">
      <div id="instruction">Select the correct options</div>
      <choiceInteraction responseIdentifier="RESPONSE" shuffle="false" maxChoices="1">
        <prompt>
            <div id="stem">
                <p>Question will appear here</p>
            </div>
        </prompt>
        <simpleChoice identifier="ChoiceA"><p> answer's first P tag</p> <p> answer's second P tag</p> <p> answer's third P tag</p> <p> answer's forth P tag</p> and text without p tag</simpleChoice>
        <simpleChoice identifier="ChoiceB"><p> answer's first P tag</p> <p> answer's second P tag</p> <p> answer's third P tag</p> <p> answer's forth P tag</p> and text without p tag</simpleChoice>
        <simpleChoice identifier="ChoiceC"><p> answer's first P tag</p> <p> answer's second P tag</p> <p> answer's third P tag</p> <p> answer's forth P tag</p> and text without p tag</simpleChoice>
        <simpleChoice identifier="ChoiceD"><p> answer's first P tag</p> <p> answer's second P tag</p> <p> answer's third P tag</p> <p> answer's forth P tag</p> and text without p tag</simpleChoice>
        <simpleChoice identifier="ChoiceE"><p> answer's first P tag</p> <p> answer's second P tag</p> <p> answer's third P tag</p> <p> answer's forth P tag</p> and text without p tag</simpleChoice>
      </choiceInteraction>
    </div>
  </itemBody>
  <responseProcessing template="http://www.imsglobal.org/question/qti_v2p1/rptemplates/match_correct" />
</assessmentItem> 
```

我正在查看选项的以下输出

```
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  </head>
  <body>
    <div id="option1">
      <label>A.</label>
      <div class="optionContent">answer's first P tag<p> answer's second P tag</p> <p> answer's third P tag</p> <p> answer's forth P tag</p> and text without p tag</div>
    </div>          
    <div id="option2">
      <label>B.</label>
      <div class="optionContent">answer's first P tag<p> answer's second P tag</p> <p> answer's third P tag</p> <p> answer's forth P tag</p> and text without p tag</div>
    </div>
    <div id="option3">
      <label>C.</label>
      <div class="optionContent">answer's first P tag<p> answer's second P tag</p> <p> answer's third P tag</p> <p> answer's forth P tag</p> and text without p tag</div>
    </div>
    <div id="option4">
      <label>D.</label>
      <div class="optionContent">answer's first P tag<p> answer's second P tag</p> <p> answer's third P tag</p> <p> answer's forth P tag</p> and text without p tag</div>
    </div>
    <div id="option5">
      <label>E.</label>
      <div class="optionContent">answer's first P tag<p> answer's second P tag</p> <p> answer's third P tag</p> <p> answer's forth P tag</p> and text without p tag</div>
    </div>
  </body>
</html> 
```

我需要的期望输出是从“simpleChoice”标签中删除第一个“p”标签。

我曾尝试使用以下样式来做到这一点

```
<xsl:for-each select="//simpleChoice[$vCurrentIndex]/*">
    <xsl:choose>
      <xsl:when test="local-name() = 'p' and position() = 1">
        <xsl:apply-templates select="node()|@*" mode="children" />
      </xsl:when>
      <xsl:otherwise>
        <xsl:element name="{local-name()}">
          <xsl:apply-templates select="node()|@*" mode="children" />
        </xsl:element>
      </xsl:otherwise>
    </xsl:choose>
</xsl:for-each> 
```

这样做后，我得到以下输出。输出不考虑任何不在 P 标签内的值。仅获取三个 P 标签的输出。

```
<div class="optionContent">answer's second P tag<p> answer's third P tag</p> <p> answer's forth P tag</p></div> 
```

你的帮助真的会帮助我。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:04:10.273

您使用 XSLT 的方法是错误的。删除`<xsl:for-each>`整个样式表中的所有内容。你不需要它们，也不应该使用它们。它们表明您以程序方式思考，而 XSLT 不是一种程序语言。

如果您使用模板匹配而不是`for-each`. 还要在 XSL 中使用正确的命名空间声明，而不是`local-name()`到处使用。

```
<xsl:stylesheet 
  version="1.0" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:qti="http://www.imsglobal.org/xsd/imsqti_v2p1"
  exclude-result-prefixes="qti"
>
  <xsl:output indent="yes" />

  <xsl:template match="/*">
    <root>
      <xsl:apply-templates select="//qti:simpleChoice" />
    </root>
  </xsl:template>

  <!-- identity template: this is the base of the entire process -->
  <xsl:template match="node() | @*">
    <xsl:copy>
      <xsl:apply-templates select="node() | @*" />
    </xsl:copy>
  </xsl:template>

  <!-- helper: elements in the qti namespace output their local name -->
  <xsl:template match="qti:*">
    <xsl:element name="{local-name()}">
      <xsl:apply-templates select="node() | @*" />
    </xsl:element>
  </xsl:template>

  <xsl:template match="qti:simpleChoice">
    <div id="option{position()}">
      <label>
        <xsl:value-of select="concat(substring(@identifier, 7), '.')" />
      </label>
      <div class="optionContent">
        <xsl:apply-templates />
      </div>  
    </div>
  </xsl:template>

  <!-- the first p in a simpleChoice will just output its contents -->
  <xsl:template match="qti:simpleChoice/qti:p[1]">
    <xsl:apply-templates />
  </xsl:template>

</xsl:stylesheet> 
```

输出（见[http://www.xmlplayground.com/IiKDkY](http://www.xmlplayground.com/IiKDkY)）

```
<root>
  <div id="option1">
    <label>A.</label>
    <div class="optionContent"> answer's first P tag <p> answer's second P tag</p> <p> answer's third P tag</p> <p> answer's forth P tag</p> and text without p tag</div>
  </div>
  <div id="option2">
    <label>B.</label>
    <div class="optionContent"> answer's first P tag <p> answer's second P tag</p> <p> answer's third P tag</p> <p> answer's forth P tag</p> and text without p tag</div>
  </div>
  <div id="option3">
    <label>C.</label>
    <div class="optionContent"> answer's first P tag <p> answer's second P tag</p> <p> answer's third P tag</p> <p> answer's forth P tag</p> and text without p tag</div>
  </div>
  <div id="option4">
    <label>D.</label>
    <div class="optionContent"> answer's first P tag <p> answer's second P tag</p> <p> answer's third P tag</p> <p> answer's forth P tag</p> and text without p tag</div>
  </div>
  <div id="option5">
    <label>E.</label>
    <div class="optionContent"> answer's first P tag <p> answer's second P tag</p> <p> answer's third P tag</p> <p> answer's forth P tag</p> and text without p tag</div>
  </div>
</root> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T07:44:14.557

> 我需要的期望输出是从“simpleChoice”标签中删除第一个“p”标签。

我希望我正确理解了您的问题-您想首先显示 P ，例如 DIV 或 SPAN 没有任何边距等，对吗？

那么我认为更好的方法是按`<simpleChoice>...</simpleChoice>`原样使用内容。但是在您的 CSS 文件中`<div class="optionContent">`为第一个 P 标签应用附加样式。像这样的东西：

```
.optionContent > p
{
    display: inline;
} 
```

# android - Android WebView 中的 WebSocket

> ID：13507438
> 
> 赞同：14
> 
> 时间：2012-11-22T07:07:36.250
> 
> 标签：android, webview, websocket

今天我的问题是我正在开发一个使用 WebSocket 的应用程序。在 iOS 上一切正常，但在 android 上 WebView 不支持 WebSocket。解决这个问题的最快/最优雅的方法是什么？

**[编辑]**

由于这篇文章经常被查看，我想分享一些可能的解决方案。

**解决方案：**

1.  Java Websocket 客户端实现 & JavaScript 接口
2.  PHP Websocket 客户端实现 & 向 PHP 脚本发出背景（即 jQuery GET）请求*（对我有用，因为我只想发送一行消息。）*

**Android Websocket 库**

3.  [http://autobahn.ws/](http://autobahn.ws/)
4.  [http://code.google.com/p/weberknecht](http://code.google.com/p/weberknecht)

**有人遇到了同样的问题，并描述了他的工作方式**

5.  [http://chpeck.tumblr.com/post/37273036645/socket-io-with-android-webview](http://chpeck.tumblr.com/post/37273036645/socket-io-with-android-webview)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-23T10:52:31.670

我创建了一个示例项目，它将 WebSocket 对象添加到用于 phonegap 的 WebView。你可以在这里找到它： [https ://github.com/pusher/pusher-phonegap-android](https://github.com/pusher/pusher-phonegap-android)

我在这里放了一个关于该项目的视频：http: [//blog.pusher.com/2012/7/5/pusher-on-phonegap-for-android](http://blog.pusher.com/2012/7/5/pusher-on-phonegap-for-android)

我使用这个项目来演示如何在 Android 上将 PhoneGap 与[Pusher](http://pusher.com)一起使用，但最终它只是一个恰好包含 Pusher 脚本标签的项目。**您可以轻松地使用另一个需要该`WebSocket`对象**的库，或者直接使用它。

它使用 websocket-android-phonegap 库： [https ://github.com/anismiles/websocket-android-phonegap](https://github.com/anismiles/websocket-android-phonegap)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T07:13:16.743

Android webview 不支持 WebSocket。所以你需要用一些 WebSocket 库来实现。

jWebSocket [http://jwebsocket.org/](http://jwebsocket.org/)

weberknecht [http://code.google.com/p/weberknecht/](http://code.google.com/p/weberknecht/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-30T08:30:13.180

首先检查您的错误代码；如果代码是：ERR_CLEARTEXT_NOT_PERMITTED；尝试将 android:usesCleartextTraffic="true" 添加到 AndroidManifest.xml 中的应用程序标记，如下所示：

```
 <application
    android:allowBackup="true"
    android:icon="@mipmap/ic_launcher"
    android:theme="@style/AppTheme"
    android:usesCleartextTraffic="true"> 
```

# sql-server - 无法通过 openxml 将 xml 记录获取到临时表中

> ID：13507441
> 
> 赞同：0
> 
> 时间：2012-11-22T07:07:58.137
> 
> 标签：sql-server, xml

我有以下 XML

```
<NewDataSet>
<data name="AC_Capacity_Creation_Notification.Text">
    <value>Activation successfull and sent for approval.</value>
    <comments>AC Capacity</comments>
</data>
<data name="AC_Capacity_Modification_Daily_Notification.Text">
   <value>Approved successfully..</value>
   <comments>AC Capacity</comments>
 </data>
 <data name="AC_Capacity_Modification_Schedule_Notification.Text">
   <value>Are you sure you want to close this form?</value>
   <comments>AC Capacity</comments>
   </data>
 </NewDataSet> 
```

我想将此 XML 中的数据获取到临时表中，我可以从中进一步查询，但无法这样做

我试过这样做：

```
 EXEC sp_xml_PrepareDocument @intHandle OUTPUT, @XML    

  SELECT * into #tmp FROM OPENXML(@intHandle, '/NewDataset/data',2)

  EXEC sp_xml_removedocument @intHandle   

  drop table #tmp 
```

但我得到空行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:44:22.810

只需使用本机 XQuery - 更简单！

```
DECLARE @Input XML = '<NewDataSet>
<data name="AC_Capacity_Creation_Notification.Text">
    <value>Activation successfull and sent for approval.</value>
    <comments>AC Capacity</comments>
</data>
<data name="AC_Capacity_Modification_Daily_Notification.Text">
   <value>Approved successfully..</value>
   <comments>AC Capacity</comments>
 </data>
 <data name="AC_Capacity_Modification_Schedule_Notification.Text">
   <value>Are you sure you want to close this form?</value>
   <comments>AC Capacity</comments>
   </data>
 </NewDataSet>'

SELECT
    VALUE = NDSData.value('(value)[1]', 'varchar(200)'),
    Comments = NDSData.value('(comments)[1]', 'varchar(200)')
INTO 
    #temp
FROM
    @Input.nodes('/NewDataSet/data') AS Tbl(NDSData) 
```

给我一个输出：

![在此处输入图像描述](../Images/9e9d779b86398efb8df4140cfe61a64f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:13:03.603

我就是这样做的

```
 SELECT T.N.value('@name', 'varchar(100)')name,
  T.N.value('value[1]', 'varchar(100)')value
 FROM @XML.nodes('/NewDataSet/data') AS T(N) 
```

它有效..谢谢大家的回答。

# sql - 如何在 SQL Server 2008 中转换 Date.Now.ToString("yyyy_MM_yy_HH_mm_ss_ms")？

> ID：13507442
> 
> 赞同：0
> 
> 时间：2012-11-22T07:08:01.790
> 
> 标签：sql, sql-server, datetime, formatting, sql-server-2008-r2

我有一个 C# 语句：

```
Date.Now.ToString("yyyy_MM_yy_HH_mm_ss_ms") 
```

现在，我需要在 SQL Server 2008 R2 中使用它。我知道我可以`GETDATE`用于当前日期。但无法获得这种格式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T07:11:50.267

尝试这个：

```
select cast(year(getdate()) as char(4))+'_'+
       case when month(getdate())<10 then '0'+cast(month(getdate()) as char(1)) else cast(month(getdate()) as char(2)) end+'_'+
       right(cast(datepart(yy,getdate()) as char(4)),2)+'_'+
       replace(replace(right(convert(varchar(22),getdate(),121),11),':','_'),'.','_') 
```

### [SQL小提琴演示](http://sqlfiddle.com/#!3/d41d8/6570)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T07:28:37.487

在这里试用功能

阅读有关此的更多信息：[SQL Server 2008 中的格式化日期](http://www.databasejournal.com/features/mssql/article.php/3820771/Formatted-date-in-SQL-Server-2008.htm)

```
/****** Object:  UserDefinedFunction [dbo].[format_date]    Script Date: 05/12/2009 23:19:35 ******/
IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(N'[dbo].[format_date]') AND type in (N'FN', N'IF', N'TF', N'FS', N'FT'))
DROP FUNCTION [dbo].[format_date]
GO

/****** Object:  UserDefinedFunction [dbo].[format_date]    Script Date: 05/12/2009 23:19:18 ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

SET CONCAT_NULL_YIELDS_NULL OFF
go
CREATE function [dbo].[format_date] (@inputdate datetime ,@format varchar(500))
returns varchar(500)
as
begin
declare @year varchar(4)                --YYYY
declare @shortyear varchar(4)           --Yr
declare @quarter varchar(4)             --QQ
declare @month varchar(2)               --MM
declare @week varchar(2)                --WW
declare @day varchar(2)                 --DD
declare @24hours varchar(2)             --24HH
declare @12hours varchar(2)             --HH
declare @minutes varchar(2)             --MI
declare @seconds varchar(2)             --SS
declare @milliseconds varchar(3)        --MS
declare @microseconds varchar(6)        --MCS
declare @nanoseconds varchar(9)         --NS
declare @dayname varchar(15)            --DAY
declare @monthname varchar(15)          --MONTH
declare @shortmonthname varchar(15)     --MON
declare @AMPM    varchar(15)            --AMPM
declare @TZ  varchar(15)                --TZ
declare @UNIXPOSIX   varchar(15)        --UNIXPOSIX
                                        --UCASE
                                        --LCASE

declare @formatteddate varchar(500)     

--Assign current date and time to 
if (@inputdate is NULL or @inputdate ='')
begin
set @inputdate = getdate()
end

if (@format is NULL or @format ='')
begin
set @format ='YYYY-MM-DD 12HH:MI:SS AMPM'
end

--set all values

set @year         = convert(varchar(4),year(@inputdate))
set @shortyear    = right(@year,2)
set @quarter      = convert(varchar(1),datepart(QQ,(@inputdate)))
set @month        = right('0'+convert(varchar(2),month(@inputdate)),2)
set @week         = right('0'+convert(varchar(2),datepart(ww,(@inputdate))),2)
set @day          = right('0'+convert(varchar(2),day(@inputdate)),2)
set @24hours      = right('0'+convert(varchar(2),datepart(hh,@inputdate)),2)
set @TZ           = convert(varchar(10),datename(TZ,convert(varchar(20),@inputdate)))
set @UNIXPOSIX    = convert(varchar(15),datediff(ss,convert(datetime,'01/01/1970 00:00:000'),@inputdate))

if datepart(hh,@inputdate) >12
begin
set @12hours      = right('0'+convert(varchar(2),datepart(hh,@inputdate)) -12,2)
end
else
begin
set @12hours      = right('0'+convert(varchar(2),datepart(hh,@inputdate)) ,2)
end

if datepart(hh,@inputdate) >11 
begin
set @AMPM ='PM'
end
else
begin
set @AMPM ='AM'
end

set @minutes      = right('0'+convert(varchar(2),datepart(n,@inputdate)),2)
set @seconds      = right('0'+convert(varchar(2),datepart(ss,@inputdate)),2)
set @milliseconds = convert(varchar(3),datepart(ms,@inputdate))
set @microseconds = convert(varchar(6),datepart(mcs,@inputdate))
set @nanoseconds  = convert(varchar(9),datepart(ns,@inputdate))
set @dayname      = datename(weekday,@inputdate)
set @monthname    = datename(mm,@inputdate)
set @shortmonthname= left(datename(mm,@inputdate),3)
set @formatteddate = @format
set @formatteddate=replace(@formatteddate,'MONTH',@monthname)
set @formatteddate=replace(@formatteddate,'MON',@shortmonthname)
set @formatteddate=replace(@formatteddate,'AMPM',@AMPM)

set @formatteddate=replace(@formatteddate,'YYYY',@year)
set @formatteddate=replace(@formatteddate,'Yr',@shortyear)
set @formatteddate=replace(@formatteddate,'QQ',@quarter)
set @formatteddate=replace(@formatteddate,'WW',@week)
set @formatteddate=replace(@formatteddate,'MM',@month)
set @formatteddate=replace(@formatteddate,'DD',@Day)
set @formatteddate=replace(@formatteddate,'24HH',@24hours)
set @formatteddate=replace(@formatteddate,'12HH',@12hours)
set @formatteddate=replace(@formatteddate,'Mi',@minutes)
set @formatteddate=replace(@formatteddate,'SS',@seconds)
set @formatteddate=replace(@formatteddate,'MS',@milliseconds)
set @formatteddate=replace(@formatteddate,'MCS',@microseconds)
set @formatteddate=replace(@formatteddate,'NS',@nanoseconds)
set @formatteddate=replace(@formatteddate,'DAY',@dayname)
set @formatteddate=replace(@formatteddate,'TZ',@TZ)
set @formatteddate=replace(@formatteddate,'UNIXPOSIX',@UNIXPOSIX)

if charindex('ucase',@formatteddate)<>0
begin
set @formatteddate=replace(@formatteddate,'ucase','')
set @formatteddate=upper(@formatteddate)
end

if charindex('lcase',@formatteddate)<>0
begin
set @formatteddate=replace(@formatteddate,'lcase','')
set @formatteddate=lower(@formatteddate)
end

return @formatteddate
end

GO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T07:11:55.853

尝试这个

```
SELECT CONVERT(VARCHAR(19), SYSDATETIME(), 120) 
```

对于 YYYY-MM-DD HH:MI:SS(24h) 格式

请参阅此处了解不同的格式

[http://www.sql-server-helper.com/sql-server-2008/sql-server-2008-date-format.aspx](http://www.sql-server-helper.com/sql-server-2008/sql-server-2008-date-format.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T07:19:56.343

尝试这个：

```
 select cast(DATEPART(yy,getdate()) as CHAR(4))+'_'+
           cast(DATEPART(mm,getdate()) as CHAR(2))+'_'+
           right(cast(DATEPART(yy,getdate()) as CHAR(4)),2)+'_'+
           cast(DATEPART(HH,getdate()) as CHAR(2))+'_'+
           cast(DATEPART(mi,getdate()) as CHAR(2))+'_'+
           cast(DATEPART(ss,getdate()) as CHAR(2))+'_'+
           cast(DATEPART(MILLISECOND ,getdate()) as CHAR(5)) 
```

# java - @CascadeOnDelete 和 CascadeType.REMOVE 注释有什么区别？

> ID：13507445
> 
> 赞同：10
> 
> 时间：2012-11-22T07:08:18.017
> 
> 标签：java, sql, jpa, eclipselink

起初，我希望`CascadeType.REMOVE`我能够删除表中的外键，但我还是遇到了一个例外。但是`@CascadeOnDelete`没关系。这两个注释有什么区别？

*编辑：*我已经看到了 DataNucleus 的评论。删除时的级联来自`org.eclipse.persistence.annotations.CascadeOnDelete`。这提出了如何使用好主意的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T07:27:15.613

当您使用 CascadeType.Remove 时，级联将由 ORM 工具处理，但当您希望由数据库处理级联时，您可以使用 @CascadeOnDelete.but 当您使用 @CascadeOnDelete 时，请确保您使用的数据库using 应该支持级联。

# c++ - 向量中包含的对象有什么要求

> ID：13507453
> 
> 赞同：1
> 
> 时间：2012-11-22T07:09:13.933
> 
> 标签：c++, vector, c++11, stdvector

Herb Sutter 在 Exceptional C++ 中写道`auto_ptr`：

> 问题是 auto_ptr 不能完全满足可以放入容器的类型的要求，因为 auto_ptr 的副本不等价。

这本书是针对 C++03 编写的，我想知道这是否仍然有效，因为这段代码似乎可以在 GCC 4.7.1 下完美编译：

```
#include <vector>

struct Foo
{
    Foo() { }
    Foo( Foo&& ) { }
    Foo( Foo& ) = delete;
    Foo& operator= (Foo&&) { return *this; }
    Foo& operator= (Foo&) = delete;
};

int main()
{
    std::vector<Foo> bar;
    bar.push_back(Foo());
} 
```

但是接受可移动但不可复制的对象也可能是 GCC 扩展。我不确定。`std::vector`对对象有什么要求？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T07:30:06.793

为了能够使用`std::vector<Foo>::push_back()`，类型`Foo`需要是`MoveInsertable`or `CopyInsertable`（23.2.1 [container.requirements.general] 第 13 段）根据 23.2.3 [sequence.rqmts] 第 16 段（表 101）。显然，提供`MoveInsertable`模型要求您使用`push_back()`r 值，可能使用`std::move(x)`. 也就是说，您甚至不需要移动赋值运算符就可以使用`std::vector<...>::push_back()`. 我认为并非所有标准库都正确地考虑到后一部分并委托给`insert()`：`insert()`根据 C++ 2011 标准，委托给不起作用，因为`insert()`还需要类型为`MoveAssignable`or `CopyAssignable`。

不幸的是，尝试搜索无法为我指向表 101 ，`push_back`因为名称被分成换行符......`push_``back()`

# c# - 将基类强制转换为 ISerializable

> ID：13507456
> 
> 赞同：0
> 
> 时间：2012-11-22T07:09:25.507
> 
> 标签：c#, .net, serialization

我已经在子类和父类中实现了 ISerializable，如下所示：

```
class CircuitElement : ISerializable
{
    ...
    protected void ISerializable.GetObjectData(SerializationInfo info, StreamingContext context)
    {
        if (info == null)
            throw new ArgumentNullException("info");
        info.AddValue("ID", ID);
    }
}

class Bus : CircuitElement, ISerializable
{
    ...
    void ISerializable.GetObjectData(SerializationInfo info, StreamingContext context)
    {
        if (info == null)
            throw new ArgumentNullException("info");
        ((ISerializable)base).GetObjectData(info,context);
        info.AddValue("Voltage", Voltage);
        info.AddValue("BaseVoltage", BaseVoltage);
        info.AddValue("Location", Location);
    }
} 
```

但是在子类`Bus`中，我遇到了错误`Use of keyword base is not valid in this context`。我知道我可以在父`CircuitElement`类上隐式实现接口，然后我不必担心转换，但我的印象是显式实现更适合这种情况（原因类似于此处介绍的原因：[https://stackoverflow.com/a/143425/996592](https://stackoverflow.com/a/143425/996592)）

有没有办法进行转换，或者我是否`ISerializable`隐式地在父类中实现接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:14:52.267

就个人而言，我不同意您所链接的答案中提出的观点。显式接口实现更成问题，这*正是*您给出的原因：它确实不能很好地与继承配合使用。

如果您要重新实现已显式实现的接口，则*无法*在重新实现相同接口的类型的对象上调用该实现，包括从该重新实现的代码中。

两种选择：

*   请改用隐式接口实现。我个人通常觉得这更简单。我只在接口有成员时才使用显式接口实现，而当你考虑类本身时，这些成员实际上没有意义。

*   继续使用显式接口实现，但使该实现*只*调用受保护的虚拟方法。然后，您可以在派生类中覆盖该虚拟方法并调用基实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:24:02.037

您不需要使用`"base"`关键字进行转换。实际上，您不能`"base"`在这种情况下使用关键字。如果你想包含父信息，你应该简单地调用基方法，如果你**以隐式方式**`"base.GetObjectData"` **实现`"ISerializable"`**接口，它将调用具有调用者实例所有者的父方法。

这种行为是面向对象模型中的简单事物之一，您无法更改它。另一方面，您可以使用`"virtual"`关键字并尝试覆盖父方法（在这种情况下，我认为您不需要此方法）。

我认为您应该在 stackoverflow 上查看[这里](https://stackoverflow.com/questions/143405/c-interfaces-implicit-and-explicit-implementation?lq=1)，关于实现接口的方式有一些很好的答案。

在 MSDN 上还有一本关于**多态性**[的](http://msdn.microsoft.com/en-us/library/ms173152%28v=vs.80%29.aspx)完美手册。它将帮助您了解为什么不能转换`"base"`，并且您会找到一些技术以其他指定的方式进行转换。

**我的点子：**

使用`"dynamic"`关键字 and`"ExpandoObject"`是创建动态模型并在其上执行序列化操作的更好主意。在我个人看来，它在许多情况下要快得多，而且实现起来也很简单。

希望它有所帮助。

# pentaho - 具有 clickview 和 dragview 功能的 pentaho cde 仪表板图表

> ID：13507457
> 
> 赞同：0
> 
> 时间：2012-11-22T07:09:25.750
> 
> 标签：pentaho, dashboard-designer

我是 Penatho BI 的新手，我正在使用 pentaho CDE 工具来创建仪表板报告。如何使用单击视图或拖动视图功能创建仪表板条形图。即每当我们在条形图中的任何一个条上进行鼠标拖动时，它都会显示详细的视图报告或数据。

请帮助我。

在此先感谢， 苏雷什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-27T07:57:25.347

您曾经使用过 CDE 仪表板吗？Ctools 支持良好的 javascript 仪表板

# c# - 当asp.net页面中的按钮单击事件时不显示Div？

> ID：13507461
> 
> 赞同：1
> 
> 时间：2012-11-22T07:09:59.707
> 
> 标签：c#, javascript, asp.net, html

在我的 ASP 页面中，我创建了一个按钮，在该按钮的单击事件中，我想显示我的 div 标签部分。实际上，该 Div 部分包含一个文本框和两个按钮。

这是我的 aspx 页面内容：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
<style type="text/css">
#popup
{
    display:none;
    position: fixed;
    width:250px;
    height: 150px;
    top: 50%;
    left: 50%;
    margin-left:-155px;
    margin-top:-110px;
    border:5px solid red;
    background-color:#DEDFDE;
    padding:30px;
    z-index:102;
    font-family:Verdana;
    font-size:10pt;
    -webkit-border-radius:20px;
    -moz-border-radius:20px;
    font-weight:bold;
}
#content
{
    height:auto;
    width:250px;
    margin:60px auto;
}
#popupclose
{
    margin:35px 0 0 80px;
    width:50px;

}
</style>
</asp:Content>

<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

<script type="text/javascript" language="javascript">
    function ShowPopUp()
    {
      $('#popup').show("slow");
    }

    function hidePopUp()
    {
       $('#popup').hide("slow");
    }
</script>

    <asp:Button ID="Button1" runat="server" Text="Button" onclick="Test">
    </asp:Button>

   <div id="popup">
        <div id="content">
            <input type="text"/><input type="button" value="Browse"/>
            <input id="popupclose" type="button" value="Close" onclick="hidePopUp();/>   
        </div>   
   </div>

</asp:Content> 
```

我的 C# 代码如下：

```
 protected void Test(object sender,EventArgs e)
        {
         ClientScript.RegisterStartupScript(GetType(), "popup", "ShowPopUp()", true);
        } 
```

但是每当我单击按钮时，Div 部分都没有出现......我不知道这里有什么问题......

请指导我摆脱这个问题......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T07:17:20.877

你为什么不应该`OnClientClick`像这样在你的 asp.net 按钮中使用

```
<asp:Button ID="Button1" runat="server" Text="Button" OnClientClick="ShowPopUp(); return false;"> </asp:Button> 
```

# c++ - 使用 MySQL C API 生成的共享库时，c++“未在此范围内声明错误

> ID：13507466
> 
> 赞同：-2
> 
> 时间：2012-11-22T07:10:20.923
> 
> 标签：c++, shared-libraries, libmysql

我生成了一个包含 MySQL C API 函数的共享库。它有一个像这样的 sample.h 和 sample.cpp 文件

```
using namespace std;
class MysqlInstance
{
    protected:
    string user;
    string password;
    string socket;
    int port;

    public:
    MySqlInstance(string,string,string,port);
    int connectToDB();
 } 
```

在 sample.cpp

```
MySqlInstance::MySqlInstance(string user,string pass,string sock,int port)
{
 this->port=port;
 this->user=user;
 this->password=pass;
 this->socket=sock;
}
MySqlInstance::connectToDB()
{
 //code to load libmysqlclient.so from /usr/lib64 and use mysql_init and mysql_real_connect 
 // functions to connect and "cout" that connection is successful
} 
```

用过的：

*   g++ -fPIC -c 示例.cpp`mysql_config --cflags`

*   g++ -shared -Wl,-soname,libsample.so -o libsample.so sample.o`mysql_config --libs`

现在生成了 libsample.so 并将其移至 /usr/lib 现在我创建了一个小 cpp 文件，该文件在同一目录中使用此共享库。 **使用sample.cpp**

```
#include "sample.h"
using namespace std;
int main()
{
 MysqlInstance* object=new MySQlInstance("root","toor","/lib/socket",3306);
} 
```

用过的：

*   g++ -c usesample.cpp -lsample

它给了我这个错误：

> 错误：未在此范围内声明“MysqlInstance”错误：未在此范围内声明对象

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:14:00.960

好吧，您的类已命名`MysqlInstance`，但在您的 main() 中您将其称为`MySQlInstance`，并且在您的 cpp 实现中您有`MySqlInstance`.

C++ 区分大小写，因此请确保在任何地方都使用正确的标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:16:28.510

你有几个错误。一、是构造函数声明

```
 MySqlInstance(string,string,string,port); 
```

你大概是说

```
MySqlInstance(string,string,string,int); 
```

然后，定义，你有`port`错误的类型：

```
MySqlInstance::MySqlInstance(string user,string pass,string sock,string port) { .... }
                                                              //   ^ should be int 
```

然后，类名

```
class MyqllInstance { .... }; 
```

应该

```
class MySqlInstance { .... }; 
```

然后，您正在使用`MySQlInstance`in`main`但您的课程是`MySqlInstance`.

请记住，C++**不区分大小写**。

最后，不要放入`using namespace std`头文件。事实上，不要把它放在任何地方。

# c# - 右键单击文件以使用 .NET 程序打开它

> ID：13507467
> 
> 赞同：2
> 
> 时间：2012-11-22T07:10:21.483
> 
> 标签：c#, .net, c#-4.0, .net-4.0

例如，如果我使用 .NET Framework 制作了一个压缩器。我如何能够右键单击一个文件夹并在压缩器中打开它来压缩它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:13:33.800

您需要将文件类型（基于扩展名）与您的压缩器应用程序相关联。

有关详细信息，请查看文章[了解 MS Windows 文件关联](http://technet.microsoft.com/en-us/library/cc749986.aspx)。

它需要一些注册表项修改，这可以从安装程序应用程序中完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:18:24.940

在下面添加一个键`HKCR / filetype / Shell` **（其中 filetype 是与文件扩展名关联的文件类型，例如 jpegfile）**

有关更多详细信息，请检查：[在右键单击时添加上下文菜单](http://www.codeproject.com/Articles/10104/Add-a-context-menu-to-the-Windows-Explorer)

# asp.net-mvc - 如何在 kendoUI 的下拉列表中动态添加颜色标志

> ID：13507470
> 
> 赞同：0
> 
> 时间：2012-11-22T07:10:38.977
> 
> 标签：asp.net-mvc, kendo-ui

我在列表视图中使用颜色下拉列表。在此下拉列表中，从数据源中，我可以显示数据库中的颜色。我想要的是，在下拉列表中，对于每个值，我想显示颜色的名称和用这种颜色填充的方形框。我已经实现了以下显示下拉菜单，

```
 <select STYLE="width:90px;height:auto" id="Flag" data-bind="value:prj_flag"  data-text-field="usr_color"  data-value-field="usr_id" data-source="FlagdatSource" data-role="dropdownlist"></select> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T20:14:53.010

您应该创建服务器以不仅返回这些颜色的文本，还返回颜色代码。然后，您需要做的就是创建一个模板。

[在这里它在起作用，](http://jsbin.com/edamuj/88/edit)唯一的区别是它使用本地数据（不是来自服务器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:39:41.477

你知道如何定义它**不**使用 KendoUI 吗？我的意思是，如果你知道如何使用 HTML 来做到这一点，`select`那么你应该能够在 KendoUI 中使用`template`in实现相同的功能`DropDownList`（检查[KendoUI DropDownList](http://docs.kendoui.com/api/web/dropdownlist#template-string)）。这样做，您将问题简化为 CSS 问题而不是 KendoUI。

# sockets - 在不同程序中运行时选择始终返回 0

> ID：13507473
> 
> 赞同：2
> 
> 时间：2012-11-22T07:10:54.183
> 
> 标签：sockets

我面临一个奇怪的问题，也许它很简单，但我缺乏太多的套接字知识也无济于事。

我创建了一个套接字程序，它在单独的程序中运行时完美运行，即在 main 中作为独立的 exe 单独运行。正如您在代码中看到的，在这个单独的程序中运行时，返回的套接字 fd 始终为 3。

当我复制同一段代码并将其集成到另一个打开了它自己的 fd 的服务器程序时，无论如何选择总是返回 0。在这种情况下，我的程序创建的 fd 始终为 6。

请参阅下面的程序。这段代码没有问题，只是在另一个服务器中运行时，select总是返回0。

当程序中已经存在一个 UDP 套接字 fd 时，我可以创建一个新的 UDP 套接字 fd。当我的套接字 fd 与程序中已经打开的套接字不同时，为什么会发生这种情况。

为什么会发生这种情况，任何人都可以指导我该怎么做，或者任何指示都会有所帮助。

```
#define MY_TIMEOUT_S    5   
    int mySock;
    if ((mySock = socket(AF_INET, SOCK_DGRAM, 0)) == -1) {
        perror("Cannot create UDP socket");
        return -1;
    }

    struct sockaddr_in myAddr;
    myAddr.sin_family       = AF_INET;
    myAddr.sin_port         = 0;
    myAddr.sin_addr.s_addr  = INADDR_ANY;
    memset(&(myAddr.sin_zero), '\0', 8);
    if (bind(mySock, (struct sockaddr*)&myAddr, 
            sizeof(struct sockaddr)) == -1) {
        perror("Cannot bind UDP socket to desired port");
        close(mySock);
        return -1;
    }

    // here send to remote target host on udp socket and port 

    char buf[MAX_UDP_PACKET_SIZE];
    struct sockaddr_in theirAddr;
    int addrLen = sizeof(struct sockaddr);

    fd_set readSet, curReadSet;
    FD_ZERO(&readSet);
    FD_SET(mySock, &readSet);
    int maxFD = mySock;
    while (true) {
        struct timeval timeOutTV = {MY_TIMEOUT_S, 0};

        memcpy(&curReadSet, &readSet, sizeof(fd_set));

        int selectRet = select(maxFD+1, &curReadSet, NULL, NULL, &timeOutTV);
        cout<<"select value =" <<selectRet<<endl;

        if (selectRet == -1) {
            if (errno == EINTR) {
                continue; // Interrupted by signal, retry
            }
            close(mySock);
            return -1;

        } else if (selectRet == 0) {
            close(mySock);
            return -1;
        }
        if (FD_ISSET(mySock, &curReadSet)) {
            int numBytes = recvfrom(mySock, buf, MAX_UDP_PACKET_SIZE, 0,
                    (struct sockaddr*)&theirAddr, (socklen_t*)&addrLen);
            if (numBytes == -1) {
                close(mySock);
            }   

        }
    } 
```

从 lsof 输出添加一些细节

1）这是我必须发送数据的目标 sudo lsof -a -p 16061

目标 16061 根 3r FIFO 0,8 0t0 153467 管道
目标 16061 根 4u IPv4 153470 0t0 UDP *:3290
目标 16061 根 5u sock 0,6 0t0 153471 无法识别协议
目标 16061 根 6u IPv4 153472 0t0 TCP *:3290 ( )
目标 16061 根 7u 原始 0t0 153473 00000000:0001->00000000:0000 st=07

2）这是我在单独的exe中运行时的上述代码，其中只有这是在main中运行的代码，因为FD = 3工作正常

须藤 lsof -a -p 16112

myProg 16112 根 0u CHR 136,4 0t0 7 /dev/pts/4
myProg 16112 根 1u CHR 136,4 0t0 7 /dev/pts/4
myProg 16112 根 2u CHR 136,4 0t0 7 /dev/pts/4
myProg 16112根 3u IPv4 153564 0t0 UDP *:60503

3）这是我在其中集成了上面相同的代码的 Web 服务器，它独立工作，但现在不是

这是我的网络服务器运行的输出

webServ 18431 root 3u unix 0xc09f9b00 0t0 157975 socket
webServ 18431 root 4u IPv4 157976 0t0 UDP *:8080
webServ 18431 root 5u IPv4 157977 0t0 TCP *:8080 (LISTEN)

现在我发送请求并在服务器端执行我的新集成代码，我放置了一个无限循环并且没有关闭套接字只是为了显示 lsof 输出

4）我整合后的输出

webServ 18449 root 3u unix 0xc09f9b00 0t0 157975 socket
webServ 18449 root 4u IPv4 157976 0t0 UDP *:8080
webServ 18449 root 5u IPv4 157977 0t0 TCP *:8080 (LISTEN)
webServ 18449 root 6u IPv4 *:158038

唯一的区别是当集成到服务器时，socket FD 是不同的，这是唯一的区别。

希望这有助于回答我的问题。

我不确定为什么会这样。请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:16:15.217

也许`select`会有`maxFd + 1`帮助？

**编辑**：我再次查看了您的代码（尽管您现在可能已经自己解决了）。我有三个建议。

首先，当您`bind`使用套接字时，`myAddr.sin_port`是`0`. 因此选择了一个临时端口号。此端口号在您的 myProg 和 webServ 程序之间有所不同：

```
myProg  16112 root 3u IPv4 153564 0t0 UDP *:60503  
webServ 18449 root 6u IPv4 158389 0t0 UDP *:48057 
```

因此，我对您一直使用哪个端口号将 UDP 发送到 myProg 感到困惑。

其次，您的超时时间为`select`5 秒，之后您关闭套接字并离开。你怎么知道你会在打开端口的 5 秒内收到一个数据包？为了确保这一点，发送程序将需要（例如）连续尝试每 4 秒或更短时间发送一个数据包，这似乎不合理。

第三，这可能是一个小问题，但可能是你的问题，在：

```
 if (numBytes == -1) {
            close(mySock);
        } 
```

您省略了在其他地方使用的，因此如果返回诸如 EINTR 之类的错误，`return -1;`您将陷入无限循环。`recvfrom`此外，在这里和其他地方打电话`perror`会很好。

最后是评论：

```
 // here send to remote target host on udp socket and port 
```

不正确，您正在*接收*.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:16:28.673

做到这一点：

```
int maxFD = mySock + 1; 
```

select(2)的[手册页](http://linux.die.net/man/2/select)说：

> ```
> int select(int nfds, fd_set *readfds, fd_set *writefds,
>            fd_set *exceptfds, struct timeval *timeout); 
> ```
> 
> *nfds*是三组中编号最高的文件描述符，**加上 1**。

# java - org.apache.axis2.AxisFault：映射 qname 不喜欢包：org.hibernate.collection

> ID：13507478
> 
> 赞同：1
> 
> 时间：2012-11-22T07:11:35.653
> 
> 标签：java, hibernate, axis2

我的 POJO 中有一组（java 集合），这个 POJO 映射到 hbm 文件中。当我调用我的 Web 服务时，它将通过以下错误 org.apache.axis2.AxisFault: Mapping qname not like the package: org.hibernate.collection

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T11:19:36.237

1) 实际上，Web 服务的 Method 的返回类型应该是非泛型的。

它不应该是 Object ，或者只是一个 List ...

所以，返回一个特定的 Person 类对象 ..如果 Person 类的一个对象需要返回或者对象列表是否存在......使用...列表作为 List

改变....享受....!!!!!!

2）这个异常也可能存在因为已经完成的映射......您的数据库表包含尚未映射的记录（只是简单地插入......）删除它们

# android - get 方法不返回正确的结果

> ID：13507486
> 
> 赞同：1
> 
> 时间：2012-11-22T07:12:01.410
> 
> 标签：android, asp.net, html

我正在尝试为我无法控制的网站构建一个 android 客户端。我只能使用 httpwatch 来检测数据流并决定使用`post`方法或方法`get`。

这里我遇到一个问题，登录网站后，我点击一个按钮加载一些数据（浏览器中的url没有改变，命名为url-1），它运行良好，httpwatch告诉它正在使用`get`方法带有目标 url（另一个，将其命名为 url-2）。如果我将 url(url-2) 粘贴到浏览器中，它会返回登录页面而不加载任何数据。我查了html源码，找到了`iframe`可能是用来实现本地刷新的标签。

在android中，我使用`httpclient`or `post`，`get`我可以登录并保持与服务器的连接，但是当我尝试使用`get`方法加载一些新数据时失败，它也返回登录页面。

为什么会这样，有什么方法可以得到正确的答案吗？</p>

# c# - 获取子列表条件列表

> ID：13507490
> 
> 赞同：3
> 
> 时间：2012-11-22T07:12:15.420
> 
> 标签：c#, .net, linq

我有两个列表 listA 是一个列表`MyClassA`和 listB`MyClassB`

`MyClassA`具有属性：

*   ID
*   姓名

`MyClassB`具有属性：

*   ID
*   姓名
*   积极的
*   MyClassAId

一个项目`MyClassA`可以有一个或多个项目 MyClassB

```
- MyClassA
    |
    | MyClassB
    | MyClassB
- MyClassA
    |
    | MyClassB
    | MyClassB
    | MyClassB
    | MyClassB 
```

我想得到一个列表，`MyClassA`其中的项目数`MyClassB`> `active = true`1

我试过这样的事情：

```
listA.Where(b => listB.Any(a => a.MyClassAId == b.Id && a.Active == true)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:19:21.087

`Any`将 > 0。对于 > 1，您可以执行以下操作：

```
listA.Where(a => listB.Count(b => b.MyClassAId == a.Id && b.Active) > 1); 
```

或更好的短路（但对于 LINQ-to-Objects 可能很好，但不是 EF 等）：

```
listA.Where(
    a => listB.Where(b => b.MyClassAId == a.Id && b.Active).Skip(1).Any()); 
```

另一种方法是预先计算计数：

```
var include = new HashSet<int>(listB.Where(b => b.Active)
                  .GroupBy(b => b.MyClassAId)
                  .Where(grp => grp.Count() > 1)
                  .Select(grp => grp.Key)); 
```

然后：

```
listA.Where(a => include.Contains(a.Id)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:29:19.797

```
var query = (from a in listA let count = listB.Count(b => b.Active && a.Id == b.MyClassAId) where count > 1 select a).ToList(); 
```

# cordova - 如何使用phoneGap为android制作可执行文件？

> ID：13507492
> 
> 赞同：2
> 
> 时间：2012-11-22T07:12:24.373
> 
> 标签：cordova

我有一个 Web 应用程序，想将其转换为原生移动应用程序。我已将所有页面转换为 html5，然后通过 PhoneGap 将它们转换为 android 的原生移动应用程序。

现在我想构建一个 .apk 文件。任何人都可以帮助我如何从 PhoneGap 创建的混合应用程序生成 .apk 文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:16:00.677

如果您创建了一个 PhoneGap 应用程序，它应该是一些 Html / JS。你必须把它放在一个带有一些库的 Android Eclipse 项目中。您可以在以下链接中找到更多信息：
[phonegap Android 入门](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-29T23:38:49.307

将代码上传到 github 并使用的最简单方法：[https ://build.phonegap.com/apps](https://build.phonegap.com/apps)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T11:49:37.477

创建 zip 文件，将所有 HTML 文件、JS 文件、带有 config.xml 和 plugin.xml 的 CSS 文件以 PhongapBuild 提供的特定格式放置。并在几分钟内发送给他们，他们会向您发送 APK 文件。您无需创建其他文件。参考 - [https://build.phonegap.com/apps](https://build.phonegap.com/apps)

# qt - 图像未显示在 QtForm 的中心

> ID：13507493
> 
> 赞同：4
> 
> 时间：2012-11-22T07:12:34.000
> 
> 标签：qt

您好我正在使用 QLabel 在 QtForm 中显示图像。我的代码是这样的

```
QVBoxLayout *layout = new QVBoxLayout;
QHBoxLayout *hLayout = new QHBoxLayout;
layout->setMargin(5);
QLabel *imageLabel = new QLabel;
QPixmap pixmap("/images/test.jpg");
imageLabel->setPixmap(pixmap);
imageLabel->setMask(pixmap.mask());
imageLabel->setMinimumSize(160, 160);
imageLabel->resize(500, 320);

layout->addWidget(imageLabel,0,Qt::AlignTop | Qt::AlignCenter);
hLayout->addItem(layout);

widget->setLayout(hLayout);

scrollArea->setWidget(widget);
setCentralWidget(scrollArea); 
```

但是图像显示在左上角，有人可以建议我将图像置于表格的中心吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T07:18:02.347

我得到了解决方案，

```
QPixmap pixmap("images/test.png");
imageLabel->setPixmap(pixmap);
imageLabel->setMinimumSize(160, 160);
imageLabel->resize(500, 320);
imageLabel->setAlignment(Qt::AlignCenter);

scrollArea->setWidget(widget);
setCentralWidget(imageLabel); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T07:17:17.923

更改 QLabel 内容的对齐方式：

```
imageLabel->setAlignment(Qt::AlignCenter); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-15T23:57:34.643

如果该`setAlignment`功能不能单独使用，请与`setSizePolicy`.

```
imageLabel->setSizePolicy(QSizePolicy::Expanding, QSizePolicy::Preferred);
imageLabel->setAlignment(Qt::AlignCenter); 
```

# bundle - Launch4J 搜索 JRE 的顺序是什么？

> ID：13507494
> 
> 赞同：1
> 
> 时间：2012-11-22T07:12:39.517
> 
> 标签：bundle, javafx-2, java, launch4j

Launch4J 搜索 JRE 的顺序是什么？

我在 DVD 中运送捆绑的 JRE，但是当它使用 DVD 中的 JRE 时速度很慢。我知道 Launch4j 可以选择使用系统中已经可用的 JRE。Launch4J 在 Windows PC 中搜索 JRE 安装的路径是什么？我可以向高级用户指示他们必须在特定位置安装 JRE 吗？

# c++ - FLTK 事件映射/多线程

> ID：13507495
> 
> 赞同：1
> 
> 时间：2012-11-22T07:13:02.263
> 
> 标签：c++, fltk

我是 FLTK 和 C++ 的新手。我需要一些关于如何让活动正常工作的帮助。在其他语言中，您创建一个按钮并定义一个函数，当用户单击它时，该函数将在不同的函数中处理来自 button1 和 button2 的事件。就像向 button1 添加事件监听器并将其映射到 button1_click()。

这是来自多线程环境的一些代码。我想知道如何监听来自 button1 和 button2 的点击并正确处理它们。

此外，通过这种设计，我计划在循环中每 200 毫秒在 GUI 上拥有一个单独的线程更新数据。如果我在这个循环中调用 lock 和 unlock，是否有可能引发异常？

谢谢！！

```
#pragma once

#include <Fl.H>
#include <Fl_Window.H>
#include <Fl_Button.H>
#include <Windows.h>

class MGui
{
    public:
    Fl_Window*  window;
    Fl_Button*  button1;
    Fl_Button*  button2;

    static MGui &i() 
    {
        static MGui sMGui;
        return sMGui;
    }
    static void init() 
    {
        i();
        DWORD dwThreadId;
        CreateThread(NULL, 0, (LPTHREAD_START_ROUTINE) run, (LPVOID) 0, NULL, &dwThreadId); 
    }
    static DWORD_PTR WINAPI run(void *theParam)
    {
        i().window = new Fl_Window(100, 100, 340, 180, "Window");
        i().button1 = new Fl_Button(10, 10, 50, 24, "Button1");
        i().button2 = new Fl_Button(10, 44, 50, 24, "Button2");
        i().window->end();
        i().window->show();
        Fl::run();
        return 0;
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:06:47.127

То 使用需要传递回调函数的按钮执行一些操作：

```
void cancel_callback(Fl_Widget* obj, void* data)
{
..
//do something
..
}
...
cancel = new Fl_Button(x, y, x1, y1, "Cancel");
cancel->callback(cancel_callback,(void*)this); 
```

从线程更新 UI 是不安全的。它应该只从主线程完成。`Fl::awake (Fl_Awake_Handler cb, void *message=0)`在您的 thFn 中使用以在主线程中执行一些回调函数。

```
void updateUI(void *userdata) 
{
...
// update UI
...
}

void* thFn(void* param)
{
...
Fl::awake(updateUI, userdata);
} 
```

# php - PDO PHP从关联数组插入数据库

> ID：13507496
> 
> 赞同：9
> 
> 时间：2012-11-22T07:13:02.783
> 
> 标签：php, mysql, database, arrays, pdo

我有一个这样的数组

```
 $a = array( 'phone' => 111111111, 'image' => "sadasdasd43eadasdad" ); 
```

当我执行 var-dump 时，我得到了这个 ->

```
 { ["phone"]=> int(111111111) ["image"]=> string(19) "sadasdasd43eadasdad" } 
```

现在我正在尝试使用 IN 语句将其添加到数据库中-

```
 $q = $DBH->prepare("INSERT INTO user :column_string VALUES :value_string");
 $q->bindParam(':column_string',implode(',',array_keys($a)));
 $q->bindParam(':value_string',implode(',',array_values($a)));
 $q->execute(); 
```

我遇到的问题是内爆返回一个字符串。但是“电话”列是数据库中的整数，并且数组也将其存储为整数。因此，我收到 SQL 错误，因为我的最终查询如下所示——

```
INSERT INTO user 'phone,image' values '111111111,sadasdasd43eadasdad'; 
```

这是一个错误的查询。有没有办法解决它。

我的列名是动态的，基于用户想要插入的内容。所以我不能使用**:phone**和**:image**之类的占位符，因为我可能并不总是获得这两列的值。如果有办法解决这个问题，请告诉我。否则我将不得不为每种类型的更新定义多个函数。

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T07:51:55.920

上次我检查时，不可能准备一个在准备时受影响的列未知的语句-但这似乎可行-也许您的数据库系统比我使用的数据库系统更宽容（主要是 postgres）

显然错误的是 implode() 语句，因为每个变量都应该由它自己处理，因此您还需要在插入语句中的字段列表周围加上括号。

要插入用户定义的字段，我认为你必须做这样的事情（至少我是这样做的）；

```
$fields=array_keys($a); // here you have to trust your field names! 
$values=array_values($a);
$fieldlist=implode(',',$fields); 
$qs=str_repeat("?,",count($fields)-1);
$sql="insert into user($fieldlist) values(${qs}?)";
$q=$DBH->prepare($sql);
$q->execute($values); 
```

如果您不能信任 $a 中的字段名称，则必须执行类似的操作

```
foreach($a as $f=>$v){
   if(validfield($f)){
      $fields[]=$f;
      $values[]=$v;
   }
} 
```

其中 validfields 是您编写的一个函数，它测试每个字段名并检查它是否有效（通过创建关联数组 $valf​​ields=array('name'=>1,'email'=>1, 'phone'= >1 ... 然后检查 $valf​​ields[$f] 的值，或者（如我所愿）通过从服务器获取字段名称）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T08:06:06.360

SQL 查询参数只能用于您本来要放置*文字值*的地方。

因此，如果您可以看到自己在查询中的该位置放置了带引号的字符串文字、日期文字或数字文字，则可以使用参数。

您不能将参数用于列名、表名、值列表、SQL 关键字或任何其他表达式或语法。

对于这些情况，您仍然需要将内容插入到 SQL 字符串中，因此您有一些 SQL 注入的风险。防止这种情况的方法是将列名*列入白名单*，并拒绝任何与白名单不匹配的输入。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-02T12:11:00.543

因为所有其他答案都允许**SQL 注入**。对于用户输入，您需要过滤允许的字段名称：

```
// change this
$fields = array('email', 'name', 'whatever');
$fieldlist = implode(',', $fields);
$values = array_values(array_intersect_key($_POST, array_flip($fields)));
$qs = str_repeat("?,",count($fields)-1) . '?';
$q = $db->prepare("INSERT INTO events ($fieldlist) values($qs)");
$q->execute($values); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-21T22:58:31.530

我很欣赏 MortenSickel 的回答，但为了安全起见，我想使用命名参数：

```
 $keys = array_keys($a);
    $sql = "INSERT INTO user (".implode(", ",$keys).") \n";
    $sql .= "VALUES ( :".implode(", :",$keys).")";        
    $q = $this->dbConnection->prepare($sql);
    return $q->execute($a); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-01-07T18:26:20.897

我知道这个问题很久以前就已经回答了，但是我今天找到了它，除了@MortenSickel的回答之外还有一点贡献。

下面的类将允许您将关联数组插入或更新到数据库表中。有关 MySQL PDO 的更多信息，请访问： http: [//php.net/manual/en/book.pdo.php](http://php.net/manual/en/book.pdo.php)

```
<?php

class dbConnection
{
  protected $dbConnection;

  function __construct($dbSettings) {
    $this->openDatabase($dbSettings);
  }

  function openDatabase($dbSettings) {  
    $dsn = 'mysql:host='.$dbSettings['host'].';dbname='.$dbSettings['name'];
    $this->dbConnection = new PDO($dsn, $dbSettings['username'], $dbSettings['password']);
    $this->dbConnection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
  }

  function insertArray($table, $array) {
    $fields=array_keys($array);
    $values=array_values($array);
    $fieldlist=implode(',', $fields); 
    $qs=str_repeat("?,",count($fields)-1);

    $sql="INSERT INTO `".$table."` (".$fieldlist.") VALUES (${qs}?)";

    $q = $this->dbConnection->prepare($sql);
    return $q->execute($values);
  }

  function updateArray($table, $id, $array) {
    $fields=array_keys($array);
    $values=array_values($array);
    $fieldlist=implode(',', $fields); 
    $qs=str_repeat("?,",count($fields)-1);
    $firstfield = true;

    $sql = "UPDATE `".$table."` SET";
    for ($i = 0; $i < count($fields); $i++) {
        if(!$firstfield) {
        $sql .= ", ";   
        }
        $sql .= " ".$fields[$i]."=?";
        $firstfield = false;
    }
    $sql .= " WHERE `id` =?";

    $sth = $this->dbConnection->prepare($sql);
    $values[] = $id;
    return $sth->execute($values);
  }
}
?> 
```

dbConnection 类用法：

```
<?php
  $dbSettings['host'] = 'localhost';
  $dbSettings['name'] = 'databasename';
  $dbSettings['username'] = 'username';
  $dbSettings['password'] = 'password';
  $dbh = new dbConnection( $dbSettings );

  $a = array( 'phone' => 111111111, 'image' => "sadasdasd43eadasdad" );
  $dbh->insertArray('user', $a);

  // This will asume your table has a 'id' column, id: 1 will be updated in the example below:
  $dbh->updateArray('user', 1, $a);
?> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-22T08:45:44.200

您实际上可以提前将`:phone`and字段与空值绑定。`:image`无论如何，表格的结构是固定的，您可能应该这样做。

* * *

但是您的问题的答案可能如下所示：

```
$keys = ':' . implode(', :', array_keys($array)); 
$values = str_repeat('?, ', count($array)-1) . '?';

$i = 1;
$q = $DBH->prepare("INSERT INTO user ($keys) VALUES ($values)");

foreach($array as $value)
    $q->bindParam($i++, $value, PDO::PARAM_STR, mb_strlen($value)); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-15T19:48:47.123

```
public function insert($data = [] , $table = ''){
    $keys = array_keys($data);
    $fields = implode(',',$keys);
    $pre_fields = ':'.implode(', :',$keys);
    $query = parent::prepare("INSERT INTO $table($fields) VALUES($pre_fields) ");
    return $query->execute($data);
} 
```

# html - 我怎样才能在两个内容区域之间添加分隔符 gif 是这样的？

> ID：13507500
> 
> 赞同：-1
> 
> 时间：2012-11-22T07:13:16.430
> 
> 标签：html, css

我的意思是主体上有两个内容，内容左侧和内容右侧，我想将内容右侧作为菜单面板并在它们之间放置一个分隔符 gif（羽化垂直线）。请告诉我我该怎么做？什么是css代码？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:35:00.187

看到你可以通过简单的代码得到你想要的结果：-

**HTML**

```
<div class="wrapper">
<div class="left">left-panel</div>     
<div class="right">right-panel</div>    
</div> 
```

**CSS**

```
.wrapper {
border:1px solid red;
overflow:hidden;
width:220px
}

.left {
float:left;
width:100px;
height:280px;  
background:grey; 
position:relative;
}

.left:after {
position:absolute;
content:" ";
width:1px; 
height:280px;
background-color: #FAFAFA;
background: -webkit-gradient(linear, 0% 0%, 0% 100%, from(#000000), to(#FAFAFA));
background: -moz-linear-gradient(top, #000000 0%, #FAFAFA 100%);  
right:-10px;
top:0;  
}
.right {
float:right;
width:100px;
height:280px;  
background:lightgrey;  
} 
```

**[演示](http://tinkerbin.com/cjA4Jg5d)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:20:18.473

```
#vertical {
    border-left:thick solid #ffff00;
} 
```

这应该工作

# grails - Gorm 更改主键，未找到 id 为 null

> ID：13507501
> 
> 赞同：2
> 
> 时间：2012-11-22T07:13:18.293
> 
> 标签：grails, grails-orm, scaffolding, natural-key

我已经阅读了大量关于此的问题，似乎没有人让它发挥作用。

我正在使用 grails，并且正在创建一个没有 id 作为主键的类。

我收到消息“未找到 id 为空的 usuario”。这是我的域类的代码：

```
 class Usuario implements Serializable{ 

     String nombre 
     String celular 
     String telefono 
     String apellido 
     String password 
     String nick 

     static mapping = { 
      table 'Usuarios' 
      version false 
      id composite: ['nick'] 
} 
} 
```

我也尝试了正常的方式：

```
 static mapping = { 
    table 'Usuarios' 
    version false 
     id name: 'nick' 
} 
```

它实际上使用自然键和所有内容以我想要的方式映射表，它插入新的 usuarios，但 gui 无法检索任何对象并显示错误：“未找到 id 为空的 usuario”

我试图修改 show(Long id) 方法，但它也无济于事，这是我的控制器显示方法：

```
 def show(String nick) {
    def usuarioInstance = Usuario.get(nick)
    if (!usuarioInstance) {
        flash.message = message(code: 'default.not.found.message', args: [message(code: 'usuario.label', default: 'Usuario'), nick])
        redirect(action: "list")
        return
    }

    [usuarioInstance: usuarioInstance]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:17:08.413

您需要指定**分配**的生成器：

```
static mapping = {
    ...
    id column: 'nick', generator: 'assigned'
} 
```

另外，添加以下约束可能是明智的：

```
static constraints = {
    nick blank:false, nullable:false, unique: true
} 
```

# android - wav文件上的Android音频效果并保存

> ID：13507502
> 
> 赞同：8
> 
> 时间：2012-11-22T07:13:24.027
> 
> 标签：android, android-mediaplayer, soundpool, audio-processing, audioeffect

## 要求

Android 在 sd 卡中打开一个 .wav 文件，播放它，添加一些效果（如回声，音高转换等），保存文件。简单的 ：（

## 我知道的

1.  我可以使用 Soundpool 或 MediaPlayer 打开和播放文件。
2.  我可以在使用两者的同时发挥一些效果。即对于媒体播放器，我可以设置环境混响效果。使用 SoundPool 我可以设置播放速率，这有点像音高转换。我现在成功地实施了这些。
3.  但是这些类中的任何一个都没有任何方法来保存播放的文件。所以我只能播放，我不能保存有效果的音乐。

## 我想知道的

1.  除了 MediaPlayer 或 SoundPool 之外，是否还有其他感兴趣的类别。不用管保存，你只是提到类，我会和他们一起研究保存文件。
2.  任何可以添加效果和保存的第三方库？如果它是开源和免费的，那就太高兴了。但是，即使它是专有的，也要提及它们。
3.  我可以研究的任何其他领域。OpenAL 是否支持语音过滤和语音定位？它可以与Android一起使用吗？

准备做肮脏的工作。请把路借给我..

## 编辑：

进行了更多搜索，然后遇到了[AudioTrack](http://developer.android.com/reference/android/media/AudioTrack.html)。但它也不支持保存到文件。所以那里也没有运气..

## 编辑

好的，如果我自己做呢？从[wav](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)文件中获取原始字节，然后进行处理。我使用 AudioRecord 录制了一个 wav 文件，得到了一个 wav 文件。是否有任何资源描述低级音频处理（我的意思是字节级别）。

## 编辑

好吧，赏金时间到了，我正在为我得到的唯一答案提供赏金。7天后，我明白的是

1.  我们无法保存使用 MediaPlayer、AudioTrack 等播放的内容。
2.  没有可供使用的音频处理库。
3.  您可以获取原始 wav 文件，并自己进行音频处理。答案为读取/写入 wav 文件提供了一个很好的包装类。一个很好的 java 代码来读取和改变 wav 文件的音调在[这里](http://code.google.com/p/conan-conan/source/browse/)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-30T21:40:27.953

WavFile 类[http://www.labbookpages.co.uk/audio/javaWavFiles.html](http://www.labbookpages.co.uk/audio/javaWavFiles.html)声称可以读取和写入 wav 文件，并允许通过样本值数组对每个样本进行操作。它肯定相当小，总共 23kbytes 的源代码。

我确实挣扎了一段时间来构建一个包含 Wavfile 类的 android 应用程序。原来这是因为 WavFile 和 ReadExample（来自上面的链接）都是作为独立的 java 程序设计的，所以包括一个方法`main(String [] args){}`。Eclipse 看到这一点并认为该类是一个独立的可运行程序，并且当我单击该`run`按钮时，尝试在开发机器中仅使用 java 执行一个类，而不是在我的手机上启动整个应用程序。当我小心地使用按钮上的小下拉菜单运行整个应用程序时`run`，我没有任何问题，WavFile 类和示例直接进入，在 IDE 中给出零警告，并按广告运行在我的手机上。

# android - 在 Listview 上显示数据是重复的

> ID：13507504
> 
> 赞同：0
> 
> 时间：2012-11-22T07:13:27.277
> 
> 标签：android

我正在做一个应用程序可以每 1 分钟更新一次数据，数据将从服务器上的数据库 mysql 显示在我的应用程序 android 的列表视图上。我的问题是第一个显示数据没问题，但是当在listview上显示第二个数据时，第一个和第二个的数据是重复的。你能帮帮我吗！源代码：

```
public class Hoadon extends Activity {
JSONArray jArray;
String result = null;
InputStream is = null;
StringBuilder sb = null;
ArrayList<String> al = new ArrayList<String>();
ArrayList<String> al1 = new ArrayList<String>();
ArrayList<String> al2 = new ArrayList<String>();
ArrayList<String> al3 = new ArrayList<String>();
ArrayList<String> al1a = new ArrayList<String>();
String date;
String name;
String address;
String url;
String code;
int responseCode;
private String IDinvoice;
private TimerTask mTimerTask;
private Timer t=new Timer();
private final Handler handler=new Handler();
private ListView listview;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.hoadon);
    int currentOrientation = getResources().getConfiguration().orientation;
    if (currentOrientation == Configuration.ORIENTATION_LANDSCAPE) {
       setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
    }
    else {
       setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR_PORTRAIT);
    }
    try {
        URL url = new URL("http://longvansolution.tk/monthlytarget.php");
        URLConnection connection = url.openConnection();
        connection.setConnectTimeout(2000);
        HttpURLConnection httpConnection = (HttpURLConnection) connection;
        responseCode = httpConnection.getResponseCode();
    } catch (Exception e) {
    }
    try {
        if (isNetworkAvailable() == true
                //&& responseCode == HttpURLConnection.HTTP_OK
                ) {
            //new LoadData().execute();
            al.clear();
            al1.clear();
            al2.clear();
            al3.clear();
            al1a.clear();

            doTimerTask();
        } else {
            AlertDialog.Builder ad = new AlertDialog.Builder(this);
            ad.setMessage("No Internet Connection available!!!");
            ad.show();
        }
    } catch (Exception e) {

    }
    Bundle extras = getIntent().getExtras();
    if (extras != null) {
        IDinvoice = extras.getString("IDinvoice");
    }

}

public void doTimerTask(){
    mTimerTask = new TimerTask() {       
            public void run() {
                    handler.post(new Runnable() {
                            public void run() {
                                new LoadData().execute();
                                Log.d("TIMER", "TimerTask run");
                            }
                   });
            }};
        // public void schedule (TimerTask task, long delay, long period) 
        t.schedule(mTimerTask, 500, 10000);  // 
     }
@Override
public void onBackPressed() {

    //do something with bitmap
}
private class LoadData extends AsyncTask<Void, Void, Void> {
    private ProgressDialog progressDialog;

    @Override
    // can use UI thread here
    protected void onPreExecute() {
        this.progressDialog = ProgressDialog.show(
                Hoadon.this, "", " Loading...");
    }

    @Override
    protected void onPostExecute(final Void unused) {
        this.progressDialog.dismiss();
        try {
            listview = (ListView) findViewById(R.id.listView1);
            this.progressDialog.dismiss();
            listview.setAdapter(new DataAdapter(Hoadon.this,
                    al.toArray(new String[al.size()]), al1a
                            .toArray(new String[al1a.size()]), al1
                            .toArray(new String[al1.size()]), al2
                            .toArray(new String[al2.size()])));
            listview.setOnItemClickListener(new OnItemClickListener() {

                @Override
                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    // TODO Auto-generated method stub
                    String t = al3.get(position);
                    Intent i = new Intent(Hoadon.this,
                            Signature.class);
                    i.putExtra("url", t);
                    startActivity(i);
                }
            });
        } catch (Exception e) {

            Toast.makeText(getApplicationContext(), e.toString(),
                    Toast.LENGTH_LONG).show();
        }

    }

    @Override
    protected Void doInBackground(Void... params) {
        // TODO Auto-generated method stub
        // HTTP post

        try {

            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
            HttpClient httpclient = new DefaultHttpClient();
            try {
                HttpPost httppost = new HttpPost(
                        "http://longvansolution.tk/monthlytarget.php");
                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                HttpResponse response = httpclient.execute(httppost);
                HttpEntity entity = response.getEntity();
                is = entity.getContent();

            } catch (Exception e) {
                Toast.makeText(getApplicationContext(), e.toString(),
                        Toast.LENGTH_LONG).show();
            }
            // buffered reader
            try {
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(is, "iso-8859-1"), 80);
                sb = new StringBuilder();
                sb.append(reader.readLine() + "\n");
                String line = "0";
                while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
                }
                is.close();
                result = sb.toString();
            } catch (Exception e) {
                Toast.makeText(getApplicationContext(), e.toString(),
                        Toast.LENGTH_LONG).show();
            }
            try {
                jArray = new JSONArray(result);
                JSONObject json_data = null;
                for (int i = 0; i < jArray.length(); i++) {
                    json_data = jArray.getJSONObject(i);
                    date = json_data.getString("date");
                    address = json_data.getString("address");
                    name = json_data.getString("name");
                    url = json_data.getString("url");
                    code = json_data.getString("code");
                    al.add(date);
                    al1a.add(code);
                    al1.add(name);
                    al2.add(address);
                    al3.add(url);
                }
            } catch (JSONException e) {
                Toast.makeText(getApplicationContext(), e.toString(),
                        Toast.LENGTH_LONG).show();
            }
        } catch (ParseException e) {
            // Log.e("log_tag", "Error in http connection" + e.toString());
            Toast.makeText(getApplicationContext(), e.toString(),
                    Toast.LENGTH_LONG).show();
        } catch (Exception e) {
            // Log.e("log_tag", "Error in http connection" + e.toString());
            Toast.makeText(getApplicationContext(), e.toString(),
                    Toast.LENGTH_LONG).show();
        }

        return null;

    }
}

public boolean isNetworkAvailable() {
    ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = cm.getActiveNetworkInfo();
    // if no network is available networkInfo will be null, otherwise check
    // if we are connected
    if (networkInfo != null && networkInfo.isConnected()) {

        // Log.i("net status:", "Online...!!!");
        return true;
    }
    // Log.i("net status:", "offline...!!!");
    return false;
} 
```

}

源数据适配器

```
public class DataAdapter extends BaseAdapter {
Context mContext;
private LayoutInflater mInflater;
String[] date;
String[] code;
String[] address;
String[] name;

public DataAdapter(Context c, String[] date,String[] code, String[] name, String[] address) {
    this.date = date;
    this.code=code;
    this.name = name;
    this.address = address;
    mContext = c;
    mInflater = LayoutInflater.from(c);
}

public void clearData() {
    // clear the data
    Arrays.fill(date, null);
    Arrays.fill(code, null);
    Arrays.fill(address, null);
    Arrays.fill(name, null);
}

public int getCount() {
    return date.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public View getView(int position, View convertView, ViewGroup parent) {
    ViewHolder holder = null;
    if (convertView == null) {
        convertView = mInflater.inflate(R.layout.customgrid, parent, false);
        holder = new ViewHolder();
        holder.date = (TextView) convertView.findViewById(R.id.date);
        holder.code=(TextView)convertView.findViewById(R.id.mahd);
        holder.name = (TextView) convertView.findViewById(R.id.name);
        holder.address = (TextView) convertView.findViewById(R.id.address);
        if (position == 0) {
            convertView.setTag(holder);
        }
    } else {
        holder = (ViewHolder) convertView.getTag();
    }

    try {

        holder.date.setText(date[position]);
        holder.code.setText(code[position]);
        holder.name.setText(name[position]);
        holder.address.setText(address[position]);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return convertView;
}

static class ViewHolder {
    TextView date,code;
    TextView name, address;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:24:45.423

您应该清除每个 LoadData 任务的 arralist。

```
try {
 jArray = new JSONArray(result);
 JSONObject json_data = null;

 al.clear();
 al1.clear();
 al2.clear();
 al3.clear();
 al1a.clear();

 for (int i = 0; i < jArray.length(); i++) {
                json_data = jArray.getJSONObject(i);
                date = json_data.getString("date");
                address = json_data.getString("address");
                name = json_data.getString("name");
                url = json_data.getString("url");
                code = json_data.getString("code");
                al.add(date);
                al1a.add(code);
                al1.add(name);
                al2.add(address);
                al3.add(url);
            } 
```

# c# - 如何解决两个紧密耦合的命名空间（在不同的程序集中）之间的依赖关系？

> ID：13507505
> 
> 赞同：0
> 
> 时间：2012-11-22T07:13:27.803
> 
> 标签：c#, dependency-injection, autofac, circular-dependency

假设我有一个`ITestService`用它的配对实现调用的接口，让我们`DefaultTestService`在程序集“A”中调用它。我将`DefaultTestService`类注册为`ITestService`Autofac 容器中的服务。另一方面，程序集“A”有对程序集“B”的引用。现在我想通过程序集“B”中的相应接口（ITestService）解析 DefaultTestService，为此我必须首先添加对程序集“A”的引用这样我就可以访问 ITestService 并将其传递给`Resolve<T>()`方法。

**循环依赖！**

好的。我们可以通过为组件分配密钥并通过密钥解决它来解决它。但是如果我没有注册依赖项（并且没有分配给它的密钥）怎么办？

任何想法？谢谢你的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:17:05.930

如果程序集 A 依赖于 B 并且两个程序集都需要`ITestService`，则必须在程序集 B 或 A 和 B 都依赖的第三个程序集中定义此接口。

# iphone - 如何从字典字典中获取数组中的值

> ID：13507506
> 
> 赞同：1
> 
> 时间：2012-11-22T07:13:30.803
> 
> 标签：iphone, objective-c, ios, xcode, web-services

我从我的 ios 应用程序调用 Web 服务，它返回字典字典，像这样

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>1</key>
    <dict>
        <key>Business classification</key>
        <string>a:2:{i:0;s:19:"Broker - Securities";i:1;s:18:"Financial Services";}</string>
        <key>Cell phone</key>
        <string>(2201258886</string>
        <key>Company position</key>
        <string>First Vice President - Wealth Management, CFP?</string>
        <key>Country</key>
        <string>UNITED STATES of AMERICA</string>
        <key>Email</key>
        <string>ravikirans@ms.com</string>
        <key>Full name</key>
        <string>llndrees</string>
        <key>Office phone</key>
        <string>(707) 571-5761</string>
        <key>Rkkkty/name</key>
        <string>Santkkka Roskka</string>
        <key>State</key>
        <string>Cakklifornia</string>
        <key>user_id</key>
        <string>1</string>
    </dict>
    <key>10</key>
    <dict>
        <key>Business classification</key>
        <string>a:1:{i:0;s:16:"Business advisor";}</string>
        <key>Cell phone</key>
        <string>415-491-4102</string>
        <key>Company position</key>
        <string>Business Adviser</string>
        <key>Country</key>
        <string>UNITED STATES of AMERICA</string>
        <key>Email</key>
        <string>bygttfn@pacbgf</string>
        <key>Full name</key>
        <string>Biolas</string>
        <key>Office phone</key>
        <string>415+656165402</string>
        <key>Rotuhuhame</key>
        <string>Tiburon</string>
        <key>State</key>
        <string>Caliggggfornia</string>
        <key>user_id</key>
        <string>13</string>
    </dict> 
```

现在我需要在一个数组中获取所有电子邮件我该怎么做我试过这个

```
 NSDictionary * Usernames = [[NSDictionary alloc]initWithContentsOfFile:strDocDirPath];

            NSLog(@"%@",[Usernames valueForKey:@"Email"]); 
```

但它返回零，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:22:03.737

您应该尝试以下方法：

```
NSDictionary * Usernames = [[NSDictionary alloc]initWithContentsOfFile:strDocDirPath];
    for (NSDictionary *item in Usernames)
    {
        NSLog(@"%@",[item valueForKey:@"Email"]);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:21:05.230

使用字典的这个功能来枚举和获取电子邮件的所有值并将其存储到数组中。

> *   (void)enumerateKeysAndObjectsUsingBlock:(void (^)(id key, id obj, BOOL *stop))block

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:18:14.763

这应该是一个循序渐进的过程，试试这样

```
NSLog(@"%@",[[Usernames valueForKey:@"first key"] valueForKey:@"second key"] ); 
```

# windows-8 - Windows 商店应用程序未在 Windows 8 中显示

> ID：13507508
> 
> 赞同：2
> 
> 时间：2012-11-22T07:13:39.377
> 
> 标签：windows-8, windows-store-apps

我安装了 Windows 8 发布预览版。在我的 Windows 商店中，我看不到许多 Windows 8 应用程序，例如 Skype。它从启动开始只显示 420 个应用程序。不显示任何新应用。我不知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:15:56.547

请升级到 RTM 版本。你可以从[MSDN下载](http://msdn.microsoft.com/en-us/evalcenter/jj554510.aspx)

# sip - 是否可以使用 google dart 编写 sip 客户端？

> ID：13507510
> 
> 赞同：0
> 
> 时间：2012-11-22T07:13:58.193
> 
> 标签：sip, dart

我正在尝试将**SIP 客户端**编写为网页。是否可以使用**Google Dart**执行它？

*   如果是，教程或样板示例代码是否有任何好的起点？
*   如果不是，我应该使用什么替代方案？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:28:50.077

你看过 sipML5 吗？这将是一个替代方案。

[http://sipml5.org/](http://sipml5.org/)

# c# - 反序列化windows phone的动态json

> ID：13507513
> 
> 赞同：0
> 
> 时间：2012-11-22T07:14:00.540
> 
> 标签：c#, json, visual-studio-2010, windows-phone-7, json.net

以下是我的 C# 类 Json 数据::

```
[DataContract]
 public class RootObject
 {
           [DataMember(Name="success")]
           public bool success { get; set; }
          [DataMember(Name="deal")]
          public Deal deal { get; set; }
}
[DataContract]
public class Deal
{
    [DataMember(Name = "child_1")]
    public List<Child12> child_1 { get; set; }
    [DataMember(Name = "child_2")]    
    public List<Child12> child_2 { get; set; }
    [DataMember(Name = "child_3")]
    public List<Child12> child_3 { get; set; }
    [DataMember(Name = "child_4")]
    public List<Child12> child_4 { get; set; }
    [DataMember(Name = "child_5")]
    public List<Child12> child_5 { get; set; }
    [DataMember(Name = "child_6")]    
    public List<Child12> child_6 { get; set; }
}

[DataContract]
public class Child12
{
    [DataMember(Name = "scan_count")]
    public string scan_count { get; set; }
    [DataMember(Name = "id")]
    public string id { get; set; }
    [DataMember(Name = "merchant_id")]
    public string merchant_id { get; set; }
    [DataMember(Name = "company_id")]
    public string company_id { get; set; }
    [DataMember(Name = "points_to_earn")]
    public string points_to_earn { get; set; }
    [DataMember(Name = "equivalent_points")]
    public string equivalent_points { get; set; }
    [DataMember(Name = "description")]
    public string description { get; set; }
    [DataMember(Name = "deal_city")]
    public string deal_city { get; set; }
    [DataMember(Name = "price")]
    public string price { get; set; }
    [DataMember(Name = "guidelines")]
    public string guidelines { get; set; }
    [DataMember(Name = "business_name")]
    public string business_name { get; set; }
    [DataMember(Name = "b_type")]
    public string b_type { get; set; }
    [DataMember(Name = "b_image")]
    public string b_image { get; set; }

} 
```

出现的问题是 Deal 类，每次解析数据时，它都有不同的成员数（即 child_1、child_2、.... child_x）。所以我的问题是如何制作动态类 Deal 以便可以相应地反序列化 json。我正在使用 json.net 在 Visual Studio 2010 中反序列化用于 Windows Phone 应用程序开发的 json。是否可以创建动态类或者是否有任何其他方法可以反序列化 json。

在此先感谢您的帮助。

这是json数据：

```
{"success":true,"deal":{"child_1":[{"scan_count":"7","id":"110","merchant_id":"244","company_id":"85","points_to_earn":"10","equivalent_points":"$25 in Purchases","description":"Receive a $25 gift card after 10 purchases of $25 or more!","deal_city":"Minneapolis","price":"25","guidelines":"Only one point may be earned per visit. ","business_name":"Bone Adventure","b_type":"7","b_image":"Bone-thumb1.jpg","b_state":"MN","b_line1":" 312 E Hennepin","b_line2":"","latitude":"44.9881339","longitude":"-93.2556557","b_zipcode":"55414","start_date":"2012-04-15","end_date":"2012-12-23","user_id":"389","deal_id":"110","state_name":"Minnesota","city_name":"Twin Cities","business_type":"Pet","c_image":"bone-main1.jpg","c_about":"Bone Adventure loves our neighborhoods and the communities of pets and their people that we serve! Our passion is offering a place for people to find high quality pet care basics and the healthiest pet foods and treats. Bone Adventure is a place where customers can come to feel the quality of our materials, hear the squeak of our toys, fit their dogs in the perfect size of apparel, and even sample a treat or two.","c_line1":" 312 E Hennepin","c_line2":"","c_zipcode":"55414","c_website":"www.BoneAdventure.com","c_phone":"(612) 378-0211"}],"child_2":[{"scan_count":"2","id":"101","merchant_id":"175","company_id":"77","points_to_earn":"10","equivalent_points":"$50 in Purchases","description":"Receive a $50 gift card after 10 purchases of $50 or more!","deal_city":"Minneapolis","price":"50","guidelines":"Only one point may be earned per visit.","business_name":"Parc Boutique","b_type":"3","b_image":"ParcBoutique-thumb1.jpg","b_state":"MN","b_line1":"320 E Hennepin Ave","b_line2":"","latitude":"44.9882846","longitude":"-93.2552125","b_zipcode":"55414","start_date":"2012-03-20","end_date":"2013-03-20","user_id":"389","deal_id":"101","state_name":"Minnesota","city_name":"Twin Cities","business_type":"Shopping","c_image":"ParcBoutique-Main1.jpg","c_about":"Smitten with casual-chic style? You\u2019ll fall in love with Parc Boutique. We\u2019re a posh boutique for women and men who covet fresh, fun styles and premium basics.","c_line1":"320 E Hennepin Ave","c_line2":"","c_zipcode":"55414","c_website":"www.parcboutique.com","c_phone":"612.353.4966"}],"child_3":[{"scan_count":"1","id":"105","merchant_id":"179","company_id":"81","points_to_earn":"10","equivalent_points":"Specialty Coffee Drink","description":"Get your caffeine fix! After purchasing any 10 specialty drinks (lattes or cappuccinos) we treat next!","deal_city":"Minneapolis ","price":"4","guidelines":"Only one point may be earned per visit. ","business_name":"Corner Coffee","b_type":"1","b_image":"Corner_Coffee_Thumb4.jpg","b_state":"MN","b_line1":"514 N 3rd St","b_line2":"","latitude":"44.985867","longitude":"-93.276115","b_zipcode":"55401","start_date":"2012-03-20","end_date":"2013-03-20","user_id":"389","deal_id":"105","state_name":"Minnesota","city_name":"Twin Cities","business_type":"Restaurants","c_image":"Latte.jpg","c_about":"Although it\u2019s not even on the corner, Corner Coffee is popular neighborhood coffee shop that also serves tasty breakfast and lunch dishes. It\u2019s laid back and relaxed atmosphere has locals coming back day after day. Check it out!","c_line1":"514 N 3rd St","c_line2":"","c_zipcode":"55401","c_website":"www.yourcornercoffee.com","c_phone":"612.338.2002"}],"child_4":[{"scan_count":"2","id":"98","merchant_id":"172","company_id":"74","points_to_earn":"4","equivalent_points":"Full Price Massage","description":"Receive any half hour fusion FREE with your next service after purchasing four full priced massage treatments!","deal_city":"Minneapolis ","price":"50","guidelines":"1\. Only one point awarded per visit\n2\. Fusions are not stand-alone services, therefore must be booke","business_name":"Sabai Body Temple","b_type":"5","b_image":"Sabai-thumb.jpg","b_state":"MN","b_line1":"2753 Hennepin Avenue South","b_line2":"","latitude":"44.9521528","longitude":"-93.298233","b_zipcode":"55408","start_date":"2012-03-20","end_date":"2013-03-20","user_id":"389","deal_id":"98","state_name":"Minnesota","city_name":"Twin Cities","business_type":"Health\/Spa","c_image":"Sabai-main.jpg","c_about":"Fully trained, professional massage therapists,specialising in Eastern-inspired massage and Alternative Medicine. We have the best selection of couple's massage and treatments in the Twin Cities and are proud to offer chemical-free massage treatments and spa rituals.","c_line1":"2753 Hennepin Avenue South","c_line2":"","c_zipcode":"55408","c_website":"www.sabaibodytemple.com","c_phone":"612.872.8354"}],"child_5":[{"scan_count":"5","id":"100","merchant_id":"174","company_id":"76","points_to_earn":"10","equivalent_points":"$10\/$15","description":"Receive any 1 menu item FREE after 10 purchases of $10 during the hours of 11:30-5PM, or $15 during the hours of 5:30-close.","deal_city":"Minneapolis ","price":"10","guidelines":"No rules here...just come in and enjoy yourself! ","business_name":"The Public House","b_type":"1","b_image":"Public_House_logo.png","b_state":"MN","b_line1":"700 Washington Avenue N","b_line2":"","latitude":"44.987999","longitude":"-93.2766709","b_zipcode":"55401","start_date":"2012-03-20","end_date":"2013-03-20","user_id":"389","deal_id":"100","state_name":"Minnesota","city_name":"Twin Cities","business_type":"Restaurants","c_image":"The_Public_House_-_Main1.jpg","c_about":"The Public House is one of those neighborhood joints that's easy to come back to, time and time again. It's great cuisine, craft beers and affordable prices make it a Warehouse District favorite!","c_line1":"700 Washington Avenue N","c_line2":"","c_zipcode":"55401","c_website":"www.thepublichousempls.com","c_phone":"612.455.1213"}],"child_6":[{"scan_count":"1","id":"106","merchant_id":"184","company_id":"82","points_to_earn":"6","equivalent_points":"Any Treatment Purchase","description":"FREE Microdermabrasion after the purchase of any 6 treatments!","deal_city":"Eden Prairie","price":"150","guidelines":"Only one point may be earned per visit. ","business_name":"Envy Skin Clinic","b_type":"5","b_image":"Envy_Skin_-_Thumb3.jpg","b_state":"MN","b_line1":"300 Prairie Center Drive","b_line2":"","latitude":"44.8571219","longitude":"-93.421224","b_zipcode":"55344","start_date":"2012-03-21","end_date":"2013-03-21","user_id":"389","deal_id":"106","state_name":"Minnesota","city_name":"Twin Cities","business_type":"Health\/Spa","c_image":"envy.jpg","c_about":"At ENVY Skin Clinic we want it to be all about you. We bring you a \"boutique\" clinic atmosphere where you receive personal attention and state-of-the-art laser services. Once you begin treatment, you will feel completely at ease with our highly experienced medical professionals.","c_line1":"300 Prairie Center Drive","c_line2":"","c_zipcode":"55344","c_website":"www.envyskinclinic.com","c_phone":"952.983.4588"}]}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T11:46:58.030

在 Json.Net 中，您可以定义“交易”属性`Dictionary<string,List<Child12>>`以实现此类目标。

此代码适用于您的示例。

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Newtonsoft.Json;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            DeserializeObject();
            Console.ReadKey();
        }

        private static async void DeserializeObject()
        {
            using (var reader = new StreamReader("TextFile1.txt"))
            {
                var jsonSerializerSettings = new JsonSerializerSettings {TypeNameHandling = TypeNameHandling.Auto};
                var value = await reader.ReadToEndAsync();
                var result = JsonConvert.DeserializeObject<RootObject>(value, jsonSerializerSettings);
            }
        }
    }

    public class RootObject
    {
        public bool success { get; set; }
        public Dictionary<string, List<Child12>> deal { get; set; }
    }

    public class Child12
    {
        public string scan_count { get; set; }
        public string id { get; set; }
        public string merchant_id { get; set; }
        public string company_id { get; set; }
        public string points_to_earn { get; set; }
        public string equivalent_points { get; set; }
        public string description { get; set; }
        public string deal_city { get; set; }
        public string price { get; set; }
        public string guidelines { get; set; }
        public string business_name { get; set; }
        public string b_type { get; set; }
        public string b_image { get; set; }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:02:48.670

JSON 中是否有最大数量的孩子，或者它可以是任意数量？如果 JSON 每次只包含不同的子子集，您可以使用包含所有这些事件的超集的目标类，并且目标对象将只包含未诱导子代的空值。据我所知，这就是反序列化的工作方式。

当然，您需要为目标类中的所有这些子属性添加适当的属性，以表明在反序列化数据时并非所有成员都是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:15:16.800

我找到了使用动态 json 的解决方案：[Deserializing JSON using JSon.NET with dynamic data](https://stackoverflow.com/questions/8738031/deserializing-json-using-json-net-with-dynamic-data)

使用了以前使用 json.net 的 simplejson。

# mysql - 双重查询错误

> ID：13507516
> 
> 赞同：1
> 
> 时间：2012-11-22T07:14:03.893
> 
> 标签：mysql

我有一个被一些学校使用的小应用程序。我正在尝试对应用程序进行以下 Mysql Double 查询。但它获取了一些错误。

```
 mysql> select fname,(select fname,lname from id) as google from id;
    ERROR 1241 (21000): Operand should contain 1 column(s)
    mysql>

mysql> select fname,(select fname from id) as google from id;
ERROR 1242 (21000): Subquery returns more than 1 row
mysql> 
```

我正在尝试`ID , Fname , Lname`使用 Double Query 来完成显示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:15:00.720

您在查询中获取两个`select fname,lname from id`需要为 1 的操作数，因为您正在使用别名，如果您想要两个字段，最好不要使用别名。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T07:20:04.263

正如 vardan 所提到的，您应该从第二个查询中只获取一个操作数，
而且第二个查询的结果必须是单个记录，在这种情况下，您将获得多条记录，请
尝试`where`在第二个查询中使用条件。

**编辑**

做一件事`SELECT id, fname, lname as google FROM id`

# ruby - 使用 Nokogiri 和每个方法返回零的屏幕抓取

> ID：13507520
> 
> 赞同：2
> 
> 时间：2012-11-22T07:14:18.710
> 
> 标签：ruby, nokogiri

我正在运行以下代码：

```
require 'rubygems'
require 'nokogiri'
require 'open-uri'

url = "http://sfbay.craigslist.org/search/sss?query=bike&catAbb=sss&srchType=A&minAsk=&maxAsk="

doc = Nokogiri::HTML(open(url))
doc.css(".row").each do |row|
  row.css("a").text
end 
```

我唯一得到的就是`0`. 但是，当我刚刚运行时`doc.css(".row")`，我会从 CL 中获取整个行列表。为什么当我使用 each 方法时它返回零，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:19:05.827

`.each`不返回任何东西，它是一个简单的迭代器。也许您正在寻找`.map`？

这将返回锚元素文本的数组：

```
doc.css(".row").map {|row| row.css("a").text } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T17:55:22.523

您不需要发出两个不同的 CSS 查询；您可以将它们组合起来：

```
doc.css(".row > a").map(&:text) 
```

# java - 动态改变 Spring 数据源

> ID：13507522
> 
> 赞同：37
> 
> 时间：2012-11-22T07:14:25.777
> 
> 标签：java, spring, datasource

我有一个 Spring 应用程序，我想动态更改数据源，即。当输入 DS URL 时，Spring bean 和所有依赖项将自动更新。我知道这有点奇怪，但无论如何我想实现这一点。我的Spring配置如下：

```
<bean id="majorDataSource" class="org.postgresql.ds.PGSimpleDataSource">
    <property name="serverName" value="${jdbc.serverName}" />
    <property name="portNumber" value="${jdbc.portNumber}" />
    <property name="user" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
    <property name="databaseName" value="${jdbc.databaseName}" />
</bean>
<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="majorDataSource"/>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="majorDataSource"/>
    <property name="configLocation" value="classpath:sqlmap-config.xml"/>
</bean> 
```

问题是：

1.  JDBC URL 存储在属性中，可以在运行时更改。

2.  更改 URL 后，我需要重新创建数据源，可能还需要重新创建依赖对象。我不知道如何在春天优雅地做到这一点？

我知道 Spring 确实可以基于一键动态路由数据源，但是数据源 URL 是在 Spring 中预定义的，不会更改运行时。这不是我的情况。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-11-22T08:05:15.790

您可以通过扩展它并覆盖应该返回引用要使用的数据源的 spring bean 的键的方法来使用 spring 的[AbstractRoutingDataSource 。](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/jdbc/datasource/lookup/AbstractRoutingDataSource.html)`determineCurrentLookupKey()`

查看[spring 源博客上的这篇博客文章](http://blog.springsource.com/2007/01/23/dynamic-datasource-routing/)，它将向您展示如何使用该功能的示例。

基本上要回答您的问题，您需要做的是在 XML 配置中将两个数据源定义为不同的 spring bean。无需动态创建一个，spring 将同时加载两者，并根据您在`determineCurrentLookupKey()`方法中的标准动态使用其中一个或另一个。

这将导致类似：

**XML 配置**

```
<!-- first data source -->
<bean id="majorDataSource" class="org.postgresql.ds.PGSimpleDataSource">
    <property name="serverName" value="${jdbc.major.serverName}" />
    <property name="portNumber" value="${jdbc.major.portNumber}" />
    <property name="user" value="${jdbc.major.username}" />
    <property name="password" value="${jdbc.major.password}" />
    <property name="databaseName" value="${jdbc.major.databaseName}" />
</bean>
<!-- second data source -->
<bean id="minorDataSource" class="org.postgresql.ds.PGSimpleDataSource">
    <property name="serverName" value="${jdbc.minor.serverName}" />
    <property name="portNumber" value="${jdbc.minor.portNumber}" />
    <property name="user" value="${jdbc.minor.username}" />
    <property name="password" value="${jdbc.minor.password}" />
    <property name="databaseName" value="${jdbc.minor.databaseName}" />
</bean>
<!-- facade data source -->
<bean id="dataSource" class="blog.datasource.CustomerRoutingDataSource">
   <property name="targetDataSources">
      <map>
         <entry key="MINOR" value-ref="minorDataSource"/>
         <entry key="MAJOR" value-ref="majorDataSource"/>
      </map>
   </property>
   <property name="defaultTargetDataSource" ref="majorDataSource"/>
</bean>
<!-- wiring up -->
<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"/>
</bean>
<tx:annotation-driven transaction-manager="transactionManager"/>
<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
    <property name="dataSource" ref="dataSource"/>
    <property name="configLocation" value="classpath:sqlmap-config.xml"/>
</bean> 
```

**爪哇**

```
public class MyRoutingDataSource extends AbstractRoutingDataSource {
   @Override
   protected Object determineCurrentLookupKey() {
      // get the current url
      HttpServletRequest request = ((ServletRequestAttributes) RequestContextHolder.currentRequestAttributes()).getRequest();
      if (request.getRequestURL().toString().endsWith("/minor"))
          return "MINOR";
      else
          return "MAJOR";
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-01T11:01:27.810

我不确定这是否是这样做的正确方式，但你可以做的是这样的事情。

```
<bean id="majorDataSource" class="org.postgresql.ds.PGSimpleDataSource">
    <property name="serverName" value="dummydata" />
    <property name="portNumber" value="dummydata" />
    <property name="user" value="dummydata" />
    <property name="password" value="dummydata" />
    <property name="databaseName" value="dummydata" />
</bean>
<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="majorDataSource"/>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/> 
```

在 Java 类中

```
public class TestTransaction {

   @Autowired
   private DataSourceTransactionManager manager;

   private PlatformTransactionManager transactionManager;

   public testExecution(DataSource ds) {
       manager.setDataSource(ds);
       transactionManager = manager;
       TransactionDefinition def = new DefaultTransactionDefinition();
       TransactionStatus status = transactionManager.getTransaction(def);
       try {
           jdbcTemplate.update();
           transactionManager.commit(status);
       } catch (Exception ex) {
           transactionManager.rollback(status);
       }
   }
} 
```

请建议这种方法是否可行，因为我对 Spring 还是新手

# windows-phone-7 - 如何在 Windows Phone 上自定义定期任务？

> ID：13507532
> 
> 赞同：3
> 
> 时间：2012-11-22T07:15:13.823
> 
> 标签：windows-phone-7, windows-phone-8

我需要在 Windows Phone 8 中使用自定义的定期任务。我从下面的链接中读到它每 30 分钟运行一次。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202942%28v=vs.105%29.aspx)

所以，我正在寻找一个选项来定制这个时间。比如说，我想每 15 秒或 20 秒运行一次定期任务。

这可能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-22T07:32:43.210

这是不可能的。每 30 分钟是最低间隔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-14T16:47:28.810

如果您不在市场上发布代码，您可以这样[做](http://windowsphonehacker.com/articles/custom_periodictask_intervals_wpdev-03-10-13)....

```
DateTime lastrun;
IsolatedStorageSettings.ApplicationSettings.TryGetValue<DateTime>("lastrun", out lastrun);

if (DateTime.Now.Subtract(lastrun).TotalMinutes < 60) // 60 minutes, so run every hour
{
    System.Diagnostics.Debug.WriteLine("Too soon, stopping.");
    NotifyComplete();
    return;
}

//add proper code for removing old value, etc.

IsolatedStorageSettings.ApplicationSettings.Add("lastrun", DateTime.Now); 

// Launch the task in 6 minutes
ScheduledActionService.LaunchForTest("task", TimeSpan.FromMinutes(6)); 
```

# mysql - 如何从五列中充分利用三列？

> ID：13507535
> 
> 赞同：0
> 
> 时间：2012-11-22T07:15:22.733
> 
> 标签：mysql, sql, oracle

我有一张如下表

```
ID     M1    M2    M3   M4  M5
121    3      5     6    8   4
122    5      2     1    9   6 
```

对于每一行，我需要获取最大值的三列，其他值应该为 NULL。对于上表，输出应为：

```
ID     M1    M2    M3   M4  M5
121          5     6    8   
122    5                9   6 
```

谁能帮助我如何在 Oracle 或 MySQL 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:23:26.143

如果您试图从表中获取最大值，您可以使用这样的子查询：

```
SELECT ID
,(CASE WHEN M1 = MM1 THEN M1 ELSE '' END) AS M1
,(CASE WHEN M2 = MM2 THEN M2 ELSE '' END) AS M2
,(CASE WHEN M3 = MM3 THEN M3 ELSE '' END) AS M3
,(CASE WHEN M4 = MM4 THEN M4 ELSE '' END) AS M4
,(CASE WHEN M5 = MM5 THEN M5 ELSE '' END) AS M5
FROM Table1
JOIN
(
SELECT MAX(M1) AS MM1
      ,MAX(M2) AS MM2
      ,MAX(M3) AS MM3
      ,MAX(M4) AS MM4
      ,MAX(M5) AS MM5
FROM Table1
) A 
```

输出：

```
|  ID | M1 | M2 | M3 | M4 | M5 |
--------------------------------
| 121 |    |  5 |  6 |    |    |
| 122 |  5 |    |    |  9 |  6 | 
```

### [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/e0ae3/4)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:26:38.807

试试这个（aaabbb 是我在小提琴中给你的桌子起的名字）：

```
with p as (
select *
from aaabbb
unpivot
(
v for c in (m1,m2,m3,m4,m5)
)
), max_v as (
select p1.id,  max(p1.v) v1, max(p2.v) v2, max(p3.v) v3
from p p1 
join p p2 on p1.v > p2.v and  p1.id = p2.id
join p p3 on p2.v > p3.v and  p2.id = p3.id
group by p1.id) 
select ab.id, 
case when m1 in (mv.v1, mv.v2, mv.v3) then m1 end  m1,
case when m2 in (mv.v1, mv.v2, mv.v3) then m2 end  m2,
case when m3 in (mv.v1, mv.v2, mv.v3) then m3 end  m3,
case when m4 in (mv.v1, mv.v2, mv.v3) then m4 end  m4,
case when m5 in (mv.v1, mv.v2, mv.v3) then m5 end  m5
from aaabbb ab join max_v mv on ab.id = mv.id 
```

结果是：

```
ID     M1    M2    M3   M4  M5
121          5     6    8   
122    5                9   6 
```

**[这](http://www.sqlfiddle.com/#!4/f6904/1)是一个 sqlfiddle 演示**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:28:28.517

在 oracle :: 我不确定您在此处尝试调用的某些规则：

```
select id,
decode(m1,1,null,2,null,3,null,4,null,M1) M1,
decode(m2,1,null,2,null,3,null,4,null,M2) M2,
decode(m3,1,null,2,null,3,null,4,null,M3) M3,
decode(m4,1,null,2,null,3,null,4,null,M4) M4,
decode(m5,1,null,2,null,3,null,4,null,M5) M5
from tab order by id; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T07:53:01.163

试试这个查询 -

```
SELECT
  id,
  IF(t1.m1 = t2.m1, t1.m1, null) m1,
  IF(t1.m2 = t2.m2, t1.m2, null) m2,
  IF(t1.m3 = t2.m3, t1.m3, null) m3,
  IF(t1.m4 = t2.m4, t1.m4, null) m4,
  IF(t1.m5 = t2.m5, t1.m5, null) m5
FROM
  m_table t1,
  (SELECT
     MAX(m1) m1, MAX(m2) m2, MAX(m3) m3, MAX(m4) m4, MAX(m5) m5 FROM m_table
  ) t2 
```

# html - IE 中的 RTL 模式使 ExtJS 3.3.0 窗口窗体中的字段标签不正确对齐

> ID：13507536
> 
> 赞同：3
> 
> 时间：2012-11-22T07:15:34.370
> 
> 标签：html, extjs, alignment, extjs3, right-to-left

我正在使用带有`RTL`修复程序的 ExtJS 3.3.0，并且我对所有必需的类进行了覆盖以正确对齐字段。

不过，我一直遇到浮动表单的问题，我的字段标签有时会消失。我调查了这个问题，发现标签实际上并没有消失——它只是突然出现在左边（因此没有显示），没有明显的原因。

*这*是我的对话框*的*样子（第一次显示时）： *![在此处输入图像描述](../Images/170129240ec2198b3c86be8ef5e474aa.png)*

 *不幸的是，这是它*第二*次显示时的样子： ![在此处输入图像描述](../Images/a75929ec890208183735af1a973d9172.png)

这是由 ExtJS 创建的窗口 HTML（注意：文档的 HTML 标记为`dir="rtl"`）：

```
<div class="x-window-tl">
 <div class="x-window-tr">
  <div class="x-window-tc">
   <div style="mozuserselect: none; khtmluserselect: none" id="ext-gen129" class="x-window-header x-unselectable x-window-draggable"
    unselectable="on">
    <div id="ext-gen135" class="x-tool x-tool-close">
     &nbsp;
    </div>
    <span id="ext-gen141" class="x-window-header-text">שינוי תאריך אספקה</span>
   </div>
  </div>
 </div>
</div>
<div id="ext-gen130" class="x-window-bwrap">
 <div class="x-window-ml">
  <div class="x-window-mr">
   <div id="ext-gen134" class="x-window-mc">
    <div style="width: 297px; height: 40px" id="ext-gen131" class="x-window-body">
     <div style="width: 297px" id="ext-comp-1046" class=" x-panel x-form-label-left">
      <div id="ext-gen147" class="x-panel-bwrap">
       <form style="padding-bottom: 8px; padding-left: 8px; width: 297px; padding-right: 8px; height: 40px; padding-top: 8px"
        id="ext-gen128" class="x-panel-body x-panel-body-noheader x-form"
        method="post">
        <div style="width: 300px" dir="rtl" id="ext-gen149" class="x-form-item " tabindex="-1">
         <label style="width: 75px" id="ext-gen150" class="x-form-item-label" for="ext-comp-1045">
          תאריך חדש:</label>
         <div style="padding-right: 80px" id="x-form-el-ext-comp-1045" class="x-form-element">
          <div style="width: 133px" dir="rtl" id="ext-gen152" class="x-form-field-wrap x-form-field-trigger-wrap">
           <input style="width: 133px" id="ext-comp-1045" class="x-form-text x-form-field x-trigger-noedit"
            name="ext-comp-1045" readonly value="2012-11-22" size="10" autocomplete="off"
            qtip><img id="ext-gen153" class="x-form-trigger x-form-date-trigger" alt="" src="http://localhost/bDox/NipImages/s.gif">
          </div>
         </div>
         <div class="x-form-clear-left">
         </div>
        </div>
       </form>
      </div>
     </div>
    </div>
   </div>
  </div>
 </div>
 <div id="ext-gen133" class="x-window-bl">
  <div class="x-window-br">
   <div class="x-window-bc">
    <div style="width: 297px" id="ext-gen132" class="x-window-footer x-panel-btns">
     <div style="width: 287px" id="ext-comp-1049" class="x-panel-fbar x-small-editor x-toolbar-layout-ct">
      <table class="x-toolbar-ct" cellspacing="0">
       <tbody>
        <tr>
         <td class="x-toolbar-right" align="center">
          <table cellspacing="0">
           <tbody>
            <tr class="x-toolbar-right-row">
             <td id="ext-gen142" class="x-toolbar-cell">
              <table style="width: 75px" id="ext-comp-1047" class="x-btn  x-btn-noicon" cellspacing="0">
               <tbody class="x-btn-small x-btn-icon-small-right">
                <tr>
                 <td class="x-btn-tl">
                  <i>&nbsp;</i>
                 </td>
                 <td class="x-btn-tc"></td>
                 <td class="x-btn-tr">
                  <i>&nbsp;</i>
                 </td>
                </tr>
                <tr>
                 <td class="x-btn-ml">
                  <i>&nbsp;</i>
                 </td>
                 <td class="x-btn-mc">
                  <em unselectable="on">
                   <button style="" id="ext-gen143" class=" x-btn-text">
                    אשר</button></em>
                 </td>
                 <td class="x-btn-mr">
                  <i>&nbsp;</i>
                 </td>
                </tr>
                <tr>
                 <td class="x-btn-bl">
                  <i>&nbsp;</i>
                 </td>
                 <td class="x-btn-bc"></td>
                 <td class="x-btn-br">
                  <i>&nbsp;</i>
                 </td>
                </tr>
               </tbody>
              </table>
             </td>
             <td id="ext-gen144" class="x-toolbar-cell">
              <table style="width: 75px" id="ext-comp-1048" class="x-btn  x-btn-noicon" cellspacing="0">
               <tbody class="x-btn-small x-btn-icon-small-right">
                <tr>
                 <td class="x-btn-tl">
                  <i>&nbsp;</i>
                 </td>
                 <td class="x-btn-tc"></td>
                 <td class="x-btn-tr">
                  <i>&nbsp;</i>
                 </td>
                </tr>
                <tr>
                 <td class="x-btn-ml">
                  <i>&nbsp;</i>
                 </td>
                 <td class="x-btn-mc">
                  <em unselectable="on">
                   <button style="" id="ext-gen145" class=" x-btn-text">
                    ביטול</button></em>
                 </td>
                 <td class="x-btn-mr">
                  <i>&nbsp;</i>
                 </td>
                </tr>
                <tr>
                 <td class="x-btn-bl">
                  <i>&nbsp;</i>
                 </td>
                 <td class="x-btn-bc"></td>
                 <td class="x-btn-br">
                  <i>&nbsp;</i>
                 </td>
                </tr>
               </tbody>
              </table>
             </td>
            </tr>
           </tbody>
          </table>
         </td>
         <td class="x-toolbar-left" align="left">
          <table class="x-toolbar-left-ct" cellspacing="0">
           <tbody>
            <tr>
             <td>
              <table cellspacing="0">
               <tbody>
                <tr class="x-toolbar-left-row">
                </tr>
               </tbody>
              </table>
             </td>
             <td>
              <table cellspacing="0">
               <tbody>
                <tr class="x-toolbar-extras-row">
                </tr>
               </tbody>
              </table>
             </td>
            </tr>
           </tbody>
          </table>
         </td>
        </tr>
       </tbody>
      </table>
     </div>
     <div id="ext-gen137" class="x-clear">
     </div>
    </div>
   </div>
  </div>
 </div>
</div>
<a id="ext-gen138" class="x-dlg-focus" tabindex="-1" href="http://localhost/bDox/Asn.aspx?n=20112112_18&amp;cid=8ab8ba6a-1de0-4344-bed6-a48b93c497e6&amp;vid=4cf57ca1-78ea-4d6a-94b5-cd20b322a2f8#">&nbsp;</a> 
```

**注意：**这只发生在 IE 中。

我曾多次阅读 IE 在`RTL`模式下存在浮动元素的问题，修复方法是将宽度设置为浮动元素的容器。

我已经在渲染后事件中这样做了，但无济于事：

```
newDateField.on('afterrender', function (field) {
    var elem = field.getEl(),
        p = elem.parent(),
        formItem = elem.parent('.x-form-item');

    p.setWidth(elem.getWidth());
    formItem.setWidth(300);
}, this); 
```

我也尝试过删除`DOCTYPE`并使用`STRICT DOCTYPE`. 也无济于事。

有什么建议么？*

# android - android中的二维码生成器

> ID：13507538
> 
> 赞同：2
> 
> 时间：2012-11-22T07:15:38.973
> 
> 标签：android, qr-code

我正计划为 Android 设备开发一个二维码生成器应用程序。

有人可以提供一些参考资料来指导我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T07:19:02.047

您可以访问[ZXING（“斑马线”）](http://code.google.com/p/zxing/)，也可以在[此处](https://github.com/barmstrong/bitcoin-android/)找到一个工作示例。

这是ZXING的150x150二维码示例，

```
Bitmap bm = encodeAsBitmap(barcode_content, BarcodeFormat.QR_CODE, 150, 150);

if(bm != null) {
    image_view.setImageBitmap(bm);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T07:19:05.620

[zxing](http://code.google.com/p/zxing/)库是一个好的开始。

还有一个用于生成二维码的[Google Charts API](https://developers.google.com/chart/infographics/docs/qr_codes#details)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T07:19:54.003

最好的参考当然是Zxing。code.google 上提供的一个开源库请参见以下链接： [Zxing 库](http://code.google.com/p/zxing/) 您可以在编码器类中找到更多信息： [编码器类链接](http://code.google.com/p/zxing/source/browse/trunk#trunk/core/src/com/google/zxing/qrcode/encoder)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-27T19:37:36.907

如果您有网络连接，也许您可​​以节省时间并使用在线二维码界面，例如[http://qrcode.loresoft.de/qr-code-interface](http://qrcode.loresoft.de/qr-code-interface)

这是用于私人和商业用途的免费界面，没有任何限制（德语）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-11T09:08:45.283

这是在没有 maven 等的情况下生成 QR 码的完美答案 [https://stackoverflow.com/a/15510698/3173384](https://stackoverflow.com/a/15510698/3173384)

您只需要将 core.jar 放入项目中的库中

（可以在这里[输入http://repo1.maven.org/maven2/com/google/zxing/core/2.3.0/](http://repo1.maven.org/maven2/com/google/zxing/core/2.3.0/)）

并放置 2 个类 Contents.java & QRCodeEncoder.java

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-23T09:35:45.480

我放弃了使用 Java 库并选择使用带有 JS 库的 WebView。这是一个 JS 库：[http ://davidshimjs.github.io/qrcodejs/](http://davidshimjs.github.io/qrcodejs/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-02-26T03:21:28.100

也许这已经很晚了，但有人发现它很有用。我找到了一个非常小巧且智能的库[QRGen](https://github.com/kenglxn/QRGen)

示例代码：

```
Bitmap myBitmap = QRCode.from("www.example.org").bitmap();
ImageView myImage = (ImageView) findViewById(R.id.imageView);
myImage.setImageBitmap(myBitmap); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-29T06:11:13.100

[https://chart.googleapis.com/chart?chs=500x500&cht=qr&chl=data](https://chart.googleapis.com/chart?chs=500x500&cht=qr&chl=data)

使用它在线生成二维码。然后使用 picasso 加载图像。（在 url 参数中使用您的数据）我发现它是最好的方法。

# rad - 无法在 Rational Application Developer 8.0.4 中打开部署程序集选项

> ID：13507542
> 
> 赞同：1
> 
> 时间：2012-11-22T07:15:58.740
> 
> 标签：rad

我正在使用 RAD 8.0.4 版本。安装 SVN、Maven 和 PMD 等插件后，当我尝试打开任何 EAR 项目的“部署程序集”选项（右键单击->属性->部署程序集）时，它显示“当前显示的页面包含无效值”。

谁能帮我解决这个问题..？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T18:37:52.073

我有同样的问题。这是因为我的工作区中没有引用所有项目。为了解决这个问题，我不得不删除引用。为此，我必须先打开引用的项目，然后打开部署程序集，然后删除引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T03:39:52.020

我遇到了同样的问题，登录 .metadata/log 如下：

!ENTRY org.eclipse.jface 4 2 2012-11-23 11:37:45.031 !MESSAGE 从插件调用代码时出现问题：“org.eclipse.jface”。!STACK 0 java.lang.NoSuchMethodError: org/eclipse/jst/j2ee/componentcore/J2EEModuleVirtualComponent.getDefaultDeploymentDescriptorFolder(Lorg/eclipse/wst/common/componentcore/resources/IVirtualFolder;)Lorg/eclipse/core/runtime/IPath;

# c++ - 查找左上角和右下角 (C++)

> ID：13507550
> 
> 赞同：1
> 
> 时间：2012-11-22T07:16:28.267
> 
> 标签：c++, polygon

我正在为我正在进行的项目寻求帮助。

我正在做的是一个多边形逼近算法。我已经得到了边界的所有点，但是为了启动算法，我需要从点集中找到左上角和右下角的点。所有点都存储在一个结构数组中，该数组具有每个点的 x 和 y 坐标。关于循环点数组的简单方法的任何想法？

任何帮助将不胜感激。如果您需要更多信息，请询问，我会尽力提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:32:41.760

根据您的评论，左下角是`min(x+y)`，右上角是`max(x+y)`

左上方：`min(x+max(y)-y)`

右下角：`max(max(x)-x+y)`

其中内部`max`是一个常数。

尽管这可能并不总是给出与您的眼睛一致的结果。

可以根据与对象边界框角的距离或距离的平方等构建替代度量。

另一种技术是围绕原点平移多边形，然后左上角是离原点最远的点，但在左上象限......这给出了一大堆关于放置位置的选择`(0,0)`可能是所有的平均值，可能是基于某些规则的加权平均值等。如果您选择的多边形与眼睛会选择的多边形不同，那么每个规则可能会给出非常小的结果。

最后你总是可以训练一个神经网络来选择答案......这可能会导致（插入训练的置信度限制）％可能给出你同意的答案......但你和我可能不同意

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-13T09:54:31.410

左上角：min(x+max(y)-y)

右下：min(max(x)-x+y)

其中内部最大值是一个常数。

# sql-server - 使用数据库文件部署 Windows 应用程序

> ID：13507553
> 
> 赞同：1
> 
> 时间：2012-11-22T07:16:30.490
> 
> 标签：sql-server, visual-studio-2010

我已经在客户端机器上部署了我的 Windows 应用程序。但是当我运行应用程序时，由于错误的连接字符串而崩溃。在连接字符串中，我给出了 datasource=".​​/sql/myserver-name"。客户端机器没有安装 sql server。那么如何让我的应用程序在具有正确字符串的客户端计算机上运行呢？

# c++ - vptr（虚拟指针）在只有参数化构造函数的类中初始化在哪里？

> ID：13507554
> 
> 赞同：0
> 
> 时间：2012-11-22T07:16:51.047
> 
> 标签：c++, polymorphism, virtual-functions, vptr

假设我有这样的课

```
class Base
{
    private:
        int i;
        int j;
    public:
        Base(int i)
        {
            this->i = i;
            j = 0;
        }
        Base(int i, int j)
        {
            this->i = i;
            this->j = j;
        }
        virtual void f()
        {
            cout<<"in base f()"<<endl;
        }
}; 
```

VPTR 在构造函数的开头被初始化。但在这种情况下，没有默认构造函数，只有 2 个参数化构造函数。VPTR 将在哪里初始化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:18:42.547

每个构造函数都会首先初始化`vptr`伪字段。您可以想象它是每个具有一些`virtual`成员函数的 C++ 类的第一个隐藏字段。

^(理论上可以在没有虚拟表指针的情况下实现虚拟函数，但我知道没有常见的 C++ 实现这样做。)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T07:20:15.403

> **在只有参数化构造函数的类中初始化 vptr（虚拟指针）在哪里？**

严格来说，这是完全实现定义的。
然而，几乎已知的编译器通过 vptr 和 v-table 机制实现动态调度。**所有这些编译器都会初始化 vptr 以指向每个构造函数的成员初始化列表**中自己的 v-table 。

就像是：

```
Base::Base(...arbitrary params...)
   : __vptr(&Base::__vtable[0])  ← supplied by the compiler, hidden from the programmer
 {

 } 
```

**[这个](http://www.parashift.com/c++-faq-lite/virtual-functions.html#faq-20.4)**C++ FAQ 解释了到底发生了什么。

# machine-learning - 任何人都可以为 CBIR 推荐好的算法吗？

> ID：13507556
> 
> 赞同：4
> 
> 时间：2012-11-22T07:17:02.827
> 
> 标签：machine-learning, artificial-intelligence, computer-vision, image-recognition, cbir

项目：基于内容的图像检索 - 半监督（训练时对图像进行手动标记）

描述

我在数据库中有 1000000 张图像。培训是手动（监督） - 为每个图像提供标题和标签。示例：coke.jpg 标题：可乐 标签：可乐、罐头

使用图像和标签，我必须训练系统。训练后，当我给出一个新图像（已经在数据库中/全新的）时，系统应该输出图像可能属于的可能标签，并显示属于每个标签的少量图像。系统也可能说未找到匹配项。

问题：

1) 图像指纹是什么意思？预期的图像指纹大小是多少？（很重要，因为数据库中将插入数百万张图像）

2）数据库中指纹的字段格式是什么？（很重要，因为需要快速搜索……脚本应该在不到 1 秒的时间内在 1M 图像数据库中搜索）

3）我们用来分析它们的描述符（算法）是什么？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-29T19:59:25.540

好吧，这个话题很大，但这里是一个可能的解决方案的简要概述

1.  图像指纹是 SIFT 描述符的集合，这些描述符被量化以减小大小并允许索引

2.  建立数据库的倒排索引以允许通过量化描述符查找图像（您可以为此使用任何全文搜索引擎 \ DB）

3.  给定图像，查找共享大量公共描述符的图像

4.  对于那些潜在的候选人，您应该验证描述符的空间排列是否足够相似

一些帮助您入门的文章：

> [菲尔宾、詹姆斯等人。“具有大词汇量和快速空间匹配的对象检索。” 计算机视觉和模式识别，2007。CVPR'07。IEEE 会议。IEEE，2007 年。](http://www.robots.ox.ac.uk:5000/~vgg/publications/2007/Philbin07/philbin07.pdf)
> 
> [菲尔宾、詹姆斯等人。“迷失在量化中：改进大规模图像数据库中的特定对象检索。” 计算机视觉和模式识别，2008 年。CVPR 2008 年。IEEE 会议。IEEE，2008 年。](http://www.robots.ox.ac.uk:5000/~vgg/publications/2008/Philbin08/philbin08.pdf)
> 
> [米库利克、安德烈等人。“学好词汇。” 计算机视觉-ECCV 2010 (2010)：1-14。](http://image.ntua.gr/iva/files/MikulikPCM_ECCV2010%20-%20Learning%20a%20Fine%20Vocabulary.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-10T09:58:36.890

我建议在从训练图像中提取的图像特征列表上训练 SVM 模型

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T17:04:05.357

1.  图像指纹：图像的有意义的表示。当然，您不能使用单个像素。最合理的做法是最小化基之间的相关性。简而言之，如果您拍摄 64x64 图像，左上角的两个像素可能相同或相似。将每个 64^2 像素用作输入是没有用的，您需要更好的东西。试着看看主成分分析是做什么的。
2.  这完全取决于你。极端化它，你可以使用一点，它告诉你图像是否暗。更好的是，您对图像进行 PCA 并尝试不同数量的特征（并非总是越多的特征越好）
3.  无论您想要什么，都可以使用很多算法。我推荐支持向量机。易于使用且得到很好的支持。如果您有很多不同的标签，您可能必须为每个标签放置一个 SVM。这可能并不理想，您可能想尝试其他方法。

# html - 在 Windows 8 应用程序中播放 youtube 视频

> ID：13507557
> 
> 赞同：2
> 
> 时间：2012-11-22T07:17:06.183
> 
> 标签：html, windows-8, windows-runtime

我一直在尝试在 Windows 8 html5 和 javascript 应用程序中播放 youtube 视频，但没有成功！

我尝试复制粘贴 youtube 提供的用于在 default.html 正文中嵌入视频的代码，例如：

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/k07IaB9yq_U" frameborder="0" allowfullscreen></iframe> 
```

这给出了以下错误：

播放视频需要 Adob​​e Flash 播放器或支持 HTML5 的浏览器。获取最新的 Flash 播放器 了解有关更新 HTML5 浏览器的更多信息。

当我尝试使用带有上一个链接的视频标签时，例如：

```
<video src="http://www.youtube.com/embed/k07IaB9yq_U" controls></video> 
```

它说一个无效的来源！

这样做的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T12:38:10.470

YouTube 有一个测试程序，可以提供一些 HTML5 视频。你可以[在这里](http://www.youtube.com/html5)加入。完成后，您应该能够通过导航到 YouTube URL 将 HTML5 YouTube 视频嵌入到 WebView 控件中。

Flash 视频无法在 Metro 风格应用程序中显示。

webview控件的代码

```
string htmlFragment =
@"<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN' 'http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'>
            <html>
               <head>
                  <title>YouTubePagesample</title>
               </head>
               <iframe width='560' height='315' src='http://www.youtube.com/embed/{YoutubeID}' frameborder='0' allowfullscreen></iframe>
               <body>
               </body>
            </html>;";
        this.webView.NavigateToString(htmlFragment); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-08T13:18:32.137

使用 setInnerHTMLUnsafe 方法，因为 win 8 应用程序不喜欢在应用程序中注入外部 JS。videoPlayer 是您要添加嵌入的 div。

```
 var content = '<iframe width="480" height="270" src="http://www.youtube.com/embed/8sPj0Ic8KQ8?rel=0" frameborder="0" allowfullscreen></iframe>' ;
 WinJS.Utilities.setInnerHTMLUnsafe(videoPlayer, content); 
```

# asynchronous - Dart 中的异步编程

> ID：13507562
> 
> 赞同：4
> 
> 时间：2012-11-22T07:17:25.323
> 
> 标签：asynchronous, dart

我与java有关如何执行线程/异步。我使用 new Thread(target).start() 其中 target 是 Runnable 作为在 java 中执行线程的一种方法。新的并发 api 有替代方案，但我们知道在特定的调用中，新线程正在创建并执行传入的任务。

同样，在 Dart 中异步是如何完成的？我阅读了发送/接收端口、完成者/未来、spawnFunction。对我来说，只有 spawnFunction 是令人信服的声明，它将创建新线程。可以解释一下完成者/未来的帮助。我知道他们接受回调，但是 javascript/dart 中是否有一些隐含的逻辑/规则，回调总是在不同的线程中执行。

下面是飞镖片段/伪代码：

```
void callback() {
  print("callback called");
}

costlyQuery(sql, void f()) {
  executeSql(sql);
  f();
}

costlyQuery("select * from dual", callback); 
```

我希望我的 costlyQuery 签名作为第二个参数是正确的。所以现在我认为`f()`after不会`executeSql(sql)`是异步的。如果可以使异步帮助我理解，可能会采用上面的示例添加完成者/未来。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T09:42:46.520

**tl;dr**：没有隐含的规则是回调不会阻塞。

## Javascript 事件队列

在 Javascript 中，没有线程（WebWorkers 除外，但这是不同的）。这意味着如果您的代码的任何部分阻塞，整个应用程序都会被阻塞。回调没有什么神奇之处，它们只是函数：

```
function longLoop(cb) {
    var i = 1000000;
    while (i--) ;
    cb();
}

function callback() {
    console.log("Hello world");
}

function fun() {
    longLoop(callback);
    console.log("Called after Hello World is printed");
} 
```

要进行异步操作，必须将回调放在事件队列中，这仅通过一些 API 调用发生：

*   用户发起的事件处理程序——点击、键盘、鼠标
*   API 事件处理程序 - XmlHTTPRequest 回调、WebWorker 通信
*   计时函数 - setTimeout, setInterval

当事件被触发时，回调被放置在事件队列中，待所有其他回调完成执行后执行。**这**意味着不会有两行代码同时执行。

## 期货

我想你至少偶然发现了[这篇关于期货的帖子](http://blog.sethladd.com/2012/03/using-futures-in-dart-for-better-async.html)。如果不是，那么它是一本好书，并且直接来自马口。

在 Javascript 中，您必须做一些工作才能理解异步代码。甚至还有一个名为[futures](https://github.com/coolaj86/futures)的 Javascript 库，用于处理常见的事情，例如异步循环和序列（完全公开，我亲自与这个库的作者合作过）。

未来的概念是由创建未来的功能做出的承诺，即未来将在未来的某个时候完成。如果您要进行一些异步调用，请创建一个未来，将其返回，并在异步调用完成时履行承诺。来自博客文章：

```
Future<Results> costlyQuery() {
    var completer = new Completer();

    database.query("SELECT * FROM giant_table", (results) {
        // when complete
        completer.complete(results);
    });

    // this returns essentially immediately,
    // before query is finished
    return completer.future; 
} 
```

如果 database.query 是阻塞调用，future 将立即完成。这个例子假设`database.query`是一个非阻塞调用（异步），所以future会在这个函数退出后实现。将使用指定的参数`completer.complete`调用传递给的任何函数。`completer.then()`

您的示例，修改为惯用和异步：

```
void callback() {
  print("callback called");
}

costlyQuery(sql) {
  var completer = new Completer();
  executeSql(sql, () => completer.complete());
  return completer.future;
}

costlyQuery("select * from dual").then(callback); 
```

这是异步的并正确使用期货。您可以将自己的回调函数传递给`costlyQuery`您所做的事情，并在回调中调用它`executeSql`以实现相同的目的，但这是 Javascript 的做法，而不是 Dart 的方式。

## 分离物

隔离类似于 Java 的线程，除了隔离是并发模型和线程是并行模型（有关并发与并行的更多信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/1050222/concurrency-vs-parallelism-what-is-the-difference)）。

Dart 的特殊之处在于规范不要求所有内容都在单个线程中运行。它只要求不同的执行上下文不能访问相同的数据。每个隔离区都有自己的内存，并且只能通过发送/接收端口与其他隔离区通信（例如发送数据）。

如果您熟悉的话，这些端口的工作方式类似于 Go 中的通道。

隔离是独立于其他代码运行的隔离执行上下文。在 Javascript 术语中，这意味着它有自己的事件队列。请参阅[Dart 导览](http://www.dartlang.org/docs/dart-up-and-running/ch03.html#ch03-dartisolate---concurrency-with-isolates)，了解更完整的隔离物介绍。

假设您的 executeSql 是一个阻塞函数。如果我们不想等待它完成，我们可以将它加载到隔离中：

```
void callback() {
    print("callback called");
}

void costlyQuery() {
    port.receive((sql, reply) {
        executeSql(sql);
        reply.send();
    });
}

main() {
    var sendPort = spawnFunction(costlyQuery);

    // .call does all the magic needed to communicate both directions
    sendPort.call("select * from dual").then(callback);

    print("Called before executeSql finishes");
} 
```

此代码创建一个隔离，向其发送数据，然后在完成时注册一个回调。即使`executeSql`阻塞，`main()`也不一定会阻塞。

# extjs - 使用 extjs 将值从 responseText 分配给文本框

> ID：13507563
> 
> 赞同：0
> 
> 时间：2012-11-22T07:17:29.753
> 
> 标签：extjs

我正在使用 EXTjs 并尝试通过 ajax 连接到服务器并以 xml 格式获取输出。有 3 个文本框需要填充这些 xml 值

response.responseText 给了我结果，但是 response.responseXML 给了 null。有什么方法可以将 responseText 转换为 responseXML，然后将值分配给文本框。有人能帮帮我吗？

```
function getXML(){
    Ext.Ajax.request({
            url : 'url',
            params  : {
                   method   : 'runxml'
                },
            method  : 'POST',
            success : function(response, options) {
                alert(response.responseXML);
                alert(response.responseText);       

            },
            failure : function(response, options) {
                Ext.MessageBox.show({
                    title   : 'Error On retrieve value from server',
                    msg : 'An error occur during retrieve value from server',
                    buttons : Ext.MessageBox.OK,
                    icon    : Ext.MessageBox.ERROR,
                    width   : 400
                    });
                },
                disableCaching  : true
            });
            }

} 
```

我从 response.responseText 得到的输出是

```
<wddxPacket version='1.0'><header/>
<data><string>&lt;?xml version="1.0" encoding="iso-8859-1" ?&gt;
<char code='0a'/>&lt;TABLE&gt;
<char code='0a'/>&lt;LIMITS&gt;
<char code='0a'/>&lt;UCL&gt; 5.23145 &lt;/UCL&gt;
<char code='0a'/>&lt;CTL&gt; 3.0269 &lt;/CTL&gt;
<char code='0a'/>&lt;LCL&gt; 1.458&lt;/LCL&gt;
<char code='0a'/>&lt;/LIMITS&gt;
<char code='0a'/>&lt;/TABLE&gt;
<char code='0a'/></string></data></wddxPacket> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:07:07.490

Have you set the Content-Type header in the HTTP response as "text/xml" or "application/xml". Because for browser to parse a returned XML document, the Content-Type header in the HTTP response must be set to "text/xml" or "application/xml". This is very important - the XmlReader will not work correctly otherwise.

# jquery - 在Jquery中单击另一个对象时为对象设置动画

> ID：13507564
> 
> 赞同：3
> 
> 时间：2012-11-22T07:17:31.050
> 
> 标签：jquery, animation, button, click, move

我已经编写了一个音板。鼠标悬停在一个按钮上，单击它，就会播放特殊的声音。当鼠标悬停在按钮上时，每个按钮的图片会变为按下状态。我的问题是，一旦单击按钮#5（中间的那个），我不知道如何将图片从屏幕左侧移动到右侧 500 像素。图片就是这个 facebook 图标，就像下面的占位符代码一样！

```
 <!DOCTYPE html>
    <html>
     <head>
     <link rel="stylesheet" type="text/css" href="styles.css" />
 <script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>
<script type="text/javascript">

    $('#button5').click(function() {
            $('#cat').animate({
                    right: '+=500'
                    }
                    , 5000 );
                });
});
    $(document).ready(function ()
    {
        var audioon = false;

        $('.button').click(function () 
        { 
            var audioObj = $(this).find("audio");
            var audioTag = audioObj[0];
            audioTag.volume = 0.90;

            if (audioon)
            {
                audioTag.pause();
                audioon = false;

            } else {
                audioTag.play();
                audioon = true;
            }

    });
});
</script>

    <title>Square 205 Soundboard</title>
</head>
<body>
<div class="container">
<div="buttons">
<div id="cat">
<img src="http://www.avca.org/includes/media/images/facebook-icon-small.jpg">
</div>
    <div class="row">
        <div id="button1" class="button">
            <audio preload="none">
                <source src="sounds/DBZ.mp3" type="audio/mpeg">
            </audio>
        </div>
        <div id="button2" class="button">
            <audio preload="none">
                  <source src="sounds/GD.mp3" type="audio/mpeg">
            </audio>
        </div>
        <div id="button3" class="button">
            <audio preload="none">
                <source src="sounds/LeanneBoops.mp3" type="audio/mpeg">
            </audio>
        </div>
    </div>
    <div class="row">
        <div id="button4" class="button">
            <audio preload="none">
                <source src="sounds/MakeMeMoney.mp3" type="audio/mpeg">
            </audio>
        </div>
        <div id="button5" class="button">
            <audio preload="none">
                <source src="sounds/Meow.mp3" type="audio/mpeg">
            </audio>
        </div>
        <div id="button6" class="button">
            <audio preload="none">
                <source src="sounds/Yeah.mp3" type="audio/mpeg">
            </audio>
        </div>
    </div>
    <div class="row">
        <div id="button7" class="button">
            <audio preload="none">
                <source src="sounds/Dang.mp3" type="audio/mpeg">
            </audio>
        </div>
        <div id="button8" class="button">
            <audio preload="none">
                <source src="sounds/Benny.mp3" type="audio/mpeg">
            </audio>
        </div>
        <div id="button9" class="button">
            <audio preload="none">
                <source src="sound.mp3" type="audio/mpeg">
            </audio>
        </div>
    </div>
    <div class="row">
        <div id="button10" class="button">
            <audio preload="none">
                <source src="sound.mp3" type="audio/mpeg">
            </audio>
        </div>
    </div>

    </div>
</div>

</body>

</html>

**CSS**

    body {
    background-color: white;
}

audio {
    display: none;
}

.container {
    width:960px;
    margin:0 auto;
    background:url(buttons/frame.png) no-repeat center top;
    padding-bottom: 110px;
    padding-top: 20px;
}

.row {
    width:100%;
    text-align:center;
}

.button:hover {
    cursor:pointer;
}

.row div{
    display: inline-block;
    margin-right: 2px;
}

.button {
    height:143px;
    width:143px;
}

#button1 {
    background:url(buttons/button1.png) no-repeat;
}

#button1:hover
{
    background:url(buttons/button1p.png) no-repeat;
}

#button2 {
    background:url(buttons/button2.png) no-repeat;
}

#button2:hover
{
    background:url(buttons/button2p.png) no-repeat;
}

#button3 {
    background:url(buttons/button3.png) no-repeat;
}

#button3:hover
{
    background:url(buttons/button3p.png) no-repeat;
}

#button4 {
    background:url(buttons/button4.png) no-repeat;
}

#button4:hover
{
    background:url(buttons/button4p.png) no-repeat;
}

#button5 {
    background:url(buttons/button5.png) no-repeat;
}

#button5:hover
{
    background:url(buttons/button5p.png) no-repeat;
}

#button6 {
    background:url(buttons/button6.png) no-repeat;
}

#button6:hover
{
    background:url(buttons/button6p.png) no-repeat;
}

#button7 {
    background:url(buttons/button7.png) no-repeat;
}

#button7:hover
{
    background:url(buttons/button7p.png) no-repeat;
}

#button8 {
    background:url(buttons/button8.png) no-repeat;
}

#button8:hover
{
    background:url(buttons/button8p.png) no-repeat;
}

#button9 {
    background:url(buttons/button9.png) no-repeat;
}

#button9:hover
{
    background:url(buttons/button9p.png) no-repeat;
}

#button10 {
    background:url(buttons/button1.png) no-repeat;
}

#button10:hover
{
    background:url(buttons/button1p.png) no-repeat; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:19:25.953

### CSS

```
#cat { position : relative; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T17:01:20.773

由于不包含源图像，因此测试它有点困难，而且您要完成的工作并不完全清楚，但我会试一试。您的 javascript 的第一部分存在语法错误，一个额外的 });。此外，点击处理程序应该放在 $(document).ready() 中。css 的最后一行省略了一个括号，尽管我确信在复制和粘贴过程中忘记了它。此外，Atif 是正确的 - position: relative 应该应用于动画的目标。这是重写的脚本：

```
<script type="text/javascript">
$(document).ready(function() 
{
    var audioon = false;

    $('.button').click(function() 
    {
        var audioObj = $(this).find("audio");
        var audioTag = audioObj[0];
        audioTag.volume = 0.90;

        if (audioon) 
        {
            audioTag.pause();
            audioon = false;

        } else 
        {
            audioTag.play();
            audioon = true;
        }

    });
    $('#button5').click(function() 
    {
        $('#cat').animate(
        {
            right : '+=500'
        }, 5000);
    });
});
</script> 
```

# latex - 不规则的 gnuplot x 值

> ID：13507565
> 
> 赞同：4
> 
> 时间：2012-11-22T07:17:32.220
> 
> 标签：latex, gnuplot

`k-selection`我有一些具有不规则 x 值的数据（算法的基准测试结果）。我明确标记了它们（1、50、100、500、1000、2500 和 5000）。

因为这些值不是线性增加（或指数增加，尽管将 x 轴设为对数刻度确实会稍微改善一些情况，但 bug 会在 1 到 50 之间留下巨大的差距），它们奇怪地散开并聚集在一起。有没有办法缩放 x 轴，以便以均匀的间距绘制这些数据点？

下面是网格间距的示例（标签和图例在 eps 文件中不可见，这些是稍后由 graphicsx 包绘制的）以及我正在使用的 gnuplot 命令。

![网格间距](../Images/34f6881de9279164d6582e129c3d44cf.png)

```
set terminal epslatex

set xlabel 'k'
set ylabel 'seconds'

set tic scale 0
set key Left outside

set xtics rotate
set xtics ('1' 1, '50' 50, '100' 100, '500' 500, '1000' 1000, '2500' 2500, '5000' 5000)

set logscale y
set logscale x
set style data linespoints

set output 'selection.tex'

plot '../data/selection.dat' u 1:($2/1000) t 'Sort', \
     '../data/selection.dat' u 1:($3/1000) t 'Partial Sort', \
     '../data/selection.dat' u 1:($4/1000) t 'Heap', \
     '../data/selection.dat' u 1:($5/1000) t 'Partial Heap', \
     '../data/selection.dat' u 1:($6/1000) t 'Order Statistics' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T13:56:01.070

最干净的方法是使用以下`xticlabels`命令：

```
plot '../data/selection.dat' u ($2/1000):xticlabels(1) t 'Sort', \... 
```

这从第一列获取值并将其用作 x 轴标签，同时将第二列用作数据。

这有点像使用命令

```
plot 'file' u 2 
```

它只是将第二列中的数据与虚拟索引 (1,2,3,4...) 进行对比。这为数据点提供了均匀的间距，这似乎是您想要的。

# php - php 5.3.13 ffmpeg Windows 7 64bit 不工作 wamp 服务器

> ID：13507566
> 
> 赞同：4
> 
> 时间：2012-11-22T07:17:36.117
> 
> 标签：php, ffmpeg, 64-bit, wampserver

在使用带有 php 5.3.13 和 ffmpeg 扩展 32 位的 WampServer 版本 2.2 在 Windows 7 64 位机器上安装 ffmpeg 时，我遇到了以下问题

我没有找到 ffmpeg 分机。32位..

> PHP 启动：无法加载动态库 'c:/wamp/bin/php/php5.3.13/ext/php_ffmpeg.dll' - %1 不是有效的 Win32 应用程序。

# events - 在 Go 中监听事件的惯用方法是什么？

> ID：13507568
> 
> 赞同：2
> 
> 时间：2012-11-22T07:17:38.123
> 
> 标签：events, concurrency, go, idioms, event-loop

几个月前，我在考虑如何在 Go 中为 RPC 库实现**可关闭的事件循环。**我设法促进像这样关闭服务器：

```
type Server struct {
    listener net.Listener
    closeChan chan bool
    routines sync.WaitGroup
}

func (s *Server) Serve() {
    s.routines.Add(1)
    defer s.routines.Done()
    defer s.listener.Close()

    for {
        select {
            case <-s.closeChan:
                // close server etc.
            default:
                s.listener.SetDeadline(time.Now().Add(2 * time.Second))
                conn, _ := s.listener.Accept()
                // handle conn routine
        }
    }
}

func (s *Server) Close() {
    s.closeChan <- true // signal to close serve routine
    s.routines.Wait()
} 
```

我发现这个实现的问题是它涉及超时，这意味着最短关闭时间比它可能的时间多 2 秒。有没有更惯用的方法来创建事件循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:34:50.517

我认为 Go 中的事件循环不需要是循环。

在单独的 goroutine 中处理关闭和连接似乎更简单：

```
go func() {
    <-s.closeChan
    // close server, release resources, etc.
    s.listener.Close()
}()
for {
    conn, err := s.listener.Accept()
    if err != nil {
         // log, return
    }
    // handle conn routine
} 
```

请注意，您也可以在不使用通道的情况下直接在 Close 函数中关闭侦听器。我这里做的是使用Listener.Accept的错误返回值来方便程序间通信。

如果在关闭和连接处理实现的某个时刻，您需要保护正在关闭的某些资源，而您正在回答，您可以使用[Mutex](http://golang.org/pkg/sync/#Mutex)。但通常可以避免这种情况。

# android - 将图像视图设置为 AlertLog 图标

> ID：13507569
> 
> 赞同：1
> 
> 时间：2012-11-22T07:17:42.160
> 
> 标签：android

在我的 Android 应用程序中，我有一个警报日志和一个图像视图。现在我要做的是将图像视图或图像视图的图像位图设置为我的警报日志图标。我尝试了这个代码，但它现在可以工作了。

```
alert.setIcon(R.Id.Image); 
```

有人对这个问题有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:21:51.350

只需更换`R.Id.Image`to`R.drawable.Image`

```
 AlertDialog myQuittingDialogBox =new AlertDialog.Builder(this) 
        //set message, title, and icon
        .setTitle("Title") 
        .setMessage("Message?") 
        .setIcon(R.drawable.Image)

       ....
      .create();
        return myQuittingDialogBox;

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:25:35.087

您可以参考此内容以了解如何创建带有徽标的警报对话：

[关联](https://stackoverflow.com/a/13506632/1627599)

# c# - 如何在 Windows 8 Metro App StreamSocket 而不是 localhost 中打开 gchat 连接？

> ID：13507572
> 
> 赞同：1
> 
> 时间：2012-11-22T07:18:06.310
> 
> 标签：c#, windows-8

我从 msdn看到了一个**StreamSocket示例**

[http://code.msdn.microsoft.com/windowsapps/StreamSocket-Sample-8c573931](http://code.msdn.microsoft.com/windowsapps/StreamSocket-Sample-8c573931)

在上面的示例中，他们已经连接到**localhost**并发送消息，我们能否连接到**talk.google.com**并启用**聊天**。

如果有人知道方法请告诉我！

# node.js - 是否可以使用 tsc 命令将单个 TypeScript 文件编译到输出路径？

> ID：13507576
> 
> 赞同：18
> 
> 时间：2012-11-22T07:18:25.683
> 
> 标签：node.js, typescript, tsc

为了将我的 .ts 源文件与 .js 输出分开，我试图在 TypeScript 中实现一个正式的文件观察器，似乎不存在为单个文件指定输出路径的能力。

流程，为了清楚起见：我开始查看我的整个`src`目录，`src/views/HomeView.ts`对`public/js/views/HomeView.js`.

使用`tsc myfile.ts --out myfile.js`它遍历所有模块并在 .ts 文件存在的相同路径中编译每个模块，而不将最终文件放置在正确指定的路径中。但是，它*确实会*创建一个空文件，我希望它最终会在其中结束。

我在想：

1）是否可以使用`--out`参数并*只*编译一个文件？我不希望它遍历导入并编译每个文件，而只是在编译时进行语法/错误检查（这只是次要要求，不是必需的）；和

2) 编译器中是否存在阻止它正确组合/创建文件的错误？同样，路径指令中的最终输出`--out`为空，但确实创建了一个文件。

任何帮助，将不胜感激。

*** 更新 ***

虽然我不想结束这个问题，因为我相信这仍然是一个问题，但我继续实施核心 TypeScript 编译器来实现我需要做的事情，`tsc`完全绕过。有关更多信息和用法，请参阅[https://github.com/damassi/TypeScript-Watcher](https://github.com/damassi/TypeScript-Watcher)。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-26T14:14:04.330

当您使用该`--out`参数时，您会得到一个文件，编译器会遍历依赖项并为最终文件计算出正确的顺序。

例如...

```
tsc --out final.js app.ts 
```

将在其中找到任何依赖`app.ts`项并全部编译它们。在它计算出正确的顺序后，它将把所有的 JavaScript 保存在`final.js`. 如果此 JavaScript 文件为空，则通常表示编译器错误。

不能仅使用该`--out`参数为您指定的 TypeScript 文件生成 JavaScript 文件，除非该文件没有依赖项。

# character-encoding - vb脚本中的法语文本

> ID：13507579
> 
> 赞同：1
> 
> 时间：2012-11-22T07:18:38.293
> 
> 标签：character-encoding, vbscript

嗨，我需要在带有特殊字符的 vb 脚本中包含法语文本 - REJETÉE。当我添加文本时，它显示为 REJETÃ‰E。我如何包括以下内容？我可以使用：É 或 É。但它显示了例外。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:30:51.550

Visual Basic 本身只支持 ASCII 字符。'É' 是一个 ANSI 字符，因此不受支持。

如果您正在写入文本文件，您可能希望打印字符的直接 ANSI 值。如果您现在使用使用 ANSI 编码的文本编辑器，您将正确看到“É”。

此外，也许以下内容可以作为调试输出，您必须尝试一下：

```
Debug.Print chr$(200) 
```

写入值 200 时应该得到“È”字符。正如我所说，我不知道这是否适用于调试打印机，但在写入文本文件时它会起作用。

# winapi - 如何使用 SetFilePointerEx 预期的 LARGE_INTEGER 参数？

> ID：13507581
> 
> 赞同：1
> 
> 时间：2012-11-22T07:18:43.253
> 
> 标签：winapi

我正在进行随机文件访问以在其中写入日志记录。后来，我确实根据日志编号访问了日志。使用日志编号，我确实计算了记录的偏移量并直接访问它。函数 SetFilePointerEx 用于设置文件中的当前位置，从那里我可以直接读取记录。

该函数需要 LARGE_INTEGER 作为参数。如何将 LARGE_INTEGER 用于 SetFilePointerEx 函数？请求。注释说该程序将针对 64 位操作系统。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T07:57:45.070

假设`LARGE_INTEGER li;`，只需设置为文件偏移量所需`li.QuadPart`的值并用于调用中的偏移量参数。还是我错过了一些明显的东西。？`LONGLONG``li`

```
LARGE_INTEGER li, lo={0};
li.QuadPart = yourOffsetValue;

SetFilePointerEx(hFile, li, &lo, FILE_BEGIN); 
```

# ios - iOS 的邮件客户端的 UIElement 是什么？

> ID：13507587
> 
> 赞同：1
> 
> 时间：2012-11-22T07:19:07.290
> 
> 标签：ios, email, uielement

![http://zapt3.staticworld.net/images/article/2012/09/ios6-mail-thum-100004989-large.jpg](../Images/3b96a2b4673507330d2da06cbeec27df.png)

如您所见，iOS Mail 客户端可以看到一些丰富的电子邮件，所以，它似乎不是 TextArea，Mail Client 使用的是什么？一个 UIWebView？还是定制的东西？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:25:10.047

`WebView`电子邮件包含 HTML 内容，无论您使用什么现代电子邮件客户端，该内容始终呈现在`UIWebView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:26:41.417

它不能是任何默认值`UIElement`。我认为这是一个自定义视图

# android - 如何使用 achart 引擎更改饼图系列标签文本的默认颜色？

> ID：13507588
> 
> 赞同：1
> 
> 时间：2012-11-22T07:19:07.840
> 
> 标签：android, pie-chart, achartengine

我想用一些值创建饼图。我创建了这样的饼图

![在此处输入图像描述](../Images/8abbb76068bb8029dd9399a6269cc549.png)

现在我想更改标签文本颜色并减少饼图和图例之间的间隙/空间。我怎样才能做到这一点？有人可以帮我解决这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:58:20.377

您可以通过这种方式更改标签颜色：

```
renderer.setLabelsColor(Color.BLUE); 
```

您可以使饼图更大，这样可以使其更接近图例：

```
renderer.setScale(1.25f); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:18:31.133

```
 change the following things:=  

     // set up gradient paints for series...
    GradientColor gp0 = new GradientColor(Color.YELLOW, Color.rgb(2, 2, 64));
    GradientColor gp1 = new GradientColor(Color.WHITE, Color.rgb(0, 64, 0));
    GradientColor gp2 = new GradientColor(Color.YELLOW, Color.rgb(64, 0, 0));
    renderer.setSeriesPaintType(0, gp0);
    renderer.setSeriesPaintType(1, gp1);
    renderer.setSeriesPaintType(2, gp2); 
```

# sql - 表列在sql中拆分为两列？

> ID：13507592
> 
> 赞同：1
> 
> 时间：2012-11-22T07:19:30.510
> 
> 标签：sql, sql-server, pivot

在 sql server 中，我在表中有一个列，我想在另一个表 [新表] 中创建两列中的列。你能帮助我吗。

```
------------------------
  Type
  ------------------------
  UserDefine

  UserDefine

  AutoGenerate

  AutoGenerate

  UserDefine
 ------------------------- 
```

以上是我的一个表中的列，现在我想在两个表中创建列，如 UserDefine 和 Autogenerate 列在不同的表中

```
 -----------------------------------
   UserDefine        | AutoGener      |
  ------------------------------------|
  UserDefine         |   AutoGenerate | 
                     |                |
  UserDefine         |   AutoGenerate |
 --------------------------------------- 
```

像上面一样，帮我谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:31:41.373

我会使用两个插入，一个用于“UserDefine”值，另一个用于“AutoGenerate”

```
INSERT INTO NewTable (UserDefine) SELECT Type FROM OldTable WHERE Type = "UserDefine"

INSERT INTO NewTable (UserDefine) SELECT Type FROM OldTable WHERE Type = "AutoGenerate" 
```

将 where 子句更改为适当的条件以区分这两种类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:38:37.000

尝试这个：

```
;WITH CTE
AS
(
  SELECT *, ROW_NUMBER() OVER(PARTITION BY [Type] ORDER BY [Type]) rownum
  FROM Table1
)
SELECT 
  MAX(CASE WHEN [Type] = 'AutoGenerate' THEN [Type] END) AS 'AutoGenerate',
  MAX(CASE WHEN [Type] = 'UserDefine' THEN [Type] END) AS 'UserDefine'
FROM CTE
WHERE Rownum <= 2
GROUP BY Rownum; 
```

## [SQL 小提琴演示](http://sqlfiddle.com/#!3/cf6de/17)

# java - Java：根据动态生成的文本字段名称更改变量？

> ID：13507594
> 
> 赞同：2
> 
> 时间：2012-11-22T07:19:45.777
> 
> 标签：java, swing, variables, dynamic, jtextfield

我有一个带有变量“优先级”的 TrainingClass 对象的 ArrayList。

我正在制作一个设置框架，其中对于当前在 ArrayList 中的每个元素，我都会在其中设置一个用户设置优先级的 TextField。

它是这样生成的

```
for (TrainingClass tclass : mTrainingClasses) {
                  //Loop the ArrayList
        JTextField txtPriority = new JTextField(3);
        txtPriority.setBounds(10,10,100,20);
        txtPriority.setText("" + tclass.getPriority());
        getContentPane().add(txtPriority);
 } 
```

现在我要添加一个更改侦听器，但是...

一旦我知道哪个字段已更改，如何访问 ArrayList mTrainingClasses 的正确元素？

例如，在 php 中，我会简单地制作如下内容：

```
 $mTrainingClasses->$changed_field->setPriority($new_value); 
```

但是，据我了解，我不能在 Java 中做到这一点。那么，我应该如何进行呢？

我是否需要为每个元素手动设置字段名称和侦听器？我确定还有其他解决方案，但目前我不知道。

（我知道我也可以将 ArrayList 用于字段，例如

```
txtPriority.add(new JTextField(3)); 
```

但是在这种情况下，我怎么知道哪个索引对应于已更改的字段？)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T07:31:17.247

有几种选择：

*   将元素传递`TrainingClass`给您附加到文本字段的侦听器。这将需要在`for`您可以访问`TrainingClass`和`JTextField`变量的循环中附加侦听器
*   `Map`按照@Ted Hopp的建议使用
*   `List`按照您的建议使用 a 。诀窍是在 中存储一个索引，`JTextField`以便之后您知道哪个`JTextField`对应于`List`. 您可以为此使用`JComponent#putClientProperty`和。`JComponent#getClientProperty`
*   您可以使用这些`JComponent#putClientProperty`和`JComponent#getClientProperty`方法`TrainingClass`直接存储变量

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-22T07:30:52.680

有一个文本字段列表

```
List<JTextField> textFields = new ArrayList<JTextField>(); 
```

像下面这样更改循环，将所有文本字段添加到上面的列表中

```
for (TrainingClass tclass : mTrainingClasses) {
        //Loop the ArrayList
        JTextField txtPriority = new JTextField(3);
        txtPriority.setBounds(10,10,100,20);
        txtPriority.setText("" + tclass.getPriority());
        getContentPane().add(txtPriority);
        textFields.add(txtPriority);
} 
```

在您的听众中，您可以执行以下操作

```
mTrainingClasses.get(textFields.indexOf((JtextField) event.getSource())); 
```

以上将返回已更改的 TrainingClass。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T07:50:24.793

您需要 JTextField 和 TrainingClass 之间的某种映射。要么使文本字段成为您的类的属性，要么制作一个映射两者的映射。

```
Map<TrainingClass, JTextField> myMap= new HashMap<TrainingClass, JTextField>();

for (TrainingClass tclass : mTrainingClasses) {
              //Loop the ArrayList
    JTextField txtPriority = new JTextField(3);
    txtPriority.setBounds(10,10,100,20);
    txtPriority.setText("" + tclass.getPriority());
    getContentPane().add(txtPriority);

    // map the textField to the training class
    myMap.put(txtPriority, tclass);
} 
```

当侦听器方法中的字段发生变化时，您只需调用：

```
public void eventListenerMethod(InputEvent e) {
     JTextField fieldThatGeneratedEvent= e.getSource();
     TrainingClass tClass= myMap.get(fieldThatGeneratedEvent);
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-22T07:26:07.767

在您的循环中，您可以填充一个`Map<JTextField, TrainingClass>`. 然后您可以使用它从更改的字段中查找元素。

```
Map<JTextField, TrainingClass> fieldMap = new HashMap<>();
for (TrainingClass tclass : mTrainingClasses) {
    //Loop the ArrayList
    JTextField txtPriority = new JTextField(3);
    txtPriority.setBounds(10,10,100,20);
    txtPriority.setText("" + tclass.getPriority());
    getContentPane().add(txtPriority);
    map.put(txtPriority, tclass);
} 
```

或者，您可以继承 JTextField 并声明一个数据字段，然后您可以在事件处理中直接引用该字段。

# javascript - 用一个数组填充多个下拉列表

> ID：13507596
> 
> 赞同：0
> 
> 时间：2012-11-22T07:19:51.753
> 
> 标签：javascript, html

大家好，我有一个简单的问题让我很难过。我真的不知道该怎么办。我有这样的功能。

```
 function getThevalues(data) {
     for (var i = 1; i < data.d.length; i++) {

         MystartingLocation[i] = {}
         MystartingLocation[i]["locName"] = {}
         MystartingLocation[i]["locNode"] = {}

                var Opts  = document.createElement("option");
                var Opt = document.createElement("opo");
                MystartingLocation[i]["locNode"] = data.d[i].locNode;
                MystartingLocation[i]["locName"] = data.d[i].locName;
                Opts.text = data.d[i].locName;
                //Opt.text = data.d[i].locName;
                try {
                    document.getElementById("StartLocations").options.add(Opts);
                    document.getElementById("EndLocations").options.add(Opts);

                 }
       catch (e) {console.log(e);}

     }
 } 
```

我正在尝试用相同的值填充起始位置和结束位置下拉列表，但我尝试的每次尝试只填充其中一个结束位置。我在做什么错？有人可以指出我正确的方向。谢谢米格尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:21:54.283

您不能将相同的元素添加到文档中的两个位置。

您需要创建两个`option`元素或克隆您拥有的元素。

```
document.getElementById("EndLocations").options.add(Opts.cloneNode(true)); 
```

* * *

使用两个`option`元素看起来像这样：

```
 function getThevalues(data) {
     for (var i = 1; i < data.d.length; i++) {

         MystartingLocation[i] = {}
         MystartingLocation[i]["locName"] = {}

         var OptA = document.createElement("option");
         var OptB = document.createElement("option");

         MystartingLocation[i]["locNode"] = data.d[i].locNode;

         OptA.text = data.d[i].locName;
         OptB.text = data.d[i].locName;

         try {
             document.getElementById("StartLocations").options.add(OptA);
             document.getElementById("EndLocations").options.add(OptB);
         }
         catch (e) {console.log(e);} 
     }
 } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T07:21:57.310

你带着同一个孩子，并移动它。

```
document.getElementById("StartLocations").options.add(Opts);
document.getElementById("EndLocations").options.add(Opts); 
```

`Opts`变量被添加到，然后`StartLocations`从那里拉出并添加到`EndLocations`.

如果您注释掉第二行并运行您的代码，您会看到这种情况：

```
document.getElementById("StartLocations").options.add(Opts);
//document.getElementById("EndLocations").options.add(Opts); 
```

您需要创建两个不同的`<option>`元素，并分别附加每个元素。

* * *

在行动：

```
function getThevalues(data) {
    var optStart;
    var optEnd;

    for (var i = 1; i < data.d.length; i++) {
        optStart = document.createElement("option");
        optEnd= document.createElement("option");

        optStart.text = data.d[i].locName;
        optEnd.text = data.d[i].locName;

        document.getElementById("StartLocations").options.add(Opts);
        document.getElementById("EndLocations").options.add(Opts);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:23:06.007

不需要线

```
MystartingLocation[i]["locName"] = {}
MystartingLocation[i]["locNode"] = {} 
```

因为它将在对象中嵌套对象

# inno-setup - 是否可以根据操作系统语言运行不同的代码？

> ID：13507599
> 
> 赞同：1
> 
> 时间：2012-11-22T07:19:59.027
> 
> 标签：inno-setup

如果根据操作系统的语言安装不同的文件（例如英文 Windows、简体中文 Windows、繁体中文 Windows 等）？这可能吗？

例如：我想做以下事情：

```
[code]
function InitializeSetup(): Boolean;  

if " OS Language is English" then begin
   MsgBox('This is English Version ?', mbConfirmation, MB_YESNO or MB_DEFBUTTON2) = IDNO  
else if " OS Language is Traditional Chinese" 
   MsgBox('This is Traditional Chinese ?', mbConfirmation, MB_YESNO or MB_DEFBUTTON2) = IDNO 
end; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:09:08.647

You can use the [GetUILanguage](http://www.jrsoftware.org/ishelp/topic_isxfunc_getuilanguage.htm) support function to detect the OS language.

So you can code like this:

```
const
  LangEnglish = $09;
  LangSpanish = $0A;
  LangFrench = $0C;

if GetUILanguage and $3FF = LangEnglish then
  MsgBox('This is English Version!', mbInformation, MB_YES)
else if GetUILanguage and $3FF = LangSpanish then
  MsgBox('Esta es la versión en español!', mbInformation, MB_YES)
else if GetUILanguage = $0C01 then
  MsgBox('This is Arabic-Egypt Version!', mbInformation, MB_YES) 
```

Documentation of: [language constants](http://msdn.microsoft.com/en-us/library/dd318693.aspx)

# linux - 摆脱“gcc - /usr/bin/ld：未找到警告库”

> ID：13507600
> 
> 赞同：30
> 
> 时间：2012-11-22T07:20:03.100
> 
> 标签：linux, gcc, compilation

我在链接期间收到以下警告：

```
/usr/bin/ld: warning: libxxx.so.6, needed by /a/b/c/libyyy.so, not found (try using -rpath or -rpath-link) 
```

设置环境变量 LD_LIBRARY_PATH=path_to_libxxx.so.6 使警告静音（添加 -Lpath_to_libxxx.so.6 没有帮助）。

我有一个单独的编译服务器，只编译生成的二进制文件。二进制文件在其他服务器上执行，并且二进制文件可以看到 libxxx.so.6（用 选中`ldd executable`）。

有没有其他方法可以在编译时消除警告（我有好几次，这很烦人）？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-11-30T13:41:14.663

您需要添加等效的动态库`-L`：

```
-Wl,-rpath-link,/path/to/lib 
```

这将导致链接器在非标准位置查找共享库，但仅用于验证链接是否正确。

*如果您希望程序在运行时*找到该位置的库，那么有一个类似的选项可以做到这一点：

```
-Wl,-rpath,/path/to/lib 
```

但是，如果你的程序在没有这个的情况下运行良好，那么你就不需要它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T07:35:02.420

确保运行时链接器知道所需库的路径。这是通过在 /etc/ld.so.conf.d/ 中添加一个具有所需路径的文件来完成的。例如，/etc/ld.so.conf.d/foo 具有以下内容：

```
/usr/local/lib/foo/ 
```

如果您有一个非常旧的 Linux 版本，可能不支持 /etc/ld.so.conf.d/，在这种情况下，您可能必须将路径直接添加到 /etc/ld.so.conf 文件中。

完成之后，您需要通过执行“ldconfig”命令来更新链接器的数据库。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-16T19:32:29.920

我知道这很旧，但[这里有一个更好的解决](https://sysprogs.com/w/fixing-rpath-link-issues-with-cross-compilers/)方法：

> # 根本原因：
> 
> 当 GCC 调用的 LD 开始解析库依赖关系时，问题实际上就发生了。GCC 和 LD 都知道包含库的 sysroot，但是 LD 可能缺少一个关键组件：/etc/ld.so.conf 文件。这是来自 Raspberry PI 系统的 exampleld.so.conf 文件：
> 
> 包括 /etc/ld.so.conf.d/*.conf
> 
> /etc/ld.so.conf.d 目录包含以下文件：
> 
> **00-vmcs.conf：** */opt/vc/lib*
> 
> **arm-linux-gnueabihf.conf：**
> 
> */lib/arm-linux-gnueabihf /usr/lib/arm-linux-gnueabihf*
> 
> **libc.conf：**
> 
> */usr/local/lib*
> 
> # 通用解决方案
> 
> 通过将 LD 配置文件复制到跨工具链的 LD 可以找到它们的位置，可以轻松解决该问题。但是有一个陷阱：如果您的跨工具链是使用 MinGW 构建的（大多数都是），它可能无法访问 glob() 函数，因此它将无法解析启用通配符的包含语句，如 *.conf . 这里的解决方法是手动组合 /etc/ld.so.conf.d 中所有 .conf 文件的内容并将它们粘贴到**/etc/ld.so.conf**
> 
> */opt/vc/lib
> 
> /lib/arm-linux-gnueabihf
> 
> /usr/lib/arm-linux-gnueabihf
> 
> /usr/local/lib*
> 
> 在正确的文件夹中创建 ld.so.conf 文件后，您的工具链将能够自动解析所有共享库引用，您将不会再看到该错误消息！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-30T13:26:49.663

使用命令行选项使这些警告静音的唯一方法是 -L 标志，奇怪的是它对您不起作用（也许您可以发布更多详细信息）。由于警告是由我们生成的，`ld`我们可以尝试使用`-Wl,option`来禁用链接器警告，但是从[GNU ld 的文档](http://sourceware.org/binutils/docs-2.23.1/ld/Options.htm)来看，没有（取消）激活此警告的选项。

所以这让我们不得不编写一个包装脚本来过滤掉这个警告或编译一个自定义版本的`ld`.

# objective-c - OpenGLES添加投影

> ID：13507602
> 
> 赞同：3
> 
> 时间：2012-11-22T07:20:03.763
> 
> 标签：objective-c, ios, opengl-es-2.0, projection-matrix

我开始学习 OpenGLES，目前我正在阅读这个[**TUTORIAL**](http://www.raywenderlich.com/3664/opengl-es-2-0-for-iphone-tutorial)

我已经到达**添加投影的**段落，我被困在那里：

```
// Add to render, right before the call to glViewport
CC3GLMatrix *projection = [CC3GLMatrix matrix];
float h = 4.0f * self.frame.size.height / self.frame.size.width;
[projection populateFromFrustumLeft:-2 andRight:2 andBottom:-h/2 andTop:h/2 andNear:4 andFar:10];
glUniformMatrix4fv(_projectionUniform, 1, 0, projection.glMatrix);

// Modify vertices so they are within projection near/far planes
const Vertex Vertices[] = {
    {{1, -1, -7}, {1, 0, 0, 1}},
    {{1, 1, -7}, {0, 1, 0, 1}},
    {{-1, 1, -7}, {0, 0, 1, 1}},
    {{-1, -1, -7}, {0, 0, 0, 1}}
}; 
```

作者在其中使用了一些变量，`populateFromFrustumLeft...`并没有解释它们。我想了解变量选择的逻辑，以便将来能够使用此功能。

请帮助我理解逻辑！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:30:53.250

我找到**了一个非常明确的**解释！

观看本[教程](http://www.youtube.com/watch?v=_WcMe4Yj0NM)，您将在**18:00看到答案**

# iphone - 如何在特定区域的图像中填充颜色？

> ID：13507603
> 
> 赞同：4
> 
> 时间：2012-11-22T07:20:03.797
> 
> 标签：iphone, ios, xcode, uikit

我想为基于 Paint 的应用程序填充白色区域的颜色，所以请给我建议如何完成这项工作。![在此处输入图像描述](../Images/763e91313cfb2a04c46d34f2ea2ac4d7.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:23:56.117

GPUImage 是您所需要的，有一堆过滤器。原则上，您需要指出 ios 它需要将所有白色 RGB(255.0,255.0,255.0) 更改为其他颜色。

# java - Play 2 Java 身份验证插件 - HTTP 状态码响应而不是重定向

> ID：13507605
> 
> 赞同：1
> 
> 时间：2012-11-22T07:20:09.150
> 
> 标签：java, rest, playframework-2.0, play-authenticate

我们正在为 REST API 使用[Play 2 身份验证插件](http://joscha.github.com/play-authenticate/)，我想简单地返回 200 或 403 进行登录尝试。

该插件的代码如下所示：

```
public static Result loginAndRedirect(final Context context,
        final AuthUser loginUser) {
    storeUser(context.session(), loginUser);
    return Controller.redirect(getJumpUrl(context));
} 
```

有没有办法在不分叉插件项目的情况下避免重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T14:09:01.137

我只是在同样的场景中偶然发现，正如 nico_ekito 指出的那样，这可以通过扩展`PlayAuthenticate.Resolver`和覆盖来实现：

```
@Override
    public Call afterAuth() {
        return routes.Application.restAfterAuth();
    } 
```

因此，您可以返回应用程序的任何路线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:38:39.533

我最终在控制器上处理了这个：

```
public static Result login() {   
    Result r = MyUsernamePasswordAuthProvider.handleLogin(ctx());
    if (r instanceof Redirect && PlayAuthenticate.getUser(session()) != null) {
        return ok();
    }
    return forbidden();
} 
```

不过，可能有更好的方法来做到这一点。

# actionscript-3 - 从 swf 链接到源代码

> ID：13507608
> 
> 赞同：0
> 
> 时间：2012-11-22T07:20:22.983
> 
> 标签：actionscript-3, flash-builder

我刚刚进入了一个使用羽毛库的 Flash 项目。我创建了一个 swf 并将其链接到源。没关系。但现在我在羽毛库中发现了一个已被 flash-projects 开发人员更改的类。羽毛类引用了 flash-projects src 中的一个类。这会产生一条错误消息，因为 swf 类在源代码中找不到该类。

如何告诉链接 swf 中的羽毛类关于我的源代码中的包和类？

我正在使用 Flash 生成器。

# actionscript-3 - 异步运行 AS3 函数

> ID：13507609
> 
> 赞同：4
> 
> 时间：2012-11-22T07:20:29.620
> 
> 标签：actionscript-3, asynchronous, flash-cs5.5, document-class

我在理解一些在线教程时遇到了一些麻烦，因此我在这里问。（使用 ActionScript 3、Adobe AIR 和 Flash Professional CS5.5）

我的 AS3 文档类中有一个非常繁重的函数，我需要异步运行，所以它不会停止 MovieClip 本身的代码（不要问我为什么，它只需要那样。）

那么，简单来说，如何异步运行这个文档类函数（StartNow）呢？代码可以放在文档类中，也可以放在movieclip上，我不在乎放在哪里。这似乎是一种相对简单和普遍的做法，但我所有的研究都没有挖掘出来。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T07:30:50.510

如果您的目标是 Flash 播放器 11.4，那么可以为 Worker 对象分配如此繁重的功能。我没有 FP11，最终制作了一个程序生成器，每次迭代总共持续超过 300 秒。我必须使用基于状态的方法，并与输入帧侦听器配对。在我的例子中，整个复杂的生成过程被分成足够小的逻辑块，可以在合理的时间跨度内完成，并且有一个变量跟踪当前的生成阶段。因此，当另一个帧调用生成函数时，它从该变量中读取最后完成的步骤，使用其数据集执行一个额外的步骤，存储新值并退出该帧。事实上，这不是一个纯粹的异步过程，而是一种伪多任务处理方法，如果使 SWF 滞后的函数是可拆分的，这可能适合您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T09:47:47.237

在 Flash 中没有异步运行函数这样的事情，你必须自己做，除非你想使用 Workers（就像 Vesper 说的那样）。Workers 为您提供了一个单独的流程。否则，您必须将计算分成几部分。这就是你的做法：

成像“跟踪”是一项非常繁重的操作。不是，只是为了说明。这个简单的 for 循环在帧上运行，并导致较低的帧速率，因为它都是在帧实际渲染之前计算的。

```
for(var i:int = 0; i < 1000; i ++)
{
   trace(i); // heavy calculation here
} 
```

因此，您必须将计算分解为多个部分，并将其分解为能够*随着时间的推移运行计算*。

为此，您必须创建一个每次只占用循环一部分的函数：

```
calculatePart(0, 1000, 20);

function calculatePart(startIndex:int, endIndex:int, amountPerRun:int)
{
    for(var i:int = startIndex; (i < startIndex + amountPerRun) || (i < endIndex); i ++)
    {
        trace(i); // heavy calculation here
    }
    if (i < endIndex)
    {
        calculatePart(i, endIndex, amountPerRun);
    }
} 
```

这实际上与第一个代码中的简单 for 循环功能相同，它也输出 1000 个跟踪。它已准备好部分运行，但这还不是异步的。我们现在可以轻松地更改函数，因此函数会随着时间的推移而运行。我用`setTimeout`这个。您也可以为此使用`ENTER_FRAME`事件侦听器或`Timer`类，但为了这个示例，我尽量保持清晰。

```
calculatePart(0, 1000, 20, 100);

function calculatePart(startIndex:int, endIndex:int, amountPerRun:int, timeBeforeNextRun:Number)
{
    for(var i:int = startIndex; (i < startIndex + amountPerRun) && (i < endIndex); i ++)
    {
        trace(i); // heavy calculation here
    }
    if (i < endIndex)
    {
        setTimeout(calculatePart, timeBeforeNextRun, i, endIndex, amountPerRun, timeBeforeNextRun);
    }
} 
```

如您所见，我添加了一个`timeBeforeNextRun`参数。如果您运行该示例，您可以看到输出 20 条跟踪需要 100 毫秒。

如果您将其设置得非常低，则计算将尝试非常快地完成，但是您当然不能通过尝试在更短的时间内完成更多操作来获得额外的速度。您必须使用时间和数量变量，您可以测试哪个变量实际上提供了更好的性能（或更少的延迟）。

```
 // more time between a run, less calculations per run
 calculatePart(0, 1000, 30, 10);

 // more calculations per run, more time between a run
 calculatePart(0, 1000, 100, 30); 
```

希望这可以帮助。

如果您想使用更智能的时间计算，我发现[这个](https://code.google.com/p/imotionproductions/source/browse/#svn/trunk/nl/imotion/utils/asyncprocessor)实用程序类非常有用，它测量计算实际花费了多少时间，并改变时间本身。

# c - 用 C 解释代码

> ID：13507614
> 
> 赞同：1
> 
> 时间：2012-11-22T07:20:59.997
> 
> 标签：c, linux, shell, code-analysis

我想特别理解这段代码 parse_args。这段代码就像运行 pwd cat 等基本 linux 命令的简单 shell。我想了解 parse_args 是如何工作的。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <errno.h>
#include <sys/types.h>
#define BUFFER_SIZE 1<<16
#define ARR_SIZE 1<<16

void parse_args(char *buffer, char** args, 
                size_t args_size, size_t *nargs)
{
    char *buf_args[args_size]; /* You need C99 */
    char **cp;
    char *wbuf;
    size_t i, j;

    wbuf=buffer;
    buf_args[0]=buffer; 
    args[0] =buffer;

    for(cp=buf_args; (*cp=strsep(&wbuf, " \n\t")) != NULL ;){
        if ((*cp != '\0') && (++cp >= &buf_args[args_size]))
            break;
    }

    for (j=i=0; buf_args[i]!=NULL; i++){
        if(strlen(buf_args[i])>0)
            args[j++]=buf_args[i];
    }

    *nargs=j;
    args[j]=NULL;
}

int main(int argc, char *argv[], char *envp[]){
    char buffer[BUFFER_SIZE];
    char *args[ARR_SIZE];

    int *ret_status;
    size_t nargs;
    pid_t pid;

    while(1){
        printf("$ ");
        fgets(buffer, BUFFER_SIZE, stdin);
        parse_args(buffer, args, ARR_SIZE, &nargs); 

        if (nargs==0) continue;
        if (!strcmp(args[0], "exit" )) exit(0);       
        pid = fork();
        if (pid){
            printf("Waiting for child (%d)\n", pid);
            pid = wait(ret_status);
            printf("Child (%d) finished\n", pid);
        } else {
            if( execvp(args[0], args)) {
                puts(strerror(errno));
                exit(127);
            }
        }
    }    
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T07:38:47.950

好好玩。该函数将缓冲区分隔为一个字符串数组，并在其中遇到一个空白分隔符。

```
void parse_args(char *buffer, char** args, 
                size_t args_size, size_t *nargs)
{
    char *buf_args[args_size]; /* You need C99 */
    char **cp;
    char *wbuf;
    size_t i, j; 
```

初始化代码...

```
 wbuf=buffer;
    buf_args[0]=buffer; 
    args[0] =buffer; 
```

将所有指针设置为缓冲区的开头

```
 for(cp=buf_args; (*cp=strsep(&wbuf, " \n\t")) != NULL ;){ 
```

1.  将写指针设置为指向`cp`buf_args 数组中的第一个元素。
2.  将 *cp 设置为缓冲区中非空白标记的下一个实例，并前进`wbuf`到其结束位置

    ```
     if ((*cp != '\0') && (++cp >= &buf_args[args_size]))
            break; 
    ```

当返回 NULL 时停止`strsep`，或者当它指向缓冲区的末尾，或者当它指向超出 buf_args[] 的末尾时

```
 }

    for (j=i=0; buf_args[i]!=NULL; i++){
        if(strlen(buf_args[i])>0)
            args[j++]=buf_args[i];
    } 
```

此循环创建 buf_args[] 数组的压缩副本：它仅复制非空字符串的参数。我想如果您的源缓冲区有一系列连续的空白字符，可能会发生这种情况。

```
 *nargs=j;
    args[j]=NULL;
} 
```

在输出数组的末尾放置一个 NULL 并设置`nargs`输出参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T07:45:51.653

好的，让我们来看看 parse args 中的一些行

```
wbuf=buffer;
buf_args[0]=buffer; 
args[0] =buffer; 
```

这将`wbuf`指向`buffer`. 它还将数组中的第一个指针设置`buf_args`为`buffer`. 它也对第一个元素做同样的事情`args`。

```
for(cp=buf_args; (*cp=strsep(&wbuf, " \n\t")) != NULL ;){
    if ((*cp != '\0') && (++cp >= &buf_args[args_size]))
        break;
} 
```

该函数`strsep`查找`wbuf`分隔符空格、换行符或制表符，并返回指向标记开头的指针，并`wbuf`更新到标记的结尾。如果字符串中没有分隔符，则函数返回`NULL`. 因此，语句的中间部分`for`一直持续到`*cp`equals `NULL`。

所以，指针`cp`最初指向的字符串（指针）在`buf_args[0]`. 字符串分隔符函数填充`*cp`令牌的地址。然后，该`if`语句检查 1)`for`循环是否超过了 的容量`buf_args`，通过检查指针`cp`是否超过最后一个元素和 2) 返回的标记的第一个字符是否是字符串的结尾字符。

注意：我认为那条线应该是`*(*cp) != '\0'`？

```
for (j=i=0; buf_args[i]!=NULL; i++){
    if(strlen(buf_args[i])>0)
        args[j++]=buf_args[i];
} 
```

然后，它遍历所有的，`buf_args`直到找到`NULL`一个。如果 指向的字符串`buf_args`长于 0，即它有字符，则数组`args`获取指向该标记的指针的副本。

```
*nargs=j;
args[j]=NULL; 
```

填充条目之后的最后一个元素`args`设置为`NULL`。并且 的值设置为数组`nargs`中填充元素数的长度。`args`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T07:43:57.367

在这段代码中

```
for(cp=buf_args; (*cp=strsep(&wbuf, " \n\t")) != NULL ;){
        if ((*cp != '\0') && (++cp >= &buf_args[args_size]))
            break;
 } 
```

检查 wbuf 数组中的“\n\t”分隔符（首先是空格）并将其位置保存在 buf_args 然后保存在

```
for (j=i=0; buf_args[i]!=NULL; i++){
        if(strlen(buf_args[i])>0)
            args[j++]=buf_args[i];
    } 
```

将参数提取到 args 数组以将结果从函数中提取出来的部分

# microsoft-metro - 应用程序未显示在 Windows 应用程序认证工具包中

> ID：13507615
> 
> 赞同：0
> 
> 时间：2012-11-22T07:21:00.083
> 
> 标签：microsoft-metro, winrt-xaml

我的应用程序未显示在 Windows 应用程序认证工具包的候选列表中。为什么不显示？我可以做些什么来显示它，以便我可以在它上面运行认证过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:31:01.463

如果您单独启动认证工具包，那么可能会发生您的应用程序不存在 - 它发生在我身上的次数太少了。
正确的做法是直接从 Visual Studio 启动 Certification Kit，只需选择您的项目作为启动项目并打开 PROJECT -> Store -> Create app package -> 输入您的 ID，等待包创建然后开始认证成套工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-23T05:20:38.610

您还可以从命令行运行 WACK 工具。

这是您需要做的：

1.  创建应用程序包（确保您处于发布模式）
2.  从 Visual Studio 运行应用程序一次（只需 ctrl+F5 即可）
3.  关闭应用程序并按照以下文章中的步骤操作。

[http://weblogs.asp.net/nmarun/archive/2012/05/06/running-windows-app-certification-kit-wack-tool-from-command-prompt.aspx](http://weblogs.asp.net/nmarun/archive/2012/05/06/running-windows-app-certification-kit-wack-tool-from-command-prompt.aspx)

谢谢，阿伦

# installation - 如何在 Windows 7 上安装 Windows Phone 8 SDK

> ID：13507616
> 
> 赞同：66
> 
> 时间：2012-11-22T07:21:00.803
> 
> 标签：installation, windows-7-x64, windows-phone-8

我的所有工作区和所有东西都设置在 Windows 7 上，但我也想开发 Windows Phone 8，但正如 Microsoft 网站上所述，它不能安装在 Windows 7 上。

有谁知道如何在 Windows 7 上安装。我找到了一个裂缝，但我不知道如何运行它。你可以从[这里](http://dl.dropbox.com/u/14833950/Softwares/WP8-SDK-9900-MSI-Install-Windows7.zip)得到这个 请告诉我是否有人知道如何安装它。这是[WP 8 ISO 文件的链接](http://go.microsoft.com/fwlink/?LinkID=257234&clcid=0x409)

> 编辑：

在 Windows 7 中安装 WP 8 可能有几个原因。就像我最近购买了 Wndows 7 一样，我现在不想转向 Windows 8，因为我对它的 UI 感到不舒服。它更适合平板电脑或触摸屏 PC。

我已经在 Windows 7 上设置了我的所有工作区和其他项目，我不想浪费时间在 Windows 8 上进行设置，我什至不知道它们在 Windows 8 上的表现如何。所以有许多真正的原因。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-04T10:35:57.143

您可以通过首先从 ISO 中提取所有文件然后用 ZIP 中的文件覆盖这些文件来安装它。然后您可以以管理员身份运行批处理文件进行安装。大多数软件包都安装在 Windows 7 上，但我还没有测试过它们的工作情况。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-22T08:25:33.913

这是 developer.nokia.com wiki 页面的链接，其中解释了如何[在具有工作模拟器的虚拟机上安装 Windows Phone 8 SDK](http://www.developer.nokia.com/community/wiki/Windows_Phone_8_SDK_on_a_Virtual_Machine_with_Working_Emulator)

还有另一个链接[在这里](http://www.developer.nokia.com/community/wiki/Windows_Phone_8_Emulator_in_a_Windows_8_VHD)

AFAIK，无法在 Windows 7 中直接安装 WP8 SDK，因为 WP8 sdk 支持 VS 2012，而且它的模拟器也可以在 Hyper-V（集成到 Windows 8 中）上运行。

# php - PHP - 在多个页面中需要一次

> ID：13507620
> 
> 赞同：3
> 
> 时间：2012-11-22T07:21:19.607
> 
> 标签：php, require-once

我正在使用 LAMP 堆栈开发 PHP 应用程序。我正在使用 require_once 来包含类文件。我需要在多个 PHP 页面中使用这些类文件中的函数。因此，我使用 require_once 将这些类文件包含在所有必需的 PHP 页面中。但是，如果我将这些类文件包含在多个页面中，PHP 文件就会变为空白。它什么也不显示。查看源代码也不显示任何内容。

文件：test.php、process.php 和 class.test.php

test.php 有

```
<?php
    session_start();
    require_once 'classes/class.test.php';

    .
    Few more classes
    .
    .  

?>

<html>   
    <form name = "myForm" method="POST" action="process.php">
       <input type = "text" name="username" value=""/>
       <input type = "submit" value="Submit" />
    </form>   
</html> 
```

* * *

进程.php

```
<?php 
    session_start();
    require_once 'classes/class.test.php';

    $obj_test = new test();
    $obj_test->test();
?> 
```

* * *

类.test.php

```
<?php
    session_start();
    require_once 'class.misc.php';
    require_once 'config.php'; //DB connection details

    function test()
    {
        $obj_misc = new misc();
        $id = $obj_misc->random_ID();
        $username = $_POST['username'];             

        $query = "INSERT INTO test_table VALUES ('$id','$username',NOW());
        mysql_query($query);
    }
?> 
```

现在，它返回一个空白页。如果我注释掉 process.php 中的 require_once，test.php 页面会显示表单，但在提交表单时 process.php 会抛出错误“找不到类测试”。

在过去的两周里，我一直在努力解决这个问题。:( 在那之前工作正常。我不明白出了什么问题。请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T07:28:28.573

您在 process.php 的 PHP 代码中有错误；你缺少一个分号：

```
require_once 'classes/class.test.php' 
```

应该：

```
require_once 'classes/class.test.php'; 
```

如果这不能解决它，那么您的代码中可能存在其他一些错误。如果无法访问完整的源代码，我们将无能为力。

为了将来参考，如果页面变为空白，通常是 PHP 源代码存在问题（即某种类型的解释错误）。作为良好调试策略的一部分，请查看[display_errors](http://us3.php.net/manual/en/errorfunc.configuration.php#ini.display-errors)和[error_reporting](http://us3.php.net/manual/en/errorfunc.configuration.php#ini.error-reporting)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T07:28:15.073

试试看

> 错误报告（E_ALL）；

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T07:27:28.247

听起来您的错误报告已关闭。你应该检查你的错误日志，看看当它静默失败时抛出了什么异常（这会给你更多的洞察力）。

此外，您可能希望在流程脚本的顶部添加以下内容：

```
error_reporting(E_ALL); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T08:09:07.530

looks like you are missing a closing qoute on the sql query

```
$query = "INSERT INTO test_table VALUES ('$id','$username',NOW());
mysql_query($query); 
```

should be

```
$query = "INSERT INTO test_table VALUES ('$id','$username',NOW())";
mysql_query($query); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T07:29:57.497

要求一次是一个函数......

尝试添加括号...

```
 require_once( 'classes/class.test.php' ); 
```

# c++ - C++ 公共和私有数据类型

> ID：13507621
> 
> 赞同：0
> 
> 时间：2012-11-22T07:21:22.363
> 
> 标签：c++, class, types, private, public

我目前正在编写 Pearson 印刷公司的“从 C++ 早期对象开始”一书的第 7 章。

我无法理解此类声明中变量“r”的功能：

```
class Circle
{  private:
       double radius;

   public:
       void setRadius(double r)
       {  radius = r; }

  double getArea()
      {  return 3.14 * pow(radius, 2); }
}; 
```

为什么我不能像这样写“半径”变量？

```
class Circle
{  private:
       double radius;

  double getArea()
      {  return 3.14 * pow(radius, 2); }
}; 
```

我不明白的功能

```
 public:
       void setRadius(double r)
       {  radius = r; } 
```

陈述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:32:46.813

技术原因是“因为半径是私有的，因此无法从课堂外访问”。因此，对 radius 的更改必须以某种方式由公共成员函数（如`SetRadius`.

如果现在的问题变成“为什么设计师这样做，而不是简单地`radius`公开？”，那么……这是一场永无止境的辩论，关于正确的面向对象设计应该如何成为必须公开的内容以及什么不在对象内部。

传统的 OOP 学校倾向于使所有数据“私有”，并通过各种功能访问或修改它们以强制执行他们所谓的“封装”，并在需要扩展接口以支持最终回调或事件的情况下让生活更轻松。

在这个微不足道的简单案例中，嗯……一切看起来都是浪费能源（没有适当的编译器优化就是浪费能源！在真正的物理意义上）。但可能他们需要一个与其他东西的统一接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:47:25.800

由于 private 的功能行为在其他答案中进行了解释，因此直接访问类外部的 private 成员会给你一个编译时错误。

如果您问我们**为什么要**使用 setter 函数并使某些成员私有化，这是设计问题。例如; 如果您需要半径始终为正数，则可以将 set 函数编写为；

```
void setRadius(double r)
{  
    if(radius >= 0)
        radius = r;
    else
        radius = 0;
} 
```

因此，当试图在类外修改成员的值时，您将可以控制它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:27:03.677

半径是私有的。如果没有该功能，您将无法从类外设置半径。为了使该类有用，您很可能希望能够创建 Circle 类型的对象并设置它们的半径。因此，您需要某种类型的函数来设置该半径。

解决这个问题的最简单和最合理的方法是在类 Circle 本身内提供一个公共成员函数。

这可以使用设置器最容易地完成，例如您所展示的。这允许您设置并在以后更改半径。

```
void SetRadius(float r)
{
    radius = r;
} 
```

您还可以为构造函数提供一个额外的参数，以确保 Circle 始终使用用户提供的值初始化其半径，或者至少在`radius`（在 C++11 中）的声明中设置默认值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T07:41:25.187

公有私有的概念，没有人可以访问私有变量，只能访问类方法，并且您只能从主函数访问公共方法，因此，函数 setRadius 负责设置半径的私有变量

```
public:
   void setRadius(double r)
   {  radius = r; } 
```

因为半径是一个私有变量，所以你必须在类中创建一个公共函数来设置该变量，这样你就可以在创建 Circle 对象时通过以下方式设置半径：

这将用于设置主要的半径

```
Circle * test = new Circle;
test.setRadius(7); 
```

但是如果您尝试通过以下方式直接设置半径：

```
Circle * test = new Circle;
test.radius = 7; 
```

它将使程序崩溃**无法访问类私有方法**

# jquery - JQplot 通过单击其图例名称隐藏系列：始终显示工具提示

> ID：13507624
> 
> 赞同：1
> 
> 时间：2012-11-22T07:21:41.220
> 
> 标签：jquery, graph, jqplot

我正在使用带有[图例插件](http://www.jqplot.com/docs/files/plugins/jqplot-enhancedLegendRenderer-js.html)的 JQPlot通过单击其图例名称来切换系列显示。

```
 legend: {
        show: true,
        placement: 'outsideGrid',
        renderer: $.jqplot.EnhancedLegendRenderer
    } 
```

它正在工作，但在隐藏系列时始终显示系列工具提示。如果您有很多系列并且想要隐藏除一个之外的所有系列，这是一个问题：隐藏系列的所有工具提示都显示在鼠标悬停时。

这是一个解释问题的小提琴：http: [//jsfiddle.net/Bouillou/WdLnm/284/](http://jsfiddle.net/Bouillou/WdLnm/284/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-01T23:33:59.557

I experienced this bug a while back. See my post on the jqPlot Google group: [https://groups.google.com/forum/?fromgroups#!searchin/jqplot-users/nickw/jqplot-users/PShgGTuXpeg/m3NPzEIWRscJ](https://groups.google.com/forum/?fromgroups#!searchin/jqplot-users/nickw/jqplot-users/PShgGTuXpeg/m3NPzEIWRscJ)

Essentially, the code is checking to see if each line is visible before raising an event. The problem is that the visibility is not being dealt with correctly on the Javascript side (the CSS is fine), hence the issue you are seeing where a hidden series is still deemed visible.

My solution was to set `s.show = s.canvas._elem.is(':hidden');` in the `Series.prototype.toggleDisplay` method.

This appears to have been resolved since version 1.0.4r1120 - try updating to a more recent version to see if that helps.

# facebook - 获取特定文件中的 facebook 帐户值

> ID：13507625
> 
> 赞同：0
> 
> 时间：2012-11-22T07:21:43.127
> 
> 标签：facebook, facebook-php-sdk, facebook-authentication, facebook-login

我使用了 facebook php sdk，我想在另一个文件中获取值，所以我给出了重定向路径，登录后它在页面上，但 $user 为空白，当我刷新页面时，我得到了值. 我的代码如下从登录页面调用的位置：

```
$facebook = new Facebook(array('appId'  =>FB_APP_ID ,'secret' => FB_APP_SECRET));
                                                   $scope='email,user_birthday,user_location,user_work_history,user_about_me,user_hometown';
                                                $parameters=array("redirect_uri"=>"http://www.xyz.com//test.php","scope"=>$scope);
                                                $login_url= $facebook->getLoginUrl($parameters); 
```

test.php 如下所示

```
$facebook = new Facebook(array(
        'appId'  => '224402951020359' ,
        'secret' => 'd2731260cdd7425dc11eee5f265a3dee'

        ));

        $user = $facebook->getUser();

        if ($user) {
          try {
            // Proceed knowing you have a logged in user who's authenticated.
            $user_data = $facebook->api('/me');
          } catch (FacebookApiException $e) {

            error_log($e);
            $user = null;
          }
        }

        print_r($user_data); 
```

我怎样才能在第一时间获得价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T22:34:15.377

在您的 test.php 页面上，对 !$user 进行测试，如果为真，则再次重定向到 loginurl... 类似以下的内容是我在代码中为避免同样的问题所做的。

```
 $loginUrl = $facebook->getLoginUrl(
        array(
            'scope' => 'email,publish_stream,user_birthday,user_location'
        )
);

if ($user) {
  try {
    //get user basic description
    $userInfo = $facebook->api("/$user");
    $fb_access_token = $facebook->getAccessToken();
  } catch (FacebookApiException $e) {
    //you should use error_log($e); instead of printing the info on browser
    error_log('Sharebox: '.$e); // d is a debug function defined at the end of this file
    $user = null;
  }
}

if (!$user) {
    echo "<script type='text/javascript'>top.location.href = '$loginUrl';</script>";
    exit;
} 
```

希望这可以帮助。

# svn - 使用 'svn lock' 之类的命令在整个分支上实现 svn 锁定

> ID：13507626
> 
> 赞同：3
> 
> 时间：2012-11-22T07:21:43.183
> 
> 标签：svn, locking, branch

有没有办法用 svn lock 命令锁定整个分支？

单独锁定文件/目录没有帮助。我想在不修改服务器端'authz'的情况下实现。

让我知道，如果有人知道这样的选择存在。

相关Q在这里：[svn lock branch](https://stackoverflow.com/questions/4064229/svn-lock-branch/13491857#13491857)

我的试用方式：

svn lock http://{Repo-path}/branch_name

结果：

svn: E160017: '/branch_name' 不是文件系统中的文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-01T12:18:10.710

分支基本上是一个目录。根据文档，尚不支持锁定目录。

[“Subversion 目前不允许锁定目录。”](http://svnbook.red-bean.com/en/1.7/svn.advanced.locking.html#idp8375600)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T09:08:06.987

没有上面发布的服务器端修改是不可能的。

如果您愿意修改存储库目录中的`pre-commit.tmpl`or`pre-commit`脚本（如果不在 Debian 上工作`hooks`，您可能需要安装Python 包）然后使用**Noah Spurrier**的 SVN 目录锁定[脚本](http://www.noah.org/wiki/SVN_Directory_Lock)。只需最少的调整即可**完美地**为我工作。`pexpect`

# jsp - 在 Struts 2 中使用锚标记的超链接动态多表单提交

> ID：13507638
> 
> 赞同：1
> 
> 时间：2012-11-22T07:22:14.860
> 
> 标签：jsp, struts2, anchor

我正在使用 Struts 2 应用程序并在 JSP 中显示数据，并且在 JSP`<s:iterator>`中显示的每条记录都有一个超链接链接。

我想使用此链接并使用 POST 方法将一些数据提交到其他 JSP 页面。

下面是我在 JSP 中的代码片段：

```
<s:iterator value="#request.Forums">
<s:property value="user_name"/>
<s:form action="displayForum" >
<s:hidden name="id" ></s:hidden>
<s:hidden name="subject" ></s:hidden>
<a  href="javascript:this.form.id"><s:property value="subject"/></a>
</s:form>
</s:iterator> 
```

我已经尝试使用带有 JavaScript 的表单 id 进行此操作，`document.forms["formid"].submit`但我的迭代器没有给出单个 id，因为它是动态变化的。

注意：我使用`<s:url>`了 insted of，`<s:form>`但它会将表单参数值附加到 URL。但我的要求是将表单参数作为隐藏变量发送。

请帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T10:27:04.753

`<s:form>`像这样为你生成唯一的ID

```
<s:iterator value="#request.Forums" status="stat">
   <s:form id="formid%{#stat.index}" action="displayForum">
       <a href="javascript:submitForm('formid<s:property value="#stat.index"/>')">submit</a>
   </s:form>
</s:iterator> 
```

并将这个 id 传递给你的 javascript 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T16:09:35.010

我还没有真正理解你的问题，如果你想提交一个表格，你应该使用`submit`，无论使用什么`javascript`，`s:submit`但我建议你这样尝试：

```
<s:iterator value="#request.Forums" var="forum" status="status">
    <s:property value="#forum.user_name"/>
    <s:form action="displayForum" method="POST">
        <s:hidden name="id" value="#forum.id"></s:hidden>
        <s:hidden name="subject" value="#forum.subject"></s:hidden>
        <s:submit value="Submit"/>
    </s:form>
</s:iterator> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:24:11.827

`id`在您的表格中输入一个：

```
<s:form id="formid" action="displayForum">
...
</s:form> 
```

在你的表单中，使用 javascript 调用放置一个锚点：

```
<s:form...>
...
<a href="javascript: submit_my_form();">Submit</a>
</s:form> 
```

然后输入你的javascript代码：

```
function submit_my_form() {
    document.forms["formid"].submit();
} 
```

编辑：有关更多信息，您可以在 google 中搜索：*使用 javascript 提交表单*。例如：[http ://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml](http://www.javascript-coder.com/javascript-form/javascript-form-submit.phtml)

# sql - Sql Agent 无法处理系统日期更改？

> ID：13507641
> 
> 赞同：1
> 
> 时间：2012-11-22T07:22:33.113
> 
> 标签：sql, sql-server, database, database-administration

我遇到了 sql agent 的问题，在更改服务器日期时，它不会在其计划时间开始，而作业是每天在固定时间安排的。在此未找到任何日志。当系统日期已更改为其实际日期时，也会出现此问题。之后我必须重新启动 sql 代理才能在其计划时间调用作业。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:28:46.900

SQL 代理计划作业将具有上次运行日期/时间和下次运行日期/时间。每次作业运行时，这些值都会更新。请查看 MSDB，您将看到这些详细信息。您还可以查看作业历史记录。

当您手动将系统时钟重置为晚于现在的日期时，您的下一次运行日期/时间将是过去的日期。正如您所提到的，退回代理服务应该再次启动作业。

拉吉

# mysql - mysql日期比较与date_format

> ID：13507642
> 
> 赞同：22
> 
> 时间：2012-11-22T07:22:33.613
> 
> 标签：mysql, date, date-format

我用谷歌搜索并尝试了几种比较日期的方法，但不幸的是没有得到预期的结果。我目前的记录状态如下：

```
 mysql> select date_format(date(starttime),'%d-%m-%Y') from data;

              +-----------------------------------------+
              | date_format(date(starttime),'%d-%m-%Y') |
              +-----------------------------------------+
              | 28-10-2012                              |
              | 02-11-2012                              |
              | 02-11-2012                              |
              | 02-11-2012                              |
              | 03-11-2012                              |
              | 03-11-2012                              |
              | 07-11-2012                              |
              | 07-11-2012                              | 
```

我想比较日期，因此这样做：

```
 mysql> select date_format(date(starttime),'%d-%m-%Y') from data where date_format(date(starttime),'%d-%m-%y') >= '02-11-2012';
               +-----------------------------------------+
               | date_format(date(starttime),'%d-%m-%Y') |
               +-----------------------------------------+
               | 28-10-2012                              |
               | 02-11-2012                              |
               | 02-11-2012                              |
               | 02-11-2012                              |
               | 03-11-2012                              |
               | 03-11-2012                              |
               | 07-11-2012                              |
               | 07-11-2012                              | 
```

我认为结果不应该包括“28-10-2012”。有什么建议吗？提前致谢。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-11-22T07:25:25.990

您的格式从根本上不是一个可排序的格式 - 您正在比较*strings*，并且字符串 "28-10-2012"*大于*"02-11-2012"。

相反，您应该将日期*作为 dates*进行比较，然后仅将它们转换为您的目标格式以供输出。

试试这个：

```
select date_format(date(starttime),'%d-%m-%Y') from data
where date(starttime) >= date '2012-11-02'; 
```

[（根据文档](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-literals.html)，输入必须始终采用年月值形式。）

请注意，如果`starttime`是一个`DATETIME`字段，您可能需要考虑更改查询以避免重复转换。（优化器可能足够聪明，可以避免它，但值得检查。）

```
select date_format(date(starttime),'%d-%m-%Y') from data
where starttime >= '2012-11-02 00:00:00'; 
```

（请注意，将日期格式化为`d-m-Y`开头是不寻常的 - 通常使用 ISO-8601 标准等会更好`y-M-d`。但是，上面的代码可以满足您在问题中的要求。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T07:36:03.683

使用 2012-11-02 而不是 02-11-2012，您将不再需要 date_format()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-03T11:58:36.550

使用以下方法：

```
public function dateDiff ($date1, $date2) {
/* Return the number of days between the two dates: */
  return round(abs(strtotime($date1)-strtotime($date2))/86400);
}  
/* end function dateDiff */ 
```

我会帮你的！

# ruby-on-rails-3 - rails 有一个通过关联

> ID：13507644
> 
> 赞同：0
> 
> 时间：2012-11-22T07:22:40.750
> 
> 标签：ruby-on-rails-3, associations

我有一个包含字段名称和性别的用户模型。并且用户可以与另一个用户建立称为“配偶”的一对一关联，该关联必须在男性用户和女性用户之间。

[在railscasts self-referential-association](http://railscasts.com/episodes/163-self-referential-association)的帮助下，我创建了这样的基本关联，

```
class User < ActiveRecord::Base
  has_one :spouse_list
  has_one :spouse, :through => :spouse_list

  has_one :inverse_spouse_list, :class_name => "SpouseList", :foreign_key => "spouse_id"
  has_one :inverse_spouse, :through => :inverse_spouse_list, :source => :user
end

class SpouseList < ActiveRecord::Base  
  belongs_to :spouse, :class_name => "User"  
  belongs_to :user  
end 
```

SpouseList 有字段 :spouse_id, :user_id,

上述关联可以为单个用户创建多行，如果通过@user.spouse_list.spouse.name 访问配偶，则显示第一行

如何在男性用户和女性用户之间进行限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T08:05:40.407

最后我为以下条件进行了一对一的自我关联，

“用户可以与另一个用户建立称为“配偶”的一对一关联，该关联必须是男性用户和女性用户之间的关联”

向用户模型添加了一个字段配偶 ID，并通过自定义验证创建了一个自关联，

```
class User < ActiveRecord::Base

  belongs_to :spouse, :class_name => 'User', :inverse_of => :base_user, :foreign_key => "spouse_id"
  has_one :base_user, :class_name => 'User', :inverse_of => :spouse

  validate :validate_spouse_gender

  private
  def validate_spouse_gender
    errors.add(:spouse_id, 'could not be with same sex') if spouse && spouse.sex == sex
  end

end 
```

现在，如果 B 的性别为女性，则男性用户 A 只能作为配偶与另一个用户 B 建立关联。

希望它可以帮助某人。

# jquery - 找到另一种使用 jQuery 获取 li elment 的 href 的方法？

> ID：13507650
> 
> 赞同：2
> 
> 时间：2012-11-22T07:23:20.430
> 
> 标签：jquery, children, attr

我有一个 HTML 波纹管：

```
<ul class="tabs">
    <li><a href="#doc-new">Home</a></li>
    <li class="active"><a href="#doc-fav">Profile</a></li>
    <li><a href="#doc-read">Messages</a></li>
</ul> 
```

我想获得具有“活动”类的元素的**href**`<a>``<li>`

我有一个这样的查询：

```
//get current tab
$('ul.tabs li > a').click(function () {

    var t = $('ul.tabs li:[class="active"]').next().children().attr('href'); 
    alert(t);
}); 
```

它有效，但是我想找到比我更好的另一个查询。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:25:53.507

你可以用这个

```
var t =  $('ul.tabs li.active a').attr('href'); 
alert(t); 
```

[演示](http://jsfiddle.net/VFFmH/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:26:14.893

使用选择器中的类

```
var t = $('ul.tabs li.active a').attr('href'); 
```

jQuery API 选择器部分也提供了非常丰富的示例。这不是一个很难弄清楚的选择器

API 参考： [http ://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:43:59.910

```
var href = $("ul.tabs").find("li.active").find("a").attr("href");
alert(href); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T07:25:58.517

```
$(".tabs li").find(".active").next().attr("href"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T07:27:02.727

检查这个..

```
 //get current tab
    $('ul.tabs li > a').click(function () {

        var t = $('ul.tabs li:[class="active"]').find("a").attr('href'); 
        alert(t);
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-22T07:27:37.030

如果您想获取单击的“a”的“HREF”。

你可以这样做

```
$('ul.tabs li > a').click(function () {

alert($(this).attr('href'));
}) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-22T07:27:39.497

```
$("li a.active").attr("href"); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-22T08:25:58.487

尝试这个

```
$('ul.tabs li > a').click(function () {
   if($(this).parent().hasClass("active")){
      alert(this.href);
   }
}); 
```

# magento - Magento 无法重建缓存

> ID：13507655
> 
> 赞同：2
> 
> 时间：2012-11-22T07:23:52.930
> 
> 标签：magento, caching, shopping-cart

已解决：感谢 fkim 和 Slayer Birden 的持续帮助，我能够将问题缩小到 checkout.xml 文件。经过大量愚蠢的试验和错误后，我只是将我的文件与 magento 原始文件进行了比较，并开始删除我的更改。我在其中注释掉第 318 行的更改是罪魁祸首。谢谢大家。

（旧线程如下） 编辑：所以我只是尝试刷新单个缓存并检查站点。刷新“配置”缓存并没有造成麻烦，但“布局”缓存似乎是罪魁祸首。这会改变事情吗？

原文：所以我在 cart.oldfloridian.com 上有一个 Magento 站点，当我尝试刷新缓存时，它会中断一点。

一切都会正常工作，然后当我刷新缓存时，购物车侧边栏小部件会消失，如果您直接导航到结帐/购物车和结帐/单页页面，它们就会停止加载内容。也就是说，它们加载页眉、侧边栏、页脚，但不加载特定于页面的内容。

然后我可以将站点恢复到较早的备份，一切都恢复并运行。刷新缓存。又没有购物车了。目前我已经恢复，所以购物车存在。

那么我从哪里开始呢？我主要是一名设计师，所以这个权限/缓存的东西对我来说有点不透明。

var/cache 设置为 755，其子目录也是如此。他们的文件是 600s 和 644s。这是一个问题吗？

任何帮助表示赞赏。谢谢。

编辑：所以 checkout.xml 在下面。我不确定我在寻找什么，但事情似乎还不错。我所做的一项更改是注释掉显示用户登录的那一行，以使整个站点“仅限访客”。还有人看到什么吗？

```
<?xml version="1.0"?>
<!--
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2012 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */

-->
<layout version="0.1.0">

<!--
Default layout, loads most of the pages
-->

    <default>

        <!-- Mage_Checkout -->
        <reference name="top.links">
            <block type="checkout/links" name="checkout_cart_link">
                <action method="addCartLink"></action>
                <action method="addCheckoutLink"></action>
            </block>
        </reference>
        <reference name="left">
            <block type="checkout/cart_sidebar" name="cart_sidebar" template="checkout/cart/sidebar.phtml" before="-">
                <action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>checkout/cart/sidebar/default.phtml</template></action>
                <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/cart/sidebar/default.phtml</template></action>
                <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/cart/sidebar/default.phtml</template></action>
                <block type="core/text_list" name="cart_sidebar.extra_actions" as="extra_actions" translate="label" module="checkout">
                    <label>Shopping Cart Sidebar Extra Actions</label>
                </block>
            </block>
        </reference>
    </default>

    <checkout_cart_index translate="label">
        <label>Shopping Cart</label>
        <remove name="right"/>
        <remove name="left"/>
        <!-- Mage_Checkout -->
        <reference name="root">
            <action method="setTemplate"><template>page/1column.phtml</template></action>
        </reference>
        <reference name="content">
            <block type="checkout/cart" name="checkout.cart">
                <action method="setCartTemplate"><value>checkout/cart.phtml</value></action>
                <action method="setEmptyTemplate"><value>checkout/cart/noItems.phtml</value></action>
                <action method="chooseTemplate"/>
                <action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>checkout/cart/item/default.phtml</template></action>
                <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/cart/item/default.phtml</template></action>
                <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/cart/item/default.phtml</template></action>

                <block type="core/text_list" name="checkout.cart.top_methods" as="top_methods" translate="label">
                    <label>Payment Methods Before Checkout Button</label>
                    <block type="checkout/onepage_link" name="checkout.cart.methods.onepage" template="checkout/onepage/link.phtml"/>
                </block>

                <block type="page/html_wrapper" name="checkout.cart.form.before" as="form_before" translate="label">
                    <label>Shopping Cart Form Before</label>
                </block>

                <block type="core/text_list" name="checkout.cart.methods" as="methods" translate="label">
                    <label>Payment Methods After Checkout Button</label>
                    <block type="checkout/onepage_link" name="checkout.cart.methods.onepage" template="checkout/onepage/link.phtml"/>
                    <block type="checkout/multishipping_link" name="checkout.cart.methods.multishipping" template="checkout/multishipping/link.phtml"/>
                </block>

                <!--<block type="checkout/cart_coupon" name="checkout.cart.coupon" as="coupon" template="checkout/cart/coupon.phtml"/>
                <block type="checkout/cart_shipping" name="checkout.cart.shipping" as="shipping" template="checkout/cart/shipping.phtml"/> -->
                <block type="checkout/cart_crosssell" name="checkout.cart.crosssell" as="crosssell" template="checkout/cart/crosssell.phtml"/>

                <block type="checkout/cart_totals" name="checkout.cart.totals" as="totals" template="checkout/cart/totals.phtml"/>
            </block>
        </reference>
        <block type="core/text_list" name="additional.product.info" translate="label">
            <label>Additional Product Info</label>
        </block>
    </checkout_cart_index>

    <checkout_cart_configure translate="label">
        <label>Configure Cart Item</label>
        <update handle="catalog_product_view"/>
        <reference name="product.info">
            <block type="checkout/cart_item_configure" name="checkout.cart.item.configure.block"></block>
        </reference>
    </checkout_cart_configure>

<!--
Multi address shipping checkout main layout,
will be rendered on all checkout pages
-->

    <checkout_multishipping translate="label">
        <label>Multishipping Checkout</label>
        <!-- Mage_Checkout -->
        <remove name="right"/>
        <remove name="left"/>

        <reference name="root">
            <action method="setTemplate"><template>page/1column.phtml</template></action>
        </reference>
        <reference name="content">
            <block type="checkout/multishipping_state" name="checkout_state" template="checkout/multishipping/state.phtml"/>
        </reference>
    </checkout_multishipping>

    <checkout_multishipping_login>
        <update handle="customer_account_login"/>
    </checkout_multishipping_login>

    <checkout_multishipping_register>
        <update handle="customer_account_create"/>
    </checkout_multishipping_register>

<!--
Multi address shipping checkout selection of address per item page
-->

    <checkout_multishipping_address_select translate="label">
        <label>Multishipping Checkout Shipping Address Selection</label>
        <update handle="checkout_multishipping"/>
        <!-- Mage_Checkout -->
        <reference name="content">
            <block type="checkout/multishipping_address_select" name="checkout_address_select" template="checkout/multishipping/address/select.phtml"/>
        </reference>
    </checkout_multishipping_address_select>

    <checkout_multishipping_address_selectbilling translate="label">
        <label>Multishipping Checkout Billing Address Selection</label>
        <update handle="checkout_multishipping"/>
        <!-- Mage_Checkout -->
        <reference name="content">
            <block type="checkout/multishipping_address_select" name="checkout_address_select" template="checkout/multishipping/address/select.phtml"/>
        </reference>
    </checkout_multishipping_address_selectbilling>

    <checkout_multishipping_address_newshipping translate="label">
        <label>Multishipping Checkout Shipping Address Creation</label>
        <update handle="checkout_multishipping"/>
        <update handle="checkout_multishipping_customer_address"/>
    </checkout_multishipping_address_newshipping>

    <checkout_multishipping_address_newbilling translate="label">
        <label>Multishipping Checkout Billing Address Creation</label>
        <update handle="checkout_multishipping"/>
        <update handle="checkout_multishipping_customer_address"/>
    </checkout_multishipping_address_newbilling>

    <checkout_multishipping_address_editshipping translate="label">
        <label>Multishipping Checkout Shipping Address Edit Form</label>
        <update handle="checkout_multishipping"/>
        <update handle="checkout_multishipping_customer_address"/>
    </checkout_multishipping_address_editshipping>

    <checkout_multishipping_address_editaddress>
        <update handle="checkout_multishipping"/>
        <update handle="checkout_multishipping_customer_address"/>
    </checkout_multishipping_address_editaddress>

    <checkout_multishipping_address_editbilling translate="label">
        <label>Multishipping Checkout Billing Address Edit Form</label>
        <update handle="checkout_multishipping"/>
        <update handle="checkout_multishipping_customer_address"/>
    </checkout_multishipping_address_editbilling>

    <checkout_multishipping_customer_address translate="label">
        <label>Multishipping Checkout Customer Address Edit Form</label>
        <reference name="content">
            <block type="customer/address_edit" name="customer_address_edit" template="customer/address/edit.phtml"/>
        </reference>
    </checkout_multishipping_customer_address>

<!--
Multi address shipping checkout address page
-->

    <checkout_multishipping_addresses translate="label">
        <label>Multishipping Checkout Address (Any) Form</label>
        <update handle="checkout_multishipping"/>
        <!-- Mage_Checkout -->
        <reference name="content">
            <block type="checkout/multishipping_addresses" name="checkout_addresses" template="checkout/multishipping/addresses.phtml">
                <action method="addItemRender"><type>default</type><block>checkout/cart_item_renderer</block><template>checkout/multishipping/item/default.phtml</template></action>
                <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/multishipping/item/default.phtml</template></action>
                <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/multishipping/item/default.phtml</template></action>
            </block>
        </reference>
    </checkout_multishipping_addresses>

<!--
Multi address shipping checkout shipping information
-->

    <checkout_multishipping_shipping translate="label">
        <label>Multishipping Checkout Shipping Information Step</label>
        <update handle="checkout_multishipping"/>
        <!-- Mage_Checkout -->
        <reference name="content">
            <block type="checkout/multishipping_shipping" name="checkout_shipping" template="checkout/multishipping/shipping.phtml">
                <action method="addItemRender"><type>default</type><block>checkout/cart_item_renderer</block><template>checkout/multishipping/item/default.phtml</template></action>
                <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/multishipping/item/default.phtml</template></action>
                <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/multishipping/item/default.phtml</template></action>

                <block type="checkout/multishipping_billing_items" name="checkout_billing_items" template="checkout/multishipping/billing/items.phtml">
                    <action method="addItemRender"><type>default</type><block>checkout/cart_item_renderer</block><template>checkout/multishipping/item/default.phtml</template></action>
                    <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/multishipping/item/default.phtml</template></action>
                    <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/multishipping/item/default.phtml</template></action>
                </block>
            </block>
        </reference>
    </checkout_multishipping_shipping>

<!--
Multi address shipping checkout billing information
-->

    <checkout_multishipping_billing translate="label">
        <label>Multishipping Checkout Billing Information Step</label>
        <update handle="checkout_multishipping"/>
        <!-- Mage_Checkout -->
        <reference name="content">
            <block type="checkout/multishipping_billing" name="checkout_billing" template="checkout/multishipping/billing.phtml">
                <action method="setMethodFormTemplate"><method>purchaseorder</method><template>payment/form/purchaseorder.phtml</template></action>

                <!--<block type="checkout/multishipping_billing_items" name="checkout_billing_items" template="checkout/multishipping/billing/items.phtml">
                    <action method="addItemRender"><type>default</type><block>checkout/cart_item_renderer</block><template>checkout/multishipping/item/default.phtml</template></action>
                    <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/multishipping/item/default.phtml</template></action>
                    <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/multishipping/item/default.phtml</template></action>
                </block>-->

            </block>
        </reference>
    </checkout_multishipping_billing>

<!--
Multi address shipping checkout overview
-->

    <checkout_multishipping_overview translate="label">
        <label>Multishipping Checkout Overview</label>
        <update handle="checkout_multishipping"/>
        <!-- Mage_Checkout -->
        <reference name="content">
            <block type="checkout/multishipping_overview" name="checkout_overview" template="checkout/multishipping/overview.phtml">
                <action method="addItemRender"><type>default</type><block>checkout/cart_item_renderer</block><template>checkout/multishipping/item/default.phtml</template></action>
                <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/multishipping/item/default.phtml</template></action>
                <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/multishipping/item/default.phtml</template></action>
                <action method="addRowItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/multishipping/overview/item.phtml</template></action>
                <action method="addRowItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/multishipping/overview/item.phtml</template></action>
                <block type="checkout/multishipping_payment_info" name="payment_info">
                    <action method="setInfoTemplate"><method></method><template></template></action>
                </block>
                <block type="checkout/agreements" name="checkout.multishipping.agreements" as="agreements" template="checkout/multishipping/agreements.phtml"/>
                <block type="checkout/cart_totals" name="totals" />
                <block type="core/text_list" name="checkout.multishipping.overview.items.after" as="items_after" translate="label">
                    <label>Overview Items After</label>
                </block>
            </block>
        </reference>
    </checkout_multishipping_overview>

<!--
Multi address shipping checkout success
-->

    <checkout_multishipping_success translate="label">
        <label>Multishipping Checkout Success</label>
        <update handle="checkout_multishipping"/>
        <!-- Mage_Checkout -->
        <reference name="content">
            <block type="checkout/multishipping_success" name="checkout_success" template="checkout/multishipping/success.phtml"/>
        </reference>
    </checkout_multishipping_success>

<!--
One page checkout main layout
-->

    <checkout_onepage_index translate="label">
        <label>One Page Checkout</label>
        <!-- Mage_Checkout -->
        <remove name="left"/>

        <reference name="root">
            <action method="setTemplate"><template>page/2columns-right.phtml</template></action>
        </reference>
        <reference name="right">
            <action method="unsetChildren"></action>
            <block type="page/html_wrapper" name="checkout.progress.wrapper" translate="label">
                <label>Checkout Progress Wrapper</label>
                <action method="setElementId"><value>checkout-progress-wrapper</value></action>
                <block type="checkout/onepage_progress" name="checkout.progress" before="-" template="checkout/onepage/progress.phtml"/>
            </block>
        </reference>
        <reference name="content">
            <block type="checkout/onepage" name="checkout.onepage" template="checkout/onepage.phtml">
                <!--block type="checkout/onepage_login" name="checkout.onepage.login" as="login" template="checkout/onepage/login.phtml"-->
                    <block type="page/html_wrapper" name="checkout.onepage.login.before" as="login_before" translate="label">
                        <label>Login/Registration Before</label>
                        <action method="setMayBeInvisible"><value>1</value></action>
                    </block>
                </block>
                <block type="checkout/onepage_billing" name="checkout.onepage.billing" as="billing" template="checkout/onepage/billing.phtml"/>
                <block type="checkout/onepage_shipping" name="checkout.onepage.shipping" as="shipping" template="checkout/onepage/shipping.phtml"/>
                <block type="checkout/onepage_shipping_method" name="checkout.onepage.shipping_method" as="shipping_method" template="checkout/onepage/shipping_method.phtml">
                    <block type="checkout/onepage_shipping_method_available" name="checkout.onepage.shipping_method.available" as="available" template="checkout/onepage/shipping_method/available.phtml"/>
                    <block type="checkout/onepage_shipping_method_additional" name="checkout.onepage.shipping_method.additional" as="additional" template="checkout/onepage/shipping_method/additional.phtml"/>
                </block>
                <block type="checkout/onepage_payment" name="checkout.onepage.payment" as="payment" template="checkout/onepage/payment.phtml">
                    <block type="checkout/onepage_payment_methods" name="checkout.payment.methods" as="methods" template="checkout/onepage/payment/methods.phtml">
                        <action method="setMethodFormTemplate"><method>purchaseorder</method><template>payment/form/purchaseorder.phtml</template></action>
                    </block>
                </block>
                <block type="checkout/onepage_review" name="checkout.onepage.review" as="review" template="checkout/onepage/review.phtml"/>
            </block>
        </reference>
    </checkout_onepage_index>

<!--
One page checkout progress block
-->

    <checkout_onepage_progress>
        <!-- Mage_Checkout -->
        <remove name="right"/>
        <remove name="left"/>

        <block type="checkout/onepage_progress" name="root" output="toHtml" template="checkout/onepage/progress.phtml">
            <block type="checkout/onepage_payment_info" name="payment_info">
                <action method="setInfoTemplate"><method></method><template></template></action>
            </block>
        </block>
    </checkout_onepage_progress>

<!--
One page checkout payment methods block
-->
    <checkout_onepage_paymentmethod>
        <remove name="right"/>
        <remove name="left"/>

        <block type="checkout/onepage_payment_methods" name="root" output="toHtml" template="checkout/onepage/payment/methods.phtml">
            <action method="setMethodFormTemplate"><method>purchaseorder</method><template>payment/form/purchaseorder.phtml</template></action>
        </block>
    </checkout_onepage_paymentmethod>

<!--
One page checkout shipping methods block
-->

    <checkout_onepage_shippingmethod>
        <!-- Mage_Checkout -->
        <remove name="right"/>
        <remove name="left"/>

        <block type="checkout/onepage_shipping_method_available" name="root" output="toHtml" template="checkout/onepage/shipping_method/available.phtml"/>
    </checkout_onepage_shippingmethod>

    <checkout_onepage_additional>
        <!-- Mage_Checkout -->
        <remove name="right"/>
        <remove name="left"/>

        <block type="checkout/onepage_shipping_method_additional" name="root" output="toHtml" template="checkout/onepage/shipping_method/additional.phtml">
            <action method="setDontDisplayContainer"><param>1</param></action>
        </block>
    </checkout_onepage_additional>

<!--
One page checkout order review block
-->

    <checkout_onepage_review translate="label">
        <label>One Page Checkout Overview</label>
        <!-- Mage_Checkout -->
        <remove name="right"/>
        <remove name="left"/>

        <block type="checkout/onepage_review_info" name="root" output="toHtml" template="checkout/onepage/review/info.phtml">
            <action method="addItemRender"><type>default</type><block>checkout/cart_item_renderer</block><template>checkout/onepage/review/item.phtml</template></action>
            <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/onepage/review/item.phtml</template></action>
            <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/onepage/review/item.phtml</template></action>
            <block type="checkout/cart_totals" name="checkout.onepage.review.info.totals" as="totals" template="checkout/onepage/review/totals.phtml"/>
            <block type="core/text_list" name="checkout.onepage.review.info.items.before" as="items_before" translate="label">
                <label>Items Before</label>
            </block>
            <block type="core/text_list" name="checkout.onepage.review.info.items.after" as="items_after" translate="label">
                <label>Items After</label>
            </block>
            <block type="checkout/agreements" name="checkout.onepage.agreements" as="agreements" template="checkout/onepage/agreements.phtml"/>
            <block type="core/template" name="checkout.onepage.review.button" as="button" template="checkout/onepage/review/button.phtml"/>
        </block>
    </checkout_onepage_review>

    <checkout_onepage_success translate="label">
        <label>One Page Checkout Success</label>
        <reference name="root">
            <action method="setTemplate"><template>page/2columns-right.phtml</template></action>
        </reference>
        <reference name="content">
            <block type="checkout/onepage_success" name="checkout.success" template="checkout/success.phtml"/>
        </reference>
    </checkout_onepage_success>
    <checkout_onepage_failure translate="label">
        <label>One Page Checkout Failure</label>
        <reference name="root">
            <action method="setTemplate"><template>page/2columns-right.phtml</template></action>
        </reference>
        <reference name="content">
            <block type="checkout/onepage_failure" name="checkout.failure" template="checkout/onepage/failure.phtml"/>
        </reference>
    </checkout_onepage_failure>
    <block type="core/list" name="additional.product.info"/>
</layout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:17:37.110

Magento 的合并 XML 配置存储在缓存中。我认为那是你遇到麻烦的地方。很可能您的结帐页面的新配置已损坏。您需要检查“checkout.xml”布局文件，看看它是否有效。还要检查 Checkout 模块文件夹中的模块配置。

查看日志也没有什么坏处，因为可能存在一些关于错误的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T10:27:28.457

我会首先检查`/var/log/exception.log`是否有任何错误并删除 /var 文件夹 - 看看它是否会再次构建。如果尝试重建缓存后没有 /var 文件夹，则很可能是权限相关问题。

# android - 创建一个可绘制文件以制作分隔符

> ID：13507659
> 
> 赞同：0
> 
> 时间：2012-11-22T07:24:06.077
> 
> 标签：android

我正在使用以下代码在我的活动中显示分隔符视图：

```
<View
        android:id="@+id/view"
        android:layout_width="2dp"
        android:layout_height="wrap_content"
        android:layout_marginRight="15dp"
        android:layout_toLeftOf="@id/signoutbutton"
        android:background="@drawable/separator" /> 
```

我的 separator.xml 文件如下：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >

<item>
    <shape android:shape="rectangle" >
        <stroke
            android:height="54dp"
            android:width="1dp"
            android:color="#FFFFFF" />

        <solid android:color="#FFFFFF" />
    </shape>
</item>
<item>
    <shape android:shape="rectangle" >
        <stroke
            android:height="54dp"
            android:width="1dp"
            android:color="@color/blue" />

        <solid android:color="@color/blue" />
    </shape>
</item>

</layer-list> 
```

但是，我正在实现这一点 ![分隔器](../Images/88fcdce5949f89377d7ba5ce4845c2c4.png)

问题是只显示蓝色，而不是我在可绘制文件中所说的白色。我该如何纠正？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:34:15.713

你应该尝试如下使用：

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle" >
    <gradient 
        android:endColor="#FFFFFF" 
        android:startColor="@color/blue"
        android:angle="90" />                  
        </shape>
    </item>    
    </layer-list> 
```

欲了解更多信息，请点击[此处](http://developer.android.com/guide/topics/resources/drawable-resource.html#LayerList)

希望这对你有帮助

# java - 未绑定的泛型行为

> ID：13507662
> 
> 赞同：0
> 
> 时间：2012-11-22T07:24:56.130
> 
> 标签：java, generics

如果我定义以下类

```
public class SomeClass<T extends A> {..} 
```

我当然不能以这种方式定义变量 -`B`是不相关的类。

```
SomeClass<B> instance = new SomeClass<B>(); 
```

但这有效：

```
SomeClass instance = new SomeClass(); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T07:27:33.303

Java 中的泛型是可选的。

如果你使用它们，你必须“正确地”使用它们。

*但是如果你根本*不使用它们，它会编译得很好（但是你会错过它们提供的类型安全特性，并且应该得到一个关于它的编译时警告）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:30:30.320

泛型是编译时间。在运行时，它只是 SomeClass。类似于我们创建非通用列表，例如：

```
List list = new ArrayList(); // you will get warning to use generics 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:40:31.103

泛型只会帮助您并提供类型安全，但只是在编译时。正确编译代码后，泛型类型将被删除，从代码的角度来看，List 看起来就像没有任何泛型的常规 List。

原因之一是向后兼容性。使用没有泛型的 List 的旧 1.4 代码将与新代码一样运行。因此，您可以编写没有泛型的 List 和使用泛型的任何其他类。但是你当然会失去任何类型安全性。

# ios - 带有AFNetworking的NSOperationQueue：NSOperationQueue完成时调用方法？

> ID：13507663
> 
> 赞同：1
> 
> 时间：2012-11-22T07:25:05.393
> 
> 标签：ios, concurrency, asihttprequest, afnetworking, nsoperationqueue

我正在将我的应用程序从 ASIHTTPRequest 切换到 AFNetworking。在 ASIHTTPRequest 中有 ASINetworkQueue 类，它可以让我将一系列 HTTP 请求排队，当队列完成时，调用一个方法。如何使用 AFNetworking 和 NSOperationQueue 做到这一点？我似乎无法找到如何将完成方法或块添加到 NSOperationQueue。

# android - 如何从android中选择唯一的联系人

> ID：13507665
> 
> 赞同：6
> 
> 时间：2012-11-22T07:25:17.003
> 
> 标签：android, contacts, android-contentprovider, android-contacts, android-cursor

我想从 android 中选择**唯一的联系人**，只有那些有电话号码的联系人。我正在使用此代码

```
ContentResolver cr = getContentResolver();
        Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI, null,
                null, null, ContactsContract.Contacts.DISPLAY_NAME);
        // Find the ListView resource.
        mainListView = (ListView) findViewById(R.id.mainListView);

        // When item is tapped, toggle checked properties of CheckBox and
        // Planet.
        mainListView
                .setOnItemClickListener(new AdapterView.OnItemClickListener()
                {
                    public void onItemClick(AdapterView<?> parent, View item,
                            int position, long id)
                    {
                        ContactsList planet = listAdapter.getItem(position);
                        planet.toggleChecked();
                        PlanetViewHolder viewHolder = (PlanetViewHolder) item
                                .getTag();
                        viewHolder.getCheckBox().setChecked(planet.isChecked());
                    }
                });

        // Create and populate planets.
        planets = (ContactsList[]) getLastNonConfigurationInstance();
        // planets = new Planet[10];
        // planets.Add("asdf");
        ArrayList<ContactsList> planetList = new ArrayList<ContactsList>();
        String phoneNumber = null;
        String phoneType = null;

        count = cur.getCount();
        contacts = new ContactsList[count];

        if (planets == null)
        {
            if (cur.getCount() > 0)
            {
                planets = new ContactsList[cur.getCount()];
                int i = 0;
                //
                while (cur.moveToNext())
                {
                    String id = cur.getString(cur
                            .getColumnIndex(ContactsContract.Contacts._ID));
                    String name = cur
                            .getString(cur
                                    .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
                    if (Integer
                            .parseInt(cur.getString(cur
                                    .getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0)
                    {
                        // Query phone here. Covered next
                        Cursor pCur = cr
                                .query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                                        null,
                                        ContactsContract.CommonDataKinds.Phone.CONTACT_ID
                                                + " = ?", new String[]
                                        { id }, null);

                        // WHILE WE HAVE CURSOR GET THE PHONE NUMERS
                        while (pCur.moveToNext())
                        {
                            // Do something with phones
                            phoneNumber = pCur
                                    .getString(pCur
                                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.DATA));

                            phoneType = pCur
                                    .getString(pCur
                                            .getColumnIndex(ContactsContract.CommonDataKinds.Phone.TYPE));

                            Log.i("Pratik", name + "'s PHONE :" + phoneNumber);
                            Log.i("Pratik", "PHONE TYPE :" + phoneType);
                        }
                        pCur.close();
                    }

                    planets = new ContactsList[]
                    { new ContactsList(name, phoneNumber) };

                    contacts[i] = planets[0];
                    planetList.addAll(Arrays.asList(planets));

                    i++;
                }
            } 
```

此代码检索所有联系人并将其放入列表中。但我想要唯一的联系人，并且只有那些有电话号码的联系人。我怎样才能做到这一点？？有没有什么方法可以在查询中传递一些参数来只选择唯一的联系人？？？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-22T09:09:32.443

我想你的意思是你有一些联系人的重复记录。因此，您必须为查询添加条件。重要的部分是联系人必须**在可见组中**并且**有电话号码**。

```
String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '"
                + ("1") + "'";
        String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
                + " COLLATE LOCALIZED ASC";
cur = context.getContentResolver().query(
                ContactsContract.Contacts.CONTENT_URI, projection, selection
                        + " AND " + ContactsContract.Contacts.HAS_PHONE_NUMBER
                        + "=1", null, sortOrder);// this query only return contacts which had phone number and not duplicated 
```

* * *

更新 20/05/2020

```
 suspend fun fetchContacts(): ArrayList<FriendItem> {
        val list = ArrayList<FriendItem>()
        val uri: Uri = ContactsContract.CommonDataKinds.Phone.CONTENT_URI
        val selection = ContactsContract.Contacts.HAS_PHONE_NUMBER
        val cursor: Cursor? = context.contentResolver.query(
            uri,
            arrayOf(
                ContactsContract.CommonDataKinds.Phone.NUMBER,
                ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
                ContactsContract.CommonDataKinds.Phone._ID,
                ContactsContract.Contacts._ID
            ),
            selection,
            null,
            ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME + " ASC"
        )

        cursor?.let {
            val nameIndex = cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME)
            val phoneIndex = cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER)
            while (cursor.moveToNext()) {
                val info = FriendItem(
                    friendName = cursor.getString(nameIndex),
                    friendPhoneNumber = cursor.getString(phoneIndex)
                )
                list.add(info)
            }
            cursor.close()
        }
        return list
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-22T00:49:37.100

这有助于我联系电话号码。在这里，我们正在查询数据表，并使用 CONTACT_ID[联系提供商文档](http://developer.android.com/guide/topics/providers/contacts-provider.html)

```
 @Override
    public Loader<Cursor> onCreateLoader(int id, Bundle args) {

final String ORDER_BY = ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME_PRIMARY + " ASC";

    final String[] PROJECTION = {
            ContactsContract.CommonDataKinds.Phone.CONTACT_ID,
            ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME_PRIMARY,
            ContactsContract.CommonDataKinds.Phone.NUMBER
    };

return new CursorLoader(
                context,
                ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
                PROJECTION,
                null,
                null,
                ORDER_BY
        );
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T07:40:06.720

获取电话号码和联系人姓名的简单方法

```
// set as global
Set<string> phonenumbersList = new HashSet<string>();

            Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null,null, null);
            while (phones.moveToNext())
            {
            String name=phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
            String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

            //contact has name number and phonenumber does not exists in list
            if ( phoneNumber != null && name != null && !phonenumbersList.contains(phoneNumber)){ 
                planets = new ContactsList[]{ new ContactsList(name, phoneNumber) };

                phonenumbersList.add(phoneNumber);
                planetList.addAll(Arrays.asList(planets));
                planetList.Add(phoneNumber, name);
            }
            }
            phones.close(); 
```

# javascript - 文本区域内容显示一秒后变为“值”

> ID：13507674
> 
> 赞同：0
> 
> 时间：2012-11-22T07:25:59.580
> 
> 标签：javascript, html

我有一个关于 textarea 字段的查询，我遇到了一个非常奇怪的问题，我正在努力解决。首先，这是我想要做的：

1.  我有一个下拉菜单，我从中选择一个模板。
2.  选择后，我在 textarea 中显示模板的值 {这是有问题的部分}
3.  之后我处理来自文本区域的数据..并且休息不在图片中。

问题描述：当我尝试使用以下功能将下拉菜单中选择的值显示到文本区域时：`document.getElementById("mytext").innerHTML=myvalue.value;` 它显示一秒钟，然后页面重新加载并再次显示默认值。

这是我的代码：

javascript：

```
 <SCRIPT language="javascript">
function add(index_array) {

//create the form
    var myform = document.createElement("form");
    myform.id="k_form"
    for ( i =0 ; i <index_array.length ; i ++)
    {
        var mytext = document.createElement("input");
        mytext.tpye="text";
        mytext.name=index_array[i];
        mytext.value=index_array[i];
        mytext.id=index_array[i];
        myform.appendChild(mytext); 

    }

mydiv=document.getElementById("d_div");
mydiv.appendChild(myform);

       }
    </SCRIPT>
   <SCRIPT>
             function getkeywords() {
    //          var current_Date = new date();
    //          document.write(current_Date);

                var index_array = new Array();
                var myString = "one and a two and a three = $ and four = $ and five = $";
                var splitresult = myString.split(" ");

                    for(i = 0; i < splitresult.length; i++)
                    {
                    if (splitresult[i] == "$" && i > 1 )   //retireving the keywords..
                    {

                    index_array.push(splitresult[i-2]);
                    }
                    }
                    add(index_array);
                    /*                      
                    console.log("inside the if statement");
                    index_array.push(splitresult[i-2]); //saving the keywords for creating a new form with these as inputs....
                    }}
                    for ( i = 0 ; i < index_array.length ; i++ )
                          { 
                            add(index_array[i]);
                          }

                    */                      
                    }
               </SCRIPT>    
                <script>
             function populate_text()
             {
             var myvalue = document.getElementById("rawquery");
             document.getElementById("mytext").innerHTML=myvalue.value;
             }
               </script> 
```

函数“populate_text 是填充 textarea 的函数。我的 HTML 代码如下：

```
 </HEAD>
              <BODY>
              <FORM>
                <BR/>
            <div align = "center">
            <form method = "post" action = "<?php echo $_SERVER['PHP_SELF']; ?>">
             Select a Template<br />
                <select name = "element" id = "rawquery">
                    <option>Select</option>
                    <option value = "Alpha query">Alpha</option>
                    <option value = "Betaquery">Beta</option>
                    <option value = "Gamma query">Gamma</option>
                    <option value = "Epsilon query">Epsilon</option>
                </select>
               <br /> 
             <input type = "submit"  onclick="populate_text()" name = "submit"><br /><br />
              </form>
              <textarea id = "mytext" name = "raw" rows = "10" cols = "50">raw      template</textarea>
               <br /><br />
        <INPUT type="button" value="Click To Enter Values"    onclick="getkeywords()"/>
             </div>
             <div align="center" id="d_div">
             <br/> <br/>
               </div>

               </FORM>
               </BODY>
               </HTML> 
```

我相信问题在于页面被逐行渲染到浏览器中，但我无法弄清楚究竟是什么导致了这个问题以及如何解决它。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:15:44.073

您正在使用提交按钮，并给它一个 onclick 处理程序。单击按钮时，它会执行您的`onclick`处理程序，然后继续提交表单。这就是您看到值更新然后页面重新加载的原因。

如果您不想使用该按钮提交表单，那么 an`<input type="submit">`是错误的选择。改用按钮：

```
<input type="button" onclick="populate_text()" /> 
```

与默认情况下提交表单的a`type=button`不同，默认情况下不会执行任何操作。`type=submit`

* * *

[W3C](http://www.w3.org/TR/html-markup/input.submit.html)`type=submit`文档：

> type 属性值为“submit”的 input 元素表示提交表单的按钮。

[W3C](http://www.w3.org/TR/html-markup/input.button.html)`type=button`文档：

> type 属性值为“button”的 input 元素表示没有附加语义的按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:22:06.580

那只是因为您将输入类型定义为“提交”

```
<input type = "submit"  onclick="populate_text()" name = "submit" /> 
```

每当提交时执行的操作，页面都会重新加载。因此，默认值将再次呈现。您必须将其类型更改为“按钮”。

在 html 中更好的用途`<select>`是，您可以像下面这样监听它的选定项目的变化，

```
<select name="element" id="rawquery" onchange="populate_text()">
    <option>Select</option>
    <option value = "Alpha query">Alpha</option>
    <option value = "Betaquery">Beta</option>
    <option value = "Gamma query">Gamma</option>
    <option value = "Epsilon query">Epsilon</option>
</select> 
```

你可以使用你的 populate_text 函数来更新文本区域

```
function populate_text() {
    var myvalue = document.getElementById("rawquery");
    document.getElementById("mytext").innerHTML = myvalue.value;
} 
```

# html - 在 android google chrome 中正确保存文件

> ID：13507675
> 
> 赞同：0
> 
> 时间：2012-11-22T07:26:03.117
> 
> 标签：html

我正在尝试使用离线移动网站中的锚标记保存数据。我的下载属性在 chrome 桌面上运行良好（使用正确的名称保存文件，即使用 Date ）但是当在 chrome 的 android 设备上运行时它保存为 csv;base64

任何人都可以建议我以任何方式正确保存它。

# java - 使用 Apache POI XSSFWorkbook，如何一次刷新所有公式单元格？

> ID：13507676
> 
> 赞同：2
> 
> 时间：2012-11-22T07:26:03.570
> 
> 标签：java, apache-poi

请看一下这个问题：

我正在加载一个`.xlsx`大小为 5MB 的大文件，并使用大约 30 张纸`Apache POI`并将值放入某些单元格。但是在将所有数据写入工作表后，工作簿不会刷新，这意味着不同单元格上的公式不会得到评估。

我使用了“ `XSSFFormulaEvaluator.evaluateAllFormulaCells(workbook);`”，它给出了一些这样的错误：

```
 Exception in thread "main" java.lang.IllegalArgumentException: Unknown error type:
 -60 at org.apache.poi.ss.usermodel.FormulaError.forInt(FormulaError.java:131)

at org.apache.poi.xssf.usermodel.XSSFCell.setCellErrorValue(XSSFCell.java:667) 

at org.apache.poi.xssf.usermodel.XSSFFormulaEvaluator.setCellValue(XSSFFormulaEvaluator.java:209) 

at org.apache.poi.xssf.usermodel.XSSFFormulaEvaluator.evaluateFormulaCell(XSSFFormulaEvaluator.java:153) 

at org.apache.poi.hssf.usermodel.HSSFFormulaEvaluator.evaluateAllFormulaCells(HSSFFormulaEvaluator.java:327) 

at org.apache.poi.hssf.usermodel.HSSFFormulaEvaluator.evaluateAllFormulaCells(HSSFFormulaEvaluator.java:318) 

at org.apache.poi.xssf.usermodel.XSSFFormulaEvaluator.evaluateAllFormulaCells(XSSFFormulaEvaluator.java:238) at com.RefreshExcelFile.main(RefreshExcelFile.java:15) 
```

谢谢 ..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-22T23:17:49.540

您必须遵循这些步骤

`XSSFFormulaEvaluator.evaluateAllFormulaCells(workbook); workbook.write();`

但是你的问题看起来像定义公式

# ruby-on-rails - 我可以将 Jekyll 模板中的变量传递给包含，然后使用该变量呈现数据吗？

> ID：13507681
> 
> 赞同：4
> 
> 时间：2012-11-22T07:26:29.327
> 
> 标签：ruby-on-rails, for-loop, jekyll

在 foo.html （一篇文章）中，我有以下内容：

```
{% assign table_name="application" %}
{% include table.html %} 
```

此分配似乎在 table.html 中工作正常

```
{% assign tableName = table_name %}
<p>table name is: {{ tableName }}</p> # renders "table name is: application" 
```

现在，我正在尝试通过执行以下操作对我在 config.yml 中定义的数据数组进行排序：

```
{%  for header in site.table.tableName.headers %}
<th>{{ header }}</th>
{% endfor %} 
```

这给了我任何输出。

如果我更改`for`语句以包含变量的内容，而不是变量，它工作正常。

```
{%  for header in site.table.application.headers %} 
```

这让我相信这*不是*我的数组的问题，而是 Jekyll 的缺点，Jekyll 中的一个错误，或者我没有准确地构建我的语句。

知道我怎样才能完成这项工作吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T08:06:43.230

看起来可以做到这一点。我不得不更多地以编程方式考虑它。似乎正在发生的事情是 Jekyll 期待一个对象，而我正在给它喂一根绳子。

```
{% assign tableName = "aStringName" %}
{% include table.html %} 
```

所以，

```
# in _includes/table.html
{%  for header in site.table.tableName.headers %} 
```

被解释为

```
{%  for header in site.table."aStringName".headers %} 
```

当我切换到对象的括号表示法时，它是完美的。

最后结果：

```
{% for header in site.table[tableName].headers %} 
```

或者，正如 Jekyll 所看到的，

```
{% for header in site.table['aStringName'].headers %} 
```

# c++ - 返回 std::string 作为 const 引用

> ID：13507698
> 
> 赞同：16
> 
> 时间：2012-11-22T07:27:42.153
> 
> 标签：c++, string, reference, constants, stdstring

我对将 std::string 作为 const 引用返回有疑问。

```
class sample
{
public:
  std::string mString;
  void Set(const std::string& s)
  {
    mString = s;
  }
  std::string Get()
  {
    return mString;
  }
 }; 
```

在 Set 函数中，我将 std::string 作为 const 引用传递，因为它的值在函数内部没有改变。

而在 Get 函数中，实际上我在这里很困惑。将 std::string 作为值返回更有意义。但我不确定通过将字符串作为 const 引用传递是否有任何优势。我认为通过将字符串作为参考来提高执行速度，但我不确定。但是将其返回为 'const 有什么好处吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-22T07:42:36.773

决定如何从某种容器中返回一个重要对象的问题实际上并不重要：

*   如果返回值的类对对象施加任何类型的约束，则不能返回非`const`引用，因为它会失去强制执行其不变量的可能性。显然，`const`仅当调用成员函数的对象也是非引用时，通过非引用返回对象才是可行的`const`。
*   公开`const`对对象的引用将避免不变量的问题，但仍然意味着相应类型的对象实际上作为实现细节保留在内部。
*   按值返回对象可能会导致复制对象的大量成本。

如果您的类进一步是一个可行的[*监视器*](http://en.wikipedia.org/wiki/Monitor_%28synchronization%29)，您肯定希望按值返回对象，否则该对象可能在调用者有机会复制它之前发生变异。

基本上，没有一个选择是理想的。如有疑问，我会按值返回，除非知道复制对象的成本很高，在这种情况下，我*可能会*按`const&`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-22T07:44:01.917

通过引用或 const 引用返回没有速度差异 - 两者都非常快，因为它们只是返回对原始对象的引用，不涉及复制。

（非常量）引用返回的对象可以通过该引用进行修改。在您的具体示例中，`mString`它是公开的，因此无论如何都可以（直接）修改它。但是，getter 和 setter 的常用方法（以及引入它们的主要原因）是封装 - 您只允许通过 getter/setter 访问您的数据成员，以便您可以检测正在设置的无效值、响应值更改和只是通常将类的实现细节隐藏在其中。所以 getter 通常通过 const 引用或按值返回。

但是，如果您通过 const 引用返回，它会绑定您*始终*在您的类中保留一个实例`std::string`来备份引用。也就是说，即使您稍后想要重新设计您的类，以便它在 getter 中动态计算字符串，而不是在内部存储它，您也不能。您必须同时更改您的公共接口，这可能会破坏使用该类的代码。例如，只要您通过 const-reference 返回，这是完全有效的代码：

```
const std::string *result = &aSample.Get(); 
```

如果更改为按值返回而不是 const 引用，则此代码当然会产生一个*不再编译*~~的悬空指针。~~ *（感谢史蒂夫杰索普纠正我）**`Get()`*

 **总而言之，我会采取的方法是`mString`私有化。`Get()`可以按值或通过 const 引用返回，这取决于您对始终存储字符串的确定程度。然后该类将如下所示：

```
class sample
{
  std::string mString;

public:
  void Set(const std::string &s)
  {
    mString = s;
  }
  std::string Get() const
  {
    return mString;
  }
}; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-22T10:28:13.647

这里最常见的做法是将值作为 const 引用返回，然后您可以根据需要使用引用或复制该值：

```
const std::string& Get() const
{
    return mString;
}

sample mySample;
const std::string &refString = mySample.Get(); // Const-reference to your mString
const std::string copyString = mySample.Get(); // Copy of your mString 
```

如果您确实*需要*返回字符串的副本，则可以通过使用“[最重要的 Const](http://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/) ”来避免复制字符串返回值：

```
sample mySample;
const std::string &myString = mySample.Get();
// myString is now valid until it falls out of scope, even though it points to a "temporary" variable 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T07:29:58.970

将其作为参考返回。如果需要副本，当然可以从该参考中制作。**

# matlab - 如何在一张图上绘制两个函数？

> ID：13507700
> 
> 赞同：-2
> 
> 时间：2012-11-22T07:27:55.550
> 
> 标签：matlab, plot, graph, matlab-figure

我已经完成了在一张图中绘制函数 x^3 和 3^x 的作业。

有人可以帮我做这个练习吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:39:18.963

每次你调用`plot`matlab 都会在绘制新函数之前清理画布，除非你专注于你调用的窗口`hold on`，这将基本上告诉 Matlab 保留旧的东西并叠加新的绘图。

```
x = 0:0.001:10

y1 = x.^3;
y2 = 3.^x;

plot(x, y1);
hold on; % without this one will delete y1 before drawing y2
plot(x, y2, 'r'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T08:28:19.923

另外一个选项

```
p=ezplot('x^3',[-3,3]); set(p,'Color','red');
hold on; ezplot('3^x',[-3,3]);  title('x^3 and 3^x'); 
```

附言。由于不支持在同一个调用中直接在其上设置颜色，因此使用了两个`ezplot`命令并保留。`ezplot`必须先制作`ezplot`然后设置颜色后缀。此外，没有办法同时传递一种以上的颜色。因此，如果要使用`ezplot`，我没有看到避免多次调用的方法。

有时，Matlab 函数的工作方式并不完全一致。

![在此处输入图像描述](../Images/948a0a2ec7a7e7ed2752c0b1a41deac9.png)

# android - 使用 OpenGL ES 2.0 进行坐标拾取

> ID：13507702
> 
> 赞同：3
> 
> 时间：2012-11-22T07:28:09.890
> 
> 标签：android, opengl-es, glsles

我尝试使用 OpenGL ES 2.0 实现坐标拾取功能。我无法实现我在桌面版本中实现的两个版本。

版本 1 是用唯一的颜色渲染每个三角形，它代表三角形的索引，而不是用光线投射计算坐标。此版本不起作用，因为在 OpenGL ES GLSL 版本 1.0 中没有变量 GL_PrimitiveID 也无法进行按位移位。

版本 2 是将坐标渲染为浮点纹理的值，但浮点纹理在 OpenGL ES 2.0 中不可用。

有没有人知道我可以实现什么？我不想对每个三角形都进行光线投射，因为它的性能不高。

感谢您的帮助和任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T06:16:56.527

在使用射线投射时，无论如何测试每个基元对射线都是一个坏主意。您应该构建模型的分层表示，例如边界体积树并执行加速的光线投射测试。当然，每次模型更改时，您都必须更新此树。

返回为每个三角形呈现单独颜色的原始方法，您似乎需要分配另一个顶点属性（颜色/索引），并且您必须为每个三角形重复共享顶点。顶点数将是 3 * 三角形数，但这将解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:38:57.310

实现坐标拾取的另一种方法是物体的射线拾取。它被认为是从 2D 屏幕坐标中选取 3D 对象的最佳方法。您不必使用对象的独特颜色渲染场景并选择颜色来确定交叉点。

在这个很棒的教程的帮助下，我已经实现了 3D 对象的拾取： [http://android-raypick.blogspot.com/2012/04/first-i-want-to-state-this-is-my-first。 html](http://android-raypick.blogspot.com/2012/04/first-i-want-to-state-this-is-my-first.html)

在对算法进行了一些优化（我在博客文章中发表了评论）之后，就我而言，性能不是问题。为了测试性能，我选择了一个包含 3000 多个三角形的 3D 模型，而且速度很快。在实际情况下，对于碰撞检测，您可以使用几何非常简化的模型。

# birt - 如何使用 XML 数据源在 BIRT 报告中显示图像？

> ID：13507704
> 
> 赞同：3
> 
> 时间：2012-11-22T07:28:19.210
> 
> 标签：birt

我正在使用 BIRT 报告工具版本 2.5.2。我想使用 XML 数据源生成 PDF 格式的 BIRT 报告。我有以下 XML 节点结构，

```
<?xml version="1.0" encoding="UTF-8"?>
<columnDetails>
    <employeeDetails>
        <employeeName>{Name Of Employee}</employeeName>
        <employeeId>{Employee ID}</employeeId>
        <employeeSalary>{Employee Salary}</employeeSalary>
        <employeeImage>{Base64 encoded byte string of Employee Image}</employeeImage>
    </employeeDetails>
</columnDetails> 
```

在生成报告时，我的 XML 数据源足以填充除员工图像之外的员工详细信息。生成的 PDF 报告显示“无法访问此项目的资源”来代替图像。

我的图像项数据集与数据源 XML 的“employeeImage”节点正确映射，并且为了呈现图像，我将源定义为 dynamicImage，dynamicImage 表达式为

> “行[employeeImage]”</p>

这是一个 Blob 类型的数据对象。请建议我如何解决此问题以在 PDF 报告中显示员工图像。如果您需要任何进一步的说明，请告诉我。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2015-04-10T12:38:21.907

可以添加图像
。作为嵌入图像。然而，这降低了可重用性。
湾。作为报告库的一部分。

# c - C 的 BDD/TDD 开发是否有 Cucumber/Capybara 等价物？

> ID：13507707
> 
> 赞同：2
> 
> 时间：2012-11-22T07:28:31.103
> 
> 标签：c, cucumber

我正在参加一个使用 Ruby on Rails 的在线课程，并使用 Capybara 和 Cucumber 进行场景驱动测试。

我有嵌入式 C 编程的背景，想知道是否有类似的 C 场景驱动测试框架，在行业中用于测试嵌入式库的标准用途？

# php - 如何从php中的文件夹中删除文件

> ID：13507721
> 
> 赞同：9
> 
> 时间：2012-11-22T07:29:17.120
> 
> 标签：php, file, delete-file

我有一个文件夹`'items'`，其中有 3 个`item1.txt, item2.txt and item3.txt.` 我想`delete item2.txt`从文件夹归档的文件。我正在使用下面的代码，但它没有从文件夹中删除文件。任何机构都可以帮助我。

```
<?php
        $data="item2.txt";
        $dir = "items";
        $dirHandle = opendir($dir);
        while ($file = readdir($dirHandle)) {
            if($file==$data) {
                unlink($file);
            }
        }

        closedir($dirHandle);

?> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-22T07:33:01.500

最初该文件夹应具有 777 权限

```
$data = "item2.txt";
$dir = "items";
while ($file = readdir($dirHandle)) {
    if ($file==$data) {
        unlink($dir.'/'.$file);
    }
} 
```

或尝试

```
$path = $_SERVER['DOCUMENT_ROOT'].'items/item2.txt';
unlink($path); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-22T07:33:42.110

这里不需要 while 循环来删除一个文件，你必须将该文件的路径传递给 unlink() 函数，如下所示。

```
$file_to_delete = 'items/item2.txt';
unlink($file_to_delete); 
```

请阅读 unlink() 函数的详细信息

[http://php.net/manual/en/function.unlink.php](http://php.net/manual/en/function.unlink.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T07:35:47.733

您的代码中有一个错误，您没有给出正确的路径

```
<?php
        $data="item2.txt";    
        $dir = "items";    
        $dirHandle = opendir($dir);    
        while ($file = readdir($dirHandle)) {    
            if($file==$data) {
                unlink($dir."/".$file);//give correct path,
            }
        }    
        closedir($dirHandle);

?> 
```

*   [取消链接](http://php.net/manual/en/function.unlink.php)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T07:37:51.817

```
如果（$文件==$数据）{
  取消链接（$dir .'/'.$file）；
}

```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-15T11:51:03.713

这很简单：

```
$file='a.txt';

    if(unlink($file))
    {
        echo "file named $file has been deleted successfully";
    }
    else
    {
        echo "file is not deleted";
    }

//if file is in other folder then do as follows

unlink("foldername/".$file); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-22T07:32:58.953

尝试将其重命名为服务器可以访问的垃圾箱或临时文件夹*** *除非它是敏感数据。

```
rename($old, $new) or die("Unable to rename $old to $new."); 
```

# .net - 使用共享函数创建类的新实例，使用隐藏构造函数

> ID：13507723
> 
> 赞同：0
> 
> 时间：2012-11-22T07:29:19.580
> 
> 标签：.net, vb.net

我正在尝试编写一个有趣的技巧，我相信我曾经在 Java 程序中看到过，并且可能在一些 C# 代码中看到过。

我有一个静态方法，它将 ID 作为整数，在表中查找，然后使用该行中的信息创建并返回该类的实例。问题是，我想让某个构造函数只对我的静态函数可见，而不是对任何人可见。我查看了各种保护级别的修改，但似乎找不到任何可以完成此任务的修改。有谁知道我如何实现这一目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T09:10:01.760

为什么不将构造函数设为私有？

```
Public Class Foo
    Private Sub New ()
    End Sub

    Public Shared Function CreateFoo (bar As Integer) As Foo
        Return New Foo ()
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:59:56.117

这将是对此的“快速修复”，但绝不是您正在寻找的。

使用您需要的构造函数创建一个继承的类，然后以其基本格式返回该类。只要您使用 Derp，这将使构造函数至少“隐形”

```
Public Class Herp
  Inherits Derp
    Public Sub New(ByVal Secret As String)
        _Secret = Secret
    End Sub
End Class

Public Class Derp
   Protected _Secret As String
   Public Sub New()

   End Sub
End Class 
```

然后这样做：

```
Public Shared Function GetDerp() As Derp
   Dim derp As Derp = New Herp("Secret")
   Return Derp
End Function 
```

# facebook - 带有链接的 Facebook Graph API 自定义操作，链接被删除

> ID：13507725
> 
> 赞同：1
> 
> 时间：2012-11-22T07:29:23.863
> 
> 标签：facebook, facebook-graph-api

我有一个发布自定义操作的 Facebook 应用程序，类似于 Instagram 的做法。当用户像 Instagram 一样发布消息时，我在消息属性的末尾放置了一个链接，例如：“这是一条消息 - [http://domain.com/123](http://domain.com/123) ”。现在突然之间这些链接都不再显示了，即使在旧帖子上也是如此，所以现在我的旧帖子的消息是“这是一条消息 - ”

为什么是这样？安全性或其他东西是否发生了变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:41:10.537

据我所知，Facebook 开发者博客中没有报告相关的变化。但这很奇怪，为什么不使用以下元数据链接您的 facebook 聚合？

```
 <meta property="og:url"  content="" /> 
```

ps 这些是最近生效的改动，这里没有相关的东西

[https://developers.facebook.com/roadmap/completed-changes/#november-2012](https://developers.facebook.com/roadmap/completed-changes/#november-2012)

# asp.net-mvc-4 - 在 ASP.NET 中将 GET 参数传递给 ActionLink

> ID：13507727
> 
> 赞同：2
> 
> 时间：2012-11-22T07:29:28.733
> 
> 标签：asp.net-mvc-4, html.actionlink

抱歉，我是 C# 和 ASP.NET 的新手，我看到很多关于这个问题的帖子，但我完全不明白。我试图了解如何通过 HTML.ActionLink 将 GET 参数传递给操作：

这是网址：

```
http://localhost:36896/Movies/SearchIndex?searchString=the 
```

我的 CSHTML 页面应该是这样的：

```
<input type="Text" id="searchString" name="searchString" />
@Html.ActionLink("Search Existing", "SearchIndex", new { searchString = "the"}) 
```

这个硬编码参数“the”实际上是有效的，但是我如何选择 id=searchString 的输入元素，比如`document.getElementById("searchString").value`

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:34:07.127

如果您要作为 GET 参数发送的值在服务器上未知，则您不能使用 Html.ActionLink 帮助器来添加它。您需要使用 javascript 来操作现有链接并附加参数。

看起来您有一个包含搜索字符串的输入字段，并且您希望将在此字段中输入的值发送到服务器。处理这种情况的更好方法是使用带有 method="GET" 的 HTML 表单而不是 ActionLink。这样您就不需要使用任何 javascript - 它是 HTML 规范的一部分：

```
@using (Html.BeginForm("SearchIndex", "Movies", FormMethod.Get))
{
    @Html.EditorFor(x => x.SearchString)
    <button type="submit">Search</button>
} 
```

现在，当您单击`Search`按钮时，在字段中输入的值`SearchString`将自动发送到`SearchIndex`操作：

```
http://localhost:36896/Movies/SearchIndex?searchString=the 
```

但是，如果您绝对坚持使用 ActionLink，则必须编写 javascript 来在单击此链接时操纵现有链接的 href 以便将值附加到 url。这是一种我不推荐的方法，因为 HTML 规范已经在整个 HTML 表单中为您提供了此功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:01:08.167

这使得 @Html.EditorFor 引用对象的 Title 字段，有点随机但它有效！

```
@using (Html.BeginForm ("SearchIndex", "Movies", FormMethod.Get))
{
    @Html.EditorFor( x => x.ElementAt(0).Title)
    <button type="submit">Search</button>
} 
```

仍然无法将输入参数传递给 GET 中的 URL。

**编辑**：

**最终解决方案**：

```
@Html.TextBox("SearchString")
    <button type="submit">Filter</button> 
```

在控制器侧，切换输入参数。基本上它会自动识别传递的参数。

```
public ActionResult SearchIndex(string searchString)
        {
           ...
        } 
```

# c# - 在C#中以decimal.ToString()获取NN.NNNNN格式

> ID：13507729
> 
> 赞同：0
> 
> 时间：2012-11-22T07:29:36.637
> 
> 标签：c#, .net

我如何在小数点后获得格式 NN.NNNN,NN.ToString()

我试过：

```
value.ToString("00.0000,00") 
```

但是在输出上我有 NN.NNNNNN 格式，没有逗号......

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:33:38.187

我有点不清楚你试图实现什么，但有一点很清楚，你用千位分隔符和逗号分隔符交换了位置。它应该是：

```
value.ToString("00,0000.00") 
```

在格式字符串中，逗号字符 (',') 是逗号分隔符的占位符，它不代表文字逗号。句点字符 ('.') 相同：它是数字组分隔符的占位符。这些将替换为使用的格式提供程序中的实际逗号和数字组分隔符（如果没有，则将当前区域性传递给`ToString`方法）。

仍然可能输出不是您想要的。我得到以下输出

```
instance:
double value = 123456.7890123;

// prints "123 456,79"
Console.WriteLine(value.ToString("00,0000.00")); 
```

如果您想要其他分组，则需要提供合适的[`NumberFormatInfo`](http://msdn.microsoft.com/en-us/library/system.globalization.numberformatinfo.aspx)对象：

```
double value = 123456.7890123;
NumberFormatInfo nfi = new NumberFormatInfo
    {
        NumberDecimalDigits = 2,
        NumberDecimalSeparator = ".",
        NumberGroupSeparator = ",",
        NumberGroupSizes = new[] { 4, 2 }
    };
// prints "12,3456.79"
Console.WriteLine(value.ToString("00,0000.00", nfi)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T07:36:36.130

```
value.ToString("00.0000\\,00"); 
```

# json - Codeigniter CSRF 响应格式

> ID：13507730
> 
> 赞同：0
> 
> 时间：2012-11-22T07:29:41.463
> 
> 标签：json, codeigniter, csrf

我为我的所有 ajax 调用使用了预定义的响应格式。

如果请求是，`success`那么服务器将响应：

```
{"status":true,"data":{"name":"person","age":2}} 
```

请注意`data`不是必需的。

如果请求失败，那么我会得到

```
{"status":false,"reason":"You are not authorised."} 
```

所以每个响应都有一个`status`字段，如果状态是`FALSE`那么就会有`reason`字段。

问题是现在我`CSRF`在 Codeigniter 中启用了保护，如果令牌过期/失败，系统输出

```
The action you have requested is not allowed. 
```

这是 HTML 内容。

是否可以扩展安全类，这样如果请求是通过 Ajax 的，那么它将保持 json_encoded 格式，否则使用 html 格式。（我不想修改核心）

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T20:22:57.110

此错误消息是从方法呈现的`CI_Exceptions::show_error`（位于系统/核心中）。您可以通过通常的方式[扩展此类](http://ellislab.com/codeigniter/user-guide/general/core_classes.html)并覆盖此方法以捕获此错误并返回您想要的任何内容。

您可以通过覆盖它来摆脱`CI_Security::csrf_show_error`方法内部的调用，这样它就不会简单地调用

```
show_error('The action you have requested is not allowed.'); 
```

这可能更健壮。

`CI_Exceptions`或者，您可以在课堂内攻击这个。由于此错误不附带特定的错误代码，因此您必须匹配可能在更新之间中断的消息（[当前是硬编码](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Security.php#L280)）。生成的类可能如下所示：

```
class MY_Exceptions extends CI_Exceptions {
    public function show_error($heading, $message, $template = 'error_general', $status_code = 500) {
        if ($message == 'The action you have requested is not allowed.') {
            // handle this error your way
        } else {
            // send every other error to the original handler
            parent::show_error($heading, $message, $template, $status_code);
        }
    }
} 
```

# python - 如何从原始字节中获取 IPv6 地址？

> ID：13507732
> 
> 赞同：0
> 
> 时间：2012-11-22T07:29:45.373
> 
> 标签：python, ipv6

我的应用程序需要通过网络发送和读取 IPv6 地址。它只会被我的应用程序读取，但我仍然想遵循约定。是否有这样做的库函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:29:45.373

该`socket`模块有一个功能，称为[inet_pton](http://docs.python.org/2/library/socket.html#socket.inet_pton)。但是，它并非在所有平台上都可用。（它在我写这篇文章的 Windows 机器上不可用。）

我建议您使用名为[ipaddr](http://code.google.com/p/ipaddr-py/)的非标准库。它有两个不太明显的功能，可以完全满足您的需求：

```
from ipaddr import ipaddr
raw = '\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'
ip = ipaddr.IPv6Address(ipaddr.Bytes(raw))

print "IP is: " + str(ip)

original = bytes(ip.packed)

print "Original raw bytes: " + repr(original) 
```

# ios - 可见 UIView 层次树的最终根是什么？

> ID：13507738
> 
> 赞同：0
> 
> 时间：2012-11-22T07:30:12.260
> 
> 标签：ios, uiview

`UIView`可见层次树的最终根是什么？那是`UIWindow`可以检索的对象之一`[[UIApplication sharedApplication] windows]`吗？modal 是这样`UIView`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:09:35.677

是的。每个 App 都包含 MainWindow.xib 文件。那是所有的父母。如果使用较新版本的 Xcode，将在 AppDelegate 的 didFinishWithLaunching 方法的开头声明一个 UIWindow。

此外，模态 UIViewController 将被添加到再次添加到 UIWindow 上的父 UIViewController

# android - 无法连接到使用 parse.com 的 android 应用程序中的推送服务器错误

> ID：13507739
> 
> 赞同：0
> 
> 时间：2012-11-22T07:30:12.513
> 
> 标签：android, push-notification

我已经通过“新项目”和“现有项目”选项多次浏览了推送指南（在 parse.com 上），但在我所有的测试中，我都无法收到通知 - 在我的手机或模拟器。仪表板显示推送通知已发送。LogCat 显示以下错误。我该如何解决这个问题？

```
11-22 05:43:17.619: E/com.parse.PushService(5060): could not connect to push server
11-22 05:43:17.619: E/com.parse.PushService(5060): java.net.SocketTimeoutException: Connection timed out
11-22 05:43:17.619: E/com.parse.PushService(5060):  at org.apache.harmony.luni.platform.OSNetworkSystem.connect(Native Method)
11-22 05:43:17.619: E/com.parse.PushService(5060):  at dalvik.system.BlockGuard$WrappedNetworkSystem.connect(BlockGuard.java:357)
11-22 05:43:17.619: E/com.parse.PushService(5060):  at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:204)
11-22 05:43:17.619: E/com.parse.PushService(5060):  at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:437)
11-22 05:43:17.619: E/com.parse.PushService(5060):  at java.net.Socket.connect(Socket.java:1002)
11-22 05:43:17.619: E/com.parse.PushService(5060):  at com.parse.PushService$2.doInBackground(PushService.java:468)
11-22 05:43:17.619: E/com.parse.PushService(5060):  at com.parse.PushService$2.doInBackground(PushService.java:428)
11-22 05:43:17.619: E/com.parse.PushService(5060):  at com.parse.os.ParseAsyncTask$2.call(ParseAsyncTask.java:215)
11-22 05:43:17.619: E/com.parse.PushService(5060):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
11-22 05:43:17.619: E/com.parse.PushService(5060):  at java.util.concurrent.FutureTask.run(FutureTask.java:138)
11-22 05:43:17.619: E/com.parse.PushService(5060):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
11-22 05:43:17.619: E/com.parse.PushService(5060):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
11-22 05:43:17.619: E/com.parse.PushService(5060):  at java.lang.Thread.run(Thread.java:1019) 
```

我正在执行 Push Android 指南并遵循确切的说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:34:53.413

我可以建议你**pushwoosh**。它尝试了一个测试。跟随：[Link1](http://www.pushwoosh.com/programming-push-notification/enabling-gcm-services-for-google-api/)，然后[是 Link2](http://www.pushwoosh.com/programming-push-notification/android-push-notification-sdk-configuration-guide/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:12:18.933

在 parse.com 上转到您的应用程序，然后单击设置。应该有一个推送通知部分。启用“启用客户端推送？”。

# performance - Meteor：帐户登录链接需要时间加载

> ID：13507741
> 
> 赞同：3
> 
> 时间：2012-11-22T07:30:30.313
> 
> 标签：performance, meteor

我已经使用 facebook、twitter、github 和 auth 帐户的帐户包启动了一个流星应用程序。对于 UI，我使用的是引导程序包。当我加载我的网站[projectx.meteor.com](http://projectx.meteor.com)时，登录链接需要一些时间

除了登录链接之外，我在 HTML 页面上的所有内容都是静态的：

**客户端/x.html：**

```
<div class="masthead">
  <ul class="nav nav-pills pull-right">
    <li class="active"><a href="#">Home</a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">Contact</a></li>
    <li><a href="#">{{loginButtons}}</a></li>
  </ul>
</div> 
```

客户端没有JS，我在服务端调用了启动方法。 **服务器/startup.js：**

```
Meteor.startup(function () {

}); 
```

此外，当我在 Windows Phone 7.5 上从 IE 9 访问上述 URL 时，它根本不显示登录链接。

**更新：**在下面的评论之后，我修改了我的代码以删除包和额外的 HTML。现在包含的软件包有：

*   保留输入
*   帐户-ui
*   帐户密码
*   帐户-facebook
*   账户-推特
*   账户-github

我已经删除了引导程序，现在我的模板上唯一的东西是 {{loginButtons}}，它仍然会在延迟后加载登录链接。这是帐户包的默认行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T06:42:03.710

加载按钮需要这么长时间的原因是因为 Meteor 必须先向服务器端询问必要的配置信息（位于 Mongo 实例的集合中），然后才能为您想要的每个外部服务呈现登录按钮使用。我认为最好的解决方案（以及我使用的解决方案）是如果您想要更快的结果或调整登录按钮模板以允许使用带有所有它需要的 OAuth 密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-04T15:47:09.297

正如您所说，这是默认行为。您的代码中没有关于 bootstrap 或 js 的问题。我无法确切解释原因，但它就是这样工作的。

# vb6 - 增加记录集中查询的执行时间 (CursorLocation )

> ID：13507744
> 
> 赞同：2
> 
> 时间：2012-11-22T07:30:45.903
> 
> 标签：vb6, recordset

我正在使用下面的代码从表中检索数据。之后，我将结果数据绑定到网格。问题在于速度。执行此查询需要将近 2 到 3 分钟，而从后端执行则需要 30 到 40 秒。

------------当前代码 ------------------

```
rs.ActiveConnection = con //con is connection
con.Errors.Clear
rs.CursorLocation = adUseServer
rs.CursorType = adOpenDynamic
rs.LockType = adLockOptimistic
rs.StayInSync = True
On Error Resume Next
rs.Open strCmd //strCmd is query 
```

-------我尝试使用客户端的替代解决方案---------------

```
rs.ActiveConnection = con //con is connection
con.Errors.Clear
rs.CursorLocation = adUseClient
rs.CursorType = adOpenKeyset
rs.LockType = adLockBatchOptimistic
rs.StayInSync = True
On Error Resume Next
rs.Open strCmd //strCmd is query 
```

/// 结果：相同的速度

--------使用执行而不是打开记录集的替代解决方案---------------

```
com.ActiveConnection = con //con is connection
com.CommandType = adCmdText
com.CommandTimeout = 500
com.CommandText = strCmd //strCmd is query
con.Errors.Clear
On Error Resume Next
Set rs= com.Execute() 
```

//结果：速度很快，但是当我尝试更新网格中的值时，它显示以下错误：

> “运行时错误‘3251’：当前记录集不支持更新。这可能是提供程序的限制，或者是所选锁定类型的限制。”

* * *

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:55:47.117

我认为可能是您的表设置/查询，而不是您的连接导致了问题。

确保 WHERE、JOIN 和 ORDER BY 子句中列出的每个字段都已编入索引。

重新评估您正在创建的任何派生字段。前几天我看到一个查询，它结合了 2 个文本字段，然后对那个新的 -unindexed- 字段进行排序。

如果您发布查询和表结构，它会给我一个更好的主意。

# ios - 核心绘图范围变化性能

> ID：13507745
> 
> 赞同：0
> 
> 时间：2012-11-22T07:30:46.503
> 
> 标签：ios, performance, drawing, core-plot

我需要使用捏识别器调整我的绘图大小，它允许在左侧和底部的小区域中分别调整“宽度”和“高度”的大小。我的情节也在 UIScrollView 内部以水平滚动

这是我的 Y 轴捏代码：

```
- (void)yAxisPinchPerformed:(UIPinchGestureRecognizer *)pinchRecognizer
{
    CGFloat recognizerScale = pinchRecognizer.scale;

    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)_graph.defaultPlotSpace;

    switch (pinchRecognizer.state) {
        case UIGestureRecognizerStateBegan:
        {
            _savedRange = plotSpace.yRange;
        }
            break;

        case UIGestureRecognizerStateChanged:
        {
            CGFloat scaledRange = recognizerScale * _savedRange;
            [plotSpace setYRange:scaledRange];
        }
            break;

        default:
            break;
    }
} 
```

效果很好，但在设备上真的很慢，可能是因为它重绘了整个情节（它很宽并且在 UIScrollView 内部），而不仅仅是可见区域；我的情节包含最多 100 条渐变填充。我试图关闭填充，但它只起到了一点作用；

现在我有这些改进：

```
- (void)yAxisPinchPerformed:(UIPinchGestureRecognizer *)pinchRecognizer
{
    CGFloat recognizerScale = pinchRecognizer.scale;

    switch (pinchRecognizer.state) {
        case UIGestureRecognizerStateBegan:
        {
            // UIImageView *_imageView;
            [_imageView setImage:_graph.imageOfLayer];
            [_imageView setHidden:NO];
            // CGRect initialFrame is frame of graph container
            [_imageView setFrame:initialFrame];
            _savedHeigth = _imageView.frame.size.height;
        }
            break;

        case UIGestureRecognizerStateChanged:
        {
            CGFloat scaledHeight = recognizerScale * _savedHeight;

            CGRect imageFrame = _imageView.frame;
            imageFrame.size.height = scaledHeight;

            [_imageView setFrame:imageFrame];
        }
            break;

        case UIGestureRecognizerStateEnded:
            CGFloat scaledRange = calculateRangeFromHeights(...);

            CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *)_graph.defaultPlotSpace;

            [plotSpace setYRange:scaledRange];
            [_imageView setHidden:YES];
            break;

        default:
            break;
    }
} 
```

我得到绘图层的图像并执行 UIImageView 的缩放，它超级快。但是当我减小 Y 比例时，我只有部分图形，它在顶部被切割。

是否可以平滑实时地缩放 Core Plot 图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T13:36:45.720

Core Plot 无法知道有多少图表在滚动视图中可见。我会删除滚动视图并依赖内置的 Core Plot 滚动。如果这不可行，您可以确定哪些条是可见的，并且只显示可见条。修改您的数据源以仅返回可见条的数据，并在可见条集更改时重新加载数据。

# syntax - C++ 未知错误

> ID：13507751
> 
> 赞同：1
> 
> 时间：2012-11-22T07:30:58.917
> 
> 标签：syntax, compiler-errors, c++-cli

我在 C++ 中有以下函数：

```
std::wstring decToDeg(double input)
{
    int deg, min;
    double sec, sec_all, min_all;
    std::wstring output;

    sec_all = input * 3600;
    sec = Math::Round(static_cast<int>(sec_all) % 60, 3); //code from @spin_eight answer
    min_all = (sec_all - sec) / 60;
    min = static_cast<int>(min_all) % 60;
    deg = static_cast<int>(min_all - min) / 60;
    output = deg + L"º " + min + L"' " + sec + L"\"";

    return output;
} 
```

当我尝试编译时，出现此错误：

```
error C2679: binary '=' : no operator found which takes a right-hand operand of type 'System::String ^' (or there is no acceptable conversion) 
```

我可以做些什么来纠正我的函数中的这两个错误？

**编辑：解决了**

```
std::wstring decToDeg(double input)
{
    int deg, min;
    double sec, sec_all, min_all;

    sec_all = input * 3600;
    sec = Math::Round(static_cast<int>(sec_all) % 60, 3);
    min_all = (sec_all - sec) / 60;
    min = static_cast<int>(min_all) % 60;
    deg = static_cast<int>(min_all - min) / 60;

    std::wostringstream output;
    output << deg << L"º " << min << L"' " << sec << L"\"";

    return output.str();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:42:32.063

```
sec = Math::Round(static_cast<int>(sec_all) % 60, 3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:44:56.583

你不能在双打上使用模数。双打取模：

```
 int result = static_cast<int>( a / b );
 return a - static_cast<double>( result ) * b; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T07:48:21.873

您可以使用字符串流来构造`output`，如下所示：

```
std::wostringstream output;
output << deg << L"º " << min << L"' " << sec << L"\"";

return output.str(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T07:45:27.427

对于第一个错误，试试这个：

```
 min = (static_cast<int>(min_all) ) % 60; 
```

这应该确保在尝试进行任何其他计算之前先完成演员表。

如果您的其他错误不是由第一个错误引起的错误，您可能需要尝试使用[stringstream](http://www.cplusplus.com/reference/iostream/stringstream/)。它的行为类似于普通的 I/O 流，因此非常适合格式化字符串。

# java - 无法在 JSF 中实例化类错误，由 NullPointerException 引起

> ID：13507752
> 
> 赞同：1
> 
> 时间：2012-11-22T07:31:01.667
> 
> 标签：java, jsf, primefaces

这是我的托管 Bean 类，

```
public class ChartBean implements Serializable {

    private PieChartModel pieModel;

    public ChartBean(){
        createPieModel(); 
    }

    public PieChartModel getPieModel() {  
        return pieModel;  
    }  

    private void createPieModel(){  
        try {
            pieModel = new PieChartModel();  

            String query = "SELECT b.countryname,count(b.countryname) FROM info.summery a,info.countrymcc b;";
            Connector conn = new Connector();
            Statement str = (Statement) conn.getConn().createStatement();
            ResultSet res = str.executeQuery(query);

            while(res.next()){

                  pieModel.set(res.getString(1), Integer.parseInt(res.getString(2)));
            }
        } catch (SQLException ex) {
            Logger.getLogger(ChartBean.class.getName()).log(Level.SEVERE, null, ex);
        }
    } 
} 
```

但问题是，当它被编译时，它会给出这样的错误“无法实例化类：org.primefaces.examples.view.ChartBean”。是什么原因？？

堆栈跟踪：

```
Caused by: java.lang.NullPointerException at  

org.primefaces.examples.view.ChartBean.createPieModel(ChartBean.java:45) at     
org.primefaces.examples.view.ChartBean.<init>(ChartBean.java:32) at     
sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at     
sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorI‌​    
mpl.java:39) at     
sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorA‌​    
ccessorImpl.java:27) at java.lang.reflect.Constructor.newInstance(Constructor.java:513) at    
java.lang.Class.newInstance0(Class.java:355) at java.lang.Class 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:11:48.087

通过消除过程，问题正在发生，因为`conn.getConn()`正在返回`null`。您应该能够简单地确认异常发生在该行（通过检查行号！），并且我们知道 that `conn`cannot be `null`，所以它必须是`getConn()`that is的结果`null`。

在不知道`Connector`类是什么以及它的`getConn()`方法是如何工作的情况下，这就是我所能做到的。

* * *

作为记录，这是我消除其他可能性的方法。

NPE 在调用中被抛出`createPieModel`......而不是在某些方法中调用 from `createPieModel`：

```
1\. private void createPieModel(){  
2\.     try {
3\.         pieModel = new PieChartModel();  
4\.         String query = "SELECT b.countryname,count(b.countryname) FROM info.summery a,info.countrymcc b;";
5\.         Connector conn = new Connector();
6\.         Statement str = (Statement) conn.getConn().createStatement();
7\.         ResultSet res = str.executeQuery(query);
8\.         while(res.next()){
9\.             pieModel.set(res.getString(1), Integer.parseInt(res.getString(2)));
10\.        }
11\.    } catch (SQLException ex) {
12\.        Logger.getLogger(ChartBean.class.getName()).log(Level.SEVERE, null, ex);
13\.    }
14\. } 
```

*   它不能是第 3 行，因为任何 NPE 都会在构造函数中抛出。
*   不能是第 4 行
*   它不能是第 5 行 - 见第 3 行
*   *可能*是第 6 行
*   它不能是第 7 行 - 因为`str`必须是非空的（如果我们走到那一步）
*   它不能是第 8 行 - 因为`executeQuery`永远不会返回`null`
*   它不能是第 9 行 - 因为`res`and`pieModel`必须是非空的。
*   它不能是第 12 行 - 因为那里没有任何东西可以返回 a `null`。

因此它*只能*发生在第 6 行。

# navigation - 我的水平导航栏有问题

> ID：13507753
> 
> 赞同：2
> 
> 时间：2012-11-22T07:31:05.330
> 
> 标签：navigation

我有一个标题和我的页面的正文。正文宽度为 1200 像素，有 3 列。左栏为 20%，中栏为 55%，右栏为 25%。页面标题为页面宽度的 100%，位置：绝对，顶部：0px；并留下0px；

我希望导航栏与正文的中间列对齐，但我遇到了问题。导航栏的左边缘应该在中间体列左边缘的正上方，右边缘也是如此。要么我的数学有问题，要么我的设置错误。

我希望很清楚我想要什么。这是我的网站：http: [//darkonyx.webatu.com/](http://darkonyx.webatu.com/)

这是我的html代码：

```
<div id="headerwrapper">
<div id="navbar">
    <ul id="nav">
        <li><a href="">Home</a></li>
        <li><a href="/roster/roster.html">Roster</a></li>
        <li><a href="/about/about.html">About</a></li>
        <li><a href="/faq/faq.html">FAQs</a></li>
        <li><a href="/contact/contact.html">Contact</a></li>
    </ul>
</div> 
```

使用相关的 CSS 样式：

```
#headerwrapper {
position:absolute;
top:0px;
left:0px;
z-index:999;
width:100%;
overflow:hidden;
height:120px;
background:url(img/headerBG.jpg);
-moz-box-shadow: 0px 6px 20px #000;
-webkit-box-shadow: 0px 6px 20px #000;
box-shadow: 0px 6px 20px #000;
/* For IE 8 */
-ms-filter: "progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color='#000000')";
/* For IE 5.5 - 7 */
filter: progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=180, Color='#000000');
#navbar{
position:absolute;
top:85px;
left:50%;
width:1200;
margin-left:-600;}
#nav {
width: 100%;
float: left;
padding: 0;
list-style: none;
background-color: #222;}
#nav li {
width:20%;
float: left;}
#nav li a {
display: block;
padding: 8px 15px;
text-decoration: none;
font-weight: bold;
color: #666;
border-right: 1px solid #777;
border-top: 1px solid #777;
border-left: 1px solid #777; }
#nav li a:hover {
color: #000;
background-color: #555;} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:38:15.237

如果您在一个类中有一个 position: absolute ，它的父级应该有一个 position: relative ，以便该子 div 在定位时能够正常工作。

所以

> ```
> 1\. Give your #headerwrapper** a position:relative
> 2\. Remove top: 100px from #bodycontainer
> 3\. Put #navbar into another div, giving this div a margin:0 auto (to be centered) and the same width as the middle body column
> 4\. Remove left % from #navbar and remove any position absolutes within it 
> ```

跟着它，你会很高兴的！！

编辑：继承人的代码

```
<div style="
width: 950px;
margin: 0 auto;
height: 115px;
overflow: hidden;">

<div id="navbar">
<ul id="nav">
<li><a href="">Home</a></li>
<li><a href="/roster/roster.html">Roster</a></li>
<li><a href="/about/about.html">About</a></li>
<li><a href="/faq/faq.html">FAQs</a></li>
<li><a href="/contact/contact.html">Contact</a></li>
</ul>
</div>
</div> 
```

这是用于快速复制粘贴的整个样式表 CSS（先备份你的！）： http: [//pastebin.com/w5UC8ELF](http://pastebin.com/w5UC8ELF)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:19:36.113

您需要将以下选项添加到 headerwrapper：

```
left:50%;
margin-left:-600px; 
```

并将宽度更改为 1200px

[https://dl.dropbox.com/u/62849616/Stackoverflow/hor-nav-bar.png](https://dl.dropbox.com/u/62849616/Stackoverflow/hor-nav-bar.png)

如果将内部 div 的宽度更改为 100%，它将如下所示：

[https://dl.dropbox.com/u/62849616/Stackoverflow/hor-nav-bar2.png](https://dl.dropbox.com/u/62849616/Stackoverflow/hor-nav-bar2.png)

# c# - 在 Windows 中获取系统时间更改？

> ID：13507755
> 
> 赞同：0
> 
> 时间：2012-11-22T07:31:11.490
> 
> 标签：c#, .net, vb.net, cmd, event-log

> **可能重复：**
> [如何将我的产品作为试用版 30 天？](https://stackoverflow.com/questions/1525378/how-can-i-make-my-product-as-a-trial-version-for-30-days)
> [实施 30 天的时间试用](https://stackoverflow.com/questions/2021088/implementing-a-30-day-time-trial)

我正在编写一个试用应用程序，它有 30 天的试用期，

为了为用户保留 30 天，我需要检查系统时间的变化，

例如，如果用户在系统日期和时间中添加两天，它不会损害试用期，并且通过从 DateTime.now 中减去时间变化，它将保持 30 天

我通过阅读事件日志找到了一种方法，但我需要管理权限才能这样做，这并不总是可用的。

有没有办法在不需要管理权限的情况下获取此类信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:07:46.677

Instead of looking for the change in the system time, you could use a database that logs the date of the first day, and calculate the 30 time span after the first day.

So when the user opens the application for the first time, you will have to query your database to add the date of today(first time opening's date) and 30 days after today(first time opening's date)

To acquire the date of today and 30 days after, use the DateTime.Now function.

```
 string Today = DateTime.Now.Day + " - " + DateTime.Now.Month + " - " + DateTime.Now.Year;
        string End = DateTime.Now.AddDays(30).Day + " - " + DateTime.Now.AddDays(30).Month + " - " + DateTime.Now.AddDays(30).Year; 
```

The downside to the above method is that if the user starts his application at say, year 2070\. Then his application will not expire until year 2070.

So it is best if you get the date from an online source [http://www.thetimenow.com/](http://www.thetimenow.com/) instead of getting the date from the user's computer.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-22T08:12:06.963

您可以通过保存剩余天数、安装`datetime`和最后检查来尝试`datetime`。确保两者都在安装时设置。

当用户启动程序时

```
if (lastCheck > DateTime.Now)
    {
         lastCheck = DateTime.Now;
    }
else
    {
         remainingDays = (DateTime.Now - lastCheck).TottalDays;
    } 
```

如果没有进一步的修改，这将阻止用户修改日期，因为这会减少他设置日期时的剩余时间。你可以用更多的代码来避免这种情况。我认为它相当简单而有效。

**编辑：**我可能误解了这个问题。

如果没有代码过度杀伤，我看不出有任何方法可以做到这一点。最重要的是保护您的应用程序不被破解/利用。如果用户想玩日期，那是他们的损失。

如果由于应用程序的性质这是可以预料的，那么它应该在应用程序完成之前处理。

# android - 异步调用后 ListView 不更新

> ID：13507758
> 
> 赞同：1
> 
> 时间：2012-11-22T07:31:36.153
> 
> 标签：android

我的`ListView`. 这是场景：

我正在使用 MVP 设计模式。在`Activity`开始时，它会引发一个事件来通知演示者从 Web 服务中获取一些数据。Web 服务调用是异步调用。一旦`Completed`引发 Web 服务事件，我将结果推送到我的`View`/中的一个属性（数组类型）中`Activity`。

我提到的一切都很好，**但是**一旦设备旋转，就会发生一些有趣的发展。

异步调用正常恢复并为属性 (Array) 提供一个值。所以那里没有错......（是的，集合中有数据）然后我设置`ListView Adapter`并调用了`notifyDataSetChanged`，但没有任何反应。用户界面没有更新还是什么？如果我重新输入`Activity`数据再次可见？？

我什至尝试打电话`invalidateViews`给`invalidate`-`ListView`这没有做任何事情。

有人可以在这件事上帮助我吗？提前谢谢了！

[更新]

我想强调一个事实，即我使用的是 C# (Xamarin) 而不是 Java (:sigh: - 是的，我知道)。此外，我没有使用`ASyncTask`该类，而是使用在 Visual Studio 生成的代理类中创建的异步方法。非常简单，但这是填充的代码`ListView`- 属性是从演示者设置的

**主持人**

*View 的类型为 IContactsView*

```
 protected override void OnCollectData(System.Collections.IEnumerable data, Type typeOfData)
    {
        if (data != null && typeOfData != null && typeOfData.Equals(typeof(UserContact)))
        {
            this.View.UserInformationCollection = data.Cast<UserContact>().ToArray();
        }
    } 
```

**活动**

*该活动实现了 IContactsView*

```
 public UserContact[] UserInformationCollection
    {
        get
        {
            return this._userInformationCollection;
        }
        set 
        {
            this.RunOnUiThread(() =>
                {
                    this._userInformationCollection = value;                        
                    ListView listview = this.FindViewById<ListView>(Resource.Id.userLV);
                    if (listview != null)
                    {                           
                        UserContact[] subsidiesList = this.GetIndexedContacts(this._userInformationCollection);
                        listview.Adapter = new ContactsAdapter(this, subsidiesList.ToList());
                        ((ContactsAdapter)listview.Adapter).NotifyDataSetChanged();
                    }
                });
        }
    } 
```

[/更新]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-23T07:21:22.070

找到了更好的解决方案！所以请忽略这个`static variable`想法！

**活动：**

覆盖`OnRetainNonConfigurationInstance`并返回演示者

```
 public override Java.Lang.Object OnRetainNonConfigurationInstance()
    {
        return this._presenter;
    } 
```

在`OnCreate`检查中`LastNonConfigurationInstance`并获取演示者 - 如果它不为空：

```
 protected override void OnCreate(Bundle bundle)
    {
        ...
        if (this.LastNonConfigurationInstance != null)
        {
            this._presenter = this.LastNonConfigurationInstance as ContactsPresenter;
            this._presenter.RefreshView(this);
        }
        else
        {
            // create a new presenter
            this._presenter = new ContactsPresenter(this);
        }
        ...
    } 
```

所以也许，你看到我在前面的代码示例中做了什么？是的，我将活动的新实例发送给演示者 - 看看`RefreshView`

**主持人：**

所以在我的基础演示者中，我有以下方法：

```
public class Presenter<T> : Java.Lang.Object, IPresenter where T : IView
{
    /// <param name="view">The view.</param>
    public void RefreshView(T view)
    {
        this.View = view;
    }
} 
```

上面的代码帮助我的演示者说创建新活动 - 所以当它在异步调用后返回数据时，它将拥有最新和最好的活动实例！

希望这可以帮助！亲切的问候，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T11:23:47.230

通过执行以下操作使其工作：

声明活动的静态变量：

```
 private static ContactsActivity _cachedActivity = null; 
```

覆盖`OnResume`活动内部并设置变量：

```
 protected override void OnResume()
    {
        base.OnResume();
        _cachedActivity = this;
    } 
```

覆盖`OnCreate`活动内并设置变量：

```
 protected override void OnCreate(Bundle bundle)
    {
        ...
        _cachedActivity = this;
        ...
    } 
```

最后我更改了前面提到的属性：

```
 public USBUserContact[] UserInformationCollection
    {
        get
        {
            return this._userInformationCollection;
        }
        set
        {
            _cachedActivity.RunOnUiThread(() =>
                {
                    _cachedActivity._userInformationCollection = value;
                    ListView listview = _cachedActivity.FindViewById<ListView>(Resource.Id.userLV);
                    if (listview != null)
                    {
                        UserContact[] subsidiesList = _cachedActivity.GetIndexedContacts(_cachedActivity._userInformationCollection);
                        listview.Adapter = new ContactsAdapter(_cachedActivity, subsidiesList.ToList());
                        ((ContactsAdapter)listview.Adapter).NotifyDataSetChanged();
                    }
                });
        }
    } 
```

亲切的问候，

# jquery - 主干从 UL 异常中添加删除

> ID：13507760
> 
> 赞同：0
> 
> 时间：2012-11-22T07:31:42.133
> 
> 标签：jquery, backbone.js

我正在开发一个简单的应用程序来添加和删除 ul 中的名称。我有一个输入和一个按钮，当我单击按钮时，输入中的文本会附加到 ul。我的代码是：

```
<input type="text" placeholder="Enter friend's name" id="input" />
<button id="add-input">Add Friend</button>

<ul id="friends-list">
</ul> 
```

骨干代码：

```
<script>
    $(function() {

        FriendList = Backbone.Collection.extend({
            initialize: function(){

                this.bind("add", function( model,options ){
                    var id = ( model.collection.indexOf(model) );
                    view.render(model,id);
                });
                this.bind("remove",function(model){
                    alert("here");
                });

            }
        });

        FriendView = Backbone.View.extend({

            tagName: 'li',

            events: {
                'click #add-input':  'getFriend',
                'click .button': 'removeFriend'
            },

            initialize: function() {
                this.friendslist = new FriendList;
                _.bindAll(this, 'render');
            },

            getFriend: function() {
                var friend_name = $('#input').val();
                this.friendslist.add( {name: friend_name} );

            },

            removeFriend: function(){
                var friend_index = $('.button').attr('id');
                alert(friend_index);

                this.friendslist.remove();
            },

            render: function( model,id ) {
                $("#friends-list").append("<li>"+ model.get("name")+"<button class=button id="+id+">"+"delete"+"</button>"+"</li>");

                $('#input').val('');

            }

        });

        var view = new FriendView({el: 'body'});
    });
</script> 
```

我的问题，我卡在哪里：

i) 添加功能运行良好，当我单击删除按钮时，它会转到 removeFriend 功能，但不会转到集合和警报（“此处”）；ii) 请帮我写代码来删除/删除点击删除按钮的 li

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:29:50.277

Backbone 入门令人困惑。我从假设它可以做的比默认情况下更多的假设开始。相反，它是一个构建块（参见骨干木偶和类似项目）。考虑到这些事情，我对您的代码进行了一些重构：

1.  `FriendView`有太多的知识：它不应该知道将自己插入 DOM 的位置。
2.  对 Backbone 如何处理渲染集合进行了一些假设。Backbone 不实现集合渲染，因此由您决定。最简单的方法是渲染集合中的每个项目并将它们附加到 DOM。所以当一个项目被移除时，整个集合会再次被渲染。听起来很糟糕，对吧？在实践中，这可能无关紧要。您可以实现更复杂的渲染方法，但我的建议是从基础开始并从那里开始工作。
3.  DOM 应该反映 Backbone 的状态（集合、模型）——您应该尽可能避免直接操作 DOM，并允许 Backbone 状态更改/事件直接更新 DOM。您可以在删除朋友的过程中看到这一点：从集合中删除朋友，这会触发集合`remove`上的事件，该事件绑定到渲染`FriendListView`.

那么如何修复你的代码呢？这就是我所做的：http: [//jsfiddle.net/Gd2Rs/](http://jsfiddle.net/Gd2Rs/)

```
$(function() {

    FriendList = Backbone.Collection.extend();

    FriendListView = Backbone.View.extend({
        initialize: function(e, c) {
            this.collection.bind('add', this.render, this);
            this.collection.bind('remove', this.render, this);
        },

        events: {
            'click #add-input':  'addFriend'
        },

        addFriend: function() {
            var friend_name = $('#input').val();
            $('#input').val('');
            this.collection.add({name: friend_name});
        },

        render: function() {
            var list = this.el.find('#friends-list');
            list.empty();
            this.collection.each(function(model) {
                var friendView = new FriendView({model: model});
                list.append(friendView.render().el);
            });
        }
    });

    FriendView = Backbone.View.extend({

        tagName: 'li',

        events: {
            'click .button': 'removeFriend'
        },

        removeFriend: function(){
            this.model.collection.remove(this.model);
        },

        render: function() {
            $(this.el).html(this.model.get('name') + "<button class='button'>"+"delete"+"</button>");
            return this;
        }
    });

    var view = new FriendListView({
        el: $('#friends'),
        collection: new FriendList()
    });
});​ 
```

请注意，我故意避免优化`FriendListView.render`，因为我认为使用 Backbone 是错误的方式。您将需要构建自己的集合渲染，您应该重复使用或使用骨干木偶之类的东西。使用 Backbone 的样板代码直接变得令人厌烦。

# iphone - NSURL 和 NSString 转换问题

> ID：13507761
> 
> 赞同：-4
> 
> 时间：2012-11-22T07:31:45.363
> 
> 标签：iphone, objective-c, ios, nsstring, nsurl

尝试加载请求时，我这样做：

```
NSString *urlStrings = [NSLocalizedStringFromTable(@"kPicturesURL", @"urls", nil) stringByAppendingPathComponent:@"Articles/a.pdf"];
NSURL *url = [NSURL URLWithString:urlStrings]; 
```

在“urls”里面我有这个键：

```
/* Service pictures directory */
"kPicturesURL" = "http://192.168.2.104/myApp/Pictures"; 
```

我得到了这个结果：（第一行是“urlStrings”，第二行是“url”）

```
(NSString *) $6 = 0x092a8f60 http:/192.168.2.104/myApp/Pictures/Articles/a.pdf
2012-11-22 09:18:20.093 NPE[7680:c07] Couldn't issue file extension for path: /192.168.2.104/myApp/Pictures/Articles/a.pdf 
```

我试过这些问题：

[NSString 和 NSUrl 没有正确转换](https://stackoverflow.com/questions/3408551/nsstring-and-nsurl-not-converting-properly)

[NSURL 没有被 NSString 分配](https://stackoverflow.com/questions/3203842/nsurl-not-getting-allocatd-with-nsstring)

[将 NSString 传递给 NSURL URLWithString ？](http://iphonedevsdk.com/forum/iphone-sdk-development/19174-pass-nsstring-into-nsurl-urlwithstring.html)

[NSString 到 NSURL ？](https://stackoverflow.com/questions/8117066/nsstring-to-nsurl)

[NSString 到 NSURL](https://stackoverflow.com/questions/6456605/nsstring-to-nsurl)

这些都不起作用，似乎是什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:33:10.097

也许而不是：

```
http:/192.168.2.104/myApp/Pictures/Articles/a.pdf 
```

这个：

```
http://192.168.2.104/myApp/Pictures/Articles/a.pdf 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-01T08:29:13.350

因此，使用以下方法之一最终确实奏效了。

这个：

```
NSString *stringURL = [url absoluteString]; 
```

# git - 每次通过 git 更新可用的包时，是否需要发布到 npm？

> ID：13507763
> 
> 赞同：44
> 
> 时间：2012-11-22T07:31:56.403
> 
> 标签：git, publish, npm

假设我拥有一个令人难以置信的`crab-season`包裹。我已经`npm publish`编辑了 0.1.0 版，其中`package.json`包含：

```
"repository": {
  "type": "git",
  "url": "https://github.com/example/crab-season.git"
} 
```

当我添加很棒的新功能，将版本升级到 0.2.0，然后推送到 github 时，npmjs 注册表会通知我的新版本，还是我`npm publish`每次都需要？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-10-11T23:34:58.020

Travis CI 可以在您推送版本标签时发布到 npm，以减少发布更改的开销。在您的使用中启用`.travis.yml`：

```
deploy: 
  provider: npm
  api_key: "YOUR API KEY"
  on:
    - tags: true 
```

查看[travis 文档](http://about.travis-ci.org/docs/user/deployment/npm/)了解详细信息。[这篇文章](http://mclear.co.uk/2013/10/06/publishing-to-npm-on-git-commit-using-github-hooks-and-travis/)中还有一个分步指南。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2013-03-11T00:04:42.660

发布了几个模块后，答案是肯定的，你需要`npm publish`在 npmjs 上获取新版本。

这使模块作者可以灵活地在他们开始下一个版本的工作时或在版本完成之前的任何时间增加他们的版本号。

[`npm version`](https://docs.npmjs.com/cli/version)`package.json`通过检测 git 存储库、将版本插入 、提交更改并使用版本号标记更改，可以轻松加快此流程。

# python - 如何从另一个模块获取对象？

> ID：13507764
> 
> 赞同：0
> 
> 时间：2012-11-22T07:31:56.183
> 
> 标签：python

py

```
# logging object
logger = ""

def log():
        """
        a log handle
        """
        global logger, doc_log

        import logging.handlers
        logger = logging.getLogger("autons_log")
        logger.setLevel(logging.DEBUG)

        MAX_SIZE = 800 * 1024 * 1024
        LOG_PATH = doc_log + "/autons_log.log"
        fh = logging.handlers.RotatingFileHandler(LOG_PATH, maxBytes=MAX_SIZE, backupCount=8)

        formatter = logging.Formatter('%(asctime)s - %(name)s - %(levelname)s - %(message)s')
        fh.setFormatter(formatter)

        logger.addHandler(fh)

def get_log():
        """
        get the object of logger
        """
        global logger
        return logger 
```

和 B.py

```
def hello():
        """
        """
        import autons_nc
        print autons_nc.get_log()
        print type(autons_nc.get_log())
        autons_nc.get_log().debug('hello') 
```

我想在B.py中使用logger的对象，但是这种方式行不通。get_log() 的类型是“type 'str'”而不是“class 'logging.Logger'”。

那么，另一种方法可以解决吗？谢谢

顺便说一句，autons_nc.py 是 A.py

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:37:16.140

您初始化`logger`为一个字符串：

```
logger = "" 
```

这被更改`log()`为引用`logging.Logger`. `log()`在检查类型之前，您不会说您实际上是在打电话`logger`——是吗？

# python - 使用三元搜索查找范围内的所有元素？

> ID：13507766
> 
> 赞同：1
> 
> 时间：2012-11-22T07:32:16.050
> 
> 标签：python, algorithm, search

我正在寻找平均案例性能为 O(log(N)) 的算法，以从排序列表中提取介于（或等于）最小值和最大值之间的元素。

问题在于，由于最小值和最大值实际上可能不在列表中，或者甚至可能重复，因此二进制搜索不会执行。三元搜索似乎更接近我所寻求的，但到目前为止，我还无法创建一个函数来执行我所看到的基于三元搜索的功能。

例如，输入：

```
list=[1,2,3,4,5,6,7], min=3, max=6 
```

应该返回 [3,4,5,6]。同样地，

```
list=[500,757,2412,10000,123123], min = 600, max = 5000 
```

应该返回 [757,2412]。

这也可以在 python 中使用以下方式完成，效率较低：

```
def withinRange(values,min,max):
   return [val for val in sorted(values) if val <= max and val >= min] 
```

该操作被调用得足够多，因此非常喜欢 O(log(N))，并且排序只会进行一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:42:13.997

这似乎有效：

```
>>> import bisect
>>> def bin_slice(L, min, max):
...     i = bisect.bisect_left(L, min)
...     j = bisect.bisect(L, max)
...     return L[i:j]
... 
>>> bin_slice([1,2,3,4,5,6,7,8,9], 3, 6)
[3, 4, 5, 6]
>>> bin_slice([500,757,2412,10000,123123], 600, 5000)
[757, 2412] 
```

复杂度类似于 2log(N)，即 O(log(N))。另请注意，`bisect`可能使用 C 实现，`bisect`这将比您在纯 Python 中编写的任何内容都快，因此即使进行较少的比较，纯 Python 解决方案也可能会更慢。

您可以稍微优化将参数`j`传递给的搜索：`lo``bisect`

```
j = bisect.bisect(L, max, i) 
```

# android-webview - 对话框中的 WebView 在 android 中启用插件时出现异常

> ID：13507767
> 
> 赞同：0
> 
> 时间：2012-11-22T07:32:27.437
> 
> 标签：android-webview

我已经按照下面链接中给出的示例程序将 WebView 放置在 Dialog 中。 [http://www.41post.com/4673/programming/android-creating-a-webview-dialog](http://www.41post.com/4673/programming/android-creating-a-webview-dialog)

应用程序运行良好。但是如果我启用插件 (setPlauginsEnabled(true)); 应用程序给出异常。问题仅存在于具有 Flash 内容的网站。

以下是部分代码，*

```
 webView.getSettings().setPluginsEnabled(true);
        //Set the user agent
        webView.getSettings().setUserAgentString("AndroidWebView");
        //Clear the cache
        webView.clearCache(true);
        //Make the webview load the specified URL
        webView.loadUrl("http://www.coca-cola.com/en/index.html"); 
```

*

下面是代码跟踪，

```
E/AndroidRuntime( 1868): FATAL EXCEPTION: main
E/AndroidRuntime( 1868): java.lang.ClassCastException: android.view.ContextThemeWrapper cannot be cast to android.app.Activity
E/AndroidRuntime( 1868):        at com.adobe.flashplayer.FlashPaintSurface.getBrowserActivity(FlashPaintSurface.java:650)
E/AndroidRuntime( 1868):        at com.adobe.flashplayer.FlashPaintSurface$2.surfaceCreated(FlashPaintSurface.java:208)
E/AndroidRuntime( 1868):        at android.view.SurfaceView.updateWindow(SurfaceView.java:533)
E/AndroidRuntime( 1868):        at android.view.SurfaceView.access$000(SurfaceView.java:81)
E/AndroidRuntime( 1868):        at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:169)
E/AndroidRuntime( 1868):        at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:590)
E/AndroidRuntime( 1868):        at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1617)
E/AndroidRuntime( 1868):        at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2446)
E/AndroidRuntime( 1868):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime( 1868):        at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime( 1868):        at android.app.ActivityThread.main(ActivityThread.java:4424)
E/AndroidRuntime( 1868):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime( 1868):        at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime( 1868):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
E/AndroidRuntime( 1868):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
E/AndroidRuntime( 1868):        at dalvik.system.NativeStart.main(Native Method)
W/ActivityManager( 1117):   Force finishing activity fortyonepost.com.webviewdialog/.WebViewDialogActivity 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:43:28.503

问题解决了;

在 WebViewDialog.xml 中创建 FrameLayout 并将 WebView 添加到 FrameLayout。

```
webView = new WebView(this);
wrapper = (FrameLayout)webViewDialog.findViewById(R.id.webview_wrapper);
wrapper.addView(webView); 
```

如果 WebView 附加到 WebView 布局，flash 插件会产生问题。

# android - 我有两个按钮：“btn1，btn2”，当我更改 btn1 alpha 的背景时，btn2 会随机变化

> ID：13507768
> 
> 赞同：3
> 
> 时间：2012-11-22T07:32:31.167
> 
> 标签：android

我有两个按钮：`btn1`, `btn2`。它们与相同的背景图像一起使用：`pic1.png`. 当我更改第一个按钮的背景时：`btn1`在`OnTouch`事件中，代码如下

```
onTouch_Action(View v, MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        TextView tv = (TextView) v;
        int color = tv.getCurrentTextColor();
        int r = (color) & 0xFF;
        int g = (color >> 8) & 0xFF;
        int b = (color >> 16) & 0xFF;
        int a = (color >> 24) & 0xFF;
        tv.setTextColor(Color.argb(50, r, g, b)); //The other uses the same         background image buttons may also change
    } else if (event.getAction() == MotionEvent.ACTION_UP) {
        int color = tv.getCurrentTextColor();
        int r = (color) & 0xFF;
        int g = (color >> 8) & 0xFF;
        int b = (color >> 16) & 0xFF;
        int a = (color >> 24) & 0xFF;
        tv.setTextColor(Color.argb(255, r, g, b)); //The other uses the same         background image buttons may also change

    }
} 
```

第二个按钮：`btn2`，背景也可以改变，改变是随机的。如何避免第二个按钮变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:37:44.503

将 onTouchEvent 的代码更改为

```
int color = button1.getCurrentTextColor();
int r = (color) & 0xFF;
int g = (color >> 8) & 0xFF;
int b = (color >> 16) & 0xFF;
int a = (color >> 24) & 0xFF;
button1.setTextColor(Color.argb(DOWN_Alpha, r, g, b)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:36:23.730

以上，有些人误解了我的问题，现在我贴出所有代码

```
onTouch_Action(View v, MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        TextView tv = (TextView) v;
        int color = tv.getCurrentTextColor();
        int r = (color) & 0xFF;
        int g = (color >> 8) & 0xFF;
        int b = (color >> 16) & 0xFF;
        int a = (color >> 24) & 0xFF;
        tv.setTextColor(Color.argb(50, r, g, b)); //The other uses the same         background image buttons may also change
    } else if (event.getAction() == MotionEvent.ACTION_UP) {
        int color = tv.getCurrentTextColor();
        int r = (color) & 0xFF;
        int g = (color >> 8) & 0xFF;
        int b = (color >> 16) & 0xFF;
        int a = (color >> 24) & 0xFF;
        tv.setTextColor(Color.argb(255, r, g, b)); //The other uses the same         background image buttons may also change

    }
} 
```

# asp.net-web-api - 为什么 WebAPI 不使用我的 JSONP 格式化程序来反序列化模型？

> ID：13507769
> 
> 赞同：1
> 
> 时间：2012-11-22T07:32:31.877
> 
> 标签：asp.net-web-api, jsonp, deserialization, formatter

我对微软全新的框架 ASP.NET MVC WebAPI 感到非常困惑。我尝试使用 JSONP 数据为跨站点 API 创建完整的解决方案。

首先，我将它们的默认 WebApiConfig 修改为以下代码。

```
public static class WebApiConfig
{
    public static void Register(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute("DefaultApi", "api/{controller}/{action}/{id}", new {id = RouteParameter.Optional});

        // Custom customization
        config.Formatters.Clear();
        config.Formatters.Add(new JsonpFormatter());
    }
} 
```

我使用 jQuery 创建对这个 API 网站的请求。

```
// jQuery will create HTTP GET the following URL
// http://localhost:3557/api/FlightAvailability/SearchFlight?callback=jQuery18206342989655677229_1353568617029&origin=JFK&destination=SLC&isOneWayFlight=false&departFlightDate=Wed%2C+28+Nov+2012+17%3A00%3A00+GMT&returnFlightDate=Wed%2C+05+Dec+2012+17%3A00%3A00+GMT&numberOfGuests=1&numberOfChildren=1&numberOfInfants=1&preferredCurrency=USD&query=%7B+Origin%3A+'JFK'+%7D&flightDate=Wed%2C+28+Nov+2012+17%3A00%3A00+GMT&_=1353568618465

$.ajax
({
    url: 'http://localhost:3557/api/FlightAvailability/SearchFlight',
    dataType: 'jsonp',
    data: $.postify(model),
    success: processResponse
}); 
```

我创建了处理上述请求的操作。一切都是正确的。我可以调用此操作，但 WebAPI 不使用我的 JSONP 格式化程序来反序列化我的查询对象。

但是，我尝试直接调用 ContentNegotiator 来获取处理我的请求的格式化程序。令人惊讶的是，negotiatorResult 是我的 JSONP 格式化程序。

```
[HttpGet]
public List<FlightInfo> SearchFlight(FlightAvailabilityQuery query)
{
    var negotiator = Configuration.Services.GetContentNegotiator();
    var negotiatorResult = negotiator.Negotiate(typeof (FlightAvailabilityQuery), Request, Configuration.Formatters);

    var flight = new FlightsAvailability();

    var result = flight.GetAvailability(WebApiAuthentication.UserInfo.SessionService, query);

    return result;
} 
```

为什么 WebAPI 不使用我的 JSONP 格式化程序来反序列化查询 FlightAvailabilityQuery 对象？

![在此处输入图像描述](../Images/3988c240b94dddbf1457e5d063b32f21.png)

PS。我尝试打破 JSONP 格式化程序中所有可能的行，但 Visual Studio 没有通过它直接进入操作方法而没有达到任何断点，而无需调用我唯一的一个格式化程序。但是，当我直接调用 ContentNegotiator 时，它正确地击中了我的断点。

![在此处输入图像描述](../Images/8832bab5c44a1b95a583686d2f0dcd52.png)

**更新 #1 - 添加 JSONP 格式化程序源代码**

```
public class JsonpFormatter : JsonMediaTypeFormatter
{
    private readonly JsonSerializerSettings _serializerSettings;
    private string _jsonpCallbackFunction;

    public JsonpFormatter()
    {
        JsonpParameterName = "callback";
        _serializerSettings = new JsonSerializerSettings();
        _serializerSettings.TypeNameHandling = TypeNameHandling.Objects;
        _serializerSettings.Converters.Add(new IsoDateTimeConverter());

        MediaTypeMappings.Add(new ExtendedQueryStringMapping(JsonpParameterName, "application/json"));
    }

    public string JsonpParameterName { get; set; }

    public override bool CanReadType(Type type)
    {
        return true;
    }

    public override bool CanWriteType(Type type)
    {
        return true;
    }

    public override MediaTypeFormatter GetPerRequestFormatterInstance(Type type, HttpRequestMessage request, MediaTypeHeaderValue mediaType)
    {
        var formatter = new JsonpFormatter()
        {
            _jsonpCallbackFunction = GetJsonCallbackFunction(request)
        };

        // this doesn't work unfortunately
        //formatter.SerializerSettings = GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings;

        formatter.SerializerSettings.Converters.Add(new StringEnumConverter());
        formatter.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver();
        formatter.SerializerSettings.Formatting = Newtonsoft.Json.Formatting.Indented;

        return formatter;
    }

    public override Task<object> ReadFromStreamAsync(Type type, Stream stream, HttpContent content, IFormatterLogger formatterLogger)
    {
        // Create a serializer
        var serializer = JsonSerializer.Create(_serializerSettings);

        // Create task reading the content
        return Task.Factory.StartNew(() =>
        {
            using (var streamReader = new StreamReader(stream, Encoding.UTF8))
            {
                using (var jsonTextReader = new JsonTextReader(streamReader))
                {
                    return serializer.Deserialize(jsonTextReader, type);
                }
            }
        });
    }

    public override Task WriteToStreamAsync(Type type, object value, Stream stream, HttpContent content, TransportContext transportContext)
    {
        if (string.IsNullOrEmpty(_jsonpCallbackFunction))
            return base.WriteToStreamAsync(type, value, stream, content, transportContext);

        StreamWriter writer = null;

        // write the pre-amble
        try
        {
            writer = new StreamWriter(stream);
            writer.Write(_jsonpCallbackFunction + "(");
            writer.Flush();
        }
        catch (Exception ex)
        {
            try
            {
                if (writer != null)
                    writer.Dispose();
            }
            catch { }

            var tcs = new TaskCompletionSource<object>();
            tcs.SetException(ex);
            return tcs.Task;
        }

        return base.WriteToStreamAsync(type, value, stream, content, transportContext)
                   .ContinueWith(innerTask =>
                        {
                            if (innerTask.Status == TaskStatus.RanToCompletion)
                            {
                                writer.Write(")");
                                writer.Flush();
                            }

                        }, TaskContinuationOptions.ExecuteSynchronously)
                    .ContinueWith(innerTask =>
                        {
                            writer.Dispose();
                            return innerTask;

                        }, TaskContinuationOptions.ExecuteSynchronously)
                    .Unwrap();
    }

    private string GetJsonCallbackFunction(HttpRequestMessage request)
    {
        if (request.Method != HttpMethod.Get)
            return null;

        var query = HttpUtility.ParseQueryString(request.RequestUri.Query);
        var queryVal = query[this.JsonpParameterName];

        if (string.IsNullOrEmpty(queryVal))
            return null;

        return queryVal;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T06:32:44.070

您的操作不会受到打击，因为它无法对您的查询参数进行模型绑定。也`JsonP`仅适用于 HTTP GET，因此不会选择您的格式化程序进行反序列化。您如何期望您的*FlightAvailabilityQuery*被*反序列*化？*我从你的URL*中看到了很多查询参数，你想把它变成*FlightAvailabilityQuery*吗？

最简单的方法是使用 FromUri。

`public List<FlightInfo> SearchFlight([FromUri]FlightAvailabilityQuery query)`

如果由于某种原因不起作用，您可以尝试在操作上添加单独的查询参数名称，例如*origin、isOneWay、destination。*等等。然后在您的操作中构造 FlightAvailabilityQuery 对象。此外，如果您有很多想要重用此模型绑定逻辑的操作，您可以注册一个自定义参数绑定来解决这个问题。请参阅[此链接](http://blogs.msdn.com/b/hongmeig1/archive/2012/09/28/how-to-customize-parameter-binding.aspx)了解如何注册自定义参数绑定来解决此问题。

希望这可以帮助！

# reporting-services - SSRS 打印视图布局条码大小问题 IDAutomationcode39 字体

> ID：13507773
> 
> 赞同：2
> 
> 时间：2012-11-22T07:32:50.777
> 
> 标签：reporting-services, barcode, bids, ssrs-2008-r2

我继承了一份 ssrs 报告，它打印标签以贴在贴纸页上。即每页 10 个贴纸。我有一个问题，条形码（IDAutomation 代码 39 字体）在打印视图模式和打印时显示不正确。条码变形时无法扫描。当在投标中运行时，它看起来都可以打印视图或不打印视图。

此图像显示在左侧的正常视图模式下看起来不错的条形码，然后在打印预览或打印模式下变得更小。我已将条形码为深绿色的文本框和报告部分的整个区域涂成青绿色，以显示它不是一个小的文本框。

[![截屏](../Images/fe0b10949cf64e55ffd6124a26eb1ebe.png)](https://i.stack.imgur.com/Tj2iY.png)

此图像显示在投标的打印预览中看起来不错的报告。

[![出价截图](../Images/d76ee782daee7374c58d80db938ec258.png)](https://i.stack.imgur.com/0UcJf.png)

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T03:51:56.647

我通过重新启动服务器解决了这个问题，希望这对从谷歌来到这里的其他人有所帮助。

安装字体后需要重新启动。

这里有几个链接引导我找到这个修复的方向：

[http://connect.microsoft.com/SQLServer/feedback/details/401908/bar-code-does-not-print-in-ssrs](http://connect.microsoft.com/SQLServer/feedback/details/401908/bar-code-does-not-print-in-ssrs)

[http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/9b273f37-2160-4014-895a-d20f16c56856/](http://social.msdn.microsoft.com/Forums/en-US/sqlreportingservices/thread/9b273f37-2160-4014-895a-d20f16c56856/)

# php - 还有更简洁的方法来设置默认值吗？

> ID：13507779
> 
> 赞同：5
> 
> 时间：2012-11-22T07:33:10.637
> 
> 标签：php, variables, variable-assignment, default-value

> 从 PHP 5.3 开始，可以省略三元运算符的中间部分。表达式 expr1 ?：如果 expr1 的计算结果为 TRUE，则 expr3 返回 expr1，否则返回 expr3。

有没有比以下代码设置变量的默认值更好或更简洁的方法？

```
$v = isset($v) ? $v : "default value"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T07:43:29.613

**TL;DR** - 不，这个表达式不能再短了。

您想要的是缩短的三元表达式执行隐式`isset()`. 这已在[邮件列表](http://www.mail-archive.com/internals@lists.php.net/msg49880.html)中进行了讨论，并且已经创建了涵盖该概念的[`ifsetor`RFC 。](https://wiki.php.net/rfc/ifsetor)

由于在上述讨论时已经存在缩短的三元运算符，因此使用不存在的运算符提出了类似这样的[建议](http://www.mail-archive.com/internals@lists.php.net/msg49934.html)`??`：

```
// PROPOSAL ONLY, DOES NOT WORK
$v = $v ?? 'default value'; 
```

*`'default value'`如果`$v`未定义，则赋值。*

然而，迄今为止，在主要语言中还没有实现类似的功能。在那之前，你写的东西不能再短了。

这个*可怕*的结构更短，但请注意，它**不一样**，因为如果变量存在，它会分配默认值，但计算结果为`false`：

```
// DO NOT USE
$v = @$v ?: 'default value'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-29T23:57:46.360

刚问[这个](https://stackoverflow.com/questions/14086980/php-return-if-isset#comment19481440_14086980)，就被指到了这里。因此，如果您使用 a `key`of an `array`，这可能是一种改进

```
function isset_get($array, $key, $default = null) {
    return isset($array[$key]) ? $array[$key] : $default;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-24T21:24:01.003

这是一个较短的语法：

```
isset($v) || $v="default value"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T07:41:40.090

没有。如果您真的不知道是否`$v`设置，这是正确的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T07:43:22.637

没办法。如果你使用三元运算符。

# android - 关于子线程操作UI

> ID：13507780
> 
> 赞同：0
> 
> 时间：2012-11-22T07:33:11.533
> 
> 标签：android, handler

难道子线程可以操作UI？或者它只能使用handler在主线程中操作。但我使用这段代码。它没有启动错误。有人有想法吗？

```
new Thread(new Runnable() {
            public void run() {
                TextView tv=(TextView) findViewById(R.id.aaa);
                tv.setText("111");
            }
        }).start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:35:12.423

不，您不能从不同的线程执行 UI 操作。如果要更新 UI，则**必须**使用[handlers](http://developer.android.com/reference/android/os/Handler.html)。或者，您也可以使用[异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)或[Activity.runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:36:16.390

通常只有主线程应该接触 UI。否则你不会得到例外，但你很有可能会。

您应该使用`handler`//因为它们是修改 UI 的方式`asyncTask`，`runOnUiThread`其他方式在某些情况下可能有效，但不能保证。

# iphone - UIScrollView scrollrecttovisible 方法

> ID：13507782
> 
> 赞同：0
> 
> 时间：2012-11-22T07:33:16.400
> 
> 标签：iphone, objective-c, ios, xcode, uiscrollview

我有一个`UIScrollview`（水平）`UIview`作为子视图，在这里我可以将 uiview 拖到里面`scrollview`，contentSize`scrollview`是 2400。当我拖动 uiview 时它是不可见的，即它在滚动视图内，因为我的滚动视图宽度很小，我需要滚动`scrollview`以**使 UIView 可见**。为此我有使用

```
[myscroll scrollRectToVisible:myview.frame animated:YES]; 
```

但它仍然无法正常工作，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T08:09:04.167

In Your case,`[myscroll scrollRectToVisible:myview.frame animated:YES];` will not work because of *myview* is a sub-view of *myscroll*. `myview.frame` will return the CGRect which is only related to the *myscroll*.

My suggestion is , you can acheive the functionality through **UIpageControl + UIScrollView** . You can set UIPageControl as **Hidden**.

**SampleCode**

```
int page = sidePager.currentPage + 1;
CGRect frame = scroller.frame;
frame.origin.x = frame.size.width * page;

if (0 != UpAndDownPager.currentPage) {

     frame.origin.y = frame.size.height * (UpAndDownPager.currentPage + 1 );
}

scroller scrollRectToVisible:frame animated:YES];       
sidePager.currentPage = sidePager.currentPage + 1; 
```

**Note:**

**sidePager**: UIPageControl For Right-Left position

**UpAndDownPager**: UIPageControl For Top-Bottom position

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-05-18T07:28:27.523

```
scrollView.contentSize.width != 0 
&&
scrollView.contentSize.height != 0 
```

# android - Folder added on Android is not visible via USB

> ID：13507789
> 
> 赞同：35
> 
> 时间：2012-11-22T07:33:47.750
> 
> 标签：android, filesystems

I'm trying to save pictures in a subfolder on Android. Here's a bit of my code:

```
File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);
path = new File(path, "SubDirName");
path.mkdirs(); 
```

(I've tried `getExternalStorageDirectory` instead of `getExternalStoragePublicDirectory` and the Pictures folder instead of DCIM.)

Any subfolder I add, including its contents, don't show up in Windows Explorer when the device is connected via USB. It does show in the Android File Manager, though.

I've tried broadcasting the `ACTION_MEDIA_MOUNTED` intent on the new directory's parent. It didn't work.

If I add a file in Windows, it shows up on Android. If I add a file on Android via the File Manager, it shows up in Windows. If I add the file programmatically, it shows up on the Android File Manager, but not in Windows Explorer. And I *need* to get it from Windows, and I don't want the final user to have to create the folder manually.

What am I doing wrong?

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-11-12T16:06:53.563

I faced the same issue and rebooting either the Android device or the PC is not a practical solution for users. :)

This issue is through the use of the [MTP](https://en.wikipedia.org/wiki/Media_Transfer_Protocol) protocol (I hate this protocol). You have to initiate a rescan of the available files, and you can do this using the `MediaScannerConnection` class:

```
// Snippet taken from question
File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);
path = new File(path, "SubDirName");
path.mkdirs();

// Initiate a media scan and put the new things into the path array to
// make the scanner aware of the location and the files you want to see
MediaScannerConnection.scanFile(this, new String[] {path.toString()}, null, null); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-07T18:46:03.277

The way used in [Baschi's answer](https://stackoverflow.com/questions/13507789/folder-added-on-android-not-visible-via-usb/19934089#19934089) doesn't always work for me. Well, here is a full solution.

```
// Snippet taken from question
File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DCIM);
path = new File(path, "SubDirName");
path.mkdirs();

// Fix
path.setExecutable(true);
path.setReadable(true);
path.setWritable(true);

// Initiate media scan and put the new things into the path array to
// make the scanner aware of the location and the files you want to see
MediaScannerConnection.scanFile(this, new String[] {path.toString()}, null, null); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-09-10T13:38:41.347

The only thing that worked for me was this:

```
Intent mediaScannerIntent = new Intent(Intent.ACTION_MEDIA_SCANNER_SCAN_FILE);
Uri fileContentUri = Uri.fromFile(path);
mediaScannerIntent.setData(fileContentUri);
this.sendBroadcast(mediaScannerIntent); 
```

Credit to *[https://stackoverflow.com/a/12821924/1964666](https://stackoverflow.com/a/12821924/1964666)*

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-09T11:18:32.990

None of the above helped me, but this worked: The trick being to NOT scan the new folder, but rather create a file in the new folder and then scan the file. Now Windows Explorer sees the new folder as a true folder.

```
 private static void fixUsbVisibleFolder(Context context, File folder) {
    if (!folder.exists()) {
        folder.mkdir();
        try {
            File file = new File(folder, "service.tmp");//workaround for folder to be visible via USB
            file.createNewFile();
            MediaScannerConnection.scanFile(context,
                    new String[]{file.toString()},
                    null, (path, uri) -> {
                        file.delete();
                        MediaScannerConnection.scanFile(context,
                                new String[]{file.toString()} ,
                                null, null);
                    });
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

Thanks to [https://issuetracker.google.com/issues/37071807#comment90](https://issuetracker.google.com/issues/37071807#comment90)

You also should scan every created file in the directory analogically:

```
 private static void fixUsbVisibleFile(Context context, File file) {
    MediaScannerConnection.scanFile(context,
            new String[]{file.toString()},
            null, null);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-11T07:11:34.877

If you add the folder to the SD card from the PC directly to the card through the card reader, it will not show in Windows Explorer when connected with the phone.

The solution is to copy or move the same folder using the Android file manager program and then it will be listed in the SD card index when connected to the PC.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-17T09:28:01.807

It's work fine for me.

MediaScannerConnection.scanFile work if there is file in directory (not directory)

```
private fun checkMTPFolder(f: File, context: Context) {
   if (f.isDirectory) {
      val newFilePath = f.absolutePath + "/tempFIle"
      val newFile = File(newFilePath)
      newFile.mkdir()

      MediaScannerConnection.scanFile(context, arrayOf(newFilePath), null, object : MediaScannerConnection.OnScanCompletedListener {
                override fun onScanCompleted(p0: String?, p1: Uri?) {
                    val removedFile = File(p0)
                    removedFile.delete()
                    MediaScannerConnection.scanFile(context,arrayOf(removedFile.absolutePath), null, null)
                }

            })
   }
} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2016-08-05T09:45:32.263

I have solved this problem by toggling the phone setting:

1.  After a directory is created and/or a file saved, change from (MTP) mode to USB (SD card) mode for a moment, wait for the SD card mounting on the PC, so the directory and file will be shown.

2.  Turn back to (MTP) mode again where the last file still shows up.

3.  When re-saving a file, you have to change to USB again to see it.

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-11-02T17:24:45.590

Just create the directory on the PC first, and then copy it over to the SD card/phone storage.

You can either put in the contents into the folder first and copy over or just the folder first. As long as the folder is created from the PC, any content can just be copied directly to internal/external mobile devices. For zipped content, it cannot be directly unzipped and copied over unfortunately; you need to unzip them first.

# file - 无法从 icloud 下载整个 sqlite 文件

> ID：13507791
> 
> 赞同：1
> 
> 时间：2012-11-22T07:34:03.353
> 
> 标签：file, sqlite, icloud

你好，我已经上传了一个 sqlite3 文件到 icloud。现在我想将此文件下载到我的 APP 的 Document 文件夹中。我按下下载按钮后，它会显示成功信息。但实际上，documents 文件夹中没有 sqlite 文件，或者文件可能已损坏。有人可以帮助我吗？

```
-(IBAction)downloadPressed:(id)sender
{
    if(![self downloadFileIfNotAvailable:self.icloudURL])
    {
        [self displayAlert:@"Warning!!" withmessage:@"failed to restore"];
    }else{
        [self displayAlert:@"Congratulations" withmessage:@"restore sccuessfully"];
    }
}

-(BOOL)downloadFileIfNotAvailable:(NSURL *)file
{
    NSNumber*  isIniCloud = nil;
    NSError* err;
    if ([file getResourceValue:&isIniCloud forKey:NSURLIsUbiquitousItemKey error:nil]) {
        // If the item is in iCloud, see if it is downloaded.
        if ([isIniCloud boolValue]) {
            NSFileManager* fm = [NSFileManager defaultManager];
            if([fm removeItemAtPath:self.filePath error:&err])
            {
                if (![fm startDownloadingUbiquitousItemAtURL:file error:nil]) {
                    return NO;
                }else{
                    return YES;
                }
            }
        }
        return NO;
    }
    return NO;
} 
```

# java - 在java中使用套接字的单个文件中的客户端和服务器

> ID：13507793
> 
> 赞同：0
> 
> 时间：2012-11-22T07:34:14.590
> 
> 标签：java, multithreading, sockets

谁能告诉我如何在一个文件中创建服务器和客户端（两者）？

我在网上搜索并知道可以使用线程。我对线程不熟悉。我正在尝试实现对等应用程序。在某些时候，对等点必须充当服务器和客户端。谁能给我一个示例代码或指导我找到一个好的来源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:47:13.740

简而言之，线程是执行代码的并行工作流。因此，如果您有两个线程实例，则可以让其中一个执行方法 A，其中一个执行方法 B，并且两者都将同时发生。编写并发代码的艺术和科学非常先进，需要很长时间才能掌握。

然而，它很容易开始。对于要单独运行的每段代码，创建一个扩展 Thread 的类，并将要运行的代码放在被覆盖的`run()`方法中。在您的情况下，这可能是`class Client extends Thread`and `class Server extends Thread`。然后，从启动线程的代码（也许是你的`public static void main()`方法？）你实例化两个类，并执行它们的`start()`方法。注意 start() 立即返回；然后中的代码`run()`并发执行。所以

```
a.start();
b.start(); 
```

实际上会立即返回，然后 a 和 b 都并行运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:46:06.343

阅读这篇[文章](http://shazsterblog.blogspot.com/2011/11/arduino-google-voice-activated-servo.html)。这篇文章使用 Java UDP 服务器和客户端代码，它与 Python UDP 客户端和服务器代码连接。

您可以使用 Java UDP 服务器和客户端代码。

# ios - 记录 UIView 活动

> ID：13507797
> 
> 赞同：1
> 
> 时间：2012-11-22T07:34:26.397
> 
> 标签：ios, uiview, screen-capture

我想记录 UIView 活动，就像在视频中捕获屏幕一样，所以可以稍后播放。

在我的应用程序中，我们有一个 MPMediaPlayerController 和 PPT 文件，所以我想在用户移动页面时录制视频以及 PPT 幻灯片，所以这两个东西需要合并到一个视频中，我想如果我们可以截屏是可能的UIView 以某种方式，有什么方法可以让我们控制 UIview 以捕获屏幕并将其存储为电影格式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:57:24.803

您可以使用以下代码“截图”视图：

```
UIGraphicsBeginImageContext(CGSizeMake(100,100));//arbitrary size
[yourView.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage* image = UIGraphicsGetImageFromCurrentContext();
UIGraphicsEndImageContext(); 
```

然后使用像 AVFoundation 这样的东西从图像中创建视频。但是这种“截屏”方法对于实时捕获来说不是很快，并且可能会使您的 UI 反应迟钝。

# silverlight - 如何使用不同的 FontSize 对齐多个 TextBlocks 的底边

> ID：13507800
> 
> 赞同：1
> 
> 时间：2012-11-22T07:34:35.803
> 
> 标签：silverlight, textblock

这是 XAML 示例：

```
<StackPanel Orientation="Horizontal" >
    <TextBlock VerticalAlignment="Bottom" Text="Text1" FontSize="20"  />
    <Image VerticalAlignment="Bottom" ... />
    <TextBlock VerticalAlignment="Bottom" Text="Text2" />
</StackPanel> 
```

结果是文本块根据它们的字体大小有不同的下边距，但我需要它们都在一个没有边距的底线上。如何得到它？就我而言，我不能使用 TextBlock + Runs。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T03:53:19.883

忘记几个块：底部位置取决于字体大小。但是，在一个段落中，写下你的对象的流程你应该使用这样的东西：

```
 <RichTextBlock>
        <Paragraph>
            <Span FontSize="148">Hello</Span>
            <InlineUIContainer>
                <Image Source="Assets/Logo.png"></Image>
            </InlineUIContainer>
            <Span FontSize="36">again</Span> 
        </Paragraph>
    </RichTextBlock> 
```

# php - PHP 复制从远程服务器动态创建的 TIFF 图像

> ID：13507803
> 
> 赞同：3
> 
> 时间：2012-11-22T07:34:43.280
> 
> 标签：php, image, dynamic, curl, tiff

我编写了一个脚本，可以在现有的法律案件案卷中搜索诸如“干预动议”和“强制动议”之类的内容。如果正则表达式返回 true，那么它会查看是否有在线文档的扫描图像供公众使用。该图像是 TIFF 文件，但不是普通的 tiff 文件。这是我试图复制到我自己的服务器的示例的链接。

[http://www.oscn.net/applications/oscn/getimage.tif?submitted=true&casemasterid=2565129&db=OKLAHOMA&barcode=1012443256](http://www.oscn.net/applications/oscn/getimage.tif?submitted=true&casemasterid=2565129&db=OKLAHOMA&barcode=1012443256)

如果您只尝试查看[http://www.oscn.net/applications/oscn/getimage.tif ，则会出现以下错误](http://www.oscn.net/applications/oscn/getimage.tif)

它是一个 TIFF 文件，但是是动态的。我使用了 fopen()、CURL 等但没有成功。我已经将这些类型的函数与来自随机站点的 JPG 图像一起使用，只是为了检查以确保我的服务器允许这种类型的东西并且它有效。

我没有在服务器上安装 PDFlib（我检查了 PEAR 并且它在那里也不可用，尽管我不能 100% 确定它会在哪里。）我的主机使用 cPanel。服务器正在运行 Apache。我不确定在哪里可以找到解决这个问题的方法。

我见过一些使用 PDFlib 的解决方案，但每个解决方案都抓取了一个普通的 TIFF 图像，而不是动态创建的。我的想法是，如果我可以让图像数据流式传输并不重要，我不应该能够使用 fopen() 并将该数据写入或缓冲到我自己的 .tif 文件中吗？

感谢您的任何意见和感恩节快乐！

更新：问题不在于 CURL，而在于我抓取传递给 CURL 的 URL。当我将 $url 打印到屏幕上时，它看起来正确，但事实并非如此。某处 & 变成了 &，然后抛出 CURL，因为它正在获取一个无效的 URL（至少根据 TIF 文件所在的远程服务器是无效的）。

对于那些后来发现它的人，这里是完美运行的脚本。

```
//*******************************************************************************
$url = 'http://www.oscn.net/applications/oscn/getimage.tif"
$url .= '?submitted=true&casemasterid=2565129&db=OKLAHOMA&barcode=1016063497';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url); // set the url
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // get the transfer as a string, rather than output it directly

print "Attempting to fetch file...\n";
$img = curl_exec($ch); // get the image

//I used the time() so that in testing I would know when a new file was created rather than always overwriting the old file. This will be changed for final version
if($img){
  $fh = fopen('oscn_docs/' . time(). '.tif', 'w'); // this will simply overwrite the file. If that's not what you want to do, you'll have to change the 'w' argument!
  if($fh){
    $byteswritten = fwrite($fh, $img);
    fclose($fh);
  }else{
    print "Unable to open file.\n";
  }
}else{
  print "Unable to fetch file.\n";
}

print "Done.\n";
exit(0);
//******************************************************************************* 
```

贾罗德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-08-14T02:41:30.183

对于那些后来发现它的人，这里是完美运行的脚本。

```
//*******************************************************************************
$url = 'http://www.oscn.net/applications/oscn/getimage.tif"
$url .= '?submitted=true&casemasterid=2565129&db=OKLAHOMA&barcode=1016063497';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url); // set the url
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); // get the transfer as a string, rather than output it directly

print "Attempting to fetch file...\n";
$img = curl_exec($ch); // get the image

//I used the time() so that in testing I would know when a new file was created rather than always overwriting the old file. This will be changed for final version
if($img){
  $fh = fopen('oscn_docs/' . time(). '.tif', 'w'); // this will simply overwrite the file. If that's not what you want to do, you'll have to change the 'w' argument!
  if($fh){
    $byteswritten = fwrite($fh, $img);
    fclose($fh);
  }else{
    print "Unable to open file.\n";
  }
}else{
  print "Unable to fetch file.\n";
}

print "Done.\n";
exit(0);
//******************************************************************************* 
```

# java - 如何使用 Java 获取 Linux 和 Solaris 上所有正在运行的进程的列表？

> ID：13507810
> 
> 赞同：3
> 
> 时间：2012-11-22T07:35:03.863
> 
> 标签：java, linux, process, solaris, jna

有谁知道如何使用 Java 获取 Linux 和 Solaris 上所有正在运行的进程的列表？我不想使用 ps 之类的外部程序，也不想使用 proc。我想用本机调用来做到这一点。我找到了一种使用 JNA 的 Windows 方法。但这种方式不适用于 Linux 和 Solaris。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:44:33.507

Java 没有为此提供 api。

你可以做的是解析结果`Process p = Runtime.getRuntime().exec("ps");`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T09:03:19.663

使用`/proc`文件系统。这就是[ps 的做法](http://procps.cvs.sourceforge.net/viewvc/procps/procps/proc/readproc.c?revision=1.57&view=markup)，我找不到你不应该这样做的理由。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T23:09:10.703

Linux`ps`和 Solaris`ps`最终都使用各自操作系统的 /proc 实现。你不能不直接或间接地使用 /proc。

*   [http://procps.sourceforge.net/](http://procps.sourceforge.net/)
*   [https://hg.java.net/hg/solaris~on-src/file/tip/usr/src/cmd/ps/ps.c#l914](https://hg.java.net/hg/solaris~on-src/file/tip/usr/src/cmd/ps/ps.c#l914)
*   [https://blogs.oracle.com/eschrock/entry/the_power_of_proc](https://blogs.oracle.com/eschrock/entry/the_power_of_proc)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T07:45:55.693

当然，您总是可以查看实现，`ps`然后在其中执行相同的操作`JNI`- 但您必须为每个平台单独执行此操作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T08:05:52.320

使用ps。如果您不想告诉系统运行 ps 命令，而是通过 JNI，则获取 Linux 和 OpenSolaris 的 ps 源代码的副本。然后编写使用 JNI 的 Java 代码来执行 ps 源代码使用的系统调用。请注意，您需要考虑不同操作系统的底层细节，因为它们并不相同。

如果您不喜欢这个想法，那么回到 ps 命令所代表的可移植 API 或许是最明智的做法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-25T14:31:47.960

看看西格：

[http://support.hyperic.com/display/SIGAR/Home](http://support.hyperic.com/display/SIGAR/Home)

使用 Sigar，您可以做您正在寻找的事情（以及更多），它具有 JNI 绑定。

# playframework - Play2 Scala - 无法将全局强制转换为 play.GlobalSettings

> ID：13507812
> 
> 赞同：3
> 
> 时间：2012-11-22T07:35:25.590
> 
> 标签：playframework, playframework-2.0, akka

我试图在 app/Global.scala 中创建一个全局对象来运行 Akka 调度程序，就像其他一些 SO 帖子所说的那样。

我的代码几乎是全局对象教程的复制/粘贴，但在启动时出现以下错误：

```
Oops, cannot start the server.
PlayException: Cannot init the Global object [Global cannot be cast to play.GlobalSettings]
    at play.api.PlayException$.apply(Exceptions.scala:122)
    at play.api.Application$$anonfun$3.apply(Application.scala:71)
    at play.api.Application$$anonfun$3.apply(Application.scala:67)
    at play.utils.Threads$.withContextClassLoader(Threads.scala:17)
    at play.api.Application.<init>(Application.scala:66)
    at play.core.StaticApplication.<init>(ApplicationProvider.scala:49)
    at play.core.server.NettyServer$.createServer(NettyServer.scala:132)
    at play.core.server.NettyServer$$anonfun$main$5.apply(NettyServer.scala:153)
    at play.core.server.NettyServer$$anonfun$main$5.apply(NettyServer.scala:152)
    at scala.Option.map(Option.scala:133)
    at play.core.server.NettyServer$.main(NettyServer.scala:152)
    at play.core.server.NettyServer.main(NettyServer.scala)
Caused by: java.lang.ClassCastException: Global cannot be cast to play.GlobalSettings
    at play.api.Application.liftedTree1$1(Application.scala:44)
    at play.api.Application.play$api$Application$$javaGlobal(Application.scala:43)
    at play.api.Application$$anonfun$3.apply(Application.scala:68)
    ... 10 more 
```

这是我的代码：

```
import play.api._
import play.api.Play.current
import akka.util.duration._
import play.api.libs.concurrent._

/**
 * @author Sebastien Lorber (<i>lorber.sebastien@gmail.com</i>)
 * Date: 21/11/12 - Time: 21:55
 */
class Global extends GlobalSettings {

  override def onStart(app: Application) {
    Logger.info("Application has started")
    startElasticSearchIndexationScheduling
  }

  override def onStop(app: Application) {
    Logger.info("Application shutdown...")
  }

  def startElasticSearchIndexationScheduling = {
    Akka.system.scheduler.schedule(5 seconds, 15 seconds) {
      Logger.info("Doing ElasticSearch reindexation (TODO: just testing scheduler")
    }
  }

} 
```

没有你看到的那么花哨……

顺便说一句，我不明白为什么同名的对象经常有 2 个不同的包`play.GlobalSettings`/`play.api.GlobalSettings`等等。一个对象似乎用于 Java，另一个用于 Scala，但包名称使这一点不太明显。而且我正在使用 Scala 和导入“play.api.GlobalSettings”的 Scala 全局对象，那么为什么它需要尝试转换为`play.GlobalSettings`看起来更面向 Java 的（我尝试扩展这个，但它也不起作用，它是不是教程所说的）

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T07:51:16.990

您必须使用对象，而不是具有 Scala Global 对象的类：

```
...
object Global extends GlobalSettings {
...
} 
```

看一下[使用 Scala 的 Global object的 Play 文档](http://www.playframework.org/documentation/2.0.4/ScalaGlobal)

关于`play.*`反对`play.api.*`，可以肯定的是，要有所作为并不明显。假设 Play 的核心是 Scala (api)，而 Java 部分只是围绕它的一个包装器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-10T20:07:31.400

确保您使用`play.api.GlobalSettings`的是 Scala，而不是`play.GlobalSettings`Java 版本。否则你会得到这个类的强制转换警告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-25T05:37:07.563

如果您碰巧有一个带有伴随对象的类：

`class Global extends WithFilters...`

`object Global extends Global`

那么它也会在开始时失败并出现同样的错误。解决方案是使类抽象：

`abstract class Global extends WithFilters...`

这是因为玩！首先寻找一个 java Global，它是一个类，然后再寻找一个 scala Global，它是一个对象。

# javascript - 子页面关闭后如何刷新父页面并且它们都不在同一台服务器上？

> ID：13507815
> 
> 赞同：1
> 
> 时间：2012-11-22T07:35:28.190
> 
> 标签：javascript, jquery, asp.net

我在一台服务器上有一个父页面，我将一个子页面称为另一个服务器上的弹出窗口。因此，一旦子页面关闭，我想刷新父页面，所以我在父页面中编写了一个重新加载函数，我试图从子页面调用它：

```
opener.reload(); 
```

但是由于父母在另一台服务器上，这件事不起作用，有什么办法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:40:39.070

你能告诉我如何打开一个子页面作为弹出？如果通过颜色框或厚框，那么有一个 onClose 事件，您可以在其上编写类似的内容

```
function() 
{ 
    window.location.reload(true); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:46:40.900

在父页面中尝试这个 Javascript 函数

```
 function GoTopage()
    {
     var retValue = showModalDialog ("child.aspx", "", "dialogWidth:600px; dialogHeight:300px; dialogLeft:200px;");
     if (retValue == null)
     {
     __doPostBack('', '');  /* For postback */  
     /*location.reload();  for complete reloading or refreshing*/
     }
     return false;

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:39:26.937

代替`opener.reload`

您可以使用`submit()`

在你的javascript函数中像这样的东西

```
opener.document.forms[0].submit(); 
```

**源文档**

[http://forums.asp.net/t/1412827.aspx/1](http://forums.asp.net/t/1412827.aspx/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T08:25:26.373

这并不是一个很好的方法，但这是我能想到的唯一方法，因为有同源策略。

```
var timer, childWindow = window.open("https://google.ca/");

function hasClosed() {
    'use strict';
    if (childWindow && childWindow.closed) {
        // stop the timer
        window.clearInterval(timer);

        // do whatever here
        console.log('The window has closed');
    }
}

// set a timer to continually check if the window has closed
timer = window.setInterval(hasClosed, 1000); 
```

# java - 使用单例模式的电子邮件

> ID：13507816
> 
> 赞同：0
> 
> 时间：2012-11-22T07:35:30.147
> 
> 标签：java, singleton

我的服务器上运行了一个 webapp，它会更新一些*余额*。*余额*更新后，我需要检查*余额*是否低于 5000。如果*余额*低于 5000，我应该**发送电子邮件警报**。这里要注意的是，我**每天只需要发送一次**警报，每次余额低于 5000 时警报不应该一直持续。我相信我应该使用单例模式发送邮件，但我不是确定如何使用它。看到*余额的程序*低于 5000，应该调用具有发送电子邮件警报功能的单例类，但是如何确保当余额下降时程序不会再次调用该函数？有人可以指导我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:44:14.103

> [单例模式](http://en.wikipedia.org/wiki/Singleton_pattern) 是一种将类的实例化限制为一个对象的设计模式。当需要一个对象来协调整个系统的动作时，这很有用。

但是对于您的要求，我不知道它是否会有所帮助。也许您可以使用一些标志概念。并且每天都要清旗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:38:54.220

单例是一种确保只创建一个对象实例的设计模式。

听起来它与你需要的东西没有任何关系，你可以在你的数据库中添加一个标志`alert_sent=true/false`并相应地更新它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:40:05.157

[用户定时器任务每天只发送一次邮件](http://docs.oracle.com/javase/6/docs/api/java/util/TimerTask.html)

[单例模式](http://javapapers.com/design-patterns/singleton-pattern/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T07:44:26.553

您在这里不需要任何“特殊”设计模式。例如，您可以存储上次发送电子邮件通知的日期，例如：

```
Date lastEmail = ... // last email date 
```

并且在尝试发送电子邮件时检查条件：

```
If( ... ) // lastEmail is before current day
{  //send emal and update lastEmail } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T08:17:52.600

您需要考虑两件不同的事情：

*   电子邮件发送服务。

实现它的几种方法。是的，它可以是**Singleton**，但也可以是普通的 Java 服务。如果您使用**Spring**，那么它们具有非常简单且有用的预定义实现。这是一个[例子](http://www.javacodegeeks.com/2010/07/java-mail-spring-gmail-smtp.html)。

*   您的检查余额逻辑。

取决于你真正需要什么。如果您需要检查每个余额更新但每天发送的警报不超过一次，那么它将类似于：

```
 private Date lastAlertDate;

    private static final BALANCE_LIMIT = 5000;

    private void handleBalanceUpdated(long balance) {
        if (balance < 5000) {
        log.info("Balance has gone below {}", BALANCE_LIMIT);
        int daysDifference = getDifferenceInDays(lastAlertDate, new Date());
        if (daysDifference >= 1) {
            log.info("Last alert was {} days ago, going to send email alert", daysDifference);
            alertService.sendSimpleAlert("Balance has gone below " + BALANCE_LIMIT + "!");
            lastAlertDate = new Date();
        }
    }
    } 
```

# iphone - 如何在 iPhone 的 UIView 上添加弹出框动画

> ID：13507818
> 
> 赞同：2
> 
> 时间：2012-11-22T07:35:36.237
> 
> 标签：iphone, objective-c, ios, xcode, nsanimation

我有一个按钮添加。这将添加来自画廊和相机的图像。

![在此处输入图像描述](../Images/b98db11657a17ba0e63c3a454cbf7be1.png)

我想从 ryt 角落展示这个 UIVIew，它会从 1 扩展到 2 到 3 和最终统计 4。就像一个气球。它会隐藏起来，从 4 到 3 到 2 到 1。

我用过这个动画，但这不是我想要的（气球弹出框）

```
/*[UIView beginAnimations:@"" context:NULL];

        //The new frame size
        [AddImagesToCanvasView setFrame: CGRectMake(224,185,175,132)];

        //The animation duration
        [UIView setAnimationDuration:2.0];

        [UIView setAnimationDelay: UIViewAnimationCurveEaseIn];

        [UIView commitAnimations];*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:42:14.577

只需更改您想要的框架和半径。如果您想像气球一样显示带有气球图像的气球，请在背景中添加图像，请参阅代码..

```
UIView *popUpView = [[UIView alloc] initWithFrame:view1.frame]; ///add the frame with requirement e.g view1,view2

popUpView.alpha = 0.0;
popUpView.layer.cornerRadius = 5;
popUpView.layer.borderWidth = 1.5f;
popUpView.layer.masksToBounds = YES;
[self.view addSubview:popUpView];

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.4];
[popUpView setAlpha:1.0];
[UIView commitAnimations];
[UIView setAnimationDuration:0.0]; 
```

**更新：**

还可以从下面的链接中查看自定义弹出视图。

1.  [弹出视图](https://github.com/sonsongithub/PopupView)

2.  [alpopoverview](http://www.mobilebricks.com/ios/alpopoverview)

    我希望这可以帮助你...

# android - 如何在列表视图顶部动态设置横幅

> ID：13507821
> 
> 赞同：0
> 
> 时间：2012-11-22T07:35:58.657
> 
> 标签：android

我想在列表视图的顶部动态设置横幅（图像）。我正在从 web 服务调用列表视图数据。我在我的惰性适配器类中进行了此编码，但没有可见的横幅。我想像这样设置横幅。![](../Images/1a5f1c99e0dfd08d095e10047d3d6cea.png)

```
RelativeLayout layout1 = new RelativeLayout(mContext);
ImageView image = new ImageView(mContext);
LayoutParams params2 = new  LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT);              
image.setLayoutParams(params2);
image.setScaleType(ImageView.ScaleType.CENTER);
image.setMaxHeight(50);
image.setMaxWidth(50);
image.getPaddingTop();

image.setImageResource(R.drawable.topheader);
layout1.getPaddingTop();
layout1.addView(image);*/ 
```

我的drawable中有横幅图像。

* * *

这是我的懒惰适配器类的完整代码

```
package com.example.jsonparsing;
import java.io.InputStream;
import java.net.MalformedURLException;
import java.net.URL;
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.BaseAdapter;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.TextView;
import android.widget.RelativeLayout.LayoutParams;

public class LazyAdapter extends BaseAdapter {
int counter = 0;
Context mContext;
Activity a;

public LazyAdapter(Context context) {
this.mContext = context;
this.a = a;
}

public int getCount() {
System.out.println("Called..."+ Constants.vctrCategoryId.size());
return Constants.vctrCategoryId.size();
}

public Object getItem(int position) {
return position;
}

public long getItemId(int position) {
return position;
}

public View getView(int position, View convertView, ViewGroup parent) {

System.out.println("Exception before..");
String strUrl = Constants.vctrImagePath.elementAt(counter).toString();// getting url of the images

System.out.println("Urls...." + strUrl);
URL url =null;
try {
url = new URL(strUrl);
} catch (MalformedURLException e) {
// TODO Auto-generated catch block

e.printStackTrace();
}

Bitmap bitmap = Constants.DownloadImage(strUrl);
Bitmap resized = Bitmap.createScaledBitmap(bitmap, 100, 100, true);
//text.setImageBitmap(bitmap);

/* this coding i did for setting banner

/*RelativeLayout layout1 = new RelativeLayout(mContext);
ImageView image = new ImageView(mContext);
LayoutParams params2 = new  LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT);
image.setLayoutParams(params2);
image.setScaleType(ImageView.ScaleType.CENTER);
image.setMaxHeight(50);
image.setMaxWidth(50);
image.getPaddingTop();

image.setImageResource(R.drawable.topheader);
layout1.getPaddingTop();
layout1.addView(image);*/

RelativeLayout layout = new RelativeLayout(mContext);
//RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT);
//layout.setLayoutParams(params);
TextView text1 = new TextView(mContext);
text1.setText(Constants.vctrCategory.elementAt(counter).toString());
LayoutParams params1 = new  LayoutParams(LayoutParams.WRAP_CONTENT,LayoutParams.WRAP_CONTENT);
params1.addRule(RelativeLayout.ALIGN_PARENT_RIGHT);
text1.setLayoutParams(params1);
text1.setTextSize(20);
text1.setGravity(Gravity.RIGHT);
layout.addView(text1);

ImageView img = new ImageView(mContext);
img.setImageBitmap(resized);

layout.setGravity(Gravity.CENTER_VERTICAL | Gravity.CENTER_HORIZONTAL);
layout.addView(img);
counter++;
return layout;
}

private void setContentView(ImageView image) {
// TODO Auto-generated method stub

}

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:40:25.313

从布局的角度来看您的解决方案：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:src="@drawable/ic_launcher" />

    <ListView
        android:id="@+id/listView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1" >
    </ListView>

</RelativeLayout> 
```

猜猜有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:40:53.520

您是否尝试过[listView](http://developer.android.com/reference/android/widget/ListView.html)类的[addHeaderView()](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29) 方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:42:46.207

用这个：

```
View headerView1 = ((LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.custom_add, null, false);///this is your imageview 
list_view.addHeaderView(headerView1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T07:43:57.450

@kittu88 的完美回答。如果你想动态添加它，你可以试试这个。

XML:

```
<LinearLayout
        android:od="@+id/banerLayout"        
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        > 
```

Java 代码

```
LinearLayout bLayout = (LinearLayout) findViewbyId(R.id.banerLayout);
bLayout.addView(YOUR Image); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T07:50:46.943

你可以使用下面的代码，

![在此处输入图像描述](../Images/2460c38c7a744114095e5e181371ad09.png)

list_main.xml

```
<?xml version="1.0" encoding="utf-8"?>    

<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="vertical">
  <ListView
    android:id="@+id/android:list"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:scrollbars="none"/>
  <TextView
    android:id="@+id/android:empty"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/empty_list" />
</LinearLayout> 
```

list_header.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:id="@+id/header_layout_root"
  android:background="#ffffff"
  android:orientation="vertical">
    <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="@string/app_name"
        android:background="#000000"
        android:textColor="#ffffff"
        android:textSize="28dp"
        android:gravity="center_horizontal"
        android:paddingTop="10dp"
        android:paddingBottom="10dp">
    </TextView>
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content">
        <ImageView
            android:id="@+id/sample_image"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:adjustViewBounds="true"
            android:src="@drawable/sample_image"
            android:scaleType="fitXY">
        </ImageView>
        <TextView
            android:id="@+id/sample_title"
            android:text="@string/sample_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textColor="#ffffffff"
            android:textSize="12dp"
            android:background="#AA000000"
            android:padding="5dp"
            android:layout_alignParentLeft="true"
            android:layout_alignBottom="@id/sample_image">
        </TextView>
    </RelativeLayout>
</LinearLayout> 
```

接下来回到您的 ListActivity 类，是时候将代码添加到列表中了，将其放在对 setContentView() 的调用下方：

```
ListView lv = getListView();
LayoutInflater inflater = getLayoutInflater();
View header = inflater.inflate(R.layout.list_header, (ViewGroup) findViewById(R.id.header_layout_root));
lv.addHeaderView(header, null, false); 
```

ListWithHeader.java

```
import android.app.ListActivity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class ListWithHeader extends ListActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_main);

        //add header to list
        ListView lv = getListView();
        LayoutInflater inflater = getLayoutInflater();
        View header = inflater.inflate(R.layout.list_header, (ViewGroup) findViewById(R.id.header_layout_root));
        lv.addHeaderView(header, null, false);

        //add some list items
        String listItems[] = {"List Item One", "List Item Two", "List Item Three", "List Item Four", "List Item Five"};
        lv.setAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1, listItems));
    }
} 
```

# domain-driven-design - 使用流程管理器 aka saga 在同一有界上下文中跨聚合根的最终一致性

> ID：13507822
> 
> 赞同：7
> 
> 时间：2012-11-22T07:36:02.667
> 
> 标签：domain-driven-design, cqrs

假设您在有界上下文中有两个聚合，它们之间有一些约束。使用 DDD，这些内部聚合约束不能在同一个事务中强制执行，即聚合边界是事务边界。

您会考虑使用 Microsoft CQRS 旅程中所谓的“流程管理器”来协调同一有界上下文中的两个聚合，还是仅用于在两个有界上下文之间进行协调的流程管理器？在同一个有界上下文中协调两个或多个聚合根的进程管理器的等价物是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-22T10:37:34.143

默认情况下，聚合根定义了一个有界上下文，尽管它是一个较低级别的上下文（顺便说一句，您可以找到的最低级别的有界上下文是一个对象，任何对象）。流程管理器是他们使用的名称而不是saga，可能您也可以想出其他名称，没关系，它们都有相同的目的。

是的，我会考虑使用 saga 来实现最终的一致性。事实上，我认为这是最好的方法，这正是我在自己的应用程序中所做的。无论如何，我使用的是消息驱动架构（是的，在本地、非分布式应用程序中），并且我通过服务总线（我自己的，尚未发布）自动支持 saga。

在处理最终一致性时，重要的是确保无处不在的幂等性。也就是说，聚合根应该拒绝重复操作，当然事件处理程序应该能够处理同一事件可以多次发布的事实。但是，请注意，您不能保证 100% 幂等性，但可以非常接近。

# c# - Lambda 表达式“IN”运算符是否存在？

> ID：13507827
> 
> 赞同：21
> 
> 时间：2012-11-22T07:36:18.260
> 
> 标签：c#, c#-4.0, lambda, entity-framework-5

我正在寻找构建如下的 Lambda 表达式

```
IQueryable<Object> queryEntity = 
                _db.Projects.Where(Project=>Project.Id.IN(1,2,3,4)); 
```

`IN`我在 Lambda 表达式中找不到任何运算符。

有人有建议吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-22T07:58:35.800

为此使用[IEnumerable.Contains 。](http://msdn.microsoft.com/en-us/library/bb352880.aspx)

```
var idList = new[] { 1, 2, 3, 4 };
IQueryable<Object> queryEntity = 
                _db.Projects.Where(Project => idList.Contains(Project.Id)); 
```

您当然可以构建`idList`内联。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T08:00:20.383

没有 in 运算符，但有一个 contains。只需颠倒您的逻辑：

`IQueryable<Object> queryEntity = _db.Projects.Where(Project=>(new []{1,2,3,4}).Contains(Project.Id));`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:58:53.540

您正在寻找[IEnumerable.Contains](http://msdn.microsoft.com/en-us/library/bb352880.aspx)

```
_db.Projects.Where(Project => list.Contains(Project.Id)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T08:01:00.283

你可以自己写

```
public static bool In(this object item, IEnumerable list)
{
    return list.Contains(item);
}

public static bool In(this object item, params object[] list)
{
    return item.In(list);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-12T18:15:56.610

基于[Anders](https://stackoverflow.com/users/557127/anders-arpi) upvoted 解决方案的[伪代码。](https://en.wikipedia.org/wiki/Pseudocode)

1.  假设：使用来自维基百科的[美国历史铸币厂](https://en.wikipedia.org/wiki/Historical_United_States_mints)的信息。
2.  数据集：StateMints。
3.  字段：位置，薄荷。
4.  要求：选择所有具有 mint id 的硬币。
5.  StateMints 样本数据：
    Mint、Location

    1.O，新奥尔良，路易斯安那
    2.W，西点，纽约 3.D
    ，丹佛，科罗拉多

到目前为止，这是我的代码：

```
List<string> mints = new List<string> { "C", "CC", "D", "M", "O", "P", "S", "W" };  
var locations = StateMints.Where(p => mints.Contains(p.Mint.ToUpper())).Select(p => p.Location).ToList(); 
```

# iphone - 使用核心图形加载视网膜/正常图像

> ID：13507837
> 
> 赞同：0
> 
> 时间：2012-11-22T07:36:53.343
> 
> 标签：iphone, bitmap, core-graphics, retina-display, bitmapdata

```
+(UIImage*) createCGImageFromFile:(NSString*)inName
{
    if(!inName || [inName length]==0)
        return  NULL;

    // use the data provider to get a CGImage; release the data provider
    CGImageRef image= NULL;
    CGFloat scale = 1.0f;
    CGDataProviderRef dataProvider = NULL;

    NSString *fileName = nil;
    NSString *path = nil;
    if([Utilities isRetinaDevice])
    {
        NSString *extenstion = [inName pathExtension];
        NSString *stringWithoutPath = [inName stringByDeletingPathExtension];
        fileName = [NSString stringWithFormat:@"/Images/%@@2x.%@",stringWithoutPath,extenstion];
        path = [[[NSBundle mainBundle] resourcePath] stringByAppendingString:fileName];
        dataProvider = CGDataProviderCreateWithFilename([path UTF8String]);
        if(dataProvider)
        {
            image = CGImageCreateWithPNGDataProvider(dataProvider, NULL, NO,kCGRenderingIntentDefault);
            CGDataProviderRelease(dataProvider);
            if(image)
            {
                scale = 2.0f;
            }
        }
    }

    if(image == NULL) //Try normal image
    {
        fileName =  [NSString stringWithFormat:@"/Images/%@",inName];
        path = [[[NSBundle mainBundle] resourcePath] stringByAppendingString:fileName];
        dataProvider = CGDataProviderCreateWithFilename([path UTF8String]);
        if(dataProvider)
        {
            image = CGImageCreateWithPNGDataProvider(dataProvider, NULL, NO,kCGRenderingIntentDefault);
            CGDataProviderRelease(dataProvider);
        }
    }

    // make a bitmap context of a suitable size to draw to, forcing decode
    size_t width = CGImageGetWidth(image);
    size_t height = CGImageGetHeight(image);
    unsigned char *imageBuffer = (unsigned char *)malloc(width*height*4);

    CGColorSpaceRef colourSpace = CGColorSpaceCreateDeviceRGB();

    CGContextRef imageContext =
    CGBitmapContextCreate(imageBuffer, width, height, 8, width*4, colourSpace,
                          kCGImageAlphaPremultipliedFirst | kCGBitmapByteOrder32Little);

    CGColorSpaceRelease(colourSpace);

    // draw the image to the context, release it
    CGContextDrawImage(imageContext, CGRectMake(0, 0, width, height), image);
    CGImageRelease(image);

    // now get an image ref from the context
    CGImageRef cgImageRef = CGBitmapContextCreateImage(imageContext);

    CGContextRelease(imageContext);
    free(imageBuffer);

    UIImage *outImage = nil;
    if(cgImageRef)
    {
        outImage = [[UIImage alloc] initWithCGImage:cgImageRef scale:scale orientation:UIImageOrientationUp];
        CGImageRelease(cgImageRef);
    }

    return outImage;//Need to release by the receiver
} 
```

早些时候，该功能没有加载视网膜图像，因为我没有将@2x 附加到图像路径，我认为苹果本身会小心的。现在我修改了代码以加载@2x 图像并使用比例因子创建 UIImage，我在上面的代码中遗漏了什么吗？好吗？

PS 目前我在使用此代码时没有遇到任何问题，但我不是 100% 确定

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:48:29.207

我会使用 UIImage 来加载它（它会更正路径）这将**大大**简化您的代码

然后从中获取 CGImage （UIImage 基本上只是 CG 的薄包装，因此没有真正的开销）

然后继续执行您的代码-对我来说还可以

# .net - 如果没有下载框架，如何制作.net 应用程序安装程序来检查是否安装了.net 框架

> ID：13507839
> 
> 赞同：0
> 
> 时间：2012-11-22T07:37:06.057
> 
> 标签：.net, installation

我需要检查是否安装了net framework，如果没有安装它应该从微软网站下载。

我知道在这种情况下我应该使用：

*   一些不基于.net框架的外部脚本/组件/语言提供通用的独立安装

或者

*   使用检查 .net 框架的安装脚本，下载它，然后运行 ​​.net 安装程序。

该功能是否有任何好的实践/示例/实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:37:00.633

检查是否安装了net framework：您可以在regedit中检查指定路径是否存在来判断.net安装与否。例如：检查.net3.0是否安装，路径为：HKEY_LOCAL_MACHINE\OFTWARE\Microsoft\NET Framework Setup\NDP\v3.0\Setup

安装 .net 您可以使用 .net 安装包的命令行进行静默安装。例如：dotnetfx.exe /q:a /c:"install /l /q"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:41:36.187

我不确定旧的安装项目模板，但 ClickOnce 安装程序无需任何代码即可完成。只需打开项目属性到发布选项卡并选择先决条件，按下同名按钮，然后单击发布以创建安装程序包。

更多关于[如何：使用 ClickOnce 应用程序安装先决条件](https://login.live.com/login.srf?wa=wsignin1.0&rpsnv=11&checkda=1&ct=1353570151&rver=6.0.5276.0&wp=MCLBI&wlcxt=msdn%24msdn%24msdn&wreply=http://msdn.microsoft.com/en-us/library/8st7th1x%2528v=vs.80%2529.aspx&lc=1033&id=254354&mkt=en-US)

# android - ListView 单元格展开（向下滑动）动画

> ID：13507842
> 
> 赞同：1
> 
> 时间：2012-11-22T07:37:31.447
> 
> 标签：android, android-layout

> **可能重复：**
> [如何使 Android ListView 中的单元格在被触​​摸时垂直扩展和收缩？](https://stackoverflow.com/questions/12522348/how-can-i-make-a-cell-in-a-listview-in-android-expand-and-contract-vertically-wh)

我想看到一个单元格视图扩展和向下推送列表项的一个很好的例子，就像在 twitter 应用程序上一样。我想要的是用户单击列表视图项中的按钮，然后 item_view 优雅地展开以显示 EditText 和按钮。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:38:14.137

你需要做这样的事情..

```
public class ExpandAnimation extends Animation {
@Override
protected void applyTransformation(float interpolatedTime, Transformation t) {
    super.applyTransformation(interpolatedTime, t);

    // End animation sometimes calls with exactly 1.0f
    if (interpolatedTime <= 1.0f) {

        // Calculating the new bottom margin, and setting it
        mViewLayoutParams.bottomMargin = mMarginStart
                + (int) ((mMarginEnd - mMarginStart) * interpolatedTime);

        // Invalidating the layout, making us seeing the changes we made
        mAnimatedView.requestLayout();
    }
} 
```

上面的代码改变了每个动画帧中视图的边距。这使它看起来像您的新视图正在向下推动其余项目。您也可以尝试更改子项的高度而不是其边距。.

 Change code of onTouchEvent to int color = button1.getCurrentTextColor(); int r = (color) & 0xFF; int g = (color >> 8) & 0xFF; int b = (color >> 16) & 0xFF; int a = (color >> 24) & 0xFF; button1.setTextColor(Color.argb(DOWN_Alpha, r, g, b)); javascriptjqueryjquery-uijquery-pluginscoffeescript 4 1 回答 1 This answer is useful 2 移动你的实际tree.jquery.js  实际上，看起来您包含了很多jQuery。你需要删除很多。 于 2012-11-22T07:41:40.357 回答 Related 0 java - 模拟器不显示任何图片。SurfaceView 安卓 3 java - 如何在Android中解析复杂的json响应 1 unity3d - 玩家移动的坡度限制 5 ruby - Ruby Hash.new 怪异 2 java - struts 2中的单元测试：无法继承受保护的变量 4 php - 从对象传递变量数组 2 c++ - CGRectMake（或其他 Make 函数）究竟做了什么？ 5 c# - 神秘的“对象引用未设置为对象实例” 3 javascript - _以“揭示模块模式”风格编写的 JSDoc'ing Javascript 文件的最佳实践？ 4 c# - 字符串中的递增字符 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641 <link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# javascript - 未捕获的类型错误：对象# has no method 'tree' **getting this error "Uncaught TypeError: Object # has no method 'tree' " at this "$('#tree1').tree" code line Refer this eg ht 问问题 user1418832 问问题 2012-11-22T07:37:42.470 3004 次 This question shows research effort; it is useful and clear 0 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. **getting this error "Uncaught TypeError: Object # has no method 'tree' " at this "$('#tree1').tree" code line Refer this eg http://mbraak.github.com/jqTree/ the same code works on other page but it contains only 1.jqtree.css 2.div id=tree1 div 3\. and three jquery file jquery-1.8.0.js, tree.jquery.js and prism.js 4\. contains the fumction code written in script tag below <title>Ksa Maps</title> <link href="../Css/Site.css" rel="stylesheet" type="text/css"> <link href="../Css/advancedtable.css" rel="stylesheet" type="text/css"> <link href="../Css/AdvTblStyle.css" rel="stylesheet" type="text/css"> <link href="../Css/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css"> <link href="../Css/CityFilter.css" rel="stylesheet" type="text/css"> <link href="../Css/ddsmoothmenu.css" rel="stylesheet" type="text/css"> <link href="../Css/dcmegamenu.css" rel="stylesheet" type="text/css"> <link href="../Js/autoCombo/tryy.css" rel="stylesheet" type="text/css"> <link href="../Js/autoCombo/demos.css" rel="stylesheet" type="text/css"> <link href="menu.css" rel="stylesheet" type="text/css"> <link href="../jquery.confirm/jquery.confirm.css" rel="stylesheet" type="text/css">  <link href="../Css/jqtree.css" rel="stylesheet" type="text/css">   Change code of onTouchEvent to int color = button1.getCurrentTextColor(); int r = (color) & 0xFF; int g = (color >> 8) & 0xFF; int b = (color >> 16) & 0xFF; int a = (color >> 24) & 0xFF; button1.setTextColor(Color.argb(DOWN_Alpha, r, g, b)); javascriptjqueryjquery-uijquery-pluginscoffeescript 4 1 回答 1 This answer is useful 2 移动你的实际tree.jquery.js  实际上，看起来您包含了很多jQuery。你需要删除很多。 于 2012-11-22T07:41:40.357 回答 Related 0 java - 模拟器不显示任何图片。SurfaceView 安卓 3 java - 如何在Android中解析复杂的json响应 1 unity3d - 玩家移动的坡度限制 5 ruby - Ruby Hash.new 怪异 2 java - struts 2中的单元测试：无法继承受保护的变量 4 php - 从对象传递变量数组 2 c++ - CGRectMake（或其他 Make 函数）究竟做了什么？ 5 c# - 神秘的“对象引用未设置为对象实例” 3 javascript - _以“揭示模块模式”风格编写的 JSDoc'ing Javascript 文件的最佳实践？ 4 c# - 字符串中的递增字符 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13507846
> 
> 赞同：0
> 
> 时间：
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, coffeescript

****getting this error "Uncaught TypeError: Object # has no method 'tree' " at this "$('#tree1').tree" code line Refer this eg [http://mbraak.github.com/jqTree/](http://mbraak.github.com/jqTree/) the same code works on other page but it contains only 1.jqtree.css 2.div id=tree1 div 3\. and three jquery file jquery-1.8.0.js, tree.jquery.js and prism.js 4\. contains the fumction code written in script tag below

* * *

```
<head>
    <title>Ksa Maps</title>
    <link href="../Css/Site.css" rel="stylesheet" type="text/css" />   
    <link href="../Css/advancedtable.css" rel="stylesheet" type="text/css" />
    <link href="../Css/AdvTblStyle.css" rel="stylesheet" type="text/css" />
    <link href="../Css/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css" /> 
    <link href="../Css/CityFilter.css" rel="stylesheet" type="text/css" />
    <link href="../Css/ddsmoothmenu.css" rel="stylesheet" type="text/css" />
    <link href="../Css/dcmegamenu.css" rel="stylesheet" type="text/css" />
    <link href="../Js/autoCombo/tryy.css" rel="stylesheet" type="text/css" />
    <link href="../Js/autoCombo/demos.css" rel="stylesheet" type="text/css" />
    <link href="menu.css" rel="stylesheet" type="text/css" />
    <link href="../jquery.confirm/jquery.confirm.css" rel="stylesheet" type="text/css" />
       <!--  Tree-->
      <link href="../Css/jqtree.css" rel="stylesheet" type="text/css" />   
     <!--<link href='http://fonts.googleapis.com/css?family=Corben:bold&amp;v1' rel='stylesheet' type='text/css'>-->
     <!--  Tree-->

</head>
<body>
 <div id="tree1"></div>  
    <script src="../Js/autoCombo/jquery-1.8.0.js" type="text/javascript"></script>
    <!-- tree  --> 
    <script src="../Js/prism.js" type="text/javascript"></script>
    <script src="../Js/tree.jquery.js" type="text/javascript"></script>
   <!-- tree  --> 
    <script src="../Js/autoCombo/jquery.ui.core.js" type="text/javascript"></script>
    <script src="../Js/autoCombo/jquery.ui.autocomplete.js" type="text/javascript"></script>
    <script src="../Js/autoCombo/jquery.ui.button.js" type="text/javascript"></script>
    <script src="../Js/autoCombo/jquery.ui.position.js" type="text/javascript"></script>
    <script src="../Js/autoCombo/jquery.ui.widget.js" type="text/javascript"></script>  
    <script src="../Js/JQuery.js" type="text/javascript"></script>
    <script src="../Js/jquery-1.4.2.min.js" type="text/javascript"></script>
    <script src="../Js/picnet.table.filter.min.js" type="text/javascript"></script>     
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?v=3.9&sensor=true"></script>
    <script src="../Js/jquery-ui-1.8.22.custom.min.js" type="text/javascript"></script>
    <script src="../Js/advancedtable.js" type="text/javascript"></script>  
    <script src="../Js/ddsmoothmenu.js" type="text/javascript"></script>
    <script src="../Js/poiScript.js" type="text/javascript"></script>
    <script src="../Js/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
    <script src="../Js/jquery.dcmegamenu.1.3.3.min.js" type="text/javascript"></script>
    <script src="../Js/jquery.hoverIntent.minified.js" type="text/javascript"></script>
    <script src="../Js/jquery.dcmegamenu.1.3.3.js" type="text/javascript"></script>
    <script src="../Js/menu.js" type="text/javascript"></script>
    <script src="../Js/autoCombo/TRYY.js" type="text/javascript"></script>
    <script src="../jquery.confirm/jquery.confirm.js" type="text/javascript"></script> 
    <script>
       $(function() {
           var data = [
            {
                label: 'node1',
                children: [
                    { label: 'child1' },
                    { label: 'child2' }
                ]
            },
            {
                label: 'node2',
                children: [
                    { label: 'child3' }
                ]
            }
        ];
           $('#tree1').tree({
               data: data,
               autoOpen: true,
               dragAndDrop: true
           });
       });
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:41:40.357

移动你的实际`tree.jquery.js` `<script>` **后**`jquery.js` `<script>`：

```
 <div id="tree1"></div>  
    <script src="../Js/autoCombo/jquery-1.8.0.js" type="text/javascript"></script>
    <script src="../Js/autoCombo/jquery.ui.core.js" type="text/javascript"></script>
    <script src="../Js/autoCombo/jquery.ui.autocomplete.js" type="text/javascript"></script>
    <script src="../Js/autoCombo/jquery.ui.button.js" type="text/javascript"></script>
    <script src="../Js/autoCombo/jquery.ui.position.js" type="text/javascript"></script>
    <script src="../Js/autoCombo/jquery.ui.widget.js" type="text/javascript"></script>  
    <script src="../Js/JQuery.js" type="text/javascript"></script>
    <script src="../Js/jquery-1.4.2.min.js" type="text/javascript"></script>
    <script src="../Js/picnet.table.filter.min.js" type="text/javascript"></script>     
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?v=3.9&sensor=true"></script>
    <script src="../Js/jquery-ui-1.8.22.custom.min.js" type="text/javascript"></script>
    <script src="../Js/advancedtable.js" type="text/javascript"></script>  
    <script src="../Js/ddsmoothmenu.js" type="text/javascript"></script>
    <script src="../Js/poiScript.js" type="text/javascript"></script>
    <script src="../Js/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
    <script src="../Js/jquery.dcmegamenu.1.3.3.min.js" type="text/javascript"></script>
    <script src="../Js/jquery.hoverIntent.minified.js" type="text/javascript"></script>
    <script src="../Js/jquery.dcmegamenu.1.3.3.js" type="text/javascript"></script>
    <script src="../Js/menu.js" type="text/javascript"></script>
    <script src="../Js/autoCombo/TRYY.js" type="text/javascript"></script>
    <script src="../jquery.confirm/jquery.confirm.js" type="text/javascript"></script>
    <!-- tree  --> 
    <script src="../Js/prism.js" type="text/javascript"></script>
    <script src="../Js/tree.jquery.js" type="text/javascript"></script>
   <!-- tree  --> 
```

实际上，看起来您包含*了很多*jQuery。你需要删除很多。

# php - How to update browser cache from PHP?

> ID：13507848
> 
> 赞同：0
> 
> 时间：2012-11-22T07:37:48.873
> 
> 标签：php, html, caching, optimization

I have a PHP file **get_css.php** which generates CSS code more than 60 KB long. This code does not change very often. I want this code to be cached in user's browser. Now, when i visit a HTML page several times which includes **get_css.php** url to fetch css, my browser is loading all CSS contents from the server each time i visit the page.

Browsers should get the contents from server only if the CSS code is changed on server side. If the css code is not changed, browser will use the css code from the browser cache. I cannot use any PHP function which is not allowed in Server Safe Mode.

Is it possible? How can i achieve this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:35:18.977

您无法通过 PHP 控制浏览器行为，但您可以使用 HTTP 代码告诉浏览器一些事情。

如果 CSS 没有改变，只需回复一个`304 Not Modified`响应代码：

```
if ($css_has_not_changed && $browser_has_a_copy) {
    http_response_code(304);
} else {
    // regenerate CSS
} 
```

这样，浏览器*会*请求文档（您无法控制），但您告诉他使用缓存的副本。

当然，这需要测试，因为我现在知道它在“第一次”浏览器请求文件时如何工作（也许请求标头可以告诉你更多信息）。一个快速的萤火虫测试表明，Firefox`Cache-Control: no-cache`在请求新副本时请求，并且`Cache-Control: max-age=0`当它有缓存时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:54:31.317

您不能如此轻易地强制客户端重新验证其缓存。

将变量查询字符串设置为其资源不会很好地与代理一起使用，但对于浏览器来说似乎就足够了。如果查询字符串发生更改，浏览器确实倾向于仅重新下载 css 文件。

```
 <link rel="stylesheet" type="text/css" href="/get_css.php?v=1.2.3"> 
```

潜在地，您可以使用 CSS 的命名，例如添加数字，但这不是一个很好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T07:40:00.010

当你像这样包含 get_css.php 时添加普通的 GET 参数

```
<link rel="stylesheet" type="text/css" href="get_css.php?v=1"> 
```

浏览器会认为它是新链接并再次加载它。

并在 get_css.php 中使用它**来制作浏览器缓存数据**

```
<?php
header("Content-type: text/css");
header('Cache-Control: public');
header('Expires: ' . gmdate('D, d M Y H:i:s', strtotime('+1 year')) . ' GMT');
ob_start("ob_gzhandler");

//echo css here 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-22T15:29:33.507

默认情况下，浏览器希望缓存您的文档，但您必须为其提供足够的信息才能使其成为可能。一种相当简单的方法是发送`Last-Modified`标题，其中包含上次更改脚本的日期/时间。您还需要正确处理浏览器的“重新验证”请求，方法是检查传入`Last-Modified`日期，将其与脚本的实际修改日期进行比较`304 Not Modified`，如果文件未更改，则返回响应（带有空响应正文）。

确保您的服务器不会“神奇地”发送任何其他“无缓存”指令也是一个好主意。最简单的方法是发送一个`Cache-Control`指令，告诉浏览器你期望什么行为。

[以下](http://palizine.plynt.com/issues/2008Jul/cache-control-attributes/)是每个`Cache-Control`选项的快速说明。

像下面这样的东西应该可以解决问题：

```
<?php
// this must be at the top of your file, no content can be output before it

$modified = filemtime(__FILE__);
if(isset($_SERVER['HTTP_IF_MODIFIED_SINCE'])) {
  $if_modified_since=strtotime($_SERVER["HTTP_IF_MODIFIED_SINCE"]);
  if( $modified > $if_modified_since ) {
    header('HTTP/1.0 304 Not Modified');
    exit();
  }
}
header('Cache-Control: must-revalidate');
header('Last-Modified: '.date("r",$modified));

// ... and the rest of your file goes here... 
```

上面的示例很大程度上基于示例，并且[可以在此处找到](http://www.justsoftwaresolutions.co.uk/webdesign/provide-last-modified-headers-and-handle-if-modified-since-in-php.html)文章。

# php - how to delete row items and fadeout in ajax jquery

> ID：13507851
> 
> 赞同：0
> 
> 时间：2012-11-22T07:37:58.497
> 
> 标签：php, jquery, ajax

i am facing another issue. i want to delete row via ajax and fadeout.

i have write below code. this is successfully deleted the row but do not fadeout.

```
var parent = $(this).parent().parent();
$.ajax({
                       type: "POST",
                       url: "delete_order.php",
                       data: "id="+id,
                       success: function(){
                       row.find("td").fadeOut(1000, function(){ $(this).parent().remove();});

               }

     });
     return false; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:42:05.217

你为什么不淡出行本身？

```
row.fadeOut(1000, function() {
    $(this).remove();
});​ 
```

小提琴 - [http://jsfiddle.net/J79Ww/](http://jsfiddle.net/J79Ww/)

# facebook - 脸书游戏政策变更

> ID：13507852
> 
> 赞同：3
> 
> 时间：2012-11-22T07:38:05.080
> 
> 标签：facebook, policy

> **可能重复：**
> [Facebook 表示我的应用程序将受到重大更改的影响](https://stackoverflow.com/questions/13587728/facebook-says-my-app-will-be-impacted-by-breaking-changes)

由于将于 12 月 5 日更改的政策变更（[https://developers.facebook.com/blog/post/2012/09/05/platform-updates--operation-developer-love/](https://developers.facebook.com/blog/post/2012/09/05/platform-updates--operation-developer-love/)）我已收到通知从 facebook 发出以下警报：

您主要在 Facebook 之外托管的桌面网络游戏目前在进行身份验证和/或请求年龄、电子邮件和发布权限之外的其他权限时访问用户连接。Facebook 平台政策 I.13a 不再允许这样做：

我不知道我在做什么我不应该做的。我在 facebook (apps.facebook.com/...) 上运行一个应用程序，那么我的应用程序如何“主要在 Facebook.com 之外托管”？

所以我有2个问题。我如何确保我的应用程序现在是最新的。邮件中的信息非常有限，所以我只能猜测我做错了什么。其次：有什么方法可以测试我的应用程序现在还可以吗，因为 facebook 将在 12 月 5 日对其进行限制

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T22:17:20.190

您在 Facebook 上的应用（又名 Canvas 应用）是否在 apps.facebook.com 提供的 iframe 中实现了 iframe？

Facebook 提供的 iframe 具有 id="iframe_canvas"。

如果您在id="iframe_canvas" 的 FB iframe 中实现自己的 iframe，那么您可能会收到此*消息*。

您的选择是删除您的 iframe，或者确保您从 FB iframe（而不是您的 iframe）发起所有 API 调用。

# xpages - 根据客户端值更改 eventHandlers refreshMode？

> ID：13507853
> 
> 赞同：0
> 
> 时间：2012-11-22T07:38:05.627
> 
> 标签：xpages, lotus-domino, xpages-ssjs

我在顶部有一个提交按钮，通常用于对表单进行部分刷新。

当我添加了一个不会到期的 fileUpload 控件时，因为我需要进行完全刷新。但我只希望在用户添加要上传的文件时发生这种情况。因此，如果文件 Upload 为空，我想使用 partialRefresh 提交。

我可以检查一个文件是否足够容易地添加，我可以有两个具有不同刷新模式的按钮并使用 JS 隐藏它们，但这是一个笨重的解决方案。

我想做的是根据当前表单中的提交值更改提交按钮上的刷新模式。

有任何想法吗？

谢谢！

/J

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T07:57:06.440

您可以通过向按钮添加第二个事件处理程序来做到这一点：一个事件处理程序用于完全刷新，另一个用于部分刷新。

```
<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core">

   <xp:div id="divRefresh">
      <xp:label value="#{javascript:java.lang.System.currentTimeMillis()}" id="label1" />
      <xp:label value="#{javascript:java.lang.System.currentTimeMillis()}" id="label2" />
   </xp:div>

   <xp:br></xp:br>

   <xp:button value="Refresh" id="button1">
      <xp:eventHandler event="onclick" submit="true"
         refreshMode="complete">
            <xp:this.script>
               <![CDATA[alert("Complete!"); return false;]]>
            </xp:this.script>
      </xp:eventHandler>
      <xp:eventHandler event="onclick" submit="true"
         refreshMode="partial" refreshId="label2">
            <xp:this.script>
               <![CDATA[alert("Partial!");return true;]]>
            </xp:this.script>
      </xp:eventHandler>
   </xp:button> 

</xp:view> 
```

事件中的 CSJS 代码必须返回 false 才能停止事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T08:21:24.927

我在发布新的流内容时在[http://www.intrapages.com中执行此操作。](http://www.intrapages.com)

在上传控件的 onchange 事件中，我设置了一个 requestScope 变量。如果已设置，我将执行完全刷新。效果很好

![在此处输入图像描述](../Images/7e9396313e0ed705351c3803575644d5.png)

# ios - XCode 耗尽内存

> ID：13507866
> 
> 赞同：1
> 
> 时间：2012-11-22T07:39:14.237
> 
> 标签：ios, xcode, performance, memory, viewcontroller

我正在为 iPhone 开发一个应用程序，但它正在耗尽内存，以至于每个字母添加文本大约需要 2 秒。我的故事板上共有 97 个视图控制器，每个视图控制器有 54 个 .h 和 .m 视图控制器文件。我确实为故事板中的不同视图重用了一些 .h 和 .m 文件。当我将最后 4 个视图控制器添加到情节提要时，问题就开始了。没有文本/按钮....在它们中，我的物理内存从（总共 4gb）2,04gb 变为 9,7mb。删除 4 个视图可以恢复内存并且一切正常，添加它们时我遇到了问题。该应用程序在模拟器和设备上运行良好，没有任何问题。我已经卸载了 XCode 并重新安装了 - 同样的问题。请指教。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:47:16.283

无需卸载 XCode，问题肯定出在您的代码中！97 视图控制器？检查您的代码和垃圾收集。执行 Xcode 内存测试以定位正在消耗内存的内容！

[跟踪内存泄漏](http://www.streamingcolour.com/blog/tutorials/tracking-iphone-memory-leaks/)

[如何在 Xcode 教程中调试内存泄漏](http://www.raywenderlich.com/2696/how-to-debug-memory-leaks-with-xcode-and-instruments-tutorial)

[Objective C 内存管理解释](http://interfacelab.com/objective-c-memory-management-for-lazy-people/)

# java - 在缓冲图像上的JPanel上用鼠标绘制不重叠的n面多边形、圆形和椭圆

> ID：13507867
> 
> 赞同：0
> 
> 时间：2012-11-22T07:39:17.700
> 
> 标签：java, swing, jpanel, mouselistener, polygons

我想要一个 Java swing 程序来用鼠标绘制不重叠的 n 边多边形、圆形和椭圆。

在用户创建之前，多边形不应添加最后一个点和第一个点本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T09:26:43.140

这是一个非常基本的例子

![在此处输入图像描述](../Images/df0b73af04e8290a9e367afb482aaf9a.png)

```
 public class DrawPolygon {

      public static void main(String[] args) {
           new DrawPolygon();
      }

      public DrawPolygon() {
           EventQueue.invokeLater(new Runnable() {
                @Override
                public void run() {
                     try {
                          UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                     } catch (ClassNotFoundException ex) {
                     } catch (InstantiationException ex) {
                     } catch (IllegalAccessException ex) {
                     } catch (UnsupportedLookAndFeelException ex) {
                     }

                     JFrame frame = new JFrame("Test");
                     frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                     frame.setLayout(new BorderLayout());
                     frame.add(new PolyPane());
                     frame.pack();
                     frame.setLocationRelativeTo(null);
                     frame.setVisible(true);
                }

           });
      }

      public static class PolyPane extends JPanel {

           private MouseHandler mouseHandler;
           private Path2D currentShape;
           private List<Path2D> lstPloys;
           private Point lastPoint;
           private Point currentPoint;

           public PolyPane() {
                lstPloys = new ArrayList<>();
           }

           @Override
           public Dimension getPreferredSize() {
                return new Dimension(200, 200);
           }

           @Override
           public void addNotify() {
                super.addNotify();
                addMouseListener(getMouseHandler());
                addMouseMotionListener(getMouseHandler());
           }

           @Override
           public void removeNotify() {
                removeMouseListener(getMouseHandler());
                removeMouseMotionListener(getMouseHandler());
                super.removeNotify();
           }

           public MouseHandler getMouseHandler() {
                if (mouseHandler == null) {
                     mouseHandler = new MouseHandler();
                }
                return mouseHandler;
           }

           @Override
           protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                Graphics2D g2d = (Graphics2D) g.create();
                if (lastPoint != null) {
                     g2d.setColor(Color.RED);
                     g2d.fillOval(lastPoint.x - 2, lastPoint.y - 2, 4, 4);
                }
                if (currentShape != null) {
                     g2d.setColor(Color.RED);
                     g2d.draw(currentShape);
                     if (lastPoint != null && currentPoint != null) {
                          System.out.println(lastPoint + " - " + currentPoint);
                          g2d.setColor(new Color(255, 0, 0, 64));
                          g2d.draw(new Line2D.Float(lastPoint, currentPoint));
                     }
                }
                g2d.setColor(Color.BLACK);
                for (Shape shape : lstPloys) {
                     g2d.draw(shape);
                }
                g2d.dispose();
           }

           public class MouseHandler extends MouseAdapter {

                @Override
                public void mouseClicked(MouseEvent e) {
                     if (e.getButton() == MouseEvent.BUTTON1) {
                          if (e.getClickCount() == 1) {
                               Point p = e.getPoint();
                               lastPoint = p;
                               if (currentShape == null) {
                                    currentShape = new Path2D.Float();
                                    currentShape.moveTo(p.x, p.y);
                               } else {
                                    currentShape.lineTo(p.x, p.y);
                               }
                               repaint();
                          } else if (e.getClickCount() == 2) {
                               currentShape.closePath();
                               lstPloys.add(currentShape);
                               currentShape = null;
                               lastPoint = null;
                               repaint();
                          }
                     }
                }

                @Override
                public void mouseMoved(MouseEvent e) {
                     if (currentShape != null) {
                          currentPoint = e.getPoint();
                          repaint();
                     } else {
                          currentPoint = null;
                     }
                }

           }

      }

 } 
```

你会想花时间通读

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [2D 图形](http://docs.oracle.com/javase/tutorial/2d/index.html)

因为这些将涵盖实现您想要做的事情所需了解的基础知识。

**更新**

我更新了示例，包括使用`MosueMotionListener`

# c++ - wcslen 或 strlen 应该防止无限循环吗？

> ID：13507869
> 
> 赞同：0
> 
> 时间：2012-11-22T07:39:19.603
> 
> 标签：c++, string, string-length

此函数计算字符串请求和终止空字符之间的字符数。

```
size_t wcslen(const wchar_t* sz)
{
    size_t l = 0;
    while (*sz++) ++l;
    return l;
} 
```

现在，如果没有终止空字符，这个函数应该检测到还是没有？他们如何检测？循环是否有限制，并且确实不是无限的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T07:44:07.617

该函数在第一个 0 值处停止，如果 sz 参数末尾没有带 0 的 wchar_t，它将继续在内存的其余部分中，直到达到 0 值

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T08:37:43.967

以及如何做到这一点的功能？长度的定义是“直到终止的 nul 字符”。该函数的“更安全”版本可能需要额外的最大长度，这将对应于保存数据的缓冲区的长度。但是在 C 中使用 nul 终止的字符串是通用的，而且大多数时候，如果你调用这个函数，那是因为调用你的函数只给了你一个指针，你不知道缓冲区的实际长度.

在实践中，如果输入没有终止 nul 字符，您将获得缓冲区溢出，读取超出缓冲区末尾的内存。这样做时，迟早你会遇到一个包含 0 的字节，并认为这是你的字符串的结尾，或者你最终会得到一个没有映射到你的进程的地址，并且你会崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T07:41:54.367

如果字符串没有空终止符，则行为未定义。你不能说你会得到什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T07:42:00.637

好吧，合同是你提供一个以 NUL 结尾的字符串。如果你不这样做，所有的赌注都会被取消，并且函数的行为是未定义的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T07:44:41.217

如果没有空终止符（尽管我无法想象内存空间都充满了没有任何零的垃圾），那么最终`sz`会溢出，之后您将尝试取消对 NULL 的引用，这会给您带来异常。

# shell - 如何将awk中字段的值提取为变量

> ID：13507880
> 
> 赞同：0
> 
> 时间：2012-11-22T07:40:07.217
> 
> 标签：shell, awk

我有一个使用几乎相同代码的脚本，如下所示：

```
almsource=`awk -F# '{print $5}' test.csv`
for var in ${almsource[@]}
do
    ...
done

almSev=`awk -F# '{print $3}' test.csv`
for var in ${almSev[@]}
do
    ...
done 
```

...由于大多数代码都是相同的，除了`awk -F# '{print $3}'`. 我想写一个函数，因为提取 `awk -F# '{print $3}' as varaible. Below is my function, but it seems` awk -F# '{print ${$varNum}}' 中的字段值不正确。

```
getFieldGrp()
{
#getFieldGrp <fieldVar> 
varNum=$1
almfield=`awk -F# '{print ${$varNum}}' test.csv`
...
done 
```

}

有人可以帮我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:05:45.287

您需要首先将 shell 变量传递给`awk`并使用数组来保存所有值。试试这个：

```
array=($(awk -F "#" -v num="$1" '{ print $num }' test.csv)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T11:59:27.663

不需要 awk

```
getFieldGrp() { cut -d '#' -f $1 test.csv; }

for word in $(getFieldGrp 5); do ... 
```

# haxe - Haxe 中的 Java Scanner 类的等价物

> ID：13507881
> 
> 赞同：1
> 
> 时间：2012-11-22T07:40:08.200
> 
> 标签：haxe

在 Haxe 编程语言中，是否有任何等效于 Java 的扫描仪类（从命令行读取输入？）我想找到一些从命令行读取文本输入的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:36:25.140

`Sys.stdin().readLine()`就是你要找的。

[这是来自http://haxe.org/doc/start/neko#reading-user-input](http://haxe.org/doc/start/neko#reading-user-input)的示例：

```
class Main {
    static function main() {
        Sys.println("What's your name?");
        var input = Sys.stdin().readLine();
        Sys.println(Std.format("Hello ${input}"));
        Sys.exit(0);
    }
} 
```

# facebook - 如何限制 Fb 分享上的缩略图？

> ID：13507882
> 
> 赞同：4
> 
> 时间：2012-11-22T07:40:16.517
> 
> 标签：facebook, share

我正在开发一个 wp 博客网站。目前*根本不*使用 og 标签。

我使用社交分享工具包插件来允许访问者在 Facebook 上分享文章。

**问题：** 当FB分享框弹出时，页面上的所有图片都显示为缩略图选项，与文章信息一起发布。在某些情况下，有时超过 20 个。

如何在可用的缩略图选项中指定仅显示 1 个图像？

我想这样做是为了避免访问者选择无意义的图像（例如页面广告图像或布局组件）？

我尝试`rel="image_src"`按照建议使用，但没有任何区别。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-03T18:35:25.597

这对我有用：我发现即使使用 OG 元标签 Facebook Share 插件也可能会显示我页面上的各种缩略图，包括各种不需要的图像。为了解决这个问题，我在标签之后添加了想要的小尺寸图像：

```
<img src="image_wanted_as_thumbnail.whatever" style="width:1px;height:1px;"> 
```

但我也总是使用 OG 元标记。

# unix - grep vs cat 和 grep 的区别

> ID：13507889
> 
> 赞同：21
> 
> 时间：2012-11-22T07:40:58.687
> 
> 标签：unix

我想知道以下 2 个命令之间的区别，我知道应该使用 2)，但我想知道 1) 和 2) 中发生的确切顺序，假设文件名中有 200 个字符

1) 猫文件名 | grep 正则表达式

2) grep 正则表达式文件名

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-22T07:53:23.327

在功能上（就输出而言），这两者是相同的。第一个实际上创建了一个单独的进程`cat`，它只是将文件的内容发送到标准输出，标准输出显示在`grep`.

在这个意义`grep regex <filename`上也是等价的，但过程少了一个。

当额外信息（文件名）由 使用时，您将开始看到不同之处在于变体，*例如*`grep`：

```
grep -n regex filename1 filename2 
```

那和之间的区别：

```
cat filename1 filename2 | grep -n regex 
```

是前者*知道*单个文件，而后者将其视为*一个*文件（没有名称）。

而前者可能会给你：

```
filename1:7:line with regex in 10-line file
filename2:2:another regex line 
```

后者将更像：

```
7:line with regex in 10-line file
12:another regex line 
```

* * *

如果知道文件名，则另一个行为不同的可执行文件是`wc`，单词计数器程序：

```
$ cat qq.in
1
2
3

$ wc -l qq.in           # knows file so prints it
3 qq.in

$ cat qq.in | wc -l     # does not know file
3

$ wc -l <qq.in          # also does not know file
3 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T07:45:34.810

第一：

```
cat filename | grep regex 
```

通常 cat 打开文件并将其内容逐行打印到标准输出。但是在这里它将其内容输出到管道'|'。之后 grep 从管道读取（它将管道作为标准输入）然后如果匹配正则表达式将行打印到标准输出。但是这里有一个详细的 grep 在新的 shell 进程中打开，因此管道将其输入作为输出转发到新的 shell 进程。

第二个：

```
grep regex filename 
```

这里 grep 直接从文件读取（上面是从管道读取）并匹配正则表达式，如果匹配打印行到标准输出。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-22T07:57:42.713

如果要检查实际执行时间差异，首先创建一个 100000 行的文件：

```
user@server ~ $ for i in $(seq 1 100000); do echo line${1} >> test_f; done
user@server ~ $ wc -l test_f
100000 test_f 
```

现在测量：

```
user@server ~ $ time grep line test_f
#...
real    0m1.320s
user    0m0.101s
sys     0m0.122s

user@server ~ $  time cat test_f | grep line
#... 
real    0m1.288s
user    0m0.132s
sys     0m0.108s 
```

正如我们所看到的，差异不是太大......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-13T01:27:09.707

实际上，尽管输出是相同的；

```
-$cat filename | grep regex 
```

该命令查找文件“filename”的内容，然后获取其中的正则表达式；尽管

```
-$grep regex filename 
```

该命令直接在文件“filename”中搜索名为regex的内容

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-22T07:45:24.463

在功能上它们是等价的，但是，shell 将分叉两个进程`cat filename | grep regex`并用管道连接它们。

# macos - 在 Mac OS X 10.8 中不推荐使用 TickCount()

> ID：13507895
> 
> 赞同：1
> 
> 时间：2012-11-22T07:41:27.640
> 
> 标签：macos, osx-mountain-lion, deprecated

我`TickCount()`用来确定事件之间的时间差或运行某段代码所需的时间。但它在 OS X 10.8中已被[弃用。](http://developer.apple.com/legacy/mac/library/documentation/Carbon/Reference/Memory_Manag_nt_Utilities/Memory_Manag_nt_Utilities.pdf)因此，我需要一个替代方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:44:50.233

1.  如果要测量绝对时间，请使用`gettimeofday()`. 这会为您提供日期，例如“Thu Nov 22 07:48:52 UTC 2012”。这并不总是适合测量事件之间的差异，因为`gettimeofday()`如果用户更改时钟，则报告的时间可能会向前或向后跳跃。

2.  如果要测量相对时间，`mach_absolute_time()`. 这使您可以测量两个事件之间的差异，例如“15.410 s”。这不会给出绝对时间，但总是单调的。

3.  如果要测量 CPU 时间，请使用`clock()`. 这*通常*但并不总是您衡量一段代码性能的方式。它不计算花费在 IO 上的时间或对系统速度的影响，因此只有在您知道您正在测量 CPU 限制的东西时才应该使用它。

我很惊讶它`TickCount()`之前没有被弃用。这确实是 OS 9 和更早版本的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-12T19:34:22.437

虽然此 API 可能不适合新开发，但如果您发现自己需要相同的 API，可以按如下方式重新实现：

```
uint32_t TickCount() {
    uint64_t mat = mach_absolute_time();
    uint32_t mul = 0x80d9594e;
    return ((((0xffffffff & mat) * mul) >> 32) + (mat >> 32) * mul) >> 23;
} 
```

上述实现是通过对 的分析创建的`/System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore`，并`TickCount`通过更改`mach_absolute_time`.

# c# - 如何从 Visual Studio 2012 项目降级到 Visual Studio 2008

> ID：13507901
> 
> 赞同：21
> 
> 时间：2012-11-22T07:41:43.820
> 
> 标签：c#, visual-studio

我正在使用 C# Windows 应用程序。我最近将 Visual Studio 2008 项目转换为新的 Visual Studio 2012 项目。现在我必须将此项目降级到 Visual Studio 2008 。有没有办法降级这个项目？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-22T07:52:06.200

2012 年与 2010 年兼容，我不确定这是否可行，但我发现了如何从 2010 年回到 2008 年，希望它适用于 2012 年（[原始链接](http://www.geeks-in-gis.com/2012/09/downgrading-visual-studio-2010-project-to-2008/)）：

> 1.  备份您的 .sln 文件
>     
>     
> 2.  在记事本中打开 VS 2010 .sln。
>     
>     
>     
>     它应该看起来像这样：
>     
>     
>     
>     ```
>     Microsoft Visual Studio Solution File, Format Version 11.00 
>     # Visual Studio 2010  Project("{FAE04EC0-3 ...... 
>     ```
>     
>     
> 3.  将 11.0 版更改为 10.0 版，将 Visual Studio 2010 更改为 2008
>     
>     
>     
>     它应该看起来像这样：
>     
>     
>     
>     ```
>     Microsoft Visual Studio Solution File, Format Version 10.00 
>     # Visual Studio 2008  Project("{FAE04EC0-3 ..... 
>     ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-22T07:44:58.987

[Visual Studio 项目转换器](http://vsprojectconverter.codeplex.com/)？

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-12-05T12:49:50.493

除了提供的解决方案是正确的之外，我还要补充一点，您需要确保App.config文件中没有与此类似的代码，否则无论您做什么，您都无法运行项目：

`<startup> <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/> </startup>`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-22T08:06:35.790

在 Visual Studio 2012 中，将所有项目更改为面向 .NET Framework 3.5。

在 Visual Studio 2008 中，创建一个空白解决方案，然后将所有 .csproj/vbproj 添加到其中。

无法将 .cxxproj Visual C++ 项目返回到 Visual Studio 2008。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-02-02T22:04:35.167

转到：项目属性->配置属性->常规->平台工具集。更改为不同的 Visual Studio 版本。

# windows - 如何从 Windows 命令行的任务列表输出中提取特定字段

> ID：13507902
> 
> 赞同：13
> 
> 时间：2012-11-22T07:41:51.433
> 
> 标签：windows, batch-file, command-line, cmd, tasklist

我在 windows 命令提示符下运行了以下命令

```
C:>tasklist /fi "Imagename eq BitTorrent.exe" 
```

其中的输出是

```
Image Name            PID      Session Name       Session #    Mem Usage
==================  ======== =================   ===========   =========
BitTorrent.exe        6164      Console                   3     24,144K 
```

我只需要从上面的输出中提取一个字段，即 PID，即数字 6164。

我该如何做到这一点？更一般地说，如何从 windows 命令行上的命令输出中提取字段的子集（1/更多）？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-22T16:33:53.987

与以前的答案类似，但使用特定的开关`tasklist`来跳过标题并正确运行，而与图像名称中的空格无关：

```
for /f "tokens=2 delims=," %F in ('tasklist /nh /fi "imagename eq BitTorrent.exe" /fo csv') do @echo %~F 
```

（直接从 cmd 行运行，如果从批量替换`%F`运行`%%F`

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-22T08:13:31.007

最简单的方法是使用 WMIC：

```
c:\>wmic process where caption="BitTorrent.exe" get  ProcessId 
```

*编辑：*由于 WMIC 不是Windows**家庭版的一部分：**

```
for /f "tokens=1,2 delims= " %A in ('tasklist /fi ^"Imagename eq cmd.exe^" ^| find ^"cmd^"') do echo %B 
```

这里使用了标题的 CMD。您可以在 find 和 tasklist 参数中更改它。如果这在批处理文件中使用，您将需要`%%B`并且`%%A`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-22T09:37:54.107

您可以使用 wmic 命令不过滤输出：

```
wmic process where name="BitTorrent.exe" get processid | MORE +1 
```

更新：另一种方式：

```
@Echo OFF
FOR /F "tokens=2" %%# in ('tasklist /fi "Imagename eq winamp.exe" ^| MORE +3') do (Echo %%#)
Pause&Exit 
```

PS：请记住，如果应用程序文件名包含空格，则需要正确设置标记。

# java - 如何在 RCP 应用程序中自动更新/加载/刷新视图

> ID：13507905
> 
> 赞同：0
> 
> 时间：2012-11-22T07:41:55.457
> 
> 标签：java, eclipse, eclipse-rcp

我正在开发一个 RCP 应用程序来捕获和显示 http 请求。该应用程序就像一个代理工具，但功能非常简单。到目前为止，我知道视图更改可能由某些事件触发：例如：选择。但我不知道如何使用自动更改的数据更新/加载/刷新视图。在这种情况下，数据应该是捕获的http请求。

你能给我一些见解吗？谢谢。

**更新** 一些好人告诉我们使用可观察模式来做到这一点。以下片段是我的代码。但它没有按预期工作。无法刷新用户界面。

```
IObservableList input = Properties.selfList(Sequence.class).observe(sequences); // Sequence stands for one request, sequences are a list of sequence.

    tableViewer.setContentProvider(new ContentProvider());
    tableViewer.setLabelProvider(new TableLabelProvider());
    tableViewer.setInput(input); 
```

约瑟夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:02:24.083

我推荐使用观察者模式。您的数据成为主题。每次更改数据时通知您的视图（观察者）刷新。

[http://en.wikipedia.org/wiki/Observer_pattern](http://en.wikipedia.org/wiki/Observer_pattern)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:25:53.313

如果您解析接收到的数据，请查看 Eclipse 数据绑定框架。

这个框架的想法是，您可以将来自数据模型表示（通常是 Bean 或 EMF）的值与用于显示数据的各种 SWT 控件绑定。然后，框架将在模型更改时自动更新小部件的内容（反之亦然，如果您允许它:-)）。

有关该框架的介绍，请参阅本[教程- 您可以在 Web 上找到大量示例和文档...](http://www.vogella.com/articles/EclipseDataBinding/article.html)

编辑：另请参阅[片段目录](http://wiki.eclipse.org/JFace_Data_Binding/Snippets)以了解常见问题的各种解决方案...

# asp.net - radgrid 在 2011.1.519.35 从客户端插入项目和编辑项目

> ID：13507912
> 
> 赞同：2
> 
> 时间：2012-11-22T07:42:26.453
> 
> 标签：asp.net, telerik, telerik-grid, radgrid, radgridview

您好我正在使用**Telerik 2011.1.519.35**版本

如何从客户端获取 radgrid 插入项目和编辑项目...我使用了以下方法...但这些方法在**2011.1.519.35版本中不起作用**

```
 function getTableViewInsertItem() {
    var masterTable = $find("<%= RadGrid1.ClientID %>").get_masterTableView();
    //gets the HTML object of the insert item opened in the current GridTableView
    var insertedItem = masterTable.get_insertItem();
    var editedItemsArray = masterTable.get_editItems();
} 
```

# python - 如何用scrapy同时发出两个请求

> ID：13507913
> 
> 赞同：0
> 
> 时间：2012-11-22T07:42:26.457
> 
> 标签：python, scrapy

我正在抓取第一页链接到所有工作的工作网站。现在我从第一页存储标题、工作、公司。

但我也想存储描述，可通过单击职位名称获得。我也想将它与当前项目一起存储。

这是我当前的代码

```
def parse(self, response):
    hxs = HtmlXPathSelector(response)
    sites = hxs.select("//div[@class='jobenteries']")
    items = []
    for site in sites[:3]:
        print "Hello"
        item = DmozItem()
        item['title'] = site.select('a/text()').extract()
        item['desc'] = ''
        items.append(item)
    return items 
```

但是该描述在下一页链接上。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T10:42:09.647

从第一页返回第二页的 Requests 并传递 request.meta 字典中每个项目的数据。在第二页的回调方法上，您可以读取您传递的数据并返回完全填充的项目。

有关更多详细信息和示例，请参阅在 scrapy 文档中将[附加数据传递给回调函数。](https://scrapy.readthedocs.org/en/latest/topics/request-response.html#passing-additional-data-to-callback-functions)

# python - 如何在 Python 字典中一一弹出大值？

> ID：13507914
> 
> 赞同：0
> 
> 时间：2012-11-22T07:42:27.623
> 
> 标签：python, dictionary

只留下值最小的键，我不能使用 `min()`函数。

移动 OP 从他的评论中尝试的代码：-

```
for i in key: 
    if dictionary[i]<dictionary[key]: 
        dictionary.pop(key) 
    elif dictionary[i]==dictionary[key]: 
        print (dictionary[i]) 
```

以及来自其他评论的代码：

```
dictionary={'A': 3, 'B': -2, 'C': -1, 'D': -3} 
for key in dictionary: 
    print ("Keys and values>", key,end= '') 
    print (dictionary[key]) 
    print (dictionary) 
    for i in key: 
        if dictionary[i]<dictionary[key]: 
            dictionary.pop(key) 
        elif dictionary[i]==dictionary[key]: 
            print ("The minimum is",dictionary[i]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:55:45.107

您可以使用 dict.items() 来获取最小功能。

```
my_dic = {...}
print min(my_dic.item(), key = lambda x: x[1])[0] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T07:52:29.477

你可以试试这个。它使用`any`函数将每个键的值与除其自身之外的所有其他值进行比较。如果`any`找到小于该值的值，则`key`弹出 。

```
>>> my_dict = {1: 2, 2: 3, 3: 4}
>>> for key, value in my_dict.items():
        if any(value > value1 for key1, value1 in my_dict.items() if key1 != key):
            my_dict.pop(key)

3
4
>>> my_dict
{1: 2} 
```

`any`如果传递给它`True`的至少一个值是 ，则函数返回。`list``True`

**例如： -**

```
any([0, 0, False, True])   # Will print True
any([0, 0, False, False])  # Will print False 
```

* * *

**更新 ： -**

如果您不想使用`any`函数，可以将`any`函数的 for 循环移到外面，并仅在该循环中进行测试：-

```
my_dict = {1: 2, 2: 3, 3: 4}

for key, value in my_dict.items():
    for key1, value1 in my_dict.items():

        if key1 != key and value > value1:
            my_dict.pop(key)

print my_dict 
```

# css - 在 IE 中增加一行高度时增加另一行的高度

> ID：13507918
> 
> 赞同：0
> 
> 时间：2012-11-22T07:42:41.717
> 
> 标签：css, internet-explorer

我正在使用表格来显示内容。表中有 3 行。在每一行（2 td）中，可以有多行内容。现在，它在 Mozila 中运行得非常好，当内容分布在超过 1 行时（它只会增加该特定行的高度），但在 IE8、IE9 中，它也会增加其他 tr 的高度。这是我的表格代码。

```
<table id="tbl_polls" style="border:none; width:100%">                                                                     
  <tbody>
      <tr>
         <td colspan="2" class="poll-q">
              POLL QUESTION    
         </td>               
      </tr>                 
       <tr>
            <td style="width:3%;float:left">                                    
                <input type="radio" style="margin: 2px 0 0 2px; display:inline-block" value="108" name="answer">&nbsp;
            </td>
            <td style="width:97%;float:left" >                                
                ANS 1: Carmont wins by retire
            </td>
      </tr>             
      <tr>
          <td style="width:3%;float:left" >                                 
            <input type="radio" style="margin: 2px 0 0 2px; display:inline-block" value="109" name="answer">&nbsp;
          </td>
          <td style="width:97%;float:left" >                                
            ANS 2: Carmont wins by decision                                
          </td>
     </tr>              
     <tr>
          <td style="width:3%;float:left" >                                 
            <input type="radio" style="margin: 2px 0 0 2px; display:inline-block" value="110" name="answer">&nbsp;
          </td>
          <td style="width:97%;float:left" >                                
            ANS 3: someone wins but i'm just not sure if i can make a specific decision as to what i think will happen exactly,this is longest answer and its spreads                   
          </td>
     </tr>              
    </tbody> 
```

编辑：我已经上传了。 [http://designs.digitaldreamstech.com/boldtiger/polls/](http://designs.digitaldreamstech.com/boldtiger/polls/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:01:11.017

请用这个替换你的代码，

```
<table id="tbl_polls" style="border:none; width:100%" cellpadding="5" cellspacing="5">
<tr>
    <td valign="center" colspan="2">
        POLL QUESTION    
    </td>
</tr>
<tr>
    <td>                                    
        <input type="radio" style="margin: 2px 0 0 2px; display:inline-block" value="108" name="answer">&nbsp;
    </td>
    <td>                                
        ANS 1: Carmont wins by retire
    </td>
  </tr>
  <tr>
      <td>                                 
        <input type="radio" style="margin: 2px 0 0 2px; display:inline-block" value="109" name="answer">&nbsp;
      </td>
      <td >                                
        ANS 2: Carmont wins by decision                                
      </td>
 </tr>
  <tr>
      <td>                                 
        <input type="radio" style="margin: 2px 0 0 2px; display:inline-block" value="110" name="answer">&nbsp;
      </td>
      <td>                                
        ANS 3: someone wins but i'm just not sure if i can make a specific decision as to what i think will happen exactly,this is longest answer and its spreads                   
      </td>
 </tr>
</table> 
```

现在请检查所有浏览器中的页面。它工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:04:27.963

首先，您对表格做了非常奇怪的事情，浮动表格单元格通常不是您最好的主意，并且可能会破坏至少 IE 和其他浏览器中的内容。而且表格通常不是设计表格的最佳方式。

我建议您的表格采用以下结构：

HTML：

```
<form>
    <fieldset>
        <div class="row">
            <input type="radio" value="109" name="answer" />
            <label for="input_1">ANS 2: Caromt wins by decision</label>
        </div>
    </fieldset>
</form> 
```

CSS：

```
div.row {
    clear: both;
}
label {
    float: left;
}
input {
    float: left;
    width: 350px;
} 
```

您可以在此处找到更多正确构建表单的方法：http: [//www.gethifi.com/blog/html-forms-the-right-ways](http://www.gethifi.com/blog/html-forms-the-right-ways)

# java - 在java中下载包含内联图像的电子邮件正文

> ID：13507922
> 
> 赞同：7
> 
> 时间：2012-11-22T07:43:19.677
> 
> 标签：java, email, inline-images

我的问题如下：

我有我的代码设置来阅读来自特定帐户的电子邮件。那部分工作得很好。

问题在于解析电子邮件。分离附件和电子邮件正文（包含内联图像）。

我的代码是这样的：

```
 Void readMessages(Folder folder){

          Message[] messages = folder.getMessages();
            // loading of message objects.
                for (int messageNumber = 0; messageNumber < messages.length; messageNumber++) {

             final Message currentMessage = messages[messageNumber];
                 logger.info("Handling the mail with subject " + currentMessage.getSubject());
                logger.info("Content type for the current message is " +                                  currentMessage.getContentType());
                final String messageFileName = currentMessage.getFileName();
                logger.info("File name for the message " + messageFileName + ". File name is blank "
                                                +                     StringUtils.isBlank(messageFileName));

                        Object messageContentObject = currentMessage.getContent();
                        if (messageContentObject instanceof Multipart) {
                            Multipart multipart = (Multipart) messageContentObject;

                            // downloading all attachments....
                            int attachmentCount = multipart.getCount();
                            logger.info("Number of attachments ");
                            for (int i = 0; i < attachmentCount; i++) {
                                Part part = (Part) multipart.getBodyPart(i);
                                downloadAttachment(part, folderPath.toString());
                            }

                        }

                    }
                }
            }
         private void downloadAttachment(Part part, String folderPath) throws Exception {
    String disPosition = part.getDisposition();
    String fileName = part.getFileName();
    String decodedText = null;
    logger.info("Disposition type :: " + disPosition);
    logger.info("Attached File Name :: " + fileName);

    if (disPosition != null && disPosition.equalsIgnoreCase(Part.ATTACHMENT)) {
        logger.info("DisPosition is ATTACHMENT type.");
        File file = new File(folderPath + File.separator + decodedText);
        file.getParentFile().mkdirs();
        saveEmailAttachment(file, part);
    } else if (fileName != null && disPosition == null) {
        logger.info("DisPosition is Null type but file name is valid.  Possibly inline attchment");
        File file = new File(folderPath + File.separator + decodedText);
        file.getParentFile().mkdirs();
        saveEmailAttachment(file, part);
    } else if (fileName == null && disPosition == null) {
        logger.info("DisPosition is Null type but file name is null. It is email body.");
        File file = new File(folderPath + File.separator + "mail.html");
        file.getParentFile().mkdirs();
        saveEmailAttachment(file, part);
    }

}
     protected int saveEmailAttachment(File saveFile, Part part) throws Exception {

    BufferedOutputStream bos = null;
    InputStream is = null;
    int ret = 0, count = 0;
    try {
        bos = new BufferedOutputStream(new FileOutputStream(saveFile));
        part.writeTo(new FileOutputStream(saveFile));

    } finally {
        try {
            if (bos != null) {
                bos.close();
            }
            if (is != null) {
                is.close();
            }
        } catch (IOException ioe) {
            logger.error("Error while closing the stream.", ioe);
        }
    }
    return count;
} 
```

我遇到的问题是，当我运行此代码时，我得到了一个 HTML 文件，但内联图像被错误图像的符号替换，这表明图像没有来源。

请帮我解决。让我知道是否需要更多信息。

我还尝试通过更改将正文保存为`.eml`文件：

```
 File file = new File(folderPath + File.separator + "mail.html"); 
```

到

```
 File file = new File(folderPath + File.separator + "mail.eml"); 
```

但是我得到了相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-04T17:55:43.260

对内联图像的引用被替换为`cid:`URN，例如`<img src="cid:SOMEID">`，因为电子邮件中没有文件名。SOMEID 是指多部分“对象”的 Content-ID。

为了让它工作，您必须将多部分附件存储到文件中（例如，临时名称）并用`cid`真实文件名替换 URN。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-11T07:01:22.477

我在下面编写了将电子邮件正文文本转换为 pdf 的代码，包括内联图像。在代码中，我用下载图像路径替换了图像代码（例如：cid:image001.jpg@01D17AAA.1EA2A6A0）。下载图像时，我正在为图像密钥和下载路径构建“哈希图”。

```
 HTMLWorker htmlWorker = new HTMLWorker(document);
            if(bodyStr!=null)
            {

                //find inline images
                inlineImages=downloadInLineImage(mostRecentMatch, dynamicOutputDirectory);
                if(inlineImages!=null)
                {

                    for (Map.Entry<String, String> entry : inlineImages.entrySet()) {
                        //System.out.println("Key = " + entry.getKey() + ", Value = " + entry.getValue());
                        bodyStr=bodyStr.replaceAll("cid:"+entry.getKey() , entry.getValue());
                    }
                }
                htmlWorker.parse(new StringReader(bodyStr));

        } 
```

下载带有传递项的内联图像。

```
 private HashMap<String,String> downloadInLineImage(Item item, String dynamicOutputDirectory)
        throws Exception, ServiceLocalException {
    //create output directory if not present

        //bind the item to a new email message. if you do not bind, then the getHasAttachments() function will fail
    EmailMessage mostRecentMatch = (EmailMessage)item;
    String from = mostRecentMatch.getFrom().getAddress();
    String user =StringUtils.substringBefore(from, "@");
    AttachmentCollection collection=item.getAttachments();

    HashMap<String,String> inlineFiles=new HashMap<String,String>();

    if(collection.getCount()>0)
    {
        for (Attachment attachment : collection.getItems()) {

            if(attachment.getIsInline())
            {

                FileAttachment currentFile = (FileAttachment) attachment;
                String filePath=dynamicOutputDirectory+"/"+user+currentFile.getName();
                File file=new File(filePath);
                FileOutputStream fio=new FileOutputStream(file);
                currentFile.load(fio);
                inlineFiles.put(currentFile.getContentId(), filePath);
                fio.close();
            }
        }
    } 
```

# algorithm - 具有重复的间隔数组的联合中的第 n 个最小元素

> ID：13507925
> 
> 赞同：5
> 
> 时间：2012-11-22T07:43:28.827
> 
> 标签：algorithm, methods

我想知道是否有比我想出的更有效的解决方案（尚未对其进行编码，但在底部描述了它的要点）。

编写一个函数 calcNthSmallest(n,intervals)，它将一个非负 int n 和一个区间列表 [[a_1; b_1]; : : : ; [是; b_m]] 并在将所有间隔与重复进行并集时计算第 n 个最小数字（从 0 开始）。例如，如果区间是 [1; 5]; [2; 4]; [7; 9]，它们与重复的结合将是[1; 2；2；3；3；4；4；5个；7; 8个；9]（注 2; 3; 4 各出现两次，因为它们都在区间 [1; 5] 和 [2; 4] 中）。对于这个区间列表，第 0 个最小的数字是 1，第 3 个和第 4 个最小的数字都是 3。即使 a_i; b_i 可以非常大（例如，一万亿），并且有几个区间

我想到的方法是直接的解决方案，即创建联合数组并遍历它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T17:01:05.650

这个问题可以在 O(N log N) 中解决，其中 N 是列表中的间隔数，而不考虑间隔端点的实际值。

有效解决此问题的关键是将可能重叠的区间列表转换为不相交或相同的区间列表。在给定的示例中，只需要拆分第一个区间：

```
{       [1,5],        [2,4], [7,9]} =>
 +-----------------+  +---+  +---+
{[1,1], [2,4], [5,5], [2,4], [7,9]} 
```

（不过，这不必明确地完成：见下文。）现在，我们可以对新间隔进行排序，用计数替换重复项。由此，我们可以计算每个（可能重复的）区间所代表的值的数量。现在，我们只需要累积这些值来确定解决方案位于哪个区间：

```
interval  count  size    values     cumulative
                       in interval    values
  [1,1]     1      1        1         [0, 1)
  [2,4]     2      3        6         [1, 7)  (eg. from n=1 to n=6 will be here)
  [5,5]     1      1        1         [7, 8)
  [7,9]     1      3        3         [8, 11) 
```

我将累积值写为半开区间的列表，但显然我们只需要端点。然后，我们可以通过例如对累积值列表进行二进制搜索来找到哪个区间包含值 n，我们可以通过从 n 中减去区间的开始然后除以数数。

应该清楚，上表的最大大小是原始间隔数的两倍，因为每一行都必须在原始列表中某个间隔的开始或结束处开始和结束。如果我们将区间写成半开而不是闭，这会更清楚；在这种情况下，我们可以断言表的精确大小将是端点集合中唯一值的数量。从这种洞察力中，我们可以看出我们根本不需要这张桌子。我们只需要排序的端点列表（尽管我们需要知道每个值代表哪个端点）。我们可以简单地遍历该列表，保持活动间隔数的计数，直到达到我们正在寻找的值。

这是一个快速的python实现。它可以改进。

```
def combineIntervals(intervals):
  # endpoints will map each endpoint to a count
  endpoints = {}
  # These two lists represent the start and (1+end) of each interval
  # Each start adds 1 to the count, and each limit subtracts 1
  for start in (i[0] for i in intervals):
    endpoints[start] = endpoints.setdefault(start, 0) + 1
  for limit in (i[1]+1 for i in intervals):
    endpoints[limit] = endpoints.setdefault(limit, 0) - 1
  # Filtering is a possibly premature optimization but it was easy
  return sorted(filter(lambda kv: kv[1] != 0,
                       endpoints.iteritems()))

def nthSmallestInIntervalList(n, intervals):
  limits = combineIntervals(intervals)
  cumulative = 0
  count = 0
  index = 0
  here = limits[0][0]
  while index < len(limits):
    size = limits[index][0] - here
    if n < cumulative + count * size:
      # [here, next) contains the value we're searching for
      return here + (n - cumulative) / count
    # advance
    cumulative += count * size
    count += limits[index][1]
    here += size
    index += 1
  # We didn't find it. We could throw an error 
```

因此，正如我所说，该算法的运行时间与间隔的实际值无关；它仅取决于间隔列表的长度。这个特殊的解决方案是`O(N log N)`因为排序的成本（in `combineIntervals`）；如果我们使用优先级队列而不是完整排序，我们可以在其中构造堆，`O(N)`但`O(log N)`对每个扫描的端点进行扫描。除非`N`真的很大并且参数的期望值`n`相对较小，否则会适得其反。不过，可能还有其他方法可以降低复杂性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T14:23:16.230

编辑2：

这是对您问题的另一种看法。

让我们以图形方式考虑间隔：

```
 1  1   1 2  2  2  3
   0-2-4--7--0--3---7-0--4--7--0
     [-------]
       [-----------------]
          [---------]
                [--------------]
                      [-----] 
```

当在下限上按升序排序时，我们可以得到类似于上面的区间列表的东西`([2;10];[4;24];[7;17];[13;30];[20;27])`。每个下限都表示一个新区间的开始，也将标志着数字重复的另一个“级别”的开始。相反，上限标记该级别的结束，并降低一个的重复级别。因此，我们可以将上述内容转换为以下列表：

```
 [2;+];[4;+];[7;+][10;-];[13;+];[17;-][20;+];[24;-];[27;-];[30;-] 
```

其中第一个值表示边界的等级，第二个值表示边界是下限 ( `+`) 还是上限 ( `-`)。第 n 个元素的计算是通过遵循列表来完成的，遇到下限或上限时提高或降低重复级别，并使用重复级别作为计数因子。

让我们再次以图形方式考虑列表，但作为直方图：

```
 3333  44444 5555
       2222222333333344444555
     111111111222222222222444444
             1  1   1 2  2  2  3
   0-2-4--7--0--3---7-0--4--7--0 
```

上面的视图与第一个视图相同，所有间隔都垂直排列。 `1`是第一个，`2`第二个等的元素。实际上，这里重要的是每个索引处的高度，对应于每个索引在所有区间的联合中重复的次数。

```
 3333  55555 7777
       2223333445555567777888
     112223333445555567777888999
             1  1   1 2  2  2  3
   0-2-4--7--0--3---7-0--4--7--0
   | | |  |   | |    ||   |  | 
```

我们可以看到直方图块从区间的下限开始，到上限或下限前一个单位结束，因此必须相应地修改新符号。

对于包含*n 个*区间的列表，作为第一步，我们将列表转换为上面的符号（*O(n)*），并按递增的绑定顺序对其进行排序（*O(nlog(n))*）。然后计算数字的第二步在*O(n)*中，总平均时间在*O(nlog(n)* ) 中。

这是 OCaml 中的一个简单实现，使用`1`and`-1`代替 '+' 和 '-'。

```
(* transform the list in the correct notation *)
let rec convert = function
      [] -> []
    | (l,u)::xs -> (l,1)::(u+1,-1)::convert xs;;

(* the counting function *)
let rec count r f = function
      [] -> raise Not_found
    | [a,x] -> (match f + x with 
          0 -> if r = 0 then a else raise Not_found
                    | _ -> a + (r / f))
    | (a,x)::(b,y)::l ->
         if a = b
         then count r f ((b,x+y)::l)
         else
             let f = f + x in
             if f > 0 then
                 let range = (b - a) * f in
                 if range > r
                 then a + (r / f)
                 else count (r - range) f ((b,y)::l)
             else count r f ((b,y)::l);;

(* the compute function *)
let compute l = 
    let compare (x,_) (y,_) = compare x y in
    let l = List.sort compare (convert l) in
    fun m -> count m 0 l;; 
```

注意： - 如果寻求的数字高于间隔，上述函数将引发异常。下面的其他方法不考虑这种极端情况。- OCaml 中使用的列表排序功能是归并排序，它在*O(nlog(n))*中有效执行。

* * *

编辑：

看到您可能有非常大的间隔，我最初给出的解决方案（见下文）远非最佳。相反，我们可以通过转换列表来使事情变得更快：我们尝试通过搜索重叠列表来压缩间隔列表，并通过为间隔添加前缀、重叠的几倍以及为间隔添加后缀来替换它们。然后我们可以直接计算列表中每个元素所涵盖的条目数。查看上面的拆分（前缀、中缀、后缀），我们看到进行处理的最佳结构是二叉树。该树的节点可以选择具有前缀和后缀。所以节点必须包含：

*   `i`节点中的一个区间
*   一个整数，给出`i`列表中的重复次数，
*   下面所有区间的左子树`i`
*   上述所有区间的右子树`i`

有了这个结构，树就会自动排序。这是体现该树的 ocaml 类型的示例。

```
type tree = Empty | Node of int * interval * tree * tree 
```

现在转换算法归结为构建树。

此函数从其组件中创建一棵树：

```
let cons k r lt rt = 
   the tree made of count k, interval r, left tree lt and right tree rt 
```

此函数递归地在树中插入一个区间。

```
let rec insert i it =
   let r = root of it
   let lt = the left subtree of it
   let rt = the right subtree of it
   let k = the count of r
   let prf, inf, suf = the prefix, infix and suffix of i according to r
   return cons (k+1) inf (insert prf lt) (insert suf rt) 
```

构建树后，我们对树进行前序遍历，使用节点的计数来加速第 n 个元素的计算。

* * *

*下面是我之前的回答。*

以下是我的解决方案的步骤：

*   您需要在每个间隔的下限按升序对间隔列表进行排序
*   您需要一个双端队列`dq`（或在某些时候反转的列表）来存储间隔

这是代码：

```
let lower i = lower bound of interval i
let upper i = upper bound of i

let il = sort of interval list
i <- 0
j <- lower (head of il)
loop on il:
  i <- i + 1
  let h = the head of il
  let il = the tail of il
  if upper h > j then push h to dq
  if lower h > j then
            il <- concat dq and il
            j <- j + 1
            dq <- empty
            loop
  if i = k then return j
  loop 
```

该算法通过简单地遍历区间来工作，仅考虑相关区间，并计算`i`联合中元素的等级和该元素的值`j`。当达到目标排名`k`时，返回该值。

复杂度大致在 O(k) + O(sort(l)) 中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T12:05:31.013

如果我正确理解了你的问题，你想在区间列表中找到第 k 个最大的元素。如果我们假设 list 的 no = 2，那么问题是：在两个排序数组的联合中找到第 k 个最小的元素（其中区间 [2,5] 只不过是从 2 到 5 {2,3,4,5} 的元素) 这个解决方案可以在**(n+m)log(n+m)** 时间内解决，其中 (n 和 m 是列表的大小) 。其中 i 和 j 是列表迭代器。

```
Maintaining the invariant
    i + j = k – 1,
If Bj-1 < Ai < Bj, then Ai must be the k-th smallest,
or else if Ai-1 < Bj < Ai, then Bj must be the k-th smallest. 
```

详情[请点击这里](http://www.leetcode.com/2011/01/find-k-th-smallest-element-in-union-of.html)

现在的问题是，如果您没有 list=3 个列表，那么

```
 Maintaining the invariant
        i + j+ x = k – 1,
         i + j=k-x-1
     The value k-x-1 can take y (size of third list, because x iterates from start point of list to end point) .
    problem of 3 lists size can be reduced to y*(problem of size 2 list). So complexity is `y*((n+m)log(n+m))`

    If Bj-1 < Ai < Bj, then Ai must be the k-th smallest,
    or else if Ai-1 < Bj < Ai, then Bj must be the k-th smallest. 
```

因此，对于大小为 n 的问题列表，复杂度为 NP 。

但是，是的，如果我们知道 k< sizeof(some lists) 我们可以在那些大小大于 k 的列表中从第 k+1 个元素开始到结束（从我们的搜索空间）截断元素（我认为它），我们可以做一些小的改进对大 k 没有帮助。如果有任何错误，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-17T02:51:49.383

让我用一个例子来解释一下：假设我们有这些区间 [5,12],[3,9],[8,13]。这些区间的并集是：

```
number : 3 4 5 5 6 6 7 7 8  8  8  9  9  9 10 10 11 11 12 12 13.
indices: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 
```

当`lowest`输入 9 时，将返回 11。
当`highest`输入 9 时，将返回 14。

最低和最高函数只是检查 x 是否存在于该区间中，如果存在则添加 xa（区间的下索引）以返回该特定区间的值。如果一个区间完全小于 x，则将该区间中的元素总数添加到返回值。

传递 13 时，find 函数将返回 9。
find 函数将使用二分查找的概念来查找第 k 个最小的元素。在给定的范围 [0,N] 中（如果没有给出范围，我们可以在 O(n) 中找到高范围）找到中间值并计算中间值的最低值和最高值。如果给定 k 介于最低和最高之间，则返回 mid else 如果 k 小于或等于下半部分的最低搜索 (0,mid-1)，否则在上半部分搜索 (mid+1,high)。
如果区间数为n，范围为N，则该算法的运行时间为n*log(N)。我们将找到最低和最高（以 O(n) 运行）log(N) 次。

```
//Function call will be `find(0,N,k,in)`

//Retrieves the no.of smaller elements than first x(excluding) in union
public static int lowest(List<List<Integer>> in, int x){
    int sum = 0;
    for(List<Integer> lst: in){
        if(x > lst.get(1)) 
            sum += lst.get(1) - lst.get(0)+1;
        else if((x >= lst.get(0) && x<lst.get(1)) || (x > lst.get(0) && x<=lst.get(1))){
                sum += x - lst.get(0);

         }
        }

    return sum;
}
//Retrieve the no.of smaller elements than last x(including) in union.
public static int highest(List<List<Integer>> in, int x){
    int sum = 0;
    for(List<Integer> lst: in){
        if(x > lst.get(1)) 
            sum += lst.get(1) - lst.get(0)+1;
        else if((x >= lst.get(0) && x<lst.get(1)) || (x > lst.get(0) && x<=lst.get(1))){
                sum += x - lst.get(0)+1;

        }
        }
    return sum;
}

//Do binary search on the range.
public static int find(int low, int high, int k,List<List<Integer>> in){
    if(low > high)
        return -1;
    int mid = low + (high-low)/2;
    int lowIdx = lowest(in,mid);
    int highIdx = highest(in,mid);
    //k lies between the current numbers high and low indices
    if(k > lowIdx && k <= highIdx) return mid;
    //k less than lower index. go on to left side
    if(k <= lowIdx) return find(low,mid-1,k,in);
    // k greater than higher index go to right
    if(k > highIdx) return find(mid+1,high,k,in);
    else
        return -1; // catch statement
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-24T11:19:29.090

可以计算列表中有多少数字小于某个选定的数字 X（通过遍历所有间隔）。现在，如果这个数大于n，则解肯定小于X。同样，如果这个数小于或等于n，则解大于或等于X。根据这些观察，我们可以使用二分搜索.

下面是一个Java实现：

```
public int nthElement( int[] lowerBound, int[] upperBound, int n )
   {
      int lo = Integer.MIN_VALUE, hi = Integer.MAX_VALUE;
      while ( lo < hi ) {
         int X = (int)( ((long)lo+hi+1)/2 );
         long count = 0;
         for ( int i=0; i<lowerBound.length; ++i ) {
            if ( X >= lowerBound[i] && X <= upperBound[i] ) {
               // part of interval i is less than X
               count += (long)X - lowerBound[i];
            }
            if ( X >= lowerBound[i] && X > upperBound[i] ) {
               // all numbers in interval i are less than X
               count += (long)upperBound[i] - lowerBound[i] + 1;
            }
         }

         if ( count <= n ) lo = X;
         else hi = X-1;
      }

      return lo;
   } 
```

# linux - struct task_struct 中的字段“on_cpu”和struct thread_info 中的字段“cpu”是什么意思？

> ID：13507927
> 
> 赞同：4
> 
> 时间：2012-11-22T07:43:41.890
> 
> 标签：linux, kernel

我想知道当前进程在Linux系统中运行在哪个cpu上，我有两个选择——

1.  获取`on_cpu`结构中的字段`task_struct`或
2.  获取`cpu`struct中的字段`thread_info`。

我编写了一个内核模块编程来探测这两个字段，并得到以下结果：

```
[ 3991.419185] the field 'on_cpu' in task_struct is :1
[ 3991.419187] the field 'cpu' in thread_info is :0
[ 3991.419199] the field 'on_cpu' in task_struct is :1
[ 3991.419200] the field 'cpu' in thread_info is :0
[ 3991.419264] the field 'on_cpu' in task_struct is :1
[ 3991.419266] the field 'cpu' in thread_info is :1
[ 3991.419293] the field 'on_cpu' in task_struct is :1
[ 3991.419294] the field 'cpu' in thread_info is :1
[ 3991.419314] the field 'on_cpu' in task_struct is :1
[ 3991.419315] the field 'cpu' in thread_info is :1
[ 3991.419494] the field 'on_cpu' in task_struct is :1
[ 3991.419495] the field 'cpu' in thread_info is :0
[ 3991.419506] the field 'on_cpu' in task_struct is :1
[ 3991.419507] the field 'cpu' in thread_info is :1 
```

而且我不知道这两个字段的正确含义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T14:30:01.930

中的`cpu`字段`thread_info`指定正在执行进程的 CPU 的数量。这就是您要搜索的内容。

The `on_cpu` flag in `task_struct` is actually a lock when context switching and wanting to have interrupts enabled during a context switch in order to avoid high latency by having an unlocked runqueue. Basically when it's 0 then the task can be moved to a different cpu.

# scala - 类型检查器在@specialized 上遇到麻烦

> ID：13507929
> 
> 赞同：2
> 
> 时间：2012-11-22T07:43:49.467
> 
> 标签：scala

`@specialized`下面的特征在没有注释或没有方法的情况下编译得很好`map`。否则，它将因编译错误而失败，这没有多大意义（至少对我而言）：

```
[error] (compile:compile) scala.tools.nsc.symtab.Types$TypeError: type mismatch;
[error]  found   : U(in method foreach)(in method foreach)
[error]  required: U(in method foreach)(in method foreach) 
```

这就是我所说的特质：

```
trait Tuple2Traversable[@specialized(Int, Byte) +A, @specialized(Int, Byte) +B] {

  def foreach[T](fn: (A, B) => T)

  def map[T](fn: (A, B) => T): Traversable[T] = new Traversable[T] {
    def foreach[U](f: T => U) {
      def composed(a: A, b: B) = f(fn(a, b))
      Tuple2Traversable.this.foreach(composed)
    }
  }

  def flatMap[T](fn: (A, B) => Traversable[T]): Traversable[T] = new Traversable[T] {
    def foreach[U](f: (T) => U) {
      def composed(a: A, b: B) = fn(a, b).foreach(f)
      Tuple2Traversable.this.foreach(composed)
    }
  }

  def filter(included: (A, B) => Boolean): Tuple2Traversable[A, B] = new Tuple2Traversable[A, B] {
    def foreach[T](fn: (A, B) => T) {
      def composed(a: A, b: B) = if (included(a, b)) fn(a, b)
      Tuple2Traversable.this.foreach(composed)
    }
  }

  def foldLeft[T](z: T)(fn: (T, A, B) => T): T = {
    var current = z
    def op(a: A, b: B) {
      current = fn(current, a, b)
    }
    foreach(op)
    current
  }

  def asTraversable = new Traversable[(A, B)] {
    def foreach[U](f: ((A, B)) => U) {
      def tupled(a: A, b: B) = f((a, b))
      Tuple2Traversable.this.foreach(tupled)
    }
  }

} 
```

我已经盯着这个看了一段时间了。任何有关如何解决此问题的建议将不胜感激。

也许我应该补充一点，这个类的目的是拥有一个 Traversable 元组，而不是强制创建这些元组。A`Traversable[(A,B)]`会接受 a `Tuple2[A,B] => T`作为 的参数`foreach`。我希望我的“可遍历”接受一个函数`(A, B) => T`。（如`def fn(a: Int, b: Int) = a + b`。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T11:47:54.623

看起来像一些内部编译器错误。我在 scala 2.9.2 中遇到了同样的错误，但它在 scala 2.10-RC2 中编译得很好

# php - 显示与数据库不同符号的数据

> ID：13507930
> 
> 赞同：1
> 
> 时间：2012-11-22T07:43:50.667
> 
> 标签：php, database, unique

编码以显示与众不同的灯光

如果数据库中的数据值为 1，则角色将出现发光的灯光，而如果数据库中的数据值为 0，则出现的灯光不发光。

插图如下图所示：

![图片](../Images/894db254b9b5749e9c0cab2da88eaa7c.png)

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T07:50:45.490

在您的 SQL 查询中，您可以拥有`SELECT CASE WHEN condition THEN 1 ELSE 0 END as someParameter FROM ...`

然后在您的代码中检查 someParameter 值并根据其值显示不同的图像。

查看[文档](http://dev.mysql.com/doc/refman/5.0/en/case.html)以获取更多信息（我假设您使用的是 mysql）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:22:51.523

有多种方法可以做到这一点，这是一种方法：

```
<img src="/path/to/images/<?= $data ? 'img1.png' : 'img0.png' ?>" ... /> 
```

您还可以编写一个函数，根据值输出不同的图像，这完全取决于您。如果您想要更准确的答案，您必须给我们一些代码。另外，我不知道您是如何生成表格的。$data 是您描述的列的值。

# javascript - Gmap3 明确方向

> ID：13507936
> 
> 赞同：3
> 
> 时间：2012-11-22T07:44:10.203
> 
> 标签：javascript, jquery, jquery-gmap3

当单击另一个标记或将我的原点标记拖到另一个位置时，我需要重新计算方向。

目前，当用户插入他/她的地址时，我正在插入一个标记，然后当用户单击任何现有标记时，它会计算方向。不幸的是，它并没有清除以前的方向。

任何帮助都将不胜感激。

这是代码：

```
jQuery(document).ready(function() {
jQuery.getJSON('./index.php', {
 option: "com_locate",
 view: "branches",
 tmpl: "component",
 format: "json",
},
 function(json){
      jQuery(function(){      
    jQuery("#googleMap").gmap3({
      map:{
        options: {
          center:[-29.8191,25.3499],
          zoom: 5,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          mapTypeControl: false,
          streetViewControl: false
        }
      },
      marker: {
        values: json,
        options: {
          icon: new google.maps.MarkerImage("http://maps.gstatic.com/mapfiles/icon_green.png")
        },
        events:{
          mouseover: function(marker, event, context){
            jQuery(this).gmap3(
              {clear:"overlay"},
              {
              overlay:{
                id: "tooltip",
                latLng: marker.getPosition(),
                options:{
                  content:  "<div class='infobulle"+(context.data.drive ? " drive" : "")+"'>" +
                              "<div class='bg'></div>" +
                              "<div class='text'>" + context.data.city + " (" + context.data.telephone + ")</div>" +
                            "</div>" +
                            "<div class='arrow'></div>",
                  offset: {
                    x:-46,
                    y:-73
                  }
                }
              }
            });
          },
          mouseout: function(){
            jQuery(this).gmap3({clear:"overlay"});
          },

          click: function(marker, event, context){
              markerSelected(context.id);
            }
           }
        }
    });
    ///////////////
    jQuery('#test-ok').click(function(){
      var addr = jQuery('#test-address').val();
      if ( !addr || !addr.length ) return;
      jQuery("#googleMap").gmap3({
        getlatlng:{
          address:  addr,
          callback: function(results){
            if ( !results ) return;
            jQuery("#googleMap").gmap3({
                clear:{id:"user"}
                },
                {
              marker:{
                latLng:results[0].geometry.location,
                id:"user",
                name:"user",
                options:{
                  draggable: true
                }
              },
                map:{
                  center: true,
                  zoom: 5
              }
            });
          }
        }
      });
    });

    jQuery('#test-address').keypress(function(e){
      if (e.keyCode == 13){
        jQuery('#test-ok').click();
      }
    });

    ///////////////
    ///////////////
    function markerSelected(id){
    var marker = jQuery('#googleMap').gmap3({get:id});
    var usermarker = jQuery('#googleMap').gmap3({get:"user"});
    jQuery("#googleMap").gmap3({
      getroute:{
        options:{
            origin:[usermarker.getPosition().lat(),usermarker.getPosition().lng()],
            destination:[marker.getPosition().lat(),marker.getPosition().lng()],
            travelMode: google.maps.DirectionsTravelMode.DRIVING
        },
        callback: function(results){
          if (!results) return;
          jQuery(this).gmap3({
            map:{
              options:{
              }
            },
            directionsrenderer:{
              container: jQuery(document.createElement("div")).addClass("googlemap").insertAfter(jQuery("#googleMap")),
              options:{
                directions:results
              }
            }
          });
        }
      }
    });

  } 
  });
  });
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:56:38.000

每次执行路线请求时，您使用的代码都会创建一个新的 DOM 元素，而不会删除任何现有的此类元素或替换任何现有元素中的内容。您的代码的相关部分是这样的：

```
 directionsrenderer:{
      container: jQuery(document.createElement("div")).addClass("googlemap").insertAfter(jQuery("#googleMap")),
        // The above creates a new DOM element every time markerSelected() is called!
      options:{
        directions:results
      }
    } 
```

您只想创建一次。如果需要，可以直接在 HTML 标记中进行。

使用以下内容代替您的 getroute 回调函数。我已经为容器元素插入了一个唯一 ID，并保留了“googlemap”类，以防 CSS 或其他代码部分需要它。但是，由于您特别希望仅显示一组方向，因此让我们按 ID 选择您的容器。

```
callback: function(results){
  if (!results) return;
  if (!jQuery("#dircontainer").length>0) {
    jQuery("<div id='dircontainer' class='googlemap'></div>").insertAfter("#googleMap");
  } // Creates your directions container if it doesn't already exist.
  else {
    jQuery("#dircontainer").html("");
  } /* I'm clearing the existing contents of the container in case gmap3 doesn't
       automatically clear it when the new directions are inserted.
       You can experiment with removing this else statement. */
  jQuery(this).gmap3({
    map:{
      options:{
      }
    },
    directionsrenderer:{
      container: jQuery("#dircontainer"),
      options:{
        directions:results
      }
    }
  });
} 
```

我在这里对 gmap3 插件的工作方式进行了一些假设；我使用过 jQuery 和 Google Maps JS API，但没有使用过这个插件。

# java - HSQLDB 优化 1.000.000 批量插入

> ID：13507947
> 
> 赞同：4
> 
> 时间：2012-11-22T07:44:55.677
> 
> 标签：java, performance, jdbc, hsqldb

我需要尽快在 Tomcat 上的 HSQLDB 中插入 1.000.000 个条目，但是 64m（Tomcat 上的默认 MaxPermSize）对于此代码来说还不够，并且我得到“OutOfMemoryError”（我想插入默认设置）。

```
connection.setAutoCommit(false);
PreparedStatement preparedStatement = connection.prepareStatement("INSERT INTO USER (firstName, secondName) VALUES(?,?)");
for (int i = 0; i < 1000000; i++) {
    preparedStatement.setString(1, "firstName");
    preparedStatement.setString(2, "secondName");
    preparedStatement.addBatch();
}
preparedStatement.executeBatch();
connection.commit(); 
```

我这样做了：http: [//hsqldb.org/doc/2.0/guide/deployment-chapt.html#dec_bulk_operations](http://hsqldb.org/doc/2.0/guide/deployment-chapt.html#dec_bulk_operations)。我设置了“SET FILES LOG FALSE”，但没有帮助。

1.  有没有办法用 MaxPermSize=64m 插入 1.000.000 个条目？
2.  为什么在这段代码上tomcat 会吃掉这么多内存？有 1.000.000 * 19（“firstName”+“secondName”的长度）*2（1 个符号上的字节）= ~40Mb。
3.  为什么在内存表中插入比在缓存表中更快？难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-22T07:54:19.817

1.  也许试着用更小的套装来做。它将消耗更少的内存，并且可能会更有效。
2.  计算内存的大小要困难得多。例如，您不会将 firstName 存储 100 万次，该值将被内部化，但您必须存储引用 100 万次。然后，你所有的图书馆都会消耗记忆，等等......
3.  你把什么叫做“缓存表”？

试试看，你至少会消耗更少的内存：

```
connection.setAutoCommit(false);
PreparedStatement preparedStatement = connection.prepareStatement("INSERT INTO USER (firstName, secondName) VALUES(?,?)");
for (int i = 0; i < 1000000; i++) {
    preparedStatement.setString(1, "firstName");
    preparedStatement.setString(2, "secondName");
    preparedStatement.addBatch();
    if(i % 1000 == 0)
         preparedStatement.executeBatch();
}
preparedStatement.executeBatch();
connection.commit(); 
```

编辑：你确定是因为烫发尺寸吗？你能把堆栈跟踪吗？

# java - 不允许在 main 方法中声明

> ID：13507952
> 
> 赞同：0
> 
> 时间：2012-11-22T07:45:23.853
> 
> 标签：java

//这是一个研究集合如何工作的小代码，但是当我在 main 方法中创建一个 Mountain 对象时，它会出错。最后进一步解释。

```
import java. util. * ;
    public class sortMountains {
     class Mountain {
               String name;
               int height;
               Mountain(String n, int h) {
                 name      = n;

                 height = h;
               }
               public String toString( ) {
                 return name +  + height;
               }
            }
    List<Mountain> mtn  = new ArrayList<Mountain> ();
      class NameCompare implements Comparator <Mountain> {
        public int compare(Mountain one, Mountain two) {
          return one.name. compareTo(two. name);
      }
      }
      class HeightCompare implements Comparator <Mountain> {
        public int compare(Mountain one, Mountain two) {
    return (two. height - one. height) ;
    }

      }
      public void go() {
            mtn.add(new Mountain("Longs ", 14255));
            mtn.add(new Mountain("Elbert ", 14433));
            mtn.add(new Mountain("Maroon " , 14156));
            mtn.add(new Mountain("Castle ", 14265));

            System.out.println("as entered:\n" + mtn);
            NameCompare nc = new NameCompare();
            Collections.sort(mtn, nc);
            System.out.println("by name:\n'" + mtn);
            HeightCompare hc = new HeightCompare();
            Collections.sort(mtn, hc);
            System.out.println("by height:\n " + mtn);
          }
    public static void main(String args[]){

        sortMountains   sorting=new sortMountains();
        sorting.go();
         //error line   Mountain a=new Mountain("Everest",12121);            
    }

    } 
```

上面编译时没有错误行工作正常，但是当我想在 main 方法中创建一个 Mountain 对象时，它给出了一个错误“非静态不能从静态方法引用”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:48:07.147

制作`Mountain`类`static`，如下所示：

```
static class Mountain {
   ... 
```

如果你不这样做，每个实例`Mountain`都必须有一个`sortMountains`与之关联的实例。`main()`由于（方法本身是）中没有这样的实例`static`，编译器将不允许您在`Mountain`那里实例化。

如需进一步讨论，请参阅：

*   [Java：静态与非静态内部类](https://stackoverflow.com/questions/1353309/java-static-vs-non-static-inner-class)
*   [Java内部类和静态嵌套类](https://stackoverflow.com/questions/70324/java-inner-class-and-static-nested-class)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T07:48:20.107

内部类就像一个类的任何其他成员一样。所以你不能在方法中引用**非静态**内部类，`main()`就像你不能在方法中引用**非静态**全局变量一样`main()`。因此，您可以声明您的类`static`以避免该错误：

```
static class Mountain { ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T07:48:23.793

Mountain 类是内部类，因此将 Mountain 对象创建为：

```
sortMountains sorting=new sortMountains();
Mountain a = sorting.new Mountain("Everest",12121); 
```

对于您的程序，您不能这样做，因为 Mountain 类是非静态的，您不能从静态方法访问非静态成员。

因此，您可以将 Mountain 类声明为静态并将其对象创建为`Mountain a = new Mountain("Everest",12121);`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T07:48:33.507

如您所见，`Mountain`没有它的封闭类就无法创建类`sortMountains`。如果你想以你想要的方式创建它，你应该`sortMountains`在里面 声明它。`Mountain`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T07:49:11.103

您已经在类中声明了 Mountain`sortMountains`类。在这种情况下，您可以访问您的内部类

1.  如果您的内部类是静态的 ( `static class Mountain{}`) 或

2.  创建外部 instance.new innerClass()。

    `Mountain a=sorting.new Mountain("Everest",12121);`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-22T07:51:59.307

因为您的内部类不是静态的，所以您必须以下列方式创建该类的对象。

```
public static void main(String args[]){

  sortMountains   sorting=new sortMountains();
  sorting.go();    
  Mountain a = sorting.new Mountain("Everest", 12121);
} 
```

或者，您可以将 Mountain 类设为静态，如下所示：

```
static class Mountain {
   ... 
```

# sql - 使用 Visual C# express 连接到 SQL Server

> ID：13507959
> 
> 赞同：2
> 
> 时间：2012-11-22T07:46:04.817
> 
> 标签：sql, sql-server, visual-studio-2010

我正在使用这种[解决方法](https://stackoverflow.com/questions/188963/connecting-to-sql-server-with-visual-studio-express-editions)![图片](../Images/9ccd272c5d737c1e5f4710e3fb38c641.png)，但我仍然不清楚。我坚持第 3 步和第 4 步。任何人都可以发布执行这些步骤的打印屏幕吗？对不起，如果它要求太多，但我真的很感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T07:49:45.673

第 3 步：从菜单中选择`File > New > Project`，然后在对话框中选择`Class Library`：

![在此处输入图像描述](../Images/466a94875ff3700677c1f324c8c4136b.png)

第 4 步：在该类库项目中，在解决方案资源管理器中，右键单击并选择`Add > New Item`，然后从菜单中选择`Linq-to-SQL classes`：

![在此处输入图像描述](../Images/e52ef181c7f112bd041557c419e22487.png)

# ios - UIPageControl 不会始终触发 UIControlEventValueChanged 事件

> ID：13507961
> 
> 赞同：5
> 
> 时间：2012-11-22T07:46:11.327
> 
> 标签：ios, uipagecontrol, uicontrolevents

假设我们有十页。

该事件的事件处理程序添加如下：

运行应用程序。现在在十页中，默认选择第 1 页（索引 0）。触摸第二页或第三页。该事件不会被触发。如果选择了最后一页，将触发该事件。最后一页也是如此。选择最后一页后，选择上一页。该事件不会被触发，但是如果您选择第一页，则不会触发该事件。

要查看此案例的简单演示，请下载 UICatalog 示例并打开 ControlsViewController.m 并将 UIControlEventTouchUpInside 更改为 UIControlEventValueChanged（第 375 行）。

```
- (UIPageControl *)pageControl
{
    if (pageControl == nil) 
    {
        CGRect frame = CGRectMake(120.0, 14.0, 178.0, 20.0);
        pageControl = [[UIPageControl alloc] initWithFrame:frame];
        [pageControl addTarget:self action:@selector(pageAction:) forControlEvents:UIControlEventValueChanged];

        // in case the parent view draws with a custom color or gradient, use a transparent color
        pageControl.backgroundColor = [UIColor grayColor];

        pageControl.numberOfPages = 10; // must be set or control won't draw
        pageControl.currentPage = 0;
        pageControl.tag = kViewTag; // tag this view for later so we can remove it from recycled table cells
    }
    return pageControl;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-22T07:53:41.717

您可能误解了页面控件的工作原理。它是当前页面数量的视觉指示器，但点击特定点不会转到该页面。您一次只能移动一页，点击左半部分后退一页，点击右半部分前进一页。

如果您在第一页，然后点击左半部分，则无法返回另一页，因此什么也不会发生。

我不太喜欢这种行为，尤其是在 iPad 上，所以通常使用子类或我自己的触摸处理来确定触摸位置是在当前选定页面的左侧还是右侧，并适当地发送事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:16:57.737

您可以使用**UITapGestureRecognizer**而不是使用 addTarget **:self action:@selector()**

```
//Added UITapGestureRecognizer instead of using addTarget: method        
UITapGestureRecognizer *tapGesture = [[UITapGestureRecognizer alloc] init];         
tapGesture addTarget:self action:@selector(pageAction:) ];
[pageControl addGestureRecognizer:tapGesture];
[tapGesture release];
tapGesture = nil;

-(void)pageAction:(UITapGestureRecognizer *)tapGesture{  

   UIPageControl *pageControl = (UIPageControl *)tapGesture.view;      

   NSLog(@"page Number: %d",pageControl.currentPage);

} 
```

# java-me - 在某些手机上使用 post 会引发 IOExceptions

> ID：13507962
> 
> 赞同：1
> 
> 时间：2012-11-22T07:46:12.620
> 
> 标签：java-me, midp

我在 J2ME 中创建了一个应用程序，它使用以下方法连接到服务器。php 在服务器端用于处理请求。该应用程序在诺基亚 asha 303 等手机上运行良好，但在其他手机上抛出 IOException，这可能是此代码的问题。此方法在不同的线程上调用。我还想问你是否在 j2me 中使用 post 并设置

```
 httpConn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded"); 
```

您是否必须在发送前对数据进行 urlencode 或由 j2me 自动处理

```
public String sendData(String serverUrl, String dataToSend) {

    String strResponse = "0"; //string to hold serverResponse
    StringBuffer sb = new StringBuffer("");
    HttpConnection httpConn = null;
    InputStream inputStream = null;
    OutputStream outStream = null;
    try {
        //convert the dataToSend to bytes 
        String strData = dataToSend; //  get the data to Send and store it in a variable.
        byte[] dataToSendBytes = strData.getBytes();

        //open the Connection to the server.
        httpConn = (HttpConnection) Connector.open(serverUrl, Connector.READ_WRITE, true);

        if (httpConn != null) {
            httpConn.setRequestMethod(HttpConnection.POST); // method used to send the data.
            httpConn.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
            httpConn.setRequestProperty("User-Agent", "Profile/MIDP-2.0 Configuration/CLDC-1.1");
            //httpConn.setRequestProperty("Content-Language", "en-US"); //language to use.
            //setRequestProperty("Connection", "close") ===> could generate or Solve IOExceptions on different mobile Phones.
            //httpConn.setRequestProperty("Connection", "close");
            //setting the Content-length could have issues with some Servers===>
            //if the dataToSend is Empty String => contentLen = 0 , else get length of the dataBytes.
            String contentLen = ((dataToSend.length() > 0) ? Integer.toString(dataToSendBytes.length) : Integer.toString(0));
            //httpConn.setRequestProperty("Content-length", contentLen); //not working on Emulator ....enable on shipping application.

            //open the output Stream to send data to the Server.
            outStream = httpConn.openOutputStream();

            // send the bytes of data to the Server.===> 
            //outStream.write(dataToSendBytes);

            //send the data bytes to the Server.
            int byteLen = dataToSendBytes.length; //length of byteToSend.
            for (int k = 0; k < byteLen; k++) {
                //send all the databytes to the Server.
                outStream.write(dataToSendBytes[k]);
            }

            //close the outputStream ===immediately after sending the data bytes to the Server===>eliminates the IOExceptions.
            closeOutStream(outStream);

            //get response code on Sending Data===> getting response code automatically flushes the output data.
            ntworkResponseCode = httpConn.getResponseCode();

            if (ntworkResponseCode == HttpConnection.HTTP_OK) {
                //connection to the Server was okay.

                if (httpConn != null) {
                    //read the Response From the Server-----------
                    inputStream = httpConn.openInputStream(); // open the inputStream.

                    //get server Response Content length.
                    int contLen = (int) httpConn.getLength();
                    byte[] serverResponseBytes; //byte array to store the serverResponse.
                    if (contLen != -1) {
                        //store the serverResponse to a byte array.===> using a byte buffer could be faster.
                        serverResponseBytes = new byte[contLen];
                        inputStream.read(serverResponseBytes);

                        //convert the bytes to String and store them to the StringBuffer.
                        sb.append(new String(serverResponseBytes));

                    } else {
                        //serverResponse Length not available===> read character by character could be slower.
                        int read;
                        while ((read = inputStream.read()) != -1) {
                            sb.append((char) read);
                        }

                    }

                    //store the server response in a String.
                    strResponse = sb.toString();

                }
            } else {
                //connection problem occured.
                //throw new IOException("Http Response Code [" + ntworkResponseCode + "]");
            }

        }// the httpConnection Not null.--end.

    } catch (IllegalArgumentException arge) {
        strResponse = CONNECTION_EXCEPTION;
    } catch (ConnectionNotFoundException cone) {
        //a string to show we got an exception
        strResponse = CONNECTION_EXCEPTION;
    } catch (IOException ioe) {
        //a string to show we got an exception
        strResponse = CONNECTION_EXCEPTION;
    } catch (SecurityException se) {
        //user cancelled the Connection Request.
        strResponse = CONNECTION_EXCEPTION;
    } finally {
        //close all the connection streams 
        try {
            if (inputStream != null) {
                //close the inputStream
                inputStream.close();
                inputStream = null;
            }

            if (outStream != null) {
                //close the outStream.
                outStream.close();
                outStream = null;
            }

            if (httpConn != null) {
                //close  the connection object.
                httpConn.close();
                httpConn = null;
            }

        } catch (IOException ie) {
              //show exception occured.
        }

    }
    //return server Response to the Client.
    return strResponse;
} 
```

# iphone - 如何在 iphone 中同时使用图像路径和音频路径播放带有图像的歌曲

> ID：13507965
> 
> 赞同：0
> 
> 时间：2012-11-22T07:46:27.390
> 
> 标签：iphone, objective-c, ios, uiimageview, avaudioplayer

我是电话编程的新手。图像和音频存储在私人文件夹中，在数据库中我创建了 ID、名称、图像路径、音频路径，我将所有这些想法存储在数据库中。当我从数据库中检索数据时，它显示在这样的控制台中。

1|Picture0001|/Users/User/Library/Application Support/iPhone Simulator/5.0/Applications/7CA908BE-79DC-44EE-BEA9-A4DBF1736062/Documents/Tauky/Images/Picture0001.jpg|/Users/User/Library/Application Support /iPhone 模拟器/5.0/Applications/7CA908BE-79DC-44EE-BEA9-A4DBF1736062/Documents/Tauky/Audios/song.mp3

2|Picture0002|/Users/User/Library/Application Support/iPhone Simulator/5.0/Applications/7CA908BE-79DC-44EE-BEA9-A4DBF1736062/Documents/Tauky/Images/Picture0002.jpg|/Users/User/Library/Application Support /iPhone 模拟器/5.0/Applications/7CA908BE-79DC-44EE-BEA9-A4DBF1736062/Documents/Tauky/Audios/song1.mp3

现在我在控制台中使用了这样的路径，如果单击该图像意味着它必须在下一个视图中播放歌曲，我只想在表格视图中显示图像。直到现在我能够在表格视图中显示路径而不是路径，如果单击我想播放歌曲的图像，我想显示图像。这想怎么做。是否可以使用路径图像路径和音频路径播放歌曲。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T08:39:04.027

声明两个**NSMutableArray**属性（使用一个类而不是两个 NSMutableArray）

```
@property (strong,nonatomic) NSMutableArray *imageCollection;
@property (strong,nonatomic) NSMutableArray *songCollection; 
```

**将它们分配在`viewDidLoad`**

```
self.imageCollection = [[NSMutableArray alloc] init];
self.songCollection = [[NSMutableArray alloc] init]; 
```

**添加对象**

```
 [self.imageCollection addObject:@"Picture0001"];
  [self.imageCollection addObject:@"Picture0002"];

  [self.songCollection addObject:@"/Users/User/Library/Application Support/iPhone Simulator/5.0/Applications/7CA908BE-79DC-44EE-BEA9-A4DBF1736062/Documents/Tauky/Images/Picture0001.jpg|/Users/User/Library/Application Support/iPhone Simulator/5.0/Applications/7CA908BE-79DC-44EE-BEA9-A4DBF1736062/Documents/Tauky/Audios/song.mp3"];
  [self.songCollection addObject:@"/Users/User/Library/Application Support/iPhone Simulator/5.0/Applications/7CA908BE-79DC-44EE-BEA9-A4DBF1736062/Documents/Tauky/Images/Picture0002.jpg|/Users/User/Library/Application Support/iPhone Simulator/5.0/Applications/7CA908BE-79DC-44EE-BEA9-A4DBF1736062/Documents/Tauky/Audios/song1.mp3"]; 
```

**[实现 UITableView](http://codingcluster.blogspot.in/2012/02/add-image-to-uitableviewcell-without.html)**

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"MyIdentifier"];

    if (cell == nil) {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"MyIdentifier"];        
        cell.selectionStyle = UITableViewCellSelectionStyleNone;

        cell = [[[UITableViewCell alloc] initWithFrame:CGRectZero] autorelease];

    }
    cell.textLabel.font = [UIFont systemFontOfSize:12];
    NSString *imageName = [self.imageCollection objectAtIndex:indexPath.row];
    cell.imageView.image = [UIImage imageNamed:imageName];
    cell.textLabel.text = [arry objectAtIndex:indexPath.row];

    return cell;
} 
```

**实现 UitableView * *didSelectRowAtIndexPath****委托**

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    NSString *songURL = [self.songCollection objectAtIndex:indexPath.row];

    //play song here or pass the songURL to another controller and play it in view didload

} 
```

# jquery - 如何在链接单击时更改 Jquery 滑块图像优先级

> ID：13507969
> 
> 赞同：0
> 
> 时间：2012-11-22T07:46:44.223
> 
> 标签：jquery, asp.net, dotnetnuke

下面是我通过控制台在运行时更改的 img 路径，我有 5 个锚标记，我需要通过它更改滑块图像优先级，然后它将按顺序向前移动。

```
<img src="/Portals/0/concept.jpg" class="nivo-main-image" style="width: 802px; height: 319px;"> 
```

在上面的 img 标签中，图像是动态变化的。

就像在链接 2 上单击我想从 img basic.jpg 启动滑块，这样我就可以像这样通过 Jquery 进行更改

```
$("#hidelink2").click(function () {
            $(".nivo-main-image").attr('src', "http://localhost:50493/Portals/0/Basic.jpg");
            $(".div1").hide();
            $(".div2").show();
            $(".div3").hide();
            $(".div4").hide();
            $(".div5").hide();
        }) 
```

但它不工作可能是什么原因，可以在我需要改变的地方帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T23:35:15.987

你有你的 jQuery 吗？

```
$(document).ready(function(){
 // your linking code
}); 
```

提供这么少的代码很难解决这个问题。您可能还想查看您的 Slider 插件 javascript 代码。看看 jquery 插件上是否有什么东西可以调用来移动订单而不是编写自己的代码并尝试操作它。

# javascript - Microsoft JScript 运行时错误：语法错误，第二个按钮单击时无法识别的表达式

> ID：13507970
> 
> 赞同：1
> 
> 时间：2012-11-22T07:46:50.907
> 
> 标签：javascript, asp.net-mvc-3, jquery, error-handling, jscript

嗨，我在 jquery 对话框中登录了部分视图，当我第一次单击按钮时，它确实有效。这意味着，如果文本框是空的，那么它会显示客户端错误来填充它们。但是当我第二次单击时，如果文本框是否填充，则会显示此错误：

> Microsoft JScript 运行时错误：语法错误，无法识别的表达式：#

我能怎么做？

**编辑：**

通过单击此按钮，将显示 jquery 对话框：

```
 <div class="buttons">          @{
        if (Session["member"] != null)
        {

                <input type="button" value="خريد" class="btn" id="btnn" onclick="addToOrders(@item.themesModel.ThemeID, true)" />
        }
        else
        {

                <input type="button" value="خريد" class="btn" id="btnn" onclick="addToOrders(@item.themesModel.ThemeID,false)" />

        } 
```

这是显示 jq 对话框的 js 代码：

```
function addToOrders(themeId, user) {

    var inputParams = "{themeId : '" + themeId + "'}";
    if (user==true) {

        $.ajax({
            url: '/Members/buy/Index',
            type: 'POST',
            dataType: 'json',
            data: inputParams,
            contentType: 'application/json; charset=utf-8',
            success: function (mm) {

                $("#resultMessage").dialog({
                    show: "puff",
                    hide: "puff",
                    resizable: false,
                    modal: true,
                    position: "center",
             width: 280,
             height: 250,
                });
                $("#resultMessage").dialog().addClass(".ui-dialog");
                $("#resultMessage").html(mm);
            }
        });

    }
    else {

        $("#resultMessage")
         .dialog({
             show: "puff",
             hide: "puff",
             resizable: false,
             modal: true,
             position: "center",
             title:"Login"
         })
          .load('/Members/MemberLoginPartial/LoginUser');       
    }
} 
```

这是我在登录部分视图中的按钮代码，在对话框中呈现：

```
 <input type="submit" value="login" /> 
```

这些是我在主布局中使用的脚本：

```
 <script src="../../Scripts/jquery-1.5.1.js" type="text/javascript"></script>
   <script src="@Url.Content("/Scripts/SlideMain/jquery.easyAccordion.js")" type="text/javascript"></script>
    <script src="@Url.Content("/Scripts/SlideMain/utility.js")" type="text/javascript"></script>
    <script src="@Url.Content("/Scripts/jquery-ui.js")" type="text/javascript"></script>
    <script src="@Url.Content("/Scripts/MicrosoftAjax.js")" type="text/javascript"></script>
    <script src="@Url.Content("/Scripts/MicrosoftMvcAjax.js")" type="text/javascript"></script>
    <script src="../../Scripts/jquery.validate.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery.unobtrusive-ajax.min.js" type="text/javascript"></script>
         <script src="@Url.Content("/Scripts/Members/Members.js")" type="text/javascript"></script> 
```

# kendo-ui - 剑道ui选择器css问题

> ID：13507971
> 
> 赞同：1
> 
> 时间：2012-11-22T07:46:59.220
> 
> 标签：kendo-ui

我正在使用剑道 ui 下拉列表和其他一些选择器。我想设置所选项目背景颜色的样式。

我试过 .k-dropdown .k-state-selected{ background-color: red} 但所选项目的颜色没有改变。它仅设置为默认橙色。但是相同的代码适用于网格和列表视图。

我怎么能做到这一点。

问候， 斯里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:33:46.023

以下 CSS 应适用于日期（时间）选择器和下拉列表：

```
.k-widget .k-state-selected,
.k-list .k-state-selected
{ 
  background: red;
} 
```

这是一个现场演示：http: [//jsbin.com/efozol/5/edit](http://jsbin.com/efozol/5/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T08:27:13.617

KendoUI 不仅将背景定义为一个`background-color: XYZ;`，而且还使用`background-image: none, -webkit-linear-gradient(top, #ffc0cb 0px, #ffc0cb 100%);`了所以，开始覆盖这个定义说`background-image: none;`

# javascript - 使用 html 和 js 创建提交按钮的最简单方法？

> ID：13507976
> 
> 赞同：1
> 
> 时间：2012-11-22T07:47:15.420
> 
> 标签：javascript

输入的主要问题是你不能使用:before 或:after。我必须将输入按钮的 CSS 与其他 s 匹配，而仅使用 css 几乎是不可能的。

我在想使用带有 onclick="" 属性的简单函数会更容易，该属性用作提交按钮，但我不确定这是一个好主意还是坏主意。例如，我认为用作输入的 a 可能会被 SEO 或浏览器视为不好的东西，另一方面，我每天都在使用 javascript 提交表单。

不推荐使用提交按钮之类的元素吗？

另外，我如何告诉 JS 围绕 div 提交表单，以便我可以创建一个适用于所有表单的代码段？这行得通吗？

```
<div onclick="this.submit()"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-22T08:27:42.997

如果您不想使用 jQuery，那么可以使用纯 JS 来解决问题：

HTML：

```
<div onclick="submitButton(this)"></div> 
```

脚本：

```
function submitButton (element) {
    while(element.parentElement !== document.body) {
        if (element.parentElement.tagName.toLowerCase() === 'form') {
            element.parentElement.submit();
            return;
        } else {
            element = element.parentElement;
        }
    }
    return;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T07:50:00.193

您可以使用

```
<div onclick="document.myform.submit()"></div> 
```

如果您的 div 是表单元素的子元素，您可以使用

```
 <div onclick="this.parentNode.submit()"></div> 
```

但是，您也可以使用像 jQuery 这样的框架来处理提交

```
$('#divId').onclick(function(){
    $('#formId').submit();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-22T07:57:12.697

```
 <div onclick="document.forms[0].submit();"></div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T08:03:02.720

> > 另外，我如何告诉 JS 围绕 div 提交表单，以便我可以创建一个适用于所有表单的代码段？这行得通吗？

```
this.parentNode.submit(); 
```

其他的我不知道。您想根本不使用 JavaScript，只使用 css :before 和 :after 来插入内容，但按钮和输入或按钮类型提交没有那些 css 属性？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-22T08:12:00.983

还有`<button type='submit'>Submit</button>`，我不确定这是否适用于 CSS`:before`和`:after`. 如果你想用 JavaScript 做更强大的事情，你应该研究[jQuery ，它似乎非常适合你的情况。](http://jquery.com/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-22T08:25:20.767

jQuery submit 方法可能对您有用：

```
$('element').onclick(function(){
$('form:first').submit();
}); 
```

[http://api.jquery.com/submit/](http://api.jquery.com/submit/)

# java - 返回给定索引处的堆栈元素，而不修改 Java 中的原始堆栈

> ID：13507978
> 
> 赞同：0
> 
> 时间：2012-11-22T07:47:17.557
> 
> 标签：java, reference, stack

好的，我最近在一次采访中被问到这个问题，我很感兴趣。基本上我有一个包含一组值的堆栈，我想在函数中传递堆栈对象并返回某个索引处的值。这里要注意的是，函数完成后，我需要未修改堆栈；这很棘手，因为 Java 按值传递对象的引用。我很好奇是否有纯粹的 Java 方式来使用`push()`、`pop()`、`peek()`和`isempty()`原始数据类型。我反对将元素复制到数组或字符串中。目前我得到的最干净的是使用克隆，找到下面的代码：

```
 import java.util.Stack;

public class helloWorld {

public int getStackElement( Stack<Integer> stack, int index ){
    int foundValue=null;//save the value that needs to be returned
    int position=0; //counter to match the index
    Stack<Integer> altStack = (Stack<Integer>) stack.clone();//the clone of the original stack
    while(position<index)
    {
        System.out.println(altStack.pop());
        position++;
    }
    foundValue=altStack.peek();
    return foundValue;
}

    public static void main(String args[]){
        Stack<Integer> stack = new Stack<Integer>();
        stack.push(10);
        stack.push(20);
        stack.push(30);
        stack.push(40);
        stack.push(50);
        stack.push(60);
        helloWorld obj= new helloWorld();
            System.out.println("value is-"+obj.getStackElement(stack,4));
        System.out.println("stack is "+stack);

    }

} 
```

我知道克隆也是复制，但这是我要消除的基本缺陷。剥离我在问我是否真的能够传递堆栈的值而不是传递其引用的值。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-22T07:51:06.833

```
int position =5;

Integer result = stack.get(position); 
```

Java 文档[在这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Vector.html#get%28int%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-22T08:29:16.753

如果您不能使用另一个堆栈，您可以通过创建递归方法来欺骗和滥用调用堆栈上的局部变量以达到相同的目的：

```
public static <T> T getStackElement(Stack<T> stack, int index) {
  if (index == 0) {
    return stack.peek();
  }

  T x = stack.pop();
  try {
    return getStackElement(stack, index - 1);
  } finally {
    stack.push(x);
  }
} 
```

# cakephp - cakephp 和类 'PDO'

> ID：13507979
> 
> 赞同：2
> 
> 时间：2012-11-22T07:47:20.430
> 
> 标签：cakephp, pdo

我已经完成了我在 Cakephp 中的第一个项目，并且我已经将文件上传到但在类“PDO”中出现错误，我认为这个错误是因为这些扩展：

```
extension="pdo.so"
extension="pdo_mysql.so" 
```

所以我必须要求我的托管公司启用此扩展，我的问题是：1-扩展是否安全？

2-只是我必须启用的扩展或者我必须做另一件事才能使Cakephp在我的服务器上工作？

3-在上传文件之前我必须与我的项目有关。

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-11-22T08:45:19.503

我想你可以在[book.cakephp.org找到所有答案](http://book.cakephp.org/2.0/en/installation.html)

# asp.net-mvc-4 - 将 WebApp 用户（Windows 身份验证）委派给 MVC Web API 失败

> ID：13507980
> 
> 赞同：3
> 
> 时间：2012-11-22T07:47:21.483
> 
> 标签：asp.net-mvc-4, asp.net-web-api, iis-7.5, dotnet-httpclient, identity-delegation

我们有一个具有以下站点结构的 IIS 7.5：

WebApp (ASP.NET Forms) = 网站 (http://WebApp)
   WebAPI (MVC 4 Web API) = 文件夹转换为应用程序 (http://WebApp/webapi)

两者都在同一个 ApplicationPool 下运行。

两者都具有相同的身份验证设置：
- ASP.NET 模拟（经过身份验证的用户）
- Windows 身份验证（提供者：协商）

两个 web.configs 都定义：

```
<authentication mode="Windows" />  
<identity impersonate="true" /> 
```

WebApp 使用 HttpClient 从 WebAPI 调用 WebService：

```
HttpClient _httpClient = new HttpClient(new HttpClientHandler() { UseDefaultCredentials = true });
_httpClient.BaseAddress = new Uri("http://WebApp/webapi/");
_httpClient.DefaultRequestHeaders.Accept.Add(new MediaTypeWithQualityHeaderValue("application/json"));
HttpResponseMessage _response = _httpClient.GetAsync("api/Entity/Get").Result; 
```

WebAPI 使用 MS 企业库连接到数据库。

当我在本地运行时一切正常，当我在 IIS 7.5 服务器上部署它并开始远程调试时，我在 Web API 中的 HttpContext 当前用户是应用程序池标识，而不是登录到 Web 应用程序的用户。我当然希望它是登录到 WebApp 的用户，因为我想使用基于 AD 帐户（组）的安全性。

请任何人都可以提供一些建议以使其正常工作。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T09:04:04.623

以下答案帮助了我们（[https://stackoverflow.com/a/10311823/68024](https://stackoverflow.com/a/10311823/68024)）：

> 有两种可能的方法。如果您有权访问您的服务器 aspnet_config.config，则应设置以下设置（在 web.config 中设置这些设置似乎没有效果）：
> 
> ```
> <legacyImpersonationPolicy enabled="false"/>
> <alwaysFlowImpersonationPolicy enabled="true"/> 
> ```

# facebook-graph-api - 如何获取特定 OG 对象的对象 ID？

> ID：13507983
> 
> 赞同：1
> 
> 时间：2012-11-22T07:47:46.550
> 
> 标签：facebook-graph-api, ads

动作规范：如何获取`object id`特定对象类型的列表。例如，如何获取特定应用程序/页面中的“歌曲”列表。（我确实知道如何获取动作和相关对象的列表）

在下面的示例中，我想为用户提供“搜索”APP XXX 中所有“歌曲”的选项

```
'action_spec':[{'action.type':'music.listens','song':388773468386}, 'APP':'XXXX']}" — 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T08:10:39.543

这将返回您需要的有关特定 OG 对象的所有信息

```
$facebook->api('/me/og.follows'); 
```

当然你需要一个有效的令牌

# excel - 如果 B 列在 Excel 中包含正确的值，则突出显示 A 列中的单元格

> ID：13507984
> 
> 赞同：3
> 
> 时间：2012-11-22T07:47:54.100
> 
> 标签：excel

如果 B 列中的相应单元格包含某个值，我试图让 A 列中的一个单元格突出显示。条件格式化列 B 本身很容易，但无论 A 列中的值是什么，我都想将颜色传递到 A 列。

假设“乔”在周六、周日、周一工作，周二、周三、周四、周五不工作，他的名字在 B 列中，与他在 A 列中标记的工作天数相对。我也想突出显示这些天数每当他“工作”时，他的名字。

我希望这是有道理的。我期待听到以前是否有人以这种方式创建或使用过公式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T09:14:46.703

您可以根据公式设置条件格式`A2`，因此将公式设置为如下所示：

```
=B2="Joe" 
```

要将条件格式复制到其他单元格，我选择了范围并用于`Ctrl+Y`重做条件格式。它更改了公式以匹配当前单元格。

注意：我在 Excel XP 中执行此操作，因为我面前没有 Excel 2010。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-01T06:23:10.490

要格式化两列（根据要求），请选择 ColumnA:B，从中清除现有的 CF 规则，然后 HOME > Styles - Conditional Formatting，New Rule...，*使用公式确定要格式化的单元格*和**格式化该公式所在的值真的:** :

```
=$B1="Joe" 
```

`Format...`, 选择格式选择, `OK`, `OK`.

对我来说`Ctrl`+`Y`在这里也不适用于复制，更不用说跨方面的复制了。

# python - 如何编写一个函数来在python中添加相应字母的整数？

> ID：13507989
> 
> 赞同：1
> 
> 时间：2012-11-22T07:48:05.027
> 
> 标签：python

如何编写一个函数来在python中添加相应字母的整数？

例如：

```
 L=[('a',3),('b',4),('c',5),('a',2),('c',2),('b',1)] 
```

如何通过遍历 L 中的项目来解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-22T07:55:36.877

我想最清楚的方法就是循环并将它们相加。

```
>>> L=[('a',3),('b',4),('c',5),('a',2),('c',2),('b',1)]
>>> import collections
>>> d=collections.defaultdict(int)
>>> for key,n in L:
...   d[key] += n
... 
>>> sorted(d.items())
[('a', 5), ('b', 5), ('c', 7)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T09:17:51.453

您可以尝试定义这样的函数：

```
def sorting(L):

    dit = {}
    result = []
    for l in L :
        dit[l[0]]= 0

    for key , item in dit.items():
        for ll in L :
              if key == ll[0] :
                  dit[key] += ll[1]

    for key , item in dit.items():
        result.append((key , item))

    return sorted(result) 
```

你会看到结果：

```
>>> sorting(L)  

[('a', 5), ('b', 5), ('c', 7)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:44:10.920

您可以使用字典并添加重复的键值，就像那样。

```
dict = {}
for i in L:
  if i[0] in dict: 
        dict[i[0]] += i[1]
  else:
        dict[i[0]] = i[1]
dict.items() 
```

输出将是：[('a', 5), ('c', 7), ('b', 5)]

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-22T07:52:44.650

这是强制性的单行 itertools 解决方案：

```
>>> import itertools
>>> [
...    (k, sum(g[1] for g in group))
...    for k, group in itertools.groupby(sorted(L), key=lambda x: x[0])
... ]
[('a', 5), ('b', 5), ('c', 7)] 
```