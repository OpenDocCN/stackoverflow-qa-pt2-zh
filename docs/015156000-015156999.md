# StackOverflow 问答 15156000-15156999

# mysql - 如何编写正确的查询以查找当前不在课程中的学生

> ID：15156000
> 
> 赞同：0
> 
> 时间：2013-03-01T10:53:33.757
> 
> 标签：mysql, sql, database

我正在努力寻找可以报名参加课程的剩余学生。为此，我需要找到当前活跃且当前不在课程中的学生。但是我认为我正在编写的查询不正确，因为当我运行查询时它一直显示一组空结果我如何才能找到能够注册该课程的剩余学生？

以下是当前查询：

```
SELECT  st.StudentId, StudentAlias, StudentForename, StudentSurname
FROM    Course c
        INNER JOIN Student_Course sc
            ON c.CourseId = sc.CourseId
        INNER JOIN Student st
            ON sc.StudentId = st.StudentId
WHERE   (c.CourseId = 1 AND
        sc.StudentId IS NULL
        AND st.Active = 1)
ORDER   BY st.StudentAlias 
```

以下是表格：

**学生：（**所有学生名单）

```
StudentId  StudentAlias  StudentForename  StudentSurname  Active
1          u09382        James            Smith           1
2          u83923        John             Brooks          1
3          u38292        Karen            Bradshaw        0
4          u20039        Chris            Cameron         1
5          u39399        Jane             Fields          1 
```

**课程：（**所有课程列表）

```
CourseId  CourseNo  CourseName
1         INFO121   ICT
2         BUS122    Business and Finance
3         ENG432    English Language 
```

**Student_Course：（**参加相应课程的学生名单）

```
StudentId  CourseId
1          1
1          3
2          1
4          2
5          2 
```

因此，例如，如果我选择`CourseId = 1`，那么它应该显示活跃但显然不活跃的学生， `CourseId = 1`这意味着它应该在下面显示这些学生，以便有可能注册课程：

```
4 - Chris Cameron
5 - Jane Fields 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:04:14.823

试试这个查询

```
SELECT s.studentId, s.Forename
FROM Student s
WHERE s.studentId NOT IN (SELECT studentId 
FROM  Student_Course c WHERE c.courseId = 1) AND s.Active = 1 
```

内部子查询返回 courseId =1 的学生，在外部查询中我们过滤这些学生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:59:12.900

试试这个

```
SELECT  st.StudentId, StudentAlias, StudentForename, StudentSurname
FROM    Course c
        INNER JOIN Student_Course sc
            ON c.CourseId = sc.CourseId
        INNER JOIN Student st
            ON sc.StudentId = st.StudentId
WHERE   (sc.CourseId <> 1
        AND st.Active = 1)
ORDER   BY st.StudentAlias 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:02:01.157

要找到不在课程中的活跃学生，请执行以下操作：-

```
SELECT  st.StudentId, StudentAlias, StudentForename, StudentSurname
FROM    Student st
LEFT OUTER JOIN Student_Course sc ON sc.StudentId = st.StudentId
LEFT OUTER JOIN Course c ON c.CourseId = sc.CourseId
WHERE   c.CourseId IS NULL
AND st.Active = 1
ORDER   BY st.StudentAlias 
```

如果您想检查未上特定课程的学生，那么

```
SELECT  st.StudentId, StudentAlias, StudentForename, StudentSurname
FROM    Student st
LEFT OUTER JOIN Student_Course sc ON sc.StudentId = st.StudentId
LEFT OUTER JOIN Course c ON c.CourseId = sc.CourseId AND CourseId = 1
WHERE   c.CourseId IS NULL
AND st.Active = 1
ORDER   BY st.StudentAlias 
```

把课程检查在ON子句中

# maven - maven axis2壁垒ws-security：org.apache.axis2.AxisFault：缺少SOAP标头

> ID：15156001
> 
> 赞同：1
> 
> 时间：2013-03-01T10:53:38.953
> 
> 标签：maven, axis2, ws-security, rampart

我有一个没有 maven 开发的 web 服务客户端。它使用axis2+rampart+ws-security 连接到远程Web 服务并且可以正常工作。

现在，我必须维护该项目。为了避免没有 maven 的项目的所有痛苦，我准备了一个包含所有项目依赖项的 pom.xml，并且我从原始项目中复制了源代码而没有修改。

如果我从原始项目打包一个 JAR，并将该 jar（以及库的所有依赖项 jar）放在客户端的 gui 中，它就可以工作。

如果我从 maven 项目打包一个 JAR（我用 IntelliJ Idea 工件打包，以与原始项目相同的方式）并将 jar（以及库的所有依赖项 jar）放在客户端的 gui 中，之后与 web 服务握手我得到这个异常：

```
 [pool-1-thread-7] ERROR org.apache.axis2.engine.AxisEngine - SOAP header missing
org.apache.axis2.AxisFault: SOAP header missing
    at org.apache.rampart.handler.RampartReceiver.setFaultCodeAndThrowAxisFault(RampartReceiver.java:180)
    at org.apache.rampart.handler.RampartReceiver.invoke(RampartReceiver.java:99)
    at org.apache.axis2.engine.Phase.invokeHandler(Phase.java:340)
    at org.apache.axis2.engine.Phase.invoke(Phase.java:313)
    at org.apache.axis2.engine.AxisEngine.invoke(AxisEngine.java:262)
    at org.apache.axis2.engine.AxisEngine.receive(AxisEngine.java:168)
    at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:364)
    at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:421)
    at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
    at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
    at com.dromedian.sst.be.blogic.ws.ConsultaDaTotemStub.consultaListaAnalisi(ConsultaDaTotemStub.java:366)
    at com.dromedian.sst.be.blogic.MasterTransaction.getListaAnalisi(MasterTransaction.java:869)
    at com.dromedian.sst.fe.presenter.Referti$1Local$57.invoke$(Referti.fx:197)
    at com.sun.javafx.functions.Function0.invoke(Function0.java:44)
    at com.sun.javafx.functions.Function0.invoke$(Function0.java:38)
    at com.dromedian.sst.fe.async.AsyncTask.taskRun(AsyncTask.fx:32)
    at com.dromedian.sst.fe.async.AsyncTaskHelper.run(AsyncTaskHelper.java:29)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)
Caused by: org.apache.rampart.RampartException: SOAP header missing
    at org.apache.rampart.RampartEngine.process(RampartEngine.java:96)
    at org.apache.rampart.handler.RampartReceiver.invoke(RampartReceiver.java:92)
    ... 18 more 
```

pom.xml

```
 <?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>SST-BE</groupId>
    <artifactId>ESTAV</artifactId>
    <version>1.0-SNAPSHOT</version>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <repositories>
        <!--      <repository>
                  <id>central</id>
                  <name>Maven Central</name>
                  <url>http://repo1.maven.org/maven2/</url>
             </repository>-->
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <releases>
                <updatePolicy>never</updatePolicy>
            </releases>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
            <id>central</id>
            <name>Maven Plugin Repository</name>
            <url>http://repo1.maven.org/maven2</url>
        </pluginRepository>
    </pluginRepositories>
    <dependencies>
        <!--WEBSERVICE RAMPART+AXIS2+WS-SECURITY-->
        <dependency>
            <groupId>org.apache.ws.commons.axiom</groupId>
            <artifactId>axiom-api</artifactId>
            <version>${AXIOM_VERSION}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.ws.commons.axiom</groupId>
            <artifactId>axiom-impl</artifactId>
            <version>${AXIOM_VERSION}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.ws.commons.axiom</groupId>
            <artifactId>axiom-dom</artifactId>
            <version>${AXIOM_VERSION}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2</artifactId>
            <version>${AXIS2_VERSION}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-adb</artifactId>
            <version>${AXIS2_VERSION}</version>
            <exclusions>
                <exclusion>
                    <artifactId>geronimo-activation_1.1_spec</artifactId>
                    <groupId>org.apache.geronimo.specs</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-kernel</artifactId>
            <version>${AXIS2_VERSION}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-transport-local</artifactId>
            <version>${AXIS2_VERSION}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-transport-http</artifactId>
            <version>${AXIS2_VERSION}</version>
        </dependency>
        <dependency>
            <groupId>commons-httpclient</groupId>
            <artifactId>commons-httpclient</artifactId>
            <version>3.1</version>
            <exclusions>
                <exclusion>
                    <artifactId>commons-logging</artifactId>
                    <groupId>commons-logging</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.neethi</groupId>
            <artifactId>neethi</artifactId>
            <version>3.0.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.rampart</groupId>
            <artifactId>rampart</artifactId>
            <version>${AXIS2_VERSION}</version>
            <exclusions>
                <exclusion>
                    <artifactId>xalan</artifactId>
                    <groupId>org.apache.xalan</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>axiom-api</artifactId>
                    <groupId>org.apache.ws.commons.axiom</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>wss4j</artifactId>
                    <groupId>org.apache.ws.security</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.rampart</groupId>
            <artifactId>rampart-core</artifactId>
            <version>${AXIS2_VERSION}</version>
            <exclusions>
                <exclusion>
                    <artifactId>xalan</artifactId>
                    <groupId>org.apache.xalan</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>wss4j</artifactId>
                    <groupId>org.apache.ws.security</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.opensaml</groupId>
            <artifactId>opensaml</artifactId>
            <version>2.5.1-1</version>
            <exclusions>
                <exclusion>
                    <artifactId>xalan</artifactId>
                    <groupId>xalan</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>slf4j-api</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>commons-httpclient</artifactId>
                    <groupId>commons-httpclient</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>commons-codec</artifactId>
                    <groupId>commons-codec</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>commons-lang</artifactId>
                    <groupId>commons-lang</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>xml-apis</artifactId>
                    <groupId>xml-apis</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>log4j-over-slf4j</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.rampart</groupId>
            <artifactId>rampart-policy</artifactId>
            <version>${AXIS2_VERSION}</version>
            <exclusions>
                <exclusion>
                    <artifactId>opensaml</artifactId>
                    <groupId>org.opensaml</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>xalan</artifactId>
                    <groupId>org.apache.xalan</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.apache.rampart</groupId>
            <artifactId>rampart-trust</artifactId>
            <version>${AXIS2_VERSION}</version>
            <exclusions>
                <exclusion>
                    <artifactId>opensaml</artifactId>
                    <groupId>org.opensaml</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>xalan</artifactId>
                    <groupId>org.apache.xalan</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>xalan</groupId>
            <artifactId>xalan</artifactId>
            <version>2.7.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.ws.security</groupId>
            <artifactId>wss4j</artifactId>
            <version>1.6.9</version>
            <exclusions>
                <exclusion>
                    <artifactId>opensaml</artifactId>
                    <groupId>org.opensaml</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <!-- END WEBSERICE -->

        <!-- HIBERNATE JPA-->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>${HIBERNATE_VERSION}</version>
            <exclusions>
                <exclusion>
                    <artifactId>xml-apis</artifactId>
                    <groupId>xml-apis</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>commons-collections</artifactId>
                    <groupId>commons-collections</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.0.1.GA</version>
            <exclusions>
                <exclusion>
                    <artifactId>activation</artifactId>
                    <groupId>javax.activation</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>slf4j-api</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.hibernate.javax.persistence</groupId>
            <artifactId>hibernate-jpa-2.0-api</artifactId>
            <version>1.0.1.Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${HIBERNATE_VERSION}</version>
        </dependency>
        <!--END HIBERNATE-->

        <!--GOOGLE-->
        <dependency>
            <groupId>com.google.guava</groupId>
            <artifactId>guava</artifactId>
            <version>13.0</version>
        </dependency>
        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>com.google.code.findbugs</groupId>
            <artifactId>jsr305</artifactId>
            <version>1.3.9</version>
        </dependency>
        <!--END GOOGLE-->

        <dependency>
            <groupId>javax.activation</groupId>
            <artifactId>activation</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>org.bouncycastle</groupId>
            <artifactId>bcmail-jdk16</artifactId>
            <version>${BOUNCYCASTLE_VERSION}</version>
        </dependency>
        <dependency>
            <groupId>org.bouncycastle</groupId>
            <artifactId>bcprov-jdk16</artifactId>
            <version>${BOUNCYCASTLE_VERSION}</version>
        </dependency>
        <dependency>
            <groupId>net.java.dev.jna</groupId>
            <artifactId>jna</artifactId>
            <version>3.5.1</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>
        <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>batik-ext</artifactId>
            <version>1.7</version>
            <exclusions>
                <exclusion>
                    <artifactId>xml-apis</artifactId>
                    <groupId>xml-apis</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>eu.medsea.mimeutil</groupId>
            <artifactId>mime-util</artifactId>
            <version>2.1.3</version>
            <exclusions>
                <exclusion>
                    <artifactId>log4j</artifactId>
                    <groupId>log4j</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>slf4j-api</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>slf4j-log4j12</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.9</version>
        </dependency>
        <dependency>
            <groupId>org.simpleframework</groupId>
            <artifactId>simple-xml</artifactId>
            <version>2.7</version>
        </dependency>
        <dependency>
            <groupId>commons-codec</groupId>
            <artifactId>commons-codec</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-io</artifactId>
            <version>1.3.2</version>
        </dependency>
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>

        <!-- LOCAL DEPENDENCIES -->
        <dependency>
            <groupId>Dromedian</groupId>
            <artifactId>DromedianArduinoUNO</artifactId>
            <version>1</version>
            <scope>system</scope>
            <systemPath>${project.basedir}/lib/DromedianArduinoUNO.jar</systemPath>
        </dependency>
        <dependency>
            <groupId>jxsf</groupId>
            <artifactId>jxfsclient</artifactId>
            <version>3.0</version>
            <scope>system</scope>
            <systemPath>${project.basedir}/lib/jxfsclient3.0.jar</systemPath>
        </dependency>
        <dependency>
            <groupId>jxsf</groupId>
            <artifactId>jxfsserver</artifactId>
            <version>3.0</version>
            <scope>system</scope>
            <systemPath>${project.basedir}/lib/jxfsserver3.0.jar</systemPath>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-simple</artifactId>
            <version>1.7.2</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>log4j-over-slf4j</artifactId>
            <version>1.6.1</version>
            <exclusions>
                <exclusion>
                    <artifactId>slf4j-api</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>MolliesClient</groupId>
            <artifactId>MolliesClient</artifactId>
            <version>1</version>
            <scope>system</scope>
            <systemPath>${project.basedir}/lib/MolliesClient.jar</systemPath>
        </dependency>
        <dependency>
            <groupId>RXTXcomm</groupId>
            <artifactId>RXTXcomm</artifactId>
            <version>2.2pre1</version>
            <scope>system</scope>
            <systemPath>${project.basedir}/lib/RXTXcomm.jar</systemPath>
        </dependency>

    </dependencies>
    <properties>
        <AXIOM_VERSION>1.2.13</AXIOM_VERSION>
        <AXIS2_VERSION>1.6.2</AXIS2_VERSION>
        <HIBERNATE_VERSION>4.0.1.Final</HIBERNATE_VERSION>
        <BOUNCYCASTLE_VERSION>1.46</BOUNCYCASTLE_VERSION>
    </properties>
</project> 
```

感谢您的所有建议和帮助！

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2013-03-04T15:11:05.510

解决：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>SST-BE</groupId>
    <artifactId>ESTAV</artifactId>
    <version>1.0-SNAPSHOT</version>
    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <source>1.7</source>
                    <target>1.7</target>
                </configuration>
            </plugin>
        </plugins>
    </build>
    <repositories>
        <repository>
            <id>central</id>
            <name>Maven Central</name>
            <url>http://repo1.maven.org/maven2/</url>
        </repository>
    </repositories>
    <pluginRepositories>
        <pluginRepository>
            <releases>
                <updatePolicy>never</updatePolicy>
            </releases>
            <snapshots>
                <enabled>false</enabled>
            </snapshots>
            <id>central</id>
            <name>Maven Plugin Repository</name>
            <url>http://repo1.maven.org/maven2</url>
        </pluginRepository>
    </pluginRepositories>
    <dependencies>
        <!--WEBSERVICE RAMPART+AXIS2+WS-SECURITY-->
        <!-- axis2/axiom: dependencies -->
        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2</artifactId>
            <version>${axis2.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-transport-local</artifactId>
            <version>${axis2.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-transport-http</artifactId>
            <version>${axis2.version}</version>
        </dependency>
        <dependency>
            <groupId>org.apache.axis2</groupId>
            <artifactId>axis2-codegen</artifactId>
            <version>${axis2.version}</version>
            <scope>provided</scope>
        </dependency>

        <!-- axis2-rampart: dependencies -->
        <dependency>
            <groupId>org.apache.rampart</groupId>
            <artifactId>rampart-core</artifactId>
            <version>${axis2.version}</version>
            <exclusions>
                <exclusion>
                    <groupId>org.slf4j</groupId>
                    <artifactId>slf4j-jdk14</artifactId>
                </exclusion>
                <exclusion>
                    <artifactId>log4j-over-slf4j</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>xalan</artifactId>
                    <groupId>xalan</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>xalan</artifactId>
                    <groupId>org.apache.xalan</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>wss4j</artifactId>
                    <groupId>org.apache.ws.security</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>xalan</groupId>
            <artifactId>xalan</artifactId>
            <version>2.7.1</version>
        </dependency>
        <dependency>
            <groupId>org.apache.ws.security</groupId>
            <artifactId>wss4j</artifactId>
            <version>1.6.9</version>
        </dependency>

        <!-- slf4j: dependencies -->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>${slf4j.version}</version>
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>${slf4j.version}</version>
            <!--
            <scope>runtime</scope>
            -->
        </dependency>
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>jcl-over-slf4j</artifactId>
            <version>${slf4j.version}</version>
        </dependency>
        <!-- log4j: dependencies -->
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>${log4j.version}</version>
            <exclusions>
                <exclusion>
                    <artifactId>jmxtools</artifactId>
                    <groupId>com.sun.jdmk</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>jmxri</artifactId>
                    <groupId>com.sun.jmx</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>mail</artifactId>
                    <groupId>javax.mail</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>jms</artifactId>
                    <groupId>javax.jms</groupId>
                </exclusion>
            </exclusions>
        </dependency>

        <!-- END WEBSERICE -->

        <!-- HIBERNATE JPA-->
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>${HIBERNATE_VERSION}</version>
            <exclusions>
                <exclusion>
                    <artifactId>xml-apis</artifactId>
                    <groupId>xml-apis</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>commons-collections</artifactId>
                    <groupId>commons-collections</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-validator</artifactId>
            <version>4.0.1.GA</version>
            <exclusions>
                <exclusion>
                    <artifactId>activation</artifactId>
                    <groupId>javax.activation</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>slf4j-api</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>org.hibernate.javax.persistence</groupId>
            <artifactId>hibernate-jpa-2.0-api</artifactId>
            <version>1.0.1.Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${HIBERNATE_VERSION}</version>
        </dependency>
        <!--END HIBERNATE-->

        <!--GOOGLE-->
        <dependency>
            <groupId>com.google.guava</groupId>
            <artifactId>guava</artifactId>
            <version>13.0</version>
        </dependency>
        <dependency>
            <groupId>com.google.code.gson</groupId>
            <artifactId>gson</artifactId>
            <version>2.2.2</version>
        </dependency>
        <dependency>
            <groupId>com.google.code.findbugs</groupId>
            <artifactId>jsr305</artifactId>
            <version>1.3.9</version>
        </dependency>
        <!--END GOOGLE-->

        <dependency>
            <groupId>javax.activation</groupId>
            <artifactId>activation</artifactId>
            <version>1.1.1</version>
        </dependency>
        <dependency>
            <groupId>org.bouncycastle</groupId>
            <artifactId>bcmail-jdk16</artifactId>
            <version>${BOUNCYCASTLE_VERSION}</version>
        </dependency>
        <dependency>
            <groupId>org.bouncycastle</groupId>
            <artifactId>bcprov-jdk16</artifactId>
            <version>${BOUNCYCASTLE_VERSION}</version>
        </dependency>
        <dependency>
            <groupId>net.java.dev.jna</groupId>
            <artifactId>jna</artifactId>
            <version>3.5.1</version>
        </dependency>
        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.17</version>
        </dependency>
        <dependency>
            <groupId>org.apache.xmlgraphics</groupId>
            <artifactId>batik-ext</artifactId>
            <version>1.7</version>
            <exclusions>
                <exclusion>
                    <artifactId>xml-apis</artifactId>
                    <groupId>xml-apis</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>eu.medsea.mimeutil</groupId>
            <artifactId>mime-util</artifactId>
            <version>2.1.3</version>
            <exclusions>
                <exclusion>
                    <artifactId>log4j</artifactId>
                    <groupId>log4j</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>slf4j-api</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
                <exclusion>
                    <artifactId>slf4j-log4j12</artifactId>
                    <groupId>org.slf4j</groupId>
                </exclusion>
            </exclusions>
        </dependency>
        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.9</version>
        </dependency>
        <dependency>
            <groupId>org.simpleframework</groupId>
            <artifactId>simple-xml</artifactId>
            <version>2.7</version>
        </dependency>
        <dependency>
            <groupId>commons-codec</groupId>
            <artifactId>commons-codec</artifactId>
            <version>1.2</version>
        </dependency>
        <dependency>
            <groupId>org.apache.commons</groupId>
            <artifactId>commons-io</artifactId>
            <version>1.3.2</version>
        </dependency>
        <dependency>
            <groupId>javax.validation</groupId>
            <artifactId>validation-api</artifactId>
            <version>1.0.0.GA</version>
        </dependency>

        <!-- LOCAL DEPENDENCIES -->
        <dependency>
            <groupId>Dromedian</groupId>
            <artifactId>DromedianArduinoUNO</artifactId>
            <version>1</version>
            <scope>system</scope>
            <systemPath>${project.basedir}/lib/DromedianArduinoUNO.jar</systemPath>
        </dependency>

        <dependency>
            <groupId>jxsf</groupId>
            <artifactId>jxfsclient</artifactId>
            <version>3.0</version>
            <scope>system</scope>
            <systemPath>${project.basedir}/lib/jxfsclient3.0.jar</systemPath>
        </dependency>
        <dependency>
            <groupId>jxsf</groupId>
            <artifactId>jxfsserver</artifactId>
            <version>3.0</version>
            <scope>system</scope>
            <systemPath>${project.basedir}/lib/jxfsserver3.0.jar</systemPath>
        </dependency>
        <dependency>
            <groupId>MolliesClient</groupId>
            <artifactId>MolliesClient</artifactId>
            <version>1</version>
            <scope>system</scope>
            <systemPath>${project.basedir}/lib/MolliesClient.jar</systemPath>
        </dependency>
        <dependency>
            <groupId>RXTXcomm</groupId>
            <artifactId>RXTXcomm</artifactId>
            <version>2.2pre1</version>
            <scope>system</scope>
            <systemPath>${project.basedir}/lib/RXTXcomm.jar</systemPath>
        </dependency>

    </dependencies>
    <properties>
        <slf4j.version>1.7.2</slf4j.version>
        <log4j.version>1.2.15</log4j.version>
        <axis2.version>1.6.2</axis2.version>
        <rampart.version>1.6.0</rampart.version>

        <AXIOM_VERSION>1.2.13</AXIOM_VERSION>
        <AXIS2_VERSION>1.6.2</AXIS2_VERSION>
        <HIBERNATE_VERSION>4.0.1.Final</HIBERNATE_VERSION>
        <BOUNCYCASTLE_VERSION>1.46</BOUNCYCASTLE_VERSION>
    </properties>
</project> 
```

# c++ - 如何编译 Hinnant 的 short_alloc 分配器

> ID：15156005
> 
> 赞同：4
> 
> 时间：2013-03-01T10:53:46.100
> 
> 标签：c++, c++11, memory-management, heap-memory, stack-memory

我想尝试新[的 Hinnant 的 short_alloc 分配器](http://home.roadrunner.com/~hinnant/stack_alloc.html)，据我所知，它取代了旧的[stack_alloc](http://home.roadrunner.com/~hinnant/stack_alloc.h)分配器。但是，我无法编译矢量示例。`g++`说：

```
~# g++ -std=c++11 stack-allocator-test.cpp -o stack-allocator-test
In file included from stack-allocator-test.cpp:6:0:
short_alloc.h:11:13: error: ‘alignment’ is not a type
short_alloc.h:11:22: error: ISO C++ forbids declaration of ‘alignas’ with no type [-fpermissive]
short_alloc.h:11:22: error: expected ‘;’ at end of member declaration 
```

据我所知，`g++`抱怨`line 10`and `11`：

```
static const std::size_t alignment = 16;
alignas(alignment) char buf_[N]; 
```

似乎编译器不喜欢[alignas](http://en.cppreference.com/w/cpp/language/alignas)的“表达式版本”，但它只需要“type-id 版本”。

我`g++ 4.7.2`在 Ubuntu 12.10 下使用。

```
~# g++ --version
g++ (Ubuntu/Linaro 4.7.2-2ubuntu1) 4.7.2 
```

可能我错过了一些明显的东西，但我无法弄清楚。任何帮助，将不胜感激。（请不要告诉我我必须升级到更新`g++`，我懒得这样做:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T11:01:54.900

g++-4.7.2 不支持`alignas`. 来自[http://gcc.gnu.org/projects/cxx0x.html](http://gcc.gnu.org/projects/cxx0x.html)：

> 对齐支持 | N2341 | 海合会 4.8

尝试使用 g++-4.8.0 或 clang；或者，您可以使用[`__attribute__((aligned))`](http://gcc.gnu.org/onlinedocs/gcc-3.2/gcc/Variable-Attributes.html#Variable%20Attributes)：

```
__attribute__((aligned (8))) char buf_[12]; 
```

注意`__attribute__((aligned))`只接受某些整数常量表达式（文字、模板参数）；它不接受`static const`变量。

# php - 如何确定从子类调用方法的方式

> ID：15156015
> 
> 赞同：1
> 
> 时间：2013-03-01T10:54:01.407
> 
> 标签：php, class, scope

请帮我。例如，我有一个类 Foo，它从类 Bar 扩展而来。

```
 class Bar
    {
          public function __call($func, $args){
               echo "Calling method {$func}";
          }
          public function __callstatic($func, $args){
               echo "Calling static method {$func}";
          }
          public function run(){
               echo "calling Bar::run method \n";
          }
    }
    class Foo extends Bar
    {
          public $objBar;
          public function __construct(){
              $this -> objBar = new Bar();
          }
          public function callViaObject(){
              $this -> objBar -> run();
              $this -> objBar -> run1();
          }
          public function callViaParent(){
              parent::run();
              parent::run1();
          }
    }
    $foo = new foo();
    $foo -> callViaObject(); 
    /* output 
       calling Bar::run method \n
       Calling method run1; */
    $foo -> callViaParent();
    /* output 
       calling Bar::run method \n
       Calling method run1; !! */ 
```

这里有一个问题，当我用`parent::`from子类调用方法，并且父类有一个对象时，调用方法`parent::`不是静态调用。

那么如何签入`Bar`课堂，如何调用该方法？我可以检查呼叫类型是 parent:: 吗？

非常感谢大家！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T18:53:38.747

加入`private static function run1() {}`你的 A 类。

# android - 十进制值的 Android EditText 不允许更改尾数

> ID：15156017
> 
> 赞同：1
> 
> 时间：2013-03-01T10:54:03.980
> 
> 标签：android, numbers, android-edittext, decimal, mantissa

在我的 android 应用程序中，我使用 EditText 作为十进制值：

```
 <EditText
        android:id="@+id/valueEditor"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="numberDecimal" > 
```

我用

```
double value; /* ... */
valueEditor = (EditText) v.findViewById(R.id.valueEditor);
valueEditor.setText(Double.toString(value)); 
```

用一个值填充这个 EditText。

现在的问题是像 1.0E-9 这样的值。可以更改指数，但除了删除数字之外，不能更改尾数。有谁知道解决方案（除了明显不使用 inputType numberDecimal）？

# ios - 在两个位置之间画一条线 - WhirlyGlobe

> ID：15156018
> 
> 赞同：0
> 
> 时间：2013-03-01T10:54:06.427
> 
> 标签：ios

我正在开发一个使用 WhirlyGlobe ( [http://code.google.com/p/whirlyglobe/](http://code.google.com/p/whirlyglobe/) ) 的 IOS 应用程序。这个 API 对我来说是全新的。

有人可以帮我，使用代码在两个位置（纬度，经度）之间画线吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T17:22:32.997

我相信，目前如果你抓住项目的“主”分支，没有功能可以做到这一点。但是，开发分支有这样的东西，还有更多。看看这篇博客文章，它有一个从一个位置绘制到另一个位置的线的屏幕截图：

[http://mousebirdconsulting.blogspot.ca/2013/01/whirlyglobe-component-21-beta1.html](http://mousebirdconsulting.blogspot.ca/2013/01/whirlyglobe-component-21-beta1.html)

您可以从 github 下载并编译开发分支，或者获取二进制分发版，最新版本在这里：

[https://dl.dropbox.com/u/29069465/WhirlyGlobe-MaplyComponentDistribution_2_1_beta2.zip](https://dl.dropbox.com/u/29069465/WhirlyGlobe-MaplyComponentDistribution_2_1_beta2.zip)

浏览头文件并了解它的工作原理将使您受益，因此当您在寻找这是如何完成的时，您会看到更多有趣的东西。

WhirlyGlobe 有很多事情我还没有做，如果我能试试这个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T09:03:15.700

您可以在 MaplyShape.h 中使用 MaplyShapeGreatCircle 并将高度设置为接近 0.0 。

# mysql - 减少或消除持久连接mysql

> ID：15156019
> 
> 赞同：0
> 
> 时间：2013-03-01T10:54:07.267
> 
> 标签：mysql

我正在尝试在 2G Ram Linux Centos 的 VPS 上微调 mysql，我使用了 mysqltuner.pl 报告说：

```
 General recommendations:     
    Add skip-innodb to MySQL configuration to disable InnoDB     
    MySQL started within last 24 hours - recommendations may be inaccurate     
    Enable the slow query log to troubleshoot bad queries     
    **Reduce or eliminate persistent connections to reduce connection usage**     
    When making adjustments, make tmp_table_size/max_heap_table_size equal     
    Reduce your SELECT DISTINCT queries without LIMIT clauses 

Variables to adjust:    
max_connections (> 151)     
wait_timeout (< 28800)    
interactive_timeout (< 28800)     
tmp_table_size (> 16M)     
max_heap_table_size (> 16M) 
```

我有一个关于“减少或消除持久连接以减少连接使用”的问题： 1\. 当我的网站运行时，我如何知道有多少连接 - 用 PHP 编写？2\. 如何减少或消除它们？如果 my.cnf 设置中有一个针对此的变量，或者我必须在 PHP 端执行它？

请帮忙，因为我还在做试验和错误，我正在学习，但对 mysql 仍然不太了解。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:59:15.030

只是不要在你的 PHP 应用程序中使用持久连接（很可能你没有使用它们，因为设置它们需要使用特殊的函数/标志，所以你会知道的）。

请参阅手册条目[`mysql_pconnect`](http://php.net/manual/en/function.mysql-pconnect.php)（另请注意那里指向 mysqli 和 PDO 的链接）

# python - 变量名拼写错误。避免此类错误的最佳方法是什么？

> ID：15156022
> 
> 赞同：2
> 
> 时间：2013-03-01T10:54:16.600
> 
> 标签：python

来自没有动态类型的编译语言的背景，我发现在 Python 中令人沮丧的是通过拼写错误无意中引入新变量名的可能性。

几天前我有一个这样的例子，代码是这样的：

```
received = False

while not received:
   ...
   ...
   ...
   recieved = (some_conditional_statments)
   ...
   ...

print some_results 
```

这里*收到*的是一个布尔变量，在达到循环的终止条件时应该设置为真。*显然，在这种情况下，由于拼写错误的变量（rec* ie* *ved），它陷入了无限循环

显然编译器会立即发现这样的错误，我只是想知道人们使用什么技术来帮助避免在 Python 中出现这样的错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T10:55:47.347

使用像样的 linter，并使用自动化测试（单元测试等）测试您的代码。大多数 IDE 和文本编辑器都可以设置为自动运行 linter。

我建议使用[`flake8`](https://pypi.python.org/pypi/flake8); 它结合了[`pep8`样式检查器](http://pep8.readthedocs.org/en/latest/)、[`pyflakes`linter](https://launchpad.net/pyflakes)的输出（它会捕获上述错误，它会告诉您`recieved`已分配给但从未在其他地方使用过），并会告诉您您的代码是否变得太复杂（使用[McCabe 圈复杂度指标](https://en.wikipedia.org/wiki/Cyclomatic_complexity)）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T10:57:32.813

您可以将[pychecker](http://pychecker.sourceforge.net/)用于此类事情。

这里有一个[关于 python linter](https://stackoverflow.com/questions/5611776/what-are-the-comprehensive-lint-checkers-for-python)的问题，你应该检查一下。

# ios - 如何将最后添加的内容集中在 UIScrollview 的末尾？

> ID：15156026
> 
> 赞同：0
> 
> 时间：2013-03-01T10:54:31.573
> 
> 标签：ios, objective-c, xcode, uiscrollview

在我的项目中，我有滚动视图。当我拖动图像时，它会在滚动视图中添加一些内容。同样，我可以通过希望添加多次。当滚动视图的内容增加时，它将更新内容大小。

但我希望滚动视图将焦点放在滚动中最后添加的内容。怎么做？请帮我一些代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T10:58:44.727

请更清楚，您希望能够滚动到最后添加的元素吗？如果是这样的话，

```
CGPoint bottomOffset = CGPointMake(0, scrollView.contentSize.height - scrollView.bounds.size.height);
[scrollView setContentOffset:bottomOffset animated:YES]; 
```

# iphone - 如何在iOS中获取个人热点的子网掩码和广播地址

> ID：15156028
> 
> 赞同：10
> 
> 时间：2013-03-01T10:54:34.397
> 
> 标签：iphone, ios, networking, personal-hotspot

我需要找到一种方法来找出我在 iOS 中的个人热点的子网掩码和广播地址。

如果设备连接到 WiFi，我正在使用以下方式查找设备的 IP 地址。但无法弄清楚获取个人热点的网络属性的方法。

```
+ (NSString *) localIPAddress
{
    NSString *address = @"error";
    struct ifaddrs *interfaces = NULL;
    struct ifaddrs *temp_addr = NULL;
    int success = 0;

    // retrieve the current interfaces - returns 0 on success
    success = getifaddrs(&interfaces);

    if (success == 0)
    {
        temp_addr = interfaces;

        while(temp_addr != NULL)
        {
            // check if interface is en0 which is the wifi connection on the iPhone
            if(temp_addr->ifa_addr->sa_family == AF_INET)
            {
                if([[NSString stringWithUTF8String:temp_addr->ifa_name] isEqualToString:@"en0"])
                {
                    address = [NSString stringWithUTF8String:inet_ntoa(((struct sockaddr_in *)temp_addr->ifa_addr)->sin_addr)];
                }
            }

            temp_addr = temp_addr->ifa_next;
        }
    }

    freeifaddrs(interfaces);

    return address;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T11:34:06.037

在分配地址的地方，只需插入：

```
netmask = [NSString stringWithUTF8String:inet_ntoa(((struct sockaddr_in *)temp_addr->ifa_netmask)->sin_addr)]; 
```

# android - Android：EditText 中的太多字符会移动我的视图（带有 ViewSwitchers 的 TableLayout）

> ID：15156031
> 
> 赞同：0
> 
> 时间：2013-03-01T10:54:48.943
> 
> 标签：android, width, tablelayout, tablerow, viewswitcher

我`TableLayout`要显示一些数据。每行有两列：第一列包含字段名称，第二列包含字段值。如果单击任何字段，我将显示一个`EditText`. 我使用`ViewSwitcher`.

当`TextView`/`EditText`只有几个字符时，视图很好，但如果第一行已满，则第一列（字段名称）变得更窄，第二列变得更宽。我不希望这种情况发生，我希望我的列总是相同的大小。

这是我的布局：

```
<TableLayout
    android:id="@+id/formLayout"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textLicense"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/license"
            android:textSize="18sp"
            android:textStyle="bold" />

        <ViewSwitcher
            android:id="@+id/licenseSwitcher"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="3" >

            <TextView
                android:id="@+id/tvLicenseVariable"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:clickable="true"
                android:onClick="LicenseViewClicked"
                android:textSize="18sp" />

            <com.timeondriver.petrolcontrol.MySpinner
                android:id="@+id/spinnerLicense"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:prompt="@string/license_prompt" />
        </ViewSwitcher>
    </TableRow>

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textDate"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/date"
            android:textSize="18sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/tvDateVariable"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="3"
            android:clickable="true"
            android:onClick="DateViewClicked"
            android:textSize="18sp" />
    </TableRow>

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:layout_marginTop="10dp">

        <TextView
            android:id="@+id/textPlace"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/place"
            android:textSize="18sp"
            android:textStyle="bold" />

        <ViewSwitcher
            android:id="@+id/placeSwitcher"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="3" >

            <TextView
                android:id="@+id/tvPlaceVariable"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:clickable="true"
                android:onClick="PlaceViewClicked"
                android:textSize="18sp" />

            <EditText
                    android:id="@+id/editTextPlace"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                android:imeOptions="actionDone"
            android:maxLines="3"
                    android:inputType="textMultiLine"
                     />
        </ViewSwitcher>
    </TableRow>
</TableLayout> 
```

这是位置数据较短时视图的外观：

![在此处输入图像描述](../Images/64ab0450ba82105b6bec4c462c1833b3.png)

这就是当地点数据有太多字符（第一行已满）时视图的样子：

![在此处输入图像描述](../Images/274d6eac3e640652ebb1f4dfd0431896.png)

许可证、日期和时间行不是问题，因为它们的大小是有限的。具有位置数据的行是在字符过多时更改列宽的行。我怎样才能在我的列中始终保持相同的宽度？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:21:16.457

我想问题是你指定了一个 layout_width 和一个 layout_weight。如果您没有输入足够的文本，则似乎使用了指定的 layout_width，即 wrap_content。如果您输入足够多的文本，您会达到大于指定 layout_weight 的宽度，因此此时 layout_weight 属性很重要。要始终具有相同大小的列，请尝试将 layout_width 设置为 0dpi，以便仅使用 layout_weight 属性。然后您必须在两列之间指定不同的比率，因为 1/4 到 3/4 似乎不适合左列中的文本。也许您应该选择 2/5 到 3/5 之类的值，这意味着左列的 layout_weight=2 和右列的 3。

# php - 如何通过 POST 变量传递动态创建的输入值

> ID：15156039
> 
> 赞同：0
> 
> 时间：2013-03-01T10:55:11.543
> 
> 标签：php, mysql

我会简短。
我有这个：

函数.php

```
function consulta($sql){
    $consulta = mysql_query($sql, $GLOBALS['conexion']) or die (mysql_error());

    if(mysql_num_rows($consulta) == 0){
        return -1;
    }else if (mysql_num_rows($consulta) == 1){
        $fila = mysql_fetch_array($consulta);
        return $fila;
    }else{
        while($fila = mysql_fetch_array($consulta)){
            $lista[] = $fila;
        }
        return $lista;
    }
} 
```

表单生成器.php

```
$art_ptes = consulta("SELECT * FROM articulos WHERE autorizacion = '0'");
echo "<form action='../private/control_insercion.php' method='POST'>";
echo "<input type='hidden' name='es_autorizacion' value='ok' />";
echo "<table id='aut_ptes'> 
    <tr><th colspan='8'>Autorizaciones pendientes</th></tr>
    <tr><th>Fecha</th><th>Título</th><th>Categoría</th><th>Artículo</th>     <th>Autor</th><th colspan='3'>Sanción</th></tr>";
if($art_ptes !== -1){
    if(is_array($art_ptes[0])){
        for ($i = 0 ; $i < count($art_ptes) ; $i++) {
            echo "<tr><td>".$art_ptes[$i][1]."</td> <td>".$art_ptes[$i][2]."</td><td>".$art_ptes[$i][3]."</td><td>".substr($art_ptes[$i][4], 0, 140)."<a href='#'>...ver</a></td><td>".$art_ptes[$i][5]."</td><td>AUT: <input name='autorizar".$i."' value='aut' type='radio' /></td><td>DEN: <input name='autorizar".$i."' value='den' type='radio' /></td><td>PTE: <input name='autorizar".$i."' value='pte' type='radio' checked='checked'/></td></tr>";
            echo "<input type='hidden' name='id".$i."' value='".$art_ptes[$i][0]."' />";
            echo "<input type='hidden' name='titulo".$i."' value='".$art_ptes[$i][2]."' />";
            echo "<input type='hidden' name='autor".$i."' value='".$art_ptes[$i][5]."' />";
        }
        echo "<tr><td colspan='8'><input type='submit' value='Enviar!' /></td></tr>";
    } else {
        echo "<tr><td>".$art_ptes[1]."</td><td>".$art_ptes[2]."</td><td>".$art_ptes[3]."</td><td>".substr($art_ptes[4], 0, 140)."<a href='#'>...ver</a></td></td><td>".$art_ptes[5]."</td><td>AUT: <input name='autorizar' value='aut' type='radio' /></td><td>DEN: <input name='autorizar' value='den' type='radio' /></td><td>PTE: <input name='autorizar' value='pte' type='radio' checked='checked'/></td></tr>";
        echo "<input type='hidden' name='id' value='".$art_ptes[0]."' />";
        echo "<input type='hidden' name='titulo' value='".$art_ptes[2]."' />";
        echo "<input type='hidden' name='autor' value='".$art_ptes[5]."' />";
        echo "<tr><td colspan='8'><input type='submit' value='Enviar!' /></td></tr>";
    }
} else {
    echo "<tr><td colspan='8'>SIN REGISTROS</td></tr>";
}
echo "</table>

    </form>"; 
```

control_insercion.php

```
/* ...more irrelevant code precedes */
} else if (isset($_POST['es_autorizacion']) and $_POST['es_autorizacion'] == 'ok') {

    $emails_den = array();
    $emails_aut = array();

    if(!isset($_POST['autorizar'])){
        $i = 0;
        while(isset($_POST['autorizar'.$i]) and $_POST['autorizar'.$i] == 'aut'){

            if($_POST['autorizar'.$i] == 'aut') {
                $consulta = ("UPDATE articulos SET autorizacion = '1' WHERE titulo = '".$_POST['titulo'.$i]."' AND autor = '".$_POST['autor'.$i]."' AND id = '".$_POST['id'.$i]."';"); 
                $resultado = mysql_query($consulta, $conexion) or die(mysql_error());
                $email = consulta("SELECT email FROM autores WHERE autor = '".$_POST['autor'.$i]."';");
                $emails_aut[] = $email;

            }else if($_POST['autorizar'.$i] == 'den') {
                $consulta = ("DELETE FROM articulos WHERE id = '".$_POST['id'.$i]."';");
                $resultado = mysql_query($consulta, $conexion) or die(mysql_error());
                $email = consulta("SELECT email FROM autores WHERE autor = '".$_POST['autor'.$i]."';");
                $emails_den[] = $email;
            }
            $i++;
        }
    } else {
        if($_POST['autorizar'] == 'aut') {
                $consulta = ("UPDATE articulos SET autorizacion = '1' WHERE titulo = '".$_POST['titulo']."' AND autor = '".$_POST['autor']."' AND id = '".$_POST['id']."';"); 
                $resultado = mysql_query($consulta, $conexion) or die(mysql_error());
                $email = consulta("SELECT email FROM autores WHERE autor = '".$_POST['autor']."'");
                $emails_aut[] = $email;

            } else if ($_POST['autorizar'] == 'den') {
                $consulta = ("DELETE FROM articulos WHERE id = '".$_POST['id']."';");
                $resultado = mysql_query($consulta, $conexion) or die(mysql_error());
                $email = consulta("SELECT email FROM autores WHERE autor = '".$_POST['autor']."';");
                $emails_den[] = $email;
            }

    }
    $uno = serialize($emails_den); //checking whther everything went right//
    $dos = serialize($emails_aut);
    header("location../public/pruebas.php?resultado=".$uno."&resultado2=".$dos."");
} 
```

它包括咨询正在等待管理员授权的用户文章。

在 formgenerator.php 中，所有这些文章都会生成一个动态表。

管理员在每个文章行单击授权或拒绝。

POST 变量传递到处理器 php 页面，在相应的 mysql 表中，文章应该被更新为授权或删除。

我请求一些帮助，因为所有这些脚本的最终结果是它返回 control_insercion.php 页面空白。甚至标题也没有被执行。

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:22:02.383

解决了！！！

很抱歉浪费了那些试图为我解决问题的人的时间！！！！

在一遍又一遍地回顾之后，我意识到我犯了两个愚蠢的错误。首先在 control_insercion.php 代码的第一行： ... 和 $_POST['es_autoizacion'] == 'ok' ... 不应该在那里。我删除了它，因为这个条件已经在下面的 if 语句中表达了。第二个错误是在同一页的最后一行。位置一词缺少冒号（标点符号）
我不得不放弃在编码时喝酒;=）
至少我希望这个问题可以帮助其他人了解如何将动态数据传递到其他php页面。
问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:13:15.793

您的标头函数中存在语法错误。

```
header("location../public/pruebas.php?resultado=".$uno."&resultado2=".$dos.""); 
```

上述语法在位置后缺少冒号。它应该是

```
header("location:../public/pruebas.php?resultado=".$uno."&resultado2=".$dos.""); 
```

# boolean - 提升 Elasticsearch 上的 Bool 查询效果不大

> ID：15156043
> 
> 赞同：8
> 
> 时间：2013-03-01T10:55:23.313
> 
> 标签：boolean, elasticsearch

目前让我感到困惑的是，在查询中我添加了`category_id`10 的提升，这比其他提升要高得多。另一个类别的项目“太极”，不知何故到达了结果的顶部。

我有一个映射：

```
{
  "the_items": {
    "item": {
      "properties": {
        "brand_id": {
          "type": "integer"
        },
        "category_id": {
          "type": "integer"
        },
        "description": {
          "type": "multi_field",
          "fields": {
            "description": {
              "type": "string",
              "analyzer": "full_title"
            }
          }
        },
        "title": {
          "type": "multi_field",
          "fields": {
            "title": {
              "type": "string",
              "analyzer": "full_title"
            },
            "partial_title": {
              "type": "string",
              "index_analyzer": "partial_title",
              "search_analyzer": "full_title",
              "include_in_all": false
            }
          }
        },
        "updated_at": {
          "type": "string"
        }
      }
    }
  }
} 
```

我正在运行以下查询：

```
curl -XGET 'http://localhost:9200/austin_items/_search?pretty=true' -d '{
  "query": {
    "filtered": {
      "query": {
        "bool": {
          "should": [
            {
              "match": {
                "title": {
                  "boost": 2,
                  "query": "chi",
                  "type": "phrase"
                }
              }
            },
            {
              "match": {
                "title.partial_title": {
                  "boost": 1,
                  "query": "chic"
                }
              }
            },
            {
              "match": {
                "description": {
                  "boost": 0.2,
                  "query": "chic"
                }
              }
            },
            {
              "term": {
                "category_id": {
                  "boost": 10,
                  "value": 496
                }
              }
            }
          ]
        }
      }
    }
  }
}' 
```

这给了我以下命中：

```
[
  {
    "_index": "the_items",
    "_type": "item",
    "_id": "34410",
    "_score": 0.7510745,
    "_source": {
      "id": "34410",
      "title": "Initiez-vous au Tai Chi",
      "description": "p. Le Tai Chi est un art chevaleresque, initialement originaire de Chine, maintenant partie int\u00e9grante des tr\u00e9sors du patrimoine de l'humanit\u00e9\. C'est un art de droiture, un art pour les braves, \u00e0 la recherche du geste juste et de l'attitude juste - la \"ju",
      "brand_id": "0",
      "category_id": "497"
    }
  },
  {
    "_index": "the_items",
    "_type": "item",
    "_id": "45393",
    "_score": 0.45193857,
    "_source": {
      "id": "45393",
      "title": "Very Hot Chicken",
      "description": "Laissez-vous tenter par la force du Very Hot Chicken Burger, avec sa sauce piment\u00e9e, ses rondelles de piment vert et sa pr\u00e9paration pan\u00e9e au poulet.\r\nAjoutez-y une tranche de chester fondu, de la salade, des tomates, le tout dans un pain parsem\u00e9 de bl\u00e9 concass\u00e9 pour un burger fort en go\u00fbt !",
      "brand_id": "0",
      "category_id": "496"
    }
  }
] 
```

如果我将这个`category_id`领域提升到 30 之类的傻事，那么它会将“太极”从顶级结果中剔除。我确实希望“Thai Chi”出现在搜索结果中，以防万一，但似乎出于某种我不知道的原因，查询的 category_id 部分无法正常工作。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T14:13:01.910

我希望根据添加到查询中的提升来修改分数。但是，分数不仅考虑了提升，还考虑了很多事情。为了强制提升类别和品牌，我最终使用了“custom_boost_factor”并将其作为子查询应用到常规应该案例中。

```
curl -XGET 'http://localhost:9200/austin_items/_search?pretty=true' -d '
{
  "query" : {
    "filtered" : {
      "query" : {
        "bool" : {
          "should" : [
            { "match" : { "title" : { "boost" : 2,"query" : "chi", "type":"phrase"} } },
            { "match" : { "title.partial_title" : { "boost" : 1,"query" : "chi"} } },
            { "match" : { "description" : { "boost" : 0.2,"query" : "chic"} } },
            { "custom_boost_factor": { 
                "query":{
                  "bool": {
                    "must" : [
                      { "multi_match": { "query" : "chi", "fields" : ["title", "description"] }},
                      { "in": { "category_id": [496] } }
                    ]
                  }
                },
                "boost_factor": 2 
              }
            },
            { "custom_boost_factor": { 
                "query":{
                  "bool": {
                    "must" : [
                      { "multi_match": { "query" : "chi", "fields" : ["title", "description"] }},
                      { "in": { "brand_id": [999] } }
                    ]
                  }
                },
                "boost_factor": 3
              }
            }
          ]
        }
      }
    }
  }
}' 
```

# java - JavaEE 6 中的 JAAS 配置和 LDAP 登录模块

> ID：15156046
> 
> 赞同：11
> 
> 时间：2013-03-01T10:55:34.060
> 
> 标签：java, ldap, glassfish-3, java-ee-6, jaas

我在这里写了一个问题，因为几个月来我自己都找不到解决方案。我的情况：我有一个使用 Java2ee 6 和 EJB3.0 用 java 编写的客户端-服务器应用程序。服务端部署在 glassfish 3.0 上。我需要开发/实现应用程序的登录模块。必须使用 ldap 服务器进行身份验证，并且授权将在应用程序内部处理。因此，我想聘请 JAAS 技术来混合身份验证和授权。例如，我正在这样[做](https://stackoverflow.com/questions/8414322/jaas-additional-loginmodules)。然后我按照[本教程](http://www.devx.com/security/Article/28849/0/page/3)和[官方文档](http://docs.oracle.com/javase/6/docs/jre/api/security/jaas/spec/com/sun/security/auth/module/LdapLoginModule.html)进行登录。我的问题是 ldap 登录不起作用。

我的代码：

```
 LoginContext lc = null;

    try {
        CallbackHandler handler = new CallbackHandler() {
            public void handle(Callback[] callbacks) throws UnsupportedCallbackException {
                for( int i = 0; i < callbacks.length; i++ ) {
                    if( callbacks[i] instanceof NameCallback ) {
                        // prompt the user for a username
                          NameCallback nc = (NameCallback)callbacks[i];
                          nc.setName("admin");
                          System.out.println("Login done.");
                    } else if( callbacks[i] instanceof PasswordCallback ) {
                        // prompt the user for sensitive information
                          PasswordCallback pc = (PasswordCallback)callbacks[i];
                          pc.setPassword("mypassword".toCharArray());
                          System.out.println("Password done.");
                    } else {
                        throw new UnsupportedCallbackException(callbacks[i], "Unrecognized Callback");
                    } //end if/else
                } //end for()
            }
        };

        lc = new LoginContext("myAuth", handler);
        lc.login();
        Subject subject = lc.getSubject();
    } catch (LoginException e) {
        e.printStackTrace();
    } 
```

我的 JAAS 配置文件：

```
myAuth {
com.sun.enterprise.security.auth.login.LDAPLoginModule REQUIRED
userProvider="ldap://mydomain:389/OU=users,DC=my,DC=domain,DC=com"
authIdentity="{USERNAME}"
    useSSL=false
debug=true;
}; 
```

应用程序的客户端部分使用以下 jvm 选项运行：

```
-Djava.security.auth.login.config=./jaas.conf  -Dorg.omg.CORBA.ORBInitialHost=localhost 
```

在 glassfish 网站上，我设置了 jvm 属性

```
-Djava.security.auth.login.config=${com.sun.aas.instanceRoot}/config/login.conf
-Djava.naming.referral=follow 
```

glassfish 端的 login.conf 文件包含以下几行（ADRealm 是我 glassfish 的默认领域）

```
ADRealm {
com.sun.enterprise.security.auth.login.LDAPLoginModule REQUIRED;
}; 
```

ADRealm 的设置：

```
 <property name="jaas-context" value="ldapRealm" />
      <property name="base-dn" value="CN=users,DC=my,DC=domain,DC=com" />
      <property name="directory" value="ldap://mydomain:3268" />
      <property name="search-bind-password" value="mypassword" />
      <property name="search-bind-dn" value="admin@my.domain.com" /> 
```

我想强调您的注意，我正在尝试执行 ldap 登录，至少要确保它有效。

当我运行客户端时，出现以下错误：

```
Mar 1, 2013 1:36:44 PM com.sun.appserv.security.AppservPasswordLoginModule extractCredentials
SEVERE: passwordlm.nopwdcred
javax.security.auth.login.LoginException: No credentials. 
```

一次工作（！）有什么奇怪的，即我可以`subject`从`lc.getSubject()`方法中获得。另外我假设`handle()`上面的方法没有被调用，因为我没有看到

```
Login done.
Password done. 
```

在输出中。

请问有人可以帮我吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T04:40:28.643

1st - 在 LDAP 上，您不使用管理员用户，而是创建另一个具有必要条件的用户，以便在必要时进行搜索和/或绑定。管理员用户不安全且不推荐，尤其是在 Java EE 上下文中。

第二 - 您尝试连接哪种 LDAP 服务器？OpenLDAP 还是 Exchange 服务器？

在等待您的回复时，我正在向您推荐这些链接：

*   [http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/JAASLMDevGuide.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/JAASLMDevGuide.html)

*   [http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/tutorials/GeneralAcnOnly.html](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jaas/tutorials/GeneralAcnOnly.html)

# magento - Magento 类别链接 404

> ID：15156050
> 
> 赞同：0
> 
> 时间：2013-03-01T10:56:01.800
> 
> 标签：magento, magento-1.7

我有 2 个根类别，其中一个显示在顶部导航栏，另一个显示在产品页面。

*   根类别 1
*   根类别 2

我将“根类别 1”设置为“基本类别”，它工作正常。但是当我尝试链接到第二个类别时，我总是得到一个格式错误的 URL 和一个以下 404 页面。

```
$cats = $_product->getCategoryIds();
foreach ($cats as $category_id) {
   $_cat = Mage::getModel('catalog/category')->load($category_id) ;
   echo $_categoryHelper->getCategoryUrl($_cat);
endforeach; 
```

我得到以下结果`http://example.com/catalog/category/view/s/url-key/id/11/`。

关于如何解决这个问题或更好的方法的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-08T20:14:37.780

我遇到过同样的问题。创建了两个根类别，并希望使用小部件链接到静态块中新创建的根类别。不管我放什么代码都不起作用，然后删除了新的根类别并创建了新的子类别，问题已解决。

# android - 无法在新工作区中打开 Eclipse

> ID：15156051
> 
> 赞同：1
> 
> 时间：2013-03-01T10:56:04.763
> 
> 标签：android, eclipse, macos, workspace

我在 MacOS 上开发一个 Android 项目。最近我不得不在另一个位置创建我的项目的副本。说它是`Users/user/SVN/Applications/BarPoject/AndroidBarProject`，现在它是`Users/user/Projects/AndroidBarProject`。

现在我正在尝试让 Eclipse 在新位置使用该项目。启动 Eclipse 时，我浏览到新工作区，然后单击“确定”，然后出现一个弹出警报，内容如下：

```
An error has occurred. See the log file /Users/user/Projects/AndroidBarProject/.metadata/.log 
```

我接下来要做的是在旧工作区中打开 Eclipse 并单击`File/Switch Workspace`，但我再次看到完全相同的弹出消息。

我打开那个日志文件，下面是它的摘录，我想它描述了这个问题：

```
org.osgi.framework.BundleException: Exception in org.eclipse.core.resources.ResourcesPlugin.start() of bundle org.eclipse.core.resources.
Caused by: org.eclipse.core.internal.dtree.ObjectNotFoundException: Tree element '/BarApp/bin/jarlist.cache' not found. 
```

但我已将 jarlist.cache 文件放入 bin 目录！

此外，它再次抱怨缺少 jarlist.cache 文件，除此之外：

```
java.lang.NoClassDefFoundError: org/eclipse/core/resources/IContainer
Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.core.resources (78).
Caused by: org.osgi.framework.BundleException: Exception in org.eclipse.core.resources.ResourcesPlugin.start() of bundle org.eclipse.core.resources.
Caused by: org.eclipse.core.internal.dtree.ObjectNotFoundException: Tree element '/BarApp/bin/jarlist.cache' not found. 
```

我想再次强调 jar list.cache 文件存在于所需目录中。请帮助我的人。如果您需要，我可以显示整个日志文件内容

# html - 创建 node.js 应用程序以使用 API 并将响应打印到 HTML

> ID：15156052
> 
> 赞同：0
> 
> 时间：2013-03-01T10:56:07.333
> 
> 标签：html, api, node.js

首先，我对 node.js 和 Web 服务非常陌生。

我正在做一些事情，这需要我从 openweather.org API 获取温度并在 HTTP 中提供结果。

api是

[http://api.openweathermap.org/data/2.1/find/name?q=London](http://api.openweathermap.org/data/2.1/find/name?q=London)

我想以以下格式将城市名称、温度和度数保存在 HTML 中：

```
<!DOCTYPE html>
<html>
<head>
    <title>Something</title>
</head>
<body>

<h1>Current Weather</h1>

<hr/>
<strong id="city">{{city}}</strong>
<span id="temperature">{{temperature}}</span>
<span id="unit">{{unit}}</span>
<hr/>
<small>last update: <span id="lastupdate">{{datetime}}</span></small>

</body>
</html> 
```

我怎样才能做到这一点？任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:08:10.653

第 1 步：创建一个简单的节点应用程序来执行 api 请求并将输出返回到控制台。使用[请求](https://github.com/mikeal/request)让您的生活更轻松

第 2 步：使用模板引擎，如[下划线](http://underscorejs.org/#template)或其他模板引擎，将 api 输出与上述 html 模板合并。例如：

```
var apiResult = JSON.parse(the_result_of_api_call);
var template = '<strong id="city"><%= list[0].name %></strong>';
var output = _.template(template)(apiResult); 
```

第三步：创建一个[节点快递网站](http://expressjs.com/guide.html)，结合以上内容，做一个response.send(mergedoutput)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T11:35:12.017

访问[http.request](http://nodejs.org/docs/v0.4.5/api/http.html#http.request)了解更多信息。

```
 var options = {
          host: url,
          port: 80,
          path: '/resource?id=foo&bar=baz',
          method: 'POST'
        };

        http.request(options, function(res) {
          console.log('STATUS: ' + res.statusCode);
          console.log('HEADERS: ' + JSON.stringify(res.headers));
          res.setEncoding('utf8');
          res.on('data', function (chunk) {
            console.log('BODY: ' + chunk);
          });
        }).end(); 
```

以上代码块将帮助您从其他网站检索数据。

您将需要查看是否要以问题中提到的（类似）方式呈现数据`backbone.js`。`underscore.js`

您可以看到一个具有类似内容的示例：[backbone.js 和 node.js](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-1-getting-started/)

# extjs - Sencha app构建原生android包

> ID：15156054
> 
> 赞同：0
> 
> 时间：2013-03-01T10:56:07.583
> 
> 标签：extjs, sencha-touch, sencha-touch-2

我已经生成了示例应用程序。我能够罗盘编译。没有 packager.json 配置就可以生成包。我需要 android 包，所以在 packager.json 中完成了配置，例如
**“平台”：“Android”、“sdkPath”：“D:/Sench_Touch/android-sdk-windows”，**但在命令提示符中出现错误，如下所示。如何解决这个问题？谁能告诉我。谢谢

```
 [INF]           Completed compilation.
    [INF]           Processed remote file touch/sencha-touch.js
    [INF]           Processed local file app.js
    [INF]           Minified app.js
    [INF]           Minified resources/css/app.css
    [INF]           Generated app.json
    [INF]           Embedded microloader into index.html
    [INF]           Generating native package
    [INF]           Packaging your application as a native app to D:\Sench_Touch\sen
    cha-touch-2.1.1-gpl\DemoApp\build\DemoApp\native ...
    [ERR]           failed running native packager
    [ERR]           'xcopy' is not recognized as an internal or external command,
    operable program or batch file.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    The system cannot find the path specified.
    Created directory D:\Sench_Touch\sencha-touch-2.1.1-gpl\DemoApp\build\DemoApp\na
    tive\src\com\mycompany\myAppID
    Added file D:\Sench_Touch\sencha-touch-2.1.1-gpl\DemoApp\build\DemoApp\native\sr
    c\com\mycompany\myAppID\STActivity.java
    Created directory D:\Sench_Touch\sencha-touch-2.1.1-gpl\DemoApp\build\DemoApp\na
    tive\res
    Created directory D:\Sench_Touch\sencha-touch-2.1.1-gpl\DemoApp\build\DemoApp\na
    tive\bin
    Created directory D:\Sench_Touch\sencha-touch-2.1.1-gpl\DemoApp\build\DemoApp\na
    tive\libs
    Created directory D:\Sench_Touch\sencha-touch-2.1.1-gpl\DemoApp\build\DemoApp\na
    tive\res\values
    Added file D:\Sench_Touch\sencha-touch-2.1.1-gpl\DemoApp\build\DemoApp\native\re
    s\values\strings.xml
    Created directory D:\Sench_Touch\sencha-touch-2.1.1-gpl\DemoApp\build\DemoApp\na
    tive\res\layout
    Added file D:\Sench_Touch\sencha-touch-2.1.1-gpl\DemoApp\build\DemoApp\native\re
    s\layout\main.xml
    Added file D:\Sench_Touch\sencha-touch-2.1.1-gpl\DemoApp\build\DemoApp\native\An
    droidManifest.xml
    Added file D:\Sench_Touch\sencha-touch-2.1.1-gpl\DemoApp\build\DemoApp\native\bu
    ild.xml
    Added file D:\Sench_Touch\sencha-touch-2.1.1-gpl\DemoApp\build\DemoApp\native\pr
    oguard-project.txt
    'C:\Users\User' is not recognized as an internal or external command,
    operable program or batch file.
    ""D:/Sench_Touch/android-sdk-windows\tools\android" create project --target andr
    oid-10 --name MyApplication --activity STActivity --path "D:\Sench_Touch\sencha-
    touch-2.1.1-gpl\DemoApp\build\DemoApp\native\/" --package com.mycompany.myAppID"

    Could not run ant with error: 1
    Failed to package application 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-28T12:06:43.183

从您的应用程序文件夹运行

***森查科尔多瓦初始化***

然后更改 cordova.local.properties=android

节省。

运行 ***sencha app build native***

如果您使用的是 ST2.3.1，您会在***cordova\platfomrs\android\ant-build*-*.apk***文件夹中找到 app_name-debug.apk :-)

注意：'你需要使用***npm install cordova -g 安装cordova***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T14:14:55.523

您是否将 Sencha SDK 工具安装在带有空格名称的目录中？当我在 Program Files 中安装 Sencha Cmd 时，我遇到了同样的问题。出现此问题后，我将其安装在 C:/Sencha 中并已修复。

# cordova - 在黑莓phonegap中启动屏幕后显示白屏

> ID：15156057
> 
> 赞同：1
> 
> 时间：2013-03-01T10:56:09.923
> 
> 标签：cordova, blackberry-webworks

我正在开发一个黑莓 phonegap 应用程序。应用程序工作正常，但是当我在启动画面后启动应用程序时，白屏会显示几秒钟。谁能帮我删除这个白屏？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T15:55:09.230

我见过这种情况的唯一一次是当应用程序从 Web 服务器下载资产时（这会阻止应用程序的重置加载）。

你在你的索引 html 文件中做什么？您是否从远程服务器中提取任何资源？

如果不是，则可能是 onDeviceReady 函数中发生了阻止应用程序的事情。这将是一个开始调试的好地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T16:00:11.557

我唯一一次看到这样的问题，它通常是永久的白屏，并且是由 JavaScript 代码中未捕获的异常引起的，这意味着 UI 无法完成更新。

就像 chadtatro 说的那样，在初始化过程中似乎有什么东西占用了你所有的处理器时间。您的代码是否达到了 onDeviceReady，或者您的页面的 onLoad 事件是否在 Cordova 初始化之前导致了问题？

# android - Air for Android - App.xml 解析错误

> ID：15156061
> 
> 赞同：1
> 
> 时间：2013-03-01T10:56:19.240
> 
> 标签：android, android-intent, air

我正在使用 Flash CS 6 和 Adob​​e Air 3.5 构建适用于 Android 的应用程序。我想**通过菜单**注册我的应用程序以接收来自其他应用程序的内容。（每次选择要共享的文本或链接时，我的应用程序都应列在该菜单中）

我的 app.xml 一定有问题，因为通过尝试安装应用程序我收到“解析错误”消息。

下面是 Android 清单部分。它有什么问题？（我从[developer.android.com](http://developer.android.com/training/sharing/receive.html)获取代码）

```
 <android> 
        <manifestAdditions> 
          <![CDATA[ 
             <manifest android:installLocation="auto">
                    <application> 
                        <activity> 
    <intent-filter>
            <action android:name="android.intent.action.SEND" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="text/plain" />
        </intent-filter>
                        </activity> 
                    </application> 
                </manifest> 
            ]]> 
        </manifestAdditions> 
      </android> 
```

完整的 app.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<application xmlns="http://ns.adobe.com/air/application/3.5">
  <id>com.helloworld.android</id>
  <versionNumber>1.0.0</versionNumber>
  <filename>helloworld</filename>
  <name>helloworld</name>
  <initialWindow>
    <content>helloworld.swf</content>
    <systemChrome>standard</systemChrome>
    <transparent>false</transparent>
    <visible>true</visible>
    <fullScreen>false</fullScreen>
    <renderMode>auto</renderMode>
    <autoOrients>true</autoOrients>
    <maximizable>true</maximizable>
    <minimizable>true</minimizable>
    <resizable>true</resizable>
  </initialWindow>
  <icon>
    <image36x36>AppIconsForPublish/helloworld_36x.png</image36x36>
    <image48x48>AppIconsForPublish/helloworld_48x.png</image48x48>
    <image72x72>AppIconsForPublish/helloworld_72x.png</image72x72>
  </icon>
  <customUpdateUI>false</customUpdateUI>
  <allowBrowserInvocation>true</allowBrowserInvocation>
  <android> 
    <manifestAdditions> 
      <![CDATA[ 
         <manifest android:installLocation="auto">
                <application> 
                    <activity> 
<intent-filter>
        <action android:name="android.intent.action.SEND" />
        <category android:name="android.intent.category.DEFAULT" />
        <data android:mimeType="text/plain" />
    </intent-filter>
                    </activity> 
                </application> 
            </manifest> 
        ]]> 
    </manifestAdditions> 
  </android>
  <versionLabel>1.0.0</versionLabel>
  <supportedLanguages>en</supportedLanguages>
</application> 
```

谢谢。乌里

# twitter-bootstrap - Bootstrap eyeon 颜色选择器 val 未定义

> ID：15156062
> 
> 赞同：-1
> 
> 时间：2013-03-01T10:56:20.810
> 
> 标签：twitter-bootstrap, color-picker

我正在使用 eyeon 颜色选择器在我的 HTMl 中进行选择。任何人都可以帮助如何使用它。以下是我使用它的方式。

```
<div class="well">
    <div id="cp3" data-color-format="hex" data-color="rgb(255, 146, 180)" class="input-append color">
        <input type="text" readonly="" value="" class="span3">
        <span class="add-on"><i style="background-color: rgb(255, 146, 180)"></i></span>
    </div>
</div> 
```

我在 bootstrap-colorpicker.js 中收到 JS 错误“ **val is not defined ”**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-25T10:36:47.167

在给出的示例中，js 调用表示为：

```
$('.colorpicker').colorpicker(); 
```

将其更改为：

```
 $('.color').colorpicker(); 
```

# shell - 将目录传递给 hadoop 流：需要一些帮助

> ID：15156067
> 
> 赞同：2
> 
> 时间：2013-03-01T10:56:40.377
> 
> 标签：shell, hadoop, streaming, amazon, emr

上下文是我正在尝试使用我运行的 bash 脚本在 Amazon EMR *（Web UI）上运行流式作业：*

```
-input s3://emrdata/test_data/input -output s3://emrdata/test_data/output -mapper
s3://emrdata/test_data/scripts/mapperScript.sh -reducer NONE 
```

输入目录中有子目录，这些子目录有 gzip 压缩的数据文件。

失败的相关部分`mapperScript.sh`是：

```
for filename in "$input"/*; do

dir_name=`dirname $filename`
fname=`basename $filename`

echo "$fname">/dev/stderr

modelname=${fname}.model

modelfile=$model_location/$modelname

echo "$modelfile">/dev/stderr

inputfile=$dirname/$fname

echo "$inputfile">/dev/stderr

outputfile=$output/$fname

echo "$outputfile">/dev/stderr

# Will do some processing on the files in the sub-directories here

done # this is the loop for getting input from all sub-directories 
```

基本上，我需要以流模式读取子目录，当我运行它时，hadoop 抱怨说：

```
2013-03-01 10:41:26,226 ERROR
org.apache.hadoop.security.UserGroupInformation (main):               
PriviledgedActionException as:hadoop cause:java.io.IOException: Not a
file:      s3://emrdata/test_data/input/data1 2013-03-01 10:41:26,226
ERROR org.apache.hadoop.streaming.StreamJob (main):  Error Launching
job : Not a file: s3://emrdata/test_data/input/data1 
```

[我知道这里](https://stackoverflow.com/questions/10095717/pass-directories-not-files-to-hadoop-streaming)已经问过类似的 q

那里的建议是编写自己的 InputFormat。我想知道在编写脚本/给出 EMR 输入的方式上是否遗漏了其他内容，或者用 Java 编写自己的 InputFormat 是否是我唯一的选择。

我也尝试将我的输入与“输入/*”一起提供给 EMR，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:43:09.080

似乎虽然可能有一些临时的解决方法，但 hadoop 本质上还不支持这一点，因为您可能会看到这里有一张开放的[票](https://issues.apache.org/jira/browse/MAPREDUCE-3193)。因此`inputpatth/*/*`可能适用于 2 级子目录，它可能无法进一步嵌套。

您现在可以做的最好的事情是获取文件/文件夹的列表 - without-any-subdirectory 并在创建 inputPaths 的 csv 列表后递归地添加它们。[您可以为此使用](http://s3tools.org/s3cmd)像 s3cmd 这样的简单工具。

# android - 如何在 ADT 模拟器上安装 Gmail apk？

> ID：15156073
> 
> 赞同：1
> 
> 时间：2013-03-01T10:57:01.990
> 
> 标签：android, email, gmail, apk, mailing

我正在开发适用于 Android 的电子邮件应用程序，我想在我的模拟器上安装 Gmail apk 以对其进行测试。

我怎样才能做到这一点？

我已经看过有关如何在 Windows 上执行此操作的教程，但我正在使用 Linux。

谢谢你的帮助！

# java - 在 Eclipse SWT 中创建一个适应我的数据的 Composite

> ID：15156079
> 
> 赞同：0
> 
> 时间：2013-03-01T10:57:21.857
> 
> 标签：java, eclipse, user-interface, swt, composite

我的第一次尝试是：

```
public MultiLangugeText(Composite parent, int style) {
    super(parent, style);
    setLayout(new RowLayout(SWT.HORIZONTAL));

    Map<Locale, String> texts = new HashMap<Locale, String>();
    texts.put(Locale.GERMAN, "Hey du");
    texts.put(Locale.ENGLISH, "Hey you");
    texts.put(Locale.FRENCH, "Bon Jour");
    setTexts(texts);

public void setTexts(Map<Locale, String> texts) {
    for (Locale locale : texts.keySet()) {
        createTextComposite(locale, texts.get(locale));
    }
}

private void createTextComposite(Locale locle, String localizedString) {
    Composite composite = formToolkit.createComposite(this, SWT.BORDER);
    formToolkit.paintBordersFor(composite);
    composite.setLayout(new RowLayout(SWT.HORIZONTAL));

    CLabel label = new CLabel(composite, SWT.NONE);
    label.setText(locle.toString());
    formToolkit.adapt(label);
    formToolkit.paintBordersFor(label);

    Text txtString = new Text(composite, SWT.BORDER);
    txtString.setText(localizedString);
    formToolkit.adapt(txtString, true, true);
} 
```

但是这段代码不会在我的 UI 上绘制任何东西。至少当我尝试在设计器和预览中渲染它时。当我在我的应用程序中使用它时，我必须测试它是否有效。但我不明白错误在哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:16:32.283

好的，它只会在设计器中失败，而不是在您实际使用复合材料 elsewehre 时。

# wix - WiX Bundle升级：在旧版本被移除之前安装新版本的MSI

> ID：15156081
> 
> 赞同：7
> 
> 时间：2013-03-01T10:57:25.223
> 
> 标签：wix, windows-installer, wix3.6, burn

我有一个安装[MSI](http://en.wikipedia.org/wiki/Windows_Installer)并检查是否安装了 .NET的[WiX 包。](http://wixtoolset.org/documentation/manual/v3/bundle/)安装捆绑包（和安装程序）时，一切都按预期工作。

我的问题是捆绑包升级时。在升级中，捆绑包首先安装 MSI 的 v_Next，然后卸载 MSI 的 v_Previous。

如何更改此订单？我希望在升级中，在安装 v_Next 之前卸载 MSI 的 v_Previous。

下面是我的包：

```
<Wix xmlns="http://schemas.microsoft.com/wix/2006/wi"
    xmlns:util="http://schemas.microsoft.com/wix/UtilExtension"
    xmlns:bal="http://schemas.microsoft.com/wix/BalExtension">

    <Bundle Name="MyProductName"
            Version="1.0.0.0"
            Manufacturer="MyCompanyName"
            UpgradeCode="4abf3f67-1234-35b1-b2c1-dd7649b60e1d">

        <BootstrapperApplicationRef
            Id="WixStandardBootstrapperApplication.RtfLicense">

            <bal:WixStandardBootstrapperApplication
                SuppressOptionsUI="yes"
                LicenseFile="License.rtf"
                ThemeFile="Theme.xml"
                LogoFile="MyProductName.png"
            />
            <Payload
                Name="BootstrapperCore.config"
                SourceFile="BootstrapperCore.config"/>
            <Payload
                SourceFile="NetfxLicense.rtf"/>
        </BootstrapperApplicationRef>
        <Chain>
            <PackageGroupRef
                Id="Netfx4Full"/>
            <MsiPackage
                Compressed="yes"
                SourceFile="$(var.SolutionDir)\Setup\MyProductName.msi"
                Vital="yes">
            </MsiPackage>
        </Chain>
    </Bundle>
    <Fragment>
        <WixVariable
            Id="WixMbaPrereqPackageId"
            Value="Netfx4Full" />
        <WixVariable
            Id="WixMbaPrereqLicenseUrl"
            Value="NetfxLicense.rtf" />

        <util:RegistrySearch
            Root="HKLM"
            Key="SOFTWARE\Microsoft\Net Framework Setup\NDP\v4\Full"
            Value="Version"
            Variable="Netfx4FullVersion" />
        <util:RegistrySearch
            Root="HKLM"
            Key="SOFTWARE\Microsoft\Net Framework Setup\NDP\v4\Full"
            Value="Version"
            Variable="Netfx4x64FullVersion"
            Win64="yes" />

        <PackageGroup
            Id="Netfx4Full">

            <ExePackage
                Id="Netfx4Full"
                Cache="no"
                Compressed="no"
                PerMachine="yes"
                Permanent="yes"
                Vital="yes"
                SourceFile="$(var.SolutionDir)\packages\dotNetFx40_Full_x86_x64.exe"
                DownloadUrl="http://go.microsoft.com/fwlink/?LinkId=164193"
                DetectCondition="Netfx4FullVersion AND (NOT VersionNT64 OR Netfx4x64FullVersion)"/>
        </PackageGroup>
    </Fragment>
</Wix> 
```

* * *

谢谢罗布的回答。我正在尝试这样做，但它不起作用（我肯定遗漏了一些东西）......这就是我在 MSI 中所拥有的：

```
<Product Id="*"
         Name="MyProductName"
         Language="1033"
         Version="1.0.0.0"
         Manufacturer="MyCompanyName"
         UpgradeCode="aa027fd0-5111-1236-9af6-55581a588123">
    <Package InstallerVersion="200"
             Compressed="yes"
             InstallScope="perMachine" />
    <MajorUpgrade DowngradeErrorMessage="A newer version of MyProductName is already installed."
                  AllowDowngrades="no"/>
    <MediaTemplate />

    <Feature Id="ProductFeature"
             Title="MyProductName"
             Level="1">
        <ComponentRef Id="ApplicationShortcut" />
        <ComponentGroupRef Id="AllFiles" />
    </Feature>
</Product> 
```

如果我运行 v_previous MSI，然后运行 ​​v_Next MSI（单独，不在捆绑包中），我会安装两者，因此不会执行升级。我究竟做错了什么？

* * *

没关系，MajorUpgrade 正在工作。我在 vNext MSI 中的版本编号错误。我现在还需要添加次要升级支持。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T14:26:12.763

升级的捆绑包总是在今天最后一次卸载**。要删除`v_Previous.msi`之前`v_Next.msi`，请进行`v_Next.msi`重大升级（请参阅[MajorUpgrade 元素](http://wix.sourceforge.net/manual-wix3/wix_xsd_majorupgrade.htm)）`v_Previous.msi`。

** 我认为有一项功能请求允许其他展示位置，但尚未实施。

# ruby-on-rails - 动态图像水印——将模型属性注入水印

> ID：15156090
> 
> 赞同：2
> 
> 时间：2013-03-01T10:57:53.420
> 
> 标签：ruby-on-rails, image-processing, imagemagick, paperclip, watermark

我目前正在使用[此 Paperclip::Processor](https://gist.github.com/monde/1171081)使用 imagemagick 的复合命令为图像添加水印。

它允许我注入一个预制的单个文件作为水印，它存在于我的公共文件中。

但是，我正在尝试确定是否可以对其进行修改以动态生成包含模型属性的水印。例如，水印包括摄影师的姓名，或拍摄它的相机型号。

Getty 最近[更改了他们的水印来做到这一点](http://www.gettyimages.co.uk/Creative/Frontdoor/NewWatermark)- 它非常聪明，我很想知道他们是如何做到的。

提前谢谢了。我不希望人们确切地知道如何做到这一点，但任何想法或一般原则将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:50:05.677

是的，它可以用 Imagemagick 完成；我已经用 php 和一个批处理脚本完成了它。不过，我不知道如何将此批处理脚本转换为 ruby​​-on-rails。

您可以获取 EXIF 数据中包含的大多数值，并在与此类似的代码中使用它们。

```
:: Do not display the code while running 
@ECHO OFF 

:: Select the F number from the EXIF data and set the FNumber variable 
FOR /F %%x IN ('identify -ping -format "%%[EXIF:FNumber]" %1') DO SET FNumber=%%x 

:: Set the FNumber1 variable to the F number value 
:: Image Magick returns the F number in the format of 700/100 or 40/10 
FOR /F %%x IN ('convert xc: -ping -format "%%[fx:%FNumber%]" info:') DO SET FNumber1=%%x 

:: Set the value of the shutter variable to the shutter speed 
:: Select the shutter speed from the EXIF data 
:: Image Magick returns the shutter speed in the format of 810/100 
FOR /F %%x IN ('identify -ping -format "%%[EXIF:ShutterSpeedValue]" %1') DO SET shutter=%%x 

:: Format the speed to 8.1 and set the speed variable 
FOR /F %%x IN ('convert xc: -ping -format "%%[fx:%shutter%]" info:') DO SET speed=%%x 

:: Calculate the speed in seconds using the power of 2 
:: and save it in the shutterspeed variable 
FOR /F %%x IN ('convert xc: -ping -format "%%[fx:floor((pow(2,%speed%)))]" info:') ^ 
DO SET shutterspeed=%%x 

:: Add the F number and shutter speed to the image 
:: and save as exif_OriginalImageName 
convert %INPUTFILE% ^ 
-pointsize 16 -fill black -gravity northwest ^ 
-annotate +10+5 "Aperture: F%FNumber1% Shutter speed: 1/%shutterspeed% sec" "%~p1EXIF_%~n1.jpg" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T10:02:40.213

感谢您的帮助比灵顿。实际上，我通过`convert_options`在回形针缩略图过程中添加到图像中找到了一种方法。所以，在图像模型上，图像在哪里`a`：

```
has_attached_file :image, 
    processors: [:thumbnail],
    styles: { 
      wide: {
        geometry: "1120x",
        convert_options: ->(a) { "-quality 92 -font Arial -pointsize 72 -gravity center gradient: -alpha on -channel rgba -fill 'rgba(255,255,255,0.3)' -opaque 'rgba(20,20,20,1)' -draw \"text 0, 340 #{a.picusername}\" -pointsize 30 -draw \"text 0, 390 'license copy here'\"  
      "}
      } 
```

这会在图像上写入`a.picusername`各种位置和样式细节。你可以在[这里](http://www.imagemagick.org/Usage/text/)找到更多。

最后一点 - 如果您使用类似 simpleform 向图像模型添加属性，则上述处理指令将在图像本身添加到数据库的瞬间应用......因此在图像附件*之后*添加的任何模型属性（字面意思是，在图像附件下方的表单输入中）将无法识别，因为它们尚不存在。

# android - 我们需要为“检测设备中的语言变化”编写代码

> ID：15156092
> 
> 赞同：1
> 
> 时间：2013-03-01T10:58:00.250
> 
> 标签：android

我们需要为“检测设备中的语言变化”编写代码的地方

我的意思是`Locale.getDefault().getDisplayLanguage();`“部分更好写`onCretae();`还是`onResume()`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:04:05.217

你可以把它放在 onCreate(); 它不会改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:02:57.830

如果您想在每次应用程序进入前台时检查语言，请将其放在 onResume() 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:24:32.790

编写**onCreate()**方法本身比编写 onResume()更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-29T07:48:11.960

最好写在**onResume** () 方法本身而不是*onCreate* ()

# php - PHP 页面不断寻找 GET 请求

> ID：15156095
> 
> 赞同：-1
> 
> 时间：2013-03-01T10:58:02.103
> 
> 标签：php, twilio

我需要配置 TWILIO SMS 帐户以将收到的 SMS 转发到某个 PHP URL。所以，现在如果我已经在我的网络浏览器中打开了那个 PHP URL，并且如果一些消息正在通过 GET 请求从 TWILIO 转发到这个 URL，我如何在那个已经打开的 PHP Web URL 中显示接收到的数据？

例如：如果我`http://www.somephp.com/index.php`在 TWILIO 仪表板中提供此 URL 以通过 GET 请求转发传入的 SMS。

我已经在我的网络浏览器中打开它，看看是否有来自 TWILIO 的短信。如何不断检查是否有任何新短信从 TWILIO 转发？

我可以使用任何 TIMER 来检查 GET 请求吗？还是我完全走错了路？当我谷歌时，我找不到任何解决方案。如果这似乎是一个愚蠢的问题，请原谅我。如果您能在这个问题上指导我，我将不胜感激。非常感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-23T15:26:29.867

我不认为这样可以实现你想要的。

您可以做的是 -在您的仪表板中将[http://www.somephp.com/index.php](http://www.somephp.com/index.php)设置为短信回复。在 index.php 中，将任何新请求保存到数据库中，其中包含发件人详细信息、消息内容和接收时间。

现在写一个新脚本说[http://www.somephp.com/updateMessages.php](http://www.somephp.com/updateMessages.php) 在这个页面中使用 jquery 或 javascript 向脚本发出 AJAX 请求，该脚本将连接到数据库并检查是否有任何新消息。如果有，则显示该消息并开始检查在该消息之后收到的消息。

这样，如果您打开[http://www.somephp.com/updateMessages.php](http://www.somephp.com/updateMessages.php)，您将在此处收到所有新消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:01:24.330

为方便起见，您可以使用 jQuery 库，然后使用后端 php 脚本定期轮询新数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:03:10.967

您必须`setInterval`每 X 秒使用一些 JavaScript（jQuery 可能更容易）来运行一个函数。另一种选择是您可以使用元刷新，它只会每 X 秒重新加载一次页面。

# regex - 如何匹配序列中不包括特定字符的所有字符？

> ID：15156096
> 
> 赞同：0
> 
> 时间：2013-03-01T10:58:06.833
> 
> 标签：regex

如何删除所有控制字符但排除换行符（`U+2028`）字符？

```
preg_replace('/[\p{Cc}]/', '', $response); 
```

[http://uk.php.net/manual/en/regexp.reference.unicode.php](http://uk.php.net/manual/en/regexp.reference.unicode.php)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:02:54.400

您可以使用[负前瞻](http://www.php.net/manual/en/regexp.reference.assertions.php)：

```
/(?!\x{2028})\p{Cc}/u 
```

您还需要启用[UTF8 模式](http://www.php.net/manual/en/reference.pcre.pattern.modifiers.php)以匹配 unicode。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T11:06:12.913

您可以使用双重否定

```
preg_replace('/[^\P{Cc}\x{2028}]/u', '', $response); 
```

`\P{Cc}`是否定的`\p{Cc}`

`[^...]`是否定字符类

所以你匹配所有不是不是控制字符的东西，那不是`\x{2028}`。这样您就可以从预定义的字符类中排除某些字符。

# ruby-on-rails-3 - 如何自定义 qtip 工具栏以删除关闭图标

> ID：15156097
> 
> 赞同：0
> 
> 时间：2013-03-01T10:58:17.397
> 
> 标签：ruby-on-rails-3, jquery-ui, qtip

我可以自定义 qtip 标题栏，使我的 qtip 中没有关闭（右上角的 X 标记）按钮。

Ps：我已经启用了点击关闭qtip，因此我不希望显示关闭图标。我尝试通过 javascript 删除它，但关闭图标一直存在，直到我的部分视图被加载。我不希望它从一开始就出现。

# r - For-loop 工作但不如预期

> ID：15156100
> 
> 赞同：0
> 
> 时间：2013-03-01T10:58:25.197
> 
> 标签：r, for-loop

我正在制作一个循环来计算三列：最小值、最大值和几个图的测量平均值。我正在处理数千个地块的几个测量值的森林清单。我想要做的是计算每个物种（总共 153 个物种）在不同物种之间的特定地块的基底面积（测量值）的最小值、最大值和平均值。

首先，对于每个物种，我必须从 purs 80 中选择所有符合标准的地块（地块是 purs== 至少 80% 的地块仅由一个物种组成）。

```
head(purs80[,1:10])
        02         03 04 05 06 07 08S  09       10 11
27    0.000000   0.000000  0  0  0  0   0   0  0.00000  0
41    0.000000   0.000000  0  0  0  0   0   0  0.00000  0
47    6.369376   8.824162  0  0  0  0   0   0 84.80646  0
54    0.000000 100.000000  0  0  0  0   0   0  0.00000  0
83  100.000000   0.000000  0  0  0  0   0   0  0.00000  0
101   0.000000   0.000000  0  0  0  0   0 100  0.00000  0

#list of all the purs plots by species
  listplotspur80<-apply(purs80, 2,function(v) which(v > 80)) 
```

这是有效的。Listplotspur 是一个包含 153 个元素的列表，每个元素由满足标准的地块数量组成。只是头部的一个摘要它以及最后一个元素。

> ```
>  head(summary( listplotspur80))
>   Length Class    Mode     
> 02 "1422" "-none-" "numeric"
> 03 "1479" "-none-" "numeric"
> 04 "  50" "-none-" "numeric"
> 05 "1836" "-none-" "numeric"
> 06 " 689" "-none-" "numeric"
> 07 "  51" "-none-" "numeric" 
> ```
> 
> 因此，您可以看到列表中每个元素的元素数量不同。

```
> listplotspur80[[153]]
 22455 505927 516264 524860 545205 639576 
 1345  15389  15738  16029  16711  19410 
```

这给了我 plotID 作为我可以使用函数名称提取的名称，如下所示

```
> names(listplotspur80[[153]])
[1] "22455"  "505927" "516264" "524860" "545205" "639576" 
```

现在我能够提取每个物种的地块列表，我需要将其与每个地块相关联，其基底面积 BA 的值存储在一个名为 BA 的数据框中。

```
 >       head(BA)
          BA plotID
19 41.72365     19
23 13.37109     23
27 55.92989     27
41 25.50725     41
45 34.86734     45
47 30.63582     47

>       dim(BA)
[1] 44065     2 
```

因此，从这个元素列表中，我有每个物种的地块列表和数据框 BA，其中我有与每个地块相关联的 BA，我想从这些地块中计算每个物种的最小值、最大值和平均值，并将其存入新的数据框。

```
#Create a loop that does the job!
  outG80<-matrix(nrow=153, ncol=3, NA)
  for (i in 1:153 ){
    outG80[i,1]<-min(BA[which(BA$plotID==as.numeric(names(listplotspur80[[i]]))),1]) 
```

对于每个物种，我根据列表选择与我拥有的 plotID 对应的行，并将该函数应用于所有对应的 BA（BA 的第 1 列）。

```
 outG80[i,2]<-max(BA[which(BA$plotID==as.numeric(names(listplotspur80[[i]]))),1])
    outG80[i,3]<-mean(BA[which(BA$plotID==as.numeric(names(listplotspur80[[i]]))),1])
    }
  outG80<-as.data.frame(outG80)
  names(outG80)<-c("Gmin","Gmax","Gmean")
  outG80 
```

所以循环工作，我能够得到一个我想要的数据框......但它只是不是好的结果，我找不到原因。看到最小值和最大值是相同的，而我知道第一个物种有 1422 个不同的地块，例如 BA 的值不同。

```
 Gmin     Gmax    Gmean
1 33.23970 33.23970 33.23970
2 29.89472 29.89472 29.89472
3 13.90947 43.33606 28.62277
4 17.91288 17.91288 17.91288
5      Inf     -Inf      NaN
6 11.42602 11.42602 11.42602 
```

如果您对我的循环中的错误有任何想法，请告诉我。

非常感谢你的帮助。

我一直在尝试编写一些可以用来复制问题的代码，但我最终得到了巨大的数据框。很抱歉给您带来不便。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:43:25.913

这是一个小的可重现数据集的样子：

```
set.seed(5)
BA <- data.frame(BA=round(runif(5,0,10),1), plotID=11:15)
purs80 <- matrix(sample(c(0,90), 4*6, prob=c(0.8, 0.2), replace=TRUE), ncol=6)
colnames(purs80) <- paste("sp", 1:ncol(purs80), sep="")
rownames(purs80) <- sample(BA$plotID)[1:4] 
```

在这种情况下，我将首先以与数据框中`BA`相同的顺序获取值，`purs80`然后在 apply 函数中获取最小值、最大值和平均值。

```
ordered.BA <- BA$BA[match(rownames(purs80), BA$plotID)]
out <- t(apply(purs80, 2, function(v) {
  use <- ordered.BA[which(v > 80)]
  if(length(use)==0) c(Gmin=NA, Gmax=NA, Gmean=NA)
  else c(Gmin=min(use), Gmax=max(use), Gmean=mean(use))
})) 
```

以下是数据和结果：

```
> BA
   BA plotID
1 2.0     11
2 6.9     12
3 9.2     13
4 2.8     14
5 1.0     15

> purs80
   sp1 sp2 sp3 sp4 sp5 sp6
15   0   0   0  90   0   0
12   0   0   0   0   0   0
11  90   0   0  90   0  90
13  90   0   0  90   0   0

> out
    Gmin Gmax    Gmean
sp1    2  9.2 5.600000
sp2   NA   NA       NA
sp3   NA   NA       NA
sp4    1  9.2 4.066667
sp5   NA   NA       NA
sp6    2  2.0 2.000000 
```

# html - 两个相同的div只悬停一个

> ID：15156109
> 
> 赞同：-1
> 
> 时间：2013-03-01T10:58:57.983
> 
> 标签：html, css

我的 CSS 有点问题`hover`……我`divs`在同一个班级有两个，但我`hover`只想要一个。我已经尝试过，但它不工作，如果它工作，它会改变每种颜色。

```
<div class="container iphone">
    <!-- First box -->
    <div class="span3 iphone-box-left">
  ======> <div class="quoteLeft"> <====== :hover
            <blockquote>
                <p>
                   description here
                </p>
            </blockquote>
            <p class="credit">
               johny 
            </p>
        </div>
    </div>
    <!-- First box end -->
    <!-- Second box -->
    <div class="span6">
        <img src="images/iphone.png">
        <!-- Start Logo -->
        <div class="logo-second">
            <h3>
         ==============================================================
         So when i hover on qouteLeft i wanna change the color on icon

         this icon i also have in logo

         ====> <i class="icon-cloud icon-large"></i> <=================
                creative
            </h3>
        </div>
        <!-- Logo end -->
    </div>
    <!-- Second box end --> 
```

**CSS**

```
.iphone {
    position: relative; margin:50px auto; background:url(../images/11.png);
}

.quoteLeft {
    position:relative;
    top:40px;
    padding:15px 25px 20px;
    margin:20px auto;
    font:italic 26px/1.4 Georgia, serif;
    color:#fff;
    background:rgba(34, 34, 34, .5);
}

.quoteLeft:after {
    content:"";
    position:absolute;
    top:100%;
    left:100%;
    margin-top:-4px;
    background:url(../images/box-line.png) no-repeat;
    width:150px; height:165px;

}
.quoteRight {
    position:relative;
    top:150px;
    padding:15px 25px 20px;
    margin:20px auto;
    font:italic 26px/1.4 Georgia, serif;
    color:#fff;
    background:rgba(34, 34, 34, .5);
}

.quoteRight:after {
    content:"";
    position:absolute;
    top:100%;
    right:80%;
    margin-top:-4px;
    background:url(../images/box-line-2.png) no-repeat;
    width:300px; height:165px;

}
.credit {
    margin:1em 0 0;
    font:14px/1.2 Arial, sans-serif;
}

.credit:before {
    content:"— ";
}

blockquote, p {padding:0; margin:0;}

.logo-second { position:absolute; margin-top:-20%; margin-left:11%;}
.logo-second h3 { font-size:56px;}

.quoteLeft:hover  {And....} 
```

我更喜欢css或jquery的任何想法谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:09:08.357

我认为这就是你要找的：

**HTML**

```
<div class="main">
    <div class="first">First</div>
    <div class="second">Second</div>
</div> 
```

**CSS**

```
.main .first:hover ~ .second {
    background-color: #f00;
} 
```

我还做了一个[**jsFiddle**](http://jsfiddle.net/ucmgp/)

# android - 将设备方向投射到 LANDSCAPE、PORTRAIT、LANDSCAPE_REVERTED 和 PORTRAIT_REVERTED

> ID：15156111
> 
> 赞同：0
> 
> 时间：2013-03-01T10:59:08.877
> 
> 标签：android, math

我有一项任务，我必须将**设备**（而非活动）方向转换为 4 个值（LANDSCAPE、PORTRAIT、LANDSCAPE_REVERTED 和 PORTRAIT_REVERTED）。我想出了一个解决方案，但它使用固定值，并不代表它如何以及何时改变活动方向的 android 功能。

我找不到可以轻松通知侦听器何时**设备**已将其方向更改为指定的 4 个值的 api。

如果有人可以分享 android 如何计算方向并通知 WindowManager 更改活动方向的功能，那将是非常高兴的。

**[已解决]** 谁可能最终遇到与我相同的情况。 **框架/基础/核心/java/android/view/WindowOrientationListener.java**

此侦听器包含通知活动更改其方向的所有魔法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:07:07.930

在 onConfigChanges() 中，每当您的屏幕方向发生变化时，您总是会收到通知，并且您始终可以像这样获得您的屏幕方向：

```
Display getOrient = getWindowManager().getDefaultDisplay();
switch(orientation){
case Configuration.ORIENTATION_LANDSCAPE:
Log.e();
break;
case Configuration.ORIENTATION_PORTRAIT:
Log.e();
break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:03:11.947

在项目清单中使用 screenOrientation 并设置方向。

```
<activity
            android:name=".SplashScreen"
            android:screenOrientation="portrait"
</activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:05:53.100

如果您希望活动在横向模式下显示和对齐，则在可绘制文件夹中添加一个文件夹，即 layout-landscape 如果您希望应用程序仅在纵向模式下运行，则在清单中声明如下

```
android:screenOrientation="portrait" 
```

**或者你想要横向模式：**

```
 android:screenOrientation="landscape" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T11:27:36.553

我很确定操作系统会计算设备的旋转并在旋转角度改变 60 度时改变方向。因此，如果设备处于纵向且旋转角度等于 0，则当设备逆时针旋转时，旋转角度会增加，当旋转角度约为 60 度时，操作系统将变为横向。现在假设当您顺时针旋转设备时设备处于横向，角度会减小，大约 30 度时操作系统将变为纵向。

**方向改变状态**
左侧是当前方向。
右侧是设备旋转时的新方向。
**Portrait ---> Landscape** 旋转逆时针旋转角度 > 60
**Portrait ---> Landscape_Reverse** 顺时针旋转角度 < -60
**Landscape ---> 纵向**旋转顺时针旋转角度 < 30
**Landscape ---> Portrait_Reverse**逆时针旋转角度 > 150
**Landscape_Reverse ---> 纵向**旋转逆时针旋转角度> -30
**Landscape_Reverse ---> Portrait_Reverse**顺时针旋转角度< -150

设备平放时无法计算旋转角度。这就是为什么如果您在设备平放时启动应用程序并旋转设备，则不会发生方向变化。
您可以在我的回答中查看如何计算旋转角度：[如何使用 Android 中的加速度计测量手机在 XY 平面中的倾斜度](https://stackoverflow.com/questions/11175599/how-to-measure-the-tilt-of-the-phone-in-xy-plane-using-accelerometer-in-android/15149421#15149421)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T11:32:22.900

使用**getRotation()**

```
Display display = ((WindowManager) context.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
int rotation = display.getRotation(); 
```

从文档

> 从“自然”方向返回屏幕的旋转。返回值可能是 Surface.ROTATION_0（无旋转）、Surface.ROTATION_90、Surface.ROTATION_180 或 Surface.ROTATION_270。例如，如果设备具有自然高的屏幕，并且用户已将其侧放以进入横向，则此处返回的值可能是 Surface.ROTATION_90 或 Surface.ROTATION_270，具体取决于它的转动方向。角度是所绘制图形在屏幕上的旋转，与设备的物理旋转方向相反。例如，如果设备逆时针旋转 90 度，为了补偿渲染将顺时针旋转 90 度，因此这里的返回值将是 Surface.ROTATION_90。

# java - Android telnet 客户端问题

> ID：15156115
> 
> 赞同：0
> 
> 时间：2013-03-01T10:59:21.977
> 
> 标签：java, tcp, telnet

我是 android OS 开发的新手。我尝试为 android OS 开发我的 telnet 客户端。现在，我只尝试连接 telnet 服务器，并接收登录消息。

但是当我启动套接字连接远程登录服务器时，我收到了奇怪的符号`??????!????`，而不是来自远程登录服务器的登录消息。

```
public class MainActivity extends Activity {
    protected static final int TCP_SERVER_PORT = 23;
    protected String inMsg, str;
    static Editable sentence;
    static String modifedSentence;
    BufferedReader inFromUser;
    Socket clientSocket = null;
    DataOutputStream outToServer=null;
    BufferedReader inFromServer=null;        

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Button startButton = (Button)findViewById(R.id.startButton);
        final TextView textView = (TextView)findViewById(R.id.textView);

        startButton.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View arg0) {
                new Thread(new Runnable() {                   

                    @Override
                    public void run() {             

       //Create socket
        try {
        clientSocket = new Socket("192.168.1.1",23);
       //Create out stream for ClientSocket
            outToServer = new DataOutputStream(clientSocket.getOutputStream());
       //Create ib stream for ClientSocket          
        inFromServer = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
       //Receive login message from telnet server
            modifedSentence = inFromServer.readLine();
        } catch (UnknownHostException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        }
                 //Update UI activity with login message
         MainActivity.this.runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                          textView.setText(modifedSentence);
                    }
                });   
        }
             }).start();
    }   
        });         
    }

   protected void onDestroy()
    {
        try {
            clientSocket.close();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:34:40.657

Telnet 应用程序需要 telnet 协议才能连接到 telnet 服务器。这不是一个简单的 tcp 连接。我使用为 telnet 访问提供类的 apache commonse 库。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:07:50.050

这些“奇怪”的符号`??????!????`意味着您使用了错误的编码。创建时，`InputStreamReader`您应该明确指出该流应该使用哪种编码。我不知道您的`telnet`服务中使用了哪种编码，但您可以尝试各种编码，例如`windows-1252`：

`new InputStreamReader(clientSocket.getInputStream(), Charset.forName("windows-1252"))`

# css - JavaFX 麻烦的手风琴

> ID：15156127
> 
> 赞同：0
> 
> 时间：2013-03-01T10:59:59.033
> 
> 标签：css, javafx, accordion

我是新手`JavaFX`，我想给填充物`accordion`，我改变`CSS`手风琴喜欢

```
.titled-pane {
    -fx-skin: "com.sun.javafx.scene.control.skin.TitledPaneSkin";    
    -fx-text-fill: -fx-text-base-color;
    -fx-padding: 0.5em;
} 
```

但是手风琴的底部不可见，我该怎么办？

![在此处输入图像描述](../Images/ea247f47366c7e2b07bc70e8ebaec4e4.png)

# python-2.7 - Flask-Login - 如何获取会话 ID

> ID：15156132
> 
> 赞同：16
> 
> 时间：2013-03-01T11:00:33.730
> 
> 标签：python-2.7, flask, flask-sqlalchemy, flask-login, flask-extensions

我正在使用 Flask 开发服务器环境使用 Flask、Gevent 和 web socket 做一个项目。我用过`flask_login`。这里

1.  如何获得每个连接的唯一会话 ID？
2.  我想将其存储`SessionID`在数据库中，并在客户端断开连接后将其删除。
3.  如何获得总活跃连接数

    ```
    from flask_login import * 
    login_manager = LoginManager()
    login_manager.setup_app(app)

    @app.route("/", methods=["GET", "POST"]) 
    def login():
        login_user([username], remember):    

    @app.route("/logout") 
    @login_required 
    def logout(): 
        logout_user() 
    ```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-03-03T15:51:33.487

没有会话 ID。

Flask 中的会话只是 cookie 的包装器。您保存在上面的内容经过数字签名并作为 cookie 发送给客户端。当您发出请求时，该 cookie 会发送到您的服务器，然后在 Python 对象中进行验证和转换。

AFAIK，Flask-Login 将用户 ID 保存在会话中。

要获得总活跃连接数，您可以：

1.  在登录时，生成一个唯一的 id 并将其保存在会话中（`flask.session['uid'] = uuid.uuid4()`例如），然后将其保存在您的数据库中。
2.  `del flask.session['uid']`在注销时，从会话 ( ) 以及您的数据库中删除该唯一 ID 。
3.  使用您喜欢的方法（ORM/Raw SQL）检索活动会话数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-19T20:41:14.173

会话 ID 位于：flask.session['_id']

# android - Android加载webview内容全屏

> ID：15156138
> 
> 赞同：1
> 
> 时间：2013-03-01T11:01:00.000
> 
> 标签：android

当我将以下 url 提供给 android 中的 webview 时，内容仅显示在左上角。我想让它全屏显示（仅限内容）。我怎样才能做到？

[http://staging.snagfilms.com/modules/html5player.jsp?filmId=ed9195a0-a748-11e0-a92a-0026bb61d036&w=500&html5=1](http://staging.snagfilms.com/modules/html5player.jsp?filmId=ed9195a0-a748-11e0-a92a-0026bb61d036&w=500&html5=1)

xml:

```
 <LinearLayout
        android:id="@+id/layout_browser_new1"
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" 
        android:layout_weight="1" >

        <com.verizon.viewdini.ui.custom.CustomFacedWebView
            android:id="@+id/web_wrap_browser"
            android:layout_width="match_parent"
            android:layout_height="fill_parent"/>
    </LinearLayout> 
```

代码：

```
myWebView.getSettings().setPluginsEnabled(true);
myWebView.getSettings().setJavaScriptEnabled(true);
myWebView.getSettings().setPluginState(PluginState.ON);
myWebView.getSettings().setLoadWithOverviewMode(true);
myWebView.getSettings().setUseWideViewPort(true);
myWebView.getSettings().setBuiltInZoomControls(true);
myWebView.setScrollBarStyle(WebView.SCROLLBARS_OUTSIDE_OVERLAY);
myWebView.setScrollbarFadingEnabled(false);
myWebView.requestFocusFromTouch(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:15:43.150

在 xml 中使用这行

```
<WebView  
        android:id="@+id/webview_compontent"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent" 
        android:layout_weight="1.0"   
    /> 
```

也启用以下设置行。

```
 WebSettings webSettings = mWebView.getSettings();
        webSettings.setBuiltInZoomControls(true);
        webSettings.setPluginState(WebSettings.PluginState.ON);
        webSettings.setJavaScriptEnabled(true);
        webSettings.setLoadWithOverviewMode(true);
        mWebView.requestFocusFromTouch(); 
```

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:10:52.597

**使用代码：**

```
 Webview.getSettings().setBuiltInZoomControls(true);
    this.webview.getSettings().setLoadWithOverviewMode(false);
    this.webview.getSettings().setUseWideViewPort(false); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T07:59:29.593

将此添加到您的 HTML 文件中：

`<meta name="viewport" content="width=device-width"/>`

之后，在您的代码中进行设置：

`WebView.getSettings().setLoadWithOverviewMode(true); WebView.getSettings().setUseWideViewPort(true);`

希望这会奏效。
如果 setLoadWithOverviewMode 不能按您的意愿工作，您可以计算您网站的 sizee 和 webview 大小之间的比例，然后应用该比例

`WebView.setInitialScale(the_scale_ratio);`

在这种情况下，请记住删除 HTML 文件中的“viewport”标签。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-08T01:47:44.250

三个步骤使其工作。

1.  使布局全屏无填充，无边距。

2.  使您的网页周围没有填充，没有边距。

3.  让你的网页四周无负左、右、上、下浮动。

# android - GPS 在 IntentService 中不起作用

> ID：15156139
> 
> 赞同：0
> 
> 时间：2013-03-01T11:01:03.820
> 
> 标签：android, gps, android-location

我的服务中有以下代码：

```
 LocationManager locationManager = 
         (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    String provider = 
          locationManager.getProvider(LocationManager.GPS_PROVIDER).getName();
    Location location = locationManager.getLastKnownLocation(provider);
    while(true)
     {
       if(...)//every 5 seconds it gets into
         {
                ....//control if the location is not null
            lat = location.getLatitude();
            lon = location.getLongitude();
            alt = location.getAltitude();
            Log.i(TAG, "Latitude: "+lat+"\nLongitude: "+lon+"\nAltitude: "+alt);

         }
        else {
            Log.i(TAG, "Error!");
            }
    } 
```

这种代码在我的模拟器中有效（GPS 被插入到`Log`），但在我的移动设备中，这段代码会到达`else`分支。有人能告诉我问题出在哪里吗？在我的代码中还是在我的移动设备中？提前致谢。

PS：GPS已开启，在其他应用程序中它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:33:07.737

`getLastKnownLocation()`不会从 GPS 提供商处获取后续位置。它将返回（顾名思义）某些代码请求的最后一个已知位置。我假设您检查位置不在`null`条件中，这未在您的代码中显示。如果设备通过其他方式“确定”最后一个已知位置太旧或不可靠，则该位置为空。您需要请求位置更新并提供位置侦听器以重复获取位置。

有很多教程可用。[这](http://www.javacodegeeks.com/2010/09/android-location-based-services.html)是一个。其中。

# razor - ASP.NET MVC 4：为强类型视图上使用的 DropdowlistFor 选择默认值

> ID：15156150
> 
> 赞同：0
> 
> 时间：2013-03-01T11:01:33.163
> 
> 标签：razor, asp.net-mvc-4, html.dropdownlistfor

也许这个问题已经被问过了，但我找到的答案并不清楚。

我想选择我的下拉列表的默认值。我有一个国家列表，并根据通过 Thread.CurrentThread.CurrentCulture 检索的区域代码，我想选择用户所在的国家/地区。

是否可以通过我的方法：

**看法**

```
@model Question
@Html.DropDownListFor(b => b.SelectedAnswer,new SelectList(Model.Answers,"ID","Country")) 
```

**模型**

```
 public class Question
    {

        public int ID { get; set; }
        public string Country { get; set; }

        public List<Answer> Answers { get; set; }
        [Required]
        public int SelectedAnswer { get; set; }
        public int Order { get; set; }

        public Question()
        {
            Answers = new List<Answer>();
        }
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T15:24:01.283

我打算将此添加为评论，但长度太长，如果我有帮助，您可以接受这个作为答案。

这是我用来实现它的方法；

首先，在视图模型中，我有以下内容

```
public int FooID { get; set; }
public IEnumerable<SelectListItem> FooList { get; set; } 
```

FooID 既是默认值（或当前选择），也是用于收集发布结果的属性。

我有一个函数来构建 FooList，它返回 List 的类型，对每个项目使用这种格式：

```
new SelectListItem { Text = i.Name, Value = i.FooID.ToString() }; 
```

在输出viewmodel之前，会将当前值插入到FooID中，或者如果这是一个新的item，我一般会将值设置为1，即默认值。

然后为输出；

```
@Html.DropDownListFor(m => m.FooID, Model.FooList) 
```

请记住，FooID 将作为字符串传递，因此需要作为字符串 FooID 参数收集，并转换为 Int。只要在视图模型从控制器传递给视图之前设置了FooID，FooList中值等于FooID的项就会被设置为默认值……例如；

```
public ActionResult MyAction()
    {
        MyVM vm = new MyVM();
        vm.FooID = 1;
        vm.FooList = FunctionToGenerateFooList();

        return View(vm);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:40:45.830

确实，您应该将下拉列表作为包含 SelectListItem 的列表传递。然后对于每个国家，将文本作为国家代码并在值内为其分配一个 id。然后，当您初始化模型时，收集文化，并找到列表中的哪个项目具有匹配的文本

```
 Thread.CurrentThread.CurrentUICulture.Name; 
```

并将其 value 属性分配给 SelectedAnswer。

# iis-7.5 - KB2742595 之后 System.ServiceModel.Dispatcher.ClientRuntime 中的 InvalidProgramException

> ID：15156151
> 
> 赞同：1
> 
> 时间：2013-03-01T11:01:34.907
> 
> 标签：iis-7.5

当我在我的网络服务器上安装安全补丁 KB2742595 时，我开始收到“异常类型：InvalidProgramException

```
 Exception message: Common Language Runtime detected an invalid program.
   at System.ServiceModel.Dispatcher.ClientRuntime..ctor(String contractName, String contractNamespace)"

Stack trace:    at System.ServiceModel.Dispatcher.ClientRuntime..ctor(String contractName, String contractNamespace)
   at System.ServiceModel.Description.DispatcherBuilder.BuildProxyBehavior(ServiceEndpoint serviceEndpoint, BindingParameterCollection& parameters)
   at System.ServiceModel.Channels.ServiceChannelFactory.BuildChannelFactory(ServiceEndpoint serviceEndpoint, Boolean useActiveAutoClose)
   at System.ServiceModel.ChannelFactory.CreateFactory()
   at System.ServiceModel.ChannelFactory.OnOpening()
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.Channels.CommunicationObject.Open() 
```

配置是 W Server 2K8 SP1，并通过 nettcp 与 WCF 服务通信。请帮忙。

# java - 通过java调用EJB

> ID：15156159
> 
> 赞同：-3
> 
> 时间：2013-03-01T11:01:59.040
> 
> 标签：java, ejb, ejb-2.x

我对EJB一无所知。我假设它是一种从某处获取数据的替代方法，就像我们在使用 Web 服务时所做的那样。对于我的新项目，我们将使用 EJB 来获取数据。这些服务将由其他​​团队开发。

我希望有人可以指导我获取有关如何在我们的 Java 代码中使用 EJB 服务的链接。什么都是需要的。就像使用 web 服务一样，我们有一个 wsdl，生成客户端，创建存根对象并调用我们的方法。使用 ejb 服务的类似步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:52:05.293

对于 EJB，您不需要创建客户端。只需将其“注入”到您的代码中即可。

如果您想从 EE 代码（例如其他 EJB 或 servlet）调用它，只需使用 @EJB 来定义 EJB 注入。

如果您想在非 EE 代码（例如 Struts 操作）中使用它，您可以使用 JNDI 来查找 EJB。

# regex - 使用 mod_rewrite 替换 htaccess 中的特定字符串

> ID：15156170
> 
> 赞同：1
> 
> 时间：2013-03-01T11:02:30.143
> 
> 标签：regex, .htaccess, mod-rewrite, url-rewriting

我遇到的问题是我需要匹配和替换 URL 中的特定字符串，而不是在查询字符串变量的标准点拆分，并且仅使用要在预期 URL 中使用的 pagevars 变量的后半部分。

在这种特殊情况下，我需要使用 .htaccess 来重定向此 URL：

[http://example.com/details.php?pagevars=this-variable-id-WGZ8765](http://example.com/details.php?pagevars=this-variable-id-WGZ8765)

对此：

[http://example.com/item/id-WGZ8765](http://example.com/item/id-WGZ8765)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:32:46.073

您必须使用`RewriteCond`来分析查询字符串，任何捕获的模式都将以**%N** in 的形式提供`RewriteRule`（就像规则本身中捕获的模式以**$N**的形式提供一样：

```
RewriteCond %{QUERY_STRING} this\-variable\-id\-(.*)$
RewriteRule ^details\.php$ /item/id-%1 [L] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:15:04.830

类似这样的东西应该可以工作......

```
RewriteCond %{QUERY_STRING} \-id\-([A-Za-z0-9]+)$
RewriteRule ^details\.php$ /item/id-%1 [L] 
```

如果没有更多关于原始 URL 中可能/可能不会发生变化的知识，很难确定 - 可能是您需要更改正则表达式的锚定方式。

# jakarta-ee - Glassfish web.xml servlet 映射到 @WebService 获取 ClassCastException

> ID：15156171
> 
> 赞同：3
> 
> 时间：2013-03-01T11:02:33.923
> 
> 标签：jakarta-ee, servlets, glassfish, jax-ws

当部署到 Glassfish（最好也部署到 TomEE）时，我试图控制我的 Web 服务的 URL 端点。

我有一堂课：

```
@Stateless
@WebService(
    targetNamespace = "http://foo.net/doc/2012-08-01",
    name = "FooService",
    portName = "FooPort",
    serviceName = "FooService")
public class FooSoapService extends SoapBase {
...
} 
```

还有一个 web.xml：

```
<servlet>
    <description>SOAP Endpoint for Foo operations.</description>
    <servlet-name>Foo</servlet-name>
    <servlet-class>com.foo.FooSoapService</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>FooPack</servlet-name>
    <url-pattern>/soap/FooPack</url-pattern>
</servlet-mapping> 
```

如果我在 Glassfish 中部署时访问 /context-root/soap/FooPack?wsdl 我最终会得到：

```
java.lang.ClassCastException: com.foo.FooSoapService cannot be cast to javax.servlet.Servlet 
```

除了一些 jax-rs 的东西外，web.xml 中几乎没有其他内容。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:55:37.727

好吧，`FooSoapService`您声称是 Web 服务实现类的类需要实现服务接口，可能`FooService`在您的`@WebService`注释`serviceName`属性中定义。

你得到这个异常的原因是你的`FooSoapService`类不是一个实例，`javax.servlet.Servlet`而且它肯定不需要是一个实例。在您的 web.xml 中，您不能公开您的 Web 服务端点。它需要通过`sun-jaxws.xml`. 像这样的东西：

```
<endpoints xmlns="http://java.sun.com/xml/ns/jax-ws/ri/runtime" version="2.0">
     <endpoint name="FooPort" implementation="com.foo.FooSoapService" url-pattern="/services/FooService"/>
</endpoints> 
```

你的 web.xml 应该是这样的：

```
<listener>
    <listener-class>
            com.sun.xml.ws.transport.http.servlet.WSServletContextListener
    </listener-class>
</listener>
<servlet>
    <servlet-name>Foo</servlet-name>
    <servlet-class>
        com.sun.xml.ws.transport.http.servlet.WSServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Foo</servlet-name>
    <url-pattern>/services/FooService</url-pattern>
</servlet-mapping> 
```

如果您进行这些更改，那么您将能够从以下位置获取 WSDL：

```
/context-root/services/FooService?wsdl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T04:44:52.897

glassfish 4.0 也有这种能力。配置是可部署的，没有错误。

# ios - 设备连接到 wi-fi 时 iOS 发布通知

> ID：15156173
> 
> 赞同：0
> 
> 时间：2013-03-01T11:02:39.300
> 
> 标签：ios, networking, notifications

当设备连接到 wi-fi 或移动数据网络时，我有没有办法自动发布通知？

我在想，当连接发生时，在我的应用程序委托中使用它：

```
[[NSNotificationCenter defaultCenter]
 postNotificationName:@"connectedToNetwork"
 object:nil]; 
```

并在我的课堂上捕捉到这个通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(doSomething)
                                             name:@"connectedToNetwork"
                                           object:nil]; 
```

我正在使用 Reachability 查看设备是否已连接到 Internet，但这不是我想要的。我希望在设备连接到 wi-fi 或移动网络时自动调用一些通知。我不在乎是否可以通过该网络访问互联网，我只需要在连接发生时得到通知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:49:59.633

```
// allocate a reachability object
Reachability* reach = [Reachability reachabilityWithHostname:@"www.google.com"];

// tell the reachability that we DONT want to be reachable on 3G/EDGE/CDMA
reach.reachableOnWWAN = NO;

// here we set up a NSNotification observer. The Reachability that caused the notification
// is passed in the object parameter
[[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(reachabilityChanged:) 
                                             name:kReachabilityChangedNotification 
                                           object:nil];

[reach startNotifier] 
```

# c# - 字典的单声道实现 使用 .Equals(obj o) 而不是 .GetHashCode()

> ID：15156175
> 
> 赞同：0
> 
> 时间：2013-03-01T11:02:49.570
> 
> 标签：c#, generics, dictionary, comparison, unique

通过搜索 msdn c# 文档和堆栈溢出，我得到了`Dictionary<T,T>`应该`GetHashCode()`用于检查键唯一性和进行查找的清晰印象。

> Dictionary 泛型类提供从一组键到一组值的映射。字典中的每个添加都包含一个值及其关联的键。使用它的键检索一个值非常快，接近 O(1)，因为 Dictionary 类是作为哈希表实现的。...检索速度取决于为 TKey 指定的类型的散列算法的质量。

我使用单声道（在 Unity3D 中），在我的工作中得到一些奇怪的结果后，我进行了这个实验：

```
public class DictionaryTest
{
    public static void TestKeyUniqueness()
    {
    //Test a dictionary of type1
    Dictionary<KeyType1, string> dictionaryType1 = new Dictionary<KeyType1, string>();
    dictionaryType1[new KeyType1(1)] = "Val1";
    if(dictionaryType1.ContainsKey(new KeyType1(1)))
    {
        Debug.Log ("Key in dicType1 was already present"); //This line does NOT print
    }

    //Test a dictionary of type1
    Dictionary<KeyType2, string> dictionaryType2 = new Dictionary<KeyType2, string>();
    dictionaryType2[new KeyType2(1)] = "Val1";
    if(dictionaryType2.ContainsKey(new KeyType2(1)))
    {
        Debug.Log ("Key in dicType2 was already present"); // Only this line prints
    }
  }
} 
```

```
//This type implements only GetHashCode()
public class KeyType1
{
    private int var1;

    public KeyType1(int v1)
    {
        var1 = v1;
    }

    public override int GetHashCode ()
    {
        return var1;
    }
} 
```

```
//This type implements both GetHashCode() and Equals(obj), where  Equals uses the hashcode.
public class KeyType2
{
    private int var1;

    public KeyType2(int v1)
    {
        var1 = v1;
    }

    public override int GetHashCode ()
    {
        return var1;
    }

    public override bool Equals (object obj)
    {
        return GetHashCode() == obj.GetHashCode();
    }
} 
```

只有当使用类型`KeyType2`时，键才被认为是相等的。对我来说，这表明 Dictionary 使用 Equals(obj) 而不是 GetHashCode()。

有人可以重现这个，并帮助我解释其含义吗？它是单声道的错误实现吗？或者我误解了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:05:36.493

> 我清楚地知道 Dictionary 应该使用 .GetHashCode() 来检查键唯一性

是什么让你这么想？`GetHashCode`不返回唯一值。

而[MSDN](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)明确表示：

> 字典需要一个相等的实现来确定键是否相等。您可以使用接受比较器参数的构造函数来指定 IEqualityComparer 通用接口的实现；如果未指定实现，则使用默认的通用相等比较器 EqualityComparer.Default。如果类型 TKey 实现 System.IEquatable 泛型接口，则默认相等比较器使用该实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:24:51.180

这样做：

```
public override bool Equals (object obj)
{
    return GetHashCode() == obj.GetHashCode();
} 
```

在一般情况下是错误的，因为您最终可能会**得到等于**,的`KeyType2`实例，而不是实例。**`StringBuilder``SomeOtherClass``AnythingYouCanImagine`**

 **你应该完全这样做：

```
public override bool Equals (object obj)
{
    if (obj is KeyType2) {
        return (obj as KeyType2).var1 == this.var1;
    } else
        return false;
} 
```

当您尝试覆盖`Equals`并且本质上您必须确保**按此顺序**`GetHashCode`执行以下几点（给定 MyObject 类）（您正在以相反的方式进行操作）：

 **`MyObject`1）什么时候有两个相等的实例？假设你有：

```
public class MyObject {
     public string Name { get; set; }
     public string Address { get; set; }
     public int Age { get; set; }

     public DateTime TimeWhenIBroughtThisInstanceFromTheDatabase { get; set; }
} 
```

并且您在某个数据库中有 1 条记录需要映射到此类的实例。并且您约定从数据库中读取记录的时间将存储在`TimeWhenIBroughtThisInstanceFromTheDatabase`：

```
MyObject obj1 = DbHelper.ReadFromDatabase( ...some params...);
// you do that at 14:05 and thusly the TimeWhenIBroughtThisInstanceFromTheDatabase
// will be assigned accordingly

// later.. at 14:07 you read the same record into a different instance of MyClass
MyObject obj2 = DbHelper.ReadFromDatabase( ...some params...);
// (the same)

// At 14:09 you ask yourself if the 2 instances are the same
bool theyAre  = obj1.Equals(obj2) 
```

你希望结果是**真的**吗？我会说你会。因此，Equals 的覆盖应该是这样的：

```
public class MyObject {
    ...
    public override bool Equals(object obj) {
        if (obj is MyObject) {
            var that = obj as MyObject;
            return (this.Name == that.Name) && 
                   (this.Address == that.Address) &&
                   (this.Age == that.Age);
                   // without the syntactically possible but logically challenged:
                   // && (this.TimeWhenIBroughtThisInstanceFromTheDatabase == 
                   //     that.TimeWhenIBroughtThisInstanceFromTheDatabase)
        } else 
            return false;
    }
    ...
} 
```

2)**确保**只要 2 个实例相等（如您实现的 Equals 方法所示），它们的 GetHashCode 结果将是相同的。

```
int hash1 = obj1.GetHashCode();
int hash2 = obj2.GetHashCode();
bool theseMustBeAlso = hash1 == hash2; 
```

最简单的方法是（在示例场景中）：

```
 public class MyObject {
    ...
    public override int GetHashCode() {
       int result;
       result = ((this.Name != null) ? this.Name.GetHashCode() : 0) ^
                ((this.Address != null) ? this.Address.GetHashCode() : 0) ^
                this.Age.GetHashCode();
       // without the syntactically possible but logically challenged:
       // ^ this.TimeWhenIBroughtThisInstanceFromTheDatabase.GetHashCode()
    }
    ...
} 
```

**请注意**： - 字符串可以为空，并且`.GetHashCode()`可能会失败`NullReferenceException`。- 我使用了 ^ (XOR)。只要遵守黄金法则（第 2 条），您就可以使用任何您想要的东西。- x ^ 0 == x（对于任何 x）****

# android - ListView 项目 - 来回

> ID：15156186
> 
> 赞同：1
> 
> 时间：2013-03-01T11:03:13.740
> 
> 标签：android, android-listview, android-adapter

好的，我在 DialogPreference 中有一个 ListView，其中填充了扩展 BaseAdapter 的 CustomAdapter。

当对话框第一次出现时，它会显示我从 web api 获得的根目录列表。一旦用户单击其中一个 ListItem，我现在将显示子目录。

在添加新的列表视图之前，我这样做是为了清除当前的列表视图：

```
lv.setAdapter(null); 
```

我想要一种面包屑，用户可以在其中看到他在哪个目录中，并且可以轻松地单击其中一个面包屑返回该目录。

```
Root > Channel > SubChannel > SubSub > Foo 
```

我不确定这将如何或应该如何完成。我只想回到基本上，就像后退按钮所做的那样（尽管在这种情况下我没有使用后退按钮）。

感谢您对正确方向的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:12:41.877

您现在如何处理导航？层次结构是否有一定数量的级别，每个级别都有不同的活动，或者您是否在单个活动中执行所有导航？

如果每个级别本质上只是一个与其他级别无法区分的文件夹，那么您很可能希望覆盖 onBackPressed()。如果您处于顶层并且想要退出活动，请调用 super.onBackPressed(); 否则，请自行处理导航，不要调用默认实现。

如果您在每个级别都有不同的活动，并且希望能够从面包屑栏返回活动，则可以调用 finish()。如果您需要返回多个级别，则必须与前一个活动通信，它也需要调用完成（）。活动之间通信的最佳方式是使用 startActivityForResult()、setResult() 和 onActivityResult()。

# javascript - 获取第三行 div 内容

> ID：15156189
> 
> 赞同：0
> 
> 时间：2013-03-01T11:03:20.083
> 
> 标签：javascript, jquery, html, dojo

我有一个四行内容的 div。我可以使用以下代码获取行数。但我的要求是获取 div 的 4 行文本。例如：

```
<div>
   ut returns between paragraphsut returns between paragraphs
   ut returns between paragraphsut returns between paragraphs
   web ui text is going on hereut returns between paragraphsut 
   returns between paragraphs
</div> 
```

在上面的 DIV 中。我想得到第 4 行文本，即在段落之间返回。有没有办法做到这一点。

我得到了以下代码的行数

```
var content = elm.innerHTML;     
var elmHeight = elm.offsetHeight;
var lineHeight = 15;
var lines = elmHeight / lineHeight; 
```

行变量具有特定 DIV 中的行数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:45:40.720

var line_number=3; // 你喜欢的行号

var result= $.trm( $( '#mydiv' ).text() ).split( '\n' )[line_number];// mydiv 是划分的id

警报（结果）；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:37:14.613

以下对我来说适用于 Firefox。我希望它也可以被采用在 IE 下工作。

```
<html>
  <head>
    <script language="javascript">
<!--

function find3rdline (element)
{
    var text = element.textContent;

    var begin = -1;
    var end = -1;
    var top = -1;
    var line = -1;
    for (i = 0; i < text.length; i++)
    {
        var id = "marker" + i;
        element.innerHTML = text.substr (0, i) + "<span id='" + id + "'>X</span>" + text.substr (i, text.length - i);
        var marker = document.getElementById (id);
        if (marker.offsetTop != top)
        {
            top = marker.offsetTop;
            line++;
            if (line == 2) begin = i;
            else if (line == 3)
            {
                end = i;
                // break;
            }
        }
    }

    element.innerHTML = text;

    if (begin == -1) return "";
    else if (end == -1) return text.substr (begin, text.length - begin);
    else return text.substr (begin, end - begin);
}

// -->
    </script>
  </head>
  <body onload="alert ('Third line is: [' + find3rdline (text) + ']')">
    <div id="text">
      Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce porttitor, leo non sollicitudin blandit, metus eros dapibus massa, nec euismod nunc sapien quis nunc. Maecenas mollis, justo sed egestas semper, nulla libero blandit sem, eget gravida ante sapien sagittis turpis. Vivamus sit amet elit tortor, a eleifend mi. Aliquam erat volutpat. Vestibulum sit amet pellentesque magna. Integer eget erat nisl. Suspendisse adipiscing placerat felis quis blandit. Etiam hendrerit tincidunt gravida. Nunc condimentum tristique commodo. Aliquam eget tellus et sapien accumsan cursus.  Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce porttitor, leo non sollicitudin blandit, metus eros dapibus massa, nec euismod nunc sapien quis nunc. Maecenas mollis, justo sed egestas semper, nulla libero blandit sem, eget gravida ante sapien sagittis turpis. Vivamus sit amet elit tortor, a eleifend mi. Aliquam erat volutpat. Vestibulum sit amet pellentesque magna. Integer eget erat nisl. Suspendisse adipiscing placerat felis quis blandit. Etiam hendrerit tincidunt gravida. Nunc condimentum tristique commodo. Aliquam eget tellus et sapien accumsan cursus.
    </div>
  </body>
</html> 
```

# php - 实现一年假期的功能？

> ID：15156193
> 
> 赞同：0
> 
> 时间：2013-03-01T11:03:29.000
> 
> 标签：php, datepicker

我有一个假期清单，例如：

```
var holiDays =[[2013,01,01,'New Years Day'],[2013-05-27, 'Memorial Day']] 
```

并在 celender 上显示，但这个列表是硬编码的，所以我想要一个 php 中的函数，以便所有假期列表可见。 `$(function() { $("#id_holiday_date").datepicker({ beforeShowDay: setHoliDays });`

 ````
 // set holidays function which is configured in beforeShowDay
     function setHoliDays(date) {
       for (i = 0; i < holiDays.length; i++) {
         if (date.getFullYear() == holiDays[i][0]
              && date.getMonth() == holiDays[i][1] - 1
              && date.getDate() == holiDays[i][2]) {
            return [true, 'holiday', holiDays[i][3]];
         }
       }
      return [true, ''];
    }

 }); 
```

this function work properly in date picker.this date picker takes date from hardcoded array.
I want a function like that:
function calculateHolidays($year = '') {` 

```
$holiDays = Array();
$year = ($year != '') ? $year : date('Y'); //Default Current Year
$newYear = "$year-01-01";
$temp = "$year-05-00 last monday";
$memorialDay = strtotime($temp);//last Monday of May for Current Year 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:08:26.220

如果我是你，我会看看[梨约会假期。](http://pear.php.net/package/Date_Holidays/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:27:49.437

这是一种方法 - 如果您想找到`[]`给定年份的所有括号：

```
function display_holidays($year,$list){
    echo "<ul>";
    $list=str_replace(array('[[',']]','],['),array('[',']',']|['),$list);
    $list=explode("|",$list);
    foreach($list as $item){
        // find the items with the correct year
        if(strstr($item,"[".$year)){
            echo "<li>".$item."</li>";
        }
    }
    echo "</ul>";
} 
```

使用示例：

```
$list="[[2012,01,01,'New Years Day'],[2013,05,27, 'Memorial Day']]";
$year=2013;
display_holidays($year,$list); 
```

结果将是：

```
<ul>
   <li>[2013,05,27, 'Memorial Day']</li>
</ul> 
```

**ps**：但请更详细地解释您想要实现的目标。

# windows - Windows Phone中的json解析

> ID：15156195
> 
> 赞同：2
> 
> 时间：2013-03-01T11:03:38.273
> 
> 标签：windows, windows-phone

请帮助我，如何在 Windows Phone 7 中使用给定的 URL 进行 json 解析[https://data.cityofchicago.org/api/views/xzkq-xp2w/rows.json?search=rahm](https://data.cityofchicago.org/api/views/xzkq-xp2w/rows.json?search=rahm)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:44:25.053

将 newtonnsoft json 库添加到 Visual Studio 并使用此代码

```
 WebClient webClient = new WebClient();
    webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(downloadAboutCompleted);
webClient.OpenReadAsync(new Uri("https://data.cityofchicago.org/api/views/xzkq-xp2w/rows.json?search=rahm"), c);

private void downloadAlbumCompleted(object sender, OpenReadCompletedEventArgs e)
        {
            if (e.Error == null && !e.Cancelled)
            {
                 using (StreamReader httpwebStreamReader = new StreamReader(e.Result))
                {
                    var results = httpwebStreamReader.ReadToEnd();
                System.Diagnostics.Debug.WriteLine(results):
                    var json = JObject.Parse(results);
                System.Diagnostics.Debug.WriteLine(json):

                    foreach (JObject array in json["meta"]["view"])
                    {
                        JObject obj = JObject.Parse(array.ToString());
                        string id= (string)obj["id"];
                        string name= (string)obj["name"];

                System.Diagnostics.Debug.WriteLine(id + name):
                    }

                }

            }
        } 
```

# inheritance - 重复继承。模糊的

> ID：15156197
> 
> 赞同：0
> 
> 时间：2013-03-01T11:03:41.923
> 
> 标签：inheritance, ambiguity, qualifiers

让我们假设情况。

```
struct Top
{
  int x;
};

struct Left : public Top
{};

struct Right : public Top
{};

struct Bottom : public Left, public Right
{
  void foo()
  {
    Left::x; // Normal compiled
  }

  void goo()
  {
    Left::Top::x; // error: ‘Top’ is an ambiguous base of ‘Bottom’ // Why --- ????
  }
}; 
```

有人可以解释一下为什么在函数 goo() 编译器中会出现歧义错误吗？

我写了 void foo() 来表明如果我通过限定符 Left::x; 访问 x; 没有歧义，所以为什么当我使用更详细的访问限定符 Left::Top::x; 出现歧义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-20T08:42:39.263

您的问题在 OOP 语言中称为“钻石问题”。请记住， :: 只是指导在哪里可以找到某些东西，而不是如何明确地获取那个东西。在方法 foo 中，您引用的 x 是 left 已知的。到目前为止还可以。但是在方法 goo 中，您的说法是“获取 Top< 已知的 x >，Left 已知的 x”。但是这个引用并没有改变这样一个事实，即您的 Right 类也知道 Top 类。因此，在您的情况下，Left::Top::x 与编写 Top::x 相同。结果是，它是模棱两可的，你想要哪个Top的x，是Left继承的那个，还是Right的那个。当然，在您的情况下，它只是一种编译器无法运行的单一类型。但这是一个通用规则，这样的东西很快就会变得很奇怪；）

# regex - 正则表达式匹配但不应该

> ID：15156198
> 
> 赞同：3
> 
> 时间：2013-03-01T11:03:50.980
> 
> 标签：regex, asp-classic, match

这是我的代码，用于检查是否只填写了字母数字字符，但是当我输入类似 adasd@#$ 之类的内容时，它仍然匹配，我不知道为什么。知道如何解决这个问题吗？

```
Match Match = Regex.Match(value.ToString(), "[0-9a-zA-Z]");
                if (Match.Success)
                {
                    return true;
                }
                else
                {
                    return false;
                } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T11:05:20.440

您所拥有的内容与其中某处包含一个字母或数字的任何字符串匹配。

您需要在字符串 ( `^`and `$`) 的开头和结尾添加锚点，以及 a`+`以允许多个字符：

```
"^[0-9a-zA-Z]+$" 
```

这意味着“整个字符串必须由字母和数字组成”。

还要求字符串中`+`至少有一个字符。这可能是件好事，但如果您也想匹配空字符串，也可以将其更改为`*`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:08:43.490

您的正则表达式`[0-9a-zA-Z]`检查输入字符串中的任何字母数字字符。由于它在您的输入字符串中找到 a、d、a、s、d，因此它返回 true。
您需要做的是在您的正则表达式中放置开始和结束锚点。新的正则表达式如下所示：

```
^[0-9a-zA-Z]+$ 
```

# android - Android 应用程序中的本地化

> ID：15156199
> 
> 赞同：0
> 
> 时间：2013-03-01T11:03:53.040
> 
> 标签：android, localization

有疑问。

我正在我的示例 android 应用程序中进行本地化（区域设置语言规范）。

按照这个[http://developer.android.com/training/basics/supporting-devices/languages.html](http://developer.android.com/training/basics/supporting-devices/languages.html)

我在做什么，创建了三个值文件夹。

```
1-values-fr
      string.xml  

 2-values-de
      string.xml

 3-values-nl
      string.xml 
```

`string.xml`在具有三个字符串的默认值中

```
<string name="btn">OK</string>
    <string name="btn_back">Back</string>
    <string name="btn_next">Next</string> 
```

对于值-fr：-

```
 <string name="btn">bien</string>
    <string name="btn_back">arrière</string>
    <string name="btn_next">suivant</string> 
```

现在我正在将我的英语单词转换为法语单词并将它们放入`values-fr` `string.xml`

我认为这项非常令人头疼的工作将每个英语单词翻译成法语或其他语言，然后输入`string.xml`。

**这是问题焦点：-这只是这样做的方法，或者我们还有其他方法**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-26T07:12:43.747

您可以尝试[OneSky](http://www.oneskyapp.com)来解决您提到的问题。

这很容易。

*   上传您的英文 .xml 文件
*   翻译（您可以使用我们的在线编辑器或订购机器/人工翻译进行在线翻译）
*   翻译完成后，系统会自动为您生成所有不同语言的 .xml 文件
*   您可以将所有翻译下载为单个 zip 文件。它已经包含必要的文件夹结构，可以直接用于您的应用程序

我们的平台是免费使用的，除非您决定向我们订购翻译服务。

免责声明：我是 OneSky 的员工

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:46:42.720

您可以使用 Translator Toolkit 自动翻译您的 strings.xml。你可以在[这里](http://googledevelopers.blogspot.it/2012/03/localize-your-apps-and-content-more.html)阅读。

如果您只想在一张表中查看不同语言的值，则可以查看 Sequoyah 插件。它有 Sequoyah Android 本地化编辑器工具，可以在一个表中显示不同语言的所有字符串键和相应的值。有关 Sequoyah 项目的信息位于此处：[http](http://eclipse.org/sequoyah) ://eclipse.org/sequoyah安装指南位于此处：http: [//eclipse.org/sequoyah/downloads/index.php#update_site](http://eclipse.org/sequoyah/downloads/index.php#update_site)。

# memory - 非连续内存区域的 gnu 链接器部分

> ID：15156201
> 
> 赞同：15
> 
> 时间：2013-03-01T11:03:58.953
> 
> 标签：memory, linker, gnu, regions

我正在尝试编写一个链接器脚本来将一个部分内容写入两个不连续的内存区域。

我在这个邮件列表中找到了一个关于这个的旧线程：“ld 链接器脚本和非连续内存区域” [http://sourceware.org/ml/binutils/2012-01/msg00188.html](http://sourceware.org/ml/binutils/2012-01/msg00188.html)

我知道 C28x 编译器针对此问题的一个功能是将部分拆分为多个内存段：（使用 or 函数）

部分 { .text: { *(.text) } >> FLASH1| 闪存3}

此处描述：http: [//processors.wiki.ti.com/index.php/C28x_Compiler_-_Understanding_Linking](http://processors.wiki.ti.com/index.php/C28x_Compiler_-_Understanding_Linking)

我试过没有成功。目前我必须手动填充第一个内存区域。但这是一个难以搜索的代码部分，我以后不会更改，完全适合并填充第一个内存区域。

GNU 链接器中的此类功能是否已实现？或者有没有人有更好的想法我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T19:21:37.617

我认为最简单的方法（也许是唯一的方法）是将你的部分分成两个部分，然后将一个部分分配给第一个内存区域，将第二个部分分配给第二个内存区域。

您可能已经看过这个，但它是对链接脚本的非常简洁的描述：http: [//www.math.utah.edu/docs/info/ld_3.html](http://www.math.utah.edu/docs/info/ld_3.html)

# c# - CRM 2011 插件 (C#) - 遍历表单子网格中的记录

> ID：15156209
> 
> 赞同：2
> 
> 时间：2013-03-01T11:04:34.317
> 
> 标签：c#, plugins, dynamics-crm-2011

我需要编写一个插件来迭代表单子网格内的一堆记录。以前，该插件会检查单个查找并根据其持有的值执行一些基本功能。现在客户希望多条记录以 N:N 关系链接到该记录。我已经看到这可以在 JavaScript 中完成，但不幸的是这对我没有用。这可以在插件中完成吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:28:23.643

如果子网格内的记录与主实体记录链接，通过将其 GUID 作为父 ID，那么您可以使用 QueryExpression/QueryByAttribute 检索子网格中的所有记录，然后遍历它们...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T20:41:45.740

是的，这是可以做到的；并且某些方法比其他方法更容易。正如您所注意到的，1:N 关系很容易从子端通过 EntityReference 到父级进行管理。

在 N:N 关系中，您可以使用类似于本文（不是我的）关于[检索关系的文章中建议的方法来检索相关实体](http://mscrmkb.blogspot.com/2010/12/crm-2011-retrieve-related-entity-data.html)

另一种方法（取决于您使用 CrmSvcUtil 生成代码的方式）： `<entity>.GetRelatedEntities<<related entity type>>("<Relationship Name>", null);`

# nullpointerexception - 尝试在 Eclipse Juno 中使用 Android XML 编辑器打开 Android XML 文件时出现 NullpointerException

> ID：15156210
> 
> 赞同：1
> 
> 时间：2013-03-01T11:04:34.863
> 
> 标签：nullpointerexception, android-xml, eclipse-juno

我无法在 Android XML 编辑器中打开 xml 文件。我得到的错误信息是

```
An error has occurred. See error log for more details.
java.lang.NullPointerException 
```

在检查错误日志时：

```
eclipse.buildId=M20120914-1800
java.version=1.6.0_24
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=linux, ARCH=x86_64, WS=gtk, NL=en_US
Framework arguments: -product org.eclipse.epp.package.jee.product
Command-line arguments: -os linux -ws gtk -arch x86_64 -product org.eclipse.epp.package.jee.product -clean

Error
Fri Mar 01 16:05:25 IST 2013
Problems occurred when invoking code from plug-in: "org.eclipse.jface".

java.lang.NullPointerException
at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:3095)
at org.eclipse.ui.internal.WorkbenchPage.access$22(WorkbenchPage.java:3003)
at org.eclipse.ui.internal.WorkbenchPage$8.run(WorkbenchPage.java:2985)
at org.eclipse.swt.custom.BusyIndicator.showWhile(BusyIndicator.java:70)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2981)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2940)
at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2931)
at org.eclipse.ui.ide.IDE.openEditor(IDE.java:655)
at org.eclipse.ui.ide.IDE.openEditor(IDE.java:614)
at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:360)
at org.eclipse.jdt.internal.ui.javaeditor.EditorUtility.openInEditor(EditorUtility.java:167)
at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:249)
at org.eclipse.jdt.ui.actions.OpenAction.run(OpenAction.java:228)
at     org.eclipse.jdt.ui.actions.SelectionDispatchAction.dispatchRun(SelectionDispatchAction.java:275)
at org.eclipse.jdt.ui.actions.SelectionDispatchAction.run(SelectionDispatchAction.java:251)
at     org.eclipse.jdt.internal.ui.packageview.PackageExplorerActionGroup.handleOpen(PackageExplorerActionGroup.java:376)
at org.eclipse.jdt.internal.ui.packageview.PackageExplorerPart$4.open(PackageExplorerPart.java:538)
at org.eclipse.ui.OpenAndLinkWithEditorHelper$InternalListener.open(OpenAndLinkWithEditorHelper.java:48)
at org.eclipse.jface.viewers.StructuredViewer$2.run(StructuredViewer.java:866)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.ui.internal.JFaceUtil$1.run(JFaceUtil.java:49)
at org.eclipse.jface.util.SafeRunnable.run(SafeRunnable.java:175)
at org.eclipse.jface.viewers.StructuredViewer.fireOpen(StructuredViewer.java:864)
at org.eclipse.jface.viewers.StructuredViewer.handleOpen(StructuredViewer.java:1152)
at org.eclipse.jface.viewers.StructuredViewer$6.handleOpen(StructuredViewer.java:1256)
at org.eclipse.jface.util.OpenStrategy.fireOpenEvent(OpenStrategy.java:275)
at org.eclipse.jface.util.OpenStrategy.access$2(OpenStrategy.java:269)
at org.eclipse.jface.util.OpenStrategy$1.handleEvent(OpenStrategy.java:309)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1276)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3554)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3179)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine$9.run(PartRenderingEngine.java:1029)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.e4.ui.internal.workbench.swt.PartRenderingEngine.run(PartRenderingEngine.java:923)
at org.eclipse.e4.ui.internal.workbench.E4Workbench.createAndRunUI(E4Workbench.java:86)
at org.eclipse.ui.internal.Workbench$5.run(Workbench.java:588)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:543)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:124)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T08:21:56.670

通过重新安装 ADT 插件解决了这个问题。

# c# - foreach 条件中的列表框项

> ID：15156215
> 
> 赞同：0
> 
> 时间：2013-03-01T11:04:53.620
> 
> 标签：c#, winforms, listbox

我喜欢在 foreach 条件下获取当前项目的字符串。

```
 public void checkStock()
 {
    foreach (var listBoxItem in listBox1.Items)
    {
        if (Convert.ToInt32(GetStock(listBox1.Items.ToString())) == 0)
        {
            MessageBox.Show("Item not in stock  ");
        }
    }
 } 
```

这样我就可以显示没有库存的商品名称，例如“

```
MessageBox.Show("{0}" +"not in stock" , listbox.items.ToString()); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T11:09:04.297

```
 public void checkStock()
    {
        foreach (var listBoxItem in listBox1.Items)
        {
            // use the currently iterated list box item
            MessageBox.Show(string.Format("{0} is not in stock!",listBoxItem.ToString()));

        }
    } 
```

我不知道你应该如何检查它是否真的有库存 - 这基本上只是迭代集合，并打印出每个项目。您没有指定如何检查库存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:10:03.670

这也可以：

```
MessageBox.Show("{0} not in stock", listBoxItem.ToString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:11:10.477

使用带有 foreach 局部变量的[string.format](http://msdn.microsoft.com/en-us/library/system.string.format.aspx)`listBoxItem`方法，我猜应该使用它来检查项目是否也在 stok 中。

```
public void checkStock()
 {
    foreach (var listBoxItem in listBox1.Items)
    {
        if (Convert.ToInt32(GetStock(listBoxItem.ToString())) == 0)
        {
            MessageBox.Show(string.Format("{0} is not in stock!",listBoxItem.ToString()));
        }
    }
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T11:11:34.230

您可以在 if 子句中使用 listBoxItem 局部变量。

# jquery - 在 Backbonejs 视图的 render() 方法中应用 jQuery 样式

> ID：15156219
> 
> 赞同：1
> 
> 时间：2013-03-01T11:05:05.883
> 
> 标签：jquery, backbone.js

我有一个简单的对象层次结构（主干），例如：

```
var PersonView = Backbone.View.extend({ //child class
    tagName: 'li',

    template: _.template( $("#personTemplate").html() ), // RETURNS A FUNCTION!!!

    render: function(){
        this.$el.html( this.template( this.model.toJSON() ) );
        return this;
    }
});

var PeopleView = Backbone.View.extend({    //container class
    tagName: 'ul',

    render: function(){

        this.collection.each( function( person ){
            var personVar = new PersonView( {model : person} );
            this.$el.append( personVar.render().el );
            }, this);

            return this;
    }
}); 
```

这只是一个例子。`<li>`假设我想使用 jQuery 为每个元素（这代表一个人）应用红色。这个方法（例如：）`$('li').css('color', 'red')`必须在 PersonView 内的某个地方调用，所以当我在***PeopleView***内实例化它时，元素已经应用了该样式（***通过 jQuery***）。

同样，我很想知道这是否可以通过 jQuery（尤其是在子类内部调用的方法 - PersonView），而不是通过 CSS。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:57:11.347

主干视图总是引用其关联的 DOM 元素，[`View.el`](http://backbonejs.org/#View-el)：

> 所有视图始终都有一个 DOM 元素（*el*属性），无论它们是否已经插入到页面中。以这种方式，可以随时呈现视图[...]

通过扩展，`View.$el`始终指向正确的 jQuery 元素，因此您可以在 PersonView 渲染中应用任何 jQuery 函数：

```
var PersonView = Backbone.View.extend({
    tagName: 'li',

    template: _.template( $("#personTemplate").html() ),

    render: function(){
        this.$el.html( this.template( this.model.toJSON() ) );
        this.$el.css('color', 'red');
        return this;
    }
}); 
```

请参阅此 Fiddle 以获取演示[http://jsfiddle.net/nikoshr/64QWX/](http://jsfiddle.net/nikoshr/64QWX/)

# asp.net-mvc - EF 不会检测到更改

> ID：15156227
> 
> 赞同：3
> 
> 时间：2013-03-01T11:05:38.993
> 
> 标签：asp.net-mvc, entity-framework

我正在使用通用存储库和工作单元，不知道为什么它不会检测到我对数据库所做的更改。

```
public abstract class Repository<T> : IRepository<T>
    where T : class, IAuditEntity
{
    protected IObjectSet<T> _objectSet;

    public Repository(ObjectContext context)
    {
        _objectSet = context.CreateObjectSet<T>();
    }

    #region IRepository<T> Members

    public abstract T GetById(object id);

    public IEnumerable<T> GetAll()
    {
        return _objectSet.Where(e => !e.IsDeleted).OrderByDescending(o => o.ModifiedOn);
    }

    public IEnumerable<T> Query(Expression<Func<T, bool>> filter)
    {
        return _objectSet.Where(filter);
    }

    public void Add(T entity)
    {
        _objectSet.AddObject(entity);
    }

    public void Update(T entity)
    {
       //some code here; not working
       //What do I need to put here?
    }

    public void Remove(T entity)
    {
        _objectSet.DeleteObject(entity);
    }
} 
```

控制器：

```
[HttpPost]
    public ActionResult Edit(Student stud)
    {
        if (ModelState.IsValid)
        {
            _unitOfWork.Students.Update(stud);
            _unitOfWork.Commit();
            return RedirectToAction("Index");
        }
        return View(stud);
    } 
```

之前，我尝试使用以下方法更新我的记录：

```
[HttpPost]
    public ActionResult Edit(Student stud)
    {
        if (ModelState.IsValid)
        {
            var i = _unitOfWork.Students.GetById(stud.StudentID);
            TryUpdateModel(i);
            _unitOfWork.Commit();
            return RedirectToAction("Index");
        }
        return View(stud);
    } 
```

当然可以，但我确信这不是正确的方法。只是想问我需要什么才能使我的存储库上的 Update 方法工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:13:58.260

您需要保留对存储库中上下文的引用并使用它：

```
public void Update(T entity)
{
   _objectSet.Attach(entity);
   _context.ObjectStateManager.ChangeObjectState(entity, EntityState.Modified);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:17:58.297

发生这种情况是因为当 Student 对象被回发到控制器时，由于 HTTP 的无状态特性，它不再附加到实体框架上下文。

您从数据库获取记录并对其进行修改的第二种方法很好，但显然涉及到数据库的额外往返。

I normally use Dbcontext rather than ObjectContext which I belive is essentially a wrapper around ObjectContext with some extra functionality. I'm not sure if this helps or not but if you were to use DbContext you would be able to do this....

```
dbContext.Entry(stud).State = EntityState.Modified;
dbContext.SaveChanges(); 
```

The same can be achieved through the ObjectContext by calling AttachTo to re-attach the returned Student back to the context and then set it's state to modified before you call SaveChanges.

# java - 使用 SWT 浏览器小部件打印

> ID：15156231
> 
> 赞同：2
> 
> 时间：2013-03-01T11:06:00.323
> 
> 标签：java, eclipse, browser, swt, rcp

我想打印 SWT Browser Widget 的内容。但它打印浏览器的唯一可见部分，而不是它的全部内容。

请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T14:14:04.397

我已将 SWT 浏览器片段修改为选定的代码，它对我来说就像一个魅力..

```
import org.eclipse.swt.*;
import org.eclipse.swt.layout.*;
import org.eclipse.swt.widgets.*;
import org.eclipse.swt.browser.*;

public class BrowserPrintTest {
    public static void main(String [] args) {
        Display display = new Display();
        final Shell shell = new Shell(display);
        GridLayout gridLayout = new GridLayout();
        gridLayout.numColumns = 3;
        shell.setLayout(gridLayout);
        ToolBar toolbar = new ToolBar(shell, SWT.NONE);
        ToolItem itemPrint = new ToolItem(toolbar, SWT.PUSH);
        itemPrint.setText("Print");

        GridData data = new GridData();
        data.horizontalSpan = 3;
        toolbar.setLayoutData(data);

        Label labelAddress = new Label(shell, SWT.NONE);
        labelAddress.setText("Address");

        final Text location = new Text(shell, SWT.BORDER);
        data = new GridData();
        data.horizontalAlignment = GridData.FILL;
        data.horizontalSpan = 2;
        data.grabExcessHorizontalSpace = true;
        location.setLayoutData(data);

        final Browser browser;
        try {
            browser = new Browser(shell, SWT.NONE);
        } catch (SWTError e) {
            System.out.println("Could not instantiate Browser: " + e.getMessage());
            display.dispose();
            return;
        }
        data = new GridData();
        data.horizontalAlignment = GridData.FILL;
        data.verticalAlignment = GridData.FILL;
        data.horizontalSpan = 3;
        data.grabExcessHorizontalSpace = true;
        data.grabExcessVerticalSpace = true;
        browser.setLayoutData(data);

        final Label status = new Label(shell, SWT.NONE);
        data = new GridData(GridData.FILL_HORIZONTAL);
        data.horizontalSpan = 2;
        status.setLayoutData(data);

        final ProgressBar progressBar = new ProgressBar(shell, SWT.NONE);
        data = new GridData();
        data.horizontalAlignment = GridData.END;
        progressBar.setLayoutData(data);

        /* event handling */
        Listener listener = new Listener() {
            public void handleEvent(Event event) {
                ToolItem item = (ToolItem)event.widget;
                String string = item.getText();
                if (string.equals("Print")) browser.execute("javascript:window.print();");
           }
        };
        browser.addProgressListener(new ProgressListener() {
            public void changed(ProgressEvent event) {
                    if (event.total == 0) return;                            
                    int ratio = event.current * 100 / event.total;
                    progressBar.setSelection(ratio);
            }
            public void completed(ProgressEvent event) {
                progressBar.setSelection(0);
            }
        });
        browser.addStatusTextListener(new StatusTextListener() {
            public void changed(StatusTextEvent event) {
                status.setText(event.text); 
            }
        });
        browser.addLocationListener(new LocationListener() {
            public void changed(LocationEvent event) {
                if (event.top) location.setText(event.location);
            }
            public void changing(LocationEvent event) {
            }
        });
        itemPrint.addListener(SWT.Selection, listener);
        location.addListener(SWT.DefaultSelection, new Listener() {
            public void handleEvent(Event e) {
                browser.setUrl(location.getText());
            }
        });

        shell.open();
        browser.setUrl("http://eclipse.org");

        while (!shell.isDisposed()) {
            if (!display.readAndDispatch())
                display.sleep();
        }
        display.dispose();
    }
} 
```

您的浏览器大小合适吗？如果您没有看到长页面的滚动条，则您的浏览器组件区域已被修剪，然后您可能会在打印后仅获得可见区域..

# java - 在 Ui binder (xml) 中调用我的静态 java 方法（并传递参数）的可能性

> ID：15156232
> 
> 赞同：0
> 
> 时间：2013-03-01T11:06:01.797
> 
> 标签：java, gwt, uibinder, gwt2

有没有办法将参数传递给java方法？在`Ui binder` 我导入的类中，如下所示

```
<ui:with type="com..myproject.MyUtil" field="util"/> 
```

我正在调用一个普通的静态方法，比如

```
<g:Label text="{util.getEditInfoString}" ui:field="editInfo" /> 
```

`getEditInfoString`我在() 方法中编写了我的业务逻辑`returns string`，这就像一个魅力。

现在我有一个要求，需要从我的文件`argument(string)`中传递一个。`method``binder`

这样做的方法是什么？任何提示？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:58:56.467

不支持参数传递。只能调用不带参数的方法

参考[FieldReferenceConverter](http://google-web-toolkit.googlecode.com/svn/javadoc/2.1/com/google/gwt/uibinder/attributeparsers/FieldReferenceConverter.html)

**[gwt uibinder ui:with - 使用参数调用方法](https://stackoverflow.com/questions/8937269/gwt-uibinder-uiwith-calling-methods-with-arguments)**

# jsf-2 - p:carousel（标签滑块）问题

> ID：15156235
> 
> 赞同：3
> 
> 时间：2013-03-01T11:06:20.523
> 
> 标签：jsf-2, primefaces

我在实施[展示](http://www.primefaces.org/showcase/ui/carouselTabs.jsf)网站中显示的 Carousel - Tab Slider 示例时遇到问题。

这是我的 xhtml 代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    template="/WEB-INF/templates/test.xhtml"    
    xmlns:p="http://primefaces.org/ui">
    <ui:define name="content">
    #{msg['app.menu.home']}
    <br /><br />
<h:form id="demo">
    <p:carousel id="tabsCarousel" numVisible="1" itemStyle="height:200px;width:600px;" effect="easeInStrong">  
        <p:tab title="Godfather Part I">  
            <h:panelGrid columns="2" cellpadding="10">  
                <p:graphicImage value="/pages/img/godfather1.jpg" />  
                <h:outputText  
                    value="The story begins as Don Vito Corleone, the head of a New York Mafia family, oversees his daughter's wedding.   
                    His beloved son Michael has just come home from the war, but does not intend to become part of his father's business. T  
                    hrough Michael's life the nature of the family business becomes clear. The business of the family is just like the head of the family, kind and benevolent to those who give respect,   
                    but given to ruthless violence whenever anything stands against the good of the family." />  
            </h:panelGrid>  
        </p:tab>  
        <p:tab title="Godfather Part II">  
            <h:panelGrid columns="2" cellpadding="10">  
                <p:graphicImage value="/pages/img/godfather2.jpg" />  
                <h:outputText value="Francis Ford Coppola's legendary continuation and sequel to his landmark 1972 film, The_Godfather, parallels the young Vito Corleone's rise with his son Michael's spiritual fall, deepening The_Godfather's depiction of the dark side of the American dream.   
                In the early 1900s, the child Vito flees his Sicilian village for America after the local Mafia kills his family. Vito struggles to make a living, legally or illegally, for his wife and growing brood in Little Italy,   
                killing the local Black Hand Fanucci after he demands his customary cut of the tyro's business. With Fanucci gone, Vito's communal stature grows."/>  
            </h:panelGrid>  
        </p:tab>  
        <p:tab title="Godfather Part III">  
            <h:panelGrid columns="2" cellpadding="10">  
                <p:graphicImage value="/pages/img/godfather3.jpg" />  
                <h:outputText value="After a break of more than 15 years, director Francis Ford Coppola and writer Mario Puzo returned to the well for this third and final story of the fictional Corleone crime family.   
                    Two decades have passed, and crime kingpin Michael Corleone, now divorced from his wife Kay has nearly succeeded in keeping his promise that his family would one day be completely legitimate." />  
            </h:panelGrid>  
        </p:tab>  
    </p:carousel>
</h:form>   
    </ui:define>

</ui:composition> 
```

以下是它在浏览器上的呈现方式：http: [//i1298.photobucket.com/albums/ag48/franco_prieto/carousel_zps867d9fd4.png](http://i1298.photobucket.com/albums/ag48/franco_prieto/carousel_zps867d9fd4.png)

我正在使用：jboss-6.1.0.Final、primefaces-3.4.1.jar、primefaces-extensions-0.6.1.jar、cupertino-1.0.8.jar Firefox 19.0

哦，还有一件事，我正在使用其他几个 primefaces 组件，除了这个之外它们都工作得很好。

任何人都可以帮我一把吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:52:46.743

好的，我得到它的工作！

刚刚将 primefaces-3.4.1.jar 更新为 primefaces-3.5.jar 就成功了！

谢谢！

# windows - 有什么方法可以在 Windows 的后台启动进程，而将服务选项分开

> ID：15156242
> 
> 赞同：0
> 
> 时间：2013-03-01T11:06:46.753
> 
> 标签：windows, service, process

我知道一种设置程序的方法，该程序可以在重新启动窗口时通过在注册表中创建该进程的条目来启动：

```
HKEY_CURRENT_USER\SOFTWARE\Microsoft\Windows\CurrentVersion\Run 
```

但是任何人都可以告诉是否有任何方法可以使该过程在后台运行。由于我遇到的凭据问题，我没有考虑服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:13:37.473

Windows 中没有后台进程的正式概念。我猜你的意思是你不希望这个过程显示一个 GUI。您可以通过以下方式实现：

*   使进程以 GUI 子系统而不是控制台子系统为目标。以控制台子系统为目标的进程在启动时会自动获得一个控制台窗口。
*   不创建可见窗口。

如果您希望进程以较低的优先级运行，那么您可以通过调用来实现，`SetPriorityClass`但如果您需要这样做，我会感到惊讶。

# javascript - 如何在 jQuery 中选择 HTML5 数据属性？

> ID：15156250
> 
> 赞同：0
> 
> 时间：2013-03-01T11:07:13.277
> 
> 标签：javascript, jquery, html, select, attributes

我当前的 jQuery 选择 value 属性。如何更改我的 jQuery 以选择数据属性“data-price”？

```
$('#trapfabric, #trapsize').on('change', function() {
  var $selected = $('#trapfabric, #trapsize').children(":selected");
  sum = parseInt($('#trapsize').val()) + parseInt($('#trapfabric').val());
  $('#priceToSwap3').html('$' + sum
    );
}); 
```

我知道我必须在上面安装这样的东西，但我无法让它工作：

```
$('#priceToSwap3').text($selected.data("price")) 
```

已编辑

我的 HTML：

```
<span id="priceToSwap3"">$238</span>

<select id="trapsize" onChange="swapImage()">
 <option data-price="238">foo</option>
 <option data-price="288">foo</option>
</select>

<select id="trapfabric" onChange="swapImage()">
 <option data-price="0">foo</option>
 <option data-price="20">foo</option>
</select> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:13:57.800

如果要获取需要使用的元素`#trapsize`，则将事件绑定到两个元素；`#trapfabric``source``$(this)`

[jsfiddle](http://jsfiddle.net/lollero/pGZuW/)

```
$('#trapfabric, #trapsize').on('change', function() {    
    $('#priceToSwap3').text( '$' + $(':selected', this).data("price") );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:04:06.607

我相信这就是你想要的：

```
var $elements = $('#trapfabric, #trapsize');
$elements.on('change', function() {
     var $selected = $elements.children(":selected");
     var sum = 0;

     $selected.each(function() {
         sum += $(this).data('price');
     });

     $('#priceToSwap3').html('$' + sum);
}); 
```

您必须遍历所选元素以获取`price`每个元素的数据。

[**演示**](http://jsfiddle.net/uHddF/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-14T05:43:21.233

我们有一个类似的场景，我们为每个输入分配安全值（1,2,3 作为安全级别）。当用户登录系统时，我们必须更改安全值“0”。

例如：

```
<input type="text" security="3" id="super-admin" />
<input type="text" security="2" id="main-admin" />
<input type="text" security="1" id="normal-user" />

<script>
function userValidation(userType){

if(userType="super-admin"){
   $("[security=1]").attr("security", 0);
   $("[security=2]").attr("security", 0);
   $("[security=3]").attr("security", 0);
 }
if(userType="main-admin"){
  $("[security=1]").attr("security", 0);
  $("[security=2]").attr("security", 0);
 }
 if(userType="normal-user"){
   $("[security=1]").attr("security", 0);
 }
}
<script> 
```

# memory-leaks - UIPageViewController 内存泄漏

> ID：15156254
> 
> 赞同：9
> 
> 时间：2013-03-01T11:07:26.657
> 
> 标签：memory-leaks, uipageviewcontroller

似乎 UIPageViewController 永远持有初始内容视图控制器。例如：

```
DataViewController *startingViewController = [self.modelController viewControllerAtIndex:0 storyboard:self.storyboard];
NSArray *viewControllers = @[startingViewController];
[self.pageViewController setViewControllers:viewControllers direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:NULL];
self.pageViewController.dataSource = self.modelController; 
```

在pageViewController 本身释放之前，startingViewController 永远不会被释放**。**

要重现此错误，只需使用基于页面的应用程序模板在 XCode 中创建一个新项目。并在 DataViewController.m 中添加 3 行代码

```
@property NSInteger debugIndex; // file scope
NSLog(@"DataViewController[%d] created", self.debugIndex); // in viewDidLoad
NSLog(@"DataViewController[%d] dealloc", self.debugIndex); // in dealloc 
```

当您在垂直方向滚动演示应用程序时，您将获得如下日志：

```
DataViewController[0] created  
DataViewController[1] created  
DataViewController[2] created  
DataViewController[1] dealloc  
DataViewController[3] created  
DataViewController[2] dealloc  
DataViewController[4] created  
DataViewController[3] dealloc  
DataViewController[5] created  
DataViewController[4] dealloc  
DataViewController[6] created  
DataViewController[5] dealloc 
```

**DataViewController[0]**永远不会被释放。

有什么想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-06T19:47:49.590

你在使用transitionStyle UIPageViewControllerTransitionStyleScroll吗？我遇到了相同或类似的问题，在使用页面卷曲动画时似乎消失了。

这个问题对我来说更加复杂，因为我允许 UISliderBar 设置内容中的位置。因此，在更改 UISliderBar 时，我正在调用 setViewControllers:direction:animated:completion: 这导致越来越多的视图控制器引用“卡在”我的 UIPageViewController 中。

我也在使用ARC。我还没有找到一种可接受的方法来强制 UIPageViewController 放弃额外的视图控制器引用。我可能最终会使用页面卷曲转换或使用启用分页的 UIScrollView 实现我自己的 UIPageViewController 等效项，这样我就可以管理我自己的视图控制器缓存，而不是依赖于 UIPageViewController 损坏的视图控制器管理。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-23T09:35:28.427

我不确定您是否仍然遇到问题，但我遇到了同样的问题并且我找到了解决方案。

我不知道原因，但它有效。

我在之后`addSubview`而不是之前设置了第一个 viewController `addChlidViewController`。

```
-(void)settingPageViewController{
if (!self.pageViewController) {
    self.pageViewController = [[UIPageViewController alloc]initWithTransitionStyle:UIPageViewControllerTransitionStyleScroll navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options:nil];
    self.pageViewController.delegate = self;
    self.pageViewController.dataSource = self;
    [self addChildViewController:self.pageViewController];
    [self.pageViewController didMoveToParentViewController:self];
    [self.containerView addSubview:self.pageViewController.view];
    [self.pageViewController setViewControllers:@[[self viewcontrollerAtIndex:0]] direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil];
}    
} 
```

并且第一个 viewController 将在正确的时间释放。

另外，我发现如果打电话

```
 [self.pageViewController setViewControllers:@[[self viewcontrollerAtIndex:0]] direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:^(BOOL finished){
        NSLog(@"finished : %d",finished);
    }]; 
```

before`addSubView`并且完成块不会调用。

我认为这个块是第一个 viewController 没有释放的原因。

我去看看为什么没有回调，完善答案~

干杯

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-26T13:19:56.770

经过几次尝试弄清楚在类似问题上发生了什么之后，我注意到在我的项目中，有两个原因导致了保留问题，并导致 UIPageViewController 被永久保留。

1）在 UIPageViewController 和 UIViewcontroller 之间存在循环引用（通过在两个类中将属性从强更改为弱来修复）

2) 主要修复包括改变

```
[self setViewControllers:@[initialDetailsViewController] direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:nil]; 
```

至

```
__weak __typeof__(self) weakSelf = self;
    [weakSelf setViewControllers:@[initialDetailsViewController] direction:UIPageViewControllerNavigationDirectionForward animated:YES completion:nil]; 
```

我希望这可以帮助别人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-10T13:33:32.937

同样的问题我通过将我的初始视图控制器保留在变量中来解决它，而不是在特定的 pageIndex 上创建相同的 vc 我只是重用它

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-06-07T08:28:11.603

我有同样的问题并解决了以下问题：

`[startingViewController release];`初始化的终点在哪里。

然后第一个 ViewController 将被释放。

# java - 执行我的数据库查询时 JTable 不刷新

> ID：15156255
> 
> 赞同：0
> 
> 时间：2013-03-01T11:07:27.127
> 
> 标签：java, swing, jdbc, jtable, refresh

这是一个 JDBC 项目。`MySQL`WAMP 服务器上数据库中的数据以`JTable`. 我想要一个用户输入`JSpinner`的 ID 从表中删除具有该 ID 的行。我做了一个 SQL 查询，一切正常，但是`JTable`执行查询时我的数据不会刷新。我单击我的`JNazad`按钮（我的后退按钮），然后重新进入该窗口，以便我`JTable`显示刷新的数据。我没有`FireTableModel`在我的`NapraviTablicu`方法中实现，因为它的`DefaultTableModel`, 和更新是用它自动完成的。我不知道我做错了什么：

```
public class GUIBDelete extends JFrame{

    private SpinnerModel SM;
    private JSpinner Spinner;
    private JLabel LUnos;
    private JButton BNazad, BIzvrsi;
    private String ID, SqlQuery;
    private Vector NaziviKolona = new Vector();
    private Vector Podaci = new Vector();
    private JTable Tablica=new JTable();
    private JScrollPane ScrollPane;
    private DefaultTableModel model;

    private JTable NapraviTablicu(){
        try {
            String SqlQuery = "SELECT * FROM `nfc_baza`";
            Podaci.clear();
            NaziviKolona.clear();
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://"
                    + "localhost:3306/nfc", "root", "");

            Statement Stat = con.createStatement();
            ResultSet Rez = Stat.executeQuery(SqlQuery);
            ResultSetMetaData md = Rez.getMetaData();
            int columns = md.getColumnCount();
            for (int i = 1; i <= columns; i++) {
                NaziviKolona.addElement(md.getColumnName(i));
            }
            while (Rez.next()) {
                Vector red = new Vector(columns);
                for (int i = 1; i <= columns; i++) {
                    red.addElement(Rez.getObject(i));
                }
                Podaci.addElement(red);
            }
            Rez.close();
            Stat.close();
            con.close();
        } catch (Exception e) {
            System.out.println(e);
        }
        model = new DefaultTableModel(Podaci, NaziviKolona);
        JTable table = new JTable(model);

        return table;

    }

    ActionListener a1 = new ActionListener() {
        public void actionPerformed(ActionEvent a) {
            dispose();
            new GUIIzbornik();
        }
    };

    ActionListener a2 = new ActionListener() {
        public void actionPerformed(ActionEvent a) {
            ID=null;
            SqlQuery = "DELETE FROM `nfc`.`nfc_baza` WHERE `nfc_baza`.`ID` = ";
            IzvrsiQuery();
        }

        private void IzvrsiQuery() {
            Object sp = Spinner.getValue();
            ID = sp.toString();
            SqlQuery=SqlQuery+ID;
            try {
                Class.forName("com.mysql.jdbc.Driver");
                Connection con2 = DriverManager.getConnection(
                        "jdbc:mysql://" + "localhost:3306/nfc", "root", "");
                Statement Stat = con2.createStatement();
                int Rez = Stat.executeUpdate(SqlQuery);
                Stat.close();
                con2.close();
                JOptionPane.showMessageDialog(null, "Uspješno izvrseno!",
                        "Poruka!", JOptionPane.INFORMATION_MESSAGE);

            } catch (Exception e) {
                System.out.println(e);
            }

        }
    };

    GUIBDelete(){
        setLayout(new GridBagLayout());
        GridBagConstraints c = new GridBagConstraints();

        Tablica=NapraviTablicu();
        ScrollPane = new JScrollPane(Tablica);
        c.fill = GridBagConstraints.BOTH;
        c.insets = new Insets(2, 2, 2, 2);
        c.weightx = 0.1;
        c.weighty = 0.1;
        c.gridwidth = 4;
        c.gridheight = 2;
        c.gridx = 0;
        c.gridy = 0;
        add(ScrollPane, c);

        LUnos= new JLabel("<html><br>Unesite ID elementa</br> kojeg želite obrisati:<html>");
        c.gridx = 0;
        c.gridy = 2;
        c.gridwidth = 1;
        c.gridheight = 1;
        add(LUnos, c);

        SM = new SpinnerNumberModel(1, 1, 1000, 1);
        Spinner = new JSpinner(SM);
        c.gridx = 2;
        c.gridy = 2;
        c.gridwidth = 2;
        add(Spinner, c);

        BNazad = new JButton("Nazad");
        c.gridx = 0;
        c.gridy = 3;
        c.gridwidth = 1;
        BNazad.addActionListener(a1);
        add(BNazad, c);

        BIzvrsi = new JButton("Izvrši");
        c.gridx = 2;
        c.gridy = 3;
        BIzvrsi.addActionListener(a2);
        add(BIzvrsi, c);

        setSize(400, 500);
        setTitle("Brisanje podataka");
        setVisible(true);
        setLocationRelativeTo(null);

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                GUIBDelete i = new GUIBDelete();
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T16:23:22.650

看起来您正在从数据库表中删除一行，并且您希望`JTable`反映更改。在`izvrsiQuery()`更新你`TableModel`和`JTable`将更新自己。例如，

```
...
con2.close();
model.removeRow(((Number)(spinner.getValue())).intValue() - 1);
JOptionPane.showMessageDialog(...);
... 
```

请注意，行号从 开始`0`，并且在使用 时必须进行翻译`RowSorter`。

顺便说一句，如果您使用常见的 Java 命名约定并排除常量，您的代码将更容易被其他人阅读。

附录：该示例只是按数字删除了一行。您必须搜索`TableModel`与已删除的行对应的行`ID`。

附录：虽然不太实用，但您可能希望在使用 DML 操作后从数据库中刷新整个表，如此[处](https://stackoverflow.com/a/8260663/230513)`setModel()`所示。

# excel - 根据单元格数据隐藏行

> ID：15156256
> 
> 赞同：0
> 
> 时间：2013-03-01T11:07:44.747
> 
> 标签：excel, vba

如果 A 列中的单元格包含 0，我想隐藏工作表中的某些行。这是使用公式计算的。

例如，如果 A1 包含值“0”，则第 1 行应该被隐藏。

我知道我可以在工作表的激活事件上编写此代码，但它会降低文件的性能。

有没有一种在不影响文件性能的情况下实现相同目标的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:13:28.883

你总是可以`filter`用来实现这一点。我认为这样会更有效率。

**编辑：** 为了提高代码的性能，您可以执行以下操作：

1.  关闭事件
2.  关闭计算

在运行循环以隐藏行之前

```
With Excel.Application
    .ScreenUpdating = False
    .EnableEvents = False
    .Calculation = xlCalculationManual
    .Cursor = xlWait
End With 
```

循环结束后

```
With Excel.Application
    .ScreenUpdating = True
    .EnableEvents = True
    .Calculation = xlCalculationAutomatic
    .Cursor = xlDefault
End With 
```

希望这可以帮助。同样明确地使用变量可以提高性能和计算。尽管明确声明您的变量也应该有所帮助。

# xml - XSL：跟随和前置不起作用（Kayessian 方法）

> ID：15156261
> 
> 赞同：1
> 
> 时间：2013-03-01T11:08:03.060
> 
> 标签：xml, xslt, xpath, xslt-1.0

我无法使前面的（或前面的兄弟）和后面的（或后面的兄弟）正常工作：

我有以下xml：

```
<doc xmlns:lxslt="http://xml.apache.org/xslt" xml:lang="it">
    <articolo id="U50779749147XPB">
        <testatina id="U50779749147xtG">
            <ln>in breve</ln>
        </testatina>
        <breve id="U50779749147yAC">
            <h1>melegnano</h1>
            <h2>Si ribalta</h2>
            <h2>con l’auto</h2>
            <h2>alla rotonda</h2>
            <p>
                <span class="rettangolo">n</span>
                Sempre caro mi fu quest'ermo colle, e questa siepe, che da tanta
                parte dell'ultimo orizzonte il guardo esclude. Ma sedendo e mirando,
            </p>
            <p class="rimando">
                segue a pagina
                <span class="pagina">5</span>
            </p>
            <h1>castelnuovo</h1>
            <h2>Protesta</h2>
            <h2>delle mamme</h2>
            <h2>per la scuola</h2>
            <p>
                <span class="rettangolo">n</span>
                Sempre caro mi fu quest'ermo colle, e questa siepe, che da tanta
                parte dell'ultimo orizzonte il guardo esclude. Ma sedendo e mirando
        </p>
            <p class="rimando">
                segue a pagina
                <span class="pagina">8</span>
            </p>
            <h1>salerano</h1>
            <h2>sull’incendio: </h2>
            <h2>«non ci sono </h2>
            <h2>misteri»</h2>
            <p>
                <span class="rettangolo">n</span>
                Sete il guardo esclude. Ma sedendo e mirando, interminati spazi di
            </p>
            <p class="rimando">
                segue a pagina
                <span class="pagina">6</span>
            </p>
        </breve>
    </articolo>
</doc> 
```

我需要选择第二个和第三个 h1 之间的所有节点和内容：所以基本上：

```
 <h2>Protesta</h2>
            <h2>delle mamme</h2>
            <h2>per la scuola</h2>
            <p>
                <span class="rettangolo">n</span>
                Sempre caro mi fu quest'ermo colle, e questa siepe, che da tanta
                parte dell'ultimo orizzonte il guardo esclude. Ma sedendo e mirando
            </p>
            <p class="rimando">
                segue a pagina
                <span class="pagina">8</span>
            </p> 
```

我尝试了所有方法，但以下和前面没有按预期工作：我试过了

```
 <xsl:variable name="set" select="/doc/articolo/breve/h1[2]/following::node()[count(.|/doc/articolo/breve/h1[3]/preceding::node())=count(/doc/articolo/breve/h1[3]/preceding::node())]"/> 
```

但结果只是第一个 h2: "Protesta" 它跳过了所有左边的 h2 和 p

所以我试图检查运算符后面和前面的单个结果，但只返回一些元素而不是我的节点之前或之后的所有内容：例如：

```
 <xsl:variable name="vtextPostM" select="following-sibling::doc/articolo/breve/h1[2]"/>
             <xsl:variable name="vtextPreN" select="preceding-sibling::doc/articolo/breve/h1[3]"/> 
```

没有返回任何元素，这个

```
<xsl:variable name="vtextPostM" select="/doc/articolo[1]/breve/h1[2]/following-sibling::node()"/>
             <xsl:variable name="vtextPreN" select="/doc/articolo[1]/breve/h1[3]/preceding-sibling::node()"/> 
```

这 ir 返回部分错误集：以下打印 Protesta（而不是所有其他后续节点）和前面的 Melegnano（是 h1[1]，但中间的所有节点呢）。我做了很多其他测试，但没有，你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:51:47.970

这又是对 XSLT2.0 和 来说微不足道的事情之一`<xsl:for-each-group>`，但由于看起来您正在使用 XSLT1.0，所以这里有一个选项：

### 样式表

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0" xmlns:lxslt="http://xml.apache.org/xslt">
  <xsl:output method="xml" encoding="UTF-8" indent="yes"/>

  <xsl:template match="/">
    <xsl:apply-templates select="doc/articolo/breve"/>
  </xsl:template>

  <xsl:template match="breve">
    <xsl:copy>
      <xsl:apply-templates select="h1[2]"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="h1">
    <!--
    Apply following siblings whose first preceding <h1> sibling is the <h1>
    element currently being processed
    -->
    <xsl:apply-templates
      select="following-sibling::*[not(self::h1)][preceding-sibling::h1[1]
        [generate-id() = generate-id(current())]]"/>
  </xsl:template>
</xsl:stylesheet> 
```

### 输出

```
<?xml version="1.0" encoding="UTF-8"?>
<breve>
  <h2>Protesta</h2>
  <h2>delle mamme</h2>
  <h2>per la scuola</h2>
  <p><span class="rettangolo">n</span>
                Sempre caro mi fu quest'ermo colle, e questa siepe, che da tanta
                parte dell'ultimo orizzonte il guardo esclude. Ma sedendo e mirando
        </p>
  <p class="rimando">
                segue a pagina
                <span class="pagina">8</span>
            </p>
</breve> 
```

# python - Python：如何垃圾收集字符串

> ID：15156264
> 
> 赞同：2
> 
> 时间：2013-03-01T11:08:14.347
> 
> 标签：python, string, garbage-collection

我在大型运行时脚本中遇到问题。该脚本是一个多线程环境，用于执行爬取任务。

在大型执行中，脚本的内存消耗变得巨大，在使用 guppy hpy 分析内存后，我发现大部分问题都来自字符串。

我没有存储这么多的字符串：只需将 html 的内容放入内存，然后将它们存储在 db 中。在它之后，不再使用字符串（包含它的变量被分配给下一个字符串）。

出现问题是因为我看到每个新字符串（使用 sys.getrefcount）至少有 2 个引用（1 个来自我的 var，1 个来自内部）。似乎将另一个值重新分配给我的 var 并不会删除内部引用，因此字符串仍保留在内存中。

我能做些什么来确保字符串被垃圾收集？

先感谢您

编辑：

1-我正在使用 Django ORM

2-我从 2 个来源获得所有这些字符串：

2.1- 直接来自套接字 (urllib2.urlopen(url).read())

2.2- 解析响应，并从每个 html 和馈送系统中提取新的 URI

解决了

终于，我拿到了钥匙。该脚本是 Django 环境的一部分，似乎 Django 的地下正在做一些缓存或类似的事情。我关闭了调试，一切都开始按预期工作（重用的标识符似乎删除了对旧对象的引用，并且这些对象被 gc 收集）。

对于在 python 上使用某种框架层的任何人，请注意配置：似乎一些具有密集过程的调试配置会导致内存泄漏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:37:19.850

你说：
*我看到每个新字符串（使用 sys.getrefcount）至少有 2 个引用*

但是你有仔细阅读过的描述`getrefcount()`吗？：

> sys.getrefcount()
> 
> object) 返回对象的引用计数。返回的计数通常比您预期的高一，因为它包含（临时）引用作为 getrefcount() 的参数。

.

你应该更多地解释你的程序。

它包含的 HTML 字符串的大小是多少？
它们是如何获得的？你确定要关闭所有文件的处理程序，所有的套接字连接，......？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:14:57.740

您需要找出谁保留了对您的字符串的“内部”引用。也许是您用来写入 DB 的库（您没有指定写入 DB 的方式）。我发现 objgraph 对于这样的任务非常有用：[https ://pypi.python.org/pypi/objgraph](https://pypi.python.org/pypi/objgraph)

例如

```
import objgraph
objgraph.show_backrefs([mystring], filename='a.png') 
```

# c++ - C/C++ 中浮点常量的紧凑无损表示

> ID：15156266
> 
> 赞同：5
> 
> 时间：2013-03-01T11:08:22.277
> 
> 标签：c++, c, hex, code-generation, lossless

我有一个用 C++ 编写的程序，它为数学计算生成 C 源代码。我注意到常量在生成的代码中占用了很多空间，并且正在寻找更紧凑的表示形式。

为了生成常量，我现在使用：

```
double v = ...
cfile << std::scientific << std::setprecision(std::numeric_limits<double>::digits10 + 1) << v; 
```

我很确定这是一种无损表示，但它也非常臃肿。例如，零和一将表示为 0.00000000000000000e+00 和 1.0000000000000000e+00。和“0”。或“1”。携带同样多的信息。

有没有办法以更紧凑但仍无损的方式将常量打印到文件中？对于人类读者来说，它不需要看起来很好，只需在以纯 C 代码存在时进行编译（如果是 C99，我希望它也是有效的 C++）。如果它是可移植的，十六进制可能没问题。

`std::fixed`编辑：在代码片段中删除。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T11:41:22.273

您可以使用十六进制浮点（[C 中 printf() 的格式说明符 %a](https://stackoverflow.com/questions/4826842/the-format-specifier-a-for-printf-in-c)）；它被定义为保留所有精度位（C11，7.21.6.1p8，`a,A`说明符）。

```
cfile << std::hexfloat << v; 
```

如果您的编译器/标准库不支持`hexfloat`，您可以使用 C99 `%a`printf 说明符（这是等效的，如 C++11 表 88 中的第 22.4.2.2.2 节中所指定）：

```
printf("%a", v); 
```

例如，以下程序是有效的 C99：

```
#include <stdio.h>
int main() {
   double v = 0x1.8p+1;
   printf("%a\n", v);
} 
```

您生成的源文件将不是有效的 C++11，因为荒谬的是 C++11 不支持十六进制浮点文字。然而，许多 C++11 编译器支持 C99 十六进制浮点文字作为扩展。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T11:18:44.250

这不是表示、语言或标准库的问题，而是算法的问题。如果您有代码生成器，那么...为什么不**将生成的代码更改**为最佳（= 要求精度最短）表示？这就是你手工编写代码时所做的事情。

在假设的`put_constant(double value)`例程中，您可以**检查您必须编写的值是什么**：

*   是整数吗？不要用`std::fixed`and使代码膨胀`set_precision`，只需转换为整数并添加一个点。
*   尝试使用默认设置将其转换为字符串，然后将其转换回`double`，如果没有任何更改，则默认（短）表示就足够了。
*   使用您的实际实现将其转换为字符串，并检查其长度。如果它超过 N（见下文），则使用另一种表示，否则只需编写它。

当浮点数有很多位数时，一种可能的（短）表示是使用它们的**内存表示**。有了这个，你有一个相当固定的开销，长度永远不会改变，所以你应该只将它应用于非常长的数字。一个简单的例子来展示它是如何工作的：

```
#define USE_L2D __int64 ___tmp = 0;
#define L2D(x) (double&)(___tmp=x)

int main(int argc, char* argv[])
{
    // 2.2 = in memory it is 0x400199999999999A

    USE_L2D
    double f1 = L2D(0x400199999999999A);
    double f2 = 123456.1234567891234567;

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T11:24:00.480

首先，当你第一次说 `std::scientific`，然后时，你是在自相矛盾`std::fixed`。其次，你可能也不想要。默认格式通常设计为最好地做到这一点。默认格式没有名称，也没有操纵器，但是如果没有指定其他格式，则可以得到，并且可以使用以下方法设置（以防其他代码设置了不同的格式）：

```
cfile.setf( std::ios_base::fmtflags(), std::ios_base::floatfield ); 
```

我建议使用这个。（当然，您仍然需要精确度。）

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2013-03-01T11:18:08.863

我不确定您是否*可以*像这样无损地传递浮点数。浮点数必然是有损的。虽然它们可以精确地表示值的子集，但您不能包含所有有效数字 - 不同的硬件可能有不同的表示，因此您不能保证不会丢失信息。即使您可以将其全部传递，因为接收硬件可能无法表示该值。

不过，普通的 ofstream::operator<< 会根据需要打印出尽可能多的数字，因此实际上不需要使事情复杂化。

# sql - SQL Server 2005：在“分组依据”结果中留出空白

> ID：15156267
> 
> 赞同：0
> 
> 时间：2013-03-01T11:08:25.370
> 
> 标签：sql, database, sql-server-2005

我有一组报告由一组结果运行该组，现在运行时看起来像：

```
Column_1
1
2
3 
```

代码：

```
Select Column_1, Other_Info  
From Some_Table  
Group By Column_1 
```

但我希望结果集看起来像：

```
Column_1
1  

2

3 
```

这是可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:11:16.780

答案是肯定的，用肮脏的黑客攻击是可能的。但我**强烈**建议这在 SQL 之外处理得更好。SQL用于数据，应用层用于格式化。（根据您处理结果的位置提出新问题可能会有所帮助）。

为此，您需要复制结果集但数据为空（这意味着您需要确保所有列都是 varchar）。

然后，您需要有一种对结果集进行排序的方法，以确保空白行是交替的（下面的 Sort1 和 Sort2）

```
SELECT  Column1, OtherInfo
FROM    (   SELECT  Column_1 = CAST(Column_1 AS NVARCHAR), 
                    OtherInfo = CAST(Other_Info AS NVARCHAR), 
                    Sort1 = ROW_NUMBER() OVER(ORDER BY Column_1), 
                    Sort2 = 1
            FROM    Some_Table  
            GROUP BY Column_1, OtherInfo
            UNION ALL
            SELECT  Column_1 = N'',
                    OtherInfo = N'',
                    Sort1 = ROW_NUMBER() OVER(ORDER BY Column_1),
                    Sort2 = 2
            FROM    Some_Table  
            GROUP BY Column_1, OtherInfo
        ) d
ORDER BY Sort1, Sort2; 
```

如果您的查询成本特别高，您可能需要考虑使用临时表，而不是选择两次并且第二次不使用任何数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:11:31.913

试试这个

`Select Column_1 ,Other_Info, CHAR(13) + CHAR(10) From Some_Table Group By Column_1`

# ios - 从 tableview didselectrow 到 tabbarcontroller 选择索引

> ID：15156271
> 
> 赞同：2
> 
> 时间：2013-03-01T11:08:36.777
> 
> 标签：ios, uitabbarcontroller

我的iOS应用程序具有一个带有两个选项卡的UitabbarController，默认情况下选择了带有播放器的播放器选项卡，并且它具有带有音频播放器的ViewController。选择专辑选项卡时，它包含一个UinavigationController，放置了UinavigationController，显示了一个uinavigation View，显示了一个显示的uinavigation controller。几张专辑。选择一个特定的专辑名称时，它将推向另一个ViewController，显示了该选定专辑的歌曲。我想显示主要的 tabbarcontroller 。

例如：考虑 iPhone 音乐播放器。我们浏览一张专辑，当我们选择一首歌曲时，它会显示播放器屏幕，它是如何完成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:16:50.957

我想这应该可以解决您的问题`self.tabBarController.selectedIndex = indexOfTab;`

供进一步参考

[UITabBarController 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarController_Class/Reference/Reference.html)

[跳转到 UITabBarController 中的特定选项卡](https://stackoverflow.com/questions/8963450/jump-to-a-specific-tab-in-a-uitabbarcontroller)

# c# - ADO.NET：SqlParameterCollection.Add 方法（字符串、SqlDbType、Int32）。大小论点 - 是什么意思？

> ID：15156277
> 
> 赞同：0
> 
> 时间：2013-03-01T11:08:59.850
> 
> 标签：c#, .net, sql-server, ado.net

[在MSDN](http://msdn.microsoft.com/en-us/library/40959t6x.aspx)中规定了包括 Size 参数的`SqlCommand.Parameters.Add`方法重载：

> “当您添加可变长度数据类型（如 varchar 或二进制）的参数时，此重载很有用。”

并给出了示例：

```
public void AddSqlParameter(SqlCommand command) 
{
    SqlParameter param = new SqlParameter(
        "@Description", SqlDbType.NVarChar, 16);
    param.Value = "Beverages";
    command.Parameters.Add(param);
} 
```

我有一些困难要更准确地理解：

1.  Size 参数中应该提供什么？DB结构中的列长度或当前参数值的长度或它们的Min（）？或者是其他东西？

2.  它是否仅适用于 "`varchar`或`binary`" 或其他文字 Sql Server 类型，例如`char`,`nvarchar`等...？

或者

**已编辑：我的具体案例：** 如果在 DB 列`name`中，`varchar(10)`但我在 C#`String lName`中有长度为 15 的内容，我必须在 Parameters.Add: 10 or `lName.Length`or ...？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:13:16.437

如果未在 size 参数中显式设置，则从 dbType 参数的值推断 Size。

[SqlParameter 构造函数（字符串、SqlDbType、Int32）](http://msdn.microsoft.com/en-us/library/hex23w80.aspx)

Size 属性用于二进制和字符串类型。对于 SqlType.String 类型的参数，Size 表示 Unicode 字符的长度。对于 SqlType.Xml 类型的参数，忽略 Size。

[SqlParameter.Size 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.size.aspx)

# spring - Spring事务的默认语义是什么？

> ID：15156278
> 
> 赞同：1
> 
> 时间：2013-03-01T11:09:01.167
> 
> 标签：spring, hibernate

我正在查看声明了注释驱动的 spring 事务的代码，`@Repository`使用`HibernateOperations`该类注释的 DAO - 但在任何`@Transactional`地方都没有注释，`tx:advice`在 xml 文件中也没有。

如果您实际上没有用 注释，会发生什么`@Transactional`？

# android - 带有 Html.fromhtml 的 div 标签

> ID：15156280
> 
> 赞同：2
> 
> 时间：2013-03-01T11:09:06.140
> 
> 标签：android, html

我从各种博客中读到 Html.fromHtml 支持 div 标签，但它不支持**样式**属性。

我想要做的是分配由包含 html 标签的字符串指定的背景颜色。就像是

```
 <p style="background-color:green;">This is a paragraph.</p> 
```

如果 Html.fromHtml() 不支持样式属性，是否有其他方法可以使用 html 标签更改 bgcolor。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:14:09.193

使用代码：

```
 yourfield.setBackgroundColor(Color.parseColor("#ca1216")); 
```

# sql-server - UDT 的多种输入类型

> ID：15156283
> 
> 赞同：2
> 
> 时间：2013-03-01T11:09:12.873
> 
> 标签：sql-server, tsql, sqldatatypes, user-defined-types

我不知道我想做的事情是否可能，我只是好奇。

我有一个用户定义的类型，比如 MyType，它是一个 TINYINT 以及一个规定允许的值必须在 0 到 3 之间的规则。

```
-- Existing UDT & Rule which work
CREATE TYPE [MySchema].[MyTypes]
FROM [TINYINT]

CREATE RULE [MySchema].[MyTypes_Rule] AS
@Range BETWEEN 0 AND 3

sp_bindrule 'MySchema.MyTypes_Rule', 'MySchema.MyTypes' 
```

我想知道的是是否可以添加一个额外的规则/功能，这将允许我创建一个额外的规则，该规则将采用 NVARCHAR 值，如果它在该范围内，则将其转换为适当的 TINYINT 值。

```
CREATE RULE [MySchema].[MyTypes_NVARCHAR_Rule1] AS
@InValues IN (N'N', N'A', N'B', N'C')

CREATE RULE [MySchema].[MyTypes_NVARCHAR_Rule1] AS
@InValues IN (N'No Choice', N'Choice A', N'Choice B', N'Choice C') 
```

然后进行某种类型的转换，从“Choice A”或“A”转换为 1，“Choice B”或“B”转换为 2，等等等等。

下面的脚本类似于我想要将字符串转换为允许值的功能。

```
CREATE TABLE [MyTable]
( [MyValue] BIT,
  [Description] NVARCHAR(20) )
GO

INSERT INTO [MyTable]
( [MyValue], [Description] )
SELECT 0, 'Enterered as 0' -- false
UNION
SELECT 1, 'Enterered as 1' -- true
UNION
SELECT CAST(0 AS BIT), 'Enterered as CAST(0 AS BIT)' -- false
UNION
SELECT CAST(1 AS BIT), 'Enterered as CAST(1 AS BIT)' -- true
UNION
SELECT CAST('false' AS BIT), 'Enterered as CAST(''false'' AS BIT)' -- false
UNION
SELECT CAST('true' AS BIT), 'Enterered as CAST(''true'' AS BIT)' -- true 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:55:06.380

不，不幸的是，在普通的 T-SQL 中不可能有这样的事情。

您可以创建一个采用 sql_variant 的 CLR 用户定义函数，然后在其中进行类型测试，但是，我会质疑它的必要性。通常您会希望在您的用户界面中运行的代码中进行这种转换，这样当您到达业务逻辑层时，您就可以使用固定的数据类型，更不用说您的数据库了。

顺便说一句，`CREATE RULE`正在被弃用 - 并且长期以来一直处于“此功能将在未来版本中删除”状态。到目前为止，我还没有看到任何替代方案可以让您定义`CHECK`用户定义类型的约束。这可能是它实际上尚未被弃用的部分原因。

# msbuild - 如何使用 MSBuild 将文件复制到同一文件夹但扩展名不同？

> ID：15156286
> 
> 赞同：0
> 
> 时间：2013-03-01T11:09:34.760
> 
> 标签：msbuild, copy, msbuild-task

假设我有一个 ItemGroup 定义如下：

```
 <ItemGroup>
<ReactorFile Include="MyExecutable\bin\x86\Release\MyExecutable.exe"/>
<ReactorFile Include="MyLibrary\bin\x86\Release\MyLibrary*.dll"/>
</ItemGroup> 
```

定义了一个 PropertyGroup：

```
<PropertyGroup>
<ReactorUnObfuscatedFileExt>.unobfuscated</ReactorUnObfuscatedFileExt>
</PropertyGroup> 
```

我还在另一个文件中定义了一个目标：

```
<Target Name="CopyUnprotectedFiles">
  <!-- Copy unobfuscated file to  "unobfuscated file".unobfuscated -->
<Copy
    SourceFiles="@(ReactorFile)"
    DestinationFiles="@(ReactorFile -> '%(Filename)%(Extension)$(ReactorUnObfuscatedFileExt)"
    SkipUnchangedFiles="false"
/>
</Target> 
```

不幸的是，由于我缺乏 MSBuild 经验，我做错了。有人可以帮我纠正吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:23:25.253

我已经想通了：

添加*%(RelativeDir)*项目元数据是解决方案。

也许其他人会用它作为例子。更正的片段是：

```
<Target Name="CopyUnprotectedFiles">
  <!-- Copy unobfuscated file to  "unobfuscated file".unobfuscated -->
<Copy
    SourceFiles="@(ReactorFile)"
    DestinationFiles="@(ReactorFile -> '%(RelativeDir)%(Filename)%(Extension)$(ReactorUnObfuscatedFileExt)')"
    SkipUnchangedFiles="false"
/>
</Target> 
```

# ios - Xcode 在到达断点时冻结，同时在设备上进行测试

> ID：15156291
> 
> 赞同：16
> 
> 时间：2013-03-01T11:09:40.710
> 
> 标签：ios, xcode, debugging

我在 Xcode 中设置了一个断点并在设备上运行我的应用程序。Xcode 在断点处停止，控制台打开，但我只看到一个旋转的轮子，而不是所有变量的列表，并且 Xcode 有点冻结。当我按下停止按钮时没有任何反应。只有当我拔下设备时它才会解冻。这刚刚开始发生在上周。

其他时候它会列出变量，但是当我单击“self”旁边的箭头时，会发生相同的“冻结”。

**在模拟器中测试时不会发生这种情况。**

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-08T05:56:55.307

只需重新启动您的开发机器。为我工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-02T18:21:10.613

这对我有用：

关闭 Xcode。打开Finder，点击`⌘</kbd>+`Shift`+`G` to open "Go to Folder".`

输入 ~/Library/Developer/Xcode/DerivedData

删除此目录中的所有文件夹并清空垃圾箱。重新打开 Xcode 并重试。

这要归功于 rokjarc（[为什么 Xcode 成功构建和复制我的应用程序，但不会启动它？](https://stackoverflow.com/questions/14447267/why-does-xcode-successfully-build-copy-my-application-but-wont-launch-it/14447705#14447705)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-08-20T02:57:26.890

我尝试了以下选项之一或其他作品

*   删除派生数据或在 xcode 中执行清理构建文件夹
*   删除和读取断点
*   重新启动 xcode 或开发机器
*   关闭所有占用内存的应用程序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-01T15:16:51.213

发生在我身上一次。尝试删除 Breakpoints.xcbkptlist 文件。（删除所有放置的断点）然后放回断点并重试。

祝你好运。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-07T08:16:49.103

我遇到了和你一样的问题，我刚刚更新了我的 xcode 版本，如果这不起作用，请重新安装你拥有的当前版本。您可以在这里执行此操作，但您需要成为苹果开发人员成员才能执行此操作[https://daw.apple.com/cgi-bin/WebObjects/DSAuthWeb.woa/wa/login?appIdKey=d4f7d769c2abecc664d0dadfed6a67f943442b5e9c87524d4587a95773750cea&path=%2F%2Fdownloads% 2Findex.action](https://daw.apple.com/cgi-bin/WebObjects/DSAuthWeb.woa/wa/login?appIdKey=d4f7d769c2abecc664d0dadfed6a67f943442b5e9c87524d4587a95773750cea&path=%2F%2Fdownloads%2Findex.action)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-12T04:46:05.087

**这不是解决方案**

我尝试了在此解释的方法以及其他几个答案和论坛，但在我的情况下，它们都不适合我。

我已将启动属性编辑为*Wait for executable to be* launch而不是*Automatically*。这是为了测试用户在根本没有启动的情况下从推送通知中打开应用程序的时间。调试器将停止并且不允许任何单步执行或**po**命令。

我花了大约 2 个小时尝试解决问题后才使用日志记录。如果您在非常狭窄的场景中遇到类似问题，那么**print()**可以节省您的时间。

# security - 如何针对密码的特定字母进行身份验证

> ID：15156293
> 
> 赞同：2
> 
> 时间：2013-03-01T11:09:45.220
> 
> 标签：security, authentication, hash

某些网站（例如 Halifax 和 Barclaycard 等银行）会提示用户输入特定的密码字母。但是，如果用户的密码被加盐和散列，那么我看不到如何使用各个字母。所以要么密码没有被散列，要么有另一个过程在起作用。可能每个单独的密码字母都经过加盐和哈希处理，但这似乎不是特别安全。

谁能解释这里使用的是什么身份验证模型？鉴于这是相当普遍的地方，我必须假设有一个受信任的模型来支持这种做法。

**编辑：**我找到的最佳答案实际上是在[security.stackexchange.com 上“某些网站（例如网上银行）如何只要求密码中的特定字符而不将其存储为明文？”](https://security.stackexchange.com/questions/4830/how-do-some-sites-e-g-online-banks-only-ask-for-specific-characters-from-a-pa) 所以我也会投票结束我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:17:32.843

您的信任可能放错了地方。加盐并不能防止暴力攻击，只能使用彩虹表。如果你给每个单独的字符加盐，那么这将是微不足道的破解。类似地，对四个字符的每个组合进行加盐和散列处理也很容易被蛮力破解。您的密码几乎可以肯定是以未加密的方式存储的。

这并不像听起来那么糟糕，散列仅对阻止获取密码数据库内容的人有用。如果人们可以访问您的银行密码数据库，那么您很可能还有其他问题。例如，他们可能不需要您的密码来转账。

如果您考虑一下，就**不可能安全地做到这一点**。如果您有一些预言机需要 1 秒来验证密码的四个字符（每个可能有 36 个可能的值），那么您可以在平均 839,808 次尝试后破解四个字符，这需要 10 天。如果密码长度为 12 个字符，则完全破解它需要一个月的时间。登录时间不到 1 秒。

# javascript - jQuery UI 选项卡中的错误：片段标识符不匹配。

> ID：15156294
> 
> 赞同：6
> 
> 时间：2013-03-01T11:09:53.410
> 
> 标签：javascript, jquery, jquery-ui, tabs

这是我的代码：

```
<div id="tablesTabs">
        <ul>
            <li><a id="changed" href="#changedTable"><% "Changed" %></a></li>
            <li><a id="unchanged" href="#changedTable"><% "Unchanged"%></a></li>
        </ul>
    </div>

<div id="tablesDiv">
        <div id="changedTable" style="width:100%; height:430px;"></div>
    </div> 
```

在 javascript 中：

```
$(function () {
        $("#tablesTabs").tabs({
            cache: true
        }).scrollabletab();
        loadTables();
    });

if ($('#tablesTabs').tabs("option", "selected") == 0) {
    //fill table with data
}

if ($('#tablesTabs').tabs("option", "selected") == 1) {
    //fill table with other data
} 
```

第一个选项卡看起来不错，网格没问题。但是当我单击第二个选项卡时，我收到错误 Uncaught jQuery UI Tabs: Mismatching fragment identifier。有什么问题以及如何解决？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-01T11:21:28.140

首先，我会看看问题是否在于您的两个选项卡在其 href 属性中具有相同的链接。两者都有`#changedTable`，尝试为每个选项卡设置唯一的 href。

其次，您的标签设置对我来说看起来不熟悉。也许没关系，但我总是在选项卡 div 中包含内容 div。

作为：

```
<div id="tabs">
  <ul>
    <li><a href="#tab-1">Something</a></li>
    <li><a href="#tab-2">Something else</a></li>
  </ul>

  <div id="tab-1">
    <p>Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla.</p>
  </div>
  <div id="tab-2">
    <p>Curabitur ornare consequat nunc. Aenean vel metus.</p>
  </div>
</div> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-07T07:43:59.697

tab的href应该有#号，tab内容的id不能有#。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-16T21:09:14.603

[根据官方 JQuery 示例https://jqueryui.com/tabs/](https://jqueryui.com/tabs/)，我的情况是标签外的标签内容

```
<!-- error  -->

<div id="tabs">
  <ul>
    <li><a href="#tabs-1">Nunc tincidunt</a></li>
    <li><a href="#tabs-2">Proin dolor</a></li>
    <li><a href="#tabs-3">Aenean lacinia</a></li>
  </ul>
</div>

  <div id="tabs-1">
    <p>abc.</p>
  </div>
  <div id="tabs-2">
    <p>def.</p>
  </div>
  <div id="tabs-3">
    <p>ghi.</p>
  </div>

<!-- correct -->
<div id="tabs">
  <ul>
    <li><a href="#tabs-1">Nunc tincidunt</a></li>
    <li><a href="#tabs-2">Proin dolor</a></li>
    <li><a href="#tabs-3">Aenean lacinia</a></li>
  </ul>
  <div id="tabs-1">
    <p>abc.</p>
  </div>
  <div id="tabs-2">
    <p>def.</p>
  </div>
  <div id="tabs-3">
    <p>ghi.</p>
  </div>
</div> 
```

# javascript - HTML：更改文本区域中单个字符的背景颜色？

> ID：15156298
> 
> 赞同：3
> 
> 时间：2013-03-01T11:10:19.493
> 
> 标签：javascript, html, interpreter, brainfuck

我正在制作一个[Brainfuck](http://en.wikipedia.org/wiki/Brainfuck)解释器（brainfuck 是一种由 8 个符号组成的编程语言，它们是`,.+-<>[]`）

有没有办法通过 JavaScript 为 HTML 文本区域中单个字符的背景着色？

假设我的文本区域包含“hello world”。我希望能够告诉它给第三个字母上色，所以它会显示“he* *l* *lo world”（这里使用粗体来说明颜色，因为我不知道如何在 Stack Overflow 编辑器中包含颜色）。

有谁知道如何做到这一点，或者是否有可能？任何帮助将不胜感激:=)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T15:53:13.023

我认为 Mukul 在我的脑海中种下了种子，但这样的事情是否有用：

```
<textarea id="editor"></textarea>
<div id="render"> </div>

<script>

$(document).ready(function() {
  $("#editor").keyup(function() {
  var plaincontent = $("#editor").val();
  var richcontent = "";

  for (var i=0; i<plaincontent.length; i++) {
    if (plaincontent.charAt(i) == "[") {
      richcontent = richcontent + "<span style='color:#f00'>[</span>";
    } else {
      richcontent = richcontent + plaincontent.charAt(i);
    }
  }
  $("#render").html(richcontent);
});
});

</script> 
```

它基本上将您在 textarea 中输入的内容输出到下面的 div 中，但根据您输入的字符将其包装在 span 中。在上面的演示中，`[`角色将以红色呈现。

您必须针对所有不同的合法字符对其进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:17:30.487

虽然这似乎不可能，但我能想到的一个技巧是为每个角色使用多个**跨度，并根据您的选择为它们提供背景颜色。**

使用 javascript，您可以使用子选择器访问任何字符。

# java - 如何在 WebContent 文件夹中安装茧站点地图？

> ID：15156300
> 
> 赞同：0
> 
> 时间：2013-03-01T11:10:27.037
> 
> 标签：java, eclipse, war, apache-cocoon

在 cocoon 2.2 中，我希望将位于 COB-INF 文件夹中的主站点地图安装在 war 文件的 WebContent 文件夹中，并且所有子站点地图都与此站点地图相关。我使用 eclipse 作为我的 IDE。不确定这是否应该在 POM 文件中完成，或者我可以在将 cocoon 战争文件导入 eclipse 后更改一些设置。茧的文档没有给出明确的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:22:00.833

Maven 战争插件允许以任何方式重新安排资源。Cocoon 如何找到它是一个应用程序问题。

```
<configuration>
      <webResources> 
```

您可能还必须确保它不在网络请求中提供。

# android - Google Play 服务已过时。需要 3025100 但找到 2012110

> ID：15156301
> 
> 赞同：11
> 
> 时间：2013-03-01T11:10:27.663
> 
> 标签：android, android-emulator, android-maps-v2, google-play-services

我在我的应用程序中使用 Google maps v2 并在模拟器中对其进行调试。自 2 月 26 日更新以来，我现在收到此错误消息

```
Google Play services out of date. Requires 3025100 but found 2012110 
```

我现在想知道是否有人拥有在模拟器中运行 google play services rev 5 所需的更新文件？我尝试使用 rev 4 的 Google Play 服务运行该应用程序，但模拟器没有它并要求我更新 Google Play 服务。有没有人有任何其他想法？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-14T12:20:39.897

我最终找到了我需要的文件，[gms](http://uploaded.net/file/bnzl1si4)和[vending](http://www.androidfilehost.com/?fid=9390135922294521859)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-03T06:58:07.173

在 ADT 22.0.1 和新的 Android Private Libraries 更新后，谷歌地图服务正在给出一些错误和应用程序崩溃。所以我终于找到了解决方案，它对我有用。

只需安装 google play 服务库，然后从以下链接转到 google-play-service/libproject/google-play-services_lib ：-

[https://www.dropbox.com/sh/2ok76ep7lmav0qf/9XVlv61D2b](https://www.dropbox.com/sh/2ok76ep7lmav0qf/9XVlv61D2b)

而不是将其导入您的工作区。清理你想要使用 gogole-play-services-lib 的项目而不是重新构建它，然后转到 Project > Properties > Java BuildPath > 选择“Android Private Libraries, android Dependencies, google-play-service”

在“属性”本身中转到 Android，然后选择任何版本，然后选择添加并选择 google-play-service-lib，然后按应用，最后确定。

最后转到 Project > Android Tools > Android Support Libraries 。接受许可证并在安装后运行您的项目。

它会正常工作。

希望这会帮助你。

# mysql - 如何更新 phpMyAdmin 中的视图？

> ID：15156308
> 
> 赞同：9
> 
> 时间：2013-03-01T11:10:50.500
> 
> 标签：mysql, view, phpmyadmin

如何使用 phpMyAdmin 在 MySQL 数据库中更新（或编辑）视图。

我得到了一个由两个表中的列组成的视图 - 我在其中一个表中添加了一个新列，但视图没有它。我找不到用于获取此视图的 MySQL 查询（它非常晦涩） - 那么如何编辑创建此视图的 MySQL 查询以向其中添加新列？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-01T11:18:34.493

如何使用（您的视图称为视图名称）

1.  `SHOW CREATE VIEW viewname`按原样获取视图的 SQL
2.  `DROP VIEW viewname`删除视图
3.  修改第一步中的 SQL 以将新列添加到该 SQL
4.  运行修改后的 SQL

这将创建带有附加列的视图

[http://dev.mysql.com/doc/refman/5.0/en/show-create-view.html](http://dev.mysql.com/doc/refman/5.0/en/show-create-view.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-28T06:03:28.313

为了获取编辑/更新视图，我们使用了两种方式：

```
Step 1: 

select your view in phpmyadmin and click Export(make sure click check box of Structure& Add DROP VIEW) & GO.you'll see a CREATE VIEW  query like as:CREATE ALGORITHM=UNDEFINED DEFINER=`dbname`@`localhost` SQL SECURITY DEFINER VIEW `vw_name` AS select ..etc..And then remove 'ALGORITHM.....to...DEFINER' part from this query and update/added required field/make changes to the query.and then execute modified view.`

step 2:

    Run the query: SHOW CREATE VIEW `vw_name`
    Expand the result and choose Full Texts.        
    Copy entire contents of the Create View column.
    Make changes to the query.
    Run the query directly (with out the CREATE VIEW... syntax) to make sure it runs as you expect it to. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-22T14:38:30.150

您还可以使用`CREATE OR REPLACE VIEW`, 来避免删除视图的步骤：

*   `show create view viewname`. 在“创建视图”列中查找定义
*   使用以下命令添加新列：`CREATE OR REPLACE VIEW`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-03-10T13:34:45.533

**更简单的方法**

大多数情况下，无法编辑视图等是由于 DEFINER 设置为 root@localhost，如果您来自 Web 主机控制面板，则该用户不是您。

1.  单击左上角的主页（房屋图标），将您的用户名复制到右侧。
2.  单击左侧的视图 > 结构 > 编辑视图并进行编辑。
3.  将您的用户名粘贴到“root@localhost”的位置，然后单击 Go。

*这已经在 PHPMyAdmin 4.9.0.1 上进行了测试，它也可以在早期和更高版本上运行。PHPMyAdmin 似乎会在会话的其余部分记住您的用户名，以便您可以自由编辑。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T11:19:07.220

在 phpMyADmin 上转到导出 ->（选择）'快速 - 仅显示最小选项' -> GO。

这将为您提供您在文本文件中所做的创建语句，查看或保存该文本文件，您应该在那里拥有所有信息。

# java - 重构 Windows、UNIX、URI 路径混合

> ID：15156310
> 
> 赞同：1
> 
> 时间：2013-03-01T11:10:57.180
> 
> 标签：java, refactoring

对于将各种类型的路径存储为`String`对象以仅使用`URI`对象的重构代码，有哪些替代方法？

该代码当前具有存储为对象的路径，`String`其中值可以是

*   系统路径（当前平台的目录分隔符）
*   URI
*   Windows 路径（`\`所有平台上的目录分隔符）
*   UNIX 路径（`/`所有平台上的目录分隔符）
*   Chimera 路径（`\`目录分隔符，URL 编码）

代码库有*一些*单元测试。我想到的方法是

1.  引入`WindowsFile`、`UnixFile`和`ChimeraFile`包装类
2.  转换代码使用`File`、`URI`或 wrapper 类，而不是`String`
3.  重构代码以仅`URI`通过依次处理每种类型来使用

是否有其他重构方法或步骤可以使流程更容易或更安全。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:12:31.843

我会使用 File.Separator 而不是 "/" 和 "\" 并且很简单并且没有任何问题

# android - sqlite：如何从android应用程序在sqlite数据库中插入时间

> ID：15156312
> 
> 赞同：4
> 
> 时间：2013-03-01T11:11:11.897
> 
> 标签：android

当我单击它时，我有两个edittext，会弹出一个timepickerdialog，并且时间将在edittext中设置，因为我的代码是，

```
 int TIME_PICKER_ID = 1,hour,minute,flag;

  edittext_starttime.setOnClickListener(this);
  edittext_endtime.setOnClickListener(this);

    final Calendar c = Calendar.getInstance();
    hour = c.get(Calendar.HOUR_OF_DAY);
    minute = c.get(Calendar.MINUTE);

  @Override
   public void onClick(View v) {
     if(v.getId() == R.id.editText_starttime_stsa){
        flag = 1;
        showDialog(TIME_PICKER_ID);
    }//editText_starttime_stsa

    if(v.getId() == R.id.editText_endtime_stsa){
        flag = 2;
        showDialog(TIME_PICKER_ID);
    }//editText_endtime_stsa

    if(v.getId() == R.id.button_create_stsa){
        onCreateAlert();
    }//button_create_susa       
}

   @Override
protected Dialog onCreateDialog(int id) {
    switch(id){
    case 1: 
return new TimePickerDialog(this, timePickerListener, hour, minute, false);
    }
    return null;
}

private TimePickerDialog.OnTimeSetListener timePickerListener = new     TimePickerDialog.OnTimeSetListener(){
    public void onTimeSet(TimePicker view,int selectedHour,int selectedMinute){
        hour = selectedHour;
        minute = selectedMinute;

        updateDisplay(hour,minute);
    }
};

private void updateDisplay(int hour, int minute) {
    if(flag==1){
        edittext_starttime.setText(new StringBuilder().append(pad(hour)).append(":").append(pad(minute)));
    }else if(flag==2){
        edittext_endtime.setText(new StringBuilder().append(pad(hour)).append(":").append(pad(minute)));
    }
}

private static String pad(int c) {
    if (c >= 10)
       return String.valueOf(c);
    else
       return "0" + String.valueOf(c);
} 
```

我想在我写过查询的 sqlite 数据库中插入 start_time 和 end_time，

```
String query = "insert into Status_Master(status_id, status_name, status_description,  timewindow_start, timewindow_end) values("+status_id+",'"+status_name+"','"+status_desc+"',time('"+start_time+"'),time('"+end_time+"'))"; 
```

但我收到错误。这是在数据库中插入时间的正确方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:27:03.523

```
 SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 

  Date date1 = new Date();
  Date date2 = new Date();

    ContentValues initialValues = new ContentValues(); 
         initialValues.put("status_id",status_id);
         initialValues.put("status_name", status_name);
         initialValues.put("status_description", status_desc);

         initialValues.put("timewindow_start", dateFormat.format(date1));
          initialValues.put("timewindow_end", dateFormat.format(date2));

    long result= mDb.insert(DB_TABLE_NAME, null, initialValues); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:22:01.747

这样做。首先创建数据库，我的代码在这里。

```
public class AppDatabase extends SQLiteOpenHelper
{
    private final static String DATABASE_NAME="AppDB";
    public final static String TABLE_PASSWORD="password";
    public static int version=1;
    public Context cont;
    public AppDatabase(Context context)
    {
        super(context,DATABASE_NAME, null, version);
        this.cont=context;
    }

    @Override
    public void onCreate(SQLiteDatabase sqlDb)
    {
        sqlDb.execSQL("Create table password(_id INTEGER autoincreament PRIMARY KEY, monthOfBirth INTEGER)");
    }

    @Override
    public void onUpgrade(SQLiteDatabase sqlDb, int old, int latest)
    {
        sqlDb.execSQL("DROP TABLE password");
        this.onCreate(sqlDb);
    }
 } 
```

现在创建一个事务类以通过方法将值插入数据库。

```
public long savePassword(int numberMonth)
    {
        long x=-1;
        sqliteDb=appDb.getWritableDatabase();
        ContentValues values=new ContentValues();
        values.put("monthOfBirth", numberMonth);
        try
        {
            if(sqliteDb.isOpen())
            {
                x=sqliteDb.insert("password", null, values);
                if(x>=0)
                {
                    //Toast.makeText(context, "Password Save", Toast.LENGTH_SHORT).show();
                }
            }
        }
        catch(Exception exc)
        {
            System.err.print(exc);
        }
    return x;
    } 
```

现在在您的活动中，只需从 edittext 中选择值，然后通过 Transaction 的对象调用此方法。

```
trans = new Transactions(MainActivity.this);
                            long x = trans.savePassword(pMonth);
                            if (x >= 0)
                                {
                                    Toast.makeText(getBaseContext(), "Password Save in Database.", Toast.LENGTH_SHORT).show();
                                } 
                            else
                                {
                                    Toast.makeText(getBaseContext(), "Password didn't save.",   Toast.LENGTH_SHORT).show();
                                } 
```

希望这会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:15:25.733

请检查[SQLite 站点](http://www.sqlite.org/lang_datefunc.html)并查看时间函数。SQLite 仅支持站点中列出的 12 种格式。确保您提供的字符串格式正确。

# emacs - 不可用的缓冲区

> ID：15156315
> 
> 赞同：0
> 
> 时间：2013-03-01T11:11:29.920
> 
> 标签：emacs

由于某种原因，我无法杀死某些缓冲区（因此也无法彻底退出 Emacs）。仅显示以下消息：

`equal: Wrong type argument: listp, \.\.\.`

我发现的唯一解决方法是`write-file`将其保存为不同的名称 - 然后我可以杀死原始缓冲区和新缓冲区。但是，一旦我重新打开原始文件，我就会回到原始错误消息。我无法说明某些缓冲区发生这种情况的原因或时间。可能是我无意中激活了某种保护？

这使我的工作非常努力，所以我会很感激任何想法！非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:08:22.473

您的初始化文件中有错误。打开`debug-on-error`并查看是否可以获得回溯。[二进制搜索](https://groups.google.com/d/msg/gnu.emacs.help/JomGnVm9uNE/_vzwyid9bv0J)找到它。

但是，在您开始这条路之前，请检查您是否有一个可以跨 Emacs 会话保存设置的包。我在 [session](http://emacs-session.sourceforge.net/)中看到了非常相似的问题，但它可能会在其他类似的包中表现出来。

问题是保存的某些数据结构太大，所以 Emacs 将其缩写为“...”，下次启动 Emacs 时，它会恢复 /wrong/。

# php - JSON_encode 不处理特殊字符？

> ID：15156319
> 
> 赞同：1
> 
> 时间：2013-03-01T11:11:33.860
> 
> 标签：php, json, character-encoding

我遇到了一个问题，json 可以对数组进行编码，但是由于特殊字符，它无法正确解码它。

我在 stackoverflow 上找到了这个试图提供帮助的函数：

```
function escapeJsonString($value) 
{  # list from www.json.org: (\b backspace, \f formfeed)
                $escapers = array("\\", "/", "\"", "\n", "\r", "\t", "\x08", "\x0c");
                $replacements = array("\\\\", "\\/", "\\\"", "\\n", "\\r", "\\t", "\\f", "\\b");
                $result = str_replace($escapers, $replacements, $value);
                return $result;
    } 
```

但它只是一个字符列表，每次我得到一个新的特殊字符时，我都必须手动处理它并将其添加到字符及其替换列表中。

**我该如何妥善处理这个问题？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:16:15.733

尝试清理你的 json

```
$cleanJsonData = preg_replace("/[[:cntrl:]]/", "", $jsonData);
$myData = json_decode($cleanJsonData, TRUE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:16:53.480

`json_decode`除了要进行 utf-8 编码的输入字符串。

```
<?php
$json = json_decode(utf8_encode($str)); 
```

这应该有效。

# c# - 数据进入数据库的速度

> ID：15156326
> 
> 赞同：2
> 
> 时间：2013-03-01T11:11:45.607
> 
> 标签：c#, .net, database, sql-server-2005, oledb

我正在开发一个 Windows 应用程序，其中我正在上传一个文本文件。在该文本文件中有 5000 行，其中有逗号 [,] 分隔的数据。我在后端使用 oledb 连接[MS Access]。我正在从文件中获取逗号分隔的数据并将其插入数据库。

但正如我所观察到的，数据接近 15000-16000 条记录。插入时每秒需要将近 7 条记录。

我想提高这个速度。

这是否取决于我们在后端使用什么作为数据库？

sql server 2005可以代替MS Access提高速度吗？

请帮助我。

请参阅代码：

```
string file = openFileDialog1.FileName;
StreamReader inputData = new StreamReader(file);
while ((line = inputData.ReadLine()) != null)
{
    subLine = line.Split(',');

    /*Taking Unique ID from tradefile table*/
    int ID=0;
    try
    {
        da=new OleDbDataAdapter("select max(ID) from tradeFile",con);
        DataSet ds=new DataSet();
        da.Fill(ds);

        for (int i = 0; i < ds.Tables[0].Rows.Count; i++)
        {
            if (ds.Tables[0].Rows[i][0].ToString() == "")
            {
            }
            else
            {
                ID = int.Parse(ds.Tables[0].Rows[i][0].ToString());
                ID++;
            }
        }
    }
    catch(Exception ex)
    {
        MessageBox.Show(ex.Message);
    }

    try
    {
        string unknown="unknown Fileld";
        con.Open();
       // int j=subLine.Length;
        //for(int i=0;i<subLine.Length;i++)
        {
            int i = 0;
           //int j=subLine.Length;
           //int index=subLine.Length-j;
           cmd=new OleDbCommand(
               "insert into tradeFile values('"+ID+"','"+
               subLine[i].ToString()+"','"+subLine[++i].ToString()+"','"+
               subLine[++i].ToString()+"','"+subLine[++i].ToString()+"','"+
               subLine[++i].ToString()+"','"+subLine[++i].ToString()+"','"+
               subLine[++i].ToString()+"','"+subLine[++i].ToString()+"','"+
               subLine[++i].ToString()+"','"+subLine[++i].ToString()+"','"+
               subLine[++i].ToString()+"','"+subLine[++i].ToString()+"','"+
               subLine[++i].ToString()+"','"+subLine[++i].ToString()+"','"+
               subLine[++i].ToString()+"','"+subLine[++i].ToString()+"','"+
               subLine[++i].ToString()+"','"+subLine[++i].ToString()+"','"+
               subLine[++i].ToString()+"','"+subLine[++i].ToString()+"','"+
               subLine[++i].ToString()+"','"+subLine[++i].ToString()+"','"+
               subLine[++i].ToString()+"','"+subLine[++i].ToString()+"','"+
               unknown+"')",con);
           cmd.ExecuteNonQuery();

        }
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
    finally
    {
        con.Close();
    }
    //counter++;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:14:36.300

您可以通过一次插入多行来提高速度。据我所知，sql-server 允许在一个查询中插入 1000 行，这是对 DB 的 5-6 个查询，而不是 5-6k 个查询。不确定有多少行可以处理 ms 访问。此外，插入速度当然取决于 RDBMS

**更新：**

奇怪的是，您执行了额外的查询来获取表的新 id。你真的应该使用自动增量字段，这是第一个。第二：您的结果插入查询应如下所示：

```
insert into tradeFile (field1, field2 ... fieldN) 
values (f1value1, f2value1...fNvalue1), (f1value2, f2value2...fNvalu2) etc. 
```

第三 - 您需要记住，您不能一次插入超过 N 个（例如 SQL Server 中的 1000 个）值，因此您的代码可能如下所示：

```
string file = openFileDialog1.FileName;
StreamReader inputData = new StreamReader(file);
int values = 0;
const int maxValuesPerInsert = 1000;
string insertQuery = string.empty;
while ((line = inputData.ReadLine()) != null)
{
    subLine = line.Split(',');
    /*do some work to extract values (lemme call em value1, value2...)*/
    if (values < maxValuesPerInsert - 1)
    {
        insertQuery += string.format("({0}, {1}, {2}),", value1, value2, value3);
        values++;
    }
    else
    {
        insertQuery += string.format("({0}, {1}, {2})", value1, value2, value3); //just to get rid of last comma            
        var query = string.format("insert into tradeFile (field1, field2, field 3) values {0}", insertQuery);
        /*do your db query*/
        insertQuery = string.empty;
        values = 0;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:15:39.547

是的，SQL Server 比 MSACCESS 快得多且可靠得多。

当您使用具有多个连接的现代访问或当您有大量工作负载时，请避免对大型数据库使用访问（几千条记录可能对访问来说很大）。

SQL Server express 就足够了（而且它是免费的，请参阅此处的限制：http: [//social.msdn.microsoft.com/Forums/en-US/sqldensetup/thread/0e781eb4-1c27-4777-9bd8-bc9e1ae3e803/](http://social.msdn.microsoft.com/Forums/en-US/sqldensetup/thread/0e781eb4-1c27-4777-9bd8-bc9e1ae3e803/)）

另一个“解决方法”可能是在一个查询中使用多个插入或使用 BULK 插入（我不确定是否支持访问）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:15:56.193

当然，使用 MsSQL 服务器而不是 MS Access 会提高速度。同样，我认为您正在为每个第 1 行查询进行。您必须在每个查询中添加几行。这将提高速度。

您使用什么算法来拆分文本文件中的数据？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T11:20:51.520

> 我想提高这个速度。

您应该查找[**ADO.NET 批处理**](http://msdn.microsoft.com/en-us/library/aadf8fk2.aspx)。

基本上，您创建一个 DataAdapter（即一个[`SqlDataAdapter`](http://msdn.microsoft.com/en-us/library/879f39d8%28v=vs.110%29.aspx)，如果您选择 SQL Server），在其中指定更新、插入和删除命令，然后将[`DataAdapter.UpdateBatchSize`](http://msdn.microsoft.com/en-us/library/system.data.common.dbdataadapter.updatebatchsize%28v=vs.90%29.aspx)属性设置为大于 1 的值（例如，尝试 1000 看看会发生什么）。

使用适度的硬件，您应该能够**每秒插入约 10,000 行**，但我会尝试几种不同的批量大小和**配置文件**。

> sql server 2005可以代替MS Access提高速度吗？

是的，如果您需要处理更大的数据集，您应该考虑切换到 SQL Server。不过，无需使用 2005 版；[SQL Server 2012 Express](https://www.microsoft.com/en-us/sqlserver/editions/2012-editions/express.aspx)是自 2012 年起选择的免费版本。

如果你真的有大量的行（例如 100,000 行）要一次插入，你也可以考虑使用[`SQLBulkCopy`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx). `SQLBulkCopy`特别适合在同一台服务器的不同表之间复制数据的场景。

# objective-c - NSScrollView 滚动不正确

> ID：15156328
> 
> 赞同：0
> 
> 时间：2013-03-01T11:11:52.457
> 
> 标签：objective-c, macos, scroll, nsscrollview

我`NSScrollView`在女巫里面`NSClipView`放着`NSOpenGLView`。例如，当我尝试向左滚动时。没关系。但是，如果我想滚动到底部，底部滚动条会向右跳。如果发生同样的情况：我滚动到底部，然后尝试滚动到左侧。侧滚动条跳到顶部。我的问题可能是什么？

PS我正在使用`AGCenteringClipView`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-24T00:01:55.027

AGCenteringClipView 中有一些东西会强制内容以某种对您来说是错误的方式对齐。没有代码和更深入的描述，很难给你答案。您是否正确设置了内容视图？

# variables - 主机的 Nconf 自定义对象变量

> ID：15156330
> 
> 赞同：0
> 
> 时间：2013-03-01T11:12:08.367
> 
> 标签：variables, nagios

我已经设置 Nagios 和 Nconf 来检查我们的网络，但我有一个我还没有解决的问题。如何将自定义对象变量 (_var-name) 添加到主机？我有许多需要自定义变量的自定义检查。

例如：输出将是

```
define host{
    use                     generic-host            
    host_name               my-host-name
    alias                   my-host-name-alias
    address                 my-host-name.com
    _SSHUSER                ausername                               <- How do I add this i NConf
    _CONNECTIONSTRING       "jdbc:mysql://my-host-name.com/db_name" <- And this?
    hostgroups              Linux
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-27T09:51:37.920

您可以向主机定义添加额外的属性，然后指示 NConf 将这些属性写入或不写入生成的配置。

请参阅 NConf 管理/属性 - 添加

```
Nagios-specific attribute name: _SSHUSER
Friendly name: ssh user on host
Attribute belongs to class: host
attribute is visible?: yes
write attribute to configuration?: yes 
```

提交

在此过程之后，编辑您定义的主机，您应该会找到“ssh 用户”属性。用相关数据填充它并生成 Nagios 配置。新属性将包含在其中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T05:55:29.037

如果没有一些相当大的修改，Nconf 不会这样做。我通常在 check_command 上输入选项作为参数。当然，这仅在您的 NRPE 服务器设置为允许将 args 传递给受监控的主机时才有效。

在 Nagios 中定义 check_command 时，不必仅使用命令的短名称。您可以向它传递参数 - 有些已经传递，例如 $HOSTNAME$。这些不必是 Nagios 的“宏”。这些通过 $ARG1$、$ARG2$ 等传递。

例如，在您的 service.cfg 文件中：

```
check_ping!myhost.mydomain.com!5.0 
```

请参阅（示例 2）[@http://nagios.sourceforge.net/docs/3_0/macros.html](http://nagios.sourceforge.net/docs/3_0/macros.html)

在上面的示例中，这些选项在“主机”定义中似乎不合适。它们看起来更像是服务器检查选项，mysql 是在“主机”上运行的“服务”。

# php - 我想将购物车详细信息插入 mysql 数据库，但它在 mysql 数据库中显示空白字段

> ID：15156339
> 
> 赞同：2
> 
> 时间：2013-03-01T11:12:34.720
> 
> 标签：php, mysql

我想将购物车详细信息插入 mysql 数据库，但它在 mysql 数据库中显示空白字段

**这是我的页面代码**

```
<?php 
include('config.php');
$id=$_REQUEST['id'];
include("cart/db.php");
include("cart/functions.php");
if($_REQUEST['command']=='delete' && $_REQUEST['id']>0){
remove_product($_REQUEST['id']);
}
else if($_REQUEST['command']=='clear'){
unset($_SESSION['cart']);
}
else if($_REQUEST['command']=='update'){ 
$max=count($_SESSION['cart']);
for($i=0;$i<$max;$i++){
$id=$_SESSION['cart'][$i]['id'];
$q=intval($_REQUEST['product'.$id]);
if($q>0 && $q<=999){
$_SESSION['cart'][$i]['qty']=$q;
}
else{
$msg='Some proudcts not updated!, quantity must be a number between 1 and 999';
}
}
}
if(isset($_REQUEST['order']))
{
$product=$_POST['product']; 
$queryproduct=mysql_query("INSERT INTO shoppingcart VALUES     ('','','','$product','','','','')") or die("Order  Query Problem");  

}
?> 
```

**这里是我的购物车表，我想插入到 Mysql 数据库表中**

```
<form name="form1" method="post">  
<input type="hidden" name="id" />
<input type="hidden" name="command" />  
<div class="main_content">
<div align="center">
<table style="background-color:#F0F0F0; border:solid 1px; width:800px;">
<?php
        if(is_array($_SESSION['cart'])){
            echo '<tr bgcolor="#FFFFFF" style="font-weight:bold"><td align="center"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Product Name</font></td><td align="center"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Product Image</font></td><td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Price</font></td><td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Qty</font></td><td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Amount</font></td><td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000;">Options</font></td></tr>';
            $max=count($_SESSION['cart']);
            for($i=0;$i<$max;$i++){
                $id=$_SESSION['cart'][$i]['id'];
                $q=$_SESSION['cart'][$i]['qty'];
                $product=get_product_name($id);
                $image=get_product_image($id);
                if($q==0) continue;
        ?>
                <tr bgcolor="#FFFFFF"><td align="center"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;"><?php echo $product?></font></td><td align="center"><img src="admin/uploads/small0_<?php echo $image?>" width="150" height="150"></td>
                <td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;">Rs.<?php echo get_price($id)?></font></td>
                <td><input type="text" name="product<?php echo $id?>" value="<?php echo $q?>" maxlength="3" size="2" /></td>                    
                <td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;">Rs.<?php echo get_price($id)*$q?></font></td>
                <td><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;"><a href="javascript:del(<?php echo $id?>)"><input type="button" class="button5" value="Remove" /></a></font></td></tr>
        <?php                   
            }
        ?>

            <tr><td colspan="6" align="right"><b><font style="font-family:Arial,Helvetica,sans-serif;  font-size:15px; color:#000;">Order Total: Rs.<?php echo get_order_total()?></font></b></td></tr>        
            <tr><td colspan="6" align="right"><font style="font-family:Arial,Helvetica,sans-serif;  font-size:14px; color:#000; !important">Cash On Delivery & Free Shipping</font></td></tr>  
            <tr><td colspan="6" align="right"><?php $query1=mysql_query("SELECT * FROM category ORDER BY id ") or die ('Product Query Problem');
            $row4=mysql_fetch_array($query1);$ids=$row4['id'];$cat_name=$row4['categories'];?><input type="button" class="button1" value="Continue Shopping"  onclick="window.location='product.php'" /><input type="button" class="button2"  value="Clear Cart" onclick="clear_cart()"><input type="button" class="button3" value="Update Cart" onclick="update_cart()"><input type="button" class="button4" name="order" id="order" value="Place Order" onclick="window.location='login.php'"></td></tr>
        <?php
        }
        else{
            echo "<tr bgColor='#FFFFFF'><td><font style='font-family:Arial,Helvetica,sans-serif; font-size:15px; color:#000;'>There are no items in your shopping cart!</font></td>";
        }
    ?>
    </table> 
```

**我从此页面从数据库中获取产品 ID 和全部**

```
<?php
 $id=$_REQUEST['id'];
function get_product_name($id){
    $result=mysql_query("select * from products where id='$id'") or die("select name from products where serial=$pid"."<br/><br/>".mysql_error());
    $row=mysql_fetch_array($result);
    return $row['product'];
}

function get_product_image($id){
    $result=mysql_query("select * from products where id='$id'") or die("select name from products where serial=$pid"."<br/><br/>".mysql_error());
    $row=mysql_fetch_array($result);
    return $row['image'];
}

function get_price($id){
    $result=mysql_query("select * from products where id='$id'") or die("select name from products where serial=$pid"."<br/><br/>".mysql_error());
    $row=mysql_fetch_array($result);
    return $row['price'];
}
function remove_product($id){
    $id=intval($id);
    $max=count($_SESSION['cart']);
    for($i=0;$i<$max;$i++){
        if($id==$_SESSION['cart'][$i]['id']){
            unset($_SESSION['cart'][$i]);
            break;
        }
    }
    $_SESSION['cart']=array_values($_SESSION['cart']);
}
function get_order_total(){
    $max=count($_SESSION['cart']);
    $sum=0;
    for($i=0;$i<$max;$i++){
        $id=$_SESSION['cart'][$i]['id'];
        $q=$_SESSION['cart'][$i]['qty'];
        $price=get_price($id);
        $sum+=$price*$q;
    }
    return $sum;
}
function addtocart($id,$q){
    if($id<1 or $q<1) return;

    if(is_array($_SESSION['cart'])){
        if(product_exists($id)) return;
        $max=count($_SESSION['cart']);
        $_SESSION['cart'][$max]['id']=$id;
        $_SESSION['cart'][$max]['qty']=$q;
    }
    else{
        $_SESSION['cart']=array();
        $_SESSION['cart'][0]['id']=$id;
        $_SESSION['cart'][0]['qty']=$q;
    }
}
function product_exists($id){
    $id=intval($id);
    $max=count($_SESSION['cart']);
    $flag=0;
    for($i=0;$i<$max;$i++){
        if($id==$_SESSION['cart'][$i]['id']){
            $flag=1;
            break;
        }
    }
    return $flag;
} 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:14:48.610

在这里，您没有命名的输入文本`product`，因此您 `$_POST['product']`将始终为空。所以它在数据库中被添加为空

更改`$product`为`$q`将插入值：

`$queryproduct=mysql_query("INSERT INTO shoppingcart VALUES ('','','','$product','','','','')") or die("Order Query Problem");`

# ios - 将手势传递给 View 在 z 轴上的排列

> ID：15156348
> 
> 赞同：3
> 
> 时间：2013-03-01T11:13:11.410
> 
> 标签：ios, cocoa-touch

这是我的代码....

```
UIView *View1 = [[UIView alloc] initWithFrame:CGRectMake(0, 300, 1000, 150)];
UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(callTap)];
[View1 addGestureRecognizer:tap];
view1.userInteractionEnabled = true;
view1.layer.zPosition=1;
[self.view addSubview:view1];

UIView *View2 = [[UIView alloc] initWithFrame:CGRectMake(0, 300, 1000, 150)];
UIPinchGestureRecognizer *pinch = [[UIPinchGestureRecognizer alloc] initWithTarget:self action:@selector(callPinch)];
[View2 addGestureRecognizer:pinch];
View2.userInteractionEnabled= true;
View2.layer.zPosition=2;
[self.view addSubview:View2];

UIView *View3 = [[UIView alloc] initWithFrame:CGRectMake(0, 300, 1000, 150)];
UIPanGestureRecognizer *pan = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(callPan)];
[View3 addGestureRecognizer:pan];
View3.userInteractionEnabled=true;
View3.layer.zPosition=3;
[self.view addSubview:View3]; 
```

我想让视图只识别代码中添加的单个手势并将其他手势传递给下面的视图....
如何实现此功能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-04T09:22:56.227

这个问题很容易回答......
当在 ios 中识别手势时，最顶层的视图总是会收到用户的触摸，所以手势识别取决于你的子视图是如何堆叠的，这意味着它在 SuperView 的属性中是如何排列的命名子视图....如果多个子视图保持屏幕的相同接触点，则子视图中具有较高索引值的视图将获得触摸..通常具有较高索引值的视图也将在其他视图之上可见....

当涉及到 ZPosition 时，它会变得很有趣。将 ZPosition 更改为更高的值会使视图可见，而不会对索引位置进行任何更改。所以在这种情况下，索引零上的子视图也可能完全可见，但它没有这意味着它将接收所有的触摸，因为它仍然在零索引上......如果你想让零索引子视图接收所有的触摸，那么使用 UIView 类的方法将它置于其他之上.. ...
不要同时使用 Gesture 和 ZPosition，这可能会使用户在与您的应用程序交互时感到困惑。

# javascript - 如何刷新简单的验证码

> ID：15156354
> 
> 赞同：2
> 
> 时间：2013-03-01T11:13:29.817
> 
> 标签：javascript, ajax, captcha, simplecaptcha

我在 Eclipse IDE 的库中有 simplecaptcha 1.2.1 jar 文件，并且工作正常。没有刷新验证码的选项，所以我添加了以下代码，但它不起作用。

```
function refreshCaptcha()
 {
     var xmlhttp;
     if (window.XMLHttpRequest)
       {
       xmlhttp=new XMLHttpRequest();
       }
     else
       {
       xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
       }
     xmlhttp.onreadystatechange=function()
       {
       if (xmlhttp.readyState==4)
         {
         if(xmlhttp.status==200)
          {
          alert(xmlhttp.responseText);                  
         document.getElementById("captcha").innerHTML=xmlhttp.responseText;
         }
         }
       }
     xmlhttp.open("GET","captchaImg",true);
     xmlhttp.send();
 } 
```

我的html部分是

```
 <img src="captchaImg" id="captcha"/>
        <img src="resources/images/refresh.jpeg" onclick="refreshCaptcha()"/> 
```

我收到的警报中的响应是这样的--PNGIHDR.2.3.j

“captchaImg”作为 URL 模式添加到我在 web-xml 中的 servlet-mapping 中。谁能帮助我如何刷新验证码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T05:44:42.897

不需要任何ajax调用我只是添加了这段代码

```
onclick="document.getElementById('captcha').src='captchaImg?'+
         (new Date().getTime());" 
```

这件事是最重要的一个：?'+(new Date().getTime());

# ruby-on-rails - Rails 路由错误：action => 'new' 在控制器中返回错误“No route matches {:action=>”show”

> ID：15156356
> 
> 赞同：1
> 
> 时间：2013-03-01T11:13:33.733
> 
> 标签：ruby-on-rails, rest, rails-routing, link-to

模型“项目”是由脚手架生成的。

config/routes.rb 包含行资源 :projects。

我有一个从索引视图到 new_project_path 的链接。

问题在于 /new 的链接。url application/project/new 有以下错误：

没有路线匹配 {:action=>"show", :controller=>"projects"}

以前可以用，现在不行了，不知道为什么。有任何想法吗？

```
class ProjectsController < ApplicationController
  # GET /projects
  # GET /projects.json
  def index
    @projects = Project.paginate(:page=>params[:page],:per_page=>15)

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @projects }
    end
  end

  # GET /projects/1
  # GET /projects/1.json
  def show
    @project = Project.find(params[:id])
    @tasks=@project.tasks.paginate(:page=>params[:page],:per_page=>15)

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @project }
    end
  end

  # GET /projects/new
  # GET /projects/new.json
  def new
    @project = Project.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end
  end

  # GET /projects/1/edit
  def edit
    @project = Project.find(params[:id])
  end

  # POST /projects
  # POST /projects.json
  def create
    @project = Project.new(params[:project])

    respond_to do |format|
      if @project.save
        format.html { redirect_to projects_path, notice: 'Project was successfully created.' }
        format.json { render json: @project, status: :created, location: @project }
      else
        format.html { render action: "new" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /projects/1
  # PUT /projects/1.json
  def update
    @project = Project.find(params[:id])

    respond_to do |format|
      if @project.update_attributes(params[:project])
        format.html { redirect_to @project, notice: 'Project was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @project.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /projects/1
  # DELETE /projects/1.json
  def destroy
    @project = Project.find(params[:id])
    @project.destroy

    respond_to do |format|
      format.html { redirect_to projects_url }
      format.json { head :no_content }
    end
  end

  def sort_tasks
    project = Project.find(params[:id])
    tasks = project.tasks
    tasks.each do |task|
      task.position = params['task'].index(task.id.to_s) + 1
      task.save
    end
    render :nothing => true
  end

end 
```

路线.rb：

```
Taska::Application.routes.draw do
  resources :projects
  resources :tasks

  root :to => 'projects#index'

  match ':controller(/:action(/:id))(.:format)'
end 
```

_form.html.erb：

```
<%= form_for @project, :html => { :class => 'form-horizontal' } do |f| %>
  <div class="control-group">
    <%= f.label :title, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_field :title, :class => 'text_field' %>
    </div>
  </div>
  <div class="control-group">
    <%= f.label :description, :class => 'control-label' %>
    <div class="controls">
      <%= f.text_area :description, :class => 'text_area', rows: 5 %>
    </div>
  </div>

  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                project_path(@project), :class => 'btn' %>
  </div>
<% end %> 
```

index.htm.erb：

```
<%- model_class = Project -%>
<div class="page-header">
  <h3><%=t '.title', :default => model_class.model_name.human.pluralize %></h3>
  <%= link_to t('.new', :default => t("helpers.links.new")),
              new_project_path,
              :class => 'btn btn-primary' %>
</div>

<table class="table table-striped">
  <thead>
    <tr>
      <th><%= model_class.human_attribute_name(:title) %></th>
      <th>Tasks count</th>
      <th>Updated at</th>
    </tr>
  </thead>
  <tbody>

    <% @projects.each do |project| %>
      <tr>
        <td><%= link_to project.title, project_path(project) %></td>
        <td><%= project.tasks.size %></td>
        <td><%= project.updated_at %></td>
      </tr>

    <% end %>

  </tbody> 

</table>
<%= will_paginate @projects %> 
```

显示.html.erb：

```
<%- model_class = Project -%>
<div class="page-header">
  <h1><%=t '.title', :default => @project.title %></h1>
  <h4><%= @project.description %></h4>
  <%= link_to t('.edit', :default => t("helpers.links.edit")),
                      edit_project_path(@project), :class => 'btn btn-primary' %>
          <%= link_to t('.destroy', :default => t("helpers.links.destroy")),
                      project_path(@project),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure?')) },
                      :class => 'btn btn-primary btn-danger' %>

<h2>Tasks:</h2>

<%= link_to t('.new', :default => t("helpers.links.new")),
            new_task_path(:project_id => @project),
            :class => 'btn btn-primary' %>
</div>

<table class="table table-striped">
  <thead>
  <tr>
    <th></td>
    <th><%= model_class.human_attribute_name(:type) %></th>
    <th><%= model_class.human_attribute_name(:title) %></th>
    <th><%= model_class.human_attribute_name(:status) %></th>
    <th><%= model_class.human_attribute_name(:updated_at) %></th>
  </tr>
  </thead>
  <tbody id="tasks_list">
  <% @tasks.each do |task| %>
      <tr id="task_<%= task.id %>" class="handle" >
        <td><%= link_to "open task",task_path(task) %></td>
        <td><%= task.type.name %></td>
        <td><%= task.title %></td>
        <td><%= task.status.name %></td>
        <td><%= task.updated_at %></td>
      </tr>
  <% end %>
  </tbody>
</table>
<%= will_paginate @tasks %>
<input type="hidden" id="project_id" value='<%=@project.id%>'> 
```

新的.html.erb：

```
<%- model_class = Project -%>
<div class="page-header">
  <h1>New project</h1>
</div>
<%= render :partial => 'form' %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:25:58.983

你可能想写`_form.html.rb`：

```
 ...
  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
                projects_path, :class => 'btn' %>
  </div>
<% end %> 
```

（更改`project_path(@project)`为`projects_path`将您带到索引页面。）

您试图链接到不在数据库中的对象的显示页面。错误信息想说的是“你告诉我链接到显示页面，但我没有 id”。我承认这很令人困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:21:34.697

您是否尝试过重新启动服务器？

如果您想确定是否出现了某些路由或您可以使用哪些路由，请在控制台中运行：

```
rake routes 
```

如果它列出了到项目/节目的路线，那么您可能只需要重新启动服务器。但如果不是，则问题可能出在拼写上，或者即使您更改`match`了路线

**编辑**

我刚刚注意到，在您的项目控制器内的新操作中，您已将响应

```
respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @project }
    end 
```

删除那些行。它应该看起来像：

```
def new
    @project = Project.new

end 
```

**编辑2：**

我意识到你想做什么。如我所见，您是初学者，因此我可以假设您想在新操作中创建新对象，然后将其转移到新形式，然后在单击“取消”时返回新项目，但这不是rails功能。您不应在操作中使用 @project 对象并将其响应 html。并且`@project`从新动作中使用它会导致所有问题。从行动中移除`@project`，以及在新行动中对 @project 的所有使用（也在视图中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:34:52.883

正如克里斯所指出的，您的取消链接指向错误的操作，并且它正在寻找不存在的 /projects/show 。

“show”的格式为projects/:id/show，恰好是成员路由。Show 是成员类型的继承资源。那是错误！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-19T09:38:18.673

如果您的“_form.html.rb”也被“edit.html.erb”使用，您可以重写如下：

```
 ...
  <div class="form-actions">
    <%= f.submit nil, :class => 'btn btn-primary' %>
    <%= link_to t('.cancel', :default => t("helpers.links.cancel")),
            (@project.id.nil? ? projects_path : project_path(@project)), :class => 'btn' %>
  </div>
<% end %> 
```

如果您编辑表`projects`中 id = 10020 的现有记录，则 url helper`project_path(@project)`可以生成

```
<a href="/projects/10020" class="btn">Cancel</a> 
```

在 html 中。

如果您正在创建新的，url helper`projects_path`可以生成

```
<a href="/projects" class="btn">Cancel</a> 
```

在 html 中。

# mfc - 如何在基于 mfc 对话框的应用程序中将选项卡添加到 tabcontrol 并在对话框中间显示选项卡

> ID：15156357
> 
> 赞同：1
> 
> 时间：2013-03-01T11:13:38.117
> 
> 标签：mfc, dialog, tabcontrol

我正在基于 mfc 对话框的应用程序中设计一个桌面应用程序。如何使用 tabcontrol 以及如何在创建后在每个选项卡内添加控件。请帮帮我，我是新手......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T11:16:52.427

如果您有其他开发环境（如 C++ Builder、VB、Delphi、.Net 等）的经验，您会非常失望地发现 MFC 中的选项卡控件仅仅是它，只是选项卡控件。它的行为不像一组“面板”。这意味着如果您将其他控件放在对话框上，它们将属于对话框，但不属于选项卡控件的“页面”（即使您使选项卡控件与对话框一样大）。

如果您在“每个页面”上只有几个控件，则可以将它们全部放在对话框中，并在标签页之间切换时隐藏/显示它们。

如果控件的数量很大，您可能需要在代表每个页面的资源中创建单独的对话框。然后，您将使用选项卡控件创建主对话框的“子”子对话框，并将隐藏/显示整个子对话框

# php - Zendframework 2 使用静态方法调用服务

> ID：15156362
> 
> 赞同：2
> 
> 时间：2013-03-01T11:14:08.487
> 
> 标签：php, events, zend-framework2

在控制器中，我可以使用此代码调用服务

```
$this->getServiceLocator()->get('MyServiceName'); 
```

它工作得非常酷。

我在 zf2 中创建了一个自定义库。（/vender/API）我需要访问使用静态方法加载的所有服务。（如果可能的话）仅举个例子。
我创建了这个自定义类。（这个（自定义）类的想法不同，它必须是独立的）

```
class Test extends AbstractModel {
    protected $identifier;
    protected $fullName;
    protected $someText;

    public function getService(){

    }
} 
```

如何使用静态方法/或我在课堂上不知道的东西来调用加载的服务？
谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:01:21.237

不要那样做！之前已经讨论过，你最终可以阅读[邮件列表上的讨论](http://zend-framework-community.634137.n4.nabble.com/Fundamental-question-Why-isn-t-the-service-manager-super-global-td4659184.html)，其中也有一些很好的例子。

假设您的类`Test`出于某种原因需要访问服务定位器，正确的方法是使用服务定位器将其实例化为硬依赖：

```
use Zend\ServiceManager\ServiceLocatorInterface;

class Test extends AbstractModel
{
    // ...

    public function __construct(ServiceLocatorInterface $serviceLocator)
    {
        $this->serviceLocator = $serviceLocator;
    }

    public function doFoo()
    {
        return $this->serviceLocator->get('FooService')->foo();
    }

    // ...
} 
```

这样，您可以使用它来实例化它`$test = new Test($serviceLocator);`或在工厂中定义它，并让服务定位器本身为您提供一个实例：

```
namespace MyApp;

use Zend\ModuleManager\Feature\ServiceProviderInterface;

class Module implements ServiceProviderInterface
{
    public function getServiceConfig()
    {
        return array(
            'factories' => array(
                'Test' => function ($serviceLocator) {
                    return new \Test($serviceLocator);
                },
            ),
        );
    }
} 
```

这基本上使服务`'Test'`在您的应用程序中可用。

无论如何，您刚刚创建的内容有两个大缺陷：

*   在使用服务位置时，您应该注意一些陷阱。由于其性质，这是[服务位置本身的问题：](http://en.wikipedia.org/wiki/Service_locator_pattern)

    1.  您将代码绑定到服务定位器，而检索其他服务的实例可能不是您的类的问题。如果它们定义明确且始终相同，则注入它们
    2.  您在类中使用字符串作为服务名称。这使得将您的代码移植到服务名称可能完全不同的另一个应用程序变得非常困难
    3.  您的代码可能由于服务定位器故障（未找到服务）而失败。仅在需要时才访问服务这一事实可能会延迟此故障。在复杂的应用程序上进行调试可能并非易事
*   您在此尝试在模型/实体中使用服务（和服务定位器）。这种误解/误用可能是因为您习惯了[活动记录模式](http://en.wikipedia.org/wiki/Active_record_pattern)，其中许多逻辑是表示 DB 记录的对象的一部分，就像`Zend_Db`在 ZF1 中一样。由于 ZF2 中的服务很容易定义和使用，所以请在服务中移动这样的逻辑。您上面描述的是一个更像值对象或实体的类，不应包含复杂的业务逻辑。

如果您有兴趣，我还写了一篇关于[为什么应该使用使用 IOC 而不是服务位置](http://ocramius.github.com/blog/zf2-and-symfony-service-proxies-with-doctrine-proxies/)的博文（第二段描述了服务位置的陷阱）。

# android - 如何检查系统应用程序是否可以像普通应用程序一样被卸载？

> ID：15156368
> 
> 赞同：2
> 
> 时间：2013-03-01T11:14:26.363
> 
> 标签：android, root, uninstallation

## 背景

我正在尝试了解查询应用程序信息、安装如何工作以及系统应用程序如何运行。我正在尝试制作一个应用程序，以阐明哪些应用程序可以卸载，即使它们是系统应用程序。

## 问题

其实我想问2个与标题相关的问题：

1.  给定系统应用程序的包名称，我怎么知道可以使用正常方式（而不是使用 root）卸载它？

2.  由于我不想弄乱应用程序并且我想做一些实验，假设我的应用程序具有 root 权限并且我希望它安装另一个应用程序作为系统应用程序，但还要选择是否应该允许它被卸载了，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:02:36.927

系统应用程序`/system/app`在构建 Android 操作系统期间添加到文件夹中。`/system`Android 中的分区以只读方式挂载。因此，如果您没有 root，则无法删除任何系统应用程序。

如果您想安装具有 root 权限的新应用程序，我建议您尝试以下方式：

1.  将您的`/system`分区重新挂载为读写。
2.  将应用程序的 apk 文件复制到`/system/app`文件夹中。
3.  将您的分区重新挂载为只读。

将应用程序 apk 文件复制到`/system/app`文件夹中会产生安装此应用程序的副作用。

# android - 如何在android中为动态创建的按钮添加左边距

> ID：15156369
> 
> 赞同：1
> 
> 时间：2013-03-01T11:14:31.533
> 
> 标签：android, android-button, margins

动态按钮代码：

```
final Button button = new Button(this);
LinearLayout l = new LinearLayout(this);
l.setOrientation(LinearLayout.HORIZONTAL);
Resources resources = SecondActivity.this.getResources();  
Drawable drawable = resources.getDrawable(R.drawable.buttonpg);
button.setBackgroundDrawable(drawable);
button.setText(String.valueOf(i));
button.setText(" " + nameArray[i]);
button.setId(i);
button.setWidth(180);
button.setHeight(60);

button.setTextColor(Color.rgb(255,69,0));
button.setTypeface(Typeface.SANS_SERIF, Typeface.BOLD_ITALIC);
button.setGravity(Gravity.CENTER); 
```

如何为此按钮添加 Margintop ....

谢谢你的帮助....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:17:51.017

使用代码

```
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams( 
LinearLayout.LayoutParams.FILL_PARENT, LinearLayout.LayoutParams.WRAP_CONTENT);
layoutParams.setMargins(30, 20, 30, 0);button.setLayoutParams(params); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:18:00.520

```
final Button button = new Button(this);
LayoutParams params = new LayoutParams(
    LayoutParams.WRAP_CONTENT,      
    LayoutParams.WRAP_CONTENT
);
params.setMargins(left, top, right, bottom);
button.setLayoutParams(params); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:19:01.040

您可以创建一个实例`LinearLayout.LayoutParams`，为属性赋值`topMargin`并将该实例设置为按钮。希望有所帮助。

# wcf - 如何控制 WWF 接收活动的调用顺序

> ID：15156370
> 
> 赞同：0
> 
> 时间：2013-03-01T11:14:33.040
> 
> 标签：wcf, workflow-foundation-4, workflow-foundation

我有一个 3 的流程图`ReceiveActivity`。

例如 `ReceiveActivity1(StartProcess)->ReceiveActivity2(ApproveByBoss)->ReceiveActivity3(FinalizeProcess)`

`FinalizeProcess`当通过 WCF 调用方法但`ApproveByBoss`从未为特定的工作流实例调用方法时，是否有任何方法可以“教导”工作流存在一些特殊行为（例如抛出异常） ？

当然，可以删除一个自定义活动，该活动将在 Receive 触发后验证一些“预期的”持久状态。但我认为它使工作流程修改不那么灵活。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:01:03.767

并非没有弄乱你的WF。但是你可以看看这个：

[http://blogs.msdn.com/b/routingrules/archive/2009/12/30/routing-service-features-error-handling-part-2.aspx](http://blogs.msdn.com/b/routingrules/archive/2009/12/30/routing-service-features-error-handling-part-2.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:31:57.220

> Is there any way to "teach" workflow that there is some special behavior (for example Exception thrown) when FinalizeProcess method is called via WCF but ApproveByBoss was never called for specific workflow instance?

How can you proceed to `FinalizeProcess` if `ApproveByBoss` is not finished. The WF will throw exception if implemented properly. In order to achieve your requirement you have to use [Correlation](http://msdn.microsoft.com/en-us/library/ee358754.aspx). Check [this nice article](http://www.codeproject.com/Articles/50820/Establishing-Correlation-Between-Multiple-RECEIVE).

# asp.net-mvc-4 - 使用 ASP.NET MVC WEB API 项目进行 MVC 万无一失的验证

> ID：15156371
> 
> 赞同：2
> 
> 时间：2013-03-01T11:14:35.417
> 
> 标签：asp.net-mvc-4, asp.net-web-api, foolproof-validation

似乎万无一失的验证不适用于 WEB API：

```
// POST api/values
public void Post(MyModel model)
{
}    

public class MyModel
{
    public int Id { get; set; }
    public bool Condition { get; set; }
    [RequiredIfFalse("Condition")]
    public string Title { get; set; }
} 
```

提琴手：

```
User-Agent: Fiddler
Content-Type: application/json; charset=utf-8
Host: localhost:3858
Content-Length: 24

{Id: 1, Condition: true} 
```

回复：

```
{"Message":"An error has occurred.","ExceptionMessage":"The method or operation is not implemented.","ExceptionType" 
```

相同的代码适用于经典的 MVC 4 模板。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T11:30:13.893

不，它不会...

[从这里](http://foolproof.codeplex.com/SourceControl/changeset/view/94877#1510399)快速查看源代码，`FoolproofValidator`它通过继承与 System.Web.Mvc 命名空间相关联，`System.Web.Mvc.DataAnnotationsModelValidator`因此该库不适用于 WebApi。

有一个[`DataAnnotationsModelValidator`](http://msdn.microsoft.com/en-us/library/system.web.http.validation.validators.dataannotationsmodelvalidator%28v=vs.108%29.aspx)for`System.Web.Http`所以它可能可以被移植，但我在项目站点上看不到已经完成的分支或版本。

# uml - 将序列图转换为类图

> ID：15156372
> 
> 赞同：4
> 
> 时间：2013-03-01T11:14:35.213
> 
> 标签：uml

我必须找到一个转换图表的工具，例如，当我为序列程序建模时，我希望它自动生成对应的类图。

我被告知不存在。如果没有办法找到，我希望你能给我一些想法如何创建它。

谢谢你 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:21:21.240

没有办法从序列图自动生成类图；正如@rai.skumar 所说，它们用于不同的目的。

**为什么不能从序列图自动生成类图？**

在开发过程中，类图主要出现在两个阶段：**项目分析**和**架构项目**。最后一个紧跟在第一个之后（即它们之间没有其他“官方”阶段）。

在**项目分析**阶段，您将获得用例 (UC) 描述，您可以从中确定哪些类将出现在每个 UC 的项目中；他们的职责和关系尚未确定。一旦你有了它，你就可以为每个 UC创建一个**序列图，识别类关系和属性，为你提供****类分析图**。

类**分析图**可以从**序列图**中自动生成，因为它是直接映射。**尽管一旦进入下一个阶段，即架构项目**，它就不会很有用，因为您将通过删除冗余、添加**项目模式**等来修改**类分析图。**

 **为了记录，[协作图](http://en.wikipedia.org/wiki/Communication_diagram)（或通信图）通常由许多软件（例如[IBM 的 Rational Rose ）从](http://www-01.ibm.com/software/awdtools/developer/rose/)**序列图自动生成**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T11:17:36.503

是的; 你被告知是正确的。

`Class Diagram and Sequence diagrams`服务于不同的目的，它们相互补充。因此，从另一个生成一个并不容易。

如果您有代码（即类），那么您可以生成类图但不能使用序列图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T11:51:39.437

我不了解工具，但是您可以很容易地从序列图中手动生成类图（至少是基本的类图）（您也可以实现自己的解决方案）。

基本上，每个泳道都代表一个特定类型的对象，所以这里是你的类。此外，泳道之间的消息可以（取决于消息的类型）表示对操作的调用。您还将获得参数和返回类型，因此您可以获得完整的操作签名——前提是您的序列图提供了所有信息。**

# android - 如何将“虚拟”/“阴影”组添加到 SimpleCursorTreeAdapter？

> ID：15156374
> 
> 赞同：4
> 
> 时间：2013-03-01T11:14:40.393
> 
> 标签：android, listadapter, inject

我有一个关于我在项目中子类化的 SimpleCursorTreeAdapter 的问题。它目前通过 ContentProvider 与 SQLite-DB 通信。现在，我有一个问题，我想插入后端 ContentProvider/DB 中不存在的某种“影子”或“虚拟”组。

我可以想象这有两种可能——我只是无法弄清楚细节。我们要么在内部找到绘制和列出 SimpleCursorTreeAdapter 组的实际方法，要么实现一个行为类似于 SQliteCursor 的自定义 Cursor，除了它返回 ColumnCount+1 并在查询时为该“虚拟”组附加一个“虚拟”元素...

有没有人已经做过这样的事情，或者可能知道如何解决这个不那么脏的黑客？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:06:04.740

> ...或者我们实现一个行为类似于 SQliteCursor 的自定义游标，除了它返回 ColumnCount+1 并在查询时为该“虚拟”组附加一个“虚拟”元素...

或者你在适配器级别实现它，欺骗它认为`Cursor`基于的有一个额外的行。我写了一个例子（一个简单的场景），但它需要工作：

```
public class ExtraGroupAdapter extends SimpleCursorTreeAdapter {

    private Cursor mExtraChildCursor;       

    @Override
    protected Cursor getChildrenCursor(Cursor groupCursor) {
        // if groupCursor.getPosition() returns -1 we have to provide the Cursor for our fake group
    }

    @Override
    public int getGroupCount() {
        // 1 more
        return super.getGroupCount() + 1;
    }

    @Override
    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        if (groupPosition == 0) {
            if (getCursor() == null) {
                throw new IllegalStateException(
                        "this should only be called when the cursor is valid");
            }
            View v;
            if (convertView == null) {
                v = newGroupView(mContext, getCursor(), isExpanded, parent);
            } else {
                v = convertView;
            }
            // if it's position 0 move the group Cursor to position -1 to
            // let the bindGroupView method that is deals with our fake row
            getCursor().moveToPosition(-1);
            bindGroupView(v, mContext, getCursor(), isExpanded);
            return v;
        } else {
            return super.getGroupView(groupPosition - 1, isExpanded,
                    convertView, parent);
        }
    }

    @Override
    protected void bindGroupView(View view, Context context, Cursor cursor,
            boolean isExpanded) {
        if (cursor.getPosition() == -1) {
            // bind our fake row, unfortunately this must be done manually
        } else {
            super.bindGroupView(view, context, cursor, isExpanded);
        }
    }

    @Override
    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        if (groupPosition == 0) {
            // replicate what the CursorTreeAdapter does for our fake group
            // position 0
            if (getCursor() == null) {
                throw new IllegalStateException(
                        "this should only be called when the cursor is valid");
            }
            View v;
            getCursor().moveToPosition(-1);
            mExtraChildCursor.moveToPosition(childPosition);
            if (convertView == null) {
                v = newChildView(mContext, mExtraChildCursor, isLastChild,
                        parent);
            } else {
                v = convertView;
            }
            bindChildView(v, mContext, mExtraChildCursor, isLastChild);
            return v;
        } else {
            // use the default implementation but offset the Cursor's
            // current position
            return super.getChildView(groupPosition - 1, childPosition,
                    isLastChild, convertView, parent);
        }
    }

    @Override
    public int getChildrenCount(int groupPosition) {
        if (groupPosition == 0) {
            // implement the trick
            if (mExtraChildCursor == null) {
                getCursor().moveToPosition(-1); // in the getChildrenCursor
                                                // a Cursor position of -1
                                                // means it is the fake row
                mExtraChildCursor = getChildrenCursor(getCursor());
                return 0;
            } else {
                return mExtraChildCursor.getCount();
            }
        }
        return super.getChildrenCount(groupPosition);
    }

    @Override
    public void setChildrenCursor(int groupPosition, Cursor childrenCursor) {
        if (groupPosition == 0) {
            // hold a reference to the extra Cursor
            mExtraChildCursor = childrenCursor;
            notifyDataSetChanged();
        } else {
            super.setChildrenCursor(groupPosition, childrenCursor);
        }
    }

} 
```

我应该按照为简单场景设计的`CursorTreeAdapter`那样进行扩展。`SimpleCursorTreeAdapter`我写的是放置在位置 0 的假行（但经过仔细计算，可以使用不同的位置）。

# python - 使用 Xpath 单击页面上的所有元素会导致 ElementNotVisibileException

> ID：15156375
> 
> 赞同：1
> 
> 时间：2013-03-01T11:14:45.993
> 
> 标签：python, selenium

我有一个帮助函数来浏览页面并打开它找到的每个帮助按钮。它既好又简单；

```
def openHelp(ff):
    """
    Opens all the help buttons on the screen
    @type ff: instance of webdriver
    @param ff: firefox instance of webdriver
    """
    allHelpButtons = ff.find_elements_by_xpath('//a[@class="helpButton"]')
    for helpButton in allHelpButtons:
        helpButton.click() 
```

但是，在某些页面上，帮助按钮及其相应的字段可能会被 javascript 隐藏，这似乎是导致`ElementNotVisibileException`Selenium 尝试单击这些隐藏按钮的原因。

每个帮助按钮在标记中的显示都是一样的，没有`display:none`应用，所以我不能这样检查。它们是这样出现的；

```
<a class="helpButton" title="Help about: Field" href="#">
    <img alt="Help about: Field" src="/static/images/helpIcon.png">
</a> 
```

如果存在此异常，我假设必须有一种方法可以用来检查元素是否可见。理想情况下，我只想将所有可见元素收集到我的`allHelpButtons`列表中，但我找不到任何文档。我可以对我的 xpath 搜索进行检查，还是必须在收集元素后对其进行检查？

*奖金问题*

我还想知道，是否可以通过匹配名称和值来选择列表项。例如，我在页面中将 Yes/No 单选按钮选择定义为`ul`;

```
<ul class="compact horizontal ">
    <li>
        <input id="id_fieldname_0_true" type="radio" value="True" name="fieldname">
        <label for="id_fieldname_0_true">Yes</label>
    </li>
    <li>
        <input id="id_fieldname_0_false" type="radio" value="False" name="fieldname">
        <label for="id_fieldname_0_false">No</label>
    </li>
</ul> 
```

显然 id 是唯一的，但我宁愿能够使用选择器来挑选“名称”和“值”，因为我认为这样可以更容易地制作可以传递值的通用选择器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:15:48.420

有一个`is_displayed`功能。

检查下面的源代码，第 162 行：

[https://code.google.com/p/selenium/source/browse/py/selenium/webdriver/remote/webelement.py](https://code.google.com/p/selenium/source/browse/py/selenium/webdriver/remote/webelement.py)

至于您的奖励问题，这也是由 XPath 完成的，单击 Yes 按钮单选：

```
//label[text()='Yes']/preceding-sibling::input 
```

和否：

```
//label[text()='No']/preceding-sibling::input 
```

# sql - 如何对子查询进行这些查询？

> ID：15156376
> 
> 赞同：0
> 
> 时间：2013-03-01T11:14:47.523
> 
> 标签：sql, subquery, inner-query

如何将其变成单个查询。我制定了以下查询：

```
$msgs=mysql_query("select m.subject, m.msg from message as m, message_users as mu where m.id=mu.msg_id and mu.user_id=$u_id order by dateof_msg desc");
while($row1=mysql_fetch_array($msgs))
{
        $total_msg = $row1['msg'];
        $own_id = mysql_query("select owner_id from message where msg='$total_msg' ");
        while($o_id=mysql_fetch_array($own_id))
        {
            $owners_id = $o_id['owner_id'];
            $uname = mysql_query("select name from users where id='$owners_id'");

            while($username=mysql_fetch_array($uname))
            {
                $sen_name = $username['name'];
                echo $sen_name."&nbsp;&nbsp;".$owners_id."&nbsp;&nbsp;&nbsp;&nbsp;".$total_msg."<br />";
            }
        }
} 
```

由于查询的长度，它运行得非常慢。

我现在像这样编辑了代码，但它说 mysql_fetch_array() 除了参数 1 是给定的资源布尔值...

```
$userlist = mysql_query("select m.subject, m.msg, m.owner_id, u.name, u.id, mu.msg_id, mu.user_id  from message as m, message_users as mu, users as u
                                     m inner join u on (m.owner_id = u.id)
                                     m inner join mu on(m.id=mu.msg_id) and
                                     where mu.user_id='$u_id' order by dateof_msg desc") or mysql_error();
                while($row=mysql_fetch_array($userlist))
                {
                    $sendername = $row['name'];
                    echo $sendername;
                } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:21:31.650

试试这个查询

```
select m.subject, m.msg, m.owner_id, u.name 
from message as m, message_users as mu, users as u 
where m.id=mu.msg_id and mu.user_id=<userId> and msg=<MESSAGE> and u.id = mu.userId
order by dateof_msg desc 
```

我已加入所有表格，以便返回所有必要的字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:24:54.707

试试这个查询：

```
select m.subject, m.msg, m.owner_id, users.name 
from message as m, message_users as mu 
   inner join users on (message.owner_id =  users.id)
where m.id=mu.msg_id and mu.user_id=$u_id order by dateof_msg desc 
```

如果您向我解释您想做什么，我可以改进答案：message_users 和消息表的结构是什么，为什么要同时加入它们？

编辑：这个呢？

```
select m.id, m.subject, m.msg, owner.id, 
    owner.name, receivers.id, receivers.name
from message as m
    inner join message_users as mu on (m.id = mu.msg_id)
    inner join users as owner on (m.owner_id = owner.id)
    inner join users as receivers on (m.user_id = receivers.id)
where receivers.user_id=$u_id 
order by dateof_msg desc 
```

问题是您将为每条消息和每个接收者获得一行，但使用 PHP 您可以对信息进行分组（比循环中的 3 个查询更有效）

# vb.net - 如何将类型传递给泛型类型？

> ID：15156379
> 
> 赞同：3
> 
> 时间：2013-03-01T11:14:54.180
> 
> 标签：vb.net, generics, types

我在使用泛型类型时遇到了一些困难。我们有一个反序列化方法，其签名如下所示：

```
Public Function Deserialize(Of T)(ByVal compressedData As Byte()) As T 
```

我们在数据库中有一些二进制数据（可以是几种类型：type1.Question，type2.Question，...）。所以为了防止不得不`Select case`在我的循环中，我尝试了这样的事情：

```
Dim questionType as Type = question.getType()
Deserialize(Of questionType)(question) 
```

无法识别此类型：“未定义类型'questionType'”

有什么办法可以做到这一点？

我已阅读并尝试过[Suggestion 1](https://stackoverflow.com/questions/1441063/how-do-i-create-something-of-a-variables-type)和[Suggestion 2](https://stackoverflow.com/questions/232535/how-to-use-reflection-to-call-generic-method)，但对于案例 1，我不能使用类型 T 作为表达式，在案例 2 中，我不能使用“类型”，因为这会在代码中出错（“类型不是定义”一）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T13:40:08.477

AFAIK，您不能动态地执行此操作（可能没有反射和发射），因为编译器必须知道要为其生成代码的类型。

我通常使用由 Type 键入的字典，其值是处理程序对象。即使您没有 Deserializer 对象，也可以将委托存储到通用函数。

像这样的东西（从臀部所以应该检查）：

```
'register these just once
_deserializers.Add(GetType(QuestionStyleOne), AddressOf(Deserialize(QuestionStyleOne)())

'later invoke by type, no select case
Dim questionType as Type = question.getType()
_deserializers(questionType)(question) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-08T10:57:39.980

我终于找到了解决这个问题的办法。从 tcarvin 的建议开始，我改变了一些事情并得到了这个解决方案：

我制作了一个单独的辅助类，带有一个共享字典：

```
Private Shared _QuestionStyles As New Dictionary(Of Type, Func(Of Byte(), QuestionBase)) From {
    {GetType(QuestionStyleOne), Function(questionBinary)
                                                Return Deserialize(Of QuestionStyleOne)(questionBinary)
                                            End Function},
    {GetType(QuestionStyleTwo), Function(questionBinary)
                                                Return Deserialize(Of QuestionStyleTwo)(questionBinary)
                                            End Function}
} 
```

在同一个类中，我创建了一个方法来尝试检索以纠正存储在字典中的函数：

```
Public Shared Function DoDeserializeQuestion(ByVal questionType As Type, ByVal questionBinary As Byte())
    Dim deserializeQuestion As Func(Of Byte(), QuestionBase) = Nothing
    If (_QuestionStyles.TryGetValue(questionType, deserializeQuestion)) Then
        Return deserializeQuestion(questionBinary)
    Else
        Throw New ArgumentException("QuestionType not known")
    End If
End Function 
```

现在我只需要调用这个：

```
Using reader As IDataReader = GetQuestions(id)
    While (reader.Read) 
        collection.Add(QuestionTypeHelper.DoDeserializeQuestion(question.GetType, CType(reader.Item(DataFields.Question), Byte())))
    End While
End Using 
```

这让我从数据库中得到正确的问题，反序列化该二进制文件并将它们转换为适当的问题类型。在其他情况下以及需要这种类型的铸造时非常可重用。

# css - 边框未应用于jsp中jstl中的div

> ID：15156383
> 
> 赞同：0
> 
> 时间：2013-03-01T11:15:05.707
> 
> 标签：css, jsp, jstl

如何将右边框应用于包含`<c:forEach`块的 div？

在下面的 jstl 代码中，我试图在`<c:forEach`block 的右侧显示一个边框。不显示边框。css 似乎只适用于一个 div（没有 jstl 代码）：

```
<div class="verticalLineRight">
myborder
</div>
.verticalLineRight {
    border-right:solid #6E6A6B;
    border-width:100px;
} 
```

小提琴：http: [//jsfiddle.net/F23s9/1/](http://jsfiddle.net/F23s9/1/)

但是当我将 div 包裹在一个`<c:forEach`块周围时，不会显示边框：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<html>
<head>
<title>Tag Example</title>
</head>
<body>
<div style="border-right:solid #6E6A6B; border-width:10px; ">
<c:forEach var="i" begin="1" end="5">
   Item <c:out value="${i}"/><p>
</c:forEach>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:14:56.283

试试这个

```
 <div style="border-right:1px solid #6E6A6B; border-width:10px; ">
  <c:forEach var="i" begin="1" end="5">
   <p>Item <c:out value="${i}"/><p>
</c:forEach>
</div> 
```

# tfs - TFS 2010 集合文件夹结构

> ID：15156384
> 
> 赞同：2
> 
> 时间：2013-03-01T11:15:08.880
> 
> 标签：tfs

在我们当前的 TFS 环境中，我们有 2 个集合：我们称它们为“新”和“旧”。旧集合是非结构化的，没有分支，它仅用作代码存储库。

新集合具有以下格式（我们使其尽可能简单）：

```
-NewCollection
    -Project Name
        -Dev (branch)
        -Main (branch)
        -Support (branch) 
```

目前只有几个项目采用这种方法（到目前为止效果很好），所以我们希望将所有剩余的项目从旧集合移动到新集合。

这是问题所在。我们在旧集合中的很多项目都是 WCF 服务（大约 15 或 20 个），它们包含我们业务逻辑的不同方面。我们的项目引用了这些服务，其中一些服务甚至相互引用。

因为有这么多的服务，并且考虑到将来我们希望通过门控签入等实现自动构建和部署，那么更明智的做法是什么？

像这样构建服务：

```
-NewCollection
    -Service 1
        -Dev (branch)
        -Main (branch)
        -Support (branch)
    -Service 2
        -Dev (branch)
        -Main (branch)
        -Support (branch)
    -Service 3
        -etc. 
```

或者像这样：

```
-NewCollection
    -Services
        -Dev (branch)
            -Service 1
            -Service 2
            -Service 3
            -etc.
        -Main (branch)
            -Service 1
            -Service 2
            -Service 3
            -etc. 
```

我问这个问题的原因是因为我不知道在配置构建等时需要什么 - 我仍在学习如何做到这一点，我想以这样的方式规划集合的结构在不久的将来配置自动构建/部署时不会使我们的生活复杂化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:38:28.097

就个人而言，我会使用您提到的第一个结构 - 在每个产品下保留分支。随着时间的推移，这将只是一种更清洁的方法。

当您设置构建定义时，您可以指定属于 GET 操作的分支/工作区。如果您保持文件系统布局与源代码控制布局相同，则可以像引用任何其他项目一样简单地从每个服务使用者引用适当的服务接口。这是一个示例 - 在这种情况下，我从自己的解决方案中引用 Awesomium SDK：

![在此处输入图像描述](../Images/b0ffde16dc6ca9cdcac7a69e7dca59e6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:17:56.870

分支结构问题的答案取决于您如何计划发布。

如果您发现您几乎总是一次发布一项服务并且其他服务的开发彼此分开，那么请选择选项 1。

如果您更有可能同时更改多个服务并将它们一起发布，那么我会选择选项 2。

如果您不确定，或者您的版本可以混合使用，请选择选项 2。您不打算在分支中更改代码并没有真正的开销。

如果您选择选项 1，并且打算一次更改 2 或 3 个服务，那么他们管理分支之间的所有合并将是一项重大开销。

至于关于构建的问题，不要担心，无论您选择哪种策略，您的构建都可以。但是我会说，从经验来看，从长远来看，在单个分支中拥有构建所需的所有解决方案/依赖项将使生活更轻松。

# loadrunner - 需要使用 Load Runner 的解决方案

> ID：15156386
> 
> 赞同：0
> 
> 时间：2013-03-01T11:15:11.173
> 
> 标签：loadrunner

我有一个场景，需要负载运行器给我一个特定格式的报告。

场景：我有一个包含 1000 个 SQL 的 Excel 表。每行 1 个 SQL。我希望加载运行器选择这个 SQL 并同时与不同的用户（比如一次 3 个用户）一起运行它。例如，用户 1 选择 SQL1，用户 2 选择 SQL2，用户 3 选择 SQL3。现在先完成的用户将选择下一个 SQL，例如 User2 先完成，然后它将选择 SQL4，依此类推，直到所有 SQL 都用完。

报告：在最终报告中，我需要以下内容：对于每个 SQL - 执行 SQL、SQL、开始时间、结束时间、响应时间的用户。对于所有 SQL（总体）：服务器的 CPU 使用率、内存使用率、磁盘使用率。报告格式可以是任何格式，txt 或 excel。

谢谢，阿洛克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:27:41.777

你是说你创造了这个场景并且遇到了麻烦吗？如果是这样，您具体遇到了什么问题？或者你问这是否可能？

您描述的场景当然是可能的，您可以在脚本的参数列表中设置一个数据文件，其中包含您的 SQL 命令，并使用“唯一”设置来划分运行的 SQL 语句并确保它们不使用相同的那些。也可以在 LoadRunner 中创建自定义报告输出。您可以在脚本中创建函数以使用 lr_user_data_point() 函数输出自定义报告数据。输出看起来像分析工具中的任何其他时间线数据跟踪报告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:08:00.160

鉴于这是您的第一个问题，自然要问的问题是，您对该工具的培训水平如何？该解决方案集利用了作为工具培训的一部分广泛涵盖的参数化引擎，以及作为标准产品培训的一部分也涵盖的事务时序模型。如果您被要求在没有工具、流程和一段时间指导的情况下完成此任务，那么您的成功几率将逐渐接近零。

解决途径：VB Template 虚拟用户。您需要验证您的许可证是否允许使用模板虚拟用户选项。这也是一种编程解决方案，因此您需要具备适当的 VB 技能。使用 Java 虚拟用户和 C 虚拟用户也可以完成同样的任务，但难度更大。标准数据库虚拟用户在这里不合适，因为您的 SQL 在结果集中可能具有不同数量的列，因此您需要一个解决方案集，该解决方案集允许灵活地接收结果，而不是在本机中找到的硬编码期望模型数据库虚拟用户。

有一个包含两列的参数文件：第 1 列是事务的简称，第 2 列是查询。在您的虚拟用户之间唯一地分配您的 SQL 查询。

您的虚拟用户 pcode

```
Init
{
Establish connection to the database server
}

Action
{
Rendezvous (policy, wait for at least 3)
delay a random number of milliseconds between 250 and 500 to account for human chaotic behavior
Start Transaction (Column 1)
Run My Query (Column 2)
Logic to pass pass|fail of transaction (End Transaction - PASS|FAIL)
}

End
{
Close my database connection
} 
```

您应该知道，用户不会同时操作，每个人都在完全相同的时间做某事。可能有用户彼此同时运行，但真正的同时性，即每个人同时做同样的事情需要同步到时钟滴答声。人类是混乱的仪器，不受与他人同步的内部时钟的束缚。

对于与您的 SQL 相关的 CPU、磁盘和其他指标，您将希望利用可用于您的数据库平台的 SQL 分析工具。对于 ORACLE，这是一份 AWR 报告。对于 Microsoft SQL Server，它是恰当命名的 SQL Profiler 工具。Sybase、DB2、MySQL 等...都具有相同的工具功能，只是从他们的管理工具包中挖掘出来。

如果您只是想在测试期间监控服务器，那么这很简单。查看 SiteScope 与 LoadRunner 的集成。自 8.1 版以来，每个版本的 LoadRunner 都附带了 500 点 Sitecope。您还可以直接查询表，例如 ORACLE 中的 V$ 表或 Microsoft/Sybase SQL 服务器中的系统表，然后为您希望跟踪的信息创建数据点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-16T17:45:40.910

单击资源管理器中的参数选项，现在单击新参数并将其命名为 sql 查询。

1.  点击使用记事本编辑
2.  填充您的 sql 查询。
3.  保存并将参数设置设置为每次迭代唯一，并在其下方中止 vuser。4 现在每个用户都将按照您的意愿依次选择唯一值，如果值用完将停止运行

# jquery - 调用 ajax 作为延迟承诺并接收错误

> ID：15156387
> 
> 赞同：1
> 
> 时间：2013-03-01T11:15:24.880
> 
> 标签：jquery, deferred, promise

我试图让下面的代码工作，但我显然误解了 $.Deferred 的工作原理。请有人帮忙。

思路是，调用GetParameters，处理结果，调用GetStats，处理结果。还将busy 设置为true before 和false 设置为after。我预计只有一个错误会传播到 .fail()。

```
 self.refreshParams = $.ajax({
            url: self.ToAddress() + "/GetParameters",
            data: "{}",
            type: "GET",
            contentType: "application/javascript",
            dataType: "jsonp"
        });

    self.refreshMachines = $.ajax({
            url: self.ToAddress() + "/GetStats",
            data: "{}",
            type: "GET",
            contentType: "application/javascript",
            dataType: "jsonp"
      });

    self.refresh = function () {
      var d = $.Deferred();

      d.pipe(self.refreshParams)
      .done(function (p) {
          self.params(p);
      });

      d.pipe(self.refreshMachines)
      .done(function (m) {
          self.machines(m);
      });

      d.always(function() {
        self.busy(false);
      })
      .fail(function (x, e) {
          self.errorText(x);
      });

      d.resolve();
    } 
```

更新：

我已将其更改为：

```
 self.refreshParams = function() {
          return $.ajax({
                url: self.ToAddress() + "/GetParameters",
                data: "{}",
                type: "GET",
                contentType: "application/javascript",
                dataType: "jsonp"
            });
        };

        self.refreshMachines = function() {
          return $.ajax({
                url: self.ToAddress() + "/GetStats",
                data: "{}",
                type: "GET",
                contentType: "application/javascript",
                dataType: "jsonp"
          });
        };

        self.refresh = function () {

          $.when(self.refreshParams(), self.refreshMachines())
          .done(function (p, m) {
              self.params(p[0]);
              self.machines(m[0]);
          })
          .done(function() {
            self.busy(false);
          })
          .fail(function (x, e) {
              self.errorText(x);
          });
        } 
```

如果服务启动，这似乎可以工作，但如果出现错误，没有什么可以归结为 .fail？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:26:44.980

编写这种类型的代码没有唯一的方法。

您会发现为两个 ajax 操作使用单独的`.done()`处理程序和`.fail()`处理程序会更好，从而保持它们的成功和错误处理相互独立。

然后，响应复合观察者所需要做的`.when()`就是重置忙碌状态标志。通过在`.always()`处理程序中这样做，无论两个 ajax 操作的结果如何，它都会被重置。

我可能会这样写：

```
self.refresh = function () {
    self.busy(true);

    var paramsPromise = self.refreshParams().done(self.params).fail(function (jqXHR, textStatus, errorThrown) {
        self.errorText('refreshParams() : ' + textStatus + ' : ' + errorThrown);
    });
    var machinesPromise = self.refreshMachines().done(self.machines).fail(function (jqXHR, textStatus, errorThrown) {
        self.errorText('refreshMachines() : ' + textStatus + ' : ' + errorThrown);
    });

    $.when(paramsPromise, machinesPromise).always(function () {
        self.busy(false);
    });
}; 
```

# .net - SVN 提交失败并显示错误消息

> ID：15156389
> 
> 赞同：-2
> 
> 时间：2013-03-01T11:15:27.550
> 
> 标签：.net, svn, tortoisesvn, repository

我已经修改了一些文件，在修改文件后，我试图将文件提交到存储库中，但是在提交文件时出现错误，这是错误的堆栈跟踪。

> 错误：提交失败（详情如下）：
> 
> 错误：“/qr/QR_MAVEN/quickres/branches/EMD_IGT”上的 MERGE 请求失败
> 
> 错误：提交被预提交挂钩（退出代码 1）阻止，输出：
> 
> 错误：您的日志消息不包含 CRUCIBLE 审查标识符（或使用错误格式）
> 
> 错误：CRUCIBLE 审查标识符应该在日志消息的行中。
> 
> 错误：正确的提交信息应该包含：“+ review”
> 
> 错误：对于 quickres 提交消息应该
> 
> 错误：包含“+review qd”
> 
> 错误：要添加现有评论，请指定评论编号“+review qd-”

**环境**

> 操作系统：Windows
> 
> 回购：SVN
> 
> 客户：TortoiseSVN。

直到昨天，一切都在工作。可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:34:27.677

您的存储库的`pre-commit`钩子已触发。基本上，这是一种允许存储库维护人员在提交实际发生之前确保满足关于您的签入的一组标准的方法：

> 提交被 pre-commit 钩子（退出代码 1）阻止，输出：

实际上，它会在消息中告诉您（应该）需要知道的所有内容 - 顺便说一下，这不是“堆栈跟踪”，而只是某种多行消息（为了便于阅读，我重新格式化了它）：

> 您的日志消息不包含 CRUCIBLE 审查标识符（或使用错误格式）
> 
> CRUCIBLE 审查标识符应该在日志消息的行中。正确的提交信息应包含：“+review”，用于 quickres 提交信息应包含“+review qd”以添加已存在的评论，请指定评论编号“+review qd-”。

因此，在您的情况下，它希望您在日志消息中指定[Crucible代码审查标识符。](http://www.atlassian.com/software/crucible/overview)它甚至会在最后一句中提示您该做什么。

# asp.net-mvc - 自定义用户表上的 SimpleMembership CreateUserAndAccount IDENTITY_INSERT 错误

> ID：15156391
> 
> 赞同：2
> 
> 时间：2013-03-01T11:15:34.343
> 
> 标签：asp.net-mvc, asp.net-mvc-4, simplemembership

我正在尝试使用我自己的用户表来进行简单的记忆，向其中添加一些数据。基于此处的示例 - [http://blog.osbornm.com/2010/07/21/using-simplemembership-with-asp.net-webpages/](http://blog.osbornm.com/2010/07/21/using-simplemembership-with-asp.net-webpages/) 我用这个模型创建了一个表：

```
 [Table("MyUsers")] 
```

公共类 MyUsers

```
[Key]
[DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
public int UserId { get; set; }
public string UserName { get; set; }
public string Email { get; set; }
public string Gender { get; set; }
public DateTime DOB { get; set; } 
```

我正在初始化它：

```
 WebSecurity.InitializeDatabaseConnection("MyConnection", "MyUsers", "UserId", "UserName", autoCreateTables: true); 
```

并在注册时致电：

```
 WebSecurity.CreateUserAndAccount(model.UserName, model.Password, new MyUsers {DOB = DateTime.Now.AddYears(-31),Email = "my@mymail.com",Gender = "Male",UserName = model.UserName}); 
```

但是 - 我收到此错误：当 IDENTITY_INSERT 设置为 OFF 时，无法在表“MyUsers”中插入标识列的显式值。

不知道如何在 VS2010 中设置它，但我不知道为什么我什至会收到这个错误，以及我应该修复什么。

感谢帮助，我正在尝试测试是否可以将旧的 asp.net 项目移动到 MVC。

坦斯克

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T16:20:35.863

发现了我的问题 - 它与 CreateUserAndAccount 相关，我使用了一个匹配表中所有字段的类，包括键。不应该这样。这有效：

```
 WebSecurity.CreateUserAndAccount(model.UserName, model.Password,new  {Gender="Mal",DOB = DateTime.Now.AddYears(-1),Email="mymy@trtr.com" }); 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:47:27.340

您所做的是在基本用户表之外构建了一个扩展。因此，该`UserId`列**不应**是自动递增的列。它将尝试`INSERT`将基本用户表中的实际 ID 作为外键。

# amazon-ec2 - 如何在 SSH 会话关闭后保持 Arc News 服务器在 EC2 上运行？

> ID：15156392
> 
> 赞同：1
> 
> 时间：2013-03-01T11:15:34.870
> 
> 标签：amazon-ec2

我正在尝试根据以下步骤创建 HN 克隆：

[http://nicholasblee.com/blog/hacker-news-clone-on-a-free-aws-ec2-instance-wapache-reverse-proxy-server-20-min-install/#](http://nicholasblee.com/blog/hacker-news-clone-on-a-free-aws-ec2-instance-wapache-reverse-proxy-server-20-min-install/#)

基本上需要这三个步骤才能“准备好为端口 8080 提供服务”：

```
$ mzscheme -f as.scm
arc> (load "news.arc")
arc> (nsv) 
```

问题是，一旦终端会话关闭，尽管 EC2 实例正在运行，8080 仍没有响应。（只要 ssh 正在运行，它就可以正常工作）

ssh 终止后，如何让它在后台运行？我将这些命令放在某些实例启动或其他东西中？我该怎么做？

# ruby-on-rails - 如何避免在 Ruby on Rails 中被调用系统调用阻塞

> ID：15156393
> 
> 赞同：2
> 
> 时间：2013-03-01T11:15:38.397
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我是 Rails 的新手，我的控制器操作中有一个系统调用。

```
%x [ run_my_script ] 
```

这将运行很多小时......我发现一旦我调用系统调用，我就无法再次打开同一页面，因为我猜 Rails 正忙于等待系统调用的返回。

如果我想并行执行页面我该怎么办？？？使用线程？我试过sidekiq，它会消耗很多内存！有什么想法吗...提前谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:56:04.897

您可以在最后使用带有 & 的系统命令在后台运行它。不确定是否可以与 %x[] 一起使用

```
system "run_my_script &" 
```

# ios - 如何用换行符分割字符串

> ID：15156406
> 
> 赞同：27
> 
> 时间：2013-03-01T11:16:33.620
> 
> 标签：ios, nsstring, newline

我从 csv 文件中读取数据，并希望使用 stringWithContentsOfFile 拆分我得到的长字符串，这是一个多行字符串，其中单独的行表示 csv 文件中的行。我该怎么做呢？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2015-04-09T09:38:37.073

以防万一有人像我一样偶然发现这个问题。这将适用于任何换行符：

```
NSCharacterSet *separator = [NSCharacterSet newlineCharacterSet];
NSArray *rows = [yourString componentsSeparatedByCharactersInSet:separator]; 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-03-01T11:25:08.813

您可以将字符串分解为字符串数组，然后根据需要进行操作。

```
NSArray *brokenByLines=[yourString componentsSeparatedByString:@"\n"] 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-08-18T03:16:54.277

您应该知道，这`\n`不是用于分割新行的唯一字符。例如，如果文件保存在 Windows 中，则换行符将为`\r\n`. 阅读[Wikipedia 中的 Newline 文章以](https://en.wikipedia.org/wiki/Newline)了解更多信息。

因此，如果您只使用`componentsSeparatedByString("\n")`，您可能会得到意想不到的结果。

```
let multiLineString = "Line 1\r\nLine 2\r\nLine 3\r\n"
let lineArray = multiLineStringRN.componentsSeparatedByString("\n")
// ["Line 1\r", "Line 2\r", "Line 3\r", ""] 
```

注意残差`\r`和空数组元素。

有几种方法可以避免这些问题。

# 解决方案

**1.`componentsSeparatedByCharactersInSet`**

```
let multiLineString = "Line 1\nLine 2\r\nLine 3\n"
let newlineChars = NSCharacterSet.newlineCharacterSet()
let lineArray = multiLineString.componentsSeparatedByCharactersInSet(newlineChars).filter{!$0.isEmpty}
// "[Line 1, Line 2, Line 3]" 
```

如果`filter`未使用，`\r\n`则将产生一个空数组元素，因为它被计为两个字符，因此在同一位置将字符串分隔两次。

**2.`split`**

```
let multiLineString = "Line 1\nLine 2\r\nLine 3\n"
let newlineChars = NSCharacterSet.newlineCharacterSet()
let lineArray = multiLineString.utf16.split { newlineChars.characterIsMember($0) }.flatMap(String.init)
// "[Line 1, Line 2, Line 3]" 
```

或者

```
let multiLineString = "Line 1\nLine 2\r\nLine 3\n"
let lineArray = multiLineString.characters.split { $0 == "\n" || $0 == "\r\n" }.map(String.init)
// "[Line 1, Line 2, Line 3]" 
```

这里`\r\n`被算作一个 Swift 字符（一个扩展的字形簇）

**3.`enumerateLines`**

```
let multiLineString = "Line 1\nLine 2\r\nLine 3\n"
var lineArray = [String]()
multiLineString.enumerateLines { (line, stop) -> () in
    lineArray.append(line)
}
// "[Line 1, Line 2, Line 3]" 
```

有关`enumerateLine`语法的更多信息，请参阅[此答案](https://stackoverflow.com/a/25096185/3681880)。

# 笔记：

*   多行字符串通常不会混合两者`\r\n`，`\n`但我在这里这样做是为了表明这些方法可以处理这两种格式。
*   [`NSCharacterSet.newlineCharacterSet()`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSCharacterSet_Class/#//apple_ref/occ/clm/NSCharacterSet/newlineCharacterSet)是定义为 (U+000A–U+000D, U+0085) 的换行符，其中包括`\r`和`\n`。
*   这个答案是对[我上一个问题](https://stackoverflow.com/questions/32021712/how-to-split-a-string-by-new-lines-in-swift)的答案的总结。阅读这些答案以获取更多详细信息。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2017-02-21T06:19:22.857

**斯威夫特 3**版本：

```
let lines = yourString.components(separatedBy: .newlines) 
```

又好又短。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-01T11:42:58.107

您需要用“\n”分隔您的内容。

```
 NSString *str= [NSString stringWithContentsOfFile:filePathLib encoding:NSUTF8StringEncoding error:nil];
    NSArray *rows = [str componentsSeparatedByString:@"\n"];

    for(int i =0;i<[rows count];i++)
        NSLog(@"Row %d: %@",i,[rows objectAtIndex:i]); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-10-24T15:03:50.163

这是我的看法：

```
 NSString* string = @"FOO\r\nBAR\r\r\n\rATZ\rELM327 v1.5";
    NSCharacterSet* newlineSet = [NSCharacterSet newlineCharacterSet];
    NSCharacterSet* whitespaceSet = [NSCharacterSet whitespaceAndNewlineCharacterSet];
    NSArray<NSString*>* components = [string componentsSeparatedByCharactersInSet:newlineSet];
    NSPredicate* predicate = [NSPredicate predicateWithBlock:^BOOL(NSString* _Nullable string, NSDictionary<NSString *,id> * _Nullable bindings){
        return [string stringByTrimmingCharactersInSet:whitespaceSet].length > 0;
    }];
    NSArray<NSString*>* lines = [components filteredArrayUsingPredicate:predicate];

    [lines enumerateObjectsUsingBlock:^(id  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) {
        NSLog( @"Line %u = '%@'", idx, obj );
    }]; 
```

运行此打印：

```
2017-10-24 15:26:05.380 Untitled 5[64977:3182818] Line 0 = 'FOO'
2017-10-24 15:26:05.380 Untitled 5[64977:3182818] Line 1 = 'BAR'
2017-10-24 15:26:05.380 Untitled 5[64977:3182818] Line 2 = 'ATZ'
2017-10-24 15:26:05.380 Untitled 5[64977:3182818] Line 3 = 'ELM327 v1.5' 
```

它可能不是最有效的方法（可能使用 an`NSScanner`会更快），但它解决了这里的问题。

# entity-framework - 我可以从 T4 中访问 Entity Framework fluent api 的输出吗？- 我可以延长它吗？

> ID：15156407
> 
> 赞同：0
> 
> 时间：2013-03-01T11:16:35.193
> 
> 标签：entity-framework, t4

我正在使用 T4 模板从我的模型中构建大部分应用程序。

我正在考虑注释我的模型以指示不同类型的 UI 实现的方法，我希望支持模型中不同实体之间的关系。

令我震惊的是，当我使用 EF fluent API 来描述我的关系时，我已经创建了我需要的大部分元数据。

那么我可以从我的 T4 模板中访问这些数据吗？

如果我可以访问这些数据，是否可以扩展 EF fluent API 以添加额外的元数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T11:35:18.527

如果您在[http://entityframework.codeplex.com](http://entityframework.codeplex.com)中查看 PowerTools 项目，您可以看到他们的 Mapping.tt。从中您可以看到他们如何从连接的数据库中访问映射信息。这个 Mapping.tt 也用于[http://trackable.codeplex.com](http://trackable.codeplex.com)。但是这两个都有 EFTextTemplateHost 自定义的好处，您也可以在 PowerTools 中看到代码。

在 DbContext Fluent 生成器[http://visualstudiogallery.msdn.microsoft.com/5d663b99-ed3b-481d-b7bc-b947d2457e3c](http://visualstudiogallery.msdn.microsoft.com/5d663b99-ed3b-481d-b7bc-b947d2457e3c)中，您可以打开 VSIX 并查看他的 Mapping.tt，以及他访问模型数据的方式。

从提供的 EntityFrameworks 包括 EF.Utility.CS.ttinclude 中，您可以看到访问模型的各种类。

当然，这些是我正在寻找有关如何从 T4 模板中访问 EDMX 数据的详细信息的地方。这是一场噩梦！！

# linq - 无法对自定义实体执行联合

> ID：15156409
> 
> 赞同：0
> 
> 时间：2013-03-01T11:16:41.700
> 
> 标签：linq, c#-4.0

我有以下实体

```
public class A
    {
        public string TestMethodName { get; set; }
        public string FailedFor { get; set; }
    }

    public class B
    {
        public string TestMethodName { get; set; }
        public string FailedFor { get; set; }
    } 
```

我正在使用 Windows 窗体。如果我尝试按照以下方式执行联合

```
private void button2_Click(object sender, EventArgs e)
        {
            List<A> aCollection = new List<A>();
            List<B> bCollection = new List<B>();

            aCollection.Add(new A { TestMethodName = "Method1", FailedFor = "DPLServerURL" });
            aCollection.Add(new A { TestMethodName = "Method2", FailedFor = "DPLServerURL" });
            aCollection.Add(new A { TestMethodName = "Method3", FailedFor = "DPLServerURL" });
            aCollection.Add(new A { TestMethodName = "Method4", FailedFor = "DPLServerURL" });

            bCollection.Add(new B { TestMethodName = "Method1", FailedFor = "OrderXmlLocation" });
            bCollection.Add(new B { TestMethodName = "Method2", FailedFor = "OrderXmlLocation" });
            bCollection.Add(new B { TestMethodName = "Method5", FailedFor = "OrderXmlLocation" });

            var xx = bCollection.Union(aCollection).ToList();

        } 
```

我收到错误作为 udner

```
Error   1   Instance argument: cannot convert from 'System.Collections.Generic.List<WindowsFormsApplication1.B>' to 'System.Linq.IQueryable<WindowsFormsApplication1.A>' 
```

如何合并/合并这些实体？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:35:00.033

代替

```
bCollection.Union(aCollection) 
```

和

```
bCollection.Union<object>(aCollection) 
```

这会`IEnumerable<object>`从其中的两个来源中为每个项目创建一个。您不能做任何更聪明的事情，因为尽管具有相同的属性，但您的类`A`和`B`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:23:14.703

你可以试试这个：

```
private void button2_Click(object sender, EventArgs e)
{
    List<I> aCollection = new List<I>();
    List<I> bCollection = new List<I>();

    aCollection.Add(new A { TestMethodName = "Method1", FailedFor = "DPLServerURL" });
    aCollection.Add(new A { TestMethodName = "Method2", FailedFor = "DPLServerURL" });
    aCollection.Add(new A { TestMethodName = "Method3", FailedFor = "DPLServerURL" });
    aCollection.Add(new A { TestMethodName = "Method4", FailedFor = "DPLServerURL" });

    bCollection.Add(new B { TestMethodName = "Method1", FailedFor = "OrderXmlLocation" });
    bCollection.Add(new B { TestMethodName = "Method2", FailedFor = "OrderXmlLocation" });
    bCollection.Add(new B { TestMethodName = "Method5", FailedFor = "OrderXmlLocation" });

    var xx = bCollection.Union(aCollection).ToList();
}

public class A : I
{
    public string TestMethodName { get; set; }
    public string FailedFor { get; set; }
}

public class B : I
{
    public string TestMethodName { get; set; }
    public string FailedFor { get; set; }
}

public interface I
{
    string TestMethodName { get; set; }
    string FailedFor { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T13:45:44.510

正如在其他答案中所提到的那样，由于`A`和`B`是不同的类型，您不能*直接*创建具有这两种类型的集合，尽管这些类具有相同的属性。你有几个选择：

1.  创建一个*匿名类型*`A`的集合，该集合具有与和相同的属性`B`
2.  创建A 和 B 继承自/实现的*基类型/_interface_)*
3.  在和( )之间创建*当前*基类型的集合`A``B``object`

选项 1 和 2 使您能够在不强制转换的情况下访问集合类型的属性，而选项 3 要求您将项目强制转换为另一个类以使其有用。

一个问题是 - 为什么你有两种看起来做*同样事情的*类型？

# javascript - 当单词以丹麦字符 æ、ø、å 开头时，Javascript 正则表达式失败

> ID：15156414
> 
> 赞同：2
> 
> 时间：2013-03-01T11:17:00.100
> 
> 标签：javascript, regex, character

我的网站上有一个脚本，它突出显示包含通过输入文本字段搜索的单词的 div。每当我搜索以 æ、ø 和 å （丹麦字符）开头的单词时，它都会失败，但如果它们位于单词的其他任何地方，则不会。

我做了一个jsfiddle：

[http://jsfiddle.net/8Y3cM/](http://jsfiddle.net/8Y3cM/)

```
rx = new RegExp("\\b(" + quest.join("|") + ")", "gi") 
```

如果您搜索 hello，您会看到它突出显示了前 2 个 div，因为它们都包含 hello。但是，如果您搜索“ælle”，它不会突出显示包含的 div。

希望有人对此有解决方案-提前谢谢您！（：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:32:00.933

采用：

```
rx = new RegExp("(^\|[ \n\r\t.,'\"\+!?-]+)(" + quest.join("|") + ")([ \n\r\t.,'\"\+!?-]+\|$)", "gi"), 
```

小提琴：http: [//jsfiddle.net/8Y3cM/15/](http://jsfiddle.net/8Y3cM/15/)

感谢[来源](http://breakthebit.org/post/3446894238/word-boundaries-in-javascripts-regular-expressions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:45:05.000

这不是正则表达式，这是您处理行的方式。这有效：

```
$("#search-question-button").click(function () {
    var quest = $('#search-questions-field').val().trim().split(" "),
    rx = new RegExp('\\b(' + quest.join("|") + ')', "gi");
    $(".searchin").removeClass('search-successful').addClass(function() {
        return $(this).text().match(rx) ? 'search-successful' : '';
    });
}); 
```

我用`match`而不是`replace`.

[http://jsfiddle.net/dfsq/8Y3cM/21/](http://jsfiddle.net/dfsq/8Y3cM/21/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:46:26.320

抛开有趣的 RegEx 问题不谈，你为什么还需要 RegEx 呢？我认为[一个简单的`.indexOf`就可以了](http://jsfiddle.net/8Y3cM/20/)：

```
$(document).ready(function(){
    $("#search-question-button").click(function () {
        var quest = $('#search-questions-field').val().trim().split(" ").map(function(q){return q.toLowerCase();});

        $(".searchin").each(function() {            
            elm = $(this);
            elm.removeClass('search-successful');
            found = 0;
            var t = elm.text().toLowerCase();
            quest.forEach(function(q){
                if (t.indexOf(q) >= 0) found++;
            });
            if (found===quest.length) elm.addClass("search-successful");
        });      
    });
}); 
```

# javascript - javascript 数组中的第二个值始终无法识别

> ID：15156416
> 
> 赞同：0
> 
> 时间：2013-03-01T11:17:22.187
> 
> 标签：javascript

得到这个脚本：

```
<script type="text/javascript">
var imones = [];
imones.push('example.com');
imones.push('cnn.com');
imones.push('apple.com');

var beforeloadingtime = (new Date()).getTime();
var beforeTime = [];
beforeTime[0] = beforeloadingtime;
$.each(imones, function (index, value) {
    var jsonnuorodos = "http://anyorigin.com/get?url=" + imones[index] + "&callback=?";
    $.getJSON(jsonnuorodos, function (data) {
        var iframe = $("#output")[0];
        var doc = iframe.document;
        if (iframe.contentDocument) {
            doc = iframe.contentDocument;
        } else if (iframe.contentWindow) {
            doc = iframe.contentWindow.document;
        }
        doc.open();
        doc.writeln(data.contents);
        doc.close();
        var loadingtime = (new Date()).getTime();
        beforeTime.push(loadingtime);

        var result;
        result = (beforeTime[index + 1] - beforeTime[index]) / 1000;
        console.log("result - " + result);
    });
});
</script> 
```

在控制台中我得到这些结果：

```
result - 1.741 
result - NaN 
result - 0.86 
```

我在第二个结果中得到 NaN，因为 beforeTime[index+1] 值始终无法识别。

编辑：如果我写`console.log("index= "+[index]); console.log("index+1= "+[index+1]);`我得到：

```
index= 0 
index+1= 1 
index= 2
index+1= 3
index= 1
index+1= 2 
```

它应该在哪里：

```
index= 0 
index+1= 1 
index= 1
index+1= 2
index= 2
index+1= 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:45:51.203

可能原因是您使用`$.getJson`and`$.each`来创建此功能。那是非同步的。的`index=3`响应速度比 快`index=2`，所以....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:53:58.803

通过添加一个简单的 for 循环来修复它：

```
for (i=0;i<4;i++){
var result;
result = (beforeTime[i+1] - beforeTime[i]) / 1000;
} 
```

# objective-c - Google Plus 无法发布片刻

> ID：15156417
> 
> 赞同：1
> 
> 时间：2013-03-01T11:17:22.670
> 
> 标签：objective-c, google-api, oauth-2.0, google-plus, google-oauth

谷歌授权后，我尝试在没有任何确认的情况下发布片刻：

```
GTMOAuth2Authentication *auth;
auth = [GTMOAuth2ViewControllerTouch authForGoogleFromKeychainForName:TMH_SOCIAL_GOOGLE_KEYCHAIN
                                                             clientID:TMH_SOCIAL_GOOGLE_CLIENTID
                                                         clientSecret:TMH_SOCIAL_GOOGLE_SECRET];
if ([auth canAuthorize]) {

    NSString *postString = @"{\"type\":\"http:\\/\\/schemas.google.com\\/AddActivity\",\"target\":{\"id\":\"tmhabc\",\"type\":\"http:\\/\\/schemas.google.com\\/AddActivity\",\"description\":\"First post description\",\"name\":\"First post\"}}";

    NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"https://www.googleapis.com/plus/v1/people/me/moments/vault?access_token=%@&key=%@", auth.refreshToken, TMH_SOCIAL_GOOGLE_APIKEY]];
    NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
    [request setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];

    GTMHTTPFetcher *myFetcher = [GTMHTTPFetcher fetcherWithRequest:request];

    [myFetcher setAuthorizer:auth];
    [myFetcher setPostData:[postString dataUsingEncoding:NSUTF8StringEncoding]];

    [myFetcher beginFetchWithCompletionHandler:^(NSData *retrievedData, NSError *error) {
        if (error == nil) {
            NSLog(@"OK %@", [[NSString alloc] initWithData:retrievedData encoding:NSUTF8StringEncoding]);
        } else {
            NSLog(@"%@", error.localizedDescription);
        }
    }];
} 
```

但是收到错误 401：操作无法完成。（com.google.HTTPStatus 错误 401。）

我试试这个：

1.  在 API 控制台中授予 Google Plus 权限
2.  [使用范围“ https://www.googleapis.com/auth/plus.login](https://www.googleapis.com/auth/plus.login) ”进行授权
3.  在网上只找到了这个答案：[http](http://gusclass.com/blog/2013/02/27/common-issues-for-the-new-google-platform-release/) ://gusclass.com/blog/2013/02/27/common-issues-for-the-new-google-platform-release/这篇文章中的家伙建议使用“data- requestvisibleactions”（但如何在目标 c 中执行此操作）

我不知道出了什么问题。

**更新**

https : //developers.google.com/+/api/latest/moments/insert#try-它不适用于瞬间插入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T22:10:57.477

有同样的问题，但在服务器端。您的 oauth 请求应`request_visible_actions`在将用户重定向到身份验证页面时包含参数。查看我的[问题](https://stackoverflow.com/questions/15164949/google-unable-to-insert-moment)和php 客户端的[差异](https://stackoverflow.com/questions/15164949/google-unable-to-insert-moment#comment21361856_15167103)。

# sql-server - SQL Server：撤销用户的授权选项

> ID：15156426
> 
> 赞同：0
> 
> 时间：2013-03-01T11:17:56.143
> 
> 标签：sql-server, sql-server-2005

我正在使用 SQL Server 2005；

里面有一个数据库和一个表，叫做`myTB`.

有两个用户`user1`和`user2`。

`user2`可以登录并设置一些权限，例如他可以执行这个：

```
DENY permission ON myTB TO user1
or 
GRANT permission ... 
```

现在的问题是我想限制`user2`；他不应该拥有`GRANT`或`REVOKE`或`DENY`任何权限。

提前致谢。

# regex - 需要帮助扩展字谜正则表达式

> ID：15156431
> 
> 赞同：0
> 
> 时间：2013-03-01T11:18:07.797
> 
> 标签：regex, anagram

我正在尝试扩展此正则表达式以列出给定字母集的所有可能的字谜：

```
^(?!.*([aer]).*\1)(?!(.*d){4})([aerd]*|[a-z])$ 
```

到目前为止，基于这个正则表达式，我可以接收到由字母“dadder”组成的单词和子单词的任何组合的匹配，例如“adder”、“add”、“ad”、“red”等。正则表达式复杂而不是简单`[dadder]*`的原因是因为显然每个字母可以匹配无限次，这很糟糕，我希望每个字母只匹配测试字符串一次，如果提供两个 d，它最多可以匹配只有两次或更少。如果有人当然可以简化正则表达式以匹配指定 X 次精确的任何字母组合，请随时提供它:)

然而我的主要问题是，我现在想加入一个句号字符“。”。如果在字符列表中遇到句号，它将充当通配符并且可以匹配任何字符 az。所以`dadd.r`可以匹配`daddzr`, `daddor`,`daddpr`等`rpdadd`。

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:39:57.620

这不是一个应该用正则表达式解决的问题，因为[nhahtdh 的有趣答案](https://stackoverflow.com/a/14383513/1919238)应该会让你信服。

正则表达式擅长匹配模式。它们不是解决基于集合的问题的工具，而这正是您尝试使用它们的目的。

你真的需要一种算法方法，因为这是问题的本质。 [这个问题](https://stackoverflow.com/questions/55210/algorithm-to-generate-anagrams)只涵盖了这样一个主题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:15:23.087

问题的第一部分是这个问题的重复：[检查字符串是否是一堆字符的子集？（正则表达式）？](https://stackoverflow.com/questions/14383119/check-if-string-is-subset-of-a-bunch-of-characters-regex)

* * *

该答案专门用于解决您面临的实际问题（问题的第二部分）。

一个非常简单的解决方案是使用 2 个映射：一个映射原始集中字符的频率，并记下 的数量`.`，另一个映射每个输入字符串的字符频率。

伪代码：

```
// I assume the maps return 0 for non existent entries
// Depending on the input, the map can simply be an array, or a tree/hash map

function checkAnagramExtended(originalString, inputString):
    if (inputString.length > originalString.length):
        return false

    // The frequency mapping for original string (ref stands for reference)
    // Ideally, refMap should be filled up once instead of every call
    // to this function
    var refMap = countFrequency(originalString)
    // The frequency mapping for input string
    var inpMap = empty map

    foreach (character c in inputString):

        if (inpMap[c] >= refMap[c]):
            // You may want to check that c is a character allowed
            // to be substituted by dot .
            // if (!canBeSubstitutedByDot(c)):
            //     return false

            if (inpMap['.'] >= refMap['.']):
                return false
            else:
                inpMap['.'] += 1

        else:
            inpMap[c] += 1

    return true 
```

**附录：扩展正则表达式解决方案？**

您的点`.`扩展名允许`a-z`匹配任何字符，这使得正则表达式解决方案变得更加不切实际。

在我对另一个问题的解决方案中，我严重依赖负前瞻来断言**特定字符**的计数小于多字符集中的最大字符数。

点`.`扩展名可以改变任何字符允许的最大字符数，因此打破了我上面的解决方案。如果你强制正则表达式来完成这项工作，那么如果只有 1 就可以生成正则表达式`.`，但是当你将它增加到 2 时事情会爆炸。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T14:25:26.147

好的，在尝试将其作为正则表达式进行大量工作之后，由于不完整的通配符支持和缓慢的处理时间，我放弃了。

我现在已经将我的需求转换为 C# 函数，实际上我现在更舒服、更快乐了，因为它也快了大约 400%，这很棒。

这将检查给定的单词是通过 (.) 支持通配符的一组字母的字谜或子字谜。

`letters`要测试字谜的字母在哪里。

`dictionaryData`要测试的单词在哪里`List<string>`。

```
var letterCounts = letters.Select(x => x)
  .GroupBy(x => x)
  .ToDictionary(x => x.Key, x => x.Count());

var containsWildcards = letters.IndexOf('.') >= 0;
foreach (var dictWord in dictionaryData)
{
    var matches = 0;
    var dictWordLength = dictWord.Length;
    if (dictWordLength > letters.Length)
        continue;
    var addedChars = new List<char>();
    foreach (var dictLetter in dictWord)
    {
        var foundLetter = false;
        if (letterCounts.ContainsKey(dictLetter) &&
            addedChars.Count(x => x == dictLetter) < letterCounts[dictLetter])
        {
            if (letters.IndexOf(dictLetter) >= 0)
                foundLetter = true;
        }
        else if (containsWildcards &&
            addedChars.Count(x => x == '.') < letterCounts['.'])
        {
            addedChars.Add('.');
            foundLetter = true;
        }
        if (foundLetter)
        {
            addedChars.Add(dictLetter);
            matches++;
        }
        if (dictWordLength == matches)
            break;
    }

    if (dictWordLength <= matches)
    {
        // We have a match!
    }
} 
```

希望它也可以帮助别人。

# tfs - 从多项目解决方案中分支特定项目

> ID：15156433
> 
> 赞同：5
> 
> 时间：2013-03-01T11:18:10.143
> 
> 标签：tfs

我在 TFS 中有一个多项目解决方案。其中一个项目包含解决方案中所有项目引用的公共代码。我现在只想更新其中一个项目，所以我想我会将其中一个项目分支到开发分支中。

它现在抱怨预期的公共代码项目参考，但我想知道如何处理这种情况。我是否只是从主解决方案中获取一个分支并删除我不需要的项目，然后在完成后合并回来，或者我只是将其他项目原样留在新分支中，并在我合并回来时让 TFS 处理它们？我该如何处理？

我对 TFS 很陌生，因此感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:28:51.507

“主”分支通常应包含一个产品和任何第 3 方依赖项。如果我们谈论数百万行代码，这种情况可能会有所不同，但在中小型应用程序中，将所有代码放入一个分支中是有意义的。

所以现在你应该只将 Main 分支到“FeatureX”。TFS（与大多数现代 VC 解决方案一样）不会对文件进行完整的“复制”，只是记录一个分支是从变更集创建的条目。

所以在你的情况下......

只需创建一个分支，对您的项目进行更改（在您保持 2 同步时将 Main 转发到您的分支），然后将分支合并回您的“Main”并在完成后将其删除。

# routing - 如何使用喷雾路由测试自定义 Json 对象

> ID：15156434
> 
> 赞同：3
> 
> 时间：2013-03-01T11:18:12.650
> 
> 标签：routing, casbah, salat, spray-json, testkit

我正在为一些 CRUD 操作在 mongodb 之上创建一个带有喷雾路由的 Rest API，这一切都很好，期待每当我尝试使用 specs2 测试它时，以下规范

```
class RestServiceSpec extends Specification with Specs2RouteTest with RoutingRestService

  // database initialization removed for clarity

  "The rest service" should
    "have a player called 'Theo TestPlayer' in the db" in {
      Get("/api/1.0/player/" + player1._id) ~> restRoute ~> check {
        entityAs[Player] must be equalTo(player1)
      }
    }
  }

// some more specs removed for clarity
} 
```

它将失败并出现以下错误：

```
MalformedContent(invalid ObjectId ["51308c134820cf957c4c51ca"],Some(java.lang.IllegalArgumentException: invalid ObjectId ["51308c134820cf957c4c51ca"])) (Specs2Interface.scala:25) 
```

我不知道在哪里查看源文件的引用和行号指向通用的 failTest(msg:String) 方法

更多信息：

我有一个案例类，我使用 SalatDAO 坚持使用 Mongo

```
case class Player(@Key("_id") _id:ObjectId = new ObjectId(), name:String, email:String, age:Int) {} 
```

其中 ObjectId() 一个类是包装 mongodb 的 ID 生成以通过 spray_json 进行此（未）编组的类我创建了一些 jsonFormats

```
object MyJsonProtocol {
  implicit val objectIdFormat = new JsonFormat[ObjectId] {
    def write(o:ObjectId) = JsString(o.toString)
    def read(value:JsValue) = new ObjectId(value.toString())
  }
  implicit val PlayerFormat = jsonFormat(Player, "_id", "name", "email", "age") 
```

以及我的路线的相关部分（删除了错误处理和日志记录）：

```
 path("player" / "\\w+".r) {id:String =>
    get {
      respondWithMediaType(`application/json`) {
        complete {
          PlayerCRUD.getById(id) 
        }
      }
    } ~ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-16T08:41:04.007

似乎没人知道，我将 _id 从一个 ObjectId() 更改为只是一个字符串，并在需要的地方有一个帮助方法从 new ObjectId().toString 创建它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-07T20:25:43.703

```
 implicit object ObjectIdJsonFormat extends JsonFormat[ObjectId] {
    def write(obj: ObjectId): JsValue = JsString(obj.toString)

    def read(json: JsValue): ObjectId = json match {
      case JsString(str) => new ObjectId(str)
      case _ => throw new DeserializationException(" string expected")
    }
  } 
```

# php - 使用 ajax 舍入浮点值

> ID：15156439
> 
> 赞同：0
> 
> 时间：2013-03-01T11:18:28.750
> 
> 标签：php, jquery

使用 json 我得到值，从中我尝试使用以下脚本对值进行四舍五入：

```
 function onLoad(){
            var output = $('#product');
            var id = getUrlVars()["cPath"];
            $.ajax({
                url: 'getprice.php?cPath='+id,
                data : {type : 'product'},
                dataType: 'jsonp',
                jsonp: 'jsoncallback',
                timeout: 5000,
                success: function(data){
          $.each(data, function(c,prd){

              var price  =Math.round(prd.products_price,2);

                           var product = '<span class="normalprice">$' + price + '</span>' ;
                           output.append(product);
                            }

                        });
                    output.listview("refresh");
                        //data loaded
                    },
                    });
        } 
```

//输出需求

```
 prd.products_price=450.2500
   price=$450.25 
```

也尝试这种格式但不起作用：

```
 1\.  var num = Math.val(prd.products_price);
                var price = num.toFixed(2); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:22:33.313

```
var num = Math.val(prd.products_price); 
var num = parseFloat(num);
var price=num.toFixed(2)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:23:42.517

```
var price = prd.products_price;
var product = price.formatMoney(0, "")

Number.prototype.formatMoney = function(places, symbol, thousand, decimal) {
        places = !isNaN(places = Math.abs(places)) ? places : 2;
        symbol = symbol !== undefined ? symbol : "$";
        thousand = thousand || ",";
        decimal = decimal || ".";
        var number = this;
        var negative = number < 0 ? "-" : "";
        var i = parseInt(number = Math.abs(+number || 0).toFixed(places), 10) + "";
        var j = (j = i.length) > 3 ? j % 3 : 0;

        return symbol
                + negative
                + (j ? i.substr(0, j) + thousand : "")
                + i.substr(j).replace(/(\d{3})(?=\d)/g, "$1" + thousand)
                + (places ? decimal + Math.abs(number - i).toFixed(places).slice(2) : "");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:21:48.313

试试这个：

```
var price = parseFloat(prd.products_price).toFixed(2); 
```

# dita - 当我不编写计算机文档时，我使用哪种 DITA 主题类型？

> ID：15156444
> 
> 赞同：2
> 
> 时间：2013-03-01T11:18:46.740
> 
> 标签：dita

我是一名技术作家，正在使用 DITA 编写通用业务流程标准。我选择使用 DITA 是因为它出色的主题组合、内容引用和条件分析，所有这些都将帮助我控制复杂的、相互关联的文档。

我需要选择要使用的主题类型。

我有三个选择：

1.  我可以专注于我自己的主题类型，以满足我的确切需求
2.  我可以使用主题主题。
3.  我可以使用一个或所有 OASIS 计算机文档主题（概念/任务/参考）。

选项 1 不现实，因为我无权接触 DITA 开发人员。再加上将专业化设计为伪代码也并非易事。

这使得选项 2 和 3 成为现实。

选项 2 让我使用主题 topic。这给了我灵活性，因为它是最宽容的主题类型。它也是最“干净”的，因为我没有使用为其他东西设计的主题类型。然而，主题主题实际上是专业化的基础，不应该直接使用。

选项 3 让我使用计算机文档主题。我可以或多或少地使我的内容适合他们。但是，它们实际上是针对以特定方式编写的“tripane 帮助”类型的内容。例如，这些主题类型通常用于根据约翰卡罗尔的极简主义进行写作，它鼓励用户进行实验并关注用户的任务。我的文件要求要求，我不想在我的写作中鼓励极简主义原则。

选项 2 和 3 都涉及妥协。对于编写流程标准，两者哪个更好？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T12:15:37.070

另一种选择是使用 DITA for Publishers 项目提供的主题类型，这些主题类型旨在模拟典型的非技术文档发布组件：文章、章节、小节、侧边栏和部分。

DITA for Publishers 项目位于[http://dita4publishers.sourceforge.net](http://dita4publishers.sourceforge.net)。

请注意，如果您只需要一个可区分的主题类型标签名称，那么定义新的主题类型非常简单：这完全是复制、粘贴和重命名的练习，任何人都可以做到。

[http://www.xiruss.org/tutorials/dita-specialization/](http://www.xiruss.org/tutorials/dita-specialization/)上的配置和专业化教程将引导您完成它，尽管现在看它们，我发现主题专业化教程实际上比仅仅做一个简单的 root 更多 -仅标记名专业化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-01T16:43:03.917

类型概念、任务和参考并非专门用于计算机文档。我也将这些任务用于

*   教科书
*   啤酒自酿指南
*   烹饪食谱

对于所有这些示例，可以（并非总是那么容易）将内容划分为标准 Dita 类型。您的术语“不是计算机文档”太含糊了。我认为当您更多地介绍您的内容时，许多dita专家可以为您提供建议。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-07T12:03:36.803

尽管 DITA 是作为技术文档的语言开发的，但这与我认为您所说的计算机文档不同。

使用概念类型来提供信息，这些信息有助于通过帮助用户了解某事来确定他们的方向。这可以像“为什么我需要遵循这个 SOP”一样简单，或者它可以描述一些神秘算法的工作原理（如果您的用户需要理解这一点才能正确执行任务）。

每当您描述用户如何执行活动时，请使用任务类型。这不需要是带有“单击此”和“键入该”的步骤的编号列表（尽管这是软件文档的常见用例）。如果需要，它可以（特别是如果您使用“一般任务”类型）更自由。这里的区别是您提供了某种方向。

使用 Reference 类型提供您的用户可能需要查找的信息（通常用于支持活动）。如果主题完全是一个列表或表格，它几乎肯定是参考信息。

有经验的技术沟通者有时可能会不同意在特定情况下使用哪种主题类型，但这些是区分这三种主要主题类型的一般准则。

如果您愿意，您可以使用通用主题，但使用 CTR（概念、任务、参考）模型组织信息在技术交流方面具有成功的记录，即使信息不属于技术性质，也可能对您的用户有所帮助。例如，想想一个商业演示。它通常以“什么是 whoozy 小部件”开头，然后是“whoozy 小部件将如何改变您的生活”，最后是购买链接或获取有关 whoozy 小部件的更多信息。点击率。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-03T10:23:23.017

如果您无权访问开发人员，您可以使用[DITA Generator](http://dita-generator-hrd.appspot.com/)生成一个简单的专门化，它只添加一个新的根元素。即使您不创建[结构专业化](http://dita-generator-hrd.appspot.com/specialization/)，您仍然应该生成[自定义外壳 DTD](http://dita-generator-hrd.appspot.com/shell/)。这将允许您使用诸如任务之类的基本主题类型，但如果您不需要它们，则不包括例如编程和软件领域。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-25T00:16:50.967

在很多这样的情况下，人们必须根据创作时对语义标记内容的要求程度来评估 DITA 的好处，以便根据观众的需要进行渲染。我认为专业化是实现更高级别语义标记的唯一途径。例如，您可能有一个名为需求的专门主题。但是，随着时间的推移，您可能需要进一步将需求元素专门化为其他类型，例如硬需求、软需求、强制要求、法规要求、功能要求、非功能要求等。另一个考虑因素在决定专业化水平的同时，是否需要任何其他系统使用带有该专业化标签的内容，如果需要，

并不是要阻止任何人尝试，但实际上，为某些领域开发全面的 DITA 专业化需要很长时间。对于半导体行业，自 2007 年以来正在开发一种称为[SIDSC](https://www.oasis-open.org/committees/tc_home.php?wg_abbrev=dita-sidsc)的专业，涉及许多公司和开发人员，但由于其复杂性，它仍未在整个行业广泛使用。然而，由于我们的产品越来越复杂，我们公司的信息开发人员能够更好地应对文档和出版方面的挑战，因为我们正在使用这种专业化。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-19T11:30:31.803

而且您没有使用概念，因为...？

根据我的经验，很容易说，我们的客户使用了很多概念，甚至是通用主题。这在几个行业中确实很常见。我想说，如果您的文档不是指导性的（任务），只需使用概念，然后您就不必专门研究任何内容。

但是如果出于某种原因你需要一些非常特别的东西，你应该考虑专业化。只需访问[http://dita-generator-hrd.appspot.com/](http://dita-generator-hrd.appspot.com/)并使其成为可能。:)

# java - 外观模式与委托模式；在 Java 中？

> ID：15156446
> 
> 赞同：-1
> 
> 时间：2013-03-01T11:18:49.360
> 
> 标签：java, design-patterns, delegates, java-ee-6, facade

我在 web 中经常提到外观设计模式。从字面上看，可以清楚地想象外观 bean 是什么。但是，在实现方面，我无法与委托模式有任何区别。任何人都可以解释外观模式的实现以及它与 Java 中的委托模式有何不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:48:25.937

外观模式为您提供了一个隐藏所有实现细节的抽象层。委派是让其他实体做你的工作的能力，你委派。

在 Java 中，您可以创建一个 Facade 类，并在其中使用一组具有真实代码的类。例如，对于委托，您会在构造函数中收到对其他类的引用，然后在第二个类中调用一些预定义的 API，因为委托可能实现某种接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:49:24.987

服务门面通常是客户的入口点。它提供了一个粗粒度、用例驱动的 API。Service Facade 启动事务，必要时从 DTO 转换为 DTO，并且可以调用细粒度的服务和 DAO。

对于 Web 应用程序，还有网关模式（具有扩展持久性上下文的有状态 EJB）在某些情况下可以用来代替服务外观。（JPA 实体不会分离。）

有关更多信息，请查看 Adam Bien 所著的“Real World Java EE Patterns - Rethinking Best Practices”一书：[http ://realworldpatterns.com/](http://realworldpatterns.com/)

# javascript - JQUERY：使用html点击带有参数的jquery函数

> ID：15156450
> 
> 赞同：0
> 
> 时间：2013-03-01T11:18:54.167
> 
> 标签：javascript, jquery, html

我陷入了一个 jquery 问题，我想在 HTML`onclick`事件的 jquery 函数中传递参数。

HTML：

```
 <p><a href="#" class='cls1' onclick='func1("a1")'>Anchor1</a></p>
 <div><a href="#" class='cls1' onclick='func1("a2")'>Anchor2</a><div>
 <span><a href="#" class='cls1' onclick='func1("a3")'>Anchor3</a></span> 
```

查询：

```
 function func1(var param)
 {
    var parnt = $(this).parent(); // i want to get parent, this only gives [object object]
    alert('Parent:'+parnt+' param:'+param) //alert parnt and param
    return false;
 } 
```

我知道这很容易，但我就是找不到继续前进的正确方向。衷心感谢任何指导。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:25:04.690

警报框只能警报字符串。如果要查看对象，请使用`console.log()`. 它适用于除 IE 之外的所有浏览器。也摆脱'var'

```
function func1(var param){

} 
```

如果要将函数绑定到单击事件，请使用`on()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T11:26:21.727

问题是“this”没有引用被传递的对象。一种解决方法是：

```
onclick='func1(this,"a1")' 
```

并将功能更改为：

```
 function func1(obj,param)
 {
    var parnt = $(obj).parent();
    alert('Parent:'+parnt+' param:'+param) //alert parnt and param
    return false;
 } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T11:42:58.053

您在父方法结果中获得对象，因为您需要指定要访问的属性：

```
$(".cls1").on("click", function(){

    var clickedID = $(this).attr("id"); // result :  "a1 or a2 or a3"

    var parentTag = $(this).parent().get(0).tagName;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T11:25:17.380

1.  您可以摆脱 HTML 中的 onclick 属性并在 JS 中绑定事件处理；
2.  您可以分配一个事件处理程序来处理所有元素，并通过分析“this”变量来确定单击了哪个元素。
3.  使用 console.log 和 console.dir 可以更好地了解变量是什么。
4.  阅读文档和教程 - 你所做的非常简单，并且有很多关于它的东西：http: [//api.jquery.com/category/events/](http://api.jquery.com/category/events/) + [http://justfuckinggoogleit.com/](http://justfuckinggoogleit.com/)
5.  掌握事件传播模型

我本可以为你编写代码，但我认为你自己学习很重要。祝你好运！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-01T11:22:51.963

```
<a href="#" class='cls1' onclick="func1(\'' + a1 + '\')">Anchor1</a></p>
 <div><a href="#" class='cls1' onclick="func1(\'' +a2+ '\')">Anchor2</a><div>
 <span><a href="#" class='cls1' onclick="func1(\'' + a3 + '\')">Anchor3</a></span> 
```

像这样调用函数..

```
function func1(param)
 {
    var parnt = $(param).parent(); // i want to get parent, this only gives [object object]
    alert('Parent:'+parnt+' param:'+param) //alert parnt and param
    return false;
 } 
```

当你传递这样的字符串时，你必须使用转义字符..`(\'' + a1 + '\')`

# wpf - 使用可观察集合将数据加载到 wpf 树视图

> ID：15156451
> 
> 赞同：0
> 
> 时间：2013-03-01T11:19:00.890
> 
> 标签：wpf, wcf

我的 Wcf 服务有两个名为**Apps**和**SubApps**的数据合同。我在服务器端也有两个方法，称为`List<string> GetAppIds()`and `List<string> GetSubAppIds(string AppId)`。

我想将这些 AppIds 和 SubAppId 加载到 wpf 客户端的树视图控件中。当我添加删除应用程序和子应用程序时，修改应该适用于树视图。你能给我一个解决这个问题的方法吗？

树视图结构应如下所示：

```
App1
 |_SubApp 1
 |_SubApp 2
App2
 |_SubApp 1
 |_SubApp 2 
```

# bash - shell脚本中的Ctrl C

> ID：15156453
> 
> 赞同：0
> 
> 时间：2013-03-01T11:19:04.073
> 
> 标签：bash, shell

我有一个带有以下代码的shell脚本；

```
#!/bin/bash
nfcapd -z -w -t30 -p 2055 -l /home/shane/Documents/nfdump 
```

我的问题是，当我执行 shell 脚本时，上面的命令一遍又一遍地执行（它从路由器捕获网络流量），但我希望它在 30 秒后停止。在终端中我只需按`Ctrl`+ ，有没有办法在特定时间 t 后`c`执行此命令（`Ctrl`+ ）？`c`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-01T11:27:44.523

采用`timeout`

```
timeout 30 nfcapd -z -w -t30 -p 2055 -l /home/shane/Documents/nfdump 
```

更多信息[在这里](http://www.gnu.org/software/coreutils/manual/html_node/timeout-invocation.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T11:36:23.513

把这句话放在后面`#!/bin/bash`

> （睡 30 ；杀死 -9 $$）&

看看它是否适用于你的情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T12:50:04.610

你也可以杀死最后一个工作：

```
#! /bin/bash
nfcapd -z -w -t30 -p 2055 -l /home/shane/Documents/nfdump &
sleep 30 ; kill %%
echo "nfcapd terminated"
exit 0 
```

# android - 如何在android中获取屏幕类型？

> ID：15156455
> 
> 赞同：1
> 
> 时间：2013-03-01T11:19:07.397
> 
> 标签：android, android-layout

我在上面使用了它并运行它不同的模拟器，如大、中、小。但我得到吐司正常屏幕..如何解决它

```
    if ((this.getResources().getConfiguration().screenLayout & 
                    Configuration.SCREENLAYOUT_SIZE_MASK) == 
                        Configuration.SCREENLAYOUT_SIZE_LARGE) {
                  Toast.makeText(this, "Large screen",Toast.LENGTH_LONG).show();
            }
            else if(((this.getResources().getConfiguration().screenLayout & 
                    Configuration.SCREENLAYOUT_SIZE_MASK) == 
                        Configuration.SCREENLAYOUT_SIZE_NORMAL)) {
                  Toast.makeText(this, "Normal screen",Toast.LENGTH_LONG).show();
            }
            else if(((this.getResources().getConfiguration().screenLayout & 
                    Configuration.SCREENLAYOUT_SIZE_MASK) == 
                        Configuration.SCREENLAYOUT_SIZE_SMALL)) {
                  Toast.makeText(this, "small screen",Toast.LENGTH_LONG).show();
            }
            else
            {
                  Toast.makeText(this, "Xlarge screen",Toast.LENGTH_LONG).show();
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:21:46.167

```
Display display = getWindowManager().getDefaultDisplay();
Point size = new Point();
display.getSize(size);
int width = size.x;
int height = size.y; 
```

阅读以下代码：- [http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

现在把 if 条件。

# php - 将 Twitter 社交按钮连接到推荐人页面

> ID：15156458
> 
> 赞同：0
> 
> 时间：2013-03-01T11:19:15.897
> 
> 标签：php, javascript, twitter

是否可以将 Twitter 按钮连接到引荐来源网址，以便所有推特都将引用访问者已登陆的页面，而不是引用借出页面本身？

我已经用 Facebook 和 G+ 完成了它，因为两者都使用`href`内部脚本并`<?php $ref=$_SERVER['HTTP_REFERER'];echo $ref;?>`指定裁判 url，但由于脚本不使用内部元素`href`，所以无法弄清楚如何处理 Twitter 。`href`

```
<a href="http://twitter.com/share?via=my_twitter_ID&amp;count=vertical" class="twitter-share-button">Tweet</a>
<script type="text/javascript">
    var a = document.createElement(\'script\'), b = document.getElementsByTagName(\'script\')[0];
    a.type = \'text/javascript\';
    a.async = true;
    a.src = \'http://platform.twitter.com/widgets.js\';
    b.parentNode.insertBefore(a,b);
</script> 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:27:00.447

找到了解决方法，简单地添加了`data-url="<?php $ref=$_SERVER['HTTP_REFERER'];echo $ref;?>"`

# c# - 有没有办法在 C# 中使用位图预览 DWG/RFA 文件？

> ID：15156459
> 
> 赞同：0
> 
> 时间：2013-03-01T11:19:18.963
> 
> 标签：c#, bitmap

你能告诉我是否存在一些使用 C# 中的 Bitmap 类从 DWG 或 RFA 文件创建预览的教程或代码？

谢谢

# ios - 如何将 MWPhotoBrowser 添加到使用 arc 的 iOS 项目中

> ID：15156463
> 
> 赞同：2
> 
> 时间：2013-03-01T11:19:32.230
> 
> 标签：ios, static, mwphotobrowser

我正在尝试将 MWPhotoBrowser 库添加到我的使用故事板和弧的 ios 项目中。我收到了各种令人讨厌的错误。gethub中提出的方法有些不清楚。

因此，如果有人可以请逐步说明如何将 MWPhotobrowser 添加到项目中。屏幕截图以及答案将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:24:07.360

为此有一个 Cocoapod：请参阅[http://www.cocoacontrols.com/controls/mwphotobrowser](http://www.cocoacontrols.com/controls/mwphotobrowser)。

如果您以前没有使用过它，它是 iOS / Mac 项目的包依赖管理器。它使向您的项目中添加库变得更加容易。

编辑：您需要先安装 Xcode 命令行工具，然后才能使用（请参阅[此处](https://stackoverflow.com/questions/9329243/xcode-4-4-command-line-tools)）

按照以下位置的安装说明进行操作：

[http://cocoapods.org/](http://cocoapods.org/)

然后在您的“podfile”中添加以下行：

```
pod 'MWPhotoBrowser', '~> 1.0.1' 
```

然后输入

```
pod install 
```

它应该自动为您处理 ARC 与非 ARC。

# php - 我想使用 php 修改 xml 文件中的现有数据

> ID：15156464
> 
> 赞同：0
> 
> 时间：2013-03-01T11:19:46.567
> 
> 标签：php, xml

这是我的xml文件

```
<books>
  <book>
      <author>Jack Herrington</author>
      <title>PHP Hacks</title>
      <publisher>O'Reilly</publisher>
  </book>
  <book>
      <author>Jack Herrington</author>
      <title>Podcasting Hacks</title>
      <publisher>O'Reilly</publisher>
  </book>
</books> 
```

我需要编辑第二个标题`<title>Podcasting Hacks</title>`以`<title>Podcasting Pops</title>`使用 php 脚本。

任何人都给我一个建议来做这件事。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:55:44.823

文件'test.php'：

```
<?php
include 'books.php';
$b=new books();
//1\. load books from xml to array
$arr=$b->load('books.xml');         

//2\. modify title
for($i=0,$ms=count($arr);$i<$ms;$i++)
{
  if($arr[$i]['fields']['title']=='Podcasting Hacks')
  {
     $arr[$i]['fields']['title']='Podcasting Pops';
  }
}

//3\. save array to xml
$b->save('out.xml',$arr);           
?> 
```

文件'books.php'：

```
<?php
  class books
  {
     //load books from xml to array
     public function load($fname)
     {
        $doc=new DOMDocument();

        if($doc->load($fname))  $res=$this->parse($doc);
        else                    throw new Exception('error load XML');

        return $res;
     }

     private function parse($doc)
     {
        $xpath = new DOMXpath($doc);
        $items = $xpath->query("book");
        $result = array();
        foreach($items as $item)
        {
           $result[]=array('fields'=>$this->parse_fields($item));
        }
        return $result;
     }

     private function parse_fields($node)
     {
        $res=array();
        foreach($node->childNodes as $child)
        {
           if($child->nodeType==XML_ELEMENT_NODE)
           {
              $res[$child->nodeName]=$child->nodeValue;
           }
        }
        return $res;
     }

     //save array to xml
     public function save($fname, $rows)
     {
        $doc = new DOMDocument('1.0','utf-8');
        $doc->formatOutput = true;

        $books = $doc->appendChild($doc->createElement('books'));

        foreach($rows as $row)
        {
           $book=$books->appendChild($doc->createElement('book'));
           foreach($row['fields'] as $field_name=>$field_value)
           {
              $f=$book->appendChild($doc->createElement($field_name));
              $f->appendChild($doc->createTextNode($field_value));
           }
        }

        file_put_contents($fname, $doc->saveXML());
     }

  }
?> 
```

# python - 如何将Qt图形场景项目保存在文件中并再次打开？

> ID：15156465
> 
> 赞同：1
> 
> 时间：2013-03-01T11:19:53.477
> 
> 标签：python, qt, qt4, pyqt, pyside

我对文件流式传输和尝试将场景项目保存到文件以供以后使用没有任何经验。我将 PySide 与 Qt 4.7 库一起使用。我是否必须使用 writeRawData 来保存项目列表或什么？

我将不胜感激任何帮助。一些例子会让我很开心。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:42:23.023

无法将 QGraphicsItem 直接保存在可以重新加载的文件中（像素图中除外）。

但是，您可以创建一个文件，其中包含视图中每个项目的描述。您要做的是列出定义每个项目的所有信息（项目类型、位置、形状等）并将它们存储在文件中。

例如，为 rect、ellipse 和 line items 收集信息：

```
scene = QGraphicsScene();
scene.addEllipse( 100, 100, 50, 50 )
scene.addRect( 200, 12, 120, 50 )
scene.addLine( 50, 70, 100, 400 )

for item in scene.items():
    if item.type() == QGraphicsEllipseItem().type():
        print "Ellipse",  item.rect()
    elif item.type() == QGraphicsRectItem().type():
        print "Rectangle",  item.rect()
    elif item.type() == QGraphicsLineItem().type():
        print "Line", item.line().p1(), item.line().p2() 
```

# sql - sql server 2008中的round函数

> ID：15156466
> 
> 赞同：0
> 
> 时间：2013-03-01T11:19:58.363
> 
> 标签：sql, sql-server-2008-r2, rounding

我有一个查询，它对特定列名的值进行四舍五入：

```
 select round([CIMtrek_CI_Act],0) as CI FROM [CIMtrek_SystemTable_DatawareHouse] 
```

其中 [CIMtrek_CI_Act_33] 不为空且 CIMtrek_CIMtrekUniqueID = 1917

结果是

```
CI
1 
```

但是当我执行以下查询时：

```
(SELECT  (SELECT [T1].[CIMtrek_CIMtrekUniqueID]  AS [CIMtrek_CIMtrekUniqueID]
,round([T1].[CIMtrek_CI_Act],0)   AS [CIMtrek_CI_Act]
 FROM [CIMtrek_SystemTable_DatawareHouse] T1 
 WHERE T1.CIMtrek_CIMtrekUniqueID = 1917 
 FOR  XML PATH('Record'), TYPE )) FOR XML PATH('Root') 
```

结果是

```
<Root>
  <Record>
    <CIMtrek_CIMtrekUniqueID>1917</CIMtrek_CIMtrekUniqueID>
    <CIMtrek_CI_Act>1.000000000000000e+000</CIMtrek_CI_Act>
  </Record>
</Root> 
```

该值未四舍五入。

如果值`10.58`比我必须得到的`11`。此外，该字段是`varchar`如果没有值我必须得到`empty`字符串而不是`0`.

我在这里犯了什么错误以及如何解决

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:24:42.397

它是圆形的。您看到的是 SQL Server 的 XML 文本表示`float`。

如果您不喜欢这样，请在舍入后将其转换为整数。

```
cast(round([T1].[CIMtrek_CI_Act],0) as int) 
```

# hash - 自定义协议消息哈希

> ID：15156471
> 
> 赞同：1
> 
> 时间：2013-03-01T11:20:17.723
> 
> 标签：hash, cryptography, protocols

我正在开发一个基于互联网/有线应用程序级别的自定义协议，目前正在使用 SHA1，但是它没有有效地增加传输所需的字节数。

该算法应该创建一个小而有效的 [Message] 散列（可以是任何二进制数据）

我搜索了谷歌和部分维基百科，找不到合适的哈希算法。

所以你知道，协议是这样的：

```
[Length] [LengthOfHash][LengthOfMessage][Hash][ Message.... ] 
```

任何人都可以建议或提供有关合适的哈希算法的信息，并在可能的情况下提供示例实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:11:27.010

你想用哈希实现什么？

您可以将 SHA-1 哈希截断为您想要的任何长度，但如果您将其截断太远，攻击者可能会通过蛮力破坏哈希应该提供的保护。

特别是，基于[这些基准测试](http://www.cryptopp.com/benchmarks.html)，即使是稍微老化的 1.83 GHz 台式机 CPU，每个内核每秒也可以评估大约 2 ^(23 SHA-1 哈希值。)这意味着，如果你将散列截断为 32 位，攻击者可以在不到 10 分钟的时间内轻松找到一个字符串散列到他们想要的任何值——如果他们拥有快速的现代多核 CPU，甚至更快。

（当然，还有更快的方法来蛮力散列。[比特币矿工](http://en.wikipedia.org/wiki/Bitcoin#Bitcoin_mining)喜欢使用显卡，它[显然](https://en.bitcoin.it/wiki/Mining_hardware_comparison)可以达到每秒2 ^(31)个散列 - 这是针对 SHA-256 的，它通常比 SHA 慢 50% -1\. 当然，这项工作非常容易并行化，因此您只需支付几美元即可从 Amazon EC2 租用几百个额外的 CPU，或者甚至购买/构建一些自定义哈希破解硬件。或者，如果您重新成为*真正的*黑帽黑客，只需使用您的僵尸计算机僵尸网络，无需支付任何费用。）

为了相当安全地抵御暴力[原像攻击](http://en.wikipedia.org/wiki/Preimage_attack)，我建议哈希长度*至少为*64 位：即使有 1000 台计算机每台每秒尝试 2 ^(32)次哈希，暴力破解仍然需要几个月的时间。

此外，如果您还需要[抗碰撞性（即攻击者无法向您提供两个哈希值相同的不同字符串），那么由于](http://en.wikipedia.org/wiki/Collision_resistance)[生日效应](http://en.wikipedia.org/wiki/Birthday_problem)，您需要将其加倍至 128 位。无论如何，您也不应该使用 SHA-1，因为有[已知的比蛮力碰撞发现攻击更好](http://en.wikipedia.org/wiki/SHA-1#Attacks)。请改用其中一种[SHA-2](http://en.wikipedia.org/wiki/SHA-2)函数。

# xslt - 使用自定义 XSLT 文件进行映射时，更改在本地测试时有效，但在部署到服务器时失败

> ID：15156473
> 
> 赞同：3
> 
> 时间：2013-03-01T11:20:26.730
> 
> 标签：xslt, biztalk

我在 BizTalk 2010 中有一个使用[自定义 XSLT 路径](http://msdn.microsoft.com/en-us/library/aa560154.aspx)文件的地图。

在 Visual Studio 中对 .xsl 文件中的转换进行更改后，我使用内置工具测试地图文件（右键单击 .btm 文件并选择**Test Map**）。

这一切都按预期工作，并在 Visual Studio 中生成所需的输出文件。

但是，在将程序集部署到 BizTalk 时，我发现我的任何转换更改都没有反映出来。重新启动主机实例、终止活动实例等都无法解决问题。

为什么我的更改不能进入 BizTalk？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-02T06:11:34.177

同意这是 Visual Studio 中的一个烦恼。

最适合我的是在地图项目上“显示所有文件”以便`.btm.cs`文件可见，然后删除`.btm.cs`与已更改的地图关联的那些文件。然后重建将强制 VS 重新生成`.btm.cs`文件并拉出新的 xslt。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:20:26.730

BizTalk 映射文件本身 (.btm) 是被编译的。更改转换时，实际上只编辑了 .xsl 文件，因此 Visual Studio 没有意识到需要重新编译程序集。

要解决此问题，您需要确保 .btm 文件也被编辑。这将迫使全部重新编译。

在**BizTalk 2009**中，只需打开 .btm 文件并点击`Ctrl`+`S`来保存地图似乎就可以解决问题，因为它会更新文件底层 XML 中的时间戳。

但是，在**BizTalk 2010**中，这似乎不起作用，因为时间戳不再存在。似乎强制重新编译的最简单方法是删除对自定义 .xsl 文件的引用，然后再次将其重新添加，如[本博客](http://www.modhul.com/2007/06/08/xslt-map-changes-to-not-appear-when-re-deploying-biztalk-projects/)评论中所建议的那样。

还有一个建议是执行**重建**可以解决问题，但我个人并没有用这种方法取得任何成功。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T15:33:46.220

在 BizTalk 2010 中，您只需将路径重新粘贴到要在地图属性窗口的自定义 XSLT 路径中使用的 XSLT。即使您使用与以前相同的文件，这似乎也算作一次触摸。

# c# - ASP.NET 启动页面，用于在数据库中记录用户详细信息

> ID：15156474
> 
> 赞同：0
> 
> 时间：2013-03-01T11:20:29.583
> 
> 标签：c#, asp.net, .net, sql-server-2008

每次用户进入 ASP.NET 网站时，我都需要在后端 SQL 数据库表中插入一条记录（用户名、部门）（仅当用户在表中唯一时）。

我是 ASP.NET 的新手 - 每个用户会话仅运行一次的页面/功能在哪里，我可以在其中输入代码来捕获此详细信息？用户可以从多个页面进入站点。

您的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:24:13.850

它不在页面上。它`global.asax`在

```
void Session_OnStart() {
   // your code goes here.
} 
```

# php - 执行内部的数组失败

> ID：15156479
> 
> 赞同：1
> 
> 时间：2013-03-01T11:20:39.970
> 
> 标签：php, pdo

为什么这个有效

```
 class xyz{
    private $_db;
            function __construct(){

        //database connection 
    }

    function abc($login,$pass,$email){
        $l = "login";
        $check = $this->_db->prepare("SELECT userid FROM users WHERE login = ?");
        $check->execute(array($login));
        $res1 = $check->fetch(PDO::FETCH_NUM);
        return var_dump($res1);
    }
} 
```

如果我将登录的行选择更改为变量，则代码返回 bool false

```
 class xyz{
    private $_db;
    function __construct(){

        //database connection 
    }

    function abc($login,$pass,$email){
        $l = "login";
        $check = $this->_db->prepare("SELECT userid FROM users WHERE ? = ?");
        $check->execute(array($l,$login));<<<<<-----THIS $l FAILS TO WORK
        $res1 = $check->fetch(PDO::FETCH_NUM);
        return var_dump($res1);
    }
} 
```

使用不同的行选择及其值执行 3 个完全相同的查询的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:23:37.507

您不能在准备好的语句中参数化列名：http: [//us3.php.net/manual/en/book.pdo.php#69304](http://us3.php.net/manual/en/book.pdo.php#69304)

这里还有更多：[哪些标记可以在 PDO 准备语句中参数化？](https://stackoverflow.com/questions/1622521/which-tokens-can-be-parameterized-in-pdo-prepared-statements)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:25:16.663

1.  在提问之前阅读[标签维基。](https://stackoverflow.com/tags/pdo/info)
2.  除其他外，有人说“占位符不能代表查询的任意部分，而**只能代表完整的数据文字**。”
3.  标识符必须被格式化**和**列入白名单，而不是参数化。您可以在标签 wiki 中查看示例。
4.  使用不同的行选择及其值执行 3 个完全相同的查询的最佳方法是运行一个查询，将所有条件设置到其中。

# html - 相同的 HTML 电子邮件在 Outlook 和 iPad 电子邮件中应该看起来不同

> ID：15156480
> 
> 赞同：0
> 
> 时间：2013-03-01T11:20:45.843
> 
> 标签：html, css, ipad, email, outlook

我开发了一个在 Windows 和 iPad 上运行的工作流应用程序。

现在，我想向我的用户发送电子邮件，允许他们从他们的电子邮件客户端打开应用程序（如果他们从 Windows 笔记本电脑运行 Outlook；如果他们在路上运行，则使用 iPad 电子邮件）。

对于 Windows，我能做到这一点的唯一方法是附加一个我的应用程序注册打开的文件（其中将包含我想传递给应用程序的信息）。

对于 iPad，我将包含一个超链接，使用我的应用程序专门注册的自定义 URL 方案。

可以从两种设备中的任何一种打开相同的电子邮件：有没有办法在 iPad 上查看时隐藏附件，在 Outlook 中查看时隐藏超链接？

我知道我也可以注册 iPad 应用程序来打开相同类型的文件，但我更喜欢超链接选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:34:18.243

使用 CSS @media 查询，您可以（并且应该）战略性地隐藏元素以优化手机显示和桌面电子邮件客户端显示

[所有电子邮件客户端](http://www.campaignmonitor.com/css/)css 属性的电子邮件中什么和什么不使用的参考指南

并使用它来检查它是 ipad 还是 pc

```
/* Smartphones (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 320px) 
and (max-device-width : 480px) {
/* Styles */
}

/* Smartphones (landscape) ----------- */
@media only screen 
and (min-width : 321px) {
/* Styles */
}

/* Smartphones (portrait) ----------- */
@media only screen 
and (max-width : 320px) {
/* Styles */
}

/* iPads (portrait and landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) {
/* Styles */
}

/* iPads (landscape) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : landscape) {
/* Styles */
}

/* iPads (portrait) ----------- */
@media only screen 
and (min-device-width : 768px) 
and (max-device-width : 1024px) 
and (orientation : portrait) {
/* Styles */
}

/* Desktops and laptops ----------- */
@media only screen 
and (min-width : 1224px) {
/* Styles */
}

/* Large screens ----------- */
@media only screen 
and (min-width : 1824px) {
/* Styles */
}

/* iPhone 4 ----------- */
@media
only screen and (-webkit-min-device-pixel-ratio : 1.5),
only screen and (min-device-pixel-ratio : 1.5) {
/* Styles */
} 
```

使用 display:none / block 根据您的要求显示隐藏

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:15:04.647

以下似乎有效：

```
<style>
    .outlook {display:block}
    .iPad {display:none}

    @media screen and (-webkit-min-device-pixel-ratio:0) {
      .outlook {display:none}
      .iPad {display:block}
    }
</style> 
```

# python - 执行这些 python 列表推导的有效方法

> ID：15156482
> 
> 赞同：0
> 
> 时间：2013-03-01T11:20:53.620
> 
> 标签：python, iteration, variable-assignment, list-comprehension

我有这段原始代码：

```
for x in rawFile:
    line += 1
    if line%2 == 0:
        self.newList.append(x.rstrip())
        self.timeStamp.append('0') 
```

然后我看到它有多丑，并想用列表推导来完成它，因此我将它重写为：

```
self.newList = [x[1].rstrip() for x in enumerate(rawFile) if x[0]%2 == 0]
self.timeStamp = ['0' for x in self.newList[]] 
```

虽然第二个对我来说肯定看起来更“pythonic”，但我仍然不喜欢我实际上必须执行一次额外迭代的事实。这可能是一个疯狂的问题，但是有没有人知道我可以在一个迭代/行中更有效地完成这种理解的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:27:57.480

尝试这个：

```
self.newList, self.timeStamp = zip(*((x.rstrip(), '0') for i, x in enumerate(rawFile) if i%2==0)) 
```

不能说效率，但它*是*一个班轮。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T11:32:56.447

```
from itertools import islice
self.newList = [x.rstrip() for x in islice(rawFile, 1, None, 2)]
self.timestamp = ['0'] * len(self.newlist) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T11:43:15.440

由于您正在寻找更多 Pythonic 的东西，因此这是我的建议：

```
for lineno, line in enumerate(rawFile):
    if lineno % 2 == 0:
        self.newList.append(line.rstrip())
        self.timeStamp.append('0') 
```

请注意，我故意不使用列表推导。尽管它们很棒，但我认为它们在这种特殊情况下并没有太大帮助。

# python - 谁能向我解释从列表中制作集合的两种变体的区别？

> ID：15156483
> 
> 赞同：0
> 
> 时间：2013-03-01T11:20:56.827
> 
> 标签：python, set

我是python新手，我很困惑。谁能向我解释从列表中制作集合的两种变体的区别？哪一个更正确？

```
a = ["Jake", "John", "Eric"]
b = ["John", "Jill"]
c = set([])
d = set([])
for i in range (len(a)):
    c.add(a[i])

for y in range (len(b)):
    d.add(b[y])
print c.difference(d)    
import sets
e= sets.Set(a)
print e
f = sets.Set(b)
print f
print e.difference(f)

Outcome
set(['Jake', 'Eric'])
Set(['Jake', 'Eric']) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:24:10.330

将列表转换为集合不需要 for 循环：

```
a = ["Jake", "John", "Eric"]
b = ["John", "Jill"]
print set(a) - set(b) 
```

使用`set`object 而不是`sets.Set()`,`sets.Set()`已被弃用。

# com - 使用 AHK 搜索 Exchange 邮箱中每个 msg 的 TXT - 而不是 Outlook

> ID：15156485
> 
> 赞同：0
> 
> 时间：2013-03-01T11:21:05.083
> 
> 标签：com, exchange-server, autohotkey

我从 AHK 论坛获得了这个代码片段，我希望我只是缺少一行代码来取得成功。我想让用户在 INPUTBOX 中输入字符串。然后我想遍历特定邮箱中的所有电子邮件——比如“Deliveries”——当它找到包含该字符串的 txt 时，在继续循环中的下一个 msg 之前采取某些操作。

帮助？

```
Loop, 10 {
; Loop through all the MailItems in the Inbox Folder
  MailItems := Folders.item("Deliveries").Items
  Loop, % MailItems.Count {
   Item := MailItems.item(A_Index)
    {
    ; Add code to copy txt of each msg into a var
    ; Check if that var CONTAINS the specified string and act accordingly 
    msgtxt: = Item.Body ????
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:15:29.313

由于我没有运行 Outlook（假设那是电子邮件客户端），因此我创建了一些伪代码进行尝试。不确定这是否会正常运行。我添加了`Alt`+`F12`来启动它。

```
!F12::
InputBox, MySearchString, Search, Please enter a search string.
Loop, 10 ; Loop through the MailItems in the Deliveries Folder
{
    MailItems := Folders.item("Deliveries").Items
    Loop, % MailItems.Count
    {
        EmailText = MailItems.Body
        EmailSubject = MailItems.Subject
        IfInString, EmailText, %MySearchString%
        {
            MsgBox, The string: %MySearchString% was found in message: %EmailSubject% .
            return
        }
    }
} 
```

# android - libc 致命信号 11 (sigsegv) 在 (code=1) android 4.1.1 phonegap

> ID：15156487
> 
> 赞同：1
> 
> 时间：2013-03-01T11:21:21.000
> 
> 标签：android, cordova, admob

我使用cordova 2.2.0 在phonegap 中创建了一个示例应用程序并集成了adMob。我的问题是它可以在所有设备上运行，但只在 android 4.1.1 中崩溃。当我评论 admob 代码时，它工作正常。我不知道为什么会发生这个错误。给我任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-13T07:29:59.640

我在带有**Android 4.1.2的****Samsung Galaxy S2**上遇到了同样的错误。它总是通过使用多个 jQuery 操作在 html 上点击很多来出现。**`<div>`**

 **通过使用 html`<button>`而不是 html ，错误消失了`<div>`。也许在插件adMob中，有很多`<div>`'？**

# html - 如何标记电子邮件地址和电话号码

> ID：15156490
> 
> 赞同：7
> 
> 时间：2013-03-01T11:21:24.640
> 
> 标签：html

使用 html5 语义，标记页面的联系人部分的正确方法是什么，即：

```
<div class="contact">
    <h3>Contact me</h3>
    <p>Telephone: <span>01111 1111</span></p>
    <p>Email: <span><a href="mailto:me@me.com">me@me.com</a></span></p>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T11:39:20.260

您可以使用主要搜索引擎都支持的[微格式](http://microformats.org/get-started)或微数据（例如使用[schema.org的语法）。](http://schema.org/docs/schemas.html)

我不能确定哪个是标准，因为当我看到这个时，他们周围有很多讨论。但认为应该使用的是微数据。我个人更喜欢微数据，因为它们更灵活，有更多选择，而且不使用类。

**编辑** 这里是来自[whatwg的microdate的规格和](http://www.whatwg.org/specs/web-apps/current-work/multipage/microdata.html)[w3c](http://www.w3.org/html/wg/drafts/microdata/master/)的草案

*使用带有schema.org*语法的微数据的示例

```
<div itemscope itemtype="http://schema.org/Person">
  <p>Telephone:  <span itemprop="telephone">01111 1111</span></p>
  <p>Email: <a href="mailto:me@me.com" itemprop="email">me@me.com</a></p>
</div> 
```

为了完成还有一个微格式的例子：

```
<div class="vcard">
    <p>Telephone:  <span class="tel">01111 1111</span></p>
    <p>Email: <a class="email" href="mailto:me@me.com">me@me.com</a></p>
</div> 
```

# mysql - 如何避免Tomcat启动过程中的几分钟延迟

> ID：15156495
> 
> 赞同：0
> 
> 时间：2013-03-01T11:21:35.897
> 
> 标签：mysql, tomcat, bonecp

我们在许多生产服务器上的服务器启动过程中遇到了几分钟的严重延迟，但无法在测试环境中重现。有人对如何调试或修复此问题有任何建议吗？它发生在 Tomcat 6 和 Tomcat 7 上

我们的设置是 Tomcat 7 Spring 3.1.2 Hibernate 4.1.7 BoneCP 0.7.1 Mysql connection 5.1.23 New Relic

**好像**和Bone CP有关

```
[MSA] DEBUG [2013-02-18 14:58:34,903] DefaultListableBeanFactory.invokeInitMethods(1498) | Invoking afterPropertiesSet() on bean with name 'dataSource'
[MSA] DEBUG [2013-02-18 14:58:34,919] BoneCPDataSource.maybeInit(148) | JDBC URL = jdbc:mysql://1.1.1.1:3306/db_prod?createDatabaseIfNotExist=true&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;sessionVariables=FOREIGN_KEY_CHECKS=0, Username = xyz, partitions = 3, max (per partition) = 30, min (per partition) = 10, helper threads = 3, idle max age = 3 min, idle test period = 2 min
[MSA] DEBUG [2013-02-18 15:01:11,474] DefaultListableBeanFactory.doGetBean(245) | Returning cached instance of singleton bean 'managerTx' 
```

我们的 Bone CP 设置如下

```
<bean id="dataSource"
   class="org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy">
   <property name="targetDataSource">
       <ref local="mainDataSource" />
   </property>
</bean>

<bean id="mainDataSource" class="com.jolbox.bonecp.BoneCPDataSource" destroy-method="close">
    <property name="driverClass" value="${jdbc.driverClassName}"/>
    <property name="jdbcUrl" value="${jdbc.url}"/>
    <property name="username" value="${jdbc.username}"/>
    <property name="password" value="${jdbc.password}"/>
    <property name="idleMaxAgeInMinutes" value="3"/>
    <property name="idleConnectionTestPeriodInMinutes" value="2"/>
    <property name="maxConnectionsPerPartition" value="30"/>
  <property name="minConnectionsPerPartition" value="10"/>
  <property name="partitionCount" value="3"/>
  <property name="acquireIncrement" value="2"/>
  <property name="statementsCacheSize" value="100"/>
  <property name="releaseHelperThreads" value="3"/>
</bean> 
```

基于Mindas的建议。这是等待期间发生的事情的堆栈跟踪

```
"pool-3-thread-1" prio=10 tid=0x00007fd26c004000 nid=0x5c7e runnable   [0x00007fd2c4722000]
java.lang.Thread.State: RUNNABLE
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(SocketInputStream.java:150)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at com.mysql.jdbc.util.ReadAheadInputStream.fill(ReadAheadInputStream.java:114)
    at com.mysql.jdbc.util.ReadAheadInputStream.readFromUnderlyingStreamIfNecessary(ReadAheadInputStream.java:161)
    at com.mysql.jdbc.util.ReadAheadInputStream.read(ReadAheadInputStream.java:189)
    - locked <0x00000000ccf12490> (a com.mysql.jdbc.util.ReadAheadInputStream)
    at com.mysql.jdbc.MysqlIO.readFully(MysqlIO.java:3049)
    at com.mysql.jdbc.MysqlIO.readPacket(MysqlIO.java:597)
    at com.mysql.jdbc.MysqlIO.doHandshake(MysqlIO.java:1084)
    at com.mysql.jdbc.ConnectionImpl.coreConnect(ConnectionImpl.java:2465)
    at com.mysql.jdbc.ConnectionImpl.connectOneTryOnly(ConnectionImpl.java:2498)
    at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2283)
    - locked <0x00000000ccf04310> (a com.mysql.jdbc.JDBC4Connection)
    at com.mysql.jdbc.ConnectionImpl.<init>(ConnectionImpl.java:822)
    at com.mysql.jdbc.JDBC4Connection.<init>(JDBC4Connection.java:47)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.ConnectionImpl.getInstance(ConnectionImpl.java:404)
    at com.mysql.jdbc.NonRegisteringDriver.connect(NonRegisteringDriver.java:317)
    at java.sql.DriverManager.getConnection(DriverManager.java:579)
    at java.sql.DriverManager.getConnection(DriverManager.java:221)
    at com.jolbox.bonecp.BoneCP.obtainRawInternalConnection(BoneCP.java:256)
    at com.jolbox.bonecp.ConnectionHandle.obtainInternalConnection(ConnectionHandle.java:211)
    at com.jolbox.bonecp.ConnectionHandle.<init>(ConnectionHandle.java:170)
    at com.jolbox.bonecp.BoneCP.<init>(BoneCP.java:371)
    at com.jolbox.bonecp.BoneCPDataSource.maybeInit(BoneCPDataSource.java:150)
    at com.jolbox.bonecp.BoneCPDataSource.getConnection(BoneCPDataSource.java:112)
    at org.springframework.jdbc.datasource.LazyConnectionDataSourceProxy.afterPropertiesSet(LazyConnectionDataSourceProxy.java:163)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    - locked <0x00000000dc56d780> (a java.util.concurrent.ConcurrentHashMap)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:322)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:106)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1360)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1118)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:517)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)
    - locked <0x00000000dc56d780> (a java.util.concurrent.ConcurrentHashMap)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:06:03.720

在 Tomcat 卡住时发送`kill -3`（如果在 Unix 上，或在 Windows 上[相应的信号](https://stackoverflow.com/questions/2124672/java-stack-dump-on-windows)）到您的 Tomcat 进程 ID。您将在 中看到具有完整堆栈跟踪的所有线程`catalina.out`。

编辑：堆栈跟踪快照似乎正在启动连接。您能否验证（使用本地`mysql`客户端）您可以毫无延迟地连接（提示：DNS 问题）并快速执行命令——使用与 JDBC**完全相同的配置？**

# javascript - 如何移动组或数组中的所有对象以进行协调？

> ID：15156496
> 
> 赞同：0
> 
> 时间：2013-03-01T11:21:36.323
> 
> 标签：javascript, arrays, html5-canvas

有很多关于如何拖放对象的教程。但我找不到移动属于彼此的多个对象的东西。使用 KinectJS，您可以对多个对象进行分组，但我喜欢在不使用 KinectJS 的情况下使用这种方法。

我习惯拖放这个：[http ://simonsarris.com/blog/510-making-html5-canvas-useful](http://simonsarris.com/blog/510-making-html5-canvas-useful)

它工作得很好，但是你怎么能做到一次拖放所有对象呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T18:45:12.887

**拖动“分组”对象是一个大话题！**

非常总结：

```
1\. The user starts dragging the “group”.
2\. Use canvas.context.translate(x,y) to move to the X/Y 
   where you want the group to be drawn.
3\. Redraw each item in the group.
4\. Keep track of how much the group has moved in total (sumTranslateX/sumTranslateY).
5\. When the user drags again, repeat at step#1.
   (remember to translate by the current drag length PLUS the sumTranslateXY) 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/VezHW/](http://jsfiddle.net/m1erickson/VezHW/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-color: ivory; }
    canvas{border:1px solid red;}
</style>

<script>
$(function(){

    var img = new Image();
    img.onload = function(){
        boundingBoxWidth=this.width/2+100;   // add rocket+sun widths
        boundingBoxHeight=this.height/2+100; // add rocket+sun heights
        ctx.save();
        drawBoundingBox();
        drawRocket();
        drawSun();
        ctx.restore();
    };
    img.src = "http://images.christmastimeclipart.com/images/2/1271716593176_1788/img_1271716593176_17881.jpg";

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");
    var canvasOffset=$("#canvas").offset();
    var offsetX=canvasOffset.left;
    var offsetY=canvasOffset.top;
    var canvasWidth=canvas.width;
    var canvasHeight=canvas.height;
    var startingX;
    var startingY
    var boundingBoxWidth;
    var boundingBoxHeight;
    var sumTranslateX=0;
    var sumTranslateY=0;
    var deltaX=0;
    var deltaY=0;
    var isDragging=false;

    function handleMouseDown(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mousedown stuff here
      if( mouseIsInBoundingBox() ){
          startingX=canMouseX;
          startingY=canMouseY;
          isDragging=true;
      }
    }

    function mouseIsInBoundingBox(){
        return( canMouseX>sumTranslateX &&
                canMouseX<boundingBoxWidth+sumTranslateX &&
                canMouseY>sumTranslateY &&
                canMouseY<boundingBoxHeight+sumTranslateY);
    }

    function handleMouseUp(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mouseup stuff here
      if(isDragging){
          isDragging=false;
          sumTranslateX+=deltaX;
          sumTranslateY+=deltaY;
          console.log(sumTranslateX+" / "+sumTranslateY);
      }
    }

    function handleMouseOut(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mouseOut stuff here
      if(isDragging){
          isDragging=false;
          sumTranslateX+=deltaX;
          sumTranslateY+=deltaY;
          console.log(sumTranslateX+" / "+sumTranslateY);
      }
    }

    function handleMouseMove(e){
      canMouseX=parseInt(e.clientX-offsetX);
      canMouseY=parseInt(e.clientY-offsetY);

      // Put your mousemove stuff here
      if(isDragging){
          deltaX=canMouseX-startingX;
          deltaY=canMouseY-startingY
          ctx.save();
          ctx.clearRect(0,0,canvas.width,canvas.height);
          ctx.translate(sumTranslateX+deltaX,sumTranslateY+deltaY);
          drawBoundingBox();
          drawRocket();
          drawSun();
          ctx.restore();
      }
    }

    function drawRocket(){
        ctx.drawImage(img,0,0,img.width,img.height,0,100,img.width/2,img.height/2);
    }

    function drawSun(){
        ctx.beginPath();
        ctx.arc(img.width/2+50,50, 50, 0, 2 * Math.PI, false);
        ctx.fillStyle = 'yellow';
        ctx.fill();
    }

    function drawBoundingBox(){
        ctx.beginPath();
        ctx.strokeStyle="blue";
        ctx.strokeRect(0,0,boundingBoxWidth,boundingBoxHeight);
        ctx.stroke();
    }

    $("#canvas").mousedown(function(e){handleMouseDown(e);});
    $("#canvas").mousemove(function(e){handleMouseMove(e);});
    $("#canvas").mouseup(function(e){handleMouseUp(e);});
    $("#canvas").mouseout(function(e){handleMouseOut(e);});

}); // end $(function(){});
</script>

</head>

<body>

    <br/><p>The canvas has 2 objects "grouped" together (rocket & sun)</p>
    <p>Drag the "group"</p>
    <canvas id="canvas" width=400 height=400></canvas>

</body>
</html> 
```

# sql - 如何在 db2 中将日期和时间组合成时间戳？

> ID：15156502
> 
> 赞同：16
> 
> 时间：2013-03-01T11:21:56.087
> 
> 标签：sql, date, time, db2, timestamp

在`db2`数据库中，我有一`DATE`列和一`TIME`列，如何将它们组合成一个`TIMESTAMP`？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-01T11:25:28.613

可以使用两个参数调用该[`timestamp`函数，其中一个是日期，另一个是时间：](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0000859.html)

```
select timestamp(date_col,time_col) from your_table 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T11:25:40.593

根据[这个线程](http://www.iprodeveloper.com/forums/aft/52557)，该`[TIMESTAMP][2]`函数可以接受 2 个参数，因此您可以简单地将其传递`DATE`和`TIME`组件并`TIMESTAMP`为您构造。

```
SELECT MyDate, 
       MyTime, 
       TIMESTAMP(MyDate, MyTime) AS MyTimestamp 
FROM MyTable 
```

# php - PHP 的 pthreads 不在 Apache 中执行并行线程

> ID：15156503
> 
> 赞同：7
> 
> 时间：2013-03-01T11:21:58.913
> 
> 标签：php, pthreads, pthreads-win32

我正在使用 PHP 的[pthreads](http://pthreads.org/)扩展。当我在 Windows 上执行 PHP 脚本时`cmd`，我得到了并行线程，但是当我从 Apache 调用相同的脚本时，我得到了不同的结果，在我看来，这就像单线程执行。

我应该为 Apache 进行任何配置以获取类似`cmd`（并行）的响应吗？

```
class AsyncOperation extends Thread {
    public function __construct($arg){
        $this->arg = $arg;
    }

    public function run(){
        if($this->arg){
            for($i = 0; $i < 50; $i++) {
                echo "Yoo " . $this->arg . "<br>\n";
            }
        }
    }
}
$thread = new AsyncOperation("World ----------");
$thread2 = new AsyncOperation("Second -------------------------");
$thread->start();
$thread2->start();

for($i = 0; $i < 100; $i++) {
    echo "Standard <br>\n";
}

$thread->join();
$thread2->join(); 
```

示例代码给出如下响应`cmd`：

```
Yoo World ----------<br>
Yoo World ----------<br>
Yoo World ----------<br>
Standard <br>
Standard <br>
Yoo World ----------<br>
Yoo Second -------------------------<br>
Standard <br>
Standard <br> 
```

在网络浏览器中：

```
Yoo World ----------
Yoo World ----------
Yoo World ----------
Yoo World ----------
...
Yoo Second -------------------------
Yoo Second -------------------------
Yoo Second -------------------------
Yoo Second -------------------------
...
Standard 
Standard 
Standard 
Standard 
... 
```

更新：在不同的浏览器上我得到不同的结果；这个问题可能与缓冲区有关，我将对此进行调查。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T12:52:45.567

没有任何东西是模拟的，你正在执行真正的线程。

你不应该在SAPI模式下编写线程的标准输出，你会遇到无法控制的意外行为和错误，环境和SAPI太多，无法很好地覆盖它，所以根本没有覆盖，不要这样做它。

即使在 CLI 模式下复杂代码的输出也会出现乱码，要解决此问题，您可以在传递给负责编写标准输出的所有上下文的任何对象中定义受保护的方法，如果该方法受保护并且对象是 pthreads第一，一次只有一个上下文能够写入标准输出……通过将标准输出交换为日志数据库，可以在 SAPI 环境中使用相同的对象……

# javascript - 如何检查变量值是否包含在数组Javascript中

> ID：15156510
> 
> 赞同：0
> 
> 时间：2013-03-01T11:22:13.763
> 
> 标签：javascript, arrays

我有一个 ifElseif 语句，它使用基于 PresentationID 的 jQuery 排序将元素添加到列表中。我想防止多次添加相同的元素。

我想出的想法是创建一个名为“disregardList”的数组，并在 ifElseif 语句之前使用单独的 if 语句来检查presentationID是否已经包含在数组中，这不会在第一次出现。然后执行 ifElseif 语句，最后将当前的presentationID 添加到数组中。这是我到目前为止所拥有的。

```
 function presentationAddToAgenda(presentationId)
           {    

              var disregardList = new Array();

                 if (disregardList[i] != presentationId) 
                    {
                       ifElseif statement.......
                       {
                       Blaa Blaa Blaa 

                       disregardList.push("presentationId");

                    }
            }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:27:39.237

您提到您正在使用 jQuery，因此您可以使用该`jQuery.inArray()`函数来测试该值是否已经在您的忽略列表中，如下所示：

```
if ($.inArray(presentationId, disregardList) == -1) { // -1 means not found
    // do stuff
} 
```

# c#-4.0 - NetworkInterface.NetworkInterfaceType 将无线接口确定为 Windows 8 中的以太网类型

> ID：15156513
> 
> 赞同：3
> 
> 时间：2013-03-01T11:22:24.443
> 
> 标签：c#-4.0, networking, ip, ip-address, wifi

我有以下代码用于确定本地机器上无线接口的 IPv4

```
private List<IPAddressInformation> GetWifiIPAddresses()
{
    var list = new List<IPAddressInformation>();
    var networkInterfaces = NetworkInterface.GetAllNetworkInterfaces();

    foreach (var networkInterface in networkInterfaces)
    {
        if (networkInterface.NetworkInterfaceType == NetworkInterfaceType.Wireless80211)
        {
            var interfaceAddressList = networkInterface.GetIPProperties().UnicastAddresses;
            list.AddRange(interfaceAddressList.Where(interfaceIp => interfaceIp.Address.AddressFamily == AddressFamily.InterNetwork));
        }
    }

    return list;
} 
```

在 Windows 7 中，一切都像一个魅力，但在 Windows 8 中，我的 WLAN 接口被确定为以太网适配器。（NetworkInterfaceType == NetworkInterfaceType.Ethernet 而不是 NetworkInterfaceType.Wireless80211）

这是我的 WLAN 的 ipconfig 屏幕 ![在此处输入图像描述](../Images/60332a5dd61bc1d2ef53b273dea50392.png)

但它是一个无线适配器，在 Windows 7 中 ipconfig 将其显示为无线接口。

关于如何解决它的任何线索？是驱动程序问题还是 Windows 8 规格问题？我还能如何确定本地机器上的 WLAN IP 地址？

谢谢！

**编辑**：

这是因为 Hyper-V 虚拟交换机。Hyper-V 虚拟交换机覆盖了真实的物理适配器，因此 .NET 无法将其确定为 WiFi 适配器。

当我将“Hyper-V 虚拟交换机管理器”中的开关从我的物理无线适配器移除到 vEthernet 时，它就像在 Windows 7 中一样工作正常。

但是，转换后的虚拟交换机可能是为实际物理设备确定正确 IP 的大问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:34:11.077

切换开关有点相当于修改物理 LAN 上的网络基础设施……这是程序通常无法控制的。

机器将具有一个或多个网络适配器，因此它们在不同的操作时间可能具有不同的地址。如果您的问题是关于识别机器的 IP 地址，您可能需要重新构建它。为什么需要 IP 地址？这可能会提出解决问题的其他方法（包括对适配器名称使用启发式方法，而不是依赖于适配器类型）。

如果您需要考虑单个 IP 地址，也许您最好确定用于访问特定服务器的适配器并使用其 IP 地址。Win32 API GetBestRoute() 为您提供了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-08T11:58:09.970

# 这是完全可能的！

昨天遇到完全相同的问题并成功解决。

基本上我们得到了另一种接口类型，因为 Hyper-V 在创建虚拟交换机时做了一些桥接工作。这就是为什么当一个迭代时`NetworkInterface.GetAllNetworkInterfaces()`根本没有 wlan 接口，并且具有相同 IP 地址的新接口是一个虚拟接口，它也参与了带有无线适配器的网桥。

所以我们需要做以下事情：

1.  确定实际的硬件接口
2.  确定其实际类型

## 确定实际的硬件接口

Windows 中的网络接口以类似堆栈的方式组织。也就是说，一些接口可以位于其他接口之上，并且可能实际的硬件接口将位于这些东西的底部。

堆栈本身由一个记录数组表示，例如

```
[StructLayout(LayoutKind.Sequential)]
public struct MIB_IFSTACK_ROW
{
    public uint HigherLayerInterfaceIndex;
    public uint LowerLayerInterfaceIndex;
} 
```

where`HigherLayerInterfaceIndex`严格高于`LowerLayerInterfaceIndex`。有了这些信息和源接口索引，就可以很容易地确定实际的硬件接口索引：

1.  将当前索引设置为源接口索引
2.  虽然有一条`HigherLayerInterfaceIndex`等于当前索引的记录 - 将当前索引设置`LowerLayerInterfaceIndex`为该记录并再次重复
3.  如果没有`HigherLayerInterfaceIndex`等于当前索引的记录 - 当前索引是结果

使用 WinAPI 方法[GetIfStackTable](https://docs.microsoft.com/en-us/windows/win32/api/netioapi/nf-netioapi-getifstacktable)以检索网络接口堆栈信息。以下 P/Invoke 定义可能会有所帮助：

```
[StructLayout(LayoutKind.Sequential)]
public struct MIB_IFSTACK_ROW
{
    public uint HigherLayerInterfaceIndex;
    public uint LowerLayerInterfaceIndex;
}

[StructLayout(LayoutKind.Sequential)]
public struct MIB_IFSTACK_TABLE
{
    public uint NumEntries;
    public MIB_IFSTACK_ROW Table;
}

[DllImport("iphlpapi.dll", CallingConvention = CallingConvention.StdCall)]
public static extern Win32Error GetIfStackTable(out IntPtr table);

[DllImport("iphlpapi.dll", CallingConvention = CallingConvention.StdCall)]
public static extern void FreeMibTable(IntPtr memory); 
```

由于（显然）记录计数可能因调用而异，因此必须首先从 IntPtr 读取计数（uint32），然后逐个记录编组。下面的代码应该有助于理解这个想法（尽管由于我们内部的东西它不会编译）：

```
public static IEnumerable<MIB_IFSTACK_ROW> EnumIfStackTable()
{
    var error = GetIfStackTable(out var table);
    error.ToHRESULT().ThrowIfFailed();

    Contract.Assert(table != null);
    Contract.Assert(!table.IsInvalid);

    using (table)
    {
        var pointer = table.DangerousGetHandle();
        var entries = (uint)Marshal.ReadInt32(pointer);
        var rowPointer = IntPtr.Add(pointer, IfStackTableOffset);

        for (var i = 0; i < entries; i++)
        {
            yield return (MIB_IFSTACK_ROW)Marshal.PtrToStructure(rowPointer, typeof(MIB_IFSTACK_ROW));
            rowPointer = IntPtr.Add(rowPointer, IfStackRowSize);
        }
    }
} 
```

表偏移量和行大小是这样计算的：

```
internal static readonly int IfStackRowSize = Marshal.SizeOf(typeof(MIB_IFSTACK_ROW));
internal static readonly int IfStackTableOffset = (int)Marshal.OffsetOf(typeof(MIB_IFSTACK_TABLE), nameof(MIB_IFSTACK_TABLE.Table)); 
```

`FreeMibTable`完成接口堆栈后不要忘记调用。

## 确定硬件接口类型

有几个地方我们可以尝试找到具有索引的接口类型，但最可靠的方法是直接从 WinAPI 获取此信息。我建议使用[GetIfTable2](https://docs.microsoft.com/en-us/windows/win32/api/netioapi/nf-netioapi-getiftable2) WinAPI 函数——它允许我们枚举系统中存在的每个网络接口，并检查它的属性。不幸的是，这次 P/Invoke 对于这个答案来说太大了，但主要思想（和编组）与上一段中的相同。

拥有[MIB_IF_ROW2](https://docs.microsoft.com/en-us/windows/win32/api/netioapi/ns-netioapi-mib_if_row2)结构的数组，可以通过迭代此类数组并将`InterfaceIndex`属性与所需的接口索引进行比较来轻松找到所需的接口。当找到接口时 - 只需获取`Type`属性值并将其转换为`NetworkInterfaceType`- 就是这样，你太棒了！

为什么不使用其他方法：

1.  NetworkInterface.GetAllNetworkInterfaces() 可能不会返回我们想要的接口
2.  WMI [Win32_NetworkAdapter](https://docs.microsoft.com/en-us/windows/win32/cimwin32prov/win32-networkadapter) - 可能仍然显示错误的类型
3.  WMI [MSFT_NetAdapter](https://docs.microsoft.com/en-us/previous-versions/windows/desktop/legacy/hh968170(v=vs.85)) - 显示正确的适配器类型，但至少需要 Windows 8

## 有用的链接

*   [如何检测网络接口是否是以太网桥的一部分？](https://social.msdn.microsoft.com/Forums/vstudio/en-US/6dc9097e-0c33-427c-8e1b-9e2c81fad367/how-to-detect-if-network-interface-is-part-of-ethernet-bridge-?forum=wdk)
*   [GetIfStackTable MSDN](https://docs.microsoft.com/en-us/windows/win32/api/netioapi/nf-netioapi-getifstacktable)
*   [GetIfTable2 MSDN](https://docs.microsoft.com/en-us/windows/win32/api/netioapi/nf-netioapi-getiftable2)

# c++ - 如何从 msvc 2010 中的一个解决方案隐式链接（或引用）两个项目

> ID：15156514
> 
> 赞同：0
> 
> 时间：2013-03-01T11:22:29.310
> 
> 标签：c++, visual-studio-2010, visual-c++

我制作了这个库（.dll）并创建了另一个项目（.exe）来测试它。

我如何在 MSVS 2010 中做到这一点？

谷歌搜索了大约一个小时，我仍然没有答案。所以我决定在这里问。

`#include`我通过从指令中显式键入整个路径来进行链接。

来自 project2 (.exe)

```
#include "C:\...\project2.h" 
```

我怎么能做到这一点：

```
#include "project2.h" 
```

？？？

**编辑**

除了我的问题

*1*

我的动态（.dll）库已链接到静态（.lib）库。

而且我在那里显式地编写了链接，并且已经存在于要导入的头文件（.h）中。

我还应该将它链接到另一个项目吗？

*2*

我的库以 OOP 方式实现。

哪个更好用，（.dll）或（.lib）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:42:37.640

我为此使用属性表。

对于您创建的任何库，您还可以创建一个属性表。在该属性表中，将库的包含路径添加到全局包含路径，将其库路径添加到全局库路径，如果不使用 pragma 驱动的自动导入，则将其导入库添加到全局导入库。

如果该库依赖于其他库，则另外导入这些库的属性表。如果您有多个路径指向一个属性表，您可能需要做一些疯狂的事情来摆脱编译器 msbuild，但 Google 可以帮助您（只需 google 警告消息）。

这里的主要问题是如何指定路径。它对我有用，因为我的开发环境有一个所有解决方案都存在的目录，并且所有解决方案都在该主目录的下一级。所以我总是可以通过使用 $(SolutionDir)..\bar\foo\include 作为包含路径在解决方案栏中找到库 foo 的标题。这可能不适用于您的情况。

在 Visual Studio 2012 中，您应该能够使用 $(MSBuildThisFileDirectory) 来获取属性表文件所在的目录。我不确定这是否适用于 2010；我找不到它的文档，但它可能仍然存在。你应该试试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T10:55:35.020

我只是想通了。。

只需在文件或文件夹前加上“..\”即可上移一个目录

# regex - 小写且不以固定字母开头的正则表达式

> ID：15156520
> 
> 赞同：0
> 
> 时间：2013-03-01T11:22:44.897
> 
> 标签：regex

我竭尽全力让它发挥作用。
我只需要：
1\. 输入不应以 LOVE 开头。
2\. 并非所有有效字符都必须相同。
3\. 必须至少有 6 个有效字符（大写和数字），最多 18 个。
4\. 其他允许的字符是空格、& 符号 (&)、连字符、句号、斜线 (/)。

示例：允许 ERTYUII
不允许
afgTYULO（仅包含 5 个有效字符）
不允许 LOVE12345WERT（以 LOVE 开头）。
允许 asdERTY12^&（至少 6 个有效字符（ERTY12 大写和数字））
asAAertArtytyAtytytuArtyttyAyuyuyyA 不允许，即使我们有 6 个有效字符但它们都是相同的。

请指教。

注意：我编辑了这个问题，因为我忘记在我的作业中错过一些要点:(。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:27:21.293

*注意：此正则表达式与原始问题中给出的描述相匹配。此后，这些编辑大大改变了要求。*

如果我理解正确，这个正则表达式应该可以工作：

```
/^(?!LOVE)[^a-z]+$/ 
```

这将匹配不以 LOVE 开头且不包含小写字母的任何内容。

（注意：这假设一个标准的英文字母，仅限 az）

**解释：**

`^`并`$`锚定到字符串的开头和结尾。这会强制模式匹配*整个字符串*。

`(?!LOVE)`是前瞻。它会检查字符串是否以 LOVE 开头，但它根本不会将匹配位置向前移动。因此，正则表达式的其余部分仍然检查整个字符串。

`[^a-z]`一个否定字符类，匹配任何不是小写字母的字符。

`+`匹配前一个事物一次或多次。所以它匹配一个或多个不是小写字母的字符。

**更新：**

因此，您还想禁止仅重复相同字符的任何内容？这是一个匹配仅包含相同字符的字符串的正则表达式：

```
/^(.)\1+$/ 
```

`(.)`匹配单个字符并将其放入第一个捕获组。

`\1+`匹配捕获组的一次或多次出现。

在这种情况下，因为它匹配您不想要的输入，所以您必须检查正则表达式*是否不匹配*。

可以使用另一个前瞻将其组合在同一个正则表达式中：

```
 /^(?!LOVE)(?!^(.)\1+$)[^a-z]+$/ 
```

但是，随着您向同一个正则表达式添加越来越多的条件，它变得越来越难以理解。如果您必须进行多项检查，将它们分成不同的正则表达式通常更明智。

# c# - 编写异常处理代码的更好方法

> ID：15156521
> 
> 赞同：-4
> 
> 时间：2013-03-01T11:22:49.847
> 
> 标签：c#

在我的工作中，将近 60% 到 70% 的代码用于异常处理和记录这些异常。剩下 30% 到 40% 是业务逻辑。

有没有办法使用 EntLib 或任何其他可以在这里应用的概念来提取异常处理部分？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:25:18.457

这真的很容易。

做。不是。抓住。那。例外。

[http://www.codeproject.com/Articles/125118/Do-NOT-catch-that-exception](http://www.codeproject.com/Articles/125118/Do-NOT-catch-that-exception)

问题是所有那些只记录异常的异常块都不是很有用。大多数（如果不是全部）层都有方法允许您以结构化方式记录异常（WCF 有`IHErrorHandler`，ASP.NET 可以使用自定义`IHttpModule`，ASMX 可以使用自定义`SoapExtension`，WinForms/WPF 有`Application.ThreadException`）。这使得所有其他 try/catch/log 块完全无用。

只有在你能真正处理它们时才捕获异常（即履行方法契约）。也就是说，如果一个方法应该`User`只返回一个捕获异常，如果你可以处理错误并且这样做返回一个`User`。

# ios - 从带有按钮索引的 uiactionsheet 以编程方式截取屏幕截图

> ID：15156524
> 
> 赞同：0
> 
> 时间：2013-03-01T11:22:54.803
> 
> 标签：ios, xcode, uiactionsheet

我有一个 Action 方法来调用 UIActionsheet 来显示，我想从那里选择一个按钮来截取视图并使用 Mailcomposer 生成电子邮件。

调用 uiactionsheet 的 IBAction 方法运行良好。但按下按钮拍摄快照不起作用。有什么帮助吗？

这是我的代码

```
 CGSize imageSize = [[UIScreen mainScreen] bounds].size;
        if (NULL != UIGraphicsBeginImageContextWithOptions)
            UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0);
        else
            UIGraphicsBeginImageContext(imageSize);

        CGContextRef context = UIGraphicsGetCurrentContext();

        // Iterate over every window from back to front
        for (UIWindow *window in [[UIApplication sharedApplication] windows])
        {
            if (![window respondsToSelector:@selector(screen)] || [window screen] == [UIScreen mainScreen])
            {
                // -renderInContext: renders in the coordinate space of the layer,
                // so we must first apply the layer's geometry to the graphics context
                CGContextSaveGState(context);
                // Center the context around the window's anchor point
                CGContextTranslateCTM(context, [window center].x, [window center].y);
                // Apply the window's transform about the anchor point
                CGContextConcatCTM(context, [window transform]);
                // Offset by the portion of the bounds left of and above the anchor point
                CGContextTranslateCTM(context,
                                      -[window bounds].size.width * [[window layer] anchorPoint].x,
                                      -[window bounds].size.height * [[window layer] anchorPoint].y);

                // Render the layer hierarchy to the current context
                [[window layer] renderInContext:context];

                // Restore the context
                CGContextRestoreGState(context);
            }
        }

        // Retrieve the screenshot image
        UIImage *imageForEmail = UIGraphicsGetImageFromCurrentImageContext();

        UIGraphicsEndImageContext();

      //  return imageForEmail;

     //       UIImageWriteToSavedPhotosAlbum(imageForEmail, nil, nil, nil);

    MFMailComposeViewController *mailController = [[MFMailComposeViewController alloc] init];
    mailController.mailComposeDelegate = self;
    [mailController setSubject:@"Screenshot"];
    NSData *imageDataForEmail = UIImageJPEGRepresentation(imageForEmail, 1.0);
    [mailController addAttachmentData:imageDataForEmail mimeType:@"image/jpeg" fileName:@"ABC.jpg"];

    [self presentViewController:mailController animated:YES completion:NULL];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:16:19.867

您没有将 UIActionSheet 的委托设置为 self。将**UIActionSheetDelegate**添加到您的 .h 中，并将按钮操作代码替换为以下代码

```
-(IBAction) shareButtonClicked:(id)sender
{
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:@"Take a Screenshot and share with"
                                                     delegate:self
                                            cancelButtonTitle:@"cancel"
                                       destructiveButtonTitle:nil
                                            otherButtonTitles:@"Email", @"Message", @"Facebook", @"Twitter", nil];
    [actionSheet showInView:self.view];
} 
```

# python - 使用 Python 在文件中插入文本

> ID：15156527
> 
> 赞同：2
> 
> 时间：2013-03-01T11:23:04.193
> 
> 标签：python, file-io

我有几个 java 代码文件，我必须在每个文件中添加一个公共类级别变量。有很多文件，我需要编写一个 python 2.2 脚本来做同样的事情。

```
package xx.xx.xx;

import java.util.Properties;

public class MyClass extends YourClass{

    public myMethod() throws MyException {

    }
} 
```

预期产出

```
package xx.xx.xx;

import java.util.Properties;

public class MyClass extends YourClass{

    public static final String CO_ID = "XXXXX" 

    public myMethod() throws MyMException {

    }
} 
```

我知道 file.find('{') 给了我第一次出现 { 的索引，但我需要将其余代码向下推并在每个文件中插入我的公共成员。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T11:34:00.097

Python 有一个方便的工具：fileinput 模块：

```
import fileinput
import sys
import re

newline = '''\
{l}
    public static final String CO_ID = "XXXXX"
'''

filename = '/path/to/file.java'
for line in fileinput.input([filename], inplace=True, backup='.bak'):
    if re.match(r'public class', line):
        sys.stdout.write(newline.format(l=line))
    else:
        sys.stdout.write(line) 
```

* * *

*   `inplace=True,`“就地”更改文件。实际上创建了一个临时文件，然后将其移动到原始位置。
*   `backup='.bak'`告诉`fileinput.input`创建原始文件的备份。
*   `sys.stdout.write`使用而不是`print`因为`print`添加了一个额外的新行，而`sys.stdout.write`没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T16:56:41.163

Ubuntu 的代码有效，但我已针对 Python 2.2 Python 2.2 兼容代码进行了修改

```
import fileinput
import sys
import re

newline = '''\
%s
    public static final String CO_ID = "XXXXX"
'''

filename = '/path/to/file.java'
for line in fileinput.input([filename], inplace=True, backup='.bak'):
    if re.match(r'public class', line):
        sys.stdout.write(newline%line)
    else:
        sys.stdout.write(line) 
```

# db2 - 是否可以使用 IBM DB2 中的一个脚本将所有表设置为 GENERATED BY DEFAULT？

> ID：15156532
> 
> 赞同：0
> 
> 时间：2013-03-01T11:23:28.047
> 
> 标签：db2

我需要将所有表的主键列临时设置为 GENERATED BY DEFAULT 而不是 ALWAYS。我当然可以自己编译一个列表，但是是否可以“一次性”为特定模式中的所有表设置它？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:21:32.647

如果您使用的是 Mainframe DB2，那么此命令应该适合您（假设您的意思是键是一个 Identity 列，始终生成，还有其他默认代码，您可以在[Info Center 页面](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/topic/com.ibm.db2z9.doc.sqlref/src/tpc/db2z_sysibmsyscolumnstable.htm)上看到）：

```
SELECT 
    'ALTER TABLE ' ||
    RTRIM(TBCREATOR) || '.' || RTRIM(TBNAME) ||
    'ALTER COLUMN ' ||
    RTRIM(NAME) ||
    'SET GENERATED BY DEFAULT;'
FROM SYSIBM.SYSCOLUMNS
WHERE DEFAULT = 'I'
  AND TBCREATOR = @schema 
```

如果您使用的是 DB2 for LUW，那么应该这样做：

```
SELECT 
    'ALTER TABLE ' ||
    RTRIM(TABSCHEMA) || '.' || RTRIM(TABNAME) ||
    'ALTER COLUMN ' ||
    RTRIM(COLNAME) ||
    'SET GENERATED BY DEFAULT;'
FROM SYSCAT.COLUMNS
WHERE GENERATED = 'A'
  AND TABSCHEMA = @schema 
```

这只会生成所需的命令。您需要自己执行它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:44:38.687

您可以通过从目录中查询数据来生成查询。我的意思是，您创建一个返回 alter 命令的 Select，并将此输出发送到文件。在您只需要执行该文件的内容之后

(Linux/UNIX/Cywgin)

```
db2 -x "select 'alter table ' || trim(tabschema) || '.' || trim(tabname) || ' alter column ' || colname || ' set generated by default as identity ;' from syscat.columns where tabschema like 'DB2INS%' and keyseq >= 0" > test.sql
db2 -tvf file.sql 
```

但是，您必须检查生成的命令，如果执行，请检查返回值：

```
db2 create table t1 \(c1 int not null primary key, c2 int, c3 int\)
db2 create table t2 \(c21 int references t1 \(c1\), c22 int\)
db2 create table t3 \(c30 int, c31 int not null, c32 int not null, c33 int\)
db2 alter table t3 add primary key \(c31, c32\)
db2 create table t4 \(c40 int, c41 int, c42 int, c43 int\)
db2 alter table t4 add constraint fk foreign key \(c42, c43\) references t3

db2 -x "select 'alter table ' || trim(tabschema) || '.' || trim(tabname) || ' alter column ' || colname || ' set generated by default as identity ;' from syscat.columns where tabschema like 'DB2INS%' and keyseq >= 0" > test.sql

db2 -tvf test.sql
alter table DB2INS01.T1 alter column C1 set generated by default as identity
DB20000I  The SQL command completed successfully.
alter table DB2INS01.T3 alter column C31 set generated by default as identity
DB20000I  The SQL command completed successfully.
alter table DB2INS01.T3 alter column C32 set generated by default as identity
DB21034E  The command was processed as an SQL statement because it was not a
valid Command Line Processor command.  During SQL processing it returned:
SQL0372N  A column with data type or attribute ROWID, IDENTITY, security label,
or row change timestamp can only be specified once for a table.
SQLSTATE=428C1 
```

# breeze - 在投影中计数

> ID：15156533
> 
> 赞同：0
> 
> 时间：2013-03-01T11:23:32.103
> 
> 标签：breeze

假设我想显示一个包含订单数量的客户列表，但我不想获取所有订单，只获取数量。

我知道我可以在 webapi 控制器中执行一种特殊方法，该方法返回带有订单数量的客户集合，但是有没有办法从带有投影的 javascript 中做到这一点？

就像是：

EntityQuery.from("Customers").select("Customer, Customer.Orders.Count")

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T02:34:37.580

AFAIK，没有 Breeze 语法（也没有 OData 查询语法）可以满足您的需求。我认为您必须添加特殊的服务器方法。

如果您必须在客户**端**上定义客户投影（也许用户可以对客户属性进行*临时选择）***并且**您也需要订单计数，我们可以谈谈。这需要一些棘手的服务器端魔法，但可以做到。不要问，除非你真的，真的需要它:)。

# jquery - JQuery：按字母顺序显示和细分数据库检索到的元素

> ID：15156534
> 
> 赞同：0
> 
> 时间：2013-03-01T11:23:31.937
> 
> 标签：jquery, alphabetical

我从数据库中检索了一个名称列表，并在 jsp 页面中按字母顺序显示它们。

在页面的顶部，我会有一个可点击的字母表，这样通过点击一个字母，用户就可以转到正确的部分。

是否有一个 jquery 插件来实现这一点？或者？

**编辑**

ABC ....（如果有以 A 等开头的元素，则 A 是一个链接）

一个苹果

B 香蕉书

C ...

**编辑 2**

我正在尝试使用 jquery listnav 插件，[在这里](http://www.ihwy.com/labs/Demos/Current/jquery-listnav-plugin.aspx)

在jsp文件中，我有：

```
<script type="text/javascript" src="js/jquery.listnav-2.1.js"></script>
<script type="text/javascript">
    $(function(){
        $('#myList').listnav();
    });
</script> 
```

接着：

```
<div id="myList-nav"></div>
<ul id="myList">
<li>one</li>
<li>two</li>
<li>three</li>
<li>four</li>
<li>five</li>
</ul> 
```

该插件已正确加载，但萤火虫给出了消息：

```
TypeError: $(...).listnav is not a function
error source line: $('#myList').listnav(); 
```

我不明白我错在哪里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:48:56.877

如果我理解正确，您想根据第一个字母划分数据，然后允许用户能够通过该字母过滤一组结果，对吗？

[这不是一个 jquery 插件，其他人可能会写出更好的东西，但我在这里](http://jsfiddle.net/6WeBW/1/)为你写了一个 JSFiddle 。

它的基本工作方式是向它传递一个字符串数组，它将读取该数组并将数据拆分为单独的数组，用于从每个字符串的第一个字母中找到的字母表中的每个字母。然后它将为每个人创建一个按钮，单击该按钮仅显示该数据。

这实际上只是大量使用`for`循环的情况，因此加载可能非常慢，但是一旦加载，它应该会表现良好。

另一种方法是每次只选择与单击的第一个字母匹配的项目时遍历整个数组，这将减少加载时间，但对于一般用途来说会慢得多。

编辑 - 我现在已经创建了一个模块化版本，所以你可以简单地`AlphaSplit`用你的数组实例化一个新实例，然后在它上面调用 .create() 方法。[您可以在此处](http://jsfiddle.net/6WeBW/2/)查看工作版本。

# python - Wx.Python 非阻塞 GUI 启动和停止脚本/模块

> ID：15156544
> 
> 赞同：0
> 
> 时间：2013-03-01T11:23:54.437
> 
> 标签：python, multithreading, user-interface, module, wxpython

我希望能够从我的 GUI 运行和停止脚本/模块而不阻止它。我学习了一些关于线程和在 GUI 代码中运行“简单”长任务的基本知识。但是，所有示例都是关于可以双向中止的简单`while`或循环。`for`在大多数情况下，它是某种计数。

所以问题是：如何使用基于 wx.python 的 GUI 运行/停止外部脚本/模块？该脚本没有什么特别的，它可以是任何类型的长期任务。

这是基本的 wx.Python 示例代码！

```
import wx

class MyApp (wx.App):
    def OnInit(self):
        self.frame = MyFrame(None, title = 'Example')
        self.SetTopWindow(self.frame)
        self.frame.Show()

        return True

class MyFrame(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent, title=title ,style = (wx.MINIMIZE_BOX | wx.SYSTEM_MENU | wx.CAPTION | wx.CLOSE_BOX | wx.CLIP_CHILDREN))

        button1 = wx.Button(self,-1,'Start')
        button2 = wx.Button(self,-1, 'Stop')
        self.gauge1 = wx.Button(self, -1)

        box = wx.BoxSizer(wx.VERTICAL)

        box.Add(button1,1, wx.ALL, 10)
        box.Add(button2,1, wx.ALL, 10)
        box.Add(self.gauge1,1,wx.EXPAND|wx.ALL,10)

        self.SetSizer(box, wx.EXPAND)

        self.Bind(wx.EVT_BUTTON, self.OnStart, button1)
        self.Bind(wx.EVT_BUTTON, self.OnStop, button2)

    def OnStart(self,e):
        pass

    def OnStop(self,e):
        pass

if __name__=='__main__':
    app = MyApp(False)
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:19:22.120

您正在调用的脚本将需要一些机制来彻底退出，否则您将不得不处理混乱。我会使用 Python 的 subprocess 模块来启动外部脚本，然后在需要时使用 psutil ( [https://github.com/giampaolo/psutil](https://github.com/giampaolo/psutil) ) 之类的东西来杀死它。这将需要您使用子进程获取进程 id (pid) 并跟踪它，以便以后可以将其杀死。

我在这里写了一个在 wxPython 中使用 psutil 的示例：http: [//www.blog.pythonlibrary.org/2012/07/13/wxpython-creating-your-own-cross-platform-process-monitor-with-psutil/](http://www.blog.pythonlibrary.org/2012/07/13/wxpython-creating-your-own-cross-platform-process-monitor-with-psutil/)

# c# - 如何创建自定义授权属性？

> ID：15156545
> 
> 赞同：0
> 
> 时间：2013-03-01T11:23:58.697
> 
> 标签：c#, .net, visual-studio, asp.net-mvc-4, custom-attributes

我正在尝试使用参数在我的 mvc4 应用程序上实现自定义授权属性。

我想要实现的是：

```
[Authorize(Application == "Initialize,Start,..." , Topic == "foo1,foo2,foo3...")]
public ActionResult Edit(int id)
{
   //rest
} 
```

属性也应该能够装饰控制器，不仅仅是方法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:37:46.187

您的[自定义授权属性](http://msdn.microsoft.com/en-us/library/ee707357%28v=vs.91%29.aspx)：

```
public class UberAuthorizeAttr : System.Web.DomainServices.AuthorizationAttribute
{
    public string Application {get;set;}
    public string Topic {get;set;}

    public override bool Authorize(System.Security.Principal.IPrincipal principal)
    {
        // your custom behaviour
    }
} 
```

你的控制器：

```
[UberAuthorizeAttr(Application = "Initialize,Start,..." , Topic = "foo1,foo2,foo3...")]
public ActionResult Edit(int id)
{
   //rest
} 
```

那是你要找的吗？

# entity-framework - 如何在 Entity Framework Code First 中使用流利的映射创建多个相同类型的非空属性

> ID：15156546
> 
> 赞同：1
> 
> 时间：2013-03-01T11:23:59.547
> 
> 标签：entity-framework, ef-code-first

我将 EF5 与 Code First 和 Fluent Mapping Approach 结合使用。这是我的场景，为清楚起见进行了精简：

```
public class SecuritySettings
{
   public int Id { set; set }
   public Company Company { get; set; }
   public int MaximumInvalidPasswordAttempts { get; set;
   // etc.
}

public class Company
{
   public int Id { set; set }
   public string Name { get; set; }
   public SecuritySettings InternalUserSecuritySettings { get; set; }
   public SecuritySettings ExternalUserSecuritySettings { get; set; }
} 
```

有了上面的内容，我在 Company 表中得到了两个 FK：

```
 InternalUserSecuritySettings_Id int, null
   ExternalUserSecuritySettings_Id int, null 
```

到现在为止还挺好。

我有用于设置流利映射的配置类 - 一个用于公司，一个用于 SecuritySettings。这些规定了所需的属性。在公司配置中，如果我执行以下操作：

```
HasRequired(x => x.InternalUserSecurityConfiguration); 
```

这导致：

InternalUserSecuritySettings_Id int，not null ExternalUserSecuritySettings_Id int，null

但是，如果我再添加这个：

```
HasRequired(x => x.ExternalUserSecurityConfiguration); 
```

我得到以下异常：

在表“Companies”上引入 FOREIGN KEY 约束“FK_dbo.Companies_dbo.SecuritySettings_ExternalUserSecurityConfiguration_Id”可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。

我试过了：

1.  .WithRequiredDependent(y => y.Company).WillCascadeOnDelete(false)
2.  .WithRequiredDependent(y => y.Company).Map(m => m.MapKey("ExternalUSC_Id"))

在其他此类排列中，但要么我得到一个例外，要么只创建了一个 FK。我想在实体配置的流畅映射中执行此操作 - 最好是公司之一。我是否遗漏了一些明显的东西。从非空值如此简单和琐碎的事情到发现很难简单地规定我想要一个密钥，并且两者都不能为空值，这似乎是一种耻辱。

我确实找到了一种通过对实际外键使用单独的属性来使其工作的方法，但首先，对于非空要求来说，这似乎是一项额外的工作，其次，我必须在 OnModelCreating 方法中声明很多配置使用一个“WithMany()”映射，这对我来说是违反直觉的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:39:33.060

您可以使用以下流利的方法使其与非空属性一起使用：

```
 modelBuilder.Entity<Company>().
            HasRequired(x => x.InternalUserSecuritySettings)
            .WithMany()
            .WillCascadeOnDelete(false);

        modelBuilder.Entity<Company>().
            HasRequired(x => x.ExternalUserSecuritySettings)
           .WithMany()
            .WillCascadeOnDelete(false); 
```

生成此数据库：

![在此处输入图像描述](../Images/1497f49eb622c081dd88a2839a0b574c.png)

但是 - 我有点担心您实体的`Company`财产。`SecuritySettings`您是否希望该导航属性映射到内部/外部`SecuritySettings`属性的另一端？如果是这样 - 这不能通过 EF 完成（您不能在一个实体上拥有一个属性，映射到其他 2 个属性）。考虑原因：如果您将 a 添加`Company`到`SecuritySetting`-

```
var CompanyA = new Company;
CompanyA.SecuritySettings(new SecuritySettings()); 
```

它应该映射到实体的哪一端`SecuritySettings`（内部或外部？）因为无法通过上面的场景来判断它是无效的。

您可以将 2 个不同`SecuritySettings`的集合添加到您的公司，然后您将有一个正确的映射。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T13:15:01.717

RE：Mark Oreta - 当我查看源代码控制历史时，公司财产最初并不存在 - 它一定是我的“让我们试试这个，看看会发生什么”的尝试之一！我已经删除了这个，因为我不需要在公司环境中引用安全设置。我确实有一个与你类似的版本，但我把你的作为答案，因为我能够从你的答案中引导至少能够在我的 CompanyConfiguration 类中添加所有映射，而不是在 OnModelCreating 方法中. 现在唯一的痛点是这些仍然是一对一的映射，WithMany() 不会推断或强制执行。因此，我可以强制执行此操作的唯一方法是使用独特的约束。不是很漂亮！感谢您的时间和回答。

编辑：

只是为了分享我对这个问题的当前版本的答案：

1.  公司配置类（DataEntityBaseConfiguration 继承自 EntityTypeConfiguration）

> ```
> public class CompanyConfiguration : DataEntityBaseConfiguration<Company>
>    {
>     public CompanyConfiguration()
>     {
>         Property(x => x.Name).IsRequired();
>         Property(x => x.Name).HasMaxLength(256);
>         HasRequired(x => x.InternalUserSecurityConfiguration).WithMany().WillCascadeOnDelete(false);
>         HasRequired(x => x.ExternalUserSecurityConfiguration).WithMany().WillCascadeOnDelete(false);
> 
>     }
>    } 
> ```

然后，在我的 Context Initialiser 类中，我添加以下代码行来对两个属性强制执行唯一约束：

```
AddUniqueConstraint<Company>(() => new Company().ExternalUserSecurityConfigurationId);
AddUniqueConstraint<Company>(() => new Company().InternalUserSecurityConfigurationId); 
```

AddUniqueConstraint 是我编写的用于执行 sql 以创建唯一约束的方法 -请点击[此处](http://www.jones.bz/index.php/2013/02/07/adding-unique-constraint-to-column-using-ef-code-first/)阅读更多信息。

# html - 显示不带 XMP 标记的源代码

> ID：15156549
> 
> 赞同：2
> 
> 时间：2013-03-01T11:24:01.743
> 
> 标签：html, xmp

如何在不使用 HTML5 网站上的 XMP 元素的情况下显示包含标签的 HTML 标记？

该网站由 HTML5 制成，并显示有关 HTML、C++ 等的教程。

所以我需要展示很多编程语言的源代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T21:40:09.090

最常用的替代方法是使用在 HTML 中具有特殊含义的`<pre>`or元素和转义字符。会变成，就是逃到。`<code>``<``&lt;``>``&gt;`

根据[Can I escape html tags within a class (recreate the xmp tag)?](https://stackoverflow.com/questions/14916975/can-i-escape-html-tags-within-a-class-recreate-the-xmp-tag) ，您仍然可以使用 XMP 标记。浏览器仍应支持它，尽管根据[<XMP> 标签的用途是什么？](https://stackoverflow.com/questions/4545/what-was-the-xmp-tag-used-for),`<pre>`是首选元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-05-24T05:33:08.490

<pre> 和 <code> 标签不提供与 <pre> 标签相同的功能。我认为他们从规范中删除它是一个错误，希望浏览器编写者永远不会删除它，因为我将继续在我认为合适的情况下使用它。

有时，您希望显示一段代码的确切内容（无论是 HTML、'C' 还是其他），并且不想引入引用 '<' 时可能出现的错误， '>' 和任何字符。也许它是您想要引用的有点大的“C”程序，也许是一些示例 HTML 代码。对于他们来说，删除标签而不提供可以做完全相同的事情的东西充其量是有点幼稚。

当您输入一些“C”代码并具有以下内容时，我查看了该站点生成的 HTML：

```
#include <stdio.h> 
```

在里面。它将 '<' 替换为 '<' 和 '>' 和 '>' （此时要正确输入，我必须更改为“&lt”和“&gt”）。从这里可以看出，当您尝试显示示例 HTML 文本并使用 pre 标记时，它会变得很复杂。我在使用 HTML 页面记录我编写的一些代码时第一次遇到这个问题，并且由于尖括号，stdio.h 的#include 没有显示正确。

# java - 尝试从 URL 加载可绘制图像时出现异常

> ID：15156550
> 
> 赞同：1
> 
> 时间：2013-03-01T11:24:07.023
> 
> 标签：java, android, eof

这是代码：

```
private static Drawable loadImageFromUrl(String url) {
    URL m;
    BufferedInputStream bis = null;
    Drawable d = null;
    try {
        m = new URL(url);
        URLConnection conn = m.openConnection();
        conn.connect();
        bis = new BufferedInputStream(conn.getInputStream());  <<--- EOF exception occurs.
        d =
                Drawable.createFromStream(bis,
                        url.substring(url.lastIndexOf("/") + 1, url.length()));
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
        try {
            if (bis != null) bis.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    return d;
} 
```

我的代码有什么问题吗？异常如下所示：

```
03-01 19:16:51.573: W/System.err(12554): java.io.EOFException
03-01 19:16:51.843: W/System.err(12554): java.io.EOFException
03-01 19:16:52.204: W/System.err(12554):    at libcore.io.Streams.readAsciiLine(Streams.java:203)
03-01 19:16:52.254: W/System.err(12554):    at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:547)
03-01 19:16:52.274: W/System.err(12554):    at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:787)
03-01 19:16:52.344: W/System.err(12554):    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:274)
03-01 19:16:52.354: W/System.err(12554):    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
03-01 19:16:52.703: W/System.err(12554):    at com.gurudigger.model.task.UserPhotoTask.loadImageFromUrl(UserPhotoTask.java:36)
03-01 19:16:52.864: W/System.err(12554):    at com.gurudigger.model.task.UserPhotoTask.doInBackground(UserPhotoTask.java:78)
03-01 19:16:52.883: W/System.err(12554):    at com.gurudigger.model.task.UserPhotoTask.doInBackground(UserPhotoTask.java:1)
03-01 19:16:53.003: I/InputQueue-JNI(12554): Sending finished signal for input channel '4163b660 com.gurudigger/com.gurudigger.activity.IdeaListActivity (client)' since it is being unregistered while an input message is still in progress.
03-01 19:16:53.063: W/System.err(12554):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
03-01 19:16:53.124: W/System.err(12554):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-01 19:16:53.244: I/InputQueue-JNI(12554): Ignoring finish signal on channel that is no longer registered.
03-01 19:16:53.503: W/System.err(12554):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-01 19:16:53.513: W/System.err(12554):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-01 19:16:53.694: W/System.err(12554):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-01 19:16:53.773: W/System.err(12554):    at java.lang.Thread.run(Thread.java:856)
03-01 19:16:53.813: W/System.err(12554):    at libcore.io.Streams.readAsciiLine(Streams.java:203)
03-01 19:16:53.994: W/System.err(12554):    at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:547)
03-01 19:16:53.994: W/System.err(12554):    at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:787)
03-01 19:16:54.024: W/System.err(12554):    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:274)
03-01 19:16:54.024: W/System.err(12554):    at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
03-01 19:16:54.024: W/System.err(12554):    at com.gurudigger.model.task.UserPhotoTask.loadImageFromUrl(UserPhotoTask.java:36)
03-01 19:16:54.024: W/System.err(12554):    at com.gurudigger.model.task.UserPhotoTask.doInBackground(UserPhotoTask.java:78)
03-01 19:16:54.064: W/System.err(12554):    at com.gurudigger.model.task.UserPhotoTask.doInBackground(UserPhotoTask.java:1)
03-01 19:16:54.064: W/System.err(12554):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
03-01 19:16:54.144: W/System.err(12554):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
03-01 19:16:54.163: W/System.err(12554):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
03-01 19:16:54.224: W/System.err(12554):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
03-01 19:16:54.333: W/System.err(12554):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
03-01 19:16:54.354: W/System.err(12554):    at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:29:33.500

为什么要创造已经存在的东西？只需使用这个库，它就很容易使用。

[URLImageViewHelper](https://github.com/koush/UrlImageViewHelper)

# ajax - 停止对 AJAX 请求的 jscrollpane jsp-scroll-y 事件的事件传播

> ID：15156552
> 
> 赞同：1
> 
> 时间：2013-03-01T11:24:09.860
> 
> 标签：ajax, events, jscrollpane, jquery-jscrollpane

我正在遇到一个情况！

每当用户滚动到滚动条的最底部时，我都会尝试更新 jscrollpane 中的内容。

没有找到解决方案，我尝试在滚动条位于底部时发送 ajax 请求。

但是，每次滚动条到达底部时，事件都会进入一个不停运行的进程。

我尝试使用 event.stopPropagation()，但没有成功！

这是我正在工作的代码：

```
$( 'div.scroll-pane-produts' ).bind( 'jsp-scroll-y',
    function( event, scrollPositionY, isAtTop, isAtBottom ) {
        if( isAtBottom ) {
            event.stopPropagation();
            // $.post('some-url');
            alert('infinite alerts from here');
        }   
    }
).jScrollPane(); 
```

虽然问题本身与来自 jscrollpane 的事件有关，但我也很欣赏另一个通过 ajax 请求更新 DIV 内容的解决方案！

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T19:58:59.380

这不是这个问题的直接答案，但我偶然发现了谷歌，因为即使我没有滚动，我的滚动条也会一遍又一遍地触发事件。

原来这是因为我使用的是`autoReinitalise`每 500 毫秒重新初始化一次滚动条，无论内容是否已添加/删除该区域。

我添加了一些代码来阻止这种情况发生。我添加的代码将阻止它触发，除非高度发生变化。

首先，我添加了一个名为的变量`prevHeight`并将其设置为`0`.

然后在第 229 行左右，我调整了代码：

```
if (settings.autoReinitialise && !reinitialiseInterval) {
     reinitialiseInterval = setInterval(
          function () {
               var clientHeight = pane[0].clientHeight; //Add this line of code
               if (prevHeight !== clientHeight || prevHeight === 0) { //Add this condition
                    initialise(settings);
                }
                prevHeight = clientHeight ; //Add this line of code
            },
            settings.autoReinitialiseDelay
     );
} 
```

**注意**：我只关心垂直滚动条，我没有使用任何水平滚动条。如果您同时关心两者，则需要进行两项检查（一项用于垂直检查，一项用于水平检查）。您只需创建一个`prevWidth`变量并根据 `pane[0].clientWidth 检查它。

这解决了我的问题，希望它可以帮助其他一些遇到此页面的人。

# c - 为 C 结构定义 gdb 打印函数

> ID：15156555
> 
> 赞同：12
> 
> 时间：2013-03-01T11:24:12.887
> 
> 标签：c, emacs, gdb

当我用 Java 编写代码时，我使用嵌入在 Eclipse 中的调试器。在此上下文中可视化对象时，调试器会自动调用 toString() 函数，我发现该功能非常方便在探索程序状态时快速可视化。

现在，当我在 C 中工作时，我使用 emacs+gdb 进行调试，但我没有设法找到/重新创建用于可视化复杂 C 结构的等效功能（即调用特定的打印函数）。当然，没有通用的 toString() 方法，但无论如何，我经常在某处为我的结构实现打印功能。

但是当我想在 gdb 中可视化某些东西时，我必须从 gdb 中手动调用这些打印函数`p my_print_function(my_struct_pointer)`，这非常低效（必须记住它的名称，正确输入，而且标准输出可能在另一个窗口中......） .

我想要的是将 gdb 配置为“在结构指针类型*T*上调用 gdb 打印函数时，自动调用该用户定义的打印函数*f* ...”。有没有办法做到这一点 ？提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T15:08:46.587

用于`print struct_var`打印给定结构的成员

用于`print *struct_ptr`打印给定结构指针的成员

`set print pretty on`如果您希望 gdb 以每行一个成员的缩进格式打印结构，请使用，如下所示：

```
$1 = {
        next = 0x0,
        flags = {
          sweet = 1,
          sour = 1
        },
        meat = 0x54 "Pork"
      } 
```

也可以`ptype struct_var`用来打印给定结构的定义

更多信息[在这里](http://sourceware.org/gdb/current/onlinedocs/gdb/Print-Settings.html#Print-Settings)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T15:05:14.177

好问题。

是的，我猜有点。似乎 GDB 7 支持[用 Python 编写的“漂亮打印机”](http://www.rethinkdb.com/blog/make-debugging-easier-with-custom-pretty-printers/)。不像在实际目标语言中使用已经编写的代码那样方便（在我看来），但也许已经足够好了。

[这些是](http://sourceware.org/gdb/onlinedocs/gdb/Pretty_002dPrinter-Commands.html#Pretty_002dPrinter-Commands)使用漂亮打印机的命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-11T10:23:25.140

虽然我没有时间学习所有的 gdb/python 漂亮打印理论，但我找到了一种在 gdb 中重用我的 C 打印机的简单方法。

将结构“struct_name_1”和“struct_name_2”链接到 C 函数“struct_printer_1_c_func”和“struct_printer_2_c_func”的示例：

1) 创建一个文件 struct_printers.py

```
class Pstruct (gdb.Function):
  """Returns a string describing a struct...
  """

  def __init__ (self):
    super (Pstruct, self).__init__ ("pstruct")

  def invoke (self, name):
      expr_type = name.dereference().type.tag
      expr_string = name.__str__()            
      expr_address = expr_string.split(" ")[0]      
      if (cmp(expr_type, "struct_name_1") == 0):
        return gdb.parse_and_eval("struct_printer_1_c_func("+ expr_address +")")
      elif (cmp(expr_type, "struct_name_2") == 0):
        return gdb.parse_and_eval("struct_printer_2_c_func("+ expr_address +")")
      else:
        print "[No struct printer for this type]"
        return gdb.parse_and_eval(expr_address)

Pstruct () 
```

2）将此添加到您的 .gdbinit ：

```
source struct_printers.py

define pstruct  
p $pstruct($arg0) 
end 
```

然后，当您在 gdb 中指向要检查的结构的指针前面时，调用 pstruct 而不是 print。

可能丑陋且可扩展性差，但对于我需要的东西来说足够好（但是我很高兴有人知道使用 python 漂亮打印的东西来做到这一点的正确方法）。

# android - Android 服务无法启动

> ID：15156557
> 
> 赞同：3
> 
> 时间：2013-03-01T11:24:25.020
> 
> 标签：android, android-service, android-backup-service

我正在尝试在 android 中实现简单的服务，但我无法统计基本服务。

这是我的主要课程：

```
 import java.io.IOException;
    import java.net.InetAddress;
    import java.net.UnknownHostException;

    import android.app.Activity;
    import android.content.Intent;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.Toast;

    import com.finki.darko.mk.services.SimpleService;

    public class Main extends Activity implements OnClickListener {
        private Button startService;
        private Intent intent;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            if (!isOnline()) {
                Toast.makeText(this, R.string.internetConnection,
                        Toast.LENGTH_SHORT).show();
                finish();
            } else {
                setContentView(R.layout.main_activity);
                startService = (Button) findViewById(R.id.vesti);
                startService.setOnClickListener(this);

            }
        }

        private static boolean isOnline() {
            try {
                InetAddress.getByName("google.com").isReachable(3);
                return true;
            } catch (UnknownHostException e) {
                return false;
            } catch (IOException e) {
                return false;
            }
        }

        @Override
        public void onClick(View v) {
            switch (v.getId()) {
            case R.id.vesti:
                startService(new Intent(Main.this,SimpleService.class));
                break;

            }

        }
    }

and this is my simple server class:
ublic class SimpleService extends Service {
    @Override
    public IBinder onBind(Intent arg0) {
          return null;
    }
    @Override
    public void onCreate() {
          super.onCreate();
          Toast.makeText(this,"Service created ...", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onDestroy() {
          super.onDestroy();
          Toast.makeText(this, "Service destroyed ...", Toast.LENGTH_LONG).show();
    }
} 
```

我也像这样在清单中输入了服务：

```
<service android:name=".SimpleService" >
        </service> 
```

有人知道为什么我无法启动服务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:07:24.737

**请在Manifest**中提供完整的包名 + 类名，例如：-

```
<service android:name="<package-name>.Main.SimpleService" 
  android:enabled="true" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:09:22.180

您需要像这样在清单中声明服务：

```
<service
    android:name="com.finki.darko.mk.services.SimpleService" 
    android:enabled="true" 
/> 
```

# python - 如何使用远程客户端机器连接到本地机器

> ID：15156558
> 
> 赞同：0
> 
> 时间：2013-03-01T11:24:26.083
> 
> 标签：python, ssh, wxpython, remote-access

我是 python 的新手，使用 wxpython 我制作了一个 GUI 模型，它在本地机器上执行某些操作。我希望该工具从远程客户端对多个本地系统进行操作。我已经浏览了一些文档（python：Networking），但我无法理解:(。我的要求是用户应该提供每台（任意数量的机器）机器的 IP 地址以及端口号。如果不做 ssh，它应该会发生。可以有人请建议我用 python 解决方案吗？我从最近 3 天开始尝试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:03:44.923

几年前我遇到了同样的问题，我用 Python Pyro ( [http://pythonhosted.org/Pyro4/](http://pythonhosted.org/Pyro4/) ) 解决了这个问题，它是一个库，使您能够构建对象可以通过网络相互通信的应用程序, 用最少的编程工作和简单。

您可以使用客户端/服务器客户端/客户端等，您可以在远程网络计算机中执行“事情”或做“某事”。

例如，如果您必须将 a 发送`message`到一台 PC，或发送`File`，或执行`class`远程等。

完整示例：

*服务器*

```
# saved as greeting.py
import Pyro4

class GreetingMaker(object):
    def get_fortune(self, name):
        return "Hello, {0}. Here is your fortune message:\n" \
               "Tomorrow's lucky number is 12345678.".format(name)

greeting_maker=GreetingMaker()

daemon=Pyro4.Daemon()                 # make a Pyro daemon
ns=Pyro4.locateNS()                   # find the name server
uri=daemon.register(greeting_maker)   # register the greeting object as a Pyro object
ns.register("example.greeting", uri)  # register the object with a name in the name server

print "Ready."
daemon.requestLoop()                  # start the event loop of the server to wait for calls 
```

*客户*

```
# saved as client.py
import Pyro4

name=raw_input("What is your name? ").strip()

greeting_maker=Pyro4.Proxy("PYRONAME:example.greeting")    # use name server object lookup uri shortcut
print greeting_maker.get_fortune(name) 
```

首先，您必须运行服务器（例如在 IP 本地或其他上），它将等待请求，如果您运行客户端，您将看到它是如何工作的（必须知道在哪里连接，IP 服务器 [或域]）

您可以在服务器上执行所有操作，并从网络或 Internet 上的其他 PC 调用它。

它对您的设备非常有用。

我希望它对你有帮助。

（文档链接： http: [//pythonhosted.org/Pyro4/intro.html#simple-example](http://pythonhosted.org/Pyro4/intro.html#simple-example)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:42:11.633

没有一个解决方案。

您将需要使用客户端服务器模型。您的客户端将与您现在拥有的类似，服务器将控制它。查看[Twisted](http://twistedmatrix.com/trac/)的网络，它可能比原始套接字更容易。

如果没有访问该框，就无法运行远程命令。

问候

# c - 为什么不是函数编译器看到一个“无符号整数”？

> ID：15156559
> 
> 赞同：-3
> 
> 时间：2013-03-01T11:24:28.307
> 
> 标签：c

我真的不明白，我的代码有什么问题。我之前做的非常相似，没有出现编译错误。我有一个代码：

```
double shape(int i,double x)
{
    double fun,h,L;
    int n;
    n=100;
    L=1.0;
    h=L/n;
    x=x-i*h;
    x=fabs(x);
    if(x<=h)
    fun=(1.0-x/h);
    else
    fun=0.0;
    return fun;
}

void main()
{
    int N=101;
    double O,F,h;
    h=0.001;
    for(int i=0;i<N;i++)
    {
        F=h*(i+1);
        O=shape(i,F);
    }
} 
```

在最后一行它给了我编译错误：错误：发现'unsigned int'预期双重警告：缺少原型。为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:35:09.730

> 错误：发现“无符号整数”预期双重警告：缺少原型。

这表明您正在调用一个没有原型的函数。发生这种情况时，您的编译器假定默认返回值类型为`unsigned int`. 解决方案是添加缺少的原型。

您发布的代码不完整。似乎调用`shape`触发了错误。但是`shape`定义很明确。最有可能在实际代码`shape`中是在不同的文件中，或者首先在下面声明`main`。

您应该配置您的编译器，使其在未声明函数时不接受函数调用。C 语言接受这些东西的事实可以追溯到该语言的早期。您应该配置您的编译器以禁止这些古老而糟糕的做法。

当您编译时，您的程序将在运行时失败。您将`F`在`main`.

最后，您的`main`函数声明不正确。它应该是

```
int main(void) 
```

# html - JWplayer 文件无法在谷歌浏览器中播放

> ID：15156561
> 
> 赞同：1
> 
> 时间：2013-03-01T11:24:33.287
> 
> 标签：html, wordpress, jwplayer

所以我的 jwplayer 被用作 wordpress 插件，将在不使用 jwplayer 的 html5 端的浏览器上播放 mp3 文件，但是当我使用 chrome 或移动设备时，文件将无法播放，并且出现错误：“加载媒体时出错：文件无法播放”。任何想法为什么这不会播放 mp3？

# java - 无法运行 Java 应用程序。主要未找到

> ID：15156562
> 
> 赞同：0
> 
> 时间：2013-03-01T11:24:38.240
> 
> 标签：java, jar

我对 java 完全陌生，我只需要运行我从互联网上下载的应用程序。有问题的应用程序是在这里找到的“spinn3r”客户端：[http ://code.google.com/p/spinn3r-client/downloads/detail?name=spinn3r-client-3.4.06.tar.gz](http://code.google.com/p/spinn3r-client/downloads/detail?name=spinn3r-client-3.4.06.tar.gz)

我提取了 tar.gz 并找到了一个 .jar 文件。然后我跑了：

```
java -jar applicationName.jar 
```

我收到以下错误：

```
no main manifest attribute, in spinn3r-client-3.4.06.jar 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:33:39.067

正如@Alderath 提到的，这主要是一个您可以在自己的应用程序中使用的 API。尽管如此，jar 文件还包含一个[测试客户端](https://code.google.com/p/spinn3r-client/source/browse/src/java/com/spinn3r/api/Main.java)，您可以按如下方式启动它：

```
$ java -cp spinn3r-client-3.4.06.jar com.spinn3r.api.Main
Usage: com.spinn3r.api.Main [OPTION]

Required params:
... 
```

由于这不是一个`executable jar`文件，因此您需要传递所需的 jar 文件和`main`明确包含该方法的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:28:50.120

为了使 JAR 文件成为可执行文件，在 META-INF/MANIFEST.MF 下，在您的 jar 中，您需要具有以下属性：

```
Main-Class: youclassname.class 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T11:41:45.417

将所有 .java 文件和 .class 文件（以及您想要包含的任何其他文件）一起收集到一个目录中。使用文本编辑器，创建一个包含以下行的文件（例如 myManifest）：

```
 Manifest-Version: 1.0
      Main-Class: MyMainClass

where MyMainClass is the name of the class containing the main method you want to use.
From the command line, execute the command:

     jar cvfm myResult.jar myManifest *.java *.class

where myResult.jar is the jar file you are trying to create, myManifest is the file you created in step 2, and everything else is the files you want to include. 
```

# c++ - 使用c字符串从多项式c++中提取指数

> ID：15156565
> 
> 赞同：0
> 
> 时间：2013-03-01T11:24:48.300
> 
> 标签：c++, c-strings

我试图从多项式中提取系数和指数的值。我已经成功地使用`strtok`. 我应用相同的概念来查找指数，但我不知道如何`strtok`在分隔符之后提取字符串或跳过第一个字符，并且`strtok`是我知道的唯一提取工具。

这是主要功能

```
#include <iostream>
#include <cctype>
#include <cstring>
#include <cstdlib>
#include <string>
using namespace std;

void extractCoeff (char *str, char *copy);
void extractExp (char *str, char *copy);
int main()
{
    const int SIZE = 150; // size for string input

    char *string;
    string = new char[SIZE];
    cout << "Enter the polynomial\n"<<"minus sign must not have a blank with a coeff";
    cin.ignore();
    cin.getline(string, SIZE); // input string example: -4x^0 + x^1 + 4x^3 -3x^4

    char *copy1;
    copy1 = new char[SIZE];
    strcpy(copy1, string);  
    extractCoeff(string, copy1);

    cout << endl << endl;
    char *copy2;
    copy2 = new char[SIZE];
    strcpy(copy2, string); 
    extractExp(string, copy2);

    return 0;
} 
```

这是提取系数的功能（有效）

```
void extractCoeff (char *str, char *copy)
{   
    char *p = strtok(str, " +"); // extract the first time
    char *search;
    int counter = 0;
    while (p) 
    {
        search = strstr(p, "x^");
        cout << "Token: " << p << endl;
        cout << "Search " << search << endl;
        p = strtok(NULL, " +");
        counter++;
    }

    cout << copy << endl;

    // find coeff
    int *coefficient;
    coefficient = new int[counter];

    p = strtok(copy, " +"); // extract the second time to find coeff
    int a = 0;
    while (p)
    {
        cout << "p: " << p << endl;
        long coeff;
        if (*p == 'x')
        {
           coeff = 1;
        }
        else if (*p == NULL)
        {
            coeff = 0;
        }
        else
        {
            char *endptr;
            coeff = strtol(p, &endptr, 10);
        }
        coefficient[a] = coeff;
        p = strtok(NULL, " +");
        a++;
    }

    for (int i = 0; i < counter; i++)
        cout << coefficient[i] << endl;
} 
```

这是提取指数的功能（不起作用）

```
void extractCoeff (char *str, char *copy)
{   
    char *p = strtok(str, " +"); // extract the first time
    char *search;
    int counter = 0;
    while (p) 
    {
        search = strstr(p, "x^");
        cout << "Token: " << p << endl;
        cout << "Search " << search << endl;
        p = strtok(NULL, " +");
        counter++;
    }

    cout << copy << endl;

    // find coeff
    int *coefficient;
    coefficient = new int[counter];

    p = strtok(copy, " +"); // extract the second time to find coeff
    int a = 0;
    while (p)
    {
        cout << "p: " << p << endl;
        long coeff;
        if (*p == 'x')
        {
           coeff = 1;
        }
        else if (*p == NULL)
        {
            coeff = 0;
        }
        else
        {
            char *endptr;
            coeff = strtol(p, &endptr, 10);
        }
        coefficient[a] = coeff;
        p = strtok(NULL, " +");
        a++;
    }

    for (int i = 0; i < counter; i++)
        cout << coefficient[i] << endl;
}

void extractExp (char *str, char *copy)
{   
    char *p = strtok(str, " x^"); // extract the first time
    //char *search;
    int counter = 0;
    while (p) 
    {
        //search = strstr(p, "x^");
        //cout << "Token: " << p << endl;
        //cout << "Search " << search << endl;
        p = strtok(NULL, " x^");
        counter++;
    }

    cout << copy << endl;

    // find coeff
    int *exp;
    exp = new int[counter];

    p = strtok(copy, " x^"); // extract the third time
    int b = 0;
    while (p)
    {
        cout << "p2: " << p << endl;
        int expVal;
        if (*p == NULL)
        {
            expVal = 0;
        }
        else
        {
            char *endptr;
            expVal = strtol(p, &endptr, 10);
        }
        exp[b] = expVal;
        p = strtok(NULL, " x^");
        b++;
    }

    for (int i = 0; i < counter; i++)
        cout << exp[i] << endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:40:01.503

你的问题是`strtok`破坏性的。您似乎部分知道这一点，因为您制作了一个副本以便能够在函数中使用它两次。但是在`extractCoeff`返回到 main 之后，指向的 C 字符串的内容`string`被损坏了，所以当你调用时，`extractExp`你传递了一个被严重截断的字符串的两个副本。

在 C++ 中，您应该使用它`std::string`来处理字符串。您可以使用`std::string`成员函数`find`，`find_first_of`并`find_first_not_of`定位子字符串，您正在寻找并使用`substr`它们来提取它们*，而不会*破坏原始字符串。

您可以使用 C 函数对 C 字符串执行类似的操作，但这将是一个 C 问题。（使用`cout`和 C++ 头文件会使您的程序作为 C 程序无效，但其他一切都是纯 C 而不是惯用的 C++。）

而且，顺便说一句：`strtok`不是你应该学习的解析字符串的方法。它具有破坏性，不能重入使用，并且在某些平台上不是线程安全的。除非您有充分的理由需要对替代方案进行破坏性的就地解析，否则不要使用它或其稍微更好的亲属（在 POSIX 中）`strtok_r`。

# css - css hack 分别针对 Safari 和 Chrome

> ID：15156567
> 
> 赞同：2
> 
> 时间：2013-03-01T11:24:50.267
> 
> 标签：css, google-chrome, safari

我需要针对各种浏览器指定特定的 CSS 样式。

我设法找到了一种单独定位的方法： Firefox only IE9 only IE8 only IE7 only

但是...我看不到分别针对 Chrome 和 Safari。我发现了几种适用于 Chrome 和 Safari 的技术。有些技术应该针对其中一个……但它们会相互覆盖，因此最后一个适用于两者。

我设置了一个 JS fiddle 来显示各种技术，并显示浏览器匹配颜色。谁能帮我找到分别针对 Safari 和 Chrome 的秘密？

[http://jsfiddle.net/lbriquet/MP4qZ/](http://jsfiddle.net/lbriquet/MP4qZ/)

这是CSS：

```
#tester {
font-weight:bold;
padding:10px;
margin:5px;
color: #FFF;
border:#00F solid 4px\9; /* IE8 and below */    
*border:#FF0 solid 4px; /* IE7 and below */
-bracket-:hack(;
    border:#0FF solid 4px;  /* Chrome only*/
);
}
:root #tester{
border:#0F0 solid 4px \0/IE\9; /* IE9 +IE10pp4 */
}
@-moz-document url-prefix() { #tester { border:#F00 solid 4px;  /* Firefox only*/ } }

@media all and (-webkit-min-device-pixel-ratio: 0) { #tester { border: #F0F solid 4px; /* Safari */  } }

/* iPads (portrait and landscape) ----------- */
@media only screen
and (min-device-width : 768px)
and (max-device-width : 1024px) {
#tester {
    border: #F90 solid 4px; 
}
} 
```

这是html：

```
<span id="tester">Browser match</span> 
```

任何帮助将不胜感激！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-17T16:49:46.420

你需要一些JS：

```
var is_chrome = window.chrome;
var is_safari = (navigator.userAgent.indexOf('Safari') != -1 && navigator.userAgent.indexOf('Chrome') == -1);

if (is_chrome) {
    $('#tester').addClass('chrome');
}
else if (is_safari) {
    $('#tester').addClass('safari');
} 
```

和：

```
#tester.chrome {
   /* your CSS here */
}
#tester.safari {
   /* your CSS here */
} 
```

这里的例子：http: [//jsfiddle.net/7h5rh/1/](http://jsfiddle.net/7h5rh/1/)

# python - 从数据库查询填充嵌套字典

> ID：15156576
> 
> 赞同：3
> 
> 时间：2013-03-01T11:25:07.283
> 
> 标签：python, dictionary

我在一个看起来像这样的数据库中有数据（简化）

```
colA, colB, colC
'a',   1,   'abc'
'a',   2,   'def'
'b',   1,   'ghi'
'b',   2,   'jkl' 
```

我的目标是从该表构建一个嵌套字典，如下所示：

```
dict = {a: {1: 'abc'}, {2: 'def'},
        b: {1: 'ghi'}, {2: 'jkl'}} 
```

在我的真实案例中，我还有几个嵌套级别。作为数据库查询，我想我可以逐行执行“for”循环

对以这种方式填充字典的优雅/有效方式有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T11:57:12.137

您可以将 a 的结果提供`cursor.fetchall()`给此函数。它处理任意数量的列 >= 2。

```
def nest(rows):
    root = {}
    for row in rows:
        d = root
        for item in row[:-2]:
            d = d.setdefault(item, {})
        d[row[-2]] = row[-1]
    return root 
```

* * *

另一种创建任意深度嵌套字典的方法是：

```
import collections

def nesteddict():
    return collections.defaultdict(nesteddict)

nd = nesteddict()
for a, b, c in rows:
    nd[a][b] = c 
```

# java - 使用 OpenStreetMaps JMapViewer 移动地图标记

> ID：15156587
> 
> 赞同：0
> 
> 时间：2013-03-01T11:25:31.167
> 
> 标签：java, swing, map, openstreetmap, jmapviewer

我在 Swing 中使用 JMapViewer 创建地图。我在地图上有几个代表汽车的 MapMarkerDots。我正在尝试更新这些标记的位置，以便它们看起来像是在地图上行驶，但它不能正常工作。我有一个“汽车”要遵循的坐标列表，但发生的情况是位置已更新，但标记在完成之前不会重绘，这意味着标记是在初始位置和最终位置绘制的，而不是在两者之间的每一点。我用于此的代码如下。关于为什么会发生这种情况的任何想法？

```
public void drawRoute(String id){

    MapMarkerDot mmd;                                                       
    String evMarkerObject;          // ID and Marker position
    String[] items, locations;
    double lat, lon;

    for(int i = 0; i < route.length-1; i+=2){       // Iterate through the route

         List markers = zmap.getMapMarkerList();        // Get the markers that are currently on the map

        for(int j = 0; j < Daemon.evMarkers.size(); j++){  // Go through the list of recorded marker IDs and locations
            evMarkerObject = Arrays.toString(Daemon.evMarkers.get(j));      // Get marker id and location
            items = evMarkerObject.split(", ");                             // Split the ID and location
            if(items[0].substring(1).equals(id)){                           // If an ID match is found

                locations = items[1].split(" ");                            // Split location values by " "
                lat = Double.parseDouble(locations[2]);                     // Get latitude of marker
                lon = Double.parseDouble(locations[3]);                     // Get longitude of marker
                for(int k = 0; k < markers.size(); k++){                    // Go through list of markers currently on map
                    mmd = (MapMarkerDot) markers.get(k);                    // Get each marker in turn
                    if((mmd.getLat() == lat) && (mmd.getLon() == lon)){     // Check if recorded position matches marker position                               
                        zmap.removeMapMarker(mmd);                          // Remove marker from the map
                        break;                                              // Break from loop (appropriate marker found)
                    }
                }

                Daemon.evMarkers.remove(j);                                                 // Remove record of marker ID and position
                zaddMarker(Color.BLUE, route[i], route[i+1], 'e', items[0].substring(1));   // Add marker at new position
                    //zmap.repaint();
            }
        }
    } 
```

调用函数（基于@Catalina 的回答）：

```
SwingWorker<Void, Void> worker = new SwingWorker<Void, Void>(){

                                @Override
                                protected Void doInBackground() throws Exception {
                                    drawRoute(markerID);
                                    return null;
                                }
                            };

                            worker.execute(); 
```

这是在鼠标单击事件上调用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:39:46.987

`Daemon`听起来像一个后台线程，所以你需要在[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)(EDT) 上使用`SwingUtilities.invokeLater`. 如果可行，[`SwingWorker`](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)可能是让您`Daemon`以工作人员的方法定期更新 EDT 的好`process`方法。

# asp.net - 在服务器上调试 ASP.Net 用户控件

> ID：15156588
> 
> 赞同：0
> 
> 时间：2013-03-01T11:25:31.523
> 
> 标签：asp.net, webforms

有一个现有的 asp.net Web Forms 项目，在我自己的计算机上我可以调试，但在服务器上它安装在用户控件上会导致问题。如果我使用开发人员工具，我可以看到用户控件上的一个按钮会创建响应“输入字符串格式不正确”。但这就是我所得到的，所以试图调试它所谈论的字段或值是不可能的，我没有在我自己的机器上遇到问题，所以我需要一些方法来深入了解这个问题的细节。如果它是一个页面，那么我会在堆栈跟踪中得到完整的错误，并且发现这会很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:49:11.963

我不确定设置调试器有多容易。如果您是 IIS 管理员并且与您的用户在 Intranet 上，您可以在您的个人计算机上托管并让用户连接到您的主机。当他们访问您的页面时，错误应该会导致您的调试器运行。

不过，我认为更好的选择是实现某种日志记录机制。这是一个更实用和可持续的解决方案。如果您在编写日志类时需要帮助，请在此处发帖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T12:27:17.140

检查所有日期时间和字符串转换。还有服务器上的 web.config 文件。

如果是日期时间转换错误，则更改文化信息。

# android - 如何使用OpenGL在android上截屏

> ID：15156593
> 
> 赞同：2
> 
> 时间：2013-03-01T11:25:50.263
> 
> 标签：android, opengl-es, screenshot, pixels

我想拍摄 Android 设备的系统屏幕截图（不是布局的屏幕截图）......我遵循了这个：

[Android OpenGL 截图](https://stackoverflow.com/questions/4731589/android-opengl-screenshot/5013360)

但是， gl 变量在哪里？如何创建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T00:44:07.297

就我而言，我在 NDK 中工作，因此 C++ 在 Java 中调用了一些方法，然后该方法调用了一些 bool var

```
if(capture)
{saveAlbum(gl);
capture=false; 
} 
```

然后使用以下方法捕获 glview 屏幕：

```
Bitmap SavePixels(int x, int y, int w, int h, GL10 gl)
        {  
             int b[]=new int[w*(y+h)];
             int bt[]=new int[w*h];
             IntBuffer ib=IntBuffer.wrap(b);
             ib.position(0);
             gl.glReadPixels(x, 0, w, y+h, GL10.GL_RGBA, GL10.GL_UNSIGNED_BYTE, ib);

             for(int i=0, k=0; i<h; i++, k++)
             {
                  //Remember, that OpenGL bitmap is incompatible with Android bitmap
                  //and so, some correction need.        
                  for(int j=0; j<w; j++)
                  {
                       int pix=b[i*w+j];
                       int pb=(pix>>16)&0xff;
                       int pr=(pix<<16)&0xffff0000;
                       int pix1=(pix&0xff00ff00) | pr | pb;
                       bt[(h-k-1)*w+j]=pix1;
                  }
             }

            Bitmap sb = Bitmap.createBitmap(bt, w, h, Bitmap.Config.ARGB_8888); 
            return sb;
        }  

void saveAlbum(GL10 gl)
        {   
               Bitmap bmp = SavePixels(0, 0, windowWIDTH, windowHEIGHT, gl);  // display wid,height must be
            bmp = rotate(bmp,DefinallyROTATION);
           path =MediaStore.Images.Media.insertImage(m_Context.getContentResolver(), bmp, "hi", null);
             IntentFilter intentFilter = new IntentFilter(Intent.ACTION_MEDIA_SCANNER_STARTED); 
             intentFilter.addAction(Intent.ACTION_MEDIA_SCANNER_FINISHED); 
             intentFilter.addDataScheme("file"); 
             m_Context.registerReceiver(mReceiver, intentFilter);
             m_Context.sendBroadcast(new Intent(Intent.ACTION_MEDIA_MOUNTED, Uri.parse("file://"
                        + Environment.getExternalStorageDirectory())));
} 
```

# jquery - jQuery日期格式化函数

> ID：15156595
> 
> 赞同：-3
> 
> 时间：2013-03-01T11:25:53.073
> 
> 标签：jquery, jquery-mobile

我从数据库中获取了一个（日期）值，该值以下列格式返回：2013-03-01。我想在 2013 年 3 月星期五将其输出到我的页面上。请问有可用的 JQuery 函数吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:33:30.623

> Is there a JQuery function available for this?

No, jQuery doesn't provide any date formatting abilities.

There are **lots** of libraries that do, such as [MomentJS](http://momentjs.com), which is about 6.4k. Or of course, doing it yourself is about one line of data (the names of the months) and six or seven lines of code.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:03:18.697

没有任何方法可以用于 jQuery。您可以使用一些自定义 js 库，例如[XDate](http://arshaw.com/xdate/)。

使用 XDate，您可以执行以下操作

```
var myDateString = "2013-03-01";
myDateStringArray =  myDateString.split("-");
var d = new XDate(myDateStringArray[0], (parseInt(myDateStringArray[1])-1), myDateStringArray[2]);

var myNewDate = d.toString("dddd MMMM yyyy"); 
alert(myNewDate ); 
```

检查工作小提琴[http://jsfiddle.net/zWcU5/](http://jsfiddle.net/zWcU5/)

XDate 下载[http://arshaw.com/xdate/](http://arshaw.com/xdate/)

# asp.net - FileUpload 控制不应该上传文件

> ID：15156596
> 
> 赞同：0
> 
> 时间：2013-03-01T11:25:57.787
> 
> 标签：asp.net, .net, file-upload, upload, controls

我有一个在 asp.net 4.0 中使用 FileUpload 控件的文件上传表单。在我的上传按钮上，我检查正在提交的文件是否存在一些限制，例如：

```
FileUpload fu = new FileUpload();

    if (fu.HasFile)
    {
        if ((extension == ".jpg") || (extension == ".png") || (extension == ".gif"))
        {
             if (fu.PostedFile.ContentLength <= 2MB)
             {
                 fu.SaveAs("path"); // save the file on the server
                 // check file header ...       
             }
         }
    } 
```

问题是，当我提交视频（显然具有不同的扩展名和大小> 2MB）而不是在客户端上检查并给出我设置的错误时，它会上传它然后客户端收到错误。问题是如果客户端提交一个 1GB 的文件怎么办？！我的意思是，它如何从扩展和大小验证传递到 SaveAs()，我无法理解。有什么意见吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:33:11.330

Unfortunately, that code runs on the server, which means it can only do those checks *after* the file has been uploaded.

If the user attempts to upload a very large file, the request length limits (defined in web.config) will catch it, and the upload will be aborted once the limit is reached.

Other than that, you really do have to check the file on the server; and you should check more than just the extension. Someone could easily change the extension of a file to something else. That may or may not be an actual problem - but most likely is! (if nothing else, subsequent website users would see broken image placeholders when the browser tries to load a Word document as if it were an image, for example)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:36:15.137

如果您使用的是 html5，那么您可以使用 FileReader。 [文件阅读器 Javascript](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

1.  您可以从客户端验证大小、内容类型。
2.  一旦通过验证，您可以将其发布到服务器。

代码取自：[FileReader Javascript](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

```
<script>
  function handleFileSelect(evt) {
    var files = evt.target.files; // FileList object

    // files is a FileList of File objects. List some properties.
    var output = [];
    for (var i = 0, f; f = files[i]; i++) {
      output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
                  f.size, ' bytes, last modified: ',
                  f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
                  '</li>');
    }
    document.getElementById('list').innerHTML = '<ul>' + output.join('') + '</ul>';
  }

  document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script> 
```

文件阅读器的 polyfills

1.  [文件阅读器 polyfill](https://github.com/Jahdrien/FileReader)
2.  [浏览器支持。](http://html5please.com/#file)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:36:28.433

这是您的实际代码吗？什么是 2MB？它不是字符串或整数。我很惊讶它甚至编译。你应该有这样的东西：

```
 int iFileSize = file.ContentLength;

    if (iFileSize > 1000000)  // 1MB approx (actually less though)
    {
        // File is too big so do something here
        return;
    } 
```

# java - 当没有人真正需要它时，为什么 jvm 从 jar 加载类？

> ID：15156598
> 
> 赞同：1
> 
> 时间：2013-03-01T11:26:01.547
> 
> 标签：java, classloader

我的应用程序使用了很多类，分布在许多 jar 中，所以我想根据类加载的顺序创建一个带有有序 jar 的类路径。当所有这些 jar 都在网络/远程文件系统上时，这将减少启动时间。

我开始试验`java -verbose:class -classpath ... mainclass`并检查加载了什么。获取时添加新罐子`ClassNotFoundException`。

然后我注意到每次都加载了一些类，而我的应用程序没有真正使用它。我只是举了一个例子：一个空的类，一个空的 start 方法。即使加载这个类，也需要很多其他的罐子。

```
package test;
public class CheckClassLoader {
  static public void main (String args[]) {
  }
} 
```

请注意，这个类包含在一个包含许多其他类的大 jar 中。

这是我的输出。它显示了我编写的一堆类（不是标准的 java，也不是我使用的外部 jar 中的类）已加载。

```
$ java -verbose:class -Xdiag -jar Neos.jar test.CheckClassLoader \
  | egrep -v 'Loaded (sun|java|javax|org\.xml)\.'
[Opened /home/giuseppe/jdk1.7.0_15/jre/lib/rt.jar]
[Loaded gui.sendto.SendToListener from file:/tmp/Neos.jar]
[Loaded gui.ParentChildFrameIfc from file:/tmp/Neos.jar]
[Loaded gui.ParentChildFrame from file:/tmp/Neos.jar]
[Loaded gui.MainFrame from file:/tmp/Neos.jar]
[Loaded utils.MessageException from file:/tmp/Neos.jar]
[Loaded exchange.xml.XmlImportReader from file:/tmp/Neos.jar]
[Loaded gui.ParentChildFrame$7 from file:/tmp/Neos.jar]
[Loaded engine.TableBean from file:/tmp/Neos.jar]
[Loaded utils.io.net.ConnectionListener from file:/tmp/Neos.jar]
[Loaded utils.image.ByteDocTools from file:/tmp/Neos.jar]
[Loaded gui.utils.FileFilterExtension from file:/tmp/Neos.jar]
Exception in thread "main" java.lang.NoClassDefFoundError: org/apache/pdfbox/pdmodel/PDDocument
at java.lang.Class.getDeclaredMethods0(Native Method)
at java.lang.Class.privateGetDeclaredMethods(Class.java:2451)
at java.lang.Class.getMethod0(Class.java:2694)
at java.lang.Class.getMethod(Class.java:1622)
at sun.launcher.LauncherHelper.getMainMethod(LauncherHelper.java:494)
at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:486)
Caused by: java.lang.ClassNotFoundException: org.apache.pdfbox.pdmodel.PDDocument
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 6 more 
```

完整输出的最后一部分（未用 过滤`egrep`）是：

```
[Loaded engine.TableBean from file:/tmp/Neos.jar]
[Loaded java.io.IOException from /home/giuseppe/jdk1.7.0_15/jre/lib/rt.jar]
[Loaded utils.io.net.ConnectionListener from file:/tmp/Neos.jar]
[Loaded utils.image.ByteDocTools from file:/tmp/Neos.jar]
[Loaded javax.swing.filechooser.FileFilter from /home/giuseppe/jdk1.7.0_15/jre/lib    /rt.jar]
[Loaded gui.utils.FileFilterExtension from file:/tmp/Neos.jar]
[Loaded java.io.FileNotFoundException from /home/giuseppe/jdk1.7.0_15/jre/lib/rt.jar]
[Loaded java.lang.NoSuchMethodException from /home/giuseppe/jdk1.7.0_15/jre/lib/rt.jar]
Exception in thread "main" [Loaded java.lang.Throwable$PrintStreamOrWriter from /home/giuseppe/jdk1.7.0_15/jre/lib/rt.jar]
[Loaded java.lang.Throwable$WrappedPrintStream from /home/giuseppe/jdk1.7.0_15/jre/lib/rt.jar]
[Loaded java.util.IdentityHashMap from /home/giuseppe/jdk1.7.0_15/jre/lib/rt.jar]
[Loaded java.util.IdentityHashMap$KeySet from /home/giuseppe/jdk1.7.0_15/jre/lib/rt.jar]
java.lang.NoClassDefFoundError: org/apache/pdfbox/pdmodel/PDDocument
at java.lang.Class.getDeclaredMethods0(Native Method)
at java.lang.Class.privateGetDeclaredMethods(Class.java:2451)
at java.lang.Class.getMethod0(Class.java:2694)
at java.lang.Class.getMethod(Class.java:1622)
at sun.launcher.LauncherHelper.getMainMethod(LauncherHelper.java:494)
at sun.launcher.LauncherHelper.checkAndLoadMain(LauncherHelper.java:486)
[Loaded java.util.Objects from /home/giuseppe/jdk1.7.0_15/jre/lib/rt.jar]
Caused by: java.lang.ClassNotFoundException: org.apache.pdfbox.pdmodel.PDDocument
at java.net.URLClassLoader$1.run(URLClassLoader.java:366)
at java.net.URLClassLoader$1.run(URLClassLoader.java:355)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:354)
at java.lang.ClassLoader.loadClass(ClassLoader.java:423)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:308)
at java.lang.ClassLoader.loadClass(ClassLoader.java:356)
... 6 more
[Loaded java.lang.Shutdown from /home/giuseppe/jdk1.7.0_15/jre/lib/rt.jar]
[Loaded java.lang.Shutdown$Lock from /home/giuseppe/jdk1.7.0_15/jre/lib/rt.jar] 
```

所以，我的问题是：为什么没有人真正需要 jvm 从 jar 加载类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:39:52.477

您的命令行正在运行 Neos.jar 中的主类，*而不是*您的测试类。为此，请在命令行中替换`-jar`为。`-cp`

# java - 导入语句的 Checkstyle 长度检查

> ID：15156599
> 
> 赞同：2
> 
> 时间：2013-03-01T11:26:02.903
> 
> 标签：java, eclipse, checkstyle

如果它为导入语句抛出“行长于 80 个字符”，如何删除 checkstyle 违规？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T11:28:05.453

消除：

```
<module name="LineLength">
    <property name="max" value="80"/>
</module> 
```

从您的 checkstyle 配置中。

**编辑：**

仅对导入禁用它：

```
<module name="LineLength">
   <property name="ignorePattern" value="someRegex"/>
</module> 
```

`import`您必须提供正则表达式来查找以`value`属性开头的行。我不太擅长正则表达式，所以你需要自己制定正则表达式。

像这样的正则表达式：`...value="^import"...`应该可以工作。但未测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-17T07:30:41.563

要从检查中排除`import`和`package`声明，您可以应用以下配置：

```
<module name="LineLength">
    <property name="max" value="80" />
    <property name="ignorePattern" value="^(package|import) .*"/>
</module> 
```

来源：[https ://checkstyle.org/config_sizes.html#LineLength_Examples](https://checkstyle.org/config_sizes.html#LineLength_Examples)

或者您可以按照 Marko 的建议应用标签（但更推荐第一个选项）：

```
// CHECKSTYLE:OFF
import ...
// CHECKSTYLE:ON 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-14T12:20:38.320

我想在 Paulius Matulionis 的回答中添加一些附加信息。如果你使用默认的 Checkstyle 规则，你可以通过进入你的 Idea 目录找到 checkstyle 配置文件：

%HOMEPATH%.IdeaIC2017.1\config\plugins\CheckStyle-IDEA\classes\sun_checks.xml

文件夹名称“.IdeaIC2017.1”可能会有所不同，具体取决于您使用的 Idea 版本。

此外，您可以在 Idea 的[“设置”中找到您的配置文件名](https://i.stack.imgur.com/3a2EB.jpg)

# android - Android In App Products 已在我的 App 中消失（它们仍然存在于开发者控制台中）

> ID：15156600
> 
> 赞同：1
> 
> 时间：2013-03-01T11:26:06.023
> 
> 标签：android, in-app-purchase, google-play

我一直在开发一个在应用购买中使用的应用。我已经成功地在我的应用中使用 SKU 查询 Google Play 应用，获取价格和描述等。

我正在尝试设置下一阶段（实际上是购买应用内产品）并将一个新的 APK 文件部署到 Google Play 商店（未发布），并且停止为我的应用内购买返回 SKU。

有谁知道他们为什么会从我的应用程序中消失？或者如何让他们回来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:17:16.720

看来这只是耐心的问题。上传 APK 文件后，IAP 消失了，但我没有改变任何东西就回来了……

# salesforce - Salesforce 描述调用共享对象

> ID：15156607
> 
> 赞同：0
> 
> 时间：2013-03-01T11:26:29.533
> 
> 标签：salesforce, apex-code

任何人都知道如何从描述调用中获取共享对象或共享规则？我觉得不可行！

谢谢你的帮助，

最好的，曼朱

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:46:03.850

描述信息在对象和字段级别，而共享规则在记录级别。因此，描述信息不会告诉您谁可以访问特定记录。

可以查询**UserRecordAccess**对象以确定用户是否有权访问单个记录或一组记录。（请注意，您可以使用带有 recordid 列表的 IN 子句同时查询多条记录。）

[http://www.salesforce.com/us/developer/docs/object_reference/Content/sforce_api_objects_userrecordaccess.htm](http://www.salesforce.com/us/developer/docs/object_reference/Content/sforce_api_objects_userrecordaccess.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T19:44:14.913

**您可以描述与特定记录相关联的 sObject**，但为什么需要呢？这不像我们可以向它们添加任何字段。也许要查询他们？适用于 REST API ( `/services/data/v26.0/sobjects/AccountShare`) 以及元数据 API。

**您可以描述共享规则**（我认为这是 2012 年引入的功能）。为此，请检查 Eclipse 正在检索哪些元数据，package.xml 应包含类似于以下内容的条目

```
<?xml version="1.0" encoding="UTF-8"?>
<Package xmlns="http://soap.sforce.com/2006/04/metadata">
    <types>
        <members>*</members>
        <name>AccountCriteriaBasedSharingRule</name>
    </types>
    <types>
        <members>*</members>
        <name>AccountOwnerSharingRule</name>
    </types>
    <types>
        <members>*</members>
        <name>CampaignCriteriaBasedSharingRule</name>
    </types>
    <types>
        <members>*</members>
        <name>CampaignOwnerSharingRule</name>
    </types>
    <types>
        <members>*</members>
        <name>CaseCriteriaBasedSharingRule</name>
    </types>
    <types>
        <members>*</members>
        <name>CaseOwnerSharingRule</name>
    </types>
    <types>
        <members>*</members>
        <name>ContactCriteriaBasedSharingRule</name>
    </types>
    <types>
        <members>*</members>
        <name>ContactOwnerSharingRule</name>
    </types>
    <types>
        <members>*</members>
        <name>LeadCriteriaBasedSharingRule</name>
    </types>
    <types>
        <members>*</members>
        <name>LeadOwnerSharingRule</name>
    </types>
    <types>
        <members>*</members>
        <name>OpportunityCriteriaBasedSharingRule</name>
    </types>
    <types>
        <members>*</members>
        <name>OpportunityOwnerSharingRule</name>
    </types>
    <version>26.0</version>
</Package> 
```

最后，如果您想了解对特定记录的访问，您可以从 (1) 或 - 正如 Bob 提到的 -表**中查询对象。**`UserRecordAccess`

# python - 如何通过使用 python 从另一个 csv 读取数据来编写新的 csv？

> ID：15156609
> 
> 赞同：0
> 
> 时间：2013-03-01T11:26:37.187
> 
> 标签：python, csv

我有一本这样的字典：

```
data_heading = {'Date': [(3,2)],
                'Rate': [(3,3)],
                'Product': [(3,7)]} 
```

KEY 定义 csv 文件中列的标题，VALUE 定义`[(row number, col number)]`
我要读取的数据，从特定的 LINE 和特定的 COLUMN 开始，直到 csv 文件的结尾。
读取文件内容后，我想编写读取数据的新 csv。我对这个问题很困惑，我尝试了很长很长的代码，但仍然无法编写这样的文件。
我会感谢你的支持。请帮我。
我已读取数据并将其存储在如下列表中：

```
data = ['Date', '2013-03-01', '2013-03-01', '2013-03-01', 'Rate', '$ 50', '$ 60', '$ 70', 'Product', 'MOBILE', 'DVD', 'TV'] 
```

但我无法将它写在 csv 中。. .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:40:47.213

这个怎么样（未经测试，因为您没有提供完整的代码+数据）：

```
import csv

data_heading = {'Date': [(3,2)],
            'Rate': [(3,3)],
            'Product': [(3,7)]}

rdr = csv.reader(open(csvpath, 'rb'))
columns = [{key:row[pos[0][1]] for key,pos in data_heading.items()} for row in rdr]
# finally trim to desired row startpoints:
data = {key:[col[key] for col in columns[pos[0][0]:]] for key,pos in  data_heading.items()}
print data 
```

这有点粗糙，因为您`data_heading`的格式有点尴尬。如果您可以自由更改它，则可以使代码更具可读性。

之后你可以写 CSV -`data`应该是一个足够简单的字典来写出来。

# android - onSaveInstanceState 没有调用 writeToParcel

> ID：15156611
> 
> 赞同：3
> 
> 时间：2013-03-01T11:26:43.633
> 
> 标签：android, android-view

我正在尝试创建一个自定义视图来保存它的状态。当我尝试旋转它时，它调用了 onSaveInstanceState 但从不调用 writeToParcel。

这是 onSaveInstanceState ：

```
@Override
public Parcelable onSaveInstanceState()
{
    Logger.d("On Save Instance State");

    Parcelable superState = super.onSaveInstanceState();

    PictureItemState pis = new PictureItemState(superState);

    for (PictureItem item : mImageList)
    {
        if (!item.isButton)
        {
            pis.mUriList.add(item.uri.toString());
            pis.mIndexList.add(item.index);
        }
    }

    return pis;
} 
```

这是实现 writeToParcel 的状态类：

```
static class PictureItemState extends BaseSavedState
{
...    
@Override
    public void writeToParcel(Parcel dest, int flags)
    {
        super.writeToParcel(dest, flags);

        Logger.d("Write to parcel");

        int size = mUriList.size();

        dest.writeInt(size);

        for (int i = 0; i < size; i++)
        {
            dest.writeString(mUriList.get(i));
            dest.writeInt(mIndexList.get(i));
        }
    }
...
} 
```

# interactive - 使用 primefaces 的交互式甘特图

> ID：15156612
> 
> 赞同：3
> 
> 时间：2013-03-01T11:26:44.790
> 
> 标签：interactive, gantt-chart

谁能建议我如何在 ejb 3.1 应用程序中创建交互式甘特图。我需要使用 jsf 显示交互式甘特图。我正在使用 primefaces 3.4.2 和 primefaces 扩展 0.6.2。

谢谢和问候， Nadhiya Shanmugam。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-04T09:30:45.577

PrimeFaces 的最新版本包括一个[时间线组件](https://www.primefaces.org/showcase/ui/data/timeline/basic.xhtml)。我找不到确切添加的时间，但我相信在 PrimeFaces 6 中添加了 at。

[自定义示例](https://www.primefaces.org/showcase/ui/data/timeline/custom.xhtml)中的事件具有结束日期，这使得事件呈现为条形。

# cordova - 从 ChildBrowser 执行本机插件

> ID：15156617
> 
> 赞同：0
> 
> 时间：2013-03-01T11:27:06.607
> 
> 标签：cordova

从子浏览器窗口我正在尝试执行cordova ios 本机插件。但它不起作用。Childbrowser 是否支持执行任何 phonegap 原生插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:08:34.203

No it does not support the plugin API . Think of the child browser as a sandbox where you can view web pages but they can't get access to the apps info or device Apis.

# android - 用移动手指激活视图

> ID：15156621
> 
> 赞同：1
> 
> 时间：2013-03-01T11:27:16.870
> 
> 标签：android, view

我正在尝试创建一个填充有矩形的字段，如果你移动手指，它下面的矩形会改变颜色。我已经尝试了很多方法，但我没有成功，我没有任何其他想法。现在我的代码看起来像这样，它的问题是着色（在 ontouch 中）仅在我的手指位于屏幕左上角时才会激活，并且它会为所有矩形着色。

```
public class MainActivity extends Activity implements OnTouchListener {
ImageView[][] buttons;
Button b;
TableLayout ButtonContainer; 
RelativeLayout linar;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);    
    buttons=new ImageView[5][5];
    linar=new RelativeLayout(this);
    linar.setOnTouchListener(this);

    setPos(0,0,100);
    setContentView(linar);
}

void setPos(float startX, float startY, int size)
{
    float actposX,actposY;
    actposX=startX;
    actposY=startY;
    for (int i=0;i<5;i++){

        for (int j=0;j<5;j++){
            buttons[i][j]=new ImageView(this);
            buttons[i][j].setLayoutParams(new RelativeLayout.LayoutParams(size, size));
            buttons[i][j].setX(actposX);
            buttons[i][j].setY(actposY);
            if (j % 2 ==0){
                buttons[i][j].setBackgroundColor(Color.YELLOW);
            }
            else
            {   buttons[i][j].setBackgroundColor(Color.BLUE);   }
            actposX+=size;
            linar.addView(buttons[i][j]);
        }
        actposY+=size;
        actposX=startX;
    }

}

@Override
public boolean onTouch(View v, MotionEvent event) {

    for(int i =0; i< 5; i++)
        {
           for (int j=0; j< 5; j++)
           {
               Rect outRect = new Rect(buttons[i][j].getLeft(), buttons[i][j].getTop(), buttons[i][j].getRight(), buttons[i][j].getBottom());
               if(outRect.contains((int)event.getX(), (int)event.getY()))
                {
                    buttons[i][j].setBackgroundColor(Color.RED);
                }
           }
        }

    return true;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:25:45.693

你可以做这样的事情，

```
 @Override
                public boolean onTouchEvent(MotionEvent event) {
                    // TODO Auto-generated method stub
                    final int action = event.getAction();

                    switch (action & MotionEventCompat.ACTION_MASK) {
                    case MotionEvent.ACTION_DOWN:
                        event.getX();
event.getY();

                        Log.d(TAG, "onTouchEvent DOWN: x " + selX + ", y " + selY);
                        break;

                    case MotionEvent.ACTION_MOVE:
                        event.getX();
                                event.getY();
                        Log.d(TAG, "onTouchEvent Move: x " + selX + ", y " + selY);
                        break;

                    case MotionEvent.ACTION_UP:
                        event.getX();
                                event.getY();
                        Log.d(TAG, "onTouchEvent UP: x " + selX + ", y " + selY);

                        break;
                    }

                    return true;
                } 
```

MotionEvent.ACTION_MOVE**将**检测指针移动。您可以获得指针并进行颜色填充部分。还要检查 logcat 以获得更好的理解。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T15:56:29.810

我想通了...... getLeft（），getTop（）..返回0值所以我用这个改变了它：

```
 outRect.top=(int) (buttons[i][j].getY());
               outRect.bottom=(int) (buttons[i][j].getY()+buttons[i][j].getLayoutParams().height);
               outRect.left=(int) (buttons[i][j].getX());
               outRect.right=(int) (buttons[i][j].getX()+buttons[i][j].getLayoutParams().height); 
```

# php - 在 codeigniter 中查看输出

> ID：15156623
> 
> 赞同：2
> 
> 时间：2013-03-01T11:27:22.690
> 
> 标签：php, codeigniter

这两种方法有什么区别：

```
$data['content'] = $this->load->view('content', NULL, true); // the content of the page
$this->load->view('layout', $data); //putting the content inside the layout, this include header, footer etc... 
```

和

```
 $this->load->view('top');
   $this->load->view('content', $data);
   $this->load->view('footer'); 
```

// 如果需要，这里可以加载更多视图，因此每个加载的视图都是分开的

我不知道这是否是最好的方法，但哪个更好用？或者如果你有更好的想法......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:31:11.653

这会将您的视图数据分配给 $mydata 并且不会在浏览器上呈现，第三个参数“TRUE”将执行此操作

```
$mydata = $this->load->view('content', NULL, true); 
```

这将直接在浏览器上呈现您的视图

```
$data = array();
$this->load->view('layout', $data); 
```

你的第二个选择是最好的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:00:16.990

当你这样做时：

```
$data['content'] = $this->load->view('content', NULL, true);
$this->load->view('layout', $data); 
```

您的视图内容被解析为字符串，因此您必须在布局视图内的某处回显 $content 变量。

当你这样做时：

```
$this->load->view('top');
$this->load->view('content', $data);
$this->load->view('footer'); 
```

您的视图被发送到浏览器，以便他可以呈现它。第二种是最好的方法。它使您的代码更易于理解、更快、更容易进行更改。

您可以在此处阅读有关视图的更多信息：http: [//ellislab.com/codeigniter/user-guide/general/views.html](http://ellislab.com/codeigniter/user-guide/general/views.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:34:27.227

```
$this->load->view('top');
$this->load->view('content', $data);
$this->load->view('footer'); 
```

是更好的选择，因为执行时间更短且易于理解

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-02T08:28:39.207

这两种方法中的每一种都有其优势，具体取决于您使用它的方式。

当您进行常规页面加载时，最好的方法是：

```
$this->load->view('top');
$this->load->view('content', $data);
$this->load->view('footer'); 
```

当您对服务器执行 Ajax 调用并在客户端浏览器的 Div 上加载特定视图时，第二种方法非常有用：

```
$view = $this->load->view('subpage','',TRUE);
$data = array('content' => $view);

print json_encode($data); 
```

# android - 如何获得 Intent.ACTION_MEDIA_BUTTON 的来源？

> ID：15156624
> 
> 赞同：2
> 
> 时间：2013-03-01T11:27:23.413
> 
> 标签：android, android-intent, broadcastreceiver, media

我从耳机和锁定屏幕的媒体按钮中获得媒体按钮意图。

有没有办法找出它们是由耳机触发还是由锁屏按钮触发的？

# c# - WPF 应用程序（不是浏览器）和导航

> ID：15156625
> 
> 赞同：11
> 
> 时间：2013-03-01T11:27:24.523
> 
> 标签：c#, wpf

我想开发一个基于 WPF 的桌面应用程序。如何通过 C# 代码从一页导航到另一页或从窗口中的一页？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-01T13:02:52.560

请查看下面的链接 - 这些链接将使您更好地了解通过提供示例和示例应用程序的 WPF 应用程序导航。

[如何构建、管理和导航 WPF 应用程序的用户界面](http://code.msdn.microsoft.com/How-to-Build-Manage-and-fdd0074a)

[简单导航](http://www.paulstovell.com/wpf-navigation)

[更高级的导航](http://www.codeproject.com/Articles/72724/Beginning-a-WPF-MVVM-application-Navigating-betwee)

我发现在应用程序中导航的一种非常简单的方法是，如果您在 a`Frame`中添加一个`Window`然后为您的其他相应页面，使用`Page`并且您需要在窗口后面的代码中执行如下操作；

```
FrameContent.Navigate(new ExampleView()); 
```

希望这些链接有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-28T20:22:24.377

有一个使用[数据模板和 ContentControl的简单导航示例](http://www.japf.fr/2009/03/thinking-with-mvvm-data-templates-contentcontrol/)

# jenkins - Jenkins 视图：显示环境变量

> ID：15156629
> 
> 赞同：1
> 
> 时间：2013-03-01T11:27:42.677
> 
> 标签：jenkins

是否可以在 Jenkins 视图中将环境变量显示为列？

我正在通过 Jenkins 构建 ruby​​ gems，我希望有一个列显示最近构建的 gem 的版本。我可以从生成的文件中提取该版本号`.gem`并将其放入构建步骤中的环境变量中，但是如何在视图中显示它？

（有关我添加到视图中的额外列，请参见下文，这就是我希望查看我的版本号的方式） ![视图中的版本示例](../Images/277b9553a935477b8ac5fa7d3b87ebee.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T04:10:45.733

要显示自定义属性，您可以使用[Extra Columns Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Extra+Columns+Plugin)。特别是对于您的示例，您可以添加版本作为构建描述，然后在额外的列插件配置中重新使用它

# unit-testing - 单元测试递归函数

> ID：15156631
> 
> 赞同：3
> 
> 时间：2013-03-01T11:27:48.377
> 
> 标签：unit-testing, recursion, moq

使用 Moq 和本机 VS 测试框架。我正在尝试测试传入值的递归函数：

```
public bool AuthenticateByDomain(string domainName, string password, string username, string email)
    { 
```

用于查找实体：

```
// look for an existent domain name.
var matchFound = this.FindDomainPasswordMatch(domainName, password); 
```

如果找到，则查找存在的*UserName*（帐户已存在）：

```
 if (matchFound)
        {
            var account = this.GetByEmail(null, email);
            if (account != null)
            { 
```

如果*未*找到，请根据提供的电子邮件和用户名创建帐户：

```
var uAccount = this.CreateAccount(username, password, email, domainName); 
```

然后递归地调用自身，其中（可能）`GetByEmail()`满足调用并调用身份验证分支。

我发现了一些 Moq 与存储库交互的示例，但无法确切了解如何解决我的特定问题 - 测试存储库是否已更新并且递归是否成功。我能够统一获取顶层中的每个方法 - 我是否声明足够好并继续前进？这是一个持久性测试吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:34:28.563

轻松测试某些东西时遇到麻烦可能是设计决策不佳的一个指标。如果您真的需要递归，请让自己清楚。

将这两个调用拆分为设计方式并将它们分开`CreateAccount`不是更容易吗？`FindDomainPasswordMatch`也许我没有完全理解你的观点，但递归本身似乎没有真正的“递归”用途。它只是一个带有重复代码的“懒惰”调用。我建议您将这些机制与它们本身分开。因此，这也使测试变得更加容易，并且您在测试这些方法时应该没有任何问题。

希望这可以帮助。

# insert - 按事件时间排序的唯一 ID

> ID：15156633
> 
> 赞同：1
> 
> 时间：2013-03-01T11:27:49.747
> 
> 标签：insert, unique-id, ordereddictionary

我需要按事件时间（每个事件都有一个以毫秒为单位的时间）以有序的方式将大量事件插入数据库，以防止在检索数据时进行排序。事件按无序排列。我的意思是时间为 10000 的事件可以在时间为 900 的事件之前发生，并且可能有多个事件同时发生。

我的想法是创建事件ID作为事件时间（长度13）+从序列生成的ID（长度5）的连接。但是这样一来，在序列将随着时间的推移而发生事件的情况下，可能会出现 id 的重复。

您能否建议如何解决？

# android - 从android中的字符串中删除字符串

> ID：15156640
> 
> 赞同：-3
> 
> 时间：2013-03-01T11:28:16.973
> 
> 标签：android, string

我从 json 得到一个字符串

*`"author":"ricobeemer<\/span>"`* .

当我检索字符串时

`String author = c.getString("author");`

“作者”字符串告诉我 `<span class="reviewer"itmprop="name">ricobeemer</span>`

因为我只想将“ricobeemer”存储在作者字符串中。谁能帮我怎么做？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-18T10:20:40.490

简单而最好

```
Html.fromHtml(author).toString(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:46:22.877

试试这个，它对我有用：

```
Html.fromHtml(author).toString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:36:30.783

这是完成它的一种快速而肮脏的方法：

```
String author = c.getString("author")
    .substring(c.getString("author")
    .lastIndexOf("\">"), c.getString("author").lastIndexOf("</")); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T11:54:11.937

您可以应用一些正则表达式匹配来从和之间提取，`>`如下`<`所示：

```
String author = c.getString("author");
Pattern p = Pattern.compile("(?<=>)(.*)(?=<)");
Matcher m = p.matcher(author);
if (m.find()) {
    author = m.group();
} 
```

# arrays - 在编译时加入字符串

> ID：15156642
> 
> 赞同：1
> 
> 时间：2013-03-01T11:28:33.850
> 
> 标签：arrays, string, d, ctfe

我想在编译时加入文件名和图像格式。以下示例不起作用，因为`string[]`我想在编译时无法评估...

```
immutable imageFormats = ["bmp", "jpg", "gif", "png"];

template fileNamesWithImageFormat(string[] fileNames)
{
    string[] fileNamesWithImageFormat() {
        string[] ret;
        ret.length = imageFormats.length * fileNames.length;

        for (int j = 0; j < fileNames.length) {
            for (int i = 0; i < imageFormats.length; ++i) {
                ret[j * fileNames.length + i] = fileNames[j] ~ "." ~ imageFormats[i];
            }
        }

        return ret;
    }
} 
```

它失败并显示错误消息：

```
Error: arithmetic/string type expected for value-parameter, not string[] 
```

我需要将其最终输入`import()`. 如何解决错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T15:53:57.977

你有点过于复杂了。

**CTFE**（编译时函数执行）应该适合这里。您可以只编写处理`string[]`输入的常用函数并在编译时表达式中使用它。有一些限制，但您的代码已经非常适合 CTFE，因此不需要模板。

您的索引中也有小错误。在编译时工作的更正版本：

```
import std.algorithm, std.array, std.range;
import std.stdio;

string[] modify(string[] names)
{
    if (!__ctfe)
        assert(false);

    immutable string[] imageFormats = ["bmp", "jpg", "gif", "png"];

    string[] ret;
    ret.length = imageFormats.length * names.length;

    for (int j = 0; j < names.length; ++j) {
        for (int i = 0; i < imageFormats.length; ++i) {
            ret[j * imageFormats.length + i] = names[j] ~ "." ~ imageFormats[i];
        }
    }

    return ret;
}

enum string[] input = ["one", "two"];

pragma(msg, modify(input));

void main() {} 
```

或在 DPaste 上查看：http: [//dpaste.1azy.net/7b42daf6](http://dpaste.1azy.net/7b42daf6)

如果提供的代码中有不清楚的地方，或者您坚持使用其他方法 - 请在此处发表评论。D 有很多不同的编译时任务工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:09:06.500

经过进一步搜索，它出现了[http://forum.dlang.org/post/jezkyrguyoshofciuxjq@forum.dlang.org](http://forum.dlang.org/post/jezkyrguyoshofciuxjq@forum.dlang.org)。这是 DMD 2.061 中的一个错误，解决方法是将文件名声明为`alias`.

# android - 如何将图像视图添加到 ArrayAdapter<> 的末尾

> ID：15156643
> 
> 赞同：0
> 
> 时间：2013-03-01T11:28:46.093
> 
> 标签：android, android-arrayadapter

我正在尝试在 ArrayAdapter 的末尾添加一些按钮/图像视图。但是当我添加我的按钮然后在每个项目上看到它时出现问题，而不是在我的列表末尾。我试图在xml上添加这个

```
android:id="@+id/AddRss" 
```

这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linearLa"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <ImageView
            android:id="@+id/iconremove"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:layout_margin="5dip"
            android:scaleType="centerCrop"
            android:src="@drawable/delete"
            android:visibility="gone" />

        <ImageView
            android:id="@+id/iconfav"
            android:layout_width="50dip"
            android:layout_height="50dip"
            android:layout_margin="5dip"
            android:scaleType="centerCrop"
            android:src="@drawable/rss" />

        <TextView
            android:id="@+id/textView"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal|center"
            android:layout_margin="5dip"
            android:layout_weight="1"
            android:textSize="20dip" />
    </LinearLayout>

    <ImageView
        android:id="@+id/AddRss"
        android:layout_width="50dip"
        android:layout_height="50dip"
        android:layout_gravity="center_vertical|center_horizontal|center"
        android:layout_margin="5dip"
        android:clickable="true"
        android:onClick="addRss"
        android:scaleType="centerCrop"
        android:src="@drawable/rss" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:03:57.700

创建一个包含要设置为页脚的文本的页脚视图布局，然后尝试

```
View footerView = ((LayoutInflater) ActivityContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE)).inflate(R.layout.footer_layout, null, false);
ListView.addFooterView(footerView); 
```

页脚的布局可能是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingTop="7dip"
    android:paddingBottom="7dip"
    android:orientation="horizontal"
    android:gravity="center">

    <LinearLayout 
        android:id="@+id/footer_layout" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center"
        android:layout_gravity="center">

    <TextView 
        android:text="@string/footer_text_1" 
        android:id="@+id/footer_1" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content" 
        android:textSize="14dip" 
        android:textStyle="bold" 
        android:layout_marginRight="5dip" />
    </LinearLayout>
</LinearLayout> 
```

希望这会有所帮助。

# android - 移动到 android 活动组中的上一个活动

> ID：15156644
> 
> 赞同：2
> 
> 时间：2013-03-01T11:28:47.090
> 
> 标签：android, android-widget, android-tabhost, android-tabactivity

我正在开发一个 android 应用程序，其中包含一个具有 4 个选项卡的 tabhost。所有 4 个选项卡都导航到扩展活动组的同一类 Activity1。

从 Activity1 我再次使用以下代码导航到另一个活动 Activity2，

```
Intent intent = new Intent(arg1.getContext(), Activity2.class);
            replaceContentView("sample", intent, Intent.FLAG_ACTIVITY_CLEAR_TOP);

public void replaceContentView(String id, Intent newIntent, int flag) {
    View view = getLocalActivityManager().startActivity(id,newIntent.addFlags(flag)).getDecorView(); 
    this.setContentView(view); 
```

现在，从这个新活动中，当按下设备返回按钮时，我需要返回到 Activity1。我用以下代码覆盖了 Activity2 中的 onbackpressed() 方法，

```
Intent intent = new Intent(this, Activity1.class); 
    Activity parentActivity = (Activity1)getParent(); 
    parentActivity.replaceContentView("sample", intent, Intent.FLAG_ACTIVITY_REORDER_TO_FRONT ); 
```

当我运行代码时，它实际上移出 Activity2，但它也移出 Activity1。我需要的是从 Activity2 回到 Activity1 ......谁能帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:33:32.530

试试这个代码

```
 public boolean onKeyDown(int keyCode, KeyEvent event)  
    {
     if (keyCode == KeyEvent.KEYCODE_BACK && event.getRepeatCount() == 0)
     {
        this.moveTaskToBack(true);
        return true;
     }
    return super.onKeyDown(keyCode, event);
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:44:47.200

一个简单的调用就`finish()`可以满足您的需求。

您可以参考**[Android: Go back to previous activity](https://stackoverflow.com/questions/4038479/android-go-back-to-previous-activity)**了解详细说明。

# wordpress - 博客页面 = wordpress 中的最新帖子

> ID：15156645
> 
> 赞同：0
> 
> 时间：2013-03-01T11:28:49.340
> 
> 标签：wordpress

我的客户有以下 wordpress 网站 =

[http://texasdentalimplants.com/index.php/blog](http://texasdentalimplants.com/index.php/blog)

这就是博客页面传统上的工作方式：

**用户点击博客页面 --> 显示系列文章 --> 用户选择点击博客文章，用户看到选择的博客文章**

客户，无论谁，每页只显示 1 篇博客文章，所以现在“博客”页面有点多余（它只是博客文章的精确副本）。

我想做的是让它像这样工作——

**用户点击“博客”--->用户看到最新的帖子-->用户可以点击“上一篇文章”和“下一篇文章”，来回切换。**

我将如何做到这一点，以便当我点击“博客”时，它会*直接*转到最新的博客文章？

这一切都是为了简单地减少冗余，因为客户担心它会影响 SEO。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T10:33:07.047

我在表达这个问题方面做得很差，但我本质上想要的是链接到我导航中的最新帖子。为此，我遵循了本教程：

[http://www.viper007bond.com/2011/09/20/code-snippet-add-a-link-to-latest-post-to-wordpress-nav-menu/](http://www.viper007bond.com/2011/09/20/code-snippet-add-a-link-to-latest-post-to-wordpress-nav-menu/)

本质上，我在导航中添加了一个带有锚点#latestpost 的链接。在functions.php中添加了代码片段，以将#latestpost替换为最新帖子的链接

# java - 无法在jsf中动态加载图像

> ID：15156648
> 
> 赞同：0
> 
> 时间：2013-03-01T11:28:52.380
> 
> 标签：java, jsf, jakarta-ee, primefaces

我正在做一些项目，我需要实现图像上传和查看图像功能，但我在这里遇到了一些问题。

我无法显示图像，请您帮帮我。

我正在使用来自 primefaces 的 p:fileload，并且我将所有图像存储在 jboss 服务器的 bin 文件夹中（E:\jboss-as-7.1.1.Final\bin\BrandImages\logo.gif）。并将该路径存储在 MYSQL DB 中，直到现在它工作正常。但是当我试图通过调用 getBrandDetails() 来显示图像时，它无法显示。你能告诉我我该如何解决这个问题吗？？？

## 在 web.xml 中

在 web.xml 我添加了过滤器和 mime ......

## Xhtml

```
<h:form enctype="multipart/form-data">
   <h:panelGrid id="brandDetails_Panel" columns="2" columnClasses="plabel, pvalue" styleClass="ui-panelgrid">
        <h:outputLabel for="brand_img_url" value="Brand Image" />
    <p:fileUpload id="brand_img_url" fileUploadListener="#{brandBean.handleFileUpload}"  
        mode="advanced"  sizeLimit="100000" allowTypes="/(\.\/)(gif|jpe?g|png)$/"/>

        <h:outputLabel value="" />
    <p:graphicImage value="#{brandBean.brand_image}" alt="The image could not be found."/>
    </h:panelGrid>
<f:facet name="footer" >
    <center>
        <p:commandButton id="add" value="Add"  disabled="#{brandBean.disable_addBut}" actionListener="#{brandBean.addBrandDetails}"/>
        <p:commandButton id="view" value="View" disabled="#{brandBean.disable_viewBut}"  action="#{brandBean.getBrandDetails}"/>         
    </center>       
</f:facet>
</h:form> 
```

在 addBrandDetails() 中，handleFileUpload() 为

```
public void handleFileUpload(FileUploadEvent event) 
{
String t1=".\\BrandImages\\"+event.getFile().getFileName();
System.out.println("The final path is :"+t1);

try{
    File f =new File(t1);

    FileOutputStream fileOutputStream = new FileOutputStream(f);

    byte[] buffer = new byte[1024];

        int bulk;
        InputStream inputStream = event.getFile().getInputstream();
        while (true) {
          bulk = inputStream.read(buffer);
          if (bulk < 0) {
                 break;
                 }
          fileOutputStream.write(buffer, 0, bulk);
          fileOutputStream.flush();
          }
          fileOutputStream.close();
          inputStream.close();
}catch(Exception e)
{
    System.out.println("Exception :"+e);
}   

this.brand_image=t1;
} 
```

在 getBrandDetails() 中，我设置为“this.setBrand_image(b.getBrand_img_url());”

当我正在打印时，它正在打印路径 E:\jboss-as-7.1.1.Final\bin\BrandImages\logo.gif

但它无法显示图像。

请帮帮我....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:04:40.163

首先，您的 bean 必须具有会话的范围。一个好方法是只制作一个 bean 来获取请求的图像。

其次，您的变量“brand_image”需要是 DefaultStreamedContent 的对象。因为您使用的是primefaces。

```
brand_image = new DefaultStreamedContent(input, "image/jpeg"); 
```

# jquery - 在 JQuery 中使用 .html 时图像未显示

> ID：15156654
> 
> 赞同：0
> 
> 时间：2013-03-01T11:29:06.653
> 
> 标签：jquery, image

我尝试在我的网站上的 AJAX 请求中添加图像，但由于某种原因，图像没有显示。虽然，生成的 HTML 是正确的。

这是我的代码：

```
$('.field-name-field-testimony-photo').wrap('<div class="picture-preview-container" />');
$('<div class="picture-preview" />').insertAfter('.picture-preview-container');

$('.form-item input.form-file', context).change(function() {
    $parent = $(this).closest('.form-item');
    $('.picture-preview').html('<img src="https://www.google.be/path-to-my-image.jpg" />');
}); 
```

据我所知，生成的 HTML 是正确的......

```
<div class="picture-preview">
    <img src="https://www.google.be/path-to-my-image.jpg" />
</div> 
```

我是否忘记了代码中的某些内容以确保显示此图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:34:18.020

正如萨尔曼上面所说，看看

```
<img scr="https://www.google.be/path-to-my-image.jpg" /> 
```

在你的最后一行

并转换 scr ===> src

```
<img src="https://www.google.be/path-to-my-image.jpg" /> 
```

# iphone - ios中的导航栏和侧边栏

> ID：15156657
> 
> 赞同：0
> 
> 时间：2013-03-01T11:29:17.363
> 
> 标签：iphone, ios, objective-c

在 ios 应用程序中，我想在单个应用程序中实现“导航栏”和“侧边栏”，如下图所示

![在此处输入图像描述](../Images/fe532ea800b3605af3290cfa816a9599.png)

对于标签栏控制器，我必须指定为 rootviewcontroller

并且对于侧边栏控制器也必须分配为 rootviewcontroller。

```
[self.window addSubview:[tabBarController view]]; 
```

和

```
 MenuViewController *menuViewController = [[MenuViewController alloc] initWithNibName:@"MenuViewController" bundle:nil];

    self.window.rootViewController = menuViewController; 
```

如何将两个不同的选项卡栏分配为 rootviewcontroller，任何想法.. 在此先感谢

# android - 在“触摸平面”和“游戏平面”之间转换

> ID：15156660
> 
> 赞同：0
> 
> 时间：2013-03-01T11:29:25.437
> 
> 标签：android, math, opengl-es

我正在尝试创建一个 2D 游戏。因为我使用的是 OpenGL ES，所以我必须以 3D 形式绘制所有内容，但我只需修复 z 坐标，这很好。现在我要做的是计算两个向量之间的角度（C = 玩家中心，P = 玩家正上方的点，T = 接触点）CP 和 CT，这样我就可以让玩家面向那个方向。我知道如何获得 2 个向量之间的角度，但我的问题是让所有点都存在于同一平面上（通过平移 T）。

我知道 T 存在于 (0,0) 位于左上角且 UP 实际上是 DOWN（视觉上）的平面上。我也知道 C 和 P 的 UP 实际上是 UP，并且它们的任何 X 和 Y 都在与 T 完全不同的 3 维平面上。我需要将 C 和 P 放到 T 的平面上（我在下面尝试过）或得到 T到 C 和 P 的平面上。谁能帮我？我正在使用标准的 OpenGL 投影模型，并且我是 0,0,-4 缩小了截锥体（我直接看（0,0,0））。我的 2D 对象都位于平面 (0,0,1) 上；

```
private float getRotation(float touch_x, float touch_y)
{
    //center_x = this.getWidth() / 2;
    //center_y = this.getHeight() / 2;

    float cx, cy, tx, ty, ux, uy;

    cx = (player.x * _renderer.centerx);
    cy = (player.y * -_renderer.centery);

    ux = cx;
    uy = cy+1.0f;

    tx = (touch_x - _renderer.centerx);
    ty = (touch_y - _renderer.centery);

    Log.d(TAG, "center  x: "+cx+"y:"+cy);
    Log.d(TAG, "up      x: "+ux+"y:"+uy);
    Log.d(TAG, "touched x: "+tx+"y:"+ty);

    float P12 = length(cx,cy,tx,ty);
    float P13 = length(cx,cy,ux,uy);
    float P23 = length(tx,ty,ux,uy);

    return (float)Math.toDegrees(Math.acos((P12*P12 + P13*P13 - P23*P23)/2.0 * P12 * P13));
} 
```

基本上我想知道是否有一种方法可以使用标准视锥体将 (tx, ty, -4) 转换为 (x, y, 1)。

我现在已经尝试了一些其他的东西。在我的触摸事件中，我试图这样做：

```
float[] coords = new float[4];
GLU.gluUnProject(touch_x, touch_y, -4.0f, renderer.model, 0, renderer.project, 0, renderer.view, 0, coords, 0); 
```

这是抛出异常我在渲染器对象的 OnSurfaceChanged 中设置模型、投影和视图：

```
 GL11 gl11 = (GL11)gl;

    model = new float[16];
    project = new float[16]; 
    int[] view = new int[4];

    gl11.glGetFloatv(GL10.GL_MODELVIEW, model, 0);
    gl11.glGetFloatv(GL10.GL_PROJECTION, project, 0);
    gl11.glGetIntegerv(GL11.GL_VIEWPORT, view, 0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T06:27:56.570

我有几本关于 openGL 的教科书，在掸掉一本之后，我发现我想做的事情的术语叫做**Picking**。一旦我知道我在问什么，我就找到了很多好的网站和参考资料：

*   [http://www.lighthouse3d.com/opengl/picking/](http://www.lighthouse3d.com/opengl/picking/)
*   [OpenGL ES (iPhone) 触摸拾取](https://stackoverflow.com/questions/2231433/opengl-es-iphone-touch-picking)
*   [使用 OpenGL ES 2.0 进行坐标拾取](https://stackoverflow.com/questions/13507702/coordinate-picking-with-opengl-es-2-0)
*   [Android OpenGL 3D 拾取](https://stackoverflow.com/questions/6699387/android-opengl-3d-picking)
*   [在 OpenGL ES 中将 2D 鼠标坐标转换为 3D 空间](https://stackoverflow.com/questions/2532693/converting-2d-mouse-coordinates-to-3d-space-in-opengl-es)
*   [使用 OpenGL ES 2.0 进行坐标拾取](https://stackoverflow.com/questions/13507702/coordinate-picking-with-opengl-es-2-0)
*   [OpenGL ES 2.0 中的光线拾取](https://stackoverflow.com/questions/14185279/ray-picking-in-opengl-es-2-0)
*   [Android：GLES20：调用未实现的 OpenGL ES API](https://stackoverflow.com/questions/5926316/android-gles20-called-unimplemented-opengl-es-api)
    ...

这份名单几乎数不胜数。有 700 种方法可以做到这一点，但没有一种方法对我有用。最终，我决定回归基础并进行彻底的 OpenGL|ES 学习，为此我在这里购买了这本书：http: [//www.amazon.com/Graphics-Programming-Android-Programmer-ebook/dp /B0070D83W2/ref=sr_1_2?s=数字文本&ie=UTF8&qid=1362250733&sr=1-2&keywords=opengl+es+2.0+android](https://rads.stackoverflow.com/amzn/click/com/B0070D83W2)

我已经了解到的一件事是我肯定使用了错误的投影类型。我不应该将全 3D 用于 2D 游戏。为了在完整的 3D 环境中进行拾取，我必须将一条光线从屏幕点投射到进行游戏的 3D 平面的表面上。除了资源的可怕浪费（每次点击的光线投射）之外，还有其他的迹象。我会为我的玩家渲染一个围绕她的圆圈，当我移动她时，圆圈会偏离玩家的中心。这是由于在 2D 平面上渲染的完整 3D 环境。它只是不会产生专业的结果。我需要使用正交投影。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T04:55:27.143

我认为你试图一次做太多事情。我可以分别理解你问题的每一句话；但是串在一起，很混乱。

对于例外情况，您可能需要传递恒等矩阵而不是零矩阵来获得基本的 1 对 1 投影。

然后我建议您将 y 维度缩放 -1，以便所有 UP 和 DOWN 至少匹配。

我希望这会有所帮助，因为我不能 100% 确定您要做什么。特别是，“使用标准视锥体将 (tx, ty, -4) 转换为 (x, y, 1)”对我来说没有意义。您可以使用翻译矩阵进行翻译。您可以剪辑到视锥，或将对象从视锥投影到平面（通常是视图平面）。但是如果你所有的 Z 都是不变的，你可以直接丢弃它们，对吧？那么，假设 x=tx 和 y=ty，那么`tz += 5`?

# php - 对象不支持 IE 中的属性或方法“延迟”

> ID：15156669
> 
> 赞同：1
> 
> 时间：2013-03-01T11:30:12.870
> 
> 标签：php, jquery, ajax, internet-explorer

我正在使用 jQuery 1.6.2 表单插件并使用 ajax 提交功能来提交包含图像上传功能的表单。在每个浏览器中，这都能正常工作，但在 IE9 中，当尝试提交表单时，会出现“对象不支持 IE 中的属性或方法'Deferred'”错误。ajax提交函数如下图所示。

```
 jQuery('#el-add-press-review-form').ajaxSubmit({
            url:baseurl+profile_url+'/rr/add',
            dataType:'json',
            success:function(data){
                if(data.status == 'success'){
                    show_messages(data.status,data.msg);
                    jQuery(data.html).hide().prependTo('.el- main-press-review-container').fadeIn(800);

                    lenthOffieldset=jQuery('.el-main-press-review-container').children("fieldset").length;
                    jQuery('.catalog-message').hide();
                    /*if(lenthOffieldset>5){
                        //jQuery('.el-main-press-review-container fieldset:last').remove();
                        jQuery('.el-load-more-press-reviews').show();
                        jQuery('.el-load-more-press-reviews').html('Load More');
                    } 
                    else{
                        jQuery('.el-load-more-press-reviews').hide();
                    }*/
                    lastpressReviewId=jQuery('.el-main-press-review-container fieldset:last').attr('press_review_id');
                    jQuery('.el-load-more-press-reviews').attr('last_press_review',lastpressReviewId);
                    //show_messages(data.status,data.msg);
                    jQuery.unblockUI();
                }
                else if(data.status == 401){
                    redirect_login_timed_out();
                } 
                else {
                    show_messages(data.status,data.msg);
                }   
            },
            error:function(){
                jQuery.unblockUI();
            }
        })
        jQuery('.dialogAddPressReview').dialog('close');
    }
}); 
```

需要知道为什么会发生上述错误。

# java - 如何使用 ^DG 命令将图像发送到 java 中的斑马打印机？

> ID：15156671
> 
> 赞同：4
> 
> 时间：2013-03-01T11:30:13.557
> 
> 标签：java, image, zebra-printers, zpl

有谁知道如何将图像（例如 *.bmp 文件）转换为 java 中的 HEX 字符串，所以 HEX 字符串可以在 ^DG 命令（zpl 中的命令之一）中使用。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-10-11T11:19:10.280

我写了一个可以做到这一点的java示例。您还可以创建 ascii 十六进制代码或压缩的 ZPL 代码并选择黑度百分比以提高准确性。

相应地更改 main 方法中的参数。有关更广泛的解释 [here](http://www.jcgonzalez.com/java-image-to-zpl-example)

*要测试结果而不打印，请在此处[输入](http://labelary.com/viewer.html)

```
import java.awt.Graphics2D;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;
import java.util.HashMap;
import java.util.Map;

import javax.imageio.ImageIO;
public class ZPLConveter {
    private int blackLimit = 380;
    private int total;
    private int widthBytes;
    private boolean compressHex = false;
    private static Map<Integer, String> mapCode = new HashMap<Integer, String>();
    {
        mapCode.put(1, "G");
        mapCode.put(2, "H");
        mapCode.put(3, "I");
        mapCode.put(4, "J");
        mapCode.put(5, "K");
        mapCode.put(6, "L");
        mapCode.put(7, "M");
        mapCode.put(8, "N");
        mapCode.put(9, "O");
        mapCode.put(10, "P");
        mapCode.put(11, "Q");
        mapCode.put(12, "R");
        mapCode.put(13, "S");
        mapCode.put(14, "T");
        mapCode.put(15, "U");
        mapCode.put(16, "V");
        mapCode.put(17, "W");
        mapCode.put(18, "X");
        mapCode.put(19, "Y");
        mapCode.put(20, "g");
        mapCode.put(40, "h");
        mapCode.put(60, "i");
        mapCode.put(80, "j");
        mapCode.put(100, "k");
        mapCode.put(120, "l");
        mapCode.put(140, "m");
        mapCode.put(160, "n");
        mapCode.put(180, "o");
        mapCode.put(200, "p");
        mapCode.put(220, "q");
        mapCode.put(240, "r");
        mapCode.put(260, "s");
        mapCode.put(280, "t");
        mapCode.put(300, "u");
        mapCode.put(320, "v");
        mapCode.put(340, "w");
        mapCode.put(360, "x");
        mapCode.put(380, "y");        
        mapCode.put(400, "z");            
    }
    public String convertfromImg(BufferedImage image) throws IOException {
        String body = createBody(image);
        if(compressHex)
           body = encodeHexAscii(body);
        return headDoc() + body + footDoc();        
    }
    private String createBody(BufferedImage orginalImage) throws IOException {
        StringBuffer sb = new StringBuffer();
        Graphics2D graphics = orginalImage.createGraphics();
        graphics.drawImage(orginalImage, 0, 0, null);
        int height = orginalImage.getHeight();
        int width = orginalImage.getWidth();
        int rgb, red, green, blue, index=0;        
        char auxBinaryChar[] =  {'0', '0', '0', '0', '0', '0', '0', '0'};
        widthBytes = width/8;
        if(width%8>0){
            widthBytes= (((int)(width/8))+1);
        } else {
            widthBytes= width/8;
        }
        this.total = widthBytes*height;
        for (int h = 0; h<height; h++)
        {
            for (int w = 0; w<width; w++)
            {
                rgb = orginalImage.getRGB(w, h);
                red = (rgb >> 16 ) & 0x000000FF;
                green = (rgb >> 8 ) & 0x000000FF;
                blue = (rgb) & 0x000000FF;
                char auxChar = '1';
                int totalColor = red + green + blue;
                if(totalColor>blackLimit){
                    auxChar = '0';
                }
                auxBinaryChar[index] = auxChar;
                index++;
                if(index==8 || w==(width-1)){
                    sb.append(fourByteBinary(new String(auxBinaryChar)));
                    auxBinaryChar =  new char[]{'0', '0', '0', '0', '0', '0', '0', '0'};
                    index=0;
                }
            }
            sb.append("\n");
        }
        return sb.toString();
    }
    private String fourByteBinary(String binaryStr){
        int decimal = Integer.parseInt(binaryStr,2);
        if (decimal>15){
            return Integer.toString(decimal,16).toUpperCase();
        } else {
            return "0" + Integer.toString(decimal,16).toUpperCase();
        }
    }
    private String encodeHexAscii(String code){
        int maxlinea =  widthBytes * 2;        
        StringBuffer sbCode = new StringBuffer();
        StringBuffer sbLinea = new StringBuffer();
        String previousLine = null;
        int counter = 1;
        char aux = code.charAt(0);
        boolean firstChar = false; 
        for(int i = 1; i< code.length(); i++ ){
            if(firstChar){
                aux = code.charAt(i);
                firstChar = false;
                continue;
            }
            if(code.charAt(i)=='\n'){
                if(counter>=maxlinea && aux=='0'){
                    sbLinea.append(",");
                } else     if(counter>=maxlinea && aux=='F'){
                    sbLinea.append("!");
                } else if (counter>20){
                    int multi20 = (counter/20)*20;
                    int resto20 = (counter%20);
                    sbLinea.append(mapCode.get(multi20));
                    if(resto20!=0){
                        sbLinea.append(mapCode.get(resto20) + aux);    
                    } else {
                        sbLinea.append(aux);    
                    }
                } else {
                    sbLinea.append(mapCode.get(counter) + aux);
                    if(mapCode.get(counter)==null){
                    }
                }
                counter = 1;
                firstChar = true;
                if(sbLinea.toString().equals(previousLine)){
                    sbCode.append(":");
                } else {
                    sbCode.append(sbLinea.toString());
                }                
                previousLine = sbLinea.toString();
                sbLinea.setLength(0);
                continue;
            }
            if(aux == code.charAt(i)){
                counter++;                
            } else {
                if(counter>20){
                    int multi20 = (counter/20)*20;
                    int mod20 = (counter%20);
                    sbLinea.append(mapCode.get(multi20));
                    if(mod20!=0){
                        sbLinea.append(mapCode.get(mod20) + aux);    
                    } else {
                        sbLinea.append(aux);    
                    }
                } else {
                    sbLinea.append(mapCode.get(counter) + aux);
                }
                counter = 1;
                aux = code.charAt(i);
            }            
        }
        return sbCode.toString();
    }
    private String headDoc(){
        String str = "^XA " +
                        "^FO0,0^GFA,"+ total + ","+ total + "," + widthBytes +", ";
        return str;
    }
    private String footDoc(){
        String str = "^FS"+
                        "^XZ";        
        return str;
    }
    public void setCompressHex(boolean compressHex) {
        this.compressHex = compressHex;
    }
    public void setBlacknessLimitPercentage(int percentage){
        blackLimit = (percentage * 768 / 100);
    }
    public static void main(String[] args) throws Exception {
        BufferedImage orginalImage = ImageIO.read(new File("/tmp/logo.jpg"));
        ZPLConveter zp = new ZPLConveter();
        zp.setCompressHex(true);
        zp.setBlacknessLimitPercentage(50);        
        System.out.println(zp.convertfromImg(orginalImage));        
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T18:17:21.153

这是不容易的。您必须将图像转换为每像素 1 位 b/w，然后计算包含每行字节数的大小，然后正确形成`~DG`命令的参数来存储它。

或者...

Zebra 提供了将图像转换为 GRF（Zebra 内部图像类型）的 API。包中有一堆开发者演示，包括一个关于如何在打印机上打印/存储图像作为 GRF 的演示

[Zebra Link-OS SDK 下载](http://www.zebra.com/us/en/products-services/software/link-os/link-os-sdk.html)

希望这可以帮助

# android - 从 Internet 加载数据时进行对话框

> ID：15156672
> 
> 赞同：0
> 
> 时间：2013-03-01T11:30:15.367
> 
> 标签：android, progressdialog

我如何制作 ProgressDialog，它会在我的方法做一些工作时显示？我知道有很多相关的问题，但我不明白答案。单独的线程是不是一个好方法？我的方法是从网上下载一些数据

请为我提供一个非常详细的答案，说明我如何做到这一点。单独的课程会很棒

任何答案和评论都将被应用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:42:03.960

嘿，试试下面的代码，它可能会有所帮助：

```
 @Override
  public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

new TheTask().execute();
 }

private class TheTask extends AsyncTask<Void, Void, Void>{

 @Override
protected void onPreExecute()
{
    super.onPreExecute();
    pDialog = new ProgressDialog(YOUR_ACTIVITY_CLASS_NAME.this);
    pDialog.setMessage("Please Wait");
    pDialog.setIndeterminate(false);
    pDialog.setCancelable(false);
    pDialog.show();
}

@Override
protected Void doInBackground(Void... params) {
    authenticate(); // method that calls the API via SOAP
    authenticateReal(); // method that handles the response
    return null;
}

@Override
 protected void onPostExecute(String str)
 {
    // Dismiss the dialog once finished
    pDialog.dismiss();  
  }
 } 
```

在调用它之前定义 pDialog：

```
 ProgresDialog pDialog; 
```

# c++ - C++ 通过 UDP 套接字发送结构

> ID：15156674
> 
> 赞同：0
> 
> 时间：2013-03-01T11:30:22.323
> 
> 标签：c++, sockets, udp, structure

我正在尝试通过 UDP 套接字发送结构，我收到了正确的 DRB_count 值但无法接收 KenbStar 的值。我究竟做错了什么？我正在使用同一台机器，在客户端和服务器中使用相同的端口环回 ip 127.0.01。

客户：

```
typedef struct tseTargetCellInformation{
   UInt8 DRB_count;                     
   UInt8 *KenbStar;
}tTargetCellConfiguration;

trecTargetCellConfiguration *rx_TargetCellConfiguration_str;

rx_TargetCellConfiguration_str = (trecTargetCellConfiguration*)malloc(sizeof(trecTargetCellConfiguration));

send_TargetCellConfiguration_str->DRB_count=1;
send_TargetCellConfiguration_str->KenbStar = (UInt8*) malloc(1);
send_TargetCellConfiguration_str->KenbStar[0]= 0x5b;

sendto(sd, (char *) (send_TargetCellConfiguration_str), sizeof(tTargetCellConfiguration), 0, (struct sockaddr *)&server, slen) 
```

服务器：

```
typedef struct tseTargetCellInformation{
   UInt8 DRB_count;                     
   UInt8 *KenbStar;
}tTargetCellConfiguration;

rx_TargetCellConfiguration_str->KenbStar = (UInt8*) malloc(1);

recvfrom(sd, (char *) (rx_TargetCellConfiguration_str), sizeof(trecTargetCellConfiguration), 0, (struct sockaddr*) &client, &client_length); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:40:36.810

因为`KenbStar`是一个指针，所以您必须[取消引用](https://stackoverflow.com/questions/4955198/what-does-dereferencing-a-pointer-mean)才能发送它指向的值或接收该值。否则，您只是发送和接收*指针*（即，不是指向的内容），这通常毫无意义（特别是如果客户端和服务器是不同的进程）。

换句话说，类似：

```
sendto(sd, (char *) send_TargetCellConfiguration_str->KenbStar, sizeof(UInt8), ... 
```

和

```
recvfrom(sd, (char *) rx_TargetCellConfiguration_str->KenbStar, sizeof(UInt8), ... 
```

然而，创建一个普通成员可能是最简单`KenbStar`的，就像`DRB_count`，除非你有一个特定的原因为什么它必须是一个指针。然后，您只需一次调用即可发送（和接收）整个结构。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:42:56.337

您不能将指向一个内存空间的指针发送到另一个内存空间并期望它指向同一事物，尤其是当您尚未发送它所指向的内容时。由于大约十个其他原因，通过网络发送未编码的结构也是一个禁忌。您需要研究一些表示层，例如 XDR。

# android - Android gridview 适配器为零位置调用多个 getview()

> ID：15156675
> 
> 赞同：1
> 
> 时间：2013-03-01T11:30:32.113
> 
> 标签：android, android-gridview

Android gridview 适配器多次调用`getView()`位置为零。下面你可以看到我的 xml 代码和日志。任何人都可以告诉我这段代码中有什么错误吗？

```
<GridView
    android:id="@+id/reward_grid"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_centerInParent="true"
    android:background="@color/transparent"
    android:horizontalSpacing="@dimen/reward_negative_space_medium"
    android:listSelector="@color/Transparent"
    android:numColumns="2"
    android:scrollbars="none"
    android:stretchMode="columnWidth"
    android:verticalSpacing="@dimen/reward_negative_space_medium" >
</GridView> 
```

我的适配器代码是@Override public View getView(int position, View convertVieww, ViewGroup parent) {

```
 if(ShopBitesLog.IS_DEBUG_ENABLED)
        Log.d(Tag, "Getview calling for position : "+ position);

    if (convertView == null) {

        holder = new ViewHolder();

        final View convertView = inflator.inflate(R.layout.reward_grid_items, null);

        holder.rewardGriditemTopImg = (ImageView)convertView
                .findViewById(R.id.reward_grid_top_Img);

        holder.rewardGriditemBites = (TextView)convertView
                .findViewById(R.id.reward_grid_pointsTxt);

        holder.reward_manin_linear = (RelativeLayout)convertView
                .findViewById(R.id.reward_manin_linear);

        holder.relative_reward_image = (RelativeLayout)convertView.findViewById(R.id.relative_reward_image);

        holder.rewardText = (TextView)convertView.findViewById(R.id.rewardText);

        holder.reward_first_relative=(RelativeLayout)convertView.findViewById(R.id.reward_first_relative);

        holder.reward_second_relative=(RelativeLayout)convertView.findViewById(R.id.reward_second_relative);

        convertView.setTag(holder);

    } else {

        holder = (ViewHolder)convertView.getTag();

    }

    if (rewardList.get(position).isAnnouncement()) {

        holder.reward_second_relative.setVisibility(View.VISIBLE);
        holder.reward_first_relative.setVisibility(View.GONE);

       // holder.rewardGriditemTopImg.setImageResource(R.drawable.charity);
       // holder.rewardText.setVisibility(View.VISIBLE);

        holder.rewardText.setText(rewardList.get(position).getRewardText());

      //  holder.relative_reward_image.setVisibility(View.INVISIBLE);

    } else {

        holder.reward_first_relative.setVisibility(View.VISIBLE);
        holder.reward_second_relative.setVisibility(View.GONE);

      //  holder.relative_reward_image.setVisibility(View.VISIBLE);

      //  holder.rewardText.setVisibility(View.INVISIBLE);

        holder.rewardGriditemBites.setText(rewardList.get(position).getShop_bites() + " "
                + "bites");
        imageBitmapLoader.DisplayImage(rewardList.get(position).getReward_image(), 0,
                holder.rewardGriditemTopImg, true);

    }
    return convertView;
} 
```

我的日志在这里。

```
03-01 11:06:06.349：D/RewardGridAdapter(827)：Getview 调用位置：0
03-01 11:06:06.381：D/RewardGridAdapter(827)：Getview 调用位置：0
03-01 11:06:06.503：D/RewardGridAdapter(827)：Getview 调用位置：0
03-01 11:06:06.519：D/RewardGridAdapter(827)：Getview 调用位置：0
03-01 11:06:06.519：D/RewardGridAdapter(827)：Getview 调用位置：0
03-01 11:06:06.540：D/RewardGridAdapter(827)：Getview 调用位置：0
03-01 11:06:06.560：D/RewardGridAdapter(827)：Getview 调用位置：0
03-01 11:06:06.560：D/RewardGridAdapter(827)：Getview 调用位置：0
03-01 11:06:06.580：D/RewardGridAdapter(827)：Getview 调用位置：0
03-01 11:06:06.590：D/RewardGridAdapter(827)：Getview 调用位置：0
03-01 11:06:06.720：D/RewardGridAdapter(827)：Getview 调用位置：0
03-01 11:06:06.730：D/RewardGridAdapter(827)：Getview 调用位置：0
03-01 11:06:06.730：D/RewardGridAdapter(827)：Getview 调用位置：0

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:39:23.837

您的代码很可能没有任何问题。无法保证适配器`AdapterView`会调用多少次。`getView()`你的工作只是让`getView()`速度非常快。

# php - .htaccess 规则会重写地址栏中的 URL

> ID：15156677
> 
> 赞同：2
> 
> 时间：2013-03-01T11:30:41.477
> 
> 标签：php, apache, .htaccess, mod-rewrite, post

我有一个网站，我的链接看起来像这样 [http://www.domain.com/index.php?lang=English&inc=canyoning](http://www.domain.com/index.php?lang=English&inc=canyoning) 我设法像这样编写 rewriteRule：

`RewriteRule (German|English)\/(.*) http://www.domain.com/index.php?lang=$1&inc=$2 [NC,R]`

现在我的链接看起来像这样：`<a href="http://www.domain.com/English/canyoning">`...

这可行，但我可以在浏览器地址栏中看到非用户友好的 URL。如何告诉浏览器使用`/English/canyoning`URL 中的链接而不是`index.php?lang=English&inc=canyoning`？

第二：我想在页面上使用表格。没有区别，无论我使用表单方法 =GET 还是 POST，都没有变量到达目标站点。

我想我的 rewriteRule 错误。如何解决这些问题？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T11:32:28.607

这是因为您正在执行重定向而不是重写..（`R`标志表示[Redirect](http://httpd.apache.org/docs/current/rewrite/flags.html#flag_r)）

因此，删除 R 标志应该可以解决您的问题。

您可能还需要删除硬编码域。当您进行重写时，您无法重写到不同的域。

IE。改变

```
RewriteRule (German|English)\/(.*) http://www.domain.com/index.php?lang=$1&inc=$2 [NC,R] 
```

到

```
RewriteRule (German|English)\/(.*) /index.php?lang=$1&inc=$2 [NC] 
```

# xcode - xcode 管理器刷新配置文件

> ID：15156682
> 
> 赞同：0
> 
> 时间：2013-03-01T11:30:58.220
> 
> 标签：xcode, provisioning-profile

我环顾四周，每个人似乎都与`xcode`组织者有很多不同的问题，但他们似乎没有同样的问题，所以我不能完全隔离我的问题。

我遇到的问题是当我去组织者并刷新配置文件时，它会产生一条消息说

> 使用您的 Apple ID 登录

我提供的用户名和密码都是正确的，但是窗口消失了，然后立即返回并且没有说明我是否输入了正确的详细信息（我知道它们是正确的），只要需要，它就会继续询问我刷新配置文件。当我选择用于开发的设备时也会发生这种情况，但该设备实际上从未添加到团队配置文件中，即使它说它已经添加了。

有谁知道我怎么能阻止这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-09T23:43:43.303

我想在你的位置上，我会进行以下检查：

1.  您可以在 Provisioning Profile 上登录您的帐户吗？如果可以，那么您的 Apple ID 和密码必须没问题

2.  在 Xcode 中并响应“登录”消息时，您是否使用 KeyChain 记住的用户名和密码？你确定这两个都可以吗？也许再次手动输入它们以确保

3.  在 Xcode 中，转到 Organizer 选项卡中的 Provisioning Profiles 屏幕，然后右键单击配置文件并选择“在 Finder 中显示”。保存配置文件本地副本的文件夹是否包含任何可能是旧版本/损坏版本的额外文件？如果是这样，请删除它们，返回 Xcode 并尝试再次刷新。

4.  如果上述三个检查没有产生任何有用的东西，那么我认为它必须是在需要撤销的配置文件（例如配置文件或证书）上损坏的东西 - 让 Xcode 为您重新创建它/它们。或者一些过时或本地损坏的东西（可能是 KeychainAccess 中的公钥或私钥或证书 - 配置文件的本地副本）。您可能必须开始撤销/删除数字资产才能让事情再次正常运行（但只有在您别无选择时才这样做......）

我曾经在 iPhone 开发人员证书上遇到一个可怕的问题，需要很长时间才能解决 - 但坚持不懈最终得到了回报 - 祝你好运！

# ruby-on-rails-3 - 使用延迟作业保存导入的 gmail 联系人

> ID：15156684
> 
> 赞同：0
> 
> 时间：2013-03-01T11:30:59.547
> 
> 标签：ruby-on-rails-3, delayed-job, google-contacts-api

我正在导入 gmail 联系人，一些用户有大量联系人需要很长时间才能保存在数据库中。如何在延迟作业中使用异步在后台运行。我正在使用[delay_job](https://github.com/collectiveidea/delayed_job) gem

这是我写的代码

```
token = Google::Authorization.exchange_singular_use_for_session_token(params[:token])
unless token == false
  @contacts = Google::Contact.all(token)      
  @contacts.each do |contact|
    next if contact.email.nil?
    c = {
      :user_id => current_user.id,
      :source => 'gmail',
      :name => contact.name,
      :email => contact.email
    }
    c = Contact.find_or_initialize_by_email(c[:email])
    c.update_attributes(c)
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:08:41.243

在 Gemfile 中添加这些 gem

```
gem 'ghazel-daemons'
gem 'delayed_job' 
```

然后运行

```
bundle install

rails g delayed_job:active_record

rake db:migrate 
```

然后使用延迟作业提供的延迟方法在后台运行进程

```
c = Contact.find_or_initialize_by_email(c[:email])
c.delay.update_attributes(c) 
```

使用命令从项目根目录启动延迟作业流程，

```
rake jobs:work 
```

要在部署后自动启动/停止/重新启动，请参阅文档 [https://github.com/collectiveidea/delayed_job/wiki/Rails-3-and-Capistrano](https://github.com/collectiveidea/delayed_job/wiki/Rails-3-and-Capistrano)

有关如何使用延迟作业方法的更多选项，您可以查看此页面[https://github.com/collectiveidea/delayed_job](https://github.com/collectiveidea/delayed_job)

# iphone - 从 uiwebview 获取更新的 url

> ID：15156685
> 
> 赞同：2
> 
> 时间：2013-03-01T11:31:04.460
> 
> 标签：iphone, ios, uiwebview, uiwebviewdelegate

我有一个 uiwebview 我在其中打开[http://google.com](http://google.com)。然后我在谷歌搜索栏中输入一些东西并搜索一些东西。我想获取由于我在 google 上搜索而生成的更新后的 url。

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self setUrlAddress:@"http://google.com.pk"];
    // Do any additional setup after loading the view from its nib.
    NSURL *url = [NSURL URLWithString:self.urlAddress];
    //URL Requst Object
    NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
    //Load the request in the UIWebView.
    [self.webView setScalesPageToFit:YES];
    [self.webView loadRequest:requestObj];

}

- (void)webViewDidStartLoad:(UIWebView *)webView{
    [appDelegate showActivityView:self.view];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView{
    [appDelegate hideActivityView];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:35:55.150

试试这个

```
NSString *currentURL = [webView stringByEvaluatingJavaScriptFromString:@"window.location.href"]; 
```

希望它对你有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-14T13:36:43.717

以下是正确答案，但它不适用于 Facebook 和 youtube

```
NSSTRing * currentURL = webView.request.URL.absoluteString; 
```

如果有人知道更好的答案，请分享。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:34:16.317

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSString *urlAddress = [NSString stringWithFormat:@"http://www.google.com/pk];
//Create a URL object.
    NSURL *url = [NSURL URLWithString:urlAddress];
//URL Requst Object
   NSURLRequest *requestObj = [NSURLRequest requestWithURL:url];
//Load the request in the UIWebView.
   [webView loadRequest:requestObj];

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:24:32.293

试试这个委托方法：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType; 
```

您可以获取 request 并 nslog 该请求。

# php - 学说：自定义实体存储库

> ID：15156688
> 
> 赞同：0
> 
> 时间：2013-03-01T11:31:17.343
> 
> 标签：php, codeigniter, doctrine-orm, repository-pattern

在构建自定义实体存储库时遇到一些问题。

尝试自定义实体存储库的方法时出现以下致命错误

```
Fatal error: Uncaught exception 'BadMethodCallException' with message 'Undefined method 'getByParentId'. The method name must start with either findBy or findOneBy!' in C:\Users\user\Desktop\projects\interview\application\libraries\Doctrine\ORM\EntityRepository.php:215 Stack trace: #0 C:\Users\user\Desktop\projects\interview\application\controllers\CommentController.php(58): Doctrine\ORM\EntityRepository->__call('getByParentId', Array) #1 C:\Users\user\Desktop\projects\interview\application\controllers\CommentController.php(58): Doctrine\ORM\EntityRepository->getByParentId('1') #2 [internal function]: CommentController->viewCommentsListByParentId('1') #3 C:\Users\user\Desktop\projects\interview\system\core\CodeIgniter.php(359): call_user_func_array(Array, Array) #4 C:\Users\user\Desktop\projects\interview\index.php(203): require_once('C:\Users\user\D...') #5 {main} thrown in C:\Users\user\Desktop\projects\interview\application\libraries\Doctrine\ORM\EntityRepository.php on line 215 
```

我的项目结构是模型映射存储库实体代理

我的学说.php 有这样的存储库加载器

```
// load the repositories
$repositoryClassLoader = new \Doctrine\Common\ClassLoader('Repositories', APPPATH.'models');
$repositoryClassLoader->register(); 
```

我的模型类有以下声明

```
namespace Entities;

use Doctrine\ORM\Mapping as ORM;

/**
 * Entities\Comment
 * @Entity (repositoryClass="Repositories\CommentRepository")
 */
class Comment
{ 
```

我的存储库类具有以下声明

```
namespace Repositories;
use Doctrine\ORM\EntityRepository;
use Entities;

class CommentRepository extends EntityRepository {
    public function getByParentId($parentid) {
        return parent::findBy(array('parentid' => $parentid), array('creationdate' => 'DESC'));
    }
} 
```

调用自定义存储库方法的控制器代码

```
 public function viewCommentsListByParentId($parentid) {
        $data = array();
        $data ['comment'] = $this->em->getRepository('Entities\Comment')->getByParentId($parentid);

        $this->load->view('commentsList', $data);
    } 
```

我做错了什么？？？请帮忙。

* * *

```
object(Doctrine\ORM\Mapping\ClassMetadata)#34 (32) {
    ["name"]=> string(16) "Entities\Comment"
    ["namespace"]=> string(8) "Entities"
    ["rootEntityName"]=> string(16) "Entities\Comment"
    ["customRepositoryClassName"]=> NULL
    ["isMappedSuperclass"]=> bool(false)
    ["parentClasses"]=> array(0) { }
    ["subClasses"]=> array(0) { }
    ["namedQueries"]=> array(0) { }
    ["identifier"]=> array(1) {
        [0]=> string(2) "id"
    }
    ["inheritanceType"]=> int(1)
    ["generatorType"]=> int(4)
    ["fieldMappings"]=> array(11) {
        ["id"]=> array(4) {
            ["fieldName"]=> string(2) "id"
            ["type"]=> string(7) "integer"
            ["id"]=> bool(true)
            ["columnName"]=> string(2) "id"
        }
        ["parentid"]=> array(4) {
            ["fieldName"]=> string(8) "parentid"
            ["type"]=> string(7) "integer"
            ["columnName"]=> string(8) "parentid"
            ["nullable"]=> bool(false)
        }
        ["isactive"]=> array(4) {
            ["fieldName"]=> string(8) "isactive"
            ["type"]=> string(7) "integer"
            ["columnName"]=> string(8) "isactive"
            ["nullable"]=> bool(false)
        }
        ["isremoved"]=> array(4) {
            ["fieldName"]=> string(9) "isremoved"
            ["type"]=> string(7) "integer"
            ["columnName"]=> string(9) "isremoved"
            ["nullable"]=> bool(false)
        }
        ["removaldate"]=> array(4) {
            ["fieldName"]=> string(11) "removaldate"
            ["type"]=> string(8) "datetime"
            ["columnName"]=> string(11) "removaldate"
            ["nullable"]=> bool(true)
        }
        ["user_name"]=> array(5) {
            ["fieldName"]=> string(9) "user_name"
            ["type"]=> string(6) "string"
            ["columnName"]=> string(9) "user_name"
            ["length"]=> int(255)
            ["nullable"]=> bool(false)
        }
        ["user_email"]=> array(5) {
            ["fieldName"]=> string(10) "user_email"
            ["type"]=> string(6) "string"
            ["columnName"]=> string(10) "user_email"
            ["length"]=> int(255)
            ["nullable"]=> bool(false)
        }
        ["user_avatar"]=> array(5) {
            ["fieldName"]=> string(11) "user_avatar"
            ["type"]=> string(6) "string"
            ["columnName"]=> string(11) "user_avatar"
            ["length"]=> int(255)
            ["nullable"]=> bool(false)
        }
        ["comment"]=> array(4) {
            ["fieldName"]=> string(7) "comment"
            ["type"]=> string(4) "text"
            ["columnName"]=> string(7) "comment"
            ["nullable"]=> bool(false)
        }
        ["creationdate"]=> array(4) {
            ["fieldName"]=> string(12) "creationdate"
            ["type"]=> string(8) "datetime"
            ["columnName"]=> string(12) "creationdate"
            ["nullable"]=> bool(false)
        }
        ["rating"]=> array(4) {
            ["fieldName"]=> string(6) "rating"
            ["type"]=> string(7) "integer"
            ["nullable"]=> bool(false)
            ["columnName"]=> string(6) "rating"
        }
    }
    ["fieldNames"]=> array(11) {
        ["id"]=> string(2) "id"
        ["parentid"]=> string(8) "parentid"
        ["isactive"]=> string(8) "isactive"
        ["isremoved"]=> string(9) "isremoved"
        ["removaldate"]=> string(11) "removaldate"
        ["user_name"]=> string(9) "user_name"
        ["user_email"]=> string(10) "user_email"
        ["user_avatar"]=> string(11) "user_avatar"
        ["comment"]=> string(7) "comment"
        ["creationdate"]=> string(12) "creationdate"
        ["rating"]=> string(6) "rating"
    }
    ["columnNames"]=> array(11) {
        ["id"]=> string(2) "id"
        ["parentid"]=> string(8) "parentid"
        ["isactive"]=> string(8) "isactive"
        ["isremoved"]=> string(9) "isremoved"
        ["removaldate"]=> string(11) "removaldate"
        ["user_name"]=> string(9) "user_name"
        ["user_email"]=> string(10) "user_email"
        ["user_avatar"]=> string(11) "user_avatar"
        ["comment"]=> string(7) "comment"
        ["creationdate"]=> string(12) "creationdate"
        ["rating"]=> string(6) "rating"
    }
    ["discriminatorValue"]=> NULL
    ["discriminatorMap"]=> array(0) { }
    ["discriminatorColumn"]=> NULL
    ["table"]=> array(1) {
        ["name"]=> string(7) "Comment"
    }
    ["lifecycleCallbacks"]=> array(0) { }
    ["associationMappings"]=> array(0) { }
    ["isIdentifierComposite"]=> bool(false)
    ["containsForeignIdentifier"]=> bool(false)
    ["idGenerator"]=> object(Doctrine\ORM\Id\IdentityGenerator)#40 (1) {
        ["_seqName":"Doctrine\ORM\Id\IdentityGenerator":private]=> NULL
    }
    ["sequenceGeneratorDefinition"]=> NULL
    ["tableGeneratorDefinition"]=> NULL
    ["changeTrackingPolicy"]=> int(1)
    ["isVersioned"]=> NULL
    ["versionField"]=> NULL
    ["reflClass"]=> object(ReflectionClass)#41 (1) {
        ["name"]=> string(16) "Entities\Comment"
    }
    ["isReadOnly"]=> bool(false)
    ["reflFields"]=> array(11) {
        ["id"]=> object(ReflectionProperty)#35 (2) {
            ["name"]=> string(2) "id"
            ["class"]=> string(16) "Entities\Comment"
        }
        ["parentid"]=> object(ReflectionProperty)#42 (2) {
            ["name"]=> string(8) "parentid"
            ["class"]=> string(16) "Entities\Comment"
        }
        ["isactive"]=> object(ReflectionProperty)#43 (2) {
            ["name"]=> string(8) "isactive"
            ["class"]=> string(16) "Entities\Comment"
        }
        ["isremoved"]=> object(ReflectionProperty)#44 (2) {
            ["name"]=> string(9) "isremoved" 
            ["class"]=> string(16) "Entities\Comment" 
        } 
        ["removaldate"]=> object(ReflectionProperty)#45 (2) { 
            ["name"]=> string(11) "removaldate" 
            ["class"]=> string(16) "Entities\Comment" 
        } 
        ["user_name"]=> object(ReflectionProperty)#46 (2) { 
            ["name"]=> string(9) "user_name" 
            ["class"]=> string(16) "Entities\Comment" 
        } 
        ["user_email"]=> object(ReflectionProperty)#47 (2) { 
            ["name"]=> string(10) "user_email" 
            ["class"]=> string(16) "Entities\Comment" 
        } 
        ["user_avatar"]=> object(ReflectionProperty)#48 (2) { 
            ["name"]=> string(11) "user_avatar" 
            ["class"]=> string(16) "Entities\Comment" 
        } 
        ["comment"]=> object(ReflectionProperty)#49 (2) { 
            ["name"]=> string(7) "comment" 
            ["class"]=> string(16) "Entities\Comment" 
        } 
        ["creationdate"]=> object(ReflectionProperty)#50 (2) { 
            ["name"]=> string(12) "creationdate" 
            ["class"]=> string(16) "Entities\Comment" 
        } 
        ["rating"]=> object(ReflectionProperty)#51 (2) { 
            ["name"]=> string(6) "rating" 
            ["class"]=> string(16) "Entities\Comment" 
        } 
    } 
    ["_prototype":"Doctrine\ORM\Mapping\ClassMetadataInfo":private]=> NULL 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-02-27T20:45:19.747

您已将 Doctrine\ORM\Mapping 作为 ORM 导入。

所以你应该在 Comment 类注释中使用`@ORM\Entity`而不是。`@Entity`

因为现在它不加载注释`["customRepositoryClassName"]=> NULL`

```
 /**
  * Entities\Comment
  * @ORM\Entity (repositoryClass="Repositories\CommentRepository")
  */
 class Comment
 {
 .. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T12:14:49.887

你写了

```
/**
 * Entities\Comment
 * @Entity (repositoryClass="Repositories\CommentRepository")
 */
class Comment
{ 
```

该注释的参数和参数之间有一个空格`@Entity`：删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-03T21:29:34.990

尽管 OP 在评论中发布了他们的答案。

当我试图调用任何学说的 clear-cache 命令时，它抛出了一个异常。

`$ vendor/bin/doctrine orm:clear-cache:metadata Cannot clear APC Cache from Console, its shared in the Webserver memory and not accessible from the CLI.`.

我的开发环境不使用 APC，因此存储库运行良好。当我将它上传到生产服务器时，它失败并出现与 OP 相同的错误。

我能够通过`apc_clear_cache()`从网页执行来解决这个问题。之后自定义存储库加载正常。

例如：http : [//mydoamin.com/clear-cache.php](http://mydoamin.com/clear-cache.php)

```
<?php

apc_clear_cache(); 
```

在 CLI 中运行它只会清除 CLI 缓存而不是 Web 服务器的缓存。 [http://php.net/manual/en/function.apc-clear-cache.php](http://php.net/manual/en/function.apc-clear-cache.php)

# android - 如何使用 sonic ndk android 播放 mp3/wav？

> ID：15156689
> 
> 赞同：2
> 
> 时间：2013-03-01T11:31:19.687
> 
> 标签：android

我在[这里](https://github.com/waywardgeek/sonic-ndk)得到了 sonic ndk 的工作样本。

它播放talk.bin。当我尝试播放mp3文件时。它只是播放噪音。我需要单独的解码器吗？我是否有可能使用媒体播放器播放音频并以某种方式使用声波改变（声音）速度？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T14:40:48.543

我找到了解决方案。

SONIC ndk 正在播放 pcm 文件。

您可以将任何 mp3 转换为 pcm，然后尝试播放该文件是 demo sonic 项目，您将能够播放该文件。对于 mp3 到 pcm 的转换，我使用 ffmpeg 使用命令

```
ffmpeg -y -i mymp3file.mp3 -f s16le -acodec pcm_s16le mypcmfile.pcm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-23T02:47:38.023

如果您从麦克风获取音频，您可以使用[http://i-liger.com/article/android-wav-audio-recording](http://i-liger.com/article/android-wav-audio-recording)中的 ExtAudioRecorder.java ，它会将您的文件导出为可以使用的 .wav 文件，但是就任何格式的常规音乐音频而言，这是不行的。

# visual-studio-2010 - MsWord.BackgroundPrintingStatus

> ID：15156697
> 
> 赞同：0
> 
> 时间：2013-03-01T11:31:43.080
> 
> 标签：visual-studio-2010, ms-word

我有一个正在运行的 Word 文档实例（通过 New Word.Application 打开）。我已填充文档并将其发送到打印，但是，如果我随后使用 Msword.application.quit 方法作为下一条语句，它将取消打印作业

我已经放入了一个 do while`MsWord.BackgroundPrintingStatus = 1`循环，但这随后进入了一个无限循环。

进入代码并给打印作业时间运行，然后继续执行退出命令工作正常，`MsWord.BackgroundPrintingStatus`并且返回到 0。

为什么 do while 循环在等待状态更改时会进入无限循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T11:56:31.157

好的，找到了一种方法。在printingstatus = 0时将退出放在一个do中

# visual-studio - Tracking multiple sub-projects using Visual Studio 2012 git

> ID：15156703
> 
> 赞同：2
> 
> 时间：2013-03-01T11:32:13.327
> 
> 标签：visual-studio, git, version-control

I have been struggling with what (at least in my mind) should be simple:

I have two projects, the "MainProgram" and a "SubLibrary". Both were created with a Git Repository using the new Visual Studio 2012 Git support.

Both repositories work fine independently.

However when I "Add Existing Project"/SubLibrary to my MainProgram Solution, SubLibrary is not being "git-monitored" by Visual Studio at all - no overlaid status icons in Solution Explorer etc. - its just as if that project was not under source-control.

Through some research, I added a git submodule to the MainProgram repo, added the cloned version of SubLibrary project to the solution and .. the git-icons in Solution Explorer appeared!! ... but my joy was short-lived ..... No History, the status of changed files did not show in Solution Explorer. The changes were however picked up by TortoiseGit from within File Explorer.

The .gitmodules file looked OK (but as you can gather I am NO git guru!) .....

Surely it must be possible to have version control over multiple projects/repos within a single solution!

I would be very greatful if anyone could point me in the right direction!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T09:00:29.597

在 Git 中，确实通常拥有较小的存储库。一个典型的存储库将包含一个项目，而 TFS 和 Subversion 往往在一个存储库中有多个项目。

这将导致您描述的情况。目前据我所知，Visual Studio（和 TFS）中没有 git 多存储库支持。当每个项目都驻留在自己的 Git 存储库中时，根本不可能有一个包含多个项目的单一解决方案。

我过去做过的事情：

*   我创建了一个目录作为根目录
*   在该目录中为每个单独的项目创建一个子目录
*   在其各自的子目录中克隆每个 git 存储库
*   在项目中使用带有相对路径的文件引用来添加引用
*   （可选）创建一个 MSBuild 文件，以正确的顺序构建所有解决方案。通过这种方式，您可以使用多个 Git 存储库创建构建。

通过这种方式，您不会有一个单一的解决方案，但您将能够在每个单独的存储库中跟踪您的更改。

希望这对您有所帮助。

# java - If session expires, continue work after re-login

> ID：15156704
> 
> 赞同：0
> 
> 时间：2013-03-01T11:32:15.110
> 
> 标签：java, spring, jakarta-ee, web, session-timeout

I have a problem regarding session timeout in the following Scenario.

1.  First, the user login with his valid information.
2.  After successful login, he is redirected to "PAGE1"
3.  He input some data and press "**NEXT PAGE button**" . Now, He will be redirected to "PAGE2". The data input by the user in PAGE1 is stored in the session attribute. So that he may go back to PAGE1 from PAGE2 by using "**PREVIOUS PAGE button**" .

4.  When he press "**UPDATE**" button , If the session timeout occurs, Login page will be redirected.

So my Requirement is: 1\. He should continue his work from the same page if he successfully login without loosing any previously set data in session attribute. 2\. He should go back to PAGE1 if he want.

Is it possible? What can be the possible solutions for the given scenario? I would be grateful for the suggestion. Thankyou.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:42:43.600

您可以将来自 page1 的数据输入存储在 page2 表单中的隐藏字段中。这样，页面提交来自 page1 和 page2 的所有数据，因此服务器不需要在会话中保存来自 page1 的响应。

这还允许用户在其浏览器的不同选项卡中同时填写两个表单，并减少您持有的会话数据量，因此无论如何都可以被认为是更可取的。

我认为，当您发现他们的会话超时时，您可以在登录后使用您在服务器上收到的任何请求进行重定向。

# c# - ASP.NET C# DataTable DropDownList 问题

> ID：15156708
> 
> 赞同：0
> 
> 时间：2013-03-01T11:32:31.600
> 
> 标签：c#, asp.net

我有一个数据表/源绑定到 ASP.NET C# 中的下拉列表。

我正在尝试使用以下方法返回选定的下拉列表值：

```
dropdownlist.Text 
```

但是，这只是返回第一个列表值。我怎样才能让它返回选定的下拉列表值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:41:51.900

该`dropdownlist.Text`属性应该工作。

确保您没有在 Page_Load 上再次绑定列表。这会将 SelectedValue 重置为第一个值。

使用类似的代码

```
if(!IsPostBack)
{
   //DataBind dropdownlist
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:33:23.040

改为使用[`DropDownList.SelectedValue`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedvalue.aspx)属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:42:28.453

下拉菜单只能返回一个值。对于列表，您需要自定义下拉列表，或者您需要找到第三方控件来执行此操作。

如果您想使用 3rd 方控件进行操作。你可以试试[这个](http://demos.devexpress.com/aspxeditorsdemos/ASPxDropDownEdit/CheckComboBox.aspx)

如果您想自定义下拉菜单，请查看这些
[1](http://aspnetachives.blogspot.com/2009/03/multiple-selection-dropdownlist-for.html) [2](http://www.codeproject.com/Articles/18063/Multi-select-Dropdown-list-in-ASP-NET)

# php - PHP：点击按钮下载文件？

> ID：15156711
> 
> 赞同：2
> 
> 时间：2013-03-01T11:32:46.100
> 
> 标签：php, download

我创建了一个表单，当单击包含的按钮时，应该打开一个下载对话框来下载某个文件。该文件放置在同一台服务器上。

我试过：

```
header("Content-Type: application/force-download");
header("Content-Disposition: attachment; filename=" . $file . '"'); 
```

其中 $file 是本地路径 + 文件名，例如 c:\mypath\myfile.xls。但这不起作用。它为我提供了一个文件，但它不是一个有效的文件。我还能怎么做？

注意：我写了 c:\ 因为它仍然在我的本地机器上进行测试。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:36:28.830

试试这个

```
header("Pragma: public", true);
header("Expires: 0"); // set expiration time
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Content-Type: application/force-download");
header("Content-Type: application/octet-stream");
header("Content-Type: application/download");
header("Content-Disposition: attachment; filename=".basename($file));
header("Content-Transfer-Encoding: binary");
header("Content-Length: ".filesize($file));
die(file_get_contents($file)); 
```

我认为 file_get_contents() 函数不再适用于 PHP 5.0.3

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:37:12.147

试试这个 ：

```
$path = "http://www.example.com/files/";
$filename = "abc.gif";

header("内容类型：图像/gif");
header("内容配置：附件；文件名=".$filename);
header("缓存控制：私有");
header('X-Sendfile: '.$path);
读取文件（$路径）；
出口;

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:34:04.203

PHP 在服务器端运行，您无法下载客户端机器中的文件。

将文件上传到服务器，然后提供下载路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T11:34:07.353

必须从站点根目录引用路径...移动文件 ex：脚本路径：C:/wamp/www/test.php 文件 C:/script.js 然后：

```
if(file_exists('../../user.js'))
{
    echo "OK";
} 
```

还是个坏主意。。

# java - Processing - Starting Function and Stopping function

> ID：15156713
> 
> 赞同：0
> 
> 时间：2013-03-01T11:32:52.693
> 
> 标签：java, processing

I have this processing app that contains 2 functions. 1st is called loadScreen. 2nd is called mainMenu. When the app initializes, it calls the function "loadScreen();". I set a timer inside this function so that after 5 seconds, it will jump to "mainMenu". The problem is that how do I stop my function and call another function? Is there a "break;" or "stop" function that I can use? Thanks!

```
void loading() {  //Code to load start screen 

if (millis() - time >= wait) {
time = millis();//also update the stored time
image(loadingImage, 0, 0);
}
if (time/1000 == 5) {
time=5000; // Stop here
startMenu();
}
}

void startMenu() {
//Code to load the real game
text("Start", 350, 300);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:09:05.440

您可以使用`FutureTask`但使用多个线程来做到这一点。说：

```
ExecutorService exec = Executors.newCachedThreadPool();
    FutureTask<Integer> task = new FutureTask<Integer>(new Callable<Integer>(){

        @Override
        public Integer call() throws Exception {
            image(loadingImage, 0, 0);
            return -1;
        }

    });
    Future<Integer> res = exec.submit(task);
    try {
        res.get(5000, TimeUnit.SECONDS);
    } catch (TimeoutException ex) {
    //waited 5 sec to execute hence coming out
    }
    loadMenu(); 
```

# powershell - 将 Hashtable 转换为 System.Version

> ID：15156718
> 
> 赞同：1
> 
> 时间：2013-03-01T11:33:05.500
> 
> 标签：powershell

在powershell中有一种方法可以将哈希表转换为System.Version，我得到的错误是无法将“System.Collections.Hashtable”类型的“System.Collections.Hashtable”值转换为“System.Version”类型。

在我的 foreach 循环中的示例，我向 dbDictionary 添加了两个变量，一个键和一个值

> $dbDictionary.Add($dbChangesfiles, $line)

然后，我想将该 dbDictionary 转换为 System.Version，以便可以针对已转换为 System.Version 的其他两个变量引用它。

> $dbDictionaryAsVersion = [System.Version]$dbDictionary

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:43:06.180

你不能通过直接演员来做到这一点。您需要具体并引用包含版本值的字典项：

```
PS> $dbDictionary = @{key1='1.2'; key2='3.4'}
PS> [System.Version]$dbDictionary['key1']

Major  Minor  Build  Revision
-----  -----  -----  --------
1      2      -1     -1 
```

如果版本包含所有键：

```
PS> [System.Version]($dbDictionary.Values -join '.')

Major  Minor  Build  Revision
-----  -----  -----  --------
1      2      3      4 
```

# blackberry - 如何在黑莓屏幕上设置图像边框

> ID：15156722
> 
> 赞同：0
> 
> 时间：2013-03-01T11:33:24.413
> 
> 标签：blackberry, java-me

我在 BB 屏幕上有一个列表项（一个图像和文本），我的要求是设置一个图像边框（以便在列表项上完成图像分离）以在 BB 屏幕上显示图像有人可以帮忙吗？

这是我的代码：

```
public void drawListRow(ListField list, Graphics g, int index, int y,
            int width) {
        String title = (String) listElements.elementAt(index);

        Bitmap image = (Bitmap) listImage.elementAt(index);

            int LEFT_OFFSET = 2;
            int TOP_OFFSET = 8;
            int xpos = LEFT_OFFSET;
            int ypos = TOP_OFFSET + y;
            int w = image.getWidth();
            int h = image.getHeight();      

            g.drawBitmap(xpos, ypos, w, h, image, 4, 6);

            xpos = w + 20;
            g.setFont(myFont);

            g.setColor(Color.BLACK);

            g.drawText(title, xpos, ypos);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T10:52:35.847

我希望我的问题是正确的，并建议您在图像周围画一个矩形，如下所示：

```
g.setColor(Color.RED);
g.drawRect(xpos - 1, ypos - 1, w + 1, h + 1); 
```

这将在您的图像周围绘制矩形而不重叠它。有关为什么需要对矩形的位置和大小进行这些调整的更多详细信息，您可以在此处查看 Graphics 类的文档[http://www.it.uc3m.es/florina/docencia/j2me/midp/docs/ api/javax/microedition/lcdui/Graphics.html](http://www.it.uc3m.es/florina/docencia/j2me/midp/docs/api/javax/microedition/lcdui/Graphics.html)

# design-patterns - why we implement interface to abstract class

> ID：15156723
> 
> 赞同：1
> 
> 时间：2013-03-01T11:33:28.710
> 
> 标签：design-patterns, interface, strategy-pattern

Pls find the link for reference: ["Strategy for success" article of JavaWorld](http://www.javaworld.com/javaworld/jw-04-2002/jw-0426-designpatterns.html?page=2)

My question is why do we need to have separate interface and implement it in abstract class, when we can declare those abstract methods in abstract class itself?

ex in image,

```
public interface Border(){
      paintBorder();
      getBorderInsets();
      isBorderOpaque();
 }

public class abstract AbstractBorder implements Border(){
 .....
} 
```

instead we can have abstract class like

```
public class abstract AbstractBorder {
      paintBorder();
      getBorderInsets();
      isBorderOpaque();
 } 
```

why we are using interface? what is the necessity?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T17:11:01.880

也许接口定义了可能存在于其他抽象类中的行为，除了你提到的那个。IDisposable 接口就是一个很好的例子。

如果您决定在抽象类本身中声明这些方法，那么当您从这个抽象类实现一个具体类时，您最终可能不得不处理很多混乱。此外，由于您可以在抽象类中指定行为，因此该行为可能会被实现类重用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:42:34.067

对接口而不是类进行编程是一种很好的实践。在策略模式中，想法是具有“策略”接口，并且在运行时您可以更改策略（实现接口的类）而无需更改大部分其余代码。

这是使您的代码更加灵活和强大的[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则的良好开端。

我[在我的 github](https://github.com/MayogaX/DesignPatternsForOtaku/blob/master/Strategy/Program.cs)中有一个策略模式的示例，并且对象“Cavaleiro”（英语中的骑士）在运行时发生了变化。

为此，我创建了一个接口并使用它而不是一个类的对象，通过它我可以轻松地改变“策略”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:36:52.643

这也是我在开始使用 Java 时也想过的事情。一个非常详细的答案可以在[这里](http://www.javaworld.com/javaqa/2001-04/03-qa-0420-abstract.html)找到。如果您需要任何进一步的说明，请发表评论。

# wpf - WPF DataGrid：使整个列无法选择

> ID：15156733
> 
> 赞同：0
> 
> 时间：2013-03-01T11:33:58.193
> 
> 标签：wpf, datagrid

我有一个包含几列的 DataGrid，其中一些不应该可供用户选择（因为它们无论如何都是只读的）。列本身没有属性，显然我需要通过 SelectedCellsChanged-Event 来处理这个问题。

我可以使用 IF 语句通过执行以下操作来确定单元格的相应列是否不可选择：

```
private void chartDataGrid_SelectedCellsChanged(object sender, SelectedCellsChangedEventArgs e)
{
    if (e.AddedCells[0].Column.Header.ToString() == "Non Selectable Column")
        {
            // What now?
        }
} 
```

但是，如何防止该集合中的单元格被选中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:44:43.010

好吧，我明白了。它可能不是完美的解决方案，但它对我来说完美无缺。即使有很多单元格，并且从包含应该可选择的单元格的多个列中选择单元格时。:)

```
private void chartDataGrid_SelectedCellsChanged(object sender, SelectedCellsChangedEventArgs e)
{
    foreach (DataGridCellInfo cell in e.AddedCells)
    {
        if (cell.Column.Header.ToString() == "NonSelectableColumn")
        {
            MyDataGrid.SelectedCells.Remove(cell);
        }
    }
} 
```

# iphone - 在 Tableview 上添加开关按钮并禁用单元格选择

> ID：15156735
> 
> 赞同：1
> 
> 时间：2013-03-01T11:34:02.240
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我在单元格上添加了切换按钮，但同时我希望我的单元格不应该在选择时突出显示或禁用选择。我确实禁用了用户交互属性，但现在我也无法更改单元格的位置。这是我在 Cell 上添加 Switch 按钮的操作。

```
UISwitch* switchFB = [[UISwitch alloc] initWithFrame:CGRectMake(227, 8, 79, 27)];
cell.textLabel.text=@"Facebook";
        cell.userInteractionEnabled=NO;
        cell.accessoryView = switchFB; 
```

现在单元格没有选择，但我也不能改变开关的位置。提前致谢。干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:38:07.253

```
cell.userInteractionEnabled=NO; 
```

不要使用它而不是使用以下：

```
cell.selectionStyle = UITableViewCellSelectionStyleNone; 
```

此行将帮助您切换到工作，但单元格不会被选中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T13:44:32.010

您可以通过像@Ann 所说的将单元格选择样式设置为 none 来禁用单元格选择。

```
cell.selectionStyle = UITableViewCellSelectionStyleNone;

UISwitch *switchView = [[UISwitch alloc] initWithFrame:CGRectZero];
cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
cell.accessoryView = switchView;
[switchView setOn:YES animated:NO];
[switchView addTarget:self action:@selector(switchChanged:) forControlEvents:UIControlEventValueChanged];

- (void) switchChanged:(id)sender {
    UISwitch* switchControl = sender;
    NSLog( @"The switch is %@", switchControl.on ? @"ON" : @"OFF" );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:39:55.657

```
UISwitch* switchFB = [[UISwitch alloc] initWithFrame:CGRectMake(227, 8, 79, 27)];
cell.textLabel.text=@"Facebook";

//cell.userInteractionEnabled=NO;

[cell.contentView addSubview: switchFB ];
cell.selectionStyle= UITableViewCellSelectionStyleNone; 
```

将 UISwitch 添加到`cell.contentView`

# php - Preg 用哈希替换单词

> ID：15156740
> 
> 赞同：0
> 
> 时间：2013-03-01T11:34:14.363
> 
> 标签：php, regex

我想删除所有`#`以字符串开头的用户名。我试过这个

```
preg_replace('/#/', '', 'blah blah blah #key blah blah'); 
```

但它只删除`#`.

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:36:32.187

`/#[^\b]+/`应该可以正常工作。

正则表达式的解释：

*   `#` *`#`一个字字*
*   `[^\b]+` *匹配任何内容，直到遇到单词边界*
    *   `^` *“不是”的意思*
    *   `\b` *是[单词边界](http://www.regular-expressions.info/wordboundaries.html)，将匹配任何非字母数字字符（或字符串结尾），因此支持“ `my string #username. Another string`”来匹配`#username`例如。`[^\s]+`不**支持**。（它将与期间相匹配）*
    *   `+` *意思是“重复一次或多次”*

在代码中：

```
preg_replace('/#[^\b]+/', '', 'blah blah blah #key blah blah'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T11:37:17.127

如果您的用户名不包含空格，那么这应该有效

```
preg_replace('/#[^\s]+/', '', 'blah blah blah #key blah blah'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T11:39:00.077

试试这个 ：

`echo preg_replace('/#\w+/', '', 'blah blah blah #key blah blah');`

输出 ：`blah blah blah blah blah`

# ruby-on-rails - 轨道上的奇怪行为；一段重写的活动记录/视图代码意外地需要更长的时间来运行而不是更少的时间

> ID：15156745
> 
> 赞同：0
> 
> 时间：2013-03-01T11:34:22.500
> 
> 标签：ruby-on-rails, ruby-on-rails-3, caching, activerecord, view

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T12:33:33.120

您可以使用 rails 默认机制在查询中包含关联。此外，您应该在迭代大型数据集时使用 find_each。它分批获取对象，从而保护内存：

```
@users = User.includes(:account)

<% @users.find_each do | user | %>
  <%= user.account.name %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:42:18.970

它需要一段时间，因为`@all_accounts = Account.where(:id => users.map{ | user | user.account_id } )`实际上并没有运行该查询。查询在实际需要时运行，即当您调用`detect`.

它正在`Account`为每个用户运行查询，这显然是一个比原始查询更重要的查询，因为它`Account`每次都会拉大量 s，因此等待时间很长。

解决方案显然是做其他人推荐和使用的事情`includes`，但是坚持`.all`你的 s 查询的末尾`Account`也可以通过让该查询在第一个实例中执行来工作。

# entity-framework - 使用 EntityFramework 和 WebAPI 部署 BreezeJS

> ID：15156749
> 
> 赞同：0
> 
> 时间：2013-03-01T11:34:27.330
> 
> 标签：entity-framework, breeze

我正在尝试使用 Breeze WebAPI 部署使用 Breezejs 和 EntityFramework 创建的应用程序。当我在我的开发环境中运行它时，它运行得很好，但是当我将它上传到我们的服务器时，我得到以下错误“错误：元数据查询失败：../api/Entity/Metadata; Not Found”打个电话。

在我的开发环境中，如果我转到“localhost:59510/api/Entity/Metadata”，我可以看到显示的 xml，但如果我转到“www.example.com/api/Entity/Metadata”，我会收到错误消息。

我在某处缺少 dll 吗？我在微风、web api 或 EntityFramework 中的配置是否有错误？

谢谢杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-12T03:06:40.527

听起来你错过了什么。检查部署机器上的事件查看器。也可能缺少微风控制器 dll

# java - 无法从连接表中删除行（多对多）

> ID：15156750
> 
> 赞同：1
> 
> 时间：2013-03-01T11:34:28.830
> 
> 标签：java, hibernate, jpa

我已经映射了两个类之间的双向关系。情况是这样的：我有旅行和用户。用户应该能够订阅旅行和取消订阅。所以我不想删除对象，只删除连接表中的行。目前，订阅部分有效，但不能取消订阅。

当我测试它时，更改是在内存中进行的，而不是在数据库中。有什么问题？我的代码如下所示。

旅行：

```
@ManyToMany(mappedBy = "enrolledExecutionMoments", cascade = {
        CascadeType.ALL, CascadeType.ALL }, fetch = FetchType.EAGER)
private List<User> tripExecutionMomentParticipators = new ArrayList<User>();

public TripExecutionMoment() {

}

public int getId() {
    return id;
}

public void setId(int id) {
    this.id = id;
}

@JsonIgnore
public List<User> getTripExecutionMomentParticipators() {
    return tripExecutionMomentParticipators;
}

public void setTripExecutionMomentParticipators(
        List<User> tripExecutionMomentParticipators) {
    this.tripExecutionMomentParticipators = tripExecutionMomentParticipators;
}

public void addEnrollement(User user) {
    tripExecutionMomentParticipators.add(user);
}

public void removeEnrollement(User user) {
    tripExecutionMomentParticipators.remove(user);
} 
```

用户：

```
@Entity
@Table(name = "t_user")
public class User {

    @Id
    @GeneratedValue
    private int id;

    @NotBlank(message = "err_invalid_mail")
    @Email(message = "err_invalid_mail")
    private String email;

    @ManyToMany(cascade = { CascadeType.ALL, CascadeType.ALL }, fetch = FetchType.EAGER)
    @JoinTable(joinColumns = { @JoinColumn(name = "userId") }, inverseJoinColumns = { @JoinColumn(name = "tripExecutionMomentId") })
    private List<TripExecutionMoment> enrolledExecutionMoments = new ArrayList<TripExecutionMoment>();

    public User() {
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public int getId() {
        return id;
    }

    @JsonIgnore
    public TripExecutionMoment getCheckedInTripExecutionMoment() {
        return checkedInTripExecutionMoment;
    }

    public void setCheckedInTripExecutionMoment(
            TripExecutionMoment checkedInTripExecutionMoment) {
        this.checkedInTripExecutionMoment = checkedInTripExecutionMoment;
    }

    public void addEnrollement(TripExecutionMoment tripExecutionMoment) {
        enrolledExecutionMoments.add(tripExecutionMoment);
    }

    public void removeEnrollement(TripExecutionMoment tripExecutionMoment) {
        enrolledExecutionMoments.remove(tripExecutionMoment);
    }
} 
```

这是我注册（订阅）和取消注册（取消订阅）的代码

```
@Transactional
public void enrollParticipator(User user,
        TripExecutionMoment tripExecutionMoment)
        throws AlreadyBoundException {
    if (tripExecutionMoment.getTripExecutionMomentParticipators().contains(
            user)) {
        throw new AlreadyBoundException(
                "This user is already enrolled for this trip");
    }
    tripExecutionMoment.addEnrollement(user);
    user.addEnrollement(tripExecutionMoment);

    getEntityManager().merge(tripExecutionMoment);
}

@Transactional
public void disenrollParticipator(User user,
        TripExecutionMoment tripExecutionMoment) {
    tripExecutionMoment.removeEnrollement(user);
    user.removeEnrollement(tripExecutionMoment);
    getEntityManager().merge(user);
} 
```

# php - Typo3 V6：如何创建内容元素容器？（没有电视）

> ID：15156751
> 
> 赞同：11
> 
> 时间：2013-03-01T11:34:28.927
> 
> 标签：php, mysql, typo3, fluid, extbase

对于一个项目，我使用的是 Typo3 v6.0。我正在寻找创建嵌套内容元素或内容元素容器。我希望能够在不使用特定模板的情况下创建内联两列布局。我希望在不使用 templavoila 的情况下做到这*一点*。

我尝试过的扩展是`gridelements`, `kb_nescefe`, `bs_fce`，`multicolumn`但这些都不起作用，因为它们与 Typo3 V6 不兼容。

我的目标是像附图一样的最终结果。其中内联两列内容可以省略、使用一次或多次使用，包含任何其他内容元素。

我在这里寻找最简单的解决方案。我宁愿*不必*`flux`在诸如此类的解决方案上投入大量学习时间（ [http://fedext.net/](http://fedext.net/) - 看起来很酷，但现在也太耗时了）

有任何想法吗？

![具有内联两列内容的示例布局](../Images/7e365502b02ce71432576bf7463586dd.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-12T19:40:20.860

我是 Fluid 扩展套件（flux、fluidcontent、fluidpages 等）的作者，当然希望帮助您了解如何使用 FluidContent 制作 FCE。它真的没有人们担心的那么先进。至少，它比上面的例子要紧凑得多。以下在 FluidContent 中实现了与您的示例相同的结果：

TypoScript（静态加载：css_styled_content、fluid_content）

```
plugin.tx_fed.fce.yourname {
    templateRootPath = fileadmin/Templates # if you don't want to use an extension (1)
    # partial and layout root paths not defined (2)
} 
```

关于（1）你真的，真的应该。使用扩展将您的用户上传的媒体等与您的网站内容分开。如果您这样做，只需使用 EXT:... 私有资源文件夹的路径。并且关于 (2)，这些路径仅在您真正希望使用部分路径时才是必需的。

然后，模板文件本身（在TS中添加文件所在路径时自动检测）：

```
{namespace flux=Tx_Flux_ViewHelpers}
<f:layout name="Content" />
<f:section name="Configuration">
    <flux:flexform id="columns" label="Columns" icon="path/to/iconfile.jpg">
        <flux:flexform.grid>
            <flux:flexform.grid.row>
                <flux:flexform.grid.column>
                    <flux:flexform.content name="left" label="Left content" />
                </flux:flexform.grid.column>
                <flux:flexform.grid.column>
                    <flux:flexform.content name="right" label="Right content" />
                </flux:flexform.grid.column>
            </flux:flexform.grid.row>
        </flux:flexform.grid>
    </flux:flexform>
</f:section>
<f:section name="Preview">
    <flux:widget.grid />
</f:section>
<f:section name="Main">
    <div class="row">
        <div class="span6">
            <flux:flexform.renderContent area="left" />
        </div>
        <div class="span6">
            <flux:flexform.renderContent area="right" />
        </div>
    </div>
</f:section> 
```

如您所见，您可以完全自由地添加任何您想要的 HTML，使用任何 ViewHelpers（如果这是您的事情，甚至可以渲染 TS 对象）。要添加其他内容元素，只需添加新的模板文件 - 它们将被自动识别。

但它的工作方式与 IRRE 不同（您也可以**使用**Flux 字段来实现 - 如果您希望看到演示，请告诉我）：它会让您使用 TYPO3 中的原生拖放来放置您的孩子将内容元素放入实际的内容容器中 - 就像您过去对电视所做的那样。

因此，Fluid Content 可能是您最接近电视的地方。

关于 Flux 是矫枉过正，我想告诉你它的实际表现：

*   缓存读取 TS 以了解路径
*   检测到的模板的缓存列表
*   Fluid 缓存到原生 PHP，Flux 只使用 Fluid 来存储配置（这意味着它一直是原生 PHP）
*   Flux 本身确实注册了一个钩子订阅者，它对保存的内容做出反应，这确实减慢了后端（不明显）
*   Flux 本身不会在 FE 上创建负载，但有一个例外：在未缓存的插件中（FluidContent 被缓存！）Flux 可能会调用本机 PHP 缓存代码来读取配置。
*   FluidContent 由一个极其简单的控制器组成；输出被完全缓存。
*   您可能想要添加 VHS ViewHelper 集合 - 它本身创建绝对零负载：它仅使用您使用其 ViewHelper 的资源。它包含一堆 ViewHelpers，我相信您会发现它很有用。

乍一看可能会让人不知所措，但我向您保证，与 pibase、FlexForm XML、TS 或原生 Extbase 插件相比，需要了解和记住的内容更少。如果您想要更多的安全网，我强烈建议您在编辑器中使用 XSD 模式 - 这可以让您自动完成特殊`<flux:....>`标签和其他标签。

但是：这需要您了解一点 Fluid 的逻辑：什么是 Layouts 和 Partials（您很可能希望在某些时候使用它们）以及如何使用特殊标签和引用变量（这将在其他用例——但不是手头的那个；它只需要简单的 ViewHelper 标签）。

我希望这有帮助。而且我已经减少了你对 Flux 过度杀伤和学习太多的恐惧；）

干杯，
克劳斯。无名编码者

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-07T14:12:20.370

有一个[startnext 项目](http://www.startnext.de/typo3-grid-elements-2-0/blog/)，其中已修复 grid_elements 中的已知错误。Afaik 下一步是让 grid_elements 与 TYPO3 6 兼容。但我想，在发布之前需要几周时间。但是，也许他们将从版本 2 开始（这些天将与 TYPO3 6 兼容......）。

看看[forge 项目](https://svn.typo3.org/TYPO3v4/CoreProjects/gridelements)。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-03-03T20:04:15.200

您可能想看看扩展 DCE ( [http://typo3.org/extensions/repository/view/dce](http://typo3.org/extensions/repository/view/dce) )；在那里你可以自己定义内容元素。[或者，您可以使用http://fedext.net/](http://fedext.net/)框架创建任何内容。只需阅读最新的博客文章，了解如何使用这些扩展创建动态内容元素。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-03-11T09:27:26.733

好吧，我有半解决方案。我已经使用[WEC 内容元素插件](http://typo3.org/extensions/repository/view/wec_contentelements)来管理自定义内容元素。

然后我使用了以下flexform：

```
<T3DataStructure>
    <ROOT>
        <type>array</type>
        <el>
            <leftColumn>
                <TCEforms type="array">
                    <label>Left column</label>
                    <config>
                        <type>inline</type>
                        <foreign_table>tt_content</foreign_table>
                        <maxitems>100</maxitems>
                        <appearance>
                            <showSynchronizationLink>0</showSynchronizationLink>
                            <showAllLocalizationLink>0</showAllLocalizationLink>
                            <showPossibleLocalizationRecords>0</showPossibleLocalizationRecords>
                            <showRemovedLocalizationRecords>0</showRemovedLocalizationRecords>
                            <expandSingle>1</expandSingle>
                        </appearance>
                    </config>
                </TCEforms>
            </leftColumn>
            <rightColumn>
                <TCEforms type="array">
                    <label>Right column</label>
                    <config>
                        <type>inline</type>
                        <foreign_table>tt_content</foreign_table>
                        <maxitems>100</maxitems>
                        <appearance>
                            <showSynchronizationLink>0</showSynchronizationLink>
                            <showAllLocalizationLink>0</showAllLocalizationLink>
                            <showPossibleLocalizationRecords>0</showPossibleLocalizationRecords>
                            <showRemovedLocalizationRecords>0</showRemovedLocalizationRecords>
                            <expandSingle>1</expandSingle>
                        </appearance>
                    </config>
                </TCEforms>
            </rightColumn>
        </el>
    </ROOT>
</T3DataStructure> 
```

以及以下前端排版设置：

```
tt_content.twoColumnContainer = COA
tt_content.twoColumnContainer {
  10 = < lib.stdheader

  20 = COA
  20 {
    wrap = <div class="twocolumn-container"> | </div>

    10 = RECORDS
    10 {
        tables       = tt_content
        dontCheckPid = true
        source.data  = t3datastructure : pi_flexform->leftColumn
        wrap         = <div class="twocolumn-left"> | </div>
    }

    20 = RECORDS
    20 {
        tables       = tt_content
        dontCheckPid = true
        source.data  = t3datastructure : pi_flexform->rightColumn
        wrap         = <div class="twocolumn-right"> | </div>
    }
} 
```

这导致使用[IRRE](http://docs.typo3.org/typo3cms/TCAReference/Reference/Columns/Inline/Index.html)编辑器添加/编辑内容元素的后端内容元素。容器元素虽然没有预览，但两列位于彼此下方（而不是彼此相邻）。所有这一切都是我在谷歌搜索和尝试各种方法/插件后发现的唯一可行的解​​决方案。

希望这可以帮助某人。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-01T13:43:24.803

我会...

1.  `tt_content`使用 2 个新字段（每列一个）扩展表。您可以在 phpMyAdmin 中手动执行此操作，但是在进行数据库比较或其他操作时，您可能会冒着在安装工具中意外删除这些字段的风险。所以最好为此创建一个非常简单的扩展 - 它实际上只有 2 个文件：描述扩展的**ext_emconf.php**和用于定义新字段的**ext_tables.sql 。**

2.  在**typo3conf/extTables.php**中定义一个新的内容元素类型（= 容器）和2 个新字段（一个用于左列，一个用于右列）每个都是**[IRRE](http://docs.typo3.org/typo3cms/TCAReference/Reference/Columns/Inline/Index.html)**类型。

3.  `TCAdefaults.tt_content.pid = xxx`在根页面的**TypoScript 配置**中设置，以便左/右列元素不存储在页面本身上，而是存储在某些 sysfolder 中。

4.  在模板设置中定义新的内容元素，以便按照您的需要呈现。

### 更新

示例 IRRE 字段：

```
'user_2col_left' => array(
    'exclude' => 1,
    'label' => 'Left column',
    'config' => array(
        'type' => 'inline',
        'foreign_table' => 'tt_content',
        'maxitems' => '10',
        'appearance' => array(
            'collapseAll' => '1',
            'expandSingle' => '1',
            'newRecordLinkPosition' => 'bottom',
            'showAllLocalizationLink' => '1',
            'showPossibleLocalizationRecords' => '1',
            'showSynchronizationLink' => '1',
            'useSortable' => '1',
            'enabledControls' => array(
                'hide' => '0',
            ),
        ),
        'behaviour' => array(
            'disableMovingChildrenWithParent' => '1',
            'localizeChildrenAtParentLocalization' => '1',
        ),
    )
), 
```

新内容类型示例：

```
t3lib_div::loadTCA('tt_content');
$TCA['tt_content']['columns']['CType']['config']['items'][] = array(
    0 => '2 columns',
    1 => 'user_2cols',
    2 => '../fileadmin/user_2cols.gif',
);
t3lib_SpriteManager::addTcaTypeIcon('tt_content', 'user_2cols', '../fileadmin/user_2cols.gif');
$TCA['tt_content']['types']['user_2cols']['showitem'] = 'CType,header,--div--;LLL:EXT:cms/locallang_ttc.xml:tabs.access,--palette--;LLL:EXT:cms/locallang_ttc.xml:palette.visibility;visibility,--palette--;LLL:EXT:cms/locallang_ttc.xml:palette.access;access,--div--;LLL:EXT:cms/locallang_ttc.xml:tabs.appearance,--palette--;LLL:EXT:cms/locallang_ttc.xml:palette.frames;frames,--palette--;LLL:EXT:cms/locallang_ttc.xml:palette.textlayout;textlayout,--div--;LLL:EXT:cms/locallang_ttc.xml:tabs.extended'; 
```

### 笔记

*   对于您的特定情况，这是一个简单（而且有点粗略）的解决方案。更好的解决方案将考虑动态设置容器中列数的可能性。

*   使用左/右列元素会有一些限制 - 您将无法轻松移动它们或在各种容器之间复制它们。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-12T16:32:54.083

这是关于如何在不使用 TemplaVoila 的情况下制作 FCE 的会议演示视频。不幸的是只有德语，但也许有帮助。

[http://vimeo.com/29213790](http://vimeo.com/29213790)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-17T08:10:51.147

我建议您尝试“多列”插件。它不像其他实现那样具有依赖关系（我已经尝试过几乎所有的 FCE 替代品）并且它具有嵌套功能.. 总体而言，它与 TYPO3 配合得很好。最近它已被移植到 TYPO3 v6。我在很多网站上使用它，我很满意。（有一些错误，比如显示错误的“丢失的元素”，但在伪造页面上有一个修复）

这是 TER 文档的链接：http: [//typo3.org/extension-manuals/multicolumn/2.1.14/view/](http://typo3.org/extension-manuals/multicolumn/2.1.14/view/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-02-10T16:50:42.497

尝试使用流体动力 TYPO3。使用新的预配置分发“站点”

```
http://typo3.org/extensions/repository/view/site 
```

Claus Due 的截屏视频

```
http://vimeo.com/110469200 
```

不要忘记添加typo3conf/AdditionalConfiguration.php [如何安装？](https://github.com/FluidTYPO3/fluidcontent_core)

# jboss7.x - 无法使用 RestEasy、Spring、JBoss AS 7.1.1 连接招摇

> ID：15156752
> 
> 赞同：0
> 
> 时间：2013-03-01T11:34:31.233
> 
> 标签：jboss7.x, resteasy, spring-3, swagger

我正在使用 JBoss AS 7.1.1、RestEasy 2.3.5.Final、Swagger 1.2.0、Spring 3.1.1

这是我的 web.xml，

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:/META-INF/spring/application-context.xml</param-value>
    </context-param>

    <servlet>
        <servlet-name>Bootstrap</servlet-name>
        <servlet-class>com.js.api.Bootstrap</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet>
        <servlet-name>springServlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/spring/servlet-context.xml</param-value>
        </init-param>
        <init-param>
            <param-name>swagger.config.reader</param-name>
            <param-value>com.js.api.RestEasyConfigReader</param-value>
        </init-param>
        <init-param>
            <param-name>swagger.api.basepath</param-name>
            <param-value>http://localhost:8080/js</param-value>
        </init-param>
        <init-param>
            <param-name>api.version</param-name>
            <param-value>1.0</param-value>
        </init-param>
        <load-on-startup>2</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>springServlet</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>
</web-app> 
```

spring application-context & servlet-context.xml 很好，我的 REST 服务已连接并正常工作。但只有招摇是行不通的。这是 ApiListingResource，

```
package com.js.resource;

import javax.ws.rs.Path;
import javax.ws.rs.Produces;

import org.springframework.stereotype.Controller;

import com.wordnik.swagger.annotations.Api;
import com.wordnik.swagger.jaxrs.listing.ApiListing;

@Path("/api-docs")
@Api("/api-docs")
@Produces({ "application/json" })
@Controller
public class ApiListingResource extends ApiListing {
} 
```

我检查了 @Context 注入在 RestEasy 2.3.5 中不起作用。无论如何创建了一个自定义配置阅读器，

```
import javax.servlet.ServletConfig;
import com.wordnik.swagger.jaxrs.ConfigReader;

public class RestEasyConfigReader extends ConfigReader {

  private ServletConfig config;

  public RestEasyConfigReader(ServletConfig config){
    this.config =  config;
  }

  @Override
  public String basePath() {
    return getParameterOrDefault("swagger.api.basepath", "http://localhost:8080/js");
  }

  @Override
  public String swaggerVersion() {
    return "1.2";
  }

  @Override
  public String apiVersion() {
    return "1.0";
  }

  @Override
  public String modelPackages() {
    return "com.js.model";
  }

  @Override
  public String apiFilterClassName() {
    return null;
  }

  private String getParameterOrDefault(String key, String defaultValue){
    if ((config != null) && (config.getInitParameter(key) !=null ))
      return config.getInitParameter(key);

    return defaultValue;
  }
} 
```

当我尝试访问时，我总是收到 NPE 错误`http://localhost:8080/js/api-docs`

```
java.lang.NullPointerException
    com.wordnik.swagger.jaxrs.ConfigReaderFactory$.getConfigReader(Help.scala:88)
    com.wordnik.swagger.jaxrs.listing.ApiListing.resourceListing(ApiListing.scala:64)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:155)
    org.jboss.resteasy.core.ResourceMethod.invokeOnTarget(ResourceMethod.java:257)
    org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:222)
    org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:211)
    org.jboss.resteasy.springmvc.ResteasyHandlerAdapter.createModelAndView(ResteasyHandlerAdapter.java:87)
    org.jboss.resteasy.springmvc.ResteasyHandlerAdapter.handle(ResteasyHandlerAdapter.java:74)
    org.jboss.resteasy.springmvc.ResteasyHandlerAdapter.handle(ResteasyHandlerAdapter.java:24)
    org.jboss.resteasy.springmvc.ResteasyWebHandlerTemplate.handle(ResteasyWebHandlerTemplate.java:39)
    org.jboss.resteasy.springmvc.ResteasyHandlerAdapter.handle(ResteasyHandlerAdapter.java:45)
    org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:778)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:734)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:847) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T06:54:48.727

不仅@Context 注入有效。Swagger 依赖 Application & ServletConfig，Spring 没有在方法参数中注入。

我决定最好编写代码来解决这个问题。

1.  配置由 Spring bean 读取。它可以在spring xml中配置。
2.  编写 REST 资源以公开文档。
3.  REST 类是通过扫描所有类找到的。使用了[如何从类路径中的 Java 包中读取所有类的解决方案？](https://stackoverflow.com/questions/1456930/how-do-i-read-all-classes-from-a-java-package-in-the-classpath).
4.  类的 API 文档是通过调用 Swagger-Jaxrs 代码形成的

    JaxrsApiReader.read(clazz, apiVersion, swaggerVersion, basePath, apiPath)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-03T14:24:52.657

我能够连接 swagger 1.3.0、resteasy、spring 3.x 和 jboss-as-7。

你可以在spring.xml中配置swagger相关的bean，如下：

```
 <!-- Swagger providers -->
   <bean id="apiDeclarationProvider" class="com.wordnik.swagger.jaxrs.listing.ApiDeclarationProvider" />
   <bean id="resourceListingProvider" class="com.wordnik.swagger.jaxrs.listing.ResourceListingProvider" />

<!-- Swagger API listing resource -->
   <bean id="swaggerResourceJSON" class="com.wordnik.swagger.jaxrs.listing.ApiListingResourceJSON" />

<!-- this scans the classes for resources -->
   <bean id="swaggerConfig" class="com.wordnik.swagger.jaxrs.config.BeanConfig">
     <property name="resourcePackage" value="package.name"/>
     <property name="version" value="1.0.0"/>
     <property name="basePath" value="http://localhost:8081/resteasy-spring"/>
     <property name="title" value="Petstore sample app"/>
     <property name="description" value="This is a app."/>
     <property name="contact" value="apiteam@wordnik.com"/>
     <property name="license" value="Apache 2.0 License"/>
     <property name="licenseUrl" value="http://www.apache.org/licenses/LICENSE-2.0.html"/>
     <property name="scan" value="true"/>
   </bean> 
```

然后您可以在 web.xml 中将 swagger 配置为：

```
<servlet>
     <servlet-name>DefaultJaxrsConfig</servlet-name>
     <servlet-class>com.wordnik.swagger.jaxrs.config.DefaultJaxrsConfig</servlet-class>
     <init-param>
         <param-name>api.version</param-name>
         <param-value>1.0.0</param-value>
     </init-param>
     <load-on-startup>2</load-on-startup>
</servlet> 
```

欲了解更多详情：请访问[此处](http://riteshkrmodi.blogspot.in/2014/01/documenting-rest-api-with-swagger-in.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-25T18:19:05.413

最近，我们将 Spring 应用程序从 tomcat 转移到了 wildfly（JBoos 8）。在那之后，招摇并没有奏效。以前，我们在 web.xml 中提到了everytinh，它在 tomcat 7 上运行良好。更改为 wildfly 后，我们做了以下更改：

我们从 web.xml 中删除了以下内容：

```
<servlet>
        <servlet-name>DefaultJaxrsConfig</servlet-name>
        <servlet-class>com.wordnik.swagger.jaxrs.config.DefaultJaxrsConfig</servlet-class>
        <init-param>
            <param-name>api.version</param-name>
            <param-value>1.0.0</param-value>
        </init-param>
        <init-param>
            <param-name>swagger.api.basepath</param-name>
            <param-value>http://localhost:8080/rest/api</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
</servlet> 
```

在 spring-context.xml 中添加以下内容：

```
<!-- Swagger providers -->
    <bean id="apiDeclarationProvider"
        class="com.wordnik.swagger.jaxrs.listing.ApiDeclarationProvider" scope="singleton" />
    <bean id="resourceListingProvider"
        class="com.wordnik.swagger.jaxrs.listing.ResourceListingProvider"  scope="singleton"/>

    <!-- Swagger API listing resource -->
    <bean id="swaggerResourceJSON"
        class="com.wordnik.swagger.jaxrs.listing.ApiListingResourceJSON" />

<!-- this scans the classes for resources -->
    <bean id="swaggerConfig" class="com.wordnik.swagger.jaxrs.config.BeanConfig">
        <property name="resourcePackage" value="com.rest" />
        <property name="version" value="1.0.0" />
        <property name="basePath" value="https://localhost:9880/rest/api" />
        <property name="title" value="REST API" />
        <property name="scan" value="true" />
    </bean> 
```

**注意：**您需要定义 scope=singleton 否则 wildfly 会抛出异常。

现在，重新启动您的服务器，并加载您的 URL。它应该工作。

# mysql - 安装插件 'rpl_semi_sync_master' SONAME 'semisync_master.so' 不工作

> ID：15156753
> 
> 赞同：0
> 
> 时间：2013-03-01T11:34:32.790
> 
> 标签：mysql

我正在尝试在我的 mysql 5.5 中安装半同步复制并尝试执行以下命令：

安装插件 'rpl_semi_sync_master' SONAME 'semisync_master.so'

但此命令引发以下错误：

错误代码：1064。您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''rpl_semi_sync_master' SONAME 'semisync_master.so'' 附近使用正确的语法

请帮助解决这个问题。我们使用的是 Win7 Professional SP1 32 位操作系统。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T14:13:25.170

根据[http://dev.mysql.com/doc/refman/5.1/en/install-plugin.html](http://dev.mysql.com/doc/refman/5.1/en/install-plugin.html)正确的语法是插件名称周围没有撇号：

```
 INSTALL PLUGIN rpl_semi_sync_master SONAME 'semisync_master.so' 
```

# javascript - JavaScript-我如何使用“mousedown”来“选择”画布上的图像

> ID：15156754
> 
> 赞同：0
> 
> 时间：2013-03-01T11:34:38.673
> 
> 标签：javascript, html5-canvas, mousedown

我有以下 JavaScript`mousedown`函数，我用它来检测何时对我在 HTML5 画布上显示的图像之一执行了“mousedown”：

```
_mousedown: function(evt) {
    this._setUserPosition(evt);
    var obj = this.getIntersection(this.getUserPosition());
    if(obj && obj.shape) {
        var shape = obj.shape;
        this.clickStart = true;
        shape._handleEvent('mousedown', evt);
        displayTip(obj.shape.index);

        console.log(obj);
    } 
```

如您所见，每当在画布上绘制对象的部分执行“mousedown”时，此函数都会调用函数`displayTip`。

该`displayTip`函数当前如下所示：

```
function displayTip(index){
    document.getElementById('tipsParagraph').innerHTML = tips[index];
    console.log("displayTip being called");
    console.log("canvasImage id = " + canvasImage.id);
} 
```

现在，该`mousedown`函数部分正常工作，因为当它调用时`displayTip`，该函数会将段落的内容更新`tipsParagraph`为存储在`tips`数组中位置的任何内容。`index`但是，如您所见，在`displayTip`函数的末尾，我有线

```
`console.log("canvasImage id = " + canvasImage.id); 
```

在`mousedown`函数的最后，我有一行

```
console.log(obj); 
```

我的理解是，在画布上单击时检测到的任何对象都将存储在变量`obj`中，由行确定

```
var obj = this.getIntersection(this.getUserPosition()); 
```

但是在控制台中，我的`displayTip()`函数末尾的日志`canvasImage.id`未定义，而我的`mousedown`函数末尾的日志记录了变量的值`obj`是`[object Object]`

我不确定为什么 my`canvasImage.id`未定义...它应该显示`mousedown`已检测到的图像的 ID 属性...任何想法为什么这没有发生？

据推测，控制台日志`value of variable obj:[object Object]`意味着 mousedown 已经在 mousedown 的位置“获取”了图像 - 所以它应该显示该对象的 id 不是吗？

**编辑 01/03/2013 @ 14:35**

画布图像的代码如下：

它首先被定义为文件开头的全局变量，以及我的所有其他全局变量，使用以下行：

```
var canvasImage; 
```

下一个用途是在我的“drawImage()”函数中，我使用它如下：

```
var canvasImage = new Kinetic.Image({
      image: imageObj,
      width: 50,
      height: 50,
      // puts the image in teh middle of the canvas
      x: randomPosition(0, 950),  //imageX,    //stage.getWidth() / 2 - 50 / 2,
      y: randomPosition(30, 350),  //imageY,    //stage.getHeight() / 2 - 50 / 2,
      draggable: true
    }); 
```

我不确定这是否是正确的做法，但我想做的是使用该`mousedown`函数“获取”调用 mousedown 函数的任何图像，并将该特定图像临时存储在变量中，以及它的所有属性（id、width、height、x、y），以便我可以访问这些属性以供其他代码位使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:23:29.127

“canvasImage”没有定义，没错！在函数中，你永远不会声明这个对象。而对于“obj”对象，你应该尽量给我们内容……因为那样的话，很难理解这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:10:45.753

**这是在鼠标事件期间访问图像属性的方法**

只需订阅您感兴趣的鼠标事件并提供一个函数来调用该事件。

函数中的“this”对象是 Kinetic.Image 对象，您可以调用 getXXX() 来检索您感兴趣的任何属性。

```
 myImage.on('mouseup', function() {
          var att="Id: "+this.getId();
          att+=", width:"+this.getWidth();
          att+=", height:"+this.getHeight();
          att+=", x:"+this.getX();
          att+=", y:"+this.getY();
          att+=", image:"+this.getImage();
          alert(att);
          console.log(att);
        }); 
```

这是代码和小提琴：http: [//jsfiddle.net/m1erickson/2Qt97/](http://jsfiddle.net/m1erickson/2Qt97/)

身体{边距：0px；填充：0px；}

```
 function initStage(images) {

    var stage = new Kinetic.Stage({
      container: 'container',
      width: 300,
      height: 300
    });

    var layer = new Kinetic.Layer();

    var img=new Image();
    var coffee;
    img.onload=function(){
        coffee=new Kinetic.Image({
            x:125,
            y:100,
            name:"Yum!",
            id:"coffeePic",
            image:img
        });
        layer.add(coffee);
        stage.add(layer);

        coffee.on('mouseup', function() {
          var att="Id: "+this.getId();
          att+=", width:"+this.getWidth();
          att+=", height:"+this.getHeight();
          att+=", x:"+this.getX();
          att+=", y:"+this.getY();
          att+=", image:"+this.getImage();
          alert(att);
          console.log(att);
        });

    }
    img.src="http://dl.dropbox.com/u/139992952/coffee.png";

  }
  initStage();

</script> 
```

# metadata - 为什么没有将 Tridion 页面模板系统元数据发布到代理数据库？

> ID：15156755
> 
> 赞同：3
> 
> 时间：2013-03-01T11:34:40.720
> 
> 标签：metadata, tridion, tridion-2011, tridion-content-delivery

我们正在使用 Tridion 2011 SP1 HR1 和新 UI。

我们希望使用基于 Java 内容交付 API 的 Java 框架生成新的 UI JSON 标签：Tridion 交付框架 (TDF)。

页面的 JSON 标记应包含 PageTemplateModified 参数。

```
<!-- Page Settings: {"PageID":"tcm:48-84852-64",
    "PageModified":"2013-02-28T15:04:30",
    "PageTemplateID":"tcm:48-24343-128",
    "PageTemplateModified":"2013-02-27T17:11:31"} 
 --> 
```

但是当 Tridion 页面或 Tridion 页面模板发布到代理数据库时，发送给部署者的 zip 不包含有关页面模板的任何信息。在代理数据库中，ITEMS 表不包含页面模板的任何行。

在代理数据库上使用以下 SQL 查询很容易验证：

```
select * from items where item_type = 128 
```

有没有原因，为什么？

[编辑]

我说的是系统元数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:15:46.970

这是非常主观的，不适合 Stack Overflow 考虑在[https://tridion.stackexchange.com/grant-beta-access?key=63880f9cbf452c62f726770209533893询问](https://tridion.stackexchange.com/grant-beta-access?key=63880f9cbf452c62f726770209533893)

我认为您能够将 PT 的修改日期添加到呈现的页面输出中的唯一方法是在发布时将数据添加到您的页面（或页面元数据）。

回答为什么？你的 Q 的一部分，可能没有人想到它的原因，所以它从来没有这样设计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T08:36:01.250

本来想在Chris的回答下回复帖子的，结果太长了……

XPM JSON 中的上次修改日期设置不能是*真正的*上次修改日期，我将解释原因。

当您加载 Experience Manager 时，它会快速遍历 JSON 中的各种“LastModified”设置，以与 CM 中存储的内容进行比较，并确定您的页面是否是最新的。如果您在去年 12 月发布了此页面，然后在1月份修改了模板，日期应该不匹配——XPM会让编辑知道“这个页面不是最新的，点击这里重新加载”。

*如果您现在“即时*”将上次修改日期更改为模板的实际上次修改日期，而不是*发布此页面时*模板的上次修改日期，那么 XPM 将不会检测到有对 CM 和编辑器上的模板进行的更改可能会产生意想不到的结果，例如更改字段的值，重新加载，突然他们的侧边栏在左侧而不是在右侧。

希望这可以帮助

# html - 如何垂直居中并在页面上放置 h1？

> ID：15156756
> 
> 赞同：1
> 
> 时间：2013-03-01T11:34:43.327
> 
> 标签：html, css

我目前这样做：

html:

```
 <div id="narrate">
    <h1>Imagine everything.</h1>
    <span class="preloading">
        <i class="icon-spinner icon-spin icon-2x"></i>
    </span>
</div> 
```

CSS

```
#narrate {
    margin:0 ;
    padding: 0;
    text-align: center;
    position: absolute;
    top: 50%;
    left: 50%;
    height: 300px;
    width: 500px;
    margin-top: -50px;
    margin-left: -200px;
    height: 20px;
}

h1 {
    font-size: 3em;
    font-family: 'Source Sans Pro', sans-serif !important;
    font-weight: 700;
}

.preloading {
    height: 20px;
    visibility: hidden;
    text-align: center;
} 
```

我希望 h1 和微调器图标都位于页面中心，微调器图标位于 h1 下方。

上面的代码并没有真正居中，有一些像素输出位置。

我努力了：

```
#narrate {
    margin:0 ;
    padding: 0;
    text-align: center;
    position: absolute;
    top: 50%;
    left: 50%;
    height: 300px;
    width: 500px;
    margin-top: -150px;
    margin-left: -250px;
    height: 20px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:37:39.107

尝试`display:table-cell`

```
#narrate {
    margin:0 ;
    padding: 0;
    text-align: center;
      display:table-cell;
    vertical-align:middle; background:grey;
    height: 300px;
    width: 500px;
} 
```

**[演示](http://jsfiddle.net/X9LfB/1/)**

* * *

尝试这个

```
html, body{
    height:100%;
    margin:0;
    padding:0
}
#narrate {
     background:grey;
    height: 100%;
    width: 100%;
   position:relative;
    vertical-align:middle; 
   display:table;
}

h1 {
    font-size: 3em;
    font-family: 'Source Sans Pro', sans-serif !important;
    font-weight: 700; display:table-cell; 
    vertical-align:middle; 
    text-align:center;
}
span{
    display:block;
    font-size:12px
} 
```

**[演示 2](http://jsfiddle.net/X9LfB/7/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:46:18.557

如果您正在寻找以 div 为中心的 hor 和 vert 的定位，请使用 margin:auto

```
#narrate {
    width: 380px;
    height: 280px;
    margin: 70px auto;
    background: #ccc;
    text-align: center;
} 
```

**演示** [http://jsfiddle.net/X9LfB/6/](http://jsfiddle.net/X9LfB/6/)

**编辑：**

垂直居中将要求您将身体限制为 500 像素，然后将 margin-top 设置为垂直居中。

# python - Flask Gunicorn 应用程序无法让 __name__ 等于 '__main__'

> ID：15156758
> 
> 赞同：10
> 
> 时间：2013-03-01T11:34:55.023
> 
> 标签：python, nginx, flask, gunicorn

我有这个`/home/myname/myapp/app.py`：

```
from flask import Flask

app = Flask(__name__)

print __name__

@app.route('/')
def index():
    return "Hello world!"

if __name__ == '__main__':
    print 'in if'
    app.run() 
```

当我运行时：

```
$ gunicorn app:app -b 127.0.0.2:8000 
```

它说：

```
2013-03-01 11:26:56 [21907] [INFO] Starting gunicorn 0.17.2
2013-03-01 11:26:56 [21907] [INFO] Listening at: http://127.0.0.2:8000 (21907)
2013-03-01 11:26:56 [21907] [INFO] Using worker: sync
2013-03-01 11:26:56 [21912] [INFO] Booting worker with pid: 21912
app 
```

所以`__name__`应用程序是`app`. 不像`__main__`我需要它来运行 if 语句。 我试着在目录中
放一个空的。`__init__.py`这是我的`nginx sites-enabled default`：

```
server {
        #listen   80; ## listen for ipv4; this line is default and implied
        #listen   [::]:80 default_server ipv6only=on; ## listen for ipv6

        root /home/myname/myapp;

        # Make site accessible from http://localhost/
        server_name localhost;

        location / {
                proxy_pass http://127.0.0.2:8000;
        }
} 
```

# 编辑

...虽然这个应用程序在我访问该网站时**会**打印出来。`'Hello world'`关键是我需要`__name__`equal `'__main__'`。我也只是想知道为什么它没有以及如何使它相等`__main__`。

# 编辑 2

......我只是顿悟了，我不需要跑步`app.run()`，因为这就是 Gunicorn 的目的。呃。但我仍然想弄清楚为什么`__name__`不是`'__main__'`

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-02T15:29:09.743

Python 设置为何`__name__`时`"__main__"`脚本是 Python 解释器的入口点。由于 Gunicorn 导入它正在运行的脚本，因此*该*脚本将不是入口点，因此不会`__name__`设置为`"__main__"`.

# extjs4 - 在网格中添加记录的单元格值并在 extjs 中记录的最后一个单元格中获取结果

> ID：15156761
> 
> 赞同：0
> 
> 时间：2013-03-01T11:35:09.643
> 
> 标签：extjs4, sum, extjs-mvc

这里我的网格名称是“rightpanel”。我正在尝试添加在记录的每个单元格中输入的值，并在记录的最后一个单元格/列中显示总数。但是我在计算登录的总工作量时遇到了问题，如下所示。他们还有其他方法可以实现这一目标吗？
在这里，我在我的单元格中插入时间（例如 --> 2.03）。感谢和问候

```
 var selectionModel = new Ext.selection.CheckboxModel();
    var fm=Ext.form;
    var currentRecord;
    var oldValue;//used to store old effort while re-editing the already entered cell
    Ext.define('AM.view.rightpanel' ,{
        extend:'Ext.grid.Panel',
        alias : 'widget.rightpanel',
        selModel : selectionModel,
        store : 'addtaskstore',             
        id : 'rightpanel', 
        columnLines : true,
        width:724,
        selType: 'cellmodel',            
        plugins: [
            Ext.create('Ext.grid.plugin.CellEditing', {
                clicksToEdit: 1,                  
                pluginId:'rightPanelEditor'
            })
        ], 
```

此侦听器用于侦听单击每个单元格并捕获该单元格中的旧值以支持我的逻辑

```
 listeners:{
            cellclick:function(thisObj, td, cellIndex, record, tr, rowIndex, e, eOpts)
            {                   
            var dataIndex = thisObj.getHeaderCt().getHeaderAtIndex(cellIndex).dataIndex;
                if(eval(record.get(dataIndex))< 12) //changes made after main logic
                {
                    oldValue = record.get(dataIndex);               
                }
                currentRecord = record;
            }    
        },                  

        title:'TIMESHEET',
        columns: [               
                  {
                      header: 'Tasks',
                      dataIndex: 'task_name',
                      width: 160  
                  },
                  {
                      header: 'Project Name',
                      dataIndex: 'project_name',
                      width: 160  
                  },
                 {
                      dataIndex: 'monday',
                      width: 95,
                      id:'monday',
                      editor:{
                          xtype:'textfield',
                          listeners:{
                             'blur':function(o, t, h){                           
                                 if(validateEffort(o)){
                                     calculateTotal(o.value);
                                 }                           
                             }
                         }    
                      }               
                  },
                {
                      dataIndex: 'tuesday',
                      width: 95,
                      id:'tuesday',
                      editor:{
                          xtype:'textfield',
                          listeners:{
                             'blur':function(o, t, h){
                                 if(validateEffort(o)){
                                     calculateTotal(o.value);
                                 }
                             }
                         }    
                      }
                  },   
                  {
                      dataIndex: 'wednesday',
                      width: 95,
                      id:'wednesday',
                      editor:{
                          xtype:'textfield',
                          listeners:{
                             'blur':function(o, t, h){
                                 if(validateEffort(o)){
                                     calculateTotal(o.value);
                                 }
                             }
                         }    
                      }
                  },  
                  {
                      dataIndex: 'thursday',
                      width: 95,
                      id:'thursday',
                      editor:{
                          xtype:'textfield',
                          listeners:{
                             'blur':function(o, t, h){
                                 if(validateEffort(o)){
                                     calculateTotal(o.value);
                                 }
                             }
                         }    
                      }
                  },   
                  {
                      dataIndex: 'friday',
                      width: 95,
                      id:'friday',
                      editor:{
                          xtype:'textfield',
                          listeners:{
                             'blur':function(o, t, h){
                                 if(validateEffort(o)){
                                     calculateTotal(o.value);
                                 }
                             }
                         }    
                      }
                  },   
                  {
                      dataIndex: 'saturday',
                      width: 95,
                      id:'saturday',
                      editor:{
                          xtype:'textfield',
                          listeners:{
                             'blur':function(o, t, h){
                                 if(validateEffort(o)){
                                     calculateTotal(o.value);
                                 }
                             }
                         }    
                      }
                  },  
                  {
                      dataIndex: 'sunday',
                      width: 95,
                      id:'sunday',
                      editor:{
                          xtype:'textfield',
                          listeners:{
                             'blur':function(o, t, h){
                                 if(validateEffort(o)){
                                     calculateTotal(o.value);
                                 }
                             }
                         }    
                      }
                  },
                  {
                      header: 'Total Efforts',
                      dataIndex: 'total_efforts',
                      width: 95,
                      editor:{
                          xtype:'textfield',
                          disabled:true
                         }    
                   } 
                 ],

    initComponent: function() {

        this.callParent(arguments);

    }

    }); 
```

此函数用于验证在单元格单击时输入的单元格中的数字格式（如 2.34）

```
 function validateEffort(obj){
        var regEx=/(^([0-9]|[0-1][0-9]|[2][0-3]).([0-5][0-9])$)|(^([0-9]|[1][0-2])$)/;
         if(obj && !regEx.test(obj.value)){
             alert("Invalid value");
             obj.setValue(oldValue);
             return false;
         }
         return true;
    } 
```

此函数用于计算要在我的列中显示的总工作量（及时），数据索引：'total_efforts'。

```
 function calculateTotal(newValue){
        //alert("old = "+oldValue + "   new = " +newValue);
        oldValue = oldValue?oldValue:0.00;
        if(currentRecord &&  oldValue !=newValue){
            var currTotal = currentRecord.get('total_efforts');     
            //alert("currTotal=="+currTotal);       
            if(!currTotal || currTotal == 'NaN'){
                currTotal = 0.00;
            }
            currentRecord.set('total_efforts',((eval(currTotal)+eval(newValue)-eval(oldValue))).toFixed(2));
            var newcurrTotal = currentRecord.get('total_efforts');
            var arr = [];
            arr=newcurrTotal.split(".");
            //alert("arr[1]--> " +arr[1]);
            //alert(newcurrTotal);
            if(eval(arr[1])>=60)
            {
                var q =parseInt(eval(arr[1])/60);
                //alert("q --> "+parseInt(q));
                var r = (eval(arr[1])%60)/100;
                //alert("r --> "+r);    
                        var newtotal = eval(newcurrTotal)+eval(q)-(eval(arr[1])/100)+r;
                alert("new---> "+newtotal.toFixed(2));
                //currentRecord.set('total_efforts',newtotal.toFixed(2));

            }       
            //alert("new total=="+currentRecord.get('total_efforts'));
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T21:44:27.700

利用在`edit`单元格（或行）编辑完成时触发的网格事件。

```
var grid = Ext.create('Ext.grid.Panel', {
    plugins [
        Ext.create('Ext.grid.plugin.CellEditing', {
            clicksToEdit: 1
        })
    ],
    columns: title:'TIMESHEET',
    columns: [{
        dataIndex: 'monday',
        width: 95,
        id:'monday',
        editor: {
          xtype: 'numberfield',
          regex: /(^([0-9]|[0-1][0-9]|[2][0-3]).([0-5][0-9])$)|(^([0-9]|[1][0-2])$)/
        }
    }, // ... other days of week
    {
        header: 'Total Efforts',
        dataIndex: 'total_efforts',
        width: 95
    }]
});

grid.on('edit', function(editor, e) {
    var record = e.record,
        total = 0;

    // this isn't the most efficient with recalculating the total every time but it
    // really shouldn't matter.
    total += record.get('monday') || 0;
    total += record.get('tuesday') || 0;
    total += record.get('wednesday') || 0;
    total += record.get('thursday') || 0;
    total += record.get('friday') || 0;
    total += record.get('saturday') || 0;
    total += record.get('sunday') || 0;

    record.set('total_efforts', total);
}); 
```

# wordpress - 如何在 Wordpress 页面模板中重用代码？

> ID：15156762
> 
> 赞同：1
> 
> 时间：2013-03-01T11:35:10.250
> 
> 标签：wordpress

我创建了一个将用作主页的页面模板。主页将包含三列，每列将包含具有特定 meta_key 值的页面的摘录。

此代码有效，但每次对每一列重复，唯一不同的是 meta_key 的值。

我还是新手，所以我不确定什么是分离包含 PHP 和 HTML 的代码的正确方法？

*   通过使用 PHP 包含语句？
*   通过在functions.php中创建一个包含该代码的函数？
*   通过使用 Wordpress get_template_part 函数？
*   还有什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:19:33.980

最后，你想用什么就是什么

1.  容易被别人理解
2.  方便你

你已经掌握了 DRY - 不要重复自己 - 原则。这是非常好的。如果将来必须更改某些内容，则不希望在多个地方更改相同的内容（不方便）。所以如果你在几个不同的模板文件中重复同样的事情，你可以使用`get_template_part`. 此功能`include()`已过时。

您可以将代码粘贴到以元键作为参数的函数中。这将是一个非常简洁的解决方案。这将非常方便。问题是，如果其他人阅读此模板，他们将不会立即知道该函数的外观，因为它是您自定义的东西，他们必须找到该函数才能弄清楚。

所以也许你最好的选择是使用一个 foreach 循环：

```
foreach( array( 'meta_key1', 'meta_key2' ) as $key ) {
// Your code
} 
```

如果代码不是太长并且主要是关于显示信息而不是处理它，这可能是一个很好的解决方案。但这仅在您要生成的输出相邻时才有效。否则你不得不创建一个函数，在这种情况下你应该把它放在functions.php中。

如果代码对信息进行了大量处理，您可能应该将其放在functions.php 中。模板文件用于显示内容，只有一点 PHP 经验的设计人员应该可以阅读。

（顺便说一句，函数同时包含 PHP 和 HTML 并没有错。所有模板标签本质上都是这样的函数。WordPress 不鼓励真正严格的分离。）

# jaxb - 以字符串的形式将 XMl 传递给 Jaxb Unmarshaller

> ID：15156766
> 
> 赞同：1
> 
> 时间：2013-03-01T11:35:29.270
> 
> 标签：jaxb

我有一个 Customer 类和一个相关的 xml 文件。

```
 File file = new File("D:\\TestingData\\customer.xml");
        JAXBContext jaxbContext = JAXBContext.newInstance(Customer.class);
        Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();
        Customer data = (Customer) jaxbUnmarshaller.unmarshal(file); 
```

我需要将 customer.xml 文件放在外部位置。(D:\TestingData\customer.xml)

我的问题是我可以将 xml 文件作为字符串的一部分提供给 unmarshall 方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:37:49.680

> 我可以将 xml 文件作为字符串的一部分提供吗

是的，您只需将其包装在`StringReader`.

```
String xml = "<foo><bar>Hello World</bar></foo>";
StringReader reader = new StringReader(xml);
Foo foo = (Foo) unmarshaller.unnmarshal(reader); 
```

# css - opera position fixed to fixed elements and resize bug?

> ID：15156769
> 
> 赞同：0
> 
> 时间：2013-03-01T11:35:36.687
> 
> 标签：css, opera, fixed

I used 2 div's with fixed positioning, and after resize - opera doesen't redraw elements.

```
#wrapper{
    position:fixed;
    z-index:10000;
    height: auto;
    background-color: transparent;
    margin: 0;
}

#label {
    position: fixed;
    bottom:0px;
    left: 50%;
    background-color: transparent;
    z-index: 9999999;
    height: 40px;
    width: 200px;
    border: 1px solid red;
    margin-left:-100px;
}

<div id="wrapper">
    <div id="label">content</div>
</div> 
```

U can see this bug here

[http://jsfiddle.net/6Cm6J/1/](http://jsfiddle.net/6Cm6J/1/)

Just load page in Opera browser and resize window.

Pls help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:54:19.753

写这个 CSS

**[现场演示](http://jsfiddle.net/6Cm6J/11/)**

**css**

```
#wrapper{
    position:fixed;
    z-index:10000;
    height: auto;
    background-color: transparent;
    margin: 0;
    bottom:0;
    left:0;
    right:0;
}

#label {
    position: relative;
    bottom:0px;
    left: 50%;
    background-color: transparent;
    height: 40px;
    width: 200px;
    border: 1px solid red;
    margin-left:-100px;
} 
```

# android - 布局如何配置

> ID：15156771
> 
> 赞同：0
> 
> 时间：2013-03-01T11:35:49.720
> 
> 标签：android, android-layout

我的布局有问题。我想要一个水平文件，每行有两行：

这类似于我想要得到的东西：

![在此处输入图像描述](../Images/3f87ce91dc4d58844448c2f3c2dd87d9.png)

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="wrap_content"
  android:layout_height="wrap_content"
  android:orientation="horizontal"
  android:gravity="center"

>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:gravity="center">

    <ImageView android:id="@+id/takeBike" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dip" 
        android:layout_marginBottom="8dip"
        android:layout_marginLeft="20dip"
        android:src="@drawable/flecha_1"
        android:background="@null"/>

    <ImageView android:id="@+id/returnBike" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dip" 
        android:layout_marginBottom="8dip"
        android:layout_marginLeft="20dip"
        android:src="@drawable/flecha_2"
        android:background="@null"/>

</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:gravity="center">

    <TextView android:id="@+id/takeTime" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dip" 
        android:layout_marginBottom="8dip"
        android:layout_marginLeft="20dip"
    />

    <TextView android:id="@+id/returnTime" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dip" 
        android:layout_marginBottom="8dip"
        android:layout_marginLeft="20dip"
    />

</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:gravity="center">

    <TextView android:id="@+id/parkingTake" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dip" 
        android:layout_marginBottom="8dip"
        android:layout_marginLeft="20dip"
    />

    <TextView android:id="@+id/parkingReturn" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dip" 
        android:layout_marginBottom="8dip"
        android:layout_marginLeft="20dip"
    />

</LinearLayout>

<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:gravity="center">

    <TextView android:id="@+id/useTime" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dip" 
        android:layout_marginBottom="8dip"
        android:layout_marginLeft="20dip"
    />

    <TextView android:id="@+id/cost" 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="8dip" 
        android:layout_marginBottom="8dip"
        android:layout_marginLeft="20dip"
    />

</LinearLayout> 
```

但我得到的是：

![在此处输入图像描述](../Images/166d5ea1e84045e27117ab03ffc8c027.png)

错误在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:24:11.927

Android 平台针对这种情况有一个特定的布局，[TableLayout](http://developer.android.com/reference/android/widget/TableLayout.html)。

您使用 TableLayout 的布局：

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:stretchColumns="1">

    <TableRow>

        <ImageView android:id="@+id/takeBike" 
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_marginTop="8dip" 
               android:layout_marginBottom="8dip"
               android:layout_marginLeft="20dip"
               android:src="@drawable/flecha_1"
               android:background="@null"/>

         <TextView android:id="@+id/takeTime" 
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_marginTop="8dip" 
               android:layout_marginBottom="8dip"
               android:layout_marginLeft="20dip"/>

         <TextView android:id="@+id/parkingTake" 
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_marginTop="8dip" 
               android:layout_marginBottom="8dip"
               android:layout_marginLeft="20dip"/>

        <TextView android:id="@+id/useTime" 
               android:layout_width="wrap_content"
               android:layout_height="wrap_content"
               android:layout_marginTop="8dip" 
               android:layout_marginBottom="8dip"
               android:layout_marginLeft="20dip"/>

    </TableRow>

    <TableRow>

        <ImageView android:id="@+id/returnBike" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dip" 
            android:layout_marginBottom="8dip"
            android:layout_marginLeft="20dip"
            android:src="@drawable/flecha_2"
            android:background="@null"/>

        <TextView android:id="@+id/returnTime" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dip" 
            android:layout_marginBottom="8dip"
            android:layout_marginLeft="20dip"/>

        <TextView android:id="@+id/parkingReturn" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dip" 
            android:layout_marginBottom="8dip"
            android:layout_marginLeft="20dip"/>

        <TextView android:id="@+id/cost" 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dip" 
            android:layout_marginBottom="8dip"
            android:layout_marginLeft="20dip"/>

    </TableRow>
</TableLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:52:52.657

抱歉，伙计，我感到很懒，所以没有尝试在您的代码中找到问题，而是为您编写了正确的问题。干得好：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="70dp"
    android:background="#1E90FF"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_margin="5dp"
        android:background="#87CEFA"
        android:orientation="vertical" >

        <ImageView
            android:id="@+id/imageView1"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:src="@android:drawable/ic_media_previous" />

        <ImageView
            android:id="@+id/imageView2"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:src="@android:drawable/ic_media_next" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_margin="5dp"
        android:background="#87CEFA"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:gravity="center_vertical"
            android:singleLine="true"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:gravity="center_vertical"
            android:singleLine="true"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_margin="5dp"
        android:background="#87CEFA"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView3"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:gravity="center_vertical"
            android:singleLine="true"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/textView4"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:gravity="center_vertical"
            android:singleLine="true"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_margin="5dp"
        android:background="#87CEFA"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView5"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:gravity="center_vertical"
            android:singleLine="true"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/textView6"
            android:layout_width="wrap_content"
            android:layout_height="30dp"
            android:gravity="center_vertical"
            android:singleLine="true"
            android:text="Medium Text"
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>

</LinearLayout> 
```

请查看您的代码出了什么问题。只是为了更快地回复，我一遍又一遍地复制粘贴样式，您应该在样式中指定并使用它，遵循指南，从长远来看，它会对您有所帮助。PFB 图形布局的屏幕截图： ![截屏](../Images/9fb6a554a570e00a146e0acb157f7796.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T11:43:53.823

使用嵌套布局，例如

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" 
    >

 <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" 
    android:layout_weight=".25">

  <Button
        android:id="@+id/play_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="left" />

    <Button
        android:id="@+id/stop_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="right" />

</LinearLayout>

 <LinearLayout 
   android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:layout_weight=".25">

  <TextView
        android:id="@+id/play_button"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:text="12 02 14:07"
        android:layout_weight=".5"/>

    <TextView
        android:id="@+id/stop_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="12 02 14:07" />

</LinearLayout>

 <LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:layout_weight=".25">

  <TextView
        android:id="@+id/play_button"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:text="12 02 14:07"
        android:layout_weight=".5"/>

    <TextView
        android:id="@+id/stop_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="12 02 14:07" />

</LinearLayout>
<LinearLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:layout_weight=".25">

  <TextView
        android:id="@+id/play_button"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:text="12 02 14:07"
        android:layout_weight=".5"/>

    <TextView
        android:id="@+id/stop_button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="12 02 14:07" />

</LinearLayout>
</LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-01T11:52:15.527

删除`android:gravity="center"`布局中的标签，我认为会很好。

# c# - 从 FBX 模型中移除 .Diffuse 颜色

> ID：15156776
> 
> 赞同：0
> 
> 时间：2013-03-01T11:36:02.133
> 
> 标签：c#, xna, augmented-reality, game-development

我目前正在开发一个 AR 项目，该项目基于 GoblinXNA 提供的原始“Tutorial 8 - Marker Tracking”程序。我玩过它，并用我自己的一些设计替换了模型，保存为 .fbx 格式。我遇到的问题是 .Diffuse 扩展名正在用红色替换模型的原始颜色；改变颜色没有区别，只改变颜色，不允许我拥有模型的原始外观，并且删除 .Diffuse 代码行只会使模型变成灰色和黑色的阴影（我猜这是用 CreateLights() 方法做吗？）

无论如何，这里是对象的代码；任何帮助将非常感激！

```
 ModelLoader mLoader = new ModelLoader(); //self explanatory
    Model flagModel = (Model)mLoader.Load("", "FlagModelAsset2");

    flagNode = new GeometryNode("FlagModelAsset2");
    flagNode.Model = flagModel;
    flagNode.AddToPhysicsEngine = true;
    flagNode.Physics.Shape = ShapeType.Box;
    flagNode.Model.ShadowAttribute = ShadowAttribute.ReceiveCast;
    flagNode.Model.Shader = new SimpleShadowShader(scene.ShadowMap);

    //TransformNode flagTransNode = new TransformNode();
    //flagTransNode.Translation = new Vector3(0, 0, 0); //position of flag
    //flagTransNode.Scale = new Vector3(1f, 1f, 1f); //size of flag

    toolbarMarkerNode = new MarkerNode(scene.MarkerTracker, "ALVARToolbar.xml");

    Material flagMaterial = new Material();
    flagMaterial.Diffuse = new Vector4(0.5f, 2, 0, 1); //colour of flag
    flagMaterial.Specular = Color.White.ToVector4();
    flagMaterial.SpecularPower = 10;

    flagNode.Material = flagMaterial;

    groundMarkerNode.AddChild(flagNode);
    scene.RootNode.AddChild(toolbarMarkerNode);
    //flagNode.AddChild(flagTransNode);            

    NewtonPhysics.CollisionPair pair = new NewtonPhysics.CollisionPair(flagNode.Physics, sphereNode.Physics);
    ((NewtonPhysics)scene.PhysicsEngine).AddCollisionCallback(pair, BoxSphereCollision);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:06:39.850

是材料；删除它并添加下面的代码允许使用原始导入文件中的纹理

```
((Model)flagNode.Model).UseInternalMaterials = true; 
```

# java - 使用 Collections.reverseOrder() 对字符串 [] 进行排序

> ID：15156778
> 
> 赞同：2
> 
> 时间：2013-03-01T11:36:06.353
> 
> 标签：java, arrays, collections

我需要`String[]`按降序对整数值进行排序。我使用 String[] 因为数组的内容可以是字符串或整数。

要按降序排序，

```
Arrays.sort(rows, Collections.reverseOrder()); 
```

其中行包含`"14","0","3"`;

如果 string[] 包含单词，则排序工作正常。

我读到这`Collections.reverseOrder()`不适用于原始类型，但是由于使用`String[]`而不是，这是否属于该类别`int[]`？

如果是这样，除了使用 for 循环之外，我们还有排序机制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:45:03.323

要求非常具体和不寻常，当然，没有标准的方法。但是您可以提供一个自定义比较器：

```
Arrays.sort(rows, new Comparator<String>()
{
    public int compare(String o1, String o2)
    {
         return Integer.parseInt(o2) - Integer.parseInt(o1);
    }
}); 
```

如果字符串具有不可解析的整数并处理`NumberFormatException`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:46:08.417

问题是字符串的自然顺序与数字的自然顺序不同：`"1" < "11" < "2"`与`1 < 2 < 11`. 这是编写自己的比较器的问题：

```
 Arrays.sort(rows, new Comparator<String>() {
        public int compare(String o1, String o2) {
            return -(Integer.parseInt(o1) - Integer.parseInt(o2));
        }
    }); 
```

它将使用每个字符串的整数值 - 如果任何字符串不是整数，它将崩溃 - 并且它会给出相反的顺序，因为它返回`-`正常值。它也是低效的，因为它在每次比较中解析每个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:45:32.003

如果要按数字顺序排序，则需要数字类型，而不是`String`. 您可以创建一个数组`Integer`并对其进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T11:47:04.803

排序是使用按字母顺序排列的字符串完成的。字符串`"3"`大于，`"14"`因为 char`'3'`大于 char `'1'`（以相反的顺序）。

您需要传递一个自己的比较器，在比较它们之前将字符串转换为整数，或者让整数格式化，以便它们具有相同的位数和前导`0`。

如果在同一个数组中有一个数字作为字符串，那么您无法将数字排序为数字。

# sql - 使用 While 循环计算表中的值？

> ID：15156783
> 
> 赞同：0
> 
> 时间：2013-03-01T11:36:11.607
> 
> 标签：sql, sql-server, stored-procedures

我有一个下表，我需要遍历记录并将值添加到变量

```
Declare @Variable1 INT
SET @Variable1=0

Declare @totalval INT
SET @totalval=0

While (@Variable1<=20)
BEGIN
SET @totalval=@totalval+(Select Salary from EmpTable Where EmpID=9)
PRINT @totalval
SET @Variable1= Variable1+1
END
GO 
```

我无法打印值...我使用的是 SQL Server 2005

谢谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:43:51.777

你可以改用这个：

```
;WITH a AS
(
    SELECT  ROW_NUMBER() OVER (ORDER BY (SELECT 0)) num
            , *
    FROM    EmpTable
    WHERE   EmpID = 9

)

SELECT  @totalval = SUM(Salary)
        , @Variable1 = COUNT(*)
FROM    a 
WHERE   num <= 20 
```

这将是执行此类任务的常用方法之一，并且比循环更有效。`ROW_NUMBER() OVER (ORDER BY (SELECT 0))`为记录提供序数但不改变排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:41:15.797

问题是这一行：

```
SET @Variable1= Variable1+1 
```

这不起作用，将其更改为：

```
SET @Variable1= @Variable1+1 
```

**如果你要离开它，你应该得到这个错误：**

```
Msg 207, Level 16, State 1, Line 11
Invalid column name 'Variable1'. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T11:57:45.520

这也有效（根据您的要求）：

[小提琴演示在这里](http://sqlfiddle.com/#!3/7fc5d/4)

```
declare @total int, @records int = 20 

select top( @records) @total=isnull(@total,0) + salary
from EmpTable
where empid = 9
-- order by salary (you may need to order by something) 
```

# c# - 如何为 .Net 应用程序编写 API - 无法访问配置文件

> ID：15156787
> 
> 赞同：0
> 
> 时间：2013-03-01T11:36:22.683
> 
> 标签：c#, .net

我正在为现有的 .Net 应用程序编写 API，以便将该应用程序用作其他自定义应用程序（可能由客户编写）的“引擎”。前提是“引擎”将始终在目标机器上安装并工作。

我的方法是在 VS 解决方案中为“引擎”应用程序创建一个新项目，这是一个提供公共方法的类库，可将应用程序自己的库的细粒度功能聚合到更高级别的简化方法调用中，以用于第 3 方应用程序作者使用。

API 在“引擎”解决方案的上下文中运行良好，单元测试正常运行。但是，当我尝试在该 VS 解决方案之外编写一个简单的“自定义”应用程序时，使用对 API 的引用来提供我需要的服务，我遇到了一个问题 - 除非我的自定义应用程序具有“引擎”的副本*app.config* (sic) 文件在编译之前，引擎在尝试访问其配置文件时会抛出异常。

期望第 3 方开发人员手头有 app.config 文件显然是不切实际的，期望他们必须将引擎的配置文件复制到他们的解决方案中并重命名它有点不雅。

有没有更清洁的方法来做到这一点？目的是让自定义应用程序只需要对 API 程序集的引用，并让引擎像正常使用一样“正常工作”。最好避免使用二进制远程处理、Web 服务和 COM（假设它们会解决问题）。

哦，这就是 .Net 3.5 和 VS2008 TIA

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:41:19.047

是的，使用 NuGet。如果将程序集打包在 NuGet 包中，则可以添加[配置文件转换](http://docs.nuget.org/docs/creating-packages/configuration-file-and-source-code-transformations)，该转换将自动添加/更新引擎的配置属性。然后，当您的消费者提取您的引用（从本地 NuGet 服务器？）时，他们将获得程序集引用和配置转换。

我建议为您的引擎创建一个正式的配置部分，以便您知道您只在 NuGet 包中管理其配置。

# c# - 如何使用 gembox 电子表格在 Excel 中复制和插入特定行

> ID：15156794
> 
> 赞同：0
> 
> 时间：2013-03-01T11:36:36.487
> 
> 标签：c#, excel, copy, row, gembox-spreadsheet

请帮忙。我使用 gembox.spreadsheet 库在 excel 文件的 2 张表中的特定行处插入和复制。但它仍然存在无效论点的问题。

```
public void InsertCopyData()
{
    SpreadsheetInfo.SetLicense("FREE-LIMITED-KEY");
    ExcelFile ef = new ExcelFile();

    // Loads Excel file.
    ef.LoadXls(@"C:\templateExcel\DataTable.xls");

    // Selects first and 2nd worksheet.
    ExcelWorksheet w1 = ef.Worksheets[0];
    ExcelWorksheet w2 = ef.Worksheets[1];

    //insert copy file  
    w1.InsertCopy(w1.Rows["A1"], w2.Rows["A4"]);

    //Saves the file in XLS format.
    ef.SaveXls(@"C:\templateExcel\Insert DataTable.xls");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-30T08:58:37.597

请注意，GemBox.Spreadsheet 可以让您插入工作表、行和/或列。您使用无效参数的 API 用于插入工作表副本，为了插入行副本，请使用以下内容：

```
// Inserts specified number of copied rows before the current row.
var currentRow = w1.Rows["A1"];
currentRow.InsertCopy(1, w2.Rows["A4"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T07:56:53.950

你不能这样使用：`ef.LoadXls(@"C:\templateExcel\DataTable.xls");`

您应该写入以加载现有的 Excel 文件。

```
GemBox.Spreadsheet.ExcelFile ef = new GemBox.Spreadsheet.ExcelFile();
ef = GemBox.Spreadsheet.**ExcelFile.Load**("D:\\Example.xlsx");
ExcelWorksheet ws = ef.Worksheets["Sheet1"];  (or)   ExcelWorksheet ws = ef.Worksheets[0]; 
// writing data to excel file code...
ws.Cells[0, 0].Value = example_1;
ws.Cells[1, 0].Value = example_2;
ef.Save("D:\\Example.xlsx"); 
```

# rubygems - gem install compass 失败，无法从 ruby gems 下载数据

> ID：15156797
> 
> 赞同：3
> 
> 时间：2013-03-01T11:36:49.810
> 
> 标签：rubygems, gem, compass-sass

我正在尝试在我的 Mac 上安装指南针，在我的家庭网络上，没有代理服务器。但我就是无法让它工作......

卷曲到以下地址对我有用..

有什么建议吗？

这是来自终端的命令和结果：

```
sudo gem install compass --verbose
Password:
GET http://rubygems.org/latest_specs.4.8.gz
302 Moved Temporarily
GET http://production.s3.rubygems.org/latest_specs.4.8.gz
connection reset after 1 requests, retrying
GET http://production.s3.rubygems.org/latest_specs.4.8.gz
connection reset after 1 requests, retrying
ERROR:  Could not find a valid gem 'compass' (>= 0), here is why:
          Unable to download data from http://rubygems.org/ - too many connection resets (http://production.s3.rubygems.org/latest_specs.4.8.gz)
GET http://rubygems.org/prerelease_specs.4.8.gz
connection reset after 2 requests, retrying
GET http://rubygems.org/prerelease_specs.4.8.gz
302 Moved Temporarily
GET http://production.s3.rubygems.org/prerelease_specs.4.8.gz
connection reset after 2 requests, retrying
GET http://production.s3.rubygems.org/prerelease_specs.4.8.gz
connection reset after 1 requests, retrying
GET http://rubygems.org/specs.4.8.gz
connection reset after 2 requests, retrying
GET http://rubygems.org/specs.4.8.gz
302 Moved Temporarily
GET http://production.s3.rubygems.org/specs.4.8.gz
200 OK
ERROR:  Possible alternatives: compass 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T03:37:15.900

我在 2012 年中期的 MacBook Air 上遇到了这个问题。我尝试了许多其他解决方法，包括手动更新 gem。阅读上述 Amir Mimran 的评论后，我禁用了 Avast 防护罩，我的 gem 安装成功。

在此之前，我收到“连接重置过多”错误。现在我需要弄清楚如何在 Avast 中将 ruby​​gems.org 列入白名单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-11T14:31:11.820

我在尝试 gem install rails 并遵循 Amir Mimran 对 Avast 的初步评论并继续禁用 Web shield 对我有用时遇到了同样的问题。

要禁用 Web Shield，请打开 Avast，进入首选项并禁用 Web Shield，然后再次尝试您的 gem。dmayo3 将 ruby​​gems.org 添加到白名单的评论是一个选项，但这对我不起作用，但我怀疑这可能是因为我在运行 gem 安装时遇到的所有 302 临时移动重定向。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-13T13:42:26.597

如果您使用代理，请执行以下操作：

```
gem install <gem_which_I_wanted> --http-proxy http://<proxy_adress_or_IP>:<proxy_port> 
```

将 < 和 > 中的 thingis 替换为您需要的内容。

# jquery - 多个轮播（carouFredSel）每个使用jquery，链接标识符问题

> ID：15156810
> 
> 赞同：5
> 
> 时间：2013-03-01T11:37:27.910
> 
> 标签：jquery, carousel

我正在使用以下代码在一页上创建多个幻灯片。

幻灯片工作正常，但我无法让每个幻灯片的各个按钮工作。当我单击它们时，页面只会滚动到顶部。我认为通过唯一标识每个链接我不应该有问题。

有什么想法有什么问题吗？

```
 $("div.slideshow").each(function(){
            $(this).find('ul').carouFredSel
            ({
            auto:true,
             items: { width: 200, height: 200 },
             prev: { button: function() { return $(this).find('a.prev');}},             
             next: { button: function() { return $(this).find('a.next'); }},          
            });
    console.log( $(this).find('a.prev') ); //correct element returned, length 1
    console.log($(this));  //correct element returned
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-02-20T07:24:31.253

如果下一个代码

```
<div class="image_carousel">
    <div class="sec_elem">
        <div class="tem-bl">
            <img src="image.jpg" alt=""/>
        </div>
        <div class="tem-bl">
            <img src="image.jpg" alt=""/>
        </div>
        <div class="tem-bl">
            <img src="image.jpg" alt=""/>
        </div>
    </div>

    <a class="prev" href="#"></a>
    <a class="next" href="#"></a>
</div> 
```

jQuery

```
$(".sec_elem").carouFredSel({
    circular: true,
    infinite: false,
    width:'100%',
    auto    : true,
    scroll  : {
        items   : 1,
        pauseOnHover    : true,
        duration    : 1000
    },
    prev    : {
        button  : function(){
            return $(this).parents('.image_carousel').find('.prev');
        },
        key     : "left"
    },
    next    : {
        button  : function(){
            return $(this).parents('.image_carousel').find('.next');
        },
        key     : "right"
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-06T01:11:26.243

由于页面滚动到顶部，问题在于 carouFredSel 根本就初始化了寻呼机。您的标记很可能存在问题。

`responsive : true`按照您刚才描述的方式，我在使用该选项时也遇到了一些奇怪的问题。

我创建了一个 jsFiddle 来展示一个在 jQuery 选项卡 UI 中使用多个轮播的工作示例：

[http://jsfiddle.net/EFC3X/](http://jsfiddle.net/EFC3X/)

# java - PHP/Java for Android 之间的数据编码/解码

> ID：15156811
> 
> 赞同：13
> 
> 时间：2013-03-01T11:37:29.907
> 
> 标签：java, php, android, base64

我必须解码从 PHP 服务器接收到的 base64 编码数据。

服务器使用“base64_encode”对数据进行编码。

在我的 Android 应用程序中，我使用 android.utils.Base64 类进行解码。

原始加密数据 = "†+Ü]M(‡=ñö"
PHP 中的 Base64 编码数据 - "hisP3F1NBCgIAocQCD3x9g=="
Android 中的 Base64 编码数据 - "4oCgKw/DnF1NBCgIAuKAoRAIPcOxw7Y="

如您所见，Java 编码的字符串比 PHP 编码的字符串长。我需要找出他们的默认编码格式。

如何从两者中获取相同的编码字符串？

Java/Android 代码：

```
String encrypted = "†+Ü]M(‡=ñö";
byte[] encoded = Base64.encode(encrypted.getBytes(), Base64.DEFAULT);
String str = new String(encoded); //str = "4oCgKw/DnF1NBCgIAuKAoRAIPcOxw7Y=" 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-01T11:46:45.277

在 Java 中试试这个：这将为您提供字符串的长版本（UTF-8）

```
byte[] encoded = Base64.encode(encrypted.getBytes("UTF-8"), Base64.DEFAULT);
String str = new String(encoded, "UTF-8"); 
```

**更新：**

在 Java 中试试这个：这将为您提供字符串的简短版本 (CP1252)

```
// This should give the same results as in PHP
byte[] encoded = Base64.encode(encrypted.getBytes("CP1252"), Base64.DEFAULT);
String str = new String(encoded, "CP1252"); 
```

或者试试这个 PHP 脚本：

文件：test.php

```
<?php

echo base64_encode($_GET['str'])." Default UTF-8 version<br />";
echo base64_encode(iconv("UTF-8","CP1252",$_GET['str']))." CP1252 Version <br />";

?>

usage: http://[SOMEDOMAIN]/test.php?str=†+Ü]M(‡=ñö 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-06-29T14:56:00.357

对我来说 CP1252 不起作用，因为它因非字母数字符号而失败。我找到的最好的字符集是 ISO-8859-1，使用如下：

```
Base64.getEncoder()
                .encodeToString(
                    stringToBeEncoded.getBytes(
                        Charset.forName("ISO-8859-1"))) 
```

# vim - Vim 函数返回当前行

> ID：15156812
> 
> 赞同：3
> 
> 时间：2013-03-01T11:37:35.337
> 
> 标签：vim

我正在尝试编写一个 Vim 函数，该函数将执行一系列操作，然后返回到第一次触发该函数的行。是否有可能以某种方式编写一个可以执行此行为的 Vim 函数？

例如，如果我在 vim 缓冲区中的某个地方——比如第 55 行并键入`gg`以转到第一行，我可以返回到第 55 行，使用`<C-o>?`如何在 Vim 函数中编写此行为？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-01T11:51:20.390

首先，您可以在通常键入的函数中执行所有操作。要使用`<C-o>`，您只需要正确的转义：

```
:execute "normal! \<C-o>" 
```

除此之外，您还可以使用专用的 Vimscript 函数。最简单的是`cursor()`，它不会修改跳转列表（用于`line('.')`将原始位置保存在变量中；我在这里对其进行硬编码）：

```
:call cursor(55, 0) 
```

但是，如果您希望您的操作完全不可见，仅恢复光标位置是不够的。这些移动也可能影响了视口；即在窗口中显示哪些缓冲行。要保持完整，请使用：

```
:let save_view = winsaveview()
" Your actions here
:call winrestview(save_view)
" Now the window looks exactly as before. 
```

# sql-server - 阻止 Microsoft Access 2010 连接到数据库

> ID：15156823
> 
> 赞同：0
> 
> 时间：2013-03-01T11:38:09.983
> 
> 标签：sql-server, database, ms-access

我想编辑一个 ms 访问应用程序，有没有办法阻止它尝试连接到远程数据库？我的意思是我不想使用该应用程序，我只想编辑一些表格，提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:02:05.287

将数据库复制到本地驱动器并拔下网络电缆。

# gif - 没有白色边框的透明动画 GIF

> ID：15156825
> 
> 赞同：1
> 
> 时间：2013-03-01T11:38:18.003
> 
> 标签：gif

对于我的 jQuery Web 应用程序，我搜索了一个不错的动画加载 gif。
我已经搜索了好几个小时......
我找到了：
preloaders.net、LoadInfo.net、ajaxload.info、LoadingAPNG.com、Chimply.com 等等。

但是它们在透明时都有这个非常难看的白色边框。
如果您不明白我的意思，请参阅：
[http ://www.graphicmania.net/creating-gif-images-without-white-borders-problem-in-photoshop-2/](http://www.graphicmania.net/creating-gif-images-without-white-borders-problem-in-photoshop-2/)

我还发现了这个 stackoverflow 问题
[Animated Loading GIF](https://stackoverflow.com/questions/8675744/animated-loading-gif)

但这家伙只有一种背景颜色。

菜单栏，这是我的背景（jquery ui 对话框标题栏），不是一种颜色，所以它必须是透明的。

非常感谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T11:41:22.720

尝试使用 spin.js。它不会产生白色背景效果。此外，它的加载速度比 gif 文件更快且易于配置。

[http://fgnass.github.com/spin.js/](http://fgnass.github.com/spin.js/)

# node.js - zappa js @include 咖啡脚本方法不起作用

> ID：15156827
> 
> 赞同：0
> 
> 时间：2013-03-01T11:38:23.260
> 
> 标签：node.js, function, include, coffeescript, zappa

我希望能够从 zappa 应用程序调用其他文件中声明的咖啡脚本和 js 函数。我根本无法让它工作。

[我尝试按照zappajs 速成课程](http://zappajs.org/docs/crashcourse/)中的说明使用 @include ...

但我明白了

> 类型错误：对象 # 没有方法“包含”

这是我的测试应用程序代码：

```
#app.coffee
require('zappajs') ->
    @get '/': -> @include 'call' 
```

这是我试图在另一个文件中调用的函数。

```
#call.coffee
@include = ->
    "call me" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T07:09:47.153

尝试：

```
#app.coffee
require('zappajs').run port, host,  ->
  @include './routes'

#routes.coffee
@include = ->
  @get '/': ->
    @render 'index.jade',
      foo:'bar' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T19:18:28.170

没有测试任何东西，但看起来你在这里混淆了一些东西。我可能是错的，但你可能应该只使用 require `node.js`-style `require`，或者你可以使用`zappa`style `@include`，但是在你真正理解什么之前混合它们可能不是一个好主意`@include`。

您链接到的 zappa 速成课程显示了定义模块和使用它们，但这两个地方都是使用`@include`. 根据您所写的内容，我相信您无法混合`require`以及`@include`您尝试做的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-02T01:56:47.973

Marius 是对的，我将 require 和 @include 混合在一起......我可以让它工作，这正是我想要做的（即在另一个文件中调用一个函数）

```
require('zappajs') -> 
  test = require('./test') 
  @get '/': -> test.test(@response) 
```

有一个名为 test.coffee 的文件，看起来像这样

```
@test = (res) -> 
  res.send 'hullo' 
```

# python - 声明 python 类，并创建类实例。（核心 Python 编程）

> ID：15156830
> 
> 赞同：3
> 
> 时间：2013-03-01T11:38:39.297
> 
> 标签：python

我正在从“核心python编程第二版”中学习python

我停留在“如何创建类实例”部分。第 84 页。

示例如下：

类.py：

```
class FooClass(object):

    """my very first class: FooClass"""

    version = 0.1 # class (data) attribute

def __init__(self, nm='John Doe'):

    """constructor"""

    self.name = nm # class instance (data) attribute

    print'Created a class instance for', nm

def showname(self):

    """display instance attribute and class name"""

    print 'Your name is', self.name

    print 'My name is', self.__class__.__name__

def showver(self):

    """display class(static) attribute"""

    print self.version # references FooClass.version

def addMe2Me(self, x): # does not use 'self'

    """apply + operation to argument"""

    return x + x 
```

然后我必须创建类实例：

在我的口译员中，我执行以下操作：

```
Import classes *
fool = FooClass() 
```

但什么也没发生。它应该打印**init**。

当我使用

`fool.showname()``fool.showver`它不打印任何东西。它说

> FooClass' 对象没有属性 'showver

在继续之前，我真的很想知道这里发生了什么。希望有人可以帮助我！

提前致谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T11:43:49.167

看起来你还没有缩进你的类的方法。使用以下代码：

```
class FooClass(object):
    ...

def __init__(self, nm='John Doe'):
    ... 
```

您正在声明一个名为的类`FooClass`和一个名为 的函数`__init__`。该类将有一个默认的空构造函数。如果您将其缩进为：

```
class FooClass(object):
    ...
    def __init__(self, nm='John Doe'):
        ... 
```

您有一个`FooClass`将该`__init__`方法作为构造函数的类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T11:50:35.103

好吧，我也在学习 python，我也在参考这本书，但我的书是第 1 版。但是，我从您的代码中分析的是它没有正确缩进。请正确检查并希望它可以正常工作。谢谢。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T11:43:34.993

您似乎有缩进问题。就像函数、条件和循环中的代码必须缩进以便 Python 将其视为“内部”一样，您的各种类方法也需要缩进到该`class ...:`行之外才能成为类的*一部分，*而不仅仅是（单独的）函数恰好在它*之后*定义。所以，

```
class FooClass(object):

    """my very first class: FooClass"""

    version = 0.1 # class (data) attribute

    def __init__(self, nm='John Doe'):

        """constructor"""

        self.name = nm # class instance (data) attribute

        print'Created a class instance for', nm 
```

以此类推其他方法。

# jquery - 轻量级 jquery 组合框以删除 jquery ui

> ID：15156831
> 
> 赞同：1
> 
> 时间：2013-03-01T11:38:43.297
> 
> 标签：jquery, jquery-ui, combobox

我正在为一个非常简单的页面使用 jQuery + jQuery UI。

我目前依赖 jQuery UI 自动完成功能，但是：

*   无需自动完成，只需要数字，如果打开下拉菜单，必须显示所有值

*   jQuery UI 图标和字体大小——在演示中默认为 62.5%——不适合我想要的设计：更大的文本，更大的图标。

所以我想找到一个最近的 jQuery 组合框插件：

1.  让用户在不查询服务器的情况下输入自己的值（更快）

2.  ajax 加载可用值并让用户选择

3.  很高兴：键盘支持...

我只能找到巨大的插件*或*旧插件......

# anagram - 字谜检查器说明

> ID：15156833
> 
> 赞同：-1
> 
> 时间：2013-03-01T11:38:48.133
> 
> 标签：anagram

我是一年级程序员，我想知道这段代码提取物是做什么的。它是 main 的一部分，它检查 2 个单词是否是彼此的字谜。我不完全确定这代表什么。

```
 for(int x = 0; x < array.length; x++)
    {
        if(x == array.length-1)
        {
            array[x] = word1.substring(x);
        }
        else
        {
            array[x] = word1.substring(x, x+1);
        }
    }       
    for(int x = 0; x < array.length && isAnagram != false; x++)
    {
        aLetter = array[x];
        if(word2.indexOf(aLetter) != -1)
        {
            isAnagram = true;
        }
        else
        {
            isAnagram = false;
        }
        if(isAnagram == true)
        {
            word2 = word2.replaceFirst(aLetter, "");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:46:13.627

**循环 1：**

在 中制作字母数组`word1`。

**循环 2：**

从 中删除每个字母`word2`。
`isAnagram`开始真实。
如果没有找到任何字母，`isAnagram`则为假。

最后`isAnagram`应该是真实的并且`word2`应该是空的。

# jquery - 在没有插件的情况下创建或更新查询字符串

> ID：15156838
> 
> 赞同：0
> 
> 时间：2013-03-01T11:39:06.163
> 
> 标签：jquery

我想在单击按钮时更新菜单项的 href，这是我的代码

```
function refreshReportMenu(){
    var ts = '&ts=' + new Date().getTime().string(16);
    $('ul.nav a.reps').each(function(){
       var href = $(this).attr('href');
        $(this).attr('href', href + ts);
    });
} 
```

但这里的问题是它总是将 ts 附加到 href，如果它已经在 href 中，我想更新 ts 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:40:50.843

```
 $('ul.nav a.reps').each(function(){
       var href = $(this).attr('href');
        $(this).attr('href', href + ts);
    }); 
```

认为你在这里出错了，`$this`而不是`$(this)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:43:17.763

尝试`.indexOf`

```
alert('Index: ' + $(this).attr('href').indexOf('ts')); 
```

查看

```
if($(this).attr('href').indexOf('ts') > 0)
{
    $(this).attr('href', href + ts);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:53:38.397

好吧..你也许可以试试

```
var reg = /(^|&)ts=(.*?)(&|$)/, ts = 'ts=' + new Date().getTime().toString(16);
$('ul.nav a.reps').each(function(){
   var href = $(this).attr('href');
   if ( href.match(reg) ) {
       href = href.replace(reg,"$1+"+ts+"$3");
   } else {
       href += "&" + ts;
   }
   $(this).attr('href', href);
}); 
```

它应该工作:)

# html - Knockout：提供 $element 的自定义数据属性来单击事件处理程序

> ID：15156839
> 
> 赞同：0
> 
> 时间：2013-03-01T11:39:12.897
> 
> 标签：html, knockout.js, attributes

是否可以访问[$element](http://knockoutjs.com/documentation/binding-context.html)引用`data-*`的对象上的任何属性？

在单击事件的绑定中，即

```
data-bind="click: function() { myfunction(arg);})" 
```

我能够使用`$element.id`arg，但我更喜欢，因为将我的信息（数据库 ID）存储在属性之一而不是属性`$element.data-id`中更有意义。不幸的是，给了我一个错误（使用淘汰赛 2.2.0）：“id is not defined”（似乎有些东西在仪表板上窒息）。`data-*``id``$element.data-id`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:41:17.687

您可以使用 jQuery 从元素中获取属性：

```
$($element).attr('data-id'); 
```

# java - 具有多个不同类加载器的单例类

> ID：15156840
> 
> 赞同：18
> 
> 时间：2013-03-01T11:39:17.947
> 
> 标签：java, singleton, classloader

例如，我有`Singleton`静态字段类`instance`：

```
public class Singleton {

    private static Singleton instance;

    // other code, construct, getters, no matter    
} 
```

我可以用两个不同的类加载器加载这个类两次。我怎么能避免呢？这是不安全和危险的。

另外，如果我将实例设置为 null，它会为两个类都设置为 null 吗？

```
Singleton singleton = Singleton.getInstance();
singleton = null; 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-01T11:53:39.153

如果你想要一个`Singleton`跨类加载器的真实值，那么你需要一个共同的父类来加载有问题的类，或者你需要自己指定类加载器。

**更新：**从下面@Pshemo 的评论来看，下面博客中的相当一部分内容可能直接来自[JavaWorld 文章](http://www.javaworld.com/article/2073352/core-java/simply-singleton.html)。我已经留下了博客条目，因为它可能仍然可以帮助某人，但值得知道内容最初来自哪里。

**原文：** 有一篇[博](http://snehaprashant.blogspot.co.uk/2009/01/singleton-pattern-in-java.html)文可以让你做到这一点”（虽然我没试过！），而且看起来还算合理

按照下面的要求，我上面的链接中的代码片段 - 我建议您访问该博客以获取完整的上下文：

```
private static Class getClass(String classname) throws ClassNotFoundException {
    ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
    if(classLoader == null) 
        classLoader = Singleton.class.getClassLoader();
      return (classLoader.loadClass(classname));
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-11-22T23:52:41.740

`Properties`这是一个滥用extends事实的 hack `Map`，一个旧的不幸的设计决定。

```
public final class JvmWideSingleton
{
    private static final JvmWideSingleton INSTANCE;

    static {
        // There should be just one system class loader object in the whole JVM.
        synchronized(ClassLoader.getSystemClassLoader()) {
            Properties sysProps = System.getProperties();
            // The key is a String, because the .class object would be different across classloaders.
            JvmWideSingleton singleton = (JvmWideSingleton) sysProps.get(JvmWideSingleton.class.getName());

            // Some other class loader loaded JvmWideSingleton earlier.
            if (singleton != null) {
                INSTANCE = singleton;
            }
            else {
                // Otherwise this classloader is the first one, let's create a singleton.
                // Make sure not to do any locking within this.
                INSTANCE = new JvmWideSingleton();
                System.getProperties().put(JvmWideSingleton.class.getName(), INSTANCE);
            }
        }
    }

    public static JvmWideSingleton getSingleton() {
        return INSTANCE;
    }
} 
```

这可以被参数化，但是初始化将是惰性的并转到`getSingleton()`.

`Properties`是`Hashtable`基于的，所以它是线程安全的（根据文档）。所以可以使用`props.computeIfAbsent()`. 但我更喜欢这种方式。

另请阅读：[Java 系统属性的范围](https://stackoverflow.com/questions/908903/scope-of-the-java-system-properties)

我刚刚写了它，有可能我忽略了一些东西会阻止它工作。

# java - Spring RabbitMQ 获取所有声明的队列

> ID：15156844
> 
> 赞同：5
> 
> 时间：2013-03-01T11:39:32.557
> 
> 标签：java, spring, rabbitmq

我正在尝试使用 spring Rabbit 库获取特定虚拟主机的所有声明队列的列表。但我看不出你是怎么做到的。确实存在一个允许您声明队列的 ​​RabbitAdmin 类，但您无法检索现有队列的列表。

有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T08:51:42.547

您将无法从 Spring/Java 客户端执行此操作。

相反，有一个 REST API，它是管理插件[http://www.rabbitmq.com/management.html的一部分](http://www.rabbitmq.com/management.html)

查看 [http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_0_2/priv/www/api/index.html](http://hg.rabbitmq.com/rabbitmq-management/raw-file/rabbitmq_v3_0_2/priv/www/api/index.html) 以获取完整参考。

您将对`/api/queues`获取所有队列或`/api/queues/vhost`获取给定虚拟主机上的队列的部分感兴趣

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-29T21:48:55.580

Spring现在也有一个实现

[http://docs.spring.io/spring-amqp/reference/htmlsingle/#management-template](http://docs.spring.io/spring-amqp/reference/htmlsingle/#management-template)

启用管理插件后，RabbitMQ 服务器会公开一个 REST API 来监控和配置代理。现在提供了 API 的 Java 绑定。通常，您可以直接使用该 API，但提供了一个方便的包装器，以便将熟悉的 Spring AMQP 队列、交换和绑定域对象与 API 一起使用。当直接使用 com.rabbitmq.http.client.Client API（分别为 QueueInfo、ExchangeInfo 和 BindingInfo）时，这些对象可以获得更多信息。RabbitManagementTemplate 类为管理 API 提供操作。与这个问题有关的两个是

```
List<Queue> getQueues();

List<Queue> getQueues(String vhost); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-22T18:48:13.697

对于那些在 2016 年阅读的人 - 看看 Hop ( [https://github.com/rabbitmq/hop](https://github.com/rabbitmq/hop) )，它旨在为 Java 包装 RabbitMQ 管理 API。

# c# - 如何在特定方法中停止代码

> ID：15156852
> 
> 赞同：1
> 
> 时间：2013-03-01T11:40:09.467
> 
> 标签：c#, winforms

我有两种方法，一种方法检查库存，另一种方法调用一系列其他方法。

**检查库存方法。**

```
public void checkStock()
{
    foreach (var listBoxItem in listBox1.Items)
    {
        if (Convert.ToInt32(GetStock(listBoxItem.ToString())) == 0)
        {
            MessageBox.Show(listBoxItem.ToString() + " not in Stock!. Please delete the item before proceeding");

        }
     }
 } 
```

另一种方法是

```
private void SaveAllListItems()
{

    string listItems = string.Empty;
    foreach (var listBoxItem in listBox1.Items)
    {

            listItems += listBoxItem.ToString();

            if (listBox1.Items.IndexOf(listBoxItem) < listBox1.Items.Count - 1)
            {
                listItems += ", ";
            }
    }

    checkStock();

    UpdateStock();

    InsertUser(maskedTextBox1.Text, comboBox1.Text, maskedTextBox2.Text, maskedTextBox3.Text, maskedTextBox4.Text, maskedTextBox5.Text,
                  maskedTextBox6.Text, maskedTextBox7.Text, maskedTextBox8.Text, maskedTextBox9.Text);

    InsertOrder(Convert.ToInt32(GetID(maskedTextBox1.Text)), orderNumber(), listItems, DateTime.Now, maskedTextBox10.Text, get_next_id());        
} 
```

如果第一种方法显示消息框，我想停止代码执行。

什么是快速修复？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:44:13.403

切换 checkstock 的退货类型

```
public bool checkStock()
{
     foreach (var listBoxItem in listBox1.Items)
     {
         if (Convert.ToInt32(GetStock(listBoxItem.ToString())) == 0)
         {
              MessageBox.Show(listBoxItem.ToString() + " not in Stock!. Please delete the item before proceeding");
              return false;
         }
     }
return true;
} 
```

并在您的主代码中执行以下操作：

```
if (!checkStock())
{
     //EXIT
     return;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T11:41:43.320

只需`return;`在必须中断执行的情况下执行 a ，这将退出当前正在运行的方法。

或者，如果您想停止这两种方法的执行，那么您要么抛出异常（如果是这种情况，并且您希望通过异常在代码中处理此类情况），或者让该方法返回一个布尔值，例如，如果一切都很好返回 true，如果出现消息框情况返回 false，然后在 main 方法中你知道你必须打破。像这样：

```
 if (!checkStock()) { return; } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T11:45:58.807

最简单快捷的方法是从`checkStock()`方法中返回一个布尔值：

```
public bool checkStock()
{
    foreach (var listBoxItem in listBox1.Items)
    {
        if (Convert.ToInt32(GetStock(listBoxItem.ToString())) == 0)
        {
            MessageBox.Show(listBoxItem.ToString() + " not in Stock!. Please delete the item before proceeding");
            return false;
        }
     }

    return true;
 } 
```

`checkStock()`然后在调用该`SaveAllListItems`方法后对该值进行操作：

```
if (!checkStock())  
    return; 
```

这将立即退出该`SaveAllListItems`方法，而不再执行其中的代码。

**进一步的建议：**将 from 的访问器更改`checkStock()`为`public`or `protected`-`private`您不太可能需要从类/表单外部访问它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T11:42:03.187

```
return; 
```

将立即停止并返回而不执行其余的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T11:45:24.640

您是否应该使用 MessageBox.Show() 的重载函数之一？

例如： public static MessageBoxResult Show(string messageBoxText, string caption, MessageBoxButton button )

因此循环可能会检查 MessageBoxResult。

# java - Mockito 测试 void 方法抛出异常

> ID：15156857
> 
> 赞同：499
> 
> 时间：2013-03-01T11:40:33.220
> 
> 标签：java, exception, mocking, mockito

我有一个`void`返回类型的方法。它也可以抛出一些异常，所以我想测试那些抛出的异常。所有尝试都失败了，原因相同：

> 类型 Stubber 中的方法 when(T) 不适用于参数 (void)

有什么想法可以让方法抛出指定的异常吗？

```
doThrow(new Exception()).when(mockedObject.methodReturningVoid(...)); 
```

* * *

## 回答 #1

> 赞同：927
> 
> 时间：2013-03-01T11:48:08.623

括号位置不好。

你需要使用：

```
doThrow(new Exception()).when(mockedObject).methodReturningVoid(...);
                                          ^ 
```

并且**不**使用：

```
doThrow(new Exception()).when(mockedObject.methodReturningVoid(...));
                                                                   ^ 
```

这在[文档中进行了解释](http://site.mockito.org/mockito/docs/current/org/mockito/Mockito.html#stubbing_with_exceptions)

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2018-10-25T14:01:09.867

如果你想知道如何使用新的 BDD 风格的 Mockito 来做到这一点：

```
willThrow(new Exception()).given(mockedObject).methodReturningVoid(...)); 
```

为了将来参考，可能需要抛出异常然后什么也不做：

```
willThrow(new Exception()).willDoNothing().given(mockedObject).methodReturningVoid(...)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-07T06:22:34.320

```
You can try something like below:-

 given(class.method()).willAnswer(invocation -> {
          throw new ExceptionClassName();
        });

In my case, I wanted to throw an explicit exception for a try block,my method block was something like below

     public boolean methodName(param) throws SomeException{

        try(FileOutputStream out = new FileOutputStream(param.getOutputFile())) {
          //some implementation
        } catch (IOException ioException) {
          throw new SomeException(ioException.getMessage());
        } catch (SomeException someException) {
          throw new SomeException (someException.getMessage());
        } catch (SomeOtherException someOtherException) {
          throw new SomeException (someOtherException.getMessage());
        }
        return true;
      }

I have covered all the above exceptions for sonar coverage like below

   given(new FileOutputStream(fileInfo.getOutputFile())).willAnswer(invocation -> {
      throw new IOException();
    });
    Assertions.assertThrows(SomeException.class, () ->
    {
      ClassName.methodName(param);
    }); 
```

# datepicker - 有没有办法可以将日期选择器值设置为系统日期

> ID：15156859
> 
> 赞同：1
> 
> 时间：2013-03-01T11:40:34.723
> 
> 标签：datepicker

有没有办法可以将日期选择器值设置为系统日期（通常默认设置日期，即 01/01/0001）

感谢您对此的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T14:45:06.077

您可以使用此语法

```
dateTimePicker1.SelectedDate = DateTime.Now.AddDays(5); 
```

# php - mysqli 绑定参数

> ID：15156862
> 
> 赞同：0
> 
> 时间：2013-03-01T11:40:42.540
> 
> 标签：php, mysqli

假设我们有一个包含字段 'id' 和 'num' 的表 'item'，还有一个像下面这样不起作用的代码。

```
$db = new mysqli('localhost', 'user', 'pass', 'db') ;
if (!$st  =  $db->prepare('select id from item')) die($db->error) ;
if (!$st2 =  $db->prepare('update item set num = 1 where id = ?')) die($db->error) ;

$st->execute() ;
$st->bind_result($id) ;

while ($st->fetch()) {

    $st2->bind_param('i', $id) ;
    $st2->execute() ;
    echo $id.'<br/>' ;
} 
```

它只是打印出类似^ 1 2 3 的内容，但不会更改数据库的id（$st2->affected_rows 等于零）。它出什么问题了？

PS 不是真正的代码，但它完全描述了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:46:51.270

> 它出什么问题了？

由于某种原因，您没有执行错误检查。

```
$st2->execute() or trigger_error($db->error); 
```

会告诉你查询是否有错误。
如果没有 - 检查您检查更新值的方式。

顺便说一句，您的代码的更好版本

```
$dsn = 'mysql:host=localhost;dbname=db;charset=utf8';
$opt = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
);
$pdo = new PDO($dsn,'user','pass', $opt);

$sth = $db->prepare('select id from item');
$sth->execute();
$ids = $sth->fetchAll();

$sth = $db->prepare('update item set num = 1 where id = ?');
foreach ($ids as $row) {
    $sth->execute($row['id']);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T11:43:30.783

根据文档 bind_result 必须在执行之前调用：

```
$st->bind_result($id) ;
$st->execute() ;
while ($st->fetch()) {

    $st2->bind_param('i', $id) ;
    $st2->execute() ;
    echo $id.'<br/>' ;
} 
```

# asp.net - 如何实现 zopfli 以获得更好的 gzip 压缩？

> ID：15156863
> 
> 赞同：5
> 
> 时间：2013-03-01T11:40:43.350
> 
> 标签：asp.net, asp.net-mvc, web-config, compression, gzip

[谷歌表示](http://news.cnet.com/8301-1023_3-57571982-93/google-compression-algorithm-zopfli-may-lead-to-faster-internet/) [Zopfli](https://code.google.com/p/zopfli/)提供了更好的 gzip 功能，并且与所有浏览器兼容（解压缩是相同的，压缩需要更长的时间，但静态文件占用空间会额外减少 5-10%）

所以，我知道您可以为静态文件的 gzip 压缩执行此操作：

```
<system.webServer>
 <httpCompression directory="%SystemDrive%\inetpub\temp\IIS Temporary Compressed Files"
 dynamicCompressionDisableCpuUsage="90"
 dynamicCompressionEnableCpuUsage="80"
maxDiskSpaceUsage="100" minFileSizeForComp="2700"
noCompressionForRange="true"
sendCacheHeaders="false"
staticCompressionDisableCpuUsage="100"
staticCompressionEnableCpuUsage="80"    >
  <scheme name="gzip" dll="%Windir%\system32\inetsrv\gzip.dll" dynamicCompressionLevel="4" 
          staticCompressionLevel="7" />
  <dynamicTypes>
    <add mimeType="text/*" enabled="true" />
    <add mimeType="message/*" enabled="true" />
    <add mimeType="application/javascript" enabled="true" />
    <add mimeType="application/json" enabled="true" />
    <add mimeType="application/xml" enabled="true" />
    <add mimeType="*/*" enabled="false" />
  </dynamicTypes>
  <staticTypes>
    <add mimeType="text/*" enabled="true" />
    <add mimeType="message/*" enabled="true" />
    <add mimeType="application/javascript" enabled="true" />
    <add mimeType="application/json" enabled="true" />
    <add mimeType="application/atom+xml" enabled="true" />
    <add mimeType="application/rss+xml" enabled="true" />
    <add mimeType="application/xaml+xml" enabled="true" />
    <add mimeType="application/xml" enabled="true" />
    <add mimeType="image/svg+xml" enabled="true" />
    <add mimeType="*/*" enabled="false" />
  </staticTypes>

</httpCompression> 
```

...

但是你将如何在 web.config 中实现 Zopfli 而不是标准的 GZip 库？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T04:47:35.743

您可以使用[pigz](http://zlib.net/pigz/)进行静态压缩，这是一个并行 gzip 替代品，包括 11 级的 zopfli 压缩。

zopfli 可能对动态压缩没有好处，因为压缩额外的百分之几的数据比简单地传输额外的百分之几的数据需要更长的时间。

zopfli 适用于那些压缩一次，然后多次发送或存储并解压缩多次的情况。不适用于压缩一次并解压缩一次的情况。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-04T20:06:09.527

Zopfli 压缩很慢，所以我建议在上传静态文件之前先对其进行压缩，最好使用 CDN 和 Zopfli 处理静态文件。

如果您使用的是 .net，请查看我最近在 github 上发布的库

[https://github.com/echovoice/libzopfli-sharp](https://github.com/echovoice/libzopfli-sharp)

我派生了Stream类，用法很简单

```
using (MemoryStream compressStream = new MemoryStream())
using (ZopfliStream compressor = new ZopfliStream(compressStream, ZopfliFormat.ZOPFLI_FORMAT_DEFLATE))
{
    compressor.Write(uncompressed, 0, before);
    compressor.Close();
    compressed = compressStream.ToArray(); // here is the compressed data
} 
```

该库在 Nuget 上以 libzopfli-sharp 的形式提供，[https ://www.nuget.org/packages/libzopfli-sharp](https://www.nuget.org/packages/libzopfli-sharp)

所以可以使用这个类来为 IIS 创建和注册一个过滤器，但这不是一个好主意，而且会使网站性能变差。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-25T09:15:55.640

这个问题是一年多前提出的，但有一些事情发生了变化，这可能会使此页面上的未来登陆者受益：

1.  首先，重要的是要强调**zopfli 创建 gzip 文件**。因此，在 web.config（或 .htaccess）中隐含的分析级别，不会有任何 zopfli 感知。

2.  因为它至少比 DEFLATE/典型的 gzipping 慢一个数量级，所以它不在运行中进行动态压缩，而这正是 IIS 和 Apache 正在做的事情。我们不太可能看到在服务器上实施用于动态压缩的 zopfli 算法。

3.  您可以提前使用 zopfli，在将资产部署到服务器之前对其进行*预压缩。*你现在可以做到这一点的一种方法是通过 node.js 包：[node-zopfli](https://www.npmjs.com/package/node-zopfli)。

现在 Telerik 有了一个[简洁的工具](http://blogs.telerik.com/fiddler/posts/14-07-02/maximize-compression-with-zopfli)，可以告诉您您的资产是否会从 zopfli 中受益，以及受益多少。

zopfli 源代码库在[这里。](https://code.google.com/p/zopfli/source/checkout)

[Pigz](https://github.com/madler/pigz)是一种实现，Krzysztof Kowalczyk 已将[其移植到 Windows](http://blog.kowalczyk.info/software/pigz-for-windows.html)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T21:21:07.380

那还不可能！您应该能够手动预压缩您拥有的任何文件。

目前[，zopfli 不是 dll/库](http://code.google.com/p/zopfli/issues/detail?id=11)，因此您不能使用它来动态压缩内容，除非您能够编写脚本来处理它，但这超出了您的问题范围。

我认为，一旦将 zopfli 转换为库以将其放置在 gzip.dll 的位置或编写包装器来执行此操作，我认为将来有可能。

# mingw32 - 将“-no-undefined”传递给 Libtool LDFLAG

> ID：15156868
> 
> 赞同：3
> 
> 时间：2013-03-01T11:40:57.920
> 
> 标签：mingw32, libtool, mingw-w64, autogen

我正在 Windows 上使用 MSys 和 Mingw 构建一个 dll。项目的源代码只提供了一个 autogen.sh、configure.ac 和 makefile.am。要生成 makefile，请运行 autogen.sh，然后运行 ​​./configure。然后我去手动添加`-no-undefined`到makefile中的LDFLAGS。这并不理想，在生成 makefile 期间，应该正确设置此 LDFLAGS。

我必须在某个地方更改配置文件，以便在生成生成文件时正确设置 LDFLAGS。

我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T03:14:50.867

您应该可以将其设置为`Makefile.am`. 如果您的库声明如下所示：

```
lib_LTLIBRARIES = libfoo.la
libfoo_la_SOURCES = foo.c 
```

你会添加这一行：

```
libfoo_la_LDFLAGS = -no-undefined 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-08-17T18:28:57.823

作为[杰克凯利答案](https://stackoverflow.com/a/15170289/3662499)的替代方案，您可以`AM_LDFLAGS`在适用的 Makefile.am 中定义，例如，

```
AM_LDFLAGS = -no-undefined 
```

将标志传递给所有库规则的链接器（如果需要，以避免重复）。

* * *

请注意，[Autom4ke 手册](https://www.gnu.org/software/automake/manual/html_node/Program-Variables.html)指出，

> 在某些情况下，它不使用，而不是每个可执行文件（或每个库）_LDFLAGS。

这里的措辞不是很清楚，但是，[关于 libtool 标志的部分](https://www.gnu.org/software/automake/manual/html_node/Libtool-Flags.html#Libtool-Flags)指出，

> 如果未定义“library_LIBTOOLFLAGS”，则使用变量 AM_LIBTOOLFLAGS。

Calcote 在他的[*Autotools*](https://nostarch.com/autotools2e)中明确指出，

> 每个产品变量的存在覆盖了 Automake 对每个 makefile 变量的使用，因此您需要将每个 makefile 变量添加到每个产品变量中，以使每个 makefile 变量影响该产品 [... ]。

该声明附有示例，

```
AM_CFLAGS = ... some flags ...
...
prog1_CFLAGS = ... more flags ... $(AM_CFLAGS)
... 
```

# c# - 完成一个抛出异常而不是返回的方法

> ID：15156876
> 
> 赞同：2
> 
> 时间：2013-03-01T11:41:20.607
> 
> 标签：c#, error-handling

所以我有这个方法：

```
public string SaveImage(AppConfig imagePath, string ImageNameFilter)
{
    if (selectedFileName == null)
    {
        return null;//No image is selected - return
    }
    string imgPath = imagePath.ConfigValue.ToString();
    string baseFileName = Path.GetFileNameWithoutExtension(selectedFileName);
    string extension = Path.GetExtension(selectedFileName);

    string temp = Path.GetFileNameWithoutExtension(selectedFileName);

    if (!baseFileName.StartsWith(ImageNameFilter))
    {
        throw new InvalidImageException("The image name must starts with  " + ImageNameFilter);
    }
    else
    {
        for (int i = 1; i < (int.MaxValue - 1); i++)
        {
            if (File.Exists(imgPath + "\\" + baseFileName + extension))
            {
                baseFileName = temp;
            }
            else
            {
                File.Copy(selectedFile, imgPath + "\\" + baseFileName + extension);
                return (baseFileName + extension);
            }
            baseFileName += (i).ToString();
        }
    }

    //throw new InvalidImageException("The Image was not saved");
    return null;//Should never come here - something went wrong
} 
```

问题是该方法在最后等待返回，即使我认为我正在处理所有可能的结果。现在我看到，实际上`for (int i = 1; i < (int.MaxValue - 1); i++)`是一种可能的方法（尽管主要是理论上的方法），方法到达终点，也许有更多的情况会导致在返回任何结果之前到达方法的终点。但是，如果代码到达方法的末尾，编译器会抱怨如果没有`return`，但另一方面，这意味着有问题，我希望能够正确处理这个问题。

我`null`在开始时使用此检查：

```
if (selectedFileName == null)
{
    return null;//No image is selected - return
} 
```

而且因为 ti 绝对可以不选择图像，所以我认为我应该返回`null`结果的地方就是这个。这使得其他结果几乎没有选择 - 当没有执行任何操作并且我到达方法的末尾时。正如我`return null;`再次发布的那样，但我需要更改它。我需要知道这种确切的情况正在发生，我需要做出相应的反应。

我现在可以想到两个选项 - 返回一些我检查的字符串或抛出异常。但我不确定 - 它是否是通过抛出异常而不是使用标准`return`语句来完成方法的正确方法。您认为处理此案的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T11:49:31.097

一般来说，`throw`在方法体的末尾是可以的（如“我们本不应该达到这一点”），但这有点不寻常。

在这种特定情况下，控制流很容易到达方法体的末尾——如果所有`File.Exists`检查都成功，就会发生这种情况。现在我和你“知道”这实际上是不可能的，但在数学上并不是不可能的，这足以让编译器给出错误。

那么在这里应该如何安抚编译器呢？好吧，任何方法都有其运作的*合同。*该方法的约定包括该方法将找到一个未使用的文件名，将源文件复制到那里并将路径返回给调用者。

但是，有些事情超出了您的控制范围，可能导致该方法无法满足此合同，在这种情况下，您必须以某种方式与调用者沟通“我无法按照您的期望做”。这不知何故是通过抛出异常。

# html - 在grails gsp for es中转义引号

> ID：15156880
> 
> 赞同：0
> 
> 时间：2013-03-01T11:41:28.547
> 
> 标签：html, grails, elasticsearch, gsp

大家好，我正试图在我的 gsp 搜索查询中转义双引号，到目前为止，我有：

```
<input id="q" name="q" type="text" class="large" value="${params?.q?.encodeAsHTML()}" .. 
```

但是当我进入我的 webapps 搜索字段并使用类似“abc”的查询时，我的日志文件中出现了大量异常，主要是：

```
 org.apache.lucene.queryParser.ParseException: Cannot parse '("abc) AND recstatus:"public"': Lexical error at line 1, column 30\.  Encountered: <EOF> after : "" 
```

和

```
2013-03-01 11:35:06,874 [New I/O  worker #3] DEBUG search.type  - [Helleyes] [some_index][3], node[BZH5bHO8RX2va-HVpTDEng], [P], s[STARTED]: Failed to execute 
[org.elasticsearch.action.search.SearchRequest@2f6a3595]
org.elasticsearch.transport.RemoteTransportException: [Lasher][inet[/xxx.xxx.x.xxx:9300]][search/phase/query]
Caused by: org.elasticsearch.search.SearchParseException: [some_index][3]: from[0],size[20]: Parse Failure [Failed to parse source [:)
^Eom@0<83>sizeA20<84>queryery_string"abc) AND recstatus:"public"<8f>analyze_wildcard#ields䴩tle]] 
```

等..有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T12:57:32.357

发现问题...

在 config.groovy 中有一个标志集：

```
grails.views.default.codec = "none" 
```

这会覆盖 gsp 页面中的任何代码。

您可以将此标志设置为：

```
grails.views.default.codec = "html" 
```

或覆盖单个 gsp 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-02T08:21:59.567

或者更好地使用 Grails 2.3+ 中的 raw() 方法[http://mrhaki.blogspot.com.es/2013/11/grails-goodness-generating-raw-output.html](http://mrhaki.blogspot.com.es/2013/11/grails-goodness-generating-raw-output.html) ;)

```
<li${raw(' class="active"')}/> 
```

# forms - 至少选择了一个复选框 Symfony2

> ID：15156884
> 
> 赞同：6
> 
> 时间：2013-03-01T11:41:41.697
> 
> 标签：forms, symfony, checkbox

我将以下字段添加到我的表单中：

```
->add('interessi_profilo', 'entity', array( 
                'label' => 'Interessi (Tr)',
                'class' => 'MyProfiloBundle:TipoInteresse',
                'required'  => true,
                'multiple' => true,
                'expanded'  => true,
                'property' => 'tipo',
                'query_builder' => function(\My\ProfiloBundle\Entity\TipoInteresseRepository $er) {
                    return $er->createQueryBuilder('u')
                            ->orderBy('u.id', 'ASC');
                }, 
```

我希望仅在至少选中一个复选框时才发送表单，并且如果可能的话，有一个告诉用户的工具提示：`at least one option must be selected`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-01T12:16:48.810

尝试将[`Count`约束](http://symfony.com/doc/master/reference/constraints/Count.html)放在保存集合的字段上：

```
use Symfony\Component\Validator\Constraints\Count;

class Entity 
{
    /**
     * @Count(min = 1, minMessage = "At least one item must be selected")
     */
    private $collection;

    // ...
} 
```

# java - 使用 Java 线程（生产者/消费者队列）建模的客户端服务器分配

> ID：15156888
> 
> 赞同：0
> 
> 时间：2013-03-01T11:41:58.763
> 
> 标签：java, multithreading, producer-consumer

[我已经按照上一个问题](https://stackoverflow.com/questions/15038901/how-can-i-simulate-a-client-server-application-using-java-threads)中的建议使用 Java 线程和 BlockingQueues（生产者和消费者队列）对客户端服务器应用程序进行了建模。

我所拥有的是服务器有一个`BlockingQueue<Request>`，它会将响应推送到客户端的`BlockingQueue<Response>`. 现在的问题是我如何设置客户端来调用服务器功能。我有客户的`run()`

```
while (true) {
    Response res = responses.take();
    switch (res.function) {
    case "getReservationStatus":
        TreeMap<Integer, Boolean> reservations = (TreeMap<Integer, Boolean>) res.data;
        //System.out.println("getReservationStatus");
        for (Entry<Integer, Boolean> reservation : reservations.entrySet()) {
            //System.out.println(" - " + reservation.getKey() + " \t " + (reservation.getValue() ? "Booked" : "Available"));
        }
        break;
    case "book":
        SimpleEntry<Integer, Boolean> data = (SimpleEntry<Integer, Boolean>) res.data;
        System.out.println(terminalId + ": Booking seat " + data.getKey() + " " + (data.getValue() ? "Successful" : "Unsucessful"));
        break;
    }
} 
```

我如何以某种方式从我的`main()`允许用户控制要发送给客户端的命令？现在我在之前硬编码我的“模拟”`while`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T15:43:00.040

我不确定我是否理解您的问题，但我会尝试给出答案和一些想法：

如果你想为你的程序实现一个用户界面，你必须首先定义你的用户可以用你的程序做什么。一种流行的方法是定义用例，并从中推断出接口。让我们说，我们从这些用例中定义功能。很明显，您不再需要该步骤，因为您已经完成了应用程序的内核。

您的应用程序是关于将请求推送到服务器以对其进行处理并获得响应。这些请求及其参数构成了服务器可以理解的语言。同样，响应是客户可以理解的语言，因此您可以围绕请求语言对 UI 建模。如果该语言足够简单，您可以将其表示为一棵树，这很容易在 UI 中实现。

你基本上有三个选择：

*   文本输入 UII：它应该是最简单的，

*   图形UII（例如swing），

*   网页界面

在所有这三种情况下，界面都可以建模为菜单和子菜单列表，以涵盖请求的所有可能性：每个请求都是您的第一个菜单的条目，然后每个子菜单级别代表所选请求的细化。您可以在这里看到与我之前暗示的一棵树的相似之处。对于图形用户界面或网络用户界面（毕竟它也是图形用户界面），这几乎是微不足道的：你会在网络上找到大量的教程。对于文本输入，您可以只显示一个编号的项目列表（菜单），并要求用户选择一个选项。

一些注意事项：

就目前而言，您的应用程序模拟了多个客户端与一台服务器的交互。我不确定如何在 UI 中使用它：也许您可以使用一组命令来增强语言以生成和管理客户端，以及指示哪个客户端应该发送哪些请求。

如果您喜欢冒险并选择了文本输入，您可以尝试建模一种真实的语言来表示您的查询，并为此实现一个解析器，这也是一个非常广泛的主题，但非常有趣。无论如何，您可能会在以后的学习中涉及到这一点。

如果请求很复杂或输入繁琐，您可以设计一个模板系统，用户可以在其中创建一个请求模板，命名它，然后稍后引用它，而不是再次输入相同的请求。在这里了解我们如何接近一种小型编程语言。

Java 世界中的 Web 应用程序通常基于相当复杂的框架和工具，您可能希望首先从其他选项开始，以了解 UI。

正如我在评论中提到的，对于图形 UI，请尝试使用 Eclipse 或 netbeans 之类的 IDE，它可以让您轻松地以图形方式定义所有内容并将代码挂钩到特定事件（如按下按钮）。

# javascript - 如何去除在谷歌浏览器中点击图片后出现的图片边框？

> ID：15156893
> 
> 赞同：13
> 
> 时间：2013-03-01T11:42:05.887
> 
> 标签：javascript, html, css

实际上我正在使用插件 SpryTabs 来导航菜单。我使用了两个背景图像来激活和停用选项卡。我在悬停时激活一个标签。表示该选项卡突出显示并在单击其他选项卡时停用选定的选项卡。

直到这里一切都很好。但是真正的问题是当用户在悬停后单击选项卡时，边框会显示在图像周围。

这不会发生在 Firefox 中，它只会发生在 Chrome 和 IE 中。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-03-01T12:45:39.620

您可以在 CSS 中为特定元素添加以下代码

```
textarea:focus, input:focus{
    outline: none;
} 
```

对于页面上的所有元素，请在您的 css 中使用此通用代码

```
*:focus {
    outline: none;
} 
```

当图像和输入框周围出现橙色边框时，这对我有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-01T11:48:10.023

试试`outline: none;`图片

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-01T11:55:46.110

曾经有同样的问题，以下样式固定问题：

```
outline: 1px solid transparent; 
```

顺便说一句`outline:none`，由于某种原因，对 chrome 没有影响

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-01T11:49:49.273

使用`outline:none`或`outline:0`

[**在这里**](https://stackoverflow.com/questions/13195081/how-to-remove-the-dotted-line-around-the-clicked-a-element-in-html/13195091#13195091)检查类似的[](https://stackoverflow.com/questions/13195081/how-to-remove-the-dotted-line-around-the-clicked-a-element-in-html/13195091#13195091)

# c# - c#中带有分层窗口的启动画面

> ID：15156899
> 
> 赞同：1
> 
> 时间：2013-03-01T11:42:16.760
> 
> 标签：c#, splash-screen, layered-windows

在多层窗口中，我可以点击工作，但在我的窗口中我的背景图片后面仍然有一些灰色，我该如何删除它？我查看了堆栈溢出和代码项目，但找不到解决方案。

这是我的代码：

```
private Margins marg;
    internal struct Margins 
    {
        public int Left, Right, Top, Bottom;
    }

    public enum GWL
    {
        ExStyle = -20
    }

    public enum WS_EX
    {
        Transparent = 0x20,
        Layered = 0x80000
    }

    public enum LWA
    {
        ColorKey = 0x1,
        Alpha = 0x2
    }

    const Int32 HTCAPTION = 0x02;
    const Int32 WM_NCHITTEST = 0x84;
    const byte AC_SRC_OVER = 0x00;
    const byte AC_SRC_ALPHA = 0x01;

    [DllImport("user32.dll", SetLastError = true)]

    private static extern UInt32 GetWindowLong(IntPtr hWnd, int nIndex);

    [DllImport("user32.dll")]

    static extern int SetWindowLong(IntPtr hWnd, int nIndex, IntPtr dwNewLong);

    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool SetLayeredWindowAttributes(IntPtr hwnd, int crKey, byte bAlpha, LWA dwFlags);

    [DllImport("dwmapi.dll")]
    static extern void DwmExtendFrameIntoClientArea(IntPtr hWnd, ref Margins pMargins);

    public Form1() {
        InitializeComponent();

        //BackColor = Color.Aqua;
        //TransparencyKey = Color.Aqua;

        StartPosition = FormStartPosition.CenterScreen;
        BackgroundImage = new Bitmap(mypicture);
        BackgroundImageLayout = ImageLayout.Stretch;
        this.Size = mypicture.Size;
        this.FormBorderStyle = FormBorderStyle.None;

        TopMost = true;
        Visible = true;

        int initialsytle = (int) GetWindowLong(this.Handle,-20);
        initialsytle = initialsytle |0x80000 | 0x20;
        IntPtr pointer = (IntPtr) initialsytle;
        SetWindowLong(this.Handle, -20, pointer);
        SetLayeredWindowAttributes(this.Handle, 0, 128, LWA.ColorKey);

    }

    protected override void OnPaint(PaintEventArgs e) {
        base.OnPaint(e);

        marg.Left = 0;
        marg.Top = 0;
        marg.Right = this.Width;
        marg.Bottom = this.Height;

        DwmExtendFrameIntoClientArea(this.Handle, ref marg);

    }
} 
```

# jira - 根据用户所属的组对问题使用多个屏幕

> ID：15156906
> 
> 赞同：2
> 
> 时间：2013-03-01T11:42:31.337
> 
> 标签：jira

我的问题是我试图根据用户所属的组隐藏项目中问题的某些字段。一个问题是否可以有多个屏幕，并且根据用户所属的组，他们会显示一个具有不同字段的不同屏幕？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T07:46:26.167

使用[行为插件](https://marketplace.atlassian.com/plugins/com.onresolve.jira.plugin.Behaviours)根据用户权限隐藏/显示字段，例如：

```
FormField someField = getFieldByName("select example")
def user = componentManager.getJiraAuthenticationContext().getLoggedInUser()
if (user == 'John') {
    someField.setHidden(true)
} 
```

或者，根据用户组：

```
FormField someField = getFieldByName("select example")
def user = componentManager.getJiraAuthenticationContext().getLoggedInUser()
def isAdmin = componentManager.getUserUtil().getGroupNamesForUser(user.name).contains("jira-administrators")
if (! isAdmin) {
    someField.setHidden(true)
} 
```

# export - MEF 重组错误

> ID：15156909
> 
> 赞同：0
> 
> 时间：2013-03-01T11:42:44.567
> 
> 标签：export, mef

我得到了异常：1）找到了多个与约束匹配的导出：ContractName CompositionTest.C RequiredTypeIdentity CompositionTest.C

运行程序时

命名空间组合测试 {

```
// [Export]  // Also doesn't work
[Export(typeof(C))]
public class C  
{
    //[ImportAttribute(AllowRecomposition = true)]  // also doesn't work
    [Import(AllowRecomposition = true)]
    public C PropertyC { get; set; }
}

class Program
{
    static void Main(string[] args)
    {
        // Declare a composition container.
        CompositionContainer compositionContainer = new CompositionContainer();

        compositionContainer.ComposeParts( new C() );  

        compositionContainer.ComposeParts( new C() );  // exception here!
    }
} 
```

}

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T13:26:46.370

第一次调用 时`ComposeParts`，会将一个新`C`对象作为导出添加到容器中。然后第二次调用`ComposeParts`，将另一个`C`对象添加为导出。这会给导入带来问题，因为有两个可能的导入部分，MEF 无法做出决定。因此，基数例外。

一种解决方案是将导入更改为：

```
[ImportMany(AllowRecomposition = true)]
public IEnumerable<C> PropertyC { get; set; } 
```

另一种解决方案是在创建容器时实际使用目录。这是使用 MEF 的常用方法。您可以找到的几乎所有示例都遵循这种方法：

```
//Create a catalog. In this case, a catalog based on an already loaded assembly.
var catalog = new AssemblyCatalog(typeof(C).Assembly);
//Create a container using the catalog. Only the parts from that catalog will be used.
var compositionContainer = new CompositionContainer(catalog); 
```

有关目录的更多信息，您应该阅读这篇[文章](http://mef.codeplex.com/wikipage?title=Using%20Catalogs)。

顺便说一句，我以前从未见过这样的 MEF 使用示例。我的回答主要基于我在调试它时所做的观察。

# javascript - 交互式 HTML 网页

> ID：15156915
> 
> 赞同：2
> 
> 时间：2013-03-01T11:42:56.330
> 
> 标签：javascript, html, css, web, interactive

***编辑：****感谢很多关于如何解决这些问题的好例子。我还不能决定接受谁，但我会浏览所有例子，看看我最喜欢哪个。伟大的反馈家伙！=D*

* * *

我通常在 flash 中做这些事情，但这次它必须与 mac、iPad 和所有这些设备兼容。

那么，我需要什么帮助？

我有一张照片，上面有一些“热点”。我希望能够单击任何这些热点以显示一些信息。

这应该是相当基本且容易实现的，但是因为在我不得不问你们之前我从来没有在 html 中这样做过 =)

那么，最好的方法是什么？它必须与任何浏览器和设备兼容，并且不需要非常先进。如果可以为盒子添加效果（滑出、淡入或类似的东西），那么这是一个不错的奖励，但不是我需要的。

任何帮助都会很棒！

**分解：**

我有一个带有一些“热点”的背景图像（在我的示例中为数字 1 和 2）。用户应该能够将鼠标悬停在其中任何一个上或单击它以获取更多信息，如图 #2 所示

![http://i50.tinypic.com/so5nw1.jpg](../Images/cbf740c5226ee42873e84b6cdae639ab.png)

* * *

当您悬停/单击任何这些热点时，就会发生这种情况。文本和图像显示在一个漂亮的小信息框中。

![http://i49.tinypic.com/1449o28.jpg](../Images/7b5d2ba821711798853af4fb311e2b53.png)

* * *

如果用户单击“更多信息”，它将进一步打开以显示更多信息（如果可用）。就像在这个img中一样：

![http://i50.tinypic.com/2502fzq.jpg](../Images/9e747030e1d19730f7c5a783ca1f3081.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T12:07:26.190

这是另一种方法，在我看来远远优于使用地图或过多的 JS。将`<div>`元素放在带有背景图像的元素顶部，让 HTML 和 CSS 为您完成繁重的工作。

![我的例子的图像](../Images/fd58bf744d0e060176626756c26f30cf.png)

[在 JSFiddle 上查看](http://jsfiddle.net/ycSLQ/)

**HTML**

HTML 应该看起来很漂亮，可以理解，我们`<div>`用类创建 s`hotspot`并依赖于某些存在的东西。即`.text`（显示数字）、`.hover-popup`（悬停时显示）和`.click-popup`（在内部`.hover-popup`并在单击时显示）。

```
<div id="hotspot1" class="hotspot">
    <div class="text">1</div>
    <div class="hover-popup">
        I was hovered!
        <div class="click-popup">
            I was clicked on!
        </div>
    </div>
</div>

<div id="hotspot2" class="hotspot">
    <div class="text">2</div>
    <div class="hover-popup">
        I was hovered!
        <div class="click-popup">
            I was clicked on!
        </div>
    </div>
</div> 
```

**CSS**

这是大多数魔法发生的地方，请参阅评论以获得进一步的解释。

```
/* These two position each hotspot */
#hotspot1 {
    left:15%; /* we could use px or position right or bottom also */
    top:20%;
}

#hotspot2 {
    left:35%;
    top:25%;
}

/* General styles on the hotspot */
.hotspot {
    border-radius:50%;
    width:40px;
    height:40px;
    line-height:40px;
    text-align:center;
    background-color:#CCC;
    position:absolute;
}

.hotspot .text {
    width:40px;
    height:40px;
}

/* Show the pointer on hover to signify a click event */
.hotspot .text:hover {
    cursor:pointer;
}

/* hide them by default and bring them to the front */
.hover-popup,
.click-popup {
    display:none;
    z-index:1;
}

/* show when clicked */
.hotspot.clicked .click-popup {
    display:block;
}

/* show and position when clicked */
.hotspot:hover .hover-popup {
    display:block;
    position:absolute;
    left:100%;
    top:0;
    width:300px;
    background-color:#BBB;
    border:1px solid #000;
} 
```

**JavaScript（使用 jQuery）**

不幸的是，您将不得不为点击部分使用一些 JavaScript，因为 CSS 没有“点击”状态（在带有复选框的黑客之外）。我正在使用 jQuery，因为它很容易做我想做的事。

```
$(document).ready(function () {
    $('.hotspot').click(function () {
        $(this).toggleClass('clicked');
    });
}); 
```

**创建箭头**

在[css-tricks](http://css-tricks.com/speech-bubble-arrows-that-inherit-parent-color/)`:before`上，您可以找到使用和/或`:after`伪元素将箭头附加到元素的教程。您甚至可以通过将`:after`元素放在`:before`. 但是，是的，有很多关于如何做到这一点的资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T12:14:31.543

我不认为这里真的需要 Javascript 方法。[**我在JSBin**](http://jsbin.com/ahatir/1)上为你创建了一个纯 CSS 的小模型。

基本上重点是你把图片放在一个*相对定位`div`*的地方，然后绝对定位里面的热点相同`div`。在热点`div`s 中，您将拥有更多信息元素，仅显示`:hover`其父项。

这使它变得简单，并且更易于访问。

## 更新：从两侧平均裁剪图像

如果您想保持图像居中并且仍然不使用任何 javascript，您可以将所需的图像设置为`background-image`容器的 a，并将其`background-position`参数设置为`center center`.

您必须确保将其`width`设置`div`为图像的宽度，并将其设置`max-width`为 100%，以便当窗口的大小调整到低于图像宽度时，它会保持在中心。

现在，我在这里遇到的一个问题是如何使热点相对于图像保持居中。我是这样解决的：

`div`我为具有这些特征的热点创建了一个包装器：

```
margin:   0 auto;
position: relative;
width:    0px; 
```

这基本上可以确保包装器`div`找到我们图像的中心。**然后，您将相对于图像的顶部中心位置**定位热点，而不是将**左上角**作为起点。

然后你就有了你正在寻找的东西。

[**工作演示**](http://jsbin.com/ahatir/5)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:58:25.973

您应该能够在地图区域中使用 onclick 或 OnMouseOver 事件（将 href 定义为“”）。

使用 OnMouseOver 的示例在这里：[http ://www.omegagrafix.com/mouseover/mousimap.html](http://www.omegagrafix.com/mouseover/mousimap.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:01:14.557

在 html 中为该图像提供一个类（例如：imgclass）。在 javascript（使用 jquery）中，以 html 格式构建悬停框并将其绑定到该图像的“鼠标悬停”事件。

例如：

```
 function bindhtmltoimage() {
    myimg = $('body').find('.imgclass');
    divSlot.each(function (index) {
        $(this).bind('mouseover', function () {
            try {
                //position the hover box on image. you can customize the y and x axis to place it left or right.
                var x = $(this).offset().left;
                var y = $(this).offset().top;
                var position = $(window).height() - ($("#divHover").height() + y);
                var widthposition = $(window).width() - ($("#divHover").width() + x);
                if (position < 0 || widthposition < 0) {
                    if (position < 0) {
                        $("#divHover").css({
                            position: 'absolute',
                            left: x + 20,
                            top: y - $("#divHover").height() - 20
                        });
                    }
                    if (widthposition < 0) {
                        $("#divHover").css({
                            position: 'absolute',
                            left: x - $("#divHover").width(),
                            top: y + 20
                        });
                    }
                }

                //build your html string for that hover box and apply to it.
                $('#divHover').html("your Html content for that box goes here");
                $('#divHover').show();

                //if you want the box dynamically generated. create the html content and append to the dom.
            }
            catch (e) {
                alert(e)
            }
        });
    });
} 
```

它可以在桌面和移动设备上正常工作。如果您在触摸设备中遇到任何问题，请将功能绑定到单击事件而不是“鼠标悬停”。

此外，对于地图方法，我强烈推荐 SVG 而不是图像。

# c# - 非托管 C++ 应用程序中性能更好的 WPF 对话框

> ID：15156918
> 
> 赞同：1
> 
> 时间：2013-03-01T11:43:06.103
> 
> 标签：c#, c++, wpf, performance

我有一个用本机 c++ (MFC) 编写的应用程序。此应用程序中的一些对话框是用 C# 和 WPF 编写的。当我第一次启动对话框时（冷启动） - 这需要很长时间，但另一次运行已经很快（热启动）。是否可以通过在查看初始屏幕时加载适当的程序集来提高性能，而不是在第一次启动对话框时？如果真是这样，那么是以哪种方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T14:04:24.303

在安装软件期间使用 ngen.exe 处理托管程序集。

[本机图像生成器](http://msdn.microsoft.com/en-us/library/6t9t5wcf%28v=vs.80%29.aspx)

# c++ - 如何使用嵌套枚举实现代码重用

> ID：15156920
> 
> 赞同：1
> 
> 时间：2013-03-01T11:43:09.090
> 
> 标签：c++, inheritance, c++11, enums, code-reuse

我正在尝试构建一个类，使其子类具有 C++11`enum class`属性，并具有关联的 setter/getter：

```
class Base { 
  public:
    enum class MyEnum {
        A,
        B
    } my_enum;

    Base() : my_enum(MyEnum::A) {}

    MyEnum get() { return my_enum; }
    void set(const MyEnum &ME) { my_enum = ME; } 
};

class Derived : public Base { 
  public:
    Derived(): Base() {
        my_enum = MyEnum::B;
    }
};

int main(int argc, char *argv[])
{
    Derived Deriv;

    // No problems!
    Deriv.get() == Derived::MyEnum::B;  

    return 0;
} 
```

到目前为止，一切都很好！

但是，我希望派生类能够重新定义`MyEnum`枚举类，而不必一直重新实现 setter/getter/attribute：

```
// Base as before

class Derived : public Base {
  public:

    enum class MyEnum {
        C,
        D 
    }; // intention: to override Base's "my_enum" attribute

    Derived(): Base() {
        my_enum = MyEnum::C;  
        // ERROR: cannot convert 'Derived::MyEnum' to 'Base::MyEnum' 
    }
};

int main(int argc, char *argv[])
{
    Derived Deriv;

    // ERROR: no match for 'operator==' for types 'Base::MyEnum' and 'Derived::MyEnum'
    Deriv.get() == Derived::MyEnum::C;  

    return 0;
} 
```

我了解问题所在；我只是在寻找能够在这种情况下重用代码的最干净的方法。

最好仅通过继承（或者更确切地说，该功能应该仅通过从 Base() 派生的行为对 Derived() 类可用）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:06:24.523

编译器是对的：虽然枚举`Base::MyEnum`和`Derived::MyEnum`定义在通过继承连接的类中，但枚举本身不被认为是相关的。它们只是碰巧有相同的*非限定*名称，这对编译器没有任何意义：就编译器而言，这两种枚举类型是不相关的。

如果您考虑枚举在底层实现的方式，这是有道理的：尽管是强类型的，但枚举仍然是小的整数常量。由于两者不相关，`Base::MyEnum::A`因此具有与 相同的值`Derived::MyEnum::C`，并且在运行时不会有任何内容可以让您区分这两个值。

除了将所有枚举值转储到`enum`基类中（这会扼杀在您自己的库之外扩展的机会），您几乎无能为力：[C++ 枚举不支持继承](https://stackoverflow.com/q/644629/335858)，而且通常不是很灵活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:29:46.617

您可以制作`Base`一个模板，由枚举类型参数化，并使用一个特征类来提供一个可以由派生类型专门化的“默认”枚举类型。

```
template<typename T>
struct MyEnumTraits
{
    enum class type {
        A,
        B
    };

    static const type default_value = type::A;
};

template<typename T = void>
class Base { 
  public:

    typedef typename MyEnumTraits<T>::type MyEnum;
    MyEnum my_enum;

    Base() : my_enum(MyEnumTraits<T>::default_value) {}

    MyEnum get() { return my_enum; }
    void set(const MyEnum &ME) { my_enum = ME; } 
};

class Derived;

template<>
struct MyEnumTraits<Derived>
{
    enum class type {
        C,
        D 
    };
    static const type default_value = type::C;
};

class Derived : public Base<Derived> {
    // ... 
```

但是现在不同的派生类型会有不同的基类，这可能不是你想要的。您可以通过保留非模板`Base`并将 getter 和 setter 移动到从中派生的中间类模板中，`Base`然后派生类型从中派生来解决该问题。

```
class Base { ... };

template<typename T = void> class GetterSetterImpl : public Base { ... };

class Derived : public GetterSetterImpl<Derived> { ... }; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T12:13:26.413

这是个坏主意，而且行不通。

*   **语言级别**你不能用 C++ 重新定义东西。您只能（不完全）将内容隐藏在具有相同名称的新的、不相关的内容后面。您还可以通过给它一个新的实现来覆盖一个虚函数，同时保留它的签名。
*   **设计级别**您的基类定义了派生类必须遵守的契约。如果`Base::get()`返回 a `MyEnum {A, B}`，那么每个派生类都必须有一个`get()`返回 a 的 a `MyEnum {A, B}`。这就是继承的全部意义（而不是代码重用，或者无论如何不仅仅是代码重用）。

您可以通过将您的类变成模板而不是依赖继承来实现代码重用。

# php - codeigniter 表单验证不起作用

> ID：15156929
> 
> 赞同：0
> 
> 时间：2013-03-01T11:43:45.423
> 
> 标签：php, forms, codeigniter

我正在研究一种小型表格，它将数据汇总到一个表中，再到一个数据库中，这没什么了不起的。我正在尝试添加一些验证规则，但它们不起作用我仍然是 php 和 codeigniter 的初学者，所以无法弄清楚为什么有人可以查看我的代码并提前帮助我解决 tnx。

**看法**

```
<html>
    <head>
    </head> 
 <body>
  <?php echo validation_errors(); ?>
   <?php echo form_open('http://localhost/Surva/index.php/info/credentials/'); ?>
     <ul id="info">  
       <li><label for='name'>Name:</label><?php echo form_input('name')?>
      </li>

       <li><label for='second_name'>Second Name:<label> <?php echo form_input('second_name');?>
     </li>

       <li><label fro='phpne'>Phone:</label> <?php echo form_input('phone');?></li>

       <li><label for='email'>Email: </label><?php echo form_input('email');?>
       </li>

       <li><?php echo form_submit('submit', 'Start survay!!' );?></li>
     </ul>  

 <?php echo form_close();?>
  </body>
</html> 
```

**控制器**

```
<?php

class Info extends CI_Controller{

    function index(){

      $this->load->view('info_view');   
    }

    function credentials()
    {   
     $data = array(
         'name' => $this->input->post('name'),
         'second_name' => $this->input->post('second_name'),
         'phone' => $this->input->post('phone'),
         'email' => $this->input->post('email'),  
         );

          $this->info_model->add_record($data);
    }    

    function validation(){

        $this->load->library('form_validation');
        $this->form_validation->set_rules('name', 'Name', 'required|alpha|xss_clean');
        $this->from_validation->set_rules('second_name', 'required|alpha|xss_clean');
        $this->form_validation->set_rules('email', 'Email', 'required|valid_email');

        if ($this->form_validation->run() == FALSE){

            $this->load->view('info_view');

        }else{
            redirect('survaycontroller/index');
        }

    } 

}

?> 
```

我在那里使用了codeigniter用户指南进行验证，解释它看起来很容易整个结构取自指南我很难理解问题是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:40:17.600

您可以使用一个控制器轻松完成。我测试它并且它有效！

**类名 test.php**

**控制器名称索引**

```
function index(){

        $this->load->library('form_validation');

        $data['name']           = $this->input->post('name');
        $data['second_name'] = $this->input->post('second_name');
        $data['phone']          = $this->input->post('phone');
        $data['email']              = $this->input->post('email');

        if($this->input->post('submit')) {

            $this->form_validation->set_rules('name', 'Name', 'required|alpha|xss_clean');
            $this->form_validation->set_rules('second_name', 'Second Name', 'required|alpha|xss_clean');
            $this->form_validation->set_rules('email', 'Email', 'required|valid_email');

            if ($this->form_validation->run()){

                $this->info_model->add_record($data);

            }

        }
        $this->load->view('test');
    } 
```

**查看：test.php**

```
<html>
    <head>
    </head> 
 <body>
  <?php echo validation_errors(); ?>
   <?php echo form_open('test/index'); ?>
     <ul id="info">  
       <li><label for='name'>Name:</label><?php echo form_input('name')?>
      </li>

       <li><label for='second_name'>Second Name:<label> <?php echo form_input('second_name');?>
     </li>

       <li><label fro='phpne'>Phone:</label> <?php echo form_input('phone');?></li>

       <li><label for='email'>Email: </label><?php echo form_input('email');?>
       </li>

       <li><?php echo form_submit('submit', 'Start survay!!' );?></li>
     </ul>  

 <?php echo form_close();?>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:17:18.677

您没有将表单发送到方法验证

**看法**

```
<html>
    <head>
    </head> 
 <body>
  <?php echo validation_errors();
   //you must redirect the form to the right method, in this case your method is "validation" on the controller is "info"
   //another thing, you don't need to put all the url, just put the controller and the method, this way when you migrate your website to a server you don't have to worry changing the url
   echo form_open('info/validation'); ?>
     <ul id="info">  
       <li><label for='name'>Name:</label><?php echo form_input('name')?>
      </li>

       <li><label for='second_name'>Second Name:<label> <?php echo form_input('second_name');?>
     </li>

       <li><label fro='phpne'>Phone:</label> <?php echo form_input('phone');?></li>

       <li><label for='email'>Email: </label><?php echo form_input('email');?>
       </li>

       <li><?php echo form_submit('submit', 'Start survay!!' );?></li>
     </ul>  

 <?php echo form_close();?>
  </body>
</html> 
```

控制器

```
<?php

class Info extends CI_Controller{
    //I've added the public before function
    public function index(){

      $this->load->view('info_view');   
    }
    //In this one I've added private, Why? Because you don't peopple to use this method if they go to http://(yourdomain). This way you can only use this function inside this controller
    private function credentials()
    {   
     $data = array(
         'name' => $this->input->post('name'),
         'second_name' => $this->input->post('second_name'),
         'phone' => $this->input->post('phone'),
         'email' => $this->input->post('email'),  
         );

          $this->info_model->add_record($data);
    }    
    //this one is also as public, and it's the one who we'll receive the post request from your form
    public function validation(){

        $this->load->library('form_validation');
        $this->form_validation->set_rules('name', 'Name', 'required|alpha|xss_clean');
        $this->from_validation->set_rules('second_name', 'required|alpha|xss_clean');
        $this->form_validation->set_rules('email', 'Email', 'required|valid_email');

        if ($this->form_validation->run() == FALSE){

            $this->load->view('info_view');

        }else{
            //if the form is valid then you call the private function credentials and save the data to your database
            $this->credentials();
            redirect('survaycontroller/index');
        }

    } 

}

?> 
```

检查我对您的代码所做的更改，如果您需要更多解释或帮助，欢迎您

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T11:46:51.957

第二条规则中缺少第二个参数

```
$this->from_validation->set_rules('second_name', 'Second Name', 'required|alpha|xss_clean'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:16:24.483

看下面的例子，你必须在你的 credentials() 函数中检查 $this->form_validation->run() 。

```
public function add_category() 
{
    $this->load->library('form_validation');

    $data = array();

    if ($_SERVER['REQUEST_METHOD'] == 'POST')
    {
        //Validation rules
        $this->form_validation->set_rules('name', 'Name', 'trim|required');;
        $this->form_validation->set_rules('description', 'Description', 'trim|required');   
        $this->form_validation->set_rules('position', 'Position', 'trim|numeric');      

        $artist_category = $this->input->post('artist_category', TRUE);
        $data['artist_category'] = $artist_category;

        if($this->form_validation->run() === FALSE)
        {
            $this->template->write('title', 'Category : Add Category');
            $this->template->write_view('content', 'category/add_category',$data);
            $this->template->render();
        }
        else
        {
            $name = trim($this->input->post('name',TRUE));
            $description = trim($this->input->post('description',TRUE));
            $position = trim($this->input->post('position',TRUE));
            $colour = trim($this->input->post('colour',TRUE));

            $language_id = trim($this->input->post('language_id',TRUE));

            //Add record to categories table
            $category_id = $this->Category_model->insert_category($name,$description,$position,$colour,$date_added);

            $this->session->set_flashdata('success_msg', 'Category added successfully.');

             //Redirect to manage categories
             redirect('category');
         }              

    }
    else
    {          
        $this->template->write('title', 'Category : Add Category');
        $this->template->write_view('content', 'category/add_category');
        $this->template->render();
    }
} 
```

# iphone - 调整 UiPopoverController 的大小

> ID：15156934
> 
> 赞同：2
> 
> 时间：2013-03-01T11:43:54.080
> 
> 标签：iphone, objective-c, ipad, uipopovercontroller

我创建了一个`UIPopoverController`. 在这里，我可以在内容视图为`UITableView`. 当弹出窗口可见时，我必须按下按钮并重新加载表格视图。

之后，tableview 可能会增加它的高度。我想在执行重新加载时调整弹出框的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T09:10:53.980

在您的 ViewController.m 文件中，添加以下方法：

```
- (void)viewWillLayoutSubviews{
self.contentSizeForViewInPopover = CGSizeMake(tableInPopover.frame.size.width,tableInPopover.frame.size.height) ;} 
```

希望这可以帮助

# json - 如何将匿名类转换为 json？

> ID：15156938
> 
> 赞同：1
> 
> 时间：2013-03-01T11:44:18.387
> 
> 标签：json, scala, playframework, playframework-2.1

我有以下代码：

```
def test = Action {
  val Anon = new {
    val foo = "foo"
    val bar = "bar"
  }

  Ok(Json.toJson(Anon))
} 
```

我得到这个编译错误：

> 找不到类型 Object{val foo: String; 的 Json 反序列化器 验证栏：字符串}。尝试为此类型实现隐式写入或格式。

这个问题的快速解决方法是什么？我已经在这里找到了另一个与此错误相关的问题，但也许它更具体/更复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T03:44:53.730

据我所知，唯一的方法是引入结构类型：

```
 type AnonType = {
    def foo:String
    def bar:String
  } 
```

然后你可以做

```
implicit val writeAnon1 = 
  ((__ \ "foo").write[String] and
   (__ \ "bar").write[String])
   {anon:AnonType => (anon.foo, anon.bar)} 
```

或者

```
implicit val writeAnon2 = new Writes[AnonType] {
  def writes(o:AnonType) =
    Json toJson Map(
      "foo" -> o.foo,
      "bar" -> o.bar)
} 
```

# javascript - indexOf 在 IE 8/7 中不起作用

> ID：15156939
> 
> 赞同：0
> 
> 时间：2013-03-01T11:44:18.683
> 
> 标签：javascript, jquery, ajax, internet-explorer-8, indexof

我正在尝试运行适用于 IE9、Chrome、FF、Opera 的 jquery/ajax 调用但是，它在 IE8 和 UE7 中失败

编码：

```
 $.ajax({url:plink,
      success: function(result) {
        ppriser = result.split("**")[1];
        plabels = result.split("**")[2];
        pgrupper = result.split("**")[3];
        priser = ppriser.split("!#");
        labels = plabels.split("!#");
        grupper = pgrupper.split("!#");
        $("td .pricetag").each( function() {
          var slutpris = "999999";
          var slutlabel = "";
          for(i=1;i<priser.length;i++) {
            str = String($(this).attr('group')); 
            grp = String(grupper[i]);
            pos = grp.indexOf(str);
            if(grp==str || pos>=0) {
              j=parseInt(priser[i]);
              k=parseInt(slutpris);
              if(j!=0 && j<k) {
                slutpris = priser[i];
                slutlabel = labels[i];
              }
              if(slutlabel=="") { slutlabel = "fra:"; }
              if(slutpris!="999999") { 
                $(this).html(slutpris);
                $(this).prev('td').html(slutlabel);
              }
              if(slutpris=="999999") {
                $(this).css('display','none');
                $(this).closest('.pris').css('display','none');
              }
            }
          }
        });
      }}); 
```

我尝试了各种组合：缓存：假，类型：“POST”，类型：“GET”，数据：“HTML”，数据类型：“HTML”，超时：10000，

链接 plink 的示例：

```
Default.aspx?ID=148&fb=true&mode=-1&groupid=1210405@@SHOP5,1210103@@SHOP5, 
```

jquery链接：

```
<script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
```

ajax 脚本链接放在页面末尾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:37:32.780

我试图在几个wasy中转换为字符串（因为IE 8/7不喜欢数组对象上的indexOf）但无济于事。此后，我找到了这个解决方案。

```
 if (!Array.prototype.indexOf) {
    Array.prototype.indexOf = function(obj, start) {
      for (var i = (start || 0), j = this.length; i < j; i++) {
        if (this[i] === obj) { return i; }
      }
      return -1;
    }
  } 
```

我测试是否支持 indexOf - 如果不支持，则创建函数。

# asp.net-mvc - 从具有相同视图（.cshtml）的视图中读取 MVC 标签值

> ID：15156941
> 
> 赞同：0
> 
> 时间：2013-03-01T11:44:22.410
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我的 MVC4 的 .cshtml 文件中有一个标签：

```
Name : @Html.Label("A Developer", new {id="lblName"})<br /> 
```

我想在同一视图中使用此标签值：

```
@Html.ActionLink("Get Dev Details", "GetDevDetailsByName", "Dev", new { devName = lblName}) 
```

上面的动作链接显然是不正确的。

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-16T02:37:34.037

使用 jQuery

```
$('.btnSubmit').on('click', function(){
    window.location = "@Html.ActionLink("Get Dev Details", "GetDevDetailsByName", "Dev", new { devName = "----"})".replace("----", $('#lblName').val());
}); 
```

# javascript - 使用 jquery 从当前显示的图像中加载 EXIF 数据

> ID：15156943
> 
> 赞同：1
> 
> 时间：2013-03-01T11:44:24.400
> 
> 标签：javascript, jquery, exif, galleria

我现在的情况：

我正在开发一个网站来发布我的照片。我正在使用 twitter bootstrap、jquery 和[Galleria.io](http://www.galleria.io)

现在我想展示我制作的照片中的一些 exif 数据。因此我想使用这个 jquery 插件：http: [//blog.nihilogic.dk/2008/05/jquery-exif-data-plugin.html](http://blog.nihilogic.dk/2008/05/jquery-exif-data-plugin.html)

我已经测试了旁边给出的例子。他们工作。下面的代码没有。每次加载图像时，它都会返回一个空警报。所以至少这是有效的。这些是我在 javascript 中的第一步，所以我很高兴得到每一个帮助。

每次更改图像时都应更新 exif 数据。所有图像都位于同一服务器上。

```
Galleria.ready(function(options) {
    // this = the gallery instance
    // options = the gallery options
        this.bind('image', function(e) {
            imgHandle = $(e.imageTarget)
            imgHandle.load(function() {
                $(this).exifLoad(function() {
                    alert($(this).exifPretty());
                });
            });
        });
    });

    $("#img2").load(function() {
        $(this).exifLoad(function() {
            alert($(this).exifPretty());
        });
    }); 
```

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:26:36.453

好的，我和一个朋友想通了：

我的代码现在看起来像这样：

```
Galleria.ready(function(options) {
    // this = the gallery instance
    // options = the gallery options
    // will be called after the image is loaded
        this.bind('image', function(e) { 
            imgHandle = e.imageTarget;
            alert('Image loaded');
            //will be called if on same server
            $(imgHandle).exifLoad(function() {
                alert('Exif loaded');
                alert($(imgHandle).exifPretty());
                //do something here....
                });
            });
        });
    }); 
```

它仅适用于服务器上的图像，但不适用于远程服务器。

# c# - 提取引号之间的单词并将值存储在变量中

> ID：15156944
> 
> 赞同：1
> 
> 时间：2013-03-01T11:44:28.270
> 
> 标签：c#, regex, linq

我需要提取引号之间的单词并将值存储在变量中。

我的实际字符串将是

> m:'液体' n:'4'

从上面的字符串。我需要提取

这个词`liquid`&`4`

并像这样存储

```
var m = "liquid";
var n = "4"; 
```

如何在 C# 的正则表达式中执行此操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:46:05.193

好吧，如果格式总是那样，那么您可以拆分`:`并知道您将拥有一个字符串数组，该数组以您想要的元素开头，在`'`字符之间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:49:06.643

当你用“linq”标记你的问题时，你可以试试这个：

```
var str = @"m:'liquid' n:'4'";
var r = str.Split(new [] {'\''}).Where((s, i) => i % 2 == 1).ToArray();
var m = r[0];
var n = r[1]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T11:58:12.747

这是一个通用的解决方案

```
public Dictionary<string, string> GetValues(string input)
{
    var results = new Dictionary<string, string>();
    var pairs = input.Split(" ");
    foreach(var pair in pairs)
    {
        var parts = pair.Split(":");
        results.Add(parts[0], parts[1].Trim("'"));
    }
    return results;
}

var str = "m:'liquid' n:'4'";
var values = GetValues(str);
var m = values["m"];
var n = values["n"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T12:09:02.453

```
 var s = "m:'liquid' n:'4'";
   var ss = s.Split(new char[]{' ', ':'}, StringSplitOptions.RemoveEmptyEntries); 
```

您将在 ss 中找到这些对：{"m", "'liquid'", "n", "'4'"}。如果有空值（''），它会起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-01T11:52:03.687

```
Regex regex = new Regex("(?<=')\\w+(?<!')");
var matches = regex.Matches("m:'liquid' n:'4'"); 
```

将匹配任何以 ' 开头并后跟 ' 的单词。

```
var m = matches[0];
var n = matches[1]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-01T12:47:14.893

您实际上可以使用 . 字符串[索引](http://www.dotnetperls.com/indexof)

```
var x = "m:'liquid' n:'4'";
var split = x.Split(' ');
var indexm0 = split[0].IndexOf("'");
var indexm1 = split[0].LastIndexOf("'");

var m = split[0].Substring(indexm0, indexm1 - 1);

var indexn0 = split[1].IndexOf("'");
var indexn1 = split[1].LastIndexOf("'");
var n = split[1].Substring(indexn0, indexn1 - 1); 
```

# python - 是否可以使用 pycassa 对 cassandra 中的分布式计数器数据进行切片和切块？

> ID：15156945
> 
> 赞同：0
> 
> 时间：2013-03-01T11:44:32.707
> 
> 标签：python, cassandra, pycassa

我阅读并搜索了很多内容，但找不到根据条件对计数器数据进行切片的方法。Cassandra有办法做到这一点吗？如果是，请轻松帮助我。例如：如果我使用计数器来存储总页面浏览量，有什么方法可以获取特定页面 url 的页面浏览量或获取特定日期的所有页面浏览量？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T14:45:16.960

我正在使用具有您所要求的两种功能的系统。我们使用的是 HBase（不是 Cassandra），我们在每个计数器的键中写入 URL + 日期。

然后您可以轻松获得您要查找的两个报告。

要获取一个 URL 的所有页面浏览量，请扫描以 开头的键，然后添加您在该扫描中找到的计数器值。

要获取一个 URL 每天的综合浏览量，请扫描以 + 日期开头的键。

# android - 为什么 Android CDD 建议不要使用 CPU 温度传感器以外的温度传感器

> ID：15156947
> 
> 赞同：2
> 
> 时间：2013-03-01T11:44:42.723
> 
> 标签：android, android-compatibility, cts

Android CDD 状态如下

* * *

> 7.3.7\. 温度计 设备实现可以但不应包含温度计（即温度传感器）。如果设备实现确实包含温度计，则它必须测量设备 CPU 的温度。它不得测量任何其他温度。（请注意，此传感器类型在 Android 4.2 API 中已弃用。）

* * *

它说您只能使用温度传感器来测量 CPU 温度。谁能告诉我为什么android不想要环境温度传感器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:18:28.687

Android 不要求设备制造商在其 Android 设备中构建任何特定类型的传感器，因此设备可以具有广泛的传感器配置。

大多数手机只包含 cpu 温度测量传感器 Sensor.TYPE_TEMPERATURE （这不再给出准确的读数）它被替换为 .TYPE_AMBIENT_TEMPERATURE 正因为如此，在大多数手机中没有一种准确的方法来测量不同硬件的温度；因此，几乎所有安卓手机都应该能够产生的 CPU 温度限制

# javascript - Javascript 工具栏插件 CSS 继承

> ID：15156951
> 
> 赞同：1
> 
> 时间：2013-03-01T11:44:56.800
> 
> 标签：javascript, html, css

我已经构建了一个小的 javascript 插件，可以通过单击浏览器工具栏上的相关按钮来访问它。

在某些站点上它运行良好，但在其他站点上它看起来很糟糕，主要是因为它从父页面获取 CSS 样式。

在构建工具栏插件时，我可以做些什么/遵循规则，以防止我的工具从浏览器页面继承样式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:51:32.823

起作用的现象是**css 继承**。您添加到页面的所有内容都将根据该页面的 css 设置样式。您需要使用类来使您添加的元素的 css 比从页面自己的 css 应用到它的其他规则更具体。

您的新元素的 CSS 规则需要比适用于它的其他规则更**具体。**有点像口语，具体意味着更详细地指代某事。

规则1

> 表 tbody td span{ 字体粗细：粗体；}

规则 2

> 表跨度{字体粗细：正常；}

在这种情况下，规则 1 将“胜过”规则 2，因为它更**具体**。

如需快速解释，请查看 htmldog's [page on css specificty](http://www.htmldog.com/guides/cssadvanced/specificity/)

您想清除任何进入的样式的 css，然后再次添加它们。假设它全部在一个带有 class="jibber-nav" 的 div 中

你可以这样做：

```
.jibber-nav,
.jibber-nav ul,
.jibber-nav li,
.jibber-nav a{
  background: none;
  color: #000;
  font-family: sans-serif;
  padding: 0;
  margin: 0;
}

/**** then add style you want *******/

.jibber-nav li{
  border: 2px solid #123456;
  border: radius: 4px;
}

.jibber-nav a{
  color: #097654;
} 
```

[如果所有其他方法都失败了，您可以将!important](https://developer.mozilla.org/en-US/docs/CSS/Specificity#The_!important_exception)附加到您的所有 CSS 规则中，但这会使您成为一个坏人并且不值得信任。实际上，它只会增加使您的代码难以使用的风险，但这是同一回事。

# php - php表单不发送电子邮件

> ID：15156960
> 
> 赞同：0
> 
> 时间：2013-03-01T11:45:33.533
> 
> 标签：php, forms, email

我正在使用 php 脚本向给定地址发送电子邮件，但是没有发送电子邮件，即使脚本正在将用户发送到感谢页面。它在一个阶段工作，但随后莫名其妙地停止了。

任何帮助表示赞赏:)

```
<?php

$to = "emailaddress@gmail.com \r\n";//<== update the email address
$headers = "From: $email_from \r\n";

$name = $_POST['name'];
$visitor_email = $_POST['email'];
$message = $_POST['message'];

$email_from = 'email@mydomain.com';//<== update the email address
$email_subject = "Contact via the website";
$email_body = "You have received a new message from $name.\n\n".
"Here is the message:\n $message\n\n\n".

$headers .= "Reply-To: $visitor_email \r\n";
//Send the email!
mail($to,$email_subject,$email_body,$headers);
//done. redirect to thank-you page.
header('Location: http://domain.com/thank-you/');

// Function to validate against any email injection attempts
function IsInjected($str)
{
 $injections = array('(\n+)',
           '(\r+)',
          '(\t+)',
          '(%0A+)',
          '(%0D+)',
          '(%08+)',
          '(%09+)'
          );
$inject = join('|', $injections);
$inject = "/$inject/i";
if(preg_match($inject,$str))
{
return true;
}
else
{
return false;
}
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:02:09.547

```
$headers = "From: $email_from \r\n"; 
```

*   `$email_from`还没有定义，也许你这里有错误？
*   不要忘记启用`error_reporting`以`E_ALL`查看所有错误，还要检查服务器上的日志以查看问题所在，也许邮件无法通过 SMTP 服务器发送或其他...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:56:29.190

检查您是否收到任何错误。如果邮件发送成功，邮件函数返回 true，否则返回 false。

# jquery - JQuery Ajax 在 Safari 中发布丢失的 Cookie

> ID：15156961
> 
> 赞同：0
> 
> 时间：2013-03-01T11:45:37.067
> 
> 标签：jquery, ajax, safari

我正在维护一个经典的 asp 站点，每当我像下面的代码一样进行 JQuery/Ajax 调用时，我的 ASP 会话就会丢失并且我会退出该站点。

```
$().ready(function () {

$('#DeleteItem').click(function () {

    $.ajax({
        type: "POST",
        dataType: 'json',
        url: '/delete.asp?PartyId=550',
            success: function (response) {
                if(response.type == 'delete') {
                    alert('delete went ok');
                }
            },
            error: function (event, request, settings) {
               // alert('RESP:' + response + '  REQ: ' + request + ' SETTINGS' + settings);
            },
        });

    return false;
}); 
```

});

“delete.asp”包含一个非常基本的检查，以确保登录会话仍然有效

```
If Session("UserID") = "" Then Response.Redirect "/login/" 
```

通过 jQuery/Ajax 访问页面时 UserID 会话丢失，但在直接访问页面时可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T11:45:49.177

在 ASP.NET（或就此而言，几乎每个框架）跟踪会话有两种方式。第一个选项是 cookie，通常的后备选项是 URL 重写。

默认情况下，AJAX 调用不会重新发送 cookie 或 url 参数，因此在这两种情况下您都必须主动。

处理第一个选项（cookies被激活）：

在 javascript 中读取 cookie 的方法如下：（此代码的来源是[w3schools](http://www.w3schools.com/js/js_cookies.asp)，为什么要重新发明轮子？）

```
function getCookie(c_name)
{
var i,x,y,ARRcookies=document.cookie.split(";");
for (i=0;i<ARRcookies.length;i++)
{
  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
  x=x.replace(/^\s+|\s+$/g,"");
  if (x==c_name)
    {
    return unescape(y);
    }
  }
} 
```

此方法有另一个可能很重要的问题优势，可以在 ASP.NET 中重命名 session-id-cookie。以编程方式检索名称是可能的，看看[stackoverflow: get session cookie name](https://stackoverflow.com/questions/4310763/get-session-cookie-name)以及为什么你会这样做的原因看看[stackoverflow: Reason to rename ASP.NET Session Cookie Name](https://stackoverflow.com/questions/1292449/reason-to-rename-asp-net-session-cookie-name)。

默认名称（可能对您有用）是：

```
ASP.NET_SessionId 
```

现在，如果 getCookie 没有返回任何内容，这并不意味着用户没有登录。 //EDIT - ASP.NET 不使用参数...我怎么会错过矛盾的来源？

好了，现在我们有了 SessionID，要使 AJAX 请求正常工作，我们要做的就是将 SessionID 重写到 URL 中。

```
var SessionID = getCookie('ASP.NET_SessionId');
var urlprefix = "./";
if(SessionID != undefined)
    urlprefix = "./(S(" + SessionID + ")/";
$.ajax({
        type: "POST",
        dataType: 'json',
        url: urlprefix + 'delete.asp',
            data: {"PartyId" : 550}
            success: function (response) {
                if(response.type == 'delete') {
                    alert('delete went ok');
                }
            },
            error: function (event, request, settings) {
               // alert('RESP:' + response + '  REQ: ' + request + ' SETTINGS' + settings);
            },
        }); 
```

来源：http: [//msdn.microsoft.com/en-us/library/ms178581.aspx](http://msdn.microsoft.com/en-us/library/ms178581.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T16:17:38.027

忘记上面的答案，我原始帖子中的 ajax 代码很好，这段代码被一个 jQuery 对话框包围，无论出于何种原因导致问题！

```
var r=confirm("Are you sure you want to delete this?");
if (r) {
// do the above ajax call here
} 
```

# ios - 从 UIDatePicker 在 UIViewControllers 之间传递数据

> ID：15156965
> 
> 赞同：0
> 
> 时间：2013-03-01T11:45:46.967
> 
> 标签：ios, objective-c, uiviewcontroller, nsmutablearray, uidatepicker

让我开始告诉你，我是 Objective C 的新手。我刚刚读完 Big Nerd Ranch 的书，我想创建一个真正简单和基本的应用程序来了解更多信息。我的想法是创建一个应用程序来计算两个日期之间的周数。我为此创建了一个类并对其进行了测试。这样可行。

正如您在下面看到的，我已经创建了视图（以编程方式），一个带有日期，另一个将在您单击开始或结束日期时变得可见。

如果您选择一个日期并单击“计算周”按钮，您将返回到第一个视图。不，我的大问题是，如何将这个选定的值返回到我的主屏幕？我尝试了几种可能性并在网上搜索信息，但我无法工作。我知道这应该很容易，但对我来说现在不是。:-)

我创建了一个包含值“开始日期”和“结束日期”的 NSMutableArray。我的想法是将 UILabel 的值从 SelectDateView 添加到这个数组。我为此在 inputview`@property (readwrite, retain) NSMutableArray *datesArray;`中创建了一个属性。

在 selectDateViewController 我创建了另一个属性`@property (nonatomic, assign) BITInputViewController *ivc;`，所以我（在我看来）可以向 datesArray 添加一个值。

当我选择调用此方法的日期时，它适用于 SelectDateView 上的 UILabel，但对 datesArray 没有任何作用。

```
- (void)LabelChange:(id)sender{

NSDateFormatter *df = [[NSDateFormatter alloc] init];
df.dateStyle = NSDateFormatterMediumStyle;

dateLabel.text = [NSString stringWithFormat:@"%@",
                  [df stringFromDate:datePicker.date]];

[ivc.datesArray addObject:dateLabel.text];

if (ivc.datesArray) {

    for (NSString *d in ivc.datesArray) {
        NSLog(@"This is in datesArray %@",d);
    }
}else NSLog(@"!ivc.datesArray"); 
```

}

当我测试应用程序并选择日期时，我总是在日志文件中看到“！ivc.datesArray”。

我也对 ivc.datesArray 进行了检查，在`-(void)viewWillAppear:(BOOL)animated` 这里我看到了当前日期，因为我`- (void)viewDidLoad` 用这个设置了这个日期`dateLabel.text = [NSString stringWithFormat:@"%@",[df stringFromDate:[NSDate date]]];`

（当我在输入视图中打印出数组时，它会显示开始日期和结束日期，但不显示所选日期。）

希望有人可以给我一些指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:18:31.597

`NSString* date` 在您的 view1.m 文件中声明 a`@interface`并在第一个类中创建一个方法，它应该类似于

```
-(void)passDate:(NSString *)dateString
{

  date = [NSString stringWithFormat:@"%@",dateString];

}

and in your second class create object of first class like
View1 * vc = [[View1 alloc]init];
[vc passDate:df]; 
```

希望它有效。您必须在没有属性和合成`NSString`之前声明。`@interface`

# iphone - 像 instagram 这样的照片效果

> ID：15156967
> 
> 赞同：2
> 
> 时间：2013-03-01T11:45:52.380
> 
> 标签：iphone, ios, image-processing, uiimage, instagram

在我的 iphone 应用程序中，用户可以拍摄图像，拍摄图像后如何对该图像进行效果，如 instagram

有没有什么好的教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:48:43.833

一种解决方案是使用第三方 API，例如[Aviary](http://www.aviary.com/ios)或[Rocks 回答](https://stackoverflow.com/a/15157065/840428)中的库。

如果您想自己编写逻辑，则需要使用 Core Image 处理图像。除了[Apple 的文档](https://developer.apple.com/library/mac/#documentation/graphicsimaging/Conceptual/CoreImaging/ci_intro/ci_intro.html)之外， Ray Wenderlich 博客中的[本教程](http://www.raywenderlich.com/5689/beginning-core-image-in-ios-5)也是一个不错的起点。Lisa Bettany 不久前还写了一篇关于[他们如何在 Camera+ 中创建滤镜的](http://taptaptap.com/blog/creating-a-camera-plus-fx/)文章。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:52:05.467

查看 raywenderlich 的本教程：[beginning-core-image-in-ios-5](http://www.raywenderlich.com/5689/beginning-core-image-in-ios-5)。它是该网站上另一个教程的一部分，该教程告诉您[如何创建-应用程序-instagram-with-a-web-service-backend](http://www.raywenderlich.com/13511/how-to-create-an-app-like-instagram-with-a-web-service-backend-part-12)。

**ios-5 中的开始核心图像：**

> “Core Image 是一个功能强大的框架，可让您轻松地将滤镜应用于图像，例如修改鲜艳度、色调或曝光度。它使用 GPU（或 CPU，用户可定义）来处理图像数据，速度非常快。足够快对视频帧进行实时处理！
> 
> 核心图像过滤器可以堆叠在一起，一次将多种效果应用于图像或视频帧。当多个过滤器堆叠在一起时，它们是有效的，因为它们创建了一个应用于图像的修改后的单个过滤器，而不是一次一个地通过每个过滤器处理图像。
> 
> ...
> 
> 在本教程中，您将获得使用 Core Image 的实践经验。我们将应用一些不同的滤镜，您会看到实时对图像应用炫酷效果是多么容易！”

通读本教程后，您无疑会得到您想要的结果并学到很多东西！

除此之外，[这个 SO 问题](https://stackoverflow.com/q/9580368/1359306)还有很多答案——其中一些可能对您非常有用。这似乎是一项非常受欢迎的任务，因此研究所有许多选项是关键。祝你好运。

# google-drive-api - 如何使用 OAuthParameters 创建 Google DriveService 对象

> ID：15156972
> 
> 赞同：2
> 
> 时间：2013-03-01T11:45:59.103
> 
> 标签：google-drive-api

我可以使用 oAuth 授权我的应用程序（我得到访问令牌和秘密作为回报）。我使用它们来实例化 OauthParameter 的对象。我的问题是我在身份验证期间添加了“谷歌驱动器”的范围。如何创建 DriveService 的对象，就像创建 PicasaService 的方式一样。

```
PicasaService service;
GOAuthRequestFactory requestFactory;
string Picasa_CONSUMER_KEY = "<CONSUMER KEY>";
static string Picasa_CONSUMER_SECRET = "<CONSUMER SECRET>";
public static string Picasa_SCOPE = "http://picasaweb.google.com/data/https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile";
string Picasa_CALLBACK_URL = "<CALLBACK URL>"; 
```

这就是我创建 PicasaService 对象的方式

```
OAuthParameters parameters = new OAuthParameters()
            {
                ConsumerKey = Picasa_CONSUMER_KEY,
                ConsumerSecret = Picasa_CONSUMER_SECRET,
                Token = "token received during authentication", 
                TokenSecret = "secret received during authentication"
            };

requestFactory = new GOAuthRequestFactory("XYZ", "XYZ APP", parameters);
service = new PicasaService(requestFactory.ApplicationName);
service.RequestFactory = requestFactory; 
```

现在我如何“参数”来实例化 DriveService 的对象？由于我已经拥有 Google Drive 的范围，并且在身份验证过程中收到了令牌、机密，我不想单独为 google drive 进行 oAuth。

谢谢苏吉特

# php - COMET 与经典 AJAX 聊天

> ID：15156973
> 
> 赞同：0
> 
> 时间：2013-03-01T11:46:00.780
> 
> 标签：php, jquery, chat, comet

我已经使用**彗星技术**实现了一个聊天系统。这是链接（参见 ajax 的第二种方法）[comet with ajax](http://www.zeitoun.net/articles/comet_and_php/start)

当我使用一个帐户发送消息时，我将它与 2 个浏览器和 2 个帐户一起使用，另一个接收者以自己的名称接收它。这是代码：

```
handleResponse: function(response)
{

 $('chat_id_box').innerHTML += '<u class="myId">' + response['name'] + '</u>:&nbsp;&nbsp;<p class="talk">' + response['msg'] + '</p></br>';

}, 
```

这是控制器

```
$filename  = dirname(__FILE__).'./data.txt';
    $name   =   $this->session->userdata('name');
 // store new message in the file
  $msg = isset($_GET['msg']) ? $_GET['msg'] : '';
  if ($msg != '')
   {
  file_put_contents($filename,$msg.$name);
   die();
   }

  // infinite loop until the data file is not modified
   $lastmodif    = isset($_GET['timestamp']) ? $_GET['timestamp'] : 0;
  $currentmodif = filemtime($filename);
     while ($currentmodif <= $lastmodif) // check if the data file has been modified
   {
    usleep(10000); // sleep 10ms to unload the CPU
   clearstatcache();
   $currentmodif = filemtime($filename);
  }

   // return a json array
   $response = array();
   $response['msg']       = file_get_contents($filename);
  $response['name']         =   file_get_contents($filename);
  $response['timestamp'] = $currentmodif;
    echo json_encode($response);
  flush(); 
```

假设我输入**xyz: helo world!** 然后在第二个浏览器中，我收到这条消息为**abc：helo world！** **abc**和**xyz**是 2 个用户。代码中的问题是什么？我无法理解。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T14:58:42.163

你应该使用这个希望会起作用

```
 file_put_contents($filename, implode(';', array($msg, $name)));
     $response = explode(';', file_get_contents($filename));
     $response[0] is your msg and $response[1] is your name. 
```

感谢**nostrzak**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:04:16.390

您使用当前用户的会话数据作为名称，但发件人实际上不是当前用户。也许您可以将用户名和消息一起发送到服务器？

```
handleResponse: function(response)
{
    $('chat_id_box').innerHTML += '<u class="myId">'+response.user+'</u>:&nbsp;&nbsp;<p class="talk">'+response.msg+'</p></br>';
} 
```

# 更新

虽然这有点晚了，但您可以将数据编码为 JSON。然后，当您使用它时，您可以对其进行解码。

```
<?php
$response = json_decode(file_get_contents($filename));
$response->timestamp = $currentmodif;
echo json_encode($response);
flush(); 
```

当您将消息写入文件时，您可以使用：

```
<?php
file_put_contents($filename,json_encode(array('msg'=>$msg,'name'=>$name))); 
```

# windows-phone-8 - 如何从 url 下载 zip 文件并在 windows phone 8 上解压。 zip 文件包含来自服务器的压缩 sqlite 文件

> ID：15156974
> 
> 赞同：1
> 
> 时间：2013-03-01T11:46:03.673
> 
> 标签：windows-phone-8, zip

我无法使用 DownloadDataAsync 方法。目前唯一的选择是 DownloadStringAsync 方法。如何使用此方法下载 zip 文件。（我是 windows phone 8 应用程序开发的新手）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-21T05:11:30.920

我只是想分享对我有用的解决方案。我向给定的 url 创建了一个 Web 请求，并将 gzip 文件下载到隔离的存储文件中。现在下载后我创建了一个目标文件流，并使用 GZipStream 的 WriteByte 方法将压缩的 gzip 流文件从源文件存储到目标文件。现在我们得到未压缩的文件。

注意：-GZipStream 可以从 NuGet 管理器添加到 Visual Studio。

这是我用来下载和提取 GZip 文件的代码片段。

公共异步任务 DownloadZipFile(Uri fileAdress, string fileName) { try {

```
 WebRequest request = WebRequest.Create(fileAdress);
            if (request != null)
            {
                WebResponse webResponse = await request.GetResponseAsync();
                if (webResponse.ContentLength != 0)
                {
                    using (Stream response = webResponse.GetResponseStream())
                    {
                        if (response.Length != 0)
                        {
                            using (IsolatedStorageFile isolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
                            {
                                if (isolatedStorage.FileExists(fileName))
                                    isolatedStorage.DeleteFile(fileName);
                                using (IsolatedStorageFileStream file = isolatedStorage.CreateFile(fileName))
                                {
                                    const int BUFFER_SIZE = 100 * 1024;
                                    byte[] buf = new byte[BUFFER_SIZE];
                                    int bytesread;
                                    while ((bytesread = await response.ReadAsync(buf, 0, BUFFER_SIZE)) > 0)
                                    {
                                        file.Write(buf, 0, bytesread);
                                    }
                                    file.Close();

                                    FileStream sourceFileStream = File.OpenRead(file.Name);
                                    FileStream destFileStream = File.Create(AppResources.OpenZipFileName);

                                    GZipStream decompressingStream = new GZipStream(sourceFileStream, CompressionMode.Decompress);
                                    int byteRead;
                                    while ((byteRead = decompressingStream.ReadByte()) != -1)
                                    {
                                        destFileStream.WriteByte((byte)byteRead);
                                    }
                                    decompressingStream.Close();
                                    sourceFileStream.Close();
                                    destFileStream.Close();
                                    PhoneApplicationService.Current.State["DestinationFilePath"] = destFileStream.Name;
                                }
                            }
                            FileDownload = true;
                        }
                    }
                }
            }

            if (FileDownload == true)
            {
                return DownloadStatus.Ok;
            }
            else
            {
                return DownloadStatus.Other;
            }
        }

        catch (Exception exc)
        {
            return DownloadStatus.Other;
        }

    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-20T10:03:39.813

要首先从 url 下载 zip 文件，需要将 zip 文件存储到独立的存储中，然后根据需要将其解压缩并读取文件。

[http://axilis.hr/uznip-archives-windows-phone](http://axilis.hr/uznip-archives-windows-phone)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-01T15:37:38.933

您必须使用 DownloadStrringAsync 方法吗？否则你可以检查这些：

[如何提取从 HttpWebResponse 收到的压缩文件？](https://stackoverflow.com/questions/12350670/how-to-extract-zipped-file-received-from-httpwebresponse)

[在 windows phone 8 应用程序中下载并解压缩 zip 文件](https://stackoverflow.com/questions/14852710/download-and-decompress-a-zip-file-in-windows-phone-8-application)

[从隔离存储中提取 zip 文件](https://stackoverflow.com/questions/11742348/extract-zip-file-from-isolatedstorage)

[如何从 Web 下载 GZIP 文件到 Windows Phone 7 并解压缩内容](https://stackoverflow.com/questions/5707917/how-to-download-a-gzip-file-from-web-to-windows-phone-7-and-unzip-the-contents)

# search - 在 Yii 中搜索相关模型

> ID：15156978
> 
> 赞同：1
> 
> 时间：2013-03-01T11:46:11.653
> 
> 标签：search, yii, cgridview

我在 Yii 中搜索时遇到问题。我有两个模型：`Teams`和`Workers`. 在网站上有一个名为“团队工作者”的页面，我想在其中显示 CGridView 小部件，其中包含显示团队中的员工的搜索（团队 ID 作为`_GET`参数传递）。

我这样做了`TeamsController`：

```
public function actionWorkers($id)
{
    $model = Teams::model()->findByPk($id);
    $workers = Workers::model();
    $workers->unsetAttributes();
    if(isset($_GET['Workers']))
    {
        $_GET['Workers']['idTeam'] = $id;
        $workers->attributes = $_GET['Workers'];
    }
    else {
        $workers->attributes = array('idTeam' => $id);
    }

    $teamWorkers = $workers;
    $this->render('workers', array(
        'model' => $model,
        'teamWorkers' => $teamWorkers
    ));
} 
```

在视图文件中：

```
<?php $this->widget('zii.widgets.grid.CGridView', array(
'id'=>'team-workers-grid',
'dataProvider'=>$teamWorkers->search(),
'filter' => $teamWorkers,
'columns'=>array(
    'name',
    'surname',
    array(
        'id' => 'idWorker',
        'class' => 'CCheckBoxColumn',
        'checked' => '$data->confirmer',
        'selectableRows' => '2',
        // 'headerTemplate' => '{item}'
    )
),
)); ?> 
```

我得到了错误：

```
CDbCommand nie zdołał wykonać instrukcji SQL: SQLSTATE[23000]: Integrity constraint
violation: 1052 Column 'idTeam' in where clause is ambiguous. The SQL statement 
executed was: SELECT COUNT(DISTINCT `t`.`idWorker`) FROM `workers` `t` LEFT OUTER JOIN 
`teams` `Team` ON (`t`.`idTeam`=`Team`.`idTeam`) WHERE ((idTeam=:ycp0) AND (Team.name 
LIKE :ycp1)) 
```

当我不设置`idTeam`属性时 - 它工作正常。这很奇怪 - 在常规的 CRUD`admin`页面上 -`idTeam`属性被传递并且工作正常。

热处理它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T13:14:31.440

在**Workers::search()**你有类似的东西

```
$criteria->compare('idTeam',$this->idTeam); 
```

将其更改为

```
$criteria->compare('t.idTeam',$this->idTeam); 
```

即前缀sql属性`t.`是否来自当前模型或关系名称如果来自其他表/模型

* * *

也代替：

```
$workers->attributes = array('idTeam' => $id); 
```

您可以通过以下方式使其更简单：

```
$workers->idTeam = $id; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T13:14:37.157

`idTeam`您已在`Team`和中定义列`Workers`。通过加入这些表，您将在结果中有一个重复的（“模棱两可”）列。这就是错误消息告诉您的内容。

要解决此问题，您必须为其中一列使用别名。

# curl - cURL HTTP 传输数据

> ID：15156983
> 
> 赞同：0
> 
> 时间：2013-03-01T11:46:21.277
> 
> 标签：curl, data-transfer

我第一次尝试使用 cURL 来下载一些数据。我正在使用 Windows 7 中的 cmd 提示符。我有一个 txt 文件，其中包含很多我要下载的文件的 URL。在我用来检索我想要的数据的网站中，帮助说使用这个函数来下载数据集：

```
for i in `cat <url text file>`; do curl $i -OL -s; done 
```

但是经过一些尝试，到目前为止我还没有想出解决方案。我应该插入什么而不是那个“”？我想简单地指向存储 txt 文件的目录并指定其名称和扩展名，如下所示：

```
C:\Users\Umberto>for i in `cat C:\Users\Umberto\Downloads\data_url_script_2013-03-01_062649.txt`; do curl $i -OL -s; done 
```

我收到消息

```
i non atteso 
```

（意思是“我没想到”）你知道如何解决这个问题吗？提前谢谢了。

一个最新的注释：我成功下载了当前目录中的文件，但只指定了一个 URL 而不是我拥有的列表。我现在感兴趣的是通过一个命令（如上面指定的命令）下载我拥有的所有数据（在文本文件中的 URL 列表中指定）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T13:02:08.490

看起来您正试图在 Windows 7 命令提示符下运行某种 Unix 风格的 shell 命令。

如果您在 Windows Powershell 命令提示符下运行类似的命令，您应该能够获得相同的结果。如果您将 curl 工具解压缩到以下文件夹：C:\Users\Umberto\Curl 如果您在 Windows Powershell 命令提示符下运行它，则以下内容应该可以工作。

```
 Get-Content C:\Users\Umberto\Downloads\data_url_script_2013-03-01_062649.txt | %{C:\Users\Umberto\Curl\curl.exe $_ -OL -s} 
```

# geoserver - 我可以用中文命名 Geosever (SLD) 的 stlyes 吗？

> ID：15156984
> 
> 赞同：1
> 
> 时间：2013-03-01T11:46:21.350
> 
> 标签：geoserver, chinese-locale, sld

我在尝试用中文命名 Geoserver 的样式时遇到了问题。我想知道 Geosever 是否支持带有中文名称的样式。

# arrays - VHDL 中的数组字面量

> ID：15156987
> 
> 赞同：0
> 
> 时间：2013-03-01T11:46:35.297
> 
> 标签：arrays, vhdl

我们定义了一个向量

```
A: in std_logic_vector(7 downto 0); 
```

将文字分配给此向量时，例如

```
A <= {'1', '0', '0', '1'}; 
```

这个表达式会填充 7、6、5 和 4 的向量位置还是 3、2、1 和 0 的位置

这个想法是一个位向量，我们可以将其符号扩展到一个 8 位整数，但它目前仅在后者为真时才有效。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T16:14:21.713

此处语法无效。如果要将各个位保留为列表，则可以进行分配：

```
A(3 downto 0) <= (3 => '1', 2=> '0', 1=> '0', 0=> '1') ; 
```

奖金符号扩展：

```
A <= (2=> '0', 1=> '0', 0=> '1', others => '1') ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T12:00:09.787

我不认为这是合法的——至少在赛灵思 ISE 中是不合法的。

正确的做法是指定要分配的 A 部分：

```
A(3 downto 0) <= "1001"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-01T19:48:11.360

为什么使用单个位作为数字常量？有什么原因你不做类似的事情：

```
A <= std_logic_vector(to_signed(-7,A'length)); 
```

如果您从 A 开始是有符号类型，则可以摆脱 std_logic_vector 强制转换，如果您不想要符号扩展，则可以使用无符号类型和转换函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T10:16:17.467

如果您想要符号扩展，请使用适当的类型`signed`。

然后，您可以`-1`使用该函数将适当的数字（如 ）转换为适当宽度的向量`to_signed`，例如：

```
to_signed (-1, a'length) 
```

这样做优于显式位设置的优点是：

*   更简单的代码
*   每个人都可以阅读并理解您在做什么（无需评论！）
*   当`a`改变长度时，这一切（仍然）Just Works

# c# - 标签撞到墙上时如何改变方向？

> ID：15156988
> 
> 赞同：2
> 
> 时间：2013-03-01T11:46:37.497
> 
> 标签：c#

我有一个小问题，我想创建一个缓慢移动到墙上的标签，当撞到墙壁时它应该返回到另一面墙上。我让标签向左走，但过了一会儿它会穿过表格并消失，当它碰到表格时是否可以让它向右转（另一个方向）？所以它从一堵墙到另一堵墙？

```
 public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        timer1.Enabled = true;

    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        label1.Left = label1.Left + 10;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:54:20.390

```
Sounds like homework to me... just in case it isn't:

private int direction = 1;
private int speed = 10;

public Form1()
{
    InitializeComponent();
}

private void Form1_Load(object sender, EventArgs e)
{
    direction = 1;
    timer1.Enabled = true;

}

private void timer1_Tick(object sender, EventArgs e)
{
    if( label1.Left + label1.Width > this.Width && direction == 1 ){
        direction = -1;
    }
    if( label1.Left <= 0 && direction == -1 ){
        direction = 1;
    }
    label1.Left = label1.Left + (direction * speed);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:48:39.670

您必须知道可用的宽度和标签文本的宽度，然后您可以创建一个条件，说明当然`currentPosition + labelWidth >= availableWidth`后以另一种方式移动时。当然，屏幕左侧还有另一个类似的情况。

我的建议：

```
private int velocity = 10;
private void timer1_Tick(object sender, EventArgs e)
{

 if (currentWidth + labelWidth >= availableWidth)
    {
        //set velocity to move left
        velocity = -10;
    }
 else if (currentWidth - labelWidth <= 0)
    {
        //set velocity to move right
        velocity = 10;
    }
 label1.Left = label1.Left + velocity;

} 
```

# java - Clojure - “线程“主”中的异常 java.lang.ClassCastException：seesaw.core.proxy”

> ID：15156989
> 
> 赞同：2
> 
> 时间：2013-03-01T11:46:39.690
> 
> 标签：java, user-interface, clojure

我目前正在学习 Clojure，而且我之前没有使用过任何 Lisp 方言。
因此，尝试进行简单的 GUI 测试时，我在跷跷板上得到了 ClassCastException。

## core.clj 文件：

```
(ns veg-gui.core)
(use 'seesaw.core)

(def f (frame :title "Hello world!") )

(defn -main [& args] 
  ( (config! f :content "Hello world.")
    (-> f pack! show!) ) ) 
```

## 完整的错误。

```
Exception in thread "main" java.lang.ClassCastException: seesaw.core.proxy$javax
.swing.JFrame$Tag$a79ba523 cannot be cast to clojure.lang.IFn
        at veg_gui.core$_main.doInvoke(core.clj:8)
        at clojure.lang.RestFn.invoke(RestFn.java:397)
        at clojure.lang.Var.invoke(Var.java:411)
        at user$eval5181.invoke(NO_SOURCE_FILE:1)
        at clojure.lang.Compiler.eval(Compiler.java:6511)
        at clojure.lang.Compiler.eval(Compiler.java:6501)
        at clojure.lang.Compiler.eval(Compiler.java:6477)
        at clojure.core$eval.invoke(core.clj:2797)
        at clojure.main$eval_opt.invoke(main.clj:297)
        at clojure.main$initialize.invoke(main.clj:316)
        at clojure.main$null_opt.invoke(main.clj:349)
        at clojure.main$main.doInvoke(main.clj:427)
        at clojure.lang.RestFn.invoke(RestFn.java:421)
        at clojure.lang.Var.invoke(Var.java:419)
        at clojure.lang.AFn.applyToHelper(AFn.java:163)
        at clojure.lang.Var.applyTo(Var.java:532)
        at clojure.main.main(main.java:37) 
```

（另外，我正在运行这个`lein run`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T11:55:55.547

```
(defn -main [& args] 
  ( (config! f :content "Hello world.")
    (-> f pack! show!) ) ) 
```

你的函数体周围有一组多余的括号。与以下内容进行比较：

```
(defn -main [& args] 
  (config! f :content "Hello world.")
  (-> f pack! show!)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T11:54:26.750

Seesaw 不包含在 Clojure 核心中，因此，与任何其他编程语言一样，您需要将此库包含到您的项目中。使用 Leiningen 非常简单 - 只需将`[seesaw "x.y.z"]`（其中“xyz”是版本）添加到您的`project.clj`. 项目[主页上](https://github.com/daveray/seesaw#tldr)的更多细节和示例。

**UPD。**我更加关注您的异常和您的代码。你有一个错误：

```
( (config! f :content "Hello world.") 
```

与大多数其他语言不同，在 Lisp 中，括号比仅仅对参数进行分组更重要。当你写：

```
(foo ...) 
```

`foo`预计是函数（的实例`IFn`）。因此，Clojure 试图将表达式`(config! f :content "Hello world.")`视为函数，但事实并非如此，因此会引发异常。要修复它，只需删除额外的括号：

```
(defn -main [& args] 
  (config! f :content "Hello world.")
  (-> f pack! show!)) 
```

但是请注意，在 Clojure 中按顺序编写表达式并不总是可行的。通常你必须使用`do`一个接一个地执行几个动作。幸运的是，隐式`defn`包含`do`，因此您不需要显式包含。

# objective-c - NSDate 最小和最大可能值

> ID：15156996
> 
> 赞同：23
> 
> 时间：2013-03-01T11:46:51.553
> 
> 标签：objective-c, cocoa, nsdate

任何人都知道 NSDate 的最小和最大可能值是多少？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-05-28T07:44:52.453

使用[[NSDate distinctFuture]](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/clm/NSDate/distantFuture)和[[NSDate distinctPast]](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSDate_Class/Reference/Reference.html#//apple_ref/occ/clm/NSDate/distantPast)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-01T14:17:11.640

**编辑答案：**

我认为我发现最小日期值是`0001-01-01 00:00:00 + 0000`（给定下面的代码）但是正如下面的评论中指出的那样，这仅适用于**当前时代** （即 AD）。NSDate 值可能会低于此值，但您看到的 NSLog 结果可能不是您所期望的，因此我建议您在此处查看其他答案并忽略我的无知。

**原始答案：**

我相信我发现最小日期值是`0001-01-01 00:00:00 + 0000`

在 NSLog'ing 和解析值时需要非常小心，以确保您的时区不会稍微倾斜日期值。

我将在下面尝试和演示：

```
NSDateFormatter *dateFormatter1 = [[NSDateFormatter alloc] init];
[dateFormatter1 setDateFormat:@"yyyy-MM-dd hh:mm:ss z"];

NSDateFormatter *dateFormatter2 = [[NSDateFormatter alloc] init];
[dateFormatter2 setDateFormat:@"yyyy-MM-dd HH:mm:ss z"];

NSDateFormatter *dateFormatter3 = [[NSDateFormatter alloc] init];
[dateFormatter3 setDateFormat:@"yyyy-MM-dd HH:mm:ss z"];
[dateFormatter3 setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];

NSDate *date1 = [NSDate dateWithTimeIntervalSince1970:-62135596800];
NSLog(@"date1 = %@", date1);
NSLog(@"date1 via dateFormatter1 = %@", [dateFormatter1 stringFromDate:date1]);
NSLog(@"date1 via dateFormatter2 = %@", [dateFormatter2 stringFromDate:date1]);
NSLog(@"date1 via dateFormatter3 = %@", [dateFormatter3 stringFromDate:date1]);

NSDate *date2 = [NSDate dateWithTimeIntervalSince1970:-62135596800 - 100]; // The - 100 makes no difference
NSLog(@"date2 = %@", date2);
NSLog(@"date2 via dateFormatter1 = %@", [dateFormatter1 stringFromDate:date2]);
NSLog(@"date2 via dateFormatter2 = %@", [dateFormatter2 stringFromDate:date2]);
NSLog(@"date2 via dateFormatter3 = %@", [dateFormatter3 stringFromDate:date2]); 
```

这会产生以下输出（在我的 iPad 上给定其特定时区）：

```
date1 = 0001-01-01 00:00:00 +0000
date1 via dateFormatter1 = 0001-12-31 11:58:45 GMT-00:01:15
date1 via dateFormatter2 = 0001-12-31 23:58:45 GMT-00:01:15
date1 via dateFormatter3 = 0001-01-01 00:00:00 GMT
date2 = 0001-12-31 23:58:20 +0000
date2 via dateFormatter1 = 0001-12-31 11:57:05 GMT-00:01:15
date2 via dateFormatter2 = 0001-12-31 23:57:05 GMT-00:01:15
date2 via dateFormatter3 = 0001-12-31 23:58:20 GMT 
```

请注意 date2 以及如何减去额外的 100 秒并没有减少日期的值，但实际上似乎增加了它。显然 NSDate 的内部工作方式有些特殊，时间调整了 100 秒，但这可能会使日期和月份出现偏差，也许是因为它不能再低了？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-01T12:17:00.357

最大值应该是：5828963-12-20 00:00:00 +0000 因为

```
NSDate *dateSinceNow = [NSDate dateWithTimeIntervalSinceNow:DBL_MAX];
NSDate *dateSindeReferenceDate = [NSDate dateWithTimeIntervalSinceReferenceDate:DBL_MAX];
NSLog(@"min: %@, max: %@", dateSinceNow, dateSindeReferenceDate); 
```

是一样的。

我得到的最低限度是：0001-01-01 00:00:00 +0000

因为这是我尝试时得到的：

```
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"yyyy-MM-dd hh:mm:ss"];
[df setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];
NSDate *myDate = [df dateFromString: @"0001-01-01 00:00:00"];
NSLog(@"%@", myDate); 
```

但正如 davedelong 所指出的，这是当前时代

因此，如果您尝试使用 - DBL_MAX 的第一个示例，您会得到：41221-07--2147483641 00:00:00 +0000。不知道这是什么时代。。。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-12-03T20:10:13.927

OP 的真正问题（在他对自己的 OP 的评论中澄清）大约是 1/1/1。正如您在我的**TL;DR 中的 Playground 中看到的那样；**，如果您没有指定 a with Era ，Apple 会打印“31 Dec 0001”而不是“31 Dec 0001 **BC**`DateFormatter` ” ，因此如果 OP 的 1/1/1 AD 很容易成为 31/1/1 BC（前一天）本地时区不是 UTC。

`NSDate / Date`可以有效地使用到过去约 3000 万年，但`NSDateComponents / DateComponents`操作失败，日期在公元前 4500 年之前。请继续阅读以了解详细信息...

# TL;博士;

正如一些评论员和受访者所指出的，`[NSDate distantPast]`（或`Date.distantPast`在 Swift 中）是由 API 提供的，*但是*，这**不是**最低限度的`NSDate`/ `Date`- 它只是方便业务逻辑，因为很少有应用程序需要对 BCE 进行计算（请注意`.distantFuture`也是任意的——它是公元 4001 年 1 月 1 日）。

其他受访者 (@peko) 已经处理过真正的“distantFuture”最大值，但没有人完全探索过最小值。

那么，`Date`当您实际上给它日期之前会做什么`.distantPast`呢？这是一个小操场：

```
// Swift 5 Playground
import Foundation

var d = Date.distantPast // "31 Dec 1 at 23:58"
// However, that's the default print, which *does not* include Era

let df = DateFormatter()
df.dateFormat = "EEEE dd MMMM yyyy G" // "G" is Era

print(df.string(from: d)) // "Friday 31 December 0001 BC\n"

// What happens when we go lower?
d = d.addingTimeInterval(-1e12) // "29 Nov 31689 at 22:12"
print(df.string(from: d)) // Thursday 29 November 31689 BC\n"

// Lower still?
d = d.addingTimeInterval(-1e14) // "18 Feb 3200497 at 12:25"
print(df.string(from: d)) // "Tuesday 18 February 3200497 BC\n"

// But it breaks here...
d = d.addingTimeInterval(-1e15) // ""
print(df.string(from: d)) // "\n" 
```

所以`NSDate`/`Date`在过去至少有约 3000 万年的有效时间。

然而，我在比/可以处理的更近的时间里进行*计算时遇到了困难。*`NSDate``Date`

具体来说，`Calendar`'`.dateComponents(unitFlags, from: date)`失败（并打印如下所示的错误消息），早于公元前 4713 年左右。

> 2021-12-03 19:15:48.885955+0000 Tempus II[61381:6027263] [general] CFAbsoluteTime -268229356861.914001 超出日历计算范围。

...“-268229356861.914001”是公元前 6500 年，但任何尝试对`DateComponent`公元前 4713 年之前的任何事物进行计算都会给出类似的信息，**并且计算将是错误的！**

这是另一个您自己尝试的小游乐场：

```
let df = DateFormatter()
df.dateFormat = "EEEE dd MMMM yyyy G" // "G" is Era

// 500BC -> by 1000 years, which works
let dc500 = DateComponents(calendar: .autoupdatingCurrent,
                           era: 0,
                           year: 500)
var d = Calendar.autoupdatingCurrent.date(from: dc500)!
print(df.string(from: d)) // Thursday 01 January 0500 BC\n"

d = Calendar.autoupdatingCurrent.date(byAdding: delta, to: d)!
print(df.string(from: d)) // "Monday 01 January 0501 AD\n"
// *** NB 501AD is the RIGHT answer for 500BC + 1000, as there
// *** was no year 0

d = Calendar.autoupdatingCurrent.date(byAdding: delta, to: d)!
print(df.string(from: d)) // "Friday 01 January 1501 AD\n"

// 5000BC -> by 2000 years, which doesn't work
delta = DateComponents(calendar: .autoupdatingCurrent,
                       year: 2000)

let dc5000 = DateComponents(calendar: .autoupdatingCurrent,
                            era: 0,
                            year: 5000)
d = Calendar.autoupdatingCurrent.date(from: dc5000)!
print(df.string(from: d)) // "Sunday 01 January 5000 BC\n"

d = Calendar.autoupdatingCurrent.date(byAdding: delta, to: d)!
print(df.string(from: d)) // "Tuesday 01 January 2713 BC\n"
// *** WRONG!

d = Calendar.autoupdatingCurrent.date(byAdding: delta, to: d)!
print(df.string(from: d)) // "Wednesday 01 January 0713 BC\n"
// *** Back on track again

d = Calendar.autoupdatingCurrent.date(byAdding: delta, to: d)!
print(df.string(from: d)) // "Thursday 01 January 1288 AD\n"
// *** Again, correct 
// 713 -> 1BC + 1 AD -> 1288 = 1288 + 713 - 1 = 2000 
```

### ps

不要`Date`在不了解 , 和 ! 的情况下在`TimeZone`业务`Calendar`逻辑中`DateComponents`使用`DateFormatter`

# windows-8 - 在 Windows 8 中从 Windows azure 获取响应

> ID：15156998
> 
> 赞同：1
> 
> 时间：2013-03-01T11:46:57.133
> 
> 标签：windows-8, microsoft-metro, azure-mobile-services

![如果我将服务器脚本写入我的 Windows 8 应用程序，我想从 Windows Azure 获取“自定义消息”。][1]

我有一个场景，我想在 Windows 8 中从 Windows Azure 获得返回请求。

我的 Azure 脚本`Request.Respond(Status.Codes.'OK')`

# php - JSON 像数组一样与 PHP 一起工作

> ID：15156999
> 
> 赞同：0
> 
> 时间：2013-03-01T11:47:01.480
> 
> 标签：php, json

我得到了以下代码是否可以像数组一样使用它？

```
$var = 
"{"uid":"cb463625fc9dde2d82207e15bde1b674513094011b2976.06073807","name":"marius"}{"uid":"2393d7a6a3258894acc34581978453fa513094011b2ab8.28630478","name":"buenyamin"}"; 
```

像打印出来一样

```
echo $var[0].uid."<br>";
echo $var[1].uid; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T11:48:41.983

试试这个 ：

```
$array = json_decode($var,true);

echo "<pre>";    
print_r($array); 
```

注意：`true`json_decode 中的第二个参数需要将输出作为数组，否则输出将是对象

参考： http: [//php.net/manual/en/function.json-decode.php](http://php.net/manual/en/function.json-decode.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T11:49:23.923

使用[json_decode](http://php.net/manual/en/function.json-decode.php)将字符串解码为 PHP 数组。

```
$var = 
"{"uid":"cb463625fc9dde2d82207e15bde1b674513094011b2976.06073807","name":"marius"}{"uid":"2393d7a6a3258894acc34581978453fa513094011b2ab8.28630478","name":"buenyamin"}";
echo '<pre>' . print_r(json_code($var, true)) . '</pre>'; 
```