# StackOverflow 问答 12691000-12691999

# java - 导入库未解决

> ID：12691000
> 
> 赞同：1
> 
> 时间：2012-10-02T13:15:42.420
> 
> 标签：java, jar, mp4, executable-jar, mp4parser

我试图从 mp4parser 站点编译一个 java 程序，[shortcut.java](https://mp4parser.googlecode.com/svn/trunk/examples/src/main/java/com/googlecode/mp4parser/ShortenExample.java)。但是我的 jar 文件无法解析如下所示的所需导入。该程序需要从 iso mp4parser 导入库，如下所述。 **简而言之，我需要用于缩短.java 文件的 jar 文件来解决这些导入问题。**

```
import com.coremedia.iso.IsoFile;
import com.coremedia.iso.boxes.TimeToSampleBox;
import com.googlecode.mp4parser.authoring.Movie;
import com.googlecode.mp4parser.authoring.Track;
import com.googlecode.mp4parser.authoring.builder.DefaultMp4Builder;
import com.googlecode.mp4parser.authoring.container.mp4.MovieCreator;
import com.googlecode.mp4parser.authoring.tracks.CroppedTrack; 
```

我已经从 mp4parser 站点下载了[源代码](http://code.google.com/p/mp4parser/source/browse/#svn%2Ftrunk%2Fisoparser)来为这些库创建 jar 文件。

在下图中**java->com->coremedia->iso** 和 **java->com->coremedia->iso->boxes** 具有所需的 java 程序

和**java->com->googlecode->mp4parser->authoring** 等有其他需要的 java 程序用于这些导入

**我通过以下命令创建了 jar -**

```
cd  java           // moved in java folder

jar cfv mp4parser.jar   * 
```

**现在将这些jar 添加到我的shortcut.java 程序中。但我收到导入未解决的错误。**

****有人能告诉我我在哪里做错了吗???****

这是这些导入的 java 代码可用的目录。

![包含的 java 代码的目录结构](../Images/5cb02eca4704c8871da4e8fbca88b9bf.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:19:28.360

我建议你这样做：

*   用maven创建一个快速入门的java项目；
*   添加所需的依赖项；
*   把java类放到src/main/java
*   `mvn clean install`

如果它不起作用，请尝试一些 IDE，例如 eclipse。打开项目并尝试修复导入...总是有可能某些库已更改，也许它们更改了包的名称。

# c# - 将样式应用于 DataTemplate 中的元素

> ID：12691002
> 
> 赞同：2
> 
> 时间：2012-10-02T13:15:48.517
> 
> 标签：c#, wpf, xaml, styles, datatemplate

我有一个 UserControl，它只在 DataTemplate 中包含一个 TextBlock 和 TextBox。这是通过以下方式完成的：

```
<UserControl.Resources>
        <DataTemplate DataType="{x:Type Binding:StringBindingData}" x:Key="dataTemp">
            <StackPanel Orientation="Horizontal" Name="sPanel">
                <TextBlock Name="txtDescription" Text="{Binding Description}" />
                <TextBox Name="textboxValue" Text="{Binding Mode=TwoWay, Path=Value, UpdateSourceTrigger=PropertyChanged}" />
            </StackPanel>
        </DataTemplate>

    </UserControl.Resources>

    <Grid>
        <ItemsControl Name="textItemsControl" ItemsSource="{Binding}"/>
    </Grid> 
```

我需要能够在不同的情况下对 TextBlock/TextBox 应用不同的样式。例如，在某些情况下，我希望能够将白色前景应用到 TextBlock 或更改 TextBox 的宽度。

我尝试了几种不同的方法： 在使用控件的窗口中，我设置了 TextBlock 的样式：

```
<Style TargetType="{x:Type TextBlock}" >
    <Setter Property="Foreground" Value="White" />
</Style> 
```

这适用于窗口中的所有其他 TextBlock。

我还尝试使用在代码隐藏中获取 DataTemplate

```
var myDataTemplate = (DataTemplate)this.Resources["dataTemp"]; 
```

但是无法进一步将样式应用于所有 TextBlock 元素。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:53:59.080

我不确定你的要求。但是为了从后面的代码中查找控件，我建议使用`VisualTreeHelper`. 我通常使用这个辅助函数来做我的事情 -

```
public IEnumerable<T> FindVisualChildren<T>( DependencyObject depObj )
    where T : DependencyObject
{
  if( depObj != null )
  {
     for( int i = 0; i < VisualTreeHelper.GetChildrenCount( depObj ); i++ )
     {
        DependencyObject child = VisualTreeHelper.GetChild( depObj, i );
        if( child != null && child is T )
        {
           yield return (T)child;
        }

        foreach( T childOfChild in FindVisualChildren<T>( child ) )
        {
           yield return childOfChild;
        }
     }
  }
} 
```

用法：

```
foreach (var textBlock in FindVisualChildren<TextBlock>(this))
{
       /*   Your code here  */
} 
```

# c# - 如何序列化服务器上 的数据，类似于标准 MVC 客户端序列化器？

> ID：12691004
> 
> 赞同：0
> 
> 时间：2012-10-02T13:15:54.480
> 
> 标签：c#, asp.net-mvc-3, post, serialization

在我的 MVC 应用程序中，当我提交表单时，序列化数据通过 post 请求发送到服务器。我想模拟服务器上的请求以提供集成测试。我应该使用什么序列化程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:23:24.147

最好模拟单元测试的发布请求中发送的数据（甚至通过自动化集成测试）。有几个 Stack Overflow 答案可以帮助您模拟`HttpRequest`和`HttpContext`进行测试，[这里只是一个](https://stackoverflow.com/questions/774204/unit-testing-in-asp-net-mvc-how-do-i-mock-a-page-request).

# javascript - Range startContainer 不是最深的节点

> ID：12691010
> 
> 赞同：0
> 
> 时间：2012-10-02T13:16:11.873
> 
> 标签：javascript, range, nodes, getselection

我想在页面中生成一个节点数组，其中将包含 Ranges 的所有可能 startContainers。

我尝试使用 treeWalker，但它给了我一个比实际 startContainer 节点更深的节点，例如：

```
<p>For those keeping count at home, by the way, the <a target="_blank" href="http://msdn.microsoft.com/en-US/windows/apps/br229516.aspx">Windows 8 Developer Preview site</a> still happily talks about "Metro style app development,"; even though <a target="_blank" href="http://www.istartedsomething.com/20120816/microsofts-new-rule-no-metro-named-apps/">rumor has it</a> that Microsoft is now banning all apps with the word "Metro" in their name from the Windows Store.</p> 
```

（取自 techcrunch.com）

所以我的树行者返回以下内容：

```
['For those keeping count at home, by the way, the ','Windows 8 Developer Preview site',' still happily talks about "Metro style app development,"; even though ','rumor has it',' that Microsoft is now banning all apps with the word "Metro" in their name from the Windows Store.'] 
```

（分裂）

但是当我尝试得到以下内容时： window.getSelection().getRangeAt(0).startContainer.textContent 我得到：

```
['For those keeping count at home, by the way, the Windows 8 Developer Preview site still happily talks about "Metro style app development,"; even though rumor has it that Microsoft is now banning all apps with the word "Metro" in their name from the Windows Store.'] 
```

（不拆分）

**为什么 startContainer 不更深（拆分）？像treeWalker是什么？**

这是tree walker的代码：

```
var walker = document.createTreeWalker(document.body, NodeFilter.SHOW_ALL, function(node) {
    if (node.nodeType == 3) {
        return NodeFilter.FILTER_ACCEPT;
    } else if (node.offsetWidth && node.offsetHeight) {
        return NodeFilter.FILTER_SKIP;
    } else {
        return NodeFilter.FILTER_REJECT;
    }
}, false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:24:43.117

我想您已经选择了整个元素，例如其中一个链接。关键的事实是，`startContainer`从选择中获得的范围的 不能保证是文本节点。

如果选择了整个元素，一些浏览器会将选择报告为跨越元素父节点的子节点。例如，对于跨越多个连续图像之一的选择，这是必不可少的。想象一下，所选内容仅包含下面 HTML 中的第二张图片：

```
<div><img src="1.jpg"><img src="2.jpg"><img src="3.jpg"></div> 
```

在这种情况下，所选范围将具有引用元素和`startContainer`1和2 的属性，表示容器属性中索引 1 和 2 处的子项之间的范围拉伸。`endContainer``<div>``startOffset``endOffset``childNodes`

# highcharts - 如何使用 highchart 创建简单的日程表

> ID：12691012
> 
> 赞同：1
> 
> 时间：2012-10-02T13:16:25.270
> 
> 标签：highcharts

如何创建带有单个水平条的简单图表。Xaxis 是时间，yaxis 是一种名为执行的类别。我想显示一个图表，在我执行状态期间显示一个条形图，而对于介于两者之间的状态，我想在同一个水平条形图中显示一个空白。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:16:03.590

我认为您正在寻找的是甘特图。看看这个例子：http: [//jsfiddle.net/highcharts/KNGba/](http://jsfiddle.net/highcharts/KNGba/)。这是一个只有一个元素的基本图表。现在看看这个：http: [//jsfiddle.net/highcharts/r6emu/](http://jsfiddle.net/highcharts/r6emu/)。这会向您显示时间线内的事件。

# sockets - 安静期后 WiFi 延迟峰值

> ID：12691017
> 
> 赞同：0
> 
> 时间：2012-10-02T13:16:35.793
> 
> 标签：sockets, networking, network-programming, udp

我有一个简单的客户端<>服务器设置，其中客户端每秒多次通过端口 2000 向服务器发送 UDP 数据包。服务器有一个线程，带有一个打开的 BSD 套接字，侦听端口 2000，并使用阻塞`recvfrom`调用读取数据。而已。我`recvfrom`在服务器中的调用周围设置了一个简单的 tic toc 计时器，并在通过 Wifi 运行时绘制了结果。

![基准图](../Images/82a7fa89d7a8dc27903e32523d592bd1.png)

当服务器通过 Wifi 连接到接入点时，它的相似之处在于通常 recvfrom 调用也需要 0.015 秒。但是，在没有发送数据包的短时间无线电静默之后（大约半秒），进入服务器的下一个数据包将导致 recvfrom 调用花费极长的时间（在 0.6 到 3 秒之间），然后是一连串非常快速的调用（大约 0.000005 秒）然后恢复正常（大约 0.015 秒）。以下是一些示例数据：

```
0.017361 <--normal 
0.014914
0.015633
0.015867
0.015621
...      <-- radio silence
1.168011 <-- spike after period of radio silence
0.000010 <-- bunch of really fast recvfrom calls
0.000005
0.000006
0.000005
0.000006
0.000006
0.000005
0.015950 <-- back to normal
0.015968
0.015915
0.015646 
```

如果您仔细观察，您会在图表上注意到这一点。

当我通过 LAN（即使用电缆）将服务器连接到接入点时，一切正常，recvfrom 调用始终需要大约 0.015 秒。但是通过 Wifi，我得到了这些疯狂的峰值。

这到底是怎么回事？

PS 服务器运行 Mac OS X，客户端是 iPhone，在这两种情况下都通过 Wifi 连接到接入点。我尝试在 iPad 上运行客户端并获得相同的结果。接入点是一个 Apple Airport Extreme 基站，其网络使用 Apple Airport Express 进行扩展。我也尝试过使用 Thompson 路由器和一个简单的（非 WDS 网络），但仍然遇到同样的问题。

* * *

**更新**

我用 C# 重写了 Windows .NET 上的服务器部分，并在 Wifi 上对其进行了测试，保持其他一切不变，问题就消失了。所以它表明这是 Mac OS X 上的操作系统/网络堆栈/套接字问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:28:01.480

我认为你对此无能为力。可能会发生几件事：

1.  WiFi MAC层必须为多个用户分配带宽槽，它通常会尝试给一个用户足够长的时间来发送尽可能多的流量。但是当其他用户忙时，这个客户端不能发送流量。您甚至可以在只有一个用户的情况下看到这一点（802.11 协议的结果），但您当然会在多个活跃用户中注意到这一点。
2.  IOS本身可能有某种节电功能，会缓冲一段时间的数据包发送突发，所以它可以让一些子系统空闲一段时间。
3.  您有其他一些干扰无线电信号。

这不是一个详尽的列表，只是我在短时间内能想到的，只有给定的输入。

一件事：0.6 到 3 秒在无线域中并不是一个非常长的时间，它可能是“长”的，但延迟是所有无线通信中最大的问题之一。不要忘记大多数 wifi AP 都是基于相当老的规格，所以我不会说这些数字是极端的（但我不希望有 3 秒的差距）。

# javascript - 为什么Javascript的扩展函数必须正确设置对象原型的构造函数？

> ID：12691020
> 
> 赞同：2
> 
> 时间：2012-10-02T13:16:37.307
> 
> 标签：javascript

这是`extend`Pro Javascript Design Patterns, Apress, 2008, p.44 中的定义：

```
function extend(subClass, superClass) {
  var F = function() {};
  F.prototype = superClass.prototype;
  subClass.prototype = new F();
  subClass.prototype.constructor = subClass;

  subClass.superclass = superClass.prototype;
  if(superClass.prototype.constructor == Object.prototype.constructor) {
    superClass.prototype.constructor = superClass;
  }
} 
```

对于这条线`subClass.superclass = superClass.prototype;`，我认为如果我们这样做可能是一样的`subClass.superclass = superClass`，因为在未来，我们总是可以通过任何方式到达原型`subClass.superclass.prototype`。但是我想为什么不指向构造函数，而是指向原型呢？但这是一个小问题。

更重要的问题是，为什么最后几行试图将 Object 的原型的构造函数设置回 self？我在 Firefox 和 Chrome 中尝试过，他们总是这样指出。

还有一点奇怪的是，它为什么要使用`if(superClass.prototype.constructor == Object.prototype.constructor)`？为什么不直接使用`if (superClass === Object)`呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:40:05.837

> `subClass.superclass = superClass.prototype;` 为什么不指向构造函数，而是指向原型呢？

两者都可以完成，这只是一个设计问题。我猜想`superClass`在想要调用其超级方法的覆盖方法中最需要该属性，他们可以通过调用`this.constructor.superClass[methodName]`. 但是，是的，你需要这个`constructor`属性有点奇怪，原型上的直接属性会更容易。

> 更重要的问题是，为什么最后几行试图将 Object 的原型的构造函数设置回 self？

似乎这样做是为了与糟糕的原型声明兼容。如果有人使用

```
MyClass.prototype = {…}; 
```

并且不重置`constructor`, then 在`extend(MySubClass, MyClass)`will `superClass.prototype.constructor`be `Object`, 和超类构造函数的共同应用

```
this.constructor.superClass.constructor.apply(this, args);
// for those who don't want to use MyClass.apply 
```

在`MySubClass`构造函数中会失败。所以该`extend`函数纠正了这一点。

> 还有一点奇怪的是，它为什么要使用`if(superClass.prototype.constructor == Object.prototype.constructor)`？为什么不直接使用`if (superClass === Object)`呢？

现在应该清楚我们为什么要`superClass.prototype.constructor`. 但是，是的，我们可以使用`Object`而不是`Object.prototype.constructor`.

# php - 设置 symfony 2 表单域的名称属性

> ID：12691021
> 
> 赞同：6
> 
> 时间：2012-10-02T13:16:38.487
> 
> 标签：php, forms, symfony, formbuilder

如何在 symfony 2 中设置渲染字段的名称属性？

预期输出：

```
 <input type="text" name="test" value="test" /> 
```

以这种方式渲染字段

```
 {{ form_widget(form.test, { 'attr': {'name': 'test'} }) }} 
```

绝对行不通。

输出还在

```
 <input type="text" name="form[test]" value="test" />. 
```

有没有办法动态设置 name 属性或 id 属性？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T10:27:07.697

```
<input type="text" name="form[test]" value="test" /> 
```

已经有`test`名字了。当然，`form`在您的情况下仍然调用了根表单名称。真的不建议删除它，因为当您阅读填充表单数据的请求时，您可以通过表单名称来识别表单。

阅读**[Form] Enable empty root form name** [https://github.com/symfony/symfony/pull/2936](https://github.com/symfony/symfony/pull/2936)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-25T16:57:36.257

以这种方式覆盖 Twig 块：

```
{% block widget_attributes -%}
id="{{ id }}"
{%- if read_only %} readonly="readonly"{% endif -%}
{%- if disabled %} disabled="disabled"{% endif -%}
{%- if required %} required="required"{% endif -%}
{%- for attrname, attrvalue in attr -%}
    {{- " " -}}
    {%- if attrname in ['placeholder', 'title'] -%}
        {{- attrname }}="{{ attrvalue|trans({}, translation_domain) }}"
    {%- elseif attrvalue is sameas(true) -%}
        {{- attrname }}="{{ attrname }}"
    {%- elseif attrvalue is not sameas(false) -%}
        {{- attrname }}="{{ attrvalue }}"
    {%- endif -%}
{%- endfor -%}
name={{full_name}}
{%- endblock widget_attributes %} 
```

更改只是将 name={{full_name}} 从第一行移动到最后一行，因此当您将名称 attr 添加到表单构建器添加元素时，该名称将不再被忽略。

# django - Django 找不到 post 变量

> ID：12691026
> 
> 赞同：1
> 
> 时间：2012-10-02T13:16:50.860
> 
> 标签：django, http

我有以下测试代码：

```
@csrf_exempt
def view_test(request):
    if request.method=="POST":
        if 'Var1' in request.POST :
            return HttpResponse("Flip")
        else:
            return HttpResponse("Flop") 
```

我想通过 GPRS 将数据传递到我的 django 服务器，我正在发送这个“HTTP 数据包”

```
 POST /test_pkt/ HTTP/1.1 \r\n
    Host: test.my_django_server.com \r\n
    User-Agent: Mozilla/5.0 \r\n
    Accept: text/plain; q=0.5, text/html \r\n
    Accept-Encoding: deflate \r\n
    Accept-Language: en-US \r\n
    Connection: keep-alive \r\n
    Referer: http://test.my_django_server.com/test_pkt/ \r\n
    Content-Type: application/x-www-form-urlencoded \r\n
    Content-Length: 11 \r\n
    Var1=toggle\r\n
    \r\n 
```

作为回应，我得到

```
 HTTP/1.1 200 OK
    Date: Tue, 02 Oct 2012 13:11:23 GMT
    Content-Type: text/html; charset=utf-8
    Transfer-Encoding: chunked
    Connection: keep-alive
    Server: gunicorn/0.14.6

    c
    flop
    0 
```

我知道我做错了什么，但我找不到。有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:36:13.343

正如我在评论中提到的，POST 数据位于请求的正文中。正文总是用空行与标题隔开，因此在最后一个标题 ( `Content-Length`) 和正文之间需要一个空行。

# php - 如何创建百分比图像

> ID：12691030
> 
> 赞同：2
> 
> 时间：2012-10-02T13:16:58.503
> 
> 标签：php

我正在学习 PHP，我只是做了一个简单的投票。它可以工作并显示每个问题的百分比（总共有 3 个问题），但我还想显示一个显示百分比的栏（所以如果第一个问题是 50% 并且栏是 100px，则栏这个问题应该是 50px）。

这是具有最终数字（百分比）的变量。

> $fr = round(($f / $total) * 100); $sr = round(($s / $total) * 100); $tr = round(($t / $total) * 100);

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:20:27.437

您要的是图像，但这很容易在 HTML 中完成：

```
<div id="container" style="width: 100px">
    <div style="background-color:#F00;width=50%">&nbsp;</div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:24:21.930

其他人已经发布了这个，但我正在编写一个示例并决定发布它

现场示例：http: [//jsfiddle.net/vG6jy/4/](http://jsfiddle.net/vG6jy/4/)

**CSS**

```
.bar{
    height:16px;
    width:300px;
    border:1px solid #999;   
    margin:15px;
    background: #b3bead;
    background: -moz-linear-gradient(top,  #b3bead 0%, #dfe5d7 60%, #fcfff4 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#b3bead), color-stop(60%,#dfe5d7), color-stop(100%,#fcfff4));
    background: -webkit-linear-gradient(top,  #b3bead 0%,#dfe5d7 60%,#fcfff4 100%);
    background: -o-linear-gradient(top,  #b3bead 0%,#dfe5d7 60%,#fcfff4 100%);
    background: -ms-linear-gradient(top,  #b3bead 0%,#dfe5d7 60%,#fcfff4 100%);
    background: linear-gradient(to bottom,  #b3bead 0%,#dfe5d7 60%,#fcfff4 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b3bead', endColorstr='#fcfff4',GradientType=0 );
}
.bar .value{
    height:100%;
    background: #87e0fd;
    background: -moz-linear-gradient(top,  #87e0fd 0%, #53cbf1 40%, #05abe0 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#87e0fd), color-stop(40%,#53cbf1), color-stop(100%,#05abe0));
    background: -webkit-linear-gradient(top,  #87e0fd 0%,#53cbf1 40%,#05abe0 100%);
    background: -o-linear-gradient(top,  #87e0fd 0%,#53cbf1 40%,#05abe0 100%);
    background: -ms-linear-gradient(top,  #87e0fd 0%,#53cbf1 40%,#05abe0 100%);
    background: linear-gradient(to bottom,  #87e0fd 0%,#53cbf1 40%,#05abe0 100%);
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#87e0fd', endColorstr='#05abe0',GradientType=0 );  
}  ​ 
```

**HTML**

```
<div class="bar">
    <div class="value" style="width:0%;"></div>
</div>
<div class="bar">
    <div class="value" style="width:25%;"></div>
</div>
<div class="bar">
    <div class="value" style="width:50%;"></div>
</div>
<div class="bar">
    <div class="value" style="width:75%;"></div>
</div>
<div class="bar">
    <div class="value" style="width:100%;"></div>
</div>
​ 
```

**PHP**

```
<div class="bar">
    <div class="value" style="width:<?php echo $fr; ?>%;"></div>
</div> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T13:21:03.413

你把事情复杂化了。

```
<div class="meter">
    <span class="percentage" style="width: 25%"></span>
</div>

.meter { width: 150px; border 2px solid #666; }
.percentage { background-color: #00FF00; } 
```

# javascript - 如何在 Internet Explorer 的菜单中调试“摆动”

> ID：12691034
> 
> 赞同：1
> 
> 时间：2012-10-02T13:17:10.823
> 
> 标签：javascript, css, internet-explorer

当用户将鼠标悬停在其中的每个元素上时，我必须调试一个“摆动”的菜单。这只发生在 Internet Explorer 中。在其他浏览器中，如果我正在查看标记，它将在触发事件或应用样式时更新，您可以在样式跟踪中看到这一点。IE 不这样做，如果它可以我不知道。有没有办法在浏览中查看样式/标记的更新，住在标记/样式视图中，同时与页面交互？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:30:11.303

这听起来很像一个旧的空白错误。菜单是由无序列表组成的吗？如果是这样，每个列表项之间是否有回车（即每个 <li></li> 位于单独的行上）？

如果是这样，请尝试删除所有空格（因此所有列表项都在一行上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T19:42:12.837

所以我的问题是，当用户将鼠标悬停在每个项目上时，菜单项会“摆动”。问题是这只发生在 Internet Explorer 中。在其他浏览器允许您观看标记和样式的“实时”视图的情况下，IE 仅允许您通过单击视图上方的按钮或使用 F5 来刷新该视图。这会使事情复杂化，因为如果您将鼠标悬停在浏览器上，F5 将重新加载页面。如果您将鼠标移出并刷新，则菜单项会在您单击刷新按钮时丢失。

我的解决方案是隔离 mouseover 和 mouseout 事件调用的函数，它们是 7 个字符动态命名的垃圾。一旦我有了它们被称为的东西，我就可以调用它们并自己触发鼠标悬停和移出动作。然后，我能够刷新标记视图并查看正在更改的样式、应用样式。

原来，鼠标悬停事件添加了一种样式，该样式剥离了元素顶部和底部的填充。在所有其他浏览器中，都会呈现盒子模型，因此这无关紧要。在 IE 中，这意味着当您在菜单中移动时，一切都会“摆动”。

一定要喜欢遗留代码......和 ​​IE。

# c# - C#, bits & bytes - 如何从字节中检索位值？

> ID：12691038
> 
> 赞同：15
> 
> 时间：2012-10-02T13:17:37.033
> 
> 标签：c#

我正在从一个字节中读取一些值。我在用户手册中被告知这一字节包含 3 个不同的值。有一个看起来像这样的表：

![位表](../Images/79a6c1208d822789927a529c30692aac.png)

我解释这意味着精度占用 3 位，比例占用 2，大小占用 3，总共 8（1 个字节）。

我不清楚的是：

1 - 为什么它被标记为 7 到 0 而不是 0 到 7 （可能与意义有关？）

2 - 如何从那个字节中提取单个值？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-02T13:23:01.433

习惯上按字节的意义对位进行编号：位`x`表示`2^x`。根据这种编号方案，最低有效位编号为零，下一位编号为 1，依此类推。

获取单个位需要移位和屏蔽操作：

```
var size = (v >> 0) & 7;
var scale = (v >> 3) & 3;
var precision = (v >> 5) & 7; 
```

移动您需要获得的最右边部分的右边的位数（移动零被忽略；我添加它是为了便于说明）。

具有适合您想要获得的位数的最高数字的掩码：1 代表一位，3 代表两位，7 代表三位，`2^x-1`位`x`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T13:23:43.483

您可以进行转换和掩码，也可以使用 BitArray 类：http: [//msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx](http://msdn.microsoft.com/en-us/library/system.collections.bitarray.aspx)

BitVector32 示例：

```
BitVector32 bv = new BitVector32(0);

var size = BitVector32.CreateSection(7);
var scale = BitVector32.CreateSection(3, size);
var precision = BitVector32.CreateSection(7, scale);

bv[size] = 5;
bv[scale] = 2;
bv[precision] = 4; 
```

LINQPad 输出：

![LINQPad 输出](../Images/aea51c0e0163a2bfff90f0d1a50f5e65.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-02T13:21:21.293

1.  波塔托，波塔托。

2.  您将使用移位和掩码来展平不需要的位，如下所示：

    ```
    byte b = something; // b is our byte

    int size = b & 0x7;
    int scale = (b >> 3) & 0x3;
    int position = (b >> 5) & 0x7; 
    ```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-02T13:20:13.820

1\. 是的，最高有效位通常先写入。最左边的位标记为 7，因为当字节被解释为整数时，该位在设置时具有值 2 ⁷ (= 128)。

这是完全自然的，实际上与您编写十进制数的方式完全相同（最高有效位在前）。例如，数字 356 是 (3 x 10 **²** ) + (5 x 10 **¹** ) + (6 x 10 **⁰** )。

2.为了完成，如其他答案中所述，您可以使用位移位和按位与运算符提取各个值，如下所示：

```
int size = x & 7;
int scale = (x >> 3) & 3;
int precision = (x >> 5) & 7; 
```

重要说明：这假设各个值将被解释为*正整数*。如果这些值可能是负数，那么这将无法正常工作。鉴于变量的名称，这在这里不太可能成为问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T13:21:50.400

您可以通过按位算术执行此操作：

```
uint precision = (thatByte & 0xe0) >> 5,
    scale = (thatByte & 0x18) >> 3,
    size = thatByte & 7; 
```

# vim - GVim 作为 TFS 的合并工具

> ID：12691044
> 
> 赞同：8
> 
> 时间：2012-10-02T13:17:55.727
> 
> 标签：vim, merge

我想将 GVim 用作 TFS 2010 的合并工具。
我无法弄清楚 GVim 的参数。特别是参数 %4，当我使用它时，我得到一个空缓冲区。如果我不使用它，我会收到一条错误消息，我必须使用它。

![在此处输入图像描述](../Images/399ca92f5374683acdc91f5d9f4bfa91.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-18T21:13:50.330

这可能不完全符合您的喜好，但这是我将 GVim 用于合并工具的方式。

我将它设置为进行双向合并：它在左侧具有“源”（我*从中*合并），在右侧具有合并文件（从目标分支的信息开始）。

我是这样设置的：

```
command: C:\Program Files (x86)\Vim\vim73\gvim.exe
argument: -c "vert diffsplit %1 " %4 -c "wincmd l|0read %2  |diff" 
```

它的作用如下：

*   读取左侧的“源”文件，并拆分窗口 (-c "vert diffsplit %1")
*   在右侧打开合并结果 (%4)
*   运行一个快速脚本：
    *   在右侧窗口上移动 (wincmd l)
    *   读取我在分支中的现有更改 (0read %2)
    *   重新运行 diff 算法 (diff)

这让我可以根据传入的合并“区分”我的工作，并保存右侧将解决合并。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-13T17:04:57.557

您的屏幕截图表明您正在使用 Vim 7.3 。根据 Vim 网站：http: [//vim.wikia.com/wiki/Running_diff](http://vim.wikia.com/wiki/Running_diff)

> 在某些时候，“Vim without Cream”安装程序提供的 MyDiff 功能已被修改。从 Vim 7.3.138 开始，它仍然被破坏。

但是，您可以尝试以下详细模式参数

```
command : gvim
argument: -V -od %1 %2 
```

# html - Django css文件不起作用

> ID：12691046
> 
> 赞同：3
> 
> 时间：2012-10-02T13:17:57.937
> 
> 标签：html, css, django, django-staticfiles

我一直在四处寻找并尝试一切，但我似乎无法让我的 css 文件在 Django 模板中工作。我的 css 我调用了 style.css 模板中的代码现在看起来像：

`{% load staticfiles %}`

`<link rel="stylesheet" href="{{ STATIC_URL }}style.css" type="text/css" media="screen" />`

我仍在开发服务器上工作。在设置 py 我添加： `STATICFILES_DIRS = ( "home/henk-jan/website/Template/Database")`

django.contrib.staticfiles 安装在 Installed_apps

谁能帮我这个？干杯，亨克斯

编辑：我的模板（index.html）与我的 style.css 在同一个文件夹中，该文件夹是：/home/henk-jan/website/Template/Database

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T08:20:30.357

通过查看您的原始帖子，在我看来，您正在从两个不同的角度呈现您的页面。

首先，您`{% load staticfiles %}`将加载与 staticfiles 模块关联的模板标签。其次，在您引用的链接元素内部，`{{ STATIC_URL }}`该元素通过上下文进行扩展。

因此，我会推荐以下两种行动方案之一。

1 - 利用你在模板中加载的静态文件模块和模板标签。

为此，您应该将链接元素修改为如下所示：

```
<link rel="stylesheet" href="{% static "style.css" %}" type="text/css" media="screen" /> 
```

请注意，在这种情况下，我已将 替换`{{ STATIC_URL }}`为`{% static %}`模板标签。模板标签接受一个参数，该`{% static %}`参数是您希望以静态 URL 作为前缀的文件，并扩展为完整的字符串。

2 - 通过修改视图以使用上下文进行渲染来利用上下文。

该`{{ STATIC_URL }}`变量通过请求上下文提供。有许多有用的变量，如果你想利用它们，你可以依靠它们来扩展它们。问题是您必须确保**使用上下文**呈现模板，这意味着您可能必须更改一个或多个视图。

例如，在没有上下文的情况下呈现的过于简单的视图如下所示：

```
from django.shortcuts import render_to_response

def index_without_context(request):
    return render_to_response("index.html") 
```

*虽然使用*上下文渲染的同样过于简单的视图看起来像这样：

```
from django.shortcuts import render_to_response
from django.templates import RequestContext

def index_with_context(request):
    return render_to_response("index.html",
                              context_instance=RequestContext(request)) 
```

正如我上面所说，通过使用 a 渲染模板，`RequestContext`您可以获得其他变量等可用的变量，因此这是一个非常可行的选择。

最后，这实际上取决于您要保留确保静态文件正确呈现静态 URL 的逻辑的位置。如果您想在模板本身中使用该逻辑，我建议您采用该`{% load staticfiles %}`方法并使用`{% static %}`模板标签。如果您更喜欢使用该`{{ STATIC_URL }}`变量以及其他可能有用的变量可用，那么我建议您修改您的视图以使用 RequestContext 呈现。

您可以在有关此主题的 Django 文档部分中阅读有关使用上下文处理器或模板标签之间区别的更多信息：

[https://docs.djangoproject.com/en/1.4/howto/static-files/#referring-to-static-files-in-templates](https://docs.djangoproject.com/en/1.4/howto/static-files/#referring-to-static-files-in-templates)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:20:54.073

位置是否`"home/henk-jan/website/Template/Database"`有效？也许`"/home/henk-jan/website/Template/Database"`相反？现在缺少前面的正斜杠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:58:48.893

如果您在开发服务器上工作，您将希望让 Django 提供静态内容。当您投入生产时，您将让您的 Web 服务器处理提供静态内容的服务。

您将需要`STATIC_URL`指向静态内容的路径（在这种情况下，它看起来像`/Template/Database/`. 。听起来您可以正常工作。现在您只需要告诉 Django 在 DEBUG 模式下提供静态内容即可。请参阅这篇文章：[Django MEDIA_URL 和 MEDIA_ROOT](https://stackoverflow.com/questions/5517950/django-media-url-and-media-root/5518073#5518073)

# python - WxPython：如何在主父框架中停止进一步的代码执行，直到其子框架已关闭

> ID：12691048
> 
> 赞同：0
> 
> 时间：2012-10-02T13:18:02.400
> 
> 标签：python, wxpython, python-2.7

我正在开发一个用 Python 编码的项目，在 Wxpython 中使用 GUI 进行了最后 3 个不眠之夜，现在我被击中了。实际上，在主父框架内，我正在另一个**线程**中执行一个新的子框架，我想要的只是停止进一步的代码执行，直到它的子框架有完成工作并关闭。我曾尝试使用**threading.Thread.join()**方法，但它似乎不能有效地工作，并且在子框架关闭后主父框架挂起。有什么有效的方法来做这件事吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:28:52.927

使用 wx.Dialog 代替子框架及其 ShowModal() 方法来停止主框架的执行。从技术上讲，您也可以使用框架的 MakeModal() 方法来获得类似的效果，但我认为使用对话框更有意义。

顺便说一句，当使用 wxPython（或任何 GUI 工具包）的线程时，您必须使用工具包的线程安全方法来更新 GUI。您不应尝试从线程直接访问 GUI 元素，因为这是未定义的行为。相反，使用 wx.CallAfter、wx.CallLater 或 wx.PostEvent，因为它们是 wxPython 的线程安全方法。

也可以看看：

*   [http://wiki.wxpython.org/LongRunningTasks](http://wiki.wxpython.org/LongRunningTasks)
*   [http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/](http://www.blog.pythonlibrary.org/2010/05/22/wxpython-and-threads/)

# jquery - 如何在 JQuery 中获取单击元素的（DOM/文档）索引

> ID：12691053
> 
> 赞同：1
> 
> 时间：2012-10-02T13:18:29.380
> 
> 标签：jquery

我想使用 jquery 获取单击元素的索引 - 这应该很容易，`.index()`但我不希望在狭窄定义的选择器中使用索引，例如`$('div').index()`.

我想要的是该元素在页面/DOM 中的唯一索引——就像`$(everything).index()`它存在时一样。

这是我的简单 jquery 点击功能：

```
$("div").click(function (e) {
   e.stopPropagation();
   index = $(this).index();
}); 
```

我已经使用了一些示例 HTML：

```
<div>DIV 0 - I want to show as index=0 (which I do)</div>
<div>DIV 1 - I want to show as index=1 (which I do)</div>

<span>SPAN 0 - I want to show as (span) index=0</span>

<div>DIV 2 - I want to show as index=2 (but I don't, I show as 3)
    <div>DIV 3 - I want to show as index=3 (but I don't, I show as 0)</div>
    <span>SPAN 1 - I want to show as (span) index=1</span>
    <span>SPAN 2 - I want to show as (span) index=2</span>
</div> 
```

我已经[JSfiddled](http://jsfiddle.net/6n5zp/)和它一起玩了。

我的问题是这些：

1）我不知道如何为这些 DIVS（或任何其他元素）获取唯一索引号，因为`$(this)`仅指当前选择，因此一旦单击，嵌入式 DIV 将重新索引为零。

2）我需要这个适用于任何/所有 html 标签（不仅仅是 DIV）

感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:20:42.780

这可行，尽管它可能不是很有效：

```
$(document).on('click', '*', function (e) {
   e.stopPropagation();
   var others = document.getElementsByTagName(this.tagName);
   var index = [].indexOf.call(others, this);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T13:26:25.823

采用

```
$(document).on('click','*',function (e) {
    e.stopPropagation();
    var tag = this.tagName;
    var index = $(tag).index(this);  // it now works

    $('#output').html(index);
}); 
```

**演示在** [http://jsfiddle.net/6n5zp/1/](http://jsfiddle.net/6n5zp/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T13:26:58.310

使用 Alnitak 解决方案，这将适用于任何元素。

```
function getElementIndex(DOMELEMENT)
{
   var elements = document.getElementsByTagName(DOMELEMENT.tagName);
   return index = [].indexOf.call(elements , DOMELEMENT);
} 
```

# java - 从arrayList中删除线程并插入函数

> ID：12691055
> 
> 赞同：1
> 
> 时间：2012-10-02T13:18:40.140
> 
> 标签：java, multithreading, collections, arraylist

正如标题所述，我对基于线程的结构有疑问。我需要做的是：

*   一个线程在循环中运行并检查列表中是否存在某些内容，如果存在则对对象执行一些操作，然后将其从列表中删除

*   从“外部”调用并将新对象添加到此列表的函数。

这是我的方法：

```
public class Queue implements Runnable {
    private List<X> listOfObjects = new ArrayList<X>;

    public void addToList(X toAdd){
        listOfObject.add(toAdd);
    }

    public void run() {
        while(true){
            synchronized(listOfObjects){
            if(!listOfObjects.isEmpty()){
                listOfObjects.get(0).doSth();
                listOfObjects.remove(0);
            }
            }
        }
    }
} 
```

这是正确的方法吗？我是否也应该同步添加到此列表中？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T13:20:25.630

看起来您应该尝试[java.util.concurrent.BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)的实现，而不是尝试自己编写！我怀疑[LinkedBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)会很好地为您工作。您可以从多个源将条目写入队列，并且您的使用者线程将以线程安全的方式将每个条目取出并依次处理它。

请注意，您的消费者线程`BlockingQueue`将*等待*（通过调用该`take()`方法）。但是，您上面的实现将在等待队列中处理条目的同时旋转并消耗 CPU（如果您运行它并监视 CPU 使用情况，这应该很明显）。

这是[一篇解释性文章](http://tutorials.jenkov.com/java-util-concurrent/blockingqueue.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:21:03.513

您需要同步对列表的所有访问：

```
public void addToList(X toAdd){
    synchronized(listOfObject) {
        listOfObject.add(toAdd);
    }
} 
```

或者，您可以使用 List 的线程安全实现，例如[CopyOnWriteArrayList](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CopyOnWriteArrayList.html)，在这种情况下，您可以删除所有`synchronized`块。

ps：正如另一个答案中提到的，您似乎正在重新实现[ArrayBlockingQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ArrayBlockingQueue.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T13:22:22.600

最好使用`Collections.synchronizedList()`包装器而不是手动同步块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T13:22:26.423

您似乎正在尝试为线程创建队列以处理添加的元素。

更简单的方法是使用 ExecutorService。

```
ExecutorService service = Executors.newSingleThreadedPool();

// to add a task.
service.submit(new Runnable() {
    public void run() {
       // process X here
    }
}); 
```

# c# - 在文件中查找 C#

> ID：12691057
> 
> 赞同：3
> 
> 时间：2012-10-02T13:18:45.853
> 
> 标签：c#, asp.net, .net

我有一个包含多个子文件夹的文件夹。每个子文件夹中都有许多 .dot 和 .txt 文件。

C# .NET 中是否有一个简单的解决方案可以遍历每个文件并检查该文件的内容是否有关键短语或关键字？

```
Document Name        Keyword1         Keyword2         Keyword3        ...
  test.dot              Y               N                Y 
```

总结一下：

1.  选择一个文件夹
2.  输入要搜索的关键字列表
3.  然后程序将搜索每个文件并在最后输出类似上面的内容，我不担心创建数据表来显示数据网格，因为我可以这样做。我只需要执行类似于 Notepad++ 的 find in files 选项的 find in files 功能

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T13:22:12.413

您想要的是递归迭代目录中的文件（也许它是子目录）。

因此，您的步骤是使用 .NET 中的 Getfiles() 循环指定目录中的每个文件。然后如果你遇到一个目录循环它。

使用此代码示例可以轻松完成此操作：

```
 public static IEnumerable<string>  GetFiles(string path)
  {
        foreach (string s in Directory.GetFiles(path, "*.extension_here"))
        {
              yield return s;
        }

        foreach (string s in Directory.GetDirectories(path))
        {
              foreach (string s1 in GetFiles(s))
              {
                    yield return s1;
              }
        }
  } 
```

有关在 .NET 目录中遍历文件的更深入了解位于此处：

[http://blogs.msdn.com/b/brada/archive/2004/03/04/84069.aspx](http://blogs.msdn.com/b/brada/archive/2004/03/04/84069.aspx)

然后你使用 String 中的 IndexOf 方法来检查你的关键字是否在文件中（我不鼓励使用 ReadAllText，如果你的文件是 5 MB 大，你的字符串也是如此。逐行将减少内存消耗)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T13:33:15.270

您可以使用`Directory.EnumerateFiles`搜索模式和递归提示（`SearchOption.AllDirectories`）。其余的使用 LINQ 很容易：

```
var keyWords = new []{"Y","N","Y"};
var allDotFiles = Directory.EnumerateFiles(folder, "*.dot", SearchOption.AllDirectories);
var allTxtFiles = Directory.EnumerateFiles(folder, "*.txt", SearchOption.AllDirectories);
var allFiles = allDotFiles.Concat(allTxtFiles);
var allMatches = from fn in allFiles
                 from line in File.ReadLines(fn)
                 from kw in keyWords
                 where line.Contains(kw)
                 select new { 
                     File = fn,
                     Line = line,
                     Keyword = kw
                 };

foreach (var matchInfo in allMatches)
    Console.WriteLine("File => {0} Line => {1} Keyword => {2}"
        , matchInfo.File, matchInfo.Line, matchInfo.Keyword); 
```

请注意，您需要添加`using System.Linq;`

> 有没有办法只获取行号？

如果你只想要行号，你可以使用这个查询：

```
var matches = allFiles.Select(fn => new
{
    File = fn,
    LineIndices = String.Join(",",
                File.ReadLines(fn)
                .Select((l,i) => new {Line=l, Index =i})
                .Where(x => keyWords.Any(w => x.Line.Contains(w)))
                .Select(x => x.Index)),
})
.Where(x => x.LineIndices.Any());

foreach (var match in matches)
    Console.WriteLine("File => {0} Linenumber => {1}"
        , match.File, match.LineIndices); 
```

这有点困难，因为 LINQ 的查询语法不允许传递索引。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T13:28:52.160

第一步：找到所有文件。正如其他人所提到的，使用 System.IO.Directory.GetFiles() + System.IO.File.ReadAllText() 很容易完成。

第二步：在文件中查找关键字。如果您有一个关键字并且可以使用 IndexOf() 方法完成，这很简单，但是多次迭代文件（特别是如果它很大）是一种浪费。

要在文本中快速找到多个关键字，我认为您应该使用 Aho-Corasick 自动机（算法）。请参阅 CodeProject 上的 C# 实现：http: [//www.codeproject.com/Articles/12383/Aho-Corasick-string-matching-in-C](http://www.codeproject.com/Articles/12383/Aho-Corasick-string-matching-in-C)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T14:09:38.680

这是使用 Tim 的原始答案获取行号的方法：

```
var keyWords = new[] { "Keyword1", "Keyword2", "Keyword3" };
var allDotFiles = Directory.EnumerateFiles(folder, "*.dot", SearchOption.AllDirectories);
var allTxtFiles = Directory.EnumerateFiles(folder, "*.txt", SearchOption.AllDirectories);
var allFiles = allDotFiles.Concat(allTxtFiles);
var allMatches = from fn in allFiles
                 from line in File.ReadLines(fn).Select((item, index) => new { LineNumber = index, Line = item})
                 from kw in keyWords
                 where line.Line.Contains(kw)
                 select new
                 {
                     File = fn,
                     Line = line.Line,
                     LineNumber = line.LineNumber,
                     Keyword = kw
                 };

foreach (var matchInfo in allMatches)
    Console.WriteLine("File => {0} Line => {1} Keyword => {2} Line Number => {3}"
        , matchInfo.File, matchInfo.Line, matchInfo.Keyword, matchInfo.LineNumber); 
```

# c# - WPF 值转换器

> ID：12691059
> 
> 赞同：1
> 
> 时间：2012-10-02T13:18:55.210
> 
> 标签：c#, wpf

我正在制作一个 WPF 应用程序，我需要一个具有多个绑定路径的值转换器，这可能吗？

到目前为止，它适用于 1 条路径：

`Binding="{Binding Path=Price, Converter={StaticResource vPriceConvertor}}"`

我想把`Price`和`discount`给转换器，这样他就可以计算`endprice`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T13:24:11.183

查看[MultiBinding](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)类。例如：

```
<TextBlock Name="textBlock" DataContext="{StaticResource myViewModel}">
  <TextBlock.Text>
    <MultiBinding Converter="{StaticResource vPriceConvertor}"
                  ConverterParameter="myParameter">
      <Binding Path="Price"/>
      <Binding Path="Discount"/>
      <!-- Insert other paths here -->
    </MultiBinding>
  </TextBlock.Text>
</TextBlock> 
```

实现[IMultiValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.imultivalueconverter.aspx)而不是 IValueConverter 来实际进行转换，因为它支持多个源。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T13:24:25.300

价值转换器旨在......用于价值转换。这就是为什么他们是价值*转换器*。

要做你想做的事，你应该在视图模型中创建一个属性`EndPrice`，并在视图模型中计算它的值。您为什么要尝试将非 UI 逻辑带入 UI？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:11:23.427

帕里斯 -

您始终可以创建一个包含价格和折扣的集合（在视图模型中），然后通过您的 XAML（通过 IValueConverter）传递它。

但是要重新迭代@Dennis 和其他人指出-那么您的转换器将具有计算逻辑-不建议这样做。

# c# - 成功构建时在文件中包含版本号

> ID：12691069
> 
> 赞同：0
> 
> 时间：2012-10-02T13:19:39.030
> 
> 标签：c#, asp.net, .net, version

我开发了一个 ASP.NET 网站。在浏览器中查看应用程序时，版本号显示在应用程序的页脚中。但是即使应用程序没有运行，我也想与客户沟通版本号。使用构建后事件将其写入文本文件是否很好？如果是这样，我如何访问版本号（没有预定义的变量）以及如何通过命令行将其写入文本文件？有没有其他可能更简单的方法来完成这项工作？

谢谢你的帮助。

编辑：我忘记说的是，在使用“发布”对话框发布项目时应该包含它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:26:41.537

您可以使用诸如 msbuild 和 nant 之类的构建工具来控制构建号并更新 web.config 中的应用程序设置。或者您可以使用一些反射代码来检索它

```
Assembly web = Assembly.Load("App_Code");  
AssemblyName webName = web.GetName(); 
string myVersion = webName.Version.ToString(); 
```

最好将字符串存储在缓存中

# jquery - jQuery动画期间边框消失

> ID：12691071
> 
> 赞同：0
> 
> 时间：2012-10-02T13:19:50.730
> 
> 标签：jquery, jquery-animate, border

我使用 jquery 创建了滑动面板效果。一切正常，但是当面板向右滑动时，最右边的面板在动画期间会失去其右边框。我一直无法弄清楚为什么。任何有关为什么会发生这种情况的见解将不胜感激。谢谢。

代码：

```
<div id="content">
        <div class="panel" onclick="$(this).nextAll('.panel:not(.slid)').animate({left:'-=400px'},{ duration: 1000, queue: false }).addClass('slid');
                        $(this).prevAll('.panel').andSelf().filter('.slid').animate({left:'+=400px'},{ duration: 1000, queue: false }).removeClass('slid');"class="display" style="left:300px;"></div>
        <div class="panel" onclick="$(this).nextAll('.panel:not(.slid)').animate({left:'-=400px'},{ duration: 1000, queue: false }).addClass('slid');
                        $(this).prevAll('.panel').andSelf().filter('.slid').animate({left:'+=400px'},{ duration: 1000, queue: false }).removeClass('slid');" class="display" style="background-color: red; left:200px;"></div>
        <div class="panel" onclick="$(this).nextAll('.panel:not(.slid)').animate({left:'-=400px'},{ duration: 1000, queue: false }).addClass('slid');
                        $(this).prevAll('.panel').andSelf().filter('.slid').animate({left:'+=400px'},{ duration: 1000, queue: false }).removeClass('slid');"class="display" style="left:100px;"></div>
        <div class="panel" onclick="$(this).nextAll('.panel:not(.slid)').animate({left:'-=400px'},{ duration: 1000, queue: false }).addClass('slid');
                        $(this).prevAll('.panel').andSelf().filter('.slid').animate({left:'+=400px'},{ duration: 1000, queue: false }).removeClass('slid');"class="display" style="left:0px;"></div>
    </div> 
```

和CSS：

```
#content {
    position: relative;
    top: 40px;
    left:175px;
    height: 300px;
    width: 800px;
    border: 4px groove #191970;
    overflow: hidden;
}

#content .panel{
    position: absolute;
    float: left;
    height: 300px;
    width: 500px;
    border: 4px groove #191970;
    background-color: white;
    margin: -4px;
} 
```

# objective-c - 为什么我的自定义视图不会成为 iOS 的 First-Responder？

> ID：12691075
> 
> 赞同：4
> 
> 时间：2012-10-02T13:20:08.000
> 
> 标签：objective-c, ios, xcode, xcode4.5

我正在关注这本书，iOS Programming Big Nerd Ranch Guide，并且我已经上了一堂课，我要创建一个自定义视图 HypnosisView。现在，我想让这个视图在摇动时改变它的颜色，但它说我想使它成为第一响应者。

我用了，

```
- (BOOL)canBecomeFirstResponder
{
    return YES;
} 
```

和

```
BOOL success = [view becomeFirstResponder];
if (success) {
    NSLog(@"HypnosisView became the first responder"):
} else {
    NSLog(@"Could not become first responder");
} 
```

但是，每当我运行我的应用程序时，它总是说它不能成为第一响应者。

任何帮助，将不胜感激。

更新

我忘了提到我收到了这个输出消息。

> 应用程序窗口应该在应用程序启动结束时有一个根视图控制器

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T12:48:37.803

好吧。我想到了。我需要把委托方法

```
- (BOOL)canBecomeFirstResponder
{
    return YES;
} 
```

在 CustomView.m 文件中，而不是我的 App Delegate 文件中。轻松修复。

# windows-8 - 多用户会话测试中出现 Windows 8 桌面认证警告的原因是什么

> ID：12691077
> 
> 赞同：3
> 
> 时间：2012-10-02T13:20:09.217
> 
> 标签：windows-8, desktop-application

我有一个桌面应用程序，它试图将用户限制为每个会话一个实例（因此每个用户/远程桌面连接都可以运行一个副本）

我通过在事件名称上创建一个带有“Local\...”前缀的 EventWaitHandle 来做到这一点，如果没有创建，我退出程序。

验证工具的警告如下所示：

警告

多用户会话测试

• 警告：多用户会话测试检测到以下错误：◦执行测试过程时发生错误。

• 未修复的影响：多个用户可能无法在并发会话中启动应用程序。

• 如何解决：确保应用程序不会阻止本地或远程的多个并发会话。应用程序不得依赖全局互斥锁或其他命名对象来检查或阻止多个并发会话。如果应用程序不允许每个用户有多个并发会话，请为互斥锁或其他命名对象使用每个用户或每个会话的命名空间。有关详细信息，请参阅下面的链接：远程桌面服务编程指南 [http://msdn.microsoft.com/library/windows/desktop/aa383490(v=vs.85).aspx](http://msdn.microsoft.com/library/windows/desktop/aa383490(v=vs.85).aspx)

关于这个错误意味着什么以及如何摆脱它的任何想法？

我在登录多个帐户时测试了该程序，它正确地检测到该程序未在新会话上运行，尽管在前一个会话上运行。

有没有办法获得更详细的故障描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T14:55:07.717

[此链接](http://social.msdn.microsoft.com/Forums/windowsdesktop/en-US/9de5fc69-51c4-4239-907b-65d652829f9c/wack-multi-user-registry-check-error-the-application-did-not-install-any-shortcuts)表明 Windows 应用程序认证工具包 (WACK) 2.2 中存在错误，该错误已在可用于 Windows 8.1 Preview 的 WACK 3.0 中得到解决。我现在选择忽略这个特定的警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T19:07:40.073

运行 Windows 应用程序证书时为用户（选择用户或机器）设置

# python - 从时区和 UTC 时间，获取该时间点与本地时间的秒差

> ID：12691081
> 
> 赞同：2
> 
> 时间：2012-10-02T13:20:14.137
> 
> 标签：python, date, timezone, pytz, python-dateutil

这应该很简单，但我在 Python 中无法完全弄清楚。我想要一个函数，它接受两个参数，一个以秒为单位的 UTC 时间和一个像“欧洲/维也纳”这样的区域信息[名称](http://en.wikipedia.org/wiki/Tz_database)，并以秒为单位返回与本地时间的偏移量和该时间点的 UTC。

在 C 中它将是：

```
/* ... code to to set local time to the time zone I want to compare against,
   not shown here. Then call function below to get difference vs localtime.
   Hardly an ideal solution,
   but just to demonstrate what I want in a "lingua franca" (C): */

int get_diff_vs_localtime(const time_t original_utc_time)
{
    struct tm* ts;

    ts = localtime(&original_utc_time);

    return mktime(ts) - original_utc_time;
} 
```

我想我的问题真的可以归结为：“给定[奥尔森时区](http://www.iana.org/time-zones)（例如'欧洲/斯德哥尔摩'）和 UTC 时间，当地时间是什么时候？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:01:47.760

假设“UTC 时间以秒为单位”表示 POSIX 时间戳。要将其转换为斯德哥尔摩时间：

```
from datetime import datetime
import pytz

tz = pytz.timezone('Europe/Stockholm')

utc_dt = datetime.utcfromtimestamp(posix_timestamp).replace(tzinfo=pytz.utc)
dt = tz.normalize(utc_dt.astimezone(tz))
print(dt.strftime('%Y-%m-%d %H:%M:%S %Z%z')) 
```

`tz.normalize()`如果源时区是 UTC（就像在这种情况下），则不需要。

一个更简单的替代方法是使用`fromtimestamp()`'s`tz`参数，将“自纪元以来的秒数”转换为本地时间：

```
from datetime import datetime
import pytz

tz = pytz.timezone('Europe/Stockholm')

dt = datetime.fromtimestamp(posix_timestamp, tz)
print(dt.strftime('%Y-%m-%d %H:%M:%S %Z%z')) 
```

这两个示例产生相同的结果。

如果本地机器使用“正确的”时区，然后将从外部源接收到的 POSIX 时间戳转换为 UTC，则可以使用显式公式：

```
from datetime import datetime, timedelta
import pytz

utc_dt = datetime(1970, 1, 1, tzinfo=pytz.utc) + timedelta(seconds=posix_timestamp) 
```

最新的公式还可能支持更大的日期范围（1970 年之前、2038 年或 3000 年之后的日期不太可能出现问题）。

如果时间戳来自本地“正确”源，则应使用前两个示例（它们称为“正确” `time.gmtime()`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T14:45:26.100

您可以使用[pytz](http://pytz.sourceforge.net/)和[datetime](http://docs.python.org/library/datetime.html#datetime.datetime)以以下方式执行某些操作：

```
from datetime import datetime
from pytz import timezone

def get_diff(now, tzname):
    tz = timezone(tzname)
    utc = timezone('UTC')
    utc.localize(datetime.now())
    delta =  utc.localize(now) - tz.localize(now)
    return delta 
```

对于以下示例...

```
now = datetime.utcnow()
print(now)
tzname = 'Europe/Stockholm'
delta = get_diff(now, tzname)
print(delta)
now_in_stockholm = now + delta
print(now_in_stockholm) 
```

...输出：

```
2012-10-02 14:38:56.547475
2:00:00
2012-10-02 16:38:56.547475 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-16T17:08:06.590

这已经很老了，但我找不到一个很好的答案，所以这就是我想出的：

```
from datetime import datetime
local = datetime.now()
utc = datetime.utcnow()
int((local - utc).days * 86400 + round((local - utc).seconds, -1)) 
```

回报：

```
-21600 
```

因为我（目前）落后于 UTC 21600 秒（6 小时）。

注意：计算的第二个日期（在这种情况下为 UTC）需要四舍五入，因为每次计算的时间差异非常小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T14:19:22.027

> 我想我的问题真的可以归结为：“给定奥尔森时区（例如'欧洲/斯德哥尔摩'）和 UTC 时间，当地时间是什么时候？

如果我正确理解您的问题：

```
from pytz import timezone
import datetime, time

tz = timezone('Asia/Kuwait')
utc_dt = datetime.datetime.utcfromtimestamp(time.time())
utc_dt + tz.utcoffset(utc_dt)

>>> tz.utcoffset(utc_dt).seconds
10800
>>> tz
<DstTzInfo 'Asia/Kuwait' LMT+3:12:00 STD>
>>> utc_dt + tz.utcoffset(utc_dt)
datetime.datetime(2012, 10, 2, 17, 13, 53, 504322)
>>> utc_dt
datetime.datetime(2012, 10, 2, 14, 13, 53, 504322) 
```

# objective-c - 在 iOS 的 UITextView 中没有显示笑脸（表情符号）？

> ID：12691083
> 
> 赞同：0
> 
> 时间：2012-10-02T13:20:17.330
> 
> 标签：objective-c, ios, plist, emoji

我已将所有 uni-codes（表情符号字符）存储在 iphone 支持的 plist 中。当我直接写为

```
- (IBAction)sendButtonSelected:(id)sender {
NSMutableArray *emoticonsArray = [[NSMutableArray alloc]initWithObjects:@"\ue415",nil];
NSString *imageNameToPass = [NSString stringWithFormat:@"%@",[emoticonsArray objectAtIndex:0]];
NSLog(@"imageNameToPass1...%@",imageNameToPass);
messageTextView.text =imageNameToPass;
 } 
```

它在 textview 中显示表情符号，但只要我从 plist 中获取

```
NSString *plistPath1 = [[NSBundle mainBundle] pathForResource:@"unicodes" ofType:@"plist"];
NSDictionary *dictionary = [[NSDictionary alloc] initWithContentsOfFile:plistPath1];
activeArray= [dictionary objectForKey:categoryString];

NSLog(@"activeArray...%@",activeArray);

emoticonsArrayForHomeEmoji = [[NSMutableArray alloc]initWithCapacity:[activeArray count]];
for(int i=0; i<[activeArray count]; i++)
{
    id objects = (id)[activeArray objectAtIndex:i];
    [emoticonsArrayForHomeEmoji insertObject:objects atIndex:i];
}
NSString *imageNameToPass = [NSString stringWithFormat:@"%@",[emoticonsArrayForHomeEmoji 
objectAtIndex:0]];
NSLog(@"imageNameToPass1...%@",imageNameToPass);
messageTextView.text =imageNameToPass; 
```

然后它在文本视图中将 unicode 显示为文本 \ue415 而不是表情符号。

我做错了什么？请帮帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:08:34.970

@AliSoftware 说，Plist 数据将按原样读取，因此您可以按照以下步骤将表情符号添加到您的 plist：

1) 转到顶部栏，然后单击编辑。

2) 现在选择特殊字符

3）现在将表情符号拖放到plist。

有关更多详细信息，我正在添加快照。看看它。![第 1 步](../Images/e401e377c4ac2b9ea1f74e9720ba03f2.png)![第 2 步](../Images/3fc5de01ba22c3ee01384493b15f2a60.png)![第 3 步](../Images/5fb5cf8573a02e7e866bb8e51c2715fc.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:38:00.037

该`\uxxxx`符号仅由编译器解释（因为源代码通常是 ASCII 或 MacRoman 或其他但不经常是 UTF8）

Plist 文件直接使用字符，并以 UTF8 编码。因此，您应该直接将表情符号字符本身插入 plist，而不是使用`\uxxxx`符号，因为 Plist 数据将按原样读取。

Lion 和 Mountain Lion[键盘调色板直接包含表情符号字符](http://www.osxfacile.com/Multimedia/Images/palette3.jpg)，因此无论如何在编辑 PLIST 时插入字符应该不难。

# playframework - 通过 flash 成功/错误消息播放框架 xss

> ID：12691105
> 
> 赞同：1
> 
> 时间：2012-10-02T13:21:35.103
> 
> 标签：playframework, xss, playframework-1.x

在播放框架中，Flash cookie 未签名，用户可以对其进行修改。当我使用它将错误消息从一个请求传递到另一个请求并在我的模板中像这样打印时

```
&{flash.error} 
```

错误消息可能包含邪恶的 html 注入代码。这正是框架教程告诉我的做法，所以这真的是一个安全漏洞还是我只是偏执狂？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:26:23.397

这取决于您从哪里获得闪存值。如果您是从您设置的脚本中的字符串生成它，那很好，但是当您使用该机制回发用户输入时，您会遇到安全问题。

# gradle - Gradle - 我可以在项目依赖项中包含任务的输出吗

> ID：12691107
> 
> 赞同：6
> 
> 时间：2012-10-02T13:21:48.097
> 
> 标签：gradle

我有一个任务，它从这些源（比如 project `a`）生成 java 源和一组 jar。我想将这些 jar 导出到依赖项目（例如 project `b`）。所以这大致是我现在所拥有的：

```
//a.gradle

configurations{
  generatedJars
}

task generateJars(type: JavaExec) { 
  //generate jars ... 

  outputs.files += //append generated jars here
} 

dependencies{
  generatedJars generateJars.outputs.files
}

//b.gradle

dependencies{
  project(path: ':a', configuration: 'generatedJars')
} 
```

它工作正常，除了添加`generateJars.outputs.files`为依赖项不会告诉 gradle`generateJars`在还没有生成 jars 时它必须运行任务。我尝试将任务本身添加为依赖项，希望它的工作方式与将 jar/zip 任务添加到工件配置（例如`artifacts{ myJarTask }`）时的工作方式相同，但它会抛出一个错误，告诉我我不能这样做. 当然，我可以在开始评估`generateJars`之前在构建过程中的某个地方注入任务`:b`，但这既笨拙又脆弱，所以我想避免它。

我觉得我应该将生成的 jar 添加到`artifacts{ ... }`项目中，但我不确定如何使它们对依赖项目可见。有没有更好的方法来实现这一目标？

依赖项目 (project `b`) 需要设置 IntelliJ IDEA 模块类路径以指向 project`a`生成的 jars。有点像这样（伪代码）：

```
//b.gradle

idea{
  module{
    scopes.COMPILE.plus += project(path: ':a', configuration: 'generatedJars').files
  }
} 
```

到目前为止，我已经尝试简单地在`:a`'s `generatedJars`in上添加一个项目依赖项`:b`，但 Idea 插件只是将模块添加`:a`为模块依赖项并假设它导出其生成的 jars（这可能是一个正确的假设），因此不将生成的 jars 添加到`:b`的类路径。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T18:50:57.727

首先，您需要单独的配置吗？也就是说，您是否有*不*`a`应该看到生成的罐子的客户？如果没有，您可以将生成的 Jars 添加到配置中，这将简化事情。*`archives`*

 *其次，将生成的 Jars 添加到配置中的正确方法是（而不是`dependencies`块）：

```
artifacts {
    generatedJars generateJars
} 
```

这应该确保`generateJars`任务在需要时自动运行。

第三，我会省略`+=`after `outputs.files`，尽管它可能没有什么不同。您还应该添加必要的输入。

第四，为什么你需要一个`JavaExec`任务来生成罐子？您可以将生成的源代码添加到某个源集并让 Gradle 构建它们吗？

第五，IDEA没有对应Gradle的项目配置依赖的概念。一个 IDEA 模块要么完全依赖于另一个模块，要么完全不依赖。您有两个选择：要么使用模块依赖项并将生成的源代码作为依赖模块的源文件夹（最好在 Gradle 和 IDEA 构建中），或者将生成的 Jars 作为外部依赖项传递给 IDEA。在任何一种情况下，您都应该将任务依赖项添加`ideaModule`到适当的生成任务中。如果这仍然不能带来令人满意的 IDEA 设置，您可以考虑将 Jars 的生成移到单独的子项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-29T00:08:02.243

对于我的用例，我有一个 C++ 项目，它生成了一些本机库，我的 java 项目需要加载这些库才能运行。

### 在项目 ':native' build.gradle 中：

```
task compile(type: Exec, group: 'build') {
    dependsOn ...

    outputs.files(fileTree('/some/build/directory') {
        include 'mylib/libmy.so'
    })

    ...
} 
```

### 在项目 java 应用程序 build.gradle 中：

```
configurations {
    nativeDep
}

// Add dependency on the task that produces the library
dependencies {
    nativeDep files(project(':native').tasks.findByPath('compile'))
}

// Unfortunately, we also have to do this because gradle will only
// run the ':native:compile' task if we needed the tasks inputs for another
// task
tasks.withType(JavaCompile) {
    dependsOn ':native:compile'
}

run {
    doFirst {
        // Use the configuration to add our library to java.library.path
        def libDirs = files(configurations.nativeDep.files.collect {it.parentFile})
        systemProperty "java.library.path", libDirs.asPath
    }
} 
```*

# entity-framework - EF5：来自存储过程的多个结果集

> ID：12691117
> 
> 赞同：0
> 
> 时间：2012-10-02T13:22:18.720
> 
> 标签：entity-framework, entity-framework-5

我按照[这篇](http://milesquaretech.com/Blog/post/2012/03/19/Entity-Framework-5-%E2%80%93-Multiple-Entity-Typed-Result-Sets-from-a-Stored-Procedure.aspx)文章从存储过程中检索多个实体集。

我已经更改了我的实体的列映射，以便它们通过 Resharper。我是否必须重写结果映射中的列映射？

例如，我有以下 EntitySetMapping：

```
 <EntitySetMapping Name="IrmaObjectConfiguraties">
        <EntityTypeMapping TypeName="IrmaModel.IrmaObjectConfiguratie">
          <MappingFragment StoreEntitySet="IrmaObjectConfiguratie">
            <ScalarProperty Name="Gid" ColumnName="GID" />
            <ScalarProperty Name="IrmaObjectGid" ColumnName="IrmaObject_GID" />
            <ScalarProperty Name="IrmaConfiguratieGid" ColumnName="IrmaConfiguratie_GID" />
          </MappingFragment>
        </EntityTypeMapping>
      </EntitySetMapping> 
```

此实体作为存储的 proc 结果集的一部分返回 bij：

```
 <ResultMapping>
          <EntityTypeMapping TypeName="IrmaModel.IrmaObjectConfiguratie">
            <!--ScalarProperty Name="Gid" ColumnName="Gid" />
            <ScalarProperty Name="IrmaObjectGid" ColumnName="IrmaObject_Gid" />
            <ScalarProperty Name="IrmaConfiguratieGid" ColumnName="IrmaConfiguratie_Gid" /-->
          </EntityTypeMapping>
        </ResultMapping> 
```

当我删除注释时，导入函数的执行正常，但是当没有列映射时，我检索到以下错误：

> *数据读取器与指定的“IrmaModel.IrmaObjectConfiguratie”不兼容。类型的成员“IrmaObjectGid”在数据读取器中没有同名的对应列。*

作为一种解决方法，我可以再次定义所有列映射，但也可以使用在`EntitySetMapping`?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T17:06:33.617

我不认为 ResultMapping 重用来自 EntitySet 映射的映射。似乎（我在这里不是 100% 肯定）如果您不指定属性 <-> 列映射，EF 将尝试使用属性名称作为存储过程返回的结果集中的列名称。

# ipad - 在 iOS 6.0 中设置状态栏方向

> ID：12691120
> 
> 赞同：5
> 
> 时间：2012-10-02T13:22:28.313
> 
> 标签：ipad, ios6, uiinterfaceorientation, uiapplication, uistatusbar

> **可能重复：**
> [setStatusBarOrientation:animated: 在 iOS 6 中不工作](https://stackoverflow.com/questions/12563954/setstatusbarorientationanimated-not-working-in-ios-6)

在 iOS 6.0 中，由于 AppDelegate 默认扩展 UIRepsonder 而不是 UIApplication，因此没有全局 sharedApplication 对象。我错过了什么吗？我正在尝试使用以下设置状态栏方向，但它似乎不再起作用。我在 iOS 6.0 模拟器上对其进行了测试。我知道您可以从 plist 设置中设置状态栏色调颜色，但谁能告诉我如何在 iOS 6.0 中以编程方式设置状态栏方向？

```
 [[UIApplication sharedApplication] setStatusBarOrientation:UIDeviceOrientationPortrait animated:NO] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:33:38.913

修复了这个。只有在我的 rootViewController 中实现了以下方法时，它才有效。

```
-(BOOL)shouldAutorotate
{
    return YES;
}

-(NSUInteger)supportedInterfaceOrientations
{
    return 0;
} 
```

# bash - 使用变量间接扩展的 Bash 数组扩展

> ID：12691121
> 
> 赞同：2
> 
> 时间：2012-10-02T13:22:35.550
> 
> 标签：bash

我正在尝试扩展通过间接扩展获得的数组中的所有值：

```
> my_array=(coconut banana)
> echo "${my_array[@]}" 
coconut banana
> my_array_name=my_array
> echo ${!my_array_name}
coconut
> echo "${!my_array_name[@]}"
0 
```

我在最后一个命令中错误地使用了“数组键列表”，因为我不知道如何键入正确的命令？

我想得到：

```
coconut banana 
```

可能不诉诸一些丑陋`eval`的黑客..一个烂黑客的例子：

```
> echo \${$my_array_name[@]}
${my_array[@]}
> eval echo \${$my_array_name[@]}
coconut banana 
```

### 笔记

`my_array`可能包含带空格的值！

### 编辑

在我正在编写的函数中，my_array_name 是通过 "$1" 设置的，所以我不能从字面上使用它。

类似于：[https](https://unix.stackexchange.com/questions/20171/indirect-return-of-all-elements-in-an-array) ://unix.stackexchange.com/questions/20171/indirect-return-of-all-elements-in-an-array但我需要避免使用`eval`以防止脚本在环境*在正确的时间*被“黑客”了......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:33:18.087

这应该工作

```
my_array_name='my_array[@]'
echo "${!my_array_name}" 
```

评论后：您必须使用数组名称和'[@]'创建一个字符串，另一个示例

```
my_array_name="$1"'[@]'
echo "${!my_array_name}" 
```

评论后：在函数中测试

```
display_elem() {
  local arrname
  arrname="$1[@]"
  printf "%s\n" "${!arrname}"
}

display_elem my_array 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:32:30.927

问题是`my_array_name=my_array`。您需要检索 的所有值`my_array`。试试这个：

```
 my_array_name=${my_array[@]}
 echo "${my_array_name[@]}" 
```

# php - 绕过控制器身份验证

> ID：12691124
> 
> 赞同：0
> 
> 时间：2012-10-02T13:22:48.763
> 
> 标签：php, logic, codeigniter-2

我目前正在为登录用户编写一次共享功能，以将一次性链接发送给另一个人（没有先前的用户帐户）。

目前，我有一个基本控制器，它验证用户/密码凭据，并处理身份验证，**我的所有控制器都从该基本控制器扩展**。

**为了处理一次性共享，我：**

*   生成唯一标识
*   在数据库中插入日期字段设置为 NULL 的 id
*   向用户发送一个指向控制器的链接，该控制器将唯一 ID 作为参数
*   访问链接时，如果唯一 ID 存在并且日期为 NULL，那么我将向用户显示正确的视图并将日期字段设置为当时恰好是 TIMESTAMP。

这行得通，但是...

我有另一个控制器（**/media**），其任务是从安全路径中检索图像，并将其作为图像输出。在一次性视图中，我访问的图像如下：

```
<img src="/media/image-id" /> 
```

因为该控制器从处理登录的基本控制器扩展而来，所以没有帐户的一次性用户被拒绝访问。

我不想失去这一级别的安全性，但我需要有一种方法来允许一次性用户访问内容。

*   我应该采取什么方法来规避一次性用户的控制器安全性？

感谢您的任何见解！

S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:47:22.600

如果不了解您是如何组织基本控制器或从其扩展的控制器，这很难说。我们真正能做的就是猜测。您是否尝试过创建一个允许用户向基本控制器进行身份验证的临时会话？我的意思是，设置一个会话，根据链接是什么来限制他们的访问？这样，您的安全系统仍在使用中，您无需进行任何黑客工作。

# c++ - C++ 中的运算符重载和 & 符号

> ID：12691128
> 
> 赞同：3
> 
> 时间：2012-10-02T13:22:56.270
> 
> 标签：c++, class, operator-overloading

> **可能重复：**
> [在像 ostream& operator <<(...) 这样的类名之后使用 & 符号是什么？](https://stackoverflow.com/questions/1572016/whats-the-ampersand-for-when-used-after-class-name-like-ostream-operator)

我是 C++ 新手，我可能有一个非常愚蠢的问题。我见过这样的事情：

```
Vector3f & operator = (Vector3f & obj)
{
    _item[0] = obj[0];
    _item[1] = obj[1];
    _item[2] = obj[2];

    return *this;
} 
```

我想知道为什么在 Vector3f 之后有一个 & 符号。它在做什么魔法？我在任何地方都找不到任何解释。最重要的是，上面的东西和

```
Vector3f operator = (Vector3f obj)
{
    _item[0] = obj[0];
    _item[1] = obj[1];
    _item[2] = obj[2];

    return *this;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:24:31.207

这是 C++ 的按引用传递和按引用返回的语法。它只是意味着参数是调用上下文中对象的别名，而不是副本，并且类似地，返回的对象实际上是`*this`，而不是副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:24:27.107

第一个接受 a`Vector3f`引用，并返回 a`Vec3torf`引用。第二个按值获取和返回（即在语义上它会复制参数以及`*this`）。

# oracle - 甲骨文/PLSQL。仅选择两个表之间的最佳匹配

> ID：12691130
> 
> 赞同：1
> 
> 时间：2012-10-02T13:22:56.330
> 
> 标签：oracle, match

我有两张桌子：

```
Vehicles 
make    model         modification    
Audi     A 5         A 5 2010 Sportsback 2.8      
Audi     A 5         A 5 2012 Quattro L     
Audi     A 5         A 5 Cabriolet 
```

和

```
matchingModel 
make    model      modContain    modEnd    finalModel    
Audi     A 5       Sportback              A5 Sportback
Audi     A 5                       L        A5 L
Audi     A 5                                A5 
```

我的任务是通过查找匹配项来获得最合适的 finalModel（可以在下面的选择中看到）。首先我尝试加入表格

```
(SELECT 
matchingModel.finalModel
  FROM vehicles
    LEFT OUTER JOIN matchingModel ON 
matchingModel.TEXT1 = vehicles.make

    AND vehicles.model = nvl(matchingModel.model,vehicles.model)
    AND vehicles.modification LIKE decode(matchingModel.modContain, NULL, vehicles.modification, '%'||matchingModel.modContain||'%')
    AND vehicles.modification LIKE decode(matchingModel.modEnd, NULL, vehicles.modification, '%'||' '||matchingModel.modEnd)
)
AS bestMatch 
```

但这不起作用，因为 Sportsback 被发现为 sportsback，后来它被覆盖为简单的 A5，因为它也匹配。

所以接下来我通过“nvling”所有可能的选项来实现这一点：nvl（nvl（nvl（选择制造，模型适合和modContains在修改中间并且选项单元格为空），（选择制造，模型适合和modEnd 就像 Modification 的结尾，并且 modEnd 不为空），（选择适合的品牌和模型等等）） AS Bestmatch 这有效，但速度很慢（并且两个表都有超过 500k 的记录）。

这只是非常庞大的选择的一部分，因此很难以这种正常方式重写。无论如何，问题是，是否有任何最佳实践如何在 oracle 中快速获得最佳匹配？我遇到的问题是性能，或者值适合两次，或者“where”子句不起作用，因为我不知道 modContain 或 modEnd 是否为空。

先感谢您。对不起英语。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T21:11:44.703

它还没有完成，但我制定了一个示例，您可以继续为自己制定：[SQL Fiddle Demo](http://sqlfiddle.com/#!4/9bce8/9)

```
select * from (
(select 
  case when v.modification like '%'||m.modContain||'%' then 2
       when m.modcontain is null                       then 1
                                                       else 0 end m1,
       case when v.modification like '%'||m.modend     then 2
            when m.modend is null                      then 1
                                                       else 0 end m2
 , m.make mmake, m.model mmodel, modcontain, modend, finalmodel
 , v.make vmake, v.model vmodel, modification
from vehicles v, matchingmodel m
where
     v.make  = m.make
 and soundex(v.model) = soundex(m.model) ) ) x
order by m1+m2 desc 
```

因此，子查询将匹配项加在一起，最高匹配项应该是您的最佳匹配项。我还使用了 soundex，它也可能对您有所帮助，因为它们`Sportback`并不`Sportsback`完全相同，这有助于我制作`A5`和`A 5`制作相同的东西。此外，为了加快速度，您将不得不大量分配良好的指标并查看解释计划，特别是如果您有 50 万条记录。这不是一件容易的事。

对于编写未经测试的程序（这是一个好主意）的想法，它可能看起来像这样：

```
create or replace function vehicle_matching(i_vehicles vehicles%rowtype,
                                            i_matchingmodel matchingmodel%rowtype)
return number
is
   l_return number;
begin
   if   i_vehicles.modification like '%'||i_matchingmodel.modContain||'%' then 
      l_return := 3;
   elsif soundex(i_vehicles.modification) like '%'||soundex(i_matchingmodel.modContain)||'%' then
      l_return := 2;
...

   if i_vehicles.modification like '%'||i_matchingmodel.modend then
      l_return := l_return + 1; -- there is no i++ in PL/SQL
   elsif 
...

   return l_return;
end vehicle_matching; 
```

此外，我还在想，使用它是否比使用它更有效`INSTR`，但我实际上并不认为是这种情况。 `SUBSTR``%`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:33:20.443

你可以考虑这样的事情：

编写一个查询以在任何部分匹配上返回 1，然后编写另一个查询以在另一个部分匹配上返回另一个 1 - 等等。

对所有可能计入“相似性”的列重复此操作

最后，您将找到 1 的总和（或计数）最高的行，这将是最接近的匹配。

# macos - 删除符号链接

> ID：12691134
> 
> 赞同：1
> 
> 时间：2012-10-02T13:23:04.457
> 
> 标签：macos, mamp, symlink

几周前，我在本地机器上创建了一个符号链接，当时它运行良好，但现在我意识到我创建了一个错误的链接，现在我的本地主机上的所有内容都指向一个特定的文件夹。

我完全忘记了我在哪里创建了这个链接，所以我现在不知道如何删除它。

我正在使用 MAMP。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:41:23.950

我看到两种可能的方式来理解你的问题。

一种是您在 File -> Preferences -> Apache -> Document Root 中将您的文档根目录（localhost:8888，MAMP 中的默认值）设置为您不想要的东西。

在这种情况下，只需在该位置选择另一个文档根就足够简单了。

我看到的第二种可能性是，使用终端，您从该文档根目录添加了一个符号链接到某个新位置，在这种情况下，您可以返回终端，导航到文档根目录，并且只有在您确定这是一个符号链接，简单地说

```
 rm symlink_name 
```

这将删除链接。

# javascript - Javascript for循环直到 - 多个条件

> ID：12691142
> 
> 赞同：17
> 
> 时间：2012-10-02T13:23:26.000
> 
> 标签：javascript, for-loop

我正在使用 javascript，使用正则表达式从 html 代码中抓取图像。

我希望循环运行直到脚本找不到更多图像或直到它达到 12。

我正在尝试以下但不工作：

```
var imgs = d.getElementsByTagName('img'), found = [];
for(var i=0,img; ((img = imgs[i]) || ( $i < 13)); i++) 
```

这可能吗？我在正确的路线上吗？

对javascript很陌生，但正在尝试！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-02T13:26:46.653

您应该使用`&&`而不是`||`. 另外，`$i`应该是`i`。

```
for(var i=0, img; (img = imgs[i]) && (i < 12); i++)
     found.push(img); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T13:25:08.570

假设您要`found`包含前 12 个：

```
var imgs = d.getElementsByTagName('img');
var found = [].slice.call(imgs, 0, 12); 
```

你必须使用`[].slice.call(imgs, ...)`而不是`imgs.slice()`因为`imgs`它只是一个伪数组，而不是一个真正的数组。

写作的替代方法`[].slice`是`Array.prototype.slice`.

如果您想在循环中执行其他操作，只需使用上面创建的数组来确保您只处理前 12 个图像：

```
for (var i = 0, n = found.length; i < n; ++i) {
    // do something with found[i];
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T13:25:17.453

我个人讨厌人们在`for`循环的条件子句中进行赋值，因为看起来有人将赋值 ( `=`) 误认为是比较 (`===`或`==`)。最好在别处做逻辑。

```
var imgs = d.getElementsByTagName('img'), 
    found = [],
    i,
    imgsLength = imgs.length,
    max = imgsLength > 13 ? 13 : imgsLength;
for (i = 0; i < max; i++) {
    found.push(imgs[i]);
} 
```

或者

```
var imgs = d.getElementsByTagName('img'), 
    found = [],
    i,
    imgsLength = imgs.length;
for (i = 0; i < 13 && i < imgsLength; i++) {
    found.push(imgs[i]);
} 
```

# file - 网盘的骆驼文件组件

> ID：12691144
> 
> 赞同：1
> 
> 时间：2012-10-02T13:23:33.477
> 
> 标签：file, tomcat, service, apache-camel, network-drive

我需要使用 Apache tomcat 的系统服务将文件保存到网络驱动器并得到所有时间错误：

```
Exception: org.apache.camel.component.file.GenericFileOperationFailedException: Cannot store file: u:\xxx.txt 
```

我的路线示例：

```
<route id="myRoute">
        <from uri="quartz:myQuartz?cron=0+0+*+?+*+MON-FRI"/> 
        <camel:doTry> 
            <bean method="getData" ref="myService"/>
            <marshal ref="bindyFixedDataformat"/>
            <to uri="file:u:?fileName=xxx.txt&amp;autoCreate=false&amp;fileExist=Append"/>
            <to uri="file://c:/XXX/files?fileName=xxx-${date:now:yyyyMMdd}.txt"/>
            <camel:bean method="setProcessed" ref="myService"/>
        <camel:doCatch>
            <exception>java.io.IOException</exception>
            <camel:log message="Network drive (U:) is not available, please renew connection!" loggingLevel="ERROR"/>
            <camel:bean method="setFailed" ref="myService"/>
        </camel:doCatch>
        <camel:doCatch>
            <exception>java.lang.Exception</exception>
            <camel:log message="Unexpected error has occured!" loggingLevel="ERROR" />
            <camel:bean method="setFailed" ref="myService"/>
        </camel:doCatch>
        </camel:doTry>
    </route> 
```

“U”盘是映射的网盘。但是与我的第二个分区磁盘“D”文件相同的路线创建成功。

我正在生成 WAR 文件并使用 Apache Tomcat 的本地系统服务运行它。

有趣的是，在服务之前，当我通过 maven 使用 eclipse 运行同一个项目时 - 复制到 U 盘是成功的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:28:14.107

本地系统服务用户可能看不到您映射的驱动器“U”。解决方案：使用 UNC 路径。

请注意，运行 Tomcat 的用户将需要访问网络路径的权限——通常本地系统服务用户没有权限。在这种情况下，您可以以具有权限的用户身份运行 Tomcat，即通过在服务的“登录”选项卡中更改用户。

# php - XPath 不断返回空节点列表

> ID：12691145
> 
> 赞同：2
> 
> 时间：2012-10-02T13:23:34.097
> 
> 标签：php, html, xpath, domdocument

我正在尝试解析一个充满 .htm 文件的文件夹。所有这些文件都包含 1 个需要删除的特定元素。它是一个`td`带有`class="hide"`. 到目前为止，这是我的代码。 `$dir. entry`是文件的完整路径。

```
$page = ($dir . $entry);
$this->domDoc->loadHTMLFile($page);
// Use xpath query to find the menu and remove it
$nodeList = $xpath->query('//td[@class="hide"]'); 
```

不幸的是，这就是事情已经出错的地方。如果我执行`var_dump`节点列表，我会得到以下信息：

```
object(DOMNodeList)#5 (0) { } 
```

只是为了让你们了解我要选择的内容，这里有一个摘录：

```
<td width="160" align="left" valign="top" class="hide">
    lots of other TD's and content here
</td> 
```

到目前为止，有人认为我的想法有什么问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:41:44.913

您的初始文件是 xhtml（即带有`<html xmlns="http://www.w3.org/1999/xhtml">`）吗？如果是这样，那么您的元素将被命名空间，您需要使用设置前缀映射`$xpath->registerNamespace`，然后在表达式中使用此前缀

```
$xpath->registerNamespace('xhtml', 'http://www.w3.org/1999/xhtml');
$nodeList = $xpath->query('//xhtml:td[@class="hide"]'); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T13:27:09.250

var 转储 xpath 节点列表对象不显示任何内容。var 转储节点列表的长度。

```
var_dump($nodeList->length); 
```

如果该值大于 0，那么您可以使用 foreach 对其进行迭代：

```
foreach($nodeList as $node)var_dump($node->tagName); 
```

希望这可以帮助。

为了进一步说明，这里是一个完整的工作代码片段：

```
<?php
$html = <<<END
<html>
    <body>
        <td>

        </td>
        <td class="hide"></td>
        <td class="hide"></td>
    </body>
</html>
END;
$dom = new DOMDocument;
$dom->loadHtml($html);
$xpath = new DOMXpath($dom);
$nodeList = $xpath->query('//td[@class="hide"]');
// Shows a blank object
var_dump($nodeList);
// Shows 2
var_dump($nodeList->length);
// Echo out all the tag names.
foreach($nodeList as $node){
    echo $node->tagName . "\n";
}
?> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T13:28:15.333

也许您的元素的`class`属性中有不止一个类：`td`

```
<td class="hide anotherclass"> 
```

所以`'//td[@class="hide"]'`只会匹配：

```
<td class="hide"> 
```

像这样试试看它是否包含`hide`您要查找的类：

```
$nodeList = $xpath->query('//td[contains(@class,"hide")]'); 
```

查看这篇博文：[XPath：按类选择元素](http://cweiske.de/tagebuch/XPath%3A%20Select%20element%20by%20class.htm)

# android - 当我在 android 4.1 中发送大小超过 20 的 HashMap 时，我会崩溃

> ID：12691149
> 
> 赞同：1
> 
> 时间：2012-10-02T13:23:50.177
> 
> 标签：android

当我在 android 4.1 中发送大小超过 20 的 HashMap 时，我会因以下日志而崩溃：

```
10-02 13:13:05.068: ERROR/AndroidRuntime(938): FATAL EXCEPTION: main
        java.lang.SecurityException: Unable to find app for caller android.app.ApplicationThreadProxy@41bbb490 (pid=938) when publishing content providers
        at android.os.Parcel.readException(Parcel.java:1425)
        at android.os.Parcel.readException(Parcel.java:1379)
        at android.app.ActivityManagerProxy.publishContentProviders(ActivityManagerNative.java:2392)
        at android.app.ActivityThread.installContentProviders(ActivityThread.java:4199)
        at android.app.ActivityThread.handleBindApplication(ActivityThread.java:4132)
        at android.app.ActivityThread.access$1300(ActivityThread.java:130)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1255)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4745)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
        at dalvik.system.NativeStart.main(Native Method) 
```

我为此做了什么：

```
Intent intent = new Intent(MyActions.PREVIEWS);
HashMap<String, Bitmap> thumbnails = new HashMap<String, Bitmap>();
// added more than 20 items
intent.putExtra("previews", thumbnails);
setResult(RESULT_OK, intent);
finish(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:41:23.810

您应该将`Bitmap`s 保存到文件中并将它们的引用传递给另一个活动。Extra 的捆绑包大小有限制：[https ://groups.google.com/forum/?fromgroups=#!topic/android-developers/kwmTGz8GAoQ](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/kwmTGz8GAoQ)

回答[这个](https://stackoverflow.com/questions/8407336/how-to-pass-drawable-between-activities)问题也应该有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:31:38.593

您可能超出了可以在 Intent 中发送的数据量

# asp.net-mvc - Html.Label 的正确用途是什么？

> ID：12691150
> 
> 赞同：1
> 
> 时间：2012-10-02T13:23:58.543
> 
> 标签：asp.net-mvc, html.label

这个字段 html helper 的正确用途是什么？？？

我的视图中有以下代码，但是当显示时它并没有像我期望的那样出现。

```
<td><@Html.Label("lblLoanType1", "Loan Type : ")</td>
<td><@Html.Label("lblLoanType2", "SBA")</td> 
```

这是在视图中显示时的输出：

```
<Loan Type :                       <SBA 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:26:34.107

@Html 之前有一个额外的 < 是不必要的

```
<td><@Html.Label 
```

应该只是

```
<td>@Html.Label 
```

然后外观的其余部分取决于您的CSS。

# jquery - 更改页面后如何刷新列表视图

> ID：12691161
> 
> 赞同：0
> 
> 时间：2012-10-02T13:24:27.843
> 
> 标签：jquery, listview, jquery-mobile, page-refresh

您好我开发了一个在一个文件中有 5 个 html 页面的移动应用程序。

在第 2 页中，我有一个建筑物费用的列表视图。

在第 3 页中，我有一个功能可以支付第 2 页中选择的费用。在上述功能的末尾，我包含以下代码

```
$.mobile.changePage('#page2', 'slideup', true, true); 
```

我希望当应用程序从第 3 页返回第 2 页时不显示已付费用。

如果我理解第 2 页的页面刷新或列表视图刷新，我想要。

我尝试在 changepage 命令中添加 reloadPage，但没有成功。

我怎样才能做到这一点？

这是我用来创建列表视图的功能

```
function getItemPayments(buildingcode) {

        var list = $('#recentflatsPayments'),
            items = [];

        $.mobile.notesdb.transaction(function(t) {
            t.executeSql('SELECT DISTINCT buildingaddress, buildingcode FROM expense WHERE buildingcode = ?',[buildingcode], function(t, resultbuilding) {
                var myrow;
                myrow = resultbuilding.rows.item(0);
                $('#displayPayments h2').text(myrow.buildingaddress);
            });
        });

        $.mobile.notesdb.transaction(function(t) {
            t.executeSql('SELECT barcode, buildingcode, buildingaddress, description, entryseason, period, amount FROM expense WHERE buildingcode = ?',[buildingcode], function(t, resultexpense) {
                var i,
                    len = resultexpense.rows.length,
                      myrowpaidlen = 0,
                      myrowpaid = 0,
                      row;
                if (len > 0 ) {
                    for (i = 0; i < len; i += 1) {
                        dummypaid(i);
                    }

                    function dummypaid(i){
                        var row = resultexpense.rows.item(i);
                        t.executeSql('SELECT * FROM expensepayments WHERE Barcode = ?',
                        [row.barcode], 
                        function(t, resultpaid) {
                            var myrowpaidlen = resultpaid.rows.length;
                            if (myrowpaidlen > 0){
                                var myrowpaid = resultpaid.rows.item(0);
                                if (row.amount > myrowpaid.Amount){
                                    items.push('<li><a href="#displayexpense" data-description="' + row.description + '" data-buildingcode = "' + row.buildingcode + '" data-barcode="' + row.barcode + '" data-amount="' + row.amount + '" data-buildingaddress="' + row.buildingaddress + '">' + row.description + '</a></li>');
                                }
                            } else {
                                items.push('<li><a href="#displayexpense" data-description="' + row.description + '" data-buildingcode = "' + row.buildingcode + '" data-barcode="' + row.barcode + '" data-amount="' + row.amount + '" data-buildingaddress="' + row.buildingaddress + '">' + row.description + '</a></li>');
                            }
                            if (i+1 == len){
                                items.push('<li><a href="#displayexpense" data-description="other" data-buildingcode = "' + row.buildingcode + '" data-barcode="0" data-amount="0" data-buildingaddress="' + row.buildingaddress + '">Other</a></li>');
                            }
                            list.html(items.join('\n'));
                            list.listview('refresh');
                            $('a', list).click(function(e) {
                                getItem1Payments($(this).attr('data-description'), $(this).attr('data-buildingcode'), $(this).attr('data-barcode'), $(this).attr('data-amount'), $(this).attr('data-buildingaddress'));
                            });
                            $('#entriesflatPayments').show();

                        });
                    }
                } else {
                    $('#entriesflatPayments').hide();
                }
            })
        });
//  });       
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:30:09.023

`pagebeforeload`只需添加代码以在page2 事件中隐藏/显示您的列表视图费用，如下所示：

```
$('#page2').bind('pagebeforeload',function(event){
   if (expenses_paid) { //use your own logic here
      //hide list view
   } else {
      //show expenses list view
   }
}); 
```

# mysql - 具有多个日期的 MySQL 查询

> ID：12691167
> 
> 赞同：2
> 
> 时间：2012-10-02T13:24:52.883
> 
> 标签：mysql

我正在尝试根据日期范围（每个帖子的“星数”数）为应用程序提取一些活动报告

它有一个包含帐户 ID 的帖子表，以及一个将该 ID 与帐户相关联的“附属”表。

我知道我可以做到：

```
SELECT
posts.affid,
affiliates.name
sum(posts.stars) AS SEPT_2012
from posts
JOIN affiliates on posts.affid = affiliates.id
WHERE posts.timestamp BETWEEN '2012-09-01' AND '2012-10-01'
group by affid 
```

从 9 月开始，这将得出一个包含会员 ID、名称和总“星数”的结果。单月

但是，我想做一个回溯并获取 8 月、7 月、6 月和 5 月的数字，这些数字将显示在一个查询结果中（因此结果将包括 affid、name、SEPT_2012、AUG_2012、JUL_2012 ...... ETC）。本质上，我假设对那些其他日期范围进行子查询。

有什么建议么？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:27:18.887

您可能想要`GROUP BY EXTRACT(YEAR_MONTH FROM timestamp)`（除了您想做的任何其他事情）。当然，它不会为您提供`SEPT_2012`、`AUG_2012`等列，但数据会在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:31:24.400

虽然您将无法动态创建列，但您可以“伪造”它们并`UNION`为每个日期范围使用 a。在每个中`UNION`，您选择*其他*日期列和正确的列。`0`*`SUM()`*

 *与此类似的东西应该可以工作：

```
SELECT
    posts.affid,
    affiliates.name,
    sum(posts.stars) AS SEPT_2012,
    0 AS AUG_2012,
    0 AS JUL_2012
from
    posts
    JOIN affiliates on posts.affid = affiliates.id
WHERE
    posts.timestamp BETWEEN '2012-09-01' AND '2012-10-01'
group by affid

UNION (
    SELECT
        posts.affid,
        affiliates.name
        0 AS SEPT_2012,
        sum(posts.stars) AS AUG_2012,
        0 AS JUL_2012
    from
        posts
        JOIN affiliates on posts.affid = affiliates.id
    WHERE
        posts.timestamp BETWEEN '2012-08-01' AND '2012-09-01'
    group by affid
)
UNION (
    SELECT
        posts.affid,
        affiliates.name
        0 AS SEPT_2012,
        0 AS AUG_2012,
        sum(posts.stars) AS JUL_2012
    from
        posts
        JOIN affiliates on posts.affid = affiliates.id
    WHERE
        posts.timestamp BETWEEN '2012-07-01' AND '2012-08-01'
    group by affid
) 
```

**更新**（将每个结果的所有结果组合`affid`在一行上）

根据评论，您希望将`posts.affid`单行上的每个结果与每列中的所有数据结合起来。*您可以通过在上面的完整*查询周围放置一个外部查询然后`GROUP BY affid`再次使用来实现这一点。有了这个，您应该根据要求为每一`affid`列和所有列设置一行。我已经更新了上面的查询以选择`0`每个空列而不是`null`“更好”的输出：

```
SELECT affid, name, SEPT_2012, AUG_2012, JUL_2012 FROM (
    ... full query above ...
) AS q
GROUP BY affid 
```

**更新**

要从所有子查询中获取所有“星”的总和，外部 select 语句适用于：

```
 SELECT affid, name, sum(SEPT_2012), sum(AUG_2012), sum(JUL_2012) FROM (
    ... full query above ...
) AS q
GROUP BY affid 
```*

# python - CTR 中的 AES 如何用于 Python 和 PyCrypto？

> ID：12691168
> 
> 赞同：3
> 
> 时间：2012-10-02T13:24:53.880
> 
> 标签：python, encryption, cryptography, aes, pycrypto

我正在使用 python 2.7.1 我想在 CTR 模式下使用 AES 加密某事。我为 python 安装了 PyCrypto 库。我写了以下代码：

```
secret = os.urandom(16)
crypto = AES.new(os.urandom(32), AES.MODE_CTR, counter=lambda: secret)
encrypted = crypto.encrypt("asdk")
print crypto.decrypt(encrypted) 
```

为了正确获取解密数据，我必须运行与明文字节大小一样多的 crypto.decrypt。IE：

```
encrypted = crypto.encrypt("test")
print crypto.decrypt(encrypted)
print crypto.decrypt(encrypted)
print crypto.decrypt(encrypted)
print crypto.decrypt(encrypted) 
```

最后一次解密调用将把明文返回给我。解密的其他输出是一些乱码字符串。我想知道这是否正常？我是否必须每次都包含在一个大小等于我的明文的循环中，或者我弄错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-08-11T17:03:26.863

我将详细说明@gertvdijk 解释为什么密码的行为方式与原始问题中的方式相同（我的编辑被拒绝），但也指出设置计数器以返回静态值是一个主要缺陷并显示如何正确设置它。

## 为新操作重置计数器

这样做的原因与您在问题中描述的一样，因为您的纯文本（4 字节/32 位）是 CTR 密码输出用于加密的密钥流块大小（16 字节/128 位）的四倍.

因为您一遍又一遍地使用相同的固定值而不是实际的计数器，所以密码会不断输出相同的 16 字节密钥流块。您可以通过重复加密 16 个空字节来观察这一点：

```
 >>> crypto.encrypt('\x00'*16)
'?\\-\xdc\x16`\x05p\x0f\xa7\xca\x82\xdbE\x7f/'
>>> crypto.encrypt('\x00'*16)
'?\\-\xdc\x16`\x05p\x0f\xa7\xca\x82\xdbE\x7f/' 
```

在执行解密之前，您也不会重置密码的状态，因此 4 字节的密文将根据来自第一个输出流块的接下来的 4 字节 XOR 密钥进行解密。这也可以通过加密和解密空字节来观察：

```
 >>> crypto.encrypt('\x00' * 4)
'?\\-\xdc'
>>> crypto.decrypt('\x00' * 4)
'\x16`\x05p' 
```

如果这以您想要的方式工作，那么这两个操作的结果应该是相同的。相反，您可以在第一个结果中看到 16 字节块的前四个字节，在第二个结果中看到后四个字节。

通过对 4 字节值执行四次操作（总共 16 字节）用完 16 字节的 XOR 键块后，将生成一个新的 XOR 键块。每个 XOR 密钥块的前四个字节（以及所有其他字节）都是相同的，所以这次调用解密时，它会返回明文。

**这真的很糟糕！**您不应该以这种方式使用 AES-CTR - 它等同于使用 16 字节重复密钥的简单 XOR 加密，很容易被破解。

## 解决方案

在对新数据流执行操作（或对其进行其他操作）之前，您必须重置密码的状态，因为原始实例将不再处于正确的初始状态。您的问题将通过`crypto`为解密实例化一个新对象以及重置计数器和密钥流位置来解决。

**您还需要使用适当的计数器功能**，将随机数与每次生成新的密钥流块时增加的计数器值结合起来。PyCrypto 有一个 Counter 类可以为你做这件事。

```
from Crypto.Cipher import AES
from Crypto.Util import Counter
from Crypto import Random

# Set up the counter with a nonce.
# 64 bit nonce + 64 bit counter = 128 bit output
nonce = Random.get_random_bytes(8)
countf = Counter.new(64, nonce) 

key = Random.get_random_bytes(32)  # 256 bits key

# Instantiate a crypto object first for encryption
encrypto = AES.new(key, AES.MODE_CTR, counter=countf)
encrypted = encrypto.encrypt("asdk")

# Reset counter and instantiate a new crypto object for decryption
countf = Counter.new(64, nonce)
decrypto = AES.new(key, AES.MODE_CTR, counter=countf)
print decrypto.decrypt(encrypted) # prints "asdk" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-03T14:35:10.223

### 从新操作的新加密对象开始

这样做的原因与您在问题中描述的一样，因为您的纯文本（4 字节/32 位）是加密引擎在您选择的 AES 模式（128 位）下工作的大小的四倍，并且还重复使用相同的加密对象的实例。如果您正在对新数据流执行操作（或对其进行其他操作），请不要重复使用相同的对象。您的问题将通过`crypto`为解密实例化一个新对象来解决，如下所示：

```
# *NEVER* USE A FIXED LIKE COUNTER BELOW IN PRODUCTION CODE. READ THE DOCS.
counter = os.urandom(16)
key = os.urandom(32)  # 256 bits key

# Instantiate a crypto object first for encryption
encrypto = AES.new(key, AES.MODE_CTR, counter=lambda: counter)
encrypted = encrypto.encrypt("asdk")

# Instantiate a new crypto object for decryption
decrypto = AES.new(key, AES.MODE_CTR, counter=lambda: counter)
print decrypto.decrypt(encrypted) # prints "asdk" 
```

### 为什么不是用 AES-CTR 填充

这个答案最初是对[Marcus 的回答](https://stackoverflow.com/a/12693675/1254292)的回应，他最初表示使用填充可以解决这个问题。虽然我知道它看起来像是填充问题的症状，但它肯定不是。

AES-CTR 的全部意义在于您**不需要 padding**，因为它是**流密码**（与 ECB/CBC 等不同）！流密码处理数据流，而不是将数据分块并在实际的密码计算中链接它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T06:06:03.743

除了 Marcus 所说的之外，[`Crypto.Util.Counter`](https://www.dlitz.net/software/pycrypto/api/current/Crypto.Util.Counter-module.html)该类还可用于构建您的计数器块功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:44:10.393

根据@gertvdijk，AES_CTR 是一种不需要填充的流**密码**。所以我删除了相关代码。

这是我知道的一件事。

1.  您必须在加密和解密中使用相同的密钥（第一个参数`AES.new(...)`），并保持密钥私有。

2.  加密/解密方法是**有状态**的，这意味着`crypto.en(de)crypt("abcd")==crypto.en(de)crypt("abcd")`并不**总是**正确的。在您的 CTR 中，您的计数器回调始终返回相同的内容，因此在加密时它变得无状态（我不是 100% 确定这是原因），但我们仍然发现它在解密时有点有状态。作为结论，我们应该始终使用新对象来完成它们。

3.  `counter callback`加密和解密中的函数应该表现相同。在你的情况下，它是让他们两个都返回相同的秘密。然而，我不认为这`secret`是一个“秘密”。您可以使用随机生成的数据`"secret"`，并在没有任何加密的情况下将其传递给通信对等方，以便对方可以直接使用它，只要它`secret`是**不可预测**的。

所以我会这样写我的密码，希望它能提供一些帮助。

```
import os
import hashlib
import Crypto.Cipher.AES as AES

class Cipher:

        @staticmethod
        def md5sum( raw ):
                m = hashlib.md5()
                m.update(raw)
                return m.hexdigest()

        BS = AES.block_size

        @staticmethod 
        def pad( s ):
                """note that the padding is no necessary"""
                """return s + (Cipher.BS - len(s) % Cipher.BS) * chr(Cipher.BS - len(s) % Cipher.BS)"""
                return s

        @staticmethod
        def unpad( s ):
                """return s[0:-ord(s[-1])]"""
                return s

        def __init__(self, key):
                self.key = Cipher.md5sum(key)
                #the state of the counter callback 
                self.cnter_cb_called = 0 
                self.secret = None

        def _reset_counter_callback_state( self, secret ):
                self.cnter_cb_called = 0
                self.secret = secret

        def _counter_callback( self ):
                """
                this function should be stateful
                """
                self.cnter_cb_called += 1
                return self.secret[self.cnter_cb_called % Cipher.BS] * Cipher.BS

        def encrypt(self, raw):
                secret = os.urandom( Cipher.BS ) #random choose a "secret" which is not secret
                self._reset_counter_callback_state( secret )
                cipher = AES.new( self.key, AES.MODE_CTR, counter = self._counter_callback )
                raw_padded = Cipher.pad( raw )
                enc_padded = cipher.encrypt( raw_padded )
                return secret+enc_padded #yes, it is not secret

        def decrypt(self, enc):
                secret = enc[:Cipher.BS]
                self._reset_counter_callback_state( secret )
                cipher = AES.new( self.key, AES.MODE_CTR, counter = self._counter_callback )
                enc_padded = enc[Cipher.BS:] #we didn't encrypt the secret, so don't decrypt it
                raw_padded = cipher.decrypt( enc_padded )
                return Cipher.unpad( raw_padded ) 
```

一些测试：

```
>>> from Cipher import Cipher
>>> x = Cipher("this is key")
>>> "a"==x.decrypt(x.encrypt("a"))
True
>>> "b"==x.decrypt(x.encrypt("b"))
True
>>> "c"==x.decrypt(x.encrypt("c"))
True
>>> x.encrypt("a")==x.encrypt("a")
False #though the input is same, the outputs are different 
```

参考：[http ://packages.python.org/pycrypto/Crypto.Cipher.blockalgo-module.html#MODE_CTR](http://packages.python.org/pycrypto/Crypto.Cipher.blockalgo-module.html#MODE_CTR)

# mongodb-java - 使用 Spring Data mongodb 将 XMLBeans 存储为 BSON 对象

> ID：12691170
> 
> 赞同：2
> 
> 时间：2012-10-02T13:24:58.637
> 
> 标签：mongodb-java, xmlbeans, spring-data-mongodb

我正在研究使用 Spring Data mongodb，到目前为止我喜欢我所看到的。但是，当我尝试存储更复杂的对象时，例如使用 APache XMLBeans 创建的对象，我得到了 StackOverFlowError。我认为这是由于 XMlBean 中对象引用的循环性质。有没有人对在 mongodb 中将 XmlBean 存储为允许搜索的 BSON 对象的一般方法有任何建议？

该解决方案不需要使用 Spring。

# asp.net - 浏览器如何知道当前AD用户ASP.NET

> ID：12691171
> 
> 赞同：3
> 
> 时间：2012-10-02T13:25:01.553
> 
> 标签：asp.net, active-directory

浏览器是否可以在不显式登录的情况下知道当前登录的 AD 用户？我希望服务器中的代码以与浏览器中的用户相同的权限执行。这是可能的还是我必须要求用户明确登录？

上下文：ASP.NET，主要是 IE 7、IIS 7。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:31:39.927

如果你...

*   在 IIS 中使用**集成 Windows 身份验证**
*   在`web.config`相关的地方
*   并且您的用户和 IIS 服务器在同一个域中

...然后可以通过浏览器传递凭据。IE（微软的创造）可以在没有提示的情况下做到这一点，其他浏览器可能仍然坚持用户在新会话开始时输入他们的凭据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:42:11.733

好的，这个问题有几个部分，所以我一次拿一个：

首先，您想“不显式登录”进行身份验证。**使用Windows 集成身份验证**的 Internet Explorer 绝对可以做到这一点。请参阅这篇文章（[Internet Explorer 可能会提示您输入密码](http://support.microsoft.com/kb/258063)）以了解有关您的环境要求的更多详细信息。您将希望使用 ASP.NET Windows 身份验证模式启用此功能。

其次，*您希望服务器端代码以客户端的本地登录用户身份运行*。这称为**Identity Impersonation**，您应该阅读这篇 MSDN 文章以了解如何配置它：[Using IIS Authentication with ASP.NET Impersonation](http://msdn.microsoft.com/en-us/library/134ec8tc%28v=vs.100%29.aspx)

另请参阅：[MSDN Windows 身份验证提供程序](http://sdn.microsoft.com/en-us/library/907hb5w9%28v=vs.100%29.aspx)

# java - 可疑的 IO 行为：System.out 不刷新

> ID：12691172
> 
> 赞同：1
> 
> 时间：2012-10-02T13:25:05.953
> 
> 标签：java, io

我正在研究一个直到上周都可以正常工作的 GA。在我优化代码的努力中，我以某种方式破坏了程序转储有关每一代人的信息的输出序列。在我所有的调试工作中，我开始明白这可能是一个冲洗问题，但我不能真正把手指放在症结上。***奇怪的是，自从代码的最后一个工作版本以来，我实际上没有触及 IO 的任何部分。***

GA 是一个更大的软件的一部分，其中有一个进度控制台，它本质上是一种“镜像”`System.out`和`System.err`GUI 的方式。从我的调试工作中，我意识到即使我专门调用缓冲区也不会刷新`ps.flush()`。

这个问题的原因可能是什么？

* * *

**编辑：**要回答评论中的问题，以及有关该问题的更多信息：

*   软件的其余部分正常输出到 GUI 和 Eclipse 控制台，只是对`outputGenInfo()`方法的调用（见下文）消失了

*   如果我添加一条通知行，例如`System.out.println("Fitness calculation is complete!");`在我的`evaluateGeneration()`方法中调用，该方法在每一代的信息完全按预期打印之前被调用`outputGenInfo()`...... [那条特定的行是我在优化工作期间修剪的东西之一]

*   对于镜像/重定向`System.out`，我使用了`MessageConsole`Rob Camick 编写的类，可以在[这里找到](http://tips4java.wordpress.com/2008/11/08/message-console/)

* * *

可疑代码如下：

```
/**
 * Convenience method for getting debug/info 
 * on this generation
 * @param ps - a <code>PrintStream</code> to output to
 * */
public void outputGenInfo(PrintStream ps){ // <-- ps = System.out by default

    double stdev_fitness = stats.getStandardDeviation();
    double mean_fitness = stats.getMean();
    double cv = stdev_fitness / mean_fitness;

    StringBuilder sb = new StringBuilder();
    String new_line = System.getProperty("line.separator");
    sb.append(new_line);
    sb.append("+++++++++++++++++++++++++++++++++");
    sb.append(new_line);

    sb.append("Generation: " + this.id);
    sb.append(new_line);

    sb.append("-------------------------------");
    sb.append(new_line);

    sb.append("Mean fitness: " +  
                String.format("%.3f",mean_fitness) + 
                ", CV: " + String.format("%.3f",cv));
    sb.append(new_line);

    sb.append("Top fitness: " + getTopIndividual().getEntropy());
    sb.append(new_line);

    sb.append("+++++++++++++++++++++++++++++++++");
    sb.append(new_line);

    ps.println(sb.toString());

    // during debug this actually helps but not when the code is running full throttle!
    System.out.println("");  

} 
```

# objective-c - iOS：访问越狱 iPhone 中的根目录

> ID：12691181
> 
> 赞同：2
> 
> 时间：2012-10-02T13:25:23.457
> 
> 标签：objective-c, ios, jailbreak

好的，我使用[jailcoder.com](http://jailcoder.com/)来修补我的 xcode 项目，以便在越狱的 iOS 设备上运行我的应用程序并且它可以工作。但我仍然需要列出位于根文件夹中的其他一些文件。我看到一些应用程序可以做到这一点，但没有找到实现它的方法。

也许有可能以root身份运行代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:25:58.067

我不确切知道您需要访问*哪些文件，以及它们当前拥有哪些权限。*

普通应用程序以 user 身份运行`mobile`。如果您确实需要以用户身份运行您的应用程序`root`，那么[这是一种方法](https://stackoverflow.com/a/8796556/119114)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T12:33:28.557

我在这里回答了一个类似的问题[How to get inbox all SMS on iphonse sdk?](https://stackoverflow.com/questions/10223232/how-to-get-inbox-all-sms-on-iphonse-sdk/12708436#12708436)

如果您有越狱设备，这是可能的。您可以使用 jailcoder 来伪造代码签名，然后将您的应用程序移动到 /Applications 文件夹。这样您就可以访问您越狱的 iOS 设备中的任何数据库。

# android - 平板电脑和服务器之间的双向实时通信系统

> ID：12691185
> 
> 赞同：1
> 
> 时间：2012-10-02T13:25:46.157
> 
> 标签：android, sockets, cordova, real-time, tablet

我们将构建一个多人游戏。这个想法是每个玩家都有一台平板电脑并连接到服务器。服务器应该控制游戏逻辑，而客户端（平板电脑）将仅作为游戏的前端。我们需要决定我们将要使用的框架/编程语言。跨平台前端会很酷，但不是强制性的。它至少必须在 Android 设备上运行。服务器和客户端之间的通信必须是双向的和实时的。我们不在乎少量的延迟。

目前，我们认为 HTML5 客户端与 javascript 服务器（在 nodejs 上运行）相结合是最佳选择。通信将由 javascript 库 socket.io 管理。HTML5 前端可以在浏览器中运行，也可以作为应用程序（使用 PhoneGap 构建）运行。

但是我们还没有决定，因为我们想确保做出正确的选择。可能有一些框架可以做得更好。有谁知道更好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:29:42.073

Play 2 非常适合这一点，但节点/套接字也是不错的选择。我会在前端使用backbone.js，因为它为您提供了很大的灵活性，并且很容易使视图保持同步。（如果您有兴趣，我的 github 上有一个这样的应用程序示例）

# regex - 将 LucidWorks 包含路径配置为仅抓取某些文件类型

> ID：12691190
> 
> 赞同：0
> 
> 时间：2012-10-02T13:26:15.907
> 
> 标签：regex, web-crawler, lucidworks

我正在尝试将 LucidWorks Web 数据源配置为仅索引某些文件类型。但是，当我将*包含路径*设置`.*\.html`为仅抓取 .html 文件（作为简化示例）时，它最终只会索引顶级文件夹。 *抓取深度*设置为`-1`，当我将*包含路径*留空时，它会按预期抓取整个子树。

我查看了他们有关[创建 Web 数据源](http://lucidworks.lucidimagination.com/display/lweug20/Create+a+New+Web+Data+Source)和[使用正则表达式](http://lucidworks.lucidimagination.com/display/help/Using+Regular+Expressions)的文档，但找不到不起作用的原因`.*\.html`，因为`.*`应该匹配任何字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:08:50.000

*当我校对这个问题时，我有一个想法，这是正确的解决方案。在这里张贴给后代。*

* * *

被爬取的内容是一个文件共享，因此它依赖于 Web 服务器的目录列表，该目录列表被过滤掉了，因为它没有 .html 扩展名。因此，只需添加`.*/`到*包含路径*即可解决问题。

# iis - IIS - 缺少 Windows 身份验证功能

> ID：12691197
> 
> 赞同：2
> 
> 时间：2012-10-02T13:26:29.257
> 
> 标签：iis, windows-8, windows-authentication, iis-8

当“打开或关闭 Windows 功能”菜单中缺少 IIS Windows 身份验证时，无论如何安装/启用它？

我在本地工作组中运行 Win8 机器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-19T08:36:48.750

我猜你需要[专业版或企业版](http://en.wikipedia.org/wiki/Windows_8_editions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T04:00:06.157

我遇到了同样的问题，到目前为止尝试了这些，你也应该看看这些设置

*   如果您有 WindowsAuthentication 托管模块，请检查该模块
*   启用 appcmd 设置配置 /section:windowsAuthentication /enabled:true
*   在应用程序的 web.config 中启用它

`

```
<security>
  <authentication>
    <windowsAuthentication enabled="true"></windowsAuthentication>
  </authentication>
</security> 
```

`

我已经在不属于域的 Windows 8 桌面上尝试过这些，但它不起作用，响应标头只是 401，没有任何 www auth 标头。我想知道当机器是域的一部分时，你的情况会发生什么。

# c# - 将 XML 字符串反序列化为可绑定对象

> ID：12691199
> 
> 赞同：1
> 
> 时间：2012-10-02T13:26:31.583
> 
> 标签：c#, xaml

我可以访问以下格式的 XML 数组：

```
<Title>Blah</Title>
<Status>Blah</Status>
<Info>
    <Item>Blah blah blah</Item>
    <Item>Blah blah blah</Item>
    ....
</Info> 
```

My`MainWindow`将其设置为包含 object`DataContext`的 my 。此类是并创建一个对象。它还通过解析上面的 XML 字符串来设置该对象的成员数据。我已经可以绑定到该对象并显示为纯文本，但需要将节点解析为附加成员或替换该成员。这将是某种对象，我可以使用它来操作XAML 中的每个单独节点，希望创建某种自定义显示格式，而不仅仅是纯文本。`MainWindowViewModel``ObservableResults``ObservableResults : ObservableCollection<ViewableResult>``ViewableResult``Title, Status, and Info``Title, Status, and Info``Info``ViewableResult``Info``Item`

编辑：显然不清楚问题是什么。我正在尝试找到一种将节点解析为`Info`可以单独访问节点的对象的好方法`Item`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:46:13.220

解决您的问题的一个好的开始应该是使用序列化，当您需要将对象保存到 XML 文件中并将它们加载回您想要的任何内容时，它真的很方便。

您应该使您的对象可序列化，然后添加一些方法，如 Load()、Save() 等。

阅读此内容以获取更多信息：[MSDN - 序列化](http://msdn.microsoft.com/en-us/library/swxzdhc0.aspx)

您将找到有关如何执行此操作的大量信息！

希望它会有所帮助。

# c# - 模板模式 - 对小项目没有用

> ID：12691203
> 
> 赞同：0
> 
> 时间：2012-10-02T13:26:40.303
> 
> 标签：c#, design-patterns

很抱歉提出这样一个本地化的问题，但在我得到确认之前，我对继续我的项目没有信心。

我已经阅读了很多关于模板模式的内容，[维基百科](http://en.wikipedia.org/wiki/Template_method_pattern)有一个很好的例子。

它表明您创建了基本的虚拟方法，然后继承了基类并覆盖了您想要的位置。该网站上的示例适用于都继承基类的 Monopoly 和 Chess。

所以，我的问题是，如果你的应用程序只是国际象棋而不是其他任何东西，那么使用模板模式（除了作为教育练习之外）会有什么好处吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T13:28:39.960

不，我认为这属于“[你不需要它](http://en.wikipedia.org/wiki/You_ain%27t_gonna_need_it)”的范畴。

更具体地说，存在设计模式来解决特定问题，如果您的代码不需要解决该问题，它们所做的只是添加代码行而没有任何好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:30:14.660

不。以非常简化和肤浅的方式表达，模板模式只是值得从总代码大小和模板化代码大小之间的某种关系开始。在您的示例中，国际象棋游戏将是整个程序，因此此处无需使用模板模式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T13:32:00.927

模板模式用于特定情况。当您想草拟一个算法但让具体步骤有所不同时，可以使用它。

这在国际象棋应用程序中*可能*很有用。但是，您不应该以“我将使用这个模式和那个模式，然后......”的想法开始开发应用程序。相反，您开发代码并发现您需要某些模式。

这就是测试驱动开发方法非常方便的地方。它允许您在每个步骤中重构代码。

一本解释这一点的好书是[Refactoring To Patterns](https://rads.stackoverflow.com/amzn/click/com/0321213351)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T13:30:03.197

我建议编写您的国际象棋游戏，然后如果将来回来并改变事物以适应垄断。但是如果你想使用模式来学习模式，那就完全不同了，在这种情况下，最好从简单开始，这样复杂就更容易理解。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T13:31:15.297

这实际上取决于程序的各个部分。Template 的整个想法是拥有一个永不改变的算法，并且能够添加或编辑该算法的某些步骤。

很可能你永远不会改变，然而，这是设计原则的问题，这是一种很好的做法，你以后可能希望你已经实现了它们。我想说的是，如果您 100% 确定，那么您可以将其省略，因为它通常可以节省时间和代码行数。取决于你是否想学习模板的使用。

[GOF 原则网站](http://www.dofactory.com/Patterns/PatternTemplate.aspx)也很不错：

# java - 没有“确认重新提交”的 JSF POST

> ID：12691212
> 
> 赞同：1
> 
> 时间：2012-10-02T13:27:07.213
> 
> 标签：java, jsf, rest, post

我有一个调用 POST 休息服务的 jsf 表单。当我按下 F5 键时，Chrome 会通知我它将召回该服务。我想避免这种情况。我只想通知用户调用服务已成功执行。此外，当我转到我的应用程序中的另一个页面时，如果我按 F5，也将调用此服务。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:59:29.387

一般POST数据是存放在HTTP头中的，刷新页面的时候是不能销毁的，但是当你转到另一个页面的时候它会自动销毁，除非你在请求的servlet上使用了类属性！？

# java - Mongodb：在 Java（和 JavaScript）中调用 db.printShardingStatus() / sh.status()

> ID：12691215
> 
> 赞同：2
> 
> 时间：2012-10-02T13:27:13.253
> 
> 标签：java, mongodb, status, sharding, chunks

在我的 Java 代码中分片后，我需要获取一个块列表。我的代码很简单，如下所示：

```
Mongo m = new Mongo( "localhost" , 27017 );

DB db = m.getDB( "admin" );

Object cr = db.eval("db.printShardingStatus()", 1); 
```

调用 eval() 会返回错误：

```
Exception in thread "main" com.mongodb.CommandResult$CommandFailure: command failed [$eval]: { "serverUsed" : "localhost/127.0.0.1:27017" , "errno" : -3.0 , "errmsg" : "invoke failed: JS Error: ReferenceError: printShardingStatus is not defined src/mongo/shell/db.js:891" , "ok" : 0.0}
    at com.mongodb.CommandResult.getException(CommandResult.java:88)
    at com.mongodb.CommandResult.throwOnError(CommandResult.java:134)
    at com.mongodb.DB.eval(DB.java:340)
    at org.sm.mongodb.MongoTest.main(MongoTest.java:35) 
```

而且，实际上，如果我们查看 db.js 的代码，在第 891 行中调用了一个未在文件中定义的方法 printShardingStatus()。在 utils_sh.js 文件中的 sh.status() 方法内部，甚至还有一条注释：

> // TODO: 把实际的命令移到这里

值得一提的是，当我在 mongo 命令行中运行这些命令时，一切正常！

我的问题是：

*   在 Java 代码中是否有其他可能获得完整的分片状态？（例如，使用 DB.command() 方法）
*   如果没有，任何其他建议如何避免我的问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T15:44:24.983

许多 shell 的辅助函数不能用于服务器端代码执行。在 的情况下`printShardingStatus()`，这是有道理的，因为没有用于打印输出的控制台，您宁愿返回一个字符串。值得庆幸的是，您应该能够提取 shell 函数的源代码并在您的应用程序中重新实现它（例如连接返回的字符串而不是直接打印）。

```
$ mongo
MongoDB shell version: 2.2.0
connecting to: test
> db.printShardingStatus
function (verbose) {
    printShardingStatus(this.getSiblingDB("config"), verbose);
} 
```

那么，让我们看一下`printShardingStatus()`函数...

```
> printShardingStatus
function (configDB, verbose) {
    if (configDB === undefined) {
        configDB = db.getSisterDB("config");
    }
    var version = configDB.getCollection("version").findOne();

    // ...
} 
```

在将所有输出语句转换为字符串连接之前，您需要确保其他 DB 方法都可供您使用。在性能方面，我认为最好的选择是将这个函数的内部部分移植到 Java 中，并完全避免服务器端 JS 评估。如果您深入研究该`printShardingStatus()`函数，您会发现它只是`find()`在配置数据库上发布以及一些`group()`查询。

如果您确实想坚持评估 JS 并且不想将此代码保留在您的 Java 应用程序中，您还可以考虑在[服务器端存储 JS 函数](http://www.mongodb.org/display/DOCS/Server-side+Code+Execution#Server-sideCodeExecution-Storingfunctionsserverside)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:56:21.790

您是否正确部署了分片集群？如果是这样，您可以连接到启用了分片的 mongo 数据库。

尝试在 mongo shell 中使用该数据库调用 db.printShardingStatus() 方法，看看会发生什么。

> 显然，Javascript 函数“printShardingStatus”仅适用于 mongo shell，不能用于服务器命令执行，要查看代码启动 mongo.exe 并仅键入“printShardingStatus”并按 Enter。
> 
> 在这种情况下，编写扩展方法将是解决此问题的最佳方法......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T09:24:39.827

将MongoDB查询的输出打印到文件的Javascript方式

1]创建一个javascript文件

测试.js

```
cursor = db.printShardingStatus();
while(cursor.hasNext()){
    printjson(cursor.next());
} 
```

2]运行

```
mongo admin --quiet test.js > output.txt 
```

# algorithm - 我可以在一致的启发式/统一成本/Dijkstra 的搜索下修改标准 A*（A 星），因此它不必更新边界吗？

> ID：12691217
> 
> 赞同：3
> 
> 时间：2012-10-02T13:27:25.000
> 
> 标签：algorithm, artificial-intelligence, dijkstra, a-star

标准方法如下：**AI：一种现代方法**

```
function UNIFORM-COST-SEARCH

node <- INITIAL-STATE
frontier <- priority queue ordered by PATH-COST, with node as the only element
explored <- an empty set
loop do
    if frontier is empty then return failure
    node <- POP frontier  /* chooses the lowest-cost node in frontier */
    if GOAL-TEST(node) then return SOLUTION(node)
    add node to explored
    for each action in ACTIONS(node) do
        child <- CHILD-NODE(problem, node, action)
        if child is not in explored or frontier then
            frontier.INSERT(child)
        else if child is in frontier with higher PATH-COST then
            replace that frontier node with child 
```

这里这一步实现起来比较复杂，普通的优先级队列不能有效地更新某个元素的优先级。

```
 else if child is in frontier with higher PATH-COST then
            replace that frontier node with child 
```

我正在考虑通过以下方式修改算法：

```
function UNIFORM-COST-SEARCH-Modified

node <- INITIAL-STATE
frontier <- priority queue ordered by PATH-COST, with node as the only element
explored <- an empty set
loop do
    if frontier is empty then return failure
    node <- POP frontier  /* chooses the lowest-cost node in frontier */
  > if node is in explored then continue
    if GOAL-TEST(node) then return SOLUTION(node)
    add node to explored
    for each action in ACTIONS(node) do
        child <- CHILD-NODE(problem, node, action)
  >     if child is not in explored then
            frontier.INSERT(child) 
```

所以我不在乎边界是否包含重复的状态。我只扩展了边界中重复状态中的第一个。由于路径成本是`consistent`，并且边界是使用 实现的`priority queue`，因此忽略其他成本较高的重复状态是无害的。

合理吗？

### 更新

对不起，我忘了提到我对一致的启发式案例特别感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:37:43.457

这个想法原则上是正确的，但有一个错误：

```
 > if node is in explored then continue 
```

如果启发式函数不是单调的（与可接受性不矛盾），这条线可能会导致失败。

如果新成本优于先前发现的成本，A* 允许重新探索节点。这些情况发生在非单调启发式函数中。

`continue`仅当新成本“更大”时，才应该与附加到顶点 in 的成本相比`explored`，而不是仅在它存在的情况下。

* * *

**编辑：（**基于评论问题和问题编辑）

对于`h=0`，A* 实际上会衰减到 Dijkstra 的算法中，并且由于 Dijkstra 的算法永远不需要修改已经“探索”的节点（当然，假设权重为正） - 该算法对于这些情况是正确的。

一般来说，重新访问已经访问过的节点不会在单调启发式函数中发生，因此这不是问题，并且该方法对于这些情况是正确的 - 但请注意不要将其与非单调启发式函数一起应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:34:27.850

*是的，这应该可行，我认为这就是AIMA*第 2 版中解释 A* 和 UCS 的方式。您将在优先级队列中获得重复的状态，但如果您只想生成一个解决方案/路径，则只会返回成本最低的版本。

**编辑**：误读您的程序。`if child is not in explored`扩展节点的邻居时应该跳过这一步。

# php - 是否可以在没有循环的情况下更改数组的所有值？

> ID：12691221
> 
> 赞同：20
> 
> 时间：2012-10-02T13:27:31.207
> 
> 标签：php, arrays, map

我在php中有以下数组：

```
$a = $array(0, 4, 5, 7); 
```

我想在不编写循环的情况下增加所有值（for，foreach ...）

```
// increment all values
// $a is now array(1, 5, 6, 8) 
```

可以在 php 中使用吗？

并且通过扩展，是否可以在每个元素上调用一个函数并用函数的返回值替换该元素？

例如：

```
$a = doubleValues($a); // array(0, 8, 10, 14) 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-02T13:29:14.233

这是一项工作[`array_map()`](http://us3.php.net/manual/en/function.array-map.php)（将在内部循环）：

```
$a = array(0, 4, 5, 7);
// PHP 5.3+ anonmymous function.
$output = array_map(function($val) { return $val+1; }, $a);

print_r($output);
Array
(
    [0] => 1
    [1] => 5
    [2] => 6
    [3] => 8
) 
```

**由 OP 编辑​​：**

```
function doubleValues($a) {
  return array_map(function($val) { return $val * 2; }, $a);
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-07-26T19:31:22.963

是的，这可以使用其他答案中提到的 PHP 函数[array_map()](http://us3.php.net/manual/en/function.array-map.php)来实现。这个解决方案是完全正确和有用的。但是你应该考虑，**一个简单的 foreach 循环会更快，内存更少**。此外，它为其他程序员和用户提供了更好的可读性。几乎每个人都知道 foreach 循环在做什么以及它是如何工作的，但是大多数 PHP 用户并不常用 array_map() 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:32:42.597

```
$arr = array(0, 4, 5, 7);
function val($val) { return $val+1; }
$arr = array_map( 'val' , $arr );
print_r( $arr ); 
```

看[这里](http://codepad.org/uKP7jwOp)

# c++ - 如何在程序运行时检测 kinect 何时断开/拔出？

> ID：12691222
> 
> 赞同：3
> 
> 时间：2012-10-02T13:27:31.667
> 
> 标签：c++, visual-c++, kinect

我正在使用官方 Kinect SDK 1.5 示例之一，并且试图弄清楚如何添加检查以检测 Kinect 何时断开连接。目前该应用程序只会冻结，因此必须有一种方法来防止这种情况发生。

这是 SDK 示例中的主要消息循环：

```
// Main message loop
while (WM_QUIT != msg.message)
{
    hEvents[0] = m_hNextDepthFrameEvent;

    // Check to see if we have either a message (by passing in QS_ALLINPUT)
    // Or a Kinect event (hEvents)
    // Update() will check for Kinect events individually, in case more than one are signalled
    DWORD dwEvent = MsgWaitForMultipleObjects(eventCount, hEvents, FALSE, INFINITE, QS_ALLINPUT);

    // Check if this is an event we're waiting on and not a timeout or message
    if (WAIT_OBJECT_0 == dwEvent)
    {
        Update();
    }

    // does not work.
    bool bla = m_pNuiSensor->NuiStatus();
    if (NULL == m_pNuiSensor)
    {
            cout << 1 << endl;
    }

    if (PeekMessageW(&msg, NULL, 0, 0, PM_REMOVE))
    {
        // If a dialog message will be taken care of by the dialog proc
        if ((hWndApp != NULL) && IsDialogMessageW(hWndApp, &msg))
        {
            continue;
        }

        TranslateMessage(&msg);
        DispatchMessageW(&msg);
    }
}

return static_cast<int>(msg.wParam); 
```

我添加了以下位：

```
 // does not work, bla will always be the same value.
    bool bla = m_pNuiSensor->NuiStatus();
    if (NULL == m_pNuiSensor)
    {
            cout << 1 << endl;
    } 
```

因为我假设这可能`NuiStatus`是一种检测断开连接的方法。不幸的是，它不起作用。检查是否`m_pNuiSensor`is也是如此`NULL`。

那么检测正在运行的应用程序断开连接的方法是什么？

**EDIT1：**我应该使用`NuiSetDeviceStatusCallback`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:45:03.803

在[文档](http://msdn.microsoft.com/en-us/library/hh973099.aspx)中它说 NuiStatus 返回 HRESULT 而不是 bool，所以不应该是

```
HRESULT bla = m_pNuiSensor->NuiStatus();
if (bla == E_NUI_NOTCONNECTED)
{
        cout << 1 << endl;
} 
```

反而？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:43:26.967

以下解决方案有效。

```
 // check if m_pNuiSensor is initialized.
    if (NULL != m_pNuiSensor)
    {
        // get current status & check if not ok.
        HRESULT current_status = m_pNuiSensor->NuiStatus();
        if (current_status != S_OK )
        {
            SetStatusMessage(L"Lost connection to Kinect!");
        }
    } 
```

# eclipse - Eclipse 插件：如何修改扩展名“org.eclipse.ui.newWizards”？

> ID：12691229
> 
> 赞同：2
> 
> 时间：2012-10-02T13:28:05.480
> 
> 标签：eclipse, plugins, wizard

我有一个应该以不同方式启动的向导：从菜单（*org.eclipse.ui.menus + org.eclipse.ui.actionSets*）和从新建上下文菜单。稍后我使用扩展名*org.eclipse.ui.newWizards*将向导添加到上下文菜单中。到目前为止，一切都很好...

由于某些原因，我不得不对向导对话框进行子类化（更改了对话框中的完成按钮文本）。如果从菜单启动向导，则操作（在*org.eclipse.ui.actionSets*中定义）创建并打开这个特殊的向导对话框，一切都很好。

如果向导是从上下文菜单（*org.eclipse.ui.newWizards*）启动的，则会采用内部类*NewWizardShortcutAction*创建“正常”向导对话框（而不是我的子类）来打开向导。

有没有办法修改只使用我的子类向导对话框的扩展点的实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T03:17:45.290

默认情况下，该命令用于`org.eclipse.ui.internal.handlers.WizardHandler.New`启动新的向导对话框，这是提供给该命令的默认处理程序。

可以在 Workbench Window 级别注册不同的处理程序，这将在 Workbench Window 处于活动状态时覆盖默认处理程序。它可以在 plugin.xml 或您的应用程序 ActionBarAdvisor 中完成：

```
IHandlerService hs = (IHandlerService) window.getService(IHandlerService.class);
hs.activateHandler(IWorkbenchCommandConstants.FILE_NEW, new MyNewHandler()); 
```

但是您必须在处理程序中实现所需的任何支持才能使用正确的选择启动向导。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T10:22:53.583

我也在尝试做同样的事情。我将这样做的方式是注册我自己的自定义操作，通过删除旧操作，如果它有效，将回发解决方案！

更新：我最终使用了不同的方法。如果您在 NewWizardShortcutAction 中看到 run 方法，它只是调用 init，创建 WizardDialog 并打开它。因此，在我重写 MyWizard 类中的 init 时，我只是使用了我自己的从 WizardDialog 扩展的 MyWizardDialog 并打开了它。随后，我需要使 run 函数不会重新打开 WizardDialog，因此我跟踪在 MyWizard 中使用布尔值将不允许获取任何页面，以便不会显示 run 方法中的 WizardDialog。

这是一个 hacky 解决方案，但有效！

# objective-c - UIImage重绘效率

> ID：12691230
> 
> 赞同：1
> 
> 时间：2012-10-02T13:28:07.720
> 
> 标签：objective-c, ios, cocoa-touch

我有一个 UIimage，在图像上绘制了一些文本。我知道图像上文本矩形的确切坐标。当图像平移事件被触发时，我检查平移是否从单击图像中存在文本的矩形开始。

如果（从单击矩形开始平移）然后

我得到平移坐标并移动矩形。所以我实际上做的是获取新坐标并用新位置的矩形重绘图像。这给出了矩形的平移效果（由于其他原因，我不能使用标签，但必须重绘）。

这非常有效，只是如果平移“太快”会产生弹性效果并且矩形类型会滞后。从理论上讲，我不需要重绘整个图像，而只需重新绘制新旧矩形的交集。我认为这肯定会使它更顺畅。

问题：如何使它快速。//我重绘的代码

```
 UIGraphicsBeginImageContext(img.size);
  [img drawInRect: CGRectMake(0,0, img.size.width, img.size.height)];
  CGContextRef context = UIGraphicsGetCurrentContext();

  CGContextSetRGBStrokeColor(context, 0.0, 0.0, 0.0, 1.0);
  CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 0.2);
  CGContextFillRect(context, CGRectMake(myRect.origin.x, myRect.origin.y, myRect.size.width, myRect.size.height));

   UIImage *theImage=UIGraphicsGetImageFromCurrentImageContext();
   UIGraphicsEndImageContext();    
   CurrentImageView.Image = theImage; 
```

我个人认为这里最耗时的一步是

```
[img drawInRect: CGRectMake(0,0, img.size.width, img.size.height)]; 
```

重新绘制整个图像是不合逻辑的。我想拍摄一张旧图像，然后重新绘制图像的一部分并将其分配给视图控制器。有什么建议么？

非常感谢，普拉萨德。

# php - 如果存在，如何重定向到.php文件，如果不存在，如何重定向到另一个

> ID：12691234
> 
> 赞同：-1
> 
> 时间：2012-10-02T13:28:20.493
> 
> 标签：php, mod-rewrite, forum

我刚刚用 PHP 写了一个论坛。在我的数据库中，在我的帖子表和类别表下，我有一个名为“slug”的字段用于 url。

我的 HTML 类别有 /html 之类的 URL，HTML 类别下名为 test 的帖子有 /html/test 之类的 URL。

但我也想要重定向到 signin.php 的 /signin 之类的 URL。

有没有我可以使用的重写条件，如果我去，例如 /something，它会检查 something.php 是否存在。如果是，它将显示something.php 的内容，否则将显示category.php?cat_id=something?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:29:20.117

你可以使用简单的php[`file_exists()`](http://php.net/manual/en/function.file-exists.php)函数

```
if(file_exists("require.php")){
    require_once("require.php");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:30:34.567

您可以执行以下操作：

```
RewriteEngine on
RewriteRule ^([a-zA-Z0-9-]*)(.*)$ /$1.php [QSA,L,E]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^.*$ /default.php [L] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T17:48:36.447

> 有没有我可以使用的重写条件，如果我去，例如 /something，它会检查 something.php 是否存在。如果是，它将显示something.php 的内容，否则将显示category.php?cat_id=something?

尝试：

```
RewriteEngine On

# exclude legit requests
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# check if requests is pointing to a php file
RewriteCond %{REQUEST_URI} ^(.*?)/?$
RewriteCond %{DOCUMENT_ROOT}/%1.php -f
RewriteRule ^ /%1.php [L]

# otherwise, serve the category (also need to exclude legit requests)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /category.php?cat_id=$1 [L,QSA] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T13:31:48.697

您可以将 php 中的[file_exists](http://php.net/manual/en/function.file-exists.php) -function 与[header](http://nl.php.net/manual/en/function.header.php) -function 结合使用。这应该会导致类似：

```
if(file_exists("file.php")){
     header('Location: http://www.example.com/');
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T13:33:38.653

您可以使用 $_SERVER['REQUEST_URI'] 来获取您的价值，然后使用

```
if (file_exist("[yourvalue].php") {
   header("Location: [yourvalue].php");
}
else {
   header("Location: categories.php");
} 
```

# asp.net - 从触发事件的repeateritem控件获取多个文本框值

> ID：12691241
> 
> 赞同：0
> 
> 时间：2012-10-02T13:29:02.440
> 
> 标签：asp.net, repeater, webforms

我有一个Repeater 控件，可以在页面上输出各种论坛帖子。

在每个中继器行中，我有一个 LinkBut​​ton 和 4 个包含值的文本框。

当我单击其中一个链接按钮时，在我的事件处理程序代码中，我想获取与该特定转发器项/行相对应的 4 个文本框中的每一个中的值。

我可以重复转发器中的每个项目，但我只对位于单击/触发事件的 LinkBut​​ton 旁边的 4 个文本框中存在的值感兴趣。我对属于转发器中其他行/项目的任何文本框值都不感兴趣。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:30:35.747

您可以使用与`ItemCommand`事件和`e.Item.FindControl`

链接：http: [//msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.repeater.itemcommand.aspx](http://msdn.microsoft.com/fr-fr/library/system.web.ui.webcontrols.repeater.itemcommand.aspx)

```
 protected void Repeater_ItemCommand(object source, RepeaterCommandEventArgs e) 
    {
        if(e.CommandName == "YourCommand" ) //Adjust your CommandName
        {
            var textbox1 = (TextBox)e.Item.FindControl("YourIdTextBox1");  //Adjust your Id of TextBox  in row   
            var textbox2 = (TextBox)e.Item.FindControl("YourIdTextBox2"); 
            var textbox3 = (TextBox)e.Item.FindControl("YourIdTextBox3"); 
            var textbox4 = (TextBox)e.Item.FindControl("YourIdTextBox4"); 

            ....
        }
    } 
```

# c# - 如何使用 vs 模板格式化 Windows 服务？

> ID：12691244
> 
> 赞同：1
> 
> 时间：2012-10-02T13:29:16.393
> 
> 标签：c#, multithreading, visual-studio-2010, windows-services

我正在 c# Visual Studio Ultimate 中创建一个 Windows 服务。vs 提供了一个模板来使用，但我不确定将我的代码放在哪里。有program.cs

```
static class Program
{
    static void Main()
    {
        ServiceBase[] ServicesToRun;
        ServicesToRun = new ServiceBase[] 
        { 
            new Service1() 
        };
        ServiceBase.Run(ServicesToRun);
    }
} 
```

和 service1.cs 示例代码显示了我如何格式化它，但我不确定我所做的是否正确。我搜索了很多，但找不到构建我的程序的方法

```
public partial class Service1 : ServiceBase
{
    Thread thread1;

    public Service1()
    {
        InitializeComponent();

        thread1 = new Thread(function);
        thread1.Start();
    }

    protected override void OnStart(string[] args)
    {
    }

    protected override void OnStop()
    {
    }

    public void function()
    {
        while (true)
        {
            //keep doing something
        }
    }
} 
```

我在哪里调用循环函数？我把它放在哪里或从主要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:34:52.080

我的看起来更像这样：

```
public partial class Service1 : ServiceBase 
{ 
    Thread thread1; 
   Boolean running = false;

    public Service1() 
    { 
        InitializeComponent(); 

        thread1 = new Thread(function); 

    } 

    protected override void OnStart(string[] args) 
    { 
        thread1.Start(); 
        running = false;
    } 

    protected override void OnStop() 
    { 
        running = false;
        thread1.Stop(); 
    } 

    public void function() 
    { 
        while (running) 
        { 
            //keep doing something 
        } 
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:35:34.677

`function()`从技术上讲，`Service`上课并没有错。在这一点上，这更像是一个设计问题。例如，`function()`与类中的其他操作相似的是什么？我猜不会，因为其他与类和服务控制管理器 (SCM) 之间的交互有关。

但是，代码有两个问题：

1.  在 OnStart 中而不是在构造函数中启动线程，因为那是服务启动的时候。
2.  包括一些停止函数的方式，例如布尔标志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:40:39.753

您应该记住，构造函数`Service1`不仅会在通过 SCM 启动服务时执行 - 即使您在资源管理器中单击服务可执行文件也会执行。

这就是为什么将任何服务负载放入 ctor 是一个坏主意 - 最好将服务初始化代码放入`OnStart`方法中，并将终结代码（例如停止工作线程，清理资源）放入`OnStop`方法中。

请注意，`OnStart`/`OnStop`方法的执行时间非常有限。
如果您计划执行繁重的初始化代码，请考虑在可能的情况下使用延迟初始化。

此外，请考虑使用`ThreadPool`/TPL 而不是手动创建线程。

# java - Android 上的 AdMob SDK：显示广告后的多个 SCHTimer 线程

> ID：12691246
> 
> 赞同：2
> 
> 时间：2012-10-02T13:29:18.967
> 
> 标签：java, android, admob

我正在使用 Google AdMob 在我的应用程序中展示广告。一切正常，除非线程数随着时间的推移而增加。我的应用程序将获得越来越多的由 AdMob 在内部创建的名为“SCHTimer”的 DaemonThreads。

这与这个人的问题相同：[https](https://groups.google.com/forum/#!msg/google-admob-ads-sdk/EvfESpBSjbY/DEyCfxP4hxcJ) ://groups.google.com/forum/#!msg/google-admob-ads-sdk/EvfESpBSjbY/DEyCfxP4hxcJ 不幸的是，论坛上没有答案。我的 AdMob 初始化/销毁看起来非常相似。在使用几个断点进行调试后，我可以验证破坏部分是否被调用。

此外，我在 HPROF 配置文件中找不到任何泄漏对象的迹象。

因此，我的想法不多了，还有什么要寻找的。有没有其他人遇到过这个问题？（如何）你解决了吗？

![所有正在运行的线程的调试视图](../Images/b76796def3a89461b61472b6b6967e74.png)

# dynamics-crm-2011 - 隐藏按钮时，功能区项目“Foo”取决于功能区控件 id=“Bar”

> ID：12691253
> 
> 赞同：0
> 
> 时间：2012-10-02T13:29:38.373
> 
> 标签：dynamics-crm-2011, ribbon, microsoft-dynamics

我正在尝试隐藏联系人表单上自定义实体子网格的“添加现有”按钮。到目前为止我的步骤；

*   将联系人实体添加到解决方案
*   导出解决方案并`customisations.xml`在VS2010中加载
*   将以下内容添加到`CustomAction`节点

    ```
    <HideCustomAction HideActionId="sample.Mscrm.SubGrid.new_gppractice.AddExistingAssoc.HideAction" Location="Mscrm.SubGrid.new_gppractice.AddExistingAssoc" />
    <HideCustomAction HideActionId="sample.Mscrm.SubGrid.new_gppractice.AddExistingStandard.HideAction" Location="Mscrm.SubGrid.new_gppractice.AddExistingStandard" /> 
    ```

*   保存，重新导入

尝试重新导入时，出现以下错误：

```
The ribbon item 'sample.Mscrm.SubGrid.new_gppractice.AddExistingAssoc.HideAction' is dependent on ribbon control id='Mscrm.SubGrid.new_gppractice.AddExistingAssoc'
The ribbon item 'sample.Mscrm.SubGrid.new_gppractice.AddExistingStandard.HideAction' is dependent on ribbon control id='Mscrm.SubGrid.new_gppractice.AddExistingStandard' 
```

任何想法为什么我会收到这些错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:53:13.713

不能说我对失败的原因有一个实际的解释。

但是我可以建议尝试：[Ribbon Workbench](http://www.develop1.net/public/page/Ribbon-Workbench-for-Dynamics-CRM-2011.aspx)，它使这些自定义变得更加容易。

# if-statement - Visualforce中的条件语句？

> ID：12691266
> 
> 赞同：0
> 
> 时间：2012-10-02T13:30:19.187
> 
> 标签：if-statement, salesforce, conditional, visualforce

我正在尝试基于复选框值通过 VisualForce 在页面（不是表单）上显示记录。

例如，如果选中复选框“Active_c”，我想显示五个后续字段。如果未选中复选框“Active_c”，我不想显示任何内容。

我能找到的唯一示例是在输出中显示文本，但是，它们不支持显示多个字段输出。例如：

```
{! IF ( CONTAINS('salesforce.com','force.com'), 'Yep', 'Nah') } 
```

有人有条件的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:49:26.003

顶点控制器：

```
public YourObject__c YourObject { get; set; }

public YourClass(){
    YourObject = [ Select Active__c, Field1__c, Field2__c From YourObject__c Limit 1 ];
} 
```

视觉力量页面：

```
<apex:actionFunction name="showHideFields" reRender="myFields" />

<apex:inputField value="{!YourObject.Active_c}" onChange="showHideFields()"/>

<apex:outputPanel id="myFields">
    <apex:outputPanel rendered="{!YourObject.Active_c}">
        <apex:outputField value="YourObject.Field1__c" />
        <apex:outputField value="YourObject.Field2__c" />
    </apex:outputPanel>
</apex:outputPanel> 
```

另一个例子。无需重新渲染，只需检查运行时复选框的值：

```
<apex:outputPanel>
    <apex:outputField value="YourObject.Field1__c" rendered="{!YourObject.Active_c}" />
    <apex:outputField value="YourObject.Field2__c" rendered="{!YourObject.Active_c}" />
</apex:outputPanel> 
```

# php - 使用 AND 条件过滤 HABTM

> ID：12691267
> 
> 赞同：2
> 
> 时间：2012-10-02T13:30:25.623
> 
> 标签：php, sql, filter, cakephp-2.0, has-and-belongs-to-many

我正在尝试根据与它们相关的类别过滤一些汽车零件。一个部分可以有很多类别（在代码中它们被称为标签），所以我选择了带有连接表的 HABTM 关系。

到目前为止，过滤工作有效，但仅适用于使用 SQL 命令 IN 的带有蛋糕的 OR 条件。但我试图仅过滤具有**所有**选定类别的部分，因此我需要在类别数组上使用 AND 条件。

这是从控制器中提取的代码：

```
$this->Part->bindModel(array('hasOne' => array('PartsTagsJoin')));

$params['conditions'] = array('AND' => array('PartsTagsJoin.tag_id' => $selectedCats));
$params['group'] = array('Part.id');

$parts = $this->Part->find('all',$params);
$this->set('parts',$parts); 
```

$selectedCats 是这样的数组：array(1,2,3,4,5);

SQL 输出为：

```
'SELECT `Part`.`id`, `Part`.`name`, `Part`.`image`, `Part`.`image_dir`, `Part`.`time_created`, `Part`.`time_edited`, `Part`.`user_id`, `Part`.`editor_id`, `Part`.`notice`, `User`.`id`, `User`.`username`, `User`.`password`, `User`.`usergroup_id`, `User`.`realname`, `PartsTagsJoin`.`id`, `PartsTagsJoin`.`part_id`, `PartsTagsJoin`.`tag_id` 
FROM `c33rdfloor`.`parts` AS `Part` 
LEFT JOIN `c33rdfloor`.`users` AS `User` ON (`Part`.`user_id` = `User`.`id`) 
LEFT JOIN `c33rdfloor`.`parts_tags_join` AS `PartsTagsJoin` ON (`PartsTagsJoin`.`part_id` = `Part`.`id`)  
WHERE `PartsTagsJoin`.`tag_id` IN (1, 4, 8, 24)' 
```

如何过滤具有通过 $selectedCats 数组提交的每个 id 的部分。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:02:51.527

多亏了这篇博文，我才可以正常工作：

[http://nuts-and-bolts-of-cakephp.com/2008/08/06/habtm-and-join-trickery-with-cakephp/](http://nuts-and-bolts-of-cakephp.com/2008/08/06/habtm-and-join-trickery-with-cakephp/)

**过滤带有所有**选定标签的条目似乎有点棘手：实现 AND 关系的关键是获取选定猫的数量并将其与 group 参数内的查询匹配。这条线做到了：

```
$params['group'] = array('Part.id','Part.name HAVING COUNT(*) = '.$numCount); 
```

最后，代码看起来像这样（对于对解决方案感兴趣的人）：

```
// Unbinds the old hasAndBelongsToMany relation and adds a new relation for the output
$this->Part->unbindModel(array('hasAndBelongsToMany'=>array('PartsTag')));
$this->Part->bindModel(array('hasOne'=>array(
         'PartsTagsJoin'=>array(
             'foreignKey'=>false,
             'type'=>'INNER',
             'conditions'=>array('PartsTagsJoin.part_id = Part.id')
         ),
        'PartsTag'=>array(
              'foreignKey'=>false,
              'type'=>'INNER',
              'conditions'=>array(
                  'PartsTag.id = PartsTagsJoin.tag_id',
                  'PartsTag.id'=>$selectedCats
)))));

$numCount = count($selectedCats); // count of the selected tags

// groups the entries to the ones that got at least the count of the selected tags -> here the 'AND' magic happens
$params['group'] = array('Part.id','Part.name HAVING COUNT(*) = '.$numCount); 

$parts = $this->Part->find('all', $params); // sends the query with the params

$this->set('tagCategories', $categories);
$this->set('selectedCats', $selectedCats);
$this->Part->recursive = 4;
$this->set('parts',$parts); 
```

# navigation - 如何在 ZF2 中渲染菜单的一部分

> ID：12691276
> 
> 赞同：0
> 
> 时间：2012-10-02T13:30:54.127
> 
> 标签：navigation, zend-framework2

我试图在我的 ZF2 应用程序中只呈现菜单配置的一部分。我找不到有关如何执行此操作的任何信息。

我的配置是：

```
array(
    'default' => array(
        'dashbord' => array(
            'label' => 'Dashbord',
            'route' => 'nav',
        ),
        'settings' => array(
            'label' => 'Settings',
            'route' => 'nav',
            'pages' => array(
            'Api Settings' => array(
                'label'=>'NAV_API_SETTINGS',
                'route'=>'nav'
             ),
        ),
    ),
    'NEW' =>array(
        'dashboard' => array(
            'label' => 'dashboard',
            'route' => 'nav',
        )
    )
); 
```

所以我有子集默认和新的。我只需要渲染菜单的“新”子集。我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T18:04:43.910

在某些 Module.php 或您创建导航的地方，假设您的给定配置存储在`$config`其中并且您可以访问 ServiceManager`$serviceManager`

```
$navigation = new \Zend\Navigation\Navigation($config['NEW']);
$serviceManager->setService('new_navigation', $navigation); 
```

在视图/布局中

```
<?php echo $this->navigation()->menu('new_navigation') ?> 
```

PS：在任何 Module.php 中，您都可以像这样获得 serviceManager：

```
public function onBootstrap(\Zend\EventManager\EventInterface $e)
{
    $application = $e->getApplication();
    $serviceManager = $application->getServiceManager();
} 
```

# php - 要更新 App 上的内容，NSURLConnection 是最好的方法吗？

> ID：12691280
> 
> 赞同：-1
> 
> 时间：2012-10-02T13:31:03.580
> 
> 标签：php, iphone, mysql, objective-c, xcode

现在我可以通过使用 NSURLConnection 连接到我的网站来更新我的应用程序上的内容。然而，它似乎很乱。试图将单词组织到标签上是很困难的。另外，对于每个包含新内容的新标签，我每次都必须连接到一个新网页吗？

基本上，有没有更好的方法来更新应用程序上的内容，类似于新闻页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:41:46.523

`NSURLConnection`绝对是要走的路。它所做的只是一种非常健壮且经过测试的异步连接到您的网站并检索内容的方法。它并不凌乱。您建立连接，然后在完成后在回调中捕获结果。

您在关注中引用的问题都与您连接到网站的方式完全无关。您可以以有意义的方式（例如 JSON 格式或其他格式）构建数据。一旦你检索`NSData`了你的对象，你就可以在合适的 UIKit 对象中有效地显示数据，例如表格视图单元格、标签或文本视图等。

# svn - 适用于 Windows 的 SVN 挂钩

> ID：12691281
> 
> 赞同：-3
> 
> 时间：2012-10-02T13:31:06.293
> 
> 标签：svn, tortoisesvn, svn-hooks

我可以在 Windows 的 svn 挂钩中编写一个命令，该命令自动将某些文件夹重新定位到存储库中的另一个位置吗？

钩子必须在服务器上运行 例如：用户在他的工作副本中提交文件 (C:svnworkingcopy\dev) 在服务器上将运行一个钩子并自动重新定位或将此文件复制到存储库的另一个文件夹中。(https://svnserver/onlyread)此用户具有只读权限的位置。
谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:28:56.780

`svn switch --relocate`带有钩子脚本的用户工作副本？看起来你混淆了条款。不过，我建议您检查[SVNBook](http://svnbook.red-bean.com/en/1.7/svn.reposadmin.create.html#svn.reposadmin.create.hooks)中的以下警告：

> 虽然钩子脚本几乎可以做任何事情，但钩子脚本作者应该在一个方面表现出克制：**不要使用钩子脚本修改提交事务**。虽然使用钩子脚本自动更正提交的文件中存在的错误、缺点或违反策略可能很诱人，但这样做可能会导致问题。Subversion 保留存储库数据的某些位的客户端缓存，如果您以这种方式更改提交事务，这些缓存将变得难以察觉的陈旧。这种不一致会导致令人惊讶和意外的行为。**而不是修改事务，您应该简单地在 pre-commit 钩子中验证事务，如果它不满足所需的要求，则拒绝提交**. 作为奖励，您的用户将了解谨慎、合规的工作习惯的价值。

# mysql - 如何只替换mysql中字符串中的几个字符？

> ID：12691294
> 
> 赞同：0
> 
> 时间：2012-10-02T13:31:40.653
> 
> 标签：mysql, sql

我有一个字段`urn_sem.studentid`，我想在其中替换几个字符；例如：

*   `ABC/2011/BCOMH_NC/I/12`→`ABC/2011/BCOMH/I/12`
*   `ABC/2011/BCOMH_NC/I/24`→`ABC/2011/BCOMH/I/24`

我试过这个查询：

```
SELECT REPLACE(studentid, 'KNC/2011/BCOMH_NC/', ' KNC/2011/BCOMH/')
  FROM urn_sem 
```

但它没有显示新值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:49:03.960

你想要这个吗：

```
update urn_sem
    set studentid = REPLACE(studentid, 'KNC/2011/BCOMH_NC/', ' KNC/2011/BCOMH/')
    where studentid like '%KNC/2011/BCOMH_NC/%' 
```

该`WHERE`子句是可选的。它确保替换仅在更改的行上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:39:39.687

这个示例查询不起作用？从 urn_sem 中选择替换（学生编号，'_'，''）

# actionscript-3 - 运行我的代码时引发 TypeError

> ID：12691297
> 
> 赞同：1
> 
> 时间：2012-10-02T13:31:56.387
> 
> 标签：actionscript-3

当我尝试运行我的代码时出现以下错误。

> TypeError：错误＃1010：术语未定义且没有属性。

```
 private function calculateFIX001Value(custfields:Array):Number
    {
        var result:Number = new Number;
        var valueObj:Object;

        try{
                var markUp:Number = 0.01;
                var projectValue:String = "";
                var marketCategory:String = "";

                for each (var custField:Object in custfields)
                {
                    if (custField.fieldLabel == 'Segment Category')
                        marketCategory = custField.selectedValue[0];

                    if (custField.fieldLabel == 'Project Value (R)')
                        projectValue = custField.selectedValue[0].toString().replace("R","");
                        projectValue = projectValue.replace(",","");
                        projectValue = projectValue.replace(",","");
                        projectValue = projectValue.replace(",","");
                }

                switch (marketCategory)
                {
                    case "23": //5% Markup for Building
                        markUp = new Number(5 / 100);
                        break;
                    case "24": //11% Markup for Civils
                        markUp = new Number(11 / 100);
                        break;
                    case "25": //2% Markup for Scaffolding
                        markUp = new Number(2 / 100);
                        break;
                    default:
                        break;
                }

                if ((projectValue != "" && projectValue != '0') && marketCategory != "")
                {
                    var revenue:Number = new Number;
                    //if (!_model.myProfile.switchOpportunityInMillions)
                    //  revenue = parseFloat(projectValue) * 1000000 * markUp;
                    //else
                        revenue = parseFloat(projectValue) * markUp;
                    valueObj = new Object;
                    valueObj.label = "Expected Revenue";
                    valueObj.value = revenue;
                    //result.push(valueObj);
                    result = revenue;
                    //rm.saveOpportunityValue(_currentOpportunity.id, revenue);
                }
                else
                {
                    var errorObj:Object = new Object;
                    var errMsg:String = "";

                    if (projectValue == '' || projectValue == '0')
                        errMsg = "Project value not specified";

                    if (marketCategory == "")
                    {
                        if (errMsg != "")
                            errMsg += " or no Segment Category has been selected";
                        else
                            errMsg = "No Segment Category has been selected";
                    }
                    errorObj.label = 'Cannot calculate value.';
                    errorObj.value = errMsg + '.';
                    //result.push(errorObj);

                    result = 0;
                }
        } catch(e:Error) {
            Alert.show(e.toString());
        }

        return result;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:39:54.317

TypeError: Error #1010 也称为“空指针异常”，这意味着您试图访问空对象属性。

如果您查看堆栈跟踪告诉您的行，您可能会发现原因没有太大问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:39:04.567

这是帮助您解决问题的间接答案：（因为您的代码中有很多东西可能为空或未定义并导致此错误）

你几乎所有的代码都在 a 中`try/catch`，所以你的错误实际上并没有被抛出，你只是在追踪被捕获的错误。

抛出错误（通过删除 try/catch 或在 catch 块中手动抛出）：

```
catch(e:Error) {
    Alert.show(e.toString()); //instead of this, for debugging, do the line below:
    Throw e; //this will throw the error, so you will get your stack trace and the line number of error
} 
```

要获取错误的行号并查看堆栈跟踪，您需要在调试播放器或您的 IDE（例如 Flash 或 FlashBuilder）中运行。

# oracle - 在 grails 数据库迁移中使用 PLSQL

> ID：12691301
> 
> 赞同：1
> 
> 时间：2012-10-02T13:32:03.610
> 
> 标签：oracle, grails, plsql, migration, liquibase

我使用的是 liquibase 的 Grails 数据库迁移插件。我试图在迁移中使用 aPLSQL 语句来查找和删除表上的约束，我使用这种方法，因为我不知道约束的名称，并且它会因我使用的不同系统而异。

一些注意事项：

*   圣杯 1.3.7
*   数据库迁移 1.0

这是迁移的代码

```
sql("declare\n" +
      "vOldName all_constraints.constraint_name%TYPE\n" +
    "begin\n" +
      "select CONSTRAINT_NAME\n" +
      "into   vOldName\n" +
      "from   all_constraints\n" +
      "where  TABLE_NAME='TABLENAME' and CONSTRAINT_TYPE='U' and OWNER='USERNAME'\n" +
      "execute immediate 'alter table USERNAME.TABLENAMEdrop constraint '\n" +
      "|| vOldName\n" +
    "end") 
```

当我运行它时，我收到以下错误：

```
java.sql.SQLException: ORA-06550: line 3, column 1:
  PLS-00103: Encountered the symbol "BEGIN" when expecting one of the following:
    := ( ; not null range default character
  The symbol ";" was substituted for "BEGIN" to continue. 
```

我试图添加`;`到每个语句的末尾，但他们抱怨在代码中看到文件结尾。

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T02:36:17.637

```
sql("declare\n" +
      "vOldName all_constraints.constraint_name%TYPE;\n" +
    "begin\n" +
      "select CONSTRAINT_NAME\n" +
      "into   vOldName\n" +
      "from   all_constraints\n" +
      "where  TABLE_NAME='TABLENAME' and CONSTRAINT_TYPE='U' and OWNER='USERNAME';\n" +
      "execute immediate 'alter table USERNAME.TABLENAME drop constraint '\n" +
      "|| vOldName;\n" +
    "end;") 
```

我认为这将解决它。PL/SQL 块在每条语句后都需要一个分号。唯一不需要分号的是动态 SQL。`TABLENAME`此外，和之间缺少空格`drop`。

首先确保代码在 SQL*Plus 或其他一些数据库工具中工作可能会有所帮助。然后将其粘贴到多行字符串中。

让我知道它是否不起作用。

# php - PHP：不能多次循环遍历 mysql 行

> ID：12691303
> 
> 赞同：6
> 
> 时间：2012-10-02T13:32:17.137
> 
> 标签：php, mysql

我正在处理分页，由于某种原因，我不能使用 mysql_fetch_array 多次循环遍历结果。

```
//both $page and $imagesPerPage != 0
$offset = $page * $imagesPerPage
while ($row = mysql_fetch_array($result)) {
   $total_images++;
}
echo $total_images;
//echos correct amount
$row = null;

$images_to_offset = 0;
while ($row = mysql_fetch_array($result) && $images_to_offset < $offset) {
   $images_to_offset++;
}
echo $images_to_offset;
//echos 0... which is wrong 
```

我应该使用不同的 php 函数来获取数据库中的行数据吗？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T13:33:35.997

这是错误

```
while ($row = mysql_fetch_array($result)) {
   $total_images++;
} 
```

获取数组后，数组指针设置为末尾。

用这个

```
 $total_images=mysql_num_rows($result); 
```

和

```
$images_to_offset=mysql_num_rows($result); 
```

或者

重置指针的位置 使用[`mysql_data_seek()`](http://www.php.net/manual/en/function.mysql-data-seek.php)。它移动内部结果指针

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T13:35:51.527

如果您希望在已经获取后从头开始获取，则需要使用[`mysql_data_seek()`](http://www.php.net/manual/en/function.mysql-data-seek.php).

另外，请注意`mysql`line of functions 已被[弃用](http://news.php.net/php.internals/53799)，社区鼓励使用`MySQLi`或`PDO_MySQL`line of functions。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T13:36:00.720

您可以使用 将指针指向第一行`mysql_data_seek`。

```
mysql_data_seek($result, 0); 
```

另见：[http ://ca2.php.net/manual/en/function.mysql-data-seek.php](http://ca2.php.net/manual/en/function.mysql-data-seek.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T13:35:53.733

尝试使用`mysql_num_rows()`，这样您就不必重复`$result`两次，这会在第二个循环中给您错误，因为您必须重置结果指针。所以这样做只迭代一次：

```
//both $page and $imagesPerPage != 0
$offset = $page * $imagesPerPage
$total_images = mysql_num_rows($result);
echo $total_images;
//echos correct amount
$row = null;

$images_to_offset = 0;
while ($row = mysql_fetch_array($result) && $images_to_offset < $offset) {
   $images_to_offset++;
}
echo $images_to_offset; 
```

作为旁注，您应该尝试迁移到 MySQLi 或 PDO_MySQL 以访问 mysql，因为您使用的接口现已弃用，请参见[http://es.php.net/manual/en/function.mysql-中的红色框行数.php](http://es.php.net/manual/en/function.mysql-num-rows.php)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T13:36:10.427

您只能循环遍历结果数组一次，然后它们有效地“消失”。多次循环结果的方法是在第一个循环期间将它们存储到一个新数组中，然后根据需要循环多次新数组......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-02T13:36:40.010

您必须使用[mysql_data_seek](http://www.php.net/manual/en/function.mysql-data-seek.php)函数“倒带”数组：

```
$offset = $page * $imagesPerPage
while ($row = mysql_fetch_array($result)) {
   $total_images++;
}
echo $total_images;
//echos correct amount
$row = null;

mysql_data_seek(); // <-- rewind to the beginning

$images_to_offset = 0;
while ($row = mysql_fetch_array($result) && $images_to_offset < $offset) {
   $images_to_offset++;
}
echo $images_to_offset; 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-02T13:37:23.303

[`mysql_fetch_array`](http://php.net/manual/en/function.mysql-fetch-array.php)不仅返回一个对应于获取行的数组，它还将内部数据指针向前移动。

处理这个问题的方法不止一种，最明显的是将你的结果“停放在”数组本身中，然后从那里开始工作。或查询2次。或使用[`mysql_data_seek`](http://php.net/manual/en/function.mysql-data-seek.php). 在你的情况下，也许[`mysql_num_rows`](http://php.net/manual/en/function.mysql-num-rows.php)更合适，因为你的代码表明你只想知道你必须迭代多少行，这就是这个函数的用途。

无论决定如何，请记住不鼓励使用 mysql 扩展。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。

# spring - 下载文本/html文件时如何防止servlet响应编码？弹簧+JSF

> ID：12691307
> 
> 赞同：0
> 
> 时间：2012-10-02T13:32:39.803
> 
> 标签：spring, jsf, tomcat, servlets, mime-types

我使用 tomcat 5.5、JSF 1.2、Spring 3

我有将文件从磁盘传递到浏览器的 servlet。当该文件具有**text/html mime 类型**时，就会出现问题。

我不知道该文件可能有什么编码，所以我无法设置正确的响应编码。

这是servlet的代码

```
 private void handleFILERequest(final FacesContext context) throws UnsupportedEncodingException {
    String filePath = AbstractBean.getStrRequestScopeAttribute(FILE_PATH);
    String mimeType = AbstractBean.getStrRequestScopeAttribute(FILE_MIME_TYPE);
    String fileName = AbstractBean.getStrRequestScopeAttribute(FILE_NAME);
    byte[] data = getFile(filePath);

    HttpServletResponse response = AbstractBean.getResponse();
    response.reset();
    response.setContentType(mimeType);
    response.setContentLength(data.length);
    if (fileName == null || "".equals(fileName)) {
        response.addHeader("Content-Disposition", "attachment; filename=\"downloadFile\"");
    } else {
        response.addHeader("Content-Disposition", "attachment; filename=\"" + URLEncoder.encode(fileName, "UTF-8") + "\"");
    }
    try {
        response.getOutputStream().write(data);
    } catch (Exception exception) {
        LOG.error(exception.getMessage());
    }
    context.responseComplete();
}

private byte[] getFile(final String path) {
    return IOUtils.readFile(path);
} 
```

仅当文件的**mime 类型**为**text/html**时，才会出现该问题。**在我将它传递给响应outputstream**之后，不知何故该字节流被重新编码。如下所示，**html**标记也略有变化。我认为 servlet 容器可以做到这一点，但我不确定。

有没有办法检测文件编码以将其设置为响应编码或至少防止响应流的进一步重新编码？

至少我想知道谁改变了那个字节流，tomcat，spring，jsf还是......？

这是磁盘上的一部分文件以及浏览器中生成的下载文件：

磁盘上的文件（西里尔符号，但未定义编码）：

```
<html>
  <head>
    <link HREF="/vestnik/csstyles/article.css" REL="stylesheet">
    <title>Л.О. Бутакова. Опыт классификации ошибок ...</title>
  </head>
... 
```

我在浏览器中获得的文件：

```
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link HREF="/vestnik/csstyles/article.css" REL="stylesheet">
    <title>пїЅ.пїЅ. пїЅпїЅпїЅпїЅпїЅпїЅпїЅпїЅ. пїЅпїЅпїЅпїЅ пїЅпїЅпїЅпїЅпїЅпїЅпїЅпїЅпїЅпїЅпїЅпїЅпїЅ пїЅпїЅпїЅпїЅпїЅпїЅ ...</title>
  </head>
... 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:49:39.060

您可以使用 UTF-8 编码

```
String str = new String(data); //set your data in this object
response.setContentType("text/plain");
InputStream input = new ByteArrayInputStream(str.getBytes("UTF8")); 
```

# ruby-on-rails - Rails 表单（选择/选项） - 如何用 HAML 标记选定的选项？

> ID：12691309
> 
> 赞同：15
> 
> 时间：2012-10-02T13:32:59.850
> 
> 标签：ruby-on-rails, forms, select, haml, option

在 HAML 的表单中标记当前选定选项值的最快和最优雅的方法是什么？

```
%form{:action => '', :method => 'get'}
   %select{:name => 'param_name'}
      %option{:value => 'A'} A data
      %option{:value => 'B'} B data 
```

单程：

```
- if params[:param_name] == "A"
  %option{:value => 'A', :selected => 'selected'} A data
- else
  %option{:value => 'A'} A data 
```

`select`但是当盒子有很多选项字段时，这是不合适的......

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-02T13:46:18.200

像这样的东西会起作用（使用旧的“hashrocket语法”和 operator `=>`）

```
%select
  %option{:value => "a", :selected => params[:x] == "a"}= "a"
  %option{:value => "b", :selected => params[:x] == "b"}= "b" 
```

或者，在较新的 Ruby 版本（1.9 和更高版本）中：

```
%select
  %option{value: "a", selected: params[:x] == "a"}= "a"
  %option{value: "b", selected: params[:x] == "b"}= "b" 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-02T16:04:01.143

你应该释放 rails helpers 的力量。

[对于`select`标签](http://guides.rubyonrails.org/form_helpers.html#making-select-boxes-with-ease)：

```
= select_tag :param_name, options_for_select([['A data', 'A'], ['B data', 'B']], params[:param_name]) 
```

此外，在可能的情况下，而不是原始`%form`使用`form_tag`或更好`form_for`（或更好的 simple_form 或 formtastic）

# iphone - 使用 iOS 与提供 Python 接口的硬件通信

> ID：12691310
> 
> 赞同：-4
> 
> 时间：2012-10-02T13:33:06.513
> 
> 标签：iphone, python, objective-c, ios

我必须访问公开以下 Python 接口的硬件组件：

```
$ python
>>> from ***.***.***.*** import *

>>> client = Client('http://*****')

>>> client.getFirmwareVersion() 
```

我该怎么做？

我是否必须在 obj-c 中创建新类，或者我可以使用 python 库并使用 Objective-c 访问数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:20:25.317

您似乎遗漏了重要的一点；从 iOS 的角度来看，您连接的硬件实际上完全远离 - 即使它是通过本地 wifi 热点通过 TCP/IP 连接的。

看看[NSURLConnection](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)，这是一个 iOS 系统组件，它允许您通过 TCP/IP 双向远程连接和传输数据。

您的首要任务是为 Python 驱动的硬件找到合适的接口。我强烈建议您使用某种 HTTP 接口。

# ruby-on-rails - rails 3 order by another models column

> ID：12691312
> 
> 赞同：0
> 
> 时间：2012-10-02T13:33:15.047
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller

我的 Rails 3 应用程序中有 2 个模型，我用它们来描述人们和他们的住所不幸的是我在没有使用关联的情况下设置了这些模型

2张桌子是这样设置的

```
People
 id
 name
 location_id

Locations
  id
  name 
```

我想要做的是按 Locations.name 的字母顺序和 People.name 的字母顺序列出 Peoples 表中的所有条目

我可以使用此代码进行简单的排序，该代码按位置对每个人进行分组，但我还需要深入研究 Locations 表

```
@people = People.all(:order => '"location_id" ASC, "name" ASC') 
```

有人知道吗？

在 People 类中设置关联以说 location_id 是 Locations.id 也是一个好主意

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:38:17.943

添加

```
belongs_to :location 
```

到人班

然后可以通过以下方式查询：

```
@people = People.joins(:location).order("locations.name ASC, people.name ASC") 
```

# c++ - 如果在某些输入之后使用 getline() 将不起作用

> ID：12691316
> 
> 赞同：33
> 
> 时间：2012-10-02T13:33:33.720
> 
> 标签：c++, char, getline

> **可能重复：**
> [在 getline() 方面需要帮助](https://stackoverflow.com/questions/1744665/need-help-with-getline)

`getline()`不工作，如果我在一些输入后使用它，即

```
#include<iostream>
using namespace std;

main()
{
string date,time;
char journal[23];

cout<<"Date:\t";
cin>>date;
cout<<"Time:\t";
cin>>time;

cout<<"Journal Entry:\t";
cin.getline(journal,23);

cout<<endl;
system("pause");
} 
```

就好像我`getline()`在输入之上使用一样，它确实有效，即

```
cout<<"Journal Entry:\t";
cin.getline(journal,23);
cout<<"Date:\t";
cin>>date;
cout<<"Time:\t";
cin>>time; 
```

可能是什么原因？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-10-02T13:44:54.337

> 提取字符直到 (n - 1) 个字符被提取或找到分隔符（如果指定此参数，则为分隔符，否则为 '\n'）。如果在输入序列中到达文件末尾或在输入操作期间发生错误，提取也会停止。

从`cin.getline()`输入读取时，输入流中会留下一个换行符，因此它不会读取您的 c 字符串。`cin.ignore()`调用前使用`getline()`。

```
cout<<"Journal Entry:\t";
cin.ignore();
cin.getline(journal,23); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-02T13:45:29.667

添加到@DavidHammen 所说的内容：

提取操作将尾随`'\n'`字符留在流中。另一方面，`istream::getline()`丢弃它。因此，当您`getline`在提取运算符之后调用时，`'\n'`它遇到的第一个字符是它并在此处停止读取。

把它放在`getline`调用提取之前：

`cin.ignore()`

一种更强大的输入方式是这样的：

```
while (true) {

    cout<<"Time:\t";
    if (cin>>time) {
        cin.ignore();  // discard the trailing '\n'
        break;
    } else {
        // ignore everything or to the first '\n', whichever comes first
        cin.ignore(numeric_limits<streamsize>::max(), '\n');
        cin.clear();  // clear the error flags
        cout << "Invalid input, try again.\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T13:40:21.583

您没有检查流状态。流`std::cin`提取运算符 ( `operator>>`) 可能会失败。当它发生时，流被标记为“坏”（`failbit`、`badbit`或`eofbit`已设置）。一旦“坏”，除非您清除状态，否则对该流的所有后续流提取都将失败。

学习成为一个偏执的程序员。始终检查那些格式化输入操作的状态。例如，您可以抛出异常，或打印错误消息并退出。你不应该做的一件事是简单地假设它有效。

# php - 是什么导致 PHP 锁定文件

> ID：12691321
> 
> 赞同：4
> 
> 时间：2012-10-02T13:33:45.723
> 
> 标签：php, windows, iis

在我的服务器上，脚本创建的脚本和缓存文件偶尔会被 PHP 进程锁定。一旦锁定，它们就不能通过网络共享、服务器本地或 PHP 本身访问。刷新页面会导致访问被拒绝错误：

```
Warning:  rmdir(C:\inetpub\wwwroot\mdblog\public\..\cache\posts\2012) 
[function.rmdir]: Directory not empty in
C:\inetpub\wwwroot\mdblog\public\system\Filesystem.php on line 52 
```

第 52 行是`rmdir($dir);`.

在“大量”磁盘操作（连续快速刷新页面、一次删除许多文件等）之后，该问题更为普遍。它是一个带有 IIS7 和 PHP 5.3.13（使用 FastCGI）的 Windows Server 2008 R2 服务器，在 VM 服务器上运行，没有病毒扫描程序，使用 Web 平台安装程序安装了 PHP。[诊断](https://dl.dropbox.com/u/70903/tmp/DxDiag.txt)

做一个`iisreset`暂时解决问题。我正在编写一个静态站点生成功能，但是每隔几分钟就会出现这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:45:44.227

您的脚本 chdir() 是否有可能被编入目录？在 Windows 下，您不能删除任何正在运行的进程的当前目录。有时您可能会收到奇怪的消息（例如“目录不为空”），而真正的原因是存在以该目录作为当前目录运行的进程。

我的想法是 IIS 使 PHP 进程保持活动状态（因为在 Windows 下，启动新进程是重量级操作），因此池中未使用的进程会阻止您删除这些目录。通过重新启动 IIS，您可以终止池中的所有进程，从而使删除成为可能。

尝试 chdir() 到 PHP 脚本末尾的默认目录，看看它是否有效。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-02T13:40:59.017

正如错误所说，该文件夹不是空的，因此无法删除。可能是因为并非所有临时文件都被删除了。尝试实现和使用递归函数......

```
function rrmdir($dir) {
    foreach(glob($dir . '/*') as $file) {
        if(is_dir($file))
            rrmdir($file);
        else
            unlink($file);
    }
    rmdir($dir);
} 
```

此功能将删除文件夹内的所有内容，然后将其删除。

# .htaccess - 如何重写这样的 URL http://localhost/gestor_3.0/index.php?p=cadastros&t=operadoras

> ID：12691323
> 
> 赞同：0
> 
> 时间：2012-10-02T13:34:04.407
> 
> 标签：.htaccess, url, mod-rewrite, url-rewriting

如何像这样重写 URL

```
http://localhost/gestor_3.0/index.php?p=cadastros&t=operadoras 
```

到

```
http://localhost/gestor_3.0/cadastros/operadoras 
```

使用 htaccess 和 mod_rewrite。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:43:33.403

将您的 seo 友好 url /cadastros/operadoras 重写到解析 php 文件

```
RewriteRule ^gestor_3.0/(.*)/(.*)/?$ /index.php?p=$1&t=$2 [L] 
```

# java - Java + Jersey - 发送 utf-8 编码数据

> ID：12691325
> 
> 赞同：1
> 
> 时间：2012-10-02T13:34:19.117
> 
> 标签：java, encoding, jersey

在我的应用程序中，我需要使用 web 服务的其余 api。现在我需要发送一条 xml 消息。问题是，这个 xml 中的一些字符是波兰语变音符号。现在，我的消息发送代码如下所示

```
WebResource r = client.resource(resourceAddress);
String response = r.accept(
        MediaType.APPLICATION_XML_TYPE,
        MediaType.APPLICATION_JSON_TYPE,
        MediaType.TEXT_HTML_TYPE
    )
    .type(MediaType.TEXT_XML_TYPE)
    .header("Authorization", authorizationString)
    .post(String.class, event); 
```

Java 字符串是 UTF-16，我的 XML 应该是 UTF-8 编码的。有没有办法告诉泽西在序列化之前以某种方式改变编码？或者也许还有其他方式，所以我可以使用 Jersey 客户端 api 将这个字符串数据作为 UTF-8 而不是 UTF-16 发送？

# mysql - 如何根据 MySQL 中的多个字段查找重复行？

> ID：12691327
> 
> 赞同：32
> 
> 时间：2012-10-02T13:34:27.000
> 
> 标签：mysql, sql

> **可能重复：**
> [Mysql Duplicate Rows ( Duplicate detected using 2 columns )](https://stackoverflow.com/questions/1799518/mysql-duplicate-rows-duplicate-detected-using-2-columns)

在 MySQL 数据库中，我有很多行。例如：

```
id | title   | time  | domain
32   title1    12:30   domain1.com
33   title1    12:30   domain2.com
34   title2    14:20   domain1.com
35   title3    14:30   domain2.com
36   title1    12:30   domain55.com 
```

如何**仅**根据标题和**时间从数据库中选择行？**重复的域或 ID 无关紧要，只关心其他两个字段。

我希望能够检索第 32、33 和 36 行，因为它们具有相同的标题和相同的时间。

我不想输入标题或时间，我希望查询返回在这两个字段上找到“重复”匹配的所有字段，无论是两个还是 50。这样我就可以通过和编辑或删除一些重复项。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-10-02T13:53:07.523

这就是你想要的

```
SELECT title, time  
  FROM table
GROUP BY title, time
  HAVING count(*) > 1 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-10-02T13:39:14.400

```
select distinct id, title, time
  from table t1
 where exists (select * 
                 from table t2 
                where t2.id <> t1.id
                  and t2.title = t1.title
                  and t2.time = t1.time
               ) 
```

# wpf - DependencyProperty.RegisterAttached 和多个实例

> ID：12691328
> 
> 赞同：1
> 
> 时间：2012-10-02T13:34:28.873
> 
> 标签：wpf, mvvm, dependency-properties

我正在开发一个 WPF MVVM 应用程序。我正在寻找将 WebBrowser 控件数据绑定到视图模型，该视图模型又绑定到选项卡。按照[本文](http://thomasfreudenberg.com/blog/archive/2010/08/01/binding-webbrowser-content-in-wpf.aspx)中的建议，我创建了一个由静态 DependancyProperty 组成的静态帮助器类：

```
public static class WebBrowserHelper
{
    public static readonly DependencyProperty BodyProperty =
        DependencyProperty.RegisterAttached("Body", typeof(string), typeof(WebBrowserHelper), new PropertyMetadata(OnBodyChanged));

    public static string GetBody(DependencyObject dependencyObject)
    {
        return (string)dependencyObject.GetValue(BodyProperty);
    }

    public static void SetBody(DependencyObject dependencyObject, string body)
    {
        dependencyObject.SetValue(BodyProperty, body);
    }

    private static void OnBodyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        string newValue = (string)e.NewValue;
        var webBrowser = (WebBrowser)d;
        webBrowser.NavigateToString(newValue);
    }
} 
```

XAML 将 WebBrowser 绑定到 DependancyProperty：

```
<WebBrowser Grid.Column="2" HorizontalAlignment="Center" src:WebBrowserHelper.Body="{Binding HTMLBody}"  VerticalAlignment="Center" Height="Auto" Width="Auto"  /> 
```

绑定到 Tab Control 的 ItemsSource 的 ViewModel：

```
public class SomeVM : ViewModelBase, INotifyPropertyChanged
{

    private string _htmlBody;
    private SomeView _myView = new SomeView();

    public SomeVM (string tabName)
    {
        TabName = tabName;
        string contentsAsHTML = do_a_whole_bunch_of_stuff_to_generate_an_HTML_string();
        HTMLBody = contentsAsHTML;
    }

    public string HTMLBody
    {
        get { return _htmlBody; }
        set
        {
            if (_htmlBody != value)
            {
                _htmlBody = value;
                RaisePropertyChanged("HTMLBody");
            }
        }
    }

    public SomeView View
    {
        get {return _myView;}
        set { }
    }

    public string TabName { get; set; }
} 
```

MainViewModel，创建 Tab 集合：

```
 private ObservableCollection<SomeVM> _tabs;
    public ObservableCollection<SomeVM> Tabs
    {
        get
        {
            if (_tabs== null)
            {
                _tabs= new ObservableCollection<SomeVM>();
                _tabs.Add(new SomeVM("Tab 1"));
                _tabs.Add(new SomeVM("Tab 2"));
                _tabs.Add(new SomeVM("Tab 3"));
            }
            return _tabs;
        }
    } 
```

MainWindow.xaml 设置选项卡绑定：

```
 <TabControl ItemsSource="{Binding Tabs, Source={StaticResource vm}}"
                        >
                <TabControl.ItemTemplate>
                    <DataTemplate>
                        <TextBlock
                            Text="{Binding TabName}" />
                    </DataTemplate>
                </TabControl.ItemTemplate>
                <TabControl.ContentTemplate>
                    <DataTemplate>
                        <ContentPresenter Content="{Binding View}" />
                    </DataTemplate>
                </TabControl.ContentTemplate>
           </TabControl> 
```

我的问题是“OnBodyChanged”在标签更改时被多次触发。HTML 需要几秒钟来加载，我宁愿它只在视图模型中实际修改属性时加载。

**编辑**

[这是重现我的问题的最小示例项目](http://www.mediafire.com/?8b2ss4ji2g986dj)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:44:53.347

您的问题与附加属性或 MVVM 无关。事实上，真正的问题是 TabControl 每次更改所选选项卡时都会破坏并重新创建其子项。这可以解释为什么处理程序被多次调用。VisualTree 仅包含选定的选项卡。

如果您可以尝试使用其他控件，您将看到没有错误。

为了解决这个问题，我将把你重定向到这篇[文章](https://stackoverflow.com/questions/2238072/tabcontrol-disposes-of-controls-on-inactive-tabs)。

# javascript - 如何设置 Fancybox iFrame v 2.1 的高度？

> ID：12691329
> 
> 赞同：3
> 
> 时间：2012-10-02T13:34:28.680
> 
> 标签：javascript, .net, fancybox

这是我的代码

```
<script type="text/javascript">
    $(document).ready(function () {

        $("#popup").fancybox({
            'width': 500,
            'height': '500',
            'transitionIn': 'elastic',
            'transitionOut': 'elastic',
            'type': 'iframe'
        });
    });
</script> 
```

iframe 的宽度已设置，但高度未设置。请让我知道我哪里出错了？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T06:03:06.587

我通过这样做解决了它...

```
$(document).ready(function () {
        $("#popup").fancybox({
            fitToView: false,
            autoSize: false,
            autoDimensions: false,
            width: 520,
            height: 310,
            title: 'Login',
            helpers: {
                title: {
                    type: 'float'
                },
            },
            'transitionIn': 'elastic',
            'transitionOut': 'elastic'
        });
    }); 
```

不管怎么说，还是要谢谢你...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:19:00.970

您的高度变量值应该是一个数字，现在您将它作为一个字符串。所以你的代码应该看起来更像这样：

```
<script type="text/javascript">
    $(document).ready(function () {

        $("#popup").fancybox({
            'width': 500,
            'height': 500,
            'transitionIn': 'elastic',
            'transitionOut': 'elastic',
            'type': 'iframe'
        });
    });
</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-16T14:49:10.697

假设您的元素上有“fancybox”和“fancybox.iframe”类，完成所需的最低要求是：

```
$('.fancybox').fancybox({
        autoSize: false,
        width: 400,
        height: 400
}); 
```

# ruby-on-rails - 在 Rails 中使用 google-maps-for-rails gem 时设置标记颜色

> ID：12691330
> 
> 赞同：4
> 
> 时间：2012-10-02T13:34:32.260
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gmaps4rails

如何使用 google-maps-for-rails 将颜色参数传递给 google maps api？我想根据一个值设置控制器内每个标记的颜色，所以有些是红色，有些是黄色，有些是绿色。我相信这是符号中的图标属性，正在查看：

[https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)

另外，我想在标记内有一个 1-99 的数字，可以吗？到目前为止，我有这个。

```
@json = Device.all.to_gmaps4rails do |device, marker|
end 
```

我已经为此苦苦挣扎了好几天，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T15:05:01.587

您应该简单地利用谷歌的图表 api。

例如，以下是一个标记：

*   字母 A
*   红色：`FF0000`
*   黑色文字：`000000`

[http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=A|FF0000|000000](http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=A|FF0000|000000)

所以你应该定制你的需求：

```
@json = Device.all.to_gmaps4rails do |device, marker|
   marker.picture({
     :picture => "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=A|FF0000|000000", # up to you to pass the proper parameters in the url, I guess with a method from device
     :width   => 32,
     :height  => 32
   })
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-09-12T16:54:06.870

我实施了上述解决方案无济于事，但现在弄清楚了为什么这不起作用。也许这是对 gem 的更新，但“url”是图片 URL 的正确键，而不是“图片”。这是我的控制器中的代码：

```
@devices_hash= Gmaps4rails.build_markers(@devices) do |device, marker|
  ...
  marker.picture({
     :url => "http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=A|007FFF|000000",
     :width   => 32,
     :height  => 32
  })
end 
```

希望这可以帮助一些在同一件事上苦苦挣扎的人。

# c++ - 如果在声明中使用了 __typeof__ 宏，是否可以访问结构成员？

> ID：12691333
> 
> 赞同：0
> 
> 时间：2012-10-02T13:34:35.317
> 
> 标签：c++, g++

我用 g++ 编译，我的代码中有一些数据结构：

```
typedef struct {
  int member;
  // [...]
} Record;

class Data {
  Record * records;
  // [...]
  static int method(const void * ptr);
}; 
```

然后第一个版本有效：

```
int Data::method(const void * ptr) {
    Record * rec_1 = (Record *) ptr;
    return rec_1->member;
} 
```

第二个版本没有：

```
int Data::method(const void * ptr) {
    __typeof__(records) * rec_1 = (__typeof__(records) *) ptr;
    return rec_1->member;
} 
```

并引发错误：

```
error: request for member ‘member’ in ‘* rec_1’, which is of non-class type ‘Record*’ 
```

我是`__typeof__`宏，因为它让我不用担心它们是什么类型`records`。是否可以保留`__typeof__`宏并能够访问结构的成员？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:42:57.810

`records`成员是指向记录的指针，而不是记录。因此，您声明`rec_1`是指向记录指针的指针，而不是指向您想要的记录的指针。

此外，对于那些试图编译代码的人：

*   您将“typedef”拼错为“typdef”。
*   `Record->member`你在你想写的地方写`rec_1->member`。
*   `method`不允许静态成员函数引用成员`records`。删除`static`允许它编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:42:21.787

`records`有类型`Record*`。`rec_1`类型也是如此`Record**`。

假设在您的实际代码中该行是`rec_1->member`，而不是`Record->member`，那么您正在尝试访问对象的成员`*rec_1`。但是`*rec_1`有 type `Record*`，它没有成员。

如果您发布您的实际代码，则有可能有人可以回答您的问题*，而无需*猜测它的真正含义。尽可能编写最短的程序，它会产生您报告的编译器错误。将代码缩进 4 个空格。将其复制并粘贴到您的问题中。

# asp.net-mvc-4 - 是否建议从 ASP.NET MVC 4 中的 Web api 方法返回 json 数据？

> ID：12691334
> 
> 赞同：1
> 
> 时间：2012-10-02T13:34:36.010
> 
> 标签：asp.net-mvc-4, asp.net-web-api

是否建议从 web api 方法返回 json 数据？

这是我用于 jqgrid 的。

我正在使用 WebApi 进行所有其他操作，例如获取、更新、删除等...

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:36:32.203

WebApi 支持[内容协商](http://www.google.nl/url?sa=t&rct=j&q=&esrc=s&source=web&cd=4&ved=0CEcQFjAD&url=http://www.asp.net/web-api/overview/formats-and-model-binding/content-negotiation&ei=1O1qUL__HePU0QWxm4GQCA&usg=AFQjCNEs4sK8USVDw2yJW7LZ-Z7_mw4CHw)。这意味着它会给你你所要求的。WebApi 将检查您的请求的标头，然后以正确的格式返回数据。

对于使用 jqGrid 的 AJAX 应用程序，您可能会要求使用 JSON。这是在 JavaScript 中使用的最简单的格式。

如果其他人调用您的 WebApi 方法并请求 Xml，您的方法会将 Xml 返回给调用者。

# java - 如何使嵌套表在 JEditorPane 中填充其外部单元格

> ID：12691339
> 
> 赞同：1
> 
> 时间：2012-10-02T13:34:46.137
> 
> 标签：java, html, css, swing, jeditorpane

我有一个表格网格，由一个外部表格组成，该表格有两列和 n 行，每个单元格依次填充一个表格。目前，我在一个带有一些填充的 div 中的每个内表，并且内表有 css 来应用边框和背景颜色。
这给了我一个布局，我的表格显示在一个网格中，它们之间有很好的间隔。我遇到的唯一问题是我希望每个表都填充它所在单元格中的所有可用高度。目前，它们水平填充宽度，但垂直仅与包含其内容所需的一样大。这给了我看起来不太好的桌子之间不均匀的垂直间隙。内表和外表以及 div 的 CSS 在这里：

```
sheet.addRule("table.inner {width: 100%; height: 100%; background-color: #F2F2F2; border-width: 1px; border-style: solid; border-color: #666666;}"); 
```

```
sheet.addRule("table.outer {width: 100%; height: 100%; border-width: 1px; border-style: solid; border-color: #666666;}"); 
```

```
sheet.addRule("div {padding:5; height: 100%;}"); 
```

基本上，我明白了：

```
=========   =========
|a      |   |a      |
|a      |   |a      |
|a      |   |a      |
|a      |   =========
=========
=========   =========
| .     |   |.      |
| .     |   |.      | 
```

但我想要这样：

```
=========   =========
|a      |   |a      |
|a      |   |a      |
|a      |   |a      |
|a      |   |       |
=========   =========
=========   =========
| .     |   |.      |
| .     |   |.      | 
```

这一切都发生在应用了 HTMLEditorKit 的 JEditorPane 中，因此我没有您在浏览器中可能找到的任何友好功能。有没有办法让我的桌子填满剩余的高度？我在大多数地方都尝试过 dropp height:100% 但没有运气。

谢谢阅读

# symfony - 将 sonata_type_collection 用于一对多一关系的问题

> ID：12691345
> 
> 赞同：4
> 
> 时间：2012-10-02T13:35:09.543
> 
> 标签：symfony, doctrine-orm, one-to-many, sonata-admin

我有一个相当常见的用例，我正在尝试实现它，但在 Symfony Sonata Admin Bundle (ORM) 上遇到了一些问题。我的模型在 Facility 和 Sport 之间建立了关系，该关系基于三个实体类：Sport、Facility 和 SportsFacility。我按照示例[http://sonata-project.org/bundles/doctrine-orm-admin/master/doc/reference/form_field_definition.html#advanced-usage-one-to-many](http://sonata-project.org/bundles/doctrine-orm-admin/master/doc/reference/form_field_definition.html#advanced-usage-one-to-many)并在以下类中定义（相关部分只要）。

```
class Sport {
    /**
    * Bidirectional - Many facilies are related to one sport
    *
    * @ORM\OneToMany(targetEntity="SportsFacility", mappedBy="sport")
    */
    protected $facilities;
    public function getFacilities() {
        return $this->facilities;
    }

    public function setFacilities($facilities) {
        $this->facilities = $facilities;
        return $this;
    }
}

class Facility {
    /**
    * Bidirectional - Many sports are related to one facility
    *
    * @ORM\OneToMany(targetEntity="SportsFacility", mappedBy="facility")
    */
    protected $sports;
    public function getSports() {
        return $this->sports;
    }

    public function setSports($sportsFacilities) {
        $this->sports = $sportsFacilities;
        return $this;
    }

    public function addSports($sportsFacilities) {
        $this->sports = $sportsFacilities;
        return $this;
    }
}

class SportsFacility {
    /**
     * @var integer $sportsFacilityId
     *
     * @ORM\Column(name="sportsFacilityId", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    protected $sportsFacilityId;

    /**
    * Bidirectional - Many Sports are related to one Facility (OWNING SIDE)
    *
    * @ORM\ManyToOne(targetEntity="Sport", inversedBy="facilities"))
    * @ORM\JoinColumn(name="sportId", referencedColumnName="sportId"))

    */
    protected $sport;
    /**
    * Bidirectional - Many Facilities are related to one Sport (OWNING SIDE)
    *
    * @ORM\ManyToOne(targetEntity="Facility", inversedBy="sports"))
    * @ORM\JoinColumn(name="facilityId", referencedColumnName="facilityId"))
    */
    protected $facility;

    public function getSportsFacilityId() {
        return $this->sportsFacilityId;
    }

    public function setSportsFacilityId($sportsFacilityId) {
        $this->sportsFacilityId = $sportsFacilityId;
        return $this;
    }

    public function getSport() {
        return $this->sport;
    }

    public function setSport($sport) {
        $this->sport = $sport;
        return $this;
    }

    public function getFacility() {
        return $this->facility;
    }

    public function setFacility($facility) {
        $this->facility = $facility;
        return $this;
    }
} 
```

在我的 FacilityAdmin 课程中，我有：

```
protected function configureFormFields(FormMapper $formMapper)
{
    $formMapper
        ->add('name')
        ->with('Sports')
            ->add('sports', 'sonata_type_collection', 
                array('by_reference' => false),
                array(
                    'edit' => 'inline',
                    'inline' => 'table',
                ))
        ->end();
} 
```

当我尝试添加新关系时，出现以下错误：“vendor/sonata-project/admin-bundle/Sonata/第 88 行的 AdminBundle/Form/EventListener/ResizeFormListener.php"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T12:08:58.313

终于找到了我们的问题所在；在您的课堂设施中，您为奏鸣曲添加了缺失的方法，但它不应该做您认为应该做的事情（是的，是的）：

```
class Facility {
    ...
    /**
     * Alias for sonata
     */
    public function addSports($sportFacility) {
        return $this->addSport($sportFacility);
    }
} 
```

我认为是添加新实例到集合`addSport()`的默认学说生成方法。`SportsFacility`

这是由于奏鸣曲如何生成添加新实体的方法与学说的做法不同：

```
//file: Sonata/AdminBundle/Admin/AdminHelper.php
public function addNewInstance($object, FieldDescriptionInterface $fieldDescription) 
{
   ...
   $method = sprintf('add%s', $this->camelize($mapping['fieldName']));
   ...
} 
```

有人遇到[了同样的问题](https://github.com/sonata-project/SonataAdminBundle/issues/827#issuecomment-6507911)，但文档没有发展

# android - 如何在偏好更改时重新加载动态壁纸？

> ID：12691346
> 
> 赞同：1
> 
> 时间：2012-10-02T13:35:10.667
> 
> 标签：android, live, reload, wallpaper, preference

更改偏好后如何重新加载我的壁纸？一旦我们更改首选项，立方体样本就不会重新加载，而是传递新的首选项。简而言之，更改首选项后，我们如何才能拥有“正在加载动态壁纸..”屏幕？我可以在 onVsibilityChanged 中添加一些东西吗？是的，我们可以使用共享值并更改墙纸，但是如何重新加载整个内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-30T14:54:06.547

您可以将某些东西连接到 onVisibilityChanged 方法。每当您从首选项设置返回时，可见变量将设置为 true 并且事件将触发。

我猜你想用新的偏好重新创建壁纸。在这种情况下，您可以在可见性发生变化并且首选项发生变化时调用壁纸的 init 方法。

# git - GIT如何在没有提交的情况下重置

> ID：12691351
> 
> 赞同：1
> 
> 时间：2012-10-02T13:35:36.697
> 
> 标签：git

假设我使用以下命令创建了一个空的 GIT 存储库：

```
# git init 
```

然后我开始添加远程存储库：

```
# git remote add remote1 ........
# git remote add remote2 ........
# git remote add remote3 ........ 
```

并获取：

```
# git fetch --all 
```

最后，我将我需要的所有远程分支合并到我的本地仓库中：

```
# git merge remote1/branchX
# git merge remote2/branchY
# git merge remote3/branchZ 
```

现在，假设我必须在所有合并之前重置我的本地仓库；自然的解决方案似乎只是创建一个新的空存储库。但问题是：我的远程存储库的获取需要很长时间（几个小时），所以我想避免再次重新感染。

我无法执行“git reset”，因为我没有在所有合并之前提交。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:00:06.130

`git init && git commit --allow-empty -m 'Initial commit.'`一个不错的作弊方法是在设置存储库时做一个，这`HEAD`至少可以缓解不存在的症状。

但是由于您已经获取了所有遥控器，因此您不需要为了创建一个新的空/不相关的分支而删除存储库，如果这更多的是您正在寻找的：

```
git symbolic-ref HEAD refs/heads/new-branch 
```

然后，当您提交/合并任何内容时`HEAD`，git 将为您填写新分支。一旦你有另一个现有的分支，你就可以硬重置 master 或做任何其他你想玩弄它们的技巧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:42:49.690

我认为这个线程：[Checkout old commit and make it a new commit](https://stackoverflow.com/questions/3380805/checkout-old-commit-and-make-it-a-new-commit)提供了一些可能性。在合并之前签出以前的提交之一或重置到该点。如果发生多次提交，我将首先在合并之前查找 SHA 值并使用该值。

# c# - 将运算符传递给存储过程

> ID：12691353
> 
> 赞同：3
> 
> 时间：2012-10-02T13:35:43.583
> 
> 标签：c#, sql, sql-server

我有一个 ASP.NET MVC 3 应用程序，它允许用户创建自己的过滤器。之类`amount > 5 and amount <= 7`的，等等。用户可以选择金额值和运算符。

我的问题是如何将这些过滤器传递给检索数据的存储过程。存储过程已经非常复杂，这意味着传递了很多参数，这些参数被检查为空，所以我不能真正应用我在这里找到的答案：[T-SQL 存储过程 - 动态 AND/OR 运算符](https://stackoverflow.com/questions/8540149/t-sql-stored-procedure-dynamic-and-or-operator)

我还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:43:13.900

运算符不能参数化。由于您提到这是一个存储过程，唯一的选择是在SP内部编写T-SQL，并使用sp_executesql，即

```
//TODO : verify (whitelist) that @operator is in a known set of values...
// '=', '<>', '>', '<' etc - otherwise security risk
declare @sql varchar(4000) = 'select * from Foo where Bar '
          + @operator + ' @value'
exec sp_executesql @sql, N'@value int', @value 
```

这会即时构建查询 ( `@sql`)，但始终保持值 ( `@value`) 参数化，因此我们只需将运算符 ( `@operator`) 列入白名单。

只是为了显示值如何保持参数化，我们也可以使用：

```
//TODO : verify (whitelist) that @operator is in a known set of values...
// '=', '<>', '>', '<' etc - otherwise security risk
declare @sql varchar(4000) = 'select * from Foo where Bar '
          + @operator + ' @p'
exec sp_executesql @sql, N'@p int', @value 
```

这里，`@p`是**内部**sql`@value`中的参数名称，是*存储过程*中的参数名称；第三/第四/第五/等参数`sp_executesql`映射到*第二个*参数中声明的参数 to `sp_executesql`（在本例中，声明为`@p`）。

请注意，如果这不是存储过程，您可以在 C# 中执行查询构造步骤，再次将值保留为参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:44:21.670

我认为唯一的方法是使用动态 sql，例如[sq_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)。这允许您将 SQL 语句创建为字符串，然后执行它。但这可能意味着对现有存储过程的大量重写！

# python - 我有一个 Errno 13 Permission denied with subprocess in python

> ID：12691361
> 
> 赞同：5
> 
> 时间：2012-10-02T13:36:23.700
> 
> 标签：python, bash, error-handling, hadoop, apache-pig

问题所在的行是

```
ret=subprocess.call(shlex.split(cmd))

cmd = /usr/share/java -cp pig-hadoop-conf-Simpsons:lib/pig-0.8.1-cdh3u1-core.jar:lib/hadoop-core-0.20.2-cdh3u1.jar org.apache.pig.Main -param func=cat -param from =foo.txt -x mapreduce fsFunc.pig 
```

错误是。

```
File "./run_pig.py", line 157, in process
    ret=subprocess.call(shlex.split(cmd))
File "/usr/lib/python2.7/subprocess.py", line 493, in call
  return Popen(*popenargs, **kwargs).wait()
File "/usr/lib/python2.7/subprocess.py", line 679, in __init__
  errread, errwrite)
File "/usr/lib/python2.7/subprocess.py", line 1249, in _execute_child
  raise child_exception
OSError: [Errno 13] Permission denied 
```

让我知道是否需要更多信息。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T15:35:29.557

该错误表明`/usr/share/java`没有允许您执行它的权限，可能是因为它是一个目录，而不是可执行文件。

`java`在您的 Ubuntu 机器上找到可执行文件的位置（可能`/usr/bin/java`）并更改`/usr/share/`为指向正确的位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-29T13:25:49.867

只需键入`chmod -R 777 /your/project/`

它适用于我的...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:20:03.153

那是操作系统权限错误。这意味着您的用户无权写入该目录/文件。这与 Python 无关。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-06T17:00:43.417

您也可以尝试将 shell=True 设置为 subprocess.call() 中的第二个参数，这可能会起作用。

```
ret = subprocess.call(shlex.split(cmd), shell=True)

cmd = /usr/share/java -cp pig-hadoop-conf-Simpsons:lib/pig-0.8.1-cdh3u1-core.jar:lib/hadoop-core-0.20.2-cdh3u1.jar org.apache.pig.Main -param func=cat -param from =foo.txt -x mapreduce fsFunc.pig 
```

# javascript - 无法关闭 JS 弹窗

> ID：12691362
> 
> 赞同：0
> 
> 时间：2012-10-02T13:36:27.743
> 
> 标签：javascript, css, popup

我有一个创建弹出延迟 3000 并出现在我的网站中的脚本，问题是我无法删除它，这是我的脚本

**html**

```
 <div id="growl"></div> 
```

**css**

```
#growl {
position: absolute;
padding:5px;
bottom: 0;
right: 5px;
width: 320px;
z-index: 10;
}

.notice {
 position: relative;
 min-height: 30px;
 padding:5px;
 }

 .skin {
 position: absolute;
 background-color: #000000;
 bottom: 0;
 left: 0;
 opacity: 0.6;
 right: 0;
 top: 0;
 z-index: -1;
 -moz-border-radius: 5px; -webkit-border-radius: 5px;
 } 
```

**关闭按钮**

```
 .close {
 background: transparent url('../img/egrowl.png') 0 0 no-repeat;
 text-indent: -9999px;
 position: absolute;
 top: 2px;
 right: 2px;
  width: 26px;
 height: 26px;
 } 
```

**我的脚本**

```
 $(document).ready(function(){ 
```

**延误**

```
setTimeout(function() {

addNotice('<p>Do not Forget To Become A member </p><a href="subscribe.php">Subscribe</a>');

},3000); 
```

**关闭功能**

```
$('#growl')
.find('.close')
.on('click', function() {
    $(this)
        .closest('.notice')
        .animate({
            border: 'none',
            height: 0,
            marginBottom: 0,
            marginTop: '-6px',
            opacity: 0,
            paddingBottom: 0,
            paddingTop: 0,
            queue: false
        }, 2000, function() {
            $(this).remove();
        });
   });
      }); 
```

**设置**

```
 function addNotice(notice) {
$('<div class="notice"></div>')
    .append('<div class="skin"></div>')
    .append('<a href="#" class="close">close</a>')
    .append($('<div class="content"></div>').html(notice))
    .hide()
    .appendTo('#growl')
    .fadeIn(1000);
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:44:37.787

单击函数回调中的 this 不再引用调用对象，因此您需要将调用对象的 this 上下文绑定到该函数，或者将 this 更改为要关闭的元素的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:57:00.017

您的设置中还有更多错误。我创建了这个小提琴：http: [//jsfiddle.net/CyJRF/2/](http://jsfiddle.net/CyJRF/2/)

您正在将单击事件绑定到“.close”元素，但您在 $(document).ready() 处执行此操作，然后在“addNotice”中创建该元素。我已经移动了一些javascript ...

正如@Jordan 正确指出的那样，您需要更改 $(this)。我现在只是用`$("#growl .notice")`这个

# sql - 在未发生存储过程的情况下插入临时表

> ID：12691363
> 
> 赞同：1
> 
> 时间：2012-10-02T13:36:29.793
> 
> 标签：sql, sql-server, stored-procedures

我对此进行了一些研究，最接近的相关解决方案可能是这个...... [动态创建#temp表，然后用于插入数据](https://stackoverflow.com/questions/2542730/dynamically-creating-the-temp-table-and-then-used-to-insert-the-data)

不幸的是，我不确定它是否完全适用。因此，我的问题。当我执行以下存储过程时，我的临时表是空的。当然，如果我单独运行每个步骤来导入数据，它们就可以工作。我假设`EXEC`存储过程中存在问题。我有 2 个临时表，我正在尝试创建并插入它们并从中组装我的数据......提前谢谢你。

```
ALTER PROC [taxes_ext_sp]
AS
BEGIN
CREATE TABLE ##taxes (
        [Apply Date] date
        , [Journal Code] varchar(8)
        , [Journal Ctrl #] varchar(16)
        , [Company] varchar(8)
        , [Description] varchar(255)
        , [Invoice #] varchar(16)
        , [Credit] decimal(20,2)
        , [Debit] decimal(20,2)
        , [Balance] decimal(20,2));

CREATE TABLE ##company (
company_code varchar(32));

DECLARE @company_id Nvarchar(MAX)
        , @db_name varchar(32)
        , @sql Nvarchar(MAX);

SELECT @company_id =
company_code FROM ctrl.dbo.comp;

SELECT @db_name =
name FROM sys.databases 
JOIN ctrl.dbo.comp 
    ON sys.databases.name = ctrl.dbo.comp.db_name 
JOIN ##company 
    ON ##company.company_code = ctrl.dbo.comp.company_code;

SET @sql = 'INSERT INTO ##taxes
SELECT convert(varchar(12),dateadd(dd,(trx.date_applied - 639906),''1/1/1753''),101) --as [Date]
        , trx.journal_type --as [Journal Code]
        , trx.journal_ctrl_num --as [Journal Ctrl #]
        , '+@company_id+' --as Company
        , trx.journal_description --as [Description]
        , trxdet.document_1 --as [Invoice #]
        , bal.home_credit --as [Total Home Credit]
        , bal.home_debit --as [Total Home Debit]
        , bal.current_balance --as [Balance]
FROM '+@db_name+'.dbo.trx trx                       
LEFT OUTER JOIN '+@db_name+'.dbo.trxdet trxdet
    ON trx.journal_ctrl_num = trxdet.journal_ctrl_num
LEFT OUTER JOIN '+@db_name+'.dbo.bal bal
    ON trxdet.account_code = bal.account_code
WHERE trx.date_posted > 0
    AND trx.date_applied >= ''734503''
    AND trx.date_applied <= ''734775'')';

EXEC (@company_id);  **FORGOT TO ADD THIS.
EXEC (@sql);

SELECT * FROM ##taxes;  
--SELECT * FROM ##company

--IF EXISTS
--(
--SELECT *
--FROM tempdb.dbo.sysobjects
--WHERE ID = OBJECT_ID(N'tempdb..##taxes')
--)
--BEGIN
--DROP TABLE ##taxes
--END

--IF EXISTS
--(
--SELECT *
--FROM tempdb.dbo.sysobjects
--WHERE ID = OBJECT_ID(N'tempdb..##company')
--)
--BEGIN
--DROP TABLE ##company
--END

END; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:26:19.030

您创建##company，但不填写，然后尝试使用##company.company_code 加入它，因此@db_name 可以为NULL。@sql 变量很可能等于 NULL。如果您尝试连接 nvarchar 字段并且其中一个为 NULL，则结果将为 NULL

**编辑** 食谱[如何检查参数是否为空或空sql](https://stackoverflow.com/questions/9855331/how-to-check-if-a-parameter-is-null-or-empty-sql)

# python - python中标量和ndarray的错误与numpy

> ID：12691368
> 
> 赞同：-1
> 
> 时间：2012-10-02T13:36:38.477
> 
> 标签：python, numpy, multidimensional-array

我有一个小问题，但我不能找到一个简单的答案。我觉得问它很愚蠢。

如何将标量与 numpy.ndarray 相乘？

```
import fileinput,sys,re,csv,scipy,os,numpy,pylab
from collections import defaultdict
from matplotlib.pyplot import *
from StringIO import StringIO
import numpy as num
a = open("testt.txt", "r")
b=[ raw.strip().split() for raw in a]
c=np.array(b)
d=c.transpose()  
data=np.loadtxt("uu.txt",skiprows=1,dtype=None,delimiter='\t')
t1 = data[:,0]
t=(1/1000)*t1
s = data[:,9]
pylab.plot(t1, s)
pylab.xlabel('time (ms)')
pylab.ylabel('Zone height (mm)')
pylab.grid(True)
pylab.savefig('simple_plot')
pylab.show() 
```

错误在 t=(1/1000)*t1 行中，这给了我错误：TypeError: unsupported operand type(s) for *: 'int' and 'numpy.ndarray'。文本文件 uu.txt 是一个 60*60 的矩阵，第一行是标题。如果需要，我可以发布它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:43:32.840

这有点令人惊讶。如果`data`是 a `ndarray`，那么`t1=data[:,0]`也是 a `ndarray`，将它乘以 int 应该没有任何问题。

仍然：

*   您可以检查的类型`t1`以及它的`.shape`.
*   您可以强制`t1`以防`ndarray`万一：`t1=np.asarray(data[:,0])`
*   我很确定你不想计算`(1/1000)`，而是`(1./1000)`：`(1/1000)`是`0`凭借整数除法......

# mysql - 如何从 MySQL 数据库中删除两个链接的行？

> ID：12691376
> 
> 赞同：0
> 
> 时间：2012-10-02T13:37:21.920
> 
> 标签：mysql, delphi, foreign-keys

有人可以告诉我如何删除两个链接的行吗？

我使用 Delphi 2007 和 MySQL。

我有一个包含两个表的数据库：

```
CREATE TABLE `Picture`.`Picture` (
  `ID` INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  `IMG` LONGBLOB,
  PRIMARY KEY (`ID`)
)
ENGINE = InnoDB;

CREATE TABLE `contacts` (
  `ID` int(10) unsigned NOT NULL auto_increment,
  `FirstName` varchar(45) NOT NULL,
  `LastName` varchar(45) NOT NULL,
  `Phone` varchar(45) default NULL,
  `PICID` int(10) unsigned default NULL,
  PRIMARY KEY  (`ID`),
  KEY `FK_contacts_1` (`PICID`),
  CONSTRAINT `FK_contacts_1` FOREIGN KEY (`PICID`) REFERENCES `picture` (`ID`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

在我的 Delphi 应用程序中，我有`Delete`按钮。当我在我的 DBGrid 上找到一些联系人并按下`Delete`按钮时，我只能从表`contacts`中删除联系人，我还想删除联系人图片。

我想从表中删除行和表中`contacts`的行`Picture`。表用`Picture`链接到表。`contacts``foreign key`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:55:23.223

使用 FK `ON DELETE CASCADE`- [http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)

当您从主表中删除一行时，`Picture`SQL 引擎级联到详细表并在那里删除。

# html - Html 表格在某些浏览器中看起来崩溃

> ID：12691378
> 
> 赞同：0
> 
> 时间：2012-10-02T13:37:27.520
> 
> 标签：html, html-table

我对表格单元格的动态高度有疑问。我已将其设置为，`rowspan=2`因此它的高度应为 2 行。

我的代码：

```
<table cellspacing="0" cellpadding="0" style="width: 640px;" align="center">
<tr>
    <td colspan="3"><img src="bg-top.png" /></td>
    </tr>   
<tr style="height: 669px;">
    <td><img src="bg-left.png" style="display: block"/></td>
    <td valign="top" rowspan=2 >
     lorem ipsu
    </td>
    <td><img align="right" src="bg-right.png" style="display: block"/></td>
</tr>
<tr>
<td background="cont.png"></td>
<td background="cont.png"></td>
</tr>
</table> 
```

我正在尝试使图像看起来像文本周围的边框，并且如果文本比可以放入 700px 的内容长，则应该重复`cont.png`。它在 Opera 和 Chrome 中看起来不错，但在 IE 和 Firefox 中它不起作用。

截图：

*   在 mozzila：[http ://shrani.si/f/1h/12j/3c72q2gv/notworking.png](http://shrani.si/f/1h/12j/3c72q2gv/notworking.png)
*   在铬：[http ://shrani.si/f/Q/n/3w7G0jOn/working.png](http://shrani.si/f/Q/n/3w7G0jOn/working.png)

有什么想法我可能会改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:03:22.757

我会将其转换为使用 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T07:16:22.770

我有它的工作！你只使用了一行并为其设置了背景图片，然后将我的左右设置在它的顶部，并使用 valing=top 设置它。现在它可以在任何地方工作，除了前景：S

# ruby-on-rails - HTML解析：如何在文档中找到被大多数文本包围的图像？

> ID：12691380
> 
> 赞同：1
> 
> 时间：2012-10-02T13:37:40.913
> 
> 标签：ruby-on-rails, xpath, html-parsing, nokogiri, mechanize

我正在编写一个新闻抓取工具，它必须确定主图像（缩略图），给定新闻文章的 HTML 文档。

换句话说，这基本上是相同的挑战：[Facebook 如何确定在发布链接时将哪些图像显示为缩略图？](http://www.quora.com/Facebook-1/How-does-Facebook-determine-which-images-to-show-as-thumbnails-when-posting-a-link)

有许多有用的技术（更喜欢更高的尺寸，更小的比例等），但有时在解析网页后，程序会以类似大小的图像列表结束（其中一半是广告），它只需要选择一个，这说明了文件中描述的故事。

从视觉上看，当你打开[一篇随机的新闻文章](http://www.nytimes.com/2012/10/07/magazine/mitt-romney.html?hp&_r=0)时，主图片几乎总是在顶部并被文字包围。如何实现一个 HTML 解析器（例如，使用 xpath / nokogiri）来找到这样的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T00:42:30.527

除非您预先了解站点的布局，否则没有从代码中确定这一点的好方法。

HTML 和 DHTML 允许您使用 CSS 或 JavaScript 在整个页面上定位元素，并且可以在页面加载后执行此操作，这是 Nokogiri 无法访问的。

在页面完全加载后，您*可能*可以使用其中一个 Watir API 来完成此操作，但是，您确实需要再次了解站点使用的布局。广告可以在 HTML 流中的任何位置并在加载后在页面中移动，并且可以动态加载真实内容，并且可以动态更改其位置和大小。因此，您不能指望内容在 HTML 中的位置是重要的，也不能指望内容在 HTML 中。JavaScript 或 CSS 不是你的朋友。

当我为网站分析编写蜘蛛和爬虫时，我不得不处理同样的问题。因为我知道要查看哪些站点，所以我会进行快速预扫描并找到我的地标标签，然后为它们编写一些 CSS 或 XPath 访问器。将带有 URL 的内容保存在数据库中，您可以快速浏览页面，准确抓取您想要的内容。

如果不了解页面布局，您的代码完全受页面布局人员的摆布，以及任何修改页面元素位置的东西。

基本上，您需要在代码中实现大脑内部的湿件，以及以图形方式呈现页面的能力，以便您的代码可以对其进行分析。当您作为用户在浏览器中查看页面时，您正在使用视觉和上下文线索来定位重要内容。所有这些上下文信息都是缺少的内容以及您需要编写的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:00:31.007

如果我理解正确，您的问题不在于解析页面，而在于实现成功决定选择哪个图像的逻辑。

我认为第一步是决定哪些图片是新闻图片，哪些不是（例如广告）。

您可以通过阅读图像 URL（图像标签的 src 属性）并检查主机与文章主机的中间部分（在您的示例中为“nytimes”）应该是相同的。

第二步是决定其中哪一个是最重要的。为此，您可以在文章中使用图像大小、页面位置等。对于第 2 步，您必须尝试对大多数网站最有效的方法。调整你的算法，直到它为大多数新闻网站产生最好的结果。

希望这可以帮助

# http - HTTP 413 请求实体太大

> ID：12691381
> 
> 赞同：2
> 
> 时间：2012-10-02T13:37:41.783
> 
> 标签：http, drupal, apache2, php, httpd.conf

我目前无法在 drupal 7 (7.15) 的自定义文件字段上使用 Drupal FileField Source（远程 url 选项）发布非常大的文件。该文件已成功上传到 tmp 目录，但在尝试发布时失败。文件大小为**870Mb**（一个**510mb**的文件已成功发布。）。

**我在access_log**中收到以下错误：

`83.000.15.200 - - [02/Oct/2012:12:30:14 +0000] "POST /file/ajax/field_video_source/und/0/form-i6gTPc5LlZsQxKpgO43eaLGjh7dgWqHjQ6TPZD9SRmY HTTP/1.1" 500 413`

我假设我将此错误正确解释为**413 Request Entity Too Large**

我已经使用以下设置配置了 php.ini：

`post_max_size = 1800M`
`max_execution_time = 3600 (i know that's overkill)`
`memory_limit = 1750M`
`max_input_time = -1 (unlimited)`

此外，我尝试`LimitRequestBody`使用以下方法在 php.conf 中将值设置为 0：

`<Files *.php>`
`SetOutputFilter PHP`
`SetInputFilter PHP`
`LimitRequestBody 0`
`</Files>`

这似乎没有帮助。

该服务器运行 Centos 6.3、Apache/2.2.15、PHP 5.3.3，具有 2GB 内存和 40GB 磁盘。

我不敢相信它应该在那个大小的文件（~800mb）和那些服务器设置上苦苦挣扎？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T19:58:04.603

如果可以，您可以访问 http.conf 吗？您可以试试这个。

这一直是我有时上传超过 500mb 的问题。尽管我强烈建议您尝试使用
设置 SecRequestBodyAccess “On” 使其工作。

我必须编辑 Apache 配置文件 (http.conf) 并更改

```
SecRequestBodyAccess On 
```

至

```
SecRequestBodyAccess Off 
```

编辑：

如果我没记错的话，您可以尝试以下方法。

放

```
SecRequestBodyNoFilesLimit , the maximum value is 1073741824 (1Gb) 
```

# css - 在定义宽度的跨度中换行？

> ID：12691387
> 
> 赞同：8
> 
> 时间：2012-10-02T13:38:05.643
> 
> 标签：css, line-breaks

一旦达到跨度的宽度，如何在跨度中断开一条线？我尝试了最大宽度，但这不起作用，跨度总是与文本一样长。

想法？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T13:41:10.860

默认情况下，`<span>`元素是“内联”的，并且总是会增长到其内容的大小。您需要明确声明`<span>`为`display: block;`或`display: inline-block;`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-11-26T12:31:51.067

```
span { 
    display:block;
    width:150px;
    word-wrap:break-word;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-02T13:42:08.833

`span`是一个**内联**元素，意思是，它被包裹在文本（或其他内联元素）周围。它不受`width`或`height`。

你想要一个**块**元素，比如`div`，或者可能是一个**inline-block**元素（通过设置元素来实现`display: inline-block`）。

# c# - NuGet 包 Async CTP（版本 3，非官方）在 await 和 async 上的编译错误

> ID：12691389
> 
> 赞同：2
> 
> 时间：2012-10-02T13:38:18.960
> 
> 标签：c#, visual-studio-2010, nuget, async-ctp

我正在使用 VS2010 并使用 NuGet 安装[Async CTP (Version 3, Unofficial)](https://nuget.org/packages/AsyncCTP)。然后我复制了一些示例代码：

```
using System.Threading.Tasks;

namespace ConsoleApplication5AsyncCtp
{
    internal class Program
    {
        private static void Main(string[] args)
        {
        }

        public async Task<int> GetValue()
        {
            await TaskEx.Delay(100);
            return 13; // Return type is "int", not "Task<int>"
        }
    }
} 
```

ReSharper 在使用`async`and时没有给出任何错误`await`（在我安装软件包之前它确实显示了错误），所以它看起来很有希望。但是当我构建项目时，我得到了一些我没想到的语法错误。

```
Program.cs(15,32): error CS1003: Syntax error, '(' expected
Program.cs(15,40): error CS1001: Identifier expected
Program.cs(17,32): error CS1031: Type expected
Program.cs(21,1): error CS1022: Type or namespace definition, or end-of-file expected 
```

通过 NuGet 添加 Async CTP（版本 3，非官方）是否不足以实际编译代码？

*我必须承认我不知道我在这里做什么，只是想让一些演示代码工作。演示解决方案通过 NuGet 自动安装 Async CTP，似乎表明我无需再做任何事情。*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:41:12.423

从[NuGet 页面](https://nuget.org/packages/AsyncCTP)：

> Visual Studio Async CTP Samples 文件夹中的 AsyncCtpLibrary.dll

换句话说，它*似乎*只是支持库，而不是编译器。

我建议您只安装 .NET 4.5（足以从命令行玩转）或 Visual Studio 2012 的某些版本。CTP 中有各种错误 - 使用完整版本要好得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T08:08:04.437

我认为你不能只使用 NuGet 的 AsyncCTP 包来开始开发 Async/Await 项目 - 你必须使用[常规安装程序](http://www.microsoft.com/en-us/download/details.aspx?id=9983)安装整个 AsyncCTP 。那是因为 AsyncCTP 需要更新的编译器，而不仅仅是这个库。

此外，如上所述，如果可能，您应该使用 Visual Studio 2012 和 .NET 4.5 或 Async Targeting Pack。如果您正在开发 Windows Phone 7.1 项目，则需要等到用于 VS2012 的公共 Windows Phone SDK 与更新的用于 Windows Phone 7.5 的 Async Targeting Pack 一起发布。

# ruby-on-rails-3 - 使用rails资产管道时如何从SASS获取错误日志？

> ID：12691392
> 
> 赞同：0
> 
> 时间：2012-10-02T13:38:22.227
> 
> 标签：ruby-on-rails-3, sass, asset-pipeline, sprockets

我有 3 个使用 gem jquery-ui-themes 的 Rails 3.2 应用程序。jquery-ui-themes 使用 scss 作为图像路径助手。

它在我的两个应用程序上运行良好，但第三个似乎没有在开发或生产模式下编译 scss 文件。

IOW，它将这个发送到浏览器

```
 background: #fcfdfd url(image-path("jquery-ui/redmond/ui-bg_inset-hard_100_fcfdfd_1x100.png")) 50% bottom repeat-x; 
```

而两个工作应用程序正确发送

```
 background: #fcfdfd url("/assets/jquery-ui/redmond/ui-bg_inset-hard_100_fcfdfd_1x100.png") 50% bottom repeat-x; 
```

我花了很多时间试图使损坏的应用程序尽可能与两个工作应用程序相似，但它仍然失败。

我的理论是，SASS 被 redmond.css.scss 之前的东西窒息。如果是这样，则应该在某处记录错误。我在哪里可以找到 SASS 的错误输出？

### 更新：

我在 redmond.css.scss 中引入了一个故意的错误，我得到了一个正确的错误转储。所以我知道我正在正确清除缓存并实际运行 sass。现在要弄清楚为什么它忽略了图像路径指令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:54:58.790

如果您正在寻找标题中问题的答案，答案是“与您遇到任何其他错误的方式相同：它们在您的日志中”。要获得完整的回溯，只需将浏览器指向资产：即`http://localhost:3000/assets/jquery-ui/redmond.css`在我的情况下。

确保清除所有缓存： `rm -rf .sass-cache/ && rm -rf public/assets && rake tmp:cache:clear`以及在浏览器中使用 ctrl-shift-r。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:56:02.613

如果您正在寻找我真正问题的答案（图像路径不起作用），请确保您的 application.rb 中有正确的 Bundler.require 行。旧的 Rails 3.0 不起作用。

代替：

```
# If you have a Gemfile, require the gems listed there, including any gems
# you've limited to :test, :development, or :production.
Bundler.require(:default, Rails.env) if defined?(Bundler) 
```

和：

```
if defined?(Bundler)
  # If you precompile assets before deploying to production, use this line
  Bundler.require(*Rails.groups(:assets => %w(development test)))
  # If you want your assets lazily compiled in production, use this line
  # Bundler.require(:default, :assets, Rails.env)
end 
```

# ruby-on-rails - Rails - 呈现复杂的数据视图

> ID：12691393
> 
> 赞同：1
> 
> 时间：2012-10-02T13:38:25.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3

这应该很简单，但我已经做了一天了，看不到明确的答案。

我有三个基本模型：用户、评估和工作。用户从事工作，工作所有者评估用户。一个用户可以有许多不同的工作。每个工作都会多次评估其相关用户（在工作中，每个相关用户将有相同的评估 - 当然有不同的分数。）

因此，简单地说，我想以表格形式（有点像 Excel 工作簿）呈现数据，评估名称沿 x 轴，用户名沿 y 轴。

所以，它看起来像这样：

```
 Evaluation 1  |  Evaluation 2  |  Evaluation 3
       _______________________________________________________
User 1   Good              Poor            Outstanding
User 2   Poor              Good            Good 
```

我可以轻松地在 x 或 y 上显示标签，但不能同时显示两者。

Q1) 每个工作/用户评估都是它自己的数据库记录。关于如何在 x 和 y 轴上构建标签的任何建议？

Q2) 我如何确保数据（例如，用户 2 评估 3）被正确分类（绘制）？而且，如果新用户（例如，用户 3）加入工作较晚并且没有评估 1 或评估 2 怎么办...

欢迎任何和所有建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:46:23.567

一种方法是创建一个哈希数组，每个哈希包含用户评分和所有可用评估的数组，例如

```
Evaluation.where(:job_id => 1)order('title').map{|e| e.title}.uniq 
```

这将为您提供类似于 all_evaluations 的内容：

```
all_evaluations = ['eval1', 'eval2', 'eval3', 'eval4'] 
```

用户评估哈希看起来像这样：

```
user_evaluations = {"UserA"=>{:eval1=>1, :eval3=>3}}, {"UserB"=>{:eval1=>1, :eval=>3}} 
```

`all_evaluations`将用于标题行标签和提取每个用户记录的评估：

```
<tr>
<% all_evaluations.each do |eval_header| %>
  <td><%= eval_header %></td>
<% end %>
</tr>

<% user_evaluations.each do |user| %>
  <tr>
    <td><%= user.keys %></td>
    <% all_evaluations.each do |eval| %>
      <td><%= user.values.first[eval.to_sym] %></td>
    <% end %>
  </tr>
end 
```

这里可能有一些错误/更改，但它应该在原则上起作用。

# c - 在 C 运行时完全删除函数调用

> ID：12691394
> 
> 赞同：1
> 
> 时间：2012-10-02T13:38:28.277
> 
> 标签：c, linux

是否可以在运行时从 C 代码中完全删除函数调用，并在需要时将其插入回来。

我不确定是否可以在运行时修改 ELF，以免在不使用函数的情况下浪费 cpu 周期。

我不想在函数调用之前进行“if”检查以避免调用函数。

例如，如果全局标志 g_flg=1 那么 func1 应该如下所示

```
void func1(int x)
{
 /* some processing */

 func2(y);

 /* some processing */

} 
```

如果全局 g_flag=0 则 func1 应如下所示

```
void func1(int x)
{
 /* some processing */

  /* some processing */

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:50:05.497

不要优化不需要的东西。您是否尝试过评估您的绩效的潜在改进？

尝试将 g_flg 设置为 1 并执行以下操作：

```
if (g_flg == 1) {func2(y);} 
```

然后尝试执行这个：

```
func2(y); 
```

都是 100 万次（或者你可以在合理的时间内运行它的任何次数）。我很确定您会注意到两者之间几乎没有区别。

另外，除此之外，我认为您想要做的事情是不可能的，因为 ELF 是二进制（编译）格式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:49:51.843

你可能会做的事情是这样的：

```
struct Something;
typedef struct Something Something;

int myFunction(Something * me, int i)
{
    // do a bunch of stuff
    return 42; // obviously the answer
}

int myFunctionDoNothing(Something * dummy1, int dummy2)
{
    return 0;
}

int (*function)(Something *, int) = myFunctionDoNothing;

// snip to actual use of function

int i;

function = myFunctionDoNothing;
for (i = 0; i < 100000; ++i) function(NULL, 5 * i); // does nothing

function = myFunction;
for (i = 0; i < 100000; ++i) function(NULL, 5 * i); // does something 
```

# 警告

这可能是**过早的优化**。根据您的编译器如何处理它以及您的 cpu 如何处理分支，您实际上可能会以这种方式失去性能，而不是天真的方式（用标志将其停止在函数中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T18:44:17.493

在大多数桌面和服务器架构上，分支比间接调用更快，因为它们进行分支预测和/或推测执行。我从未听说过间接调用比单个分支*更快的架构。*（对于`switch()`语句来说，跳转表有多个分支，因此完全是另一回事。）

考虑一下我放在一起的以下微基准。`test.c`：

```
/* test.c */

volatile long test_calls = 0L;
volatile long test_sum = 0L;

void test(long counter)
{
    test_calls++;
    test_sum += counter;
} 
```

`work.c`：

```
/* work.c */

void test(long counter);

/* Work function, to be measured */
void test_work(long counter, int flag)
{
    if (flag)
        test(counter);
}

/* Dummy function, to measure call overhead */
void test_none(long counter __attribute__((unused)), int flag __attribute__((unused)) )
{
    return;
} 
```

和`harness.c`：

```
#define  _POSIX_C_SOURCE 200809L
#include <unistd.h>
#include <stdlib.h>
#include <time.h>
#include <stdint.h>
#include <string.h>
#include <stdio.h>

/* From test.c */
extern volatile long test_calls;
extern volatile long test_sum;

/* Dummy function, to measure call overhead */
void test_none(long counter, int flag);

/* Work function, to be measured */
void test_work(long counter, int flag);

/* Timing harness -- GCC x86; modify for other architectures */
struct timing {
    struct timespec  wall_start;
    struct timespec  wall_stop;
    uint64_t         cpu_start;
    uint64_t         cpu_stop;
};

static inline void start_timing(struct timing *const mark)
{
    clock_gettime(CLOCK_REALTIME, &(mark->wall_start));
    mark->cpu_start = __builtin_ia32_rdtsc();
}

static inline void stop_timing(struct timing *const mark)
{
    mark->cpu_stop = __builtin_ia32_rdtsc();
    clock_gettime(CLOCK_REALTIME, &(mark->wall_stop));
}

static inline double cpu_timing(const struct timing *const mark)
{
    return (double)(mark->cpu_stop - mark->cpu_start); /* Cycles */
}

static inline double wall_timing(const struct timing *const mark)
{
    return (double)(mark->wall_stop.tv_sec - mark->wall_start.tv_sec)
         + (double)(mark->wall_stop.tv_nsec - mark->wall_start.tv_nsec) / 1000000000.0;
}

static int cmpdouble(const void *aptr, const void *bptr)
{
    const double a = *(const double *)aptr;
    const double b = *(const double *)bptr;

    if (a < b)
        return -1;
    else
    if (a > b)
        return +1;
    else
        return  0;
}

void report(double *const wall, double *const cpu, const size_t count)
{
    printf("\tInitial call: %.0f cpu cycles, %.9f seconds real time\n", cpu[0], wall[0]);

    qsort(wall, count, sizeof (double), cmpdouble);
    qsort(cpu, count, sizeof (double), cmpdouble);

    printf("\tMinimum:      %.0f cpu cycles, %.9f seconds real time\n", cpu[0], wall[0]);
    printf("\t5%% less than  %.0f cpu cycles, %.9f seconds real time\n", cpu[count/20], wall[count/20]);
    printf("\t25%% less than %.0f cpu cycles, %.9f seconds real time\n", cpu[count/4], wall[count/4]);
    printf("\tMedian:       %.0f cpu cycles, %.9f seconds real time\n", cpu[count/2], wall[count/2]);
    printf("\t75%% less than %.0f cpu cycles, %.9f seconds real time\n", cpu[count-count/4-1], wall[count-count/4-1]);
    printf("\t95%% less than %.0f cpu cycles, %.9f seconds real time\n", cpu[count-count/20-1], wall[count-count/20-1]);
    printf("\tMaximum:      %.0f cpu cycles, %.9f seconds real time\n", cpu[count-1], wall[count-1]);
}

int main(int argc, char *argv[])
{
    struct timing    measurement;
    double      *wall_seconds = NULL;
    double      *cpu_cycles = NULL;
    unsigned long    count = 0UL;
    unsigned long    i;
    int      flag;
    char         dummy;

    if (argc != 3 || !strcmp(argv[1], "-h") || !strcmp(argv[1], "--help")) {
        fprintf(stderr, "\n");
        fprintf(stderr, "Usage: %s COUNT FLAG\n", argv[0]);
        fprintf(stderr, "\n");
        return 1;
    }

    if (sscanf(argv[1], " %lu %c", &count, &dummy) != 1) {
        fprintf(stderr, "%s: Invalid COUNT.\n", argv[1]);
        return 1;
    }
    if (count < 1UL) {
        fprintf(stderr, "%s: COUNT is too small.\n", argv[1]);
        return 1;
    }
    if (!(unsigned long)(count + 1UL)) {
        fprintf(stderr, "%s: COUNT is too large.\n", argv[1]);
        return 1;
    }

    if (sscanf(argv[2], " %d %c", &flag, &dummy) != 1) {
        fprintf(stderr, "%s: Invalid FLAG.\n", argv[2]);
        return 1;
    }

    wall_seconds = malloc(sizeof (double) * (size_t)count);
    cpu_cycles = malloc(sizeof (double) * (size_t)count);
    if (!wall_seconds || !cpu_cycles) {
        free(cpu_cycles);
        free(wall_seconds);
        fprintf(stderr, "Cannot allocate enough memory. Try smaller COUNT.\n");
        return 1;
    }

    printf("Call and measurement overhead:\n");
    fflush(stdout);
    for (i = 0UL; i < count; i++) {

        start_timing(&measurement);
        test_none(i, flag);
        stop_timing(&measurement);

        wall_seconds[i] = wall_timing(&measurement);
        cpu_cycles[i] = cpu_timing(&measurement);
    }
    report(wall_seconds, cpu_cycles, (size_t)count);

    printf("\n");
    printf("Measuring FLAG==0 calls: ");
    fflush(stdout);
    test_calls = 0L;
    test_sum = 0L;
    for (i = 0UL; i < count; i++) {

        start_timing(&measurement);
        test_work(i, 0);
        stop_timing(&measurement);

        wall_seconds[i] = wall_timing(&measurement);
        cpu_cycles[i] = cpu_timing(&measurement);
    }
    printf("%ld calls, sum %ld.\n", test_calls, test_sum);
    report(wall_seconds, cpu_cycles, (size_t)count);

    printf("\n");
    printf("Measuring FLAG==%d calls:", flag);
    fflush(stdout);
    test_calls = 0L;
    test_sum = 0L;
    for (i = 0UL; i < count; i++) {

        start_timing(&measurement);
        test_work(i, flag);
        stop_timing(&measurement);

        wall_seconds[i] = wall_timing(&measurement);
        cpu_cycles[i] = cpu_timing(&measurement);
    }
    printf("%ld calls, sum %ld.\n", test_calls, test_sum);
    report(wall_seconds, cpu_cycles, (size_t)count);

    printf("\n");
    printf("Measuring alternating FLAG calls: ");
    fflush(stdout);
    test_calls = 0L;
    test_sum = 0L;
    for (i = 0UL; i < count; i++) {

        start_timing(&measurement);
        test_work(i, i & 1);
        stop_timing(&measurement);

        wall_seconds[i] = wall_timing(&measurement);
        cpu_cycles[i] = cpu_timing(&measurement);
    }
    printf("%ld calls, sum %ld.\n", test_calls, test_sum);
    report(wall_seconds, cpu_cycles, (size_t)count);

    printf("\n");
    free(cpu_cycles);
    free(wall_seconds);
    return 0;
} 
```

将这三个文件放在一个空目录中，然后编译构建`./call-test`：

```
rm -f *.o
gcc -W -Wall -O3 -fomit-frame-pointer -c harness.c
gcc -W -Wall -O3 -fomit-frame-pointer -c work.c
gcc -W -Wall -O3 -fomit-frame-pointer -c test.c
gcc harness.o work.o test.o -lrt -o call-test 
```

在 AMD Athlon II X4 640 上，使用 gcc-4.6.3 (Xubuntu 10.04)，运行

```
./call-test 1000000 1 
```

告诉我，单独测试的开销仅为 2 个时钟周期（< 1ns）（未采用分支），而调用第二个函数时，开销仅为 4 个时钟周期（仅超过 1 纳秒），该函数增加`test_calls`并将计数器添加到`test_sum`.

省略所有优化时（编译时使用`-O0`和省略`-fomit-frame-pointer`），单独测试大约需要 3 个时钟周期（如果不采用分支，则为 3 个周期），如果采用分支并完成更新两个额外变量的工作，则大约需要 9 个周期.

（两个额外的变量让您很容易看到线束确实做了它应该做的所有事情；它们只是一个额外的检查。我想在第二个函数中做一些工作，这样时间差异会更容易发现。 )

上述解释只对代码已经缓存的情况有效；即最近运行。如果代码很少运行，它就不会在缓存中。但是，测试开销的影响就更小了。缓存效果——例如，如果“附近”代码已经运行（你可以在调用开销测量中看到这一点，其他测试函数代码也倾向于被缓存！）——无论如何都要大得多。（虽然测试工具确实单独产生了初始调用结果，但不要太相信它，因为它不会尝试以任何方式清除任何缓存。）

我的结论是添加

```
if (flag)
    debug_function_call(); 
```

任何普通代码都很好：开销几乎可以忽略不计；实际上无关紧要。与往常一样，请考虑整体算法。算法中的任何改进都会产生比担心编译器生成的代码更大的回报。

（由于我一次编写了上面的测试代码，因此其中可能存在一些错误和/或脑残。检查，如果发现任何问题，请在下面告诉我，以便我修复代码。）

# sql-server-2008 - 如何检查 sql server clr 的版本号？

> ID：12691396
> 
> 赞同：0
> 
> 时间：2012-10-02T13:38:42.843
> 
> 标签：sql-server-2008, sqlclr

检查/版本化 sql server clr 的最佳方法是什么？我目前正在创建一个返回版本号（我在发布之前设置）的 SqlFunction。这允许我查询版本，例如

```
select mySchema.GetClrAppVersion 
```

任何想法或想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:59:46.553

组装属性（）

参见：http: [//msdn.microsoft.com/en-us/library/ms188750.aspx](http://msdn.microsoft.com/en-us/library/ms188750.aspx)

# vim - Vim 查找和替换。我该怎么做？

> ID：12691397
> 
> 赞同：4
> 
> 时间：2012-10-02T13:38:51.987
> 
> 标签：vim, replace

我有一个 XML 文件，我想对其进行一些更改。例如，我想在 Vim 中打开文件并运行查找并替换`memory="..."`属性的所有实例，`memory="24G"`但前提是元素来自`name="node-0..."`. 这是一个例子：

```
process name="node-0-3" numaNode="3" memory="14G" logConfig="logback-shards.xml"
process name="node-0-4" numaNode="4" memory="34G" logConfig="logback-shards.xml"
process name="node-0-5" numaNode="5" memory="44G" logConfig="logback-shards.xml" 
```

用。。。来代替

```
process name="node-0-3" numaNode="3" memory="24G" logConfig="logback-shards.xml"
process name="node-0-4" numaNode="4" memory="24G" logConfig="logback-shards.xml"
process name="node-0-5" numaNode="5" memory="24G" logConfig="logback-shards.xml" 
```

我怎样才能在 Vim 中做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T13:58:07.673

```
:g/node-0/s/memory="\zs\d\{2\}\u\ze"/24G 
```

一步步：

*   `:g/node-0`

    使用`:global`命令查找包含的所有行`node-0`

*   `s/memory="\zs\d\{2\}\u\ze"/24G`

    1.  寻找`memory="`

    2.  通过在此处开始比赛，将其排除在实际比赛之外`\zs`

    3.  匹配两个数字后跟一个大写字母`\d\{2\}\u`

    4.  真正的比赛在这里结束`\ze`

    5.  省略结束双引号。

    6.  将实际匹配替换为`24G`

（使用更准确的模式进行编辑以适应提问者的*真实*用例）

***编辑***

使用 Ingo 的评论：

```
:g/node-0/s/memory="\zs[^"]*\ze"/24G 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:02:16.920

`sed`如果您不想每次都打开 vim，则可以使用单行：

```
sed -i '/node-0/s/memory=".\{3\}/memory="24G"/' foo.txt 
```

或者你可以在 vim 内部使用相同的命令：

```
:%!sed '/node-0/s/memory=".\{3\}/memory="24G"/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T16:20:05.387

如果所有行都具有相同的格式，你可以试试这个：

`f``1` // 在第一行到达“14G”

`Ctrl`+ `v`// 启动可视块模式

`2``j` // 选择 [1]4G, [3]4G, [4]4G

`r``2` // 替换为 2

# java - 用于评估 Java 对象上的逻辑表达式的库

> ID：12691398
> 
> 赞同：1
> 
> 时间：2012-10-02T13:38:53.887
> 
> 标签：java, expression, evaluate

假设我有以下课程：

```
class Person {
    int age;
    String city;
    Collection<Person> friends;
    Person spouse;
} 
```

我需要一个库，它可以让我评估给定 Person 对象上的逻辑表达式是否为真。表达式看起来像这样：

```
((age>25 OR spouse.age>27) AND city=="New-York" AND size(friends)>100) 
```

所以，要求是：

1.  能够使用基本的逻辑运算符
2.  访问给定对象的属性
3.  访问内部对象的属性
4.  使用简单的数学\类似 sql 的函数，例如 size、max、sum

建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-03T10:38:02.230

好的，我想我找到了我想要的，这是 assylias 答案的变体，但我更喜欢它，因为它更标准化（不想专门依赖 Javascript 表达式，或者根本不想运行 Javascript）。

显然有一个[统一的表达式语言](http://en.wikipedia.org/wiki/Unified_Expression_Language)来评估表达式，它最初是为 JSP 设计的，但也可以用于其他东西。有几种解析器实现，我可能会使用[Spring EL](http://static.springsource.org/spring/docs/3.0.x/reference/expressions.html)或[JUEL](http://juel.sourceforge.net/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T13:43:36.157

您可以使用[ScriptEngine](http://docs.oracle.com/javase/7/docs/api/javax/script/ScriptEngine.html) + 反射：

*   访问对象中的所有[字段](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Field.html)并创建具有这些值的变量
*   评估表达式

这是一个人为的例子，它输出：

```
age = 35
city = "London"
age > 32 && city == "London" => true
age > 32 && city == "Paris" => false
age < 32 && city == "London" => false 
```

如果您想处理非原始类型（例如集合），它可能会变得非常混乱。

```
public class Test1 {

    public static void main(String[] args) throws Exception{
        Person p = new Person();
        p.age = 35;
        p.city = "London";

        ScriptEngineManager factory = new ScriptEngineManager();
        ScriptEngine engine = factory.getEngineByName("JavaScript");

        Class<Person> c = Person.class;
        for (Field f : c.getDeclaredFields()) {
            Object o = f.get(p);
            String assignement = null;
            if (o instanceof String) {
                assignement = f.getName() + " = \"" + String.valueOf(o) + "\"";
            } else {
                assignement = f.getName() + " = " + String.valueOf(o);
            }
            engine.eval(assignement);
            System.out.println(assignement);
        }

        String condition = "age > 32 && city == \"London\"";
        System.out.println(condition + " => " + engine.eval(condition));

        condition = "age > 32 && city == \"Paris\"";
        System.out.println(condition + " => " + engine.eval(condition));

        condition = "age < 32 && city == \"London\"";
        System.out.println(condition + " => " + engine.eval(condition));
    }

    public static class Person {

        int age;
        String city;
    }
} 
```

# android - Android没有根据屏幕尺寸使用正确的布局

> ID：12691401
> 
> 赞同：0
> 
> 时间：2012-10-02T13:38:54.853
> 
> 标签：android, layout, screen

所以我有两组布局，一组用于 7 英寸平板电脑，一组用于 10 英寸平板电脑。

```
Configuration.SCREENLAYOUT_SIZE_MASK 
```

对于 7 显示 large，对于 10 设备显示 xlarge。我创建了两个文件夹，layout-large 和 layout-xlarge，但是 7 英寸设备使用 x-large 布局（我什至删除了正常的布局文件夹）。

我的问题可能是什么？

编辑：我还根据[http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts](http://developer.android.com/guide/practices/screens_support.html#DeclaringTabletLayouts)尝试了新的限定符，为 10" 制作了布局文件夹

```
layoutw1280dp 
```

7" 不可能有的，还是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:53:04.337

抱歉打扰你们，显然这不是 Android 问题，而是 Eclipse 问题，当我导入项目时，文件夹中的布局文件不知何故混淆了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:16:53.343

不要低估这些小屏幕可以有多少像素。三星 Galaxy S3 的屏幕为 720x1280。那个屏幕不能大于 7"

从文档中：

```
xlarge screens are at least 960dp x 720dp
large screens are at least 640dp x 480dp
normal screens are at least 470dp x 320dp
small screens are at least 426dp x 320dp 
```

它是哪款平板电脑？

# java - 理解正则表达式 if then 语句

> ID：12691404
> 
> 赞同：4
> 
> 时间：2012-10-02T13:39:14.403
> 
> 标签：java, regex

所以我不确定我是否理解它是如何工作的并且想要 **`a simple explanation to how they work`**的就是全部。我大概有办法了。**`A pure regex solution is required, and I don't know if this is possible`**. 如果是这样，解决方案也很棒，但是朝着正确的方向推进对我的学习过程有好处`^_^`

这就是我认为`if/then/else`我的正则表达式引擎中内置的选项的格式：

```
?(condition)if regex|else regex 
```

我希望它仅在该字符串存在于 javascript 的某个部分中时从一个非常特定的位置捕获一个字符串。因为这是我在大量研究后认为它是如何工作的，所以我尝试了该代码的一些变体，但它们最终都变成了这样。

```
((?^view_large$)Tables-137(.*?)search.htm) 
```

**`Also of relevance: I'm using an java based app that has regex searches which pull the data I need so I cannot write an if statement in java which would be my preferred method.`**不得不这样做很痛苦，但目前我别无选择。我正在努力让他们允许使用 java 代码功能而不是纯正则表达式来获得更多通用选项。

所以总结一下，**`is there even a if/then option in regex and if so how is it formatted for what I'm trying to accomplish?`**

**编辑：我想成为“如果条件”的字符串是这样的：如果`view_large`字符串存在并且不为空`500/`，则捕获在我使用的全部捕获组中捕获的确切字符串：`(.*?)`**

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T13:49:34.843

Java regexp 中没有条件，但您可以通过编写两个包含互斥[*后视构造的*](http://www.regular-expressions.info/lookaround.html)表达式来模拟它们，如下所示：

```
((?<=if )then)|((?<!if )end) 
```

当它前面有一个`"if "`;时，这个表达式将匹配 "then" `"end"`当它前面*没有*`"if "`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:45:21.967

[用于提及的 Javadoc`java.util.regex.Pattern`](http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html)，在其“此类不支持的 Perl 构造”列表中：

> *   条件构造和。`(?(*condition*)*X*)``(?(*condition*)*X*|*Y*)`

所以，没有骰子。但是您应该查看 Javadoc，看看您是否可以通过使用它支持的正则表达式功能来实现您所需要*的*。（或者，如果您发布一些更详细的示例，我们可以尝试提供帮助。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T13:48:57.403

尝试环视断言。

例如，假设您只想在某处有 4 位以上的数字时捕获 FOOBAR：

```
(?=.*\d{4}).*(FOOBAR) 
```

# user-interface - Tridion 日期选择器 - 访问事件

> ID：12691405
> 
> 赞同：6
> 
> 时间：2012-10-02T13:39:18.380
> 
> 标签：user-interface, tridion, tridion2009

我在创建的 GUI 扩展 .aspx 页面中添加了 Tridion Date 控件。

我已将此添加到 ASPX 页面

```
<c:Date id="AdjustDate" runat="server" 
IsSeparateFields="false" AddClearButton="false" TabIndex="3"></c:Date> 
```

在我的 .JS 中，我添加了以下内容

1.  给我一个 Tridion 日期控件的句柄（选择日期值等）

    c.AdjustDate = $controls.getControl($("#AdjustDate"), "Tridion.Controls.Date")

2.  捕获日期的变化（在用户在模态对话框中选择 OK 之后）

    $evt.addEventHandler(c.AdjustDate, "改变", this.getDelegate(this._onHighlightDateChange));

我捕获事件并根据所选日期执行一些更新。

但是，我的 GUI 扩展对话框的高度小于显示模式对话框时的高度。当用户单击并显示模式对话框时，**我想**调整我的 ASPX 对话框的大小。`Select Date`

我现在已经捕获了用户单击`Select Date`按钮的事件

```
c.BtnDateSelect = $controls.getControl($("#AdjustDate_selectbutton"),
"Tridion.Controls.Button");
$evt.addEventHandler(c.BtnDateSelect, "click", 
this.getDelegate(this._onDateButtonClicked)); 
```

但是 - 我似乎无法访问结果对话框的高度，因为我无法添加任何事件来配合

1.  对话框本身的打开
2.  用户单击确定或取消（再次调整高度）或
3.  模态对话框正在关闭

我错过了要参加的活动吗？

我尝试使用创建 OK 按钮的句柄

```
BtnDateOKSelect = 
$controls.getControl($("html#DatePickerPopup.popup body center div#buttonContainer div#ButtonOk.tridion"),
 "Tridion.Controls.Button"); 
```

但是参考（及其变体）返回未定义 - 可能因为这是在 iframe 中所以脚本无法访问它？

关于确定我可以参与哪些事件的任何指示？如何与这些事件联系起来（以及何时）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T15:18:55.173

对话框（模态）打开后无法调整其大小。我写了一个扩展，我遇到了类似的问题，当我的日期选择器在我的模态对话框上时，它看起来很奇怪，所以我让我的对话框日期选择器更大。

但是我没有使用日期选择器控件，而是使用常规的 html 按钮。这里的代码：

所以我检索按钮并添加处理程序以显示日期选择器：

```
c.BtnStartDate = $controls.getControl($("#startDate"), "Tridion.Controls.Button");
$evt.addEventHandler(c.BtnStartDate, "click", this.getDelegate(this._onStartDateButtonClicked)); 
```

这是事件中的代码：

```
SetDateRange$_onStartDateButtonClicked(event) {    
    this._setDate(event, "#startDate");

}; 
```

和 setDate 函数：

```
SetDateRange.prototype._setDate = function SetDateRange$_setDate(event, controlSelector) {
    var p = this.properties;
    var currentDate = new Date();
    var c = p.controls;

    p.datePickerPopup = $popup.create(
        $cme.Popups.DATE_PICKER.URL, {
            width: 550,
            height: 350
        },
        {
            date: currentDate,
            popupType: Tridion.Controls.Popup.Type.MODAL_IFRAME
        }
    );

    function SetDateRange$DatePicker$onPopupCanceled(event) {
        if (p.datePickerPopup) {
            p.datePickerPopup.dispose();
            p.datePickerPopup = null;
        }
    }

    function SetDateRange$DatePicker$onPopupSubmitted(event) {
        var value = event.data.date;
        if (value) {
            var value = new Date(value);

            value = $localization.getFormattedDateTime(value, Tridion.Runtime.LocaleInfo.fullDateTimeFormat);
            jQuery(controlSelector).trigger('setdate', [value]);
        }
        p.datePickerPopup.dispose();
        p.datePickerPopup = null;
    }

    $evt.addEventHandler(p.datePickerPopup, "unload", SetDateRange$DatePicker$onPopupCanceled);
    $evt.addEventHandler(p.datePickerPopup, "submit", SetDateRange$DatePicker$onPopupSubmitted);
    $evt.addEventHandler(p.datePickerPopup, "close", SetDateRange$DatePicker$onPopupCanceled);

    p.datePickerPopup.open();
}; 
```

同样，它可能不是您的方案的解决方案，但此示例显示了如何打开日期选择器对话框并使用它返回的值，而不使用“Tridion 日期选择器控件”。

希望这可以帮助。

# android - Android Intent 不会启动下一个活动

> ID：12691406
> 
> 赞同：0
> 
> 时间：2012-10-02T13:39:21.533
> 
> 标签：android, templates, android-intent, android-activity

**应用程序和问题描述** 我们正在尝试创建一个基于文本的 android 游戏（不要问 ;-)），但由于某种原因，我们无法通过意图启动新活动。我们的游戏从欢迎屏幕开始--> 新游戏（按钮）--> 类别选择（两个按钮，侦探/凶手）--> 第一个游戏活动

游戏内活动将包含一个图像视图、一个文本视图、一个继续按钮（导致下一个活动）和最常见的后退按钮（布尔值，取决于游戏/故事上下文）。

问题是，即使我们使用与从菜单到第一个游戏活动几乎相同的代码，我们也无法获得继续按钮来开始下一个活动？我们的想法是，我们同时拥有布局模板和内容模板，并且我们可以创建新的活动，我们只需为图片资源、字符串资源、后退按钮的布尔值和以下活动设置变量以“继续”开始。

**代码** 这是我们的代码：

内容模板：

```
package com.bsnoire;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ImageView;
import android.widget.TextView;

public class ContentTemplate extends Activity implements OnClickListener
{
protected int image, back, text;
protected Class<? extends Activity> cls;

@Override
public void onCreate(Bundle savedInstanceState)
{
    setVariables();

    super.onCreate(savedInstanceState);
    setContentView(R.layout.content);

    ImageView iv = (ImageView) findViewById(R.id.contentImageView);
    TextView tv = (TextView) findViewById(R.id.contentTextView);
    Button bBack = (Button) findViewById(R.id.contentbBack);

    iv.setImageResource(image);
    tv.setText(text);
    bBack.setVisibility(back);
}

@Override
public void onDestroy()
{
    this.finish();
}

//===============================================================================

@Override
public void onClick(View v) 
{
    switch(v.getId())
    {
    case R.id.contentbBack:
        this.finish();
        break;

    case R.id.contentbCon:
        Intent intent1 = new Intent(this, cls);
        startActivity(intent1);
        break;

    }
}

public void setVariables() 
{

}

} 
```

Act1（即活动 1）

```
package com.bsnoire;

import com.bsnoire.R;

import android.app.Activity;
import android.os.Bundle;

public class Act1 extends ContentTemplate 
{

/**
 * Sets the variables in Act1
 */
@Override
public void setVariables()
{

    image = R.drawable.p1;
    back = 0;
    text = R.string.A1S1;
    cls = com.bsnoire.Act2.class;
}

} 
```

Act2 将与 1 相同，但具有其他变量。在菜单中，我们使用以下代码（开关功能）引用 Act1：

```
case R.id.bAbout:
Intent intent2 = new Intent(MainMenu.this, Act1.class);
startActivity(intent2);
break; 
```

哪个有效！

我们没有收到任何编译错误，也没有运行时错误。在 Act1 中按“继续”时没有任何反应，除了手指单击时的绿色标记。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:07:13.823

也许这会有所帮助：

1.  `Button bCon = (Button) findViewById(R.id.contentbCon);`

2.  `bCon.setOnClickListener(new View.OnClickListener() { public void onClick(View v) { Intent newscr = new Intent(ContentTemplate.this, NextClassYouWantToShow.class); startActivity(newscr); } });`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-22T14:29:35.730

我是 android 和 Android Studio 的新手，但我遇到了我能够解决的类似问题。我不知道我的解决方案如何或为什么起作用，只知道它在我的情况下起作用。我有一些活动开始得很好，而另一些则没有。我注意到所有开始正常的活动都有`onCreate`只有一个**Bundle**作为输入的方法，

```
 protected void onCreate(Bundle savedInstanceState){
     ...
 } 
```

虽然没有开始的活动都是 ListActivities ，它们的`onCreate`方法带有**Bundle**和**PersistableBundle**，

```
public void onCreate(Bundle savedInstanceState, PersistableBundle persistedState){
  ...
} 
```

我使用 Android Studio 自动完成我的所有`onCreate`方法，所以我不知道为什么它们的自动完成方式不同。但是，当我从非启动方法中删除**PersistableBundle**`onCreate`时，活动开始了。

# android - 使用 Messenger 和 Binder 进行进程间通信

> ID：12691408
> 
> 赞同：3
> 
> 时间：2012-10-02T13:39:35.707
> 
> 标签：android, android-activity, android-service, messenger

我面临以下问题。

我的应用程序需要在 2 个服务之间进行通信，1 个用于网络，1 个用于基本的电话服务。

现在，我做了以下实现IPC：

`BinderClass`我照常扩展，并`Binder`在我的`onBind()`方法中返回一个自己的。这工作得很好。但现在我还想拥有在 my`Service`和 my之间发送消息的可能性`Activity`。但问题就在这里。`Binder`因为我在这样的`onBind()`方法中返回我自己的：

```
@Override
public IBinder onBind(Intent intent){
    Log.d(this.getClass().getName(), "BIND");
    return binderToThisProcess;
} 
```

我不能像这样返回一个额外的 Messenger：

```
...
return outMessenger.getBinder(); 
```

我的意思当然是这很明显，因为 return 语句只允许返回一个 Object。

我的问题是：有什么办法可以附加`Messenger`到我自己的`Binder`吗？或者有没有类似的方法来实现我正在寻找的东西？还是我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T14:18:48.760

解决方案对我来说似乎很明显 - 只需编写您自己的扩展类即可`Binder`。您可以将任何自定义字段或方法添加到您的`CustomBinder`类。只需实例化您的并在方法`CustomBinder`中返回它 。`onBind()`

# javascript - 尝试实例化模型时，对象不是函数错误

> ID：12691411
> 
> 赞同：1
> 
> 时间：2012-10-02T13:39:39.527
> 
> 标签：javascript, backbone.js, requirejs

我正在尝试在我通过require.js包含的backbone.js路由器中实例化一个模型。但是，我不断收到以下错误；

`Uncaught TypeError: object is not a function`

这是模型；

```
define(['jquery', 'underscore', 'backbone'], function($, _, Backbone) {
    var AppState = Backbone.View.extend({});
    return AppState;
}); 
```

这是我尝试实例化模型的路由器。

```
define(['jquery', 'underscore', 'backbone', 'models/appstate'], 
function($, _, Backbone, AppState) {

    var Router = Backbone.Router.extend({
        routes: {
          '': 'index'
        },

        index: function() {
            var appState = new AppState();
        }
    });
    return new Router();
}); 
```

模型文件已包含在内，所有路径均正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:22:22.287

让您的模型扩展模型而不是视图。

# debugging - DataSnap 服务器作为 Windows 服务和调试

> ID：12691420
> 
> 赞同：2
> 
> 时间：2012-10-02T13:40:23.980
> 
> 标签：debugging, windows-services, datasnap

早上好，

我们即将开始使用 DataSnap 作为我们的服务器应用程序和 Delphi Prism 的多层项目。

我做了一些研究并接受了将 DataSnap 服务器创建为 Windows 服务的建议。

我的问题是：有没有一种简单的方法来调试 DataSnap 服务器服务？

我问这个，因为在一些复杂的方法中，我们可能需要进入以验证参数值。

对不起我的英语，但我很生疏，因为我很久没说英语了。

**更新：**

我几乎忘了更新和解释我们如何解决这个问题。

我们发现的唯一替代方案是在 DataSnap 服务器项目中启用 Log4Delphi。并设置日志工具来注册 SQL 查询及其参数。

[Log4Delhpi](http://log4delphi.sourceforge.net/)

# jquery - Fancybox modal 在后续 ajax 请求后开始失败

> ID：12691427
> 
> 赞同：0
> 
> 时间：2012-10-02T13:41:05.663
> 
> 标签：jquery, ruby-on-rails, fancybox

我有一个页面，假设当ai用户单击图像链接列表时，它会显示带有图像的fancybox模式。我的页面中有这个正在加载

```
 $('a#couponLink').fancybox({
          'opacity'       : true,
          'overlayShow'   : false,
          'transitionIn'  : 'elastic',
          'transitionOut' : 'none'
        }); 
```

思考链接：

```
<a href="images/<%= coupon.couponImageURL %>" id="couponLink" class="view">View Coupon ></a> 
```

现在，在我使用 ajax 使页面动态之前，一切正常。但是，我添加了一些处理 index.js.erb 文件的 ajax 过滤器，该文件过滤列表中的对象列表。触发 ajax 请求后，上面的链接无法加载模式，只是将我带到图像的页面，而不是在模式中加载它？

不确定是什么原因造成的或如何诊断问题？有什么提示可以查看为什么幻想箱没有触发？

我看到的一种可能性是在我的 index.js.erb 文件中，我确实调用了

```
<% if session[:zip] and !(session[:zip].blank?) %>
$.fancybox.close();
 <% end %> 
```

要关闭假设在新用户查看页面时加载的特定模式，并且一旦我们设置了一些会话参数，就假设它不再显示。这是同一页面上具有不同类的两个不同的幻想模式。但是调用fancybox的关闭会影响图像模式吗？

在 ajax 请求后查看源代码，我仍然看到所有适当的库正在加载？

重新加载页面会恢复图片链接上的幻想框功能。奇怪，我知道。

帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T16:06:23.420

我通过以下方式解决了这个问题： 1- 将链接转换为类而不是 id 2- 将 fancybox 代码也放入 .js.erb 文件中。

显然当

```
 $('a.couponLink').fancybox({
    'opacity'       : true,
    'overlayShow'   : true,
    'transitionIn'  : 'elastic',
    'transitionOut' : 'none'
    }); 
```

第一次运行时，它会触发一个链接列表，可以用来打开一个花哨的盒子。在页面其他地方的任何形式的 ajax 请求中，这个链接列表都会以某种方式被否定。因此，将上述代码再次添加到要在每个 ajax 请求后运行的 .js.erb 文件中，重新注册链接。

# processing - 没有找到用于处理的库？

> ID：12691434
> 
> 赞同：5
> 
> 时间：2012-10-02T13:41:29.263
> 
> 标签：processing, openni

我目前正在使用[SimpleOpenNI](http://code.google.com/p/simple-openni/)和 Kinect 开发手语编程项目。我在我的 32 位计算机上安装了必备程序（驱动程序、NITE、OpenNI），我的项目在该计算机上编译得很好。

我在我的 64 位计算机上安装了 64 位版本的 prereq 程序。安装 prereq 程序后，我将 SimpleOpenNI 文件夹（我尝试压缩和解压缩）放在 /Documents/Processing/libraries 中。当我尝试编译时，它在处理中给了我一个错误：

> 没有找到 SimpleOpenNI 库的库必须安装在“sketchbook”文件夹内名为“libraries”的文件夹中。

我尝试了很多[解决方案](http://code.google.com/p/simple-openni/issues/detail?id=27)：我尝试安装 32 位程序，直接从网站安装程序，并在另一台 64 位计算机上尝试。

有没有人有什么建议？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:10:27.827

尝试将 SimpleOpenNI 文件夹放在 /Documents/Processing/libraries/libraries 中，这应该可以解决您的错误。

# facebook - 获取用户的好友列表，这些好友在他们的提要中包含其他应用帖子

> ID：12691436
> 
> 赞同：1
> 
> 时间：2012-10-02T13:41:36.263
> 
> 标签：facebook, facebook-graph-api, facebook-fql

在阅读了所有 facebook 文档和 google 搜索后，我发布了这个问题，因为我找不到答案。

*   应用程序 A - 我的应用程序
*   应用程序 B - 其他人的应用程序

我想测试用户的朋友，他们的提要包含应用程序 B 的帖子。我只需要 true 或 false 而不获取他们的帖子。因为获取每个朋友的提要是缓慢且错误的方式。是他们以真假方式获取朋友列表的任何方式。请建议任何单个 Graph API 或 FQL 来获取列表。

谢谢你。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:15:45.383

不，没有直接的“真/假”查询。

您可以只为每个朋友过滤[FQL`stream`表](https://developers.facebook.com/docs/reference/fql/stream/)的内容，并在找到通过该应用为该用户发布的第一篇帖子时使用来中断搜索。`app_id``LIMIT 1`

当然，您可以进行多重查询，一次为所有朋友获取数据，以限制必要的 HTTP 请求的数量。

# javascript - javascript中两个按钮冲突

> ID：12691440
> 
> 赞同：0
> 
> 时间：2012-10-02T13:41:57.780
> 
> 标签：javascript

我有两个按钮，分别是 div 和两个段落，它们相互匹配。因此，您单击按钮一，按钮一旋转 45 度并切换打开第一段，按钮二除了第二段之外执行相同的操作。出于某种原因，如果您单击第一个按钮，它会打开两个段落，如果您单击按钮两个，则没有任何反应，我不知道为什么。我最终需要设置多个按钮和段落。

```
var epidural_analgesia_INFO = document.images[0];
epidural_analgesia_INFO.style.setProperty("-webkit-transition", "-webkit-transform 0.3s ease-in-out");

var epidural_analgesia_DEG = 0;

epidural_analgesia_INFO.addEventListener('click', function() {
$("p#epidural_analgesia_TEXT").slideToggle("fast");
epidural_analgesia_DEG += 45;
epidural_analgesia_INFO.style.setProperty('-webkit-transform', 'rotateZ('+epidural_analgesia_DEG+'deg)');   
});

var effects_of_yoga_INFO = document.images[0];
effects_of_yoga_INFO.style.setProperty("-webkit-transition", "-webkit-transform 0.3s ease-in-out");

var effects_of_yoga_DEG = 0;

effects_of_yoga_INFO.addEventListener('click', function() {
$("p#effects_of_yoga_TEXT").slideToggle("fast");
effects_of_yoga_DEG += 45;
effects_of_yoga_INFO.style.setProperty('-webkit-transform', 'rotateZ('+effects_of_yoga_DEG+'deg)');   
}); 
```

我有一个小提琴设置，但它很大，所以我在这里拉出了特定的部分，但如果你想看小提琴，它就在这里：http: [//jsfiddle.net/loriensleafs/AM2a2/12/](http://jsfiddle.net/loriensleafs/AM2a2/12/) 非常感谢帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:46:02.820

您将单击处理程序分配给这两个变量引用的元素：

```
epidural_analgesia_INFO
effects_of_yoga_INFO 
```

但是这两个变量都被初始化为 reference `document.images[0]`。因此，单击该图像会触发两个处理程序。第二个是否应该使用索引`1`来获取第二个图像？

（顺便说一句，`addEventListener()`当你似乎在使用 jQuery 时为什么还要使用？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:47:55.347

明白了，在第一行

var epidural_analgesia_INFO = document.getElementById('epidural_analgesia_INFO');

代替

var effects_of_yoga_INFO = document.images[0];

# c# - c# ASP HttpWebRequest 多部分上传 XML 和图像

> ID：12691441
> 
> 赞同：0
> 
> 时间：2012-10-02T13:42:07.263
> 
> 标签：c#, asp.net, sharepoint, httpwebrequest

我已经（试图）自定义我在 Stackoverflow 上找到的方法，以启用一个 XML 文件和多个图像的多部分上传，以从 Sharepoint WebPart 处理 HTTPWebRequest。不好意思，我不得不说我真的不熟悉 HttpRequest 和 StreamUpload 的事情，这是我第一次认真尝试处理这个问题。

这是我的编码：

```
 public XmlDocument DoHttpUploadFile(string url, string[] file, string[] paramName, string[] contentType, NameValueCollection nvc, NameValueCollection headerItems, string xmlFileName)
    {
        var xmlDox = new XmlDocument();
        var totalLength = 0;
        string boundary = "---------------------------" + DateTime.Now.Ticks.ToString("x");
        byte[] boundarybytes = System.Text.Encoding.ASCII.GetBytes("\r\n--" + boundary + "\r\n");
        const string headerTemplate = "Content-Disposition: form-data; name=\"{0}\"; filename=\"{1}\"\r\nContent-Type: {2}\r\n\r\n";

        // First Loop is just need to get the Length of all Parts

        for (int i = 0; i < file.Length; i++)
        {
            string header = "";
            if (i == 0)
            {
                header = string.Format(headerTemplate, paramName[i], xmlFileName, contentType[i]);
            }
            else
            {
                var filename = Path.GetFileName(file[i]);
                header = string.Format(headerTemplate, paramName[i], filename, contentType[i]);
            }

            byte[] headerbytes = System.Text.Encoding.UTF8.GetBytes(header);

            var headerLength = headerbytes.Length;
            var boundaryLength = boundarybytes.Length;

            totalLength = totalLength + headerLength + boundaryLength;

            if (file[i].StartsWith("<"))
            {
                byte[] xmlBytes = System.Text.Encoding.UTF8.GetBytes(file[i]);
                var xmlLength = xmlBytes.Length;
                totalLength = totalLength + xmlLength;
            }
            else
            {
                var client = new WebClient();
                var img = new Image { ImageUrl = file[i] };

                client.UseDefaultCredentials = true;
                // image as Byte into Stream
                var fileData = client.DownloadData(img.ImageUrl);
                var imgLength = fileData.Length;
                totalLength = totalLength + imgLength;
            }
        }

        var wr = (HttpWebRequest)WebRequest.Create(url);

        wr.ContentType = "multipart/form-data; boundary=" + boundary;
        wr.Method = "POST";
        wr.ContentLength = totalLength;

        Stream rs = wr.GetRequestStream();
        var read = 0;
        var finalLength = 0;

        for (int i = 0; i < file.Length; i++)
        {
            string header = "";
            if(i==0)
            {
                header = string.Format(headerTemplate, paramName[i], xmlFileName, contentType[i]);
            }
            else
            {
                var filename = Path.GetFileName(file[i]);
                header = string.Format(headerTemplate, paramName[i], filename, contentType[i]);
            }

            rs.Write(boundarybytes, 0, boundarybytes.Length);

            byte[] headerbytes = System.Text.Encoding.UTF8.GetBytes(header);

            var headerLength = headerbytes.Length;
            var boundaryLength = boundarybytes.Length;
            finalLength = finalLength + headerLength + boundaryLength;
            rs.Write(headerbytes, 0, headerbytes.Length);

            if(file[i].StartsWith("<"))
            {
                var writer = new StreamWriter(rs);
                byte[] xmlBytes = System.Text.Encoding.UTF8.GetBytes(file[i]);
                var xmlLength = xmlBytes.Length;
                finalLength = finalLength + xmlLength;
                writer.Write(file[i]);
            }
            else
            {
                var getitem = new GetItemFromList();

                var client = new WebClient();
                var img = new Image {ImageUrl = file[i]};

                client.UseDefaultCredentials = true;
                // image as Byte into Stream
                var fileData = client.DownloadData(img.ImageUrl);
                finalLength = finalLength + fileData.Length;
                rs.Write(fileData, 0, fileData.Length);
            }

        }

        finalLength.ToString();
rs.Close(); // Here it stops with Exception 'Bytes are not completely written

        WebResponse wresp = null;
        try
        {
            wresp = wr.GetResponse();
            var wrlength = wr.ContentLength;
            var stream2 = wresp.GetResponseStream();
            if (stream2 != null)
            {
                var reader2 = new StreamReader(stream2);
                var backstr = reader2.ReadToEnd();

                xmlDox.LoadXml(backstr);
            }
        }
        catch (Exception ex)
        {
            //log.Error("Error uploading file", ex);
            if (wresp != null) 
                wresp.Close();
            wresp = null;
        }
        finally
        {
            wr = null;            }

        return xmlDox;
    } 
```

它在 rs.Close 处停止，并出现异常“无法关闭流字节未写入完成”。

我想这可能取决于 wr.ContentLength 并尝试手动设置它，正如您在上面的编码部分中看到的那样。

我找不到解决方案，我在前两天尝试了并在网上搜索了所有内容，尤其是 stackeOverflow。

所以，如果有人能告诉我出了什么问题，请告诉我，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:50:11.253

“抛出异常是因为您写入的字节数少于 WebRequest 预期的字节数。例如，如果您在 ContentLength 属性中设置了 75 个字节，并且您在 ResquestStream 上写入了 69 个字节并关闭它，则会引发异常。”

请参阅此帖子：[在写入所有字节之前无法关闭流](https://stackoverflow.com/questions/4441370/cannot-close-stream-until-all-bytes-are-written)

您能否检查 TotalLength 的大小以确保您使用的是字节长度并在调试器中进行验证？

# deployment - 如何使用 Chef 部署整个环境（服务器组）？

> ID：12691446
> 
> 赞同：1
> 
> 时间：2012-10-02T13:42:12.927
> 
> 标签：deployment, sysadmin, chef-infra

我有一个如下所示的环境（[Graphite](http://graphite.wikidot.com/)）：

*   N 个工作服务器
*   1 个中继服务器，将工作转发到这些工作服务器
*   1 个可以查询中继服务器的 Web 服务器。

我想使用 Chef 在 EC2 中设置和部署此环境，而不必单独创建每个工作服务器，获取它们的 IP 并将它们设置为中继说明书中的属性，创建该中继，获取 IP，将其设置为属性Web 服务器说明书等。

有没有一种使用 chef 的方法，我可以确保环境已正确部署、配置和运行，而无需手动设置 IP？特别是，我希望能够添加一个工作服务器并让中继更新其工作列表，或者将中继服务器换成另一个，并让 Web 服务器相应地更新其引用。

也许这不是 Chef 的目的，而是更多地用于每个服务器的配置和部署，如果是这种情况，那么有什么技术可以促进这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:07:21.150

你需要的东西是：

1.  [Knife-ec2](http://wiki.opscode.com/display/chef/Launch+Cloud+Instances+with+Knife) - 这用于启动/停止 Amazon EC2 实例。
2.  [chef-server](http://wiki.opscode.com/display/chef/Installing+Chef+Server) - 能够在您的食谱中使用搜索。它也应该可以从您的 EC2 实例访问。
3.  [搜索](http://wiki.opscode.com/display/chef/Search)- 有了它，您将能够在厨师提供的节点中找到，正是您使用不同查询需要的节点。

我最近写了一篇文章[How to Run Dynamic Cloud Tests with 800 Tomcats, Amazon EC2, Jenkins and LiveRebel](http://dracoater.blogspot.com/2012/09/how-to-run-dynamic-cloud-tests-with-800.html)。它涉及负载均衡器的安装，并且负载均衡器必须知道它所平衡的服务器的所有 IP 地址。您可以查看[平衡节点的配方](https://github.com/DracoAter/lr-cluster/blob/master/cookbooks/tomcat/recipes/lr-tomcat.rb)，它是如何寻找负载平衡器的：

```
search(:node, "roles:lr-loadbalancer").first 
```

并查看[loadbalancer recipe](https://github.com/DracoAter/lr-cluster/blob/master/cookbooks/apache2/recipes/default.rb)，它如何查找所有平衡节点并更新 apache 配置文件：

```
lr_nodes = search(:node, "role:lr-node")

template ::File.join( node[:apache2][:home], 'conf.d', 'httpd-proxy-balancer.conf' ) do
  mode 0644
  variables(:lr_nodes => lr_nodes)
  notifies :restart, 'service[apache2]'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T17:27:17.067

也许你正在寻找这个？

[http://www.infochimps.com/platform/ironfan](http://www.infochimps.com/platform/ironfan)

# php - Yii：组件的主题支持？

> ID：12691447
> 
> 赞同：1
> 
> 时间：2012-10-02T13:42:19.213
> 
> 标签：php, yii, themes

我想知道 yii 组件是否也支持主题功能？在我现在的环境中，组件只考虑文件夹中的`component/views/`文件。
现在我也在使用主题，最好告诉组件在`themes/themeName/`文件夹下查找视图。

使用下面的方法我可以解决这个问题，但它肯定不觉得这是 yii 的方法。

```
protected function renderContent()
{
    $view = './../../../themes/'.Yii::app()->theme->name.'/views/viewName';
    $this->render($view);
} 
```

您知道实现此目标的更优雅的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-16T07:36:23.647

组件上没有任何主题。主要是因为它们不打算为任何东西渲染内容。不过这没什么错，有时它是必需的。

最简单的解决方案可能只是让它更具可读性，使用路径别名总是有帮助的：

```
protected function renderContent()
{
    $view = 'webroot.themes.'.Yii::app()->theme->name.'.views.viewName';
    $this->render($view);
} 
```

或者，您可以为组件添加一个方法，或者扩展 CComponent 以在所有组件中获取它（如果需要）：

```
public function getViewsPath(){
    return 'webroot.themes.'.Yii::app()->theme->name.'.views';
} 
```

或者您可以设置路径别名：

```
Yii::setPathOfAlias('theme','webroot.themes.'.Yii::app()->theme->name); 
```

然后，您可以在应用程序的任何地方使用它，只要您在过程中足够早的时间运行它。

# jquery - Firefox 错误 -NS_ERROR_XPC_NOT_ENOUGH_ARGS：没有足够的参数

> ID：12691450
> 
> 赞同：3
> 
> 时间：2012-10-02T13:42:35.617
> 
> 标签：jquery, firefox, firebug

HTML：

```
<div id="images" class="span9 grid-inputs">

                                                            <div class="row-fluid img_rw">
<div class="span12 clearfix">
    <div class="span1"><img width="50" height="40" src="http://i.ytimg.com/vi/frcvjtgc-Iw/0.jpg"></div>
    <div class="span3">
            <div class="selector" id="uniform-undefined"><span style="-moz-user-select: none;"></span><select class="required" name="image_size[]" style="opacity: 0;">
                <option></option>
                <option value="small">small</option>
                <option value="medium">medium</option>
                <option value="large">large</option>
            </select></div>
     </div>
    <div class="span7"><input type="text" value="http://i.ytimg.com/vi/frcvjtgc-Iw/0.jpg" class="text required img_url" name="image_url[]"></div>
    <div class="span1"><a class="remove_img" href="javascript:"><span class="icon16 icomoon-icon-minus"></span></a></div>
</div>
</div><div class="row-fluid img_rw">
<div class="span12 clearfix">
    <div class="span1"><img width="50" height="40" src="http://i.ytimg.com/vi/frcvjtgc-Iw/1.jpg"></div>
    <div class="span3">
            <div class="selector" id="uniform-undefined"><span style="-moz-user-select: none;"></span><select class="required" name="image_size[]" style="opacity: 0;">
                <option></option>
                <option value="small">small</option>
                <option value="medium">medium</option>
                <option value="large">large</option>
            </select></div>
     </div>
    <div class="span7"><input type="text" value="http://i.ytimg.com/vi/frcvjtgc-Iw/1.jpg" class="text required img_url" name="image_url[]"></div>
    <div class="span1"><a class="remove_img" href="javascript:"><span class="icon16 icomoon-icon-minus"></span></a></div>
</div>
</div><div class="row-fluid img_rw">
<div class="span12 clearfix">
    <div class="span1"><img width="50" height="40" src="http://i.ytimg.com/vi/frcvjtgc-Iw/2.jpg"></div>
    <div class="span3">
            <div class="selector" id="uniform-undefined"><span style="-moz-user-select: none;"></span><select class="required" name="image_size[]" style="opacity: 0;">
                <option></option>
                <option value="small">small</option>
                <option value="medium">medium</option>
                <option value="large">large</option>
            </select></div>
     </div>
    <div class="span7"><input type="text" value="http://i.ytimg.com/vi/frcvjtgc-Iw/2.jpg" class="text required img_url" name="image_url[]"></div>
    <div class="span1"><a class="remove_img" href="javascript:"><span class="icon16 icomoon-icon-minus"></span></a></div>
</div>
</div><div class="row-fluid img_rw">
<div class="span12 clearfix">
    <div class="span1"><img width="50" height="40" src="http://i.ytimg.com/vi/frcvjtgc-Iw/3.jpg"></div>
    <div class="span3">
            <div class="selector" id="uniform-undefined"><span style="-moz-user-select: none;"></span><select class="required" name="image_size[]" style="opacity: 0;">
                <option></option>
                <option value="small">small</option>
                <option value="medium">medium</option>
                <option value="large">large</option>
            </select></div>
     </div>
    <div class="span7"><input type="text" value="http://i.ytimg.com/vi/frcvjtgc-Iw/3.jpg" class="text required img_url" name="image_url[]"></div>
    <div class="span1"><a class="remove_img" href="javascript:"><span class="icon16 icomoon-icon-minus"></span></a></div>
</div>
</div></div> 
```

通过ajax加载的html内容。

**javascript:**

```
$(document).on("click", ".remove_img", function(event){
    event.preventDefault();
        $(this).parent('div').parent('div').remove();
}); 
```

它的代码在 chrome 上运行良好，但 firefox 给出`-NS_ERROR_XPC_NOT_ENOUGH_ARGS: Not enough arguments`错误。我已经阅读了很多论坛和主题，但我找不到解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-31T20:52:41.863

我建议验证发送到服务器的数据。就我而言，我试图直接发送一个 jQuery 对象作为属性的值。

就像是：

```
$.ajax({
    类型：“获取”，
    url：“数据/跑步者/updateTeamFinder.php”，
    数据 : { myKey : $("#chekboxes") }
});

```

希望它可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-26T08:23:46.413

如果我的回答可以帮助任何人，我实际上在旧的 Firefox 中遇到了同样的问题。在文档侦听器中，您必须添加第三个（通常是可选的）参数：***useCapture***，它是一个布尔值，指示是否将此类事件分派到已注册的侦听器，然后再分派到 DOM 树中它下方的任何 EventTarget（来源：mozilla .org)

```
$(document).on("click", ".remove_img", function(event){
event.preventDefault();
    $(this).parent('div').parent('div').remove();
}, null); 
```

# ms-access - 无法访问注册表项 « Process Jet 的临时（易失性）Ace DSN »

> ID：12691456
> 
> 赞同：2
> 
> 时间：2012-10-02T13:43:03.027
> 
> 标签：ms-access, asp-classic, odbc, iis-7.5

几天来，我一直在尝试在 Windows 7 (IIS 7.5) 上使用旧的 Classic ASP。总是遇到更多的麻烦。现在，我终于完成了，但还有一个大问题：我无法打开 Acess .mdb 文件。我使用[本教程](http://digitallibraryworld.com/?p=6)中提到的[Microsoft Access Database Engine 2010 Redistributable](http://www.microsoft.com/en-us/download/details.aspx?id=13255)。我得到的错误如下：

> [Microsoft][ODBC Microsoft Access 驱动程序] 无法访问注册表项 « Jet 进程的临时（易失性）Ace DSN »

谷歌搜索了很多解释。我最终将 IIS\DefaultAppPool 的权限授予了很多地方，但仍然没有运气。我总是收到此错误消息。

这是我的连接字符串以防万一：

```
Driver={Microsoft Access Driver (*.mdb, *.accdb)};DBQ=C:\inetpub\wwwroot\mysite\bd\mydatabase.mdb 
```

谁能帮我解决这个问题？谢谢！

# bash - env 在 Bash 中究竟做了什么？

> ID：12691461
> 
> 赞同：13
> 
> 时间：2012-10-02T13:43:24.743
> 
> 标签：bash

使用 Bash（在 Cygwin 下）时，我得到了这种行为：

```
$ printf '\u00d5'
\u00d5
$ env printf '\u00d5' # This results in the behavior I want
Õ 
```

我在终端中使用 UTF-8 还是 ISO-8859-1 编码并不重要。

**我的问题是： env**到底是做什么的？为什么在这种特定情况下我需要它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-02T13:48:39.103

`env`不在`bash`，它是一个独立的可执行文件，它用于在运行程序之前设置或清除环境变量。在您的特定情况下，它运行的是二进制文件`printf`而不是内置的 shell。您可以通过使用绝对路径来获得相同的结果：

```
/usr/bin/printf '\u00d5' 
```

* * *

侵入性最小的方法可能如下：重新定义`printf`函数并让 Bash 处理其余部分。获取包含以下内容的文件：

```
function printf()
{
  $(which printf) "$@"
} 
```

或作为单线`function printf() { $(which printf) "$@"; }`。当然你可以换`$(which printf)`一个`/usr/bin/printf`...

然后像你习惯的那样简单地使用 printf 。您的脚本保持不变，您甚至可以引入一个条件来仅在某些 Bash 版本上定义该函数。

AFAIK 你也可以省略`function`，但我发现它增加了可读性。

[编辑：`function`关键字是`bash`扩展；`printf () { ...; }`是 POSIX 语法。如果你确实使用了`function`关键字，函数名后面的 () 是可选的。]

* * *

通常，`env`也用于力求可移植的脚本的 hash-bang 行。原因是它`env`几乎总是在`/usr/bin/env`，而`bash`并不总是`/bin/bash`像哈希线所暗示的那样。例子：

```
#!/usr/bin/env bash 
```

也适用于其他程序/口译员：

```
#!/usr/bin/env python 
```

# php - 使用 PHP 在 MySQL 表中如何更好地添加代码前缀？

> ID：12691463
> 
> 赞同：1
> 
> 时间：2012-10-02T13:43:27.540
> 
> 标签：php, mysql

我将编写 PHP 脚本，它使用 MySQL 表的表前缀。我应该写下所有的请求，例如

```
$db_query='select * from '.$tbl_prefix.'sometable;'; 
```

或者可以设置一些变量，将这个前缀添加到所有查询中？例如，我正在执行请求

```
$db_query='select * from sometable;'; 
```

并且*MAGIC*为表本身添加前缀，因此对于 MySQL 查询将如下所示

```
select * from pref_sometable; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T13:47:17.157

你的第一个样品是要走的路；您每次都需要添加前缀。不过，这可能会使它更容易成为一个函数（如果您需要更新任何东西，最好只更新一个位置而不是多个位置）：

```
function _table($table) {
    global $tbl_prefix;
    return $tbl_prefix . $table;
}

$db_query = 'SELECT * FROM ' . _table('sometable') . ';'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:56:34.040

没有 MySQL 命令可以做到这一点，您必须像一开始那样在代码中实现它。所以：

```
$db_query='select * from '.$tbl_prefix.'sometable;'; 
```

没问题。

如果您不想在每个查询上添加前缀，您可以像这样创建一个对象：

```
class database {
    function select($qry,$database) {
        $db_query="select " . $qry . " from myprefix_" . $database;
        // $res = query($db_query);
        return $res;
    }
}

$db_query=database->select("*","sometable");
// echo $db_query;
$db_query=database->select("playernick","sometable");
// echo $db_query; 
```

这不是 100% PHP，它只是一个想法，所以你可以得到它。

# regex - 正则表达式检查字符串是否包含所有相同的数字

> ID：12691464
> 
> 赞同：2
> 
> 时间：2012-10-02T13:43:31.150
> 
> 标签：regex, expression

我是正则表达式的新手，对于我正在处理的项目，我需要验证一个字段以查看输入的 10 位数字是否包含所有相同的数字。

我找到了以下解决方案：

```
([1-9])\\1{9} 
```

来源： http: [//www.coderanch.com/t/461871/java/java/Check-if-number-contains-all](http://www.coderanch.com/t/461871/java/java/Check-if-number-contains-all)

我试图用谷歌搜索它，但没有任何东西可以解释这个表达式在做什么。我想知道是否有人可以解释这个表达式是如何工作的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:48:29.997

它是这样工作的：

```
([1-9])   // Capture any number 1-9 and store it as the first "capture"
\1        // Substitute the first "capture" as raw text into the regex
{9}       // Match that raw text another 9 times (i.e. 10 in total) 
```

确保它`0000000000`不应该匹配你的表达，因为这不匹配`[1-9]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:50:38.883

这全都是关于`captured groups`

`([1-9])`是一个`capture group`捕获 1-9 之间的单个数字

`\1{9}`是`first capture group`重复 9 次的 ie ([1-9])..

**例子**

您可以拥有一个匹配内容的正则表达式，该内容始终位于匹配的标签名称之间。

所以，使用这个正则表达式

```
<(.*?)>(.*?)<\1> 
```

对于以下**每个**输入

```
<party>At Garden<party>
<dance>With GirlFriend<dance>
<drink>risky<drive> 
```

您将在第 2 组捕获

```
At Garden
With GirlFriend
//risky would not match 
```

# java - 批处理文件运行关闭文件，如果已经运行（计划作业）

> ID：12691473
> 
> 赞同：0
> 
> 时间：2012-10-02T13:44:06.640
> 
> 标签：java, batch-file, scheduled-tasks

所以我遇到了一个有趣的问题，我用 java 编写了一个似乎曾经崩溃过的程序。我不知道导致它崩溃的确切条件（因为它似乎在那段时间停止了记录）。但是它是通过批处理文件调用的（运行：

```
java -jar MyProg.jar 
```

)

话虽如此，当程序未能正确执行时（尽管有一定数量的安全网），它应该停止运行。有什么方法可以检查用户 x 是否正在运行 java.exe，如果是，请执行以下操作：

```
taskkill /IM java.exe /f 
```

在我尝试运行我的程序或类似的东西之前？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:53:51.680

```
tasklist /nh /fi "imagename eq java.exe" | find /i "java.exe" >nul && taskkill /im java.exe /f || rem Java not running, run your program 
```

# scala - 不确定 Sets 上的联合函数是如何工作的

> ID：12691478
> 
> 赞同：1
> 
> 时间：2012-10-02T13:44:26.007
> 
> 标签：scala, scala-collections

我试图理解这个 def 方法：

```
def union(a: Set, b: Set): Set = i => a(i) || b(i) 
```

问题中提到的是：[Scala set function](https://stackoverflow.com/questions/6963792/scala-functional-set-problem)

这是我的理解：

该方法接受两个 Set 类型的参数 - a & b 返回一个 Set，它是两个集合 a & b 的并集。

这是我特别困惑的地方： Set = i => a(i) || 双）

返回的 Set 本身包含 Set a & b 的“或”。Set 'i' 是否由隐式 for 循环填充？

既然“我”是一个集合，为什么有可能或“一组集合”，这是否类似于在后台生成的内容：

```
a(i) || b(i) 
becomes
SetA(Set) || SetB(Set) 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T14:11:37.367

也许让你感到困惑的是语法。我们可以将其重写为：

```
type Set = (Int => Boolean)

def union(a: Set, b: Set): Set = {
  (i: Int) => a(i) || b(i)
} 
```

所以这可能更容易解决。我们正在定义一个`union`接受`Set`s 并返回一个 new的方法`Set`。在我们的实现中，`Set`它只是一个函数 from `Int`to的另一个名称`Boolean`（即，一个告诉我们参数是否在“集合中”的函数）。

该`union`方法的主体创建了一个匿名函数 from `Int`to `Boolean`（`Set`正如我们所定义的那样）。这个匿名函数接受一个参数`i`，一个 Int，并且`true`当且仅当`i`它在 set `a`( `a(i)`) 中或者`i`在 set `b`( `b(i)`) 中时才返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:11:59.823

如果你仔细看，这个问题定义了一个`type Set = Int => Boolean`. 所以我们不是在这里谈论`scala.collection.Set`；我们在谈论`Int => Boolean`s。

要编写函数文字，请使用`=>`关键字，例如

```
x => someOp(x) 
```

如果类型已知，则无需注释该类型。所以如果我们知道 rhs 是`Int => Boolean`，我们就知道那`x`是 type `Int`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:20:57.047

不，该集合不是由 for 循环填充的。

返回类型`union(a: Set, b: Set): Set`是一个函数。`a(i) || b(i)`调用时不执行声明的代码`union`；它只会在您调用`union`.

并且`i`不是一个集合，它是一个整数。它是由返回的函数的单个参数`union`。

这里发生的是，通过使用`set`and函数，您可以通过将它们与逻辑或运算符 ( )`union`组合来构造函数的二叉树。`||`该`set`函数使您可以构建叶子，并且`union`可以将它们组合成更大的函数树。

例子：

```
def set_one = set(1)
def set_two = set(2)
def set_three = set(2)
def set_one_or_two = union(set_one, set_two)
def set_one_two_three = union(set_three, set_one_or_two) 
```

这`set_one_two_three`将是一个包含两个节点的函数树：左边是检查传递的参数是否等于 3 的函数；右边是一个节点，它本身包含两个函数，分别检查参数是否等于 1 和 2。

# iphone - iOS应用程序进入后台，返回前台有问题

> ID：12691479
> 
> 赞同：0
> 
> 时间：2012-10-02T13:44:34.227
> 
> 标签：iphone, ios, ios4

我的应用程序触发 iPhone 拨号器并通过 App Delegate 进入后台。在 AppDelegate.m 文件的某处，这被称为：

```
- (void) applicationDidEnterBackground: (UIApplication *) application
{
    [self terminate];
} 
```

当我使用完外部应用程序（拨号器）后，应用程序再次启动，但大多数 GUI 部分没有响应。

它会响铃吗？我该如何调试这个问题？如果您需要更多信息，请告诉我。

为了更有帮助。该应用程序是一个地址簿，每个条目都是可拨号的，并且当单击 iOS 应用程序时会被调用。在通话期间我希望能够打开我的应用程序以浏览信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:52:22.690

当您进入后台时，您会得到 applicationdidEnterBackground，但是当发生这种情况时，您是否试图完全退出您的应用程序？比这样做更好的是有一个 info.plist 键，它会告诉操作系统不要进入后台“应用程序不在后台运行”。这将更优雅地终止您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:58:12.057

我假设您的主要问题是您不考虑被暂停的影响。请看这个问题：[iOS 4 resume from background](https://stackoverflow.com/questions/3531014/ios-4-resume-from-background)

然后考虑阅读应用程序状态周期，您可以在[此处](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html) 找到本文中的重要内容包括：

> 为了帮助减少您的应用程序的内存占用，当您的应用程序移动到后台时，系统会自动清除代表您的应用程序分配的一些数据。
> 
> 1.  系统清除所有核心动画层的后备存储。这项工作不会从内存中删除应用程序的图层对象，也不会更改当前图层属性。它只是防止这些图层的内容出现在屏幕上，鉴于应用程序在后台，无论如何都不应该发生这种情况。
> 2.  它会删除对缓存图像的任何系统引用。（如果您的应用没有对图像的强引用，它们随后会从内存中删除。）
> 3.  它删除了对其他一些系统管理的数据缓存的强引用

换句话说，您的应用程序的状态可能不是您在后台时的状态。整个过程太大，无法在此处详细说明，应通过我在上面链接到的 Apple 提供的文档进行研究。

# php - Magento 客户网格 - 掩码电子邮件地址

> ID：12691482
> 
> 赞同：2
> 
> 时间：2012-10-02T13:44:40.167
> 
> 标签：php, javascript, magento-1.4, magento

我要求呼叫中心代理根据电子邮件地址搜索客户。但我不想在客户网格中显示电子邮件地址，除非他们搜索电子邮件。

我怎样才能做到这一点？？

Magento 版本：1.4.1.1

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T17:33:04.733

编写一个扩展的自定义模块：

```
/app/code/core/Mage/Adminhtml/Block/Customer/Grid.php 
```

阅读更多@[如何从 eav_attribute 表中获取实体（例如客户）的数据，以便在管理员的客户网格中显示](https://stackoverflow.com/questions/3915148/how-to-get-data-for-an-entity-for-example-customer-from-eav-attribute-table-to) （删除与 sales_order_grid 的行）

将“_prepareColumns()”方法复制到您的自定义模块并更改

```
 $this->addColumn('email', array(
        'header'    => Mage::helper('customer')->__('Email'),
        'width'     => '150',
        'index'     => 'email'
        'renderer' = new MageIgniter_MaskEmail_Block_Adminhtml_Renderer_Data()  // added this line
    )); 
```

阅读更多@ [http://www.magentocommerce.com/boards/viewthread/192232/#t239222](http://www.magentocommerce.com/boards/viewthread/192232/#t239222)

创建类：

```
 class MageIgniter_MaskEmail_Block_Adminhtml_Renderer_Data extends Mage_Adminhtml_Block_Widget_Grid_Column_Renderer_Action
 {
    public function render(Varien_Object $row)
     {
         return $this->_getValue($row);
     }

     public function _getValue(Varien_Object $row)
     {
         $val = $row->getData($this->getColumn()->getIndex());  // row value

         $search_filter = base64_decode($this->getRequest()->getParam('filter'));
         // print_r($search_filter) : email=rs%40cs.com&customer_since%5Blocale%5D=en_US
         //read more @ http://inchoo.net/ecommerce/magento/what-is-base64-encoding-and-how-can-we-benefit-from-it/

         // check if $search_filter contain email and equal to the search email
         parse_str($search_filter, $query)
         if(isset($query['email'] && $val == $query['email']){  // or array_key_exist()
            return $val;
         }
         else{
             return 'xxxxxxxx';
         }

     } 
 } 
```

这是 Magento v1.7 的基础

# android - 在Android中显示ProgressBar一段时间

> ID：12691484
> 
> 赞同：9
> 
> 时间：2012-10-02T13:44:51.763
> 
> 标签：android, progress-bar, wait

我必须在我的 Android 应用程序中等待几秒钟，并且我想在此期间显示进度条，我该怎么做？

例如，我尝试了以下代码：

```
 public boolean WaitTask() {

        pDialog = ProgressDialog.show(context,null, "Lädt..",true);
        new Thread() {
        public void run() {
            try{
                // just doing some long operation
                sleep(2000);
             } catch (Exception e) {  }
             pDialog.dismiss();
             }
         }.start();
        return true;
   } 
```

但进度条立即关闭，无需等待两秒钟。我的问题在哪里？

进度条应类似于Android 开发人员在[此](http://developer.android.com/design/building-blocks/progress.html)站点中显示的活动圈。

**更新** 异步任务

```
private class WaitTime extends AsyncTask<Void, Void, Void> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        mDialog.show();
    }
    protected void onPostExecute() {
        mDialog.dismiss();
    }

@Override
protected void onCancelled() {
    mDialog.dismiss();
    super.onCancelled();
}

    @Override
    protected Void doInBackground(Void... params) {
        long delayInMillis = 2000;
        Timer timer = new Timer();
        timer.schedule(new TimerTask() {
            @Override
            public void run() {
                mDialog.dismiss();
            }
        }, delayInMillis);
        return null;
    }
} 
```

我这样称呼它：

```
 mDialog = new ProgressDialog(CreateProject.this);
        mDialog = ProgressDialog.show(context,null, "Lädt..",true);

        WaitTime wait = new WaitTime();
        wait.execute(); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T14:02:51.837

我建议您使用 AsyncTask，然后您可以执行以下操作：

```
 AsyncTask<Void, Void, Void> updateTask = new AsyncTask<Void, Void, Void>(){
        ProgressDialog dialog = new ProgressDialog(MyActivity.this);
        @Override
        protected void onPreExecute() {
            // what to do before background task
            dialog.setTitle("Loading...");
            dialog.setMessage("Please wait.");
            dialog.setIndeterminate(true);
            dialog.setCancelable(false);
            dialog.show();
        }

        @Override
        protected Void doInBackground(Void... params) {
            // do your background operation here
            return null;
        }

        @Override
        protected void onPostExecute(Void result) {
            // what to do when background task is completed
            dialog.dismiss();
        };

        @Override
        protected void onCancelled() {
            dialog.dismiss();
            super.onCancelled();
        }
    };
    updateTask.execute((Void[])null); 
```

如果您想等待某个特定时间，也许您想使用 Timer：

```
 final ProgressDialog dialog = new ProgressDialog(MyActivity.this);
    dialog.setTitle("Loading...");
    dialog.setMessage("Please wait.");
    dialog.setIndeterminate(true);
    dialog.setCancelable(false);
    dialog.show();

    long delayInMillis = 5000;
    Timer timer = new Timer();
    timer.schedule(new TimerTask() {
        @Override
        public void run() {
            dialog.dismiss();
        }
    }, delayInMillis); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T14:00:44.520

错误：`pDialog.dismiss();`应该从 UI 线程调用而不是从新线程调用。

因此您的代码应更改为：

```
pDialog = ProgressDialog.show(context,null, "Lädt..",true);
    new Thread() {
    public void run() {
        try{
            // just doing some long operation
            Thread.sleep(2000);
         } catch (Exception e) {  }
           // handle the exception somehow, or do nothing
         }

         // run code on the UI thread
         mYourActivityContext.runOnUiThread(new Runnable() {

            @Override
            public void run() {
                pDialog.dismiss();
            }
        });

     }.start(); 
```

通常 - 有更好的方法执行后台任务（等待两秒钟什么也不做也是后台任务）并在完成后在主 UI 线程中执行某些操作。例如，您可以使用`AsyncTask`类。最好使用这个 android 内置机制，而不是“原始”线程创建，尽管它也可以工作 - 前提是你能正确处理你的应用程序和活动生命周期。请记住，在您等待的两秒钟内，用户可能会离开您的应用程序。在这种情况下，该`dismiss();`方法将在被破坏的上下文中调用......

我建议您阅读更多内容 - [http://developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# varnish - 清漆一击换传是什么意思？

> ID：12691489
> 
> 赞同：52
> 
> 时间：2012-10-02T13:45:11.827
> 
> 标签：varnish, varnish-vcl

由于 Varnish 版本 3 有一些用于不同操作的对象。

例如，当它必须从后端检索数据时使用 pass。当它在缓存中找到请求内容时使用命中。

但我无法理解“hit-for-pass”的用法。清漆什么时候用？我没有在网上找到任何有用的材料让我清楚。

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2012-10-03T07:32:14.153

制作一个 hit_for_pass 对象以针对后端服务器优化获取过程。

对于普通的缓存未命中，Varnish 会将所有请求相同缓存对象的客户端排队，并向后端发送单个请求。这通常是最快的，让后端处理单个请求，而不是同时处理 n 个请求。

请记住，一些后端会花费大量时间来准备对象；10 秒并不少见。如果这是首页 HTML，并且您有 3000 个请求/秒，那么只发送一个后端请求就很有意义。

当 Varnish 获取对象后发现它无法缓存时，就会出现问题。造成这种情况的原因可能是后端发送“Cache-Control: max-age=0”，或者（更常见的）一个 Set-Cookie 标头。在这种情况下，您有 3,000 到 30,000 个客户端 (3k req/s * 10sec) 在队列中处于空闲状态，并且对于这些客户端中的每一个，必须完成相同的缓慢的一次一个后端请求才能为它们提供服务。这将破坏您的网站响应时间。

所以 Varnish 通过创建一个 hit_for_pass 对象来保存这个请求不能被缓存的决定。

在对同一 URL 的下一次请求中，缓存查找将返回一个 hit_for_pass 对象。这表明可以同时进行多个提取。您的后端可能对此不太满意，但至少 Varnish 不会无缘无故地让客户端排队。

# qt - Qt QMenu 移除阴影

> ID：12691490
> 
> 赞同：7
> 
> 时间：2012-10-02T13:45:17.263
> 
> 标签：qt, qmenu

我有一个带有半透明背景和圆形边缘（边框半径）的 QMenu。不幸的是，Windows 7 为这个菜单绘制了一个阴影，它不适合圆角。它是为普通矩形菜单绘制的阴影。

有没有一种方法可以完全禁用 QMenu 的绘制阴影，或者有一种方法可以使阴影适合圆形边缘？

这是它发生的简约示例：

```
#include <QApplication>
#include <QPushButton>
#include <QMenu>

int main(int argc, char *argv[]) {
    QApplication a(argc, argv);
    QPushButton b("press me");
    QMenu m;
    m.addAction("hello"); m.addAction("world");
    m.setWindowFlags(m.windowFlags() | Qt::FramelessWindowHint);
    m.setAttribute(Qt::WA_TranslucentBackground);
    m.setStyleSheet("background:rgba(255,0,0,50%); border-radius:5px;");
    b.setMenu(&m);
    b.show();
    return a.exec();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-10-02T22:48:53.770

这应该这样做：

```
w.setWindowFlags(w.windowFlags() | Qt::NoDropShadowWindowHint); 
```

# php - 为什么 filename.php.jpg 将作为 PHP 文件工作？

> ID：12691491
> 
> 赞同：7
> 
> 时间：2012-10-02T13:45:18.433
> 
> 标签：php

> **可能重复：**
> [是否可以使用扩展名 file.php.jpg 执行 PHP？](https://stackoverflow.com/questions/8025236/is-it-possible-to-execute-php-with-extension-file-php-jpg)

我不小心将文件上传到我的网站，它被黑了（愚蠢的我）。黑客用上传器上传了一个文件 index.php.jpg，然后简单地用它访问了我的网站（它是一个 shell99 脚本），但我不明白为什么它会起作用。有聪明人能解释一下吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T13:50:55.593

Apache 控制哪些文件扩展名可以和不能执行 PHP。这可以在服务器级别或每个站点级别（例如使用`.htaccess`）进行控制。

默认情况下，`.jpg`扩展不应*允许*PHP 执行。也许文件名是真的`index.jpg.php`，你误读了。但是，如果文件名*真的* `index.php.jpg`是，您需要查看所有可能的位置并锁定您的配置以仅允许`.php`扩展程序执行 PHP。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T13:49:16.077

文件名要么是伪造的，插入了 \x000 来欺骗 httpd，要么`.htaccess`是为了对 jpg 文件强制执行 PHP 而植入的。

# wordpress - WordPress 运行异常缓慢！20 多秒，主持人说不是他们

> ID：12691497
> 
> 赞同：0
> 
> 时间：2012-10-02T13:45:30.983
> 
> 标签：wordpress, pagespeed

我运行了这份报告：[http ://tools.pingdom.com/fpt/#!/EOYhTHcoT/http://woollymammoth.co.uk](http://tools.pingdom.com/fpt/#!/EOYhTHcoT/http://woollymammoth.co.uk)

它的主要 example.com 需要很长时间才能加载其他内容。以前有没有其他人遇到过这个问题？我已经尝试设置 cloudflare，但并没有太大的不同！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:05:46.510

您有数据库连接或查询延迟。（猜测连接）。

原始文件[http://woollymammoth.co.uk/license.txt](http://woollymammoth.co.uk/license.txt)始终加载 < 1 秒。但是任何带有数据库查询的东西都会每隔几个请求就延迟一次，比如 RSS 提要：[http ://woollymammoth.co.uk/feed/](http://woollymammoth.co.uk/feed/)

我只能猜测你在这里有什么样的设置，但现在是解决问题的时候了。在 WP 之外制作一个连接到数据库的简单脚本，并对其计时。

常规故障排除提示：

*   将数据源更改为 IP 地址，而不是 mysql/db 主机名
*   如果 db 在您的控制下运行，请使用 --skip-name-resolve 选项启动它
*   检查以确保您的 mysql 服务器没有记录查询
*   如果这是托管在 Windows 机器上，请确保 mysql 连接没有首先尝试 netbios 名称/连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:57:06.523

从您的网站加载的内容可能超过 2MB。因此，预计首次加载时间会更长。但是，如果您在谷歌页面洞察力上运行您的网站。它获得了相当不错的93分，这实际上很棒。所以没什么好担心的。

[https://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2Fwoollymammoth.co.uk&mobile=false](https://developers.google.com/speed/pagespeed/insights#url=http_3A_2F_2Fwoollymammoth.co.uk&mobile=false)

# wpf - 如何在 MVVM WPF 中刷新 UI

> ID：12691499
> 
> 赞同：9
> 
> 时间：2012-10-02T13:45:34.130
> 
> 标签：wpf, user-interface, mvvm, refresh

我的项目基于 MVVM 模式。

我已经建立了一个显示我的文件系统的树视图。每个文件夹都有一个用于选择当前文件夹的复选框。选择过程需要一些时间，因此在操作运行时，有一个按钮被禁用，并且在操作结束时我正在启用该按钮。

我的问题是，当按钮被“禁用”时，我会立即看到它。但是，当按钮返回启用模式时，我必须执行一些操作（如鼠标单击）才能看到按钮启用。

如何确保在启用按钮后立即更新 UI？

这些是我的按钮：

```
<Button Content="&lt;- Back" Margin="5,0,5,0" Width="80" Height="25"
        IsEnabled="{Binding CanMoveToPreviousPage, UpdateSourceTrigger=PropertyChanged}" 
        Command="{Binding Path=NavigateBackCommand, IsAsync=True}" />

<Button Content="{Binding ButtonNextCaption}" Margin="5,0,5,0" Width="80" Height="25"
        IsEnabled="{Binding CanMoveToNextPage, UpdateSourceTrigger=PropertyChanged}" 
        Command="{Binding Path=NavigateNextCommand, IsAsync=True}" /> 
```

在我的**ViewModel**中，我添加了以下代码：

```
public bool CanMoveToNextPage
{
    get
    {
        return this.CurrentPage != null && this.CurrentPage.CanMoveNext;
    }
    set
    {
        if (CurrentPage != null)
        {
            this.CurrentPage.CanMoveNext = value;
            OnPropertyChanged("CanMoveToNextPage");
        }
    }
}

public bool CanMoveToPreviousPage
{
    get { return 0 < this.CurrentPageIndex && CurrentPage.CanMoveBack; }
    set
    {
        if (CurrentPage != null)
        {
            this.CurrentPage.CanMoveBack = value;
            OnPropertyChanged("CanMoveToPreviousPage");
        }
    }
} 
```

UI 更新发生在我执行鼠标单击或任何击键之后。

这是禁用和启用按钮的操作代码：

```
void bg_RunWorkerCompleted(object sender, System.ComponentModel.RunWorkerCompletedEventArgs e)
{
    DecrementDoneCounter();
    if (ThreadSafeCouner == 0)//means all bg workers are done
    {
        UIlimitation(true);
    }
}

private int ThreadSafeCouner; // check how many bgworkers run
public void IncrementDoneCounter() { Interlocked.Increment(ref ThreadSafeCouner); }
public void DecrementDoneCounter() { Interlocked.Decrement(ref ThreadSafeCouner); }

void bg_DoWork(object sender, System.ComponentModel.DoWorkEventArgs e)
{
    IncrementDoneCounter();
    UIlimitation(false);
    ((bgArguments)e.Argument).SelectedDirectory.CanSelected = false;
    MarkItems(((bgArguments)e.Argument).SelectedDirectory, ((bgArguments)e.Argument).IsSelect);
    ((bgArguments)e.Argument).FreeWorkerAllocation();
    ((bgArguments)e.Argument).SelectedDirectory.CanSelected = true;
}

//this is the enabling action which execute the propeties setters at the upper part of this post
private static void UIlimitation(bool limit)
{
    MainWindowViewModel.Instance.CanMoveToNextPage = limit;
    MainWindowViewModel.Instance.CanMoveToPreviousPage = limit;
} 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T13:48:45.287

您可以调整您的控制 `Binding mode TwoWay`并定义`triggers with PropertyChanged`

```
{Binding ElementName=.., Mode=TwoWay, UpdateSourceTrigger=PropertyChanged} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-03T05:58:33.793

好的，我找到了解决方案。
我尝试了一切都没有成功，最终我找到了这个线程： [Refresh WPF Command](https://stackoverflow.com/questions/783104/refresh-wpf-command)

我用过`CommandManager.InvalidateRequerySuggested()`

及其作品。

谢谢你的帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T14:41:19.537

下面是一个代码示例，说明如何使用 INotifyPropertyChanged 发送消息以更新 UI 的方法设置 ViewModel：

```
public class MyViewModel : INotifyPropertyChanged
{
    /******************************************************/
    /* Property that you have created two-way binding for */
    /******************************************************/
    private double _myProperty
    public double MyProperty
    {
        get { return _myProperty; }
        set
        {
            _myProperty = value;

            OnNotifyPropertyChanged("MyProperty");
        }
    }

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    protected void OnNotifyPropertyChanged(string propertyName)
    {
        if (PropertyChanged != null)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }

    #endregion INotifyPropertyChanged Members
} 
```

# java - Android：绘制位图数组列表会导致黑色背景

> ID：12691500
> 
> 赞同：1
> 
> 时间：2012-10-02T13:45:37.363
> 
> 标签：java, android, graphics

这是我第一次在这里提问，所以我会尽量保持话题。我试图通过创建适当大小的位图对象 ArrayList 并按顺序绘制它们来随机生成背景。顺便说一下，这个实现可以很好地加载单个位图；它只是在列表中磕磕绊绊。

在开始编写代码之前，我想指出，理想情况下，我会通过添加单个像素或图块来制作单个位图，并且确实尝试了一些变体，但它们都会导致黑屏；我开始认为这可能是我如何在画布上绘制的问题。无论如何，这就是我所拥有的：

首先，我生成随机 ArrayList，现在只使用 3 种颜色。我会让它返回列表，但它只是线程内引用线程变量之一的私有方法，所以它并不重要。

```
 private void genMap(Resources res)
    {
        // Load basic tiles.
        Bitmap green = BitmapFactory.decodeResource(res, R.drawable.green);
        Bitmap red = BitmapFactory.decodeResource(res, R.drawable.red);
        Bitmap blue = BitmapFactory.decodeResource(res, R.drawable.blue);

                    // All tiles must be the same size.
        int tile_width = green.getWidth();
        int tile_height = green.getHeight();
        int num_x = mCanvasWidth / tile_width;
        int num_y = mCanvasHeight / tile_height;

        for (int j = 0; j < num_y; j++)
        {
            for (int i = 0; i < num_x; i++)
            {
                double r = Math.random();
                Bitmap tile;
                if (r <= 1/3) {tile = green;}
                else if (r <= 2/3) {tile = red;}
                else {tile = blue;}
                // Create a new Bitmap in order to avoid referencing the old value.
                mBackgroundImages.add(Bitmap.createBitmap(tile));
            }
        }
    } 
```

所以，这就是随机值映射到模式的方式。该方法在线程的构造函数中调用，每次调用 onCreate 时都会依次调用该方法；现在，我只是清除列表并每次制作一个新的随机模式：

```
...
Resources res = context.getResources();
mBackgroundImages = new ArrayList<Bitmap>();
genMap(res);
... 
```

最后是draw方法；它可以通过 BitmapFactory.decodeResources 加载单个位图，但在执行此操作时会显示黑屏：

```
 private void doDraw(Canvas canvas)
    {
        /* Draw the bg.
         * Remember, Canvas objects accumulate.
         * So drawn first = most in the background. */
        if (canvas != null)
        {
            if (mBackgroundImages.size() > 0)
            {
                int tile_width = mBackgroundImages.get(0).getWidth();
                int tile_height = mBackgroundImages.get(0).getHeight();
                for (int y = 0; y < mCanvasHeight / tile_height; y++)
                {
                    for(int x = 0; x < mCanvasWidth / tile_width; x++)
                    {
                         // Draw the Bitmap at the correct position in the list; Y * XWIDTH + X, at pos X * XWIDTH, Y * YWIDTH.
                         canvas.drawBitmap(mBackgroundImages.get((x + y * (mCanvasWidth/tile_width))), x * tile_width, y * tile_height, null);
                    }
                }
            }
        }
    } 
```

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:23:29.437

您是否仔细检查了以下行的优先顺序？

```
((x + y * (mCanvasWidth/tile_width))) 
```

不过有趣的问题是：你画的是纯色吗？我还要看看这是否真的在制作位图：

```
mBackgroundImages.add(Bitmap.createBitmap(tile)); 
```

您实际上可能只保留引用而不是创建大量位图，但这可能会在以后出现

# sql-server-2008 - 将数据与 sql 列进行比较

> ID：12691504
> 
> 赞同：0
> 
> 时间：2012-10-02T13:45:43.727
> 
> 标签：sql-server-2008, c#-4.0

我收集了以下数字：11111、12345、12346 存储在 c# 代码的列表中。我需要将此列表与与此类似的数字的 sql 数据库列进行比较，并找出是否存在匹配的数字。以下是我正在做的事情：

```
foreach (number in numbers)
{
    //get column data through sql reader and iterate through it:
    foreach(column in columnData)
    {
       if(number == column)
       {
         // do something
       }
} 
```

我的问题是这种正确的方法吗？还是有更好的方法来做到这一点？看起来这需要大量处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:46:41.680

我会这样的..

```
var matches =  columnData.Where(z=> numbers.Contains(z=>z.columnData)).ToList();

or

var matches = columnData.Select(z=> z.columnData).Intersect(numbers); 
```

# sql - 整合oracle和sql server之间的数据

> ID：12691505
> 
> 赞同：1
> 
> 时间：2012-10-02T13:45:44.970
> 
> 标签：sql, oracle, sql-server-2012

我有一个非常大的 oracle 数据库。

我也有一个 sql server 数据库。我想将 oracle 数据库中的数据集成到 sql server 数据库中，也是相反的方式。这不需要是实时的，但可以在一天中可能在定义的时间间隔在后台工作。

设置的过程是什么？如何实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:39:58.540

您应该查看 Microsoft SSIS： [http ://en.wikipedia.org/wiki/SQL_Server_Integration_Services](http://en.wikipedia.org/wiki/SQL_Server_Integration_Services)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T10:04:22.137

一种可能性是使用 Oracle Golden Gate 软件。它确实要花钱，但它支持许多不同数据库架构之间的实时数据移动，包括您特别关心的那些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-22T17:44:44.847

创建数据库链接是最好的选择。使用 DB 链接，数据库可以直接相互通信。无需额外的软件或编程，这是 Oracle 和 SQL Server 中的标准功能，非常可靠。

# directx - Direct3D 对于大图像的缩放和平移是否可行？

> ID：12691506
> 
> 赞同：0
> 
> 时间：2012-10-02T13:45:53.353
> 
> 标签：directx, direct3d

我想为大图像（最大 2000 x 8000 像素）制作一个图像查看器，具有非常灵敏的缩放和平移，比如 30 FPS 或更高。我想出的一个选择是将图像创建为一种固定广告牌的 3D 场景，然后将相机向前/向后移动以进行缩放，并向上/向下/向左/向右移动以平移。

这个基本想法对我来说似乎是合理的，但我没有使用 3D 图形的经验。我是否缺少一些基本的东西会使我的想法变得困难或不可能？什么可能会导致问题或难以实施？此设计的哪一部分会限制最大图像尺寸？关于我可能达到的帧速率有什么猜测吗？

我也欢迎任何关于如何为 Direct3D 新手处理此任务的指导或建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:38:37.500

这对我来说似乎很可行，30 fps 甚至看起来很低，你当然可以达到稳定的 60（最低）

一张分辨率为 8k*2k 的图像大约需要 100 兆 VRAM（带有 mipmap），所以对于今天的显卡来说这不是什么大问题，如果您需要同时加载多个图像，您当然会面临挑战。

DirectX 11 支持 16k*16k 大小的纹理，因此您应该对最大大小进行排序。

如果您只想将图像显示为平面，您甚至不需要任何 3d 转换，2d 缩放/转换就可以了。

# .htaccess - htaccess 并将一个 url 转发到另一个

> ID：12691508
> 
> 赞同：0
> 
> 时间：2012-10-02T13:45:54.363
> 
> 标签：.htaccess

我有这个重写代码：

```
RewriteCond %{HTTP_USER_AGENT} ^.*iPhone.*$
RewriteRule ^(.*)$ http://stagingsite.com/site/mobile [R=301]
RewriteRule ^faq/$ /mobile/faq 
```

第一行工作正常。如果用户使用的是 iphone，则重定向到显示索引页面的移动目录。

我还希望用户访问：

[http://stagingsite.com/site/faq](http://stagingsite.com/site/faq)

如果他们在 iphone 上，则转发到[http://stagingsite.com/site/mobile/faq](http://stagingsite.com/site/mobile/faq)但上面的最后一行代码似乎没有实现这一点。

有什么想法我错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T17:12:24.737

`RewriteCond` directives only get applied to the *immediately following `RewriteRule`. So you have the condition that checks for **iPhone**, but that only gets applied to the redirect rule, and not the faq rule. You have to duplicate it:

```
RewriteCond %{HTTP_USER_AGENT} ^.*iPhone.*$
RewriteRule ^(.*)$ http://stagingsite.com/site/mobile [R=301,L]

RewriteCond %{HTTP_USER_AGENT} ^.*iPhone.*$
RewriteRule ^faq/?$ /site/mobile/faq [L] 
```

You should also include `L` flags so the 2 rules don't accidentally interfere with each other. And your regex and target needs to be updated to accept an optional trailing slash and the subdirectory.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:58:41.580

在移动之前取出斜线作为

```
RewriteRule ^faq/$ mobile/faq 
```

作品？

# regex - 如何列出名称中带有数字的文件并检索数字？

> ID：12691511
> 
> 赞同：0
> 
> 时间：2012-10-02T13:46:12.030
> 
> 标签：regex, bash, grep

我对正则表达式很陌生，因此我确实认为这是一个非常简单的问题，而且肯定已经被问过好几次了，但不幸的是我找不到这些答案。

给定一个目录，我需要其名称遵循模式“nw=[number].a=[number]”的所有子目录的列表，并且对于每个目录，我需要检索这些数字并根据这些数字做一些事情. 其中一些目录是 nw=82.a=40, nw=100.a=9, ecc。

我的猜测是

```
#! /bin/bash

cd $mydir
for dir in `ls | grep nw=[:digit:]+.a=[:digit:]`: do
    retrieve the numbers
    a few things
done 
```

为什么它不起作用，我如何检索数字？

提前谢谢你，费迪南多

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:53:49.537

对 grep 命令的一些更正：

```
grep -E 'nw=[[:digit:]]+\.a=[[:digit:]]+' 
```

1.  使用“-E”标志，以便您可以使用扩展的正则表达式，例如，其中包括“+”运算符。
2.  使用双方括号
3.  转义句点，否则将用作匹配任何字符的运算符
4.  最后缺少一个“+”，这不是完全必要的，因为 grep 将匹配更一般的情况，但它可能更好地代表您的路径名
5.  将正则表达式放在引号之间可能是一种好习惯（在这种情况下，单引号就可以了）

希望这会有所帮助=)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:03:45.810

```
perl -e '@a=`ls`;m/nw=(\d+)\.a=(\d+)(?{print"$1\t$2\n"})/ for@a' 
```

享受。

调用终端的 ls 命令并将列表存储在数组@a 中。

```
@a=`ls`; 
```

寻找匹配

```
m/ 
```

nw=(我在 $1 中捕获的数字).a=(我在 $2 中捕获的数字)

```
nw=(\d+)\.a=(\d+) 
```

从模式中开始评估代码

```
(?{ 
```

打印第一个数字，制表符，第二个数字，换行符

```
print"$1\t$2\n"}) 
```

结束匹配模式组

```
/ 
```

使用数组 @a 中每个文件名（仍附加换行符）的嵌入代码执行此匹配尝试

```
for@a 
```

是的，那很神秘。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T16:15:12.363

不要解析`ls`。改用`find`：

```
find . -maxdepth 1 -type d -regex '.*nw=[0-9]+\.a=[0-9]+.*' | while IFS= read -r dir
do
    echo "Found directory: $dir"
    if [[ "$dir" =~ nw=([0-9]+)\.a=([0-9]+) ]]
    then
        echo "numbers are ${BASH_REMATCH[1]} and ${BASH_REMATCH[2]}"
    fi
done 
```

# linq - 使用 linq 匹配多个字段时优先考虑字段

> ID：12691512
> 
> 赞同：2
> 
> 时间：2012-10-02T13:46:15.663
> 
> 标签：linq, search, entity-framework-4

我有一个数据库，其中包含名字姓氏街道和搜索字段等字段。与搜索字段匹配的任何内容都将在我的搜索子集中，这是 linq 逻辑：

```
if (!String.IsNullOrEmpty(searchString))
{
  folders = folders.Where(p => p.SearchField.ToLower().Contains(searchString.ToLower()));
} 
```

我可以按姓名或名字或其他方式订购它。

现在我想展示结果，以便它优先考虑与我的搜索词相关的名称字段。

例如，如果我寻找施密德，我想首先显示姓氏与施密德匹配的人，然后是名字，然后是街道……等等

任何想法 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:41:34.953

我希望我理解正确

```
var res = 
    folders
        .Where(item => item.FirstName == name)
        .Union(folders.Where(item => item.LastName == name))
        /* Add more Union-Where statements */
        ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:52:19.390

我认为最好的方法是先获取匹配的对象，然后在内存中继续：

```
var lower = searchString.ToLower();
folders = folders
          .Where(p => p.SearchField.ToLower().Contains(lower))
          .ToArray();
folders = folders
            .OrderBy(f => !f.LastName.Contains(lower))
            .ThenBy(f => !f.FistName.Contains(lower))
            .ThenBy(f => !f. ... 
```

如果您对查询执行所有操作，`OrderBy`则`IQueryable`可能会爆炸，而初始过滤器是使用数据库引擎最重要的事情。

请注意，您不能总是先显示匹配的项目，`lower`然后`LastName`再*显示*匹配的项目`FistName`等，因为可能存在两者都匹配的项目。我认为您不想复制项目，是吗？

# c# - 将流存储在缓存中

> ID：12691517
> 
> 赞同：5
> 
> 时间：2012-10-02T13:46:19.880
> 
> 标签：c#, caching

我想缓存从 HttpWebRequest 获得的响应。我需要 ResponseStream 和标头。在创建请求时使用`HttpRequestCachePolicy(HttpCacheAgeControl.MaxAge, TimeSpan.FromDays(1))`似乎不起作用（由于某种原因，IsFromCache 永远不会是真的），而且我有点害怕手动缓存整个 HttpWebResponse，因为它包含一个压缩数据流，我有一种不好的感觉在 ASP.NET 缓存中存储流。

响应被映射到这样的对象（简化）：

```
public readonly Stream Response;
public readonly string Etag;

private MyObject(Stream response, string etag)
{
    this.Response = response;
    this.Etag = etag;
} 
```

由于该对象还包含响应流，我在这里面临同样的问题。

我如何缓存这个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T13:50:39.633

A`Stream`是*管道*，不是*桶*。如果需要存储，必须先获取实际内容。例如，您可以将其全部读入`byte[]`. 例如：

```
using(var ms = new MemoryStream()) {
    response.CopyTo(ms);
    byte[] payload = ms.ToArray();
} 
```

您可以存储`byte[]`琐碎。然后，如果您想要`Stream`稍后，您可以使用`new MemoryStream(payload)`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:50:25.740

您能否创建一个自定义类，其中包含一个用于存储数据的字节数组和另一个带有 HttpWebRequest.Headers 的字段作为标题？然后缓存它。

# php - jQuery UI 自动完成获取有建议但不显示它们

> ID：12691518
> 
> 赞同：1
> 
> 时间：2012-10-02T13:46:23.347
> 
> 标签：php, jquery-ui, autocomplete

我的页面中有一个 jQuery 自动完成脚本，如果我在它工作的字段中键入，并且在 3 个字符后按照要求，包含预期数量的建议的下拉菜单会弹出......有点......因为没有下拉菜单中的文本。

如果我将鼠标悬停在下拉菜单上，就好像我正在选择其中一个建议一样，一个窄条会为建议所在的每一行显示一个突出显示，但选择其中一个空突出显示会清空该字段。这并不奇怪。我不太了解返回数据的处理。我在这些论坛的其他帖子中的自动完成示例中看到了非常简单和复杂的代码，但是使用我认为我理解的那些通常会破坏它到我根本没有得到下拉菜单的地步。因此，我毫不掩饰地寻找有人为我提供有效的代码，以便我可以将其分开并弄清楚它是如何工作的。

我的基本 JS 代码是：

```
 $("#tf_txt_CLIENTNAME").autocomplete({
        source: "search.php",
        minLength: 3,//search after three characters
        dataType: 'json',
        select: function(event,ui){

            //do domething

        } 
```

这是我做不到的地方。正如我所说，我在该空间中尝试了太多代码变体，无法在此提及，所有这些都完全破坏了它。

search.php 为“bra”的输入生成以下 JSON 输出：

```
[{"txt_CLIENTNAME":"Braedon"},{"txt_CLIENTNAME":"Bradly"}] 
```

来自以下 PHP 源（从另一个 Web 源借用和修改）：

```
<?php
require_once 'includes/dbiconnect.php';
require_once 'includes/sqlfunctions.php';

$term = trim(strip_tags(addslashes($_GET['term']))); //retrieve the search term that autocomplete sends

$qstring = "SELECT `txt_CLIENTNAME` FROM `tbl_client_details` WHERE `txt_CLIENTNAME` LIKE '%".$term."%'";
$result = mysqli_query($db_link,$qstring); //query the database for entries containing the term

while ($row = mysqli_fetch_assoc($result)) {//loop through the retrieved values
        $row['txt_CLIENTNAME']=htmlentities(stripslashes($row['txt_CLIENTNAME']));
        $row_set[] = $row; //build an array
}
echo json_encode($row_set); //format the array into json data
?> 
```

我只是希望它显示它找到的内容并将我选择的内容插入文本字段的值中。**然后，我可以使用由该字段的onchange**事件触发的 $.POST 更新我想要填充的其他字段（公司、电话号码和电子邮件）（我确信有更好的方法来做到这一点，但我了解如何暂时这样做）。

我正在使用 jQuery 1.7.2 和 jQuery UI 1.8.22。我也加载了最新的 jquery 工具箱，但没有选项卡组件，但删除它并没有什么区别。

提前致谢，

布雷登

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:59:01.180

根据 Jquery UI 指南，

> 您的 JSON 需要包含标签或值（或两者）

你需要改变你的json如下

```
while ($row = mysqli_fetch_assoc($result)) {//loop through the retrieved values
        $row['txt_CLIENTNAME']=htmlentities(stripslashes($row['txt_CLIENTNAME']));
        $row_set[] = array('label'=>'txt_CLIENTNAME','value'=>$row['txt_CLIENTNAME']); //build an array
} 
```

# java - 在 SilkTest 中识别窗口的替代方法？

> ID：12691519
> 
> 赞同：1
> 
> 时间：2012-10-02T13:46:33.150
> 
> 标签：java, silktest

使用 SilkTest，我使用以下技术识别 Putty 窗口：`Window puttyWindow = desktop.<Window>find("//Window[@caption='*PuTTY*']");`

有没有更好的方法来实现这一点？也许得到一个 ID 号来识别窗口？或者这是最好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:13:53.707

对于顶级窗口，通常标题是要走的路。根据您正在测试的应用程序的技术，可能还有更好的属性可用（例如 Windows 窗体中的自动化 ID），但这些通常不适用于窗口，只有下面的控件。

附带说明一下，如果要将结果分配给该类型的变量，则可以跳过类型参数，如下所示

```
Window puttyWindow = desktop.find("/Window[@caption='*PuTTY*']"); 
```

**注意：**我在 Silk Test 团队为 Borland 工作，因此在这方面表达的任何意见都有些偏见。

# phpunit - PHPUnit 扩展 Selenium 2 (webdriver) 和多个浏览器

> ID：12691524
> 
> 赞同：5
> 
> 时间：2012-10-02T13:47:13.277
> 
> 标签：phpunit, selenium-rc, selenium-webdriver

我用 PHPUnit 扩展写了一个测试用例`Selenium2TestCase`。它确实工作得很好，但我不知道make如何在各种浏览器上自动运行这个测试。

有一种方法`setBrowser()`，它只在`setUp()`方法中起作用。我想过这样的事情：

```
/**
 * @dataProvider browsers
 */
public function loginTest($browser) {
    $this->setBrowser($browser);
    // tests...
} 
```

但我不工作。尝试运行默认浏览器（可能我对 Safari 有点乱，上次使用的是 firefox）

```
RuntimeException: Safari could not be found in the path!
Please add the directory containing ''Safari'' to your PATH environment
variable, or explicitly specify a path to Safari like this:
*safari /blah/blah/Safari 
```

PS。`SeleniumTestCase`（不基于 webdriver）提供了一个 xml 配置，我们可以在其中指定浏览器。`Selenium2TestCase`不支持。

欢迎任何建议。谢谢。马尔钦

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T16:25:42.860

像这样的东西

```
 class WebTestCase extends \application\components\test\ExWebTestCase
    {
      // default params
      public $parameters = array(
          'host'                          => 'localhost',
          'port'                          => 4444,
          'seleniumServerRequestsTimeout' => 30000,
          'timeout'                       => 30000,
      );

      // list of browsers with per-browserconfig
      public static $browsers = array(
          array(
              'browserName' => 'firefox',
          ),
          array(
              'browserName' => 'chrome',
          ),
          array(
              'browserName' => 'safari',
          ),
          array(
              'browserName' => 'internet explorer',
              'host' => 'some IP of VirtualBox with IE'
          )
      );
  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T16:28:06.303

对此的修复实际上取决于您的数据文件的外观。如果您可以发布，我们可以为您提供更多帮助。

目前我假设，因为 phpunit 本质上是一个一次性的单元测试框架，您不会尝试同时运行多个浏览器，而只是想保留更改浏览器的选项，因为您认为合适.

你是对的，你应该在 setUp 中使用 setBrowser。当 PHPUnit 执行时，总是先运行 setUp，最后运行 tearDown()。这里的一个好的做法是制作自己的自定义单元测试用例类，您可以在其中自定义这些方法。

```
class customUnitTest extends PHPUnit_Extensions_Selenium2TestCase {
   public $browser = "firefox";
   public function setUp() {
      $this->setBrowser("*".$browser);
   }
} 
```

现在，当您编写测试时，扩展您的个人测试类并相应地设置浏览器

```
class newTest extends customUnitTest {
   $this->browser = "safari";
   public function testBlah {
      blah blah...
   }
} 
```

setUp 将在执行时运行，并将拉入浏览器变量。默认情况下，您将获得 firefox，但如果某些测试在其他浏览器上进行了更合适的测试，则您可以选择该选项。

如果您希望能够同时更改所有测试中的所有浏览器，您应该考虑根据环境变量分配浏览器值。

```
class customUnitTest extends PHPUnit_Extensions_Selenium2TestCase {
   try {
      public $browser = getenv("SELENIUM_BROWSER");
   } catch (Exception $e) {
      public $browser = "firefox";
   }
   public function setUp() {
      $this->setBrowser("*".$browser);
   }
} 
```

使用此设置，我们可以通过更改环境变量 SELENIUM_BROWSER 来为每个没有在其内部硬编码浏览器的测试更改浏览器。这样我们就可以在不同的服务器上使用不同的默认浏览器运行相同的代码，而无需重新编写任何东西。

请注意，多重继承不是好的做法。如果您没有正确地确定方法/变量的范围，它可能会导致脆弱的代码甚至安全威胁。但是在这种情况下它很有用，因为我们可以随意定义 PHPUnit 框架方法，并且我们在测试中获得了所有基本的 selenium 方法。所以要运行一个默认的 selenium 方法，我们只需编写

```
$this->open("www.google.com"); 
```

这是一种与将 selenium 分配给对象的一般方法大不相同的方法，因为您编写的测试是 selenium 对象，但它似乎更适合 php，尤其是对于这个用例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-21T08:29:01.323

要在多个浏览器中运行，请检查此链接：

[http://phpunit.de/manual/current/en/selenium.html](http://phpunit.de/manual/current/en/selenium.html) 示例 17.4(phpunit 3.7) 如果您在 localhost 中运行测试用例，请使用 'host' =>'localhost'。不需要 setBrowser() 函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-09T15:06:26.947

应该使用 $browsers 属性来定义多个浏览器，如上所述。

# java - 我的 ExecutorService 代码有什么问题吗？

> ID：12691526
> 
> 赞同：0
> 
> 时间：2012-10-02T13:47:15.283
> 
> 标签：java, multithreading, executorservice

所以我编写了一段代码，它将通过任务处理程序提交一组对象，我有一个实例出现在程序崩溃并且没有正确关闭的地方......这段代码会做我认为它应该做的事情吗?

在我看来，以下代码应该获取一个对象，将其传递给处理程序，然后等待最多 30 秒，如果该线程尚未完成，则将其杀死。正确的？

```
 //Iterate through the array to submit them into individual running threads.
    ExecutorService threadPool = Executors.newFixedThreadPool(12);
    List<Future<?>> taskList = new ArrayList<Future<?>>();
    for (int i = 0; i < objectArray.length; i++) {
        Future<?> task = threadPool.submit(new ThreadHandler(objectArray[i], i));
        taskList.add(task);
        Thread.sleep(500);
    }

    //Event handler to kill any threads that are running for more than 30 seconds (most threads should only need .25 - 1 second to complete.
    for(Future future : taskList){
        try{
            future.get(30, TimeUnit.SECONDS);
        }catch(CancellationException cx){ System.err.println("Cancellation Exception: "); cx.printStackTrace();
        }catch(ExecutionException ex){ System.err.println("Execution Exception: ");ex.printStackTrace();
        }catch(InterruptedException ix){ System.err.println("Interrupted Exception: ");ix.printStackTrace();
        }
    }
    threadPool.shutdown(); // SHUT. DOWN. EVERYTHING. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:51:23.757

> 程序崩溃并且没有正确关闭

从评论看来，程序*挂起*而不是崩溃。请使用正确的术语来描述未来的问题。似乎某种远程 Web 请求没有完成。如果可能，请确保在所有 http-client 和其他连接上设置 IO 超时。 除非它使用 NIO 可中断通道，否则`thread.interrupt()`很可能*不会停止 Web 请求。*

例如：

```
HttpClientParams params = new HttpClientParams();
params.setSoTimeout(socketTimeoutMillis);
HttpClient httpClient = new HttpClient(params); 
```

> 在我看来，以下代码应该获取一个对象，将其传递给处理程序，然后等待最多 30 秒，如果该线程尚未完成，则将其终止。正确的？

您的代码并没有完全做到这一点。

*   您应该`threadPool.shutdown()`在向它提交最后一个任务后立即调用。线程池停止接受新任务，但提交的任务继续运行。
*   如果你想“杀死”任何已经运行超过 30 秒的任务，你应该使用`threadPool.shutdownNow()`which 实际上会中断仍在`threadPool`. 您还可以`future.cancel()`在超时时按照其他人的建议调用各个任务`get()`。
*   请注意，要使中断正常工作，您`ThreadHandler`必须进行检查`Thread.currentThread().isInterrupted()`才能看到中断。中断还会导致 sleep、wait 和其他方法抛出`InterruptedException`. 有关更多详细信息，请参阅[我的答案](https://stackoverflow.com/questions/12060279/is-it-possible-to-interrupt-a-specific-thread-of-an-executorservice/12060317#12060317)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:50:46.073

`TimeoutException`如果工作未在 30 秒内完成，它将抛出。您需要使用[Future.cancel()](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html#cancel%28boolean%29)来取消线程。它将中断以 Future 为代表的正在运行的线程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T13:55:12.087

```
//Event handler to kill any threads that are running for more than 
//30 seconds (most threads should only need .25 - 1 second to complete. 
```

不，不会，您只是不再等待他们完成。用来永远`cancel`杀死它：

```
for(Future future : taskList){
    try{
        future.get(30, TimeUnit.SECONDS);
    }catch(TimeoutException ex) {
        future.cancel(true);
    }
} 
```

此外，您应该确保执行程序在调用后完成`shutdown`：

```
threadPool.shutdown();
threadPool.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS); 
```

# c# - 设计器中未显示表单上的控件

> ID：12691532
> 
> 赞同：3
> 
> 时间：2012-10-02T13:47:27.003
> 
> 标签：c#, winforms, datagrid, textbox, design-view

我正在开发一个 WinForms 项目，并且我有一个表单，其中有一个 DataGrid、一个 TextBox 和 2 个按钮控件（btnNew 和 btnSearch）。btnSearch 的单击事件应该在 DataGrid 上执行搜索。

我删除了搜索按钮的事件处理程序并保存了我的工作。现在看来，所有其他控件都已被删除，并且表单恢复到默认状态。该应用程序在运行时运行良好，但有一些错误。我已解决该错误，但设计器视图仍处于默认状态。如何恢复表单的设计视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:41:40.177

我之前遇到过这样的错误，只需关闭所有表单的文件（代码视图 + 设计视图）重新打开代码视图，然后 Shift-F7 重新加载设计视图即可修复它。

如果这不起作用，则修复您在设计器视图中提到的错误可能会导致某些事情失控。尝试将 YourForm.Designer.cs 文件中的结构与新表单进行比较，以查看是否进行了无意的编辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-31T22:25:46.183

我遇到了你的问题并以这种方式解决了它：

只需使用另一个名称（NewForm.cs）制作另一个***表单，然后从******YourFirstForm.designer.cs复制******InitializeComponent()***内容并将其粘贴到 ***NewForm.designer.cs*** ***InitializeComponent()***函数中。但是在复制和粘贴函数内容时要小心，将所有***YourFirstForm***关键字更改为***NewForm***。最后删除 YourFirstForm 并使用您的 NewForm....

 **** * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-11T10:58:21.510

在属性窗口中选择控件。

1.  右击表格空白处，
2.  点击剪切
3.  右键单击/然后粘贴到表单控件中某处的单元格中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-01T05:57:52.753

我在 Visual Studio 2017 中遇到了您的问题并以这种方式解决了它：-通过属性选择控件-查看位置是--更改位置-将控件拖动到另一个位置

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-20T12:35:38.977

1.  确保删除所有与表单相关的错误并且您的代码编译成功。
2.  如果`Form`已从现有项目中复制，请确保`Form.Designer.cs`并且`Form.resx`在同一父级下`Form.cs`且不分开。检查解决方案资源管理器中的表单树。如果它们不在同一个 tee 下，请在项目中再次加载`designer.cs`and`.resx`文件。

[![Form.resx 和 form.designer.cs 在与 form.cs 相同的树下](../Images/d32d668eae447b967c0713074bc698e9.png)](https://i.stack.imgur.com/7D334.png)***

# extjs - 如何从 ExtJs 中的面板获取 html 内容

> ID：12691538
> 
> 赞同：0
> 
> 时间：2012-10-02T13:47:55.860
> 
> 标签：extjs, extjs4.1

我是 ExtJs 的新手。我在获取面板 html 内容的面板中遇到了问题。

```
xtype : 'panel',
id : 'first_block',
html : '<p>Hi this is belongs to first block.</p>',
listeners : {
    render : function(c) {
        c.body.on('click', function() {
            alert('' + this.id);
            alert(Ext.getCmp('first_block').items.getAt(0).getValue());
        });
} 
```

我没有得到 html 内容，但我得到了像“first_block-body”这样的 id。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T19:18:49.790

该`html`属性定义了组件内容中所需的 HTML，在本例中为`Ext.Panel`.

`Ext.Panel`s 创建几层`div`s 以提供诸如页眉、页脚、工具栏等内容。

如果您想要的只是`div`带有一些内容的 a，那么您希望使用`Ext.Component`. 组件没有`body`，因此您的代码中发生了一些变化。

```
xtype : 'component',
id : 'first_block',
html : '<p>Hi this is belongs to first block.</p>',
listeners : {
    render : function(c) {
        c.on('click', function() {
            alert('' + this.id);
            alert(this.el.dom.innerHTML);
        }, this);
} 
```

请注意，我在您的调用中添加了第三个参数`on`，它指定`this`了函数调用的范围。我还编辑了您的警报以打印出元素的 innerHTML，假设您正在尝试这样做。

**更新：**

如果你打算在布局中使用这个组件，它可能需要能够设置它`height`，`width`这意味着它需要是类型`box`才能成为`Ext.BoxComponent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-11T06:55:42.847

Ext.getElementById('yourId').innerHTML

# database - 使用两个不同的列表在 Excel 中添加两列

> ID：12691540
> 
> 赞同：1
> 
> 时间：2012-10-02T13:47:57.800
> 
> 标签：database, arrays, excel

这是我第一次使用这个网站，但我的问题是；我在 A 列中有一个数字列表，在 B 列中有值。然后我在 C 列中有一个更长的列表，在 D 列中有值。C 列在 A 列中有许多数字。

我要做的是根据 A 列和 C 列中匹配的数字将 B 列和 D 列加在一起。

例如：

A栏 1234/ 1567/ 2234

B 列（这些是 A 列的值） 1,245/ 5,432 2,767

C 列（这些值的数字与 A 列相似，但不同） 2234 1787 2902

D 列（这些是 C 列的值） 2,345 5,675 1,459

我想做的：站点编号#2234（单元格A3和C1）= 2,767（B3）+ 2,345（D1）= 5112

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T14:00:06.957

手动进行，使用Vlookup和sum函数，这是一种简单易行的方法。

1.  **将A**列和**C**列列表复制到新的单列**F**中并删除重复项。
2.  **在“G2”**单元格中添加**=vlookup(f2, A:B, 2,0)**公式，假设第一行是标题。
***   **在“H2”**单元格中添加**=vlookup(f2, C:D, 2,0)**公式，假设第一行是标题。***   假设第一行是标题，则在单元格**“I2”**中添加**=sum(F2:G2) 。*****   拖动或复制公式单元格直到列表结束。******

 ******步骤 1 可能会被忽略，因为如果 List(item)**列 A**和**列 C**中都存在，它就可以工作。但有必要将一个列表复制到**A**列或**C**列 到**F 列**。

Atlast 将过滤器应用于**I**列并取消选择**#N/A**。******

# c# - 你调用的对象是空的。- 控件集合

> ID：12691543
> 
> 赞同：2
> 
> 时间：2012-10-02T13:48:12.590
> 
> 标签：c#, asp.net, razor, textbox, webmatrix

我是 Asp.net 和网站建设的新手，但我从 Webmatrix 网页开始，实际上我的网站取得了很大进展。但我现在陷入了一段剃须刀代码。我收到错误：对象引用未设置为对象的实例。在线：foreach（Page.Controls 中的控件 c1）

```
@{
    var db = Database.Open("DOM Coins");
    var codigo_campo_ID_unico=0;
    var valor_BC=0;

    if(IsPost){

        foreach(Control c1 in Page.Controls){
            foreach(Control c in c1.Controls){
            if (c.GetType().ToString() == "System.Web.UI.WebControls.TextBox"){
                if (c.ID=="BC_8"){
                   if (c.ID.Substring(0,2)=="BC"){
                      codigo_campo_ID_unico=int.Parse(c.ID.Substring(3,c.ID.Length-3));
                      valor_BC=int.Parse(Request[c.ID]);

                       db.Execute("UPDATE Coleccao SET Quantidade_BC=@valor_BC WHERE Id=@codigo_campo_ID_unico");
                   }
                }
            }
            }
        }
    }

} 
```

我想这样做的原因是因为我正在动态地创建文本框，每个文本框都有不同的 ID，我想遍历所有文本框并将数据插入数据库。

任何帮助将不胜感激。

在此先感谢，迪尼斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:40:26.573

在我看来，您使用的是 asp.net 网页，而不是 MVC，对吗？你想渲染：

```
<input type="text" id="xxxx" /> 
```

作为标记，不直接添加元素。然后，在此之上，通过查询表单集合检查输入的 ID 的响应：

```
@{
   var ids = Request.Form.Keys.Where(i => i.StartsWith("BC"));
   //can process values here and store in dictionary, or process at render time
}

//Rerender textboxes - would have to base on ID's posted, or query again from DB 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T16:28:44.783

下面的代码创建了一个包含可变数量文本字段的表单，并读取它们的内容并将其存储到一个列表中。

```
@{
    var num = 3; // number of text fields to create
    List<string> nText = new List<string>();
    if (IsPost)
    {
        for (int i = 0; i < num; i++)
        {
            var name = "txt" + i.ToString();
            nText.Add(Request.Form[name]);
        }
    }
}

<!DOCTYPE html>

<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title></title>
    </head>
    <body>
        <form method="post">
            @for (int i = 0; i < num; i++)
            {
                var name = "txt" + i.ToString();
                <p>@name
                <input type="text" name="@name" />
                </p>
            }
            <input type="submit" />
        </form>
    </body>
</html> 
```

通过小的更改，您可以将文本字段值插入到表记录中。

# sql - 使用 SQL 排除记录

> ID：12691545
> 
> 赞同：2
> 
> 时间：2012-10-02T13:48:15.987
> 
> 标签：sql, ms-access

所以我有一个有 10 条记录的表。

```
SELECT * FROM Komponens WHERE fkod = "SO" 
```

它给了我一张大约有 5 条记录的表格。但我想要没有那 5 条记录的结果。

例如：

```
fkod   kkod
SU     AA
SU     AC
SA     AB
CI     AC
CI     AA 
```

**fkod**是香料的名称（SU - 糖，SA - 盐，CI - 肉桂），**kkod**是香料混合物的名称。我没有糖了，我想展示我*可以*制作的混合物，因为它们不需要糖（在这种情况下只是`SA`- `AB`）。

如果我使用`SELECT * FROM Komponens WHERE fkod != "SU"`，我会得到 AB、AC 和 AA。

如何在 SQL 中解决它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:49:36.767

```
SELECT * FROM Komponens WHERE (fkod <>"SO") or (fkod is null) 
```

鉴于添加的解释，acatt 的答案是正确的，用 fkod = SU 识别 kkod，然后用 kkod 在该集合之外识别行。

我能想到的编写 SQL 的唯一其他方法是：

```
SELECT k.* 
FROM Komponens k left outer join
(select kkod from Komponens WHERE fkod = "SU" group by kkod) l
on k.kkod   = l.kkod   
where l.kkod is null 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:49:49.050

修改以使用新逻辑。请试试这个：

```
SELECT * 
FROM Komponens
WHERE kkod NOT IN (
    SELECT kkod
    FROM Komponens
    WHERE fkod = "SU"
) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:14:25.283

我不确定这是否适用于 Access 但

```
SELECT * FROM Komponens WHERE fkod = "SU"
SELECT * FROM Komponens WHERE fkod != "SU" 
```

给你加糖和不加糖的，所以...

```
SELECT * FROM Komponens WHERE fkod != "SU" 
AND kkod NOT IN (SELECT * FROM Komponens WHERE fkod = "SU") 
```

我没有测试过它，但它应该让你在正确的路线上。

祝你好运

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T14:14:31.297

您是否有一张包含每种混合物一条记录的表格？这似乎从您的数据库中丢失。尽管如此，您仍然可以解决您的问题：

```
 SELECT * FROM Komponens K1 WHERE NOT EXISTS 
    (SELECT * FROM Komponens K2 WHERE K2.kkod = K1.kkod AND K2.fkod = 'SA') 
```

或者

```
 SELECT * FROM Komponens K1 WHERE kkod NOT IN 
     (SELECT kkod FROM Komponens WHERE fkod = 'SA') 
```

这些将为您提供您可以在不加糖的情况下制作的混合物的混合物和所有香料成分。如果您只想要混合物列表，每个混合物没有多行，请更改`SELECT *`为`SELECT DISTINCT kkod`.

# html - 活动提要插件未呈现

> ID：12691546
> 
> 赞同：0
> 
> 时间：2012-10-02T13:48:19.390
> 
> 标签：html, facebook-javascript-sdk, fbml

我想对 Activity Feed 插件的工作原理有一个基本的了解，所以我想我会在 html 页面上设置一个小示例，看看它是什么样子的。我正在使用 FBML 方法来创建控件。问题是提要没有呈现。正如我所说，我只是想测试一下事情是如何运作的，所以我使用[http://www.facebook.com](http://www.facebook.com)作为域。同样，这很简单，但我没有看到控件渲染。这是我的完整代码：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Facebook API Testing</title>
    <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
  </head>

  <body>
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=myid";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

    <h1>Facebook API Testing</h1>
    <div>
    <fb:activity href="http://www.facebook.com" action="like" width="300" height="300" header="true" recommendations="true"></fb:activity>
    </div>
  </body>
</html> 
```

我没有收到任何类型的错误。我只是什么都没看到。当我检查页面时，我看到 fb 活动提要标记在那里：

```
<fb:activity href="http://www.facebook.com" action="like" width="300" height="300" header="true" recommendations="true"></fb:activity> 
```

**解决了**

好的，这显然已经解决了，如果您尝试从本地计算机上的独立 html 文件运行它，这将不起作用。当我将上述内容上传到网络服务器并查看页面时，事情正在呈现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-06T08:20:01.903

> 好的，这显然已经解决了，如果您尝试从本地计算机上的独立 html 文件运行它，这将不起作用。当我将上述内容上传到网络服务器并查看页面时，事情正在呈现。

这是因为 JS SDK 的地址被指定为`//connect.facebook.net`- 允许浏览器在自动请求脚本时选择是使用 HTTP 还是 HTTPS。当然，这只有在页面本身可以通过这两种协议中的任何一种访问时才有效——而不是在通过 file:// 访问时。

你可以使用本地网络服务器来测试这样的东西——或者你可以`http:`自己把脚本地址放在前面。

# eclipse - 如何从 Eclipse 将 portlet 部署到 Liferay

> ID：12691549
> 
> 赞同：5
> 
> 时间：2012-10-02T13:48:33.970
> 
> 标签：eclipse, liferay, liferay-6, liferay-ide

我已经在 Eclipse 中创建了一个 portlet，现在我想将它部署到一个正在运行的 Liferay-6.1 实例并对其进行调试。我想这应该在文档中描述，但我只能找到如何创建 portlet，而不是如何部署它。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T14:35:26.113

这是一个屏幕截图，显示了如何直接从 Eclipse 部署 Liferay portlet

![在此处输入图像描述](../Images/f6a60269c32b88c78595b626d91cc709.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T06:55:48.257

此处记录了如何在 Eclipse 中部署 portlet（使用 Liferay IDE）[。](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/deploying-new-liferay-projects-to-liferay-serv-4) 这假设您已经[安装了 Liferay IDE](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/installati-6)，然后[创建了 Liferay Server 适配器](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/set-ndash-4)，然后使用 New Liferay Project 向导 [创建了一个项目。](http://www.liferay.com/documentation/liferay-portal/6.1/development/-/ai/creating-new-liferay-projec-4)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T06:06:59.317

完成portlet开发后，进入浏览器打开localhost登录，然后-->转到添加--->更多-->展开示例--->选择添加 ![在此处输入图像描述](../Images/92882d38332d2c72d2e04304061689c4.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-02T05:51:11.677

您可以使用命令提示符部署它。转到插件 portlet 的位置并执行以下命令：

例如：

```
D:\Projects\plugin\portlets\test-portlet>ant deploy 
```

注意：你需要像[这样配置ant home。](https://stackoverflow.com/questions/9290243/how-to-set-ant-home-with-windows)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-17T05:25:20.230

如果你有一个插件项目，但你需要将它部署到你的 Liferay 服务器上。让我们现在就开始做吧：

选择您的新插件项目，然后在“服务器”选项卡中右键单击 Liferay 服务器；

选择添加和删除...。

选择您的插件项目并单击添加以将其部署到服务器。

单击完成。

您应该看到项目被部署到 Liferay Tomcat 服务器；在控制台中，您将看到一条消息，指示您的新 portlet 可供使用。

# python - 将 n 个工作日添加到给定日期，忽略 python 中的假期和周末

> ID：12691551
> 
> 赞同：29
> 
> 时间：2012-10-02T13:48:38.873
> 
> 标签：python, datetime

我正在尝试将 n （整数）个工作日添加到给定日期，日期添加必须避免假期和周末（它不包括在工作日中）

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-02T14:13:56.367

跳过周末会很容易做这样的事情：

```
import datetime
def date_by_adding_business_days(from_date, add_days):
    business_days_to_add = add_days
    current_date = from_date
    while business_days_to_add > 0:
        current_date += datetime.timedelta(days=1)
        weekday = current_date.weekday()
        if weekday >= 5: # sunday = 6
            continue
        business_days_to_add -= 1
    return current_date

#demo:
print '10 business days from today:'
print date_by_adding_business_days(datetime.date.today(), 10) 
```

假期的问题在于，它们因国家甚至地区、宗教等而有很大差异。您需要为您的用例提供一个假期列表/一组，然后以类似的方式跳过它们。起点可能是 Apple 为 iCal 发布的日历提要（以 ics 格式），美国的日历提要是[http://files.apple.com/calendars/US32Holidays.ics](http://files.apple.com/calendars/US32Holidays.ics)

您可以使用[icalendar](https://github.com/collective/icalendar)模块来解析它。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-02T15:47:41.393

如果您不介意使用 3rd 方库，那么[dateutil](http://labix.org/python-dateutil)很方便

```
from dateutil.rrule import *
print "In 4 business days, it's", rrule(DAILY, byweekday=(MO,TU,WE,TH,FR))[4] 
```

您还可以查看`rruleset`并使用`.exdate()`来提供假期以跳过计算中的假期，并且可以`cache`选择避免重新计算的选项可能值得研究。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-02T14:00:17.903

没有真正的捷径可以做到这一点。试试这个方法：

1.  创建一个类，该类具有`skip(self, d)`返回`True`应跳过的日期的方法。
2.  在包含所有假期作为[日期对象](http://docs.python.org/library/datetime.html#date-objects)的类中创建一个字典。不要使用`datetime`或类似的，因为一天的一小部分会杀死你。
3.  返回`True`字典中的任何日期或`d.weekday() >= 5`

要添加 N 天，请使用以下方法：

```
def advance(d, days):
    delta = datetime.timedelta(1)

    for x in range(days):
        d = d + delta
        while holidayHelper.skip(d):
            d = d + delta

    return d 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-02T14:42:37.163

感谢基于 omz 代码我做了一些小改动......它可能对其他用户有帮助：

```
import datetime
def date_by_adding_business_days(from_date, add_days,holidays):
    business_days_to_add = add_days
    current_date = from_date
    while business_days_to_add > 0:
        current_date += datetime.timedelta(days=1)
        weekday = current_date.weekday()
        if weekday >= 5: # sunday = 6
            continue
        if current_date in holidays:
            continue
        business_days_to_add -= 1
    return current_date

#demo:
Holidays =[datetime.datetime(2012,10,3),datetime.datetime(2012,10,4)]
print date_by_adding_business_days(datetime.datetime(2012,10,2), 10,Holidays) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-04-28T23:18:03.847

我想要一个不是 O(N) 的解决方案，它看起来像是一个有趣的代码高尔夫。这是我敲出来的，以防有人感兴趣。适用于正数和负数。如果我错过了什么，请告诉我。

```
def add_business_days(d, business_days_to_add):
    num_whole_weeks  = business_days_to_add / 5
    extra_days       = num_whole_weeks * 2

    first_weekday    = d.weekday()
    remainder_days   = business_days_to_add % 5

    natural_day      = first_weekday + remainder_days
    if natural_day > 4:
        if first_weekday == 5:
            extra_days += 1
        elif first_weekday != 6:
            extra_days += 2

    return d + timedelta(business_days_to_add + extra_days) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-02T13:57:24.097

这将需要一些工作，因为在任何图书馆中都没有任何定义的假期结构（至少据我所知）。您将需要创建自己的枚举。

`.weekday() < 6`通过调用您的 datetime 对象可以轻松地检查周末天数。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-11-30T09:25:04.983

我知道它不处理假期，但我发现这个解决方案更有帮助，因为它在时间上是恒定的。它包括计算整周的数量，添加假期有点复杂。我希望它可以帮助某人:)

```
def add_days(days):
    today = datetime.date.today()
    weekday = today.weekday() + ceil(days)
    complete_weeks = weekday // 7
    added_days = weekday + complete_weeks * 2
    return today + datetime.timedelta(days=added_days) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-07T14:59:46.217

希望这可以帮助。不是`O(N)`但是`O(holidays)`。此外，假期仅在偏移量为正时有效。

```
def add_working_days(start, working_days, holidays=()):
    """
    Add working_days to start start date , skipping weekends and holidays.

    :param start: the date to start from
    :type start: datetime.datetime|datetime.date
    :param working_days: offset in working days you want to add (can be negative)
    :type working_days: int
    :param holidays: iterator of datetime.datetime of datetime.date instances
    :type holidays: iter(datetime.date|datetime.datetime)
    :return: the new date wroking_days date from now
    :rtype: datetime.datetime
    :raise:
        ValueError if working_days < 0  and holidays 
    """
    assert isinstance(start, (datetime.date, datetime.datetime)), 'start should be a datetime instance'
    assert isinstance(working_days, int)
    if working_days < 0 and holidays:
        raise ValueError('Holidays and a negative offset is not implemented. ')
    if working_days  == 0:
        return start
    # first just add the days
    new_date = start + datetime.timedelta(working_days)
    # now compensate for the weekends.
    # the days is 2 times plus the amount of weeks are included in the offset added to the day of the week
    # from the start. This compensates for adding 1 to a friday because 4+1 // 5 = 1
    new_date += datetime.timedelta(2 * ((working_days + start.weekday()) // 5))
    # now compensate for the holidays
    # process only the relevant dates so order the list and abort the handling when the holiday is no longer
    # relevant. Check each holiday not being in a weekend, otherwise we don't mind because we skip them anyway
    # next, if a holiday is found, just add 1 to the date, using the add_working_days function to compensate for
    # weekends. Don't pass the holiday to avoid recursion more then 1 call deep.
    for hday in sorted(holidays):
        if hday < start:
            # ignore holidays before start, we don't care
            continue
        if hday.weekday() > 4:
            # skip holidays in weekends
            continue
        if hday <= new_date:
            # only work with holidays up to and including the current new_date.
            # increment using recursion to compensate for weekends
            new_date = add_working_days(new_date, 1)
        else:
            break
    return new_date 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-02T01:00:46.197

如果有人需要添加/减去天数，请扩展@omz 的答案：

```
def add_business_days(from_date, ndays):
    business_days_to_add = abs(ndays)
    current_date = from_date
    sign = ndays/abs(ndays)
    while business_days_to_add > 0:
        current_date += datetime.timedelta(sign * 1)
        weekday = current_date.weekday()
        if weekday >= 5: # sunday = 6
            continue
        business_days_to_add -= 1
    return current_date 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-12-05T14:25:23.477

类似于@omz 解决方案，但递归：

```
def add_days_skipping_weekends(start_date, days):
    if not days:
        return start_date
    start_date += timedelta(days=1)
    if start_date.weekday() < 5:
        days -= 1
    return add_days_skipping_weekends(start_date, days) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-08-27T05:43:50.520

如果您对使用 NumPy 感兴趣，那么您可以按照以下解决方案进行操作：

```
import numpy as np
from datetime import datetime, timedelta

def get_future_date_excluding_weekends(date,no_of_days):
 """This methods return future date by adding given number of days excluding 
  weekends"""
  future_date = date + timedelta(no_of_days)
  no_of_busy_days = int(np.busday_count(date.date(),future_date.date()))
  if no_of_busy_days != no_of_days:
    extend_future_date_by = no_of_days - no_of_busy_days
    future_date = future_date + timedelta(extend_future_date_by)
  return future_date 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2020-06-25T02:32:07.083

我正在使用以下代码来处理业务日期增量。对于假期，您需要创建自己的列表以跳过。

```
today = datetime.now()
t_1 = today - BDay(1)
t_5 = today - BDay(5)
t_1_str = datetime.strftime(t_1,"%Y%m%d") 
```

# windows-phone - 在 Visual Studio 2010 中运行的 Windows Phone 8 SDK

> ID：12691553
> 
> 赞同：3
> 
> 时间：2012-10-02T13:48:42.553
> 
> 标签：windows-phone, windows-phone-8

我知道 SDK 还没有完成，但是一些幸运的开发人员已经拿到了它，所以我的问题是：当你安装 Windows Phone 8 SDK 时，它是否也在 Visual Studio 2010 中安装了 SDK，或者只是在2012版（包括2012 Express）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T14:02:49.617

在发布我的问题后，两个有权访问 SDK 的不同开发人员直接联系我，说在 Visual Studio 2010 中没有集成 Windows Phone 8 SDK，只是在 2012 版本上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-30T17:04:53.400

不，您需要 Visual Studio 2012、Windows 8 Pro 或 Enterprise x64 + 支持 SLAT 的处理器才能运行 Hyper-V。
您现在可以在此处下载 WP8 SDK：http:
[//www.microsoft.com/en-us/download/details.aspx?id= 35471](http://www.microsoft.com/en-us/download/details.aspx?id=35471)

# jar - 来自 netBeans 的 JavaFx 应用程序：如何在构建中包含外部 jar 或类路径 jar？

> ID：12691554
> 
> 赞同：2
> 
> 时间：2012-10-02T13:48:42.540
> 
> 标签：jar, classpath, javafx-2, netbeans-7

我使用 netbeans 7.2 IDE制作了 Javafx 2**独立应用程序。**在内部，netbeans 使用 ant 脚本进行构建。

现在我的应用程序根据一些输入创建了一些 XML 文件。对于 xml 创建，我使用了一个第三方 jar 文件“xstream-1.4.3.jar”。现在，当我仅从 netbeans IDE 构建和运行应用程序时.. 应用程序工作正常。但是当我将 jar 复制到其他位置时，我的应用程序停止工作。

原因是当 jar 文件被复制到其他位置时，应用程序无法找到“xstream**.jar”文件。***那么现在如何在构建中包含这个 jar 文件（类路径中的所有 jar 文件），***以便我的应用程序可以分发。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T22:07:29.887

*JAR 中的清单文件已更新，以包含指定主类和项目类路径上的任何库的条目。*

[http://netbeans.org/kb/docs/java/javase-deploy.html#build](http://netbeans.org/kb/docs/java/javase-deploy.html#build)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T11:16:48.837

在 build.xml 文件中包含以下代码并更改文件夹名称以适合您的项目。

```
 <target name="-post-jar">   
   <jar jarfile="${dist.jar}" update="true">   
     <zipfileset src="C:/Java/ExcelJars/jxl.jar" includes="**/*.class" />   
     <zipfileset src="C:/Java/ExcelJars/SX.jar" includes="**/*.class"/> 
   </jar>   
 </target> 
```

# php - PDO 显示的结果超出预期

> ID：12691557
> 
> 赞同：1
> 
> 时间：2012-10-02T13:48:47.080
> 
> 标签：php, pdo

我有一个带有一个字段“id”的简单表，当我执行这段代码时......

```
$dbh = new PDO('mysql:host='.$dbhost.';dbname='.$dbname, $dbuser, $dbpass);

$sql = 'SELECT * FROM logolist';
$q = $dbh->query($sql);
while($r = $q->fetch()){ print_r($r); } 
```

...我得到这个输出：

```
Array
(
    [ID] => 2
    [0] => 2
)
Array
(
    [ID] => 4
    [0] => 4
) 
```

如您所见，“ID”字段下有一个 [0]。如果我添加更多字段，我会在数组中不断获得更多额外元素。就像每个字段都输出它的值 2 次。

为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:52:54.933

这是`fetch()`没有任何属性的正常情况（`FETCH_BOTH`默认设置）。它像旧的一样工作`mysql_fetch_array()`，`0`是数字索引。

如果您切换到关联，您将只获得以下字段：

```
while($r = $q->fetch(PDO::FETCH_ASSOC)){
    print_r($r);
} 
```

[PDOStatement::fetch](http://www.php.net/manual/en/pdostatement.fetch.php) - 适用于所有样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:52:05.737

您正在获取数字和关联。

检查 PDO 文档：

[http://php.net/manual/en/pdostatement.fetch.php](http://php.net/manual/en/pdostatement.fetch.php)

（您正在使用 PDO::FETCH_BOTH（默认））

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T13:53:55.097

```
 while($r = $q->fetch(PDO::FETCH_ASSOC)){ print_r($r); } 
```

`PDO::FETCH_ASSOC`只会获取带有关联键的值，没有数字索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T13:56:10.277

`fetch`给出数值和关联数组

[http://www.php.net/manual/en/pdostatement.fetch.php](http://www.php.net/manual/en/pdostatement.fetch.php)

您只能`FETCH_ASSOC`用于获取关联数组

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T13:56:15.927

我遇到了这种用于获取 MySQL 结果的循环的做法，我想知道为什么人们会这样做，所以我会写下这个答案并尝试澄清一些事情。

1）您不需要循环来获取结果 2）您得到重复结果的原因是因为您正在接收一个关联数组和基于索引的数组。这是默认行为。

你可以做的是：

```
$dbh = new PDO('mysql:host='.$dbhost.';dbname='.$dbname, $dbuser, $dbpass);

// Tell PDO to throw exceptions in case of a query error
$dbh ->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

try
{
    $result = $dbh->query("SELECT * FROM logolist")->fetchAll(PDO::FETCH_ASSOC); 

    // Your result is now in $result array which is associative. 
    // If it's empty - no results were found. 
    // In case of an error, you'd go to catch block of the code and you'd echo out an error. 
}
catch(PDOException $e)
{
    echo "Error reported: ". $e->getMessage();
} 
```

# sql - 如何使用count语句从sql server中的多个表中获取信息？

> ID：12691558
> 
> 赞同：1
> 
> 时间：2012-10-02T13:48:49.400
> 
> 标签：sql, sql-server, sql-server-2008

如何使用带有字段的计数函数查询每个部门的员工人数，`Dept_id`使用下面的数据结构？`Dept_name``Number of employees`

```
create database Emp_det

create table Dept
(
    Dept_ID int not null primary key,
    Dept_name varchar(255)
)

create table Emp_table
(
    Emp_no int not null primary key,
    Emp_name varchar(255) not null,
    Dept_ID int foreign key references Dept(Dept_ID),
    Emp_status varchar(255)
)

create table Salary_table
(
    Emp_no int not null foreign key references Emp_table(Emp_no),
    From_date datetime,
    End_date datetime,
    Basic int,
    HRA int,
    Others int,
    Total int,
    Emp_status varchar(255),

    constraint pk_emp_det primary key (emp_no,From_date)
);

insert into Dept
values(10, 'I.T'), (11, 'H.R'),(12, 'Procurement'),(13, 'QS');

insert into Emp_table
values(1111,'Manivannan','10','A'),
(1222,'Faizal','10','A'),
(4122,'Marzook','10','A'),
(1223,'Venu','11','A');

insert into Salary_table
values(1111,'01/09/2012','1/10/2012',10000,10000,2000,22000,'A'),
(1222,'01/09/2012','1/10/2012',5000,5000,1000,11000,'A'),
(4122,'01/09/2012','1/10/2012',1000,1000,5000,2500,'A'),
(1223,'01/09/2012','1/10/2012',10000,10000,2000,22000,'A') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T13:55:21.480

```
SELECT D.Dept_ID, D.Dept_Name, COUNT(*) NumberOfEmployees
FROM Dept D
LEFT JOIN dbo.Emp_Table ET
ON D.Dept_ID = ET.Dept_ID 
GROUP BY D.Dept_ID, D.Dept_Name 
```

这将列出所有部门，即使没有员工。如果您只想要有员工的部门，您可以`LEFT JOIN`用 an更改。`INNER JOIN`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:54:41.900

```
 select 
      Dept_id, Dept_name,count(distinct Emp_no) as Number_of_employees
    from 
      Dept d inner join
      Emp_table e on 
      d.Dept_ID = e.Dept_ID
    group by
      Dept_id, Dept_name 
```

抱歉，这不是我的想法。忘记组了。

# c# - File.Delete 无法删除文件，因为它正被另一个进程使用。不知道如何解决这个问题

> ID：12691560
> 
> 赞同：2
> 
> 时间：2012-10-02T13:48:53.083
> 
> 标签：c#, file, process, delete-file

我有一个项目，我有一个 Web 表单，可以动态生成一个 .csv 文件，然后使用 GnuPG 进行加密。加密过程有效，加密文件在同一目录中生成。接下来，文件加密后，我需要删除常规的 .csv 文件。

我已使用 file.delete 执行此操作，但出现错误“该进程无法访问文件 'FILEPATH/FILENAME.EXT'，因为它正在被另一个进程使用。我不确定我是否将代码放在错误的区域.

谁能建议我该怎么做？这是相关的代码。

```
public void encryptPGP(string fileName)
{
    try
    {
        string sCommandLine = String.Format(@"-r ""CERT NAME"" -e ""{0}""", fileName);
       //lblError.Text = "<pre>" + sCommandLine + "</pre>";

        string userPwd = "COOLPWD";
        System.Security.SecureString pwd = new System.Security.SecureString();
        foreach (char c in userPwd.ToCharArray())
        {
            pwd.AppendChar(c);
        }

        System.Diagnostics.ProcessStartInfo info = new System.Diagnostics.ProcessStartInfo();
        info.Arguments = sCommandLine;
        info.Domain = "DOMAINNAME";
        info.FileName = "C:\\Utilities\\GnuPG\\App\\gpg.exe";
        info.Password = pwd;
        info.UserName = "USERNAME";
        info.UseShellExecute = false;
       info.RedirectStandardOutput = true;
       info.CreateNoWindow = true;
        info.WorkingDirectory = "C:\\Utilities\\GnuPG\\App\\";

        //writeToLog(info.FileName, "App");
        //writeToLog(sCommandLine, "Args");

       System.Diagnostics.Process proc = new System.Diagnostics.Process();
       proc.StartInfo = info;
        proc.Start();
       lblError.Text = proc.StandardOutput.ReadToEnd();

    System.IO.File.Delete(fileName);

    }
    catch (Exception ex)
    {
       lblError.Text = ex.Message;
        //writeToLog(ex.Message, "");
    }
}

// method for writing error log
private void writeToLog(string strMessage, string strMethod)
{
    using (System.IO.StreamWriter file = new System.IO.StreamWriter(@"C:\\Log.txt", true))
    {
        file.WriteLine(string.Format("{0} - {1} - {2}", DateTime.Now, strMethod, strMessage));
    }
}
// end method for writing error log 
```

另外，这是创建文件的过程：

```
 string fileName = @"c:\DIR\DIR\" + pt.SelectedItem.Value + pcf + "--" + usname + "--" + sname.Text + "--" + cdt + ".csv";
    string lines = DropDownList3.SelectedItem.Value + "," + DropDownList8.SelectedItem.Value + "," + DropDownList1.SelectedItem.Value + "," + TextBox25.Text + "," + ssn.Text + "," + TextBox13.Text + "," + Lastname.Text + "," + firstname.Text + "," + " " + "," + TextBox1.Text + "," + TextBox3.Text + "," + TextBox4.Text + "," + TextBox5.Text + "," + TextBox6.Text + "," + TextBox9.Text + "," + TextBox10.Text + "," + TextBox11.Text + "," + TextBox2.Text + "," + " " + "," + TextBox22.Text + "," + TextBox26.Text + "," + TextBox29.Text + "," + TextBox19.Text + "," + TextBox27.Text + "," + TextBox30.Text + "," + TextBox24.Text + "," + TextBox28.Text + "," + TextBox8.Text + "," + DropDownList7.SelectedItem.Value + "," + TextBox38.Text + " " + TextBox34.Text + "," + TextBox33.Text + "," + TextBox41.Text + "," + TextBox35.Text + "," + TextBox36.Text + "," + TextBox37.Text + "," + TextBox54.Text + "," +" "+"," + TextBox12.Text;
    System.IO.File.WriteAllText(fileName, lines);

    encryptPGP(fileName); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:54:45.003

我想说的是，当您尝试删除该文件时，GnuPG 可能仍在使用该文件。

您需要等待该过程结束后再进行删除，即添加：

```
proc.WaitForExit(); 
```

直接在之前

```
System.IO.File.Delete(fileName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T13:51:21.993

创建文件时是否关闭了写入流。就是这样。您需要关闭流然后删除。

无论您拥有创建此文件的任何代码，都必须具有一些描述流。检查上面是否有 Close 方法。您可以首先发布创建文件的代码吗？

# maven - 如何使用 Maven POM 文件运行 testNG 测试

> ID：12691570
> 
> 赞同：2
> 
> 时间：2012-10-02T13:31:30.573
> 
> 标签：maven, selenium

我有一个 Selenium 项目，使用 Maven 和 TestNG。

我尝试了几种不同的方法来让我的测试使用 Maven 命令运行（我使用的是 sure fire 插件）。当我运行 Maven 时，测试不会运行。没有错误。

当我使用 mvn test 时，有没有人有一个很好的例子或教程可以让我运行我的测试？

提前致谢。

这是输出：

```
C:\**************>mvn test
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Building Unnamed - **************:**************:jar:1.0
[INFO]    task-segment: [test]
[INFO] ------------------------------------------------------------------------
[INFO] [resources:resources]
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources,
i.e. build is platform dependent!
[INFO] Copying 4 resources
[INFO] [compiler:compile]
[INFO] Nothing to compile - all classes are up to date
[INFO] [resources:testResources]
[WARNING] Using platform encoding (Cp1252 actually) to copy filtered resources,
i.e. build is platform dependent!
[INFO] skip non existing resourceDirectory C:\**************\src\test\res
ources
[INFO] [compiler:testCompile]
[INFO] Nothing to compile - all classes are up to date
[INFO] [surefire:test]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2 seconds
[INFO] Finished at: Tue Oct 02 15:14:10 BST 2012
[INFO] Final Memory: 16M/38M
[INFO] ------------------------------------------------------------------------ 
```

以及我的 POM 文件中的肯定配置：

```
<plugins>
            <plugin>
                <artifactId>maven-compiler-plugin</artifactId>
                <configuration>
                    <encoding>iso-8859-1</encoding>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>
            <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12.4</version>
            <configuration>
                <suiteXmlFiles>
                    <suiteXmlFile>src/main/test_suites/local/***_Test.xml</suiteXmlFile>
                </suiteXmlFiles>
            </configuration>
        </plugin> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T13:59:22.650

看看这个[使用 TestNG 的 Maven](http://maven.apache.org/plugins/maven-surefire-plugin/examples/testng.html)站点。

基本上你所要做的就是向 TestNG 添加一个依赖项。

```
<dependencies>
  [...]
    <dependency>
      <groupId>org.testng</groupId>
      <artifactId>testng</artifactId>
      <version>6.3.1</version>
      <scope>test</scope>
    </dependency>
  [...]
</dependencies> 
```

* * *

默认包括`maven-surefire-plugin`：

```
<includes>
    <include>**/Test*.java</include>
    <include>**/*Test.java</include>
    <include>**/*TestCase.java</include>
</includes> 
```

这意味着如果您的测试类的名称与上述包含模式不匹配，那么`maven-surefire-plugin`将找不到它们并运行它们。

您可以通过将这些文件添加到插件配置来更改/添加要包含的文件。

# javascript - 仅在 $resource 的 $save 上发布更改的字段

> ID：12691573
> 
> 赞同：0
> 
> 时间：2012-10-02T13:49:42.027
> 
> 标签：javascript, angularjs

在 ngResource 上调用 $save 时，是否可以*只*发布已编辑的字段而不是每次都发布整个模型？

```
var User = $resource('http://example.com/user/123/');

User.get(function(user) {
  user.name="John Smith";
  user.$save();
  // What I *want* -> POST: /user/123/ {name:'John Smith'}
  // What currently happens -> POST: /user/123/ {name:'John Smith', age: 72, location: 'New York', noOfChildren: 5}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T02:44:08.077

当我只想保存一个字段时，我使用静态`.save()`方法，并使用一个回调来获取响应并在成功时更新本地对象：

```
$scope.saveOneField = function(modelInstance) {
  ModelName.save({
    id: modelInstance.id,
    theField: <some value>
  }, function(response) {
    // If you want to update *all* the latest fields:
    angular.copy(response, modelInstance.data);
    // If you want to update just the one:
    modelInstance.theField = response.data.theField;
  });
}; 
```

这假设当一个 POST 请求被发送到资源（即`/modelnames/:id`）时，您的服务器会使用最新更新的 modelInstace 版本进行响应。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:53:58.817

不，这是不可能的，至少在实例上是不可能的，请参阅[http://docs.angularjs.org/api/ngResource.$resource](http://docs.angularjs.org/api/ngResource.%24resource)

> [...] 可以使用以下参数调用类对象或实例对象上的操作方法：
> 
> *   HTTP GET“类”操作：`Resource.action([parameters], [success], [error])`
> *   非 GET “类”操作：`Resource.action([parameters], postData, [success], [error])`
> *   非 GET 实例操作： `instance.$action([parameters], [success], [error])`

因此，只能通过将要保存的数据传递给“静态”保存方法，即`User.save`. 像这样的东西：

```
User.get(function(user)
{
    user.name = 'John Smith';
    User.save({name: user.name});
}); 
```

这是否适合您可能取决于您要对`user`实例执行的操作。

# ios - iTunes：应用程序上传警告：应用程序在 :setRefreshInterval 中引用了非公共选择器

> ID：12691577
> 
> 赞同：2
> 
> 时间：2012-10-02T13:49:53.873
> 
> 标签：ios, itunes

将二进制应用程序上传到 iTunes 时，它会报告如下警告：

> 该应用程序在 :setRefreshInterval 中引用了非公共选择器

*   我该如何解决这个问题？
*   哪个公共 API 可以解决问题 (:setRefreshInterval) ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:14:04.293

这意味着您使用了私有 API，而不是文档化/公共 API。如果您使用它，Apple 通常会拒绝您的应用程序，因为它们是不允许的，并且如果 Apple 更改内部系统（包括此未记录的代码），它可能会使您的应用程序崩溃。人们会留下负面评价。

在这种情况下`setRefreshInterval:`是私有方法，那么`setRefreshInterval:`在你的代码中做了什么，那么也许我可以给你替代方案......

我很确定检查您是否使用公共 API：没有自动完成功能，另一件事是按 alt 并单击方法/属性以查看它是否有文档

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:05:41.893

这意味着验证已经在您的应用程序中发现了对某些私有 API 的调用。查看警告中提到的方法，看看是否有任何不允许的内容。找到它后，尝试使用公共 API 完成同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:11:13.373

我在 iOS 公共 API 中找不到该选择器。我在 MacOS NSTimeInterval 类中找到了它。尽管该选择器可以在 iOS 中使用，但由于它不是公开的，因此如果您打算将该应用程序推送到 AppStore，则不能在 iOS 应用程序中使用它。

# eclipse - 调试：使用生成的 Java 代码而不是 Xtend 代码

> ID：12691583
> 
> 赞同：3
> 
> 时间：2012-10-02T13:50:08.820
> 
> 标签：eclipse, xtend

当我调试 Xtend 代码时，我有时希望查看生成的 Java 代码以及所有中间变量。但是，即使我在这段代码中设置了断点，调试器也会显示 Xtend 代码。在这种情况下是否可以切换到 Java 代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-02T14:18:07.557

我刚刚找到了这个视频：[在 Xtend 和 Java 中调试 - 并排](http://vimeo.com/38425995)，00:15。源代码在[这里](https://web.archive.org/web/20150214123434/https://www.eclipse.org/xtend/new_and_noteworthy/index.html#debugging)，在**M6 以来的调试**部分：

> 现在完全支持通过 Xtend 和 Java 进行调试。在 Xtend 中设置断点的工作方式与在 Java 中一样，您甚至可以随时通过上下文菜单操作切换到 Java 级别。
> 
> 此外，Java 调试器中已知的所有很酷的功能，如“显示”、“检查”或“异常断点”都可用。”

您可以使用调试视图中任何堆栈帧的上下文菜单中的“显示源代码”选项在 Java 和 Xtend 之间切换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-30T12:21:22.127

遗憾的是，目前还没有办法关闭 xtend 调试器。

但是，在调试透视图中打开“生成的代码”视图可能会对您有所帮助。它也显示断点（与xtend文件上的断点同步），它使我们更容易理解与java的合作。

# javascript - div 悬停无法正常工作

> ID：12691592
> 
> 赞同：0
> 
> 时间：2012-10-02T13:50:44.250
> 
> 标签：javascript, jquery, html, css

当我悬停 div（一）时，我的 div 出现问题，但当我悬停弹出 div 时，他消失了，我需要在 div（一）之前滑动或弹出 div（二）而不是之后. 并且 div (one) 和 div(two) 属于同一个类。这是我的 CSS、HTML 和 javascript。

HTML

```
 <div id = "one" class="slideUP1"></div>
 <div id = "two" class="slideUP1"></div> 
```

CSS

```
 .slideUP1

{
      background-color:Gray;
}

#one

{
    z-index:50;
    width:320px;
    height:124px;
    position:relative;
    overflow:hidden;
    float:left;
    margin-right:5px;
    margin-top:0px;
}

#two 
{ 
  display: none; 
  position:absolute;
  height:300px;
  width:900px; 
  z-index:55; 
  margin-bottom:0px;
} 
```

javascript

```
$(document).ready(function () {

           $(".slideUP1").hover(function () {
               $(this).next("#two").animate({ opacity: "show", top: "144" }, "fast");
           });
       });

       $(document).ready(function () {

           $(".slideUP1").mouseleave(function () {
               $(this).next("#two").animate({ opacity: "hide", top: "154" }, "fast");
           });
       }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:08:42.067

问题是当您将鼠标悬停在第二个 div 上时，您会离开第一个 div 从而使其关闭。将它们都放在一个容器中，并在其上使用悬停事件。

```
<div id = "container">
    <div id = "one" class="slideUP1"></div>
    <div id = "two" class="slideUP1"></div>
</div> 
```

和javascript：

```
$(document).ready(function () {

       $("#container").hover(
            function () {
               $(this).find("#two").animate({ opacity: "show", top: "144" }, "fast");
           },
            function () {
               $(this).find("#two").animate({ opacity: "hide", top: "154" }, "fast");
           });
   }); 
```

# ios - opengl es VBO 使用 - 无几何渲染

> ID：12691593
> 
> 赞同：4
> 
> 时间：2012-10-02T13:50:45.170
> 
> 标签：ios, opengl-es, vbo

我正在尝试为我的渲染代码设置 VBO 以获得更多 fps。它适用于顶点位置、颜色和纹理坐标的单独 VBO，但在传输到交错的顶点数据后，没有几何渲染。这是我的设置功能：

```
const GLsizeiptr data_size = NUMBER_OF_CUBE_VERTICES * 9 *sizeof(float);
// allocate a new buffer
glGenBuffers(1, &cubeVBO);
glBindBuffer(GL_ARRAY_BUFFER, cubeVBO);
glBufferData(GL_ARRAY_BUFFER, data_size, data, GL_STATIC_DRAW);

float* ptr = (float*)data;
glVertexAttribPointer(ATTRIB_VERTEX, 3, GL_FLOAT, GL_FALSE, sizeof(struct Vertex), (ptr + 0));
glEnableVertexAttribArray(ATTRIB_VERTEX);

glVertexAttribPointer(ATTRIB_COLOR, 4, GL_FLOAT, GL_FALSE, sizeof(struct Vertex), (ptr + 3));
glEnableVertexAttribArray(ATTRIB_COLOR);

glVertexAttribPointer(ATTRIB_TEXCOORD0, 2, GL_FLOAT, GL_FALSE, sizeof(struct Vertex), (ptr + 7));
glEnableVertexAttribArray(ATTRIB_TEXCOORD0);

glGenBuffers(1, &cubeIBO);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, cubeIBO);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, NUMBER_OF_CUBE_INDICES*sizeof(GLubyte), s_cubeIndices, GL_STATIC_DRAW); 
```

数据数组如下所示：

```
static float data[] =
{
//  position  //   // color // //UV//
-1.0, +1.0, +1.0,  255,0,0,255, 0,0,
-1.0, -1.0, +1.0,  0,255,0,255, 0,0,
+1.0, +1.0, +1.0,  255,0,255,255, 0,0,
+1.0, -1.0, +1.0,  255,0,0,255, 0,0,

+1.0, +1.0, +1.0,  255,0,0,255, 0,0,
+1.0, -1.0, +1.0,  255,0,0,255, 0,0,
+1.0, +1.0, -1.0,  255,255,0,255, 0,0,
+1.0, -1.0, -1.0,  255,0,0,255, 0,0,

+1.0, +1.0, -1.0,  255,0,255,255, 0,0,
+1.0, -1.0, -1.0,  255,255,0,255, 0,0,
-1.0, +1.0, -1.0,  0,255,0,255, 0,0,
-1.0, -1.0, -1.0,  255,0,0,255, 0,0,

-1.0, +1.0, -1.0,  0,0,255,255, 0,0,
-1.0, -1.0, -1.0,  255,0,0,255, 0,0,
-1.0, +1.0, +1.0,  255,255,0,255, 0,0,
-1.0, -1.0, +1.0,  255,0,0,255, 0,0,
}; 
```

这是我的渲染代码：

```
glClearColor(0.5f, 0.5f, 0.5f, 1.0f);
glClear(GL_COLOR_BUFFER_BIT|GL_DEPTH_BUFFER_BIT);

glBindBuffer(GL_ARRAY_BUFFER, cubeVBO);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, cubeIBO);
glDrawElements(GL_TRIANGLE_STRIP, NUMBER_OF_CUBE_INDICES, GL_UNSIGNED_BYTE, s_cubeIndices); 
```

我也尝试使用没有索引缓冲区的 DrawArrays 函数，但结果是相同的 - 没有渲染几何。当我的程序运行时，输出窗口中也有 GLError 1282。感谢您对我的问题的任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:10:22.697

当您使用缓冲区对象时，glVertexAttribPointer 的最后一个参数应该偏移到您需要的数据。例如，您的 ATTRIB_VERTEX 数组将从偏移量 0 开始，ATTRIB_COLOR 数组从偏移量 sizeof(float) * 3 开始（因为位置需要三个浮点数），等等...

当您不使用缓冲区对象，而是使用顶点数组时，您必须通过调用将当前绑定的缓冲区对象取消绑定到 GL_ARRAY_BUFFER 目标

```
glBindBuffer(GL_ARRAY_BUFFER, 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T19:52:56.453

好的，我使用 glVertexPointer 和 glEnableClientState 函数让它工作了。但是对于 glVertexAttribPointer 和 glEnableVertexAttribArray 由于某种原因仍然没有几何图形渲染。现在代码如下所示： VBO init：

```
struct Vertex
{
  GLfloat x, y, z;
  GLubyte r, g, b, a;
};
......

const GLsizeiptr data_size = NUMBER_OF_CUBE_VERTICES *sizeof(struct Vertex);
glGenBuffers(1, &cubeVBO);
glBindBuffer(GL_ARRAY_BUFFER, cubeVBO);

glBufferData(GL_ARRAY_BUFFER, data_size, vertices, GL_STATIC_DRAW);

glVertexPointer(3, GL_FLOAT, sizeof(struct Vertex), (GLvoid*)((char*)NULL));
glColorPointer(4, GL_UNSIGNED_BYTE, sizeof(struct Vertex), (GLvoid*)offsetof(struct Vertex, r));
glEnableClientState(GL_VERTEX_ARRAY);
glEnableClientState(GL_COLOR_ARRAY); 
```

渲染：

```
glBindBuffer(GL_ARRAY_BUFFER, cubeVBO);
glDrawArrays(GL_TRIANGLE_STRIP, 0, NUMBER_OF_CUBE_VERTICES); 
```

如果我切换到 glVertexAttribPointer / glEnableVertexAttribArray，我不知道为什么这段代码不起作用。有任何想法吗？也许我需要将指向和启用功能从初始化部分移动到渲染部分？

# dependency-injection - 当 injectionpoint.getBean() 可以为空时的 CDI

> ID：12691594
> 
> 赞同：2
> 
> 时间：2012-10-02T13:50:45.100
> 
> 标签：dependency-injection, java-ee-6, cdi

我正在和 CDI 制作人一起玩，并在 doc 中发现

```
InjectionPoint.getBean() 
```

如果注入点不属于某个 bean，则可以返回 null。它实际上是什么意思？注入点怎么可能不属于一个bean？是否可以将某些东西注入其他不是 CDI bean 的东西中？

我想获取包含此注入点的类的类名，现在我不知道我是否可以依赖`getBean()`方法是否可以返回 null？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:46:21.450

如果您通过扩展手动创建了 InjectionPoint，则很有可能（AFAIK）您只会看到空值。

# android - onPreviewFrame 回调不断被调用

> ID：12691598
> 
> 赞同：0
> 
> 时间：2012-10-02T13:50:55.597
> 
> 标签：android, android-camera

我计划使用 onPreviewFrame 回调来捕获原始相机预览帧。在实现实际功能之前，我运行了一个简单的测试，我只是从该回调函数将一些内容打印到日志中。当我使用手机的退出按钮退出应用程序时（我相信这只是 Android 中的睡眠/暂停），看起来回调仍在被调用 - 我不断在日志中收到消息。然后下次我尝试运行该应用程序时，我得到一个异常，当我再次尝试时它再次工作（所以它每隔一次工作一次）。处理该回调的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:38:20.607

在 onPause() 中移除回调并释放相机：

```
mCamera.setPreviewCallback(null))
mCamera.release() 
```

每隔一次启动应用程序时，您可能会遇到异常，因为相机未释放且无法打开。

# zend-framework - 通过 Zend Framework Controller 将 Ajax 请求数据参数传递给模型类

> ID：12691599
> 
> 赞同：2
> 
> 时间：2012-10-02T13:50:56.097
> 
> 标签：zend-framework, state, ajax-request

我正在使用 Zend 框架。作为一种设计模式，我使用的是状态设计模式。

现在您可能知道，Zend Framework 让您创建自定义控制器，可用于响应 Ajax 请求。在我的示例中，我有以下 ajax 请求

```
 function getResponse(name){
        $.ajax({
            dataType: 'json',
            data: {button: name},
            url: 'motor/ajaxtest',
            type: 'post',
            success: function(response)
            {
            }
        });
    } 
```

每次按下特定按钮时都会调用函数 getResponse。

```
public function ajaxtestAction()
{
    $input_in = $this->getRequest()->getParam('button');

    $Lok = new Lok();
    $this->_helper->viewRenderer->setNoRender();

    $text = array($Lok->getMotorState());
    $phpNative = Zend_Json::encode($text);
    echo $phpNative;
} 
```

上面的代码是我对 ajax 请求的自定义响应。我想将按下按钮的名称传递给 $Lok = new Lok(); 所以我可以在“Lok”模型类中使用它，而无需在“Lok”类中创建控制器的新实例

有没有人可以帮助我？

编辑 - - - - - - - - - - - - - - - - - -

这是我的控制器：

```
class MotorController extends Zend_Controller_Action
{
public function init()
{
}

public function indexAction() 
{ 
}

public function ajaxtestAction()
{
    $input_in = array($this->getRequest()->getParam('button'));
    $phpNativ1 = Zend_Json::encode($input_in);
    echo $phpNativ1;

    $Lok = new Lok();
    echo $input_in;
    $this->_helper->viewRenderer->setNoRender();

    $text = array($Lok->getMotorState());
    $phpNative = Zend_Json::encode($text);
    echo $phpNative;
}
} 
```

这是我的 Jquery 函数：

```
$(document).ready(function(){

    $("p").click(function(){
        $(this).hide();
        $("input[name=State]").val('Forwards');
    });

    function getResponse(name){
        $.ajax({
            dataType: 'json',
            data: {button: name},
        url: 'motor/ajaxtest',
        type: 'post',
        success: function(response)
        {
        }
        });
    }

    $("button[name=on]").click(function() {
        var d_response = getResponse('on');
    });
}); 
```

这是我的 Lok.php 文件：

```
class Lok
{
private $newMotor;
private $newTimer;
private $newSpeaker;
private $mySession;
private $motorState;
private $input;

public function __construct()
{
    //Method instances
    $newMotor = new Motor();
    $newTimer = new Timer();
    $newSpeaker = new Speaker();    
    $this->motorState = $newMotor->getMotorState();

    // Declaring the Session
    $mySession = new Zend_Session_Namespace();
    $mySession->s_motorState = $this->motorState;
}

public function __get($mySession)
{
    return $this->mySession;
}

public function __set($motorState, $mySession)
{
    $this->$mySession->s_motorState = $motorState;
}

public function getMotorState()
{
    return $this->motorState;
}

public function playSound($soundNumber)
{
    echo "Playing sound";
}

public function resetTimer()
{
    echo "Resetting timer";
}

public function setInput($input_in)
{
    $this->input=$input_in;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:54:31.083

正如我之前所说，您应该通过调用请求发布数据来获取按钮名称，这是通过`$postData = $this->getRequest()->getPost()`

然后，要将输出输入到模型中，在模型类中，您将为其创建一个属性以及 setter 和 getter 方法。

```
class Lok {
    protected $button;
    public function setButton($btn){}
    public function getButton(){}
} 
```

然后它变得像做类似的事情一样容易

```
$lokModel->setButton($postData['button']) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T08:39:44.423

首先，感谢您发布您的解决方案。

我试图实施您的解决方案，但不幸的是它没有奏效。

所以在睡了一夜好觉之后，我再次查看了这个问题。我认为问题是， $postData = $this->getRequest()->getPost() 或 $postData = $this->getRequest()->getParam('button') 在响应itelfe中执行。

```
<pre>string(2) &quot;sr&quot;
</pre>["Not Moving"] 
```

这就是 Google Chrom 调试器中 JSON 响应的样子。如果您熟悉此 Google Chrome 调试器，您就会明白我的意思。

现在我想要的按钮名称在 " 标签之间，唯一的问题是，把它从那里拿出来。并能够在触发响应之前使用它。我还在控制器的 init() 和 indexAktion() 方法中尝试了 getPost() 和 getParam('button') ，但它仍然不起作用

```
public function init()
{
       postData = $this->getRequest()->getPost()
       $lokModel->setButton($postData['button'])
} 
```

* * *

```
public function indexAction() 
{ 
       postData = $this->getRequest()->getPost()
       $lokModel->setButton($postData['button'])
} 
```

还有其他想法吗？

# java - 用于在 JSON 文件中搜索文本的 Java 库

> ID：12691600
> 
> 赞同：3
> 
> 时间：2012-10-02T13:51:04.053
> 
> 标签：java, json

我想在一个大的 JSON 文件中搜索给定的关键字。有人知道这个的java库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T13:57:20.617

[Gson](https://sites.google.com/site/gson/gson-user-guide)可以帮助您轻松解析 json 文件。

与许多其他 JSON 库不同，[Gson 支持流式传输](https://sites.google.com/site/gson/streaming)，这意味着您可以检查小块文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:00:25.177

如果您只是在搜索关键字，我看不出它是 JSON 的事实如何需要一个特殊的库。这仅在您正在寻找特定于 JSON 的东西（例如键或值）时才有帮助。

难道你不能逐行扫描文件并搜索子字符串吗？

```
public static boolean find(File f, String searchString) {
    boolean result = false;
    Scanner in = null;
    try {
        in = new Scanner(new FileReader(f));
        while(in.hasNextLine() && !result) {
            if (in.nextLine().contains(searchString))
                return true;
        }
    }
    catch(IOException e) {
        e.printStackTrace();      
    }
    finally {
        try { in.close() ; } catch(Exception e) { /* ignore */ }  
    }
    return false;
} 
```

来自[http://technojeeves.com/joomla/index.php/free/109-search-for-string-in-text-file-in-java](http://technojeeves.com/joomla/index.php/free/109-search-for-string-in-text-file-in-java)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T13:56:10.373

你可以在[这里](http://json-lib.sourceforge.net/)找到 json 库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T13:57:17.060

搜索 JSONArray 和 JSONObject

[http://www.json.org/javadoc/org/json/JSONArray.html](http://www.json.org/javadoc/org/json/JSONArray.html)

和他们一起工作很容易。

# visual-studio-2012 - Visual Studio 2012 SSDT - 我现在如何创建/管理表？

> ID：12691606
> 
> 赞同：5
> 
> 时间：2012-10-02T13:51:22.633
> 
> 标签：visual-studio-2012, sql-server-data-tools

我正在尝试 Visual Studio 2012，到目前为止它很好，但我创建了数据库项目，将数据库 *.mdf 文件添加到我的 App_Data 并尝试创建具有关系的简单数据库，但我不知道下一步该做什么。我什至不能命名我的数据库。

[http://msdn.microsoft.com/en-us/library/hh272680(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/hh272680(v=vs.103).aspx) - AFAIK 这篇文章展示了如何添加关系，但我找不到任何`Foreign Keys`节点。还有，为什么我不能编辑名字？VS2010 数据库管理如此简单直观，现在我不明白如何使用它。

例如，我的问题和我的简单表格的更多视觉表示。 ![在此处输入图像描述](../Images/871d72e7283fe41666119929379cc694.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:18:53.010

您可以在`Properties`窗口中更改表名： ![表属性](../Images/884f67a15fe775de6001c0bde4e3721a.png)
通过右键单击关系`Foreign Keys`：
![钥匙](../Images/118c4e39ac9c526a42447025a2f5f68c.png)
您还可以在下部窗格中修改 sql - 所有更改都将反映在图形工具中。我发现这很有用，例如当我想将一些列从一个表复制到另一个表时。
您还可以使用其他工具对数据库进行更改，例如 SSMS（我认为更好的 FK 工具），然后通过`Schema Compare`将数据库设置为源并将项目设置为目标来导入这些更改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-14T16:18:58.767

右键单击要执行查询的数据库，然后选择添加新查询并在其中执行以下查询。

```
sp_rename 'oldtablename','newtablename' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:35:56.620

不太远。右键单击此元素。 ![在此处输入图像描述](../Images/9a3805730921df91cacc4a6ac4fbea3b.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T17:40:36.897

看看这个答案： [Visual Studio 2012 数据库设计器 - 功能改变了吗？](https://stackoverflow.com/questions/12229731/visual-studio-2012-database-designer-am-i-missing-something)

无论如何，如果您右键单击工具栏，我还是 sql 新手，那里有一组“表格设计器”按钮，但都是灰色的。不确定是否要启动它们，数据库必须在线。

# c# - 将文本流输出到 VS2010 输出窗口

> ID：12691613
> 
> 赞同：0
> 
> 时间：2012-10-02T13:51:44.373
> 
> 标签：c#, visual-studio-2010, visual-studio, add-in

我为 VS2010 创建了一个插件，它使用一个单独的类来进行一些处理。其结果是在输出窗口的新窗格中显示的文本。

此处理类的构造函数引用由插件 Connect 类创建的新 OutputWindowPane。文本是使用 OutputString 方法编写的。

这有效并且文本显示正确，但是，当执行返回到插件连接类时，它全部显示在一次更新中。我还注意到，在插件运行时 IDE 似乎冻结了。我是插件开发的新手，所以我错过了一些明显的东西吗？

有没有办法可以修改此过程以在每次调用 OutputString 时更新输出窗口中的文本？我希望有某种更新方法，但我一直找不到。

## 更新

我注意到这与使用单独的类无关。以下示例说明了我的问题：

```
using System;
using Extensibility;
using EnvDTE;
using EnvDTE80;
using Microsoft.VisualStudio.CommandBars;

namespace MyAddin4
{
    public class Connect : IDTExtensibility2, IDTCommandTarget
    {
       public void OnConnection(object application, ext_ConnectMode connectMode, object addInInst, ref Array custom)
        {
            _applicationObject = (DTE2)application;
            _addInInstance = (AddIn)addInInst;
            if(connectMode == ext_ConnectMode.ext_cm_UISetup)
            {
                object []contextGUIDS = new object[] { };
                Commands2 commands = (Commands2)_applicationObject.Commands;
                string toolsMenuName = "Tools";
            CommandBar menuBarCommandBar = ((CommandBars)_applicationObject.CommandBars)["MenuBar"];
            CommandBarControl toolsControl = menuBarCommandBar.Controls[toolsMenuName];
                CommandBarPopup toolsPopup = (CommandBarPopup)toolsControl;
            try
                {
                    Command command = commands.AddNamedCommand2(_addInInstance, "MyAddin4", "MyAddin4", "Executes the command for MyAddin4", true, 59, ref contextGUIDS, (int)vsCommandStatus.vsCommandStatusSupported+(int)vsCommandStatus.vsCommandStatusEnabled, (int)vsCommandStyle.vsCommandStylePictAndText, vsCommandControlType.vsCommandControlTypeButton);
                    if((command != null) && (toolsPopup != null))
                    {
                        command.AddControl(toolsPopup.CommandBar, 1);
                    }
                }
                catch(ArgumentException) {}
            }
        }

      public void OnDisconnection(ext_DisconnectMode disconnectMode, ref Array custom) {}

        public void OnAddInsUpdate(ref Array custom) {}

        public void OnStartupComplete(ref Array custom) {}

        public void OnBeginShutdown(ref Array custom) {}

        public void QueryStatus(string commandName, vsCommandStatusTextWanted neededText, ref vsCommandStatus status, ref object commandText)
        {
            if(neededText == vsCommandStatusTextWanted.vsCommandStatusTextWantedNone)
            {
                if(commandName == "MyAddin4.Connect.MyAddin4")
                {
                    status = (vsCommandStatus)vsCommandStatus.vsCommandStatusSupported|vsCommandStatus.vsCommandStatusEnabled;
                    return;
                }
            }
        }

        public void Exec(string commandName, vsCommandExecOption executeOption, ref object varIn, ref object varOut, ref bool handled)
        {
            handled = false;
            if(executeOption == vsCommandExecOption.vsCommandExecOptionDoDefault)
            {
                if(commandName == "MyAddin4.Connect.MyAddin4")
                {
               OutputWindow outputWindow = (OutputWindow) _applicationObject.Windows.Item(Constants.vsWindowKindOutput).Object;
                   OutputWindowPane outputPane = outputWindow.OutputWindowPanes.Add("Processor");
               for (int i = 0; i < 10; i++)
               {
                  System.Threading.Thread.Sleep(500);
                  outputPane.Activate();
                  outputPane.OutputString(i + "\n");
               }
                    handled = true;
                    return;
                }
            }
        }
        private DTE2 _applicationObject;
        private AddIn _addInInstance;
    }
} 
```

## 解决方案

基于@ShellShock 的答案，这是适合我的解决方案：

```
using System;
using Extensibility;
using EnvDTE;
using EnvDTE80;
using Microsoft.VisualStudio.CommandBars;

namespace MyAddin4
{
   public class Connect : IDTExtensibility2, IDTCommandTarget
   {
      public void OnConnection(object application, ext_ConnectMode connectMode, object addInInst, ref Array custom)
      {
         _applicationObject = (DTE2)application;
         _addInInstance = (AddIn)addInInst;
         if(connectMode == ext_ConnectMode.ext_cm_UISetup)
         {
            object []contextGUIDS = new object[] { };
            Commands2 commands = (Commands2)_applicationObject.Commands;
            string toolsMenuName = "Tools";
            CommandBar menuBarCommandBar = ((CommandBars)_applicationObject.CommandBars)["MenuBar"];
            CommandBarControl toolsControl = menuBarCommandBar.Controls[toolsMenuName];
            CommandBarPopup toolsPopup = (CommandBarPopup)toolsControl;
            try
            {
               Command command = commands.AddNamedCommand2(_addInInstance, "MyAddin4", "MyAddin4", "Executes the command for MyAddin4", true, 59, ref contextGUIDS, (int)vsCommandStatus.vsCommandStatusSupported+(int)vsCommandStatus.vsCommandStatusEnabled, (int)vsCommandStyle.vsCommandStylePictAndText, vsCommandControlType.vsCommandControlTypeButton);
               if((command != null) && (toolsPopup != null))
               {
                  command.AddControl(toolsPopup.CommandBar, 1);
               }
            }
            catch(ArgumentException) {}
         }
      }

      public void OnDisconnection(ext_DisconnectMode disconnectMode, ref Array custom) {}

      public void OnAddInsUpdate(ref Array custom) {}

      public void OnStartupComplete(ref Array custom) {}

      public void OnBeginShutdown(ref Array custom) {}

      public void QueryStatus(string commandName, vsCommandStatusTextWanted neededText, ref vsCommandStatus status, ref object commandText)
      {
         if(neededText == vsCommandStatusTextWanted.vsCommandStatusTextWantedNone)
         {
            if(commandName == "MyAddin4.Connect.MyAddin4")
            {
               status = (vsCommandStatus)vsCommandStatus.vsCommandStatusSupported|vsCommandStatus.vsCommandStatusEnabled;
               return;
            }
         }
      }

      public void Exec(string commandName, vsCommandExecOption executeOption, ref object varIn, ref object varOut, ref bool handled)
      {
         handled = false;
         if(executeOption == vsCommandExecOption.vsCommandExecOptionDoDefault)
         {
            if(commandName == "MyAddin4.Connect.MyAddin4")
            {
               OutputWindow outputWindow = (OutputWindow) _applicationObject.Windows.Item(Constants.vsWindowKindOutput).Object;
               OutputWindowPane outputPane = outputWindow.OutputWindowPanes.Add("Processor");
               Worker workerObject = new Worker(ref outputPane);
               uint loops = 10;
               System.Threading.Thread thread = new System.Threading.Thread(delegate() { workerObject.DoWork(loops); }); 
               thread.Start();
               handled = true;
               return;
            }
         }
      }

      private DTE2 _applicationObject;
      private AddIn _addInInstance;
   }

   public class Worker
   {
      private EnvDTE.OutputWindowPane _pcLintOutputWindowPane;

      public Worker(ref EnvDTE.OutputWindowPane pcLintOutputWindowPane)
      {
         _pcLintOutputWindowPane = pcLintOutputWindowPane;
      }

      public void DoWork(uint loops)
      {
         for (int i = 0; i < loops; i++)
         {
            System.Threading.Thread.Sleep(500);
            WriteText(i + "\n");
         }       
      }

      private void WriteText(string stringToWrite)
      {
         _pcLintOutputWindowPane.Activate();
         _pcLintOutputWindowPane.OutputString(stringToWrite);
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:03:29.850

这是我用来写入插件中的 OutputWindowPane 的内容，它会更新每次调用的文本。我正在使用VS2008，我不知道它在VS2010中是否有不同的工作方式。

```
public class OutputPane
{
    public string Name { get; private set; }

    private OutputWindowPane _outputWindowPane;
    private static object _outputWindowPaneLock = new object();

    public OutputPane(string name)
    {
        Name = name;
    }

    public void Write(string text)
    {
        CreateOutputPane(Name); // Creates the OutputWindowPane if it does not already exist.

        if (_outputWindowPane != null)
        {
            try
            {
                _outputWindowPane.Activate();
                _outputWindowPane.OutputString(text);
            }
            catch (Exception ex1)
            {
                System.Diagnostics.Debug.WriteLine("Exception writing text '" + text + "': " + ex1.ToString());
                // Exceeded maximum output pane size?
                try
                {
                    _outputWindowPane.Clear();
                    _outputWindowPane.OutputString(text);
                }
                catch (Exception ex2)
                {
                    System.Diagnostics.Debug.WriteLine("Exception writing text '" + text + "': " + ex2.ToString());
                }
            }
        }
    } 
```

编辑：我认为您还需要在后台线程上调用 OutputWindowPane.OutputString，这是我在调用 OutputPane.Write 方法时所做的。因此，使用您的代码，它将是这样的：

```
public void Exec(string commandName, vsCommandExecOption executeOption, ref object varIn, ref object varOut, ref bool handled)
{
    handled = false;
    if (executeOption == vsCommandExecOption.vsCommandExecOptionDoDefault)
    {
        if (commandName == "MyAddin4.Connect.MyAddin4")
        {
            OutputWindow outputWindow = (OutputWindow)_applicationObject.Windows.Item(Constants.vsWindowKindOutput).Object;
            OutputWindowPane outputPane = outputWindow.OutputWindowPanes.Add("Processor");
            System.Threading.Thread thread = new System.Threading.Thread(new System.Threading.ParameterizedThreadStart(OutputStringThread));
            thread.Start(outputPane);
            handled = true;
            return;
        }
    }
}

private void OutputStringThread(object obj)
{
    try
    {
        OutputWindowPane outputPane = (OutputWindowPane)obj;
        for (int i = 0; i < 10; i++)
        {
            System.Threading.Thread.Sleep(500);
            outputPane.Activate();
            outputPane.OutputString(i + "\n");
        }
    }
    catch (Exception ex)
    {
        // Handle exception
    }
} 
```

# java - Android SDK Manager，要安装什么？

> ID：12691614
> 
> 赞同：6
> 
> 时间：2012-10-02T13:51:48.220
> 
> 标签：java, android, mobile

在 Android SDK 管理器中，如果您展开任何 API，您会看到包含“SDK 平台、Google API”之类的包以及许多其他包，例如“Real3D、Bionic”等。屏幕截图：

![截屏](../Images/e4e74e85fb66ba224e82552542397a12.png)

我的问题是，所有这些包之间有什么区别，如果我想为一些最常见的 android 配置创建虚拟设备，我需要安装哪些包？我是否需要安装 SDK 平台、Google API 或任何其他软件包才能创建仿真？

SDK平台和谷歌API有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T14:09:32.980

你需要关注

1）SDK 平台（2.2、2.3 或 4.0.. 取决于您的需要）

2)SDK 工具/SDK 平台工具（用于构建、测试和调试应用程序）

Google API 充当 Google Map 的接口，而 SDK 平台将提供对平台（2.2、2.3 等）特定 API 的访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:00:29.027

基本上你只需要 SDK 平台。仅当您想使用它们的 API 时才需要其他包。例如，如果您想将 Maps-Functionality 集成到您的应用程序中。请参阅[此处](https://developers.google.com/android/add-ons/google-apis/index)了解更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-04-08T03:32:36.820

1.  开发工具包工具

    必需的。您的新 SDK 安装会安装最新版本。请务必响应 Android Studio 更新提示，以使您的 SDK 工具保持最新。

2.  SDK平台工具

    必需的。您的新 SDK 安装会安装最新的稳定版本。请务必响应 Android Studio 更新提示，以使您的 SDK 平台工具保持最新。

3.  SDK平台

    必需的。您的环境中至少需要一个平台，以便您能够编译您的应用程序。为了在最新设备上提供最佳用户体验，我们建议您使用最新平台版本作为构建目标。您仍然可以在旧版本上运行您的应用程序，但您必须针对最新版本构建，以便在装有最新版本 Android 的设备上运行时使用新功能。

[http://developer.android.com/tools/help/sdk-manager.html](http://developer.android.com/tools/help/sdk-manager.html)

# r - 使用 ggplot2 在 R 中保持一致的图形大小（图例和轴改变大小）

> ID：12691617
> 
> 赞同：5
> 
> 时间：2012-10-02T13:51:58.063
> 
> 标签：r, ggplot2

我有一个主要是美容问题。我正在使用 ggplot2 库创建四个图，然后将它们排列在一列中（使用[this](http://wiki.stdout.org/rcookbook/Graphs/Multiple%20graphs%20on%20one%20page%20(ggplot2)/)）。图表显示相同的数据，但对于四组，x 轴是时间，这就是为什么我想将图表保留在一列中的原因。

所以我将图例添加到顶部图表，并将 x 轴的标签添加到底部图表。这两个动作改变了图表的大小；添加图例会导致图形增长，添加 x 轴标签会导致图形缩小以适应这些内容。

有没有办法指定一个固定的图形大小，这会使我的布局保持一致？

我的情节： ![阴谋](../Images/4c6ef1eb6808aa753e73942e123ae63a.png)

可重现结果的代码：

```
library(ggplot2)
library(reshape)

raw_data <- structure(list(Sample = c(1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 
10L, 11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 
23L, 24L, 25L, 26L, 1L, 2L, 3L, 4L, 5L, 6L, 7L, 8L, 9L, 10L, 
11L, 12L, 13L, 14L, 15L, 16L, 17L, 18L, 19L, 20L, 21L, 22L, 23L, 
24L, 25L, 26L), Month = structure(c(12L, 12L, 11L, 11L, 10L, 
10L, 3L, 3L, 5L, 5L, 4L, 4L, 8L, 8L, 1L, 1L, 9L, 9L, 7L, 7L, 
6L, 6L, 2L, 2L, 12L, 12L, 12L, 12L, 11L, 11L, 10L, 10L, 3L, 3L, 
5L, 5L, 4L, 4L, 8L, 8L, 1L, 1L, 9L, 9L, 7L, 7L, 6L, 6L, 2L, 2L, 
12L, 12L), .Label = c("April", "Aug", "Dec", "Feb", "Jan", "July", 
"June", "March", "May", "Nov", "Oct", "Sep"), class = "factor"), 
    Channel = structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 
    1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("A", 
    "B"), class = "factor"), Amplitude = c(5000L, 
    5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 
    5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 
    5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 
    5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L, 5000L)), .Names = c("Sample", 
"Month", "Channel", "Amplitude"), row.names = c(NA, 52L), class = "data.frame")

multiplot <- function(..., plotlist=NULL, cols) {
    require(grid)

    # Make a list from the ... arguments and plotlist
    plots <- c(list(...), plotlist)

    numPlots = length(plots)

    # Make the panel
    plotCols = cols                          # Number of columns of plots
    plotRows = ceiling(numPlots/plotCols) # Number of rows needed, calculated from # of cols

    # Set up the page
    grid.newpage()
    pushViewport(viewport(layout = grid.layout(plotRows, plotCols)))
    vplayout <- function(x, y) {
            viewport(layout.pos.row = x, layout.pos.col = y)
    }

    # Make each plot, in the correct location
    for (i in 1:numPlots) {
        curRow = ceiling(i/plotCols)
        curCol = (i-1) %% plotCols + 1
        print(plots[[i]], vp = vplayout(curRow, curCol))
    }

}

mybarplot <- function(first=0, last=0) {
    # Create the barplot 
    p <- ggplot(raw_data, aes(x=Sample, y=Amplitude, fill=Channel))

    # Make it a grouped barplot with already summarised values
    p <- p +  geom_bar(position="dodge", stat="identity")

    # Apply a log10 transformation to the y-axis, and create appropriate axis ticks
    p <- p + scale_y_log10(breaks = c(5,10,50,100,500,1000,5000,10000))

    # Zoom in (barplots will not show when axis change to remove 0, so have to zoom)
    p <- p + coord_cartesian(ylim=c(1,15000), xlim=c(1,26))

    # Make it greyscale
    p <- p + scale_fill_grey()

    # Hide X label
    p <- p + opts(axis.text.x=theme_blank(), axis.title.x=theme_blank(), axis.title.y=theme_blank())
    # Change X label size
    p <- p + opts(axis.text.y=theme_text(size=7))

    # Change the Legend
    p <- p + scale_fill_manual(values=c("black", "grey75", "grey25"), name="Channel", breaks=c("A", "B"))

    #margins
    # c(top,,bottom,)
    top_margin    <- unit(c(    1, 1, -0.25, 1), "lines")
    middle_margin <- unit(c(-0.25, 1, -0.25, 1), "lines")
    bottom_margin <- unit(c(-0.25, 1,     2, 1), "lines")

    if (first) {
        # Anchor legend box to top right corner
        p <- p + opts(legend.justification=c(1,1), legend.position=c(1,1))
        # Put a white box around it
        p <- p + opts(legend.background = theme_rect(fill="white"))
        # Top margin
        p <- p + opts(plot.margin = top_margin)
        p <- p + scale_x_discrete(breaks = 1:26)
    } else {
        p <- p + opts(legend.position="none")
        if (last) {
            # Bottom margin
            p <- p + opts(plot.margin = bottom_margin)
                # label X-axis
            p <- p + scale_x_discrete(breaks = 1:26, labels=c("Sep", "", "Oct", "", "Nov", "", "Dec", "", "Jan", "", "Feb", "", "March", "", "April", "", "May", "", "June", "", "July", "", "Aug", "", "Sep", ""))

            p <- p + ylab("Amplitude")
            p <- p + xlab("Sampling time")
            # Angle x labels
            #p <- p + opts(axis.text.x=theme_text(angle=-45, hjust=0.5))
            p <- p + opts(axis.text.x=theme_text(hjust=0.5))

            # Move X title
            p <- p + opts(axis.title.x=theme_text(vjust=-0.5))
        } else {
            p <- p + opts(plot.margin = middle_margin)
            p <- p + scale_x_discrete(breaks = 1:26)
        }
    }

}

plot1 <- mybarplot(first=1)
plot2 <- mybarplot()
plot3 <- mybarplot()
plot4 <- mybarplot(last=1)

multiplot(plot1, plot2, plot3, plot4, cols=1) 
```

会话信息：

```
> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] C

attached base packages:
[1] grid      stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] reshape_0.8.4 plyr_1.7.1    ggplot2_0.9.1

loaded via a namespace (and not attached):
 [1] MASS_7.3-18        RColorBrewer_1.0-5 colorspace_1.1-1   dichromat_1.2-4    digest_0.5.2       labeling_0.1       memoise_0.1        munsell_0.3        proto_0.3-9.2      reshape2_1.2.1    
[11] scales_0.2.1       stringr_0.6.1 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:36:46.967

在您的示例中，每个情节都是相同的，但是我认为这不是您最终产品的计划。我认为最简单的方法是分面，而不是单独布置每个情节。

```
dat <- data.frame(facetvar=letters[1:5], yvar=rep(1:10, each=5), xvar=rep(letters[6:10], each=5))
ggplot(dat, aes(x=xvar, y=yvar, group=facetvar)) + 
    geom_bar(stat='identity') + 
    facet_grid(facetvar~.) 
```

如果需要，您可以先对数据进行子集化，然后使用任意构面变量。

```
ggplot(dat[sample(1:50, 40),], aes(x=xvar, y=yvar, group=facetvar)) + 
    geom_bar(stat='identity') + 
    facet_grid(facetvar~.) 
```

如果需要，您也可以提供`scales.y='free'`给。`facet_grid()`

# vb.net - VB.NET ASP.NET 2.0 字典中存在具有请求值的键时出现 KeyNotFoundException

> ID：12691622
> 
> 赞同：0
> 
> 时间：2012-10-02T13:52:24.567
> 
> 标签：vb.net, dictionary, asp.net-2.0, keynotfoundexception

![调试会话图像](../Images/4e9716c5b29444d519f535344a43359d.png) ValueList 变量定义为 Dictionary(Of String, String)

捕获的监视值显示数据 (tmpData) 的值为“1”。

ValueList 被定义为“1”的替换值是“项目资源”，这可以从 SSGCol.ValueList Watch 变量的扩展中看出。

但是，当我尝试访问该值时，我收到 KeyNotFoundException

过去我已经做过数千次这种事情，但由于某种原因，今天我无法让它发挥作用。我一定错过了一些非常明显的东西，需要有人重新审视并在他们看到我明显的错误时给我一记耳光。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:08:20.463

也许字符串中有一些不可打印的字符。尝试比较字符串中的字节，例如：

```
Dim bytes() As Byte = System.Text.Encoding.Unicode.GetBytes(tmpData) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:10:04.153

这对我有用...

```
 Dim lst As New Dictionary(Of String, String)

    lst.Add("1", "Test")

    Dim tmpS As String = String.Empty
    lst.TryGetValue("1", tmpS) 
```

# css - jquery mobile css 总是覆盖我的 css

> ID：12691629
> 
> 赞同：0
> 
> 时间：2012-10-02T13:53:03.337
> 
> 标签：css, jquery-mobile

我在 jQuery Mobile 的 css 文件之后加载我的 css：

```
<head>
    <link rel="stylesheet" href=".../1.1.1/jquery.mobile-1.1.1.min.css" />
    <link rel="stylesheet" href="main.css" />
</head> 
```

但我的保证金属性总是被覆盖：

![萤火虫显示被覆盖的边距属性](../Images/e54e0578662c98f5d1dbf28437b36730.png)

不知何故，jquery的css在我之后动态加载了吗？我尝试过使用[ThemeRoller](http://jquerymobile.com/themeroller/)，但它太简单了，我无法更改边距。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:57:12.263

你的 CSS 被覆盖的原因是因为 jQuery 的 CSS 使用它的选择器更准确。

你说所有具有类的项目`.ui-radio`都应该有边距，这是首先取的，然后在 .ui-controlgroup-vertical 内的所有具有 .ui-radio 的项目也有一个设置的边距。

一个简单的技巧是确保使用相同的选择器，`.ui-controlgroup-vertical .ui-radio`在这种情况下，如果您的 CSS 之后加载，这应该可以解决问题。否则，再使用一个父容器就可以了。

少读以使其更清楚：[http ://www.w3.org/wiki/CSS/Training/Priority_level_of_selector](http://www.w3.org/wiki/CSS/Training/Priority_level_of_selector)

# entity-framework - EF5：将存储过程中的多个结果附加到上下文

> ID：12691632
> 
> 赞同：0
> 
> 时间：2012-10-02T13:53:06.917
> 
> 标签：entity-framework, entity-framework-5

我在 Entity Framework 5 中有一个存储过程，返回多个实体结果集。将每个实体附加到上下文非常慢。有没有更好/更快/更简单的方法来做到这一点？

```
 using (var context = new MyEntities())
    {                
        var resultSet1 = context.ExecMyStoredProc();
        foreach (var a in resultSet1) context.ASet.Attach(a);
        var resultSet2 = resultSet1.GetNextResult<B>();
        foreach (var b in resultSet2) context.BSet.Attach(b);
        var resultSet3 = resultSet2.GetNextResult<C>();
        foreach (var c in resultSet3) context.CSet.Attach(c);
        .                
        .
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:19:31.747

您是否需要附加结果？据我了解，从存储过程返回的实体会自动被跟踪为 AppendOnly。

# filter - JGit - 获取影响文件/路径的所有提交 (PlotCommitList)

> ID：12691633
> 
> 赞同：1
> 
> 时间：2012-10-02T13:53:25.130
> 
> 标签：filter, path, commit, jgit

我正在尝试获取包含我的存储库的特定目录或文件的所有提交。

我尝试了以下代码：

```
public PlotCommitList getPlotCommits(String path){
    System.out.println(path);
    PlotCommitList<PlotLane> plotCommitList = new PlotCommitList<PlotLane>();
    PlotWalk revWalk = new PlotWalk(repository);
    try {

        ObjectId rootId = repository.resolve("HEAD");
        if (rootId != null) {
            RevCommit root = revWalk.parseCommit(rootId);
            revWalk.markStart(root);
            revWalk.setTreeFilter(PathFilter.create(path));
            plotCommitList.source(revWalk);
            plotCommitList.fillTo(Integer.MAX_VALUE);
            return plotCommitList;
        }

    } catch (AmbiguousObjectException ex) {
        Logger.getLogger(GitRepository.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IOException ex) {
        Logger.getLogger(GitRepository.class.getName()).log(Level.SEVERE, null, ex);
    }
    return plotCommitList;
} 
```

我不只是得到影响该文件的提交。我得到了整个列表的一些“子列表”，但不仅仅是那些影响该文件的提交。

也许 TreeFilter 不能像我想的那样工作？我应该使用其他方式来获取这些提交吗？我看到 log 命令有一个路径过滤器，但我还没有尝试过，因为它返回一个 RevCommit 列表，而对于我的 PlotCommitList，我需要一个 revwalk 来用作源。而且我认为我不能将 RevCommit 转换为 PlotCommit。

一个人在这里遇到了同样的问题（fileA 和 fileB 问题的第一个答案）：[链接 - 单击此处](https://stackoverflow.com/questions/4777453/looping-over-commits-for-a-file-with-jgit)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T19:58:39.650

您需要将`PathFilter`与`ANY_DIFF`过滤器结合起来：

```
revWalk.setTreeFilter(
    AndTreeFilter.create(PathFilter.create(path), TreeFilter.ANY_DIFF)); 
```

只有 PathFilter 我认为发生的事情是在指定树存在的地方选择所有提交（例如，从该文件的初始提交开始的所有提交）。

另请参阅[setTreeFilter 的 API 文档](http://download.eclipse.org/jgit/docs/jgit-2.1.0.201209190230-r/apidocs/org/eclipse/jgit/revwalk/RevWalk.html#setTreeFilter%28org.eclipse.jgit.treewalk.filter.TreeFilter%29)或[LogCommand](https://github.com/eclipse/jgit/blob/stable-5.4/org.eclipse.jgit/src/org/eclipse/jgit/api/LogCommand.java#L137-L138)如何执行此操作。

# javascript - 如何使用 javascript 提交 ajax drupal 表单

> ID：12691635
> 
> 赞同：3
> 
> 时间：2012-10-02T13:53:35.233
> 
> 标签：javascript, drupal-7, drupal-forms, drupal-ajax

首先，我在[那里尝试了](https://stackoverflow.com/questions/11039088/drupal-7-field-api-how-to-programmatically-send-ajax-request-specified-in-ajax)*Amar Ravikumar*解决方案，但它仍然不起作用。

我有这段代码：

```
$form['button'] = array(
  '#type' => "button",
  '#id' => "mymoduleAjaxButton",
  '#value' => t("Process"),
  '#ajax' => array(
    'callback' => "mymodule_form_callback",
    'wrapper' => "message",
    'method' => "html",
  ),
); 
```

我有一个画布，其中包含许多我可以单击的图形内容。

当我单击特定元素时，我希望提交我的 ajax 表单（就像我按下按钮一样）。

这是js代码：

```
// circle is a Kinetic.Circle object. 
circle.on("click touchcancel tap", function() {
  var fill = onClick(posX, posY);
  this.setFill(fill);
  layer.draw();
});
function onClick(x, y) {
  // Some stuff
  jQuery("#mymoduleAjaxButton").trigger("mousedown");
  return "red";
} 
```

如您所见，我正在遵循 Amar 给出的建议（见第一行），但我不起作用。我的圆圈颜色发生了变化，但没有提交表单。

我尝试过的其他解决方案：

```
jQuery("#mymoduleAjaxButton").trigger("click"); // Like mousedown
jQuery("#mymoduleAjaxForm").submit(); // It refreshes my page... Not what i want, otherwise i wouldn't use ajax
jQuery(document).ready(function() { jQuery("#mymoduleAjaxButton").trigger("click"); });
 /* Replace the click by mousedown doesn't change anything too, 
moreover i believe it's useless here to add this here... */ 
```

有谁知道我该怎么做或者知道我做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-04T08:24:39.840

我也遇到了一些麻烦，对我有用的是：

```
$('#my-form').trigger('submit'); 
```

因此，不是触发按钮的单击事件，而是触发表单提交事件。

我读到您不再从事此工作，但我想无论如何我都会与那些在搜索相同问题时遇到此线程的人分享。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-30T20:43:51.213

而不是调用提交（这将重新加载整个页面），触发提交按钮上的点击操作。

请注意，由于 AJAX，表单元素的 ID 会被替换。所以我不得不在我的 jQuery 中使用 data-drupal-selector，所以 javascript 可以多次工作。请参阅下面的代码：

```
Drupal.behaviors.myCustomModule = {
    attach: function (context, settings) {
        $('select[data-drupal-selector="edit-YOUR-FIELD"]', context).change(function(){
            $('#views-exposed-form-YOUR-VIEW-block-1 input.form-submit').trigger('click');
        });
    }
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-06-06T10:13:13.757

d8 暴露过滤器的示例：

```
/*
*   @file
*
*
* */

(function ($, Drupal, drupalSettings) { // closure
  'use strict';
  Drupal.behaviors.videos = {
    attach: function (context) {

      $('main', context).ready(init);

      function init() {

        SelectToUlFilter();

        $('ul').on('click', '.selectlist-option', function () {
          //stockage du filtre selectionné
          var selected_filter = $(this).attr('data-value');
          localStorage.setItem('data-value', selected_filter);

          var $selectlist = $(this).closest('.selectlist');
          $selectlist.find('.selectlist-option').removeClass('active');
          $(this).addClass('active');
          $($selectlist.data('select')).val($(this).data('value'));
          $('.views-exposed-form input.form-submit').trigger('click');
          SelectToUlFilter();
        })

      }

      /**
       * convertit select/option to ul/li
       * affranchit de l'usage du submit bouton
       * memoire des clicks
       */
      function SelectToUlFilter() {

        $(".views-exposed-form .form-select").once().each(function () {
          $(this).hide();
          $(".views-exposed-form").find("input[type='submit']").addClass("visually-hidden");

          var $ul = $("<ul/>", {
            'class': 'selectlist'
          });
          $ul.data('select', $(this));
          $(this).find('option').each(function () {
            var $li = $("<li/>", {
              'class': 'selectlist-option',
              'data-value': $(this).val(),
              'text': $(this).text(),
              'selected': 'selected'
            });
            $ul.append($li);
          });
          $(this).after($ul);

          //affichage du filtre selectionné
          if (localStorage.getItem("data-value") === null) {
            localStorage.setItem('data-value', 'All');
          }
          var selected_filter = localStorage.getItem('data-value');
          $("li[data-value=" + selected_filter + "]").attr('selected', "selected");

        });
      }
    }
  };
}(jQuery, Drupal, drupalSettings)); 
```

# javascript - 如何在“返回 this”的显示模块模式中处理本地函数

> ID：12691636
> 
> 赞同：0
> 
> 时间：2012-10-02T13:53:41.797
> 
> 标签：javascript, revealing-module-pattern

我喜欢揭示模块模式。我将有私人功能，我想公开并返回它们。但是我的显示模块模式中可能还有一些本地函数“返回这个”......

```
var player = function(){
//my local variable scope...

oplayer.damage = function(){
    if(!this.grace){
        this.shield--;
        if (this.shield == 0){
            return this;
        }
    }
};
      ...

      return {
      damage : oplayer.damage
      }
      }(); 
```

如果我明确返回某些东西，可以“返回这个”吗？（在使用显示模块模式的上下文中）。如果没有，我如何转换我的本地函数 oplayer.damage 以在适当的上下文中使用？感谢您的任何建议！我只是想围绕整个“归还这个”概念来思考。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:03:40.583

请先查看关键字是什么，[在 MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)`this`上有很好的介绍。

> 如果我明确返回某些东西，可以“返回这个”吗？

是的当然。这是方法可链接性的默认模式 - 一切都返回它被调用的对象。但是，要依赖它，您需要在每种情况下都将其退回，而不仅仅是在防护罩关闭时。

如果这不是您的目标，只需使用普通`return;`语句（结果`undefined`就像没有返回语句一样）。

> 在使用显示模块模式的上下文中

您在哪里定义该函数绝对无关紧要。

> 将我的函数转换为在适当的上下文中使用？

（我假设您使用“*上下文*”指的是`this`这里的对象）

你不能真的，值`this`总是取决于函数的调用。当然，您可以[`.bind()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)将函数应用于您的`player`对象，或者直接只返回`player`而不是`this`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:06:02.580

应该没问题，因为“this”与执行有关。因为您在作为“削减”对象的一部分的公共函数上返回 this，所以您只会得到被削减的对象。因此，如果您考虑以下情况，我认为您尝试做的事情应该没问题：

```
var test = function(){
   var pri = function(){
       console.log("Private");
   };

   var pub = function(){
       pri();
       console.log("pub");
       return this;
   }

   return {
       pub: pub
   };
}();

console.log(test.pri); //-> undefined
console.log(test.pub); //-> function(){…}
console.log(test.pub()); //-> "Private" "pub" [Object {…}]
console.log(test.pub().pri); //-> "Private" "pub" undefined 
```

# ajax - Jqgrid 和数据发送错误

> ID：12691637
> 
> 赞同：0
> 
> 时间：2012-10-02T13:53:42.587
> 
> 标签：ajax, post, jqgrid

我有这个代码..

```
var _codSelected="";

$("#list").jqGrid({
url: '/modulos/mantenimiento/Proveedores.ashx',
datatype: 'xml',
mtype: 'GET',
colNames: ['Codigo' //Some more colnames and colmodels]
colModel: [{ name: 'Codigo', index: 'PRg_Codigo', edittype: 'select',
            editable: true, editrules: { edithidden: false }, editoptions:
            { size: 30, dataUrl: '/modulos/mantenimiento/grupoProveedores.ashx?
            oper=selectAllGroups }, sortable: true }
],
onSelectRow: function (rowid) {
_codSelected = rowid;
//alert(_codSelected);
}, 
```

当我在 jqgrid 中选择一行时，警报（已注释）向我显示我想通过 dataUrl 发送给我的处理程序的值，但始终为空。警报显示它，但我不能将它包含在 url 中！有人能告诉我我该怎么做吗？

谢谢。

**编辑**

我已修复添加此事件..

```
ajaxSelectOptions: {
data: {
codSelected: function () {
return _codSelected;
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:57:12.803

那是因为在数组声明`_codSelected`的范围内只是一个空字符串。`colModel`它只会成为回调函数中的行 ID。

如果你想`_codSelected`有一个附加到的值`dataUrl`，你需要在你的对象字面量中引用它之前给它一个值。

# android - 存储地图位置 - android

> ID：12691643
> 
> 赞同：0
> 
> 时间：2012-10-02T13:53:53.083
> 
> 标签：android, asynchronous, gps, location

我正在尝试获取 GPS 位置并将其解析为字符串，然后将其解析为可点击的 URL。我已经完成了获取位置的代码，这很有效，但是因为获取位置可能需要一段时间，所以字符串在解析位置之前就已经执行了。我试过搞乱进程对话框等，但我无法让它工作。

见代码

公共类 ConfirmScreen 扩展 Activity{

```
String mapCoord = "http://maps.google.com";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_confirm_screen);

    LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
    LocationListener mLocListener = new MyLocationListener();
    mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,0,0, mLocListener);

    sendEmail();
    playSound();

}

public void backHome(View view) 
{
    Intent intent = new Intent (this, MainScreen.class);
    startActivity(intent);
}

// Method to start playing and looping a sound.

public void playSound()
{
    MediaPlayer clickSound = MediaPlayer.create(this, R.raw.warning);
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    Boolean soundCheck = sp.getBoolean("SOUND", false);
    if (soundCheck)
    {
        clickSound.start();
    }

}// method end

public void sendEmail()
{
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(this);
    String nameValue = sp.getString("NAME", "failed to get name");
    String emailValue = sp.getString("EMAIL", "failed to get email");
    Intent i = new Intent(Intent.ACTION_SEND);
    i.setType("message/rfc822");
    i.putExtra(Intent.EXTRA_EMAIL, new String[]{emailValue});
    i.putExtra(Intent.EXTRA_SUBJECT, "Email sent from DON'T PANIC - A Chris O'Brien Project");
    i.putExtra(Intent.EXTRA_TEXT, "Hi there\n" + nameValue + " is in mortal danger. Please see the co-ords attached and run to their rescue!" +
            " If you don't see any co-ords, they didn't check the box and assume you know where they are.\nKind Regards\nDon't Panic! \n\n\n" +  mapCoord);

    try
    {   startActivity(Intent.createChooser(i, "Send mail...."));
    } 
    catch (android.content.ActivityNotFoundException ex){

        Toast.makeText(ConfirmScreen.this, "There are no email clients installed or set up", Toast.LENGTH_SHORT).show();
    }
}

public class MyAsyncTask extends AsyncTask<Void, Void, Result>{

    private Activity activity;
    private ProgressDialog progressDialog;

    private double longitude;
    private double latitude;
    private String countryCode;

    public MyAsyncTask(Activity activity, double longitude, double latitude) {
        super();
        this.activity = activity;
        this.longitude = longitude;
        this.latitude = latitude;
    }

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        ProgressDialog.show(activity, "", "Looking for GPS satellites...");
    }

    @Override
    protected Result doInBackground(Void... v) {
        Geocoder geocoder = new Geocoder(activity, Locale.getDefault());
        List<Address> addresses;
        try {
            addresses = geocoder.getFromLocation(latitude, longitude, 1);
            countryCode = addresses.get(0).getAddressLine(2);
        }catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
            Toast.makeText(activity, "Location is not available, please try again later.", Toast.LENGTH_LONG).show();
        }
        if(countryCode==null){
            Toast.makeText(activity, "Location is not available, please try again later.", Toast.LENGTH_LONG).show();
        }
        Toast.makeText(activity, countryCode, Toast.LENGTH_LONG).show();
        return null;
    }

    @Override
    protected void onPostExecute(Result result) {
        progressDialog.dismiss();
        Toast.makeText(activity.getApplicationContext(), "Finished.", 
        Toast.LENGTH_LONG).show();
    }
    }

//Location Listener
public class MyLocationListener implements LocationListener
{

    @Override
    public void onLocationChanged(Location location) {
        double lng = location.getLatitude();
        double lat = location.getLongitude();
        MyAsyncTask task = new MyAsyncTask(ConfirmScreen.this, lng, lat);
        task.execute();
        Toast.makeText(getApplicationContext(), "Done :D", Toast.LENGTH_LONG).show();

        String text = "Current Location is \nLat: " + lng + " \nLng: " + lat;
        mapCoord =  Double.toString(lng) + " " + Double.toString(lat);

        Toast.makeText(getApplicationContext(), text, Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onProviderDisabled(String provider) {
        Toast.makeText(getApplicationContext(), "GPS Disabled", Toast.LENGTH_SHORT).show();
    }

    @Override
    public void onProviderEnabled(String provider) {
        Toast.makeText(getApplicationContext(), "GPS Enabled", Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_confirm_screen, menu);
    return true;
}

} 
```

编译没有错误，但它不符合我的意图。我已经阅读了其他代码并尝试实现自己的代码，但我可能搞砸了一些东西。

1) onCreate 获取位置 2) 应弹出一个对话框，直到收到 GPS 坐标 3) 这些坐标应传递给字符串 4) 与坐标一起发送电子邮件（这工作正常） 5)如果选中该框，则会播放声音（同样有效）

我得到了坐标，但困难在于在应用程序有机会获得坐标之前调用了电子邮件方法。我不想使用 lastKnownCo-ords。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:08:27.650

1/ 否。onCreate 请求在未来某个时间点将位置提供给 mLocListener，但无论如何在 onCreate 返回之后。onCreate 还会启动一个新的 Activity 来写一封电子邮件。在 htis 点没有检索到坐标。

*2/ 否。当*接收到 GPS 坐标时，会打开一个对话框。

3/ 不完全是。坐标被传递给地理编码器并转换为地址。我不知道为什么，因为你不使用这个地址（除了显示）

4/ 不。坐标字符串是在 3/ 中创建的，但电子邮件是在 1/ 中发送的，因此之前很多。

你真正想做的是在收到坐标*后*发送邮件，也就是在 onLocationChanged 方法中。

# c - c - 谢尔宾斯基三角形中的分形

> ID：12691647
> 
> 赞同：3
> 
> 时间：2012-10-02T13:54:07.967
> 
> 标签：c, fractals

我正在尝试用 c 编写一个项目，该项目显示一个名为 Sierpinski 分形的分形（其中节点由“#”表示）。所以一个 1-sierpinski 三角形看起来像：

```
##
# 
```

2-谢尔宾斯基三角形

```
####
# #
##
# 
```

等等...这里有一个链接可以找到它的样子： http: [//fr.wikipedia.org/wiki](http://fr.wikipedia.org/wiki) /Triangle_de_Sierpiński

我被告知它可以在没有任何循环的情况下完成，只需通过递归方法即可。所以我尝试了类似的东西：

```
//extracting the power of two's index
int puiss_2(int N){
    int i=0,j=1;
    for(i=0;i<N;i++){
        j=j*2;
        i++;
    }
    return j;
}

//the recursive method
void fractal(int N)
{
    int M;
    M= puiss_2(N);

    if(M==0){
        printf("##\n");
        printf("# ");
    }
    else{
        fractal(N-1);
        fractal(N-1);
        printf("\n");
        fractal(N-1);
        printf(" ");
    }
}

int main()
{
    int N;
    scanf("%d",&N);
    fractal(N);
} 
```

当然它不起作用，因为当我跳到一条线时，我无法反转它。所以当我调用它两次时：

分形（N-1）；分形（N-1）；

两个连续的动机并没有聚集在一起......有没有人知道如何做到这一点？或者我的算法设计完全错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-20T01:53:46.453

这是一些可能很复杂但递归的代码！

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void sierpinsky(int N, char c[1000]){
    int i=0,j,k,l,born;

    for(i=0;i<N;i++){printf("%c",c[i]);}
    printf("\n");

    if(N==1){}
    else{
        if((c[0]=='#')&&(c[1]=='#')&&(c[2]=='#')){
            for (j=0;2*j<N;j++){
                if(c[2*j]=='#'){
                    c[2*j]='#';c[2*j+1]=' ';
                }
                else{
                    c[2*j]=' ';c[2*j+1]=' ';
                }
            }
        }
        else if ((c[0]=='#')&&(c[1]!='#')&&(c[2]=='#')){
                for (j=0;4*j<N;j++){
                    if(c[4*j]=='#'){
                        c[4*j]='#';c[4*j+1]='#';c[4*j+2]=' ';c[4*j+3]=' ';
                    }
                    else{
                        c[4*j]=' ';c[4*j+1]=' ';c[4*j+2]=' ';c[4*j+3]=' ';
                    }
                }
            }
        else if ((c[0]=='#')&&(c[1]!='#')&&(c[2] !='#')){
                k=0;
            while(c[k+1] !='#'){k++;}
            born = k+1;
            j=0;

            while(j<N){
                if((c[j]=='#')&&(c[j+born]=='#')){
                for(l=0;l<born;l++){
                    c[j+l]='#';
                    }
                    j=j+born+1;
                }

                else if ((c[j]!='#')&&(c[j-1+born]=='#')&&(c[j-1+2*born] !='#'))
                {
                    c[j-1]='#';
                    for(l=0;l<born;l++){
                        c[j+l]='#';
                    }
                    j=j+born+1;
                }
                else{
                    c[j-1]= ' ';
                    c[j]=' ';
                    j++;
                }
            }
        }
        else if ((c[0] =='#')&&(c[1] =='#')&&(c[2] !='#')){
            for (j=0;4*j<N;j++){
                if(c[4*j]=='#'){
                    c[4*j]='#';c[4*j+1]=' ';c[4*j+2]=' ';c[4*j+3]=' ';
                }
                else{
                    c[4*j]=' ';c[4*j+1]=' ';c[4*j+2]=' ';c[4*j+3]=' ';
                }
            }

        }
            else{}

            sierpinsky(N-1, c);
        }
    }

int main()
{   int i,size;
    scanf("%d",&size);
    char c[1000];
    for(i=0;i<size;i++){c[i]='#';}
    for(i=size;i<1000;i++){c[i]='a';}
    sierpinsky(size, c);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:03:42.397

我认为你不需要为此递归。设一个三元组为`#`1 组。所以`n`=的值`No. of levels of the set`你应该在另一个下面打印一个。在第一行，打印集合 n 次。在下一行，n-1 次，以此类推。反复尝试。
编辑：如果您正在寻找递归解决方案，请忽略我的回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-23T20:29:47.967

您可能可以使用帕斯卡三角形对此进行编码。1 1 1 1 2 1 1 3 3 1 1 4 6 4 1

如果你可以用循环将这个三角形作为一个整体打印出来，那么，也许你可以跳过偶数。

要打印普通三角形，只需计算与您想要的行数相关的空格数，并使用 for 循环（或其中几个）进行编码。检查哪个（帕斯卡）数字对应于哪个打印并跳过偶数.

# javascript - 测试加载谷歌分析失败

> ID：12691650
> 
> 赞同：1
> 
> 时间：2012-10-02T13:54:18.857
> 
> 标签：javascript, jquery

我注意到 stackoverflow 有一些 JS 代码会生成：“堆栈溢出需要来自另一个域的外部 JavaScript，它被阻止或无法加载。”的警告。不久前，当 Google Analytics 无法正确加载时，这发生在我身上。

我该怎么做这样的事情？

注意：我可以正确加载所有其他 JS，这仅适用于谷歌分析，有时永远不会加载或永远需要。

当我检查他们的代码时：

```
StackExchange.init = function () {
    var e = function (a) {
        if (!window.jQuery) if ("complete" != document.readyState) setTimeout(function () {
            e(a)
        }, 1E3);
        else {
            var d = document.createElement("div");
            d.id = "noscript-padding";
            var g = document.createElement("div");
            g.id = "noscript-warning";
            g.innerHTML = a + " requires external JavaScript from another domain, which is blocked or failed to load.";
            document.body.insertBefore(d, document.body.firstChild);
            document.body.appendChild(g)
        } 
```

但我不确定 setTimeout() 发生了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T13:59:19.910

`setTimeout`他们等到页面完全加载。该函数调用自身，`e`直到1000 => 1 秒：`document.readyState``complete``1E3`

```
if ("complete" != document.readyState) setTimeout(function () { e(a) }, 1E3); 
```

如果您想对 Google Analytics 做同样的事情，请查看：[javascript - Detect if Google Analytics is loaded?](https://stackoverflow.com/questions/1954910/javascript-detect-if-google-analytics-is-loaded-yet)

# android - 将两个arrayList列表合并为一个android

> ID：12691651
> 
> 赞同：0
> 
> 时间：2012-10-02T13:54:20.777
> 
> 标签：android

我想将两个`arrayList`列表合并为一个 list1 并且列表 2 包含 `list1`：ahm,sam,ram `list2`:1 1 0 我想将 list1 的第一个位置与第一个位置一起放入列表 1 例如：想要调用`(ram,0) (ahm,1)`等等....？

```
ArrayList<String> list1=new ArrayList<String>();

ArrayList<String> list2=new ArrayList<String>(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:00:01.320

所以你想把键和值放在一个列表中吗？然后你需要一个`HashMap`才能得到这个：

```
HashMap<String, Integer> myMap = new HashMap<String, Integer>();
for(int i = 0; i < list1.size(); i++){
    myMap.put(list1.get(i), list2.get(i));
} 
```

编辑：所以你想将每个列表的两个元素放入一个新列表中，`String`格式为`(x,y)`你需要执行以下操作：

```
ArrayList<String> list3 = new ArrayList<String>();
for(int i = 0; i < list1.size(); i++){
    // if list2 contains string represented with numbers
    String str = list1.get(i) + "," + list2.get(i); 
    // if list2 contains integers
    String str = list1.get(i) + "," + String.valueOf(list2.get(i)); 
    list3.add(str);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:02:10.850

我不完全明白你的意思，但可能是这样的：（假设你有两个相同大小的列表）

```
for(int i=0; i < list1.size(); i++) {
  list1.get(i) = list1.get(i) + "," + list2(i);
} 
```

但是，如果我理解正确，您可能需要`HashMap`：

```
HashMap<String, Integer> map = new HashMap<String, Integer>();
for(int i = 0; i < list1.size(); i++){
  map.put(list1.get(i), list2.get(i));
} 
```

对于真正的合并，使用 list1.addAll(list2);

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:05:22.090

你可以写一个方法来成功你想做的事情：

```
String getPair( int position )
{
    return list1.get( position ) +","+ list2.get( position );
} 
```

# c# - 如何在 WPF 运行时在 Canvas 上移动控件？

> ID：12691656
> 
> 赞同：1
> 
> 时间：2012-10-02T13:54:51.313
> 
> 标签：c#, wpf

我正在尝试移动在运行时生成的控件并希望在 WPF 中的画布上移动。

我想构建像报表生成器这样的应用程序（不完全像水晶报表）。但想要构建一些我可以将控件（`Label,TextBox,RichTextBox,Image Control`等）放在画布（WPF）上然后在画布上移动的东西。

我无论如何都在寻找画布上的移动控件，并在画布上捕获位置，以便我可以生成（XPS 或 PDF）格式的报告。我制作报告没有问题。

我只面临在运行时移动控制和添加的问题`TextBlock`。`ImageControl`

我真的需要这方面的指导。

有人知道吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:10:21.933

您可以通过以下方式获取和设置 Canvas 上元素的左坐标

```
Canvas.GetLeft(element) and Canvas.SetLeft(element, number) 
```

还有

```
Canvas.GetTop/Canvas.SetTop, Canvas.GetRight/Canvas.SetRight, Canvas.GetBottom/Canvas.SetBottom and Canvas.GetZIndex/Canvas.SetZIndex 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-10T21:59:14.540

# WPF：Windows 演示基础 | C 夏普：C#

### [使用（ System.Windows.Thickness](https://docs.microsoft.com/en-us/dotnet/api/system.windows.thickness)）移动控件

* * *

```
//Variables ----------------------
static System.Boolean MMove = false;
static System.Windows.Point MPoint1;
static System.Windows.Point MPoint2;
static System.Windows.Controls.Control MyControl = null;
static System.Windows.Controls.Canvas MyCanvas = null; 
```

> [?]在应用程序中完成移动控制所需的**静态变量；**
> --- *MyCanvas*必须在您的应用程序启动时指定；（或使用前的任何时候）

* * *

```
//MouseEvents --------------------
yourControl.MouseDown += new System.Windows.Input.MouseButtonEventHandler(MouseDown);
yourControl.MouseUp += new System.Windows.Input.MouseButtonEventHandler(MouseUp);
yourControl.PreviewMouseMove += new System.Windows.Input.MouseEventHandler(MouseMove); 
```

> [?]要分配给您的控件的**鼠标事件；**

* * *

```
//MouseDown EventHandler ---------
static void MouseDown(object sender, System.Windows.Input.MouseButtonEventArgs e)
{
    if (sender is UserControl1)
    {
        //get control clicked
        MyControl = (UserControl1)sender;

        //get coordinates
        MPoint1 = e.GetPosition(MCanvas);
        MPoint2 = e.GetPosition(MyControl);

        //update coordinates
        MPoint1.X -= MyControl.Margin.Left + MPoint2.X;
        MPoint1.Y -= MyControl.Margin.Top + MPoint2.Y;

        //prevent mouse loosing focus of the control
        System.Windows.Input.Mouse.Capture(MyControl);

        //enable move indicator
        MMove = true;
    }
} 
```

* * *

```
//MouseMove EventHandler ---------
static void MouseMove(object sender, System.Windows.Input.MouseEventArgs e) {
    if (sender is UserControl1) {
        //check move indicator
        if (MMove == true)
        {
            //get control moved
            MyControl = (UserControl1)sender;

            //get container pointer
            var currentPoint = e.GetPosition(MCanvas);

            //check which mouse button is pressed
            if (e.LeftButton == System.Windows.Input.MouseButtonState.Pressed)
            {
                //update control margin thickness
                MyControl.Margin = new System.Windows.Thickness(
                    currentPoint.X - MPoint1.X - MPoint2.X,
                    currentPoint.Y - MPoint1.Y - MPoint2.Y,
                    MyControl.Margin.Right,
                    MyControl.Margin.Bottom
                );
            }
        }
    }
} 
```

* * *

```
//MouseUp EventHandler ---------
static void MouseUp(object sender, System.Windows.Input.MouseButtonEventArgs e)
{
    MMove = false;
    MyControl = null;
    System.Windows.Input.Mouse.Capture(null);
} 
```

> [?] **EventHandler**用于执行移动控件的逻辑；

* * *

# java - 为什么我的 BufferedImage 不会显示在 .jar 文件中？

> ID：12691659
> 
> 赞同：1
> 
> 时间：2012-10-02T13:55:03.620
> 
> 标签：java, jar, jlabel, bufferedimage

好的，所以我创建了一个缓冲图像以显示在 JLabel 上。当我显示文件位置时，它需要一个 src/ 在我要访问的文件夹前面，否则会出现错误，我将看不到缓冲图像...我知道如果我把 'src/'在 resImg 前面，BufferedImage 不会显示在 IDE 之外。任何人都可以帮忙吗？这是在 IDE 内部工作的代码。从 .jar 文件外部运行时，图像不显示。

```
static File f = new File("src/resImg/banner.png");

try {
        banner = ImageIO.read(f);
        picLabel = new JLabel(new ImageIcon(banner));
        LabelPanel.add(picLabel);
    } catch (IOException ex) {
        Logger.getLogger(GameStart.class.getName()).log(Level.SEVERE, null, ex);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T13:57:37.847

当资源在 jar 文件中时，它不是本地文件系统上的文件。你应该使用

```
URL imageSource = getClass().getResource("/resImg/banner.png");
if (imageSource == null) {
    // Handle the resource being missing
}
picLabel = new JLabel(new ImageIcon(imageSource)); 
```

在这里，您从类加载器中获取资源，这显然可以访问您的 jar 文件中的文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T13:59:59.387

您不能`File`为 JAR 文件中的资源创建对象。改用这个。

```
URL imgurl = this.getClass().getClassLoader().getResource("resImg/banner.png");
picLabel - new JLabel(new ImageIcon(imgurl)); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:00:31.183

你必须找到一个父目录，相对路径可以从like开始

*   工作区目录
*   进程开始的目录

相对路径是从 java 进程开始的“realtiv”，因此路径可能会不时改变。

如果图片放在罐子里，可以使用

```
getClass().getResource("relativ jar path") 
```

用于查找图像。罐子本身知道它放在哪里。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T13:59:08.823

如果要从 jar 中获取图像，请像这样使用 smth：

```
URL imageurl = getClass().getResource("/images/imagename"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T13:59:44.033

最可能的原因是您的图像未打包在 jar 文件中（使用 jar / zip 工具验证这一点）。

如果图像存在但不显示，那是因为您试图从相对于工作目录的文件系统中读取它（当然它不存在）

因此，正确的解决方案是从类路径中读取图像：

```
Thread.currentThread().getContextClassloader().getResourceAsStream(... path to your image relative to jar root ---) 
```

# php - 如何在 php/mysql 中对时间间隔进行分组并根据这些时间组获取统计信息？

> ID：12691660
> 
> 赞同：5
> 
> 时间：2012-10-02T13:55:04.567
> 
> 标签：php, mysql, statistics, timestamp

我是 php 新手，但时间/日期操作有问题。

我需要统计一些商店的每日/每月/每年访问量。有一个带有“统计”表的 mysql 数据库和`fields: "statistic_id" ( integer, primary key ) , "visitors" ( integer ), and "dateAndTime" ( timestamp )`. 我有一个表单，用户可以在其中输入到店的访客人数，然后使用 now() 函数将该数字连同时间和日期一起插入数据库。

所以基本上我的数据库看起来像：

```
statistic_id , visitors , timeAndDate <br />
1............, 3........., 2012-09-29 14:45:02 <br />
2............, 5........., 2012-09-29 14:46:31 <br />
3............, 2........., 2012-09-29 18:48:11 ...etc. 
```

我需要做的是汇总并显示在特定时间间隔内来的所有访客。 `09h-12h ; 12h-15h ; 15h-18h ; 18h-21h`. 所以我需要在表格中显示所有这些间隔和每个访问者的数量。问题是我不知道如何提取这些间隔，然后为他们获取访问者的总和。我正在尝试我所知道的一切，我能找到，但没有成功。此外，我还必须获取月度和年度统计数据，那么我如何才能`12 months`从该`timeAndDate`列中获取所有数据`sum all visitors for each month`呢？

有谁知道如何做到这一点，并愿意详细解释我吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:06:14.230

在 09:00 到 12:00 之间接待访客

```
SELECT
    SUM(`visitors`)

FROM
    `my_table`

WHERE
    HOUR(`timeAndDate`) BETWEEN 9 AND 12 
```

按月吸引访客

```
SELECT
    MONTH(`timeAndDate`),
    SUM(`visitors`)

FROM
    `my_table`

GROUP BY
    MONTH(`timeAndDate`) 
```

按年吸引游客

```
SELECT
    YEAR(`timeAndDate`),
    SUM(`visitors`)

FROM
    `my_table`

GROUP BY
    YEAR(`timeAndDate`) 
```

在表格中输出月份的简单 PHP 示例

```
<?php

    // Connect to database
    $db = mysqli_connect('localhost', 'root', 'root', 'test') or die('Could not connect to database');

    // Prepare sql question
    $sql = "SELECT
                MONTHNAME(`timeAndDate`) AS `month`,
                SUM(`visitors`) AS `visitors`

            FROM
                `test`

            GROUP BY
                MONTH(`timeAndDate`)";

    // Query the database
    $result = mysqli_query($db, $sql);

    // Begin table
    print '<table><thead><tr><th>Month</th><th>Visitors</th></tr></thead><tbody>';

    // Loop result
    while($row = mysqli_fetch_assoc($result)) {
        print "<tr><td>{$row['month']}</td><td>{$row['visitors']}</td></tr>";
    }

    // End table
    print '</tbody></table>';

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:04:25.000

WHERE DATE_FORMAT(timeAndDate,'%k') 介于 9 和 12 之间

日期格式：http : [//www.w3schools.com/sql/func_date_format.asp](http://www.w3schools.com/sql/func_date_format.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:08:02.533

```
SELECT DATE(timeAndDate), SUM(visitors) FROM Table
WHERE 
DATE_FORMAT(timeAndDate,'%k') BETWEEN 9 AND 12
AND YEAR(timeAndDate) = 2012
GROUP BY MONTH(timeAndDate) 
```

# css - 插入表中水平边框的边距

> ID：12691661
> 
> 赞同：0
> 
> 时间：2012-10-02T13:55:06.010
> 
> 标签：css

我有一张桌子坐在一个带有彩色背景的 div 内。我正在为整个表格使用边框样式：插图。表格的每一行都需要有一个底部边框，我也完成了。但是，这些底部边框会扩展表格的整个宽度。我想在左右两边留一些空白，就好像桌子的左右两边都有宽阔的白色边框一样。

我怎样才能做到这一点并同时保留插图？我唯一能想到的就是将所有内容嵌套在一个带有插图的外部单单元表中。有没有更优雅的方式？

FWIW，这是我当前的代码：

## CSS

```
.table {
  width: 274px;
  height: 300px;
  border-collapse: collapse;
  background-color: #ffffff;
  border-color: #999999;
  border-style: inset;
}

.table td {
  margin: 6px 0px 6px 10px;
  padding: 6px 0px 6px 10px;
  border-bottom:thin;
  border-bottom-color: #999999;
  border-bottom-style: solid;
} 
```

## HTML

```
<div id="item" class="color1">
  <h3>TITLE</h3>
  <table class="table">
    <tr>
      <td>TEXT R1<C1/td>
      <td>TEXT R1 C2</td>
    </tr>
    <tr>
      <td>TEXT R2 C1</td>
      <td>TEXT RC C2</td>
    </tr>
   </table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:06:02.787

你可以把

```
margin-right margin-left 
```

表的或

```
padding-left padding-right 
```

取决于您希望如何查看此空白区域。

# python - 用于变量 z 的 Numpy 切片 x、y、z 数组

> ID：12691665
> 
> 赞同：3
> 
> 时间：2012-10-02T13:55:16.627
> 
> 标签：python, arrays, numpy

我有一个 3d 位置数据数组，我想从中获取`2-d`切片。然而，切片的`z`深度随`x`（并`y`最终）变化。

例如一个数组`100x100x100`，我希望第一个切片是从开始的平行四边形

`x=0,y=0 => x=100,y=100`包含时`z`方向上的点，并随时间线性变化。所以一种对角线切片。`0-25``x=0``z=25-50``x=100`

有没有一种有效的方法可以在 numpy. 理想情况下像

```
 newarray = oldarray[z> x/100*25.0 && z < 25+x/100*25.0] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:36:46.183

您可以使用[`map_coordinates`](http://docs.scipy.org/doc/scipy/reference/generated/scipy.ndimage.interpolation.map_coordinates.html). 下面是一个 3x3x3 体积的小例子：

```
a = np.arange(27).reshape(3,3,3)
xi,yi = np.meshgrid(range(3),range(3))
zi = xi*.25+yi*.25
inds = np.array([xi.reshape(1,9),yi.reshape(1,9),zi.reshape(1,9)])
ndimage.map_coordinates(a,inds).reshape(3,3)
>> array([[ 0,  9, 18],
       [ 3, 12, 22],
       [ 6, 16, 25]]) 
```

请注意，在不进行所有重塑的情况下，可能有更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:02:16.830

因为您想要的数据可能无法表示为原始的跨步视图，所以您必须使用*高级索引*来提取您想要的坐标。

```
c = np.r_[:100]
xi = c.reshape((100, 1, 1))
yi = c.reshape((1, 100, 1))
zi = np.empty((100, 100, 25), dtype=int)
for x in xrange(100):
    for y in xrange(100):
        zi[x,y] = np.arange(x*25/100, x*25/100+25) # or whatever other function

newarray = oldarray[xi, yi, zi] 
```

`oldarray`使用 numpy 数组`xi`, `yi`,切片`zi`会触发高级索引。Numpy 将创建一个新的数组，其形状与通过广播`xi`, `yi`, `zi`(所以在这种情况下，因为`xi`is (100, 1, 1), `yi`is (1, 100, 1), `zi`is (100, 100, 25 ) )，输出将是 (100, 100, 25))。

`xi`然后， Numpy 使用`yi`和的相应元素（通过广播）填充该数组`zi`，这样`newarray[i, j, k] = oldarray[xi[i, 0, 0], yi[0, j, 0], zi[i, j, k]]`

# jsp - 如何使用 JSP 创建复合组件？

> ID：12691668
> 
> 赞同：3
> 
> 时间：2012-10-02T13:55:21.930
> 
> 标签：jsp, jsf, composite-component

我正在尝试在 JSF 中创建一个复合组件，我想要文件类型`.jspf`而不是`.xhtml`我在网上遇到的所有示例都是 XHTML。我只是好奇我们是否可以使用 JSP 编写复合组件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:49:24.593

不，那是不可能的。[复合组件](https://stackoverflow.com/tags/composite-component/info)特定于[Facelets 2.0](https://stackoverflow.com/tags/facelets/info)视图技术（或“ XHTML”，因为您错误地过度生成了它）。Facelets 基本上是遗留 JSP 视图技术的[继承者。](http://docs.oracle.com/javaee/6/tutorial/doc/giepx.html)自 JSF 2.0 以来，JSP 作为视图技术已被**弃用。**

在 JSP 中，最接近您可以实现此目的的是[标记文件](http://docs.oracle.com/javaee/5/tutorial/doc/bnama.html)。另请参阅此答案以获取具体示例：[JSF 1.2 custom component from jsp:include](https://stackoverflow.com/questions/9435367/jsf-1-2-custom-component-from-jspinclude/9441652#9441652)。

或者更好，只是[迁移到 Facelets](https://stackoverflow.com/questions/4441713/migrating-from-jsf-1-2-to-jsf-2-0/4532870#4532870)。它提供[了比 JSP 更多的模板优势](https://stackoverflow.com/questions/6822000/when-to-use-uiinclude-tag-files-composite-components-and-or-custom-componen/6822269#6822269)。

# iphone - 编码时捕获 NS_AVAILABLE_IOS

> ID：12691673
> 
> 赞同：3
> 
> 时间：2012-10-02T13:55:38.090
> 
> 标签：iphone, sdk, ios6

我知道如何更改支持的最低操作系统`IPHONEOS_DEPLOYMENT_TARGET`。我目前正在 Xcode 4.5 下开发并使用 iOS 6.0 SDK。

我想做的是找到一种方法，每当我使用标记的代码时在编译中抛出警告：NS_AVAILABLE_IOS(6_0)

这样我就可以确保我不会错过任何会导致用户设备崩溃的“是的，但是您使用的是 iOS 5，所以不要使用此代码”区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:04:26.857

`NS_AVAILABLE_IOS(6_0)`当 SDK 低于 6.0 时定义`__attribute((unavailable))`为……但当 SDK 为 6.0 或更高版本时定义为无。

因此，只要您使用 SDK 6.0 进行编译，从概念上讲`#define NS_AVAILABLE_IOS(6_0) /* noop */`，您将无法检测到任何东西。

唯一的选择是重新定义`IPHONE_OS_VERSION_MAX_ALLOWED`以欺骗编译器并使其认为它使用较旧的 SDK，但我什至不确定是否可以在包含`NSObjCRuntime.h`和`AvailabilityMacros.h`头文件之前尽快重新定义它。

# magento - Magento 随机产品

> ID：12691674
> 
> 赞同：0
> 
> 时间：2012-10-02T13:55:39.907
> 
> 标签：magento

嗨，我使用脚本在我的主页上显示随机产品，但它没有显示价格。哪里有问题？

[http://magentoabid.blogspot.sk/2012/06/display-random-products-from-category.html](http://magentoabid.blogspot.sk/2012/06/display-random-products-from-category.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:34:11.573

不知道为什么这不起作用，但如果你想尝试其他一些解决方案

1.  [http://dx3webs.com/front/2010/10/how-to-create-a-random-featured-product-list-on-home-page-in-magento/](http://dx3webs.com/front/2010/10/how-to-create-a-random-featured-product-list-on-home-page-in-magento/)

2.  更新上面的代码

    将前 15 行替换为：

    ```
    $category = Mage::getModel('catalog/category')->load($this->getCategoryId());
    $collection = Mage::getResourceModel('catalog/product_collection');
    Mage::getModel('catalog/layer')->prepareProductCollection($collection);
    $collection->getSelect()->Limit($this->getNumProducts())->order('rand()');
    $collection->addStoreFilter();
    $collection->addCategoryFilter($category);
    //print_r($collection); 
    ```

    代替 ：

    ```
    <?php for ($i=0; $i < $number_of_products; $i++): ?> 
    ```

    和 ：

    ```
    <?php foreach($collection as $product) :  ?>  //need to end foreach with <?php endforeach; ?> 
    ```

    替换这样的东西：

    ```
    $displayed_products[$random_products[$i]]->getName(); 
    ```

    和 ：

    ```
    $product->getName(); 
    ```

    （查找“$displayed_products[$random_products[$i]]”并将其替换为“$product”）

# java - 通过 Google App Engine 的 Google Drive API

> ID：12691677
> 
> 赞同：7
> 
> 时间：2012-10-02T13:55:47.223
> 
> 标签：java, google-app-engine, google-api, google-drive-api

我正在尝试通过Google App Engine 提供的[App Identity接口使用 Google Drive API。](https://developers.google.com/appengine/docs/java/appidentity/overview)这基本上允许我的 Web 应用程序与 Google 的 API[从 server 到 server](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)进行通信。

我不需要我的用户登录，我只需要显示我自己的 Google Drive 文档。

但是，在我设置了所有适当的值和范围，并在控制台页面上启用了所有正确的 Google Drive 旋钮之后，我仍然可以通过一个简单的 GET 请求得到这个`https://www.googleapis.com/drive/v2/files`：

```
{ "error": { "errors": [ { "domain": "usageLimits", "reason": "dailyLimitExceededUnreg", "message": "Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup.", "extendedHelp": "https://code.google.com/apis/console" } ], "code": 403, "message": "Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup." }} 
```

怎么了？我错过了什么？这是实际执行请求的代码 - 有趣的是，如果我使用其他 API（例如 URL 缩短器 API），它会很好地工作：

```
var scopes = new java.util.ArrayList();                                                                                                    
scopes.add("https://www.googleapis.com/auth/drive");                                                                                       
var appIdentity = AppIdentityServiceFactory.getAppIdentityService();                                                                       
var accessToken = appIdentity.getAccessToken(scopes);

var url = new URL("https://www.googleapis.com/drive/v2/files");                                                                            
var connection = url.openConnection();                                                                                                     
connection.setDoOutput(true);                                                                                                              
connection.setRequestMethod("GET");                                                                                                        
connection.addRequestProperty("Content-Type", "application/json");                                                                         
connection.addRequestProperty("Authorization", "OAuth " + accessToken.getAccessToken()); 
```

**编辑**

例如，如果我只是将 API 更改为使用`urlshortner`API，它可以工作：

`var url = new URL("https://www.googleapis.com/urlshortener/v1/url/history");`

并输出：

`{ "kind": "urlshortener#urlHistory", "totalItems": 0, "itemsPerPage": 30}`

那么肯定有什么东西不能与 Google Drive 和 App Identity 一起使用？

**编辑 2**

我在这里的正确答案中找到了一些帮助：[https ://stackoverflow.com/a/12526286/50394](https://stackoverflow.com/a/12526286/50394)

但它谈论的是在 Google Apps 上设置客户端 API 范围，我没有使用 Google Apps，我只是使用 Google App Engine 的域`foo.appspot.com`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-05T13:45:32.980

您收到的 403 错误意味着您的 GET 中没有 Authorization 标头。逻辑是，如果没有 Authorization 标头，您就是匿名的（您是军团等等 :-)）。匿名使用的驱动器配额为零，因此消息。URL 缩短器具有更高的匿名配额，因此它可以工作。

我建议您将 URL 更改为指向您自己的 http 服务器，并检查您实际发送的标头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:56:25.317

AFAICT 您应该`Bearer`在 Authorization 标头中使用。

可能发生的情况是，Drive API 无法识别服务帐户（因为标头错误？），因此将其视为匿名请求，因为`key`也没有提供任何参数（请参阅[common query params](https://developers.google.com/drive/query-parameters)）。

试试这个：

```
connection.addRequestProperty("Authorization", "Bearer " + accessToken.getAccessToken()); 
```

或者您可以尝试将令牌添加为`access_token`查询参数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-03T15:10:48.403

我认为您至少应该设置一个 API 控制台条目，并在[https://code.google.com/apis/console](https://code.google.com/apis/console)启用 Drive API 创建此条目后，您将获得一个可在您的 GoogleCredential 对象中使用的 ID。从 GoogleCredential 对象中，您可以获得访问令牌，然后您可以将其添加到您的请求中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-05T16:19:31.340

我在这里读到的（[通过服务帐户的 Google 驱动器](https://developers.google.com/drive/web/service-accounts)）是您使用了一种稍微不同的样式，该样式使用您从开发者控制台检索的 API KEY。
对我来说相关的部分是生成一个“服务器应用程序的密钥”，然后使用我**在其他任何地方都**没有读过的这种技术！

```
 HttpTransport httpTransport = new NetHttpTransport();
  JsonFactory jsonFactory = new JacksonFactory();
  AppIdentityCredential credential =
      new AppIdentityCredential.Builder(DriveScopes.DRIVE).build();
  // API_KEY is from the Google Console as a server API key
  GoogleClientRequestInitializer keyInitializer =
      new CommonGoogleClientRequestInitializer(API_KEY);
  Drive service = new Drive.Builder(httpTransport, jsonFactory, null)
      .setHttpRequestInitializer(credential)
      .setGoogleClientRequestInitializer(keyInitializer)
      .build(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T23:41:10.573

这个[答案](https://stackoverflow.com/a/10436469/656408)声称：

> 由于其安全模型，Drive SDK 不支持服务帐户。

如果仍然如此，一种解决方法是使用常规 Google 帐户执行一次常规 OAuth 舞蹈，并将访问和刷新令牌保留在数据存储区中。

# php - 为什么会话变量在 PHP 中不起作用？

> ID：12691678
> 
> 赞同：0
> 
> 时间：2012-10-02T13:56:06.130
> 
> 标签：php, session-variables

我正在尝试设置会话变量，但它不起作用。这是我在代码中所做的。请提出问题所在：

## 登录验证器.php

```
<?php
    session_start();
    $userName = "test";
    $_SESSION['iUsername'] = $userName;
    header("Location: http://www.XXXXXXXXXXXX.com/LoginSuccess.php");
?> 
```

## 登录成功.php

```
<?php
    session_start();
    $User = $_SESSION['iUsername'];
    echo $User;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:12:46.377

试试这个（在重定向后放置一个“退出”）

```
session_start();
$_SESSION['session'] = 'this is a session';
header('location: apage.php');
exit; 
```

在@ [PHP 阅读更多内容：在标头重定向之前会话未保存](https://stackoverflow.com/questions/2968752/php-session-isnt-saving-before-header-redirect)

如果这不起作用..注释掉重定向并在不同的浏览器选项卡中打开每个页面。然后打开 Login-Validator.php 然后打开 LoginSuccess.php 并检查是否设置了会话。我认为这是由于在重定向之前未设置 cookie 造成的。

Login-Validator.php 和 LoginSuccess.php 也在同一个域上吗？

```
header("Location: /LoginSuccess.php"); 
```

# android - Android：类似于 Facebook 应用程序的自动完成 TextView

> ID：12691679
> 
> 赞同：30
> 
> 时间：2012-10-02T13:56:08.033
> 
> 标签：android, android-listview, autocompletetextview

我的应用程序中有一个 AutoCompleteTextView。该应用程序使用 Facebook SDK。[我在 SO： https](https://stackoverflow.com/a/12363961/450534) ://stackoverflow.com/a/12363961/450534上遵循了这个问题的代码，并进行了有效的搜索（过滤）活动。

现在，我如何在输入*@*符号后获得像 Facebook 应用程序一样的内联自动完成功能，并且仍然保留用户输入的其他文本？有问题的活动用于*状态更新*，并且可以包含用户的朋友以及其他文本。the`AutoCompleteTextView`或 the`EditText`自然会是多行的。对于您看到的状态更新。

我知道由于这篇文章中缺少任何代码，我可能会面临被否决甚至可能关闭问题的风险。但它确实是一个标准的样板列表过滤代码。

编辑：Android 的*FriendCaster*应用程序也是如此。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-09T08:27:54.953

首先将您的 EditText 变成 MultiAutoCompleteTextView。MultiAutoCompleteTextView 允许您替换文本的某些部分，例如“@”之后的文本。

你可以这样做：

```
final MultiAutoCompleteTextView inputEditText = (MultiAutoCompleteTextView) dialog.findViewById(R.id.MyEditText);

String[] COUNTRIES = new String[] { "Belgium", "France", "Italy", "Germany", "Spain" };
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_dropdown_item_1line, COUNTRIES);
inputEditText.setAdapter(adapter);
inputEditText.setThreshold(1); //Set number of characters before the dropdown should be shown

//Create a new Tokenizer which will get text after '@' and terminate on ' '
inputEditText.setTokenizer(new Tokenizer() {

  @Override
  public CharSequence terminateToken(CharSequence text) {
    int i = text.length();

    while (i > 0 && text.charAt(i - 1) == ' ') {
      i--;
    }

    if (i > 0 && text.charAt(i - 1) == ' ') {
      return text;
    } else {
      if (text instanceof Spanned) {
        SpannableString sp = new SpannableString(text + " ");
        TextUtils.copySpansFrom((Spanned) text, 0, text.length(), Object.class, sp, 0);
        return sp;
      } else {
        return text + " ";
      }
    }
  }

  @Override
  public int findTokenStart(CharSequence text, int cursor) {
    int i = cursor;

    while (i > 0 && text.charAt(i - 1) != '@') {
      i--;
    }

    //Check if token really started with @, else we don't have a valid token
    if (i < 1 || text.charAt(i - 1) != '@') {
      return cursor;
    }

    return i;
  }

  @Override
  public int findTokenEnd(CharSequence text, int cursor) {
    int i = cursor;
    int len = text.length();

    while (i < len) {
      if (text.charAt(i) == ' ') {
        return i;
      } else {
        i++;
      }
    }

    return len;
  }
}); 
```

一个“问题”是弹出窗口将出现在 EditText 视图下。要将其向上移动并将其放在当前编写的文本下，您可以执行以下操作：

```
inputEditText.addTextChangedListener(new TextWatcher() {

  @Override
  public void onTextChanged(CharSequence s, int start, int before, int count) {
    Layout layout = inputEditText.getLayout();
    int pos = inputEditText.getSelectionStart();
    int line = layout.getLineForOffset(pos);
    int baseline = layout.getLineBaseline(line);

    int bottom = inputEditText.getHeight();

    inputEditText.setDropDownVerticalOffset(baseline - bottom);

  }

  @Override
  public void beforeTextChanged(CharSequence s, int start, int count, int after) {
  }

  @Override
  public void afterTextChanged(Editable s) {
  }
}); 
```

注意：如果 edittext 中的行数超过 edittext 可以显示的行数，这目前不考虑下拉位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-01T12:59:26.793

[https://github.com/dhaval001/linkable_text_view.git](https://github.com/dhaval001/linkable_text_view)

在带有多自动完成文本视图的 Android TextView 和 EditText 中创建链接文本的简单方法，例如 @username 或 #hashtag。链接facebook和instagram

特征

匹配单个字符串或正则表达式模式以设置链接 更改链接文本的颜色 设置链接文本的样式：BOLD、ITALIC 或 BOLD_ITALIC 设置链接文本的下划线 指定特定单词的单击操作 OnTextChangedListener 监听器 LinkableEditText

# java - 在 XHTML 中包含外部内容

> ID：12691682
> 
> 赞同：2
> 
> 时间：2012-10-02T13:56:10.433
> 
> 标签：java, jsf-2, facelets, java-ee-6

通常我们使用 Facelet 的模板机制在每个页面上包含相同的标题。但是在当前的项目中，所述标头的内容是从另一台服务器提供的。有没有办法在 XHTML 页面中包含来自另一个 URL 的此类内容？

（我看到一篇[类似主题](https://stackoverflow.com/questions/4792862/how-to-include-another-xhtml-in-xhtml-using-jsf-2-0-facelets)的帖子，但 ui:insert （页面内容不在 WAR 中）和 ui:include （只能在 WAR 中参考）似乎都不合适。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:15:11.530

正如您在[这个问题](https://stackoverflow.com/questions/5587808/how-to-use-facelets-composition-with-files-from-another-context)中看到的那样，您需要编写自己的自定义 Facelets 资源解析器，以便它可以从 url 解析。

# php - blueimp 不允许通过 jquery 适配器进行第二次 post 操作

> ID：12691685
> 
> 赞同：1
> 
> 时间：2012-10-02T13:56:18.200
> 
> 标签：php, jquery, blueimp

我在我的网站上使用 blueimp。blueimp 包含在我的页面末尾（index.php），例如：

```
 <?php include "index.html"; ?> 
```

在我的 php 页面中，我还使用了一个 jquery 适配器，它通过以下方式发送来自同一页面的一些变量和来自 blueimp 上传器的两个变量：

```
 function save()
     {  
    var variable1= document.getElementById('field1').value;
        var variable2= CKEDITOR.instances.field2.getData();
    variable2=encodeURIComponent(variable2);
    var variable3= document.getElementById('field3').value;
        var variables="variable1="+variable1+ "&variable2="+variable2+                                 
                      "&variable3="+variable3;

           jQuery('#mydiv').showLoading();
           $.ajax({
                        type: "POST",
                        url: "some.php",
                        data: variables,
                        error: function(){
                           alert('Error while loading!');
                         },
                       success: function(data){
              jQuery('#mydiv').hideLoading();
                          $('#mydiv').html(data);
                      }
                });
    } 
```

每当我调用此函数时，变量都不会发送到 some.php 。但是，如果我删除

```
 <?php include "index.html"; ?> 
```

从 index.php 页面开始，函数 save 开始工作。我猜想来自包含的 blueimp 页面，即 index.html，会阻止 jquery 适配器正常运行。

关于这个问题有什么线索吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:11:55.903

听起来您在两个库之间存在一些冲突。jQuery调用了[这个](http://api.jquery.com/jQuery.noConflict/)选项`noConflict()`，允许您暂时“暂停”jQuery 并允许其他库工作，然后“恢复”正常的 jQuery 函数。

# php - Magento 免费产品，免运费

> ID：12691690
> 
> 赞同：0
> 
> 时间：2012-10-02T13:56:37.250
> 
> 标签：php, magento, e-commerce, magento-1.7

我在 magento 商店有一个产品是免费的，邮费也是如此。

一切都设置好了，我可以将它添加到我的购物篮去结账选择免费送货，但是一旦我进入付款信息部分，它就会说“您的订单无法在此完成，因为没有可用的付款方式."。

任何帮助深表感谢。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:05:22.790

@mufaddal 通过评论解决了这个问题。我会将其添加为答案，以便人们可以看到。

它只是在配置 - 付款方式下的后端启用零小计结帐。

可以在下面的链接中找到有关零小计结帐的更多信息。

[http://www.magentocommerce.com/knowledge-base/entry/configuration-payment-methods-zero-subtotal-checkout](http://www.magentocommerce.com/knowledge-base/entry/configuration-payment-methods-zero-subtotal-checkout)

# javascript - 计算输入的次数 javascript

> ID：12691691
> 
> 赞同：0
> 
> 时间：2012-10-02T13:56:41.823
> 
> 标签：javascript

计算在 javascript 中执行操作的次数时，最佳实践是什么？例如，我有一个要求输入数字的提示

```
 var playerGuess = prompt("What is your guess "); 
```

我想做的是在 3 次尝试后以另一个提示结束游戏。

我遇到的困难实际上是计算输入的数量

谢谢

我试过创建一个函数来计算输入的次数

```
 var guessCount = playerGuess.count;

   function limit(playerGuess){

  if (guessCount >= 3){
   alert("game over");
  } else{
   alert("carry on");
  }

 } 
```

我知道完全错了，但试一试

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T13:59:13.697

你应该评估你每次得到的答案。如果答案有效，则将计数放入另一个变量中，当计数达到所需数量时，不进行任何输入。

```
var attempts    = 0;

function ask_question(){

  if(attempts > 3)
  {
   // you have played enough!
   return;
  }
  else
  {

   var playerGuess = prompt("What is your guess ");

   if(parseInt(playerGuess) != NaN && playerGuess != '')
   {
    attempts++;
    // do whatever you would like to do with playerGuess
   }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:03:54.330

像这样：

```
// Global var to hold number of guesses
var guessCount = 0;

// Function to get the guess
function getGuess() {
  // Get a new guess
  var guess = prompt('What is your guess ');

  // Process guess here, eg:
  if (...whatever tests you want to make...) {
    // Good guess
    alert('Good guess: ' + guess);

  } else {
    // Bad guess
    guessCount += 1;

    // Fail out if too many guesses have been tried
    if (guessCount >= 3) {
      alert('Game over');
      return;
    }
  }
}; 
```

干杯!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:09:48.393

您可以使用`while`循环和变量来存储当前迭代。考虑以下内容，这使您有 3 次机会猜测“秘密”数字：

```
var secretNumber = 42,
    youWon = false,
    i = 0;

while (i < 3) {
  var playerGuess = prompt("What is your guess?");

  if (playerGuess == secretNumber){
    youWon = true;
    break;
  }

  i++;
}

if (youWon) {
  alert("You got it!");
} else {
  alert("Sorry, you have no more tries left.");
} 
```

这段代码一遍又一遍地循环，`i`每次递增。它提出问题，并检查答案。如果答案是正确的，它设置`youWon`标志和`break`s 退出循环，提前结束。否则，循环在 3 次迭代后自然结束。循环完成后，`youWon`检查标志以确定循环是否因为给出正确答案而结束，或者是否因为尝试次数用尽而结束。

# c# - linq 查询时保持范围的更好选择是什么

> ID：12691694
> 
> 赞同：0
> 
> 时间：2012-10-02T13:56:54.277
> 
> 标签：c#, asp.net, linq, collections, dictionary

我需要保存一组整数范围，然后我可以使用 linq 查询它们，如下所示：

```
int param = 10;
var matched = from item in items 
           where param >= item.min && param <= item.max; 
```

一个`list of Tuples`或一个`Dictionary`或`list of KeyValuePairs`或...。哪一个是更好的选择？（我不想创建我的自定义类）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:01:37.010

为什么不是简单的二维数组？这将具有最低的内存要求，并且您建议的 LINQ 查询将在线性时间内执行。

伪代码：

```
int param = 10;
// Define min and max array indices for readability.
public const int min = 0;
public const int max = 1;

int[,] myValues = {
    { 1, 50 }, 
    { 2, 3  },
    { 5, 60 }};

var matches = 
    from  item in myValues
    where param <= item[min] && 
          param >= item[max]; 
```

# mysql - MySQL Round 函数返回太多的十进制数字，当没有。十进制数字基于一列

> ID：12691698
> 
> 赞同：0
> 
> 时间：2012-10-02T13:57:11.293
> 
> 标签：mysql

> **可能重复：**
> [MySql 选择格式，圆形列](https://stackoverflow.com/questions/9411656/mysql-select-format-round-column)

当我使用 进行 SQL 查询时`ROUND(X, D)`，其中 D 是列名而不是直接整数值，结果被四舍五入，但小数位数太多。

例如，

```
SELECT b.digits, ROUND(a.amount, b.digits) as amount
FROM a
JOIN b
ON a.number_id = b.id 
```

结果是这样的：

```
3  357.143000000000000000000000
2   89.290000000000000000000000
4  696.436600000000000000000000
2  214.290000000000000000000000
2  328.570000000000000000000000
2  437.500000000000000000000000 
```

b.digits 列包含值必须四舍五入的数字。可以根据数字得到结果，如下所示：

```
3  357.143
2   89.29
4  696.4366
2  214.29
2  328.57
2  437.50 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:27:23.843

尝试使用以下`format`功能：

像这样：

`SELECT b.digits, FORMAT(a.amount, b.digits) as amount FROM a JOIN b ON a.number_id = b.id`

# r - 如何将 R 中的 C++ 对象导出回 C++？

> ID：12691710
> 
> 赞同：1
> 
> 时间：2012-10-02T13:58:00.000
> 
> 标签：r, rcpp

在下面的示例中，除了导致编译失败`RCPP_MODULE`的方法之外，我将一些普通的 c++ 方法导出到 R 中没有任何困难。`clone`

```
struct C
{
    void clone(C* other)
    {
         *this = *other;
    }
};

#include <Rcpp.h>
using namespace Rcpp;

RCPP_MODULE(mod){
    class_<C>("C")
        .method("clone", &C::clone)
        ;
}; 
```

如何导出该`clone`方法以便我可以引用在 R 中创建的其他 C++ 类？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-29T10:07:13.460

以下适用于 Rcpp 的开发版本。请参阅我博客上的[这篇文章。](http://romainfrancois.blog.free.fr/index.php?post/2012/10/25/Rcpp-modules-more-flexible)

```
#include <Rcpp.h>
using namespace Rcpp;

RCPP_EXPOSED_CLASS(C)

struct C
{
    void clone(const C& other)
    {
         *this = other;
    }
};

RCPP_MODULE(play){
    class_<C>("C")
        .method("clone", &C::clone)
        ;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:21:53.303

有一个称为克隆的 Rcpp 方法，因此请尝试重命名您的方法。

# mysql - Rails 使用多个数据库

> ID：12691718
> 
> 赞同：1
> 
> 时间：2012-10-02T13:58:15.850
> 
> 标签：mysql, ruby-on-rails, ruby, database

在我的 Rails 应用程序中，我需要在应用程序中使用多个数据库。但是我怎么能告诉rails，这个表必须来自这个数据库，另一个 - 来自另一个。我正在使用mysql。现在配置看起来像这样：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: Mycorp_development
  pool: 5
  username: root
  password: root
  socket: /var/run/mysqld/mysqld.sock 
```

和一个模型（我知道那不是在 rails-way，但 db 不是我的）

```
class Article < ActiveRecord::Base
  attr_accessible :ART_ID, :ART_ARTICLE_NR,  :ART_SUP_ID,  :ART_DES_ID,  :ART_COMPLETE_DES_ID, :ART_CTM, :ART_PACK_SELFSERVICE,  :ART_MATERIAL_MARK, :ART_REPLACEMENT, :ART_ACCESSORY, :ART_BATCH_SIZE1, :ART_BATCH_SIZE2, :QUANTITYM, :PRICEM
  set_table_name "ARTICLES"
  set_primary_key :ART_ID
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:19:21.363

ActiveRecord 尚未与两个不同的数据库进行通信。

当然[https://github.com/cherring/connection_ninja](https://github.com/cherring/connection_ninja)似乎提供了一种解决方法，我还没有测试过，但我会非常小心地使用它。

您将自己置于开发人员未计划的情况下，这意味着您可能会遇到一些问题，并且必须深入研究 AR 内部以了解发生了什么。

鉴于您确实需要处理两个数据库，我强烈建议您考虑这两种都支持开箱即用的多个数据库的替代方案：

*   续集：[http ://sequel.rubyforge.org/documentation.html](http://sequel.rubyforge.org/documentation.html)
*   [数据映射器： http](http://datamapper.org/) ://datamapper.org/

它们与 Rails 3 配合得很好。

# api - FourSquare API 参数 sw 和 ne

> ID：12691724
> 
> 赞同：0
> 
> 时间：2012-10-02T13:58:50.133
> 
> 标签：api, geolocation, foursquare

如果我提出这个请求： [https ://api.foursquare.com/v2/venues/search?ne=39.998,-0.06&sw=39.9935,-0.075&intent=browse&client_id=YOUR_CLIENT&client_secret=YOUR_CLIENT_SECRET](https://api.foursquare.com/v2/venues/search?ne=39.998,-0.06&sw=39.9935,-0.075&intent=browse&client_id=YOUR_CLIENT&client_secret=YOUR_CLIENT_SECRET)

我发现一个不在我请求的边界框内的结果：

```
id": "4ea309fa77c8d0ce5e34951a",
"lat": 39.999007638806724,
"lng": -0.0725757901436784, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:58:46.370

为了确保包含边界框中的所有结果，有时您会看到一些结果超出边界框，靠近边界。如果您想确保在这些坐标之外看不到任何结果，您可以过滤掉这些场所。

# mobile - navigator.contacts.find 既不调用 onSucess 也不调用 onError

> ID：12691729
> 
> 赞同：1
> 
> 时间：2012-10-02T13:59:00.357
> 
> 标签：mobile, contacts, navigator

我两次调用 getcontacts 函数。第一次在我启动应用程序时，第二次（仅用于测试）在子页面中。两者都不起作用。它不会调用 OnSuccess 或 onError，因为没有显示警报。

我的标题：

```
 <head>
    <meta name="viewport" content="width=deviceWidth; initial-scale=1.0; maximum-scale=1.0; minimum-scale=1.0; user-scalable=0;"/>
    <title>Blabla</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="css/styles.css" rel="stylesheet" type="text/css">
    <link rel="stylesheet" href="js/jquery.mobile-1.0a2.min.css" />

    <script src="js/jquery-1.4.4.min.js"></script>
    <script src="js/jquery.mobile-1.0a2.min.js"></script>
    <script src="js/phonegap.js"></script>

<!-- Finde Kontakte-->

    var phone_contacts;

    function getContacts() {

        var options = new ContactFindOptions();
        // Falls Filter gwünscht        
        options.filter=""; 
        options.multiple=true; 

        var fields = ["displayName", "name"];
        //alert('this alert is shown');
        navigator.contacts.find(fields, onSuccessContacts, onErrorContacts, options);
        alert('this alert isn't shown');

    }

    // onSuccess: Get a snapshot of the current contacts
    //
    function onSuccessContacts(contacts) {
        alert('Sucess');//is not shown

        for (var i=0; i<contacts.length; i++) {
           //Speicherung in Debugging Konsole
           // console.log("Display Name = " + contacts[i].displayName);

           //Kontakte nach Laden in globale Variable phone_contacts übetragen
           phone_contacts = contacts[i];

           //Speicherung der Kontakte in <p id="show_contacts">
           var element_contacts = document.getElementById('show_contacts');
        element.innerHTML += contacts[i].displayName;
        }
    }

    // onError: Failed to get the contacts
    //
    function onErrorContacts(contactError) {
            alert('Error');//isn't shown
        alert('onError!');
    }

    document.addEventListener('deviceready', doDeviceReady, false);

    function doDeviceReady () {
        // The following tells the app to fade #page1 in after the splash screen
        //get contacts
        getContacts();

        $('#page1').fadeIn(5000);

    }

});
    </script>
<!-- eof Finde Kontakte-->

</head> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-21T05:58:34.967

改变

```
alert('this alert isn't shown'); 
```

至

```
alert('this alert isn\'t shown'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T08:08:11.320

你没有错过`<script>`这个页面的开始标签吗？

# ruby-on-rails-3 - 在 Rails 中具有多个关联模型的 RefineryCMS

> ID：12691733
> 
> 赞同：1
> 
> 时间：2012-10-02T13:59:10.613
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.2, refinerycms

我搜索了有关如何使用“RefineryCMS”在两个或多个模型之间生成关联的所有内容。我关注了这个 URL [https://github.com/refinery](https://github.com/refinery)的所有内容。我想创建两个具有关联的模型。

任何人都可以请帮助我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T08:52:06.283

如果你想关联来自两个不同炼油厂引擎的模型，你可以这样做。假设您有一个 User 引擎和一个 Post 引擎，并且您想在这两个引擎的模型之间定义 user has_many posts。

在用户引擎的 user.rb 中添加

```
has_many :posts, :class_name => Refinery::Posts::Post 
```

并在 post.rb 添加

```
belongs_to :user, :class_name => Refinery::Users::User 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T16:53:03.010

[http://railscasts.com/episodes/47-two-many-to-many?view=comments](http://railscasts.com/episodes/47-two-many-to-many?view=comments) 您可以观看此 railscast。它有助于。

# layout - Liferay：页面名称与标题和唯一性

> ID：12691735
> 
> 赞同：0
> 
> 时间：2012-10-02T13:59:19.413
> 
> 标签：layout, liferay, portlet

页面名称和页面标题有什么区别？

每个的重点/用途是什么？

在 LayoutImpl 中，它们的工作方式完全相同，就像两个任意文本字段一样，所以我猜它们的区别在于应用程序逻辑或用途。

我读到的页面名称不是唯一的，标题是唯一的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:22:22.673

不，他们不是一回事![在此处输入图像描述](../Images/8d00a14ba85c307d6626a778ef341939.png)

在上图中，您可以为页面名称赋予不同的标题。在 portal_normal.vm 的 HTML 的头部也显示了同样的内容

`<title>$the_title - $company_name</title>`

标题不是唯一的。

# c++ - 使用一组权重查找 MST 并使用另一组权重构建树

> ID：12691737
> 
> 赞同：2
> 
> 时间：2012-10-02T13:59:21.107
> 
> 标签：c++, boost, graph

我正在使用最小跨越树（MST），我是使用 boost 的新手。我的问题是我想使用一个权重向量生成一个 MST，然后使用另一个向量重建树。也许我可以用代码更好地解释：

```
using namespace boost;
typedef adjacency_list < vecS, vecS, undirectedS, property<vertex_distance_t, int>, property < edge_weight_t, int > > Graph;
typedef graph_traits < Graph >::edge_descriptor Edge;
typedef graph_traits < Graph >::vertex_descriptor Vertex;
typedef std::pair<int, int> E;

const int num_nodes = 5;
E edges[] = { E(0, 2), E(1, 3), E(1, 4), E(2, 1), E(2, 3),
E(3, 4), E(4, 0) };
int weights[] = { 1, 1, 2, 7, 3, 1, 1 };
int weights2[] = { -1, 1, -2, 7, 3, -1, -1 };
Graph g(edges, edges + sizeof(edges) / sizeof(E), weights, num_nodes);
property_map<Graph, edge_weight_t>::type weightmap = get(edge_weight, g);

std::vector < graph_traits < Graph >::vertex_descriptor > parentMap(num_vertices(g));
property_map<Graph, vertex_distance_t>::type distancemap = get(vertex_distance, g);
property_map<Graph, vertex_index_t>::type indexmap;
prim_minimum_spanning_tree (g, *vertices(g).first, &parentMap[0], distancemap, weightmap, indexmap,  default_dijkstra_visitor());

for (std::size_t i = 0; i != parentMap.size(); ++i)
  if (parentMap[i] != i)
    std::cout << "parent[" << i << "] = " << parentMap[i] << std::endl;
  else
    std::cout << "parent[" << i << "] = no parent" << std::endl;

std::cout<<"Weights"<<std::endl;
for (std::size_t i = 0; i != parentMap.size(); ++i)
  std::cout<<"weight["<<i<<"]:  "<<  distancemap(i) <<std::endl;

return EXIT_SUCCESS; 
```

在上面的代码中，我可以生成 MST，并使用 parentMap 和 distanceMap 我可以获得树的每条边的权重。

但是考虑到我想使用向量**权重**来生成 MST，并使用**weights2**来获取顶点之间的边值，我该怎么做呢？

# winapi - CryptoAPI：CERT_STORE_PROV_MEMORY 和线程安全

> ID：12691742
> 
> 赞同：1
> 
> 时间：2012-10-02T13:59:30.650
> 
> 标签：winapi, cryptography, x509certificate, cryptoapi

我正在编写一个客户端/服务器解决方案，使用 CryptoAPI 通过 TCP 套接字提供 SSL 加密。在客户端中，我有一个全局 CERT_STORE_PROV_MEMORY 证书存储，我在所有连接（即多个线程）之间共享它。

我的问题是这是否是线程安全的？多个线程可以同时调用证书存储上的函数（例如 CertGetIssuerCertificateFromStore()）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T15:36:02.503

`CertGetIssuerCertificateFromStore()`是一个*阅读*功能。因此，同时使用它们是安全的。Taken`CERT_CONTEXT`将是现有副本的副本，因此可以根据需要进行修改。

# php - 要求在螳螂上用肥皂限制

> ID：12691743
> 
> 赞同：0
> 
> 时间：2012-10-02T13:59:31.183
> 
> 标签：php, soap, nusoap, soap-client, mantis

我正在尝试用肥皂对螳螂提出一些要求。类似的东西：

```
 foreach ($tabIdBugToRecup as $value) {
            $tabBugResponse[$i] = $client->mc_issue_get($username, $password, $value);
            $i++;

            } 
```

当请求的数量很少时，我没有错误并且脚本工作正常，但是当请求的数量很大时，我有这个错误：`"NetworkError: 500 Internal Server Error - http://localhost/ErsSupervisor/include/req/cronBugSupport.php"`

这就是为什么我要问在螳螂上使用肥皂的请求数量是否有限。也许每秒 X 或？

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:26:20.843

MantisBT SOAP API 没有速率限制。

# linq - linq 需要获取具有值的列的计数

> ID：12691746
> 
> 赞同：0
> 
> 时间：2012-10-02T13:59:48.017
> 
> 标签：linq

我有以下示例列

```
ID  Comment    Analyzer  Incubator    Deanalyzer
--  -------    -------   ---------    ----------
23  Need Fast  5.6                    8.7 
```

我需要显示结果是 ID、评论，然后是有多少列有值的计数。所以在这种情况下，计数将是 2，因为只有 Analyzer 和 Deanalyzer 有值。这是我到目前为止所拥有的：

```
 var result = from tb in db.Reports
    where tb.Id == 23
    select new { ID = tb.ID, 
                 Comments = tb.Comments,
                 Count = .. 

                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:09:03.407

它不干净，但你可以这样做：

```
var result = from tb in db.Reports
where tb.Id == 23
select new { ID = tb.ID, 
             Comments = tb.Comments,
             Count = (tb.Analyzer!= null ? 1 : 0) + (tb.Incubator != null ? 1 : 0) + (tb.Deanalyzer!= null ? 1 : 0)

            } 
```

如果您有很多列，我不会使用它。

# javascript - 数组中的字符串在哪里？

> ID：12691755
> 
> 赞同：-3
> 
> 时间：2012-10-02T14:00:10.697
> 
> 标签：javascript

> **可能重复：**
> [如何获取数组中项目的索引？](https://stackoverflow.com/questions/2457998/how-do-i-get-the-index-of-an-item-in-an-array)
> [在数组中搜索元素](https://stackoverflow.com/questions/3721972/search-for-element-within-an-array)

如果我有这样的数组：

```
var array = [
    "one",    //element 0
    "two",    //element 1
    "three",  //element 2
    "four",   //element 3
    "five"    //element 4
]; 
```

我想寻找一个给定的部分，比方说`five`。所以我问代码是否`five`在里面`array`。

如果是，那么它应该告诉我它的位置是`4`, 或`array[4]`。

有什么办法可以达到类似的效果吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T14:01:40.343

[`array.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)

如果您使用的是旧版浏览器，请使用该链接中包含的 shim。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T14:04:46.687

```
var array = [
    "one",    //element 0
    "two",    //element 1
    "three",  //element 2
    "four",   //element 3
    "five"    //element 4
];
alert(array.indexOf("five")); 
```

这将提醒 4，即“五”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:01:24.580

使用字符串的比较函数来查看数组中是否有特定的字符串

# sockets - TCP 套接字读取可变长度数据，不带帧或大小指示符

> ID：12691759
> 
> 赞同：1
> 
> 时间：2012-10-02T14:00:25.873
> 
> 标签：sockets, tcp

我目前正在编写代码以将数据传输到远程供应商。传输将通过 TCP 套接字进行。我遇到的问题是数据是可变长度的，并且没有框架或大小标记。发送数据没问题，但我不确定处理返回数据的最佳方式。

数据由不同的“消息”组成，但它们没有固定的大小。每条消息都有一个 8 或 16 字节的位图，指示该消息中包含哪些组件。有些组件是固定长度的，有些是可变的。每个可变长度组件都有一个用于整个消息的该部分的大小前缀。

当我第一次打开套接字时，我将发送消息，每个消息都应该收到响应。当我开始读取数据时，我应该在消息的开头。我需要解释位图以了解包含哪些消息字段。当数据到达时，我必须验证位图指示的每个字段是否存在并且大小正确。

一旦我阅读了所有第一条消息，下一条就开始了。我担心的是，如果传输在消息中途中断，我如何才能恢复并正确找到下一条消息的开始？

我将不得不模拟连接失败，并且我的代码需要在取消该消息之前自动重试一定次数。

我无法控制远程端的代码，也无法将帧字节或大小前缀添加到消息中。

最佳实践、设计模式或处理此问题的最佳方式的想法都受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:07:13.683

TCP 流不能在消息中间“剪切”然后恢复。

如果传输中有足够短的中断，那么每一端的 O/S 都会处理，并根据需要重新传输数据包，但这对最终用户应用程序来说是不可见的 - 就它而言，流是连续的。

如果 TCP 连接确实完全断开，则两端都必须重新打开连接。此时，传输系统应该在新的消息边界处重新开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T17:45:53.883

从用户的角度来看，TCP 是一个数据*流*，就像您可能通过串行端口接收一样。没有数据包，也没有标记。

非阻塞读取/接收调用将返回您当前到达的内容，您可以解析它。如果在解析时，您在到达消息末尾之前用完了数据，请读取/接收更多数据并继续解析。冲洗。重复。请注意，如果另一条消息紧随其后，您可能会获得比特定消息所需的*更多字节。*

TCP 流不会丢失或重新排序字节。除非连接中断或发件人有错误（例如，只能写入/发送部分，然后从未尝试写入/发送其余部分），否则消息不会被截断。您无法继续中断的 TCP 流。您只能打开一个新的并重新开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:10:55.190

对于这样的事情，您可能会更轻松地使用网络框架（如 netty）或完全不同的 IO 机制，如带有 Play 2.0 的 Iteratee IO。

# sql - sql server 合并多个数据集不重复数据

> ID：12691760
> 
> 赞同：2
> 
> 时间：2012-10-02T14:00:26.390
> 
> 标签：sql, sql-server, outer-join

给定三个表 Ta、Tb、Tc：

```
Ta(ID, Field1)
Tb(ID, Field2)
Tc(ID, Field3) 
```

给定数据示例：

```
Ta
ID Field1
---------
1  A
1  B

Tb
ID Field2
---------
1  C
1  D
2  E

Tc
ID Field3
---------
1  F
2  G
2  H 
```

**问题：** 如何加入此数据以返回：

```
ID Field1 Field2 Field3
-----------------------
1  A      C      F
1  B      D      NULL
2  NULL   E      G
2  NULL   NULL   H 
```

我以为我可以通过外部连接来实现这一点，但似乎并非如此。分组的顺序并不重要，只要我带回没有重复行的所有信息。

**只是为了澄清。**只要结果集以最少的行数返回所有数据，我真的不介意我得到哪种组合。这是我正在尝试做的一个更现实的例子：

给定一个人，叫他约翰。他有两个电话号码和三个电子邮件地址：

```
PID  Email
---------
John john@test.com
John john@mail.com
John john@john.com

PID  Tel
--------
John 011
John 022 
```

我想返回：

```
PID  Email         Tel
----------------------
John john@test.com 011
John john@mail.com 022
John john@john.com NULL 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:08:35.713

您可以通过以下方式接近：

```
select coalesce(ta.id, tb.id, tc.id), ta.field1, tb.field2, tc.field3
from (select ta.*, row_number() over (partition by id order by (select NULL)) as seqnum
      from ta
     ) ta full outer join
     (select tb.*, row_number() over (partition by id order by (select NULL)) as seqnum
      from tb
     ) tb
     on ta.id = tb.id and
        ta.seqnum = tb.seqnum
     (select tc.*, row_number() over (partition by id order by (select NULL)) as seqnum
      from tc
     ) tc
     on coalesce(ta.id, tb.id) = tc.id and
        coalesce(ta.seqnum, tb.seqnum) = tc.seqnum
group by coalesce(ta.id, tb.id, tc.id),
         coalesce(ta.seqnum, tb.seqnum, tc.seqnum)
order by 1, 2 
```

正如我所说，虽然，在我的评论中，表中行的顺序并不能保证，所以这些可能不会按照您期望的顺序出现。使用您的示例数据，您可以使用：

```
over (partition by id order by field<n>) 
```

如果字段定义了排序

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T14:26:51.600

这是另一种选择，使用 CTE 和联合，使用[MIN](http://msdn.microsoft.com/en-us/library/ms179916.aspx)排除空值。它不能保证订购，但既然你说你不在乎，只要 ID 都在场。

SQL小提琴[在这里](http://www.sqlfiddle.com/#!3/6dad5/8)

```
WITH TaRanked AS
(
  SELECT ROW_NUMBER() OVER (PARTITION BY ID ORDER BY Field1) as Rnk, ID, Field1
  FROM Ta
),
TbRanked AS
(
  SELECT ROW_NUMBER() OVER (PARTITION BY ID ORDER BY Field2) as Rnk, ID, Field2
  FROM Tb
),
TcRanked AS
(
  SELECT ROW_NUMBER() OVER (PARTITION BY ID ORDER BY Field3) as Rnk, ID, Field3
  FROM Tc
),
TUnion AS
(
    SELECT Rnk, ID, Field1, NULL AS Field2, NULL AS Field3 
        FROM TaRanked 
    UNION ALL
    SELECT Rnk, ID, NULL, Field2, NULL 
        FROM TbRanked 
    UNION ALL
    SELECT Rnk, ID, NULL, NULL, Field3 
        FROM TcRanked 
)
SELECT ID, MIN(Field1), MIN(Field2), MIN(Field3)
  FROM TUnion
  GROUP BY ID, Rnk
  ORDER BY ID, Rnk 
```

结果是

```
1   A       C       F
1   B       D       (null)
2   (null)  E       G
2   (null)  (null)  H 
```

# parameters - Openx 为源参数设置多个值

> ID：12691767
> 
> 赞同：2
> 
> 时间：2012-10-02T14:00:49.070
> 
> 标签：parameters, openx

有没有办法使用诸如 source=cat1,cat2 或 source=cat1|cat2 之类的分隔符或任何分隔符为 OpenX 上的源参数设置多个值？

我的目标是使用频道并能够让一个页面验证多个频道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T08:40:16.573

好的，自己解决了。通道允许匹配 REGEXP，所以我可以将任何我想要的参数传递给参数，只要我能够在之后匹配它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:48:33.080

我建议通过分隔符连接参数，即**_**并将其添加为前缀和后缀： ...& **source=_foo_bar_** &...

现在您可以使用“ **Site:Source contains** ”作为目标，即包含“ **_ *foo* _** ”，这更容易用作正则表达式。

# asp.net-mvc - 从列表中排除一些角色

> ID：12691774
> 
> 赞同：0
> 
> 时间：2012-10-02T14:01:18.463
> 
> 标签：asp.net-mvc, razor

似乎很简单的想法，但我有疑问，所以如果可能的话，帮助我清除它。

我的应用程序中有一个角色列表，对于某些角色（不同类型的管理员），我想显示或隐藏某些角色。

例如，如果有超级管理员、管理员和用户。超级管理员可以管理所有角色，但他不应该与我提到的三个角色混淆。所以我希望他们从名单中删除。

视图中的列表是使用`foreach`循环生成的，因此如果将呈现的值是三个（超级管理员、管理员或用户）之一，我会更改容器的类。那会奏效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:06:24.873

我不知道我是否理解正确，但最好不要直接从服务器显示容器（不要将其打印到输出），而不是依靠 CSS 来隐藏它们。

# objective-c - 将核心数据添加到现有的 iOS 项目中

> ID：12691778
> 
> 赞同：0
> 
> 时间：2012-10-02T14:01:39.133
> 
> 标签：objective-c, ios, xcode, cocoa-touch

> **可能重复：**
> [将核心数据添加到现有 iPhone 项目](https://stackoverflow.com/questions/2032818/adding-core-data-to-existing-iphone-project)

如何将核心数据添加到现有的 iOS 项目中？我添加了数据模型文件，从中创建了数据模型，并将三个属性添加到我的应用程序委托中，全部添加到我现有的（！）项目中。我还将 CoreData 添加到框架中。

在我的应用程序委托的 didFinishLaunching 方法中，我调用 [self managedObjectContext]，但它返回 nil。我想我必须重写 getter 方法并从那里加载我的数据模型？我怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T14:15:49.043

最简单的方法是创建一个新项目（Empty project）并确保添加了Core Data。然后，看看差异，应该有四个大的：

1.  添加在 AppDelegate 中创建的所有内容
2.  添加核心数据框架
3.  添加您的数据对象
4.  修改pch文件

# jquery-mobile - jQuery Mobile：未捕获的无法在初始化之前调用 checkboxradio 上的方法；试图调用方法“刷新”

> ID：12691780
> 
> 赞同：6
> 
> 时间：2012-10-02T14:01:44.003
> 
> 标签：jquery-mobile, refresh, uncaught-exception

我正在努力解决这个问题。这些是我使用并导致上述问题的代码。

```
$(document).ready(function () {
    $("#at-site-btn").bind("tap", function () {
        $.mobile.changePage("view/dialog/at-site.php", { transition:"slidedown", role:"dialog" });
    });
    $('#at-site-page').live('pagecreate', function(){
        var $checked_emp    = $("input[type=checkbox]:checked");
        var $this           = $(this);
        var $msg            = $this.find("#at-site-msg");
        $checked_emp.appendTo($msg);
        $checked_emp.trigger('create');
        $msg.trigger('create');
        $(document).trigger('create');
        $this.trigger('create');
        $("html").trigger('create');

    });
}); 
```

解释：

上述代码位于名为 hod.php 的文件中。该文件包含许多复选框。这些复选框同时被选中，当我按下#at-site-btn 按钮时，at-site.php 出现（作为对话框）并显示每个选中的复选框。

这就是问题发生的地方。当我按下对话框中的后退按钮返回上一页并尝试取消选中这些复选框时，会弹出标题中提到的错误。我的代码中没有调用“刷新方法”，所以我看不到解决这个问题的方法。

1.  任何人都可以提出解决这个问题的方法吗？
2.  我用对了吗？（我对 jQuery Mobile 很陌生。如果使用 JQM 背后有一些概念，请向我解释一下[我已经尝试阅读 JQM Docs，我觉得它似乎很不清楚]）。

最好的问候，非常感谢您的回答。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-02T23:22:38.317

您使用的是什么版本的 jQueryMobile？您可能需要使用`pageinit`而不是`pagecreate`. [jQueryMobile 文档](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)的这一部分讨论了这些选择。

对于重绘或创作，[@Taifun](https://stackoverflow.com/a/13311573/399704)指出的解决方案，如下所示：

```
`$("input[type='radio']").checkboxradio();
$("input[type='radio']").checkboxradio("refresh");`
```

`对我来说没问题，但它没有 100% 正确地绘制控件。单选按钮的边缘没有涂上圆角。

在我看到你的代码之前，我[在这里读到](https://stackoverflow.com/a/5660152/399704)你可以调用`.trigger('create')`容器对象，它对我有用。您正在这样做，但在里面`pagecreate`而不是 in `pageinit`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-29T09:48:54.517

我实际上使用的是[翻转开关复选框](https://demos.jquerymobile.com/1.4.5/flipswitch)：

```
<div class="some-checkbox-area">
    <input type="checkbox" data-role="flipswitch" name="flip-checkbox-lesson-complete"
           data-on-text="Complete" data-off-text="Incomplete" data-wrapper-class="custom-size-flipswitch">
</div> 
```

所以[不得不这样做](https://stackoverflow.com/questions/9285280/how-to-change-the-jquery-mobile-flip-switch-state-from-code#32876231)：

```
$("div.ui-page-active div.some-checkbox-area div.ui-flipswitch input[type=checkbox]").attr("checked", true).flipswitch( "refresh" ) 
```

[在这里](https://stackoverflow.com/a/67749920/1741690)查看我的完整答案。`

# arrays - 带有字符串数组参数的 PowerShell 脚本的计划任务

> ID：12691781
> 
> 赞同：5
> 
> 时间：2012-10-02T14:01:50.840
> 
> 标签：arrays, powershell, parameters, scheduled-tasks

我创建了一个 PowerShell 脚本，可以从 Management Shell 完美运行。我正在尝试将其设置为在 Windows Server 2008 R2 中的计划任务中工作，并且不确定如何为我的字符串数组参数传递参数。

这是我的脚本的相关部分：

```
[CmdletBinding()]
param(
    [Parameter(Mandatory=$true)]
    [String]
        $BaseDirectory,
    [String]
        $BackupMethod = "Full",
    [Int]
        $RemoveOlderThanDays = 0,
    [String]
        $LogDirectory,
    [Int]
        $LogKeepDays = 7,
    [String[]]
        $AdditionalDirectories
)

if ($AdditionalDirectories -and $AdditionalDirectories.Count -gt 0) {
    Write-Host "  Additional Directories to be included:" -ForegroundColor Green
    $AdditionalDirectories | ForEach-Object {
        Write-Host "     $_" -foregroundcolor green
    }
} 
```

给麻烦的参数是最后一个，`$AdditionalDirectories`.

## **从壳牌：**

如果我像这样从 Management Shell 运行脚本，它会完美运行：

```
.\FarmBackup.ps1 \\SomeServer\Backups Full 0 D:\Logs\Backups 0 "D:\Documents\PowerShell Scripts","D:\SomeFolder" 
```

**结果：**

```
 Additional Directories to be included:
      D:/Documents/PowerShell Scripts
      D:/SomeFolder 
```

## **从计划任务：**

**行动：** *启动程序*

**程序/脚本：** *PowerShell.exe*

**参数：** *-File "D:\Documents\PowerShell Scripts\FarmBackup.ps1" \\SomeServer\Backups Full 0 D:\Logs\Backups 0 "D:\Documents\PowerShell Scripts","D:\SomeFolder"*

**结果：（来自日志文件）**

```
 Additional Directories to be included:
     D:\Documents\PowerShell Scripts,D:\SomeFolder 
```

* * *

我已经为这些参数尝试了几种不同的方法，但我似乎无法让它们被视为字符串数组中的 2 个单独的字符串。我现在正在对它们进行硬编码，但似乎必须有一种方法来完成这项工作，因为它在从 shell 运行时完全有效。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T14:52:43.057

尝试使用 -Command 开关而不是 -File 开关，然后使用调用运算符“&”。这是一个使用计划任务执行此操作的示例的链接：

[http://blogs.technet.com/b/heyscriptingguy/archive/2011/01/12/schedule-powershell-scripts-that-require-input-values.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2011/01/12/schedule-powershell-scripts-that-require-input-values.aspx)

就像是：

```
-Command "& 'D:\Documents\PowerShell Scripts\FarmBackup.ps1' '\\SomeServer\Backups' 'Full' 0 'D:\Logs\Backups' 0 'D:\Documents\PowerShell Scripts','D:\SomeFolder'" 
```

我通过创建包含以下内容的脚本来测试此解决方案：

```
param([string[]] $x)
Write-Host $x.Count 
```

然后通过以下两种方式调用它：

```
powershell -File ".\TestScript.ps1" "what1,what2" 
```

结果：1

和

```
powershell -Command "& .\TestScript.ps1 what1,what2" 
```

结果：2

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:12:26.777

Another option, when the options get too complex and you're tired of fiddling with quotes, backticks, etc is to use the underused -EncodedCommand parameter on PowerShell.exe eg:

```
C:\PS> $cmd = "c:\temp\foo.ps1 'D:\Documents\PowerShell Scripts','D:\SomeFolder'"
C:\PS> $cmd
c:\temp\foo.ps1 'D:\Documents\PowerShell Scripts','D:\SomeFolder'
C:\PS> $bytes = [Text.Encoding]::Unicode.GetBytes($cmd)
C:\PS> $encodedCmd = [Convert]::ToBase64String($bytes)
C:\PS> $encodedCmd
YwA6AFwAdABlAG0AcABcAGYAbwBvAC4AcABzADEAIAAnAEQAOgBcAEQAbwBjAHUAbQBlAG4AdABzAFwAUABvAHcAZQByAFMAaABlAGwAbAAgAFMAYwByAGkAcAB0AHMAJwAsACcARAA6AFwAUwBvAG0AZQBGAG8AbABkAGUAcgAnAA==
C:\PS> powershell.exe -encodedCommand YwA6AFwAdABlAG0AcABcAGYAbwBvAC4AcABzADEAIAAnAEQAOgBcAEQAbwBjAHUAbQBlAG4AdABzAFwAUABvAHcAZQByAFMAaABlAGwAbAAgAFMAYwByAGkAcAB0AHMAJwAsACcARAA6AFwAUwBvAG0AZQBGAG8AbABkAGUAcgAnAA==
param1[0] is D:\Documents\PowerShell Scripts
param1[1] is D:\SomeFolder 
```

诚然，这不是其他人完全可以阅读/理解的东西。:-) 您必须在计划任务的描述中记录命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-11T15:38:00.550

我一直在为 SharePoint 使用 PowerShell，并创建了几个计划任务以在不同的时间间隔触发它们。

我就是这样做的，它一直对我有用。

语法：*[您的脚本的路径] -Param1Name 'Value1' -Param2Name 'Value2' -Param3Name 'Value3'*

这是一个真实的例子：

**D:\Scripts\Global.ps1 -DataLocation 'D:\Scripts' -DeploymentParameters 'Deploymentparameters' -Deployments 'Deployments' -GlobalParameters 'GlobalParameters' -SiteUrl ' [https://my.sp.company.com](https://my.sp.company.com) '**

# ruby-on-rails - 安装 Rails 时“无法构建 gem 原生扩展”

> ID：12691783
> 
> 赞同：7
> 
> 时间：2012-10-02T14:01:54.707
> 
> 标签：ruby-on-rails, ruby, xcode, gcc, rvm

我是终端的新手，所以请多多包涵。成功完成以下安装（按此特定顺序）：

*   代码 4.5
*   RVM 1.16
*   GCC 4.2.1
*   红宝石 1.9.3

尝试安装 Rails（“gem install rails”）时，安装开始，但随后因错误而中断：“无法构建 gem 原生扩展”。不知道这是指什么。想法？我需要提前安装其他东西吗？
在我第一次尝试安装 Rails 时，我不小心用 sudo 运行了它。这会影响什么吗？

编辑：输出 -

```
Building native extensions.  This could take a while...
ERROR:  Error installing rails:
    ERROR: Failed to build gem native extension.

        /Users/staffanestberg/.rvm/rubies/ruby-1.9.3-p194/bin/ruby extconf.rb
creating Makefile

make
compiling generator.c
make: /usr/bin/gcc-4.2: No such file or directory
make: *** [generator.o] Error 1

Gem files will remain installed in /Users/staffanestberg/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.5 for inspection.
Results logged to /Users/staffanestberg/.rvm/gems/ruby-1.9.3-p194/gems/json-1.7.5/ext/json/ext/generator/gem_make.out 
```

编辑：使用 iouri 的建议解决。添加`export CC=gcc`.bash-profile 然后为正确的编译器创建一个符号链接，

```
sudo ln -sf /usr/bin/llvm-gcc-4.2 /usr/bin/gcc-4.2 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T16:04:52.227

确保首先安装了 Xcode 的命令行工具，Xcode > Preferences > Downloads > Components。然后将此行添加到您`.bash_profile`的主文件夹中的文件中`~/.bash_profile`：

```
export CC=gcc 
```

仔细检查您的 /usr/bin （很可能）中有 gcc（可能是符号链接），并且它指向一个有效的 gcc 编译器，例如：`gcc -> llvm-gcc-4.2`

您可能必须重新启动终端才能使此更改生效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-07T22:45:51.790

Ruby 还没有完全准备好进行 LLVM 编译，这包括 clang，Fibers 至少存在一个已知问题，但根据 LLVM 版本，可能会出现其他问题。

修复它的正确方法是`gcc-4.2`有很多方法可以解决它，最好的方法在要求中描述：

```
rvm get stable
rvm reload
rvm requirements run
rvm reinstall 1.9.3 
```

# silverlight - 使用 Silverlight 5 打印已超出最大重试次数错误

> ID：12691784
> 
> 赞同：0
> 
> 时间：2012-10-02T14:01:55.903
> 
> 标签：silverlight, wcf-ria-services

我有带有 WCF RIA 服务的 Silverlight 应用程序，当我打印文档时定期出现错误“已超过最大重试次数错误”。我正在使用基本的 Http 绑定，无法设置“reliabilitySession inactivityTimeout”。我会尝试使用 net.tcp 绑定，但此刻没有时间这样做，我什至不确定 WCF RIA 是否可以与 net.tcp 一起使用。有没有解决这个问题的方法。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-03T11:23:41.747

我解决了这个问题，很有趣，但是当我的列是“null”或 string.empty 时，我无法打印，但我可以看到预览。

如果列为空，我将其替换为“”并且它可以工作

# java - 在 Java 线程池中使用守护线程不起作用

> ID：12691786
> 
> 赞同：2
> 
> 时间：2012-10-02T14:02:00.210
> 
> 标签：java, multithreading, threadpool

我有一个通过它创建的 Java线程池`Executors.newFixedThreadPool()`，我想使用守护线程。

原因是这是一个 GUI 应用程序，我不希望这些线程在窗口关闭后导致程序继续运行。

我实现了一个自定义`ThreadFactory`，它设置`Thread.setDaemon(true)`在它创建的线程上。

课程是这样的：

```
import java.util.concurrent.ThreadFactory;

public class DaemonThreadFactory implements ThreadFactory{

    public Thread newThread(Runnable runnable){
        Thread thread = new Thread();
        thread.setDaemon(true);
        return thread;
    }

} 
```

出于某种原因，当我使用`DaemonThreadFactory`时`Executors.newFixedThreadPool()`没有执行任何排队的任务。如果我把它改回常规`ThreadFactory`，它就可以工作。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:03:44.047

您没有将 传递`Runnable`给线程，因此没有要执行的代码：

```
@Override
public Thread newThread(Runnable runnable)
{
    Thread thread = new Thread(runnable);
    thread.setDaemon(true);
    return thread;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T14:04:38.213

您忽略了传递给您的线程必须包装的 Runnable。

```
public Thread newThread(Runnable runnable) {
    Thread thread = new Thread(runnable); 
```

否则，您正在创建实际上什么都不做的线程。

# sharepoint-2010 - Sharepoint 2010 EventReceiver for SPFolder 添加

> ID：12691789
> 
> 赞同：1
> 
> 时间：2012-10-02T14:02:09.743
> 
> 标签：sharepoint-2010, eventreceiver

我有一个文档库，我们在其中添加了自定义文件夹内容类型，以便将文件夹所有者保留在自定义字段中。

现在我被要求将“添加新”表单的默认值设置为父文件夹所有者。我在下面尝试了此代码，但在保存新文件夹后会触发事件。有人可以帮我吗？如何在打开表单之前设置此默认值？

```
 public override void ItemAdding(SPItemEventProperties properties)
   {
       SPSecurity.RunWithElevatedPrivileges(delegate()
       {
           try
           {
               this.EventFiringEnabled = false;
               base.ItemAdding(properties);
               if (properties.List.RootFolder.Name == "Documents")
               {
                   SPWeb web = properties.List.ParentWeb;
                   SPList List = properties.List;
                   SPField fld = List.Fields["Folder Owner"];
                   SPUser usr = web.CurrentUser;
                   SPFieldUserValue curUser = new SPFieldUserValue();
                   curUser.LookupId = usr.ID;
                   SPFolder parentFolder = web.GetFolder(properties.AfterUrl.Substring(0,properties.AfterUrl.LastIndexOf("/")));
                   if (parentFolder.Item["Folder Owner"] == null)
                   {
                       fld.DefaultValue = curUser.ToString();
                   }
                   else
                   {
                       fld.DefaultValue = parentFolder.Item["Folder Owner"].ToString();
                   }
                   fld.Update();
                   List.Update();
               }
           }
           catch (Exception)
           {

           }

           finally
           {
               this.EventFiringEnabled = true;
           }

       });
   } 
```

# objective-c - IOS - 在 WebView 之间传递本地存储

> ID：12691798
> 
> 赞同：1
> 
> 时间：2012-10-02T14:02:58.633
> 
> 标签：objective-c, ios, webview, local-storage

我正在使用 IOS 移动应用程序。问题是我有两个不同的 webview，我想要的是将 localStorage 数据从一个 webview 传递到另一个 webview。是否可以？我该怎么做？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:08:57.583

我认为在 iOS5 SDK 中`UIWebView`启用了默认缓存，因此您只需要在 HTML 中包含缓存即可。试试看。

# yeoman - 是否可以更改 Yeoman 的目录结构？

> ID：12691803
> 
> 赞同：5
> 
> 时间：2012-10-02T14:03:23.300
> 
> 标签：yeoman

我喜欢 Yeoman 的功能，例如 Package Manager (Bower)、Livereload 集成、Compass 等。

因此，我想用它来处理我的公共网站。但是，我不想使用“app”文件夹，而是将所有内容都放在根目录下。

我已经更改了 grunt 配置文件中的引用，但在安装新包和构建时仍然出现错误。

是否可以更改项目结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:15:46.973

目前并不容易，但我们正在努力使其易于定制。

虽然我认为你不需要。您在 /app 文件夹中进行开发并部署构建的 /dist 文件夹的内容。这样它仍然在您服务器的根目录中。

# hbase - 在猪错误中加入 hbase 表：方案没有文件系统：hbase

> ID：12691804
> 
> 赞同：2
> 
> 时间：2012-10-02T14:03:26.170
> 
> 标签：hbase, apache-pig, mapr

我正在尝试使用 hdfs 文件中的一些信息加入 hbase 表。我对 hbase 和 pig 比较陌生。

```
set hbase.zookeeper.quorum 'mprhdp2-dev.local' 
set hbase.zookeeper.property.clientPort 5100
A = LOAD '/raw/JoinTest2.txt' USING PigStorage('\t') AS (Id:chararray, text:chararray);   
B = LOAD 'hbase://MediaInformationMock' USING org.apache.pig.backend.hadoop.hbase.HBaseStorage('MediaInformation:UmbrellaCode', '-loadKey    true -caster=HBaseBinaryConverter') AS (Id:chararray, UmbrellaCode:chararray);

J = JOIN B BY $0, A BY $0;  
DUMP J;

2012-10-02 08:23:59,923 [main] ERROR org.apache.pig.tools.grunt.Grunt - ERROR 1003: Unable to find an operator for alias J
Details at logfile: /home/user1/pig_1349183747159.log 
```

这是它在日志文件中所说的：

```
Pig Stack Trace
---------------
ERROR 2017: Internal error creating job configuration.

org.apache.pig.impl.logicalLayer.FrontendException: ERROR 1066: Unable to open iterator for alias J
    at org.apache.pig.PigServer.openIterator(PigServer.java:857)
    at org.apache.pig.tools.grunt.GruntParser.processDump(GruntParser.java:682)
    at     org.apache.pig.tools.pigscript.parser.PigScriptParser.parse(PigScriptParser.java:303)
    at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:189)
    at org.apache.pig.tools.grunt.GruntParser.parseStopOnError(GruntParser.java:165)
    at org.apache.pig.tools.grunt.Grunt.run(Grunt.java:69)
    at org.apache.pig.Main.run(Main.java:490)
    at org.apache.pig.Main.main(Main.java:111)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.apache.hadoop.util.RunJar.main(RunJar.java:197)
Caused by: org.apache.pig.PigException: ERROR 1002: Unable to store alias J
    at org.apache.pig.PigServer.storeEx(PigServer.java:956)
    at org.apache.pig.PigServer.store(PigServer.java:919)
    at org.apache.pig.PigServer.openIterator(PigServer.java:832)
    ... 12 more
Caused by: org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobCreationException: ERROR 2017: Internal error creating job configuration.
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.getJob(JobControlCompiler.java:739)
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.compile(JobControlCompiler.java:259)
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.MapReduceLauncher.launchPig(MapReduceLauncher.java:180)
    at org.apache.pig.PigServer.launchPlan(PigServer.java:1270)
    at org.apache.pig.PigServer.executeCompiledLogicalPlan(PigServer.java:1255)
    at org.apache.pig.PigServer.storeEx(PigServer.java:952)
    ... 14 more
Caused by: java.io.IOException: No FileSystem for scheme: hbase
    at org.apache.hadoop.fs.FileSystem.createFileSystem(FileSystem.java:1416)
    at org.apache.hadoop.fs.FileSystem.access$100(FileSystem.java:69)
    at org.apache.hadoop.fs.FileSystem$Cache.getInternal(FileSystem.java:1453)
    at org.apache.hadoop.fs.FileSystem$Cache.get(FileSystem.java:1435)
    at org.apache.hadoop.fs.FileSystem.get(FileSystem.java:232)
    at org.apache.hadoop.fs.Path.getFileSystem(Path.java:191)
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.getTotalInputFileSize(JobControlCompiler.java:788)
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.estimateNumberOfReducers(JobControlCompiler.java:762)
    at org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.JobControlCompiler.getJob(JobControlCompiler.java:600)
    ... 19 more 
```

有任何想法吗？

Pig 版本 0.10.0 HBase 0.92.1 Hadoop 0.20.2-dev

```
DUMP A:
(1,A)
(2,B)
(3,C)
(4,D)
(5,E)

DUMP B:
(1,S)
(10,C)
(11,D)
(12,D)
(13,M)
(14,N)
(15,W)
(16,I)
(17,I)
(18,R)
(19,T)
(2,S)
(20,D)
(21,I)
(22,S)
(23,S)
(24,S)
(25,S)
(3,S)
(4,S)
(5,S)
(6,S)
(7,R)
(8,S)
(9,T) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:55:17.360

我怀疑你`hbase-site.xml`的`PIG_CLASSPATH`.

尝试将它与 zookeeper、guava 和 hbase jar 一起添加。交替启动 Pig

```
pig --conf $HBASE_HOME/conf my.pig 
```

并在脚本中注册 jar。

# spring - Spring配置文件可以选择@PropertySources吗？

> ID：12691812
> 
> 赞同：52
> 
> 时间：2012-10-02T14:03:45.470
> 
> 标签：spring

我有一个 Spring 3.1 `@Configuration`，它需要一个属性`foo`来构建一个 bean。如果应用程序具有活动的Spring 配置文件，则该属性在中定义，`defaults.properties`但可能被该属性覆盖。`overrides.properties``override`

如果没有覆盖，代码将如下所示，并且可以工作......

```
@Configuration
@PropertySource("classpath:defaults.properties")
public class MyConfiguration {

    @Autowired
    private Environment environment;

    @Bean
    public Bean bean() {
        ...
        // this.environment.getRequiredProperty("foo");
        ...
    }
} 
```

我想要一个`@PropertySource`for`classpath:overrides.properties`条件`@Profile("overrides")`。有没有人对如何实现这一点有任何想法？我考虑过的一些选项是重复的`@Configuration`，但这会违反 DRY 或对 的编程操作`ConfigurableEnvironment`，但我不确定`environment.getPropertySources.addFirst()`调用会去哪里。

如果我直接用 注入属性，则将以下内容放在 XML 配置中有效`@Value`，但在使用`Environment`和`getRequiredProperty()`方法时无效。

```
<context:property-placeholder ignore-unresolvable="true" location="classpath:defaults.properties"/>

<beans profile="overrides">
    <context:property-placeholder ignore-unresolvable="true" order="0"
                                  location="classpath:overrides.properties"/>
</beans> 
```

**更新**

如果您现在尝试这样做，请查看 Spring Boot 的[YAML 支持](http://projects.spring.io/spring-boot/docs/spring-boot/README.html)，特别是“使用 YAML 代替属性”部分。那里的配置文件支持会使这个问题变得毫无意义，但还没有`@PropertySource`支持。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-01-05T00:55:20.013

`@PropertySource`在静态内部类中添加覆盖。不幸的是，您必须同时指定所有属性源，这意味着创建“默认”配置文件来替代“覆盖”。

```
@Configuration
public class MyConfiguration
{
    @Configuration
    @Profile("default")
    @PropertySource("classpath:defaults.properties")
    static class Defaults
    { }

    @Configuration
    @Profile("override")
    @PropertySource({"classpath:defaults.properties", "classpath:overrides.properties"})
    static class Overrides
    {
        // nothing needed here if you are only overriding property values
    }

    @Autowired
    private Environment environment;

    @Bean
    public Bean bean() {
        ...
        // this.environment.getRequiredProperty("foo");
        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2020-01-07T17:54:09.993

我建议，定义两个文件，其中第二个是可选的，配置文件作为后缀：

```
@Configuration
@PropertySources({
        @PropertySource("classpath:/myconfig.properties"),
        @PropertySource(value = "classpath:/myconfig-${spring.profiles.active}.properties", ignoreResourceNotFound = true)
})
public class MyConfigurationFile {

    @Value("${my.prop1}")
    private String prop1;

    @Value("${my.prop2}")
    private String prop2;

} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-11-09T14:31:55.187

你可以做：

```
 <context:property-placeholder location="classpath:${spring.profiles.active}.properties" /> 
```

* * *

编辑：如果您需要更高级的东西，您可以在应用程序启动时注册您的 PropertySources。

web.xml

```
 <context-param>
    <param-name>contextInitializerClasses</param-name>
    <param-value>com.xxx.core.spring.properties.PropertySourcesApplicationContextInitializer</param-value>
  </context-param> 
```

您创建的文件：

```
public class PropertySourcesApplicationContextInitializer implements ApplicationContextInitializer<ConfigurableApplicationContext> {

  private static final Logger LOGGER = LoggerFactory.getLogger(PropertySourcesApplicationContextInitializer.class);

  @Override
  public void initialize(ConfigurableApplicationContext applicationContext) {
    LOGGER.info("Adding some additional property sources");
    String[] profiles = applicationContext.getEnvironment().getActiveProfiles()
    // ... Add property sources according to selected spring profile 
    // (note there already are some property sources registered, system properties etc)
    applicationContext.getEnvironment().getPropertySources().addLast(myPropertySource);
  }

} 
```

完成后，您只需在上下文中添加：

```
<context:property-placeholder/> 
```

我无法真正回答您关于多个配置文件的问题，但我猜您在这样的初始化程序上激活它们，并且您可以在配置文件激活期间注册适当的 PropertySource 项目。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-09-02T12:21:03.717

如果您需要支持多个配置文件，您可以执行以下操作：

```
@Configuration
public class Config {

    @Configuration
    @Profile("default")
    @PropertySource("classpath:application.properties")
    static class DefaultProperties {
    }

    @Configuration
    @Profile("!default")
    @PropertySource({"classpath:application.properties", "classpath:application-${spring.profiles.active}.properties"})
    static class NonDefaultProperties {
    }
} 
```

这样您就不需要为每个配置文件定义一个静态配置类。感谢[David Harkness](https://stackoverflow.com/a/14167357/425238)让我朝着正确的方向前进。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-02T14:39:06.963

除了您建议的 Emerson 之外，我想不出任何其他方法，即在`@Configuration`带有`@Profile`注释的单独文件中定义此 bean：

```
@Configuration
@Profile("override")
@PropertySource("classpath:override.properties")
public class OverriddenConfig {

    @Autowired
    private Environment environment;

    @Bean
    public Bean bean() {
        //if..
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-01-05T00:13:45.643

**注意：**此答案提供了将属性文件与`@PropertySource`. 我走这条路是因为尝试使用多个属性文件太麻烦了，这些属性文件可能每个都有覆盖，同时避免重复代码。

为每个相关的属性集创建一个 POJO 接口，以定义它们的名称和类型。

```
public interface DataSourceProperties
{
    String driverClassName();
    String url();
    String user();
    String password();
} 
```

实现以返回默认值。

```
public class DefaultDataSourceProperties implements DataSourceProperties
{
     public String driverClassName() { return "com.mysql.jdbc.Driver"; }
     ...
} 
```

每个配置文件（例如开发、生产）的子类并覆盖与默认值不同的任何值。这需要一组互斥的配置文件，但您可以轻松添加“默认”作为“覆盖”的替代方案。

```
@Profile("production")
@Configuration
public class ProductionDataSourceProperties extends DefaultDataSourceProperties
{
     // nothing to override as defaults are for production
}

@Profile("development")
@Configuration
public class DevelopmentDataSourceProperties extends DefaultDataSourceProperties
{
     public String user() { return "dev"; }
     public String password() { return "dev"; }
} 
```

最后，将属性配置自动装配到需要它们的其他配置中。这里的优点是您不会重复任何`@Bean`创建代码。

```
@Configuration
public class DataSourceConfig
{
    @Autowired
    private DataSourceProperties properties;

    @Bean
    public DataSource dataSource() {
        BoneCPDataSource source = new BoneCPDataSource();
        source.setJdbcUrl(properties.url());
        ...
        return source;
    }
} 
```

我仍然不相信我会坚持这一点，而不是根据 servlet 上下文初始化程序中的活动配置文件手动配置属性文件。我的想法是进行手动配置不适合单元测试，但我现在不太确定。我真的更喜欢阅读属性文件而不是属性访问器列表。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-09-22T10:11:27.680

这里提到的所有解决方案都有些尴尬，只能与一个配置文件预设一起使用，并且它们不会与更多/其他配置文件一起使用。目前一个 Spring 团队[拒绝](https://github.com/spring-projects/spring-boot/issues/12822)引入这个特性。但这是我发现的解决方法：

```
package com.example;

public class MyPropertySourceFactory implements PropertySourceFactory, SpringApplicationRunListener {

    public static final Logger logger = LoggerFactory.getLogger(MyPropertySourceFactory.class);

    @NonNull private static String[] activeProfiles = new String[0];

    // this constructor is used for PropertySourceFactory
    public MyPropertySourceFactory() {
    }

    // this constructor is used for SpringApplicationRunListener
    public MyPropertySourceFactory(SpringApplication app, String[] params) {
    }

    @Override
    public void environmentPrepared(ConfigurableBootstrapContext bootstrapContext, ConfigurableEnvironment environment) {
        activeProfiles = environment.getActiveProfiles();
    }

    @Override
    public PropertySource<?> createPropertySource(String name, EncodedResource encodedResource) throws IOException {
        logger.info("Loading: {} with profiles: {}", encodedResource.toString(), activeProfiles);
        // here you know all profiles and have the source Resource with main
        // properties, just try to load other resoures in the same path with different 
        // profile names and return them as a CompositePropertySource
    }
} 
```

要使其正常工作，您必须具有`src/main/resources/META-INF/spring.factories`以下内容：

```
org.springframework.boot.SpringApplicationRunListener=com.example.MyPropertySourceFactory 
```

现在您可以将自定义属性文件放在某处并使用以下命令加载它`@PropertySources`：

```
@Configuration
@PropertySource(value = "classpath:lib.yml", factory = MyPropertySourceFactory.class)
public class PropertyLoader {
} 
```

# vim - vim 中的 $PATH 与 shell 中的 $PATH 不同？(Mac OSX)

> ID：12691814
> 
> 赞同：3
> 
> 时间：2012-10-02T14:03:47.733
> 
> 标签：vim, environment-variables

如您所知，OSX 中的 ctags 是基本版本，我使用自制软件安装了完整版本的 ctags，但是当我想在 Vim 的命令模式下使用它时，它总是运行基本版本。所以我在 Vim 的命令模式下检查了 $PATH 变量，比如`!echo $PATH`，它显示`/usr/local/bin`后面跟着`/usr/bin`，这与 shell 环境 $PATH 不同，所以请告诉我如何解决这个问题，非常感谢！顺便说一句，我更改了 vimrc 文件中的 $PATH，但如果我`echo $PATH`在 Vim 的命令模式下键入命令，它只会影响 $PATH，而不是`!echo $PATH`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:11:38.170

不幸的是，MacVim 不会受到您在`.profile`或中设置的路径的影响`.bashrc`。

`/etc/paths`您可以使用和`/etc/paths.d/`机制设置影响 Mac OS X 上所有程序的路径。更详细的解释在这里：

[https://serverfault.com/questions/16355/how-to-set-global-path-on-os-x](https://serverfault.com/questions/16355/how-to-set-global-path-on-os-x)

# google-calendar-api - ICS 格式的事件绑定到几周，而不是特定的日期或时间

> ID：12691817
> 
> 赞同：0
> 
> 时间：2012-10-02T14:03:54.407
> 
> 标签：google-calendar-api, icalendar

我想将一些事件从我的 webapp 导出为 .ics 格式，以便我可以将它们加载到 Google 日历上。

我知道对于“标准”日期和时间事件，DTSTART 格式将类似于：

```
DTSTART:19970714T170000Z 
```

事实是，我的活动仅限于几周（例如：在第 13 周“列出您的需求”），而不是几天。我应该在上面引用的行上改用什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T15:08:44.057

你应该做一个仅限日期的时间，例如：

```
DTSTART;VALUE=DATE:19970714 
```

结束然后在 1 周后结束活动，其中任一

```
DTEND:19970721 
```

或者

```
DURATION:P7D 
```

# c# - VS2012 Web 服务器 - 将虚拟路径从 /mysite 更改为 root

> ID：12691819
> 
> 赞同：1
> 
> 时间：2012-10-02T14:04:10.367
> 
> 标签：c#, visual-studio-2012

当我在 vs2012 中启动我的网站时，它会打开到 localhost:4661/MySite。这将解析为 C:\Projects\Websites\MySite。如何更改 localhost:4661 以解析到位于 C:\Projects\Websites\MySite 的网站？

我正在使用 Visual Studio Web 服务器。

看来我需要将虚拟路径从 /MySite 更改为 /。但是我该怎么做呢？

如果有帮助，我使用的是“网站”而不是 Web 应用程序项目。

这在 vs2010 中有效，但当时我使用的是不同的 Web 服务器。

我是vs2012的新手。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:16:11.123

您应该能够在项目属性/Web/服务器下的 VirtualPath 字段中删除“MySite”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:22:27.070

[从Imar 在 Programmer-to-Programmer](http://p2p.wrox.com/book-beginning-asp-net-4-5-c-vb/89330-unable-find-virtual-path-property-vs2012.html)找到这个答案，试图自己研究这个问题。

# android - android显示旋转进度对话框，直到活动完成

> ID：12691830
> 
> 赞同：0
> 
> 时间：2012-10-02T14:04:45.763
> 
> 标签：android, android-activity, dialog, progress

我试图显示一个旋转的进度对话框，直到我的活动调用方法完成（）。我在调用finish() 之前调用progressDialog.show()。我可以看到微调器，但它没有旋转......有什么建议吗？

我试图将finish（）和其他活动的onActivityResult（）调用的东西放在后台线程中，所以ui线程不应该做任何事情。当我正在调试并且我在另一个线程上的 finish() 方法而不是主线程上等待时，进度对话框正在旋转......当我更进一步并调用 finish() 方法时，进度对话框停止旋转并且1-2 秒后活动消失。

所以我唯一的建议是finish（）方法是不移动进度对话框的原因......是否有可能让它移动？

提前致谢！

编辑：该代码在完成的活动 A 中。

```
private void goBack() {
    setResult((mReopen) ? Constants.RESULT_REOPEN : RESULT_OK);
    if (mReopen) {
        mProgressDialog.show();
    }

    new Thread(new Runnable() {
        @Override
        public void run() {
            finish();
        }
    }).start();
} 
```

该代码位于启动活动 A 的活动 B 中。

```
@Override
protected void onActivityResult(final int requestCode, final int resultCode, final Intent intent) {
    if (requestCode == Constants.REQUEST_CODE_OPEN_EMAG) {
        new Thread(new Runnable() {
            @Override
            public void run() {
                switch (resultCode) {
                    case Constants.RESULT_REOPEN:
                        mReopen = true;
                        openEmag(mLastOpenedEmagId, false, false);
                        break;
                    default:
                        mReopen = false;
                        break;
                }
            }
        }).start();
    }
} 
```

正如你所看到的，所有的东西都在与 ui-thread 不同的线程中被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:36:15.130

finsih() 停止您的活动并退出它。你是什​​么意思后台线程* *s* *？

您应该有一个用于繁重操作的后台线程，并在该线程结束时调用 finish()。

像这样：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == yourCode) {
        if (resultCode == RESULT_OK) {
            //... Do dialog.show() here
            new Thread(){
                public void run() {
                    //... Your stuff here
                    finish();
                };
            }.start();
        }
    } else {
        super.onActivityResult(requestCode, resultCode, data);
    }
} 
```

# java - 如何将图像放在 JButton 上？

> ID：12691832
> 
> 赞同：4
> 
> 时间：2012-10-02T14:04:45.767
> 
> 标签：java, image, swing, jbutton, embedded-resource

我正在编写一个程序，该程序需要我有一个顶部带有图像的按钮，但是，到目前为止，我还不能让它工作。我检查了该站点上的其他几篇文章，包括[如何将图像添加到 JButton](https://stackoverflow.com/questions/4801386/how-do-i-add-an-image-to-a-jbutton)。
我的代码：

```
public class Tester extends JFrame
{
    public Tester()
    {
        JPanel panel = new JPanel();
        getContentPane().add(panel);
        panel.setLayout(null);

        setTitle("Image Test");
        setSize(300,300);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(EXIT_ON_CLOSE);

        JButton button = new JButton();
        try 
        {
            Image img = ImageIO.read(getClass().getResource("Images\\BBishopB.gif"));
            button.setIcon(new ImageIcon(img));
        } 
        catch (IOException ex) {}

        button.setBounds(100,100,100,100);
        panel.add(button);
    }

    public static void main(String[] args)
    {
        Tester test = new Tester();
        test.setVisible(true);
    }
} 
```

当此代码运行时，会出现错误：线程“main”中的异常 java.lang.IllegalArgumentException: input == null! 此错误发生在以下行：

```
Image img = ImageIO.read(getClass().getResource("Images\\BBishopB.gif")); 
```

我不认为此错误是由于 java 代码找不到该文件，因为我的 Images 文件夹位于 src 文件夹中（我使用的是 Eclipse），正如上面链接所推荐的那样。
有没有人对问题可能有任何想法？
谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T14:17:14.233

在使用 Eclipse 时，您不会将图像保存在**src 文件夹**中，而是`Source Folder`为此目的创建一个。请参阅此链接，了解如何[在 Eclipse 中将图像添加到资源文件夹](https://stackoverflow.com/a/9278270/1057230)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:07:46.367

使用它来创建按钮。

```
JButton button = new JButton(new ImageIcon(getClass().getClassLoader()
                                          .getResource("Images/BBishopB.gif"))); 
```

而你正在做的是将 设置`Image`为图标。这不起作用，因为该`setIcon()`方法需要实现`Icon`接口的对象。希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T14:14:56.757

尝试在包名前加一个斜杠，`getResource()`如下所示：

```
Image img = ImageIO.read(getClass().getResource("/Images/BBishopB.gif")); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T14:22:06.067

您可以直接找到图像：

```
JButton jb = new JButton(new ImageIcon("pic.png")); //pic is in project root folder
//Tip: After placing the image in project folder, refresh the project in Eclipse. 
```

或者，如果图像将在 JAR 中，我通常会创建一个函数来为我进行检索，以便我可以重新使用它。

```
public static ImageIcon retrieveIcon(String path){
    java.net.URL imgUrl = 'classpackage'.'classname'.class.getResource(path);
    ImageIcon icon = new ImageIcon(imgUrl);
    return icon;
} 
```

那我就做

```
JButton jb = new JButton(retrieveIcon("/pic.png")); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-03T04:08:03.993

```
Image img = ImageIO.read(getClass().getResource("Images\\BBishopB.gif")); 
```

这条线试图一次做太多事情，这使得当你遇到错误时很难追踪到错误。我建议拆分它：

```
URL imgURL = getClass().getResource("Images\\BBishopB.gif");
Image img = ImageIO.read(imgURL); 
```

现在您可以使用 Eclipse 调试器检查 的返回值`imgURL`，这是最有可能用于 NPE 的候选对象。尽管这并没有告诉您为什么会收到错误消息，但它大大缩小了问题的范围。

# c# - Alpha 通道不工作

> ID：12691834
> 
> 赞同：0
> 
> 时间：2012-10-02T14:05:10.243
> 
> 标签：c#, xaml, alpha

所以我正在为 windows phone 编写一个基本的应用程序，但 alpha 通道似乎没有出现在我使用的任何图像中。在 Fireworks 中，我可以看到 alpha 通道。

```
<Image Source="Assets/Images/OnBar.png" Width="100" Height="60" Margin="280, -560, 0, 0" /> 
```

那是首先用于显示图像的 xaml 代码。目前我没有任何 C# 代码，因此如果我需要在该侧实现某些东西，请指出正确的方向。我环顾四周，但找不到任何有效或有用的东西。图像本身也是白色的，因此如果 alpha 通道不起作用，则不会显示任何内容。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:08:28.290

刚刚测试过，它适用于任意透明的`Image`. 也许您的 png 导出格式与 xaml 不兼容。或者你`Image`在一个不透明的容器内。

但是你不要忘记在`Image`的参数中声明任何东西，据我所知，alpha 通道是内置的，不可调整。

请提供更多详细信息，我将编辑我的帖子。

# javascript - 从存储在对象中的元素获取数据

> ID：12691836
> 
> 赞同：1
> 
> 时间：2012-10-02T14:05:13.200
> 
> 标签：javascript, jquery, object

对，所以我正在尝试找出一种方法，我可以检查对象中的元素是否有特定的数据，然后在必要时将它们过滤掉。

我有一个简单的列表，我正在遍历所有列表项并将它们放入一个对象中。稍后我想运行并检查每个元素的数据ID。

```
<ul id="test">
    <li data-id="1">a</li>
    <li>b</li>
    <li>c</li>
    <li>d</li>
    <li>e</li>
    <li>f</li>
    <li>g</li>
    <li>h</li>
    <li data-id="2">i</li>
    <li>j</li>
    <li>k</li>
    <li>l</li>
    <li>m</li>
    <li>n</li>
</ul>`

var holder = {};
i = 0;
$('#test li').each(function(){
    holder[i]=$(this);
    i++
});
$('#test').append(holder[2]);
holder.each(function(){
    console.log($(this).attr('data-id'));

}); 
```

我敢肯定，你们中的一个聪明人将能够告诉我如何立即进行。这可能是非常明显的！

为帮助的家伙干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:09:13.547

无需创建额外的对象，通过使用 jQuery 选择器选择元素，您就有了一个对象。

```
var $holder = $('#test li');

$holder.each(function(){
     console.log($(this).data('id'));
     // console.log(this.dataset.id);
}) 
```

如果要选择具有 data-id 属性的 li 元素，可以使用属性选择器：

```
var $holder = $('#test li[data-id]'); 
```

对于存储值，您可以使用`map`方法：

```
var data = $('#test li[data-id]').map(function(){
                return this.dataset.id;
           }).get() // [1, 2] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:13:33.107

您有一个简单的数组，其中包含项目列表，而不是 jQuery 对象：

```
holder.each(function(){
    console.log($(this).attr('data-id'));

}); 
```

如果您想遍历此类数组的项目，您应该使用：

```
$.each(holder, function(){
    console.log($(this).attr('data-id'));

});​ 
```

但是从你的代码中你不需要那个。您可以执行以下操作：

```
$('#test li').each(function(){
    console.log($(this).attr('data-id'));
});
$('#test').append($('#test li').eq(2)); 
```

# ios - 创建一个确定当前语言是 RTL 还是 LTR 的 Objective-C 预处理器指令

> ID：12691840
> 
> 赞同：0
> 
> 时间：2012-10-02T14:05:25.140
> 
> 标签：ios, objective-c, right-to-left, preprocessor-directive

我正在尝试构建一个 Objective-C 预处理器指令，它将确定当前用户的首选语言是 RTL 还是 LTR - 而不是每次我想显示基于方向的布局（例如 UITableView）或保存时都检查它全局范围内的相应布尔值。

有没有人对此有任何见解？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:14:20.283

不可能。

预处理先于编译。

用户的写/读方向是在他们运行你的程序时确定的（并且可能会改变，所以缓存也可能是错误的）。

* * *

当然，您可以：

```
#define IS_USER_READING_DIRECTION_LTR <#Whatever you use now to determine this dynamically#> 
```

......但我不相信这是你的问题。

# c# - 在 C# Windows 窗体应用程序中存储/读取多个用户设置的最佳方法是什么？

> ID：12691841
> 
> 赞同：0
> 
> 时间：2012-10-02T14:05:24.967
> 
> 标签：c#, .net

标题基本概括了所有内容。我一直在搜索，但我还没有真正找到处理多个用户的设置/配置的好方法。

我发现最好的方法是关于使用 AppData 的措辞宽松，但我不确定这是否是最好的方法；我希望我的应用程序被很多人使用，而且很多人不会在计算机上使用多个配置文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:12:38.187

如何为每个用户创建 xml 文档，您将从中读取/写入每个用户的设置？如果您使用数据库，请创建一个名为 settings 的新表，然后使用您拥有的设置命名所有字段。用真/假值和用户 ID 填充表。也许这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T09:54:08.663

最好的方法肯定是使用新的用户设置配置文件。

单击添加新项目，然后选择设置。

然后你可以用这样的方式调用它们：

```
string temp_setting = setting_name.Default.item_name; 
```

其中 setting_name 是您创建的新设置文件的名称，item_name 是设置中的属性名称。

# php - HTML/PHP 文件上传

> ID：12691842
> 
> 赞同：3
> 
> 时间：2012-10-02T14:05:26.513
> 
> 标签：php, html, file, file-upload, upload

所以我希望用户只能上传文档或 docx。所以首先这是我的html：

```
<form action="upload_file.php" method="post" enctype="multipart/form-data">
    Select a file: <input type="file" name="img">
    <input type="submit">
</form> 
```

这是我的php：

```
$allowedExts = array("doc", "docx");
    $extension = end(explode(".", $_FILES["file"]["name"]));

    if ($extension!=".doc" || $extension!=".doc"
    && ($_FILES["file"]["size"] < 200000)
    && in_array($extension, $allowedExts)) {
        if ($_FILES["file"]["error"] > 0)
        {
            echo "Return Code: " . $_FILES["file"]["error"] . "<br />";
        }
        else
        {
            echo "Upload: " . $_FILES["file"]["name"] . "<br />";
            echo "Type: " . $_FILES["file"]["type"] . "<br />";
            echo "Size: " . ($_FILES["file"]["size"] / 1024) . " Kb<br />";
            echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br />";

            if (file_exists("Proposals/" . $_FILES["file"]["name"]))
            {
                echo $_FILES["file"]["name"] . " already exists. ";
            }
            else
            {
                move_uploaded_file($_FILES["file"]["tmp_name"],
                "Proposals/" . $_FILES["file"]["name"]);
                echo "Stored in: " . "Proposals/" . $_FILES["file"]["name"];
            }
        }
    } else {
        echo "Invalid file";
    } 
```

每次我尝试上传文件时，无论是 doc 还是 png，它都会输出：

```
Upload: 
Type: 
Size: 0 Kb
Temp file: 
already exists. 
```

最终没有任何东西上传到提案文件夹。所以我有两个问题：
1）我的代码有什么问题？
2) 它重定向到upload_file.php 并显示一条消息。有没有办法真正返回主页并显示它成功的文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:13:31.260

第一个问题已经回答过了，我不再回答。

> 2) 它重定向到upload_file.php 并显示一条消息。有没有办法真正返回主页并显示它成功的文本？

通常最好在重定向页面上显示成功消息，但您可以通过以下两种方式解决：

*   存储以前的 URL（或知道它）并重定向到它`header("Location: old_page.php");`
*   将表单的目标设为 iframe。这意味着主页本身不会重定向，您只需从upload_file.php（将加载到iframe）中冒泡一个响应，从而为您的应用程序无缝上传。

这也不是获得文件扩展名的最佳方法：

```
$extension = end(explode(".", $_FILES["file"]["name"])); 
```

尝试改用 pathinfo：http: [//php.net/manual/en/function.pathinfo.php](http://php.net/manual/en/function.pathinfo.php)

```
$extension = pathinfo( $_FILES["file"]["name"], PATHINFO_EXTENSION); 
```

而你的`if`声明：

```
if ($extension!=".doc" || $extension!=".doc"
    && ($_FILES["file"]["size"] < 200000)
    && in_array($extension, $allowedExts)) { 
```

即使这是一个很小的用法，`in_array`我仍然建议将其取出并使用更实用的方法来搜索数组： http: [//php.net/manual/en/function.array-search.php](http://php.net/manual/en/function.array-search.php)

所以你`if`会变成这样：

```
if (($_FILES["file"]["size"] < 200000) && array_search($extension, $allowedExts)!==false) { 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T14:08:21.423

你的文件字段名是`img`和你用过`$_FILES["file"]`的，但应该是`$_FILES["img"]`。

你也需要改变你的 if 条件

```
if (($_FILES["file"]["size"] < 200000)
    && in_array($extension, $allowedExts)) { 
```

没有必要

> $extension!=".doc" || $extension!=".doc" &&

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T14:08:35.310

您必须使用`$_FILES["img"]`而不是`$_FILES["file"]`将输入名称重命名为“文件”。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T14:09:55.777

改变

```
$extension!=".doc" || $extension!=".doc" 
```

到

```
$extension!=".doc" || $extension!=".docx" 
```

并使用`$_FILES['img']`而不是`$_FILES['file']`因为您的文件类型具有`img`名称属性。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-02T14:13:11.580

1.  尝试使用 $_FILES["img"] 数组来访问上传的文件属性（您的“选择文件”输入称为“img”）。

2.  您可以使用“位置”http 标头重定向回源页面。

# iphone - 使用 NFC Reader 在 iPhone App 中读取 RFID 标签

> ID：12691843
> 
> 赞同：0
> 
> 时间：2012-10-02T14:05:27.310
> 
> 标签：iphone, ios, nfc

> **可能重复：**
> [如何使用 iPhone SDK 读取 RFID](https://stackoverflow.com/questions/10429961/how-to-read-rfid-using-iphone-sdk)

我是这项技术的新手

我必须开发一个 iPhone 应用程序，该应用程序将**使用 NFC 阅读器读取 RFID 标签**，但 iPhone 中没有内置 NFC 阅读器。

所以我的问题是如何使用 NFC 阅读器硬件在 iPhone 应用程序中读取 RFID 标签数据。NFC 阅读器是否有任何外部硬件，如果有，我如何编程以从我的应用程序连接该阅读器。

请在这个问题上帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:01:19.810

我没有任何使用它们的经验，但它们看起来很有前途： http: [//www.icarte.ca](http://www.icarte.ca) 但是如果你想获得他们的 API，你必须联系他们。

# c# - 使用 LINQ 将字符串数组中的部分提取到新集合中

> ID：12691848
> 
> 赞同：1
> 
> 时间：2012-10-02T14:05:46.187
> 
> 标签：c#, arrays, linq, collections

我有一个这种格式的字符串数组（每一行都是数组中的一个槽）：

IT1
PID
参考
参考
REF
IT1
PID
参考
IT1
PID
参考
参考
...

我想通过最后一个 REF 将每个 IT1 提取到使用 LINQ 的新数组中。新结果将是一个`IEnumerable<IEnumerable<string>>`.

使用上面的字符串槽数组示例，新的 IEnumerable 集合`IEnumerable<string>`中应该有 3。

例如：

1 级
IT1
PID
参考
参考
REF
端 1 级

2 类
IT1
PID
REF
结束 2 类

3 级
IT1
PID
参考
REF
结束 3 级
...

请注意，阵列的某些部分有 1 个 REF、一些 2 REF 和一些 3 REF。

如何使用 LINQ 将 IT1 到最后一个 REF 的每个部分提取到新的 REF 集合中`IEnumerable<IEnumerable<string>>`？

伪代码...

```
var result = arrayData.Select(s => s.StartsWith("IT1")
.GroupBy(...)
.Select(result => new {IT1 through last ref goes here})
.ToArray(); 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:21:34.530

`GroupBy`您可以使用以下临时状态对数组进行分区：

```
var counter = 0;
var arrays = input.GroupBy(s => counter += s == "IT1" ? 1 : 0)
                  .Select(g => g.ToArray())
                  .ToArray(); 
```

这将为您提供一个数组数组；每个子数组都将从一个`"IT1"`元素开始，并以您在下一个之前输入的任何内容结束`"IT1"`。如果您的数据有效，那将是一个`"REF"`. 如果数据无效，您需要指定在这种情况下应该发生什么。

不过，我不太确定您希望如何将这些数组转换为匿名对象。匿名对象可能有一个未知的类型名称，但它们仍然是非常强类型的：您无法动态决定其成员的数量、名称和类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:28:04.333

```
public static IEnumerable<IEnumerable<string>> Partitian(IEnumerable<string> source)
{
    List<string> buffer = new List<string>();
    int? lastRef = null;

    int position = 0;
    foreach (string s in source)
    {
        if (s == "REF")
            lastRef = position;
        else if (s == "IT1" && lastRef.HasValue)
        {
            yield return buffer.Take(lastRef.Value + 1);
            buffer.Clear();
            position = 0;
            lastRef = null;
        }
        buffer.Add(s);

        position++;
    }

    if (buffer.Any() && lastRef.HasValue)
        yield return buffer;
} 
```

# c# - 在实体框架中设置默认值 - 数据库优先

> ID：12691854
> 
> 赞同：5
> 
> 时间：2012-10-02T14:06:19.727
> 
> 标签：c#, asp.net-mvc-3, entity-framework-4

我正在使用 Entity Framework 4.3.1，从数据库中自动生成实体。

由此，有没有办法将默认值设置为？我不想把它放在自动生成的代码中，因为它会被覆盖。

我知道可以使用部分类，所以我尝试了这样的方法，其中生成了实体，而 DESCRIPTION_ 是我想要设置为默认值的属性。

```
namespace name.Models
{
    public partial class ENTITY
    {
        public string DESCRIPTION_
        {
            set { _DESCRIPTION_ = "default string"; }
        }
    }
} 
```

也许如果有人能给我一个很好的例子！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:11:14.590

您给出的示例意味着DESCRIPTION只能是“默认字符串”

您可以在构造函数中设置它

```
namespace name.Models 
{
  public partial class ENTITY
  {
    private string defaultDescription = "some text";
    public ENTITY() {
      DESCRIPTION_ = defaultDescription;
    } 
  }
} 
```

或通过将您的属性切换为具有支持字段的属性

```
namespace name.Models
{
    public partial class ENTITY
    {
        private string _desc = "some default value"; 
        public virtual string DESCRIPTION_ {get {return _desc} set {_desc = value;} }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:10:45.090

您`OnCreated`在部分类上使用：

```
public partial class ENTITY
{    
  partial void OnCreated()
  {
    DESCRIPTION_ = "default string";
  } 
} 
```

# c++ - 为什么我会收到错误 LNK2001 和 LNK1120

> ID：12691855
> 
> 赞同：-2
> 
> 时间：2012-10-02T14:06:20.987
> 
> 标签：c++, opencv

> **可能重复：**
> [什么是未定义的引用/未解决的外部符号错误，我该如何解决？](https://stackoverflow.com/questions/12573816/what-is-an-undefined-reference-unresolved-external-symbol-error-and-how-do-i-fix)

我正在使用 Visual Studio 2010 和 OpenCV 库。当我尝试编译以下代码时，出现以下错误：

错误 LNK2001：无法解析的外部符号“class cv::Mat __cdecl grdX(class cv::Mat)”(?grdX@@YA?AVMat@cv@@V12@@Z)

错误 LNK1120：1 未解决的外部

```
//Includes
#include <iostream>
#include <string>
#include <cstdio>
#include <cstdlib>
#include <math.h>
#include <vector>
#include <stdio.h>
#include <opencv2/highgui/highgui.hpp>

using namespace std;
using namespace cv;

//Prototypes
Mat grdX(Mat);
Mat grdY(Mat);

int main()
{
    Mat_<uchar> mat = imread("C:/img.jpg");
    int row = mat.rows;
    int col = mat.cols;
    Mat_<uchar> f(row, col);
    f = grdX(mat);
    namedWindow ("img2", CV_WINDOW_AUTOSIZE);
    imshow ("img2", f);
    return EXIT_SUCCESS;
}

Mat grdX(Mat_<uchar> matrix)
{
    int row = matrix.rows;
    int col = matrix.cols;
    Mat_<uchar> grd(row,col);
    for (int i=1; i<=row ;i++)
        {
            for (int j=1; j<=col; j++)
            {
                if (j==1)
                {grd(i,1) = (int)matrix(i,2)-(int)matrix(i,1);}
                else if (j==col)
                {grd(i,col) = (int)matrix(i,col)-(int)matrix(i,col-1);}
                else {grd(i,j)=((int)matrix(i,j+1)-(int)matrix(i,j-1))/2;}
            }
        }
    return grd;
}

Mat grdY(Mat_<uchar> matrix)
{
    int row = matrix.rows;
    int col = matrix.cols;
    Mat_<uchar> grd(row,col);
    for (int i=1; i<=row ;i++)
        {
            for (int j=1; j<=col; j++)
            {
                if (i==1)
                {grd(1,j) = (int)matrix(2,j)-(int)matrix(1,j);}
                else if (i==row)
                {grd(row,j) = (int)matrix(row,j)-(int)matrix(row-1,j);}
                else {grd(i,j)=((int)matrix(i+1,j)-(int)matrix(i-1,j))/2;}
            }
        }
    return grd;
} 
```

我在我的代码中找不到什么问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:08:20.783

您需要在项目属性中指定您的库所在的位置。在链接器-> 常规/输入中。在您的情况下，CV 库

# java - 无法在基于 PC 的 Java 服务器上运行我的 android 客户端

> ID：12691857
> 
> 赞同：0
> 
> 时间：2012-10-02T14:06:23.377
> 
> 标签：java, android, sockets

我正在尝试将字符串形式的 android 设备（客户端）传递给我的笔记本电脑（服务器），为此，我创建了一个 android 客户端和一个 java 服务器。java应用程序（服务器）在模拟器中成功地监听了我的家庭IP上的我的android代码（客户端），但问题是，只要我在手机上安装客户端并开始与服务器通信，什么都没有发生。服务器只是尝试侦听，但作为响应，客户端不做任何事情来传递字符串。

我的代码有什么问题以及如何克服这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:15:25.540

1.  首先尝试使用模拟器浏览器连接到服务器，`localhost:serverport`或者`yourip:port`
2.  使用套接字嗅探工具查看您的客户端是否正在从模拟器发送任何内容。
3.  检查 android 应用程序的互联网权限。
4.  检查/禁用模拟器中设置的任何代理。
5.  如果有任何异常，请发布 adb log。

# c# - 字典在 loadingfromscreen 处停止

> ID：12691859
> 
> 赞同：1
> 
> 时间：2012-10-02T14:06:33.863
> 
> 标签：c#, asp.net, dictionary, pageload

我运行代码，它不会存储它在从屏幕加载时立即停止的值。它应该做的是一个多页应用程序表单，它将从下一个表单将值重新输入到后退按钮上的 texbox 中。

ASP.net 代码太长，无法发布，但基本上它只是 texbox 和 dropbox。如果需要，我可以发布它，但 90% 的主要问题是 C# 代码。

更新：当我说停止时，它会继续代码但不会运行字典方法...我在该方法仅在字典中停止的地方放了一个箭头

C＃：

```
public partial class employment_driversapplication_personalinfo : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    Dictionary<string, string> DriversApplicationData = (Dictionary<string, string>) Session["DriversApp"];

    try
    { 

            if (Page.IsPostBack)
            {
                LoadMemoryFromScreen(DriversApplicationData);
            }
            else
            {
                LoadScreenFromMemory(DriversApplicationData);
            }
              }

    catch //(Exception ex)
    {
       // throw new Exception("Exception occured in employment_driversapplication_personalinfo.aspx - Page_Load" + ex.Message);
    }
    finally
    {

    }
} 

private void LoadMemoryFromScreen(Dictionary<string, string> DicDriversApp)
    {

    DicDriversApp["position"] = position.Text; <---Stops here (won't even store this)
    DicDriversApp["fname"] = fname.Text;
    DicDriversApp["middleinitial"] = middleinitial.Text;
    DicDriversApp["lname"] = lname.Text;
    DicDriversApp["birthday"] = birthday.Text;
    DicDriversApp["proofofage"] = proofofage.SelectedValue;
    DicDriversApp["address"] = address.Text;
    DicDriversApp["city"] = city.Text;
    DicDriversApp["state"] = state.Text;
    DicDriversApp["email"] = email.Text;
    DicDriversApp["phone"] = phone.Text;
    DicDriversApp["altphone"] = altphone.Text;
    DicDriversApp["citizen"] = citizen.SelectedValue;
    DicDriversApp["whoreferred"] = whoreferred.Text;
    DicDriversApp["famfriend"] = famfriend.Text;
    DicDriversApp["relationship"] = relationship.Text;
    DicDriversApp["rateofpayexpected"] = rateofpayexpected.Text;
    DicDriversApp["rateofpaytype"] = RadioButtonList1.SelectedValue;
    DicDriversApp["employedNow"] = employednow.SelectedValue;
    DicDriversApp["curremployment"] = curremployment.Text;
    DicDriversApp["pastAddress"] = pastaddress.SelectedValue;
    DicDriversApp["previousAddress"] = previousaddress.Text;
    DicDriversApp["previousCity"] = previouscity.Text;
    DicDriversApp["previousZip"] = previouszip.Text;
    DicDriversApp["previousState"] = previousstate.Text;
    DicDriversApp["previousDuration"] = previousduration.Text;
    DicDriversApp["previousAddress1"] = previousaddress1.Text;
    DicDriversApp["previousCity1"] = previouscity1.Text;
    DicDriversApp["previousZip1"] = previouszip1.Text;
    DicDriversApp["previousState1"] = previousstate1.Text;
    DicDriversApp["previousDuration1"] = previousduration1.Text;

    Session["DriversApp"] = DicDriversApp;
    }

private void LoadScreenFromMemory(Dictionary<string, string> DicDriversApp)
{
    position.Text = DicDriversApp["position"];
    fname.Text = DicDriversApp["fname"] ;
    middleinitial.Text = DicDriversApp["middleinitial"];
    lname.Text = DicDriversApp["lname"];
    birthday.Text = DicDriversApp["birthday"];
    proofofage.SelectedValue = DicDriversApp["proofofage"];
    address.Text = DicDriversApp["address"];
    city.Text = DicDriversApp["city"];
    state.Text = DicDriversApp["state"];
    email.Text = DicDriversApp["email"];
    phone.Text = DicDriversApp["phone"];
    altphone.Text = DicDriversApp["altphone"];
    citizen.SelectedValue = DicDriversApp["citizen"];
    whoreferred.Text = DicDriversApp["whoreferred"];
    famfriend.Text = DicDriversApp["famfriend"];
    relationship.Text = DicDriversApp["relationship"];
    rateofpayexpected.Text = DicDriversApp["rateofpayexpected"];
    RadioButtonList1.SelectedValue = DicDriversApp["rateofpaytype"];
    employednow.SelectedValue = DicDriversApp["employedNow"];
    curremployment.Text = DicDriversApp["curremployment"];
    pastaddress.SelectedValue = DicDriversApp["pastAddress"];
    previousaddress.Text = DicDriversApp["previousAddress"];
    previouscity.Text = DicDriversApp["previousCity"];
    previouszip.Text = DicDriversApp["previousZip"];
    previousstate.Text = DicDriversApp["previousState"];
    previousduration.Text = DicDriversApp["previousDuration"];
    previousaddress1.Text = DicDriversApp["previousAddress1"];
    previouscity1.Text = DicDriversApp["previousCity1"];
    previouszip1.Text = DicDriversApp["previousZip1"];
    previousstate1.Text = DicDriversApp["previousState1"];
    previousduration1.Text = DicDriversApp["previousDuration1"];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:28:33.723

尝试这样的事情：

```
 private void LoadMemoryFromScreen()
    {    
     Dictionary<string, string> driver = new Dictionary<string, string>();
     driver.Add("position", position.Text);
     driver.Add("othervalue",value.Text); ///etc..
     Session["dict"] = driver;
    } 
```

然后，稍后如果您想访问字典中的值，请使用以下内容：

```
var dict = (Dictionary<string, string>)Session["dict"]; 
```

问题在于您将不得不使用`dict.GetElementAt(index)`它来检索值，我认为这不是一个很好的方法。

这会起作用，但我有点不明白你为什么要使用字典来做到这一点。我假设您只在页面上加载 1 个人的数据？然后你也可以只创建一个包含所有属性的类，然后你可以传递它而不是使用这个字典/会话黑客。

```
public class DriversApplicationData
{
public string position {get;set;}
public string firstname {get;set;}
//etc
} 
```

然后，你可以做类似的事情

```
DriversApplicationData data = new DriversApplicationData();
data.position = position.Text;
data.firstname = fname.Text; 
```

这将更容易维护和检索/插入值。

# r - 有效地将数据从 data.table 转换为矩阵（速度和内存）

> ID：12691861
> 
> 赞同：16
> 
> 时间：2012-10-02T14:06:34.337
> 
> 标签：r, matrix, data.table

我有一个 ~20,000x20,000 数据，我如何在速度和内存方面有效地将其转换`data.table()`为 a ？`matrix`

我试过`m = as.matrix(dt)`了，但需要很长时间，并出现很多警告。`df = data.frame(dt)`需要很长时间并导致达到内存限制。

有没有有效的方法来做到这一点？或者，只是 data.table 中的一个函数，它`dt`以矩阵形式返回（根据需要使用`glmnet`包输入统计模型）？

简单地包装成 as.matrix 会给我以下错误：

```
x = as.matrix(dt)

Error: cannot allocate vector of size 2.9 Gb
In addition: Warning messages:
  1: In unlist(X, recursive = FALSE, use.names = FALSE) : Reached total allocation of 8131Mb: see help(memory.size)
  2: In unlist(X, recursive = FALSE, use.names = FALSE) : Reached total allocation of 8131Mb: see help(memory.size)
  3: In unlist(X, recursive = FALSE, use.names = FALSE) : Reached total allocation of 8131Mb: see help(memory.size)
  4: In unlist(X, recursive = FALSE, use.names = FALSE) : Reached total allocation of 8131Mb: see help(memory.size) 
```

**我的操作系统：**我有 64 位 Windows7 和 8gb 内存，我的 Windows 任务管理器显示 Rgui.exe 占用了超过 4gb 的空间，但仍然很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-01-10T15:07:48.153

尝试：

```
 result <- as.matrix(tidytext::cast_sparse(dat_table,
    column_name_of_rows,
    column_name_of_columns,
    column_name_of_values)) 
```

它应该非常高效和快速。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-22T12:46:18.543

@吉布森盖伊：

> 我犯了一个错误，将字符列包含到矩阵中，这将矩阵的类提升为所有列的字符。删除此列允许制作一个整数矩阵，并且它成功转换而没有错误/警告，并且模型运行良好。

# vb.net - 无法在 MVC 3 中创建联系表单

> ID：12691864
> 
> 赞同：0
> 
> 时间：2012-10-02T14:07:02.220
> 
> 标签：vb.net, asp.net-mvc-3, razor

我正在尝试创建一个简单的联系表格。这是我的模型：

```
Imports System.Data.Entity
Imports System.ComponentModel.DataAnnotations

Public Class Contact

    Public Property Name() As String
    Public Property Title() As String
    Public Property Company() As String
    Public Property CompanyAddress() As String
    Public Property PhoneNumber() As String
    Public Property NumberOfEmployees() As String
    Public Property EmailAddress() As String
    Public Property Subject() As String
    Public Property Message() As String

End Class 
```

这是我的观点：

```
@ModelType MyBlog.Contact
@Code
    ViewData("Title") = ViewBag.Title
End Code
@Using Html.BeginForm()

    @Html.LabelFor(Function(model) model.EmailAddress)
    @Html.EditorFor(Function(model) model.EmailAddress)
    @Html.ValidationMessageFor(Function(model) model.EmailAddress)

    @<input type="submit" value="Send" />

End Using 
```

而且，这是我的控制器：

```
Function Contact() As ActionResult

    Return View("", "_FinalSubPageLayout", "")

End Function 
```

我得到的错误是：

> 传入字典的模型项是“System.String”类型的，但该字典需要一个“MyBlog.Contact”类型的模型项。

我能做些什么来解决这个错误？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:10:26.283

```
 'Return View("", "_FinalSubPageLayout", "")

  Dim myModel as New Blog.Contact
  'fill myModel

  Return View("", "_FinalSubPageLayout", myModel) 
```

我不确定首先`""`，您可能需要指定实际名称或传递 Nothing 或其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:18:22.720

您正在将`""`模型作为模型传递给需要类型模型的视图`MyBlog.Contact`。我不确定这两个`""`参数中的哪一个应该是模型，但是您需要将其作为一个实例`MyBlog.Contact`或使用不需要模型的重载。

# javascript - 使用 Aura 的骨干路由器

> ID：12691870
> 
> 赞同：5
> 
> 时间：2012-10-02T14:07:24.900
> 
> 标签：javascript, backbone.js, router, aura.js

尝试构建具有骨干光环的 Web 客户端应用程序。努力将路由器添加到应用程序。有人尝试将路由器添加到主干光环吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-02T12:14:59.493

我不了解 Backbone 路由器，但我构建了一个简单的路由器，它监听每个组件发送的每条消息并更新 URL，并监听 URL 的每一次更改并发送特定消息。作为一个扩展，我无法让它工作（因为它会在需要监听其消息的组件之前呈现——至少第一个基于初始 URL），所以我将它构建为一个组件。

# jquery - Jquery切换面板和文本链接方法

> ID：12691871
> 
> 赞同：1
> 
> 时间：2012-10-02T14:07:34.280
> 
> 标签：jquery, text, toggle

因此，我有一个正在工作的团队页面，它可以切换文本面板和文本链接以显示/隐藏。按顺序打开和关闭链接时一切正常，但是当单击链接而不先关闭每个链接时，文本链接会不同步。

它正在注册更改链接文本的点击次数，如何根据正在打开或关闭的面板进行更改。

感谢您的任何建议。

HTML：

```
<div class="people-row">
    <dl>
      <dt>
        <img src="head.jpg"/>
      </dt>
      <dd>
        <div class="block">
          <p class="person">
            First
          </p>
        </div>
        <a href="#" id="1" class="toggler">
          <span class="see">
            View
          </span>
          First
        </a>
      </dd>
    </dl>
    <dl>
      <dt>
        <img src="head.jpg"/>
      </dt>
      <dd>
        <div class="block">
          <p class="person">
            Second Person
          </p>
          <p class="title">
            My Job Title
          </p>
        </div>
        <a href="#" id="2" class="toggler">
          <span class="see">
            View
          </span>
          Second
        </a>
      </dd>
    </dl>

    <div id="1-info" class="full-bio">
      <p>
        First profile content
      </p>
    </div>
    <div id="2-info" class="full-bio">
      <p>
        Second profile content
      </p>
</div> 
```

JavaScript：

```
$(function() {
    $(".full-bio").hide();
    $(".toggler").click(function() {
        $("#" + $(this).attr("id") + "-info").slideToggle('normal').siblings('div').hide();
    });
});
$(function() {
    $(".toggler").toggle(function() {
        $(".see").html("View");
        $('.see', this).html("Hide");
    }, function() {
        $(".see").html("View");
        $('.see', this).html("View");
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:15:14.013

也许不是最优雅的解决方案，但它有效....

```
$(function() {
    $(".full-bio").hide();
    $(".toggler").click(function() {
        $("#" + $(this).attr("id") + "-info")
            .slideToggle('normal')
            .siblings('div')
            .hide();

        $('.see').not($('.see', this)).html("View");

        if ($('.see', this).html() === "Hide")
            $('.see', this).html("View");
        else
            $('.see', this).html("Hide");
    })        
}); 
```

查看[http://jsfiddle.net/7ZL5C/](http://jsfiddle.net/7ZL5C/)

# html - CSS“#id 元素”是否也选择孙子？

> ID：12691873
> 
> 赞同：11
> 
> 时间：2012-10-02T14:07:36.653
> 
> 标签：html, css, css-selectors

假设我有一个`<div id="container">`里面有各种元素，包括表格。CSS 选择器是否`#container table`选择了 div 中的所有表（包括孙子、曾孙等）？还是只选择孩子？

另外，如果我想选择容器 div 中的第一个子 div，我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T14:08:44.810

是的; 简而言之，即选择`table`内的所有元素`#container`，而不管嵌套级别如何。

该空间称为[后代组合子](http://www.w3.org/TR/selectors/#descendant-combinators)。正如它在锡上所说的那样，它选择任何后代。这包括孩子、孙子等等，无论嵌套级别如何。它不仅选择孩子；该目的由[子组合`>`](http://www.w3.org/TR/selectors/#child-combinators)器服务。¹

要将容器中的第一个子项选择为`div`，请使用

```
#container > div:first-child 
```

或者如果你有别的东西作为第一个孩子并且你想选择第一个类型的孩子`div`，你使用

```
#container > div:first-of-type 
```

* * *

¹ [为此，人们常说只选择“直系子女”，而人们说“子女”的地方通常指的是“后代”。但是，严格来说，“children”是指直接嵌套级别。没有所谓的“间接孩子”。]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T14:09:17.447

```
#container table 
```

选择所有表的后代。

```
#container > table 
```

选择所有表格的孩子。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T14:14:45.353

`#container table`将选择`table`元素内部的所有`#container`元素，无论它们在 DOM 树中有多深。如果你只想定位第一级元素，你会使用这个：`#container > table`

要选择容器元素中的第一个子 div，您需要执行以下操作：`#container > div:first-child`- 这将只选择第一级子 div。或者，如果您想定位容器中的所有第一个 div 元素，您可以使用`#container div:first-child`

这仅在`div`实际是该元素的第一个子元素时才有效

```
<div id="container">
    <div>some content</div>
</div> 
```

因此，例如，`p`它之前不能有任何标签（或任何其他标签）。

```
<div id="container">
    <p>Some text</p>
    <div>some content</div>
</div> 
```

如果`div`不是第一个孩子，您需要执行以下操作：`#container div:first-of-type`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T14:12:49.933

> 另外，如果我想选择容器 div 中的第一个子 div，我该怎么做？

```
#container > div{} 
```

# java - XML 解组期间的 NullPointerException

> ID：12691875
> 
> 赞同：3
> 
> 时间：2012-10-02T14:07:39.240
> 
> 标签：java, jaxb

我从在同一个项目中为我工作的相同 xml 开发了以下 xml。但是当我试图解组这些时，我得到了 NullPointerException。

我将我所有的 java 类与我正在解组的 xml 一起放置。

请帮忙

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<dbSchema>
    <table tableName="table1">
        <column columnName="column1">
            <dataType>varchar</dataType>
            <isNullAllowed>true</isNullAllowed>
            <defaultValue></defaultValue>
            <isPrimaryKey>true</isPrimaryKey>
        </column>

        <column columnName="column2">
            <dataType>timestamp</dataType>
            <isNullAllowed>true</isNullAllowed>
            <defaultValue></defaultValue>
        </column>

        <column columnName="column3">
            <dataType>varchar</dataType>
            <isNullAllowed>true</isNullAllowed>
            <defaultValue></defaultValue>
        </column>

        <column columnName="column4">
            <dataType>decimal</dataType>
            <isNullAllowed>true</isNullAllowed>
            <defaultValue></defaultValue>
        </column>

        <column columnName="column5">
            <dataType>integer</dataType>
            <isNullAllowed>true</isNullAllowed>
            <defaultValue></defaultValue>
        </column>

        <column columnName="column6">
            <dataType>varchar2</dataType>
            <isNullAllowed>false</isNullAllowed>
            <defaultValue></defaultValue>
        </column>

        <column columnName="column7">
            <dataType>date</dataType>
            <isNullAllowed>true</isNullAllowed>
            <defaultValue></defaultValue>
        </column>

        <column columnName="column8">
            <dataType>decimal</dataType>
            <isNullAllowed>false</isNullAllowed>
            <defaultValue></defaultValue>
        </column>
    </table>
    <table tableName="table2">
        <column columnName="column1">
            <dataType>varchar</dataType>
            <isNullAllowed>true</isNullAllowed>
            <defaultValue></defaultValue>
            <isPrimaryKey>true</isPrimaryKey>
        </column>

        <column columnName="column2">
            <dataType>timestamp</dataType>
            <isNullAllowed>true</isNullAllowed>
            <defaultValue></defaultValue>
        </column>

        <column columnName="column3">
            <dataType>varchar</dataType>
            <isNullAllowed>true</isNullAllowed>
            <defaultValue></defaultValue>
        </column>

        <column columnName="column4">
            <dataType>decimal</dataType>
            <isNullAllowed>true</isNullAllowed>
            <defaultValue></defaultValue>
        </column>

        <column columnName="column5">
            <dataType>integer</dataType>
            <isNullAllowed>true</isNullAllowed>
            <defaultValue></defaultValue>
        </column>

        <column columnName="column6">
            <dataType>varchar2</dataType>
            <isNullAllowed>false</isNullAllowed>
            <defaultValue></defaultValue>
        </column>

        <column columnName="column7">
            <dataType>date</dataType>
            <isNullAllowed>true</isNullAllowed>
            <defaultValue></defaultValue>
        </column>

        <column columnName="column8">
            <dataType>decimal</dataType>
            <isNullAllowed>false</isNullAllowed>
            <defaultValue></defaultValue>
        </column>
    </table>
</dbSchema>

@XmlRootElement(name="dbSchema")
public class DBSchema {

    private Vector<Table> tableList;

    /**
     * @return the tableList
     */
    public Vector<Table> getTableList() {
        return tableList;
    }

    /**
     * @param tableList the tableList to set
     */
    //XmLElementWrapper generates a wrapper element around XML representation
    //@XmlElementWrapper(name = "tableList") 
    //XmlElement sets the name of the entities
    @XmlElement(name = "table")
    public void setTabelList(Vector<Table> tableList) {
        this.tableList = tableList;
    }
}

@XmlRootElement(name = "table")
public class Table {

    private String tableName;

    private Vector<Column> columnList;

    public Table() {
        // TODO Auto-generated constructor stub
    }

    /**
     * @return the tableName
     */
    public String getTableName() {
        return tableName;
    }

    /**
     * @param pageId the pageId to set
     */
    @XmlAttribute(name="tableName")
    public void setTableName(String tableName) {
        this.tableName = tableName;
    }

    /**
     * @return the columnList
     */
    public Vector<Column> getColumnList() {
        return columnList;
    }

    /**
     * @param columnList the columnList to set
     */
    //XmLElementWrapper generates a wrapper element around XML representation
    //@XmlElementWrapper(name = "columnList") 
    //XmlElement sets the name of the entities
    @XmlElement(name = "column")
    public void setColumnList(Vector<Column> columnList) {
        this.columnList = columnList;
    }

}

@XmlRootElement(name = "column")
public class Column {

    private String columnName = "";

    private String dataType = "";

    private boolean isNullAllowed = false;

    private boolean isPrimaryKey = false;

    private String defaultValue = "";

    public Column() {
        // TODO Auto-generated constructor stub
    }

    /**
     * @return the columnName
     */
    public String getColumnName() {
        return columnName;
    }

    /**
     * @param columnName the columnName to set
     */
    @XmlAttribute
    public void setColumnName(String columnName) {
        this.columnName = columnName;
    }

    /**
     * @return the dataType
     */
    public String getDataType() {
        return dataType;
    }

    /**
     * @param dataType the dataType to set
     */
    @XmlElement
    public void setDataType(String dataType) {
        this.dataType = dataType;
    }

    /**
     * @return the isNullAllowed
     */
    public boolean isNullAllowed() {
        return isNullAllowed;
    }

    /**
     * @param isNullAllowed the isNullAllowed to set
     */
    @XmlElement
    public void setIsNullAllowed(boolean isNullAllowed) {
        this.isNullAllowed = isNullAllowed;
    }

    /**
     * @return the isPrimaryKey
     */
    public boolean isPrimaryKey() {
        return isPrimaryKey;
    }

    /**
     * @param isPrimaryKey the isPrimaryKey to set
     */
    @XmlElement
    public void setIsPrimaryKey(boolean isPrimaryKey) {
        this.isPrimaryKey = isPrimaryKey;
    }

    /**
     * @return the defaultValue
     */
    public String getDefaultValue() {
        return defaultValue;
    }

    /**
     * @param defaultValue the defaultValue to set
     */
    @XmlElement
    public void setDefaultValue(String defaultValue) {
        this.defaultValue = defaultValue;
    }

}

Exception in thread "main" java.lang.NullPointerException
    at com.sun.xml.internal.bind.v2.runtime.reflect.Lister$CollectionLister.addToPack(Lister.java:290)
    at com.sun.xml.internal.bind.v2.runtime.reflect.Lister$CollectionLister.addToPack(Lister.java:254)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.Scope.add(Scope.java:106)
    at com.sun.xml.internal.bind.v2.runtime.property.ArrayERProperty$ReceiverImpl.receive(ArrayERProperty.java:195)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.endElement(UnmarshallingContext.java:524)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.SAXConnector.endElement(SAXConnector.java:143)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:601)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1782)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2939)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1205)
    at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:522)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:200)
    at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:173)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:137)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:142)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:151)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:169)
    at com.misys.importexportdata.helpers.SQLHandler.readDBDefinition(SQLHandler.java:99)
    at com.misys.importexportdata.helpers.SQLHandler.main(SQLHandler.java:29)

    private void readDBDefinition() {
        List<String> schemaList = FileHandler.getDirectoryContent(DefinedConstants.DB_DEFINITION_LOCATION);
        for (int i = 0; i < schemaList.size(); i++ ) {
            DBSchema schemaDetails = null;
            String schemaName = schemaList.get(i) ;
            if(schemaName.endsWith(".xml")) {
                try {
                    JAXBContext context = JAXBContext.newInstance(DBSchema.class);
                    Unmarshaller unMarshaller = context.createUnmarshaller();
                    File dbDefinitionFile = new File(DefinedConstants.DB_DEFINITION_LOCATION + schemaName);
                    schemaDetails = (DBSchema) unMarshaller.unmarshal(dbDefinitionFile);
                } catch (JAXBException e) {
                    e.printStackTrace();
                }
            }
            tableMap.put(schemaName, schemaDetails.getTableList()); 
        }
    } 
```

我得到的 Stacktrace 是这样结束的：

```
java.lang.NullPointerException
    at com.sun.xml.bind.v2.runtime.reflect.Lister$CollectionLister.addToPack(Lister.java:305)
    at com.sun.xml.bind.v2.runtime.reflect.Lister$CollectionLister.addToPack(Lister.java:269)
    at com.sun.xml.bind.v2.runtime.unmarshaller.Scope.add(Scope.java:121)
    at com.sun.xml.bind.v2.runtime.property.ArrayERProperty$ReceiverImpl.receive(ArrayERProperty.java:213)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallingContext.endElement(UnmarshallingContext.java:538)
    at com.sun.xml.bind.v2.runtime.unmarshaller.ValidatingUnmarshaller.endElement(ValidatingUnmarshaller.java:107)
    at com.sun.xml.bind.v2.runtime.unmarshaller.SAXConnector.endElement(SAXConnector.java:158)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:609)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1782)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2973)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:606)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:117)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:510)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:848)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:777)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)
    at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1213)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:258)
    at com.sun.xml.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:229)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:140)
    at javax.xml.bind.helpers.AbstractUnmarshallerImpl.unmarshal(AbstractUnmarshallerImpl.java:123)
    at org.springframework.oxm.jaxb.Jaxb2Marshaller.unmarshal(Jaxb2Marshaller.java:754)
    at org.springframework.oxm.jaxb.Jaxb2Marshaller.unmarshal(Jaxb2Marshaller.java:735) 
```

**更新 1：** SQLHandler 是具有 main 方法的 java 类。

**更新2：**伙计们，我发现了问题。这个问题非常愚蠢。我把注释拼错了。这导致了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:11:11.523

通常 JAXB 将调用`get`一个`Collection`属性，然后调用`add`它。尝试先初始化您的集合（`tableList`和`columnList`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T10:03:58.117

问题的答案在于[官方 JAXB 论坛](https://java.net/projects/jaxb/lists/users/archive/2011-05/message/52)的这句话：

> JAXB unmarshaller 不期望 List 类型的属性的 setter；它只会使用 x.getSomeList().add( y ) 添加另一个孩子。请参阅此示例以了解编写列表 getter 的典型方式（这样做有几个很好的理由）。

重要的不是你是否初始化你的集合，而是你的集合的**getter 方法不返回 null**：

```
public class ListsType {

    protected List<Integer> numbers;

    public List<Integer> getNumbers() {
        if (numbers == null) {
            numbers = new ArrayList<Integer>();
        }
        return this.numbers;
    }
} 
```

有关完整示例，请单击[此处](https://jaxb.java.net/tutorial/section_2_2_7-Defining-a-List-of-Integers.html#Defining%20a%20List%20of%20Integers)。

# iphone - 更改 UINavigationBar 的颜色

> ID：12691876
> 
> 赞同：0
> 
> 时间：2012-10-02T14:07:44.167
> 
> 标签：iphone, ios, uinavigationbar, uicolor

你好，

我创建了`UINavigationBar`，我尝试将颜色条更改为浅绿色（如在 Nib 文件中）

我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-20T11:40:51.643

```
[[UINavigationBar appearance] setTintColor:[UIColor colorWithRed:0 green:.62 blue:.984 alpha:1]]; 
```

伙计，试试这个来完成`[UIColor Aqua]`你的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:19:13.650

您可以设置`tintColor`或`backgroundImage`设置您的`UINavigationBar`

```
- (void) viewDidLoad
{
   //set background image
   [self.navigationController.navigationBar setBackgroundImage:[UIImage imageNamed:@"background.png"]];

  //OR set background Color
  [self.navigationController.navigationBar setTintColor:[UIColor blueColor]];
} 
```

我不确定，但如果你把它放在你的应用程序的第一个调用方法中，它可能适用于任何地方！

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions { } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T12:03:25.680

尝试这个，

```
UINavigationController *navigationController;
UIColor* aqua = [UIColor colorWithRed:0 green:1 blue:1 alpha:1];
navigationController.navigationBar.tintColor = [UIColor aqua]; 
```

问候

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T14:13:47.413

```
UINavigationBar *bar = [self.navigationController navigationBar];
[bar setTintColor:[UIColor colorWithRed:0.5 green:0.5 blue:0.5 alpha:1.0]]; 
```

请尝试上面的代码设置颜色。

**已编辑**

```
 UINavigationBar *bar = [self.navigationController navigationBar];
UIColor* aqua = [UIColor colorWithRed:0 green:1 blue:1 alpha:1];
[bar setTintColor:aqua]; 
```

此代码用于浅绿色

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-02T14:12:42.250

```
[self.navigationController.navigationBar setTintColor:[UIColor blueColor]]; 
```

在 ViewController 出现之前调用此函数，例如在`viewDidLoad:`

# php - 墙贴和评论

> ID：12691878
> 
> 赞同：0
> 
> 时间：2012-10-02T14:07:49.070
> 
> 标签：php, mysql, comments

我为社交网站上的所有评论制作了一张表格：comment

另外，我有一张表用于分配给一条评论的所有评论：comment_assign

因此，我构建了一个函数 comment() 以便在每个部分类型（图像、用户页面、组等）中轻松实现它。在 $_GET['s']==user 的情况下，我希望有墙贴以及对这些墙贴的评论。全部存储在“评论”中。

我有这个方案来显示这个： 1\. 用于获取评论的 sql 查询 2\. html 输出 3\. 此 html 输出中的另一个 sql 查询以获取评论的指定分配评论（在本例中为墙贴）

现在的问题是我的第一个查询显示了所有评论。还有应该是子评论的评论。所以我的问题是，如果有任何方法可以在第一个查询中指定，当我得到所有评论时，说：如果这个comment_id 可用，请查看comment_assign。如果是，请不要显示此评论，因为它是子评论（我将在提到的步骤 3 中显示）。

也许整个结构可能会改变？我将不胜感激任何建议。甚至难以实现，但这将是最有效的。

* * *

表结构：

**评论**

id、uid、nid、站点、文本、日期

**评论分配**

comment_id，assign_id

* * *

第一个 SQL 查询示例，它不能避免显示所有评论（也分配的评论）。见最后一行：

```
SELECT *    
FROM `comments` AS c
LEFT JOIN `comment_assign` AS ca ON ca.`comment_id` = c.`id` 
LEFT JOIN `users` AS u ON c.`uid` = u.`id` 

WHERE c.`nid`='".$nid."' 
AND c.`site`='".$_GET['s']."' 
AND ca.`comment_id` != c.`id` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:23:39.297

如果我理解正确，您可以从**评论**表中选择所有评论。然后您要检查comment.id 是否存在于comment_assign.comment_id 中。如果存在，则为子注释。那是对的吗？

您可以通过两种方式做到这一点 - 干净的方法是在**评论**表中添加另一个字段并将 assign_id 放在那里，因为每个评论只能与另一个评论相关联，或者是顶级评论（*assign_id 为 NULL*）。

或者，您可以 LEFT JOIN 两个表。assign_id 为 NULL 的每一行都是墙评论，它有值的每一行都意味着它被分配为子评论。IE

```
SELECT id, uid, site, text, date
FROM comment
LEFT JOIN comment_assign ON (comment.id = comment_assign.comment_id)
WHERE comment_assign.assign_id IS NULL; 
```

# c# - get 访问器返回一个新实例是不好的做法吗？

> ID：12691880
> 
> 赞同：0
> 
> 时间：2012-10-02T14:07:55.107
> 
> 标签：c#

从访问器返回新实例是否存在问题？如果是这样，有没有更好的方法？

```
public class Person
{
    private RecIpDet _ipDet;
    public RecIpDet IpDet
    {
        get 
        {                 
            if(_ipDet == null)
                _ipDet = new RecIpDet();
            return _ipDet; 
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:09:42.937

存在问题，因为您从未设置字段，因此每次调用该属性时都会返回一个新对象。

你应该设置`_ipDet`它是否为空，然后返回它。这称为[延迟实例化或延迟初始化](http://en.wikipedia.org/wiki/Lazy_initialization)。

```
public class Person
{
    private RecIpDet _ipDet;

    public RecIpDet IpDet
    {
        get 
        {                 
            if (_ipDet == null)
            {
                _ipDet = new RecIpDet();
            }

            return _ipDet; 
        }
    } 
} 
```

请记住，这不是线程安全的，所以如果这对您来说是一个因素，您将需要一个更强大的机制。对于单线程应用程序，这种惰性实例化方法很好。

如果您使用的是 .NET 4.0 或更高版本，则可以使用[`Lazy<T>`](http://msdn.microsoft.com/en-us/library/dd642331.aspx)我认为是线程安全的类：

```
public class Person
{
    private Lazy<RecIpDet> _ipDet = new Lazy<RecIpDet>(() => new RecIpDet());

    public RecIpDet IpDet
    {
        get 
        {                 
            return _ipDet.Value; 
        }
    } 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T14:12:46.187

对我们来说，通常的做法是使用：

```
get
{
    return _ipDet ?? (_ipDet = new RecIpDet());
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T14:09:55.287

根据您的评论，您似乎确实打算设置实例，所以这是一个很好的延迟实例化的经典示例（尽管不是线程安全的）。如果您不需要担心线程安全，那么无论如何这将起作用：

```
get
{
    if (_ipDet == null)
        _ipDet = new RecIpDet();

    return _ipDet
} 
```

但是，如果您使用的是 .NET 4.0，我建议您`Lazy<T>`不要构建自己的惰性构造：

```
public class Person
{
    private Lazy<RecIpDet> _ipDet = new Lazy<RecIpDet>();

    public RecIpDet IpDet
    {
        get { return _ipDet.Value; }
    } 
} 
```

Lazy 的 Value 在第一次调用时调用该类型的构造函数，并且是线程安全的（您可以选择不同的）线程安全级别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T14:12:29.037

到目前为止，您将始终返回一个新对象。除非以某种方式 _ipDet 被设置为一个值。这使您的代码表现得非常不可预测。要么实现单例模式并替换 return new RecIpDet(); with _ipDet = new RecIpDet(); 或者让它总是返回一个新对象，这很好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T14:19:22.490

使用**Lazy Instantiation**是很不寻常的，大多数时候它是用于**Singleton**模式，在这里你可以找到更多信息：

[实现单例模式](http://msdn.microsoft.com/en-us/library/ff650316.aspx)

在此页面中，您甚至可以找到一种使其成为线程安全的方法。

它对于可以从应用程序中的任何位置访问的全局对象非常有用。

# c - 如何发送和接收数据套接字 TCP (C/C++)

> ID：12691882
> 
> 赞同：3
> 
> 时间：2012-10-02T14:07:57.223
> 
> 标签：c, sockets, tcp

> **可能重复：**
> [从 C/C++ 中的 TCP 套接字读取的正确方法是什么？](https://stackoverflow.com/questions/666601/what-is-the-correct-way-of-reading-from-a-tcp-socket-in-c-c)

我正在尝试开发一个 TCP 客户端/服务器。我的问题是，当我尝试从客户端发送数据时，我会一次性发送。

但是当我尝试接收具有特定结构的数据时出现了我的问题，我的意思是，前 8 个字节设置一个日期，接下来的 10 个字节设置一个名称，未定义的字节数设置一个文本（此文本以 /r/n 结尾/r/n)

客户端发送如下：

```
char date[8];
char name[10];
char msg[4096];

strcpy(msg,"12/10/12"); //8 bytes
strcat(msg,"Kevin Fire"); //10 bytes
strcat(msg,"abcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcdeabcde\r\n\r\n");

nbytes_sent = send(sock,(char *)msg,sizeof(msg),0);
printf("Bytes_sent: %s -> %i\n",msg,nbytes_sent); 
```

服务器尝试解析来自套接字的数据，如下所示：

```
char date[8];
char name[10];
char * text;
char buf[1024];

int i=0;
for(i=0; i < 8; i++)
    date[i] = '\0';
for(i=0; i < 10; i++)
    name[i] = '\0';

nbytes_read=recv(sclient,(char *)date,sizeof(date),0);
if(nbytes_read > 0){
    printf("Date: %s (%i)\n",date,nbytes_read);
    //cout.flush();
    nbytes_read=recv(sclient,(char *)name,sizeof(name),0);
    if(nbytes_read > 0){
        printf("Name: %s (%i)\n",name,nbytes_read);
        //cout.flush();
        nbytes_read=recv(sclient,(char *)buf,sizeof(buf),0);
        strcpy(text,buf);
        while(nbytes_read > 0){
            nbytes_read=recv(sclient(char*)buf,sizeof(buf),0);
            strcat(text,buf);
        }
    }
}

printf("Date: %s. Name: %s. Text: %s\n",date,name,text); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T18:35:54.647

这是一个简单的“接收所有”功能：

```
int recv_all(int sockfd, void *buf, size_t len, int flags)
{
    size_t toread = len;
    char  *bufptr = (char*) buf;

    while (toread > 0)
    {
        ssize_t rsz = recv(sockfd, bufptr, toread, flags);
        if (rsz <= 0)
            return rsz;  /* Error or other end closed cnnection */

        toread -= rsz;  /* Read less next time */
        bufptr += rsz;  /* Next buffer position to read into */
    }

    return len;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:19:22.137

添加到@hmjd 的查找：

在 var decls 声明的是您的文本指针...

```
char * text; 
```

然后后来...

```
strcpy(text,buf);
while(nbytes_read > 0){
   nbytes_read=recv(sclient(char*)buf,sizeof(buf),0);
   strcat(text,buf);
} 
```

也许尝试将“文本”指针设置为随机堆栈值旁边的东西也会有所帮助。

继续弹幕，尽管以下不一定会爆炸，但您的`date`变量为：

```
char date[8]; 
```

在客户端和服务器端根本不使用客户端变量。但是，服务器变量是：

```
nbytes_read=recv(sclient,(char *)date,sizeof(date),0);
if(nbytes_read > 0){ 
```

问题是，您发送的日期实际上已经是 8 个字符宽：“12/10/12”。因此，即使您在字符串末尾确定了一个空终止符，无论如何都应该这样做（良好做法）：

```
date[ sizeof(date)/sizeof(date[0])-1 ] = 0; 
```

您将截断日期的最后一个字符。

这还有其他问题；我们只指出了一些。考虑使用数组中的每个数据值发送长度前缀，并使用检查或范围来确保您获得预期的结果。

最后，在调试器的业务端花一些时间可能会做得很好，尤其是在服务器端。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:12:15.113

一个（重复的）错误是：

```
nbytes_read=recv(sclient,(char *)date,sizeof(date),0); 
```

`recv()`不为空终止。这意味着如果读取字节，则`date`不会有空终止符。`sizeof(date)`当非空终止字符串作为参数传递给`printf()`with`"%s"`格式说明符时，这是一个问题。如果字符串是非空终止的，您可能会看到在实际字符串数据之后出现垃圾字符。您需要读取比目标缓冲区少一并且空终止或使用`"%*.s"`不需要空终止的格式说明符：

```
printf("%.*s", n, s); /* Prints first 'n' bytes from 's'. */ 
```

* * *

请注意，您可以将 a 初始化`char[]`为所有空值，而不是使用 a `for`：

```
char date[8] = ""; 
```

或者你可以使用`memset()`.

# servicebus - 拓扑说明

> ID：12691886
> 
> 赞同：2
> 
> 时间：2012-10-02T14:08:16.510
> 
> 标签：servicebus, rebus

我知道 Rebus 完全有能力将消息从 A 点传输到 B 点（使用 MSMQ 作为传输层）。为了让事情变得非常清楚，Rebus 是否也能够进行一对多的消息传递，即从 A 点发送的消息应该在 B 点和 C 点都结束？

如果有可能，它是如何做到的？我看不到任何集中的分发站点（邮局），所以我假设通信将包括从每个端点到每个其他端点的通道（因此在一个进程必须与其他 5 个端点通信的网络中，有将有 5 个通道辐射出此过程）。你能证实这个假设吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:29:01.337

是的，Rebus 确实能够向几乎任意数量的订阅者发布消息。确实，MSMQ（至少在其最基本的操作模式下）是一个简单的点对点通道，这就是为什么在顶部有一个层来实现真正的发布/订阅。

它的工作方式是，每个*订阅者*都有一个指向发布者的端点映射，然后每个订阅者去

```
bus.Subsribe<SomethingInterestingHappened>(); 
```

这会导致向发布者发送内部`SubscriptionMessage`消息。然后发布者必须记住谁订阅了每个给定的消息类型，通常通过将此信息存储在 SQL Server 中。所有这些都是自动发生的，它只需要您配置某种订阅存储。

然后，当需要发布某些东西时，发布者会去

```
bus.Publish(new SomethingInterestingHappened { ... }); 
```

这将使 Rebus 查找给定消息类型的所有订阅者。这可能是0、1或更多，然后事件将被发送到每个订阅者的输入队列。

[您可以在有关路由](https://github.com/mookid8000/Rebus/wiki/Routing)的页面上的 Rebus 文档中阅读有关这些内容的更多信息。

为了给你一个关于如何配置订阅者和发布者的提示，看看这个 - 这是一个订阅者：

```
Configure.With(...)
    .Transport(t => t.UseMsmq....)
    .MessageOwnership(t => t.FromRebusConfigurationSection())
    (...) 
```

它还有一个端点映射，将一堆事件映射到特定的发布者：

```
<endpoints>
    <add messages="SomePublisher.Messages" endpoint="publisher_input_queue" />
</endpoint> 
```

然后发布者可能如下所示：

```
Configure.With(...)
    .Transport(t => t.UseMsmq....)
    .Subscriptions(s => s.StoreInSqlServer(theConnectionString, "subscriptions")
                         .EnsureTableIsCreated())
    (...) 
```

# php - file_put_contents 只输出一个文件？

> ID：12691894
> 
> 赞同：0
> 
> 时间：2012-10-02T14:08:28.787
> 
> 标签：php

每周整理一些数据，我序列化了一个适当数据的数组，并使用 file_put_contents 将其输出到一个临时文件。

包括一些输出语句来尝试确定正在发生的事情，代码如下所示：

```
 echo "<br/> collate session data <br/>";
    print_r($this->session_Data);
    $serialized_Array = serialize($this->session_Data);
    $file_Name =  'session_Data_' . $this->week_Number;
    echo "file_Name: " . $file_Name; 
    file_put_contents($file_Name, $serialized_Array); 
```

文件名肯定会得到适当的更新，并且肯定有要输出的数据。

但这只会将前几周的数据输出到 tmp 文件。

我没有权限错误我得到状态 200 OK 但没有创建文件。

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:12:50.213

您正在将文件写入与脚本相同的目录中。在默认配置中，网络服务器进程仅对该目录具有读取和执行权限。

*   为文件创建一个单独的目录，并授予网络服务器进程对该文件夹的写入权限。
*   授予网络服务器进程对脚本所在文件夹的写入权限。请注意，这可能是一个安全问题。

# ruby - 添加 self 关键字有什么不同？

> ID：12691897
> 
> 赞同：1
> 
> 时间：2012-10-02T14:08:36.967
> 
> 标签：ruby, self

当我开始学习 Ruby 时，我是从 Michael Hartl 的优秀[Rails 教程](http://ruby.railstutorial.org/)开始的。我刚刚重新访问了本教程，并注意到示例应用程序代码的部分内容已被修改。在身份验证章节中，更改了两种方法：

```
# SessionsHelper
def sign_in(user)
  ...
  self.current_user = user
end

def sign_out
  self.current_user = nil
  ...
end 
```

以前，关键字`self`被省略。但该应用程序有效。所以，如果它没有坏，为什么要修复它？增加了什么价值`self`，为什么要使用它？

我知道`self`定义类方法而不是实例方法。在模型中， using`self`允许我们直接引用对象的属性。但我不能把这些点打成平手，看看它是如何在助手中使用的。我以前在控制器中看到过它，但我不明白我们为什么要在那里使用它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:11:57.397

**[编辑]**

本教程的原始部分很可能是完全错误的。省略“self”接收器会导致方法将值分配给方法局部变量“current_user”，而不会产生其他影响。

我在下面的原始答案是不正确的，应该被忽略（因为`foo=(x)`没有接收器就不能调用编写器方法，其他方法也可以）。

**[以下不正确的原始答案]**

~~使用“自我”接收器的原因可能是为了清楚起见。~~

~~如果省略“self”，那么对于未经训练的人来说，看起来您只是将“user”变量分配给一个名为“current_user”的新变量，而没有其他效果。有经验的 Ruby 专家知道，如果在对象实例上有一个名为“current_user”的方法，那么它将被调用，而不是仅仅创建和分配一个新变量，但是这个细节很容易被忽略，特别是如果该方法是继承的或没有在当前的类定义部分。~~

~~通过显式使用“self”关键字，您清楚地表明您正在调用此对象实例的方法。~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:36:38.073

```
class User
  attr_accessor :current_user

  def sign_in_1
    # Assigning local variable here
    current_user = "Foo"
  end

  def sign_in_2
    # Calling accessor method
    self.current_user = "Bar"
  end
end

u = User.new
u.sign_in_1
p u.current_user #=> nil
u.sign_in_2
p u.current_user #=> "Bar" 
```

# drupal - 如何在我想要的drupal 7中更改添加到博客的字段

> ID：12691909
> 
> 赞同：0
> 
> 时间：2012-10-02T14:09:11.400
> 
> 标签：drupal, drupal-7, drupal-theming

我正在使用 drupal 7 开发一个网站。我使用博客模块，它是 drupal 7 中的核心模块。在博客文章中，我不仅添加了文本，还添加了幻灯片到博客。当我尝试安排博客内容时，问题就来了。

我想在左侧的幻灯片放映后显示一些短信。通常，在 drupal 中，它们先渲染文本，然后再进行幻灯片放映（默认）。但我想像上面提到的那样改变它。

是否有任何模块可以处理这个问题，或者我可以用另一种方式来做吗？

提前致谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T22:31:02.727

尝试使用[DS](http://drupal.org/project/ds)自定义节点布局

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:30:18.093

为您提供最大的自定义灵活性的方法是实际编辑模板文件本身并将各个字段的输出准确地放置在 HTML 中您想要的位置。

查看有关[覆盖和编辑主题文件](http://drupal.org/node/1089656)的文档，以及有关如何将[单个字段呈现到模板文件](http://www.computerminds.co.uk/articles/rendering-drupal-7-fields-right-way)中的这篇文章。

# character-encoding - 使用 ISO-8859-1 的 IMAP 搜索字符集

> ID：12691913
> 
> 赞同：2
> 
> 时间：2012-10-02T14:09:34.060
> 
> 标签：character-encoding, imap, iso-8859-1, thunderbird

我无法理解使用命令**IMAP SEARCH CHARSET**在 IMAP 服务器上搜索时使用**Tunderbird的编码方法是什么**

 **我试图搜索俄语单词“привет”，这被映射到“？@825B”，即

```
A001 SEARCH CHARSET ISO-8859-1 BODY "?@825B" 
```

这是怎么发生的？我确信这是正确的，因为我已经使用嗅探器来捕获它，并且**Dovecot**服务器正确地找到了带有“привет”字样的邮件。ISO-8859-1 编码根本没有俄语字形！那么它是如何转换的呢？

例如，**“привет”**（写成 Unicode 字符）给出**“??????”** 对于我的机器上的**ISO-8859-1**编码或这里[http://www.motobit.com/util/charset-codepage-conversion.asp](http://www.motobit.com/util/charset-codepage-conversion.asp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-09-21T11:37:12.133

Thunderbird 获取此值的方式是将（16 位？）Unicode 字符向下转换为一个字节。

例如，在 C#（其 char 和 string 类型在内部使用 UTF-16）中，这将得到您所看到的结果：

```
const string text = "привет";

var buffer = new char[text.Length];
for (int i = 0; i < text.Length; i++)
    buffer[i] = (char) ((byte) text[i]);

var result = new string (buffer); 
```

Thunderbird 如何处理代理对是任何人根据问题已知的猜测。它可能会将代理对视为 2 个单独的字符（就像我上面的代码一样），或者它可能会将它们组合成一个 32 位 unicode 字符并将其向下转换为一个字节。**

# javascript - gRaphael - 动画折线图失败

> ID：12691918
> 
> 赞同：4
> 
> 时间：2012-10-02T14:09:44.480
> 
> 标签：javascript, jquery, raphael, conflict, graphael

我遇到了 gRaphael javascript 折线图库的问题。

我正在从一个包含五列（分钟数、时间、等待时间、治疗中、关闭、位置）的 CSV 文件构建折线图。

以前我已经能够在没有动画的情况下绘制完整的图表。它正确地具有所有四行等。

现在我的代码在动画功能上失败了。这是错误：

> 未捕获的类型错误：对象 # 没有方法“动画”

我认为 jQuery 在某种程度上弄乱了动画功能，并试图控制它。

```
 function animateChart(newX, newW, newInT, newC, newInL){
            var chart2 = paper.linechart(
                20, 20, // padding
                newX.length, 400, // dimensions
                newX, [newW, newInT, newC, newInL] // values
            );

            for (i = 0; i < chart.lines.length; i++){
                elem = chart.lines[i][0];
                elem.animate({ path: chart2.lines[i][0].getAttribute("d") }, 200);
            }

            chart2.remove();
        } 
```

完整代码：

[http://pastebin.com/YmvkrmQ3](http://pastebin.com/YmvkrmQ3)

我按顺序加载了以下库：

1.  raphael-min.js
2.  g.raphael-min.js
3.  g.line.min.js
4.  jQuery.js

提前感谢您的帮助。

**更新：** 问题出在动画方法中。即使我在路径元素上调用该方法，我也会收到错误消息。我仍然不知道为什么 Raphael 不将路径元素识别为路径元素。

我尝试禁用 jQuery（并用香草 javascript 替换它的 ajax 函数），但它没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T08:07:02.260

您可能有一个 SVG 路径元素，而不是一个 Raphael 路径元素。应该是`[0]`结尾吧`elem = chart.lines[i][0];`。

# java - Listactivity黑屏带标题

> ID：12691920
> 
> 赞同：2
> 
> 时间：2012-10-02T14:09:49.407
> 
> 标签：java, android, listactivity

我的 ListActivity 由很多行组成，每件事都运行良好，当第一次运行 App 时，它会在显示 listactivity 屏幕之前显示黑屏（1 秒），在左上角的这个黑屏中，它出现了我们的应用程序的标题名称在开始创建新的 Eclipse 项目时设置它，如下图所示：

![在此处输入图像描述](../Images/bec5821af9dd5695a08bcc45b9ef544c.png)

如果您对如何删除有任何建议，请：

**在显示列表活动屏幕及其标题之前出现（1 秒）的黑屏。**

我知道这个标题也是应用程序的名称，它出现在我想要的设备的应用程序图标中

**删除带有标题的黑屏**，

因此，当午餐应用程序时，它直接显示 listactivity 屏幕，如下所示：

![在此处输入图像描述](../Images/5669ee1c47eb1af5a7c90353050b477c.png)

列表活动代码：

```
 public class Menu extends ListActivity {

  String classes[] = { "First Item", "Second Item", "Third Item", "Fourth
      Item", "Fifth Item"};

  @Override
 protected void onCreate(Bundle savedInstanceState) {
 // TODO Auto-generated method stub
   super.onCreate(savedInstanceState);

 requestWindowFeature(Window.FEATURE_NO_TITLE);
   getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, 
    WindowManager.LayoutParams.FLAG_FULLSCREEN);
    ListView lv = getListView();   
    lv.setCacheColorHint(0);  
    lv.setBackgroundResource(R.drawable.fall);
 setListAdapter(new ArrayAdapter<String>(Menu.this,
    android.R.layout.simple_list_item_1, classes));

                   }
  @Override
   protected void onListItemClick(ListView l, View v, int position, long id) {
     // TODO Auto-generated method stub

     super.onListItemClick(l, v, position, id);
     String cheese = classes[position];

   try {
   Class ourClass = Class.forName("com.test.demo.MyItem");
   Intent ourIntent = new Intent(Menu.this, ourClass);
   ourIntent.putExtra("cheese", cheese);
   startActivity(ourIntent);
        } catch (ClassNotFoundException e) {
    e.printStackTrace(); }}} 
```

提前致谢 。

**更新 ：**

将全屏应用到清单中的菜单活动将解决这个问题：

```
 android:theme="@android:style/Theme.NoTitleBar.Fullscreen"> 
```

但我已经将自定义主题分配给清单中的菜单活动，如下所示：

```
 android:theme="@style/Theme_menu" 
```

那么如何将上述两个主题同时分配给菜单活动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:25:47.500

如果我正确理解您的问题，您似乎只需要让您`Theme_menu`的`Theme.NoTitleBar.Fullscreen`. 为此，请通过添加一个`parent`属性来修改您的样式 XML：

```
<style
    name="Theme_menu"
    parent="@android:style/Theme.NoTitleBar.Fullscreen">

    <!-- your style modifications for Theme_menu here -->

</style> 
```

通过上述更改，您最希望在 Activity 的方法中不需要这些行`onCreate()`（因为它是由主题设置的）：

```
 requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

# php - 如何显示和正确缩进树结构

> ID：12691924
> 
> 赞同：-7
> 
> 时间：2012-10-02T14:09:58.627
> 
> 标签：php, tree

DB结构是这样的：

```
INSERT INTO categories (title, lft, rgt) VALUES ('Cat 1',1,16);
INSERT INTO categories (title, lft, rgt) VALUES ('Cat 2',2,3);
INSERT INTO categories (title, lft, rgt) VALUES ('Cat 3',4,7);
INSERT INTO categories (title, lft, rgt) VALUES ('Cat 4',5,6);
INSERT INTO categories (title, lft, rgt) VALUES ('Cat 5',8,13);
INSERT INTO categories (title, lft, rgt) VALUES ('Cat 6',9,12);
INSERT INTO categories (title, lft, rgt) VALUES ('Cat 7',10,11);
INSERT INTO categories (title, lft, rgt) VALUES ('Cat 8',14,15); 
```

当我运行此查询时：

```
SELECT n.title, COUNT(*)-1 AS depth FROM categories AS n, categories AS p WHERE  n.lft BETWEEN p.lft AND p.rgt GROUP BY n.lft ORDER BY n.lft;

$result = mysql_query($query);

// Build array
$tree = array();
while ($row = mysql_fetch_assoc($result)) {
  $tree[] = $row;
} 
```

之后我可以使用以下功能：

```
// bootstrap loop
    $result = '';
    $currDepth = -1;  // -1 to get the outer <ul>
    while (!empty($tree)) {
      $currNode = array_shift($tree);
      // Level down?
      if ($currNode['depth'] > $currDepth) {
        // Yes, open <ul>
        $result .= '<ul>';
      }
      // Level up?
      if ($currNode['depth'] < $currDepth) {
        // Yes, close n open <ul>
        $result .= str_repeat('</ul>', $currDepth - $currNode['depth']);
      }
      // Always add node
      $result .= '<li>' . $currNode['title'] . '</li>';
      // Adjust current depth
      $currDepth = $currNode['depth'];
      // Are we finished?
      if (empty($tree)) {
        // Yes, close n open <ul>
        $result .= str_repeat('</ul>', $currDepth + 1);
      }
    }

    print $result; 
```

谁能告诉我如何在没有的情况下在树上方**打印** `<ul> and <li>.`。我想使用`&nbsp;`为孩子和子孩子准备的打印它......因为我必须将它放在`<select>`列表和其他 HTML 标记中

我使用的结构可以在这里看到： [Getting a modified preorder tree traversal model (nested set) into a <ul>](https://stackoverflow.com/questions/1310649/getting-a-modified-preorder-tree-traversal-model-nested-set-into-a-ul)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:17:39.537

作为紧急响应（且未经测试），因为您已经拥有每个`depth`元素/节点的其他方式）。`&nbsp;``<br />`

尝试一个函数来输出空格，它应该像这样简单：

```
function _tab($depth) {
    $tabs = '';
    while ($depth-- > 0) $tabs .= '&nbsp;&nbsp;&nbsp;&nbsp;';
    return $tabs;
}

// bootstrap loop
$result = '';
while (!empty($tree)) {
    $currNode = array_shift($tree);
    $result .= _tab($currNode['depth']) . $currNode['title'] . '<br />';
}

print $result; 
```

# android - Ti.Network.createHTTPClient

> ID：12691927
> 
> 赞同：0
> 
> 时间：2012-10-02T14:10:18.877
> 
> 标签：android, titanium, httpclient, port, appcelerator-mobile

我可以在 Titanium 移动应用程序中创建使用 8080 以外的端口的 http 客户端吗？

我的代码：

```
var clietn = Ti.Network.createHTTPClient({
    onload: function(e){
      ....
      ....
    },
    onerror: function(e){
      ....
      ....
    },

    timeout: 3000
});

client.open("GET", Ti.App.Properties.getString('srvName', '192.168.4.248:8888'));

client.send(JSON.stringify({....})); 
```

不能按我的意愿工作；

钛告诉我：

```
[ERROR][TiJSError(  343)] (main) [27918,533680] ----- Titanium Javascript Runtime  Error ----
[ERROR][TiJSError(  343)] (main) [0,533680] - In app.js:22,1
[ERROR][TiJSError(  343)] (main) [1,533681] - Message: Uncaught ReferenceError: client is not defined
[ERROR][TiJSError(  343)] (main) [0,533681] - Source: client.open("GET",     Ti.App.Properties.getString('servername', '192.168.4.248:88
[ERROR][V8Exception(  343)] Exception occurred at app.js:22: Uncaught ReferenceError: client is not defined 
```

# c# - 使用 Coderunner 编译 C# 代码 - 不允许出现警告

> ID：12691938
> 
> 赞同：0
> 
> 时间：2012-10-02T14:10:33.617
> 
> 标签：c#, macos, mono, warnings, coderunner

我很想解决一个小问题。我知道这不是调试可能出现警告的一段代码的最佳方法，但我喜欢在我的想法之间有一点中断的时候进行调试。我刚刚发现了 mono 以及编译在 Mac OS X Mountain Lion 上运行的 C# 代码的可能性。我将它集成到[CodeRunner](http://krillapps.com/coderunner/)应用程序中，它可以正常工作。但是，如果代码中出现警告，则不起作用。

例如，我试图编译一个创建一个整数（仅此而已）的代码，但由于该警告，它没有进行调试。我收到此错误消息：

```
Untitled.cs(9,29): warning CS0219: The variable `test' is assigned but its value is never used
Cannot open assembly 'Compilation succeeded - 1 warning(s)
Untitled.exe': No such file or directory. 
```

有人可能知道如何处理它。我知道这不是一个必不可少的功能，但即使使用一些未使用的变量，我也很想调试代码。

编译脚本文件的内容：

```
#!/bin/bash

enc[4]="UTF8"            # UTF-8
enc[10]="UTF16"            # UTF-16
enc[5]="ISO8859-1"        # ISO Latin 1
enc[9]="ISO8859-2"        # ISO Latin 2
enc[30]="MacRoman"        # Mac OS Roman
enc[12]="CP1252"        # Windows Latin 1
enc[3]="EUCJIS"            # Japanese (EUC)
enc[8]="SJIS"            # Japanese (Shift JIS)
enc[1]="ASCII"            # ASCII

rm -rf "$4"/csharp-compiled
mkdir "$4"/csharp-compiled
#mcs is the Mono CSharp Compiler

file="$1"
length=${#file}
first=`expr $length - 3`
classname=`echo "$file" | cut -c 1-"$first"`
#echo -out:"$4"/csharp-compiled/"$classname".exe "$1"
dmcs -out:"$4"/csharp-compiled/"$classname".exe "$1"
status=$?

if [ $status -ne 0 ]
then
exit $status
fi

#echo "$4"/csharp-compiled/

currentDir="$PWD"
cd "$4"/csharp-compiled/
files=`ls -1 *.exe`
status=$?
if [ $status -ne 0 ]
then
exit 1
fi

cd "$currentDir"
for file in $files
do
mv -f "$4"/csharp-compiled/$file "$file"
done

# Otherwise output the name of the input file without extension (this should be the same as the class name)
file="$1"
length=${#file}
first=`expr $length - 3`
classname=`echo "$file" | cut -c 1-"$first"`
echo $classname".exe"
exit 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T19:45:49.087

> ```
> dmcs -out:"$4"/csharp-compiled/"$classname".exe "$1" 
> ```

`dmcs`将一些消息放在 stdout 上，一些放在 stderr 上。CodeRunner 期望 stdout 只包含输出文件名，没有其他内容，所以要做到这一点，`>&2`可以用来将其他所有内容重定向到 stderr。

```
dmcs -out:"$4"/csharp-compiled/"$classname".exe "$1" >&2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-03T14:00:58.003

这适用于我在 Sierra 上使用当前的 Mono 和 CodeRunner 版本：

语言编译脚本：

```
file=$CR_FILENAME
/Library/Frameworks/Mono.framework/Versions/Current/bin/mcs "$CR_FILENAME" >&2
status=$?
if [ $status -ne 0 ]
then
exit $status
fi
echo $file | sed -e "s/\.cs/.exe/"
exit 0 
```

运行命令：

```
PATH="/Library/Frameworks/Mono.framework/Versions/Current/bin:$PATH"; mono $compiler 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:13:47.897

在 MS 编译器中，有一种隐藏警告的方法

[Pragma 警告预处理器指令](http://msdn.microsoft.com/en-us/library/441722ys.aspx)

```
#pragma warning disable 219
var test = "";
#pragma warning restore 219 
```

它可能会帮助你。

# symfony - Backbone.js 和 Symfony2 表单验证

> ID：12691939
> 
> 赞同：2
> 
> 时间：2012-10-02T14:10:37.850
> 
> 标签：symfony, backbone.js

我正在使用backbone.js 和symfony2 创建一个单页应用程序，我需要你对一件事的意见。

例如，请参阅此创建用户操作。该请求由主干模型（model.save）发送，我想检查服务器端的值。我的问题很简单，使用 symfony2 表单验证来做这个检查是否合适？

```
/**
 *
 * @Route("/user", defaults={"_format"="json"}, name="create_user")
 * @Method({"POST"})
 */
public function createUserAction() {
    $request = $this->get('request');

    if (0 === strpos($request->headers->get('Content-Type'), 'application/json')) {
        $data = json_decode($request->getContent(), true);
        $request->request->replace(is_array($data) ? $data : array());
    }

    $entity  = new User();
    $form = $this->createForm(new UserType(), $entity);
    $form->bind($request);
    ... 
} 
```

如果是，我该怎么做？Backbone 发送 JSON 请求正文，而 Symfony2 表单对象的 bind 方法只接受 URL 编码。我已经尝试使用 urlencode 函数但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:15:07.000

是的，这是相关的，您应该始终进行服务器端验证。我的问题是您的内容变量来自哪里？我没有看到它在上面的代码中被分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:52:55.873

您可以使用[FOSRestBundle](https://github.com/FriendsOfSymfony/FOSRestBundle)。它有一个“主体侦听器”，它将解码请求主体，并让您将表单与具有 json 主体的请求绑定。

[您可以在FOSRestBundle 文档](https://github.com/FriendsOfSymfony/FOSRestBundle/blob/master/Resources/doc/3-listener-support.md#body-listener)中了解有关此功能的更多信息。

# java - 如何使用适用于大文件的 struts 2 上传文件？

> ID：12691941
> 
> 赞同：4
> 
> 时间：2012-10-02T14:10:47.390
> 
> 标签：java, tomcat, file-upload, struts2, gradle

我想开发一个带有文件上传机制的网络应用程序，使用`struts2`它`fileUpload`的行为很奇怪，我不知道为什么。

我在struts.xml中配置了fileupload机制：

```
<package name="com.actions" namespace="/" extends="struts-default">
<action name="excelupload" class="com.actions.FileuploadAction">
    <interceptor-ref name="fileUpload">
            <param name="maximumSize">10000000</param>
    </interceptor-ref> 
        <result name="success">/fileupload.jsp</result>
        <result name="input">/fileupload.jsp</result>

    </action>
</package> 
```

对应的JSP：

```
<s:form action="excelupload" method="post" enctype="multipart/form-data">
    <s:file name="excelfile" label="file" />
    <s:submit name="upload" value="upload" align="center" />
</s:form> 
```

对应的动作：

```
public class FileuploadAction extends ActionSupport{
    File excelfile;
    public File getExcelfile() {
    return excelfile;
}

public void setExcelfile(File excelfile) {
    this.excelfile = excelfile;
}
    public String execute(){
        System.out.println(excelfile.getName());
        return SUCCESS;
    }
} 
```

当我上传一个小文件时，一切正常。但是当我尝试上传大于 2 MB 的文件时，应用程序会抛出以下异常：

```
org.apache.commons.fileupload.FileUploadBase$SizeLimitExceededException: the request
was rejected because its size (3244109) exceeds the configured maximum (2097152) 
```

为了解决这个问题，我尝试添加一个`struts-default.properties`with

```
struts.multipart.maxSize=20097152 
```

到我的应用程序类路径的根目录。

这修复了异常，但现在`excelfile`总是`null`，无论文件有多大。

有人知道我做错了什么吗？

**编辑**：对于部署，我使用 Tomcat **编辑**：添加了缺少的 getter 和 setter 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T11:15:12.607

我可以通过删除来解决这个问题

```
<interceptor-ref name="fileUpload">
        <param name="maximumSize">10000000</param>
</interceptor-ref> 
```

从`struts.xml`.

# performance - 哪些编程语言可以访问 SIMD 指令？

> ID：12691943
> 
> 赞同：3
> 
> 时间：2012-10-02T14:10:59.520
> 
> 标签：performance, programming-languages, sse, simd

> **可能重复：**
> [SIMD 编程语言](https://stackoverflow.com/questions/1417681/simd-programming-languages)

在现代 CPU 上达到最佳性能的最重要因素似乎是：

1.  线程级并行

2.  每个线程内的 SIMD 使用情况

大多数现代编程语言都支持（甚至强调）线程级并行性。但是，SIMD 指令支持似乎要少得多。

*   我知道 C、C++、C#/DotNet/Mono 的 Mono.SIMD 和 D 的 core.simd。
*   据我所知，Java 和 Go 不（也不会）支持显式 SIMD（并希望编译器能做到最好）。
*   Ruby 和 Python 仅通过 C 包装库（例如 numpy）提供对 SIMD 的访问，但不提供直接访问。
*   Fortran 似乎只支持（引导）自动矢量化，而不支持显式代码。
*   Haskell，Rust 似乎还没有在其主要分支中支持 SIMD ......

> 哪些其他编程语言确实提供对 SIMD 指令的显式访问？

谢谢你的建议。

# mysql - hasrsine distance - MySQL 和 PHP 为相同的公式返回不同的结果

> ID：12691944
> 
> 赞同：0
> 
> 时间：2012-10-02T14:11:01.573
> 
> 标签：mysql, distance, haversine

距离（直线）

来自： (lat) 48.73233 (long) 2.36618

至： lat() 48.84647 (long) 2.41026

等于一些：13096.16 米

如果我使用 PHP 公式，我会得到正确的结果。

但是当我将相同的 PHP 公式直接翻译成 MySQL 查询时 - 我得到 5904.2757 等。

这是代码：

php:

```
$distance = atan2(sqrt(pow(sin((($to_lat - $from_lat) * M_PI / 180) / 2), 2) +
         cos(($from_lat * M_PI / 180)) * cos(($to_lat * M_PI / 180)) *
         pow(sin((($to_long - $from_long) * M_PI / 180) / 2), 2)), sqrt(1 - (pow(sin((($to_lat - $from_lat) * M_PI / 180) / 2) , 2) +
         cos(($from_lat * M_PI / 180)) * cos(($to_lat * M_PI / 180)) *
         pow(sin((($to_long - $from_long) * M_PI / 180) / 2), 2)))) * 2 * $radiusOfEarth;

```

mysql:

```
atan2(sqrt(pow(sin(((ap.Latitude - $from_lat) * pi() / 180) / 2), 2) +
             cos(($from_lat * pi() / 180)) * cos((ap.Latitude * pi() / 180)) *
             pow(sin(((ap.Longitude - $from_long) * pi() / 180) / 2), 2)), sqrt(1 - (pow(sin(((ap.Latitude - $from_lat) * pi()) / 180) / 2), 2) +
             cos(($from_lat * pi() / 180)) * cos((ap.Latitude * pi() / 180)) *
             pow(sin(((ap.Longitude - $from_long) * pi() / 180) / 2), 2)))) * 2 * 6371000 作为距离

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:02:10.353

你想要的确切的东西。

```
SELECT ((ACOS(SIN(48.73233 * PI() / 180) * SIN(48.84647 * PI() / 180) + COS(48.73233 * PI() / 180) *
COS(48.84647 * PI() / 180) * COS((2.36618 - 2.41026) * PI() / 180)) * 180 / PI()) * 60 *1.1515 * 1.609344 *1000)
AS distance FROM dual; 
```

# python - 在 Python 脚本中定义全局函数

> ID：12691949
> 
> 赞同：11
> 
> 时间：2012-10-02T14:11:18.023
> 
> 标签：python, function, python-2.7, global

我是 Python 新手。我正在编写一个脚本，它将使用 Runge-Kutta 方法对一组常微分方程进行数值积分。由于 Runge-Kutta 方法是一种有用的数学算法，因此我将它放在自己的 .py 文件 rk4.py 中。

```
def rk4(x,dt):
    k1=diff(x)*dt
    k2=diff(x+k1/2)*dt
    k3=diff(x+k2/2)*dt
    k4=diff(x+k3)*dt
    return x+(k1+2*k2+2*k3+k4)/6 
```

该方法需要知道用户正在使用的方程组才能执行算法，因此它调用一个函数，该函数`diff(x)`将为 rk4 找到它需要工作的导数。由于方程会因使用而改变，我希望在运行特定问题的脚本中定义 diff()。在这种情况下，问题是水星的轨道，所以我写了`mercury.py`. （这不是它最终的样子，但为了弄清楚我在做什么，我已经简化了它。）

```
from rk4 import rk4
import numpy as np

def diff(x):
    return x

def mercury(u0,phi0,dphi):
    x=np.array([u0,phi0])
    dt=2
    x=rk4(x,dt)
    return x

mercury(1,1,2) 
```

当我运行mercury.py 时，我得到一个错误：

```
 File "PATH/mercury.py", line 10, in mercury
    x=rk4(x,dt)
  File "PATH/rk4.py", line 2, in rk4
    k1=diff(x)*dt
NameError: global name 'diff' is not defined 
```

我认为它`diff()`不是全局函数，当 rk4 运行时，它对 diff 一无所知。显然 rk4 是一小段代码，我可以把它塞进我当时正在使用的任何脚本中，但我认为 Runge-Kutta 积分器是一个基本的数学工具，就像 NumPy 中定义的数组一样，所以它使它成为一个被调用的函数是有意义的，而不是在每个使用它的脚本中定义的函数（可能很多）。但我也不能告诉 rk4.py 从特定的 .py 文件导入特定的差异，因为这破坏了我首先想要的 rk4 的通用性。

有没有办法在像mercury.py这样的脚本中全局定义差异，以便在调用rk4时，它会知道差异？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T14:17:28.523

接受函数作为参数：

```
def rk4(diff,  # accept an argument of the function to call
        x, dt)
    k1=diff(x)*dt
    k2=diff(x+k1/2)*dt
    k3=diff(x+k2/2)*dt
    k4=diff(x+k3)*dt
    return x+(k1+2*k2+2*k3+k4)/6 
```

然后，当您调用 时`rk4`，只需传入要执行的函数：

```
from rk4 import rk4
import numpy as np

def diff(x):
    return x

def mercury(u0,phi0,dphi):
    x=np.array([u0,phi0])
    dt=2
    x=rk4(diff,  # here we send the function to rk4
          x, dt)
    return x
mercury(1,1,2) 
```

`mercury`接受`diff`作为参数也可能是一个好主意，而不是从闭包（周围的代码）中获取它。然后，您必须像往常一样传递它 - 您`mercury`在最后一行的调用将显示为`mercury(diff, 1, 1, 2)`.

函数是 Python 中的“一等公民”（几乎所有东西都是如此，包括类和模块），因为它们可以用作参数、保存在列表中、分配给命名空间中的名称等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T14:22:58.233

`diff`已经是模块中的全局变量`mercury.py`。但是为了在其中使用它，`rk4.py`您需要像这样导入它：

```
from mercury import diff 
```

这就是你问题的直接答案。

However, passing the `diff` function to `rk4` as suggested by @poorsod is much more elegant and also avoids a circular dependency between `mercury.py` and `rk4.py`, so I suggest you do it that way.

# batch-file - 在批处理文件中设置路径

> ID：12691955
> 
> 赞同：0
> 
> 时间：2012-10-02T14:11:38.710
> 
> 标签：batch-file

我正在尝试运行一个批处理文件，该文件将安装多个应用程序而无需用户干预。所有这些应用程序都是使用它们自己的批处理文件安装的。我遇到的问题是我似乎无法让文件从当前目录正确运行。我尝试使用“cd /d %~dp0”和“%CD%”命令，但我收到了找不到文件路径的消息。看起来在运行批处理文件时它正在添加一个额外的反斜杠命令。

代码开始如下

```
SET DRIVE1=%CD%

SET PATHWAY=%~DP0
SET APPL=1

SET INSTALL=
SET /A MARK=0
SET INSTALL1="APPLICATION NAME"

SET PATH1=%DRIVE%\"APPLICATION LOCATION"

SET CMDFOR1="APPLICATION BATCHFILE NAME" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:15:06.577

尝试改变：

```
SET PATH1=%DRIVE%\"APPLICATION LOCATION" 
```

对此：

```
SET PATH1="%DRIVE%\APPLICATION LOCATION" 
```

请注意，引号移动到`%DRIVE%`变量的左侧。

# google-drive-api - 通过 Google Documents List API 导出 Excel 电子表格时转换失败

> ID：12691956
> 
> 赞同：3
> 
> 时间：2012-10-02T14:11:43.233
> 
> 标签：google-drive-api, google-docs-api

我们正在使用 Google Docs List API 导出不同的文档类型，在尝试以 xls 格式请求特定电子表格时遇到以下错误：

```
Exception in thread "main" java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)
Caused by: com.google.gdata.util.ServiceException: Conversion failed unexpectedly
<HTML>
<HEAD>
<TITLE>Conversion failed unexpectedly</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>Conversion failed unexpectedly</H1>
<H2>Error 500</H2>
</BODY>
</HTML>

at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:624)
at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:563)
at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:552)
at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:530)
at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:535)
at com.google.gdata.client.media.MediaService.getMediaResource(MediaService.java:234)
at com.google.gdata.client.media.MediaService.getMedia(MediaService.java:276)
at com.google.gdata.client.media.MediaService.getMedia(MediaService.java:302) 
```

对于同一个电子表格，此错误已持续数天。我们自己调查了一下，得出的结论是无法导出的格式是 xls/xlsx 和 ods，但例如 csv 和 html 可以。这就是我们的 REST 调用的样子：

```
fails: https://docs.google.com/feeds/download/spreadsheets/Export?key={ID}&xoauth_requestor_id={email}&exportFormat=xls
fails: https://docs.google.com/feeds/download/spreadsheets/Export?key={ID}&xoauth_requestor_id={email}&exportFormat=ods
succeeds: https://docs.google.com/feeds/download/spreadsheets/Export?key={ID}&xoauth_requestor_id={email}&exportFormat=csv 
```

我们还尝试添加旧`format=`属性，但它并没有改变行为，因此我们再次将其删除。

由于 Google Docs 正在被 Google Drive 取代，我们将在明年考虑转换为 Google Drive API，这可能会奏效，但同时能够在当前版本中解决这个问题会很好。

在我们这边，我正在尝试与客户取得联系，看看他们是否能在实际的电子表格中看到任何奇怪的东西。我将添加我找到的任何信息。

在 Google 上搜索的结果并不多，所以我希望这里的人以前见过这种情况并知道可能发生这种情况的一些场景。之前看到此问​​题的任何人的任何评论以及您为解决此问题所做的一切都会有所帮助！

提前致谢！

# asp.net-mvc - 默认情况下，ASP.NET MVC 4 是否需要额外的 XSS 处理

> ID：12691958
> 
> 赞同：13
> 
> 时间：2012-10-02T14:11:53.827
> 
> 标签：asp.net-mvc, razor, xss

默认情况下，ASP.NET MVC 4 会忽略发布消息中的 HTML 输入。如果我没有明确接受 HTML，是否需要编写任何代码来保护我的网站免受 XSS 攻击？我不会使用`[AllowHtml]`or `[ValidateInput(false)]`。我只是想知道我是否应该担心 XSS 攻击。我使用 Razor 作为我的视图引擎。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T17:51:08.977

[我发现Amir Ismail](https://stackoverflow.com/users/769831/amir-ismail)的一篇出色的博客文章解决了您的所有问题。[http://miroprocessordev.blogspot.com/2012/03/save-aspnet-mvc-application-against.html](http://miroprocessordev.blogspot.com/2012/03/save-aspnet-mvc-application-against.html)

总结他写的东西。除非使用 Razor，否则默认编码`Html.Raw`。 `Html.AntiForgeryToken()`可用于创建一个随机令牌以防止 CSRF，但它要求用户接受 cookie。

# cakephp - cakedc 搜索插件使用 pb

> ID：12691961
> 
> 赞同：0
> 
> 时间：2012-10-02T14:12:02.017
> 
> 标签：cakephp, plugins, cakedc

我使用插件 cakedc 搜索，但我似乎找不到一件事，我有一个包含两个字段的表单，我会在控制器中的搜索中添加例如“online = 1”，我尝试：

```
 public function find() {
 $this->Prg->commonProcess();
 $array = array('type'=>'post', 'online'=>'1', 'created'=> '<= NOW()');
 $this->passedArgs = Set::merge($this->passedArgs, $array);

    $this->paginate = array(
      'conditions' => array($this->Post->parseCriteria($this->passedArgs)),
     );
    $this->set('posts', $this->paginate()); 
```

模型：

```
 public $displayField = array('name', 'category_id');

    public $filterArgs = array(
                array('name' => 'name', 'type' => 'query', 'method' => 'filterName'),
                array('name' => 'category_id', 'type' => 'value')
           );
..... 
```

调试（$this->passedArgs）：

```
array(
    'name' => 'mon',
    'category_id' => '2',
    'type' => 'post',
    'online' => '1',
    'created' => '<= NOW()'
) 
```

但是我的搜索中没有使用 $array 参数有人可以帮忙吗？我是cakephp的初学者，非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:59:04.243

代替

```
'conditions' => array($this->Post->parseCriteria($this->passedArgs)), 
```

尝试

```
'conditions' => $this->Post->parseCriteria($this->passedArgs), 
```

我还建议您使用 DebugKit 并将生成的查询添加到您的问题中，以防它仍然无法正常工作。

# javascript - 如何从控制器发送 json 数组以在 CodeIgniter 中查看

> ID：12691966
> 
> 赞同：0
> 
> 时间：2012-10-02T14:12:34.403
> 
> 标签：javascript, json, codeigniter

我的控制器中有一个功能：

```
function getAllExpense()
    { $date=$this->frenchToEnglish_date($this->input->post('date'));
      $id_user=$this->session->userdata('id_user');
      $where=array('date'=>$date, 'id_user'=>$id_user);
      $allExpenses=$this->expenses_model->get_all('depenses',$where);
      return json_encode($allExpenses);

    } 
```

在视图中，我需要对 getAllExpense 进行 ajax_call，但我还需要在成功的情况下检索 getAllExpense 返回的结果（我不能这样做）。这是我的看法

```
function searchExpense()
    {
      var date= $('#dateSearch').val();
      $.ajax({
                            type:'POST',
                            url : '<?php echo site_url()."/public/expenses/getAllExpense/"; ?>',
                            data :'date='+date,

                            success:function(data)
                            {          $('#searchExpense').toggle();

                            }

                    });     
    } 
```

最后是表格：

```
<div id="searchExpense" class="toogle_form" style="display:none">
           <label><strong>Vos depenses :</strong></label>
           <?php
              if (isset($allExpenses) && ! empty($allExpenses))
                                            {
                          foreach ($allExpenses as $expense)
                                    {
                                      echo $expense['id_depense'] ;
                                      echo ' ';
                                      echo $expense['commentaire'];
                                      echo '</br>';
                                        }
                              }
                              else
                              {
                                echo 'Vous n\'avez pas eu de depenses pour cette date';
                              }
            ?>
       </div> 
```

这不会在浏览器上显示任何内容。我无法使用getAllExpense中加载视图的方式发送数据，因为我已经在函数索引中加载了它。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:34:02.240

在您的控制器函数 getAllExpense 中，尝试使用标头而不是使用返回来回显您的 json 数据：

改变这个：

```
return json_encode($allExpenses); 
```

至：

```
$this->output->set_header('Content-Type: application/json; charset=utf-8');
echo json_encode($allExpenses); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:57:09.950

## 网址：

向后阅读我理解`getAllExpense`为您的函数名称和`expenses`您的控制器名称......什么是`/public/`？

## 数据：

目前您正在使用`data :'date='+date`. 这是不正确的。`$.ajax`期望一个对象作为`data`参数。使用`data: {date: date}`.

## 数据类型在哪里？

如果您期望来自服务器的 json，请告诉`$.ajax`它，以便它可以正确解析响应。利用：`dataType: 'json'`

## 你的成功功能

它有助于调试调用`console.log()`返回的数据。在回调内部使用：`console.log(data);`然后，打开您的网络工具。如果您使用的是 Chrome，请在触发 AJAX 请求时按++并检查控制台选项卡`ctrl`。如果您前往网络选项卡并单击最近的请求（在底部），您也可以查看 HTTP 响应。`shift``j`

## “最后是表格：”

你没有填写表格。

## 隔离问题：

正如我所提到的，您最好使用 Chrome 的“网络”选项卡检查 AJAX 响应，但您也可以通过暂时将您的功能更改为：

```
function getAllExpense(){
    //$date=$this->frenchToEnglish_date($this->input->post('date'));
    $date = "12/21/2012"; /*or whatever your date format is.*/
    $id_user=$this->session->userdata('id_user');
    $where=array('date'=>$date, 'id_user'=>$id_user);
    $allExpenses=$this->expenses_model->get_all('depenses',$where);
    //return json_encode($allExpenses);
    echo json_encode($allExpenses);
} 
```

`getAllExpense`并直接在网址栏中调用。您将能够看到原始 json 并确定它是否采用您满意的格式。

# facebook - 如何使用 fql 阅读用户的新闻源

> ID：12691969
> 
> 赞同：0
> 
> 时间：2012-10-02T14:12:40.057
> 
> 标签：facebook, api, facebook-fql

我正在使用 Facebook API 参考中建议的查询：

“SELECT post_id, actor_id, target_id, message FROM stream WHERE filter_key in (SELECT filter_key FROM stream_filter WHERE uid = me() AND type = 'newsfeed')”

我在 Facebook 上的“主页”提要中看到了大部分项目，但不是全部。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:27:19.897

用户可以阻止应用程序访问您的任何数据，或某些类型的数据，只是某些类型的数据。您可以从 FB 前端的**隐私设置 -> 应用程序、游戏和网站 -> 人们如何将您的信息带到他们使用的应用程序中进行设置**。

执行查询后，API 过滤这些项目的可见性。没有办法看到缺少什么。

# c# - 通知/绑定父属性以计算子属性的总和

> ID：12691978
> 
> 赞同：6
> 
> 时间：2012-10-02T14:12:58.037
> 
> 标签：c#, wpf

我有两个类，一个用于**ViewModel**，一个用于**Product**。Product 类有一个名为**Line Total**的属性，而 ViewModel 类有一个名为**Total Amount**的属性。Product 类绑定到 DataGrid 并且用户插入随后自动更新**Line Total**的数量。

这是**ViewModel**类：

```
public class ViewModel : INotifyPropertyChanged
{

    public ObservableCollection<Product> products { get; set; }// the children

    private decimal _TotalAmount; 
    public decimal TotalAmount // <=== has to hold sum of [products.LineTotal]
    {
        get
        {
            return totalAmount;
        }
        set
        {
            if (value != _TotalAmount)
            {
                _TotalAmount = value;
                onPropertyChanged(this, "TotalAmount");
            }
        }
    } 
```

这是一个孩子的**Product类：**

```
public class Product : INotifyPropertyChanged
    {
        private decimal _LineTotal;
        public decimal LineTotal
        {
            get
            {
                return _LineTotal;
            }
            set
            {
                if (value != _LineTotal)
                {
                    _LineTotal = value;
                    onPropertyChanged(this, "LineTotal");
                }

            }

        }
} 
```

我的问题是：**TotalAmount**如何计算所有 Products **[Line Total]**的总和？子**Products**如何通知父**ViewModel**更新**TotalAmount**？

就像是：

```
foreach(var product in Products)
{
     TotalAmount += product.LineTotal;
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-31T22:00:41.933

实现此目的的一种方法是，每次用户编辑行总计以及每次从`ObservableCollection`.

由于在设置新行总数时`Product`实现`INotifyPropertyChanged`并引发事件，因此可以处理该事件并重新计算总数。`PropertyChanged``ViewModel`

`ObservableCollection`有一个`CollectionChanged`在添加或删除项目时引发的事件，因此`ViewModel`也可以处理该事件并重新计算。（如果产品只能由用户更改而不是添加/删除等，则此部分不是真正必要的）。

你可以试试这个小程序，看看它是如何完成的：

**代码隐藏**

```
public partial class MainWindow : Window
{
    ViewModel vm = new ViewModel();

    public MainWindow()
    {
        InitializeComponent();

        vm.Products = new ObservableCollection<Product>
        {
            new Product { Name = "Product1", LineTotal = 10 },
            new Product { Name = "Product2", LineTotal = 20 },
            new Product { Name = "Product3", LineTotal = 15 }
        };

        this.DataContext = vm;
    }

    private void AddItem(object sender, RoutedEventArgs e)
    {
        vm.Products.Add(new Product { Name = "Added product", LineTotal = 50 });
    }

    private void RemoveItem(object sender, RoutedEventArgs e)
    {
        vm.Products.RemoveAt(0);
    }
}

public class ViewModel : INotifyPropertyChanged
{
    private ObservableCollection<Product> _products;
    public ObservableCollection<Product> Products
    {
        get { return _products; }
        set
        {
            _products = value;

            // We need to know when the ObservableCollection has changed.
            // On added products: hook up eventhandlers to their PropertyChanged events.
            // On removed products: recalculate the total.
            _products.CollectionChanged += (sender, e) =>
            {
                if (e.NewItems != null)
                    AttachProductChangedEventHandler(e.NewItems.Cast<Product>());
                else if (e.OldItems != null)
                    CalculateTotalAmount();
            };

            AttachProductChangedEventHandler(_products);
        }
    }

    private void AttachProductChangedEventHandler(IEnumerable<Product> products)
    {
        // Attach eventhandler for each products PropertyChanged event.
        // When the LineTotal property has changed, recalculate the total.
        foreach (var p in products)
        {
            p.PropertyChanged += (sender, e) =>
            {
                if (e.PropertyName == "LineTotal")
                    CalculateTotalAmount();
            };
        }

        CalculateTotalAmount();
    }

    public void CalculateTotalAmount()
    {
        // Set TotalAmount property to the sum of all line totals.
        TotalAmount = Products.Sum(p => p.LineTotal);
    }

    private decimal _TotalAmount;
    public decimal TotalAmount
    {
        get { return _TotalAmount; }
        set
        {
            if (value != _TotalAmount)
            {
                _TotalAmount = value;

                if (PropertyChanged != null)
                    PropertyChanged(this, new PropertyChangedEventArgs("TotalAmount"));
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
}

public class Product : INotifyPropertyChanged
{
    public string Name { get; set; }

    private decimal _LineTotal;
    public decimal LineTotal
    {
        get { return _LineTotal; }
        set
        {
            if (value != _LineTotal)
            {
                _LineTotal = value;

                if (PropertyChanged != null)
                    PropertyChanged(this, new PropertyChangedEventArgs("LineTotal"));
            }
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

**XAML：**

```
<Window x:Class="WpfApplication3.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <StackPanel>
        <DataGrid ItemsSource="{Binding Products}" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Binding="{Binding Name}" />
                <DataGridTextColumn Binding="{Binding LineTotal}" />
            </DataGrid.Columns>
        </DataGrid>

        <Button Click="AddItem">Add item</Button>
        <Button Click="RemoveItem">Remove item</Button>

        <TextBlock>
            <Run>Total amount:</Run>
            <Run Text="{Binding TotalAmount}" />
        </TextBlock>
    </StackPanel>
</Window> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T13:56:11.770

如果`ParentViewModel`关心何时`ChildModel`更新属性，它应该订阅它的`PropertyChanged`事件。

但是，由于您有一个 Collection ，因此应该在事件中添加/删除连接事件`ChildModels`的处理程序。`PropertyChanged``CollectionChanged`

```
// Hook up CollectionChanged event in Constructor
public MyViewModel()
{
    Products = new ObservableCollection<Product>();
    MyItemsSource.CollectionChanged += Products_CollectionChanged;
}

// Add/Remove PropertyChanged event to Product item when the collection changes
void Products_CollectionChanged(object sender, CollectionChangedEventArgs e)
{
    if (e.NewItems != null)
        foreach(Product item in e.NewItems)
            item.PropertyChanged += Product_PropertyChanged;

    if (e.OldItems != null)
        foreach(Product item in e.OldItems)
            item.PropertyChanged -= Product_PropertyChanged;
}

// When LineTotal property of Product changes, re-calculate Total
void Product_PropertyChanged(object sender, PropertyChangedEventArgs e)
{
    if (e.PropertyName == "LineTotal")
    {
        TotalAmount = products.Sum(p => p.LineTotal);

        // Or if calculation is in the get method of the TotalAmount property
        //onPropertyChanged(this, "TotalAmount");
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T14:29:35.680

我相信 bernd_rausch 的答案是正确的。基本问题是为什么要将 TotalAmount 存储在 ViewModel 中？唯一的原因可能是您拥有的产品太多会影响性能。但即使在这种情况下，您也必须小心保持值一致。

最安全的方法是编写一个 TotalAmount 属性来即时计算 TotalAmount。然后链接 Changed 事件。

```
public class ViewModel : INotifyPropertyChanged
{
  ViewModel()
  {
    Products = new ObservableCollection<Product>();
    Products.CollectionChanged += OnProductsChanged;
  }
  public ObservableCollection<Product> Products { get; private set; }// the children
  public decimal TotalAmount { get { return Products.Select(p => p.LineTotal).Sum(); } }

  private void OnProductChanged(object sender, PropertyChangedEventArgs eventArgs)
  {
     if("LineTotal" != eventArgs.PropertyName)
           return;
     onPropertyChanged(this, "TotalAmount");
  }

  private void OnProductsChanged(object sender, NotifyCollectionChangeEventArgs eventArgs)
  {
     // This ignores a collection Reset...
     // Process old items first, for move cases...
     if (eventArgs.OldItems != null)
       foreach(Product item in eventArgs.OldItems)
         item.PropertyChanged -= OnProductChanged;

     if (eventArgs.NewItems != null)
       foreach(Product item in eventArgs.NewItems)
        item.PropertyChanged += OnProductChanged;

     onPropertyChanged(this, "TotalAmount");
  }

} 
```

我忽略了重置案例。但我认为这应该给你正确的方向。如果您想缓存计算结果，我仍然会使用此方法并通过在其中一个更改处理程序中重置的内部惰性值进行缓存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T14:28:03.083

我认为 UI 中 TotalAmount 的值仅在您设置 TotalAmount 以触发 NotifyPropertyChanged 事件时才会更新。为此，您必须监听所有产品的 PropertyChangedEvent，并且当集合更改或产品的 LineTotal 更改时，您必须将 TotalAmount 设置为与 _TotalAmount 不同的某个值。

但是这段代码真的很难理解：不清楚为什么要存储一个值，即每次读取（TotalAmount）时都会计算一个变量（_TotalAmount）。并且由于 _TotalAmount 未设置为零，因此不是正确的值。

# jquery - 使用 jQuery 调用 Spring REST WebService

> ID：12691980
> 
> 赞同：1
> 
> 时间：2012-10-02T14:13:09.660
> 
> 标签：jquery, web-services, spring, rest, put

我想用 JQuery 调用 Spring REST WebService。

我的控制器中有两种方法：

```
@RequestMapping(value="/{id}", method=RequestMethod.GET)
public @ResponseBody User getUser(@PathVariable long id, Model model){
return new User("TestUser");
}

@RequestMapping(value="/{id}", method=RequestMethod.PUT)
@ResponseStatus(HttpStatus.NO_CONTENT)
public void updateUser(@PathVariable long id, @Valid User user){
    user.getName();
} 
```

User 类如下所示：

```
public class User {

private String name;

public User(){};
public User(String name){this.name = name;}

public String getName() {
    return name;
}
public void setName(String name) {
    this.name = name;
}; 
```

}

现在当我调用`http://localhost:8080/demo/user/2`结果是 {"name":"TestUser"} 就像预期的那样。

但是当尝试修改资源时，我尝试这样：

```
$.ajax({
  url: "http://localhost:8080/demo/user/2",
  dataType: "json",
  data: '{"name":"NewTestUser"}',
  type: "PUT",
  success: function(){alert('success');}
}); 
```

我可以在 Debugmode 中看到调用了正确的方法 (updateUser)，但 User 对象的实例变量名称始终为 null。谁能告诉我我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:56:49.577

您还必须使用 注释 User 参数`@RequestBody`，这将触发在 Spring MVC 中注册的 httpmessageconverters 将 http 正文转换为您的 User 类型，这样：

```
@RequestMapping(value="/{id}", method=RequestMethod.PUT)
@ResponseStatus(HttpStatus.NO_CONTENT)
public void updateUser(@PathVariable long id, @RequestBody @Valid User user){
    user.getName();
} 
```

# c - memcpy 实现问题

> ID：12691982
> 
> 赞同：-1
> 
> 时间：2012-10-02T14:13:18.957
> 
> 标签：c, memcpy

我正在编写一个小的 memcpy 实现，如下所示。

```
#include "stdio.h"
int main( )
{
    int i=5;
    int j=4;
    printf("i=%d\t",i);
    swap(&i,&j,sizeof(int));
    printf("i=%d",i);
    return 0;
}

int swap(void *vp1,void *vp2,int size)
{
    char *a=(char *)vp1;
    char *b=(char *)vp2;

    for(int i=0;i<size;i++)
    {
        *a=*b;
        a++;
        b++;
    }

    return 0;
} 
```

这段代码的输出是

> 我=5 我=33

而不是

> 我=5 我=4

任何人都可以解释代码有什么问题吗？

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-10-02T15:54:36.450

```
#include "stdio.h"
int swap(void *vp1,void *vp2,int size)

{

     int i;

    char *a=(char *)vp1;
    char *b=(char *)vp2;

    for(i = 0; i<size;i++)
    {
     *a = *b;
     a++;
     b++;
     }
    return 0;
}

int main( )

{

    int i=5;
    int j=4;
    printf("i=%d\t",i);
    swap(&i,&j,sizeof(int));
    printf("i=%d",i);
    return 0;
} 
```

# android - Android 从意图中获取 vCard

> ID：12691994
> 
> 赞同：2
> 
> 时间：2012-10-02T14:13:59.730
> 
> 标签：android, android-intent, vcf-vcard

我正在尝试从以下位置接收 vCard `Intent`：

```
// ...

Intent intent = getIntent();
String action = intent.getAction();
String type = intent.getType();

if (Intent.ACTION_SEND.equals(action) && type != null) {
    if ("text/plain".equals(type)) {
        handleSendText(intent);
    } else if ("text/x-vcard".equals(type)) {
        handleSendVCard(intent);
    }
}

// ...

private void handleSendVCard(Intent intent) {
    Uri uri = intent.getData();
    Log.d("vCard", uri.toString());
} 
```

但是得到`NullPointerException`。如何从意图中获取 vCard？

# cocoa-touch - iOS6 Twitter 集成

> ID：12691995
> 
> 赞同：1
> 
> 时间：2012-10-02T14:14:02.060
> 
> 标签：cocoa-touch, twitter, ios-simulator, ios6

检查 Twitter 是否可用时，iPhone 模拟器和实际设备之间似乎存在差异。

我使用以下代码检查是否设置了 Twitter 帐户：`[SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter];`

在模拟器中有一个很好的`UIAlertView`通知用户没有 Twitter 帐户设置和两个按钮，一个用于设置，一个用于取消。

但是，当我在我的设备上运行我的应用程序时，它不会显示上述内容`UIAlertView`。这是为什么？以及如何捕捉上面点击的按钮`UIAlertView`（因为我没有实例化它？）

这是它在模拟器上的样子：

![在此处输入图像描述](../Images/737f6255fd52d88e005379532f1c596f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T07:58:18.557

要处理 Twitter 调用的结果，您可以使用以下代码段：

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter])
{
        SLComposeViewControllerCompletionHandler __block completionHandler=^(SLComposeViewControllerResult result){

        [twitterController dismissViewControllerAnimated:YES completion:nil];

        switch(result){
        case SLComposeViewControllerResultCancelled:
        default:
        {
            NSLog(@"Cancelled.....");

        }
            break;
        case SLComposeViewControllerResultDone:
        {
            NSLog(@"Posted....");
        }
            break;
    }};

    [twitterController setCompletionHandler:completionHandler];
    ...
    ...
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T14:31:47.737

我也有同样的问题，设备不像模拟器那样显示 UIAlert。在Apple修复它之前，这就是我正在做的（不像模拟器那样干净或漂亮，并且需要用户手动转到主屏幕）Apple，请修复这个！

编辑：库存的 Apple 应用程序当然完美地显示 UIAlert，例如：在没有 Twitter/Facebook 帐户的情况下从照片应用程序共享照片将显示正确的 UIAlert。

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeTwitter])
    {
        mySLComposerSheet = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeTwitter];
        [mySLComposerSheet setInitialText:@"Check out the app:"];
        [mySLComposerSheet addImage:[UIImage imageNamed:@"test.png"]];
        [mySLComposerSheet addURL:[NSURL URLWithString:@"http://urlofyourapp.com"]];
        [self presentViewController:mySLComposerSheet animated:YES completion:nil];
    }
    else {
        UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"You need to setup an account in the Settings app under Twitter to use this feature." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
        [alert show];
    }
    [mySLComposerSheet setCompletionHandler:^(SLComposeViewControllerResult result) {

        if (result == SLComposeViewControllerResultCancelled){[mySLComposerSheet dismissModalViewControllerAnimated:YES];}
        else if (result == SLComposeViewControllerResultDone){[mySLComposerSheet dismissModalViewControllerAnimated:YES];}

    }]; 
```

# css - css希望p在设置时的宽度小于最大宽度

> ID：12691996
> 
> 赞同：0
> 
> 时间：2012-10-02T14:14:01.657
> 
> 标签：css

我需要设置`width`或`max-width`为了`margin:auto`工作，对吧？[就像在这个 jsFiddle 中一样](http://jsfiddle.net/H7qrp/1/)。

问题是，段落宽度等于`max-width`，因此文本块没有正确居中。

如何使段落合同的宽度仅*足以*包含文本，并`max-width`根据需要扩展？

没有javascript，也没有固定宽度。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:19:33.840

我不确定，但也许一个`inline-block`段落是你正在寻找的：

```
<div>
    <p>Lorem ipsum dolor sit amet</p>
</div>​ 
```

```
div { text-align: center; }
p { display: inline-block; text-align: left; max-width: 40ex; } 
```

[http://jsfiddle.net/wuqaH/1/](http://jsfiddle.net/wuqaH/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:19:32.797

您是否尝试设置最大宽度/或百分比宽度？

会是这样：

> ```
> div {
>     width: 100%;
>     background: red;
> }
> 
> p {
>     margin: 0 auto 0 auto;
>     background: blue;
>     max-width: 90%; } 
> ```

你可以在你的 jsFiddle 上试试。

希望这会帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:20:18.667

是否要将文本居中在 p 中，为什么不使用`text-align:center;`属性

[http://jsfiddle.net/H7qrp/5/](http://jsfiddle.net/H7qrp/5/)

# ms-access - Excel 2010 VBA DB2 功能和 Access 2007 DB2 功能之间的区别？

> ID：12691998
> 
> 赞同：1
> 
> 时间：2012-10-02T14:14:06.260
> 
> 标签：ms-access, excel, db2, subquery, vba

解决方案：

事实证明，我只是在 WHERE 条件下使用了错误的标准。我试图排除的 LOCATION 有很多变体，但我没有看到差异。感谢 Remou 在聊天中帮助我！

问题：

我有一个包含 DB2 链接表的 Access 2007 实例。我还有一个 Excel 2010 VBA 脚本可以访问同一个 DB2 表。

从这个 DB2 表中，我选择了一个用户 ID、位置、报告经理 ID 和报告经理位置。前 3 个字段是直接存储的，而报告经理位置只能通过链接 userID 和报告经理 ID 的子查询得出，并获取报告经理 ID 的位置。

这个查询给了我我想要的东西->

```
SELECT DISTINCT main.USERID, main.LOCATION, main.REPORT_MGR_USERID,  manager_data.LOCATION 
    FROM employee_table main
    INNER JOIN employee_table manager_data
    ON main.REPORT_MGR_USERID=manager_data.USERID 
```

但是，我发现了某些我不想在结果中显示的位置。所以我开发了这个查询->

```
SELECT DISTINCT main.USERID, main.LOCATION, main.REPORT_MGR_USERID,  manager_data.LOCATION 
FROM employee_table main
INNER JOIN employee_table manager_data
    ON main.REPORT_MGR_USERID=manager_data.USERID
WHERE main.LOCATION NOT IN ('location one', 'location two') 
```

唯一的区别是这个->

```
WHERE main.LOCATION NOT IN ('location one', 'location two') 
```

这在 Access 2007 实例中运行时按预期工作，但在 Excel VBA 实例（我实际需要它的地方）中不起作用。我已验证查询字符串完全相同。

Access 和 Excel 之间的工作方式有何不同？

编辑：

这是我在 Excel 中的执行方式->

```
sqlString = "SELECT DISTINCT main.USERID, main.LOCATION, main.REPORT_MGR_USERID,  manager_data.LOCATION " _
                & "FROM employee_table main " _
                & "INNER JOIN employee_table manager_data " _
                & "ON main.REPORT_MGR_USERID=manager_data.USERID   " _
                & "WHERE main.LOCATION NOT IN ('location one', 'location two')"

sConnection = "Provider=IBMDADB2.DB2COPY1;Persist Security Info=True;User ID=" & connectingUserID & ";Password=" & connectingPassword & ";Data Source=EmployeeInfoDB;Mode=Read"

Set adoConnection = New ADODB.Connection

Set nameRecordSet = New ADODB.Recordset

adoConnection.Open sConnection

nameRecordSet.Open Source:=sqlString, ActiveConnection:=adoConnection 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T16:16:46.677

解决方案：

事实证明，我只是在 WHERE 条件下使用了错误的标准。我试图排除的 LOCATION 有很多变体，但我没有看到差异。感谢 Remou 在聊天中帮助我！

# asp.net-mvc-2 - VS2012 中的 ASP.net MVC2 项目不工作

> ID：12691999
> 
> 赞同：11
> 
> 时间：2012-10-02T14:14:16.383
> 
> 标签：asp.net-mvc-2, visual-studio-2012

是否可以在 Visual Studio 2012 中打开 MVC2 项目？当我尝试加载项目时，出现此错误：

> De\De.csproj：未找到该项目类型所基于的应用程序。请尝试此链接以获取更多信息： http: [//go.microsoft.com/fwlink/ ?prd=12395&pver=11&sbp=ProjectTypeDeprecated&plcid=0x409&clcid=0x409&ar=MSDN&sar=ProjectCompatibility&o1=F85E285D-A4E0-4152-9332-AB1D724D3325](http://go.microsoft.com/fwlink/?prd=12395&pver=11&sbp=ProjectTypeDeprecated&plcid=0x409&clcid=0x409&ar=MSDN&sar=ProjectCompatibility&o1=F85E285D-A4E0-4152-9332-AB1D724D3325)

然后我重定向到：[http ://www.asp.net/whitepapers/mvc3-release-notes#upgrading](http://www.asp.net/whitepapers/mvc3-release-notes#upgrading)

我需要升级到 MVC3 还是可以将我的项目保留在 MVC2 中？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-30T20:35:57.520

应[VinnyG 的要求](https://stackoverflow.com/questions/12691999/asp-net-mvc2-project-in-vs2012-not-working?lq=1#comment18665880_12691999)，我提供了一个链接，指向我提供的有关如何解决此问题[的答案。](https://stackoverflow.com/a/13424080/61654)[链接的答案](https://stackoverflow.com/a/13424080/61654)提供了一个完全详细的解决方案，但这里是一个摘要：

> 需要下载并安装[ASP.NET MVC 2 。](http://www.microsoft.com/en-us/download/details.aspx?id=22079)需要修改 MVC 2 项目文件以删除其项目 GUID。删除项目 GUID 将意味着该项目不再像 MVC 项目一样：无需右键单击添加视图、控制器等，而是无需迁移即可作为 MVC 2 项目进行编译和工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T14:27:48.717

复制自[http://msdn.microsoft.com/en-us/library/hh266747.aspx](http://msdn.microsoft.com/en-us/library/hh266747.aspx)

如果 Model-View-Controller (MVC) 项目使用版本 3 或 4，则可以在 Visual Studio 2012 中打开此项目。默认情况下，Visual Studio 2010 with SP1 仅支持 MVC 2 和 3，Visual Studio 2012 仅支持 MVC 3 4\. 有关如何从 MVC 2 自动升级到 MCV 3 的信息，请参阅[ASP.NET MVC 3 Application Upgrader](http://go.microsoft.com/fwlink/?LinkID=238178)。有关如何手动从 MVC 2 升级到 MVC3 的信息，请参阅[将 ASP.NET MVC 2 项目升级到 ASP.NET MVC 3 工具更新](http://go.microsoft.com/fwlink/?LinkID=238179)。如果您的项目以带有 SP1 的 .NET Framework 3.5 为目标，则必须重新定位您的项目以使用 .NET Framework 4。