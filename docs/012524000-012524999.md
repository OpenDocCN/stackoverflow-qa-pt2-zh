# StackOverflow 问答 12524000-12524999

# php - 如何检查电子邮件中是否存在php

> ID：12524000
> 
> 赞同：0
> 
> 时间：2012-09-21T03:51:29.227
> 
> 标签：php, email

> **可能重复：**
> [如何检查电子邮件是否有效？](https://stackoverflow.com/questions/3470373/how-to-check-if-the-email-is-valid)

*   我们如何检查验证电子邮件？
*   我们如何检查电子邮件地址是否真的存在于php中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:27:34.157

```
filter_var('test@test.com', FILTER_VALIDATE_EMAIL) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T04:05:52.613

验证电子邮件的简单方法只需使用 type="email"

例子

```
<form>
    <input type="email" name="email">
    <input type="submit" name="submit">
</form> 
```

# sql - cakephp新品通知系统

> ID：12524003
> 
> 赞同：4
> 
> 时间：2012-09-21T03:51:58.397
> 
> 标签：sql, cakephp

我正在尝试创建一个 cakephp 网站，该网站有一个通知系统，当人们登录他们有多少新项目时会告诉他们。

目前，每次访问者登录该站点时，我都会记录该站点，但是我不确定如何在查找中将日期/时间戳相互比较。

查找应该做的是返回与之前的人相比具有更新时间戳的所有数据 loggedIn.created

我不确定如何编写代码/只是想弄清楚如何编写代码的概念。任何帮助或方向将不胜感激。

为了使这个简单

`user hasMany logIns`

```
logIns belongsTo user 
```

一种`user hasMany Invoices`

```
Invoices belongTo user

user has id, name, account_id

loggedin has id, created, user_id

invoice has id, sender, receiver, created, account_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:10:42.293

您可以将普通比较运算符 < 和 > 用于日期和日期时间。

*   > 表示“之后”
*   < 表示“之前”

要在 CakePHP 控制器中查找在登录日期之后创建的发票，您可以编写例如：

```
$previous_login = '2012-09-20'; # obtain from somewhere
$new_invoices = $this->Invoice->find('all', array(
    # "created after previous login"
    'conditions' => array('created >' => $previos_login)
)); 
```

# java - 用equals方法和==比较字符串

> ID：12524005
> 
> 赞同：2
> 
> 时间：2012-09-21T03:52:26.187
> 
> 标签：java

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)
> [Java String.equals 与 ==](https://stackoverflow.com/questions/767372/java-string-equals-versus)

我是 Java 编程新手，我对比较字符串和 `equals`方法有一个小问题`==`

示例 1：从用户获取输入时不起作用，但如果它已设置初始值，则它可以正常工作。

```
if(str1 == str2) 
 System.out.println("equal"); 
```

示例 2：始终有效

```
if(str1.equals(str2))
 System.out.println("equal"); 
```

如果我必须比较可以使用哪个命令的字符串。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T03:53:41.853

[字符串文字](http://docs.oracle.com/javase/tutorial/essential/regex/literals.html)指向相同的位置/值，这就是为什么 == 在字符串文字上有效

当您从用户那里获得输入时，它将被视为新的 String 对象。

`equals()`检查值是否相等，同时`==`检查引用是否相等。

# .net - 在不同的操作系统中使用 vb.net 应用程序时出现错误

> ID：12524010
> 
> 赞同：0
> 
> 时间：2012-09-21T03:53:32.453
> 
> 标签：.net, registry

在 XP 操作系统上使用 .net 应用程序，在操作系统更改为 Windows 7 之前一切正常。起初出现错误“检索具有 CLSID {4E084A82-8FE7-11D0-9125-0004AC3617E1} 的组件的 COM 类工厂失败由于以下错误：80040154”。我检查了注册表，但缺少 reg 文件，所以我输入了文件。

但现在又出现了一个新错误，即“System.Runtime.InteropServices.COMException (0x80020009)：发生异常。（来自 HRESULT 的异常：0x80020009 (DISP_E_EXCEPTION)）”。

该应用程序将连接到 IBM peak 系统并从那里运行一些宏。

请给我建议，因为我已经研究了很长时间，这让我很头疼。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T03:59:10.123

您确定没有某种先决条件安装可以在 XP 机器上运行吗？看起来该应用程序可能具有对 Windows 7 机器上不存在的 COM iterop 的引用。我建议启动 Visual Studio 并检查项目中包含哪些引用。您可能安装了一些东西来支持部署必要的 COM 组件的 IBM peak 系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T03:55:32.210

您的应用程序是否编译为“任何 CPU”？您的 Windows 7 64 位和 XP 可能正在运行 32 位，这可能会对 COM 对象造成严重破坏。

# ios - 让用户在 iOS 6 中选择谷歌地图和苹果地图？

> ID：12524012
> 
> 赞同：4
> 
> 时间：2012-09-21T03:54:15.243
> 
> 标签：ios, google-maps, mapkit, ios6, ios6-maps

我在我的 iOS 应用程序中使用基本的 MapKit 功能。

有没有办法让我的 iOS 6 用户在我的应用程序中显示的地图数据在 Google 和 Apple 地图之间进行选择？如果是这样，我该如何以编程方式执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T06:57:50.360

不。

您可以让用户使用 route me（在 github 上）在 iOS 地图和其他地图（OpenStreetMap、Microsoft VirtualEarth、CloudMade、OpenAerialMap、OpenCycleMap、SpatialCloud、TileStream7）之间进行选择，或者您可以使用 Bing 地图（也是可用的库）。

但是您必须为不同的库编写代码，因为 MapKit 框架仅适用于 iOS 6 中的 Apple 地图。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T19:10:02.367

[ClassicMap](https://github.com/kishikawakatsumi/ClassicMap) (GitHub) 完全符合您的要求。示例项目展示了如何将 Google 地图叠加层添加到 MapKit 以及如何在 Google 和 Apple 地图之间切换。

它运作良好，但缩放级别似乎仅限于 Apple 的数据（我很确定 Google 地图中的最大缩放比例更高，至少在我居住的地方）。

# syntax - 什么时候必须用逗号分隔结果？

> ID：12524018
> 
> 赞同：1
> 
> 时间：2012-09-21T03:54:35.307
> 
> 标签：syntax, xquery

事情是这样的……我有一个疑问：

```
for $item in doc("order.xml")//item 
$name:= doc("catalog.xml")//product[number = $item/@num]/name 
return <item num="{$item/@num" (: a1 :)
    name="{$name}"             (: a2 :)
    quan="{$item/@quantity}"/> (: a3 :) 
```

....没有逗号，对吧？后来，它说“如果后面的逗号`firstresult`不存在，那将是一个语法错误，因为查询正文中会有两个单独的表达式”，关于不同的查询：

```
declare boundary-space preserve;
declare namespace prod = "http://datypic.com/prod";
declare variable $catalog := doc("catalog.xml")//catalog;

<firstResult>{count($catalog/product)}</firstResult>               (: b1 :)
<prod:secondResult>{$catalog/product/number}</prod:secondResult>   (: b2 :) 
```

“独立查询”（b1 和 b2）和“同一查询的不同部分”（a1、a2 和 a3）之间的界线在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:19:58.990

嗯，就是这样……

(a1, a2, a3) 是单个元素节点，但跨越多行（这是允许的！）

另一方面 (b1, b2) 是两个独立的元素节点，并且要制作一个序列，您需要放置一个逗号

# java - Java Web App 不会在 Cloud Foundry 中启动

> ID：12524023
> 
> 赞同：1
> 
> 时间：2012-09-21T03:55:49.900
> 
> 标签：java, web, cloud-foundry

我正在尝试在 Cloud Foundry 中部署 Java Web 应用程序。它无法启动。当我在本地部署它时，它会启动。当我在本地展开战争并将整个 tomcat 目录作为 Java 独立应用程序上传时，它也会启动并工作。我从日志中看到它已启动，但执行 vmc apps 命令时状态未知。访问 URL 时出现 404。

有任何想法吗？

# php - 内联框架与 AJAX 。

> ID：12524032
> 
> 赞同：0
> 
> 时间：2012-09-21T03:57:03.477
> 
> 标签：php, html, ajax

我是 Web 开发的新手，我是使用 PHP/MySQL 创建一个与涉及图像的谜题相关的测验网站。一个典型的问题是给定一系列相关图像，从选项中给定的 5 张图像中，下一个系列中最合适的图像是什么。

现在转到下一个问题，我不想刷新整个页面，但只有包含问题的部分必须更改。由于问题涉及多个图像，使用 AJAX 会导致图像加载缓慢还是我使用内联框架来包含问题更好。？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T03:59:39.493

您不应该使用 AJAX 自己加载图像。您只需更新图像文件的 URL，其余的由浏览器完成。

使用 AJAX 更新问题文本。

# haskell - 查找作为类型类实例的所有类型

> ID：12524034
> 
> 赞同：18
> 
> 时间：2012-09-21T03:57:26.727
> 
> 标签：haskell, types, typeclass, ghci

learnyouahaskell[提到以下内容](http://learnyouahaskell.com/types-and-typeclasses#typeclasses-101)：

Enum 类中的类型是

```
(), Bool, Char, Ordering, Int, Integer, Float and Double 
```

有没有办法在 GHCi 中找到哪些类型是哪个类型类的实例，反之亦然？

我想要`:t`我们在 GHCi 中使用的类似的东西来查找表达式的类型。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-21T04:03:42.097

当然。

对于类型类：

```
Prelude> :i Enum
class Enum a where
  succ :: a -> a
  pred :: a -> a
  toEnum :: Int -> a
  fromEnum :: a -> Int
  enumFrom :: a -> [a]
  enumFromThen :: a -> a -> [a]
  enumFromTo :: a -> a -> [a]
  enumFromThenTo :: a -> a -> a -> [a]
    -- Defined in `GHC.Enum'
instance Enum Ordering -- Defined in `GHC.Enum'
instance Enum Integer -- Defined in `GHC.Enum'
instance Enum Int -- Defined in `GHC.Enum'
instance Enum Char -- Defined in `GHC.Enum'
instance Enum Bool -- Defined in `GHC.Enum'
instance Enum () -- Defined in `GHC.Enum'
instance Enum Float -- Defined in `GHC.Float'
instance Enum Double -- Defined in `GHC.Float' 
```

对于一个类型：

```
Prelude> :i Integer
data Integer
  = integer-gmp:GHC.Integer.Type.S# GHC.Prim.Int#
  | integer-gmp:GHC.Integer.Type.J# GHC.Prim.Int# GHC.Prim.ByteArray#
    -- Defined in `integer-gmp:GHC.Integer.Type'
instance Enum Integer -- Defined in `GHC.Enum'
instance Eq Integer -- Defined in `integer-gmp:GHC.Integer.Type'
instance Integral Integer -- Defined in `GHC.Real'
instance Num Integer -- Defined in `GHC.Num'
instance Ord Integer -- Defined in `integer-gmp:GHC.Integer.Type'
instance Read Integer -- Defined in `GHC.Read'
instance Real Integer -- Defined in `GHC.Real'
instance Show Integer -- Defined in `GHC.Show'
instance Ix Integer -- Defined in `GHC.Arr' 
```

不幸的是，这仅限于标识符，而不是表达式。因此，您无法查找例如`[Char]`直接应用于类型的实例。

另外，请注意，它只会显示范围内的实例和类型，因此您可能需要导入您感兴趣的内容。

# php - 如何将 Asterisk 服务器与外部关系数据库（如 mysql）集成？

> ID：12524035
> 
> 赞同：2
> 
> 时间：2012-09-21T03:57:32.583
> 
> 标签：php, mysql, sip, asterisk, agi

我的目标：客户端（SIP电话，我使用3CX电话）拨号到星号服务器，星号然后连接外部关系数据库（与星号服务器不在同一个地方），如果数据库有响应，星号服务器播放语音文件（预定义的 .gsm 文件）响应客户端。

我已经拥有的：我在 VirtualBox 中安装了 AsteriskNow 作为星号服务器，客户端正在使用软电话与 SIP 通道中的 Asterisk 服务器连接。当客户端拨号到星号服务器时，服务器可以执行拨号方案。

我的问题：如果我想要星号服务器建立与外部数据库的连接，例如 MySQL。并访问请求数据，我是否需要***让拨号计划调用 AGI 脚本***来做到这一点？如果是这样，在 PHP 中使用创建 AGI 脚本更容易实现吗？如果没有，连接mysql应该怎么做？使用 ODBC？

是否可以使用拨号方案而不使用其他编程语言来操作星号服务器中的数据？但是似乎 dialplan 没有像其他编程语言那样完整的语法支持？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T04:45:08.807

您可以`ODBC`在星号上使用。即使您可以将星号连接到`Microsoft SQL Server`. 如果您想将日志数据保存在星号上，您可以使用`CEL`，或者`CDR`您可以通过 接收事件`AMI`。但是如果您想强制星号执行特殊任务（动态），最好使用`AGI`. 我希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:40:08.860

Asterisk 可以使用 MySQL 或其他数据库来存储帐单信息，但对于您的任务——播放各种副文件，您应该使用 AGI。AGI 非常灵活，因为您可以使用所需的各种语言和库。我将 Python 用于我的 AGI 脚本，但其他人使用 C、Perl、Java。您可以在 Asterisk wiki 上找到这些语言的示例：[http ://www.voip-info.org/wiki/view/Asterisk+AGI](http://www.voip-info.org/wiki/view/Asterisk+AGI)

当然，您可以从您的 AGI 程序连接到数据库或使用 HTTP/SOAP/REST 与其他软件集成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T14:27:45.953

不，您不需要 AGI 脚本。

最简单的方法是使用 func_odbc（用户通过 odbc 定义的 sql 函数）和拨号方案。

顺便说一句，diallplan 与任何其他编程语言一样是完整的语言。任何事情都只能通过拨号方案来完成。但并非所有事情都有效，需要大量经验。

# php - 有没有更有效的方法来执行此操作而不是使用爆炸/内爆？

> ID：12524037
> 
> 赞同：1
> 
> 时间：2012-09-21T03:57:53.283
> 
> 标签：php, url

这个简单的 PHP 函数接受一个 URL 字符串并返回目录：

```
function getDirFromFilePath($file) {
        $temp = explode('/', $file);
        array_pop($temp);
        return implode('/', $temp);
} 
```

例子：

```
Input:  http://www.domain.com/directory/filename.jpg
Output: http://www.domain.com/directory 
```

只是想知道是否有更有效的方法来执行此操作，也许就像正则表达式一样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T03:59:21.803

您可以只使用[`dirname()`](http://www.php.net/manual/en/function.dirname.php)，它也适用于 URL：

```
dirname('http://www.domain.com/directory/filename.jpg') 
```

# c - 使用 C 中的位运算符查找 x 是否大于 y

> ID：12524038
> 
> 赞同：0
> 
> 时间：2012-09-21T03:58:08.993
> 
> 标签：c, bit-manipulation

如果 x > y，则此函数将返回 1，否则返回 0。

到目前为止我有

```
int isitGreater(int x, int y) {

     return (((y+((~x)+1)) >> 31) & 1); 
```

但它不起作用。

允许的操作：合法操作：！~ & ^ | + << >>

我确定我的逻辑是正确的，如果 X - Y 我得到一个负数，这意味着 y > x ，因此第 32 位是 1，所以我将该位向右移动 31 次，然后“和”它与“1”。

编辑：如果 x 为负数，由于溢出，这不起作用。如何在不使用条件语句的情况下解决此溢出问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T04:19:41.353

你的代码对我来说很好。请提交一个有效的问题。

编辑：如果 x 为 -2147483648，您的算法将无法正常工作，因为 -(-2147483648) （或者，等效地， ~(-2147483648)+1) 溢出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T04:15:01.063

你不能取 2 的补码：-2147483648[0x80000000]。

# php - 使用 AJAX 验证网站是否存在

> ID：12524041
> 
> 赞同：0
> 
> 时间：2012-09-21T03:58:21.147
> 
> 标签：php, jquery

我正在尝试检查是否存在带有 ajax 调用的网站，但我不确定我是否正确。在我的页面上，我点击了一个 URL

```
$("#go").click(function() {
    var url = $("#url").val();
    $.ajax({
        type: "POST",
        url: "/ajax.php",
        data: "url="+url,
        success: function(){
          $("#start").remove();
        },      
        error: function(){
        alert("Bad URL");
        }
    });     
}); 
```

a=然后检查 ajax.php

```
$url = $_POST['url'];

ini_set("default_socket_timeout","05");
set_time_limit(5);
$f=fopen($url,"r");
$r=fread($f,1000);
fclose($f);
if(strlen($r)>1) {
    return true;
} else {
    return false;
} 
```

看来我无论如何都取得了成功......我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:43:26.637

> 看来我无论如何都取得了成功......我错过了什么？

这非常简单。

因为这个原因：

```
// You have no idea what server respond is.
// that is you can't parse that respond
success: function(){
   $("#start").remove();
} 
```

应该是哪个

```
success: function(respond){

   //you don't have to return TRUE in your php
   //you have to echo this one instead
   if ( respond == '1'){
     $("#start").remove();
   } else {
     //handle non-true if you need so
   }
} 
```

在 php 中替换这个：

```
if(strlen($r)>1) {
    return true;
} else {
    return false;
} 
```

至

```
if(strlen($r)>1) {
    print true; //by the way, TRUE is a constant and it equals to == 1 (not ===)
} 
```

哦，是的，也不要忘记解决这个问题：

`data: "url="+url`,

至`data : {"url" : url}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T04:06:22.297

正如 Nemoden 所说，即使它返回 false，您也会收到一条成功消息。您需要检查返回的数据，然后删除该元素。

例如

```
$("#go").click(function() {
    var url = $("#url").val();
    $.ajax({
        type: "POST",
        url: "/ajax.php",
        data: "url="+url,
        success: function(response){
          if (response == 'whatever you are returning') {
              $("#start").remove();
          }
        },      
        error: function(){
        alert("Bad URL");
        }
    });     
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T04:01:57.277

只要服务器端脚本返回答案（没有连接错误或服务器端错误），就会调用成功回调。这是在回答你的问题吗？

看到不同：

```
$("#go").click(function() {
    var url = $("#url").val(),
        ajax_data = {url: url};
    $.post({
        "/ajax.php?cb=?",
        ajax_data,
        function(response){
          if (response.status) {
            // URL exists
          }
          else {
            // URL not exists
          }
          $("#start").remove();
        },      
        'json'
    });     
}); 
```

php后端：

```
printf('%s(%s)', $_GET['cb'], json_encode(array('status' => (bool)$url_exists))); 
```

# ruby-on-rails - 在控制器中访问 c urrent_user

> ID：12524042
> 
> 赞同：1
> 
> 时间：2012-09-21T03:58:45.173
> 
> 标签：ruby-on-rails, authentication

我正在尝试访问我的控制器中有关 current_user 的属性。

```
class MatchfinderController < ApplicationController

  def c(value, t_array)
    t_array.min{|a,b|  (value-a).abs <=> (value-b).abs }
  end

  def show 
    peeps = User.find(:all, :conditions => ["id != ?", current_user.id])
    user_a = []

    peeps.each do |user|  
      user_a.push user.rating    
    end

    closest_rating = c(current_user.rating, user_a)

    @opponent = User.find(:all, :conditions => ["id != ? AND rating = ? ", current_user.id, closest_rating])
  end
end 
```

current_user 在视图中工作得很好，但是在控制器中返回 nil。

这是我的 SessionsHelper。

```
module SessionsHelper

  def sign_in(user)
    cookies.permanent[:remember_token] = user.remember_token
    self.current_user = user
  end

  def current_user=(user)
    @current_user = user
  end

  def current_user
    @current_user ||= User.find_by_remember_token(cookies[:remember_token])
  end

  def signed_in?
    !current_user.nil?
  end
end 
```

SessionsHelper 包含在 ApplicationController 中

```
class ApplicationController < ActionController::Base
  protect_from_forgery
  include SessionsHelper
end 
```

这是我的 SessionsController

```
class SessionsController < ApplicationController
  def new
  end

  def create
    user = User.find_by_email(params[:email])
    if user && user.authenticate(params[:password])
      sign_in user
      redirect_to root_url, notice: "Logged in!"
    else
      flash.now.alert = "Email or password is invalid"
      render "new"
    end
  end

  def destroy
    cookies[:remember_token] = nil
    redirect_to root_url, notice: "Logged out!"
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:00:52.427

将您的代码放在应用程序控制器中并将其标记为`helper_method`这样您就可以在两者中使用该`helper`方法`controller`

```
helper_method :current_user

def current_user=(user)
  @current_user = user
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:02:58.967

我认为助手仅适用于视图。试着把它放在你的控制器顶部附近：

`include SessionsHelper`

# java - 更改 ActionBar 文本颜色

> ID：12524049
> 
> 赞同：4
> 
> 时间：2012-09-21T03:59:22.807
> 
> 标签：java, android, android-actionbar, actionbarsherlock

我想将我的 ActionBar 颜色更改为蓝色 (#0c01e3)。我的代码正在工作，因为操作栏背景属性正在完成它的工作。但文字不会改变。有任何想法吗？我正在使用 ABS。

```
<style name="MyActionBar1" parent="Widget.Sherlock.Light.ActionBar.Solid.Inverse">
        <item name="android:backgroundSplit">#06e301</item>
        <item name="android:backgroundStacked">#06e301</item>
        <item name="android:background">#06e301</item>
        <item name="background">#06e301</item>
        <item name="backgroundSplit">#B9001F</item>
        <item name="android:textColor">#0c01e3</item>
        > 
```

![在此处输入图像描述](../Images/6f30ca7c93391555213747da655ee9aa.png)

## 更新

：

![在此处输入图像描述](../Images/57b303db846ec8b8ae67ecda7efb8f55.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-29T05:14:01.533

将此设置在您的`Java`页面中。它适用于我

```
ActionBar ab = getActionBar();    
 ab.setTitle(Html.fromHtml("<font color='#ffffff'>App Name</font>")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:43:06.510

添加这个然后尝试

```
<item name="android:textColor">#ffffff</item> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T05:48:21.353

在主题上，有一个属性`actionItemTextColor`，它控制这个颜色。

`android:`使用 ActionBarSherlock 时，请记住指定带前缀和不带前缀。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-14T20:15:17.637

为了改进@IntelliJ Amiya 的答案：

```
 getActionBar().setTitle(
            Html.fromHtml("<font color='" + getResources().getColor(R.color.my_color) + "'>"
                    + getString(R.string.title_home) + "</font>")); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-15T10:18:21.300

如果您想使用 xml 更改它...这对我有用...

```
<style name="MyActionBar"
    parent="@style/Widget.AppCompat.Light.ActionBar.Solid.Inverse">
    <item name="android:background">@color/titleBarBgColor</item>
    <item name="android:titleTextStyle">@style/EldTheme.ActionBar.TitleTextStyle</item>
    <item name="android:subtitleTextStyle">@style/EldTheme.ActionBar.TitleTextStyle</item>
    <!-- Support library compatibility -->
    <item name="background">@color/titleBarBgColor</item>
    <item name="titleTextStyle">@style/EldTheme.ActionBar.TitleTextStyle</item>
    <item name="subtitleTextStyle">@style/EldTheme.ActionBar.TitleTextStyle</item>
</style>
<style name="EldTheme.ActionBar.TitleTextStyle" parent="@style/TextAppearance.AppCompat.Widget.ActionBar.Title">
    <item name="android:textColor">@color/titleBarTextColor</item>
</style> 
```

# php - 用于清理输入的自定义脚本，包括以下函数 strip_tags() strip_html_tags() trim() 通过测试，即使它们确实失败了

> ID：12524050
> 
> 赞同：1
> 
> 时间：2012-09-21T03:59:31.210
> 
> 标签：php, trim, strip-tags

我正在创建一个比这个小部分更高级的验证脚本，我只是打印我遇到问题的特定部分。

该脚本简单地接收一个带有设置列表的一维数组，执行所需的测试并输出一个带有所需字符串的多维数组，所有这些都干净整洁。

由于某种原因，这些`trim()` `strip_tags()` `strip_html_tags()`功能正在工作但同时失败。我的意思是字符串通过函数传递并显示为干净，但内置的 PHP 函数没有按预期工作。

问题是内置函数是否只适用于直接输出给用户的文本，或者这些函数是否应该在输出前工作，即输出而不是存储在数据库中？

我希望将所有脚本标签剥离为用户输入，因此我只有纯文本。

我想在每个语句中使用一个 switch，我下面的函数是 switch 语句的片段。

我试图使用的东西不能按预期工作。

```
function check_input1($input)
{
    if(trim($input))
    {
        $cleaninput[$i][$input] = 'CLEAN';
    }else
        $cleaninput[$i][$input] = 'DIRTY';
}

function check_input2($input)
{
    if(strip_tags($input))
    {
       $cleaninput[$i][$input] = 'CLEAN';
    }else
       $cleaninput[$i][$input] = 'DIRTY';
}

function check_input3($input)
{
    if(strip_html_tags($input))
    {
       $cleaninput[$i][$input] = 'CLEAN';
    }else
       $cleaninput[$i][$input] = 'DIRTY';
} 
```

我所知道的可以直接在 html 元素中输出。

```
strip_tags(trim($key))
strip_tags(trim($value)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:06:57.183

> 问题是内置函数是否只适用于直接输出给用户的文本，或者这些函数是否应该在输出前工作，即输出而不是存储在数据库中？

有问题的函数适用于任何字符串。发往数据库的字符串与发往 stdout 的字符串没有区别。

您的问题是您似乎期望函数返回真/假，作为某种迹象表明他们*找到*了要剥离的东西。他们不是这样工作的。他们返回修改后的字符串。每个`if`条件都将进入该`CLEAN`部分（假设其函数不返回`""`），并默默地丢弃函数返回的已清理字符串。

你想要的是这样的：

```
function check_input3($input)
{
    $output = strip_html_tags($input);

    if ($output == $input) {
        // strip_html_tags didn't remove anything
        $cleaninput[$i][$input] = 'CLEAN';
    } else {
        // variables differ, so strip_html_tags found something to remove
        $cleaninput[$i][$input] = 'DIRTY';
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T18:05:59.843

对于其他参考，您可能需要考虑由 OWASP 代码资助的用于输入验证的 inspekt php4 和 5 框架。google.com/p/inspekt/wiki/DocsAndSupport 提供了输入和输出之间的防火墙类型场景......这里有一个很好的小教程codediesel.com/php/data-filtering-and-validation-using-inspekt

# javascript - 将db中的时间格式转换为jquery倒计时格式

> ID：12524052
> 
> 赞同：0
> 
> 时间：2012-09-21T03:59:51.273
> 
> 标签：javascript, jquery

我在 db 中有字段包含格式为“2012-09-21 09:25:00”的日期我正在做一个 jquery

倒计时功能，但我需要“2012 年 9 月 21 日星期五 09:25:00 GMT+0530（印度标准时间）”中的日期格式

那么如何将“2012-09-21 09:25:00”转换为“2012 年 9 月 21 日星期五 09:25:00 GMT+0530（印度标准时间）”

使用 jQuery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:06:40.930

单击下面的链接以解决您的问题。希望这可以帮助 ：）

[如何将我从 PHP 获得的时间格式转换为 jQuery 倒计时接受的格式](https://stackoverflow.com/questions/5457941/how-to-convert-a-time-format-that-i-got-from-php-to-a-format-that-jquery-countdo)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T17:39:57.073

您可以尝试以 ISO 格式发送日期。

这段代码可以帮助你

```
$iso_date = date('c', strtotime('2012-09-21 09:25:00')); 
```

希望对您有所帮助。

# css - 改为在 css 中显示图像 图片来源

> ID：12524054
> 
> 赞同：0
> 
> 时间：2012-09-21T04:00:04.297
> 
> 标签：css

我想更换

```
<div><img src="/mod/EmpTheme/free1/img/2843_3_base.png" /></div> 
```

和

```
<div class="tempbtm"></div> 
```

并放

```
.tempbtm { background:url(/mod/EmpTheme/free1/img/2843_3_base.png) left top no-repeat; } 
```

里面的css文件。问题是如果我这样做没有显示图像。

[http://jsfiddle.net/nNw62/1/](http://jsfiddle.net/nNw62/1/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T04:02:11.090

您必须指定容器的宽度和高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:38:49.620

图像尺寸是多少？它可能会显示图像的白色内容，`div`使您认为它不起作用。您的代码是正确的，当我更改图像时它的工作。或者它可能是[目录链接问题。](https://stackoverflow.com/a/8359584/1577396)

# emacs - Emacs 键绑定：（dired）模式覆盖次要模式键映射？

> ID：12524056
> 
> 赞同：4
> 
> 时间：2012-09-21T04:00:23.430
> 
> 标签：emacs, key-bindings

即使遵循 [了 Emacs 中全局覆盖键绑定中](https://stackoverflow.com/questions/683425/globally-override-key-binding-in-emacs)给出的所有内容， 我仍然无法让它工作。

我在我的全局键映射中绑定`M-o`到其他窗口，如下所示：

```
(defvar my-keys-minor-mode-map (make-keymap) "my-keys-minor-mode keymap.")
(define-key my-keys-minor-mode-map "\M-o" 'other-window)

(define-minor-mode my-keys-minor-mode
  "A minor mode so that my key settings override annoying major modes."
  t " my-keys" 'my-keys-minor-mode-map)

(my-keys-minor-mode 1)

(defun my-minibuffer-setup-hook ()
  (my-keys-minor-mode 0))
(add-hook 'minibuffer-setup-hook 'my-minibuffer-setup-hook)

;; Maintain the above keymap even after loading a new library
(defadvice load (after give-my-keybindings-priority)
  "Try to ensure that my keybindings always have priority."
  (if (not (eq (car (car minor-mode-map-alist)) 'my-keys-minor-mode))
      (let ((mykeys (assq 'my-keys-minor-mode minor-mode-map-alist)))
        (assq-delete-all 'my-keys-minor-mode minor-mode-map-alist)
        (add-to-list 'minor-mode-map-alist mykeys))))
(ad-activate 'load) 
```

但是 dired 模式会覆盖它并将其重新映射到`dired-omit-mode`.

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T13:35:52.313

您的次要模式被定义为缓冲区本地。您可以将其定义为全局，如下所示：

```
(define-minor-mode my-keys-minor-mode
  "A minor mode so that my key settings override annoying major modes."
  :global t
  :lighter " my-keys") 
```

但是你`my-minibuffer-setup-hook`也会在全球范围内关闭它。此外，如果它是全局的并且您基本上总是将其打开，您可能更愿意不提供`:lighter " my-keys"`，因此您的模式行不会被不必要地填充。

# powershell - 如何将 Microsoft.Exchange.Common.ScheduleInterval 与日期时间对象进行比较？

> ID：12524058
> 
> 赞同：0
> 
> 时间：2012-09-21T04:00:41.497
> 
> 标签：powershell, exchange-server

我想知道是否有任何 Exchange 数据库计划正在运行，或者将在接下来的几个小时内运行。但是，我不知道如何将 scheduleinterval 对象与我使用 get-date 或 (get-date).addhours(20) 创建的变量进行比较

我正在查看的 scheduleInterval 是

```
C:\>(get-mailboxdatabase | where {$_.name -like 'database'}).maintenanceschedule  | Get-Member

   TypeName: Microsoft.Exchange.Common.ScheduleInterval

Name         MemberType Definition
----         ---------- ----------
CompareTo    Method     int CompareTo(System.Object value), int CompareTo(Microsoft.Exchange.Common.ScheduleInterval...
ConjointWith Method     bool ConjointWith(Microsoft.Exchange.Common.ScheduleInterval other)
Contains     Method     bool Contains(Microsoft.Exchange.Common.WeekDayAndTime dt), bool Contains(System.DateTime dt...
Equals       Method     bool Equals(System.Object obj)
GetHashCode  Method     int GetHashCode()
GetType      Method     type GetType()
Overlaps     Method     bool Overlaps(Microsoft.Exchange.Common.ScheduleInterval other)
ToString     Method     string ToString()
EndDay       Property   System.DayOfWeek EndDay {get;}
EndHour      Property   System.Int32 EndHour {get;}
EndMinute    Property   System.Int32 EndMinute {get;}
EndTime      Property   Microsoft.Exchange.Common.WeekDayAndTime EndTime {get;}
Length       Property   System.TimeSpan Length {get;}
StartDay     Property   System.DayOfWeek StartDay {get;}
StartHour    Property   System.Int32 StartHour {get;}
StartMinute  Property   System.Int32 StartMinute {get;}
StartTime    Property   Microsoft.Exchange.Common.WeekDayAndTime StartTime {get;} 
```

任何帮助深表感谢。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:23:16.207

这是一种测试作业是否以该`Get-Date`值运行的方法。也许可以进行比较`starttime/endtime properties`，`[datetime]`但我无法测试，我只是假设..

```
$a = (get-mailboxdatabase | where {$_.name -like 'database'}).maintenanceschedule
$b = Get-date # you can add days to check events in the future
if ( $a.startday, $a.endday -contains $b.dayofweek)
{
  if ( $a.starthour -le $b.hour -and $a.endhour -ge $b.hour)
  {
    if (  $a.startminute -le $b.minute -and $a.endminute -ge $b.minute)
    {
       Write-Host "Jod scheduled is running at this time!"
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T09:30:30.367

我编写了以下代码将 Microsoft.Exchange.Common.ScheduleInterval 转换为日期时间对象数组。希望有人可以改进我的代码...

```
$schedules=(get-mailboxdatabase|where {$_.name -like "dbname"}).maintenanceschedule 

$curdatetime = get-date
$dowhash = @{"Monday"=1;"Tuesday"=2;"Wednesday"=3;"Thursday"=4; `
             "Friday"=5;"Saturday"=6;"Sunday"=7}
$todaydow = $dowhash.get_item([string]$curdatetime.dayofweek)
$coming = @()

foreach ($schedule in $schedules) {
  $dow = $dowhash.get_item([string]$schedule.startday)
  $start = $curdatetime.adddays((($dow+7-$todaydow) % 7))
  $startstr = "{0:yyyyMMdd}{1:00}{2:00}" `
              -f $start,$schedule.starthour,$schedule.startminute

  $dow = $dowhash.get_item([string]$schedule.endday)
  $end = $curdatetime.adddays((($dow+7-$todaydow) % 7))
  $endstr   = "{0:yyyyMMdd}{1:00}{2:00}" `
              -f $end,$schedule.endhour,$schedule.endminute

  $coming+=,([datetime]::ParseExact($startstr,"yyyyMMddHHmm",$null), `
             [datetime]::ParseExact($endstr,"yyyyMMddHHmm",$null) )
} 
```

谢谢

# jquery - 甚至可以用 jQuery 监听多个 CSS3 AnimationEnd 事件吗？

> ID：12524059
> 
> 赞同：0
> 
> 时间：2012-09-21T04:00:47.527
> 
> 标签：jquery, css, jquery-animate, css-animations

我有一个棘手的 CSS3 动画问题，我什至不知道如何解决

有 <#box> 应用了 css3 动画。当这个动画结束时，一个新的 webkitAnimationEnd 事件将一个新的类添加到 <#box> 来触发第二个动画，当这个第二个动画结束时，另一个 webkitAnimationEnd 事件将另一个类添加到 <#box> 来触发第三个动画，依此类推等等...

这是我到目前为止所拥有的。我不知道如何为不同的动画应用多个事件侦听器 - [http://jsfiddle.net/lesballard/uFbUj/15/](http://jsfiddle.net/lesballard/uFbUj/15/)

这甚至可能吗？（对不起这里的菜鸟）

提前谢谢-Les

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T13:06:22.577

也不可能订阅仅由特定 css 类定义的动画触发的侦听器，也不是必需的。

您只需要一个事件侦听器，它在触发时会删除当前类并添加另一个类。

这可以通过一个简单的队列机制来完成，您所需要的只是一个类名数组，以及一个在动画结束事件触发时增加/减少的索引。

[http://jsfiddle.net/uFbUj/26/](http://jsfiddle.net/uFbUj/26/)

# debugging - 如果我忘记使用右大括号'}'关闭左大括号'{'，为什么TCL会给我一个错误

> ID：12524065
> 
> 赞同：1
> 
> 时间：2012-09-21T04:01:57.810
> 
> 标签：debugging, tcl

好吧，我对 tcl 没有太多经验，但是当我今天突然写几个测试用例时，编译器一直说**Missing '}'** 我不得不经历至少 50 到 60 个大括号对以确保一切都是正确的，在这个错误上花了大约 1.5 小时后，发现我忘记用**'}'**结束我的评论真的很恼火， 所以以下是我评论中的代码

```
#test XmlDAOTest-1.15 {Test XmlDAO - method - 'ProcessCDATASectionNode'\ 
```

因此，如果您看到，我已经注释了该行并且我没有用'}'关闭它，因为不应该编译注释并检查语法，只有在我在'\'之后附加'}'之后编译器给出我的结果。我正在使用以下

```
IDE - Eclipse Indigo  Version of Tcl - Tcl/Tk 8.5 with tclOO  

Version: Indigo Service Release 2  Tcltest, tDom all included 

Build id: 20120216-1857 
```

我想知道这是 IDE 方面的缺陷还是 TCL/Tk 固有的缺陷，如果它是 TCL 中的问题，您是否遇到过类似的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:09:45.410

行尾的“\”也是一个继续标记，因此它可能会将下一行拉到注释中。

例如

```
#puts "1";\
puts "2";
puts "3"; 
```

将输出 3 因为第二行被视为注释的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T04:01:24.150

您看到的问题是由于 Tcl，而不是您的 IDE。话虽如此，这不是 Tcl 的“问题”，只是如何解析代码的工件。在 Tcl 中，has 符号仅在可以有效启动命令的位置开始注释，因此，注释需要与其余代码同时解析。由于代码没有“预处理”以删除注释，因此需要平衡引号和大括号。

举例说明为什么以这种方式进行解析：

```
set x #abc 
```

在上一行中，x 的值为`#abc`。如果对评论进行了预处理，则上述内容将转换为 just `set x` ，其余内容将消失。

沿着同样的思路，在另一个地方，许多人被评论所困扰：

```
switch -exact -- $myvalue {
    # this is not a comment
    "a value" { do something }
    "another value { do something }
} 
```

上面的 , `#`,`is`和`a`都是switch case；你也可以这样看（这是同一回事）

```
switch -exact -- $myvalue {
    "#" { this }
    "is" { not } 
    "a" { comment }
    "a value" { do something }
    "another value" { do something }
} 
```

这样做的原因是 switch 语句的内部，它正在寻找 case 值，而不是命令的有效位置。因此，这`#`只是一个与其他任何字符相同的普通字符。

# iphone - 无法通过对 armv7s 的支持更新我现有的应用程序（支持 armv6）？

> ID：12524070
> 
> 赞同：0
> 
> 时间：2012-09-21T04:02:22.743
> 
> 标签：iphone, objective-c, ios, xcode, arm

从 XCode 4.5 开始，我们无法构建一个单一的 IPA，它结合了`armv6`、`armv7`和的支持`armv7s`，那么如何为我的应用程序提供更新以使用 iPhone5 的功能？

因为从文档：

**“您只能扩展您的设备要求。不允许提交对二进制文件的更新以限制您的设备要求。”**

所以我们不能放弃对 armv6 应用程序的支持，但是**由于用户已经为旧应用程序付费**，因此无法启动新应用程序，那么如何更新？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T11:17:43.253

我认为旨在阻止人们下载应用程序，却发现新版本不起作用——这是一个合理的限制。

但是，当您使用 Xcode 4.5 构建时，您会发现可以部署的最低版本是 iOS 4.3。据我所知，没有 armv6 设备可以运行 4.3。并且您无法下载需要比您正在运行的操作系统版本更高的应用程序。

简而言之：您*可以*放弃 armv6 支持。仍在运行这些旧版本的用户不会得到进一步的更新/修复，但它也不会突然停止工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T11:05:45.080

在旧 XCode 中构建 armv6 版本并用于`lipo`合并它们。通过一些摆弄，您可能也可以将 armv6 工具链添加到较新的 XCode 中。[该线程](https://stackoverflow.com/questions/5333490/how-can-we-restore-ppc-ppc64-as-well-as-full-10-4-10-5-sdk-support-to-xcode-4)的一些想法（将 PPC 添加到 Xcode4）可能有用。

# java - URL 中的编码密码损坏

> ID：12524075
> 
> 赞同：0
> 
> 时间：2012-09-21T04:03:02.007
> 
> 标签：java, tomcat, encryption, encoding, struts2

我有一个电子邮件验证系统，它发送一个加密链接供用户点击。我有一个用户告诉我它不起作用，我发现了一个非常奇怪的错误，我无法解释。

这是一个可以正常工作的本地 URL

```
http://localhost/cypher.action?cypher=TphMFuv%2FwcsgLThnU5cWInJFaZPMHeDFFL%2FRRPbbV70%3D 
```

这是不起作用的远程 URL

```
http://remotehost/cypher.action?cypher=TphMFuv%2FwcsgLThnU5cWInJFaZPMHeDFFL%2FRRPbbV70%3D 
```

我的应用程序在 tomcat 服务器上运行 struts2，但我认为这并不重要。在远程请求中，变量 cypher 为空。我不明白为什么。它运行完全相同的代码

干杯

克里斯

**更新**

事实证明，糟糕的日志记录隐藏了真正的问题。问题是在服务器上它得到一个 BadPaddingException

```
javax.crypto.BadPaddingException: Given final block not properly padded
at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
at com.sun.crypto.provider.SunJCE_f.b(DashoA13*..)
at com.sun.crypto.provider.DESCipher.engineDoFinal(DashoA13*..)
at javax.crypto.Cipher.doFinal(DashoA13*..)
at service.DesEncrypterService.decrypt(DesEncrypterService.java:80)
at action.LoginAction.cypherLogin(LoginAction.java:93)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 
```

现在找出为什么在服务器上而不是在本地发生这种情况

**更新**

似乎这是一个类似的问题，因为这个人 [在 Linux 中遇到了 Exception: "Given final block not proper padded"，但它在 Windows 中有效](https://stackoverflow.com/questions/12509363/exception-given-final-block-not-properly-padded-in-linux-but-it-works-in-win)

Linux上的一些编码差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:25:26.143

在设置之前对加密密钥进行 URL 编码。这将避免添加额外的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T12:08:42.740

你的钥匙在两台机器上是不同的。您需要跟踪两台机器上的关键处理，以便查明产生差异的位置。始终检查字节到字节的匹配；字符匹配可能具有欺骗性。例如，不同系统之间的生产线末端可能存在无形的差异。

首先检查传输后收到的内容是否与发送的内容**完全相同**。然后在对序列化的键/参数进行每次处理后将字节转储放入日志中。在主场和客场机器上执行此操作并进行比较。这将确定从“两台机器相同”到“机器之间不同”的变化发生在哪里。这应该查明问题发生的方法或代码部分。重复那段代码中的字节转储，直到问题被隔离。同样，您将需要在两台机器上进行转储，以便您有一个来自家用机器的已知目标来进行比较。

# javascript - 类继承，并要求使用 Coffeescript 来自不同文件的子类

> ID：12524078
> 
> 赞同：3
> 
> 时间：2012-09-21T04:03:37.033
> 
> 标签：javascript, node.js, inheritance, coffeescript

我正在尝试组织我的代码，但遇到未定义的超类的问题。我希望这只是一个加载路径问题，但我无法弄清楚。我正在运行这个：

```
coffee rooms.coffee 
```

**房间.咖啡**

```
Room = require('./rooms/room')

module.exports = class Rooms extends Object
    constructor: ->
        @ 
```

**房间/房间.咖啡**

```
module.exports = class Room
    @Active: require('./active')

    constructor: (@id) ->
        @users = {} 
```

**房间/active.coffee**

```
Room = require('./room')

console.log Room #=> {}

module.exports = class Active extends Room
    constructor: (@id) ->
        @type = "Active"
        super 
```

如果我尝试这样做`new Active`，我会收到以下错误：

```
TypeError: Cannot read property 'constructor' of undefined 
```

`Active`的`super`被列为`undefined`：

```
[Function: Active] __super__: undefined 
```

为什么`Room`未定义？（或者更确切地说，只是一个空对象？）

**更新**

正如下面许多人指出的那样，这是由循环依赖引起的。我最终只是将子类定义放在基类定义中，而不是尝试将它们保存在单独的文件中。像这样的东西：

```
class Room
  constructor: ->
    # ...

  class @Active extends Room
    constructor: ->
      # ...

  class @Inactive extends Room
    constructor: ->
      # ...

active   = new Room.Active
inactive = new Room.Inactive 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:27:35.647

在这种情况下，将代码简化为最原始的部分（同时仍然会看到错误）很有启发性。如果我们去掉需求并去掉大部分代码，我们可以得到这样的结构：

```
class Room
  @foo = "bar"

class Active extends Room

console.log Room.foo 
```

打印：`bar`正如预期的那样。

所以现在让我们尝试更接近原始示例：

```
class Room
  @foo = Active

class Active extends Room

console.log Room.foo 
```

这`undefined`是因为`Active`在定义 Room.foo 时未定义。

最后，让我们看看定义颠倒的情况：

```
class Active extends Room

class Room
  @foo = Active

console.log Room.foo 
```

这会引发错误，因为无法扩展`undefined`.

最后两种情况代表更改原始示例中的要求顺序。基类的定义依赖于它的子类应该会让你的 OOP 警钟开始响起！:)

可能有一种方法可以稍微更改定义以使其工作，但是具有这些相互依赖关系的代码充其量往往是不可维护的。我建议找出一种完全解耦类的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:27:02.193

我不能确定这一点，但我可能遇到过类似的问题 - 这可能与文件*room/* *active.coffee*按字母顺序位于 room/room.coffee 之前的事实有关，因此当加载*active.coffee*文件时**`Active`**类是先看的，room.coffee*还*没有**`Room`**，所以找不到超类。

我通过`-j`在编译时使用运算符解决了这个问题，因此，虽然您的*.coffee*文件很好且有条理，但它们编译成单个*.js*文件，这也有其他优点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:07:51.383

`@Active: require('./active')`删除它，或将它移到其他地方。你有一个循环依赖。当你定义时`room.coffee`，你告诉它`active.coffee`在它可以完成定义之前需要`Room`，并且`active.coffee`需要`Room`，所以`Room`在需要`undefined`时`active.coffee`也是如此。

你应该可以`Room::Active = require('./active')`在最后添加一个，但是我问你为什么首先需要这个 oO

# iphone - CCSpriteBatchNode 和 CCParallaxNode 中精灵的碰撞

> ID：12524082
> 
> 赞同：0
> 
> 时间：2012-09-21T04:04:04.317
> 
> 标签：iphone, xcode, cocos2d-iphone

我有两个精灵，一个添加为 CCSpriteBatchNode 的子节点，另一个添加为 CCParallaxNode 的子节点。有什么方法可以检测它们的碰撞吗？我使用了以下代码。

```
 -(void)CheckCollition:(CCSprite *)Opp_Obs Opponent:(CCSprite *) H_man
{
  // NSLog(@"inside check collision");
CGRect b_rect=[Opp_Obs boundingBox];
CGPoint p_position=[H_man position];

if (CGRectContainsPoint(b_rect,p_position))
{    
    NSLog(@"collision with opponent");

    // Zoom Animation with Points
    CCScaleBy *zzomscal=[CCScaleTo actionWithDuration:.2 scale:.12];
    CCRotateTo * rotLeft = [CCRotateBy actionWithDuration:0.2 angle:360];
    CCCallFunc *ccfun=[CCCallFunc actionWithTarget:self selector:@selector(zoomComplete)];
    CCSequence * zzomseq = [CCSequence actions:zzomscal,rotLeft,ccfun, nil];
    [H_man runAction:zzomseq];
}
else
{
    NSLog(@"no collision");
}

} 
```

但是这里的控制永远不会进入循环。还有其他解决方案吗？任何人请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:48:13.070

设置断点并比较rect和position的值。其中之一可能是零，或者很远。

在后一种情况下，您可能需要先将 bbox 原点和位置转换为世界坐标以便比较它们。当精灵的父母也在移动时就是这种情况（父母位置！= 0,0）。

# android - 安卓发布 gzip

> ID：12524086
> 
> 赞同：6
> 
> 时间：2012-09-21T04:04:13.037
> 
> 标签：android, wcf, gzip

尝试在 Android 项目上实施 gzip 以减少客户端数据费用。所有设备都连接到 WCF Web 服务，IIS 现在按预期将压缩数据发送回设备。现在我需要弄清楚如何回发在 android 设备上修改的 gzipped xml 数据。设备代码如下

```
 httpsURLConnection.setDoInput(true);
     httpsURLConnection.setDoOutput(true);
     httpsURLConnection.setConnectTimeout(TIMEOUT);
     httpsURLConnection.setReadTimeout(TIMEOUT);
     httpsURLConnection.setRequestMethod("POST");
     httpsURLConnection.setRequestProperty("Content-Type", "application/xml");
     httpsURLConnection.setRequestProperty("Content-Encoding", "gzip);
     httpsURLConnection.connect();

     GZIPOutputStream gzipOutputStream = new GZIPOutputStream(new BufferedOutputStream((httpsURLConnection.getOutputStream())));
     gzipOutputStream.write(_xmlText.getBytes());
     gzipOutputStream.flush();
     gzipOutputStream.finish();
     gzipOutputStream.close(); 
```

在网络服务器上运行 Wireshark 会显示 gzip 数据包并解压缩它们以显示来自设备的正确数据。问题是 WCF Web 服务似乎无法识别数据 - 错误是 XmlException - 根级别的数据无效。第 1 行，位置 1。这让我觉得数据仍然是压缩的，WCF 无法处理 gzip——我似乎记得以前读过。然后我是否需要在 .net 中创建一个消息解码器来处理 gzip 压缩？这是否有望在 .net 4.5 中解决？

对这些问题的任何帮助表示赞赏。

# objective-c - 如何在 Xcode 中包含第三方二进制文件？

> ID：12524088
> 
> 赞同：0
> 
> 时间：2012-09-21T04:04:19.260
> 
> 标签：objective-c, xcode, macos, binary

我在这里学习代码 - Mac OS X 上的视频播放器依赖于 MPlayerX： [https](https://bitbucket.org/Tomasen/splayerx/src/) ://bitbucket.org/Tomasen/splayerx/src/ 与 Xcode 中的二进制文件混淆： [https ://bitbucket.org/Tomasen/ splayerx/src/a97f03511dfc/binaries/x86_64](https://bitbucket.org/Tomasen/splayerx/src/a97f03511dfc/binaries/x86_64) 有一个名为 mplayer-mt 的二进制文件（不是 .a 文件，它是可执行文件） Xcode 中如何使用二进制文件？如何导入或如何配置？

这是我的构建失败信息：

> ld /Users/tsung/Library/Developer/Xcode/DerivedData/loss-fqhksenkliuhradvuyhbrddeakha/Build/Products/Debug/loss.app/Contents/MacOS/loss normal x86_64 cd /Users/tsung/works/mac/loss setenv MACOSX_DEPLOYMENT_TARGET 10.8 / Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch x86_64 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8 .sdk -L/Users/tsung/Library/Developer/Xcode/DerivedData/loss-fqhksenkliuhradvuyhbrddeakha/Build/Products/Debug -L/Users/tsung/works/mac/loss/binaries/x86_64/lib -F/Users/tsung /Library/Developer/Xcode/DerivedData/loss-fqhksenkliuhradvuyhbrddeakha/Build/Products/Debug-filelist /Users/tsung/Library/Developer/Xcode/DerivedData/loss-fqhksenkliuhradvuyhbrddeakha/Build/Intermediates/loss.build/Debug/loss。build/Objects-normal/x86_64/loss.LinkFileList -mmacosx-version-min=10.8 -fobjc-link-runtime -framework Cocoa -o /Users/tsung/Library/Developer/Xcode/DerivedData/loss-fqhksenkliuhradvuyhbrddeakha/Build/Products /Debug/loss.app/Contents/MacOS/loss
> 
> 架构 x86_64 的未定义符号：“_MPLog”，引用自：PlayerController.o 中的 -[PlayerController playMedia:] -PlayerController.o 中的[PlayerController playebackStarted] “_OBJC_CLASS_$_CoreController”，引用自：PlayerController.o 中的 objc-class-ref “_OBJC_CLASS_$_PlayList”，引用自：PlayerController.o 中的objc-class-ref “_OBJC_CLASS_$_StoreHandler”，引用自：OSDView.o 中的objc-class-ref “_OBJC_CLASS_$_ssclThread”，引用自：objc-class-ref在 PlayerController.o "_kI386Key" 中，引用自：-[PlayerController setMultiThreadMode:] 在 PlayerController.o "_kKVOPropertyKeyPathAudioDelay" 中，引用自：-[PlayerController setupKVO] 在 PlayerController。o -[PlayerController dealloc] in PlayerController.o "_kKVOPropertyKeyPathAudioInfo"，引用自：-[PlayerController setupKVO] in PlayerController.o -[PlayerController dealloc] in PlayerController.o "_kKVOPropertyKeyPathAudioInfoID"，引用自：-[PlayerController setupKVO] in PlayerController。 o -[PlayerController dealloc] in PlayerController.o "_kKVOPropertyKeyPathCachingPercent"，引用自：-[PlayerController setupKVO] in PlayerController.o -[PlayerController dealloc] in PlayerController.o "_kKVOPropertyKeyPathCurrentTime"，引用自：-[PlayerController setupKVO] in PlayerController。 o -[PlayerController dealloc] 在 PlayerController.o "_kKVOPropertyKeyPathLength" 中，引用自：-[PlayerController setupKVO] in PlayerController.o -[PlayerController dealloc] in PlayerController.o "_kKVOPropertyKeyPathSeekable"，引用自： -[PlayerController setupKVO] in PlayerController.o -[PlayerController dealloc] in PlayerController.o "_kKVOPropertyKeyPathSpeed"，引用自： -[PlayerController setupKVO] in PlayerController.o -[PlayerController dealloc] in PlayerController.o "_kKVOPropertyKeyPathSubDelay"，引用自： -[PlayerController setupKVO] in PlayerController.o -[PlayerController dealloc] in PlayerController.o "_kKVOPropertyKeyPathSubInfo"，引用自： -[PlayerController setupKVO] 在 PlayerController.o -[PlayerController dealloc] 在 PlayerController.o "_kKVOPropertyKeyPathSubScale"，引用自：-[PlayerController setupKVO] in PlayerController.o -[PlayerController dealloc] in PlayerController.o "_kKVOPropertyKeyPathVideoInfo"，引用自：-[PlayerController setupKVO] in PlayerController.o -[PlayerController dealloc] in PlayerController.o" _kKVOPropertyKeyPathVideoInfoID"，引用自：-[PlayerController setupKVO] in PlayerController.o -[PlayerController dealloc] in PlayerController.o "_kMPCPlayStoppedByForceKey"，引用自：-[PlayerController playebackStopped:] in PlayerController.o "_kMPCPlayStoppedTimeKey"，引用自：-[ PlayerController playebackStopped:] 在 PlayerController.o "_kMPCStringMPlayerX" 中，引用自：-[PlayerController init] in PlayerController.o "_kPMValDemuxFFMpeg"，引用自：-[PlayerController playMedia:] in PlayerController.o "_kUDKeyAC3PassThrough"，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController .o "_kUDKeyAPNFuzzy"，引用自：+[PlayerController initialize] in PlayerController.o "_kUDKeyAutoPlayNext"，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playebackStopped:] in PlayerController.o "_kUDKeyAutoResume"，引用自: +[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o "_kUDKeyCacheSize",引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o "_kUDKeyCachingLocal"，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o "_kUDKeyDTSPassThrough "，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o "_kUDKeyEnableMultiThread"，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController init] in PlayerController.o " _kUDKeyFFMpegHandleStream"，引用自：-[PlayerController playMedia:] in PlayerController.o "_kUDKeyForceIndex"，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o "_kUDKeyLetterBoxHeight"，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o "_kUDKeyLetterBoxMode"，引用来自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o "_kUDKeyLetterBoxModeAlt"，引用自：+[PlayerController initialize] in PlayerController.o "_kUDKeyMixToStereoMode"，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o "_kUDKeyOSDAutoHideTime"，引用自：+[OSDView initialize] in OSDView.o -[OSDView initWithFrame:] in OSDView.o "_kUDKeyOSDFontSizeMax"，引用自：+[OSDView initialize] in OSDView.o -[OSDView setStringValue:type:updateTimer:] in OSDView.o " _kUDKeyOSDFontSizeMin"，引用自：+[OSDView initialize] in OSDView.o -[OSDView setStringValue:type:updateTimer:] in OSDView.o "_kUDKeyOSDFrontColor"，引用自：+[OSDView initialize] in OSDView.o -[OSDView initWithFrame: ] 在 OSDView.o "_kUDKeyOverlapSub" 中，引用自：+[PlayerController initialize] 在 PlayerController.o -[PlayerController playMedia:] 在 PlayerController.o "_kUDKeyPlayWhenOpened"，引用自：+[PlayerController initialize] 在 PlayerController。o -[PlayerController playMedia:] in PlayerController.o -[PlayerController playebackStopped:] in PlayerController.o "_kUDKeyPrefer64bitMPlayer"，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController shouldRun64bitMPlayer] in PlayerController.o "_kUDKeyPreferIPV6",引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o "_kUDKeyRtspOverHttp"，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o "_kUDKeySmartSubMatching "，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController。o -[PlayerController playebackStarted] in PlayerController.o "_kUDKeySubFileNameRule"，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o -[PlayerController findFirstMediaFileFromSubFile:] in PlayerController.o "_kUDKeySubFontBorderColor",引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o "_kUDKeySubFontColor"，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o "_kUDKeySubFontPath "，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController init] in PlayerController。o "_kUDKeySubScale"，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o -[PlayerController changeSubScaleBy:] in PlayerController.o -[PlayerController setSubScale:] in PlayerController.o "_kUDKeySubScaleStepValue" ，引用自：+[PlayerController initialize] in PlayerController.o "_kUDKeyTextSubtitleCharsetConfidenceThresh"，引用自：-[PlayerController subConverter:detectedFile:ofCharsetName:confidence:] in PlayerController.o "_kUDKeyTextSubtitleCharsetFallback"，引用自：-[PlayerController subConverter:detectedFile: ofCharsetName:confidence:] 在 PlayerController.o "_kUDKeyTextSubtitleCharsetManual" 中，引用自：-[PlayerController subConverter:detectedFile:ofCharsetName:confidence:] in PlayerController.o "_kUDKeyThreadNum"，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController setMultiThreadMode:] in PlayerController.o "_kUDKeyUseEmbeddedFonts"，引用自：+ PlayerController.o 中的 [PlayerController 初始化] -PlayerController.o 中的 [PlayerController playMedia:] "_kX86_64Key"，引用自：PlayerController.o 中的 -[PlayerController setMultiThreadMode:] ld：未找到架构 x86_64 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）+[PlayerController initialize] in PlayerController.o -[PlayerController setMultiThreadMode:] in PlayerController.o "_kUDKeyUseEmbeddedFonts"，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o "_kX86_64Key"，引用来自：-[PlayerController setMultiThreadMode:] in PlayerController.o ld：未找到体系结构 x86_64 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）+[PlayerController initialize] in PlayerController.o -[PlayerController setMultiThreadMode:] in PlayerController.o "_kUDKeyUseEmbeddedFonts"，引用自：+[PlayerController initialize] in PlayerController.o -[PlayerController playMedia:] in PlayerController.o "_kX86_64Key"，引用来自：-[PlayerController setMultiThreadMode:] in PlayerController.o ld：未找到体系结构 x86_64 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）o “_kX86_64Key”，引用自：-[PlayerController setMultiThreadMode:] in PlayerController.o ld：未找到架构 x86_64 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）o “_kX86_64Key”，引用自：-[PlayerController setMultiThreadMode:] in PlayerController.o ld：未找到架构 x86_64 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:29:49.897

您的链接器已失败，并且链接器与可在 XCode 之外直接执行的文件没有任何关系。至少据我所知。

相反，您是否尝试将库中的 .dylib 文件包含在您的 xcode 构建中？在本地下载它们，然后使用“Build Phases”选项卡的“Link Binary With Libraries”部分，使用加号按钮将它们添加到您当前的项目中。

如果您以前没有这样做过，则必须单击左侧窗口中的目标以找到这些项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T06:44:49.160

发现 SPlayerX 的作者用参数启动二进制文件，但没有嵌入。如果您有兴趣，请在此处查看：[PlayerCore.m](https://bitbucket.org/Tomasen/splayerx/src/a97f03511dfc/SPlayerX/PlayerCore.m)

# sql-server-2008 - 如何过滤一列中的部分数据

> ID：12524091
> 
> 赞同：-2
> 
> 时间：2012-09-21T04:04:58.587
> 
> 标签：sql-server-2008

我希望你们能帮助我解决我的问题。我正在使用我的 sql 数据库 2008。我必须从包含这么多数据的一列中获取部分数据。事情是这样的。在具有如此多代码（AO9，E86.1 E10.1）的finaldiagcode列中，我需要获取与E10.1匹配的数据

我试图在我的查询中使用 [] 但它不起作用。

谢谢你，希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:20:07.923

```
select finaldiagcode from yourtable where finaldiagcode like 'E10.1%' 
```

# forms - 在 Qt 中显示另一个表单时禁用一个表单

> ID：12524092
> 
> 赞同：1
> 
> 时间：2012-09-21T04:05:04.390
> 
> 标签：forms, qt

我希望主窗体在显示辅助窗体时禁用 selft。我知道我可以使用`this->setEnabled = false;`，但我怎么知道辅助表单何时关闭？（重新启用主窗体）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:19:54.940

主要小部件

```
QChildWidget *child = new QChildWidget();
connect(child,SIGNAL(closed()),this,SLOT(childClosed())); //connect child signal to childClosed slot
child->show(); // show child
this->setEnabled(false); // disable main widget

.
.
.
public QMainWidget::childClosed() // implementation of childClosed slot
{
    this->setEnabled(true);
}

child widget

#include <QCloseEvent>
public QChildWidget: public QWidget
{
.
.
.
protected:
      void closeEvent() // it is called when widget is closed
      {
          emit closed();
      }
signals:
        void closed(); // closed signal
}; 
```

# android - 如何隐藏活动？

> ID：12524098
> 
> 赞同：4
> 
> 时间：2012-09-21T04:05:55.653
> 
> 标签：android, android-activity, notifications, progressdialog

我有下载正在进行的文件对话框的活动。当用户按下“隐藏”按钮时，活动会创建通知并隐藏进度对话框。当用户点击通知时，活动再次在活动中显示进度对话框。按下“返回”按钮后，如何将活动切换到返回任务？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-22T23:36:15.850

如果您不破坏活动，则必须将活动启动模式设置为`single_instance`并用于`moveTaskToBack(true)`发送到后台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T04:19:40.597

您需要做的是调用从堆栈`finish()`中删除。`Activity`然后在您的通知中，设置`Activity`单击它时要调用的名称，如下所示：

```
NotificationManager notificationManager = (NotificationManager) getSystemService(NOTIFICATION_SERVICE); 
Notification notification = new Notification(R.drawable.icon,
  "A new notification", System.currentTimeMillis());
// Specify the called Activity
Intent intent = new Intent(this, YourActivityName.class);
intent.putBoolean("isDownloading", true); // check this value in Activity
PendingIntent activity = PendingIntent.getActivity(this, 0, intent, 0);
notification.setLatestEventInfo(this, "This is the title",
  "This is the text", activity);
notificationManager.notify(0, notification); 
```

# linux - 检查括号是否嵌套的正则表达式

> ID：12524104
> 
> 赞同：2
> 
> 时间：2012-09-21T04:06:46.527
> 
> 标签：linux, perl, sed

我有大量文件，其中包含带有匹配大括号的行。我*不在乎*括号是否匹配。

我想检查是否有任何大括号嵌套，通过检查在左括号之后哪个先出现 - 一个右括号或另一个左括号。我假设所有括号都匹配，并且每行最多有一个外括号。（即，`[foo[bar]]`是一个有效的行，`[foo][bar]`不是，因为第二个括号对没有嵌套）。

我可以使用[这个问题](https://stackoverflow.com/questions/905180/how-to-find-text-within-in-sed)从括号对中获取所有内容`'s/.*\[\([^]]*\)\].*/\1/g'`，但我不确定如何重新测试抓取的字符串以进行进一步匹配。

例如，给定以下字符串：

```
foo [ bar, [baz] ] 
```

我认为我会采取的步骤是：

1.  从左侧遍历，直到我看到一个左括号。（如果没有找到，忽略该行）。
2.  从左大括号开始进行非贪婪搜索，直到遇到`[`或。`]`如果`[`，括号是嵌套的，所以返回该行。如果`]`,

理想情况下，我想要一个`sed`基于或 unix-tool 的解决方案，但其他解决方案是可以接受的（`perl`例如）。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:40:00.437

使用递归正则表达式检查括号是否匹配并且它们是嵌套的。没有语法检查就检查嵌套是没有意义的，因为这可能会破坏检查结果。例如：

```
my $regex = qr/\[([^\[\]]+?|(??{$regex}))*\]/;
if( $line =~ /^[^\[\]]*\[$regex\][^\[\]]*$/ ) #Valid 
```

![递归正则表达式](../Images/d7c552a73551b04f864a9bd5f6ec7985.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:04:10.103

```
perl -ne 'print if /\[[^\]]*\[/' your_file 
```

测试如下：

```
> cat temp
foo [ bar, [baz] ]
foo [ bar, baz ]
foo [ bar ]
foo [ bar, baz] ]
foo  bar, [baz] ]
> perl -ne 'print if /\[.*\[/' temp
foo [ bar, [baz] ]
> 
```

# vb.net - 如何在不安装 2003 office web 的情况下使用 Modi

> ID：12524110
> 
> 赞同：1
> 
> 时间：2012-09-21T04:07:30.117
> 
> 标签：vb.net, dll, modi

我使用 modi 进行 OCR。

然后我想在我的网络服务器上安装相同的程序。显然，您不能在 hostgator 主机上安装 microsoft 2003。

问题当然是程序需要引用modi.dll。

我在这里看到了几个文件：

Interop.MODI.dll（这个文件到底是什么包装器）？MDIVWCTL.DLL 这似乎是真正的 .dll

在我的程序中，如果我尝试添加对 mdivwctl.dll 的引用，则会收到此错误：无法添加对“D:\business\shared\dropbox\Dropbox\badgers\dotNet\Thumbnailer\WebApplication1\MDIVWCTL.DLL”的引用。请确保该文件是可访问的，并且它是一个有效的程序集或 COM 组件。

我的程序员可以添加它，但只能在他的计算机中添加。

基本上我希望 dll 自行运行而无需注册等。

如何做到这一点？如何使用 asp 将程序上传到 windows 共享主机？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:23:14.147

我有一个使用 MODI 进行 OCR 的基于桌面的应用程序。在 4 个月前写申请时，我对这个领域做了一些很好的研究。一段时间后我放弃了，只安装了免费的 Sharepoint 2007，其中包括`MDIVWCTL.DLL`. 您似乎不太可能超过程序集的要求，它可能引用了其他组件。

# ruby-on-rails - ActiveRecord 验证不适用于自定义属性分配方法

> ID：12524111
> 
> 赞同：0
> 
> 时间：2012-09-21T04:07:49.350
> 
> 标签：ruby-on-rails, validation, activerecord

我正在开发一个具有两因素身份验证的 Rails 应用程序。这个应用程序中的`User`模型有一个属性，`two_factor_phone_number`. 我让模型在保存模型之前验证此属性是否存在。

为了确保电话号码以正确的格式保存，我创建了一个自定义属性分配方法，如下所示：

```
def two_factor_phone_number=(num)
  num.gsub!(/\D/, '') if num.is_a?(String)
  self[:two_factor_phone_number] = num.to_i
end 
```

我正在做一些验收测试，我发现如果此方法在模型中，则 ActiveRecord 验证将被忽略/跳过，并且可以在没有`two_factor_phone_number`集合的情况下创建新模型。

模型代码如下所示：

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable, :confirmable,
        :recoverable, :rememberable, :trackable, :validatable,
        :lockable

  attr_accessible :email, :password, :password_confirmation, :remember_me,
                  :first_name, :last_name, :two_factor_phone_number

  validates :first_name,              presence: true
  validates :last_name,               presence: true
  validates :two_factor_phone_number, presence: true

  # Removes all non-digit characters from a phone number and saves it
  #
  # num - the number to be saved
  #
  # Returns the digit-only phone number
    def two_factor_phone_number=(num)
      num.gsub!(/\D/, '') if num.is_a?(String)
      self[:two_factor_phone_number] = num.to_i
    end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:29:34.010

您可以添加格式验证：

```
validates :two_factor_phone_number, :format => { :with => /[0-9]/,
:message => "Only digits allowed" } 
```

和/或创建另一种方法来设置此属性并在验证之前调用它

```
before_validation :update_phone_format

def update_phone_format
 ...
end 
```

# python - 从三个网页中获取一个 Json 对象并将其写入文件？

> ID：12524113
> 
> 赞同：1
> 
> 时间：2012-09-21T04:07:56.613
> 
> 标签：python, json

我正在尝试编写一个 python 脚本，该脚本将从网页中获取一个 json 对象并将其写入一个平面文件。平面文件中有十行和三个网页。我在各种在线资源的帮助下找到了这段代码：

```
#!/usr/bin/python

import requests
import simplejson

r = requests.get('https://github.com/timeline.json')
c = r.content
j = simplejson.loads(c)

for item in j:
    print item['repository']['name'] 
```

此代码从 github 时间线事件返回 json 对象。返回的 json 对象被解析并打印为字典。我想知道这是一个好方法还是有更好的方法来做到这一点？

另外，有没有办法将 json 对象发送到 python 脚本，该脚本将使用来自网页的输入更新平面文件？

PS 平面文件是包含没有结构化关系的记录的数据文件。带有数据的普通 .txt 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:30:49.880

`requests`可以为您解码 json 文本：

```
#!/usr/bin/env python
import requests

r = requests.get('https://github.com/timeline.json')
for item in r.json or []:
    print item['repository']['name'] 
```

# uiinterfaceorientation - 在 iOS 6 中禁用人像界面

> ID：12524120
> 
> 赞同：2
> 
> 时间：2012-09-21T04:09:19.743
> 
> 标签：uiinterfaceorientation, ios6

在我的 UIViewController

```
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
}

-(BOOL) shouldAutorotate {
    return NO;
} 
```

我应该只支持 iOS 6 中的横向方向。但它不起作用。它仍然可以自动旋转。

如何修复在 iOS 6 中禁用自动旋转？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T04:18:19.733

找到了解决方案。

我正在使用带有 UINavigationController 的 viewcontroller。所以，我需要更改 UINavigationController 中的supportedInterfaceOrientations。

```
@interface UINavigationController (autorotate)

@end

@implementation UINavigationController (autorotate)

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskLandscape;
}

-(BOOL) shouldAutorotate {
    return YES;
}

@end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T22:03:25.293

如果您的整个应用程序只支持横向，您可以跳过子类并在 Info.plist 中将支持的界面方向设置为横向（左）和横向（右）

# java - JProgressbar：如何根据进度改变颜色？

> ID：12524121
> 
> 赞同：4
> 
> 时间：2012-09-21T04:09:22.333
> 
> 标签：java, swing, netbeans, colors, jprogressbar

是否可以根据进度值更改条形颜色？我尝试了以下方法，但它不起作用：

```
percentUsed = (int)(((float) used / (float) max) * BAR_PERCENTAGE);
      if (percentUsed >= ORANGE_THRESHOLD &&  percentUsed < RED_THRESHOLD) {
        if (!m_orangeIndicator) {
          LOG.warn(String.format("Memory usage exceeds %d percent.", ORANGE_THRESHOLD));
          m_orangeIndicator = true;
        }
        colour = Color.ORANGE;
        m_redIndicator = false;
      }
      else if (percentUsed >= RED_THRESHOLD) {
        if (!m_redIndicator) {
          LOG.warn(String.format("Memory usage exceeds %d percent.", RED_THRESHOLD));
          m_orangeIndicator = true;
          m_redIndicator = true;
        }
        colour = Color.RED;
      }
      else {
        m_orangeIndicator = false;
        m_redIndicator = false;
        colour = Color.GREEN;
      }
      m_memUsageBar.setForeground(colour);
      m_memUsageBar.setValue(percentUsed);
      m_memUsageBar.updateUI(); 
```

我猜这不是一件微不足道的事情，因为 JProgressbar 并不意味着以这种方式使用......但是有可能还是有其他选择？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T06:32:01.753

*   此示例的灵感来自：
    *   [http://harmoniccode.blogspot.jp/2011/05/varying-gradients.html](http://harmoniccode.blogspot.jp/2011/05/varying-gradients.html)
    *   [http://java-swing-tips.blogspot.jp/2011/06/gradient-translucent-track-jslider.html](http://java-swing-tips.blogspot.jp/2011/06/gradient-translucent-track-jslider.html)

![在此处输入图像描述](../Images/d2e299136dc109821d9ecb16e1b2196e.png)

```
import java.awt.*;
import java.awt.event.*;
import java.awt.geom.*;
import java.awt.image.*;
import java.beans.*;
import javax.swing.*;
import javax.swing.plaf.basic.*;
import javax.swing.event.*;

public class GradientPalletProgressBarDemo {
  public JComponent makeUI() {
    final JProgressBar progressBar = new JProgressBar();
    progressBar.setOpaque(false);
    progressBar.setUI(new GradientPalletProgressBarUI());

    JPanel p = new JPanel();
    p.add(progressBar);
    p.add(new JButton(new AbstractAction("Start") {
      @Override public void actionPerformed(ActionEvent e) {
        SwingWorker<Void,Void> worker = new SwingWorker<Void,Void>() {
          @Override public Void doInBackground() {
            int current = 0, lengthOfTask = 100;
            while(current<=lengthOfTask && !isCancelled()) {
              try { // dummy task
                Thread.sleep(50);
              } catch(InterruptedException ie) {
                return null;
              }
              setProgress(100 * current / lengthOfTask);
              current++;
            }
            return null;
          }
        };
        worker.addPropertyChangeListener(new ProgressListener(progressBar));
        worker.execute();
      }
    }));
    return p;
  }
  public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
      @Override public void run() {
        createAndShowGUI();
      }
    });
  }
  public static void createAndShowGUI() {
    JFrame frame = new JFrame();
    frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);
    frame.getContentPane().add(new GradientPalletProgressBarDemo().makeUI());
    frame.setSize(320, 240);
    frame.setLocationRelativeTo(null);
    frame.setVisible(true);
  }
}
class ProgressListener implements PropertyChangeListener {
  private final JProgressBar progressBar;
  ProgressListener(JProgressBar progressBar) {
    this.progressBar = progressBar;
    this.progressBar.setValue(0);
  }
  @Override public void propertyChange(PropertyChangeEvent evt) {
    String strPropertyName = evt.getPropertyName();
    if("progress".equals(strPropertyName)) {
      progressBar.setIndeterminate(false);
      int progress = (Integer)evt.getNewValue();
      progressBar.setValue(progress);
    }
  }
}
class GradientPalletProgressBarUI extends BasicProgressBarUI {
  private final int[] pallet;
  public GradientPalletProgressBarUI() {
    super();
    this.pallet = makeGradientPallet();
  }
  private static int[] makeGradientPallet() {
    BufferedImage image = new BufferedImage(100, 1, BufferedImage.TYPE_INT_RGB);
    Graphics2D g2  = image.createGraphics();
    Point2D start  = new Point2D.Float(0f, 0f);
    Point2D end    = new Point2D.Float(99f, 0f);
    float[] dist   = {0.0f, 0.5f, 1.0f};
    Color[] colors = { Color.RED, Color.YELLOW, Color.GREEN };
    g2.setPaint(new LinearGradientPaint(start, end, dist, colors));
    g2.fillRect(0, 0, 100, 1);
    g2.dispose();

    int width  = image.getWidth(null);
    int[] pallet = new int[width];
    PixelGrabber pg = new PixelGrabber(image, 0, 0, width, 1, pallet, 0, width);
    try {
      pg.grabPixels();
    } catch(Exception e) {
      e.printStackTrace();
    }
    return pallet;
  }
  private static Color getColorFromPallet(int[] pallet, float x) {
    if(x < 0.0 || x > 1.0) {
      throw new IllegalArgumentException("Parameter outside of expected range");
    }
    int i = (int)(pallet.length * x);
    int max = pallet.length-1;
    int index = i<0?0:i>max?max:i;
    int pix = pallet[index] & 0x00ffffff | (0x64 << 24);
    return new Color(pix, true);
  }
  @Override public void paintDeterminate(Graphics g, JComponent c) {
    if (!(g instanceof Graphics2D)) {
      return;
    }
    Insets b = progressBar.getInsets(); // area for border
    int barRectWidth  = progressBar.getWidth()  - (b.right + b.left);
    int barRectHeight = progressBar.getHeight() - (b.top + b.bottom);
    if (barRectWidth <= 0 || barRectHeight <= 0) {
      return;
    }
    int cellLength = getCellLength();
    int cellSpacing = getCellSpacing();
    // amount of progress to draw
    int amountFull = getAmountFull(b, barRectWidth, barRectHeight);

    if(progressBar.getOrientation() == JProgressBar.HORIZONTAL) {
      // draw the cells
      float x = amountFull / (float)barRectWidth;
      g.setColor(getColorFromPallet(pallet, x));
      g.fillRect(b.left, b.top, amountFull, barRectHeight);

    } else { // VERTICAL
      //...
    }
    // Deal with possible text painting
    if(progressBar.isStringPainted()) {
      paintString(g, b.left, b.top, barRectWidth, barRectHeight, amountFull, b);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T04:17:27.190

你可以这样做：

```
 UIManager.put("ProgressBar.background", Color.BLACK); //colour of the background    

UIManager.put("ProgressBar.foreground", Color.RED);  //colour of progress bar
    UIManager.put("ProgressBar.selectionBackground",Color.YELLOW);  //colour of percentage counter on black background    
UIManager.put("ProgressBar.selectionForeground",Color.BLUE);  //colour of precentage counter on red background 
```

这里有一个线程。 [设置 JProgressBar 文本的颜色](https://stackoverflow.com/questions/3480125/setting-the-colors-of-a-jprogressbar-text)

此链接也有一个示例演示。 [如何更改颜色进度条](http://www.daniweb.com/software-development/java/threads/315100/how-to-change-color-progressbar)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T11:16:10.960

正如您所注意到的，是否不支持依赖于价值的“进度”绘画。从理论上讲，动态设置 progressBar 实例的前景（即取决于值）是可行的方法。

但是：progressBar 绘制的细节*高度*依赖 LAF

*   在简单的 LAF（如 Metal）中设置前景很好
*   在支持逐实例蒙皮 (fi Nimbus) 的完全可蒙皮 LAF（如基于合成器的 LAF）中，您可以尝试提供使用前景的 Painter
*   在不可剥皮的 LAF 中没有办法（除了覆盖具体的 LAF 并尝试挂钩到绘画代码中）

一些片段：

```
 final JProgressBar bar = new JProgressBar();
    // used for Nimbus (beware: just a proof-of-concept - this looks extremely ugly!)
    Painter p = new Painter() {

        @Override
        public void paint(Graphics2D g, Object object, int width, int height) {
            JProgressBar bar = (JProgressBar) object;
            g.setColor(bar.getForeground());
            g.fillRect(0, 0, width, height);
        }

    };
    // install custom painter on the bar
    UIDefaults properties = new UIDefaults();
    properties.put("ProgressBar[Enabled].foregroundPainter", p);
    bar.putClientProperty("Nimbus.Overrides", properties);

    // simulate progress
    Action action = new AbstractAction("timer") {

        @Override
        public void actionPerformed(ActionEvent e) {
            bar.setValue(bar.getValue() + 1);
            // change foreground value-dependent
            if (bar.getValue() > 10) {
                bar.setForeground(Color.RED);
            }
        }
    };
    Timer timer = new Timer(100, action);
    timer.start(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T23:28:53.257

感谢您的帮助，但通过反复试验，我找到了一种使用现有代码更改颜色的方法。

我不确定它是否是 JPrgressbar 的怪癖，但如果调用执行以下调用，则可以以最少的返工动态更改前景栏颜色：

```
progressBar.setStringPainted(true); 
```

# algorithm - “直方图中最大的矩形”和“水最多的容器”之间的区别

> ID：12524123
> 
> 赞同：6
> 
> 时间：2012-09-21T04:09:36.440
> 
> 标签：algorithm

[http://www.leetcode.com/onlinejudge](http://www.leetcode.com/onlinejudge)

我看不出这两个问题之间的区别。对我来说，这两个问题是相同的，但它们不是。

有人可以给我一些提示来解释它们为什么不同。

谢谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T04:14:28.633

“水容器”解决方案将允许水上升到中间位置以上。对于“最大矩形”问题，矩形不能超过中间条。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T04:13:19.580

“水的容器”问题没有像最大的矩形那样清楚地描述，但是我在一次采访中被问到水的问题。

水的容器基本上是在直方图上的条之间询问最大“山谷”的面积。查看最大矩形示例中的直方图，答案将是“1”，因为该图有两个波谷，左侧是 1x1 波谷，右侧是 1x1 波谷。其中的最大值当然是 1。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T04:39:45.590

它们非常相似。我理解不同之处在于“水容器”将是左墙、右墙和底部（x 轴）（中间的一些线可能很短），它在顶部是开放的。而在“最大矩形”中，构成矩形的所有直方图条都必须到达顶部区域。

# asp.net - 缩短 URL 路由

> ID：12524126
> 
> 赞同：0
> 
> 时间：2012-09-21T04:09:59.567
> 
> 标签：asp.net, url, routing

这是我的样本：

```
routes.MapPageRoute("template1", "{name}/template1", "~/area/template1.aspx")
routes.MapPageRoute("template2", "{name}/template2", "~/area/template2.aspx")
routes.MapPageRoute("template3", "{name}/template3", "~/area/template3.aspx")
...
routes.MapPageRoute("templateN", "{name}/templateN", "~/area/templateN.aspx") 
```

每当我添加一个新模板时，我都需要在我的全局文件中添加一个新的 MapPageRoute 行。

有没有办法缩短它以便它可以代表一切？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:13:25.650

为什么不将所有名称（例如`template1`, `template2`, ...）放入一个数组并循环遍历呢？

基本上，类似：

```
var routes = new [ 'template1', 'template2', 'template3' ];

foreach (var route in routes)
{
    routesMapPageRoute(route, "{name}/" + route, "~/area/" + route + ".aspx");
} 
```

# hibernate - JPA 地图 使用 Hibernate 和 MySQL，枚举键在数据库列中显示为 null

> ID：12524130
> 
> 赞同：2
> 
> 时间：2012-09-21T04:10:43.003
> 
> 标签：hibernate, jpa, map, enums

我正在使用带有枚举键和实体值的 Map。但是，在 MySQL dbs 中创建时，枚举键列始终为空。谁能帮忙解释一下？

```
public enum Type{
    A,B,C
}

@Entity
public class Item{
....
.....
        @ManyToOne
    public Container getContainer() {
        return container;
    }

}

@Entity
public class Container {

....
....
        @OneToMany (mappedBy="container")   // bi-directional relation
    @MapKeyEnumerated(EnumType.STRING) 
    @MapKeyColumn(name="type", length = 20, nullable = true) 
    public Map<Type, Item> getItems() {
        return items;
    }
} 
```

同样对于 MapKeyColumn 注释，我不能使用默认的**nullable=false 。**

非常感谢你的帮助。

# java - 单击透明框架 (Java)

> ID：12524132
> 
> 赞同：2
> 
> 时间：2012-09-21T04:11:05.073
> 
> 标签：java, jframe, transparent, jna

我正在尝试用 Java (Swing) 开发一个应用程序，它可以让我在屏幕上覆盖一个网格，并能够单击网格后面的东西——例如，桌面上的图标。

我会用透明 JFrame 还是透明 JWindow 来解决这个问题？

无论我使用什么，透明窗口/框架都需要

*   始终处于领先地位。
*   占据整个屏幕。
*   使用鼠标侦听器注册每次点击。
*   记录点击在屏幕上的坐标。
*   允许我使用 Graphics 类在屏幕上绘制一个网格，以及其他元素，如数字或图像，也应该单击通过。

任何方向将不胜感激。

如果我不够具体，请道歉，但我还没有找到可以做所有这些事情的演示窗口或框架。这里有一个例子，[这里](https://stackoverflow.com/questions/4167664/ability-to-click-through-a-java-app)有[一个](https://stackoverflow.com/questions/11217660/java-making-a-window-click-through-including-text-images)例子——但我不知道如何在 Eclipse 中使用 WindowUtils。这是我第一次进行 GUI 开发，除了基本的 Java 类之外，我从未使用过外部库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T15:05:47.723

*   在顶部： Frame.setAlwaysOnTop() 应该适合你
*   全屏：将窗口大小设置为显示大小将使其占据整个屏幕
*   事件和叠加绘制：实际行为可能因平台而异，但通常如果您使用 alpha 组件绘制到窗口中，并且窗口名义上是透明的，则那些未绘制的区域（或者有时绘制在某个 alpha 阈值以下的区域） ) 会将事件传递给下面的任何应用程序、窗口或组件。
    如果您捕获事件，则必须将它们重新引入到您下方的任何窗口中，这是非常重要的。如果您不捕获事件，则需要安装特定于操作系统的事件处理程序来捕获感兴趣的事件。

JNA 的 WindowUtils.setWindowTransparent() 应该提供所需的绘制/事件行为，或者您可以使用较新的 JVM 版本中提供的 AWTUtils 等效项。

# ruby - ruby regex - 如何替换字符串中匹配的第 n 个实例

> ID：12524134
> 
> 赞同：6
> 
> 时间：2012-09-21T04:11:22.567
> 
> 标签：ruby, regex

在我的应用程序中，我需要能够找到所有数字子字符串，然后扫描每个子字符串，找到与某个范围（例如 5 到 15 之间）匹配的第一个子字符串，然后用另一个字符串“X”替换那个实例。

我的测试字符串`s = "1 foo 100 bar 10 gee 1"`

我的初始模式是 1 个或多个数字的任何字符串，例如，`re = Regexp.new(/\d+/)`

`matches = s.scan(re)`给`["1", "100", "10", "1"]`

如果我想用“X”替换第 N 个匹配项，并且只有第 N 个匹配项，我该怎么办？

例如，如果我想替换第三个匹配“10”（matches[2]），我不能只说 `s[matches[2]] = "X"`，因为这会替换两个

`"1 foo X0 bar X gee 1"`

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T04:15:31.560

`String#gsub`有一个接受块的形式。它为每个匹配产生块，并用块的结果替换匹配。所以：

```
first = true
"1 foo 100 bar 10 gee 1 12".gsub(/\d+/) do |digits|
  number = digits.to_i
  if number >= 5 && number <= 15 && first
    # do the replacement
    first = false
    'X'
  else
    # don't replace; i.e. replace with itself
    digits
  end
end
# => "1 foo 100 bar X gee 1 12" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-25T14:54:26.300

另一种方法是使用字符类构造数字范围（如果不是太复杂的话）

```
>> s = "1 foo 100 bar 10 gee 1"
=> "1 foo 100 bar 10 gee 1"
>> s.sub(/(?<!\d)([5-9]|1[0-5])(?!\d)/, 'X')
=> "1 foo 100 bar X gee 1" 
```

*   消极的环顾四周确保数字序列的一部分不匹配
    *   如果`\b`数字不能是诸如`abc12ef`或`8foo`
*   `([5-9]|1[0-5])`将匹配从 5 到 15 的数字

最初，标题让我认为您要替换第 N 次出现 - 例如：N=2 表示替换任何数字序列的第二次出现。为此，您可以使用：

```
# here the number inside {} will be N-1
>> s.sub(/(\d+.*?){1}\K\d+/, 'X')
=> "1 foo X bar 10 gee 1" 
```

# php - Code Igniter 的教义 - 无法保存 ManyToOne

> ID：12524136
> 
> 赞同：1
> 
> 时间：2012-09-21T04:11:46.447
> 
> 标签：php, codeigniter, doctrine

我正在尝试将 Code Igniter 与 Doctrine 2 集成。除了我无法保存一个对象的属性外，一切都运行良好。

这是一个引发奇怪错误的小代码片段

```
$account = $this->em->getRepository('Entities\Account')->findOneById($accountId);

$ofx = new \Entities\FinancialRecord();
$a = $accountCatDao->findByPayeeName("PETROCAN", $account);

ofx->setAccount($account);
$ofx->setAmount($b->getAmount());
$ofx->setDatePosted(new DateTime());
$ofx->setDateUser(new DateTime());
$ofx->setPayeeCity($b->getPayeeCity());
$ofx->setPayeeName($b->getPayeeName());
$ofx->setPayeeState($b->getPayeeState());
$ofx->setTransactionId($b->getTransactionId());
$ofx->setTransactionType($b->getTransactionType());

// FOLLOWING LINE CAUSING THE PROBLEM
$ofx->setCategory($a->getCategory());

$this->em->persist($ofx);
$this->em->flush(); 
```

**抛出错误**

```
Fatal error: Uncaught exception 'Doctrine\ORM\Mapping\MappingException' with message 'No mapping file found named 'Proxies.__CG__.Entities.Category.dcm.yml' for class 'Proxies\__CG__\Entities\Category'.' in      /Users/yannlaviolette/Sites/finance/application/libraries/Doctrine/ORM/Mapping/MappingException.php on line 68 
```

（！）

```
Doctrine\ORM\Mapping\MappingException: No mapping file found named 'Proxies.__CG__.Entities.Category.dcm.yml' for class 'Proxies\__CG__\Entities\Category'. in /Users/yannlaviolette/Sites/finance/application/libraries/Doctrine/ORM/Mapping/MappingException.php on line 68 
```

我的映射对象

```
Entities\FinancialRecord:
   type: entity
   table: finance.financial_record
   fields:
      id:
         id: true
         type: bigint
  nullable: false
  generator:
    strategy: SEQUENCE
transactionId:
  type: string
  length: 255
  fixed: false
  nullable: false
  column: transaction_id
transactionType:
  type: string
  length: 10
  fixed: false
  nullable: false
  column: transaction_type
datePosted:
  type: datetimetz
  nullable: false
  column: date_posted
dateUser:
  type: datetimetz
  nullable: false
  column: date_user
payeeName:
  type: string
  length: 255
  fixed: false
  nullable: false
  column: payee_name
payeeCity:
  type: string
  length: 255
  fixed: false
  nullable: false
  column: payee_city
payeeState:
  type: string
  length: 3
  fixed: false
  nullable: false
  column: payee_state
amount:
  type: decimal
  nullable: false
manyToOne:
   category:
      targetEntity: Entities\Category
      cascade: ["persist", "merge"]
    account:
      targetEntity: Entities\Account
      cascade: ["persist", "merge"]
lifecycleCallbacks: {  } 
```

我真的没有想法。在这个问题上花了 2 天时间。有人可以帮我吗？

扬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T12:03:36.417

我在一个项目中有一个 manyToOne 关系。

与您的 yml 文件相比，我看到的唯一区别是我没有将`Entities\Category`其作为 targetEntity，而只是`Category`.

**我的具体实现示例：**

```
manyToOne:
    Order:
        targetEntity: Order
    Product:
        targetEntity: Product 
```

# postgresql - Postgresql：在playframework 1.x中选择两个日期之间的所有数据

> ID：12524140
> 
> 赞同：0
> 
> 时间：2012-09-21T04:11:58.200
> 
> 标签：postgresql, playframework, playframework-1.x

我有一个 postgresql 表，其中的数据连接到日期。每行都有数据和日期，例如：

```
2011-02-03 JOHN 男等

```

我正在使用播放框架。我创建了一个名为 student.java 的模型。

在 application.java 我做了这样的事情，其中​​ firstDate 和 lastdate 由用户给出，

```
List (student studentList) = student.find("timestamp BETWEEN 'firstDate' and 'lastDate'").fetch(); 
```

我想获取这两个日期之间存在的所有数据。

但我知道查询不正确。请帮帮我。

提前致谢。:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T05:44:50.067

```
public static final List<Student> findWithDates(Date firstDate, Date lastDate) {
  return find("from Student student where student.date >= ? and student.date <=?",
              firstDate, lastDate).fetch();
} 
```

# crystal-reports - 如何将主报表组中的公式传递给子报表（水晶报表）

> ID：12524143
> 
> 赞同：0
> 
> 时间：2012-09-21T04:12:14.347
> 
> 标签：crystal-reports

这个关于水晶报表的问题。我有水晶报告，它在组部分有一个公式。我想在水晶报表的底部显示所有生成的组名。所以我将子报表插入到主报表页脚。然后创建一个公式并将其链接到主报表公式。但是运行时，在子报告中，只显示最后生成的组名。如何在报告底部打印所有生成的组名。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:54:22.200

如果我了解您打算做什么，您有几个选择：

*   在报表页脚部分添加一个交叉表 - 这将汇总报表的数据，而无需再次访问数据库
*   将子报告添加到报告页脚部分 - 您将可以更好地控制格式，但需要第二次访问数据库
*   创建一个在打印时执行的公式 (WhileReadingRecords) 以将组名存储在一个数组中（注意：数组最多可容纳 1000 个条目），然后创建第二个公式（也是打印时间），加入数组，将其添加到报告页脚部分。

# java - 安娜抛出 NullPointerException

> ID：12524149
> 
> 赞同：1
> 
> 时间：2012-09-21T04:13:10.860
> 
> 标签：java, graph, nullpointerexception, draw

我使用[annas](https://sites.google.com/site/annasproject/)库作为工具来可视化Collat​​z [Conjecture](http://en.wikipedia.org/wiki/Collatz_conjecture)中特定数字序列之间的模式。我正在执行这段代码：

```
GraphDrawer<BigInteger, DefaultArc<BigInteger>> drawer = new GraphDrawer<BigInteger, DefaultArc<BigInteger>>(graph);
BufferedImage image = new BufferedImage(1000, 1000, BufferedImage.TYPE_3BYTE_BGR);
drawer.draw(image); 
```

它抛出这个错误：

```
Exception in thread "main" java.lang.NullPointerException
    at annas.graph.drawing.GraphDrawer.draw(GraphDrawer.java:88)
    at Driver.main(Driver.java:36) 
```

安全地假设`graph`不为空。什么是扔`NullPointerException`？

* * *

根据陌生人的要求：

```
/**
 * Draws the graph
 * 
 * @param buffImage
 *            Image to draw the graph on
 * @return graphical representation of the graph
 */
public BufferedImage draw(BufferedImage buffImage) {
    Map<N, int[]> map = this.placer.place(this.graph, sizeX, sizeY);

    ArrayList<N> nodeSet = this.graph.getNodeMap();
    ArrayList<A> arcSet;
    Graphics2D graphic = buffImage.createGraphics();
    for (N node : nodeSet) {
        arcSet = this.graph.getArc(node);
        this.nodeDrawer.drawNode(graphic, node, map.get(node)[0], map
                .get(node)[1]);
        for (A arc : arcSet) {
            this.arcDrawer.drawArc(graphic, arc, map.get(node)[0], map
                    .get(node)[1], map.get(arc.getHead())[0], map.get(arc
                    .getHead())[1]);
        }
    }
    return buffImage;
} 
```

第 88 行是方法中的第一行（这里`map`是初始化的）。

# java - Java Swing 垂直堆叠组件而不展开

> ID：12524151
> 
> 赞同：1
> 
> 时间：2012-09-21T04:13:22.567
> 
> 标签：java, swing, layout, alignment, jpanel

多年来，我一直在尝试让 JPanel 列表垂直堆叠，而不会扩展到所有可用的垂直空间。

容器是一个带有 BoxLayout 的 JPanel

这是正在发生的事情和我想要的：

[http://i.imgur.com/K1uUn.png](http://i.imgur.com/K1uUn.png)

我试过使用 Box.Filler、Box.createGlue()、调整对齐属性（它们似乎没什么用）。每个项目调用 setAlignmentY(Component.TOP_ALIGNMENT);

还是不行。

有人有解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T04:30:45.260

把`BoxLayout`at 的`PAGE_START`a `BorderLayout`。

# c - 字符字符串引用的分段错误

> ID：12524155
> 
> 赞同：0
> 
> 时间：2012-09-21T04:13:52.643
> 
> 标签：c, character

我有一个小的 C++ 函数可以将字符串反转到位：

```
void reverse1(string& s, int start, int end) {
  if (s.empty()) return;
  char tmp;

  while (start < end) {
    tmp = s[end];
    s[end] = s[start];
    s[start] = tmp;
    ++start;
    --end;
  }
} 
```

此功能工作正常。但是，当我如下用 c 重写它时，我在语句 11 上遇到了段错误。

```
 5 void reverse2(char *s, int start, int end) {
  6   if (!s) return;
  7   char tmp;
  8   
  9   while (start < end) {
 10     tmp = s[end];
 11     *(s + end) = *(s + start);
 12     *(s + start) = tmp;
 13     ++start;
 14     --end;
 15   } 
 16 } 
```

调用该函数的驱动程序：

```
int main() {
  /* Flavor1 works */
  string a = "hello world2012!";
  reverse1(a, 0, a.length() - 1);

  /* Flavor2 does not - segmentation fault */ 
  char *b = "hello world2012!";
  reverse2(b, 0, strlen(b) - 1);
} 
```

我使用 gcc v 4.6.1 来编译我的程序。使用 gdb 单步执行代码时，程序在运行时因分段错误而崩溃。

char 字符串 s 不是 const。有人可以建议这里发生了什么吗？我该如何解决这个问题。谢谢。

更新：在字符串文字上调用 reverse2 函数。问题是我试图修改字符串文字。正如 Jim 和 H2CO3 所指出的，这是一种未定义的行为。

现在用字符串文字初始化的字符串对象（a）和字符串文字（b）之间的确切区别是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:27:14.367

这取决于你如何调用你的例程。如果`end`是数组的长度，这在 C 语言中很常见，则`s[end]`不是有效的引用……它是超出 的一个字符`s`。

此外，`!s`不等同于 C++ `s.empty`...它测试指针是否为 NULL，而不是字符串是否为空——为此，使用`!*s`, `!s[0]`, `s[0] == '\0'`,`strlen(s) == 0`等。

> char 字符串 s 不是 const。

如果它是字符串文字常量，它无论如何都可能失败；写入这样的字符串是未定义的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:37:51.200

你可以重写代码如下

```
void reverse(char *s, int start, int end) {
  if (!s) return;
  char tmp;

  if( end >= strlen(s) )
      end = strlen(s)-1;

  while (start < end) {
    tmp = s[end];
    *(s + end) = *(s + start);
    *(s + start) = tmp;
    ++start;
    --end;
  } 
} 
```

# objective-c - 将 ImageView 触摸到另一个 ViewController

> ID：12524160
> 
> 赞同：0
> 
> 时间：2012-09-21T04:14:30.407
> 
> 标签：objective-c, ios, uiviewcontroller, uiimageview

我有 2 个`ViewControllers`，我创建了一个`UIImageView`来显示像 iPhone 上的启动画面。我把它写在`TestAppDelegate.m`：

=====================

```
splashScreen = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];

splashScreen.image = [UIImage imageNamed:@"Default.png"];

[self.window addSubview:splashScreen];

 sleep(6);

[splashScreen removeFromSuperview]; 
```

=====================

我的问题是，

如果我谈到这一点，`imageview`我会去 2nd `ViewController`。

否则在时间睡眠后，自动到第 1 次`ViewController`。

那么，有可能做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:45:52.087

做这个：

在 appDelegate.h 文件中添加 UIGestureRecognizerDelegate。

```
@interface AppDelegate : UIResponder <UIApplicationDelegate,UIGestureRecognizerDelegate> 
```

现在

```
splashScreen = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 480)];
splashScreen.userInteractionEnabled = YES;
splashScreen.image = [UIImage imageNamed:@"Default.png"];
UITapGestureRecognizer* tapRecognizer = [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap:)];
tapRecognizer.numberOfTapsRequired = 1;
tapRecognizer.numberOfTouchesRequired = 1;
tapRecognizer.delegate = self;
[splashScreen addGestureRecognizer:tapRecognizer];
[tapRecognizer release];

[self.window addSubview:splashScreen];

sleep(6);
[splashScreen removeFromSuperview];
//add ViewController1 here
ViewController1 *objViewController1 = [[ViewController1 alloc]initWithNibName:@"ViewController1" bundle:nil];
[self.window addSubview:objViewController1.view]; 
```

现在在启动屏幕上点击时将调用处理程序

```
- (void)handleTap:(UITapGestureRecognizer*)recognizer
{
   // Do Your thing. 
   if (recognizer.state == UIGestureRecognizerStateEnded)
   {
     [splashScreen removeFromSuperview]; //edited here
     ViewController2 *objViewController2 = [[ViewController2 alloc]initWithNibName:@"ViewController2" bundle:nil];
    [self.window addSubview:objViewController2.view];
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:30:35.513

是的。这是可能的。在 AppDelegate 中保持`NSTimer`。

在计时器的选择器中编写代码以推送到第一个视图控制器。

并`Touch Recognizer`在图像视图和触摸事件上放置一个代码以推送到第二个视图控制器。

# user-interface - 在 Applescript 的 UI 脚本中使用 AXIdentifier

> ID：12524161
> 
> 赞同：5
> 
> 时间：2012-09-21T04:14:42.637
> 
> 标签：user-interface, scripting, applescript

**10.7.4 OSX Lion Applescript**

我正在使用一个应用程序（内置并且没有 Applescript 字典），它有一个静态文本元素，我想复制到剪贴板并发送到另一个应用程序，但我很难让它工作。

我用于定位元素的脚本如下所示：

```
Tell application "System Events" to set frontmost of process "*application*" to true
Tell application "System Events"
    Tell process "*application*" 
        Tell static text 1 of tab view 1 scroll area 1 of splitter group 1 of splitter group 1 of splitter group 1 of window 1
            keystroke "a" using command down
            delay 0.1
            keystroke "c" using command down
            delay 0.1
        end tell
    end tell
end tell
end tell 
```

会发生的情况是，每次我单击应用程序上的不同位置（有许多文本字段）时，都会将来自错误元素的错误文本复制到剪贴板。

我在 UI Accessor/Accessibility Accessor 中注意到，当您将鼠标悬停在应用程序中的每个 UI 元素上时，它们都有一个唯一的 AXIdentifier 值。

有没有办法完成我想做的事情，使用 AXIdentifier 值来定位该元素并从中复制文本？

**感谢所有帮助这是我的第一篇文章，我希望它是值得的！~TheLarkInn**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-04-23T16:38:43.520

您可以通过使用 AppleScript 的过滤来做到这一点。例如，要在 Apple Mail 的邮件撰写窗口中获取 From: 弹出菜单，没有可以匹配的可访问性描述，但是有一个唯一的 AXIdentifier，您可以匹配如下：

```
tell application "System Events"
    tell application process "Mail"
        tell window 1
            get first pop up button whose value of attribute "AXIdentifier" is "popup_from"
        end tell
    end tell
end tell 
```

这比在 AppleScript 中循环更有效，因为它只涉及向系统事件发送一个 Apple 事件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-09T21:12:22.370

我认为没有办法直接做你想做的事情。似乎只有通过选择器处理元素后才能访问属性。这是一个非常丑陋的解决方案，它通过迭代所有 UI 元素来满足您的要求，但是对于较大的 UI，它确实很慢，并且可能不适合任何生产级代码。

```
tell application "System Events"
  tell process "Some Process"
    set tElements to entire contents of window "Some Window"
    repeat with tElement in tElements
      if (exists attribute "AXIdentifier" of tElement) then
        if value of attribute "AXIdentifier" of tElement = "Some AXIdentifier" then set tText to value of tElement
      end if
    end repeat
  end tell
end tell
tText 
```

我认为使用Xcode 中的[UIElementInspector](http://mac.softpedia.com/get/Utilities/UIElementInspector.shtml)或 Accessibility Inspector 来构建选择器字符串是可行的方法！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-01T03:25:41.107

```
Tell application "*application*" to activate

Tell application "System Events"
    Tell application process "*application*" 
        set textStaticTextValue to value of static text 1 of tab view 1 scroll area 1 of splitter group 1 of splitter group 1 of splitter group 1 of window 1
    end tell
end tell 
```

# node.js - Windows 上的 npm 安装 websocket 错误

> ID：12524162
> 
> 赞同：3
> 
> 时间：2012-09-21T04:14:59.363
> 
> 标签：node.js

我正在尝试使用 Node 创建聊天服务器。为此，我需要下载需要我运行的 Websocket 插件

C:\Program Files\nodejs>npm install websocket 我也安装了 Python 最新版本。运行上述命令时出现以下错误。

[http://ScrnSht.com/bcqhhq](http://ScrnSht.com/bcqhhq)

有谁知道如何安装 websocket ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-24T14:55:57.743

打开命令提示符，使用 cd 命令导航到节点安装的根目录，对我来说，根节点文件夹是“c:\Program Files\nodejs”

```
cd "c:\Program Files\nodejs" 
```

在这里，输入这个`

```
npm install http-server -g 
```

这将安装 http-server。“-g”表示全局，这不会让系统抛出与错误目录或“package.json”文件丢失有关的错误。“-g”将负责定位所有这些。

在这种类型之后：

```
npm install websocket@1.0.3 -g 
```

再次“-g”会照顾你。这里提到的 websocket 版本运行良好。其他版本，我不太确定。

你已准备好出发！快乐编码！

（答案假设您已经安装了 node 和 npm。）

# c# - 如何从文本文件中获取文本到 AutoComplete c#/.net Windows Form

> ID：12524166
> 
> 赞同：0
> 
> 时间：2012-09-21T04:16:06.350
> 
> 标签：c#, .net, autocomplete, io

我创建了一个登录表单，我正在使用`using System.IO`FileStream 将用户名或密码保存到一个文本文件中。我想对用户名文本框或密码文本框使用自动完成。

我想在保存在文本文件中的自动完成中获取用户名或密码，这样我就不必将用户名和密码放在文本框中。

它应该在文本框中显示用户名或密码以像这样选择（点击查看）[http://i49.tinypic.com/rkuats.jpg](http://i49.tinypic.com/rkuats.jpg) 和 [http://i46.tinypic.com/21edys1.jpg](http://i46.tinypic.com/21edys1.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:27:32.113

你正在研发什么？如果它是一个 Web 应用程序，您可以使用 jQuery UI 来实现文本框的自动完成：

```
$(function() {
    var availableTags = [
        "ActionScript",
        "AppleScript",
        "Asp",
        "BASIC",
        "C",
        "C++",
        "Clojure",
        "COBOL",
        "ColdFusion",
        "Erlang",
        "Fortran",
        "Groovy",
        "Haskell",
        "Java",
        "JavaScript",
        "Lisp",
        "Perl",
        "PHP",
        "Python",
        "Ruby",
        "Scala",
        "Scheme"
    ];
    $( "#tags" ).autocomplete({
        source: availableTags
    });
}); 
```

如果您使用的是 WPF，您可以在 C# 中进行类似操作：

```
 public Window1()
 {
     InitializeComponent();
     List<string> source = new List<string>{/*your source of strings*/};
     TextBoxName.ItemSource = source;
 } 
```

另一种方法：

```
private void Form1_Load(object sender, EventArgs e)
{
// Create the list to use as the custom source. 
var source = new AutoCompleteStringCollection();
source.AddRange(new string[]
                {
                    "January",
                    "February",
                    "March",
                    "April",
                    "May",
                    "June",
                    "July",
                    "August",
                    "September",
                    "October",
                    "November",
                    "December"
                });

// Create and initialize the text box.
var textBox = new TextBox
              {
                  AutoCompleteCustomSource = source,
                  AutoCompleteMode = 
                      AutoCompleteMode.SuggestAppend,
                  AutoCompleteSource =
                      AutoCompleteSource.CustomSource,
                  Location = new Point(20, 20),
                  Width = ClientRectangle.Width - 40,
                  Visible = true
              };

// Add the text box to the form.
Controls.Add(textBox);
} 
```

# c++ - 在 VS2010 C++ 中解决“在文件范围内找到'{'（缺少函数头？）”

> ID：12524168
> 
> 赞同：2
> 
> 时间：2012-09-21T04:16:38.800
> 
> 标签：c++, visual-studio-2010

我正在使用 Visual Studio 2010 Express，我收到文件 test.h 的以下错误，该文件在编译时输出：

```
test.h(4): error C2061: syntax error : identifier 'test'
test.h(4): error C2059: syntax error : ';'
test.h(4): error C2449: found '{' at file scope (missing function header?)
test.h(18): error C2059: syntax error : '}' 
```

文件 test.h 描述如下：

```
#ifndef TEST_H
#define TEST_H

class test {
    int a; 
    int b; 
public:        
    test(int a, int b) { 
        this->a = a;
        this->b = b;
    }

    int add() { 
        return 0;
    }
};

#endif 
```

VS2010 项目中的另一个文件是 test.c，即：

```
#include "test.h"

int main(int argc, char** argv) {
    return 0;
} 
```

我尝试了多种方法来解决这个问题。即使我定义 test.h 如下：

```
class test{

}; 
```

我仍然收到相同的错误集。

我看到了类似的问题 [https://stackoverflow.com/questions/7798876/strange-errors-when-using-byte-pbyte-instead-of-char-char-in-vs2k10-wdk-envi](https://stackoverflow.com/questions/7798876/strange-errors-when-using-byte-pbyte-instead-of-char-char-in-vs2k10-wdk-envi) 没有响应。

如果有人能指出如何解决这些错误，我将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T04:20:46.980

Microsoft 编译器同时支持 C 和 C++ 语言，但它们并不相同，需要区别对待（例如`class`，C 中没有关键字，因此最终会导致您得到的错误）。所以它必须以某种方式“知道”在编译源文件时它正在处理哪种语言（C*或C++）（因此也处理包含）。*

它认为您正在尝试编译 C 语言文件（因为它具有文件扩展名`.c`），而您实际上正在使用 C++ 语言。重命名您的文件，使其具有 Microsoft C/C++ 编译器识别为 C++ 的文件扩展名之一`.cpp`：`.cxx`或`.cc`.

或者，如果您无法重命名文件，您也可以使用`/Tp`命令行选项`cl.exe`来强制它将文件视为 C++ 文件（为了完整性`/Tc`将强制使用 C 语言）。

# excel - Excel 在反复打开和关闭工作簿时崩溃

> ID：12524169
> 
> 赞同：1
> 
> 时间：2012-09-21T04:16:48.240
> 
> 标签：excel, excel-2003, vba

在 Excel2003 中，我看到一个奇怪的事情发生在我编写的用于自动修改工作簿列表的宏中。我有一个包含 12000 个工作簿的列表要修改，所以我需要依次打开每个工作簿，在里面做一些事情，然后保存并关闭。在处理了大约 1000 个工作簿（有时还有几百个）后，Excel 就会崩溃。

这是我正在做的伪代码

```
public sub ProcessWorkbooks()

    dim i as Integer
    dim targetWorkbook as Workbook

    With thisWorkbook.Sheets("Main").Range("A15")
        Do While .Offset(i, 0).Value <> ""
            set targetWorkbook = Application.Workbooks.Open(.Offset(i, 3).Value)
            If targetWorkbook Is Nothing Then
                Goto NextIteration
            End If
            Application.ScreenUpdating = False
            Call ProcessWorkbook(targetWorkbook)
            Call targetWorkbook.Save
            DoEvents
            Call targetWorkbook.Close
            Application.ScreenUpdating = True
NextIteration:
            i = i + 1
        Loop
    End With

end sub 
```

我的第一个想法是内存泄漏，但后来我认为 Excel 在崩溃之前应该变得非常慢，但是执行速度在崩溃之前保持不变（虽然我还没有坐在那里看几千本工作簿...... .)。Excel 本身有什么东西会导致这种崩溃发生吗？也许历史需要清除或类似的东西？以前有没有人发生过这种情况？

# php - 带有标题位置重定向的 Wordpress IP 限制

> ID：12524170
> 
> 赞同：2
> 
> 时间：2012-09-21T04:16:52.143
> 
> 标签：php, wordpress

我有一个 wordpress 网站，我正试图锁定一组 IP。我将以下代码用作 index.php 中的第一件事：（此处为 IP 混淆）

```
$matchedIP = 0;
$IP = $_SERVER['REMOTE_ADDR'];

$validIPs = array("x.x.x.x", "x.x.x.x", "x.x.x.x", "x.x.x.x", "x.x.x.x");

foreach($validIPs as $validIP)
{
    if($IP == $validIP)
    {
        $matchedIP = 1;
    }
}

if($matchedIP == 0)
{
    header('Location: http://google.com.au');
} 
```

IP 检查工作正常，因为各种断言可以确认。不起作用的是重定向，它永远不会发生。完整的 index.php 如下：

```
<?php

$matchedIP = 0;
$IP = $_SERVER['REMOTE_ADDR'];

$validIPs = array("x.x.x.x", "x.x.x.x", "x.x.x.x", "x.x.x.x", "x.x.x.x");

foreach($validIPs as $validIP)
{
    if($IP == $validIP)
    {
        $matchedIP = 1;
    }
}

if($matchedIP == 0)
{
    header('Location: http://google.com.au');
}

/**
 * Front to the WordPress application. This file doesn't do anything, but loads
 * wp-blog-header.php which does and tells WordPress to load the theme.
 *
 * @package WordPress
 */

/**
 * Tells WordPress to load the WordPress theme and output it.
 *
 * @var bool
 */
define('WP_USE_THEMES', true);

/** Loads the WordPress Environment and Template */
require('./wp-blog-header.php');

//require('./phpinfo.php'); 
```

奇怪的是，当注释掉 wordpress blog-header 要求并包含一个简单的 phpinfo 页面的要求时，重定向的行为符合预期。

我是否误解了 PHP 的处理方式以某种方式工作？当然，它甚至应该在考虑加载下面的任何所需文件之前点击重定向？

编辑：Windows IIS7 后端，PHP 版本 5.2.17，Wordpress 版本 3.4.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:41:22.333

如果要进行正确的重定向，则必须在`header`-directive 之后终止脚本执行：

```
if(!in_array($IP, $validIPs))
{
    header('Location: http://google.com.au');
    exit(0);
} 
```

原因是，如果你让 Wordpress 继续执行，它会发送一个 HTTP 状态码`200`，而浏览器会忽略`Location`标题。只有一部分 HTTP 状态代码使用了`Location`标头。

`exit`就位后，PHP 停止执行并自动发送HTTP`302`状态，告诉浏览器重定向到`Location`标头中指定的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:45:31.923

你不需要for循环

```
<?php

$matchedIP = 0;
$IP = $_SERVER['REMOTE_ADDR'];

$validIPs = array("x.x.x.x", "x.x.x.x", "x.x.x.x", "x.x.x.x", "x.x.x.x");

if(in_array($IP, $validIPs))
{
    header('Location: http://google.com.au');
    exit(0);
}

?> 
```

# mongodb - 为什么在 mongodb 中使用 $all 会慢得多？

> ID：12524175
> 
> 赞同：0
> 
> 时间：2012-09-21T04:17:25.100
> 
> 标签：mongodb

我之前问过一个类似的问题，[为什么 $in 比 $all 快得多？](https://stackoverflow.com/questions/12364377/why-in-is-much-faster-than-all)答案是 $in （扫描更多行并返回更多结果）由于排序或其他原因应该更快的想法。

我认为这不是问题，所以我只用一项测试 $all 。

$all 只有一项与普通搜索等效吗？

这是没有 $all 的日志（我使用了 30 个线程的 4700 个测试用例）：

现在的问题不是 $all 比 $in 慢。$all 比任何东西都慢。包括基本搜索。

```
Thu Sep 20 17:27:05 [conn11] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^emic/ } ntoreturn:20 reslen:20 404ms
Thu Sep 20 17:27:05 [conn21] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^jakarta/ } ntoreturn:20 nreturned:20 reslen:1193 67ms
Thu Sep 20 17:27:05 [conn15] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^sap/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1138 219ms
Thu Sep 20 17:27:05 [conn5] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^ione/ } ntoreturn:20 reslen:20 326ms
Thu Sep 20 17:27:05 [conn20] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^phi/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1210 340ms
Thu Sep 20 17:27:05 [conn13] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^dentist/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1074 252ms
Thu Sep 20 17:27:05 [conn23] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^othe/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1048 113ms
Thu Sep 20 17:27:05 [conn9] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^kota/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1147 296ms
Thu Sep 20 17:27:05 [conn7] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^budi/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1068 250ms
Thu Sep 20 17:27:05 [conn16] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^atc/ } ntoreturn:20 reslen:20 364ms
Thu Sep 20 17:27:06 [conn21] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^mir/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1055 275ms
Thu Sep 20 17:27:06 [conn11] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^mogo/ } ntoreturn:20 nscanned:6 nreturned:6 reslen:347 325ms
Thu Sep 20 17:27:06 [conn5] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^pondok/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:993 184ms
Thu Sep 20 17:27:06 [conn15] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^aneka/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1114 257ms
Thu Sep 20 17:27:06 [conn20] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^tv/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1154 173ms
Thu Sep 20 17:27:06 [conn7] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^t/ } ntoreturn:20 nreturned:20 reslen:1085 3ms
Thu Sep 20 17:27:06 [conn9] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^system/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1271 177ms
Thu Sep 20 17:27:06 [conn13] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^crepes/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1134 302ms
Thu Sep 20 17:27:06 [conn23] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^factor/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1324 340ms
Thu Sep 20 17:27:06 [conn16] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^baso/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1214 239ms
Thu Sep 20 17:27:06 [conn15] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^forward/ } ntoreturn:20 nreturned:20 reslen:1351 52ms
Thu Sep 20 17:27:06 [conn21] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^permai/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1268 318ms
Thu Sep 20 17:27:06 [conn11] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^eam/ } ntoreturn:20 reslen:20 311ms
Thu Sep 20 17:27:06 [conn5] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^elf/ } ntoreturn:20 nscanned:1 nreturned:1 reslen:80 319ms
Thu Sep 20 17:27:06 [conn20] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^anugrah/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1191 279ms
Thu Sep 20 17:27:07 [conn9] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^mac/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1234 282ms
Thu Sep 20 17:27:07 [conn13] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^happy/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1153 298ms
Thu Sep 20 17:27:07 [conn7] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^warding/ } ntoreturn:20 reslen:20 408ms
Thu Sep 20 17:27:07 [conn21] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^g/ } ntoreturn:20 nreturned:20 reslen:1220 3ms
Thu Sep 20 17:27:07 [conn23] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^otak/ } ntoreturn:20 nscanned:3 nreturned:3 reslen:204 336ms
Thu Sep 20 17:27:07 [conn16] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^nail/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1226 312ms
Thu Sep 20 17:27:07 [conn15] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^apotik/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:977 195ms
Thu Sep 20 17:27:07 [conn11] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^kare/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1116 295ms
Thu Sep 20 17:27:07 [conn5] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^king/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1131 252ms
Thu Sep 20 17:27:07 [conn9] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^modern/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1069 252ms
Thu Sep 20 17:27:07 [conn20] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^dutamas/ } ntoreturn:20 nscanned:6 nreturned:6 reslen:396 326ms
Thu Sep 20 17:27:07 [conn21] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^course/ } ntoreturn:20 nscanned:20 nreturned:20 reslen:1185 237ms
Thu Sep 20 17:27:07 [conn7] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: /^elle/ } ntoreturn:20 nscanned:3 nreturned:3 reslen:180 349ms
Thu Sep 20 17:27:07 [conn13] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.000785114234121064 
```

这是使用 $all 的结果

```
hu Sep 20 16:51:32 [conn11] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^ykai/ ] } } ntoreturn:20 reslen:20 1712ms
Thu Sep 20 16:51:33 [conn21] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^mnctv/ ] } } ntoreturn:20 reslen:20 1543ms
Thu Sep 20 16:51:33 [conn5] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^edric/ ] } } ntoreturn:20 reslen:20 1378ms
Thu Sep 20 16:51:33 [conn16] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^emobile/ ] } } ntoreturn:20 nscanned:1 nreturned:1 reslen:68 1435ms
Thu Sep 20 16:51:33 [conn15] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^foodfes/ ] } } ntoreturn:20 nscanned:1 nreturned:1 reslen:73 1657ms
Thu Sep 20 16:51:33 [conn20] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^consys/ ] } } ntoreturn:20 reslen:20 1698ms
Thu Sep 20 16:51:33 [conn7] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^nokiaw/ ] } } ntoreturn:20 reslen:20 1747ms
Thu Sep 20 16:51:33 [conn13] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^elf/ ] } } ntoreturn:20 nscanned:1 nreturned:1 reslen:80 1572ms
Thu Sep 20 16:51:33 [conn9] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^rmhku/ ] } } ntoreturn:20 reslen:20 1553ms
Thu Sep 20 16:51:34 [conn11] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^refly/ ] } } ntoreturn:20 reslen:20 1768ms
Thu Sep 20 16:51:34 [conn23] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^yuanita/ ] } } ntoreturn:20 reslen:20 1913ms
Thu Sep 20 16:51:34 [conn5] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^mediate/ ] } } ntoreturn:20 nscanned:2 nreturned:2 reslen:103 1543ms
Thu Sep 20 16:51:34 [conn15] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^diskus/ ] } } ntoreturn:20 nscanned:1 nreturned:1 reslen:70 1411ms
Thu Sep 20 16:51:34 [conn21] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^rico/ ] } } ntoreturn:20 nscanned:8 nreturned:8 reslen:486 1748ms
Thu Sep 20 16:51:34 [conn16] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^bismart/ ] } } ntoreturn:20 reslen:20 1643ms
Thu Sep 20 16:51:35 [conn13] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^livera/ ] } } ntoreturn:20 reslen:20 1502ms
Thu Sep 20 16:51:35 [conn20] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^kikirna/ ] } } ntoreturn:20 reslen:20 1693ms
Thu Sep 20 16:51:35 [conn11] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^factor/ ] } } ntoreturn:20 nscanned:20 nreturned:20 reslen:1324 1161ms
Thu Sep 20 16:51:35 [conn9] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^haytien/ ] } } ntoreturn:20 reslen:20 1679ms
Thu Sep 20 16:51:35 [conn7] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^harni/ ] } } ntoreturn:20 nscanned:1 nreturned:1 reslen:86 1994ms
Thu Sep 20 16:51:36 [conn23] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^otak/ ] } } ntoreturn:20 nscanned:3 nreturned:3 reslen:204 1912ms
Thu Sep 20 16:51:36 [conn5] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^bluenet/ ] } } ntoreturn:20 reslen:20 1598ms
Thu Sep 20 16:51:36 [conn21] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^topwan/ ] } } ntoreturn:20 reslen:20 1549ms
Thu Sep 20 16:51:36 [conn15] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^tobas/ ] } } ntoreturn:20 nscanned:1 nreturned:1 reslen:54 1596ms
Thu Sep 20 16:51:36 [conn16] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^imagen/ ] } } ntoreturn:20 nscanned:1 nreturned:1 reslen:55 1595ms
Thu Sep 20 16:51:36 [conn9] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^corocot/ ] } } ntoreturn:20 nscanned:2 nreturned:2 reslen:128 1280ms
Thu Sep 20 16:51:36 [conn13] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^pdor/ ] } } ntoreturn:20 reslen:20 1682ms
Thu Sep 20 16:51:36 [conn20] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^elcom/ ] } } ntoreturn:20 nscanned:1 nreturned:1 reslen:63 1865ms
Thu Sep 20 16:51:37 [conn11] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^delapan/ ] } } ntoreturn:20 nscanned:6 nreturned:6 reslen:358 1740ms
Thu Sep 20 16:51:37 [conn7] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^tato/ ] } } ntoreturn:20 nscanned:13 nreturned:13 reslen:863 1678ms
Thu Sep 20 16:51:37 [conn23] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^mac/ ] } } ntoreturn:20 nscanned:20 nreturned:20 reslen:1234 1197ms
Thu Sep 20 16:51:37 [conn5] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^dutamas/ ] } } ntoreturn:20 nscanned:6 nreturned:6 reslen:396 1455ms
Thu Sep 20 16:51:37 [conn16] query newisikotagte15.tablebusiness query: { LongitudeLatitude: { $nearSphere: [ 106.8317, -6.2426 ], $maxDistance: 0.0007851142341210646 }, indexWords: { $all: [ /^jeneiro/ ] } } ntoreturn:20 reslen:20 1466ms 
```

注意：我知道仅对一个单词使用 $all 是没有用的，这就是重点。

我用一个词来表明问题不在于索引或查询本身。

显然，将来我将 $all 用于 2 - 3 个关键字。但是，在这个示例中，我只使用了一个词，因此很明显问题不在于结果不同，而在于更根本的问题。

$in 根本没有问题。这里似乎有问题：[https](https://jira.mongodb.org/browse/SERVER-1745) ://jira.mongodb.org/browse/SERVER-1745但我不明白。什么是 server-1745？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T12:14:01.110

这是按照[为什么 $in 比 $all 快得多？](https://stackoverflow.com/questions/12364377/why-in-is-much-faster-than-all)如回答。

> $all 只有一项与普通搜索等效吗？

不，它是不同的代码路径和不同的运算符。

MongoDB 在[这里](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-$all)解释了不同之处。$all 匹配所有值，而不是 any（$in 匹配）。[这里](http://docs.mongodb.org/master/reference/operators/)有更多的使用示例。

您想要的相关 SERVER 票[在这里](https://jira.mongodb.org/browse/SERVER-1748)。你可以在这张票上投票。

# c++ - 向现有结构添加元素会使函数在分段错误时崩溃

> ID：12524177
> 
> 赞同：1
> 
> 时间：2012-09-21T04:17:38.253
> 
> 标签：c++, vector, struct

我有以下结构：

```
struct FeatureMatch {
    int id1, id2;
    double score; 
}; 
```

被此函数调用时运行良好：

```
void ssdMatchFeatures(const FeatureSet &f1, const FeatureSet &f2, vector<FeatureMatch> &matches, double &totalScore) {
    int m = f1.size();
    int n = f2.size();
    matches.resize(15000);
    totalScore = 0;

    double d;
    double dBest;
    int idBest;
   printf("2");
    for (int i=0; i<m; i++) {
        dBest = 1e100;
        idBest = 0;

        for (int j=0; j<n; j++) {
            d = distanceSSD(f1[i].data, f2[j].data);

            if (d < dBest) {
        dBest = d;
        idBest = f2[j].id;
            }
        }
        printf("1\n");
        matches[i].id1 = f1[i].id;
        matches[i].id2 = idBest;
        matches[i].score = -dBest;
     //   matches[i].second=1;
        totalScore += matches[i].score;
    }

    printf("3");
} 
```

但是，一旦我通过添加新元素来修改结构：

```
struct FeatureMatch {
    int id1, id2;
    double score, second; 
}; 
```

一个名为 second 的附加双精度值会使上述函数在分段错误时崩溃。1,2,3 的输出显示如下：

21 1 1 1 1 。. . 1

但在崩溃之前永远不会达到 3。

这里发生了什么？即使我从不修改matches[i].second，也会发生这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:37:42.227

如果您更改结构定义，并且您的构建工具没有自动执行此操作，您应该重新构建所有受影响的源文件。否则，您可能会将使用不同结构定义的模块链接在一起，这将导致令人困惑的错误（如您所见）。

# android - 仅用于 MapView 选项卡的按钮显示在两个选项卡上

> ID：12524180
> 
> 赞同：0
> 
> 时间：2012-09-21T04:18:18.703
> 
> 标签：android, android-layout, android-mapview

我有一个 2 选项卡活动，一个选项卡包含一个信息屏幕（它在下面的代码中的 id 是“targetLayout”）和一些 TextViews，另一个选项卡包含一个 MapView。使用布局，我正在尝试添加一个仅显示在 MapView 选项卡屏幕上的按钮，但它同时显示在两者上。奇怪的是，如果我改变布局，使按钮只在信息选项卡上，那是可行的。我必须错过一些东西，但不清楚是什么。

这是导致按钮显示在两者上的布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <RelativeLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:tools="http://schemas.android.com/tools"
                android:id="@+id/targetLayout"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

                <TextView
                    android:id="@+id/textViewTargetPositionLabel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerHorizontal="true"
                    android:text="Target Position"
                    android:textAppearance="?android:attr/textAppearanceLarge" />

                <TextView
                    android:id="@+id/textViewTargetPosition"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/textViewTargetPositionLabel"
                    android:layout_centerHorizontal="true"
                    android:text="Waiting"
                    android:textAppearance="?android:attr/textAppearanceLarge" />

                <TextView
                    android:id="@+id/textViewTargetRangeLabel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/textViewTargetPosition"
                    android:layout_marginTop="10dp"
                    android:text="Range(M):"
                    android:textAppearance="?android:attr/textAppearanceSmall" />

                <TextView
                    android:id="@+id/textViewTargetAzimuthLabel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/textViewTargetRangeLabel"
                    android:text="Azimuth(Deg):"
                    android:textAppearance="?android:attr/textAppearanceSmall" />

                <TextView
                    android:id="@+id/textViewTargetElevationLabel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/textViewTargetAzimuthLabel"
                    android:text="Elevation(Deg):"
                    android:textAppearance="?android:attr/textAppearanceSmall" />

                <TextView
                    android:id="@+id/textViewTargetTimeLabel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/textViewTargetElevationLabel"
                    android:text="Time lased:"
                    android:textAppearance="?android:attr/textAppearanceSmall" />

                <TextView
                    android:id="@+id/textViewGPSAccuracy"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/textViewTargetTimeLabel"
                    android:text="GPS Accuracy When Lased:"
                    android:textAppearance="?android:attr/textAppearanceSmall" />

                <TextView
                    android:id="@+id/textViewYourPositionLabel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/textViewGPSAccuracy"
                    android:layout_centerHorizontal="true"
                    android:layout_marginTop="20dp"
                    android:text="Your Position"
                    android:textAppearance="?android:attr/textAppearanceLarge" />

                <TextView
                    android:id="@+id/textViewYourPosition"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/textViewYourPositionLabel"
                    android:layout_centerHorizontal="true"
                    android:text="Waiting for GPS Fix"
                    android:textAppearance="?android:attr/textAppearanceLarge" />

                <TextView
                    android:id="@+id/textViewGPSStatus"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/textViewYourPosition"
                    android:layout_marginTop="14dp"
                    android:text="GPS Status: Initializing" />

                <TextView
                    android:id="@+id/textViewGPSInfo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/textViewGPSStatus"
                    android:layout_alignBottom="@+id/textViewGPSStatus"
                    android:layout_alignParentRight="true" />
            </RelativeLayout>

            <RelativeLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/mainlayout"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical" >

                <com.google.android.maps.MapView
                    android:id="@+id/mapview"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:apiKey="<my key is in here>"
                    android:clickable="true"
                    android:enabled="true" />

                <Button
                    android:id="@+id/googlemaps_select_location"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_alignParentTop="true"
                    android:text="Select" />
            </RelativeLayout>
        </FrameLayout>
    </LinearLayout>

</TabHost> 
```

这是将按钮仅放在信息选项卡上的布局。唯一不同的是该按钮现在位于信息选项卡的 RelativeLayout 中：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <RelativeLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                xmlns:tools="http://schemas.android.com/tools"
                android:id="@+id/targetLayout"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" >

                <TextView
                    android:id="@+id/textViewTargetPositionLabel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_centerHorizontal="true"
                    android:text="Target Position"
                    android:textAppearance="?android:attr/textAppearanceLarge" />

                <TextView
                    android:id="@+id/textViewTargetPosition"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/textViewTargetPositionLabel"
                    android:layout_centerHorizontal="true"
                    android:text="Waiting"
                    android:textAppearance="?android:attr/textAppearanceLarge" />

                <TextView
                    android:id="@+id/textViewTargetRangeLabel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/textViewTargetPosition"
                    android:layout_marginTop="10dp"
                    android:text="Range(M):"
                    android:textAppearance="?android:attr/textAppearanceSmall" />

                <TextView
                    android:id="@+id/textViewTargetAzimuthLabel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/textViewTargetRangeLabel"
                    android:text="Azimuth(Deg):"
                    android:textAppearance="?android:attr/textAppearanceSmall" />

                <TextView
                    android:id="@+id/textViewTargetElevationLabel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/textViewTargetAzimuthLabel"
                    android:text="Elevation(Deg):"
                    android:textAppearance="?android:attr/textAppearanceSmall" />

                <TextView
                    android:id="@+id/textViewTargetTimeLabel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/textViewTargetElevationLabel"
                    android:text="Time lased:"
                    android:textAppearance="?android:attr/textAppearanceSmall" />

                <TextView
                    android:id="@+id/textViewGPSAccuracy"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/textViewTargetTimeLabel"
                    android:text="GPS Accuracy When Lased:"
                    android:textAppearance="?android:attr/textAppearanceSmall" />

                <TextView
                    android:id="@+id/textViewYourPositionLabel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/textViewGPSAccuracy"
                    android:layout_centerHorizontal="true"
                    android:layout_marginTop="20dp"
                    android:text="Your Position"
                    android:textAppearance="?android:attr/textAppearanceLarge" />

                <TextView
                    android:id="@+id/textViewYourPosition"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_below="@+id/textViewYourPositionLabel"
                    android:layout_centerHorizontal="true"
                    android:text="Waiting for GPS Fix"
                    android:textAppearance="?android:attr/textAppearanceLarge" />

                <TextView
                    android:id="@+id/textViewGPSStatus"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentLeft="true"
                    android:layout_below="@+id/textViewYourPosition"
                    android:layout_marginTop="14dp"
                    android:text="GPS Status: Initializing" />

                <TextView
                    android:id="@+id/textViewGPSInfo"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignBaseline="@+id/textViewGPSStatus"
                    android:layout_alignBottom="@+id/textViewGPSStatus"
                    android:layout_alignParentRight="true" />

                <Button
                    android:id="@+id/googlemaps_select_location"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_alignParentRight="true"
                    android:layout_alignParentTop="true"
                    android:text="Select" />
            </RelativeLayout>

            <RelativeLayout
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/mainlayout"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:orientation="vertical" >

                <com.google.android.maps.MapView
                    android:id="@+id/mapview"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:apiKey="my key is in here"
                    android:clickable="true"
                    android:enabled="true" />
            </RelativeLayout>
        </FrameLayout>
    </LinearLayout>

</TabHost> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:42:24.517

此代码是否在屏幕上显示您的标签？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:52:22.983

我一直在不同的文件中有单独的选项卡视图。

MainLayout.xml - 包含选项卡主机和框架布局。

Tab1.xml - 包含选项卡 1 的布局

Tab2.xml - 包含选项卡 2 的布局

在主活动中的选项卡选择功能上，您检查以查看选择了哪个选项卡并将该 xml 文件放入 MainLaout.xml 的框架布局中。查看 android 选项卡示例项目以获取详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T01:34:58.050

终于找到了解决办法。在我的活动代码中，我在原始问题的布局代码中使用 MapView 视图填充 MapView 选项卡，id 为“mapview”。使用包含 MapView 视图 id 'mainlayout' 的 RelativeLayout 填充选项卡，使其正常工作。我根据我在网上找到的一个示例编写了原始代码，它工作正常，直到你开始像我一样尝试修饰它。

# javascript - javascript 异步加载与 jquery ajax（或 getscript）异步加载的优缺点

> ID：12524186
> 
> 赞同：1
> 
> 时间：2012-09-21T04:18:43.950
> 
> 标签：javascript, jquery

我正在阅读这篇非常有趣的文章，以在我的网站[http://css-tricks.com/thinking-async/](http://css-tricks.com/thinking-async/)上实现 js 的异步样式加载。

我的要求是能够以异步方式加载 javascript 文件，然后在文件成功加载后从文件中调用初始化方法。哪种方法是首选方式，即使用经典的异步方式或使用上述文章中描述的 jQuery 的 getscript 方法？使用其中一种的优点或缺点是什么？

编辑：我的看法是：假设我们正在加载一个 js，然后我们想在成功加载 js 文件后回调一个初始化函数。这需要尽快发生，因为应该在页面期间解析和执行整个模块无需等待 document.ready 或 window.onload 即可加载。尝试通过经典的异步方式执行此操作可能会导致处理跨浏览器问题和严格的测试，而如果我们使用 jquery ajax（或 getscript 方法），我们可以避免麻烦。

也在寻找这个解决方案，以异步方式加载单个 js 文件，而不使用任何库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:18:54.930

**编辑：这个答案很旧，显然现代 jQuery 使用脚本注入**

使用经典的异步方式（我假设您的意思是脚本注入或 HTML 5 中的 async 属性）加载 javascript 非常受欢迎，并且是大多数异步加载器（包括 AMD，如 RequireJS）实现它的方式。

JQuery 的 getScript 方法在一天结束时调用 eval，大多数体面的 JS 开发人员倾向于回避。

*来自 jQuery 源代码的片段，当前为第 613 行：*

```
( window.execScript || function( data ) {
    window[ "eval" ].call( window, data );
} )( data ); 
```

jQuery 确实将窗口对象作为上下文传递，从而节省了一些麻烦并且（可能未经测试）修复了诸如 eval 对垃圾收集的奇怪处理之类的问题。根据您选择的工具，在调试期间跟踪线也可能仍然存在问题。

我是 AMD 方法（使用脚本注入）的大力支持者，它允许在加载依赖项后立即异步调用脚本，并允许您在脚本之间传递模块，而不是依赖于全局命名空间。[您可以在RequireJS 站点](http://requirejs.org/docs/why.html#4)上获得有关 AMD 加载和异步与同步加载的更多信息，或者查看这个[相对简单的要点](https://gist.github.com/3759825)。

# javascript - 打开和关闭列表元素的类 - CSS 和仅 Javascript

> ID：12524190
> 
> 赞同：2
> 
> 时间：2012-09-21T04:19:25.230
> 
> 标签：javascript, css

对于这个特殊的挑战，我需要**`<li>`**（同时）为两个给定列表中的所有元素切换已创建类的成员资格。如果**`<li>`**任一列表中的元素当前未分配类，则为其分配类；如果**`<li>`**任一列表中的元素当前分配了类，则删除该类。每次单击按钮时，都会添加和删除类（例如，在第一次单击时，可以添加类 - 然后在第二次单击时，可以删除类等）。

我被要求专门用普通的 JavaScript 来完成这个特定的任务。虽然我知道 jQuery 会是更简单的选择，但我被要求只使用普通的 JavaScript 来完成这项任务。

当我按下按钮时，css 类正在按预期应用（这里，字体系列、字体大小和字体拉伸属性正在改变）；但是，当我第二次单击该按钮时，没有任何变化（例如，类被删除），一切都恢复正常。

如果有人可以指出我调整当前代码的非 jQuery 方式，请告诉我。

谢谢你的帮助 ：）。

以下是此任务的相关 HTML、CSS 和 JavaScript：

***HTML：***

```
<ul id="newZealandList">
    <li>Auckland</li>
    <li>Wellington</li>
    <li>Christchurch</li>
    <li>Tauranga</li>
    <li>Dunedin</li>
</ul>

<ul id="usaList">
    <li>Los Angeles</li>
    <li>San Francisco</li>
    <li>San Diego</li>
    <li>Denver</li>
    <li>Boulder</li>
</ul>

<button id="modifyListsToggle">Change Lists - Toggle</button> 
```

***CSS：***

```
.modifyListElements{
    font-family:"Comic Sans MS", cursive;
    font-size:24px;
    font-stretch:extra-expanded;
} 
```

***JavaScript***

```
var newZealandListItems =  document.getElementById("newZealandList").getElementsByTagName("li");
var usaListItems = document.getElementById("usaList").getElementsByTagName("li");

function addClass(obj)
{
    obj.className="modifyListElements";
}

function removeClass(obj)
{
    obj.className = "";
}

function toggleClass()
{
    for (var i = 0; i < newZealandListItems.length; i++) {
        if(i.className != "modifyListElements") {
            //newZealandListItems[i].className = "modifyListElements";
            addClass(newZealandListItems[i]);

        }
        else
        {
            //newZealandListItems[i].className = "";
            removeClass(newZealandListItems[i]);
        }
    }

    for (var i = 0; i < usaListItems.length; i++) {
        if(i.className != "modifyListElements") {
            //usaListItems[i].className = "modifyListElements";
            addClass(usaListItems[i]);
        }
        else
        {
            //usaListItems[i].className = "";
            removeClass(usaListItems[i]);
        }
    }
}

var modifyListsToggle = document.getElementById("modifyListsToggle");
modifyListsToggle.onclick = toggleClass; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:33:42.300

问题在这里

```
for (var i = 0; i < newZealandListItems.length; i++) {
        if(i.className != "modifyListElements") {
//con.... 
```

和这里

```
 for (var i = 0; i < usaListItems.length; i++) {
        if(i.className != "modifyListElements") {
//con.... 
```

i 只是循环计数器变量，您需要使用它访问该索引处的项目，所以应该是

```
 for (var i = 0; i < newZealandListItems.length; i++) {
            if (newZealandListItems[i].className != "modifyListElements") {

//con.. 
```

和

```
for (var i = 0; i < usaListItems.length; i++) {
    if (usaListItems[i].className != "modifyListElements") {

//con.. 
```

另一方面，如果使用多个类，此代码可能会出现问题，因为 .className 属性将返回元素上的所有类。如果将来这可能是一个问题，我将继续使用 className.replace('modifyListElements','') 进行删除（这样它只会删除该类而不删除其他类）。如果存在多个类，则对 className 上的一个类的测试也将不起作用。在这种情况下，进行测试然后 .replace 可能是解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T04:34:27.630

代码检查 classname 中的一个小错误。我修改了你的代码，它工作正常。请检查一下

[http://jsfiddle.net/kRva7/](http://jsfiddle.net/kRva7/)。

```
var newZealandListItems =  document.getElementById("newZealandList").getElementsByTagName("li");
var usaListItems = document.getElementById("usaList").getElementsByTagName("li");

function addClass(obj)
{
    obj.className="modifyListElements";
}

function removeClass(obj)
{
    obj.className = "";
    console.log(obj.className);
}

function toggleClass()
{
    for (var i = 0; i < newZealandListItems.length; i++) {
        var item = newZealandListItems[i];

    if(item.className != "modifyListElements") {
        //newZealandListItems[i].className = "modifyListElements";
        addClass(item);

    }
    else
    {
        //newZealandListItems[i].className = "";
        removeClass(item);
    }
}

for (var i = 0; i < usaListItems.length; i++) {
    var item = usaListItems[i];            
    if(item.className != "modifyListElements") {
        //usaListItems[i].className = "modifyListElements";
        addClass(item);
    }
    else
    {
        //usaListItems[i].className = "";
        removeClass(item);
    }
}
}

    var modifyListsToggle = document.getElementById("modifyListsToggle");
    modifyListsToggle.onclick = toggleClass; 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T04:51:58.503

你可以做到这一点的最简单的方法（虽然 IE 支持是有问题的）是这样的：

```
var btn = document.getElementById('modifyListsToggle'), 
    lists = document.querySelectorAll('ul');

btn.addEventListener('click', function(e) {
  for(var i = 0; i < lists.length; i++) {
    var items = lists[i].querySelectorAll('li');
    for(var j = 0; j < items.length; j++) {
      items[j].classList.toggle('modifyListElements');
    }
  }
}, false); 
```

[**演示**](http://codepen.io/thebabydino/pen/wnbth)

*   [**`querySelectorAll()`**](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll)仅受 IE8+ 支持
*   [**`addEventListener()`**](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)仅受 IE9+ 支持
*   [**`classList`**](https://developer.mozilla.org/en-US/docs/DOM/element.classList)仅受 IE10 支持

# java - 如何避免 Cassandra StorageService 类 InstanceAlreadyExistsException

> ID：12524195
> 
> 赞同：1
> 
> 时间：2012-09-21T04:20:11.737
> 
> 标签：java, exception, cassandra, storage

我创建了 StorageService 类对象，如下所示

```
StorageService service=new StorageService(); 
```

当此指令遇到以下异常时，已抛出异常。

```
java.lang.RuntimeException: javax.management.InstanceAlreadyExistsException: org.apache.cassandra.db:type=StorageService
    at org.apache.cassandra.service.StorageService.<init>(StorageService.java:233)
    at com.exterro.edrm.restore.EmbeddedService.main(EmbeddedService.java:144)
Caused by: javax.management.InstanceAlreadyExistsException: org.apache.cassandra.db:type=StorageService
    at com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:453)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.internal_addObject(DefaultMBeanServerInterceptor.java:1484)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:963)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:917)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:312)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:482)
    at org.apache.cassandra.service.StorageService.<init>(StorageService.java:229)
    ... 1 more 
```

我应该添加或更改什么以避免此异常？

创建此 StorageService 类对象后，我必须调用`startRPCServer()`以启动 cassandra 服务以及注册 MBean 以在 java 代码中以编程方式使用 nodetool 实用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T02:37:09.100

您是否只是为了使用 JMX 而尝试执行所有这些操作？如果是这样，你做的比你需要的要多。这是 Java 中的 JMX 客户端示例：http: [//docs.oracle.com/javase/1.5.0/docs/guide/jmx/examples/Basic/Client.java](http://docs.oracle.com/javase/1.5.0/docs/guide/jmx/examples/Basic/Client.java)

如果您想做一些与 nodetool 相同的事情，我建议您将代码的相关部分提取出来并将它们粘贴到您的应用程序中。无需在应用程序中运行 nodetool 本身。

# mysql - 插入触发器更新值后的mysql触发器

> ID：12524204
> 
> 赞同：0
> 
> 时间：2012-09-21T04:20:52.937
> 
> 标签：mysql, triggers, crontrigger

我想根据任务表中的任务状态更新列表表中的列表状态，如果所有 taskid 任务状态为 1，则两个表都将 listid 作为公共字段，如果所有 taskid 任务状态不为 1，则将列表状态更改为 1然后将列表状态更改为 0 下面是触发器。我收到 sql 语法错误，请告诉我出了什么问题

```
 DROP TRIGGER IF EXISTS tada.list//

  CREATE TRIGGER tada.list
  AFTER INSERT ON tada.task
  FOR EACH ROW
 BEGIN
 UPDATE list t1 , task t2 SET t1.liststatus = t2.taskstatus FROM list t1 , task t2 WHERE t1.taskid = t2.taskid;
 END// 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:02:41.600

我将获取该列表的所有任务的计数，并将其从任务状态的总和中减去（如果 1 和 0 是您拥有的唯一状态），然后将 1 添加到结果中，然后在您的更新中使用 GREATEST(result,0)陈述。

例如，您有 10 个任务，其中 8 个任务的状态为 1：

```
UPDATE list l set status = GREATEST((SELECT SUM(t.status)-count(*)+1 from task t
where t.listid = 100), 0) where l.listid = 100; 
```

这会将其设置为 0，因为 8-10+1 = -1 并且 GREATEST 将选择 0。如果所有任务都已完成，则数学将是 10-10+1 = 1 并且 GREATEST 将使用 1。

如果值为 1，您可以在触发器中放置一个条件以仅更新列表，否则每次插入任务时都会触发更新。

您还应该重命名触发器，将其命名为 tada.list 没有意义。

```
CREATE TRIGGER update_list_status AFTER INSERT ON tada.task
FOR EACH ROW BEGIN
  UPDATE list l set status = GREATEST((SELECT SUM(t.status)-count(*)+1 from task t
  where t.listid = new.listid), 0) where l.listid = new.listid;
END 
```

您可能需要将 listid 替换为您正在使用的任务和列表都具有的任何唯一 ID。就像我在评论中所说，taskid 在列表中没有意义。

# ios - 如何在IOS中使用UIView打开PDF文件

> ID：12524206
> 
> 赞同：4
> 
> 时间：2012-09-21T04:21:05.850
> 
> 标签：ios, objective-c, ios5, pdf

如何在不使用`UIWebView`. 我需要将`UIView`水平`scroll`用于 PDF 视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:27:48.227

如果不想使用 UIWebView 那么您的替代方法是使用[QLPreviewController](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/QLPreviewController_Class/Reference/Reference.html)来显示 PDF 文件。

也可以使用[UIDocumentInteractionController](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UIDocumentInteractionController_class/)

检查[来自苹果的示例，](http://developer.apple.com/library/ios/#samplecode/DocInteraction/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010052)即 docInteraction 以获取更多参考。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T04:29:30.567

查看 GitHub 上的 OpenSource [Reader](https://github.com/vfr/Reader)项目。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T09:06:34.603

查找`CGPDFDocument`和相关的 API。那应该让你继续前进。

# reporting-services - SSRS 2008 R2 范围条形图（甘特图）每个类别的多个值

> ID：12524207
> 
> 赞同：1
> 
> 时间：2012-09-21T04:21:35.480
> 
> 标签：reporting-services, ssrs-2008, reporting, gantt-chart

我正在尝试使用 SSRS 2008 R2 范围条形图生成甘特图。甘特图用于跟踪任务开始和结束日期，其中任务可能会在记录这些间歇的情况下停止和开始。

DataTable 列：TaskName、StartDate、EndDate

我可以让图表在图表上显示每个 TaskName 的第一行，但在某些情况下，每个任务有多个表格行，日期不同。即我可以开始一项任务，做另一项任务，然后退回到一项任务。

我按照这个例子进入这个阶段： http: [//pnarayanaswamy.blogspot.com.au/2010/09/range-bar-chart-gantt-chart-using-ssrs.html](http://pnarayanaswamy.blogspot.com.au/2010/09/range-bar-chart-gantt-chart-using-ssrs.html)

此图表对象是否可以执行此请求，如果不是，您会建议什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:32:23.527

是的，这是可能的。它实际上在您引用的链接中：

> 要在一行中查看所有子任务数据系列组，您需要将所有子任务数据系列的 DrawSideBySide 设置为 False。

# ruby - Ruby 是否有命令像 QBASIC 那样格式化屏幕？

> ID：12524211
> 
> 赞同：0
> 
> 时间：2012-09-21T04:22:01.713
> 
> 标签：ruby, qbasic

**QBASIC**有一些命令，例如将光标放在屏幕上某个位置的**LOCATE (x, y) ，以及清除屏幕的****CLS**，这有助于控制台应用程序看起来干净。

ruby 有同样的功能吗？将它用于一个小项目可能会很好。

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:23:00.040

不，但查找 ncurses。 [http://ncurses-ruby.berlios.de/](http://ncurses-ruby.berlios.de/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:38:54.867

您可以使用 清除屏幕`system "clear"`，并每次打印整个屏幕。

# java - 在java中检索文件名的Dir命令

> ID：12524212
> 
> 赞同：0
> 
> 时间：2012-09-21T04:22:10.397
> 
> 标签：java, command-prompt

我正在编写一个代码来检索以下格式的文件 FileNameyyyyMMddhhmmss.csv。

我在我的 java 代码中使用以下 FileNameyyyyMMdd*.csv （即正则表达式）查找文件。但是，如果有两个具有相同初始名称的文件，例如

FileNameyyyyMMddhhmmss.csv 和 FileNameyyyyMMddhhmmss.csv （不同的时间戳，即 hhmmss 不同）

dir 命令是如何工作的。遍历目录时它会首先选择哪个文件？另一个问题是，如果在同一代码中使用两个 dir 命令，它会在使用第二个 dir 命令时选择正确的文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:31:53.160

正如评论中所建议的，使用 FileFilter 类。要获取按最早的文件排序的文件，请运行“dir /OD”。这样您就不必依赖 dir 的一个实现（以防它们在 Windows 版本之间发生变化，我对此表示怀疑，但在代码中做出假设仍然不好），并且可以确定哪个文件首先出现。

我也不确定你的第二个问题。你能详细说明一下吗？

# c - eclipse c编译库

> ID：12524213
> 
> 赞同：0
> 
> 时间：2012-09-21T04:22:38.397
> 
> 标签：c, eclipse, libraries

我正在使用 Eclipse 创建一个 C 项目。我有一些用于库的 C 源代码，我分别成功编译了这些源代码。我现在想在我的 Eclipse 项目中使用该库。我在我的项目中添加了一个库的文件夹，但是当我在 Eclipse 中编译项目时，我收到了来自库的大量错误。我该如何解决这个问题？

许多错误是变量“未定义”

# iphone - UITableView 为每个项目显示 2 个单元格

> ID：12524216
> 
> 赞同：0
> 
> 时间：2012-09-21T04:23:20.883
> 
> 标签：iphone, xcode, uitableview

我的 tableview 解析日历 RSS 提要。我将单元格设置为每个单元格的图像都有一个空白日历图标，并添加月份和日期的子视图，它使用来自 RSS 本身的 NSDate 检测到。但是，由于某种原因，它为每个事件显示 2 个单元格，我不知道为什么。这是单元格的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
    RSSEntry *entry = [_allEntries objectAtIndex:indexPath.row];

    NSDateFormatter * dateFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dateFormatter setTimeZone:[NSTimeZone localTimeZone]];
    [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
    [dateFormatter setDateStyle:NSDateFormatterShortStyle];

    NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"MM"];
    NSString *monthfromdate = [formatter stringFromDate:entry.articleDate];
    NSLog(@"%@", monthfromdate);
    [formatter release];

    NSDateFormatter *formatter2 = [[NSDateFormatter alloc] init];
    [formatter2 setDateFormat:@"dd"];
    NSString *datefromdate = [formatter2 stringFromDate:entry.articleDate];
    NSLog(@"%@", datefromdate);
    [formatter2 release];

    if ([monthfromdate isEqualToString:@"01"]) {
        self.currentmonth = @"January";
    }
    if ([monthfromdate isEqualToString:@"02"]) {
        self.currentmonth = @"February";
    }
    if ([monthfromdate isEqualToString:@"03"]) {
        self.currentmonth = @"March";
    }
    if ([monthfromdate isEqualToString:@"04"]) {
        self.currentmonth = @"April";
    }
    if ([monthfromdate isEqualToString:@"05"]) {
        self.currentmonth = @"May";
    }
    if ([monthfromdate isEqualToString:@"06"]) {
        self.currentmonth = @"June";
    }
    if ([monthfromdate isEqualToString:@"07"]) {
        self.currentmonth = @"July";
    }
    if ([monthfromdate isEqualToString:@"08"]) {
        self.currentmonth = @"August";
    }
    if ([monthfromdate isEqualToString:@"09"]) {
        self.currentmonth = @"September";
    }
    if ([monthfromdate isEqualToString:@"10"]) {
        self.currentmonth = @"October";
    }
    if ([monthfromdate isEqualToString:@"11"]) {
        self.currentmonth = @"November";
    }
    if ([monthfromdate isEqualToString:@"12"]) {
        self.currentmonth = @"December";
    }

    NSString *currentday = datefromdate;

    NSString *articleDateString = [dateFormatter stringFromDate:entry.articleDate];
    UIFont *cellFont = [UIFont fontWithName:@"ArialRoundedMTBold" size:15];
    UIFont *cellFont2 = [UIFont fontWithName:@"ArialRoundedMTBold" size:12];
    UIFont *cellFont3 = [UIFont fontWithName:@"ArialRoundedMTBold" size:9];
    UIFont *cellFont4 = [UIFont fontWithName:@"ArialRoundedMTBold" size:18];

    UILabel *month = [[UILabel alloc] initWithFrame:CGRectMake(8, 10, 53, 21)];
    month.font = cellFont3;
    month.text = currentmonth;
    month.textAlignment = UITextAlignmentCenter;
    month.backgroundColor = [UIColor clearColor];

    UILabel *date = [[UILabel alloc] initWithFrame:CGRectMake(11, 21, 50, 45)];
    date.font = cellFont4;
    date.text = currentday;
    date.textAlignment = UITextAlignmentCenter;
    date.backgroundColor = [UIColor clearColor];

    UIImageView *alternate = [[UIImageView alloc] initWithFrame:CGRectMake(1,1,69,69)];
    alternate.image = [UIImage imageNamed:@"calendar1.png"];
    alternate.contentMode = UIViewContentModeScaleAspectFit;
    UILabel *alternatelabel = [[UILabel alloc] initWithFrame:CGRectMake(82,0,228,53)];

    alternatelabel.backgroundColor = [UIColor clearColor];
    CALayer * l = [alternate layer];

    [l setMasksToBounds:YES];
    UILabel *detailLabel = [[UILabel alloc] initWithFrame:CGRectMake(82, 20, 228, 53)];
    detailLabel.backgroundColor = [UIColor clearColor];
    detailLabel.text = [NSString stringWithFormat:@"%@ - %@", articleDateString, entry.blogTitle];
    detailLabel.textColor = [UIColor grayColor];
    detailLabel.font = cellFont2;
    alternatelabel.font = cellFont;

    alternatelabel.text = entry.articleTitle;

    [cell.contentView addSubview:alternate];
    [cell.contentView addSubview:alternatelabel];
    [cell.contentView addSubview:detailLabel];
    [cell.contentView addSubview:month];
    [cell.contentView addSubview:date];
    [detailLabel release];
    [alternatelabel release];
    [alternate release];        

}

return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:37:58.380

**使用单元重用机制是错误的。**使用此模板

```
#define TAG_MONTH 1001

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

static NSString *CellIdentifier = @"Cell";

RSSEntry *entry = [_allEntries objectAtIndex:indexPath.row];

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] autorelease];
// any other views can be added to cell here

    UILabel *month = [[UILabel alloc] initWithFrame:CGRectMake(8, 10, 53, 21)];
    month.font = cellFont3;
    month.textAlignment = UITextAlignmentCenter;
    month.backgroundColor = [UIColor clearColor];
    month.tag = TAG_MONTH;

}

// here you should fill all fields of cell with "entry" or make it empty
NSString currentmonth = @"something";
UILabel *month = [cell.contentView viewWithTag:TAG_MONTH];
    month.text = currentmonth;

return cell;
} 
```

其他时刻：

1.  你不应该在循环中初始化格式化程序，初始化一次。
2.  将其提取到新方法中

    if ([monthfromdate isEqualToString:@"01"]) {
    self.currentmonth = @"January";
    }

    和优化，它可以更简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:33:43.120

检查此方法返回的数字，可能是它的返回 2

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section; 
```

# iis - HTTP.sys 如何将请求映射到特定的网站应用程序池？

> ID：12524218
> 
> 赞同：1
> 
> 时间：2012-09-21T04:23:45.620
> 
> 标签：iis

我正在学习 IIS。因此，无论何时创建应用程序池，其 id 都会在 HTTP.sys 中注册。那么当请求来自客户端时，它将如何发现该请求属于该特定 ID？

那么 Web Admin Services (WAS) 有什么用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T07:35:18.557

显然，从 IIS 配置（元数据库或 applicationHost.config）中，您可以看到请求路径（例如 /vdir1/file1.aspx）到应用程序池的映射。此类映射也加载到 http.sys，以便它可以将传入请求映射到预期的应用程序池。

WAS 是一种创建/处理 w3wp.exe 实例的服务。它还读取 IIS 配置以了解有多少应用程序池，以及如何根据设置创建工作进程。BTW，它的正式名称是Windows Process Activation Service。

# xcode - Xcode NSManagedObject 查询具有 2 个组条件

> ID：12524222
> 
> 赞同：1
> 
> 时间：2012-09-21T04:24:33.403
> 
> 标签：xcode, core-data, group-by, nsmanagedobject

我正在尝试使用 NSManagedObjects 复制此查询：

```
 SELECT 
      t1.znumber, t2.znumber, AVG(t1.zaroma)
    FROM 
      zcuppings t1
      LEFT JOIN zrounds t2 ON (t1.zround=t2.z_pk)
      LEFT JOIN zexaminees t3 ON (t2.zexaminee=t3.z_pk)
    WHERE
      t3.zcourse = 1
    GROUP BY 
      t1.znumber, t2.znumber 
```

像这样：

```
NSFetchRequest* fetch = [NSFetchRequest fetchRequestWithEntityName:@"Cuppings"];
fetch.predicate = [NSPredicate predicateWithFormat:@"round.examinee.course == %i",1];
NSEntityDescription* entity = [NSEntityDescription entityForName:@"Cuppings"
                                        inManagedObjectContext:managedObjectContext];
NSAttributeDescription* group = [entity.attributesByName objectForKey:@"number"];
NSAttributeDescription* group2 = [entity.attributesByName objectForKey:@"round.number"];
NSExpression *keyPathExpression = [NSExpression expressionForKeyPath: @"aroma"];
NSExpression *exprAVG = [NSExpression expressionForFunction: @"average:"
                      arguments: [NSArray   arrayWithObject:keyPathExpression]];
NSExpressionDescription *exprDescription = [[NSExpressionDescription alloc] init];
[exprDescription setName: @"avgAroma"];
[exprDescription setExpression: exprAVG];
[exprDescription setExpressionResultType:NSDecimalAttributeType];

[fetch setPropertiesToFetch:[NSArray arrayWithObjects:group, group2, 
  exprDescription, nil]];
[fetch setPropertiesToGroupBy:[NSArray arrayWithObjects:group, group2, nil]];
[fetch setResultType:NSDictionaryResultType];
NSError* error = nil;
NSArray *results = [managedObjectContext executeFetchRequest:fetch error:&error];
NSLog(@"%@", results); 
```

但是 group2 等于 nil 而我只得到“数字”字段......我做错了什么？

# java - GUI学生申请表

> ID：12524223
> 
> 赞同：0
> 
> 时间：2012-09-21T04:24:47.070
> 
> 标签：java, swing

我用 NetBeans 创建了一个学生申请表。表单包含 `JTextFields, JRadioButtons, JComboBoxes, JTextArea, and two JButtons`，一个是`SUBMIT`另一个是`Reset`JButton。然后我将它连接到我的 MySQL 数据库。点击后`SUBMIT` `JButton`数据会存入数据库。但问题是点击后`SUBMIT` `JButton`字段没有被清除。

我希望在输入数据后字段为空。

另一个问题是`JCombobox`，我写了这样的代码：

```
String ob1=(String) combobox1.getSelectedItem()//getting date
String ob2=(String) combobox2.getSelectedItem()//getting month
String ob2=(String) combobox3.getSelectedItem()//getting year 
```

我想以出生日期格式（如 1991 年 3 月 30 日）存储 ob1、ob2、ob3 以上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T04:41:37.570

首先，如果你想在swing中清除字段，你可以自己编写`reset()`，你应该手动清除你的字段，例如`JTextField`，`JTextField.setText("");`

对于 RadioButton，您可以`clearSelection()`使用`ButtonGroup`. 像这样你应该在你的`reset()`方法中定义它。当您对按钮执行操作时，`submit`您可以在 中调用您`reset()`的`actionPerformed`，以便您可以清除字段。您可以`reset()`在重置按钮 actionPerformed 中使用它。

其次，如果你愿意，出生日期格式如 1991 年 3 月 30 日，将其转换为单个字符串，然后你可以使用`SimpleDateFormat`，参考这个链接

[http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)

# scala - 我什么时候应该使用 Scala 方法和函数

> ID：12524224
> 
> 赞同：3
> 
> 时间：2012-09-21T04:24:56.320
> 
> 标签：scala

例如

```
val f1 = (a:Int) => a+1
def f2 = (a:Int) => a+1 
```

似乎它们是可以互换的，是否有任何特定的用例我应该使用特定的用例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T04:27:03.070

通常将`def`版本写为：

```
def f2(a:Int) = a+1 
```

如果你按照他们的方式编写它，它实际上是在创建一个方法`f2`，当被调用时，它会构造一个新的函数闭包。所以在你的两种情况下，你仍然有一个功能。但是在第一种情况下，该函数只被构造一次并存储（作为`f1`）以供以后使用。但是在第二种情况下，每次`f2`引用都会构造函数，这有点浪费。

那么什么时候更喜欢函数而不是方法呢？好吧，在某些情况下，您可以更轻松地使用函数。考虑这种情况：

```
(1 to 3).map(f1 andThen f1)    // totally fine
(1 to 3).map(f2 andThen f1)    // "missing arguments" error
(1 to 3).map(f2 _ andThen f1)  // fixed by adding "_" after the method name 
```

所以`f1`总是一个函数，所以你可以调用一个类似的方法`andThen`。变量`f2`代表一个方法，所以不希望这样使用；它总是期望后面跟着参数。您总是可以通过在方法后面加上下划线将其转换为函数，但如果没有必要，这可能看起来有点难看。

# php - How to load PHP file into DIV by jQuery?

> ID：12524228
> 
> 赞同：12
> 
> 时间：2012-09-21T04:25:59.307
> 
> 标签：php, javascript, jquery, ajax

I am developing a website and I have this on the side menu :

`<a href="#" class="leftMenu" id="contact">Contact Us</a>`

then I have this script

```
$(document).ready(function(){
  $("#contact").click(function(){
    $("#contents").load('home.php');
  });
}); 
```

and I have this DIV inside my page :

`<div class="contentWrapper" id="contents"></div>`

Obviously, what I am trying to do is to load home.php when I click on the Contact Us hyperlink, which doesn't work. What is wrong with my code?

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-21T04:42:45.953

add `home.php` page url instead of file name.

```
$(document).ready(function(){
  $("#contact").click(function(){
    $("#contents").load('url to home.php');
  });
}); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-21T04:34:07.993

You can use `$.load()` like this, to get more data of whats happening. When you see the error message, you probably can solve it yourself ^^

```
$("#contents").load("home.php", function(response, status, xhr) {
  if (status == "error") {
      // alert(msg + xhr.status + " " + xhr.statusText);
      console.log(msg + xhr.status + " " + xhr.statusText);
  }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-20T12:50:28.873

@user2805663 I know this post is pretty old but though let me post the solution it might help someone else, as it helped me.

Thanks to @Mangala Edirisinghe

by following method you can load two separate files in two different DIVs with single click(Link).

```
$(document).ready(function(){ 
 $("#clickableLink").click(function(){ 
  $("#contents").load('url/file1.php');
  $("#contents2").load('url/file2.php'); 
 }); 
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T04:58:36.603

You have to use the path of "**home.php**" from index **dir** and not from script dir.

If you site is :

```
/
  index.php  
  scripts
     /script.js 
     /home.php 
```

You have to modify your parameter passing "**scripts/home.php**"

# jquery - JQuery 淡入效果

> ID：12524235
> 
> 赞同：0
> 
> 时间：2012-09-21T04:27:15.400
> 
> 标签：jquery, html, fadein, fadeout

所以基本上我在左边有一个导航栏。当用户单击一个选项时，它应该淡入与其关联的内容。当用户单击另一个选项时，它应该淡出当前内容并淡入下一个内容。我知道如何处理这方面的逻辑，但由于某种原因，淡入淡出不起作用。这是我的html

```
<div id="Hotel" class="Information"  style="display:none;">
    <p>test</p>
    <p>test</p>
    <p>test</p>
    <p>test</p>
    <p>test</p>
</div> 
```

这是我的jQuery：

```
$(document).ready(function(e) {
    $("ul.navigation > li").click(function(e) {
        $sel = $(this).val();
        if($sel == 0)
            $("#schedule").show();
        else if($sel == 1) {
            $('#Hotel').show();
            $('#Hotel').fadeIn('slow');
        }
    });
}); 
```

当我点击导航栏上的酒店链接时，内容只是出现，没有任何褪色。我的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:29:05.230

不要调用 show()。 [http://api.jquery.com/fadeIn/](http://api.jquery.com/fadeIn/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T04:30:50.377

像这样试试

```
$(document).ready(function(e) {
$("ul.navigation > li").click(function(e) {
    $sel = $(this).val();
    if($sel == 0)
        $("#schedule").show();
    else if($sel == 1) {
        $('#Hotel').fadeIn('slow');
    }
  });
}); 
```

从代码中删除 show() 函数并像这样编辑

# ios - iOS钥匙串中的“配置文件”是什么意思？

> ID：12524239
> 
> 赞同：-1
> 
> 时间：2012-09-21T04:27:44.740
> 
> 标签：ios, keychain

在苹果的文件中，它告诉我：

```
Note: On iPhone, Keychain rights depend on the provisioning profile used to sign your application. Be sure to consistently use the same provisioning profile across different versions of your application. 
```

“配置文件”是什么意思？是我构建应用程序的“代码符号”吗？这是否意味着如果我使用相同的“代码符号”来构建两个应用程序，在每个应用程序中我都可以访问相同的钥匙串。

ps：我想在 iOS 的钥匙串中为不同的应用程序保存一些共享字符串。只是iOS中的一些共享空间用于不同的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:42:34.423

这是您在登录 developer.apple.com 后下载的内容，您需要在您的设备上运行应用程序。

# java - 如何让 Java 注册一个带空格的字符串输入？

> ID：12524243
> 
> 赞同：12
> 
> 时间：2012-09-21T04:28:03.750
> 
> 标签：java, string, space

这是我的代码：

```
public static void main(String[] args) {
  Scanner in = new Scanner(System.in);
  String question;
  question = in.next();

  if (question.equalsIgnoreCase("howdoyoulikeschool?") )
    /* it seems strings do not allow for spaces */
    System.out.println("CLOSED!!");
  else
    System.out.println("Que?"); 
```

当我试着写“你喜欢学校吗？” 答案总是“阙？” 但它可以很好地作为“你喜欢学校吗？”

我应该将输入定义为字符串以外的内容吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-21T04:32:09.197

`in.next()`将返回以空格分隔的字符串。`in.nextLine()`如果您想阅读整行，请使用。读取字符串后，使用`question = question.replaceAll("\\s","")`删除空格。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-01-04T06:51:53.817

由于它很长一段时间并且人们一直建议使用`Scanner#nextLine()`，因此还有另一个机会`Scanner`可以占用输入中包含的空格。

[类扫描仪](https://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)

> Scanner 使用分隔符模式将其输入分解为标记，默认情况下匹配空格。

您可以使用`Scanner#useDelimiter()`将分隔符更改`Scanner`为另一种模式，例如 a`line feed`或其他。

```
Scanner in = new Scanner(System.in);
in.useDelimiter("\n"); // use LF as the delimiter
String question;

System.out.println("Please input question:");
question = in.next();

// TODO do something with your input such as removing spaces...

if (question.equalsIgnoreCase("howdoyoulikeschool?") )
    /* it seems strings do not allow for spaces */
    System.out.println("CLOSED!!");
else
    System.out.println("Que?"); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-11-24T16:59:24.750

我今天在 Java 中发现了一个非常奇怪的东西，所以它就像 -

**如果您从用户那里输入超过 1 件事**，请说

```
Scanner sc = new Scanner(System.in);
int i = sc.nextInt();
double d = sc.nextDouble();
String s = sc.nextLine();

System.out.println(i);
System.out.println(d);
System.out.println(s); 
```

所以，如果我们运行这个程序，它可能会询问这 3 个输入，并说我们的输入值是 10、2.5、“Welcome to java” 程序应该按原样打印这三个值，因为我们使用了 nextLine () 所以它不应该忽略我们在变量**s中输入的空格之后的文本**

但是，您将得到的输出是 -

```
10
2.5 
```

就是这样，它甚至不提示输入字符串。现在我正在阅读它，老实说，我的理解仍然存在一些差距，我所能弄清楚的是在输入 int 输入然后当我们按 enter 时的双重输入后，它认为这是提示并忽略了下一行（）。

所以把我的代码改成这样 -

```
Scanner sc = new Scanner(System.in);
int i = sc.nextInt();
double d = sc.nextDouble();
sc.nextLine();
String s = sc.nextLine();

System.out.println(i);
System.out.println(d);
System.out.println(s); 
```

完美地完成了这项工作，因此它与前面示例中存储在键盘缓冲区中的“\n”之类的内容有关，我们可以使用它绕过。

如果有人知道，请帮我解释一下。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-10T22:49:28.057

Instead of

```
Scanner in = new Scanner(System.in);
String question;
question = in.next(); 
```

Type in

```
Scanner in = new Scanner(System.in);
String question;
question = in.nextLine(); 
```

This should be able to take spaces as input.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-02T15:52:28.943

这是在 java 中获取输入的示例实现，我在薪水字段上添加了一些容错以显示它是如何完成的。如果您注意到，您还必须关闭输入流.. 享受:-)

```
/* AUTHOR: MIKEQ
 * DATE: 04/29/2016
 * DESCRIPTION: Take input with Java using Scanner Class, Wow, stunningly fun. :-) 
 * Added example of error check on salary input.
 * TESTED: Eclipse Java EE IDE for Web Developers. Version: Mars.2 Release (4.5.2) 
 */

import java.util.Scanner;

public class userInputVersion1 {

    public static void main(String[] args) {

    System.out.println("** Taking in User input **");

    Scanner input = new Scanner(System.in);
    System.out.println("Please enter your name : ");
    String s = input.nextLine(); // getting a String value (full line)
    //String s = input.next(); // getting a String value (issues with spaces in line)

    System.out.println("Please enter your age : ");
    int i = input.nextInt(); // getting an integer

    // version with Fault Tolerance:
    System.out.println("Please enter your salary : ");
    while (!input.hasNextDouble())
    {
        System.out.println("Invalid input\n Type the double-type number:");
        input.next();
    }
    double d = input.nextDouble();    // need to check the data type?

    System.out.printf("\nName %s" +
            "\nAge: %d" +
            "\nSalary: %f\n", s, i, d);

    // close the scanner
    System.out.println("Closing Scanner...");
    input.close();
    System.out.println("Scanner Closed.");      
}
} 
```

# qt-creator - 从 Qt Creator 运行多个应用程序

> ID：12524244
> 
> 赞同：1
> 
> 时间：2012-09-21T04:28:04.093
> 
> 标签：qt-creator

有没有办法从 Qt creator 同时运行两个应用程序？基本上，我正在尝试运行在 Qt creator 的皮肤内开发的 UI 应用程序，该应用程序也需要运行 qvfb 帧缓冲区工具才能启动皮肤文件。我尝试将 UI 应用程序和 qvfb 都添加到自定义运行设置中，但一次只能运行一个。还有其他可能的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T17:03:42.187

您首先在 QtCreator 之外从 Qt 安装的 bin 文件夹运行 QVFB

`PATH_TO_QT/bin/qvfb`

然后使用“-qws -display QVFb:0”作为运行参数运行 UI 应用程序

在 QtCreator 中，转到侧栏上的“项目”，然后单击“运行设置”并添加

`-qws -display QVFb:0`

到参数字段

# ios - 在 Xcode 4.5 中查看 setBackgroundColor 不会调用 viewdidload

> ID：12524245
> 
> 赞同：-1
> 
> 时间：2012-09-21T04:28:12.983
> 
> 标签：ios, ios6, xcode4.5

我刚刚升级到 Xcode4.5。当我运行单元测试时，我意识到 [view setbackgroundcolor] 不会调用 [viewdidload]。

有没有人有同样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:38:28.323

这是一些你不应该依赖的**无证行为，因为它（有一天会破坏你的代码）***只是破坏了你的代码*......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:38:47.773

你用的是iOS6吗？

> [http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)
> 
> 在 iOS 6 之前，当发生内存不足警告时，如果 UIViewController 类知道以后可以重新加载或重新创建它们，则会清除其 >views。如果发生这种情况，它还会调用 >viewWillUnload 和 viewDidUnload 方法，让您的代码有机会放弃与视图层次结构关联的任何对象的所有权，包括从 nib 文件加载的对象、在 viewDidLoad 方法中创建的对象、和对象在运行时 >lazily 创建并添加到视图层次结构中。在 iOS 6 上，视图永远不会被清除，并且这些 >methods 永远不会被调用。如果您的视图控制器需要在内存不足时执行特定任务，它应该覆盖 didReceiveMemoryWarning 方法。

# c# - 为什么 Response.redirect(url, false) 随着站点使用量的增长而引发异常？

> ID：12524247
> 
> 赞同：-1
> 
> 时间：2012-09-21T04:28:16.533
> 
> 标签：c#, asp.net, exception

> **可能重复：**
> [为什么 response.redirect 导致错误？](https://stackoverflow.com/questions/9829429/why-response-redirect-cause-the-error)

在我的网站中，我使用了该方法`Response.Redirect(url, false)`。当站点中没有负载时，它运行良好。但是随着高峰时间的到来，它会抛出异常。为什么`Response.Redirect`在网站使用率变高时抛出异常？

显示的例外是`Thread was being aborted.`。我无法在本地重现此错误。仅在使用率高时才投入使用。

可能的原因可能是它通过完成数据计算的页面，保存到数据库中，然后再次传递到显示数据的另一个页面。两次我都曾经`Response.Redirect(url, false)`浏览过这些页面。这通常需要 20-30 秒才能显示最后一页。但是在异常发生时，请求只处理了大约 10 秒。它在我的头上旋转。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:55:01.543

失败的可能不是 Response.Redirect，而是目标页面请求的完成——如果您在浏览器中正常打开它，这将失败。

您需要调查站点中的瓶颈所在。

# shopify - Unicode 博客文章标题通过 API

> ID：12524251
> 
> 赞同：0
> 
> 时间：2012-09-21T04:28:46.363
> 
> 标签：shopify

在为博客创建新的文章对象时，我遇到了 Shopify API 的问题。我有一个将商家的第 3 方博客导入 Shopify 的应用程序。其中一些博客不是英文的，因此包含大量 unicode 字符。我可以使用 xml 字符替换对这些帖子的正文进行编码，但我不能对标题进行编码。例如，这里是导入到 Shopify 测试商店的俄语示例博客：http://heller-sawayn5574.myshopify.com/blogs/unicode [（](http://heller-sawayn5574.myshopify.com/blogs/unicode)此处为原始博客：[http](http://recen-zist.livejournal.com/) ://recen-zist.livejournal.com/ ）

您可以看到正文显示正确编码，但标题不是并且出现乱码。Shopify 采用 xml 编码的字符并将它们按字面意思显示在标题中，而不是像文章正文中那样将字符转换回 unicode。

如果我登录商店管理员并手动更改标题以包含 unicode 字符，它将正确显示。所以这个问题只发生在通过 API 创建博客文章时。但是，由于此错误，任何在标题中使用 unicode 字符创建的帖子都无法使用 API 进行编辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T21:38:16.883

我找到了一种解决方法，方法是不对标题字符进行 XML 编码，而是将它们保留为 UTF-8。我使用的是 Python Shopify API，以前无法使用 UTF-8，这迫使我使用 XML 进行编码。有关问题的背景，请参阅此讨论： [https ://groups.google.com/forum/?hl=en&fromgroups=#!topic/shopify-app-discuss/T5gee1A_2lE](https://groups.google.com/forum/?hl=en&fromgroups=#!topic/shopify-app-discuss/T5gee1A_2lE)

解决方法是将 pyactiveresource 依赖更新到版本 1.0.2

仍然存在一个问题，为什么 xml 字符编码适用于博客文章正文，但不适用于博客标题。但只要有另一种方法可以做到这一点，这应该无关紧要。

# php - 验证更新表格

> ID：12524258
> 
> 赞同：2
> 
> 时间：2012-09-21T04:29:34.617
> 
> 标签：php, javascript, validation

我正在创建一个页面，在该页面中我从表中获取数据并在文本框中显示数据以允许用户更新记录。我还验证了用户对文本框的输入。但问题是当用户不更改任何字段并单击提交时，它会验证用户名字段，即它总是想要更改（或编辑文本框）文本框的值。

这是我的代码：

```
<?php
include("conn.php");
$id=$_GET['id'];
$sql="SELECT * FROM test WHERE id='$id'";
$res=mysql_query($sql);
$row=mysql_fetch_array($res);
?>

<script type='text/javascript'>
function formValidator()
{
    // Make quick references to our fields
    alert("hiiiiiii");
    var name = document.getElementById('name').value;
    var email = document.getElementById('emailid').value;
    var ph = document.getElementById('ph').value;

    if( name=="" || name==null)
     {
         alert("Please Enter user name");
         return false;
     }
     var alphaExp = /^[a-zA-Z]+$/;
     if(!name.match(alphaExp))
      {
          alert("please Enter only Alphabates for Name");
          return false;
      }

      if(email=="" || email=="null")
      {
          alert("Please Enter Email Address");
          return false;
      }
      var emailExp = /^[\w\-\.\+]+\@[a-zA-Z0-9\.\-]+\.[a-zA-z0-9]{2,4}$/;
      if(!email.match(emailExp))
       {
           alert("please Enter valide email address");
            return false;
       }
       if(ph=="" || ph=="null")
       {
           alert("Please Enter Phone Number");
           return false;
       }
       var numericExpression = /^[0-9]+$/;
       if(!ph.match(numericExpression))
       {
           alert("Enter only Digit for Phone Number");
           return false;
       }
}
</script>

<form name="updateform" method="POST" action="update_ind_new.php" onsubmit='return formValidator()'>
  <table width="200" border="0">
    <tr>
     <td>User Name</td>
      <td>E-Mail</td>
       <td>phno</td>
     </tr>
    <tr>
    <td><label>
        <input name="name" type="text" id="name" value=" <?php echo $row['name']; ?>" >
      </label></td>
      <td><label>
        <input name="email" type="text" id="emailid" value=" <?php echo $row['emailid']; ?>" >
      </label></td>
      <td><label>

        <input name="ph" type="text" id="ph" value=" <?php echo $row['phno']; ?>" >
      </label></td>

    </tr>
    <tr>
      <td> <input name="id" type="hidden" id="id" value=" <?php echo $row['id']; ?>"></td>
      <td><label>
        <input type="submit" name="Submit" value="Submit">
      </label></td>
      <td>&nbsp;</td>
    </tr>
  </table>
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:40:09.183

写`return true;`在这一行的末尾

```
 if(!ph.match(numericExpression))
   {
       alert("Enter only Digit for Phone Number");
       return false;
   }
   return true; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:31:42.597

放在`return true;`验证函数中所有条件的末尾

或在“if else if else”条件下进行验证

# javascript - 搜索引擎可以抓取纯 JavaScript 应用程序吗？

> ID：12524261
> 
> 赞同：2
> 
> 时间：2012-09-21T04:29:52.213
> 
> 标签：javascript, json, user-interface, backbone.js

UI 中有很多向纯 JavaScript 前端发展的趋势，如主干.js 或 javascript mvc。我知道谷歌有一些准则可以将#hash 标签添加到您的网址以使其可抓取......但我很好奇他们是否仍然可以抓取不遵循此准则的应用程序。

我正在争论是在服务器端使用模板引擎，还是只使用纯 javascript 解决方案和对 api 的 json 请求。我希望人们在搜索时找到我网站上的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:49:58.207

是的，他们可以，**如果您为他们描述如何做到这一点。**谷歌的详细答案在[这里](https://developers.google.com/webmasters/ajax-crawling/)

您可以使用每个动态状态的主题标签/html 快照。还有很多其他方法可以让纯 js 网站爬网。您只需要选择一个更适合您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T11:07:51.850

[Distal Templates](http://code.google.com/p/distal/)使用 JSON 和模板将可被 Google 索引的静态网页变成动态页面。

# php - 我只想显示 4 项 td ，然后用另外 4 项开始一个新的 tr

> ID：12524263
> 
> 赞同：0
> 
> 时间：2012-09-21T04:30:03.910
> 
> 标签：php, html

```
echo "<table class='listing'>"; 
$i=0;
for ($i=1;$i<=$num;$i++) {
       while( $row = $rs->fetch_assoc() ) {
        echo "<tr>";
        echo "<td><a href='?p=view_org&oid={$row['org_id']}'>{$row['org_name']}<br /><img src='{$row['org_logo']}' width='120px' /></a></td>";
        echo "</tr>";  
    }
echo "</table>"; 
```

结果是用一个 tr 和 td 产生的，所以图像显示为一个列表......谁能给出任何想法来处理这个循环，使其只有 4 个 td 项，然后用另外 4 个项目开始一个新的 tr？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T04:34:36.693

```
echo "<table class='listing'><tr>";
$i = 0;
while( $row = $rs->fetch_assoc() ) {
    echo "<td><a href='?p=view_org&oid={$row['org_id']}'>{$row['org_name']}<br /><img src='{$row['org_logo']}' width='120px' /></a></td>";
    $i++;
    if($i%4==0){
        echo "</tr><tr>";
    }
}
echo "</tr></table>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T04:35:20.607

像这样试试

```
echo "<table class='listing'>"; 
$i=0;
echo "<tr>";   
     while( $row = $rs->fetch_assoc() ) {         
     echo "<td><a href='?p=view_org&oid={$row['org_id']}'>{$row['org_name']}<br /><img src='{$row['org_logo']}' width='120px' /></a></td>";
     $i++; 
     if($i%4==0)
         echo "</tr><tr>";               
echo "</table>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T04:34:33.173

用户数组函数：array_chunk();

```
$input_array = array('a', 'b', 'c', 'd', 'e');
$t = array_chunk($input_array, 4);

It will give output like this : 

Array
(
[0] => Array
    (
        [0] => a
        [1] => b
        [2] => c
        [3] => d        

    )

[1] => Array
    (
        [0] => e
    )

) 
```

您可以使用 for / foreach 循环：

```
<table>

for($i ; $< count($t); $i++)
{
    <tr>

         for($j = 0 ; $j < 4 ; $j++) 
         {
             <td>echo $t[$i][$j];</td>
         }

    </tr>
}
</table> 
```

# android - Android：如何测试应用程序中的内存泄漏？

> ID：12524267
> 
> 赞同：6
> 
> 时间：2012-09-21T04:30:22.317
> 
> 标签：android, memory-leaks, android-emulator

我开发了一个应用程序，我想检查应用程序中发生的内存泄漏。我正在尝试使用 Eclipse MAT，但不成功，我正在获取 HROF 文件，但 Eclipse MAT 无法读取它。谁能帮帮我。有什么其他方法可以查到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T04:47:36.867

Android 的 dump.hprof 文件需要转换。然后你可以在 MAT 中打开 converted-dump.hprof。

```
hprof-conv dump.hprof converted-dump.hprof 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T05:10:18.637

我发现[这个](http://www.youtube.com/watch?v=_CruQY55HOk)视频非常有用。这讨论了如何从 logcat（垃圾收集器日志）中查找内存泄漏以及如何使用内存分析器（MAT）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T23:24:48.357

@sujith[视频](http://www.youtube.com/watch?v=_CruQY55HOk)非常好。总而言之，**1）**视频谈到了“非静态内部类”的一个非常难以发现的泄漏。[本页](https://stackoverflow.com/questions/10864853/when-exactly-is-it-leak-safe-to-use-anonymous-inner-classes)对此有详细说明。 **2）**他谈到了使用Memory Analyzer Tool时的一些重要概念，例如浅堆与保留堆，GC Root和支配树。 **3)**他展示了一个使用 MAT 来识别泄漏的示例。在 MAT 中，他所说的最有用的工具是 Histogram 和 Dominator Tree。在进一步检查对象时，他使用右键菜单“GC Root 路径”，然后使用“排除弱引用”。

# excel - 如何处理隐藏的excel文件？

> ID：12524268
> 
> 赞同：0
> 
> 时间：2012-09-21T04:30:23.093
> 
> 标签：excel, apache-poi

当文件被隐藏时，FileOutputStream方法不能正常使用。但是POI只提供了这一种处理excel的方法，那么如何处理被POI隐藏的excel文件呢？

# performance - 将具有小值的密集矩阵相乘

> ID：12524276
> 
> 赞同：0
> 
> 时间：2012-09-21T04:31:08.317
> 
> 标签：performance, optimization, matrix

如果将两个矩阵相乘`A*B = C`，则它们中的任何一个都可以有大量可以忽略不计的值，即接近零。实际上没有任何块结构为零。

我有什么解决方案来减少操作？我主要考虑尝试置换矩阵以进入块零结构，但这本身可能是`O(3)`成本。CRS 或 CCS 似乎没有很多现成的 dgemm 等价物。

# jakarta-ee - JRebel 监控 struts.xml

> ID：12524278
> 
> 赞同：0
> 
> 时间：2012-09-21T04:31:39.523
> 
> 标签：jakarta-ee, struts2, jrebel

找不到任何有关此的信息。JRebel 有什么方法可以监控 struts.xml 的变化。这在测试时发生了很大变化。

有什么解决办法吗？

**已编辑**

**安慰**

```
INFO: Starting Servlet Engine: Apache Tomcat/7.0.30

[2012-09-22 19:29:45] JRebel: Directory 'C:\MyProjects\4-Interceptors\target\classes' will be monitored for changes.
[2012-09-22 19:29:45] JRebel: Directory 'C:\MyProjects\4-Interceptors\src\main\webapp' will be monitored for changes.

[2012-09-22 19:29:50] JRebel-Log4j: Monitoring Log4j configuration in 'file:/C:/MyProjects/4-Interceptors/target/classes/log4j.properties'. 
```

**叛逆者.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.zeroturnaround.com" xsi:schemaLocation="http://www.zeroturnaround.com http://www.zeroturnaround.com/alderaan/rebel-2_0.xsd">

    <classpath>
        <dir name="C:/MyProjects/4-Interceptors/target/classes">
        </dir>
    </classpath>

    <web>
        <link target="/">
            <dir name="C:/MyProjects/4-Interceptors/src/main/webapp">
            </dir>
        </link>
    </web>

</application> 
```

![截屏](../Images/dbf23d9210636903196a1f14d66ca2a9.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T14:08:43.700

您使用哪个版本的 Struts？您对文件所做的更改是什么？也许这还没有实现。您可以做的最好的事情是提供一个示例应用程序并将您的问题描述发送给 JRebel 支持

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:20:00.333

只需添加`rebel.xml`到项目`resource`文件夹中的项目文件夹。它将自动检测`struts.xml`.

**注意::** jrebel 不依赖于框架。

# matlab - 方程是局部奇异的，但雅可比不是

> ID：12524281
> 
> 赞同：2
> 
> 时间：2012-09-21T04:31:48.940
> 
> 标签：matlab, singular

我一直在使用 MATLAB 中的 Trust-Region Dogleg 方法来求解非线性方程组：f(x)=c。但是，当我将 c 向量的值更改为某些值时，MATLAB 会返回问题是局部奇异的。当我输出雅可比时，行列式大约是 1，所以这个矩阵不是奇异的。是否有可能有一个没有奇异雅可比的局部奇异方程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T13:18:32.597

我过去曾看到，如果您需要极高的精度（低容差），MATLAB 会发出此警告。你的容忍度是多少？你能提供更多信息吗？

抱歉，我没有将此作为评论发布，但我还没有评论特权。而且我无法通过个人资料联系到你。

# c# - 通过 c# .net 进行 oracle 数据库转储

> ID：12524284
> 
> 赞同：0
> 
> 时间：2012-09-21T04:31:57.917
> 
> 标签：c#, .net, oracle, oracle10g

我有一个非常有趣的问题。

我使用带有“runas”动词的 Process.Start 以管理员身份运行进程，即。

```
string currentstatus;
            ProcessStartInfo startInfo = new ProcessStartInfo();
            Process myprocess = new Process();
            try
            {
                startInfo.FileName = "cmd"; //
                startInfo.Verb = "runas";
                startInfo.Arguments = "/env /user:" + "Administrator" + " cmd";
                startInfo.RedirectStandardInput = true;
                startInfo.RedirectStandardOutput = true;
                startInfo.UseShellExecute = false; //'required to redirect
                startInfo.CreateNoWindow = true; // '<---- creates no window, obviously
                myprocess.StartInfo = startInfo; //
                myprocess.Start(); //
                System.IO.StreamReader SR;
                System.IO.StreamWriter SW;
                Thread.Sleep(200);
                SR = myprocess.StandardOutput;
                SW = myprocess.StandardInput;
                SW.WriteLine(commandexecuted); // 'the command you wish to run.....
                SW.WriteLine("exit"); // 'exits command prompt window
                Thread.Sleep(200);
                currentstatus = SR.ReadToEnd();

                SW.Close();
                SR.Close();

            }
            catch (Exception e)
            { } 
```

据说已执行命令的给出为

```
exp *****/******@!!!!!!! owner =!!!!!!!! file =D:/SS.dmp 
```

现在我的问题是

1）当我通过右键单击 cmd.exe 并选择“以管理员身份运行”手动运行上述查询时，它工作正常，但没有它会抛出错误

2）所以我需要通过代码执行该过程。

我不知道我哪里出错了？

这只是采用 oracle 转储的方式，否则它可能有其他方式？

等待您的宝贵回复和意见......

更新 1)

我也使用此代码检查当前用户是否是管理员

```
 private static bool IsAdministrator()
{
    WindowsIdentity identity = WindowsIdentity.GetCurrent();
    WindowsPrincipal principal = new WindowsPrincipal(identity);
    return principal.IsInRole(WindowsBuiltInRole.Administrator);
} 
```

它返回给我，因为当前用户只是管理员。

对我上述问题的任何建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:45:06.090

由于 runas 没用，请尝试嵌入[应用程序清单](http://msdn.microsoft.com/en-us/library/bb756929.aspx)

```
<requestedExecutionLevel level="requireAdministrator" uiAccess="false" /> 
```

这应该可行，无论如何你总是很方便：

```
myprocess.StartInfo.UserName = "Administrator"; 
myprocess.StartInfo.Password = "password"; 
```

# java - 不兼容的数据类型：boolean 和 int

> ID：12524294
> 
> 赞同：0
> 
> 时间：2012-09-21T04:33:18.437
> 
> 标签：java

尝试编译时出现此错误。

不可比较的类型：boolean 和 int

```
result= (result) && (found_list[i] !=0); 
```

为什么我会收到此错误？我如何解决它？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:43:49.567

与 c、c++ 和许多其他语言不同，`0`&在 java`1` **中不是** `false`& 。`true`

这是一个常见的错误。此外，检查类似的东西`boolean != false`与检查是否为真是完全相同的`boolean`。IE

```
if(b != false) 
```

和

```
if(b) 
```

所以，你可以做

```
result = result && found_list[i]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T04:37:31.883

您正在尝试将`found_list[i]`boolean`0`类型与 int类型进行比较

然后改变

```
result= (result) && (found_list[i] !=0); 
```

至

```
result= (result) && (found_list[i]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T04:37:49.453

由于 found_list[] 是一个布尔数组，因此不能与 int 值进行比较。`(found_list[i] !=0)`是错的。

这样做的方法是：

```
result= (result) && (found_list[i]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T04:49:49.643

Boolean 仅将 True 或 False 作为值，与其他数据类型（如 int、long、double、short 等）不同...

因此，如果结果是布尔值，则存储在其中的值也应该是布尔值，即 True 或 False。

```
result= (result) && (found_list[i] !=0); 
```

这里**（结果）是 True 或 False**。如果你刚刚初始化它并离开就像

布尔结果；

那么这里的值为假。否则，如果您在此之前的某个地方对其进行了修改，它将是相应的值。

现在 (found_list[i] !=0); 是一种错误的编码方式。如果 found_list[] 是布尔值，则不能将其与 int 值（在本例中为 0）进行比较。

**您或在这里尝试做的是 true/false!=0，这是无法比较的。**

因此，您收到此错误。您可以改为将其更改为

```
result= ((result) && (found_list[i])) 
```

# pdf - (PdfSharp) 如何使用 pdfsharp 更改现有 pdf 文件的页面大小？

> ID：12524302
> 
> 赞同：0
> 
> 时间：2012-09-21T04:34:28.953
> 
> 标签：pdf, pdfsharp

我有一个 Legal 页面大小的 pdf 文件，如何使用 PdfSharp 将其更改为 Letter 大小？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T05:37:08.593

PDFsharp 包含一个“两页合一”示例。我会用它作为首发；它在一个横向页面上绘制两个纵向页面。它可以很容易地更改为将一个纵向页面复制到一个新的纵向页面上。字母大于合法。因此，您必须决定如何处理：

*   在保持宽度的同时缩放高度以适应
*   按比例缩小高度和宽度以保持纵横比
*   保持页面大小在底部截断保持页面大小
*   在顶部和底部截断（相同或不同的拉伸）

前两个选项适用于任何文档，如果您知道文档并且知道您不会丢失重要信息，则最后两个选项可能是合适的。

# winforms - NHibernate 2 级缓存与 Prevalence

> ID：12524303
> 
> 赞同：0
> 
> 时间：2012-09-21T04:34:30.827
> 
> 标签：winforms, nhibernate, caching

我正在编写一个 Windows 窗体应用程序，它需要将一些 NHibernate 的实体数据存储在持久的第二层缓存中。据我所知，唯一满足我的应用程序要求的二级缓存提供程序是 Prevalence，但是当我配置它时我遇到了一个尴尬的异常：

```
System.ArgumentNullException was unhandled
  Message=Value cannot be null.
Parameter name: key
  Source=mscorlib
  ParamName=key
   StackTrace:
   at System.Collections.Generic.Dictionary`2.FindEntry(TKey key)
   at System.Collections.Generic.Dictionary`2.TryGetValue(TKey key, TValue& value)
   at NHibernate.Impl.SessionFactoryObjectFactory.GetNamedInstance(String name)
   at NHibernate.Impl.SessionFactoryImpl.GetRealObject(StreamingContext context)
   at System.Runtime.Serialization.ObjectManager.ResolveObjectReference(ObjectHolder holder)
   at System.Runtime.Serialization.ObjectManager.DoFixups()
   at System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream)
   at Bamboo.Prevalence.Implementation.PendingCommandsEnumerator.NextCommand()
   at Bamboo.Prevalence.Implementation.PendingCommandsEnumerator.MoveNext()
   at Bamboo.Prevalence.PrevalenceEngine.RecoverCommands(CommandLogReader reader, ExceptionDuringRecoveryHandler handler)
   at Bamboo.Prevalence.PrevalenceEngine.RecoverSystem(Type systemType, CommandLogReader reader, ExceptionDuringRecoveryHandler handler)
   at Bamboo.Prevalence.PrevalenceEngine..ctor(Type systemType, String prevalenceBase, BinaryFormatter formatter, ExceptionDuringRecoveryHandler handler)
   at Bamboo.Prevalence.TransparentPrevalenceEngine..ctor(Type systemType, String prevalenceBase, BinaryFormatter formatter, ExceptionDuringRecoveryHandler handler)
   at Bamboo.Prevalence.TransparentPrevalenceEngine..ctor(Type systemType, String prevalenceBase, BinaryFormatter formatter)
   at Bamboo.Prevalence.PrevalenceActivator.CreateTransparentEngine(Type systemType, String prevalenceBase, BinaryFormatter formatter)
   at Bamboo.Prevalence.PrevalenceActivator.CreateTransparentEngine(Type systemType, String prevalenceBase)
   at NHibernate.Caches.Prevalence.PrevalenceCacheProvider.SetupEngine()
   at NHibernate.Caches.Prevalence.PrevalenceCacheProvider.Start(IDictionary`2 properties)
   at NHibernate.Impl.SessionFactoryImpl..ctor(Configuration cfg, IMapping mapping, Settings settings, EventListeners listeners)
   at NHibernate.Cfg.Configuration.BuildSessionFactory()
   at AcessoDados.DB.Configure() in C:\Users\Herberth\MyProject\DataAccess\DB.cs:line 78 
```

这**只是**我正在使用的额外代码：

```
configuration.SessionFactory().Caching.Through<NHibernate.Caches.Prevalence.PrevalenceCacheProvider>().PrefixingRegionsWith("MyRegion").WithDefaultExpiration(60); 
```

当我注释掉这一行时它工作正常（当然没有缓存）；

这是我正在使用的完整代码：

```
configuration = new Configuration();
var mapper = new ModelMapper();
mapper.AddMappings(Assembly.GetExecutingAssembly().GetExportedTypes());
HbmMapping domainMapping = mapper.CompileMappingForAllExplicitlyAddedEntities();
configuration.DataBaseIntegration(c =>
{
    c.Dialect<MySQLDialect>();
    c.ConnectionString = @"Server=localhost;Database=mydb;Uid=root;Pwd=mypwd";
    c.ConnectionString = DBConnectionStrings.Principal;
    c.LogFormattedSql = true;
    c.LogSqlInConsole = true;
    c.IsolationLevel = System.Data.IsolationLevel.ReadCommitted;
});
configuration.AddMapping(domainMapping);
configuration.Cache(c => { c.UseQueryCache = true; });
configuration.SessionFactory().Caching.Through<NHibernate.Caches.Prevalence.PrevalenceCacheProvider>().PrefixingRegionsWith("MyRegion").WithDefaultExpiration(60);
SessionFactory = configuration.BuildSessionFactory(); 
```

所有依赖项都处于最新版本。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T16:32:24.490

我遇到了这个问题，因为目录`NHibernate.Cache.StandardQueryCache`和`UpdateTimestampsCache`可执行目录中的目录已经过时了。

然而，这导致了下一个问题——我无法安装在下，`Program Files`因为 NHibernate 试图在第一次运行时创建这些目录。

# mysql - 操作数应在左连接中包含 1 列

> ID：12524306
> 
> 赞同：0
> 
> 时间：2012-09-21T04:34:36.603
> 
> 标签：mysql, sql, mysql-error-1241

你能帮我解决这个问题吗？

```
mysql> select * from db.tblname1 
       left join db.tblname2 
       on(tblname1.id=tblname2.id,tblname1.`datetime`=tblname2.`datetime`)
       limit 1 into outfile '/backup/saved-export/archive_master_merge1.sql'; 
```

> 错误 1241 (21000): 操作数应包含 1 列 mysql>

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T04:36:20.353

你错过了操作数“AND”

```
tblname1.id=tblname2.id AND tblname1.`datetime`=tblname2.`datetime` 
```

# bash - Bash：从输出中去除尾随换行符

> ID：12524308
> 
> 赞同：266
> 
> 时间：2012-09-21T04:34:38.420
> 
> 标签：bash, newline, line-breaks

当我在 Bash 中执行命令时（或者具体来说，`wc -l < log.txt`），输出后面包含一个换行符。我该如何摆脱它？

* * *

## 回答 #1

> 赞同：357
> 
> 时间：2012-09-21T04:39:19.990

**如果您的预期输出是单行**，您可以简单地从输出中删除所有换行符。`tr`管道传输到实用程序或 Perl（如果愿意）并不少见：

```
wc -l < log.txt | tr -d '\n'

wc -l < log.txt | perl -pe 'chomp' 
```

您还可以使用命令替换来删除尾随换行符：

```
echo -n "$(wc -l < log.txt)"

printf "%s" "$(wc -l < log.txt)" 
```

* * *

**如果您的预期输出可能包含多行**，您需要做出另一个决定：

如果要从文件末尾删除 MULTIPLE 换行符，请再次使用 cmd 替换：

```
printf "%s" "$(< log.txt)" 
```

如果要从文件中严格删除最后一个换行符，请使用 Perl：

```
perl -pe 'chomp if eof' log.txt 
```

* * *

请注意，如果您确定要删除尾随换行符，则可以使用`head`GNU coreutils 来选择除最后一个字节之外的所有内容。这应该很快：

```
head -c -1 log.txt 
```

`cat`此外，为了完整起见，您可以使用和 'show-all' 标志快速检查换行符（或其他特殊）字符在文件中的位置`-A`。美元符号字符将指示每一行的结尾：

```
cat -A log.txt 
```

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-09-21T04:36:51.777

单程：

```
wc -l < log.txt | xargs echo -n 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2019-09-27T06:45:12.590

如果您只想删除**最后一个换行符**，请通过管道：

```
sed -z '$ s/\n$//' 
```

`sed``\0`如果分隔符设置为`NUL`via ，则不会将 a 添加到流的末尾`-z`，而要创建 POSIX 文本文件（定义为以 a 结尾`\n`），它将始终输出`\n`不带`-z`.

例如：

```
$ { echo foo; echo bar; } | sed -z '$ s/\n$//'; echo tender
foo
bartender 
```

并证明没有`NUL`添加：

```
$ { echo foo; echo bar; } | sed -z '$ s/\n$//' | xxd
00000000: 666f 6f0a 6261 72                        foo.bar 
```

* * *

要**删除多个尾随换行符**，请通过管道：

```
sed -Ez '$ s/\n+$//' 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2013-11-08T11:27:21.660

[在Bash 变量替换](http://tldp.org/LDP/abs/html/string-manipulation.html)中也直接支持删除空格：

```
testvar=$(wc -l < log.txt)
trailing_space_removed=${testvar%%[[:space:]]}
leading_space_removed=${testvar##[[:space:]]} 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-09-21T04:40:15.313

如果将其输出分配给变量，`bash`则会自动去除空格：

```
linecount=`wc -l < log.txt` 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2012-09-21T07:25:55.743

如果您想在 Bash 中打印任何内容而没有行尾，请使用`-n`开关回显它。

如果您已经将它放在变量中，则使用裁剪的[尾随换行符来回显它：](http://linux.die.net/man/1/echo)

```
$ testvar=$(wc -l < log.txt)
$ echo -n $testvar 
```

或者您可以在一行中执行此操作，而不是：

```
$ echo -n $(wc -l < log.txt) 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-09-21T22:32:05.770

[printf](http://linux.die.net/man/1/printf)已经为您裁剪了尾随换行符：

```
$ printf '%s' $(wc -l < log.txt) 
```

细节：

*   printf 将打印您的内容以代替`%s`字符串占位符。
*   如果您不告诉它打印换行符 ( `%s\n`)，它不会。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-05-19T03:25:53.117

**使用 awk：**

```
awk -v ORS="" '1' log.txt 
```

**解释：**

1.  -v 为 ORS 赋值
2.  ORS - 输出记录分隔符设置为空白。这将用“”替换新行（输入记录分隔符）

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-07-26T08:24:49.710

添加此内容以供我参考 ^_^

您还可以使用 bash 扩展魔法从输出中删除一个新行

```
VAR=$'helloworld\n'

CLEANED="${VAR%$'\n'}"

echo "${CLEANED}" 
```

# ruby-on-rails - 如何首先按现有布尔属性对结果进行排序

> ID：12524311
> 
> 赞同：1
> 
> 时间：2012-09-21T04:35:12.570
> 
> 标签：ruby-on-rails, activerecord

我有很多带有`featured?`属性的记录。

我想查询所有，将它们分组为特色和非特色，如果可能的话，将它们随机分布在它们的组之间（随机并显示特色，然后随机其余部分）。

知道如何在 ActiveRecord 上执行此操作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T05:07:51.017

利用[`rand()`](http://www.tutorialspoint.com/mysql/mysql-rand-function.htm)

MySQL

```
SELECT * FROM <TABLE_NAME> ORDER BY featured?, rand() 
```

导轨 3

```
ModelName.order("featured, rand()") 
```

例如：-

```
id    featured
1      true
2      false
3      false
4      true
5      false
6      true 
```

我希望所有的特征都先是真然后是假，但是真假组的记录顺序应该是随机的

所以我的代码将是

```
User.order("featured DESC, rand()") 
```

并且生成的 o/p 是（注意：- 组真/假之间的记录顺序可以更改）

```
id    featured
4      true
6      true
1      true
5      false
3      false
2      false 
```

# git - 为什么 git 在合并时不能识别以前签入的重命名 - 合并方向重要吗？

> ID：12524313
> 
> 赞同：4
> 
> 时间：2012-09-21T04:35:52.617
> 
> 标签：git, merge

我刚刚经历了重命名/重组和重构功能分支上的大型代码库的痛苦过程。在此过程中，我进行了少量更改的增量签入，以确保 git 识别重命名。但是，现在我将此功能合并回我的开发分支，Git 似乎没有“记住”这些重命名，而是将它们视为删除/添加。设置不同的重命名阈值似乎没有帮助。

git 不应该从以前的提交中知道文件被重命名/移动了吗？

**编辑** 奇怪的是，如果我将 dev 合并到我的功能分支中，而不是反之亦然，git 似乎可以识别重命名。我最终这样做了，然后将 dev 重置到我的功能分支的顶部。在这种情况下，合并的方向是否重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T04:54:18.220

`git`实际上并不跟踪重命名——它依赖于“重命名检测”算法来检测重命名，如[Git FAQ](https://git.wiki.kernel.org/index.php/GitFaq#Why_does_git_not_.22track.22_renames.3F)中所述：

> Git 必须与许多不同的工作流程进行互操作，例如某些更改可能来自补丁，其中重命名信息可能不可用。依赖显式重命名跟踪使得合并两棵完成完全相同的事情的树变得不可能，除了一棵作为补丁（创建/删除），另一棵使用其他启发式方法。
> 
> 其次，跟踪重命名实际上只是跟踪内容在树中如何移动的一种特殊情况。在某些情况下，您可能对查询何时添加或移动到其他文件感兴趣。通过仅在需要时重新创建此信息的能力，Git 旨在提供一种更灵活的方式来跟踪您的树的变化情况。
> 
> 但是，这并不意味着 Git 不支持重命名。Git 中的 diff 机制支持自动检测重命名，这是通过 git-diff-* 命令系列的“-M”开关打开的。重命名检测机制由 git-log(1) 和 git-whatchanged(1) 使用，例如，'git log -M' 将提供带有重命名信息的提交历史记录。Git 还支持有限形式的跨重命名合并。分配责备的两个工具 git-blame(1) 和 git-annotate(1) 都使用自动重命名检测代码来跟踪重命名。
> 
> 作为一个非常特殊的情况，'git log' 版本 1.5.3 及更高版本具有'--follow' 选项，允许您在给定单个路径时跟随重命名。

因此，如果你重构并重*命名*了一个文件，它与旧文件的相似度将非常小，结果`status`或`log`可能表明该文件被删除然后添加。

即使通过重构，一些选项也可能有助于检测重命名：

*   `-M<n>`

    > 检测重命名。如果指定了n，它是相似性指数的阈值（即添加/删除量与文件大小相比）。例如，-M90% 表示如果 90% 以上的文件没有更改，git 应该将删除/添加对视为重命名。

*   `-w`

    > 忽略空格数量的变化。这将忽略行尾的空格，并认为一个或多个空格字符的所有其他序列是等效的。

*   `-B<n>`

    > 将完整的重写更改分解为一对删除和创建。

`-B`很有用，因为它可以允许将文件视为重命名源，即使它们已被更改；例如，如果您将 90% 移至`foo.c`，`bar.c`但将某些功能留在`foo.c`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-08T13:43:54.713

您可能会违反 git config 设置：`merge.renameLimit`

此设置默认非常低（与大型代码库相比），如果您合并太多文件，则不会尝试检测重命名，因为担心它会变慢。一个方向的合并很可能超过了限制，而另一个方向没有，因此出现了奇怪的重命名检测行为。

尝试通过以下方式提高限制

```
git config merge.renameLimit 9999 
```

并重试。

# java - 如何从用户定义的时间中减去系统时间

> ID：12524315
> 
> 赞同：0
> 
> 时间：2012-09-21T04:36:05.080
> 
> 标签：java, android

任何人都可以建议我找到系统时间和用户定义时间之间的时间间隔，因为我的小时 = 20 和分钟 = 12。我只想找到这两次之间的时间间隔，并且需要设置这个时间作为倒数计时器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:31:09.707

要获得任何两个日期/日历对象之间的差异，最好以毫秒（长）为单位获取时间。

```
 Calendar current = Calendar.getInstance();
    Calendar usertime = Calendar.getInstance();
    usertime.set(Calendar.HOUR_OF_DAY, 20);
    usertime.set(Calendar.MINUTE, 12);

    long diffInMilisecond = Math.abs(usertime.getTimeInMillis()-current.getTimeInMillis()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:37:30.540

如果您可以使用第三方 api，那么[Joda time](http://joda-time.sourceforge.net/index.html)将非常适合上述场景。看[这里](http://joda-time.sourceforge.net/quickstart.html#Intervals_and_time_periods)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T04:47:40.797

为什么要让用户输入他想要的时间而不是从当前时间开始多长时间？当映射到倒数计时器的想法时，它更有意义。

如果你想为用户指定的时间设置一个计时器，我会这样做。

```
//Get user input into variable hours, and minutes
Timer timer = new Timer();
timer.schedule(new TimerTask() {
    public void run() {
        //do stuff when countdown has happened
    }, (((hours * 60) + minutes) * 60) * 1000)); //time in milliseconds to exec run
} 
```

**编辑**

如果您只是想计算用户输入小时和分钟时的时间差，请尝试以下操作：

```
//Get user input into variable hours, and minutes
Calendar cal = new GregorianCalendar();
//Assuming user inputs hour in 24 hour format and inputted time is in future
totalMinsDiff = (hours - cal.get(Calendar.HOUR_OF_DAY)) * 60 + 
      minutes - cal.get(Calendar.MINUTE); 
countdownHours = totalMinsDiff / 60;
countdownMins = totalMinsDiff % 60; 
```

# c - 用于计算 C 中 pi 近似值的 For 循环

> ID：12524316
> 
> 赞同：1
> 
> 时间：2012-09-21T04:36:08.523
> 
> 标签：c, loops, pi, approximation

我正在尝试制作的程序应该使用 C 使用系列 pi = 4 * (1 - (1/3) + (1/5) - (1/7) + (1/9) - ( 1/11) ...) 等等。

现在，从命令行，程序必须输入要近似的项的数量，例如，如果有人从命令行输入 5，则估计将输出到 (1/9)。

问题是我的输出总是为零，我无法确定我所犯的逻辑错误。我相信这是一个for循环问题。

另请注意，我使用的是 C，而不是 C++。

我的代码是：

```
/*
Finding pi of an infinite series
*/

#include<stdio.h>
#include<stdlib.h>
#include<math.h>

int main(int argc, char *argv[]){  //need to get input for amount of terms

    int i, pi;

    pi = 0;
    i = 0;
    double neg;  //neg to make a number negative

    neg = -1;       

    for(i = 1; i < argc; i++)
    {
        pi = pi + pow(neg, i)*(1/((2*i)-1));
        i = i + 1;
    }

    printf("The approximation of pi is: %lf", pi);

    return 0;    
} 
```

注意：由于某种原因，它没有显示我在 Stack Overflow 上包含的库。我确实包括了图书馆，我没那么愚蠢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T04:39:13.240

```
(1/((2*i)-1)) 
```

上面的语句是一个整数，因为 i 是一个整数。整数没有小数部分，因此它始终为零。由于任何时间为零仍然为零，因此 pi 将保持为零。

您应该更改为双精度或浮点数以获得分数答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T04:38:58.903

`argc`是参数的数量。参数的内容存储在`argv`. 第一个参数 ( `argv[0]`) 是程序的名称；如果 argc 指示它，您想要的数字将作为字符串存储在`argv[1]`.

```
int iterations = atoi(argv[1]);  /* convert string to integer */

for(i = 1; i < iterations; i++){
   /* ... */ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T04:48:09.567

重写代码如下

```
int main(int argc, char *argv[]){  //need to get input for amount of terms
  int i, ncount;

   double neg, pi;  //neg to make a number negative
   pi = 0;
   neg = -1;

   ncount = atoi(argv[1]);

   for(i = 1; i < ncount; i++){
    pi = pi + pow(neg, (double)i)*(1.0/((2.0*(double)i)-1));
    i = i + 1;
   }

   printf("The approximation of pi is: %lf", pi);
   return 0;
} 
```

您必须采用 argv 值而不是 argc 才能找到计数。您必须将 pi 值转换为双精度值。

# java - 如何在 Java 中增加数组的大小？

> ID：12524318
> 
> 赞同：18
> 
> 时间：2012-09-21T04:36:36.607
> 
> 标签：java, arrays, size

我想在数组中存储用户所需的尽可能多的元素。但是我该怎么做。

如果我要创建一个数组，我必须使用固定大小。每次将新元素添加到数组并且数组变满时，我想将其大小更新为“1”。

我厌倦了各种类型的代码，但没有成功。

如果有人能给我一个关于它的解决方案，那将是非常有帮助的 - 如果可能的话，在代码中。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T04:39:39.627

不要使用数组，而是使用`java.util.List`诸如`ArrayList`. ArrayList 有一个数组后端，它将值保存在列表中，但数组大小由列表自动处理。

```
ArrayList<String> list = new ArrayList<String>();
list.add("some string"); 
```

`list.toArray(new String[list.size()])`对于其他元素类型，您还可以使用等将列表转换为数组。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-03-30T05:38:06.160

On a low level you can do it this way:

```
long[] source = new long[1];
long[] copy = new long[source.length + 1];
System.arraycopy(source, 0, copy, 0, source.length);
source = copy; 
```

Arrays.copyOf() is doing same thing.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-10-27T15:55:43.120

您可以创建一个大小比原始元素大一个元素的临时数组，然后将原始元素复制到临时数组中，并将临时数组分配给新数组。

```
public void increaseSize() {
   String[] temp = new String[original.length + 1];

   for (int i = 0; i < original.length; i++){
      temp[i] = original[i];
   }
   original = temp;
} 
```

您可以通过各种方式更改大小，但同样的想法也适用。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-21T04:41:30.550

你不能。您可以创建一个新数组并将项目移动到该数组 - 或者您可以使用 ArrayList。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-06-10T12:21:31.603

通过在类大小中使用**copyOf**方法将自动/动态增加。在下面的代码大小中，使用String 的大小进行操作后增加到.`java.util.Arrays``String[]``array``0``Arrays.copyOf``array``4`

```
package com.google.service;

import java.util.Arrays;

public class StringArrayAutoIncrement {
    public static void main(String[] args) {
        String[] data = new String[] { "a", "b", "c", "d", "e" };
        String[] array = new String[0];// Initializing array with zero
        int incrementLength = 1;
        for (int i = 0; i < data.length; i++) {
            array = Arrays.copyOf(data, i + incrementLength);// incrementing array by +1
        }
        /**
         * values of array after increment
         */
        for (String value : array) {
            System.out.println(value);
        }
    }
} 
```

**输出：**

```
a
b
c
d
e 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-01-29T03:56:31.707

[https://www.java2novice.com/java-arrays/array-copy/](https://www.java2novice.com/java-arrays/array-copy/)

```
int[] myArr = {2,4,2,4,5,6,3};
System.out.println("Array size before copy: "+myArr.length);
int[] newArr = Arrays.copyOf(myArr, 10);
System.out.println("New array size after copying: "+newArr.length); 
```

你也可以做 myArr = Arrays.copyOf(myArr, 10);

在这种情况下，myArr = Arrays.copyOf(myArr, myAry.length+1);

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T04:40:57.213

你可以使用数组列表

这是字符串数组列表的示例

'导入 java.io.BufferedReader; 导入 java.io.IOException；导入 java.io.InputStreamReader；导入 java.util.ArrayList；

公共课 Ex01 {

```
public static void main(String[] args) throws IOException { 

    BufferedReader userInput = new BufferedReader 
        (new InputStreamReader(System.in));

    ArrayList<String> myArr = new ArrayList<String>();
    myArr.add("Italian Riviera");
    myArr.add("Jersey Shore");
    myArr.add("Puerto Rico");
    myArr.add("Los Cabos Corridor");
    myArr.add("Lubmin");
    myArr.add("Coney Island");
    myArr.add("Karlovy Vary");
    myArr.add("Bourbon-l'Archambault");
    myArr.add("Walt Disney World Resort");
    myArr.add("Barbados");

    System.out.println("Stupid Vacation Resort Adviser");
    System.out.println("Enter your name:");
    String name = userInput.readLine();
    Integer nameLength = name.length();
    if (nameLength == 0) 
    { 
        System.out.println("empty name entered");
        return;
    } 

    Integer vacationIndex = nameLength % myArr.size();

    System.out.println("\nYour name is "+name+", its length is " + 
                    nameLength + " characters,\n" +
                    "that's why we suggest you to go to " 
                    + myArr.get(vacationIndex));
} 
```

}'

同样，您可以为整数、blooean 和各种数据类型创建数组

有关更多详细信息，您可以看到这个

[http://www.anyexample.com/programming/java/java_arraylist_example.xml](http://www.anyexample.com/programming/java/java_arraylist_example.xml)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-11T06:16:52.343

创建列表对象，添加元素并使用 list.toArray(new String[list.size()]) 将该列表对象转换为数组

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-25T20:48:53.010

你可以这样做

```
import java.util.Scanner;

class Add
{
  public static void main(String[] args)
  {
     Scanner obj=new Scanner(System.in);
     char ans='y';
     int count=0;
     while(ans!='N'||ans!='n')
     {
       int initial_size=5; 
       int arr[]=new int [initial_size];
       arr[0]=1;
       arr[1]=2;
       arr[2]=3;
       arr[3]=4;
       arr[4]=5;

       if(count>0)
       {
           System.out.print("enter the element u want to add in array: ");
           arr[initial_size-1]=obj.nextInt();
       }
       System.out.print("Do u want to add element in array?");
       ans=obj.next().charAt(0);
       if(ans=='y'||ans=='Y')
       {
         initial_size++;
         count++;
       }             
    }   
  }

} 
```

* * *

## 回答 #10

> 赞同：-2
> 
> 时间：2018-08-01T18:25:33.473

```
public class IncreaseArraySize {
 public static void main(String[] args) {
    int arr[] = new int[5];
      for (int i = 0; i < arr.length; i++) {
            arr[i] = 5;
      }
      for (int i = 0; i < arr.length; i++) {
            System.out.print(arr[i] + " ");
      }
       System.out.println(" ");
       System.out.println("Before increasing Size of an array :" + arr.length);

        int arr2[] = new int[10];

        arr = arr2;
        arr2 = null;
        for (int i = 0; i < arr.length; i++) {
        System.out.print(arr[i] + " ");
    }
    System.out.println("");
    System.out.println("After increasing Size of an array : " + arr.length);
}
} 
```

* * *

## 回答 #11

> 赞同：-4
> 
> 时间：2012-09-21T04:38:47.400

使用 ArrayList。如果您尝试添加到完整的 ArrayList，它的大小会自动增加。

# java - 如果 main 方法在 java 文件的“非公共类”中怎么办？

> ID：12524322
> 
> 赞同：12
> 
> 时间：2012-09-21T04:37:19.193
> 
> 标签：java, main, public

我有一个包含多个类的 java 文件，其中一个是公共的。如果 main 方法在非公共类中。我无法运行该 java 文件。这是为什么？并且也没有编译错误。如果是这样，我该如何使用该主要方法？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-07-24T18:18:02.950

实际上，您可以在非公共类中执行 main 方法。如果你把这门课

```
class A {
  public static void main(String... args) {
      System.out.println("This is not a public class!");
  }
} 
```

在名为 NonPubClass.java 的文件中。您可以使用 javac 命令编译此文件，但不会得到 NonPubClass.class，而是会得到 A.class。使用 java a 调用该类，您将看到打印的字符串 --- 这不是公共类！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-15T09:40:20.993

看看这段代码：
**Super.java**

```
public class Super{ }
class Sub{
    public static void main(String[] s){
        System.out.println("Hello");
    }
} 
```

为了打印`Hello`，您可以编译并运行该程序：

![控制台输出](../Images/cbc9fbe7552ce42494b006ee23ae827c.png)

**这是如何工作的？**
编译器为程序中的每个类生成单独的`.class`文件。因此，您可以打印如上所示的输出，而不是从公共类调用`main()`非公共类。`main()`

**注意：**正如惯例所说，您必须将一个单独的文件放在一个`public class`单独的文件中`<class_name>.java`。并且不要将多个类放在一个文件中（除非它们是内部类），因为如果您想导入它们或将它们与其他类一起使用，则会导致问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-31T23:33:43.707

我想补充一点，尽管这里的每个人都认为公共对于课程中的主要内容是必要的，并且没有主要内容就无法工作

您可以在一个类中拥有任意数量的主电源，并且您可以在没有公共访问修饰符的情况下拥有它们。但要小心，只有以文件命名的类才能公开我的意思是如果你将文件命名为**a.java**，那么只有名为**a**的类可以公开，没有其他人可以拥有这个设施

这是显示此内容的代码：如您所见，文件名是 help.java

```
//:initialization/helping.java

class b{
    public static void main(){
        System.out.println("hello its b");
    }
}   

class helping {
    static void f(float i, Character... c) {
        System.out.println("first");
    }
    static void f(char a, Character... args) {
        System.out.println("second");
    }
    public static void main(String[] args) {
        f(1,'a');
        f('a','b');
        c.main();
    }
}

class c{
    public static void main(){
        System.out.println("hello its b");
    }
}
//:~
/*
 * output:  
 * first
 * second
 * hello its b  
 * */ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T04:40:05.743

简单的答案。`You can't`. 您需要在 a 中有 main 方法，`public class`其签名应该是`public static void main(String... args)`

> 没有编译错误

为什么会有？**就编译规则**而言，您没有做错任何事情。唯一的问题是您`non-public-class-main-method`不能作为代码的入口点。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-02T08:14:15.117

如果顶级类型声明包含以下任何一种访问修饰符，则会出现编译时错误：protected、private 或 static 。此[链接](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.6)可能会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-18T05:32:39.253

这不是编译时错误，因为您提到顶级类型声明不应受保护、静态或私有。

如果您通过链接[http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.6](http://docs.oracle.com/javase/specs/jls/se7/html/jls-7.html#jls-7.6)以及您已共享，那么很明显那里有一个顶部-级别类型声明仅指“顶级类和接口类型声明”，这些声明不应在顶级声明中受到保护、静态或私有，但我们可以对其中的任何方法或变量声明使用受保护、静态或私有。

以上代码，声明没有错，所有外部顶级类都是默认的，没有违规，代码会编译运行成功。

顶部提出的问题的答案与顶部的少数专家所提到的完全一样，即

“当然我们可以在非公共类中拥有一个带有主方法的文件，它会编译并成功运行，但请确保在运行程序时我们必须将“主方法”的类名传递给java 解释器而不是公共的类。”

如果我们有 2 个类 A(public) 和 B(non-public contains main method) ，那么文件将使用 "javac A.java" 编译，但是在运行代码时，我们需要将命令作为 "java B" 传递。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-09-21T05:01:06.293

您当然可以覆盖 main 方法，它不会违反任何编译器规则，因此您不会有任何编译器错误。

您检查尽管您有多个类，但声明为公共的文件是您尝试执行的文件的名称。

**这是一个约定，文件应该以该代码中公开的同一类命名**。

因此，当您尝试执行该类时，它没有从中开始执行的 main 方法。因此，如果您想在非公共类中执行 main 方法，唯一的方法是从公共课。

# sql - 如何从存储过程中打印选择结果

> ID：12524329
> 
> 赞同：1
> 
> 时间：2012-09-21T04:37:50.667
> 
> 标签：sql, sql-server, tsql, stored-procedures

我有一个正在尝试调试的存储过程（T-SQL）。

它包含创建一个临时表，并有几个更新语句来用各种数据更新它。

如何在存储过程运行期间插入语句以查看该表的各个点的内容。

理想情况下，我将直接从 MS SQL Server Management Studio 运行它，简单的输出到消息框架就足够了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:46:45.150

难道不能选择你需要的东西吗？对不起，如果我误解了这个问题。选定的变量/表将作为结果返回

# jakarta-ee - 如何在拦截器中声明的 JSP 中显示会话值？

> ID：12524349
> 
> 赞同：0
> 
> 时间：2012-09-21T04:39:56.433
> 
> 标签：jakarta-ee, struts2, interceptor, ognl

我是新手，正在测试struts2。在拦截器中声明的会话中获得值。想要在 JSP 中显示会话值但无法做到。

*有人告诉我如何在 OGNL 中做到这一点吗？*

**拦截器**

```
package com.myapp.interceptors;
import com.opensymphony.xwork2.ActionInvocation;
import com.opensymphony.xwork2.interceptor.Interceptor;

public class GreetingInterceptor implements Interceptor {

    @Override
    public void destroy() {
    }

    @Override
    public void init() {
    }

    @Override
    public String intercept(ActionInvocation invocation) throws Exception {
        String Greeting = "My first Interceptor.";
        invocation.getInvocationContext().getSession().put("Greeting", Greeting);

        String result = invocation.invoke();
        return result;
    }
} 
```

**struts.xml**

```
<struts>

    <!-- Configuration for the default package. -->
    <package name="default" namespace="/" extends="struts-default">
        <interceptors>
            <interceptor name="Greeting" class="com.myapp.interceptors.GreetingInterceptor"/>
        </interceptors>

        <!-- Greeting  -->
        <action name="greet" method="Greet" class="com.myapp.actions.GreetingAction">
            <result name="success">index.jsp</result>
            <interceptor-ref name="Greeting"/>
        </action>
    </package>

</struts> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:08:20.007

你可以在你的jsp中访问`<s:property value='#session.Greeting'/>`

# java - 从 Android 手机连接到 EC2 实例

> ID：12524360
> 
> 赞同：3
> 
> 时间：2012-09-21T04:40:30.027
> 
> 标签：java, android, ruby, amazon-ec2

我正在尝试使用 EC2 为 Android 应用程序运行 ruby​​ 服务器。我有一部运行 Java 应用程序的物理 Android 手机，试图连接到我的 EC2 实例上运行的 ruby​​ 脚本。我使用我在我的 Android 应用程序中使用的弹性 IP 设置它，如下所示：

```
requestSocket = new Socket("53.244.196.69", 2000); // IP changed just in case 
```

在 EC2 实例上，我正在运行此处显示的简单 ruby​​ 脚本：

```
server = TCPServer.open(2000)

loop {
client = server.accept
client.puts(Time.now.ctime)
client.puts "Closing the connection. Bye!"
client.close
} 
```

只要我调用上面的 Java 代码行，它就会抛出一个异常，说连接被拒绝。

我在 EC2 实例上禁用了 Windows 防火墙，并且在我的安全组中打开了端口，所以我不确定还有什么问题？

非常感谢任何帮助，因为我对云开发非常陌生。谢谢！

# cron - 使用 Quartz.Net 2.0.1 每周触发

> ID：12524362
> 
> 赞同：1
> 
> 时间：2012-09-21T04:40:56.417
> 
> 标签：cron, quartz.net-2.0

是否有可能使 Quartz.Net 触发器每周工作。我已经完成了其余的事情。这很紧急。请指导我如何做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T15:04:49.487

创建一个格式为“0 22 30 ? * MON”的 cron 触发器。这意味着它将在每周一的 22:30:00 运行。年份参数被省略。日期无关紧要（因此是“？”），月份设置为每个月（“*”）。

您的作业配置文件中的配置将是：

```
 <trigger>
      <cron>
        <name>MondayTrigger</name>
        <group>MyGroup</group>
        <description>A description</description>
        <job-name>Job1</job-name>
        <job-group>JobGroup1</job-group>
        <cron-expression>0 22 30 ? * MON</cron-expression>
      </cron>
    </trigger> 
```

# android - 从服务器下载文件使用大量 CPU 和 RAM

> ID：12524364
> 
> 赞同：1
> 
> 时间：2012-09-21T04:41:01.470
> 
> 标签：android, download

我使用 AsyncTask 从服务器下载文件列表。

一次只下载一个文件，完成一个文件后开始另一个下载。但是文件的下载使我的应用程序使用大量的**CPU 超过 30% 到 50% 以及更多的 RAM**。

请帮助如何解决这个问题。我们可以进行任何自定义以减少 CPU 使用量吗

# java - 使用 STRawGroupDir 时如何将参数传递给子模板

> ID：12524367
> 
> 赞同：1
> 
> 时间：2012-09-21T04:41:18.240
> 
> 标签：java, stringtemplate

我正在使用 StringTemplate v4.05 来构建我的 Web 应用程序。当我使用时`STRawGroupDir`，我没有`init(v) :: ...`在每个 .st 中定义类似的东西

目前我可以成功渲染子模板，如下所示：（'$' is my delimiter ）

```
$/elements/test()$ 
```

但是当 test.st 如下所示

```
<div>Hello $name$</div> 
```

我不知道如何将参数传递给 $name$。我的目标如下

```
$/elements/test(["Cavid"])$
$/elements/test(["Daniel"])$
$/elements/test(["Candy"])$ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:09:19.150

使用时`STRawGroupDir`，模板只有一个占位符，可以称为`it`.

在你的情况下 test.st 将是

```
<div>Hello $it$</div> 
```

# drupal - 如何在 drupal 中制作自定义 php 输出并将其修复到特定的相对路径上？

> ID：12524370
> 
> 赞同：2
> 
> 时间：2012-09-21T04:41:34.493
> 
> 标签：drupal, module

我正在尝试制作一个在特定相对路径生成输出的模块，例如 mysite.com/newcomment/

我正在尝试做的事情：在客户端，我编写了 JS，它向“mysite.com/newcomment/”发出 ajax 请求。如果有任何新评论，则在“mysite.com/newcomment/”输出“已完成评论”上生成，并在客户端弹出窗口中显示相同的评论。

我之前所做的：如果我正在制作页面/文章，则页眉和页脚代码会随输出一起提供。我还通过 Web 服务为其创建了一个端点，但我不想要那么复杂。

我是否以正确的方式做事，任何指示或线索都会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:33:02.663

您的问题非常令人困惑，但从标题看来，您正在寻找 hook_menu

查看：[api.drupal.org](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_menu/7)

您的自定义 url 将使用如下代码创建：

```
function my_module_menu() {
  $items['example/feed'] = array(
    'title' => 'Example RSS feed', 
    'page callback' => 'my_module_page', 
    'access arguments' => array('access content'), 
    'type' => MENU_CALLBACK,
  );

  return $items;
} 
```

然后在页面回调上输出代码：

```
my_module_page {
  return '<h2 class=test>Hello World</h2>';
} 
```

虽然您通常希望使用主题函数生成 html 以更好地缓存，但这至少应该让您入门。

编辑：

要仅打印 ajax 调用中的数据，该函数应如下所示。当然只包括你的 Drupal 版本的代码：

```
my_module_page {
  // Drupal 7
  print 'string'; 
  drupal_exit();;

  // Drupal 6
  print 'string'; 
  module_invoke_all('exit'); 
  exit;
} 
```

# actionscript-3 - Adobe 空中滚动优化（移动设备）

> ID：12524382
> 
> 赞同：0
> 
> 时间：2012-09-21T04:42:58.163
> 
> 标签：actionscript-3, air

我有一个 displayObject 列表（包含 Sprite 和 Bitmap）要滚动。它的像素高度约为 6,000，而平板电脑的性能只会变慢。(iPad1)

只是想知道是否有任何方法或最佳实践来优化它。我认为 Adob​​e Air 确实应该对此提供原生支持。

任何建议或想法表示赞赏。

干杯比尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:54:10.727

选项 1\. 将 StageQuality 设置为 LOW。如果您只有 iPad1 的问题，您可以在设置质量之前测试相机。

```
if (!CameraUI.isSupported) {
stage.quality = StageQuality.LOW;
} 
```

选项 2\. 使用 Starling 和 Feathers 构建您的应用程序。 [http://feathersui.com](http://feathersui.com)

# ios6 - ASIHTTPClasses 和 iOS6

> ID：12524384
> 
> 赞同：0
> 
> 时间：2012-09-21T04:43:08.473
> 
> 标签：ios6, nsxmlparsererrordomain

我的应用程序在以前的 iOS 版本上运行正常。我刚刚升级到 iOS6，现在应用程序在处理 XML 请求/响应时返回错误。

应用程序向服务器发送 XML 请求并接收 XML 响应，但现在响应为空“<>”导致 NSXMLParser 失败。

以下是应用程序发送请求的方式（这在 ios6 之前可以正常工作）：

```
 [request setURL:[NSURL URLWithString:url]];
[request setHTTPMethod:@"POST"];    
[request setValue:postLength forHTTPHeaderField:@"Content-Length"];
[request setValue:@"text/xml" forHTTPHeaderField:@"Content-Type"];
//[request setValue:@"application/x-www-form-urlencoded charset=utf-8" forHTTPHeaderField:@"Content-Type"];
[request setHTTPBody:postData];

NSURLConnection *conn=[[NSURLConnection alloc] initWithRequest:request delegate:self];
if (conn)
{

    receivedData = [[NSMutableData data] retain];

} 
```

但是响应现在是空的“<>”。

```
 parser error is Error Domain=NSXMLParserErrorDomain Code=9 "The operation couldn’t be completed. (NSXMLParserErrorDomain error 9.)", path to file is :

/Users/ronluna/Library/Application Support/iPhone Simulator/6.0/Applications/5BA74D89-1967-4B9E-A1C0-B076F7BB9064/Documents/Menus.xml 
```

任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T06:53:45.307

您好，我也遇到了同样的问题。尝试将 xml 文件的格式更改为**没有 BOM 的 UTF-8 ，**或者如果您在服务器端脚本上填充 xml，请尝试将字符集更改为**UTF-8**。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T16:58:33.267

确保使用以 xml 格式指定的编码创建 NSData 对象。即，如果 xml 有 utf-8 编码，你应该有： NSData* d = [xmlResponseStrings dataUsingEncoding:NSUTF8StringEncoding]; 在您的代码中，其他 NSUnicodexxxxxx 编码将不起作用。希望这有帮助。

# php - 如何在我的附加代码中使用 php 中的 Java 脚本在数组中获取选中的收音机？

> ID：12524396
> 
> 赞同：0
> 
> 时间：2012-09-21T04:45:10.053
> 
> 标签：php, javascript, loops, radio-button, checked

我正在尝试检查收音机“id”和“name”，因为我的收音机名称和 id 与 1、2、3 相同......等等

我的代码在这里，

```
var selection=new Array(); 
 var allR = document.getElementsByTagName('input');
  var a=0;
  var b=0;
    for(var i=0; i<allR.length; i++){ 
        if(allR[i].type=='radio') { b++; }      
        if(allR[i].type=='radio' && allR[i].checked) { a++; } 
    }
var num=0;
alert(b);

for(var j=1;j<=b ;j++) {

  //for(var i=0; i<alr.length; i++){ 

    if(document.getElementsByName('j').checked) {
      selection[num]=j;
      num++;
      alert(j);
  //}
  }
} 
```

在此代码中，var“b”是收音机计数的数量，在第二个循环中，我试图在数组中获取选中的收音机并打印它们，但它只打印总单选按钮但不打印选中的收音机？？？

希望得到你的建议

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T04:51:38.570

你应该改变

```
if(document.getElementsByName('j').checked) 
```

到

```
if(document.getElementsByName(j)[0].checked) 
```

因为您的控件名称为 1、2、3。不是“j”，而 j 是您的 for 循环初始值，因此不需要用单引号括起来。

因为 document.getElementsByName 返回一个集合。您应该按 0 索引检查元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:17:34.780

只是一个评论。

第一个 for 循环内的块可以是：

```
for (var i=0; i<allR.length; i++){ 

    if (allR[i].type=='radio') {
       b++;  
       a += allR[i].checked; 
    }
} 
```

但是有些人不喜欢这样依赖于类型转换。

# c# - Directory.GetFiles：如何只获取文件名，而不是完整路径？

> ID：12524398
> 
> 赞同：85
> 
> 时间：2012-09-21T04:45:36.187
> 
> 标签：c#, filepath, getfiles

> **可能重复：**
> [如何使用 c# 仅获取目录中的文件名？](https://stackoverflow.com/questions/7140081/how-to-get-only-filenames-within-a-directory-using-c)

使用 C#，我想获取文件夹中的文件列表。
我的目标：`["file1.txt", "file2.txt"]`

所以我写了这个：

```
string[] files = Directory.GetFiles(dir); 
```

不幸的是，我得到了这个输出：`["C:\\dir\\file1.txt", "C:\\dir\\file2.txt"]`

之后我可以去掉不需要的“C:\dir\”部分，但有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-09-21T04:48:01.237

您可以使用它`System.IO.Path.GetFileName`来执行此操作。

例如，

```
string[] files = Directory.GetFiles(dir);
foreach(string file in files)
    Console.WriteLine(Path.GetFileName(file)); 
```

虽然您可以使用`FileInfo`，但它比您已经使用的方法（仅检索文件路径）要重得多。所以我建议你坚持使用，`GetFiles`除非你需要`FileInfo`类的附加功能。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-09-21T05:07:34.483

尝试，

```
 string[] files =  new DirectoryInfo(dir).GetFiles().Select(o => o.Name).ToArray(); 
```

上面的行可能会抛出 UnauthorizedAccessException。要处理此检查，请查看以下链接

[C# 处理 LINQ 中的 System.UnauthorizedAccessException](https://stackoverflow.com/questions/12373529/c-sharp-handle-system-unauthorizedaccessexception-in-linq)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-21T04:47:19.307

看看使用[FileInfo.Name 属性](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.name%28v=vs.80%29.aspx)

就像是

```
string[] files = Directory.GetFiles(dir); 

for (int iFile = 0; iFile < files.Length; iFile++)
    string fn = new FileInfo(files[iFile]).Name; 
```

也看看使用[DirectoryInfo 类](http://msdn.microsoft.com/en-us/library/system.io.directoryinfo.aspx)和[FileInfo 类](http://msdn.microsoft.com/en-us/library/system.io.fileinfo.aspx)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-21T04:48:12.933

使用它仅获取文件名。

```
Path.GetFileName(files[0]); 
```

# c - 从我的 CUDA 代码调用我的 C 函数

> ID：12524405
> 
> 赞同：4
> 
> 时间：2012-09-21T04:46:58.427
> 
> 标签：c, cuda, undefined-reference

我有 cuda 代码，它调用 .c 文件中存在的函数，该文件的头文件已包含在我的 cuda 代码中。所以，我有一个头文件、一个用于该头文件的 C 文件和一个 CUDA 代码。当我使用 nvcc 编译我的 CUDA 代码并指定我的 cuda 代码名称和 c 文件名时，我会得到对我在 CUDA 代码中调用的函数的未定义引用，这些函数实际上存在于我的 C 文件中。请帮助我了解我做错了什么以及如何解决我的错误。

好的，我在下面粘贴我的代码......我最初没有发布它，因为我认为它是链接器错误或其他东西。

```
 #include "dbConnection.h"
 #include "error.h"
 #include "libpq-fe.h"
 #include <stdio.h>
 #include <stdlib.h>
 #include "appCompileSwitches.h"

int makeConnection(PGconn** conn,const char* connInfo);
void executeQuery(PGconn* conn,PGresult** res,char* statement,int* rows,int* columns);

/***************************************
* main(), enough said
****************************************/
int main(int argc, char **argv)
{

    PGconn *conn = NULL;
    PGresult *res= NULL;
    float** result;
    char* statement = "select visit_no,brand_name from visit_sample limit 3";
    int rows=0,columns=0; // WILL BE USED TO CUDAMALLOC gpu memory
    const char* connInfo = "dbname = moxy";

    if(!makeConnection(&conn,connInfo))
    {
            printf("failed to connect to Database!\n");
            return FAILURE;
    }
} 
```

dbConnection.c 文件有：

```
#include <stdio.h>
#include <stdlib.h>
#include "libpq-fe.h"
#include <string.h>
#include "dbConnection.h"
#include "error.h"
#include "appCompileSwitches.h"

/****************************************************
* close database connection, given connecton info
****************************************************/
static void closeConnection(PGconn *conn)
{

    /* close the connection to the database and cleanup */
    PQfinish(conn);
}

/****************************************************
* connect to the database
* given the connInfo
****************************************************/
extern int makeConnection(PGconn** conn,const char* connInfo)
{
    /* Make a connection to the database */
    *conn = PQconnectdb(connInfo);
    if (PQstatus(*conn) != CONNECTION_OK)
    {
            fprintf(stderr, "Connection to database failed: %s",PQerrorMessage(*conn));
            PQfinish(*conn);
            return FAILURE;
    }
    return SUCCESS;
} 
```

所以当我在做的时候：

```
nvcc DB.cu dbConnection.c -o DB 
```

我得到未定义的参考来建立连接。另外，我稍后会将我从 DB 获得的数据传输到 GPGPU，这就是本练习的重点，所以请不要说我在这里没有 CUDA 调用。这是仍在开发中的代码。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T05:38:25.757

您的外部函数位于 .c 文件中，因此主机编译器使用 C 语言命名/调用约定对其进行编译。另一方面，nvcc 默认是 C++ 编译器，因此它默认为 C++ 命名/调用约定。您需要告诉 C++ 编译器寻找外部“C”函数`makeConnection`，方法是在 .cu 文件中的标头和/或前向声明中声明它。

```
extern "C"
int makeConnection(PGconn** conn,const char* connInfo); 
```

# iphone - 我如何将数据传递回父视图控制器。我正在使用 addSubView 方法来显示子视图

> ID：12524407
> 
> 赞同：0
> 
> 时间：2012-09-21T04:47:12.280
> 
> 标签：iphone, ios, cocoa-touch, ios5, ios4

我如何将数据传递回父视图控制器。我使用 addSubView 方法来显示子视图。

```
addFields = [[AddFields alloc] initWithNibName:@"AddFields" bundle:nil];
[self.view addSubview:addFields.view]; 
```

现在我想将数据从“AddFields”视图发送到我的父控制器。我怎样才能做到这一点。谁能帮我..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T05:29:28.230

一种简单的方法是使用**NSNotificationCenter**看这个[例子](http://ioscoderef.blogspot.com/2012/09/use-of-nsnotificationcenter-object-to.html)

当您想发送对象时，从您的 AddFields 向您发布通知

```
[[NSNotificationCenter defaultCenter] postNotificationName:@"notificaiton_name" object:object_you_want_to_send]; 
```

并在您的父视图控制器中为 NSNotificationCenter 添加观察者

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(method_you_want_to_call:) name:@"notificaiton_name" object:nil]; 
```

定义你的**method_you_want_to_call：**像这样

```
-(void) method_you_want_to_call:(NSNotification *) obj{
     //lets say you are sending string as object
     NSString *string=(NSString *) [obj object] ;
} 
```

注意：**notificaiton_name**必须匹配

您可以使用**委托协议**方法的其他方式...请参阅此[示例](http://ioscoderef.blogspot.com/2012/09/creating-delegate-for-custom-class.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T04:57:25.937

使用[Delegate](http://www.roostersoftstudios.com/2011/04/12/simple-delegate-tutorial-for-ios-development/)在子视图和父视图之间向后传递数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:01:23.523

最常用的方法如下：首先在父控制器中初始化一个string/int/float/..（根据你的需要）。例如：`NString *string;`

然后在 AddFields 视图中，导入父控制器，然后创建父控制器视图的对象。

```
ParentViewController *object=[[ParentViewController alloc]initWithNibName:@"ParentViewController" bundle:nil];

            object.string=theValueYouWantToPass; 
```

# c# - 与 Apache ActiveMQ 兼容的 .NET Compact Framework 3.5 的消息传递框架？

> ID：12524409
> 
> 赞同：3
> 
> 时间：2012-09-21T04:47:18.147
> 
> 标签：c#, compact-framework, activemq, messaging

我有一个 .NET CF C# 客户端。我需要一个与服务器端的 ActiveMQ 兼容的简单消息传递框架。我了解 Apache.NMS 和 Apache.NMS.Stomp 支持 CF v2.0，但我相信没有太多文档可以与它们一起使用。考虑到我只想在服务器端使用 ActiveMQ，有人可以对可用的选项有所了解。（因为再一个消息传递框架是一种矫枉过正？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-29T06:01:48.627

我*认为*CF 至少支持 WCF 的一个基本子集（我没有接近紧凑框架，除了很久以前玩它） - 如果是这样，有一个 WCF NMS 提供程序可用：[http： //activemq.apache.org/nms/apachenmswcf.html](http://activemq.apache.org/nms/apachenmswcf.html)

（此处提供 src：http: [//www.apache.org/dyn/closer.cgi/activemq/apache-nms/1.1.0/Apache.NMS.WCF-1.1.0-src.zip](http://www.apache.org/dyn/closer.cgi/activemq/apache-nms/1.1.0/Apache.NMS.WCF-1.1.0-src.zip)）

如果以上所有都是真的，那么 WCF 就是您真正需要处理的所有内容......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-29T12:54:41.420

Apache.NMS.Stomp 在 CF 上运行良好，除了为 .NET CF 编写自己的 mirco Stomp 客户端之外，它是您最好的选择。在 src 包中有很多它的用法示例，只要看看那里的所有各种单元测试。如果遇到困难，您还可以将特定问题直接发送给 ActiveMQ 用户组。

# google-bigquery - 是否会长期支持 BigQuery？

> ID：12524415
> 
> 赞同：1
> 
> 时间：2012-09-21T04:47:57.447
> 
> 标签：google-bigquery

既然 bigquery 没有实验室，这是否意味着它不会被停产并且可以安全地投入时间和资源？

简单的问题

谢谢，约翰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T14:18:05.230

谷歌在谷歌云平台上投入了大量资金，使开发人员能够轻松构建、部署和扩展应用程序。我们致力于为我们的社区提供稳定和相关的服务。这当然包括 BigQuery。

# r - R包iGraph中的循环

> ID：12524421
> 
> 赞同：2
> 
> 时间：2012-09-21T04:48:14.657
> 
> 标签：r, igraph

使用 iGraph，我如何用圆形曲线表示自反节点？默认情况下，这些曲线由收缩或泪滴形环表示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T09:57:56.007

正如 Spacedman 所说，你需要做一些编程才能做到这一点。您可以绘制没有自环的图，然后添加它们（图基本上是散点图，您可以使用`points`和类似的函数向它们添加线），但这并非易事（特别是因为您需要知道节点的边缘，不是他们的中心）并且会导致自循环被绘制在其他所有看起来不太好的东西之上。

这个周末我更新`qgraph`了自循环的工作原理。`qgraph`可以用来绘制网络并且应该很好地与`igraph`. 例如：

```
# An adjacency matrix:
A <- matrix(1,3,3)

library("igraph")
# igraph graph and layout:
Graph <- graph.adjacency(A)
Layout <- layout.circle(Graph)

# Plot in qgraph:
library("qgraph")
qgraph(get.adjacency(Graph,sparse=FALSE),layout=Layout,diag=TRUE,directed=TRUE) 
```

![在此处输入图像描述](../Images/64921cd655093e5e1f1bd7797a019c0f.png)

我对这些自循环的结果非常满意，而且它们似乎更符合您的描述。所以这可能是一个选择。但是，我的循环是硬编码的。作为参考，我使用内部函数计算节点的边缘（循环的起点和终点），并使用内部函数`qgraph:::Cent2Edge`计算循环的形状（样条线）`qgraph:::SelfLoop`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T07:15:32.793

在里面`plot.igraph`你可以看到循环是使用一个`plot.bezier`函数绘制的，并且所有的控制都是在那里硬编码的。您必须重写大块的`plot.igraph`来调用`plot.circle`您必须编写的函数来执行此操作。

另外，我猜你不想要完整的圆圈，而是从顶点符号（其中包含顶点编号的默认蓝色圆圈）边缘开始并在另一部分结束（可能带有箭头）的圆段顶点符号的边缘？或者你想要像贝塞尔泪珠环那样接触符号的圆圈吗？

无论哪种方式，答案似乎都是“不，不是不做一些编程或向 igraph 家伙提交功能请求”

我发布了一个较早的答案，说涉及布局函数，但这不是真的 - 布局函数只定位顶点，绘制边缘是 plot.igraph 的工作。

# php - 无法发布 CKEDITOR 的值并丢失 CKEDITOR 的格式 [PHP with JQUERY AJAX]

> ID：12524422
> 
> 赞同：0
> 
> 时间：2012-09-21T04:48:17.557
> 
> 标签：php, jquery, ajax, ckeditor

我有 ckeditor 的值，当这些内容包含特殊字符时，在我的情况下，它发生在 a`&nbsp;`在编辑器的内容中时。它“杀死”了该网址，因为`?data=blabla&nbsp;`它是一个格式错误的网址..

```
var this = "conten=" + CKEDITOR.instances.tIsi.getData();
$.ajax({
    url: "action/prosesPOST.php",
    type: "POST",
    data: this,
    cache: false,
    success: function(msg) {
        alert(datanya);
        if (msg == "yes") {} else {
            alert("Failde to Update data," + msg);
        }
    }
});​ 
```

我改变它

> var this ={ 内容：CKEDITOR.instances.tIsi.getData(); }

和中提琴我可以更新和发布它，但所有格式的 ckeditor 在 ckeditor 上显示时都会丢失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T06:31:04.623

不知道我是否正确理解了您的问题。是 POST 数据的问题还是数据格式不正确？意思是不是你在服务器上的预期？

以下工作（编辑更完整）？

```
$.ajax({
    url: "action/prosesPOST.php",
    type: "POST",
    data: {conten: CKEDITOR.instances.tIsi.getData();}
    cache: false,
    success: function(msg) {
        alert(datanya);
        if (msg == "yes") {} else {
            alert("Failde to Update data," + msg);
        }
    }
});​ 
```

数据是否正确发布？如果你在 PHP 中调试数据，是否如你所愿？如果在使用前看起来没问题，如何输出数据？

我还会使用另一个变量名而不是“this”，因为它在 JavaScript 中已经具有预期的含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T02:19:42.407

==================================== 已解决============== =======================

问题是当我这样发布它时：

> var this = "conten=" + CKEDITOR.instances.tIsi.getData();

ckeditor 值未显示，我知道是因为使用警报（此）；在我使用 ajax 发送和值为 null 之前：

> var this = {内容：CKEDITOR.instances.tIsi.getData()}

数据不为空并插入数据库，但我的格式样式丢失，如“margin”、“align”等，使其像字符串，例如：**BOLD** be => < b >BOLD</ b >

我用简单的技巧解决了这个问题，使它成为 *html_entity_decode($value_on_database)* 当我想在 ckeditor 或其他设备上显示它时将对象数据更改为正常。

干杯:))

# php - 查询改进mysql

> ID：12524423
> 
> 赞同：0
> 
> 时间：2012-09-21T04:48:37.200
> 
> 标签：php, mysql, sql

嗨，伙计们，我有这个查询，而且速度非常慢。如果您能理解代码，我怎么可能将这两个查询合并为一个，或者我如何才能使这个查询更快。

这是代码

```
$strSQL  = "SELECT user_status_history.*, queues_config.extension FROM user_status_history ";
    $strSQL .= "LEFT JOIN queues_config ON user_status_history.skillset = REPLACE(queues_config.grppre, \":\", \"\") ";
    $strSQL .= "WHERE user_status_history.status_id = 9 "; # outbound call
    $strSQL .= "AND DATE_FORMAT(status_time, '%Y-%m-%d') = '$check_date' ";
    if ($i==1)
        $strSQL .= "AND TIME_FORMAT(status_time, '%H:%i') >= '$cboHrFrom:$cboMinFrom' ";
    else if (strtotime($check_date) == strtotime($end_date))
        $strSQL .= "AND TIME_FORMAT(status_time, '%H:%i') <= '$cboHrTo:$cboMinTo' ";
    $strSQL .= "AND queues_config.extension = '$cboSkillSet' ";
    if ($cboGroup!='' && $strAgentGroup!='') $strSQL .= "AND user_status_history.user_id IN (".$strAgentGroup.") ";
    $strSQL .= "ORDER BY user_status_history.user_id, user_status_history.status_time ";
    $rs2     = &$cn->Execute($strSQL);
    while (!$rs2->EOF)
    {
        $strSQL  = "SELECT status_time, time_to_sec(timediff(status_time, '".$rs2->fields['status_time']."')) AS timesecs FROM user_status_history ";
        $strSQL .= "LEFT JOIN queues_config ON user_status_history.skillset = REPLACE(queues_config.grppre, \":\", \"\") ";
        $strSQL .= "WHERE status_time > '".$rs2->fields['status_time']."' ";
        $strSQL .= "AND user_id = '".$rs2->fields['user_id']."' ";
        $strSQL .= "AND queues_config.extension = '".$rs2->fields['extension']."' ";
        $strSQL .= "ORDER BY status_time LIMIT 1;";
        $rs3     = &$cn->Execute($strSQL);
        if (!$rs3->EOF)
        {
            $sum_talk_sec = $sum_talk_sec + $rs3->fields['timesecs'];
        }
        $rs3->Close();

        $rs2->MoveNext();
    }
    $rs2->Close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:46:56.423

# 1

检查有表索引

user_status_history.status_id

user_status_history.user_id

# 2

这些对于优化器来说是困难的。尝试摆脱这些

```
LEFT JOIN queues_config ON user_status_history.skillset = REPLACE(queues_config.grppre, \":\", \"\") ";
LEFT JOIN queues_config ON user_status_history.skillset = REPLACE(queues_config.grppre, \":\", \"\") "; 
```

# 3

摆脱循环查询。从 query1 获取所有 ID 到一个数组并为它们创建一个查询：

"SELECT user_id, status_time, time_to_sec(timediff(status_time, '".$rs2->fields['status_time']."')) AS timesecs FROM user_status_history "; ... AND user_id IN (id1, id2, id3 ... )

# 4（来自 DCOder）

反过来转换这些。使用 PHP 创建 mysql 日期时间字段。

```
 $strSQL .= "AND DATE_FORMAT(status_time, '%Y-%m-%d') = '$check_date' ";

-- > 
    preg_match('/^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$/', $check_date, $regs );
    $enddate = date('Y-m-d', mktime( $hour=6, $min=0, $sec=0, $mon=$regs[2], $day=$regs[3]+1, $year=$regs[1] ));
    $strSQL .= " AND status_time > '$check_date' AND status_time <= '$enddate' ; 

    $strSQL .= "AND TIME_FORMAT(status_time, '%H:%i') >= '$cboHrFrom:$cboMinFrom' ";

-- >  $strSQL .= " AND status_time >= '$check_date $cboHrFrom:$cboMinFrom:00' ";

    $strSQL .= "AND TIME_FORMAT(status_time, '%H:%i') <= '$cboHrTo:$cboMinTo' ";

-- >  $strSQL .= " AND status_time <= '$check_date $cboHrTo:$cboMinTo:59' "; 
```

# image - 大图像无法在 Chrome 中呈现？

> ID：12524424
> 
> 赞同：7
> 
> 时间：2012-09-21T04:48:58.347
> 
> 标签：image, google-chrome, rendering, aspect-ratio

非常大的图像不会在 Google Chrome 中呈现（尽管滚动条仍会表现得就像图像存在一样）。相同的图像通常会在其他浏览器中很好地呈现。

这是两个示例图像。**如果您使用的是 Google Chrome，您将看不到红色长条：**

**短蓝色**
[http://i.stack.imgur.com/ApGfg.png](http://i.stack.imgur.com/ApGfg.png)

**长红**
[http://i.stack.imgur.com/J2eRf.png](http://i.stack.imgur.com/J2eRf.png)

如您所见，浏览器认为较长的图像在那里，但它根本不渲染。图像格式似乎也不重要：我尝试过 PNG 和 JPEG。我还在运行不同操作系统（Windows 和 OSX）的两台不同机器上对此进行了测试。这显然是一个错误，但任何人都可以想到一种解决方法来迫使 Chrome 渲染大图像吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T07:21:14.270

并不是说有人关心甚至在看这篇文章，但我确实找到了一个奇怪的解决方法。问题似乎与 Chrome 处理缩放的方式有关。如果将该`zoom`属性设置为 98.6% 或更低或 102.6% 或更高，则图像将呈现（将该属性设置为98.6% 和 102.6%*之间*`zoom`的任何值都会导致呈现失败）。请注意，该属性未在 CSS 中正式定义，因此某些浏览器可能会忽略它（在这种情况下这是一件好事，因为这是特定于浏览器的 hack）。只要您不介意稍微调整图像大小，我想这可能是最好的解决方法。*`zoom`*

 *简而言之，以下代码会产生所需的结果，如下[所示](http://jsfiddle.net/uZpqj/)：

```
<img style="zoom:98.6%" src="http://i.stack.imgur.com/J2eRf.png"> 
```

* * *

**更新：**

其实，这是一石二鸟的好机会。随着屏幕转向更高分辨率（例如 Apple Retina 显示屏），Web 开发人员将希望开始提供两倍大的图像，然后将它们缩小 50%，如此处所建议[的](http://www.webmonkey.com/2012/06/make-sure-your-site-looks-good-on-the-new-retina-macbook-pro/)。因此，`zoom`您可以简单地将图像大小加倍并将其渲染为一半大小，而不是使用上面建议的属性：

```
<img style="width:50%;height:50%;" src="http://i.stack.imgur.com/J2eRf.png"> 
```

这不仅可以解决您在 Chrome 中的渲染问题，还可以使图像在下一代高分辨率显示器上看起来漂亮而清晰。*

# php - PHP Json_Decode 返回 Null

> ID：12524430
> 
> 赞同：0
> 
> 时间：2012-09-21T04:49:44.013
> 
> 标签：php, json, codeigniter

> **可能重复：**
> [json_decode 在 webservice 调用后返回 NULL](https://stackoverflow.com/questions/689185/json-decode-returns-null-after-webservice-call)

我正在开发一个面向 REST 服务的应用程序，在登录位置，我发布用户名和密码，它返回以下 json

`{"id":"4","username":"sam","redirect":"clients/home"}`

之后，当我尝试 json_decode() 时，它显示为 NULL，你能告诉我我的服务器是 PHP 5.2.12 的问题是什么，它支持 JSON_Decode。

```
function login()
{
    $result=$this->rest->request("http://localhost/account/users/login","POST");
    $qry['result']=json_decode($result);
    var_dump($qry['result']);
    foreach($qry as $result)
    {
        $this->session->set_userdata('id',$result->id);
        $this->session->set_userdata('username',$result->username);
        redirect($result->redirect);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:08:51.853

您的 JSON 使用 JSONLint 进行验证。它可能是通过 url 传递的不需要的空格或字符。我认为如果您要添加干净的 JSON 字符串，则可能不会出现此问题。尝试添加[`json_last_error()`](http://php.net/manual/en/function.json-last-error.php)after`json_decode()`以确定确切的问题。它应该是这样的：

```
 $qry['result']=json_decode($result);
        switch(json_last_error())
        {
            case JSON_ERROR_DEPTH:
                $error =  ' - Maximum stack depth exceeded';
                break;
            case JSON_ERROR_CTRL_CHAR:
                $error = ' - Unexpected control character found';
                break;
            case JSON_ERROR_SYNTAX:
                $error = ' - Syntax error, malformed JSON';
                break;
            case JSON_ERROR_NONE:
            default:
                $error = '';                    
        }
        if (!empty($error))
            throw new Exception('JSON Error: '.$error); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T04:57:31.633

看看这个链接

[PHP json_decode() 使用有效的 JSON 返回 NULL？](https://stackoverflow.com/questions/2410342/php-json-decode-returns-null-with-valid-json)

[json_decode() 返回空问题](https://stackoverflow.com/questions/3110487/json-decode-returns-null-issues)

[json_decode 在 webservice 调用后返回 NULL](https://stackoverflow.com/questions/689185/json-decode-returns-null-php)

我认为是因为`UTF-8 BOM`

```
if(get_magic_quotes_gpc()){
  $d = stripslashes($result);
}else{
  $d = $result;
}
$d = json_decode($d,true); 
```

试试这种格式。

# iphone - 如何在删除期间调整 UITextView 滚动？

> ID：12524432
> 
> 赞同：0
> 
> 时间：2012-09-21T04:49:50.890
> 
> 标签：iphone, ios5, uitextview

我用`UITextView`的是只显示两行文本。在编辑过程中，如果用户输入 3 到 4 行然后执行删除，光标是不可见的。请建议如何`UITextview`在删除过程中调整光标位置，以便 textview 中的文本可见？

# html - 使用我的 RSS 提要提供图像缩略图

> ID：12524435
> 
> 赞同：3
> 
> 时间：2012-09-21T04:50:48.647
> 
> 标签：html, xml, rss

我希望显示我的 RSS 提要中的图像，这样如果提要进入 Facebook，我的页面就会显示带有它的图像。

这是我的 RSS 提要：

```
<item>
<title>Title</title>
<link>www.website.com</link>
<guid>www.website.com/1/</guid>
<description>Description</description>
</item> 
```

我是否添加`<image></image>`并粘贴 URL？还是我应该使用`<media:thumbnail>`？

我不希望图像成为主要内容，而是将其显示为缩略图预览，就像在 Facebook 上共享网页时一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T00:11:27.527

要在您的 RSS 中包含图像，您有两个关于如何标记项目的选项。

1.  将`img`标签转换为转义的 HTML 实体：

    ```
     <description>&lt;img src="http://example.com/path/to/image"&gt;</description> 
    ```

2.  将描述内容包装在 CDATA 部分中：

    ```
     <description><![CDATA[<img src="http://example.com/path/to/image">]]></description> 
    ```

如果您正在考虑使用该`<media:thumbnail>`字段，则更多的是用于展示[包含](http://www.rssboard.org/media-rss#media-thumbnails "Media RSS Specification, Version 1.5.1")在`<media:content>`.

> This element allows you publish a thumbnail image of your image or video. For Media RSS aware readers, this is a key feature, since readers are more likely to click on your media content if it has a nice shiny thumbnail. You’ll definitely need to give the URL attribute of your thumbnail image, which is all you basically need to do in order to include a thumbnail image.
> 
> **[Use Media RSS](http://www.webmonkey.com/2010/02/use_media_rss/ "Use Media RSS")** - Webmonkey

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T04:58:22.057

```
<image> 
              <title>Hello World</title> 
              <url>imageurl.gif</url> 
              <link>http://sitelink</link> 
 </image> 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-15T16:14:05.890

use `<enclosure>` tag

e.g:

```
<enclosure 
  url="https://my.domain.tld/images/my_picture.jpg" 
  type="image/jpeg" 
  length="1967"
/> 
```

see w3c documentation : [https://www.w3schools.com/xml/rss_tag_enclosure.asp](https://www.w3schools.com/xml/rss_tag_enclosure.asp)

# json - 从 Bash 脚本输出 JSON

> ID：12524437
> 
> 赞同：50
> 
> 时间：2012-09-21T04:51:01.093
> 
> 标签：json, bash

所以我有一个`bash`脚本可以输出服务器上的详细信息。问题是我需要输出为`JSON`. 解决此问题的最佳方法是什么？这是 bash 脚本：

```
# Get hostname
hostname=`hostname -A` 2> /dev/null

# Get distro
distro=`python -c 'import platform ; print platform.linux_distribution()[0] + " " +        platform.linux_distribution()[1]'` 2> /dev/null

# Get uptime
if [ -f "/proc/uptime" ]; then
uptime=`cat /proc/uptime`
uptime=${uptime%%.*}
seconds=$(( uptime%60 ))
minutes=$(( uptime/60%60 ))
hours=$(( uptime/60/60%24 ))
days=$(( uptime/60/60/24 ))
uptime="$days days, $hours hours, $minutes minutes, $seconds seconds"
else
uptime=""
fi

echo $hostname
echo $distro
echo $uptime 
```

所以我想要的输出是这样的：

```
{"hostname":"server.domain.com", "distro":"CentOS 6.3", "uptime":"5 days, 22 hours, 1 minutes, 41 seconds"} 
```

谢谢。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-09-21T05:00:26.653

如果您只需要输出一个小的 JSON，请使用`printf`：

```
printf '{"hostname":"%s","distro":"%s","uptime":"%s"}\n' "$hostname" "$distro" "$uptime" 
```

或者，如果您需要生成更大的 JSON，请使用[leadro-mora](https://stackoverflow.com/users/4227051/leandro-mora)解释的[heredoc](https://tldp.org/LDP/abs/html/here-docs.html)。如果您使用 here-doc 解决方案，请务必支持[他的答案](https://stackoverflow.com/a/33222745/751863)：

```
cat <<EOF > /your/path/myjson.json
{"id" : "$my_id"}
EOF 
```

* * *

一些较新的发行版有一个名为：`/etc/lsb-release`或类似名称 ( `cat /etc/*release`) 的文件。因此，您可以*消除*对 Python 的依赖：

```
distro=$(awk -F= 'END { print $2 }' /etc/lsb-release) 
```

An aside, you should probably do away with using backticks. They're a bit old fashioned.

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2015-10-19T19:53:08.737

I find it much more easy to create the json using `cat`:

```
cat <<EOF > /your/path/myjson.json
{"id" : "$my_id"}
EOF 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-02T07:16:31.490

I'm not a bash-ninja at all, but I wrote a solution, that works perfectly for me. So, I decided [to share it](https://gist.github.com/Jimilian/c3a2d8bb6df1b8ca64d02a10d97f510b) with community.

First of all, I created a bash script called `json.sh`

```
arr=();

while read x y; 
do 
    arr=("${arr[@]}" $x $y)
done

vars=(${arr[@]})
len=${#arr[@]}

printf "{"
for (( i=0; i<len; i+=2 ))
do
    printf "\"${vars[i]}\": ${vars[i+1]}"
    if [ $i -lt $((len-2)) ] ; then
        printf ", "
    fi
done
printf "}"
echo 
```

And now I can easily execute it:

```
$ echo key1 1 key2 2 key3 3 | ./json.sh
{"key1":1, "key2":2, "key3":3} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-11-17T08:30:23.033

@Jimilian script was very helpful for me. I changed it a bit to send data to [zabbix auto discovery](https://www.zabbix.com/documentation/3.0/manual/discovery/low_level_discovery)

```
arr=()

while read x y;
do
    arr=("${arr[@]}" $x $y)
done

vars=(${arr[@]})
len=${#arr[@]}

printf "{\n"
printf "\t"data":[\n"

for (( i=0; i<len; i+=2 ))
do
     printf "\t{  "{#VAL1}":\"${vars[i]}\",\t"{#VAL2}":\"${vars[i+1]}\"  }"

    if [ $i -lt $((len-2)) ] ; then
        printf ",\n"
    fi
done
printf "\n"
printf "\t]\n"
printf "}\n"
echo 
```

Output:

```
 $ echo "A 1 B 2 C 3 D 4 E 5" | ./testjson.sh
{
    data:[
    {  {#VAL1}:"A", {#VAL2}:"1"  },
    {  {#VAL1}:"B", {#VAL2}:"2"  },
    {  {#VAL1}:"C", {#VAL2}:"3"  },
    {  {#VAL1}:"D", {#VAL2}:"4"  },
    {  {#VAL1}:"E", {#VAL2}:"5"  }
    ]
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-02-16T11:13:34.920

I wrote a tiny program in Go, [json_encode](https://github.com/fedir/json_encode). It works pretty good for such cases:

```
$ ./getDistro.sh | json_encode
["my.dev","Ubuntu 17.10","4 days, 2 hours, 21 minutes, 17 seconds"] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-03T19:56:59.870

```
data=$(echo  " BUILD_NUMBER : ${BUILD_NUMBER} , BUILD_ID : ${BUILD_ID} , JOB_NAME : ${JOB_NAME} " | sed 's/ /"/g')

output => data="BUILD_NUMBER":"29","BUILD_ID":"29","JOB_NAME":"OSM_LOG_ANA" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-30T17:53:27.183

To answer the subject line, if you were to needing to to get a tab separated output from any command line and needed it to be formatted as a JSON list of lists, you can do the following:

```
echo <tsv_string> | python3 -c "import sys,json; print(json.dumps([row.split('\t') for row in sys.stdin.read().splitlines() if True])) 
```

For example, to get a zfs list output as json:

```
zfs list -Hpr -o name,creation,mountpoint,mounted | python3 -c "import sys,json; print(json.dumps([row.split('\t') for row in sys.stdin.read().splitlines() if True])) 
```

# c# - 根据 ListBox 中的选定项将选项卡动态添加到选项卡控件中

> ID：12524439
> 
> 赞同：0
> 
> 时间：2012-09-21T04:51:32.560
> 
> 标签：c#, wpf, mvvm, listbox, tabitem

我正在开发 MVVM 示例应用程序。我在 VSC# 2010 的解决方案中有 2 个项目。在一个项目（主项目）中，我有一个 mainwindow.xaml，它有两个网格，一个位于右侧，另一个位于左侧。左侧网格有一个列表框，它在 observablecollection<> 的帮助下包含项目。例如电压、I2C 等是项目。我还设置了`selecteditem`列表框的属性，它给了我`selecteditem`.

我的主要查询是右侧的网格，它有一个 TABCONTROL，默认添加一个项目（“CONNECT”）。当我从 listBox 中选择“Voltage”项时，我需要在 tabcontrol 中添加 tabitem（例如电压选项卡）。

**我的网格中的 TabControl 和 ListBox：**

```
<Grid Grid.Column="0" Name="BoardTabSelect" HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
            <ListBox Name="ButtonPanel" Style="{DynamicResource styleBanner}" ItemsSource="{Binding BoardTabs, Mode=TwoWay}" SelectedItem="{Binding SelectedTab, Mode=TwoWay}" >
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Name="BoardtabChanger" Margin="53,27,0,0" Text="{Binding TabOperation}" />
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>
        </Grid> 
```

我的选项卡控件：

```
 <Grid Grid.Row="0" >
                    <TabControl Name="ConnectTab" Style="{DynamicResource styleBackground}">
                        <tablocal:CloseableTabItem Header="Connect" x:Name="ConnectMain" MouseDoubleClick="TabItem_MouseDoubleClick"> 
                            <DockPanel>
                                <ListView  Name="listView" Height="460" Margin="0,-77,0,0" ItemsSource="{Binding Products}" SelectedItem="{Binding SelectedProduct, Mode=TwoWay}">
                                    <ListView.View>
                                        <GridView>
                                            <GridViewColumn Width="300" Header="Name" DisplayMemberBinding="{Binding Name}" />
                                            <GridViewColumn Width="283" Header="Connection Status" DisplayMemberBinding="{Binding Connection_Status}" />
                                        </GridView>
                                    </ListView.View>
                                </ListView>

                                <Button Content="Connect" Height="23" HorizontalAlignment="Stretch" Margin="-920,500,0,0" Name="ConnectBtnGrid" VerticalAlignment="Stretch" Width="100" Command="{Binding Path=ConnectCommand}" />
                                <Button Content="Update MSP430" Height="23" HorizontalAlignment="Stretch" Margin="-560,500,0,0" Name="UpdateMSPBtn" VerticalAlignment="Stretch" Width="100" />
                                <Button Content="Disconnect" Height="23" HorizontalAlignment="Stretch" Margin="-220,500,0,0" Name="DisconnectBtn" VerticalAlignment="Stretch" Width="100" Command="{Binding Path=DisconnectCommand}" />
                            </DockPanel>
                       </tablocal:CloseableTabItem>
                    </TabControl>
                </Grid> 
```

**我的 ViewModel 类在这里：**

```
public List<Product> m_Products;
    public ObservableCollection<Product> m_BoardTabs;        

    public ProductViewModel()
    {           
        m_Products = new List<Product>()
        {                
            new Product() {Name = "Bavaria", Connection_Status = "Disconnected"},
            new Product() {Name = "Redhook", Connection_Status = "Disconnected"},                
        };

        m_BoardTabs = new ObservableCollection<Product>()
        {
            new Product() {TabOperation = "Connect"}              
        };
    }                      

    public List<Product> Products
    {
        get
        {
            return m_Products;
        }

        set
        {
            m_Products = value;
        }
    }

    public ObservableCollection<Product> BoardTabs
    {
        get
        {
            return m_BoardTabs;
        }

        set
        {
            m_BoardTabs = value;
        }
    }

    /// <summary>
    /// get:
    /// set:   
    /// </summary>
    private Product m_SelectedItem;
    public Product SelectedProduct
    {
        get
        {
            return m_SelectedItem;
        }

        set
        {
            m_SelectedItem = value;                
            NotifyPropertyChanged("SelectedProduct");
        }
    }

    private Product m_SelectedTab;
    public Product SelectedTab
    {
        get
        {
            return m_SelectedTab;
        }

        set
        {
            m_SelectedTab = value;
            NotifyPropertyChanged("SelectedTab");
            onTabChanged();
        }
    }        

    void onTabChanged()
    {
        if (SelectedTab.TabOperation == "Voltage")
        {
            //Add tab here
        }
    }

    public Product value { get; set; }

    /// <summary>
    /// get:
    /// set:   
    /// </summary>
    private ICommand mUpdater;
    public ICommand ConnectCommand
    {
        get
        {
            if (mUpdater == null)
                mUpdater = new DelegateCommand(new Action(SaveExecuted), new Func<bool>(SaveCanExecute));

            return mUpdater;
        }
        set
        {
            mUpdater = value;                
        }
    }

    public bool SaveCanExecute()
    {
        return true;
    }     

    public void SaveExecuted()
    {
        if (SelectedProduct.Connection_Status == "Disconnected" && SelectedProduct.Name == "Bavaria")
        {
            SelectedProduct.Connection_Status = "Connected";
            m_BoardTabs.Add(new Product() { TabOperation = "I2C" });
            m_BoardTabs.Add(new Product() { TabOperation = "Voltage" });
            m_BoardTabs.Add(new Product() { TabOperation = "Clock" });
            m_BoardTabs.Add(new Product() { TabOperation = "Codec" });
            m_BoardTabs.Add(new Product() { TabOperation = "EEPROM" });                             
        }

        else if (SelectedProduct.Connection_Status == "Disconnected" && SelectedProduct.Name == "Redhook")
        {
            SelectedProduct.Connection_Status = "Connected";

            m_BoardTabs.Add(new Product() { TabOperation = "I2C" });
            m_BoardTabs.Add(new Product() { TabOperation = "Voltage" });
            m_BoardTabs.Add(new Product() { TabOperation = "Clock" });
            m_BoardTabs.Add(new Product() { TabOperation = "Codec" });
            m_BoardTabs.Add(new Product() { TabOperation = "EEPROM" });
            m_BoardTabs.Add(new Product() { TabOperation = "PCM Route" });
            m_BoardTabs.Add(new Product() { TabOperation = "PCM Route #" });
            m_BoardTabs.Add(new Product() { TabOperation = "PCM Gen" });
            m_BoardTabs.Add(new Product() { TabOperation = "SD Card" });
            m_BoardTabs.Add(new Product() { TabOperation = "FPGA" });
            m_BoardTabs.Add(new Product() { TabOperation = "PCMPDM" });
            m_BoardTabs.Add(new Product() { TabOperation = "Data Gen" });           
        }
    } 
```

请注意，我想在控件中添加的 tabitem “VOLTAGE”是我在开头提到的另一个项目的一部分。它有自己的视图、视图模型和模型类。以下是我要添加的视图 in.xaml 文件：

```
<Grid Name="VoltageTab" Height="572" Width="590" DataContext="{StaticResource VoltageViewModel}" >
    // Some UI componments which shud be placed inside VOLTAGE Tab on selecting Voltage from ListBox.
</Grid> 
```

正如您在上面看到的，我希望将上面的视图放置在电压选项卡中，一旦用户从列表框中单击电压项，该选项卡就会创建。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:14:03.400

TabControl 有一个 ItemsSource 属性。它可以绑定到 ViewModel 中的可观察对象集合。

除此之外，在 observable 集合中使用的对象必须有一个关联的 DataTemplate，它应该是一个 TabItem。

因此，当您使用 DataTemplate 将对象添加到充当 TabControl 的源的 ObservableCollection 时，新的 TabItem 将添加到 TabControl。

还要确保在 observablecollection 中有一个条目/对象用于初始 tabitem。

您可以通过添加适当的命名空间/引用来引用 DataTemplate 中其他项目的 TabItem

这是 ViewModel 类

```
 public class TabItemDetail
{
    public string Header { get; set; }
}

public class MainWindowViewModel : INotifyPropertyChanged
{
    #region Members

    List<string> _dataSource = null;
    string _selectedDataSource = null;
    ObservableCollection<TabItemDetail> _tabItems = null;

    #endregion

    #region INotifyPropertyChanged

    public event PropertyChangedEventHandler PropertyChanged;

    private void OnPropertyChanged(string propertyName)
    {
        if (this.PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion

    public ObservableCollection<TabItemDetail> Items
    {
        get
        {
            if (_tabItems == null)
            {
                _tabItems = GetTabItems();
            }

            return _tabItems;
        }
    }

    public List<string> DataSource
    {
        get
        {
            if (_dataSource == null)
            {
                _dataSource = GetDataSource();
            }

            return _dataSource;
        }
    }

    public string SelectedDataSource
    {
        get { return _selectedDataSource; }
        set
        {
            if (_selectedDataSource == value)
                return;

            _selectedDataSource = value;

            AddItemsToTab(value);

            OnPropertyChanged("SelectedDataSource");
        }
    }

    #region Private methods

    private void AddItemsToTab(string selectedItem)
    {
        if (_tabItems != null && _tabItems.Count > 0)
        {
            var query = from item in _tabItems
                        where item.Header == selectedItem
                        select item;

            if (query.Count() == 1)
                return;
            else
                _tabItems.Add(new TabItemDetail { Header = selectedItem });
        }
    }

    private List<string> GetDataSource()
    {
        List<string> source = new List<string>();

        source.Add("Default tab");
        source.Add("Voltage Tab");

        return source;
    }

    private ObservableCollection<TabItemDetail> GetTabItems()
    {
        ObservableCollection<TabItemDetail> newSource = new ObservableCollection<TabItemDetail>();
        newSource.Add(new TabItemDetail { Header = "Connect" });

        return newSource;
    }

    #endregion
} 
```

这是视图

```
 <Window x:Class="SampleApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:SampleApp"

    Title="MainWindow" Height="350" Width="525">
<Window.DataContext>
    <local:MainWindowViewModel/>
</Window.DataContext>
<Window.Resources>
    <DataTemplate DataType="{x:Type local:TabItemDetail}">
        <TabItem Header="{Binding Header}"/>
    </DataTemplate>
</Window.Resources>
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="110"/>
        <ColumnDefinition Width="5"/>
        <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

    <ListBox Grid.Column="0" ItemsSource="{Binding DataSource}" SelectedItem="{Binding SelectedDataSource}"/>

    <TabControl Grid.Column="2" local:MySampleAttachedProperty.Header="{Binding SelectedDataSource}">
        <TabItem Header ="Connect" />
    </TabControl>
</Grid> 
```

这是新的附加属性类，它可以解决问题

```
public class MySampleAttachedProperty
{
    public static string GetHeader(DependencyObject obj)
    {
        return (string)obj.GetValue(HeaderProperty);
    }

    public static void SetHeader(DependencyObject obj, string value)
    {
        obj.SetValue(HeaderProperty, value);
    }

    // Using a DependencyProperty as the backing store for Header.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty HeaderProperty =
        DependencyProperty.RegisterAttached("Header", typeof(string), typeof(MySampleAttachedProperty), new UIPropertyMetadata(CallBack));

    private static void CallBack(object sender, DependencyPropertyChangedEventArgs args)
    {
        TabControl tabControl = sender as TabControl;
        TabItem newTab = new TabItem { Header = args.NewValue };
        tabControl.Items.Add(newTab);
        newTab.Focus();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T10:03:50.090

tabcontrol 的数据模板不应包含 tabitem。tabcontrol 正在为绑定集合中的每个元素生成一个 tabitem。要启用与 tabitem 标题的数据绑定，请设置 tabcontrol 的 itemcontainerstyle 属性。这是一个小样本：

风景：

```
<Window x:Class="WpfLab.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="0.5*"/>
        <ColumnDefinition Width="0.5*"/>
    </Grid.ColumnDefinitions>
    <TabControl ItemsSource="{Binding ProductTabs}">
        <TabControl.ItemContainerStyle>
            <Style TargetType="TabItem">
                <Setter Property="Header" Value="{Binding Header}"/>
            </Style>
        </TabControl.ItemContainerStyle>
    </TabControl>
    <ListBox Grid.Column="1" ItemsSource="{Binding Products}" SelectedItem="{Binding SelectedProduct}"/>
</Grid> 
```

视图模型

```
using System.Collections.ObjectModel;
using System.Linq;
using System.Windows;

namespace WpfLab
{
    public partial class MainWindow : Window
    {
        Product selectProduct;

        public MainWindow()
        {
            InitializeComponent();

            Products = new ObservableCollection<Product>();
            ProductTabs = new ObservableCollection<Product>();

            var products = Enumerable.Range(0, 10).Select(i => new Product { Header = "Product " + i });
            foreach (var p in products)
                Products.Add(p);

            DataContext = this;
        }

        public Product SelectedProduct 
        {
            get { return this.selectProduct; }

            set
            {
                UpdateTabs(this.selectProduct, value);
                this.selectProduct = value;
            }
        }

        public ObservableCollection<Product> Products { get; private set; }

        public ObservableCollection<Product> ProductTabs { get; private set; }

        void UpdateTabs(Product old, Product @new)
        {
            if (ProductTabs.Any(p => p == old))
                ProductTabs.Remove(old);

            ProductTabs.Add(@new);
        }
    }

    public class Product
    {
        public string Header { get; set; }

        public override string ToString()
        {
            return Header;
        }
    }
} 
```

# android - java.lang.IllegalArgumentException 上的错误：provider==null

> ID：12524443
> 
> 赞同：2
> 
> 时间：2012-09-21T04:51:41.357
> 
> 标签：android, google-maps, gps, illegalargumentexception

我将我的应用程序发布到 android 市场。我的主页出现错误。有人写了崩溃错误。但是这个应用程序在我的真实设备中完美运行。我也添加了权限。我的错误：

```
java.lang.RuntimeException: Unable to start activity ComponentInfo{com.karthi.locationspeecher/com.android.locationspeecher.LocationSpeecher}: java.lang.IllegalArgumentException: provider==null
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1651)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
at android.app.ActivityThread.access$1500(ActivityThread.java:117)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.IllegalArgumentException: provider==null
at android.location.LocationManager.getLastKnownLocation(LocationManager.java:1017)
at com.android.locationspeecher.LocationSpeecher.onCreate(LocationSpeecher.java:84)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1615)
... 11 more 
```

位置管理器：

```
 LocationManager locationManager; 
            String context = Context.LOCATION_SERVICE; 
            locationManager = (LocationManager)getSystemService(context); 

            Criteria crta = new Criteria(); 
            crta.setAccuracy(Criteria.ACCURACY_FINE); 
            crta.setAltitudeRequired(false); 
            crta.setBearingRequired(false); 
            crta.setCostAllowed(true); 
            crta.setPowerRequirement(Criteria.POWER_LOW); 
            String provider = locationManager.getBestProvider(crta, true); 

         // String provider = LocationManager.GPS_PROVIDER; 
            Location location = locationManager.getLastKnownLocation(provider); 
            updateWithNewLocation(location); 

            locationManager.requestLocationUpdates(provider, 2000, 10, locationListener); 
            } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T04:56:29.107

由于`GPS Providers`. 请让此人检查设置是否`Gps Provider`或`Network Provider`已启用位置设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T10:35:14.437

还要确保添加`android.permission.ACCESS_FINE_LOCATION`或添加`android.permission.ACCESS_COARSE_LOCATION`到您的清单文件中，这为我解决了问题（所有提供程序都已在位置设置中启用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-22T14:19:44.000

我通过添加解决了这个问题：

`[程序集：UsesPermission(Manifest.Permission.AccessFineLocation)] [程序集：UsesPermission(Manifest.Permission.AccessCoarseLocation)] [程序集：UsesPermission(Manifest.Permission.Internet)]'

在 assemlyInfo.cs 中授予权限

# java - 从java中的hashmap的arraylist中检索值？

> ID：12524444
> 
> 赞同：-1
> 
> 时间：2012-09-21T04:51:46.277
> 
> 标签：java, map, hashmap

我有一个哈希图，如下所示。

```
indexMap = new HashMap<String, ArrayList<Integer>>(); 
```

我可以像这样从字符串中收集值，

```
 String[] keysProblem2 = (String[]) indexMap.keySet().toArray(new String[0]); 
```

如何从arraylist中收集值？我试着这样做，

```
 Integer [] valuesProblem2 =  (Integer[]) indexMap.values().toArray(new Integer[indexMap.size()]); 
```

但得到了这样的错误，

```
 java.lang.ArrayStoreException: java.lang.String
at java.util.AbstractCollection.toArray(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:46:13.453

`indexMap.values()`返回s`Collection`的a `ArrayList<Integer>`。您不能调用`.toArray(new Integer[indexMap.size()])`，因为它是 s 的集合`ArrayList<Integer>`，而不是`Integer`s。

如果你想遍历所有 ArrayLists，并创建一个大`Integer[]`的，那么你必须做这样的事情：

```
ArrayList<ArrayList<Integer>> arrays = new ArrayList<ArrayList<Integer>>(indexMap.values());
ArrayList<Integer> allInts = new ArrayList<Integer>();
for(ArrayList<Integer> ints : arrays) {
   allInts.addAll(ints);
}
Integer[] valuesProblem2 = (Integer[])allInts.toArray(new Integer[0]); 
```

# gdb - gdb 回溯能否以某种方式省略参数值？

> ID：12524451
> 
> 赞同：1
> 
> 时间：2012-09-21T04:52:29.693
> 
> 标签：gdb, options

我正在对 DynamoRIO 进行一些修改，它`byte*`用于指向代码缓存的指针。当我在 gdb 中调试时，该`backtrace`命令认为 every`byte*`都是空终止的，因此它会在整个回溯中打印出大量字节值。我需要一种方法：

1.  关闭回溯中参数的显示，或
2.  更改 gdb 打印 a 的方式`byte*`（最好只是将指针值作为十六进制数字）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T20:41:40.487

1.  使用**“set print frame-arguments none”**关闭回溯中参数的显示。请参阅[GDB 手册：打印设置](http://sourceware.org/gdb/onlinedocs/gdb/Print-Settings.html#Print-Settings)。
2.  您还可以[用 Python 编写一个漂亮的打印机](http://sourceware.org/gdb/onlinedocs/gdb/Writing-a-Pretty_002dPrinter.html)并将其注册到 GDB 以更改`byte *`显示方式。

# ios - iPad 中的两页卷曲效果

> ID：12524453
> 
> 赞同：0
> 
> 时间：2012-09-21T04:52:35.977
> 
> 标签：ios, uianimation

我正在使用 Leaves 项目从一个 pdf 页面移动到另一个它工作正常。现在页面卷曲是从左到右，从右到左，就像一个笔记本。现在的效果是翻一页，但我想翻两页。一页必须显示在左侧，另一页必须显示在右侧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:59:35.423

`UIPageViewController`除非您尝试支持 iOS 4，否则您 可能应该使用。`UIPageViewController`支持将书脊放在屏幕中间，这样您就可以一次看到两个页面。我不知道 Leaves 是否相关，因为 iOS 5 及更高版本内置了更好的解决方案。

# selenium - 请让我知道如何使用 selenium grid 1.0.8 在 Windows 7 上的 IE 9 中运行测试用例

> ID：12524454
> 
> 赞同：0
> 
> 时间：2012-09-21T04:52:44.293
> 
> 标签：selenium, grid

我们在 Windows XP 计算机的 IE 8 中使用 selenium grid 1.0.8 并行运行测试用例。每个节点都配置在不同的计算机上。它运行良好。

但是当我们尝试在 Windows 7 上的 IE 9 中运行测试用例时，它就不起作用了。IE 9 启动但没有任何反应。

请让我知道如何使用 selenium grid 1.0.8 在 Windows 7 上的 IE 9 中运行测试用例

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T15:08:50.603

建议使用 Grid 2.0

如何使用 Web 驱动程序在网格中运行浏览器

网格中有一个HUB和多个节点

这里的场景是

Hub-->Mac 机器节点-->Windows Vista

```
1) Download "Selenium Server"  latest server from " http://docs.seleniumhq.org/download/ " on    
both machine "Hub" and "Node"

2) Download browser driver in "Node" machine (Download browser driver according to your OS  
either 32-bit or 64-bit) 
```

3）在Hub机器中打开终端并输入

```
java -jar "selenium server location" -role hub <Enter>

open browser and type "http://localhost:4444/grid/console" 
```

4）在Node机器中打开终端并输入

```
java -jar "selenium server location" -role node -port 5566 -hub http://Hub ip address:4444/grid  
/register -Dwebdriver.ie.driver=<path of ie web driver, downloaded in step 2>  <Enter>

-Dwebdriver.ie.driver --> to specify the browser driver path 
```

5）此代码应用于驱动浏览器

```
DesiredCapabilities capabilies = DesiredCapabilities.internetexplorer();
capabilies.setPlatform(Platform.ANY);
driver = new RemoteWebDriver(new URL("<node url>:<port>/wd/hub"), capabilies); 
```

# git - 如何删除 Git 远程仓库中的文件

> ID：12524455
> 
> 赞同：1
> 
> 时间：2012-09-21T04:52:49.177
> 
> 标签：git, version-control, github

假设我在 Github 中有以下结构（远程）

```
/project
          /dir1
          /dir2
          file1
          file2 
```

现在，我分叉了 repo 并将其更改为以下内容：

```
/project
           /dir_list
           /files_list 
```

每当我推送 repo 时，我希望遥控器是这样的：

```
/project
           /dir_list
           /files_list 
```

而**不是**：

```
/project
          /dir1
          /dir2
          file1
          file2
          /dir_list
          /files_list 
```

我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T04:54:34.013

尝试

```
git rm -r dir1 dir2 file1 file2
git add ./* 
```

然后才提交和推送。

或者，如果您在实际对 repo 进行任何工作之前给予足够的关注并等待答案：您可以先删除所有内容，然后执行您的工作，然后再添加所有内容：

```
git rm -r ./* # this will delete ALL FILES
# ... copy the files you need, make changes
git add ./* 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T06:01:40.497

[H2C03](https://stackoverflow.com/users/529758/h2co3)的[答案](https://stackoverflow.com/a/12524463/6309)略有不同（赞成）：

如果您已经完成了大量工作，并且不想将每个文件都输入到`git rm`命令中...再次克隆您的 GitHub 存储库！

在那个新的克隆中，删除所有内容，提交并推送。

回到你的第一个克隆（在那里你进行了大规模的重构并且已经`git commit`重构）：，`git pull --rebase`然后`git push`.
这将在您从 GitHub 存储库返回的提交之上重放您的修改（即注册删除所有先前文件的提交）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T07:02:40.560

您可以使用以下[`git mv`](https://www.kernel.org/pub/software/scm/git/docs/git-mv.html)命令：

```
$ mkdir dir_list files_list
$ git mv dir1 dir2 dir_list/
$ git mv file1 file2 files_list/
$ git commit 
```

# android-manifest - @android：清单文件中的可绘制资源？

> ID：12524457
> 
> 赞同：1
> 
> 时间：2012-09-21T04:53:46.010
> 
> 标签：android-manifest, google-play, android-resources

我想使用股票 android 图标进行设置作为我的设置活动中的图标。问题是在清单中使用以下行时，当我上传到 google play 商店时出现错误。

```
android:icon="@android:drawable/ic_menu_preferences" 
```

错误类似于“服务器无法处理 apk 文件。再试一次。” Google 建议在未签名的 apk 上运行 aapt 工具并检查错误。这将返回错误 android:icon 未指向有效资源。

我不确切知道错误代码是什么，因为如果我删除该行，问题就解决了，这就是我所做的并已经上传了代码。我真正想要的是如何将股票 android 设置图标放在我的应用程序中。我还支持低于 API8 的版本，因此我在设置页面中使用了 PreferencesActivity。

这是清单中的完整设置活动

```
<activity
    android:name=".ShowSettingsActivity"
    android:icon="@android:drawable/ic_menu_preferences"
    android:label="@string/menu_settings" >
</activity> 
```

# .net - 同步框架不必要的上传

> ID：12524459
> 
> 赞同：0
> 
> 时间：2012-09-21T04:53:58.617
> 
> 标签：.net, sql-server, sql-server-2008, microsoft-sync-framework

我有一个 .NET 应用程序，它使用 Microsoft 同步框架在 SQL Server 2008 R2 服务器和许多 SQL Server CE 客户端之间同步数据。

初始同步成功下载了服务器上的数据，但是同步日志表明它随后会上传刚刚完成下载的未更改数据。这大大延长了初始同步时间。

从下面的 SQL CE 日志中提取（这是其中一个表的初始同步）：

```
***** Client Provider Commit Transaction ****
Connecting to database: Data\Database.sdf
**** Client Provider Begin Transaction ****
----- Client Applying Changes from Server for Group "Staff" -----
----- Applying Deletes for Table Staff-----
Deletes Applied: 0
--- End Applying Deletes for Table Staff-----
----- Applying Upserts for Table Staff-----
----- Applying Inserts for Table Staff-----
Inserts Applied: 1
----- Applying Updates for Table Staff-----
Updates Applied: 0
--- End Applying Upserts for Table Staff---
Staff: Set ReceivedAnchor value: 1832
--- End Client Applying Changes from Server for Group "Staff" --- 
```

这是更改被错误地上传回服务器时的日志，即当没有任何更改时标记为正在更新。

```
SELECT ut.* FROM    (select ut0.* from [Staff] as ut0 where      (ut0.__sysTrackingContext <>
@CNTX OR ut0.__sysTrackingContext IS NULL)      AND ut0.__sysChangeTxBsn >= @LBSN    ) as ut  
LEFT OUTER JOIN   (select txcs0.* from __sysTxCommitSequence as txcs0) as txcsInsert  ON 
ut.__sysInsertTxBsn = txcsInsert.__sysTxBsn  LEFT OUTER JOIN   (select txcs0.* from     
__sysTxCommitSequence as txcs0) as txcsUpdate  ON ut.__sysChangeTxBsn = txcsUpdate.__sysTxBsn 
WHERE    COALESCE(txcsUpdate.__sysTxCsn, ut.__sysChangeTxBsn) > @LCSN AND COALESCE    
(txcsUpdate.__sysTxCsn, ut.__sysChangeTxBsn) <= @ECSN   AND   (COALESCE(txcsInsert.__sysTxCsn, 
ut.__sysInsertTxBsn) <= @LCSN OR    COALESCE(txcsInsert.__sysTxCsn, ut.__sysInsertTxBsn) IS NULL 
OR    ut.__sysInsertTxBsn IN (SELECT SyncBsn FROM __syncTransactions))
Parameter: @LCSN Value: 0
Parameter: @LBSN Value: 0
Parameter: @ECSN Value: 408
Parameter: @CNTX Value: 73c9795b-29e5-49c3-8a66-f99f667225d5
Update for row with PK: StaffId = 1 
```

在服务器端，跟踪当前版本在初始同步期间很好，然后在某些时候增加，我假设这是由于客户端认为下载的记录是新的。

可能导致此问题的一件事是禁用跟踪以设置 SyncScope，然后启用。这是在初始同步之后完成的。

不确定我是否提供了足够有用的信息。乐于提供更多。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T03:07:03.880

您如何进行初始同步？如果您在不使用 Sync Framework 或禁用 Tracking 的情况下执行此操作，则 Sync Framework 不知道最初同步的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:25:47.513

解决了这个问题（至少有一个可行（不理想）的解决方案）。这是一个有趣的设计。同步涉及三个单元。服务器、中央同步设备和边缘设备。同步发生如下：

1.  中央设备执行与服务器的双向同步
2.  边缘设备执行与中央设备的双向同步。

服务器有 2008 R2，中央和边缘设备运行 SQL CE。

中央同步和边缘设备从服务器获取它们的初始数据，但是当时它们不知道它们会是什么。当应用程序启动时，他们的角色就确定了。因为我们必须在中央和边缘设备上禁用和重新启用跟踪以允许 CE 到 CE 同步（找不到任何其他方法来完成这项工作，因为它在我的评论中抛出了上面的异常），它似乎与CE 到 SQL 2008 同步出现了上述问题，即最初同步的数据被重新传输到服务器。这可以通过手动设置发送的锚点来解决，但是 CE 到 CE 数据库的副作用是将初始数据相互传输，然后再将其传输回服务器。

同步框架在尝试更新和插入行时确实将其视为冲突，但是尽管尝试通过多种方式设置冲突解决规则，但它并没有解决问题。然后，我们尝试在配置数据库之前擦除边缘设备中的数据，以便它可以从中央设备获取最新数据。这解决了这个问题。如前所述，这并不理想，但它是一个可行的解决方案。

如果您对如何在无需擦除边缘设备的情况下解决此问题有任何想法，我们将不胜感激，因为在无需重新加载初始设置期间最初下载的所有数据的情况下进行边缘设备同步设置将是有益的。

干杯。

# google-app-engine - 我可以更改聊天ID吗？

> ID：12524461
> 
> 赞同：0
> 
> 时间：2012-09-21T04:54:20.770
> 
> 标签：google-app-engine

我正在使用应用程序引擎。在此示例中，我将使用名为 Square 的应用程序。

我们有域名 www.square.com。

我们无法获取 square.appspot.com

我们确实有 squares.appspot.com。

用于将应用程序移至 www.square.com。我们这样做了。伟大的！非常令人兴奋。

但我们还构建了一个聊天机器人。我们现在需要人们与“方格”成为朋友。我们想要的是让人们成为“广场”的朋友。

所以请教两个问题：有没有办法获得 Square.appengine.com。根据我的研究......我假设有人拿走了它，现在它已经消失了（记住“正方形”只是一个例子）。

知道 #1... 有没有办法更改聊天机器人的“名称”？来自 Squares.appspot.com --> Square.appspot.com？

提前非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:28:59.187

这是一个聊天机器人，让我们向个人发送消息，他们必须将其作为朋友。在他们的朋友列表中，他们看到：squares.appspot.com。这不是我们的域名或我们的名字。我们需要它说 square.appspot.com。最好能改个名字...

这就引出了第二个问题……我们如何改变人们看到的名字。

“如果你已经建立了聊天机器人，为什么你不能自己改变它的名字呢？”

我错过了这么简单的东西吗？如何？

# java - 在 ArrayList 中的单个索引处添加多个值

> ID：12524468
> 
> 赞同：9
> 
> 时间：2012-09-21T04:55:53.857
> 
> 标签：java, android, arraylist

我有一个`ArrayList`像这样的java中的double。

```
List<double[]> values = new ArrayList<double[]>(2); 
```

现在我要做的是通过循环在列表的零索引中添加 5 个值，在索引 1 中添加 5 个值。

第零个索引将具有值`{100,100,100,100,100}` 索引 1 将具有值`{50,35,25,45,65}`

并且所有这些值都按以下顺序存储在双精度数组中

```
double[] values = {100,50,100,35,100,25,100,45,100,65} 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T05:03:15.703

@Ahamed 有一点，但是如果您坚持使用列表，那么您可以拥有三个这样的数组列表：

```
ArrayList<Integer> first = new ArrayList<Integer>(Arrays.AsList(100,100,100,100,100));
ArrayList<Integer> second = new ArrayList<Integer>(Arrays.AsList(50,35,25,45,65));
ArrayList<Integer> third = new ArrayList<Integer>();

for(int i = 0; i < first.size(); i++) {
      third.add(first.get(i));
      third.add(second.get(i));
} 
```

**编辑：** 如果您的列表中有以下值：

```
List<double[]> values = new ArrayList<double[]>(2); 
```

你想做的就是把它们结合起来，对吧？您可以尝试这样的事情：（我假设两个数组的大小相同，否则您需要使用两个 for 语句）

```
ArrayList<Double> yourArray = new ArrayList<Double>();
for(int i = 0; i < values.get(0).length; i++) {
    yourArray.add(values.get(0)[i]);
    yourArray.add(values.get(1)[i]);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T05:07:05.967

```
ArrayList<ArrayList> arrObjList = new ArrayList<ArrayList>();
ArrayList<Double> arrObjInner1= new ArrayList<Double>();
arrObjInner1.add(100);
arrObjInner1.add(100);
arrObjInner1.add(100);
arrObjInner1.add(100);

arrObjList.add(arrObjInner1); 
```

您可以`ArrayList`在`arrObjList`. 我希望这能帮到您。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T05:48:51.963

怎么样

1.  首先将您想要的结果添加为 arraylist 和
2.  并根据需要转换为双数组。

试试这样。。

```
import java.util.ArrayList;
import java.util.List;

    public class ArrayTest {

        /**
         * @param args
         */
        public static void main(String[] args) {
            // TODO Auto-generated method stub

            // Your Prepared data. 
            List<double[]> values = new ArrayList<double[]>(2);

            double[] element1 = new double[] { 100, 100, 100, 100, 100 };
            double[] element2 = new double[] { 50, 35, 25, 45, 65 };

            values.add(element1);
            values.add(element2);

            // Add the result to arraylist.
            List<Double> temp = new ArrayList<Double>();
            for(int j=0;j<values.size(); j++) {
                for (int i = 0; i < values.get(0).length; i++) {
                    temp.add(values.get(0)[i]);
                    temp.add(values.get(1)[i]);
                }
            }

            // Convert arraylist to int[].
            Double[] result = temp.toArray(new Double[temp.size()]);
            double[] finalResult = new double[result.length]; // This hold final result.
            for (int i = 0; i < result.length; i++) {
                finalResult[i] = result[i].doubleValue();
            }

            for (int i = 0; i < finalResult.length; i++) {
                System.out.println(finalResult[i]);
            }
        }
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-06-17T18:52:04.443

为您创建简单的方法：

```
public void addMulti(String[] strings,List list){
    for (int i = 0; i < strings.length; i++) {
        list.add(strings[i]);
    }
} 
```

然后你可以创建

```
String[] wrong ={"1","2","3","4","5","6"}; 
```

并使用此方法将其添加到您的列表中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T04:58:17.797

改用二维数组。例如`int values[][] = new int[2][5];`，当您不进行太多操作时，数组会更快。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-07T10:30:45.543

```
import java.util.*;
public class HelloWorld{

 public static void main(String []args){
  List<String> threadSafeList = new ArrayList<String>();
    threadSafeList.add("A");
    threadSafeList.add("D");
    threadSafeList.add("F");

Set<String> threadSafeList1 = new TreeSet<String>();
    threadSafeList1.add("B");
    threadSafeList1.add("C");
    threadSafeList1.add("E");
    threadSafeList1.addAll(threadSafeList);

 List mainList = new ArrayList();   
 mainList.addAll(Arrays.asList(threadSafeList1));
 Iterator<String> mainList1 = mainList.iterator();
 while(mainList1.hasNext()){
 System.out.printf("total : %s %n", mainList1.next());
 }
}
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-17T02:06:30.977

您可以传递一个引用特定索引处所有值的对象。

```
import java.util.ArrayList;

public class HelloWorld{

 public static void main(String []args){

ArrayList<connect> a=new ArrayList<connect>();

a.add(new connect(100,100,100,100,100));

System.out.println(a.get(0).p1);

System.out.println(a.get(0).p2);

System.out.println(a.get(0).p3);
}

}

class connect
{
int p1,p2,p3,p4,p5;

connect(int a,int b,int c,int d,int e)
{

this.p1=a;

this.p2=b;

this.p3=c;

this.p4=d;

this.p5=e;
}

} 
```

稍后要在特定索引处获取特定值，您可以执行以下操作：

```
a.get(0).p1;

a.get(0).p2;

a.get(0).p3;............. 
```

等等。

# iphone - 在键盘可见性上调整背景大小

> ID：12524472
> 
> 赞同：0
> 
> 时间：2012-09-21T04:55:59.923
> 
> 标签：iphone, ios, uiscrollview, uikeyboard

我在我的应用程序中使用滚动视图，因为当我点击 dob 文本字段时，日期选择器视图显示为弹出窗口，当我进一步点击连续文本字段时，视图就像图像中一样，这是我的代码,

用于日期选择器可见性。

[按下 UIButton 后会弹出 UIDatePicker](https://stackoverflow.com/questions/4824043/uidatepicker-pop-up-after-uibutton-is-pressed/4824319#4824319)

用于键盘方向

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
[dob resignFirstResponder];
if (txt1.textColor == [UIColor lightGrayColor]) {
    txt1.text = @"";
    txt1.textColor = [UIColor blackColor];
}
if ([textField isEqual:dob])
{
    [self but];
    [dob resignFirstResponder];
    //return NO;
}  
//[self animateTextField:textField up:YES];
[textField setClearButtonMode:UITextFieldViewModeWhileEditing];
CGRect textFieldRect  = [self.view.window convertRect:textField.bounds fromView:textField];
CGRect viewRect = [self.view.window convertRect:self.view.bounds fromView:self.view];
CGFloat midline = textFieldRect.origin.y + 0.1 * textFieldRect.size.height;
CGFloat numerator = midline - viewRect.origin.y - MINIMUM_SCROLL_FRACTION * viewRect.size.height;
CGFloat denominator =   (MAXIMUM_SCROLL_FRACTION - MINIMUM_SCROLL_FRACTION) * viewRect.size.height;
CGFloat heightFraction = numerator / denominator;
if (heightFraction < 0.0)
{
    heightFraction = 0.0;
}
else if (heightFraction > 1.0)
{
    heightFraction = 1.0;
}
UIInterfaceOrientation orientation =
[[UIApplication sharedApplication] statusBarOrientation];
if (orientation == UIInterfaceOrientationPortrait ||
    orientation == UIInterfaceOrientationPortraitUpsideDown)
{
    animatedDistance = floor(PORTRAIT_KEYBOARD_HEIGHT * heightFraction);
}
else
{
    animatedDistance = floor(LANDSCAPE_KEYBOARD_HEIGHT * heightFraction);
}
CGRect viewFrame = self.view.frame;
viewFrame.origin.y -= animatedDistance;

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationBeginsFromCurrentState:YES];
[UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

[self.view setFrame:viewFrame];

[UIView commitAnimations];    
}
- (void)textFieldDidEndEditing:(UITextField *)textField
{

//[self animateTextField:textField up:NO];
CGRect viewFrame = self.view.frame;
viewFrame.origin.y += animatedDistance;

[UIView beginAnimations:nil context:NULL];
[UIView setAnimationBeginsFromCurrentState:YES];
[UIView setAnimationDuration:KEYBOARD_ANIMATION_DURATION];

[self.view setFrame:viewFrame];

[UIView commitAnimations];    
}
- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
return [textField resignFirstResponder];
return [txt1 resignFirstResponder];
} 
```

谁能帮我清除。 ![在此处输入图像描述](../Images/a93bd3197891b5b86c4b83df59d68028.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:17:30.453

对于滚动视图和键盘出现时需要移动其内容的基本问题，我发现[Michael Tyson 的这个开源滚动视图类非常有用](https://github.com/michaeltyson/TPKeyboardAvoiding)。

基本上，您只需将`TPKeyboardAvoidingScrollView`类添加到项目中，然后在通常使用`UIScrollView`. 如果您愿意，您添加到的子视图`TPKeyboardAvoidingScrollView`可以是`UITextField`对象。当您点击这些字段开始编辑并出现键盘时，`TPKeyboardAvoidingScrollView`容器将选择适当的滚动位置，以便正在编辑的字段不会被键盘隐藏，并且您不会在屏幕上看到黑条射击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:05:56.353

当键盘出现时，您需要调整滚动视图的大小。

这可以通过添加：

```
NSNotificationCenter *center = [NSNotificationCenter defaultCenter];
    [center addObserver:self selector:@selector(keyboardShown) name:UIKeyboardDidShowNotification object:nil];
    [center addObserver:self selector:@selector(keyboardHidden) name:UIKeyboardWillHideNotification object:nil]; 
```

在 viewDidLoad 中。然后在您的实现文件中定义方法keyboardShown 和keyboardHidden。这些方法会在键盘出现和消失时自动调用。在这些方法中，相应地调整背景视图的大小。由于您使用的是滚动视图，请注意滚动视图的 contectView 大小。因为它与视图的框架大小不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T11:27:00.027

我想我得到了问题。

例如，在您的注册页面中，许多文本字段和 DOB 按钮。

所以，基本上当任何文本字段编辑时，而不是返回键盘，用户按下 DOB 按钮。

所以你必须首先 resignFirstRespoder 你所有的文本字段。

问题是当您将 startEditing 框架设置为顶部并将 endEditing 设置为底部但当您单击按钮时 endEditing 未调用因此框架未设置为底部。然后你再次开始编辑框架再次设置为顶部，所以问题出现了。

我希望这有帮助...

# sql - 如何使用从调用 mkqlite() 获得的 COUNT 值？

> ID：12524473
> 
> 赞同：0
> 
> 时间：2012-09-21T04:56:00.083
> 
> 标签：sql, database, matlab

我正在使用[mksqlite](http://mksqlite.berlios.de/)从 matlab 创建和访问 SQL 数据库，并且我想获取表中的行数。我试过这个：

```
num = mksqlite('SELECT COUNT(*) FROM myTable'); 
```

，但返回的值不是很有帮助。如果我在脚本中放置一个断点并检查变量，我发现它是一个具有单个字段的结构，称为 'COUNT(_)'，这实际上似乎是一个无效的字段名称，所以我无法访问它：

```
K>> class(num)

ans =
struct

K>> num

num = 
    COUNT(_): 0

K>> num.COUNT(_)
??? num.COUNT(_)
                    |
Error: The input character is not valid in MATLAB statements or expressions.

K>> num.COUNT()
??? Reference to non-existent field 'COUNT'.

K>> num.COUNT
??? Reference to non-existent field 'COUNT'. 
```

甚至 MATLAB IDE 也无法访问它。如果我尝试在变量编辑器中双击该字段，则会吐出：

```
??? openvar('num.COUNT(_)', num.COUNT(_));
                                              |
Error: The input character is not valid in MATLAB statements or expressions. 
```

那么如何访问该字段呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:56:00.083

您是正确的，问题在于 mksqlite 以某种方式设法创建了一个无法读取的无效字段名称。最简单的解决方案是在您的 SQL 中添加一个 AS 子句，以便该字段具有一个合理的名称：

```
>> num = mksqlite('SELECT COUNT(*) AS cnt FROM myTable')

num = 
    cnt: 0 
```

然后要删除额外的间接层，您可以执行以下操作：

```
>> num = num.cnt;

>> num

num =
     0 
```

# javascript - 如何设置网页的滚动顶部

> ID：12524478
> 
> 赞同：0
> 
> 时间：2012-09-21T04:56:31.807
> 
> 标签：javascript, jquery, html, css

我面临设置滚动条顶部位置的问题。其实我需要的是；我正在使用一个 JQuery 键盘插件，我需要在页面的中心底部显示虚拟键盘并完成所有元素。

但是我遇到的问题是，当我在页面底部附近有一个输入字段时，该页面不显示滚动条（这意味着不需要溢出，因为我拥有的所有元素都在我的页面中可见） . 由于我在页面底部显示虚拟键盘并且当焦点元素也位于页面底部时，我需要启动滚动条并且页面应该通过自动向下滚动来上升，因此活动输入字段元素对我。

我试图通过使用这个来设置滚动条

```
$(document).scrollTop(_scroll_top + (_el_top + _el_height) - _keyboard_top); 
```

其中 _scroll_top 是我当前的滚动顶部位置，_el_top 是焦点元素顶部位置，_el_height 是我的焦点元素高度，_keyboard_top 是键盘的顶部位置。

现在的问题是当我有一个更高的页面时（这意味着滚动条尺寸很小，即滚动条尺寸可能约为屏幕的 60%。高度）scrollTop 工作正常，即使键盘是，我也可以看到活动输入元素可见的。但是当我的页面高度较小时（例如：滚动条大小约为 90% 或者它可能与屏幕大小相同。高度）scrollTop 无法正常工作，因此活动输入元素不可见并且它落后于虚拟键盘。

如何正确设置滚动顶部，以便我能够看到活动输入元素，然后在该元素的底部我可以看到虚拟键盘。

请看附图。那是应该显示实际活动输入元素的地方。

第一张图片是**在启用键盘之前：只看到元素的位置，滚动顶部**
第二张图片是**在启用键盘之后：只看到元素的位置，滚动顶部** ![启用键盘之前：只需查看元素的位置，滚动顶部](../Images/00b2708c9f382c8be46e022c15582bb0.png)

![启用键盘后：只需查看元素的位置，滚动顶部](../Images/f30e93ded518d375873bc28c0eebefd1.png)

当我的滚动条尺寸很大（大约 90% 的屏幕。高度）时，这就是我所需要的

提前致谢。

PS：如果我表达我的问题的方式混淆了，我非常抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T04:58:33.743

使用`jQuery('html,body').scrollTop('other things here')`；

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:04:10.280

感谢您的回复。我找到了我的问题的解决方案。在页面底部，我创建了一个虚拟 div 元素。

```
<div id="scroll_dummy"></div> 
```

最初，这个 div 的高度为零。我将键盘的高度应用于这个 div。结果，您的页面大小将增加，因此它可以轻松移动滚动顶部。在收盘时再次恢复这种风格。

然后在我应用 scrollTop 的地方我已经完成了这个。

```
$("#scroll_dummy").css("height", _keyboard_height);
$(document).scrollTop(_scroll_top + (_el_top + _el_height) - _keyboard_top); 
```

在哪里

*   _scroll_top : 滚动顶部位置
*   _el_top : 活动元素顶部位置
*   _el_height : 活动元素高度
*   _keyboard_top : 键盘元素顶部位置
*   _keyboard_height : 键盘元素高度位置

完成了这个...... :)

# iphone - UIAlert 中的 UIView

> ID：12524479
> 
> 赞同：-1
> 
> 时间：2012-09-21T04:57:03.470
> 
> 标签：iphone, objective-c, ios, uialertview

我想显示并且警报应该显示在所有另一个视图中，并且当应用程序在后台运行时也应该显示`UIView`。`UIAlert`是否可以 ？如果没有，那我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:15:54.467

**试试这个代码： -**

鉴于 didload 方法：

```
-(void)viewDidLoad
{
    flag=YES;
    [super viewDidLoad];
} 
```

在 viewWillAppear 方法中：

```
-(void)viewWillAppear:(BOOL)animated
{
    v=[[UIView alloc]initWithFrame:CGRectMake(0, 490, 320, 300)];
    v1.layer.cornerRadius = 10.0;
    v1.clipsToBounds = YES;
    v1.frame=CGRectMake(0, 490, 320, 108);
} 
```

和

```
-(IBAction)btn_Clicked
{

    if (flag == NO)
    {
        v=[[UIView alloc]initWithFrame:CGRectMake(0, 490, 320, 300)];
        v1.layer.cornerRadius = 10.0;
        v1.clipsToBounds = YES;
        v1.frame=CGRectMake(0, 490, 320, 108);

        v.hidden=NO;
        v.frame=CGRectMake(0, 0, 320, 460);
        v.backgroundColor=[UIColor colorWithWhite:0 alpha:0.2];
        [self.view addSubview:v];

        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.5];
        v1.frame=CGRectMake(69, 176, 185, 108);
        [v addSubview:v1];

        [UIView commitAnimations];

    }
    else
    {
        v.hidden=NO;
        v.frame=CGRectMake(0, 0, 320, 460);
        v.backgroundColor=[UIColor colorWithWhite:0 alpha:0.2];
        [self.view addSubview:v];

        [UIView beginAnimations:nil context:nil];
        [UIView setAnimationDuration:0.5];
        //v1.backgroundColor=[UIColor colorWithWhite:0 alpha:0.3];
        v1.frame=CGRectMake(69, 176, 185, 108);
        [v addSubview:v1];

        [UIView commitAnimations];
    }

} 
```

和

```
-(IBAction)cancel_Clicked
{
    flag=NO;
    v.hidden=YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:03:24.377

当您的应用程序进入后台时，您没有太多的显示权限`UIAlertView`，您可以尝试`UILocalNotification`。

但我猜你想要一个自定义弹出窗口，这是你自己的视图。

只需尝试`UIView`从`Interface Builder`. 并添加为子视图。

```
UIView *v = [[UIView alloc] initWithFrame:CGRectMake(30, 30, 290, 290)];
[self.view addSubView:v]; 
```

但是一旦你的应用程序处于后台，你就不能再做任何事情了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:27:28.737

您可以在 UIAlertView 中添加 UIView，
但在后台运行的应用程序不能，它只是通知样式。

# html - 如果不使用“，”，样式将不适用

> ID：12524481
> 
> 赞同：0
> 
> 时间：2012-09-21T04:57:09.353
> 
> 标签：html, css

我刚刚注意到，使用下面的 css 代码会忽略 .input.cmp 位：

```
.create input.cmp, input.email, input.pswd, input.pswda{} 
```

虽然使用下面的代码（使用 , 之前）工作正常。

```
.create ,input.cmp, input.email, input.pswd, input.pswda{} 
```

这是怎么回事？这是正确的方法吗？或者我在这里做错了什么。

我以前习惯使用 ID 而不是类，没有第一个“，”，一切都很好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:07:55.577

**.create input.cmp**`input.cmp`里面说`.create`。

您可以像这样用 HTML 编写：

```
<div class="create">
 <input class="cmp">
</div> 
```

&

**.create ,input.cmp**反映了不同的元素，它们的样式是独立的。在那个**input.cmp**样式不依赖于**.create**根据上述样式。因此，您可以在**.create**内部甚至外部使用**input.cmp**具有相同的样式。

您可以像这样用 HTML 编写：

```
<div class="create"></div>
<input class="cmp"> 
```

**或者**

```
<div class="create">
 <input class="cmp">
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:03:13.240

这似乎是一种误解和逻辑错误。

1.  `.create input.cmp,`选择`input.cmp`里面`.create`
2.  `.create ,input.cmp,`是两个不同的选择器`.create`和`input.cmp`

这是一个简单的例子：

`.create input.cmp`***仅***在以下 HTML 中选择输入元素

```
<div class="create">
   <input type="text" class="img" />
</div> 
```

其中，`.create ,input.cmp`同时选择`div`和`input`元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:04:12.413

`.cls .subcls`指`.subcls`that 是 的子级`.cls`，而**同时**`.cls, .subcls`指和。 **`.cls``.subcls`**

# ruby-on-rails - 大礼包更改默认货币和国家

> ID：12524482
> 
> 赞同：5
> 
> 时间：2012-09-21T04:57:11.693
> 
> 标签：ruby-on-rails, spree

我正在使用 Spree for India 开发电子商务应用程序。因此，所有价格都以“卢比”为单位，州和地区与印度有关。我在 Spree 1.2.0 中轻松编辑了它们，但在 1.1.3 中找不到这些选项。如何在 1.1.3 中自定义这个

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-03T11:47:52.867

您可以在您的`app/config/initializers/spree.rb`

```
Spree.config do |config|

  # Set country name and currency like this (Note: you will need to
  # run 'rake db:seed' before this. Change country name in
  # Spree::Country.find_by_name('Germany') replace Germany to your desired one)

  config.currency = 'EUR'
  country = Spree::Country.find_by_name('Germany')
  config.default_country_id = country.id if country.present?

  # You can also set following options too.

  config.site_name = "Todo Store"
  config.override_actionmailer_config = true
  config.enable_mail_delivery = true
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-14T08:37:58.767

您可以在 app/config/initializers/spree.rb 中设置这些选项

```
Spree.config do |config|
  config.currency = 'Rs'  
  config.default_country_id = 105 # Your default country id 
end 
```

# excel - 来自单元格的自定义 Excel VBA 函数（修改后的 VLOOKUP）引用不同文件中的范围会产生错误

> ID：12524491
> 
> 赞同：2
> 
> 时间：2012-09-21T04:57:38.577
> 
> 标签：excel, vba

我第一次写一个stackOverflow问题，所以如果我做错了什么请告诉我。

我现在已经搜索了几个小时，但无法找到解决问题的方法（通常我会找到答案，因此为什么这是我作为潜伏者使用 stackoverflow 几年后的第一个问题）。

基本上，我正在尝试编写一个修改后的 VLOOKUP 函数，该函数的功能类似于 VLOOKUP，除了它返回“下一个较小的较大”值而不是默认的“前一个最大较小”值。不幸的是，我知道索引/匹配方法，我需要手动仔细替换已经存在于我目前正在工作中清理的工作簿中的数千个 VLOOKUP。因此，我求助于编写一个 VLOOKUPnew 函数，这样我就可以用 VLOOKUPnew“查找/替换”所有 VLOOKUP。

```
Function VLOOKUPnew(lookup_value As Variant, table_array As Range, _
        col_index_num As Integer, Optional exactMatch As Boolean) As Variant
    Dim row As Integer

    Debug.Print table_array.Address

    With Application
        On Error GoTo NO_ROW
        row = .Match(lookup_value, table_array.Columns(1), 0)
        On Error GoTo 0

        If row = -1 And Not exactMatch Then
            row = .Match(lookup_value, table_array.Columns(1), 1)
            row = row + 1
        End If

        VLOOKUPnew = .index(table_array.Columns(col_index_num), row, 0)
    End With

Exit Function

NO_ROW:
    row = -1
    Resume Next
End Function 
```

我成功地编写了这个函数，但遇到了障碍。因为我将“table_array”声明为范围，所以 vba 无法识别对其他工作簿的范围引用

例如 "=VLOOKUPnew($A432,'reallyLongFilepath/[filename.xlsx]tablename'!$B$6:$N$35,columnNumber,0),FALSE)" 解析为 #VALUE 错误

真正奇怪的是，如果我打开文件，则文件路径会从公式中删除（变成只是 "=VLOOKUPnew($A432,'[filename.xlsx]tablename'!$B$6:$N$35,columnNumber,0 ),FALSE)") 然后我的自定义函数可以正常工作，返回正确的值。

所以我的问题是如何解决不必打开其他文件来使用此工作簿的问题。我什至不确定 Excel 如何将地址或范围传递给自定义公式，所以我怀疑当文件路径包含在范围引用中时它会中断。有没有办法拆分文件路径、文件名、工作表和地址（在传入之后）？或者可能将它作为字符串传递然后轻松拆分它？还是将其作为可以正确识别不同工作簿中范围的内容传入？

请记住，我试图避免更改函数的参数，因为我想执行查找/替换技巧，并且这是为了工作，因此对数据布局的过多更改有限制。此外，该工作簿供其他员工使用，我只是将其设置为使用。

提前致谢！

安德鲁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T06:04:02.787

你在这里面临着相当的困境！

根本问题是，虽然`VLOOKUP`可以查看已关闭的工作簿，但不能查看`Range`参数`UDF`。范围引用解析为错误，因此函数调用因类型不匹配而失败。如果您将`table_array`参数类型更改为`Variant`并在函数头上放置一个断点，您将看到参数值为`Error 2036`.

虽然有一些方法可以查看已关闭的工作簿，但所有这些（AFAIK）都很慢。既然你提到`... I would need to carefully replace literally thousands of VLOOKUPs ...`我怀疑这些方面的任何解决方案都会慢得令人无法接受。

我的建议是走这`INDEX/MATCH`条路，写一个`VBA`宏来为你更新公式。

# php - Phpmailer 添加密件抄送不起作用

> ID：12524493
> 
> 赞同：0
> 
> 时间：2012-09-21T04:57:52.633
> 
> 标签：php, phpmailer

我正在使用 Phpmailer 发送邮件。除了密件抄送外，它运行良好。密件抄送收件人看不到抄送和收件人。为什么会这样？

```
require_once("PHPMailer_v5.1/class.phpmailer.php");
            $mailer = new PHPMailer();
            $mailer->IsSMTP();

            $mailer->SMTPAuth = true;
            $mailer->SMTPSecure = "tls";

            $mailer->Host = 'smtp.gmail.com';
            $mailer->Port = 587;            

            $mailer->Username = $userid;
            $mailer->Password = $epwd;
            $mailer->FromName = $fromname;
            $mailer->From = $userid;
            $mailer->AddAddress($to,$toname);
            $mailer->Subject = $subject;                
            $mailer->Body =$content;                
            $mailer->AddCC($cc, $tocc);             
            $mailer->AddBCC($bcc, $tobcc);          
            $mailer->AddAttachment($dest_filename);
            $mailer->Send() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T10:28:15.473

来自 class.phpmailer.php：

```
/**
  * Adds a "Bcc" address. Note: this function works<br>
  * with the SMTP mailer on win32, not with the "mail"<br>
  ...
 */
function AddBCC($address, $name = '') {
  ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:54:33.013

很有可能这是一个 gmail 问题。您是否与其他 SMTP 服务提供商进行了测试？

# javascript - jQuery 中 $(fn) 和 $(document).ready(fn) 之间的区别？

> ID：12524496
> 
> 赞同：0
> 
> 时间：2012-09-21T04:58:19.777
> 
> 标签：javascript, jquery

> **可能重复：**
> [不同形式的 $(document).ready](https://stackoverflow.com/questions/1388043/different-forms-of-document-ready)
> [这些 jQuery 就绪函数有什么区别？](https://stackoverflow.com/questions/2662778/what-is-the-difference-between-these-jquery-ready-functions)

以下两个函数有什么区别？：

```
$(function() { }); 
```

和

```
$(document).ready(function(){}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:02:13.923

.ready 是 DOM 准备就绪后使用的处理函数。 .ready() 方法通常与属性不兼容。我会`$(function() {});`正常使用。

`$(document).ready(function(){});`通常用于匿名函数

以下所有三种语法都是等效的：

```
$(document).ready(handler)
$().ready(handler) (this is not recommended) 
$(handler) 
```

[http://api.jquery.com/ready/](http://api.jquery.com/ready/)

# django - 在 Django Haystack 中使用 Boost

> ID：12524499
> 
> 赞同：0
> 
> 时间：2012-09-21T04:58:37.610
> 
> 标签：django, django-haystack

我是干草堆的新手，我被困住了。我有一个带有整数字段（介于 1 - 10 之间）的模型，我想根据值增加结果的相关性。

目前我在我的 SearchIndex 模型中有这个：

```
def prepare(self, obj):
    data = super(Items, self).prepare(obj)
    data['boost'] = obj.weight
    return data 
```

我的查询是：

```
SearchQuerySet().filter(title__in=query_list)[:40] 
```

虽然它似乎不起作用，但结果与我添加准备功能之前完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T00:01:15.387

我通过将我的搜索后端从 xapian 切换到 solr 来完成这项工作。

# linux - 为什么某些进程会多次加载lib？

> ID：12524500
> 
> 赞同：0
> 
> 时间：2012-09-21T04:58:45.300
> 
> 标签：linux, memory-management, loadlibrary, shared-libraries, pmap

```
b7f27000     84K r-x--  /lib/libpthread-2.5.so
b7f3c000      4K -----  /lib/libpthread-2.5.so
b7f3d000      4K r----  /lib/libpthread-2.5.so
b7f3e000      4K rw---  /lib/libpthread-2.5.so
b7f3f000      8K rw---    [ anon ]
b7f41000     88K r-x--  /lib/libselinux.so.1
b7f57000      8K rw---  /lib/libselinux.so.1
b7f59000    256K r-x--  /usr/lib/libncurses.so.5.5
b7f99000     32K rw---  /usr/lib/libncurses.so.5.5
b7fa1000      8K rw---    [ anon ]
b7fa3000      4K r----  /usr/lib/locale/en_US.utf8/LC_MESSAGES/SYS_LC_MESSAGES
b7fa4000      4K r----  /usr/lib/locale/en_US.utf8/LC_PAPER
b7fa5000      4K r----  /usr/lib/locale/en_US.utf8/LC_NAME
b7fa6000      4K r----  /usr/lib/locale/en_US.utf8/LC_ADDRESS
b7fa7000      4K r----  /usr/lib/locale/en_US.utf8/LC_TELEPHONE
b7fa8000      4K r----  /usr/lib/locale/en_US.utf8/LC_MEASUREMENT
b7fa9000      4K r----  /usr/lib/locale/en_US.utf8/LC_IDENTIFICATION
b7faa000    108K r-x--  /lib/ld-2.5.so
b7fc5000      4K r----  /lib/ld-2.5.so
b7fc6000      4K rw---  /lib/ld-2.5.so
bf96f000    228K rw---    [ stack ]
 total    23740K 
```

为什么这些 lib 的加载时间超过了？有必要吗？为什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T05:12:30.483

实际上，这些库中的每一个都只加载一次；您看到的是每个库使用的多个*内存区域。*

库包含代码、rodata 和数据 (+bss)。代码是只读且可执行的（`r-x`），rodata 是只读的（`r--`），数据（和 bss）是可读写的（`rw-`）。这些是您正在查看的内存段（请注意，它们都有不同的内存保护标志和大小）。并非所有库都具有所有这些段，因此您会看到一些库只有两个（甚至一个）映射的内存区域。

请注意，`pmap`“总”输出仅测量虚拟内存利用率（即使对于小型进程也可能非常高）。对于物理内存使用，使用`pmap -x`并查看`RSS`（驻留集大小）。

# php - PHP isset 在表单上无法正常工作，带有循环和数组

> ID：12524502
> 
> 赞同：-1
> 
> 时间：2012-09-21T04:59:14.927
> 
> 标签：php, html, arrays, forms, post

老实说，这是我编写过的最挑剔和最笨拙的语言。当这个项目很好并且结束时，我会很高兴。

无论如何，我必须使用 PHP，所以这是我的问题。

我有一个名为 $form_data 的数组：

```
$form_data = array 
('trav_emer_med_insur',
'trav_emer_single',
'trav_emer_single_date_go',
'trav_emer_single_date_ba',

'trav_emer_annual',
'trav_emer_annual_date_go',

'trav_emer_extend',
'trav_emer_extend_date_go',
'trav_emer_extend_date_ef',
'trav_emer_extend_date_ba',

'allinc_insur',

'allinc_insur_opt1',
'allinc_single_date_go',
'allinc_single_date_ba',

'allinc_insur_opt2',
'allinc_annual_date_go',
'allinc_annual_date_ba',

'cancel_insur',
'allinc_annual_date_go', 
'allinc_annual_date_ba',

'visitor_insur', 
'country_select',

'visitor_supervisa', 
'visitor_supervisa_date_go',
'visitor_supervisa_date_ba',

'visitor_student',
'visitor_student_date_go',
'visitor_student_date_ba',

'visitor_xpat',
'visitor_xpat_date_go',
'visitor_xpat_date_ba',

'txtApp1Name',
'txtApp2Name',
'txtApp1DOB',
'txtApp2DOB',
'txtApp1Add',
'txtApp1City',
'selprov',
'txtApp1Postal',
'txtApp1Phone',
'txtApp1Ext',
'txtApp1Email',
'conpref', ); 
```

这些是 HTML 表单上的 name="" 字段的名称。我已经使用 var_dump($_POST) 验证了所有名称都存在并且默认值为 ''。

我想要做的很简单，使用 $form_data 作为参考这样做：

*   创建一个名为 $out_data 的新数组，它可以处理要在反流表单上显示的数据。

$out_data 的结构很简单，例如，键是另一个数组 $out_data[txtApp1Name] 中元素的名称，然后该键的值就是值。

*   现在我想要的是首先检查是否设置了每个 name="" ，以消除错误并验证数据。然后不管是否设置，在 $out_data 数组中创建它的占位符。

*   因此，如果 $_POST[$form_data[1]] (name is 'trav_emer_single') 未设置，则在 $out_data 中创建一个类似于 $out_data([trav_emer_single] => "NO DATA") 的条目

*   如果设置了 $_POST[$form_data[1]] (name is 'trav_emer_single')，则在 $out_data 中创建并输入如下所示： $out_data([trav_emer_single] => "whatever the user type in")

我试过这段代码：

```
$out_data = array();
$count = count($form_data); 
for( $i = 0; $i < $count; $i++ ) 
{
    if(!isset($_POST[$form_data[$i]])) {
        $out_data[$form_data[$i]] = "NO_DATA";
        }
    else {
        $out_data[$form_data[$i]] = $_POST[$form_data[$i]];
        }
} 
```

现在这段代码在技术上是有效的，它正在遍历数组并分配值，但它没有正确执行。

我在没有输入任何内容的情况下点击了提交。因此，每个项目都应该在我的反刍输出上显示“NO_DATA”（供用户查看），但是只有一些项目在说它。我确认的所有项目都有 name="" 并与数组匹配，并且没有输入任何内容。为什么没有将“NO_DATA”分配给数组中的每个项目？

另外值得注意的是，如果我完全填写表格 $out_data 已完全正确填充。!isset 有什么问题？我试过做 $_POST[$form_data[$i]] == '' 它确实把 no_data 放在没有数据的每个实例中，但是无论我写什么，它都会为页面上的每个项目引发“未定义索引”警告在盒子里与否。

真的我只是想知道 WTF 正在进行中，这个项目的最后期限正在快速关闭，PHP 的每一步都让我感到悲伤。

据我通过阅读我的代码可以看出是有效的，但拒绝像宣传的那样执行。

如果您需要更多代码示例，请询问。

真的很困惑，没有错误，没有任何工作，请帮助。

谢谢-肖恩

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:08:25.543

而不是检查`!isset()`，使用`empty()`. 如果表单发布了一个空字符串，它仍然会在 中显示`$_POST`为一个空字符串，并`isset()`返回`TRUE`.

我已经用循环替换了你的增量`for`循环`foreach`，它几乎总是在 PHP 中用于迭代数组。

```
$out_data = array();
foreach ($form_data as $key) {
    if(empty($_POST[$key])) {
        $out_data[$key] = "NO_DATA";
    }
    else {
        $out_data[$key] = $_POST[$key];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:10:08.387

PHP 的`isset`返回`TRUE`，除非变量未定义或它是`NULL`. 空字符串`""`不会导致它返回`FALSE`。`empty()`不过，将完全满足您的需求。

[http://php.net/manual/en/function.isset.php](http://php.net/manual/en/function.isset.php)

> 如果测试已设置为 NULL 的变量，isset() 将返回 FALSE。另请注意，NULL 字节（“\0”）不等同于 PHP NULL 常量。
> 
> 如果 var 存在并且值不是 NULL，则返回 TRUE，否则返回 FALSE。

# html - HTML：在移动指针之前更改默认光标不起作用

> ID：12524503
> 
> 赞同：1
> 
> 时间：2012-09-21T04:59:15.847
> 
> 标签：html, css

我有一个`overlayWaitDiv`定义如下`CSS`：

```
#overlayWaitDiv {
    cursor:   wait;
    position: fixed;
    top:      0;
    left:     0;
    width:    100%;
    height:   100%;
    z-index:  99;
} 
```

这个想法是这个覆盖放在其他元素之上，占据所有窗口空间，并显示一个`wait`光标。

我正在使用以下内容显示/隐藏它`HTML`：

要显示叠加层：

```
<div id="overlayWaitDiv" style></div> 
```

要隐藏叠加层：

```
<div id="overlayWaitDiv" style="display: none; "></div> 
```

这工作正常：根据我页面中发生的事件，光标从正常变为`wait`，然后返回。我唯一的问题是，为了使光标切换发生，用户*需要*移动指针。

如何使浏览器立即更改指针，而不需要用户移动它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:24:28.800

放`cursor:auto;`然后就可以了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-09T16:37:21.960

你为什么不尝试在body标签中添加一个类？像这样：

```
.waiting {
   cursor: wait;
} 
```

当您需要显示等待光标时，使用 $("body").addClass("waiting") 和 $("body").removeClass("waiting") 隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T06:55:36.150

尝试使用 java 脚本设置光标​​值，如下所示。

```
$("#overlayWaitDiv").css("cursor","wait") ; 
```

# c# - C# ICollection 扩展

> ID：12524507
> 
> 赞同：1
> 
> 时间：2012-09-21T05:00:14.927
> 
> 标签：c#, arrays, generics, unity3d

我想为通用数组编写一个 C# 扩展，但它总是抛出一个错误。这是我用来为 string[] 创建扩展的代码，效果很好：

```
public static string[] Add(this string[] list, string s, bool checkUnique = false, bool checkNull = true){
    if (checkNull && string.IsNullOrEmpty(s)) return list;
    if (checkUnique && list.IndexOf(s) != -1) return list;

    ArrayList arr = new ArrayList();
    arr.AddRange(list);
    arr.Add(s);

    return (string[])arr.ToArray(typeof(string));
} 
```

我真正想要的是让它更通用，因此它不仅适用于字符串，也适用于其他类型（所以我试图用泛型 T 替换所有字符串细节）：

```
public static T[] Add(this T[] list, T item, bool checkUnique = false){
    if (checkUnique && list.IndexOf(item) != -1) return list;

    ArrayList arr = new ArrayList();
    arr.AddRange(list);
    arr.Add(item);

    return (T[])arr.ToArray(typeof(T));
} 
```

但代码不会编译。它正在投射错误“错误 CS0246：找不到类型或命名空间名称‘T’。您是否缺少 using 指令或程序集引用？”

我已经尝试了另一种解决方案：

```
public static void AddIfNotExists<T>(this ICollection<T> coll, T item) {
     if (!coll.Contains(item))
         coll.Add(item);
 } 
```

但它正在投射另一个错误“错误 CS0308：非泛型类型 `System.Collections.ICollection' 不能与类型参数一起使用”

作为旁注，我使用的是 Unity C#（我认为它是针对 3.5 编译的）。谁能帮我 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:19:48.750

由于缺少对 System.Collections.Generic 命名空间的引用，您的最后一个方法无法编译。您似乎只包含了对 System.Collections 的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:43:37.737

您可以只使用 LINQ 并使您的方法更简单一些：

```
 public static T[] Add<T>(this T[] list, T item, bool checkUnique = false)
    {
        var tail = new [] { item, };
        var result = checkUnique ? list.Union(tail) : list.Concat(tail);
        return result.ToArray();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:15:42.623

您可以将方法签名更改为：

```
public static T[] Add<T>(this T[] list, T item, bool checkUnique = false)
{} 
```

但是，T[] 没有通用方法，因此`list.IndexOf(item)`无法编译。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T05:29:49.070

**如果**您**不**为字符串数组调用它，您的最后一个代码应该可以工作，因为数组具有固定的大小！

以下示例适用于您使用的扩展方法`ICollection`：

```
List<string> arr = new List<string>();
arr.AddIfNotExists("a"); 
```

# iphone - iPhone 5 无法正确显示应用程序

> ID：12524509
> 
> 赞同：2
> 
> 时间：2012-09-21T05:00:21.400
> 
> 标签：iphone, ios-simulator, ios6, autolayout

我正在 iPhone 5 模拟器上测试一些旧应用程序。大多数应用程序都能正常显示，即显示居中，保持原来的 iPhone 外观，顶部和底部有空白区域。

我的一个应用程序的行为不同。它将启动图像（旧的 2:3 宽高比启动图像）拉伸到 iPhone 5 模拟器从上到下的全高。然后它将应用程序捕捉到窗口顶部，而不是居中。

我怀疑这与自动布局有关，但据我所知，作为这个概念的新手，它被禁用了。当我在文件检查器中检查时，未选择“使用自动布局”。

有什么想法吗？谢谢阅读！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T05:05:58.903

`Default-568h@2x.png`从项目中删除应该可以解决问题。似乎有几个人在使用 Xcode 自动创建此启动图像时遇到了问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T03:50:21.487

根据我的经验，当您在 XCode 4.5 中打开一个项目时，它会自动为每个视图添加一个标志，上面写着“自动调整子视图”，默认情况下它设置为 true。当我为所有视图禁用此标志时，它们不再伸展。有趣的是，我没有在模拟器中得到信箱，而是在底部得到一个白色带。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T05:02:17.613

我最终手动设置了 iPhone 5 的视图，因为我无法找到或解决问题。专门为 iPhone 5 设置视图相对容易，但令人沮丧的是不知道为什么在这种情况下需要这样做。

我使用此堆栈溢出答案中的以下代码检测到 iPhone 5：[如何检测 iPhone 5（宽屏设备）？](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)

```
#define IS_IPHONE_5 ( [ [ UIScreen mainScreen ] bounds ].size.height > 500)

if (IS_IPHONE_5 ) {
    //set up views
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T06:28:35.547

从项目中删除 Default-568h@2x.png，而且，在从 Xcode 再次运行之前，您必须手动从模拟器中删除应用程序。看起来 ios6 为已安装的应用程序保存了某种标志，使其认为应该拉伸它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-14T09:51:29.220

简单地删除 Default-568h@2x.png 并不能解决我的问题。首先我删除了这个文件，然后我将一个 640x1136 的图像拖到 Xcode 中“iPhone 部署信息”部分的“启动图像 - 视网膜（4 英寸）”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-19T07:59:47.663

在 iOS 7 Sdk 中，如果您没有在项目中添加启动图像，则需要将启动图像（640 X 1136 和 640 X 960）添加到项目中，然后转到常规选项卡并设置启动图像（视网膜，视网膜 4 英寸）然后从模拟器中删除应用程序并再次运行应该可以解决问题

# java - java中的访问说明符和代码可重用性

> ID：12524512
> 
> 赞同：4
> 
> 时间：2012-09-21T05:00:45.357
> 
> 标签：java

私有、公共等访问说明符如何帮助代码重用？

我在面试时收到了这个问题，但我找不到答案。请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T05:07:34.797

围绕这一点有几条细线，我可以用几种不同的方式回答这个问题。

考虑开发人员将几乎所有内容标记为私有的情况。它可能是一个非常好的类，如果我可以扩展它并覆盖该`doSomething()`方法，它就可以被重用。但是，由于该方法已被标记为私有，我的双手被束缚了。这将导致许多开发人员复制和粘贴整个类，更改一个必要的部分。（不酷。）因此可以看出将所有内容标记为私有会阻止重用。

但是，另一方面，请考虑开发人员将所有内容标记为公开的情况。该开发人员或其他开发人员开始编写扩展类，或调用所有各种方法/访问可能应该标记为受保护/私有的属性。发现了设计错误等，需要修改类。但是，由于它写得如此“开放”，因此可能是一个简单的修复现在变得更加复杂，因为必须找到并考虑所有其他参考。

我认为最好的选择是妥协。将设计为供客户端代码使用的事物标记为“公共”。将没有业务扩展/覆盖的事物标记为“私有”。如果有一些东西可以证明对将来某人有用，请将其标记为“受保护”。并始终添加 Javadocs 以进一步表明您的意图。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:08:58.847

要重用的代码需要易于理解和可靠。

可以理解：通过将某些方法设为私有，类的作者指定这些方法是内部实现细节，重新用户只需考虑公共方法。

可靠：通过将字段设为私有，我们可以防止重用用户意外破坏重用代码的内部状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:11:17.157

假设您非常了解这些访问说明符的范围，例如

**仅限私人课程**

**仅默认包**

**保护类和派生类**

**公开的**

现在假设您有一个包含方法的类

```
public int calculate(int x,int y,int z){
z=x+y;
x=z+x;
z=x+y;
return z;
} 
```

这是一个公共方法，可以从任何地方、任何包和任何类访问，无论它是否派生。现在你想在一个新的类中使用这个函数，你可以简单地导入这个类并使用该方法，而无需一次又一次地编写它。

这是一个非常简单的示例，您可以在此处替换为您自己的函数，例如检查该系列是否为斐波那契系列，计算单利/复利等，并在您需要的地方重用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T07:43:38.247

假设我有一个实用程序助手类，我希望其他人能够重用它。我在那个类中有很多方法和变量，但是使用那个类的人不需要它们。

*   `public`标记可以轻松重复使用的方法。它应该始终有据可查，以便有人知道如何以及何时调用它。

*   `private`将成员标记为内部机制的一部分 - 我的重新用户不需要担心它。

通过明确访问模型，您可以更清楚地了解应该如何访问该代码，从而使其更易于维护并且更易于其他人重用。

在一次采访中（我已经雇佣了很多开发人员），你应该能够清楚地解释每个访问修饰符的目的，并能够给出每个访问修饰符的用法示例。

# ivy - 获取 Ivy 存储库中的工件列表

> ID：12524514
> 
> 赞同：0
> 
> 时间：2012-09-21T05:00:55.780
> 
> 标签：ivy, repository

我管理着一个拥有大量工件的 Ivy 存储库，并且我被要求列出我们拥有一百多个第三方库。有谁知道从常春藤回购中检索工件列表的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T01:57:37.310

我发现没有这样的方法可以做到这一点，我在 java 中编写了一个脚本来获得结果，我想如果将来人们想要它，我可能会分享答案，它也被格式化为直接复制到 Excel 文档中。

```
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.util.ArrayList;
import java.util.Collection;
import java.util.Iterator;
import java.util.List;

public class ListArtifacts {

    public static void main(String[] args) { 
        Collection<File> all = new ArrayList<File>(); 
        addTree(new File("."), all);
        String delimeter = "\\.";
        List<String> remove = new ArrayList<String>();
        List<String> everything = new ArrayList<String>();
        remove.add("pom");
        remove.add("jar");
        remove.add("xml");
        remove.add("txt");
        remove.add("sha1");
        remove.add("md5");
        remove.add("metadata");
        remove.add("tar");
        remove.add("gz");
        remove.add("zip");
        remove.add("rar");

        FileWriter fWriter = null; 
        BufferedWriter writer = null; 
        try { 
            fWriter = new FileWriter("info.txt"); 
            writer = new BufferedWriter(fWriter); 

            Iterator itr = all.iterator();
            while (itr.hasNext() == true){
                String[] split;
                String temp = itr.next().toString();
                split = temp.split(delimeter);
                int i = 0;
                int j = 0;
                boolean flag = false;
                while (i < split.length){
                    while (j < remove.size()){
                        if (split[i].equals(remove.get(j))){
                            flag = true;
                        }
                        j++;
                    }
                    j = 0;
                    i++;
                }       
                if (flag == false){
                    String output = "";
                    int k=0;
                    boolean flag2 = false;
                    boolean hasVersion = false;
                    while (k < split.length){
                        if (flag2 == true){
                            output += ".";
                            flag2 = false;
                        }                       
                        output = output + split[k].toString();

                        boolean lastInt = false;
                        try{
                        String last = split[k].substring(split[k].length() - 1); 
                        if (isInteger(last) == true)
                            lastInt = true;
                        }catch(Exception e){}

                        if ((isInteger(split[k].toString()) == true) || (lastInt == true)){
                            flag2 = true;
                            hasVersion = true;
                        }
                        k++;
                    }
                    if (hasVersion == true){
                        everything.add(output.substring(1));
                        writer.append(output.substring(1));
                        writer.newLine(); 
                    }
                }
            }
            int i = 0;
            String delim = "\\\\";
            String finalOutput = "";
            String toSplit = "";
            while (i < everything.size()){
                toSplit = everything.get(i);
                String[] split2 = toSplit.split(delim);
                finalOutput = split2[0] + "\t";
                int j = 1;
                while (j < split2.length-2){
                    finalOutput += split2[j] + ".";
                    j++;
                }
                finalOutput += split2[split2.length-2] + "\t";
                finalOutput += split2[split2.length-1];
                writer.append(finalOutput);
                writer.newLine(); 
                i++;
            }

            writer.close(); 
        } catch (Exception e) { 
        } 

        System.out.println(all); 
    } 

    public static boolean isInteger(String input )   
    {   
        try  
        {   
            Integer.parseInt(input);   
            return true;   
        }   
        catch(Exception e)   
        {   
            return false;   
        }   
    } 

    static void addTree(File file, Collection<File> all) { 
        File[] children = file.listFiles(); 
        if (children != null) { 
            for (File child : children) { 
                all.add(child); 
                addTree(child, all); 
            } 
        } 
    } 
} 
```

我相信这可以做得更干净，但我没有做更高的思考，只是做了我想到的第一件事，没有修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T03:27:41.593

如果您希望在构建期间使用 ivy 执行此操作，那么[报告](https://ant.apache.org/ivy/history/2.2.0/use/report.html)任务应该可以帮助您获取正在使用的所有 JAR 的报告。

如果您尝试从存储库管理器获取这些详细信息（涵盖所有可能的用户），您能回答@oers 的问题吗？存储库管理器通常会提供一些 API，您可以使用这些 API 来获取有关它们存储的工件的报告。

# php - 是否可以在表单中同时使用 GET 和 post 选项？

> ID：12524519
> 
> 赞同：5
> 
> 时间：2012-09-21T05:02:35.360
> 
> 标签：php, html

我的网站上有一个表格。我想一起添加 GET 和 post 选项。这将指示 2 个不同的目的地。示例： - 当有人提交表格（姓名和地址）时，他可以进入受限部分。然后代码将是

```
<form name="loginform"
action="http://site.com/viparea"
method="post"> 
```

除此之外，我想保留一个日志。日志代码是

```
<form name="loginform"
action="logcode.php"
method="GET"> 
```

并且加密的日志将保存在一个文本文件中。

我分别使用了两种方法。这些单独工作正常。但我想让他们一起工作。所以，我不是编码员，但在搜索了一些东西之后，我只是做了一个简单的工作，比如菜鸟：P。

```
<form name="loginform"
action="http://site.com/viparea"
method="post"><form name="loginform"
action="logcode.php"
method="GET"> 
```

但不工作。请有任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T05:07:09.650

您只能通过使用以下方法实现此目的：

```
<form name="loginform" action="http://site.com/viparea?var1=var&var2=var" method="post">
    <input type="text" name="var3" />
</form> 
```

这样你会得到`var1`and `var2`as `$_GET`, `var3`as`$_POST`或者所有 3 vars as`$_REQUEST`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:06:36.033

不，你不能；但在 php 中，您可以使用[$_REQUEST[]](http://php.net/manual/en/reserved.variables.request.php)来查看来自 GET 和 POST 的数据；您可能只需要对您的 php 代码进行一些更改。

# java - 使用 selenium rc 和 java 从文本文件和 sigin 读取电子邮件密码

> ID：12524527
> 
> 赞同：0
> 
> 时间：2012-09-21T05:03:13.923
> 
> 标签：java, selenium, selenium-rc, junit4

我有一个 email.txt 文件，我在其中存储所有用 java 编写的电子邮件地址和密码，并通过 selenium rc 运行测试。我的问题是 selenium .clicks sigIn 然后它应该转到文本文件 email.txt 并使用其中一个电子邮件地址和密码登录，第二次运行 selenium 测试时它不应该在第一次接收电子邮件和用于登录的密码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:34:33.000

根据我对您问题的理解。您想一一使用所有这些电子邮件 ID 和密码。

因此，对于这种情况，您最好使用数据驱动测试。如果您使用的是 Junit，请使用参数化运行器来做同样的事情。

如果您正在使用 TestNG，则有一个称为 @Dataprovider 的注释用于数据驱动测试。

在这种情况下，您的测试用例将针对您的测试数据的 n 个不同值（在您的案例中为电子邮件 ID 和密码）调用 n 次，并且每次新数据都将用于该测试。

# javascript - Can angularjs routes have default parameter values?

> ID：12524533
> 
> 赞同：32
> 
> 时间：2012-09-21T05:03:59.307
> 
> 标签：javascript, angularjs, model-view-controller, url-routing

Can I set a default value of a parameter of a route in AngularJS? Is there a way to have `/products/123` and `/products/` handled by the same route ?

I'm looking to refactor my existing code, which looks like:

```
myModule.config(['$routeProvider', function($routeProvider) {
    $routeProvider.
     when('/products/', {templateUrl: 'products.html', controller: ProductsCtrl}).            
     when('/products/:productId', {templateUrl: 'products.html', controller: ProductsCtrl})
}]);

function ProductsCtrl($scope, $routeParams) {
    $scope.productId = typeof($routeParams.productId) == "undefined" ? 123 : $routeParams.productId;
} 
```

It works, but it's not very elegant. Is there a better way ?

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-10-02T02:18:29.313

I recognize that this question is old, but still: Why don't you just redirect the "empty" URL to one containing the default productId?

```
myModule.config(['$routeProvider', function($routeProvider) {
    $routeProvider.
     when('/products/', {redirectTo: '/products/123'}).
     when('/products/:productId', {templateUrl: 'products.html', controller: ProductsCtrl})
}]); 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-09T19:34:43.833

`AngularJS` does not allow default values for route parameters.

But routes (in `AngularJS`) **should not have default parameters.**

Resources could have default parameters.

In `AngularJS` if you want a route with an optional parameter, these are actually two different routes.

**Why?**

*   Routes should be simple

*   Routes does not allow regular expressions matching for parameters

*   Routes are not something which exposes an API to work in your application (unlike Resources do). Routes are just configuration which connects a URL with a template and a controller. Thus having more routes is better:

    *   It is clear which route maps to which url.

    *   It is more verbose, but simpler to read. Having more complex routes would create a steeper learning curve where AngularJS does not need one.

Unlike server-side frameworks which have routes

*   AngularJS routes do not have names.
*   You do not build URLs from the defined routes.
*   You do not have logic (a.k.a functions) in the routes definitions.

Simpler routes = more lines to define them = less headaches working with them.

**NOTE**: Please keep in mind the question and this answer are for an old version of AngularJS (1.0 I think) pre-dating the new routes/resources implementation.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-12-03T18:30:07.460

I had a similar requirement. What i did was to create a function to resolve. Something like below

```
myModule.config(['$routeProvider', function($routeProvider) {
$routeProvider.
 when('/products/', resolveProduct()).            
 when('/products/:productId', resolveProduct())
}]);

function ProductsCtrl($scope, $routeParams) {
$scope.productId = $routeParams.productId;
}

function resolveProduct() {
   var routeConfig = {
      templateUrl: 'products.html', 
      controller: ProductsCtrl,
      resolve: {
         productId: ['$route', function($route){
            var params = $route.current.params;
            params.productId =  params.productId || 123;
         }]
      }
   }

   return routeConfig;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-06T11:26:01.377

With **url: "/view/:id/:status?"**, You can indicate an optional parameter.

Just thought someone may need it.

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-12-20T18:16:21.077

Not sure if this question is specific to `$routeProvider` but in [$stateProvider](https://ui-router.github.io/docs/0.3.1/#/api/ui.router.state.$stateProvider), you can achieve this by

```
myApp.config(function($stateProvider) {

    $stateProvider
        .state('products', {
            url: '/:productId',
            templateUrl: "/dashboard/products.html",
            controller: 'ProductController',
            params: {
                productId: {
                  value: "defaultValue",
                  squash: true // or enable this instead to squash `productId` when empty
                } 
            }
        });
}); 
```

# android - 在android中使用可绘制形状的android中的自定义按钮（实心左箭头）

> ID：12524534
> 
> 赞同：0
> 
> 时间：2012-09-21T05:04:02.227
> 
> 标签：android, button, shapedrawable

我想在android中制作一个自定义按钮`left solid arrow`（只有箭头形状而不是它的背景）。

![在此处输入图像描述](../Images/d21bda22724a7dafc63adda8fe7c8443.png)

如何在 android.xml 中使用 shape drawable XML 创建这个箭头按钮。

我知道如何创建矩形按钮但不知道箭头。

请知道的人告诉我怎么做。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-27T07:48:22.670

对不起，我不能发布代码，只能告诉你去哪里。但最终的答案是使用路径形状按钮。然后它会为你处理一切。

[按照http://developer.android.com/reference/android/graphics/Path.html](http://developer.android.com/reference/android/graphics/drawable/shapes/Shape.html)中的信息创建路径 您可以在[http://developer.android.com/reference/android/graphics/](http://developer.android.com/reference/android/graphics/Path.html)
了解有关形状的更多信息[drawable/shapes/Shape.html最后，您可以在](http://developer.android.com/reference/android/graphics/drawable/shapes/Shape.html)[http://developer.android.com/reference/android/graphics/drawable/shapes/PathShape.html](http://developer.android.com/reference/android/graphics/drawable/shapes/PathShape.html)
了解如何将它们捆绑在一起

这样，您甚至可以在 XML 中执行此操作。并且有多种圆弧路径方法。一探究竟！

# sql-server - 在 SQL Server 中将 UTC 毫秒转换为 DATETIME

> ID：12524537
> 
> 赞同：32
> 
> 时间：2012-09-21T05:04:20.057
> 
> 标签：sql-server, datetime, sql-server-2005, utc

我想在 SQL Server 中将 UTC 毫秒转换为 DateTime。

这可以通过以下代码在 C# 中轻松完成：

```
DateTime startDate = new DateTime(1970, 1, 1).AddMilliseconds(1348203320000); 
```

我需要在 SQL Server 中执行此操作。[我在这里](http://extendeddotnet.blogspot.in/2011/10/convert-net-datetimeticks-to-t-sql.html)找到了一些脚本，但这是从 1900-01-01 开始的。

我使用了`DATEADD`如下函数，但这通过提供毫秒作为差异给出了算术溢出异常：

```
SELECT DATEADD(MILLISECOND,1348203320000,'1970-1-1') 
```

如何正确进行转换？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-09-21T05:24:31.160

```
DECLARE @UTC BIGINT
SET @UTC = 1348203320997 

SELECT DATEADD(MILLISECOND, @UTC % 1000, DATEADD(SECOND, @UTC / 1000, '19700101')) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-05-21T07:53:24.647

在将毫秒转换为日期时间的函数下方

```
IF object_id('dbo.toDbTimeMSC', 'FN') IS NOT NULL DROP FUNCTION dbo.toDbTimeMSC
GO
CREATE FUNCTION [dbo].[toDbTimeMSC] (@unixTimeMSC BIGINT) RETURNS DATETIME
BEGIN
    RETURN DATEADD(MILLISECOND, @unixTimeMSC % 1000, DATEADD(SECOND, @unixTimeMSC / 1000, '19700101'))
END
GO 
```

-- 选择 dbo.toDbTimeMSC(1348203320000)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-05T13:16:17.610

我在使用此处给出的答案时遇到了问题（尤其是系统正在计算 0001-01-01 的刻度） - 所以我这样做了：

```
CONVERT(DATETIME,[Time]/ 10000.0/1000/86400-693595)

--explanation for [Time_in_Ticks]/ 10000.0/1000/86400-693595
--Time is in "ticks"
--10000 = number of ticks in Milisecond
--1000  = number of milisecons in second
--86400 = number of seconds in a day (24hours*60minutes*60second)
--693595= number of days between 0001-01-01 and 1900-01-01 (which is base
--          date when converting from int to datetime) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-03-31T17:18:44.443

使用 SQL Server 2008R2 这产生了所需的结果：

```
CAST(SWITCHOFFSET(CAST(dateadd(s, convert(bigint, [t_stamp]) / 1000, convert(datetime, '1-1-1970 00:00:00')) AS DATETIMEOFFSET), DATENAME (TZoffset, SYSDATETIMEOFFSET())) AS DATETIME) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T05:24:04.670

`DATEADD`需要一个整数作为第二个参数。您的数字`1348203320000`对于整数来说非常大，因此它会在运行时产生错误。您应该改用`bigint`type 并通过将毫秒拆分为秒和毫秒来为 DATEADD 提供正确的 int 值。那是您可以使用的示例。

```
DECLARE @total bigint = 1348203320000;

DECLARE @seconds int = @total / 1000
DECLARE @milliseconds int = @total % 1000;

DECLARE @result datetime = '1970-1-1';
SET @result = DATEADD(SECOND, @seconds,@result);
SET @result = DATEADD(MILLISECOND, @milliseconds,@result);
SELECT @result 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-15T14:56:38.850

现在，您可以将 dateadd 与分而不是秒一起使用。

代码将是这样的：

`DATEADD(MILLISECOND, epoch% 60000, DATEADD(MINUTE, epoch/ 60000, '19700101'));`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-22T00:59:34.967

```
=dateadd("d",INT((Fields!lastLogon.Value / 864000000000)- 134774),"1970-01-01 00:00:00") 
```

这就是我在 SSRS 中用来解决 INT 错误的方法，使用天而不是秒。这是错的吗？

# php - drupal 7 修改自定义字段标记

> ID：12524544
> 
> 赞同：1
> 
> 时间：2012-09-21T05:04:47.963
> 
> 标签：php, drupal-7, drupal-theming

我在页面内容类型上添加了一个名为“页面标题”的字段（机器名称 field_machine_name）。

我想修改页面上该字段的标记。默认标记是这样的：

```
<div>
   <div>
      <div>FIELD VALUE</div>
   </div>
 </div> 
```

我希望它是标记

```
<div>
    <div></div>
    <div>FIELD VALUE</div>
    <div></div>
</div> 
```

我尝试在我的模板文件夹中创建一个名为 的文件`field--field_page_title.tpl.php`，但我不确定如何打印该字段的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T00:00:01.463

检查[field.tpl.php 上的文档](http://api.drupal.org/api/drupal/modules!field!theme!field.tpl.php/7)。看起来您想要的信息将在`$items`数组中。

如果您不确定该数组的结构，开发模块将为您提供帮助。或者您可以告诉您的模板将数组的内容转储到页面（或日志文件）并找出它的样子。

# iphone - Read And then HTML page +IOS

> ID：12524547
> 
> 赞同：0
> 
> 时间：2012-09-21T05:05:39.490
> 
> 标签：iphone, html, ios, uiwebview

I want to read html page and wanna edit that HTML page. example:-

There is `Textfield=Username`

i had inputed the value of `textfield=XYZ`

Now i want to that some webpage will open in the application and that webpage consist some textfield.

Now i want to read that webpage and search the textfield name username from that webform. and fill that textfield with the value give in the textfield of the application.

I know that by using webview we can read and HTML page. But is it feasible to search the particular word in the HTML page and make some edition in that.

To read HTML:

```
[webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@\"http://www.apple.com\"]]]; 
```

But to search the perticular word and edit the textfield

IS it feasible? IF yes then how?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:52:11.473

UIWebVIew has 2 method can make it possible :

```
- (NSString *)stringByEvaluatingJavaScriptFromString:(NSString *)script 
```

You can run a js in the webview to find your text and edit.

```
- (void)loadHTMLString:(NSString *)string baseURL:(NSURL *)baseURL 
```

You can download the webpage then add some html string in it to help you.

# java - 根据用户输入，在java中以不同方式对链表进行排序时遇到问题

> ID：12524556
> 
> 赞同：1
> 
> 时间：2012-09-21T05:06:44.860
> 
> 标签：java, linked-list, nodes, compareto

我在这里遇到了一个问题，我已经追溯到这种方法。当然，如有必要，我可以提供更多代码。我有一个文本文件，文件中的每一行都有不同的自行车。每一行的格式为`color::year::price`. 例如，一辆自行车可能是`red::2008::150`。

我计划将此信息存储在一个链接列表中，并希望能够按颜色、年份或价格对它们进行排序。我以后不需要再次排序。我只需要从文本文件中以正确的顺序插入它们。用户输入 1、2 或 3，然后我创建一个新的链表，例如`LinkedList foo = new LinkedList(1);`，这`1`意味着应该添加节点，以便它们按颜色按字母顺序排列。 `2`并按`3`其他顺序对变量进行排序。这是我的一般实现的工作原理：

```
LinkedList color = new LinkedList(1);  //Should sort by color
LinkedList year = new  LinkedList(2);  //"" year
LinkedList price = new LinkedList(3);  //"" price

color.add(new Bike("a::1::1"));
year.add(new Bike("a::1::1"));
price.add(new Bike("a::1::1"));

color.add(new Bike("b::2::2"));
year.add(new Bike("b::2::2"));
price.add(new Bike("b::2::2"));

color.add(new Bike("c::3::3"));
year.add(new Bike("c::3::3"));
price.add(new Bike("c::3::3")); 
```

上述所有三个链表都应该存储相同的数据，并且应该以不同的顺序显示，但是所有三个链表都显示相同的顺序并且最后一个元素会重复。他们都倾向于看起来像这样：

```
a::1::1
b::2::2
c::3::3
c::3::3 
```

这显然是错误的。最后一行不应该重复，每个链表应该以不同的顺序产生这些值。下面是我的`add()`代码，问题似乎出在哪里。为了记录，一个 LinkedList 对象只包含一个节点，`null`它的值`data`和`next`值都对应。

```
public void add(Object o){

    Node current = list;
    String currentString = "";
    String oString = o.toString().split("::")[sortOrder - 1];

    while(current.getNext() != null){
        current = current.getNext();
        currentString = current.getData().toString().split("::")[sortOrder - 1];
        //I do the 'sortOrder - 1' bit because when the user enters 1 
        //we should sort by the 0th element, 2 means sort by the 1st element, etc

        if(oString.compareTo(currentString) > 0){
            Node n = new Node(o);
            n.setNext(current.getNext());
            current.setNext(n);
            return;
        }
    }

    current.setNext(new Node(o));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:29:18.307

仔细检查循环中的条件。请记住，`x.compareTo(y) ?= 0`与 完全一样`x ?= y`，因此`oString.compareTo(currentString) > 0`是真正的意思`oString > currentString`。

假设您有 items `10 -> 20 -> 30 -> null`。您正在插入 25。您的`compareTo`行将首先说“如果 (25 > 10)`n`在此节点之后创建节点”。您的列表将是“10 -> 25 -> 20 -> 30 -> null”。相反，您要做的是`current`仅在 if`newItem > next`或之后插入项目`next == null`。

希望这是一个手动创建链表的学校练习；`ArrayList`将列表存储一次并`Collections.sort(list, comparator)`根据用户输入对列表进行排序更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:24:54.607

您也可以考虑使用 Comparator 以您想要的方式对列表进行排序，而不是修改排序逻辑。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Comparator.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Comparator.html)

这样你只需要维护一个列表，就可以按照你想要的方式对列表元素进行排序和显示

可以在此处找到用法示例：[http ://www.tutorialspoint.com/java/java_using_comparator.htm](http://www.tutorialspoint.com/java/java_using_comparator.htm)

# python - 你如何在python中实现“#ifdef”？

> ID：12524570
> 
> 赞同：49
> 
> 时间：2012-09-21T05:08:08.773
> 
> 标签：python, preprocessor

在我以前的编程中`C`，代码部分仅用于调试目的（记录命令等）。这些语句可以通过使用`#ifdef`预处理器指令完全禁用生产，如下所示：

```
 #ifdef MACRO

 controlled text

 #endif /* MACRO */ 
```

做类似事情的最佳方法是什么`python`？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-21T05:42:53.467

如果您只想禁用日志记录方法，请使用该`logging`模块。如果日志级别设置为排除调试语句，那么`logging.debug`将非常接近无操作（它只是检查日志级别并返回而不插入日志字符串）。

如果您想在字节码编译时根据特定变量实际删除代码块，您唯一的选择是相当神秘的`__debug__`全局变量。`True`除非`-O`标志被传递给 Python（或`PYTHONOPTIMIZE`在环境中设置为非空值），否则此变量设置为。

如果`__debug__`在`if`语句中使用，则该`if`语句实际上只编译到`True`分支中。这种特殊的优化与 Python 所获得的一样接近预处理器宏。

请注意，与宏不同，您的代码在`if`.

* * *

为了展示如何`__debug__`工作，请考虑以下两个函数：

```
def f():
    if __debug__: return 3
    else: return 4

def g():
    if True: return 3
    else: return 4 
```

现在检查它们`dis`：

```
>>> dis.dis(f)
  2           0 LOAD_CONST               1 (3)
              3 RETURN_VALUE        
>>> dis.dis(g)
  2           0 LOAD_GLOBAL              0 (True)
              3 JUMP_IF_FALSE            5 (to 11)
              6 POP_TOP             
              7 LOAD_CONST               1 (3)
             10 RETURN_VALUE        
        >>   11 POP_TOP             

  3          12 LOAD_CONST               2 (4)
             15 RETURN_VALUE        
             16 LOAD_CONST               0 (None)
             19 RETURN_VALUE 
```

如您所见，只有`f`“优化”。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-21T05:46:15.027

重要的是要了解在 Python 中`def`和`class`是两个常规的可执行语句......

```
import os

if os.name == "posix":
    def foo(x):
        return x * x
else:
    def foo(x):
        return x + 42
... 
```

因此，要使用 C 和 C++ 中的预处理器执行您的操作，您可以使用常规的 Python 语言。

Python 语言在这一点上与 C 和 C++ 根本不同，因为不存在“编译时间”的概念，只有两个阶段是“解析时间”（读入源代码时）和解析代码时的“运行时间” （通常主要由定义语句组成，但这确实是任意 Python 代码）被执行。

我使用术语“解析时间”，即使从技术上讲，在转换中读取源代码时是对字节码的完整编译，因为 C 和 C++ 编译的语义不同，例如函数的定义发生在那个阶段（相反，它发生在 Python 的运行时）。

甚至相当于`#include`C 和 C++（在 Python 中是`import`）的等价物是在运行时而不是在编译（解析）时执行的常规语句，因此它可以放在常规 python`if`中。很常见的是，例如，如果系统上不存在特定的可选 Python 库，则`import`在一个`try`块内部将为某些函数提供替代定义。

最后请注意，在 Python 中，您甚至可以通过使用在运行时从头开始创建新的函数和类`exec`，而不必在源代码中包含它们。您也可以直接使用代码组装这些对象，因为类和函数确实只是常规对象（不过，这通常只对类进行）。

有一些工具会尝试将定义和`def`语句视为“静态”，例如对 Python 代码进行静态分析以在可疑片段上生成警告或创建不依赖于系统上的特定 Python 安装以运行程序。然而，所有这些都需要能够考虑到 Python 在这方面比 C 或 C++ 更具动态性，并且它们还允许为自动分析失败的地方添加异常。`class``import`

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-04-06T21:23:59.100

这是我用来区分 Python Tk 程序的 Python 2 和 3 的示例：

```
导入系统
如果 sys.version_info[0] == 3：
    从 tkinter 导入 *
    从 tkinter 导入 ttk
别的：
    从 Tkinter 导入 *
    导入ttk

""" 其余代码 """

```

希望这是一个有用的说明。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-21T05:11:22.440

据我所知，你必须使用实际的`if`陈述。没有预处理器，因此没有预处理器指令的类似物。

编辑：实际上，看起来这个问题的最佳答案会更有启发性：[你将如何在 Python 中执行相当于预处理器指令的操作？](https://stackoverflow.com/questions/482014/how-would-you-do-the-equivalent-of-preprocessor-directives-in-python)

假设有一个特殊变量`__debug__`，当与`if`语句一起使用时，将被评估一次，然后在执行期间不再评估。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-21T05:25:44.817

我知道没有直接的等价物，因此您可能想要缩小并重新考虑您过去使用预处理器解决的问题。

如果它只是您所追求的诊断日志记录，那么有一个全面的日志记录模块应该涵盖您想要的所有内容以及更多内容。

[http://docs.python.org/library/logging.html](http://docs.python.org/library/logging.html)

你还用预处理器做什么？测试配置？有一个配置模块。

[http://docs.python.org/library/configparser.html](http://docs.python.org/library/configparser.html)

还要别的吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-07T11:48:43.443

如果您`#ifdef`用于检查可能已在当前文件上方的范围内定义的变量，则可以使用异常。例如，我有一些脚本，我想在内部`ipython`和外部以不同的方式运行`ipython`（例如，显示绘图与保存绘图）。所以我添加

```
 ipy = False
     try:
        ipy = __IPYTHON__
     except NameError:
        pass 
```

这给我留下了一个变量`ipy`，它告诉我是否`__IPYTHON__`在当前脚本上方的范围内声明。这是我所知道的`#ifdef`Python 中最接近的并行函数。

因为`ipython`，这是一个很好的解决方案。您可以在其他上下文中使用类似的构造，其中调用脚本设置变量值并相应地检查内部脚本。当然，这是否有意义取决于您的具体用例。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2019-04-19T16:46:26.200

如果你正在使用 Spyder，你可能只需要这个：

```
try:
    print(x)
except:
    #code to run under ifndef
    x = "x is defined now!"
#other code 
```

第一次，你运行你的脚本，你会运行下面的代码`#code to run under ifndef`，第二次，你会跳过它。希望它有效:)

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2019-08-23T03:13:05.877

这可以通过传递命令行参数来实现，如下所示：

```
import sys

my_macro = 0

if(len(sys.argv) > 1):
    for x in sys.argv:
        if(x == "MACRO"):
            my_macro = 1

if (my_macro == 1):
    controlled text 
```

尝试运行以下脚本并在此之后观察结果：

```
python myscript.py MACRO 
```

希望这可以帮助。

# webview - 在 Webview/ 中禁用自动图像加载

> ID：12524580
> 
> 赞同：3
> 
> 时间：2012-09-21T05:09:39.230
> 
> 标签：webview, webkit, javafx

我正在使用 JavaFX webview 开发一个网络爬虫。出于抓取目的，我不需要加载图像。当页面被加载时，Webkit 会产生很多 UrlLoader 线程。所以我认为最好禁用图像，这样我会节省很多系统资源。有谁知道如何禁用 Webview 中的自动图像加载？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T06:28:16.147

*解决方法*

为 http 定义您自己的协议处理程序并过滤掉具有图像 mime 类型或内容的任何内容。

```
URL.setURLStreamHandlerFactory(new HandlerFactory()); 
```

*示例代码*

```
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.layout.StackPane;
import javafx.scene.web.*;
import javafx.stage.Stage;

import java.io.IOException;
import java.net.*;

public class LynxView extends Application {
    private static final String BLANK_IMAGE_LOC =
            "https://upload.wikimedia.org/wikipedia/commons/c/ce/Transparent.gif";
    public static final String WEBSITE_LOC =
            "http://fxexperience.com";
    public static final String IMAGE_MIME_TYPE_PREFIX =
            "image/";

    @Override
    public void start(Stage stage) throws Exception {
        WebView webView = new WebView();
        WebEngine engine = webView.getEngine();
        engine.load(WEBSITE_LOC);

        stage.setScene(new Scene(new StackPane(webView)));
        stage.show();
    }

    public static void main(String[] args) throws IOException {
        URL.setURLStreamHandlerFactory(new URLStreamHandlerFactory() {
            @Override
            public URLStreamHandler createURLStreamHandler(String protocol) {
                if ("http".equals(protocol)) {
                    return new sun.net.www.protocol.http.Handler() {
                        @Override
                        protected URLConnection openConnection(URL url, Proxy proxy) throws IOException {
                            String[] fileParts = url.getFile().split("\\?");
                            String contentType = URLConnection.guessContentTypeFromName(fileParts[0]);
                            // this small hack is required because, weirdly, svg is not picked up by guessContentTypeFromName
                            // because, for Java 8, svg is not in $JAVA_HOME/lib/content-types.properties
                            if (fileParts[0].endsWith(".svg")) {
                                 contentType = "image/svg";
                            }
                            System.out.println(url.getFile() + " : " + contentType);
                            if ((contentType != null && contentType.startsWith(IMAGE_MIME_TYPE_PREFIX))) {
                                return new URL(BLANK_IMAGE_LOC).openConnection();
                            } else {
                                return super.openConnection(url, proxy);
                            }
                        }
                    };
                }

                return null;
            }
        });

        Application.launch();
    }
} 
```

*样本笔记*

该示例使用以下概念：

*   [在 Java 中获取文件的 Mime 类型](https://stackoverflow.com/questions/51438/getting-a-files-mime-type-in-java)

该示例仅探测文件名以确定内容类型，而不是附加到 url 的输入流。虽然探测输入流将是确定 url 连接到的资源是否实际上是图像的更准确的方法，但探测流的效率略低，因此提出的解决方案以准确性换取效率。

提供的解决方案仅演示了由 http 协议提供的位置，而不是由 https 协议提供的位置。

提供的解决方案使用了 sun.net.www.protocol.http.Handler 类，该类在 Java 9 中可能不公开（因此该解决方案可能不适用于 Java 9）。

urlStreamHandlerFactory 是 JVM 的全局设置，因此一旦设置，它将保持这种状态（例如，任何 java.net.URL 连接的所有图像都将被忽略）。

示例解决方案返回一个空白（透明）图像，它通过网络加载。为了提高效率，图像可以作为资源从类路径而不是通过网络加载。

您可以返回一个空连接而不是一个到空白图像的连接，如果这样做，Web 视图代码将开始向控制台报告空指针异常，因为它没有获得它期望的 url 连接，并将替换所有图像用 x 图像显示图像丢失（我不会真正推荐返回空连接的方法）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T06:38:15.260

```
 public URLStreamHandler createURLStreamHandler(String protocol) {
     if ("http".equals(protocol)) { 
         return new URLFortuneHandler(); 
     }
     else return null;
 }
}

public class URLFortuneHandler extends sun.net.www.protocol.http.Handler {
    protected URLConnection openConnection(URL url) throws IOException {
        String file = url.getFile();
        int mid= file.lastIndexOf(".");
        String ext = file.substring(mid+1,file.length());        
        if ("jpg".equals(ext) || "png".equals(ext)) 
            return somethinghere;
        else 
            return super.openConnection(url);
    }    
} 
```

# performance - 500个用户在线后nginx响应慢

> ID：12524587
> 
> 赞同：0
> 
> 时间：2012-09-21T05:10:38.883
> 
> 标签：performance, nginx

我有一个文件下载站点，我在其中使用 nginx 为 web 部件提供文件和 apache。然而，当我在线访问大约 500 个用户并达到 1500Mbit/s 时，Nginx 响应就会延迟 10 到 60 秒。一旦建立连接，一切都会按预期工作。

Apache 在浏览端没有问题，HDD 只有 50% util，IOwait 是 3，带宽是 70% 饱和，CPU 是 5%。我真的不明白为什么会这样，我在 nginx 日志中没有错误。

# android - 我们如何在布局中的动态位置添加按钮？

> ID：12524589
> 
> 赞同：1
> 
> 时间：2012-09-21T05:10:44.670
> 
> 标签：android

我们如何在布局或使用画布而不是表格布局中的动态位置添加按钮？

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T05:12:16.797

使用 RelativeLayout 将控件放置在您喜欢的位置。看看这个链接： [相对布局中的动态文本视图](https://stackoverflow.com/questions/6583019/dynamic-textview-in-relative-layout)

在这里 [如何以编程方式创建一个RelativeLayout，其中两个按钮一个在另一个之上？](https://stackoverflow.com/questions/4979212/programmatically-creating-a-relativelayout-in-android)

如果您只想在 XML 中实现它。看这里： [http ://www.mkyong.com/android/android-relativelayout-example/](http://www.mkyong.com/android/android-relativelayout-example/)

这是一个如何使用 RelativeLayout 动态定位控件的示例：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Creating a new RelativeLayout
        RelativeLayout mainRelativeLayout = new RelativeLayout(this);

        // Defining the RelativeLayout layout parameters with Fill_Parent
        RelativeLayout.LayoutParams relativeLayoutParameters = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT, RelativeLayout.LayoutParams.FILL_PARENT);

        // Creating a new Left Button
        Button buttonLeft = new Button(this);
        buttonLeft.setText("Left");

        // Creating a new Left Button with Margin
        Button buttonLeftWithMargin = new Button(this);
        buttonLeftWithMargin.setText("Left with Margin");

        // Creating a new Center Button
        Button buttonCenterParent = new Button(this);
        buttonCenterParent.setText("Center");

        // Creating a new Bottom Button
        Button buttonBottom = new Button(this);
        buttonBottom.setText("Bottom");

        // Add a Layout to the Buttons
        AddButtonLayout(buttonLeft, RelativeLayout.ALIGN_PARENT_LEFT);
        AddButtonLayout(buttonCenterParent, RelativeLayout.CENTER_IN_PARENT);
        AddButtonLayout(buttonBottom, RelativeLayout.ALIGN_PARENT_BOTTOM);

        // Add a Layout to the Button with Margin
        AddButtonLayout(buttonLeftWithMargin, RelativeLayout.ALIGN_PARENT_LEFT, 30, 80, 0, 0);

        // Add the Buttons to the View
        mainRelativeLayout.addView(buttonLeft);
        mainRelativeLayout.addView(buttonCenterParent);
        mainRelativeLayout.addView(buttonBottom);
        mainRelativeLayout.addView(buttonLeftWithMargin);

        // Setting the RelativeLayout as our content view
        setContentView(mainRelativeLayout, relativeLayoutParameters);
    }

    private void AddButtonLayout(Button button, int centerInParent, int marginLeft, int marginTop, int marginRight, int marginBottom) {
        // Defining the layout parameters of the Button
        RelativeLayout.LayoutParams buttonLayoutParameters = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);

        // Add Margin to the LayoutParameters
        buttonLayoutParameters.setMargins(marginLeft, marginTop, marginRight, marginBottom);

        // Add Rule to Layout
        buttonLayoutParameters.addRule(centerInParent);

        // Setting the parameters on the Button
        button.setLayoutParams(buttonLayoutParameters);     
    }

    private void AddButtonLayout(Button button, int centerInParent) {
        // Just call the other AddButtonLayout Method with Margin 0
        AddButtonLayout(button, centerInParent, 0 ,0 ,0 ,0);
    }
} 
```

你应该得到这样的东西：

![在此处输入图像描述](../Images/020cc801e97ac475758cba8ba2d5417f.png)

# c# - 如何为登录应用程序 c# Windows 窗体保存多个用户名或密码

> ID：12524591
> 
> 赞同：0
> 
> 时间：2012-09-21T05:10:58.967
> 
> 标签：c#, .net, login

我创建了一个简单的登录应用程序，我想保存用户名或密码以进​​行登录，这样我就不必再次插入用户名或密码，就像我们为 gmail 或 facebook 等保存用户名或密码一样，这样我们就不需要了不必再次插入用户名或密码。

像这样：- [http://i49.tinypic.com/rkuats.jpg](http://i49.tinypic.com/rkuats.jpg) 和 [http://i46.tinypic.com/21edys1.jpg](http://i46.tinypic.com/21edys1.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T08:03:35.530

如果您决定使用用户或应用程序配置文件。这是有关如何加密/解密文件部分的链接。

[http://weblogs.asp.net/jgalloway/archive/2008/04/13/encrypting-passwords-in-a-net-app-config-file.aspx](http://weblogs.asp.net/jgalloway/archive/2008/04/13/encrypting-passwords-in-a-net-app-config-file.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:39:44.157

您可以执行以下操作：

*   创建自定义自动完成扩展器。请阅读文章如何做到这一点。[http://www.dotnetfunda.com/articles/article225.aspx](http://www.dotnetfunda.com/articles/article225.aspx)
*   使用 TextChanged 事件加载密码
*   使用 XML 保存您的用户名和密码
*   确保在将密码保存到 xml 之前对其进行加密

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T06:02:11.090

您可以 p/调用本机`CredUI`API 以安全地存储当前用户的凭据。此 API 还提供了一个对话框来提示用户输入凭据。

或者，您可以将托管[ProtectedData](http://msdn.microsoft.com/en-us/library/system.security.cryptography.protecteddata.aspx)类与范围一起使用`DataProtectionScope.CurrentUser`。

这两种技术都可以保护密码，使其只能由当前用户访问，而无需处理管理加密密钥的复杂问题。

# c++ - Qt QGraphicsView 和 StyleSheets

> ID：12524594
> 
> 赞同：3
> 
> 时间：2012-09-21T05:11:18.733
> 
> 标签：c++, css, qt, qgraphicsview

我可以使用 CSS/样式表为 QGraphicsView 中的项目设置样式，例如 QGraphicsWidget 吗？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:07:02.463

我认为这不是直接可能的，至少如果您将样式表应用于`QGraphicsView`自身，它不会影响其中的任何小部件。但是，您可以在将小部件添加到场景之前为其分配样式表，然后在添加后它将保持其样式：

```
QGraphicsScene scene;
QPushButton b;

b.setStyleSheet("QPushButton{background-color:red}");
scene.addWidget(&b);

QGraphicsView view(&scene);
view.show(); 
```

# javascript - 部分视图在索引视图中无法正常工作。

> ID：12524595
> 
> 赞同：1
> 
> 时间：2012-09-21T05:11:20.717
> 
> 标签：javascript, asp.net-mvc-3

我正在开发 MVC 应用程序并使用剃刀语法。

在这个应用程序中，我提供评论功能。

我添加了一个局部视图，它从数据库加载评论/记录。

在下图中，我们可以看到称为员工索引视图运行时的注释框。

现在我们可以看到评论框，我在运行时调用，这是部分视图，但问题是我只能在第一条记录上添加评论......在第一次记录之后，该按钮根本不起作用......

有什么遗漏吗？当我们调用任何局部视图运行时并对其进行操作时，是否有单独的过程？

看图...

![在此处输入图像描述](../Images/f6cfac22f19da2a387ff185a605f8a93.png)

这是代码....

```
@model PagedList.IPagedList<CRMEntities.Customer>

  <link href="../../Content/Paging.css" rel="stylesheet" type="text/css" />
  <link href="../../Content/EventEntity.css" rel="stylesheet" type="text/css" />
  <script src="<%=Url.Content("~/Scripts/jquery.unobtrusive-ajax.min.js")%>" type="text/javascript"></script>

<div id="ListBox">
    <div id="ListHeader">   
        All customers(@Model.TotalItemCount)
    </div>

    @foreach (var item in Model)
    {        

    <div id="ListContent">
          <span class="ContentTitleField">@Html.ActionLink(item.Name, "Details", new { id = item.Id }, new { @style="color:#1A6690;" })</span>
          @if (item.Owner != null)
          {               
            <span class="ContentSecondaryField">@Html.ActionLink(item.Owner.FullName, "Details", "Employee", new { id = item.OwnerId }, new { @style = "color:#1A6690;" })</span>          
          }
          <span class="ContentSecondaryField">@Html.DisplayFor(modelItem => item.Address)</span>
          <span id="flagMenus">
            @Html.Action("ShowFlag", "Flagging", new { entityId=item.Id, entityType="Customer"})
          </span>
          @if (item.Opportunities.Count > 0)
          {
                        <span class="FlagOpportunity">@Html.ActionLink("opportunities(" + item.Opportunities.Count + ")", "Index", "Opportunity", new { custid = item.Id }, new { @style = "color:#fff;" })</span>
          }

           <div style="float:right;">
             @Html.Action("SetRate", "Rating", new { entityId = item.Id, rating = item.Rating, entityname = "Customer" })

           </div>
           <div id="subscribeStatus" style="float:right;">
                @Html.Action("ShowSubscribedStatus", "Subscribing", new { entityId = item.Id, entityType = "Customer" })
            </div>
          <div class="ListLinks">          
          <span class="ListEditLinks">
            <span style="float:left;">@Html.ActionLink("edit", "Edit", new { id = item.Id })</span>
            <span class="LinkSeparator"></span>            
           </span>
           <span class="ListAddLinks">
            <span style="float:left;">@Html.ActionLink("+opportunity", "Create", "Opportunity", new { custid = item.Id }, null)</span>
            <span class="LinkSeparator"></span>
            <span>@Ajax.ActionLink("+Comment", null, null, null, new { id = item.Id, @class = "addremark" })</span>                                  
          </span>

        <div class="RemarkBox"></div>

          </div>    

             <span class="CommentAdd">

             </span>

          <div class="CommentBlock">

        </div>

         <span>@Ajax.ActionLink("Add Comment", null, null, null, new { id = item.Id, @class = "addremark" })</span>                                  

    </div>    
    } 

    <div class="PagingBox">
        @Html.Action("CreateLinks", "Pager", new { hasPreviousPage = Model.HasPreviousPage, hasNextPage = Model.HasNextPage, pageNumber = Model.PageNumber, pageCount = Model.PageCount })
    </div>

</div>

<script type="text/javascript">

    $(document).ready(function () {

        $('.RemarkBox').hide();

        $('a.addremark').click(function () {

            var url="@Html.Raw(Url.Action("ShowCommentBox", "Comment", new { Id = "idValue", EntityType = "Customer" }))";

            url=url.replace("idValue",event.target.id);
            $('.RemarkBox').load(url);

            $(this).closest('div').find('div.RemarkBox').slideToggle(300);
            return false;
        });

         $("a.pagenumber").click(function () {             
            var page = 0;
            page = parseInt($(this).attr("id"));

            $.ajax({
                url: '@Url.Action("GetPagedCustomers")',
                data: { "page": page },
                success: function (data) { $("#customerlist").html(data); }
            });
            return false;
        });

    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:01:13.037

为了扩展 Alberto León 的说法，部分页面加载不会导致文档就绪事件触发，因此在添加第一条评论后，重新渲染的元素不会注册 javascript 事件处理程序。

为了解决这个问题，您可以将事件注册代码放入一个函数中，并从文档就绪事件和 AJAX 调用的成功处理程序中调用它。像这样的东西：

```
function AssignEventHandlers() {

    $('a.addremark').click(function () {
        ....
    });

    $("a.pagenumber").click(function () {
        var page = 0;
        page = parseInt($(this).attr("id"));

        $.ajax({
            url: '@Url.Action("GetPagedCustomers")',
            data: { "page": page },
            success: function (data) { 
                $("#customerlist").html(data);
                AssignEventHandlers();
            }
        });
        return false;
    });
}

$(document).ready(function () {

    $('.RemarkBox').hide();

    AssignEventHandlers();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:34:23.707

在成功函数中，您需要调用使按钮起作用的 javascript 或 jquery 代码。是一个花了我很多时间的错误。通过 ajax 或任何 renderpartiAl 上传的任何内容都需要调用 javascript。

```
$('.RemarkBox').load(url, function() {
  //RECALL JAVASCRIPT

}); 
```

# jquery - JQuery 选择器 div > 2nd div > 3rd li

> ID：12524598
> 
> 赞同：0
> 
> 时间：2012-09-21T05:11:29.017
> 
> 标签：jquery, html

```
<div class="component-content login-wrap2">
<div class="login"></div>
<div>
    <ul>
        <li></li>
        <li></li>
        <li>
            <a href="/shipzilla/login?view=registration">
            Not a member yet?
            <span>Sign up now!</span>
            </a>
        </li>
    </ul>
</div> 
```

我想更改第三个 li 中 href 的属性。问题是，我应该使用什么选择器才能使用 .attr() 函数。:)
谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:16:10.153

```
$('div:eq(2) li:eq(2)').attr('href' , '/shipzilla/Cart') 
```

将href更改为新值..

你也可以试试这些选择器..

```
$('div:eq(2) ul li:eq(2)');
    $('div:eq(2) ul li:nth-child(3)'); 
```

试试这个代码

```
$(function() {
    var elem = $('div:eq(2) li:eq(2)');
    console.log('Old href : ' + elem.attr(href));
    $('div:eq(2) li:eq(2)').attr('href', '/shipzilla/Cart');

    console.log('New href : ' + elem.attr(href));
});​ 
```

检查[小提琴](http://jsfiddle.net/6Vqgc/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:21:26.200

这会给你第三个里的内容。

```
alert ($("ul li:nth-child(3)").html());​​​​​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:31:10.013

您可以使用它来选择 div > 2nd div > 3rd li 。这将帮助您选择此项。

```
console.log($("div div:nth-child(2) ul li:nth-child(3) a")); 
```

# hibernate - Hibernate & EHCache：maxElementsInMemory 是如何工作的？

> ID：12524601
> 
> 赞同：17
> 
> 时间：2012-09-21T05:11:35.503
> 
> 标签：hibernate, configuration, ehcache

我已经为 EHCache 配置了 defaultCache（用于元素）、StandardQueryCache（用于查询）和 UpdateTimestampsCache（我认为是为了跟踪数据库更新......但我并没有真正了解它的确切作用）。

我已经为这些缓存中的每一个设置了 maxElementsInMemory，但我没有得到的是这个数字对 StandardQueryCache 和 UpdateTimestampsCache 的控制。我知道可以在默认缓存中缓存的实体数量不得超过 10000，但查询缓存不缓存元素。它缓存主键（据我所知）。

这是否意味着 StandardQueryCache 的 maxElementsInMemory 控制结果中的“行”数，或者它是否控制它可能具有的元素的主键对数？

UpdateTimestampsCache 呢？它是否跟踪上次更新实体的时间，上次更新表的时间......或其他什么？我应该为这个 maxElementsInMemory 使用什么数字？

谢谢！

```
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="ehcache.xsd" updateCheck="true" monitoring="autodetect"     dynamicConfig="true">
  <defaultCache 
    maxElementsInMemory="10000"
    eternal="false"
    timeToIdleSeconds="3600"
    timeToLiveSeconds="3600">
  </defaultCache>

  <cache
    name="org.hibernate.cache.internal.StandardQueryCache"
    maxElementsInMemory="10000"
    eternal="false"
    timeToIdleSeconds="3600"
    timeToLiveSeconds="3600">
  </cache>

  <cache
    name="org.hibernate.cache.spi.UpdateTimestampsCache"
    maxElementsInMemory="10000"
    eternal="true">
  </cache>

</ehcache> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-21T08:06:55.030

对于查询缓存，每个查询结果的结果是 StandardQueryCache 区域中的一个条目。因此，您的缓存当前设置为在默认/未命名区域中缓存 10000 个不同的查询结果。设置为使用命名区域 (Query#setCacheRegion) 的查询写入不同的缓存区域。

每当基础数据发生更改时，这些结果都需要“无效”。这就是 UpdateTimestampsCache 的目的。当 Hibernate 写入表时，它会将条目写入 UpdateTimestampsCache（此过程仅在启用查询缓存时启用，因为它显式地使这些缓存的查询结果无效）。当读回缓存的查询结果时，我们检查与查询结果一起缓存的时间戳与它使用的所有表的时间戳，以确定结果是否仍然有效。如果可能的话，最好不要限制这个区域。如果需要，最好的数字是底层域模型中的表数。否则，缓存的查询结果可能会在不需要时开始失效。很难想象你有 10000 张桌子，所以你在那里可能很好。

# javascript - 有更好的函数来生成随机整数吗？

> ID：12524603
> 
> 赞同：2
> 
> 时间：2012-09-21T05:11:37.373
> 
> 标签：javascript, math, random

我写了一个函数：

```
function rand(minDit, maxDit){
  return Math.floor(Math.random() * (maxDit - minDit + 1)) + minDit; 
} 
```

我用它来生成一个从 minDit 到 maxDit 的随机整数，我想知道是否有更好的解决方案？

# wordpress - 按字母顺序获取自定义字段值

> ID：12524604
> 
> 赞同：1
> 
> 时间：2012-09-21T05:11:38.730
> 
> 标签：wordpress, list, field

下面的函数按发布顺序列出了自定义字段的值。例子：

*   弗兰克·卡普拉
*   阿尔弗雷德·希区柯克
*   伍迪·艾伦
*   伍迪·艾伦
*   弗兰克·卡普拉
*   佩德罗·阿莫多瓦

我想按字母顺序获取此列表且不重复，并带有指向每个项目的链接`<a href="Woody-Allen">Woody Allen</a>`。例子：

*   阿尔弗雷德·希区柯克
*   弗兰克·卡普拉
*   佩德罗·阿莫多瓦
*   伍迪·艾伦

* * *

这是代码：

```
<?php
$movie_reviews = get_posts( 'numberposts=-1&orderby=post_name' );
foreach( $movie_reviews as $post ) : setup_postdata( $post );
?>
<span>
<?php $director = get_post_meta( $post->ID, "director", $single = true );
if( $director !== '' ) {
echo $director;
} ?>
</span>
<?php endforeach; ?> 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:47:22.563

使用[`get_posts`](http://codex.wordpress.org/Template_Tags/get_posts)，您可以像这样订购帖子`meta_value`：

```
$movie_reviews = get_posts(array(
  'numberposts'=>-1,
  'order'=>'ASC',
  'orderby'=>'meta_value',
  'meta_key'=>'director'
)); 
```

要删除重复项，您可以构建一个 director 数组：

```
$directors = array();
foreach( $movie_reviews as $post ) {
    $director = get_post_meta( $post->ID, 'director', true );
}
$directors = array_unique($directors); 
```

在您可以根据需要显示它们之后：

```
foreach ($directors as $director) {
    // display what you want
} 
```

**编辑**：仅显示 a* 导演：

```
foreach ($directors as $director) {
    if (strtolower($director[0])=='a') {
        // display what you want
    }
} 
```

# internet-explorer - 没有脱离 Dojo DataGrid 中的内联编辑

> ID：12524610
> 
> 赞同：-1
> 
> 时间：2012-09-21T05:12:09.420
> 
> 标签：internet-explorer, dojo, dojox.grid.datagrid

> **可能重复：**
> [Dojo IE DataGrid 内联编辑](https://stackoverflow.com/questions/12355707/dojo-ie-datagrid-inline-editing)

以下jsfiddle中网格中的单元格是可编辑的，但我是：

**当我双击单元格时**无法**退出编辑模式，更改值，单击网格**外。****

 ****当我双击单元格时**能够**退出编辑模式，更改值，在网格**内单击。****

 **jsfiddle：http: [//jsfiddle.net/keemor/xDUpp/11/](http://jsfiddle.net/keemor/xDUpp/11/)

有人可以为我修复那个jsfiddle。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:55:37.467

好的，我找到了解决方法。似乎它工作得很好。您需要注册网格的 onBlur 事件并在网格上手动调用 save。

```
vGrid.onBlur = function(){
    var grid = dijit.byId('validation_grid');
    if (grid.edit.isEditing()){
        grid.edit.apply();
    }
}; 
```****

# java - 长字节转换

> ID：12524616
> 
> 赞同：0
> 
> 时间：2012-09-21T05:13:11.370
> 
> 标签：java

我用 Java 编写了以下程序来将 long 转换为字节。

```
 public class LongtoByte 
    {
            public static void main(String[] args)
            {
                long a=222;
                byte b=(byte)(a & 0xff);
                System.out.println("the value of b is" +b);

            }
    } 
```

问题是我得到变量 b 的结果 -34。

请告诉我如何获得正确的值。我只想要以字节为单位的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:22:02.270

Java 的类型是有符号的，字节允许 -128 和 +127 之间的数字。这就是你得到 -34 的 222 值的原因

```
 long a=121;
     byte b=(byte)(a );
     System.out.println("the value of b is" +b); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:17:28.303

所有整数类型（包括`byte`）都在 Java 中签名，所以如果你坚持`222`使用 Java `byte`，你会得到一个溢出（导致你看到的负数）。如果您在 Java 中需要 0–255 范围内的整数，您至少需要一个`short`.

但是，如果您只是要将结果作为单个字节写入某处，则无需担心，因为它的位模式表示`222`与`unsigned byte`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:16:20.100

您可以使用`java.lang.Long`类的`byteValue()`方法：

```
byte b = a.byteValue(); 
```

您将不得不`Long`像这样创建一个类型对象：

```
Long a = new Long(222); 
```

正如其他人所指出的那样，由于可以由 8 位字节表示的范围溢出，这将返回 -34。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T07:11:13.077

当您打印一个字节时，它假定范围为 -128 到 127。

如果你打印

```
byte b = (byte) 222; 
```

你应该期望得到一个负数。

如果要存储 0 到 255 的范围，则需要在获取值时对其进行转换。

```
int i = 222;
byte[] b = { (byte) i };
int i2 = b[0] & 0xFF; // give me the original unsigned 0 to 255.
assert i == i2; 
```

您可以发明各种编码。例如，假设您要存储仅以百万为单位的数字，例如 0 到 2 亿或十进制数字 -1.00 到 1.00 一个字节。您可能首先认为这是不可能的，因为一个字节只存储 8 位。

```
// store millions.
byte b = (byte) (i / 1000000);
int i = (b & 0xff) * 1000000;

// store decimal from -1.00 to 1.00
byte b = (byte) Math.round(d * 100);
double d = b / 100.0; 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-21T05:25:52.097

```
public class LongtoByte 
    {
            public static void main(String[] args)
            {
                long a=222;
                byte b=(byte)(a);
                System.out.println("the value of b is" +b);

            }
    } 
```

这个字节 bValue = (byte) num; 语句被转换为字节格式。

# django - Django 注册 SMTPServerDisconnected 错误

> ID：12524617
> 
> 赞同：5
> 
> 时间：2012-09-21T05:13:12.243
> 
> 标签：django, login, django-registration

我为我的项目使用[django-registration](https://bitbucket.org/ubernostrum/django-registration)来管理用户注册、登录等。但是当我注册一个帐户时，我遇到了这个问题：

`SMTPServerDisconnected`

作为记录，我确实在我的 settings.py 中配置了与电子邮件相关的设置：

```
EMAIL_HOST = 'smtp.gmail.com'                                                                                                                                           
EMAIL_PORT = 465
EMAIL_USE_TLS = True
EMAIL_HOST_USER = 'myemail@gmail.com'
EMAIL_HOST_PASSWORD = 'mypassword' 
```

我还有所有需要和可访问的模板。所以这个问题与那个没有任何关系。

更多错误描述：

单击发送激活电子邮件后，它需要很长时间才能最终给出该错误。

这是回溯（不完整）：

```
SMTPServerDisconnected at /accounts/register/

Connection unexpectedly closed

last trace back:

/usr/lib/python2.7/smtplib.py in getreply

                    line = self.file.readline()

                except socket.error as e:

                    self.close()

                    raise SMTPServerDisconnected("Connection unexpectedly closed: "

                                                 + str(e))

                if line == '':

                    self.close()

                    raise SMTPServerDisconnected("Connection unexpectedly closed")

    ...

                if self.debuglevel > 0:

                    print>>stderr, 'reply:', repr(line)

                resp.append(line[4:].strip())

                code = line[:3]

                # Check that the error code is syntactically correct.

                # Don't attempt to read a continuation line if it is broken. 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T08:45:50.900

我认为至少有一个设置不正确。TLS [1] 需要端口 587

`EMAIL_PORT = 587`

[1] [http://support.google.com/mail/bin/answer.py?hl=en&answer=13287](http://support.google.com/mail/bin/answer.py?hl=en&answer=13287)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T08:48:52.640

最后我想通了。我在这里发布我的解决方案，以防其他人被困在这里。问题是 Gmail 端口。使用587，它工作。

我在这里看到了：[https ://code.djangoproject.com/ticket/9575](https://code.djangoproject.com/ticket/9575)

我想知道为什么有些人可以使用 465 而有些人不能。我花了几个小时才找到答案。希望你们不会！

编辑：有关使用端口的更多讨论，请参见[此处。](https://code.djangoproject.com/ticket/17471)

```
To use port 465, you need to call smtplib.SMTP_SSL(). Currently, it looks like Django only uses smtplib.SMTP(). 
```

看来587是正确的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-07T19:42:25.017

同时，您可能需要检查[https://github.com/bancek/django-smtp-ssl](https://github.com/bancek/django-smtp-ssl)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-11-07T06:17:24.057

Django Gmail 配置文件#settings.py

```
EMAIL_BACKEND ='django.core.mail.backends.smtp.EmailBackend'
EMAIL_HOST = 'smtp.gmail.com'
EMAIL_USE_SSL = True    # use port 465
EMAIL_USE_TLS = False    # use port 587
EMAIL_PORT = 465 # OR 587
EMAIL_HOST_USER =  os.environ.get('USER_EMAIL')
EMAIL_HOST_PASSWORD =os.environ.get('USER_EMAIL_PASS') 
```

helper.py (函数)

```
from django.core.mail import send_mail
def send(sub=None,message=None,recipient=[]):
    # def send_mail(
                    # subject,
                    # message,
                    # from_email,
                    # recipient_list,
                    # fail_silently=False,
                    # auth_user=None,
                    # auth_password=None,
                    # connection=None,
                    # html_message=None):

    send_mail(subject='contact mail'
                       ,message='Test Mail'
                       ,from_email=EMAIL_HOST_USER
                       ,recipient_list=['mail_list']
                       ,fail_silently=False)
    return True 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-02-07T21:02:40.217

如果您对上述答案没有任何运气，您可能需要检查您是否在 settings.py 中设置了 DEFAULT_FROM_EMAIL

```
 # project/settings.py
    EMAIL_HOST = 'smtp.gmail.com'                                                                                                                                           
    EMAIL_PORT = 465
    EMAIL_USE_TLS = True
    EMAIL_HOST_USER = 'myemail@gmail.com'
    EMAIL_HOST_PASSWORD = 'mypassword'
    DEFAULT_FROM_EMAIL = 'myemail@gmail.com' 
```

# svn - Subversion 可以用于所有类型的项目吗？

> ID：12524618
> 
> 赞同：1
> 
> 时间：2012-09-21T05:13:19.773
> 
> 标签：svn, visualsvn

我想将 SVN 软件用于所有类型的项目文件，无论是 Visual Studio、Java、PHP 还是其他任何类型的项目文件。

VisualSVN 对我有用吗？我想将我的数据从连接到 LAN 的所有客户端备份到服务器 PC。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T09:13:49.607

你问的是[VisualSVN](http://www.visualsvn.com/visualsvn/)还是[VisualSVN Server](http://www.visualsvn.com/server/)？

请注意，Apache Subversion 可以与任何类型的文本和二进制文件一起使用（例如，它可以对您的 Visual Studio 解决方案和项目、WordPress 主题或插件、Java 应用程序代码或您奶奶的食谱进行版本控制）。查看您的问题，我强烈建议您阅读（至少[通读）带有 Subversion 的版本控制（SVNBook）](http://svnbook.red-bean.com/en/1.7/index.html)。

*   VisualSVN 是 Visual Studio 的 Subversion 集成扩展。与仅使用独立客户端相比，它使处理存储在 SVN 中的版本化文件变得容易十亿倍。

    它为您提供在解决方案资源管理器中已修改的清晰视图，显示整洁的 Pending Changes 窗口，与 Visual Studio 2012 内部差异集成。您可以在 Visual Studio 中执行所有版本控制操作：提交、更新、合并、显示日志、切换 WC 等等。您不必回退到独立客户端。有关详细信息，请参阅[VisualSVN 功能页面](http://www.visualsvn.com/visualsvn/features/)。

    VisualSVN 3.0**免费供家庭使用**（社区许可证在非域机器上自动激活）。

*   [VisualSVN Server](http://en.wikipedia.org/wiki/VisualSVN_Server)是一个用于 Windows 的 Subversion 服务器包。它提供了专门针对 Windows 环境调整的 Subversion 版本控制系统。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T05:15:02.313

无论如何，[Apache Subversion](http://subversion.apache.org/)已经足够了。

# android - 如何从android中的通讯录中获取笔记值

> ID：12524621
> 
> 赞同：0
> 
> 时间：2012-09-21T05:14:26.950
> 
> 标签：android, android-contacts

我想让我的应用程序从 Android 手机的通讯录中获取值。

我已经尝试过 People,`ContactContracts.Data`和`ContactContracts.Contact.Data`从 `ContactsContract.CommonDataKinds`电话簿中读取 NOTE 值的值。但无法成功。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:29:17.483

使用以下代码从联系人获取注释值。

```
Cursor cursor = getContentResolver().query(
        ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
cursor.moveToFirst();

for (int i=0; i<cursor.getCount(); i++){
    System.out.println("Hello");
    String contactId = cursor.getString(
            cursor.getColumnIndex(ContactsContract.Contacts._ID));

    String note = null;
    String[] columns = new String[] { ContactsContract.CommonDataKinds.Note.NOTE };
    String where = ContactsContract.Data.RAW_CONTACT_ID + " = ? AND " +
            ContactsContract.Data.MIMETYPE + " = ?";
    String[] whereParameters = new String[] {
            contactId, ContactsContract.CommonDataKinds.Note.CONTENT_ITEM_TYPE };
    Cursor contacts = getContentResolver().query(
            ContactsContract.Data.CONTENT_URI, columns, where,
            whereParameters, null);

    if (contacts.moveToFirst()) {
        String rv = contacts.getString(0);
        note = rv;
    } else{
        String rv = contacts.getString(i);
        note = rv;
    }
    contacts.close();
    System.out.println("Note is: " + note);

    cursor.moveToNext();            
} 
```

# android - Android 中的 JSON 库：缺少 InputStream 构造函数

> ID：12524622
> 
> 赞同：0
> 
> 时间：2012-09-21T05:14:50.207
> 
> 标签：android, json

我正在尝试使用Android JSON库，但是版本很旧，并且JSONObject中没有接受InputStream的构造函数，只有一个字符串。我无法将流的所有内容读入字符串，因为它比最大长度长。有没有办法在构造函数之后向 JSONObject 添加数据？如果没有，我该如何升级Android中的版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:23:39.173

为什么不使用 Gson Api，它是 Google 的第三方 API。检查以下链接：

[http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

[https://sites.google.com/site/gson/gson-user-guide](https://sites.google.com/site/gson/gson-user-guide)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T12:59:01.677

尝试使用我的开源库：[http](http://code.google.com/p/android-json-rpc/) ://code.google.com/p/android-json-rpc/ 没有输入流，但直接调用 JSON REST 服务。

您还可以覆盖 JSONObject 类，如下所示：

```
package com.m4bce.loisirs_ch;

import java.io.IOException;
import java.io.InputStream;

import org.json.JSONObject;

public class JSONObjectStream extends JSONObject {

    public JSONObjectStream(InputStream is) throws IOException {
        super();

        // your code here
    }

} 
```

我希望这会有所帮助。

# graphics - 在线性和非线性 RGB 空间中使用颜色时，实际的区别是什么？

> ID：12524623
> 
> 赞同：111
> 
> 时间：2012-09-21T05:14:56.127
> 
> 标签：graphics, colors, rgb, color-space, color-coding

线性 RGB 空间的基本属性是什么，非线性空间的基本属性是什么？当谈论这 8 个（或更多）位中每个通道内的值时，会发生什么变化？

在 OpenGL 中，颜色是 3+1 值，我的意思是 RGB+alpha，每个通道保留 8 位，这是我清楚的部分。

但是当谈到伽玛校正时，我不明白在非线性 RGB 空间中工作的效果是什么。

因为我知道如何在图形软件中使用曲线进行照片编辑，所以我的解释是，在线性 RGB 空间中，您可以按原样获取值，没有任何操作，也没有附加数学函数，而是当它每个都是非线性的通道通常遵循经典的幂函数行为。

即使我认为这个解释是真实的，我仍然不知道什么是真正的线性空间，因为在计算之后，所有非线性 RGB 空间都变成了线性的，最重要的是我没有得到非线性空间的部分- 线性色彩空间更适合人眼，因为最终所有 RGB 空间对于我所理解的都是线性的。

* * *

## 回答 #1

> 赞同：273
> 
> 时间：2012-10-15T10:50:50.380

假设您正在使用 RGB 颜色：每种颜色都用三种*强度*或亮度表示。您必须在“线性 RGB”和“sRGB”之间进行选择。现在，我们将通过忽略三种不同的强度来简化事情，并假设您只有一种强度：也就是说，您只处理灰色阴影。

在线性色彩空间中，您存储的数字与它们所代表的强度之间的关系是线性的。实际上，这意味着如果将数字加倍，强度就会加倍（灰色的亮度）。如果您想将两个强度加在一起（因为您要根据两个光源的贡献来计算强度，或者因为您要在不透明对象的顶部添加一个透明对象），您可以通过添加两个数字在一起。**如果您正在执行任何类型的 2D 混合或 3D 着色，或几乎任何图像处理，那么您希望您的强度在线性色彩空间中**，因此您只需对数字进行加、减、乘和除即可对强度产生相同的影响。大多数颜色处理和渲染算法只能用线性 RGB 给出正确的结果，除非你给所有东西添加额外的权重。

这听起来很容易，但有一个问题。人眼对光的敏感度在低强度下比在高强度下要好。也就是说，如果你列出所有你能分辨的强度，那么暗的比亮的多。换句话说，你可以比浅灰色更好地区分深灰色。特别是，如果您使用 8 位来表示您的强度，并且您在线性颜色空间中执行此操作，您最终会得到太多的浅色阴影，而没有足够的深色阴影。您在黑暗区域会出现条带，而在明亮区域，您会在用户无法区分的不同色调的近白色上浪费一些位。

为了避免这个问题，并充分利用这 8 位，我们倾向于使用*sRGB*。sRGB 标准告诉您要使用的曲线，以使您的颜色非线性。曲线在底部较浅，因此您可以使用更多深灰色，而在顶部更陡峭，因此您可以使用更少的浅灰色。如果你把数字加倍，你的强度就会增加一倍以上。这意味着如果将 sRGB 颜色加在一起，最终会得到比应有的颜色更亮的结果。如今，大多数显示器将其输入颜色解释为 sRGB。因此，**当您在屏幕上添加颜色或将其存储在每通道 8 位纹理中时，请将其存储为 sRGB**，以便充分利用这 8 位。

你会注意到我们现在有一个问题：我们希望我们的颜色在线性空间中处理，但存储在 sRGB 中。这意味着您最终会在读取时进行 sRGB 到线性的转换，并在写入时进行线性到 sRGB 的转换。正如我们已经说过的，线性 8 位强度没有足够的暗度，这会导致问题，因此还有一条更实用的规则：如果可以避免，**请不要使用 8 位线性颜色。**遵循 8 位颜色始终为 sRGB 的规则已成为惯例，因此您在将强度从 8 位扩大到 16 位或从整数到浮点的同时进行 sRGB 到线性的转换；同样，当您完成浮点处理后，在转换为 sRGB 的同时缩小到 8 位。如果你遵守这些规则，

当您读取 sRGB 图像并且需要线性强度时，请将此公式应用于每个强度：

```
float s = read_channel();
float linear;
if (s <= 0.04045) linear = s / 12.92;
else linear = pow((s + 0.055) / 1.055, 2.4); 
```

反过来说，当您想将图像写入 sRGB 时，请将此公式应用于每个线性强度：

```
float linear = do_processing();
float s;
if (linear <= 0.0031308) s = linear * 12.92;
else s = 1.055 * pow(linear, 1.0/2.4) - 0.055; ( Edited: The previous version is -0.55 ) 
```

在这两种情况下，浮点 s 的值都在 0 到 1 之间，因此如果您正在读取 8 位整数，则首先要除以 255，如果您正在编写 8 位整数，则要先乘以 255最后，就像你通常做的那样。这就是使用 sRGB 所需要知道的全部内容。

到目前为止，我只处理了一种强度，但还有一些更聪明的方法可以处理颜色。人眼可以比不同的色调更好地分辨不同的亮度（从技术上讲，它比色度具有更好的亮度分辨率），因此您可以通过将亮度与色调分开存储来更好地利用 24 位。这就是 YUV、YCrCb 等表示尝试做的事情。Y 通道是颜色的整体亮度，并且比其他两个通道使用更多的位（或具有更高的空间分辨率）。这样，您就不需要（总是）像使用 RGB 强度那样应用曲线。YUV 是一个线性颜色空间，因此如果将 Y 通道中的数字加倍，颜色的亮度就会加倍，但不能像 RGB 颜色那样将 YUV 颜色相加或相乘，所以它

我认为这回答了你的问题，所以我将以一个简短的历史记录结束。在 sRGB 之前，旧的 CRT 曾经内置了非线性。如果将像素的电压加倍，则强度将增加一倍以上。每个监视器还有多少不同，这个参数称为*gamma*。这种行为很有用，因为它意味着你可以获得比亮更多的暗，但这也意味着你无法判断你的颜色在用户的 CRT 上有多亮，除非你先校准它。*伽玛校正*意味着转换您开始使用的颜色（可能是线性的）并将它们转换为用户 CRT 的伽玛。OpenGL 来自这个时代，这就是为什么它的 sRGB 行为有时会有点令人困惑。但是 GPU 供应商现在倾向于使用我上面描述的约定：当您在纹理或帧缓冲区中存储 8 位强度时，它是 sRGB，而当您处理颜色时，它是线性的。例如，一个 OpenGL ES 3.0，每个帧缓冲区和纹理都有一个“sRGB 标志”，您可以打开它以在读取和写入时启用自动转换。您根本不需要明确地进行 sRGB 转换或伽马校正。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:58:51.593

我不是“人类颜色检测专家”，但我在 YUV->RGB 转换上遇到过类似的事情。R/G/B 通道有不同的权重，所以如果你改变源颜色 x，RGB 值会改变不同的数量。

如前所述，我不是专家，无论如何，我认为，如果您想做一些颜色正确的转换，您应该在 YUV 空间中进行，然后将其转换为 RGB（或对 RGB 进行数学等效操作，请注意数据丢失）。此外，我不确定 YUV 是颜色的最佳原生表示，但摄像机提供了这种格式，这就是我遇到问题的地方。

这是包含秘密数字的神奇 YUV->RGB 公式：[http ://www.fourcc.org/fccyvrgb.php](http://www.fourcc.org/fccyvrgb.php)

# jquery-mobile - Backbone.js 和 jQuery Mobile，每次加载视图时都起作用

> ID：12524626
> 
> 赞同：1
> 
> 时间：2012-09-21T05:15:21.883
> 
> 标签：jquery-mobile, backbone.js

我有一个 4 页 jquery mobile/backbone.js 应用程序。每次加载某个页面时，我想运行一个函数来使用 ajax 调用填充一些输入。我知道我可以在渲染时进行调用，但这仅在应用程序或页面最初加载时才会再次运行，除非它被刷新。

视图看起来像这样：

```
define([
'jquery',
'underscore',
'backbone',
'text!templates/default/parent.html'
], function($, _, Backbone, parentTemplate) {
var defaultView = Backbone.View.extend({

initialize: function() {
  $(this.el).html(parentTemplate);
            this.render();
},

events: {
  'click #busNext': 'showTarget'
},

render: function() {
  this.setValidator();
  return this;
}

});
return new defaultView;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T09:03:48.623

这里渲染调用一次，如果你想根据某些条件再次调用它们，你必须调用渲染方法。喜欢。

```
this.render(); 
```

它将按照您的意愿一次又一次地执行渲染代码。

# wcf - wp7中隔离存储资源管理器中Applicationsessionservice.svc中的超时异常

> ID：12524629
> 
> 赞同：0
> 
> 时间：2012-09-21T05:15:43.663
> 
> 标签：wcf, windows-phone-7

我正在开发Windows Phone 7 应用程序。通常数据库存储在IsolatedStorage 中。在模拟器中运行应用程序时，它会`TimedOutException`在`ApplicatonSessionService.svc`. 由于它是虚拟的，我无法找到`ApplicatonSessionService.svc`. 有什么办法可以增加时间限制。我正在谷歌搜索解决这个问题，但找不到任何解决方案。请帮我解决这个问题。

这是**异常消息**：

`The HTTP request to http://192.168.0.110:2502/ApplicationSessionService/ApplicationSessionService.svc has exceeded the allotted timeout of 00:00:59.8900000\. The time allotted to this operation may have been a portion of a longer timeout.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:47:16.123

我们 在您之前的帖子中已经讨论过[这个问题。](https://stackoverflow.com/questions/12404628/there-was-no-endpoint-listening-at-url-that-could-accept-the-message)

该问题与独立存储无关。您的应用中有[WCF](http://msdn.microsoft.com/en-us/library/ms731082.aspx) [客户端](http://msdn.microsoft.com/en-us/library/ms735103.aspx)，它无法连接到网络中的 WCF 服务。

尝试`ApplicationSessionService.svc`在您的解决方案中找到。（按**Ctrl + Shift + F**，然后向我们展示结果）。

**UPD**

![更新](../Images/c8553f9943fc39dfda347acaee21b321.png)

正如您在图片上看到的：异常窗口与发生错误的行相连。

此外，如果您按**查看详细信息...**链接，您将收到一条完整的消息。你可以检查堆栈跟踪

# sql - 平均值和多表连接

> ID：12524630
> 
> 赞同：0
> 
> 时间：2012-09-21T05:15:45.260
> 
> 标签：sql, database, join, average

我有三张桌子：

```
Appliances(ID, AppType, Price)

Salespeople(EmployeeID, EmployeeName, CommRate)

Sales(EmployeeID, AppID, Qty) 
```

我遗漏了其他一些列。

我有一个 Appliances to Sales 的联接，将 Appliance.ID 链接到 Sales.AppID，这让我可以将 Sales.Qty 乘以 Appliance.Price，得到每个 Sales.EmployeeID 旁边列出的每个销售的总计。销售人员与销售人员的单独联接将 EmployeeID 联系起来，这为我提供了每次销售的 EmployeeName。

我的问题是我需要将 Salespeople.CommRate 乘以 Total 以获得每笔销售的佣金，分别平均每个员工的佣金，并在每个员工旁边列出该平均值。

```
EmployeeName             Average Commission
A                       N1
B                       N2
C                       N3 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:24:18.867

像这样的东西怎么样

```
SELECT  sp.EmployeeName,
        AVG(s.Qty * a.Price * sp.CommRate)
FROM    Salespeople sp  LEFT JOIN
        Appliances a    ON  sp.EmployeeID = a.EmployeeID LEFT JOIN
        Sales s ON  a.ID = s.AppID
GROUP BY    sp.EmployeeName 
```

# watir-webdriver - Watir webdriver，使用Firefox点击给出错误的链接-UnknownError：l未定义，而在chrome中它工作正常

> ID：12524634
> 
> 赞同：0
> 
> 时间：2012-09-21T05:16:26.190
> 
> 标签：watir-webdriver

每当我尝试单击任何链接时，我都会在此页面中有一个网页（https://），这会给我带来奇怪的错误。当我使用 firefox 浏览器进行自动化时，这给了我错误。如果我使用 chrome，它会单击任何链接而不会出现任何错误。

HTML是这样的：

```
<li id="tab2" class=""><a role="button" aria-pressed="false" id="tab2link" onfocus="onFocusLink(&quot;tab2link&quot;)" onblur="onBlurLink(&quot;tab2link&quot;)" href="/workplace/myportal/!ut/p/c5/04_SB8K8xLLM9MSSzPy8xBz9CP0os3hLAyAwNTAwsvAKM‌​jbw9HQJdXYLCTU2CDYAykeaxRvgAI4GIN1OIGYASHeYM1C3ob-_ZaCfr4GBvxFENx55_HaHg1xrFu_nbx‌​TqZuJpaGhh5mpoYGTmYeLkE-Zp4O5iDJHH4zo_j_zcVP2C3NAIgywTRQDl3__u/?uri=nm:oid:6_B0000‌​P002GVC30IMJ4J6J400U3" style="outline: none; ">MyLink</a></li> 
```

我得到的错误如下：

```
Selenium::WebDriver::Error::UnknownError: l is undefined
        from [remote server] file:///C:/DOCUME~1/ADMINI~1/LOCALS~1/Temp/webdrive r-profile20120921-5620-dorvjl/extensions/fxdriver@googlecode.com/components/comm and_processor.js:9497:in `unknown'
        from [remote server] file:///C:/DOCUME~1/ADMINI~1/LOCALS~1/Temp/webdrive r-profile20120921-5620-dorvjl/extensions/fxdriver@googlecode.com/components/comm and_processor.js:10131:in `unknown'
        from [remote server] file:///C:/DOCUME~1/ADMINI~1/LOCALS~1/Temp/webdrive r-profile20120921-5620-dorvjl/extensions/fxdriver@googlecode.com/components/comm and_processor.js:10136:in `unknown'
        from [remote server] file:///C:/DOCUME~1/ADMINI~1/LOCALS~1/Temp/webdrive r-profile20120921-5620-dorvjl/extensions/fxdriver@googlecode.com/components/comm and_processor.js:10074:in `unknown'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/s elenium/webdriver/remote/response.rb:52:in `assert_ok'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/s elenium/webdriver/remote/response.rb:15:in `initialize'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/s elenium/webdriver/remote/http/common.rb:59:in `new'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/s elenium/webdriver/remote/http/common.rb:59:in `create_response'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/s elenium/webdriver/remote/http/default.rb:65:in `request'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/s elenium/webdriver/remote/http/common.rb:40:in `call'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/s elenium/webdriver/remote/bridge.rb:598:in `raw_execute'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/s elenium/webdriver/remote/bridge.rb:576:in `execute'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/s elenium/webdriver/remote/bridge.rb:358:in `clickElement'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/selenium-webdriver-2.25.0/lib/s elenium/webdriver/common/element.rb:54:in `click'
        from C:/Ruby192/lib/ruby/gems/1.9.1/gems/watir-webdriver-0.6.1/lib/watir-webdriver/elements/element.rb:108:in `click'
        from (irb):6
        from C:/Ruby192/bin/irb:12:in `<main>'irb(main):007:0> 
```

任何人都可以帮我解决这个问题，因为这完全不在我的脑海中。

我正在使用的 Watir 代码是一个简单的链接点击代码，其文本

```
browser.link(:text, "MyLink").click 
```

此外，如果我在 click 方法中传递任何参数，例如：shift 或 :control，它正在工作，它正在单击链接但不是没有参数，它正在使用 watir-webdriver 在 Firefox 中发生

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:11:47.810

由于您的 html 显示了一个锚元素，请改为尝试此操作（我遇到了类似的问题并这样做是为了解决问题）：

```
browser.a(:text, 'MyLink').click 
```

# c# - 如何使用选项卡索引从一个文本框获取另一个文本框的值

> ID：12524638
> 
> 赞同：0
> 
> 时间：2012-09-21T05:17:15.513
> 
> 标签：c#, winforms

我知道这是一个愚蠢的问题，但我仍然想知道它。我有两个文本框，textbox1 和 textbox2。我在 textbox1 中输入了一些文本。现在，当我使用选项卡索引或通过在 textbox2 上单击鼠标从 textbox1 移动到 textbox2 时，我希望文本框一的值应该显示在 textbox2 上。我知道我可以让我们使用鼠标悬停事件。但是，如果我能从你那里得到一些好的意见，那就太好了。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:37:50.240

```
private void textBox1_Leave(object sender, EventArgs e)
    {
        textBox2.Text = textBox1.Text;
    }

    private void textBox2_Enter(object sender, EventArgs e)
    {
        textBox2.Text = textBox1.Text;
    } 
```

# java - 使用 CAS 服务器进行身份验证时排除目录

> ID：12524639
> 
> 赞同：0
> 
> 时间：2012-09-21T05:17:20.223
> 
> 标签：java, cas

我正在使用 CAS 服务器对我的应用程序进行身份验证。我希望排除一个目录以进行身份​​验证。我能怎么做 ？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-22T07:08:24.513

您可以使用您的 CAS 客户端（Jasig 客户端、Spring Security 客户端或 Shiro 客户端）配置应用程序的哪些目录应该受到保护。

# java - JPA OneToMany 双向合并如何？

> ID：12524645
> 
> 赞同：0
> 
> 时间：2012-09-21T05:17:41.333
> 
> 标签：java, jpa

在`@OneToMany`双向中，当`EntityManger`更新具有 的集合的 ProjectValue 时`Task`， `EntityManger`不能删除`Task`内存中程序删除的子项。会`Task`用其他功能删除吗？

```
DataStructure : 

    In ProjectPlan Table :
        PRPJ0001, First Poject
    In Task Table :
        AAA, AAA, PRPJ0001
        BBB, BBB, PRPJ0001
        CCC, CCC, PRPJ0001
    In Memory :
        PRPJ0001, First Poject
            AAA, AAA, PRPJ0001          -->  No Changes
            BBB, Change Name, PRPJ0001  -->  Need to update
                                        -->  Need to delete CCC
            NEW, NEW, PRPJ0001          -->  Need to add 

    Problem : Entity Manger cannot delete CCC;

    @Entity
    public class ProjectPlan {
        @Id
        private String id;
        private String name;
        @OneToMany(mappedBy = "projectPlan", targetEntity = Task.class, cascade = {CascadeType.ALL})
        private List<Task> taskList;

        public ProjectPlan(){}

        public ProjectPlan(String id, String name, List<Task> taskList) {
            this.id = id;
            this.name = name;
            this.taskList = taskList;
        }
        //getter & setter
    }

    @Entity
    public class Task {
        @Id
        private String id;
        private String name;
        @ManyToOne(targetEntity = ProjectPlan.class, cascade = {CascadeType.REFRESH})
        @JoinColumn(name = "projectId", referencedColumnName = "ID")
        private ProjectPlan projectPlan;

        public Task(){
        }

        public Task(String id, String name, ProjectPlan projPlan) {
            this.id = id;
            this.name = name;
            this.projectPlan = projPlan;
        }
        // getter & setter
    }

    public class Test {
        public static void main(String[] args) {
            EntityManagerFactory emf = Persistence.createEntityManagerFactory("JPA");
            EntityManager em = emf.createEntityManager();
            /*
             Existing Data in Database
                List<Task> taskList = new ArrayList<Task>();
                ProjectPlan plan = new ProjectPlan("PRPJ0001", "First Poject", taskList);
                Task task1 = new Task("AAA","AAA", plan);
                Task task2 = new Task("BBB","BBB", plan);
                Task task3 = new Task("CCC","CCC", plan);
                taskList.add(task1);
                taskList.add(task2);
                taskList.add(task3);
            */

            em.getTransaction().begin();
            List<Task> taskList = new ArrayList<Task>();
            ProjectPlan plan = em.find(ProjectPlan.class, "PRPJ0001");

            /*Task "AAA" no changes*/
            Task task1 = new Task("AAA","AAA", plan);

            /*Task "BBB" updated info*/
            Task task2 = new Task("BBB","Change Name", plan);

            /*Task "CCC" removed*/

            /*Task "NEW" newly created*/
            Task task3 = new Task("NEW","NEW", plan);
            taskList.add(task1);
            taskList.add(task2);
            taskList.add(task3);

            plan.setTaskList(taskList);

            em.merge(plan);
            em.getTransaction().commit();
            em.close();
        }
    } 
```

如果`Task`有另一个`Sub Task List instance`（递归关系），`Task`也会面临这种情况。我必须检查并检索需要务实删除的任务？你认为`JPA`应该支持这个功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T14:36:59.773

在注释 OneToMany 上使用属性**orphanRemoval 。**

**解释：**

当一对一或一对多关系中的目标实体从关系中删除时，通常希望将删除操作级联到目标实体。此类目标实体被视为“孤儿”，并且 orphanRemoval 属性可用于指定应删除的孤儿实体。

```
@Entity
public class ProjectPlan {
    @Id
    private String id;
    private String name;
    @OneToMany(mappedBy = "projectPlan", cascade = {CascadeType.ALL}, orphanRemoval=true)   // --> new attribute
    private List<Task> taskList;

    public ProjectPlan(){}

    public ProjectPlan(String id, String name, List<Task> taskList) {
        this.id = id;
        this.name = name;
        this.taskList = taskList;
    }
    //getter & setter
}

@Entity
public class Task {
    @Id
    private String id;
    private String name;
    @ManyToOne(cascade = {CascadeType.ALL})
    @JoinColumn(name = "projectId", referencedColumnName = "ID")
    private ProjectPlan projectPlan;

    public Task(){
    }

    public Task(String id, String name, ProjectPlan projPlan) {
        this.id = id;
        this.name = name;
        this.projectPlan = projPlan;
    }
    // getter & setter
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T08:06:52.627

双向关联具有所有者方和反方。Hibernate 查看所有者方以了解是否存在关联。所有者方是**没有**`mappedBy`属性的一方。因此，在这种情况下，所有者方是 Task。

因此，如果要将任务 CCC 从其项目计划中分离出来，则必须将其`projectPlan`字段设置为空。如果要删除任务 CCC，则必须使用 删除它`em.remove()`。

# objective-c - 确定发件人ID的方法

> ID：12524649
> 
> 赞同：4
> 
> 时间：2012-09-21T05:18:16.777
> 
> 标签：objective-c, sender, iboutletcollection

我有有效的代码，但我想确保我做事正确而干净。

我在屏幕上显示了相同视图集合的四个版本。每个集合将用于控制四种不同声音的音量和速率。这些集合通过 IBOutletCollection 链接到 4 个不同的 NSArray（soundView0、soundView1、soundView2、soundView3）。

我使用以下代码来确定正在调整哪个音量滑块：

```
-(IBAction)whichVolume:(UISlider *)sender
{
    if ([soundView0 containsObject:sender]) {
        soundIndex = 0;
    }
    else if (([soundView1 containsObject:sender]))
    {
        soundIndex = 1;
    }
else if ([soundView2 containsObject:sender])
{
    soundIndex = 2;
}
    else if ([soundView3 containsObject:sender])
{
    soundIndex = 3;
}
    //send a message to set volume of sound at index soundIndex
    NSLog(@"The soundIndex is %d", soundIndex);
    NSLog(@"The volume is %f", [sender value]);
} 
```

我做对了吗，还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:31:42.327

您可以使用`tag`属性在控件上设置数字索引，然后简单地`sender.tag`在事件回调中使用。

# c++ - 对虚拟表的困惑

> ID：12524650
> 
> 赞同：1
> 
> 时间：2012-09-21T05:18:17.297
> 
> 标签：c++, polymorphism, vtable

我在面试中被问到这个问题。以下程序创建了多少个虚拟表，每种情况下的输出是什么。

```
#include <iostream> 
using namespace std;
class A
{
 virtual void func1()
 {
  cout << "0 " <<endl;
 }

 virtual void func2()
 {
  cout << "1 " <<endl;
 }
};

 class B:Public A
 {
  void func1()
  {
   cout << "2" <<endl;
  }
 };

class C:public B
{
 virtual void func2()
 {
  cout << "3" <<endl;
 }
}

int main()
{
A* objA;

B objB ;
C objC ;

//case1:
objA = &objB;
objA->func1();
//case2:
objA = &objC;
objA->func2();
objA->func1();
return 0;
} 
```

我对 B 类感到困惑。它是否为 B 类创建了一个 vtable？在这种情况下将调用哪个函数。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T07:07:49.047

看评论

```
// I'll pretend you have a #include <stdio.h> here

class A
{
 virtual void func1()
 {
  print 0; // error!!  I'll pretend this was puts("0");
 }

 virtual void func2()
 {
  print1;  // error!!  I'll pretend this was puts("1"); 
 }
};

// there is a virtual table for class A. (for two virtual methods)

 class B:Public A
 {
  void func1()
  {
   print2; // error!!  I'll pretend this was puts("2"); 
  }
 };

// there is a virtual table for class B. (for two virtual methods)

class C:public B
{
 virtual void func2()
 {
  print 3; // error!!  I'll pretend this was puts("3"); 
 }
}

// there is a virtual table for class C. (for two virtual methods)

int main()
{
A objA;
B* objB = new B();

C* objC = new C();

//case1:
objA = &objB;   // error!! left side of type A right side of type B**
objA->func1();  // error!!  operator -> on non pointer

//case2:
objA = &objC;  // error!! left side of type A right side of type B**
objA->func2(); // error!!  operator -> on non pointer
objA->func1(); // error!!  operator -> on non pointer
return 0;
}

// nothing is printed 
```

由于您编辑了 OP 代码，因此这是新版本代码的答案。看评论：

```
#include <iostream> 
using namespace std;
class A
{
 virtual void func1()
 {
  cout << "0 " <<endl; // it's ok, but is the space supposed to be there?
 }

 virtual void func2()
 {
  cout << "1 " <<endl; // it's ok, but is the space supposed to be there?
 }
};
// there is a virtual table for class A. (for two virtual methods)

 class B:Public A  // error!! I'll pretend Public was public (lowercase)
 {
  void func1()
  {
   cout << "2" <<endl; // it's ok, but here there's no space, is that correct?
  }
 };
// there is a virtual table for class B. (for two virtual methods)

class C:public B
{
 virtual void func2()
 {
  cout << "3" <<endl; // it's ok, but here there's no space, is that correct?
 }
}
// there is a virtual table for class C. (for two virtual methods)

int main()
{
A* objA;

B objB ;
C objC ;

//case1:
objA = &objB;
objA->func1(); // outputs (to stdout) a '2' (two) and whatever a 
               // newline is on your system (could be '\r' or '\n' or both
               // or in fact anything your platform defines a newline is)
               // stdout is then flushed.
//case2:
objA = &objC;
objA->func2(); // outputs (to stdout) a '3' (three) and whatever a 
               // newline is on your system (could be '\r' or '\n' or both
               // or in fact anything your platform defines a newline is)
               // stdout is then flushed.

objA->func1(); // outputs (to stdout) a '2' (two) and whatever a 
               // newline is on your system (could be '\r' or '\n' or both
               // or in fact anything your platform defines a newline is)
               // stdout is then flushed.
return 0;
}
// the output is '2' <newline> '3' <newline> '2' <newline> 
// where the actual character(s) for <newline> are platform dependent 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:31:56.487

B 类的实例也是 A 类的实例。您的 B 类调用 A 类的构造函数，如果 B 没有从 A 覆盖 func1()，则 B 具有虚拟 func2() 和 A 的 func1() 覆盖。

# uitableview - 如何将 UIImage 设置为 UITableView Cell，它根据我在 UILabel 中输入的文本动态计算单元格高度？

> ID：12524652
> 
> 赞同：1
> 
> 时间：2012-09-21T05:18:20.883
> 
> 标签：uitableview, uiimageview, uilabel, cgrect

我正在创建 UITableView，其中每个单元格大小将根据我输入的文本进行计算。我正在计算 heighForRowAtIndexPath 中单元格的大小

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath;
{
    NSString *text = [tableData objectAtIndex:[indexPath row]];

    CGSize constraint = CGSizeMake(210.0f, 20000.0f);
    size = [text sizeWithFont:[UIFont systemFontOfSize:12.0f] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

    height = MAX(size.height, 44.0f);

    return height + (CCM * 2);
} 
```

这就是我计算每个单元格高度的方式，现在我的问题是 - 我想像评论框一样向每个单元格添加图像？像这样 [点击这里查看我正在寻找的评论框](http://2.s3.envato.com/files/149908.jpg)

你可以看到这些评论框我所做的是我把我的图像分成两部分第一个有顶部，它在每个单元格上都运行良好，现在开始图像正在出现，同时修复底部我面临单元格 UILable 中小文本的问题当 UILabel 中的文本大小增加时运行良好，它没有得到正确调整

```
-(UITableViewCell *) tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *identifier = @"cell";

    NSLog(@"index path %d", indexPath.row);

    MyTableCell *cell = (MyTableCell *)[tableView dequeueReusableCellWithIdentifier:identifier];

    if (cell == nil) 
    {
        cell = [[[MyTableCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:identifier] autorelease];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    [cell.cellBackgroundBottom setFrame:CGRectMake(75.0f, 92.0f, 228.0f, height + 25.0f)];

    [cell.cellContent setText:(NSString*)[tableData objectAtIndex:[indexPath row]]];
    [cell.cellContent sizeToFit];

    CGRect theFrame = [cell.cellContent frame];
    theFrame.size.width = 210.0f;
    [cell.cellContent setFrame: theFrame];

    return cell;
} 
```

我创建了一个名为 MYTableCell 的 UITableView 子类，我在其中定义了每个单元格中需要的所有内容。

```
 // Creating UILabel for cell content or comments block

        cellContent = [[UILabel alloc]initWithFrame: CGRectMake( 90.0f, 15.0f, 210.0f, 60.0f)] ;
        [cellContent setLineBreakMode:UILineBreakModeWordWrap];
        cellContent.numberOfLines = 0;
        [cellContent setMinimumFontSize:15.0f];
        [cellContent setBackgroundColor:[UIColor clearColor]];
        //   [cellContent setTextColor:[UIColor colorWithRed:73.0f green:73.0f blue:73.0f alpha:1.0f]];
        [cellContent setFont:[UIFont fontWithName:@"Helvetica" size:12.0f]];
        cellContent.textAlignment = UITextAlignmentLeft;
        [cellContent setTag:1];
        [self addSubview:cellContent];
        [cellContent release];

        cellBackgroundTop = [[UIImageView alloc] initWithFrame:CGRectMake(60.0f, 5.0f, 243.0f, 13.5f)];
        [cellBackgroundTop setImage:[UIImage imageNamed:@"comments.png"]];
        [self addSubview:cellBackgroundTop];
        [cellBackgroundTop release];

        cellBackgroundBottom = [[UIImageView alloc] initWithFrame:CGRectZero];
        [cellBackgroundBottom setImage:[UIImage imageNamed:@"Untitled-1_09.png"]];
        [self addSubview:cellBackgroundBottom];
        [cellBackgroundBottom release]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T07:29:34.550

我的问题得到了答案。这就是我在 cellForRowAtIndexPath 中必须做的事情

```
 NSString *text = [tableData objectAtIndex:[indexPath row]];

    CGSize constraint = CGSizeMake(210.0f, 20000.0f);

    CGSize size1 = [text sizeWithFont:[UIFont systemFontOfSize:12.0f] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];

    CGFloat height1 = MAX(size1.height, 44.0f);

    [cell.cellBackgroundBottom setFrame:CGRectMake(75.0f, 18.0f, 228.0f, height1 + 10.0f)]; 
```

# php - php move_uploaded_file 强制赋予新名称

> ID：12524656
> 
> 赞同：0
> 
> 时间：2012-09-21T05:19:31.257
> 
> 标签：php

我正在尝试使用 php 上传文件，代码片段

```
$upload_path = "/var/upload/" . $_FILES['mfile']['name'];
if(move_uploaded_file($_FILES['mfile']['tmp_name'], $upload_path))
    echo "file uploaded";
else
    echo "upload failed"; 
```

注意：/var/upload 目录存在且拥有 777 权限。

代码打印“上传失败”

当我检查 /var/upload 目录时，有文件 f_505bf77bd8a0f_mypdf.pdf。什么地方出了错？

添加日志（根据loler的要求）：

```
[Fri Sep 21 10:58:31 2012] [error] [client ::1] PHP Notice:  Undefined variable: showdebug in /Volumes/data/htdocs/ebeu/upload.php on line 558, referer: http://localhost/upload/test/upload.php
[Fri Sep 21 10:58:31 2012] [error] [client ::1] PHP Notice:  Undefined variable: showdebug in /Volumes/data/htdocs/ebeu/upload.php on line 559, referer: http://localhost/upload/test/upload.php
[Fri Sep 21 10:58:31 2012] [error] [client ::1] PHP Notice:  Undefined index: accessories in /var/www/my/web/folder/myupload.php on line 21, referer: http://localhost/upload/test/upload.php
[Fri Sep 21 10:58:31 2012] [error] [client ::1] PHP Notice:  Undefined index: pmaterial in /var/www/my/web/folder/myupload.php on line 27, referer: http://localhost/upload/test/upload.php
[Fri Sep 21 10:58:31 2012] [error] [client ::1] PHP Notice:  Undefined index: occupation_bwc in /var/www/my/web/folder/myupload.php on line 33, referer: http://localhost/upload/test/upload.php
[Fri Sep 21 10:58:31 2012] [error] [client ::1] PHP Notice:  Undefined index: occupation_bwc in /var/www/my/web/folder/myupload.php on line 75, referer: http://localhost/upload/test/upload.php
[Fri Sep 21 10:58:31 2012] [error] [client ::1] PHP Notice:  Undefined index: occupation_spec in /var/www/my/web/folder/myupload.php on line 75, referer: http://localhost/upload/test/upload.php
[Fri Sep 21 10:58:31 2012] [error] [client ::1] PHP Notice:  Undefined index: babycarrier in /var/www/my/web/folder/myupload.php on line 78, referer: http://localhost/upload/test/upload.php
[Fri Sep 21 10:58:31 2012] [error] [client ::1] PHP Notice:  Undefined variable: accessories_all in /var/www/my/web/folder/myupload.php on line 79, referer: http://localhost/upload/test/upload.php
[Fri Sep 21 10:58:31 2012] [error] [client ::1] PHP Notice:  Undefined variable: pmaterials_all in /var/www/my/web/folder/myupload.php on line 80, referer: http://localhost/upload/test/upload.php 
```

**添加了 var_dump($_FILES)**

```
array(1) {
  ["mfile"]=&gt;
  array(5) {
    ["name"]=&gt;
    string(23) "mypdf.pdf"
    ["type"]=&gt;
    string(15) "application/pdf"
    ["tmp_name"]=&gt;
    string(26) "/var/tmp/phpUl6k50"
    ["error"]=&gt;
    int(0)
    ["size"]=&gt;
    int(478704)
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:40:16.027

试试这个代码来上传你的文件..

```
if (file_exists("/var/upload/" . $_FILES["file"]["name"]))
  {
  echo $_FILES["file"]["name"] . " already exists. ";
  }
else
  {
  move_uploaded_file($_FILES["file"]["tmp_name"],
  "/var/upload/" . $_FILES["file"]["name"]);
  echo "Stored in: " . "/var/upload/" . $_FILES["file"]["name"];
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:10:17.013

在你`var_dump()`那里的`$_FILES["file"]["name"]`长度是 23，但它应该是 9。所以试试`trim`这个字符串。代替

```
$upload_path = "/var/upload/" . $_FILES['mfile']['name']; 
```

试着写

```
$upload_path = "/var/upload/" . trim($_FILES['mfile']['name']); 
```

# java - 填充和排序列表

> ID：12524661
> 
> 赞同：1
> 
> 时间：2012-09-21T05:20:06.240
> 
> 标签：java, generics

我正在制作一组自定义摆动组件，它们实现了各种属性，如`required`标志或`tabIndex`. 我在尝试填充`List`各种自定义组件时遇到问题，然后根据`tabIndex`每个组件对列表进行排序。

我试图做到这一点的方法是让我的组件实现一个称为`Indexed`实现单个方法的接口`getIndex()`。然后使用我的`IndexedComparator`.

我的课程：

索引：

```
public interface Indexed {
      public int getIndex();
} 
```

索引比较器：

```
public class IndexedComparator implements Comparator<Indexed> {

    @Override
    public int compare(Indexed o1, Indexed o2) {
        return o1.getIndex() - o2.getIndex();
    }

} 
```

WWTextField：

```
public class WWTextField extends JTextField implements Indexed, FocusListener {
    private boolean required;
    private int tabIndex;

   ...

    @Override
    public int getIndex() {
        return tabIndex;
    }
} 
```

新框架：

```
public class NewJFrame extends JFrame {
    List<? extends Component & Indexed> list = new ArrayList<>();
    IndexedFocusTraversalPolicy policy = new IndexedFocusTraversalPolicy();

    public NewJFrame() {
        initComponents();

        list.add(wWTextField1);
        list.add(wWTextField2);
        list.add(wWTextField3);
        list.add(wWTextField4);
        list.add(wWTextField5);
        list.add(wWFormatedTextField1);
        list.add(wWFormatedTextField2);

        Collections.sort(list);
        policy.populateComponents(list);
        this.setFocusTraversalPolicy(policy);
    }
} 
```

编辑：我忘了发布一个实际问题。为什么我的执行不

```
List<? extends Component & Indexed> list = new ArrayList<>(); 
```

工作？当我尝试编译时，出现以下错误：

```
NewJFrame.java:22: error: > expected  
NewJFrame.java:22: error: ';' expected  
NewJFrame.java:22: error: illegal start of type 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:16:56.803

`Comparator`实例不是“自动的”，您必须指定它们。我想你的意思是：

```
Collections.sort(list, new IndexedComparator()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:31:51.463

仅在声明类型参数的情况下才允许使用约束（即 , `class C< T extends I & J > {}`, `interface E< T extends I & J > {}`）`< T extends I & J > void f() {}`。

因此，您只能提供交叉点类型名称。这个非特性是让我对 Java 感到困扰的众多事情之一。

我想`NewJFrame`可能是泛型 in `T extends Component & Indexed`，并且`list`可能有 type `List< T >`。在某些情况下，类型推断可以让客户端代码避免指定特定类型。

# android - 在我的 android 应用程序中包含 javax.sound.midi

> ID：12524663
> 
> 赞同：0
> 
> 时间：2012-09-21T05:20:09.540
> 
> 标签：android

在android中使用midi文件面临问题

```
i am unable to find the javax.sound.midi jar file  ..  any where  in google..
from where do i find this jar.

and how do i include this jar

i want the sheet music from  midi files  but  i did'nt get any sample or solution   ..in        android  

plz help me 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T06:06:23.380

javax.sound.midi 库未在 Android 平台上分发也不支持。但是，有一个可用于 Android 项目的 MIDI 文件格式的 Java 实现：

[http://code.google.com/p/android-midi-lib/](http://code.google.com/p/android-midi-lib/)

根据您的具体需求，这可能还不够，但这肯定是一个开始。

# android - 无法在本机活动应用程序中加载具有依赖项的本机共享库

> ID：12524664
> 
> 赞同：8
> 
> 时间：2012-09-21T05:20:21.173
> 
> 标签：android, linker, android-ndk, native-activity

在我的 Android 应用程序中，我有 4 个库：

```
libTemplate.so
   depends on libPorkholt.so
libPorkholt.so
   depends on libpng15.so
   depends on liblua.so
   depends on libopenal.so
libpng15.so
liblua.so
libopenal.so 
```

如果我编写一个与 libTemplate 链接并手动调用 ANativeActivity_onCreate 的小型命令行可执行文件，它会链接并运行得很好（如果我将 LD_LIBRARY_PATH 指向 /data/data/com.mycompany.Template/lib）

如果我运行我的应用程序，我会收到这个非常有用的错误消息：

```
E/AndroidRuntime(13214): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.mycompany.Template/android.app.NativeActivity}: java.lang.IllegalArgumentException: Unable to load native library: /data/data/com.mycompany.Template/lib/libTemplate.so 
```

它甚至没有输入 ANativeActivity_onCreate，所以我唯一的猜测是它与链接有关

我可能应该提到我正在使用带有这个脚本的 CMake：[http](http://code.google.com/p/android-cmake/) ://code.google.com/p/android-cmake/来自己构建库（没有 ndk-build）。我设法用它编译了本机活动示例，所以我知道它有效。

另外，我确保没有库在其 soname 中包含版本号

我的清单：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- BEGIN_INCLUDE(manifest) -->
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
        package="com.mycompany.Template"
        android:versionCode="1"
        android:versionName="1.0">

    <!-- This is the platform API where NativeActivity was introduced. -->
    <uses-sdk android:minSdkVersion="9" />

    <!-- This .apk has no Java code itself, so set hasCode to false. -->
    <application android:label="Template Porkholt project" android:hasCode="false">

        <!-- Our activity is the built-in NativeActivity framework class.
             This will take care of integrating with our NDK code. -->
        <activity android:name="android.app.NativeActivity"
                android:label="Template Porkholt project"
                android:configChanges="orientation|keyboardHidden">
            <!-- Tell NativeActivity the name of or .so -->
            <meta-data android:name="android.app.lib_name"
                    android:value="Template" />
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
<!-- END_INCLUDE(manifest) --> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-22T14:53:05.937

由于显然 Android 不够聪明，无法正确设置 LD_LIBRARY_PATH，因此我设法通过创建一个手动加载实际活动的小型引导程序库来解决我的问题。这是代码：

```
#include <android/native_activity.h>
#include <android/log.h>
#include <dlfcn.h>
#include <errno.h>
#include <stdlib.h>

#define LOGI(...) ((void)__android_log_print(ANDROID_LOG_INFO, "Porkholt", __VA_ARGS__))
#define LOGE(...) ((void)__android_log_print(ANDROID_LOG_ERROR, "Porkholt", __VA_ARGS__))

#define LIB_PATH "/data/data/@PH_BUNDLE_ID@/lib/"

void * load_lib(const char * l)
{
    void * handle = dlopen(l, RTLD_NOW | RTLD_GLOBAL);
    if (!handle)
    {
        LOGE("dlopen(\"%s\"): %s", l, strerror(errno));
        exit(1);
    }
    return handle;
}

void ANativeActivity_onCreate(ANativeActivity * app, void * ud, size_t udsize)
{
    LOGI("Loaded bootstrap");
    load_lib(LIB_PATH "libpng15.so");
    load_lib(LIB_PATH "liblua.so");
    load_lib(LIB_PATH "libopenal.so");
    load_lib(LIB_PATH "libPorkholt.so");
    void (*main)(ANativeActivity*, void*, size_t) = dlsym(load_lib(LIB_PATH "lib@PH_APP_TARGET@.so"), "ANativeActivity_onCreate");
    if (!main)
    {
        LOGE("undefined symbol ANativeActivity_onCreate");
        exit(1);
    }
    main(app, ud, udsize);
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T12:29:38.223

我认为 Android 不会自动加载清单中指定的库以外的库，因此您应该创建一个“虚拟”Java 类来加载外部依赖项，它应该包含：

```
static {
    System.loadLibrary("openal");
    System.loadLibrary("lua");
    System.loadLibrary("png15");
    System.loadLibrary("Porkholt");
    System.loadLibrary("Template");
} 
```

由于此部分是静态的，因此将在加载类时执行，即使它的方法没有被调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-15T20:15:51.577

这不再影响 API 24+（请参阅[此处](https://android.googlesource.com/platform/frameworks/base/+/048a0db7b512326d0fae0efa7fef7ea2d17a3dd8%5E%21/#F2)的框架修复）。但是，如果您需要支持旧版本，请扩展`NativeActivity`，请在清单文件中引用您的扩展，并将[Sdra 的答案](https://stackoverflow.com/a/12530676/595881)`static`中提到的块添加为解决方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T09:22:38.480

您的 Activity 可能有一个调用 System.Load("libTemplate.so") 的静态构造函数。它应该根据依赖顺序加载其他库。

# java - 这个执行流程怎么可能？

> ID：12524668
> 
> 赞同：2
> 
> 时间：2012-09-21T05:21:14.163
> 
> 标签：java, spring, tomcat

我有一个非常简单的 Java webapp，它在开发系统上表现出一些非常奇怪的行为。问题从注册处理程序开始，它的实现如下：

```
//XXX:  this shouldn't really be 'synchronized', but I've declared it as such 
//      for the sake of debugging this issue
public synchronized ModelAndView submitRegister(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    String email = request.getParameter("email");
    String pass = request.getParameter("pass");
    String conf = request.getParameter("conf");
    String name = request.getParameter("name");

    EntityManager em = DatabaseUtil.getEntityManager(request);

    //[make sure required fields are present and valid, etc.]

    User user = getUserForEmail(email, em);
    if (user != null) {
        //[user already exists, go to error page]
    }

    //create the new user
    em.getTransaction().begin();
    try {
        user = new User();
        //[set fields, etc.]
        em.persist(user); 

        //[generate e-mail message contents]
        boolean validEmail = EmailUtility.sendEmail(admin, recip, subject, message, null, recip);
        if (validEmail) {

            em.getTransaction().commit();
            //[go to 'registration successful' page]
        }

        em.getTransaction().rollback();
        //[go to error page]
    }
    catch (Exception e) {
        em.getTransaction().rollback();
        //[go to error page]
    }
} 
```

问题出现在`EmailUtility.sendEmail()`通话中。此方法的代码非常简单：

```
public static boolean sendEmail(String fromAddress, String to, String subject, String message, String fromHeaderValue, String toHeaderValue) {
    try {
        Session session = getMailSession(to);
        Message mailMessage = new MimeMessage(session);
        mailMessage.setFrom(new InternetAddress(fromAddress));
        if (fromHeaderValue != null) {
            mailMessage.setHeader("From", fromHeaderValue);
        }
        if (toHeaderValue != null) {
            mailMessage.setHeader("To", toHeaderValue);
        }
        mailMessage.setHeader("Date", new Date().toString());
        mailMessage.setRecipients(RecipientType.TO, InternetAddress.parse(to, false));
        mailMessage.setSubject(subject);
        mailMessage.setContent(message, "text/html;charset=UTF-8");
        Transport.send(mailMessage);
        return true;
    } catch (Throwable e) {
        LOG.error("Failed to send e-mail!", e);
        return false;
    } 
} 
```

发生的情况是，当代码到达调用时`EmailUtility.sendEmail()`，不是调用该方法，而是*通过 submitRegister() 递归执行*。这很容易成为我见过的最奇怪的事情之一。

有一段时间我什至不相信那是实际发生的事情。但此时我已经通过同步所涉及的方法并在两种方法的每一行添加打印语句来确认它。 `submitRegister()`递归，并且`sendEmail()`永远不会被调用。我不知道这怎么可能。

令人沮丧的是，*完全相同的代码*运行在生产服务器上。仅在开发系统上才会出现此问题。

欢迎任何有关可能导致此问题的原因以及我可以做些什么来解决它的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:46:49.693

你是对的，这是不可能的 :) 如果你不喜欢调试，我建议你去掉所有其他代码，进行大量日志记录，看看会发生什么。从以下内容开始：

```
public synchronized ModelAndView submitRegister(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    LOG.debug("submitRegister: " + this.toString);
    EmailUtility.sendEmail("a@x.y", "b@x.y", "subject", "message", "from", "to");
}

public static boolean sendEmail(String fromAddress, String to, String subject, String message, String fromHeaderValue, String toHeaderValue) {
    LOG.debug("sendEmail: " + this.toString());
} 
```

`toString`它将向您显示所涉及的课程。我的猜测是：

*   您的第一次通话失败，因此`sendEmail`永远不会被调用
*   `submitRegister`由其他人多次触发，而不是由`EmailUtility.sendEmail`语句触发。

如果您让剥离的版本正常工作，请开始放回您的代码，一次一次和平，看看哪里出了问题:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T07:07:29.187

好的，我将此归结为几个不同的问题一起工作：

1.  在开发系统上，缺少类路径`javax.mail.Address`。这导致`EmailUtility`类无法初始化，并且会`NoClassDefFoundError`在`sendEmail()`调用中抛出一个，然后该方法的任何代码都可以执行。

2.  中的代码`submitRegister()`有一个`catch Exception`块，但`NoClassDefFoundError`extends `Error`，而不是`Exception`. 所以它`catch Exception`完全绕过了这个障碍。

3.  实际捕获的 Spring 控制器`Error`有一些我遇到过的最可疑的“错误处理”代码：

    ```
    try {
        Method serviceMethod = this.getControllerClass().getMethod(method, HttpServletRequest.class, HttpServletResponse.class);
        if (this.doesMethodHaveAnnotation(serviceMethod, SynchronizedPerAccount.class)) {
            synchronized(this.getAccountLock(request)) {
                super.doService(request, response);
            }
        }
        else {
            //don't need to execute synchronously
            super.doService(request, response);
        }
    }
    catch (Throwable ignored) {
        super.doService(request, response);
    } 
    ```

因此，它`NoClassDefFoundError`正在传播回 Spring 控制器，该控制器正在捕获它并尝试重新调用该`doService()`方法，从而导致`submitRegister()`再次被调用。这不是递归（尽管无法通过仅查看调试输出来判断），而是 Spring 控制器为同一个请求调用了两次。对于给定的请求，它从未被调用超过两次，因为在第二次`doService()`调用周围没有尝试/捕获。

长话短说，我修补了这些问题并解决了问题。

# build - 离线 TFS 变更集/修订信息

> ID：12524669
> 
> 赞同：3
> 
> 时间：2012-09-21T05:21:24.983
> 
> 标签：build, tfs, offline, revision

我正在寻找一种在构建时从 TFS 工作区提取变更集编号或修订号信息的方法，同时可能从 TFS 服务器脱机。

具体问题如下。我正在尝试将跨平台（Linux/g++/make 和 Windows/VS2010）C++ 代码库从 SVN 移植到 TFS。作为构建过程的一部分，Makefile（在 Linux 端）或 VS 构建属性设置为自动创建一个“版本”文件，其中包含 svnversion 或 SubWCRev 命令的过滤输出。此信息不仅用于报告主要可执行文件的修订号和修改状态，还用于报告构建并用于链接的组件静态库。

一个复杂的问题是我们的 TFS 服务器在 VPN 的末端处于另一种状态，并且不可靠。能够在未连接到 TFS 服务器的情况下在本地构建代码非常重要。TF 命令行工具，据我所知，坚持尝试建立连接，或者报告我没有访问远程资源的权限。

当前的 VS/TortoiseSVN 方法只有一个自定义构建步骤（在“PreBuildEvent”之后执行），它调用 SubWCRev 然后过滤输出以使其与 svnversion 的输出兼容，最后将其写入头文件：

```
set bv=$(IntDir)\$(ProjectName)_bv.h
SubWCRev "$(SolutionDir)\..\$(ProjectName)" | sed "s/:/ /g" | gawk "/revision/ {r=%24(NF)} /modifications/ {m=\"M\"} END {print \"#define $(ProjectName)_bv \\\"\" r m \"\\\"\"}" > "%bv%.tmp"
fc "%bv%" "%bv%.tmp" 2>nul >nul || copy "%bv%.tmp" "%bv%" 
```

任何人都可以提供与间歇连接的 TFS 一起使用的类似直接解决方案吗？

任何帮助深表感谢！

# orchardcms - 果园模块可以放在单独的文件夹中吗？

> ID：12524676
> 
> 赞同：1
> 
> 时间：2012-09-21T05:23:06.387
> 
> 标签：orchardcms

是否可以将果园模块放在与网站完全不同的文件夹中，以便多个果园网站可以共享文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:35:05.370

是的，如果您编写自己的扩展加载器。目前有一个用于主题，一个用于核心模块，一个用于模块。

# python - 从 SQL 表定义创建 django 模型

> ID：12524678
> 
> 赞同：1
> 
> 时间：2012-09-21T05:23:26.020
> 
> 标签：python, mysql, django

```
CREATE TABLE `defendant_company_potential` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `company_name` varchar(100) NOT NULL,
  `address` varchar(100) DEFAULT NULL,
  `city` varchar(50) DEFAULT NULL,
  `state` varchar(4) DEFAULT NULL,
  `zip` varchar(20) DEFAULT NULL,
  `email` varchar(50) DEFAULT NULL,

  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_defendant_potential_company` (`company_name`,`address`,`city`,`state`),
  KEY `fk_jurisdiction_company` (`jurisdiction_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `defendant_defendant_company_potential_map` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `defendant_id` int(11) NOT NULL,
  `defendant_company_potential_id` int(11) NOT NULL,
  `defendant_company_potential_correspondance_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_defendant_defendant_company`
  (`defendant_id`,`defendant_company_potential_id`),
  CONSTRAINT `defendant_id_fk_map` FOREIGN KEY (`defendant_id`) REFERENCES `defendant`(`id`),
  CONSTRAINT `defendant_company_potential_id_fk_map` FOREIGN KEY (`defendant_company_potential_id`) REFERENCES `defendant_company_potential`(`id`)
  CONSTRAINT `defendant_company_potential_correspondance_id_fk` FOREIGN KEY (`defendant_company_potential_correspondance_id`) REFERENCES `defendant_company_potential_correspondance`(`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

CREATE TABLE `defendant_company_potential_correspondance` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `defendant_id` int(11) NOT NULL,
  `defendant_company_potential_id` int(11) NOT NULL,
  `mailed_count` int(11) DEFAULT NULL,
  `phoned_date` datetime DEFAULT NULL,
 PRIMARY KEY (`id`),
  UNIQUE KEY `uk_potential_correspondance`     (`defendant_id`,`defendant_company_potential_id`),
  CONSTRAINT `defendant_id_fk` FOREIGN KEY (`defendant_id`) REFERENCES `defendant`(`id`) ON DELETE NO ACTION ON UPDATE NO ACTION,
  CONSTRAINT `defendant_company_potential_id_fk` FOREIGN KEY (`defendant_company_potential_id`)
  REFERENCES `defendant_company_potential`(`id`) ON DELETE NO ACTION ON UPDATE NO ACTION
) 
```

被告表只有一个字段名，PK是它的ID。

我的问题是我应该如何在 Django 中制作该地图表（我无法更改表结构）？？？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T09:04:42.857

查看[集成现有数据库的文档](https://docs.djangoproject.com/en/1.4/howto/legacy-databases/#auto-generate-the-models)。

看起来您应该能够创建数据库表，然后让 django 检查它并创建模型。

```
python manage.py inspectdb > models.py 
```

# jquery - jquery绑定问题

> ID：12524679
> 
> 赞同：0
> 
> 时间：2012-09-21T05:23:26.753
> 
> 标签：jquery, events, selector, bind

我正在设置一个 jquery 函数来将多个选择器绑定到多个事件，但是它似乎只适用于一个事件而不是另一个，这是我的脚本：

```
$('input[id*=_other]').parent().siblings().children().addClass('code');
$('.code, input[id*=_other]').bind('click, keyup', function(){

  $(this).each(function(){

    if ($(this).hasClass('code')) {
      if($(this).is(':checked')){
        alert('click')
      }
      else {

      } //not working
    }

    else if ($(this).val().length > 0) {
      alert('entered')
    }

    else {

    } //working

  });
}); 
```

html部分看起来像：

```
<th class="gridlabel">other specify 1<input size="15" tabindex="21" name="q62_5_other" class="other_input" id="q62_5_other" type="text" value="asd"/></th>
    <td headers="q62_header1" class="gridcell"><input tabindex="22" type="radio" name="q62_5" id="q62_5_1" value="1"/></td>
    <td headers="q62_header2" class="gridcell"><input tabindex="23" type="radio" name="q62_5" id="q62_5_2" value="2"/></td>
    <td headers="q62_header3" class="gridcell"><input tabindex="24" type="radio" name="q62_5" id="q62_5_3" value="3"/></td>
    <td headers="q62_header4" class="gridcell"><input tabindex="25" type="radio" name="q62_5" id="q62_5_4" value="4"/></td>
    <td headers="q62_header5" class="gridcell"><input tabindex="26" type="radio" name="q62_5" id="q62_5_5" value="5"/></td> 
```

所以它是一个打开的文本框，然后是表格单元格中的 5 个单选按钮，都在一行中。

如果单击了 5 个单选按钮中的任何一个，我希望“单击”警报出现，如果已键入打开的文本框，则“已输入”警报出现。

打开文本框的警报当然可以工作，如果我只有“.bind('click', function{...”而不是“click”和“keyup”)，单选按钮的警报也可以工作。

不确定如何使用上述脚本的修改版本来实现这两种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:26:50.327

不需要逗号。它应该是：

```
$('...').bind('click keyup', function() {...}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:28:11.543

不应该使用逗号...而不是这个

```
bind('click, keyup', function(){ 
```

试试这个

```
bind('click keyup', function(){ 
```

# java - 使用 BroadcastReceiver 获取 GPS 数据时是否需要插入 SIM 卡？

> ID：12524680
> 
> 赞同：0
> 
> 时间：2012-09-21T05:23:29.337
> 
> 标签：java, android

在我的 Android 应用程序中，我想使用 BroadcastReceiver 获取 GPS 数据。如果我在没有插入 SIM 卡的设备上进行测试，我将无法获取 GPS 数据。所以，我的问题是：是否需要在设备中插入 SIM 卡才能获取 GPS 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:27:39.977

您无需访问任何网络即可在 Android 上获取 GPS 位置。但需要互联网连接。

所以首先检查以下几点。

*   您已将 ACCESS_FINE_LOCATION 添加到清单的权限
*   GPS 卫星在手机的设置中启用。
*   检查您是否不在室内（来自 20,000 公里以上卫星的信号不喜欢屋顶和墙壁）

# .net - 使用 openxml sdk 将图像添加到 Excel

> ID：12524687
> 
> 赞同：0
> 
> 时间：2012-09-21T05:24:19.827
> 
> 标签：.net, excel, export-to-excel, openxml-sdk

我正在尝试在生成电子表格后将图像添加到由 closedxml 使用 openxml 生成的 excel 文档中（因为 closedxml 目前无法插入图像）。

我可以正确生成 excel 文件，并且打开正常，但是当我尝试将图像插入并尝试在 excel 中打开它时会出错。

我使用了一个小型控制台应用程序，发现错误是

```
Error 1
Description: The element has unexpected child element 'http://schemas.openxmlfor
mats.org/spreadsheetml/2006/main:drawing'.
Path: /x:worksheet[1]
Part: /xl/worksheets/sheet.xml
------------------------------------------- 
```

电子表格如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<x:worksheet xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x="http://schemas.openxmlformats.org/spreadsheetml/2006/main">
    <x:sheetPr>
        <x:outlinePr summaryBelow="1" summaryRight="1" />
    </x:sheetPr>
    <x:dimension ref="A1:M4" />
    <x:sheetViews>
        <x:sheetView tabSelected="0" workbookViewId="0" />
    </x:sheetViews>
    <x:sheetFormatPr defaultRowHeight="15" />
    <x:cols>
        ...
    </x:cols>
    <x:sheetData>
        ...
    </x:sheetData>
    <x:printOptions horizontalCentered="0" verticalCentered="0" headings="0" gridLines="0" />
    <x:pageMargins left="0.75" right="0.75" top="0.75" bottom="0.5" header="0.5" footer="0.75" />
    <x:pageSetup paperSize="1" scale="100" pageOrder="downThenOver" orientation="default" blackAndWhite="0" draft="0" cellComments="none" errors="displayed" />
    <x:headerFooter />
    <x:tableParts count="0" />
    <x:drawing r:id="R701e4d0efd7143ee" />
</x:worksheet> 
```

采取

section out 似乎允许文件正确验证。

我也尝试过手动创建一个空白的 excel 文档并添加一个图像，它看起来非常相似：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="x14ac" xmlns:x14ac="http://schemas.microsoft.com/office/spreadsheetml/2009/9/ac">
    <dimension ref="A1"/>
    <sheetViews>
        <sheetView tabSelected="1" workbookViewId="0">
            <selection activeCell="D14" sqref="D14"/>
        </sheetView>
    </sheetViews>
    <sheetFormatPr defaultRowHeight="15" x14ac:dyDescent="0.25"/>
    <sheetData/>
    <pageMargins left="0.7" right="0.7" top="0.75" bottom="0.75" header="0.3" footer="0.3"/>
    <drawing r:id="rId1"/>
</worksheet> 
```

我注意到的一件事是它们没有生成的命名空间（x），但我不知道这是否导致问题。

谁能看到我错过了什么？

我用来插入图像的代码如下：

```
public static void InsertImage(this Worksheet ws, long x, long y, long? width, long? height, string sImagePath)
{
    try
    {
        var wsp = ws.WorksheetPart;
        var dp = default(DrawingsPart);
        var imgp = default(ImagePart);
        var wsd = default(WorksheetDrawing);

        var ipt = default(ImagePartType);
        switch (sImagePath.Substring(sImagePath.LastIndexOf('.') + 1).ToLower())
        {
            case "png":
                ipt = ImagePartType.Png;
                break; // TODO: might not be correct. Was : Exit Select

                break;
            case "jpg":
            case "jpeg":
                ipt = ImagePartType.Jpeg;
                break; // TODO: might not be correct. Was : Exit Select

                break;
            case "gif":
                ipt = ImagePartType.Gif;
                break; // TODO: might not be correct. Was : Exit Select

                break;
            default:
                return;
        }

        if (wsp.DrawingsPart == null)
        {
            //----- no drawing part exists, add a new one

            dp = wsp.AddNewPart<DrawingsPart>();
            imgp = dp.AddImagePart(ipt, wsp.GetIdOfPart(dp));
            wsd = new WorksheetDrawing();
        }
        else
        {
            //----- use existing drawing part

            dp = wsp.DrawingsPart;
            imgp = dp.AddImagePart(ipt);
            dp.CreateRelationshipToPart(imgp);
            wsd = dp.WorksheetDrawing;
        }

        using (var fs = new FileStream(sImagePath, FileMode.Open))
        {
            imgp.FeedData(fs);
        }

        var imageNumber = 1;
        if (imageNumber == 1)
        {
            var drawing = new Drawing();
            drawing.Id = dp.GetIdOfPart(imgp);
            ws.Append(drawing);
        }

        var nvdp = new NonVisualDrawingProperties();
        nvdp.Id = new UInt32Value(Convert.ToUInt32(1024 + imageNumber));
        nvdp.Name = "Picture " + imageNumber.ToString();
        nvdp.Description = "Picture";
        var picLocks = new PictureLocks();
        picLocks.NoChangeAspect = true;
        picLocks.NoChangeArrowheads = true;
        var nvpdp = new NonVisualPictureDrawingProperties();
        nvpdp.PictureLocks = picLocks;
        var nvpp = new NonVisualPictureProperties();
        nvpp.NonVisualDrawingProperties = nvdp;
        nvpp.NonVisualPictureDrawingProperties = nvpdp;

        var stretch = new Stretch();
        stretch.FillRectangle = new FillRectangle();

        var blipFill = new BlipFill();
        var blip = new Blip();
        blip.Embed = dp.GetIdOfPart(imgp);
        blip.CompressionState = BlipCompressionValues.Print;
        blipFill.Blip = blip;
        blipFill.SourceRectangle = new SourceRectangle();
        blipFill.Append(stretch);

        var t2d = new Transform2D();
        var offset = new Offset();
        offset.X = 0;
        offset.Y = 0;
        t2d.Offset = offset;
        var bm = new Bitmap(sImagePath);

        var extents = new Extents();

        if (width == null)
        {
            extents.Cx = Convert.ToInt64(bm.Width)*
                         Convert.ToInt64(Math.Truncate(Convert.ToSingle(914400)/bm.HorizontalResolution));
        }
        else
        {
            extents.Cx = width;
        }

        if (height == null)
        {
            extents.Cy = Convert.ToInt64(bm.Height)*
                         Convert.ToInt64(Math.Truncate(Convert.ToSingle(914400)/bm.VerticalResolution));
        }
        else
        {
            extents.Cy = height;
        }

        bm.Dispose();
        t2d.Extents = extents;
        var sp = new ShapeProperties();
        sp.BlackWhiteMode = BlackWhiteModeValues.Auto;
        sp.Transform2D = t2d;
        var prstGeom = new PresetGeometry();
        prstGeom.Preset = ShapeTypeValues.Rectangle;
        prstGeom.AdjustValueList = new AdjustValueList();
        sp.Append(prstGeom);
        sp.Append(new NoFill());

        var picture = new Picture();
        picture.NonVisualPictureProperties = nvpp;
        picture.BlipFill = blipFill;
        picture.ShapeProperties = sp;

        var pos = new Position();
        pos.X = x;
        pos.Y = y;
        var ext = new Extent();
        ext.Cx = extents.Cx;
        ext.Cy = extents.Cy;
        var anchor = new AbsoluteAnchor();
        anchor.Position = pos;
        anchor.Extent = ext;
        anchor.Append(picture);
        anchor.Append(new ClientData());
        wsd.Append(anchor);
        wsd.Save(dp);
    }
    catch (Exception ex)
    {
        // or do something more interesting if you want
        throw ex;
    }
}

public static void InsertImage(MemoryStream stream, long x, long y, string sImagePath)
{
    using (var mySpreadsheet = SpreadsheetDocument.Open(stream, true))
    {
        var workbookPart = mySpreadsheet.WorkbookPart;
        var sheets = mySpreadsheet.WorkbookPart.Workbook.GetFirstChild<Sheets>().Elements<Sheet>();
        var relationshipId = sheets.First().Id.Value;
        var worksheetPart = (WorksheetPart) mySpreadsheet.WorkbookPart.GetPartById(relationshipId);
        var workSheet = worksheetPart.Worksheet;
        //Dim sheets As worksheetpart = mySpreadsheet.WorkbookPart.Workbook.
        // For each sheet, display the sheet information.
        long width = 9525*193;
        long height = 9525*80;
        InsertImage(workSheet, x, y, width, height, sImagePath);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-22T10:24:09.987

哈哈哈哈看到的时候吓死我了 我正在做完全相同的事情。

我正在使用封闭的 XML 生成电子表格，然后使用文森特的代码插入图像。

不幸的是我有同样的问题，但它与被声明为 1 的 imageNumber 无关

但是我找到了一种解决方法：

插入图像后，只需使用关闭的 xml 重新打开文档并再次保存即可。

我只是用这个

```
workbook = new XLWorkbook(filepath);
workbook.save(); 
```

之后它应该可以毫无问题地打开。

希望这可以帮助其他有类似问题的人

**编辑：**

通过更改此段，我能够完全解决此问题：

```
var imageNumber = dp.ImageParts.Count<ImagePart>();
if (imageNumber == 1)
{
    var drawing = new Drawing();
    drawing.Id = dp.GetIdOfPart(imgp);
    ws.Append(drawing);
} 
```

更改`ws.Append(drawing);`为

```
ws.InsertBefore(drawing, ws.Last) 
```

然后它会把它放在最后一个对我来说是的孩子之前`<x:tableParts count="0"/>`

把它放在那之后似乎是导致问题的原因

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:28:32.910

问题可能是您将 imageNumber 分配为 1。

```
var imageNumber = 1; 
```

您可能会发现这会有所帮助：

```
var imageNumber = dp.ImageParts.Count<ImagePart>(); 
```

此外，该代码看起来与我在[博客文章](http://polymathprogrammer.com/2010/11/10/how-to-insert-multiple-images-in-excel-open-xml/)中发布的内容非常相似。没关系。此外，您可能会发现[SpreadsheetLight](http://spreadsheetlight.com/)很有帮助。它是一个类似于 ClosedXml 的电子表格库，它可以很好地插入图像。免责声明：我写了 SpreadsheetLight。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-01T17:51:13.230

我有一个类似的问题。当我对 ClosedXML 创建的文档和我在 Excel 中放置图像的文档进行 OpenXML Productivity Tools 比较时，我发现 ClosedXML 插入了一些元素节点，虽然它们不是无效的，但似乎使带有绘图元素的工作表无效. 我删除了这些元素，带有图像的电子表格可以在 Excel 中正常打开。 **这是一个 kluge**，但它正在工作。此代码位于 InsertImage 方法的顶部：

```
 //Remove superfluous worksheet elements. These break the inlcusion of the logo image.
    var element = ws.FirstChild;
    do
    {
        if(element.LocalName == null)
            continue;
        switch (element.LocalName)
        {
            case "pageSetup":
            case "headerFooter":
            case "tableParts":
                var prevElement = element;
                element = element.NextSibling();
                ws.RemoveChild<OpenXmlElement>(prevElement);
                break;
            default:
                element = element.NextSibling();
                break;
        }
    }
    while(element != null);
    // End of element removal 
```

高温高压

安格斯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-24T09:52:49.440

OpenXml 并不是最容易理解的东西。

他们没有告诉你的一件事是元素的顺序通常很重要。如前所述，索引号不是原因，您需要重新排序 xml 标记，以便元素位于`tableParts`元素之前`drawing`。

或者，由于您没有 TableParts，您可以完全删除该元素

所以从你的例子

```
<?xml version="1.0" encoding="utf-8"?>
<x:worksheet xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" xmlns:x="http://schemas.openxmlformats.org/spreadsheetml/2006/main">
    <x:sheetPr>
        <x:outlinePr summaryBelow="1" summaryRight="1" />
    </x:sheetPr>
    <x:dimension ref="A1:M4" />
    <x:sheetViews>
        <x:sheetView tabSelected="0" workbookViewId="0" />
    </x:sheetViews>
    <x:sheetFormatPr defaultRowHeight="15" />
    <x:cols>
        ...
    </x:cols>
    <x:sheetData>
        ...
    </x:sheetData>
    <x:printOptions horizontalCentered="0" verticalCentered="0" headings="0" gridLines="0" />
    <x:pageMargins left="0.75" right="0.75" top="0.75" bottom="0.5" header="0.5" footer="0.75" />
    <x:pageSetup paperSize="1" scale="100" pageOrder="downThenOver" orientation="default" blackAndWhite="0" draft="0" cellComments="none" errors="displayed" />
    <x:headerFooter />
    <x:drawing r:id="R701e4d0efd7143ee" />
    <x:tableParts count="0" />
</x:worksheet> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-12T18:21:35.343

如果您正在写入新的 Excel 文件，则以下代码很好：

```
if( dp.ImageParts.Count<ImagePart>() == 1 )
{
    var drawing = new Drawing();
    drawing.Id = dp.GetIdOfPart(imgp);
    ws.Append(drawing);
} 
```

如果您正在写入可能已经有绘图部分的现有文件（但没有图像......形状似乎是绘图部分的一部分），那么这将导致您的文档无法通过验证，甚至无法完全打开.

我通过执行以下操作解决了这个问题：

```
if (dp.ImageParts.Count<ImagePart>() == 1)
{
    Drawing drawing = workSheet.GetFirstChild<Drawing>();
    if (drawing == null)
    {
        drawing = new Drawing();
        drawing.Id = dp.GetIdOfPart(imgp);
        workSheet.InsertAfter(drawing, workSheet.LastChild);
    }
} 
```

似乎每个工作表只有 1 个绘图部分......我花了一段时间才找到问题，因为不幸的是它并不是立即显而易见的。

# python - 从 WebKitNetworkRequest 获取 POST 数据

> ID：12524692
> 
> 赞同：7
> 
> 时间：2012-09-21T05:24:32.113
> 
> 标签：python, webkit

我正在尝试通过 HTTP 请求将数据从在 GTK webkit 中运行的 javascript 应用程序发送到 Python，并在 POST 中发送数据。

`resource-request-starting`我可以使用并检查请求的 uri来捕获请求。

我知道请求有效，因为我可以通过请求标头发送数据并使用

```
def on_resource_request_starting(view, frame, resource, request, response):
    uri = urllib.unquote(request.props.uri)
    if uri.startswith('http://appname.local/'):
        print request.get_message().request_headers.get_one('foobar') 
```

但是当我使用时，`print request.get_message().request_body.data`我什么也得不到。

如何查看 POST 数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:13:39.400

我没有使用过这个 API，但我相信您需要`soup_message_body_flatten()`在读取该`data`字段之前调用绑定的等效项。请参阅[`SoupMessageBody`](http://developer.gnome.org/libsoup/stable/SoupMessageBody.html#SoupMessageBody-struct)C API 中的文档。

所以，猜测一下：

```
print request.get_message().request_body.flatten().data 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-08T09:05:00.347

使用 soup_message_body_get_chunk(soupmsgbody, num) 连接到 SoupSession “请求队列”信号并获取缓冲区；似乎工作（在 webkitgtk1 今天，2015 年 6 月）。webkit_get_default_session() 返回有问题的 SoupSession。

# php - 使用 php 搜索网站，可能是元数据？

> ID：12524693
> 
> 赞同：0
> 
> 时间：2012-09-21T05:24:38.243
> 
> 标签：php

如果要搜索其他网站以获取信息，那么如何使用 php 进行此操作？

抱歉，让我澄清一下，因为这相当模糊：假设我有一个带有复选框的用户输入字段，用户选择一个选项并提交它，它存储在里面，比如说`$variabletest`. 现在我想搜索 X 个站点，其中`$variabletest == tags`. 标签与用户在X站点上传的视频标签一样，X站点是预先确定的，无疑不止一个站点。

我希望这可以澄清，我擅长编程与 sql 通信，而不是创建应用程序：P 但我想我想知道最好的方法是什么，通过元标记搜索？我不需要为我编写的所有代码，只需要在正确的方向上推一个合适的大小。提前致谢

> 我可以说，有 7 个带有视频的网站。我的用户通过复选框选择他们希望在视频中看到的内容，而我的 php 脚本基本上是“爬网”通过 7 个站点中的每一个，并针对我的用户选择的内容进行搜索。也许通过视频上的标签，甚至是元数据。这就是我的困境

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:36:22.407

这应该可以帮助您：

```
// assuming an array of urls such as $urls = array("http://...","http://...")
// could easily be modified to use urls from a database output

function file_get_contents_curl($url)
{
    $ch = curl_init();

    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

    $data = curl_exec($ch);
    curl_close($ch);

    return $data;
}

for each ($urls as $url){
    $html = file_get_contents_curl($url);

    //parsing begins here:
    $doc = new DOMDocument();
    @$doc->loadHTML($html);
    $nodes = $doc->getElementsByTagName('title');

    //get and display what you need:
    $title = $nodes->item(0)->nodeValue;

    $metas = $doc->getElementsByTagName('meta');

    for ($i = 0; $i < $metas->length; $i++)
    {
        $meta = $metas->item($i);
        if($meta->getAttribute('name') == 'description')
            $description = $meta->getAttribute('content');
        if($meta->getAttribute('name') == 'keywords')
            $keywords = $meta->getAttribute('content');
    }

    echo "Title: $title". '<br/><br/>';
    echo "Description: $description". '<br/><br/>';
    echo "Keywords: $keywords";
} 
```

# php - imagemagick convert 不能通过 php exec() 工作，但可以通过命令行工作

> ID：12524694
> 
> 赞同：2
> 
> 时间：2012-09-21T05:24:41.740
> 
> 标签：php, pdf, imagemagick

当我尝试通过命令行将 pdf 转换为 php 时：

```
convert 1.pdf 2.jpg 
```

它可以工作并给我jpg图像。但是后来我尝试通过php转换`exec()`它不起作用。

```
exec("convert 1.pdf 2.jpg"); 
```

过程开始，但我没有结果。我尝试使用

```
putenv("PATH=/usr/local/bin:/usr/bin:/bin") 
```

和文件的完整路径，但它没有帮助。

我的问题有一个新的细节：当我通过命令行运行我的 php 脚本时 - 它可以工作。但是当我尝试在我的浏览器中运行它时，进程启动并工作了几秒钟（~15 秒），但我没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:48:51.033

我还有一个开发项目，我需要将 pdf 转换为图像。我还使用了imagemagick。就我而言，出于安全原因，我的网络托管服务商已禁用 PHP 函数 exec()。你有可能有同样的问题吗？

所以，我无法使用 PHP 来运行 imagemagick。我的网络托管商要求我使用 Pearl 脚本，然后它就可以工作了。

我希望我的评论可以帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:52:29.930

尝试使用 ImageMagick 的 PECL 库。为您提供了许多使用 PHP 来处理 imagemagick 的选项

[http://php.net/manual/en/book.imagick.php](http://php.net/manual/en/book.imagick.php)

# android - Android：关于 onSingleTapUp 和 onDoubleTap 的问题

> ID：12524709
> 
> 赞同：2
> 
> 时间：2012-09-21T05:25:52.667
> 
> 标签：android

单击时 onSingleTapUp 函数正确执行，双击时 onSingleTapUp 和 onDoubleTap 都执行。

```
mGestureDetector = new GestureDetector(new GestureDetector.SimpleOnGestureListener() {
            @Override
            public void onLongPress(MotionEvent e) 
            {

            }

            @Override
            public boolean onDoubleTap(MotionEvent e) 
            {
                cameracontrolslayout.setVisibility(RelativeLayout.GONE);
                presetcontrolslayout.setVisibility(RelativeLayout.GONE);

                ViewFLipperButtonsLayout.setVisibility(RelativeLayout.VISIBLE);
                    ptzcontrolslayout.setVisibility(RelativeLayout.VISIBLE);
                return true;
            }

            @Override
            public boolean onSingleTapUp(MotionEvent arg0) 
            {
                // TODO Auto-generated method stub

                cameracontrolslayout.setVisibility(RelativeLayout.VISIBLE);
                presetcontrolslayout.setVisibility(RelativeLayout.VISIBLE);

            return false;
            }

            @Override
            public boolean onDown(MotionEvent e) 
            {
                return true;
            }

       }); 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T05:35:07.447

而不是`onSingleTapUp`为什么不使用[onSingleTapConfirmed](http://developer.android.com/reference/android/view/GestureDetector.SimpleOnGestureListener.html#onSingleTapConfirmed%28android.view.MotionEvent%29)，但是您的布局将在录音时可见。

# c++ - 为什么剂量 cos(90) 不等于零？

> ID：12524710
> 
> 赞同：-7
> 
> 时间：2012-09-21T05:26:00.060
> 
> 标签：c++, floating-accuracy, trigonometry

我理解 cos(); 在 C++ 中使用弧度是对的..你可以用..获得弧度

```
 (angle * PI ) / 180; 
```

那为什么

```
 float value = cos( (90 * PI / 180 ); // == 6.1 etc... and not 0? 
```

如果我在 Windows 中使用科学计算器，`cos(90)`我会得到零。然而，作为一个实验，当我 push 时`cosh(90)`，我得到了在 C++ 中调用函数给我的相同的 6.1 等值。

有什么想法吗？这是我现在的代码...

[http://ideone.com/YQgLz](http://ideone.com/YQgLz)

我基本上要问的是为什么在 C++ 中返回的数字与在 Windows 计算器上的`cos(90 degrees)`数字相同。`cosh(90)`不`cos(90 degrees)`应该是零吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T05:34:16.067

所以你并没有真正得到 6.1（大于 1 的余弦/正弦值仅适用于某些复数），而是 6.1 * 10^-17。问题是浮点数不是精确值（本质上 - 这就是 base-2 表示的工作方式），数学函数也不返回精确值 - 它们使用各种近似公式来计算值 -**永远不要期望它们是准确的。**

# iphone - 在导航控制器中添加标签栏控制器时隐藏后退按钮

> ID：12524711
> 
> 赞同：4
> 
> 时间：2012-09-21T05:26:12.307
> 
> 标签：iphone, objective-c, uinavigationcontroller, uitabbarcontroller

我有一个导航控制器 (navC) 和一个视图控制器 (ViewC)，它是从根控制器推送的视图。我用代码隐藏了 ViewC 的后退按钮：

```
[[self navigationItem] setHidesBackButton:YES]; 
```

我在 ViewC 之后推送了标签栏控制器（tabbarC）。在与 tabbarC 中的第一个选项卡关联的视图控制器中，我尝试使用代码隐藏后退按钮：

```
 [[[self tabBarController] navigationItem] setHidesBackButton:YES]; 
```

但是当我单击它时，后退按钮仍然可见；它消失了......任何人都可以帮我隐藏tabbarC中所有视图的后退按钮。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T05:42:33.773

在您推送到 tabbarviewcontroller 时将出现的第一个视图中，设置此

```
-(void)viewWillAppear:(BOOL)animated{
      [super viewWillAppear:animated];
      self.tabBarController.navigationItem.hidesBackButton=YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:32:59.367

在 ViewC 的 viewDidLoad 中执行以下操作：

```
[self.navigationController.navigationItem setHidesBackButton:YES]; 
```

还选项卡选择了视图控制器的 viewWillAppear 方法

```
[self.navigationController.navigationItem setHidesBackButton:YES]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T06:09:45.830

在您看来，只需写下这一行..它将隐藏后退按钮..**经过测试**

```
-(void)viewWillAppear:(BOOL)animated
{
    [self.navigationItem setHidesBackButton:YES];
} 
```

# php - Laravel 中的模板

> ID：12524712
> 
> 赞同：28
> 
> 时间：2012-09-21T05:26:15.933
> 
> 标签：php, laravel, laravel-3

我正在尝试让我的默认模板与 Laravel 一起使用。我来自 Codeigniter 和 Phil Sturgeon 的模板系统，所以我试图以类似的方式来做。任何人都可以帮助我解决我错过的/做错的事情吗？谢谢！

```
//default.blade.php (located in layouts/default)
<html>
    <title>{{$title}}</title>
    <body>
    {{$content}}
    </body>
</html>
//end default.blade.php

//home.blade.php (index view including header and footer partials)
@layout('layouts.default')
@include('partials.header')
//code
@include('partials.footer')
//end home

//routes.php (mapping route to home controller)
Route::controller( 'home' );
//end

//home.php (controller)
<?php
class Home_Controller extends Base_Controller {
    public $layout = 'layouts.default';
    public function action_index()
    {   
        $this->layout->title = 'title';
        $this->layout->content = View::make( 'home' );
    }
}
//end 
```

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-09-21T09:16:28.163

您正在混合 Laravel 的两种不同布局方法。这样您就可以渲染布局视图，包含主视图并尝试再次包含在布局中。

我个人的偏好是控制器方法。

## 控制器布局

控制器和布局可以保持不变。

*注意：作为快捷方式，您可以嵌套内容而不是 View::make，当您在布局中回显它时，它会自动呈现它。*

在 home.blade.php 中删除 @layout 函数。

**编辑（示例）：**

*控制器/home.php*

```
<?php
class Home_Controller extends Base_Controller {
  public $layout = 'layouts.default';
  public function action_index()
  {
    $this->layout->title = 'title';
    $this->layout->nest('content', 'home', array(
      'data' => $some_data
    ));
  }
} 
```

*视图/布局/default.blade.php*

```
<html>
  <title>{{ $title }}</title>
  <body>
    {{ $content }}
  </body>
</html> 
```

*意见/home.blade.php*

部分内容包含在内容中。

```
@include('partials.header')
{{ $data }}
@include('partials.footer') 
```

## 刀片布局

如果你想要这种方法，你会遇到一些问题。首先，您在布局后包含新内容。不确定是否有意，但*@layout*函数本身基本上只是一个*@include*，限制在视图的开头。因此，如果您的布局是一个封闭的 html，那么之后的任何包含都将附加在您的 html 布局之后。

您的内容应在此处使用带有*@section*功能的部分，并在您的布局中使用*@yield 。*页眉和页脚可以使用*@include*包含在布局中，或者如果您想在内容视图中定义它，那么也可以将它们放在*@section*中，如下所示。如果您以这种方式定义它，如果一个部分不存在，则不会产生任何结果。

*控制器/home.php*

```
<?php
class Home_Controller extends Base_Controller {
  public function action_index()
  {
    return View::make('home')->with('title', 'title');
  }
} 
```

*视图/布局/default.blade.php*

```
<html>
 <title>{{$title}}</title>
 <body>
  @yield('header')
  @yield('content')
  @yield('footer')
 </body>
</html> 
```

*意见/home.blade.php*

```
@layout('layouts.default')
@section('header')
  header here or @include it
@endsection
@section('footer')
  footer
@endsection
@section('content')
  content
@endsection 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T22:16:05.587

上面给出的答案解释了如何在 Laravel 中完成模板化，但是为了获得额外的好处，比如管理组织到主题目录中的主题，能够在主题之间切换以及将部分和主题资源放在一起，这听起来几乎类似于[Phil Sturgeon 模板库CI](https://github.com/philsturgeon/codeigniter-template)。您可能需要检查 Laravel 的主题包。链接在这里：

[http://raftalks.github.io/Laravel_Theme_Bundle/](http://raftalks.github.io/Laravel_Theme_Bundle/)

# javascript - 使用复选框控制单选按钮

> ID：12524715
> 
> 赞同：0
> 
> 时间：2012-09-21T05:26:34.890
> 
> 标签：javascript, jquery, forms

我正在使用一个将表单元素隐藏在标签后面的 CMS，由于某些系统怪癖，我不得不设置一个复选框来控制单选按钮，因此如果选中该复选框，则选择“是”单选按钮，如果不是“否”被选中。我还希望单选按钮默认选中“否”选项，但我无法控制单选按钮的代码行。

我发现了一些 Javascript 可以完成其中的一小部分，但我想将它集成到 jQuery 中，当勾选框时显示和隐藏内容。

这是我到目前为止所拥有的：

```
$('#checkbox1').change(function() {
    $('#content1').toggle("slow");
}); 
```

我拥有的Javascript是这样的：

```
function ticked(){
    var ischecked = document.getElementById("checkbox").checked;
    var collection = document.getElementById("hideradio").getElementsByTagName('INPUT');
    if(ischecked){collection[0].checked = true;}else{collection[0].checked = false;}
} 
```

你能帮我写一个 Javascript 版本但与我的 jQuery 集成吗？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:32:55.197

如果我没有正确理解，请告诉我。

我不知道你的 HTML 代码，所以我提供一个

```
<form>
    <input type="checkbox" name="test_ck" id="test_ck" />
    <br/>
    <input type="radio" name="test_radio" id="test_radio" />
</form>

<div id="content"> A content !!! </div> 
```

和 javascript jquery

```
$(function(){
    $("#test_ck").on("change", function(){
           $("#test_radio").prop("checked", $(this).is(":checked"));               
        $("#content").toggle("slow");
    });
}); 
```

示例-> [jsfiddle](http://jsfiddle.net/6wQxw/1/)

**更新的jsfiddle**

[http://jsfiddle.net/6wQxw/2/](http://jsfiddle.net/6wQxw/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:35:47.193

试试这个代码

​</p>

```
$(function(){
    $('#checkbox1').on('click' , function() {
        var isChecked = $(this).is(':checked');
        if(isChecked){
           $('#radio1').attr('checked' , true);
            $('#content1').toggle("slow");
        }
        else{
            $('#radio1').attr('checked' , false);
        }
    });
});​ 
```

检查[[小提琴]](http://jsfiddle.net/tYXMh/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:44:27.913

你可以试试这个，我假设你的 html 是这样的。

```
<input type="checkbox" id="checkbox1" /> Check Box

<div id="content1" >
    Some Content <br />
    Some Content <br />
    Some Content <br />
    Some Content
</div>

<div id="hideradio">
    <input type="radio" name="rgroup" value="yes" /> Yes
    <input type="radio" name="rgroup" value="no" />  No
</div> 
```

jQuery

```
$(function(){
     $('#hideradio input[type=radio][value=no]').attr('checked',true);
     $('#content1').hide();
});

$('#checkbox1').on('change', function() {
    $('#content1').toggle("slow");
    var self = this;
    if(self.checked)
        $('#hideradio input[type=radio][value=yes]').attr('checked',true);
    else
       $('#hideradio input[type=radio][value=no]').attr('checked',true);
}); 
```

快速**[演示](http://jsfiddle.net/DZ77s/1/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T06:54:04.880

[jsfiddle](http://jsfiddle.net/29R7q/1/)

```
$(document).on('change', '#checkbox', function() { toggle(this); });

var toggle = function(obj) {
    var checked = $(obj || '#checkbox').is(':checked');
    $(':radio[value=no]').prop('checked', !checked);
    $(':radio[value=yes]').prop('checked', checked);
    $('#content').toggle(checked);
}

toggle(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-13T18:13:35.770

这是一个纯 JavaScript 解决方案，无需使用 jQuery：

```
<body>
<label for="a">Male</label>
<input type="radio" id="a">
<br/>
<label for="b">Female</label>
<input type="radio" id="b">
<script type="text/javascript">
    var nodes = document.querySelectorAll("input[type=radio]");// get elements
    var arr = Array.prototype.slice.call(nodes); // convert nodes to array for use in forEach
    arr.forEach(function(obj){
        obj.addEventListener("change",function(e){
            arr.forEach(function(obj){
                obj.checked = false;//make other radio false
            });
            this.checked = true;// make this radio ture
        });
    });
</script>
</body> 
```

# jqgrid - JqG rid 在进行编辑操作时发送查询字符串 oper=add

> ID：12524716
> 
> 赞同：0
> 
> 时间：2012-09-21T05:26:42.750
> 
> 标签：jqgrid

我在 SO 上四处寻找有关此问题的任何线索，发现[Jqgrid 在编辑操作中发送“add”为 oper=“add” 为什么？](https://stackoverflow.com/questions/9621831/jqgrid-on-edit-operation-sends-add-as-oper-add-why). Oleg 说这是一个错误并且已修复，但我在使用内联编辑时遇到了同样的问题。我正在使用 jqGrid 4.4.1。

就我而言，当我添加一行，保存它然后尝试编辑它时会发生这个问题。单击保存以保存更改后，查询字符串具有`oper=add`

这是我的脚本供参考。我不认为它漂亮，因为我还在第二天学习这个美妙的插件。

```
 $(function () {
  var grid = $("#list");

  grid.jqGrid({
      url: "@Url.Action("GetClassList", "Setup")",
      datatype: "json",
      height: 220,
      width: 800,
      colNames: ["Code", "Name", "Duration"],
      colModel: [
            { name: "Code",     index: "Code",      width: 120, editable: true, key: true },
            { name: "Name",     index: "Name",      width: 250, editable: true },
            { name: "Duration", index: "Duration",  width: 120, editable: true }
      ],
      rowNum: 10,
      rowList: [10, 20, 30],
      pager: '#listPager',
      sortname: "Code",
      viewrecords: true,
      sortorder: "desc",
      multiselect: false,
      subGrid: true,
      editurl: "@Url.Action("UpdateClass", "Setup")",
      caption: "Class Information",
      subGridRowExpanded: function(subgrid_id, row_id) {
          var subgrid_table_id, pager_id;
          subgrid_table_id = subgrid_id+"_t";
          pager_id = "p_"+subgrid_table_id;
          $("#"+subgrid_id).html("<table id='"+subgrid_table_id+"' class='scroll'></table><div id='"+pager_id+"' class='scroll'></div>");

          var classCode = grid.jqGrid("getCell", row_id, "Code");
          var http_get_url = "@Url.Action("GetClassScheduleList", "Setup", new { id = "_CC_PH_" })";
          http_get_url = http_get_url.replace("_CC_PH_", classCode);

          var http_post_url = "@Url.Action("UpdateClassSchedule", "Setup", new { id = "_CC_PH_" })";
          http_post_url = http_post_url.replace("_CC_PH_", classCode);

          jQuery("#"+subgrid_table_id).jqGrid({
              url: http_get_url,
              datatype: "json",
              prmNames: {id: "rid"},
              colNames: ["", "Day", "Start Time", "Block", "Room", "Is Selected"],
              colModel: [
                          { name: "Num",          index: "Num",         width:0,     hidden: true,   key: true },
                          { name: "Day",          index: "Day",         width: 120,                  editable: true, edittype: "select", editoptions: { value: "Sunday:Sunday;Saturday:Saturday;Monday:Monday;Tuesday:Tuesday;Wednesday:Wednesday;Thursday:Thursday;Friday:Friday" }},
                          { name: "Start Time",   index: "Start Time",  width: 120,  align: "right", editable: true},
                          { name: "Block",        index: "Block",       width: 70,   align: "right", editable: true},
                          { name: "Room",         index: "Room",        width: 70,   align: "right", editable: true},
                          { name: "Is Selected",  index: "Is Selected", width: 100,  align: "right", editable: true, edittype: "checkbox", editoptions: { value:"Yes:No" }}
              ],
              rowNum:20,
              pager: pager_id,
              sortname: 'Num',
              sortorder: "asc",
              multiselect: false,
              editurl: http_post_url,
              height: '100%',
          });
          jQuery("#"+subgrid_table_id).jqGrid('navGrid',"#"+pager_id,{edit: false, add: false, del: false, search: false },{reloadAfterSubmit: true})
          jQuery("#"+subgrid_table_id).jqGrid('inlineNav',"#"+pager_id)
        },
        subGridRowColapsed: function(subgrid_id, row_id) {
            // this function is called before removing the data
            //var subgrid_table_id;
            //subgrid_table_id = subgrid_id+"_t";
            //jQuery("#"+subgrid_table_id).remove();
        }
  });
  jQuery("#list").jqGrid('navGrid', "#listPager", { edit: false, add: false, del: false, search: false },{reloadAfterSubmit: true});
  jQuery("#list").jqGrid('inlineNav', "#listPager"); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:03:47.527

试试这个代码

```
 serializeRowData: function(postData){

    // new row id is "new_row"
    postData.oper = postData.id == "new_row" ? "add" : "edit";
    return postData;
} 
```

# android - 如何在 Spinner Android 中设置项目的文本颜色

> ID：12524725
> 
> 赞同：5
> 
> 时间：2012-09-21T05:27:47.870
> 
> 标签：android, android-layout, text, colors, spinner

我在为 Spinner 设置文本颜色时遇到问题。我见过几个例子，但大多数都有 ArrayAdapter 和 String 数组`strings.xml`，`res folder`因为我的 Spinner 的项目是从 SQLite 数据库中检索的，所以我认为它可能无济于事。

这是我的 Spinner 的代码 PersonalInformation.java

```
public class PersonalInformation extends Activity
{
    EditText txtLikes, txtDislikes, txtType, txtDate;
    Button btnView, btnBack;
    Spinner nameSpinner;    

    final Context context = this;

    private int namesSpinnerId;        

    LikesDBAdapter likeDB = new LikesDBAdapter(this);
    DislikesDBAdapter dlikeDB = new DislikesDBAdapter(this);

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.info);

        BuddyDBAdapter buddyDB = new BuddyDBAdapter(this);
        buddyDB.open();

        Cursor friendsCursor = buddyDB.getAllNames();
        startManagingCursor(friendsCursor); 

        String[] from = new String[]{BuddyDBAdapter.KEY_NAME};
        int[] to = new int[]{R.id.name};

        SimpleCursorAdapter friendsCursorAdapter = new SimpleCursorAdapter(this, android.R.layout.simple_spinner_item, friendsCursor, from, to);
        friendsCursorAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        nameSpinner = (Spinner)findViewById(R.id.nameSpinner);
        nameSpinner.setAdapter(friendsCursorAdapter);
        //buddyDB.close();

        nameSpinner.setOnItemSelectedListener(new OnItemSelectedListener()
            {
                 @Override
                 public void onItemSelected(AdapterView<?> parent, View view, int pos, long id)
                 {
                     Cursor c = (Cursor)parent.getItemAtPosition(pos);
                     namesSpinnerId = c.getInt(c.getColumnIndexOrThrow(BuddyDBAdapter.KEY_ROWID));
                 }

                @Override
                public void onNothingSelected(AdapterView<?> parent)
                {
                    // TODO Auto-generated method stub

                }
            });
        buddyDB.close(); 
```

而且，这些是 info.xml 中 Spinner 的布局代码

```
<Spinner
        style="@style/SpinnerStyle"
        android:id="@+id/nameSpinner"        
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:prompt="@string/friends_prompt"
        android:textColor="@color/green" /> 
```

请帮助我如何在 Spinner 中设置项目文本颜色。
我将不胜感激提供的任何帮助。谢谢。！=)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T05:44:27.403

为您的微调器项目创建一个 xml 文件。并将其放在布局文件夹中

```
spinner_view.xml:

<TextView  
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent" 
  android:layout_height="wrap_content"
  android:gravity="left"  
  android:textColor="@color/green"         
/> 
```

最后在您的代码中。

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.spinner_view,yourList); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T05:52:30.697

使用自定义 ArrayAdapter 或自定义微调器。

你看过[http://www.coderzheaven.com/2011/02/20/how-to-create-custom-layout-for-your-spinner-in-android-or-customizable-spinner-2/](http://www.coderzheaven.com/2011/02/20/how-to-create-custom-layout-for-your-spinner-in-android-or-customizable-spinner-2/)吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:46:55.013

修改文本颜色在 res/layout 文件夹中创建一个新的 xml 文件

```
<TextView android:id="@+id/spinnerText" 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" 
    android:layout_centerHorizontal="true"
    android:textColor="#2f4f4f" 
    android:textSize="20dp" 
    xmlns:android="http://schemas.android.com/apk/res/android"/> 
```

并调用类似这样的适配器：

```
ArrayAdapter<CharSequence> adapter = ArrayAdapter.createFromResource(this,
                R.array.spinner_array,
                R.layout.spinner_text); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-14T16:31:11.723

这是 simple_spinner_drowdown_item.xml 的源代码

```
<?xml version="1.0" encoding="utf-8"?>
<!--
/* //device/apps/common/assets/res/any/layout/simple_spinner_item.xml
**
** Copyright 2008, The Android Open Source Project
**
** Licensed under the Apache License, Version 2.0 (the "License"); 
** you may not use this file except in compliance with the License. 
** You may obtain a copy of the License at 
**
**     http://www.apache.org/licenses/LICENSE-2.0 
**
** Unless required by applicable law or agreed to in writing, software 
** distributed under the License is distributed on an "AS IS" BASIS, 
** WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. 
** See the License for the specific language governing permissions and 
** limitations under the License.
*/
-->
<CheckedTextView xmlns:android="http://schemas.android.com/apk/res/android" 
    android:id="@android:id/text1"
    style="?android:attr/spinnerDropDownItemStyle"
    android:singleLine="true"
    android:layout_width="match_parent"
    android:layout_height="?android:attr/dropdownListPreferredItemHeight"
    android:ellipsize="marquee"
    android:textAlignment="inherit"/> 
```

这里的问题是 ?android:attr/dropdownListPreferredItemHeight 不公开，但它似乎是 48 dip 或 64dip： [https ://android.googlesource.com/platform/frameworks/base/+/414c4984fdbb03b688bb5c3c76d20100fce3d067%5E1..414c4984fdbb03b60808bb5c3dc3676d/](https://android.googlesource.com/platform/frameworks/base/+/414c4984fdbb03b688bb5c3c76d20100fce3d067%5E1..414c4984fdbb03b688bb5c3c76d20100fce3d067/)

# java - 递归地从 XML 中删除空节点

> ID：12524727
> 
> 赞同：7
> 
> 时间：2012-09-21T05:27:53.817
> 
> 标签：java, xml, xmlnode

我想从 XML 元素中删除空节点。此 xml 是从供应商生成的，我无法控制 xml 的生成。但由于 XML 的空节点很少，我需要递归地删除这些空节点。

这个 xml 是从 OMElement 获得的，我使用 [XMLUtils][1] 示例 XML 从这个对象中获得一个元素

```
<A>
  <B>
    <C>
      <C1>
        <C11>something</C11>
        <C12>something</C12>
      </C1>
    </C>
    <D>
      <D1>
        <D11>
          <D111 operation="create">
            <Node>something else</Node>
          </D11>
        </D11>
      </D1>
      <D2>
        <D21>

        </D21>
      </D2>
    </D>
  </B>
</A> 
```

由于 D21 是一个空节点，我想删除 D21，因为现在 D2 是一个空节点，我想删除 D2，但由于 D 有 D1，我不想删除 D。

同样，我有可能得到

```
<A>
  <B>
    <C>

    </C>
  </B>
</A> 
```

现在因为 C 是空的，我想删除 C，然后是 B，最后是节点 A。我正在尝试使用[Node中的 removeChild() 方法来执行此操作](http://docs.oracle.com/javase/1.5.0/docs/api/org/w3c/dom/Node.html)

但到目前为止，我无法递归删除它们。有什么建议可以递归删除它们吗？

我正在递归地尝试获取节点和节点长度。但是节点长度没有帮助

```
if(childNode.getChildNodes().getLength() == 0 ){
       childNode.getParentNode().removeChild(childNode);

               } 
```

问候
Dheeraj Joshi

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-11-10T16:38:13.453

我没有足够的代表来评论@Adam 的解决方案，但我遇到了一个问题，即在删除节点后，该节点的最后一个兄弟节点被移动到索引零，导致它无法完全删除空元素。解决方法是使用一个列表来保存我们想要递归调用删除的所有节点。

此外，还有一个错误会删除具有属性的空元素。

解决这两个问题：

```
public static void removeEmptyNodes(Node node) {

    NodeList list = node.getChildNodes();
    List<Node> nodesToRecursivelyCall = new LinkedList();

    for (int i = 0; i < list.getLength(); i++) {
        nodesToRecursivelyCall.add(list.item(i));
    }

    for(Node tempNode : nodesToRecursivelyCall) {
        removeEmptyNodes(tempNode);
    }

    boolean emptyElement = node.getNodeType() == Node.ELEMENT_NODE 
          && node.getChildNodes().getLength() == 0;
    boolean emptyText = node.getNodeType() == Node.TEXT_NODE 
          && node.getNodeValue().trim().isEmpty();

    if (emptyElement || emptyText) {
        if(!node.hasAttributes()) {
            node.getParentNode().removeChild(node);
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T07:02:11.107

这行得通，只需创建一个“深入”的递归函数，然后在“备份树”的过程中删除空节点，这将具有删除 D21 和 D2 的效果。

```
public static void main(String[] args) throws Exception {

    DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
    String input = "<A><B><C><C1><C11>something</C11><C12>something</C12></C1></C><D><D1><D11><D111 operation=\"create\"><Node>something else</Node></D111></D11></D1><D2><D21></D21></D2></D></B></A>";

    Document document = builder.parse(new InputSource(new StringReader(
            input)));

    removeNodes(document);

    Transformer transformer = TransformerFactory.newInstance()
            .newTransformer();
    transformer.setOutputProperty(OutputKeys.INDENT, "yes");
    StreamResult result = new StreamResult(new StringWriter());
    transformer.transform(new DOMSource(document), result);
    System.out.println(result.getWriter().toString());
}

public static void removeNodes(Node node) {
    NodeList list = node.getChildNodes();
    for (int i = 0; i < list.getLength(); i++) {
        removeNodes(list.item(i));
    }
    boolean emptyElement = node.getNodeType() == Node.ELEMENT_NODE
            && node.getChildNodes().getLength() == 0;
    boolean emptyText = node.getNodeType() == Node.TEXT_NODE
            && node.getNodeValue().trim().isEmpty();
    if (emptyElement || emptyText) {
        node.getParentNode().removeChild(node);
    }
} 
```

输出

```
<A>
<B>
<C>
<C1>
<C11>something</C11>
<C12>something</C12>
</C1>
</C>
<D>
<D1>
<D11>
<D111 operation="create">
<Node>something else</Node>
</D111>
</D11>
</D1>
</D>
</B>
</A> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T06:58:58.230

用于`getTextContent()`DOM 的顶级元素。如果方法返回空字符串或null，则可以删除该节点，因为该节点和*所有子节点*都是空的。如果方法`getTextContent()`返回非空字符串，则调用`getTextContent`当前节点的每个子节点，依此类推。
请参阅[文档](http://docs.oracle.com/javase/6/docs/api/org/w3c/dom/Node.html#getTextContent%28%29)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-14T10:51:03.487

只需使用字符串：

```
 Pattern emptyValueTag = Pattern.compile("\\s*<\\w+/>");
    Pattern emptyTagMultiLine = Pattern.compile("\\s*<\\w+>\n*\\s*</\\w+>");

    xml = emptyValueTag.matcher(xml).replaceAll("");

    while (xml.length() != (xml = emptyTagMultiLine.matcher(xml).replaceAll("")).length()) {
    }

    return xml; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-20T08:31:13.537

```
public class RemoveEmprtElement {

public static void main(String[] args) {
    ReadFile readFile =new ReadFile();
    String strXml=readFile.readFileFromPath(new File("sampleXml4.xml"));
    RemoveEmprtElement elementEmprtElement=new RemoveEmprtElement();
    DocumentBuilder dBuilder = null;
    Document doc = null;
    try {
        dBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        doc = dBuilder.parse(new ByteArrayInputStream(strXml.getBytes()));

        elementEmprtElement.getEmptyNodes(doc);
        TransformerFactory tf = TransformerFactory.newInstance();
        Transformer trans = tf.newTransformer();
        StreamResult result = new StreamResult(new StringWriter());
        trans.transform(new DOMSource(doc), result);
        System.out.println(result.getWriter().toString());

    }catch(Exception e) {
        e.printStackTrace();
    }
}

private void getEmptyNodes(Document doc){

    try {
        XPathFactory factory = XPathFactory.newInstance();
        XPath xpath = factory.newXPath();
        XPathExpression expr = xpath.compile("//*[not(*)]");
        Object resultNS = expr.evaluate(doc, XPathConstants.NODESET);
        NodeList nodes = (NodeList) resultNS;
        for(int i =0 ; i < nodes.getLength() ; i++){
            Node node = nodes.item(i);
            boolean emptyElement = node.getNodeType() == Node.ELEMENT_NODE
                    && node.getChildNodes().getLength() == 0;
            boolean emptyText = node.getNodeType() == Node.TEXT_NODE
                    && node.getNodeValue().trim().isEmpty();

            if (emptyElement || emptyText) {
                xmlNodeRemove(doc,findPath(node));
                getEmptyNodes(doc);
            }
        } 
    }catch(Exception e) {
        e.printStackTrace();
    }

}

private void xmlNodeRemove(Document doc,String xmlNodeLocation){

    try {
        XPathFactory factory = XPathFactory.newInstance();
        XPath xpath = factory.newXPath();
        XPathExpression expr = xpath.compile(xmlNodeLocation);
        Object resultNS = expr.evaluate(doc, XPathConstants.NODESET);
        NodeList nodes = (NodeList) resultNS;
        Node node =nodes.item(0);
        if(node!=null && node.getParentNode()!=null && node.getParentNode().hasChildNodes()){
        node.getParentNode().removeChild(node);
        }
    }catch(Exception e) {
        e.printStackTrace();
    }
}

private String findPath(Node n) {
    String path="";
    if(n==null){
        return path;
    }else if(n.getNodeName().equals("#document")){
        return "";
    }
        else{
            path=n.getNodeName();
            path=findPath(n.getParentNode())+"/"+path;
        }
        return path;
    }

} 
```

# php - 使用 php 网页从 iphone safari 打开我的 iphone 应用程序

> ID：12524728
> 
> 赞同：1
> 
> 时间：2012-09-21T05:28:04.297
> 
> 标签：php, iphone, openurl

我是一名 iPhone 开发人员。我知道我们可以使用 CustomURL Scheme 从其他应用程序打开 iphone 应用程序并从`openURL:`方法调用它。

我在找什么我想打开我的应用程序，该应用程序在 php 网页的 plist 文件中注册了一些 customURLScheme。我对PHP知之甚少。我知道我可以检查我们收到请求的客户端浏览器是否是 iphone safari。

现在我有以下逻辑要遵循：

```
if(Client == iPhoneSafari) {
    //Open My App URL
} 
```

为了从 iphone 到 iphone 打开应用程序，我们使用以下代码：

```
[[UIApplication sharedApplication] openURL:myURL]; 
```

我已经检查了[这个链接](https://stackoverflow.com/questions/2294286/opening-native-app-from-safari)，我想确保相同的 iphone 代码适用于在 iphone safari 中打开的网页？

如果不是，我想知道我们需要编写什么代码才能在网页中执行相同的操作以打开应用程序。

我知道在这里要求代码是非常愚蠢的。但我不了解 PHP，也不知道语法。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:45:26.853

[假设您已经在 plist 文件中设置了自定义 URL 方案](http://mobiledevelopertips.com/cocoa/launching-your-own-application-via-a-custom-url-scheme.html)，您可以在 PHP 中执行以下操作：

```
<?php

function isIphone($user_agent=NULL) {
    if(!isset($user_agent)) {
        $user_agent = isset($_SERVER['HTTP_USER_AGENT']) ? $_SERVER['HTTP_USER_AGENT'] : '';
    }
    return (strpos($user_agent, 'iPhone') !== FALSE);
}

if(isIphone()) {
    //header('Location: myapp://
    //exit();
    ?><a href="myapp://">Tap this to launch application</a><?php
} else {
?><h1>Visit this page in iOS</h1><?php
}

// THE REST OF YOUR CODE HERE

?> 
```

您检查它正在使用 UserAgent 的浏览器，然后显示一个指向您的自定义 URL 方案的超链接。

您还可以使用 php-mobile-detect：[http ://code.google.com/p/php-mobile-detect/](http://code.google.com/p/php-mobile-detect/)

这有一个非常方便的功能，可以同时检测 iPad、iPhone 和 iPod 浏览器。上面的示例仅适用于 iPhone。

# ruby-on-rails - Ruby 控制台参数

> ID：12524732
> 
> 赞同：1
> 
> 时间：2012-09-21T05:28:36.370
> 
> 标签：ruby-on-rails, ruby

在 ruby​​ 脚本中，我们可以在控制台中传递这样的参数：

```
 `ruby r3.rb sam sou "samarth pandey"` 
```

这将在一个数组中接收，但现在我想发送这样的参数

```
 `ruby sam sou {:sam => abc, :sou => abc}` 
```

那么我该怎么做我不想让我的哈希像字符串一样

```
 `ruby sam sou "{:sam => abc, :sou => abc}"` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T21:30:03.083

没有引号就无法传递散列，因为 shell 会识别`>`为输出重定向并将脚本的输出通过管道传输到名为`abc}`.

编辑：

使用 Ruby 1.9 Hash 语法，您可以执行以下操作：

foo.rb：

```
p eval(ARGV.join(' ').gsub(/: (.+?)([,|}])/, ': "\1"\2')) 
```

在外壳中：

```
$ ruby foo.rb {lkj: dssd, kjdsh: kldiu} #=> {:lkj=>"dssd", :kjdsh=>"kldiu"} 
```

我认为这不是很优雅，也不是语法有效的 Ruby，因为缺少值的引号，但这将是您任务的解决方案。

# javascript - 在 em 中获取 CSS 中定义的元素的宽度

> ID：12524736
> 
> 赞同：7
> 
> 时间：2012-09-21T05:29:09.477
> 
> 标签：javascript, css, styles, width

我无法获取 CSS 中定义的元素的宽度。我想出了如何使用 Javascript 获取 CSS 规则，但我无法访问宽度。**菜单**是我在 CSS 中使用**em**定义的固定宽度。

我正在尝试根据浏览器窗口减去固定**菜单宽度来更改****div1**的宽度。

 **注意：我已经尝试过使用`style.width`，但它在控制台中返回一个空行。

jsfiddle：http: [//jsfiddle.net/kj6pQ/](http://jsfiddle.net/kj6pQ/)

```
var div1 = document.createElement('div'), 
css = getMatchedCSSRules(document.getElementById('menu'));

console.log(css); //works but dont' konw how to access width

div1.style.width = window.innerWidth - <!-- menu width -->; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T05:34:22.217

使用 ' `offsetWidth`' 访问菜单的宽度

```
var div1 = document.createElement('div'), 
css = document.getElementById('menu').offsetWidth;

console.log(css);
div1.style.width = css + "px"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T05:36:27.667

使用[**getComputedStyle**](https://developer.mozilla.org/en-US/docs/DOM/window.getComputedStyle)：

```
var css = document.getElementById('menu');

console.log(window.getComputedStyle(css).width);​ 
```

[http://jsfiddle.net/kj6pQ/6/](http://jsfiddle.net/kj6pQ/6/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T05:36:35.483

试试这个方法：

```
var width = window.getComputedStyle(document.getElementById("menu"), null).getPropertyValue("width"); 
```**

# c# - 从网站抓取 C# 数据

> ID：12524737
> 
> 赞同：1
> 
> 时间：2012-09-21T05:29:11.793
> 
> 标签：c#, html-agility-pack

嗨，我是 C# 领域的新手。自今年年初以来一直在使用 php 和 JavaScript。我想从博客中删除帖子和评论。该网站是[http://www.somewhereinblog.net](http://www.somewhereinblog.net)

我要做的是 1.我想用一个软件登录 2.然后下载html 3.然后用正则表达式，xpath 任何方便的东西来分离帖子和评论的内容

我一直在寻找。了解的很少。虽然我很确定我需要使用'htmlagilitypack'。我不知道如何将库添加到 c# 控制台或表单应用程序。有人可以给我一些帮助吗？我非常需要这个。而且我只是一个星期才不太喜欢 C#。因此，如果有一些详细的信息将不胜感激。热切地等待着。

先谢谢各位兄弟了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T05:40:28.400

1.  使用[Webclient](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)您可以登录和下载
2.  相反 html-agility-pack 我喜欢[CsQuery](http://blog.outsharked.com/2012/06/ive-been-neglecting-csquery-c-jquery.html)，因为它允许您在 C# 代码中的字符串中使用 jQuery 语法，因此您可以将 html 下载到字符串中，并在其中搜索和执行操作，就像使用 jQuery 和 HTML 页面一样。

# ruby-on-rails - 如何将具有两个元素的数组视为哈希键/值对？

> ID：12524744
> 
> 赞同：0
> 
> 时间：2012-09-21T05:29:29.140
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, methods, arguments

我正在使用 Ruby on Rails 3.2.2。我有以下情况：

```
# hash_params.class
# => Hash
# hash_params.inspect
# => { :key1 => :value1, :key2 => value2, ... => ... }
#
def self.method_1(hash_params)
  hash_params.each do { |hash_param| self.method_2(hash_param) }
end

# param.class
# => Array
# param.inspect
# => [:key1, value1] # or '[:key2, value2]' or '[..., ...]', depending on cases.
# 
def self.method_2(param)
  logger.debug "Key   => #{param[0])"
  logger.debug "Value => #{param[1])"
end 
```

给定上面代码中注释掉的输出，当我`method_1`在记录器文件中运行 then 时，我有以下内容：

```
Key   => :key1
Value => :value1
Key   => :key2
Value => :value2
Key   => ...
Value => ... 
```

我想将`param`变量`method_2` *视为键/值对*（*而不是*数组），例如通过制作如下内容

```
def self.method_2(param)
  param do |key, value| # Note: This code line doesn't work. It is just a sample code to clarify the question.
    logger.debug "Key   => #{key.inspect)"
    logger.debug "Value => #{value.inspect)"
  end
end 
```

? 是否可以？如果是这样，怎么做？你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:41:18.360

使用`Hash[]`：

```
param = [:key1, 'value1']
h = Hash[*param]
puts h[:key1] 
```

输出：

> 价值1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:32:59.413

怎么样

```
def self.method_1(hash_params)
  hash_params.each do { |key, value| self.method_2(key, value) }
end

def self.method_2(key, value)
  logger.debug "Key   => #{key)"
  logger.debug "Value => #{value)"
end 
```

否则，您仍然可以在参数中传递哈希，例如

```
def self.method_1(hash_params)
  hash_params.keys.each do { |key| self.method_2(hash_params.slice(key)) }
end 
```

**编辑**：如果你想要一个哈希作为参数，你可以这样做

```
def self.method_1(hash_params)
  hash_params.each do { |key, value| self.method_2({key => value}) }
end 
```

# c - 对 Unix 中 exec(family) 的使用感到困惑

> ID：12524748
> 
> 赞同：0
> 
> 时间：2012-09-21T05:29:52.853
> 
> 标签：c, unix, exec, fork, pipe

我正在编写一个程序，在该程序中我使用系统调用 fork() 创建一个子进程，然后创建一个孙子进程，以及在子进程和孙子进程之间创建一个管道。我认为我的实现相当不错，但是当我运行程序时，它只是直接跳过了我代码中的提示。

基本上我们有这个：

-Process 启动
Fork() create child
Child 创建管道
Fork() 创建孙子，管道继承。

TL;DR- 代码跳过 UI 提示，不确定我是否正确输入数据，不确定我是否正确将数据读入进程。

如何读取管道中的输入？

```
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <stdlib.h>

void main(int argc, char *argv[])
{
        int p[2];
        int pid, pid2;

        pid = fork();

        if(pid == 0)
        {
                pipe(p);
                pid2 = fork();

                switch(pid2)
                {
                        case -1:
                                printf("CASE 1");
                                exit(-1);
                        case 0:
                                close(0);
                                dup(p[0]);
                                close(p[0]);
                                close(p[1]);
                                execl("./Sort/sort", 0);
                                break;
                        default:
                                close(1);
                                dup(p[1]);
                                close(p[1]);
                                close(p[0]);
                                execl("./Pre/pre", 0);
                                break;
                }
          }
          else
          {
                wait(pid);
                printf("Process Completed\n");
                exit(0);
           }
} 
```

pre 的子进程：

```
#include <stdio.h>

void main (int argc, char *argv[])
{
        char n1[20];
        int g1;
        FILE *ofp, *ifp;
        int track;

        ofp = fopen("output.txt", "w");

        while(track != -1)
        {
                printf("Please enter the student's grade and then name, ");
                printf("separated by a space: ");
                scanf("%3d %s", &g1, n1);

                if (g1 >= 60)
                {
                        fprintf(ofp, "%s\n", n1);
                }

                printf("Add another name?(-1 to quit, 0 to continue): ");
                scanf("%d", &track);
        }
        fclose(ofp);

        ifp = fopen("output.txt", "r");
        printf("Students that made a 60+:\n");
        while(fscanf(ifp, "%s", n1) == 1)
                printf("%s\n", n1);

        fclose(ifp); 
```

排序的子进程：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

int stringcmp(const void *a, const void *b)
{
    const char **ia = (const char **)a;
    const char **ib = (const char **)b;
    return strcmp(*ia, *ib);
}

void main(int argc, char *argv[])
{
     int i = 0;
     int num = 0;
     int j = 0;
     char name[20];

          printf("How many names would you like to enter? ");
          scanf("%d", &num);

          char **input = malloc(num * sizeof(char*));

          for (i=0; i < num; i++)
          {
                printf("Please input a name(first only): ");
                scanf("%s", name);
                input[i] = strdup(name);
          }

          qsort(input, num, sizeof(char *), stringcmp);

          printf("Names:\n");

          for(j = 0; j < num; j++)
               printf("%s\n", input[j]);

          for( i = 0; i < num; i++ ) free(input[i]);
          free(input); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:30:53.847

观察`pre` *输出到 stdout 的提示*。该文本将最终出现在管道中，最终将出现在`sort`'s`stdin`中。

你应该`fprintf`把所有的提示都交给`stderr`.

`pre`也不以`sort`;预期的格式输出文本 `sort`需要一个整数`n`，后跟`n`单词（名字）。所以，这应该是在;上输出的*唯一*文本。其他所有内容都需要转到文件或.`pre``stdout``stderr`

PS 另外，使用`dup2(p[0], 0)`而不是`close(0); dup(p[0])`因为它使您的意图更清晰，并可能避免线程问题（当然只有在您有线程时才相关，但值得牢记）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:53:03.697

这是如何做到这一点的两个例子

1.  [http://www.gnu.org/software/libc/manual/html_node/Creating-a-Pipe.html](http://www.gnu.org/software/libc/manual/html_node/Creating-a-Pipe.html)
2.  [http://tldp.org/LDP/lpg/node11.html](http://tldp.org/LDP/lpg/node11.html)

编辑：我可以告诉您，您正在尝试将“./Pre/pre”的输出通过管道传输到“./Sort/sort”的输入，但我不确定“代码跳过 UI 提示”是什么意思，因为并且`case 1:`您`default:`没有任何提示。究竟是什么问题？如果您想要更具体的内容，请在您的问题中解释更多细节。

# linux - 如何将 .sh 文件复制到“bin/sh/”

> ID：12524751
> 
> 赞同：0
> 
> 时间：2012-09-21T05:30:22.033
> 
> 标签：linux, shell

我正在尝试将 .sh 文件复制到“bin/sh”目录中，但无法访问“sh”。有什么方法或命令可以将 .sh 文件复制到“sh”目录？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T06:34:18.083

如果您制作自己的 sh 脚本并希望从您的 shell 提示符中找到并执行它：

*   更改脚本文件 myscript.sh 的权限

    chmod +w myscript.sh

或者

```
chmod 755 myscript 
```

等等..取决于谁被允许执行和更改脚本。

*   您可以将文件复制到 /bin/ （不推荐）或 /usr/bin （没那么糟糕，如果系统上的用户比自己多，则可能放置它的地方），或者添加一个新路径您的 sh 脚本进入 PATH 环境。如果你运行 bash，它在 ~/.bashrc 中。

如果您（bash 中的示例）这样做，则可以在更改 .bashrc 之前从提示中进行测试

```
export PATH=$PATH:~/myscripts/ 
```

对于您已放入自己的目录 myscripts 的脚本。把它放到 /usr/bin 你做

```
sudo cp myscript.sh /usr/bin/. 
```

如果您没有任何 sudo 权限，您将使用您自己的目录绑定到后一种解决方案，您可以在其中放置 sh 文件并更改 PATH。

*   推荐学习：阅读 chmod 和 bash 的手册页。还有关于改变环境变量。

# java - 如何在 2 个不同的类上使用一个数组

> ID：12524752
> 
> 赞同：0
> 
> 时间：2012-09-21T05:30:22.200
> 
> 标签：java, arraylist

我现在有 2 个类，第一个类中有 arraylist。但是在第二堂课上，当我尝试访问 arraylist 时，它一直给我下面的红线，说变量不存在。

这里是第一课...

```
public class BankMain {

    public static void main(String[] args) {
        // TODO Auto-generated method stub
        BankMain main = new BankMain();

        menu();
    }

    public static void cardNumbers(){
        ArrayList<Integer> cardNum = new ArrayList<Integer>();
        Scanner cards = new Scanner(System.in);
        Scanner input = new Scanner(System.in);
        Scanner keyboard = new Scanner(System.in);

        System.out.println("Please select a 5 digit card number");

        cardNum.add(input.nextInt());

        System.out.println("Thank you! You're card number is " +cardNum);

        System.out.println("Type 'c' to go back to main menu.");
        String value  = keyboard.next();
        if(value.equalsIgnoreCase("c")){
            menu();
        }
        else if (!keyboard.equals('c')){
            System.out.println("Invalid Entry!");
        }
    }

    public static void menu(){
        System.out.println("What Would you like to do today?");
        System.out.println();
        System.out.println("Create Account = 1");
        System.out.println("Login = 2");
        System.out.println("Exit = 3");
        query();
    }

    public static void query(){
        Scanner keyboard = new Scanner(System.in);
        double input = keyboard.nextInt();  

        if (input == 2){
            BankMainPart2 main2 = new BankMainPart2();
            System.out.println("Please enter your 5 digit card number.");
            main2.loginCard();
        }
        else if (input == 1){
            cardNumbers();
        }
        else if (input == 3){
            System.out.println("Thank you, have a nice day!");
            System.exit(0);
        }
    }
} 
```

这里是二等...

```
public class BankMainPart2 {
    public static void loginCard(){
        if (cardNum.contains(name)) {
        }
    }
} 
```

我知道我还没有在第二类的 if 语句中输入任何内容，但我只是想让我的数组列表在这两个类上都起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:39:10.893

代码看起来很幼稚。您的问题的一个非常简单的答案是

您尚未在 BankMainPart2 中将任何 cardNum 声明为全局变量或在 loginCard 中声明为局部变量，您认为它如何在 loginCard 方法中可用？

```
ArrayList<Integer> cardNum = new ArrayList<Integer>(); 
```

对 cardNumbers 方法来说是本地的。

你怎么能从其他类访问它？

1.  不能从方法外部访问局部变量，所以首先，使 cardNum 类级别变量
2.  如果您希望其他类能够直接访问它，请将变量设为 public，否则将变量设为私有并创建 getter 方法（如果需要，设置为 setter）。
3.  您也可以在将方法作为参数调用时发送变量
4.  如果这是类级别变量，请将其设为静态并使用 Classname.variable。

- 编辑 -

正如您所要求的详细信息，让我快速概述一下不同的方法。

1.  在方法中声明的变量是局部变量。顾名思义，“本地”，除了方法之外没有人知道有这样一个变量。类中没有其他方法知道此变量的存在，更不用说某些外部类了。
2.  我说您可以将其设为静态，但静态应严格用于类级别存储，而不是对象级别。说一个由同一类的多个对象修改的列表（我希望您了解对象的概念，否则请转到基础知识，否则将不清楚）。现在根据您的示例，我想这不是您想要的。
3.  公共变量通常是 no - no，只有在少数情况下它才会有用（例如在性能最重要的 android 编程中）。通常我们会创建一个变量并提供getter setter。当我们想要授予对变量的访问权限时，通常会使用 getter 或 setter，这又不像您想要的那样。
4.  最后，变量对你的类来说是私有的，但是如果你想要一些方法来处理它，你可以将它作为参数传递，这看起来适合你。

一步步

从方法中取出变量并添加到类级别，注意我从方法名称中删除了静态

```
public class BankMain {
private ArrayList<Integer> cardNum = new ArrayList<Integer>();
// rest of code as it is 
..
..
 BankMain main = new BankMain();
 //change
    main.menu();

 //no need foe static
  public void cardNumbers(){
//no need here now        
//ArrayList<Integer> cardNum = new ArrayList<Integer>();
        Scanner cards = new Scanner(System.in);
        Scanner input = new Scanner(System.in);
..
..

//public static void menu(){
  public void menu(){

//send the list
 //I see there are confusion at times regarding calling of static method.
 //please note objectname.staticMethod() or classname.staticMethod() is one 
 //and same thing. Just that classname.staticMethod() is more clear 
 BankMainPart2.loginCard(cardNum);

} 
```

和

```
public class BankMainPart2 {
    public static void loginCard(ArrayList<Integer> cardNum){
        if (cardNum.contains(name)) {
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:39:43.967

您的方法`BankMainPart2.loginCard`没有“cardNum”的上下文，它不知道它是什么（类型或值）。

为了使该方法能够对数组列表起作用，您必须传递对它的引用，例如...

```
public class BankMainPart2 {
    public static void loginCard(ArrayList<Integer> cardNum){
        if (cardNum.contains(name)) {
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:44:55.643

将 cardnum 数组列表作为 BankMain 类中的实例变量并在 BankMainClass2 中扩展 BankMain 并使用 BankMain 的引用，您将能够像这样访问 cardNum

```
Class BankMain {
  public ArrayList<String> cardNum = new ArrayList<String>();

 }
 Class BankMain2 extends BankMain {
    public void method() {
  BankMain2 main = new BankMain2();
      sysout(main.cardNum.size());
      }
 } 
```

但上述方案仅在 BankMain 类中的 cardNum ArrayList 标记为公共、受保护或默认（Nomodifier）时才有效。如果将其标记为私有和其他非访问修饰符（例如静态和最终），它将不起作用

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T05:48:35.373

您可以尝试其中任何一种

1.将Arraylist声明为public，然后导入第一个类，在第二个类中使用cardNum

2.将cardNum设为静态变量，直接在第二类中作为BankMain.cardNum使用

3.将 Arraylist 作为参数传递给第二个类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T05:48:42.220

关键问题在于您尝试创建类的方式。您当前的问题可以通过@MadProgrammer 给出的答案来解决。但是你绝对应该看看面向对象的编程概念。本节[`How to identify and design a Class?`](http://www.codeproject.com/Articles/22769/Introduction-to-Object-Oriented-Programming-Concep#identify)应该给你一些明确的指示。

# c - 检测不存在的文件

> ID：12524753
> 
> 赞同：1
> 
> 时间：2012-09-21T05:30:31.667
> 
> 标签：c, filesystems

所以这是我曾经使用过一些自我创建的错误检查的第一个程序之一，但是由于某种原因，当我编译它并使用它运行它时：

```
./file test1.txt test2.txt 10 
```

我得到一个绝对错误，提示输出文件存在并且我已经检查了文件，即使我更改输出文件的名称（第二个参数）我什么也没有得到。有谁能帮忙吗？我已经绞尽脑汁好多年了。这是我在 Gentoo 中编译和运行的 UNIX 家庭作业。我让它在 VB 中运行，并且在我的 windows 和 linux 操作系统之间有一个链接文件夹。

```
#include <stdio.h>
#include <unistd.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <stdlib.h>

#define BUFFT 25

int main (int argc, char *argv[])
{
  int count;
  int readin;
  int writeout;

  printf ("This program was called  \"%s\".\n",argv[0]);

  if (argc > 1)
    {
      for (count = 1; count < argc; count++)
    {
      printf("argv[%d] = %s\n", count, argv[count]);
    }
    }
  else
    {
      perror("The command had no arguments.\n");
      exit(-1);

    }
    // check correct number of arguments parsed //

    if  (argc == 4)
    {
        printf("There are the correct number of arguments(4)\n");

        }
        else
        {
            perror("Not enough arguments! please try again \n");
            exit(-1);
            }
    //Check original file is there//

    int openFD = open(argv[1], O_RDWR);
    if (openFD <0)
    {
        perror("Error unable to read file \n");
        exit(-1);
    }

    //Check existence of output file, if it doesn't exist create it//

    int CheckFile = open(argv[2], O_RDONLY);
    if (CheckFile < 0)
    {
        perror("Error output file already exists \n");
        exit(-1);
        }
     else
     {
     int CheckFile = open(argv[2], O_CREAT);
     printf("The file has successfully been created \n");
     }

    //Create buffer

    int bufsize = atoi(argv[3]);
    char *calbuf;
    calbuf = calloc(bufsize, sizeof(char));

    //Read text from original file and print to output//

    readin = read(openFD, calbuf, BUFFT);
    if (readin < 0){
        perror("File read error");
        exit(-1);
    }
    writeout = write(openFD,bufsize,readin);
    if (writeout <0){
        perror("File write error");
        exit(-1);
    }

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:38:24.853

```
 int CheckFile = open(argv[2], O_RDONLY);
    if (CheckFile < 0)
    {
        perror("Error output file already exists \n"); 
```

负返回`open`意味着文件无法打开，很可能是因为它不存在......这并不意味着文件已经存在。无法打开输入文件当然并不意味着输出文件已经存在。请更仔细地检查您的代码是否有明显的错误，例如，

```
int CheckFile = open(argv[2], O_CREAT);
printf("The file has successfully been created \n"); 
```

在这里你不检查返回码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:39:20.097

看看你的代码片段：

```
int CheckFile = open(argv[2], O_RDONLY);
if (CheckFile < 0)
{
    perror("Error output file already exists \n");
    exit(-1);
} 
```

您是说试图以只读模式打开文件。从我在您的问题中读到的内容来看，如果文件不存在，这不是错误，但是在您验证相反的代码中，如果文件不存在，则抛出错误（实际上您的消息错误在这里不正确）。

仔细检查你的逻辑，你会找到你的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T05:51:21.597

**对HANDLE CheckFile**的**公开**调用正在打印**Error File Exists**。这是你的问题。**当找不到输出文件**时，您打印出错误的语句，而且您正在**退出**，这会阻止代码创建任何语句。

 ******```
int CheckFile = open(argv[2], O_RDONLY);
if (CheckFile < 0)
{
    //Means the file doesn't exist
    int CheckFile = open(argv[2], O_CREAT);
    // Check for errors  here
} 
```

你为什么要这样做::

```
writeout = write(openFD,bufsize,readin); 
```

当您的**输出文件句柄是 CheckFile********

# c# - Jquery MultiSelect 自动回发

> ID：12524759
> 
> 赞同：1
> 
> 时间：2012-09-21T05:31:23.663
> 
> 标签：c#, jquery

我在 ASP.NET 中使用 jQuery 多选下拉菜单，我需要获取所有选定的值，但在回发后，我只从服务器端的下拉列表中获取最后一个选定的值。

脚本：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.department).multiselect({
            show: ["bounce", 5], hide: ["blind", 1],
            close: function () {
                debugger;
                var values = new Array();
                $(this).multiselect("getChecked").each(function (index, item) {
                     values.push($(item).val());
                });
                $("input[id*=selectedValues]").val(values.join(","));
                document.getElementById("<%=hdnDepartment.ClientID %>").value = values;
           }
       })
      .multiselectfilter();
    });
</script>
<asp:HiddenField ID="hdnDepartment" runat="server"></asp:HiddenField>
<asp:HiddenField ID="hdnEmployee" runat="server" />
<asp:DropDownList ID="ddlDepartment" runat="server" Width="150px" CssClass="department" onselectedindexchanged="ddlDepartment_SelectedIndexChanged" AutoPostBack="True">
</asp:DropDownList> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:49:23.017

尝试加入值，然后将其写入隐藏字段..

```
$('[id*=hdnDepartment]").val(values.join()) ;

        //OR 
document.getElementById("<%=hdnDepartment.ClientID %>").value = values.join(); 
```

一旦回发发生，您似乎也失去了发泄。所以你需要在回发完成后重新附加它。试试这个。

```
<script type="text/javascript">
    $(document).ready(function () {
        PostBack();

        Sys.WebForms.PageRequestManager.getInstance().add_endRequest(PostBack);
    });

    function PostBack(){
        $('.department).multiselect({
            show: ["bounce", 5], hide: ["blind", 1],
            close: function () {
                debugger;
                var values = new Array();
                $(this).multiselect("getChecked").each(function (index, item) {
                     values.push($(item).val());
                });
                $("input[id*=selectedValues]").val(values.join(","));
                document.getElementById("<%=hdnDepartment.ClientID %>").value = values;
           }
       })
      .multiselectfilter();
    }
</script> 
```

# sql-server - sql server中的xml列属性操作

> ID：12524760
> 
> 赞同：2
> 
> 时间：2012-09-21T05:31:24.063
> 
> 标签：sql-server

我的数据库中有一个名为 User 的表。其中有一个名为 XmlText 的 xml 列，其中包含许多属性。

```
 <userDetails>
  <MobileVerified>True</MobileVerified>
  <EmailVerified>True</EmailVerified>
  <IPAddress>122.160.65.232</IPAddress>
  <Gender>Male</Gender>
  <DateOfBirth>1970-03-22T00:00:00</DateOfBirth>
  <DealingInProperties>residential_apartment_flat</DealingInProperties>
  <DealingInProperties>residential_villa_bungalow</DealingInProperties>
  <DealingInProperties>residential_farm_house</DealingInProperties>
</userDetails> 
```

需要做的是，如果 XmlText 列中存在“residential_apartment_flat”，则我必须将所有“residential_villa_bungalow”值合并到“residential_apartment_flat”，否则默认情况下将保留“residential_apartment_flat”。数据库中有大约 700000 条记录，因此请注意在正常更新与当前更新之间可以使用什么技术。

使用以下列“UserID，XmlText”触发查询

可能的逻辑是这样的..

```
if ('residential_villa_bungalow') exists
(
if ('residential_apartment_flat') exists
    remove the 'residential_villa_bungalow' node as there must be only one 'residential_apartment_flat' node
else
    update 'residential_villa_bungalow' into 'residential_apartment_flat'
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:42:52.887

[XML 数据修改语言 (XML DML)](http://msdn.microsoft.com/en-us/library/ms177454.aspx)

```
-- Delete bungalow where already exist a flat
update YourTable
set    XMLText.modify('delete /userDetails/DealingInProperties[. = "residential_villa_bungalow"] ')
where  XMLText.exist('/userDetails[DealingInProperties = "residential_apartment_flat"]') = 1 and
       XMLText.exist('/userDetails[DealingInProperties = "residential_villa_bungalow"]') = 1

-- Change value from bungalow to flat
update YourTable 
set    XMLText.modify('replace value of (/userDetails/DealingInProperties[. = "residential_villa_bungalow"]/text())[1] 
                       with "residential_apartment_flat"')
where  XMLText.exist('/userDetails[DealingInProperties = "residential_villa_bungalow"]') = 1 
```

# iphone - iOS 5 中的网络调用线程

> ID：12524767
> 
> 赞同：0
> 
> 时间：2012-09-21T05:32:01.267
> 
> 标签：iphone, ios, nsthread

我一直在寻找互联网，但找不到完美的 iOS 线程教程，目前我正在使用 iOS 5，在网络上找到的教程很旧，我的应用程序需要从网络服务中获取数据，所以我想调用网络在线程中操作，我有一个选项卡，在每个选项卡中它从 Web 加载不同类型的数据，因为它开始获取数据，我不希望我的应用程序停留在该选项卡上，我希望该用户可以同时导航到其他选项卡获取该选项卡的数据。怎么可能

编辑：我想要一个流程：

```
 //in a thread
 fetchDataFromWeb(){//during this call activity indicator
 //fetch and make an array of ojbects     
 } 
```

加载数据时触发填充功能

```
laoddata(){//remove activity indicator
//load tableview and other views
} 
```

我怎么知道我的线程完成了它的进程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:48:49.007

看看[NSOperation](http://developer.apple.com/library/ios/#documentation/cocoa/Reference/NSOperation_class/Reference/Reference.html)、[NSThread](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSThread_Class/Reference/Reference.html)或[Grand Central Dispatch](https://developer.apple.com/library/ios/#documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html)

编辑：NSThread 示例

```
//on main thread on some action
 NSDictionary *myParameterDitionary = [..];
 [NSThread detachNewThreadSelector:@selector(aBackThreadMethod:) toTarget:self withObject:myParameterDitionary];

//this is on back thread called
- (void)aBackThreadMethod:(NSDictionary *)variablesDictionary{
    @autoreleasepool {
        //presess data
        NSDictionary *responseDictionary = [..];
        [self performSelectorOnMainThread:@selector(didABackThreadMethod:) withObject:responseDictionary waitUntilDone:YES];
    }
}

//call back on main thread
- (void)didFinishABackThreadMethod:(NSDictionary *)responseDictionary{
   //do stuff ex update views
} 
```

@autoreleasepool 用于 ARC。如果您使用手动内存管理，您必须执行以下操作：

```
NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];
[pool release]; 
```

# cpu - “跨处理器的核心”和“CPU 数量”有什么区别？

> ID：12524769
> 
> 赞同：1
> 
> 时间：2012-09-21T05:32:17.647
> 
> 标签：cpu

例如，考虑以下是我的机器的处理器配置： **Intel(R) Core(TM)i5 CPU 650 @3.20GHz（4 个 CPU）** 那么我应该如何找出我的机器有多少“跨处理器内核”？是4核[即CPU数量]吗？

我已经参考了以下链接，但我仍然不清楚： [http ://www.ehow.com/how_6873203_do-number-core-processors-windows_.html](http://www.ehow.com/how_6873203_do-number-core-processors-windows_.html)

任何人都可以解决我的疑问吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T05:47:30.550

*跨处理器的内核*没有任何意义，或者至少没有什么特别的意义，它是一个通用且非技术的假设/短语，没有确切含义或根本没有任何意义。

[根据英特尔的说法，](http://ark.intel.com/products/43546/Intel-Core-i5-650-Processor-%284M-Cache-3_20-GHz%29)这款 CPU 提供 2 个具有超线程的物理内核，这意味着您可以获得 4 个逻辑内核或所谓的线程。

[超线程](http://en.wikipedia.org/wiki/Hyper-threading)是一项 Intel 技术，它为每个内核提供 2 个线程，因此 2*2 = 4 个线程。

我认为这是与您在此处提出的问题最接近的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T10:25:16.603

让我们首先澄清一下什么是CPU，什么是核心，中央处理单元CPU，可以有多个核心单元，这些核心本身就是一个处理器，能够执行程序但它自包含在同一个芯片上。

过去一个 CPU 分布在多个芯片中，但随着 Moore 的进步，他们在一个芯片（die）中拥有完整的 CPU，从 90 年代开始，制造商开始在同一个 die 中安装更多内核，所以这就是概念的多核。

在这些日子里，在同一个 CPU（芯片或芯片）GPU、Intel Xeon 上可能有数百个内核。90 年代没有开发的其他技术是同时多线程，基本上他们发现可以在同一个单核 CPU 中拥有另一个线程，因为大多数资源已经像 ALU、多个寄存器一样重复了。

所以基本上一个 CPU 可以有多个核心，每个核心都能够同时运行一个或多个线程，我们可能期望未来有更多的核心，但更难以高效编程。

# hibernate - Hibernate Search 4 线程未终止

> ID：12524770
> 
> 赞同：0
> 
> 时间：2012-09-21T05:32:20.900
> 
> 标签：hibernate, hibernate-search

我使用 Hibernate Search 4 编写了一个初学者级程序。每当我运行程序时，都会执行所需的事务（例如，将记录保存在数据库中），但程序不会终止。似乎有一个线程在后台运行，但我不知道哪个线程正在运行或为什么。

```
public static void main(String[] args) {

    Session sess= HibernateUtil.getSf().getCurrentSession();
    FullTextSession fts = org.hibernate.search.Search.getFullTextSession(sess);

    Item it= new Item();
    it.setTitle("Batman");
    it.setDescription("bat man super hero ");
    Item it2= new Item();
    it2.setTitle("Mario");
    it2.setDescription("super mario was game ");

    Transaction t= fts.beginTransaction();
    fts.save(it);
    fts.save(it2);
    t.commit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T22:51:14.453

Hibernate SessionFactory 需要关闭。

```
HibernateUtil.getSf().close(); 
```

当不使用 Hibernate Search 时，您可能没有注意到这个要求，因为 ORM 不运行任何后台线程，但这一直是确保一切都被有序清理的要求。

# xcode - Xcode 不会编译到模拟器

> ID：12524771
> 
> 赞同：4
> 
> 时间：2012-09-21T05:32:22.170
> 
> 标签：xcode, compiler-errors

我刚刚通过 App Store 更新了 Xcode 4.5，来自我从 Apple 开发者帐户获得的以前的版本。自更新以来，我无法将任何应用程序编译到模拟器中。我可以编译到设备上，例如我的 iPhone。

我收到的错误是

```
 fatal error: file 
    '/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/
Developer/SDKs/iPhoneSimulator6.0.sdk/usr/include/Availability.h'
         has been modified since the precompiled header was built

1 error generated. 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-21T05:54:59.620

进入`~/Library/Developer/Xcode/DerivedData/{project name + gobly-gook}`并删除带有您项目名称的文件夹。

***编辑建议后***

**笔记：**

默认情况下，库文件夹是隐藏的，所以我们看不到它。
所以我们有三种方法来使用这个隐藏的 ~/Library 文件夹

1.Unhide Library文件夹通过以下命令取消隐藏~/Library文件夹

```
chflags nohidden ~/Library 
```

现在您可以看到 Library 文件夹为 /Users//Library

2\. 打开查找器的 GO 菜单并按 Alt 键，Library 将作为新菜单项可见。
选择以打开库文件夹

3\. 您可以通过终端访问~/Library 文件夹。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-27T08:00:42.017

有最简单的方法：只是“清洁”项目（*产品*>*清洁*）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-15T13:10:45.427

您可以打开 Organizer（XCode 的右上角），转到 Projects 选项卡，在左侧选择您的项目，然后删除 Derived Data。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-02T09:33:53.610

这发生在我将 Xcode 从 6.0.1 更新到 6.1 时

我清理了项目并且可以成功编译！

# javascript - 如何将值从后面的代码传递给 WP7 中的 javascript 函数

> ID：12524774
> 
> 赞同：1
> 
> 时间：2012-09-21T05:32:57.367
> 
> 标签：javascript, c#, windows-phone-7, dom-events

我正在尝试为 webbrowser 控件中显示的文本实现搜索功能。我有一个搜索功能可以正常工作以突出显示文本，尽管它目前通过在 web 浏览器中的 javascript 中创建一个搜索栏来实现这一点。这样做的问题是，根据页面的大小，javascript搜索栏的大小总是不同的，这非常令人困惑。我希望能够将用户在我的 WP7 应用程序的文本框中输入的搜索值传递给这个 javascript 函数，然后让它简单地突出显示这些值。我不知道如何将值传递给 javascript 函数，而且我在完成这项工作时遇到了很多困难。

Javascript 搜索功能（在文本文件中）

```
javascript:(
function()
{
function G()
{
    var pf=doc.getElementById('pf');
    var qt=doc.getElementById('qt');
    if(null==pf)
    {
        pf=doc.createElement('div');
        pf.id='pf';
        var s=pf.style;
        s.position='absolute';
        s.zIndex='99';
        s.top=(scT||scBT)+'px';
        s.left=(scL||scBL)+'px';
        s.width='100%';
        s.backgroundColor='#FFFF00';
        pf.appendChild(doc.createTextNode('Search: '));
        qt=doc.createElement('input');
        qt.id='qt';
        qt.type='text';
        pf.appendChild(qt);
        var sb=doc.createElement('input');
        sb.type='button';
        sb.value='Find';
        sb.onclick=function()
        {
            P(qt.value)
        };
        pf.appendChild(sb);
        doc.body.appendChild(pf);
    }
    else
    {
        pf.style.display='inline';
        count=0;
    }
}
function P(s)
{
    document.getElementById('pf').style.display='none';
    if(s==='')
        return;
    var n=srchNode(document.body,s.toUpperCase(),s.length);
    alert("Found "+count+" occurrence"+(count==1?"":"s")+" of '"+s+"'.");
    pf.parentNode.removeChild(pf);
    return n;
}
function srchNode(node,te,len)
{
    var pos,skip,spannode,middlebit,endbit,middleclone;
    skip=0;
    if(node.nodeType==3)
    {
        pos=node.data.toUpperCase().indexOf(te);
        if(pos>=0)
        {
            spannode=document.createElement("SPAN");
            spannode.style.backgroundColor="red";
            middlebit=node.splitText(pos);
            endbit=middlebit.splitText(len);
            middleclone=middlebit.cloneNode(true);
            spannode.appendChild(middleclone);
            middlebit.parentNode.replaceChild(spannode,middlebit);
            ++count;
            skip=1;
            }
        }
        else
        {
            if(node.nodeType==1&&node.childNodes&&node.tagName.toUpperCase()!="SCRIPT"&&node.tagName.toUpperCase!="STYLE")
            {
                for(var child=0;child<node.childNodes.length;++child)
                {
                    child=child+srchNode(node.childNodes[child],te,len);
                }
            }
        }
        return skip;
    }
    var count=0,scL=0,scT=0,scBL=0,scBT=0;
    var w=window,doc=document;
    if(typeof doc.body!='undefined'&&typeof doc.body.scrollLeft!='undefined')
    {
        scBL=doc.body.scrollLeft;
        scBT=doc.body.scrollTop;
    }
    if(typeof doc.documentElement!='undefined'&&typeof doc.documentElement.scrollLeft!='undefined')
    {
        scL=doc.documentElement.scrollLeft;
        scT=doc.documentElement.scrollTop;
    }
    G();
})() 
```

在页面上查找方法

```
public void FindOnPage()
    {
        var resource = Application.GetResourceStream(new Uri("Resources/FindOnPage/FindOnPage.txt", UriKind.Relative));
        string text;
        StreamReader sr = new StreamReader(resource.Stream);

        //while((text = sr.ReadToEnd()) != null) 
        if ((text = sr.ReadToEnd()) != null)
        {
            TheWebBrowser.InvokeScript("eval", text);
        } 
    } 
```

假设我有一个名为**SearchBar**的搜索栏，我将如何通过 javascript 函数将文本传递给用户输入，以便突出显示文本？我没有使用 javascript 的经验，因此我们将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:27:51.773

There is no direct way of passing it. You can string replace the parameter before calling eval, first modify your javascript like this

```
javascript:(
function(searchString)
{
function P(s)
{
    if(s==='')
        return;
    var n=srchNode(document.body,s.toUpperCase(),s.length);
    alert("Found "+count+" occurrence"+(count==1?"":"s")+" of '"+s+"'.");
    return n;
}
function srchNode(node,te,len)
{
    var pos,skip,spannode,middlebit,endbit,middleclone;
    skip=0;
    if(node.nodeType==3)
    {
        pos=node.data.toUpperCase().indexOf(te);
        if(pos>=0)
        {
            spannode=document.createElement("SPAN");
            spannode.style.backgroundColor="red";
            middlebit=node.splitText(pos);
            endbit=middlebit.splitText(len);
            middleclone=middlebit.cloneNode(true);
            spannode.appendChild(middleclone);
            middlebit.parentNode.replaceChild(spannode,middlebit);
            ++count;
            skip=1;
            }
        }
        else
        {
            if(node.nodeType==1&&node.childNodes&&node.tagName.toUpperCase()!="SCRIPT"&&node.tagName.toUpperCase!="STYLE")
            {
                for(var child=0;child<node.childNodes.length;++child)
                {
                    child=child+srchNode(node.childNodes[child],te,len);
                }
            }
        }
        return skip;
    }
    var count=0,scL=0,scT=0,scBL=0,scBT=0;
    var w=window,doc=document;
    if(typeof doc.body!='undefined'&&typeof doc.body.scrollLeft!='undefined')
    {
        scBL=doc.body.scrollLeft;
        scBT=doc.body.scrollTop;
    }
    if(typeof doc.documentElement!='undefined'&&typeof doc.documentElement.scrollLeft!='undefined')
    {
        scL=doc.documentElement.scrollLeft;
        scT=doc.documentElement.scrollTop;
    }
    P(searchString);
})("#search#") 
```

Then in your C# replace #search# with your SearchString.

```
public void FindOnPage()
    {
        var resource = Application.GetResourceStream(new Uri("Resources/FindOnPage/FindOnPage.txt", UriKind.Relative));
        string text;
        StreamReader sr = new StreamReader(resource.Stream);

        //while((text = sr.ReadToEnd()) != null) 
        if ((text = sr.ReadToEnd()) != null)
        {
        text = text.Replace("#search#",SearchBar.Text); //Replace SearchBar.Text with the string you want to search    
        TheWebBrowser.InvokeScript("eval", text);
        } 
    } 
```

# java - 我的 android 应用程序在模拟器中崩溃

> ID：12524780
> 
> 赞同：4
> 
> 时间：2012-09-21T05:33:10.877
> 
> 标签：java, android, eclipse, android-emulator, android-logcat

我试图制作一个简单的应用程序，我想添加一个新的 Activity 但是当我在模拟器上运行我的应用程序时（Eclipse 没有给我任何错误）它只是崩溃了。

这是我的日志：

```
09-21 05:18:13.066: I/Process(255): Sending signal. PID: 255 SIG: 9
09-21 05:18:13.106: I/ActivityManager(52): Process com.example.proyecto_1 (pid 255) has died.
09-21 05:18:13.172: I/UsageStats(52): Unexpected resume of com.android.launcher while     already resumed in com.example.proyecto_1
09-21 05:18:13.402: E/gralloc(52): [unregister] handle 0x14d478 still locked (state=40000001)
09-21 05:18:13.462: W/InputManagerService(52): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@44de1dc8
09-21 05:18:16.193: W/KeyCharacterMap(107): No keyboard for id 0
09-21 05:18:16.203: W/KeyCharacterMap(107): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
09-21 05:18:18.594: I/ActivityManager(52): Starting activity: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.example.proyecto_1/.MainActivity }
09-21 05:18:18.673: I/ActivityManager(52): Start proc com.example.proyecto_1 for activity com.example.proyecto_1/.MainActivity: pid=261 uid=10028 gids={}
09-21 05:18:18.913: D/ddm-heap(261): Got feature list request
09-21 05:18:19.083: D/AndroidRuntime(261): Shutting down VM
09-21 05:18:19.123: W/dalvikvm(261): threadid=3: thread exiting with uncaught exception (group=0x4001b188)
09-21 05:18:19.123: E/AndroidRuntime(261): Uncaught handler: thread main exiting due to uncaught exception
09-21 05:18:19.233: E/AndroidRuntime(261): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.example.proyecto_1/com.example.proyecto_1.MainActivity}: java.lang.ClassNotFoundException: com.example.proyecto_1.MainActivity in loader dalvik.system.PathClassLoader@4001b500
09-21 05:18:19.233: E/AndroidRuntime(261):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
09-21 05:18:19.233: E/AndroidRuntime(261):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
09-21 05:18:19.233: E/AndroidRuntime(261):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
09-21 05:18:19.233: E/AndroidRuntime(261):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
09-21 05:18:19.233: E/AndroidRuntime(261):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-21 05:18:19.233: E/AndroidRuntime(261):  at android.os.Looper.loop(Looper.java:123)
09-21 05:18:19.233: E/AndroidRuntime(261):  at android.app.ActivityThread.main(ActivityThread.java:4363)
09-21 05:18:19.233: E/AndroidRuntime(261):  at java.lang.reflect.Method.invokeNative(Native Method)
09-21 05:18:19.233: E/AndroidRuntime(261):  at java.lang.reflect.Method.invoke(Method.java:521)
09-21 05:18:19.233: E/AndroidRuntime(261):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
09-21 05:18:19.233: E/AndroidRuntime(261):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
09-21 05:18:19.233: E/AndroidRuntime(261):  at dalvik.system.NativeStart.main(Native Method)
09-21 05:18:19.233: E/AndroidRuntime(261): Caused by: java.lang.ClassNotFoundException: com.example.proyecto_1.MainActivity in loader dalvik.system.PathClassLoader@4001b500
09-21 05:18:19.233: E/AndroidRuntime(261):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
09-21 05:18:19.233: E/AndroidRuntime(261):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
09-21 05:18:19.233: E/AndroidRuntime(261):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
09-21 05:18:19.233: E/AndroidRuntime(261):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
09-21 05:18:19.233: E/AndroidRuntime(261):  at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
09-21 05:18:19.233: E/AndroidRuntime(261):  ... 11 more
09-21 05:18:19.314: I/Process(52): Sending signal. PID: 261 SIG: 3
09-21 05:18:19.314: I/dalvikvm(261): threadid=7: reacting to signal 3
09-21 05:18:19.333: I/dalvikvm(261): Wrote stack trace to '/data/anr/traces.txt'
09-21 05:18:21.073: I/Process(261): Sending signal. PID: 261 SIG: 9
09-21 05:18:21.093: I/ActivityManager(52): Process com.example.proyecto_1 (pid 261) has died.
09-21 05:18:21.114: I/UsageStats(52): Unexpected resume of com.android.launcher while already resumed in com.example.proyecto_1
09-21 05:18:21.263: W/InputManagerService(52): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@44dae108 
```

这是我的 MainActivity：

```
package com.example.proyecto_1;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button button1 = (Button) findViewById(R.id.button1);
    button1.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent test_scrn1 = new Intent(MainActivity.this, TestScrn1.class);
            startActivity(test_scrn1);
        }
    });

    }
} 
```

最后这是我的 AndroidManifest：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.proyecto_1"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="7"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" android:hasCode="false" android:allowTaskReparenting="false">
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name="TestScrn1"></activity>
</application> 
```

我不知道我做错了什么，我一直在寻找解决方案，但我不能，请帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T05:43:39.070

你的错误有很多可能性。

*   First Put (.)DOT 在 android 中引导您的 TestScrn1 Activity 声明。
*   确保清单文件中的 android:hasCode 未设置为 false。
*   清理您的项目并再次运行。
*   勾选项目 > 自动构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:34:55.823

这是`dot(.)`.

清单文件中的更改。

```
<activity android:name="TestScrn1"></activity> 
```

**（到）**

```
<activity android:name=".TestScrn1"></activity> 
```

给出完全限定的类名是一种很好的做法，例如

```
<activity android:name="com.example.proyecto_1.TestScrn1"></activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:47:08.207

你应该试试这个

```
<activity android:name=".Your Activity Name"></activity>

and Dont Remove dot(.) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T05:47:25.160

还有更多的可能

*   再次保存您的 xml 文件
*   清理你的项目
*   检查你的班级名称
*   它不是必要的 Put(.) 所以不用担心
*   还要检查 Class this Method

    ```
     @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.yourlayout);

        } 
    ```

# javascript - 如何从另一个 javascript 调用 javascript 函数，其中两者都在同一个 html 上

> ID：12524782
> 
> 赞同：3
> 
> 时间：2012-09-21T05:33:37.503
> 
> 标签：javascript, html, facebook, function

我有一个 html 代码，其中有两个 javascript。我想将 1 个 javascript 的功能调用到另一个中。下面给出的是我的javascript的结构。

```
<html>
<head>
<script>
function a()
{
//function code
this.parent["asd"].b(); //problem in dis line 
}
</script>
<body>
<script>
var asd= new Asd();
function b()
{
//function code here
}
</script>
</body>
</html> 
```

当我在本地或从 Web 服务器使用它时，它工作正常。但是，如果我在我的 facebook 应用程序中上传此页面，则父类会指向其他地方，因为它位于 iframe 中。如何解决它。有没有其他方法可以调用该函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T05:49:38.523

你可以：

=> 将您要使用的两个 javascript 合二为一

或者

=> 首先包含一个文件，您要在另一个 javascript 中使用哪个函数，这样它就会自动从该 javascript 文件中获取值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T05:38:27.400

您是否在同一个脚本标记中编写函数或在另一个它很容易使用函数名称调用的函数并不重要，如下所示

```
<html>
<head>
<script>
function a()
{
//function code
b(); //problem in dis line 
}
</script>
<body>
<script>
var asd= new Asd();
function b()
{
//function code here
}
</script>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T10:44:05.860

**将所有 Javascript 文件合并为一个**完整的文件总是更好`js`。因此，您可以将两个 javascript 文件合并在一起。这也可以让你摆脱这个麻烦。你也可以看到[这个线程](https://stackoverflow.com/questions/5511989/combine-multiple-jquery-script-files-into-one-js-file)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T11:36:10.197

没关系。您可以在同一文件中调用 HTML 中已引用的任何函数。因为最终所有内容都在同一页面中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-24T11:28:23.867

你可以尝试`eval("asd").b();`而不是`this.parent["asd"].b();`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T11:54:31.660

谢谢大家。我得到了解决方案。我从 javascript 中删除了功能词。现在它工作正常。

# php - 在其他两列为零的列中查找最小值

> ID：12524784
> 
> 赞同：1
> 
> 时间：2012-09-21T05:33:57.100
> 
> 标签：php, mysql

我正在尝试编写一个 MySQL 搜索，它将找到`imageID`其他两列 = 0 的最低值。在这种情况下，`imageID`返回值为 8。

```
ImageId   Processing   Finished
  5           0           1
  6           1           0
  7           0           1
  8           0           0
  9           1           0
  10          0           1
  11          1           0
  12          0           0
  13          0           0 
  14          0           0
  15          0           0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:36:30.840

> 找到其他两列 = 0 的最低 imageID

只需在查询中转换您的句子：

```
（查找）（最低的 imageID）（其中其他两列 = 0）  
[SELECT] [MIN(imageID)] [WHERE Processing = 0 AND Finished = 0]

```

所以你的完整查询应该是（使用[`MIN()`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_min)聚合函数）：

```
SELECT MIN(ImageId) as LowestImageId
FROM Mytable 
WHERE Processing = 0 
  AND Finished = 0 
```

# [*请参阅此 SQLFiddle 演示*](http://sqlfiddle.com/#!2/a71d9/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T05:35:44.393

```
select min(ImageId) from tablename where processing=0 and finished=0; 
```

这是相当基本的 SQL，如果您自己进行一些研究，很容易找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:39:16.693

```
SELECT MIN(ImageId) FROM your_table WHERE Processing = 0 AND Finished = 0 
```

# xcode - iOS 6 模拟器游戏中心 authenticateHandler 崩溃

> ID：12524791
> 
> 赞同：0
> 
> 时间：2012-09-21T05:34:36.890
> 
> 标签：xcode, ios-simulator, ios6

在 iOS 6 中，现在需要像这样对游戏中心进行身份验证：

```
GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];
localPlayer.authenticateHandler = ^(UIViewController *viewController, NSError *error){
    if (viewController != nil)
    {

        [[AppDelegate sharedDelegate].viewController  presentModalViewController:viewController animated:YES];

         }
         else if (localPlayer.isAuthenticated)
         {   
             [self authenticatedGC];
         }
         else
         {
             [self disableGC];
         }
        };

} 
```

这段代码在我运行 iOS6 的 iphone 4 上运行良好，但在我的 iOS 6 模拟器上崩溃，并带有以下堆栈跟踪：

```
0 objc_msgSend
1 -[GKLocalPlayer setAuthenticateHandler:]
2 -[GCHelper authenticateLocalUser]
3 -[AppDelegate applicationDidFinishLaunching 
```

我试图重新安装 xcode，以为模拟器缺少 iOS 6 sdk 或其他东西，但它仍然在这里崩溃。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T15:50:20.617

您可能想检查[这个问题](https://stackoverflow.com/questions/12427979/gamecenter-authentication-in-landscape-only-app-throws-uiapplicationinvalidinter)，因为您的应用程序可能由于自动旋转问题和游戏中心而崩溃，而不是身份验证机制本身

# jquery - 动态添加复选框

> ID：12524799
> 
> 赞同：0
> 
> 时间：2012-09-21T05:35:33.973
> 
> 标签：jquery, dynamic, checkbox

如何使表格上的复选框可以被选中？我有下面的代码通过使用 jquery 函数动态添加复选框。下面的代码成功动态添加复选框，但问题是函数添加的复选框不能被选中（禁用）。

```
<table id="detail">
  <tr>
    <td><input type="checkbox" id="cb" name="cb[]"></td>
  </tr>
</table> 
```

这是添加行的按钮：

```
<input type="button" id="addRow" value="ADD ROW" /> 
```

这是我拥有的 jquery 函数：

```
<script type="text/javascript">
  $(document).ready(function() {
    $("#addRow").click(function() {
      $('#detail tbody>tr:last').clone(true).insertAfter('#detail tbody>tr:last');
    });
  });
</script> 
```

任何人都可以帮助代码？谢谢... ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T05:41:44.243

请先更正javascript函数！

```
 $(document).ready(function() {
    $("#addRow").click(function() {
      $('#detail tbody>tr:last').clone(true).insertAfter('#detail tbody>tr:last');
    });
  }); 
```

而且您的代码对我有用意味着选中了复选框（仅当您勾选最后一个复选框时，您的代码才会克隆它）

查看我的[jsfiddle](http://jsfiddle.net/x8rWa/)或[jsfiddle 更新](http://jsfiddle.net/x8rWa/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T05:44:07.837

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:40:53.077

```
 $("#addRow").click(function() {
     var row = $('#detail tbody>tr:last').clone(true);

     // Clear last value
     row.find("input:checkbox").attr('checked', false);

     // Change name attr
     row.find("#cb").attr('name', 'newNmae');

     //disabled set as a true
     row.find("input:checkbox").attr('disabled', true);

     row.insertAfter('#detail tbody>tr:last');
}); 
```

# oracle - 从 UML 生成 PL/SQL

> ID：12524801
> 
> 赞同：0
> 
> 时间：2012-09-21T05:35:43.217
> 
> 标签：oracle, uml

是否有任何工具（开源或免费软件）可以从 UML 图生成 PL/SQL 代码（带有对象）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:40:27.210

您可以尝试通过 Eclipse 建模工具项目编写自己的转换。您需要 Papyrus 作为 UML 图形编辑器来创建符合 Eclipse 的 ECORE（它是 MOF 元元模型的 Eclipse 实现）的 UML 模型。然后，您可以编写 Acceleo 脚本来描述如何将 UML 元素（即类、原型、属性、操作等）转换为您需要的代码（即 PL/SQL）。Acceleo 是 MOFM2T 语言的 Eclipse 实现，它是模型到文本转换的 OMG 标准 (http://www.omg.org/spec/MOFM2T)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T22:59:47.677

我认为从 UML 图生成 java 代码然后在你的 java 代码中添加 ORM 注释然后使用 dali Eclipse 项目来生成你的 SQL 代码会更容易。

# node.js - 节点js中的图片上传

> ID：12524804
> 
> 赞同：2
> 
> 时间：2012-09-21T05:35:53.120
> 
> 标签：node.js, file-upload

我是 node js 的新手，现在我想做图像上传。所以我下载了 express 框架来处理上传。请帮助我如何在服务器端处理上传。

我创建了这样的表单如何在后端节点js中处理这个

```
 <form method="post" enctype="multipart/form-data" action="/file-upload">
<input type="text" name="username">
<input type="password" name="password">
<input type="file" name="thumbnail">
<input type="submit"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T11:46:14.167

使用此方法上传

```
app.post('/upload', function(req, res) {

    // get the temporary location of the file
    var tmp_path = req.files.thumbnail.path;
    // set where the file should actually exists - in this case it is in the "images" directory
   target_path = '/tmp/' + req.files.thumbnail.name;
    // move the file from the temporary location to the intended location
    fs.rename(tmp_path, target_path, function(err) {
        if (err) throw err;
        // delete the temporary file, so that the explicitly set temporary upload dir does not get filled with unwanted files
        fs.unlink(tmp_path, function() {
            if (err) throw err;

        });
    });
}); 
```

在检索时显示此方法中的路径

```
fs.readFile(target_path, "binary", function(error, file) {
    if(error) {
      res.writeHead(500, {"Content-Type": "text/plain"});
      res.write(error + "\n");
      res.end();
    } else {

      res.writeHead(200, {"Content-Type": "image/png"});
      res.write(file, "binary");

    }
 }); 
```

参考[nodejs expressjs上传图片并展示](https://stackoverflow.com/questions/12404164/nodejs-expressjs-upload-images-and-display-them/12419974#12419974)更多细节

# c# - C# 中的 Itextsharp TernaryTree.Iterator

> ID：12524805
> 
> 赞同：0
> 
> 时间：2012-09-21T05:35:57.137
> 
> 标签：c#, itextsharp

```
 PdfReader reader = new PdfReader(path);
  for (int i = 0; i < reader.XrefSize; i++) 
        {
        PdfObject pdfobj = reader.GetPdfObject(i);
        if (pdfobj == null || !pdfobj.IsStream()) 
        {
            continue;
        }
        PdfStream stream = (PdfStream) pdfobj;
  for (TernaryTree.Iterator it = (TernaryTree.Iterator)stream.Keys; it.HasMoreElements(); )// Error
            {
                PdfName name = (PdfName)it.NextElement();
                PdfObject pdobj = stream.Get(name);
                if (pdobj is PRIndirectReference)
                {
                    PRIndirectReference inref = (PRIndirectReference)pdobj;
                }
            } 
```

如何正确地将类型键转换为迭代器？

在 Java 的源代码中看起来像这样：

```
for (Iterator it = stream.getKeys().iterator(); it.hasNext();) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T08:31:07.543

尝试这个：

```
 PdfReader reader = new PdfReader(inputFileName);
        for (int i = 0; i < reader.XrefSize; i++)
        {
            PdfObject pdfobj = reader.GetPdfObject(i);
            if (pdfobj == null || !pdfobj.IsStream())
                continue;

            PdfStream stream = (PdfStream)pdfobj;
            foreach (KeyValuePair<PdfName, PdfObject> kv in stream)
            {
                PdfName name = kv.Key;
                PdfObject pdobj = stream.Get(name);
                if (pdobj is PRIndirectReference)
                    PRIndirectReference inref = (PRIndirectReference)pdobj;
            }
        } 
```

# java - 解决难题的程序设计

> ID：12524806
> 
> 赞同：0
> 
> 时间：2012-09-21T05:35:59.753
> 
> 标签：java, recursion, puzzle, backtracking

对不起，如果我在这里发错了。但我有点不知道我应该在哪个 Stackoverflow 频道发布这个，并认为这是最好的。

我正在解决一个 KenKen 拼图。它与数独非常相似，并且有一些带有总和和运算符的笼子，我们必须使用唯一的数字来解决填充框。

为了解决这个难题，我将有一个输入，我可以在其中获取每个笼子的值，例如笼子的总价值，要使用的广告盒的运营商。

根据我使用回溯解决问题的方法：

1.  我正在解析输入以为每个笼子创建一个类数据结构。
2.  后来我为每个笼子创建了一个类对象数组。

3.  此后，我将使用回溯应用我的算法来解决这个难题。

在我开始编码之前，我只是想在这里与人们讨论一下，如果他们确实认为编程方法是正确的，或者我是否仍然需要对方法进行更改，或者他们是否想建议我解决一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:45:56.083

我认为回溯可能是解决这个问题的最好方法之一。老实说，我现在想不出更好的东西。

我不知道你到底打算在你的算法中做什么。但我建议你不应该只依赖回溯本身。我只看了维基百科上的文章才知道 KenKen 是什么。但似乎有可能从一开始就改进回溯：

对于回溯，您通常使用堆栈。因此，您可能有一叠物品，这些物品会告诉您将哪个数字放在哪个笼子里。现在你可以给每个堆栈对象一个属性，告诉你的算法是否只是从一堆可能性中选择了这个数字，或者你的算法是否因为没有其他选择而被迫在这个地方选择这个数字。所以代替这样的堆栈：

```
(2,2) 5
(1,1) 4
(0,0) 1 
```

您的堆栈将如下所示：

```
(2,2) 5 CHOSEN
(1,1) 4 IMPLIED
(0,0) 1 CHOSEN 
```

然后你必须只回溯到最后一个“暗示”，因为你不能在这里选择其他值。此外，如果所有其他选择都被证明是错误的，则会暗示一些事情。我不知道这在 KenKen 中能走多远。你应该确保，一开始的选择不能强迫你的算法稍后使用 IMPLIED，尽管这个数字实际上不是 IMPLIED 的。

# opengl - 使用 OpenGL 的快速调色屏幕 blit

> ID：12524813
> 
> 赞同：2
> 
> 时间：2012-09-21T05:36:42.003
> 
> 标签：opengl, 2d

游戏使用软件渲染在内存中绘制全屏调色板（8 位）图像。

使用 OpenGL 将该图像放在屏幕上的最快方法是什么？

我尝试过的事情：

*   `glDrawPixels`with`glPixelMap`指定调色板，并让 OpenGL 进行调色板映射。性能非常糟糕（~5 FPS）。
*   在软件中进行调色板映射（索引 -> BGRX），然后使用`glDrawPixels`. 性能更好，但 CPU 使用率仍然比使用`DirectDraw`相同软件调色板映射的 32 位高得多。

我应该改用某种纹理吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T08:42:18.103

> *   glDrawPixels 和 glPixelMap 来指定调色板，并让 OpenGL 做调色板映射。性能非常糟糕（~5 FPS）。

这并不奇怪。glDrawPixels 开始时不是很快，glPixelMap 将在 CPU 上进行索引/调色板→ RGB 转换，当然不是非常优化的代码路径。

> *   在软件中进行调色板映射（索引 -> BGRX），然后使用 glDrawPixels 进行绘制。

glDrawPixels 是 OpenGL 中最慢的函数之一。这有两个主要原因：首先它是一个没有经过优化的代码补丁，其次它直接写入目标帧缓冲区，因此每次调用它都会强制管道同步。同样在大多数 GPU 上，它没有任何缓存支持。

我建议您将索引图像放入单通道纹理，例如 GL_R8（用于 OpenGL-3 或更高版本）或 GL_LUMINANCE8，并将您的调色板放入 1D RGB 纹理，以便用作纹理坐标的索引确实查找颜色。使用纹理作为 LUT 是完全正常的。通过这种组合，您可以使用片段着色器进行原位调色板索引到颜色的转换。

片段着色器看起来像这样

```
#version 330

uniform sampler2D image;
uniform sampler1D palette;

in vec2 texcoord;

void main()
{
    float index = tex2D(image, texcoord).r * 255.f; // 255 for a 8 bit palette
    gl_FragColor = texelFetch(palette, index, 0);
} 
```

# session - zf2中的Flash messenger

> ID：12524817
> 
> 赞同：3
> 
> 时间：2012-09-21T05:36:56.890
> 
> 标签：session, zend-framework2

我如何在 zend framwork 2 中使用 flash messenger？会话文档还没有。有人知道吗？但是会话库在那里。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-12T05:39:04.447

**更新 ：**

Zend Framework 新版本添加了 FlashMessenger View Helper ，在路径中找到`/library/Zend/View/Helper/FlashMessenger.php`

[FlashMessenger.php](https://github.com/zendframework/zf2/blob/master/library/Zend/View/Helper/FlashMessenger.php)

* * *

**旧答案：**

我写了一个自定义视图助手，用于打印 Flash 消息

在 /module/Application/Module.php

```
public function getViewHelperConfig()
{
    return array(                    
        'factories' => array(                                               
            'flashMessage' => function($sm) {      

                 $flashmessenger = $sm->getServiceLocator()
                                      ->get('ControllerPluginManager')
                                      ->get('flashmessenger');                                   

                 $message    = new \My\View\Helper\FlashMessages( ) ;
                 $message->setFlashMessenger( $flashmessenger );

                 return $message ;
               } 
           ),
    );
} 
```

在 /library/My/View/Helper/FlashMessages.php 中创建自定义视图助手

```
namespace My\View\Helper;
use Zend\View\Helper\AbstractHelper;

class FlashMessages extends AbstractHelper
{

        protected $flashMessenger;

        public function setFlashMessenger( $flashMessenger )
        {
                $this->flashMessenger = $flashMessenger ;
        }

        public function __invoke( )
        {

                 $namespaces = array( 
                     'error' ,'success', 
                     'info','warning' 
                 );

                 // messages as string
                 $messageString = '';

                 foreach ( $namespaces as $ns ) {

                        $this->flashMessenger->setNamespace( $ns );

                        $messages = array_merge(
                                 $this->flashMessenger->getMessages(),
                                 $this->flashMessenger->getCurrentMessages()
                        );

                        if ( ! $messages ) continue;

                        $messageString .= "<div class='$ns'>"
                                        . implode( '<br />', $messages )
                                    .'</div>';
                }

                return $messageString ;
        }
} 
```

然后从 layout.phtml 或您的 view.phtml 简单调用

```
echo $this->flashMessage(); 
```

让我展示控制器动作的示例

```
public function testFlashAction()
{
          //set flash message
          $this->flashMessenger()->setNamespace('warning')
                 ->addMessage('Mail sending failed!');

          //set flash message
          $this->flashMessenger()->setNamespace('success')
                 ->addMessage('Data added successfully');

          // redirect to home page 
          return $this->redirect()->toUrl('/');
} 
```

在主页上，它打印

```
<div class="success">Data added successfully</div>
<div class="warning">Mail sending failed!</div> 
```

希望这会有所帮助！

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-21T05:59:48.243

我前段时间写了一篇关于这个的帖子。你可以[在这里找到它](http://samminds.com/2012/08/flashmessenger-in-zend-framework-2/ "Zend Framework 2 中的 FlashMessenger")

基本上你使用它就像之前一样。

```
<?php
public function commentAction()
{
    // ... display Form
    // ... validate the Form
    if ($form->isValid()) {
        // try-catch passing data to database

        $this->flashMessenger()->addMessage('Thank you for your comment!');

        return $this->redirect()->toRoute('blog-details'); //id, blabla
    }
}

public function detailsAction()
{
    // Grab the Blog with given ID
    // Grab all Comments for this blog
    // Assign the view Variables

    return array(
        'blog' => $blog,
        'comments' => $comments,
        'flashMessages' => $this->flashMessenger()->getMessages()
    );
} 
```

然后在你的 .phtml 文件中你这样做：

```
// details.phtml
<?php if(count($flashMessages)) : ?>
<ul>
    <?php foreach ($flashMessages as $msg) : ?>
    <li><?php echo $msg; ?></li>
    <?php endforeach; ?>
</ul>
<?php endif; ?> 
```

显然这不是很方便，因为您必须对每个 .phtml 文件执行此操作。因此，在布局中执行此操作最多只能执行以下操作：

```
<?php
// layout.phtml
// First get the viewmodel and all its children (ie the actions viewmodel)
$children = $this->viewModel()
                 ->getCurrent()
                 ->getChildren();

$ourView  = $children[0];

if (isset($ourView->flashMessages) && count($ourView->flashMessages)) : ?>
<ul class="flashMessages">
    <?php foreach ($ourView->flashMessages as $fMessage) : ?>
    <li><?php echo $fMessage; ?></li>
    <?php endforeach; ?>
</ul>
<?php endif; ?> 
```

如果您需要进一步的描述，请参阅我的博客，但我想代码本身很清楚（除了 layout.phtml 示例）。或者，您总是可以自由地编写自己的视图助手，让它在您的视图模板中看起来更干净一些。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T13:50:51.393

如何在 View Helper 中获取 Flashmessenger 的消息 - 按照 Sam 的要求共享代码。

View 助手应该实现 ServiceManagerAwareInterface 接口和相关方法。该插件现在可以访问服务管理器，我们可以使用它来获取服务定位器并最终访问 Flash Messenger。

自从我最初编写这段代码以来，我没有接触过它——所以可能有一种更优雅的方式来做这件事。

```
protected function getMessages()
{
    $serviceLocator = $this->getServiceManager()->getServiceLocator();
    $plugin = $serviceLocator->get('ControllerPluginManager');
    $flashMessenger = $plugin->get('flashmessenger');

    $messages = $flashMessenger->getMessages();

    // Check for any recently added messages
    if ($flashMessenger->hasCurrentMessages())
    {
        $messages += $flashMessenger->getCurrentMessages();
        $flashMessenger->clearCurrentMessages();
    }

    return $messages;
} 
```

从插件中调用 getMessages() 应该返回一个消息数组，这些消息可以传递给部分并呈现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-28T10:14:05.800

将以下代码添加到视图以呈现错误消息：

```
<?php echo $this->flashmessenger()
    ->setMessageOpenFormat('<div class="alert alert-danger"><ul%s><li>')
    ->setMessageCloseString('</li></ul></div>')
    ->render('error')
; ?> 
```

在之前的请求中，请确保您通过在控制器中运行以下代码来创建错误消息：

```
$this->flashmessenger()->addErrorMessage('Whops, something went wrong...'); 
```

# objective-c - 带有 Windows 共享文件夹的 iPhone

> ID：12524819
> 
> 赞同：2
> 
> 时间：2012-09-21T05:37:09.040
> 
> 标签：objective-c, shared-directory

我已经搜索了 3 天来寻找一个可以帮助我解决问题的简单想法。我在这个论坛上找到了大多数可能的解决方案，但没有一个真正帮助我。（也许我没有找到正确的关键字）

我的情况是：

*   我有一个基于 JAVA 的应用程序，它与 mySQL 数据库集成（该应用程序已准备好并且可以工作）
*   我正在尝试为 iPhone 创建一个可以执行以下操作之一的应用程序：
    *   1 - 直接填充我的 mySQL 数据库，或者；
    *   2 - 将 txt 文件发送到 Windows 共享文件夹 对于第二个选项，我已经在 J​​AVA 中创建了一个作业来检查文件夹，读取插入的新文件并在 mySQL 数据库中处理其内容。

我知道 Objective-C 没有对 mySQL 的原生支持，我认为第二个选项是最好的，所以这是我的问题：

如何将文本文件上传到本地共享文件夹？我尝试了 NSFIleManager，但我没有找到任何解决方案来验证我的用户和密码以登录到共享文件夹。

PS：我的iPhone应用程序只有手头，它只是上传文件，不需要下载。

提前致谢！

# java - 为什么我应该使用 Deque 而不是 Stack？

> ID：12524826
> 
> 赞同：214
> 
> 时间：2012-09-21T05:38:04.733
> 
> 标签：java, data-structures, stack, deque

我的用例需要一个`Stack`数据结构。我应该能够将项目推送到数据结构中，并且我只想从堆栈中检索最后一项。堆栈的[JavaDoc](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/Stack.java#Stack)说：

> Deque 接口及其实现提供了一组更完整和一致的 LIFO 堆栈操作，应优先使用此类。例如：

```
Deque<Integer> stack = new ArrayDeque<>(); 
```

我绝对不想在这里同步行为，因为我将在方法本地使用这个数据结构。除此之外，为什么我更喜欢`Deque`这里`Stack`？

PS：来自 Deque 的 javadoc 说：

> 双端队列也可以用作 LIFO（后进先出）堆栈。应优先使用此接口而不是旧的 Stack 类。

* * *

## 回答 #1

> 赞同：252
> 
> 时间：2012-09-21T05:49:35.020

一方面，它在继承方面更明智。`Stack`在我看来， extends的事实`Vector`真的很奇怪。在 Java 早期，IMO 过度使用了继承——`Properties`这是另一个例子。

对我来说，您引用的文档中的关键词是*一致*的。`Deque`公开了一组操作，这些操作都是关于能够从集合的开头或结尾获取/添加/删除项目、迭代等 - 就是这样。故意无法按位置访问元素，`Stack`因为它*是*`Vector`.

哦，而且也`Stack`没有接口，所以如果你知道你需要`Stack`操作，你最终会提交到一个特定的具体类，这通常不是一个好主意。

也正如评论中指出的那样，`Stack`并且`Deque`具有反向迭代顺序：

```
Stack<Integer> stack = new Stack<>();
stack.push(1);
stack.push(2);
stack.push(3);
System.out.println(new ArrayList<>(stack)); // prints 1, 2, 3

Deque<Integer> deque = new ArrayDeque<>();
deque.push(1);
deque.push(2);
deque.push(3);
System.out.println(new ArrayList<>(deque)); // prints 3, 2, 1 
```

这也在[Deque.iterator()](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Deque.html#iterator())的 JavaDocs 中进行了解释：

> 以正确的顺序返回此双端队列中元素的迭代器。元素将按从第一个（头）到最后一个（尾）的顺序返回。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2020-04-22T05:11:54.087

以下是 Deque 优于 Stack 的几个原因：

面向对象设计——继承、抽象、类和接口：Stack是一个类，Deque是一个接口。只能扩展一个类，而 Java 中的单个类可以实现任意数量的接口（类型的多重继承）。使用 Deque 接口消除了对具体 Stack 类及其祖先的依赖，并为您提供了更大的灵活性，例如，可以自由扩展不同的类或交换 Deque 的不同实现（如 LinkedList、ArrayDeque）。

不一致：Stack 扩展了 Vector 类，它允许您按索引访问元素。这与堆栈实际应该做的事情不一致，这就是为什么首选 Deque 接口（它不允许这样的操作）——它允许的操作与 FIFO 或 LIFO 数据结构应该允许的操作一致。

性能：Stack 扩展的 Vector 类基本上是 ArrayList 的“线程安全”版本。同步可能会对您的应用程序造成重大的性能影响。此外，使用不需要的功能扩展其他类（如 #2 中所述）会使您的对象膨胀，可能会花费大量额外的内存和性能开销。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-02-05T14:28:29.543

`Deque`使用over的另一个原因`Stack`是`Deque`能够使用流转换为列表，同时保持 LIFO 概念的应用，而 Stack 没有。

```
Stack<Integer> stack = new Stack<>();
Deque<Integer> deque = new ArrayDeque<>();

stack.push(1);//1 is the top
deque.push(1)//1 is the top
stack.push(2);//2 is the top
deque.push(2);//2 is the top

List<Integer> list1 = stack.stream().collect(Collectors.toList());//[1,2]

List<Integer> list2 = deque.stream().collect(Collectors.toList());//[2,1] 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-04-14T14:11:30.053

这是我对 Stack 类描述中提到的不一致的解释。

[如果您在此处](http://docs.oracle.com/javase/tutorial/collections/implementations/index.html)查看通用实现- 您会看到集合、映射和列表的实现方法一致。

*   对于 set 和 map，我们有 2 个带有哈希映射和树的标准实现。第一个是最常用的，第二个在我们需要有序结构时使用（它也实现了自己的接口 - SortedSet 或 SortedMap）。

*   我们可以使用首选的声明方式，如`Set<String> set = new HashSet<String>();`查看原因[here](http://docs.oracle.com/javase/tutorial/collections/implementations/index.html)。

但是 Stack 类： 1) 没有自己的接口；2) 是 Vector 类的子类 - 基于可调整大小的数组；那么栈的链表实现在哪里呢？

在 Deque 接口中，我们没有这样的问题，包括两个实现（可调整大小的数组 - ArrayDeque；链表 - LinkedList）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-12-04T15:10:42.230

对我来说，缺少这一点：堆栈是线程安全的，因为它是从 Vector 派生的，而大多数双端队列实现不是，因此如果只在单个线程中使用它会更快。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2019-06-04T09:22:06.497

性能可能是一个原因。我使用的算法只需用 Deque 替换 Stack，从 7.6 分钟缩短到 1.5 分钟。

# c - 在标点 c 之前插入字符串

> ID：12524827
> 
> 赞同：0
> 
> 时间：2012-09-21T05:38:07.263
> 
> 标签：c

我希望在标点符号之前将 HTML 字符串标记插入到另一个字符串中。即给定“罗伯特：”，我想输出“**罗伯特**：”

目前我有（除了一个功能）：

```
#define fhighlight     "<font_color="red"><b>"
#define bhighlight     "</b></font>"
#define punct          ".,;:!?"
#define wordlen        15
char w[wordlen];
w = "Robert:";
w = strcat(fhighlight,w);
if ((strchr(punct,w)==1) { /*check for punctuation in w*/
   /*not quite sure what to put here*/
} else {
  w = strcat(w,bhighlight);
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T05:45:23.073

我想您的程序中存在分段错误。看看你的代码片段：

```
char w[wordlen];
w = "Robert:";
w = strcat(fhighlight,w); 
```

您正在将 w 分配给为“罗伯特：”保留的内存中分配的空间，然后您正在使用它制作一个 strcat，这确实也是不正确的，因为您正在制作类似的东西：

```
w = strcat("<font_color="red"><b>",w); 
```

这将引发分段错误。我建议你重新开始。再次编写程序并正确使用内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:39:49.623

strchr() 一次只查找一个字符（并且您没有正确调用它），因此需要在循环中为 punct 中的每个字符调用。这是查找其中任何一个的功能。此外，您没有正确使用 strcat() 。

```
#include <string.h>
#include <stdio.h>

int char_position(const char *string,const char *chars)
{
   int length = strlen(string);
   while (*chars)
   {
      for (int i = 0; i < length; i++)
      {
         if ( string[i] == *chars )
         {
            return i;
         }
      }
      chars++;
   }
   return -1;
}

const char *highlight(const char *word)
{
#define fhighlight     "<font_color=\"red\"><b>"
#define bhighlight     "</b></font>"
#define punct          ".,;:!?"
#define wordlen        1500
   static char w[wordlen];  
   strcpy(w,fhighlight);
   int position = char_position(word,punct);
   if ( position != -1 )
   {
      strncat(w,word,position);
      strcat(w,bhighlight);
      strcat(w,&word[position]);
   } else {
      strcat(w,word);     
      strcat(w,bhighlight);
   }
   return w;
}

int main(void)
{
   printf("%s\n",highlight("Robert:"));
   printf("%s\n",highlight("Roberta"));
   printf("%s\n",highlight("LaDonna! is coming"));
} 
```

# python - 如何将列表、整数、字符串作为函数的参数从 python 传递到 C

> ID：12524828
> 
> 赞同：0
> 
> 时间：2012-09-21T05:38:07.337
> 
> 标签：python, c

我有一个如下所述的python代码，它调用一个“C”函数trans实现为python扩展。如何在C代码中提取整数、字符串、列出所有不同类型的参数？下面的代码无法提取列表作为参数。下面的代码只是一个示例代码，可以让您了解我的问题。它不是完整的代码。

测试.py

```
def tpp:  
    value =0455455  
    name ='go'  
    parameter =[0,0,0]  
    parameter[0] ='hello'
    parameter[1] ='helloworld'        
    trans(value =value, name =name ,parameter =parameter) 
```

反式

```
 static Pyobject mod_trans(Pyobject *self, Pyobject *args ,Pyobject *keyargs)  
   {    
     char name ;  
     int value ;  
     char* parameter;  
     static char *kwlist[] ={"value", "name", "parameter")  
     if(!PyArg_ParseTupleAndKeywords(args,keyargs, "si|items",kwlist,&name,&value,
         &parameter)  
      return NULL;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:20:45.977

您传入一个列表并期待一个字符串输出 ( `char *`); 这行不通。列表只能转换为`PyObject *`. 因此，您应该使用

```
PyObject *parameter;
...
if(!PyArg_ParseTupleAndKeywords(args, kwargs, "is|O", kwlist, &name, &value, &parameter)) 
```

如果要强制对象是列表，请使用

```
PyObject *parameter;
...
if(!PyArg_ParseTupleAndKeywords(args, kwargs, "is|O!", kwlist, &name, &value, &PyList_Type, &parameter)) 
```

# instance - 如何在 javassist 中从 ctClass 制作 newInstance？

> ID：12524839
> 
> 赞同：3
> 
> 时间：2012-09-21T05:39:18.193
> 
> 标签：instance, javassist

我可以举个例子：

```
Class<?> jClazz = Class.forName(XXXX);
jClazz.newInstance(); 
```

但我需要通过 javassist 修改类：

```
CtClass ctClass = cp.get(path);
CtConstructor m = CtNewConstructor.make("public " + className + "() {}", ctClass);
ctClass.addConstructor(m); 
```

现在，我想从 ctClass 创建一个实例。我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-24T08:29:34.940

您可以使用 ClassPool 初始化 CtClass。这是一个例子

```
ClassPool pool = ClassPool.getDefault();
Class<?> clazz = pool.toClass(ctClass);
Object instance = clazz.newInstance();
System.out.println("Instance: " + instance); 
```

# backbone.js - 用于集合创建的主干覆盖 url

> ID：12524841
> 
> 赞同：2
> 
> 时间：2012-09-21T05:39:30.350
> 
> 标签：backbone.js

是否可以更改在集合上调用 create() 时加载的 URL？我在模型上这样做，如此处所述： [Backbone.js Model different url for create and update?](https://stackoverflow.com/questions/8731729/backbone-js-model-different-url-for-create-and-update)

这是我的收藏代码的示例：

```
var GroupsCollection = Backbone.Collection.extend({
    model:Group,
    url:"/api/groups/get_all/",
    parse:function(res){                    
        return res.groups;
    },

    sync: function(method, model, options) {
        var methodUrl = {
            'add': '/api/group/create/'
        };
        if (methodUrl && methodUrl[method.toLowerCase()]) {
            options = options || {};
            options.url = methodUrl[method.toLowerCase()];
        }
        Backbone.sync(method, model, options);
    }    
}); 
```

我从我的模型类（组）中处理了同步功能。我在 methodUrl 中使用键“add”，因为 Backbone 文档说调用 create() 时会触发“add”事件。我也尝试过“创建”而不是“添加”（不起作用）。

调用 create() 总是只加载 url: "/api/groups/get_all"

帮助？也对围绕这些东西的最佳实践的任何想法持开放态度。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:20:16.897

阅读`backbone.js`源码，你会发现：`Collection.sync`仅由 `Collection.fetch`. 所以你的覆盖不起作用。`Model.sync`您应该在`Group`模型中覆盖 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T08:00:46.020

我强烈建议您坚持原来的覆盖方法`Backbone.sync`。听起来你没有工作的原因是因为你在集合和模型中设置了一次 url。您只需要 - 并且应该 - 在模型*或集合**中*设置 url 。如果这不是它不起作用的原因，那么它肯定不起作用，因为调用了主干的“添加”方法`create`。从来源：

```
var methodMap = {
  'create': 'POST',
  'update': 'PUT',
  'delete': 'DELETE',
  'read':   'GET'
}; 
```

同步覆盖的一些简化：

```
sync: function(method, model, options) {
    options || (options = {});

    if (method === 'create') {
        options.url = '/api/group/create/';
    }

    Backbone.sync(method, model, options);
} 
```

但是，以上都没有真正解决您的问题的根源：您的服务器应该根据 HTTP 动词路由请求。例如，如果您正在`POST`ing，您的服务器应该路由到一个方法，该方法接受传入的参数并从中创建一个新对象。这将允许您在 Backbone 集合上设置一个通用`/api/groups/`url，无论您是在创建、读取、更新还是销毁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T14:08:34.833

我想说，如果您可以遵循其余的“约定”并让 Backbone 使用默认值处理您的 URL，它可能会更容易阅读。（在大多数服务器中打开 request.method 非常容易）。

无论如何，您可以在创建时简单地更改 URL：

```
 groupCollection.create(
   {attr1: 'val1', etc: '...'}, 
   {url: '/api/group/create/'}
 ).save() 
```

# c# - 如何使用 c# 在 WINRT 中将 Canvas 保存为图像

> ID：12524844
> 
> 赞同：1
> 
> 时间：2012-09-21T05:39:49.560
> 
> 标签：c#, windows-runtime

> **可能重复：**
> [使用 C#/XAML 在 Metro 风格应用程序中将画布保存为图像](https://stackoverflow.com/questions/11239980/saving-canvas-as-image-in-metro-style-app-with-c-xaml)

谁能指导我如何使用 C# 在 Windows 商店应用程序中将画布保存为图像。

如果这是不可能的，那么有任何替代方法或解决方法吗？

我对此进行了很多搜索，但没有得到任何结果。

任何帮助将不胜感激。

# c++ - new 分配了多少字节？

> ID：12524845
> 
> 赞同：4
> 
> 时间：2012-09-21T05:40:06.683
> 
> 标签：c++, linux, memory-management

> **可能重复：**
> [如何在 malloc 之后获取内存块长度？](https://stackoverflow.com/questions/5451104/how-to-get-memory-block-length-after-malloc)

如果我有一个指针，是否可以知道分配了多少字节`new`？当我用谷歌搜索时，我找到了适用于 Windows:`_msize()`和 Mac:的解决方案`malloc_size()`。但对于 Linux 来说没有。

如果没有，有人知道为什么它对程序员隐藏吗？`delete`绝对应该知道这样的信息。

更新：

据我所知，如果我有这个代码：

```
 class A {   
   ~A() {}
   int m_a; 
 }; 
 class B : public A {
   ~B() {}
   int m_b; 
 };

 int main() {   A * b = new B();   delete b;   return 0; } 
```

将调用 A 的析构函数，但仍将`new`释放所有分配的内存。这意味着它可以以某种方式计算，只知道指针。那么对程序员隐藏它的原因是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T06:04:26.717

不幸的是，没有*可移植*`new`的方法来获取和分配的字节数`malloc`。出现这种情况的原因有很多：

*   在某些平台上，`delete`什么`free`都不*做*。因此，它们不需要存储尺寸信息。这在嵌入式平台中非常常见。它允许您使用为其他平台编写的 C 或 C++ 代码，只要您不进行过多分配即可。
*   即使在更常见的平台上，系统分配的字节数也可能与您要求的不同。通常，您的分配将与更大的大小对齐 - 可能比您的原始请求大得多*。*存储元数据也可能存储在一个非常慢的数据结构中——您不希望在时间关键的代码中获取锁并访问哈希表。

作为可移植语言，C 和 C++ 不能提供在*每个*平台上都不可用（或定义明确，或相当快）的特性。这就是为什么这在 C++ 上不可用。也就是说，你不需要这个 - C++ 提供`std::vector`，它*会*跟踪你的分配大小，或者`std::string`它会为你处理所有这些细节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T07:27:15.747

`new`, `malloc`,`calloc`以及该语言中所有其他与堆相关的分配（是的，还有很多）将**至少**分配您请求的内存量。他们**可能会**分配更多（**通常**他们会分配更多）。

没有可移植的方式知道他们分配了多少。事实上，除非你确切地知道你正在使用什么堆管理器，否则根本没有办法。

您还需要从返回的指针（这是 malloc_size 在macs上返回的内容，可能是 _msize 在windows上返回的内容）与“从堆中取出”的实际内存中区分分配的内存，因为您可以从返回的指针安全访问分配（包括可能与您分配的内存块相邻或不相邻的簿记信息，并且对于相同大小的分配可能相同也可能不同）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T05:45:57.483

问：那么我可以查询 malloc 包以找出分配的块有多大吗？

A：不幸的是，没有标准或可移植的方式。（一些编译器提供非标准扩展。）如果您需要知道，您必须自己跟踪它。

[常见问题](http://c-faq.com/malloc/querysize.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T05:51:37.233

运算符所做的`new`是调用构造函数，因此分配的大小取决于您正在调用其构造函数的类型。

例如

```
class A
{
private:
    int* x;
public:
    A() { x = new int [100]; }
}; 
```

将分配`sizeof(int) * 100`，但您不知道 A 的实现是否对您隐藏。

如果你自己表演：

```
int * x = new int [100]; 
```

然后你知道你分配了多少因为可以访问`sizeof(primitive)`.

此外，`delete`操作员调用析构函数，因此对于复杂对象，它再次不需要知道分配内存的大小，因为完全正确地释放内存的责任完全委托给了程序员。

所以这里没有直接的答案。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T07:42:18.000

除了上面的答案：在某些情况下，必须分配和释放的大小在编译时是已知的，在某处记录大小将是一个完整的内存腰围。

在静态类型等于动态类型的情况下，要释放的内存可以由类型决定。

在静态类型不等于动态类型的情况下，删除的对象类必须具有虚拟析构函数。此析构函数可用于释放正确大小的内存。

在分配数组时，数组的大小通常以依赖于实现的方式附加到该数组，并且要释放的大小可以由元素的类型和数组的大小来确定。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T05:59:30.710

```
 X x=new X() 
```

这取决于类的大小，即**类包含的变量数量**。

```
int x = new int [100]; 
```

这取决于**你要分配多少元素。**假设，int 需要 2 个字节，那么这里需要 200 个字节。
简而言之，我们可以说，**它取决于数据类型**，您使用新运算符

# android - Android WebView 中的 NPE

> ID：12524851
> 
> 赞同：1
> 
> 时间：2012-09-21T05:40:45.557
> 
> 标签：android, webkit, android-2.3-gingerbread

我`NullPointerException`在 Android 2.3.4 中接到以下电话：

```
java.lang.NullPointerException
    at android.webkit.WebView.addPackageNames(WebView.java:4063)
    at com.my.company.MyClass$MyInnerClass.myMethod(MyClass.java:283)
    at android.webkit.BrowserFrame.stringByEvaluatingJavaScriptFromString(Native Method)
    at android.webkit.BrowserFrame.stringByEvaluatingJavaScriptFromString(Native Method)
    at android.webkit.BrowserFrame.loadUrl(BrowserFrame.java:246)
    at android.webkit.WebViewCore.loadUrl(WebViewCore.java:1981)
    at android.webkit.WebViewCore.access$1400(WebViewCore.java:53)
    at android.webkit.WebViewCore$EventHub$1.handleMessage(WebViewCore.java:1122)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:674)
    at java.lang.Thread.run(Thread.java:1019) 
```

MyClass$MyInnerClass 添加到 JavaScript 界面

```
class MyClass {
    // ...
        myWebView.addJavascriptInterface(new MyInnerClass(), "MyInnerClass");
    // ...

    public void myOuterMethod(int param1, int param2) {
        // Notify a listener that myOuterMethod was called
    }

    private class MyInnerClass {
        public void myMethod(int param1, int param2) {
            myOuterMethod(param1, param2);
        }
    }
} 
```

因此，JavaScript 调用`MyInnerClass.myMethod(-1, -1)`似乎可以很好地通过 Java-JavaScript 桥接，但`addPackageNames`调用失败，这不是我的代码。

我查看[了`android.webkit.WebView`GrepCode 中](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/2.3.4_r1/android/webkit/WebView.java#WebView.addPackageNames%28java.util.Set%29)的课程，但我无法弄清楚我是如何造成这种情况的。唯一的一行`addPackageNames`是

```
public void addPackageNames(Set<String> packageNames) { 
    mWebViewCore.sendMessage(EventHub.ADD_PACKAGE_NAMES, packageNames);
} 
```

所以，我得出的结论是`mWebViewCore`or `EventHub`is `null`。

任何Android专家都可以对此有所了解吗？这是一个已知的错误？这是我造成的吗？如果是这样，怎么做？如果没有，我该如何防止这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:44:47.993

这肯定与`mWebViewCore`被设置为`null`.

`mWebViewCore`在 ViewView 的构造函数中实例化。唯一设置它的地方`null`是公共方法`destroy()`。

你`webView.destroy()`在代码中的任何地方调用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T12:41:39.477

在我看来，您的问题是调用 myMethod 时尚未实例化外部类。这里有点有趣的是，在您的情况下似乎破坏的内部代码不再存在于 Android 4.0 源代码中 - 因此您的问题可能不会出现在该版本的 Android 上。对我来说，这也表明之前版本的 Android Webview 存在一些问题，也许您遇到了 Android 问题。但这只是猜测，我的经验通常是我做错了，而不是 Android 团队:)

可能的解决方案是将您的代码包装在 if 语句中：

```
if(MyClass.this != null) {
    myOuterMethod(param1, param2);
} 
```

这不是一个漂亮的解决方案，但如果它有效，我认为它不会破坏任何东西。

# iphone - IOS 6 缓存清单

> ID：12524859
> 
> 赞同：1
> 
> 时间：2012-09-21T05:41:27.447
> 
> 标签：iphone, ipad, ios6, cache-manifest, html5-appcache

现在我正在检查 iOS 6 <--> OS X Web 控制台，我注意到一些奇怪的地方。似乎当我更新应该缓存的 css 文件时，即使我不更新清单文件，iOS 6 也会自动下载新版本。在 5.xx 下，一旦我把它全部整理好，我就会有预期的行为。

# myapp.appcache

```
CACHE MANIFEST

#Version 1.42505

CACHE:
css/main.css
images/myimage.jpg

etc... 
```

调试工具清楚地表明，当没有更改时，文件没有被重新下载（在 5kb 文件上“传输”了大约 100b）。

此外，当 myimage.jpg 本身和清单都没有更新时，它通常会传输。

任何建议或至少对类似行为的确认？

# php - 日期未正确排序

> ID：12524860
> 
> 赞同：0
> 
> 时间：2012-09-21T05:41:31.940
> 
> 标签：php, javascript, date, sorting

> **可能重复：**
> [日期未在 JavaScript 中排序](https://stackoverflow.com/questions/12519463/date-not-getting-sorted-in-javascript)

我使用 24\jan\2012 格式作为日期表。表条目如 24/jan/1978 30/feb/2011 等。我无法更改日期格式，因为数据库有超过 1000 个条目。代码的问题是我指定了通常格式为 24/3/1956 等的日期。

我不知道如何为 21/nov/2011 等指定日期格式。请帮助。其他表字段（例如名称和所有）正在排序。该怎么办 ？

我的代码是：

```
<th class="table-sortable">Date table-filterable</th> 
```

这是写在 php print 语句中的。只有 23 5 等被排序，而不是 jan mar 等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:05:00.867

*如果*我的理解是正确的，我认为您是在问如何将月份解析为可插入值 - 这意味着这实际上与排序（按字母顺序）无关，更多的是关于排序（解析）。

如果是这种情况，那么我提出以下解决方案。

```
$data = '30/Feb/2012';               // non-existent date, by the way
$dateArray = explode('/', $data);    // array('30', 'Feb', '2012')
$month = $dateArray[1];              // 'Feb'
$abbreviations = array('Jan', 'Feb', 'Mar', ...);
$key = array_search($month, $abbreviations);
$numericalMonth = $key + 1; 
```

这会给你一个从 1 到 12 的月份，然后可以对其进行排序。

...如果我正确理解您的问题。

**编辑**

如果您希望将其排序为*output*，则可以重新格式化：

```
$newDate = implode('/', array($dateArray[0], $numericalMonth, $dateArray[2])); 
```

综上所述，还必须注意，解析数据的更简洁的方法是使用`strtotime()`and`date()`函数。

# php - 如何在 zend 框架 2 中使用特殊布局？

> ID：12524861
> 
> 赞同：0
> 
> 时间：2012-09-21T05:41:37.993
> 
> 标签：php, layout, zend-framework2

我有一个简单的 zf2 应用程序，我有 2 个模块（用户和相册）。

他们都有自己的布局，但我想为用户使用专辑中的布局，只是为了让它们更加一致。

我不确定从控制器 __contruct 或在每个单独的操作或在 module.config.php 中委派模块应该使用什么布局的最佳方法是什么。

也许在这里：

```
'template_map' => array(
        'layout/top_nav'        => __DIR__ . '/../view/layout/top_nav.phtml',
        'layout/layout'         => __DIR__ . '/../view/layout/layout.phtml', 

          ^^ probably i should set this path to the layout i want to use ^^

        'posts/index/index'     => __DIR__ . '/../view/posts/index/index.phtml',
        'error/404'             => __DIR__ . '/../view/error/404.phtml',
        'error/index'           => __DIR__ . '/../view/error/index.phtml',
    ), 
```

有任何想法吗？也许是最佳实践？

谢谢

编辑：我只是这样做了，它奏效了：

```
'layout/layout'         => __DIR__ . '/../../album /view/layout/layout.phtml', 
```

但我仍然不确定这是否是最佳做法。

也许我可以设置多个`template_map`数组并在`User`控制器中使用它们，就我而言

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T06:19:22.220

编辑：删除我自己的废话，只看另一种方法:)

**替代方法**

Evan Coury 还努力让 Layout 配置在全球范围内可用。对于永远不会公开其模块的单个开发人员来说尤其如此。你会在这里找到他的[EdpModuleLayouts 模块](https://github.com/EvanDotPro/EdpModuleLayouts "EdpModuleLayouts 模块")。

使用该模块切换布局变得更加简单，如下所示：

```
<?php
array(
    'module_layouts' => array(
        'ModuleName' => 'layout/some-layout',
    ),
); 
```

希望能帮助到你。

# qt - 使用 if 语句

> ID：12524865
> 
> 赞同：1
> 
> 时间：2012-09-21T05:41:55.620
> 
> 标签：qt, signals, signals-slots

我想在按下按钮 1 时显示名为 image1 的图像，按下按钮 2 时显示名为 image2 的图像。为了做到这一点，我想使用“if”语句。我写了以下代码：

```
if(ui->button1->clicked())
image.load(":/CondScrnIns.png");
else if(ui->button2->clicked())
image.load(":/CondScrnInsCentric.png"); 
```

但是在执行这些语句时，我收到以下错误：

```
void QAbstractButton::clicked(bool) is protected 
```

我应该使用 clicked() 的 insted 什么函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T05:55:41.270

您必须为每个按钮的 clicked 信号和 do image.load 创建插槽。

```
connect(button1, SIGNAL( clicked() ), this, SLOT(button1Clicked()));
connect(button2, SIGNAL( clicked() ), this, SLOT(button2Clicked())); 
```

然后在 button1Clicked() 和 button2Clicked() 插槽中，您可以放入代码以加载图像或根据需要调整对话框的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:44:00.240

您需要`image.load()`在相应的事件处理程序中编写语句。您不能`button->clicked()`在这样的 if 语句中进行检查。

看这个页面：http: [//qt-project.org/forums/viewthread/2758](http://qt-project.org/forums/viewthread/2758)

# iphone - 如何在 iphone 的 UITextView 中对齐文本？

> ID：12524866
> 
> 赞同：0
> 
> 时间：2012-09-21T05:42:06.073
> 
> 标签：iphone, justify

如何证明文本的合理性`UITextView` 我这样尝试，但这段代码没有给出任何输出。

```
[web loadHTMLString:[NSString stringWithFormat:
     @"<html><body><p align=\"justify\"> %@ </p> </body></html>",
     [dict1 objectForKey:@"services_description"]] baseURL:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-11T13:09:33.633

```
textView.textAlignment = NSTextAlignmentJustified; 
```

这仅适用于 iOS 6 及更高版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:18:13.647

您可以使用propertext allignment 创建一个HTML 页面，然后在Web 视图中加载本地HTML 页面。

```
 webView = [UIWebView alloc] init];

[webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] 
                                pathForResource:@"test" ofType:@"html"]isDirectory:NO]]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:50:46.277

我建议您使用 WebView，因为文本的对齐对齐方式只有 center、left 和 right by `UITextView`。

如果你想使用`UIWebView`然后设置

```
className.h

@interface className : UIViewController {
    IBOutlet UIWebView *webviewName;
}
@property (nonatomic, retain) UIWebView *webviewName; 
```

类名.m

```
[webviewName loadHTMLString:[NSString stringWithFormat:@"<div align='justify'>%@<div>",TEXT_set] baseURL:nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T05:54:59.037

您可以通过从实用程序中选择对齐方式来证明 UITextView 中的文本

# magento - Magento 继续购物网址更改

> ID：12524868
> 
> 赞同：1
> 
> 时间：2012-09-21T05:42:26.877
> 
> 标签：magento

magento 后端是否有任何设置来更改继续购物网址？如果有任何设置，请告诉我如何更改。我正在使用 Magento 1.7.x

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T10:09:31.627

可悲的是，我一直想知道为什么这还没有在配置中。您有两个选择，您可以扩展`Mage_Checkout_Block_Cart`应用逻辑以确定要使用的 URL，也可以在模板中设置 URL。

```
<?php $this->setContinueShoppingUrl('http://URL.com'); ?>

<div class="page-title">
    <h1><?php echo $this->__('Shopping Cart is Empty') ?></h1>
</div>
<div class="cart-empty">
    <?php echo $this->getMessagesBlock()->getGroupedHtml() ?>
    <p><?php echo $this->__('You have no items in your shopping cart.') ?></p>
    <p><?php echo $this->__('Click <a href="%s">here</a> to continue shopping.', $this->getContinueShoppingUrl()) ?></p>
</div> 
```

但是，如果您要在模板中设置它，您不妨删除更改`<?php echo $this->__('Click <a href="%s">here</a> to continue shopping.', $this->getContinueShoppingUrl()) ?>`为`<?php echo $this->__('Click <a href="http://URL.COM">here</a> to continue shopping.') ?>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-04T16:46:02.187

要更改“NOT”空购物车中继续购物按钮的重定向 url，只需在 ...your_theme/default/checkout/cart.phtml 中添加以 asterix ** 突出显示的第二个代码行：

```
<?php if($this->getContinueShoppingUrl()): ?>
**<?php $this->setContinueShoppingUrl('http://yoursite.com/...'); ?>**
    <button type="button" title="<?php echo $this->__('Continue Shopping') ?>" class="button btn-continue" onclick="setLocation('<?php echo $this->getContinueShoppingUrl() ?>')"><span><span><?php echo $this->__('Continue Shopping') ?></span></span></button>
                        <?php endif; ?> 
```

便宜又有效

感谢之前的回答/提示

# ios5 - Corebluetooth，如何获得唯一的 UUID？

> ID：12524871
> 
> 赞同：8
> 
> 时间：2012-09-21T05:42:51.813
> 
> 标签：ios5, core-bluetooth

我的问题是 CBPeripheral 的 UUID 似乎不是唯一的。

我有两个 iPad2 和一个 bluetooth4.0 设备。

蓝牙设备的 UUID 与两个 iPad 不同。

如下图所示。 ![第一台 iPad 获取的 UUID](../Images/87cc39678a25bb233390d31194b17883.png)

![第二台 iPad 获取的 UUID](../Images/ef54f68344848831889640633a198551.png)

有没有办法在 iOS 设备上找到蓝牙设备的唯一 UUID？

我需要找到一个在不同设备之间不会改变的 UUID 或 mac 地址。

非常感谢，请帮帮我！！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-02-15T04:09:02.113

我一直在寻找一种方法来部署与平台无关的 BLE 设备静态配置。我越来越气馁（Apple 的 UUID 是 +/- 无意义的，并且无法从 CoreBluetooth 访问可以在大多数/所有其他平台上获得的 MAC/BDADDR）。幸运的是，我注意到“设备信息服务”配置文件 (0x180A) 包含一个“系统 ID”属性 (0x2A23)，它对设备的唯一 MAC/BDADDR 地址进行编码。但是，我不知道 BLE 设备是否必须公开此服务。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-23T07:02:10.147

外设使用至少每 15 分钟更改一次的随机可解析地址，此时外设看起来是新的。要更改此行为，您需要与外围设备配对，然后您将看到 UUID 并且它将是持久的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-08T10:13:27.317

为了回答您的问题，UUID 在同一对 iDevice-btDevice 的情况下是唯一的，但如果您更改 iOS 设备，它会发生变化，正如您在尝试中注意到的那样。

不幸的是，要达到拥有唯一标识符的目标，您必须修改固件并添加应用程序标识符。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-22T19:37:11.023

如果您在开发和控制蓝牙 4.0+ 设备时，

# 选项 #1 将蓝牙地址分配给设备名称并将其放入扫描响应中

将您的蓝牙设备地址分配为设备名称，并通过扫描响应包进行广播。

Scan Response 包是蓝牙设备在主设备（例如智能手机）发送扫描请求后广播的一个 31 字节的数据。

**重要的**

一些蓝牙设备允许在不编程的情况下设置它们的名称，例如 HM-10 蓝牙模块名称可以通过 AT+NAME 文本命令进行更改。

# 选项 #2 在广告数据中发送一些独特的制造商特定数据

您可以在蓝牙广告数据包中添加一些独特的“制造商特定数据”并从 iOS 读取。正如其他答案中所建议的那样，它比从“设备信息服务”中读取“系统 ID”属性要快得多，因为它不需要连接到蓝牙设备。

## 长解释

广告数据是蓝牙 4.0+ 在某个时间间隔（从 20 毫秒到 10 秒）广播到空中（在任何人连接之前）的 31 字节数据，具体取决于此设备配置。

还有扫描响应数据，它是蓝牙设备在主设备（例如智能手机）发送扫描请求后广播的额外的31字节包。它具有与广告数据包相同的结构。

我们总共可以使用 31+31=62 字节的数据。

广告数据由一组广告数据结构（AD struct）组成[![在此处输入图像描述](../Images/f97ee9d5a441ee792cb15202282c7d46.png)](https://i.stack.imgur.com/uq3MA.png)

第一个字节描述了 AD Struct 的长度，包括 1 个字节的数据类型 + 可变大小的有效负载。

第二个字节描述了存储在 AD Struct 中的数据类型，[这里是标识符列表](https://www.bluetooth.com/specifications/assigned-numbers/generic-access-profile)。

所有后面的字节都是有效载荷数据。

对于广告数据，必须包含配置标志 AD 结构（不关心扫描响应），它需要 3 个字节。我们还剩下 28 个字节。

假设您开发自己的 GATT Service，因此您需要在广告数据中指定它的标识符。自定义 GATT 服务 UUID 标识符只能是 128 位全长格式（不同于蓝牙标准预定义的 16 位和 32 位服务标识符）。在广告数据中，它将消耗 2+16=18 个字节。所以，我们还剩下 10 个字节。

现在我们可以定义制造商数据 2 个字节用于长度和数据类型

有效载荷中的前 2 个字节用于公司标识符（如文档补充蓝牙核心规范第 1.4 节所要求的），公司标识符由[蓝牙特别兴趣小组分配](https://www.bluetooth.com/membership-working-groups/membership-types-levels)

出于测试目的，您可以使用 0xFF、0xFF 标识符

使用剩下的 6 个字节，您可以唯一识别 281,474,976,710,656 个设备。

广告数据样本，用 C 编写：

```
#define GAP_ADV_FLAGS                   0x01
#define GAP_ADV_128_UUID                0x06
#define GAP_ADV_MANUF_DATA              0xFF

uint8_t raw_adv_data[31] = {
//  len     type                        payload....   

    0x02,   GAP_ADV_FLAGS,              0x06,        

//                                      GATT service 128 bit UUID
    0x11,   GAP_ADV_128_UUID,           0x1d, 0x15, 0xee, 0x49, 
                                        0x10, 0x78, 0xc8, 0xa3, 
                                        0x9f, 0xaa, 0x82, 0x84, 
                                        0x8e, 0x28, 0xbe, 0x43, 

//                                      2 bytes of company ID
    0x09,   GAP_ADV_MANUF_DATA,         0xff, 0xff, 

//                                      6 bytes of unique data
                                        0xff, 0xff,  
                                        0xff, 0xff, 
                                        0xff, 0xff, 
}; 
```

PS：好吧，如果你需要发送更多的数据，你可以放入扫描响应包，它会给你额外的 31 字节的有效载荷。

# coldfusion - 在 ColdFusion 中对 DotNetNuke 用户进行身份验证

> ID：12524877
> 
> 赞同：3
> 
> 时间：2012-09-21T05:43:59.380
> 
> 标签：coldfusion, dotnetnuke, single-sign-on

有没有办法使用 DNN 登录对来自其他 Web 应用程序的用户进行身份验证？

我们有一个使用 DNN 的主站点，用户登录信息存储在 asp 网络成员表中。从我一直在阅读的内容来看，密码是使用机器密钥加密的，然后加盐。我看到此信息在哪里，但似乎无法使用此方法正确加密密码。

我正在尝试在我们的 DNN 站点所在的同一台服务器上使用 Coldfusion Web 应用程序，但它不想工作。您会认为使用 ColdFusion 加密功能会很困难：

```
 Encrypt(passwordstring, key [, algorithm, encoding, IVorSalt, iterations]) 
```

无论我尝试什么，我都没有得到匹配的值。

任何帮助、见解或指出我正确的方向将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T22:45:21.530

*（编辑：原始答案并非在所有情况下都有效。大幅修改......）*

根据我的阅读，DNN 默认使用“SHA1”哈希。[@barnyr](https://stackoverflow.com/users/826714/barnyr)发布的线程显示它只是对连接的盐和密码进行哈希处理，但有一些曲折。

*   DNN 使用[UTF-16LE](http://en.wikipedia.org/wiki/UTF-16LE)来提取密码字节，而不是 CF 的典型 UTF-8。
*   它还*分别*提取盐和密码字节，[这可能会产生与将所有内容解码为单个字符串不同的结果](https://stackoverflow.com/questions/17111641/membership-sha1-hash-not-the-same-for-all-users)，这就是这样`hash()`做的。（见下面的演示）

鉴于 CF9 的[`Hash`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7c52.html)函数不接受二进制（在 CF11 中支持），我认为仅使用原生 CF 函数无法复制结果。相反，我建议将字符串解码为二进制，然后直接使用 java：

**代码：**

```
<cfscript>
    thePassword = "DT!@12";
    base64Salt = "+muo6gAmjvvyy5doTdjyaA==";

    // extract bytes of the salt and password
    saltBytes = binaryDecode(base64Salt, "base64");
    passBytes = charsetDecode(thePassword, "UTF-16LE" );

    // next combine the bytes. note, the returned arrays are immutable, 
    // so we cannot use the standard CF tricks to merge them    
    ArrayUtils = createObject("java", "org.apache.commons.lang.ArrayUtils");
    dataBytes = ArrayUtils.addAll( saltBytes, passBytes );

    // hash binary using java
    MessageDigest = createObject("java", "java.security.MessageDigest").getInstance("SHA-1");
    MessageDigest.update(dataBytes);    
    theBase64Hash = binaryEncode(MessageDigest.digest(), "base64");

    WriteOutput("theBase64Hash= "& theBase64Hash &"<br/>");
</cfscript> 
```

**差异演示：**

```
<cfscript>
    theEncoding = "UTF-16LE";
    thePassword = "DT!@12";
    base64Salt = "+muo6gAmjvvyy5doTdjyaA==";

    // extract the bytes SEPARATELY
    saltBytes = binaryDecode(base64Salt, "base64");
    passBytes = charsetDecode(thePassword, theEncoding );
    ArrayUtils = createObject("java", "org.apache.commons.lang.ArrayUtils");
    separateBytes = ArrayUtils.addAll( saltBytes, passBytes );

    // concatenate first, THEN extract the bytes 
    theSalt = charsetEncode( binaryDecode(base64Salt, "base64"), theEncoding );
    concatenatedBytes = charsetDecode( theSalt & thePassword, theEncoding );

    // these are the raw bytes BEFORE hashing
    WriteOutput("separateBytes= "& arrayToList(separateBytes, "|") &"<br>");        
    WriteOutput("concatenatedBytes"& arrayToList(concatenatedBytes, "|") );
</cfscript> 
```

**结果：**

```
separateBytes     = -6|107|-88|-22|0|38|-114|-5|-14|-53|-105|104|77|-40|-14|104|68|0|84|0|33|0|64|0|49|0|50|0
concatenatedBytes = -6|107|-88|-22|0|38|-114|-5|-14|-53|-105|104|-3|-1|68|0|84|0|33|0|64|0|49|0|50|0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T14:09:18.110

密码很可能没有加密，它是散列的。散列不同于加密，因为它是不可逆的。

您不会为此使用 ColdFusion 的 encrypt() 函数，而是使用它的 hash() 函数。

因此，要弄清楚如何在 CF 中对密码进行哈希处理，以便能够针对 DNN 用户进行身份验证，您需要回答的问题是：

1.  DNN 使用什么算法对密码进行哈希处理？
2.  在散列之前，盐是如何与密码一起使用的？
3.  DNN 是否会迭代哈希 X 次以提高安全性？

必须回答所有这些问题才能确定 CF 必须如何将 hash() 函数与 salt 和用户提交的密码结合使用。

我会做一些假设来提供答案。

如果我们假设 noiteration 正在进行并且在使用 SHA1 对密码进行哈希处理之前只是将盐附加到密码中，那么您将能够像这样重现哈希摘要：

```
<cfset hashDigest = hash(FORM.usersubmittedPassword & saltFromDB, "SHA1") /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T20:16:40.590

*（发布新的回复以将“加密”过程与“散列”分开）*

对于“加密”密钥，DNN 端使用标准算法，即 DES、3DES 或 AES - 取决于您的[machineKey](http://msdn.microsoft.com/en-us/library/w8h3skw9%28v=vs.85%29.aspx)设置。但是您需要在 CF 代码中匹配一些差异。在不知道您的实际设置的情况下，我假设您现在使用默认设置`3DES`。

**要加密的数据**

加密值是盐和密码的组合。但与散列一样，DNN 使用[UTF-16LE](http://en.wikipedia.org/wiki/UTF-16LE)。不幸的是，ColdFusion 的`Encrypt()`函数总是假定 UTF-8，这将产生非常不同的结果。因此，您需要改用该[`EncryptBinary`](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6e75.html)功能。

```
 // sample valus
    plainPassword = "password12345";
    base64Salt    = "x7le6CBSEvsFeqklvLbMUw==";
    hexDecryptKey = "303132333435363738393031323334353637383930313233";

    // first extract the bytes of the salt and password
    saltBytes = binaryDecode(base64Salt, "base64");
    passBytes = charsetDecode(plainPassword, "UTF-16LE" );

    // next combine the bytes. note, the returned arrays are immutable, 
    // so we cannot use the standard CF tricks to merge them    
    ArrayUtils = createObject("java", "org.apache.commons.lang.ArrayUtils");
    dataBytes = ArrayUtils.addAll( saltBytes, passBytes ); 
```

**加密演算法**

对于分组密码，ColdFusion 默认为[ECB 模式](http://en.wikipedia.org/wiki/Block_cipher_modes_of_operation#Electronic_codebook_.28ECB.29)。（请参阅[ColdFusion 中的强加密](http://helpx.adobe.com/coldfusion/kb/strong-encryption-coldfusion-mx-7.html)）而 .NET 默认为 CBC 模式，这需要额外的 IV 值。所以你必须调整你的CF代码来匹配。

```
 // convert DNN hex key to base64 for ColdFusion
    base64Key  = binaryEncode(binaryDecode( hexDecryptKey, "hex"),  "base64");

    // create an IV and intialize it with all zeroes
    // block size:  16 => AES, 8=> DES or TripleDES 
    blockSize = 8; 
    iv = javacast("byte[]", listToArray(repeatString("0,", blocksize)));

    // encrypt using CBC mode 
    bytes = encryptBinary(dataBytes, base64Key, "DESede/CBC/PKCS5Padding", iv);

    // result: WBAnoV+7cLVI95LwVQhtysHb5/pjqVG35nP5Zdu7T/Cn94Sd8v1Vk9zpjQSFGSkv 
    WriteOutput("encrypted password="& binaryEncode( bytes, "base64" )); 
```

# php - Whileloop 在每 6 个 div 后重新创建结构

> ID：12524890
> 
> 赞同：2
> 
> 时间：2012-09-21T05:45:04.777
> 
> 标签：php, wordpress, while-loop, repeat

我想在每 6 次之后重复一次，但我不知道为什么这个结构没有以我想要的方式重复。

这是我的代码

```
<?php
query_posts( 'posts_per_page=12' );

$counter = 0;           

while (have_posts()) : the_post(); 

if($counter % 6 == 0) :
    echo '<div class="row margin-top20">';
endif; ?>           

    <div class="two columns">
        <?php the_title(); ?>
        <?php the_post_thumbnail('thumbnail'); ?> 
    </div>
<?php
if($counter % 6 == 0) :
        echo '</div>';
    endif;
endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T05:49:06.267

您还没有增加计数器。

像这样增加计数器：

```
<?php
query_posts( 'posts_per_page=12' );

$counter = 1;           

while (have_posts()) : the_post(); 
if($counter % 6 == 0) :
    echo '<div class="row margin-top20">';
endif; ?>           

    <div class="two columns">
        <?php the_title(); ?>
        <?php the_post_thumbnail('thumbnail'); ?> 
    </div>
<?php
$counter++;
if($counter % 6 == 0) :
        echo '</div>';
    endif;
endwhile; ?> 
```

# python - 扭曲的 Python - IRC 客户端

> ID：12524898
> 
> 赞同：2
> 
> 时间：2012-09-21T05:45:47.587
> 
> 标签：python, client, twisted, irc

这里的第一个问题。

因此，对于学校的一个俱乐部，我们正在努力用 Python 和 Twisted 制作一个 IRC 客户端。

因此，我以 twisted 为您提供的示例机器人为例。我已经设法将它连接到 irc 频道，并记录下来。

我知道我可能必须使用 2 个线程来同时从服务器读取和输入，这我可以实现，但前提是它必须是命令行输入。请注意，它仍在同时记录通道中的数据。

为此，我使用了：`d = threads.deferToThread(aSillyBlockingMethod)`

这叫我的`raw_input()`循环。

我的问题在于无法弄清楚如何从命令行中输入和打印来改变它；能够实际将消息发送到 irc 服务器以供其他人阅读。

任何帮助将不胜感激。我是一个新手python程序员，不太了解网络东西；像协议、端口和类似的东西，但我正在慢慢地把它们捡起来。如果有人知道更简单的方法，请告诉我，我不承诺使用 Twisted。

这是我的代码，或者更确切地说是我正在修改的修改后的机器人：

```
# twisted imports
from twisted.words.protocols import irc
from twisted.internet import reactor, protocol
from twisted.python import log
from twisted.internet import threads

# system imports
import time, sys

class MessageLogger:
    """
    An independent logger class (because separation of application
    and protocol logic is a good thing).
    """
    def __init__(self, file):
        self.file = file

    def log(self, message):
        """Write a message to the file."""
        timestamp = time.strftime("[%H:%M:%S]", time.localtime(time.time()))
        self.file.write('%s %s\n' % (timestamp, message))
        self.file.flush()

    def close(self):
        self.file.close()

class LogBot(irc.IRCClient):
    """A logging IRC bot."""

    nickname = "twistedbot"

    def connectionMade(self):
        irc.IRCClient.connectionMade(self)
        self.logger = MessageLogger(open(self.factory.filename, "a"))
        self.logger.log("[connected at %s]" % 
                        time.asctime(time.localtime(time.time())))

    def connectionLost(self, reason):
        irc.IRCClient.connectionLost(self, reason)
        self.logger.log("[disconnected at %s]" % 
                        time.asctime(time.localtime(time.time())))
        self.logger.close()

    # callbacks for events

    def signedOn(self):
        """Called when bot has succesfully signed on to server."""
        self.join(self.factory.channel)

    def joined(self, channel):
        """This will get called when the bot joins the channel."""
        self.logger.log("[I have joined %s]" % channel)

    def privmsg(self, user, channel, msg):
        """This will get called when the bot receives a message."""
        user = user.split('!', 1)[0]
        self.logger.log("<%s> %s" % (user, msg))

        # Check to see if they're sending me a private message
        if channel == self.nickname:
            msg = "It isn't nice to whisper!  Play nice with the group."
            self.msg(user, msg)
            return

        # Otherwise check to see if it is a message directed at me
        if msg.startswith(self.nickname + ":"):
            msg = "%s: I am a log bot" % user
            self.msg(channel, msg)
            self.logger.log("<%s> %s" % (self.nickname, msg))

    def action(self, user, channel, msg):
        """This will get called when the bot sees someone do an action."""
        user = user.split('!', 1)[0]
        self.logger.log("* %s %s" % (user, msg))

    # irc callbacks

    def irc_NICK(self, prefix, params):
        """Called when an IRC user changes their nickname."""
        old_nick = prefix.split('!')[0]
        new_nick = params[0]
        self.logger.log("%s is now known as %s" % (old_nick, new_nick))

    # For fun, override the method that determines how a nickname is changed on
    # collisions. The default method appends an underscore.
    def alterCollidedNick(self, nickname):
        """
        Generate an altered version of a nickname that caused a collision in an
        effort to create an unused related name for subsequent registration.
        """
        return nickname + '^'

def aSillyBlockingMethod(self):
        import time
        while True:
            msg = raw_input()
            print msg

class LogBotFactory(protocol.ClientFactory):
    """A factory for LogBots.

    A new protocol instance will be created each time we connect to the server.
    """

    def __init__(self, channel, filename):
        self.channel = channel
        self.filename = filename

    def buildProtocol(self, addr):
        p = LogBot()
        p.factory = self
        return p

    def clientConnectionLost(self, connector, reason):
        """If we get disconnected, reconnect to server."""
        connector.connect()

    def clientConnectionFailed(self, connector, reason):
        print "connection failed:", reason
        reactor.stop()

if __name__ == '__main__':
    # initialize logging
    log.startLogging(sys.stdout)

    # create factory protocol and application
    f = LogBotFactory("#goon.squad.dev", "test.txt")

    # connect factory to this host and port
    reactor.connectTCP("irc.freenode.net", 6667, f)

    #Use this to keep user input open
    d = threads.deferToThread(aSillyBlockingMethod)

    # run bot
    reactor.run() 
```

——泰尔扎拉基

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T11:16:40.607

> 我知道我可能必须使用 2 个线程来同时从服务器读取和输入，这我可以实现，但前提是它必须是命令行输入。请注意，它仍在同时记录通道中的数据。

实际上，没有必要为此使用两个线程。Twisted 的一个主要优势是在不使用线程的情况下进行 I/O。Michael 链接的[问题和答案](https://stackoverflow.com/questions/8299896/keyboard-input-using-stdio-standardio-in-twisted-python)讨论了 Twisted 对通过`twisted.internet.stdio.StandardIO`.

> 我的问题在于无法弄清楚如何从命令行中输入和打印来改变它；能够实际将消息发送到 irc 服务器以供其他人阅读。

`IRCClient`有一种向 IRC 服务器发送消息的方法 - 您在问题中包含的示例代码甚至已经使用了这种方法，`IRCClient.msg`. 您需要做的就是调用它。

您的线程代码可能会像这样更改（再次，线程是不必要的，但为了向**您**展示如何从您的输入处理代码发送消息，我将这部分答案基于线程，以避免对代码的其他更改可能会使答案更难理解。您**不需要**线程来执行此操作。）：

```
def aSillyBlockingMethod(bot):
    import time
    while True:
        msg = raw_input()
        bot.threadSafeMsg("#bottest", msg)

class LogBot(irc.IRCClient):
    """A logging IRC bot."""

    nickname = "twistedbot"

    def connectionMade(self):
        irc.IRCClient.connectionMade(self)
        self.logger = MessageLogger(open(self.factory.filename, "a"))
        self.logger.log("[connected at %s]" % 
                        time.asctime(time.localtime(time.time())))

        # The bot is now connected.  Start reading input here.
        # Pass a reference to this protocol instance, so that
        # messages can be sent to this protocol instance.
        deferToThread(aSillyBlockingMethod, self)

    # Define a helper function for aSillyBlockingMethod to use.
    # Since aSillyBlockingMethod runs in a thread, it cannot just call
    # IRCClient.msg, since that method - like almost all methods in Twisted -
    # is not thread-safe.  Instead it must call this thread-safe wrapper.
    def threadSafeMsg(self, channel, message):
        reactor.callFromThread(self.msg, channel, message) 
```

请注意，这里发生的所有事情`aSillyBlockingMethod`都是调用 on 上的方法`LogBot`。使用 时不需要线程安全的包装器`StandardIO`，因为这消除了对线程的需求。

# visual-studio-2008 - 如何为没有 Internet 连接的用户在 ClickOnce 中包含必备组件“Windows Installer 3.1”

> ID：12524900
> 
> 赞同：0
> 
> 时间：2012-09-21T05:45:56.667
> 
> 标签：visual-studio-2008, clickonce

我创建了一个 ClickOnce 安装程序。安装程序的必备组件需要：

1.  .NET 3.5 SP1
2.  视窗安装程序 3.1

为了允许用户在没有任何 Internet 连接的情况下安装应用程序，我需要将这两个组件包含到 ClickOnce 安装程序中，以便用户可以使用 CDROM 或其他东西安装它。

经过一番搜索，我成功地包含了 .NET 3.5 SP1 组件。但我找不到任何关于将“Windows Installer 3.1”包含到安装程序中的方法。

我正在使用VS2008。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:25:33.373

请在先决条件窗口中检查所需的先决条件，并确保

**选中** “从与我的应用程序相同的位置下载 prereqisite”

有关详细信息，请通过[此](http://msdn.microsoft.com/en-us/library/31kztyey.aspx) url ..您可以破解它。

# jquery - 如何使用多个表填充数据集？

> ID：12524902
> 
> 赞同：0
> 
> 时间：2012-09-21T05:46:07.883
> 
> 标签：jquery, asp.net, sql, database, vb.net

`SELECT dbo.Tbl_Employees.User_Name, dbo.Tbl_Employees.Project_ID, dbo.Tbl_Project.Project FROM dbo.Tbl_Employees INNER JOIN dbo.Tbl_Project ON dbo.Tbl_Employees.Project_ID=dbo.Tbl_Project.Project_ID`

这是我的查询，当我有两个表时，我应该如何用数据适配器填充数据集。请提供一些输入

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:48:46.627

好吧，你可以先看看

[DataAdapter.Fill 方法](http://msdn.microsoft.com/en-us/library/system.data.common.dataadapter.fill%28v=vs.110%29.aspx)

[DataAdapter.Fill 方法 (DataSet)](http://msdn.microsoft.com/en-us/library/377a8x4t.aspx)

甚至[从 DataAdapter 填充数据集](http://msdn.microsoft.com/en-us/library/bh8kx08z.aspx#Y0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:04:22.570

因为您的**SqlDataAdapter**在断开连接模式下工作，所以您不必提供 SqlConnection 来填充**DataTable**

```
 string query ="SELECT dbo.Tbl_Employees.User_Name, dbo.Tbl_Employees.Project_ID, dbo.Tbl_Project.Project FROM dbo.Tbl_Employees INNER JOIN dbo.Tbl_Project ON dbo.Tbl_Employees.Project_ID=dbo.Tbl_Project.Project_ID"

Dim ds = new DataSet()
Dim da = new SqlDataAdapter(query, ConnectionString)

   try{ 
     da.Fill(ds);
     }
     catch(Excepion ex){

    } 
```

**更新：** 如果您需要显示数据集中包含的所有数据，只需将**DS**作为 Gridview 的数据源传递，或者如果您只需**要将 DS.Tables(0)**中的第一个表中的记录作为数据源传递给控件。

```
 If ds.Tables(0).Rows.Count > 0 Then 
   GridView2.DataSource = ds 
   GridView2.DataBind() 
```

# xml - 如何在 XML 中转义“&”？

> ID：12524908
> 
> 赞同：257
> 
> 时间：2012-09-21T05:46:24.560
> 
> 标签：xml

我写

```
 <string name="magazine">Newspaper & Magazines</string> 
```

在文件*strings.xml*中。

但是编译器说：

> 实体名称必须紧跟实体引用中的“&”。strings.xml /OOReaderWidget/res/values 第 9 行 Android XML 格式问题

如何在*strings.xml*中显示“&” ？

* * *

## 回答 #1

> 赞同：488
> 
> 时间：2012-09-21T05:47:54.740

`&amp;`代替`&`. _

将其更改为：

```
<string name="magazine">Newspaper &amp; Magazines</string> 
```

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2012-09-21T05:49:40.830

& → &

< → <

> → >

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-09-21T05:50:08.523

您可以使用`&amp;`代替`&`

[http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined%5Fentities%5Fin%5FXML](http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references#Predefined%5Fentities%5Fin%5FXML)

# date - 在 DOS 脚本中打印当前日期和时间

> ID：12524909
> 
> 赞同：18
> 
> 时间：2012-09-21T05:46:46.510
> 
> 标签：date, time, dos

我有一个脚本，它打印日期和时间，后跟日志中的字符串。

```
echo %DATE%_%TIME% Processing %%f >> process.log 
```

问题是日期和时间始终是脚本启动的日期和时间。我一夜之间运行了这个脚本，仍然有相同的日期和时间。有没有办法更新它们，以便在字符串打印到日志文件时显示当前日期和时间？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-09-21T12:29:10.233

您拥有的事实`%%f`表明您的 echo 命令处于 FOR 循环中。一次解析整个 FOR 循环，并`%DATE%`在解析时扩展。每次迭代都不会重新解析该命令，这就是为什么每次迭代都获得相同值的原因。您将获得执行 FOR 语句之前存在的值！

解决方案是延迟扩展。放在`setlocal enableDelayedExpansion`脚本顶部附近。然后使用`!DATE!_!TIME!`而不是`%DATE%_%TIME%`. 延迟扩展意味着扩展发生在语句执行时，而不是在解析时。HELP 系统中有一个很好的解释。在命令提示符下键入`HELP SET`或`SET /?`并查找处理延迟扩展的部分。

# python - 递归中的返回语句

> ID：12524913
> 
> 赞同：3
> 
> 时间：2012-09-21T05:46:57.847
> 
> 标签：python, recursion

所以我对递归的概念有相当不错的理解，但有些实现真的让我很困惑。以这个简单的斐波那契函数为例：

```
def fib(x):
    if x == 0 or x == 1:
        return 1
    else:
        return fib(x-1) + fib(x-2) 
```

我知道这将斐波那契计算分解成更小更易于管理的块。但它究竟是如何得出最终结果的呢？在递归情况下，返回究竟是什么？似乎它只是返回一个对函数的调用，该函数将继续调用该函数，直到它返回 1 ——但它似乎从未进行任何真正的计算/操作。将此与经典的阶乘函数进行对比：

```
def factorial(n):
    if n == 1:
         return 1
    else:
         return n * factorial(n) 
```

在这里，函数显然每次都对定义的整数 n 进行操作，而斐波那契函数只对函数本身进行操作，直到返回 1。

最后，当我们使用合并排序算法之类的东西时，事情会变得更加奇怪。即这段代码：

```
 middle = int(len(L)/2)
    left = sort(L[:middle], lt)
    right = sort(L[middle:], lt)
    print(left, right)
    return merge(left, right, lt) 
```

left 和 right 似乎在递归调用 sort，但 print 语句似乎表明 merge 正在处理每个递归调用。那么每个递归调用是否以某种方式“保存”，然后在最终在返回时调用合并时对其进行操作？我越来越困惑自己......我觉得我正处于对递归的强烈理解的边缘，但我对 return 对递归调用的确切作用的理解阻碍了我的发展。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T06:08:59.420

试试这个练习：

*fib(0)*的值是多少？*fib(1)*的值是多少？让我们把这些写下来。

```
fib(0) == 1
fib(1) == 1 
```

我们知道这一点是因为这些是“基本情况”：它匹配*fib*定义中的第一个情况。

好吧，让我们来顶一下。*fib(2)*的值是多少？我们可以查看函数的定义，它将是：

```
fib(2) == fib(1) + fib(0) 
```

我们知道*fib(1)*和*fib(0)*的值是什么：它们都会做一些工作，然后给我们一个答案。所以我们知道*fib(2)*最终会给我们一个值。

好的，顶一下 *fib(3)*的值是多少？我们可以看一下定义，它将是：

```
fib(3) == fib(2) + fib(1) 
```

我们已经知道*fib(2)*和*fib(1)*最终会为我们计算数字。 *fib(2)会比**fib(1)*做更多的工作，但它们最终都会触底，给我们可以添加的数字。

先解决小问题，看看当你扩大问题的规模时，子问题是我们知道如何处理的事情。

如果你上过标准的高中数学课，你就会看到类似的东西：数学家使用所谓的“数学归纳法”，这与我们程序员用作工具的递归的想法相同。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-21T06:41:10.440

不了解递归函数的工作原理很常见，但这确实表明您只是不了解函数和返回的工作原理，因为递归函数的工作原理与普通函数**完全相同。**

```
print 4 
```

这是有效的，因为该`print`语句知道如何打印值。它被赋予了 value `4`，并打印出来。

```
print 3 + 1 
```

该`print`语句不理解如何打印`3 + 1`。`3 + 1`不是一个值，它是一个表达式。幸运`print`的是不需要知道如何打印表达式，因为它永远不会看到它。Python 将**值**传递给事物，而不是表达式。所以 Python 所做的就是在执行代码时*评估表达式。*在这种情况下，这会`4`产生价值。然后将该值`4`赋予该`print`语句，该语句愉快地打印它。

```
def f(x):
    return x + 1

print f(3) 
```

这与上面的非常相似。`f(3)`是一个表达式，而不是一个值。`print`不能用它做任何事情。Python 必须对表达式求值以产生一个值来打印。它通过查找 name 来做到这一点，`f`幸运的是，它找到了由`def`语句创建的函数对象，并使用参数调用函数`3`。

这导致函数的主体被执行，并`x`绑定到`3`. 与 的情况一样`print`，该`return`语句不能对表达式执行任何操作`x + 1`，因此 Python 会评估该表达式以尝试找到一个值。`x + 1`with `x`bound to`3`产生 value `4`，然后返回。

从函数返回一个值会使函数调用表达式的求值变为该值。所以，回到 中`print f(3)`，Python 已经成功地将表达式计算`f(3)`为 value `4`。然后`print`可以打印。

```
def f(x):
    return x + 2

def g(y):
    return f(y * 2)

print g(1) 
```

这里又`g(2)`是一个表达式而不是一个值，所以它需要被评估。评估`g(2)`导致我们`f(y * 2)`有`y`约束力`1`。`y * 2`不是一个值，所以我们不能调用`f`它；我们必须首先评估它，这会产生 value `2`。然后我们可以调用`f`on ，`2`它返回bound to 。计算为 value ，该 value 是从内部返回并成为内部表达式的值。这*最终*给出了一个返回值，因此表达式被评估为 value ，然后打印出来。`x + 2``x``2``x + 2``4``f``f(y * 2)``g`*`g``g(1)``4`*

 *请注意，在深入评估`f(2)`Python 时，仍然“记得”它已经在评估的中间，`g(1)`一旦知道`f(2)`评估的内容，它就会回到正确的位置。

就是这样。这就是全部。您不需要了解有关递归函数的任何特殊内容。`return`使调用此特定函数调用的表达式成为赋予的值`return`。**直接**表达式，而不是调用函数的更高级别的表达式调用函数的函数。最里面的一个。中间函数调用是否恰好与这个函数调用相同的函数并不重要**。**甚至无法`return`知道此函数是否被递归调用，更不用说在这两种情况下的行为不同了。`return` **总是总是**将其值返回给*直接*这个函数的调用者，不管它是什么。它**永远不会**“跳过”任何这些步骤并将值返回给更远的调用者（例如递归函数的最外层调用者）。

但为了帮助您*了解*这是否有效，让我们`fib(3)`更详细地跟踪评估。

```
fib(3):
    3 is not equal to 0 or equal to 1
    need to evaluate fib(3 - 1) + fib(3 - 2)
        3 - 1 is 2
        fib(2):
            2 is not equal to 0 or equal to 1
            need to evaluate fib(2 - 1) + fib(2 - 2)
                2 - 1 is 1
                fib(1):
                    1 is equal to 0 or equal to 1
                    return 1
                fib(1) is 1
                2 - 2  is 0
                fib(0):
                    0 is equal to 0 or equal to 1
                    return 1
                fib(0) is 1
            so fib(2 - 1) + fib(2 - 2) is 1 + 1
        fib(2) is 2
        3 - 2 is 1
        fib(1):
            1 is equal to 0 or equal to 1
            return 1
        fib(1) is 1
    so fib(3 - 1) + fib(3 - 2) is 2 + 1
fib(3) is 3 
```

更简洁地说，`fib(3)`返回`fib(2) + fib(1)`。`fib(1)`返回 1，但`fib(3)`返回1*加上*的结果`fib(2)`。`fib(2)`返回`fib(1) + fib(0)`；两者都返回`1`，因此将它们加在一起`fib(2)`得到`2`. 回到`fib(3)`过去`fib(2) + fib(1)`，我们现在可以说这就是`2 + 1`过去`3`。

您缺少的关键点是 while`fib(0)`或`fib(1)`return `1`，它们`1`构成了更高级别调用相加的表达式的一部分。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T08:45:23.157

你需要理解**数学归纳法**才能真正掌握这个概念。一旦理解了递归就很简单了。考虑一个简单的函数，

```
 def fun(a):  
          if a == 0: return a
          else return a + 10 
```

return 语句在这里做什么？它只是返回`a+10`。为什么这很容易理解？当然，一个原因是它没有递归。;) return 语句为什么这么容易理解是它在调用时有 a 和 10 可用。

现在，考虑一个使用递归的简单`sum of n numbers`程序。现在，在对递归进行编码之前，一件重要的事情是您必须了解它在数学上应该如何工作。在`n`数字总和的情况下，我们知道如果数字是已知的，我们可以返回`sum`它。现在如果不知道怎么办。好吧，我们找到项的总和并添加到它。`n-1``sum + n``sum``n-2``n-1`

所以，`sumofN(n) = n + sum(n-1)`。

现在，到了终结部分。我们知道这不能无限期地继续下去。因为`sumofN(0) = 0`

所以，

```
 sumofN(n) = 0, if n = 0,  
            n + sum(n-1) , otherwise 
```

在代码中，这意味着，

```
 def sumofN(n):  
          if n == 0: return 0  
          return n + sum(n-1) 
```

这里假设我们调用 sumofN(10)。它返回`10 + sumofN(9)`。我们有`10`我们。另一个术语呢。它是其他一些函数的返回值。所以我们要做的是等到该函数返回。在这里，由于被调用的函数只是它自己，所以它一直等到 sumofN(9) 返回。当我们达到 9 + sumofN(8) 时，它会等到 sumofN(8) 返回。

实际发生的是

> 10 + sumofN(9) ，即
> 10 + 9 + sumofN(8)，即
> 10 + 9 + 8 + sumofN(7) .....

最后当 sumofN(0) 返回时，我们有，

> 10 + 9 + 8 + 7 + 6 + 5 + 4 + 3 + 2 + 1 + 0 = 55

这个概念是理解递归所需要的。:)。现在，归并排序呢？

```
 mergesort(someArray)  = { l = mergesort the left part of array,
                             r = mergesort the right part of the array,  
                             merge(l and r)  
                           } 
```

在可以返回左侧部分之前，它会继续在“最左侧”数组上调用合并排序。一旦我们有了它，我们就找到了正确的数组，它确实找到了“最左边的”数组。一旦我们有一个左右，我们合并它们。

关于递归的一件事是，一旦你从正确的角度看待它，它就非常简单，而正确的角度被称为**数学归纳法***

# openlayers - 如何使用 nominatim 实现地理编码

> ID：12524914
> 
> 赞同：3
> 
> 时间：2012-09-21T05:47:00.457
> 
> 标签：openlayers, geocoding, openstreetmap, nominatim

嗨，我是 openstreet 地图和 nomintim 的新手......我在以下链接中找到了我想要的东西......但我不知道如何实现它......我只需要获取地理编码详细信息就像如果我们搜索一个地方，我需要获取纬度和经度，并且还建议了更多结果，如以下示例中的左列所示，我不想将它绘制在地图中。任何帮助将不胜感激

[http://nominatim.openstreetmap.org/search](http://nominatim.openstreetmap.org/search)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T13:54:45.393

你先搜索了吗？谷歌上的第一个结果：

[http://wiki.openstreetmap.org/wiki/Nominatim](http://wiki.openstreetmap.org/wiki/Nominatim)

尝试向此 URL 发出请求：

[http://nominatim.openstreetmap.org/search?q=ADDRESS_HERE&format=XML/JSON/HTML](http://nominatim.openstreetmap.org/search?q=ADDRESS_HERE&format=XML/JSON/HTML)

这有地理编码结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T14:28:43.270

这是android Java文件中Nominatim类的详细说明！正如我所怀疑的那样，这是将它集成到 Android Studio 的唯一方法！希望它能让 Senese

```
http://code.google.com/p/osmbonuspack/source/browse/trunk/OSMBonusPack/src/org/osmdroid/bonuspack/location/GeocoderNominatim.java 
```

此外，如果您在 Android Studio 或 eclipse 上工作，您可以添加库

从 [这里](http://grepcode.com/snapshot/repo1.maven.org/maven2/fr.dudie/nominatim-api/2.0%22here%22)。

# android - WakefulIntentService 在我的用户迁移到 ICS 时报告新的崩溃？

> ID：12524916
> 
> 赞同：0
> 
> 时间：2012-09-21T05:47:08.303
> 
> 标签：android, intentservice, commonsware-cwac

我的用户正在慢慢迁移到 ICS（Android 4.0 及更高版本），从那时起，我可以看到出现新的崩溃报告......看起来我的 WakefulIntentService 实现触发了以下错误：

> java.lang.NullPointerException at com.cousinHub.meteo.AppService.doWakefulWork(AppService.java:104) at com.cousinHub.meteo.WakefulIntentService.onHandleIntent(WakefulIntentService.java:70) at android.app.IntentService$ServiceHandler.handleMessage( IntentService.java:59) 在 android.os.Handler.dispatchMessage(Handler.java:99) 在 android.os.Looper.loop(Looper.java:123) 在 android.os.HandlerThread.run(HandlerThread.java:60 )

第 70 行在 onHandleIntent 中查找问题：

```
import android.app.IntentService;
import android.content.Context;
import android.content.Intent;
import android.os.PowerManager;

abstract public class WakefulIntentService extends IntentService {
    abstract protected void doWakefulWork(Intent intent);

    public static final String LOCK_NAME_STATIC="com.commonsware.cwac.wakeful.WakefulIntentService";
    private static PowerManager.WakeLock lockStatic=null;

    public static void acquireStaticLock(Context context) {
        getLock(context).acquire();
    }

    synchronized private static PowerManager.WakeLock getLock(Context context) {
        if (lockStatic==null) {
            PowerManager mgr=(PowerManager)context.getSystemService(Context.POWER_SERVICE);

            lockStatic=mgr.newWakeLock(PowerManager.PARTIAL_WAKE_LOCK, LOCK_NAME_STATIC);
            lockStatic.setReferenceCounted(true);
        }

        return(lockStatic);
    }

    public static void sendWakefulWork(Context ctxt, Intent i) {
        acquireStaticLock(ctxt);
        ctxt.startService(i);
    }

    @SuppressWarnings("unchecked")
    public static void sendWakefulWork(Context ctxt, Class clsService) {
        sendWakefulWork(ctxt, new Intent(ctxt, clsService));
    }

    public WakefulIntentService(String name) {
        super(name);
    }

    @Override
    public void onStart(Intent intent, int startId) {
        if (!getLock(this).isHeld()) {  // fail-safe for crash restart
            getLock(this).acquire();
        }

        super.onStart(intent, startId);
    }

    @Override
    final protected void onHandleIntent(Intent intent) {
        try {
            doWakefulWork(intent);
        }
        finally {
            getLock(this).release();
        }
    }
} 
```

知道为什么这段代码可以在 Gingerbread (Android < 4.0) 上正常工作并且现在中断了吗？

```
try {
            doWakefulWork(intent);
        } 
```

=> 由于某种原因，意图看起来为空？

或者可能是触发 NullPointer Exception 的下一个代码块：

```
finally {
            getLock(this).release();
        } 
```

*   你会怎么解决这个问题？

这种方式可能吗？

```
if ((this!=null)&&(intent!=null)) {
            try {
                doWakefulWork(intent);
            }
            finally {
                getLock(this).release();
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T10:47:16.883

您会注意到您的异常来自：

```
com.cousinHub.meteo.AppService.doWakefulWork(AppService.java:104) 
```

首先，我没有在`com.cousinHub.meteo`包里写任何东西。其次，这将是一种方法的*实现*`doWakefulWork()`，而我发布的只是示例。第三，您拒绝发布您的实现`doWakefulWork()`并指出第 104 行。

我谦虚地建议你检查你的`AppService`课程，第 104 行，以确定你哪里出错了。

# java - 如何将具有重复项的数组作为集合进行比较？

> ID：12524917
> 
> 赞同：3
> 
> 时间：2012-09-21T05:47:09.507
> 
> 标签：java, arrays, set, equals

我有两个可能有重复的数组。我需要将它们作为集合进行比较。

例如`{1, 4, 9, 16, 9, 7, 4, 9, 11}`相当于`{11, 11, 7, 9, 16, 4, 1}`. 我尝试了很多方法，但我不断收到错误或错误的答案。这是我现在拥有的代码：

```
import java.util.Scanner;
public class sameElement{
  public static void main(String[] args){
        int[] value1 = {11, 7, 9, 16, 4, 1};
        int[] value2 = {11, 11, 7, 9, 16, 4, 1};
   sort(value1);
   sort(value2);
   System.out.println(sameSet(value1, value2));

   }
public static boolean sameSet(int[] a, int[] b){
int j = 0;
int counter2 = 0;
for(int i = 0; i < b.length; i++){
  if(a[j] == b[i]){j++;}
  else{counter2++;};}

   }
public static int[] sort (int[] a){
  for (int i = 0; i < a.length; i++) {
    for (int i2 = i + 1; i2 < a.length; i2++){
        if (a[i] > a[i2]){
          int temp = a[i2];
          a[i2] = a[i];
          a[i] = temp;}
         }
     }
return a;
 }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T06:25:20.827

TreeSet 是一个排序集，因此它将免费进行排序和重复删除。因此，您所要做的就是将数组加载到其中，然后使用 .equals()。

```
Integer[] value1 = { 11, 7, 9, 16, 4, 1 };
Integer[] value2 = { 11, 11, 7, 9, 16, 4, 1 };

Set<Integer> tSet1 = new TreeSet<Integer>(Arrays.asList(value1));
Set<Integer> tSet2 = new TreeSet<Integer>(Arrays.asList(value2));

System.out.println(tSet1);
System.out.println(tSet2);

System.out.println(tSet1.equals(tSet2)); 
```

输出

```
[1, 4, 7, 9, 11, 16]
[1, 4, 7, 9, 11, 16]
true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:10:34.237

```
import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;

import java.util.HashSet;
import java.util.Set;

public class Test {
    public static class SameElement {
        /**
         * Constructor.
         */
        private SameElement()
        {
            // avoid instatiation
        }

        /**
         * Check if the provided 2 arrays have the same elements ignoring order and duplicates
         * 
         * @param val1 1st array
         * @param val2 2nd array
         * @return true if so.
         */
        public static boolean sameSet(int[] val1, int[] val2)
        {
            return toSet(val1).equals(toSet(val2));
        }

        /**
         * Transform provided array of int into a {@link Set} of {@link Integer}.
         * 
         * @param vals Array of int to use
         * @return a {@link Set} of {@link Integer} (empty if vals is null)
         */
        private static Set<Integer> toSet(int[] vals)
        {
            final Set<Integer> set = new HashSet<Integer>();
            if (vals != null) {
                for (final int i : vals) {
                    set.add(i);
                }
            }
            return set;
        }
    }

    @org.junit.Test
    public void testSameSet()
    {
        int[] value1 = { 11, 7, 9, 16, 4, 1 };
        int[] value2 = { 11, 11, 7, 9, 16, 4, 1 };
        int[] value3 = { 8, 11, 11, 7, 9, 16, 4, 1 };
        assertTrue(SameElement.sameSet(value1, value2));
        assertFalse(SameElement.sameSet(value3, value1));
        assertFalse(SameElement.sameSet(value3, value2));
        assertFalse(SameElement.sameSet(null, value2));
        assertFalse(SameElement.sameSet(value1, null));
        assertTrue(SameElement.sameSet(null, null)); // check against your requirements
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T05:52:26.450

用于[`Arrays.sort`](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#sort%28int%5b%5d%29)对数组进行排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T06:13:06.383

我已经修改了您的`sameSet`方法，它不需要对您的数组进行排序并处理重复项而不删除它们。

```
public static boolean sameSet(int[] a, int[] b)
{
    for (int i = 0; i < a.length; i++)
    {
        boolean match = false;
        for (int j = 0; j < b.length; j++)
        {
            if (a[i] == b[j])
            {
                match = true;
                break;
            }
        }
        if (!match)
            return false;
    }
    return true;
} 
```

我有很大的优化空间，但目前可以达到目的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T07:03:52.893

下面是我附带的代码。

1.  检查数组的长度以确定哪个最大。
2.  外循环使用最大数组
3.  对于最大数组中的每个元素迭代较小的数组
4.  检查每个元素，如果未找到，则声明为不相等。

这是代码。

```
public static void main(String[] args) {

    int[] value1 = { 11, 7, 9, 16, 4, 1 };
    int[] value2 = { 11, 11, 7, 9, 16, 4, 1 };

    int[] firstArray = null;
    int[] secondArray = null;
    //Max Length Array should be used for outer loop
    if(value2.length >value1.length)
    {
        firstArray = value2;
        secondArray = value1;
    }
    else
    {
        firstArray = value1;
        secondArray = value2;
    }
    boolean equal = true;
    for (int i = 0; i < firstArray.length; i++) {
        boolean found = false;//each iteration initialise found to false
        for (int j = 0; j < secondArray.length; j++) {
            if (firstArray[i] == secondArray[j]) {
                found = true;
                break;// as there is no point running the loop
            }

        }
        if (!found) {
            equal = false;//check after each iteration if found is false if false arrays are not equal and break
            break;
        }

    }
    System.out.println(equal);

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T05:55:42.240

```
 int[] value1 = {11, 7, 9, 16, 4, 1};
        int[] value2 = {11, 11, 7, 9, 16, 4, 1};
        HashSet<Integer> set = new HashSet<Integer>();
        HashSet<Integer> set2 = new HashSet<Integer>();

           for(int i=0; i<value1.length;i++) {
                  set.add(value1[i]);
           }
        for(int j=0; j<value2.length; j++) {
                 set2.add(value2[j]);
           }
          now do the sorting and compare both the sets 
```

# networking - 用于 ping 的 tcl 脚本不起作用

> ID：12524919
> 
> 赞同：1
> 
> 时间：2012-09-21T05:47:15.743
> 
> 标签：networking, tcl

我有一个调用 ping 命令并返回其响应的 tcl 代码，代码如下

```
proc ping-igp {} {
foreach i {
127.0.0.1
200.200.200.1
} {
if { [regexp "0% loss"  [eval exec "ping $i -n 1" ]]} { puts “$i”} else { puts “$i  failed” }
}
} 
```

但是在执行它时，我得到如下的o/p，

```
% proc ping-igp {} {
foreach i {
127.0.0.1
200.200.200.1
} {
if { [regexp "0% loss"  [eval exec "ping $i -n 1" ]]} { puts "$i"} else { puts "
$i  failed" }
}
}
% ping-igp
"127.0.0.1"
Pinging 200.200.200.1 with 32 bytes of data:
Request timed out.
Ping statistics for 200.200.200.1:
Packets: Sent = 1, Received = 0, Lost = 1 (100% loss),
child process exited abnormally
% 
```

我想知道什么时候我无法 ping 200.200.200.1 为什么我的代码不处理 else 子句并最终给出 o/p “200.200.200.1 failed”。我匹配“0% 损失”

多谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T09:10:21.843

您需要[捕获](http://www.tcl.tk/man/tcl/TclCmd/catch.htm)对 ping 的 exec 调用，以防它返回错误。这是修改为使用 catch 的代码。

```
proc ping-igp {} {
foreach i {
  127.0.0.1
  200.200.200.1
} {
if {[catch {exec ping $i -n 1} result]} { set result 0 } 
if { [regexp "0% loss"  $result]} { puts "$i"} else { puts "$i  failed" }
}
} 
```

现在运行它给出：

```
% ping-igp
127.0.0.1
200.200.200.1  failed
% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:51:35.767

这是我为自己使用而创建的东西：Tcl 的 ping proc。它并不完美，但有效：

```
package require Tclx; # Needed for lassign and wait

# Pings a host and returns 0 if OK, non-zero otherwise
proc ping {host} {
    # TODO: Use different command for Windows OS
    set childPid [exec ping -c 1 $host > /dev/null 2>@1 &]
    lassign [wait $childPid] pid howItEnded exitCode
    return $exitCode
}

# Test the ping proc
set hostList {google.com 10.0.0.99 foo.bar}
foreach host $hostList {
    set code [ping $host]
    puts [format "%4d %s" $code $host]
} 
```

样本输出：

```
$ tclsh ping_test.tcl 
   0 google.com
   2 10.0.0.99
  68 foo.bar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-05T21:53:40.807

```
proc ping_device { router ip_address max_tries } {
    set tries 0    
    while {$tries <= $max_tries} {
        if {[catch {exec ping $ip_address -c 5} result]} { 
            puts "Ping command failed on Linux machine"
            incr tries
            if {$tries > $max_tries} {
                ats_log -error "Giving up on ping"
                return 0
            }
            continue
        } 
        if {[regexp {([1-5]+) *[packets]? *received} $result - packets]} { 
            puts "Able to ping device: $router and\
                           successfully received $packets packets"
            return 1
        } else { 
            puts "Not Able to ping device: $router"
            incr tries
        }
    }
    puts "Giving up on ping, returning 0"
    return 0
} 
```

# android - 为 textView Android 设置文本颜色

> ID：12524920
> 
> 赞同：9
> 
> 时间：2012-09-21T05:47:17.410
> 
> 标签：android, colors, textview

在 string.xml 文件中，我使用以下标签

```
 <string name="CodeColor" >"#0000ff"</string> 
```

如果我使用

```
 textview1.setTextColor(Color.RED); 
```

它有效，但是当我使用

```
 textview1.setTextColor(TextViewStyles.this.getResources().getColor(R.string.CodeColor)); 

 or
 textview1.setTextColor(R.string.CodeColor); 
```

它不起作用。有什么建议么...

提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-21T05:49:33.753

您需要在 xml 中创建一组样式（通常在 res/values/styles.xml 中）

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="gray">#eaeaea</color>
    <color name="titlebackgroundcolor">#00abd7</color>
    <color name="titlecolor">#666666</color>
<resources> 
```

在布局文件中，您可以调用颜色或样式：

```
android:textColor="@color/titlecolor" 
```

查看一些示例：

[http://developer.android.com/guide/topics/ui/themes.html](http://developer.android.com/guide/topics/ui/themes.html)

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-21T06:09:38.343

您可以使用

```
 textView1.setTextColor(getResources().getColor(R.color.mycolor)) 
```

或者

```
 textview1.setBackgroundColor(Color.parseColor("#ffffff")); 
```

或者

```
 textview1.setBackgroundColor(Color.RED); 
```

或者

```
 textView1.setBackgroundColor(R.color.black); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-09-18T14:00:28.307

这可能更容易：

```
TextView textresult = (TextView)findViewById(R.id.textView1);
textresult.setTextColor(Color.RED); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T05:55:22.717

你应该使用`R.color.CodeColor`. 你正在使用`R.string.CodeColor`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T06:16:16.753

尝试像这样设置颜色可能会对您有所帮助

```
txt.setTextColor(Color.rgb(0, 87, 48)); 
```

这是不同的方式，但它可以改变颜色，这里需要红色，绿色，蓝色代码才能通过

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-14T15:00:15.803

我基本上只是合并所有部分好的答案。

您将颜色定义为`String`，但 AFAIK Android 将颜色处理为`Itegers`。
所以使用`Colors.xml`文件（而不是`strings.xml`）：并在代码中将其称为`R.color.CodeColor`.
[（此外，我认为，有一些命名约定告诉您将这些值全部命名为小写：`code_color`或`codecolor`）]

或者您可以将它们定义为字符串，但随后您需要将其设为 Integer: `Color.parseColor(R.string.code_color)`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T05:54:17.523

**像这样在colors.xml**文件中定义颜色：

```
 <resources>
       <color name="CodeColor" >#0000ff</color>
  </resources> 
```

然后在代码中使用任何你喜欢的颜色：**R.color.CodeColor**

祝你好运！

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2018-07-24T12:36:20.407

我试过类似的东西：

textView.setTextColor(R.color.Red);

# clojure - 如何展平包含向量序列的序列

> ID：12524923
> 
> 赞同：7
> 
> 时间：2012-09-21T05:47:33.483
> 
> 标签：clojure

我有一个这种格式的序列 -

( ([2 3 4] [7 6 8]) (["hh" 5] [9 8]))

我想将它展平，以便它是一个向量序列而不是一个向量序列序列。我怎么做 ？

也将其展平完全展平，我只想将其展平一层至 - ([2 3 4] [ 7 6 8] ["hh" 5] [9 8])

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T05:56:54.827

尝试`concat`：

```
(apply concat seq) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T06:08:26.983

```
(reduce (fn[h v]
          (reduce (fn[s e] (conj s e)) h v))
        [] [[[2 3 4] [7 6 8]] [["hh" 5] [9 8]]]) 
```

# database - 使用内容提供程序从路径和 URI 获取记录的行号

> ID：12524926
> 
> 赞同：0
> 
> 时间：2012-09-21T05:48:06.617
> 
> 标签：database, uri, row, android-contentprovider, record

如果我有 URI 和图像的路径，有没有办法使用内容提供程序获取 android sqlite 数据库中存储图像的记录的行号？

例如，我有以下两条信息：

URI：内容：//媒体/外部/图像/媒体/pic05.png

路径：/mnt/sdcard/pic05.png

必须有一个函数可以返回行号或以某种方式执行此操作，有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T13:58:10.310

这有点奇怪，因为图像的 uri 应该是以下形式： AuthorityString/UriPathIndex/# 其中 # 是行号。并且图像应该作为一个 blob 存储在其中一列中，或者将其飞行路径作为一列。

然后，例如，在您的内容提供程序中插入图片后，返回的 uri 将以行号结束，可以使用

```
 long row = ContentUris.parseId(uri); 
```

通过查询该行，您可以获得指向您的图像的光标列。

# sql - 如何在 SQL Azure 中创建两个或多个唯一列？

> ID：12524931
> 
> 赞同：2
> 
> 时间：2012-09-21T05:48:39.343
> 
> 标签：sql, azure, unique

我想在我的表中选择两列并制作它们`unique`，但我不知道如何在 SQL Azure 数据库中执行此操作。如下图所示，它没有显示任何修改表属性的选项，所以一切都是使用 sql 查询完成的：
![在此处输入图像描述](../Images/81571a72b3a930d357ee6b5590a0cfa0.png)

这是表的生成脚本：

```
USE [mydbase]
GO

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[clientaccess](
    [ID] [bigint] IDENTITY(1,1) NOT NULL,
    [ModuleName] [nvarchar](50) NOT NULL,
    [ClientAuthenticationId] [bigint] NOT NULL,
    [HasAccess] [bit] NOT NULL,
 CONSTRAINT [PK_clientaccess_ID] PRIMARY KEY CLUSTERED 
(
    [ID] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON)
)

GO

ALTER TABLE [dbo].[clientaccess]  WITH CHECK ADD  CONSTRAINT [CAI_caID] FOREIGN KEY([ClientAuthenticationId])
REFERENCES [dbo].[clientauthentication] ([ID])
GO

ALTER TABLE [dbo].[clientaccess] CHECK CONSTRAINT [CAI_caID]
GO 
```

这是我遇到问题的预览，它包含重复的记录：
![在此处输入图像描述](../Images/7ab2d2ff577d2706a05e87a9bd168cda.png)

希望有人能理解我的解释。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T06:38:25.830

有时 GUIS 有限制（或者没有，但您还没有发现所有功能是如何工作的）。您始终可以使用以下命令添加唯一约束`ALTER TABLE`：

```
ALTER TABLE [dbo].[clientaccess] 
  ADD CONSTRAINT Module_Client_UQ                --- choose a name
  UNIQUE (ModuleName, ClientAuthenticationId) ; 
```

# android - 表格中的 android 文本被截断

> ID：12524936
> 
> 赞同：2
> 
> 时间：2012-09-21T05:48:50.223
> 
> 标签：android, android-layout, textview

我一直在寻找这个问题的答案很长很长时间。我有以下代码：

```
 <TableRow
    android:id="@+id/tableRow106"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="10dp" 
    android:visibility="gone"
    android:background="@drawable/b02_light_bar">

    <LinearLayout
       android:layout_width="wrap_content"
       android:layout_height="wrap_content" >

   <Button
       android:id="@+id/button35"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:background="@drawable/b02_play_blue" 
       />

     <LinearLayout
       android:layout_width="wrap_content"
       android:layout_height="wrap_content" 
       android:orientation="vertical"
       android:paddingLeft="5dp"
       >

   <TextView
       android:id="@+id/textView20"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:textColor="#ffffff"
       android:text="@string/interaction2"
       android:textAppearance="?android:attr/textAppearanceMedium" />

   <TextView
       android:id="@+id/textView21"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:textColor="#41c4dd"
       android:text="@string/interaction2cont"
       android:textAppearance="?android:attr/textAppearanceSmall" />
    </LinearLayout>

</LinearLayout>
</TableRow> 
```

如果文本太长，我在 textview21 中的文本仍然会被截断。有谁知道如何解决这个问题？我向你保证，我什么都试过了！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T07:32:38.057

我已经复制了你的代码和字符串，是的，问题就在那里..

我有一个解决方案给你，那就是

`android:padding="10dp"`从`TableRow`标签中删除并将其应用到 tableRow 下的右侧`LinearLayout`。

```
<TableRow
    android:id="@+id/tableRow106"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:visibility="gone"
    android:background="@drawable/b02_light_bar">

    <LinearLayout
       android:layout_width="wrap_content"
       android:layout_height="wrap_content" 
       android:padding="10dp" 
       >

   <Button
       android:id="@+id/button35"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:background="@drawable/b02_play_blue" 
       />

     <LinearLayout
       android:layout_width="wrap_content"
       android:layout_height="wrap_content" 
       android:orientation="vertical"
       android:paddingLeft="5dp"
       >

   <TextView
       android:id="@+id/textView20"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:textColor="#ffffff"
       android:text="@string/interaction2"
       android:textAppearance="?android:attr/textAppearanceMedium" />

   <TextView
       android:id="@+id/textView21"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:textColor="#41c4dd"
       android:text="@string/interaction2cont"
       android:textAppearance="?android:attr/textAppearanceSmall" />
    </LinearLayout>

</LinearLayout>
</TableRow> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T05:52:55.823

使用属性`android:maxLines="3"`

将您的文本视图更改为

```
 <TextView
   android:id="@+id/textView21"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:textColor="#41c4dd"
   android:maxLines="3"
   android:text="@string/interaction2cont"
   android:textAppearance="?android:attr/textAppearanceSmall" /> 
```

# vim - 将已编辑和未保存的文件与 vi 中保存的文件版本进行比较

> ID：12524953
> 
> 赞同：1
> 
> 时间：2012-09-21T05:50:05.150
> 
> 标签：vim, vi

在将文件保存到 vi 之前，有什么方法可以知道我对（现有）文件所做的所有更改？换句话说，在 vi 中保存和编辑的文件版本之间进行“差异”的任何方式。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T07:18:02.523

`$VIMRUNTIME/vimrc_example.vim`定义了一个执行此`:DiffOrig`操作的命令。另请参阅`:help :DiffOrig`说明。只需将命令定义复制到您的`~/.vimrc`，就完成了！

# java - 参数和参数

> ID：12524963
> 
> 赞同：4
> 
> 时间：2012-09-21T05:51:09.777
> 
> 标签：java, scjp

我正在阅读 Sierra 和 Bates 的 SCJP 6 书。在第一章中有一节是关于“最后的论点”（第 41 页）。在本节中，它将“方法参数”称为“出现在方法声明中括号之间的变量声明”。

但是，在其他地方（在书中和网络上），约定是我们“传递参数”和“声明参数”。

我读错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T05:52:17.873

你是对的——这本书在这个特定的地方是错的，在其他地方也是错的。参数出现在调用站点，参数是方法声明的一部分。

Java 语言规范支持这一点——方法调用表达式具有参数列表（[JLS 15.12](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.12)）；方法声明具有形式参数（[JLS 8.4.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.4.1)），其中包括：

> 当调用方法或构造函数时（第 15.12 节），实际参数表达式的值会在执行方法或构造函数的主体之前初始化新创建的参数变量（每个声明的类型）。

如果有什么安慰的话，这些术语在网上到处都被错误地使用了，即使是那些知道得更好但偶尔粗心的人……我也把自己包括在内，尽管我在这方面很努力:( A这方面的一个很好的例子是在 C# 中，其中版本 4 引入了*命名*参数和*可选*参数，但该功能的描述几乎是您可能提到的所有错误排列。

# spring - Spring 集成 - 具有持久消息的可靠消息传递

> ID：12524967
> 
> 赞同：2
> 
> 时间：2012-09-21T05:51:38.310
> 
> 标签：spring, integration, messages

我当前的设置（部分）是这样的：

```
<channel id="chainInboundChannel">
  <queue message-store="mongoDbMessageStore"/>
</channel>

<chain id="myChain" input-channel="chainInboundChannel">
  <service-activator ref="service1" ... />
  <service-activator ref="service2" ... />
  <service-activator ref="service3" ... />
  <service-activator ref="service4" ... />
</chain> 
```

大概我的消息现在被保留了。对于消息在队列中的时间，这似乎是正确的。但是当链接收到消息时，它会从消息存储中删除。因此，如果应用程序在消息被“service3”处理时关闭，消息就会丢失。

如何在链内处理消息时保持消息的持久性？

**可选：** 如果任何服务在某些特定情况下返回 null 怎么办？在这种情况下，消息应该被删除，因为它已经到了生命周期的尽头。

# php - Laravel 重定向似乎不起作用

> ID：12524968
> 
> 赞同：4
> 
> 时间：2012-09-21T05:51:53.043
> 
> 标签：php, redirect, laravel

当我从控制器运行 www.mysite.com/login

```
return Redirect::to_action('profile'); 
```

它将用户带到 www.mysite.com/index.php/profile

我已经尝试过 Redirect::to('profile'); 但这也不起作用。重定向::home(); 把我带到 www.mysite.com/index.php 这让我相信我的 mod_rewrite 不知何故不起作用，但我有 RewriteEngine

```
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d

 RewriteRule ^(.*)$ index.php/$1 [L] 
```

在public下的.htaccess中。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T06:03:39.433

为了让 Laravel 生成减去 index.php 前缀的链接，除了拥有 .htaccess 文件之外，您还需要正确配置它。

它很容易被忽略，因此请确保您`'index' => '',`已将`application/config/application.php`. 它位于默认配置的第 42 行。

# ruby-on-rails - 在初始化程序中访问环境变量 Ruby on Rails

> ID：12524971
> 
> 赞同：2
> 
> 时间：2012-09-21T05:52:12.710
> 
> 标签：ruby-on-rails, environment-variables, initializer

在我的 Web 应用程序中，我想访问我的初始化程序文件中的环境变量。我的初始化器文件看起来像（initializers/gcm_on_rails.rb）

```
configatron.gcm_on_rails.api_url = 'https://android.googleapis.com/gcm/send'

#configatron.gcm_on_rails.api_key = 'abc'

configatron.gcm_on_rails.api_key == ENV['GCM_API_KEY']

Rails.logger.debug"$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$  #{configatron.gcm_on_rails.api_key}"

configatron.gcm_on_rails.app_name = 'com.xyz'   

configatron.gcm_on_rails.delivery_format = 'json' 
```

并在我的 .bashrc 文件中添加了以下键值

```
export GCM_API_KEY="abc" 
```

但我的记录器没有给我任何价值。这意味着我无法访问这些环境变量。我想访问这些变量。需要帮助...谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T06:23:05.087

如果您在 /etc/bashrc 或 /etc/profile 中设置了环境变量，那么这些环境变量在您的 shell 中可用。但是，在大多数操作系统上，Apache 不是从 shell 启动的，也不会加载 bashrc/profile 中定义的环境变量，这就是为什么在 /etc/bashrc 和 /etc/profile 中设置环境变量通常对 Apache 没有影响（以及通过归纳，在乘客和铁路流程上）。

参考：- [http://blog.phusion.nl/2008/12/16/passing-environment-variables-to-ruby-from-phusion-passenger/](http://blog.phusion.nl/2008/12/16/passing-environment-variables-to-ruby-from-phusion-passenger/)

# ruby - 查找未知首字母缩写词的正则表达式

> ID：12524974
> 
> 赞同：0
> 
> 时间：2012-09-21T05:52:19.490
> 
> 标签：ruby, regex, regex-negation, acronym

我需要一个正则表达式来挑选带有全部大写字母或未知首字母缩写词的行。

即：类似的东西

```
/[A-Z]{2,}/ 
```

结合

```
/(?!USA|UK|TLA)/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T07:21:45.573

你的意思是这样的？

```
\b(?!(?:USA|UK|TLA)\b)[A-Z]{2,}\b 
```

[在 Rubular 上](http://www.rubular.com/r/24UKZigl28)看到它

`\b`是一个[单词边界](http://www.regular-expressions.info/wordboundaries.html)，以确保它会找到完整的单词。

# jquery - jQuery Mobile 选择菜单焦点和模糊事件不会触发

> ID：12524976
> 
> 赞同：5
> 
> 时间：2012-09-21T05:52:23.327
> 
> 标签：jquery, html, cordova, jquery-mobile

当表单元素获得焦点时，我试图隐藏页脚。我还想在表单元素失去焦点时显示页脚，模糊事件应该处理。我无法在 jQuery Mobile 选择菜单表单元素上触发焦点或模糊事件。

这是我的表单元素之一的示例-

```
<select id="radiology-study-provider" class="selectList"></select> 
```

这是应该将我的页脚隐藏在焦点上并在模糊上显示它的 jQuery 代码（它在 DOM 内部准备好） -

```
 $('.selectList').change(function(){
      console.log("the change event is firing");
  });
  $('.selectList').focus(function(){
      $('div:jqmData(role="footer")').hide(); // hide the footer
  });
  $('.selectList').blur(function(){
      $('div:jqmData(role="footer")').show(); // show the footer
  }); 
```

奇怪的是，更改事件处理程序会触发，但焦点和模糊不会。

我已经在下面尝试过，但它不起作用 -

```
 $('.selectList').on('focus', function(){
      $('div:jqmData(role="footer")').hide(); // hide the footer
  });
  $('.selectList').on('blur', function(){
      $('div:jqmData(role="footer")').show(); // show the footer
  }); 
```

我也试过这个 -

```
 $('.selectList').bind( "focus", function(event, ui) {
       $('div:jqmData(role="footer")').hide(); // hide the footer
  });
   $('.selectList').bind( "blur", function(event, ui) {
       $('div:jqmData(role="footer")').hide(); // hide the footer
  }); 
```

我也尝试了 focusin() 和 focusout() 事件，但也没有成功。我尝试了几十个选择器（div.ui-select 就是其中之一）。我不认为这是我使用的选择器的问题。

我正在使用 jQuery Mobile 1.1.0 和 jQuery 1.7.1 - 我在[http://jquerymobile.com/test/docs/forms/selects/events.html](http://jquerymobile.com/test/docs/forms/selects/events.html)检查了 jQuery Mobile 选择菜单文档，与谷歌交谈，在这里搜索，并且找不到这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T17:16:27.087

这就是最终为我工作的原因。

```
document.addEventListener("deviceready", onDeviceReady, false);

function onDeviceReady () {
    document.addEventListener("hidekeyboard", onKeyboardHide, false);
    document.addEventListener("showkeyboard", onKeyboardShow, false);

}

function onKeyboardHide() {
    $('div:jqmData(role="footer")').show(); // show the footer
}

function onKeyboardShow() {
    $('div:jqmData(role="footer")').hide(); // hide the footer
} 
```

我在堆栈上遇到了这个 -[显示隐藏键盘在 android phonegap 中无法正常工作，](https://stackoverflow.com/questions/11686368/show-hide-keyboard-is-not-working-propery-in-android-phonegap)并注意到您可以收听这 2 个事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T06:01:21.477

尝试注释掉焦点事件并尝试..有时当焦点事件触发时，它会被触发多次，因此您看不到执行的代码......

```
$('.selectList').change(function(){
      alert("the change event is firing");
  });

 // $('.selectList').focus(function(){
 //    $('div:jqmData(role="footer")').hide(); // hide the footer
 //    alert("Focus event is firing");
 // });

  $('.selectList').blur(function(){
      //$('div:jqmData(role="footer")').show(); // show the footer
      alert("Blur event is firing");
  });​ 
```

我注释掉了焦点事件，其他两个事件似乎被触发了。删除评论，你会看到焦点事件被多次触发。

检查[小提琴](http://jsfiddle.net/C3veS/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T07:48:12.600

使用以下示例对我有用：

**JS：**

```
<script>
    document.addEventListener("deviceready", function(){}, false);

    $(function() {
        $('.selectList').change(function(){
            console.log("the change event is firing");                                      
        });

        $('.selectList').focus(function(){
            console.log("FOCUS");
            $('#my_footer').hide(); // hide the footer
        });

        $('.selectList').focusout(function(){
            console.log("FOCUS OUT");
            $('#my_footer').show(); // show the footer
        });
    });
</script> 
```

`#my_footer`我的页脚的 id 在哪里（检查下面的 HTML）。

**HTML：**

```
<body>
    <div data-role="page">
        <div data-role="content">

            <select id="radiology-study-provider" class="selectList">
                <option value="1">A</option>
                <option value="2">B</option>
                <option value="3">C</option> 
            </select>

        </div>
    </div>
</body> 
```

你可以试试这个例子，看看这是否对你有用：S

希望这可以帮助。让我知道你的结果。

# jquery-mobile - Backbone 和 jQuery Mobile：编程新内容和样式的问题

> ID：12524977
> 
> 赞同：1
> 
> 时间：2012-09-21T05:52:24.790
> 
> 标签：jquery-mobile, backbone.js, requirejs

我正在准备一个非常基本的 Backbone 应用程序，使用 jQuery Mobile 作为 UI 和 Backbone（使用 RequireJS）作为其余部分。

我使用以下项目作为基础： [https ://github.com/fiznool/mobile-backbone-boilerplate](https://github.com/fiznool/mobile-backbone-boilerplate)

并使用 Christophe Coenraets 指南来使用 jQuery Mobile 和 Backbone： [http ://coenraets.org/blog/2012/03/using-backbone-js-with-jquery-mobile/](http://coenraets.org/blog/2012/03/using-backbone-js-with-jquery-mobile/)

并找到了一些很好的信息，例如在这里： [jquery mobile require.js 和主干](https://stackoverflow.com/questions/10904433/jquery-mobile-require-js-and-backbone)

但是，我在新生成的内容和样式方面遇到了很多问题：更多的是具有多个 uri 段的页面（例如：/movie/1）。

我更改视图的方法如下所示：

```
var changeView = function(newView) {
  newView.render();
  newView.$el.addClass("ui-page").attr('data-role', 'page');

  $(container).append(newView.$el);

  $.mobile.changePage(newView.$el, {changeHash:false});
}; 
```

页面实际上发生了变化，但看起来没有任何样式。我通过在 jquery.mobiile.config.js 文件中使用以下代码找到了解决方案：

```
$(document).bind('pagechange', function(e) {
    $('.ui-page-active .ui-listview').listview('refresh');
    $('.ui-page-active').page("destroy").page();
}); 
```

但是，样式应用得很晚（在呈现页面之后，比如 500 毫秒之后）。

**有没有更好的解决方案？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T20:07:45.733

好吧，我选择删除 jQuery Mobile 并自己设计我的组件。

我喜欢 jQuery Mobile，我之前在几个应用程序中使用过它，但这个决定更有可能是因为使用 jQuery Mobile 时应用程序感觉太重了，我只需要 10% 的 jQuery Mobile。

# dll - 为现有 .dll 设置版本信息？

> ID：12524982
> 
> 赞同：3
> 
> 时间：2012-09-21T05:52:37.957
> 
> 标签：dll, version, versioning

需要在现有 .dll 上设置**版本信息**

我需要将这些添加到 dll

**1.文件版本 2.产品版本**

试过[这个免费版本](http://www.codeguru.com/tools/standalonetools/article.php/c1403)。
没有任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T10:02:56.520

有一个名为[verpatch](http://www.codeproject.com/Articles/37133/Simple-Version-Resource-Tool-for-Windows)的工具可以做到这一点。下载后，您可以从命令行运行它，如下所示：

```
verpatch your.dll /pv "product.version" /va "file.version" 
```

还有许多其他标志可用于添加额外信息。尝试：

```
verpatch /? 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T10:27:51.253

Heaventools Software有**[Resource Tuner Console](http://www.heaventools.com/command-line_resource_editor.htm)**。

> Resource Tuner Console 是一个命令行工具，使开发人员能够自动编辑大量 Windows 32 位和 64 位可执行文件中的不同资源类型。

具体参见[更改版本变量和更新版本信息](http://www.heaventools.com/rtconsole-sample-script-update-version-info.htm "编辑版本信息")页面以获取更多详细信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-03-29T13:34:07.560

我为此目的创建了一个[工具](https://build.codeplex.com)，因为没有找到任何足够易于使用和易于自动化的工具。开发人员发现它很有用。

如果这看起来像是自我广告，我很抱歉，但我知道同步版本有多烦人......

# android - 安卓抽屉效果

> ID：12524983
> 
> 赞同：1
> 
> 时间：2012-09-21T05:52:40.377
> 
> 标签：android, drawer

我想达到一个效果：

**页面 A**显示列表。A 页面顶部有一个按钮。
单击此按钮，将显示**页面 B。****页面 A**
将被推送到，但是。**`right side``not extrusion`**

 ****页面 A**仍然显示`10%`，但是`not hidden`。**

# php - 基于 PHP 的 Web 应用程序与 CGI

> ID：12524985
> 
> 赞同：0
> 
> 时间：2012-09-21T05:52:45.947
> 
> 标签：php, web-applications

我使用 Java webapps 已经有一段时间了。我想知道基于 PHP 的 webapps 与基于 Java 的 webapps 有何不同。我可以找到一些关于安全性、库的可用性等方面的差异，

基本上，基于 Java (servlet) 的 webapps 是多线程环境，其中一个进程可以满足不同请求的需求。这在 PHP 中是如何工作的？

a) 每个请求都是一个进程吗？在这种情况下，我们如何确保内存利用率和其他共享资源受到控制？

b) 在基于 PHP 的 webapps 中是否有一个名为 application scope/singleton 的概念？

c) 我们可以有连接池吗？

基本上，PHP 与 CGI 有何不同？

对于 PHP 开发人员来说，这个问题可能听起来很愚蠢。我很高兴知道已经有一个地方记录了差异。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T06:05:47.100

Java Web 应用程序托管（即在其中运行）有状态的、长时间运行的 Java 进程；因此，您可以利用内存中的对象缓存和操作线程的能力。

标准 CGI 模型（暂时忽略 FastCGI）相当简单：启动一个进程并传递传入的 HTTP 请求。CGI 进程自己处理请求（包括创建自己的线程，如有必要），然后将 HTTP 响应返回给生成子 CGI 进程的进程。然后 CGI 进程被终止 - 所以任何保存在内存中的东西都会丢失，并且必须序列化到某种持久性介质，例如磁盘上的数据库或文件。

（推测：CGI 的设计可能与 1990 年代初期服务器上可用的资源有限有关，以及网站如何不经常访问，因此使用这样的内存没有意义；最后，如果你正在研究一个巨大的可扩展项目，那么您可能不会对内存缓存感兴趣，因为您将拥有一个专用的状态服务器）。

PHP 是一个 CGI 系统，因此它继承了“一个请求一个服务器进程”模型的限制——至于不支持线程：这似乎是 PHP 开发人员的一个有意识的决定，因为它极大地简化了系统（无需担心例如，同步，并且因为 PHP 可能是当今排名第一的“初学者语言”，所以不要给他们足够的绳索来吊死自己是有道理的）——此外，如果您需要在 web 服务场景中使用多线程，那么 PHP 可能是首先使用错误的工具。

PHP 与 CGI 没有什么不同 - PHP 实现了 CGI。Java 网络服务器不使用 CGI（至少不为 Java 应用程序提供服务，请注意确实存在 Java servlet 主机的 CGI 实现，但我们不要让事情复杂化）。

因为 PHP 不是有状态的，这意味着它不能池化连接——但实际上这不是问题。当您将 PHP 与 MySQL 配对时，您会发现操作非常便宜。您可以连接到数据库，从 SELECT 中获取一些数据，并在 5 毫秒内返回格式精美的 HTML 表格，即使在十年前的机器上也是如此。只要页面生成时间保持在 30 毫秒以下（我个人对良好用户体验的客观时间限制），您使用什么平台都没有关系。

# c# - 无法启动调试窗口来检查代码

> ID：12524988
> 
> 赞同：-1
> 
> 时间：2012-09-21T05:53:28.833
> 
> 标签：c#, forms, debugging

我是 Visual Studio 的新手，我刚开始在我的编程课上使用它。我从网站下载了 C# 2010，每次我尝试调试代码时，表单窗口都不会显示为带有输出的黑框，而是显示一个空白的灰色框。我不知道如何检查我的代码，我找不到其他人遇到这个问题，请有人帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T05:58:29.017

当您假设一个黑框 - 意味着您想从控制台应用程序开始并且您得到一个灰色框 - 意味着您选择了 Windows 窗体应用程序。

所以你该怎么做：

选择一个控制台应用程序。像文件-> 新建-> 项目-> 控制台应用程序。

在您的代码上放置断点。并按 F5 以调试模式运行您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T06:08:02.910

您确定将解决方案配置设置为`Debug`？或者是`Release`吗？阅读[本文](http://msdn.microsoft.com/en-us/library/wx0123s5.aspx)了解详情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T05:57:28.277

在左侧有一个空列的代码中放置一个调试点。然后单击 F5 运行带有调试的代码。它会在遇到断点时停止。

检查本[教程](http://www.dotnetperls.com/debugging)

# .htaccess - htaccess - 用于重定向的可选 url 参数

> ID：12524993
> 
> 赞同：0
> 
> 时间：2012-09-21T05:54:33.800
> 
> 标签：.htaccess, url-rewriting

我在我的 htaccess 文件中有一个 url 的重定向，它的工作原理就像它应该的那样：

```
RewriteRule (.*)/(.*)\.html$ view.php?mode=$1&id=$2 [nc] 
```

但是，当我修改该行以尝试使用`?start=1`下面的行检查启动参数 ( ) 是否存在时，我得到一个 404。

```
RewriteRule (.*)/(.*)\.html(\?start=[0-9]+)$ view.php?mode=$1&id=$2&start=$5 [nc] 
```

我应该如何编写它来获取可选`start`参数并将其添加到 URI？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T06:14:23.163

您无法匹配 a 中的查询字符串（之后的所有内容`?`）`RewriteRule`，您需要匹配 a 中的`%{QUERY_STRING}`a`RewriteCond`并使用**%N**反向引用分组：

```
RewriteCond %{QUERY_STRING} ^start=([0-9]+)
RewriteRule (.*)/(.*)\.html$ view.php?mode=$1&id=$2&start=%1 [nc] 
```

但是，您不需要这样做。要附加现有的查询字符串，只需使用`QSA flag`：

```
RewriteRule (.*)/(.*)\.html$ view.php?mode=$1&id=$2 [nc,QSA] 
```

如果 URI 是`/something/file.html?start=100`，它将被重写为`/view.php?mode=something&id=file&start=100`

# python - 使用 PyCrypto AES 256 加密和解密

> ID：12524994
> 
> 赞同：199
> 
> 时间：2012-09-21T05:54:41.483
> 
> 标签：python, encryption, padding, pycrypto, initialization-vector

我正在尝试使用 PyCrypto 构建两个函数，它们接受两个参数：消息和密钥，然后加密/解密消息。

我在网上找到了几个链接来帮助我，但每个链接都有缺陷：

[codekoala 上的这个](http://www.codekoala.com/blog/2009/aes-encryption-python-using-pycrypto/)使用 os.urandom，PyCrypto 不鼓励这样做。

此外，我给函数的密钥不能保证具有预期的确切长度。我能做些什么来做到这一点？

另外，有几种模式，推荐哪一种？我不知道用什么：/

最后，IV到底是什么？我可以为加密和解密提供不同的 IV，还是会返回不同的结果？

**编辑**：删除了代码部分，因为它不安全。

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2014-02-21T08:10:37.227

这是我的实现，它对我进行了一些修复，并增强了 32 字节和 iv 到 16 字节的密钥和密码短语的对齐：

```
import base64
import hashlib
from Crypto import Random
from Crypto.Cipher import AES

class AESCipher(object):

    def __init__(self, key): 
        self.bs = AES.block_size
        self.key = hashlib.sha256(key.encode()).digest()

    def encrypt(self, raw):
        raw = self._pad(raw)
        iv = Random.new().read(AES.block_size)
        cipher = AES.new(self.key, AES.MODE_CBC, iv)
        return base64.b64encode(iv + cipher.encrypt(raw.encode()))

    def decrypt(self, enc):
        enc = base64.b64decode(enc)
        iv = enc[:AES.block_size]
        cipher = AES.new(self.key, AES.MODE_CBC, iv)
        return self._unpad(cipher.decrypt(enc[AES.block_size:])).decode('utf-8')

    def _pad(self, s):
        return s + (self.bs - len(s) % self.bs) * chr(self.bs - len(s) % self.bs)

    @staticmethod
    def _unpad(s):
        return s[:-ord(s[len(s)-1:])] 
```

* * *

## 回答 #2

> 赞同：154
> 
> 时间：2012-09-21T06:12:54.457

您可能需要以下两个函数：`pad`- 填充（进行加密时）和`unpad`- 当输入长度不是 BLOCK_SIZE 的倍数时取消填充（进行解密时）。

```
BS = 16
pad = lambda s: s + (BS - len(s) % BS) * chr(BS - len(s) % BS) 
unpad = lambda s : s[:-ord(s[len(s)-1:])] 
```

所以你问密钥的长度？您可以使用密钥的 md5sum 而不是直接使用它。

另外，根据我使用PyCrypto的一点经验，IV用于在输入相同的情况下混合加密的输出，因此IV选择为随机字符串，并将其用作加密输出的一部分，然后用它来解密消息。

这是我的实现，希望对您有用：

```
import base64
from Crypto.Cipher import AES
from Crypto import Random

class AESCipher:
    def __init__( self, key ):
        self.key = key

    def encrypt( self, raw ):
        raw = pad(raw)
        iv = Random.new().read( AES.block_size )
        cipher = AES.new( self.key, AES.MODE_CBC, iv )
        return base64.b64encode( iv + cipher.encrypt( raw ) ) 

    def decrypt( self, enc ):
        enc = base64.b64decode(enc)
        iv = enc[:16]
        cipher = AES.new(self.key, AES.MODE_CBC, iv )
        return unpad(cipher.decrypt( enc[16:] )) 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2017-06-20T20:17:24.643

让我解决你关于“模式”的问题。AES256 是一种**分组密码**。它将一个 32 字节的**密钥**和一个 16 字节的字符串作为输入，称为**块**并输出一个块。**我们在一种操作模式下**使用 AES进行加密。上述解决方案建议使用 CBC，这是一个示例。另一个称为 CTR，它更易于使用：

```
from Crypto.Cipher import AES
from Crypto.Util import Counter
from Crypto import Random

# AES supports multiple key sizes: 16 (AES128), 24 (AES192), or 32 (AES256).
key_bytes = 32

# Takes as input a 32-byte key and an arbitrary-length plaintext and returns a
# pair (iv, ciphtertext). "iv" stands for initialization vector.
def encrypt(key, plaintext):
    assert len(key) == key_bytes

    # Choose a random, 16-byte IV.
    iv = Random.new().read(AES.block_size)

    # Convert the IV to a Python integer.
    iv_int = int(binascii.hexlify(iv), 16) 

    # Create a new Counter object with IV = iv_int.
    ctr = Counter.new(AES.block_size * 8, initial_value=iv_int)

    # Create AES-CTR cipher.
    aes = AES.new(key, AES.MODE_CTR, counter=ctr)

    # Encrypt and return IV and ciphertext.
    ciphertext = aes.encrypt(plaintext)
    return (iv, ciphertext)

# Takes as input a 32-byte key, a 16-byte IV, and a ciphertext, and outputs the
# corresponding plaintext.
def decrypt(key, iv, ciphertext):
    assert len(key) == key_bytes

    # Initialize counter for decryption. iv should be the same as the output of
    # encrypt().
    iv_int = int(iv.encode('hex'), 16) 
    ctr = Counter.new(AES.block_size * 8, initial_value=iv_int)

    # Create AES-CTR cipher.
    aes = AES.new(key, AES.MODE_CTR, counter=ctr)

    # Decrypt and return the plaintext.
    plaintext = aes.decrypt(ciphertext)
    return plaintext

(iv, ciphertext) = encrypt(key, 'hella')
print decrypt(key, iv, ciphertext) 
```

这通常称为 AES-CTR。**我建议谨慎使用 AES-CBC 和 PyCrypto**。原因是它要求您指定**填充方案**，如给出的其他解决方案所示。一般来说，如果你对填充不是**很**小心，**就会有完全破坏加密的[攻击！](https://en.wikipedia.org/wiki/Padding_oracle_attack)**

现在，重要的是要注意密钥必须是**随机的 32 字节字符串**；密码**是**不够的。通常，密钥是这样生成的：

```
# Nominal way to generate a fresh key. This calls the system's random number
# generator (RNG).
key1 = Random.new().read(key_bytes) 
```

密钥也可以**从密码派生**：

```
# It's also possible to derive a key from a password, but it's important that
# the password have high entropy, meaning difficult to predict.
password = "This is a rather weak password."

# For added # security, we add a "salt", which increases the entropy.
#
# In this example, we use the same RNG to produce the salt that we used to
# produce key1.
salt_bytes = 8 
salt = Random.new().read(salt_bytes)

# Stands for "Password-based key derivation function 2"
key2 = PBKDF2(password, salt, key_bytes) 
```

上面的一些解决方案建议使用 SHA256 来派生密钥，但这通常被认为是[不好的加密实践](https://en.wikipedia.org/wiki/Cryptographic_hash_function#Password_verification)。查看[维基百科](https://en.wikipedia.org/wiki/Block_cipher_mode_of_operation)了解更多关于操作模式的信息。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-08-31T12:18:51.293

对于想使用 urlsafe_b64encode 和 urlsafe_b64decode 的人，这里是对我有用的版本（在处理 unicode 问题之后）

```
BS = 16
key = hashlib.md5(settings.SECRET_KEY).hexdigest()[:BS]
pad = lambda s: s + (BS - len(s) % BS) * chr(BS - len(s) % BS)
unpad = lambda s : s[:-ord(s[len(s)-1:])]

class AESCipher:
    def __init__(self, key):
        self.key = key

    def encrypt(self, raw):
        raw = pad(raw)
        iv = Random.new().read(AES.block_size)
        cipher = AES.new(self.key, AES.MODE_CBC, iv)
        return base64.urlsafe_b64encode(iv + cipher.encrypt(raw)) 

    def decrypt(self, enc):
        enc = base64.urlsafe_b64decode(enc.encode('utf-8'))
        iv = enc[:BS]
        cipher = AES.new(self.key, AES.MODE_CBC, iv)
        return unpad(cipher.decrypt(enc[BS:])) 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2019-02-06T14:50:28.487

感谢其他启发但对我不起作用的答案。

在花了几个小时试图弄清楚它是如何工作的之后，我用最新的**PyCryptodomex**库想出了下面的实现（这是另一个故事，我是如何设法在代理后面、在 Windows 上、在 virtualenv 中设置它的……唷）

在你的实现上工作，记得写下填充、编码、加密步骤（反之亦然）。您必须牢记顺序进行打包和拆包。

```
import base64
import hashlib
from Cryptodome.Cipher import AES
from Cryptodome.Random import get_random_bytes

__key__ = hashlib.sha256(b'16-character key').digest()

def encrypt(raw):
    BS = AES.block_size
    pad = lambda s: s + (BS - len(s) % BS) * chr(BS - len(s) % BS)

    raw = base64.b64encode(pad(raw).encode('utf8'))
    iv = get_random_bytes(AES.block_size)
    cipher = AES.new(key= __key__, mode= AES.MODE_CFB,iv= iv)
    return base64.b64encode(iv + cipher.encrypt(raw))

def decrypt(enc):
    unpad = lambda s: s[:-ord(s[-1:])]

    enc = base64.b64decode(enc)
    iv = enc[:AES.block_size]
    cipher = AES.new(__key__, AES.MODE_CFB, iv)
    return unpad(base64.b64decode(cipher.decrypt(enc[AES.block_size:])).decode('utf8')) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-09-21T06:08:30.607

您可以使用SHA-1 或 SHA-256 之类的加密哈希函数（*不是*Python 的内置函数）从任意密码中获取密码。`hash`Python 在其标准库中包含对两者的支持：

```
import hashlib

hashlib.sha1("this is my awesome password").digest() # => a 20 byte string
hashlib.sha256("another awesome password").digest() # => a 32 byte string 
```

您可以仅使用`[:16]`or截断加密哈希值，`[:24]`并且它将在您指定的长度内保持其安全性。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2017-05-06T23:22:02.183

对此的另一种看法（主要来自上述解决方案）但是

*   使用 null 进行填充
*   不使用 lambda（从来不是粉丝）
*   用 python 2.7 和 3.6.5 测试

    ```
    #!/usr/bin/python2.7
    # you'll have to adjust for your setup, e.g., #!/usr/bin/python3

    import base64, re
    from Crypto.Cipher import AES
    from Crypto import Random
    from django.conf import settings

    class AESCipher:
        """
          Usage:
          aes = AESCipher( settings.SECRET_KEY[:16], 32)
          encryp_msg = aes.encrypt( 'ppppppppppppppppppppppppppppppppppppppppppppppppppppppp' )
          msg = aes.decrypt( encryp_msg )
          print("'{}'".format(msg))
        """
        def __init__(self, key, blk_sz):
            self.key = key
            self.blk_sz = blk_sz

        def encrypt( self, raw ):
            if raw is None or len(raw) == 0:
                raise NameError("No value given to encrypt")
            raw = raw + '\0' * (self.blk_sz - len(raw) % self.blk_sz)
            raw = raw.encode('utf-8')
            iv = Random.new().read( AES.block_size )
            cipher = AES.new( self.key.encode('utf-8'), AES.MODE_CBC, iv )
            return base64.b64encode( iv + cipher.encrypt( raw ) ).decode('utf-8')

        def decrypt( self, enc ):
            if enc is None or len(enc) == 0:
                raise NameError("No value given to decrypt")
            enc = base64.b64decode(enc)
            iv = enc[:16]
            cipher = AES.new(self.key.encode('utf-8'), AES.MODE_CBC, iv )
            return re.sub(b'\x00*$', b'', cipher.decrypt( enc[16:])).decode('utf-8') 
    ```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2013-05-16T18:18:39.770

为了其他人的利益，这是我通过结合@Cyril 和@Marcus 的答案得到的解密实现。这假设这是通过 HTTP 请求传入的，其中引用了 encryptedText 并进行了 base64 编码。

```
import base64
import urllib2
from Crypto.Cipher import AES

def decrypt(quotedEncodedEncrypted):
    key = 'SecretKey'

    encodedEncrypted = urllib2.unquote(quotedEncodedEncrypted)

    cipher = AES.new(key)
    decrypted = cipher.decrypt(base64.b64decode(encodedEncrypted))[:16]

    for i in range(1, len(base64.b64decode(encodedEncrypted))/16):
        cipher = AES.new(key, AES.MODE_CBC, base64.b64decode(encodedEncrypted)[(i-1)*16:i*16])
        decrypted += cipher.decrypt(base64.b64decode(encodedEncrypted)[i*16:])[:16]

    return decrypted.strip() 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-07-25T07:26:53.720

我已经使用了这两个库`Crypto`，`PyCryptodomex`它的速度非常快......

```
import base64
import hashlib
from Cryptodome.Cipher import AES as domeAES
from Cryptodome.Random import get_random_bytes
from Crypto import Random
from Crypto.Cipher import AES as cryptoAES

BLOCK_SIZE = AES.block_size

key = "my_secret_key".encode()
__key__ = hashlib.sha256(key).digest()
print(__key__)

def encrypt(raw):
    BS = cryptoAES.block_size
    pad = lambda s: s + (BS - len(s) % BS) * chr(BS - len(s) % BS)
    raw = base64.b64encode(pad(raw).encode('utf8'))
    iv = get_random_bytes(cryptoAES.block_size)
    cipher = cryptoAES.new(key= __key__, mode= cryptoAES.MODE_CFB,iv= iv)
    a= base64.b64encode(iv + cipher.encrypt(raw))
    IV = Random.new().read(BLOCK_SIZE)
    aes = domeAES.new(__key__, domeAES.MODE_CFB, IV)
    b = base64.b64encode(IV + aes.encrypt(a))
    return b

def decrypt(enc):
    passphrase = __key__
    encrypted = base64.b64decode(enc)
    IV = encrypted[:BLOCK_SIZE]
    aes = domeAES.new(passphrase, domeAES.MODE_CFB, IV)
    enc = aes.decrypt(encrypted[BLOCK_SIZE:])
    unpad = lambda s: s[:-ord(s[-1:])]
    enc = base64.b64decode(enc)
    iv = enc[:cryptoAES.block_size]
    cipher = cryptoAES.new(__key__, cryptoAES.MODE_CFB, iv)
    b=  unpad(base64.b64decode(cipher.decrypt(enc[cryptoAES.block_size:])).decode('utf8'))
    return b

encrypted_data =encrypt("Hi Steven!!!!!")
print(encrypted_data)
print("=======")
decrypted_data = decrypt(encrypted_data)
print(decrypted_data) 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-11-19T00:11:56.963

有点晚了，但我认为这将非常有帮助。没有人提到像 PKCS#7 填充这样的使用方案。您可以使用它代替之前的函数来填充（何时加密）和 unpad（何时进行解密）。我将在下面提供完整的源代码。

```
import base64
import hashlib
from Crypto import Random
from Crypto.Cipher import AES
import pkcs7
class Encryption:

    def __init__(self):
        pass

    def Encrypt(self, PlainText, SecurePassword):
        pw_encode = SecurePassword.encode('utf-8')
        text_encode = PlainText.encode('utf-8')

        key = hashlib.sha256(pw_encode).digest()
        iv = Random.new().read(AES.block_size)

        cipher = AES.new(key, AES.MODE_CBC, iv)
        pad_text = pkcs7.encode(text_encode)
        msg = iv + cipher.encrypt(pad_text)

        EncodeMsg = base64.b64encode(msg)
        return EncodeMsg

    def Decrypt(self, Encrypted, SecurePassword):
        decodbase64 = base64.b64decode(Encrypted.decode("utf-8"))
        pw_encode = SecurePassword.decode('utf-8')

        iv = decodbase64[:AES.block_size]
        key = hashlib.sha256(pw_encode).digest()

        cipher = AES.new(key, AES.MODE_CBC, iv)
        msg = cipher.decrypt(decodbase64[AES.block_size:])
        pad_text = pkcs7.decode(msg)

        decryptedString = pad_text.decode('utf-8')
        return decryptedString 
```

```
import StringIO
import binascii

def decode(text, k=16):
    nl = len(text)
    val = int(binascii.hexlify(text[-1]), 16)
    if val > k:
        raise ValueError('Input is not padded or padding is corrupt')

    l = nl - val
    return text[:l]

def encode(text, k=16):
    l = len(text)
    output = StringIO.StringIO()
    val = k - (l % k)
    for _ in xrange(val):
        output.write('%02x' % val)
    return text + binascii.unhexlify(output.getvalue()) 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-07-17T02:22:45.020

> [https://stackoverflow.com/a/21928790/11402877](https://stackoverflow.com/a/21928790/11402877)

兼容的 utf-8 编码

```
def _pad(self, s):
    s = s.encode()
    res = s + (self.bs - len(s) % self.bs) * chr(self.bs - len(s) % self.bs).encode()
    return res 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-08-11T13:24:12.173

```
from Crypto import Random
from Crypto.Cipher import AES
import base64

BLOCK_SIZE=16
def trans(key):
     return md5.new(key).digest()

def encrypt(message, passphrase):
    passphrase = trans(passphrase)
    IV = Random.new().read(BLOCK_SIZE)
    aes = AES.new(passphrase, AES.MODE_CFB, IV)
    return base64.b64encode(IV + aes.encrypt(message))

def decrypt(encrypted, passphrase):
    passphrase = trans(passphrase)
    encrypted = base64.b64decode(encrypted)
    IV = encrypted[:BLOCK_SIZE]
    aes = AES.new(passphrase, AES.MODE_CFB, IV)
    return aes.decrypt(encrypted[BLOCK_SIZE:]) 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-10-18T15:28:53.680

## **使用带有utf8mb4的AES256对拉丁字符和特殊字符（中文）进行加密和解密：**

对于那些需要拉丁文`encrypt`和`decrypt`特殊值（例如中文）的人，这里是对@MIkee 代码的修改来完成此任务。

** 记住 UTF8 本身并不能处理这种类型的编码 **

```
import base64, re
from Crypto.Cipher import AES
from Crypto import Random
from django.conf import settings

import codecs

# make utf8mb4 recognizable.
codecs.register(lambda name: codecs.lookup('utf8') if name == 'utf8mb4' else None)

class AESCipher:

    def __init__(self, key, blk_sz):
        self.key = key
        self.blk_sz = blk_sz

    def encrypt( self, raw ):
        # raw is the main value
        if raw is None or len(raw) == 0:
            raise NameError("No value given to encrypt")
        raw = raw + '\0' * (self.blk_sz - len(raw) % self.blk_sz)
        raw = raw.encode('utf8mb4')
        # Initialization vector to avoid same encrypt for same strings.
        iv = Random.new().read( AES.block_size )
        cipher = AES.new( self.key.encode('utf8mb4'), AES.MODE_CFB, iv )
        return base64.b64encode( iv + cipher.encrypt( raw ) ).decode('utf8mb4')

    def decrypt( self, enc ):
        # enc is the encrypted value
        if enc is None or len(enc) == 0:
            raise NameError("No value given to decrypt")
        enc = base64.b64decode(enc)
        iv = enc[:16]
        # AES.MODE_CFB that allows bigger length or latin values
        cipher = AES.new(self.key.encode('utf8mb4'), AES.MODE_CFB, iv )
        return re.sub(b'\x00*$', b'', cipher.decrypt( enc[16:])).decode('utf8mb4') 
```

用法：

```
>>> from django.conf import settings
>>> from aesencryption import AESCipher
>>> 
>>> aes = AESCipher(settings.SECRET_KEY[:16], 32)
>>> 
>>> value = aes.encrypt('漢字')
>>> 
>>> value
'hnuRwBjwAHDp5X0DmMF3lWzbjR0r81WlW9MRrWukgQwTL0ZI88oQaWvMfBM+W87w9JtSTw=='
>>> dec_value = aes.decrypt(value)
>>> dec_value
'漢字'
>>> 
```

`ã, á, à, â, ã, ç`对于诸如etc之类的拉丁字母也是如此。

**注意点**

请记住，如果要将拉丁值存储到数据库中，则需要将其设置为允许此类数据。因此，如果您的数据库设置为`utf-8`不接受此类数据。你也需要在那里改变。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-11-05T00:09:56.680

您可以使用新[的 django-mirage-field](https://github.com/luojilab/django-mirage-field)包

# iphone - 存档类型更改为通用 Xcode 存档并且不制作 ipa

> ID：12524997
> 
> 赞同：8
> 
> 时间：2012-09-21T05:54:55.513
> 
> 标签：iphone, ios5, archive, xcode4.4, ad-hoc-distribution

参考这个[Xcode 已经开始制作档案，而不是应用程序。我该如何改回来？](https://stackoverflow.com/questions/9126787/xcode-has-started-making-archives-not-apps-how-do-i-change-it-back)问答 我必须更改我的“跳过安装”标志，但我找不到这个标志。我正在使用 xcode 4.4.1。请帮助我如何解决它？![在此处输入图像描述](../Images/fc0dac7085eda73b76ae6989c5bba5e5.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-18T07:50:28.123

转到项目 - 构建设置。在搜索字段中输入“跳过”。它将向您显示部署中的跳过安装选项。