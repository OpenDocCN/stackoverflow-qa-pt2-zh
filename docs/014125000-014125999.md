# StackOverflow 问答 14125000-14125999

# .net - Winforms 应用程序中的最大并发线程数

> ID：14125000
> 
> 赞同：0
> 
> 时间：2013-01-02T15:54:29.413
> 
> 标签：.net, winforms

我正在开发一个 Winforms 应用程序 (.NET 4.0)，我需要在 16 个不同的线程中同时显示 16 个图表，才能获得响应式 UI。我打算直接使用 System.Threading.Thread 类。

每个图表至少需要 5 个数据密集型 SQL 查询（将来会优化，但不是现在）。

考虑到这一切——我应该关心同时线程的数量吗？我应该实施限制吗？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:59:14.650

UI 有它自己的线程。**这意味着您不能让不同的线程更新 UI**（请注意，即使对 WPF gui 也是如此）。您可以更好地使用[BackgroundWorker](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)在后台线程中调用数据库，并在完成后更新 UI。这是首选架构。

您的应用程序将表现为加载页面的浏览器，然后优雅地异步加载所有图像，您将看到图表以动态方式显示，这通常会使用户感觉应用程序更快。

让 16 名后台工作人员只是挂在数据库的响应中，即使不是最好的，也是完全可以接受的。使用后台工作者的好处是线程编组是自动完成的，只需将图表绑定逻辑放在[RunWorkerCompleted](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.runworkercompleted.aspx)事件处理程序中，将数据检索逻辑放在[DoWork](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.dowork.aspx)事件处理程序中。

下面是一个片段：

```
BackgroundWorker bgw = new BackgroundWorker();
bgw.DoWork += (sender, e) => { //data retrieving logic here }
bgw.RunWorkerCompleted+= (sender, e) => { //bind results to chart here if no canceled nor errors }
bgw.RunWorkerAsync();//starts async execution 
```

通过这种方式，您将实现异步 UI 模式，这对于任何响应式应用程序来说都是*必须的。*

**另外** 为了完整起见，由于“挂起代理”是数据库，您甚至可以考虑[异步 ADO.NET 调用](http://msdn.microsoft.com/en-us/library/zw97wx20%28v=vs.90%29.aspx)。这可能是您在资源使用方面可以做的最好的事情，因为这将在后台使用 [I/O 完成端口机制](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365198%28v=vs.85%29.aspx)来最小化线程和上下文切换的数量，但在您的场景中它可能有点过度设计。您可以[在此处](http://msdn.microsoft.com/en-us/library/ms379553%28VS.80%29.aspx)阅读有关 ado.net 和 I/O 完成端口的更多信息，请查看“*真正的异步 I/O* ”段落。

# javascript - 骨干网 + RESTful API

> ID：14125002
> 
> 赞同：3
> 
> 时间：2013-01-02T15:54:38.523
> 
> 标签：javascript, rest, backbone.js

我有一个无法更改的现有 RESTful API。现在，我正在开发网络客户端。

我想使用像backbone.js 这样的库（第一次）。

这是现有API的设计

1.) `GET /persons`- 返回整个人物集合

2.) `GET /persons?p1=a&p2=b`(eg) - 返回与查询参数指定的条件匹配的完整集合的子集

3.) `GET /persons/[id]`- 通过 id 返回一个人

4.) `POST /persons`- 修改集合（例如创建一个新人）并返回具体结果

## 问题：

*   #1（和#2）的问题：输出格式是这样的：`{size: 1, persons: [{'id': 1, 'firstname': 'foo', 'lastname': 'bar'}]}`

*   #2 的问题：如何将这样的请求映射到backbone.js？

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:26:58.360

对于＃1，您将覆盖`parse`. 例如，在您的 Persons 集合中，您将放置以下方法：

```
parse: function(response) {
    return response.persons;
} 
```

您基本上是在指示集合中可以找到模型的哪些属性（在我们的例子中为“人员”）。

对于＃2，（如前所述）看起来您需要更新`sync`. Hunter 在他的回复中提供了一个很好的链接，应该很有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T16:58:16.263

对于不遵循骨干网确切结构的 API，您通常最终会覆盖骨干网的某些`fetch` `parse`组合`sync`。Backbone 的设计使得覆盖这些东西很容易，因为这是一种常见的需求：

*   [http://japhr.blogspot.com/2011/10/overriding-url-and-fetch-in-backbonejs.html](http://japhr.blogspot.com/2011/10/overriding-url-and-fetch-in-backbonejs.html)
*   [覆盖主干的解析函数](https://stackoverflow.com/questions/11938500/overriding-backbones-parse-function)
*   [如何覆盖 Backbone.sync？](https://stackoverflow.com/questions/5096549/how-to-override-backbone-sync)

# c# - 通过事件线程更新主屏幕

> ID：14125004
> 
> 赞同：1
> 
> 时间：2013-01-02T15:54:41.427
> 
> 标签：c#, multithreading, events

我正在尝试获取一个线程来更新 GUI，并建议我使用一个事件。

具体来说，应用程序在下面的方法 UpdateResult() 中给了我一个跨线程错误。我假设我引发的事件是从线程中引发的，因此问题是它试图更新在主线程上运行的 GUI。

我做错了什么？

谢谢达摩

**C# 代码**

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading;
public delegate void UpdateScreenEventHandler();
namespace EventHandler
{
    public partial class Form1 : Form
    {

        public static event UpdateScreenEventHandler _UpdateScreen;

        public Form1()
        {
            InitializeComponent();
        }

        public void Form1_Load(object sender, EventArgs e)
        {

            // Add event handlers to Show event.
            _UpdateScreen += new UpdateScreenEventHandler(UpdateResult);

        }

        private void button1_Click(object sender, EventArgs e)
        {
            // Thread the status check
            Thread trd = new Thread(() => Threadmethod());
            trd.IsBackground = true;
            trd.Start();

        }

        private void Threadmethod()
        {
            // Invoke the event.
            _UpdateScreen.Invoke();
        }

        private void UpdateResult()
        {
            textBox1.Text = "This Is the result";
            MessageBox.Show(textBox1.Text);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T15:57:31.577

该事件是从后台线程触发的，因此如果您想从事件处理程序访问 UI 元素，则需要编组到 UI 线程。

```
private void UpdateResult()
{
    textBox1.Invoke(new Action( ()=>
    {
        textBox1.Text = "This Is the result";
        MessageBox.Show(textBox1.Text);
    });
} 
```

另一种选择是在 UI 线程中触发事件，以便事件处理程序不需要这样做。

```
private void Threadmethod()
{
    Invoke(new Action(() =>
    {
        // Invoke the event.
        _UpdateScreen.Invoke();
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T15:58:40.047

您在同一线程上设置文本框。从您的活动中调用它。

```
 private void SetText(string text)
    {
        // InvokeRequired required compares the thread ID of the
        // calling thread to the thread ID of the creating thread.
        // If these threads are different, it returns true.
        if (this.textBox1.InvokeRequired)
        {   
            SetTextCallback d = new SetTextCallback(SetText);
            this.Invoke(d, new object[] { text });
        }
        else
        {
            this.textBox1.Text = text;
        }
    } 
```

这是根据以下 MSDN 链接：

[http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/ms171728%28v=vs.80%29.aspx)

# batch-file - 无论是否使用引号，都无法处理超出第一个空格的文件路径/名称

> ID：14125006
> 
> 赞同：0
> 
> 时间：2013-01-02T15:54:50.287
> 
> 标签：batch-file

如果相关文件或文件夹路径/名称不包含空格，则我尝试按保存到文本文件的名称和路径条目删除文件，批处理执行得很好，但是如果文件名包含空格，则它拒绝读取第一个空格之外的内容。这与引号无关。

有人可以帮忙吗？

```
for /f %%1 in (C:\BLACKLIST.txt) do rd /s /q %%1 
```

也不起作用的是：

```
for /f %%1 in (C:\BLACKLIST.txt) do rd /s /q "%%1" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:19:59.233

您需要添加令牌以使其读取整行

```
for /f "tokens=*" %%1 in (C:\BLACKLIST.txt) do rd /s /q "%%1" 
```

循环读取行并根据`for /f`某些分隔符或分隔符将它们拆分为标记。默认情况下，分隔符为`<space>`and `<tab>`，如果未指定，则仅读取第一个标记。该`tokens`选项允许您覆盖默认值并指定您想要的令牌。在您的情况下，您想要所有这些，这就是您需要放置的原因`*`（一个`*`代表“所有令牌”）。

或者，您可以通过重置`delims`选项来指定“无分隔符”，如下所示：

```
for /f "delims=" %%1 in (C:\BLACKLIST.txt) do rd /s /q "%%1" 
```

# gcc - 编译期间gcc字符串表溢出错误

> ID：14125007
> 
> 赞同：8
> 
> 时间：2013-01-02T15:54:51.747
> 
> 标签：gcc, g++

当我尝试从**boost spirit Qi compiler_tutorial**构建一个大型复杂示例（在模板实例化方面修改为更复杂）时，我收到以下错误消息：

```
 debug\expression.o:-1: error: section .debug_frame$_ZNK5boost5proto3if_INS0_6detail7has_tagINS0_6tagns_3tag7greaterEEENS0_12reverse_foldINS0_1_ENS0_6_stateENS2_18reverse_fold_tree_IS6_NS_6spirit6detail18make_binary_helperINSC_13meta_compilerINSC_2qi6domainEE12meta_grammarEEEEEEESK_E4implIRNSG_4ruleINSC_3lex7lexertl8iteratorINSR_7functorINSR_14position_tokenIN9__gnu_cxx17__normal_iteratorIPKcSsEENS_3mpl6vectorISsN4mpl_2naES13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_EENS12_5bool_ILb0EEEyEENSR_6detail4dataESZ_NS15_ILb1EEES16_EEEEFSt4listIN7client3ast10expressionIdEESaIS1H_EEvENSC_11unused_typeES1L_S1L_EENS_6fusion4consINSG_12literal_charINSC_13char_encoding8standardELb1ELb0EEENS1O_4nil_EEERS1L_EclES1N_RKS1V_S1W_: string table overflow at offset 10000433 
```

命令行：

```
c:/mingw64/bin/../libexec/gcc/x86_64-w64-mingw32/4.7.2/cc1plus.exe -quiet -v -I c:/libs/boost/include -I ../src/compiler -I c:/libs/boost/include -I . -I c:/libs/Qt-static/mkspecs/win32-g++-x64-4.7.2-corei7-avx-corei7-avx -iprefix c:\mingw64\bin\../lib/gcc/x86_64-w64-mingw32/4.7.2/ -D_REENTRANT -U_REENTRANT -D BOOST_THREAD_POSIX -D BOOST_THREAD_USE_LIB -D UNICODE -D QT_LARGEFILE_SUPPORT -D _DEBUG=1 -D DEBUG=1 -D BOOST_SPIRIT_QI_DEBUG=1 -D BOOST_SPIRIT_NO_PREDEFINED_TERMINALS=1 ../src/compiler/expression.cpp -quiet -dumpbase expression.cpp -m64 -march=corei7-avx -mtune=corei7-avx -mtls-dialect=gnu2 -auxbase-strip debug/expression.o -g -O0 -Wall -Wextra -std=gnu++11 -version -fsignaling-nans -fno-math-errno -frtti -fexceptions -o - | 
```

平台： mingw-builds (x64-4.7.2-release-posix-sjlj-rev5.7z) 用于 x64 主机和目标 ( `-m64`) (符合 gcc 4.7.2) 在 x64 Windows 7 HB 上，具有 8GB 物理内存。

看起来是因为内存不足。

我应该怎么做才能避免这个问题？我确信这里没有递归模板。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-04-06T21:07:07.497

我发现这个问题的一个答案并不令人满意，但经过进一步研究，确实看起来运行具有更高优化级别的 gcc 是解决这个问题的方法。我想我会分享我学到的东西。

此问题特定于以 PE/COFF 格式编写二进制文件，这是 Windows 使用的。寻找 binutils 的来源，我[在 bfd 的 coff 后端代码中找到了这个代码片段/注释](https://sourceware.org/git/?p=binutils.git;a=blob;f=bfd/coffcode.h;hb=a0a1bb07cb2c03b7d34f12e734c6f363ddb7c7b2#l3722 "binutils 中的 COFF 处理")：

```
/* An inherent limitation of the /nnnnnnn notation used to indicate
the offset of the long name in the string table is that we
cannot address entries beyone the ten million byte boundary.  */
if (string_size >= 10000000)
{
  bfd_set_error (bfd_error_file_too_big);
  (*_bfd_error_handler)
    (_("%B: section %s: string table overflow at offset %ld"),
    abfd, current->name, string_size);
  return FALSE;
} 
```

二进制中的字符串表看起来在 PE/COFF 中最多可以有 1000 万字节。我相信唯一限制它的是节表条目的格式只为节名指定 8 个字节。如果一个名字比那个长，它可以在字符串表中指定一个偏移量。该数字必须由 UTF-8 编码字符串中的 ASCII 表示，并以正斜杠开头。这只给你七个以 10 为底的数字，因此限制为 10,000,000。我在 Microsoft 的 PE/COFF 规范修订版 8.1 的第 13 节中发现了这一点。

你不能真正改变二进制格式，所以我知道的唯一解决方法是让 gcc 制作一个更小的字符串表。-O2 帮了我大忙。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-30T10:30:10.637

我遇到了类似的问题并找到了解决方案。我使用了很多来自 Boost.Spirit2 解析器的 boost 模板类。

我在 openSuse 12.2 (gcc 4.7.2) 上使用 MingW64 交叉编译器，MingW32 编译相同的文件没有问题，无论是在发布模式下还是在调试模式下。

命令：

> /usr/bin/x86_64-w64-mingw32-g++ -c -fpermissive -fexceptions -Wall -Wextra -Wno-long-long -Wno-unknown-pragmas -mthreads -Wall -frtti -finline-functions -o file.o 文件.cpp

输出：

> 部分 。pdata$_ZN5boost6fusion6detail10linear_anyINS0_13cons_iteratorIKNS0_4consINS_6spirit2qi6kleeneINS6_10char_classINS5_3tag9char_codeINS9_5spaceENS5_13char_encoding8standardEEEEEEENS4_INS6_11alternativeINS4_INS6_6actionINSI_INSI_INS6_8sequenceINS4_INSI_INS6_14literal_stringIRA11_KcLb1EEENS_7phoenix5actorINSP_9compositeINSP_6detail13function_evalILi2EEENS0_6vectorINSP_5valueINSP_3stl9push_backEEENSP_9referenceISsEENSW_IcEENS0_5void_ES13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_EEEEEEEENS4_INS6_16lexeme_directiveINS7_INSI_INS6_10differenceINS8_INSA_INS9_5char_ESD_EEEENS6_10eol_parserEEENSQ_INSR_ISU_NSV_ISZ_S11_NS5_8argumentILi0EEES13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_Ssos-nightly@suse-x86-64:~/mnt/joseph/suse__n>build__mingw64__inext/sdi_SF_EEEENS4_ISG_NS0_3nilEEEEEEEEEEENS4_INS6_4plusINSI_INS6_9referenceIKNS6_4ruleIN9__gnu_cxx17__normal_iteratorIPSL_SsEEFN7dynardo9structure11SimplexDataEvENS_5proto7exprns_4exprINS2A_6tagns_3tag8terminalENS2A_7argsns_4termINSA_INS9_5blankESD_EEEELl0EEENS5_11unused_typeES2M_EEEENSQ_INSR_ISU_NSV_INSW_INSS_19member_function_ptrILi1EvM11My_PushbackINS27_20SimplexDataContainerEEFvRKS28_EEEEENSW_IPS2T_EES1G_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_EEEEEEEEEES1T_EEEEEEEEEEEENSQ_INSR_ISU_NSV_INSW_INSX_6insertEEENS10_ISt3mapISsS2S_St4lessISsESaISt4pairIKSsS2S_EEEEENS10_IS3I_ISsS2S_EEES13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_EEEEEEEENSQ_INSR_INST_ILi1EEENSV_INSW_INSX_5clearEEES11_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_EEEEEEEENSQ_INSR_IS3U_NSV_IS3W_NS10_IS2S_EES13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_S13_EEEEEEEENS4_INSI_INSI_INSI_INSJ_INS4_INSK_IRA9_SL_Lb1EEENS4_IS1S_NS4_ISG_S37_EEEEEEEES3S_EES3Z_EES44_EENS4_INSJ_IS1V_EES1T_EEEEEEEES1T_EEEEEENS3_IKS1T_EENS6_6detail13fail_functionIS25_KS2M_NS8_IS2J_EEEEEEbRKT_RKT0_RT1_N4mpl_5bool_ILb0EEE: string table overflow at offset 10002537 /tmp/ccMd36nu.s: Assembler messages:/tmp/ccMd36nu.s：致命错误：无法关闭调试/osl_lsdyna_k_parser.o：文件太大

似乎缺少优化选项是问题所在。添加 -O1 或 -O2

> /usr/bin/x86_64-w64-mingw32-g++ -c -fpermissive -fexceptions -Wall -Wextra -Wno-long-long -Wno-unknown-pragmas -mthreads -Wall -frtti -O1 -g -o file.o 文件.cpp

为我解决了这个问题，甚至允许调试选项（-g）！

# vb.net - BeginInvoke 内存泄漏？

> ID：14125008
> 
> 赞同：2
> 
> 时间：2013-01-02T15:54:56.760
> 
> 标签：vb.net, memory-leaks, delegates

我正在对线程应用程序的一些奇怪行为进行故障排除，并且偶然发现了一些使用`BeginInvoke(Deligate)`调用来启动异步任务的委托函数。我的研究表明，在`BeginInvoke`不配对的情况下使用`EndInvoke`有可能导致内存泄漏，尤其是在抛出异常的情况下，我认为这里就是这种情况。

我得到的代码调用了一个委托，并有一个回调函数，它调用了一个新的委托本身。我最好奇的是回调是如何执行的。是否有必要在最后一行发出新的代表？这个评论对我来说似乎没有一点意义。此外，回调的委托调用永远不会发出`EndInvoke`导致泄漏的调用，是否有更简单的方法来清理它然后创建回调方法？

另一个虽然不太重要的问题是函数的名称为 Synchronized。据我所知，在方法调用中没有强制同步。VB.NET 是自动设置同步，还是最后一个开发人员只是为了听起来很花哨？

初始调用：

```
mDelegateUpdate3.BeginInvoke(mCallbackUpdate3, mDelegateUpdate3) 
```

回调方法：

```
Public Sub OnUpdateSchedule3Complete(ByVal ar As IAsyncResult)
        ' Clean up original thread
        Dim del As OPCConnectionWorkerDelegate
        del = CType(ar.AsyncState, OPCConnectionWorkerDelegate)
        del.EndInvoke(ar)

        'We are on the wrong thread so we need to switch back to the UI thread
        Dim ar1 As IAsyncResult
        ar1 = Me.BeginInvoke(New SynchronizedScheduleCompletedDelegate(AddressOf Me.SynchronizedScheduleCompleted))
End Sub 
```

SynchronizedScheduleCompleted 方法：

```
Private Sub SynchronizedScheduleCompleted()
    mAttemptingUpdate = False
    mOPCConnectionWorker.clearInvolked()
    SetInProgress(False)
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T15:57:18.233

正确的; 不调用`EndInvoke()`会造成内存泄漏。

如果您只想“触发并忘记”一个异步操作而不处理其结果，您应该简单地调用`ThreadPool.QueueUserWorkItem()`，这不会导致内存泄漏。

如果您确实关心结果，则应该使用*更*容易使用的`Task`类。

 *再也没有理由打电话了`Delegate.BeginInvoke()`。

而且，委托和方法名称中的单词`Synchronized`是没有意义的。*

# dojo - dojox.Calendar 和 JsonRest：列视图不显示事件

> ID：14125009
> 
> 赞同：0
> 
> 时间：2013-01-02T15:55:01.520
> 
> 标签：dojo

我正在尝试使用 dojox.Calendar 显示从 REST 服务器查询的事件，使用 dojo.store.JsonRest （没有 Observable 存储，因为事件是只读的）。

我将初始“dateInterval”模式设置为“月”，以便显示“矩阵视图”并拦截“timeIntervalChange”事件以更改日历存储使用的“查询”，以便在用户在几个月之间移动时按需获取事件。

Everythig 运行良好，但是如果我尝试从“矩阵视图”切换到“列视图”（通过日历导航按钮），即使我看到（从萤火虫控制台）“timeIntervalChange”事件触发和 REST 存储查询定期提交，也不会显示任何事件到服务器。

这是我页面中的 dojox.Calendar 代码片段：

```
require(["dojo/parser", "dojo/ready", "dojo/_base/xhr", "dojo/date/stamp", "dojo/date/locale", "dijit/Dialog", "dojo/store/JsonRest", "dojox/calendar/Calendar"],
  function(parser, ready, xhr, stamp, locale, Dialog, JsonRest, Calendar) {
    ready(function(){
      var calendarDate = 'the initial ISO date from an MVC model object';
      var query = "";
      var eventStore  = new JsonRest({target: 'the REST service URL'});

      calendar = new Calendar({
                   date: calendarDate,
                   dateInterval: "month",
                   startTimeAttr: "dataOraInizioISO",
                   endTimeAttr: "dataOraFineISO",
                   summaryAttr: "descrizione",
                   decodeDate: function(s){return stamp.fromISOString(s);},
                   encodeDate: function(d){return stamp.toISOString(d);},                   
                   style: "position:relative;width:950px;height:700px",
                   columnViewProps:{minHours:5, maxHours:23, hourSize:40, timeSlotDuration:30},
                   editable: false,
                   selectionMode: "none",
                }, "calendarioIncontri");

      calendar.on("timeIntervalChange", function(e){
          var sStartDate =            
              locale.format(e.startTime,{selector: "date", pattern: "dd/MM/yyyy", fullYear: true});
          var sEndDate =              
              locale.format(e.endTime,{selector: "date", pattern: "dd/MM/yyyy", fullYear: true});

          query = "?" + "dataInizio=" + sStartDate + "&" + "dataFine=" + sEndDate;

          calendar.set('query', query);
          calendar.set('store', eventStore);
      }); 
```

请注意，为了避免对所有事件进行初始批量查询（！），我仅在“timeIntervalChange”事件触发时设置日历“存储”和“查询”属性，并注意，据我测试，我需要设置日历“存储”属性每次都让新事件在矩阵视图刷新时显示。

但我仍然无法让事件出现在列视图上！有什么提示吗？

非常感谢罗伯托

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T13:37:08.063

作为记录（此问题已在 Dojo 邮件列表中得到解答），该用户试图显示 dojox.calendar 不支持的准时事件（当时开始和结束的事件）。如果有人对此功能感兴趣，请在 GitHub 上为项目添加功能愿望：[https ://github.com/damiengarbarino/dojo-calendar](https://github.com/damiengarbarino/dojo-calendar)

# mysql - MySQL：将光标获取到 DATE

> ID：14125010
> 
> 赞同：-1
> 
> 时间：2013-01-02T15:55:02.377
> 
> 标签：mysql, date, stored-procedures, cursor

我定义了以下正确编译的过程。

[http://pastebin.com/pBHFctHq](http://pastebin.com/pBHFctHq)

当我调用该过程时，它返回一个错误：

`ERROR 1292 (22007): Incorrect date value: ''2012-12-30'' for column 'date_part' at row 11`

我认为问题是从光标中获取日期，我将如何解决它？

*代码的小描述：我正在遍历不同的表，并收集表中可能存在的每个分区的信息（每个表都按日期分区）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:27:43.330

我认为您正在将字符串与日期进行比较，这就是您收到错误的原因..
您可以使用它进行比较：

```
 TO_DATE(PARTITION_DESCRIPTION,'YYYY-MM-DD')      // in oracle this will work

           STR_TO_DATE(PARTITION_DESCRIPTION, '%Y-%m-%d')   // in mysql this will work

           convert(varchar(20),PARTITION_DESCRIPTION,104)   // in ms-sql this will work 
```

所以你的代码看起来像这样：

```
 BLOCK2: BEGIN
                            DECLARE loop1_eof INT DEFAULT FALSE;

                            DECLARE cur1 CURSOR FOR SELECT TO_DATE(PARTITION_DESCRIPTION,'YYYY-MM-DD')
                            FROM INFORMATION_SCHEMA.PARTITIONS
                            WHERE TABLE_NAME=tmp_title AND TABLE_SCHEMA='test1';    
                            DECLARE CONTINUE HANDLER FOR NOT FOUND SET loop1_eof = TRUE;

                            OPEN cur1;
                            loop1: LOOP
                                    FETCH cur1 INTO date_part;
                                    SELECT max(id) from `test1`.tmp_title where CurrentDate < date_part;
                                    IF loop1_eof THEN
                                            CLOSE cur1;
                                            LEAVE loop1;
                                    END IF;
                            END LOOP loop1;
                    END BLOCK2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:07:01.343

您在日期值周围有引号：`''2012-12-30''`. 应删除外部单引号内的单引号。这不是有效的`DATE`字段值。

# asp.net-mvc-4 - 客户端证书和 Web API

> ID：14125011
> 
> 赞同：1
> 
> 时间：2013-01-02T15:55:05.390
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我有一个 Web 窗体站点，它将调用我的 IIS 托管 Web API 服务。站点和 Web API 都托管在同一台物理机器上。我们在同一台机器上也有一个 x509 证书。

我希望 Web API 使用此证书来验证请求。所以它只会接受来自“使用”这个证书的客户端的请求。

当我说“使用”时，我想这样做：

1.  使用 Request.ClientCertificates.Add(myCert); 然后在 API 中 - 从请求中检索证书并验证它。

2.或者如果这太繁琐而无法设置（请参阅下面的问题） - 只需在请求标头中签名或加密令牌（单个单词）。然后在 API 服务中验证或解密令牌。

我的问题是 - 对于选项 1。

**我不清楚客户证书。在开发客户端和服务时，是否需要设置 SSL、将证书加载到 IIS 并在 IIS 中调试以测试/调试？或者我可以仅使用 WebDev 测试端到端呼叫吗？**

我问这个的原因 - 当我尝试在 WebDev 中做一个非常简单的示例时，我将证书添加到集合客户端，但是当 Web API 收到请求时，请求中不存在证书。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T22:41:04.780

`I am unclear about client certs. When I am developing the client and the service, do I need to set up SSL, load the certificate into IIS and debug in IIS to test/debug this? Or can I test the end to end call just using WebDev?`

为了使用客户端证书，您必须通过 SSL（相互身份验证）进行连接。因此，这意味着使用服务器证书设置 Web 服务器，然后生成要附加到客户端请求的客户端证书。

IIS 和 IIS express 都支持 SSL，但 Visual Studio 开发 Web 服务器不支持。

# asp.net-mvc-3 - 为什么 Asp.Net MVC 3 在不使用 Url 中的区域名称的情况下从区域中的控制器路由到动作？如何预防？

> ID：14125016
> 
> 赞同：1
> 
> 时间：2013-01-02T15:55:21.643
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, asp.net-mvc-routing

我刚刚意识到 MVC 3 和 4 Routing 可以配置作为区域一部分的操作的路径，而无需命名区域名称，但它们不返回视图。例如看下面的代码：

```
namespace APS.EIMS.UI.Areas.Admin
{
    public class TestController : BaseController
    {

        public ActionResult Index()
        {
            return View();
        }

        public JsonResult GetNames()
        {
            var dc = GetDataContext();
            var result = from m in dc.Db<IMS_Reject>()
                         select new { m.Id };
            return Json(result, JsonRequestBehavior.AllowGet);
        }

    }
} 
```

每当我尝试**//localhost/Test/Index**它找不到索引视图但可以将路径路由到该区域中的操作（它适用于**//localhost/admin/test/index**正如我所期望的那样）。我也为**//localhost/admin/test/getnames**和**//localhost/test/getnames**得到相同的结果。为什么它会这样？它如何找到没有区域名称的动作？我需要在我正在开发的应用程序中防止这种情况发生，这可能吗？（我的意思是仅在地址完整时路由，否则出现 404 错误）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T08:04:50.887

您可能会有一条类似于默认路线的路线：

```
routes.MapRoute(
    "Default", 
    "{controller}/{action}/{id}", 
    new { controller = "Home", action = "Index", id = UrlParameter.Optional } 
); 
```

因此，像**//localhost/Test/Index**这样的 URL将与该默认路由匹配，如您所见，它将正确找到控制器，但找不到视图。默认情况下，控制器工厂将在应用程序中查找具有请求名称的任何控制器类，无论它位于何处。

如果您在默认路由中显式设置命名空间并告诉 MVC 不要在其他命名空间中查找控制器，则可以防止这种情况发生。

这是通过使用 MapRoute 重载来完成的，该重载采用带有命名空间的字符串数组并显式禁用该路由的命名空间回退。（如果不禁用命名空间回退，您只会优先考虑这些命名空间，以防找到多个具有相同名称的控制器）。

这可能看起来像这样（我设置了一个命名空间，但您可以根据需要设置任意数量）：

```
Route route = routes.MapRoute(
    "Default", 
    "{controller}/{action}/{id}",
    new[] { "APS.EIMS.UI.WhateverInNoArea" }
);
route.DataTokens["UseNamespaceFallback"] = false; 
```

# wpf - 滚动条不可见

> ID：14125020
> 
> 赞同：0
> 
> 时间：2013-01-02T15:55:28.863
> 
> 标签：wpf, size, scrollviewer

我有一个 WPF 用户控件。它包含几个用 GridSplitter 分隔的扩展器。在下面的代码中，您可以看到第二个 Expander 包含一个 TabControl Items。其中一个选项卡有一个 DataGrid。我的问题是，当扩展器展开时，并非所有记录都适合 MaxHeight 200（参见下面的代码），滚动不可见。当我将 GridSplitter 移动到 Expander 下方时，它确实会出现，但是如果没有额外的操作，我怎样才能让它显示出来呢？

```
 <Grid >
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="4"></RowDefinition>
        <RowDefinition Height="Auto" MaxHeight="200"></RowDefinition>
        <RowDefinition Height="4"></RowDefinition>
        <RowDefinition Height="*"></RowDefinition>
    </Grid.RowDefinitions>

    <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,3">           
 ...
    </StackPanel>

...
    <Expander Grid.Row="2" IsExpanded="False" Header="Gathered File History">
 ...
    </Expander>

    <GridSplitter Grid.Row="3"
                  Height="4"
                  Background="Gray"
                  HorizontalAlignment="Stretch"></GridSplitter>

    <Expander Grid.Row="4" IsExpanded="True" Header="Data Analysis:  Detail Queries">
        <TabControl x:Name="Items" >
 ...
        </TabControl>
    </Expander>

    <GridSplitter Grid.Row="5"
                  Height="4"
                  Background="Gray"
                  HorizontalAlignment="Stretch"></GridSplitter>

    <Expander Grid.Row="6" IsExpanded="True" Header="Source Detail Records">
 ...
    </Expander>
</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:42:49.130

@DavidShochet您对原因是正确的。发生这种情况是因为网格自动大小受限于其内容大小，因此如果选项卡正在增长，那么网格行也会增长，另一方面，DockPanel 受限于其父大小。这就是为什么您应该将其最大大小设置为 200。

# python - 使用带有加密密码的 py-postgresql

> ID：14125021
> 
> 赞同：0
> 
> 时间：2013-01-02T15:55:28.773
> 
> 标签：python, py-postgresql

在 python 中，我可以使用以下代码连接 PostgreSQL 数据库：

```
db = postgresql.open(“pq://$user:$pass@$host:$port/$dbname”) 
```

但在上面的行中，我必须输入明文密码，然后`py-postgresql`将其散列以与存储在 PostgreSQL 数据库中的散列值进行比较。如果我想使用`MD5`自己散列的密码，这意味着我不希望 py-postgresql 为我做散列。我该怎么做？我试图修改 的源代码`py-postgresql`，但我找不到散列发生在哪里。然后我在设置中找到`py-postgresql`我可以启用 SSL 模式。有人可以给我一个关于如何设置它的简单例子吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:07:12.233

DB-API 的工作方式是提供明文密码。此外，`py-postgresql`不进行密码散列/验证，服务器将其作为连接握手的一部分（请参阅`pg_hba.conf`如何/为什么这样做）。

如果您正在考虑保护密码的传输，请使用`SSL`连接协议而不是明文协议。该`SSL`模式还将加密服务器和客户端之间传输的所有数据。

# java - 多线程新手——最经济高效的多线程方式？

> ID：14125022
> 
> 赞同：2
> 
> 时间：2013-01-02T15:55:31.100
> 
> 标签：java, multithreading, queue, irc

所以我在小型应用程序中使用了多线程。在这里创建一个新线程，在那里创建一个新线程。

我目前正在开发一个监控 IRC 聊天的程序。对于每个有效的命令，它都会创建一个线程，做一些工作，并将结果输出到聊天中。有时应用程序会在短时间内获得 10 个或更多有效命令，并创建 10 个或更多线程。应用程序开始真正变慢。我读过创建和关闭线程对资源的成本效率非常低，所以我想改变我的方法。

我的一个想法是创建一些线程（5 个左右？），这些线程总是使用一种方法运行，我将命令传递给该方法以 FIFO 为基础对它们进行排队。在我实现这个之前，我想看看是否有更好的东西我应该使用。当然，我不想逃跑并重新发明轮子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T16:01:52.917

您可以使用固定大小的[ExecutorService](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html)线程轮询。提交每条消息以作为任务发送，它们将被发送，因为有一个空闲线程。例如

```
ExecutorService es = Executors.newFixedThreadPool(5); 
```

注意：这可能会导致消息乱序发送，因此您的客户端应该能够根据时间戳对消息重新排序。

* * *

顺便说一句：如果一次执行 10 个命令非常慢，则不是线程的创建会导致这种情况。线程很贵，是的，但没那么贵。相反，它很可能是网络延迟或其他一些阻塞操作。如果您的网络连接不佳，您可能需要为每个客户端创建 qa 队列。

# oracle - 我正在尝试为插入前创建触发器，但出现一些错误

> ID：14125023
> 
> 赞同：0
> 
> 时间：2013-01-02T15:55:38.227
> 
> 标签：oracle, oracle10g, oracle11g

```
CREATE OR REPLACE TRIGGER btinsert
BEFORE INSERT ON sample
  BEGIN
    IF (TO_CHAR(SYSDATE,'HH24:MI')
          NOT BETWEEN ('08:00' AND '22:00') THEN 
    RAISE_APPLICATION_ERROR(-20500, 'you may insert'
       ||' into EMPLOYEES table only during '
       ||' normal business hours.'); 
   END IF;
END; 
```

但我收到一个错误：

> 第 8 行出现错误：PLS-00103：遇到符号“END”
> 6\. RAISE_APPLICATION_ERROR(-20500, 'you may insert'
> 7\. ||' 仅在 '
> 8.||' 正常工作时间进入 EMPLOYEES 表。');
> 9\. 结束如果；
> 10.结束；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:02:03.800

你也有一些缺失的括号和多余的括号。

```
CREATE OR REPLACE TRIGGER btinsert
BEFORE INSERT ON sample
  BEGIN
    IF (TO_CHAR(SYSDATE,'HH24:MI') NOT BETWEEN '08:00' AND '22:00') THEN 
    RAISE_APPLICATION_ERROR(-20500, 'you may insert'
       ||' into EMPLOYEES table only during '
       ||' normal business hours.'); 
   END IF;
END;
/ 
```

# pygtk - 检查是否选择了菜单项；pygtk

> ID：14125027
> 
> 赞同：0
> 
> 时间：2013-01-02T15:55:46.793
> 
> 标签：pygtk, ubuntu-unity

也许是一个微不足道的问题，但我在使用 PyGTK 时遇到了一些严重的问题......我正在尝试为与 gtk 统一的应用程序指示器编程，并且`set_sensitive(False)`在我点击后我正在尝试设置我的一些菜单项不敏感（通过）在他们...

这是一个代码片段：

```
class CheckNAS: 
    def __init__(self): 
      self.ind = appindicator.Indicator("debian-doc-menu", "indicator-   messages",appindicator.CATEGORY_APPLICATION_STATUS)
      self.ind.set_status (appindicator.STATUS_ACTIVE)
      self.ind.set_attention_icon("icon1")
      self.ind.set_icon("icon2")

    def menu_setup(self):
      self.quit_item = gtk.MenuItem("QUIT") 
      self.quit_item.connect("activate",self.quit)

      if condition_function()==True:
        self.quit.set_sensitive(False)
      self.quit_item.show()
      self.menu.append(self.quit_item) 
```

然后我`menu_setup`通过`add_timeout(1000,self.condition_function)`. 原则上这很好用，但我希望菜单项在我点击它后立即变得不敏感......抱歉这个菜鸟问题:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T09:57:58.493

那是你要的吗？

```
class CheckNAS: 
    def __init__(self): 
      self.ind = appindicator.Indicator("debian-doc-menu", 
        "indicator-messages",appindicator.CATEGORY_APPLICATION_STATUS)
      self.ind.set_status (appindicator.STATUS_ACTIVE)
      self.ind.set_attention_icon("icon1")
      self.ind.set_icon("icon2")

    def menu_setup(self):
      self.quit_item = gtk.MenuItem("QUIT") 
      self.quit_item.connect("activate",self.sensitive)
      self.quit_item.show()
      self.menu.append(self.quit_item)

    def sensitive(self,widget):
      if widget.get_sensitive():
        widget.set_sensitive(False)
      else:
        widget.set_sensitive(True) 
```

# ajax - KendoUI DropDownList 服务器过滤

> ID：14125031
> 
> 赞同：3
> 
> 时间：2013-01-02T15:55:53.533
> 
> 标签：ajax, kendo-ui

我有带过滤器的数据网格，但除了那些我想添加下拉列表和准备好的数据项进行过滤之外，如何在 kendoway 中做到这一点？如何使用选取的值将类别名称发布到服务器？

```
 $("#category_list").kendoDropDownList({
    dataTextField: "name",
    dataValueField: "id",
    dataSource: {
          transport: {
            read: {
              url: '/api/notes/cats',
              dataType: 'json',
              type: 'GET',
            },
          },
          schema: {
            data: function(reply) {
              return reply.rows
            },
          }
    },
    change: function() {
      val = $("#category_list").val();

    }
  }) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:44:40.993

如果我正确阅读了您的问题，那么您是否希望您的 DropDownList 具有应用于您的网格的预制过滤器？

如果`click`出现 DropDown，您可以获取网格`DataSource`并使用该`.filter()`功能对其应用过滤器。

就像是：

```
$("#category_list").kendoDropDownList({
    change: function() {
        var grid = $("#my_grid").data().kendoGrid;
        var filters = grid.dataSource.filters;

        // modify filters as needed

        grid.dataSource.filter(filters);
    }
 }); 
```

# c++ - 中止（核心转储）C++ Cygwin

> ID：14125037
> 
> 赞同：1
> 
> 时间：2013-01-02T15:56:11.033
> 
> 标签：c++, c++11

当我尝试在 cygwin 中运行我的程序时，我创建的以下函数导致错误“Aborted（core dumped）”。我尝试使用 gdb 并得到：

“程序收到信号 SIGABRT，中止。0x00000000 in ?? ()”

我曾尝试先擦除你，然后再擦除我，但这会产生相同的结果，即在第二次擦除期间崩溃（在这种情况下擦除（我））。

CoalesceOverlaps 函数的基本思想是组合自身重叠的 OVERLAP，因此我对列表进行排序，检查两个相邻的（我和你）元素是否重叠，如果它们重叠，则创建一个新元素，即我和你的组合，删除 me & thee 并将它们替换为组合的新元素。

该函数在逻辑上工作，因为我用一个充满元素的硬编码列表对其进行了测试，并且输出正确合并，但是当我尝试在具有大列表/空列表等的真实程序中实现它时，它失败了。

编辑（来自 cnvr_check_v1.1.exe.stackdump）：

```
Stack trace:
Frame     Function  Args
0028A624  76E31194  (000000E8, 0000EA60, 00000000, 0028A758)
0028A638  76E31148  (000000E8, 0000EA60, 000000A4, 0028A734)
0028A758  610DC559  (00000001, 80038390, 0000001D, 610EBCCC)
0028A848  610D9913  (00000000, 0028A890, 0028A878, 61187784)
0028A8A8  610D9DEE  (0028FF14, 00000001, 0028A8E8, 00000006)
0028A958  610D9F40  (00000158, 00000006, 0053002B, 61187784)
0028A978  610D9F6C  (00000006, 00000006, 0028A9A8, 610B66D1)
0028A9A8  610DA233  (00000000, 0028A9DC, 0028A9C8, 610FD3CA)
End of stack trace 
```

编码：

```
void CoalesceOverlaps(list<OVERLAP>& overlap_regions)
{
cout << "Begining of CoalesceOverlaps function\n";
overlap_regions.sort(OVERLAPStartSortPredicate);
//now coalesce
cout << "Didn't fail during sorting\n";

list<OVERLAP>::iterator me = overlap_regions.begin(),
                           end = overlap_regions.end();

if ( me != end ) // Treat empty list
    for(list<OVERLAP>::iterator thee = ++me; // Post-increment 
        thee != end; 
        me++, thee++)
    {

        cout << "just before thee-> start less than... if\n";
        //cout << me->stop << endl;
        if(thee->start <= me->stop) //hit to coalesce them
        {
            cout << "thee->ID:" << thee->id << endl;
            cout << "thee->start:" << thee->start << endl;
            cout << "made it to the thee->start less than me->stop if\n";
            long temp_start = min(thee->start,me->start),temp_stop = max(thee->stop,me->stop);
            OVERLAP temp_region;
            temp_region.start = temp_start;
            temp_region.stop = temp_stop;
            cout << "just before the first erase\n";
            //overlap_regions.push_front(temp_region);
            list<OVERLAP>::iterator temp_itr = overlap_regions.erase(me);

            cout << "thee->ID:" << thee->id << endl;
            cout << "thee->start:" << thee->start << endl;

            cout << "just before the second erase\n";
            //cout << thee->id;
            overlap_regions.erase(thee);
            cout << "past the erases\n";
            overlap_regions.insert(temp_itr,temp_region);
        }
        cout << "bottom of the for\n";
    }
cout << "End of CoalesceOverlaps function\n";

} 
```

编辑（下面的更正函数）谢谢！：

```
void CoalesceOverlaps(list<OVERLAP>& overlap_regions)
{
overlap_regions.sort(OVERLAPStartSortPredicate);

//iterators for keeping track of the two nodes we are comparing
list<OVERLAP>::iterator me = overlap_regions.begin(),
                        thee = overlap_regions.begin(),
                           end = overlap_regions.end();

if ( me != end ) // Treat empty list
    thee++; //sets it to the second element
    if(thee!=end)   //Treat list with one element
        while(thee != end)  //lets keep comparing until we right the end
        {
            if(thee->start <= me->stop) //hit to coalesce them
            {
                long temp_start = min(thee->start,me->start),temp_stop = max(thee->stop,me->stop);
                OVERLAP temp_region;
                temp_region.start = temp_start;
                temp_region.stop = temp_stop;

                overlap_regions.erase(me);

                list<OVERLAP>::iterator temp_itr = overlap_regions.erase(thee);

                me = overlap_regions.insert(temp_itr,temp_region);
                thee = temp_itr;
            }
            else{
                me++;
                thee++;
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:01:57.330

我相信您的`me`擦除使您的`thee`迭代器无效。

```
for(list<OVERLAP>::iterator thee = ++me; // Post-increment 
```

这保证了它们在你的 for-initializer 中是同一个节点。你的评论说后增量。这*不是*后增量。因此，您可以这样做：

```
list<OVERLAP>::iterator temp_itr = overlap_regions.erase(me); 
```

紧随其后的是：

```
cout << "thee->ID:" << thee->id << endl;
cout << "thee->start:" << thee->start << endl; 
```

...ETC。'我'删除后，`thee`不再有效。访问它以进行读取是未定义的行为，但可能会起作用，因为在引用的数据指针上仍有*一些东西。*但最终通过`erase()`调用表现出来的仍然是未定义的行为。

# java - 比较字符串格式的日期

> ID：14125038
> 
> 赞同：18
> 
> 时间：2013-01-02T15:56:13.453
> 
> 标签：java, date

我得到两个日期作为字符串值，我想检查开始时间是否早于结束时间。我将它们按原样进行比较，而不使用将它们转换为日期`SimpleDateFormat`，如下所示：

```
String startTime = "2013-01-02 14:25:56";
String endTime   = "2013-01-02 14:30:56";

if(endTime.compareTo(startTime) > 0){
    System.out.println("End time is greater than start time");
} 
```

真的有必要将它们转换为日期并进行比较吗？我会错过什么吗？我在做正确的事吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-02T15:59:45.490

如果日期实际上格式正确，您将缺少验证。

*如果*日期的格式与您每次显示的*完全相同，那么这将起作用。*如果有任何可能不同，那么解析和比较结果`Date`对象将至少增加一些检查。

例如，如果两个日期*之一*恰好被格式化为，`2013.01.02 14:30:56`或者它甚至包含一个未格式化的日期，例如，`yesterday`那么您的代码会默默地假设某个顺序（这很可能与实际顺序几乎没有关系）并继续。它*应该*做的是通知用户（或日志文件，...）某些期望没有得到满足。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-02T16:03:20.843

> 真的有必要将它们转换为日期并进行比较吗？

如果您不必包含时区并且可以确保您始终使用这种格式，那么词汇顺序将起作用。

> 我会错过什么吗？

你失去了灵活性

> 我在做正确的事吗？

这取决于观点。我在专门的搜索引擎中使用了类似的东西（仅出于性能原因）。通常我转换为日期并比较这些对象。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-01-02T16:06:47.023

这不是好的做法，而且代码味道不好。

你失去了语义正确和可读的代码。（以及已经说过的可扩展性、时区和其他正确的东西）

你不想比较两个`String`s，你想比较 2 `Date`s - 所以就这样做，比较两个`Date`对象。

如果您创建单元测试并测试您的比较方法，您将永远不会编写一个在每种情况下都正确比较 2 个“字符串”日期的方法，而不会将它们转换为日期。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-02T16:06:10.550

当且仅当满足以下 3 个条件时，您可以在不正确解析的情况下比较日期时间：

1.  日期时间始终采用相同的格式：

    *   相同数量的字段
    *   字段必须是纯数字。（字符串比较：`Jan`> `April`, `Wed`> `Thu`）。
    *   字段的大小是固定的（必要时填充 0）。例如，没有适当的填充将导致`10:01`< `1:01`( `:`ASCII 码大于数字)。
    *   非数字部分（包括分隔符）必须与间距相同。
2.  这些字段按单位的大小降序排列（较大的单位在右侧，较小的单位在左侧）。例如：`YEAR-MONTH-DAY HOUR:MINUTE:SECOND.MILISECOND`

3.  它们必须在同一时区。时区信息（如果存在）应该具有相同的表示形式（`SGT`并且`UTC+8`当前是等效的，但字符串比较不会知道这一点）。请注意，上述***模棱两可***的条件*“相同时区”*足以比较相等，但要比较更大/更小，被比较的两个日期之间的时区必须没有变化。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-02T16:03:38.050

关于什么

```
 "999-01-01 00:00:00"

"10000-01-01 00:00:00" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-02-19T09:12:47.170

不管是不是 Java，你必须先问这些问题：

*   您需要比较时间还是只比较天数？
*   你需要检查TimeZone，还是所有用户都在同一个时区（或者你不在乎）

如果您需要比较日期，那么 'YYYY-MM-dd' 格式的字符串就是完美且高效的：

`'2018-01-23' < '2018-03-21'`. 总是，用任何语言。

有了时间并且没有时区，那么将时间存储在数据库中作为 'YYYY-MM-dd HH:mm:ss' 也很好。

使用时区，您必须了解您的平台（代码和数据库），并了解什么是 UTC（祝您好运！）。

![](../Images/3884f5290fc15d8265f5c0f433d9f696.png)

[（在来自http://xkcd.com/1179/](http://xkcd.com/1179/)的 CC BY-NC 2.5 许可下使用。）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-02T16:00:53.757

我建议先将它们转换为日期更安全一些，但只要你确定格式（或时区等）永远不会改变你，那么日期比较和比较字符串的格式应该总是是等价的。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-01-02T16:03:14.633

您的方法很好，因为 yyyy-mm-dd hh:ii:ss 可以作为字符串进行比较并获得正确的结果，其他日期格式将失败

另一种选择是阅读这个stackoverflow问题

[如何比较Java中的日期？](https://stackoverflow.com/questions/2592501/compare-dates-in-java)

你应该简单地解析你的字符串并创建 Date 或 Calendar 对象，这取决于你想要做什么，下面是我觉得有用的东西

[http://www.mkyong.com/java/java-how-to-get-current-date-time-date-and-calender/](http://www.mkyong.com/java/java-how-to-get-current-date-time-date-and-calender/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-01-02T16:03:28.183

是的，最好将字符串转换为日期并进行比较。

1.  它确保它们实际上是有效的日期，所以没有 20-20-2012。
2.  转换完成后，只剩下一个数字比较。
3.  在比较不同格式的日期时，它具有很大的灵活性。
4.  另一种方法是编写代码来解析每个数字并将其与另一个数字进行比较，这同样是工作量。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-02-07T00:50:26.197

我的日期来自基于字符串的来源，并且始终采用 YYYY-MM-DD 格式，没有时区信息或其他复杂情况。因此，在比较一长串日期时，将它们作为字符串进行比较比先将它们转换为日期对象更简单、更有效。

在我在代码中犯了这个错误之前，这从来都不是问题：

```
boolean past = (dateStart.compareTo(now) == -1); 
```

这给出了一些不正确的结果，因为 compareTo 不仅将值返回为 -1、0 或 1。这是简单的修复：

```
boolean past = (dateStart.compareTo(now) < 0); 
```

我在这里包括了这个问题，因为这是我在试图找出我做错了什么时发现的 SO 问题之一。

# vb.net - 多个随机字符到字符串 vb.net

> ID：14125042
> 
> 赞同：0
> 
> 时间：2013-01-02T15:56:33.250
> 
> 标签：vb.net, random

您好，我想获得 2 个不同的随机字符作为字符串。我只能得到 1 个数组，第二个随机字符似乎是从第一个随机字符中得到的。

我究竟做错了什么？这是代码：

```
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    For i = 1 To 10

    Dim chars = "abcdefghijklmnopqrstuvwxyzZ0123456789"
    Dim random = New Random()
    Dim result = New String(Enumerable.Repeat(chars, 3).[Select](Function(s) s(random.[Next](s.Length))).ToArray())

    firstpart = TextBox2.Text
    rm = firstpart & result

    Dim chars = "0123456789"
    Dim random = New Random()
    Dim result = New String(Enumerable.Repeat(chars, 3).[Select](Function(s) s(random.[Next](s.Length))).ToArray())

    nextpart = TextBox3.Text
    rn = nextpart & result 
```

现在我想调用第二个随机字符，但只有数字，任何人都可以帮助或向我解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:26:51.600

`Random`每次迭代循环时，您都在创建一个新对象。在进入循环之前，您需要创建一次。请记住，计算机生成的随机数并不是真正随机的，它们只是*看起来*是随机的。每次生成随机数时，它只是返回基于原始基于时间的种子值的“随机”数序列中的下一个数字。当您创建一个新`Random`对象时，它会使用当前时间为随机算法播种。因此，如果`Random`同时创建两个对象，它们都将生成相同的数字序列。由于您的循环非常快，`Random`因此您正在实例化的所有对象都恰好在同一时间播种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:17:17.033

尽管您的编码需要按照史蒂文在他的回答中提到的那样进行更改，但它实际上似乎可以像您提到的那样工作 - 我对其进行了测试，并得到第一个字符串是字符和数字的混合，而第二个字符串只是数字。这是我根据你的代码写的：

```
 Dim rm As String = ""
    Dim rn As String = ""
    Dim chars As String = "abcdefghijklmnopqrstuvwxyzZ0123456789"
    Dim nums As String = "0123456789"
    Dim random = New Random()
    Dim result as string = ""

    For i = 1 To 10

        result = New String(Enumerable.Repeat(chars, 3).[Select](Function(s) s(random.[Next](s.Length))).ToArray())

        rm = rm & result

        result = New String(Enumerable.Repeat(nums, 3).[Select](Function(s) s(random.[Next](s.Length))).ToArray())

        rn = rn & result

    Next 
```

# sql - 返回 MAX 值的数据（不影响 MAX 的结果）

> ID：14125051
> 
> 赞同：1
> 
> 时间：2013-01-02T15:57:07.857
> 
> 标签：sql, max, ms-access-2010

无论我们是否在特定地点提供服务，我都想退货。层次结构是邮政编码 > 州 > CountryWide

因此，如果您输入 TX 邮政编码，它将首先查看是否有邮政编码条目。如果没有，它将检查 TX 条目。如果仍然没有命中，它将检查全国政策。

为了实现这一点，我有一个 Calc 字段来指示具体程度。邮政编码为 3 级，州 = 2，CW = 1。所以一个简单的 MAX 会让我知道我正在处理什么级别的数据。我对此查询的一个示例是：

```
SELECT Service_Availability.Service_Product, MAX(Service_Availability.Specificity) AS Spec
FROM Service_Availability
WHERE Service_Availability.State = "TX" OR Service_Availability.State = "CW"
GROUP BY Service_Product; 
```

**现在这是我的问题所在。**

我想知道是否可以提供最高级别的服务。但是，我没有正确的方法...

```
SELECT Service_Availability.Service_Product, MAX(Service_Availability.Specificity) AS Spec
FROM Service_Availability
WHERE (Service_Availability.State = "TX" OR Service_Availability.State = "CW") 
AND Service_Availability.Available = TRUE
GROUP BY Service_Product; 
```

这将返回服务可用的最高级别的特异性，而不是如果该服务在最高级别的特异性下可用。

换句话说，假设邮编是 68123（奥马哈，内布拉斯加州）。

我的数据库显示我们确实在内布拉斯加州提供服务，但无论出于何种原因，我们特别不能在奥马哈（68123）提供服务。我希望数据库看到我有 zip 级别的数据，并使用它来确定可用性（FALSE）。

我理解为什么我的代码是错误的方法，但我不确定从哪个方向来。帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T15:58:48.857

您需要将初始查询（几乎）作为子查询进行 INNER JOIN 才能使其正常工作：

```
SELECT Service_Availability.Service_Product, Service_Availability.Specificity 
FROM Service_Availability 
INNER JOIN (
    SELECT Service_Availability.Service_Product, MAX(Service_Availability.Specificity) AS Spec
    FROM Service_Availability
    WHERE (Service_Availability.State = "TX" OR Service_Availability.State = "CW")
    GROUP BY Service_Availability.Service_Product ) max_spec
  ON Service_Availability.Service_Product = max_spec.Service_Product
  AND Service_Availability.Specificity = max_spec.Spec
WHERE Service_Availability.Available = TRUE 
```

# objective-c - 当字符串为 20130331 时 dateFromString 给出错误

> ID：14125054
> 
> 赞同：2
> 
> 时间：2013-01-02T15:57:30.113
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

我有将字符串转换为日期的函数。它工作得很好，但是当我尝试转换 20130331 时，应用程序崩溃了。这里是我的代码

```
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
[dateFormat setDateFormat:@"yyyyMMdd"];
NSDate *date = [dateFormat dateFromString:dateStr];
NSLog(@"before %@ dateStr %@",date,dateStr); 
```

日志如下

```
2013-01-02 17:56:04.402 jana2ez[6067:11303] before 2013-03-28 22:00:00 +0000 dateStr 20130329 
2013-01-02 17:56:04.498 jana2ez[6067:11303] before 2013-03-29 22:00:00 +0000 dateStr 20130330 
2013-01-02 17:56:04.626 jana2ez[6067:11303] before (null) dateStr 20130331 
```

任何想法？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:52:30.923

```
NSCalendar* gregCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
[dateFormat setCalendar:gregCalendar]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T06:53:33.857

经过数小时的糟糕结果，我终于找到了一个受@Echihl 评论启发的解决方案。

我更改了日期中的时间，因此日期将被解析为`dateStr`.

```
 NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
    [dateFormat setDateFormat:@"yyyyMMdd HHmm"];
    NSDate *date = [dateFormat dateFromString:dateStr];
    NSLog(@"before %@ dateStr %@",date,dateStr); 
```

我的输出变成

```
 before 2013-03-31 05:00:00 +0000 dateStr 20130331 0800 
```

之前 20130329 被解析为 2013 年 3 月 28 日晚上 10 点

# haskell - 如何戳一个向量（或获取一个指向它的数据的向量）？

> ID：14125057
> 
> 赞同：6
> 
> 时间：2013-01-02T15:57:34.027
> 
> 标签：haskell, ffi

我读过[Data.Vector.Storable](http://hackage.haskell.org/packages/archive/vector/latest/doc/html/Data-Vector-Storable.html)将它的元素存储在一个连续的内存区域中。我一直期待这`Vector`将是一个实例，`Foreign.Storable`或者至少会有一个函数`:: Vector a -> Ptr (Vector a)`，但只有`unsafeToForeignPtr0 :: Storable a => Vector a -> (ForeignPtr a, Int)`.

我的 Haskell 代码生成了一个列表，`Foreign.Storable`我想从 C 代码中访问这个列表。执行此操作的数据类型是否`Vector.Storable`正确，如果是，我应该如何从 C 端访问它的元素？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:39:42.523

如果您不从 C 更改内存，则可以使用[`unsafeWith`](http://hackage.haskell.org/packages/archive/vector/0.10.0.1/doc/html/Data-Vector-Storable.html#g:36). 如果您确实需要从 C 进行更改，您可以先复制向量，或者在 C 端进行复制。（如果您确实需要从 C 中进行更改，但不再需要 Haskell 端的数据，您也可以`unsafeWith`在不复制的情况下使用，但是您必须确保不再使用向量。这可以狡猾，懒惰等等......）

那么，为什么不是when is`Vector a`的实例呢？好吧，对于一个：向量应该是什么？回想一下，即使该函数具有 signature ，文档也说“未使用该参数”。希望知道内部情况的人能过来并给出权威的答案，但据我所知，所有实例都是“固定大小”类型。`Storable``a`[`sizeOf`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Foreign-Storable.html#v%3asizeOf)`(Storable a) => a -> Int``Storable`

附录：您请求的函数签名实际上没有意义。假设你有一个`foo :: Vector a -> Ptr (Vector a)`，那真的有意义`foo (fromList [1,2]) == foo (init (fromList [1,2,3]))`吗？请记住，这些现在是*指针*，并且很可能会有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-31T16:07:30.097

一个可能的解决方案：

```
import qualified Foreign.Ptr as P
import qualified Data.Vector.Storable as SV
import qualified Data.Vector.Storable.Internal as SVI
import qualified GHC.ForeignPtr as FP

ptr0ToVector :: SV.Storable a => P.Ptr a -> Int -> IO (SV.Vector a)
ptr0ToVector ptr size =
 FP.newForeignPtr_ ptr >>= \foreignPtr ->
 return (SV.unsafeFromForeignPtr0 foreignPtr size)

vectorToPtr0 :: SV.Storable a => SV.Vector a -> (P.Ptr a,Int)
vectorToPtr0 vector =
 let (foreignPtr,size) = SV.unsafeToForeignPtr0 vector
 in (SVI.getPtr foreignPtr,size) 
```

# ios - UIControl 如何处理与 UIView 不同的连续触摸事件？

> ID：14125062
> 
> 赞同：1
> 
> 时间：2013-01-02T15:57:52.730
> 
> 标签：ios, cocoa-touch

我有一个`UIScrollView`包含多个子对象（每个子对象都可以被认为是一个 `UIView`框架，其中包含一个具有大量边距的垂直滑块）水平堆叠。如果我尝试水平平移我的`UIScrollView`，我希望它像您期望的那样滚动`UIScrollView`。如果我尝试垂直平移我的滑块，我只希望滑块移动 - 只要我的手指在屏幕上，滑块应该优先并且`UIScrollView`不应该能够平移。

如果我的自定义滑块对象继承自`UIControl`，那么一切都可以按照需要开箱即用。但是，如果我的自定义滑块对象继承自`UIView`，则只要我完全垂直移动手指，我就只能垂直平移我的滑块 - 当我引入任何水平移动时，手势被`UIScrollView`取而代之窃取并且滑块失去焦点。

`UIControl`有哪些行为`UIView`没有？

# c# - 将分号分隔的字符串解析为通用列表

> ID：14125069
> 
> 赞同：1
> 
> 时间：2013-01-02T15:58:29.357
> 
> 标签：c#, asp.net, generics

抱歉这个错误，我正在更新问题。我正在编写一个接收以下格式的输入的应用程序：

> someId=00000-000-0000-000000;someotherId=123456789;someIdentifier=3030;

有没有办法可以将这些值添加到泛型`LIST<T>`中，以便我的列表包含以下内容

```
record.someid= 00000-000-0000-000000
record.someotherId =123456789
record.someIdentifier =   3030 
```

对不起，我是新手，所以问这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T16:00:03.323

```
var input = "someId=00000-000-0000-000000;someotherId=123456789;someIdentifier=3030;"
var list = input.Split(';').ToList(); 
```

添加到文件标题后：

```
using System.Linq; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T16:07:54.370

您可以使用`Split`获取似乎是`key / value pair`组合的部分字符串并将键和值对添加到`Dictionary`.

```
 string str = "someId=00000-000-0000-000000;someotherId=123456789;someIdentifier=3030";
 string [] arr = str.Split(';');
 Dictionary<string, string> dic = new Dictionary<string, string>();
 for(int i=0; i < arr.Length; i++)
 {
        string []arrItem = arr[i].Split('=');
        dic.Add(arrItem[0], arrItem[1]);            
 } 
```

**根据 OP 的评论进行**编辑，以添加到自定义班级列表。****

 **```
internal class InputMessage
{
     public string RecordID { get; set;}
     public string Data { get; set;}
}

 string str = "someId=00000-000-0000-000000;someotherId=123456789;someIdentifier=3030";
    string [] arr = str.Split(';');
List<InputMessage> inputMessages = new List<InputMessage>();
for(int i=0; i < arr.Length; i++)
{
       string []arrItem = arr[i].Split('=');
    inputMessages.Add(new InputMessage{ RecordID = arrItem[0], Data = arrItem[1]});         
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T16:16:33.913

如果格式总是那么严格，您可以使用`string.Split`. 您可以创建一个[`Lookup`](http://msdn.microsoft.com/en-us/library/bb460184.aspx)：

```
string str = "someId=00000-000-0000-000000;someotherId=123456789;someIdentifier=3030;";
var idLookup = str.Split(new[]{';'}, StringSplitOptions.RemoveEmptyEntries)
    .Select(token => new { 
        keyvalues=token.Split(new[]{'='}, StringSplitOptions.RemoveEmptyEntries)
    })
    .ToLookup(x => x.keyvalues.First(), x => x.keyvalues.Last());

// now you can lookup a key to get it's value similar to a Dictionary but with duplicates allowed
string someotherId = idLookup["someotherId"].First(); 
```

[**演示**](http://ideone.com/EF2BFt)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T16:01:21.103

你需要知道在这种情况下`T`a 会是什么`List<T>`，我会把它作为一个字符串。如果您不确定使用`object`.

```
List<object> objList = str.Split(new char[] { ';' }).ToList<object>(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-02T18:44:49.957

您可以使用以下代码：

```
 string str = "someId=00000-000-0000-000000;someotherId=123456789;someIdentifier=3030;";

        int Start, End = 0;

        List<string> list = new List<string>();

        while (End < (str.Length - 1))
        {
            Start = str.IndexOf('=', End) + 1;
            End = str.IndexOf(';', Start);

            list.Add(str.Substring(Start, End - Start));
        } 
```**

# coffeescript - Ember：遍历 childViews

> ID：14125070
> 
> 赞同：0
> 
> 时间：2013-01-02T15:58:33.780
> 
> 标签：coffeescript, ember.js

我需要遍历一组子视图（它们是 UI 小部件）并告诉他们将自己从应用程序中删除。我已确保集合中存在所有 childViews，但是此代码一次只会在一些 childViews/widgets 上调用 removeIfSelected()：

```
 widgets = container.get('childViews')
 widget.removeIfSelected() for widget in widgets 
```

例如，如果有 3 个小部件，则第一次运行时（通过删除按钮）会删除 2 个小部件。我必须再次单击该按钮才能删除最后一个小部件。

如果有 2 个，它将删除一个小部件。如果有 4 个或更多，除了 2 个小部件之外的所有小部件都将被删除，我必须再单击 2 次才能删除最后两个小部件。

我最初的解决方案是运行循环 3 次，以确保删除所有小部件，但这没有通过代码审查，我必须找到一个真正的解决方案。我不确定这是咖啡脚本问题还是 Ember.js 问题。如何确保循环完全执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:45:21.987

听起来像是`widget.removeIfSelected()`在改变`widgets`你背后的数组，所以一旦删除一些东西，你的`for`循环中的长度和索引就会全部搞砸。考虑这个循环：

```
a = [ 0, 1, 2, 3, 4, 5 ]
for e, i in a
    console.log(i) if(i % 2 == 0) 
```

这显然会`0, 2, 4`在控制台中产生。然而，这：

```
a = [ 0, 1, 2, 3, 4, 5 ]
for e, i in a
    a.splice(i, 1) if(i % 2 == 0)
console.log(a) 
```

让你留`[1, 2, 4, 5]`在里面，`a`因为`a`它在被循环时正在被修改。

有两种常见的解决方案：

1.  向后迭代，以便更改不会影响即将发生的任何事情，它们只会影响您已经经历过的事情。
2.  制作您正在迭代的内容的副本，以便您迭代一件事并更改其他内容。

第一个看起来像这样：

```
for i in [widgets.length - 1 .. 0] by -1
    widget.removeIfSelected() 
```

第二个看起来像这样：

```
widgets = clone(container.get('childViews'))
widget.removeIfSelected() for widget in widgets 
```

您可以在哪里`clone`制作（浅）数组副本。如果你有下划线，那么你可以使用[`_.clone`](http://underscorejs.org/#clone)：

```
widgets = _(container.get('childViews')).clone() 
```

您也可以手动完成：

```
clone = (a) -> e for e in a 
```

# ruby-on-rails - Railities 使用了不正确的 Rake 版本

> ID：14125074
> 
> 赞同：0
> 
> 时间：2013-01-02T15:58:46.237
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

运行 Rails 3.2.9 应用程序时出现以下错误

```
Could not find rake-10.0.3 in any of the sources 
```

我相信这是由于 rake 要求版本 10.0.3 并且 railities 在我的 gemlock 文件中指定 > 0.8.7 造成的。

```
railties (3.2.9)
  actionpack (= 3.2.9)
  activesupport (= 3.2.9)
  rack-ssl (~> 1.3.2)
  rake (>= 0.8.7)
  rdoc (~> 3.4)
  thor (>= 0.14.6, < 2.0)
rake (10.0.3) 
```

有没有办法指定railities的版本依赖？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:40:33.460

指定

```
gem 'rake', '0.8.7' 
```

解决了这个问题。

# django - 如何使用 django 检查 M2M 匹配或无

> ID：14125077
> 
> 赞同：0
> 
> 时间：2013-01-02T15:58:54.587
> 
> 标签：django, django-orm

我有两个模型，它们的 M2M 字段都指向相同的第三个模型：

```
class Moo(models.Model):
    ...

class Foo(models.Model):
    moos = models.ManyToManyField(Moo, blank=True)

class Bar(models.Model):
    moos = models.ManyToManyField(Moo) 
```

我需要找到所有没有选择“manytomany”对象的“Foo”对象，或者至少有一个与单个“Bar”对象匹配的manytomany对象。

所以我的数据可能如下所示：

```
foo1.moos__all = 'boo', 'yah'
foo2.moos__all = <none>
foo3.moos__all = 'suck'

bar1.moos__all = 'boo' 
```

然后进行此搜索将产生：

```
bar1.find_matches()
>>> foo1, foo2 
```

过去的数据模型**必须**包含至少一项匹配项，因此很简单：

```
Foo.objects.filter(manytomany__in=bar1.moos.all()) 
```

现在模型变了，Foo.moos 可以为空。所以简而言之，我需要这样做：

```
Foo.objects.filter(
    Q(moos__in=bar1.moos.all()) | Q(moos__count=0)
) 
```

可悲`__count`的是不是一个选择:(

有什么好主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:07:59.063

以下不起作用吗？

```
Foo.objects.filter(
    Q(moos__in=bar1.moos.all()) | Q(moos=None)
) 
```

# qt - 如何（正确）在 Qt-Embedded 中输出多语言文本？

> ID：14125081
> 
> 赞同：3
> 
> 时间：2013-01-02T15:59:11.447
> 
> 标签：qt, fonts, multilingual, qtembedded

我的目标系统是：

*   linux 3.3.7,
*   Qt Embedded（开源版）4.8，
*   Droid 字体（取自 fonts-droid_20111207+git-1_all.deb Debian 包并复制到`/usr/lib/fonts`目录中），
*   用于主要 Qt GUI 应用程序的 Linux 帧缓冲区，
*   一切都是由[Buildroot](http://buildroot.uclibc.org/)包构建的。

我的测试应用程序非常简单：只有一个对话框，`QLabel`上面有一些静态（一个用于中文，一个用于阿拉伯语，一个用于西里尔文等）。

当我在我的 linux 桌面上运行它时，所有标签都正确显示。但是当它在我的目标系统上运行时，一些文本会消失。

经过一番研究，我发现 Qt 框架的行为存在这种差异： `QFontDatabase`类报告说我的桌面系统上只有 4 个 Droid 字体系列：

```
Droid Sans [unknown]
Droid Sans [monotype]
Droid Sans Mono
Droid Serif 
```

但是同一个`QFontDatabase`班级报告说我的目标系统上有很多*分离*的字体系列：

```
Droid Arabic Naskh
Droid Sans
Droid Sans Armenian
Droid Sans Ethiopic
Droid Sans Fallback
Droid Sans Georgian
Droid Sans Hebrew
Droid Sans Japanese
Droid Sans Mono
Droid Sans Thai
Droid Serif 
```

结果，如果我更改我的应用程序的“默认”字体系列（通过`-fn`命令行选项或通过在我的应用程序内部手动调用`setFont()`）会显示一些文本标签，但不会显示其他标签（例如，当我使用“Droid Sans 希伯来语”字体时）家庭，缺少韩文文本，但希伯来文/阿拉伯文都可以）。

所以，我的问题是：在 Qt Embedded 应用程序中输出多语言文本的正确方法是什么？为什么“Droid Sans”一家会分开？有没有办法将它们结合在一起？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T13:57:48.907

我创建了一个小型测试应用程序，它从文件中加载字体，然后在 GUI 中使用它。

```
#include <QtGui>

int main(int argc, char** argv)
{
    QApplication app(argc, argv);

    /* Load font data from file in the same directory as executable */
    QFile fontFile("BaroqueScript.ttf");
    if (!fontFile.open(QIODevice::ReadOnly)) {
        qCritical() << "failed to open font file";
    }
    QByteArray fontData = fontFile.readAll();

    /* Register font to the QFontDatabase */
    if (QFontDatabase::addApplicationFontFromData(fontData) == -1) {
        qCritical() << "failed to add a font";
    }

    /* Create font object and verify font family */
    QFont font("Baroque Script", 10, QFont::Bold);
    QFontInfo fontInfo(font);
    qDebug() << "Expected:" <<  font.family() << "Real:" << fontInfo.family();

    /* Produce GUI which uses loaded font */
    QLabel label("Hello, world");
    label.setFont(font);
    label.show();

    return app.exec();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-26T21:05:43.063

好吧，看起来解决方案终于找到了。

Qt Embedded Rendering Engine 中有一个错误：由于某些原因，它使用“QPF2”字体引擎`QFontEngineQPF`（

为了避免/解决这个问题，只需要运行一个带有`QWS_NO_SHARE_FONTS=1`环境变量（以及`-fn "Droid Sans"`命令行参数）的应用程序。

之后，所有语言的所有文本都会显示，没有任何问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-22T13:44:08.717

@qehgt 你能提供你的 CJK 和阿拉伯字体文件大小吗？我遇到了类似的问题......问题是由于字体缓存大小的限制。我认为它大约 3MB。因此，增加字体缓存大小是一种可能性，或者您必须根据所选语言动态加载字体文件。希望这可以帮助.. ：）

# php - 要添加到计数查询以显示分页的变量 ID

> ID：14125084
> 
> 赞同：1
> 
> 时间：2013-01-02T15:59:21.473
> 
> 标签：php, mysql, pagination

我整天都在做这个，这是我今天在这里的第二篇文章。我已经设法创建分页并在某些页面上显示页码。当我将它介绍到我的产品页面时，我一直在努力添加变量 ID `cat_id`。如果我手动添加类别 ID，它会显示第一页，但是当我选择第二页时，它会丢失列表，因为查询不包含变量。

我已经尝试过`"SELECT COUNT(*) As Total FROM products WHERE prod_id = {$cat_id}"`，但是我需要在 showproduct.php 中引用它吗？它显示分页数据但页面列表不显示并且有错误`Undefined variable: cat_id`。在这里定义变量的最佳方法是什么。

这开始让我感到沮丧，因为它不应该花这么长时间，而且我仍然要添加 jquery。另外，我知道 mysql 已经过时，但我想先让它工作。

所以我的问题是如何添加`{$cat_id}`到 COUNT 查询。

**显示产品.php**

```
.......

    <p class="pagination">
<?php
    if(isset($page_num))
    {
        $result = mysql_query("SELECT COUNT(*) As Total FROM products WHERE prod_id = {$cat_id}");
        $rows = mysql_num_rows($result);
        if($rows)
        {
            $rs = mysql_fetch_array($result);
            $total = $rs["Total"];
        }
        $totalPages = ceil($total / $perpage);
        if($page_num <=1 )
        {
            echo '<span id="page_links" style="font-weight:bold;"> < </span>';
        }
        else
        {
            $j = $page_num - 1;
            echo '<span><a id="page_a_link" href="../anonymous/anonymous.master.php?page=showproduct.php&page_num=' . $j . '"> < </a></span>';
        }
        for($i=1; $i <= $totalPages; $i++)
        {
            if($i<>$page_num)
            {
                echo '<span><a href="../anonymous/anonymous.master.php?page=showproduct.php&page_num=' .$i. '" id="page_a_link">' . $i . '</a></span>';
            }
            else
            {
                echo '<span id="page_links" style="font-weight:bold;">' . $i . '</span>';
            }
        }
        if($page_num == $totalPages )
        {
            echo '<span id="page_links" style="font-weight:bold;">Next ></span>';
        }
        else
        {
            $j = $page_num + 1;
            echo '<span><a href="../anonymous/anonymous.master.php?page=showproduct.php&page_num=' .$j. '" id="page_a_link"> > </a></span>';
        }
    }
?>
</p>

...... 
```

**获取 Product.php**

```
 .....

<?php
function get_posts($id = null, $cat_id = null) {
$posts = array();
$perpage = 8;
 if(isset($_GET["page_num"]))
 {
  $page_num = intval($_GET["page_num"]);
 }
 else
 {
  $page_num = 1;
 }
 if ($page_num < 1)
 {
   $page_num = 1;
 }
 $calc = $perpage * $page_num;
 $start = $calc - $perpage;

    $query ="SELECT  `products`.`id` AS  `name` ,  `products_cat`.`id` AS  `category_id` , `products`.`name` AS `title` ,  `description` ,  `price` ,  `sale` ,  `picture` 
FROM  `products` 
INNER JOIN  `products_cat` ON  `products`.`prod_id` =  `products_cat`.`id` ";

    if ( isset($id) ) {
    $id = (int) $id;
    $query .= " WHERE `products`.`id` = {$id}";
    }

    if ( isset($cat_id) ) {
        $cat_id = (int) $cat_id;
        $query .= " WHERE `products_cat`.`id` = {$cat_id}";
}

    $query .= " ORDER BY `products`.`price` DESC Limit $start, $perpage";

    $query = mysql_query($query);
    echo mysql_error();
    while ( $row = mysql_fetch_assoc($query) ) {
        $posts[] = $row;
        }

    return $posts;
} 
```

……

**表视图**

```
CREATE TABLE `products` (
  `id` int(100) NOT NULL AUTO_INCREMENT,
  `prod_id` int(15) NOT NULL,
  `prod_sub_id` int(15) DEFAULT NULL,
  `description` varchar(3000) NOT NULL,
  `sale` varchar(100) DEFAULT NULL,
  `name` varchar(100) NOT NULL,
  `price` varchar(100) NOT NULL,
  `picture` varchar(100) NOT NULL,
  `timestamp` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=60 DEFAULT CHARSET=latin1 
```

# javascript - Chrome“复制图像”选项在右键单击上下文菜单中显示为灰色

> ID：14125086
> 
> 赞同：2
> 
> 时间：2013-01-02T15:59:27.250
> 
> 标签：javascript, html, google-chrome, webkit

在使用 Chrome (23) 浏览[Apple 网站](http://store.apple.com/us/product/MC573Z/A/mac-os-x-106-snow-leopard)时，我发现“复制图像”上下文菜单项被禁用（见屏幕截图）。所以看起来 Webkit 有一种禁用此选项的新方法。有谁知道它是什么？

[![禁用的“复制图像”上下文菜单项的屏幕截图](../Images/5efded7570419c0eb584d52c3f1629be.png)](https://i.stack.imgur.com/vx0hN.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T16:31:40.307

图像的内联样式为`content: -webkit-image-set`. 当我删除它时，“复制图像”选项将启用。

**代码（为便于阅读而缩短）：**

```
<img style="content:-webkit-image-set(url(http://store.storeimages.cdn-apple.com), 1, url(http://store.storeimages.cdn-apple.com/), 2);" 
src="http://store.storeimages.cdn-apple.com/"> 
```

> 该功能背后的想法是允许作者以不同的分辨率提供同一图像的多个变体，并允许用户代理选择当时最合适的资源。

[http://trac.webkit.org/changeset/111637](http://trac.webkit.org/changeset/111637)

另见：[http ://www.brucelawson.co.uk/2012/html5-urgently-needs-adaptive-images-mechanism/](http://www.brucelawson.co.uk/2012/html5-urgently-needs-adaptive-images-mechanism/)

请注意，无法右键单击和复制图像似乎只是样式的副作用，而不是反下载机制。

# ocaml - ocaml 类对象

> ID：14125092
> 
> 赞同：3
> 
> 时间：2013-01-02T15:59:49.800
> 
> 标签：ocaml

做什么

```
self: #Arakoon_client.client 
```

在这段代码中意味着，以及如何使用这样的对象

```
class remote_client ((ic,oc) as conn) =

object(self: #Arakoon_client.client) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-03T08:08:36.417

在许多 OO 语言中，有一个关键字（`this`在 C++ 中）可以从其方法中引用对象。在 OCaml 中，您可以选择要用于引用对象的名称，方法是在`object`关键字后面给出它的名称（这里，他们选择了`self`）。

在 OCaml 中，您还可以为类继承的父级命名：

```
class x = object (self)
  inherit x_parent as parent
  method print = parent#print; print_newline()
end 
```

例如，这可用于使用祖先中的方法，这些方法已被当前类中的方法覆盖：在前面的示例中，`parent#print`调用继承的方法，而`self#print`将调用当前方法。

最后，当你定义一个类时，你可以使用符号`x`来引用这个类的对象类型。`#x`这里，指的是模块中定义`#Arakoon_client.client`的类的对象类型。`client``Arakoon`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T12:50:55.737

在[Arakoon_client](https://bitbucket.org/despiegk/arakoon/src/ada5840d1b78/src/client/arakoon_client.mli)模块中，有一个名为`client`. 该表达式`Arakoon_client.client`指的是这种类型。正如@FabriceLefessant 的回答中所述，`self`指的是对象本身，冒号后面的表达式是对象必须符合的类型。

最后，`#`类类型名前面的符号表示该类型不是封闭的（因此是@Ontologiae 使用的“开放约束”术语），这意味着`self`必须*至少*支持该接口，但也可能包含其他方法。

换句话说，这或多或少相当于`implements Arakoon_client.client`java中的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T16:20:59.833

这意味着您有一个值 self 代表对象（实例化）本身，并通过类型#Arakoon_client.client 公开约束。

'object' 必须具有#Arakoon_client.client 的所有方法

# jquery - pageChange 不会删除旧事件

> ID：14125093
> 
> 赞同：0
> 
> 时间：2013-01-02T15:59:50.670
> 
> 标签：jquery, events, jquery-mobile, mobile

我在使用 jQuery mobile 时遇到了很多问题，我真的很想开枪打自己的脑袋。

我有一个带有此代码的页面：

```
$(document).on('pageinit ',function(){
$("#phone_number").on("blur", function (event, ui) {

    $.mobile.changePage("<?php echo base_url(); ?>mobile/products_by_phone",  {
     type: "POST",
     data: {phone :  $('#phone_number').val() },
    transition: "flip"} );

});
}); 
```

现在该页面具有有效的 html 和 jQuery mobile 标记，其中包含以下代码：

```
$(document).on('pageinit ',function(){
 alert();
 }); 
```

现在，当我更改页面时它可以工作，但是当我再次调用`blur`事件时，页面更改了两次，然后我再做 4 次，然后 8 次，等等。

**并且**按下浏览器的后退按钮可以工作，但是当我尝试向前按下时没有任何反应。

**笔记：**

*   我认为这可能与模糊有关，并且每次 changePage 发生模糊触发时，我都尝试添加一个按钮并绑定到单击，但同样的事情发生了
*   我想也许是我绑定到的事实`document`导致了它，所以我尝试绑定到页面 id，但那根本不起作用（没有任何事件发生，因为没有绑定事件），然后我尝试触发创建事件，但这也没有绑定事件

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T21:22:30.007

您所要做的就是添加您想要将 init 事件绑定到的页面... 假设您想要这个绑定一次，您需要这样做，您只需要更具体。

例子：

```
$(document).on('pageinit', '#page1', function(e){...}); 
```

将 #page1 替换为您的页面 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:03:59.880

我不熟悉 jQuery mobile，但我假设该`changePage()`函数使用 AJAX 调用加载新页面内容。如果是这种情况，那么现有的事件处理程序将保留，您每次只需添加更多的事件处理程序。

[`.off()`](http://api.jquery.com/off/)在（重新）绑定之前尝试使用该函数删除事件处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:08:54.433

这是一个常见的 jQuery 移动问题。这是因为多个事件绑定到同一个元素。每次返回上一页时，都会再次绑定相同的事件。

这个问题有2个解决方案。

在将事件绑定到某个元素之前，请检查同一事件是否尚未绑定。

**例子：**

```
$('.menu-browse:Event(!' + touchEvent + ')').each(function(){
    $('.menu-browse').bind(touchEvent, function(e) {

    });
}); 
```

在这里您将找到事件过滤器的完整实现：[​​http://www.codenothing.com/archives/2009/event-filter/](http://www.codenothing.com/archives/2009/event-filter/)

或者：

每次绑定事件时，先取消绑定。

**例子：**

```
$(document).unbind();
$(document).bind('pageinit', function(e) {

}); 
```

或者：

```
$(document).die();
$(document).live('pageinit', function(e) {

}); 
```

或者在你的情况下：

```
$(document).off(); 
$(document).on('pageinit',function(){
    alert();
}); 
```

可悲的是，这个问题没有万无一失的解决方案。

# backbone.js - jQuery & Backbone：如何在特定条件下在 drop 事件上附加视图

> ID：14125094
> 
> 赞同：0
> 
> 时间：2013-01-02T15:59:57.873
> 
> 标签：backbone.js, backbone-views, backbone-events, jquery-droppable, jquery-draggable

我的 CanvasModel 有以下视图，用户可以在其上从工具栏中拖放各种小部件。每当将某些内容放入 CanvasView 时，都会将一个新的 WidgetView 实例附加到 DOM 中。

最近添加的 Widget 也是可拖动的，以便用户将其放置在 Canvas 中他想要的任何位置。问题是，一旦最近附加的 Widget 被删除，另一个 WidgetView 实例就会被附加

```
var CanvasView = Backbone.View.extend ({
    tagName: 'section',
    className: 'canvas', 

    events: {
    'drop': 'instantiateWidget'
    },

    initialize: function(){
        this.$el.droppable({});
    },

    render: function(){
        return this;
    },

    instantiateWidget: function() {
        this.$el.on("drop", function(event, ui){}).append(new WidgetView({model: myWidget}).render().el);   
    }
}); 
```

我只想实例化一个从工具栏拖到画布的小部件（它们有一个“拖拽”类）。有没有办法“过滤”放置侦听器，所以 CanvasView 仅当放置的项目具有“拖动”类或已从工具栏拖动时才会实例化一个小部件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T21:34:48.380

我不熟悉那个特定的下降事件，但回答你的问题

> 有没有办法“过滤” drop listener

答案是，确实是的。所有事件处理程序都会传递一个事件对象，您可以查看它的详细信息（特别是它的`target`属性）以确定哪个 DOM 元素触发了事件。

但是，我注意到您的代码中有一个更重要的问题：您似乎不正确地连接了事件处理程序。你正在做的：

```
this.$el.on("drop", function(event, ui){}).append(new WidgetView({model: myWidget}).render().el); 
```

这将连接一个什么都不做的事件处理程序，然后立即附加一个新的小部件。我认为你想做的是：

```
this.$el.on("drop", function(event, ui){
    $(event.target).append(new WidgetView({model: myWidget}).render().el)
}); 
```

除非这似乎是错误的，因为您正在绑定一个事件处理程序以响应另一个事件。我想你想要的是：

```
instantiateWidget: function() {
   this.$el.append(new WidgetView({model: myWidget}).render().el);   
} 
```

所以，回到你原来的问题，如果你想在新代码中检查导致事件的元素，它看起来像：

```
instantiateWidget: function(e) {
   if ($(e.target).is(':not(canvas)') return;
   this.$el.append(new WidgetView({model: myWidget}).render().el);   
} 
```

或者，您*可以*完全避免这种情况，只需将您的事件连接上的选择器设置为仅针对您想要的元素产生的事件（请记住，事件连接只使用普通的 jQuery 选择器）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T15:35:26.623

正如@machineghost 指出的那样，我的语法中有一个致命错误。但是，根据我从代码中了解到的情况，我们检查事件目标，如果它不是“画布”，则什么也不会发生，如果是，则小部件会被渲染到其中。不幸的是，情况并非如此，因为实例化的小部件也可以在画布内拖动（供用户定位它们），即使使用您的实现，我认为实例化小部件的拖放也会导致画布中的更多实例化（如一旦他们被丢弃）。

本质上，我想做的是检查工具栏上拖动的元素是否具有“拖动”类（它确实如此），如果是这样，那么只有在画布中实例化一个小部件，这将阻止新实例化的小部件在画布周围拖动以进行定位时导致进一步的实例化（实例化的小部件没有拖动类）。

为了实现类似的东西，我深入研究了 jQuery 事件。有一个名为“dragstop”的好事件，我可以通过以下方式使用它来获得我想要的东西。

```
$('section#toolbar').children.on("dragstop", function(event, ui){}) 
```

问题是在dragstop的函数中，我需要参考drop事件

```
 if ($(e.target).is('canvas')) this.$el.append(new WidgetCanvasView({model: myWidget}).render().el); 
```

但显然这也行不通......（需要绑定事件等。）感谢您的回答，它让我思考并更深入地挖掘事件，以及如何绑定它们等......希望我将找到解决此问题的方法！

# javascript - jquery验证确认密码

> ID：14125102
> 
> 赞同：0
> 
> 时间：2013-01-02T16:00:30.667
> 
> 标签：javascript, jquery, jquery-validate

我正在使用[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)来验证允许用户更改其现有设置的表单。该表单有一个密码字段和一个确认密码的字段。为了保持密码不变，我指示用户将其留空（也许是一些更直观的方法？），并且仅当用户更改他/她的密码时才会显示确认密码字段。

它工作得很好，但有两个问题。首先，如果您在密码字段中输入内容并按 Tab，则不会转到确认密码字段，而是转到之后的下一个字段。其次，如果您在密码字段中输入内容并按回车，则在检查确认密码之前提交表单。[出于某种原因，使用 jsfiddle 演示http://jsfiddle.net/4htKu/2/](http://jsfiddle.net/4htKu/2/)并没有体现出第二个缺陷，但它在第二个相同的演示[http://tapmeister.com/test/validatePassword.html](http://tapmeister.com/test/validatePassword.html)上确实存在。下面的代码与前面提到的两个演示相同。我相信问题与被隐藏的确认密码密码有关，但不确定。我需要做什么来解决这两个问题？谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
        <title>jQuery validation plug-in - main demo</title>

        <script src="http://code.jquery.com/jquery-latest.js"></script>
        <script src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js" type="text/javascript"></script>

        <script type="text/javascript">
            $(function() {

                $("#confirm_password").parent().hide();
                $("#password").val('').
                blur(function() {
                    $t=$(this);
                    if($.trim($t.val())!="" && !$t.hasClass('error')) {$("#confirm_password").parent().show();}
                    else if($.trim($t.val())=="") {$("#confirm_password").val('').parent().hide();}
                });

                // validate signup form on keyup and submit
                $("#signupForm").validate({
                    rules: {
                        firstname: {required: true,minlength: 2},
                        lastname: {required: true,minlength: 2},
                        username: {required: true,minlength: 2},
                        password: {required: true,minlength: 2},
                        confirm_password: {required: true,minlength: 2, equalTo: "#password"}
                    },
                    messages: {},
                    submitHandler: function(form) {alert("submitted");}
                });

            });
        </script>

    </head>
    <body>

        <form class="cmxform" id="signupForm" method="get" action="">
            <fieldset>
                <legend>Validating a complete form</legend>
                <p>
                    <label for="firstname">Firstname*</label>
                    <input id="firstname" name="firstname" />
                </p>
                <p>
                    <label for="lastname">Lastname*</label>
                    <input id="lastname" name="lastname" />
                </p>
                <p>
                    <label for="username">Username*</label>
                    <input id="username" name="username" />
                </p>
                <p>
                    <label for="password">Password (Leave blank to remain unchanged)</label>
                    <input id="password" name="password" type="password" />
                </p>
                <p>
                    <label for="confirm_password">Confirm password</label>
                    <input id="confirm_password" name="confirm_password" type="password" />
                </p>
                <p>
                    <label for="other">Other Non-required</label>
                    <input id="other" name="other" />
                </p>
                <p>
                    <input class="submit" type="submit" value="Submit" />
                </p>
            </fieldset>
        </form>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:05:59.690

而不是使用`.blur`，使用`.keydown`和 a`settimeout`来检测值是否为空。如果它不是空白的，则显示它，否则，隐藏它。

```
$("#password").keydown(function() {
    var self = this, $self = $(this);
    setTimeout(function(){
        if ( $.trim(self.value) != "" && !$self.is(".error") ) {
            $("#confirm_password").parent().show();
            return;
        }
        $("#confirm_password").val('').parent().hide();
    },0);
}); 
```

就按回车而言，这不是应该做的吗？提交表格？

using`.blur`不起作用的原因是您在显示隐藏字段之前切换到下一个字段。这段代码解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-07T19:11:56.813

为什么不通过复选框询问用户是否要更改密码？如果选中则显示密码字段，如果不允许提交表单。

附加 HTML：

```
<p>
    <label for="passwordChangeYes">Check if you want to change your password</label>
    <input type="checkbox" name="passwordChangeYes" id="passwordChangeYes" value="Yes" />
</p> 
```

附加JS：

```
$("#password").hide();
$('#passwordChangeYes').one("click", function () {
    if ($('#passwordChangeYes').is(':checked')) {
            $("#password").fadeIn(400);
        }
    }); 
```

我不确定如何从复选框单击的验证部分中删除或添加所需的部分。但也许这是一个起点？

# jquery - HighCharts HighStocks 事件标志被图表边框遮挡

> ID：14125104
> 
> 赞同：2
> 
> 时间：2013-01-02T16:00:44.117
> 
> 标签：jquery, highcharts, highstock

如果您在图表日期的最后一个日期有一个带有事件标记标志的数据点，则很难查看，因为它被推到图表的绝对最右边。有没有办法在这种情况下为图表添加更多空间？这是来自 highstocks 网站示例演示的一些改编小提琴代码，其中图表中的最终记录标记为“A”，说明了这个问题......

$(function() { $.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=usdeur.json&callback=?', function(data) {

```
 // Create the chart
    window.chart = new Highcharts.StockChart({
        chart : {
            renderTo : 'container'
        },

        rangeSelector : {
            selected : 1
        },

        title : {
            text : 'USD to EUR exchange rate'
        },

        tooltip: {
            style: {
                width: '200px'
            },
            valueDecimals: 4
        },

        yAxis : {
            title : {
                text : 'Exchange rate'
            }
        },

        series : [{
            name : 'USD to EUR',
            data : data,
            id : 'dataseries'
        },
        // the event marker flags
        {
            type : 'flags',
            data : [{
                x : Date.UTC(2011, 3, 25),
                title : 'H',
                text : 'Euro Contained by Channel Resistance'
            }, {
                x : Date.UTC(2011, 3, 28),
                title : 'G',
                text : 'EURUSD: Bulls Clear Path to 1.50 Figure'
            }, {
                x : Date.UTC(2011, 4, 4),
                title : 'F',
                text : 'EURUSD: Rate Decision to End Standstill'
            }, {
                x : Date.UTC(2011, 4, 5),
                title : 'E',
                text : 'EURUSD: Enter Short on Channel Break'
            }, {
                x : Date.UTC(2011, 4, 6),
                title : 'D',
                text : 'Forex: U.S. Non-Farm Payrolls Expand 244K, U.S. Dollar Rally Cut Short By Risk Appetite'
            }, {
                x : Date.UTC(2011, 4, 6),
                title : 'C',
                text : 'US Dollar: Is This the Long-Awaited Recovery or a Temporary Bounce?'
            }, {
                x : Date.UTC(2011, 4, 9),
                title : 'B',
                text : 'EURUSD: Bearish Trend Change on Tap?'
            },
            {
                x : Date.UTC(2011, 4, 10),
                title : 'A',
                text : 'Test Flag Falling off the chart'                            
            }],
            onSeries : 'dataseries',
            shape : 'circlepin',
            width : 16
        }]
    });
}); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T13:49:47.583

不幸的是，这是不可能的。此处报告有关切割标志的问题：[https ://github.com/highslide-software/highcharts.com/issues/419](https://github.com/highslide-software/highcharts.com/issues/419)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-02T22:14:51.790

下面的代码可以解决这个问题：

```
yAxis : {
            title : {
                text : 'Exchange rate'
            },
            max: someBiggerValue, // set max to little higher as biggest data 
        }, 
```

# ios - UInavigationcontroller pop：它离开弹出视图的内容

> ID：14125111
> 
> 赞同：1
> 
> 时间：2013-01-02T16:00:55.293
> 
> 标签：ios, uinavigationcontroller

情况：我有一个完全基于 UInavigationcontroller 的应用程序。在应用程序的某个时刻，我推送控制器 A 至极，其中包含几个子视图。然后我推送一个控制器 B，它是同一类控制器 A 的另一个新实例。控制器 B 也有一些子视图。

当我弹出控制器 B 时，将显示与控制器 A 关联的视图。问题是屏幕上还有与控制器 B 关联的视图的所有内容（在 A 的子视图上）。

我的猜测是，问题与两个控制器都是同一类的实例这一事实有关。（使用不同类的控制器它可以完美地工作）

谢谢。

**编辑：**所有的东西都是以编程方式和 xib 完成的（没有故事板）

视图 A 的推送：

```
ScreenViewController *secondView = [[ScreenViewController alloc] initWithNibName:@"ScreenViewController" bundle:nil];

// set some properties

[[self navigationController] pushViewController:secondView animated:YES]; 
```

视图 B 的推送：

```
ScreenViewController *newScreenView = [[ScreenViewController alloc] initWithNibName:@"ScreenViewController" bundle:nil];

// set some properties

[[self navigationController] pushViewController:newScreenView animated:YES]; 
```

与 关联的视图`ScreenViewController`包含一个`UIView`（作为属性），我添加了我需要显示的所有子视图。我使用属性而不是直接使用视图，因为我需要将其放入`UIScrollView`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:17:26.973

我猜你正在使用一些类似于：

```
[self.navigationController.view addSubview:mySubview]; 
```

我之前通过在视图即将消失时删除子视图来处理这个问题：

```
- (void)viewWillDisappear:(BOOL)animated {

    [UIView animateWithDuration:0.3f
                          delay:0.0f 
                        options:UIViewAnimationOptionCurveEaseInOut 
                     animations:^(void){

                         mySubview.alpha = 0;

                     } 
                     completion:^(BOOL finished){

                         [mySubview removeFromSuperview];

      }];
    } 
```

当你推送或弹出一个新的视图控制器时，上面的代码将执行，它会“淡出”子视图。完成后，它会将其从视图中删除。您只需确保每次再次加载视图时都重新添加子视图。希望这可以帮助。

# php - 是否可以使用 PHP 阻止整个美国州访问我的网站？

> ID：14125119
> 
> 赞同：4
> 
> 时间：2013-01-02T16:01:21.260
> 
> 标签：php, javascript, ip

我有一个客户想阻止整个美国州访问他的网站。他可以接受它不完美的想法。这可能吗？

我找到了这项服务： http: [//www.maxmind.com/en/home](http://www.maxmind.com/en/home)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T16:03:27.967

没有任何良好的准确性。通过 IP 进行地理定位可能有助于实现总体思路，但通常是不正确的，尤其是对于具有国家或地区足迹的大型 ISP。

我住在纽约州，但我的手机显示为堪萨斯州，该地区的一些 ISP 出现在德克萨斯州。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T16:12:49.977

[PHP-Ip-Block](http://code.google.com/p/php-ip-block/)使用您提到的 Maxmind 服务。

您需要更改 index.php 中的以下几行；（应该改变的行）

```
$okc = array('Canada', 'United States'); //array of countries you want to let in

// Decide what to do with your country arrays
if (in_array($userco,$okc))
  echo " "; //allowed in 
else
 header( 'Location: http://www.google.com/' );//this is where to send countries not matched. 
```

对此；（新行）

```
$okc = array('United States'); //array of countries you want to NOT let in

// Decide what to do with your country arrays
if (!in_array($userco,$okc))
  echo " "; //allowed in 
else
 header( 'Location: http://www.google.com/' );//this is where to send countries matched. 
```

# php - PDOException with DROP TABLE IF EXISTS

> ID：14125122
> 
> 赞同：3
> 
> 时间：2013-01-02T16:01:34.287
> 
> 标签：php, mysql, pdo

我正在使用 PDO 调用以 DROP TABLE IF EXISTS 开头的存储过程。我随机得到 PDOException 'SQLSTATE[42S02]: Base table or view not found: 1146 Table 'historygr.reached' doesn't exist' 更烦人的是它会从告诉我到抛出异常说表已经存在，在几秒钟之内，似乎来自同一个连接。

我自己无法触发错误，但我会收到错误通知。

这是错误源自的 PHP：

```
$dbh = PDODB::getInstance();
$stmt = $dbh->query("CALL ListReached(".$this->item_id.")"); // <-- ERROR
$items = $stmt->fetchAll(); 
```

这是 MySQL 过程定义：

```
DELIMITER $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `ListReached`( IN root INT)
BEGIN
    DECLARE rows SMALLINT DEFAULT 0;

    DROP TABLE IF EXISTS reached;
    CREATE TABLE reached(
    node_id INT PRIMARY KEY
    ) ENGINE=HEAP;

    INSERT INTO reached VALUES (root);
    SET rows = ROW_COUNT();

    WHILE rows > 0 DO
    INSERT IGNORE INTO reached
        SELECT DISTINCT child_id 
        FROM related_item AS r
        INNER JOIN reached AS p ON r.parent_id = p.node_id;
    SET rows = ROW_COUNT();

    INSERT IGNORE INTO reached
        SELECT DISTINCT parent_id
        FROM related_item AS r
        INNER JOIN reached AS p ON r.child_id = p.node_id;
    SET rows = rows + ROW_COUNT();
    END WHILE;

    DELETE FROM reached WHERE node_id = root;

    SELECT * FROM reached;
    DROP TABLE reached;

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:28:30.463

您正在达到比赛条件。

如果两个连接都在执行相同的脚本，它们将同时创建和删除相同的表，从而导致冲突。

考虑使用临时表而不是在事务中创建和删除真实表。

[http://dev.mysql.com/doc/refman/5.1/en/create-table.html](http://dev.mysql.com/doc/refman/5.1/en/create-table.html)

> 创建表时可以使用 TEMPORARY 关键字。TEMPORARY 表仅对当前连接可见，并在连接关闭时自动删除。这意味着两个不同的连接可以使用相同的临时表名称，而不会相互冲突或与现有的同名非临时表冲突。（在删除临时表之前，现有表是隐藏的。）要创建临时表，您必须具有 CREATE TEMPORARY TABLES 特权。

**编辑**

正如评论中提到的，查询多次引用该表。

另一种方法是在过程中使用锁：http: [//dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_get-lock](http://dev.mysql.com/doc/refman/5.5/en/miscellaneous-functions.html#function_get-lock)

# css - Twitter Bootstrap：如何为收音机和复选框添加标签？

> ID：14125124
> 
> 赞同：5
> 
> 时间：2013-01-02T16:01:42.460
> 
> 标签：css, twitter-bootstrap

是否有一种引入无线电和复选框选项的 TB 方式？例如：

**Foo 选项介绍：**

*   富一
*   富二

基本上，类似于`<label>`的角色`<input>`等。以下是 2 个单选选项的代码，但没有“标签”：

```
<div class="control-group">
    <div class="controls">
        <label class="radio" for="foo_foo1">
            <input type="radio" name="foo" value="foo1" id="foo_foo1">
            Foo One
        </label>
        <label class="radio" for="foo_foo2">
            <input type="radio" name="foo" value="foo2" id="foo_foo2">
            Foo Two
        </label>        
    </div>
</div> 
```

首选结核病解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-16T04:14:17.143

从 Bootstrap 3 开始，您必须在标签上使用[checkbox-inline 和 radio-inline类。](http://getbootstrap.com/css/#forms-controls)

```
<label class="checkbox-inline">
    <input type="checkbox" id="inlineCheckbox1" value="option1"> 1
</label>
<label class="radio-inline">
    <input type="radio" name="inlineRadioOptions" id="inlineRadio1" value="option1"> 1
</label> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-07T10:03:32.007

我认为您只想在单选按钮上方有一个标签。像这样：

```
<div class="control-group">
    <label for="foo_controls">Foo Options Introduction:</label>
    <div id="foo_controls" class="controls">
        <label class="radio">
            <input type="radio" name="foo" value="foo1" id="foo_foo1">
            Foo One
        </label>
        <label class="radio">
            <input type="radio" name="foo" value="foo2" id="foo_foo2">
            Foo Two
        </label>
    </div>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:08:10.827

a`<fieldset>`和 a`<legend>`怎么样？

就像这里的第一个例子一样：http: [//twitter.github.com/bootstrap/base-css.html#forms](http://twitter.github.com/bootstrap/base-css.html#forms)

还是信息警报？ [http://twitter.github.com/bootstrap/components.html#alerts](http://twitter.github.com/bootstrap/components.html#alerts)

# matlab - MATLAB 数字循环

> ID：14125129
> 
> 赞同：2
> 
> 时间：2013-01-02T16:01:46.343
> 
> 标签：matlab, loops

我正在循环一个数组，多次循环，每次数组重新启动时都会更改顺序（使用 randperm）。

我的问题是，有时我的数组顺序如下所示：

```
1 3 5 6 8 7 2 4 9     
9 4 2 7 8 6 5 3 1 
```

请注意，第一个数组循环的结束与下一个数组循环的开始相同。有没有办法控制这个？

我曾尝试在循环结束之前放置`rng (n)`and ，然后再返回以随机化顺序并继续循环，但这无济于事。`randn(n)`

编辑 - 代码

```
for b = 1;
while b <= 2
  for n = randperm(length(V));
  disp(V {n});
  end
b = b+1;
end
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:18:01.987

这是一个实现 ja72 建议的简短解决方案：

```
V = 1:9;
b = 1;
while b <= 10
  nextperm = randperm(length(V)); %// Generate a random permutation

  %// Verify permutation
  if (b > 1 && nextperm(1) == prevperm(end))
      continue
  end
  prevperm = nextperm;

  disp(V(nextperm));  
  b = b + 1;
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:31:27.657

我认为这是您需要的，在确定随机排列之前的检查条件？

```
matrix = [11,22,33,44,55,66,77,88,99];
randOrder = zeros(length(matrix));
randOrderIntermediate = zeros(length(matrix));
randOrderPrev = zeros(length(matrix));

for i = 1:10

%Store the previous random order
randOrderPrev = randOrder;
%Create interim random order
randOrderIntermediate = randperm(length(matrix));
%check condition, is the first the same as the previous end?
while randOrderIntermediate(end) == randOrderPrev(1)
    %whilst condition true, re-randomise
    randOrderIntermediate = randperm(length(matrix));
end
%since condition is no longer true, set the new random order to be the
%intermediate one
randOrder = randOrderIntermediate;

%As with your original code.
for n = randOrder
    disp(matrix(n))
end

end 
```

# c# - WPF：刷新其他线程中的控件

> ID：14125137
> 
> 赞同：0
> 
> 时间：2013-01-02T16:02:16.470
> 
> 标签：c#, wpf, multithreading, invoke

我有一个简单的 WPF 应用程序，我在其中使用线程。例如，在新线程中，我得到 DateTime，我想将它返回到主线程中的 TextBox。我读到这样做我必须使用 ControlDispatcher.Invoke 方法。但是有什么不对。。

```
namespace Bizantyjskie
{
    public static class ControlExtensions
    {

        public static void InvokeIfRequired(this Control control, Action action)
        {
            if (System.Threading.Thread.CurrentThread != control.Dispatcher.Thread)
                control.Dispatcher.Invoke(action);
            else
                action();
        }
        public static void InvokeIfRequired<T>(this Control control, Action<T> action, T parameter)
        {
            if (System.Threading.Thread.CurrentThread != control.Dispatcher.Thread)
                control.Dispatcher.Invoke(action, parameter);
            else
                action(parameter);
        }
    }

    class watki
    {
        public watki(MainWindow mw)
        {
            _mw = mw;
        }
        public MainWindow _mw;

        public void dzialaj()
        {
            Thread watek1 = new Thread(new ThreadStart(w1));
            watek1.Start();
        }

        private void w1()
        {

            string godz = DateTime.Now.TimeOfDay.ToString();
            ControlExtensions.InvokeIfRequired((value) => _mw.tb_w1.Text = value, godz);
        }
      }
     } 
```

问题在于

> ControlExtensions.InvokeIfRequired((value) => _mw.tb_w1.Text = value, godz);

我有一个错误。

> 无法将 lambda 表达式转换为类型“System.Windows.Controls.Control”，因为它不是委托类型

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:13:31.843

您将扩展方法作为静态方法调用而忘记传递参数。将其更改为：

```
_mw.InvokeIfRequired(value => _mw.tb_w1.Text = value, godz); 
```

或者，如果您仍想将其作为静态方法调用：

```
ControlExtensions.InvokeIfRequired(_mw, 
    value => _mw.tb_w1.Text = value, godz); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:08:07.227

尝试这个

```
private void w1()
{
    string godz = DateTime.Now.TimeOfDay.ToString();
    ControlExtensions.InvokeIfRequired((value) => { _mw.tb_w1.Text = value; }, godz);
} 
```

因为我认为您的“价值”成员是传递给委托的参数，但如果不查看签名我无法确定`InvokeIfRequired`- 如果`object`您不需要演员表？

例如

```
ControlExtensions.InvokeIfRequired((value) => { _mw.tb_w1.Text = (string)value; }, godz); 
```

* * *

**编辑：**

抱歉，上面的签名都没看到！看起来您只是缺少 InvokeIfRequired 的通用参数：

```
ControlExtensions.InvokeIfRequired<string>((value) => { _mw.tb_w1.Text = value; }, godz); 
```

那应该工作:)

另一种方法是调用非泛型方法并在委托范围内捕获字符串变量：

```
ControlExtensions.InvokeIfRequired(() => { _mw.tb_w1.Text = godz; }); 
```

我认为这有点清洁

# pycharm - 如何在 PyCharm 中粘贴预定义的代码片段？

> ID：14125139
> 
> 赞同：8
> 
> 时间：2013-01-02T16:02:16.983
> 
> 标签：pycharm

有没有办法在 PyCharm 中定义片段，内置或通过插件？例如我想`self.`通过热键粘贴。现在我正在这样做`'se' + CTRL+ENTER`，但想为这种频繁的操作找到更有效的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T16:06:07.757

您可能正在寻找的是 PyCharm 的*实时模板*——尽管只是一些简短的东西`self.`——它们可能并不比打字快。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T16:12:56.170

您可以为此目的使用宏。编辑 | 宏 | 开始宏录制开始录制，然后设置 | Keymap 允许您将键盘快捷键分配给宏。

# mysql - 将列名作为一列的所有类似列相加，另一列中的总数

> ID：14125140
> 
> 赞同：1
> 
> 时间：2013-01-02T16:02:26.343
> 
> 标签：mysql, sql

我有一个表，其中包含一些类似于此的数据：

```
col1 | col2
-----------
val1    1
val1    5
val1    7
val2    3
val2    1
val2    4
val3    8 
```

我想要的是一个查询来产生这样的东西：

```
col1 | sum
----------
val1   13
val2   8
val3   8 
```

我试过用复杂的子查询来做这件事，但没有什么是完全成功的。我想我可能想多了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:04:28.660

您只需要使用`sum()`带有 a的聚合函数`group by`：

```
select col1, SUM(col2) total
from yourtable
group by col1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/c3442/2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T16:04:05.793

这应该是你所需要的。这将聚合`SUM`与`GROUP BY`.

```
SELECT col1, SUM(col2)
FROM unicorns
GROUP BY col1 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-02T16:04:08.900

```
select col1, sum(col2) as sum from table group by col1 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T16:05:24.230

```
 Select col1, Sum(col2) sum
  From table
  Group By col1 
```

# security - 在 EC2 中运行的其他服务所使用的在 Amazon 集群中运行的 Web 服务是否应该使用 HTTPS？

> ID：14125141
> 
> 赞同：1
> 
> 时间：2013-01-02T16:02:27.040
> 
> 标签：security, heroku, amazon-web-services, amazon-ec2

我正在开发一个 Web 服务：供其他 Heroku 应用程序使用的 Heroku 插件。提供服务的服务器和所有 Heroku 应用程序在 Amazon EC2 中运行。我的服务应该通过 HTTPS 提供还是不必要的过度杀伤？什么是常见的做法？

我担心 HTTPS 性能过热和更复杂的客户端代码（客户端需要管理密钥来验证服务身份）。中间人攻击似乎还需要破坏 Amazon 基础设施，这将提供许多其他方式来破坏服务，即使流量是加密的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:12:28.080

*   使用 HTTPS在现代硬件上[增加了不到 1%](http://ssl.entrust.net/blog/?p=455)的额外 CPU 开销。

*   中间人攻击不需要破坏亚马逊基础设施。它可以发生在客户端和服务器之间的任何地方。仅仅因为 AWS 的基础设施本身是安全的，并不意味着您在他们的云中预置的资源是安全的。

> 我的服务应该通过 HTTPS 提供还是不必要的过度杀伤？什么是常见的做法？

没有更多细节，很难推荐任何东西。您的 API 是返回随机猫图片还是存储医疗记录？SSL 正变得越来越普遍。如果您甚至正在考虑它，那么很有可能这是一个合理的想法。

# python - 如何遍历这本字典

> ID：14125142
> 
> 赞同：3
> 
> 时间：2013-01-02T16:02:27.040
> 
> 标签：python, dictionary, python-2.7, nested-lists

我正在使用一个 python 购物车，它将我的产品选项存储在一个字典列表中。当我记录选项对象以查看其结构时，它的存储方式如下：

```
[[{'option': <model.Option object at 0xfc6cd6b0>}, {'option': <model.Option object at 0xfc6cd7b0>}]] 
```

这是在 Google App Engine 上运行的，对于每个选择的选项，选项模型对象都存储在字典中。

我的意图是遍历此结构并保存`<model.Option object at 0xfc6cd6b0>`并保存`<model.Option object at 0xfc6cd7b0>`到数据存储区，但我无法弄清楚如何执行此操作。有人可以告诉我怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:05:01.120

它是一个嵌套列表。打开外部列表，然后遍历内部，取出`option`值：

```
for d in yourlst[0]:
    option = d['option']
    # do something with option 
```

您还可以将其组合到生成器表达式中：

```
for option in (d['option'] for d in yourlst[0]):
    # do something with option 
```

# spring - 使用 LOG4J 的 Spring 项目在 tomcat 中有效，但在 JBoss7 中无效

> ID：14125143
> 
> 赞同：1
> 
> 时间：2013-01-02T16:02:29.267
> 
> 标签：spring, jboss, log4j

我有一个使用 LOG4J 进行日志记录的 Spring Webflow 项目。该项目在 Tomcat 下工作，但一旦我将项目移动到 JBoss AS7。我没有得到任何日志文件或控制台的日志记录？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T00:04:02.697

您要么需要从部署中删除 log4j 依赖项，要么[排除](https://docs.jboss.org/author/display/AS71/How+To#HowTo-HowdoIuselog4j.propertiesorlog4j.xmlinsteadofusingtheloggingsubsystemconfiguration%3F)服务器 log4j 库并使用部署中打包的库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:18:45.087

[http://docs.jboss.org/process-guide/en/html/logging.html](http://docs.jboss.org/process-guide/en/html/logging.html)第 10.3 章在第一行说：

> **log4j**配置是**从**jboss 服务器**conf/log4j.xml** 文件加载的。

然后再往下有单独的章节

> 使用您自己的 log4j.xml 文件

10.3.3 后。我不能告诉你其中哪一个适用。

# ios - iOS：“单向”导航控制器的最佳实践？

> ID：14125145
> 
> 赞同：2
> 
> 时间：2013-01-02T16:02:32.230
> 
> 标签：ios, memory-management, uinavigationcontroller, uistoryboard

我正在开发一个应用程序，它本质上是一系列不同的测试（为简单起见，考虑 SAT 测试或 Mensa 测试）。每个测试都在不同的 View+View Controller 中实现。

最初我想使用 Storyboards 和 UINavigationControllers 来管理测试的顺序和它们之间的转换，但现在我质疑这种方法的有效性。UINavigationController 是一个堆栈，而我的导航是单向的（一旦你完成了测试，你就不能返回）。有没有更好的方法来实现该应用程序？我还能以某种方式利用故事板吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T16:30:50.003

我会使用自定义容器视图控制器。因此，在您的主要场景中，添加一个“容器视图”。如果您的目标是 iOS6，那么在编辑情节提要时会有一个特殊的“容器视图”对象，您现在可以将其拖到自定义容器视图控制器的场景中：

![容器视图](../Images/9ebe14ddd54e83e3dd01549c46d15526.png)

如果是 iOS 5，那么 (a) 您必须手动创建第一个子场景；(b) 给它一个唯一的故事板 ID（在我的示例中`InitialChild`，和 (c) 您手动实例化第一个子控制器并以编程方式将其添加为子控制器。因此，假设您在自定义容器视图控制器的场景中有一个`UIView`调用`containerView`，您可以有这样的方法：

```
- (void)addInitialChild
{
    UIViewController *child = [self.storyboard instantiateViewControllerWithIdentifier:@"InitialChild"];

    [self addChildViewController:child];
    child.view.frame = self.containerView.bounds;
    [self.containerView addSubview:child.view];
    [child didMoveToParentViewController:self];
} 
```

当您想过渡到下一个场景时，将您自己的子类化`UIStoryboardSegue`：

在 ReplaceSegue.h 中：

```
@interface ReplaceSegue : UIStoryboardSegue

@end 
```

在 ReplaceSegue.m

```
@implementation ReplaceSegue

- (void)perform
{
    UIViewController *source = self.sourceViewController;
    UIViewController *destination = self.destinationViewController;
    UIViewController *container = source.parentViewController;

    [container addChildViewController:destination];
    destination.view.frame = source.view.frame;
    [source willMoveToParentViewController:nil];

    [container transitionFromViewController:source
                           toViewController:destination
                                   duration:0.5
                                    options:UIViewAnimationOptionTransitionCrossDissolve
                                 animations:^{
                                 }
                                 completion:^(BOOL finished) {
                                     [source removeFromParentViewController];
                                     [destination didMoveToParentViewController:container];
                                 }];
}
@end 
```

然后，当从第一个包含的场景到下一个场景进行转场时，指定一个“自定义”转场，并使用这个“ReplaceSegue”作为类（只需单击转场将其选中，然后查看“属性检查器”） .

![在此处输入图像描述](../Images/c87a4fe25d46777a5e73805b34249287.png)

生成的故事板可能如下所示（注意`{}`各个子项之间的“ ”名称）：

![收容故事板](../Images/6851fac4e59b9a766f2df41270d885ca.png)

* * *

参考：

*   有关包含的一般讨论，请参阅*UIViewController 类参考*中的[实现视图容器控制器](http://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40006926-CH3-SW81)。

**   有关实现的一些详细信息，请参阅*iOS 视图控制器编程指南*中的[创建自定义容器视图控制器。](http://developer.apple.com/library/ios/featuredarticles/ViewControllerPGforiPhoneOS/CreatingCustomContainerViewControllers/CreatingCustomContainerViewControllers.html#//apple_ref/doc/uid/TP40007457-CH18-SW6)* 

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:16:19.340

然后只需加载下一个视图控制器并用新视图替换当前视图（在某些顶级视图或应用程序窗口中）。如果需要，请添加动画。有什么问题？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:18:37.267

您还可以使用视图动画来避免推送视图控制器。您可以像推送 VC 一样提供视图动画**

# javascript - 通过 javascript 点击事件更改 wordpress 主题

> ID：14125148
> 
> 赞同：0
> 
> 时间：2013-01-02T16:02:42.893
> 
> 标签：javascript, wordpress

嗨，是否有可能在单击网站上的按钮时，可以设置不同的主题？我的客户需要对每一页进行波兰语翻译，并希望手动完成翻译，而不是通过插件完成。所以我认为最简单的做法是在 header.php 等和页脚中使用不同文本的全新主题，并在 header.php 中调用不同的菜单，而不是使用波兰导航元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:08:07.177

我认为您应该使用翻译文件来帮助您更改文本，而不是为每种语言设置多个主题。

然后使用变量设置“当前语言”并包含正确的文件。

如果您有一个完全不同的主题，那么您将有 2 个主题需要维护。

我不确定您是否使用 jQuery，但我使用它并发现它非常有用： [http ://recursive-design.com/projects/jquery-i18n/](http://recursive-design.com/projects/jquery-i18n/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:33:10.543

多个主题并不太难。以下钩子允许覆盖当前主题：

```
function wp_14125148_set_template($theme) {
    if(<user has a specific theme>) $theme = "<user specific theme name here>";
    return $theme;
}

function wp_14125148_set_stylesheet($theme) {
    if(<user has a specific theme>) $theme = "<user specific theme name here>";
    return $theme;
}

add_filter( 'template', 'wp_14125148_set_template' );
add_filter( 'stylesheet', 'wp_14125148_set_stylesheet' ); 
```

棘手的部分是检测应该为用户提供什么主题。执行此操作的常用方法是使用主题选择器存储带有主题选择的 cookie，然后重新加载当前页面。具有上述选择器代码的插件应检查 cookie 并使用指定的主题 - 如果没有 cookie，则不执行任何操作。

这是在 Wordpress 中使用 cookie 的法典条目：http: [//codex.wordpress.org/WordPress_Cookies](http://codex.wordpress.org/WordPress_Cookies)

# android - 当我扫描 nfc 标签时，我的 android 应用程序不是默认应用程序之一

> ID：14125149
> 
> 赞同：1
> 
> 时间：2013-01-02T16:02:46.483
> 
> 标签：android, nfc

我的意图过滤器有问题。

我想编写一个可以读取 android 可用的所有 nfc 标签的应用程序，但我不明白为什么当我扫描标签时系统看不到我的应用程序...确实，系统为我提供了启动的可能性我安装的其他应用程序，但不是我的应用程序。

这是我的 manifest.xml ：

```
<uses-permission android:name="android.permission.NFC" />

<uses-feature
    android:name="android.hardware.nfc"
    android:required="true" />
<application 
...
   <activity
        android:name=".read.ReadActivity"
        android:label="NfcSamples" 
        android:launchMode="singleTask">
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.nfc.action.TECH_DISCOVERED" />
        </intent-filter>
        <meta-data
            android:name="android.nfc.action.TECH_DISCOVERED"
            android:resource="@xml/filter_nfc" />
        <intent-filter>
            <action android:name="android.nfc.action.TAG_DISCOVERED" />

        </intent-filter>
    </activity>
</application> 
```

我确切地说我不想发布具体标签，而是阅读所有可用的标签。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:41:13.577

这是我读/写/验证 Mifare Classic/Ultralight/Desfire/DesfireEV1 标签的项目的 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="nfcapp.app"
  android:versionCode="1"
  android:versionName="1.0">
<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.NFC"></uses-permission>

<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name="nfcapp.app.NFCAppActivity"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>

        <!-- Handle notes detected from outside our application -->
        <intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />
            <category android:name="android.intent.category.DEFAULT" />
            <data android:mimeType="text/plain" />
        </intent-filter>
        <intent-filter>
            <action android:name="android.nfc.action.TAG_DISCOVERED" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

</application> 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T09:06:34.227

你想做的事，根本不可能。Android 使用匹配的最具体的意图过滤器启动应用程序。因此，一般来说，通常会有一个应用程序具有匹配的更具体的意图过滤器（例如完整的 URL），因此将启动该应用程序而不是您的应用程序。

# google-app-engine - 通过 Ant 重置本地 AppEngine 数据存储（在 devserver 运行时）

> ID：14125151
> 
> 赞同：0
> 
> 时间：2013-01-02T16:02:52.013
> 
> 标签：google-app-engine

我们有一套在 CI 环境中针对本地 AppEngine 开发服务器运行的 UI 测试。我们在每个测试中执行的第一步是清除本地数据存储并使用已知数据对其进行重置。我们通过 java servlet 在代码中执行此操作。

我们遇到了从 AppEngine 1.6.4 开始的问题（[在此处](http://code.google.com/p/googleappengine/issues/detail?id=7282)概述）。随着测试的进行，数据设置步骤需要的时间越来越长。前几次测试从大约 10 秒开始，到最后，每个测试需要一分钟。

所以我正在寻找替代方法来为我们的 UI 测试设置和删除数据。例如，我可以保留一个 local_db.bin 文件并在每次测试之前“分离/附加”它吗？[我怀疑没有](https://stackoverflow.com/questions/4552101/how-do-i-add-some-test-data-to-appengine-local-datastore-file)，至少在开发服务器仍在运行时不会。而且我认为在每次测试之前停止并重新启动开发服务器是不可行的。

那么还有其他想法吗？

# ajax - 使用 Ajax 从 elasticsearch 过滤结果时遇到问题

> ID：14125154
> 
> 赞同：0
> 
> 时间：2013-01-02T16:02:59.457
> 
> 标签：ajax, elasticsearch, amplifyjs

我正在使用 Amplify 对 elasticsearch 进行 Ajax 调用，但是在过滤结果时遇到问题。由于我将所有内容都作为 URL 传递，因此我不确定如何格式化它。当我通过 firstName:John 作为 searchCriteria 时，以下返回 4 个结果。

```
self.url = "http://leServer:lePort/people/person/_search?q=" + self.searchCriteria; 
```

如果我有 firstName:John&lastName:Smith，它会返回 6 个结果，因为有 2 个 smith 记录的名字不是 John。

如果我从命令提示符运行以下命令，我会得到一个预期的结果。

```
curl -XGET "http://leServer:lePort/people/person/_search?pretty=true" -d "{
  \"query\": {
    \"filtered\": {
      \"query\": {
        \"text\": {
          \"firstName\": \"John\"
        }
      },
      \"filter\": {
        \"query\": {
          \"text\": {
            \"lastName\": \"Smith\"
          }
        }
      }
    }
  }
}" 
```

我尝试使用以下作为我的 Ajax 调用，但它不返回任何内容。我还尝试`\"`了 curl 请求所具有的。

```
self.url = "http://leServer:lePort/people/person/_search?" +"-d"+"{query:{filtered:{query:{text:{firstName:John}},filter:{query:{text:{lastName:Smith}}}}}}" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:21:53.860

查询应该是 url 编码的`+firstName:John +lastName:Smith`。顺便说一句，将您的弹性搜索服务器暴露给外界可能是个坏主意。

# prolog - PROLOG 中输入了错误的查询？

> ID：14125156
> 
> 赞同：1
> 
> 时间：2013-01-02T16:03:06.193
> 
> 标签：prolog

快速提问。

每当我在 Prolog 查询中出错（编译部分）

即我尝试运行一个文件，但我忘记在末尾添加一个点”

```
1 ?- [lecture1]
|    
|    
| 
```

每当我按回车键（或输入任何内容然后按回车键）时，我都会不断收到这些

```
| 
```

我到底怎么才能摆脱这个并进入

```
2 ?- 
```

我在 Prolog 相当新，这开始让我有点恼火（我重新启动 Prolog 以摆脱这个！）。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:07:33.890

添加一个点：

```
?- [lecture1]
|    
|    
|    
|   . 
% lecture1 compiled 0.00 sec, 1 clauses
true. 
```

这个想法是您可以在多行中编写查询。

如果你想完全取消它，你也可以按`Ctl-D`和 然后中止（你也可以在它运行时这样做）`a`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:07:40.367

这只是顶层的视觉效果。当您在查询中间按回车键时，输入保持原样，因此，如果您已写入`[lecture1]`然后输入，您只需添加缺失的点即可。

在您的示例中，您只需按`.`然后`<enter>`, 即可加载文件。

一般来说，按下`.`然后`<enter>`将执行目标或只是得到序言系统的抱怨，然后你又可以自由地执行任何目标......

# gstreamer - GStreamer-CRITICAL **：gst_debug_log_valist：断言“类别！= NULL”失败？

> ID：14125157
> 
> 赞同：3
> 
> 时间：2013-01-02T16:03:11.683
> 
> 标签：gstreamer, vala

我该如何追查此错误消息的根本原因？

> （测试：1090）：GStreamer-CRITICAL **：gst_debug_log_valist：断言“类别！= NULL”失败

我`--gst-debug=GST_REFCOUNTING:5`用来调试代码中可能需要 10 多个小时才能重现的间歇性问题。即使有 gst-debug 错误消息，管道似乎也能正常工作。我应该担心 GStreamer-CRITICAL 错误消息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T09:52:36.163

我通常做的是在 gdb 中使用 G_DEBUG=fatal-criticals 环境变量（请参阅 GLib 手册的[运行 GLib 应用程序](http://developer.gnome.org/glib/stable/glib-running.html)部分）在 gdb 中运行程序，并[使用 gdb 获取回溯](https://wiki.gnome.org/Community/GettingInTouch/Bugzilla/GettingTraces/Details#Obtaining_a_stack_trace_using_GDB)......类似于

```
G_DEBUG=fatal-criticals gdb -ex run --args ./test arg1 arg2 ... 
```

如果您不想在 gdb 中实际运行该程序，您可以[改用核心转储](https://wiki.gnome.org/Community/GettingInTouch/Bugzilla/GettingTraces/Details#Obtaining_a_stack_trace_from_a_core_dump)。

一旦你得到跟踪，你应该能够相当容易地找到有问题的代码。该消息可能是无害的和/或 GStreamer 内部的问题，但如果我是您，我至少会检查一下……这样的批评通常表明存在严重问题，例如等待发生的段错误。

请注意，该消息中的 1090 可能指的是[PID](https://en.wikipedia.org/wiki/Process_identifier)，而不是生成的 C 中的行号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T09:44:53.663

看起来这条消息试图告诉您代码中某处的 gstreamer 日志消息只是缺少一个类别（如 GST_REFCOUNTING 或 ）。由于您只想查看有关 GST_REFCOUNTING 消息的日志消息，因此 gstreamer 无法确定此特定消息是否重要。除非您编写了自己的插件或自己调用了一些[日志记录功能](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/pwg/html/section-checklist-debug.html)，否则我猜这很可能是 gstreamer 本身或其插件之一的问题。

但除了分类错误的日志消息之外，它不应该引起任何麻烦

# java - 使用 JBoss、Spring 和 Maven 的 Hibernate Envers - 不写入审计记录

> ID：14125163
> 
> 赞同：0
> 
> 时间：2013-01-02T16:03:26.863
> 
> 标签：java, spring, hibernate, jboss, hibernate-envers

我正在尝试结合 Spring、JBoss 和 Maven 来实现 Hibernate Envers。

我有以下内容：

*   spring.version: 3.1.0.RELEASE
*   hibernate.version：3.5.0-Final
*   log4j.版本：1.2.14
*   jboss-as-7.1.1.Final
*   mysql数据库

在 pom.xml 中，我添加了所需的 hibernate-envers：

```
 <dependency>    
        <groupId>org.hibernate</groupId>    
        <artifactId>hibernate-envers</artifactId>    
        <version>${hibernate.version}</version>
    </dependency> 
```

在我的 Hibernate 持久性类中，我正在导入以下内容

```
import org.hibernate.envers.Audited; 
```

所以看起来像

```
@Entity
@Indexed
@Audited 
@Table(name = "COM_TEST")
public class MyTest extends AbstractReferenceDataObject { ... 
```

我确保有一个带有相关数据库列的 COM_TEST_AUD 数据库表以及一个 REVINFO 数据库表。

当我运行我的代码时，它使用现有的休眠实现来更新 COM_TEST 中的记录。但是没有任何内容写入 COM_TEST_AUD 或 REVINFO db 表。

我的 persistence.xml 中有以下属性

```
 <properties>
        <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLInnoDBDialect"/>
        <property name="hibernate.connection.autocommit" value="true" />
        <property name="hibernate.hbm2ddl.auto" value="validate"/>
        <property name="hibernate.show_sql" value="false"/>
        <property name="hibernate.cache.use_second_level_cache" value="true"/>
        <property name="hibernate.cache.provider_class" value="net.sf.ehcache.hibernate.SingletonEhCacheProvider"/>
        <property name="hibernate.search.default.directory_provider" value="org.hibernate.search.store.FSDirectoryProvider"/>
        <property name="hibernate.search.default.indexBase" value="./lucene/indexes"/>
        <property name="hibernate.search.default.batch.merge_factor" value="10"/>
        <property name="hibernate.search.default.batch.max_buffered_docs" value="10"/>
    </properties> 
```

我已经尝试了几乎所有我能想到的东西。我可以看到当我启动 JBoss 时，它确实说明了它是如何需要和优化 COM_TEST_AUD 和 REVINFO，所以看起来是这样的。

我只是无法弄清楚为什么它不会写入数据库。日志文件中没有写入任何内容，我将日志记录设置为：

```
 <logger category="org.hibernate">
            <level name="DEBUG"/>
        </logger> 
```

我注意到在下面的 JBoss 模块目录中，它使用了 hibernate-envers-4.0.1.Final.jar：

```
jboss-as-7.1.1.Final\modules\org\hibernate\envers\main 
```

我已将我的项目 pom.xml 更改为 4.0.1.Final 而不是 3.5.0-Final，但这并没有什么不同

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:59:29.667

由于您使用的是 Hibernate 3.x，因此您需要在 中配置适当的 EventListeners `persistence.xml`，如 Envers 文档的[Quickstart](https://docs.jboss.org/hibernate/envers/3.6/reference/en-US/html/quickstart.html)部分所述：

```
<property name="hibernate.ejb.event.post-insert"
         value="org.hibernate.ejb.event.EJB3PostInsertEventListener,org.hibernate.envers.event.AuditEventListener" />
<property name="hibernate.ejb.event.post-update"
         value="org.hibernate.ejb.event.EJB3PostUpdateEventListener,org.hibernate.envers.event.AuditEventListener" />
<property name="hibernate.ejb.event.post-delete"
         value="org.hibernate.ejb.event.EJB3PostDeleteEventListener,org.hibernate.envers.event.AuditEventListener" />
<property name="hibernate.ejb.event.pre-collection-update"
         value="org.hibernate.envers.event.AuditEventListener" />
<property name="hibernate.ejb.event.pre-collection-remove"
         value="org.hibernate.envers.event.AuditEventListener" />
<property name="hibernate.ejb.event.post-collection-recreate"
         value="org.hibernate.envers.event.AuditEventListener" /> 
```

注意：您没有声明您正在通过 JPA 使用 Hibernate，但由于您提到 a `persistence.xml`，您似乎正在使用 JPA。如果现在是这种情况，则配置会有些不同，如您在文档中所见。

如果您使用的是 Hibernate 4.x，则[不需要此配置](https://docs.jboss.org/hibernate/core/4.1/devguide/en-US/html/ch15.html#d5e3889)

# php - 在 MySQL 中存储用户设置的最佳方式？

> ID：14125166
> 
> 赞同：16
> 
> 时间：2013-01-02T16:03:35.493
> 
> 标签：php, mysql

我只是想知道为我的 Web 应用程序存储用户特定设置的最佳方式是什么？只是用户可能有的偏好。我想到了两个选择：

1.  **用户表**- 我将为我的用户准备一个表。创建一个名为“preferences”的列并将序列化数据存储在 key => value 对中

2.  **设置表**- 有一个名为 settings 的单独表，其中包含 user_id 列。以同样的方式保存设置

任何输入将不胜感激。谢谢 ：）！

--

编辑：只是补充一点，如果我没有序列化/json 或任何要放入数据的数据，我必须为每个设置都有一个列。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-02T16:21:40.747

对于*始终*为*每个*`Users`用户设置的任何内容，您应该按照通常的规范化将其保留在表中。至于可选配置，我倾向于喜欢下面的表结构：

```
TABLE Users:
  id INT AI
  name VARCHAR
  ...

TABLE User_Settings
  user_id INT PK,FK
  name VARCHAR PK
  type BOOL
  value_int INT NULL
  value_str VARCHAR NULL 
```

Where`User_Settings.type`指定是否应该引用整数或字符串字段。

IE：

```
INSERT INTO Users (id, name) VALUES (1, 'Sammitch');
INSERT INTO User_Settings (user_id, name, type, value_int) VALUES (1, 'level', 1, 75);
INSERT INTO User_Settings (user_id, name, type, value_str) VALUES (1, 'lang', 0, 'en'); 
```

对于插入/更新问题：

```
INSERT INTO User_Settings (user_id, name, type, value_str) VALUES (1, 'lang', 0, 'fr')
  ON DUPLICATE KEY UPDATE value_str='fr'; 
```

此外，正如大多数其他人所说，序列化和存储首选项并不是一个特别好的主意，因为：

1.  您无法通过查询检索单个值，您必须检索整个序列化字符串，对其进行反序列化并丢弃不必要的数据。
2.  它很容易损坏，并且很难从中恢复。
3.  编写原始查询是一件很痛苦的事，即：全局修复某个设置。
4.  您将本质上是表格数据的内容存储在单个表字段中。

## 2016 年 9 月回顾编辑：

在此期间，我与人们就如何最好地存储可选设置以及上面定义的通用表结构进行了一些争论。

虽然该表结构不是完全*坏*的，但也不是*很好*。它试图充分利用糟糕的情况。只要您可以适应这些设置，可选设置的序列化就可以工作：

1.  一次性加载所有内容，无需挑选或选择。
2.  不可索引，不可搜索或易于*修改*。

然后，您可能会考虑`optional_settings`在`Users`包含设置的序列化 [例如：JSON] 形式的表中添加一个字段。您确实权衡了上述内容，但这是一种更直接的方法，您可以存储更复杂的设置。

此外，如果您使用像`TEXT`存储这样的 LOB 类型，则数据不一定存储在“行中”，至少在 MySQL 中。

无论如何，由*您*决定您的应用程序的要求和约束是什么，并根据这些信息做出最佳选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T16:08:03.330

这完全取决于数据库的设置和架构。无论您做什么，我都建议您不要按照您的建议 1 序列化数据，如果您序列化数据，您将无法再针对它编写查询，并且您需要使用与序列化它的语言相同的语言来反序列化它（或编写类似的东西）那种语言）。

我推荐的选项是将设置放在 users 表中，每列 1 个设置。这样做的缺点是当您向应用程序添加新设置时，您必须编写一些 DDL 脚本来添加新列。这样做的一个（非常好的）优点是每个设置都可以有自己的数据类型。如果此设置是可选的，这也会产生存储损失。

正如您所建议的，另一个选项可能是使用设置表，主键为 (user_id, setting_name)，第三列设置值。此解决方案假定所有设置都具有相同的数据类型。您无需编写 DDL 脚本来添加新设置，只需使用新的键名即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T16:07:42.060

这总是同一个问题：您需要多久更改一次这些数据？在我看来，拥有一个单独的表总是一个很好的解决方案，因为它分隔了应用程序的不同方面。

恕我直言，拥有`preferences`列不是一个好主意，因为每当您的用户更改其设置时，您都必须序列化他的所有数据以将它们存储在`users`表中，无论它只是`update`一个单独的。如果您真的想将所有内容存储在 中`users`，则应将设置划分为不同的列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T16:06:42.920

第二个选项，但通过单独存储设置进行了修改。不要在字段中存储序列化数据，因为在这种情况下是不好的做法。

想一想：您拥有它，并且将用户所在的国家/地区存储在那里，或者它是否已注册到您的时事通讯中。稍后..您需要知道有多少人来自俄罗斯。你做什么工作？把它们一一解码并增加一个计数器？（或者使用你的第二种方法，只运行一个简单的 SELECT COUNT(id) 查询？）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T16:07:04.233

我会使用设置表，因为它可以让以后更容易访问。当您尝试在单个列中创建名称值对等操作时，您可能会在稍后尝试执行设计查询以访问数据时遇到问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T16:14:00.423

这可能不适合您当前的情况，但 NoSQL 数据库（如 Mongo）非常适合此情况。例如，这是一个 mongo 数据库，每个用户对象实际上可以具有不同的属性，您仍然可以搜索它们。

也就是说，对于您所处的情况，过去我一直遵循这里的其他答案的建议，并有一个单独的表格。这可以通过两种方式完成，有一个单独的表，您可以更方便地修改其中的列，然后加入它。或者，一个更简单的解决方案，有一个单独的表，例如，

用户、参数、值。

然后每个用户可以有不同的额外价值。

最佳方法取决于您所需的性能等。

# wpf - 窗口状态静态窗口

> ID：14125171
> 
> 赞同：0
> 
> 时间：2013-01-02T16:04:09.483
> 
> 标签：wpf, static, windowstate

我的主窗口中有一个静态函数，其中有一个托盘图标。我想从该主窗口中的子窗口调用该函数...

因为我想给它一些值来引发一个文本气球。

现在我遇到了无法提高 WindowState = WindowState.Maximized 的问题，因为它是一个静态函数......

如何解决？我正在使用 WPF

```
 private static void notifier_MouseDown(object sender, Forms.MouseEventArgs e)
    {

        ContextMenu menu = new ContextMenu();

        MenuItem open = new MenuItem();
        open.Header = "Open";
        menu.Items.Add(open);

        MenuItem exit = new MenuItem();
        open.Header = "Exit";
        menu.Items.Add(exit);

        if (e.Button == Forms.MouseButtons.Right)
        {
            menu.IsOpen = true;
        }
        if (e.Button == Forms.MouseButtons.Left) {
            menu.IsOpen = false;

            WindowState = WindowState.Maximized;
            Topmost = true;

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:07:01.720

这正是`static`没有的意思。

如果你需要访问或修改类实例，你需要做一个非`static`方法。

# python - 如何使用没有孔的 TimeSeries 索引带有“孔”的 DataFrame

> ID：14125172
> 
> 赞同：1
> 
> 时间：2013-01-02T16:04:22.190
> 
> 标签：python, pandas, time-series

我有一个按日期索引的 DataFrame，如下所示：

```
<class 'pandas.core.frame.DataFrame'>
DatetimeIndex: 1853141 entries, 2012-03-01 00:00:00 to 2012-06-16 23:59:55
Data columns:
Open Bid ESM2    1853141  non-null values
Open Ask ESM2    1853141  non-null values
dtypes: float64(2) 
```

该索引的周期为 5 秒，带有一些“漏洞”，因此我创建了一个具有相同日期范围和没有漏洞的时间段的 TimeSeries：

```
<class 'pandas.tseries.index.DatetimeIndex'>
[2012-03-01 00:00:00, ..., 2012-06-16 23:59:55]
Length: 1866240, Freq: 5S, Timezone: None 
```

现在我想使用这个时间序列作为上面 DataFrame 的索引，其中孔列为 NaN。我怎样才能做到这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:19:22.387

您可以使用该[`reindex()`](http://pandas.pydata.org/pandas-docs/dev/generated/pandas.DataFrame.reindex.html#pandas.DataFrame.reindex)方法并传递您创建的填充索引。
默认`fill_value`是`NaN`

```
In [1]: ix1 = [0, 1, 2, 3, 4, 9]

In [2]: ix1
Out[2]: [0, 1, 2, 3, 4, 9]

In [3]: ix2 = range(10)

In [4]: ix2
Out[4]: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

In [5]: s = Series(ix1, index=ix1)

In [6]: s
Out[6]:
0    0
1    1
2    2
3    3
4    4
9    9

In [7]: s.reindex(ix2)
Out[7]:
0     0
1     1
2     2
3     3
4     4
5   NaN
6   NaN
7   NaN
8   NaN
9     9

In [8]: Series.reindex()?

Docstring:
Conform Series to new index with optional filling logic, placing
NA/NaN in locations having no value in the previous index. A new object
is produced unless the new index is equivalent to the current one and
copy=False 
```

# javascript - 更改 DataTables 的页脚

> ID：14125174
> 
> 赞同：1
> 
> 时间：2013-01-02T16:04:30.360
> 
> 标签：javascript, datatables

我正在尝试将 dataTables 的页脚更改为自定义的页脚。而不是`"Showing x to y of z entries."`我希望它显示`"Showing x to y of (my own value) entries."`DataTables 基于表中的行数的条目计数，但我希望它显示数据库中的条目计数。

```
 $('#' + table_name).dataTable({
      "oLanguage": {
        "sInfo": "Showing blah to blah of my_own_number entries."
      }
    }); 
```

虽然，我收到了这个错误：

`Uncaught TypeError: Cannot set property 'aaSorting' of null`

我没有在消息中使用任何变量，而是暂时尝试将消息更改为“hello new footer”之类的内容。而不是“显示...条目”，但即使使用这样的简单消息也会导致相同的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:07:44.277

尝试以下操作：

```
"sInfo": "Showing _START_ to _END_ of " + my_own_number + " entries." 
```

# heroku - 设置 Heroku 和 GoDaddy？

> ID：14125175
> 
> 赞同：109
> 
> 时间：2013-01-02T16:04:30.920
> 
> 标签：heroku, dns

我正在尝试获取通过 G​​oDaddy 购买的域名，以便与我的 Heroku 托管网站一起使用。

如何配置我的域名以使用 Heroku？

* * *

## 回答 #1

> 赞同：303
> 
> 时间：2013-01-03T16:49:09.997

**[2014 年 10 月 31 日更新]**好的！有用！这是我从头开始的方法，因此其他有相同问题的人也可以解决它。首先我将解释如何设置 Heroku 和 GoDaddy，然后我将解释如何创建一个裸域（www.example.com -> example.com）。

**设置 Heroku 和 GoDaddy：**

1.  在终端（在您的计算机上）的项目文件夹中写入`heroku domains:add www.example.com`（`www.example.com`您在 GoDaddy 购买的域在哪里）

2.  登录 GoDaddy -> 域 -> 选择您的域 -> 启动（这将带您进入域详细信息）

3.  单击“DNS 区域文件”选项卡

4.  删除名为“www”的 CNAME 记录（指向 @）

5.  单击“添加记录”-> CNAME（别名）->“主机”应该是`www`，“指向”应该是您的 Heroku 地址（示例 `supermoo-bil-3411.herokuapp.com`）。TTL 可以是 1 小时。

DNS 传播可能需要一些时间。对我来说大约花了 10 分钟。

就是这样！`supermoo-bil-3411.herokuapp.com`现在将在`www.example.com`:)

**创建裸域：**

裸域无需在域名前写 www。这可以通过转发`example.com`到来完成`www.example.com`。这在 GoDaddy 上非常简单：

1.  在与上述相同的窗口中，单击“设置”选项卡

2.  在转发 -> 域 -> 点击“管理” -> 然后点击“添加转发”

3.  “转发到”应该是`www.example.com`（您的域），“重定向类型”应该是“301（永久）”，“转发设置”应该是“仅转发”

4.  确保选中“更新我的名称服务器和 DNS 设置以支持此更改。（推荐）”

    就是这样！你完成了:)

**有用的链接：**

*   [https://devcenter.heroku.com/articles/custom-domains](https://devcenter.heroku.com/articles/custom-domains)

感谢 Ryan Kazinec 的帮助 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:22:11.847

DNS 设置往往有滞后时间。

您是否尝试过从其他设备访问该应用程序？（比如说在另一个网络上运行的智能手机？）我曾多次看到我的本地 dns 缓存导致问题，这就是为什么从另一台设备访问它可能会对您的情况有所了解。

如果您从基于 Windows 的 PC 进行 dns 更改，您可以刷新您的 dns 缓存，这有时可以解决您的问题。

1.) 右键单击​​ CMD.exe（又名命令提示符） 2.) 单击以管理员身份运行。3.) 输入：ipconfig /flushdns 4.) 按 Enter 键

但请记住，dns 更改可能需要一段时间才能传播。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:03:04.900

转到[https://dnsimple.com/r/ecc41c23013629](https://dnsimple.com/r/ecc41c23013629)并开设一个帐户。

他们为 heroku 设置了一键式设置，您可以将 TTL 设置为低至一分钟。然后在 GoDaddy 方面，只需将 dns 服务器从 go daddy 服务器更改为 dnsimple （所有在 dnsimple 站点上进行了解释）。简单的 ;）

您的域名仍由 GoDaddy 托管

在我看来，GoDaddy 不是管理您的 dns 的地方。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-17T10:15:23.827

使用 Heroku 设置外部域的最简单方法之一是使用此插件：[https](https://addons.heroku.com/zerigo_dns) ://addons.heroku.com/zerigo_dns - 您只需将 dns 名称服务器指向

```
a.ns.zerigo.net
b.ns.zerigo.net
c.ns.zerigo.net
d.ns.zerigo.net
e.ns.zerigo.net 
```

我不隶属于 Zerigo DNS - 只是一个快乐的用户。是的，每月 50,000 次查询是免费的，每月只需 20 美元，您就可以获得无限制的查询。

希望这可以帮助。

# javascript - 图像上的 .fadeOut() 似乎没有执行

> ID：14125176
> 
> 赞同：0
> 
> 时间：2013-01-02T16:04:51.750
> 
> 标签：javascript, jquery

我有一个输入文本框。在用户打字空闲后，我希望它提交表单（在下面的代码中工作）和一个复选标记的图像以弹出然后淡出。我只是想测试淡出功能，所以 img 是可见的，但我似乎无法让它工作。

```
var timer = null;
$('.form_timer').keyup(function()
{
    if (timer) {
        clearTimeout(timer);
    }

    var test = $(this);
    timer = setTimeout(function() {
        test.next('img').fadeOut('slow');
        test.closest('form').submit();

    }, 700);
}); 
```

:EDIT#1 标记

```
<div class="accordion">
    <div class="group">
        <form accept-charset="UTF-8" action="/tasks/2" class="simple_form edit_task" data-remote="true" id="edit_task_2" method="post" novalidate="novalidate"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="put" /><input name="authenticity_token" type="hidden" value="Fil9PitLB6ZhHtWwBOehbOBkq2yE6qikN5cU0zr4wRQ=" /></div>
            <h3><div class="input string optional"><label class="string optional control-label" for="name_2">Task Name</label><input class="string optional form_timer" id="name_2" name="task[name]" placeholder="New Task" size="50" type="text" value="somethingdd" /></div></h3>
            <div>
                <div class="input string optional" style="display: inline"><label class="string optional control-label" for="description_2">Description</label><input class="string optional form_timer" id="description_2" name="task[description]" size="50" type="text" value="blah123asdfgokkkkkasddadsdd" /></div><img alt="checkmark" class="form_checkmark" height="20px" src="/assets/checkmark.jpg" width="20px" />
            </div>
        </form>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:55:43.007

有了这个标记

```
<form method="get">
    <textarea class="form_timer">type in here</textarea>
    <img src="" width="200" height="150" style="display:block;background:#0c0;"/>
</form>​ 
```

你的代码工作正常。在这里自己测试[http://jsfiddle.net/bukfixart/AvsUH/](http://jsfiddle.net/bukfixart/AvsUH/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:38:56.800

更新了我的代码以使用父级然后下一个。似乎 .next 的工作方式与我预期的不同。我仍然不喜欢将其作为解决方案，因为文本字段可能在 div 等中深两层...

```
var timer = null;
$('.form_timer').keyup(function()
{
    if (timer) {
        clearTimeout(timer);
    }

    var test = $(this);
    timer = setTimeout(function() {
        test.parent().next('.form_checkmark').fadeOut('slow');
        test.closest('form').submit();

    }, 700);
}); 
```

EDIT#1 做了更多的挖掘看起来我想要的没有一个简单的解决方案。在我知道我在寻找什么之后，找到了其他人发布的解决方案。[在这里](https://stackoverflow.com/questions/12873027)找到

# c++ - 基本 cURL c++ 安装

> ID：14125177
> 
> 赞同：0
> 
> 时间：2013-01-02T16:04:53.093
> 
> 标签：c++, curl, installation, libcurl

害怕因为简单而被嘲笑，我冒昧地问你一个问题：

我必须下载什么以及在我的项目中包含什么才能使用 cURL 库？我尝试了不同的事情，但都导致了无法解决的外部问题，这意味着我把它包括错了，我猜。

整个安装过程的解释会很棒！我不太确定要使用哪些文件以及将它们放在哪里。我正在使用视觉工作室 2012。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T10:11:22.057

好的，我正在为您的工作使用 Visual Studio (2008)，但我会尽我所能回答。我假设您已经使用 .sln 文件构建了 libcurl，或者正在使用一组预构建的二进制文件。

首先在项目向导中构建一个解决方案并在其中获取一个项目。右键单击项目并选择属性

在属性中转到 C++ 常规选项卡，添加 curl 的包含目录。现在转到链接器常规选项卡并将 lib 目录（包含构建的 dll 和 obj 文件）放在其他库目录中。现在转到输入选项并输入 libcurl_imp.lib 或 libcurldll.a（取决于您的版本和编译方法）。这些名称可以不同并取决于您的构建，但扩展将属于这两种类型。这是您犯错的链接器步骤。

在此编译并运行之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:10:10.060

您需要在构建的链接阶段链接库。项目属性中有一个用于附加库依赖项的选项 - 在`.lib`此处添加 curl 附带的文件。仅在源代码中包含文件不足以使用库。

# scala - 为什么使用 scala repl 而不是工作表？

> ID：14125184
> 
> 赞同：4
> 
> 时间：2013-01-02T16:05:14.540
> 
> 标签：scala, ide, read-eval-print-loop

为什么使用 scala repl 而不是 scala 工作表？

工作表像 repl 一样逐行评估表达式，并提供了一个不错的 GUI。

使用 scala repl 而不是 worksheet 有什么好处吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T17:18:36.223

Where there's Scala there's REPL. The worksheet is currently only available in Scala IDE and the early access and nightly's of Idea.

REPL is fast and can also be invoked from inside an SBT session by typing `console`

# html - 为什么密码字段通常不会在 $_POST 中自动填充？

> ID：14125187
> 
> 赞同：0
> 
> 时间：2013-01-02T16:05:31.453
> 
> 标签：html, forms, security, post

在许多不使用 AJAX 的网站中，注册表单通常会在尝试失败时填写所有输入数据，但通常情况下，密码字段必须由用户重新填写。

我的问题是，为什么 Web 开发人员会选择这样做？我的第一个想法是，他们试图防止恶意脚本在页面加载时窃取密码，但是，他们可以使用`onKeyUp`.

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:22:48.080

浏览器具有专门用于密码的功能，**只有**在用户明确允许浏览器保存时才会保存。大多数浏览器*会*询问“您要存储密码吗？”

当用户不在他/她的机器上时，您可以进一步保留主密码以保护保存的密码。

IMO，我认为保存密码并没有错，因为我让浏览器保存我的密码，我通常倾向于使用**更**强大的密码，因为我倾向于使用自动生成的密码，这些密码通常很难记住。此外，它还可以帮助我避免对多个网站使用单一的密码变体。

无论您是否保存密码，您都可以通过多种方式嗅探密码。网站通常有密码恢复功能，如果密码泄露，它会链接到我的手机。

因此，网站*应* 允许用户将密码保存在浏览器中，这将责任推给用户，由他/她决定如何使用密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:08:10.140

因为要自动填充字段，如果您查看标记，您会看到类似这样`<input type="password" value="YOURPASSWORDHERE" />`的内容，对于安全性来说并不是那么好。在 XSS 方面，获取标记比监视 JS 事件更容易，因为我可以请求页面比使用 JS 操作 DOM 更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:20:58.143

这与脚本无关，网站需要信任在其上下文中运行的脚本。

浏览器经常缓存页面标记。您可能不希望将密码保存在缓存中。

# java - 带有适配器的 Android 可拖动 GridView

> ID：14125188
> 
> 赞同：2
> 
> 时间：2013-01-02T16:05:55.107
> 
> 标签：java, android, gridview, drag-and-drop, adapter

我正在寻找允许支持适配器的项目拖放（用于重新排序）的 GridView 的实现（视图由适配器实现提供）。有什么建议吗？

# javascript - 如何从所选选项中获取文本？

> ID：14125189
> 
> 赞同：-2
> 
> 时间：2013-01-02T16:05:56.833
> 
> 标签：javascript, jquery

```
string x = "<select><option value='2'>dfgdfh</option><option value='3'>cvncvn</option><option value='4'>cvn</option><option value='5'>dhdfh</option><option value='6'>dfhdfh</option><option selected="selected" value='7'>dfhdfh</option><option value='8'>dfgfdh</option><option value='12'>New type</option></select>" 
```

如何从所选选项中获取文本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T16:11:18.740

修复字符串中的语法错误后... :)

```
$(x).find("option:selected").text() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T16:08:31.623

$(body).append(x);

$("选择选项：选择").text();

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:10:42.640

```
 <select id ="someid">
        <option value='2'>dfgdfh</option>
        <option value='3'>cvncvn</option>
        <option value='4'>cvn</option>
        <option value='5'>dhdfh</option>
        <option value='6'>dfhdfh</option>
        <option selected="selected" value='7'>dfhdfh</option>
        <option value='8'>dfgfdh</option>
        <option value='12'>New type</option>
    </select> 
```

// string x = $("#someid option[value='2']").text()

```
string x = $('#someid option:selected').text() 
```

我认为这样的事情可能会有所帮助。

# salesforce - “订阅者”选项卡不显示客户版本 (LMA)

> ID：14125190
> 
> 赞同：1
> 
> 时间：2013-01-02T16:05:58.113
> 
> 标签：salesforce

当我单击“订阅者”选项卡时，我会看到以下（不可编辑的）字段。

[http://i.imgur.com/jXKdX.png?1](http://i.imgur.com/jXKdX.png?1)

然后我必须单独单击每个组织，这会将我带到客户端实例并显示我需要的信息：

[http://i.imgur.com/sNrb5.png](http://i.imgur.com/sNrb5.png)

本质上，我需要能够查询“当前版本”字段。

这可能吗？（通过 API/Workbench 等）

谢谢。

# cocoa - CoreData 绑定和自定义 Cell

> ID：14125191
> 
> 赞同：0
> 
> 时间：2013-01-02T16:05:59.130
> 
> 标签：cocoa, core-data, nstableview, nstablecolumn

我有一个带有 CoreData 数据库和 NSTableView 的应用程序。
我想用数据库中的 3 个键值做一个 customCell。
所以我创建了一个 NSTextFieldCell 类，但绑定只针对一个键值。
如何以编程方式将 NSTableColumn 与多个键值绑定？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T05:30:17.867

这是一种无需创建自定义单元格的方法：

1) 在 IB 中，将 Array Controller 拖到 Objects 侧边栏。在 Attributes Inspector 下，将其“Mode”设置为 Entity Mode，在“Entity Name”中填写您的实体名称，并勾选“Prepares Content”。在 Bindings Inspector 下，将其“Managed Object Context”设置为 managedObjectContext。

2) 在 IB 中，将您的表格转换为基于视图的表格。选择“表格视图”并在属性检查器下，选择内容模式：基于视图并将列数更改为 1。

3) 在 IB 中，选择“表格列”并将其值绑定到代表您的对象的数组控制器。控制器键应为“arrangedObjects”并将“模型键路径”留空。

4) 在 IB 中，选择 NSTableView 单元格中的文本字段（标签）。将其值绑定到表格单元格视图。“Controller Key”可以保持空白并将“Model Key Path”设置为objectValue.whateverAttributeName

[在Gentle Bytes](http://www.gentlebytes.com/2011/08/view-based-table-views-in-lion-part-1-of-2/)上有一个很棒的基于视图的表格的总结和教程。

Tim Isted 创建了一个关于如何以编程方式创建绑定的精彩教程，如果这正是您在[Blog@Tim Isted](http://www.timisted.net/blog/archive/a-bindable-custom-nsview-subclass/)所需要的。

# html - div-hover 上的覆盖位置

> ID：14125193
> 
> 赞同：0
> 
> 时间：2013-01-02T16:06:02.963
> 
> 标签：html, css

`float`我有一个使用CSS 中的属性排列的 2×2 图像网格。当我将鼠标悬停在每个图像上时，我想通过在悬停时将其不透明度从 0 切换到 1 来在每个图像上显示一个小的叠加层。当我将图像悬停在第一行时，我的代码效果很好。但是当我将鼠标悬停在下排图像上时，激活的叠加层仍然是顶行中的那个。

我觉得是定位的问题。

我的代码在这里：http: [//jsfiddle.net/zZXZX/27/](http://jsfiddle.net/zZXZX/27/)

PS：请不要介意设计的小故障。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:10:24.980

```
.movie{
    display:block;
    float:left;
    position:relative;
} 
```

您需要添加`position:relative`到您的 .movi​​e 类。`position:absolute`寻找它最近的不是静态位置的父项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T16:11:12.537

您将覆盖定位在绝对位置，而不指定相对父级。

[http://jsfiddle.net/tomprogramming/zZXZX/28/](http://jsfiddle.net/tomprogramming/zZXZX/28/)

`position:absolute`使用相对于它的第一个父级 not 的偏移量来定位您的叠加层`position:static`，或者如果没有找到文档根目录。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T16:09:46.660

添加`position:relative`到`.movie`.

# asp.net-mvc - ASP.NET MVC 表单加密算法？

> ID：14125194
> 
> 赞同：1
> 
> 时间：2013-01-02T16:06:03.807
> 
> 标签：asp.net-mvc, encryption

使用 ASP.NET MVC 4 时，Form 身份验证使用什么加密算法？

我问的原因是因为我需要在手机上加密密码并比较散列版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:52:40.837

[表单身份验证](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.aspx)不处理验证用户密码。通常由[MembershipProvider](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.aspx)处理。验证用户凭据后，您可以使用表单身份验证设置身份验证 cookie，然后可以通过[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute%28v=vs.108%29.aspx)之类的东西对其进行验证。

[您可以在此答案](https://stackoverflow.com/questions/1137368/what-is-default-hash-algorithm-that-asp-net-membership-uses)中找到默认会员提供程序用于散列密码的算法和格式。您还可以查看[SimpleMembershipProvider](http://codefirstmembership.codeplex.com/)的实现，它有一个生成正确成员哈希的示例。

附带说明一下，如果您正在寻找比默认成员资格提供程序方法更强大的方法，[StackOverflow](https://blog.stackoverflow.com/2011/05/stack-exchange-is-an-openid-provider/#comment-59112)使用[PBKDF2](http://code.google.com/p/stackid/source/browse/OpenIdProvider/Current.cs#1135http://code.google.com/p/stackid/source/browse/OpenIdProvider/Current.cs#1135)派生哈希，这会减慢计算速度并使蛮力攻击更加困难。

# php - 如何在 Yii 中使用引导程序？

> ID：14125201
> 
> 赞同：2
> 
> 时间：2013-01-02T16:06:22.420
> 
> 标签：php, twitter-bootstrap, yii

我一直在尝试在 Yii 中实现 twitter 引导扩展，但无法做到。

我按照下面的指南使用 Yii 安装它。

[http://www.cniska.net/yii-bootstrap/setup.html](http://www.cniska.net/yii-bootstrap/setup.html)

如上述指南中所述，我将以下代码复制并粘贴到我的主配置文件中。

```
// Define a path alias for the Bootstrap extension as it's used internally.
// In this example we assume that you unzipped the extension under     protected/extensions.
Yii::setPathOfAlias('bootstrap', dirname(__FILE__).'/../extensions/bootstrap');

return array(
'theme'=>'bootstrap', // requires you to copy the theme under your themes directory
'modules'=>array(
    'gii'=>array(
        'generatorPaths'=>array(
            'bootstrap.gii',
        ),
    ),
),
'components'=>array(
    'bootstrap'=>array(
        'class'=>'bootstrap.components.Bootstrap',
    ),
),
); 
```

任何人都可以请帮忙。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-02T16:25:08.070

找到您需要将以下内容放入 protected/views/layouts 文件夹的 main.php 文件中`<head>`和`</head>`标记之间的任何位置的答案。

```
 <?php Yii::app()->bootstrap->registerAllCss(); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-27T19:59:17.263

它对我来说就像小菜一碟。我想你的问题是你的引导扩展路径。我建议放置完整路径而不是相对路径。一旦它开始工作，您可以尝试使路径相对。

示例： Yii::setPathOfAlias('bootstrap', '/var/www/yoursite/application/extensions/bootstrap');

而不是： Yii::setPathOfAlias('bootstrap', dirname( **FILE** ).'/../extensions/bootstrap');

这应该适合你！干杯！！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-03T14:34:57.290

我也在使用它，但答案还没有到来，但我有另一种方式，所以你按照我说的去做。

我想你想要新的主题所以”

1.  去 yii 框架下载主题。
2.  复制该文件夹，然后粘贴到主题文件夹
3.  config->main.php->'theme'=>'grey-stripes', protected go config folder go main.php go and copy 'theme'=>'grey-stripes',

您的新主题已准备就绪

# sql - 如何使用基于联接的值更新特定行？

> ID：14125202
> 
> 赞同：2
> 
> 时间：2013-01-02T16:06:34.380
> 
> 标签：sql, sql-server, tsql, join, sql-update

> **可能重复：**
> [使用连接的 SQL 更新查询](https://stackoverflow.com/questions/982919/sql-update-query-using-joins)

表 1 有 2 列：

*   有一个 ID 列

*   有一个日期时间列

表 2：

*   有一个 ID 列

*   有一个日期时间列

我需要根据表 1 和表 2 上的 JOIN更新`datetime`列`table 2``ID`

例子：

```
If table1.id = table2.id, 
update datetime column on table2 
with the datetime column value of table1. 
```

这有意义吗？

我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:11:42.050

几个选项。相关子查询应该可以工作：

```
UPDATE t2 SET ts = (SELECT ts FROM t1 WHERE t1.id = t2.td) WHERE ... 
```

这是最简单的方法，但对于大型集合来说会很慢。另一种方法是直接进行连接。这需要一些稍微特定于供应商的语法：

T-SQL：

```
UPDATE table1
SET col1 = t2.col1
FROM table1 t1 JOIN table2 t2 ON t1.id = t2.id 
```

MySQL：

```
UPDATE table1 t1 JOIN table2 t2 ON t1.id = t2.id
SET t1.col1 = t2.col2 
```

（通过：[http](http://blog.ookamikun.com/2008/03/mysql-update-with-join.html) ://blog.ookamikun.com/2008/03/mysql-update-with-join.html ）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:09:16.670

试试这个

```
UPDATE t2
SET t2.datetime_col = t1.datetime_col
from table1 t1 
INNER JOIN table2 t2 ON t1.id = t2.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:09:45.783

```
 Update t2 Set Datetime = t1.DateTime
   From Table1 t1 Join Table2 t2 On t2.id = t1.id 
```

# jakarta-ee - (PrimePush) com.sun.jersey.api.container.ContainerException：ResourceConfig 实例不包含任何根资源类

> ID：14125204
> 
> 赞同：4
> 
> 时间：2013-01-02T16:06:40.470
> 
> 标签：jakarta-ee, primepush

我是 PrimePush 的新手，想尝试一下。我遵循了本[教程](http://kahimyang.info/kauswagan/howto_blogs/1298-using_primefaces_primepush_with_tomcat_7)
但是，当我运行 register.xhtml 文件时，我遇到了*com.sun.jersey.api.container.ContainerException 的错误：ResourceConfig 实例不包含任何根资源类。*

这些是我有的罐子

*   大气兼容-jbossweb-1.0.1
*   大气兼容tomcat-1.0.1
*   atmostsphere-compat-tomcat7-1.0.1
*   atmostsphere-runtime-1.0.1
*   primefaces-3.4.2
*   slf4j-api-1.7.2
*   slf4j-simple-1.7.2
*   JSF 2.1 (莫哈拉 2.1.6)

我正在使用**tomcat7**和**jre7**

这是**web.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
id="WebApp_ID" version="3.0">
<display-name>Test1</display-name>
<welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
</welcome-file-list>
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.jsf</url-pattern>
</servlet-mapping>
<context-param>
    <description>State saving method: 'client' or 'server' (=default). See JSF Specification 2.5.2</description>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
</context-param>
<context-param>
    <param-name>javax.servlet.jsp.jstl.fmt.localizationContext</param-name>
    <param-value>resources.application</param-value>
</context-param>
<context-param>
    <param-name>javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL</param-name>
    <param-value>true</param-value>
</context-param>
<listener>
    <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
</listener>
<context-param>
    <param-name>primefaces.PUSH_SERVER_URL</param-name>
    <param-value>http://localhost:8080</param-value>
</context-param>
<servlet>
<servlet-name>Push Servlet</servlet-name>
<servlet-class>org.primefaces.push.PushServlet</servlet-class>
<init-param>
    <param-name>org.atmosphere.cpr.broadcasterCacheClass</param-name>
    <param-value>org.atmosphere.cache.HeaderBroadcasterCache</param-value>
</init-param>
<init-param>
    <param-name>org.atmosphere.cpr.broadcasterClass</param-name>
    <param-value>org.atmosphere.cpr.DefaultBroadcaster</param-value>
</init-param>
<init-param>
    <param-name>org.atmosphere.cpr.broadcastFilterClasses</param-name>
    <param-value>org.atmosphere.client.TrackMessageSizeFilter</param-value>
</init-param>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Push Servlet</servlet-name>
    <url-pattern>/primepush/*</url-pattern>
</servlet-mapping>
<servlet>
<servlet-name>jersey-serlvet</servlet-name>
    <servlet-class>
    com.sun.jersey.spi.container.servlet.ServletContainer
    </servlet-class>
<init-param>
    <param-name>com.sun.jersey.config.property.packages</param-name>
    <param-value>bean.PushBean</param-value>
</init-param>
<load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
<servlet-name>jersey-serlvet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>
</web-app> 
```

这是**register.xhtml**

```
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:p="http://primefaces.org/ui"
  xmlns:h="http://java.sun.com/jsf/html">
<h:head>
    <title>Facelet Title</title>
</h:head>
<h:body>
    <h:form id="form">  
        <h:outputText id="out" value="#{pushBean.count}"
    styleClass="ui-widget display" />  
        <br />  
        <p:commandButton value="Click" actionListener="#{pushBean.increment}" />  
    </h:form>  

    <p:socket onMessage="handleMessage" channel="/counter" />  

     <script type="text/javascript">
            function handleMessage(data) {
                $('.display').html(data);
            }          
    </script>
</h:body>
</html> 
```

这是**PushBean.java**

```
package Bean;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import org.primefaces.push.PushContext;
import org.primefaces.push.PushContextFactory;

@ManagedBean
@SessionScoped
public class PushBean implements java.io.Serializable {

/**
 * 
 */
private static final long serialVersionUID = 1L;

public PushBean() {
}
private int count;

public int getCount() {
    return count;
}

public void setCount(int count) {
    this.count = count;
}

public synchronized void increment() {
    count++;
    PushContext pushContext = PushContextFactory.getDefault().getPushContext();
    pushContext.push("/counter", String.valueOf(count));
}
} 
```

从这个[链接](http://www.mkyong.com/webservices/jax-rs/jersey-the-resourceconfig-instance-does-not-contain-any-root-resource-classes/)，它说

导致此“ResourceConfig”错误消息的原因有很多。我知道的几个解决方案：

*   com.sun.jersey.config.property.packages 在您的 web.xml 中不存在。
*   com.sun.jersey.config.property.packages 包含一个不包含任何球衣服务的资源。在上述情况下，“com.mkyong.rest”不包含任何球衣服务。

所以我在想这**可能是 web.xml 中的 bean.PushBean 是错误的**吗？
但是，我不知道如何更改它（如果 bean.PushBean 有问题）。从 Eclipse 项目资源管理器中，PushBean.java 路径是 Java Resources -> src -> Bean ->PushBean.java

请帮我找到解决方案。提前致谢。

# layout - Orchard CMS：为匿名用户使用不同的布局

> ID：14125205
> 
> 赞同：3
> 
> 时间：2013-01-02T16:06:41.427
> 
> 标签：layout, content-management-system, orchardcms, anonymous

我想为匿名用户使用不同的布局视图。我尝试过使用 url 替代项，但我不确定如何为匿名用户创建布局，因为他们没有特定的 url。这个想法是，如果新用户访问该站点，我想显示一个初始屏幕，其中包含非常有限的信息，并且可以选择注册/登录以查看完整站点。此启动画面将具有与站点其他部分完全不同的布局/外观。我尝试使用匿名用户层，但我所能做的就是移动小部件（也许我遗漏了一些东西）。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T18:46:41.940

没有开箱即用的解决方案，但您可以执行以下操作来获得您想要的：

使用您选择的名称在文件中添加新布局 - 例如，您可以将其命名为`Splash.cshtml`.

将以下代码添加到`Layout.cshtml`模板顶部：

```
@if (WorkContext.CurrentUser == null) {
    @Display.Splash()
    return;
} 
```

代码将检查用户是否登录。如果没有，它将渲染`Splash.cshtml`模板的内容，并停止渲染模板的其余部分`Layout.cshtml`。

如果您需要在`Splash.cshtml`模板中显示任何小部件，您可以通过简单地添加`@Display(Layout.NameOfTheZone)`应该替换`NameOfTheZone`为模板内使用的区域的实际名称的位置来添加它`Layout.cshtml`。通常，您在`Layout.cshtml`模板中与对象一起使用的任何内容，都可以在任何视图中`Model`通过对象使用。`Layout`

# haskell - Haskell ListT、LogicT 和 ChoiceT 之间的区别

> ID：14125207
> 
> 赞同：19
> 
> 时间：2013-01-02T16:06:43.340
> 
> 标签：haskell, monad-transformers

这三个monad转换器有什么区别？

*   [列表T](http://hackage.haskell.org/packages/archive/transformers/latest/doc/html/Control-Monad-Trans-List.html#t%3aListT)
*   [逻辑](http://hackage.haskell.org/packages/archive/logict/0.5.0.2/doc/html/Control-Monad-Logic.html#t%3aLogicT)
*   [选择T](http://hackage.haskell.org/packages/archive/contstuff/1.2.6/doc/html/Control-ContStuff-Trans.html#t%3aChoiceT)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-02T16:50:30.327

好吧，首先`ListT`它不是一个真正的单子转换器。它违反了某些潜在单子的结合律。它也很慢，一般列表的单子接口也是如此。它建立在内部的实际列表之上。

`LogicT`可能是类似列表的 monad 转换器的最佳选择。它不仅实现了适当的 monad 转换器，而且还实现了一些非常有用的*公平*列表产品组合器。

`ChoiceT`是我自己的作品。它基本上只是一个 CPSed 版本，并`LogicT`受到来自*monadLib*的启发。它非常快，通常优于（未转换的）列表，但类型可能很吓人，并且您会被绑定到结果类型，这有时可能会妨碍您。`LogicT``ChoiceT`

 *结论：如果您是认真的，请使用`LogicT`.*

# iphone - 为什么显示 UIAlertView 时应用程序崩溃？

> ID：14125208
> 
> 赞同：3
> 
> 时间：2013-01-02T16:06:45.603
> 
> 标签：iphone, objective-c, uialertview

我在处理所有服务器请求的方法中实现了可达性功能。我可以通过 NSLogs 看到该功能运行良好。但是，该方法中从来没有“暂停”，这意味着我不能使用 UIAlertView 而不会使程序崩溃。

我可能会以完全错误的方式进行此操作，但我找不到其他任何东西...

有人知道如何以某种方式显示通知吗？

提前致谢

代码：

```
-(id) getJson:(NSString *)stringurl{
Reachability * reach = [Reachability reachabilityWithHostname:@"www.google.com"];

NSLog(@"reached %d", reach.isReachable);

if (reach.isReachable == NO) {

   UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Passwords don't match."
     message:@"The passwords did not match. Please try again."
     delegate:nil
     cancelButtonTitle:@"OK"
     otherButtonTitles:nil];
     [alert show];

}else{
    id x =[self getJsonFromHttp:stringurl];
    return x;
}
return nil;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T19:35:57.550

将讨论移至聊天后，我们发现您的 UIAlertView 正在从后台线程调用。永远不要在后台线程中做任何与更新 UI（*用户界面）相关的事情。*UIAlertView 通过添加一个小弹出对话框来更新 UI，因此它应该在主线程上完成。通过进行以下更改进行修复：

```
// (1) Create a new method in your .m/.h and move your UIAlertView code to it
-(void)showMyAlert{ 

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Passwords don't match." 
                           message:@"The passwords did not match. Please try again." 
                           delegate:nil 
                               cancelButtonTitle:@"OK" 
                           otherButtonTitles:nil]; 
    [alert show]; 

}

// (2) In -(id)getJson replace your original UI-related code with a call to your new method
[self performSelectorOnMainThread:@selector(showMyAlert)
                             withObject:nil
                          waitUntilDone:YES]; 
```

# c# - 具有继承和接口的 C# 泛型方法

> ID：14125209
> 
> 赞同：7
> 
> 时间：2013-01-02T16:06:46.137
> 
> 标签：c#, inheritance, interface

我敢肯定，这真的很简单，但是当涉及到接口时，我正在努力解决继承的问题。

给定以下类，如何在不覆盖基方法的情况下在特定于类 Parent 的接口中接口 Get 方法？

```
public class Base<T, T2>
{
    public T Get<T, T2>(string key)
    {
        ...
    }
}

public class Parent : Base<Type1, Type2>, IParent
{
    ...
} 
```

这是我的 atm，但我不断收到“接口成员 Type1 IParent.Get(string) 未实现”错误。

```
public interface IParent
{
    Type1 Get(string key);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T16:11:45.667

`public T Get<T, T2>(string key)`将在泛型类上创建一个泛型方法。`T`and`T2`将是这个泛型方法的参数，并且与类的`T`and没有关系`T2`。

做吧`public T Get(string key)`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T16:14:41.827

`T Get<T,T2>(string)`method of`Base<T,T2>`和 method `Type1 Get(string)`method of`IParent`是两个不同的方法签名。您需要同时实现两者。如果您希望两种实现都使用相同的功能，您可以执行以下操作：

```
public class ParentJ : Base<Type1, Type2>, IParent {
 public Type1 Get(string key) {
    return this.Get<Type1,Type2>(key);
 }
} 
```

但是我相信你的初衷不是参数化`Get()`方法，`Base<T,T2>`因此你会这样写`Base`：

```
public class Base<T,T2> {
  public T Get(string key) {
    // implementation here
  }
} 
```

该签名将满足`IParent`.

当类型不能或不应该由包含该方法的类推断时，您只需要方法上的类型参数（例如`T`和）。`T2`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T16:15:24.720

匹配方法时，此签名必须完全匹配。签名的组成部分之一是通用参数的数量。

您的`IParent`接口包含一个`Get`具有零类型参数的方法。您的`Base`类包含一个`Get`具有两个类型参数的方法。

虽然它看起来`Base.Get`共享它的类型参数，但实际上并没有，使用的语法创建了两个新的类型参数，它们隐藏了类的类型参数。

`Get`解决方法是简单地实现一个`Parent`没有任何类型参数的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-02T16:17:49.620

尝试这个。您不会覆盖基础`Get`并实施`IParent`.

```
public class Type1 { }
public class Type2 { }

public interface IParent
{
    Type1 Get(string key);
}

public class Base<T, T2> 
{
    public T Get(string key)
    {
        return default(T);
    }
}
public class Parent : Base<Type1, Type2>, IParent
{
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T17:33:55.483

尝试使用通用 IParent 接口。

# image - 在 Oracle 中将 HEX 字符串作为 IMAGE 插入

> ID：14125212
> 
> 赞同：1
> 
> 时间：2013-01-02T16:06:49.647
> 
> 标签：image, oracle10g, hex, sql-update, blob

我想在 Oracle 10g 中使用十六进制字符串（图像的十六进制表示）更新包含图像的 blob 列。不幸的是，我唯一被允许使用的是一个简单的查询，没有过程或其他任何东西......我一直在尝试使用这个查询，但没有成功（PLSQL 说它不是图像）：

```
update table t
   set t.photo = (hextoraw('HEXSTRING')) 
```

当以这种方式使用时，它可以工作，但 pl/sql 都不会将其识别为图像，也不会将应读取的程序识别为图像。我想这是某种类型转换问题，但我对 OrSQL 类型和转换不太熟悉。

任何建议将不胜感激！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:23:41.750

你的方法是对的。它可能是错误的输入十六进制？你怎么得到它。

例如：

```
SQL> create table img (img blob);

Table created.

SQL> insert into img values (hextoraw('47494638396120002000f700000000000000330000660000990000cc0000ff002b00002b33002b66002b99002bcc002bff0055000055330055660055990055cc0055ff008
0000080330080660080990080cc0080ff00aa0000aa3300aa6600aa9900aacc00aaff00d50000d53300d56600d59900d5cc00d5ff00ff0000ff3300ff6600ff9900ffcc00ffff3300003300333300663300993300cc3300f
f332b00332b33332b66332b99332bcc332bff3355003355333355663355993355cc3355ff3380003380333380663380993380cc3380ff33aa0033aa3333aa6633aa9933aacc33aaff33d50033d53333d56633d59933d5cc3
3d5ff33ff0033ff3333ff6633ff9933ffcc33ffff6600006600336600666600996600cc6600ff662b00662b33662b66662b99662bcc662bff6655006655336655666655996655cc6655ff668000668033668066668099668
0cc6680ff66aa0066aa3366aa6666aa9966aacc66aaff66d50066d53366d56666d59966d5cc66d5ff66ff0066ff3366ff6666ff9966ffcc66ffff9900009900339900669900999900cc9900ff992b00992b33992b66992b9
9992bcc992bff9955009955339955669955999955cc9955ff9980009980339980669980999980cc9980ff99aa0099aa3399aa6699aa9999aacc99aaff99d50099d53399d56699d59999d5cc99d5ff99ff0099ff3399ff669
9ff9999ffcc99ffffcc0000cc0033cc0066cc0099cc00cccc00ffcc2b00cc2b33cc2b66cc2b99cc2bcccc2bffcc5500cc5533cc5566cc5599cc55cccc55ffcc8000cc8033cc8066cc8099cc80cccc80ffccaa00ccaa33cca
a66ccaa99ccaaccccaaffccd500ccd533ccd566ccd599ccd5ccccd5ffccff00ccff33ccff66ccff99ccffccccffffff0000ff0033ff0066ff0099ff00ccff00ffff2b00ff2b33ff2b66ff2b99ff2bccff2bffff5500ff553
3ff5566ff5599ff55ccff55ffff8000ff8033ff8066ff8099ff80ccff80ffffaa00ffaa33ffaa66ffaa99ffaaccffaaffffd500ffd533ffd566ffd599ffd5ccffd5ffffff00ffff33ffff66ffff99ffffccffffff0000000
0000000000000000021f904010000fc002c00000000200020000008ff00371429b2619fc183080dbe899630e140810407366c2870e1c47d103764bc887020135017230e8cc8f1601168251f1661387119ca7dd194edabb3a
c24cb92758c286482b188c5921ca31154267483b29120815e7c03d10e44262f955e84080ad4c88755056e80131528c1a4a0b41601ab72a5d20d490d5a458b30ec489940d31eacda10d4929a0da325d5bb4fae5abf7db94e7
c53446161b673bfb68d28f8a0d0224405421b4896aa4168102923842370099c8146b4561d29da6d91253783d68908ca944881a309323dcd59e24168b535f7150b566051a204bb46232cd0cee2b18bf77d36b87a22b437804
1194f08121a5c972d3f3634155d296ecb8991275156ba6cb568b51111bb2e28f539d5b5a46317967a713893919f05d2cf4b78a5e468beed979032f715449861023a07074c7b016692562595a7547a22a5765b6d6791f6d04
5e51134a158247134d984230504003b'));

1 row created.

SQL> commit;

Commit complete. 
```

然后在我的 PL/SQL IDE（pl/sql 开发人员）中我看到了.. ![在此处输入图像描述](../Images/3ba13286b6d2ca1b0845bfc46f18137b.png)

# php - 奇怪的 sql 和 javascript ajax 错误

> ID：14125229
> 
> 赞同：0
> 
> 时间：2013-01-02T16:07:54.343
> 
> 标签：php, javascript, jquery, mysql, ajax

我有一个简单的表：

```
编号 | 用户 | 开始
1 11 2013-01-04 02:00:00
```

开始当然是时间戳。

然后我运行一个选择行的查询，当我运行查询时抛出 phpmyadmin 或其他任何地方，它完美地返回了结果。

但是，当我的页面调用服务器时，结果相差 1 小时。

你有什么想法？

```
$start = //is ok
$end   = //is ok

$query = '
            SELECT id, title, start_in, duration, color, DATE_ADD( start_in , INTERVAL (duration*60) MINUTE ) AS end_in
            FROM shifts
            WHERE start_in BETWEEN \''.$start.'\' AND \''.$end.'\'
              '; 
```

只是为了澄清一下，我在 1 小时内从服务器获得了 json 的结果，这是在我什至没有在 js 中创建任何内容之前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:11:01.760

如果您使用它来创建 Javascript Date 对象，请确保附加正确的时区并在正确的时区中请求返回。

或者完全摆脱 Javascript Date 对象并将其视为字符串。

# c - C中的remstr函数

> ID：14125238
> 
> 赞同：-6
> 
> 时间：2013-01-02T16:08:20.843
> 
> 标签：c, string, removeall

我想创建一个名为`remstr()`. 此函数从另一个字符串中删除给定的字符串，**而不使用`string.h`**. 例子：

```
 str1[30]= "go over stackover"
 str2[20]= "ver"
 strrem[20]= "go o stacko" 
```

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:20:01.900

C 为您提供了许多有用的构建块来执行此操作。特别是，您可以使用三个标准库函数构建此函数：（`strstr`查找要删除的字符串），`strlen`计算字符串其余部分的长度，并将`memcpy`您不想删除的部分复制到目的地（如果您希望该功能就地运行，则需要使用`memmove`而不是）。`memcpy`所有三个函数都在`<string.h>`.

尝试编写函数，并在遇到麻烦时提出具体问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:28:02.163

伪代码对于您想要做的事情非常简单，如果您不能使用`string.h`函数，那么您只需要重新创建它们。

```
char * remstr(char *str1, char * str2)
{
    get length of str1
    get length of str2
    for(count from 0 to length of str2 - length of str1) {
       if ( str1[count] != str2[count])
          store str2[count] in to your new string
       else
          loop for the length of str1 to see if all character match
            hold on to them in case they don't and you need to add them into you
            new string
    }
    return your new string
} 
```

您需要弄清楚细节，是否`remstr()`为新字符串分配内存？它是否需要一个现有的字符串并更新它？你的字符串的前哨字符是什么？

你需要一个`strlen()`才能工作，因为你不能使用它，你需要做一些类似的事情：

```
int mystrlen(char* str) {
    while not at the sentinel character
      increment count
    return count
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:12:30.740

```
#include <stdio.h>
#include <stdlib.h>

void remstr(char *str1, char *str2, char *strrem)
{
    char *p1, *p2;
    if (!*str2) return;
    do {
        p2 = str2;
        p1 = str1;
        while (*p1 && *p2 && *p1==*p2) {
            p1++;
            p2++;
        }
        if (!(*p2)) str1 = p1-1;
        else *strrem++ = *str1;
    } while(*str1 && *(++str1));
    *strrem = '\0';
}

int main() {

    char str1[30]= "go over stackover";
    char str2[20]= "ver";
    char strrem[30];
    remstr(str1, str2, strrem);
    printf("%s\n",strrem);
} 
```

使用此函数，您甚至可以将结果放在同一个字符串缓冲区中`str1`：

```
remstr(str1, str2, str1);
printf("%s\n",str1); 
```

# regex - 正则表达式 - 在等号之后和管道之前返回字符串

> ID：14125239
> 
> 赞同：2
> 
> 时间：2013-01-02T16:08:26.157
> 
> 标签：regex

我试图自己解决这个问题，但我需要一些帮助。

我的系统日志中有一个强大的功能 - 虽然我知道 grep 会更容易，但我有构建正则表达式的理由。

例如： `somerandomstufffilter-category=Web_Advertisements|andhereis more random stuff`

在那乱七八糟的混乱中，有一个确切的字符串`'filter-category=Web_Advertisements|'`

我创建了这个正则表达式： `(filter-category=).*?(?=["|"])`

它将我想要的确切字符串拉到管道上。而不是给我整个字符串，我只想要等号之后的所有内容（而不是将它包含在我的匹配中），并且在管道之前。

现在我得到： `'filter-category=Web_Advertisements'` 我想要得到的是： `'Web_Advertisements'`靠它自己。诀窍是过滤器类别之后的任何内容都可以是任何内容，而不仅仅是网络广告。这就是为什么它必须以它遇到的第一个管道结束。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:14:09.087

1.  你不需要捕获`filter-category=`，所以放弃`()`.
2.  你不需要在这里使用前瞻，所以放弃`(?=...)`.
3.  顺便说一句，您通过编写误用了字符类`["|"]`——这意味着您将匹配双引号`"`或管道`|`。

这就是你想要的：

```
filter-category=(.*?)\| 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:17:05.367

~~acheong87 的答案可能包括捕获中的管道......如果它是贪婪的并且有多个管道，它将捕获直到最后一个管道的所有内容。~~

尝试

`filter-category=([^\|]*)\|`

就像acheong87的回答一样，这将匹配*整个*

filter-category=Web_Advertisements|

您必须从中提取要保留的部分，捕获到 $1

# java - Spring Data：JPA Schema JpaRepositoryConfigDefinitionParser 初始化失败

> ID：14125242
> 
> 赞同：3
> 
> 时间：2013-01-02T16:08:41.053
> 
> 标签：java, spring, jpa, spring-data

我正在尝试在 spring 数据上设置一个项目，但遇到了如下奇怪的错误：

**处理程序类文件或依赖类的问题；嵌套异常是 java.lang.NoClassDefFoundError: 无法初始化类 org.springframework.data.jpa.repository.config.JpaRepositoryConfigDefinitionParser**

我已经按照 spring data JPA 文档站点中的指导指定了正确的模式命名空间。

```
 xmlns:jpa="http://www.springframework.org/schema/data/jpa"
 xsi:schemaLocation="http://www.springframework.org/schema/data/jpa 
http://www.springframework.org/schema/data/jpa/spring-jpa.xsd"

jpa:repositories base-package="com.company.originations.dal.entities.dao" 
```

我不知道我能在这里做什么。

这是完整的堆栈跟踪：

```
 Caused by: org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Failed to import bean definitions from URL location [classpath:/META-INF/spring/app-context.xml]
Offending resource: class path resource [com/company/originations/apm/configservice/cra/test/OrderPersistenceTests-context.xml]; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [META-INF/spring/app-context.xml]; nested exception is org.springframework.beans.FatalBeanException: Invalid NamespaceHandler class [org.springframework.data.jpa.repository.config.JpaRepositoryNameSpaceHandler] for namespace [http://www.springframework.org/schema/data/jpa]: problem with handler class file or dependent class; nested exception is java.lang.NoClassDefFoundError: org/springframework/aop/framework/AbstractAdvisingBeanPostProcessor
    at org.springframework.beans.factory.parsing.FailFastProblemReporter.error(FailFastProblemReporter.java:68)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:85)
    at org.springframework.beans.factory.parsing.ReaderContext.error(ReaderContext.java:76)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:192)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseDefaultElement(DefaultBeanDefinitionDocumentReader.java:147)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:132)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:149)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:212)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:81)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:280)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:304)
    ... 28 more
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [META-INF/spring/app-context.xml]; nested exception is org.springframework.beans.FatalBeanException: Invalid NamespaceHandler class [org.springframework.data.jpa.repository.config.JpaRepositoryNameSpaceHandler] for namespace [http://www.springframework.org/schema/data/jpa]: problem with handler class file or dependent class; nested exception is java.lang.NoClassDefFoundError: org/springframework/aop/framework/AbstractAdvisingBeanPostProcessor
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:143)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:178)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.importBeanDefinitionResource(DefaultBeanDefinitionDocumentReader.java:186)
    ... 43 more
Caused by: org.springframework.beans.FatalBeanException: Invalid NamespaceHandler class [org.springframework.data.jpa.repository.config.JpaRepositoryNameSpaceHandler] for namespace [http://www.springframework.org/schema/data/jpa]: problem with handler class file or dependent class; nested exception is java.lang.NoClassDefFoundError: org/springframework/aop/framework/AbstractAdvisingBeanPostProcessor
    at org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:139)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1333)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1328)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:135)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:93)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    ... 48 more
Caused by: java.lang.NoClassDefFoundError: org/springframework/aop/framework/AbstractAdvisingBeanPostProcessor
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at org.springframework.data.jpa.repository.config.JpaRepositoryConfigDefinitionParser.(JpaRepositoryConfigDefinitionParser.java:45)
    at org.springframework.data.jpa.repository.config.JpaRepositoryNameSpaceHandler.init(JpaRepositoryNameSpaceHandler.java:34)
    at org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:130)
    ... 54 more
Caused by: java.lang.ClassNotFoundException: org.springframework.aop.framework.AbstractAdvisingBeanPostProcessor
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 69 more 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T16:13:15.217

看起来您缺少 Spring Data JPA 依赖项。如果您使用的是 maven，则可以通过将以下内容添加到 pom.xml`<dependencies>`标记来包含它：

```
<dependency>
    <groupId>org.springframework.data</groupId>
    <artifactId>spring-data-jpa</artifactId>
    <version>1.1.2.RELEASE</version>
</dependency> 
```

如果你不使用 Maven，你可以在这里下载 JAR：http: [//mvnrepository.com/artifact/org.springframework.data/spring-data-jpa/1.1.2.RELEASE](http://mvnrepository.com/artifact/org.springframework.data/spring-data-jpa/1.1.2.RELEASE)

并使用您使用的任何依赖管理方法将其添加到您的项目中

还要确保您已包含 Spring AOP 依赖项：

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-aop</artifactId>
    <version>3.1.2.RELEASE</version>
</dependency> 
```

或者在这里下载 JAR - [http://mvnrepository.com/artifact/org.springframework/spring-aop/3.1.2.RELEASE](http://mvnrepository.com/artifact/org.springframework/spring-aop/3.1.2.RELEASE)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:15:19.087

尝试指定 spring-data-jpa 的架构版本。

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:jpa="http://www.springframework.org/schema/data/jpa"
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.1.xsd> 
```

您还可以查看我创建的有关如何配置 Spring-Data 的视频教程：http: [//tothought.cloudfoundry.com/post/3](http://tothought.cloudfoundry.com/post/3)

# python - NDB 映射（回调，produces_cursors=True）

> ID：14125243
> 
> 赞同：5
> 
> 时间：2013-01-02T16:08:42.000
> 
> 标签：python, google-app-engine, app-engine-ndb

map() 的 Google AppEngine NDB 文档指出：

> “支持所有查询选项关键字参数。”

但是，我尝试使用`produces_cursors=True`on`map()`并且没有返回光标。

```
map(callback, pass_batch_into_callback=None, merge_future=None, **q_options) 
```

我想使用`map()`，因为我可以将回调设置为 tasklet。

[https://developers.google.com/appengine/docs/python/ndb/queryclass#kwdargs_options](https://developers.google.com/appengine/docs/python/ndb/queryclass#kwdargs_options)

编辑 - 提供代码示例：

```
@ndb.tasklet
def callback(user):
    statistics = yield ndb.Key(Statistics, user.key.id()).get_async()
    raise ndb.Return(user, statistics)

result = User.query().map(callback, produces_cursors=True) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T01:58:11.187

这个例子似乎有一个错字——正确的标志是`produce_cursors`，不是`produces_cursors`。

但是只有在使用迭代器时才可以使用游标，而不是使用`map()`. 查看异步迭代器示例；这是一些工作，但您绝对可以使用它为每个结果手动创建一个 tasklet。

# php - 删除字符串，除非有空格

> ID：14125244
> 
> 赞同：4
> 
> 时间：2013-01-02T16:08:42.160
> 
> 标签：php, regex, preg-replace

我有这个正则表达式，我希望它删除和之间的所有文本`$`并`$`用空字符串替换它，除非两个`$`符号之间的任何地方都有空格，在这种情况下忽略替换。使用我现在拥有的正则表达式，无论是否有空格，它都会将其删除。

```
<?php
$tmp = "<p>
    $random_text$
</p>
<p>
    $random text2$
</p>
<p>
    This is some text
</p>
<p>
    This is some text
</p>";

$tmp = preg_replace("/\\$[^ ].+?\\$/", "", $tmp); 
```

所以，最后我想把它作为输出。您可能会注意到，第一个段落标记之间的文本已经消失，但第二个段落标记仍然存在。

```
<p>

</p>
<p>
    $random text2$
</p>
<p>
    This is some text
</p>
<p>
    This is some text
</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:25:41.717

```
/\\$[^ ]+?\\$/ 
```

我刚刚删除了点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:12:14.820

```
<?php $source = 'His $name$ is $Luis$';
echo $result = preg_replace('/\$(.*?)\$/', '<b>$1</b>', $source);
?> 
```

# c# - 绑定包含嵌套对象的 ViewModel 类

> ID：14125246
> 
> 赞同：2
> 
> 时间：2013-01-02T16:08:45.903
> 
> 标签：c#, asp.net-mvc, selectlist, selectlistitem

我创建了一个包含其他复杂类对象的类。

所以例如

```
class A {

    public int ID { set; get; }

    public string MyObjectName {set; get; }

    public B ObjectOfTypeB { set; get; }

}

class B {

    public int ID { set; get; }

    public int CategoryNumber { set; get; }

    public string CategoryDescription { set; get; }

} 
```

现在我有一个创建 A 类型对象的控制器方法。我为创建模型（A 类）搭建了一个视图。但是因为 A 拥有一个复杂类型，它不知道如何为 B 类型创建输入字段。

在我的创建功能

```
// helper method to get a list of the possible B objects - 
// this method will eventually query a database. for now just static objects

private List<Category> getBobjects()
{
    List<B> bs = new List<B>();
    bs.Add(new B() { ID = 1, CategoryNumber = 2, CategoryDescription = "Config 1" });
    bs.Add(new B() { ID = 2, CategoryNumber = 3, CategoryDescription = "Config 2" });
    return bs;
}

[HttpGet]
public ActionResult Create()
{
    // Adding to the view bags the categories to display
    ViewBag.bs = getBobjects();
    return View();
} 
```

在视图中

```
@Html.DropDownListFor(model => model.ObjectOfTypeB, 
       new SelectList(ViewBag.bs, "ID", "CategoryDescription")) 
```

我假设在提交表单时，来自 ObjectOfTypeB 的数据将绑定到类型 A 的回发对象。但这并没有发生。

谁能解释我如何将特定字段的可能值列表传递给视图并让回发将值绑定到返回的对象上？

[错误打印屏幕][1]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:12:32.443

您的绑定不正确。如果您尝试填充`ID`您的`ObjectOfTypeB`财产，那么您`DropDownListFor`应该绑定到`model => model.ObjectOfTypeB.ID`

如果您查看源代码，您的源代码应该看起来像`<select name="ObjectOfTypeB.ID">`您希望它在回发时自动填充该属性。

在这种情况下，我可能会使用 ViewModel (VM) 来表示您的模型。您并没有真正填写完整的对象 B，因为 B 包含与所选 ID 相关的类别和描述——换句话说，这三个属性绑定在一起，不能单独填写。

我会做类似的事情：

```
class AViewModel
{
    public int ID {set;get;}

    public string MyObjectName {set; get;}

    public int IDofB { set; get; }
} 
```

为了让您更轻松地在 A 和 AViewModel 之间进行转换，请查看 AutoMapper 等工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T10:46:22.713

我为那个复杂的类类型模型创建了一个视图模型

每个嵌套对象都有一个键，并且这些键使用来自引用对象类型的选择列表来显示文本。

之后在回帖中，我将视图模型翻译回模型的类型

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:12:28.077

```
 private IList getBobjects()
        {
        List<B> bs = new List<B>();
        bs.Add(new B() { ID = 1, CategoryNumber = 2, 
             CategoryDescription = "Config 1" });
        bs.Add(new B() { ID = 2, CategoryNumber = 3, 
             CategoryDescription = "Config 2" });
        return bs;
        }

    public IList<SelectListItem> GetDropdownlistItems()
    {
        IList<SelectListItem> ilSelectList = new List<SelectListItem>();

        IList objlist = getBobjects();
        foreach (object[] arrobject in objlist)
        {
            SelectListItem selectListItem = new SelectListItem();
            selectListItem.Value = arrobject[0].ToString();
            selectListItem.Text = arrobject[1].ToString();
            ilSelectList.Add(selectListItem);
        }

        return ilSelectList;
    }

    public ActionResult Create()
    {
        IList<SelectListItem> ilSelectListItems = GetDropdownlistItems();
        ViewBag.bs = ilSelectListItems;
        return View();
    } 
```

并认为：

```
@Html.DropDownList("bs", new SelectList(ViewBag.bs, "Text", "Value")) 
```

希望这会有所帮助，谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T16:18:53.477

您必须`ViewBag`再次填写才能将绑定返回到您的`View`. 您可以创建一个为您填充此 ViewBag 的方法，并将其用于 get/post 方法的添加/编辑。尽量让你的`ViewModels`（我喜欢称之为 as `InputModel`）只使用原始类型（`string`, `int`, `double`, `bool`），换句话说，将 B 复杂类型更改为 a `int`。尝试这样的事情：

```
private void SetViewBagCombo(int selectedValue = 0)
{
   ViewBag.bs = new SelectList(getBobjects(), "Id", "CategoryDescription", selectedValue);
}

public ActionResult Create()
{
   SetViewBagCombo(); 
   return View();   
}

[HttpPost]
public ActionResult Create(A input)
{
   if (ModelState.IsValid)
   {
      // persist it
      return RedirectToAction("Index");
   }

   SetViewBagCombo(input.B.Id); 
   return View();   
} 
```

在你看来：

```
@Html.DropDownListFor(model => model.IdOfB, (SelectList)ViewBag.bs, "Select...") 
```

# asp.net - 没有数据返回时抛出“对象引用未设置为对象的实例”

> ID：14125261
> 
> 赞同：0
> 
> 时间：2013-01-02T16:10:02.847
> 
> 标签：asp.net, sql-server, ado.net, sql-server-2008-r2, webforms

我在我的代码中收到“对象引用未设置为对象的实例”错误。我相信我理解为什么会发生这种情况，但我不知道如何解决它。这是我的代码：

```
public string GetLastPost(int subCatId)
{
    SqlConnection conn = null;
    string postDate = null;
    try
    {
        conn = new SqlConnection();
        conn.ConnectionString = ConfigurationManager.ConnectionStrings["ConnectionString"].ToString();
        conn.Open();

        SqlCommand cmd = new SqlCommand();

        cmd.Connection = conn;
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.CommandText = "forum_GetLastPostDate";
        cmd.Parameters.Add("@SubCategoryId" , subCatId);
        postDate = cmd.ExecuteScalar().ToString();
    } 
```

这是我的 SQL 查询：

```
SELECT TOP 1 PostDate
FROM forum_posts
WHERE forum_posts.SubcategoryId = @SubCategoryId
ORDER BY PostId desc 
```

此行引发错误：

```
postDate = cmd.ExecuteScalar().ToString(); 
```

在调试时，我注意到只有当 SQL 查询什么都不返回时才会发生这种情况。此方法多次运行，第一次运行时正确运行，因为它返回一个项目。但是第二次，因为它没有要返回的项目，所以它抛出了我提到的错误。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:16:30.403

你可以这样使用

```
 var data= cmd.ExecuteScalar();
   if(data!=null)
         postDate =data.ToString(); 
```

细节

[ExecuteScalar 抛出 NullReferenceException](https://stackoverflow.com/questions/559632/executescalar-throws-nullreferenceexception)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:01:05.080

这将解决您的问题...替换`postDate = cmd.ExecuteScalar().ToString();`为

```
object postdate = cmd.ExecuteScalar();
if (postdate != null)
{
string getUserName = postdate.ToString();
} 
```

# php - 使用 preg_replace 查找和替换属性

> ID：14125266
> 
> 赞同：1
> 
> 时间：2013-01-02T16:10:22.697
> 
> 标签：php, regex, preg-replace

我正在尝试重做一些具有大写字段名称和空格的表单，有数百个字段和 50 多个表单...我决定尝试编写一个 PHP 脚本来解析表单的 HTML。

所以现在我有一个文本区域，我会将 html 发布到其中，我想更改所有字段名称

```
name="Here is a form field name" 
```

到

```
name="here_is_a_form_field_name" 
```

如何在一个命令中解析并更改它，以便名称标签中的所有内容都为小写，空格替换为下划线

我假设 preg_replace 带有一个表达式？

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T16:19:03.287

我建议[不要使用正则表达式来操作 HTML](https://stackoverflow.com/a/1732454/1607098) .. 我会改用[DOMDocument](http://php.net/manual/en/class.domdocument.php)，如下所示

```
$dom = new DOMDocument();
$dom->loadHTMLFile('filename.html');

// loop each textarea
foreach ($dom->getElementsByTagName('textarea') as $item) {

    // setup new values ie lowercase and replacing space with underscore
    $newval = $item->getAttribute('name');
    $newval = str_replace(' ','_',$newval);
    $newval = strtolower($newval);
    // change attribute
    $item->setAttribute('name', $newval);
}
// save the document
$dom->saveHTML(); 
```

另一种方法是使用[Simple HTML DOM Parser](http://simplehtmldom.sourceforge.net/)之类的东西来完成这项工作 - 链接网站上有一些很好的例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:24:39.927

我同意`preg_replace()`或者更确切地说`preg_replace_callback()`是适合这项工作的工具，这里有一个如何将它用于您的任务的示例：

```
preg_replace_callback('/ name="[^"]"/', function ($matches) {
  return str_replace(' ', '_', strtolower($matches[0]))
}, $file_contents); 
```

但是，您应该在之后使用差异工具检查结果，并在必要时微调模式。

我建议不要使用 DOM 解析器的原因是它们通常会阻塞无效的 HTML 或包含例如模板引擎标签的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:21:41.873

这是您的解决方案：

```
<?php
$nameStr = "Here is a form field name";

while (strpos($nameStr, ' ') !== FALSE) {
    $nameStr = str_replace(' ', '_', $nameStr);
}
echo $nameStr;
?> 
```

# jquery-mobile - Jquery Mobile 持久导航栏 - 闪烁

> ID：14125271
> 
> 赞同：4
> 
> 时间：2013-01-02T16:10:39.327
> 
> 标签：jquery-mobile

我对 Jquery 移动持久导航栏有疑问。我正在开发一个使用 phonegap 部署在 iOS 和 Android 上的移动应用程序。我有一个导航栏可以从一个页面导航到另一个页面。（页脚/导航栏固定）。

示例：http: [//jquerymobile.com/demos/1.2.0/docs/toolbars/footer-persist-a.html](http://jquerymobile.com/demos/1.2.0/docs/toolbars/footer-persist-a.html)

导航有效，当在 chrome 或 safari 等浏览器中呈现时，该栏仍然存在。但是，当我将应用程序上传到 Android 模拟器或 iOS 模拟器时，单击导航栏中的链接会使整个屏幕变白一秒钟，然后重新出现。（有点闪烁）

有人可以帮忙吗？

这是我的页脚代码：（a.html，b.html ...是我的页面名称）

```
<div data-role="footer" data-id="foo1" data-position="fixed" data-tap-toggle="false">
    <div data-role="navbar">
        <ul>
            <li><a href="a.html" data-prefetch data-transition="slideup" class="ui-btn-active ui-state-persist" rel="external">Info</a></li>
            <li><a href="b.html" data-prefetch rel="external" >Friends</a></li>
            <li><a href="footer-persist-c.html" data-prefetch="true">Albums</a></li>
            <li><a href="footer-persist-d.html" data-prefetch="true">Emails</a></li>
        </ul>
    </div><!-- /navbar -->
</div><!-- /footer --> 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T05:36:53.060

我想到了。这是你所说的和我所拥有的结合。

因此，要在上传到 Android 或 iOS 时阻止 Jquery 移动页脚闪烁，您需要在 div 中设置以下属性：

page1.html：

```
<div data-position="fixed" data-tap-toggle="false" data-role="footer" data-id="f1">
    <a href="page1.html">Page 1 NAV</a>
    <a href="page2.html">Page 2 NAV</a>
</div> 
```

page2.html

```
<div data-position="fixed" data-tap-toggle="false" data-role="footer" data-id="f1">
    <a href="page1.html">Page 1 NAV</a>
    <a href="page2.html">Page 2 NAV</a>
</div> 
```

两个页面中的 data-id="f1" 必须匹配，以便 jquery mobile 知道这是与上一页相同的页脚，因此不会再次呈现它。

如果您需要这方面的帮助，请告诉我。问候，托尼

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:34:48.867

同样的问题（我试图修复它超过 3 个小时，但没有运气尝试了很多我在网上找到的东西，但没有运气）。

如果您删除整个页脚并在内容区域中添加一个按钮，则过渡效果会突然像魅力一样。因此，一种解决方法是通过放置在页面底部的内容区域中的按钮来伪造导航栏......虽然不是很漂亮。

```
<div data-role="content">
<h1>
    Page Nav and Dialog Example
</h1>
<a data-role="button" href="index2.html">Page Navigation</a></div> 
```

我将它与 custom-scripting.js 一起使用：

```
$(document).bind("mobileinit", function(){
  $.mobile.defaultPageTransition = 'none';
  $.mobile.defaultDialogTransition = 'none';
  $.mobile.useFastClick = true;}); 
```

通过以下方式引用它：

```
<script type="text/javascript" src="jquery-1.8.3.js"></script>
    <script src="custom-scripting.js"></script>
    <script type="text/javascript" src="jquery.mobile-1.2.0.js"></script> 
```

也许其他人找到了使用导航栏而不闪烁的解决方案？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T21:31:40.800

如果不使用页脚中的导航栏，它会停止闪烁（在 iPhone4 iOS5 上测试）。所以你可以使用页脚但不要在里面使用导航栏:-)

但注意：如果你使用 data-position="fixed" 它会再次开始闪烁......

```
<div data-role="footer">
    <a data-role="button" href="#">Main</a>
    <a data-role="button" href="favorites.html">Favorites</a>
    <a data-role="button" href="more.html">More</a>
</div> 
```

希望能帮助到你 ：-）

# django - Django Session 存储所有会话

> ID：14125281
> 
> 赞同：0
> 
> 时间：2013-01-02T16:11:24.580
> 
> 标签：django

我将 django 会话存储在磁盘上。我有一个特殊情况，我需要遍历每个会话并删除某些键并保留其余键。因此，清除整个缓存不是一种选择。当会话在数据库中时，我能够迭代单个会话。但是对于会话存储，我被卡住了。我需要做的与此类似：

```
 sessions=sessionstore.all()
    for session in sessions:
      session.pop('key1')
      session.pop('key2')
      if session lastmodified before some time:
        del session 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:32:45.490

看看在 django.contrib.sessions.backends.file 中的 clear_expired 方法中是如何完成迭代的：

```
@classmethod
def clear_expired(cls):
    storage_path = cls._get_storage_path()
    file_prefix = settings.SESSION_COOKIE_NAME

    for session_file in os.listdir(storage_path):
        if not session_file.startswith(file_prefix):
            continue
        session_key = session_file[len(file_prefix):]
        session = cls(session_key)
        # When an expired session is loaded, its file is removed, and a
        # new file is immediately created. Prevent this by disabling
        # the create() method.
        session.create = lambda: None
        session.load() 
```

# python - 在 C 中分配一块内存并立即释放它失败

> ID：14125294
> 
> 赞同：2
> 
> 时间：2013-01-02T16:12:05.537
> 
> 标签：python, c

在我与 Python 集成的 C 模块的部分代码中，我有一个 char**（字符串数组），它被重复分配，填充分配的字符串，然后释放并再次分配。一般模式是，当调用某个函数（来自 Python）提供数组的新内容（作为列表）时，它会遍历字符串数组，释放每个字符串，然后释放数组本身。然后它再次分配数组以保存新 Python 列表的内容，然后为每个要保存的字符串分配内存。

这就是说我在尝试释放列表中的一个字符串时遇到错误。这个错误是确定性的；它总是来自程序中同一点的同一个单词列表中的同一个单词，但是那个单词或单词列表并没有什么特别之处。（它只是 ["CCellEnv", "18", "34"]，与许多其他格式类似）我尝试在分配字符串的循环中添加一些调试代码；这是产生错误的函数：

```
static PyObject* py_set_static_line(PyObject* self, PyObject* args)
{
    int i;
    //Free the old values of the allocated variables, if there are any
    if (numStaticWords > 0)
    {
        for (i = 0; i < numStaticWords; i++)
        {
            printf("Freeing word %d = '%s'\n", i, staticWords[i]);
            free(staticWords[i]);
        }
        free(staticWords);
        free(staticWordMatches);
    }

    //Parse arguments
    PyObject* wordList;
    unsigned short numWords;
    PyObject* wordMatchesList;
    if (!PyArg_ParseTuple(args, "O!HO!", &PyList_Type, &wordList, &numWords, &PyList_Type, &wordMatchesList))
        return NULL;

    numStaticWords = numWords;
    if (numStaticWords > 0)
    {
        staticWords = malloc(sizeof(char*) * numStaticWords);
        staticWordMatches = malloc(sizeof(int) * numStaticWords);

        PyObject* wordObj;
        PyObject* matchObj;
        char* word;
        for (i = 0; i < numStaticWords; i++)
        {
            //wordList is the list of strings passed from Python
            wordObj = PyList_GetItem(wordList, i);
            word = PyString_AsString(wordObj); //word is "18" in the failing case

            //staticWords is the char** array of strings, which has already been malloc'd
            staticWords[i] = malloc(sizeof(char) * strlen(word));

            //Test freeing the word to see if it crashes
            free(staticWords[i]); //Crashes for one specific word

            staticWords[i] = malloc(sizeof(char) * strlen(word));
            strcpy(staticWords[i], word);

            matchObj = PyList_GetItem(wordMatchesList, i);
            if (matchObj == Py_None)
            {
                staticWordMatches[i] = -1;
            }
            else
            {
                staticWordMatches[i] = PyInt_AsLong(matchObj);
            }
        }
    }
    Py_RETURN_NONE;
} 
```

因此，不知何故，*总是且仅针对此特定字符串*，分配内存以将其放入，然后立即释放该内存会导致错误。字符串的实际文本甚至没有复制到内存中。是什么导致了这种神秘的行为？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T16:19:31.837

这里

```
staticWords[i] = malloc(sizeof(char) * strlen(word));
strcpy(staticWords[i], word); 
```

您缺少`0`为“字符串”分配 -termination。因此，对这些字符数组作为字符串的任何操作，很可能会导致未定义的行为。

这样做：

```
{
  int isNull = !word;

  staticWords[i] = calloc(sizeof(*staticWords[i]), (isNull ?0 :strlen(word)) + 1);
  strcpy(staticWords[i], isNull ?"" :word);
} 
```

# apache - 如何使用 htaccess 在 apache 服务器上设置 post_max_size（出现内部服务器错误）

> ID：14125295
> 
> 赞同：7
> 
> 时间：2013-01-02T16:12:11.170
> 
> 标签：apache, .htaccess, post

我正在尝试增加服务器上的最大帖子大小限制。

这是 .htaccess 文件：

```
php_value upload_max_filesize 20M
php_value post_max_size 20M
php_value max_execution_time 200
php_value max_input_time 200 
```

但是它似乎不起作用并引发 500 内部服务器错误。

任何想法为什么会发生这种情况以及如何克服这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T16:34:16.380

据我所知，您的语法是正确的。但是，`php_value`Apache 指令是由`mod_php`模块提供的。如果您不将 PHP 作为 Apache 模块运行（例如，它作为 FastCGI 或与其他一些 SAPI 一起运行），则不会定义该指令，因此会出现 500 错误。

有很多方法可以[更改 PHP 设置](http://php.net/manual/en/configuration.php)。在实践中，我发现运行 CGI 的托管服务通常会`php.ini`在您的 FTP 帐户中的某处提供自定义文件。此外，如果您运行 PHP/5.3.0 或更新版本，您可以使用[`.user.ini`files](http://php.net/manual/en/configuration.file.per-user.php)。最后但并非最不重要的一点是[`ini_set()`](http://php.net/ini_set)代码内部。

# sql - 在没有游标的情况下合并单个 SQL 表中的数据

> ID：14125297
> 
> 赞同：18
> 
> 时间：2013-01-02T16:12:15.517
> 
> 标签：sql, tsql, sql-server-2008, aggregate, database-cursor

我有一个带有 ID 列的表和另一个带有数字的列。一个 ID 可以有多个号码。例如

```
ID | Number
 1 |  25
 1 |  26
 1 |  30
 1 |  24
 2 |  4
 2 |  8
 2 |  5 
```

现在基于这些数据，在一个新表中，我想要这个

```
ID | Low | High 
1  |  24 |  26
1  |  30 |  30
2  |  4  |  5
2  |  8  |  8 
```

如您所见，我想合并数字连续的任何数据，例如 24、25、26。所以现在低点是 24，高点是 26，然后 30 仍然是一个单独的范围。我正在处理大量数据，因此出于性能考虑，我宁愿不使用游标（这是我以前所做的，并且使事情变慢了很多）......实现这一目标的最佳方法是什么? 我不是 SQL 专业人士，所以我不确定是否有可用的函数可以使这更容易，或者最快的方法是什么。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-02T16:24:34.170

关键的观察是一个数字序列减去另一个序列是一个常数。我们可以使用 生成另一个序列`row_number`。这标识了所有组：

```
select id, MIN(number) as low, MAX(number) as high
from (select t.*,
             (number - ROW_NUMBER() over (partition by id order by number) ) as groupnum
      from t
     ) t
group by id, groupnum 
```

剩下的只是聚合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T16:27:57.007

使用 CTE 和递归的解决方案：

```
WITH CTE AS (
  SELECT T.ID, T.NUMBER, T.NUMBER AS GRP
  FROM T 
  LEFT OUTER JOIN T T2 ON T.ID = T2.ID AND T.NUMBER -1 = T2.NUMBER 
  WHERE T2.ID IS NULL
  UNION  ALL
  SELECT T.ID, T.NUMBER, GRP
  FROM CTE 
  INNER JOIN T
  ON T.ID = CTE.ID AND T.NUMBER  = CTE.NUMBER + 1
)
SELECT ID, MAX( NUMBER ), MIN(NUMBER)
FROM CTE
GROUP BY ID, GRP 
```

[fiddlesql 的结果](http://sqlfiddle.com/#!3/e5832/6/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:26:37.693

我建议使用带有**表变量**而不是游标的`WHILE`循环结构。

 **例如，

```
DECLARE @TableVariable TABLE
(
    MyID int IDENTITY (1, 1) PRIMARY KEY NOT NULL,
    [ID] int,
    [Number] int
)

DECLARE @Count int, @Max int

INSERT INTO @TableVariable (ID, Number)
SELECT ID, Number
FROM YourSourceTable

SELECT @Count = 1, @Max = MAX(MyID)
FROM @TableVariable

WHILE @Count <= @Max
BEGIN

    ...do your processing here...

    SET @Count = @Count + 1

END 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-22T07:36:10.750

```
CREATE TABLE Table1
    ([ID] int, [Number] int)
;

INSERT INTO Table1
    ([ID], [Number])
VALUES
    (1, 25),
    (1, 26),
    (1, 30),
    (1, 24),
    (2, 4),
    (2, 8),
    (2, 5)
;

    select ID, 
           MIN(Number)
         ,(SELECT MIN(Number) 
                  FROM (SELECT TOP 2 Number from Table1 WHERE ID =
                  T1.Id ORDER BY Number DESC) as DT)
    from Table1 as T1
    GROUP BY ID
    UNION 
    SELECT ID, MAX(Number), MAX(Number)
    FROM Table1 as T1
    GROUP BY ID; 
```

[现场示例](http://sqlfiddle.com/#!18/89d22/6)**

# java - 按日期降序比较器未按预期工作

> ID：14125298
> 
> 赞同：5
> 
> 时间：2013-01-02T16:12:16.803
> 
> 标签：java, sorting, comparator

试图理解以下输出：

```
public class CommunicationComparator implements Comparator<Communication> {
    @Override
    public int compare(Communication comm1, Communication comm2) {
        long t1 = comm1.getDate().getTime();
        long t2 = comm2.getDate().getTime();
        return (int) (t2 - t1);
    }
} 
```

getDate() 方法返回 java.sql.Timestamp。

这是排序前的输出：

```
for (Communication n : retVal) {
    System.out.println(n.getDate().toString());
} 
```

> 2012-10-03 10:02:02.0
> 2012-10-07 03:02:01.0
> 2012-10-08 13:02:02.0
> 2012-10-09 03:02:00.0
> 2012-11-26 10:02:05.0
> 2012-11-28 11:28:11.0
> 2012-12-03 12:03:01.0
> 2012-12-06 15:03:01.0
> 2012-12-13 14:03:00.0
> 2012-12-28 11:03:00.0
> 2012-12-28 13:49:21.0

之后：

```
Collections.sort(retVal, new CommunicationsComparator()); 
```

> 2012-12-13 14:03:00.0
> 2012-12-06 15:03:01.0
> 2012-12-03 12:03:01.0
> 2012-11-28 11:28:11.0
> 2012-10-09 03:02:00.0
> 2012-10-08 13:02:02.0
> 2012-11-26 10:02:05.0
> 2012-10-07 03:02:01.0
> 2012-10-03 10:02:02.0
> 2012-12-28 13:49:21.0
> 2012-12-28 11:03:00.0

任何想法为什么底部的两个对象可能无法正确排序？我正在使用这个时间戳的 MySQL JDBC 实现。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-02T16:21:00.620

最后 2 个日期和更早日期之间的差异将溢出整数。

也许更好的解决方案是比较这些值，而不是减去它们。

```
 long t1 = comm1.getDate().getTime();
    long t2 = comm2.getDate().getTime();
    if(t2 > t1)
            return 1;
    else if(t1 > t2)
            return -1;
    else
            return 0; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-02T16:19:00.993

如果差异大于约 25 天，则会发生溢出。（一个 int 不能以毫秒为单位表示比大约 25 天更大的时间差）。这将使比较不正确。

这可以通过将 return 语句更改为：

```
return Long.signum(t2 - t1); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-02T16:35:52.760

您可以使用

```
return Long.compare(t2, t1); 
```

但你最好比较日期。

```
return comm2.getDate().compareTo(comm1.getDate()); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-02T16:15:51.500

我的第一个想法是问题是溢出。 `t1`并且`t2`是`long`s。不同的可能不适合 int。

我会检查的。

如果第二级比较对您来说足够好，您应该尝试：

```
return (int) ((t2 - t1)/1000); 
```

这并不能保证不会出现溢出。我至少会添加一个测试。

我认为最好的答案不是我的。我最喜欢的是：

```
 if(t2 > t1)
        return 1;
    else if(t1 > t2)
        return -1;
    else
        return 0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-16T11:45:35.130

在 java 8 及更高版本中，我们可以通过以下方式以非常干净和简单的方式执行此操作：

```
list.stream().max(Comparator.comparing(YourCustomPojo::yourDateField)) 
```

这适用于任何具有支持的字段类型的 Pojo `compareTo()`。`java.sql.Timeastamp`并`java.util.Date`提供对这种方法的开箱即用支持。

[在此处](https://docs.oracle.com/javase/8/docs/api/java/lang/Comparable.html#compareTo-T-)查看 java 文档

# jquery - 根据当前显示的内容更改链接的目标

> ID：14125303
> 
> 赞同：0
> 
> 时间：2013-01-02T16:12:42.450
> 
> 标签：jquery, hyperlink, replace, height, target

再说一次，我对 jQuery 还是很陌生，还有很多看起来很简单的事情却让我困了好几个小时。

现在，我正在尝试替换链接的目标。我知道该怎么做。但问题是，目标必须根据当前显示的 div 进行更改。

这是线框：

![在此处输入图像描述](../Images/2055c394ddc055adeb1a7bfda6ce02fa.png)

链接当然是在箭头上，它固定在视口的底部。您现在可能已经猜到了，当访问者在#div1 上时，我希望链接指向#div2，当他们在#div2 上时指向#div3，依此类推...

我想到了几种方法来做到这一点：

1）箭头可以触发 X 像素的滚动，而不是指向 div 的链接。由于所有的 div 必须具有相同的高度，这将起作用。只是，用户可以随时用鼠标滚动自己，而不是单击箭头。如果他们这样做，之后单击箭头可能会使他们陷入困境。

2) 我可以根据悬停的 div 替换链接的目标。但这会引发另外两个问题：移动设备上的链接根本不会被替换，而且当光标悬停在箭头本身时也不会被替换，因为它是固定的并且高于一切。

因此，理想的解决方案实际上会根据显示的 div 的百分比替换链接的目标：如果显示超过 50% 的#div2，则链接的目标将是#div3。

我认为这将是完美的解决方案。但我完全不知道如何做到这一点。^^

我将不胜感激任何帮助。:-)

提前致谢！

编辑：实际上，现在我想到了，如果显示超过 50% 的某个 div，则解决方案不应该替换链接的目标。div 的高度为 1100 像素，因此如果屏幕定义低于该值的任何人（大多数人）访问该网站，就会出现问题。因此，如果#div2 的可见高度大于#div3 的可见高度，脚本实际上应该将链接的目标替换为#div3。我不知道它是否使解决方案更容易提出。：-/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:22:58.897

这就是我将如何解决您的问题：

我猜你正在使用 Position:relative，在这种情况下，你可以简单地拉动视口内容的偏移量，然后除以每个 DIV 的高度（因为它们都是相同的），就可以得到 DIV 的数量。使用这个数字来确定哪个孩子在视图中（或大多数在视图中），尊重包含它的链接的那个孩子的数据属性。

如果您需要我用代码说明，请告诉我。

希望这可以帮助。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:13:13.853

我认为这就是您要寻找的内容：您的 html 应该是：

```
<div class="wrap" id="div1"></div>
<div class="wrap" id="div2"></div>
<div class="wrap" id="div3"></div>
<div class="wrap" id="div4"></div> 
```

所以只是额外的课程。然后下载这个小库[http://www.appelsiini.net/projects/viewport](http://www.appelsiini.net/projects/viewport)并像这样使用它：

```
$(document).scroll(function(){
var a = "#" + $(".wrap:in-viewport").attr('id');
$('a#arrow').attr('href', a);
}) 
```

当文档滚动时，无论哪个 div 都在视图中，它的 id 被添加到您的箭头锚点中。

希望这是你想要的

# c# - 在 Visual Studio 2008 中将 ac# 项目添加到现有的 c++ 项目中

> ID：14125305
> 
> 赞同：1
> 
> 时间：2013-01-02T16:12:45.543
> 
> 标签：c#, c++, visual-studio-2008

我有一个现有的 c++ 项目和一个单独的 c# 项目。现在我需要将这个现有的 c# 项目添加到 Visual Studio 中的 c++ 项目中，所以当我在 c++ 项目上进行构建时，也应该构建 c# 项目。我如何在 Visual Studio 2008 中做到这一点。在完成此过程之后，将更改哪些文件列表（例如 .sln 等）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:17:10.700

您要做的是将 C# 项目添加到现有*解决方案中*。在解决方案资源管理器中，右键单击解决方案并选择添加 > 现有项目。选择 C# 项目。现在，您的解决方案中将有两个项目（一个 C# 和一个 C++）。构建解决方案时，会构建两个项目。

更改的文件是 *.sln。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:55:20.163

![如何添加现有项目](../Images/77feebdbfc822f942c1a4d056d7983da.png)

右键单击解决方案，然后您必须单击添加按钮以及您必须单击现有项目并选择您的 cs 文件

# paypal - PayPal 订阅 IPN 和其他

> ID：14125310
> 
> 赞同：0
> 
> 时间：2013-01-02T16:12:55.763
> 
> 标签：paypal, paypal-ipn, paypal-subscriptions

我想知道这是否可能，或者是否有一种简单的方法可以做到这一点。我正在构建一个像 Droplr 或 CloudApp 这样的文件共享站点，并且与这两个站点不同的是，我不提供固定定价，而是根据客户使用的存储量提供按使用付费的计费方式。但是计划的年费很小。

因此，假设客户选择第 1 层 - 基本计划。该计划允许最大文件大小为 5GB，费用为 5 美元/年和 1.00 美元/gb

我将如何为此向客户收费？当然，第一笔 5 美元/年的费用可以相当容易地处理并添加到 PayPal 订阅和定期付款中，但是是否应该为存储进行第二次订阅？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:52:52.213

我建议看一下[Adaptive Payments API](https://www.x.com/sites/default/files/pp_adaptivepayments.pdf)，特别是[Preapproval](https://www.x.com/developers/paypal/documentation-tools/api/preapproval-api-operation)和[Pay](https://www.x.com/developers/paypal/documentation-tools/api/pay-api-operation)。

这将允许人们根据创建配置文件时设置的标准与您设置预先批准的付款。然后，只要它们符合配置文件的标准，您就可以随时以可变金额向它们收费。

另一种选择是在通过[Express Checkout](https://www.x.com/developers/paypal/development-and-integration-guides#ec)或[Payments Pro](https://www.x.com/developers/paypal/development-and-integration-guides#wpp)运行原始 Auth 或 Sale 之后使用 Reference Transactions ( [DoReferenceTransaction](https://www.x.com/developers/paypal/documentation-tools/api/doreferencetransaction-api-operation-nvp) ) 。

# magento - 将图像从 Oscommerce 导入 Magento

> ID：14125312
> 
> 赞同：2
> 
> 时间：2013-01-02T16:13:05.123
> 
> 标签：magento, batch-file, data-migration

我正在迁移到 Magento。我正处于需要将图像从 oscommerce 移动到 Magento 的一步。我已经看到 Magento 将产品图片放在 media/catalog/product 中。我还可以看到当将图像添加到此文件夹时，它将上传的文件名的第一个字符作为文件夹和文件扩展名的第二个字符。

所以结构看起来像这样 media/catalog/product/a/b/abc.jpg

是否有一个脚本可以自动创建它，因为我有 3000 多个图像产品要导入？

它需要获取文件名的第一个和第二个字符并从这些字符创建文件夹。然后它将文件转储到最后一个文件夹中，即第二个字符。

干杯，

约拿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:35:40.737

这将遍历图像所在文件夹中的所有文件（只需将目录调整为完整路径），并将`media\catalog\product`根据第一个字母为每个文件（在目录中 - 再次调整为完整路径）创建一个文件夹文件。

然后它将在文件的第二个字母命名的第一个字母下创建一个子文件夹。

与前 2 个字母匹配的所有文件都被移动到子文件夹中（再次，`media\catalog\product`将路径的一部分调整为完整路径）。

```
setlocal enabledelayedexpansion
cd C:\media\catalog\product
for %%a in (C:\imagefolder\*.*) do (
set char=%%~nxa
set char1=!char:~0,1!
set char2=!char:~1,1!
if not exist !char1! md !char1!
if not exist !char1!\!char2! md !char1!\!char2!
move "%%a" !char1!\!char2!
) 
```

# google-analytics - 谷歌分析过滤器 - 丢失数据的危险

> ID：14125313
> 
> 赞同：2
> 
> 时间：2013-01-02T16:13:09.907
> 
> 标签：google-analytics

我不断看到诸如“而且，您应该始终为过滤器创建不同的配置文件。保留一个没有过滤器的单独原始配置文件”之类的东西，这意味着如果您设置不正确的过滤器，您可能会永久丢失数据。有人能解释一下危险是什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:18:49.870

过滤器可以删除部分数据或所有数据。

由于您无法使用 Google Analytics 及时返回并恢复数据，因此这些数据可能会永远丢失。

如果您保留额外的“原始”或未过滤的配置文件，您并没有丢失过滤器可能有意或无意删除的任何数据。

搞砸过滤器并无意中删除所有数据真的很容易。

来自谷歌：

> > 不正确的过滤器设置可能会影响您看到的数据，并且可能会无意中过滤掉报告中的所有数据。

# windows - 如何检查是否使用 Ant 安装了 Windows Installer 产品

> ID：14125314
> 
> 赞同：0
> 
> 时间：2013-01-02T16:13:13.310
> 
> 标签：windows, deployment, ant, windows-installer, installation

我正在使用 Ant 在不同的机器上部署和安装一些 Windows Installer 包 (MSI)。

在尝试安装之前，我想让 Ant 检查机器中是否已经安装了 msi 包（使用 ProductCode）。

有没有办法在 Ant 中添加条件来检查 msi 产品是否已经安装？

我发现要查询 Windows Installer 产品，您可以使用 API： [链接](http://support.microsoft.com/kb/974653)和[另一个链接](https://stackoverflow.com/questions/3526449/how-to-get-a-list-of-installed-software-products)

我认为我唯一的选择是构建一个接收 ProductCode 并使用 API 来查看是否安装了 msi 的 .exe。然后它以某种方式告诉 Ant 产品是否已安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:39:25.583

我对 Ant（NAnt 和 MSBuild；是的）并没有太多经验，但据我所知，您可以编写一个“外部任务”并从您的构建脚本中调用它。我假设外部任务是使用 Java 编写的。我还假设在 Java（JNI？）中以某种方式可以调用 Win32 或 COM API，所以我认为可以创建一个将 ProductCode 或 UpgradeCode 作为参数并返回有关是否是否安装了某些东西。

# c# - 区分 C# SqlConnection 中具有相同名称的 2 个 SQL 列名

> ID：14125316
> 
> 赞同：14
> 
> 时间：2013-01-02T16:13:16.867
> 
> 标签：c#, asp.net, sql-server

我在 SQL 查询中使用不同的别名两次加入了相同的 2 个表，以使我能够选择 2 个（可能但不总是）不同的地址 ID，然后链接到地址表。

```
SELECT C.court_id, C.court_name, CA.court_address, CA2.court_address...
FROM court C " +
JOIN court_addr CA ON C.court_addr_id = CA.court_addr_id " +
JOIN court_addr CA2 ON C.court_postal_addr_id = CA2.court_addr_id " + ... 
```

现在，当尝试使用 ASP.NET C# 输出此查询的结果时，我不确定如何将两个地址中的哪一个指定给 Response.Write。将别名放在列名前面（如下面的第 4 个字符串值）不起作用并会导致错误。尽管它们在数据库中具有相同的列名，但有没有办法区分 C# 中的两个地址？

```
while (myDataReader.Read())
{
    string court_id = myDataReader["court_id"].ToString();
    string court_name = myDataReader["court_name"].ToString();
    string court_address = myDataReader["court_address"].ToString();
    string court_postal_address = myDataReader["CA2.court_address"].ToString(); 
    etc..... 
```

非常感谢你提前

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-02T16:15:14.733

您应该在 sql 中使用别名来区分它们，然后您将能够返回正确的值：

```
SELECT C.court_id, 
  C.court_name, 
  CA.court_address as CACourtAddress, 
  CA2.court_address as CA2CourtAddress
FROM court C " +
JOIN court_addr CA ON C.court_addr_id = CA.court_addr_id " +
JOIN court_addr CA2 ON C.court_postal_addr_id = CA2.court_addr_id " + ... 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T16:28:15.000

**您应该使用别名来区分具有相同名称的两列，例如：**

```
SELECT C.court_id, C.court_name, CA.court_address CourtAddress, CA2.court_address CourtPostalAddress FROM court C 
JOIN court_addr CA ON C.court_addr_id = CA.court_addr_id 
JOIN court_addr CA2 ON C.court_postal_addr_id = CA2.court_addr_id 
```

**然后在 C# 中，您可以非常轻松地访问它们：**

```
 string court_id = myDataReader["court_id"].ToString();
 string court_name = myDataReader["court_name"].ToString();
 string court_address = myDataReader["CourtAddress"].ToString();
 string court_postal_address = myDataReader["CourtPostalAddress"].ToString(); 
```

我希望这有助于解决您的问题:)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T16:18:22.370

如果您无法修改查询，则可以通过索引访问列。

```
var foo = MyDataReader[0].ToString(); 
```

或者您可以使用`AS`sql 语句中的关键字修改查询。

```
SELECT foo AS bar FROM Baz 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T16:18:27.783

除了像 bluefeet 建议的那样提供列名别名之外，另一种方法是通过索引而不是 C# 中的名称来访问值。

```
string theValue = myReader[0] as string ?? String.Empty; 
```

然而，这要求列的顺序永远不会改变，因此要小心使用。此外，这仅适用于您在 SQL 语句中按给定顺序按名称专门选择列。

这可能不适用于 a `SELECT *`，因为返回列的顺序在 a 中不固定`SELECT *`。

# php - php 解析ps aux | grep ...结果

> ID：14125319
> 
> 赞同：5
> 
> 时间：2013-01-02T16:13:20.083
> 
> 标签：php, regex

我有一个系统脚本，它运行并将“ps aux | grep 实用程序”的结果通过管道传输到一个文本文件并 chowns 文本文件，以便 Web 服务可以读取该文件并在我的 Web 应用程序中显示结果。

以下是原始结果的示例：

```
user     12052  0.2  0.1 137184 13056 ?        Ss   10:00   0:00 php /home/user/public_html/utilities/runProcFile.php cust1 cron
user     12054  0.2  0.1 137184 13064 ?        Ss   10:00   0:00 php /home/user/public_html/utilities/runProcFile.php cust3 cron
user     12055  0.6  0.1 137844 14220 ?        Ss   10:00   0:00 php /home/user/public_html/utilities/runProcFile.php cust4 cron
user     12057  0.2  0.1 137184 13052 ?        Ss   10:00   0:00 php /home/user/public_html/utilities/runProcFile.php cust89 cron
user     12058  0.2  0.1 137184 13052 ?        Ss   10:00   0:00 php /home/user/public_html/utilities/runProcFile.php cust435 cron
user     12059  0.3  0.1 135112 13000 ?        Ss   10:00   0:00 php /home/user/public_html/utilities/runProcFile.php cust16 cron
root     12068  0.0  0.0 106088  1164 pts/1    S+   10:00   0:00 sh -c ps aux | grep utilities > /home/user/public_html/logs/dashboard/currentlyPosting.txt
root     12070  0.0  0.0 103240   828 pts/1    R+   10:00   0:00 grep utilities 
```

当我的 php 脚本解析这个文本文件时，我只需要提取以下内容（只是一个示例）：

```
cust1
cust3
cust4
cust89
cust435
cust16 
```

我尝试了许多不同的笨拙方法，但似乎没有任何效果。我在下面列出的方式有效，但有时也会抓取垃圾，因为一行中的“空格”数量会随着变化而爆炸。

```
public function showProcesses() {
    $lines = file(DIR_LOGGER_ROOT . "dashboard/currentlyPosting.txt");
    $results = array();
    $i = 0;
    foreach($lines as $line) {
        if (preg_match("/php/i", $line)) {
            $userProcess = explode(" ", $line);
            if($userProcess[29] != "0:00" && strlen($userProcess[29]) < 20) {
                $results[$i] = $userProcess[29];
                $i++;
            }
        }
    }
    return $results;
} 
```

你们中的一些人可以为此发布优雅的解决方案吗？我正在努力学习更好的做事方式，并希望得到指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:21:02.197

您可以使用[`preg_split`](http://php.net/manual/en/function.preg-split.php)代替`explode`并拆分`[ ]+`（一个或多个空格）。但我认为在这种情况下，您可以使用[`preg_match_all`](http://php.net/manual/en/function.preg-match-all.php)并[捕获](http://www.regular-expressions.info/brackets.html)：

```
preg_match_all('/[ ]php[ ]+\S+[ ]+(\S+)/', $input, $matches);
$result = $matches[1]; 
```

该模式匹配一​​个空格`php`、多个空格、一个非空格字符串（路径）、更多空格，然后捕获下一个非空格字符串。第一个空格主要是为了确保您不匹配`php`作为用户名的一部分，而实际上只是作为命令。

捕获的替代方法是 PCRE 的“保留”功能。如果您`\K`在模式中使用，则在匹配中丢弃之前的所有内容：

```
preg_match_all('/[ ]php[ ]+\S+[ ]+\K\S+/', $input, $matches);
$result = $matches[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:20:32.413

我会用`preg_match()`. 我为我的许多系统管理脚本做了类似的事情。这是一个例子：

```
$test = "user     12052  0.2  0.1 137184 13056 ?        Ss   10:00   0:00 php /home/user/public_html/utilities/runProcFile.php cust1 cron
user     12054  0.2  0.1 137184 13064 ?        Ss   10:00   0:00 php /home/user/public_html/utilities/runProcFile.php cust3 cron
user     12055  0.6  0.1 137844 14220 ?        Ss   10:00   0:00 php /home/user/public_html/utilities/runProcFile.php cust4 cron
user     12057  0.2  0.1 137184 13052 ?        Ss   10:00   0:00 php /home/user/public_html/utilities/runProcFile.php cust89 cron
user     12058  0.2  0.1 137184 13052 ?        Ss   10:00   0:00 php /home/user/public_html/utilities/runProcFile.php cust435 cron
user     12059  0.3  0.1 135112 13000 ?        Ss   10:00   0:00 php /home/user/public_html/utilities/runProcFile.php cust16 cron
root     12068  0.0  0.0 106088  1164 pts/1    S+   10:00   0:00 sh -c ps aux | grep utilities > /home/user/public_html/logs/dashboard/currentlyPosting.txt
root     12070  0.0  0.0 103240   828 pts/1    R+   10:00   0:00 grep utilities";

$lines = explode("\n", $test);

foreach($lines as $line){
        if(preg_match("/.php[\s+](cust[\d]+)[\s+]cron/i", $line, $matches)){
                print_r($matches);
        }

} 
```

以上打印：

```
Array
(
    [0] => .php cust1 cron
    [1] => cust1
)
Array
(
    [0] => .php cust3 cron
    [1] => cust3
)
Array
(
    [0] => .php cust4 cron
    [1] => cust4
)
Array
(
    [0] => .php cust89 cron
    [1] => cust89
)
Array
(
    [0] => .php cust435 cron
    [1] => cust435
)
Array
(
    [0] => .php cust16 cron
    [1] => cust16
) 
```

您可以设置`$test`为等于 exec 的输出。您要查找的值将`if`在`foreach`. `$matches[1]`将具有 custx 值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:21:56.317

如果值之间的行中的空格数是可变的，则可以使用[`preg_split`](http://php.net/manual/en/function.preg-split.php)

你只需要改变：

```
$userProcess = explode(" ", $line); 
```

至：

```
$userProcess = preg_split("#\s+#", $line); 
```

`\s+`将匹配一个或多个空格、制表符或其他空白字符。

然后你可以得到倒数第二个项目：

```
$txt = $userProcess[count($userProcess) - 2]; 
```

# github - 存储库描述中的灰色矩形是什么意思？

> ID：14125320
> 
> 赞同：2
> 
> 时间：2013-01-02T16:13:22.343
> 
> 标签：github

![截屏](../Images/3c9174d8826cd8a6ec7be83a49e8fab9.png)[截屏]：

我可以在哪里阅读更多相关信息？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:23:43.763

这是存储库的提交活动。栏越高，提交的次数越多。

不幸的是，我找不到任何参考！我能找到的最接近的是关于 github 提供的其他可视化的信息：[https ://github.com/blog/1093-introducing-the-new-github-graphs](https://github.com/blog/1093-introducing-the-new-github-graphs)

# c++ - 声明可变长度数组

> ID：14125322
> 
> 赞同：3
> 
> 时间：2013-01-02T16:13:34.140
> 
> 标签：c++, visual-c++

> **可能重复：**
> [C++ 中的可变长度数组？](https://stackoverflow.com/questions/1887097/variable-length-arrays-in-c)

我正在尝试形成一个数组，其大小由用户输入的另一个变量控制。我是 C++ 编码的初学者，我正在使用 Visual Studio 2008 专业编译器。这是编译器显示错误的代码：

```
double kplus2(double a, double ks, double kr)
{
    int n = (ks-1)*100000;
    double x[n]; 
```

错误是

> 错误 2 错误 C2057：预期的常量表达式
> 错误 3 错误 C2466：无法分配常量大小的数组 0
> 错误 4 错误 C2133：'x'：未知大小

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-02T16:22:17.020

> 我正在尝试形成一个数组，其大小由用户输入的另一个变量控制。

C++ 已经具有此功能。它被调用[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)并存在于 header 中`<vector>`。

```
double kplus2(double a, double ks, double kr)
{
    int n = (ks-1)*100000;
    std::vector<double> x(n); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T16:16:40.023

您需要动态分配内存，如下所示：

```
double *p = new double[n]; 
```

您可以像使用数组一样使用它，因为 C++ 中的指针语法很方便：

```
p[0] = 3.14;
p[n-1] = 1.14; 
```

完成使用后，您必须使用`delete`运算符丢弃内存：

```
delete [] p; 
```

请注意，我们使用运算符的矢量 [] 版本，`delete`因为我们使用了运算符的矢量版本`new`。

请注意，某些编译器有一个扩展，它允许像您尝试编码的那样动态调整大小的本地数组。gcc 就是这样一种编译器。这还不是语言标准的一部分，尽管有一天它可能是。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T16:53:14.883

您可以使用矢量。它也可以在运行时调整大小，因此如果您想添加更多数据，您不必担心创建所需大小的新数组并在其中复制当前数据。

您可以使用矢量，这是解决问题的更好方法，因为它的风险较小；

```
double kplus2(double a, double ks, double kr)
{
  int n = (ks-1)*100000;

  vector<double> x(n);  // you don't have to worry about deallocating it cuz its a container. It can grow in size at run time

  ...

 return 0;

} 
```

但是，您也可以这样做：

```
double kplus2(double a, double ks, double kr)
{
  int n = (ks-1)*100000;

  double *x=new double[n]; // array of size i

  // you should also deallocate this dynamically allocated array at the end

  .....

  delete []x;

  return 0; 
```

}

# ios5 - 相册中没有统一类型标识符？

> ID：14125326
> 
> 赞同：1
> 
> 时间：2013-01-02T16:14:02.017
> 
> 标签：ios5, uti

当我打开相册中的照片时，选择左下角的分享按钮，没有我使用统一类型标识符注册到 iphone 的应用程序图标。那是什么技术，我怎样才能让我的应用程序图标出现在那个列表中？？？？

# c - 如何将结果从内存中保存到文件 *.txt

> ID：14125332
> 
> 赞同：-1
> 
> 时间：2013-01-02T16:14:20.737
> 
> 标签：c, file-io, segmentation-fault, malloc, matrix-multiplication

我正在尝试使用 2 个文件作为参数（mat1.txt 和 mat2.txt）来实现一个矩阵乘法程序。我决定将结果加载到一个文件中，但是当我执行程序时：./m mat1.txt mat2.txt 20 20 20 20（每个矩阵的文件名和行数和列数），我得到错误：分段错误（核心转储）。问题在于文件结果的创建或写入，你能帮我吗？代码如下：

```
 /* Memory management */
mem_mat1 = (int *) malloc(M1 * N1 * sizeof(int));
if (mem_mat1 == NULL) {
    fprintf(stderr,"Error: malloc mem_mat1\n");
    /*MPI_Finalize();*/
    return (3);
}

mat1 = (int **) malloc(M1 *sizeof(int *));
if (mat1 == NULL) {
    fprintf(stderr,"Error: malloc mat1\n");
    /*MPI_Finalize();*/
    return (3);
} 

for (i=0; i<M1; i++) {
    mat1[i] = mem_mat1+(i*N1);
}

mem_mat2 = (int *) malloc(M2 * N2 * sizeof(int));
if (mem_mat2 == NULL) {
    fprintf(stderr,"Error: mem_mat2\n");
    /*MPI_Finalize();*/
    return (3);
}

mat2 = (int **) malloc(M2 *sizeof(int *));
if (mat2 == NULL) {
    fprintf(stderr,"Error: malloc mat2\n");
    /*MPI_Finalize();*/
    return (3);
} 

for (i=0; i<M2; i++) {
    mat2[i] = mem_mat2+(i*N2);
}

mem_matR = (int *) malloc(M1 * N2 * sizeof(int));
if (mem_matR == NULL) {
    fprintf(stderr,"Error: malloc mem_matR\n");
    /*MPI_Finalize();*/
    return (3);
}

matR = (int **) malloc(M1 *sizeof(int *));
if (matR == NULL) {
    fprintf(stderr,"Error: malloc matR\n");
    /*MPI_Finalize();*/
    return (3);
}

for (i=0; i<M1; i++) {
    matR[i] = mem_matR+(i*N2);
}

/* SEQUENTIAL PRODUCT MATRIX */

/*Open and Read file 1: mat1.txt*/
fmat1 = fopen(argv[1],"rb");
fread(mat1, M1 *sizeof(int *), N1 *sizeof(int *), fmat1);

/*Open and Read file 2: mat2.txt*/
fmat2 = fopen(argv[2],"rb");
fread(mat2, M2 *sizeof(int *), N2 *sizeof(int *), fmat2);

/*Create a file to write the result fmatR.txt*/
fdR = creat("matR.txt", "w");
if (fdR < 0) {
    fprintf(stderr, "Error create result file\n");
    return(2);
}

for (i=0;i<M1;i++) {
    for (j=0;j<N2;j++) {
        sum=0;
        for (k=0;k<N1;k++) {
            sum+=mat1[i][k]*mat2[k][j];
            matR[i][j]=sum;
        }
    }
 }
 write(fdR, &matR, M1*N2 *sizeof(int)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:50:53.280

我认为您在使用 matR 编写随机存储器时遇到了一些麻烦……最后一行也是错误的。

使固定：

1) 拿走**mem_matR**以及与之相关的所有代码

2）让**matR**是指向矩阵的第一个元素（你的缓冲区）的指针，让它成为一个简单的 M1xN2 元素的一维数组

```
matR = (int *) malloc( M1 * N2 * sizeof(int)); 
```

3）在最后的for循环中以这种方式编写matR

```
matR[j+i*N2]=sum; 
```

4）最后以这种方式保存数据

```
write(fdR, (void *) matR, M1*N2 *sizeof(int)); 
```

--

我也认为 fread 调用是错误的（即使这不会引起问题）

```
fread(mat1, M1 *sizeof(int *), N1 *sizeof(int *), fmat1); 
```

如果我了解您有一个整数 M1 x N1 元素的矩阵。所以...

```
fread(mat1, sizeof(int *), M1 * N1, fmat1); 
```

这同样适用于第二次通话

# javascript - 登录表单验证

> ID：14125341
> 
> 赞同：2
> 
> 时间：2013-01-02T16:14:43.157
> 
> 标签：javascript, jquery, html

我在下面有验证表单的代码。但是，此代码中有一个错误。当我在用户名中输入内容并将密码留空时，表单会接受它。它不应该接受它。知道为什么吗？

```
<html> 

     <head>  <link type = "text/css" type="text/javascript" rel="stylesheet" href="css/bootstrap.css" />
              <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
       <script type="text/javascript" src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"></script>

       <script src="js/bootstrap.js"> </script>
     <script> 
       $(document).ready(function() {
    $('form').validate({
        submitHandler: function(form) { // for demo
            alert('valid form');
            return false;
        }
    });
});</script>
     </head> 

 <body> 
<form class="well span6"> 

     <label>Username</label> 
     <input type="text" id="myName" class="span3 required" placeholder="Type your username here..." />  <br/> 

      <label>Password</label> 
     <input type="text" id="myPassword" class="span3 required" placeholder="Type your password here..." /> <br/> 

     <input type="submit" class ="btn btn-primary">
     <!-- <button class=""> Clear <br/></button><br/> -->

</form> 

</body> 

</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T16:27:10.920

我很确定这个验证插件就像字段上的“名称”属性。

我在每个输入上都添加了`name="myName`和`name="myPassword`，它似乎在这个[jsfiddle中工作](http://jsfiddle.net/E6CC9/1/)

```
<form class="well span6">    
     <label>Username</label> 
     <input name="myName" type="text" id="myName" class="span3 required" placeholder="Type your username here..." /><br/> 

      <label>Password</label> 
     <input name="myPassword" type="text" id="myPassword" class="span3 required" placeholder="Type your password here..." /><br/> 

     <input type="submit" class="btn btn-primary">
</form> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T16:32:49.230

尝试通过将“名称”属性添加到密码和用户名字段。

# c# - 提前初始化 XMLSerialize 以节省运行时成本

> ID：14125345
> 
> 赞同：1
> 
> 时间：2013-01-02T16:15:02.347
> 
> 标签：c#, windows-mobile

我有一堆类型化的 xmlserialize 对象：

```
class Serializer{

        static XmlSerializer serializerRequest_EnterVehicle = new XmlSerializer(typeof(Request_EnterVehicle));
        static XmlSerializer serializerRequest_Cancel = new XmlSerializer(typeof(Request_Cancel));
        static XmlSerializer serializerRequest_PrintInfo = new XmlSerializer(typeof(Request_PrintInfo));

    public string ObjToXML(object toSerialize)...
} 
```

我不想在运行时创建这些，而是​​想让它们在应用程序启动时初始化这些是 Serializer 类的一部分，我不确定这是一个好方法吗？有没有更好的方法来进行这种初始化，还有其他相关的成本吗？

我是否正确假设此初始化成本仅通过使用 static 关键字完成一次？

编辑：该项目是一个适用于 windows mobile 6.1 Pro 设备的 .NET 3.5 Compact Framework 项目。

更新：

```
using System;

using System.Collections.Generic;
using System.Text;
using System.Xml.Serialization;

namespace SmartDevice_Proxy
{
    public sealed class TypedXMLSerializers
    {
        private static volatile TypedXMLSerializers instance;
        private static object syncRoot = new Object();

        //Implementation as Singleton
        static XmlSerializer serializerRequest_EnterVehicle = new XmlSerializer(typeof(Request_EnterVehicle));
        static XmlSerializer serializerRequest_Cancel = new XmlSerializer(typeof(Request_Cancel));
        static XmlSerializer serializerRequest_PrintInfo = new XmlSerializer(typeof(Request_PrintInfo));

        private TypedXMLSerializers() { }

        public static TypedXMLSerializers Instance
        {
            get
            {
                if (instance == null)
                {
                    lock (syncRoot)
                    {
                        if (instance == null)
                            instance = new TypedXMLSerializers();
                    }
                }

                return instance;
            }
        }
    }
} 
```

需要对此进行测试以确保线程安全。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:30:41.697

您可以实现单例模式

链接：[http ://www.yoda.arachsys.com/csharp/singleton.html](http://www.yoda.arachsys.com/csharp/singleton.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:24:52.657

答案是肯定的，如果这些`XmlSerializer`s 变量不是静态的，那么每次你启动你的类`class Serializer`时，它们都会为那个类初始化。

当它们是静态的时，它们不一定会在应用程序启动时被初始化，它们只会在第一次调用其中的任何静态或非静态成员（函数或变量）时被初始化一次`class Serializer`。

如果在整个应用程序过程中只有一个实例`class Serializer`，那么将它们设置为`static`静态或非静态将没有真正的区别。

**编辑：**

根据您的情况，您可能对此感兴趣：

[在 C# 中实现单例](http://msdn.microsoft.com/en-us/library/ff650316.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:26:19.360

将它们设为静态将在您的代码中第一次使用该类时创建实例。这样做的唯一额外开销是内存将在应用程序运行的整个时间内使用。仅使用此类的少数实例，性能提升将大大超过这种小内存使用量。

此外，您可以在编译时生成序列化程序集。在您的 c# 项目中，转到**属性**，然后转到**构建**选项卡。靠近底部的是**生成序列化程序集**选项。这将使用 sgen.exe 工具来预编译您的`XmlSerializer`程序集。如果不在编译时完成，则在运行时完成。

[MSDN上的项目设置文档](http://msdn.microsoft.com/en-us/library/kb4wyys2%28v=vs.100%29.aspx)

# android - SlidingMenu - Resources$NotFoundException

> ID：14125348
> 
> 赞同：0
> 
> 时间：2013-01-02T16:15:15.670
> 
> 标签：android, android-resources, sliding

**错误：**

我在这一行中遇到了 Resources$NotFoundException 的错误`setContentView(R.layout.view_pager_and_titles);`我已经测试了许多其他布局，我刚刚获得了一个工作示例并尝试将布局更改为工作示例，但无论我做什么，总是会出现这个错误。

我正在使用 SlidingMenu、ViewPagerIndicator 和 SherlockActionBar。

**滑动片段活动：**

```
public class MainActivity extends SlidingFragmentActivity {

    ViewPager mViewPager;
    FragmentPagerAdapter mPagerAdapter;
    protected ListFragment mFrag;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_pager_and_titles);

        // set the Behind View
        setBehindContentView(R.layout.menu_frame);
        FragmentTransaction t = this.getSupportFragmentManager()
                .beginTransaction();
        mFrag = new SampleListFragment();
        t.replace(R.id.menu_frame, mFrag);
        t.commit();

        // customize the SlidingMenu
        SlidingMenu sm = getSlidingMenu();
        sm.setShadowWidthRes(R.dimen.shadow_width);
        sm.setShadowDrawable(R.drawable.shadow);
        sm.setBehindOffsetRes(R.dimen.actionbar_home_width);
        setSlidingActionBarEnabled(true);

        mPagerAdapter = new FragmentPagerAdapter(getSupportFragmentManager());
        final ActionBar mActionBar = getSupportActionBar();
        mActionBar.setDisplayHomeAsUpEnabled(true);

        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mPagerAdapter);

    }

01-02 13:10:28.224: E/AndroidRuntime(899): FATAL EXCEPTION: main
01-02 13:10:28.224: E/AndroidRuntime(899): java.lang.RuntimeException: Unable to start activity ComponentInfo{br.com.example.nightid.main.BaseSampleActivity}: android.content.res.Resources$NotFoundException: Resource ID #0x7f040060 type #0x12 is not valid
01-02 13:10:28.224: E/AndroidRuntime(899):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1647)
01-02 13:10:28.224: E/AndroidRuntime(899):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1663)
01-02 13:10:28.224: E/AndroidRuntime(899):  at android.app.ActivityThread.access$1500(ActivityThread.java:117)
01-02 13:10:28.224: E/AndroidRuntime(899):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:931)
01-02 13:10:28.224: E/AndroidRuntime(899):  at android.os.Handler.dispatchMessage(Handler.java:99)
01-02 13:10:28.224: E/AndroidRuntime(899):  at android.os.Looper.loop(Looper.java:130)
01-02 13:10:28.224: E/AndroidRuntime(899):  at android.app.ActivityThread.main(ActivityThread.java:3683)
01-02 13:10:28.224: E/AndroidRuntime(899):  at java.lang.reflect.Method.invokeNative(Native Method)
01-02 13:10:28.224: E/AndroidRuntime(899):  at java.lang.reflect.Method.invoke(Method.java:507) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T18:17:58.653

您可以使用eclipse中的搜索功能，搜索

> ### “0x7f040060”

* * *

或前往

> ### projectfolder/gen/path/R.java 包含您的资源。

你会发现这样的东西：

```
public static final int Someid=0x7f040060; //These Id is cause error. Also check that under which  class these line contains[Either layout or id or watever].Please check twice that "Someid" is properly mentioned R.layout.Someid or R.id.Someid under proper layout or id. 
```

如果它处于可绘制状态，那么恐怕会尝试替换该图像文件

它将带您到代码中的资源。

希望这些可以帮助你:)

# java - 为什么当数据报套接字缓冲区大小很大时，丢弃率很高

> ID：14125354
> 
> 赞同：3
> 
> 时间：2013-01-02T16:15:40.003
> 
> 标签：java, networking, network-programming, udp

我正在编写基于 UDP 的网络协议。我遇到了 DatagramSocket 的奇怪行为。当我设置大发送缓冲区时，丢弃率很高，但它应该是相反的。

任何想法为什么它会这样？

提前谢谢！

“*大缓冲区大小*”是指 16-32 Mb

我的测试环境是 1Gbit 网络，具有高延迟（240 毫秒往返）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:22:30.390

网络适​​配器和路由器中的缓冲区是有限的。如果你填写它们，即使有很多小消息，数据包也可能被丢弃。某些路由器的每个连接的缓冲区大小为 1 MB（因此，如果将其连接到路由器，则该连接上所有内容的总和）

# python - Pyparsing重复模式的序列

> ID：14125355
> 
> 赞同：2
> 
> 时间：2013-01-02T16:15:49.413
> 
> 标签：python, pyparsing, lexical-analysis

昨天我发布了一个与此类似的问题： [Python Regex Named Groups](https://stackoverflow.com/questions/14111837/python-regex-named-groups)。这项工作非常适合简单的事情。

经过一番研究，我读到了 pyparsing 库，它似乎非常适合我的任务。

```
text = '[@a eee, fff fff, ggg @b eee, fff, ggg @c eee eee, fff fff,ggg ggg@d]'
command_s = Suppress(Optional('[') + Literal('@'))
command_e = Suppress(Literal('@') | Literal(']'))
task = Word(alphas)
arguments = ZeroOrMore(
    Word(alphas) + 
    Suppress(
        Optional(Literal(',') + White()) | Optional(White() + Literal('@'))
    )
)
command = Group(OneOrMore(command_s + task + arguments + command_e))
print command.parseString(text)

# which outputs only the first @a sequence
# [['a', 'eee', 'fff', 'fff', 'ggg']]

# the structure should be someting like:
[
     ['a', 'eee', 'fff fff', 'ggg'],
     ['b', 'eee', 'fff', 'ggg'],
     ['c', 'eee eee', 'fff fff', 'ggg ggg'],
     ['d']
] 
```

@ 表示序列的开始，第一个单词是任务 (a)，后跟可选的逗号分隔参数 (eee, fff fff, ggg)。问题是，上面的代码忽略了@b、@c 和@d。“fff fff”也被视为两个单独的参数，它应该只是一个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:33:15.080

请参阅嵌入的评论。

```
text = '[@a eee, fff fff, ggg @b eee, fff, ggg @c eee eee, fff fff,ggg ggg@d]'

from pyparsing import *

LBRACK,RBRACK,AT = map(Suppress,"[]@")

key = AT + Word(alphas)

# use originalTextFor to preserve whitespace between words between commas
list_item = originalTextFor(OneOrMore(Word(alphas)))

# define a key_value pair using Group to preserve structure
key_value = Group(key + Optional(delimitedList(list_item)))

parser = LBRACK + OneOrMore(key_value) + RBRACK
print parser.parseString(text) 
```

这将打印您想要的输出。

```
[['a', 'eee', 'fff fff', 'ggg'], 
 ['b', 'eee', 'fff', 'ggg'], 
 ['c', 'eee eee', 'fff fff', 'ggg ggg'], 
 ['d']] 
```

对于额外的功劳，这里是如何让 pyparsing 为您定义键：

```
# Extra credit:
# use Dict to auto-define named groups using each '@x' as a key
parser = LBRACK + Dict(OneOrMore(key_value)) + RBRACK
result = parser.parseString(text)

# print the parsed keys
print result.keys()

# print a value for a particular key
print result['c']

# print a value for a particular key using object notation
print result.b

# dump out the whole structure to see just what we got
print result.dump() 
```

印刷

```
['a', 'c', 'b', 'd']
['eee eee', 'fff fff', 'ggg ggg']
['eee', 'fff', 'ggg']
[['a', 'eee', 'fff fff', 'ggg'], ['b', 'eee', 'fff', 'ggg'], ['c', 'eee eee', 'fff fff', 'ggg ggg'], ['d']]
- a: ['eee', 'fff fff', 'ggg']
- b: ['eee', 'fff', 'ggg']
- c: ['eee eee', 'fff fff', 'ggg ggg']
- d: 
```

# vb.net - 如何从 vb.net 中的另一个类访问网页上的控件

> ID：14125359
> 
> 赞同：1
> 
> 时间：2013-01-02T16:16:07.060
> 
> 标签：vb.net, class, dynamic, textbox, controls

我有一个名为部门的网页，它正在代码隐藏中调用另一个类。此类为部门页面创建动态对象并将它们加载到其中。例如，它将根据从数据库中读取的数据加载显示数据、按钮、文本框等的网格视图。

在这个类中，我创建了一个上传 DIV，其中包含一个文件上传文本框和一个提交按钮。我正在尝试使用我动态创建的提交按钮上传文件上传文本字段中的内容（用户从他们的电脑中选择一个文件并加载位置和文件名）。在提交按钮的单击事件中，我需要弄清楚如何从部门页面的文本字段中获取该信息。我在访问此 b/c 时遇到问题，它不是文件后面的部门页面代码，而是与部门页面分开的另一个类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:22:26.820

您必须将部门页面中的信息传递到您的类的方法或属性中。如果您调用的类是 UserControl，您可以将 Parent.Page 转换为 Departments 并将该字段作为属性访问。

# php - 在html中添加多行时表单的输出给我单词“ARRAY”

> ID：14125360
> 
> 赞同：0
> 
> 时间：2013-01-02T16:16:15.890
> 
> 标签：php, javascript, html, post, echo

我有一个表单，其中包含来自数据库的自动完成，然后当用户提交时，它将结果发送到 pdf 并将其发送到电子邮件.. 但是当我测试它的一行时它成功但是当添加更多行时，pdf 给我这个词“数组”是代码。

index.php

```
<?php require("login3.php"); ?>
 <?php
 if (!empty($_POST)) {

// Used for later to determine result
$success = $error = false;

// Object syntax looks better and is easier to use than arrays to me
$post = new stdClass;

// Usually there would be much more validation and filtering, but this
// will work for now.
foreach ($_POST as $key => $val)
    $post->$key = trim(strip_tags($_POST[$key]));

// Check for blank fields
if (empty($post->itemCode) OR empty($post->itemDesc) OR empty($post->itemQty) OR             empty($post->itemPrice) OR empty($post->itemAgent))
    $error = true;

else {

    // Get this directory, to include other files from
    $dir = dirname(__FILE__);

    // Get the contents of the pdf into a variable for later
    ob_start();
    require_once($dir.'/pdf.php');
    $pdf_html = ob_get_contents();
    ob_end_clean();

    // Load the dompdf files
    require_once($dir.'/dompdf/dompdf_config.inc.php');

    $dompdf = new DOMPDF(); // Create new instance of dompdf
    $dompdf->load_html($pdf_html); // Load the html
    $dompdf->render(); // Parse the html, convert to PDF
    $pdf_content = $dompdf->output(); // Put contents of pdf into variable for later  

    // Get the contents of the HTML email into a variable for later
    ob_start();
    require_once($dir.'/html.php');
    $html_message = ob_get_contents();
    ob_end_clean();

    // Load the SwiftMailer files
    require_once($dir.'/swift/swift_required.php');

    $mailer = new Swift_Mailer(new Swift_MailTransport()); // Create new instance of SwiftMailer

    $message = Swift_Message::newInstance()
                   ->setSubject('New Order') // Message subject
                   ->setTo(array('hussammoz@aol.com',  'hussammoz@gmail.com' => 'Orange Pharmacy Store')) // Array of people to send to
                   ->setFrom(array('no-reply@net.tutsplus.com' => 'Orange Pharmacy Order System')) // From:
                   ->setBody($html_message, 'text/html') // Attach that HTML message from earlier
                   - >attach(Swift_Attachment::newInstance($pdf_content, 'nettuts.pdf', 'application/pdf')); // Attach the generated PDF from earlier

    // Send the email, and show user message
    if ($mailer->send($message))
        $success = true;
    else
        $error = true;

}

   }
   ?>
       <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">
      <html>
      <head>
   <title>Orange Pharmacy Order System</title>
   <style type="text/css" title="currentStyle">
            @import "css/layout-styles.css";
            @import "css/themes/smoothness/jquery-ui-1.8.4.custom.css";
</style>

<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

<!-- jQuery libs -->
<script  type="text/javascript" src="js/jquery-1.6.1.min.js"></script>
<script  type="text/javascript" src="js/jquery-ui-1.8.14.custom.min.js"></script>

<!-- Our jQuery Script to make everything work -->
<script  type="text/javascript" src="js/jq-ac-script.js"></script>

</head>
<body>
<h1 align="center"><img src=418694_259331167468533_385322251_n.jpg></h1>
<div id="container">

    <div class="panel">
        <div class="title-large">
            <div class="theme"></div>
        </div>
 <p>
 <h1 align="center"><b>Branch : <FONT COLOR="ORANGE"><?php echo($_SESSION["username"]);   ?>   <h5 align="left"><font color="black">Date : </font></b><script type="text/javascript">
function GetClock(){
d = new Date();
nday   = d.getDay();
nmonth = d.getMonth();
ndate  = d.getDate();
nyear = d.getYear();
nhour  = d.getHours();
nmin   = d.getMinutes();
nsec   = d.getSeconds();

if(nyear<1000) nyear=nyear+1900;

 if(nhour ==  0) {ap = " AM";nhour = 12;} 
 else if(nhour <= 11) {ap = " AM";} 
 else if(nhour == 12) {ap = " PM";} 
 else if(nhour >= 13) {ap = " PM";nhour -= 12;}

 if(nmin <= 9) {nmin = "0" +nmin;}
 if(nsec <= 9) {nsec = "0" +nsec;}

 document.getElementById('clockbox').innerHTML=""+(nmonth+1)+"/"+ndate+"/"+nyear+"     "+nhour+":"+nmin+":"+nsec+ap+"";
setTimeout("GetClock()", 1000);
}
window.onload=GetClock;
</script>
<?php if ($success) { ?>
        <div class="message success">
            <h4>Congratulations! It worked! Now check your email.</h4>
        </div>
    <?php } elseif ($error) { ?>
        <div class="message error">
            <h4>Sorry, an error occurred. Try again!</h4>
        </div>
    <?php } ?>
  <div id="clockbox"></div></font></h5></h1>
            <div class="content inpad">

                   <div id="messageBox" style="margin-left:15px; padding-left:20px;   padding-bottom:5px; border:1px #ccc solid; display:none;"></div>

                        <form method="post" action="#" id="itemsForm">

                            <table id="itemsTable" class="general-table">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>Item Code</th>
                                    <th>Item Description</th>
                                    <th>Item Qty</th>
                                    <th>Item Price</th>
                                    <th>Item Agent</th>
                                </tr>
                                </thead>
                                <tbody>
                                    <tr class="item-row">
                                        <td></td>
                                        <td><input name="itemCode" value=""     class="tInput" id="itemCode" readonly="readonly" /> </td>
                                        <td><input name="itemDesc" value="" class="tInput" id="itemDesc"  tabindex="1"/></td>
                                        <td><input name="itemQty" value="" class="tInput" id="itemQty" tabindex="2"/></td>
                                        <td><input name="itemPrice" value="" class="tInput" id="itemPrice" readonly="readonly" /> </td>
                                        <td><input name="itemAgent" value="" class="tInput" id="itemAgent" readonly="readonly" /></td>
                                    </tr>
                                </tbody>
                            </table>

                        <a href="#" id="addRow" class="button-clean large"><span> <img   src="images/icon-plus.png" alt="Add" title="Add Row" /> Add Item</span></a>

                    </div>
                  <input type="submit" value="submit">
                </form>

            </div>
    </div>

  </body>
  </html> 
```

并且输出的html代码是

```
<html>
<head>
<br><br>
<h1 align="center"><img   src=http://orangepharmacy.hostzi.com/418694_259331167468533_385322251_n.jpg></h1>
<style type="text/css" title="currentStyle">
            @import "http://orangepharmacy.hostzi.com/css/layout-styles.css";
            @import "http://orangepharmacy.hostzi.com/css/themes/smoothness/jquery-ui-   1.8.4.custom.css";
  </style>
  </head>
  <body>
  <br><br>
   <h1 align="center"><b>Items Order <br> Branch : <FONT COLOR="ORANGE">
  <?php      echo($_SESSION["username"]); ?></h1>
<br><br>
<table id="itemsTable" class="general-table">
                                <thead>
                                <tr>
                                    <th></th>
                                    <th>Item Code</th>
                                    <th>Item Description</th>
                                    <th>Item Qty</th>
                                    <th>Item Price</th>
                                    <th>Item Agent</th>
                                </tr>
                                </thead>
                                <tbody>
                                    <tr class="item-row">
                                        <td></td>
                                        <td><?php echo $post->itemCode; ?></td>
                                        <td><?php echo $post->itemDesc; ?></td>
                                        <td><?php echo $post->itemQty; ?></td>
                                        <td><?php echo $post->itemPrice; ?></td>
                                        <td><?php echo $post->itemAgent; ?></td>
                                    </tr>

                                </tbody>

                            </table>

<br><br><l><p><b><i><h2 align="left">Prepared by : ............................                </h2><h2 align="right"> Signeture : .................................<h2></b></i></p>

</body>
</html> 
```

添加新行的js代码：

```
$(document).ready(function(){

// Use the .autocomplete() method to compile the list based on input from user
$('#itemDesc').autocomplete({
    source: 'data/item-data.php',
    minLength: 1,
    select: function(event, ui) {
        var $itemrow = $(this).closest('tr');
                // Populate the input fields from the returned values
                $itemrow.find('#itemCode').val(ui.item.itemCode);
                $itemrow.find('#itemDesc').val(ui.item.itemDesc);
                $itemrow.find('#itemPrice').val(ui.item.itemPrice);
                $itemrow.find('#itemAgent').val(ui.item.itemAgent);

                // Give focus to the next input field to recieve input from user
                $('#itemQty').focus();

        return false;
    }
// Format the list menu output of the autocomplete
}).data( "autocomplete" )._renderItem = function( ul, item ) {
    return $( "<li></li>" )
        .data( "item.autocomplete", item )
        .append( "<a>" + item.itemDesc + "</a>" )
        .appendTo( ul );
};

// Get the table object to use for adding a row at the end of the table
var $itemsTable = $('#itemsTable');

// Create an Array to for the table row. ** Just to make things a bit easier to read.
var rowTemp = [
    '<tr class="item-row">',
        '<td><a id="deleteRow"><img src="images/icon-minus.png" alt="Remove Item" title="Remove Item"></a></td>',
        '<td><input name="itemCode" class="tInput" value="" id="itemCode" readonly="readonly" /> </td>',
        '<td><input name="itemDesc" class="tInput" value="" id="itemDesc" /></td>',
        '<td><input name="itemQty" class="tInput" value="" id="itemQty" /></td>',
        '<td><input name="itemPrice" class="tInput" value="" id="itemPrice" readonly="readonly" /></td>',
        '<td><input name="itemAgent" class="tInput" value="" id="itemAgent" readonly="readonly" /></td>',
    '</tr>'
].join('');

// Add row to list and allow user to use autocomplete to find items.
$("#addRow").bind('click',function(){

    var $row = $(rowTemp);

    // save reference to inputs within row
    var $itemCode           = $row.find('#itemCode');
    var $itemDesc           = $row.find('#itemDesc');
    var $itemPrice          = $row.find('#itemPrice');
    var $itemQty            = $row.find('#itemQty');
    var $itemAgent          = $row.find('#itemAgent');

    if ( $('#itemDesc:last').val() !== '' ) {

        // apply autocomplete widget to newly created row
        $row.find('#itemDesc').autocomplete({
            source: 'data/item-data.php',
            minLength: 1,
            select: function(event, ui) {
                $itemCode.val(ui.item.itemCode);
                $itemDesc.val(ui.item.itemDesc);
                $itemPrice.val(ui.item.itemPrice);
                $itemAgent.val(ui.item.itemAgent);

                // Give focus to the next input field to recieve input from user
                $itemQty.focus();

                return false;
            }
        }).data( "autocomplete" )._renderItem = function( ul, item ) {
            return $( "<li></li>" )
                .data( "item.autocomplete", item )
                .append( "<a>"  + item.itemDesc + "</a>" )
                .appendTo( ul );
        };
        // Add row after the first row in table
        $('.item-row:last', $itemsTable).after($row);
        $($itemDesc).focus();

    } // End if last itemCode input is empty
    return false;
});

$('#itemDesc').focus(function(){
    window.onbeforeunload = function(){ return "You haven't saved your Order.  Are you    sure you want to leave this page without saving first?"; };
   });

  }); // End DOM

// Remove row when clicked
$("#deleteRow").live('click',function(){
    $(this).parents('.item-row').remove();
    // Hide delete Icon if we only have one row in the list.
    if ($(".item-row").length < 2) $("#deleteRow").hide();
}); 
```

问题出在

```
 <td><?php echo $post->itemCode; ?></td>
                                        <td><?php echo $post->itemDesc; ?></td>
                                        <td><?php echo $post->itemQty; ?></td>
                                        <td><?php echo $post->itemPrice; ?></td>
                                        <td><?php echo $post->itemAgent; ?></td> 
```

传递一行时，它读取数据，但传递多行时，它返回名称“数组”！

我尝试这样做，但它给了我：为 foreach() 提供的参数无效

```
 <td><?php foreach ($post->itemCode as $code) {
                                             echo $code;
                                                                                      } 
                                            ?>
                                        </td>
                                        <td><?php foreach ($post->itemDesc as $desc) {
                                             echo $desc;
                                                                                      } 
                                            ?></td>
                                        <td><?php foreach ($post->itemQty as $qty) {
                                             echo $qty;
                                                                                      } 
                                            ?></td>
                                        <td><?php foreach ($post->itemPrice as $price) {
                                             echo $price;
                                                                                      } 
                                            ?></td>
                                        <td><?php foreach ($post->itemAgent as $agent) {
                                             echo $agent;
                                                                                      } 
                                            ?></td> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T18:24:19.630

你不能`echo`一个数组 - 你必须迭代它和`echo`每个值，例如

```
foreach ($post->itemCode as $thing) {
    echo $thing;
} 
```

如果你不确定你的数组的结构，你总是可以`print_r($post->itemCode)`等等，这会告诉你里面有什么。

如果要访问数组的第一个成员，请尝试

```
$itemCode = $post->itemCode; echo $itemCode[0]; 
```

# java - JPA中的继承不起作用

> ID：14125362
> 
> 赞同：1
> 
> 时间：2013-01-02T16:16:28.557
> 
> 标签：java, jpa

我有一个父类：

```
@MappedSuperclass
public class BaseText implements Serializable {

    @Column(name = "LOCALE_CODE", nullable = false)
    private String localeCode;

    @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    @Index
    @Column(name = "LOCALIZED_TEXT_ID", nullable = false)
    @ForeignKey
    private LocalizedText localizedText;

    //getters and setters 
} 
```

和子类之一：

```
@Entity
@Table(name = "ASSESSMENT_TEXT")
@AttributeOverride(name = "localeCode", column = @Column(name = "LOCALE_CODE"))
@AssociationOverride(name = "localizedText", joinColumns = @JoinColumn(name = "LOCALIZED_TEXT_ID"))
public class AssessmentText extends BaseText {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    @Column(name = "ID")
    private Long id;

    @ManyToOne(fetch = FetchType.EAGER, cascade = CascadeType.ALL)
    @Index
    @Column(name = "ASSESSMENT_ID", nullable = false)
    @ForeignKey
    private Assessment assessment;

    //Getters and setters.
} 
```

当我试图持久化一个对象时，我收到以下错误：

```
org.apache.openjpa.persistence.ArgumentException: Superclass field "java.lang.Object.localizedText" is mapped in the metadata for subclass "com.my.com.AssessmentText", but is not a persistent field. 
```

是什么导致了这种情况以及如何解决？

我在 JUnit 中使用嵌入式 derby 数据库，JPA 实现是 OpenJPA。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:01:29.250

我不确定它是否是解决方案，但我错过了来自 AssessmentText 的 @Inheritance 注释：

```
@Entity
@Table(name = "ASSESSMENT_TEXT")
@Inheritance(strategy=InheritanceType.JOINED)
@AttributeOverride(name = "localeCode", column = @Column(name = "LOCALE_CODE"))
@AssociationOverride(name = "localizedText",
                     joinColumns = @JoinColumn(name = "LOCALIZED_TEXT_ID"))
public class AssessmentText extends BaseText { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-21T08:18:51.220

我有同样的问题，并通过将 MappedSuperClass 添加到 persistence.xml 来解决它。

我知道这也在某处的评论中，但有用的被隐藏了，我认为这应该是一个答案，而不是对该问题的评论。

# javascript - 克罗克福德的 JavaScript 构造函数模式真的应该更快吗？

> ID：14125373
> 
> 赞同：14
> 
> 时间：2013-01-02T16:17:15.390
> 
> 标签：javascript, performance, constructor

我最近尝试为经常创建的值对象优化一些代码。（一个三维向量，fwiw）

我尝试的一件事是将构造函数从匿名方法工厂模式转换为普通的 JavaScript 构造函数。

这导致了[严重的性能损失](http://jsperf.com/ffs-constructors/5)，这让我感到惊讶，因为在我关于 JavaScript 构造函数/工厂模式的[最后一个问题中非常推荐使用“新”和普通构造函数。](https://stackoverflow.com/questions/9744094/making-a-javascript-knockout-viewmodel-without-the-new-keyword)

很可能是我的测试过于简单，或者完全是错误的，或者是最近在 chrome 的 JavaScript 引擎中进行的性能优化的结果，或者以上所有原因。无论如何，我真的很想知道为什么我的“优化”会导致性能下降——而且——最重要的是：我的 jsperf 测试运行有什么明显的问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T20:31:03.413

您的测试之间的主要区别是：

*   [`{}`比使用快得多`new Object`](http://jsperf.com/new-object-versus)，这表明它`new`比使用慢`{}`。`[]`（和也是如此`new Array`。）

*   Your tests produce different results: the result of your `make` factory function isn't a `Make` object. The constructed `Make` has a prototype, shared by all `Make` objects. Your result of your factory function is just a bare `Object`, and has a single prototype in its prototype chain (`Object.prototype`), whereas the Make constructed object has two (`Make.prototype`, followed by `Object.prototype`).

    I made a [fork of your test](http://jsperf.com/ffs-constructors/8), with a factory function that actually returns a `Make` object (instead a simple `Object`), using the non-standard `__proto__` property, and it is much slower than a using a constructor. IE does not support `__proto__`, but the results from Firefox and Chrome look pretty definitive.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T20:29:04.187

构造函数优化的一件事是共享属性，通常是方法。如果多个对象使用与方法相同的函数，或者共享其他命名属性，那么对原型的一个赋值将在从构造函数创建的所有对象之间共享该属性的单个实例，从而减少内存开销，并且不需要重复为创建的每个对象分配每个此类属性，从而减少构建时间开销。

由于您的样本不包含任何此类属性，因此您不会看到此类好处。但是，如果您的生产代码不包含构造对象的共享属性，则很可能没有理由切换到构造函数。

因此，例如，如果您有[这样](http://jsperf.com/ffs-constructors/7)的代码：

```
function make(p) {
    return {
        parm: p,
        addTwo: function() {return this.parm + 2;},
        double: function() {return this.parm * 2;},
        square: function() {return this.parm * this.parm;}
    };
}; 
```

它可能会比这运行得更慢：

```
function Make(p) {
    this.parm = p;
}
Make.prototype.addTwo = function() {return this.parm + 2;};
Make.prototype.double = function() {return this.parm * 2;}
Make.prototype.square = function() {return this.parm * this.parm;} 
```

如果您创建许多实例，它也会占用更多内存。

# linux - ubuntu Gnome 中没有 bashrc

> ID：14125374
> 
> 赞同：0
> 
> 时间：2013-01-02T16:17:16.927
> 
> 标签：linux, bash, ubuntu

我想在 Ubuntu 版本中配置我的环境变量，但找不到我的 bashrc。我在哪里可以找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:24:07.283

在您的主目录中，例如，如果您是落叶松，那么它位于：

```
 /home/larix/.bashrc 
```

如果它显示“隐藏”文件，您可以从文件管理器中看到它（如果文件名以“。”开头，则在 linux 中被视为“隐藏”文件）

# zend-framework2 - 自定义 Zend Framework 2 路由器

> ID：14125376
> 
> 赞同：0
> 
> 时间：2013-01-02T16:17:17.543
> 
> 标签：zend-framework2, router

我已经开始使用 zend 框架 2 进行应用程序开发。例如，我将模块命名为“Album”。

我在module.config.php中有以下代码。

```
return array(
    'router' => array(
        'routes' => array(

            'home' => array(
                'type' => 'Zend\Mvc\Router\Http\Literal',
                'options' => array(
                    'route'    => '/',
                    'defaults' => array(
                        'controller' => 'Album\Controller\Index',
                        'action'     => 'index',
                    ),
                ),
            ),
            'album' => array(
                'type'    => 'Segment',
                'options' => array(
                    'route'    => '/album',
                    'constraints' => array(
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'id'     => '[0-9]+',
                    ),
                    'defaults' => array(
                        '__NAMESPACE__' => 'Album\Controller',
                        'controller'    => 'Index',
                        'action'        => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'default' => array(
                        'type'    => 'Segment',
                        'options' => array(
                            'route'    => '/[:controller[/:action[/:id]]]',
                            'constraints' => array(
                                'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'id'     => '[0-9]+',
                            ),
                            'defaults' => array(
                            ),
                        ),
                    ),
                ),
            ),
        ),
    ),
); 
```

我可以访问以下网址。

ZF2/专辑 ZF2/专辑/专辑/索引

我喜欢将 url 'ZF2/album/album/view' 路由到 ZF2/view-album。

我该如何路由？帮我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T16:27:30.283

我使用以下代码获得了访问权限。

```
'view-album' => array(
                'type'    => 'Segment',
                'options' => array(
                    'route'    => '/view-album[/:id]',
                    'constraints' => array(
                        'action' => '[a-zA-Z][a-zA-Z0-9_-]*',
                        'id'     => '[0-9]+',
                    ),
                    'defaults' => array(
                        '__NAMESPACE__' => 'Album\Controller',
                        'controller'    => 'Index',
                        'action'        => 'view-album',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'default' => array(
                        'type'    => 'Segment',
                        'options' => array(
                            'route'    => '/[:controller[/:action[/:id]]]',
                            'constraints' => array(
                                'controller' => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'action'     => '[a-zA-Z][a-zA-Z0-9_-]*',
                                'id'     => '[0-9]+',
                            ),
                            'defaults' => array(
                            ),
                        ),
                    ),
                ),
            ), 
```

# objective-c - IOS 6 的 UIAppearence 支持 - 意外结果

> ID：14125378
> 
> 赞同：6
> 
> 时间：2013-01-02T16:17:22.587
> 
> 标签：objective-c, ios6, uiappearance

下面的代码在 iOS 5 上运行良好，但在 iOS 6 或更高版本上不行。我希望电子邮件作曲家表的导航栏图像与其他 UINavigationBar 类不同。我无法理解调试指针正在响应外观方法，但在设备上它将导航栏图像显示为“bgNavigationBar.png”；预期是“bgNavigationBar_2.png”。

请指导我......

```
if ([[UINavigationBar class]respondsToSelector:@selector(appearance)]) {
    UIImage *logoImage44 = [[UIImage imageNamed:@"bgNavigationBar.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
    [[UINavigationBar appearance] setBackgroundImage:logoImage44 forBarMetrics:UIBarMetricsDefault];

    UIImage *ImagePlain = [[UIImage imageNamed:@"bgNavigationBar_2.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
    [[UINavigationBar appearanceWhenContainedIn:[MFMailComposeViewController class], nil] setBackgroundImage:ImagePlain forBarMetrics:UIBarMetricsDefault];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T15:59:53.133

这个东西在 ios6 中是行不通的。

```
[[UINavigationBar appearanceWhenContainedIn:[MFMessageComposeViewController class], nil] setBackgroundImage:[UIImage imageNamed:@"bgNavigationBar_2.png"] forBarMetrics:UIBarMetricsDefault]; 
```

只是您需要在您的邮件处理程序类中设置此属性。

```
if (![[UINavigationBar class]respondsToSelector:@selector(appearance)])
{
    UIView *backgroundView = [[[UIView alloc] initWithFrame:CGRectMake(0,0,320,44)]autorelease];

    [backgroundView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"bgNavigationBar_2.png"]]];
    controller.topViewController.navigationItem.titleView = backgroundView ;
}
else
{
    UIImage *gradientImagePlain = [[UIImage imageNamed:@"bgNavigationBar_2.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
    [[UINavigationBar appearance] setBackgroundImage:gradientImagePlain forBarMetrics:UIBarMetricsDefault];
} 
```

然后为所有其他导航控制器的背景图像重置另一个图像。

```
- (void)messageComposeViewController:(MFMessageComposeViewController *)controller didFinishWithResult:(MessageComposeResult)result
{
    [self.parentController dismissModalViewControllerAnimated:YES];
    UIImage *gradientImagePlain = [[UIImage imageNamed:@"bgNavigationBar.png"] resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
    [[UINavigationBar appearance] setBackgroundImage:gradientImagePlain forBarMetrics:UIBarMetricsDefault];
} 
```

希望这对你有用。

# php - AJAX - JSON 传递与 PHP 返回生成的 HTML

> ID：14125380
> 
> 赞同：1
> 
> 时间：2013-01-02T16:17:35.987
> 
> 标签：php, javascript, html, ajax

我现在有这样的代码：

```
<li onclick = "                                        
    function CBAppData( callerObj, data )
    {
        var string = '';

        for( a in data )
        {            
            debug.push( data[a] );
            if( data[a].__attributes.config.name )
            {
                string += '<li>' + data[a].__attributes.config.name + '</li>';
            }
            else
            {
                alert( 'Error with json index ' + a );
            }     
        } 

        $( callerObj ).children( '.returnData' ).html( string );    
    }   

    DoAjax( 
        this,
        'get_for_url', 
        '<?php echo Site::$url; ?>Process.php', 
        {
            'space_id': '<?php echo $space->__attributes[ "space_id" ]; ?>'
        },
        CBAppData
    )
">
    <?php echo $space->__attributes[ "name" ]; ?>
    <ul class = "returnData"></ul>    
</li> 
```

DoAjax 就是这样：

```
function DoAjax( callerObj,  _request, _url, _additionalData, callback )
{
    $.ajax({
        type: "POST",
        url: _url,
        data: { 
            request: _request,
            additionalData: _additionalData 
        },
        success: function( data )
        {   
            callback( callerObj, jQuery.parseJSON( data ) );   
        },
        error: function( a, b, c )
        {
            alert( "error: " + a + ", " + b + ", " + c + "." );
        }
    });       
} 
```

如果我有一个用 PHP 编写的 AJAX 调用的页面，它刚刚为我生成了**LI**部分，我可以省去很多关于字符串 += '' 位的摆弄的麻烦。

问题是……哪个更好？

使用客户端 compy 渲染 html，还是使用服务器渲染 html？

我不在乎我使用哪个，只要我知道它至少是最佳或最佳实践方式。

此查询来自需要使此应用程序超未来证明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:22:53.543

从历史上看，服务器端处理速度更快。话虽如此，对于您的应用程序来说，这是非常小的东西，可能不会有太大的不同。问问自己哪种方法更容易维护，这就是你的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:56:03.777

不确定这里的“服务器端更快”的论点。这通常是正确的，但在这种情况下，区别是..

客户端渲染：通过 ajax 获取 JSON 在 javascript 中构建 html 字符串将 HTML 字符串注入文档正文，导致渲染（=处理的大部分）

Server-Side pre-rendering (ie server Deliverready to go HTML) : Get HTML via ajax (so a bit more traffic) injection HTML string into doc body, 导致渲染 (= the bulk of the processing)

您优化的唯一部分是在 jacvascript 中构建 HTML 字符串，与大部分工作相比，处理时间是微不足道的：HTML 注入和后续渲染。

我喜欢这种客户端渲染方法，特别是如果将来有可能更改服务器平台。

银行使用 ackup 服务来做这样的事情：有时他们在平台上运行一个服务，两个或多个用于故障转移的实例，有时另一个服务做相同的事情，但编写在完全不同的平台上。重量级的东西，日常 Web 应用程序通常不需要，但它强调了将渲染处理与数据处理分开的价值。

# android - 如何添加指向 android 菜单的链接？

> ID：14125382
> 
> 赞同：1
> 
> 时间：2013-01-02T16:17:38.720
> 
> 标签：android, android-layout

我正在构建一个安卓应用程序。我目前正在使用 WebView。我将如何从弹出菜单（右上角的 3 个点）创建 Internet 链接？以及如何在 WebView 中打开它们。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:26:09.677

创建一个`OptionsMenu`：

```
@Override
    public boolean onCreateOptionsMenu(Menu menu) {
        final MenuInflater inflater = getMenuInflater();
        inflater.inflate(R.menu.myMenu, menu);
        return super.onCreateOptionsMenu(menu);
    } 
```

您的菜单：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/link1"
        android:title="@string/link1"
        android:showAsAction="never"
        />
      <item
        android:id="@+id/link2"
        android:title="@string/link2"
        android:showAsAction="never"
        />
</menu> 
```

创建一个`onOptionsItemSelected`：

```
@Override
    public boolean onOptionsItemSelected(MenuItem item) {
        int id = item.getItemId();
        switch(id) {
            case android.R.id.link1:
                // load up WebView with the link
                break;

        }
        return super.onOptionsItemSelected(item);
    } 
```

您的网络视图：

```
WebView myWebView  = (WebView) findViewById(R.id.yourWebView);
myWebView.loadUrl("yourLink");
myWebView.setWebViewClient(new MyWebViewClient()); 
```

但不要忘记创建一个 WebViewClient：

```
public class MyWebViewClient extends WebViewClient {

     @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
} 
```

# git - git“还原”当前目录

> ID：14125385
> 
> 赞同：41
> 
> 时间：2013-01-02T16:17:58.637
> 
> 标签：git, version-control, reset, git-checkout, revert

在 svn 中，可以`svn revert ./*`在其中还原当前目录并且仅还原当前目录。

`svn revert`仅恢复当前目录的 git 相当于什么？

我知道有`git reset --hard`，但它会还原所有内容，而不仅仅是当前目录。

我将如何仅恢复 git 中的当前目录？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-01-02T16:23:09.827

就像@vcsjones 所说，这里的解决方案是`git checkout`：

```
git checkout <refspec> -- path/to/directory  # or path/to/file 
```

`<refspec>`例如，可以在哪里be `HEAD`，即当前的工作提交。请注意，该`checkout`命令的这种用法会影响工作树，但不会影响索引。

`git revert`用于“恢复提交”，因此，不应理解提交从树中消失（它会对历史造成严重破坏——如果你愿意，请查看`git rebase -i`）。恢复的提交包括将作为参数给出的提交的所有更改应用到树，并使用更改创建一个*新**提交*（使用默认提交消息，您可以修改）。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2017-02-05T08:49:18.963

转到要还原的文件夹并执行以下操作：

```
git checkout -- . 
```

在此答案中查看更多信息： [https ://stackoverflow.com/a/16589534/207661](https://stackoverflow.com/a/16589534/207661)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-02-25T15:26:38.283

当我还是一个 git 新手（并且害怕终端）时，我发现最简单的方法是：

*   切换到要将特定子目录还原到的分支
*   将要还原的子目录复制到桌面
*   切换回你的分支
*   用复制到桌面的子目录覆盖 git 目录中要替换的子目录

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-23T18:41:52.627

如果您想从特定目录递归执行：

```
git checkout -- ./*
git checkout -- mydir/* 
```

# symfony - 事件订阅者中的 Symfony 动态表单字段

> ID：14125386
> 
> 赞同：0
> 
> 时间：2013-01-02T16:18:00.277
> 
> 标签：symfony

遵循以下[http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html中记录的示例](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)

这首先添加事件订阅者中的字段，然后添加表单类型中已添加的字段。

有谁知道如何更改顺序，以便表单类型字段首先出现在表单视图中，然后在事件订阅者中添加的字段出现在后面？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T11:19:34.873

我有同样的问题。我通过将表单构建 ($builder->add(...)) 从 MyFormType::buildForm() 移动到侦听器来解决它，只留下 $builder->addEventSubscriber(...) 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:36:59.953

有两种不同的方式来排序你的字段，

*   在构建表单时，您必须根据显示它们的顺序添加字段，它允许您使用`form_widget(form)`.

*   [自定义您的表单呈现](http://symfony.com/doc/current/cookbook/form/form_customization.html)。然后，您可以将表单的每个部分放在正确的位置，使其看起来像您想要的那样。

# powershell - 从 Powershell 命令提示符启动 VS2012 包管理器控制台

> ID：14125395
> 
> 赞同：3
> 
> 时间：2013-01-02T16:18:23.413
> 
> 标签：powershell, visual-studio-2012, nuget-package

有没有办法从 powershell 命令提示符或 windows 命令窗口启动包管理器控制台？

我有一些命令需要以管理员身份运行，我宁愿以管理员身份运行一个 powershell 窗口，而不是以管理员身份关闭并重新启动 VS2012。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T23:04:24.037

理查德是对的。看看 dotPeek 中的 NuGet.Console.dll，很明显它在 Visual Studio 对象模型中有很多必需的挂钩。另外，实际的控制台本身是 WPF UserControl，而不是控制台子系统应用程序。

# php - 大量使用 php echo 语句是否会使页面加载时间变慢？

> ID：14125402
> 
> 赞同：-2
> 
> 时间：2013-01-02T16:18:50.217
> 
> 标签：php, apache, echo, load-time

我知道以前有人问过这个问题，但我无法找到明确的答案。

过度使用 echo 语句会减慢最终用户的加载时间吗？

通过在文件中有更多的 echo 语句，文件大小会增加，所以我知道这将是一个因素。如我错了请纠正我。

经过一些研究，我知道使用 php 的 ob_start() 函数以及增加 Apaches SendBufferSize 可以帮助减少加载时间，但据我了解，这更多的是通过允许 php 更快地完成/退出来减少 php 执行时间，这反过来又允许Apache 早点退出。

话虽如此，php 确实退出得更快，但这是否意味着 php 实际上花费了更少的时间来执行并反过来加快最终用户端的速度？

需要明确的是，我的意思是如果我有 2 个文件，相同的内容，一个对每个 html 标记使用 echo 语句，另一个文件使用标准的进出 php 方法，除了文件大小与“过度”使用 echo 语句的差异（我猜是有原因的？），哪一个会更快？还是真的没有区别？

也许我要解决这个问题或看错了？

**编辑：**我做了一些检查，找到了一种方法来创建秒表来检查脚本的执行时间，并且似乎工作得很好。如果有人有兴趣做同样的事情，这里是我现在选择使用的方法的链接。

[http://www.phpjabbers.com/measuring-php-page-load-time-php17.html](http://www.phpjabbers.com/measuring-php-page-load-time-php17.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T16:27:02.747

> 过度使用 echo 语句会减慢最终用户的加载时间吗？

不。

> 通过在文件中有更多的 echo 语句，文件大小会增加，所以我知道这将是一个因素。如我错了请纠正我。

你错了。

> 这是否意味着 php 实际上花费了更少的时间来执行并反过来加快最终用户端的速度？

不。

> 还是真的没有区别？

是的。

> 也许我要解决这个问题或看错了？

确实。

与性能相关的问题存在一个常见问题。
他们中的大多数不是出于真正的需求，而是出于想象。
虽然人们只需要解决实际问题，而不是可以想象的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-23T02:13:57.013

# 这不是问题。

## 你多虑了。

这是一个老问题，但这里提出的逻辑的问题是它假设“更多的命令等于更慢的性能……”当 - 就现代编程和现代系统而言 - 这是一个完全不相关的问题。这些问题只是某些人（出于某种原因）在汇编程序之类的极低级别上编写程序的人所关心的。

*可能*会出现放缓的原因......但任何人都无法感知到任何东西。例如，你为优化该代码所做的任何努力都不会产生任何有价值的东西。

也就是说，编程时应该始终关注速度和性能，而不是使用多少命令。

作为将 PHP 与`echo`语句一起使用的人，我建议您组织代码以提高可读性。一堆`echo`语句简直难以阅读和编辑。根据您的需要，您应该将这些`echo`语句的内容连接成一个字符串，`echo`稍后再使用。

或者——我使用的一个很好的技术——是创建一个我需要的值数组，`echo`然后运行`echo implode('', $some_array);`。

数组相对于字符串连接的好处是它自然更容易理解，这`some_array[] = 'Hello!';`将是该数组的新添加，其中类似的东西`$some_string .= 'Hello!';`可能看起来很简单，但当您发生大量连接时，调试可能会令人困惑。

但归根结底，对于所有相关人员来说，易于阅读的干净代码比将流程缩短几分之一秒更重要。如果您是一名现代程序员，请在编写初稿时着眼于可读性，然后（如有必要）考虑优化该代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:29:17.310

不必担心有 10 或 100 个呼叫需要回显。优化时甚至不应该考虑这些。

认为在普通服务器上，您可以以比 1/100,000 秒的速度更快地运行 echo simple 调用。

总是担心代码的可读性和维护而不是那些额外的回声调用。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-01-02T16:32:28.017

没有做任何基准测试。我只能说，事实上，当您的回显字符串（HTML 与否）并使用双引号 ( `"`) 时，它比单引号 ( `'`) 慢。

对于带双引号的字符串，PHP 必须解析这些字符串。您只需将变量插入到字符串中即可知道在字符串中获取变量的可能性：

```
echo "you're $age years old!"; 
```

PHP 必须解析您的字符串以查找这些变量并自动替换它们。当您确定时，您的字符串中没有任何变量使用单引号。

希望这会对你有所帮助。

即使您使用一堆回声呼叫，我认为它不会减慢您的加载时间。加载时间取决于服务器的反应时间和执行时间。当给定任务的加载时间太长时，请检查整个代码，不仅回声的可能性会减慢服务器的速度。我认为您的代码中有问题。

# r - 稀疏化、社区矩阵和 for 循环

> ID：14125407
> 
> 赞同：1
> 
> 时间：2013-01-02T16:19:13.493
> 
> 标签：r, loops, vegan

我是新的 R 用户，所以我提前为我的无知道歉。我有一个流大型无脊椎动物数据的社区矩阵（作为行标题和物种作为列标题的图）。我想将数据稀疏到每个地块 500 个人，执行 1000 次，然后计算流健康指标（例如，% EPT）。在这一点上，我还没有成功地建立一个循环来将数据稀疏 1000 次（甚至 10 次）。我正在使用一个简化的数据集（6 个物种，12 个地块）来找出正确的代码，因为我的社区矩阵有 > 100 个物种。我正在使用这个网站 (http://ichthyology.usm.edu/courses/multivariate/diversity.R) 作为开发正确代码的模板。提前感谢您对此代码的任何帮助。

我的矩阵有 6 个物种，12 个地块

```
comm
    X Attenella.margarita Baetidae Baetis.sp. Baetis.tricaudatus Caenis.sp. Diphetor.hageni
1   1                   0        0          0                  0          0              36
2   2                   0        0          0               1009          0             682
3   3                  51       51          0                609          0             406
4   4                   0        0         40                  0          0               0
5   5                   0        0         68                  0         68             203
 6   6                   0        0          0               1244          0               0
 7   7                   0        0       2090                  0          0               0
 8   8                   0        0         11                  0          0               0
 9   9                   0        0          0               4621          0               0
 10 10                   0        0          0               1515          0               0
 11 11                   0        0          0                 33          0               0
 12 12                   0        0          0                116          0               0 
```

我可以`rarefy`使用 vegan 包将此数据集 1x，但我想重复执行此操作

```
rrarefy(comm, sample=5)
      X Attenella.margarita Baetidae Baetis.sp. Baetis.tricaudatus Caenis.sp. Diphetor.hageni
 [1,] 0                   0        0          0                  0          0               5
 [2,] 0                   0        0          0                  4          0               1
 [3,] 0                   2        0          0                  2          0               1
 [4,] 0                   0        0          5                  0          0               0
 [5,] 0                   0        0          1                  0          1               3
 [6,] 0                   0        0          0                  5          0               0
 [7,] 0                   0        0          5                  0          0               0
 [8,] 3                   0        0          2                  0          0               0
 [9,] 0                   0        0          0                  5          0               0
 [10,] 0                   0        0          0                  5          0               0
 [11,] 0                   0        0          0                  5          0               0
 [12,] 0                   0        0          0                  5          0               0 
```

但是当我尝试将其作为循环执行 10 次时我没有运气

```
> ComLoop = 0
> for (i in 1:10) ComLoop[i] = rrarefy(comm, sample=5)
  Warning in ComLoop[i] = rrarefy(comm, sample = 5) : 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:35:00.573

这样的事情会解决你的问题吗？

```
res <- lapply(as.list(1:10), function(x) rrarefy(comm, sample=5)) 
```

当然有更优雅的解决方案，但我真的不明白稀有在做什么，而且你的链接对我不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:25:42.727

问题是这`ComLoop`是一个数字向量并`rrarefy()`返回社区数据的数据框。因此，您正试图将整个数据框推入数字向量的单个元素中。那是行不通的。

@tophcito 的答案将起作用，因为它返回一个列表，其组成部分是对`rrarefy()`.

循环版本可以按如下方式完成：

```
require(vegan)
data(dune)
ComLoop <- vector(mode = "list", length =  5)
for (i in seq_along(ComLoop)) {
    ComLoop[[i]] <- rrarefy(dune, sample = 5)
} 
```

这使

```
> str(ComLoop)
List of 5
 $ : num [1:20, 1:30] 0 0 0 0 0 0 0 1 0 0 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:20] "2" "13" "4" "16" ...
  .. ..$ : chr [1:30] "Belper" "Empnig" "Junbuf" "Junart" ...
 $ : num [1:20, 1:30] 0 0 0 0 0 0 0 1 0 0 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:20] "2" "13" "4" "16" ...
  .. ..$ : chr [1:30] "Belper" "Empnig" "Junbuf" "Junart" ...
 $ : num [1:20, 1:30] 0 0 0 0 0 0 0 0 0 0 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:20] "2" "13" "4" "16" ...
  .. ..$ : chr [1:30] "Belper" "Empnig" "Junbuf" "Junart" ...
 $ : num [1:20, 1:30] 0 0 0 0 0 0 0 0 0 0 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:20] "2" "13" "4" "16" ...
  .. ..$ : chr [1:30] "Belper" "Empnig" "Junbuf" "Junart" ...
 $ : num [1:20, 1:30] 0 0 0 0 0 0 0 0 0 0 ...
  ..- attr(*, "dimnames")=List of 2
  .. ..$ : chr [1:20] "2" "13" "4" "16" ...
  .. ..$ : chr [1:30] "Belper" "Empnig" "Junbuf" "Junart" ... 
```

换句话说，一个列表，其组成部分是由稀有数据的随机社区矩阵生成的数据帧（到`sample`所述）。

请注意，在创建`ComLoop`列表以保存结果时，我明确说明了长度。您不需要*明确*说明长度，因为增加列表是您*不需要*预先分配存储空间的一个领域。所以你可以这样做：

```
ComLoop <- list() 
```

但是你不能使用`seq_along()`我上面使用的成语。在那里，您需要明确说明`i`应该像最初那样采用的值：

```
for(i in 1:5)
    ComLoop[i] <- rrarefy(dune, sample = 5) 
```

我认为设置所需的循环大小是更好的做法，因此是我最初的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-22T23:03:23.977

user1943324, I too am attempting to rarefy then calculate invertebrate metrics such as %EPT. However I am taking a different approach and have run into stumbling blocks with limited r-programming experience.

I assume you are trying to produce the rarefied matrix many times to then count the number of EPT taxa in each rarefaction run and calculate a mean and variability.

Instead, could we alter the existing rarfy{vegan} code to allow for user defined traits (e.g. EPT or not, functional feeding group, or tolerance value) and in addition to the existing total taxa richness count averaged over multiple runs, use an IF THAN type command to average the taxa richness of each individual trait state over those runs?

There would be no need to produce multiple output matrices.

# objective-c - 在 Core Data 中获取逆关系，而不是 NSSet

> ID：14125410
> 
> 赞同：0
> 
> 时间：2013-01-02T16:19:22.537
> 
> 标签：objective-c, ios, macos, cocoa, core-data

我是核心数据的新手。

在数据模型中，我有实体：

*   `Song`
*   `Playlist`

这是关系：

*   每一个都属于`Song`no、one或multiple`Playlist`

我已经像这样将关系添加到模型中。
我还建立了反向**多对多关系**。

现在我的问题。

的`Playlist`现在有一个`NSSet`与所有的`Song`s。
所以我可以通过`playlist.songs`.

我可以`Song`使用 a获取任何特定的`NSPredicate`：

```
- (NSArray *)fetchWithEntity:(NSString *)entity
                   predicate:(NSPredicate *)predicate
             sortDescriptors:(NSArray *)sortDescriptors
                       error:(NSError **)error {

    NSManagedObjectContext *moc = [self managedObjectContext];
    NSEntityDescription *entityDescription = [NSEntityDescription
                                              entityForName:entity
                                              inManagedObjectContext:moc];

    NSFetchRequest *request = [[NSFetchRequest alloc] init];
    [request setEntity:entityDescription];
    [request setPredicate:predicate];
    [request setSortDescriptors:sortDescriptors];

    NSArray *fetchResult = [moc executeFetchRequest:request error:error];
    return fetchResult;
} 
```

但是，我也希望能够过滤`Song`特定播放列表的 s ，而不必用 过滤`NSSet`，`NSPredicate`因为它更快。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:48:39.587

获取特定播放列表的歌曲，只需添加`"playlist = %@"`到用于获取`Song`对象的谓词中，例如

```
[NSPredicate predicateWithFormat:@"playlist = %@ AND title CONTAINS[cd] %@",
             thePlaylist, songTitle] 
```

或者，如果播放列表由标题给出：

```
[NSPredicate predicateWithFormat:@"playlist.title = %@ AND title CONTAINS[cd] %@",
             playlistTitle, songTitle] 
```

**编辑**如果 Songs 和 Playlist 之间存在多对多关系，您可以定义`playlists`从*Song*到*Playlist*的多对多关系，定义为与 的反向关系`songs`。那么以下谓词应该起作用：

```
[NSPredicate predicateWithFormat:@"ANY playlist = %@ AND title CONTAINS[cd] %@",
             thePlaylist, songTitle] 
```

# javascript - 如何使用 JavaScript 检查 CSS calc() 是否可用？

> ID：14125415
> 
> 赞同：14
> 
> 时间：2013-01-02T16:19:46.817
> 
> 标签：javascript, css

有没有办法使用 JavaScript 检查[CSS 功能`calc`](http://www.w3.org/TR/css3-values/#calc)是否可用？

我发现了很多关于获得与使用 jQuery 相同的行为的问题和文章`calc`，但我如何才能只检查它是否可用？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T16:24:14.390

在[Modernizr](http://modernizr.com/)中，您可以找到`css-calc`当前在非核心检测中的测试。他们使用以下代码：

```
Modernizr.addTest('csscalc', function() {
    var prop = 'width:';
    var value = 'calc(10px);';
    var el = document.createElement('div');

    el.style.cssText = prop + Modernizr._prefixes.join(value + prop);

    return !!el.style.length;
}); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-22T23:09:43.093

聚会有点晚了，但我想我应该分享这个，因为我自己也在为此苦苦挣扎。想出了使用 jQuery 的想法，我可以创建一个 div，它使用 CSS 属性中的 calc() 值（例如本例中的宽度）以及一个备用宽度，以防浏览器不支持 calc()。现在检查它是否支持它，这就是我所做的：

让我们为当前“不存在”的 div 元素创建 CSS 样式。

```
/* CSS3 calc() fallback */
#css3-calc {
    width: 10px;
    width: calc(10px + 10px);
    display: none;
} 
```

现在，如果浏览器不支持 calc()，则元素将返回 10 的宽度值。如果支持它，它将返回 20。值究竟是什么并不重要，但只要两个width 属性最终具有不同的值（在本例中为 10 和 20）。

现在是实际的脚本。这很简单，我想普通的 JavaScript 也可以，但这里是 jQuery 脚本：

```
// CSS3 calc() fallback (for unsupported browsers)
$('body').append('<div id="css3-calc"></div>');
if( $('#css3-calc').width() == 10) {
    // Put fallback code here!
}
$('#css3-calc').remove(); // Remove the test element 
```

* * *

或者，本机 javascript 检查和宽度：

`#css3-calc { width: 1px; width: calc(1px + 1px); }`

```
if( document.getElementById('css3-calc').clientWidth==1 ){
    // clientHeight if you need height
    /* ... */
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T16:23:43.080

根据他们的新闻页面，Calc 检测被添加到 Modernizer 中。 [http://modernizr.com/news/](http://modernizr.com/news/)

> 除了加强对现有测试的支持外，我们还添加了许多新的检测，其中许多是由社区提交的：
> 
> ```
> [...]
> css-calc 
> ```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-07-01T18:50:40.257

```
var cssCheck = document.createElement("DIV");
cssCheck.style.marginLeft = "calc(1px)";
if (cssCheck.style.getPropertyValue("margin-left"))
{
    alert("calc is supported");
}
cssCheck = null; 
```

# ajax - 通过 Ajax POST 数据而不使用 JQuery 方法

> ID：14125416
> 
> 赞同：0
> 
> 时间：2013-01-02T16:19:47.660
> 
> 标签：ajax, post

我有一个 Ajax 代码，我想通过它通过 http POST 安全地将私有 access_token 发送到 url，如何使用下面给定的代码来实现这一点？

```
function getstatus(url, placeid, access_token)
        {
            if(window.XMLHttpRequest)
            {
                xmlRequest = new XMLHttpRequest();
            }
            else if(window.ActiveXObject)
            {
                try
                {
                xmlRequest = new ActiveXObject("Msxm12.xMLHTTP");
                }
                catch(e)
                {
                    try 
                    {
                    xmlRequest = new ActiveXObject("Microsoft.XMLHTTP");
                    }
                    catch(e)
                    {
                        xmlRequest = false;
                    }
                }
            }

            xmlRequest.open("GET",url,true);
            xmlRequest.onreadystatechange = function()
                                    {
                                        if(xmlRequest.readyState==4)
                                        {
                                            if(placeid == "adminstatus")
                                            adminstatus.innerHTML=xmlRequest.responseText;

                                            if(placeid == "dbview")
                                            {
                                            dbview.innerHTML=xmlRequest.responseText;
                                            }
                                        }
                                    }
            xmlRequest.send();
        } 
```

考虑函数getstatus中的参数“access_token”是http POST-ed！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:49:39.873

看看[XMLHttpRequest](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest)，假设您尝试将数据作为键/值对发送，

```
xmlRequest.open("POST",url,true);//use the post method
xmlRequest.setRequestHeader("Content-type","application/x-www-form-urlencoded");//set the content type
...
xmlRequest.send("access_token="+encodeURIComponent(access_token));//send the token 
```

# ruby-on-rails - 如果我有与模型名称相同的名称列，它是如何工作的，它是关联的

> ID：14125417
> 
> 赞同：0
> 
> 时间：2013-01-02T16:19:52.120
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

假设我有两个名为**User**和**Comment的模型**

并且在用户表中有一个名为**评论的列。**

并且联合起来，这是 steted

**用户.rb**

> has_one ：评论

**评论.rb**

> 属于_to：用户

如果我在控制器中这样编码，将会获取什么？

> @comment = 用户评论

它是否从评论表中获取所有相关记录？

还是获取用户表评论栏的内容？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:21:35.060

你有向后的关系，'comments'表中应该有一个'user_id'列。然后您的控制器代码将按预期工作 - 它将获取该用户的相关评论。请注意，关联的约定是将列命名为“modelname_id”，而不仅仅是“modelname”

# ios - 在自定义 UIView 中为 IBOutlet 标签设置文本

> ID：14125420
> 
> 赞同：1
> 
> 时间：2013-01-02T16:19:57.050
> 
> 标签：ios, uiview

我有一个从 xib 文件加载的自定义 UIView (MyView) 对象。在 MyView.m 中，我有一个在 initWithCoder 中调用的方法，它会进行一些初始化。这在大多数情况下都有效，但我试图在此处设置一些 IBOutlet 标签属性中的文本，但它不起作用，我意识到因为此时属性尚未初始化。

我尝试在 drawRect 方法中设置网点的文本，它确实有效。但我想我读到如果你不需要实现 drawRect 会导致一些性能下降。我的问题是，在哪里设置 IBOutlet 标签属性的文本的最佳位置？（我实际上正在做的是将其设置为 xib 中的本地化版本。我知道本地化的 xib 文件，但我想在代码中设置文本。）

* * *

这是一些代码。这是我在视图控制器中初始化视图的方式：

```
NSArray *nibContents = [[NSBundle mainBundle] loadNibNamed:@"MyView"
                                                     owner:self
                                                   options:nil];
_myView = [nibContents objectAtIndex:0]; 
```

这是 MyView.m 中的 initWithCoder 方法

```
- (id)initWithCoder:(NSCoder *)coder
{
    self = [super initWithCoder:coder];
    if (self) {
        [self localizeLabels];
    }
    return self;
} 
```

这是 localizeLabels 方法：

```
- (void)localizeLabels
{
    self.powerPlant.text = NSLocalizedString(@"POWERPLANTBREAKDOWN_HEADERCOLUMN1", nil);
    self.output.text = NSLocalizedString(@"POWERPLANTBREAKDOWN_HEADERCOLUMN2", nil);
    self.capacity.text = NSLocalizedString(@"POWERPLANTBREAKDOWN_HEADERCOLUMN3", nil);
} 
```

我检查了这些方法确实是使用断点调用的，并且 localizeLabels 方法中的属性为零。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:55:02.183

**更新**：您的`MyView.m`课程一开始应该是这样的。

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        NSArray *nibContents = [[NSBundle mainBundle] loadNibNamed:@"MyView"
                                                         owner:self
                                                       options:nil];
        UIView *_myView = [nibContents objectAtIndex:0];
        [self addSubview: _myView];
        [self localizeLabels];
    }
    return self;
}

- (id)initWithCoder:(NSCoder *)aDecoder {
    self = [super initWithCoder:aDecoder];
    if (self) {
        // Initialization code
        [self localizeLabels];
    }
    return self;
} 
```

在你的`viewcontroller`. `initialize`你需要`MyView`这样。

```
MyView _view = [[MyView alloc]initWithFrame:CGRectMake(0, 0, 100, 100)];
[self.view addSubview:_view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:32:09.960

如果您的 IBOutlet 属性正确连接到 Interface Builder 中的 xib，则它们将*被初始化。*初始化发生在 xib 加载到应用程序中时。毕竟，这些属性只是对 xib 实例化对象的弱引用。

所以我最好的猜测是你没有将 IBOutlets 连接到它们各自的 xib 对象 - 检查 Interface Builder。

# image - 为什么我的徽标不会出现在我的 wordpress 主题中？

> ID：14125424
> 
> 赞同：0
> 
> 时间：2013-01-02T16:20:03.260
> 
> 标签：image, wordpress, themes, loading, graphical-logo

当您第一次到达索引页面时，我的徽标图像加载出现问题。它最初不会加载。但是，如果您单击其中一个内部页面，之后它将正常加载。有任何想法吗？

[http://wilsoncain.com/](http://wilsoncain.com/) http://karinjillkatz.com/

我在两个站点上使用相同的主题。两者的问题都是一样的。

感谢您的任何建议，我一直无法弄清楚这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:34:40.750

当您加载页面时，加载此图片确实有问题：http: [//karinjillkatz.com/wp-content/themes/aries-orig/images/select_arrow.gif](http://karinjillkatz.com/wp-content/themes/aries-orig/images/select_arrow.gif) 您需要删除/更正路径，以便它不会破坏您网站的其余部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:41:36.923

如果您使用`Google Chrome`（我不确定此功能是否存在于任何其他浏览器中，因为我不使用它们），并右键单击页面上的任意位置，您可以单击`Inspect Element`哪个会播下有关该页面的大量详细信息。

在检查器窗口中，它还会告诉您加载页面时发生的任何错误......在您的网站（WilsonCain）上，`5`出现了错误：

> 404：[http](http://wilsoncain.com/wp-content/themes/aries/images/module_line.png)
> : //wilsoncain.com/wp-content/themes/aries/images/module_line.png 404： [http](http://wilsoncain.com/wp-content/themes/aries/images/select_arrow.gif)
> ://wilsoncain.com/wp-content/themes/aries/images/select_arrow.gif 404：[http： //wilsoncain.com/wp-content/themes/aries/Aaargh-webfont.woff](http://wilsoncain.com/wp-content/themes/aries/Aaargh-webfont.woff)
> 404 ： [http](http://wilsoncain.com/wp-content/themes/aries/Aaargh-webfont.ttf)
> ://wilsoncain.com/wp-content/themes/aries/Aaargh-webfont.ttf 404：[http://wilsoncain。 com/wp-content/themes/aries/Aaargh-webfont.svg](http://wilsoncain.com/wp-content/themes/aries/Aaargh-webfont.svg)

在您的网站（Karin Jill）上，`1`出现了错误：

> 404： http: [//karinjillkatz.com/wp-content/themes/aries-orig/images/select_arrow.gif](http://karinjillkatz.com/wp-content/themes/aries-orig/images/select_arrow.gif)

我将首先查看这些图像并更正可能不再存在或可能已重命名的文件的任何路径。

# python - 如何将分位数应用于熊猫 groupby 对象？

> ID：14125428
> 
> 赞同：4
> 
> 时间：2013-01-02T16:20:20.170
> 
> 标签：python, pandas

我有一个名为`grouped`. 我可以使用`grouped.mean()`其他简单的功能，但无法`grouped.quantile()`使用。尝试运行时出现以下错误`grouped.quantile()`：

```
ValueError: ('invalid literal for float(): groupA', u'occurred at index groups') 
```

我是按文本标签分组的，所以我不确定为什么该函数会尝试将其转换为浮点数。它应该使用每组中的浮点数计算分位数。有人可以帮助指出我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:25:28.563

看起来 quantile() 并没有忽略讨厌的列，而是试图为您的文本列找到分位数。这是一个简单的例子：

```
In [75]: df = DataFrame({'col1':['A','A','B','B'], 'col2':[1,2,3,4]})

In [76]: df
Out[76]:
  col1  col2
0    A     1
1    A     2
2    B     3
3    B     4

In [77]: df.groupby('col1').quantile()
ValueError: ('could not convert string to float: A', u'occurred at index col1') 
```

但是，当我只对数字列进行子集化时，我得到：

```
In [78]: df.groupby('col1')['col2'].quantile()
Out[78]:
col1
A       1.5
B       3.5 
```

# android - su 可以从 adb 调用，但不能从 android 调用

> ID：14125432
> 
> 赞同：1
> 
> 时间：2013-01-02T16:20:44.177
> 
> 标签：android, odroid

我在根设备上遇到问题（带有我的个人 rom 的 odroid x）我有 su 并设置了用户 ID 标志：

```
root@android:/ # ls -l /system/xbin/su                                         
-rwsr-sr-x root     root        22372 2013-01-02 15:44 su 
```

从 adb 中，我可以看到设备已植根：

```
root@android:/ # id
uid=0(root) gid=0(root)
root@android:/ # 
```

所以一定要执行 su 作品:)

在 android 应用程序上，我有一个简单的 Java 应用程序请求 su ：它不起作用。使用 Android 终端，su 由于“权限被拒绝”而失败

请注意，我有另一个平板电脑已成功植根。我给 su 赋予了完全相同的权利，并从 android 终端工程调用 su 。

你能告诉我我错过了什么吗？我读到必须设置正确的 uid 以允许 android 应用程序（具有自己的用户 id）调用它。这是对的吗 ？

非常感谢 ！

埃洛伊

# split - 。分裂（）; 使函数运行另一个函数时出错

> ID：14125443
> 
> 赞同：0
> 
> 时间：2013-01-02T16:21:17.640
> 
> 标签：split, javascript

我的`.split();`方法有问题。

我称这个函数为：

```
get_content_ajax("html/settings.html", "#ajax", 1, "Settings page have been loaded.", "place_settings", "'settings', 'api_username', 'api_password', 'hmm, ja', 'settings'"); 
```

以下是相关功能：

```
function get_content_ajax(load, element, set_status, status, success_function, success_function_values) {
    element = typeof element !== 'undefined' ? element : "#ajax";
    set_status = typeof set_status !== 'undefined' ? set_status : 0;
    status = typeof status !== 'undefined' ? status : "";
    success_function = typeof success_function !== 'undefined' ? success_function : null;
    success_function_values = typeof success_function_values !== 'undefined' ? success_function_values : "";
    $("#work-station").load(load, function(response, status, xhr) {
        if (status == "success") {
            if (set_status == 1) {
                insert_to_element(element, response);
                stop_loading_img("loader");
                start_loading_img("done");
                set_loading_status(status);
                if (success_function != null && success_function != 0) {
                    window[success_function](success_function_values);
                }
            }
        } else { // status = "error"
            no_connection();
        }
    });
}

function place_settings(id, settings, default_values, page) {
    var s = settings.split(', ');
    var d = default_values.split(', ');
    $.each(s, function(index, value) { 
        //alert(index + ': ' + value + " - default value: " + d[index]); 
        insert_to_element("#" + id + " .", get_setting(value, d[index]));
    });
} 
```

然后我运行它，我收到以下错误：

```
Uncaught TypeError: Cannot call method 'split' of undefined 
```

我注意到，`id`出于某种原因，该变量具有来自所有变量的所有信息。希望这可以帮助。

OBS：我希望我的代码和我的问题一样有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:25:51.270

您只传递一个值：

```
if (success_function != null && success_function != 0) {
                    window[success_function](success_function_values);
} 
```

所以第一个参数（id）得到它。你需要做的是：

```
function place_settings(data) {
   //now data contains all the information you need and you can get the values from it

var id = data['id'];
...
    });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:25:05.713

我认为您没有在函数调用中传递正确的参数

```
place_settings 
```

这就是为什么要么`settings`是未定义的，要么是`default_values`在你的

```
place_settings function. 
```

# functional-dependencies - 从功能依赖中找到候选键

> ID：14125444
> 
> 赞同：0
> 
> 时间：2013-01-02T16:21:25.897
> 
> 标签：functional-dependencies, candidate-key

对于具有以下功能依赖关系的关系 {A,B,C,D} -

```
A -> BCD
B -> C
CD -> A 
```

使用我在其中一个站点上找到的特定方法，我将候选键作为 ABCD。那正确吗 ？什么是正确的候选键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T13:30:10.407

ABCD 是一个微不足道的超级密钥。每个算法都必须生成 ABCD。但是 ABCD 不是这种关系中的候选键。根据定义，候选键是最小超键。

您可以通过简单的检查来判断链接中的算法是不够的。它不会生成 A 作为候选键，但您会得到 A -> BCD，因此 A 显然是候选键。除了 A 之外，还有两个候选键。

[@ErwinSmout 的这个 SO 回答](https://stackoverflow.com/a/7788117/562459)描述了一种适用于铅笔和纸的算法。大多数教科书都包含适用于自动化的算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-10T09:34:19.577

让我们简单点：这是**Super,candidate**键的定义

**超级钥匙**

> 超级密钥代表密钥的超集。
> 
> 超级密钥是一组一个或多个属性，它们被集体采用，并且可以唯一地标识所有其他属性。

**候选键**

> 候选键是超级键，没有适当的子集是超级键。
> 
> 换句话说，候选键是最小的超级键。

通过**闭包属性**，我们得到

> **A+=ABCD**

自从

> A->BCD**给定**
> 
> A-> **自反性规则**

因此 A 是候选键。

希望这可以帮助！

# javascript - 如何在 JQplot 中动态更改 yaxis 标签

> ID：14125445
> 
> 赞同：0
> 
> 时间：2013-01-02T16:21:25.493
> 
> 标签：javascript, jqplot

我正在使用 jqplot，我想动态更改我的 yaxis 的标签。

我尝试了以下方法：

```
plot1.axes.yaxis.label = "New label";
plot1.replot(); 
```

不幸的是，我的轴标签与我的 plot1 选项的声明相同。

可以动态更改 yaxis（或 xaxis）标签吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T17:24:02.813

尝试：

```
plot1.axes.yaxis.labelOptions.label = "hi mom";
plot1.replot(); 
```

或者，如果您**不**使用，`canvasAxisLabelRenderer`您可以直接操作 DOM div 元素：

```
$('.jqplot-yaxis-label').html("hi mom"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-15T05:55:20.633

您也可以直接在`replot()`函数中提供选项，如下所示：

```
plot1.replot( {
    axis : {
        yaxis : {
            labelOptions: {
                label: 'hi mom'
            }
        }
    }
}); 
```

# ruby-on-rails - Michael Hartl 第 3 课：Rspec 静态页面错误

> ID：14125446
> 
> 赞同：0
> 
> 时间：2013-01-02T16:21:27.453
> 
> 标签：ruby-on-rails, rspec, railstutorial.org

错误：![http://i.imgur.com/mZ87w.png](../Images/48901c248104c04b6d1f4cedebfab571.png)

代码粘贴在[http://pastebin.com/mYSMupYy](http://pastebin.com/mYSMupYy)

我一直在尝试解决此问题，但看不到任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T16:52:37.070

看起来您正在手动设置所有 .html.erb 文件中的标题，而不是使用您在控制器中定义的实例变量。尝试为每个页面执行此操作。

## 主页.html.erb

```
<!doctype html>
<html lang="en">
<head>
    <title>Ruby on Rails Tutorial Sample App | <%= @title %></title> <!-- changed 'Home' to @title -->
</head>
<body>
    <h1>Home</h1>
<p>This is the home page for the <a href="http://railstutorial.org/">Ruby on Rails     Tutorial</a> sample application.</p>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T16:47:35.110

我猜你的页面没有正确的标题。如果您转到主页并查看源代码，`<title>`标签之间是否显示“Ruby on Rails Tutorial Sample App | Home”？

如果没有，您可能需要在`app/views/layouts/application.html.erb`那里检查和编辑标题。教程中可能有一部分您错过了。

# windows - Windows Azure 错误

> ID：14125453
> 
> 赞同：0
> 
> 时间：2013-01-02T16:21:58.657
> 
> 标签：windows, azure, azure-storage

我在 Windows Azure 中收到此错误..

钥匙错了！多谢！但现在我收到此错误：指定的表不存在。

初始代码不是我编写的...我需要清理代码...

我还没有找到确定表的位置...

Ps.：对不起这个令人困惑的问题......这就是我所知道的关于这个问题的全部......

# java - 从其他类调用子类方法 - Android (java)

> ID：14125454
> 
> 赞同：0
> 
> 时间：2013-01-02T16:21:59.350
> 
> 标签：java, android, database, subclass, sqliteopenhelper

我有一个有效的琐事游戏，现在正在尝试实现高分。我创建了一个扩展 SQLiteOpenHelper 的子类 DatabaseHelper 类。我试图从另一个类调用子类 DatabaseHelper 中的一个方法，但遇到错误。这些类不会编译，因此没有 LogCat 输出。我已经在代码中注释了错误。

代码结构建议也很受欢迎！

高分.java

```
public class Highscores extends Activity {

    DatabaseHelper dh;
    SQLiteDatabase db;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        dh = new DatabaseHelper(context);
    }

    public class DatabaseHelper extends SQLiteOpenHelper { 

        public DatabaseHelper(Context context) { 
            //code
        }

        public boolean check(long score, int percentage) {
            //code
        }
    }
} 
```

结果.java

```
public class Results extends Activity {

    DatabaseHelper dh;  //Error:  "DatabaseHelper cannot be resolved to a type."

    public void onCreate(Bundle savedInstanceState) {

        dh = new DatabaseHelper();  //Error:  "DatabaseHelper cannot be resolved to a type."
    }

    public void showResults() {

        if(dh.check(score, percentage) == true) {  //Error:  "DatabaseHelper cannot be resolved to a type."
      dh.insert(score, percentage);  //Error:  "DatabaseHelper cannot be resolved to a type."
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T16:24:41.280

当您需要在它定义的类之外的类时，我建议将该类创建为单独的类。否则，您需要创建外部类的实例来访问将创建 Activity 实例的内部类并在 Activity 实例上调用 DatabaseHelper，这在 Android 中不是一个好方法。

如果您仍想继续使用现有方法，这就是您需要访问它的方式：

```
OuterClass outerObject = new OuterClass();
OuterClass.InnerClass innerObject = outerObject.new InnerClass(); 
```

请阅读[嵌套类教程](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:24:11.983

听起来您在 Results.java 顶部缺少导入

它应该类似于 import com.somepackage.DatabaseHelper;

像这样的错误通常是类名中的拼写错误或缺少导入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:41:43.710

不要使用嵌套类，直到你确定你需要它们。将 DatabaseHelper 移动到单独的类文件并在需要时将其导入。

# php - 将结果放入导致 __PHP_Incomplete_Class 对象的会话变量中

> ID：14125455
> 
> 赞同：0
> 
> 时间：2013-01-02T16:21:59.657
> 
> 标签：php, filemaker

> **可能重复：**
> [会话、PHP 不完整类](https://stackoverflow.com/questions/10069120/session-php-incomplete-class)

需要一些帮助。我有以下代码，它用 PHP 查询 FileMaker 数据库。

查询带来了预期的结果，因为我想在其他地方使用这些结果，所以我想在会话中存储/缓存它们。但是，当我将它们存储在 a 中`$_SESSION`时，我得到 了`__PHP_Incomplete_Class`Object，但如果我打印正常结果，它似乎打印得很好。

这是有效的代码，下面是无效的。它们几乎相同。我使用 FileMakers 自己的 PHP 安装。PHP 5

**工作代码：**

```
if(!session_id()) session_start();

$find = $fm->newFindCommand('Web'); 

$find->addFindCriterion('ID', '=='.$_SESSION['ID']);

$Results = $find->execute();

echo "<pre>";
print_r($Results); // this prints perfectly i.e. FileMaker_Result_Implementation Object
echo "</pre>"; 
```

**破代码：**

```
if(!session_id()) session_start();

$find = $fm->newFindCommand('Web'); 

$find->addFindCriterion('ID', '=='.$_SESSION['ID']);

$Results = $find->execute();

$_SESSION['results'] = $Results;

echo "<pre>";
print_r($_SESSION); //I want to print all the sessions out
echo "</pre>" 
```

多谢你们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:28:04.610

`__PHP_Incomplete_Class`表示该类对于 PHP 是未知的。在开始会话之前加载课程，一切都应该正常

# ember.js - 在应用程序的每个状态下获取数据的最佳方法

> ID：14125456
> 
> 赞同：0
> 
> 时间：2013-01-02T16:22:05.893
> 
> 标签：ember.js

我发现了这个[jsFiddle](http://jsfiddle.net/JLHuG/)，我现在想知道最好的方法是使用来自 Ember.js 的新 v2 路由器显示贡献者列表`IndexRoute`和所有子路径中的贡献者列表。`match('/contributor/:contributor_id')`

我遇到的问题是

```
App.IndexRoute = Ember.Route.extend({
    model: function() {
        return App.Contributor.find();
    }
});​ 
```

仅在指定`/`路线上获取数据。

当直接导航到`/#/contributor/[some_id]`数据时`IndexRoute`不会加载，用户首先必须导航到`/`查看贡献者列表。

我找到的唯一可能的解决方案是在模板`ContributorsView`中调用 which 。`application`同时我不知道如何用数据填充这个视图，因为视图没有`model`路由所具有的属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T11:07:45.060

我对新的路由器实现还不满意，但从设计的角度来看，我会为路由使用不同的结构，例如通过添加贡献者路由，可从索引访问，并且可能直接重定向到贡献者。然后你总是显示贡献者，当点击其中一个时，你可以看到详细信息。一种主/细节块。

这里是路由器地图：

```
App.Router.map(function(match){
  match('/').to('home');
  match('/about').to('about');
  match('/contributors').to('contributors', function(match){
    match('/').to('contributorsIndex');
    match('/:contributor_id').to('contributor', function(match){
      match('/').to('contributorIndex');
      match('/details').to('contributorDetail');
      match('/repos').to('contributorRepos');
    });
  });
}); 
```

这是我会做的：http: [//jsfiddle.net/JLHuG/21/](http://jsfiddle.net/JLHuG/21/)它对你有用吗？

# php - 子域更改图像路径

> ID：14125464
> 
> 赞同：1
> 
> 时间：2013-01-02T16:22:39.940
> 
> 标签：php, javascript, jquery, subdomain

我有一个带有后端控制面板的动态网站，其中包含用于数据输入的 ckEditor。

ckEditor 插入具有以下路径的图像：**/userfiles/image1.jpg**当我调用页面以在用户界面上显示时，如果我从主 url 访问它，它显示完美，但由于某些原因，我们必须在子文件夹中移动一些部分，当我从该子域访问同一页面，但无法显示图像。
当我检查图像的 url 时，它显示为：
**app1.mysite.com/userFiles/image1.jpg**

但实际路径是：
**mysite.com/userFiles/image1.jpg。**

有什么技巧或技术可以解决这个问题吗？
我正在使用 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:26:57.760

您可以`<base>`在您的`<head>`:

[http://www.w3schools.com/tags/tag_base.asp](http://www.w3schools.com/tags/tag_base.asp)

用 PHP 做 ist 很难。事先将其更改为绝对 URL 可能是最好的方法，事后更改它意味着 HTML 扫描、查找图像、检查 url 是绝对的还是相对的，并在需要时进行更改。

# apache - 限制下载连接 Apache

> ID：14125467
> 
> 赞同：2
> 
> 时间：2013-01-02T16:22:44.540
> 
> 标签：apache, download-manager

我正在启动一个附属计划，并且我提供托管的 flv/mp4 文件作为促销工具。

所以我会为数百名冲浪者提供这些视频文件。

我的问题是我如何限制这些文件的连接，我知道它到底在说什么，但是像**禁用段下载**

因此，当用户使用下载管理器时，它不会使用下载恢复选项启动多个连接。

所以我的文件只能缓慢地提供给 Flash 视频播放器。

就像使用下载管理器从某些服务器下载文件时，它显示“不支持恢复”并且只有一个连接下载文件。

这可以用 apache 完成吗？如果是，那么它叫什么？

我正在使用 apache 来提供文件

希望这能清除我正在寻找的东西。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-04T09:24:43.477

好的，我在这里找到了解决方案

[http://www.apachelounge.com/viewtopic.php?p=9754](http://www.apachelounge.com/viewtopic.php?p=9754)

在 .htaccess 中添加它就可以了

```
Header set Accept-Ranges none
RequestHeader unset Range 
```

希望这会有所帮助。对于寻找相同解决方案的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-07T21:33:53.910

您可以使用 mod_rewrite + mod_headers 来完成这两件事（两者都带有 Apache） -

A. 禁用段（字节范围）下载。

B. 阻止下载管理器启动的多个连接。

进入目录的 .htaccess 文件，尝试放置以下配置：

```
Header set Accept-Ranges none
RewriteCond %{HTTP:Range} !^$
RewriteRule .* - [F,L] 
```

这将简单地删除任何请求文件部分（而不是整个文件）的内容。

*您需要确保上述模块已加载，重写引擎处于开启状态，并且上述指令已启用以在 htaccess 上下文中使用。

有关更全面的配置和说明，请参阅[阻止下载管理器和加速器](http://www.devside.net/wamp-server/blocking-download-managers-and-accelerators)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:35:58.723

它可以用 apache 完成，但你必须编写自己的模块。您最好的选择是通过 PHP 或您使用的任何前端提供视频文件。然后当有人观看视频时，您创建一个会话并将其与他们的 ip 一起放入数据库中。如果在该视频的前一个会话仍在数据库中时再次加载该视频，则您拒绝连接。

# asp.net - Web.Config 奇怪 部分？

> ID：14125468
> 
> 赞同：4
> 
> 时间：2013-01-02T16:22:46.943
> 
> 标签：asp.net, web-config

我在[这里浏览了一个 ASP.Net 网络表单教程：](http://www.asp.net/web-forms/tutorials/aspnet-45/getting-started-with-aspnet-45-web-forms/aspnet-error-handling)在 asp.net 网站上。本教程包含自定义错误部分，这对我来说有点奇怪。

```
<customErrors mode="On" defaultRedirect="ErrorPage.aspx?handler=customErrors%20section%20-%20Web.config">
    <error statusCode="404" redirect="ErrorPage.aspx?msg=404&amp;handler=customErrors%20section%20-%20Web.config" />
</customErrors> 
```

**问题：有人可以解释****defaultRedirect** & **redirect**`handler=customErrors%20section%20-%20Web.config"`中的查询字符串参数吗？

 ****这个语法有什么特殊含义吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T16:24:05.993

`%20`只是 URL 编码的空格。它在查询字符串中发送重定向到错误处理程序页面的内容的人类可读名称。****

# php - 如何制作动态页面标签 URL？

> ID：14125473
> 
> 赞同：1
> 
> 时间：2013-01-02T16:23:09.657
> 
> 标签：php, facebook, facebook-graph-api

![在此处输入图像描述](../Images/67b10f3430a0b13a3bb0026f27dc0818.png)

Facebook 允许通配符域。因此，任何 *.domain.com 都可以在单个应用程序 ID 中使用。

现在我想让每个粉丝页面都`Page Tab URL`对我的应用程序和 URL 示例具有唯一性`one.domain.com`，`two.domain.com`等等。

子域实际上指向主应用程序 & 脚本将子域作为唯一 ID。

[https://developers.facebook.com/docs/appsonfacebook/pagetabs/](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)

我发现`signed_request`可以添加额外的参数&我对这个有点迷茫。

我可以知道如何确保每个粉丝页面都有唯一的 URL 的逻辑吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:32:47.110

> 我可以知道如何确保每个粉丝页面都有唯一的 URL 的逻辑吗？

您只能设置**一个**Page Tab URL（实际上是两个，一个用于 HTTP，一个用于 HTTPS）。

您不能让不同的页面使用相同的应用程序作为页面选项卡，并让它们从一开始就访问不同的 URL。

您可以做的是检查您在signed_request 参数中获得的页面ID——然后，根据页面，重定向到您喜欢的任何地方或输出任何您喜欢的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-07T13:00:29.047

```
<%@ page import ="java.io.*,java.util.*" %> <%@ page import = "java.util.Arrays,javax.crypto.Mac,javax.crypto.SecretKey,javax.crypto.spec.SecretKeySpec" %> <%@ page import = "org.json.simple.parser.*,org.apache.commons.codec.binary.Base64" %> <%@ page import = "java.io.UnsupportedEncodingException,javax.xml.bind.DatatypeConverter" %> <%

if (request.getParameter("signed_request") != null) {
    String input  =  request.getParameter("signed_request");
    //input ="q3v8X8hbmkKXaF_DZaLBPapMPVjMgpq8bZe-SmYc6Fs.eyJhbGdvcml0aG0iOiJITUFDLVNIQTI1NiIsImlzc3VlZF9hdCI6MTUxMjYyOTY5MiwicGFnZSI6eyJpZCI6IjEzOTg4MTM1MDM3NTUyMzEiLCJhZG1pbiI6dHJ1ZSwibGlrZWQiOnRydWV9LCJ1c2VyIjp7ImNvdW50cnkiOiJpbiIsImxvY2FsZSI6ImVuX0dCIiwiYWdlIjp7Im1pbiI6MjF9fX0";
    String secretKey = "d8e6e697b9c958a8ee8f2e";
    int max_age = 3600;
    try
    {
        String[] split = input.split("[.]", 2);
        String encoded_sig = split[0];
        String encoded_envelope = split[1];
        JSONParser parser = new JSONParser();
        // check 
        //out.println("<br>"+ new String(new Base64(true).decode(encoded_envelope)));
        Map envelope = (Map) parser.parse(new String(new Base64(true).decode(encoded_envelope)));
        String algorithm = (String) envelope.get("algorithm");
        if (!algorithm.equals("HMAC-SHA256")) {
            throw new Exception("Invalid request. (Unsupported algorithm.)");
        }
        if (((Long) envelope.get("issued_at")) < System.currentTimeMillis() / 1000 - max_age) {
            throw new Exception("Invalid request. (Too old.)");
        }
        byte[] key = secretKey.getBytes();
        SecretKey hmacKey = new SecretKeySpec(key, "HMACSHA256");
        Mac mac = Mac.getInstance("HMACSHA256");
        mac.init(hmacKey);
        byte[] digest = mac.doFinal(encoded_envelope.getBytes());
        if (!Arrays.equals( new Base64(true).decode(encoded_sig), digest)) {
            throw new Exception("Invalid request. (Invalid signature.)");
        }
        String pageId = ((Map)envelope.get("page")).get("id").toString();
        if(pageId.equals("1398813503755231")){
            response.sendRedirect("https://yourdomain.com/1111");
        }
        else if(pageId.equals("151433128812548")){
            response.sendRedirect("https://yourdomain1.com/2222");
        }  }
    catch(Exception e)
    {
        out.println("error"+e);
    } } %> <html> <head> Facebook Store <script> var appId = 'your app id'; var pageId=''; window.fbAsyncInit = function() {
    FB.init({
      appId            : appId,
      autoLogAppEvents : true,
      xfbml            : true,
      version          : 'v2.11'
    });   };   (function(d, s, id){
     var js, fjs = d.getElementsByTagName(s)[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement(s); js.id = id;
     js.src = "https://connect.facebook.net/en_US/sdk.js";
     fjs.parentNode.insertBefore(js, fjs);    }(document, 'script', 'facebook-jssdk')); function createPageTab(){
    FB.ui(
        {
            method: 'pagetab',
            redirect_uri:'https://9d5b71a7.ngrok.io/facebook-store.jsp'
        },
        function(response) {
            console.log(JSON.stringify(response));
            if (response != null && response.tabs_added != null) {
                for( pageid in  response.tabs_added){
                      pageId = pageid;
                }
            }
        }
    ); }

function viewPageTab(){
    var url = 'https://facebook.com/pages/-/'+pageId+'?sk=app_'+appId;
    window.open(url,'_blank'); }

</script> </head> <body>
    <button onClick="createPageTab()" >Connect your store with facebook </button>
    <button onClick="viewPageTab();" > View your Store </button> </body> </html

> 

 1\. `

> Blockquote

` 
```

# c++ - 在 C 和 C++ 中的函数指针和对象指针之间转换

> ID：14125474
> 
> 赞同：14
> 
> 时间：2013-01-02T16:23:15.977
> 
> 标签：c++, c

我对以下内容有误吗？

C++ 标准说指针到函数和指针到对象（和返回）之间的转换是由实现定义的语义条件支持的，而所有 C 标准都说这在所有情况下都是非法的，对吗？

```
void foo() {}

int main(void)
{
    void (*fp)() = foo;
    void* ptr = (void*)fp;
    return 0;
} 
```

**ISO/IEC 14882:2011**

5.2.10 重新解释演员表 [expr.reinterpret.cast]

> 8 有条件地支持将函数指针转换为对象指针类型或反之亦然。这种转换的含义是实现定义的，除非实现支持双向转换，将一种类型的纯右值转换为另一种类型并返回，可能具有不同的 cvqualification，应产生原始指针值。

我现在在 C 标准中找不到任何关于它的内容......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-02T16:59:50.437

*   在 C++03 中，这种转换是非法的（不是 UB）。编译器应该发出诊断。Unix 系统上的许多编译器都没有发出诊断。这本质上是标准之间的冲突，POSIX 与 C++。
*   在 C++11 中，“有条件地支持”此类转换。如果系统确实支持这种转换，则不需要诊断；没有什么可以诊断的。
*   在 C 中，这种转换正式是未定义的行为，因此不需要诊断。如果系统碰巧做了“正确”的事情，那是实现 UB 的一种方式。
*   在 C99 中，这又是 UB。但是，该标准还将此类转换列为该语言的“通用扩展”之一：

    > J.5.7 函数指针转换
    > 指向对象或 void 的指针可以转换为指向函数的指针，从而允许将数据作为函数调用 (6.5.4)。
    > 指向函数的指针可以转换为指向对象的指针或 void，从而允许检查或修改函数（例如，通过调试器）（6.5.4）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-02T16:26:05.470

你是对的，C(99) 标准没有说明从指针到函数到指针到对象的转换，因此它是未定义的行为。^*

* * *

[*但是请注意，它确实定义了指向函数类型之间的行为。]

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-02T16:35:24.633

在所有 C 标准中，没有定义指针到函数和指针到对象之间的转换，在 C++11 之前的 C++ 中，不允许转换并且编译器必须给出错误，但是有些编译器接受C 和向后兼容性的转换，因为对于动态加载的库访问（例如`dlsym`POSIX 函数要求使用它）等事情很有用。C++11 引入了*条件支持*特性的概念，并使用它来使标准与现有实践相适应。现在编译器应该拒绝尝试进行这种转换的程序，或者它应该尊重给定的有限约束。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-01-02T16:53:55.763

尽管强制转换的行为没有由标准的“核心”定义，但这种情况在 C99 基本原理文档（6.3.2.3，*指针*）中被明确描述为无效：

> 关于指向函数的指针什么也没说，这可能与对象指针和/或整数不相称。
> 
> 即使使用显式强制转换，将函数指针转换为对象指针或指向 void 的指针也是无效的，反之亦然。

并且由于它可能有用，因此在标准的附件 J 中也将其称为“通用扩展”（C11 标准 J.5.7，*函数指针转换*）：

> 指向对象或 to**`void`**的指针可以转换为指向函数的指针，从而允许将数据作为函数调用 (6.5.4)。
> 
> 指向函数的指针可以转换为指向对象或指向的指针**`void`**，从而允许检查或修改函数（例如，通过调试器）（6.5.4）。

将其描述为扩展意味着这不是标准要求的一部分（但它不是必需的，省略任何显式行为就足够了）。

# javascript - Dynatree 在使用 ajax 时忽略 select 属性

> ID：14125480
> 
> 赞同：10
> 
> 时间：2013-01-02T16:23:57.427
> 
> 标签：javascript, jquery, ajax, json, dynatree

我正在使用 dynatree 插件来显示复选框树，使用多选模式（模式 3）。

当使用 ajax 初始化树时（没有延迟加载），似乎忘记了最初选择加载某些节点。当我选择其中一个节点时，传递给 onSelect 处理程序的标志值是 true，即：它认为我想选择节点。

当我再次单击复选框时，它会取消选择。在我实际单击复选框之前，似乎在后台没有注册选择。我想加载**已选择**此节点的树。

我用来加载树的 json 对我来说看起来不错；对于有问题的节点，即根节点，*select属性为 true。*这是 JSON 的一个片段：

```
{
"expand":true,
"title":"All",
"isFolder":false,
"key":"0",
"isLazy":false,
"addClass":null,
"select":true,
"unselectable":false,
"children": [... omitted for clarity]
} 
```

**更新**

我以这种方式加载树：

```
$("#locationsTree").dynatree({
    checkbox: true,
    selectMode: 3,
    initAjax: {
        type: "POST",
        url: dynaTreeInitUrl
    },
    classNames:
    {
        nodeIcon: ""
    }        
}); 
```

其中 dynaTreeInitUrl 是返回 json 的 url。

如果我像这样对 JSON 进行硬编码：

```
$("#locationsTree").dynatree({
    checkbox: true,
    selectMode: 3,
    children: {
        "expand":true,
        "title":"All",
        "isFolder":false,
        "key":"0",
        "isLazy":false,
        "addClass":null,
        "select":true,
        "unselectable":false,
        "children": [{
            "expand": true,
            "title": "Child",
            "isFolder": false,
            "key": "1",
            "isLazy": false,
            "addClass": null,
            "select": true,
            "unselectable": true,
            "children": []
        }]
    },
    classNames:
    {
        nodeIcon: ""
    }        
}); 
```

有用。：/

**更新：**

我发现了为什么会这样：

这是 dynatree 中的一个错误 - 或者可能是它试图过于聪明的预期行为。

如果子节点有unselectable = true，则即使父节点有select = true，加载子节点时也会取消选择父节点。这使得不可能创建一个选择是分层的树 - 即：拥有它以便如果选择了父项，则所有子项都会自动选择，并且不能取消选择。我想这可以作为另一种“模式”添加到 dynatree 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T20:15:59.267

我发现了为什么会这样：

这是 dynatree 中的一个错误 - 或者可能是它试图过于聪明的预期行为。

如果子节点有unselectable = true，则即使父节点有select = true，加载子节点时也会取消选择父节点。这使得不可能创建一个选择是分层的树 - 即：拥有它以便如果选择了父项，则所有子项都会自动选择，并且不能取消选择。我想这可以作为另一种“模式”添加到 dynatree 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-15T09:56:36.383

您可以使用以下代码：

```
onPostInit: function() {
$.map(this.getSelectedNodes(), function(node){
    node.makeVisible();
}); 
```

}

[Dynatree 展开选定节点的父节点](https://stackoverflow.com/questions/11310862/dynatree-expand-parents-of-selected-nodes)

# linux - FIFO 吞吐量取决于进程'`nice` 值

> ID：14125495
> 
> 赞同：2
> 
> 时间：2013-01-02T16:25:04.460
> 
> 标签：linux, pipe, overloading, scheduling

`nice`内核似乎独立于分配给这些进程的值来处理通过命名管道（FIFO）在两个进程之间传输的数据。这在以下情况下尤其明显，其中系统因需要处理大量并发进程而过载。

进程 A 和 B 通过 FIFO 进行通信；它们比所有其他需要高 CPU 使用率的进程具有更高的任务优先级（较低的 nice）。系统永久过载；当 A 和 B 之间没有通过 FIFO 进行通信时，这两个进程会牺牲较低优先级的进程来获得大部分 CPU。但是当 FIFO 通信开始时，仍然需要大量 CPU 的 A 和 B 被内核分开，并且具有更高 nice（nice 高 10 个单位）的进程几乎获得了所有 CPU。

似乎内核无法根据使用它们的进程的好坏来安排对 FIFO 的处理，并且当系统过载时，内核处理 FIFO 时没有特殊优先级。

是这样吗？

# disqus - DISQUS 冻结了我的电脑

> ID：14125498
> 
> 赞同：0
> 
> 时间：2013-01-02T16:25:15.793
> 
> 标签：disqus

从上个月开始，我一直面临着这个奇怪的问题。每当我加载与 DISQUS 集成的博客时，我的计算机都会冻结几秒钟，然后评论就会加载，一切都很好。它发生在 Firefox 和 Chrome 中。我的机器运行的是 Windows 7。

一个月前一切都很好，突然事情发生了变化。我已经用谷歌搜索了足够多的东西，但还没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T02:35:06.477

**通过在我的设置中禁用 Disqus 2012 功能，**我找到了一个临时解决方案。

# webforms - Rails simple_form gem 组件顺序

> ID：14125499
> 
> 赞同：0
> 
> 时间：2013-01-02T16:25:15.963
> 
> 标签：webforms, ruby-on-rails-3.2, simple-form

有没有办法使用配置使 simple_form 以不同的顺序呈现它的组件。

**SimpleForm**当前以这种方式显示：`label, input, errors, hint`

**我想要**：`label, input, hint, errors`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T14:48:20.693

如果您无法使用 css 管理它，您可能希望 bo 构建/编辑[包装器](https://github.com/plataformatec/simple_form#the-wrappers-api)

* * *

例如，在默认的 simple_form 包装器（/config/initializers/wrap_parameters.rb）中，我切换了`b.use :hint`和`b.use :error`行的顺序

```
config.wrappers :default, :class => :input,
    :hint_class => :field_with_hint, :error_class => :field_with_errors do |b|

  ...

  ## Inputs
  b.use :label_input
  b.use :error, :wrap_with => { :tag => :span, :class => :error }
  b.use :hint,  :wrap_with => { :tag => :span, :class => :hint }
end 
```

# hibernate - 具有多个左内连接的休眠条件 API

> ID：14125507
> 
> 赞同：1
> 
> 时间：2013-01-02T16:25:34.010
> 
> 标签：hibernate, inner-join, criteria-api

表关系如下：

*   包含身份、用户名、年龄列的用户表
*   具有标识、类型、街道列的地址表
*   一个 user_address_associations 表，其中包含 identity、userid 和 addressid 列。userid 与 users.identity 有外键关系，addressid 与addresses.identity 有外键关系。

我想选择所有 18 岁以上且地址类型设置为 1 的用户。存在用户和地址实体的休眠映射，但在从用户到地址的映射中没有定义关联。用户和地址之间的唯一链接是通过 user_address_associations 表指定的。此外，User 类没有定义 Addresses 属性。

原始 SQL 将是：

```
select * from users 
inner join user_address_associations   
on user_address_associations.userid=users.identity
inner join addresses 
on user_address_associations.addressid=addresses.identity and addresses.type=1
where db.users.age >= 18 
```

使用 Hibernate 3.6.5 Criteria API，我从这个开始：

```
Criteria criteria = session.createCriteria(User.class);

// how to do the join to addresses table through user_address_associations table?

// where clause
criteria.add(Restrictions.gt("Age", 1176)); 
```

问题是，我如何形成连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T18:56:24.763

不可能。Hibernate 查询（HQL 或 Criteria）仅使用实体、它们的持久字段和它们的关联。如果连接表未映射并且未用于定义用户和地址实体之间的关联，则您将无法使用 Hibernate 使用此表定义查询，当然 SQL 查询除外。

# sql - 在 SSIS 2008 包中执行 SQL 任务失败，但在包外成功运行

> ID：14125509
> 
> 赞同：0
> 
> 时间：2013-01-02T16:25:38.220
> 
> 标签：sql, ssis

我创建了一个执行 sql 任务来将在 Foreach 循环任务中遇到的文件名保存到数据库表中，当我运行单个任务并将文件名写入数据库表时，这工作正常（见下文）无法当前发布图像！ [任务成功运行][1] 但是，当我运行完整的 SSIS 包时，此任务失败（见下文）无法当前发布图像

![unsuccessful execution][2] 我得到的错误信息是：

```
Error: String or binary data would be truncated.
[Execute SQL Task] Error: Executing the query "insert into filename_staging_table
(FileName) Val..." failed with the following error: 
"The statement has been terminated.". Possible
failure reasons: Problems with the query,
"ResultSet" property not set correctly, parameters
not set correctly,
or connection not established correctly. 
```

非常感谢任何指导......我完全被卡住了！！！！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:24:08.830

错误显示“字符串或二进制数据将被截断”。脚本在手动运行时起作用的原因是因为您只尝试插入一个值。该值在列的长度限制内。

当您运行任务时，它会循环遍历文件名列表并尝试插入每个文件名。这些名称之一对于您尝试将其插入的字段来说太长了。

您需要更改 SQL 中字段的长度，或者您需要在文件名本身上使用 LEFT(filename, xx)，以便仅将前 xx 个字符插入到表中。（将 xx 更改为要插入的字符数）

# asp.net-mvc-3 - ViewBag 多个 SelectListItems

> ID：14125510
> 
> 赞同：0
> 
> 时间：2013-01-02T16:25:40.313
> 
> 标签：asp.net-mvc-3, viewbag, dropdownlistfor

从我的 MVC3 应用程序中得到一些非常烦人的行为。所以我有一个具有 3 个值的模型：

```
[DisplayName("Airlines ")]
[StringLength(2, ErrorMessage = "Airline codes can only be 2 characters in length")]
public string AirlineCode1 { get; set; }

[DisplayName("Airlines")]
[StringLength(2, ErrorMessage = "Airline codes can only be 2 characters in length")]
public string AirlineCode2 { get; set; }

[DisplayName("Airlines")]
[StringLength(2, ErrorMessage = "Airline codes can only be 2 characters in length")]
public string AirlineCode3 { get; set; } 
```

现在这些是从 a 填充的，`DropDowList`所以我在中弹出`DropDownListItem`s`ViewBag`并将它们呈现在视图中，例如：

```
@Html.LabelFor(l => l.AirlineCode1) <span>(select/enter code in box on right)</span>
<div id="airportCode1">
    @Html.DropDownListFor(d => d.AirlineCode, ViewBag.AirLines as List<SelectListItem>) <input type="text" maxlength="2" value="@Model.AirlineCode1" />
</div>
<div id="airportCode2" style="@Model.AirlineCode2Style">
     @Html.DropDownListFor(d => d.AirlineCode, ViewBag.AirLines2 as List<SelectListItem>) <input type="text" maxlength="2" value="@Model.AirlineCode2" />
</div>
<div id="airportCode3">
    @Html.DropDownListFor(d => d.AirlineCode3, ViewBag.AirLines3 as List<SelectListItem>) <input type="text" maxlength="2" value="@Model.AirlineCode3" />
</div> 
```

所以我的控制器看起来像：

```
IEnumerable<SelectListItem> airLines = PopulateAirlines(user);
ViewBag.AirLines = airLines;
ViewBag.AirLines2 = airLines;
ViewBag.AirLines3 = airLines; 
```

**现在在某些情况下，我想`AirLineCode`在模型中**进行预填充。所以我在控制器中设置模型值。这导致了一些奇怪的行为。突然间，我所有的`DropDownList`s都**包含了预填充的值！**

检查模型，值仅设置在`AirLineCode1`. 勾选了`ViewBag`，没有选中`SelectListItems`。所以我认为`ViewBag`必须保持参考。所以我将代码更改为：

```
ViewBag.AirLines = PopulateAirlines(user);
ViewBag.AirLines2 = PopulateAirlines(user);
ViewBag.AirLines3 = PopulateAirlines(user); 
```

繁荣，固定。问题是`PopulateAirlines`一个昂贵的过程！

问题是 ViewBag 似乎在 3`SelectListItem` `List`秒之间保持参考。我如何阻止它这样做并且仍然只打一个电话`PopulateAirlines(user);`？

我尝试了下面的代码，这完全炸毁了：

```
IEnumerable<SelectListItem> airLines = PopulateAirlines(user);
ViewBag.AirLines = airLines;
ViewBag.AirLines2 = airLines.Select(s => new SelectListItem() { Text = s.Text, Value = s.Value, Selected = s.Selected });
ViewBag.AirLines3 = airLines.Select(s => new SelectListItem() { Text = s.Text, Value = s.Value, Selected = s.Selected }); 
```

出现错误：

> 没有具有键“AirlineCode2”的“IEnumerable”类型的 ViewData 项。

什么？？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:30:58.300

可能是因为在这段代码中：

```
IEnumerable<SelectListItem> airLines = PopulateAirlines(user);
ViewBag.AirLines = airLines;
ViewBag.AirLines2 = airLines;
ViewBag.AirLines3 = airLines; 
```

所有`ViewBag`属性都引用同一个列表。因此，对列表的更改将在引用任何属性时反映出来。当您调用`PopulateAirlines`() 方法时，您将创建 3 个不同的列表。

您需要创建三个单独的列表，但只使用该`PopulateAirlines`方法创建第一个列表，然后将其***克隆***两次。那不会那么贵。

# google-app-engine - Google App Engine 如何恢复丢失的数据？

> ID：14125522
> 
> 赞同：0
> 
> 时间：2013-01-02T16:26:38.493
> 
> 标签：google-app-engine, data-recovery

我为俱乐部创建了一个应用程序来注册不同活动的会员，我有一个包含大约 25 个实体的数据存储区，过去我创建了 24 个 Club_Event 实体，每个实体都有如下信息：时间、地点、活动的详细信息和注册会员电子邮件等

一年多来一切顺利，直到两周前，发生了一些奇怪的事情，我找不到解释。我为新年庆祝活动创建了第 25 个活动。我错误地创建了 2 个事件，因为我按了两次生成事件按钮，所以当我查看数据存储时，我看到了 26 个事件，最后 2 个具有相同的信息，所以我手动删除了其中一个，之后它有25个活动，会员开始注册第25个活动，但是在上周的一天，第25个活动突然消失了，当人们去链接注册时他们只看到第24个活动[注册链接/网址总是一样的，servlet 只是调用 db 并按创建日期显示最新事件]，所以我从 Google App Engine 页面查看它，它在数据存储区中只有 24 个事件，第 25 个事件消失了，但是当我点击“

于是我不得不重新创建第25个活动，并手动输入会员电子邮件以弥补丢失的信息，然后重新注册，供会员注册。但是奇怪的事情在 12-31 再次发生，早上我检查了网站，还可以，但是到下午 3 或 4 点，第 25 次事件又消失了，当我点击“Datastore Admin”时，它说：“Internet资源管理器无法显示网页”，在它下面我点击了“返回上一页”。然后它显示只有 24 个“# Entities”的“Club_Event”。我检查了我的配额详细信息，该应用程序仅使用了 1%,2% 的资源，为什么会发生这种情况？是因为我两周前手动删除了重复的事件吗？在此之前我从未删除过一个事件，它运行良好，只是在我手动删除一个事件后才出错。

报名链接为：[http ://asfa-web.appspot.com/Singles_Club_Event_Sign_Up](http://asfa-web.appspot.com/Singles_Club_Event_Sign_Up)

它现在仍在显示第 24 个事件。Google App Engine 的人员可以与我联系以解决此问题吗？

@Jimmy Kane：也许你可以通过Java程序删除事件，但我的程序没有删除事件的代码，它只能创建，所以当我看到同一个事件的2个实体时，我从管理页面进入并将其删除。

@Paul C：它表现得好像什么都没发生，没有错误消息，而不是列出 25 个事件，它只能显示前 24 个事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T12:27:19.357

如果您需要直接联系 Google App Engine 团队，有一个名为高级帐户的昂贵选项，但我很确定他们不会帮助您解决问题。

我猜当您说“我手动删除了其中一个”时，这意味着您使用了数据存储管理器。删除信息后，将无法再次恢复。

# linux - QEMU CPU仿真原理

> ID：14125524
> 
> 赞同：10
> 
> 时间：2013-01-02T16:26:52.373
> 
> 标签：linux, qemu, emulation

在 QEMU 中，操作系统可以在软件模拟 CPU 之上运行。 **CPU怎么能被软件模拟？** 我想知道细节。

**如果 CPU 由软件模拟，寄存器是否与主机系统内存模拟？**

假设有ARM汇编代码

```
LDRB r0, [r1], #1 
```

**如何在 x86 环境中进行模拟？**

我的猜测是模拟软件将内存映射空间保留为`r0`（4字节），`r1`（4字节），然后更新相应内存位置的寄存器值......我错了吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-02T16:32:08.620

请参阅[此文件](http://git.qemu.org/?p=qemu.git;a=blob;f=target-arm/cpu.h;h=ffddfcbc0d1d18b5b23d92dabde8fda492246cc5;hb=HEAD)，了解由 QEMU 完成的 ARM CPU 状态的 C 级建模。

这非常简单，并且（当然）您怀疑寄存器（和所有其他状态）被建模为 C 变量。

核心结构开始：

```
typedef struct CPUARMState {
    /* Regs for current mode.  */
    uint32_t regs[16];
   /* Frequently accessed CPSR bits are stored separately for efficiency.
      This contains all the other bits.  Use cpsr_{read,write} to access
      the whole CPSR.  */
   uint32_t uncached_cpsr;
   uint32_t spsr; 
```

# sql-server-2008 - 使用计算列或存储过程

> ID：14125533
> 
> 赞同：0
> 
> 时间：2013-01-02T16:27:22.253
> 
> 标签：sql-server-2008, tsql, datetime, stored-procedures, calculated-columns

我有一张桌子，上面有几列用作`datetime`邮票。该表包含以下列

```
UpDate      datetime
SearchDate  datetime
ExpDate     dateadd(hour,24,UpDate)
Active      nvarchar(5) 
```

当`UpDate`列通过每日导入更新时，计算列`ExpDate`将更新时间 + 24 小时。我希望该`Active`列指示`'Y'`当前日期时间何时小于`ExpDate`以及`'N'`当前日期时间何时等于或大于`ExpDate`。

我想只使用存储过程来无限期地运行以检查并根据需要进行更新，但这没有意义，并且想知道是否有人对如何执行此操作有任何其他建议。例如，如果我也可以基于 IF 语句查询将其用作计算列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:48:01.533

除非您有充分的理由坚持计算，`ExpDate`并且`Active`我认为您应该在查询中针对您的表进行计算。

像这样的东西：

```
select [UpDate],
       SearchDate,
       dateadd(hour, 24, SearchDate) as ExpDate,
       case when getdate() >= dateadd(hour, 24, SearchDate)
         then 'N' 
         else 'Y' 
       end as Active
from YourTable 
```

如果您想要计算列，您的 DDL 将如下所示：

```
create table YourTable
(
  [UpDate] datetime,
  SearchDate datetime,
  ExpDate as dateadd(hour, 24, SearchDate),
  Active as case when getdate() >= dateadd(hour, 24, SearchDate)
              then 'N' 
              else 'Y' 
            end
) 
```

# websphere - Websphere CWWIM6004E

> ID：14125534
> 
> 赞同：0
> 
> 时间：2013-01-02T16:27:30.893
> 
> 标签：websphere, websphere-8

我正在尝试在 Websphere 8 中启动一个应用程序，并不断收到以下错误。从消息中，这意味着我们缺少`bindPassword`，但我们不必在 WAS 6.1 中定义

目前我们正在使用独立的 LDAP 注册表。有谁知道我应该从哪里开始寻找修复这个错误？

```
UserManagemen E com.ibm.ws.wim.management.UserManagementProcess handleNo
tification CWWIM6004E Initialization of the dynamic reload manager failed.
                                 com.ibm.websphere.wim.exception.MissingInitPropertyException: CWWIM0004E  The initialization property 'bindPassword' is missing from the configuration.
        at com.ibm.ws.wim.adapter.ldap.LdapConnection.initializeEnvironmentProperties(LdapConnection.java:194
7)
        at com.ibm.ws.wim.adapter.ldap.LdapConnection.initializeServers(LdapConnection.java:1904)
        at com.ibm.ws.wim.adapter.ldap.LdapConnection.initialize(LdapConnection.java:1832)
        at com.ibm.ws.wim.adapter.ldap.LdapAdapter.initialize(LdapAdapter.java:235)
        at com.ibm.ws.wim.RepositoryManager.initialize(RepositoryManager.java:610)
        at com.ibm.ws.wim.RepositoryManager.<init>(RepositoryManager.java:131) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-11-04T00:07:47.660

关于“....永远不必在 WAS 6.1 中定义”

LDAP 绑定密码的要求由 LDAP 服务器强制执行，这不是 WAS 要求

如果实际上您没有在 WAS v6.1 中定义它，那么用于 WAS V6.1 的 LDAP 服务器就不需要它。

根据错误，您更改了 LDAP 服务器或 LDAP 服务器配置已更改（或两者都更改）

如另一篇文章所述，您可以使用 ldapsearch 之类的工具进行故障排除

[http://www-01.ibm.com/support/docview.wss?uid=swg21470063](http://www-01.ibm.com/support/docview.wss?uid=swg21470063)上的技术说明讨论了获取“必须收集”和解决这些类型的问题（请参阅“手动收集数据”部分）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-24T17:52:06.093

您必须检查与 ldap 服务器用户 IBM WebSphere 控制台、安全设置、LDAP 的 ldap 连接，并记下 LDAP 连接设置。使用 ldapsearch 之类的工具通过 shell 命令行检查连接。这些绑定密码可能不正确。如果您使用的是非 Novell eDirectory Server，您必须特别注意创建绑定用户（字段密码）

# sql - 您应该在查询中对系统标识符使用引号吗？

> ID：14125535
> 
> 赞同：1
> 
> 时间：2013-01-02T16:27:32.840
> 
> 标签：sql

它可能取决于数据库类型，但是否有偏好（由数据库而不是编码器）还是使用引号更好？是吗：

*   快点？
*   更不容易出错？
*   有助于防止注射（是否使用 PDO）？

假设没有任何东西需要使用（空格、保留字等）。

MySQL：

```
SELECT `id` FROM `table` WHERE `name` = '$name'; 
```

ANSI：

```
SELECT "id" FROM "table" WHERE "name" = '$name'; 
```

与：

```
SELECT id FROM table WHERE name = $name; 
```

这个[答案](https://stackoverflow.com/a/11321508/84162)谈到了在 MySQL 中使用引号的要求，但我感兴趣的是什么时候数据库不需要它，但对于我上面列出的方面（也许更多）来说，它可能是首选/更好的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:32:15.940

标识符周围的引号仅在查询解析阶段使用 - 该阶段通过 SQL 语句并找出其句法元素。与其他阶段（查询优化、查询执行和将结果返回给调用者）相比，解析阶段相对较短。因此，无论您的特定 RDBMS 是什么，您都不应该期望在标识符周围使用引号引起任何可测量的加速或减速。

就或多或少容易出错而言，多部分标识符周围缺少引号在开发阶段很快就会变得很明显，因此在任何地方放置引号的做法都是不值得麻烦的，因为对人类的可读性会受到很大影响。

最后，在标识符周围添加引号不会帮助您防止注入攻击；*不在*所有标识符周围加上引号也是如此。许多 SQL 脚本生成器采用这种方法来避免`if`在脚本中测试标识符是否为多部分的语句。

引用所有标识符是一个好主意的唯一情况是当您以编程方式生成 SQL 时，结果*并不*适合人类读者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T16:34:26.437

我不喜欢使用带引号的标识符。它们打字的时间太长，而且代码混乱，使人类更难阅读。

此外，我更倾向于不鼓励在 SQL 中使用保留字作为标识符。对我来说，这只是一个好习惯。我的意思是，谁想阅读以下内容：

```
select `select`, `from` as `as`
from <some really messed up table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:35:29.130

我使用底部版本，因​​为我发现它更易于阅读，但这取决于您回应查询的方式。性能没有差异，因为它会读取引号，除非需要，因此除非在包含多个变量的查询中编写 WHERE 子句，否则您真的不知道它。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-02T16:30:09.050

我想说不要对数字标识符使用引号会更快；为什么要将数据类型转换的潜在开销添加到您希望（大概）尽可能高性能的查询中？

# eclipse - 将 EAR 部署到 WebLogic 的 Eclipse 验证错误：cvc-complex-type.2.4c: Expected element 'module@http://java.sun.com/xml/ns/javaee'

> ID：14125538
> 
> 赞同：3
> 
> 时间：2013-01-02T16:27:53.543
> 
> 标签：eclipse, weblogic, ear

开箱即用，无法使用 Eclipse 将 EAR 部署到 Oracle WebLogic。

环境细节：

*   Eclipse 版本：Indigo（包括 Oracle Enterprise Pack for Eclipse 12.1.1.0.0）
*   Weblogic版本：10.3.5（11gR1）

甲骨文指南：[http ://www.oracle.com/technetwork/articles/javaee/marx-oepe-spring-095718.html](http://www.oracle.com/technetwork/articles/javaee/marx-oepe-spring-095718.html)

尝试启动服务器时收到的错误是：

```
java.lang.Exception: Exception received from deployment driver. See Error Log view for more detail.
    at oracle.eclipse.tools.weblogic.server.internal.DeploymentProgressListener.watch(DeploymentProgressListener.java:190)
    at oracle.eclipse.tools.weblogic.server.internal.WlsJ2EEDeploymentHelper.deploy(WlsJ2EEDeploymentHelper.java:486)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishWeblogicModules(WeblogicServerBehaviour.java:1466)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishToServer(WeblogicServerBehaviour.java:898)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publishOnce(WeblogicServerBehaviour.java:686)
    at oracle.eclipse.tools.weblogic.server.internal.WeblogicServerBehaviour.publish(WeblogicServerBehaviour.java:539)
    at org.eclipse.wst.server.core.model.ServerBehaviourDelegate.publish(ServerBehaviourDelegate.java:774)
    at org.eclipse.wst.server.core.internal.Server.publishImpl(Server.java:3027)
    at org.eclipse.wst.server.core.internal.Server$PublishJob.run(Server.java:341)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
Caused by: weblogic.management.DeploymentException: VALIDATION PROBLEMS WERE FOUND
  problem: cvc-complex-type.2.4c: Expected element 'module@http://java.sun.com/xml/ns/javaee' before the end of the content in element application@http://java.sun.com/xml/ns/javaee:<null>
    at weblogic.application.internal.EarDeploymentFactory.findOrCreateComponentMBeans(EarDeploymentFactory.java:193)
    at weblogic.application.internal.MBeanFactoryImpl.findOrCreateComponentMBeans(MBeanFactoryImpl.java:48)
    at weblogic.application.internal.MBeanFactoryImpl.createComponentMBeans(MBeanFactoryImpl.java:110)
    at weblogic.application.internal.MBeanFactoryImpl.initializeMBeans(MBeanFactoryImpl.java:76)
    at weblogic.management.deploy.internal.MBeanConverter.createApplicationMBean(MBeanConverter.java:89)
    at weblogic.management.deploy.internal.MBeanConverter.createApplicationForAppDeployment(MBeanConverter.java:67)
    at weblogic.management.deploy.internal.MBeanConverter.setupNew81MBean(MBeanConverter.java:315)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.compatibilityProcessor(ActivateOperation.java:81)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.setupPrepare(AbstractOperation.java:295)
    at weblogic.deploy.internal.targetserver.operations.ActivateOperation.doPrepare(ActivateOperation.java:97)
    at weblogic.deploy.internal.targetserver.operations.AbstractOperation.prepare(AbstractOperation.java:217)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handleDeploymentPrepare(DeploymentManager.java:747)
    at weblogic.deploy.internal.targetserver.DeploymentManager.prepareDeploymentList(DeploymentManager.java:1216)
    at weblogic.deploy.internal.targetserver.DeploymentManager.handlePrepare(DeploymentManager.java:250)
    at weblogic.deploy.internal.targetserver.DeploymentServiceDispatcher.prepare(DeploymentServiceDispatcher.java:159)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.doPrepareCallback(DeploymentReceiverCallbackDeliverer.java:171)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer.access$000(DeploymentReceiverCallbackDeliverer.java:13)
    at weblogic.deploy.service.internal.targetserver.DeploymentReceiverCallbackDeliverer$1.run(DeploymentReceiverCallbackDeliverer.java:46)
    at weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:528)
    at weblogic.work.ExecuteThread.execute(ExecuteThread.java:209)
    at weblogic.work.ExecuteThread.run(ExecuteThread.java:178)
Caused by: weblogic.descriptor.DescriptorException: VALIDATION PROBLEMS WERE FOUND
  problem: cvc-complex-type.2.4c: Expected element 'module@http://java.sun.com/xml/ns/javaee' before the end of the content in element application@http://java.sun.com/xml/ns/javaee:<null>

    at weblogic.descriptor.internal.MarshallerFactory$1.evaluateResults(MarshallerFactory.java:245)
    at weblogic.descriptor.internal.MarshallerFactory$1.evaluateResults(MarshallerFactory.java:231)
    at weblogic.descriptor.internal.MarshallerFactory$1.createDescriptor(MarshallerFactory.java:155)
    at weblogic.descriptor.BasicDescriptorManager.createDescriptor(BasicDescriptorManager.java:323)
    at weblogic.application.descriptor.AbstractDescriptorLoader2.getDescriptorBeanFromReader(AbstractDescriptorLoader2.java:788)
    at weblogic.application.descriptor.AbstractDescriptorLoader2.createDescriptorBean(AbstractDescriptorLoader2.java:409)
    at weblogic.application.descriptor.AbstractDescriptorLoader2.loadDescriptorBeanWithoutPlan(AbstractDescriptorLoader2.java:759)
    at weblogic.application.descriptor.AbstractDescriptorLoader2.loadDescriptorBean(AbstractDescriptorLoader2.java:768)
    at weblogic.application.ApplicationDescriptor.getApplicationDescriptor(ApplicationDescriptor.java:296)
    at weblogic.application.internal.EarDeploymentFactory.findOrCreateComponentMBeans(EarDeploymentFactory.java:178) 
```

我发布这个是希望以前被这个问题困扰过的人可以简单地回答这个问题 - 当我将堆栈发布到 Google 时，这个问题在 Oracle 和 DevX 论坛上非常重要，并且没有得到回答。

**注意：**公司限制坚持使用问题顶部引用的软件的特定版本——我完全知道这个版本的 WebLogic 不兼容 Java EE 6。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-03T14:48:42.943

谢谢各位大佬指路。看来我的 application.xml 文件是一个红鲱鱼 - 虽然我有一个，但我的 Maven POM[有一个插件](http://maven.apache.org/plugins/maven-eclipse-plugin/examples/multi-module-projects.html#Multi_Project_Import_Export_Plugin) ，它在构建过程**中生成它自己的插件。**问题在于，对于 Eclipse，部署程序集（右键单击 > 部署程序集）不包含对 WAR 和 JAR 项目依赖项的任何引用。我错误地认为 Eclipse 会简单地检测并使用在文件夹层次结构中找到的 application.xml 文件。正在创建一个空的 application.xml 文件，因此堆栈跟踪正确地抱怨缺少要部署的模块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-06T16:42:03.593

我的问题是**web.xml**文件，出于某种原因，我的 Eclipse 修改了我的项目的“ **faces / dynamic web module ”，并修改了****web.xml**文件的标题。新的 web.xml 文件没有“ `<web-app xmlns:xsi`”完整标题，一旦我修复了这个问题，weblogic 就会停止并出现异常。

# android - 从数据库填充列表时的 NPE

> ID：14125544
> 
> 赞同：0
> 
> 时间：2013-01-02T16:28:04.603
> 
> 标签：android, database, listview, nullpointerexception

类 #1 - 必须从 DB 获取数据并准备 ListAdapter：

```
public class DataListView extends ListActivity {

    public ArrayList<String> results = new ArrayList<String>();
    public String tableName = DBHelper.tableName;
    public SQLiteDatabase newDB;

    public void displayResultList() {
        setListAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_1, results));
        getListView().setTextFilterEnabled(true);
    }

    public void openAndQueryDatabase() {
        try {
            DBHelper dbHelper = new DBHelper(this.getApplicationContext());
            newDB = dbHelper.getWritableDatabase();
            Cursor c = newDB.rawQuery("SELECT FirstName, Age FROM " +
                    tableName, null);

            if (c != null ) {
                if  (c.moveToFirst()) {
                    do {
                        String firstName = c.getString(c.getColumnIndex("FirstName"));
                        int age = c.getInt(c.getColumnIndex("Age"));
                        results.add("Name: " + firstName + ", Age: " + age);
                    }while (c.moveToNext());
                } 
            }           
        } catch (SQLiteException se ) {
            Log.e(getClass().getSimpleName(), "Could not create or Open the database");
        } finally {
            if (newDB != null) 
                newDB.execSQL("DELETE FROM " + tableName);
                newDB.close();
        }

    }
} 
```

类 #2 - 必须显示列表：

```
public class StartActivity extends ListActivity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

         DataListView list = new DataListView();
         list.openAndQueryDatabase();
         list.displayResultList();
    }
} 
```

但它会抛出一个错误：

> 01-02 18:22:25.584: E/AndroidRuntime(30425): 致命异常: main 01-02 18:22:25.584: E/AndroidRuntime(30425): java.lang.RuntimeException: 无法启动活动 ComponentInfo{com. saigmn/com.saigmn.StartActivity}: java.lang.NullPointerException 01-02 18:22:25.584: E/AndroidRuntime(30425): at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956) 01-02 18: 22:25.584: E/AndroidRuntime(30425): 在 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981) 01-02 18:22:25.584: E/AndroidRuntime(30425): 在 android.app.ActivityThread.access $600(ActivityThread.java:123) 01-02 18:22:25.584: E/AndroidRuntime(30425): 在 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147) 01-02 18:22:25.584: E/AndroidRuntime(30425): 在 android.os.Handler.dispatchMessage(Handler.java:99) 01-02 18:22:25.584: E/AndroidRuntime(30425): 在 android.os.Looper.loop(Looper.java:137) 01-02 18:22:25.584: E/AndroidRuntime(30425): 在android.app.ActivityThread.main(ActivityThread.java:4424) 01-02 18:22:25.584: E/AndroidRuntime(30425): 在 java.lang.reflect.Method.invokeNative(Native Method) 01-02 18:22 :25.584: E/AndroidRuntime(30425): at java.lang.reflect.Method.invoke(Method.java:511) 01-02 18:22:25.584: E/AndroidRuntime(30425): at com.android.internal。 os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784) 01-02 18:22:25.584: E/AndroidRuntime(30425): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 01 -02 18:22:25.584: E/AndroidRuntime(30425): at dalvik.system.NativeStart.main(Native Method) 01-02 18:22:25.584: E/AndroidRuntime(30425): Caused by: java.lang.NullPointerException 01-02 18:22:25.584: E/AndroidRuntime(30425): at com.saigmn.DataListView.openAndQueryDatabase(DataListView.java:45) 01-02 18:22:25.584: E/AndroidRuntime(30425): at com .saigmn.StartActivity.onCreate(StartActivity.java:20) 01-02 18:22:25.584: E/AndroidRuntime(30425): 在 android.app.Activity.performCreate(Activity.java:4492) 01-02 18:22 :25.584: E/AndroidRuntime(30425): 在 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049) 01-02 18:22:25.584: E/AndroidRuntime(30425): 在 android.app.ActivityThread.performLaunchActivity( ActivityThread.java:1920)22:25.584: E/AndroidRuntime(30425): 在 android.app.Activity.performCreate(Activity.java:4492) 01-02 18:22:25.584: E/AndroidRuntime(30425): 在 android.app.Instrumentation.callActivityOnCreate (Instrumentation.java:1049) 01-02 18:22:25.584: E/AndroidRuntime(30425): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)22:25.584: E/AndroidRuntime(30425): 在 android.app.Activity.performCreate(Activity.java:4492) 01-02 18:22:25.584: E/AndroidRuntime(30425): 在 android.app.Instrumentation.callActivityOnCreate (Instrumentation.java:1049) 01-02 18:22:25.584: E/AndroidRuntime(30425): 在 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)

经过一些测试，我发现 openAndQueryDatabase() 里面有 smth。

此外，将两个调用的方法都放入 StartActivity 类时 - 它工作正常。

请帮我找出这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:35:57.513

```
if (newDB != null) 
  newDB.execSQL("DELETE FROM " + tableName);
  newDB.close(); 
```

这**可能**是源头。将两个语句都放在 if 块中，以确保`close()`不会对`null` `newDB`实例进行调用。尝试：

```
if (newDB != null) 
{ 
  newDB.execSQL("DELETE FROM " + tableName);
  newDB.close();
} 
```

现在我很确定这是你的 NullPointer 的来源。检查 DataListView.java 中的第 45 行。

# android - 我可以通过微调器转到另一个活动吗？

> ID：14125547
> 
> 赞同：0
> 
> 时间：2013-01-02T16:28:15.727
> 
> 标签：android, android-intent, spinner

我到处寻找类似的解决方案，但一无所获；是否可以使用微调器移动到另一个活动？我试图简单地从 switch case 开始明确的意图，但它不起作用

这是我的代码：

```
//add new movie spinner and callback
    ArrayList<String> addOptions = new ArrayList<String>();
    addOptions.add("Add manually");
    addOptions.add("Add via web");
    ArrayAdapter<String> spinnerAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_dropdown_item,addOptions);
    addMovieSpinner.setAdapter(spinnerAdapter);
    spinnerAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    addMovieSpinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> parent, View view, int position, long i) {

            switch (position) {
            case 0:
                Intent intent = new Intent(Home.this, Edit.class);

                break;
            case 1:
                Intent intent1 = new Intent(Home.this, Edit.class);
                break;

            default:
                break;
            }

        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:38:38.480

仅仅创建一个 Intent 不会移动到另一个 Activity。您需要像这样实际启动**Intent**`startActivity()`：

```
switch (position) {
    case 0:
        Intent intent = new Intent(Home.this, Edit.class);
        startActivity(intent);
        break;
    case 1:
        Intent intent1 = new Intent(Home.this, Edit.class);
        startActivity(intent1);
        break;
    default:
        break;
} 
```

# ruby-on-rails - Ruby on Rails 将模型添加到关联

> ID：14125551
> 
> 赞同：0
> 
> 时间：2013-01-02T16:28:46.337
> 
> 标签：ruby-on-rails, associations

这是我的模型：

```
class Hour < ActiveRecord::Base
  attr_accessible :time, :user
  belongs_to :project
end

class Project < ActiveRecord::Base
  attr_accessible :name
  has_many :hour, :dependent => :destroy
end 
```

我正在尝试做这样的事情：

```
hour = Hour.new
#add values to the hour object here
hour.save!
project = Project.find :first
project.hour.add hour #how do I actually do this?
projet.save! 
```

这会引发错误。如何将模型添加到关联？

我来自 Doctrine2 的 PHP 背景。在 Doctrine2 中，我会执行以下操作：

```
$projects->getHours()->add($hour); 
```

另外，我已经阅读了这些文档： http: [//guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)。它们似乎涵盖了有关如何创建关联的所有内容，但我找不到有关如何使用它们的信息！关于如何使用关联的任何好的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:31:53.787

首先，正确的名字，

```
has_many :hours 
```

然后，

```
project.hours << hour 
```

4.3.1.2 在[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:37:28.217

您可以像数组一样添加它：

```
project.hours << hour 
```

但通常感觉更自然的是直接使用关联构建新模型：

```
hour = project.hours.build({ your: "...",  attributes: "...", here: "..."})
# Do more stuff with hour
project.save! 
```

（该`build`方法的行为类似于`new`，但出于技术原因，必须在`build`此处命名）

或者如果您想立即保存模型：

```
project.hours.create({ your: "...",  attributes: "...", here: "..."}) 
```

Rails 文档列出了关联的“神奇”方法。看看[`has_many`协会参考](http://guides.rubyonrails.org/association_basics.html#has_many-association-reference)。

# multicast - 如何正确设置我的 UdpClient 以在 C# 中侦听多播地址 239.255.255.250:1900

> ID：14125555
> 
> 赞同：4
> 
> 时间：2013-01-02T16:28:54.767
> 
> 标签：multicast, upnp, notify, udpclient, service-discovery

我正在建立一个带有 3 台笔记本电脑的小型本地网络。我的目标是试验 UpNP 协议并让笔记本电脑使用 UpNP 发现彼此。为了做到这一点，他们需要能够监听彼此的通知。根据协议，这些通知在多播地址 239.255.255.250:1900 上发送。但是，我在设置笔记本电脑以收听该地址时遇到问题。我开始只使用 1 台电脑。我的电脑的 IP 地址是 10.0.0.5。

但是，当我尝试设置 UdpClient 以侦听 239.255.255.250:1900 时，我收到一条错误消息：“请求的地址在其上下文中无效”。

我试过用这个来设置它：

```
IPEndPoint endpoint = new IPEndPoint(IPAddress.Parse("239.255.255.250"), 1900);
UdpClient client = new UdpClient(endpoint);
client.BeginReceive(MessageReceived, null); 
```

我也试过：

```
UdpClient client = new UdpClient(Port);
client.JoinMulticastGroup(IPAddress.Parse("239.255.255.250"));
client.BeginReceive(MessageReceived, null); 
```

但我仍然收到同样的错误：“请求的地址在其上下文中无效”。

如何正确设置我的 UdpClient 以侦听多播地址 239.255.255.250:1900 ？

谢谢你的帮助！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:11:44.043

好的，经过多次搜索并将我的头撞到我的桌子上，我已经让这个东西工作了。我以为我昨天可以使用它，但它仅适用于 Windows 7 而不是 XP ..

所以，这里是：

```
IPEndPoint localEndPoint = new IPEndPoint(IPAddress.Any, Port);

UdpClient client = new UdpClient();
client.Client.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
client.Client.Bind(localEndPoint);
client.JoinMulticastGroup(IPAddress);
client.MulticastLoopback = true;

Client.BeginReceive(MessageReceived, null); 
```

我当然希望这被记录得更好一点，但我想这就是我们得到大笔资金的原因。

感谢 StackOverflow 提供了一个很棒的知识库，可以从中提取这些东西！

# java - Hibernate Envers - 获取已更改的字段

> ID：14125558
> 
> 赞同：19
> 
> 时间：2013-01-02T16:29:03.790
> 
> 标签：java, hibernate, audit, hibernate-envers

我有一个相当复杂的数据库结构，我正在尝试审计。目前我正在运行[Envers](http://docs.jboss.org/hibernate/core/4.1/devguide/en-US/html/ch15.html)，它会审核对每个对象所做的更改。这真的很好用！

我现在想在 UI 上显示一些审计信息。对象/表变得相当复杂，所以我一直在寻找一种方法来查看审计中哪些字段发生了变化。当前`Envers`存储带有修订 ID 标记的每个对象的快照。我可以查看每个对象的修订版，然后手动查询以查看发生了什么变化，但我想知道是否有一种方法可以`Envers`存储哪些字段已更改。这可能吗？我从 2011 年找到[了这个](https://community.jboss.org/thread/167221)链接，它建议手动检查每个对象字段。我关心的是速度。我有很多相关的对象，我可能只有一个更新的字段。我将不得不查询很多字段才能找到已更改的字段。

是否可以存储已更改的字段？

谢谢

**编辑**

我应该说我正在使用 REVCHANGES 表，所以我可以看到在哪些修订版本中发生了哪些变化，但这只是在实体级别而不是字段级别

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-07T10:37:14.523

在较新的 Envers 版本中，您可以使用布尔标志跟踪每个版本中更改的属性。看：

[http://docs.jboss.org/hibernate/core/4.1/devguide/en-US/html/ch15.html#envers-tracking-properties-changes](http://docs.jboss.org/hibernate/core/4.1/devguide/en-US/html/ch15.html#envers-tracking-properties-changes)

# android - 使用 ZXING 在 QRCode 中编码

> ID：14125559
> 
> 赞同：1
> 
> 时间：2013-01-02T16:29:15.330
> 
> 标签：android, android-intent

我正在尝试使用 ZXING 库在 QR 码中对字符串进行编码。这是与此相对应的代码行：

```
Button btn;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    btn = (Button)findViewById(R.id.button1);
    btn.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent intent = new Intent("com.google.zxing.client.android.ENCODE");
            intent.addCategory(Intent.CATEGORY_DEFAULT);
            intent.putExtra("ENCODE_TYPE", "TEXT_TYPE");
            intent.putExtra("ENCODE_DATA","HELLO WORLD");
            startActivityForResult(intent, 0);

        }
    });
} 
```

单击按钮后，我有一个“强制关闭”

在查看了一些网站之后，我们说它只适用于这些行。不幸的是，它不适合我。

请您提供一些建议以使其正常工作。或者，如果您有其他方式将 QRCode 生成器集成到我的 ANDROID 应用程序中，它也会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-13T01:02:50.807

恩佐，这是让它工作的另一种方法，试试这个：

```
private void encode(String uniqueID) {
        // TODO Auto-generated method stub
         BarcodeFormat barcodeFormat = BarcodeFormat.QR_CODE;

            int width0 = 500;
            int height0 = 500;

            int colorBack = 0xFF000000;
            int colorFront = 0xFFFFFFFF;

            QRCodeWriter writer = new QRCodeWriter();
            try
            {
                EnumMap<EncodeHintType, Object> hint = new EnumMap<EncodeHintType, Object>(EncodeHintType.class);
                hint.put(EncodeHintType.CHARACTER_SET, "UTF-8");
                BitMatrix bitMatrix = writer.encode(uniqueID, barcodeFormat, width0, height0, hint);
                int width = bitMatrix.getWidth();
                int height = bitMatrix.getHeight();
                int[] pixels = new int[width * height];
                for (int y = 0; y < height; y++)
                {
                    int offset = y * width;
                    for (int x = 0; x < width; x++)
                    {

                        pixels[offset + x] = bitMatrix.get(x, y) ? colorBack : colorFront;
                    }
                }

                Bitmap bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
                bitmap.setPixels(pixels, 0, width, 0, 0, width, height);
                ImageView imageview = (ImageView)findViewById(R.id.qrCode);
                imageview.setImageBitmap(bitmap);
            } catch (WriterException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:42:22.693

这一行：

```
Intent intent = new Intent("com.google.zxing.client.android.ENCODE"); 
```

标识您使用 Intent 调用的**Activity 。**为了让它工作，Activity 必须存在于设备上。如果您还没有在项目中实现 Activity（也就是说，`ENCODE`您的`com.google.zxing.client.android`包中没有类），那么您将从您的项目中调用外部应用程序。如果设备/模拟器上没有响应广播的应用程序，`com.google.zxing.client.android.ENCODE`那么您将**无法**使用此解决方案。

您要么需要安装一个可以响应的应用程序，`com.google.zxing.client.android.ENCODE`要么找到另一种方法来完成它。

可以使用应用程序中的*zxing 库***自己生成条形码**。[在](http://code.google.com/p/zxing/downloads/list)Google Code 上查看该项目以获取一些下载。这将消除您对现有外部应用程序的依赖，提供更彻底的解决方案。

 ** * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-12-26T05:41:09.947

除了 Zxing 库，您还可以使用以下意图从 QRCode 获取字符串：

```
try {
                Intent intent = new Intent("com.google.zxing.client.android.SCAN");
                intent.putExtra("SCAN_MODE", "QR_CODE_MODE"); // "PRODUCT_MODE for bar codes
                startActivityForResult(intent, 0);
            } catch (Exception e) {    
                Uri marketUri = Uri.parse("market://details?id=com.google.zxing.client.android");
                Intent marketIntent = new Intent(Intent.ACTION_VIEW,marketUri);
                startActivity(marketIntent);
            } 
```

活动结果如下：

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);
        if (requestCode == 0) {
            if (resultCode == RESULT_OK) {
                String contents = data.getStringExtra("SCAN_RESULT");
                Log.v("MESSAGE: ", contents);
                Intent in = new Intent(MainActivity2.this,MainActivity3.class);
                Bundle b3= new Bundle();
                b3.putString("content",contents);
                in.putExtras(b3);   
                startActivity(in);    

            }
        }
    } 
```

它可能对你有帮助。

谢谢你。*

# ios - UILabel 视图在高度大于 8192 时消失

> ID：14125563
> 
> 赞同：8
> 
> 时间：2013-01-02T16:29:22.223
> 
> 标签：ios, uilabel

将大字符串分配给 UILabel。并且，将此标签添加到滚动视图中。
当 UILabel 高度大于 8192pt（即 2^13）时，UILabel 消失。

这是iOS错误吗？

我应该使用其他实现来呈现这么多的字符串吗？
我应该在单元格中使用表格视图吗？

**更新**

将显示 UILabel 的代码：

```
UILabel *label = [[UILabel alloc] init];
label.backgroundColor = [UIColor clearColor];
label.text = rumor.displayText;
label.frame = CGRectMake(0, 0, self.view.frame.size.width, 8192);
label.lineBreakMode = UILineBreakModeWordWrap;
label.numberOfLines = 0; 
```

而 UILabel 的代码确实消失了

```
UILabel *label = [[UILabel alloc] init];
label.backgroundColor = [UIColor clearColor];
label.text = rumor.displayText;
label.frame = CGRectMake(0, 0, self.view.frame.size.width, 8193);
label.lineBreakMode = UILineBreakModeWordWrap;
label.numberOfLines = 0; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T16:44:19.187

首先 - 它不一定是一个错误。这只是未定义的行为。请注意，对于每个组件，当组件停止正常工作时，都会有一些大小上限。8192 点似乎是一个下限，但仍然是 iPad 纵向模式屏幕的 8 倍左右。

你不应该让观点那么大。请注意，`UIView`s 通常会渲染到内存中并进行缓冲，以加快重绘速度。对于 8192 高度，缓冲区必须非常大。

将文本分成几个`UILabel`s（例如按段落）肯定是一种改进。

见[https://stackoverflow.com/a/1494496/669586](https://stackoverflow.com/a/1494496/669586)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T19:46:08.373

**我在 UITextViews 上遇到了同样的问题，并提出了一个相当有效的解决方案。**

如果你想看它，请在此处查看我的答案！：

[https://stackoverflow.com/a/37147533/2155673](https://stackoverflow.com/a/37147533/2155673)

它应该很容易适应 UILabel。

# c# - 尝试使用 Mono.Cecil 注入 Elmah 错误日志记录

> ID：14125564
> 
> 赞同：2
> 
> 时间：2013-01-02T16:29:24.230
> 
> 标签：c#, elmah, mono.cecil

我正在使用第三方程序集，不幸的是它吞下了它的异常，所以我决定使用 Mono.Cecil 重写程序集（幸运的是它不是强类型）（在对 DI 和 AOP 进行一些研究后发现了这个宝石）。我试图找到尽可能多的信息，但我仍然对 IL 的组成有一些疑问。

我已经阅读[了 this](https://stackoverflow.com/questions/11074518/add-a-try-catch-with-mono-cecil)和[this](https://stackoverflow.com/questions/12769699/mono-cecil-injecting-try-finally)，所以我知道我需要做什么，但就像我说的那样，我不确定如何生成正确的 IL 来进行调用。

我已经使用 Cecil 从我正在执行简单的 try/catch 的方法中提取指令 -> 登录 Elmah -> 让异常继续，这是我需要注入的。
这是我试图复制的捕获：

```
catch (Exception ex)
{
   Elmah.ErrorLog.GetDefault(System.Web.HttpContext.Current)
                           .Log(new Elmah.Error(ex));

   throw;
} 
```

这些是我使用 Cecil 获得的 catch 块指令：

```
IL_010d: stloc.s V_7 
IL_010f: nop 
IL_0110: call System.Web.HttpContext System.Web.HttpContext::get_Current() 
IL_0115: call Elmah.ErrorLog Elmah.ErrorLog::GetDefault(System.Web.HttpContext) 
IL_011a: ldloc.s V_7 
IL_011c: newobj System.Void Elmah.Error::.ctor(System.Exception) 
IL_0121: callvirt System.String Elmah.ErrorLog::Log(Elmah.Error) 
IL_0126: pop 
IL_0127: rethrow 
IL_0129: nop 
```

我正在尝试使用 Cecil 复制这个块，这就是我已经走了多远：

```
var currentHttpContextInstruction = ilProcessor.Create(OpCodes.Call, module.Import(typeof(System.Web.HttpContext).GetProperty("Current").GetGetMethod()));
var elmahGetDefaultInstruction = ilProcessor.Create(OpCodes.Call, module.Import(typeof(Elmah.ErrorLog).GetMethod("GetDefault")));
var instantiateElmahErrorInstruction = ilProcessor.Create(OpCodes.Newobj, module.Import(typeof(Elmah.Error).GetConstructor(new[] { typeof(System.Exception) })));
var elmahErrorLogInstruction = ilProcessor.Create(OpCodes.Callvirt, module.Import(typeof(Elmah.ErrorLog).GetMethod("Log")));
var rethrowInstruction = ilProcessor.Create(OpCodes.Rethrow); 
```

我不太确定的是如何正确复制剩余的指令......
我是否只是创建一个`new VariableDefinition`，将其添加到`method.Body.Variables`然后对该变量执行`stloc`and操作？和命令呢`ldloc`？我需要担心[这个问题中提出的问题](https://stackoverflow.com/questions/7267480/does-mono-cecil-take-care-of-branches-etc-location)吗？`nop``pop`

任何有关如何以正确方式执行此操作的指导将不胜感激！

请注意，我已经查看了命令的[含义](http://en.wikipedia.org/wiki/List_of_CIL_instructions)，所以我的问题不在于它们的含义。

# r - 将 ggplot 图迁移到版本时出错。0.9.3

> ID：14125566
> 
> 赞同：1
> 
> 时间：2013-01-02T16:29:53.300
> 
> 标签：r, migration, ggplot2

尝试将 ggplot 图迁移到 0.9.3 版，下面代码中注释掉的行会产生`Discrete value supplied to continuous scale`错误（以前不是问题）。你能帮我改正吗？

如果您需要数据进行实验，我在下面提供。

```
ggplot(mdfr, aes(as.Date(value, "%d/%m/%Y"), name, colour = factor(stadio))) +
  geom_line(aes(size=rating)) +
  labs(colour="Baseline/Actual :", x = "", y = "") +
  scale_colour_brewer(palette="BrBG",breaks = c("1", "3", "6","8"),
                      labels = c("Label 1", "Label 2", "Label 3","Label 4")) +
  scale_size_manual(breaks = levels(mdfr$rating),  values = as.integer(levels(mdfr$rating)), guide = "none") +
  theme_bw() +
  #geom_vline(data=dfrDataDate, aes(xintercept= as.Date(data.date, "%Y-%m-%d")),colour=rgb(215, 25, 28, max = 255),size=1) +
  geom_text(data=dfrDataDate, aes(x= as.Date(data.date, "%Y-%m-%d"), label = format(as.Date(data.date),"%d/%m/%Y")), hjust = -0.05, vjust = 1.5, colour = "darkred", size = 3 ) +
  geom_text(data=dfrLabels, aes(x= as.Date(diag_date, "%d/%m/%Y"), label = format(as.Date(diag_date, "%d/%m/%Y"),"%d/%m/%Y")), hjust = 0.5, vjust = -1, colour = "black", size = 3 ) +
  geom_text(data=dfrYpogr, aes(x= as.Date(ypogr_date, "%d/%m/%Y"), label = format(as.Date(ypogr_date, "%d/%m/%Y"),"%d/%m/%Y")), hjust = 0.5, vjust = -1, colour = "black", size = 3 ) +
  scale_y_discrete(breaks=names, labels=new.names) +
  ggtitle('New plot title') +
  theme(plot.title = element_text(size=16),
       legend.position = "top",
       legend.title = element_text(size=12),
       legend.text = element_text(size=10),
       legend.key = element_rect(colour='white'),
       axis.text.x = element_text(angle=0,size = 10),
       axis.title.x = element_text(size=14),
       axis.text.y = element_text(size=10),
       axis.title.y = element_text(angle=90,size=14),
       axis.ticks.length = unit(.05, "cm")
  ) 
```

生成图表所需的数据：

```
mdfr <- structure(list(name = structure(c(22L, 22L, 22L, 22L, 20L, 20L,
20L, 20L, 18L, 18L, 18L, 18L, 16L, 16L, 16L, 16L, 14L, 14L, 14L,
14L, 12L, 12L, 12L, 12L, 10L, 10L, 10L, 10L, 8L, 8L, 8L, 8L,
6L, 6L, 6L, 6L, 4L, 4L, 4L, 4L, 2L, 2L, 2L, 2L, 21L, 21L, 21L,
21L, 19L, 19L, 19L, 19L, 17L, 17L, 17L, 17L, 15L, 15L, 15L, 15L,
13L, 13L, 13L, 13L, 11L, 11L, 11L, 11L, 9L, 9L, 9L, 9L, 7L, 7L,
7L, 7L, 5L, 5L, 5L, 5L, 3L, 3L, 3L, 3L, 1L, 1L, 1L, 1L, 22L,
22L, 22L, 22L, 20L, 20L, 20L, 20L, 18L, 18L, 18L, 18L, 16L, 16L,
16L, 16L, 14L, 14L, 14L, 14L, 12L, 12L, 12L, 12L, 10L, 10L, 10L,
10L, 8L, 8L, 8L, 8L, 6L, 6L, 6L, 6L, 4L, 4L, 4L, 4L, 2L, 2L,
2L, 2L, 21L, 21L, 21L, 21L, 19L, 19L, 19L, 19L, 17L, 17L, 17L,
17L, 15L, 15L, 15L, 15L, 13L, 13L, 13L, 13L, 11L, 11L, 11L, 11L,
9L, 9L, 9L, 9L, 7L, 7L, 7L, 7L, 5L, 5L, 5L, 5L, 3L, 3L, 3L, 3L,
1L, 1L, 1L, 1L), .Label = c("733 A", "733 B", "725 A", "725 B",
"727 A", "727 B", "558 A", "558 B", "705 A", "705 B", "635 A",
"635 B", "737 A", "737 B", "719 A", "719 B", "700 A", "700 B",
"579 A", "579 B", "541 A", "541 B"), class = "factor"), stadio = c(2,
4, 5, 7, 2, 4, 5, 7, 2, 4, 5, 7, 2, 4, 5, 7, 2, 4, 5, 7, 2, 4,
5, 7, 2, 4, 5, 7, 2, 4, 5, 7, 2, 4, 5, 7, 2, 4, 5, 7, 2, 4, 5,
7, 1, 3, 6, 8, 1, 3, 6, 8, 1, 3, 6, 8, 1, 3, 6, 8, 1, 3, 6, 8,
1, 3, 6, 8, 1, 3, 6, 8, 1, 3, 6, 8, 1, 3, 6, 8, 1, 3, 6, 8, 1,
3, 6, 8, 2, 4, 5, 7, 2, 4, 5, 7, 2, 4, 5, 7, 2, 4, 5, 7, 2, 4,
5, 7, 2, 4, 5, 7, 2, 4, 5, 7, 2, 4, 5, 7, 2, 4, 5, 7, 2, 4, 5,
7, 2, 4, 5, 7, 1, 3, 6, 8, 1, 3, 6, 8, 1, 3, 6, 8, 1, 3, 6, 8,
1, 3, 6, 8, 1, 3, 6, 8, 1, 3, 6, 8, 1, 3, 6, 8, 1, 3, 6, 8, 1,
3, 6, 8, 1, 3, 6, 8), variable = structure(c(1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L), .Label = c("start_date",
"end_date"), class = "factor"), value = structure(c(3L, 18L,
20L, 36L, 2L, 14L, 24L, 38L, 7L, 7L, 7L, 31L, 9L, 15L, 27L, 34L,
4L, 19L, 21L, 37L, 1L, 9L, 23L, 33L, 8L, 13L, 25L, 32L, 10L,
16L, 28L, 29L, 5L, 12L, 26L, 35L, 6L, 17L, 22L, 39L, 11L, 17L,
22L, 30L, 3L, 18L, 20L, 36L, 2L, 14L, 24L, 31L, 50L, 50L, 50L,
56L, 15L, 52L, 55L, 32L, 48L, 49L, 55L, 34L, 1L, 53L, 53L, 57L,
49L, 51L, 54L, 58L, 10L, 16L, 28L, 29L, 5L, 12L, 26L, 35L, 6L,
17L, 22L, 39L, 11L, 17L, 22L, 30L, 18L, 20L, 36L, 45L, 14L, 24L,
38L, 46L, 7L, 7L, 31L, 42L, 15L, 27L, 34L, 44L, 19L, 21L, 37L,
44L, 9L, 23L, 33L, 40L, 13L, 25L, 32L, 44L, 16L, 28L, 29L, 41L,
12L, 26L, 35L, 43L, 17L, 22L, 39L, 47L, 17L, 22L, 30L, 47L, 18L,
20L, 36L, 59L, 14L, 24L, 31L, 64L, 50L, 50L, 56L, 66L, 52L, 55L,
32L, 61L, 49L, 55L, 34L, 63L, 53L, 53L, 57L, 65L, 51L, 54L, 58L,
60L, 16L, 28L, 29L, 63L, 12L, 26L, 35L, 62L, 17L, 22L, 39L, 67L,
17L, 22L, 30L, 61L), .Label = c("03/05/2012", "07/06/2011", "22/02/2011",
"22/06/2012", "23/12/2011", "28/12/2011", "29/02/2012", "29/03/2012",
"29/06/2012", "30/05/2011", "30/12/2011", "03/02/2012", "04/07/2012",
"08/02/2012", "10/07/2012", "17/10/2011", "23/02/2012", "24/05/2011",
"25/07/2012", "01/06/2011", "01/08/2012", "02/03/2012", "05/07/2012",
"09/02/2012", "12/07/2012", "16/02/2012", "19/07/2012", "27/01/2012",
"06/04/2012", "07/06/2012", "08/05/2012", "09/10/2012", "11/09/2012",
"16/10/2012", "18/05/2012", "20/09/2011", "23/10/2012", "24/04/2012",
"31/05/2012", "04/02/2013", "09/09/2012", "12/11/2012", "19/11/2012",
"28/02/2013", "28/09/2012", "29/10/2012", "30/11/2012", "01/07/2012",
"06/07/2012", "22/03/2012", "02/08/2012", "17/07/2012", "31/07/2012",
"06/09/2012", "26/07/2012", "12/06/2012", "13/11/2012", "20/11/2012",
"17/01/2013", "21/05/2013", "21/12/2012", "22/07/2012", "28/12/2012",
"30/03/2013", "30/04/2013", "31/01/2013", "31/12/2012"), class = "factor"),
    rating = structure(c(2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L, 2L,
    2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L,
    1L, 1L), .Label = c("3", "5"), class = "factor")), row.names = c(NA,
-176L), .Names = c("name", "stadio", "variable", "value", "rating"
), class = "data.frame")

dfrDataDate <- structure(list(name = structure(1L, .Label = "733 A", class = "factor"),
    data.date = structure(1L, .Label = "2013-01-02", class = "factor")), .Names = c("name",
"data.date"), row.names = c(NA, -1L), class = "data.frame")

dfrLabels <- structure(list(name = c("541 A", "579 A", "700 A", "719 A", "737 A",
"635 A", "705 A", "558 A", "727 A", "725 A", "733 A"), diag_date = c("20/09/2011",
"08/05/2012", "12/06/2012", "09/10/2012", "16/10/2012", "13/11/2012",
"20/11/2012", "06/04/2012", "18/05/2012", "31/05/2012", "07/06/2012"
)), .Names = c("name", "diag_date"), row.names = c(135L, 139L,
143L, 147L, 151L, 155L, 159L, 163L, 167L, 171L, 175L), class = "data.frame")

dfrYpogr <- structure(list(name = c("541 A", "579 A", "700 A", "719 A", "737 A",
"635 A", "705 A", "558 A", "727 A", "725 A", "733 A"), ypogr_date = c("17/01/2013",
"30/03/2013", "31/01/2013", "21/12/2012", "28/12/2012", "30/04/2013",
"21/05/2013", "28/12/2012", "22/07/2012", "31/12/2012", "21/12/2012"
)), .Names = c("name", "ypogr_date"), row.names = c(136L, 140L,
144L, 148L, 152L, 156L, 160L, 164L, 168L, 172L, 176L), class = "data.frame")

names <- as.character(unique(mdfr$name))

new.names <- c("No.541", "No.579", "No.700", "No.719", "No.737", "No.635",
"No.705", "No.558", "No.727", "No.725", "No.733", "", "",
"", "", "", "", "", "", "", "", "") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:48:31.647

在调用中添加`as.numeric()`周围使红线出现。`as.Date()``geom_vline()`

```
geom_vline(data=dfrDataDate, aes(xintercept= as.numeric(as.Date(data.date, "%Y-%m-%d"))),colour=rgb(215, 25, 28, max = 255),size=1) 
```

# c# - 如何将 Excel 工作表从一个工作簿复制到另一个工作簿

> ID：14125567
> 
> 赞同：2
> 
> 时间：2013-01-02T16:30:05.550
> 
> 标签：c#, visual-studio-2010

我一直在网上搜索这个问题的答案。有几十个“解决方案”，但似乎没有任何工作正常。我正在构建的应用程序（使用 C#）从 mdb querydef 中提取数据并创建一个带有两个工作表的 Excel 工作簿。那部分工作得很好。现在对于应该简单的部分：我有一个包含多个工作表的工作簿（每个工作表将计算不同的数据）我需要代码来打开“模板”工作簿，复制正确的工作表，并将副本放在新创建的工作簿与其他两个工作表。这是我认为“应该”工作的代码示例：

```
 _Application xlApp;
        Workbook xlTemplateWB;
        Workbook xlTempWB;
        object missing = System.Reflection.Missing.Value;

        xlApp = new ApplicationClass();
        xlApp.Visible = true;

        //Open Bench Sheet Template
        xlTemplateWB = xlApp.Workbooks.Open(Elmnt.getDBPath() + TEMPLATENAME, 0, true, 5, "", "",
            false, XlPlatform.xlWindows, "", true, false, 0, true, false, false);

        //Open temporary workbook
        xlTempWB = xlApp.Workbooks.Open(XLTempDir + XLTempName, 0, false, 5, true, "", true, 
            XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);

        //Copy "BOD" Worksheet
        xlTempWB.Worksheets.Copy(xlTemplateWB.Worksheets["BOD"]);
        xlTempWB.Save();

        //Close Workbooks
        xlTempWB.Close(true, missing, missing);
        xlTemplateWB.Close(true, missing, missing);
        xlApp.Quit();

        //Release Objects
        releaseObject(xlTempWB);
        releaseObject(xlTemplateWB);
        releaseObject(xlApp); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:55:56.360

根据我对 MSDN 文档的阅读，Worksheet.Copy() 仅适用于工作簿。您的 C# 语法看起来是正确的。

有几种方法可以解决这个问题：

1.  复制整个模板工作簿（使用`WorkBook.SaveCopyAs()`）并删除不需要的内容。
2.  选择要移动的范围并使用剪贴板 ( `Range.Select; Range.Copy; Range.Paste;`) 进行复制。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T20:06:39.327

谢谢您的帮助。在尝试了更多的事情之后，我发现我唯一可以开始工作的就是复制整个工作簿并删除不适用的工作表。我觉得这很麻烦，所以如果有人找到更好的方法，我会全力以赴。这是我最终使用的代码：

```
 _Application xlApp;
        Workbook xlTemplateWB;
        Workbook xlTempWB;
        object missing = System.Reflection.Missing.Value;

        xlApp = new ApplicationClass();
        xlApp.Visible = true;

        //Open Bench Sheet Template
        xlTemplateWB = xlApp.Workbooks.Open(Elmnt.getDBPath() + TEMPLATENAME, 0, true, 5, "", "",
            false, XlPlatform.xlWindows, "", true, false, 0, true, false, false);

        //Save As a temporary workbook
        xlTemplateWB.SaveAs(XLTempDir + XLTempName);
        xlTemplateWB.Close(true, missing, missing);
        releaseObject(xlTemplateWB);

        //Open temporary workbook
        xlTempWB = xlApp.Workbooks.Open(XLTempDir + XLTempName, 0, false, 5, true, "", true,
            XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);

        //Remove non-applicable worksheets
        for (int i = xlTempWB.Sheets.Count; i > 0; i--)
        {
            if (((Worksheet)xlTempWB.Sheets[i]).Name != bchSheet)
            {
                xlApp.DisplayAlerts = false;
                ((Worksheet)xlTempWB.Sheets[i]).Delete();
                xlApp.DisplayAlerts = true;
            }
        }
        xlTempWB.Save();

        //Close Workbooks
        xlTempWB.Close(true, missing, missing);
        xlApp.Quit();

        //Release Objects
        releaseObject(xlTempWB);
        releaseObject(xlApp); 
```

# google-analytics - 如何从谷歌分析中删除网站

> ID：14125568
> 
> 赞同：115
> 
> 时间：2013-01-02T16:30:07.757
> 
> 标签：google-analytics

我是谷歌分析几个网站的管理员。

我可以删除其中一些吗？

如果是，如何？

你们中的许多人建议我删除我的个人资料。所以我的疑问是：
1.我是几个项目的管理员。我想删除其中的一些。
2\. 如果我删除我的个人资料，我会丢失所有物品吗？

![在此处输入图像描述](../Images/a30349837f7ecf2e37ba0011cc9c793c.png)

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2013-09-11T16:53:46.337

这是截至 2013 年 9 月的更新答案。我花了一段时间才弄清楚。

1.  转到管理选项卡。

    > ![在此处输入图像描述](../Images/8eed904b8e766b02db3cbc524ff81807.png)

2.  在中间列中，从下拉列表中选择要删除的网络媒体资源。

    > ![在此处输入图像描述](../Images/593e9a36ed3e1cdc454d825caedde01e.png)

3.  在右侧栏中，单击“查看设置”。（“属性设置”，2015 年 12 月）

    > ![在此处输入图像描述](../Images/4663d9294a545dc45b0b1daf4901b0a0.png)

4.  在下一页的底部，选择“删除此视图”。

    > ![在此处输入图像描述](../Images/6228b62e364c4533cbdd042d827cd77f.png)

它会警告您即将删除与此属性关联的所有数据。如果你确定，请确认。

完毕！

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2013-01-02T16:35:33.310

**更新的答案**

谷歌分析管理面板有**3 个面板**，其中删除可以在以下任何一个上完成：

1.  **帐户**（包含多个属性和视图）
2.  **属性**（包含视图，帐户的子集）
3.  **视图**（属性的子集）

![谷歌分析管理面板](../Images/2979f71b38a7779e4c860b1799251e3b.png)

* * *

## 删除账户

删除帐户将**删除与该帐户相关的所有数据**，以及它包含的**所有属性/配置文件**。这（通常）与删除整个网站数据一样好。

要删除帐户，请按照以下步骤操作：（请参阅下图）

*   选择您要删除的帐户。

![选择您要删除的帐户](../Images/fc7fe38154ae07ac782b5713370447a8.png)

*   点击账户设置

![点击账户设置](../Images/bf15496c6db18f0157afd453d3556993.png)

*   右下角有一个小链接，上面写着删除此帐户。

![删除帐户](../Images/c64c9b18097f9cd6bd06917aeaed04ce.png)

*   您将得到确认，如果您确定，请单击`Delete Account`
*   它将为您提供详细信息，并确认删除（并提供其他信息，例如删除您网站上的 GA 片段等）

注意：如果您的登录名关联了多个帐户，则不会触及其他帐户，*只会删除该帐户*。

* * *

## 删除属性

删除一个属性将删除选定的属性，以及它拥有的所有视图。要删除属性，请单独删除它包含的所有视图（有关删除视图，请参见下文）

*   选择物业

![物业选择](../Images/3f8f3b2be820f9cb1d1340e3b5075178.png)

*   与该属性相关的所有配置文件都显示在右侧
*   单独删除与该属性相关的所有视图（下一节中的详细信息）。

* * *

## 删除视图（配置文件）

删除配置文件将仅删除*与该视图有关的*数据，如果有单个配置文件，则自动删除该属性。

*   选择您要删除的个人资料

![选择个人资料](../Images/eb19469f1c4cbdec6f3d67aa72f9eb05.png)

*   单击查看设置

![设置](../Images/bd965f4b0bdd9017fa9ac65c9ed6f959.png)

*   点击删除视图（右下）

![删除视图](../Images/7ef2bfa27bd9f8f7041458bc66591c0a.png)

*   单击确认，该视图将被删除。如果属性中只有一个视图，则该属性将自动删除。

* * *

## 我想保留数据，但在列表中看不到它们

有时您有很多网站，您想保留这些数据，但将它们从列表中删除，因为您不经常查看它们。我想到了一种解决方法，以防您不想删除数据。

使用另一个帐户。

1.  假设您的主要帐户是**A**，而您创建了另一个帐户**B**。
2.  让**B成为****A**的管理员
***   删除**A****

 **由于**A**是您的主要帐户，您将无法再从列表中访问它！
而且您仍然保存了数据，只是您必须通过另一个（备用）帐户登录。

* * *

上一个答案：

以下是从[Google 支持页面](http://support.google.com/analytics/bin/answer.py?hl=en&answer=1009621)删除个人资料的步骤：

> 删除配置文件
> 
> 还要记住，当您删除配置文件时，您也会删除与该配置文件关联的所有数据，并且无法检索已删除的数据。
> 
> 要删除配置文件：
> 
> 1.  单击任何分析页面右上角的管理选项卡。
> 2.  单击包含要删除的配置文件的帐户。
> 3.  单击要从中删除配置文件的网络媒体资源。
> 4.  使用配置文件菜单选择配置文件。
> 5.  单击配置文件设置选项卡。
> 6.  单击页面底部的删除此配置文件。
> 7.  单击确认消息中的删除。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-07-22T23:01:37.670

## 更新答案（2015 年 7 月 22 日）

删除帐户/属性/视图的解决方案仍然与@Pranav 웃 的答案非常相似。谷歌刚刚移动了一些东西，所以我想我会更新。

## 步骤1

单击页面顶部的管理选项卡

[![步骤1](../Images/6ff227ff84c097fee98e5e55734d39c7.png)](https://i.stack.imgur.com/TbLGg.png)

## 第2步

进入管理页面后，您需要决定是否要删除帐户、属性或视图。确保从下拉菜单中选择所需的帐户、属性或视图。

在下面的图片中，我将向您展示如何删除该帐户，这将删除该特定帐户下的所有信息，包括属性和视图。

单击帐户设置以删除帐户，单击属性设置以删除属性，单击视图设置以删除视图。

[![第2步](../Images/edf4235b6cc02db074fe8ef7692956a2.png)](https://i.stack.imgur.com/Xgtrd.png)

## 步骤#3

在帐户设置上，您会注意到一个按钮“移至垃圾箱”。您将单击此按钮以删除帐户、属性或视图。您必须在下一页/图片上验证将帐户移至垃圾桶。

[![步骤#3](../Images/b507de55e7182943973fb1859782861b.png)](https://i.stack.imgur.com/sYjKl.png)

## 第4步

当您确认这是您要删除的帐户后，请继续并选择“垃圾帐户”。

注意：当您删除帐户时，它会将所有信息移动到管理员/帐户/垃圾箱，可以在 1 个月内恢复。请记住，每个帐户都有自己的垃圾箱。一旦该时间过去，帐户、财产或视图将被永久删除！

[![第4步](../Images/bf0c4fc027f234b1925d35181763b094.png)](https://i.stack.imgur.com/Mz3t5.png)

希望这对将来的某人有所帮助，因为即使现在它很简单，我也只是在努力弄清楚它。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-02T21:57:47.510

> 要删除网络资源，您只需删除该资源中的每个配置文件。删除最后一个配置文件后，该网络媒体资源将不再存在于 GA 帐户中。这里的所有都是它的！--[来源](http://fitandfinish.ironworks.com/2012/08/google-analytics-tip-how-to-delete-profiles-and-web-properties.html)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-10-11T08:39:36.173

在很多 Fannying 之后，删除这个等等，我找到了从你的列表中删除一个“网站”的方法（实际上，原来的问题是什么 - 减去所有的 faffing）是

*   选择您要删除的帐户（网站）
*   在第一列（左侧）
*   点击账户设置
*   在底部，它显示删除此帐户。

就是这样……完成了。

请记住：在本练习中，只有帐户是指网站。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-15T06:41:13.790

您也可以这样做：选择您的个人资料然后转到管理员 => 在管理员第二列“属性”中选择您要删除的站点 => 转到第三列“查看设置”clic => 在右下角你会请参阅删除视图 => 确认并完成，祝大家有美好的一天

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-03-26T17:51:29.470

2016 年 3 月 26 日更新：

而不是设置表单右下角的链接，删除按钮被移动到右上角，说：

```
Move To Trash Can 
```

当您单击它时，它会要求您确认并将其移动到`Trash Can`。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-02-07T10:29:57.947

2016 年 2 月版：管理选项卡，然后选择中间栏中的属性，单击属性设置，然后单击右上角的移动到垃圾箱按钮。无需删除单个视图。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-09-01T03:43:10.870

OP 想要做的是删除他的 Google 分析中的其他属性。不属于他但属于他人的财产。

显然，这样做的唯一方法是联系该网站的所有者，即管理员，并要求他们删除您。

或者您可以创建一个新的 Google 帐户，然后将您的资产添加到新帐户中。

这些都不是真正好的解决方案。感谢 Google 如此关心 SEO 人员。

雪上加霜的是，如果您超过 25 个帐户，则必须联系 Google 以获得添加另一个帐户的权限。

经验教训：不要将其他人的网站添加到您的 Google 分析帐户中。创建一个单独的帐户，这样如果您必须重新开始，您就不会丢失您网站上的任何数据。拥有多个 Google 分析帐户也很好。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-27T18:16:36.293

截至 2018 年

```
Login to your analytics account
Select the account/property you want to delete
Click the  button. (left side bottom menu)
Click on property settings
To the right you will see Move To Trash Can Click on that
You will see the bellow screen. click on Delete Property button 
```

或者如果您想删除帐户

遵循相同的步骤，但这次单击“帐户设置”选项卡，如下所示

现在单击移动到垃圾箱（右侧的按钮）

当您看到下一个屏幕时，通过单击“垃圾帐户”按钮确认删除该帐户。

[如何从谷歌分析中删除网站](https://scloudes.com/learning/how-to-delete-a-website-from-google-analytics/ "点击这里查看更多详情")**

# python - 我要导入什么：Python 中的文件名或类？

> ID：14125570
> 
> 赞同：3
> 
> 时间：2013-01-02T16:30:08.610
> 
> 标签：python, class

我有一个名为**schedule.py**的文件：

```
class SchedGen:
    """ Class creates a pseudo random Schedule. 
    With 3/4 of total credit point required for graduation"""
    def __init__(self, nof_courses=40):
        random.seed()
        self.courses = {}
        self.nof_courses = nof_courses

        for i in xrange(nof_courses):
            self.courses[i] = college.Course(i)

        self.set_rand_cred()
        self.set_rand_chance()
        self.set_rand_preq_courses()

    def set_rand_cred(self):
        """ Set random credit to courses uniformly between 2 and 6"""
        temp_dict = self.courses.copy() 
```

在导入日程内容时，我是否`import schedule`喜欢：

```
import schedule 
```

如果这是正确的，我如何从 SchedGen 类访问函数 set_rand_cred(self) ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:33:49.993

你可以做

```
import schedule
schedgen = schedule.SchedGen()
schedgen.set_rand_red() 
```

或者

```
from schedule import SchedGen
schedgen = SchedGen()
schedgen.set_rand_red() 
```

此链接提供了一些 Python[导入语句](http://effbot.org/zone/import-confusion.htm)如何工作的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:34:55.340

该`set_rand_cred()`函数是类的实例函数，所以需要先创建一个类实例。要创建类实例，您需要能够访问类的名称。你可以通过两种方式做到这一点。

以下是使用每种方式解决问题的方法：

导入模块：

```
import schedule

s = schedule.SchedGen()
s.set_rand_cred() 
```

从模块中导入类并将类放入本地命名空间：

```
from schedule import SchedGen

s = SchedGen()
s.set_rand_cred() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:33:05.443

您必须首先创建一个实例（使用类的限定名称），然后将该函数作为实例的属性访问：

```
import schedule
s = schedule.SchedGen()
s.set_rand_cred() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T16:33:58.033

像那样：

```
import schedule

schedule_generator = schedule.SchedGen()
schedule_generator.set_rand_cred() 
```

有关更多信息，请阅读 Python 文档：[http ://docs.python.org/2/tutorial/classes.html](http://docs.python.org/2/tutorial/classes.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T16:35:40.423

这正是您导入另一个模块的方式，无论是第三方模块还是您创建的模块。现在，关于 python 的一大优点是您可以使用它的多种方式。一种是导入模块，从中检索类，或自行导入类。

```
import schedule
foo = schedule.SchedGen()
returned_var = foo.set_rand_cred() 
```

如果您自己导入该类，则几乎完全相同：

```
from schedule import SchedGen
foo = SchedGen()
returned_var = foo.set_rand_cred() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-02T16:35:51.650

你可以这样做：

```
import schedule
schedule.SchedGen.set_rand_cred() 
```

但这样做更常见：

```
from schedule import SchedGen
SchedGen.set_rand_cred() 
```

# vb.net - VB.NET“修复”代码克隆

> ID：14125571
> 
> 赞同：3
> 
> 时间：2013-01-02T16:30:09.580
> 
> 标签：vb.net, optimization, refactoring, clone

我正在重构一个相当大的项目，我有兴趣寻找和减少代码克隆，以实现更好的标准化和易于开发。

我有一个代码片段不断出现在“精确匹配”中（使用 Visual Studio 2012 的“查找代码克隆”功能）。

这里是：

```
 End If
            End Using
        Catch ex As Exception
            MsgBox(ex.Message)
        End Try
    End Using
End Using
Return Nothing 
```

基本上，我有一大堆类似的功能（结构类似，但实际功能不同），它们都以这样的方式打开：

```
Const sql As String = ...
Using cn As SqlConnection...
    Using cmd As SqlCommand(sql,cn)
        ... Maybe add some SqlParameters
        cn.Open()
        ... Something with cmd.Execute... 
```

现在，我认识到第一个代码块***在***很多很多方法中都是相同的，但是我想不出一种方法来提取该代码，编写一次并在每次需要该功能时简单地调用它。在我看来，发生了太多的控制流。

所以，我不知道如何解决这个问题（我只是假设我可以“解决”这个问题，因为微软已将其标识为“克隆代码”）。

我正在考虑制作少量函数来做相同**类型**的事情（比如从表中返回一个计数，返回一个最高值等......），并且只有 SQL 真正不同被执行。不过，这可能有点棘手，因为有时参数（类型和数量）会有所不同。

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:50:28.533

我不会关心那些。你的常识性第一印象是正确的。虽然从技术上讲，语法被重复多次，但它并不是真正的逻辑或任何类型的算法的重复。这并不是说没有办法减少这种重复，只是这样做，您最终可能会在代码中得到更糟糕的设计。

例如，您可以创建一个方法来完成所有设置和拆卸，然后在中间调用一个实际使用连接来完成工作的方法，例如：

```
Public Function PerformDbTask(task As IMyDbTask)
    Using cn As SqlConnection...
        Using cmd As SqlCommand = cn.CreateCommand()
            Try
                cn.Open()
                task.Perform(cmd)
            Catch ex As Exception
                MsgBox(ex.Message)
            End Try
        End Using
    End Using
    Return Nothing
End Function 
```

然而，你真正得到了什么？可能一点也不多，但你已经失去了很多灵活性。因此，除非这种设计对于您正在尝试做的事情实际上是必要的，否则我不会浪费时间尝试解决不存在的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:44:40.080

您可以创建一个实现构建器模式的类，最终看起来像

```
Dim list =
    SqlBuilder.Query("SELECT ...")
              .WithConnection("...connection string...")
              .WithParameter(userName)
              .WithParameter(lastTrackId)
              .RetrieveTopRows(10) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T18:00:58.467

您的问题是您正在使用与标记序列匹配的克隆检测器（因此它与您展示的块结束序列匹配），而不是与代码结构匹配的克隆检测器。虽然令牌序列*在*技术上是一个克隆，但它并不是一个有趣的克隆。令牌克隆检测器会产生许多这样的“误报”克隆，这只会浪费您的时间。

构建令牌序列检测器更容易，这就是他们将其内置到 MS Studio 中的原因。如果您想要更好的探测器，您必须走出 Studio。

您应该研究与抽象语法树匹配的克隆检测器。它们不会产生这种误报，并且可以找到具有复杂参数（与单令牌参数相反）的克隆。

您还应该了解，仅仅因为某些东西已被识别为克隆，并不总是容易或不可能将其重构掉。您拥有的语言可能没有足够强大的抽象机制来处理这种情况。

# apache-flex - 动态生成的 DataGrid 中的复选框 - 如何检索所选值

> ID：14125573
> 
> 赞同：0
> 
> 时间：2013-01-02T16:30:14.927
> 
> 标签：apache-flex, actionscript, datagrid, checkbox

我想在我的 dataGrid 中有一个带有复选框的列。我用列创建网格的代码如下所示：

```
var dataGrid:DataGrid=new DataGrid();
var preparedColumns:Array=[];
preparedColumns.push(new DataGridColumn("DepCode"));
var checkboxColumn:DataGridColumn=new DataGridColumn("AddSegment");
checkboxColumn.itemRenderer=new ClassFactory(CheckBox);
checkboxColumn.editable=true;
preparedColumns.push(checkboxColumn);

for (var i:int=0; i < event.result.request.out.segments.segment.length; i++)
{
    var segment:Object=event.result.request.out.segments.segment[i];
    var addSegmentCheckbox:CheckBox=new CheckBox();
    preparedValues.addItem({DepCode: segment.departureCode, AddSegment: addSegmentCheckbox});
    addSegmentCheckbox.id = ""+i;
    addSegmentCheckbox.addEventListener(Event.CHANGE, changeCheckboxState);
    checkboxValues[i] = false;
}
dataGrid.columns=preparedColumns;
dataGrid.dataProvider=preparedValues; 
```

这行得通，至少它呈现了我想要的东西，但我不知道如何读取用户是否在给定行中选择了复选框。我已经看到，复选框通常会添加功能 onChange，但是当我使用工厂时，我不知道该怎么做（我发现的大多数示例都没有在代码中创建 itemRenderer，而是使用标签）。

我试图读取这样的数据，但是无论我是否选中了复选框， checkbox.selected 都是错误的。

```
public function OKButtonClick(event:MouseEvent):void
{
    for (var i:int=0; i < preparedValues.length; i++)
    {
        var row:Object=preparedValues[i];
        var checkbox:CheckBox=row.AddSegment;
        if (checkbox.selected == true)
        {           
        }
    }
} 
```

我尝试按照循环中的建议为复选框添加一个侦听器，但是当复选框状态更改时，侦听器方法不会执行（我在调试器中检查了它）。我更新了上面的第一个代码部分并添加了以下方法：

公共函数 changeCheckboxState(event:Event):void {
var i:int = event.currentTarget.id; if (checkboxValues[i] == true) { checkboxValues[i] == false;
} else { checkboxValues[i] == true;
} }

表 checkboxValues 永远不会改变（我一开始就将其全部设置为 false），并且永远不会执行上述方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:37:14.953

你应该听`Event.CHANGE`而不是鼠标点击本身（这样你就知道你在框架更新后得到了事件`selected`）。

从那里，您应该能够获取复选框的所有者（作为`ItemRenderer`），并检索该单元格的数据。

# ruby-on-rails - rmagick 和 imagemagick 捆绑包/自制程序错误

> ID：14125581
> 
> 赞同：6
> 
> 时间：2013-01-02T16:30:51.940
> 
> 标签：ruby-on-rails, imagemagick, bundler, homebrew, rmagick

请参阅下面的错误堆栈。我尝试通过自制软件“gem pristine rmagick”卸载/安装 imagemagick，然后重新安装 rmagick。所有都返回了相同的错误。任何帮助将非常感激 - 现在已经有一段时间了。

```
$ gem install rmagick
Building native extensions.  This could take a while...
ERROR:  Error installing rmagick:
    ERROR: Failed to build gem native extension.

        /Users/LU/.rvm/rubies/ruby-1.9.3-p362/bin/ruby extconf.rb
checking for Ruby version >= 1.8.5... yes
extconf.rb:128: Use RbConfig instead of obsolete and deprecated Config.
checking for /usr/local/bin/gcc-4.2... yes
checking for Magick-config... yes
checking for ImageMagick version >= 6.4.9... yes
checking for HDRI disabled version of ImageMagick... yes
checking for stdint.h... yes
checking for sys/types.h... yes
checking for wand/MagickWand.h... yes
checking for InitializeMagick() in -lMagickCore... no
checking for InitializeMagick() in -lMagick... no
checking for InitializeMagick() in -lMagick++... no
Can't install RMagick 2.13.1\. Can't find the ImageMagick library or one of the dependent libraries. Check the mkmf.log file for more detailed information.

*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/Users/Lungs/.rvm/rubies/ruby-1.9.3-p362/bin/ruby
    --with-MagickCorelib
    --without-MagickCorelib
    --with-Magicklib
    --without-Magicklib
    --with-Magick++lib
    --without-Magick++lib

Gem files will remain installed in /Users/Lungs/.rvm/gems/ruby-1.9.3-p362/gems/rmagick-2.13.1 for inspection.
Results logged to /Users/LU/.rvm/gems/ruby-1.9.3-p362/gems/rmagick-2.13.1/ext/RMagick/gem_make.out 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-04T01:57:15.817

遇到同样的问题，轻松解决！

[https://github.com/mxcl/homebrew/issues/16625](https://github.com/mxcl/homebrew/issues/16625)

这是解决方案的简陋之处（rmagick 已损坏，您必须创建符号链接才能使其正常工作）：

```
cd /usr/local/Cellar/imagemagick/6.8.0-10/lib

ln -s libMagick++-Q8.7.dylib   libMagick++.dylib

ln -s libMagickCore-Q8.7.dylib libMagickCore.dylib

ln -s libMagickWand-Q8.7.dylib libMagickWand.dylib 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T01:03:11.037

或者，退一步 ImageMagick rev：

（通过[https://stackoverflow.com/a/9832084/485836](https://stackoverflow.com/a/9832084/485836)）

```
> cd /usr/local

> brew versions imagemagick

6.7.7-6  git checkout 883f549 Library/Formula/imagemagick.rb
6.7.5-7  git checkout f965101 Library/Formula/imagemagick.rb
6.7.1-1  git checkout be8e0ff Library/Formula/imagemagick.rb
...

> git checkout 883f549 Library/Formula/imagemagick.rb

> brew install imagemagick 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-05T20:13:49.150

A better way to get the headers into the proper place might be to just add the pkgconfig from the imagemagick Cellar to your PKG_CONFIG_PATH.

Adding the following to my ~/.bash_profile and then sourcing it (`source ~/.bash_profile`) worked for me

```
export PKG_CONFIG_PATH="/usr/local/Cellar/imagemagick/6.8.0-10/lib/pkgconfig:$PKG_CONFIG_PATH" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-23T00:17:01.390

最终成为 rails 版本的问题，需要更新和重新安装 imagemagick/rmagick。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-01-02T17:04:12.777

```
brew install imagemagick 
```

应该做的伎俩。然后重新安装 gem。

# c# - 单击一次后重复的 LinkBut ton 动作

> ID：14125584
> 
> 赞同：0
> 
> 时间：2013-01-02T16:31:11.537
> 
> 标签：c#, asp.net, linkbutton, web-application-project, asplinkbutton

我`asp:LinkButton`在我的页面上使用并单击我下载文件。但问题是在我单击下载链接按钮后，如果我单击页面上的任何其他按钮，它会重复下载操作。任何人都可以阐明为什么会发生这种情况。

这是我的链接按钮代码

```
 protected void lnkBtn_Click(object sender, EventArgs e)
  {
        //Download code
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:37:57.743

如果您的页面中某处有 UpdatePanel，则可能会发生这种情况。UpdatePanel 修改并记住视图状态，因为等待此单击的重播。

您所做的是不返回 UpdatePanels 等待的内容，因为您按照您所说的下载文件。因此，在下一次单击时，UpdatePanel 重新发送单击，因为一开始没有得到重播。

要解决这个问题，最好不要使用回传文件下载文件，而是使用处理程序和链接 - 这是一个示例：[从服务器下载文件的最佳方法是什么](https://stackoverflow.com/questions/10912164/what-is-the-best-way-to-download-file-from-server/10912955#10912955)

# python - 安排回溯python

> ID：14125585
> 
> 赞同：0
> 
> 时间：2013-01-02T16:31:21.837
> 
> 标签：python, backtracking, n-queens

我很难弄清楚如何通过在 python 上回溯来生成安排，这是他们在大学问我们的问题

> 一组从 1 到 n 编号的 n (n<=10) 人被放在一排椅子上，但每两个相邻的人之间出现了一些利益冲突。显示替换人员的所有可能方式，以便在冲突中的任何两个人之间保持一个或最多两个其他人。

我设法修改了排列和皇后的代码，但我真的不知道在哪里放置条件，例如 k 是数字，k 必须与字符串 +1 中的前一个数字不同，并且必须不同于下一个数字+1

坐在椅子上的人的名单是 1 2 3 4（少于 3 人是不可能的）一个正确的解决方案是 1 3 4 2 和 3 1 4 2

这是代码：

```
class Permutations(Backtracking):

    def __init__(self, n):
        Backtracking.__init__(self, n)

    def _init_value(self, k):
        return 0

    def _next_value(self, n, k, v):
        if v < n:
            return v + 1
        return None

    def _cond(self, k, possible, v):
        if v is None:
            return False
        try:
            possible[:k].index(v) 
            return False
        except ValueError:
            return True

    def _solution(self, n, k, possible):
        return k == n-1

    def _handle_solution(self, n, k, possible):
        print(possible) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:47:46.680

```
def chairs(soln, i=0):
    if i == len(soln):
        yield tuple(soln)
    for j in xrange(i, len(soln)):
        if i == 0 or soln[j] not in (soln[i - 1] + 1, soln[i - 1] - 1):
            soln[i], soln[j] = soln[j], soln[i]
            for s in chairs(soln, i + 1):
                yield s
            soln[i], soln[j] = soln[j], soln[i]

print list(chairs(range(1, 5))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:03:41.403

代码：

```
def possible_solution(remaining, sol=None):
    sol = sol or []
    if not remaining:
        yield sol
    else:
        for i, candidate in enumerate(remaining):
            if not sol or abs(sol[-1] - candidate) != 1:
                new_sol = sol + [candidate]
                new_remaining = remaining[:i] + remaining[i+1:]
                for x in possible_solution(new_remaining, new_sol):
                    yield x 
```

测试代码：

```
def possible_solutions(neighbors):
    for solution in possible_solution(neighbors):
        print solution

print '-' * 30
possible_solutions([1, 2, 3])

print '-' * 30
possible_solutions([1, 2, 3, 4])

print '-' * 30
possible_solutions([1, 2, 3, 4, 5]) 
```

结果：

```
------------------------------
------------------------------
[2, 4, 1, 3]
[3, 1, 4, 2]
------------------------------
[1, 3, 5, 2, 4]
[1, 4, 2, 5, 3]
[2, 4, 1, 3, 5]
[2, 4, 1, 5, 3]
[2, 5, 3, 1, 4]
[3, 1, 4, 2, 5]
[3, 1, 5, 2, 4]
[3, 5, 1, 4, 2]
[3, 5, 2, 4, 1]
[4, 1, 3, 5, 2]
[4, 2, 5, 1, 3]
[4, 2, 5, 3, 1]
[5, 2, 4, 1, 3]
[5, 3, 1, 4, 2] 
```

# git - Git - 我所有的新功能都从项目中消失了

> ID：14125586
> 
> 赞同：0
> 
> 时间：2013-01-02T16:31:38.047
> 
> 标签：git, heroku, github, commit

我想将我制作的新功能推送到新的新分支中。完成后，我创建了新分支，添加了新文件 ( `git add .`)，提交 ( `commit -am 'new data'`) 并将其推送到 Heroku ( `git push heroku master`, `git push heroku new_branch:master`)。

我不确定我是否没有运行`git init`命令。现在，当我打开项目时，所有的“旧”数据都没有涉及到我制作的新功能。

有没有办法恢复它们？

非常感谢，我在这些功能上工作了几天，所以希望我没有失去它们......

**编辑：**

的输出`git branch -a`：

```
 master
* new_design
  remotes/heroku/HEAD -> heroku/master
  remotes/heroku/master
  remotes/heroku/new_design 
```

**EDIT2：** 的输出`git checkout master`：

```
Checking out files: 100% (10688/10688), done.
M   config/database.yml
Switched to branch 'master'
Your branch is behind 'heroku/master' by 1 commit, and can be fast-forwarded. 
```

**EDIT3：** 这是来自日志的批评者提交：

```
commit 60574e2a80917721e2cf0806e5d1eedc3c2adc06
Author: me
Date:   Wed Jan 2 15:33:51 2013 +0100

    new design

commit 58e846e372464eb32d29535abf1edce88ca0e5a9
Merge: b5f503b 8f2e5da
Author: me
Date:   Wed Jan 2 15:05:46 2013 +0100

    WIP on master: b5f503b Design updated to get the rest of the site

commit 8f2e5da65df5b22419baa45fb6a7b81fcbc7a20b
Author: me
Date:   Wed Jan 2 15:05:46 2013 +0100

    index on master: b5f503b Design updated to get the rest of the si 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T20:06:12.290

您是否尝试查看您推送到服务器的内容？

尝试将 repo 克隆到另一个位置，看看你得到了什么。

另外，这是一个*“愚蠢的http服务器”*吗？

如果是这样，请记住在每次推送后在服务器端调用`git update-server-info`。

# mysql - 在mysql中加入3个表时返回零或null

> ID：14125588
> 
> 赞同：0
> 
> 时间：2013-01-02T16:31:42.800
> 
> 标签：mysql, multiple-tables

我正在尝试在 Mysql 查询中加入 3 个表（表 1、表 2 和表 3），我想从 2 个表（表 1 和表 2）中提取匹配数据，比较 3 个表中存在的公共列（即“PID”）。

加入这 3 个表时，table1 中没有给定 Date('2012-12-27') 的数据，然后它返回完整的空白行。在这里，我想从 table2 中获取与给定日期匹配的匹配数据和'ZERO' 或 'NULL' 在另一个表中没有匹配的数据，即。table1 .. 而不是整个空白行。

这是我尝试返回完整空白行的代码..

```
SELECT * FROM table3 b
LEFT JOIN table1 r ON r.PID = b.PID
LEFT JOIN table2 a ON ab.PID = b.PID
WHERE b.Name ='stallion' AND r.Date = '2012-12-27' AND a.Date = '2012-12-27'
; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:34:59.533

使用两个不同的 JOIN 语句，然后将它们联合起来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:36:39.253

`table1`( `r`)中没有数据的行有`r.Data`= NULL，因此会被您的 WHERE 条件过滤掉。您需要添加`OR r.Date IS NULL`到 WHERE 条件或将条件移动到 ON 子句：

```
SELECT * FROM table3 b
LEFT JOIN table1 r ON r.PID = b.PID AND r.Date = '2012-12-27'
LEFT JOIN table2 a ON a.PID = b.PID AND a.Date = '2012-12-27'
WHERE b.Name ='stallion'; 
```

# html - 背景分开/彼此重叠

> ID：14125589
> 
> 赞同：1
> 
> 时间：2013-01-02T16:31:49.530
> 
> 标签：html, css

我正在尝试制作一个包含几个不同部分的登录页面，例如[chartbeat.com](http://chartbeat.com)。我在我的 HTML 中完成了以下操作：

```
 <section class="payroll">
      <p>
        This is the Payroll Section
      </p>
    </section><!-- END class="payroll" -->  

    <section class="pos">
      <p>
        This is the Point of Sale Section
      </p>
    </section><!-- END class="pos" --> 
```

这就是我的 CSS 的样子：

```
 .payroll {
    background-image: url('../img/payroll_bg.jpg');
    background-repeat: repeat-x;
    height: 100%;
}

.pos {
    background-image: url('../img/pos_bg.jpg');
    background-repeat: repeat-x;
    height: 100%;
} 
```

问题是这些部分是分开的，在它们之间留下了很大的间隙。见图片。如果我缩小窗口或检查元素，这些部分会向上浮动以相互重叠。

有任何想法吗？谢谢！

![在此处输入图像描述](../Images/af8262bdbab8e40dd89e57ba3990a669.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:55:49.190

我认为问题是由你 100% 的身高引起的。您需要在父元素上设置高度，因为任何百分比尺寸都基于它的大小。

像您所做的那样远离百分比也可以解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:39:22.317

创建一个 .wrapper div 并使用它：

```
.wrapper {
width:100%; /* you can define as you want */
height:100%; /* you can define as you want */
position:relative;
}
.payroll {
background-image: url('../img/payroll_bg.jpg');
background-repeat: repeat-x;
height: 100%;
position:absolute;
top:0;
left:0;
width:0 auto;
}
.pos {
background-image: url('../img/pos_bg.jpg');
background-repeat: repeat-x;
height: 100%;
position:absolute;
top:0;
left:0;
opacity:0.9;
width:0 auto;
} 
```

# c# - 用于文件下载的自定义浏览器首选项

> ID：14125596
> 
> 赞同：2
> 
> 时间：2013-01-02T16:32:13.283
> 
> 标签：c#, selenium, webdriver, preferences

在使用 Selenium WebDriver 作为网络自动化框架时，我有一个问题 - 如何配置 Google Chrome 和 Internet Explorer 以将下载的文件保存到特定（非默认）文件夹，并且不显示额外的“保存文件”窗口。

Webdriver 有一个 FirefoxProfile 用于 Mozilla Firefox 浏览器，但其他浏览器呢？

火狐浏览器示例：

```
 FirefoxProfile profile = new FirefoxProfile();

        profile.SetPreference("browser.helperApps.alwaysAsk.force", false);

        profile.SetPreference("browser.download.folderList", 2);

        profile.SetPreference("browser.download.dir", "\\Somedir\");

        profile.SetPreference("services.sync.prefs.sync.browser.download.manager.showWhenStarting", false);

        profile.SetPreference("browser.download.useDownloadDir", true);

        profile.SetPreference("browser.helperApps.neverAsk.saveToDisk", "application/zip, application/x-gzip"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T11:25:54.237

使用 Chrome 可以做到，只是不像 Firefox 配置文件操作那样简单直接。

由于 WebDriver 绑定公开了添加“自定义”功能和命令行参数的能力，因此您可以为其提供 Chrome 知道的任何命令行开关：

[http://peter.sh/experiments/chromium-command-line-switches/](http://peter.sh/experiments/chromium-command-line-switches/)

有了这个，我们可以为 Chrome 提供一个要加载的配置文件，就像使用 Firefox 一样。

但是，WebDriver 绑定不公开选项以及 Firefox 配置文件。所以必须手动完成。

首先，找出您的个人资料所在的位置：

在 Chrome 中转到此 URL。

```
chrome://version/ 
```

它会告诉你它当前正在加载什么配置文件（以及它正在使用什么命令开关）。将配置文件路径复制到资源管理器并转到它。

默认情况下，它应该使用`Default`配置文件目录。在资源管理器中升级，因此您坐在`User Data`文件夹中。

下一步，为 Selenium 创建一个新的配置文件以供使用。打开 Chrome，转到设置 > 用户 > 添加新用户。给它一个名字。

创建后，Chrome 将为该用户打开一个新的 Chrome 窗口。下一步是强制 Chrome（仅限此用户）将下载内容保存在某个位置。

这可以通过两种方式完成。在 Chrome UI 中，转到设置，然后更改下载目录并确保未选中旁边的复选框，或者获得更多**创意......**

所有 Chrome 首选项都存储在一个文件中，该文件存储在用户目录中。您应该已经打开了一个资源管理器窗口，`User Data`位于 Chrome 用户文件夹中的文件夹中。您应该希望看到它创建了一个新的配置文件（可能称为`Profile 1`）。进去吧。

现在寻找一个名为**Preferences**（无扩展名）的文件。

用记事本编辑它（它是一个文本文档，带有 JSON）。

查找下载部分，它将如下所示：

```
"download": {
    "directory_upgrade": true,
    "extensions_to_open": ""
}, 
```

添加此密钥，输入您要将文件保存到的路径：

```
"default_directory": "PATH", 
```

确保使用另一个反斜杠转义路径中的所有斜杠，就像使用 Visual Studio 调试器时一样。

例如，`C:\Bob\Jim\Downloads`应输入为`C:\\Bob\\Jim\\Downloads`。

保存此文件。

现在你有一个配置文件，下载到某个地方。如何让 Chrome 使用此配置文件？您告诉它在启动时打开哪个配置文件。命令行将是：

```
--profile-directory="Profile 1" 
```

（替换为文件夹`Profile 1`中调用的任何内容`User Data`，如果没有调用它）。

好的，我们可以告诉 Chrome 加载特定的配置文件，但是我们如何告诉 Selenium 也这样做呢？简单的！将其添加为“附加命令行开关”。

```
var chromeOptions = new ChromeOptions();
chromeOptions.AddArgument(@"--profile-directory=""Profile 1"""); 
```

Selenium 将确保将命令行开关传递给 Chrome。

（注意：如果有人知道更简单的解决方案，请告诉我！）。

至于 IE，我已经在 IE8 和 IE9 上测试过了，它运行正常。IE 可以考虑默认下载位置所在的注册表项。我无法评论 IE7 或更低版本。

**使用regedit**导航到（这是**每个 Windows 用户**设置）：

**HKEY_CURRENT_USER\Software\Microsoft\Internet Explorer**

添加一个名为`Download Directory`. 它的**值**将是您希望下载的确切位置。无需逃避路径 BTW。

只需确保您在 Windows 下登录的用户已设置此值，就无需进行更多设置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-18T06:36:31.240

请尝试下面的 chrome 代码。即使我正在为 IE 寻找类似的选项。

```
System.setProperty("webdriver.chrome.driver", "/path/to/chromedriver");
String downloadFilepath = "/path/to/download";
HashMap<String, Object> chromePrefs = new HashMap<String, Object>();
chromePrefs.put("profile.default_content_settings.popups", 0);
chromePrefs.put("download.default_directory", downloadFilepath);
ChromeOptions options = new ChromeOptions();
HashMap<String, Object> chromeOptionsMap = new HashMap<String, Object>();
options.setExperimentalOptions("prefs", chromePrefs);
options.addArguments("--test-type");
DesiredCapabilities cap = DesiredCapabilities.chrome();
cap.setCapability(ChromeOptions.CAPABILITY, chromeOptionsMap);
cap.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true);
cap.setCapability(ChromeOptions.CAPABILITY, options);
WebDriver driver = new ChromeDriver(cap); 
```

# flash - 从 flex 3.6 迁移到 4 时出现错误 #2006

> ID：14125598
> 
> 赞同：2
> 
> 时间：2013-01-02T16:32:22.157
> 
> 标签：flash, apache-flex

我需要将 Flex 3.6 应用程序迁移到 Flex 4。我已将 Flex 3.6 项目导入 Flash Builder 4.7 并根据本教程修复了所有错误：http: [//www.adobe.com/devnet/flex/articles/migrating-flex-应用程序-part1.html](http://www.adobe.com/devnet/flex/articles/migrating-flex-apps-part1.html)

现在，当我尝试运行应用程序时，它会因以下错误而失败：

```
RangeError: Error #2006: The supplied index is out of bounds.
    at flash.display::DisplayObjectContainer/getChildAt()
    at mx.core::Container/getChildAt()[C:\Program Files\Adobe\Adobe Flash Builder 4.7 (64 Bit)\sdks\4.6.0\frameworks\projects\mx\src\mx\core\Container.as:2751]
    at mx.core::Container/http://www.adobe.com/2006/flex/mx/internal::getLayoutChildAt()[C:\Program Files\Adobe\Adobe Flash Builder 4.7 (64 Bit)\sdks\4.6.0\frameworks\projects\mx\src\mx\core\Container.as:501]
    at mx.containers.utilityClasses::CanvasLayout/measure()[C:\Program Files\Adobe\Adobe Flash Builder 4.7 (64 Bit)\sdks\4.6.0\frameworks\projects\mx\src\mx\containers\utilityClasses\CanvasLayout.as:198]
    at mx.core::LayoutContainer/measure()[C:\Program Files\Adobe\Adobe Flash Builder 4.7 (64 Bit)\sdks\4.6.0\frameworks\projects\mx\src\mx\core\LayoutContainer.as:432]
    at mx.core::Application/measure()[C:\Program Files\Adobe\Adobe Flash Builder 4.7 (64 Bit)\sdks\4.6.0\frameworks\projects\mx\src\mx\core\Application.as:1124]
    at mx.core::UIComponent/http://www.adobe.com/2006/flex/mx/internal::measureSizes()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:8506]
    at mx.core::UIComponent/validateSize()[E:\dev\4.y\frameworks\projects\framework\src\mx\core\UIComponent.as:8430]
    at mx.core::Container/validateSize()[C:\Program Files\Adobe\Adobe Flash Builder 4.7 (64 Bit)\sdks\4.6.0\frameworks\projects\mx\src\mx\core\Container.as:3280]
    at mx.managers::LayoutManager/validateSize()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\LayoutManager.as:665]
    at mx.managers::LayoutManager/doPhasedInstantiation()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\LayoutManager.as:792]
    at mx.managers::LayoutManager/doPhasedInstantiationCallback()[E:\dev\4.y\frameworks\projects\framework\src\mx\managers\LayoutManager.as:1180] 
```

这个错误完全在 Flash 框架堆栈中，所以它给了我关于如何解决它的零信息。什么可能导致此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T09:54:28.063

由于您正在处理 Flex 4，请尝试使用 getElementAt() 而不是 getChildAt()

# c# - 为什么 TableLayoutPanel 将其子控件倒序放置？

> ID：14125602
> 
> 赞同：1
> 
> 时间：2013-01-02T16:32:38.763
> 
> 标签：c#, winforms

并非所有实例都会出现此问题，但此代码块：

```
 this.tableLayoutPanel1.Anchor = ((System.Windows.Forms.AnchorStyles)((((System.Windows.Forms.AnchorStyles.Top | System.Windows.Forms.AnchorStyles.Bottom) 
        | System.Windows.Forms.AnchorStyles.Left) 
        | System.Windows.Forms.AnchorStyles.Right)));
        this.tableLayoutPanel1.ColumnCount = 2;
        this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 60.99398F));
        this.tableLayoutPanel1.ColumnStyles.Add(new System.Windows.Forms.ColumnStyle(System.Windows.Forms.SizeType.Percent, 39.00602F));
        this.tableLayoutPanel1.Controls.Add(this.pbxInspectionDisplay, 0, 0);
        this.tableLayoutPanel1.Controls.Add(this.gbxEggInput, 0, 0);
        this.tableLayoutPanel1.Location = new System.Drawing.Point(10, 57);
        this.tableLayoutPanel1.Name = "tableLayoutPanel1";
        this.tableLayoutPanel1.RowCount = 1;
        this.tableLayoutPanel1.RowStyles.Add(new System.Windows.Forms.RowStyle(System.Windows.Forms.SizeType.Percent, 50F));
        this.tableLayoutPanel1.Size = new System.Drawing.Size(1182, 570);
        this.tableLayoutPanel1.TabIndex = 28; 
```

在表格布局中，pbxInspectionDisplay 意外位于右侧，而 gbxEggInput 位于左侧。如果我用以下代码替换上面的相应部分

```
 this.tableLayoutPanel1.Controls.Add(this.gbxEggInput, 0, 0);
        this.tableLayoutPanel1.Controls.Add(this.pbxInspectionDisplay, 0, 0); 
```

它们按正确的顺序排列（左侧为 pbxInspectionDisplay，右侧为 gbxEggInput）。正如我所说，在其他代码块中，第一个控件位于左侧，第二个位于右侧。所以我试图了解是什么造成了不同。有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:45:07.787

我相信您会想要[指定](http://msdn.microsoft.com/en-us/library/he3sxc2a.aspx)要在其中添加控件的列。像这样的东西：

```
this.tableLayoutPanel1.Controls.Add(this.pbxInspectionDisplay, 0, 0);
this.tableLayoutPanel1.Controls.Add(this.gbxEggInput, 1, 0); 
```

# java - Google Maps Android API v2 ClassNotFound 运行时错误

> ID：14125610
> 
> 赞同：3
> 
> 时间：2013-01-02T16:33:36.107
> 
> 标签：java, android, google-maps, classnotfoundexception, google-maps-android-api-2

编辑：对于那些为此苦苦挣扎的人，请查看[此链接](https://docs.google.com/document/pub?id=19nQzvKP-CVLd7_VrpwnHfl-AE9fjbJySowONZZtNHzw)。仔细遵循它，但它确实有效！关键部分是`keytool`用来针对调试密钥库生成 SHA1 哈希。另外，不要忘记添加一个发布呢！

我一直在尝试设置 Google Maps Android API v2，在设置完所有内容后，我得到了这个运行时异常`ClassNotFound`：

```
01-02 16:29:07.927: E/AndroidRuntime(12508): FATAL EXCEPTION: main
01-02 16:29:07.927: E/AndroidRuntime(12508): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.app/com.example.app.MapActivity}: android.view.InflateException: Binary XML file line #6: Error inflating class fragment
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1659)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1675)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.app.ActivityThread.access$1500(ActivityThread.java:121)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:943)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.os.Looper.loop(Looper.java:130)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.app.ActivityThread.main(ActivityThread.java:3701)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at java.lang.reflect.Method.invokeNative(Native Method)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at java.lang.reflect.Method.invoke(Method.java:507)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at dalvik.system.NativeStart.main(Native Method)
01-02 16:29:07.927: E/AndroidRuntime(12508): Caused by: android.view.InflateException: Binary XML file line #6: Error inflating class fragment
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:581)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:623)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.view.LayoutInflater.inflate(LayoutInflater.java:408)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:227)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.app.Activity.setContentView(Activity.java:1657)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at com.example.app.MapActivity.onCreate(MapActivity.java:11)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1623)
01-02 16:29:07.927: E/AndroidRuntime(12508):    ... 11 more
01-02 16:29:07.927: E/AndroidRuntime(12508): Caused by: java.lang.ClassNotFoundException: android.view.fragment in loader dalvik.system.PathClassLoader[/data/app/com.example.app-1.apk]
01-02 16:29:07.927: E/AndroidRuntime(12508):    at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:240)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at java.lang.ClassLoader.loadClass(ClassLoader.java:551)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at java.lang.ClassLoader.loadClass(ClassLoader.java:511)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.view.LayoutInflater.createView(LayoutInflater.java:471)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.view.LayoutInflater.onCreateView(LayoutInflater.java:549)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
01-02 16:29:07.927: E/AndroidRuntime(12508):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:568)
01-02 16:29:07.927: E/AndroidRuntime(12508):    ... 20 more 
```

有没有人遇到过这个？

XML:

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment"/> 
```

地图活动：

```
import android.os.Bundle;
import android.app.Activity;

public class MapActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_map);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:36:40.427

您的 Activity 需要从支持库扩展[FragmentActivity](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T18:45:56.573

试试这个代码，完美的帮助你。

XML

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <fragment
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        class="com.google.android.gms.maps.SupportMapFragment"/>

</RelativeLayout> 
```

爪哇

```
package com.example.androidmapsv2;

import com.google.android.gms.common.ConnectionResult;
import com.google.android.gms.common.GooglePlayServicesUtil;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

import android.app.AlertDialog;
import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Toast;

public class MainActivity extends FragmentActivity {
 final int RQS_GooglePlayServices = 1;
 private GoogleMap myMap;

 @Override
 protected void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.activity_main);

   FragmentManager myFragmentManager = getSupportFragmentManager();
   SupportMapFragment mySupportMapFragment 
    = (SupportMapFragment)myFragmentManager.findFragmentById(R.id.map);
   myMap = mySupportMapFragment.getMap();
 } 
@Override
 protected void onResume() {
  // TODO Auto-generated method stub
  super.onResume();

  int resultCode = GooglePlayServicesUtil.isGooglePlayServicesAvailable(getApplicationContext());

  if (resultCode == ConnectionResult.SUCCESS){
   Toast.makeText(getApplicationContext(), 
     "isGooglePlayServicesAvailable SUCCESS", 
     Toast.LENGTH_LONG).show();
  }else{
   GooglePlayServicesUtil.getErrorDialog(resultCode, this, RQS_GooglePlayServices);
  }
 }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-13T16:42:33.360

你是在 AVD 上运行的吗？如果是，请尝试使用真实设备

# c# - 在水晶报表的图表中使用记录值而不是计数

> ID：14125616
> 
> 赞同：0
> 
> 时间：2013-01-02T16:34:04.240
> 
> 标签：c#, asp.net, charts, crystal-reports, sql-server-2012

我有一个连接`Datatable`到 SQL Server 2012 中的存储过程的（两个字段：Choice，Votes）的报告。报告显示如下：

```
Choice            Votes
---------------------------
Option1             11
Option2             8
Option3             4
Option4             7
Option5             5
Option6             6
Option7             1
Option8             2 
```

我想做的事情通常很简单，无论投票是什么，我都想把它们总结起来，并用各自的选项来取每个百分比。我真的没有使用报告及其图表的经验，但我能够在报告中添加图表，并且在图表专家中，我把

```
On the Change of:
Datatable1.Choice - A 
```

每次我将投票添加到“显示值”列表时，它只会计算，当我运行图表时，它会以相同的百分比显示每个选项。我尝试查看摘要操作，但`sum`无处可寻。在下拉列表中，我发现的只有`Count`和`Distinct count`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T08:32:14.957

创建这个公式：

```
tonumber({Table_field}) 
```

转到图表专家并使用此公式而不是“显示值”部分中的字段。

# iframe - jQuery - 点击的 iFrame 的显示 URL

> ID：14125617
> 
> 赞同：0
> 
> 时间：2013-01-02T16:34:10.667
> 
> 标签：iframe

我有多个 URL 的 MySQL 数据库。每个 URL 都显示在一个 iframe 中，因此 3 个 URL = 3 个 iframe。我这样显示它们。

```
...
$resu = mysql_fetch_array ($consultation);
echo "<iframe src='".$resu['URL']."' onload='load(this)' id='iframe'></iframe>";
... 
```

使用此脚本，我可以知道单击的 iframe 的 URL（不完全是，除了它在 jsFiddle 中不起作用，但在我的 PC 中是的。（http://jsfiddle.net/7UxHv/））。

```
<script type='text/javascript'>
$(window).load(function(){
    $('iframe#iframe').load(function(){
        alert($('#iframe').attr('src'));
    });
});
</script> 
```

但实际上它显示的是第一个数据库行，而不是单击的那个。

无论如何要显示使用该脚本或其他表单单击的那个？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:41:52.227

试试这个......将'src'更改为'data-src'......并尝试以下......

```
echo "<iframe data-src='".$resu['URL']."' onload='load(this)' id='iframe'></iframe>";

$('#iframe').click(function() {
    alert($('#iframe').data('src'));
}); 
```

也不要使用 onload 尝试使用 onclick() ...

可能工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:44:34.667

编辑：

请注意，您正在生成具有相同 id 的多个元素.. id 应该是唯一的。

这可能就是为什么你只让第一行工作的原因。

* * *

我认为下面的代码应该可以工作：

html:

```
<iframe src='.$resu['URL'].' onload='loadIframe(this)' scrolling='no'></iframe>​ 
```

JS：

```
window.loadIframe = function(frame) {
    alert("Loaded "+$(frame).attr('src'));
} 
```

# php - 对数组的多维关联数组进行排序

> ID：14125629
> 
> 赞同：0
> 
> 时间：2013-01-02T16:35:09.313
> 
> 标签：php, sorting, multidimensional-array, associative-array, asort

就像标题一样，我不知道从哪里开始，使用 asort() 和 sort() 并没有像我想象的那样有帮助。基本上我有一个这样的数组：

```
$array = array(
    'array_c' => array(
        'array_b' => (
            array('object' => 'e some Object'),
            array('object' => 'b some Object'),
        ),
        'array_a' => (
            array('object' => 'awesome Object'),
        ),
    ),
    'array_a' => array(
        'array_e' => (
            array('object' => 'e some Object'),
        ),
        'array_a' => (
            array('object' => 'b awesome Object'),
        );
    );
); 
```

所以我在看[asort](http://uk.php.net/manual/en/function.asort.php)，因为我想保持关联不变，我开始写的功能是：

```
function sort_me(some_array){
    $new_array = asort(some_array);
    return $new_array;
} 
```

然后，此函数接受 $array['array_c'] 以便您返回按字母顺序排序的数组，如下所示：

```
 'array_c' => array(
        'array_a' => (
            array('object' => 'awesome Object'),
        ),
        'array_b' => (
            array('object' => 'b some Object'),
            array('object' => 'e some Object'),
        ),

    ), 
```

有人能告诉我为什么我的功能不起作用吗？我误解了asort的力量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:24:33.063

ksort 是要走的路，但 ksort 不返回新排序的数组：

[http://us.php.net/ksort](http://us.php.net/ksort)

如果数组可以排序，则返回 bool -> true，否则返回 false...

这段代码剪断应该做你需要的：

```
ksort($array);
foreach($array as $key=>$value){
    ksort(value);
    $array[$key]=$value;
}
print_r($array); 
```

# java - 无效的流标头 - Java 中的套接字传输

> ID：14125631
> 
> 赞同：2
> 
> 时间：2013-01-02T16:35:20.183
> 
> 标签：java, sockets, serialization, deserialization

我还有一个问题。

这是我的客户的一部分：

```
Socket socket = new Socket("127.0.0.1", 3000);
            OutputStream out = socket.getOutputStream();

            ByteArrayOutputStream bos = new ByteArrayOutputStream();
            ObjectOutput oo = null;
            try {
              oo = new ObjectOutputStream(bos);   
              oo.writeObject(mp3dataStrings);
              byte[] serializedMP3 = bos.toByteArray();
              out.write(serializedMP3);
                out.flush();
            } finally {
              oo.close();
              bos.close();
            } 
```

这是我的服务器的一部分：

```
ServerSocket clientConnect = new ServerSocket(port);
        System.out.println("SimpleServer running on port" + port);
        Socket clientSock = clientConnect.accept();
        InputStream is = clientSock.getInputStream();

        byte[] buffer = new byte[1024];

        for (int i = 0; i < buffer.length; i++) {
          int b = is.read();
          buffer[i] = (byte) b;
          if (b == -1 | b == 0) break;
        }
        ObjectInputStream stream = new ObjectInputStream(new ByteArrayInputStream(buffer));
        String[][] songs = (String[][]) stream.readObject();
        stream.close(); 
```

当我发送我的对象（字符串 [] []）时，我得到异常无效的流标头：ACED0000。

我找不到这意味着什么以及我必须做什么。

迎接亚历克斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:40:55.067

你让它变得比你需要的复杂得多。

```
Socket socket = new Socket("127.0.0.1", 3000);
try {
  ObjectOutputStream oo = new ObjectOutputStream(socket.getOutputStream());   
  oo.writeObject(mp3dataStrings);
  oo.close();
} finally {
  socket.close();
} 
```

和

```
ServerSocket clientConnect = new ServerSocket(port);
System.out.println("SimpleServer running on port" + port);

Socket clientSock = clientConnect.accept();
try {
  ObjectInputStream stream = new ObjectInputStream(clientSock.getInputStream());
  String[][] songs = (String[][]) stream.readObject();
} finally {
  clientSock.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:53:04.867

我同意 Peter Lawrey 的回答，但是原始代码中的问题源于字节缓冲区填充代码中的退出条件

```
 byte[] buffer = new byte[1024];

    for (int i = 0; i < buffer.length; i++) {
      int b = is.read();
      // THIS ARE PROBLEM LINES
      buffer[i] = (byte) b;
      if (b == -1 | b == 0) break;
    }
    ObjectInputStream stream = 
      new ObjectInputStream(new ByteArrayInputStream(buffer)); 
```

只有在检测到 End-Of-Stream 条件时才应退出此循环。换句话说，您永远不应该考虑`b==0`，因为它是 ObjectInputStream 的有效部分。

其次，在检查中断条件之前不应将字节分配给缓冲区。

第三，如果你初始化 ByteArrayInputStream，你应该只传递包含输入的字节数，而不是整个缓冲区本身。

更正的块应该是这样的：

```
// How do you know if 1024 is enough to get all data?
// For the sake of this example, assume it's enough
byte[] buffer = new byte[1024];

int count = 0;
for (; count < buffer.length; count++) {
  int b = is.read();

  if ( b == -1 )
  {
    // exit only on End-Of-Stream, and do not record
    // this result into the buffer
    break;
  }

  buffer[count] = (byte) b;
}

ObjectInputStream stream = 
  new ObjectInputStream( 
    // Note, that we are now passing the number of 'active' bytes in the buffer
    new ByteArrayInputStream(buffer, 0, count)
  ); 
```

# couchdb - 我们不应该依赖 CouchDB 来生成 uuid 吗？

> ID：14125632
> 
> 赞同：3
> 
> 时间：2013-01-02T16:35:22.340
> 
> 标签：couchdb

我正在阅读“CouchDB：权威指南”，我对这一段感到困惑：

> 出于演示目的，让 CouchDB 分配一个 UUID 就可以了。当您编写第一个程序时，我们建议您分配自己的 UUID。如果您依赖服务器生成 UUID，并且由于第一个 POST 请求被炸毁而最终发出两个 POST 请求，那么您可能会生成两个文档并且永远不会发现第一个文档，因为只会报告第二个文档。生成您自己的 UUID 可确保您永远不会得到重复的文档。

我认为只有在文档创建成功时才保存 uuids（特别是 _id）。也就是说，当我“发布”新文档的插入请求时，_id 会自动生成。如果保存了文档，则保留该字段，否则丢弃。不是这样吗？

您能否解释一下在 CouchDB 中生成 _id 字段的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T09:51:17.783

我认为这句话并不是关于 UUID，而是关于使用 PUT（它是幂等的）而不是 POST。

检查此线程以获取更多信息：[POST 的后果不是幂等（RESTful API）](https://stackoverflow.com/questions/13991904/consequences-of-post-being-not-idempotent-restful-api/14070013)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-03T12:31:10.370

我认为那句话是错误的或过时的，依靠 CouchDB 生成 ID 是可以的。我在工作中经常使用它，并且从未真正遇到任何问题。

# tcl - 我想用tcl同时附加两条线，怎么做？

> ID：14125634
> 
> 赞同：0
> 
> 时间：2013-01-02T16:35:25.187
> 
> 标签：tcl

假设我的文件包含

```
we must greap the ep
the whole ep
endpoint: /usr/home/bin/tcl_
giga/hope (v)
beginpoint" /usr/home/bin/lp50 (^) 
```

我只想在一行中打印端点路径，即 /usr/home/bin/tcl_giga/hope。

任何人都可以帮助我解决同样的问题。实际上我已经写了我的代码： -

```
set fp [open "text" "r+"]
while {![eof $fp]} {
    gets $fp line
    puts $line
    if {[regexp {endpoint:} $line]} {
        set new_line $line
        puts $new_line
    }
} 
```

但这只是打印第一个端点线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:42:00.540

这是一种方法。它允许您在“端点：”行之后更改要打印的行数。

```
set printNMore 0
while {[gets $fp line] >= 0} {
  if {[string first "endpoint:" $line] >= 0} {
    set printNMore 2
  }
  if {$printNMore > 0} {
    puts $line
    incr printNMore -1
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:59:32.103

一次执行该行的最简单方法是这样的：

```
set fp [open "text" "r+"]
while {[gets $fp line] >= 0} {
    if {[string match "endpoint: *" $line]} {
        puts -nonewline [string range $line 10 end]
        # Plus the whole of the next line...
        puts [gets $fp]
    }
} 
```

但是，如果我自己这样做，我会立即吞下整个文件并使用正则表达式：

```
set fp [open "text" "r+"]
set contents [read $fp]
if {[regexp {endpoint: ?([^\n]+)\n([^\n]*)} -> bit1 bit2]} {
    # Print the concatenation of the capture groups
    puts "$bit1$bit2"
} 
```

如果我知道更精确的文件格式，我可以写出更好的模式……</p>

# php - url 中的 Yii urlManager 用户名

> ID：14125638
> 
> 赞同：0
> 
> 时间：2013-01-02T16:35:36.757
> 
> 标签：php, yii

我有 url, `localhost/user/about/id/5`，我希望它转换为 like `localhost/john.doe/about`，是否可以在 Yii 中做到这一点？

`john.doe`指用户名 `about`指操作

我想隐藏控制器名称，在这种情况下`user`

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:54:34.883

是的，您需要使用[此处的文档中的自定义 UrlRule (Using Custom Url Classes)](http://www.yiiframework.com/doc/guide/1.1/en/topics.url#using-custom-url-rule-classes)。然后，您可以在您的类中剥离 URL，尝试查找用户名（如果它不存在）`return false`，然后让其余的 URL 规则处理。

请记住，您放置自定义规则的 URL 规则的顺序越高，它运行的频率就越高（因为 UrlManager 将在第一个匹配规则上退出），因此如果您将其放在顶部，它会对性能产生影响。

**奖励**
这也将帮助您生成 URL，因为您可以将用户名作为参数传递给普通 URL，并让您的类完成复杂的操作。

# linux - 多线程进程的线程ID可以和另一个正在运行的进程的进程ID相同吗？

> ID：14125641
> 
> 赞同：8
> 
> 时间：2013-01-02T16:35:42.607
> 
> 标签：linux, multithreading, process, linux-kernel, pthreads

我正在尝试找到一种在多进程环境中唯一标识线程的方法。我有一个服务器来跟踪连接到它的不同进程，其中一些是多线程的，而另一些不是。为了从多线程连接中识别线程，我使用线程 ID 作为唯一标识符（在任何给定时间最多连接 1 个多线程进程）。我的问题是：这些线程之一的线程 ID 是否可能与系统上运行的另一个进程的进程 ID 相同？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-03T10:52:37.397

TID（由系统调用返回）在系统¹`sys_gettid()`上的所有线程中是唯一的，对于单线程进程，PID 和 TID 是相等的。这意味着 TID 永远不会与来自另一个进程的 PID 冲突。

* * *

^(1\. 需要注意的是，如果使用 PID 命名空间，则 TID 和 PID 仅在同一 PID 命名空间内是唯一的。)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-02T16:44:42.120

根据[pthreads 的手册页，](http://man7.org/linux/man-pages/man7/pthreads.7.html)线程 ID 在创建进程中是唯一的，因此是的，另一个线程或进程可能具有相同的 ID。但是，如果它在进程中是唯一的并且进程 ID 在系统中是唯一的，那么也许您可以将两者的组合用作唯一标识符。

> 进程中的每个线程都有一个唯一的线程标识符（存储在 pthread_t 类型中）。该标识符返回给 pthread_create(3) 的调用者，线程可以使用 pthread_self(3) 获取自己的线程标识符。 **线程 ID 只保证在一个进程中是唯一的。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T17:48:12.483

虽然 pthread ID 可能不是唯一的，但在线程映射到任务的实现中，任务 ID（如 /proc/PID/task 中所示）实际上在系统范围内是唯一的，并且具有类似于实际 PID 的形式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-30T13:23:05.440

好吧，我刚才遇到了同样的问题，这是我的验证程序。

```
#include <pthread.h>
#include <stdio.h>

int main() {
    printf("%lu\n", pthread_self());
} 
```

```
clang -pthread test.c && strace ./a.out 
```

部分输出如下。

```
...
arch_prctl(ARCH_SET_FS, 0x7f53259be740) = 0
...
write(1, "139995089987392\n", 16139995089987392
)       = 16
... 
```

然后我们知道**0x7f53259be740**等于**139995089987392**并且第二个参数`arch_prctl`应该在*进程地址空间*内（man arch_prctl）。也就是说，线程ID实际上是一个虚拟地址。因此，如果您`pthread_self()`在多进程环境中用于识别线程，则可能会发生冲突，尽管可能性很小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-19T18:22:18.687

```
pthread_equal(id1,id2) 
```

它将比较两个线程的 ID，如果它们相同则返回 0，如果它们不同则返回非零数。

# macos - Applescript 停在一行然后不会继续（告诉一个未运行的应用程序隐藏）

> ID：14125642
> 
> 赞同：0
> 
> 时间：2013-01-02T16:35:46.493
> 
> 标签：macos, applescript

所以我在这里有一个非常基本的 Applescript，它基本上隐藏了我所有与社交网络相关的应用程序，然后还有一个类似的应用程序可以取消隐藏它们。问题是，如果其中一个应用程序没有运行，那么整个应用程序都会在该行停止，并且不会将该行下方的应用程序设置为隐藏。

这是脚本：

```
tell application "System Events" to set visible of process "Twitter" to false
tell application "System Events" to set visible of process "Wedge" to false
tell application "System Events" to set visible of process "Facebook" to false
tell application "System Events" to set visible of process "Adium" to false
tell application "System Events" to set visible of process "Messages" to false 
```

我这样做是错误的吗？我是否必须检查它们中的每一个是否首先运行，或者是否有某种方法可以让它继续执行脚本？

编辑：使用此脚本体验同样的事情，我使用 Alfred 热键退出特定应用程序并在我下班时启动屏幕保护程序：

```
tell application "Adium" to quit
tell application "Messages" to quit
tell application "1Password" to quit
tell application "iTunes" to quit
tell application "ScreenSaverEngine" to activate 
```

所以基本上如果 iTunes - 例如 - 没有运行，那么屏幕保护程序将不会启动，但该行之前的 3 个应用程序将全部退出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:52:15.220

您可以将每个语句包装在 try 块中，这样它就会静默失败：

```
set myApps to {"iTunes", "1Password"}
repeat with anApp in myApps
    try
        tell application anApp to quit
    end try
end repeat 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T10:01:49.547

提示：使用 [Enhanced Application Object Model][1] 您还可以执行以下操作：

```
if application "iTunes" is running then
    tell application "iTunes" to quit
end if 
```

或者

```
tell application "iTunes"
    if it is running then
        pause
    end if
end tell 
```

[[如果应用程序正在运行，如何在不启动它的情况下检查 AppleScript - 通过 osascript 实用程序](https://stackoverflow.com/questions/16064957/how-to-check-in-applescript-if-an-app-is-running-without-launching-it-via-osa/16069999#16069999)]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-06T07:17:46.947

您可以使用上面指定的 try 命令并使用`on error do nothing`它来执行此操作。

# mysql - 加入表并进行计数操作 - MySQL

> ID：14125647
> 
> 赞同：1
> 
> 时间：2013-01-02T16:36:03.990
> 
> 标签：mysql, sql, join, left-join

我有这些表：

```
 Members
   ---------------------------
   MemberID | Name |.....
      1
      2
      3
      4
   ---------------------------

   RentedMovies
   ---------------------------
   MemberID | MovieID | DateOfLease | ReturnDate | .....
     1      |    1    |  2012-12-20 |  2013-01-05
     1      |    2    |  2012-12-15 |  2012-12-30
     1      |    3    |  2012-12-16 |  2013-01-06
     2      |    1    |  2012-12-17 |  2012-12-18
     2      |    4    |  2012-12-18 |  2013-01-05
     3      |    1    |  2012-12-19 |  2013-01-04

   I need to get this:
   --------------------------------------------------------
   MemberID | NumberOfRentedMovies | ReturnData < curdate())
     1      |         3            |      1
     2      |         2            |      1
     3      |         1            |      0
     4      |         0            |      0
   --------------------------------------------------------- 
```

我使用了下一个代码：

```
 SELECT  Members.MemberID,
    COUNT(rented.MemberID) AS NumberOfRentedMovies,
    COUNT(notTakenBackOnTime.idClana) AS NumberOfMoviesLate
   FROM  Members 
   left JOIN RentedMovies as rented ON  rented.MemberID = Members.MemberID
   left JOIN RentedMovies as notTakenBackOnTime ON notTakenBackOnTime.MemberID
       = Members.MemberID AND notTakenBackOnTime.ReturnDate< CURDATE()
   group by Members.MemberID 
```

但它不正确地工作！

我也试过这个：

```
 SELECT MemberID,my,my2
   FROM Members as mem
   JOIN (SELECT COUNT(* )AS my FROM RentedMovies) b 
      ON b.MemberID = mem.MemberID
   JOIN (SELECT COUNT(* )AS my2 FROM RentedMovies WHERE ReturnDate< CURDATE()) c 
   ON c.MemberID = mem.MemberID 
```

但我有一些错误！所以问题是如何完成正确的解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:42:13.987

你很亲密。试试这个：

```
SELECT  M.MemberID, 
        COUNT(RM.MemberID) NumberOfRentedMovies,
        SUM(CASE WHEN RM.ReturnDate < CURDATE() THEN 1 ELSE 0 END) ReturnData 
FROM Members M
LEFT JOIN RentedMovies RM
    ON M.MemberID = RM.MemberID 
GROUP BY M.MemberID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:42:41.007

您显示的所需结果可以通过以下方式完成：

```
SELECT MemberID,
       COALESCE(COUNT(MovieID), 0) AS NumberOfRentedMovies,
       COALESCE(SUM(ReturnDate < CURDATE()), 0) AS NotYetReturned
FROM Members
LEFT JOIN RentedMovies USING (MemberID)
GROUP BY MemberID 
```

看看它在行动：[http ://sqlfiddle.com/#!2/a192c/1](http://sqlfiddle.com/#!2/a192c/1)

# javascript - 关闭弹出窗口

> ID：14125648
> 
> 赞同：20
> 
> 时间：2013-01-02T16:36:12.457
> 
> 标签：javascript, popup

我有一个使用以下代码打开的弹出窗口：

```
function _openpageview(fieldid,objectid,opennew)
{
var url='/s_viewpagefield.jsp?fieldid='+fieldid+'&codedid='+objectid;

  web_window = window.open(url,'_blank', 'menubar=yes,location=no,scrollbars=yes,width=800,height=600,status=no,resizable=yes,top=0,left=0,dependent=yes,alwaysRaised=yes');
   web_window.opener = window;
   web_window.focus();

} 
```

如何从弹出窗口中关闭该弹出窗口？

```
window.close();
self.close();
web_window.close(); 
```

一切都没有奏效

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-09-19T12:31:51.943

一个老提示...

```
var daddy = window.self;
daddy.opener = window.self;
daddy.close(); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-05T15:39:34.483

您只能使用使用 javascript 打开的 javascript 关闭窗口，即使用以下命令打开窗口时：

```
window.open 
```

然后

```
window.close 
```

将工作。否则不会。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-10-04T00:11:57.363

对于这样一个看似简单的事情，这可能是一个皇家的痛苦！我找到了一个效果很好的解决方案（class="video-close" 显然是这个按钮特有的并且是可选的）

```
 <a href="javascript:window.open('','_self').close();" class="video-close">Close this window</a> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-02T16:41:15.500

当您尝试关闭窗口时，您的 web_window 变量必须超出范围。将此行添加到您的 _openpageview 函数中进行测试：

```
setTimeout(function(){web_window.close();},1000); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-29T07:05:21.053

在我的情况下（joomla 打开弹出窗口）我不得不使用这个：

```
onclick="submit(); window.parent.location.reload(false);window.parent.SqueezeBox.close();" 
```

希望这可能会有所帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-30T16:21:16.993

在我的情况下，我只需要关闭我的弹出窗口并将用户重定向到他的个人资料页面，当他在阅读一些我尝试了一些黑客的消息后点击“确定”，包括 setTimeout + self.close()，但使用 IE ，这是关闭整个标签...

解决方案：我用一个简单的提交按钮替换了我的链接。
`<button type="submit" onclick="window.location.href='profile.html';">buttonText</button>`. 而已。

这听起来可能很愚蠢，但我没有想到这么简单的解决方案，因为我的弹出窗口没有任何形式。

希望对像我这样的前端菜鸟有所帮助！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-10-01T10:53:26.650

试试这个解决方案

```
<html>
<script>
var newWindow;

function openWindow() {
  newWindow = window.open("", "myWindow", "width=200,height=100");
  newWindow.document.write('<a href="javascript:window.close();" class="video-close">Close this window</a>');
}

function closeWindow() {
  newWindow.close();
}
</script>
<h3 style="color:brown"> Close Window Example </h3>
<body>
<button onclick="openWindow()">Open New Window</button>
<br><br>
<button onclick="closeWindow()">Close New Window </button>

</body>
</html> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-29T18:39:00.003

**打印后关闭弹出窗口。**

在父窗口中

```
 let IframeLink = '../Sale/PriceKOT?SalesID=@(Model.SalesInfo.SalesID)&PrintTypeID=3';
     var newwindow = window.open(IframeLink, "KOT Print", 'width=560,height=550,toolbar=0,menubar=0,location=0');
    if (window.focus) { newwindow.focus() }

    function closeThisPopUp() {            
        newwindow.close();
        printf();
    } 
```

在子窗口或弹出窗口中

```
 window.onafterprint = function (event) {
    opener.closeThisPopUp();
    window.close;
}; 
```

# objective-c - 设置窗口根视图控制器没有堆栈跟踪的错误访问

> ID：14125651
> 
> 赞同：0
> 
> 时间：2013-01-02T16:36:13.950
> 
> 标签：objective-c, ios, uiviewcontroller, automatic-ref-counting

编辑：这似乎是我的一个愚蠢的错误，在我处理它之前，我太早收到了一个 rotationChanged 通知。这引起了连锁反应，导致在一些不为人知的位置坠毁。让我看看如何关闭/删除这个问题......

我的应用程序运行良好一段时间，但我今天决定最终“正确”实现它，即：使用视图控制器而不是手动将单个视图添加到 UIWindow。这有一段时间非常顺利，直到我尝试将 window.rootViewController 设置为我的视图控制器。

在 applicationDidFinishLaunchingWithOptions 之后的某个地方，它因访问错误而崩溃。没有有用的堆栈跟踪（它在程序集中崩溃），而且我看不到它在任何地方重新回到我的代码中（我将日志放在所有地方）。只需将视图控制器的视图添加到主窗口即可。这是代码的一部分：

```
-(BOOL) application:(UIApplication *)app didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    ....
    self.window = [[UIWindow alloc] initWithFrame: [UIScreen mainScreen].bounds];
    self.viewController = [[MainViewController alloc]init];
    // if i uncomment this it crashes:
    // self.window.rootViewController = self.viewController;
    [self.window addSubview: viewController.view]; // Commented out if i use the rootViewController

    [self.window makeKeyAndVisible];
    NSLog(@"Did finish launching");
    return YES;
} 
```

我已经尝试了很多调试方法（stacktrace 不存在，手动单步执行代码需要永远，崩溃前没有调用日志），但我找不到问题。它崩溃了`libobjc.A.dylib'objc_retain:`，堆栈跟踪中唯一的另一件事是`objc_storeStrong`. 这不是保留/释放问题（至少不是直接问题），因为我使用的是 ARC。最终的 NSLog 被调用，如果我手动执行，它会退出 didFinishLaunching。

我可以在不设置根视图控制器的情况下使应用程序正常工作，但重做这部分的全部目的是“正确”地做所有事情（例如，在没有根视图控制器的情况下，旋转必须相对粗俗地完成）。

所以 StackOverflow，请告诉我你有什么想法！因为这让我发疯：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:15:24.430

看来这是我的一个愚蠢的错误，在我处理它之前，我太早收到了一个 rotationChanged 通知。这引起了连锁反应，导致在一些不为人知的位置坠毁。无论如何感谢您的帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:41:58.780

你不需要这样做：

```
[self.window addSubview: viewController.view]; 
```

当您将视图控制器设置为根视图控制器时，它的视图已经成为窗口的子视图。

**编辑**

但是，这不会造成任何问题。

也许问题不在代码中。有时我的应用程序也会崩溃，我很生气。通常会发生这种情况，因为我从另一个文件夹中拖动项目并且 xcode 发现权限问题，或者由于其他一些（对我而言）未知原因。

尝试使用 alt+cmd+k 清理项目。如果这不起作用，您可能会遇到权限问题。因此，创建另一个项目并复制您写入的所有文件。

# asp.net - 将 javascript 调用移动到我的布局页面的头部会使 PDF.js 停止工作

> ID：14125653
> 
> 赞同：0
> 
> 时间：2013-01-02T16:36:17.250
> 
> 标签：asp.net, asp.net-mvc, pdf.js

这是一个复杂的情况，我找不到答案。

我正在尝试在我的 Asp Net MVC 4 项目中实现 PDF.js。

我有一个视图页面负责在浏览器中显示 pdf。只要我在此页面中声明 api.js，它就可以正常工作。

我需要将 api.js 调用移动到布局视图中的头部。这样做会加载 api.js，我可以在 firebug 中看到它。虽然没有加载pdf。

这是 api.js [http://pastebin.com/JAnZVcbC](http://pastebin.com/JAnZVcbC)

我更改的 api.js 的唯一部分是：

```
if (!globalScope.PDFJS.disableWorker && typeof Worker !== 'undefined') {
    var workerSrc = '/pdf.js/worker_loader.js';
  if (typeof workerSrc === 'undefined') {
    error('No PDFJS.workerSrc specified');
  }

  try {
    // Some versions of FF can't create a worker on localhost, see:
    // https://bugzilla.mozilla.org/show_bug.cgi?id=683280
      var worker = new Worker('/pdf.js/worker_loader.js');
    var messageHandler = new MessageHandler('main', worker);
    this.messageHandler = messageHandler; 
```

如您所见，我使用指向文件的 URI 定义了 workerSrc。

你们有这个图书馆的经验，可以给我一些关于如何解决这个问题的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:08:47.127

对我来说太复杂了，但我认为您必须在页面加载后调用**PDFJS.getDocument 。**你包括了javascript......好吧......但是你触发它了吗？

# php - 无法从命令行运行的文件运行 PHP MySQL 命令

> ID：14125655
> 
> 赞同：1
> 
> 时间：2013-01-02T16:36:34.087
> 
> 标签：php, mysql, apache

所以 Apache 有自己的服务帐户，当我从 URL 加载页面时，在我的浏览器上，它加载了使用服务帐户运行的页面，它工作正常，没有错误。

但是，当我通过 SSH 在终端的 root 帐户上执行 php -q "LOCAL PATH TO FILE" 时，我会收到以下错误：

对于 MySQLi = "调用未定义函数 mysqli_connect()"

对于 MySQL = "mysql_connect(): 没有这样的文件或目录"

现在的问题是，如果我从浏览器加载页面，它确实可以正常工作，而不是当我从终端运行它时。

由于 CronJobs，我需要能够从终端运行它。

这最初有效，但我不确定它为什么停止工作，显然我需要安装一个 PHP 模块才能让它工作，但我不确定，因为我很难找到与我的问题相同的结果。

我正在使用 CentOS。

谢谢

# javascript - Javascript 页面重新加载或 Meta Tag 刷新方法？

> ID：14125661
> 
> 赞同：3
> 
> 时间：2013-01-02T16:36:56.013
> 
> 标签：javascript, jquery, html, function, meta

我希望向我的 aspx 页面添加一个脚本，该脚本将每 15 秒刷新/重新加载一次页面。我的页面上有来自 Oracle 的动态数据。我发现我可以使用 Javascript“重新加载”或 Meta Tag 方法，这是用动态数据刷新页面的最佳方法？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:48:14.743

您可以使用

```
<meta http-equiv="refresh" content="15"> 
```

但它也有缺点。例如，如果用户在 15 秒之前加载下一页。您可能会得到一些预期的浏览器重新加载

使用 javascript 你可能会做类似的事情

```
window.setTimeout(function(){window.location.href=window.location.href},15000); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T16:43:44.943

您可以与[$ajax](http://api.jquery.com/jQuery.ajax/)请求`setInterval`结合使用：

```
setInterval(function(){
   $.ajax({
  url: someUrl,

  context: $('#myDiv')
}).success(function(data) { 
  $(this).html(data);
});
},15000); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-02T16:44:51.110

我相信元标记方式仅用于页面加载以重新加载页面。这种方法很好，因为它不使用任何javascript，所以如果出现问题，页面仍然会重新加载。然而，这个标签被视为对蜘蛛的垃圾邮件。如果您想在页面加载后重定向。我会推荐 javascript 版本。如果不是，我通常都会这样做，以便页面尽可能快地重定向。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T16:58:54.423

有更新的方法来处理更强大的数据刷新。您可能会考虑查看[网络套接字](http://www.html5rocks.com/en/tutorials/websockets/basics/)。

这些是 Web 浏览器和服务器之间的低延迟实时连接，允许来回发送消息（数据）。

# android - 发送带有链接的电子邮件未收到带有链接的电子邮件

> ID：14125665
> 
> 赞同：0
> 
> 时间：2013-01-02T16:37:08.643
> 
> 标签：android, email

我试图从我的应用程序发送电子邮件，我在我的 android 上的电子邮件客户端中看到了链接，但是当我检查电子邮件接收器时，没有链接。

这是我的代码：

```
 emailIntent = new Intent(android.content.Intent.ACTION_SEND);
        emailIntent.setType("text/html");
        emailIntent.putExtra(Intent.EXTRA_EMAIL,
                new String[] { "" });
        emailIntent.putExtra(
                android.content.Intent.EXTRA_SUBJECT,
                MainActivity.getCurrentActivity().getString(
                        R.string.mailTitle));
        emailIntent.putExtra(android.content.Intent.EXTRA_TEXT,
                Html.fromHtml(text)); 
```

“文本”是 html。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T11:10:58.023

试试这个

```
 private void sendMail(String[] emailaddressList)
             {

      Intent sendIntent;
      sendIntent = new Intent(Intent.ACTION_SEND);
      sendIntent.setType("text/html");
      String body="Go to this link \n\n\n";
      String link=Html.fromHtml(body)+"\"https://www.google.com"";
      sendIntent.putExtra(Intent.EXTRA_SUBJECT, "Mail test");
      sendIntent.putExtra(Intent.EXTRA_TEXT, link);

      sendIntent.putExtra(Intent.EXTRA_EMAIL,emailaddressList);

      startActivity(Intent.createChooser(sendIntent, "Send Mail"));        
              } 
```

# c# - 如何使用 SqlDataReader 从数据库中检索信息，c#

> ID：14125667
> 
> 赞同：0
> 
> 时间：2013-01-02T16:37:09.367
> 
> 标签：c#, sql, sqldatareader

我需要访问我的 SQL 数据库中的一个变量，以及一个已经正确实现的用户名。我使用以下语句查询数据库：

```
private const string _getUserByUsernameQuery = @"
SELECT
    [User].[username]
FROM
    [User] WITH (NOLOCK) 
    INNER JOIN [Company] WITH (NOLOCK)
    ON [User].[companyId] = [Company].[id]
WHERE
    [User].[username] = @username 
    AND [User].[password] = @password"; 
```

然后连接数据库并访问用户名：

```
using (SqlConnection connection = new SqlConnection(SQLConfiguration.ConnectionString))
{
   SqlCommand command = new SqlCommand(_getUserByUsernameQuery, connection);
   command.Parameters.AddWithValue("@username", username);
   command.Parameters.AddWithValue("@password", password);
   try
   {
      connection.Open();
      using (SqlDataReader reader = command.ExecuteReader())
      {
         if (reader.Read())
         {
            Username = Convert.ToString(reader["username"]);
            //CompanyId = Convert.ToString(reader["companyId"]);
            lblUsername = Username;
            //lblCompanyId = CompanyId;
            Debug.WriteLine("Testing2::");
            Debug.WriteLine(lblUsername);
            //Debug.WriteLine(lblCompanyId);
         }
      }
   }
   catch (Exception)
   {
      if(connection.State == System.Data.ConnectionState.Open)
      connection.Close();
   }
} 
```

在我设置 reader["username"] 等于 Username 的 if 语句中，我使用 debug 输出 Username 并且值是正确的。我在与 CompanyId 相关的评论中的内容是我想要做的，但无法做到。这样做不会导致错误，但它会忽略整个语句（即使是其他情况下的 Username 变量）。根据我的查询字符串，如何访问变量 companyId？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T16:41:30.953

在您`_getUserByUsernameQuery`中，您只选择该`username`字段。确保您要从`reader[...]`中读取的字段存在于您的选择语句中。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T16:42:30.650

看起来您需要将公司 ID 添加到您的选择语句才能检索它：

```
private const string _getUserByUsernameQuery = @"
SELECT
    [User].[username], [User].[companyId]
FROM
    [User] WITH (NOLOCK) 
    INNER JOIN [Company] WITH (NOLOCK)
    ON [User].[companyId] = [Company].[id]
WHERE
    [User].[username] = @username 
    AND [User].[password] = @password"; 
```

# eclipse - Eclipse - 如何为新文件选择源文件夹？

> ID：14125669
> 
> 赞同：0
> 
> 时间：2013-01-02T16:37:18.190
> 
> 标签：eclipse

几天前我刚刚下载了 Eclipse Juno 版本。我开始了一个新的 PHP 项目。当我创建一个新文件时，它让我选择项目的根文件夹作为源...有什么方法可以选择项目根文件夹中的子目录作为文件的源文件夹？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-02T16:40:45.900

如果您不希望在该文件夹中创建文件，则必须创建一个新的 PHP 项目。Eclipse 中没有子目录之类的东西。它创建单独的目录，您只需转到存储文件的任何位置并将它们传输到您的服务器，方法是进入您的 htdocs 并拖动文件夹并将文件夹放入您希望它所在的服务器上的文件夹中。我希望这对您有所帮助。

# playframework - PlayFramework 1.x 中的页面特定 HTML 块

> ID：14125678
> 
> 赞同：0
> 
> 时间：2013-01-02T16:38:01.210
> 
> 标签：playframework, playframework-1.x

在经典的基于 groovy 的 Play 1.x 模板引擎中，有没有办法定义一个可以被父模板引用的文本块？我知道你可以使用#{set name:value}，但这只是设置一个字符串，我真的需要能够创建整个文本块。我在我的页面中寻找的是这样的东西：

```
#{设置名称：“page_actions”\}
<div class='按钮组'>
   <a href='#'>添加项目</a>
   <a href='#'>全部显示</a>
</div>
＃{/放}

```

然后在我的父模板中做类似的事情

```
<标题>
   #{get page_actions /}
</标题>
...
<页脚>
   #{get page_actions /}
</页脚>

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:30:41.270

您可以使用自定义模板标签来做到这一点：[http ://www.playframework.org/documentation/1.2.5/templates#tags](http://www.playframework.org/documentation/1.2.5/templates#tags)

只需将您的 html 放入 app/views/tags/myfile.html 并在您的主 html 文件中调用标签 #{myfile /} 即可。

您可以在模板标签内使用变量，但在开头使用 _ 引用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:39:47.697

弄清楚了。#{set "variable_name"/} 完美运行。您需要离开地图（即不要使用名称：值 - 只需使用“名称”。

# c++ - 矢量迭代的派生和基数之间的类型转换：C2664 错误

> ID：14125683
> 
> 赞同：1
> 
> 时间：2013-01-02T16:38:38.683
> 
> 标签：c++, vector, type-conversion, base, derived-class

我有以下功能

```
void DrawAndShowCircle(int windowWidth, int windowHeight,int windowType,Scalar windowBGColor, VirtualCircle circle)
    {
        cv::circle(circleImage,circle.Center,circle.Radius,circle.Color,circle.Thickness,circle.LineType);
    }

void DrawAndShowCircles(int windowWidth, int windowHeight,int windowType,Scalar windowBGColor, vector<VirtualObject> circles)
    {
        circleImage = Mat(windowHeight,windowWidth,windowType);
        circleImage.setTo(windowBGColor);

        for(vector<VirtualObject>::iterator it = circles.begin(); it != circles.end(); ++it)
        {
            DrawAndShowCircle(windowWidth,windowHeight,windowType,windowBGColor,*it);
        }
        imshow("circle",circleImage);
        cvWaitKey(0);       
    } 
```

我遇到的问题是，在 DrawAndShowCircles 中，我一直在理解类型转换，此时我使用 for 循环遍历对象。

我有 `VirtualObject`继承的基类`VirtualCircle`

我正在尝试遍历向量并显示圆圈。这是为 OpenCV 完成的，因此您会发现一些 OpenCV 函数。

这是调用代码

```
 vector<VirtualObject> circles;
   circles.push_back(VirtualCircle(Point(100,50),15,2,Scalar(255,100,100),1));
   circles.push_back(VirtualCircle(Point(100,100),25,2,Scalar(100,255,100),1));
   circles.push_back(VirtualCircle(Point(100,150),35,2,Scalar(100,100,255),1));
   DrawAndShowCircles(200,200,CV_8UC3,Scalar(255,255,255),circles); 
```

我无法使用 for 循环遍历。我不清楚类型转换。请指教。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:00:34.783

通过在你的向量中存储`VirtualObject`实例（而不是指针），你已经导致了[切片](http://en.wikipedia.org/wiki/Object_slicing)的发生。这意味着您的向量根本**不包含任何圆圈**。

`VirtualCircle*`当你改变它时，你会遇到从to的转换`VirtualObject*`可以自动完成的问题（因为任何`VirtualCircle`实例也总是一个`VirtualObject`实例），但反过来需要显式转换，因为编译器不能确定它总是安全地将 a 解释`VirtualObject`为 a `VirtualCircle`。您需要的演员表是[`dynamic_cast`](http://en.wikipedia.org/wiki/Dynamic_cast).

甚至比`dynamic_cast`将设计更改为使用虚拟功能更好。它们专为此类情况而设计。

# java - 基于匹配属性对对象进行分组的 Java 算法

> ID：14125685
> 
> 赞同：1
> 
> 时间：2013-01-02T16:38:41.857
> 
> 标签：java, algorithm, cluster-analysis

我想实现 java 代码来根据相似的属性对项目进行分组。假设我有一系列客户存储以下信息 Name , City , Language , Car , Company

```
Customer1= { Mahesh, Mumbai , Hindi , Maruti , Infy}
Customer2= { Robin, Mumbai, English , Honda , Wipro}
Customer3 = { Mahek, Mumbai, Hindi, Maruti, Wipro}
Customer4 = { Rohit, Mumbai, English, Honda, Infy}
Customer5 = { Yogesh, Delhi, English, Honda, ''}
Customer6 = { Alpesh, Delhi, English, '', TCS}
Customer7 = { Mark, Delhi, English, '', WIPRO} 
```

现在我正在寻找的是我可以创建一组具有相似城市、语言和汽车的客户

所以我应该有4组

```
Group 1 = Customer1 , Customer3
Group 2 = Customer2 , Customer4 
GROUP 3 = Customer5 
Group 4 = Customer6 ,Customer7 
```

基本上我想根据一些类似的属性对项目进行分组。我如何在 Java 中有效地实现这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:43:48.060

看来您的意思是通过**匹配属性**而不是**相似属性**进行分组。差别很大，这个问题相当简单。

我建议您根据三个标准对所有项目进行排序，然后将这些项目分组一次。如果当前项目与所有 3 个属性匹配，只需将当前项目添加到当前组，否则将其单独放置在一个新组中并将该组命名为“当前组”。

另一种选择是使用这三个属性对对象进行散列，并从具有相等散列的对象中创建组（您必须设计一种方法来处理冲突，并且有很多方法可以做到这一点）。似乎枚举了您要用于分组的属性的值，您甚至可以避免冲突（如果可能的组合足够少）。

# c# - 自定义 GridViewItem 选择 - Windows 应用商店应用 C#/XAML

> ID：14125688
> 
> 赞同：1
> 
> 时间：2013-01-02T16:38:50.573
> 
> 标签：c#, xaml, windows-8

我正在尝试更改在 gridview 中选择项目的样式。在我在 StandardStyles.xaml 中使用的代码下方：

```
 <SolidColorBrush x:Key="ListViewItemSelectedBackgroundThemeBrush" Color="Transparent"/>
    <SolidColorBrush x:Key="ListViewItemPointerOverBackgroundThemeBrush" Opacity="0.25" Color="Blue"/>
    <SolidColorBrush x:Key="ListViewItemSelectedPointerOverBackgroundThemeBrush" Opacity="0.7" Color="Blue"></SolidColorBrush>
    <SolidColorBrush x:Key="ListViewItemSelectedPointerOverBorderThemeBrush" Color="Blue"/> 
```

但是我需要带有所选图标的边框保持某种样式并且背景透明，如下所示：

[选定的图像样式](http://imageshack.us/photo/my-images/838/sdffsdfd.png/)

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T20:26:30.793

`StandardStyles.xaml`当我在每个 GridViewItem 下方使用一个矩形时，自定义选择有效。

```
 <DataTemplate x:Key="MyTemplete">
        <Grid HorizontalAlignment="Left" Background="Transparent">
            <Rectangle>
                <Rectangle.Fill>
                    <SolidColorBrush Color="White" Opacity="1"/>
                </Rectangle.Fill>
            </Rectangle>
            ...
        </Grid>
    </DataTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:15:04.440

使用下面的代码设置所选项目的样式。它将设置边框颜色、文本颜色和复选图标颜色。

```
<SolidColorBrush x:Key="ListViewItemSelectedBackgroundThemeBrush" Color="#323232"></SolidColorBrush>
<SolidColorBrush x:Key="ListViewItemSelectedForegroundThemeBrush" Color="White"></SolidColorBrush>
<SolidColorBrush x:Key="ListViewItemCheckThemeBrush" Color="White"></SolidColorBrush> 
```

问候。

# android - Android & Eclipse 错误：找不到类 'com.dropbox.client2.session.AppKeyPair'

> ID：14125694
> 
> 赞同：0
> 
> 时间：2013-01-02T16:39:29.420
> 
> 标签：android, eclipse, dropbox

我正在使用 Eclipse 制作一个 Android 应用程序。我想实现一个在我的 Dropbox 帐户上共享文件的功能，所以我下载了 sdk。

我在这里关注官方文档：[https ://www.dropbox.com/developers/start/authentication#android](https://www.dropbox.com/developers/start/authentication#android)

所以我在导入部分写了这段代码：

```
import com.dropbox.client2.DropboxAPI;
import com.dropbox.client2.android.AndroidAuthSession;
import com.dropbox.client2.session.AppKeyPair;
import com.dropbox.client2.session.Session.AccessType; 
```

类声明中的此代码

```
final static private String APP_KEY = "*****";
final static private String APP_SECRET = "****";
private DropboxAPI<AndroidAuthSession> mDBApi; 
```

我的方法中的这段代码：

```
com.dropbox.client2.session.AppKeyPair appKeys = new com.dropbox.client2.session.AppKeyPair(APP_KEY, APP_SECRET);
AndroidAuthSession session = new AndroidAuthSession(appKeys,AccessType.APP_FOLDER);
mDBApi = new DropboxAPI<AndroidAuthSession>(session); 
```

但是当我调试第一行方法时，我有这个错误：

```
01-02 17:07:54.459: E/dalvikvm(19602): Could not find class 'com.dropbox.client2.session.AppKeyPair', referenced from method com.example.myfirstapp.DbAccess.ShareDbOnDropbox 
```

拜托，你能帮帮我吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:50:06.723

将`.jar`文件添加到项目时，是否**将 jar 导出**到构建路径上？

在 Eclipse 中右键单击您的项目，选择`Properties`，然后选择`Java Build Path`。导航到`Order and Export`选项卡并确保**勾选了 Dropbox 库**。

这将导出类以在编译和构建应用程序时在您的项目中使用。

单击`Ok`，然后进行干净的构建并重试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-02T16:44:44.677

改变这个：

```
 com.dropbox.client2.session.AppKeyPair appKeys = new com.dropbox.client2.session.AppKeyPair(APP_KEY, APP_SECRET); 
```

对此：

```
 AppKeyPair appKeys = new AppKeyPair(APP_KEY, APP_SECRET); 
```

在 Eclipse 出版社

```
 ctrl + shift + O 
```

这将组织您的导入并引入正确的 DropBox 类，如果确实如此，则可以修复。如果没有，那么您的类路径设置不正确，并且您的项目找不到保管箱 lib/jar/sdk。

# codeigniter - PyroCMS 访问系统路由文件中的模块控制器

> ID：14125697
> 
> 赞同：0
> 
> 时间：2013-01-02T16:39:45.350
> 
> 标签：codeigniter, pyrocms

我尝试在 routes.php 的 $route['default_controller'] 设置中访问模块控制器，但出现以下错误：

![在此处输入图像描述](../Images/f57c189d0b20e83b6c9e43c209634121.png)

我最近经常遇到这个错误，完全不明白它到底是什么意思。有人知道我做错了什么吗？以下是我的路线声明：

```
$route['default_controller'] = 'contractors/routes/mainDisplay'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T02:01:14.037

错误是关于语言文件而不是路由。显然你已经在你的模块中加载了一个 lang 文件，但是 pyrocms 找不到该文件。确保语言文件放置正确并检查文件名应该是`contractors_lang.php`.

你有这个文件吗？

```
../modules/contractors/language/english/contractors_lang.php 
```

如果没有，做一个。

# google-chrome-extension - CodeMirror 和 Chrome 扩展 - 添加本地 js 文件的问题

> ID：14125699
> 
> 赞同：1
> 
> 时间：2013-01-02T16:40:15.877
> 
> 标签：google-chrome-extension, codemirror

我正在尝试使用 chrome 扩展将 CodeMirror 的语法突出显示与 textarea 集成。

这是我的**test.js** ...

```
var srcArray = ["lib/codemirror.js", 
                "lib/util/matchbrackets.js", 
                "lib/util/continuecomment.js",
                "mode/htmlmixed/htmlmixed.js",
                "mode/xml/xml.js",
                "mode/javascript/javascript.js",
                "mode/css/css.js",
                "mode/clike/clike.js",
                "mode/php/php.js"];             

function AddScript(value)
{
    var s = document.createElement("SCRIPT")
    s.src = chrome.extension.getURL(value);
    s.onload = function() {
        this.parentNode.removeChild(this);
    };
    (document.head||document.documentElement).appendChild(s);   

}   
srcArray.forEach(AddScript); 
```

...和**​​manifest.json**：

```
{
"name":"Test",
"description":"Test description",
"version":"1.0",
"manifest_version": 2,
"browser_action": {
    "default_icon": "icon.png"
},
"content_scripts": [
    {
        "matches": ["file:///*Test*"],  
        "js": ["test.js"]
    }
],
"web_accessible_resources": ["lib/codemirror.js", 
               "lib/util/matchbrackets.js", 
               "lib/util/continuecomment.js",
                "mode/htmlmixed/htmlmixed.js",
                "mode/xml/xml.js",
                "mode/javascript/javascript.js",
                "mode/css/css.js",![enter image description here][1]
                "mode/clike/clike.js",
                "mode/php/php.js"]  
} 
```

这是我面临的问题：

`<script>...</script>`正在添加到页面中，但是当添加最后一个时，它们都会消失。

![来自 Chrome 开发工具](../Images/a74dd02484ebf3f371d65c2e0501d4ff.png)

我怀疑这与清单的第二版中引入的安全机制有关。但是，我无法弄清楚缺少什么。

您的建议将不胜感激，谢谢。

# java - Java if 语句未执行。

> ID：14125700
> 
> 赞同：-3
> 
> 时间：2013-01-02T16:40:30.513
> 
> 标签：java, calendar, system

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)
> [java == vs equals() 混淆](https://stackoverflow.com/questions/7520432/java-vs-equals-confusion)

因此，我正在尝试开发一个在我输入时打开 JDialog 的应用程序。它只需要精确到一秒钟。

```
public void run() {

    SimpleDateFormat sdf = new SimpleDateFormat("HH:mm");
    timeset = "16:37";

    while(true){

    System.out.println("thread sleep");
    try{Thread.currentThread().sleep(1000);}catch(InterruptedException ie){}

    Calendar cal = Calendar.getInstance();
    cal.getTime();
    temptime = sdf.format(cal.getTime());       
    System.out.println("realtime = " + realtime);
    System.out.println("timeset = " + timeset);

    if(realtime == timeset){

        System.out.println("if statement activated");
        Alert.man();
        break;

    } 
```

所以，我的问题是当我运行程序时 if 语句在 timeset 和 realtime 相等时不运行，我就是想不通。这是怎么回事？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T16:41:14.240

使用 equals() 方法检查两个日期是否相等。`==`运算符只检查两个引用是否指向同一个实例。

```
if(realtime == timeset){ 
```

应该

```
if(realtime.equals(timeset)){ 
```

# wcf - WCF 服务 - 单实例 - 静态构造函数

> ID：14125709
> 
> 赞同：0
> 
> 时间：2013-01-02T16:41:01.057
> 
> 标签：wcf, c#-4.0, static-libraries, static-members

只是想确认我的理解是正确的。如果我对服务使用单实例模式：

[服务行为（InstanceContextMode=InstanceContextMode.Single）]

并且该服务从另一个具有静态构造函数的程序集调用一个类，该构造函数仅在第一次调用该服务时才被调用？我正在谈论的构造函数设置了相当数量的 AutoMapper 映射，我只希望在第一次调用服务时产生这个开销。

更进一步，如果我有两个不同的服务，并且它们都是共享类，我是否正确地认为静态构造函数仍然只调用一次？

最好的

射线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:41:08.287

InstanceContextMode 与触发静态构造函数的次数之间没有联系。每个应用程序域调用一次静态构造函数。因此，如果您的服务托管在一个应用程序域中，那么您的构造函数将被调用一次。据我了解，您使用构造函数来注册 AutoMapper 配置......对我来说这不是一个好方法。假设您的服务托管在 IIS 上，您最好创建一个 Global.asax 文件，然后在 Application_Start 方法中运行映射注册代码。当然，您可以先将其包装在一些静态方法中。

希望能帮助到你！

# .net - AppFabric Cache GetAndLock(forceLock = true) 方法签名的预期使用模式是什么？

> ID：14125717
> 
> 赞同：2
> 
> 时间：2013-01-02T16:41:34.157
> 
> 标签：.net, appfabric-cache

该[文档](http://msdn.microsoft.com/en-us/library/ff424962.aspx)指出：

> 如果 forceLock 为真，则无论缓存中是否存在键值对，都会锁定键。

没有进一步的解释，例如，对不在缓存中的键进行锁定意味着什么，以及在锁定中插入缓存项的预期技术是（或现在是）什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T08:20:12.943

根据我过去的经验，它用于客户端在缓存中保留一个键。

如您所知，Lock 方法适用于 Resource Data : Shared Memory，并发读写，被大量事务访问，例如拍卖品。

如果密钥不存在，您可以锁定密钥（如果它是第一个线程/客户端）并让其他线程旋转并等待 DataCacheErrorCode.ObjectLocked 错误代码消失。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-31T15:31:30.843

这就是 appfabric 模式的用途。

```
this.Cache.GetAndLock<ICollection<string>>(key, new TimeSpan(0, 0, 30) 
```

您可以使用通用参数来获取缓存项。

# javascript - 嵌套设计形式不链接模型

> ID：14125722
> 
> 赞同：0
> 
> 时间：2013-01-02T16:41:52.727
> 
> 标签：javascript, ruby-on-rails, devise, nested-forms, google-places-api

我正在尝试以相同的形式创建一个新位置和一个设计用户并将它们链接起来。用户和位置已创建，但 location_id 未保存给用户。user 表中有一个 location_id 列。

我的表格

```
<% resource.build_location %>
<%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:class => 'form-vertical' }) do |f| %>
 <%= f.error_notification %>
 <!-- capture location details hidden values -->
  <%= f.fields_for :location do |location_form| %>
  <%= location_form.text_field :name, :name => "name", :type => "hidden" %>
  <%= location_form.text_field :street_address, :name => "formatted_address", :type => "hidden" %>
  <%= location_form.text_field :lat, :name => "lat", :type => "hidden" %>
  <%= location_form.text_field :long, :name => "lng", :type => "hidden" %>
<% end %>
 <!-- devise user authenticate --> 
  <%= f.input :name, :autofocus => true %> 
  <%= f.input :email, :required => true %>
  <%= f.input :password, :required => true %>
  <%= f.input :password_confirmation, :required => true %>
  <%= f.button :submit, 'Sign up', :class => 'btn-primary' %>
<% end %>
<%= render "devise/shared/links" %> 
```

位置模型

```
class Location < ActiveRecord::Base
  has_many :users, :dependent => :destroy
  accepts_nested_attributes_for :users, :allow_destroy => true
  attr_accessible :lat, :long, :name, :street_address
  attr_accessible :user_attributes
end 
```

位置控制器

```
def new
    @location = Location.new
    @location.user.build
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @location }
    end
  end

  # GET /locations/1/edit
  def edit
    @location = Location.find(params[:id])
  end

  # POST /locations
  # POST /locations.json
  def create
    @location = @user.location.build(params[:location])
    respond_to do |format|
      if @location.save
        format.html { redirect_to @location, notice: 'Location was successfully created.' }
        format.json { render json: @location, status: :created, location: @location }
      else
        format.html { render action: "new" }
        format.json { render json: @location.errors, status: :unprocessable_entity }
      end
    end
  end 
```

用户模型

```
class User < ActiveRecord::Base
  belongs_to :location
  accepts_nested_attributes_for :location
  rolify
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :role_ids, :as => :admin
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :location, :location_id, :location_attributes
end 
```

用户控制器

```
class UsersController < ApplicationController
  before_filter :authenticate_user!

  def index
    authorize! :index, @user, :message => 'Not authorized as an administrator.'
    @users = User.all
  end

  def show
    @user = User.find(params[:id])
  end

  def update
    authorize! :update, @user, :message => 'Not authorized as an administrator.'
    @user = User.find(params[:id])
    if @user.update_attributes(params[:user], :as => :admin)
      redirect_to users_path, :notice => "User updated."
    else
      redirect_to users_path, :alert => "Unable to update user."
    end
  end

  def destroy
    authorize! :destroy, @user, :message => 'Not authorized as an administrator.'
    user = User.find(params[:id])
    unless user == current_user
      user.destroy
      redirect_to users_path, :notice => "User deleted."
    else
      redirect_to users_path, :notice => "Can't delete yourself."
    end
  end
end 
```

创建用户时没有错误，创建用户时只得到一个 location_id="nil" 。我可以访问该位置并创建了一个 location_id 但未链接到用户。关于如何将 location_id 保存给用户的任何想法？

我正在使用从 google 位置 api 自动完成返回的 json 填充位置信息，并分配给具有 name="" 的元素。当我手动输入位置信息时，似乎一切正常，但当从自动完成填充字段时失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:01:36.937

首先要注意的是，您不需要`accepts_nested_attributes_for`两个模型，只需要具有`has_many`关联的模型。此外，用户属性的位置模型中的复数形式似乎是错误的

```
class Location < ActiveRecord::Base
  has_many :users, :dependent => :destroy
  accepts_nested_attributes_for :users, :allow_destroy => true
  attr_accessible :lat, :long, :name, :street_address
  attr_accessible :users_attributes # <- This should be plural
end 
```

删除`accepts_nested_attributes_for`用户模型中的

```
class User < ActiveRecord::Base
  belongs_to :location
  accepts_nested_attributes_for :location # <- This should be removed
  rolify
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :role_ids, :as => :admin
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :location, :location_id # Also remove location_atributes
end 
```

另外，这条线

```
@location = @user.location.build(params[:location]) 
```

应该

```
@location = Location.new(params[:location) 
```

由于您的模型设置方式现在一个位置有一个用户，因此您不需要从用户那里建立一个位置。话虽如此，我建议您在用户拥有多个位置的相反方向创建关联，但这当然可能与您的功能相反，因此请谨慎对待:)。

[http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

# c# - 时间：2019-04-10 标签：c#using#ifDEBUG

> ID：14125723
> 
> 赞同：0
> 
> 时间：2013-01-02T16:41:53.413
> 
> 标签：c#

> **可能重复：**
> [#if Not Debug in c#?](https://stackoverflow.com/questions/7246401/if-not-debug-in-c)

我没有上传到服务器的权限，所以我无法测试#else 部分。我想知道这是否是根据是否处于调试（测试模式）或生产模式（#else 部分）有条件地选择要使用的驱动器号的理想方法

```
 #if (DEBUG)
     string driveLetter = "C:\\";
    #else
      string driveLetter = ConfigurationManager.AppSettings["ProdDrive"]; 
    #endif 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:47:43.410

作为替代方案，考虑因为您使用的是配置文件，只需根据调试与否修改配置文件。虽然调试版本通常不会部署在生产环境中，但它们可以用来追踪其他不可重现的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:45:01.777

是的你可以。

这是我从[这个 msdn 链接](http://msdn.microsoft.com/en-us/library/4y6tbswk.aspx)中提取的一些示例代码：

```
// preprocessor_if.cs
#define DEBUG 
#define MYTEST
using System;
public class MyClass 
{
    static void Main() 
    {
#if (DEBUG && !MYTEST)
        Console.WriteLine("DEBUG is defined");
#elif (!DEBUG && MYTEST)
        Console.WriteLine("MYTEST is defined");
#elif (DEBUG && MYTEST)
        Console.WriteLine("DEBUG and MYTEST are defined");
#else
        Console.WriteLine("DEBUG and MYTEST are not defined");
#endif
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:47:49.153

您可以添加此代码

```
#define ANOTHERVALUE 
```

注意：删除#define DEBUG

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T17:34:47.157

扩展@Mike.Beeler 的答案，我强烈建议您为此使用Slow Cheetah。Slow Cheetah 根据当前构建配置为您的项目提供任何 XML（包括 .config）文件的 XML 转换。

最常见的用途是自动设置正确的数据库连接字符串，但您也可以使用它来设置应用程序设置。

这是 Microsoft 员工提供的免费 VS 扩展

[http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5](http://visualstudiogallery.msdn.microsoft.com/69023d00-a4f9-4a34-a6cd-7e854ba318b5)

# c# - RFC_READ_TABLE 在查询很多列后抛出 Rfcabapexception

> ID：14125727
> 
> 赞同：2
> 
> 时间：2013-01-02T16:42:10.590
> 
> 标签：c#, exception, abap, saprfc, sap-dotnet-connector

在我工作的地方，我们有两个使用 SAP 的系统，一个使用 Delphi，另一个使用 c#。我正在实现 c# 并且两者都有同样的问题，当我使用 查询大量列`RFC_READ_TABLE`时，根据表（通常为 60+），它返回一个没有描述和内部异常的 Rfcabapexception，只是一个标题。是什么导致了这个异常，我能做些什么来防止它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T09:55:34.880

功能模块`RFC_READ_TABLE`必须将数据转换为通用格式，因为“真正的通用类型”喜欢`DATA`或`STANDARD TABLE`不支持 RFC 通信。因此，输出以一系列表格行的形式传输，每行都是一个字符字段，最长可达 512 个字符。

![在此处输入图像描述](../Images/40dc5c8cd07ee1647881bb0100cb7b91.png)

这有几个后果：

*   如果您请求的所有字段的总大小超过 512 个字符，您将得到一个简短的转储（检查事务`ST22`）和您提到的异常。
*   如果您尝试读取无法转换为字符字段的字段和/或确实具有**固定长度 (!)**字符表示，则会发生不好的事情。最有可能的是，`RFC_READ_TABLE`将在您的输出数据中出现一个简短的转储或 barf 中止。

您可以通过垂直切片表并按顺序读取列组来绕过第一个问题。请注意，`RFC_READ_TABLE`当再次将结果拼接在一起时，不能保证始终以相同的顺序返回数据。另请注意，您可能会遇到违反事务隔离的情况，具体取决于您读取的数据更改的频率。

# php - 在提交时回显 php div

> ID：14125729
> 
> 赞同：0
> 
> 时间：2013-01-02T16:42:10.983
> 
> 标签：php, css, forms, echo

**更新**在联系表单上提交信息后，我试图回显一个 div。我的网站在这里：[http ://tinyurl.com/bdmhv7u](http://tinyurl.com/bdmhv7u)

当您单击 rsvp 并输入信息时，我有一个想要显示的图形。使用此代码，它显示，但只是瞬间。任何想法表示赞赏。

```
<?php
        ob_start();
        session_start();
        if( isset($_POST['submit'])) {
            include("process.php");
            unset($_POST['submit']);
     } else  {

     }
        ob_flush();
    ?>

<div id="gotit">
<div id="gotitimg">
<img src="images/gotit.png" width="100" height="100">
</div>
</div>
<script type="text/javascript" language="javascript"> 
$("#submit").click(function (event) {  
  $("#gotit").fadeIn(1000, function() {
  });
});
</script> 

#gotit {
    position:fixed;
    z-index:999;
    margin-top:400px;
    display:none;
    width:100%;
}

#gotitimg {
    float:right;
    width:100px;
    height:100px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:49:24.253

您没有提供代码，但您可以尝试为您的 div 添加宽度和高度：示例

```
 #gotit {
  float:right;
  width: 125px;
  height: 125px; 
  background-image:url(../gotit.png);
  position:fixed;
  z-index:20;
  margin-top:50px;
  } 
```

# sql - 通过 count(*) 与 DBA_TABLES 中的 NUM_ROWS 计算表的 Oracle 行数

> ID：14125731
> 
> 赞同：32
> 
> 时间：2013-01-02T16:42:15.783
> 
> 标签：sql, oracle, count

看起来 count(*) 比 NUM_ROWS 慢。这方面的专家能否对此有所了解。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-01-02T17:47:08.370

根据[文档](http://docs.oracle.com/cd/E11882_01/server.112/e25513/statviews_2117.htm#REFRN20286)NUM_ROWS 是*“表中的行数”*，所以我可以看到这可能会造成混淆。然而，这两种方法之间有一个主要区别。

此查询从系统视图中选择 MY_TABLE 中的行数。这是 Oracle 之前收集和存储的数据。

```
select num_rows from all_tables where table_name = 'MY_TABLE' 
```

此查询计算 MY_TABLE 中的当前行数

```
select count(*) from my_table 
```

根据定义，它们是不同的数据。关于 NUM_ROWS，您还需要另外两条信息。

1.  在文档中，列名有一个星号，这导致了这个注释：

    > 仅当您使用 ANALYZE 语句或 DBMS_STATS 包收集有关表的统计信息时，才会填充标有星号 (*) 的列。

    这意味着除非您已收集有关表的统计信息，否则该列将没有任何数据。

2.  使用默认值或 100% 估计在 11g+ 中收集的统计`estimate_percent`信息将返回该时间点的准确数字。但在 11g 之前收集的统计数据，或者自定义`estimate_percent`小于 100% 的统计数据使用动态采样，可能不正确。如果你收集到 99.999% 可能会遗漏一行，这反过来意味着你得到的答案是不正确的。

如果您的表*从未*更新，那么当然可以使用 ALL_TABLES.NUM_ROWS 来找出表中的行数。**然而**，这是一个很大的问题，如果任何进程从您的表中插入或删除行，它充其量只是一个很好的近似值，并且取决于您的数据库是否自动收集统计数据可能是非常错误的。

一般来说，实际计算表中的行数总是比依赖系统表更好。

# xml - xsl 排序奇怪的行为

> ID：14125734
> 
> 赞同：0
> 
> 时间：2013-01-02T16:42:31.870
> 
> 标签：xml, sorting, xslt

在尝试对输入 XML 进行排序时，我遇到了一种奇怪的行为：

我的 XSL：

```
<xsl:stylesheet version="2.0" 
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:output method="xml" indent="yes"/>
<!--  <xsl:strip-space elements="*"/>  -->

 <xsl:template match="/*">
  <xsl:copy>
    <xsl:apply-templates select="name">
     <xsl:sort select="@rank" data-type="number"/>   
     <xsl:sort collation = "http://www.w3.org/2005/xpath-functions/collation/codepoint"/>    
    </xsl:apply-templates>
  </xsl:copy>
 </xsl:template>

 <xsl:template match="name">
  <name rank="{@rank}">
    <xsl:copy-of select="text()"/>
    <xsl:apply-templates select="name">
    <xsl:sort select="@rank" data-type="number"/>    
    <xsl:sort collation = "http://www.w3.org/2005/xpath-functions/collation/codepoint" />    
    </xsl:apply-templates>
  </name>
 </xsl:template>
</xsl:stylesheet> 
```

当我的输入 XML 是以下形式时：

```
<?xml version="1.0" encoding="UTF-8"?>
<Sources>
<name rank="">Continents / Regions (energy)</name>
<name rank="">Continents / Regions</name>
</Sources> 
```

它被正确排序为：

```
<?xml version="1.0" encoding="UTF-8"?>
    <Sources>
    <name rank="">Continents / Regions</name>
    <name rank="">Continents / Regions (energy)</name>    
    </Sources> 
```

但是，当输入为：

```
<?xml version="1.0" encoding="UTF-8"?>
<Sources>
<name rank="">Continents / Regions (energy)
  <name rank="">ABC</name>
</name>
<name rank="">Continents / Regions
  <name rank="">ABC</name>
</name>
</Sources> 
```

输出不正确：

```
<?xml version="1.0" encoding="UTF-8"?>
<Sources>
<name rank="">Continents / Regions (energy)
  <name rank="">ABC</name>
</name>
<name rank="">Continents / Regions
  <name rank="">ABC</name>
</name>
</Sources> 
```

如果有人能给我指点我应该看什么，我将不胜感激。提前致谢！

编辑：正在使用的 XSLT 处理器是 Saxon HE 9.4 。这是我的 Java 代码。

```
tFactory = TransformerFactory.newInstance("net.sf.saxon.TransformerFactoryImpl",null);

Transformer transformer = tFactory.newTransformer(new StreamSource(RCSTestDriver.TestDataPath + "/transform.xslt")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:18:12.983

When I try to reproduce the problem with the input document being

```
<?xml version="1.0" encoding="UTF-8"?>
<Sources>
<name>Continents / Regions (energy)
  <name>ABC</name>
</name>
<name>Continents / Regions
  <name>ABC</name>
</name>
</Sources> 
```

the stylesheet as posted and the XSLT 2.0 processor Saxon 9.4 HE run from the command line I can't reproduce it, instead I get the output

```
<?xml version="1.0" encoding="UTF-8"?>
<Sources>
   <name rank="">Continents / Regions

<name rank="">ABC</name>
   </name>
   <name rank="">Continents / Regions (energy)

<name rank="">ABC</name>
   </name>
</Sources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T18:25:09.747

这取决于有多少空白（这很难从您的帖子中看出）。但是字符串值“Continents / Regions ABC”当然应该在“Continents / Regions（energy）ABC”之前，因为“（”在“A”之前。也许您忽略了“ABC”是排序键的一部分？

# php - 如何知道IP是否是外部的？

> ID：14125735
> 
> 赞同：5
> 
> 时间：2013-01-02T16:42:38.077
> 
> 标签：php, symfony, ip

我希望检测地址 IP 是本地的还是外部的。在 Web 应用程序中，我的客户希望通过本地网络上的 samba 直接访问文件，如果您不在网络中，则通过下载链接访问文件。

我可能只是检查我的 IP 是否为，但如果我的客户切换到 1或 IPV6 `172.30.*.*`，它将不再起作用。`0.*.*.*`

我可能会使用配置变量，因此客户可以随意更改它。我希望它是自动的，没有配置变量。

你将如何进行？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T16:51:34.040

根据需要更新 IP 范围列表。我有一段时间没有更新这个列表，但它应该有最多。抱歉，我从未向它添加 IPv6 支持。

```
function reserved_ip($ip)
{
    $reserved_ips = array( // not an exhaustive list
    '167772160'  => 184549375,  /*    10.0.0.0 -  10.255.255.255 */
    '3232235520' => 3232301055, /* 192.168.0.0 - 192.168.255.255 */
    '2130706432' => 2147483647, /*   127.0.0.0 - 127.255.255.255 */
    '2851995648' => 2852061183, /* 169.254.0.0 - 169.254.255.255 */
    '2886729728' => 2887778303, /*  172.16.0.0 -  172.31.255.255 */
    '3758096384' => 4026531839, /*   224.0.0.0 - 239.255.255.255 */
    );

    $ip_long = sprintf('%u', ip2long($ip));

    foreach ($reserved_ips as $ip_start => $ip_end)
    {
        if (($ip_long >= $ip_start) && ($ip_long <= $ip_end))
        {
            return TRUE;
        }
    }
    return FALSE;
}

var_dump(reserved_ip('127.0.0.1')); // reserved (localhost)
var_dump(reserved_ip('74.125.140.101')); // not reserved (Google) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T17:06:59.450

不幸的是，没有简单的方法可以确定地确定这一点。请参阅我的评论以获取一个有趣的示例。

在 IPv4 世界中，您可以尝试这样做：确定服务器的外部 IP 地址（例如使用[http://ip-address.domaintools.com/myip.xml](http://ip-address.domaintools.com/myip.xml)）并将其与客户端的套接字远程地址（`$_SERVER['REMOTE_ADDR']`）进行比较。如果它们是相同的，那么你在同一个网络上运行，如果它们不同，那么它是一个不同的网络。

在 IPv6 世界（正确部署的网络）中，没有专用网络之类的东西，任何地方的每个设备都有自己的公共 IP 地址。在这种情况下，确定您是否在本地的唯一方法是维护本地设备的完整列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:52:51.010

我假设您将内部定义为 0 个路由器跳数？

使用以下解决方案：

[如何在 PHP(CLI) 中找到我的服务器的 IP 地址](https://stackoverflow.com/questions/1814611/how-do-i-find-my-servers-ip-address-in-phpcli)

动态确定服务器的 IP 地址和网络掩码值。然后你应该能够确定客户端是否是远程的。

如果内部网络包括路由子网（1 个或多个路由器跳），我无论如何都无法使检测动态化，您需要静态定义内部 IP 范围。

# ms-access - 在 Access 2010 中按表单查询多个字段

> ID：14125738
> 
> 赞同：0
> 
> 时间：2013-01-02T16:42:54.707
> 
> 标签：ms-access, ms-access-2007

我想创建一个通过表单获取字段参数的查询。为此，我创建了一个带有组合框和下拉选项的表单以从中选择值，这会在我已将其默认值设置为 null 的各个不可见文本字段中填充一个文本值。现在在我的查询中，我将列的条件设为 iif(isNull([Forms]![Conditions]![text_on_form]), [column_in_table], [Forms]![Conditions]![text_on_form])。我已经为 where 子句来自表单的所有列执行了此操作。我试过运行这个。结果似乎是随机的。它适用于三列，但是当我使用它时，它给了我空的结果集。谁能告诉我我做错了什么？或者是否有更好的方法在 Access 中实现按表单查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:18:55.503

听起来您正在尝试创建动态 SQL。这是我通常更喜欢的vba中的方法：

```
Dim SQL As String

SQL = "SELECT tblName.* From tblName WHERE (1=1)"

If Not IsNull(Me.combo1) Then
    SQL = SQL & " And ([Field1] Like ""*" & Me.combo1 & "*"")" ' I am using like statements here, but that is because this is a search tool.
End If

If Not IsNull(Me.combo2) Then
    SQL = SQL & " And ([Feild2] Like ""*" & Me.combo2 & "*"")"
End If

Docmd.RunSQL SQL

End Sub 
```

基本上，只有在用户将值放入您的文本框/组合框或其他任何内容时，才添加到 SQL 语句中。“Where (1=1)”是为了说明所有字段都为空的情况。

使用这个概念来创建您的 SQL 语句。避免使用不可见的文本框来存储数据，这通常意味着你做错了什么并且会得到不同的结果（这个论坛上的其他人可以比我更好地解释为什么会这样）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-12-06T21:52:46.863

只需使用 Like 运算符。将它放在查询中的条件字段中`Like "\*" & Forms![Form_Name]![Form_Field] & "\*"`——这告诉它如果字段为空白（或空）并匹配您在字段中的任何内容，则获取任何内容。这可能不是你想要的。应该注意的是，它将返回包含文本字符串的任何内容。例如：如果您键入“the”，它将返回系绳、这些、论文、温度计（其中包含“the”一词的任何内容。它最适用于可以更准确匹配的多字或更长的字符串，但它适用于一个搜索查询，因为通常有一组人眼在寻找结果，错误的结果并不是一个大问题。

# postgresql - 如何将对象（表或列）名称传递到存储过程

> ID：14125739
> 
> 赞同：0
> 
> 时间：2013-01-02T16:43:16.740
> 
> 标签：postgresql, stored-procedures, sql-update, pgadmin

至于规范，它是PostgreSQL 9.2，数据库通过PgAdmin3，表格格式为shapefile。如果有任何必要的额外细节，我将编辑并提供。

我本质上想根据其他一些列中的字符串值是否为空来更新一列整数值中的整数值。我最终想移植我的存储函数以使用 jdbc 在 java 应用程序中执行，但我首先想在 pgadmin3 中测试我的函数。我对 postgresql 的经验很少，并且对语法有点模糊。

因此，到目前为止，我对需要和要输入的参数有一定的了解：name、argmode、argname、argtype、column_name 和 lang_name。

我知道，如果我不返回任何东西，我可以将 RETURNS void 包含为 $$ 或根本不包含 return 语句。我认为我不需要结果集，我只想替换列中的整数值。我不确定如何引用我需要的表才能传递我要处理的列。

这是我到目前为止拼凑的代码：

```
CREATE [OR REPLACE] FUNCTION handle_malformed([[VARIADIC][]
table_name.column_name, table_name.column_name, table_name.column_name, table_name.column_name, table_name.column_name, table_name.column_name, table_name.column_name, table_name.column_name])

BEGIN
LOOP
IF NAME_1 IS NULL THEN 
IF LEVEL_DEPT != 0 THEN
    UPDATE AdminBoundaries SET \"LEVEL_DEPT\" = 0;
ELSE IF NAME_2 IS NULL THEN 
    IF LEVEL_DEPT != 1 THEN
        UPDATE AdminBoundaries SET \"LEVEL_DEPT\" = 1;
ELSE IF NAME_3 IS NULL THEN 
    IF LEVEL_DEPT != 2 THEN
        UPDATE AdminBoundaries SET \"LEVEL_DEPT\" = 2;
ELSE IF NAME_4 IS NULL THEN 
    IF LEVEL_DEPT != 3 THEN
        UPDATE AdminBoundaries SET \"LEVEL_DEPT\" = 3;
ELSE IF NAME_5 IS NULL THEN 
    IF LEVEL_DEPT != 4 THEN
        UPDATE AdminBoundaries SET \"LEVEL_DEPT\" = 4;
ELSE
    IF LEVEL_DEPT !=5 THEN 
        UPDATE AdminBoundaries SET \"LEVEL_DEPT\" = 5;
EXCEPTION 
END LOOP;
END PROCEDURE;
$$ LANGUAGE plpgsql;

update handle_malformed(AdminBoundaries.NAME_5, AdminBoundaries.NAME_4, AdminBoundaries.NAME_3, 
AdminBoundaries.NAME_2, AdminBoundaries.NAME_1, AdminBoundaries.NAME_0, AdminBoundaries.WIKI_URL, AdminBoundaries.LEVEL_DEPT) 
```

我放入的逻辑是我放入循环和结束循环之间的逻辑是我想要完成的逻辑。

我的具体问题是，如何在 SQL 中使用参数中的列名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T08:53:25.700

根据评论，我编辑了问题以包含一个问题....据我了解，您希望在查询中使用参数中的值。为此，请使用 EXECUTE 并将查询组合为字符串。请注意，您不能参数化此类标识符，因此您必须将它们连接起来，并用于`quote_ident()`防止 in-stored-proc sql 注入。

所以而不是：

```
 UPDATE AdminBoundaries SET \"LEVEL_DEPT\" = 1; 
```

利用：

```
 EXECUTE $e$ UPDATE AdminBoundaries SET $e$ || quote_ident(LEVEL_DEPT) || $e$ = 1 $e$; 
```

您也可以使用 execute 来处理动态检查：

```
 EXECUTE INTO my_bool $e$ SELECT a.$e$ || quote_ident(level_dept) $e$ is not null $e$; 
```

我认为这可以根据评论回答您的问题。如果没有，请随时澄清。

# delphi - TSaveTextFileDialog 和 Vcl 样式

> ID：14125741
> 
> 赞同：5
> 
> 时间：2013-01-02T16:43:33.070
> 
> 标签：delphi, delphi-xe3, vcl-styles

我在 Delphi XE3 中使用[TSaveTextFileDialog](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ExtDlgs.TSaveTextFileDialog)组件，但是当启用 Vcl 样式时，*编码*组合框是使用当前的 vcl 样式绘制的。

![在此处输入图像描述](../Images/f2170973cce4b2158ae175538929d35b.png)

我该如何解决这个问题，我的意思是禁用组合框的 vcl 样式？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-02T17:25:02.123

[TSaveTextFileDialog](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.ExtDlgs.TSaveTextFileDialog)组件的父类（TOpenTextFileDialog）添加了一组Vcl 组件来实现`Encodings`和`EncodingIndex`属性，您可以使用该属性禁用这些Vcl 控件上的Vcl 样式[`StyleElements`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Controls.TControl.StyleElements)。不幸的是，这些组件是私有的，因此您需要一点技巧才能获得访问权限并禁用 Vcl 样式。

在这里，您有两个选择。

# 使用类助手。

您可以引入一个辅助函数来获取包含对话框的 Vcl 控件的 Panel 组件。

```
type
 TOpenTextFileDialogHelper=class helper for TOpenTextFileDialog
  function GetPanel : TPanel;
 end;

function TOpenTextFileDialogHelper.GetPanel: TPanel;
begin
  Result:=Self.FPanel;
end; 
```

然后您可以编写一个方法来禁用 Vcl 样式，如下所示：

```
procedure DisableVclStyles(const Control : TControl);
var
  i : Integer;
begin
  if Control=nil then
    Exit;
   Control.StyleElements:=[];

  if Control is TWinControl then
    for i := 0 to TWinControl(Control).ControlCount-1 do
      DisableVclStyles(TWinControl(Control).Controls[i]);
end; 
```

最后以这种方式使用

```
 DisableVclStyles(SaveTextFileDialog1.GetPanel);
  SaveTextFileDialog1.Execute; 
```

# RTTI

另一种选择是使用 RTTI 访问私有 Vcl 组件。

```
var
  LRttiContext : TRttiContext;
  LRttiField :TRttiField;
begin
  LRttiContext:=TRttiContext.Create;
  for LRttiField in LRttiContext.GetType(SaveTextFileDialog1.ClassType).GetFields do
   if LRttiField.FieldType.IsInstance and LRttiField.FieldType.AsInstance.MetaclassType.ClassNameIs('TPanel') then
    DisableVclStyles(TPanel(LRttiField.GetValue(SaveTextFileDialog1).AsObject));

  SaveTextFileDialog1.Execute;
end; 
```

# php - 单个模型/视图中的 Joomla 多个功能

> ID：14125743
> 
> 赞同：0
> 
> 时间：2013-01-02T16:43:46.630
> 
> 标签：php, mysql, joomla

我正在尝试创建一个下拉列表，其中填充了`<select>`从`DISTINCT`参数中提取的选项。代码如下所示：

```
function cityData() {
    $db =& JFactory::getDBO();
    $query = "SELECT DISTINCT MSTCITY FROM " . $db->nameQuote('#__mls') . " ORDER BY MSTCITY;";
    $db->setQuery($query);
    $tbl = $db->loadObjectList();
    echo $tbl;
} 
```

现在，我有两个视图：一个是用于 AJAX 调用的 RAW，另一个是默认视图。我认为最简单的方法是只使用默认视图并在 PHP 中执行，因为默认视图并没有真正被使用太多。所以我添加了一个功能：

```
function dropList($tpl = null){
    $model = &$this->getModel();
    $array = $model->cityData();
    $this->assignRef('array', $array );
    parent::display($tpl);
} 
```

然后在页面中调用

```
<?php 
    $thing = $this->array;
    echo $thing;
?> 
```

没有为 显示任何内容`echo $thing;`。过去，当我使用 PHP 而不是 AJAX 来构建内容时，效果很好。我不知道它是否正在使用`loadObjectList()`它没有给我任何东西或什么。我知道 mySQL 查询有效，因为它已经在 cmd 中进行了测试，我得到了我期望的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T18:03:42.537

为了调试和查看数组值，您需要使用 print_r。在您的情况下，将 default.php 文件编辑为

```
<?php 
$thing = $this->array;
print_r($thing);
?> 
```

您也可以使用 var_dump

# java - 关于存储多个值

> ID：14125749
> 
> 赞同：0
> 
> 时间：2013-01-02T16:43:51.183
> 
> 标签：java

我已经在下面制作了哈希表，但现在我正在尝试使用相同的键存储多个值，但我无法做到这一点，请告知如何实现这一点，然后如何迭代 overit 以显示多个键附加的值..

```
Hashtable companies = new Hashtable();
// Java Hashtable example to put object into Hashtable
// put(key, value) is used to insert object into map
companies.put("Google", "United States");
companies.put("Nokia", "Finland");
companies.put("Sony", "Japan"); 
```

我想达到..

```
Hashtable companies = new Hashtable();
// Java Hashtable example to put object into Hashtable
// put(key, value) is used to insert object into map
companies.put("Google", "United States","France");
companies.put("Nokia", "Finland","Japan");
companies.put("Sony", "Japan", "indonesia"); 
```

各位请指教..!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:45:13.743

您可以使用[guava mutlimap](http://guava-libraries.googlecode.com/svn/tags/release03/javadoc/com/google/common/collect/Multimap.html)（或）将您的值更改为 List 实现之一，而不是`String`使用 HashMap 而不是 HashTable。

例子：

```
Map<String, List<String>> = new HashMap<String, List<String>>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:45:49.640

您可以使用列表地图...

```
Map<String, List<String>> companies = new Hashtable<String, List<String>>();
companies.put("Google", Arrays.asList("United States","France")); //etc... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:45:57.343

不要使用哈希表，使用哈希图，您可以将结构更改为：

```
Map<String, List<String>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T16:46:14.807

*   不要使用`Hashtable`，使用`HashMap`.
*   如果你使用 Guava（你应该，真的 ;)），使用`Multimap`.
*   如果不这样做，请使用`HashTable<String, List<String>>`; 但是，您将需要一个包装器类，以便`List`在添加到该列表之前创建密钥。

# sockets - UDP Talker 在 sendto() 调用中给出“ai_flags 的错误值”

> ID：14125750
> 
> 赞同：1
> 
> 时间：2013-01-02T16:43:52.240
> 
> 标签：sockets, udp, sendto

我被我的 UDP talker 应用程序困住了。目前的目标是初始化服务器，注册一个客户端，然后继续向该客户端发送一些东西。我已经通过 Beej 的网络指南工作并编写了以下库实现：

这初始化服务器

```
int init_udp_server(const char *port_string){

  /** Check the input data **/
  if(port_string == NULL)
    port_string = DEFAULT_PORT;

  /** Get the information for the server **/
  memset(&addrinfo_hints, 0, sizeof addrinfo_hints);
  /* Use either protocol (v4, v6) */
  addrinfo_hints.ai_family = AF_UNSPEC;
  /* Use UDP socket type */
  addrinfo_hints.ai_socktype = SOCK_DGRAM;
  /* Use system IP */
  addrinfo_hints.ai_flags = AI_PASSIVE;

  if( (ret = getaddrinfo(NULL, port_string, &addrinfo_hints, &addrinfo_server)) 
      != 0 ){
    printf("Server:getaddrinfo: %s\n", gai_strerror(ret));  
    return -1;
  }

  /** Loop through the list returned by getaddrinfo and get socket **/
  for( addrinfo_queue = addrinfo_server; addrinfo_queue != NULL; 
      addrinfo_queue = addrinfo_queue->ai_next){
    if((sockfd = socket(addrinfo_queue->ai_family,
            addrinfo_queue->ai_socktype, addrinfo_queue->ai_protocol)) == -1){
      error("Server: get socket failed");
      continue;
    }
    if(bind(sockfd, addrinfo_queue->ai_addr, addrinfo_queue->ai_addrlen)
        == -1){
      close(sockfd);
      error("Server: Bind to socket error");
      continue;
    }
    break;

  }
  /* If we got to addrinfo_queue == NULL, we did not get a valid socket */
  if(addrinfo_queue == NULL){
    error("Server: Could not bind a socket");
    return -1;
  }
  /* We do not need the addrinfo_server anymore */
  freeaddrinfo(addrinfo_server);
  return 0;
} 
```

这注册了客户端

```
int udp_server_setup_client(const char *client_addr, const char *port_string, int     client_nr){

  /** Check the input data **/
  if(port_string == NULL)
    port_string = DEFAULT_PORT;
  if(client_addr == NULL){
    error("No valid client list");
    return -1;
  }
  if(client_nr < 0 || client_nr > 7){
    error("No valid client Nr.");
    return -1;
  } 

  memset(&addrinfo_hints, 0, sizeof addrinfo_hints);
  /* Use either protocol (v4, v6) */
  addrinfo_hints.ai_family = AF_UNSPEC;
  /* Use UDP socket type */
  addrinfo_hints.ai_socktype = SOCK_DGRAM;

  /* Get the information for the client */
  if( (ret = getaddrinfo( client_addr, port_string, &addrinfo_hints,
          &current)) != 0 ){
    printf("Client:getaddrinfo: %s\n", gai_strerror(ret));  
    return -1;
  }
  else{
    /* We read out the IP, kind of a nice check to see wheter all went fine */
    char ip4[INET_ADDRSTRLEN];
    struct sockaddr_in *sa = (struct sockaddr_in*) current->ai_addr;
    inet_ntop(AF_INET, &(sa->sin_addr),ip4, INET_ADDRSTRLEN);
    printf("Clients address: %s\n",ip4);
    addrinfo_clients[client_nr] = current;
  }
  return 0;
} 
```

最后这是为了写作

```
int udp_server_write(const char *buffer, int buffer_size, int client_nr){
  /* Sanity check of the input */
  if(client_nr > (MAX_NR_CLIENTS - 1) || client_nr < 0){
    error("Not a valid client");
    return -1;
  }
  if(buffer == NULL){
    error("Not a valid buffer address");
    return -1;
  }
  /* Just so we type less */
  current = addrinfo_clients[client_nr];

  socklen = sizeof current->ai_addr; 
  if((ret = sendto(sockfd, (void*)buffer, buffer_size, 0,
        (sockaddr*)current->ai_addr, socklen)) == -1){
    printf("Failed to send message to client %i\n", client_nr);
    printf("Error Code: %s\n",gai_strerror(ret)); 
    return -1;    
    }
  else if(ret < buffer_size){
    printf("Wrote only %i of %i bytes\n", ret, buffer_size);
    return -1;
  }
  return ret;
} 
```

我这样调用函数

```
init_udp_server("3334"); 

udp_server_setup_client("192.168.1.5", "3334", 0);

udp_server_write(send_buf, 256, 0); 
```

一旦调用sendto()就报错：Failed to send message to client 0 Error Code: Bad value for ai_flags 我用gdb查了一下，发现addrinfo结构体填写正确，客户端地址有效. 有人知道在哪里看吗？我的想法已经不多了...

谢谢，文茨勒恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:10:58.687

调用`sendto()`时，最后一个参数被设置为`sizeof current->ai_addr`，这是错误的。`current->ai_addr`被定义为一个`sockaddr*`指针，所以`sizeof current->ai_addr`在 32 位系统上总是返回 4，在 64 位系统上总是返回 8。碰巧 IPv4 地址的大小为 4 个字节，因此`sizeof current->ai_addr`仅适用于 32 位系统上的 IPv4 地址，但对于 32 位系统上的 IPv6 地址和 64 位系统上的所有地址总是会失败。您需要使用`current->ai_addrlen`而不是`sizeof`.

此外，将 -1 传递给`gai_strerror()`无效。它希望您传入一个真实的错误代码，例如`getaddrinfo()`and的返回值`getnameinfo()`。 `sendto()`不返回实际的错误代码。当它失败时，您必须`WSAGetLastError()`在 Windows 或`errno`其他系统上使用才能获取实际的错误代码。

试试这个：

```
if ((ret = sendto(sockfd, (char*)buffer, buffer_size, 0, (sockaddr*)current->ai_addr, current->ai_addrlen)) == -1)
{
    #ifdef _WIN32
    ret = WSAGetLastError();
    #else
    ret = errno;
    #endif

    printf("Failed to send message to client %i\n", client_nr);
    printf("Error Code: (%d) %s\n", ret, gai_strerror(ret)); 
    return -1;    
} 
```

# objective-c - Objective-C：指向不同时间不同类的指针

> ID：14125751
> 
> 赞同：0
> 
> 时间：2013-01-02T16:43:56.393
> 
> 标签：objective-c, ios, class, pointers

我对Objective-C并没有真正的经验。这是我遇到的一个问题。

当我想为类的特定实例定义一个指针时，我可以

```
NSString* foo; 
```

但是有可能为这样的类的实例定义指针吗？

```
x* hotdog;  //"x" is the type of pointer hotdog is

hotdog = NSString;  //now points to NSString

hotdog* foo;  //an instance of NSString is created

hotdog = UIView;  //now points to UIView

hotdog* foo;  //an instance of UIView is created 
```

如何定义类指针`hotdog`？（我应该用什么代替`x`？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:55:17.180

> 我应该用什么代替`x`？

您应该替换`x`为您计划与此指针一起使用的类的最具体的共同祖先的名称。在您的示例中，这将是`NSObject`，因为两者都`NSString`继承`UIView`了它，并且没有其他共同的祖先。在最坏的情况下，共同祖先是`id`。

一般来说，在大多数情况下应该避免这样的技巧，因为将指针重用于*真正*不同的东西不利于可读性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:47:57.777

如果您想要一个指向在编译时未知的类型的对象的指针（类似于`dynamic`C#），请使用`id`：

```
id hotdog;
hotdog = [[NSString alloc] init];
hotdog = [[NSArray alloc] init]; 
```

仅在您真正需要时才这样做。如果你到处使用它，你的代码很容易变得一团糟，因为你会忘记变量的类型。

* * *

起初我误解了你的问题。我会在这里留下我的旧答案，以防将来的访问者需要它。

指向类的指针的类型是`Class`，并且要获取该类型的对象，请使用`+[NSObject class]`.

```
Class hotdog = [NSString class]; // now points to NSString
NSString *myString = [[hotdog alloc] init]; // create instance of NSString

hotdog = [NSArray class]; // now points to NSArray
NSArray *myArray = [[hotdog alloc] init]; // create instance of NSArray 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:47:35.020

1.  如果您正在处理实例类，则指向该类本身的指针就是`self`.
2.  如果您正在处理 a ，则`class pointer`可以只使用该`id`类型，因为它是泛型类型。`isKindOfClass`如果要调用此类的某些方法，请使用该方法确保您正在处理的对象是预期的类型。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T16:55:14.863

> 但是有可能为这样的类的实例定义指针吗？

我想您要的是等效的 C++ 模板。

你做不到也不需要它，只需要使用 id 类型：

```
id foo= @"some text"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T16:57:52.080

您可以使用`NSObject*`或`id`作为指针类型。 `NSObject*`将接受 NSObject 的任何子类，同时`id`也将接受其他 Objective-C 对象。

请注意，为避免编译器警告消息，您必须在应用任何类型的取消引用操作（NSObject 的方法除外）之前将指针类型转换回（可能已知的）实际类型。

您可以，以确保您具有预期的对象类型，`isKindOfClass`用于检查类型：

```
if ([genericPointer isKindOfClass:[NSArray class]]) {
    NSString* arrayElement = [(NSArray)genericPointer objectAtIndex:x];
} 
```

# perl - 如果您不关闭 Perl 中的文件句柄会发生什么？

> ID：14125753
> 
> 赞同：9
> 
> 时间：2013-01-02T16:44:13.553
> 
> 标签：perl, stdout, stderr, read-write, filehandler

如果我正在编写一个用 STDOUT 的副本覆盖 STDERR 的 Perl 脚本，但我从不恢复文件句柄，那么在脚本执行结束时会发生什么？我找不到任何警告实际发生或未发生的事情。

我可能被误导了，但感谢您的耐心等待。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T16:51:46.353

当一个进程退出时，内核会恢复所有使用的资源。这包括所有简单关闭的文件描述符。如果存在应用程序级缓冲区，则该缓冲区中的数据可能尚未写入内核，但否则在退出之前保持文件描述符打开是没有风险的。

如果您的 Perl 脚本以使用`exec`启动另一个进程结束，则该进程将继承所有文件描述符（除了在 exec 上标记为关闭的那些）。

# java - Java EE 触发事件会创建一个新实例

> ID：14125757
> 
> 赞同：0
> 
> 时间：2013-01-02T16:44:30.793
> 
> 标签：java, jakarta-ee, observer-pattern, managed-bean, session-scope

我有两个 ManagedBeans。

关于我的问题，他们执行以下操作：

第一的：

```
@ManagedBean
public class Provider {

    private Event<ProvideEvent> event;

    private static boolean handling = false;
    public provide(@Observes ConsumeEvent consume){
      if(!handling){
        //provide some stuff
        event.fire(new ProvideEvent(ProvidedStuff stuff);
      }
    }
} 
```

第二：

```
@ManagedBean
@SessionScoped
public class Consumer {

    private Event<ConsumeEvent> event;

    @PostConstruct
    public void initialize(){
      event.fire(new ConsumeEvent());  
    }

    private static boolean handling = false;
    public consume(@Observes ProvideEvent providedStuff){
      if(!handling){
        //use the provided stuff
      }
    }
} 
```

这发生在网站被调用时： 1\. 消费者被实例化。2\. 消费者触发事件。3\. Provider 被实例化。4\. 调用provide()。5\. 实例化一个新的消费者 6\. 调用 consume()。

如您所见，我不得不使用布尔“处理”来防止应用程序无限循环。

为什么容器不使用实例化的 SessionScoped ManagedBean？我认为 SessionScoped ManagedBeans 就像 Session 的 Singleton？我想我可以通过以下方式解决这个问题： A：对更改的属性使用静态变量。B：手动实现观察者模式。

但是这里必须有一个更简单的方法！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:09:14.143

我相信问题可能是您`@PostConstruct`以`Customer`.

从javadocs：

> 该方法必须在类投入使用之前调用。

据我了解，这会导致竞争状况。可能在您的实例完成执行并且容器将其投入服务`Provider`之前触发第二个事件。因此，它不会收到该事件。不过，我对 Java EE 太缺乏经验，无法就如何防止这种竞争状况给出好的建议。我可能会以一个丑陋的人作为交汇点来解决它。`Customer``initialize()``SynchronousQueue`

附加信息：`@Observes`如果不存在（正在服务中），则默认创建事件接收器的新实例。这就是创建另一个客户的原因。用于`@Observes(notifyObserver = Reception.IF_EXISTS)`仅通知正在服务的现有实例。

> 我认为 SessionScoped ManagedBeans 就像 Session 的 Singleton？

不，它只是定义了对象的生命周期。它并没有真正强制执行会话单例行为。但是，如果在触发第二个事件时它正在服务中，则容器可能更喜欢现有实例。

# ffmpeg - 需要 JavaCV FFmpegFrameRecorder 属性说明

> ID：14125758
> 
> 赞同：10
> 
> 时间：2013-01-02T16:44:32.233
> 
> 标签：ffmpeg, javacv

我正在使用`FFmpegFrameRecorder`从我的网络摄像头获取视频输入并将其录制到视频文件中。问题是我正在使用我找到的几个不同的演示源代码构建我的应用程序，并且我使用了一些属性，其中一些我并不完全清楚。

首先，这是我的代码片段：

```
FFmpegFrameRecorder recorder = new FFmpegFrameRecorder(FILENAME,  grabber.getImageWidth(),grabber.getImageHeight());

        recorder.setVideoCodec(13);
        recorder.setFormat("mp4");
        recorder.setPixelFormat(avutil.PIX_FMT_YUV420P);
        recorder.setFrameRate(30);
        recorder.setVideoBitrate(10 * 1024 * 1024);

        recorder.start(); 
```

*   **setVideoCodec(13)** - 这是什么意思`(13)`我如何理解任何数字背后的实际编解码器？
*   **setPixelFormat** - 只是得到这个，不知道它一般在做什么
*   **setFrameRate(30)** - 我认为这应该很清楚，但我们选择帧速率背后的逻辑仍然是什么（不是越高越好吗？）
*   **setVideoBitrate(10*1024*1024)** - 几乎不知道这是做什么的，这些数字背后的逻辑是什么？

最后，我只想提到最后一个问题，即我会录制这样的视频。如果视频的实际长度是 20 秒。当我播放从程序创建的视频文件时，它的运行速度明显更快。无法判断它是否比应有的速度快 2 倍，但一般来说，如果我录制 20 秒的视频，那么它会播放大约 10 秒。什么可能导致这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-04T14:52:28.260

**VideoCodec**可以从`avcodec.h`/中找到的列表中选择`avcodec.java`（如您所见，数字 13 为我们提供 MPEG4，还有其他的，但 FFmpeg 没有为所有这些提供编码器）：

```
 AV_CODEC_ID_MPEG1VIDEO = 1,
    /** preferred ID for MPEG-1/2 video decoding */
    AV_CODEC_ID_MPEG2VIDEO = 2,
    AV_CODEC_ID_MPEG2VIDEO_XVMC = 3,
    AV_CODEC_ID_H261 = 4,
    AV_CODEC_ID_H263 = 5,
    AV_CODEC_ID_RV10 = 6,
    AV_CODEC_ID_RV20 = 7,
    AV_CODEC_ID_MJPEG = 8,
    AV_CODEC_ID_MJPEGB = 9,
    AV_CODEC_ID_LJPEG = 10,
    AV_CODEC_ID_SP5X = 11,
    AV_CODEC_ID_JPEGLS = 12,
    AV_CODEC_ID_MPEG4 = 13,
    AV_CODEC_ID_RAWVIDEO = 14,
    AV_CODEC_ID_MSMPEG4V1 = 15,
    AV_CODEC_ID_MSMPEG4V2 = 16,
    AV_CODEC_ID_MSMPEG4V3 = 17,
    AV_CODEC_ID_WMV1 = 18,
    AV_CODEC_ID_WMV2 = 19,
    AV_CODEC_ID_H263P = 20,
    AV_CODEC_ID_H263I = 21,
    AV_CODEC_ID_FLV1 = 22,
    AV_CODEC_ID_SVQ1 = 23,
    AV_CODEC_ID_SVQ3 = 24,
    AV_CODEC_ID_DVVIDEO = 25,
    AV_CODEC_ID_HUFFYUV = 26,
    AV_CODEC_ID_CYUV = 27,
    AV_CODEC_ID_H264 = 28,
    AV_CODEC_ID_INDEO3 = 29,
    AV_CODEC_ID_VP3 = 30,
    AV_CODEC_ID_THEORA = 31,
    AV_CODEC_ID_ASV1 = 32,
    AV_CODEC_ID_ASV2 = 33,
    AV_CODEC_ID_FFV1 = 34,
    AV_CODEC_ID_4XM = 35,
    AV_CODEC_ID_VCR1 = 36,
    AV_CODEC_ID_CLJR = 37,
    AV_CODEC_ID_MDEC = 38,
    AV_CODEC_ID_ROQ = 39,
    AV_CODEC_ID_INTERPLAY_VIDEO = 40,
    AV_CODEC_ID_XAN_WC3 = 41,
    AV_CODEC_ID_XAN_WC4 = 42,
    AV_CODEC_ID_RPZA = 43,
    AV_CODEC_ID_CINEPAK = 44,
    AV_CODEC_ID_WS_VQA = 45,
    AV_CODEC_ID_MSRLE = 46,
    AV_CODEC_ID_MSVIDEO1 = 47,
    AV_CODEC_ID_IDCIN = 48,
    AV_CODEC_ID_8BPS = 49,
    AV_CODEC_ID_SMC = 50,
    AV_CODEC_ID_FLIC = 51,
    AV_CODEC_ID_TRUEMOTION1 = 52,
    AV_CODEC_ID_VMDVIDEO = 53,
    AV_CODEC_ID_MSZH = 54,
    AV_CODEC_ID_ZLIB = 55,
    AV_CODEC_ID_QTRLE = 56,
    AV_CODEC_ID_TSCC = 57,
    AV_CODEC_ID_ULTI = 58,
    AV_CODEC_ID_QDRAW = 59,
    AV_CODEC_ID_VIXL = 60,
    AV_CODEC_ID_QPEG = 61,
    AV_CODEC_ID_PNG = 62,
    AV_CODEC_ID_PPM = 63,
    AV_CODEC_ID_PBM = 64,
    AV_CODEC_ID_PGM = 65,
    AV_CODEC_ID_PGMYUV = 66,
    AV_CODEC_ID_PAM = 67,
    AV_CODEC_ID_FFVHUFF = 68,
    AV_CODEC_ID_RV30 = 69,
    AV_CODEC_ID_RV40 = 70,
    AV_CODEC_ID_VC1 = 71,
    AV_CODEC_ID_WMV3 = 72,
    AV_CODEC_ID_LOCO = 73,
    AV_CODEC_ID_WNV1 = 74,
    AV_CODEC_ID_AASC = 75,
    AV_CODEC_ID_INDEO2 = 76,
    AV_CODEC_ID_FRAPS = 77,
    AV_CODEC_ID_TRUEMOTION2 = 78,
    AV_CODEC_ID_BMP = 79,
    AV_CODEC_ID_CSCD = 80,
    AV_CODEC_ID_MMVIDEO = 81,
    AV_CODEC_ID_ZMBV = 82,
    AV_CODEC_ID_AVS = 83,
    AV_CODEC_ID_SMACKVIDEO = 84,
    AV_CODEC_ID_NUV = 85,
    AV_CODEC_ID_KMVC = 86,
    AV_CODEC_ID_FLASHSV = 87,
    AV_CODEC_ID_CAVS = 88,
    AV_CODEC_ID_JPEG2000 = 89,
    AV_CODEC_ID_VMNC = 90,
    AV_CODEC_ID_VP5 = 91,
    AV_CODEC_ID_VP6 = 92,
    AV_CODEC_ID_VP6F = 93,
    AV_CODEC_ID_TARGA = 94,
    AV_CODEC_ID_DSICINVIDEO = 95,
    AV_CODEC_ID_TIERTEXSEQVIDEO = 96,
    AV_CODEC_ID_TIFF = 97,
    AV_CODEC_ID_GIF = 98,
    AV_CODEC_ID_DXA = 99,
    AV_CODEC_ID_DNXHD = 100,
    AV_CODEC_ID_THP = 101,
    AV_CODEC_ID_SGI = 102,
    AV_CODEC_ID_C93 = 103,
    AV_CODEC_ID_BETHSOFTVID = 104,
    AV_CODEC_ID_PTX = 105,
    AV_CODEC_ID_TXD = 106,
    AV_CODEC_ID_VP6A = 107,
    AV_CODEC_ID_AMV = 108,
    AV_CODEC_ID_VB = 109,
    AV_CODEC_ID_PCX = 110,
    AV_CODEC_ID_SUNRAST = 111,
    AV_CODEC_ID_INDEO4 = 112,
    AV_CODEC_ID_INDEO5 = 113,
    AV_CODEC_ID_MIMIC = 114,
    AV_CODEC_ID_RL2 = 115,
    AV_CODEC_ID_ESCAPE124 = 116,
    AV_CODEC_ID_DIRAC = 117,
    AV_CODEC_ID_BFI = 118,
    AV_CODEC_ID_CMV = 119,
    AV_CODEC_ID_MOTIONPIXELS = 120,
    AV_CODEC_ID_TGV = 121,
    AV_CODEC_ID_TGQ = 122,
    AV_CODEC_ID_TQI = 123,
    AV_CODEC_ID_AURA = 124,
    AV_CODEC_ID_AURA2 = 125,
    AV_CODEC_ID_V210X = 126,
    AV_CODEC_ID_TMV = 127,
    AV_CODEC_ID_V210 = 128,
    AV_CODEC_ID_DPX = 129,
    AV_CODEC_ID_MAD = 130,
    AV_CODEC_ID_FRWU = 131,
    AV_CODEC_ID_FLASHSV2 = 132,
    AV_CODEC_ID_CDGRAPHICS = 133,
    AV_CODEC_ID_R210 = 134,
    AV_CODEC_ID_ANM = 135,
    AV_CODEC_ID_BINKVIDEO = 136,
    AV_CODEC_ID_IFF_ILBM = 137,
    AV_CODEC_ID_IFF_BYTERUN1 = 138,
    AV_CODEC_ID_KGV1 = 139,
    AV_CODEC_ID_YOP = 140,
    AV_CODEC_ID_VP8 = 141,
    AV_CODEC_ID_PICTOR = 142,
    AV_CODEC_ID_ANSI = 143,
    AV_CODEC_ID_A64_MULTI = 144,
    AV_CODEC_ID_A64_MULTI5 = 145,
    AV_CODEC_ID_R10K = 146,
    AV_CODEC_ID_MXPEG = 147,
    AV_CODEC_ID_LAGARITH = 148,
    AV_CODEC_ID_PRORES = 149,
    AV_CODEC_ID_JV = 150,
    AV_CODEC_ID_DFA = 151,
    AV_CODEC_ID_WMV3IMAGE = 152,
    AV_CODEC_ID_VC1IMAGE = 153,
    AV_CODEC_ID_UTVIDEO = 154,
    AV_CODEC_ID_BMV_VIDEO = 155,
    AV_CODEC_ID_VBLE = 156,
    AV_CODEC_ID_DXTORY = 157,
    AV_CODEC_ID_V410 = 158,
    AV_CODEC_ID_XWD = 159,
    AV_CODEC_ID_CDXL = 160,
    AV_CODEC_ID_XBM = 161,
    AV_CODEC_ID_ZEROCODEC = 162,
    AV_CODEC_ID_MSS1 = 163,
    AV_CODEC_ID_MSA1 = 164,
    AV_CODEC_ID_TSCC2 = 165,
    AV_CODEC_ID_MTS2 = 166,
    AV_CODEC_ID_CLLC = 167,
    AV_CODEC_ID_MSS2 = 168,
    AV_CODEC_ID_VP9 = 169,
    AV_CODEC_ID_AIC = 170,
    // etc 
```

**PixelFormat**可以从`pixfmt.h`/中的这个列表中选择`avutil.java`，但每个编解码器只支持其中的几个（大多数至少支持`AV_PIX_FMT_YUV420P`）：

```
 /** planar YUV 4:2:0, 12bpp, (1 Cr & Cb sample per 2x2 Y samples) */
    AV_PIX_FMT_YUV420P = 0,
    /** packed YUV 4:2:2, 16bpp, Y0 Cb Y1 Cr */
    AV_PIX_FMT_YUYV422 = 1,
    /** packed RGB 8:8:8, 24bpp, RGBRGB... */
    AV_PIX_FMT_RGB24 = 2,
    /** packed RGB 8:8:8, 24bpp, BGRBGR... */
    AV_PIX_FMT_BGR24 = 3,
    /** planar YUV 4:2:2, 16bpp, (1 Cr & Cb sample per 2x1 Y samples) */
    AV_PIX_FMT_YUV422P = 4,
    /** planar YUV 4:4:4, 24bpp, (1 Cr & Cb sample per 1x1 Y samples) */
    AV_PIX_FMT_YUV444P = 5,
    /** planar YUV 4:1:0,  9bpp, (1 Cr & Cb sample per 4x4 Y samples) */
    AV_PIX_FMT_YUV410P = 6,
    /** planar YUV 4:1:1, 12bpp, (1 Cr & Cb sample per 4x1 Y samples) */
    AV_PIX_FMT_YUV411P = 7,
    /**        Y        ,  8bpp */
    AV_PIX_FMT_GRAY8 = 8,
    /**        Y        ,  1bpp, 0 is white, 1 is black, in each byte pixels are ordered from the msb to the lsb */
    AV_PIX_FMT_MONOWHITE = 9,
    /**        Y        ,  1bpp, 0 is black, 1 is white, in each byte pixels are ordered from the msb to the lsb */
    AV_PIX_FMT_MONOBLACK = 10,
    /** 8 bit with PIX_FMT_RGB32 palette */
    AV_PIX_FMT_PAL8 = 11,
    /** planar YUV 4:2:0, 12bpp, full scale (JPEG), deprecated in favor of PIX_FMT_YUV420P and setting color_range */
    AV_PIX_FMT_YUVJ420P = 12,
    /** planar YUV 4:2:2, 16bpp, full scale (JPEG), deprecated in favor of PIX_FMT_YUV422P and setting color_range */
    AV_PIX_FMT_YUVJ422P = 13,
    /** planar YUV 4:4:4, 24bpp, full scale (JPEG), deprecated in favor of PIX_FMT_YUV444P and setting color_range */
    AV_PIX_FMT_YUVJ444P = 14,
    /** XVideo Motion Acceleration via common packet passing */
    AV_PIX_FMT_XVMC_MPEG2_MC = 15,
    AV_PIX_FMT_XVMC_MPEG2_IDCT = 16;
    /** packed YUV 4:2:2, 16bpp, Cb Y0 Cr Y1 */
    AV_PIX_FMT_UYVY422 = 17,
    /** packed YUV 4:1:1, 12bpp, Cb Y0 Y1 Cr Y2 Y3 */
    AV_PIX_FMT_UYYVYY411 = 18,
    /** packed RGB 3:3:2,  8bpp, (msb)2B 3G 3R(lsb) */
    AV_PIX_FMT_BGR8 = 19,
    /** packed RGB 1:2:1 bitstream,  4bpp, (msb)1B 2G 1R(lsb), a byte contains two pixels, the first pixel in the byte is the one composed by the 4 msb bits */
    AV_PIX_FMT_BGR4 = 20,
    /** packed RGB 1:2:1,  8bpp, (msb)1B 2G 1R(lsb) */
    AV_PIX_FMT_BGR4_BYTE = 21,
    /** packed RGB 3:3:2,  8bpp, (msb)2R 3G 3B(lsb) */
    AV_PIX_FMT_RGB8 = 22,
    /** packed RGB 1:2:1 bitstream,  4bpp, (msb)1R 2G 1B(lsb), a byte contains two pixels, the first pixel in the byte is the one composed by the 4 msb bits */
    AV_PIX_FMT_RGB4 = 23,
    /** packed RGB 1:2:1,  8bpp, (msb)1R 2G 1B(lsb) */
    AV_PIX_FMT_RGB4_BYTE = 24,
    /** planar YUV 4:2:0, 12bpp, 1 plane for Y and 1 plane for the UV components, which are interleaved (first byte U and the following byte V) */
    AV_PIX_FMT_NV12 = 25,
    /** as above, but U and V bytes are swapped */
    AV_PIX_FMT_NV21 = 26,

    /** packed ARGB 8:8:8:8, 32bpp, ARGBARGB... */
    AV_PIX_FMT_ARGB = 27,
    /** packed RGBA 8:8:8:8, 32bpp, RGBARGBA... */
    AV_PIX_FMT_RGBA = 28,
    /** packed ABGR 8:8:8:8, 32bpp, ABGRABGR... */
    AV_PIX_FMT_ABGR = 29,
    /** packed BGRA 8:8:8:8, 32bpp, BGRABGRA... */
    AV_PIX_FMT_BGRA = 30,

    /**        Y        , 16bpp, big-endian */
    AV_PIX_FMT_GRAY16BE = 31,
    /**        Y        , 16bpp, little-endian */
    AV_PIX_FMT_GRAY16LE = 32,
    /** planar YUV 4:4:0 (1 Cr & Cb sample per 1x2 Y samples) */
    AV_PIX_FMT_YUV440P = 33,
    /** planar YUV 4:4:0 full scale (JPEG), deprecated in favor of PIX_FMT_YUV440P and setting color_range */
    AV_PIX_FMT_YUVJ440P = 34,
    /** planar YUV 4:2:0, 20bpp, (1 Cr & Cb sample per 2x2 Y & A samples) */
    AV_PIX_FMT_YUVA420P = 35,
    /** H.264 HW decoding with VDPAU, data[0] contains a vdpau_render_state struct which contains the bitstream of the slices as well as various fields extracted from headers */
    AV_PIX_FMT_VDPAU_H264 = 36,
    /** MPEG-1 HW decoding with VDPAU, data[0] contains a vdpau_render_state struct which contains the bitstream of the slices as well as various fields extracted from headers */
    AV_PIX_FMT_VDPAU_MPEG1 = 37,
    /** MPEG-2 HW decoding with VDPAU, data[0] contains a vdpau_render_state struct which contains the bitstream of the slices as well as various fields extracted from headers */
    AV_PIX_FMT_VDPAU_MPEG2 = 38,
    /** WMV3 HW decoding with VDPAU, data[0] contains a vdpau_render_state struct which contains the bitstream of the slices as well as various fields extracted from headers */
    AV_PIX_FMT_VDPAU_WMV3 = 39,
    /** VC-1 HW decoding with VDPAU, data[0] contains a vdpau_render_state struct which contains the bitstream of the slices as well as various fields extracted from headers */
    AV_PIX_FMT_VDPAU_VC1 = 40,
    /** packed RGB 16:16:16, 48bpp, 16R, 16G, 16B, the 2-byte value for each R/G/B component is stored as big-endian */
    AV_PIX_FMT_RGB48BE = 41,
    /** packed RGB 16:16:16, 48bpp, 16R, 16G, 16B, the 2-byte value for each R/G/B component is stored as little-endian */
    AV_PIX_FMT_RGB48LE = 42,

    /** packed RGB 5:6:5, 16bpp, (msb)   5R 6G 5B(lsb), big-endian */
    AV_PIX_FMT_RGB565BE = 43,
    /** packed RGB 5:6:5, 16bpp, (msb)   5R 6G 5B(lsb), little-endian */
    AV_PIX_FMT_RGB565LE = 44,
    /** packed RGB 5:5:5, 16bpp, (msb)1A 5R 5G 5B(lsb), big-endian, most significant bit to 0 */
    AV_PIX_FMT_RGB555BE = 45,
    /** packed RGB 5:5:5, 16bpp, (msb)1A 5R 5G 5B(lsb), little-endian, most significant bit to 0 */
    AV_PIX_FMT_RGB555LE = 46,

    /** packed BGR 5:6:5, 16bpp, (msb)   5B 6G 5R(lsb), big-endian */
    AV_PIX_FMT_BGR565BE = 47,
    /** packed BGR 5:6:5, 16bpp, (msb)   5B 6G 5R(lsb), little-endian */
    AV_PIX_FMT_BGR565LE = 48,
    /** packed BGR 5:5:5, 16bpp, (msb)1A 5B 5G 5R(lsb), big-endian, most significant bit to 1 */
    AV_PIX_FMT_BGR555BE = 49,
    /** packed BGR 5:5:5, 16bpp, (msb)1A 5B 5G 5R(lsb), little-endian, most significant bit to 1 */
    AV_PIX_FMT_BGR555LE = 50,

    /** HW acceleration through VA API at motion compensation entry-point, Picture.data[3] contains a vaapi_render_state struct which contains macroblocks as well as various fields extracted from headers */
    AV_PIX_FMT_VAAPI_MOCO = 51,
    /** HW acceleration through VA API at IDCT entry-point, Picture.data[3] contains a vaapi_render_state struct which contains fields extracted from headers */
    AV_PIX_FMT_VAAPI_IDCT = 52,
    /** HW decoding through VA API, Picture.data[3] contains a vaapi_render_state struct which contains the bitstream of the slices as well as various fields extracted from headers */
    AV_PIX_FMT_VAAPI_VLD = 53,

    /** planar YUV 4:2:0, 24bpp, (1 Cr & Cb sample per 2x2 Y samples), little-endian */
    AV_PIX_FMT_YUV420P16LE = 54,
    /** planar YUV 4:2:0, 24bpp, (1 Cr & Cb sample per 2x2 Y samples), big-endian */
    AV_PIX_FMT_YUV420P16BE = 55,
    /** planar YUV 4:2:2, 32bpp, (1 Cr & Cb sample per 2x1 Y samples), little-endian */
    AV_PIX_FMT_YUV422P16LE = 56,
    /** planar YUV 4:2:2, 32bpp, (1 Cr & Cb sample per 2x1 Y samples), big-endian */
    AV_PIX_FMT_YUV422P16BE = 57,
    /** planar YUV 4:4:4, 48bpp, (1 Cr & Cb sample per 1x1 Y samples), little-endian */
    AV_PIX_FMT_YUV444P16LE = 58,
    /** planar YUV 4:4:4, 48bpp, (1 Cr & Cb sample per 1x1 Y samples), big-endian */
    AV_PIX_FMT_YUV444P16BE = 59,
    /** MPEG4 HW decoding with VDPAU, data[0] contains a vdpau_render_state struct which contains the bitstream of the slices as well as various fields extracted from headers */
    AV_PIX_FMT_VDPAU_MPEG4 = 60,
    /** HW decoding through DXVA2, Picture.data[3] contains a LPDIRECT3DSURFACE9 pointer */
    AV_PIX_FMT_DXVA2_VLD = 61,

    /** packed RGB 4:4:4, 16bpp, (msb)4A 4R 4G 4B(lsb), little-endian, most significant bits to 0 */
    AV_PIX_FMT_RGB444LE = 62,
    /** packed RGB 4:4:4, 16bpp, (msb)4A 4R 4G 4B(lsb), big-endian, most significant bits to 0 */
    AV_PIX_FMT_RGB444BE = 63,
    /** packed BGR 4:4:4, 16bpp, (msb)4A 4B 4G 4R(lsb), little-endian, most significant bits to 1 */
    AV_PIX_FMT_BGR444LE = 64,
    /** packed BGR 4:4:4, 16bpp, (msb)4A 4B 4G 4R(lsb), big-endian, most significant bits to 1 */
    AV_PIX_FMT_BGR444BE = 65,
    /** 8bit gray, 8bit alpha */
    AV_PIX_FMT_YA8 = 66,
    // etc 
```

**FrameRate**表示每秒播放视频的帧数（它与您实际录制的图像的数量或时间无关，尽管它提供了编码比特率的基础）。因此，在 30 FPS 的情况下，要覆盖 20 秒的视频，您需要调用`record()`30 * 20 = 600 次。如果您没有调用`record()`600 次，那么这就是您的问题的原因。

**VideoBitrate**提供视频流应编码的视频比特率（以每秒比特数为单位）。维基百科对此有[一篇很好的文章](http://en.wikipedia.org/wiki/Bit_rate)。

# node.js - 如何在 node.js express 路由器中获取这种参数？

> ID：14125762
> 
> 赞同：2
> 
> 时间：2013-01-02T16:44:41.010
> 
> 标签：node.js, parameters, express, router

我有一个这样的路由器：

```
app.get('/blog/:id/delete', function (req, res) {

}) 
```

我怎样才能得到`:id`参数？

我试过`req.query.id` `req.param.id`了，但都失败了

我怎样才能得到正确的`id`值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:30:29.027

是`req.params.id`。

所以，基本上你几乎是对的，只是`s`缺少一个 ;-)

# c# - JavaScript 在本地工作，但在部署到网络服务器时不工作

> ID：14125765
> 
> 赞同：0
> 
> 时间：2013-01-02T16:44:44.823
> 
> 标签：c#, javascript, jquery, html, model-view-controller

我正在向网站部署一些代码，但当我这样做时，JavaScript 没有运行。我得到错误：

> SCRIPT5007：属性“$”的值为 null 或未定义，而不是 Function 对象。

它使用的代码是

```
@model MVCMasterDetail.DataAccess.cwwoLoadCurrentWorkOrderActualsResult[]

<script type="text/javascript">
  $(document).ready(function () {
    $(".grid-toggle").click(function () {
        $(this).closest("table").find("tbody").show();
    });
    $(".hide-rows").click(function () {
        $(this).closest("table").find("tbody").hide();
    });
});
</script>

@Html.Partial("MasterDetailMasterPartial") 
```

调用它的是：

```
<td colspan="4"> Details<br/><a href="javascript: void(0)" class="grid-toggle">Show-     </a><a href="javascript: void(0)" class="hide-rows">Hide</a></td> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:03:52.137

根据您在 Ashley Ross 的回答中的评论，您似乎正在尝试使用相对路径添加 jQuery。看起来您也正在使用 MVC。在 MVC 中，您希望在 html 中引用文件的方式是：

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.js")"></script> 
```

此外，您的脚本标签是否进入头标签也没有关系。它唯一的区别是加载。通过将它放在 head 标签中，您是在告诉浏览器在开始加载正文之前下载 js 文件，这可能很好，但也会增加页面加载时间。为了更快的页面下载，您实际上希望将脚本标签放在正文标签的底部，这会将 js 文件的下载推迟到页面的其余部分加载之后。这会导致更快的页面加载时间，但如果您没有预料到它可能会导致一些时髦的行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T16:48:01.483

您需要在任何其他脚本之前包含 jQuery。听起来你有类似的东西

```
<script type="text/javascript" src="customScriptThatUsesjQuery.js"></script>
<script type="text/javascript" src="jquery-x.y.z.min.js"></script> 
```

代替

```
<script type="text/javascript" src="jquery-x.y.z.min.js"></script>
<script type="text/javascript" src="customScriptThatUsesjQuery.js"></script> 
```

在使用它的任何其他脚本之前检查它是否出现在您的 HTML 源代码中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:47:31.780

您必须在中添加对 jquery lib 的引用`<head>`

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script> 
```

# php - 我想根据 json-php 中的第一个表行输出从第二个表中获取输出结果

> ID：14125766
> 
> 赞同：0
> 
> 时间：2013-01-02T16:44:49.393
> 
> 标签：php, json

我有 PHP 的知识，但我仍在学习 Json。首先，我想明确我在寻找什么。我在 mysql 数据库中有两个表，table1( **users** ) 和 table2( **business** )。表“users”包含这些行（id、uid、business_name），表“business”包含这些行（id、uid、category）。

我在 PHP 页面中有以下代码：

```
if(isset($_GET['catName'])) {

    $cat = $_GET['catName'];
    $stmt = $pdo->prepare("SELECT id, uid, category FROM business WHERE category = ? ");
    $stmt->execute(array($_GET['catName']));
    $arr = $stmt->fetchAll(PDO::FETCH_ASSOC);

} 
```

我能够在我的 html 页面上获得 json 输出，例如 101、102、103 等。

但我想根据第一个表的输出 uid 从第二个表“业务”中获取业务名称行，如 ABC 业务、XYZ 业务、123 业务等。简而言之，我想要 business_name 输出而不是第二个表的 uid 输出。请帮我。非常感谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T18:56:30.927

您有一个关联数组，其中包含查询的结果。听起来您想要企业名称，但您没有查询它们。

因此，第一步是修复您损坏的查询！

很难从查询中说出您想要什么，但是您将用户表与业务表混合在一起，所以我猜您真的想要基于用户的业务名称。

```
SELECT b.business_name FROM users u JOIN business b ON u.uid = b.uid WHERE category = ? 
```

然后，您必须正确访问您的 $arr 变量以获取企业名称

```
foreach ($arr as $bus_sql_result) {
    echo $bus_sql_result['business_name']."\n";
} 
```

这不是 JSON 格式，我不确定 JSON 与你想要的有什么关系，但如果你真的想要那样，你可以尝试类似

```
$business_names = array();
foreach ($arr as $bus_sql_result) {
    $business_names[] = $bus_sql_result['business_name'];
}
echo json_encode($business_names); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T05:25:02.670

非常感谢克里斯和 Jormundir。加入这两个表确实解决了我的问题。这就是我所做的：

> $stmt = $pdo->prepare("SELECT business.uid, users.business_name FROM business,users WHERE business.uid = users.uid AND business.category= ?");

在 html 页面中，我放置了“business_name”数组而不是“uid”，无论我在寻找什么，我都得到了结果。

非常感谢你们所有人。

# c# - 从矩阵变换计算角度

> ID：14125771
> 
> 赞同：8
> 
> 时间：2013-01-02T16:45:10.917
> 
> 标签：c#, wpf, math, matrix

我有以下代码行：我在不知道值（多少度）的情况下对矩形应用了一些旋转。现在我想在 2D 中获得元素的旋转或角度。

```
Rectangle element = (Rectangle)sender;
MatrixTransform xform = element.RenderTransform as MatrixTransform;
Matrix matrix = xform.Matrix;
third.Content = (Math.Atan(matrix.M21 / matrix.M22)*(180/Math.PI)).ToString();

and the matrix is like following
|M11 M12 0|
|M21 M22 0|
|dx  dy  1|  which is Transformation Matrix I guess !! 
```

这似乎不是正确的值。我想获得**0 到 360 度的角度**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-05-09T09:36:05.533

**备查：**

这将为您提供以弧度为单位的变换矩阵的旋转角度：

```
var radians = Math.Atan2(matrix.M21, matrix.M11); 
```

如果需要，您可以将弧度转换为度数：

```
var degrees = radians * 180 / Math.PI; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-02T16:57:32.277

你可以使用这个：

```
var x = new Vector(1, 0);
Vector rotated = Vector.Multiply(x, matrix);
double angleBetween = Vector.AngleBetween(x, rotated); 
```

这个想法是：

1.  我们创建一个临时向量 (1,0)
2.  我们对向量应用矩阵变换并得到一个旋转的临时向量
3.  我们计算原始温度向量和旋转温度向量之间的角度

你可以玩这个：

```
[TestCase(0,0)]
[TestCase(90,90)]
[TestCase(180,180)]
[TestCase(270,-90)]
[TestCase(-90, -90)]
public void GetAngleTest(int angle, int expected)
{
    var matrix = new RotateTransform(angle).Value;
    var x = new Vector(1, 0);
    Vector rotated = Vector.Multiply(x, matrix);
    double angleBetween = Vector.AngleBetween(x, rotated);
    Assert.AreEqual(expected,(int)angleBetween);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:51:25.460

您的答案将以弧度表示，[http://social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/c14fd846-19b9-4e8a-ba6c-0b885b424439/](http://social.msdn.microsoft.com/forums/en-US/netfxbcl/thread/c14fd846-19b9-4e8a-ba6c-0b885b424439/)。

因此，只需使用以下命令将值转换回度数：

```
double deg = angle * (180.0 / Math.PI); 
```

# java - Powermock - 模拟一个超级方法调用

> ID：14125774
> 
> 赞同：5
> 
> 时间：2013-01-02T16:45:15.363
> 
> 标签：java, mockito, powermock, super

这是我的代码 -

```
import org.junit.Test;
import org.junit.runner.RunWith;
import org.powermock.modules.junit4.PowerMockRunner;

import org.powermock.core.classloader.annotations.*;
import static org.powermock.api.support.SuppressCode.*;

class BaseService {
    public int save() {
        validate();
        return 2;
    }

    public static int save2() {
        return 5;
    }

    public void validate() {
        System.out.println("base service save executing...");
    }
}

class ChildService extends BaseService {
    public int save() {
        System.out.println("child service save executing...");
        int x = super.save2();
        int y = super.save();
        System.out.println("super.save returned " + y);
        load();
        return 1 + x;
    }

    public void load() {
        System.out.println("child service load executing...");
    }
}

@RunWith(PowerMockRunner.class)
@PrepareForTest(BaseService.class)
public class PreventSuperInvocation {

    @Test
    public void testSave() throws Exception {

        org.powermock.api.support.Stubber.stubMethod(BaseService.class,
                "save2", 4);
        suppressMethod(BaseService.class, "save");
        ChildService childService = new ChildService();
        System.out.println(childService.save());
    }

} 
```

我想`super.save()`在`ChildService`课堂上嘲讽。但我找不到这样做的方法。`suppressMethod()`仅抑制并返回默认值（在上述情况下为 0）。像`MemberModifier`,`Stubber`之类的东西`MethodProxy`只适用于静态方法。

有没有办法在 Powermock 中做到这一点？

我正在使用 Powermock 1.5 和 Mockito 1.9.5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T17:09:34.033

看来 jMockit 可以做我需要的。也许我会将这个问题发布到 powermock 邮件列表。同时下面应该足够了。包 learning_mocking_tools.learning_mocking_tools；包 learning_mocking_tools.learning_mocking_tools；

```
import mockit.*;

import org.junit.Assert;
import org.junit.Test;

class BaseService {
    public int save() {
        validate();
        return 2;
    }

    public static int save2() {
        return 5;
    }

    public void validate() {
        System.out.println("base service save executing...");
    }
}

class ChildService extends BaseService {
    public int save() {
        System.out.println("child service save executing...");
        int x = super.save2();
        int y = super.save();
        System.out.println("super.save returned " + y);
        load();
        return 1 + y;
    }

    public void load() {
        System.out.println("child service load executing...");
    }
}

@MockClass(realClass = BaseService.class)
class MockBase {

    @Mock
    public int save() {
        System.out.println("mocked base");
        return 9;
    }
}

public class PreventSuperInvocation {

    @Test
    public void testSave() throws Exception {
        MockBase mockBase = new MockBase();
        Mockit.setUpMock(BaseService.class, mockBase);

        ChildService childService = new ChildService();
//      int x = childService.save();

        Assert.assertEquals(9 + 1, childService.save());

        Mockit.tearDownMocks();
    }

} 
```

# android - 屏幕关闭后无法保持传感器更新率

> ID：14125775
> 
> 赞同：1
> 
> 时间：2013-01-02T16:45:26.410
> 
> 标签：android, broadcastreceiver, android-sensors, wakelock

我的应用程序需要从传感器和 GPS 收集数据，但似乎在我关闭屏幕后，更新速率会大大减慢（在另一部手机中从 20 毫秒降至 500 毫秒，或完全停止）。

我已经阅读了几种解决方法：其中一个涉及使用唤醒锁以保持进程运行，另一个说注册广播接收器以在屏幕关闭事件后重新注册事件侦听器。

两者在执行时都不会返回错误，但不知何故，传感器在屏幕关闭后就停止运行（巧合的是，它们在我按下电源按钮后立即开始运行，更不用说解锁屏幕了）。

我正在从一个活动中注册广播接收器到“ACTION_SCREEN_OFF”事件，在“onCreate”方法上也从那里获取唤醒锁。

我使用的是带有 Android 2.3.5 的 Lenovo A60，以及带有 Android 2.3.4 的 LG Optimus Pro。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T21:53:19.597

这个时候，这个问题有两种可能的答案：

1.  如果您的手机是[此](http://www.saltwebsites.com/2012/android-accelerometers-screen-off)列表的一部分（或者仍然不是，但具有类似的底层传感器实现），那么您可以使用[此处](https://code.google.com/p/android/issues/detail?id=3708#c46)描述的方法来实现一种解决方法，使用 BroadcastReceivers 在屏幕关闭后重新启动传感器侦听;
2.  您可以使用唤醒锁或其他方法来保持屏幕打开并使用“按两次退出”方案，以防止用户关闭活动

# google-chrome - Chrome Web Apps 和 Google Apps 脚本

> ID：14125776
> 
> 赞同：0
> 
> 时间：2013-01-02T16:45:34.260
> 
> 标签：google-chrome, google-apps-script

我想使用 Apps 脚本创建一个网络应用程序。谁为配额收费？安装应用程序的用户还是开发者？

另外，是否可以支付增加的配额？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T22:37:28.343

使用谁的配额取决于您部署应用程序的方式。部署时，您选择“将应用程序执行为”选项。以下[来自文档](https://developers.google.com/apps-script/execution_web_apps#deploying)：

> **以您的身份执行应用程序：**您希望网络应用程序以您（脚本的所有者）身份执行还是以访问网络应用程序的活动用户身份执行？

# javascript - 如果元素曾经被隐藏，我的 jQuery UI 日期选择器不会显示

> ID：14125777
> 
> 赞同：4
> 
> 时间：2013-01-02T16:45:33.803
> 
> 标签：javascript, jquery, jquery-ui, knockout.js

一点上下文：我正在创建一个向导，因此在您完成该步骤之前，该步骤的内容是隐藏的。我正在根据您在第一步中的输入动态创建表单的第二步，如下所示：

## 无隐藏，获取输入，显示输出

### HTML

```
 <p class="par">
        <label for="report_cat">Category:</label>
        <span class="field">
            <select data-bind="options: reportTypes, optionsText: 'title', value: selectedReportType, optionsCaption: 'Report Category'" id="report_cat" class="longinput"></select>
        </span>
    </p>
    <p class="par">
        <label for="report">Report:</label>
        <span class="field">
            <select data-bind="options: reportPool, optionsText: 'title', value: selectedReport, optionsCaption: 'Select Report'" id="report" class="longinput"></select>
        </span>
    </p>
    <div class="widgetcontent stdform stdform2 stdformwidget" id="tmptest" data-bind="wizardInputs: inputPool">
    </div> 
```

### 相关 Javascript（ReportTypes 只是一个 javascript 对象数组）

```
self.inputPool = ko.computed(function() {
if (self.selectedReport() == null) return [];

//set the url
self.postUrl(self.selectedReport().postUrl);

var inputs = self.selectedReport().inputs.map(function(elem) {
    var element = null;
    var type = elem["type"];
    var id = "wizard-elem-" + elem["title"].replace(/\s+/g, '');

    if (type == "date") {
        element = $("<input type =\"text\" id=\"" + id + "\" class=\"longinput wizard-dp\" style=\"display:inline-block\" />");
        element.datepicker();
    }
    if (type == "checkbox") {
        element = $("<input type =\"checkbox\" id=\"" + id + "\" />");
    }
    if (type == "select") {
        //do something with options
        element = $("<input type =\"checkbox\" id=\"" + id + "\" />");
    }

    elem["elem"] = element;
    return elem;
});

return inputs;
});

ko.bindingHandlers.wizardInputs = {
    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var ele = $(element);
        var value = valueAccessor();
        ele.children(".wizardContent").remove();
        var container = $("<div class=\"wizardContent\"></div>");

        for (var x in value()) {
            var single = value()[x];
            var id = "wizard-elem-final-" + single["title"].replace(/\s+/g, '');
            var param = $("<p></p>").addClass("par");
            param.append("<label for=\"" + id + "\">" + single["title"] + "</label>");
            var field = $("<span></span>").addClass("field");
            field.append(single["elem"]);
            param.append(field);
            container.append(param);
        }

    if (value().length > 0) {
        ele.prepend(container);
    }

}
}; 
```

[我把所有的代码都扔在了这个小提琴上](http://jsfiddle.net/xueye/tJnwa/3/)，我在任何时候都没有隐藏我的元素。当您选择任何类别/报告的组合时，第二步将自动弹出在第一步下方。日期选择器（输入 1）会显示得很好（暂时忽略缺少 CSS）。

但是，[当我试图](http://jsfiddle.net/xueye/VHBU8/6/)通过隐藏和显示容器来让每个步骤在适当的时间出现时，日期选择器将不会出现。实际的输入元素有“hasDatePicker”类，所以我知道日期选择器仍在实现中。实际隐藏的 datepicker 元素也会显示在 Firebug 的 HTML 查看器中；所以我知道它在那里。

## 隐藏

### HTML

```
 <div class="widgetcontent stdform stdform2 stdformwidget" data-bind="slideVisible: (step() == 1)" id="tmptest1">
            <p class="par">
                <label for="report_name">Title:</label>
                <span class="field">
                    <input type="text" data-bind="value: title" class="longinput" id="report_name" />
                </span>
            </p>
            <p class="par">
                <label for="report_cat">Category:</label>
                <span class="field">
                    <select data-bind="options: reportTypes, optionsText: 'title', value: selectedReportType, optionsCaption: 'Report Category'" id="report_cat" class="longinput"></select>
                </span>
            </p>
            <p class="par">
                <label for="report">Report:</label>
                <span class="field">
                    <select data-bind="options: reportPool, optionsText: 'title', value: selectedReport, optionsCaption: 'Select Report'" id="report" class="longinput"></select>
                </span>
            </p>
        </div>
        <div class="widgetcontent stdform stdform2 stdformwidget" id="tmptest" data-bind="wizardInputs: inputPool, slideVisible: (step() == 2)">
        </div> 
```

### SlideVisible 绑定

```
 ko.bindingHandlers.slideVisible = {
            init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                var ele = $(element);
                var value = ko.utils.unwrapObservable(valueAccessor());
                ele.hide();
                if (value) ele.slideDown();
            },
            update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                var ele = $(element);
                var value = ko.utils.unwrapObservable(valueAccessor());

                if (value) {
                    ele.slideDown();
                }
                else {
                    ele.slideUp();
                }
            }
        }; 
```

我已经在我的控制台中手动玩过，似乎隐藏和显示容器的实际行为以某种方式破坏了我的日期选择器。通过隐藏将包含日期选择器的元素，将元素放在该容器中，然后显示容器，我已经能够在不通过控制台敲除的情况下复制它。元素出现，但日期选择器不会触发。

以前有没有人处理过这个问题？有没有我无法找到的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-04T08:50:57.700

没有阅读全文，但为什么不尝试先将字段添加到 DOM，然后附加日期选择器？

# xpath - 根据两个或多个属性值计算节点

> ID：14125778
> 
> 赞同：1
> 
> 时间：2013-01-02T16:45:38.063
> 
> 标签：xpath

我需要根据两个属性的值来计算特定节点在文档中出现的次数。因此，给定以下 XML 小样本：

```
 <p:entry timestamp="2012-11-15T17:53:34.642-05:00" ticks="89709622449012" system="OSD" component="OSD5" marker=".\Launcher.cpp:1741" severity="Info" type="Driver" subtype="Start" tags="" sensitivity="false"> 
```

这可以在具有不同属性集的文档中发生一次或多次。我需要计算有多少类型出现在 type="Driver" AND subtype="Start" 上。我可以计算有多少只有 type="Driver" 使用：

```
 count(//p:entry[@type="Driver"]) 
```

但无法将它们结合起来。这没有用：

```
 count(//p:entry[@type="Driver" and @subtype="Start"]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:05:53.420

这适用于 OP。连续指定 2 个谓词而不是使用运算符`and`导致相同的效果：

```
count(//p:entry[@type="Driver"][@subtype="Start"]) 
```

`count(//p:entry[@type="Driver" and @subtype="Start"])`据我所知，原始代码应该可以正常工作。

# python - 在当前目录中创建的新文件夹

> ID：14125781
> 
> 赞同：13
> 
> 时间：2013-01-02T16:45:51.933
> 
> 标签：python, python-2.7, operating-system

我有一个 Python 程序，在此过程中它会创建一些文件。我希望程序识别当前目录，然后在目录中创建一个文件夹，以便将创建的文件放在该目录中。

我试过这个：

```
current_directory = os.getcwd()
final_directory = os.path.join(current_directory, r'/new_folder')
if not os.path.exists(final_directory):
    os.makedirs(final_directory) 
```

但它并没有给我想要的东西。似乎第二行没有按我的意愿工作。有人可以帮我解决问题吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-02T16:54:10.797

认为问题出在`r'/new_folder'`和其中使用的斜杠（指根目录）。

试试看：

```
current_directory = os.getcwd()
final_directory = os.path.join(current_directory, r'new_folder')
if not os.path.exists(final_directory):
   os.makedirs(final_directory) 
```

那应该行得通。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-02T16:56:14.783

需要注意的一件事是（根据`os.path.join`文档）如果提供绝对路径作为参数之一，则其他元素将被丢弃。例如（在 Linux 上）：

```
In [1]: import os.path

In [2]: os.path.join('first_part', 'second_part')
Out[2]: 'first_part/second_part'

In [3]: os.path.join('first_part', r'/second_part')
Out[3]: '/second_part' 
```

在 Windows 上：

```
>>> import os.path
>>> os.path.join('first_part', 'second_part')
'first_part\\second_part'
>>> os.path.join('first_part', '/second_part')
'/second_part' 
```

`/`由于您在论点中包含前导`join`，因此它被解释为绝对路径，因此忽略其余部分。因此，您应该`/`从第二个参数的开头删除 ，以使连接按预期执行。您不必包含的原因`/`是因为`os.path.join`隐式使用`os.sep`，确保使用了正确的分隔符（请注意上面输出中的差异`os.path.join('first_part', 'second_part'`）。

# javascript - 如何清理用户输入文本以便可以在 Javascript/JSON 中使用？

> ID：14125782
> 
> 赞同：2
> 
> 时间：2013-01-02T16:45:54.820
> 
> 标签：javascript, json

我有一个网络应用程序，我允许使用文本字段输入一些大文本。此文本保存到数据库中，然后作为 JSON 响应中的字段发送回用户。在浏览器中，我尝试将其简单地转换为`Object`using `JSON.parse`，但这有时会失败，具体取决于用户在字段中输入的内容。

我认为现在，文本中有单引号，在我调用`JSON.parse`它之前，它们已经破坏了浏览器端的 Javascript。

清理这些数据的最佳方法是什么，以便在理想情况下，我可以`Object`在保存后将其解析回具有最少清理的数据？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T16:47:47.070

这不是一个清理问题：您可以很好地将带引号的字符串放在 JSON 中：编码只是将它们转义。

您的问题是编码问题。要在浏览器中构建 JSON 字符串，请使用[JSON.stringify](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)。要在服务器端执行此操作，您应该使用（未提及的）服务器端语言/框架提供的工具。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T16:48:13.090

JSON 最棒的地方在于你不需要清理任何东西。无论您向 JSON 编码器提供什么 - 它总是会输出纯 JSON。显然，JSON 需要进行 HTML 编码，以防您计划在 HTML 页面中使用它。根据 JS 编码器*，您*需要确保其中没有`</script>`（例如通过替换`/`为`\/`）。

你也不需要`JSON.parse`。JSON 是 JavaScript 的一个子集，因此您可以执行类似的操作（为简单起见，使用 PHP-ish）：

```
<script>
    var obj = <?= json_encode($whatever) ?>;
</script> 
```

* * *

如果您真的想将 JSON 作为字符串包含在 JSON 中，请考虑不要这样做。您可以只在其中拥有对象本身 - 无需在 JSON 数据中包含 JSON*字符串。*但如果你有这个，它也应该总是有效的。

# php - 域对象和 DAO。如何从域对象中进行查询，但仍然有两个对象不知道彼此存在

> ID：14125784
> 
> 赞同：1
> 
> 时间：2013-01-02T16:45:58.203
> 
> 标签：php, oop, model-view-controller, datamapper, dao

好的，所以我调用了我的 DomainObject/Model`$user`和我的`$userDAO`对象。

从我目前所读的内容来看，当我需要执行 CRUD 操作（例如获取`$user`我刚刚执行的对象）时：

```
$user = $userDAO->fetchById($userId); 
```

这将返回我的`$user`对象​​。

显然 DomainObject 不应该知道 DAO 对象存在，反之亦然，但是如果用户正在注册并且我运行该`$user->register()`方法怎么办

```
$user->register($firstName, $lastName, $emailAddress, $username, $password etc.); 
```

在该方法的某个地方，我需要检查所选用户名是否已被使用，并且与电子邮件地址相同。

我能想到的唯一方法是`$userDAO`在我的对象中有一个对象的实例，`$user`然后进行如下验证：

```
if($this->userDAO->isUsernameTaken($username)) {
    // the username is already in use
}
else {
    // continue on
} 
```

但这会打破 DomainObject 不应该知道数据库内容的规则，反之亦然，但我认为 DomainObject 并不真正了解数据库内容，因为所有查询都在 DAO 对象中，它只包含对一个对象，但它不明确知道该对象中发生了什么。我是对还是错？

如果我做错了，我应该如何运行一个方法，比如`$user->register()`需要在其中调用一些需要访问数据源的数据库查询，但是不允许 DomainObject/Model 知道任何数据源，所以专家说？

我今天在谷歌上找到了页码，我以为我永远不必继续，但我仍然找不到任何非常可靠的现实生活例子，我开始发疯，因为它减慢了一切.

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:24:28.773

如果您从分层架构的角度考虑应用程序的架构，则需要在 Domain Layer 和 DAO 层之上再构建一层，让这两层保持原样。这个新层被一些人称为服务层或应用层。该服务层的工作是执行用例，例如“注册”一个新用户。例如，服务层中的一个类可能是 UserService，它执行与用户相关的用例，

```
class UserService {

private UserDao userDao;

// constructor
userSercie(){

}

// registers a user
register($firstName, $lastName, $emailAddress, $username, $password etc.) {
    $user = $userDAO->fetchByName($username);
    if($user != null) {
         // the username is already in use
    }
    else {
       // continue on
    }

   }

 // other service methods such as

} 
```

为什么我们需要服务层？正是为了应对像您这样的问题，我们需要服务层。这样你可以看到我们可以保持不同模块之间的关注点分离。

# database - Magento 联系我们电子邮件选项存储在哪个数据库表中？

> ID：14125786
> 
> 赞同：0
> 
> 时间：2013-01-02T16:46:07.990
> 
> 标签：database, magento, contactus

对于我正在编写的应用程序，我需要知道管理面板中的某些设置存储在数据库表中的位置。具体来说，如果登录到管理面板，在`System`-> `Configuration`-> `Contacts`->下`Email Options`，有三个选择框“*发送电子邮件至*”、“*电子邮件发件人*”和“*电子邮件模板*”。

我似乎找不到当前选择的选项存储在哪个表中。我想这样做，因为我正在通过安装脚本创建事务电子邮件（我能够发现事务电子邮件存储在 core_email_template 下），并且想要默认情况下通过我的安装脚本选择它以及更改默认电子邮件。我假设当前选择的选项在数据库的某个地方，我似乎无法找到我一生的位置！

我希望有人会知道这些设置的存储位置，或者是否有人可以分享一些策略来找出哪些表包含这样的信息。

感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:11:10.450

它在 core_config_data 表中

# jquery - MVC 部分视图使用 jquery.get() 触发 Document.Ready() 而不是 Ajax.BeginForm

> ID：14125789
> 
> 赞同：2
> 
> 时间：2013-01-02T16:46:21.467
> 
> 标签：jquery, ajax, asp.net-mvc

我最近注意到 MVC`Ajax.BeginForm`在返回视图时表现得很奇怪。起初一切看起来都很好，但后来我意识到在 document ready 中发生的所有绑定都丢失了。文档就绪未执行。

知道这在其他地方也有效，我发现用 jquery get 做同样的事情确实可以执行文档。但据我了解，这两种方法基本上是在做同样的事情。我的快速解决方法是去掉助手的 Replace TargetId 实现并使用它`AjaxOptions.OnSuccess`来调用我的`jquery.get()`实现。

但是为什么在我使用时 document ready 会触发`jquery.get()`，而不是在我使用`Ajax.BeginForm`替换 a时会触发`div`？

* * *

```
// This method returns a the partial view from DoSomething, but DOES NOT execute the 
// partial view's document.ready
using (Ajax.BeginForm("DoSomething", "Somewhere", new AjaxOptions { HttpMethod = "Post", InsertionMode = InsertionMode.Replace, UpdateTargetId = "demo" }))
{ %>
    <div id="demo"></div>
<% } %> 
```

示例 1\. 用于替换 div 的 MVC Helper 方法

* * *

```
// This method returns nothing from DoSomething, calls getSomething onSuccess and DOES 
// execute the partial view's document.ready
using (Ajax.BeginForm("DoSomething", "Somewhere", new AjaxOptions { HttpMethod = "Post", OnSuccess = "function() { getSomething(); }" }))
{ %>
    <div id="demo"></div>
<% } %>

// this being the simplified js function
function getSomething(){
    var $targetDiv = $("#demo");
    var url = "<%: Url.Action("LoadSomething", "Somewhere")  %>";
    $.get(url, { }, function (result) { $targetDiv.html(result) });
}); 
```

示例 2\. jquery.get() 替换 div 的方法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-22T07:22:37.797

我可以建议如何在没有 JavaScript 代码的情况下构建丰富的应用程序的[替代](https://github.com/IncodingSoftware/Incoding-Framework)方法，例如 Ajax.BeginForm，但更具灵活性和可定制性。

示例：从控制器获取 html 并插入到 dom 元素中。

```
<div id="containerId"></div>
 @(Html.When(JqueryBind.Click)
       .Do()
       .AjaxGet(Url.Action("GetContent", "SomeController"))
       .OnSuccess(dsl => dsl.With(r=> r.Id("containerId"))
                            .Core()
                            .Insert
                            .Html())
       .AsHtmlAttributes()
       .ToButton("Insert button")) 
```

您使用任何 dom 值来请求请求，例如

```
AjaxGet(Url.Action("GetContent", "SomeController",new 
                                       {
                                         Criterie=Selector.Jquery.Name("txtName")
                                        } )) 
```

您可以在[官方](http://www.incframework.com/en-US/TutorialStructure#Ajax_Post)文档中查看示例并从 github下载示例项目[示例。](https://github.com/IncodingSoftware/Browsio/)

# bash - SVN 更新命令重新发现冲突

> ID：14125790
> 
> 赞同：1
> 
> 时间：2013-01-02T16:46:33.900
> 
> 标签：bash, svn, command-line, meld

我`svn update`在一个相当旧的沙箱上通过命令行做了一些本地更改。检测到冲突，所以我看到了通常的输出：

```
Conflict discovered in 'file.cpp'.
Select: (p) postpone, (df) diff-full, (e) edit,
        (mc) mine-conflict, (tc) theirs-conflict,
        (s) show all options: p 
```

我没有在这台计算机上设置我的 svn 命令行选项，所以我首选的启动`meld`解决冲突的方法不可用。因此，我选择将冲突推迟到我建立融合为止。

然后，我使用与[此处所示](http://codingundertheinfluence.blogspot.co.uk/2010/01/using-meld-as-your-external-diff3.html)`meld`类似的过程进行设置。

现在，做另一个`svn update`不会重新发现冲突，因此不会给我启动融合的选项。我只得到一个“ `At revision ...`”显示。有没有办法再次获得“ `Conflict discovered in ...`”线？或者是否有启动 3 路融合解析器的命令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:19:00.477

According to [it's documentation](http://meldmerge.org/help/resolving-conflicts.html) *meld* can be used as a git merge helper. A [git merge helper](http://www.kernel.org/pub/software/scm/git/docs/git-mergetool.html) is called like this:

> When git mergetool is invoked with this tool (either through the -t or --tool option or the merge.tool configuration variable) the configured command line will be invoked with $BASE set to the name of a temporary file containing the common base for the merge, if available; $LOCAL set to the name of a temporary file containing the contents of the file on the current branch; $REMOTE set to the name of a temporary file containing the contents of the file to be merged, and $MERGED set to the name of the file to which the merge tool should write the result of the merge resolution.

So at least you can run it like this:

```
export BASE=some_file.r123
export LOCAL=some_file.mine
export REMOTE=some_file.r124
export MERGED=some_file
meld 
```

I don't know whether this is the same as running it with [its three-file syntax](http://meldmerge.org/help/command-line.html): `meld some_file.r123 some_file.mine some_file.r124`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T21:07:45.783

跟进@AndreKR

*   如何解决与安装 Meld 的延迟冲突

因为（在推迟之后）每个冲突文件（*.MY、*.THEIR、*.BASE）都有 3 个临时文件，并且 Meld 最多可以接受三个文件名作为文件差异的参数，所以你只需运行手`meld MY BASE THEIR`，编辑我的文件以获得所需的结果，保存它，并且，为了关闭合并冲突，在它之后使用`svn resolve --accept 'my-full FILENAME'`（根据`svn help resolve`“当前需要 --accept 选项”，并且`svn resolve`所有更改都必须在 MY 中完成文件）

*   如何将 Meld 用作合并 - 永远不同

`[helpers]`配置文件中的部分：`diff-cmd`，`diff3-cmd`并且`merge-tool-cmd`键将获得共同值 - `meld`（可能带有路径，但没有参数）。使用合并工具会遇到一些小麻烦，因为“...Subversion 会将 4 个参数传递给指定的命令”，而 Meld 只能接受 3 个，但您提到的博客文章包含解决此问题的方法

# web-services - JBoss启动后如何初始化RestEasy web服务

> ID：14125792
> 
> 赞同：3
> 
> 时间：2013-01-02T16:46:37.317
> 
> 标签：web-services, jboss, resteasy, jcs

我有一个部署到 JBoss 7.1.1 的 RestEasy Web 服务。Web 服务依赖于另一个服务。这个其他服务必须在 JBoss 启动时初始化——在第一次调用 RestEasy Web 服务之前。我尝试在 RestEasy 类中使​​用静态初始化块，但直到第一次调用 RestEasy Web 服务方法之一时才会执行。

在调用任何 RestEasy 方法之前，我将不胜感激有关如何初始化依赖服务（在 JBoss 启动时）的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:10:09.010

如果您的静态块无法正常工作，您可以通过调用`web.xml`您的第二个服务实例的侦听器类来初始化您的第二个服务。

```
<listener>
    <description>Initializes the Second Service</description>
    <display-name>Second Service Loader</display-name>
    <listener-class>my.package.path.SecondServiceListener</listener-class>
</listener> 
```

或者，如果您使用的是 Spring，则解决方案更加简单。请详细说明您的环境。

# c# - 使用 protobuf-net 序列化基类属性

> ID：14125794
> 
> 赞同：2
> 
> 时间：2013-01-02T16:47:00.750
> 
> 标签：c#, .net, wcf, protocol-buffers, protobuf-net

我们的实体模型中有一个有些复杂的类层次结构。我们有一个`BaseEntity`所有实体的基类，然后一些“2 级”类派生自`BaseEntity`，一些“3 级”类派生自任何“2 级”类，还有许多“4 级”类派生自任何“3 级”类“ 班级。这意味着，我们有这样的东西：

*   基础实体
    *   派生实体_1
        *   派生实体_1_1
            *   派生实体_1_1_1
            *   派生实体_1_1_2
            *   派生实体_1_1_3
        *   派生实体_1_2
            *   派生实体_1_2_1
            *   派生实体_1_2_2
    *   派生实体_2
        *   派生实体_2_1
            *   派生实体_2_1_1
        *   派生实体_2_2
            *   派生实体_2_2_1
            *   派生实体_2_2_2
            *   派生实体_2_2_3
            *   派生实体_2_2_4

等等等等...

现在，当使用 protobuf-net 通过 WCF 传输这些类型的实例时，仅传输“级别 4”类的属性 - 基类的所有属性都丢失了！

从其他几个 StackOverflow 线程（[此处](https://stackoverflow.com/questions/6505471/protobuf-net-deserialize-base-class-to-inherited-class)、[此处](https://stackoverflow.com/questions/6109868/protobuf-net-base-class-properties-is-not-included-when-serializing-derived-clas)和[此处](https://stackoverflow.com/questions/9530787/serialize-inherited-classes-using-protobuf-net)）中，我了解到这是默认行为，您有两个选项可以解决它：

1.  使用`[ProtoInclude]`基类的属性。
2.  在运行时使用`TypeModel`和配置继承`AddSubType()`。

但是，这些选项在我们的场景中都不可行，因为我们有很多派生类。选项 1 意味着 1 级基类上有数百个属性。选项 2 将意味着大量调用`AddSubType()`.

**还有其他选择吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:35:59.160

最终，它需要了解它应该如何存储数据，以便您可以取回它。它不能只是猜测......所以：唯一可靠的方法是在某处定义模型。但是，这不一定是原始代码：例如，它可能存储在您在运行时包含和处理（通过 AddSubType）的外部文件中。

# html - CSS - 具有最小宽度和最大宽度的多列

> ID：14125795
> 
> 赞同：2
> 
> 时间：2013-01-02T16:47:01.040
> 
> 标签：html, fluid-layout, css

我有一个“时刻”，我被一个我认为应该很容易的问题难住了（而且可能是，我只是过于复杂了，我敢肯定）。

我希望有`div`多个孩子`div's`；孩子们应该根据数量自动扩展或收缩（我正在处理的网站位于允许用户添加或删除项目的 CMS 中）。

我的问题是`div's`尊重最小和最大宽度声明。我有一种预感，这可能与它们的存在有关`float:left`，但我尝试了其他一些变体，但没有运气。

**我的主要目标是让这些列在一个“行”上填充它们的空间，最多 4 列。**

***编辑：***我需要让这些列具有最小宽度和最大宽度。所以如果有 3 个孩子`div's`，他们都应该比有 4 个孩子宽`div's`。

这是我的代码示例：[http ://codepen.io/joe/full/IJvGp](http://codepen.io/joe/full/IJvGp)

**HTML**

```
<div class="sub cf">
  <div class="row">
      <div class="col">
          Column 1
      </div>

    <div class="col">
        Column 2
      </div>

      <div class="col">
        Column 3
    </div>

    <div class="col">
        Column 4
    </div>
  </div>
</div> 
```

**CSS**

```
.sub {
  width: 670px;
  background: #fff;
  border: 10px solid #414042;
}

.sub .row {
  padding: 0;
  float: left;
  width: 100%;
}

.sub .row .col {
  min-width: 166px;
  max-width: 222px;
  width: 100%;
  float: left;
  border-right: 1px solid #D0D2D3; 
  margin: 0;
  padding: 0;
}

.cf::before, .cf::after {
  content: "";
  display: table;
}
.cf::after {
  clear: both;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:57:07.477

删除项目`width:100%;`上的`.sub .row .col`使它们出现在 4 列中。

无论如何，您应该使用表格而不是这种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:10:42.847

## CSS3 解决方案

删除`min`和`max`宽度，`.col`但添加`box-sizing: border-box`属性。`.col`然后在定义下方添加以下代码，该代码将[在此小提琴中产生结果](http://jsfiddle.net/DTwQb/3/)：

```
.sub .row .col:nth-last-of-type(2),
.sub .row .col:nth-last-of-type(2) ~ .col
{
   width: 50%;
}

.sub .row .col:nth-last-of-type(3),
.sub .row .col:nth-last-of-type(3) ~ .col
{
   width: 33.3%;
}

.sub .row .col:nth-last-of-type(4),
.sub .row .col:nth-last-of-type(4) ~ .col
{
   width: 25%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T18:23:19.660

使用 jquery，您可以根据行内的列数将列宽动态设置为 %。

```
var colWidth = (1 / $('.sub.cf .row').children().length * 100) + '%';
$('.sub.cf .col').outerWidth(colWidth);​ 
```

[工作小提琴](http://jsfiddle.net/scrimothy/JkK2K/1/)。插入或删除更多列并重新运行它以查看它是如何工作的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T17:04:20.890

你可以尝试这样的事情：

HTML：

```
<div class="sub">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
</div> 
```

CSS：

```
.sub {
    text-align: justify;
    width: 670px;
    background: #fff;
    sborder: 10px solid #414042;
}

.sub div {
    display: inline-block;
    max-width: 166px;
    min-height: 100px;
    border-right: 1px solid #D0D2D3;
    margin: 0;
    padding: 0;
}

.sub:after {
    content: '';
    width: 100%;
    display: inline-block;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T17:20:54.777

这里的主要问题是`width: 100%`和`max-width: 222px`。与`width: 100%`您一起使孩子的div尽可能大。并且因为`max-width: 222px`它们都变成了 222px 宽度。你的父 div 是 670px 宽度，所以如果你做数学：`222px * 4 = 888px`. 孩子 div 的总宽度超过了父母的宽度，这就是为什么它把最后一个 div 拉下来。

你可以试试： [Codepen](http://codepen.io/joe/pen/oIxKF)

如果您不太关心支持 IE8，那么 ScottS 解决方案是最好的。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-02T16:56:19.890

您有以下代码。

```
max-width:222px; 
```

将其降低到某个值，以便可以容纳它！

```
max-width:166px; 
```

为我工作！

# node.js - express.js - 仅对非静态 url 使用中间件

> ID：14125799
> 
> 赞同：3
> 
> 时间：2013-01-02T16:47:19.627
> 
> 标签：node.js, express

如何创建在所有不提供静态文件的 url 上运行的中间件？

我正在考虑检查是否`req.url`不以“/js/”、“/css/”或“/images/”开头，但必须有更好的方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T16:52:22.663

最简单（也是最快）的方法是将静态文件中间件放在“包罗万象”中间件之前：

```
app.use(express.static(STATIC_DIR_HERE));
app.use(function notStatic(req, res, next) {
  // everything here will be non-static routes
}); 
```

（`app`你的快递实例在哪里）

# javascript - 如何确保显示静态网站的最新版本？

> ID：14125800
> 
> 赞同：3
> 
> 时间：2013-01-02T16:47:23.650
> 
> 标签：javascript, jquery, html, css, web-deployment

我知道作为用户自己，我可以按“F5”来确保或清除我的缓存等。

我只是想知道从网页设计师的角度来看，是否有任何东西可以使这更加“自动化”，因为许多用户可能不知道这样做。

对于动态站点，这可以通过服务器端的“魔法”来完成。

似乎对类似问题的一些答案意味着以某种方式编辑 .htaccess，所以我将对此进行调查。但是，如果有人有适用于静态站点的“快速提示”或代码片段，那就太好了。

该网站上唯一使用的 PHP 是用于联系表格，因此它可以自动发送电子邮件。该网站的其余部分只是图像、文本等。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-02T16:49:46.400

您无法使用某种 JS 解决方案清除缓存，但您*可以*做的是，每次对您的网站进行新部署/更新时，在您的 css/js 末尾添加一个虚假版本/等编号。

例如：

```
main.css?v=1.5
myCode.js?v=123 
```

下次更新时，只需稍微更改一下即可：`main.css?v=1.51`当用户再次访问您的站点时，由于 URL 将不同，它会自动重新加载它，确保他们使用最新的样式表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-02T16:50:43.877

尝试将缓存清除变量添加到包含文件的末尾。例如，不是包括，而是`main.js`包括`main.js?d=20120102`。JS/CSS 文件会忽略该变量，但该变量会导致客户端认为它是一个尚未缓存的新文件。然后，您可以在更新文件时轻松更改变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T16:50:38.640

尝试：

```
<img src="image/path.jpg?t=<?=time();?>" /> 
```

对于您的“静态”网站中的每个图像。当您使用 *.html 文件时，您可以使用 javascript 在 onload 事件中“重新加载”每个图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T16:59:38.747

实现这一目标的方法很少。

您可以在静态 html 页面中设置缓存元信息，以指示浏览器不缓存并将请求重定向到原始服务器

```
<META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
<meta http-equiv="cache-control" content="max-age=0" />
<META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE"> 
```

使用php，您可以像这样设置标题

```
<?php
  //set headers to NOT cache a page
  header("Cache-Control: no-cache, must-revalidate"); //HTTP 1.1
  header("Pragma: no-cache"); //HTTP 1.0
  header("Expires: Sat, 26 Jul 1997 05:00:00 GMT"); // Date in the past 
```

您还可以使用`.htaccess`. 为此，您需要`mod_headers`启用。只需将此代码段放入您的`.htaccess`文件中。

```
<filesMatch ".(html|htm|js|css)$">
FileETag None
<ifModule mod_headers.c>
Header unset ETag
Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
Header set Pragma "no-cache"
Header set Expires "Wed, 11 Feb 1994 08:00:00 GMT"
</ifModule>
</filesMatch> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T02:47:49.767

通过使用 html5 样板 ( [http://html5boilerplate.com/](http://html5boilerplate.com/) )，并确保我转移了他们的“预制”.htaccess，我的网站可以正常显示更新。

老实说，我什至没有真正查看该文件，但我确信它包含了此处描述的一些概念。

# ftp - 如何在 Coda 中更改 FTP 端口？

> ID：14125806
> 
> 赞同：0
> 
> 时间：2013-01-02T16:47:38.393
> 
> 标签：ftp, coda

我更改了服务器上的 FTP 端口（不是为了安全，而是为了从阻止端口 21 的 Panera Bread 访问 :)），我可以使用 Firebird 等 FTP 客户端正常访问它。

但是当我尝试更改 Panic's Coda 中的端口时，该端口似乎已保存，但当我尝试连接时总是出现“非法端口”错误。这与端口 2121 或端口 23 或我尝试的任何东西相同。有谁知道如何解决这一问题？很难判断它是 Coda 错误还是现在，并且不可能从 Coda 获得响应。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T06:52:27.227

原来这是 Coda 中的一个错误，正在由他们解决。你可以直接连接，但是如果你尝试设置一个项目，它会在除 21 之外的任何端口上失败。

# asp.net-mvc - ASP.NET WebApi 如何获取控制器收到的 JSON

> ID：14125808
> 
> 赞同：5
> 
> 时间：2013-01-02T16:47:44.800
> 
> 标签：asp.net-mvc, asp.net-web-api

在我的控制器中：

```
public class ProfileController : ApiController
{
    public HttpResponseMessage PostCreateProfile (HubBasicProfile bp)
    {

        HttpResponseMessage result = null;    
        if (bp == null)
        {
            result = Request.CreateResponse(HttpStatusCode.InternalServerError, "Could not instantiate Profile with JSON provided.");
        }

... 
```

json 的自动反序列化以实例化 bp 对象发生在后台。

我想查看控制器接收到的 json，以尝试解决我们遇到的问题。此时，bp 始终为空。（当我说我想看看时，我想检查一下，看看反序列化器哪里出了问题。）

我查看了正在发送的 json，这似乎很好。

那么，谁能告诉我如何调试这个 json -> bp 对象进程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T17:01:04.410

启用跟踪并查看序列化程序是否记录任何警告[http://www.hanselman.com/blog/WhenInDoubtTurnOnTracing.aspx](http://www.hanselman.com/blog/WhenInDoubtTurnOnTracing.aspx)。

具体在此处查找以进行[跟踪](http://blogs.msdn.com/b/henrikn/archive/2012/08/15/asp-net-web-api-released-and-a-preview-of-what-s-next.aspx)：

*   添加[Nuget 包](http://nuget.org/packages/Microsoft.AspNet.WebApi.Tracing)
*   按照其余的说明进行操作。

没有看[这里](http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api)来实现你自己的非常基本的。

[通过JsonLint](http://jsonlint.com/)测试运行您的 JSON 。

[还要确保您的模型使用Json2C# 之](http://json2csharp.com/)类的东西正确定义。

还要添加一个断点并检查`ModelState`控制器中的属性，这可能包含一些绑定错误和警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T16:49:48.260

如果您想在调试器中查看它，它应该在请求的表单集合中可用

# jquery - 将 HTML 表格导出到 Excel，但为文件选择一个名称

> ID：14125819
> 
> 赞同：7
> 
> 时间：2013-01-02T16:48:23.030
> 
> 标签：jquery, excel

我正在使用这个功能

```
var tableToExcel = (function() {
  var uri = 'data:application/vnd.ms-excel;base64,'
, template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>'
, base64 = function(s) { return window.btoa(unescape(encodeURIComponent(s))) }
, format = function(s, c) { return s.replace(/{(\w+)}/g, function(m, p) { return c[p];      }) }
  return function(table, name) {
    if (!table.nodeType) table = document.getElementById(table)
    var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}
    window.location.href = uri + base64(format(template, ctx))
 }
})() 
```

这是示例：

[http://jsfiddle.net/insin/cmewv/](http://jsfiddle.net/insin/cmewv/)

在该示例中，他们更改了工作表的名称，但是有没有办法更改文件的名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:03:26.457

请参阅以下位置的答案：[使用数据时是否有任何方法可以指定建议的文件名：URI？](https://stackoverflow.com/questions/283956/is-there-any-way-to-specify-a-suggested-filename-when-using-data-uri)

基本上，没有办法用 JavaScript 做到这一点。如果通过链接下载文件，您可以使用该属性`<a>`指定文件名，但这[并未得到广泛支持](http://caniuse.com/#feat=download)（目前只有 Chrome 和 BB10）。`download`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-07T11:49:01.373

这对我有用：

```
 $scope.exportData = (function() {
              var uri = 'data:application/vnd.ms-excel;base64,'
                , template = '<html xmlns:o="urn:schemas-microsoft-com:office:office" xmlns:x="urn:schemas-microsoft-com:office:excel" xmlns="http://www.w3.org/TR/REC-html40"><head><!--[if gte mso 9]><xml><x:ExcelWorkbook><x:ExcelWorksheets><x:ExcelWorksheet><x:Name>{worksheet}</x:Name><x:WorksheetOptions><x:DisplayGridlines/></x:WorksheetOptions></x:ExcelWorksheet></x:ExcelWorksheets></x:ExcelWorkbook></xml><![endif]--></head><body><table>{table}</table></body></html>'
                , base64 = function(s) { return window.btoa(unescape(encodeURIComponent(s))) }
                , format = function(s, c) { return s.replace(/{(\w+)}/g, function(m, p) { return c[p]; }) }
              return function(table, name) {
                if (!table.nodeType) table = document.getElementById(table)
                var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}
                //window.location.href = uri + base64(format(template, ctx))
                var link = document.createElement("a");
                    link.download = "filename.xls";
                    link.href = uri + base64(format(template, ctx));
                    link.click();
              }
            })() 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-30T10:07:17.830

也为我工作。我添加了一个提示以动态获取下载名称

```
 var ctx = {worksheet: name || 'Worksheet', table: table.innerHTML}
    //window.location.href = uri + base64(format(template, ctx))
    var downloadName = prompt("write some explanation", "table");
    var link = document.createElement("a");
    link.download = downloadName + ".xls";
    link.href = uri + base64(format(template, ctx));
    link.click(); 
```

# jdedwards - 对 JDEDTA.js 的更新未在浏览器中显示

> ID：14125822
> 
> 赞同：0
> 
> 时间：2013-01-02T16:48:33.933
> 
> 标签：jdedwards

我们收到来自 Oracle 的指示，要求我们更新 JDEDTA.js 文件以解决我们在安装过程中遇到的特定问题。

但是，我们发现该文件出现在文件系统的两个位置，并更新了这两个文件，重新启动了服务，清除了客户端浏览器上的缓存（甚至尝试了不同的浏览器），但没有进行更改被反映。

这是我必须在特定的 .jar 文件或其他位置更新的东西吗？

对于这个问题的含糊之处，我深表歉意，我不是 CNC，只是想帮助解决问题。

此致，

哈尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:37:40.070

每次我们对 web 界面进行更改时，我们都会在该目录下进行修改 C:\e812\system\OC4J\j2ee\home\applications\webclient.ear\webclient\js

希望对你有帮助

# jquery - 以不同的大小/比例定位img并将其填充到div中

> ID：14125829
> 
> 赞同：0
> 
> 时间：2013-01-02T16:49:04.607
> 
> 标签：jquery, html, css, position, image

我有一个用户上传图像的网站，图像处理在服务器上进行，大小为 400px*400px。图像可能有各种无法控制的原始尺寸。显示它们时，我无法将它们正确定位在 200px*200px div 中。它要么被挤压/拉伸，要么留下像空间一样的信箱。这里的偏好是以保持正确比例和居中为代价来裁剪图像。任何 jquery/css 已知方法可以做到这一点？

**编辑**

```
.container{width:200px; height:200px;}
.container img{width:100%;} 
```

这是我发现的最接近的解决方案，但它根本不令人满意（高度/宽度显然根据图片而变化）......目前我们使用信箱来“缩放”图像。还有使用[PhotoStack的 Pixel Daily 的照片堆栈插件](http://pixelsdaily.com/resources/html-css/css-image-stacks/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:46:28.327

给图像高度和宽度 100%

尝试

```
.imgClass{  //your class name
height:100%;
width:100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T22:41:44.913

对于现代浏览器（没有 IE8 或更低版本），您可以通过 css 仅使用[background-size](http://www.w3schools.com/cssref/css3_pr_background-size.asp)属性“cover”和内联背景属性来实现这一点。

```
 <ul>
    <li style="background:url('image/path.jpg') center center;background-size:cover"></li>
    <li style="background:url('image/path.jpg') center center;background-size:cover"></li>
</ul> 
```

[http://jsfiddle.net/EXpb2/1/](http://jsfiddle.net/EXpb2/1/)

# python - 在 Python 中搜索四元组中的元组

> ID：14125830
> 
> 赞同：0
> 
> 时间：2013-01-02T16:49:08.133
> 
> 标签：python, tuples

我有一组四元组（'myTup'）和一个元组（'tupleToSearch'）。我需要将这个元组的所有实例搜索到每个四元组中。'tupleToSearch' 将与每个四元组的前两个元素进行比较，如果匹配，则将报告匹配的四元组的最后两个元素。

我正在使用以下代码来做同样的事情。

```
myTup = set([('0994900', '50.2297', 'name1', '<4'),
             ('2176041', '24.2880', 'name2', 'POSITIVE'), 
             ('2240663', '51.2510', 'name3', '25.0'), 
             ('2240663', '51.2510', 'name4', '29.0'), 
             ('2240663', '51.2560', 'name4', '29.0')])

tupToSearch = ('2240663', '51.2510')

[(x[2],x[3]) for x in myTup if tupToSearch == (x[0],x[1])] 
```

我需要扩展此代码，以便它执行范围比较而不是精确搜索。

例如，给定`tupleToSearch = ('2240663', '51.2510')`，我想找到第二个元素 >= 51.2510 但小于（51.2510 + 偏移量）的那些四元组。这里的'offset'是一个常数。

上述情况下的正确答案将报告最后三个四元组（每个只有最后两个元素）。

如何将第二个元素转换为数值以进行正确比较。

此外，我需要一种有效的方法来执行此操作，因为我需要重复此步骤近十亿次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:31:56.233

好吧，有一个[float 函数](http://docs.python.org/2/library/functions.html#float)，可以用来编写这段代码：

```
low_target = float(tupToSearch[1])
high_target = low_target + constant
[(x[2],x[3]) for x in myTup if low_target<=float(x[1])<=high_target] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:00:55.033

过滤掉你想要的元素，然后提取每个元素的块来创建你的结果。

```
[(el[2], float(el[3])) for el in itertools.ifilter(lambda oel: oel[0] == search_tup[0] and float(search_tup[1]) <= float(oel[1]) <= float(search_tup[1]) + offset, my_tup)] 
```

或者，使用生成器一次性完成整个操作（请注意，与列表组合不同，生成器将优雅地处理`el[3]`无法转换为浮点数的情况）。

```
def filtered_data(input, search_target, offset):
    key = search_target[0]
    value = float(search_target[1])
    for entry in input:
        entry_value = float(entry[1])
        if entry[0] == key and entry_value <= value <= entry_value + offset:
            try:
                result_value = float(entry[3])
            except ValueError:
                result_value = entry[3]
            yield (entry[2], result_value)

[filtered_data(my_tup, search_tup, .019)] 
```

请注意，由于您在此处使用浮点值，因此您的过滤过程将始终受到浮点十进制值转换为浮点二进制值时引入的无误错误的影响。因此，您可能还想`Decimal`在基值中使用或构建偏移量。

# php - 需要表单使用多个提交按钮

> ID：14125831
> 
> 赞同：0
> 
> 时间：2013-01-02T16:49:09.040
> 
> 标签：php, jquery, forms, postgresql, insert-update

我有一个表格，我想显示两个版本的数据。我知道我可以为此设置两个变量，但我不知道如何让它插入到 postgres 数据库中。我已经尽可能地填充数据并让标签输入新数字以插入表格。

这是我到目前为止所拥有的...

```
<script>
window.onload = function() {
    <?
    $yesterday = date('Y-m-d', strtotime('-1 day'));
    if ($_REQUEST['start'] == '') {
        $_REQUEST['stores'] = array(1,2,3,7,8,9,17,18,19,23,16,11,4,5,6);
        $_REQUEST['start'] = $yesterday;
    } else {
        $_REQUEST['stores'] = array(1,2,3,7,8,9,17,18,19,23,16,11,4,5,6);
    }
    $_REQUEST['submit'] = 'Get Data'; 
    ?>
}

</script>

<?
// various arrays and db connections we're going to need later 
include('/home/...some_data_goes_here.../db_connect.inc');

$dbx = DB::connect('******');
$dbx->setFetchMode(DB_FETCHMODE_ASSOC);

//get the data based on the date.
$start = $_REQUEST['start'];

//$stores = array(1 => '1,177,18', 2 => '2,277,28', 3 => '3,377,38', 7 => '4,477,48', 8 => '5,577,58', 18 => '338', 19 => '50,51', 9 => '6,677,68', 17 => '8,877,818', 16 => '44,45,47', 11 => '7,770,78', 4 => '11,15,17', 5 => '22,25,27', 6 => '33,35,37');

$formstores = $_REQUEST['stores'];

foreach($stores as $sid => $pcs) {
    $store_name = $db->getOne('SELECT store_name FROM stores WHERE store_id = ?', array($sid));
}

foreach($formstores as $k => $sid) {

        if(empty($storeDataMain)){ //array is empty so make one
            $storeDataMain = array();
        }

        //get the store names
        $store_name = $db->getOne('SELECT store_name FROM stores WHERE store_id = ?', array($sid));
        if(DB::isError($store_name)) { echo '<div class="error">Error '.$store_name->getdebuginfo().'</div>'; return; }

        $tempups = $db->getOne('SELECT sum(count) FROM traffic WHERE store_id = ? AND tdate = ?', array($sid,$start));
        //echo $tempups .' | ';
        if(DB::isError($tempups)) { echo '<div class="error">Error '.$tempups->getdebuginfo().'</div>'; return; }
        $tups = $tempups/2;
        //echo $tups;

        //Build array out and return it 
        $storeDataMain[$store_name] = array('trafficGuests' => number_format(floatval($tups),1,'.',',')); // floatval prevents the numbers from rounding to zero
}   
?>

<h3 class="heading">Traffic Updates</h3>
<p>Enter dates in yyyy-mm-dd format.</p>

<script type="text/javascript" src="/css/prototype.js"></script>
<script type="text/javascript" src="/css/scriptaculous.js"></script>
<script type="text/javascript" src="/css/datepicker.js"></script>
<form name="setTraffic" method="get" action="/traffic/updateTraffic.php">

<!-- Build the table where they can input the date to be changed -->
<table>
    <tr>
        <th>Date</th>
    </tr>
    <tr>
        <td>
            <input type="text" name="start" id="start" value="<?=$_REQUEST['start']?>" alt="mm/dd/yyyy" onblur="if(this.value.length){valid=check_date(this.value);if(!valid){this.value='';this.focus();alert('Invalid date input');}else{this.value=valid;}}" onchange="if(this.value.length){valid=check_date(this.value);if(!valid){this.value='';this.focus();alert('Invalid date input');}else{this.value=valid;}}" onfocus="if(this.value == this.defaultValue) this.value = ''" /></td>
            <script type="text/javascript">
                                var start_picker = new DatePicker({
                                    relative    : 'start',
                                    language    : 'en',
                                    dateFormat  : 'yyyy-mm-dd',
                                    showDuration: 0.1,
                                    closeEffectDuraction: 0.1,
                                    disableFutureDate: true,
                                    disablePastDate: false,
                                    keepFieldEmpty : true
                                });
            </script>
        </td>
    </tr>
</table>
<input class="button" type="submit" name="submit" value="Get Data" id="submit" />
</form>
<form method="post" action="">
    <table>
        <tr>
            <th style="height: 20px; width: 165px; vertical-align: bottom;">Stores</th>
                <? //build the list of stores for the headers.
                    foreach($storeDataMain as $k => $val){
                        echo '<th style="text-align: center; vertical-align:   bottom;">'.$k.'</th>';
                    }
                ?>
        </tr>
        <tr>
            <th style="height: 20px; vertical-align: bottom;">Guests for <?=$start?>    </th>
                <? //format and print out the traffic for each store
                    foreach($storeDataMain as $k => $val){
                    echo '<td style="text-align: center; vertical-align: bottom; font-size: 14px;">'.$val["trafficGuests"].'</td>';
                } 
            ?>
    </tr>  

    <tr>
        <th style="height: 20px; vertical-align: bottom;">Adjustment for <?=$start?></th>
        <? //build the input fields identified based on store id.
                foreach($formstores as $pcs) {
                    echo '<td><input class="newTraffic" type="number" style="width: 65px; text-align: right;" name="new_count" id="'.$pcs.'" value="'.$count.'" />'.$count.'</td>';
                    <script>// get the data ready for inserting into the database
                        if(isset($count)){
                            $count = $_POST['']
                        } else {
                            $count = '';
                        }}

                        if( $_POST ){
                            $count = $_POST["count"];
                            $store_id = $sid

                        $insertCounts = $db->query('INSERT INTO traffic (store_id, thour, tdate, count, door) VALUES ('$sid', )');
                    }
                }
                </script>

                }
            ?>
        </tr>      
    </table>
    <input class="button" type="submit" name="submit2" value="Submit" id="submit" />
</form>

<h5 style="color: #707070;">New Traffic Counts</h5>
<table style="color: #707070;">
        <tr>
            <td style="height: 20px; width: 165px; font-weight: bold; vertical-align: bottom;">Stores</td>
            <? //display the list of stores for the output of the new counts.
                    foreach($storeDataMain as $k => $val){
                        echo '<td style="text-align: center; width: 69px; padding: 4px; font-weight: bold; vertical-align: bottom;">'.$k.'</td>';
                    }
                ?>
        </tr>
        <tr>
            <td style="height: 20px; vertical-align: bottom; font-weight: bold;">Guests for <?=$start?></td>
                <? //format and display the NEW traffic for each store
                    foreach($storeDataMain as $k => $val){
                        $newCount = $val["trafficGuests"] + $count[$pcs];
                        echo '<td style="text-align: center; vertical-align: bottom; font-size: 14px;">'.$newCount.'</td>';
                    } 
                ?>
        </tr> 
</table>
</form> 
```

如果您想查看页面的外观，您可以转到 [这里] (https://picasaweb.google.com/105736785937866961668/January22013#5828892865441021874) 并且输入旨在接受对数字的调整，无论是它是积极的或消极的。从那里将其插入数据库表并添加到现有总和中，以便新的总数可以反映在底部的灰色表中。

我知道这可能无法完成，但如果无法完成，我需要能够达到我的数据仍将输入到表格中并在提交后反映的地步。以我现有的代码知识，我似乎无法到达那里。

**请帮忙？！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:49:29.813

I can't comment on a question yet, but I think there are a few issues with your php. as @Anubis points out the insert statement needs work. Also, the first few lines of actual php code look like they are wrapped in a javascript event for the window loading. This is not needed as the code doesn't produce any javascript to run. This code will be run on the server during every page load anyway. There are a few other places you have `<script>` tags that are not needed and probably cause some errors.

I think what you want is to do is add an identifier to your post fields to help get the correct values. So when you are building your input boxes do it like this:

```
echo '<td><input class="newTraffic" type="number" style="width: 65px; text-align: right;" name="new_count__'.$pcs.'" id="'.$pcs.'" value="'.$count.'" />'.$count.'</td>'; 
```

And access the submitted values as follows: `$_POST['new_count__' . $pcs]`

You are trying to integrate two separate processes which makes your code hard to follow and more error prone. I see what you are trying to do but try putting input processing code at the top and display code towards the bottom. So in rough code/comments:

```
<?php //check for and process the new data
    //if posted values
    //process $_POST for values to add/subtract
    //if(isset($_POST)) {
    //if(!empty($_POST) {
    switch ($_POST['submit']) {
        case 'submit':
            //new date selected
            //get new display data
            break;
        case 'submit2':
            //new traffic counts submitted
            //for each input submitted
            //add/subtract value to current database traffic value
            //get new display data
            break;
        default:
            //stuff if no submit
            //get default display data
    }

?>

<html>
    display html data here
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:15:37.847

您的插入语句是错误的：

```
//, thour, tdate, count, door <- are there default values defined for theses? if not set the values
$db->query('INSERT INTO traffic (store_id) VALUES ('.$sid.')'); 
```

在编程时你应该使用这个错误设置：

```
error_reporting(E_ALL | E_STRICT);
ini_set('display_errors', 1); 
```

这会在出现问题时为您提供大量错误和描述，并使调试更容易。

在生产环境中“display_errors”应该是 0！

# android - 用户触摸图形时获取价值 - Android

> ID：14125832
> 
> 赞同：-4
> 
> 时间：2013-01-02T16:49:12.043
> 
> 标签：android, graph, gesture

![PIC](../Images/2fcab7ed242250c6b1610765f7c707e8.png)

（这只是另一个应用程序的屏幕截图）

我正在尝试使用[http://www.jjoe64.com/p/graphview-library.html来实现这一目标](http://www.jjoe64.com/p/graphview-library.html)

我希望在用户触摸图表时出现十字准线并显示该点的 X 轴值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T16:58:25.163

您将需要一种方法将屏幕上的*X 位置**转换*为图形上的 X 位置，并显示与图形中查找的 X 位置相对应的 Y 值。

 *我能想到的最简单的方法是获取屏幕的像素宽度（假设您的图形适合整个宽度），并通过在视图中覆盖下面的此方法来注册触摸事件：

```
@Override
public boolean onTouchEvent(MotionEvent event)
{
 //TODO get x position tapped on the view and translate to x position on graph
} 
```

在该方法中，您可以获得点击的 x 坐标（来自 MotionEvent 对象），然后转换为图形的位置。

例如，您可以计算出点击屏幕的百分比（例如屏幕宽度为 400 像素，用户点击 300 像素，即长度的 75%）然后将该百分比移动到图表的数据点（所以 75 % 通过有序数据集）

然后，您可以显示一个弹出窗口或向您的`onDraw`方法添加一些内容，以将数据点添加为小覆盖。

**注意：您需要原始数据点来执行查找，除非您要尝试猜测图形的点在 y 轴上对应于什么...***

# javascript - 我想在选择单选按钮时显示表格

> ID：14125835
> 
> 赞同：0
> 
> 时间：2013-01-02T16:49:17.107
> 
> 标签：javascript, html, toggle, show-hide

我正在尝试显示几个复选框的 onClick 或 onSelect 表。I have a checkbox for 'standard' which, when selected, should display a table of standard options, and I have a checkbox for 'customized' which, when selected, should display a table of customized options.

现在表格切换但不会同时显示。换句话说，如果两者都被选中，我需要显示两个表，一个在另一个之下。如果仅选中“标准”，则仅显示“标准”选项，如果仅选中“自定义”，则仅显示“自定义”选项。

这是一个小提琴：http: [//jsfiddle.net/4tcRD/2/](http://jsfiddle.net/4tcRD/2/)

这是我的 JS：

```
function toggleTables(which)
{

    if(which == "1") {
        document.getElementById('customize').style.display = "table";
        document.getElementById('standard').style.display = "none";

        }
    if(which == "2") {
        document.getElementById('standard').style.display = "table";
        document.getElementById('customize').style.display = "none";

        }
} 
```

这是我的 HTML：

```
<input name="checkbox1" type="checkbox" id="customize_1" onClick="toggleTables('2')" value="checkbox" />
<label for="checkbox1"></label> Standard&nbsp;&nbsp;&nbsp;
<input name="checkbox2" type="checkbox" id="customize_0" onClick="toggleTables('1')" value="checkbox" checked="checked" />
Customize

<br />
<table width="100%" class="imagetable" cellpadding="0" cellspacing="0" id="customize">
    <tr><td>customize</td></tr>                   
</table>

<table width="100%" class="imagetable" cellpadding="0" cellspacing="0" id="standard" style="display: none">
    <tr><td>standard</td></tr>                   
</table> 
```

请帮我一把。- 用复选框更新**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:02:16.473

可以只检查函数内复选框的状态。

```
function toggleTables()
{
    var isCustomize = document.getElementById('customize_1').checked; 
    var isStandard = document.getElementById('standard_1').checked;  

    var customize = document.getElementById('customize'); 
    var standard = document.getElementById('standard');    

    customize.style.display = isCustomize  ? 'table' : 'none';
    standard.style.display = isStandard  ? 'table' : 'none';
}​ 
```

[http://jsfiddle.net/4tcRD/3/](http://jsfiddle.net/4tcRD/3/)

# android - textswitcher 更改默认淡入淡出

> ID：14125836
> 
> 赞同：1
> 
> 时间：2013-01-02T16:49:17.930
> 
> 标签：android

我使用此代码创建一个文本切换器，我想通过值设置不同的淡入淡出时间。我如何创建其他 xml 来设置几个淡入淡出？

```
mSwitcher = (TextSwitcher) findViewById(R.id.switcher);
mSwitcher.setFactory(this);
Animation in = AnimationUtils.loadAnimation(this,android.R.anim.fade_in);
Animation out = AnimationUtils.loadAnimation(this,android.R.anim.fade_out);
mSwitcher.setInAnimation(in);
mSwitcher.setOutAnimation(out); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T16:53:55.287

`anim`在项目文件夹中创建一个名为的`res`文件夹。像这样向其中添加一些 XML 文件：

**fadin.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
       android:interpolator="@android:anim/accelerate_interpolator"
       android:fromAlpha="0.0" android:toAlpha="1.0" android:duration="300" /> 
```

**淡出.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
       android:interpolator="@android:anim/accelerate_interpolator"
       android:fromAlpha="1.0" android:toAlpha="0.0" android:duration="300" /> 
```

在您的 java 中更改这些行：

```
Animation in = AnimationUtils.loadAnimation(this,android.R.anim.fade_in);
Animation out = AnimationUtils.loadAnimation(this,android.R.anim.fade_out); 
```

变成这样：

```
Animation in = AnimationUtils.loadAnimation(this,R.anim.fadein);
Animation out = AnimationUtils.loadAnimation(this,R.anim.fadeout); 
```

调整 xml 文件中的值以使淡入淡出如您所愿。

# java - 在java中调用静态方法

> ID：14125841
> 
> 赞同：11
> 
> 时间：2013-01-02T16:49:47.693
> 
> 标签：java, static-methods

> **可能重复：**
> [为什么在空引用上调用（静态）方法不会抛出 NullPointerException？](https://stackoverflow.com/questions/3293353/how-come-invoking-a-static-method-on-a-null-reference-doesnt-throw-nullpointe)

任何人都可以解释为什么以下程序的输出是“**调用**”

```
public class Test4{

  public static void method(){
    System.out.println("Called");
  }

  public static void main(String[] args){
    Test4 t4 = null;
    t4.method();
  }
} 
```

我知道我们可以使用类引用调用静态方法，但在这里我使用空引用调用。请澄清我的疑问

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-02T16:50:49.133

在字节码中

```
Test4 t4 = null;
t4.method(); 
```

将会

```
Test4 t4 = null;
Test4.method(); 
```

编译器会将调用转换为静态方法的类名。请参阅我自己问过的关于 SO的这个[**问题。**](https://stackoverflow.com/questions/13752479/why-doesnt-this-code-throw-nullpointerexception)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T17:24:41.417

实例是否为空无关紧要，因为您正在调用**静态方法。** 这样想吧。

每个**静态方法**都等价于**类方法**，而非**静态方法**等价于**实例方法**。

因此，只要您使用**静态方法或成员**，实例所需的值并不重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:52:32.413

静态方法可以通过类名或实例调用。我会尽量避免通过实例调用它们（由于不良做法，许多工具也会警告您这样做）。

# javascript - 使用 jquery 查找下一个最近的可聚焦元素？

> ID：14125842
> 
> 赞同：12
> 
> 时间：2013-01-02T16:49:49.173
> 
> 标签：javascript, jquery, tabindex

我希望我的文本框具有这样的功能，即每次用户按 Enter 键时，只要它们可以被聚焦，它就会聚焦到下一个最接近的元素（输入、复选框、按钮、单选、选择、a、div）。我怎样才能使用 jquery 做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-02T17:05:45.173

我以前已经这样做了。在这里尝试我的解决方案[http://jsfiddle.net/R8PhF/3/](http://jsfiddle.net/R8PhF/3/)

```
$(document).ready(function(){
    $('#mytextbox').keyup(function(e){
        var code = (e.keyCode ? e.keyCode : e.which);
        if(code == 13) {
            var tabables = $("*[tabindex != '-1']:visible");
            var index = tabables.index(this);
            tabables.eq(index + 1).focus();
        }        
    });
});​ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-02T17:03:45.257

顺便说一句，这是一个合法的技术问题，很可能是业务需求。我经常被要求将这种行为构建到后台应用程序中。有许多本机应用程序以这种方式运行。

我通过使用带有 contenteditable=true 的 DIV 构建表单来满足此要求，如下例所示。

```
<html>
<head>
  <style type="text/css">

    div.input { border:1px solid #aaa; width:300px; }

  </style>

</head>
<body>

    <div contenteditable="true" class="input"><strong>explore the world,</strong> e.g. paris, france</div>

</body>
</html> 
```

您可以捕获 ENTER 的关键事件，并使用 JQuery 将焦点设置在下一个兄弟上。

如果您需要进一步说明，请告诉我。

希望这可以帮助。祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:09:23.650

算法方面：

1.  保留所有可以关注的元素的列表。不要为此依赖 DOM **。**您*必须*自己保留这份清单。如果您不知道页面上有哪些元素，那么您已经做错了。DOM 是*视图*而不是*数据存储*，请相应地对待它。很多使用 jQuery 的新手都会犯这个错误，而使用 jQuery 很容易犯这个错误。

2.  查找页面上所有可聚焦元素的位置。按照1.最好的办法当然是不看DOM就*知道所有元素的相对位置。*使用 jQuery，您可以使用`.dimension()`. 您可能需要做一些簿记以使此列表保持最新（即当您的数据/视图发生更改时）。

3.  找到当前焦点元素的位置。

4.  使用某种算法将其与您的其他职位列表进行比较并获得*最接近*的（这可能意味着很多事情，您可能知道自己想要什么）。

5.  然后将焦点设置到元素上。

您可以在这里做出很多选择，有些取决于性能，有些取决于交互和界面设计。

# java - int 的基本算术运算 - Java

> ID：14125843
> 
> 赞同：12
> 
> 时间：2013-01-02T16:49:54.713
> 
> 标签：java, arithmetic-expressions

我最近注意到 Java 的一个关于 Java 中基本算术运算的特质。使用以下代码

```
byte a = 3;
byte b = 4;
byte c = a * b; 
```

我收到“类型不匹配”编译错误...

Java 中的基本算术运算（`+`, `-`, `*`, `/`）是否仅对原始数据类型`int`和更高阶（`long`,`double`等）执行，而对`byte`and`short`的算术运算首先转换为`int`然后求值？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-02T16:53:44.060

除非编译器可以确定值在范围内，否则对`byte`和`char`的操作`short`将扩大到。`int`

```
final byte a = 3, b = 4;
byte c = a * b; // compiles

final byte a = 3, b = 40;
byte c = a * b; // compiles

final int a = 3, b = 4;
byte c = a * b; // compiles !! 
```

但

```
byte a = 3, b = 4;
byte c = a * b; // doesn't compile as the result of this will be `int` at runtime.

final byte a = 30, b = 40;
byte c = a * b; // doesn't compile as the value is too large, will be an `int` 
```

顺便说一句，即使它导致溢出，它也会编译。:]

```
final int a = 300000, b = 400000;
int c = a * b; // compiles but overflows, is not made a `long` 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-02T16:53:42.747

整数运算的结果是`int`或`long`。这在[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.2)中有详细说明：

> **4.2.2\. 整数运算**
> 
> 数值运算符，**产生一个`int`or`long`**类型的值：
> 
> *   一元加减运算符 + 和 - (§15.15.3, §15.15.4)
>     
>     
> *   乘法运算符 *、/ 和 %（第 15.17 节）
>     
>     
> *   加法运算符 + 和 - (§15.18)
>     
>     
> *   ...

[还有](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.6.2)：

> **5.6.2\. 二进制数字提升**
> 
> 当运算符将二进制数值提升应用于一对操作数时，每个操作数都必须表示一个可转换为数值类型的值，以下规则按顺序适用：
> 
> 加宽原语转换（第 5.1.2 节）适用于转换以下规则指定的一个或两个操作数：
> 
> *   如果任一操作数是 double 类型，则另一个操作数将转换为 double。
>     
>     
> *   否则，如果任一操作数的类型为浮点型，则另一个将转换为浮点型。
>     
>     
> *   否则，如果任一操作数是 long 类型，则另一个将转换为 long。
>     
>     
> *   否则，两个操作数都转换为 int 类型。
>     
>     
> 
> ...
> 
> 对某些运算符的操作数执行二进制数值提升：
> 
> *   乘法运算符 *、/ 和 %（第 15.17 节）
>     
>     
> *   数字类型 + 和 - 的加法和减法运算符（第 15.18.2 节）
>     
>     
> *   数值比较运算符 <、<=、> 和 >=（第 15.20.1 节）
>     
>     
> *   数值相等运算符 == 和 != (§15.21.1)
>     
>     
> *   整数位运算符 &、^ 和 | （§15.22.1）
>     
>     
> *   在某些情况下，条件运算符 ? : (§15.25)

# image - 如何在 Delphi 中从合成图像创建平移

> ID：14125847
> 
> 赞同：6
> 
> 时间：2013-01-02T16:50:12.473
> 
> 标签：image, delphi, delphi-2010, pan

我是 delphi 图形方法的新手，我一直在创建一个 ... viewport ，这就是我在为一个项目做它时的调用方式。对不起，我无法为它提供任何代码，但我被困在逻辑部分，搜索谷歌给我指出了一些 OnPaint ， Draw 方法。但这些不是我想要完成的，因为我有，例如：

1.  一个 1600x1000 背景图像锚定到客户端的顶部/底部/右侧和左侧。
2.  多个 TImage 元素放置在集合 x/y 坐标处。
3.  像 HTML 中的地图元素一样的“热点”，我可以在其中设置可点击区域（对于我在步骤 2 中放置的图像）
4.  无需缩放。
5.  最重要的是，在拖拽背景的同时，那些放置在背景之上的 TImage 也需要被拖拽。

我的逻辑（在 HTML/jQuery 中）是创建一个#viewportBinder（这是我拖动的 div，透明 bg），然后是另一个名为 #viewtown（1600x1000，背景）的 div，其中包含 div（那些 TImages）放置在 CSS 中的设置坐标处。

因此，当我拖动 viewportBinder 时，jQuery 在#viewport 上设置了新的 x/y。隐式地，#viewport 中的 div (TImages) 正在移动，因为父对象是相对定位的。

有没有人有这种项目的经验？任何代码片段？

更具体地说，我会给你我的 html 示例，说明我完成了什么以及我想将什么移植到 Delphi 代码中：[http ://www.youtube.com/watch?v=9iYqzvZFnGA](http://www.youtube.com/watch?v=9iYqzvZFnGA)

对不起，如果我不够清楚，我没有起点，因为我在德尔福根本没有这方面的经验。（使用 RAD Studio 2010）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T21:48:08.763

一个非常简短的示例，如何以简单的方式实现它。

您将使用 Paintbox 进行绘画、1 Backimage、包含信息和透明 pngimages 的 Records 数组。

画布可以在偏移/缩放/旋转中进行操作。移动和命中检测将发生在 mousedown 和 mousemove 中。

它不完整，但可能会让您知道如何完成。

```
[delphi]
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, ExtCtrls,PNGImage, StdCtrls;

type
  TBuilding=Record   // record for building informations
    Pos:TPoint;
    PNGImage:TPngImage;
    // what ever needed
  End;

  TBuildingArray=Array of TBuilding; // array of buildings

  TForm1 = class(TForm)
    PaintBox1: TPaintBox;
    Button1: TButton;
    procedure FormCreate(Sender: TObject);
    procedure PaintBox1Paint(Sender: TObject);
    procedure PaintBox1MouseDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
    procedure PaintBox1MouseMove(Sender: TObject; Shift: TShiftState; X,
      Y: Integer);
    procedure Button1Click(Sender: TObject);
    procedure FormDestroy(Sender: TObject);
  private
    { Private-Deklarationen }
    FXoffs,FYOffs,FZoom:Double; // offset and zoom for painting
    FMouseDownPoint:TPoint;
    FBackGroundPNG:TPNGImage;
    FBuildingArray:TBuildingArray;
    procedure Check4Hit(X, Y: Integer);
  public
    { Public-Deklarationen }
  end;

var
  Form1: TForm1;

implementation
uses Math;
{$R *.dfm}

Procedure SetCanvasZoomAndRotation(ACanvas:TCanvas;Zoom:Double;Angle:Double;CenterpointX,CenterpointY:Double);
var
    form : tagXFORM;
    Winkel:Double;
begin
      Winkel := DegToRad(Angle);
      SetGraphicsMode(ACanvas.Handle, GM_ADVANCED);
      SetMapMode(ACanvas.Handle,MM_ANISOTROPIC);
      form.eM11 := Zoom * cos( Winkel);
      form.eM12 := Zoom *Sin( Winkel)  ;
      form.eM21 := Zoom * (-sin( Winkel));
      form.eM22 := Zoom * cos( Winkel) ;
      form.eDx := CenterpointX;
      form.eDy := CenterpointY;
      SetWorldTransform(ACanvas.Handle,form);
end;

Procedure ResetCanvas(ACanvas:TCanvas);
begin
   SetCanvasZoomAndRotation(ACanvas , 1, 0, 0,0);
end;

procedure TForm1.FormCreate(Sender: TObject);
var
 Path:String;
 i:Integer;
begin
   FZoom := 1;
   DoubleBuffered := true;
   Path := ExtractFilePath(Paramstr(0));
   FBackGroundPNG:=TPNGImage.Create;
   FBackGroundPNG.LoadFromFile(Path + 'infect.png');
   SetLength(FBuildingArray,3);
   for I := 0 to High(FBuildingArray)  do
      begin
         FBuildingArray[i].PNGImage := TPngImage.Create;
         FBuildingArray[i].PNGImage.LoadFromFile(Path + Format('B%d.png',[i]));
         FBuildingArray[i].Pos.X := I * 300;
         FBuildingArray[i].Pos.Y := Random(1000);
      end;

end;
procedure TForm1.FormDestroy(Sender: TObject);
var
 i:Integer;
begin
   for I := 0 to High(FBuildingArray)  do
      begin
         FBuildingArray[i].PNGImage.Free;
      end;
   FBackGroundPNG.Free;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  if FZoom=0.5 then FZoom := 1 else FZoom := 0.5;
  PaintBox1.Invalidate;
end;

procedure TForm1.Check4Hit(X,Y:Integer);
var
 i,Index:Integer;
 R:TRect;
 P:TPoint;
begin
   index := -1;
   for I := 0 to High(FBuildingArray)  do
      begin
         R := Rect(FBuildingArray[i].Pos.X,FBuildingArray[i].Pos.Y
                    ,FBuildingArray[i].Pos.X + FBuildingArray[i].PNGImage.Width
                    ,FBuildingArray[i].Pos.Y + FBuildingArray[i].PNGImage.Height);
         P := Point(Round((x - FXOffs)/FZoom) ,Round((y - FYOffs)/FZoom));
         if PtInRect(R,P) then Index := i;
      end;
   if index > -1 then
      begin
        Caption := Format('Last hit %d',[index]);
      end
   else Caption := 'No Hit';
end;

procedure TForm1.PaintBox1MouseDown(Sender: TObject; Button: TMouseButton;
  Shift: TShiftState; X, Y: Integer);
begin
   Check4Hit(X,Y);
   FMouseDownPoint.X := X;
   FMouseDownPoint.Y := Y;
end;

procedure TForm1.PaintBox1MouseMove(Sender: TObject; Shift: TShiftState; X,
  Y: Integer);
begin
   if ssLeft in Shift then
      begin
         FXoffs := -( FMouseDownPoint.X - X) ;
         FYoffs := -( FMouseDownPoint.Y - Y) ;
         if FXoffs>0 then FXoffs := 0;
         if FYoffs>0 then FYoffs := 0;
         PaintBox1.Invalidate;
      end;
end;

procedure TForm1.PaintBox1Paint(Sender: TObject);
var
 i:Integer;
begin
   SetCanvasZoomAndRotation(PaintBox1.Canvas,FZoom,0,FXoffs,FYOffs);
   PaintBox1.Canvas.Draw(0,0,FBackGroundPNG);
   for I := 0 to High(FBuildingArray)  do
      begin
         PaintBox1.Canvas.Draw(FBuildingArray[i].Pos.X,FBuildingArray[i].Pos.Y,FBuildingArray[i].PNGImage);
      end;
end;

end.

[/delphi] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T23:38:00.820

对不起，但在过去的几年里，我使用 Lazarus 而不是 Delphi。但这篇文章将提供信息：[http](http://wiki.lazarus.freepascal.org/Developing_with_Graphics#Create_a_custom_control_which_draws_itself) ://wiki.lazarus.freepascal.org/Developing_with_Graphics#Create_a_custom_control_which_draws_itself 关于相对坐标没什么好说的 - 这很简单。关于拖动：很久以前，在一个遥远的星系中……那是这样的：

```
// To start dragging
procedure WMLButtonDown(var Message: TWMLButtonDown); message WM_LBUTTONDOWN;
// To stop dragging
procedure WMLButtonUp(var Message: TWMLButtonUp); message WM_LBUTTONUP;
// To perform dragging
procedure WMMouseMove(var Message: TWMMouseMove); message WM_MOUSEMOVE; 
```

# javascript - JSFIDDLE 没有错误，但站点和 jslint 有错误

> ID：14125850
> 
> 赞同：1
> 
> 时间：2013-01-02T16:50:31.403
> 
> 标签：javascript, html, jslint, jsfiddle

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T16:53:57.597

At the very end (on the last line) you have a [`Unicode Character 'ZERO WIDTH SPACE' (U+200B)`](http://www.fileformat.info/info/unicode/char/200b/index.htm) which raises the error. In ANSI it looks like that (see line 44):

![](../Images/6b86bc43671e01f224efe20f1b0d2abf.png)

# android - ANTLR Android 日志语法。解析应用程序参数

> ID：14125852
> 
> 赞同：0
> 
> 时间：2013-01-02T16:50:38.980
> 
> 标签：android, antlr, antlr3

我正在尝试解析 Android 日志系统文件。一切正常，但是当我尝试从日志内容中解析参数时它不起作用。我的语法提供解析日志内容

> 日志内容：（参数|文本|特殊字符|数字|减号|等号|冒号|点|撇号|左括号|右括号|斜线|'_'|WS）+；
> 
> 参数： text+ EQUAL (integer|floatnumber|exponentfloat) ;

参数在规则中包含文本，因此 ANTLR 表示语法不明确。我尝试了不同的规则定义，但它不起作用。我想解析这段日志

> 获取WakeLock 标志=0x2000000a 标签=KEEP_SCREEN_ON_FLAG uid=1000 pid=373

如何以字符串格式获取整个日志和“参数=值”对列表

> 标志=0x2000000a
> 
> 标签=KEEP_SCREEN_ON_FLAG
> 
> uid=1000
> 
> PID=373

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T19:38:16.320

我强烈建议改用正则表达式来完成这项任务。这种类型的操作更快更简单。

```
Pattern pattern = Pattern.compile("^(.*?)=(.*)$");
Matcher matcher = pattern.matcher(text);
while (matcher.find()) {
    String key = matcher.group(1);
    String value = matcher.group(2);
    // do whatever here...
} 
```

# string - Linq 选择两个字符串之间的范围，例如 Col thru Io

> ID：14125854
> 
> 赞同：0
> 
> 时间：2013-01-02T16:50:46.763
> 
> 标签：string, linq, range

如何选择两个值之间的字符串范围，例如从“Col”到“Io”的字符串。

因此，如果我要对美国境内的州列表执行此 LINQ 查询，它将返回

```
Colorado, 
Connecticut, 
Delaware, 
Flordia, 
Georgia, 
Hawaii, 
Idaho, 
Illinoise, 
Indiana 
```

但不会返回 Iowa，因为“Iowa”在“Io”之后。这个字符串是用户输入的，所以它的长度可以变化，或者可以是空白的。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:09:02.143

要比较两个字符串，请使用 string.Compare(string1, string2)

[http://msdn.microsoft.com/en-us/library/system.string.compare.aspx](http://msdn.microsoft.com/en-us/library/system.string.compare.aspx)

```
List<String> states = new List<String> { "Colorado", "Connecticut", "Delaware", "Flordia", "Georgia", "Hawaii", "Idaho", "Illinoise", "Indiana" };
List<String> filtered = states.Where(x => String.Compare(x, "D") > 0 && String.Compare(x, "If") < 0).ToList(); 
```

# wordpress - 将 Azure 网站 (Wordpress) 连接到存储帐户

> ID：14125855
> 
> 赞同：1
> 
> 时间：2013-01-02T16:50:48.523
> 
> 标签：wordpress, azure

我正在使用 Azure 网站来托管我的 Wordpress 网站。但是我的网站收到了很多用户上传的视频和照片。我的 10GB 配额即将超过。

问 Azure 支持，他们说要创建一个存储帐户，但他们无法帮助我如何将我的网站连接到存储帐户。他们让我在这里问......所以我在这里;）

任何人都可以帮助我如何将存储帐户连接到 Azure 网站中的 Wordpress 网站？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T17:31:26.863

找到了这个连接两个服务的很棒的插件：

**用于 WordPress 的 Windows Azure 存储** [http://wordpress.org/extend/plugins/windows-azure-storage/](http://wordpress.org/extend/plugins/windows-azure-storage/)

在安装之前，请确保链接到服务并获取存储的主键。

# osx-mountain-lion - 山狮升级和Server.app安装后Mysql停止工作

> ID：14125858
> 
> 赞同：0
> 
> 时间：2013-01-02T16:50:52.043
> 
> 标签：osx-mountain-lion, mysql

我今天早上从雪豹服务器更新到山狮并安装了服务器应用程序，现在我无法连接到mysql，我担心我的所有数据库都丢失了，有人遇到这个问题并且可以提供解决方案吗？

第一个问题似乎与 mysql.sock 文件有关，它不存在。所以我无法从任何东西连接或转储到文件并重新开始。这是我运行mysql时发生的事情

```
/usr/libexec/mysqld
130102 17:07:48 [Warning] Setting lower_case_table_names=2 because file system for /var/mysql/ is case insensitive
InnoDB: The InnoDB memory heap has been disabled.
InnoDB: Mutex and rw_lock use GCC atomic builtins.
InnoDB: Log scan progressed past the checkpoint lsn 0 36808
130102 17:07:48  InnoDB: Database was not shut down normally!
InnoDB: Starting crash recovery.
InnoDB: Reading tablespace information from the .ibd files...
InnoDB: Restoring possible half-written data pages from the doublewrite
InnoDB: buffer...
InnoDB: Doing recovery: scanned up to log sequence number 0 43655
130102 17:07:48  InnoDB: Starting an apply batch of log records to the database...
InnoDB: Progress in percents: 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99
InnoDB: Apply batch completed
130102 17:07:49  InnoDB: Started; log sequence number 0 43655
130102 17:07:49 [Note] Recovering after a crash using mysql-bin
130102 17:07:49 [Note] Starting crash recovery...
130102 17:07:49 [Note] Crash recovery finished.
130102 17:07:49 [ERROR] Fatal error: Can't open and lock privilege tables: Table 'mysql.host' doesn't exist 
```

我已经尝试过 mysqld_update 和其他一些东西。我现在的主要目标是以某种方式获取数据并进行全新安装。但我似乎无法找到数据。

如果我在终端中对数据库名称进行定位，我发现它被塞进了 /Library/Server/Previous/private/var/mysql/DBNAME，但我无法在终端或 finder 中访问该位置（即使作为 root )，试图 cd 进入它们会给我一个“不存在”作为回报。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T19:15:58.637

mysql 数据文件的默认位置是：/usr/local/mysql/data

可能数据文件还在，如果还在，那就复制，然后重新安装mysql，再把数据文件复制回原来的位置。我不是 100% 确定它有效，但我前段时间在雪豹上做过类似的把戏......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:01:08.743

从 10.7 Lion 开始，默认不再安装 MySQL。Apple 有一个[技术公告](http://support.apple.com/kb/HT4828)，其中涵盖了在升级到 10.7 或在您的情况下为 10.8 后安装 MySQL。

# jquery - 单击图像替换转到文件夹中的下一个图像

> ID：14125864
> 
> 赞同：1
> 
> 时间：2013-01-02T16:51:05.837
> 
> 标签：jquery, image, swap, replace

首先，我是一名设计师，对 jquery 知之甚少。我通常能够进行研究并找到执行我想要的脚本，然后稍微更改它们。但是这次我已经做了 4 天的研究，仍然找不到任何与我正在寻找的东西足够接近的东西。

目前我使用这个脚本：

```
 $(function(){
      $(".img-swap").live('click', function() {

        if ($(this).attr("class") == "img-swap") {
          this.src = this.src.replace("_1","_2");
        } else {
          this.src = this.src.replace("_2","_3");
        }
        $(this).toggleClass("on");
      });
    }); 
```

我在网站上有单个图像。单击时，应像这样替换图像：

我有最多包含 10 张图像的文件夹。它们被命名为'projectxyz_01.jpg'等。我现在需要的是一个脚本，点击时将'project_xyz_01.jpg'替换为'project_xyz_02.jpg'等等。如果文件夹中没有更多图片，请返回第一个。如果图像褪色会很好。

我目前使用的脚本当然只能从 1-3 开始，不会褪色，也不会回到第一张图像。

这是图像容器：

```
 <div class="slideshow_querformat">
            <img src="images/mmd/mmd_test_01.jpg" class="img-swap" border="0" alt="social media webcalender" title="Klicken, um die nächste Arbeit zu sehen." />
        </div> 
```

这是CSS部分：

```
 .slideshow_querformat { 
width:60.25%;
min-width:700px;
height:auto;
margin: 0 auto 0 auto;
text-align:center;
position:relative;
z-index:999;
    }

   .slideshow_querformat img { 
max-width:100%;
max-height:100%;
cursor:pointer;
margin-left:16px;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:04:00.217

为了使图像褪色，请尝试使用带有 setTimeout 功能的“fadeOut”......像这样......

```
setTimeout(function(){$("your_image_id").fadeOut("fast");},2000); 
```

在这里 2000 是可选的，您可以根据需要制作它...如果您希望它变慢，请使用“慢”而不是“快”...

获得第一张图片...进行检查...像这样...

```
if($(this).attr('src') == 'project_xyz_10.jpg') {
  this.src = this.src.replace("_10","_1");
} 
```

可能工作...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:05:25.737

您可以使用模运算符循环显示图像。

```
$(function() {
    $(".img-swap").on('click', function() {
        var src = this.src.substr(-6, 2);
        console.log(src);
        this.src = "project_xyz_" + ("0" + ((parseInt(src) + 1) % 10)).substr(-2) + ".jpg";
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:14:32.717

你需要这样的东西

```
$(function(){
  $(".slideshow_querformat").on('click', '.img-swap', function() {
    var self = this,
        file = this.src,
        common = file.substring(0, file.length-6)
        currentId =  +file.substr(-6,2),
        id = ('0' + (currentId+1)).substr(-2),
        nextimage= new Image();

    nextimage.onload = function(){
       // image was preloaded so it exists
       var img = this;
       $(self).fadeOut(300, function(){self.src = img.src; $(self).fadeIn(300)});
    };
    nextimage.onerror = function(){
       // error occured while preloading. we assume image does not exist
       $(self).fadeOut(300, function(){self.src = common+ '01.jpg'; $(self).fadeIn(300)});
    };
    nextimage.src = common + id + '.jpg';
  });
}); 
```

[http://jsfiddle.net/gaby/3PFGF/](http://jsfiddle.net/gaby/3PFGF/)的演示（*不展示错误案例*）

该脚本的作用是尝试预加载新图像，如果成功，则淡出当前图像，交换`src`属性并淡入新图像。

如果发生错误（*我们理解为图像不存在*），我们将名称设置为 01 并加载淡入到那个..

* * *

您应该使用它而不是`.live()`弃用它，但如果您想要关于如何有效使用它的建议，`.on()`则必须提供更多的 html（*图像的容器）。*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T17:16:14.070

您可以使用它来交换图像。在这里，total 将是您在文件夹中拥有的图像总数。

```
<script type="text/javascript">

   $(function(){
      count = 1;
      total = 4;

      $(".img-swap").on('click', function() {

        $(this).fadeOut(400, function() {
            $(this).attr('src', 'projectxyz_0' + count + '.jpg');
        }).fadeIn(400);

        count ++;

        if(count > total) {
            count = 1;
        }

      });
    });
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-02T17:19:57.410

您可以循环浏览图像，如下所示

```
<img class='img-swap' src='projectxyz_1.jpg'/>

var imgCnt = 10;

$(function() {
    $(".img-swap").live('click', function() {
        var str = $(this).attr('src');
        var strCurrNo = str.substring(str.indexOf('_') + 1, str.indexOf('.'));
        var curImg = parseInt(strCurrNo);
        var nextNo = imgCnt > curImg ? curImg + 1 : 0;

        $(this).fadeOut(400, function() {
            $(this).attr('src', str.replace("_" + strCurrNo, "_" + (nextNo)))
        }).fadeIn(400);

    });
}); 
```

此处添加了一个工作[演示](http://jsfiddle.net/gtB3t/1/)

# cakephp - acl 权限

> ID：14125865
> 
> 赞同：0
> 
> 时间：2013-01-02T16:51:06.913
> 
> 标签：cakephp, acl

使用 cake acl 我正在尝试为登录用户设置权限。我在登录功能中有这个：

```
if ($user = $this->Auth->user()) {
    CakeLog::write('debug', 'this->Auth->user');
    //debug($user['User']);
    $userGroup = $this->User->Group->findById($user['User']['group_id']);
    $aro = $this->Acl->Aro->find('first', array(
        'conditions' => array(
            'Aro.model' => 'Group',
            'Aro.foreign_key' => $this->_user['User']['group_id'],  
        ),
    ));
    $acos = $this->Acl->Aco->children();
    foreach ($acos as $aco) {
    $permission = $this->Acl->Aro->Permission->find('first', array(
        'conditions' => array(
            'Permission.aro_id' => $aro['Aro']['id'],
            'Permission.aco_id' => $aco['Aco']['id'],
        ),
    ));
    if (isset($permission['Permission']['id'])) {
        if ($permission['Permission']['_create'] == 1 ||
            $permission['Permission']['_read'] == 1 ||
            $permission['Permission']['_update'] == 1 ||
            $permission['Permission']['_delete'] == 1) {
                $this->Session->write(
                    'Auth.Permissions.' . $permission['Aco']['alias'], true
                );
                if (!empty($permission['Aco']['parent_id'])) {
                    $parentAco = $this->Acl->Aco->find('first', array(
                        'conditions' => array(
                            'id' => $permission['Aco']['parent_id']
                        )
                    ));
                    $this->Session->write(
                        'Auth.Permissions.' . $permission['Aco']['alias']
                        . '.' . $parentAco['Aco']['alias'], true
                    );
                }
            }
        }
    }
} 
```

我收到此错误：

未定义属性：UsersController::$_user [APP\controllers\users_controller.php，第 82 行]

我可以将 '$this->_user['User']['group_id']' 更改为 '$this->_user['User']['group_id']'，这样是否正确。如果不是，我应该设置什么 public $_user = ？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T17:26:19.880

我用 $user 替换了 _user ，它似乎正在工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-03T02:26:34.593

如果您需要经过身份验证的用户的 group_id，您可以调用

```
AuthComponent::user('group_id'); 
```

# mysql - 让 mysql-simple 在 OSX (Haskell) 上工作

> ID：14125866
> 
> 赞同：1
> 
> 时间：2013-01-02T16:51:08.877
> 
> 标签：mysql, macos, haskell

有人知道如何让 mysql-simple 库在 OSX 上运行吗？我收到以下错误：

正在加载包 mysql-0.1.1.4 ... 无法加载 .so/.DLL 为：libmysqlclient.dylib (dlopen(libmysqlclient.dylib, 9)：找不到合适的图像。确实找到了：/usr/local/lib/libmysqlclient .dylib：mach-o，但架构错误）

谢谢，大卫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T15:47:19.527

好吧，听起来您确实有错误的 MySQL 库，尝试运行（从终端）：
`file /usr/local/lib/libmysqlclient.dylib`
当您使用 64 位 Haskell 时，它可能是 32 位的，反之亦然

# maven - maven设置自定义属性

> ID：14125867
> 
> 赞同：4
> 
> 时间：2013-01-02T16:51:16.430
> 
> 标签：maven, build, pom.xml

我对 Maven 完全陌生。我正在尝试设置一个新项目，这样它就不需要 20 页长的带有屏幕截图的单词文档来设置它。我有 Mac 和 PC 上的开发人员，所以我需要能够自定义 catalina.home 目录，因为我不能只强加一个标准位置。我想我会在 ~/.m2/settings.xml 文件中使用以下内容：

```
<profile>
  <id>my-site-dev</id>
  <activation>
    <activeByDefault>true</activeByDefault>
  </activation>
  <properties>
    <catalina.home>/path/to/apache-tomcat</catalina.home>
  </properties>
</profile> 
```

但是，这里的文档：[http](http://maven.apache.org/guides/introduction/introduction-to-profiles.html#Profile_Pitfalls) ://maven.apache.org/guides/introduction/introduction-to-profiles.html#Profile_Pitfalls似乎表明我想要完成的是一个坏主意。实现这一点的官方方法是什么，以便在我的 pom.xml 中我可以引用 ${catalina.home}？

现在我已经用 id 声明了我的配置文件，如果我的 pom.xml 无法加载配置文件“my-site-dev”，我是否可以使构建失败？如果可能的话，我想从 settings.xml 中删除 <activeByDefault> 。我不想无缘无故地干扰他们的全局设置，我想尽可能多地保持独立。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T20:04:18.403

不要使用`activeByDefault`，因为它会掩盖所有其他配置文件：

这是您应该使用的：

```
<profiles>
    <profile>
        <id>path-to-catalina.home-linux</id>
        <activation>
            <os>
                <family>linux</family>
            </os>
        </activation>
        <properties>
            <catalina.home>...</catalina.home>
        </properties>
    </profile>
    <profile>
        <id>path-to-catalina.home-mac</id>
        <activation>
            <os>
                <family>mac</family>
            </os>
        </activation>
        <properties>
            <catalina.home>...</catalina.home>
        </properties>
    </profile>
    <profile>
        <id>path-to-catalina.home-windows</id>
        <activation>
            <os>
                <family>windows</family>
            </os>
        </activation>
        <properties>
            <catalina.home>...</catalina.home>           
           </properties>
     </profile> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:25:46.643

您可以在您的 pom 中使用基于 os.

```
<profiles>
  <profile>
    <activation>
      <os>
        ... 
```

你在做什么需要catalina.home？

如果您正在使用 maven 部署到应用服务器，那么您已经超出了“一致、可移植的构建”规则集 - 并且超出了 maven 的主要用例/最佳实践。

并不是说你不应该这样做——因为它很方便。只需确保将构建项目与部署项目分开即可。

# jquery - 使用精美的盒子灯箱时，有没有办法将锚点放在锚点的标题内？

> ID：14125868
> 
> 赞同：0
> 
> 时间：2013-01-02T16:51:20.800
> 
> 标签：jquery, fancybox, title, fancybox-2

我正在使用 Fancybox Lightbox，当 fancybox 打开显示图像时，图像的标题显示在图像的底部。这个标题来自于打开灯箱的锚标记的标题属性中的文本。我需要在此标题属性中放置一个锚点以链接到另一个站点。这可能吗？也许是 jQuery？

谢谢你的时间。

安吉拉

# perl - 如何判断使用的模块是否是纯 perl？

> ID：14125869
> 
> 赞同：7
> 
> 时间：2013-01-02T16:51:24.207
> 
> 标签：perl, module

如果我有`use`很多模块的 Perl 代码，是否有一种快速简便的方法可以找出其中一些模块是否不是纯 Perl 模块？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T17:25:25.747

`@DynaLoader::dl_modules`包含加载的 XS 模块列表。

```
perl -MSome::Module1 -MSome::Module2 -M... \
   -MDynaLoader -E'say for sort @DynaLoader::dl_modules;' 
```

或者，如果您想将其编写为脚本：

```
# Usage: script Some::Module1 Some::Module2 ...

use 5.010;
use DynaLoader qw( );

while (defined($_ = shift(@ARGV))) {
   s{::}{/}g;
   $_ .= ".pm";
   require $_;
}

say for sort @DynaLoader::dl_modules; 
```

当然，也没有什么能阻止您将其放入现有脚本中。

```
use 5.010;
use DynaLoader qw( );
END { say for sort @DynaLoader::dl_modules; } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-02T17:29:47.967

这看起来像是我所说的“爆破传感器”的工作。您可以通过将其放在第一个模块的顶部来诱捕钩子：

```
BEGIN { 
    require Carp; #Does the stack stuff
    # Fool Perl into thinking that these are already loaded.
    @INC{ 'XSLoader.pm', 'DynaLoader.pm' } = ( 1, 1 );

    # overload boobytrapped stubs
    sub XSLoader::load        { Carp::confess( 'NOT Pure Perl!' ); }
    sub DynaLoader::bootstrap { Carp::confess( 'NOT Pure Perl!' ); }
} 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-01-02T18:03:13.123

如果您必须尝试在您的机器上尚未安装 Perl prog 中的哪些模块。你可以这样做：

```
use ExtUtils::Installed;
my $installed = ExtUtils::Installed->new();
my @miss;
foreach $module ($installed->modules()){
    @miss = $installed->validate($module);  
}
print join("\n", @miss); 
```

# r - 从R中的文件读取

> ID：14125872
> 
> 赞同：1
> 
> 时间：2013-01-02T16:51:39.160
> 
> 标签：r, file, input

我正在尝试读取 R 中的文本头文件。除了以下内容，我已经非常成功：

该文件的一部分包含：

```
.  
.    
. (Other stuff)  
spectra names = {  
 Endmember  1, Endmember  2, Endmember  3, Endmember  4, Endmember  5,   
 Endmember  6, Endmember  7, Endmember  8, Endmember  9, Endmember  10,   
 Endmember  11, Endmember  12, Endmember  13, Endmember  14, Endmember  15,   
 Endmember  16, Endmember  17, Endmember  18, Endmember  19, Endmember  20,   
 Endmember  21, Endmember  22, Endmember  23, Endmember  24, Endmember  25,   
 Endmember  26, Endmember  27, Endmember  28, Endmember  29, Endmember  30}  
.  
.  
. 
```

我希望输出是一个包含光谱名称的列表，即`["Endmember 1" "Endmember 2"`等等......

我试过了`read.csv()`，`read.table()`但似乎没有任何效果。我被行尾和'{'，'}'字符难住了

我想做的是：从“光谱名称”开始阅读，然后将两者之间的所有内容存储`{}`为字符串数组，如上所述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:39:12.730

这是如何实施贾斯汀建议的示例。假设数据文件如下所示：

```
4 5 6
2 3 4
1 2 3 
spectra names = {Endmember  1, Endmember  2, Endmember  3}
1 1 1
1 1 2
1 2 1
1 2 2
2 1 1
2 1 2
2 2 1
2 2 2 
```

你可以这样读：

```
aa <- readLines('c:/users/Mark W Miller/simple R programs/odd data file with headers in the middle.txt', 
     n = 4)

bb <- gsub("spectra names = {","", aa[4], fixed=TRUE)
bb <- gsub("}","", bb, fixed=TRUE)
bb <- gsub("  "," ", bb, fixed=TRUE)
bb <- gsub(", ",",", bb, fixed=TRUE)
cc <- unlist(strsplit(bb, ","))
cc

dd <- read.table('c:/users/Mark W Miller/simple R programs/odd data file with headers in the middle.txt', 
     skip = 4, header=F)
dd

colnames(dd) <- cc
dd 
```

我确信有办法将我的所有`gsub`陈述浓缩为一行。如果这不完全符合您的要求，也许您可​​以将其用作开始。

我不确定我是否理解为列名创建列表的部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:41:12.240

按照评论中的建议使用 scan 和 gsub ，您可以轻松获得此功能。

```
tt <- scan(text = "spectra names = {  
  Endmember  1, Endmember  2, Endmember  3, Endmember  4, Endmember  5,   
  Endmember  6, Endmember  7, Endmember  8, Endmember  9, Endmember  10,   
  Endmember  11, Endmember  12, Endmember  13, Endmember  14, Endmember  15,   
  Endmember  16, Endmember  17, Endmember  18, Endmember  19, Endmember  20,   
  Endmember  21, Endmember  22, Endmember  23, Endmember  24, Endmember  25,   
  Endmember  26, Endmember  27, Endmember  28, Endmember  29, Endmember  30}" ,what = 'character' ,sep =',')

gsub('[{|}]','',tt) ## not really clever but it is a good begining
[1] "spectra names =   " "  Endmember  1"     " Endmember  2"      " Endmember  3"      " Endmember  4"      " Endmember  5"     
[7] "   "                "  Endmember  6"     " Endmember  7"      " Endmember  8"      " Endmember  9"      " Endmember  10"    
[13] "   "                "  Endmember  11"    " Endmember  12"     " Endmember  13"     " Endmember  14"     " Endmember  15"    
[19] "   "                "  Endmember  16"    " Endmember  17"     " Endmember  18"     " Endmember  19"     " Endmember  20"    
[25] "   "                "  Endmember  21"    " Endmember  22"     " Endmember  23"     " Endmember  24"     " Endmember  25"    
[31] "   "                "  Endmember  26"    " Endmember  27"     " Endmember  28"     " Endmember  29"     " Endmember  30" 
```

# java - SQL Server raiserror 指令不会在 java 代码中引发异常

> ID：14125874
> 
> 赞同：0
> 
> 时间：2013-01-02T16:51:42.747
> 
> 标签：java, sql-server, hibernate, exception, stored-procedures

我有一个存储过程，它执行几个更新/插入。我使用来自 java 客户端的 Hibernate 调用它的执行。我希望这段代码在 java 中引发异常，以防过程引发错误（例如，如果其中一个语句由于违反约束而失败）。很简单，不是吗？

Java 代码如下所示：

```
getHibernateTemplate().execute(new HibernateCallback() {

        public Object doInHibernate(Session s) throws HibernateException, SQLException {
            SQLQuery query = s.createSQLQuery("exec myProc :date");                             
            query.setTimestamp("date", new Timestamp(valDate.getTime()));
            try {
                query.executeUpdate();
            } catch (HibernateException e) {  ...  } } 
```

在这个过程中，我插入这个语句来模拟错误的发生。

```
raiserror('this is bad', 11, 1); 
```

如果这是程序的第一个语句，它可以正常工作，所以如果我从 mgmt studio 调用它，输出如下所示：

> 消息 50000，级别 11，状态 1，过程 upd_position_list_hist，第 85 行，这是错误的

Java 代码捕获异常，一切正常。

但是，如果我将错误引发语句放在 proc 的中间——在它进行一些更新/插入之后——那么输出将如下所示：

> （0 行受影响）（1 行受影响）（1 行受影响）消息 50000，级别 11，状态 1，过程 upd_position_list_hist，第 85 行，这很糟糕

*   这将停止在 java 端抛出异常。代码执行完毕，没有抛出任何 HibernateException。可能是什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:09:59.917

`set nocount on`应该解决这个问题，因为 hibernate 可能在第一个结果之后停止读取结果，它不期望来自单个查询的多个结果。

但是你为什么要首先使用hibernate来运行一个proc ..

# java - 如果用户已经通过身份验证，如何将请求重定向到配置的 Shiro loginUrl？

> ID：14125877
> 
> 赞同：13
> 
> 时间：2013-01-02T16:51:49.450
> 
> 标签：java, authentication, login, shiro

我有一个使用 Shiro 进行身份验证的 webapp。web.xml 和 shiro.ini 的相关部分是：

```
<listener>
    <listener-class>org.apache.shiro.web.env.EnvironmentLoaderListener</listener-class>
</listener>

<filter>
    <filter-name>ShiroFilter</filter-name>
    <filter-class>org.apache.shiro.web.servlet.ShiroFilter</filter-class>
</filter>

<filter-mapping>
    <filter-name>ShiroFilter</filter-name>
    <url-pattern>/*</url-pattern>
    <dispatcher>REQUEST</dispatcher>
    <dispatcher>FORWARD</dispatcher>
    <dispatcher>INCLUDE</dispatcher>
    <dispatcher>ERROR</dispatcher>
</filter-mapping> 
```

和

```
[main]
authc.loginUrl = /authoring/login.html
authc.successUrl  = /authoring
logout.redirectUrl = /authoring/login.html

[users]
foo = foo

[urls]
/authoring/logout = logout
/authoring/** = authc 
```

Shiro 正确拦截来自未认证客户端的所有请求并重定向到配置的 loginUrl（然后在认证成功后将它们转发到请求的页面）。我希望发生的是，如果经过身份验证的客户端向 /authoring/login.html 发出明确请求，则将其重定向到 /authoring。仅当客户端经过身份验证时才会发生这种情况。

例如，想想 Gmail 的工作原理 -在您已经登录时尝试访问 mail.google.com（甚至是[https://accounts.google.com/ServiceLogin ）会将您重定向到收件箱。](https://accounts.google.com/ServiceLogin)Shiro开箱即用，这可能吗？如果不是，那么实施它的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T20:33:05.877

您可以自己处理登录请求或使用您的框架，您需要更改您`shiro.ini`以使用[PassThruAuthenticationFilter](http://shiro.apache.org/static/1.2.1/apidocs/org/apache/shiro/web/filter/authc/PassThruAuthenticationFilter.html)

```
authc = org.apache.shiro.web.filter.authc.PassThruAuthenticationFilter 
```

您现在可以检查用户是否已登录，如果为真则重定向：

```
Subject currentUser = SecurityUtils.getSubject();
if(currentUser.isAuthenticated()){
    //redirect
}else{
    AuthenticationToken token =  new UsernamePasswordToken(username, password);
    currentUser.login(token);
    WebUtils.redirectToSavedRequest(request, response, "index.xhtml");
} 
```

这不是一个完全开箱即用的解决方案。我不确定您是否可以在身份验证之外获得成功 url，您可以手动重定向`WebUtils.issueRedirect(req, resp, url)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-27T08:37:44.287

我遇到了同样的问题并通过将登录页面转换为 JSP 并在开头添加重定向来解决它：

```
<%
    if (SecurityUtils.getSubject().isAuthenticated()) {
        response.sendRedirect(request.getContextPath());
    }
%> 
```

# ios - 无法使用 Node 在 iOS 模拟器中连接到 Mobile Safari

> ID：14125882
> 
> 赞同：24
> 
> 时间：2013-01-02T16:52:18.593
> 
> 标签：ios, node.js, tcp, mobile-safari, remote-debugging

我正在尝试在远程调试（使用 Node）时模拟 Safari 和 Mobile Safari 之间的消息交换。

我已经嗅到了两者之间的流量；他们正在通过 TCP 交换二进制 plist。我已经设法将数据包复制到选择特定选项卡进行调试（“套接字设置”）的位置，但在此之后，Mobile Safari 忽略了我的 plist 指令，而是发回了一个列表。

这是 Safari 正在发送的套接字设置数据包的原始 tcpdump，以及它包含的 plist 的 JSON 表示：

```
10:36:42.318662 IP6 localhost.58028 > localhost.27753: Flags [P.], seq 1601:1930, ack 803, win 9125, options [nop,nop,TS val 69074378 ecr 69074378], length 329
0x0000:  6000 0000 0169 0640 0000 0000 0000 0000  `....i.@........
0x0010:  0000 0000 0000 0001 0000 0000 0000 0000  ................
0x0020:  0000 0000 0000 0001 e2ac 6c69 344e 2443  ..........li4N$C
0x0030:  4e32 497b 8018 23a5 0171 0000 0101 080a  N2I{..#..q......
0x0040:  041d fdca 041d fdca 6270 6c69 7374 3030  ........bplist00
0x0050:  d201 0203 0c5a 5f5f 6172 6775 6d65 6e74  .....Z__argument
0x0060:  5a5f 5f73 656c 6563 746f 72d4 0405 0607  Z__selector.....
0x0070:  0809 0a0b 5f10 1b57 4952 4170 706c 6963  ...._..WIRApplic
0x0080:  6174 696f 6e49 6465 6e74 6966 6965 724b  ationIdentifierK
0x0090:  6579 5f10 1a57 4952 436f 6e6e 6563 7469  ey_..WIRConnecti
0x00a0:  6f6e 4964 656e 7469 6669 6572 4b65 795c  onIdentifierKey\
0x00b0:  5749 5253 656e 6465 724b 6579 5f10 1457  WIRSenderKey_..W
0x00c0:  4952 5061 6765 4964 656e 7469 6669 6572  IRPageIdentifier
0x00d0:  4b65 795f 1016 636f 6d2e 6170 706c 652e  Key_..com.apple.
0x00e0:  6d6f 6269 6c65 7361 6661 7269 5f10 2441  mobilesafari_.$A
0x00f0:  3535 3134 3645 372d 3244 4544 2d34 3832  55146E7-2DED-482
0x0100:  412d 3839 3133 2d31 3033 3337 4537 4634  A-8913-10337E7F4
0x0110:  3330 465f 1024 3230 3041 3935 3146 2d30  30F_.$200A951F-0
0x0120:  3839 432d 3445 3741 2d41 3642 322d 3331  89C-4E7A-A6B2-31
0x0130:  4235 4432 3737 4341 3635 1001 5f10 185f  B5D277CA65.._.._
0x0140:  7270 635f 666f 7277 6172 6453 6f63 6b65  rpc_forwardSocke
0x0150:  7453 6574 7570 3a00 0800 0d00 1800 2300  tSetup:.......#.
0x0160:  2c00 4a00 6700 7400 8b00 a400 cb00 f200  ,.J.g.t.........
0x0170:  f400 0000 0000 0002 0100 0000 0000 0000  ................
0x0180:  0d00 0000 0000 0000 0000 0000 0000 0001  ................
0x0190:  0f                                       .

{ __argument: 
  { WIRApplicationIdentifierKey: 'com.apple.mobilesafari',
    WIRConnectionIdentifierKey: 'A55146E7-2DED-482A-8913-10337E7F430F',
    WIRSenderKey: '200A951F-089C-4E7A-A6B2-31B5D277CA65',
    WIRPageIdentifierKey: 1 },
  __selector: '_rpc_forwardSocketSetup:' } 
```

我用 JSON plist 发送的内容：

```
16:39:18.669088 IP6 localhost.63836 > localhost.27753: Flags [P.], seq 413:742, ack 1, win 9175, options [nop,nop,TS val 89654016 ecr 89654016], length 329
0x0000:  6000 0000 0169 0640 0000 0000 0000 0000  `....i.@........
0x0010:  0000 0000 0000 0001 0000 0000 0000 0000  ................
0x0020:  0000 0000 0000 0001 f95c 6c69 0226 fab5  .........\li.&..
0x0030:  6fff d8d3 8018 23d7 0171 0000 0101 080a  o.....#..q......
0x0040:  0558 0300 0558 0300 6270 6c69 7374 3030  .X...X..bplist00
0x0050:  d201 0203 0c5a 5f5f 6172 6775 6d65 6e74  .....Z__argument
0x0060:  5a5f 5f73 656c 6563 746f 72d4 0405 0607  Z__selector.....
0x0070:  0809 0a0b 5f10 1b57 4952 4170 706c 6963  ...._..WIRApplic
0x0080:  6174 696f 6e49 6465 6e74 6966 6965 724b  ationIdentifierK
0x0090:  6579 5f10 1a57 4952 436f 6e6e 6563 7469  ey_..WIRConnecti
0x00a0:  6f6e 4964 656e 7469 6669 6572 4b65 795c  onIdentifierKey\
0x00b0:  5749 5253 656e 6465 724b 6579 5f10 1457  WIRSenderKey_..W
0x00c0:  4952 5061 6765 4964 656e 7469 6669 6572  IRPageIdentifier
0x00d0:  4b65 795f 1016 636f 6d2e 6170 706c 652e  Key_..com.apple.
0x00e0:  6d6f 6269 6c65 7361 6661 7269 5f10 2465  mobilesafari_.$E
0x00f0:  3962 6431 6564 312d 6164 3161 2d34 6266  9BD1ED1-AD1A-4BF
0x0100:  302d 6238 3066 2d61 3331 3136 3962 6434  0-B80F-A31169BD4
0x0110:  3431 315f 1024 6630 3538 6663 3761 2d63  411_.$F058FC7A-C
0x0120:  6232 332d 3465 3339 2d61 6535 312d 3734  B23-4E39-AE51-74
0x0130:  6363 3730 6333 6262 3033 1001 5f10 185f  CC70C3BB03.._.._
0x0140:  7270 635f 666f 7277 6172 6453 6f63 6b65  rpc_forwardSocke
0x0150:  7453 6574 7570 3a00 0800 0d00 1800 2300  tSetup:.......#.
0x0160:  2c00 4a00 6700 7400 8b00 a400 cb00 f200  ,.J.g.t.........
0x0170:  f400 0000 0000 0002 0100 0000 0000 0000  ................
0x0180:  0d00 0000 0000 0000 0000 0000 0000 0001  ................
0x0190:  0f                                       .

{ __argument: 
  { WIRApplicationIdentifierKey: 'com.apple.mobilesafari',
    WIRConnectionIdentifierKey: 'E9BD1ED1-AD1A-4BF0-B80F-A31169BD4411',
    WIRSenderKey: 'F058FC7A-CB23-4E39-AE51-74CC70C3BB03',
    WIRPageIdentifierKey: 1 },
  __selector: '_rpc_forwardSocketSetup:' } 
```

除了键（从我的实验来看，这似乎没有任何区别——我已经尝试过 Safari 使用的键无济于事），两者是逐字节相同的，并且产生相同的 plist。我可以并排比较 Safari 和 Mobile Safari 与我的代码和 Mobile Safari 之间的流量，它们只是在这一点上有所不同。

我不知道问题是什么，但据我所知，有一些可能性：

*   数据包不相同，我拼错了/搞砸了其他东西
*   密钥不正确（可能需要从连接 ID 密钥生成发件人密钥）
*   有数据在其他地方的两者之间传递

只是为了清除我调查过的一些途径：

*   它对时间不敏感（另一个项目 - 不是我的 - 可以成功连接但一次发送所有连接数据包）
*   我已经检查过是否有（tcp）数据通过另一个端口传递——据我所知没有

可能出了什么问题？为什么 Mobile Safari 拒绝我的连接？

该项目[在 Github 上](https://github.com/leftlogic/remote-debug)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:30:14.470

问题是第 36 行：

```
data.__argument.WIRSocketDataKey = JSON.stringify(data.__argument.WIRSocketDataKey); 
```

`bplistCreator.js``WIRSocketDataKey`当它实际上是 bplist 术语中的数据时，将其视为字符串。

第 36 行应该是：

```
data.__argument.WIRSocketDataKey = new Buffer(JSON.stringify(data.__argument.WIRSocketDataKey)); 
```

为此，`bplistCreator.js`需要来自 GH 的版本，因为具有数据支持的版本似乎无法通过 npm 获得[https://github.com/nearinfinity/node-bplist-creator](https://github.com/nearinfinity/node-bplist-creator)

* * *

将历史记录保存在下面仅供参考：

在执行期间做了更多的挖掘和观察 system.log ......

`tail -f /var/log/system.log`

当浏览器崩溃时，我看到以下内容

```
-[__NSCFString bytes]: unrecognized selector sent to instance 0xa947af0
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFString bytes]: unrecognized selector sent to instance 0xa947af0'
*** First throw call stack:
(0x48b012 0x1578e7e 0x5164bd 0x47abbc 0x47a94e 0x413390 0x43b763 0xb55415 0x44bf0f5 0x45080d8 0x45085f1 0x3557548 0x40ef3f 0x40e96f 0x431734 0x430f44 0x430e1b 0x3556c50 0x9026e557 0x90258cee)
com.apple.launchd.peruser.501[237] (UIKitApplication:com.apple.mobilesafari[0x10ee][59604]):     Job appears to have crashed: Abort trap: 6
backboardd[54902]: Application 'UIKitApplication:com.apple.mobilesafari[0x10ee]' exited     abnormally with signal 6: Abort trap: 6
ReportCrash[59611]: Saved crash report for MobileSafari[59604] version 1659.13 to /Users/xx/Library/Logs/DiagnosticReports/MobileSafari_2013-01-29-212042_Andy-Daviess-MacBook-Pro.crash 
```

（我已经从上面删除了时间和日期）

编辑：

我认为问题在于 WIRSocketDataKey 应该是数据时作为字符串发送

看起来 node-bplist-creator 目前不支持数据类型，所以这是我们需要修复的第一件事。

编辑2：

GH 版本的 node-bplist-creater 确实支持数据类型，但似乎没有打包（？？？）

编辑 3：

得到它的工作将在明天向您发送拉取请求！

# .net - 为什么 winform 面板仅在鼠标悬停或单击鼠标时更新？

> ID：14125885
> 
> 赞同：5
> 
> 时间：2013-01-02T16:52:28.933
> 
> 标签：.net, linux, winforms, mono, backcolor

我创建了一个测试程序，它应该在 linux (PCLinuxOS) 下反复改变面板的背景颜色，但它并不能很好地工作。要么仅在您单击某些内容或将鼠标悬停在winform上时才更新面板的背景色，然后它就会停止，或者程序在运行一段时间后完全崩溃。

下面是带有 2 个面板、一个按钮和一个计时器的 winform 的外观：

![在此处输入图像描述](../Images/167a92418c8c3d3a78f8bf15751f3ff0.png)

这是它背后的代码：

```
namespace TestIndicator;

interface

uses
  System.Drawing,
  System.Collections,
  System.Collections.Generic,
  System.Windows.Forms,
  System.ComponentModel;

type
  /// <summary>
  /// Summary description for MainForm.
  /// </summary>
  MainForm = partial class(System.Windows.Forms.Form)
  private
    method d_Click(sender: System.Object; e: System.EventArgs);
    method timer1_Tick(sender: System.Object; e: System.EventArgs);
  protected
    method Dispose(disposing: Boolean); override;
  public
    constructor;
  end;

var
    TurnOnRx, TurnOnTx:Boolean;

implementation

{$REGION Construction and Disposition}
constructor MainForm;
begin
  //
  // Required for Windows Form Designer support
  //
  InitializeComponent();

  //
  // TODO: Add any constructor code after InitializeComponent call
  //
  TurnOnRx := true;
  TurnOnTx := true;
end;

method MainForm.Dispose(disposing: Boolean);
begin
  if disposing then begin
    if assigned(components) then
      components.Dispose();

    //
    // TODO: Add custom disposition code here
    //
  end;
  inherited Dispose(disposing);
end;
{$ENDREGION}

method MainForm.d_Click(sender: System.Object; e: System.EventArgs);
begin
    timer1.Enabled := not timer1.Enabled;  
end;

method MainForm.timer1_Tick(sender: System.Object; e: System.EventArgs);
begin
    if TurnOnTx then
    begin
        TurnOnTx:=false;
        TxLight.BackColor := Color.Red;
    end
    else
    begin
        TurnOnTx:=true;
        TxLight.BackColor := Color.black;
    end;

    if TurnOnRx then
    begin
        TurnOnRx := false;
        RxLight.BackColor := Color.Lime;
    end
    else
    begin
        TurnOnRx := true;
        RxLight.BackColor := Color.Black;
    end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T12:57:09.853

也许计时器间隔太短，颜色变化太快？

```
namespace TestIndicator;
interface
uses
  System.Drawing,
  System.Collections,
  System.Collections.Generic,
  System.Windows.Forms,  
  System.ComponentModel;

type
  /// <summary>
  /// Summary description for MainForm.
  /// </summary>
  MainForm = partial class(System.Windows.Forms.Form)
  private
    method d_Click(sender: System.Object; e: System.EventArgs);
    method timer1_Tick(sender: System.Object; e: System.EventArgs);
  protected
    method Dispose(disposing: Boolean); override;
  public
    constructor;
  end;

var
    TurnOnRx, TurnOnTx:Boolean;

implementation

{$REGION Construction and Disposition}
constructor MainForm;
begin
  //
  // Required for Windows Form Designer support
  //
  InitializeComponent();

  //
  // TODO: Add any constructor code after InitializeComponent call
  //
  TurnOnRx := true;
  TurnOnTx := true;

  timer1.Inverval := 1000; 
end;

method MainForm.Dispose(disposing: Boolean);
begin
  if disposing then begin
    if assigned(components) then
      components.Dispose();

    //
    // TODO: Add custom disposition code here
    //
  end;
  inherited Dispose(disposing);
end;
{$ENDREGION}

method MainForm.d_Click(sender: System.Object; e: System.EventArgs);
begin
    timer1.Enabled := not timer1.Enabled;  
end;

method MainForm.timer1_Tick(sender: System.Object; e: System.EventArgs);
begin
    if TurnOnTx then
    begin
        TurnOnTx:=false;
        TxLight.BackColor := Color.Red;
    end
    else
    begin
        TurnOnTx:=true;
        TxLight.BackColor := Color.black;
    end;

    if TurnOnRx then
    begin
        TurnOnRx := false;
        RxLight.BackColor := Color.Lime;
    end
    else
    begin
        TurnOnRx := true;
        RxLight.BackColor := Color.Black;
    end;

    TxLight.Refresh();
    RxLight.Refresh();

    Application.DoEvents();
end;

end. 
```

# android - 试图在android上创建菜单项链接

> ID：14125888
> 
> 赞同：-1
> 
> 时间：2013-01-02T16:52:34.410
> 
> 标签：android, android-layout

无法将其链接到网页。“重置”和“关于”应该可以。使用网络视图。需要在 webview 中打开链接。

这是 MainActivity.java：

```
package com.test.apppackage;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.webkit.WebView;
import android.webkit.WebViewClient;
import android.widget.Toast;

public class MainActivity extends Activity {
private WebView mWebview ;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    mWebview  = new WebView(this);

    mWebview.getSettings().setJavaScriptEnabled(true); // enable javascript

    final Activity activity = this;

    mWebview.setWebViewClient(new WebViewClient() {
        public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) {
            Toast.makeText(activity, description, Toast.LENGTH_SHORT).show();
        }
    });

    mWebview .loadUrl("https://www.google.com");
    setContentView(mWebview );

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    int id = item.getItemId();
    switch(id) {
        case android.R.id.menu_reset:
            mWebview .loadUrl("https://www.bbc.co.uk");
            setContentView(mWebview );
            break;

    }
    return super.onOptionsItemSelected(item);
}

public class MyWebViewClient extends WebViewClient {

    @Override
       public boolean shouldOverrideUrlLoading(WebView view, String url) {
           view.loadUrl(url);
           return true;
       }

   }
} 
```

这是活动 main.xml 文件

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item
    android:id="@+id/menu_reset"
    android:title="@string/menu_reset"
    android:showAsAction="ifRoom"
    />
  <item
    android:id="@+id/menu_about"
    android:title="@string/menu_about"
    android:showAsAction="never"
    /></menu> 
```

这是 strings.xml 文件

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<string name="app_name">App name</string>
<string name="menu_reset">Reset</string>
<string name="menu_about">About app</string> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:57:41.923

你混淆了 android.R 和 R

您的项目称为`@+id/menu_reset`，它是在您的`com.test.apppackage.R.java`文件中创建的。

但是您稍后会比较`android.R.id.menu_reset`，这将在 android.R.id 中，但不存在。

在这种情况下，您只需要使用您的 R.java。使用`com.test.apppackage.R.id.menu_reset`.

在某些情况下，您可以使用 android 值，但无论如何混合都行不通。

## 编辑

显然， android.R.menu_reset 甚至不存在

## 更多编辑

R 实际上是 R.id，当然

# javascript - SharePoint 2010 不接受输入标记中的“值”属性......还有其他选择吗？

> ID：14125891
> 
> 赞同：0
> 
> 时间：2013-01-02T16:52:50.090
> 
> 标签：javascript, html, css, sharepoint-2010, cewp

我正在使用 SP 2010 中的 Content Editor WebPart 创建一个简单的按钮控件，使用以下代码：

```
<input type="button" class="button" id="btn1" onclick="replyclick('view');change(this);" value="+" /><label for="+"><u> Definition</u></label><br /> 
```

然而，在保存时，“价值”标签就这样消失了！留下一个空白的按钮。

此外，我在这里使用的功能是一个 javascript，并且按钮功能完美......

我不确定是否有任何其他替代“值”来命名我的按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T09:15:34.720

我在我的 SharePoint 2010 开发环境中试用它，它运行良好。仔细检查你的 JavaScript。

# asp.net-mvc-4 - ASP.NET MVC/EF Code First 错误：无法检索模型的元数据

> ID：14125892
> 
> 赞同：1
> 
> 时间：2013-01-02T16:52:53.447
> 
> 标签：asp.net-mvc-4, ef-code-first

我正在尝试在 MVC4 中创建一个控制器，但我遇到了一个我不明白的错误（我是 MVC 新手）。它说“无法检索 'CIT.ViewModels.DashboardViewModel'... 的元数据”，然后给出 2 个可能的问题。一是 DashboardViewModel 没有定义键。另一个是 EntitySet 'DashboardViewModels' 没有定义键。

我为 DashboardViewModel 定义了一个键，但这并没有解决问题。这是我的仪表板视图模型；

```
public class DashboardViewModel
    {

        public DashboardViewModel() { }

        [Key]
        public int Id { get; set; }
        public Hardware Hardware { get; set; }
        public Software Software { get; set; }
        public HardwareType HardwareType { get; set; }
        public Manufacturer Manufacturer { get; set; }
        public SoftwarePublisher SoftwarePublisher { get; set; }

    } 
```

如您所见，它由类组成。我这样做是为了让我可以从同一个视图访问多个类。我认为它不需要密钥，但我添加了一个并没有解决问题。另一个错误听起来像是在为 DashboardViewModels 寻找 DbSet。据我了解，您的 DbSet 就是您的表格。我不想要或不需要 DashboardViewModels 表。我这样做只是为了在我的视图中可以访问多个表/类。到目前为止，这一切都很好。

当我尝试创建控制器时，我使用 DashboardViewModel 作为我的模型，使用 Context 作为我的上下文。这是我的背景：

```
public class Context : DbContext
    {
        public DbSet<Software> Softwares { get; set; }
        public DbSet<Location> Locations { get; set; }
        public DbSet<SoftwarePublisher> SoftwarePublishers { get; set; }
        public DbSet<SoftwareType> SoftwareTypes { get; set; }
        public DbSet<Hardware> Hardwares { get; set; }
        public DbSet<Manufacturer> Manufacturers { get; set; }
        public DbSet<HardwareType> HardwareTypes { get; set; }
 } 
```

我该如何解决这些错误？

# asp.net - 当 IsApproved 为 false 时验证 ASP.NET 成员身份用户名和密码

> ID：14125899
> 
> 赞同：3
> 
> 时间：2013-01-02T16:53:06.427
> 
> 标签：asp.net, vb.net, validation, asp.net-mvc-2, membership-provider

当 IsApproved 值为 FALSE 时，如何检查用户输入的密码是否与数据库中存储的密码匹配？

我希望做的是如下...

1.  用户注册 - 详细信息已保存且 IsApproved 设置为 false
2.  用户收到带有会员确认链接的欢迎电子邮件
3.  用户单击电子邮件中的链接 - 此时 IsApproved 设置为 True
4.  用户现在可以登录

好的，以上所有内容都很好，我没有发现任何问题。

我遇到问题的地方是...

当用户尝试登录并且他/她的 IsApproved 标志为 FALSE 时，我需要将他/她的密码与存储在 DB 中的密码进行交叉引用，这就是我卡住的地方。

这个想法是交叉检查密码，如果用户输入了有效的凭据，那么通过点击电子邮件等等来向用户显示一条消息，说激活你的会员资格。

但即使输入的密码匹配，因为我无法在代码中检查它，ValidateUser 函数总是返回 false，因为 IsApproved 设置为 false！

谁能指出我正确的方向？

另外我实际上不需要查看密码，所以即使有一个密封的函数，我也可以调用它来简单地确认密码是否匹配也很好......

下面是我的代码块..

```
 Public Function ValidateUser(ByVal Username As String, ByVal Password As String, ByRef PwdMatches As Boolean, ByRef Approved As Boolean) As Boolean Implements IMembershipService.ValidateUser
    '
    Dim ThisMember As MembershipUser = Nothing
    Dim ThisResult As Boolean = Nothing
        '
        Approved = False
        ThisResult = False
        PwdMatches = False
        If String.IsNullOrEmpty(Username) Then
            Throw New ArgumentException("Value cannot be null or empty.", "Username")
        ElseIf String.IsNullOrEmpty(Password) Then
            Throw New ArgumentException("Value cannot be null or empty.", "Password")
        ElseIf _Provider.ValidateUser(Username, Password) Then
            ThisResult = True
        Else
            Try
                ThisMember = _Provider.GetUser(Username, False)
                Try
                    If (ThisMember Is Nothing) = False Then
                        Approved = ThisMember.IsApproved
                        Try
                          <!-- This is the point im stuck on -->
                            If Password_Matches_With_Password_In_Db Then
                                PwdMatches = True
                            Else
                                PwdMatches = False
                            End If
                        Catch ex As Exception
                            ThisResult = False
                        End Try
                    Else
                        ThisResult = False
                    End If
                Catch ex As Exception
                    ThisResult = False
                End Try
            Catch ex As Exception
                ThisResult = False
            End Try
        End If
        Return ThisResult
        ThisMember = Nothing
        ThisResult = Nothing
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:51:29.483

*   我认为一种方法是创建一个表来存储待批准的用户帐户。当用户注册时，使用 userID 或 userName 填充此表，或设置一些标志来指示尚未激活帐户和已发送邮件的用户。用户登录时检查此表，如果存在或未设置标志，则显示“将您的帐户激活给用户”

*   编写一个连接数据库的函数，并使用 userId 从`Aspnet_Membership`表中获取批准状态。列名`IsApproved`是真还是假

    `Dim user As MembershipUser = Membership.GetUser(userName); Dim isApproved As Boolean = myMethodCheckIfUserIsApproved(user.ProviderUserKey); //userID`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:42:49.423

您应该能够调用该方法，作为参数`Membership GetPassword`传入，这应该只会导致返回密码。`Nothing``passwordAnswer`

但是，关于这种方法的免责声明：我们已经实现了自己的成员资格提供程序和 SQL，并且我没有原始代码来验证这一点，因此默认提供程序中可能有一些东西会阻止这种方法，但它是值得尝试。

编辑：

在密码被散列的情况下，一个可能的解决方案是对用户表执行直接数据库查询以获取 IsApproved 标志的状态。您可以在调用 GetUser 之前或之后执行此操作，具体取决于您对最终用户的信任程度（如果您不信任他们，我会在之后调用它以防止有人尝试多个用户查看哪些是活动的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-05T03:49:04.830

# 更新并回答我的问题

大家好，回答我的问题并感谢您的帮助，在尝试查看帐户成员资格是否已获得批准之前，我试图验证密码似乎是在吠叫错误的树。

我确实以非常简单的方式解决了这个问题。我就是这样做的，我不需要直接询问数据库密码字段，也不必担心对密码进行哈希处理。

首先，我在 ACCOUNTS MODEL 的 SERVICES 区域中修改了默认的 VALIDATELUSER 调用声明......

```
Function ValidateUser(ByVal Username As String, ByVal Password As String) As Boolean 
```

至...

```
Function ValidateUser(ByVal Username As String, ByVal Password As String, ByRef IsApproved As Boolean) As Boolean 
```

这使我能够在帐户模型的服务区域中调用我新修改的验证过程，其中原始代码如下......

```
Public Function ValidateUser(ByVal userName As String, ByVal password As String) As Boolean Implements IMembershipService.ValidateUser
  If String.IsNullOrEmpty(userName) Then Throw New ArgumentException("Value cannot be null or empty.", "userName")
  If String.IsNullOrEmpty(password) Then Throw New ArgumentException("Value cannot be null or empty.", "password")
  Return _provider.ValidateUser(userName, password)
End Function 
```

现在修改的功能如下......

```
Public Function ValidateUser(ByVal Username As String, ByVal Password As String, ByRef Approved As Boolean) As Boolean Implements IMembershipService.ValidateUser
  Dim ThisMember As MembershipUser = Nothing
  Dim ThisResult As Boolean = Nothing
  '
    Approved = False
    ThisResult = False
    If String.IsNullOrEmpty(Username) Then
      Throw New ArgumentException("Value cannot be null or empty.", "Username")
    ElseIf String.IsNullOrEmpty(Password) Then
      Throw New ArgumentException("Value cannot be null or empty.", "Password")
    ElseIf _Provider.ValidateUser(Username, Password) Then
      ThisResult = True
    Else
      ThisMember = _Provider.GetUser(Username, False)
      If (ThisMember Is Nothing) = False Then
        Approved = ThisMember.IsApproved
      End If
    End If
    Return ThisResult
    ThisMember = Nothing
    ThisResult = Nothing
  End Function 
```

与直接操作数据库和散列密码相比，我对这个过程更满意。

所以实际上，它更多的是关于原始的处理顺序是从后到前...... IE。不是 (1) 验证登录凭据然后 (2) 检查电子邮件是否已确认？（通过欢迎消息中的链接）而是...（1）电子邮件确认然后（2）验证登录凭据

# ios - Jquery Mobile HTML5 iOS 本机应用程序启动页面返回 safari

> ID：14125900
> 
> 赞同：0
> 
> 时间：2013-01-02T16:53:07.377
> 
> 标签：ios, jquery-mobile

**我对JQM**中的某个页面存在问题，该页面在通过链接访问时不会加载，但会加载。它正在调用的页面添加了一些谷歌图表库，这些库似乎导致了非加载问题。`data-ajax="false"`如果使用该命令禁用了ajax，则可以对这个问题进行排序。

问题是，当我们在 iPad 上添加 HTML5 作为本机应用程序时单击该链接时，它会关闭该应用程序并打开 safari 以显示该链接。

如何禁用此行为？

代码如下。

```
<div data-role="page" data-theme="a">

<div data-role="content" class="ui-grid-b  my-breakpoint" align="center">   
        <div class="ui-block-a">
            <a href="fridges.php" data-ajax="false"> <img class="icons" border=0 alt="Storage Monitoring" src="Images/Fridge Icon.png"> </a>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T21:27:54.110

不要使用**data-ajax="false"** ...它会在 safari 中打开，因为没有 ajax 就等于说他们点击的链接是外部的（rel="external"）。你需要做的是弄清楚为什么没有 data-ajax="false" 就不能工作。

我认为这与使用 JQM 的开发人员看到的许多常见脚本错误之一有关。大多数人认为他们可以在不阅读文档的情况下使用当前的 Web 开发知识来使用 JQM，这是一个很大的错误。不一定说你是，但这太常见了。

您需要做的第一件事是发布一个示例并告诉我们它**为什么**不起作用。您也不能期望所有东西都能神奇地与 JQM 一起工作，这些图表是否支持？如果没有，您可能需要对其进行调整才能正常工作。

# php - 过去 24 小时 Google News Feed 的 PHP XML 获取数据

> ID：14125903
> 
> 赞同：0
> 
> 时间：2013-01-02T16:53:18.773
> 
> 标签：php, xml, google-news

我想使用 GoogleNews XML Feed 并使用一些 PHP 来设置不同的样式来创建早间新闻摘要。

问题

是否可以在一个 xml 地址中搜索一系列短语。只需要匹配一个词组就可以返回结果，但都参与了搜索？例如。财政+悬崖，美国+债务

提要网址应仅获取过去 24 小时的数据。我的查询不是。问题在于最后两个变量。需要做些什么来修复它。

```
xml = http://news.google.com/news?output=rss&num=100&q=fiscal+cliff&as_drrb=q&as_qdr=d 
```

然后我想获取每篇文章的`<title>`,`<url>`如果可能的话`<author>`

然后我希望 PHP 使用每个 URL 来获取标题和图像。

```
$item[title], $item[url] $item[author], Item[image_src], Item[caption] 
```

然后我会回显这些信息，我希望它如何在页面上设置。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T16:56:08.410

[http://www.queness.com/post/8743/learn-how-to-read-parse-and-display-xml-data-in-random-order-with-jquery](http://www.queness.com/post/8743/learn-how-to-read-parse-and-display-xml-data-in-random-order-with-jquery)

使用 google，因为这个问题不是唯一的，您可以使用 xml dom 来获取、解析和显示数据。

# c# - 多维数组转换运行时错误 ---> 无法将“System.Object[,]”类型的对象转换为“System.String”类型

> ID：14125913
> 
> 赞同：0
> 
> 时间：2013-01-02T16:54:06.617
> 
> 标签：c#, multidimensional-array, casting, type-conversion

我在将多维对象数组 ( `object[,]`) 简单转换为新数据类型 ( `string[,]`) 以进行日志记录时遇到了麻烦。该格式是一个动态二维数组，有许多列和行，但不能很好地适应框架中提供的通用集合对象之一。我会在整个过程中将它作为一个强类型`string[,]`，但我需要对象数组的灵活性，因为在某些情况下我需要使用不同的数据类型。

```
private List<KeyValuePair<string, object>> _dataList = new List<KeyValuePair<string, object>>();
private object[,] _dataArray;

public List<KeyValuePair<string, object>> RetrieveHistoricalData()
{

...

//Calling Method (for explaination and context purposes)

_log.Log ("\r\nRetrieveHistoricalData", "_dataList.Count: " + _dataList.Count);
_dataList.ForEach(dli => _log.Log ("\r\nRetrieveHistoricalData", "_dataList: " 
    + dli.Key + ((object[,])dli.Value)
    .CastTwoDimensionalArray<string>()
    .TwoDimensionalArrayToString()));

...

} 
```

... 添加了基于 Jon Skeet 建议的扩展方法 ...

```
internal static T[,] CastTwoDimensionalArray<T>(this object[,] dataArray)
{
    int rows = dataArray.GetLength(0);
    int columns = dataArray.GetLength(1);
    T[,] returnDataArray = new T[rows, columns];
    for (int row = 0; row < rows; row++)
    {
        for (int column = 0; column < columns; column++)
        {
            returnDataArray[row, column] =
                      (T)Convert.ChangeType(dataArray[row, column], typeof(T));
        }
    }
    return returnDataArray;
} 
```

...这是我自己的补充（仅包括在内，因为它在我正在执行的行中）...

```
internal static string TwoDimensionalArrayToString<T>(this T[,] dataArray)
{
    int rows = dataArray.GetLength(0);
    int columns = dataArray.GetLength(1);
    string returnString = "";
    for (int row = 0; row < rows; row++)
    {
        for (int column = 0; column < columns; column++)
        {
            returnString = returnString + "[" + row + "," + column + "] =>" + dataArray[row,column]+ " ;  ";
        }
    }

    return returnString;
} 
```

我已经从第一篇文章中编辑了上面的代码，但是在尝试在通用扩展方法中将 System.Double 转换为 System.String 时，我仍然收到 System.InvalidCastException。我正在研究一种通过类型反射添加一些异常以消除剩余问题的简单方法。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:07:43.900

编辑：如果所涉及的数组*确实是*原始数组，则只能从`object[,]`to 转换。例如，这很好：`string[,]`*`string[,]`*

 *```
object[,] o = new string[,]
{
    { "x", "y" },
    { "a", "b" }
};
string[,] x = (string[,]) o; 
```

...但这不是：

```
object[,] o = new object[,]
{
    { "x", "y" },
    { "a", "b" }
};
string[,] x = (string[,]) o; // Bang! 
```

即使数组的*每个元素*都是一个字符串，它仍然不是一个字符串数组。在后一种情况下，您需要编写自己的代码来创建新的数组对象并执行元素转换。例如，这是一个可用于转换每个元素的通用方法：

```
using System;

class Test
{
    static void Main()
    {
        object[,] o = new object[,]
        {
            { "x", "y" },
            { "a", "b" }
        };
        string[,] x = Cast2D<string>(o);
        Console.WriteLine(x[1, 1]); // "b"
    }

    static T[,] Cast2D<T>(object[,] input)
    {
        int rows = input.GetLength(0);
        int columns = input.GetLength(1);
        T[,] ret = new T[rows, columns];
        for (int i = 0; i < rows; i++)
        {
            for (int j = 0; j < columns; j++)
            {
                ret[i, j] = (T) input[i, j];
            }
        }
        return ret;
    }        
} 
```

在您的情况下，您可能想要：

```
object[,] array = (object[,]) financialDataObject;
string[,] financialData = Cast2D<string>(array); 
```*

# android - 单击按钮上的动画 ImageView

> ID：14125915
> 
> 赞同：0
> 
> 时间：2013-01-02T16:54:10.360
> 
> 标签：android, animation, android-animation, android-imageview

我正在尝试翻译 ImageView，每次单击时将其向下移动一步。但是，动画仅适用于第一次单击按钮；所有后续点击只会更改 ImageView 的位置，而不会更改动画。

这是我的 move_down.xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<translate 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromYDelta="0%"
    android:toYDelta="100%"
    android:duration="500"
/> 
```

这是我在 main.xml 中的按钮声明：

```
<Button
     android:id="@+id/bGo"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:text="Go"
 android:onClick="startAnimation" /> 
```

这是我的 startAnimation 函数：

```
public void startAnimation(View view) {
        Animation test = AnimationUtils.loadAnimation(this, R.anim.move_down);
        character.startAnimation(test);//This is the ImageView I'm trying to animate
        test.setAnimationListener(new AnimationListener() {
            public void onAnimationStart(Animation animation) {}
            public void onAnimationRepeat(Animation animation) {}
            public void onAnimationEnd(Animation animation) {
                character.setY(character.getY() + character.getHeight());          
                }
        });     
} 
```

当我注释掉该行时

```
character.setY(character.getY() + character.getHeight()); 
```

动画会起作用，但 ImageView 的位置会在动画完成后快速恢复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:59:10.243

取出

```
character.setY(character.getY() + character.getHeight()); 
```

使用 Animation 的 fillAfter 属性使其停留在动画结束时的位置。

像这样：

```
Animation test = AnimationUtils.loadAnimation(this, R.anim.move_down);
test.setFillAfter(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T12:28:32.577

也许你应该尝试这样的事情

```
public void startAnimation(View view) 
{
    Animation test = AnimationUtils.loadAnimation(this, R.anim.move_down);
    character.startAnimation(test);
    character.setVisibility(View.GONE);//when returns to original position, make it invisible
    character.setY(character.getY() + character.getHeight());//move to new location
    character.setVisibility(View.VISIBLE);//make it visible
} 
```

动画结束后，它会回到原来的位置，所以你需要让它不可见，然后将它移动到动画中它移动到的新位置，然后让它可见。运行时，它应该看起来是无缝的。

# html - 初学者：帮我用可点击的徽标替换背景图片徽标

> ID：14125917
> 
> 赞同：0
> 
> 时间：2013-01-02T16:54:20.270
> 
> 标签：html, css

当布局复杂时，我不太擅长 CSS 和 html。我可以快速解决问题，但我没有真正的知识。

我正在尝试为我的网站改编这个演示：[http](http://demo.marcofolio.net/bgimg_slideshow/) ://demo.marcofolio.net/bgimg_slideshow/ 。

问题：徽标是 div 的背景图像，而不是链接。

我还不够好，看不到如何在不破坏布局的情况下更改它。

您能否通过提供修复程序（如果您花费的时间不超过 5 分钟）或给我提示或链接来帮助我，以便我自己解决？

编辑：这是一个[代码最少的 jsfiddle](http://jsfiddle.net/CxzgH/)

这里是文件：

html：

```
<div id="header">
    <div id="headerimgs">
        <div id="headerimg1" class="headerimg"></div>
        <div id="headerimg2" class="headerimg"></div>
    </div>
    <div id="nav-outer">
        <div id="navigation">
            <div id="menu">
                <ul>
                    <li><a href="http://www.marcofolio.net/">Marcofolio</a></li>
                    <li><a href="http://www.twitter.com/marcofolio">Twitter</a></li>
                    <li><a href="http://feeds2.feedburner.com/marcofolio">RSS</a></li>
                    <li><a href="http://jquery.com/">jQuery</a></li>
                    <li><a href="http://en.wikipedia.org/wiki/Cascading_Style_Sheets">CSS</a></li>
                    <li><a href="http://buysellads.com/buy/detail/956">Advertisements</a></li>
                </ul>
            </div>
        </div>
    </div>
</div> 
```

CSS：

```
ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,body,html,p,blockquote,fieldset,input{margin:0; padding:0;}

#header { height:600px; }

.headerimg { background-position: center top; background-repeat: no-repeat; width:100%; height:600px; position:absolute; }

#nav-outer { height:110px; padding-top:11px; position:relative; top:24px; background-image:url("http://demo.marcofolio.net/bgimg_slideshow/images/headerbg.png"); }

#navigation { height:100px; width:960px; margin:0 auto; background-image:url("http://demo.marcofolio.net/bgimg_slideshow/images/logo.png"); background-position:top left; background-repeat:no-repeat; }

#menu { position:relative; top:85px; }
#menu ul { list-style:none; }
#menu ul li { display:inline; font-variant:small-caps; font-size:12px; }
#menu ul li a { color:white; text-decoration:none; font-weight:bold; padding-right:20px; }
#menu ul li a:hover { text-decoration:underline; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:09:45.380

我对您提供的链接进行了一些实时编辑。我认为这是您想要实现的目标。

这是一个[**Demo**](http://jsbin.com/oyusin/4/)，基于您的小提琴。

**HTML**

```
<div id="navigation">
  <h1 id="logo"><a href="/">My Website!</a><br />
    <span>loving jQuery and CSS</span>
  </h1>
... 
```

**CSS**

```
#navigation {
    position: relative;
}

#logo {
    position: absolute;
    top: 0;
    left: 0;
}
#logo a {
    color: #fff;
    text-decoration: none;
    font-size: 32px;
}
#logo span {
    font-size:20px;
    color:#48bdee;
    margin-left:50px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:11:17.997

这是我的做法。

`#navigation`首先，从div中删除背景图像。

然后将以下内容添加为`#navigation`.

```
<a href="/" style="
    height: 80px; 
    width: 500px;  
    background-image: url('http://demo.marcofolio.net/bgimg_slideshow/images/logo.png');
    background-position: top left; 
    background-repeat: no-repeat;
    display: inline-block;
    position: absolute;
" alt="Image Description"></a> 
```

所以你的导航 div 应该是这样的：

```
<!-- Remove all background attributes from #navigation in the CSS -->
<div id="navigation">
            <!-- Below is the new line!, makes your logo clickable! -->
            <a id="logo" href="" style="height: 80px; width: 500px; background-image: url('http://demo.marcofolio.net/bgimg_slideshow/images/logo.png'); background-position: top left; background-repeat: no-repeat;display: inline-block; position: absolute;"></a>
            <!-- Everything else below stays the same!... -->
            <div id="search">
                <form>
                    <input type="text" id="searchtxt">
                    <input type="submit" value="search" id="searchbtn">
                </form>
            </div>
            <div id="menu">
                <ul>
                    <li><a href="http://www.marcofolio.net/">Marcofolio</a></li>
                    <li><a href="http://www.twitter.com/marcofolio">Twitter</a></li>
                    <li><a href="http://feeds2.feedburner.com/marcofolio">RSS</a></li>
                    <li><a href="http://jquery.com/">jQuery</a></li>
                    <li><a href="http://en.wikipedia.org/wiki/Cascading_Style_Sheets">CSS</a></li>
                    <li><a href="http://buysellads.com/buy/detail/956">Advertisements</a>
                </li></ul>
            </div>
        </div> 
```

基本上，您制作一个`<a href>`具有背景图像（所有`a href's`都可点击）。当您将背景图像分配给 a 时`<a href>`，您必须设置`display:block`它以将其呈现为块级元素。在这种情况下，我们绝对定位它以将其从文档流中剔除并防止它干扰其他元素。

有更好的方法可以做到这一点，但可能需要重新编写一些代码（这并不难，但需要 HTML 和 CSS 的业余技能水平）。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T17:13:48.303

你应该添加

```
 <div id="logo">
        <a href="#">
            <img src="images/logo.png" alt="" />
        </a>
    </div> 
```

到 <div id="#navigation">，就在 <div id="search"> 之前

然后：

1）您应该将徽标浮动到左侧

```
 #logo{
         float: left;
    } 
```

2）移除**顶部：85px；**从 #menu 并添加**clear: both;**

3) 删除**背景图片：url("../images/logo.png");** 来自#navigation

这样，您就有了可点击的图像徽标。:)

解释：

*   您将徽标浮动到左侧，因为#search 浮动到右侧

*   你删除 top: 85px; 因为这是对现在填充图像的空白空间的补偿，并添加 clear: 两者都是因为它清除了浮动并将菜单定位回原位

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T17:08:50.350

如果您也想使用 javascript，则可以执行以下操作。

将 div 的样式设置为在鼠标悬停时显示为鼠标指针：

```
.Logo { cursor:pointer; } 
```

然后使用 javascript，打开`onclick`事件的 url：

`<div class="Logo" onclick="window.open('google.com')" />`

# ios - VoiceOver 不会连续读取强或强调标签

> ID：14125919
> 
> 赞同：2
> 
> 时间：2013-01-02T16:54:31.810
> 
> 标签：ios, voiceover

我在包含强/强调标签的 UIWebView 中有一些 HTML。由于强烈或强调标签，我想强制 VoiceOver 连续阅读而不是暂停句子中间。例如：

```
<div> This text reads continuously </div> 
```

但，

```
<div> 
    This text will stop <strong>here</strong>, 
    and the rest of the sentence is considered a different block 
</div> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-17T20:22:54.510

我不确定以前版本的操作系统上的这种行为，但是在 iOS 6.1 上的 UIWebView 中枚举可访问性元素时，如果我使用触摸对屏幕进行正常探索，则文本将在属性更改时停止。但是，如果我选择段落的开头并使用两指向下滑动，VoiceOver 将开始阅读连贯段落中的内容。

[顺便说一句，我从http://axslab.com/articles/ios-voiceover-gestures-and-keyboard-commands.php](http://axslab.com/articles/ios-voiceover-gestures-and-keyboard-commands.php)发现了 2 指向下滑动手势，其中包含使用 VoiceOver 时可用手势的完整列表.

# azure - Azure 抽象库：Lokad 和 CloudFx 之间有什么区别和建议？

> ID：14125921
> 
> 赞同：3
> 
> 时间：2013-01-02T16:54:34.540
> 
> 标签：azure, azure-storage, azure-table-storage, azure-storage-queues, cloudfx

在 Lokad 和 CloudFx 之间，我们正在考虑哪种框架最能支持在 Windows Azure 上持续快速开发高质量和可扩展的云解决方案。Lokad 和 CloudFx 似乎都在不同的 Azure 服务之上提供了一个很好的抽象层，并且还提供了一个扩展框架。

Lokad 在 GitHub 上可用，而 CloudFx 框架源代码尚未发布。两者都受版权保护，但具有许可许可。CloudFx 由 Microsoft 开发，而 Lokad 由第三方开发。Lokad 的开发似乎很松懈（2012 年 2 月/4 月的最新更新），而 CloudFx 在 2012 年进行了多次更新。现在我倾向于 CloudFx 的全面 API 和微软的所有权。

您使用这两个框架和您的建议有何经验？是否有任何替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-06T17:38:36.320

Technical differences between the two aside, from what I can tell, Lokad has more or less been dropped: they seem to have pretty much stopped updating it (last update May 2012). We're switching our project over to CloudFx and moving forward. For anything new, I'd definitely use CloudFx (or at least don't use Lokad).

# php - PHP - 多维数组到 CSV

> ID：14125922
> 
> 赞同：1
> 
> 时间：2013-01-02T16:54:42.847
> 
> 标签：php, csv

我目前已经编写了一种将多维数组转换为逗号分隔值的方法（为了便于调试，我使用管道而不是逗号）。问题是，我知道我用来执行此操作的代码非常糟糕。它按我想要的方式工作，但它一点都不好。

**我需要的**

目前，该`arr_to_csv()`函数适用于多维数组中的五级嵌套数据。我需要一个递归函数来为一个或无限数量的嵌套数组执行相同的操作，或者朝着正确的方向轻推。递归根本*不是*我的强项，但我知道这是前进的方向。

**数据输入**

一个多维数组被传递给函数。

```
array
  'name' => 
      array
         'singular' => null
         'plural' => null
  'fields' => 
      array
         'price' => 
            array
               'label' => string 'Preis' (length=5)
               'company_id' => 
                  array
                     'label' => null
                     'placeholder' => null
                     //...the array could go on... 
```

**该函数返回以下...**

这正是我想要的...

```
0 => string 'name||singular||null' (length=20)
1 => string 'name||plural||null' (length=18)
2 => string 'fields||price||label||Preis' (length=27)
3 => string 'fields||company_id||label||null' (length=31)
4 => string 'fields||company_id||placeholder||null' (length=37)
5 => string 'fields||name||label||null' (length=25)
6 => string 'fields||name||placeholder||null' (length=31) 
```

**我可怕的构造函数**

我不擅长递归，所以这是我糟糕的`foreach`s 列表。正如您从下面的代码中看到的那样，这很糟糕（无需阅读整个内容，它只是复制自己）。请帮我整理一下我可怕的代码！

```
function arr_to_csv($data,$csv = '||') {

$array = array();

/* Epic amount of for each's. This could be done with recursion */
foreach($data as $key => &$value) {
    if (!is_array($value)) {
        $array[] = $key . $csv .(is_null($value)?'null':$value);
    } else {
        foreach ($value as $k => &$v) {
            if (!is_array($v)) {
                $array[] = $key . $csv . $k . $csv . (is_null($v) ? 'null' : $v);
            } else {
                foreach ($v as $kk => &$vv) {
                    if (!is_array($vv)) {
                        $array[] = $key . $csv . $k . $csv . $kk . $csv . (is_null($vv) ? 'null' : $vv);
                    } else {
                        foreach ($vv as $x => &$y) {
                            if (!is_array($y)) {
                                $array[] = $key . $csv . $k . $csv . $kk . $csv. $x . $csv . (is_null($y) ? 'null' : $y);
                            } else {
                                foreach ($y as $too => $long) {
                                    if(!is_array($long)) {
                                        $array[] = $key . $csv . $k . $csv . $kk . $csv. $x . $csv . $too . $csv. (is_null($long)?'null':$long);
                                    } else {
                                        foreach ($long as $omg => $why) {
                                            if(!is_array($why)) {
                                                $array[] = $key . $csv . $k . $csv . $kk . $csv. $x . $csv . $too . $csv . $omg . $csv . (is_null($why) ? 'null' : $why);
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    } 
}    
return $array;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T15:29:29.017

这是一些伪代码，但它是一个开始：

```
$strings = [];
$flattenArray = function($arr, $level) use (&$strings, &$flattenArray) {

    foreach($arr as $key=>$value){
        $s = &$strings[$level];
        if(!isset($s)) { $s = array(); }
        $s[] = $key;
        if(is_array($value)) {
           $flattenArray($value, $level);
        }
        else {
           $s[] = $value;
        }
        $level ++;
    }
};
$flattenArray($myArray, 0);
foreach($strings as &$arr) {
     $arr = implode("||", $arr);
} 
```

[您的阵列的](https://chat.stackoverflow.com/transcript/message/6987965#6987965)小演示： http: [//codepad.viper-7.com/CR2SPY](http://codepad.viper-7.com/CR2SPY) <-- 它不能完全工作，但它是一个开始

* * *

## 更新：

这是一个我*认为*可以按照您想要的方式工作的演示：http: [//codepad.viper-7.com/shN4pH](http://codepad.viper-7.com/shN4pH)

代码：

```
$strings = [];
$flattenArray = function($arr, $level, $k = null) use (&$strings, &$flattenArray) {

    foreach($arr as $key=>$value){
        if($k === null) {
            $s = &$strings[$key];
        }
        else {
            $s = &$strings[$k];
        }
        if(!isset($s)) { 
            $s = array();  
        }
        $str = &$s[$level];
        if(!isset($str)) { 
            $str = array(); 

            if($k !== null) { $str[] = $k; }
        }
        $str[] = $key;
        if(is_array($value)) {
           $flattenArray($value, $level, ($k === null) ? $key : $k);
        }
        else {
            $str[] = is_null($value) ? "null" : $value;
        }
        $level ++;
    }
};
$flattenArray($myArray, 0);
$all = [];
foreach($strings as $k => $arr){
    $new = array();
    foreach($arr as $ky => $ar) {
        $all[] = implode("||", $ar);
    }
}

print_r($all); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T21:13:55.010

不确定这是否会对您有所帮助，但是首先展平阵列然后以您想要的方式格式化不是更容易吗？要展平阵列，请尝试以下操作：

```
$array = "YOUR ARRAY";

$FlatArray = array();

foreach(new RecursiveIteratorIterator(new RecursiveArrayIterator($array)) as $k=>$v)
  {
    $FlatArray[$k] = $v;
  } 
```

整个早上都在尝试为此提出一个递归函数。这和我一样接近，也许你可以改进一下。

```
$data = array('name' =>array('singular' => NULL,'plural' => NULL,'fields' =>array('price' =>array('label' =>'Preis','company_id' =>array('label' => NULL,'placeholder' => NULL)))));

function arr_to_csv($data,$csv = '||')
{
$list = "";
foreach($data as $key => &$value)
        {
        $list .= $key . $csv .((!is_array($value))?(is_null($value)?'null':$value): arr_to_csv($value))."<br>";
        }
return $list;
}   

print_r(arr_to_csv($data)); 
```

**返回这个：**

```
name||singular||null

plural||null

fields||price||label||Preis

company_id||label||null

placeholder||null 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-02T17:02:23.053

我没有检查它，所以如果它不起作用，应该更正它。

```
function readarray($from_array, $addr = array()) {
    global $output;
    foreach ($from_array as $key => $value) {
        if (is_Array($value) && count($value) > 0) {
            $addr[] = $key;
            readarray($value, $addr);
        } else {
            $output[] = implode('||', $addr) . $value;
        }
    }

}

$output = array();
foreach ($my_array as $key=>$value){
readarray($value); 
} 
```

// 改进以获取初始数组根的单独数组

# java - 如何在spring webflow中的评估表达式中评估集合大小（集合）

> ID：14125923
> 
> 赞同：0
> 
> 时间：2013-01-02T16:54:47.393
> 
> 标签：java, spring, spring-webflow

我的流文件具有如下视图状态：

```
<view-state id="shopstate">
<on-entry>
<evaluate expression="MyShop.getProducts.size()" result="flowScope.noOfProducts"/>
</on-entry>
</view-state id="shopstate"> 
```

**注意**：这里 Myshop 类有一个`getProducts()`返回集合的方法。我也在我的 webflow junit 中嘲笑过 Myshop。

以下是 webflow junit 测试方法：

```
 @Test
   public void testMyShopProducts()
   {
          Set<String> products = new HashSet<String>();
          products.add("Mobiles");
          products.add("Tabs");
          startFlow(context);
          context.setEventId("shopstate");
          when(Myshop.getProducts.size()).thenReturn(products.size());

   } 
```

**错误：**

当我运行此测试方法时，出现如下错误

> [main] 错误 cbhceShopException - org.springframework.webflow.execution.ActionExecutionException：执行 [AnnotatedAction@c789fb targetAction = [EvaluateAction@df2940 表达式 = Myshop.getProducts.size()，resultExposer = [ActionResultExposer@10d4f27 结果 = flowScope.noOfProducts , resultType = [null]]], attributes = map[[empty]]] in state 'shopstate' of flow 'details' -- 动作执行属性为'map[[empty]]'。

我尝试了很多方法，但都是徒劳的。你能告诉我是否有其他方法可以做到这一点吗？

# facebook - 在 Facebook Wall 中发布嵌入视频

> ID：14125925
> 
> 赞同：0
> 
> 时间：2013-01-02T16:54:55.993
> 
> 标签：facebook, facebook-graph-api, video

我正在尝试使用 PHP SDK 发布视频。使用“feed”方法，然后我会展示你正在使用的代码。我用的是flv视频。

```
$response = $this->facebook->api('/me/feed/', 'POST', array(
                'message' => 'My custom message',
                'name' => 'Whatever name',
                'description' => 'Whatever description',
                'link' => 'http://localhost/my_proyect/',
                'picture' => 'http://localhost/my_proyect/my_image.png',
                'source' => 'http://localhost/my_proyect/videos/my_video.flv',
                'actions' => array(
                    array(
                        'name' => 'Some Actions',
                        'link' => 'http://localhost/my_proyect/'
                    )
                ),
                'caption' => 'Cool Video'
                    ));
echo json_encode($response); 
```

在我的 HTML 中，我放置了 FB 元标记。

```
<!-- FB Meta Tags -->
        <meta property="fb:app_id" content="xxxxxxxxxxxxx" />
        <meta property="og:url" content="http://localhost/my_proyect/" />
        <meta property="og:video" content="http://localhost/my_proyect/videos/my_video.flv" />
        <meta property="og:video:height" content="640" />
        <meta property="og:video:width" content="385" />
        <meta property="og:video:type" content="application/x-shockwave-flash" />
        <!-- FB Meta Tags END --> 
```

当我看到回复时。返回一个 ID 为 post 的数组。

当我看到用户的墙时，只看到带有文本的帖子，而不是嵌入的视频或图像。

我在代码中做错了什么？我需要传递一个播放器还是默认播放我的视频的播放器？或者因为我在本地主机上而不工作？

提前致谢。

# java - 线程安全字符串拆分

> ID：14125928
> 
> 赞同：1
> 
> 时间：2013-01-02T16:55:04.370
> 
> 标签：java, performance, split

我已经使用 StringTokenizer 和 String 的方法 indexOf() 和 substring() 进行了拆分测试。结果我必须知道，第二个比 StringTokenizer 快。但我的问题是哪个最适合线程安全？

使用 StringTokenizer 进行字符串拆分：

```
String sample=null;
StringTokenizer tokens = new StringTokenizer("FF#Mukil","#");

if(tokens.hasMoreTokens())
{
    sample= tokens.nextToken();
    System.out.println(sample);
} 
```

使用 String 的方法拆分字符串：

```
String sample= "FF#Mukil";
int pos=sample.indexOf('#');
System.out.println(sample.substring(0,pos)); 
```

在这些示例中，样本是全局变量提前致谢

编辑：在前面的第一个示例如下

```
StringTokenizer tokens = new StringTokenizer("FF#Mukil","#");

    if(tokens.hasMoreTokens())
    {
        String sample= tokens.nextToken();
        System.out.println(sample);
    } 
```

我已经改变了它，如下所示

```
String sample=null;
StringTokenizer tokens = new StringTokenizer("FF#Mukil","#");

    if(tokens.hasMoreTokens())
    {
        sample= tokens.nextToken();
        System.out.println(sample);
    } 
```

编辑：添加了 java 文件源。

```
//FileName=MySplitUtil.java
import javax.servlet.http.HttpServletRequest;
import java.util.StringTokenizer;
public class MySplitUtil
{
    public static void setUsername_locale(HttpServletRequest request)
    {
        String value = (String) request.getAttribute("userLocale"); // userLocale's sample value looks like ffmukil$en_US
        splite1(value,request);
        splite2(value,request);
    }
    private static void splite1(String value,HttpServletRequest request)
    {
        StringTokenizer tokens = new StringTokenizer(value,"$");
        String username=null;
        String locale=null;
        if(tokens.hasMoreTokens())
        {
            username = tokens.nextToken();
            locale = tokens.nextToken();
        }
        request.setAttribute("usrName",username);
        request.setAttribute("usr_Locale",locale);
    }
    private static  void splite2(String value,HttpServletRequest request)
    {
        int pos = value.indexOf('$');
        String username = value.substring(0,pos);
        String locale = value.substring(pos+1,value.length());
        request.setAttribute("usrName",username);
        request.setAttribute("usr_Locale",locale);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T16:57:15.880

由于您只使用局部变量，因此无论您对它们做什么，这两个版本都是非常安全的......

要遇到线程安全问题，您需要（不正确地）跨线程共享某些内容。在您的示例中无法共享任何内容。

更一般地说，字符串是不可变的，因此是线程安全的。所以第二个版本，假设`sample`变量是共享的，将是线程安全的。

**编辑**

您的最新编辑确认了两件事：

*   你的类是无状态的（没有实例变量）
*   你只使用局部变量

所以这两种方法都是线程安全的，你应该选择更简单和/或更有效的一种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-02T17:09:29.170

在java中，`Strings`都是不可变的，没有什么会影响原来的字符串。

这种不变性使`Strings`线程安全。可以多人访问，也可以同时访问，`StringTokenizer`没有`string.substring`任何问题。

但是，问题可能来自`StringTokenizer`您不应该同时在多个字符串上使用的类。但是，正如其他人所指出的，在您的代码中您只使用局部变量，因此您不会遇到线程安全问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:57:15.217

根据 Javadoc：“StringTokenizer 对象在内部维护要标记的字符串中的当前位置。一些操作将当前位置推进到处理的字符之外。”

所以它不是线程安全的。你为什么要分享它呢？只需将其设为局部变量即可。

# salesforce - 无法传递参数 到相关方法

> ID：14125939
> 
> 赞同：0
> 
> 时间：2013-01-02T16:55:55.137
> 
> 标签：salesforce, apex-code, visualforce

假设我有一个页面代码：

```
 <apex:pageBlockTable value="{!allContacts}" var="c" >
            <apex:column value="{!c.id}" headervalue="ID"/>
            <apex:column value="{!c.FirstName}" headervalue="First Name"/>
            <apex:column value="{!c.LastName}" headervalue="Last Name"/>
            <apex:column value="{!c.Title}" headervalue="Title"/>
            <apex:column value="{!c.Company}" headervalue="Company"/>
            <apex:column>
                <apex:commandButton action="{!addToRecruits}" value="Recruit">
                    <apex:param assignTo="{!leadID}" name="leadID" value="{!c.id}"/>
                </apex:commandButton>
            </apex:column>
        </apex:pageBlockTable> 
```

和相关控制器：

```
 public String leadID { get; set; }

    public PageReference addToRecruits() {
        System.debug('LeadID is: ' + leadID);
        List<Lead> potentialCandidate = [SELECT id, FirstName, lastName, Title, Company FROM Lead WHERE id = :leadID];   
        delete potentialCandidate;

        return null;
    } 
```

看来我不能传递`leadID`给`addToRecruits()`方法。你知道为什么会这样吗？

**更新：**

我可以设法解决它。我没有使用 SOQL 进行查询，而是采用了这种风格：

```
public String leadID { get; set; }
public PageReference addToRecruits() {

    Lead candidate=new Lead(id=leadID);
    ....
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-03T10:22:14.760

看起来像臭名昭著的平台错误？其中 apex:param 值并不总是使用 apex:commandButton 发送到控制器（尽管它们是使用 apex:commandLink 发送的）。

Jeff Douglas 在此处总结了该问题和可能的解决方法的简单概述：http: [//blog.jeffdouglas.com/2010/03/04/passing-parameters-with-a-commandbutton/](http://blog.jeffdouglas.com/2010/03/04/passing-parameters-with-a-commandbutton/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T10:39:51.843

将“重新渲染”属性添加到 apex:commandButton 并且它将开始工作 - 类似于 `<apex:commandButton rerender="myForm" action="{!addToRecruits}" value="Recruit">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T09:54:58.917

有一种方法可以将参数传递给控制器​​，但它也将使用 commandLink。我的意思是我们需要使用

*   **命令链接和命令按钮**

例如：

```
<apex:commandLink action="{!applyNow}" id="applybuttonLink" style="text-decoration:none">
<apex:commandButton value="Apply now"/>
<apex:param name="passId" assignTo="{!passId}" value="{!Vac.id}"/>
</apex:commandLink> 
```

控制器：

```
public String vacancyId{get;set;} 
```

# php - 插入不工作

> ID：14125940
> 
> 赞同：-4
> 
> 时间：2013-01-02T16:56:01.327
> 
> 标签：php, database, crud, insert-query

我正在尝试将订单提交到数据库中，理论上它应该可以工作，但由于某种原因没有出现在数据库的表格中。

```
$result = "insert into orders(lastname, id, email, roomnumber, typeorder)
    values('".$lastname ."','".$ID ."','".$Email ."','".$RoomNumber ."','".$typeorder ."','" . "0');"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-02T17:02:44.507

您正在为 5 列插入 6 个值...删除“0”

请不要使用 mysql_* 而是尝试[PDO](http://php.net/pdo)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:17:55.103

I would recommend you using data sanitization before running the query anyway. but here is the quick fix and it should work absolutely fine.
$result = "insert into orders(lastname, id, email, roomnumber, typeorder) values('".$lastname ."','".$ID ."','".$Email ."','".$RoomNumber ."','".$typeorder ."')";

# django - PostgreSQL 的 Django 模型继承错误

> ID：14125945
> 
> 赞同：6
> 
> 时间：2013-01-02T16:56:14.337
> 
> 标签：django, postgresql, inheritance, model

我正在从 MySQL 后端切换到 PostgreSQL 后端，并且遇到了一些模型继承问题。以下是模型示例：

```
class Parent(models.Model):
   key = models.Charfield(...)
   value = models.Charfield(...)
   content_type = models.ForeignKey(ContentType)
   object_id = models.CharField(max_length=200)
   content_object = generic.GenericForeignKey('content_type', 'object_id')

class Child1(Parent):
   pass 

class Child2(Parent):
   pass 
```

我们有两个这样的子类的原因是，我们在另一个模型中模拟两个键/值对，并希望将它们分成两个表以便于查找。通用 FK 也用于将其附加到其他模型。这种继承设置在 MySQL 中运行良好，但是当我将其切换到 PostgreSQL 时，在尝试运行我们的测试时出现错误（但 syncdb 运行良好）。就好像 Django 可以接受这种关系，但 PostgreSQL 不喜欢正在生成的 SQL。当我查看从 syncdb 生成的内容时，我看到了这一点：

```
CREATE TABLE "myapp_parent" (
"id" serial NOT NULL PRIMARY KEY,
"key" varchar(200) NOT NULL,
"value" varchar(200) NOT NULL,
"content_type_id" integer NOT NULL REFERENCES "django_content_type" ("id") DEFERRABLE  INITIALLY DEFERRED,
"object_id" varchar(200) NOT NULL);

CREATE TABLE "myapp_child1" (
"parent_ptr_id" integer NOT NULL PRIMARY KEY REFERENCES "myapp_parent" ("id") DEFERRABLE INITIALLY DEFERRED);

CREATE TABLE "myapp_child2" (
"parent_ptr_id" integer NOT NULL PRIMARY KEY REFERENCES "myapp_parent" ("id")    DEFERRABLE INITIALLY DEFERRED); 
```

所以一切看起来都是正确的，然后当我运行我的测试时，我得到了这个：

```
Error: Database test_myapp couldn't be flushed. Possible reasons:
* The database isn't running or isn't configured correctly.
* At least one of the expected database tables doesn't exist.
* The SQL was invalid.
Hint: Look at the output of 'django-admin.py sqlflush'. That's the SQL this command    wasn't able to run.
The full error: column "id" of relation "myapp_child1" does not exist 
```

当我运行冲洗时：

```
SELECT setval(pg_get_serial_sequence('"myapp_child1"','id'), 1, false); 
```

我尝试在子模型中手动添加一个 ID 字段作为主键，但 Django 抛出一个错误，说它与父的 ID 字段冲突。我该如何解决这个问题，以便 PostgreSQL 喜欢它？并提前感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T14:55:40.943

如果你在 django 中使用模型继承，你应该声明`class Parent`为抽象的

```
class Parent(models.Model):
    ...
    class Meta:
        abstract = True 
```

请参阅[文档](https://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance)。我想某些 postgres / mysql 差异仅针对标准符合代码进行了测试 - 这可能就是您在这里遇到问题的原因。我也建议`./manage.py syncdb`在进行这些更改后;-)

如果有疑问，并且在测试环境中，您可以删除表并重新开始

```
$ ./manage.py sqlclear | ./manage.py dbshell 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T15:01:36.427

您的模型必须包含一个 - 并且只有一个 - 目标模型的外键。如果您有多个外键，则会引发验证错误。这是 django 的限制之一。

# python - 在 Blender 中获取 KX_PolygonMaterial 的实例

> ID：14125950
> 
> 赞同：0
> 
> 时间：2013-01-02T16:56:36.430
> 
> 标签：python, textures, game-engine, blender

我有一个关于在 Blender 的游戏引擎中使用 Python 的问题。

在开始之前，我想声明我正在尝试更改 Blender 游戏引擎中对象的颜色。为此，我试图找到一种方法来更新对象的纹理（我基本上想要两个或三个状态，红色、（黄色）、绿色）。

我现在正在做的是：

```
scene = GameLogic.getCurrentScene();    
pingMeter = scene.objects['Ping Meter'];
mesh = pingMeter.meshes;
materials = mesh[0].materials;
material = materials[0]; 
```

但是，当我这样做时，`print(material.__class__.__name__)`它会输出`KX_BlenderMaterial`. `KX_PolygonMaterial`如果我正在运行 Blender 游戏引擎，我不应该得到吗？反正有没有改变颜色或纹理，`KX_BlenderMaterial`因为我在文档中找不到任何东西。我可以`KX_PolygonMaterial`从上面的代码中得到一个实例吗？

...或者我应该一起采取不同的方法吗？

谢谢！

**编辑**：我正在使用 Blender 2.65，它使用 Python 3，以防有人想知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T16:41:23.833

我确定了一种使用 Blender 2.65 在 Python 中更改对象材质颜色的方法。在我上面的方法之前，我只是尝试了类似的东西：

```
scene = GameLogic.getCurrentScene();
pingMeter = scene.objects['Ping Meter'];
red = mathutils.Vector((1.0, 0.0, 0.0, 1.0));
pingMeter.color = red; 
```

然而，这并没有改变材质的颜色（应该变成红色，并且对象也被正确点亮）。我发现必须在对象的材料菜单下选中一个选项，即`Object Color`. 选中此框后，ping 表在游戏中成功变为红色。

Additionally, another method I attempted was to get the mesh of the object, get the material of the mesh, and change each vertex color of it. This did not work either, however I speculate that if the `Vertex Color Paint` option is checked in the materials menu that it would. I have not tested this though.

# javascript - 三个Js如何在一组立方体中的一个立方体的各个面上映射一个不同的随机图像

> ID：14125951
> 
> 赞同：3
> 
> 时间：2013-01-02T16:56:39.320
> 
> 标签：javascript, three.js

我正在尝试合并类似于以下示例的内容：

[http://mrdoob.github.com/three.js/examples/webgl_geometry_hierarchy.html](http://mrdoob.github.com/three.js/examples/webgl_geometry_hierarchy.html)

我已经让立方体本身可以正常工作，但我想在每个立方体上映射不同的图像。

例如，我希望其中一个立方体的每一面都有一个“Blogger”图标，另一个立方体的每一侧都有一个“Facebook”图标，第三个立方体的每一侧都有一个“Twitter”图标，……等等，等等。

我已经得到了一个 mapurl 可以在一个立方体上正常工作，但是当涉及到 Object3D 组时，我在映射图像时遇到了问题。

我是 WebGL 和三个 Js 的新手，任何帮助将不胜感激，谢谢！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-02T21:10:43.887

这就是它的完成方式`r53`：

```
var geometry = new THREE.CubeGeometry( 100, 100, 100 );
var material = new THREE.MeshFaceMaterial( [
    new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'image1.jpg' ) } ),
    new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'image2.jpg' ) } ),
    new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'image3.jpg' ) } ),
    new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'image4.jpg' ) } ),
    new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'image5.jpg' ) } ),
    new THREE.MeshBasicMaterial( { map: THREE.ImageUtils.loadTexture( 'image6.jpg' ) } )
] );

var mesh = new THREE.Mesh( geometry, material ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-13T12:59:35.537

目前（2017 年 12 月）ImageUtils.loadTexture、MeshFaceMaterial 和 CubeGeometry 不再使用（已弃用）。[https://threejs.org/docs/#api/deprecated/DeprecatedList](https://threejs.org/docs/#api/deprecated/DeprecatedList)

这样做的新方法是：

```
var geometry = new THREE.BoxGeometry( 10, 10, 10);
var material = [
    new THREE.MeshBasicMaterial( { map: new THREE.TextureLoader().load( 'image1.jpg' ) } ),
    new THREE.MeshBasicMaterial( { map: new THREE.TextureLoader().load( 'image2.jpg' ) } ),
    new THREE.MeshBasicMaterial( { map: new THREE.TextureLoader().load( 'image3.jpg' ) } ),
    new THREE.MeshBasicMaterial( { map: new THREE.TextureLoader().load( 'image4.jpg' ) } ),
    new THREE.MeshBasicMaterial( { map: new THREE.TextureLoader().load( 'image5.jpg' ) } ),
    new THREE.MeshBasicMaterial( { map: new THREE.TextureLoader().load( 'image6.jpg' ) } )
];

var mesh = new THREE.Mesh( geometry, material ); 
```

这是解释该过程的优秀简短教程的链接： [https ://www.youtube.com/watch?v=l77yAZ0E950](https://www.youtube.com/watch?v=l77yAZ0E950)

# android - 为什么我在线程中收到此错误？

> ID：14125953
> 
> 赞同：0
> 
> 时间：2013-01-02T16:56:48.227
> 
> 标签：android, eclipse, multithreading

为什么我在线程中收到此错误？

我使用了正确的语法，但似乎有一些错误！:(

这是屏幕截图 ==> [http://i.imgur.com/ccPOz.png?1](http://i.imgur.com/ccPOz.png?1)

编辑：这是代码：

`

```
package com.pc.threads;

import android.os.Bundle;
import android.app.Activity;
import android.content.Intent;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Thread music_2 = new Thread(){
            try{

            }catch(InterruptedException e){
                e.printStackTrace();
            }finally{
                Intent music_i = new Intent(MainActivity.this,NewActivity.class);
            }
        };
    } 
```

`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-02T16:59:28.357

在 Java 中，代码位于方法内部。当您定义（内联）您的线程类时，您忘记定义一个包装您的代码的方法“运行”。

```
Thread t= new Thread() {
    public void run() {
    ///your code goes here
    }
}; 
```

# java - JACOB：无法从 MS Word 获取信息属性

> ID：14125954
> 
> 赞同：1
> 
> 时间：2013-01-02T16:56:54.330
> 
> 标签：java, com, ms-word, jacob

我目前正在使用这个很棒的工具 Jacob，但我得到了一些非常奇怪的东西。阅读一个 MS Word 文件，我对文档进行标记，并且对于我得到的每个标记，我还想拥有页码和行号。奇怪的是，它只有在我自己启动 MSWord 并从 Jacob 那里获取实例时才有效。如果 Java 启动一个新实例，我无法获得这些信息。另一点是我从文件中获得了很多信息，效果很好，所以似乎唯一的麻烦是处理 Information 属性。

我的部分代码是：

```
ActiveXComponent myApplication = ActiveXComponent.connectToActiveInstance("Word.Application");
if (myApplication == null) {
  myApplication = new ActiveXComponent("Word.Application");
}
Dispatch myDocuments = myApplication.getProperty("Documents").toDispatch();
Dispatch myDocument = getOpenedDocument(myDocuments, pFilePath); 
```

……

```
Dispatch myParagraphs = Dispatch.call(myDocument, "Paragraphs");
Dispatch myParagraph = Dispatch.call(myParagraphs, "Item", new Variant(1)).toDispatch();
Dispatch myParagraphRange = Dispatch.get(myParagraph, "Range").toDispatch(); 
```

然后例如当我尝试时：

```
myText = Dispatch.get(myParagraphRange, "Text").toString(); 
```

我得到段落内容。但随着：

```
int myPageNumber = Dispatch.call(myParagraphRange, "Information", 3).getInt(); 
```

如果且仅当 MSWord 不是由我自己启动时，我会得到：

```
com.jacob.com.ComFailException: A COM exception has been encountered:
At Invoke of: Information
Description: Le serveur a généré une exception. 
```

似乎“信息”属性与 Word 有问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:40:23.580

终于找到我的代码有什么问题了。对于未知的准备，对于要获取的属性信息，不应强制使文档不可见。当您打开文档时

```
Dispatch.call(lObjDocuments, "Open", myPath, new Variant(false)...."); 
```

我的最后一个参数涉及 Word 进程的可见性。刚刚删除它，它的工作原理（感谢微软）

# random - 错误 CS1729：“UnityEngine.Random”类型不包含采用“1”参数的构造函数

> ID：14125956
> 
> 赞同：1
> 
> 时间：2013-01-02T16:57:03.733
> 
> 标签：random, arguments, range, unity3d

我过去做过一些基本的编码，现在我正在学习 Unity 并尝试使用 C# 做一些事情。

我的问题：

我有一个对象列表，它们的 ID 号在 1-50 范围内。我希望我的游戏随机选择一个对象，而不是按顺序遍历列表。第一步是选择初始 id 为一些随机数，但我只得到错误：“错误 CS1729：类型`UnityEngine.Random' does not contain a constructor that takes`1' 参数”。我知道我应该为构造函数提供更多参数，但我需要帮助来了解如何，因为代码对我来说看起来不错（如果简单的话）。

无论如何，它现在是这样的：

```
public int id;

public int randomid;

public void RandId(int id)
{
    Random randomid = new Random(Random.Range(1, 51));
    id = randomid;
    return id;
} 
```

这里 id 是对象的标识号， randomid 用于随机化它，我使用 Random.Range 来创建想要的范围（1-50）。看来我需要为 Random.Range 提供更多参数，但它已经有最小值和最大值。

你能给我一些建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T22:40:05.083

您的代码还有其他一些问题，但这应该是您所需要的。

```
public void SetIDToRandom(out int id)
{
    id = (int)Random.Range(1, 51);
} 
```

附录：

**Random**是一个静态类，你不直接实例化它。

# ruby-on-rails - 如何选择与一组父 ID 对应的所有子行

> ID：14125958
> 
> 赞同：1
> 
> 时间：2013-01-02T16:57:10.707
> 
> 标签：ruby-on-rails, activerecord

如何使用 ActiveRecord 查询选择与某个父表对应的所有子行。

```
create table foo (id, ...)
create table bar (id, foo_id, ...)

select * from foo where key = ? 
# The above return a single row or multiple rows.

select * from bar where foo_id in <ids from the above output> 
```

我如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:11:28.393

仅使用查询`ActiveRecord`

```
foo = Foo.where(:key = ?)
Bar.where(:foo_id => foo) 
```

使用关联和[急切加载](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)：

```
#foo model
class Foo < ActiveRecord::Base
  has_many :bars
end

#bar model
class Bar < ActiveRecord::Base
 belongs_to :foo
end

#query
Foo.includes(:bars).where(:key => ?).collect(&:bars) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:09:48.060

嗯...我不知道您的问题是否可以用 ARel 完成类似的事情（它不能）。您想要的是使用子查询提供匹配，您可以在 SQL 中执行此操作，因此使用 ActiveRecord::Base.find_by_sql。

```
ActiveRecord::Base.find_by_sql("select * from bar where foo_id in 
(select id from foo where key = #{key})") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:14:29.020

Arel*会这样做*：

```
Profile.where(user_id: User.select("id").where(exclude_from_analytics: true))
#=> Profile Load (395.1ms)  SELECT `profiles`.* FROM `profiles` WHERE `profiles`.`user_id` IN (SELECT id FROM `users` WHERE `users`.`exclude_from_analytics` = 1) 
```

您是否真的要进行子选择是另一回事 - 值得尝试将查询编写为连接：

```
Bar.joins(:foo).where(:foos => {:key => key}) 
```

假设您已设置 Bar 与`belongs_to :foo`关联。joins 方法也将接受一个原始的 sql 片段

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T17:17:32.103

你应该能够做到

```
Bar.find_all_by_foo_id([1,2,3,4]) 
```

在这种情况下，您必须先找到所有 foo id。但是，如果您在 ChuckE 提到的一个查询子查询中需要它是最好的。

# javascript - knockoutjs 验证 - 重新计算验证规则

> ID：14125972
> 
> 赞同：1
> 
> 时间：2013-01-02T16:58:08.570
> 
> 标签：javascript, knockout.js, knockout-validation

我正在使用 knockoutjs 和 knockoutjs 验证插件来验证我的视图模型。这是我的javascript代码

```
// enable validation
ko.validation.init();

// View model
function AppViewModel() {

    this.Canceled = ko.observable(false);

    this.Name = ko.observable("").extend({

        //custom validation
        validation: {
            validator: function (val, params) {

                //alert to show when validation is triggered
                alert("validation function was called");

                //change validation rule depending on whether cancel button was clicked
               if(params.Canceled == true)
                   return true;
                else
                   return false;

            },
            message: 'This field is required',
            params: {Canceled:this.Canceled()}
        }
    });

    this.errors = ko.validation.group(this);

    //function triggered on submit which checks for validation
    this.submit = function() {
        if(this.errors().length != 0)
            this.errors.showAllMessages();
        else
            alert("no errors detected");
    };

    //function to cancel validation rules
    this.cancelValidation = function() {
        this.Canceled(true);
    };
}

// Activate knockout.js
ko.applyBindings(new AppViewModel());​ 
```

这是我的 HTML

```
Name: <input type="text" data-bind="value: Name"/><br/><br/>
<button data-bind="click: submit">submit</button> <button data-bind="click: cancelValidation">Cancel validation</button>​ 
```

如果单击“取消验证”按钮，我想要做的是在运行时更改验证规则。为此，我使用了一个自定义验证函数以及一个名为“Canceled”的 ko.observable 变量。根据“Canceled”的值，我的验证器函数返回真或假。我遇到的问题是验证功能在页面加载时只运行一次。当“Canceled”的值发生变化时，该函数不会重新运行。这是正常行为吗？当我更改“Canceled”的值时，有没有办法让我重新运行当前模型的验证功能？

这是一个尝试代码的小提琴。我在验证函数中添加了一个警报，以表明它在页面加载时只运行一次。

[http://jsfiddle.net/eewJe/](http://jsfiddle.net/eewJe/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T03:56:48.290

您应该将 observable 而不是值传递给选项。改变

```
if(params.Canceled == true) 
```

到

```
if(params.Canceled() == true) 
```

并传入 observable。改变

```
params: {Canceled:this.Canceled()} 
```

到

```
params: {Canceled:this.Canceled} 
```

这是更新的小提琴：http: [//jsfiddle.net/nEPNC/](http://jsfiddle.net/nEPNC/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T19:37:34.480

没关系，我能够自己解决它。对于任何偶然发现这个问题的人，这是我更新的 Javascript

```
// enable validation
ko.validation.init();

// View model
function AppViewModel() {

    var self = this;

    this.Canceled = ko.observable(false);

    this.Name = ko.observable("").extend({

        //custom validation
        validation: {
            validator: function (val,para) {

                //alert to show when validation is triggered
                alert("validation function was called");

                //change validation rule depending on whether cancel button was clicked
               if(self.Canceled() == true)
                   return true;
                else
                   return false;

            },
            message: 'This field is required'
        }
    });

    this.errors = ko.validation.group(this);

    //function triggered on submit which checks for validation
    this.submit = function() {
        if(this.errors().length != 0)
            this.errors.showAllMessages();
        else
            alert("no errors detected");
    };

    //function to cancel validation rules
    this.cancelValidation = function() {
        this.Canceled(true);
    };
}

// Activate knockout.js
ko.applyBindings(new AppViewModel());​ 
```

我更改了验证器函数以直接检查 self.Canceled() 的值，而不是像在使用验证器的“params:”属性之前那样将 Canceled 作为参数传递。现在一切正常。这是一个更新的小提琴

[http://jsfiddle.net/HtYCw/](http://jsfiddle.net/HtYCw/)

如果有人有更好的方法，我仍然会对评论感兴趣。

# iphone - 我的 UIWebView 的警报视图不起作用

> ID：14125977
> 
> 赞同：1
> 
> 时间：2013-01-02T16:58:32.157
> 
> 标签：iphone, uiwebview, alertview

为什么这段代码不起作用？我只有这个：

```
-(void)_webview:(UIWebView *)_webview didFailLoadWithError:(NSError *)error {
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error!" message:@"You have no internet connection!" delegate:self cancelButtonTitle:@"Close" otherButtonTitles:nil, nil];
    [alert show];
}
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {
    exit(0);
} 
```

它应该工作，对吧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T17:05:07.507

因为您输入了错误的`UIWebViewDelegate`方法名称。你有

```
_webview:didFailLoadWithError: 
```

而这个方法的真实名称是

```
webView:didFailLoadWithError: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:05:12.607

如上述响应中所述，委托方法输入错误。另外，您是否将 UIWebView 的委托设置为实现了这些方法的类的实例？

例如，如果它是一个视图控制器，它可能在 viewDidLoad 中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    _webView.delegate = self;
} 
```

# jquery - 在当前函数的所有动画完成后触发事件

> ID：14125980
> 
> 赞同：2
> 
> 时间：2013-01-02T16:58:33.103
> 
> 标签：jquery, animation, random, mouseenter, easing

我一直在尝试仅在元素的所有`.animate()`功能（包括延迟和缓动）完成后才触发功能。

我尝试了几种不同的方法，但没有运气，有什么想法吗？

```
 $("#inner_work").on("mouseenter", ".activeBox", function(){
        var thisBox = $(this).attr('id');
        $("#inner_work [class^='workBox_']").each(function(){
            if($(this).attr('id') != thisBox){
                $(this).stop().delay(randomEasing(200,800)).animate({
                    opacity:0
                }, randomEasing(200,700));
            } else {
                $(this).stop().animate({
                    opacity:1
                }, 'fast');
            }
        }); 
  }); 
```

所有动画完成后如何触发事件？

`randomEasing`就是这个功能让它随机交错

```
function randomEasing(from,to)
{
    return Math.floor(Math.random()*(to-from+1)+from);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-02T17:01:13.830

您可以使用延迟对象并请求 a[`.promise()`](http://api.jquery.com/promise/)注册一个回调，该回调仅在集合中每个元素上的所有动画都完成时才被调用：

```
$("#inner_work [class^='workBox_']").promise().done(function() { 
     ...
}); 
```

这可以与您现有的代码链接：

```
$("#inner_work [class^='workBox_']").each(function() {
    // your existing animation code
}).promise().done(function() {
    ...
}); 
```

# c# - 如果方法名称以“Response”结尾，WCF 会中断吗？

> ID：14125983
> 
> 赞同：2
> 
> 时间：2013-01-02T16:58:54.650
> 
> 标签：c#, .net, wcf, web-services

我遇到了一个非常奇怪的问题，让我大部分时间都感到困惑，我不完全相信这是原因，但我可以重现它：

如果您有一个 WCF 服务，其方法名为“GetFormForResponse”，当您调用它时，它似乎会感到困惑并抛出错误，提示找不到该方法（但该服务已编译，因此很明显它就在那里！）。

此外，即使 WCF 方法名称不以“Response”结尾，但在该方法中调用了以“Response”结尾的函数，它也在做同样的事情。

看起来太奇怪了，但是重命名方法以使其不以“响应”结尾就可以了。我疯了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T17:11:12.650

我试了一下，一个由以下定义的 Web 服务：

```
[ServiceContract]
public interface IService
{
  [OperationContract]
  string GetData(int value);

  [OperationContract]
  string GetDataResponse(int value);
} 
```

作品。两种方法都可以按预期调用。

# web-crawler - 从网站获取图片

> ID：14125984
> 
> 赞同：2
> 
> 时间：2013-01-02T16:58:57.853
> 
> 标签：web-crawler

我需要从我有用户名和密码的网站下载所有图像。比如说，网站网址是 [http://example.co.in/images/Photos/ABC123.jpg](http://example.co.in/images/Photos/ABC123.jpg) 这样有很多图片，我的要求是下载所有图片。用 Java、C++ 或任何编程语言可以做什么？示例代码会有所帮助。谢谢

使用以下代码从 Google 网站获取图像

```
import java.io.BufferedInputStream;
import java.io.ByteArrayOutputStream;
import java.io.FileOutputStream;
import java.io.InputStream;
import java.net.URL;

class Test {
public static void main(String args[]) throws Exception {
    System.out.println("Hello World");

    URL url = new URL("http://www.google.co.in/images/google_favicon_128.png");
    InputStream in = new BufferedInputStream(url.openStream());
    ByteArrayOutputStream out = new ByteArrayOutputStream();
    byte[] buf = new byte[1024];
    int n = 0;
    while (-1 != (n = in.read(buf))) {
        out.write(buf, 0, n);
    }
    out.close();
    in.close();
    byte[] response = out.toByteArray();

    FileOutputStream fos = new FileOutputStream("C://ABC//google1.jpg");
    fos.write(response);
    fos.close();

}} 
```

现在我需要帮助，我不知道图像的名称说所有扩展名为 .jpg (*.jpg) 的图像，它应该以 1.jpg、2.jpg 等形式存储在我的文件夹中。那么如何计算图像数量以及如何在[http://www.google.co.in/images/中访问它们的名称](http://www.google.co.in/images/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-02T17:04:12.153

您正在寻找一个**[*爬虫*](http://en.wikipedia.org/wiki/Web_crawler)**。我最近使用**[了scrapy](http://scrapy.org/)**，它使用起来相当简单。

您所要做的就是创建您的[Spider](http://doc.scrapy.org/en/latest/topics/spiders.html)。它需要为[`Request`](http://doc.scrapy.org/en/latest/topics/request-response.html#scrapy.http.Request)您遇到的每个 url 生成对象，并且您可以使用对图像的额外 HTTP 请求来下载页面中的图像。

按照[教程](http://doc.scrapy.org/en/latest/intro/tutorial.html)，它真的很简单，一步一步地引导你，解释如何构建你的爬虫，并提供一个[代码示例](https://github.com/scrapy/dirbot)。

请注意，scrapy 适用于 python。

**java**还有**[crawl4j](http://code.google.com/p/crawler4j/)**。我个人并不熟悉它，但我听说它也很简单。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T17:04:22.340

看起来您对 Java 很熟悉，您可以尝试使用[HtmlUnit](http://htmlunit.sourceforge.net/)。

他们有[HtmlPage.getElementsByTagName("img")](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/html/HtmlPage.html#getElementsByTagName%28java.lang.String%29)方法，它将为您提供 HTML 中的图像标签列表。根据结果​​，您可以获取图像 src 位置并使用您的测试方法从 URL 下载图像。

您还可以使用其他 HTML 解析器，如[SimpleHTML Parser](http://java-source.net/open-source/html-parsers)、[JTidy](http://jtidy.sourceforge.net/)等来解析 HTML 以获取图像标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T17:01:19.200

如果您是 Linux 用户，请查看命令行工具`wget`

作为 Windows 用户，您可以通过[Cygwin](http://www.cygwin.com/) (http://www.cygwin.com/)使用它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-02T17:05:59.127

你正在寻找一个爬虫。如果您要使用 Java，我建议您使用[Jsoup](http://jsoup.org/)来解析来自网站的 HTML。结合[commons.io](http://commons.apache.org/io/)，您应该能够相当容易地做到这一点。

如果你想要一个完整的代码示例，你可以看看我最近做的一个正是这样做的[项目。](https://github.com/Vannevelj/Web-Crawler/tree/master/WebCrawler2.0/src)

基本上你所要做的就是从标签的`src`属性中加载所有链接`img`，然后下载这些图像。您可以提供额外的参数，例如图像类型或大小，但这取决于您自己的判断。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-02T17:12:17.397

使用[crawler4j](http://code.google.com/p/crawler4j/)，这是一个非常容易使用的网络爬虫库。

在他们的示例演示中展示了如何获取页面中包含的 url。

```
 List<WebURL> links = htmlParseData.getOutgoingUrls(); 
```

我不会使用字节流来写入文件。您可以从 URI 创建一个 File 对象，然后弄清楚如何将文件写入磁盘。

```
File imageFile = new File( new URL("www.foo.someImage.jpg").toURI() ); 
```

另一种可能的解决方案是使用 ImageIO()

```
URL url = new URL("www.foo.someImage.jpg");

Image image = ImageIO.read(url);

if(image != null){
   ImageIO.write(image, "jpg",new File("file path to save");
} 
```

# iphone - CCLabelTTF 字符间隔

> ID：14125986
> 
> 赞同：0
> 
> 时间：2013-01-02T16:59:08.283
> 
> 标签：iphone, ios, cocos2d-iphone

我们可以在 iOS cocos2d 中使用 CCLabelTTF 设置文本字符之间的像素间隔吗？有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T19:28:09.777

在自定义字体中，您可以编辑 TTF 文件中每个字符的运行长度（宽度）。如果您不使用自定义字体，则无法更改字符的运行长度。

# ios - Objective-C 峰值检测加速框架

> ID：14125995
> 
> 赞同：1
> 
> 时间：2013-01-02T16:59:55.627
> 
> 标签：ios, algorithm, signal-processing, fft, accelerate-framework

我在这里不是数学大师，所以我想问任何熟悉数字信号处理的人，检测实时峰值的最佳方法是什么。我每秒得到大约 30 帧/值，我尝试实现斜率算法来检测峰值，它工作正常，大约 80% 的情况，但它真的不够好:(。

从我搜索的内容来看，应该使用快速傅立叶变换，但我不知道如何开始使用它，也许我错过了在这种情况下应该如何使用 FFT 的一般想法。

在 iOS 中，我们有这个惊人的 Accelerate 框架，它应该可以帮助我做 FFT 的事情，但只要我不明白它对我来说几乎没有用处。

谁能通过将我指向正确的方向来以某种方式启发我:-)？

非常感谢，新年快乐！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-02T17:59:13.183

所以你有一个浮点数组，每秒钟生成一个包含 30 个样本的相机光值。你想知道每秒的峰值是多少？还是曾经？要使用加速计算向量中的最大值，您可以使用该`vDSP_maxv`函数。

或者您是否尝试检测每秒高于给定阈值的所有峰值？在这种情况下，您可以生成一个包含阈值的向量，该向量的长度与搜索峰值的向量相同。然后您可以使用该`vDSP_vmax`函数查找高于此阈值的所有值。

如果这还不够好，还有许多更复杂的技术可以在时间序列中找到峰值，这里讨论了一些简单的技术：

[时间序列中的峰值检测](https://stackoverflow.com/questions/12250134/peak-detection-in-time-series)

我可能会尝试计算梯度并寻找 0 交叉点`vDSP_nzcros`。

# java - Primefaces 响应式设计

> ID：14125996
> 
> 赞同：3
> 
> 时间：2013-01-02T17:00:00.647
> 
> 标签：java, primefaces, responsive-design, facelets

我想知道是否有框架或库允许我使用 Primefaces 开发 Web 应用程序，并且模板或布局根据屏幕显示做出响应。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T23:08:34.367

***（对不起，这里回复晚了，它在搜索时弹出）。***我在使用带有 Primefaces 的 Twitter Bootstrap 时非常幸运。一般来说，您需要注意数据表和所有其他不适用于移动设备的组件，但总的来说我很高兴。

此外，Primefaces 有一个皮肤来支持 bootstrap 的外观和感觉，因此您可以开箱即用地做很多事情。

缺点？它看起来像一个引导应用程序。上行空间？您不需要预先完成所有响应式工作，对于大多数网站来说就足够了。

# node.js - app.all('*') 和 app.use('/') 的区别

> ID：14125997
> 
> 赞同：133
> 
> 时间：2013-01-02T17:00:04.207
> 
> 标签：node.js, express

在 Node.js 上运行的 Express.js`app.all("*", … )`和Express.js之间有什么有用的区别吗？`app.use("/", … )`

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2013-01-02T17:06:37.960

在大多数情况下，它们会等效地工作。最大的区别是应用中间件的顺序：

*   `app.all()`附加到应用程序的路由器，因此只要到达`app.router`中间件（处理所有方法路由...... `GET`，`POST`等），就会使用它。

> 注意：`app.router`已在 express 4.x 中弃用

*   `app.use()`附加到应用程序的主中间件堆栈，所以它按照中间件指定的顺序使用，例如，如果你把它放在第一位，它将是第一个运行的东西。如果你把它放在最后，（在路由器之后），它通常根本不会运行。

通常，如果您想对所有路由进行全局处理，这`app.use()`是更好的选择。此外，它未来出现错误的可能性较小，因为 express 0.4 可能会删除隐式路由器（这意味着路由器在中间件中的位置将比现在更重要，因为从技术上讲，您甚至不必使用它现在）。

* * *

## 回答 #2

> 赞同：102
> 
> 时间：2014-06-12T19:04:54.470

**app.use**只接受一个回调函数，它是为中间件设计的。中间件通常不处理请求和响应，（技术上他们可以）它们只是处理输入数据，并将其交给队列中的下一个处理程序。

```
app.use([path], function) 
```

**app.all**接受多个回调，用于路由。通过多个回调，您可以过滤请求并发送响应。它[在 express.js 上的过滤器中进行了解释](https://stackoverflow.com/questions/8763504/filters-on-express-js)

```
app.all(path, [callback...], callback) 
```

**app.use**只查看 url 是否以指定路径开头

```
app.use( "/product" , mymiddleware);
// will match /product
// will match /product/cool
// will match /product/foo 
```

**app.all**将匹配完整路径

```
app.all( "/product" , handler);
// will match /product
// won't match /product/cool   <-- important
// won't match /product/foo    <-- important

app.all( "/product/*" , handler);
// won't match /product        <-- Important
// will match /product/
// will match /product/cool
// will match /product/foo 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-11-13T13:48:05.547

*   应用程序使用：

    1.  将中间件注入到您的前端控制器配置中，例如：标头、cookie、会话等。
    2.  必须写在 app[http_method] 之前，否则不会执行。
    3.  几个调用按写的顺序处理
*   惊恐：

    1.  (like app[http_method]) 用于配置路由的控制器
    2.  “all”表示它适用于所有 http 方法。
    3.  几个调用按写的顺序处理

看看这个 expressJs 代码示例：

```
var express = require('express');
var app = express();

app.use(function frontControllerMiddlewareExecuted(req, res, next){
  console.log('(1) this frontControllerMiddlewareExecuted is executed');
  next();
});

app.all('*', function(req, res, next){
  console.log('(2) route middleware for all method and path pattern "*", executed first and can do stuff before going next');
  next();
});

app.all('/hello', function(req, res, next){
  console.log('(3) route middleware for all method and path pattern "/hello", executed second and can do stuff before going next');
  next();
});

app.use(function frontControllerMiddlewareNotExecuted(req, res, next){
  console.log('(4) this frontControllerMiddlewareNotExecuted is not executed');
  next();
});

app.get('/hello', function(req, res){
  console.log('(5) route middleware for method GET and path patter "/hello", executed last and I do my stuff sending response');
  res.send('Hello World');
});

app.listen(80); 
```

这是访问路由'/hello'时的日志：

```
(1) this frontControllerMiddlewareExecuted is executed
(2) route middleware for all method and path pattern "*", executed first and can do stuff before going next
(3) route middleware for all method and path pattern "/hello", executed second and can do stuff before going next
(5) route middleware for method GET and path patter "/hello", executed last and I do my stuff sending response 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-03-19T06:28:15.113

使用`app.use()`，“挂载”路径被剥离并且对中间件函数不可见：

```
app.use('/static', express.static(__dirname + '/public')); 
```

`express.static`除非`req.url`包含 this 前缀 ( `/static`)，否则不会调用挂载的中间件函数 ( )，**此时调用函数时会剥离它**。

有了`app.all()`，就没有这种行为。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-02T17:06:42.657

是的，`app.all()`当使用任何类型的请求方法（POST、GET、PUT 或 DELETE）请求特定 URI 时调用

另一方面`app.use()`，用于您可能拥有的任何中间件，它安装在路径前缀上，并且在请求该路由下的 URI 时将被调用。

这是[app.all](http://expressjs.com/api.html#app.all)和[app.use](http://expressjs.com/api.html#app.use)的文档。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-23T11:12:29.250

以上所有答案均未提及两个差异。

第一个：
`app.all`接受正则表达式作为其路径参数。`app.use`不接受正则表达式。

第二个：
`app.all(path, handler)`or `app[method](path, handler)`handlers'`path`必须与**all** `path`相同。也就是说，`app[method]`路径是完整的。

`app.use(path, handler)`，如果`use`的路径完整，则处理程序的路径必须是`/`。如果`use`的路径是完整路径的开始，则处理程序路径必须是完整路径的其余部分。

```
app.use("/users", users);

//users.js: the handler will be called when matchs `/user/` path
router.get("/", function (req, res, next) {
    res.send("respond with a resource");
});

// others.js: the handler will be called when matches `/users/users` path
router.get("/users", function (req, res, next) {
    res.send("respond with a resource");
}); 
```

```
app.all("/users", users);

//others.js: the handler will be called when matches `/`path
router.get("/", function (req, res, next) {
    res.send("respond with a resource");
});
//users.js: the handler will be called when matches `/users` path
router.get("/users", function (req, res, next) {
    res.send("respond with a resource");
}); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-05-03T17:11:40.263

有两个主要区别：

1\. 模式匹配（Palani 给出的答案）
2.`next(route)`在使用`app.use`. 这在文档的链接中有所说明：

```
NOTE: next('route') will work only in middleware functions that were loaded by using the app.METHOD() or router.METHOD() functions. 
```

链接：[http ://expressjs.com/en/guide/using-middleware.html](http://expressjs.com/en/guide/using-middleware.html)

的工作效果`next('route')`可以从下面的例子中看出：

```
app.get('/',
(req,res,next)=>{console.log("1");
next(route); //The code here skips ALL the following middlewares
}
(req,res,next)=>{next();}, //skipped
(req,res,next)=>{next();}  //skipped
);

//Not skipped
app.get('/',function(req,res,next){console.log("2");next();}); 
```