# StackOverflow 问答 12967000-12967999

# vba - How can i make link with selected range in word?

> ID：12967007
> 
> 赞同：1
> 
> 时间：2012-10-19T03:35:31.813
> 
> 标签：vba, ms-word

I am using word2003 document for processing in my document i have to made link with two string variables (Not in the sense Footnotes and Endnotes)

{Page 1} Best quote from David Brinkley[1]

{Page 6}**[1] A successful person is one who can lay a firm foundation with the bricks that others throw at him**

I suppose to use Footnote/Endnote for the value [1] to link but it cause some changes while editing the the Footnote/Endnote. Is there any other way to make link between the selected string?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:55:32.000

可能有很多方法可以做到这一点，但您可以在第 6 页上为文本添加书签，然后在第 1 页上添加指向该书签的超链接。这可以在没有 VBA 代码的情况下完成：

1.  在第 6 页上选择书签的文本。

2.  插入/书签

3.  为书签命名并添加它

4.  在第 1 页上选择书签的文本。

5.  插入/超链接

6.  单击书签按钮并选择列表中的书签

VBA 中的等价物：

```
Option Explicit

Sub AddHyperlinkToBookmark()
    Dim oBookmark As Bookmark
    Dim oHyperlink As Hyperlink

    '***** Add code to select text for bookmark

    Set oBookmark = ThisDocument.Bookmarks.Add("BookmarkName", Selection.Range)

    '***** Add code to select text for link

    Set oHyperlink = ThisDocument.Hyperlinks.Add(Selection.Range, "", "BookmarkName")

    Set oBookmark = Nothing
    Set oHyperlink = Nothing
End Sub 
```

# webdriver - WebDriverWait or ImplicitlyWait or ExplictlyWait nothing works

> ID：12967008
> 
> 赞同：7
> 
> 时间：2012-10-19T03:35:53.330
> 
> 标签：webdriver, selenium-webdriver

I'm using Selenium 2 tests (written in C#) that choose values from a "select" control. Selection causes a post-back to the server, which updates the state of the page. I am therefore performing a manual wait (`thread.sleep`) after choosing a value to wait for the page to be changed. and it works fine with Thread.Sleep. However, `Thread.Sleep` is a bad idea to use with number of good reasons so when I take out all my `Thread.Sleep` line of code then all my test cases fall apart and I have tried WebDriverWait, Implicitly and Explicitly none works and very frustration

below is the sample code that I have tried....

//WebDriverWait

```
 public IWebElement WaitForElement(By by)
 {
            // Tell webdriver to wait
            WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(30));
            wait.PollingInterval = TimeSpan.FromSeconds(2);
            wait.IgnoreExceptionTypes(typeof(NoSuchElementException), typeof(NoSuchFrameException));
            wait.IgnoreExceptionTypes(typeof(StaleElementReferenceException), typeof(StaleElementReferenceException));

            IWebElement myWait = wait.Until(x => x.FindElement(by));
            return myWait;
} 
```

Tried this too:

```
 WebDriverWait wait = new WebDriverWait(new SystemClock(), driver, TimeSpan.FromSeconds(30), TimeSpan.FromMilliseconds(100)); 
```

//Implicitly:

```
driver.Manage().Timeouts().ImplicitlyWait(new TimeSpan(0, 0, 30)); 
```

//Explicit Wait:

```
IWebDriver driver = new FirefoxDriver();
driver.Url = "http://somedomain/url_that_delays_loading";
WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(30));
IWebElement myDynamicElement = wait.Until<IWebElement>((d) =>
    {
        return d.FindElement(By.Id("someDynamicElement"));
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T18:00:53.050

这对我有用->

```
WebDriverWait wait = new WebDriverWait(browser, new TimeSpan(0, 0, 30));

element = wait.Until<IWebElement>((driver) =>
  {
     return driver.FindElement(By.Name("name_of_element")));
  }); 
```

你也可以通过 ID 来做 ->

```
WebDriverWait wait = new WebDriverWait(browser, new TimeSpan(0, 0, 30));

element = wait.Until<IWebElement>((driver) =>
  {
     return driver.FindElement(By.Id("id_of_element")));
  }); 
```

如果不查看更多代码，就很难确定它为什么不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T10:27:47.293

尝试使用

```
new WebDriverWait(driver, 30).until(ExpectedConditions.presenseOfElementLocated(byLocator)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-10T14:15:43.477

我找到了一个使用stackoverflow的解决方案:)，这很有效：

```
click on partialLinkText("Exit")
remote.manage().timeouts().implicitlyWait(50, TimeUnit.SECONDS)
remote.manage().timeouts().implicitlyWait(0, TimeUnit.SECONDS)
// Thread.sleep(7000) // for js-work
(new WebDriverWait(remote, 245)).until(presenceOfElementLocated(By.partialLinkText("""Entry for > technician""")))
// Thread.sleep(3000) // for js-works 
```

# sql - SET SESSION AUTHORIZATION 和搜索路径

> ID：12967009
> 
> 赞同：2
> 
> 时间：2012-10-19T03:36:11.067
> 
> 标签：sql, postgresql, session, postgresql-9.1

**场景**

```
CREATE SCHEMA testschema;
CREATE ROLE testrole LOGIN;
GRANT ALL ON SCHEMA testschema TO testrole;
ALTER ROLE testrole SET search_path = testschema; 
```

现在，如果我启动连接（登录），`testrole`那么：

```
SHOW search_path; 
```

给出所需的结果：

```
search_path 
-------------
testschema
(1 row) 
```

但是，如果我以超级用户身份启动连接（登录）并执行以下操作：

```
SET SESSION AUTHORIZATION testrole;
SHOW search_path; 
```

结果是：

```
search_path   
----------------
"$user",public
(1 row) 
```

（或任何超级用户的搜索路径）

* * *

我的问题是，为什么不`SET SESSION AUTHORIZATION`影响电流`search_path`？
它是设计的错误还是我只是做错了？

从我发现的一点点来看，`SET SEARCH path = schemaname`after的解决方法`SET SESSION...`似乎是唯一的解决方案，但这违背了将持久搜索路径分配给角色的目的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:37:57.487

这是设计使然。我引用手册[`ALTER ROLE`](http://www.postgresql.org/docs/current/interactive/sql-alterrole.html)

> 这只发生在登录时；执行 SET ROLE 或 SET SESSION AUTHORIZATION 不会导致设置新的配置值。

# android - W/DownloadManager（7621）：中止下载请求 11：

> ID：12967012
> 
> 赞同：3
> 
> 时间：2012-10-19T03:36:33.717
> 
> 标签：android, ioexception, download-manager

```
E/UpdatesSettings( 7146): File write failed: java.io.IOException: open failed: EBUSY (Device or resource busy)
I/DownloadManager( 7621): Initiating request for download 11
W/DownloadManager( 7621): Aborting request for download 11: while opening destination file: java.io.FileNotFoundException: /storage/sdcard0/sysupdater/***.partial: open failed: EBUSY (Device or resource busy)
D/DownloadManager( 7621): cleanupDestination() deleting /storage/sdcard0/sysupdater/***.partial 
```

我`DownloadManager`用来下载文件，有时它会像这样出来。谁能告诉我为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-09T20:15:56.583

我遇到过类似的问题。

## 为避免 FileNotFoundException，请确保：

1.  添加写入外部存储所需的权限（如果这是您尝试保存的位置），请将以下内容添加到 AndroidManifest.xml 中：

    ```
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
    ```

2.  创建您尝试下载到的子文件夹：

    ```
    File folder = new File(FOLDER_PATH);
    if (!folder.exists()) {
        folder.mkdir();
    } 
    ```

# java - 如何在 Java 中以编程方式检查 SSL 证书到期日期

> ID：12967016
> 
> 赞同：37
> 
> 时间：2012-10-19T03:36:50.270
> 
> 标签：java, ssl, https, httpclient, ssl-certificate

我需要从Java网站上的SSL证书中提取到期日期，应该同时支持受信任和自签名证书，例如：1.trusted [https://github.com](https://github.com) 2.self-signed [https://mms.nw .ru/](https://mms.nw.ru/)

我已经将一些代码复制为：

```
import java.net.URL;
import java.security.SecureRandom;
import java.security.cert.Certificate;
import java.security.cert.CertificateException;
import java.security.cert.X509Certificate;
import javax.net.ssl.HostnameVerifier;
import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.KeyManager;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSession;
import javax.net.ssl.TrustManager;
import javax.net.ssl.X509TrustManager;

public class SSLTest {

    public static void main(String [] args) throws Exception {
        // configure the SSLContext with a TrustManager
        SSLContext ctx = SSLContext.getInstance("TLS");
        ctx.init(new KeyManager[0], new TrustManager[] {new DefaultTrustManager()}, new SecureRandom());
        SSLContext.setDefault(ctx);

        URL url = new URL("https://github.com");//https://mms.nw.ru
        HttpsURLConnection conn = (HttpsURLConnection) url.openConnection();
        conn.setHostnameVerifier(new HostnameVerifier() {
            @Override
            public boolean verify(String arg0, SSLSession arg1) {
                return true;
            }
        });
        System.out.println(conn.getResponseCode());
        Certificate[] certs = conn.getServerCertificates();
        for (Certificate cert :certs){
            System.out.println(cert.getType());
            System.out.println(cert);
        }

        conn.disconnect();
    }

    private static class DefaultTrustManager implements X509TrustManager {

        @Override
        public void checkClientTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {}

        @Override
        public void checkServerTrusted(X509Certificate[] arg0, String arg1) throws CertificateException {}

        @Override
        public X509Certificate[] getAcceptedIssuers() {
            return null;
        }
    }
} 
```

问题是：

1.  如何从证书中解析到期日期，在我的代码中 toString() 确实输出了日期，但很难解析。

2.  如何确定证书链，例如带有链 3 的 github 证书，我怎么知道从哪个证书获取到期日期？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-19T03:45:58.977

> 如何从证书中解析到期日期

将其转换为 an`X509Certificate`并调用`getNotAfter()`.

> 如何确定证书链，例如带有链的github证书

你明白了。[正如Javadoc](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/HttpsURLConnection.html#getServerCertificates())`Certificate[]`中所说，这就是数组。

> 我怎么知道从哪个证书获取到期日期？

阅读[Javadoc](http://docs.oracle.com/javase/6/docs/api/javax/net/ssl/HttpsURLConnection.html#getServerCertificates())。“对等方自己的证书首先是任何证书颁发机构”。

但是我不知道你为什么要这样做。Java 应该已经为您完成了这一切。

请丢弃不安全且不正确的 TrustManager 实现。处理自签名证书的正确方法是将它们导入客户端信任库。还请扔掉不安全的 HostnameVerifier，并使用默认的或安全的。如果您不希望它是安全的，为什么还要使用 HTTPS？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-18T01:14:19.140

确保将 Begin/End 行附加到 PEM 格式，否则 java 无法理解它。

```
public class CertTest {

    public static final String cert = "-----BEGIN CERTIFICATE-----\n<CERT_DATA>\n-----END CERTIFICATE-----";

    public static void main(String[] args){
        try {
            X509Certificate myCert = (X509Certificate)CertificateFactory
                     .getInstance("X509")
                     .generateCertificate(
                                       // string encoded with default charset
                    new ByteArrayInputStream(cert.getBytes())
                     );
            System.out.println(myCert.getNotAfter());

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-11T04:52:39.063

以 Kotlin 的方式，它应该看起来像这样：

```
fun certInformation(aURL: String) {
    val destinationURL = URL(aURL)
    val conn = destinationURL.openConnection() as HttpsURLConnection
    conn.connect()
    val certs = conn.serverCertificates
    for (cert in certs) {
        println("Certificate is: $cert")
        if (cert is X509Certificate) {
            println(cert.issuerDN.name)
            println(cert.notAfter)
            println(cert.notBefore)
        }
    }
} 
```

# php - 在 php 数组中搜索字符串并返回密钥？

> ID：12967020
> 
> 赞同：1
> 
> 时间：2012-10-19T03:37:14.293
> 
> 标签：php, arrays, search, strpos

> **可能重复：**
> [简单的​​ PHP strpos 函数不起作用，为什么？](https://stackoverflow.com/questions/4858927/simple-php-strpos-function-not-working-why)

我正在尝试在 php 数组中搜索某个值中的某个字符串并返回键.. 但到目前为止还没有运气。我不确定我做错了什么，但这是我到目前为止所做的......

我的数组（称为选项）：

```
Array
(
    [0] => Blue^35cm^10
    [1] => Pink^35cm, 40cm, 50cm^10, 3, 5
    [1] => Green^35cm, 50cm^3, 2
) 
```

我试图在下面的代码中找到 Pink 并尝试返回密钥..

```
foreach ($options as $key => $value) :
    if (strpos($value,'Pink')) :
        echo $key;
    endif;
endforeach; 
```

但它似乎不起作用？任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:42:03.763

该`strpos`函数将位置作为整数返回，在您的示例中，Pink 将返回为 0。

您需要检查它是否`strpos`返回为 以外的任何内容`false`，如下所示：

```
if (strpos($value, 'Pink') !== false) 
```

# php - How I can simplify this PHP code? too many switch() function

> ID：12967024
> 
> 赞同：-2
> 
> 时间：2012-10-19T03:37:44.787
> 
> 标签：php

I made listview in jQuery Mobile and I used PHP to feed its contents. It works properly, but the code is too long and most part of it are very similar to each other. Is there any way to simplify the code? Please have a look at the code, then I'll explain what I really need to do:

```
<ol data-role="listview">
            <?php
            while ($row = mysql_fetch_array($result)){
                echo "<li><a href=\"#\">";
                // first column check
                switch ($row[1]) {
                    case "Behnam":
                        echo " B . ";
                        break;
                    case "Tarin":
                        echo " T . ";
                        break;
                }
                // second column check
                switch ($row[2]) {
                    case "Behnam":
                        echo " B . ";
                        break;
                    case "Tarin":
                        echo " T . ";
                        break;
                    default:
                        echo " N . ";
                }
                // third column check
                switch ($row[3]) {
                    case "Behnam":
                        echo " B . ";
                        break;
                    case "Tarin":
                        echo " T . ";
                        break;
                    default:
                        echo " N . ";
                }
                // fourth column check
                switch ($row[4]) {
                    case "Behnam":
                        echo " B . ";
                        break;
                    case "Tarin":
                        echo " T . ";
                        break;
                    default:
                        echo " N . ";
                }
                // fifth column check
                switch ($row[5]) {
                    case "Behnam":
                        echo " B . ";
                        break;
                    case "Tarin":
                        echo " T . ";
                        break;
                    default:
                        echo " N . ";
                }
                // sixth column check
                switch ($row[6]) {
                    case "Behnam":
                        echo " B ";
                        break;
                    case "Tarin":
                        echo " T ";
                        break;
                    default:
                        echo " N ";
                }
                echo "</li></a>";
            }
            ?>
            </a></li>
        </ol> 
```

and the result is:

![enter image description here](../Images/194ef0b4b99bbc2f0f75b4b380358d3e.png)

By using `while ($row = mysql_fetch_array($result)){` I can fetch each row of the sql table one by one. But I also need to check the value of each cell(column) as well.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:50:02.297

这通过在行中的所有列上应用一个函数来概括它（首先跳过），然后将它们与`" . "`.

```
while ($row = mysql_fetch_array($result, MYSQL_NUM)) {
    echo "<li><a href=\"#\">";
    echo join(' . ', array_map(function($v) {
        if ($v == 'Behnam') {
            return 'B';
        elseif ($v == 'Tarin') {
            return 'T';
        else {
            return 'N';
        }
    }, array_slice($row, 1));
    echo "</li></a>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:42:55.663

将代码分组在一个 2 参数函数中：

```
 function checkRowValue($row, $checkDefault) {
      switch ($row) {
          case "Behnam":
              echo " B . ";
              break;
          case "Tarin":
              echo " T . ";
              break;
          default:
              if ($checkDefault)
                  echo " N . "; 
      }
  } 
```

调用为：

```
 <ol data-role="listview">
        <?php
        while ($row = mysql_fetch_array($result)){
            echo "<li><a href=\"#\">";
            // first column check
            for ($i = 0; $i < 7; $i++)
                checkRowValue($row[i], $i > 0);
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T05:01:40.993

尝试这个

```
 if(in_array("Behnam",$row) {
        echo " B . ";
    }
    else if(in_array("Train",$row) {
       echo " T . ";
    }
    else {
        echo " N . ";
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-28T04:17:25.167

这是最终结果：

```
<ul id="competition_list" data-role="listview" data-inset="true" data-theme="a">
            <?php
            // using the returned value from database to feed the list.
            // showing the competiton rounds' outcome.
            while ($row = mysql_fetch_array($result)){
                    echo "<li><a href=\"#\">";
                    echo $row[0] . ".";  //this is the id column in the table and will give me the number of the row
                    for($i = 1; $i <= 5; $i++){
                        switch ($row[$i]) {
                        case "Behnam":
                            echo "&nbsp;&nbsp; B &nbsp;&nbsp;";
                            break;
                        case "Tarin":
                            echo "&nbsp;&nbsp; T &nbsp;&nbsp;";
                            break;
                        }
                    } // end for()
                    echo "</a></li>";
            } // end while()
            ?>
        </ul> 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-19T03:41:13.827

```
 <?php
                while ($row = mysql_fetch_array($result)){
                    echo "<li><a href=\"#\">";
                    // first column check
            foreach($row as r)
            {

                    switch (r) {
                        case "Behnam":
                            echo " B . ";
                            break;
                        case "Tarin":
                            echo " T . ";
                            break;
                    }
}
    ?> 
```

# objective-c - What's the difference between "performSelector:withObject:afterDelay:" where delay is 0, and just calling the selector?

> ID：12967026
> 
> 赞同：7
> 
> 时间：2012-10-19T03:38:01.877
> 
> 标签：objective-c, selector, messaging

I'm working on an iPad project that uses a third-party SDK, and have been reading through the SDK code to learn about it and objective-c. I came across the following line in an asynchronous callback:

```
[self performSelector:@selector(doSomething) withObject:nil afterDelay:0]; 
```

I've read through [the documentation](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html) on that selector. The relevant line appears to be the following:

> Specifying a delay of 0 does not necessarily cause the selector to be performed immediately. The selector is still queued on the thread’s run loop and performed as soon as possible.

I can't determine why one should write `[self performSelector:@selector(doSomething) withObject:nil afterDelay:0]`, as opposed to merely writing `[self doSomething]`. It seems to me that a delay of zero means that the call should be made immediately. Clearly I'm missing something, it's unlikely that the framework author chose this approach at random. Other StackOverflow answers don't shed any light on this either. Is the "performSelector" selector being used because the doSomething selector itself is asynchronous, and the call is being made in an asynchronous callback?

I did find [another link](http://codeshaker.blogspot.ca/2012/05/alternatives-to-performselector.html) suggesting the following:

> It's interesting to note that using performSelector with afterDelay will also let the warning [viz, a compiler warning] go away: ...
> 
> [self performSelector:aSelector withObject:nil afterDelay:0.0];

So did the author use this code to suppress a compiler warning only? If that's the case, then it's probably preferable to suppress the warnings through clang push/pops, as suggested in [this thread](https://stackoverflow.com/questions/7017281/performselector-may-cause-a-leak-because-its-selector-is-unknown).

If anyone has a cogent explanation as to why the author used the ...afterDelay method, I'd be grateful. Thanks.

**Edit Oct 22, 2012:** I don't believe that the sole answer given here by @rmaddy is wholly applicable to my situation, but it's still a good answer, so I'll accept it. I'll keep tabs on this question and come back if I find anything new. Thanks. J.Z.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T03:43:29.270

一种可能的用途，例如：

```
[self performSelector:@selector(doSomething) withObject:nil afterDelay:0]; 
```

是允许当前运行循环在调用 'doSomething' 之前完成。换句话说，当前调用堆栈可以在调用 'doSomething' 之前完成（当前方法返回）。通常这用于给 UI 一个更新的机会。

尽管没有更多上下文，但很难知道作者的真实意图，但这是一种常见的用法。

# javascript - Clear text of div , but keep child nodes using jquery

> ID：12967028
> 
> 赞同：3
> 
> 时间：2012-10-19T03:38:03.510
> 
> 标签：javascript, jquery, html, dom

> **Possible Duplicate:**
> [jQuery: how to remove the text but not the children elements](https://stackoverflow.com/questions/2715167/jquery-how-to-remove-the-text-but-not-the-children-elements)

```
<div id="parent" style="border:2px solid red; width:300px;height:200px">
    text of parent
    <div id="child1" style="border:1px solid green; width:200px;height:80px"></div>
    <div id="child2" style="border:1px solid blue; width:200px;height:80px"></div>
</div> 
```

In the above example, I want to clear only text `"text of parent"` of parent `div` (`parent`), keeping child nodes(`child 1`, `child2`) intact. How can I do this using jQuery?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T03:43:12.923

尝试

```
$("#parent").contents().filter(function(){
    return (this.nodeType == 3);
}).remove(); 
```

[http://jsfiddle.net/eUW47/1](http://jsfiddle.net/eUW47/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T03:39:32.667

不要使用 jQuery：

```
var div = document.getElementById("parent");
div.firstChild.data = "";​ 
```

见[http://jsfiddle.net/Q8Bzv/](http://jsfiddle.net/Q8Bzv/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T04:05:12.433

一个通用的“删除所有子文本节点”功能（对不起，没有 jQuery）：

```
function removeTextNodes(el) {
  var nodes = el.childNodes, i = nodes.length;
  while (i--)
    if (nodes[i].nodeType == 3) el.removeChild(nodes[i]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T03:42:39.847

尝试这个：

```
var $children = $("#parent").children();
$("#parent").html("").append($children);​ 
```

# javascript - change the image background of a button when it's clicked

> ID：12967030
> 
> 赞同：1
> 
> 时间：2012-10-19T03:38:22.877
> 
> 标签：javascript, html, css

I put an input button, and set its background with an image, now Ii want to change that image when the button is clicked.

Here is my relevant code:

```
<div id='back'>
    <input type="button"/>
</div> 
```

***CSS*** code:

```
#back input{
    width: 130px;
    height: 130px;
    background: url(img/back_default.png);
    border: hidden;
} 
```

Can it be done in CSS (as with links-`<a>` tags), or should I rely to JavaScript instead? Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T03:43:30.220

不需要Javascript：

```
#back input {
    width: 130px;
    height: 130px;
    background: url(img/back_default.png);
    border: hidden;
}

#back input:active {
    background-image: url(img/back_default-active.png);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:04:36.553

正如马特所说，您可以使用 CSS 的活动伪类来更改背景，或者您可以使用 javascript 将 eventHandler（onClick Listner）添加到更改图像的按钮。

**HTML**

```
<div id='back'>
     <input type="button" id="xyz" value="Go to back" class="button"/>
</div> 
```

**JS**

```
<script>

el = document.getElementById('xyz');
el.addEvenListener("click",changeImg,false);

function changeImg()
{
    el = document.getElementById('xyz');
    el.style.backround="url('img/back_default-active.png')";
}

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T03:52:23.107

这应该适用于 JavaScript：

```
function change() { 
    document.
        getElementById("back").
        getElementsByTagName("input").
        style.backgroundImage = "url(img/anotherImage.png)"
} 
```

通过单击按钮（或从您想要的任何地方）调用它：

```
<div id='back'>
    <input type="button" onclick="change()"/>
</div> 
```

# php - 如何在 jQuery 加载时传递 PHP 变量？

> ID：12967035
> 
> 赞同：2
> 
> 时间：2012-10-19T03:39:03.807
> 
> 标签：php, jquery

我有这样的代码：

```
<?php
$username = 'johndoe';
?>

<head>
<script>
...
$('a.manage-content-link').click(function (e) {
    var self = $(this),
        file = self.siblings('input[type="hidden.block-hidden-input"]').val();
    self.next(".manage-content-wrap").find(".manage-content").load("file-" + file + ".php");
    e.preventDefault();
});
...
</script>
</head>

<body>
...
<li><input type="hidden" value="001" class="block-hidden-input" />
    <a href="#" id="manage-1" class="manage-content-link">
        <img src="images/web-block/web-block1.jpg"/>
        <span class="orange-notice">Click to Edit Content</span>    
    </a>
</li>

<li><input type="hidden" value="002" class="block-hidden-input" />
    <a href="#" id="manage-2" class="manage-content-link">
        <img src="images/web-block/web-block2.jpg"/>
        <span class="orange-notice">Click to Edit Content</span> 
    </a>
</li>
...
</body> 
```

如您所见，每次用户单击“manage-content-link”类时，manage-1、manage-2、...甚至 manage-X（多个 li 标签）jQuery 都会加载“file-XXX.php ”。其中 XXX 实际上是 li 标签中隐藏输入的值。

但是“file-XXX.php”需要来自 PHP 标记的 $username 和 ID 本身，即“manage-X”。如何传递“file-XXX.php”所需的这2个变量，一个来自PHP，另一个来自ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:05:06.457

使用 jQuery`.ajax()`代替`.load()`：[http ://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

```
$('a.manage-content-link').click(function (e) {
    var self = $(this),
        file = self.siblings('input[type="hidden.block-hidden-input"]').val(),
        this_id = self.attr('id');

    $.ajax({
      url: "file-" + file + ".php",
      data: { username: "<?php echo $username;?>", id: this_id },
      context: this,
      success: function(data) {
        $(this).next(".manage-content-wrap").find(".manage-content").html(data);
      }
    });
    e.preventDefault();
}); 
```

如果您想将脚本保留在外部，则不能依赖 php 在脚本中回显 $username。因此，您可以通过几种方式添加用户名。您可以在页面中的某处进行隐藏输入，其值等于用户名；您可以将用户名作为`data-username`属性附加到元素（如正文）；或者你可以只在头文件中有一个纯粹定义用户名的脚本块。例如：

```
<input type="hidden" name="username" value="<?php echo $username;?>> 
```

或者：

```
<body data-username="<?php echo $username;?>"> 
```

或者：

```
<head>
    <script>
        var username = "<?php echo $username;?>";
    </script>
</head> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:58:27.033

在您的`<body>`您可以添加一个隐藏字段

```
<input type="hidden" value="<?=$username?>" id="username" /> 
```

在你的jQuery中，

```
$('a.manage-content-link').click(function (e) {
    var self = $(this),
    file = self.siblings('input[type="hidden.block-hidden-input"]').val();
    var username = $("username").val(); //use this variable where ever you want
    var ids = $(this).attr('id'); // this is the id
    self.next(".manage-content-wrap").find(".manage-content").load("file-" + file + ".php?id="+ids+"&username="+username);  //and in php file usee $_GET
    e.preventDefault();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T03:58:46.193

```
$('a.manage-content-link').click(function (e) {
    var self = $(this);
        file = self.prev('.block-hidden-input').val();
       self.next(".manage-content-wrap").find(".manage-content").load("file-" + file + ".php");
    e.preventDefault();
});​ 
```

我建议您将用户名存储在会话中并在 php 中使用该值，而不是从脚本中传递用户名，`$_SESSION['username']`否则将来会导致安全问题。

[演示](http://jsfiddle.net/Wm48e/)

# perl - Perl 奇怪的缓冲输出行为

> ID：12967040
> 
> 赞同：2
> 
> 时间：2012-10-19T03:39:31.210
> 
> 标签：perl, io

我最近一直在尝试自学 Perl 并且一直在做一些基本的练习。在其中一个中，您有一个硬编码的姓氏到名字的哈希值。用户输入姓氏，您输出名字——相对简单。代码如下：

```
#!/usr/bin/perl -w

use strict;
use warnings;

my %first_name = (
    Doe => 'John',
    Johnson => 'Bob',
    Pitt => 'Brad',
);

print "What is your last name?\n";
chomp (my $last_name = <STDIN>);
print "Your first name is $first_name{$last_name}.\n"; 
```

现在，奇怪的事情发生了。直到我在程序中输入一些内容（然后按 Enter），才会显示**“你的姓氏是什么？\n”**行，然后打印以下内容：

```
What is your last name?
Your first name is .
Use of uninitialized value within %first_name in concatenation (.) or string at     test.pl line 14, <STDIN> line 1. 
```

现在，我了解了缓冲输出的概念以及所有这些，并且，如果我`$| = 1`在程序的开头添加它，它就可以工作。但是，我的期望是，即使没有该行，即使`print`语句字符串可能不会立即打印，我的输入字符串仍将放置在`$last_name`变量中，但事实并非如此。所以，我对此有两个问题：

1.  为什么会这样？它是操作系统的东西（我在 Windows 上运行）吗？
2.  为什么添加 a`\n`不会刷新输出（正如各种消息来源所说的那样）？

**注意：**如果我用变量`%first_name`的简单打印替换访问散列的最后一行`$last_name`，那么即使输出仍然“延迟”，变量也具有正确的值。

**注意#2**：或者，如果打印姓氏后的代码被替换为这个，

```
if (exists $first_name{$last_name}){ 
   print "Your first name is $first_name{$last_name}.\n";
}

else{
    print "Last name is not in hash.\n";
} 
```

然后`$last_name`确实从 中分配了正确的值`<STDIN>`。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T04:09:04.513

您没有在程序中检查姓氏是否在哈希中，如果不是，那么您应该显示一些消息，例如“$lastname not found”。

顺便说一句，如果我输入正确的姓氏（存在于哈希中），您的程序在我这边运行良好。

所以你可以像这样编辑你的程序：

```
#!/usr/bin/perl

use strict;
use warnings;

my %first_name = (
    Doe => 'John',
    Johnson => 'Bob',
    Pitt => 'Brad',
);

print "What is your last name?\n";
chomp (my $last_name = <STDIN>);

# Check if the last_name exists in hash or not
if (exists $first_name{$last_name}){ 
   print "Your first name is $first_name{$last_name}.\n";
}

# If it doesn't then show a custom message
else{
    print "not found";
} 
```

也许你正在[遭受缓冲](http://perl.plover.com/FAQs/Buffering.html)。

# android - 如何将图像保存在 android 的外部存储库中

> ID：12967046
> 
> 赞同：7
> 
> 时间：2012-10-19T03:39:55.337
> 
> 标签：android, android-sdcard, android-image

我正在尝试将图像文件写入特定目录中的公共画廊文件夹，但我不断收到错误消息，因为它是一个目录，所以我无法打开该文件。

到目前为止我所拥有的是以下

```
//set the file path
    String path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES) + File.separator + directory;

    File outputFile = new File(path,"testing.png");

    outputFile.mkdirs();

    FileOutputStream out = new FileOutputStream(outputFile);
    bmp.compress(Bitmap.CompressFormat.PNG, 100, out); 
```

其中目录是应用程序名称。所以应用程序保存的所有照片都将进入该文件夹/目录，但我不断收到错误消息

```
/storage/sdcard0/Pictures/appname/testing.png: open failed: EISDIR (Is a directory) 
```

即使我不尝试将其放在目录中并将变量路径转换为 ​​File 之类的

```
File path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES); 
```

我没有收到错误，但是照片仍然没有出现在画廊中。

***Answer 问题是，当我最初运行此代码时，它创建了一个名为 testing.png 的目录，因为在目录中创建文件之前我未能创建目录。所以解决方案是先制作目录，然后用一个单独的文件写入它，就像这样

```
String path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES).toString() + File.separator + directory;

//directory is a static string variable defined in the class

            //make a file with the directory
    File outputDir = new File(path);

            //create dir if not there
    if (!outputDir.exists()) {
         outputDir.mkdir();

    }

            //make another file with the full path AND the image this time, resized is a static string
    File outputFile = new File(path+File.separator+resized);

    FileOutputStream out = new FileOutputStream(outputFile);
    bmp.compress(Bitmap.CompressFormat.PNG, 100, out); 
```

请注意，如果您犯了与我开始时相同的错误，您可能需要进入存储并手动删除目录

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T03:56:41.807

您正在尝试写入目录而不是文件。试试这个

```
String path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES) + File.separator + directory;   
File outputDir= new File(path);   
outputDir.mkdirs();   
File newFile = new File(path + File.separator + "test.png");
FileOutputStream out = new FileOutputStream(newFile);   
bmp.compress(Bitmap.CompressFormat.PNG, 100, out); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T03:59:15.957

您的代码是正确的，只需进行少量更改，如下所示，

```
String path = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES) + File.separator + directory;

    // First Create Directory
    File outputFile = new File(path);
    outputFile.mkdirs();

    // Now Create File
    outputFile = new File(path,"testing.png");
    FileOutputStream out = new FileOutputStream(outputFile);
    bmp.compress(Bitmap.CompressFormat.PNG, 100, out); 
```

另外不要忘记在您的 AndroidManifest.xml 文件中授予 WRITE_EXTERNAL_STORAGE 权限。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-19T19:20:13.507

如果您在使用 Android Emulator 时遇到此错误；您需要在模拟器上启用 SD 卡存储。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-02T18:22:32.413

```
public static String SaveImage(Bitmap finalBitmap) {

        String root = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES).toString();
        File myDir = new File(root + "/FolderName");
        if(!myDir.exists())
            myDir.mkdirs();
        Random generator = new Random();
        int n = 10000;
        n = generator.nextInt(n);
        String fname = "Image-"+ n +".png";
        File file = new File (myDir, fname);
        if (file.exists ()) file.delete ();
        try {
            FileOutputStream out = new FileOutputStream(file);
            finalBitmap.compress(Bitmap.CompressFormat.JPEG, 90, out);
            out.flush();
            out.close();

        } catch (Throwable e) {
            e.printStackTrace();
        }
        return file.getAbsolutePath();
    } 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-05-11T16:50:18.750

getExternalStoragePublicDirectory 现在已弃用，您应该使用

```
context.getExternalFilesDir(Environment.DIRECTORY_PICTURES) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T03:58:46.583

使用这种方式：

```
bitmap.compress(CompressFormat.JPEG, 100,  new FileOutputStream("/mnt/sdcard/" + new Date().getTime() + ".jpg"));` 
```

**`Path : Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_PICTURES) + File.separator + file name`**

# iphone - Objective-C 和 Ruby 中的数据编码

> ID：12967047
> 
> 赞同：0
> 
> 时间：2012-10-19T03:40:00.533
> 
> 标签：iphone, objective-c, ios, ruby, nsstring

我正在使用 Parse 开发 iOS 应用程序，我需要使用 Ruby 为我正在为其构建的网站和浏览器扩展来模拟他们的加密流程。

为了生成盐`AES`，他们在 iOS 应用程序中有以下代码：

```
NSString *str            =    user.email;
NSData *strData          =    [str dataUsingEncoding: NSUTF8StringEncoding];
NSData *encryptedData    =    [strData AESEncryptWithPassphrase:str]; // using the same key 
```

令我困惑的是 dataUsingEncoding: `NSUTF8StringEncoding`-- 它显然是用 UTF-8 编码字符串，但是当我在 NSLog 中看到它时，它似乎完全不同。因此，如果 str 是“randommail@gmail.com”，则`NSLog`在 strData 输出上执行：

<72616e64 6f6d656d 61696c40 676d6169 6c2e636f 6d>

现在，我如何在 Ruby 中获得相同的输出？因此，我无法获得正确的盐（“randomemail@gmail.com”.encode("UTF-8") 只是按预期返回电子邮件）。如何在 Ruby 中模拟 dataUsingEncoding 以获得相同的精确盐，有什么我遗漏的吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:46:54.217

试试这个：

```
"randomemail@gmail.com".encode("UTF-8").bytes.to_a.map{ |x| x.to_s(16)} 
```

你会“看到”你想要的。

使用 UTF-8 编码的“randommail@gmail.com”的十六进制表示是

```
<72616e64 6f6d656d 61696c40 676d6169 6c2e636f 6d> 
```

但是 ruby​​ 会向您显示字符串表示形式，即“randommail@gmail.com”。他们以不同的方式展示相同的东西。

[在这里](http://en.wikipedia.org/wiki/Character_encoding)查看更多信息。

# javascript - 路由/资产管道问题 - 未定义的 javascript 方法

> ID：12967049
> 
> 赞同：0
> 
> 时间：2012-10-19T03:40:13.373
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3, slideshow, asset-pipeline

我正在重新使用 Rails（已经有几年了），所以我很确定我只是错过了一些简单的东西。但这也可能是我对 JavaScript 在 Rails 中的工作方式缺乏了解。

我想我的观点（在haml中）设置正确。我已将 javascript 添加到我确定包含在布局中的文件中。（而且 css 看起来是正确的。）我只是没有让 javascript 函数（我在网上找到的幻灯片）连接到视图。我正在尝试使用`%body{ :onload => setUpslideShow() }`

这是我的看法：

```
%body{ :onload => setUpSlideShow() }

%script{type: 'text/javascript'}
  if ( ! window.CMFmainmenu ) { CMFmainmenu = {}; }
  var s                   = CMFmainmenu;
  s.user_id               = "#{@user.id.to_s}";
  s.partial_mainmenu_path = "/users/" + s.user_id + "/xx/mainmenu";
  s.add_new_senior        = "#{UsersController::ADD_NEW_SENIOR}"
  s.add_new_senior_path   = "#{new_seniors_settings_path(@locale,@user,@senior)}"

#mainmenu

... (edited out to save space) ...

 #slideshow.greenBorder
        #slides
          = image_tag '/assets/newlook/div_1_img.png', class: 'slide'
          %p
            Everyone loves photo albums.
            Get your user ready to brag, and
            populate and arrange albums by
            event, special people, year or any
            category you can imagine.
            =link_to "Learn how.", ''
          = image_tag '/assets/newlook/div_2_img.png', class: 'slide'
          %p
            If typing is difficult for your
            loved one, remove the frustration
            of a typed response. They can
            respond with a voice message, or
            with auto replies that you set up.
            =link_to "Learn how.", ''
          = image_tag '/assets/newlook/div_3_img.png', class: 'slide'
          %p
            Arms too short? You can specify
            the minimum font size used for
            your user's email.
            =link_to "Learn how.", ''
        #slides-controls
          1
          2
          3 
```

这是我的javascript：

```
if (! window.CMFuser) { CMFuser = {}; }

$(function() {

    var s = CMFuser;

... (edited out to save space) ...

       // slideshow

       slidePrefix            = "slide-";
       slideControlPrefix     = "slide-control-";
       slideHighlightClass    = "highlight";
       slidesContainerID      = "slides";
       slidesControlsID       = "slides-controls";

       setUpSlideShow =  function()
       {
... lots of code that doesn't get called so I'm leaving it out to save space ... 
```

这就是我认为布局中的相关行：`= javascript_include_tag "lib/modernizr-2.0.6.min", "lib/respond.min","application", "users"`其中“用户”是javascript文件。当我注释掉 时 `%body{ :onload => setUpslideShow() }`，javascript 文件出现在 html 源代码中。

错误的全文：

```
NoMethodError in Users#mainmenu

Showing /opt/cmf/app/views/users/mainmenu.html.haml where line #4 raised:

undefined method `setUpSlideShow' for #<#<Class:0x007fe054fa0a28>:0x007fe05594ae20>
Extracted source (around line #4):

2: - # users/mainmenu
3: 
4: %body{ :onload => setUpSlideShow() } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:09:48.547

的值不应该`:onload`是一个字符串吗？

```
%body{ :onload => 'setUpSlideShow()' } 
```

毕竟，您确实想生成这个 HTML，对吗？

```
<body onload="setUpSideShow()"> 
```

# java - 如何更改文本文件的分隔符？

> ID：12967050
> 
> 赞同：0
> 
> 时间：2012-10-19T03:40:22.217
> 
> 标签：java, delimiter

假设我有一个我想从中读取的*textfile.txt 。*这是文件中的文本：

```
23:years:old
15:years:young 
```

使用该`useDelimiter`方法，我如何告诉我的程序`:`和换行符是分隔符？将文本放在一行中并使用`useDelimter(":");`作品。问题是当我得到几行文本时。

```
Scanner input = new Scanner(new File("textfile.txt));
input.useDelimiter(:);

while(data.hasNextLine()) {
 int age = input.nextInt();
 String something = input.next();
 String somethingelse = input.next();
} 
```

使用此代码，我将收到 inputMisMatch 错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:11:06.893

尝试

```
scanner.useDelimiter("[:]+"); 
```

完整的代码是

```
Scanner scanner = new Scanner(new File("C:/temp/text.txt"));
scanner.useDelimiter("[:]+");
while (scanner.hasNext()) {
    System.out.println(scanner.next());
} 
```

输出是

```
23
years
old
15
years
young 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:22:44.653

使用此代码

```
 Scanner input;
        String tokenizer[]; 
        try {
            input = new Scanner(new File("D:\\textfile.txt"));
            input.useDelimiter("\\n");
                while(input.hasNextLine()) {
                    tokenizer = input.next().split(":"); 
                     System.out.println(tokenizer[0]+"   |"+tokenizer[1]+" | "+tokenizer[2]);

                    }

        }catch(Exception e){} 
```

它会给你像这样的输出

```
23 |years | old

15 |years | young 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T04:02:05.633

如果您只想一次将所有内容全部拆分，那么我想您可以使用

```
useDelimiter(":\\n") 
```

这应该在 : 和 newspace 上分开，但它不是处理数据的最有效方式，特别是如果每​​一行文本都以相同的格式设置并代表一个完整的条目。如果是这种情况，那么我的建议是只在新行上拆分，就像这样；

```
s.useDelimiter("\\n");
while(s.hasNext()){
    String[] result = s.next.split(":");
    //do whatever you need to with the data and store it somewhere
} 
```

这将允许您逐行处理数据，并将其拆分到所需的位置。但是，如果您确实打算逐行查看，我建议您查看 BufferedReader，因为它有一个 readLine() 函数，可以让事情变得更容易。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T04:02:07.647

您可能想要创建一个包含“：”和换行符的分隔符模式我没有测试它，但是 [\s|:]+ 是一个匹配一个或多个空白字符的正则表达式，还有“：”。试放：

```
input.useDelimiter("[\\s|:]+"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T04:04:19.953

只要所有行都具有所有三个字段，您就可以使用`input.useDelimiter(":\n");`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-19T03:51:11.920

你有两种方法可以做到这一点：

1.  连接字符串使其成为一行。
2.  首先分隔“换行符”，然后分隔“：”每个返回字符串标记。

# c# - 我想在一个文件中读取多个 excel 表而不在 C# 中使用 OLEDB

> ID：12967052
> 
> 赞同：0
> 
> 时间：2012-10-19T03:40:41.423
> 
> 标签：c#, excel, visual-studio-2008, import-from-excel

我从 C# Windows 窗体中读取 Excel 文档。Excel 工作簿中有 25 个工作表。我可以成功读取第一个工作表。但是当我将其更改为工作表 2 时，它根本无法工作。我没有使用OLEDB..

我想在每张纸上阅读 100 行.. 以下是我的代码...

```
`       dt.Columns.Add("Amount", typeof(double));
        dt.Columns.Add("ChequeNo", typeof(int));
        dt.Columns.Add("month", typeof(int));

        int AmountRow = 100;
        int ChequeNoRow = 101;
        int Column = 3;

        xlApp = new Excel.ApplicationClass();
        xlWorkBook = xlApp.Workbooks.Open(path, 0, true, 5, "", "", true, Microsoft.Office.Interop.Excel.XlPlatform.xlWindows, "\t", false, false, 0, true, 1, 0);
        xlWorkSheet = (Excel.Worksheet)xlWorkBook.Sheets[2];\\This place is the changing worksheets

        range = xlWorkSheet.UsedRange;

        double chequeAmount;
        double chequeNo;

        for (int i = Column; i < 15; i++)
        {
            chequeAmount = (double)(range.Cells[AmountRow, i] as Excel.Range).Value2;
            chequeNo = (double)(range.Cells[ChequeNoRow, i] as Excel.Range).Value2;

            if (chequeNo != 0.0)
            {
                dt.Rows.Add(Convert.ToDouble(chequeAmount), Convert.ToInt32(chequeNo), i);
            }
        }

        dataGridView1.DataSource = dt;
        xlWorkBook.Close(true, null, null);
        xlApp.Quit();

        releaseObject(xlWorkSheet);
        releaseObject(xlWorkBook);
        releaseObject(xlApp);` 
```

releaseObject 方法不在这里......那些工作完美......

```
 `xlWorkSheet = (Excel.Worksheet)xlWorkBook.Sheets[1];` 
```

这就是我更改工作表的方式.. 以下行给出了一个异常.. [Null point Exception]

`chequeAmount = (double)(range.Cells[AmountRow, i] as Excel.Range).Value2;`

希望你会知道答案..

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T04:24:52.700

试试这个：

`xlWorkSheet = (Excel.Worksheet)xlWorkBook.Worksheets[2];`

该`Sheets`属性可以包括非工作表，这可能是您的方案中的问题。

# javascript - JavaScript 数组数组：未定义的元素

> ID：12967053
> 
> 赞同：1
> 
> 时间：2012-10-19T03:40:45.887
> 
> 标签：javascript, arrays, multidimensional-array

我一直在用 javascript 开发一个画布应用程序，我需要在其中定义一个 9 单元格网格（3x3），并且在每个网格中都有一个画布元素。

问题是，我已经有一个名为 grid 的数组，其中包含表示每个单元格大小的数据。

```
var grid = new Array();

grid[0] = {x:[0, elemWidth], y:[0, elemHeight]};
grid[1] = {x:[elemWidth, elemWidth*2], y:[0, elemHeight]};
grid[2] = {x:[(elemWidth*2), sWidth], y:[0, elemHeight]};
grid[3] = {x:[0, elemWidth], y:[elemHeight+1,elemHeight*2]};
grid[4] = {x:[elemWidth, elemWidth*2], y:[elemHeight, elemHeight*2]};
grid[5] = {x:[(elemWidth*2), sWidth], y:[elemHeight, elemHeight*2]};
grid[6] = {x:[0, elemWidth], y:[(elemHeight*2), sHeight]};
grid[7] = {x:[elemWidth, elemWidth*2], y:[(elemHeight*2), sHeight]};
grid[8] = {x:[(elemWidth*2), sWidth], y:[(elemHeight*2), sHeight]}; 
```

这会在 Chrome Inspector 上产生以下输出：

![检查员输出](../Images/51e363b53a4f6494de464812f8417bb4.png)

据我所知，我应该能够使用以下代码获得 x 和 y 值

```
canvas[i].fillRect(grid[i].x[0], grid[i].y[0], grid[i].x[1], grid[i].y[1]);
canvas[i].strokeRect(grid[i].x[0], grid[i].y[0], grid[i].x[1], grid[i].y[1]); 
```

每个都应该给我相应的值。

我不明白为什么我可以在打开时一切正常`canvas[0]`（一切都在浏览器上呈现）但是当涉及到后续`canvas[i]`（i>0）时不会呈现并且我得到一个未定义的值，尽管 HTML 生成标签每个画布元素。

我在声明数组时做错了什么吗？

### 编辑

为了简单和可读性，对代码进行了一些更改：

```
function createCanvas() {

/* criar grelha aqui */

var sWidth = window.innerWidth; //- 50;
var sHeight = window.innerHeight; //- 50;

var elemWidth = sWidth / 3;
var elemHeight = sHeight / 3;

var grid = new Array();

var row1 = [0, elemHeight];
var row2 = [elemHeight, elemHeight*2];
var row3 = [elemHeight*2, sHeight];

var col1 = [0, elemWidth];
var col2 = [elemWidth, elemWidth*2];
var col3 = [elemWidth*2, sWidth];

grid[0] = [col1, row1];
grid[1] = [col2, row1];
grid[2] = [col3, row1];
grid[3] = [col1, row2];
grid[4] = [col2, row2];
grid[5] = [col3, row2];
grid[6] = [col1, row3];
grid[7] = [col2, row3];
grid[8] = [col3, row3];

for (var i = 0; i < grid.length; i++) {
    var c = document.getElementById('content');
    var newCanvas = document.createElement('canvas');
    newCanvas.setAttribute('id', 'canvas'+i);
    c.appendChild(newCanvas);
    canvas[i] = new Canvas('canvas'+i, 0, function() {});
        canvas[i].clear();
        canvas[i].setAutoResize(true);
        canvas[i].canvasElement.width = elemWidth - 2;
        canvas[i].canvasElement.height = elemHeight - 2;

        canvas[i].fillStyle('#000000');
        canvas[i].strokeStyle('#FFFFFF');

    canvas[i].fillRect(grid[i][0], grid[i][0], grid[i][2], grid[i][3]);
    canvas[i].strokeRect(grid[i][0], grid[i][0], grid[i][4], grid[i][5]); 
```

这段代码比之前的版本完整多了

与此同时，我设法让 3 个单元格进行渲染（虽然 3 个单元格，应该是 1x3 实际上是 2x1，因为不知何故渲染没有正确发生，我认为这可能是一个 CSS 问题）

### 编辑2

我再次对上面的代码进行了一些更改。以及网格阵列扩展视图的新屏幕截图。 ![网格阵列展开视图](../Images/b8f8529a69f920e92ecad48d9a54ffaf.png)

# matlab - 八度安装matlab包

> ID：12967054
> 
> 赞同：0
> 
> 时间：2012-10-19T03:40:48.507
> 
> 标签：matlab, octave

最近我选择在Ubuntu12.04中使用Octave而不是Matlab，因为它是开源的。我遇到的一个问题是，当我尝试安装一些额外的 matlab 软件包时，它总是失败。例如，我想安装 randomforest matlab 包（http://code.google.com/p/randomforest-matlab/），它需要运行命令“make”来编译 c++ 代码等。但首先它告诉我没有 mex 命令。为了解决这个问题，我修改了Makefile，将“mex”替换为“mkotfile --mex”，在第二次运行后，与包的源代码相关联的错误。这发生了多次，就像我无法在 Octave 中安装 libsvm 一样。有谁知道如何解决这个问题？或者我必须返回使用 Matlab。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:26:29.407

Octave 和 Matlab 的不同足以导致这样的情况。为 Matlab 开发的东西通常不能在 Octave 上按原样工作，尤其是外部包（即，不是由 Mathworks 开发的）。

你只需要坚持——重新编写代码的某些部分，在这里和那里安装额外的库等等，让它工作。

总是有可能的，但是否*实用*，由你决定。

# ios - 我应该如何存储一个大字符串，比如用户协议？

> ID：12967055
> 
> 赞同：1
> 
> 时间：2012-10-19T03:40:49.197
> 
> 标签：ios, memory-management, text, nsstring

我可以使用类似的字符串文字`@"content"`，但我认为这是浪费内存。是否有针对这种情况的自定义解决方案？

我是一个新的 Xcoder，所以这可能不是一个好问题，但我对使用`NSString`...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T06:05:27.177

将文本放入文件中。假设您将文件命名为`userAgreement.txt`. 确保文件是目标的一部分（在主编辑器中打开文件时检查文件检查器的目标成员部分）。

在运行时读取文件的内容，如下所示：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"userAgreement" ofType:@"txt"];
NSString *userAgreement = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:NULL]; 
```

这种方法的一个特点是您可以本地化文件，并且此代码将自动为用户的区域设置选择适当的版本。

请注意，如果您想要使用自定义最终用户许可协议 (EULA)，并且想要将此应用程序放入 App Store，则必须在 iTunes Connect 的应用程序配置中输入 EULA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T17:43:09.497

我并不是说其他​​答案是错误的，这可能是我自己会做的（从文件加载 EULA）。但我想澄清一下，无论您将其保存在文件中还是字符串文字中，只要您管理内存并以合理的方式创建对象图，它将使用相同数量的内存。

如果您担心内存使用情况，您仍然可以将其设为字符串文字；只需在其自己的“myEula”类中将其定义为属性，将字符串文字类放入您的 -init 方法中，如果您使用手动引用计数，请确保它被释放。

然后，当您需要向用户显示协议时，创建 myEula 类的新实例，访问适当的属性，然后释放它，或者删除引用并让它进行垃圾收集。

您还可以在用于显示 EULA 的视图控制器中定义它，您可能只会在内存中保留很短的时间。纯粹主义者会告诉你这违反了模型-视图-控制器，但如果文本是不可变的，我认为这没什么大不了的。

唯一会浪费内存的方法是将其定义为永久保留在内存中的对象中的字符串文字，例如您的应用程序委托，或者如果您一直将所有视图保留在内存中 - 但这会可能意味着你有比这个字符串文字更大的问题。

# iis - 经典 ASP + IIS 7 将文件写入网络驱动器

> ID：12967061
> 
> 赞同：2
> 
> 时间：2012-10-19T03:41:02.620
> 
> 标签：iis, asp-classic

我在 Windows 2008 IIS 7 上安装了 Classic ASP 2 网站。website1.com 和 website2.com。两者都从一个文件夹提供同一个网站：C:\Webs\website\

website1.com 已运营 6 年，在应用程序中可以将文件写入网络共享；\wdc\SharedFiles\assets\docs\ 设置了所有适当的权限，因为它多年来一直在读取和写入文件。

我最近添加了 website2.com。该网站从同一个目录中提供服务。我需要它能够写入同一个共享。问题是，website2.com 得到“写入文件失败”。和“权限被拒绝”错误。

这怎么可能？

我什至模拟了一个简单的测试。同样的错误。：

```
 Dim fso, objFile
  Set fso=Server.CreateObject("Scripting.FileSystemObject")
  Set objFile=fso.CreateTextFile("\\wdc\SharedFiles\assets\docs\test.txt")
  objFile.WriteLine("hello this is test")
  objFile.Close
  Set objFile=Nothing
  Set fso=Nothing 
```

有任何想法吗？我正在拔头发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T17:46:45.440

这是我自己想出来的。所以其他人可以受益，这里是：

1.  在 IIS 中转到网站 (website2.com) 节点，然后选择“身份验证”。
2.  确保启用“匿名身份验证”并将其设置为用户。
3.  然后使用资源管理器授予该用户对共享的读写访问权限。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-17T22:02:14.143

不确定这是否会有所作为。实际上，我的代码中唯一的区别是我使用 server.mapPath 来指定路径。

```
path = Server.MapPath ("\")
Set fso = CreateObject("Scripting.FileSystemObject")
Set f = fso.CreateTextFile(path & "\" & txtFileName, 2) '2 = for Writing
f.Write(txtFileContents)
f.close
set f=nothing 
```

# php - 如何实现像 Pinterest 这样的动态图像高度？

> ID：12967064
> 
> 赞同：0
> 
> 时间：2012-10-19T03:41:45.137
> 
> 标签：php, html, css, image, pinterest

我正在尝试获得类似于 Pinterst 的布局。到目前为止，我有在 php 中随机生成的图像，介于 125px 和 400px 之间。

这并没有产生类似 Pinterest 的效果，其中正确的纵横比似乎是动态的。有谁知道 Pinterest 如何动态生成图像的高度？

```
<div class="pin_image">

          <a href="<?php the_permalink(); ?>"><img width="191" height="auto" class="<?php echo $img_class; ?>" 
            src="<?php echo PricerrTheme_get_first_post_image(get_the_ID(),102,72); ?>" /></a>
            </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:49:36.147

它们将图像宽度基于列宽。例如，如果他们的列是 200px 宽，而原始图像是 600px 高和 400px 宽，他们会将图像缩放一半以使其适合列宽。所以 600px * 0.5 = 300px 高度和 400px * 0.5 = 200px 宽度。通过将两个维度乘以相同的百分比，您可以保持纵横比。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:49:54.177

你需要[同位素](http://isotope.metafizzy.co/index.html)或[砌体之类的东西](http://masonry.desandro.com/index.html)

它不会改变图像高度，但会以令人愉悦的方式重新排列布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T04:11:34.327

当您调整图像大小时，您需要根据图像的宽度来执行此操作。因为你想要的是一个固定的高度和一个流行的高度。例如，如果您有一个 1000 x 2000 的图像，如果您的列是 100 像素，则需要将其大小调整为 100 x 200。（即计算宽度的比率并将其应用于高度）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T14:50:12.207

您只需将标签上的宽度设置为列的宽度即可。图像的纵横比将保持不变，并相应地设置高度。

# jsf-2 - 使用 ConfigurableNavigationHandler 时如何将参数传递到下一页

> ID：12967065
> 
> 赞同：2
> 
> 时间：2012-10-19T03:42:01.253
> 
> 标签：jsf-2

使用时如何将参数传递到下一页`ConfigurableNavigationHandler`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:51:44.050

您可以通过将 includeViewParams=true 附加到结果来传递参数。

```
ConfigurableNavigationHandler configurableNavigationHandler =
         (ConfigurableNavigationHandler)FacesContext.
           getCurrentInstance().getApplication().getNavigationHandler();

     configurableNavigationHandler.performNavigation("success?faces-redirect=true&includeViewParams=true"); 
```

**更新**

如果要在重定向后发送对象。为此，您可以使用 Flash Scope。放置在 Flash 范围内的对象将可用于后续请求，然后被清除。换句话说，放置在 Flash 范围内的对象将在重定向后继续存在。

```
context = FacesContext.getCurrentInstance();
ConfigurableNavigationHandler configurableNavigationHandler =
     (ConfigurableNavigationHandler)context.getApplication().getNavigationHandler();

Flash flash = context.getExternalContext().getFlash(); 
flash.put("userBean", this);
configurableNavigationHandler.performNavigation("success?faces-redirect=true"); 
```

并在这样的结果上使用它：

```
<h4>#{flash['userBean'].username}</h4> 
```

也可以看看：

*   [http://mkblog.exadel.com/2010/07/learning-jsf2-using-flash-scope/](http://mkblog.exadel.com/2010/07/learning-jsf2-using-flash-scope/)

# java - 用Java计算曼哈顿距离

> ID：12967069
> 
> 赞同：0
> 
> 时间：2012-10-19T03:42:31.420
> 
> 标签：java, distance, proximity

我正在创建一个简单的程序来计算从文本文件中读取的坐标的邻近距离测量值，我想创建一个方法来计算给定点的曼哈顿距离，例如：

```
(0,1,1,0,1), (1,0,0,0,1), (0,0,0,1,1)
would result in:
      Item1 Item2 Item3
Item1  0    3     3
Item2  3    0     2
Item3  3    2     0 
```

曼哈顿方法：

```
public static void Manhattan(ArrayList<Points> x) {
        ArrayList<Integer> result = new ArrayList<Integer>();
        int distance = 0;
        for(int ii=0;ii<x.size();ii++) {
            for(int jj=0; jj<x.get(ii).coordinates.size();jj++) {
                 distance = Math.abs(x.get(ii).coordinates.get(jj)) + Math.abs(x.get(ii).coordinates.get(jj));
            }   
            result.add(distance);
        }
        for(int ii=0;ii<result.size();ii++) {
            for(int jj=0; jj<result.size();jj++) {
                System.out.print(result.get(ii));
            }
            System.out.print(" ");
        }

    } 
```

上课点：

```
import java.util.ArrayList;
public class Points {
    ArrayList<Integer> coordinates = new ArrayList<Integer>();
    public Points (ArrayList<Integer> coordinates) {
        this.coordinates = coordinates;
    }
    public ArrayList<Integer> getCoordinates() {
        return coordinates;
    }
    public void setCoordinates(ArrayList<Integer> coordinates) {
        this.coordinates = coordinates;
    }
} 
```

问题是我在运行该方法时得到了奇怪的结果，有人知道是什么问题吗？

```
result: 222222222222222 222222222222222 222222222222222 222222222222222 222222222222222 222222222222222 222222222222222 222222222222222 222222222222222 222222222222222 222222222222222 222222222222222 222222222222222 222222222222222 222222222222222 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:51:09.803

A`Integer`不能代表坐标。您可以创建类似的东西 -

```
public class Coordinate {
    private int x;
    private int y;

    //...getter/setter/constructor ...
} 
```

可以代表一个坐标。

而不是（仅整数列表）

```
ArrayList<Integer> coordinates = new ArrayList<Integer>(); 
```

使用（坐标列表）

```
List<Coordinate> coordinates = new ArrayList<Coordinate>(); 
```

现在，如果您按照@Hovercraft 的建议（对于）定义一个方法，那么`Coordinate`计算所有点到所有其他点（包括其自身）之间的距离将非常容易

```
for(int i=0; i<coordinates.size(); i++) {
    for(int i=0; i<coordinates.size(); i++) {
        System.out.println(manhattnDist(coordinates.get(i), coordinates.get(j)));
    }
} 
```

* * *

代码中的一个明显问题

```
 int distance = 0;
    for(int ii=0;ii<x.size();ii++) {
        for(int jj=0; jj<x.get(ii).coordinates.size();jj++) {
             //you keep assigning new values 
             distance = Math.abs(x.get(ii).coordinates.get(jj)) + Math.abs(x.get(ii).coordinates.get(jj));
        }   
        //and then you add
        result.add(distance);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:50:12.120

您正在计算 2 点之间的距离，但没有将结果保存在任何地方：

```
for(int jj=0; jj<x.get(ii).coordinates.size();jj++) {
    distance = Math.abs(x.get(ii).coordinates.get(jj)) +
               Math.abs(x.get(ii).coordinates.get(jj));
    //what happens with distance?
}
//you get only the last distance between the last points.
result.add(distance); 
```

还有一件事，你的`distance`变量是一个整数，它会尝试保存`double`值，对吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T03:50:21.983

我认为你需要重构一些东西来简化。首先，创建一个简单的 manhattanDist 方法，该方法接受两个 Point 对象并返回一个 int：

```
public int manhattanDist(Point p1, Point p2) {
  // calc the manhattan distance and return it
} 
```

然后，您可以轻松地在比较您的方法时使用此方法，`ArrayList<Point>`而无需像上面所做的那样混淆 for 循环中的内容。

此外，请学习和使用 Java 命名约定，包括：

*   方法名称应以小写字母开头
*   类名应以大写字母开头。
*   标识符名称应该是合乎逻辑的，应该是有意义的，并且应该使您的代码自我注释。

仅当您希望其他人（例如您的讲师或***我们***）更轻松、更快速地理解您的代码时，这一点才重要。

# c++ - 属性通知更改了 C++/CX 绑定中的等效项

> ID：12967071
> 
> 赞同：0
> 
> 时间：2012-10-19T03:42:43.337
> 
> 标签：c++, winapi, visual-c++, data-binding, c++-cx

在 C# 中，我经常创建返回函数调用结果的属性 getter。这意味着我需要使用 OnPropertyChanged 手动触发属性更改通知。这个过程对于 C# 和 VB 都有很好的记录，但我似乎找不到 C++/CX 等价物。这样的事情是否存在，还是我必须找到一种新的编程模式？

这是一个显示我的问题的基本示例：

```
public:
    property int FooSquared {
        int get() { return _calculateFooSquared(); }
    }

private:
    int _foo;

    int _calculateFooSquared() {
        return _foo * _foo;
    }

    void _setNewFoo(int newFoo) {
        // When _foo gets updated here, anyone bound to FooSquared
        // needs to be updated. How do I trigger an update?
        _foo = newFoo;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T04:55:18.920

与在 c# 中执行的方式相同，实现 INotifyPropertyChanged。[带有示例的 MSDN 文章](http://msdn.microsoft.com/en-us/magazine/jj651573.aspx)

# c# - 如何将用户输入的文本放入变量中并组合多个变量以创建 url

> ID：12967081
> 
> 赞同：0
> 
> 时间：2012-10-19T03:43:53.980
> 
> 标签：c#, visual-studio-2010

我有一个非常简单的应用程序。假设我有三个字段`make`，`model`并且`year`用户输入文本。

如何将这三个用户输入组合到一个变量中，当用户按下`submit`它时，它会创建类似这样的东西。

```
'http://ford/make/1996/' 
```

然后转到该链接。我不希望它打开一个窗口，只需转到该链接即可。本质上，我要做的是在用户填写表格并按下提交后通过 url 将数据发送到我的网站。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T03:49:08.783

假设您有 3 个文本框，文本框 1、文本框 2 和文本框 3。您可以通过以下方式组合它们：

```
var result = textbox1.Text + textbox2.Text + textbox3.Text; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T03:58:57.220

看看 UriBuilder：http: [//msdn.microsoft.com/en-us/library/wdwhd34a.aspx](http://msdn.microsoft.com/en-us/library/wdwhd34a.aspx)

示例（有多种使用方法）：

```
UriBuilder myUri = new UriBuilder("http","www.contoso.com"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T03:51:41.390

在您的提交按钮单击处理程序上，试试这个。不要忘记在此之前进行一些验证。

```
Response.Redirect(string.Format("http://{0}/{1}/{2}", txtMake.Text, txtModel.Text, txtYear.Text)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T03:49:25.413

在提交按钮上运行一个 javascript，它结合来自文本框的值并导航到 url（如果这是一个网站）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T03:54:11.653

看看 Uri 类。例如：

```
Uri output = new Uri("http://" + "ford");
output = new Uri(output, "/" + "focus");
output = new Uri(output, "/" + "1995"); 
```

# r - rgl plot：保存为后记时点大小不会改变

> ID：12967082
> 
> 赞同：5
> 
> 时间：2012-10-19T03:44:02.187
> 
> 标签：r, rgl

我正在尝试使用 rgl 生成 3d 散点图。它在我的屏幕上看起来很棒，但每当我将它导出为 PDF（或任何其他 postscript 格式）时，它都会完全忽略我使用的任何尺寸规格。

（我在 Mountain Lion 下的 Macbook 上运行 RGui v.2.15.1 和 rgl v.0.92.892。）

例如：

```
library(rgl) 
set.seed(1982) 
points3d(runif(5),runif(5),runif(5), size=20)
# points look huge
rgl.postscript('testplot.pdf', fmt='pdf')
# points look tiny 
```

有没有人想办法让它发挥作用？我使用的图像的分辨率`rgl.snapshot`看起来不太好，我真的很想得到这个图的矢量图像。

另外，我关注了[这个线程](https://stackoverflow.com/questions/9214298/cannot-change-text-size-in-rgl-plot)，我得到了可以调整大小的文本，但不是点。所以我认为解决这个问题的一种方法是使用圆圈作为我的角色将我的点绘制为文本，但我无法让 rgl 接受符号或表达式......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T13:45:46.167

在 Windows 上确认，看起来像一些纸张尺寸缩放问题。你可以试试

```
spheres3d(runif(5),runif(5),runif(5),radius=0.1) 
```

如果您可以使用真正的 3d，则可以作为一种解决方法。

# ruby-on-rails-3 - 可以推送到 Heroku 但不能运行迁移

> ID：12967083
> 
> 赞同：1
> 
> 时间：2012-10-19T03:44:21.160
> 
> 标签：ruby-on-rails-3, heroku, rake, dbmigrate

我可以使用 ... 将 Rails 应用程序推送到 Heroku， `git push heroku` 但是当我尝试使用 ... 迁移时， `heroku run rake db:migrate` 我得到 ...

`Running rake db:migrate attached to terminal... failed ! You do not have access to the app my-app-name-1234.`

编辑：我的 .git/config 包含... `[remote "heroku"] url = git@heroku.com:young-mist-1198.git fetch = +refs/heads/*:refs/remotes/heroku/*`

有任何想法吗？Heroku 方面的事情看起来很合理，而且如果我的 ssh 密钥不好，它甚至不会让我推动。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T03:53:40.440

好的，我想通了，以防它帮助别人...... `heroku auth:login`

不知何故，我没有被授权，只需要重新登录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:51:43.887

试试这个

```
heroku run bash --app appname
heroku run rake db:migrate 
```

# angularjs - angularjs 与 Leafletjs

> ID：12967084
> 
> 赞同：8
> 
> 时间：2012-10-19T03:44:25.260
> 
> 标签：angularjs, leaflet

以下directie代码来自[http://jsfiddle.net/M6RPn/26/](http://jsfiddle.net/M6RPn/26/) 我想获得一个有很多经纬度的json提要。我可以很容易地在Angular中获得一个带有$resource或$http的json但是我该怎么做将其提供给该指令以在地图上映射事物？

```
module.directive('sap', function() {
    return {
        restrict: 'E',
        replace: true,
        template: '<div></div>',
        link: function(scope, element, attrs) {
            var map = L.map(attrs.id, {
                center: [40, -86],
                zoom: 10
            });
            //create a CloudMade tile layer and add it to the map
            L.tileLayer('http://{s}.tile.cloudmade.com/57cbb6ca8cac418dbb1a402586df4528/997/256/{z}/{x}/{y}.png', {
                maxZoom: 18
            }).addTo(map);

            //add markers dynamically
            var points = [{lat: 40, lng: -86},{lat: 40.1, lng: -86.2}];
            for (var p in points) {
                L.marker([points[p].lat, points[p].lng]).addTo(map);
            }
        }
    };
}); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-19T04:04:01.767

我不太了解 Leaflet 或您想要做什么，但我假设您想将一些坐标从您的控制器传递给您的指令？

实际上有很多方法可以做到这一点......其中最好的方法涉及利用范围。

这是将数据从控制器传递到指令的一种方法：

```
module.directive('sap', function() {
    return {
        restrict: 'E',
        replace: true,
        template: '<div></div>',
        link: function(scope, element, attrs) {
            var map = L.map(attrs.id, {
                center: [40, -86],
                zoom: 10
            });
            //create a CloudMade tile layer and add it to the map
            L.tileLayer('http://{s}.tile.cloudmade.com/57cbb6ca8cac418dbb1a402586df4528/997/256/{z}/{x}/{y}.png', {
                maxZoom: 18
            }).addTo(map);

            //add markers dynamically
            var points = [{lat: 40, lng: -86},{lat: 40.1, lng: -86.2}];
            updatePoints(points);

            function updatePoints(pts) {
               for (var p in pts) {
                  L.marker([pts[p].lat, pts[p].lng]).addTo(map);
               }
            }

            //add a watch on the scope to update your points.
            // whatever scope property that is passed into
            // the poinsource="" attribute will now update the points
            scope.$watch(attr.pointsource, function(value) {
               updatePoints(value);
            });
        }
    };
}); 
```

这是标记。在这里，您要添加链接函数正在寻找的 pointsource 属性来设置 $watch。

```
<div ng-app="leafletMap">
    <div ng-controller="MapCtrl">
        <sap id="map" pointsource="pointsFromController"></sap>
    </div>
</div> 
```

然后在您的控制器中，您有一个可以更新的属性。

```
function MapCtrl($scope, $http) {
   //here's the property you can just update.
   $scope.pointsFromController = [{lat: 40, lng: -86},{lat: 40.1, lng: -86.2}];

   //here's some contrived controller method to demo updating the property.
   $scope.getPointsFromSomewhere = function() {
     $http.get('/Get/Points/From/Somewhere').success(function(somepoints) {
         $scope.pointsFromController = somepoints;
     });
   }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-14T06:42:59.170

我最近使用[Angular JS](https://stackoverflow.com/questions/tagged/angularjs)和[Leaflet](https://stackoverflow.com/questions/tagged/leaflet)构建了一个应用程序。与您所描述的非常相似，包括来自 JSON 文件的位置数据。我的解决方案类似于[blesh](https://stackoverflow.com/users/135786/blesh)。

这是基本过程。

我的`<map>`一个页面上有一个元素。然后我有一个指令来用`<map>`传单地图替换元素。我的设置略有不同，因为我在工厂中加载了 JSON 数据，但我已经针对您的用例进行了调整（如果有错误，请致歉）。在指令中，加载您的 JSON 文件，然后遍历您的每个位置（您需要以兼容的方式设置您的 JSON 文件）。然后在每个纬度/经度处显示一个标记。

# HTML

```
<map id="map" style="width:100%; height:100%; position:absolute;"></map> 
```

# 指示

```
app.directive('map', function() {
return {
    restrict: 'E',
    replace: true,
    template: '<div></div>',
    link: function(scope, element, attrs) {

        var popup = L.popup();
        var southWest = new L.LatLng(40.60092,-74.173508);
        var northEast = new L.LatLng(40.874843,-73.825035);            
        var bounds = new L.LatLngBounds(southWest, northEast);
        L.Icon.Default.imagePath = './img';

        var map = L.map('map', {
            center: new L.LatLng(40.73547,-73.987856),
            zoom: 12,
            maxBounds: bounds,
            maxZoom: 18,
            minZoom: 12
        });

        // create the tile layer with correct attribution
        var tilesURL='http://tile.stamen.com/terrain/{z}/{x}/{y}.png';
        var tilesAttrib='Map tiles by <a href="http://stamen.com">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>. Data by <a href="http://openstreetmap.org">OpenStreetMap</a>, under <a href="http://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>.';
        var tiles = new L.TileLayer(tilesURL, {
            attribution: tilesAttrib, 
            opacity: 0.7,
            detectRetina: true,
            unloadInvisibleTiles: true,
            updateWhenIdle: true,
            reuseTiles: true
        });
        tiles.addTo(map);

        // Read in the Location/Events file 
        $http.get('locations.json').success(function(data) {
            // Loop through the 'locations' and place markers on the map
            angular.forEach(data.locations, function(location, key){

                var marker = L.marker([location.latitude, location.longitude]).addTo(map);

            });
        });
    }
}; 
```

# 示例 JSON 文件

```
{"locations": [     
{   
    "latitude":40.740234, 
    "longitude":-73.995715
    }, 
{   
    "latitude":40.74277, 
    "longitude":-73.986654
    },
{   
    "latitude":40.724592, 
    "longitude":-73.999679
    }
]} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-27T21:37:07.473

angularJs 中的指令和 mvc 是不同的技术。指令通常在页面加载时执行。指令更多地用于处理/使用 html 和 xml。一旦你有了 JSON，那么最好使用 mvc 框架来完成工作。

页面呈现后，要应用指令，您通常需要执行 $scope.$apply() 或 $compile 来注册页面上的更改。

无论哪种方式，将服务放入指令的最佳方法是使用依赖注入框架。

我注意到您的指令中缺少 scope:true 或 scope:{}。这对指令与父控制器的配合有很大影响。

```
app.directive('mapThingy',['mapSvc',function(mapSvc){
  //directive code here.

}]);

app.service('mapSvc',['$http',function($http){
 //svc work here.
}]) 
```

指令通过驼峰式匹配应用。我会避免使用或因为 IE 的问题。替代方案是

```
<div map-thingy=""></div> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-05-30T04:37:07.737

假设在你的控制器中你得到了

```
$scope.points = // here goes your retrieved data from json 
```

你的指令模板是：

```
<sap id="nice-map" points="points"/> 
```

然后在您的指令定义中，您可以使用“=”符号在指令范围和父范围之间设置双向绑定

```
module.directive('sap', function() {
return {
    restrict: 'E',
    replace: true,
    scope:{
      points:"=points"
    },
    link: function(scope, element, attrs) {
        var map = L.map(attrs.id, {
            center: [40, -86],
            zoom: 10
        });
        L.tileLayer('http://{s}.tile.cloudmade.com/57cbb6ca8cac418dbb1a402586df4528/997/256/{z}/{x}/{y}.png', {
            maxZoom: 18
        }).addTo(map);

        for (var p in points) {
            L.marker([p.lat, p.lng]).addTo(map);
        }
    }
};
}); 
```

此外，建议不要将标记直接添加到地图中，而是先将标记添加到 L.featureGroup，然后再将该 L.featureGroup 添加到地图，因为它有一个 clearLayers() 方法，这样可以在以下情况下为您省去一些麻烦更新你的标记。

```
grupo = L.featureGroup();
grupo.addTo(map);

for (var p in points) {
    L.marker([p.lat, p.lng]).addTo(grupo);
}

// remove all markers
grupo.clearLayers(); 
```

我希望这会有所帮助，干杯

# ios - 如何显示它包含在 iOS 框架中的图像？

> ID：12967085
> 
> 赞同：0
> 
> 时间：2012-10-19T03:44:24.877
> 
> 标签：ios, uiimageview

我发现一些图像包含在 iOS 框架中，如何在我的程序中使用这个图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:49:33.143

[您可以使用https://github.com/0xced/UIKit-Artwork-Extractor](https://github.com/0xced/UIKit-Artwork-Extractor)提取图像。

但是请注意，如果您在应用程序中使用他们的图像，Apple 可能不喜欢它。例如，禁止在自定义视图/控件上使用 GameCenter 图标。

如果图像只是 UIKit 的一部分，我想这不会是一个大问题。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-12T08:52:39.750

不 。这是不可能的和合法的

由于我们不能使用第三方和默认框架图像，这是基于 AppStore 中的法律问题。所以最好使用控件和视图。不要更改默认框架图像。

# mysql - 创建 sql 查询以获取每个 unit_id 的单个 LATEST 值

> ID：12967086
> 
> 赞同：0
> 
> 时间：2012-10-19T03:44:25.510
> 
> 标签：mysql

我正在做这个项目，我需要做的一件事是选择一些数据

桌子：

```
id | unit_id | data1 | data2 | data 3 | data4 | TimeStamp

1 | 1 | 1 | 1 | 1 | 2012-10-18 18:17:42

2 | 1 | 2 | 2 | 2 | 2012-10-18 18:18:42

3 | 1 | 3 | 5 | 3 | 2012-10-20 18:19:42 

4 | 1 | 4 | 7 | 4 | 2012-10-21 18:20:42 

5 | 1 | 5 | 8 | 8 | 2012-10-22 18:21:42 

6 | 2 | 1 | 1 | 1 | 2012-10-18 18:17:42 

7 | 2 | 2 | 2 | 4 | 2012-10-19 18:18:42 

8 | 2 | 3 | 2 | 5 | 2012-10-20 18:19:42 

9 | 2 | 4 | 3 | 6 | 2012-10-21 18:20:42 
```

我需要的是得到`Single LATEST value for EACH unit_id`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:52:34.490

以下查询将按 unit_id 对记录进行分组，并标识具有最新时间戳的记录，将这些结果与同一张表连接起来，并选择具有 unit_id 和时间戳值的记录。

```
SELECT 
    a.* 
FROM 
    MyTable a
    JOIN (SELECT 
              unit_id, 
              MAX(TimeStamp) 'TimeStamp' 
          FROM 
              MyTable 
          GROUP BY unit_id
         ) as b
    ON a.unit_id = b.unit_id AND a.Timestamp = b.TimeStamp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T03:55:11.300

通过使用 GROUP BY 子句，例如

```
SELECT 
    unit_id, max(TimeStamp)
FROM 
    table3
GROUP BY 
    unit_id 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T03:57:13.617

试试这个

```
SELECT unit_id , max(tstamp) 
FROM   t 
GROUP BY unit_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T04:00:07.220

```
SELECT max(timestamp),unit_id FROM table GROUP BY unit_id 
```

# ruby-on-rails - 运行克隆的 ruby 项目时出错

> ID：12967088
> 
> 赞同：0
> 
> 时间：2012-10-19T03:44:39.017
> 
> 标签：ruby-on-rails

我从 bitbucket 和源代码树中克隆了一个 ruby​​ on rails 项目。当我尝试使用 rails 服务器运行项目时，出现以下错误

```
rails server
=> Booting WEBrick
=> Rails 3.0.10 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/railties- 3.0.10/lib/rails/application/configuration.rb:88:in `read': No such file or directory -      /Users/xyz/newderbywire/config/database.yml (Errno::ENOENT)
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/application/configuration.rb:88:in `database_configuration'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.10/lib/active_record/railtie.rb:58:in `block (2 levels) in <class:Railtie>'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.10/lib/active_support/lazy_load_hooks.rb:36:in `instance_eval'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.10/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.10/lib/active_support/lazy_load_hooks.rb:26:in `on_load'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/activerecord-3.0.10/lib/active_record/railtie.rb:57:in `block in <class:Railtie>'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/initializable.rb:25:in `instance_exec'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/initializable.rb:25:in `run'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/initializable.rb:50:in `block in run_initializers'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/initializable.rb:49:in `each'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/initializable.rb:49:in `run_initializers'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/application.rb:134:in `initialize!'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/application.rb:77:in `method_missing'
from /Users/xyz/newderbywire/config/environment.rb:5:in `<top (required)>'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.10/lib/active_support/dependencies.rb:239:in `require'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.10/lib/active_support/dependencies.rb:239:in `block in require'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.10/lib/active_support/dependencies.rb:225:in `block in load_dependency'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.10/lib/active_support/dependencies.rb:593:in `new_constants_in'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.10/lib/active_support/dependencies.rb:225:in `load_dependency'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.0.10/lib/active_support/dependencies.rb:239:in `require'
from /Users/xyz/newderbywire/config.ru:3:in `block in <main>'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.2.5/lib/rack/builder.rb:46:in `instance_eval'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.2.5/lib/rack/builder.rb:46:in `initialize'
from /Users/xyz/newderbywire/config.ru:1:in `new'
from /Users/xyz/newderbywire/config.ru:1:in `<main>'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.2.5/lib/rack/builder.rb:35:in `eval'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.2.5/lib/rack/builder.rb:35:in `parse_file'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.2.5/lib/rack/server.rb:162:in `app'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.2.5/lib/rack/server.rb:253:in `wrapped_app'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.2.5/lib/rack/server.rb:204:in `start'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/commands/server.rb:65:in `start'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/commands.rb:30:in `block in <top (required)>'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/commands.rb:27:in `tap'
from /Users/xyz/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.0.10/lib/rails/commands.rb:27:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

谁能告诉我可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:04:53.883

与大多数 Web 应用程序一样，Ruby on Rails 应用程序通常由数据库支持。您在文件中指定如何连接到数据库`<project directory>/config/database.yml`。由于此配置通常特定于特定机器，因此许多项目不会在其公共源代码树中包含该文件。

在这种情况下，您需要自己创建文件并填写详细信息。有关不同数据库服务器的示例 database.yml 文件，请参见[https://gist.github.com/961978](https://gist.github.com/961978)。

# php - 传递变量参数列表

> ID：12967089
> 
> 赞同：2
> 
> 时间：2012-10-19T03:44:56.180
> 
> 标签：php

考虑到冗余，有没有更好的方法来做到这一点？如果是这样，它会是什么样子？

注意第一个`$method`参数，它在类中作为函数名`$api`传递，不能作为参数传递给 API 函数。此后的每一个论点都可能不存在。

```
function jsonRequest( $method )
{
    $api = new JsonRpcClient( 'https://api.example.com' );
    switch ( func_num_args() ) {
        case 2:
            $result = $api->$method( 'AccountRef', 'APIKey', func_get_arg( 1 ) );
        break; case 3:
            $result = $api->$method( 'AccountRef', 'APIKey', func_get_arg( 1 ), func_get_arg( 2 ) );
        break; case 4:
            $result = $api->$method( 'AccountRef', 'APIKey', func_get_arg( 1 ), func_get_arg( 2 ), func_get_arg( 3 ) );
        break; case 5:
            $result = $api->$method( 'AccountRef', 'APIKey', func_get_arg( 1 ), func_get_arg( 2 ), func_get_arg( 3 ), func_get_arg( 4 ) );
        break;
    }
    return json_decode( $result );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:47:47.490

你应该使用`call_user_func_array`：

```
$data = array_merge(array('AccountRef', 'APIKey'), func_get_args());

call_user_func_array(array($api, $method), $data); 
```

来源： http: [//php.net/manual/en/function.call-user-func-array.php](http://php.net/manual/en/function.call-user-func-array.php)

# c - 包装机操作故障

> ID：12967098
> 
> 赞同：0
> 
> 时间：2012-10-19T03:46:13.933
> 
> 标签：c

我很难理解如何让包装器与这些加密程序一起工作。我得到了一个凯撒密码程序来加密和解密，现在我正在研究一个 Vigenere 密码。我的程序可以运行，但是当我使用会导致字母环绕的键时，我会得到奇怪的结果。这是我正在使用的代码：

```
int main(int argc, char *argv[])
{
    char s2[25];
    strcpy(s2, argv[1]);
    printf("Please enter a string of text to be encrypted!\n");
    string p = GetString();
    for (int i = 0, n = strlen(p); i < n; i++)
    {
        if (isupper(p[i])){

        char c = (p[i] - 'A' + s2[i]);
        printf("%c", c);
        }
    }
    printf("\n");

} 
```

如果命令行输入是`./program BACON`并且我为要加密的文本输入 BLAH，则此代码将起作用。例如，如果我`./program ZZZZZ`用作键，那么我会得到各种奇怪的结果，因为它不会回绕。我已经尝试使用模数运算符并将其从我刚刚发布的代码中删除，因为我仍然无法使用它来包装它。我刚开始学习编程。

## 更新

也许您可以帮助我更好地理解数学；您的代码运行良好，但我一直试图在计算器上手动解决这个问题，只是为了看看发生了什么。这是我到目前为止所拥有的：

```
./program HHHHH 
```

在我的理解中，keyLen 应该等于 5，所以如果我给 p[i] 一个值“H”

```
keyLen= 5
p[i]= H   //or 72 in ASCII 
int sum = (p[i] - 'A') + (s2[i % keyLen] - 'A'); //sum = (72 - '65') + ([72 % 5] - '65');
char c = 'A' + sum%26; // c = 65 + -11 
```

也许我的数学很差，因为当我按顺序做事时，我认为它们应该完成 sum = 负 63 和 -63 的 26 mod，这给了我负 11。这显然是不正确的，因为当你添加时等于 54 65 和负 11。

即使我将负 11 设为 11 的正整数并加上 65，我也会得到 76，即 ASCII 字符“L”，但正确答案是“O”。我显然做错了什么，但我一直在研究解决方案一段时间，并不断得出相同的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T03:56:45.907

您的程序中有两个“环绕”问题：

*   当键和当前字母组合产生超过 26 的值时，您的字母不会环绕，并且
*   当被加密的单词的长度超过密钥的长度时，您会读到密钥的末尾。

以下是您修复它的方法：在将密钥复制到 之后`s2`，立即执行以下操作：

```
int keyLen = strlen(s2); 
```

现在在你的循环中这样做：

```
int sum = (p[i] - 'A') + (s2[i % keyLen] - 'A'); // Calculate the sum of key+word
char c = 'A' + sum%26; // Wrap around at 26, the number of letters in the alphabet 
```

这将使输出看起来“正常”。

一旦你弄清楚最后一个公式是如何工作的，你应该能够修改它来解码这个词。

# mysql - MYSQL如何将数据从一列复制到另一列

> ID：12967101
> 
> 赞同：0
> 
> 时间：2012-10-19T03:47:15.103
> 
> 标签：mysql

是否有一个 mysql 命令可以更改表，以便我的列（所有者）可以具有与主键（id）相同的值？

这基本上是我想要的：

```
id  |  title  |  body  |  owner | 
----------------------------------
1                          1
2                          2   
3                          3
4                          4 
```

我希望这是自动的，这样我就不必找到“id”值，然后使用 php 将该值插入到所有者列中。我打算使用“所有者”列作为外键。

注意： id 列是主键，并且具有自动增量。

感谢大家 （：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T03:53:35.880

两种解决方案：

1.  手动执行
2.  创建触发器

对于手动解决方案：

```
update tbl set owner = id; 
```

对于触发解决方案：

```
 delimiter $$
 create trigger trgr after insert on tbl 
 for each row begin
     update tbl
     set owner = id
 end;
 $$
 delimiter ; 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:34:45.783

最简单的方法是：

```
UPDATE test1 SET project = id 
```

就这么简单。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T03:51:20.640

```
UPDATE table_name SET owner=id 
```

插入新行后，我认为这就足够了

# python - Python 3 获取 HTML 内容

> ID：12967104
> 
> 赞同：0
> 
> 时间：2012-10-19T03:47:21.670
> 
> 标签：python, lxml

我正在使用此代码来获取网站的 html 内容，

```
import urllib.request
import lxml.html as lh
req= urllib.request.Request("http://www.ip-adress.com/ip_tracer/157.123.22.11", 
headers={'User-Agent' : "Magic Browser"})
html = urllib.request.urlopen(req).read()
doc = lh.fromstring(html)
print (''.join(doc.xpath('.//*[@class="odd"]')[-1].text_content().split())) 
```

我想获得组织：Zenith Data Systems。但它显示了一些错误

```
Traceback (most recent call last):
File "/usr/local/python3.2.3/lib/python3.2/urllib/request.py", line 1135, in do_open
h.request(req.get_method(), req.selector, req.data, headers)
File "/usr/local/python3.2.3/lib/python3.2/http/client.py", line 967, in request
self._send_request(method, url, body, headers)
File "/usr/local/python3.2.3/lib/python3.2/http/client.py", line 1005, in _send_request
self.endheaders(body)
File "/usr/local/python3.2.3/lib/python3.2/http/client.py", line 963, in endheaders
self._send_output(message_body)
File "/usr/local/python3.2.3/lib/python3.2/http/client.py", line 808, in _send_output
self.send(msg)
File "/usr/local/python3.2.3/lib/python3.2/http/client.py", line 746, in send
self.connect()
File "/usr/local/python3.2.3/lib/python3.2/http/client.py", line 724, in connect
self.timeout, self.source_address)
File "/usr/local/python3.2.3/lib/python3.2/socket.py", line 404, in create_connection
raise err
File "/usr/local/python3.2.3/lib/python3.2/socket.py", line 395, in create_connection
sock.connect(sa)
socket.error: [Errno 111] Connection refused 
```

在处理上述异常的过程中，又出现了一个异常：

```
Traceback (most recent call last):
File "ext.py", line 4, in <module>
html = urllib.request.urlopen(req).read()
File "/usr/local/python3.2.3/lib/python3.2/urllib/request.py", line 138, in urlopen
return opener.open(url, data, timeout)
File "/usr/local/python3.2.3/lib/python3.2/urllib/request.py", line 369, in open
response = self._open(req, data)
File "/usr/local/python3.2.3/lib/python3.2/urllib/request.py", line 387, in _open
'_open', req)
File "/usr/local/python3.2.3/lib/python3.2/urllib/request.py", line 347, in _call_chain
result = func(*args)
File "/usr/local/python3.2.3/lib/python3.2/urllib/request.py", line 1155, in http_open
return self.do_open(http.client.HTTPConnection, req)
File "/usr/local/python3.2.3/lib/python3.2/urllib/request.py", line 1138, in do_open
raise URLError(err)
urllib.error.URLError: <urlopen error [Errno 111] Connection refused>} 
```

如何解决它。谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:46:07.073

基本上，拒绝连接意味着只有注册用户才能访问该页面，或者服务器处于大量维护或类似原因。

从您上面的代码中，如果您想处理错误，您可以尝试使用 try 和除了下面的代码：

```
try:
    req= urllib.request.Request("http://www.ip-adress.com/ip_tracer/157.123.22.11",headers={'User-Agent' : "Magic Browser"})
    html = urllib.request.urlopen(req).read()
    doc = lh.fromstring(html)
    print (''.join(doc.xpath('.//*[@class="odd"]')[-1].text_content().split()))
except urllib.error.URLError as e:
    print(e.reason) 
```

# python - 从 Python 管理与 redis 的连接

> ID：12967107
> 
> 赞同：48
> 
> 时间：2012-10-19T03:47:47.097
> 
> 标签：python, connection, redis

我`redis-py`在我的 python 应用程序中使用在 Redis 数据库中存储简单变量或变量列表，所以我认为每次需要保存或检索变量时创建与 redis 服务器的连接会更好，因为这不是经常做，我不想有一个超时的永久连接。

在阅读了一些基础教程后，我使用 Redis 类创建了连接，但还没有找到关闭连接的方法，因为这是我第一次使用 Redis。我不确定我是否使用了管理连接的最佳方法，所以我想对此提出一些建议。这就是我现在`set`ting 或`get`ting 变量的方式：

```
import redis

def getVariable(variable_name):
    my_server = redis.Redis("10.0.0.1")
    response = my_server.get(variable_name)
    return response

def setVariable(variable_name, variable_value):
    my_server = redis.Redis("10.0.0.1")
    my_server.set(variable_name, variable_value) 
```

我基本上使用此代码来存储上次连接时间或获取平均每秒对我的应用程序完成的请求等。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-10-19T11:41:17.160

Python 使用引用计数器机制来处理对象，因此在块结束时，my_server 对象将被自动销毁并关闭连接。您不需要明确关闭它。

现在这不是您应该管理 Redis 连接的方式。每次操作的连接/断开连接成本太高，因此保持连接打开要好得多。使用 redis-py 可以通过声明连接池来完成：

```
import redis

POOL = redis.ConnectionPool(host='10.0.0.1', port=6379, db=0)

def getVariable(variable_name):
    my_server = redis.Redis(connection_pool=POOL)
    response = my_server.get(variable_name)
    return response

def setVariable(variable_name, variable_value):
    my_server = redis.Redis(connection_pool=POOL)
    my_server.set(variable_name, variable_value) 
```

请注意，连接池管理大部分是自动的，并且在 redis-py 中完成。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-19T13:28:39.693

@sg1990 如果您有 10.000 个用户同时需要 redis，该怎么办？他们不能共享一个连接，而你刚刚给自己制造了一个瓶颈。

使用连接池，您可以创建任意数量的连接并简单地使用`get_connection()`and `release()`，来自[redis-py docs](https://redis-py.readthedocs.org/en/latest/#redis.ConnectionPool)。

每个用户的连接是一个巨大的矫枉过正，因为每个连接都需要维护一个打开的套接字。这样，您将自动将您的机器可以处理的并发 websocket 用户数量减少一半。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-13T20:58:36.930

你可以使用它在redis中创建两个数据库：

```
 r1  = redis.StrictRedis(host="localhost", port=6379, db=0, decode_responses=True)
    r2  = redis.StrictRedis(host="localhost", port=6379, db=1, decode_responses=True) 
```

# android - 在 Android 中调试随机重启

> ID：12967125
> 
> 赞同：6
> 
> 时间：2012-10-19T03:50:15.620
> 
> 标签：android

所以我试图调试为什么我的手机随机重启（并希望它不是我的应用程序）。我注意到的唯一模式是，偶尔尝试解锁时，手机会关机，我必须按住电源按钮才能重新打开。

我相信这在我编写应用程序小部件时开始发生，但不能确定。

adb bugreport 没有显示任何有趣的东西，无论如何也没有内核恐慌

```
------ LAST KMSG (/proc/last_kmsg) ------
*** /proc/last_kmsg: No such file or directory

------ LAST PANIC CONSOLE (/data/dontpanic/apanic_console) ------
*** /data/dontpanic/apanic_console: No such file or directory

------ LAST PANIC THREADS (/data/dontpanic/apanic_threads) ------
*** /data/dontpanic/apanic_threads: No such file or directory 
```

Logcat 在重新启动后不会持续存在，所以我写了一个小服务，现在正在为我将它写入磁盘（我们会看看我是否在那里找到任何东西）

以前有没有其他人处理过这个问题？您如何正常调试此类问题？

我的手机是运行 4.1.2 的 gsm galaxy nexus，但我也在 4.1.1 上注意到它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:22:08.543

试试这个... 设置 'acra' - Android 崩溃通知器 [1]。它是开源的，可在 github [2] 如果您的应用程序崩溃并导致 android 崩溃，来自 acra 的日志可以帮助调试情况。

[1] - [http://acra.ch/](http://acra.ch/)

[2] - [https://github.com/ACRA/acra](https://github.com/ACRA/acra)

# objective-c - 如何使用 MKMapView 完成加载委托，可能的“完成显示”委托？

> ID：12967128
> 
> 赞同：12
> 
> 时间：2012-10-19T03:51:07.297
> 
> 标签：objective-c, ios, mapkit

当用户在选择注释时点击保存时，我正在尝试保存地图视图的缩略图。当用户尚未放大该注释时会出现此问题，因此尚未加载关闭缩放级别。

这是用户点击保存后我正在做的事情：

1.  将布尔“保存”设置为 true
2.  居中并放大注释（无动画）
3.  当调用 mapViewDidFinishLoadingMap 委托方法时，如果保存为真：
4.  从视图中创建一个 UIImage 并保存它。关闭模态视图。

但是，当图像被保存并且视图被关闭时，保存的结果图像实际上还没有完成加载，因为我仍然看到一个带有网格线的未加载地图，如下所示：

![未完成的网格线](../Images/99384bffabdc34263d1b3b21e11fb3aa.png)

我的问题是，在保存此缩略图之前，如何确保地图已完成加载并完成显示？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-17T00:51:28.767

更新：iOS7 有一个[新的委托](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapViewDidFinishRenderingMap:fullyRendered:)可能已经解决了这个问题。我还没有确认一种或另一种方式。

```
- (void)mapViewDidFinishRenderingMap:(MKMapView *)mapView fullyRendered:(BOOL)fullyRendered 
```

前 iOS6 支持：

`mapViewDidFinishLoadingMap`:[貌似不靠谱](https://stackoverflow.com/questions/11728189/detecting-when-mapview-tiles-are-displayed)。我注意到有时根本不调用它，尤其是在地图切片已经缓存的情况下，有时它会被多次调用。

我注意到，当它被多次调用时，最后一次调用将正确呈现。所以我认为如果你在用户点击保存后设置一个 2 秒的计时器，你可以让它工作。禁用交互以便不会发生其他任何事情，并在计时器结束时启用用户交互。

如果`mapViewDidFinishLoadingMap`将来被调用，则再次将计时器重置 2 秒。当计时器最终关闭时，获取地图的快照，它应该是正确的。

您还需要考虑其他回调，例如`mapViewDidFailLoadingMap`. 还要在嘈杂的连接上进行测试，因为如果需要很长时间来获取瓷砖，2 秒可能不够长。

```
- (void)restartTimer
{
    [self.finishLoadingTimer invalidate];
    self.finishLoadingTimer = [NSTimer scheduledTimerWithTimeInterval:2.0
                                                               target:self
                                                             selector:@selector(mapLoadingIsFinished)
                                                             userInfo:nil
                                                              repeats:NO];
}

- (void)userClickedSave
{
    assert(self.saving == NO);
    if (self.saving == NO) {
        self.saving = YES;
        assert(self.finishLoadingTimer == nil);
        self.view.userInteractionEnabled = NO;
        [self restartTimer];
    }
}

- (void)mapLoadingIsFinished
{
    self.finishLoadingTimer = nil;
    [self doSnapshotSequence];
    self.saving = NO;
    self.view.userInteractionEnabled = YES;
}

- (void)mapViewDidFinishLoadingMap:(MKMapView *)mapView
{
    if (self.saving) {
        [self restartTimer];
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-12-13T11:19:58.017

如果为 iOS7 开发，最好使用的委托是：mapViewDidFinishRenderingMap:fullyRendered:

[mapViewDidFinishRenderingMap:fullyRendered](https://developer.apple.com/library/ios/documentation/MapKit/Reference/MKMapViewDelegate_Protocol/MKMapViewDelegate/MKMapViewDelegate.html#//apple_ref/occ/intfm/MKMapViewDelegate/mapViewDidFinishRenderingMap:fullyRendered:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T15:02:25.727

您确定要截屏的区域是否支持您正在应用的缩放级别。例如，在美国缩放级别支持较高，您可以放大到最大细节，而在亚洲可能不支持较高的缩放级别。

# asp.net-mvc-4 - SimpleRoleProvider 自定义“UserID”外键约束，可能吗？

> ID：12967132
> 
> 赞同：3
> 
> 时间：2012-10-19T03:51:31.653
> 
> 标签：asp.net-mvc-4

我正在关注[这篇博](http://blog.longle.net/2012/09/25/seeding-users-and-roles-with-mvc4-simplemembershipprovider-simpleroleprovider-ef5-codefirst-and-custom-user-properties/)文，以了解最新版本的 asp.net MVC 中的新 SimpleMemberProvider 和 SimpleRoleProvider 功能。

我没有调用“UserId”，而是将其命名为“Id”。然后，然而，当我在 web.config 中启用“SimpleRoleProvider”时，我得到了类似“外键'fk_UserId'引用无效表'MemberProfile'”的错误。默认情况下，它似乎正在寻找 UserId 列来创建外键约束。

是否可以使用其他东西而不是“UserId”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T15:11:29.777

我相信它的名字来自它的初始化寻找过滤器

```
 WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

# python - 如何使它成为列表理解

> ID：12967138
> 
> 赞同：2
> 
> 时间：2012-10-19T03:52:53.773
> 
> 标签：python, list-comprehension

我如何将其写为列表理解？

```
for i in range(len(genes)):
    if compareGenes(genes[i], target) > count:
        best = genes[i]
        count = compareGenes(genes[i], target) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T03:55:04.457

`max`使用生成器理解将是一个不错的方法。

```
count, best = max((compareGenes(k, target), k) for k in genes) 
```

或者，使用`key`参数来`max`：

```
best = max(genes, key=lambda k: compareGenes(k, target)) 
```

# latex - 如何创建多行表

> ID：12967141
> 
> 赞同：0
> 
> 时间：2012-10-19T03:53:27.397
> 
> 标签：latex

我正在尝试在 LaTeX 中制作一个多行表，它看起来像这篇[Wikipedia article](http://en.wikipedia.org/wiki/Precision_and_recall#Definition_.28classification_context.29)中显示的真阳性、真阴性等表格。

我正在尝试使用`multirow`，但我不确定如何让 y 帽子在桌子“外面”。

```
\begin{table}[tbh!]
\centering
    \begin{tabular}{|l|l|l|} 
    \multicolumn{3}{c}{$y$} \\ \hline
    %\multirow{3}{*}{$\hat{y}$} \\ 
    & \textbf{T} & \textbf{F} \\ \hline
    \textbf{T} & TP  & FP \\ \hline     
    \textbf{F} & FN & TN \\ \hline
\end{tabular}
\caption{Truth and prediction comparison.}
\label{tab:revpol}
\end{table} 
```

谁能解释我需要在这里改变什么来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:41:52.700

将“表外”组件作为`tabular`结构的一部分包含在内是最简单的：

![在此处输入图像描述](../Images/299252815cc7c3a0c37eb225996b39a7.png)

```
\documentclass{article}
\usepackage{multirow}% http://ctan.org/pkg/multirow
\begin{document}
\begin{table}[t]
  \centering
  \begin{tabular}{l|l|l|l|} 
    \multicolumn{2}{c}{}  & \multicolumn{2}{c}{$y$} \\ \cline{3-4}
    \multicolumn{2}{c|}{} & \textbf{T} & \textbf{F} \\ \cline{2-4}
    \multirow{2}{*}{$\hat{y}$} & \textbf{T} & TP  & FP \\ \cline{2-4}    
    & \textbf{F} & FN & TN \\ \cline{2-4}
  \end{tabular}
  \caption{Truth and prediction comparison.}
  \label{tab:revpol}
\end{table}
\end{document} 
```

`\cline`s 旨在`\hline`仅将 a 放在某些列中。`\multicolumn`用于隐藏使用`tabular`列规范插入的一些垂直线。

在旁注中，考虑[`booktabs`](http://ctan.org/pkg/booktabs)作为一种`tabular`表示替代方案。

# ruby - 在 ruby 中使用 typhoeus 和 Hydra 运行 parallelHttp 请求

> ID：12967148
> 
> 赞同：1
> 
> 时间：2012-10-19T03:53:44.973
> 
> 标签：ruby, typhoeus, hydra

我正在浏览[http://typhoeus.github.com/articles/getting_started.html#making_parallel_requests](http://typhoeus.github.com/articles/getting_started.html#making_parallel_requests) ，我实际上无法理解 Hydra 的 typhoeus 如何实现并行 HTTP 请求。是否类似于 EventMachine::Iterator 和 EvenMachine::HTTPRequest 处理并发请求？我打算浏览它的源代码，但如果有人已经知道后端发生了什么，请赐教。这将有助于我更好地了解 Typhoeus。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:40:29.923

Typhoeus 是一个 libcurl 包装器，它本身不执行并行请求。但是它为 libcurls multi 提供了一个接口：[http](http://curl.haxx.se/libcurl/c/libcurl-multi.html) ://curl.haxx.se/libcurl/c/libcurl-multi.html ，它负责处理并行请求。这使它与 Eventmachine 不同，因为 libcurl 完成了繁重的工作，因此您不必担心您的 ruby​​ 代码。

更准确地说，Typhoeus（从 0.5.0.alpha 开始）使用 Ethon：[https](https://github.com/typhoeus/ethon) ://github.com/typhoeus/ethon而不是自己处理 libcurl。如果您想了解 Ethon 如何与 libcurls multi 一起工作，这是一个很好的起点：[https](https://github.com/typhoeus/ethon/blob/master/lib/ethon/multi.rb) ://github.com/typhoeus/ethon/blob/master/lib/ethon/multi.rb 。

如果你想知道到底发生了什么，你应该看看 libcurl 本身。

# callback - Metro 应用程序中网络状态更改的回调是什么？

> ID：12967149
> 
> 赞同：1
> 
> 时间：2012-10-19T03:53:45.207
> 
> 标签：callback, windows-8

我想获得由 Metro 应用程序上的网络状态更改触发的回调。这样的回调可用吗？如果没有，有什么好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:00:39.927

您可以使用 NetworkStatusChanged 事件：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
    Windows.Networking.Connectivity.NetworkInformation.NetworkStatusChanged += NetworkInformation_NetworkStatusChanged;
}

void NetworkInformation_NetworkStatusChanged(object sender)
{
    Debug.WriteLine("Network Status Changed");
} 
```

# java - 用wordnet进行相似度测量？

> ID：12967153
> 
> 赞同：0
> 
> 时间：2012-10-19T03:54:07.813
> 
> 标签：java, wordnet

我正在使用 wordnet 来计算两个单词之间的相似度。我正在使用`edu.mit.jwi_2.1.4.jar`，`edu.sussex.nlp.jws.beta.11.jar`但是当我通过 resnik 测量计算“苹果”和“香蕉”这两个词时，它是 8,4。为什么大于1？

```
 public class test {
    String dir = "C:/Program Files (x86)/WordNet";
    JWS ws = new JWS(dir,"2.1");
    /**
     * @param args
     */
     public void testResnikSimilarity() {    
        Resnik jcn = ws.getResnik();
         System.out.println("Resnik");
         // all senses
         TreeMap scores1 = jcn.res("apple", "banana", "n"); // all senses
         //TreeMap scores1 = jcn.jcn("apple", 1, "banana", "n");
         // fixed;all
         //TreeMap scores1 = jcn.jcn("apple", "banana", 2, "n");
         // all;fixed
         for(String s : scores1.keySet())
         System.out.println(s + "\t" + scores1.get(s));
         // specific senses
         System.out.println("\nspecific pair\t=\t" + jcn.res("apple", 1, "banana",
         1, "n") + "\n");
         // max.
         System.out.println("\nhighest score\t=\t" + jcn.max("apple", "banana",
         "n") + "\n\n\n");
         }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:01:54.263

引用[NLTK 文档](http://nltk.googlecode.com/svn/trunk/doc/howto/wordnet.html/)：

> Resnik Similarity：返回一个分数，表示两个词义的相似程度，基于 Least Common Subsumer（最具体的祖先节点）的信息内容 (IC)。请注意，对于使用信息内容的任何相似性度量，结果取决于用于生成信息内容的语料库以及信息内容创建方式的细节。

我不知道如何在 JWS 中设置信息内容。在 NLTK 中，您可以使用来自 Brown Corpus 和 BNC 的数据执行以下操作：

```
ic = wordnet_ic.ic('ic-brown.dat')
banana.res_similarity(apple, ic=ic)
>>> 8.1703339116227411
ic = wordnet_ic.ic('ic-bnc.dat')
banana.res_similarity(apple, ic=ic)
>>> 7.9753635531935334 
```

有关详细信息，另请参阅[本文](http://www.jimdavies.org/summaries/resnik1995.html)。

# knockout.js - 带有复选框初始化的淘汰赛 foreach 片状，适用于模板

> ID：12967163
> 
> 赞同：2
> 
> 时间：2012-10-19T03:55:19.220
> 
> 标签：knockout.js

已经发布了很多关于在 Knockout 的 foreach 循环中使用复选框的问题，但我还没有看到为什么初始化检查绑定在某些情况下有效而不是其他情况的答案。

使用这个简单的视图模型：

```
viewModel = function (obj) {
    this.AllPossibleThings = ko.observableArray(
    [
        { ID: "1", Value: 'Thing1' }, 
        { ID: "2", Value: 'Thing2' }, 
        { ID: "3", Value: 'Thing3' }, 
        { ID: "4", Value: 'Thing4' }
    ]);
    this.selectedThings = ko.observableArray(["2","3"]);
};
$(ko.applyBindings(new viewModel())); 
```

将这些放在 foreach 模板中可以按您的预期工作。它显示了 4 个复选框，其中 2 和 3 已预先选中：

```
<table>
    <tbody data-bind="template: { name: 'ThingTmpl', foreach: AllPossibleThings }">
    </tbody>
</table>
<script id="ThingTmpl" type="text/html">
        <tr>
            <td><input type="checkbox" 
                      data-bind="attr: {value: ID}, checked: $root.selectedThings" /></td>
            <td><span data-bind="text: Value"></span></td>
        </tr>
</script> 
```

在没有模板的情况下做应该做的事情是不一样的：

```
<table>
    <tbody data-bind="foreach: AllPossibleThings">
        <tr>
            <td><input type="checkbox" 
                      data-bind="checked: $root.selectedThings, 
                                 attr: {value: ID}" /></td>
            <td><span data-bind="text: Value"></span></td>
        </tr>
    </tbody>
</table> 
```

非模板显示 4 个复选框，但没有预先选中。但是，当您单击第一个复选框时，然后选中 2 和 3。就像它在创建“selectedThings”数组之前被绑定并且从未观察到更改。

小提琴演示两者：http: [//jsfiddle.net/jturnage/j763w/](http://jsfiddle.net/jturnage/j763w/)

任何人都知道为什么模板 foreach 在这里工作，但常规的 foreach 绑定却没有？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:28:23.650

问题在于绑定和浏览器的顺序。

据我了解，[您迭代对象的属性名称的顺序没有明确定义](https://stackoverflow.com/questions/280713/elements-order-in-a-for-in-loop)，不能依赖。它可能会或可能不会按照您声明它们的顺序进行迭代。Knockout 在内部将此绑定转换为对象并迭代对象的属性。在这种情况下，它恰好是它被声明的顺序。

您对模板中复选框的绑定如下：

```
data-bind="attr: {value: ID}, checked: $root.selectedThings" 
```

虽然不在您的模板中的绑定是这样的：

```
data-bind="checked: $root.selectedThings, attr: {value: ID}" 
```

绑定对您不起作用的原因是`attr`尚未应用绑定。所以复选框没有将它们的值设置为相应的`ID`. 当`checked`绑定更新时，它正在搜索`selectedThings`不存在的值。如果您更改绑定的顺序，您会看到它会起作用，因此`attr`首先应用。

* * *

处理此 IMO 的更好和更安全的方法是测试自己是否应该检查它，而不是依赖于这种不稳定的行为。添加一个测试是否选择了特定项目的函数。那么这些绑定被触发的顺序就无关紧要了。

```
viewModel = function (obj) {
    // ...

    this.isSelected = function (thing) {
        return this.selectedThings.indexOf(thing.ID) !== -1;
    };
}; 
```

```
<td><input type="checkbox" 
           data-bind="checked: $root.isSelected($data), attr: {value: ID}" />
</td> 
```

当然，如果要保持`selectedThings`同步，则必须进行调整。你可以通过巧妙地使用计算的 observable 来实现这一点。

```
this.isSelected = function (thing) {
    return ko.computed({
        read: function () {
            return this.selectedThings.indexOf(thing.ID) !== -1;
        },
        write: function (newValue) {
            var index = this.selectedThings.indexOf(thing.ID);
            if (newValue) {
                // checked
                if (index === -1)
                    this.selectedThings.push(thing.ID);
            } else {
                // unchecked
                if (index !== -1)
                    this.selectedThings.remove(thing.ID);
            }
        }
    }, this);
}; 
```

[更新的小提琴](http://jsfiddle.net/jeff1203/j763w/8/)

# javascript - socket.io：如何从对象动态调用我的套接字方法？

> ID：12967164
> 
> 赞同：1
> 
> 时间：2012-10-19T03:55:27.770
> 
> 标签：javascript, node.js, sockets, socket.io

我有这个：

```
io.sockets.on('connection', function(socket) {
    socket.on("action1", function(data){
        socket.emit("action1", data);
    });
    socket.on("action2", function(data){
        socket.emit("action2", data);
    });
    socket.on("action3", function(data){
        socket.emit("action3", data);
    });
}); 
```

我要这个：

```
var socketMethods = {
    action1:function(data, socket){
        socket.emit("action1", data);
    },
    action2:function(data, socket){
        socket.emit("action2", data);
    },
    action3:function(data, socket){
        socket.emit("action3", data);
    }
}

io.sockets.on('connection', function(socket) {
    for(key in socketMethods){
        socket.on(key, socketMethods[key]);
    }
}); 
```

但是，我无法将套接字传递给方法，最终得到

```
C:\__server\nodejs.js:217
    socket.emit('action1', {msg:"No account"}
               ^
TypeError: Cannot call method 'emit' of undefined 
```

我尝试通过函数传递套接字：

```
io.sockets.on('connection', function(socket) {
    for(key in socketMethods){
        socket.on(key, function(data, socket){
            socketMethods[key](data, socket);
        });
    }
}); 
```

套接字不会传递给函数。

如何动态调用方法，并且仍然能够在方法中使用套接字？

更新：

使用此确切代码：

```
io.sockets.on('connection', function(socket) {
    for(key in socketMethods){
        socket.on(key, function(data){
            socketMethods[key](data, socket);
        });
    }
}); 
```

我发现了一些非常有趣的东西。

它确实有效，我可以从该方法运行 socket.emits！

但是，现在，它只运行 LAST 方法。在这种情况下，无论请求什么，都会调用 action3。如果您要求操作 1 或操作 2，仍会调用操作 3。

更新：

运行 console.log(socket._events)，我看到函数 error:[function]、action1:[function]、action2:[function]、action3:[function] 已附加。当我尝试查看每个函数中的内容时，我得到的只是。

```
function ack() {
      self.packet({
          type: 'ack'
        , args: io.util.toArray(arguments)
        , ackId: packet.id
      });
    } 
```

不管我发回给自己的功能是什么。我还设置了 action2，作为对象中的最后一件事，而 action2 就是所谓的。然而。当我以正常方式附加 socket.on 方法时，它们在 socket._events 中看起来完全一样。

我有一个理论，所有方法都被“最后一个”动作（action3）覆盖。

睡不着

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:12:11.483

我犯的一个大错误是我试图在假设循环数据将始终存在的情况下发送函数。相反，我收到了关键数据的参考。

我将不得不做更多的研究，但相反，我们需要创建一个函数

多亏了ebohlman，因为这篇文章而想出来了

[socket.io 使用 for 循环添加 socket.on 方法](https://stackoverflow.com/questions/12969220/socket-io-using-a-for-loop-to-add-socket-on-methods)

```
function makeOn(key) {
  return function(data) {
    dummy.socketMethods[key].call(socket, data);
  }
}

for(key in dummy.socketMethods){
  socket.on(key, makeOn(key));
} 
```

# database - 在 ebean 中生成短 id 之前将实体保存到数据库

> ID：12967167
> 
> 赞同：2
> 
> 时间：2012-10-19T03:55:47.373
> 
> 标签：database, ebean, id-generation

我想在保存到数据库之前获取实体的 ID。如果我有 EbeanEntity：

```
@Id private UUID id; 
```

并打电话

```
Ebean.nextId(EbeanEntity.class); 
```

返回值非常复杂（ce9d8486-2128-4a66-bef4-4158b6de2c7e）。我需要短值，例如当我使用 Long 或 String 作为 Id(1、2、3... 等) 时。Ebean.nextId javadoc 说“这仅在 IdGenerator 位于此 bean 类型（例如 DB 序列或 UUID）上时才有效。”。如果我使用 Long 或 String 作为 id，Ebean.nextId 返回 null。那么我如何使用“数据库序列”或其他方式在将项目保存到数据库之前获取项目的短 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-10T09:07:51.590

你就是**不能**。
在取回 ID 之前，您必须将 bean 保存到数据库中。
像这样的东西

```
Ebean.save(Object); 
int id = object.id; 
```

# sql - SQL份额计算

> ID：12967173
> 
> 赞同：1
> 
> 时间：2012-10-19T03:56:12.650
> 
> 标签：sql, relational-database, relational-algebra

我有一个具有以下架构的数据库：

```
fund(fundID, fundName,totalShares) 
price(fundID,priceDate,price) 
trans(sin,fundID,transDate,shares) 
customer(sin,name,address,phone)
rep(repid,repName) 
customerRep(sin,repId) 
```

我的任务是在每天交易后找到持有特定基金（“能源”）股份的独特客户。我不完全确定反式代表什么，即购买或购买的股票。我正在寻找提示而不是答案，如果可以，请使用示例代码，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:01:53.663

试试这个

```
SELECT c.sin, c.name
FROM customer c 
INNER JOIN trans t ON t.sin = c.sin 
WHERE t.funcID = XXXX 
AND t.transDate = '2012-10-19' 
```

如果你想要文本匹配，即“能量”

```
SELECT c.sin, c.name
FROM customer c 
INNER JOIN trans t ON t.sin = c.sin 
INNER JOIN fund f ON f.fundID = t.fundID
WHERE f.fundName = 'Energy' 
AND t.transDate = '2012-10-19' 
```

编辑：

从您的回复中，交易表 (trans) 可以包含同一基金 ID 的同一日期的大量记录，这些记录将是该基金的买入/卖出。

在这种情况下，您将需要对这些求和。子查询可以做到这一点。我相信以下内容可以为您提供 sin、fundID、transDate 和 remaining_shares 的唯一编号。通过这种方式，您可以修剪所有交易并仅保留积极的交易，然后您可以与您的客户一起加入。

```
SELECT t.sin, t.fundID, t.transDate, SUM(t.shares) AS remaining_shares 
FROM trans t 
WHERE SUM(shares) > 0 
GROUP BY t.sin, t.fundID 
```

高温高压

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:02:11.997

交易可以是很多东西。购买、销售、公司活动、应计收入、承担、起飞。

看起来您需要先查看表格`trans`。

我认为这不是了解事务（除非您在谈论数据库）是什么的正确站点，但是可以帮助编程方面

# c++ - 包含对其自身实例的引用的标准向量的模板类

> ID：12967174
> 
> 赞同：1
> 
> 时间：2012-10-19T03:56:36.363
> 
> 标签：c++, templates, recursion

我对 C++ 比较陌生，第一次尝试构建复杂的模板结构。

作为模板类 Foo 的成员，我如何声明一个 Foo* 元素的 std::vector，但这可能是各种类型的？

```
#include <vector>

template <typename T>
class Foo {
    T mValue;
    std::vector< Foo<T>* > mFooParameters;  // <---- I would like this vector to contain
                                            //       any sort of Foo<T>* elements,
                                            //       Foo<int>*, Foo<double>*, etc.
}; 
```

是直截了当、可能但复杂还是不可能？

谢谢您的回答！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:07:58.487

如果您的向量类型都是相关的，请使用@jogojapan 提供的链接中解释的多态性，如果类型根本不相关，请使用向量`void*`来保存指向您的数据的指针（虽然有点混乱）

# powershell - Azure Powershell Cmdlet 和证书到期

> ID：12967177
> 
> 赞同：2
> 
> 时间：2012-10-19T03:57:10.153
> 
> 标签：powershell, azure, azure-powershell

我正在使用 Microsoft 提供的 PowerShell CmdLets 在 Powershell 中编写 Azure 部署工具。

为了使用 Azure Management CmdLets，您必须首先将证书关联到您的订阅 - 通常使用 Get-AzurePublishSettingsFile 命令从 Azure 下载预烘焙文件。

该证书有一个到期日 - 到期日之后会发生什么？我**假设**CmdLets 将停止工作，直到证书被刷新。

我的问题是：

*当证书过期时，CmdLets 将 *如何响应？**如何*在我的 Powershell 脚本中检测到这一点？*

 *我发现这很难测试。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:01:55.820

根据此处的文档：http: [//msdn.microsoft.com/en-us/library/windowsazure/ee460782](http://msdn.microsoft.com/en-us/library/windowsazure/ee460782)，服务管理 API 不会检查证书是否过期。从这个网站本身：

> 服务管理 API 不会验证证书是否仍然有效。针对过期证书的身份验证将成功。

希望这可以帮助。*

# objective-c - 在 UITableView 中向静态单元格添加行时索引超出绑定错误

> ID：12967182
> 
> 赞同：1
> 
> 时间：2012-10-19T03:58:10.747
> 
> 标签：objective-c, ios, uitableview

我有一个包含一些静态行的静态单元 UITableViewController。控制器本身包含 3 个部分。我打算每次用户通过模态segue添加来自其他控制器的新对象时添加一行。我使用情节提要实现了所有这些，并将其连接到我制作的自定义 UITableViewController。

首先，我在情节提要上有一个 tableView 控制器。然后我创建了一个 UITableViewController 的自定义类，它覆盖了以下这些方法

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 3;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
    if (section == 2) {
        return [appDelegate.userIds count];
    } else {
        return [super tableView:tableView numberOfRowsInSection:section];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    if (indexPath.section == 2) {
        UITableViewCell *cell;
        cell = [tableView dequeueReusableCellWithIdentifier:@"userIdCell"];
        if (!cell)
        {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"userIdCell"];
        }
        appDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];
        NSLog([NSString stringWithFormat:@"%d", [appDelegate.userIds count]]);
        NSLog([[appDelegate.userIds objectAtIndex:indexPath.row] userId]);
        cell.textLabel.text = [[appDelegate.userIds objectAtIndex:indexPath.row] userId];
        return cell;
    } else if (indexPath.section == 1) {
        UITableViewCell *cell;
        cell = [tableView dequeueReusableCellWithIdentifier:@"addCell"];
        if (!cell)
        {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"addCell"];
        }
        if (indexPath.row == 0) {
            cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
            cell.textLabel.text = @"Add User ID";
        }
        return cell;
    } else {
            return [super tableView:tableView cellForRowAtIndexPath:indexPath];
    }
} 
```

请注意，appDelegate.userIds 是我从 AppDelegate 类实例化的可变数组，而 appDelegate 是它的一个实例。

通过模态 segue 到其他输入表单 viewController，我将一个用户对象添加到 appDelegate.userIds 数组。

这是segue准备

```
 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"tambahUser"])
    {
        UINavigationController *navigationController = segue.destinationViewController;
        TambahUserViewController *TambahUserViewController = [[navigationController viewControllers] objectAtIndex:0];
        TambahUserViewController.delegate = self;
    }
} 
```

这是我从 ControllerDelegate 实现的方法

```
#pragma mark - tambahUserViewControllerDelegate

    - (void)tambahUserViewController:(TambahUserViewController *)controller didAddUser:(User *)user
{
    [appDelegate.userIds addObject:user];
    NSInteger lastRowIndex = [appDelegate.userIds count] - 1;
    NSIndexPath* indexPath = [NSIndexPath indexPathForRow:lastRowIndex inSection:2];
    [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationAutomatic];
    [self dismissViewControllerAnimated:YES completion:nil];
}

- (void)tambahUserViewControllerDidCancel:(TambahUserViewController *)controller
{
    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

最初第 3 部分（第 2 部分）没有行，所以我在其中添加了第一行。添加第一个用户后没有问题。添加第二行后出现错误。它说，

```
> 'NSRangeException', reason: '*** -[__NSArrayI objectAtIndex:]: index 1 beyond bounds [0 .. 0]' 
```

你能告诉我我的代码有什么问题吗？谢谢你。

# django-haystack - Django Haystack 处理多值字符串——未知字段 tags_exact

> ID：12967184
> 
> 赞同：0
> 
> 时间：2012-10-19T03:58:27.743
> 
> 标签：django-haystack

我网站上的内容用可变长度的字符串标记，我想对这些标记进行分面搜索。例如，一个故事可能有标签“内战”、“一般拨款”和“葛底斯堡之战”。我希望能够对精确的、非标记化的字符串进行分面搜索。

在我的 search_index.py 中，我定义了：

```
tags = MultiValueField(faceted=True, indexed=True) 
```

我编辑了 build_solr_schema 生成的 schema.xml 以使标签成为字符串而不是文本：

```
<field name="tags" type="string" indexed="true" stored="true" multiValued="true" /> 
```

不幸的是，当我收到关于 tags_exact 的错误时：

```
Failed to add documents to Solr: [Reason: None]
ERROR: [doc=treelines_stories.story.1] unknown field 'tags_exact' 
```

我知道 tags_exact 字段与 Haystack 的 faceting 内部实现有关，但我该如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T22:07:33.143

搜索索引.py：

```
 tags = MultiValueField(faceted=True) 
```

架构.xml：

```
<field name="tags" type="text" indexed="true" stored="true" multiValued="true" />
<field name="tags_exact" type="string" indexed="true" stored="true" multiValued="true" /> 
```

# java - 如何在Java中将非常大的字符串转换为数字

> ID：12967201
> 
> 赞同：2
> 
> 时间：2012-10-19T04:01:08.567
> 
> 标签：java, string, numbers

嗨，我有一个像这样的大字符串：

> “999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999”

我希望将此字符串转换为长字符串。但我失败了。我做了：

```
Long.parseLong(longString); 
```

但我收到一个错误：

```
java.lang.NumberFormatException: For input string: "99999999....... 
```

有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-19T04:02:54.650

像这样使用[BigInteger](http://docs.oracle.com/javase/1.5.0/docs/api/java/math/BigInteger.html)类：

```
 BigInteger number = new BigInteger(longString); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T04:02:18.137

你需要使用`BigInteger`. `Long`可能无法容纳那么大的数字。

这是[BigInteger](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)的 javadoc 。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T04:09:23.857

您可能会使用[BigInteger](http://www.leepoint.net/notes-java/data/numbers/10biginteger.html)而不是 Long。

```
 BigInteger number = new BigInteger(longString); 
```

[Java BigInteger 示例](http://www.roseindia.net/java/java-biginteger/java-biginteger.shtml)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-19T06:08:46.500

**长：** [参考](http://java.about.com/od/understandingdatatypes/a/primitivetypes.htm)

使用 8 字节存储值 from `-9,223,372,036,854,775,808`to`9,223,372,036,854,775,807`

如回答前所述，使用`BigInteger`.

# jquery - 使用 jQuery 禁用 DIV = 单击下面的内容

> ID：12967203
> 
> 赞同：0
> 
> 时间：2012-10-19T04:01:35.447
> 
> 标签：jquery, css, html

> **可能重复：**
> [处理 z-index 图层上的点击事件](https://stackoverflow.com/questions/1026060/handling-click-events-on-z-indexd-layers)

我多次尝试在 stackOverflow 上找到答案，但我尝试了所有代码，但似乎没有一个有效。

我有一个与透明度重叠的 div，我需要单击它下面的一个 div。如何禁用上面的 div 但仍将其保留在屏幕上？

我正在使用火狐。

谢谢-埃德

这是div的html

```
<div class="EduardoWhite"><img src="images/EduardoWhite.png" width="614" height="539" /> 
```

累了这些和纳达：

```
<script>
$(document).ready(function()
     {

     $(".EduardoWhite").attr({ disabled: 'disabled' });

     $('.EduardoWhite').click(function(event)
     {
      $('.EduardoWhite').hide();

    });

    });

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:05:52.837

这取决于您的目标浏览器，但如果 IE 不是问题，您可以使用指针事件。

就像是：

```
#overlapping-div { pointer-events: none } 
```

编辑 - 这是一个 jsfiddle：http: [//jsfiddle.net/Eg4wz/](http://jsfiddle.net/Eg4wz/)

对该元素的任何点击都将被忽略，从而允许下面的元素接收事件。

[MDN 参考](https://developer.mozilla.org/en-US/docs/CSS/pointer-events)

[我可以使用参考吗](http://caniuse.com/#feat=pointer-events)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:06:45.910

如果 div 的 z-index 高于其下方的 div，则没有标准方法可以“禁用”该 div - 点击事件将始终发生在最高 div 上。

您唯一的选择是移动 div，使其不可见，或捕获其上的单击事件，然后选择性地触发其下方 div 上的事件。[pointer-events](https://developer.mozilla.org/en-US/docs/CSS/pointer-events) CSS 属性可能会有所帮助，但并非所有浏览器都支持。

# c++ - 基于参数是值还是引用的 C++ 模板函数选择

> ID：12967213
> 
> 赞同：0
> 
> 时间：2012-10-19T04:02:45.413
> 
> 标签：c++, templates, sfinae

我目前有类似的东西：

```
template<typename T>
typename std::enable_if<!std::is_pointer<T>::value,void>::type
f( T const &t ) {
  // ...
} 
```

也就是说，我不想`f`被考虑是否`T`是指针类型。这可以正常工作。但是，现在我想要两个不同的版本，`f`基于它的参数是值返回的值还是引用返回的值：

```
std::string const& ret_by_ref();
std::string ret_by_val();

f( ret_by_ref() ); // I want the existing function to be called here
f( ret_by_val() ); // I want a new template specialization of f() called here 
```

如何增加现有的声明`f`并创建一个新的声明，`f`以便如上所示调用它们？

赞赏 C++-11 之前的答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:20:07.210

这很容易通过右值引用完成。只需添加

```
template<typename T>
typename std::enable_if<!std::is_pointer<T>::value,void>::type
f( T &&t ) {
    // ...
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T11:24:34.900

对于 11 之前的编译器，您始终可以参考 boost type traits lib。

boost::is_pointer

[http://www.boost.org/doc/libs/1_43_0/libs/type_traits/doc/html/boost_typetraits/reference/is_pointer.html](http://www.boost.org/doc/libs/1_43_0/libs/type_traits/doc/html/boost_typetraits/reference/is_pointer.html)

我建议您从[这里](http://www.boost.org/doc/libs/1_51_0/libs/type_traits/doc/html/boost_typetraits/background.html)开始阅读类型特征的一些“背景和教程”。

# r - r "any of" 操作的逻辑条件

> ID：12967215
> 
> 赞同：3
> 
> 时间：2012-10-19T04:02:55.227
> 
> 标签：r, logical-operators

这可能是一个非常基本的 R 问题……问起来有点不好……但是是否有一些像`==`or`|`或`!`or之类的代码`&`来执行以下逻辑功能？

如果

`x`== 任何元素的值/包含在向量中`y`

然后是 TRUE

别的

错误的

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-19T04:30:54.473

其实和你说的差不多。

```
any(x == y) 
```

这可以适用于任何长度的 x 和 y，尽管如果 x 和 y 的长度不是彼此的倍数，它会发出警告。如果 x 和 y 的长度相同，那将是最好的。但是，对于 x 是一项的有限情况，那么

```
x %in% y 
```

也将工作。而且，如果您的 x 与 y 长度不同但大于 1 项，则以下可能是最明智的。

```
any(x %in% y) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T04:09:54.890

你可以试试

```
x %in% y 
```

`y`向量在哪里。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T12:23:44.993

如果 x 是向量并且 y 是向量并且您想查看两个向量中的所有值，则另一种解决方案是使用 intersect 函数。如果 x 或 y 是标量，这也将起作用。

```
# Sample Data
x <- 1:40
y <- 35:100

# We know that 35, 36, 37, 38, 39, 40 are in both vectors
intersect(x, y)
[1] 35 36 37 38 39 40 
```

我不知道您要解决的确切问题，但假设您需要知道 y 中的哪些值，这可能对您有用。

如果您只需要一个 TRUE/FALSE 答案而没有看到使用 x %in% y 得到的布尔向量，您可以使用这个：

```
length(intersect(x, y)) > 0
[1] TRUE 
```

# objective-c - 我想通过 AFNetworking 允许无效的 SSL 证书

> ID：12967220
> 
> 赞同：27
> 
> 时间：2012-10-19T04:03:48.597
> 
> 标签：objective-c, afnetworking

我想允许无效的 SSL 证书。我的主要代码如下：

```
myClient = [[MyClient alloc] init];
[myClient getHtml:@"/path/to/the/distination.html"]; 
```

MyClient 类代码如下：

```
#import <Foundation/Foundation.h>
#import "AFNetworking.h"

@interface MyClient : NSObject

- (void)getHtml:(NSString *)path;

@end

#define _AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_

@implementation MyClient

- (void)getHtml:(NSString *)path
{
    AFHTTPClient *httpClient = [[AFHTTPClient alloc] initWithBaseURL:[NSURL URLWithString:@"https://trusted.server.net"]];
    [httpClient getPath:path parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject) {
        NSLog(@"%@", responseObject);
    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        NSLog(@"error = %@", error);
    }];
}

@end 
```

我阅读了下面的页面并尝试了宏，但这不起作用。

**自签名证书 SSL · 问题 #189 · AFNetworking/AFNetworking** [https://github.com/AFNetworking/AFNetworking/issues/189](https://github.com/AFNetworking/AFNetworking/issues/189)

请帮我...

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2014-01-04T02:26:25.957

在 AFNetworking 2.0 中，您可以使用以下内容：

```
[AFHTTPRequestOperationManager manager].securityPolicy.allowInvalidCertificates = YES; 
```

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-02-20T13:38:44.927

允许使用 AFNetworking 的 SSL 证书无效。在 #import Availability.h 下方的 AFURLConnectionOperation.h 中添加以下行

```
#define _AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_ 1 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-05-16T15:43:30.667

您现在可以使用 AFHTTPClient 的allowInvalidSSLCertificate 属性。无需在最新版本的 AFNetworking 中使用定义。

```
AFHTTPClient* client = [AFHTTPClient clientWithBaseURL:@"url"];
client.allowsInvalidSSLCertificate = YES; //this defaults to no 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-09-06T21:03:40.167

我正在使用 RestKit

```
client.allowsInvalidSSLCertificate = YES; 
```

不起作用。该选项不会传播到由 restkit 创建的操作。

我正在使用 cocoapods，因此 pch 文件或 pods 项目中的任何更改都会被覆盖。我一直在使用的“hack”是一个 cocoapod 安装后操作，它添加了所需的预处理器定义。在我的 pod 文件的末尾，我添加了：

```
post_install do |installer_representation|
  installer_representation.project.targets.each do |target|
    if target.name == 'Pods-AFNetworking'
      target.build_configurations.each do |config|
        config.build_settings['GCC_PREPROCESSOR_DEFINITIONS'] ||= ['$(inherited)']
        config.build_settings['GCC_PREPROCESSOR_DEFINITIONS'] << '_AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_=1'
      end
    end
  end
end 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-10-30T07:05:07.043

注意，如果你是通过 CocoaPods 安装的，`#define`在你的项目中 -ing 这个宏是不够的——编译静态库时必须设置编译器宏才能生效。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-03-02T22:03:12.623

这是使用管理器进行 POST 操作的方法。

```
 AFHTTPRequestOperationManager *manager = [AFHTTPRequestOperationManager manager]; //initialize
 manager.securityPolicy.allowInvalidCertificates=YES;    //allow unsigned
 manager.responseSerializer=[AFJSONResponseSerializer serializer];   //set up for JSOn  
 [manager POST:@"myweb.com" parameters:parameters success:^(AFHTTPRequestOperation *operation, id responseObject) {
     //success stuff
 }failure:^(AFHTTPRequestOperation *operation, NSError *error) {
     //error stuff
}]; 
```

编辑 - 快速版本：

```
 var securityPolicy = AFSecurityPolicy()
    securityPolicy.allowInvalidCertificates = true;
    manager.securityPolicy = securityPolicy;
    manager.POST(
        "https://exmaple.com/foobar.php",
        nil,
    ... 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-01-20T09:14:14.440

您应该继承 AFHttpClient，并覆盖

```
- (AFHTTPRequestOperation *)HTTPRequestOperationWithRequest:(NSURLRequest *)request 
                                                success:(void (^)(AFHTTPRequestOperation *operation, id responseObject))success
                                                failure:(void (^)(AFHTTPRequestOperation *operation, NSError *error))failure; 
```

这是我的代码。

```
- (AFHTTPRequestOperation *)HTTPRequestOperationWithRequest:(NSURLRequest *)urlRequest success:(void (^)(AFHTTPRequestOperation *, id))success failure:(void (^)(AFHTTPRequestOperation *, NSError *))failure
{
    AFHTTPRequestOperation *operation = [super HTTPRequestOperationWithRequest:urlRequest success:success failure:failure];

    [operation setAuthenticationAgainstProtectionSpaceBlock:^BOOL(NSURLConnection *connection, NSURLProtectionSpace *protectionSpace) {
        return YES;
    }];
    [operation setAuthenticationChallengeBlock:^(NSURLConnection *connection, NSURLAuthenticationChallenge *challenge) {
        if ([challenge.protectionSpace.authenticationMethod isEqualToString:NSURLAuthenticationMethodServerTrust]) {
            [challenge.sender useCredential:[NSURLCredential credentialForTrust:challenge.protectionSpace.serverTrust] forAuthenticationChallenge:challenge];
        }
    }];
    return operation;
} 
```

您使用此 httpclient，它可以成功访问自未签名的网络。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-06-14T14:46:38.323

我在我的代码中扩展了 AFHTTPSessionManager。在针对测试服务器进行测试时，我只需要添加如下一行：

```
mySessionManager.securityPolicy.allowInvalidCertificates = YES; 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-08-26T07:49:28.540

AFHTTPRequestOperation *操作 = [[AFHTTPRequestOperation alloc] initWithRequest:urlRequest]; **operation.securityPolicy.allowInvalidCertificates = YES；**

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-01-27T15:45:53.917

如果您使用 RestKit 使用

```
client.allowsInvalidSSLCertificate = YES; 
```

不会工作，而是这样做：

在您的项目中，单击 RestKit.xcodeproj 转到项目 > 构建设置 > 预处理器宏

并添加`_AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_=1`

就这样结束了。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-05-31T04:42:53.767

[这](http://rdkw.wordpress.com/2012/12/05/afnetworking-_afnetworking_allow_invalid_ssl_certificates_/)是使用 AFNetworking 允许无效 SSL 证书的最佳方法。

> 使用添加 _AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_ 到
> 
> 项目>构建设置>预处理器宏并将其添加到调试条目。

希望能帮助到你

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-01-27T15:44:00.863

如果您使用 RestKit 使用

```
client.allowsInvalidSSLCertificate = YES; 
```

不会工作，而是这样做：

如果你手动添加了rest kit到你的项目中，点击 RestKit.xcodeproj 去 project > Build Settings > Preprocessor Macros

并添加`_AFNETWORKING_ALLOW_INVALID_SSL_CERTIFICATES_=1`

就这样结束了。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-05-25T13:54:03.480

我遇到了同样的问题，我阅读的解决方案都没有。

对我来说，唯一的解决方法是像这样设置**AFSecurityPolicy**：

```
AFSecurityPolicy *securityPolicy = [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModeNone];
securityPolicy.allowInvalidCertificates = YES;
manager.securityPolicy = securityPolicy; 
```

我决定回答虽然问题很老，但也许可以帮助某人。

# bash - 重复运行一个shell命令直到它失败？

> ID：12967232
> 
> 赞同：236
> 
> 时间：2012-10-19T04:05:02.530
> 
> 标签：bash

我写了一个不可靠地失败的[模糊](http://en.wikipedia.org/wiki/Fuzz_testing)测试。我添加了一些调试代码，但现在我想运行测试直到它失败，这样我就可以收集调试输出。

我已经设置了测试，所以我可以使用：

```
./runtest 
```

我目前的解决方案是编写一个`untilfail`脚本：

```
#!/bin/bash
$@
while [ $? -eq 0 ]; do
    $@
done 
```

然后使用它：

```
untilfail ./runtest 
```

有没有更简单的解决方案？

* * *

## 回答 #1

> 赞同：403
> 
> 时间：2012-10-19T04:09:14.940

`while`需要一个命令来执行，所以你可以使用更简单的

```
while ./runtest; do :; done 
```

`./runtest`这将在返回*非零*退出代码（通常表示失败）时停止循环。

不过，为了进一步简化您当前的解决方案，您只需将 untilfail 脚本更改为如下所示：

```
#!/bin/bash

while "$@"; do :; done 
```

然后你可以用你已经在使用的任何命令来调用它：

```
untilfail ./runTest --and val1,val2 -o option1 "argument two" 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2017-06-02T16:57:17.197

如果您不想将复杂的管道包装到 shell 脚本或函数中，那么这可以工作：

```
while true; do 
  curl -s "https:..." | grep "HasErrors.:true"
  if [[ "$?" -ne 0 ]]; then 
    break
  fi
  sleep 120
done 
```

在这种情况下，HTTP 请求总是返回 200，但在出现错误时也会返回一些具有属性“HasErrors”的 JSON：true。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-01-14T08:00:12.753

在一个系统中遇到了类似的问题，它的外壳重试逻辑随处重复，我制作了一个专用工具来解决这个问题，称为“重试”：

```
retry --until=fail ./runtest 
```

一个更复杂的例子：

```
retry --until=fail --message="test succeeded" --delay=1 ./runtest 
```

工具可从[https://github.com/minfrin/retry](https://github.com/minfrin/retry)获得。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-12-10T20:16:40.267

在 Ubuntu 上：

```
sudo apt-get install run-one
run-one-until-failure COMMAND [ARGS] 
```

欲了解更多信息： [https ://blog.dustinkirkland.com/2013/09/introducing-run-one-constantly-run-one.html](https://blog.dustinkirkland.com/2013/09/introducing-run-one-constantly-run-one.html)

# android - 如何制作类似系统的登录cookie

> ID：12967235
> 
> 赞同：2
> 
> 时间：2012-10-19T04:05:28.747
> 
> 标签：android

我正在开发一个 android 应用程序，并且我已经构建了一个与 Web 服务器一起使用的登录系统。我想知道为 android 制作类似 cookie 的系统的最佳方法是什么，这样每次用户进入应用程序时，他们就不必再次登录。最好的方法是什么？任何能引导我走上正轨的信息都会很棒！

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:47:28.850

由于您使用的是 Web 服务，因此每次使用服务时都需要使用用户名密码。

我不确定，但是如果您将应用程序定义为服务，您的应用程序将继续在后台运行，并且用户将始终保持登录状态，除非他自己注销。所以，不需要维护cookie。

感谢和问候，

克里希纳诉马哈迪克

# php - 使用 SQL 表发送电子邮件的 PHP 邮件程序

> ID：12967238
> 
> 赞同：1
> 
> 时间：2012-10-19T04:05:42.370
> 
> 标签：php, mysql

我喜欢自己学习和做事，但我遇到了一个我不知道如何解决的问题。

我正在尝试为公告系统编写一个 php 群发邮件，我可以通过一个按钮在管理页面中激活它。

这是当前脚本的样子。

```
function sendStreamAnnounce(){
  global $database, $session, $mailer, $form;      
    $q = "SELECT username,email"
        ."FROM ".TBL_USERS."";
    $result = $database->query($q);
    $num_rows = mysql_numrows($result);

   for($i=0; $i<$num_rows; $i++){
    $email  = mysql_result($result,$i,"email");

     /* Attempt to send the email with new password */
     if($mailer->sendStreamAnnounce($email))
    $_SESSION['mailed'] = true;
          else{
    $_SESSION['forgotpass'] = false;

     }
      header("Location: ".$session->referrer);
    }
} 
```

目前的设置让我有了这个

[http://puu.sh/1gkgg.jpg](http://puu.sh/1gkgg.jpg)

我以某种方式从我正在使用的教程式后端附带的“我忘记了密码”的 php 脚本中改编了这个脚本。我意识到可能不需要像“$_SESSION”这样的东西。

欢迎任何帮助！我知道很多人不喜欢用勺子喂食，所以提示也会对我有很大帮助。

提前谢谢你们！

**编辑：我自己修复了它/在 Arun 的帮助下！**

```
 function sendStreamNotice(){
  global $database, $session, $mailer, $form;      
    $q = "SELECT username,email "
        ."FROM ".TBL_USERS."";
    $result = $database->query($q);
    $num_rows = mysql_num_rows($result);
  if(!$result || ($num_rows < 0)){
  echo "Error displaying info";
  return;
}
  if($num_rows == 0){
  echo "Database table empty";
  return;
}

for($i=0; $i<$num_rows; $i++){
    $email  = mysql_result($result,$i,"email");
    $user = mysql_result($result,$i,"username");

     /* Attempt to send the email with new password */
     if($mailer->sendStreamNotice($user,$email))
    $_SESSION['mailed'] = true;
          else{
    $_SESSION['forgotpass'] = false;

     }
      header("Location: ".$session->referrer);
    }
} 
```

邮件通过就好了！

[http://puu.sh/1gkRx.jpg](http://puu.sh/1gkRx.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:15:10.987

使用`$num_rows = mysql_num_rows($result);`而不是 `mysql_numrows($result);`

# cakephp - CakePHP：如何读取 Javascript cookie？

> ID：12967245
> 
> 赞同：2
> 
> 时间：2012-10-19T04:07:02.200
> 
> 标签：cakephp, cookies

首先，我使用 Javascript 函数创建了一个 cookie，如以下代码所示：

```
function SetCookie(cookieName,cookieValue,nDays) {
     var today = new Date();
     var expire = new Date();
     if (nDays==null || nDays==0) nDays=1;
     expire.setTime(today.getTime() + 3600000*24*nDays);
     document.cookie = cookieName+"="+escape(cookieValue)+ ";expires="+expire.toGMTString();
}

SetCookie('MyCookie','MyValue',7); 
```

然后，我尝试使用 CakePHP 读取值。

```
 <?php 
        $cookie = $this->Cookie->read('MyCookie');
        if ( $cookie == '' ){
            echo "Cookie not set";
        } else { 
        echo "Value: ".$cookie;
    }

?> 
```

结果显示没有设置cookie。但是使用常规 Javascript 函数读取时结果不同。

正确的方法是如何让 Javascript 创建的 cookie 也可以被 CakePHP 读取？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:16:55.743

看起来您没有在 javascript 中设置域。

尝试类似：

```
document.cookie = cookieName+"="+escape(cookieValue)+ ";expires="+expire.toGMTString() 
    + "; path=/; domain=.example.com"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:39:30.447

我会使用相同的组件来编写和读取 cookie，否则你会对逆向工程感到疯狂。

所以我会用

```
$this->Cookie->write('MyCookie', array('MyValue'=>'7')); 
```

在[CakePHP 文档中指定](http://book.cakephp.org/1.3/en/view/1282/Using-the-Component)

我希望它有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-31T14:07:16.167

我面临同样的问题，终于找到了解决这个问题的方法，试试这个：->

```
SetCookie('CakeCookie["MyCookie"]','MyValue',7); 
```

现在您可以在控制器中读取 MyCookie，例如

```
$this->Cookie->read('MyCookie'); 
```

# matlab - Matlab 组织和绘制温度数据

> ID：12967246
> 
> 赞同：2
> 
> 时间：2012-10-19T04:07:25.503
> 
> 标签：matlab, heatmap, temperature

对 matlab 相对较新，希望对我的项目的最佳选项提供一些输入。

我在办公室周围的设定位置有几个温度探头，我必须在平面图图像上显示热图。（[这](http://i.stack.imgur.com/iPGiz.jpg)有点像我想要实现的，点是探针，这将覆盖在平面图上）

目前我正在寻找组织和绘制数据的最佳方式。

我有一个来自每个探头的 csv 文件，其中包含一个`timestamp`列和一个温度列。每个 csv 文件可能有大约 3 个月/2000 个读数。

目前，我将来自不同探针的所有 csv 文件导入到单元格中，并按与其位置相对应的数字进行组织。So`data{1}{1}`包含时间戳并`data{1}{2}`包含位置 1 的探头温度。`data{2}`用于位置 2，依此类推。这是存储它的好方法吗？

最终，我需要能够在查看地图时寻找或玩不同的时间。但目前我只是在寻找绘制它的最佳选择。

我有平面图图像，我知道我必须找到位置的像素/xy 表示，但那又如何呢？

绘制所有这些探针的最佳方法是什么。我打算使用 surf（顶视图），但这需要 x/y 坐标的数组吗？

我的想法是将位置存储为静态整数、loc1X= ..、loc1y= 等，然后制作一个类似的数组，`[loc1X loc1Y data{1}{2}(1); loc2X loc2Y data{2}{2}(1)]`但 surf 仍然说 Z 需要是一个要绘制的数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:35:45.023

假设您的位置没有设置为在矩形网格中相距正好 1m（那将是一个奇怪的办公室......），您将面临必须通过分散的数据点插入表面的问题。Matlab 函数[`TriScatteredInterp`](http://www.mathworks.nl/help/matlab/ref/triscatteredinterpclass.html)将是您所需要的。只需按照链接中的示例进行一些更改：

```
x = [x values of your locations]
y = [y values of your locations]
z = [all heat readings for all x,y for a single timestamp]

F = TriScatteredInterp(x,y,z); 
```

并像示例中一样绘制。您必须为所有时间戳执行此操作，因此，在伪代码中：

```
x = [x values of your locations]
y = [y values of your locations] % assuming they don't change

F = cell(numel(data{1}{1}),1);
for t = 1:numel(data{1}{1}) % loop through all time stamps

    z = cellfun(@(p)p{1}(t), data);
    F{t} = TriScatteredInterp(x,y,z);

end 
```

然后您可以绘制第一个`F{1}`并在图中添加一个滑块以选择不同的时间。

请注意，这假定所有节点都***以相同的时间戳***收集数据。如果不是这种情况（我怀疑不是），你必须再做一步：为每个 XY 点在时间维度上创建一个插值。

这可以很容易地使用`spline`. 例如，

```
pp = spline(data{1}{1}, data{1}{2}); 
```

为第一个位置创建一个`spline`遍历所有数据，这样

```
z = ppval(pp, [any random time within the interval]) 
```

给出区间内任何时间的热量的插值. 您可以通过发出

```
z = spline(data{1}{1}, data{1}{2}, [any random vector of times] ); 
```

所以，总结一下：

```
% interpolate over time

% NOTE: use the maximum first time, and the minimum last time, 
% to ensure these endpoints are included in all splines.
minTime = max( cellfun(@(p)p{1}(1), data) ); 
maxTime = min( cellfun(@(p)p{1}(1), data) );

trange = minTime : [some step] : maxTime;

npts = size(data,1);
z    = cell(npts,1);
for ii = 1:npts
    % creates interpolation for H(t) at equal times 
    % trange for location ii
    z{ii} = spline(data{ii}{1}, data{ii}{2}, trange);
end

% interpolate spatially

x = [x values of your locations]
y = [y values of your locations] % assuming they don't change

nts = numel(trange)
F = cell(nts,1);
for t = 1:nts    

    zed = cellfun(@(p)p(t),z);
    F{t} = TriScatteredInterp(x,y, zed);

end

% ... and further plotting commands 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T10:38:12.267

这是您第二个问题的答案（在上面的评论中）：

```
% get a list of all initial sampling times for all sensors
first_times = cellfun(@(x)   x{1}(1), data);
last_times  = cellfun(@(x) x{1}(end), data);

% find the max/min of these times. 
% NOTE: the order of max/min might be counter-intuitive!
[m, im] = max(first_times);
[M, iM] = min(last_times);

% 'im' contains the number of the data set which has the latest initial
% sampling time. 'iM' contains the number of the data set which has the 
% earliest final sampling time.

% Now find the indices to the actual sampling times in all data sets
% that correspond to these initial and final times:

proper_first = cellfun(@(x) find(x{1}==m,1), data);
proper_last  = cellfun(@(x) find(x{1}==m,1), data);

% index times and data in dataset k like so: 
data{k}{1}( proper_first(k) : proper_last(k) ) % times
data{k}{2}( proper_first(k) : proper_last(k) ) % data 
```

现在为了将来参考，最好只问一个关于 SO 的新问题；在一个线程中询问您的所有问题通常被认为不是一种好的做法，因为这将使任何未来遇到您遇到的相同问题的谷歌用户都很难找到。

# java - 在字符串中查找姐妹括号

> ID：12967248
> 
> 赞同：1
> 
> 时间：2012-10-19T04:07:31.193
> 
> 标签：java, string, parsing, methods

编辑：找到解决方案 -

```
/**
 * Returns the arguments of the method. Ensures inner methods are intact.
 *
 * @param fullMethod full method string
 * @return arguments of the method
 */
public static String[] getArguments(String fullMethod) {
    String innerFirstBrackets = fullMethod.substring(fullMethod.indexOf("(") + 1, fullMethod.lastIndexOf(")"));
    if (innerFirstBrackets.contains("(") && innerFirstBrackets.contains(")")) {
        List list = new List();
        int count = 0;
        int lastComma = 0;
        for (int x = 0; x < innerFirstBrackets.length(); x++) {
            if (innerFirstBrackets.charAt(x) == '(') {
                count ++;
            } else if (innerFirstBrackets.charAt(x) == ')') {
                count --;
            }
            if (innerFirstBrackets.charAt(x) == ',' || x == innerFirstBrackets.length() - 1) {
                if (count == 0) {
                    list.add(innerFirstBrackets.substring((lastComma == 0 ? -1 : lastComma) + 1,
                            (x == innerFirstBrackets.length() - 1 ? x + 1 : x)).trim());
                    lastComma = x;
                }
            }
        }
        return list.getItems();
    } else {
        // No inner methods
        return innerFirstBrackets.split(",");
    }
} 
```

我试图在`String`方法的表示中获取参数。到目前为止，我在大多数情况下都成功地做到了，但它不适用于某些情况。

这是我目前拥有的代码：

```
/**
 * Returns the arguments of the method. Ensures inner methods are intact.
 *
 * @param fullMethod full method string
 * @return arguments of the method
 */
public static String[] getArguments(String fullMethod) {
    String innerFirstBrackets = fullMethod.substring(fullMethod.indexOf("(") + 1, fullMethod.lastIndexOf(")"));
    if (innerFirstBrackets.contains("(") && innerFirstBrackets.contains(")")) {
        List list = new List();
        boolean first = false, second = false;
        int lastComma = 0;
        for (int x = 0; x < innerFirstBrackets.length(); x++) {
            if (innerFirstBrackets.charAt(x) == '(') {
                first = !second;
            } else if (innerFirstBrackets.charAt(x) == ')') {
                second = true;
            }
            if (first && second) {
                first = second = false;
            }
            if (innerFirstBrackets.charAt(x) == ',' || x == innerFirstBrackets.length() - 1) {
                if (!first) {
                    list.add(innerFirstBrackets.substring((lastComma == 0 ? -1 : lastComma) + 1,
                            (x == innerFirstBrackets.length() - 1 ? x + 1 : x)).trim());
                    lastComma = x;
                }
            }
        }
        return list.getItems();
    } else {
        // No inner methods
        return innerFirstBrackets.split(",");
    }
} 
```

这在有一个方法作为参数时有效，但当存在多个以方法作为参数的参数时不起作用。这并不常见，但我不喜欢我的代码中存在漏洞。

有效的方法示例

```
get(get(1,2)); 
```

或者

```
get(get(get(get(1,2)))); 
```

或者

```
get(get(1),get(1)); 
```

但是当给出这样的东西时它不会起作用

```
get(get(get(1)),get(1)); 
```

我不知道如何找到姐妹括号，而不仅仅是找到下一个括号。（如果你不知道我所说的姐妹括号是什么意思，想想在大多数 IDE 上，当你突出显示一个括号时，另一个括号会自动突出显示。EX。![在此处输入图像描述](../Images/5a147c70dda3739a544305d6f1dc20f6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T04:14:53.873

我不确定我是否理解为什么逗号对您的算法来说是个问题。您可以做的是开始向右扫描字符（假设您`(`从左括号开始），将计数器初始化为 0，然后：

*   每次遇到`(`
*   每次遇到`)`

当计数器再次变为零时，您就找到了匹配的对。您唯一需要注意的是带引号的字符串，其中代码在单引号或双引号内有随机括号（您不想将它们应用于您的计数器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:15:49.063

如果您只关心括号，您可以维护一个简单的计数器来查找匹配的括号。

伪代码：

```
int start=-1, end=-1;
int paren_depth = 0;
for(int i=0; i<length; i++) {
    if(str[i] == '(') {
        if(paren_depth == 0) start = i;
        paren_depth++;
    } else if(str[i] == ')') {
        paren_depth--;
        if(paren_depth == 0) {
            end = i;
            break;
        }
    }
}

// get substring from start to end 
```

如果你也想处理其他标点符号，你应该使用堆栈来存储标点符号上下文，或者只使用递归（当你看到括号时递归，当你找到右括号时返回）。

# json - 我可以访问 .net Web api 模型绑定无法处理的数据吗？

> ID：12967254
> 
> 赞同：1
> 
> 时间：2012-10-19T04:08:00.170
> 
> 标签：json, asp.net-web-api, model-binding

我有一个 MVC 4 Web api 应用程序，它接收 json 对象并使用标准模型绑定工具将它们绑定到我的 poco 对象，以便在我的控制器方法中轻松使用。

当我收到的 json 结构直接映射到我的 poco 时，这一切都很好。例如我有一个控制器方法

```
 public HttpResponseMessage Post(DeviceConfigurationDto deviceConfiguration) 
```

和 DeviceConfigurationDto 是

```
public class DeviceConfigurationDto
    {
        public long Timestamp { get; set; }
        public string DeviceType { get; set; }
        public string AssetName { get; set; }
    }
} 
```

我发布了以下 JSON

```
 {
        "Timestamp": 234234234,
        "DeviceType": "A555tom",
        "AssetName": "HV103"
    } 
```

内置的模型绑定工具在处理变化方面做得很好，比如额外的字段或缺失的字段等等。但如果你把它推得太远。例如通过发布以下 json

```
 [
    {
        "Fields4": "asda",
        "Timestamp": 234234234,
        "DeviceType": "A555tom",
        "AssetName": "HV103"
    },
    {
        "Timestamp": 234234234,
        "DeviceType": "A555tom",
        "DedviceType": "A555tom",
        "AssetName": "HV103"
    }
] 
```

它最终倒下了，我最终将我的方法中的参数设为空。

有没有办法让模型绑定在数据符合预期时工作，但也让我能够获取对模型绑定器来说有问题的数据，以便我可以记录我收到的请求不符合我的预期？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T01:15:58.120

一种方法是使用自定义 ActionFilter。由于模型绑定发生在执行操作过滤器之前，因此您可以在自定义操作过滤器中获取操作参数。

例如：

```
public class LogFailToModelBindArgActionFilterAttribute : System.Web.Http.Filters.ActionFilterAttribute
{
    public override void OnActionExecuting(HttpActionContext context)
    {
        var deviceConfigurationArg = context.ActionArguments["deviceConfiguration"];
        if (deviceConfigurationArg == null) // fail to model bind data to argument ...
        {
            var jsonContent = context.Request.Content.ReadAsStringAsync().Result; // calling .Result here for sake of simplicity...
            Log(jsonContent);
        }
    }
} 
```

行动：

```
 [LogFailToModelBindArgActionFilter]
    public HttpResponseMessage Post(DeviceConfigurationDto deviceConfiguration)
    {...} 
```

# asp.net-mvc - 模板和局部视图 - 使用一个或另一个？

> ID：12967255
> 
> 赞同：0
> 
> 时间：2012-10-19T04:08:19.873
> 
> 标签：asp.net-mvc

所以我想验证一些东西。这对我来说，如果使用模板路由，因为您的模板本质上是提供部分标记，但显然您通过模板做的不同。

所以你不会同时使用两者。我假设如果我要使用类似 Knockout 的东西，我很可能永远不会在我的 MVC 应用程序中使用部分，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:09:30.673

> 我假设如果我要使用类似 Knockout 的东西，我很可能永远不会在我的 MVC 应用程序中使用部分，对吗？

是，对的。Knockout 是您可以使用的客户端模板引擎，现在您的控制器操作将返回 JSON 而不是部分 HTML。

但我不会说如果您使用模板引擎，您将永远不会使用部分 HTML。使用客户端模板引擎很难实现很多事情。例如生成包含防伪令牌的表单，具有客户端验证属性的输入字段，...... - >它们更容易在服务器上生成。

# php - Pinterest 图像高度

> ID：12967259
> 
> 赞同：1
> 
> 时间：2012-10-19T04:08:57.927
> 
> 标签：php, html, css, image, pinterest

```
<div class="pin_image">

   <a href="<?php the_permalink(); ?>"><img width="191" height="auto" class="<?php echo $img_class; ?>" 
                src="<?php echo PricerrTheme_get_first_post_image(get_the_ID(),102,72); ?>" /></a>
</div> 
```

如何使上面的图像根据图片的纵横比动态生成高度？宽度将为 191 像素。就像 pinterest 一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:28:08.543

基本上，您需要从 CSS 将高度设置为 AUTO，而不是使用 HTML4 标记宽度属性。使用内联样式（IMO 从来都不是一个好主意，除非用于演示目的。），编辑您的代码，使其看起来像这样：

```
<img src="blah.png" style="width:100px; height:auto;" /> 
```

祝你的项目好运！:)

# javascript - 无法从服务器获取现有图像/资源以及如何获取它们

> ID：12967266
> 
> 赞同：0
> 
> 时间：2012-10-19T04:09:26.467
> 
> 标签：javascript, get

有时，可能是连接缓慢时，浏览器无法获取服务器中已经存在的图像。
我尝试复制浏览器无法获取的图像 src url 并在新选项卡中打开图像可以正确加载，就像您在图片中看到的那样。Chrome 可以加载图像并将其显示在控制台中。

我想知道为什么会发生这种情况以及如何解决这个问题。

[![](../Images/5ce237ebef72af3e6c6b2b473e69aa80.png)](https://s16.postimage.org/hoqqk38vn/imgprob.jpg)

我尝试通过添加一些参数来重新加载图像以防止使用此代码进行缓存

```
images[instance].onerror = function(){
        repeatPreload(this, 5);
}
function repeatPreload(Image, timeout){
    if(timeout > 0){
        setTimeout(function(){
            Image.src = Image.src.replace(/\?d=*[0-9]{6,}/g,"") + "?d=" + new Date().getTime();
            console.log("Fail to load image : " + Image.src + " , timeout : " + timeout);
            Image.onerror = repeatPreload(Image, timeout - 1);
        },2000);
    }else{
        Image["error"] = 1;
    }
} 
```

我已经尝试复制图像文件夹并在发生错误时从重复文件夹中获取图像但总是失败。

# php - 在PHP中将数组中的连续日期分组在一起

> ID：12967267
> 
> 赞同：3
> 
> 时间：2012-10-19T04:09:46.353
> 
> 标签：php, arrays

我在数组中有以下日期（日期并不总是这些日期）

```
[0] 2012-10-18
[1] 2012-10-19
[2] 2012-10-20
[3] 2012-10-23
[4] 2012-10-24
[5] 2012-10-29
[6] 2012-10-30 
```

我想将连续的日期组合在一起，所以输出是：

```
2012-10-18 to 2012-10-20
2012-10-23 to 2012-10-24
2012-10-29 to 2012-10-30 
```

我将如何在 PHP 中执行此操作？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T04:50:09.427

这段代码将连续的日期组合在一起并理解夏令时。

数字数组

```
$dates = array
(
strtotime('2012-10-01'),

strtotime('2012-10-03'),
strtotime('2012-10-04'),
strtotime('2012-10-05'),
strtotime('2012-10-06'),
strtotime('2012-10-07'),

strtotime('2012-10-10'),
strtotime('2012-10-11'),
strtotime('2012-10-12'),
strtotime('2012-10-13'),
strtotime('2012-10-14'),
strtotime('2012-10-15'),
strtotime('2012-10-16'),
strtotime('2012-10-17'),
strtotime('2012-10-18'),
strtotime('2012-10-19'),
strtotime('2012-10-20'),

strtotime('2012-10-23'),
strtotime('2012-10-24'),
strtotime('2012-10-25'),
strtotime('2012-10-26'),
strtotime('2012-10-29'),
strtotime('2012-10-30'),
strtotime('2012-10-31'),
strtotime('2012-11-01'),
strtotime('2012-11-02'),

strtotime('2012-11-04')
); 
```

* * *

代码：

```
$conseq = array(); 
$ii = 0;
$max = count($dates);

for($i = 0; $i < count($dates); $i++) {
    $conseq[$ii][] = date('Y-m-d',$dates[$i]);

    if($i + 1 < $max) {
        $dif = $dates[$i + 1] - $dates[$i];
        if($dif >= 90000) {
            $ii++;
        }   
    }
} 
```

* * *

输出：

```
array
  0 => 
    array
      0 => string '2012-10-01' (length=10)
  1 => 
    array
      0 => string '2012-10-03' (length=10)
      1 => string '2012-10-04' (length=10)
      2 => string '2012-10-05' (length=10)
      3 => string '2012-10-06' (length=10)
      4 => string '2012-10-07' (length=10)
  2 => 
    array
      0 => string '2012-10-10' (length=10)
      1 => string '2012-10-11' (length=10)
      2 => string '2012-10-12' (length=10)
      3 => string '2012-10-13' (length=10)
      4 => string '2012-10-14' (length=10)
      5 => string '2012-10-15' (length=10)
      6 => string '2012-10-16' (length=10)
      7 => string '2012-10-17' (length=10)
      8 => string '2012-10-18' (length=10)
      9 => string '2012-10-19' (length=10)
      10 => string '2012-10-20' (length=10)
  3 => 
    array
      0 => string '2012-10-23' (length=10)
      1 => string '2012-10-24' (length=10)
      2 => string '2012-10-25' (length=10)
      3 => string '2012-10-26' (length=10)
  4 => 
    array
      0 => string '2012-10-29' (length=10)
      1 => string '2012-10-30' (length=10)
      2 => string '2012-10-31' (length=10)
      3 => string '2012-11-01' (length=10)
      4 => string '2012-11-02' (length=10)
  5 => 
    array
      0 => string '2012-11-04' (length=10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-26T11:06:55.407

```
$selectedDays = array( 2012-10-18,
 2012-10-19,
 2012-10-20,
 2012-10-23,
 2012-10-24,
 2012-10-29,
 2012-10-30)

$intervals = array();
                   $i=0;
                   $j=1;
                   $diff=86400;
                   $period = $diff;
                   $nrInterval=0;
                   $intervals[$nrInterval]['start'] = $selectedDays[$i];
                   $intervals[$nrInterval]['end'] = $selectedDays[$i];
                   while($j<count($selectedDays)){
                       if(strtotime($selectedDays[$j])-strtotime($selectedDays[$i]) == $period){
                          $intervals[$nrInterval]['end'] = $selectedDays[$j];
                          $j++;
                          $period+=$diff;
                       }
                       else{
                            $i=$j;
                            $j++;
                            $nrInterval++;
                            $intervals[$nrInterval]['start'] = $selectedDays[$i];
                            $intervals[$nrInterval]['end'] = $selectedDays[$i];
                            $period = $diff;
                        }
                   }

//print_r($intervals); will output
array(
'0'=>array('start' => '2012-10-18','end' => '2012-10-20'))
.
.
.
.etc
) 
```

# android - 如何避免发生触摸事件中相对布局的子视图的不可见部分？

> ID：12967269
> 
> 赞同：1
> 
> 时间：2012-10-19T04:09:47.333
> 
> 标签：android, android-relativelayout, touch-event

比方说，有一个这样的RelativeLayout：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:eve="http://schemas.android.com/apk/res/com.yyg.kaolamusic"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:id="@+id/A"
        android:layout_width="match_parent"
        android:layout_height="match_parent" />

    <LinearLayout
        android:id="@+id/B"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true" />
</RelativeLayout > 
```

那么，如果我们触摸 B 但 B 不处理该触摸事件，我们如何避免触摸事件传递给子 A？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:38:18.443

您可以为始终使用触摸事件的视图 B 设置触摸侦听器，因此 A 永远不会获得触摸事件。

示例代码：

```
mA = (LinearLayout) getView().findViewById(R.id.A);
    mA.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Toast.makeText(getActivity(), "Touch A",Toast.LENGTH_LONG).show();
            return false;
        }
    });
    mB = (LinearLayout) getView().findViewById(R.id.B);
    mB.setOnTouchListener(new OnTouchListener() {
        @Override
        public boolean onTouch(View v, MotionEvent event) {
            Toast.makeText(getActivity(), "Touch B",Toast.LENGTH_LONG).show();
            return true;
        }
    }); 
```

# php - 启用 Fedex 运输方式后 Magento 500 错误

> ID：12967272
> 
> 赞同：0
> 
> 时间：2012-10-19T04:10:08.433
> 
> 标签：php, soap-client, magento-1.7

这可以很容易地为我重新创建，方法是禁用 FedEx 运输方式并转到购物车然后启用它，它给了我 500 错误。

这是magento的系统日志。出于安全目的，我将域名替换为“域”。

```
2012-10-19T03:57:53+00:00 ERR (3): Warning: include(SoapClient.php): failed to open stream: No such file or directory  in /var/www/vhosts/www.domain.com/httpdocs/lib/Varien/Autoload.php on line 93
2012-10-19T03:57:53+00:00 ERR (3): Warning: include(SoapClient.php): failed to open stream: No such file or directory  in /var/www/vhosts/www.domain.com/httpdocs/lib/Varien/Autoload.php on line 93
2012-10-19T03:57:53+00:00 ERR (3): Warning: include(): Failed opening 'SoapClient.php' for inclusion (include_path='/var/www/vhosts/www.domain.com/httpdocs/app/code/local:/var/www/vhosts/www.domain.com/httpdocs/app/code/community:/var/www/vhosts/www.domain.com/httpdocs/app/code/core:/var/www/vhosts/www.domain.com/httpdocs/lib:.:')  in /var/www/vhosts/www.domain.com/httpdocs/lib/Varien/Autoload.php on line 93 
```

我已经通过 yum 安装了 php-soap，但我认为它没有在 php 中启用，因为在我的 php 信息中，它提到的所有关于 php soap 的都是soap.ini 文件。在那个文件中。soap 未注释，但我不确定我是否已将其正确添加到 PHP.ini 文件中。我无法找到 php.ini 文件，但能够使用 plesk 为应该启用 soap 的 php 文件添加命令，但我不确定这是否有效。

非常感谢任何帮助或指示！我在这个问题上花了很多时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:02:29.533

我已经想通了！我使用的是 PHP 5.3.3，并且安装了 PHP 5.3.17。

我所要做的就是 yum update php 然后在服务器上重新启动服务 httpd。我的 php-common 和 php-soap 版本为 5.3.17，而 php 安装版本为 5.5.3，它们不兼容。

我认为这是一个编程问题！

# java - JavaMail POP3 邮件客户端错误

> ID：12967278
> 
> 赞同：0
> 
> 时间：2012-10-19T04:11:04.803
> 
> 标签：java, jakarta-mail

我正在开发一个 java 邮件客户端：

```
import javax.mail.*;
import javax.mail.internet.*;
import java.util.*;

public class MailClient {
    public static void main(String[] args) {
        try {
            Properties props = new Properties();
            Session session;

            URLName url = new URLName("pop3","pop.gmail.com",995,"","email@gmail.com","password");
            session = Session.getInstance(props, null);
            Store store = new POP3SSLStore(session,url);
            store.connect();

            Folder folder = store.getFolder("INBOX");
            folder.open(Folder.READ_ONLY);

            Message message[] = folder.getMessages();

            for (int i=0, n = message.length; i<n; i++) {
                System.out.println(message[i].getSubject());
            }
            folder.close(false);
            store.close();
        }
        catch (MessagingException e) {
            System.out.println("Error: " + e);
        }
    }
} 
```

发生的错误是这样的：

```
MailClient.java:13: error: cannot find symbol
Store store = new POP3SSLStore(session,url);
symbol: class POP3SSLStore
location: class MailClient
1 error 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:16:21.527

您缺少导入：

```
import com.sun.mail.pop3.POP3SSLStore; 
```

之后它应该编译

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:30:12.917

您不应该自己实例化 Store 对象。让 Session 为你做这件事。调用 session.getStore("pop3s")。[请参阅JavaMail 下载包](http://www.oracle.com/technetwork/java/javamail/index-138643.html)中包含的示例代码，以及[JavaMail FAQ](http://www.oracle.com/technetwork/java/javamail/faq/index.html)中的示例，尤其是[Gmail 示例](http://www.oracle.com/technetwork/java/javamail/faq/index.html#gmail)。

# css - 中心一 并浮动其他权利

> ID：12967285
> 
> 赞同：7
> 
> 时间：2012-10-19T04:11:54.930
> 
> 标签：css, html, floating

> **可能重复：**
> [将一个 div 居中，而另一个 div 浮动到右侧？](https://stackoverflow.com/questions/4597256/centering-one-div-while-another-div-is-floated-to-the-right)

我正在尝试将 container1 居中并将 container2 浮动到其右侧，以便它稍微从页面上流出：

示例：http: [//i.imgur.com/JHkfn.jpg](https://i.imgur.com/JHkfn.jpg)

不幸的是，容器 2 在容器 1 的下方和右侧跳跃，正如您在站点模型中看到的那样（链接在下方。）

[网站模型： http](http://ad313.samrandolphdesign.com/) ://ad313.samrandolphdesign.com/

CSS：

```
#container1 {
    margin: auto;
    background-color: #FFF;
    width: 80%;
    height: 100%;
    max-width: 600px;
    padding-bottom: 15px;
    display: block;
}

#container2 {
    background-color: #CC9900;
    max-width: 600px;
    width: 80%;
    height: 100%;
    padding-top: 60px;
    padding-bottom: 50px;
    text-align: center;
    float: right;
    display: block;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:23:12.717

将两个 div 包装在另一个 div 中。并使容器 1 和容器 2 的显示为内联块。

像这样的东西。

```
<div style="width: 2000px">
  <div id="container1" style="width: 990px; display: inline-block">
  </div>
  <div id="container2" style="width: 990px; display: inline-block">
  </div>
</div> 
```

试试这个[小提琴](http://jsfiddle.net/sathyamoorthi/kH5DQ/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T04:24:14.087

尝试使用绝对定位而不是浮动。

就像是：

```
#container1 {
    margin: auto;
    background-color: red;
    width: 50%;
    height: 100%;
    max-width: 600px;
    padding-bottom: 15px;
    text-align: center;
    display: block;
    position: absolute;
    left: 25%;
}

#container2 {
    background-color: #CC9900;
    max-width: 600px;
    width: 50%;
    height: 100%;
    padding-top: 60px;
    padding-bottom: 50px;
    text-align: center;
    display: block;
    position: absolute;
    right: -25%;
}​ 
```

这是一个[jsfiddle](http://jsfiddle.net/kH5DQ/) 编辑：如果您不想绝对定位 container1，只需添加`top: 0;`到 container2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T04:26:59.390

首先，您需要在标记中向上移动`#container2`，`#container1`以便浮动顶部将成为顶部`#container1`而不是之后。其次，您需要提供`#container2`负边距权限才能将其移出屏幕。

```
#container2 {
background-color: #CC9900;
max-width: 600px;
width: 80%;
height: 100%;
padding-top: 60px;
padding-bottom: 50px;
text-align: center;
float: right;
display: inline-block;
margin-right: -300px;
} 
```

# c# - 以编程方式访问 WCF 服务中的多个终结点

> ID：12967288
> 
> 赞同：0
> 
> 时间：2012-10-19T04:12:01.983
> 
> 标签：c#, wcf, wcf-binding, wcf-client

访问自托管 WCF 服务中的第二个端点时出现错误。下面是我的代码：

```
Uri HttpUri = new Uri("http://localhost:8092/MyService/HttpService");
ServiceHost host = new ServiceHost(typeof(PollService),HttpUri);
host.AddServiceEndpoint(typeof(ISub), myBinding, ""); //My binding is my custom binding and this end point is working fine.

host.AddServiceEndpoint(typeof(IFocus), 
    new BasicHttpBinding(),
    new uri("http://localhost:8092/MyService/Focusservice"));

ServiceMetadataBehavior smb = new ServiceMetadataBehavior();
smb.HttpGetEnabled = true;
host.Description.Behaviors.Add(smb);
host.Open(); 
```

从代码中，我可以访问我的自定义绑定 url：

```
http://localhost:8092/MyService/HttpService` 
```

但我无法访问：

```
 http://localhost:8092/MyService/Focusservice 
```

在 WCF 测试客户端中访问它时，会引发如下错误：

> 错误：无法从中获取元数据`http://localhost:8092/MyService/basicbinding`
> 如果这是您有权访问的 Windows (R) Communication Foundation 服务，请检查您是否已在指定地址启用元数据发布。有关启用元数据发布的帮助，请参阅[链接中的 MSDN 文档](http://go.microsoft.com/fwlink/?LinkId=65455.WS-Metadata)
> 
> 交换错误。URI：`http://localhost:8092/MyService/basicbinding`元数据包含无法解析的引用：`http://localhost:8092/MyService/basicbinding`。
> 
> 内容类型应用程序/soap+xml；charset=utf-8 不受 service 支持`http://localhost:8092/MyService/basicbinding`。
> 
> 客户端和服务绑定可能不匹配。远程服务器返回错误：（415）无法处理消息，因为内容类型'application/soap+xml; charset=utf-8' 不是预期的类型 'text/xml; 字符集=utf-8'。
> 
> HTTP GET 错误。URI：`http://localhost:8092/MyService/basicbinding`下载时出错`'http://localhost:8092/MyService/basicbinding'`。请求失败，HTTP 状态为 400：错误请求。

# mysql - MySQL获取选择行的最大值和最小值之间的差异

> ID：12967289
> 
> 赞同：5
> 
> 时间：2012-10-19T04:12:09.063
> 
> 标签：mysql, max, min

我想要一个查询来获取按天分组的最大值和最小值之间的差异。我的尝试不起作用：

```
SELECT date(`date`), 
   (max(value) - min(value)) as value,
FROM `sub_meter_data` 
where date(sub_meter_data.date) > '2012-10-01' 
  and sub_meterID in('58984','58985','58986','58987')
group by date(`date`); 
```

每个 sub_meter 的值可能 >3000，但每天仅相差 < 10。我想要差异，即结果<10。通过上面的查询，我得到的结果 >3000。

下面的这个查询，只选择一米，并给出正确的结果，最大值（17531）、最小值（17523）和差值（8）。

```
SELECT date(sub_meter_data.date) as date,
   max(value) as max_meter,
   min(value) as min_meter, 
   max(value) - min(value) as diff,
FROM `sub_meter_data`
where date(sub_meter_data.date) > '2012-10-01' 
  and sub_meterID in('57636')
  group by date(sub_meter_data.date) 
```

但是在 in 子句中添加另一个仪表，结果不好，最大值为 17531，最小值为 3021，差异为 14510。但我想要每个仪表的差异，然后相加。

```
SELECT date(sub_meter_data.date) as date,
   max(value) as max_meter,
   min(value) as min_meter, 
   max(value) - min(value) as diff,
   FROM `sub_meter_data`
where date(sub_meter_data.date) > '2012-10-01' 
  and sub_meterID in('57636', '57628')
  group by date(sub_meter_data.date) 
```

我尝试过的另一个尝试是：

```
SELECT date(sub_meter_data.date) as date,
   sum(CASE WHEN sub_meterID = '57628' OR sub_meterID = '57636' THEN (max(value) -     min(value)) ELSE 0 END) as value
   FROM `sub_meter_data`
where date(sub_meter_data.date) > '2012-10-01' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T05:24:33.780

该查询仅按天（日期）分组，但您还想按米分组，因此您需要将其添加到您的`group by`：

```
select sub_meterID, date(`date`) as day, max(value) - min(value) as value
from `sub_meter_data`
where date(`date`) > '2012-10-01'
    and sub_meterID in ('58984','58985','58986','58987')
group by sub_meterID, date(`date`); 
```

然后，如果您想按天计算差异，您可以执行以下操作：

```
select day, sum(diff) as total_diff
from (
    select sub_meterID, date(`date`) as day, max(value) - min(value) as diff
    from `sub_meter_data`
    where date(`date`) > '2012-10-01'
       and sub_meterID in ('58984','58985','58986','58987')
    group by sub_meterID, date(`date`)
    ) a
group by day 
```

或者，如果您想按米求和：

```
select sub_meterID, sum(diff) as total_diff
from (
    select sub_meterID, date(`date`) as day, max(value) - min(value) as diff
    from `sub_meter_data`
    where date(`date`) > '2012-10-01'
       and sub_meterID in ('58984','58985','58986','58987')
    group by sub_meterID, date(`date`)
    ) a
group by sub_meterID 
```

# ios - 自定义 UISearchbar 的 UITextfield - iOS

> ID：12967291
> 
> 赞同：13
> 
> 时间：2012-10-19T04:12:24.787
> 
> 标签：ios, uitextfield, uisearchbar, quartz-core

我正在尝试自定义 UISearchbar 的文本字段。下图显示了我完成了一半的工作。 ![强文本](../Images/88bd8676eaaed9ff24fdeb829710e358.png)

我有子类 UISearchbar 并从我的视图控制器中调用它。我正在尝试从文本字段中删除那些深灰色线条。下面是添加到视图控制器子视图的 UISearchbar 的实现。

```
searchbar = [[SearchBar alloc] initWithFrame:CGRectMake(35,78, 250, 17)];
searchbar.backgroundColor = [UIColor clearColor];
searchbar.layer.borderColor = [[UIColor clearColor] CGColor];
searchbar.layer.borderWidth = 0;

for(UIView *view in searchbar.subviews){
    if([view isKindOfClass:[UITextField class]]){
        UITextField *tf= (UITextField *)view;
        tf.layer.borderColor = [[UIColor clearColor] CGColor];
        tf.delegate = self;
        break;
    }
}
[self.view addSubview:searchbar];
searchbar.delegate = self; 
```

UISearchBar 子类：

```
 - (id)initWithFrame:(CGRect)frame
  {
   self = [super initWithFrame:frame];
if (self) {
      // Initialization code
     }
     return self;
}

-(void)layoutSubviews{
     UITextField *searchField;
     [[[self subviews] objectAtIndex:0] removeFromSuperview];
     [self setTintColor:[UIColor clearColor]];
     self.clipsToBounds = YES;
     NSUInteger numViews = [self.subviews count];
     for(int i = 0; i < numViews; i++) {
        if([[self.subviews objectAtIndex:i] isKindOfClass:[UITextField class]]) { 
            searchField = [self.subviews objectAtIndex:i];
             searchField.leftViewMode = UITextFieldViewModeNever;
             searchField.backgroundColor = [UIColor clearColor];

        }

    }
    if(!(searchField == nil)) {            
        searchField.backgroundColor = [UIColor clearColor];
        searchField.textColor = [UIColor blackColor];
        searchField.frame = CGRectMake(self.frame.origin.x,self.frame.origin.y,self.frame.size.width,self.frame.size.height-10);

        [searchField setBorderStyle:UITextBorderStyleRoundedRect];

    }

    [super layoutSubviews];

} 
```

我正在尝试实现这样的目标：文本字段不应该有任何边界。图标是扁平化的 UIImageView。

![在此处输入图像描述](../Images/441e953c43f8908b044a1e0ce25a2978.png)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-19T05:39:13.933

这是从 UISearchBar 子视图层次结构中获取文本字段并根据需要设置其属性的简单方法，例如

```
 UITextField *txfSearchField = [searchbar valueForKey:@"_searchField"];
[txfSearchField setBackgroundColor:[UIColor whiteColor]];
    [txfSearchField setLeftView:UITextFieldViewModeNever];
    [txfSearchField setBorderStyle:UITextBorderStyleRoundedRect];
    txfSearchField.layer.borderWidth = 8.0f; 
    txfSearchField.layer.cornerRadius = 10.0f;
        txfSearchField.layer.borderColor = [UIColor clearColor].CGColor; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2014-03-08T06:49:08.847

如果您不想使用未记录的功能或使用图像，请使用以下内容：

```
CGSize size = CGSizeMake(30, 30);
// create context with transparent background
UIGraphicsBeginImageContextWithOptions(size, NO, 1);

// Add a clip before drawing anything, in the shape of an rounded rect
[[UIBezierPath bezierPathWithRoundedRect:CGRectMake(0,0,30,30)
                            cornerRadius:2.0] addClip];
[[UIColor whiteColor] setFill];

UIRectFill(CGRectMake(0, 0, size.width, size.height));
UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

[self.searchBar setSearchFieldBackgroundImage:image forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2019-06-19T15:54:14.747

对于那些仍在寻找答案的人，Apple`searchTextField`在 iOS 13 中向 UISearchBar 添加了该属性。`searchTextField`它是一个继承自 UITextField的[UISeachTextField 。](https://developer.apple.com/documentation/uikit/uisearchtextfield)

```
let searchBar = UISearchBar()
var searchField : UITextField
if #available(iOS 13.0, *) {
    searchField = searchBar.searchTextField
} else {
    searchField = //One of the other methods listed
} 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-10-30T09:06:51.893

**iOS 13.x 和 Swift 5.x**：

执行以下操作以访问`UITextField`in `UISearchBar`。

```
extension UISearchBar {

    /// Returns the`UITextField` that is placed inside the text field.
    var textField: UITextField {
        if #available(iOS 13, *) {
            return searchTextField
        } else {
            return self.value(forKey: "_searchField") as! UITextField
        }
    }

} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-01-16T11:02:30.497

从 IOS-5 开始，您有外观代理，请参阅：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UISearchBar_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISearchBar_Class/Reference/Reference.html)（有两个部分称为“自定义外观” "，同时检查）。

这是一个工作示例，它修改了应用程序中的所有 UISearchBars：

```
[[UISearchBar appearance] setSearchFieldBackgroundImage:[UIImage imageNamed:@"text_box"] forState:UIControlStateNormal];
[[UISearchBar appearance] setImage:[UIImage imageNamed:@"search_icon"] forSearchBarIcon:UISearchBarIconSearch state:UIControlStateNormal];
mysearchBar.tintColor = [UIColor whiteColor]; 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-04-01T23:52:03.573

**实施变化抗性和高性能**

对于任何阅读本文并想知道如何在 Swift 中轻松访问搜索栏的文本字段的人；您可以使用以下代码扩展*UISearchBar*以添加*textField*属性，该代码可抵抗底层实现更改并缓存找到的结果，因此它是高性能的。

```
import UIKit

private var foundTextFieldAssociationKey = UInt8()

extension UISearchBar {

  var textField: UITextField {
    get {
      let value = objc_getAssociatedObject(self, &foundTextFieldAssociationKey) as? UITextField

      if value == nil {
        let findInView = (UIView) -> UITextField? = { view in
          for subview in view.subviews {
            if let textField = (subview as? UITextField) ?? findInView(subview) {
              return textField
            }
          }
          return nil
        }

        guard let foundTextField = findInView(self) else {
          fatalError("UISearchBar doesn't seem to have a UITextField anywhere in the view hierarchy")
        }

        textField = foundTextField
        return foundTextField
      }

      return value!
    }
    set {
      objc_setAssociatedObject(self, &foundTextFieldAssociationKey, newValue, objc_AssociationPolicy.OBJC_ASSOCIATION_ASSIGN)
    }
  }

} 
```

如果您想更改属性的名称，请确保不要将其更改为*searchField*。这会让你的搜索栏变得混乱。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-09-27T14:40:27.580

现在在 iOS 13 中，您可以`searchTextField`直接访问文本字段。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-09-07T13:45:36.793

**简短而简单**

```
extension UISearchBar {
    var textField:UITextField {
        guard let txtField = self.value(forKey: "_searchField") as? UITextField else {
            assertionFailure()
            return UITextField()
        }
        return txtField
    }
} 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-12-22T19:18:42.950

我发现对于 iOS 10 我需要这样做（从上面借来并快速适应）

```
extension UISearchBar {
    var textField: UITextField? {

    func findInView(_ view: UIView) -> UITextField? {
        for subview in view.subviews {
            print("checking \(subview)")
            if let textField = subview as? UITextField {
                return textField
            }
            else if let v = findInView(subview) {
                return v
            }
        }
        return nil
      }

      return findInView(self)
    }
 } 
```

# java - 我的温度转换代码有什么问题？

> ID：12967293
> 
> 赞同：1
> 
> 时间：2012-10-19T04:12:56.137
> 
> 标签：java, user-interface, text, converter, temperature

我正在编写一个可以做很多事情的程序，但其中之一是将摄氏度转换为华氏度。在我这样做之后，我决定允许反过来，所以这就是我所做的。当我将摄氏度转换为华氏度时，我得到了正确的答案，但由于某种原因，当我将华氏度转换为摄氏度时，我得到的答案略有偏差。这是我的代码：

```
String celcius = jTextArea3.getText();
String fahren = jTextArea7.getText();
if (fahren.equals("")) {
    double tempFahr;
    double Input = Double.parseDouble(jTextArea3.getText());

     tempFahr = Input * 9 / 5 + 32;
        jTextArea7.setText(tempFahr + "");
}
else
{
    double tempCelc;
    double Input = Double.parseDouble(jTextArea7.getText());

     tempCelc = (Input -32) * 5 / 9;
        jTextArea3.setText(tempCelc + "");
} 
```

这是简单的代码，但我想知道它是否可能是我没有看到的非常小的东西。我想这可能是我的公式，但我很确定不是，我已经调查过了。任何人都可以帮忙吗？

我得到的答案的一个例子是：1 摄氏度 = 33.8 华氏度 33.8 华氏度 = 0.9999999999999984 摄氏度

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T04:20:21.810

因为 Java 使用浮点数的 IEEE 二进制表示，所以浮点计算几乎从不“精确”。问题是 33.8 不能准确表示，它在内部是 33.799999999999996 或其他东西。当您将其转换回摄氏温度时，您会得到一个略小于 1 的数字。

与往常一样，相关参考资料是[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T04:24:22.200

@Greg 是对的

你只需要做一些四舍五入：

```
final int precision = 6 // try some different values here, from 2 to... 8?

jTextArea3.setText(String.format("%." + precision + "f", tempCelc)); 
```

无论如何 - 不要担心你的值很好，但是要比较（或打印，这是当前的用例）它们，你需要一些 epsilon/precision，因为 - 再次：*浮点计算几乎永远不会“精确”*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T04:15:58.377

`Double.toString()`使用（或其隐式等效项）时，浮点不准确性将非常明显。而是更喜欢[`String.format("%.3f", value)`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.util.Locale,%20java.lang.String,%20java.lang.Object...%29)或[您选择的精度](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html#syntax)。

旁注：在 Java 中，无论您分配的数据类型如何，将整数除以整数都会产生整数。重构代码时要小心，因为看起来相似的东西可能会无意中舍入结果中的一个因素。[（有关详细信息，请阅读Java 语言规范本节的](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.17.2)第二段。）

```
double test = 3 / 2;   // yields 2
double test = 3 / 2.0; // yields 1.5 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T04:16:08.567

值的细微差别仅仅是浮点不准确的结果。十进制值不能表示为二进制的精确值（计算机内部使用的值），导致在 10^-16 左右的水平上存在极小的差异。[本文](http://effbot.org/pyfaq/why-are-floating-point-calculations-so-inaccurate.htm)很好地涵盖了这个主题（尽管使用 Python）。

# django - Django distinct 和 order_by，annotate 不起作用

> ID：12967294
> 
> 赞同：0
> 
> 时间：2012-10-19T04:13:13.950
> 
> 标签：django, django-models

我有 2 张桌子说

```
class A(models.Model):
    A_version = models.DecimalField(max_digits=4, decimal_places=0)
    A_name = models.CharField(max_length=32, blank=True)
    A_type    = models.CharField(max_length=32, blank=True)
    unique_together(A_version,A_name)

class B(models.Model):
    B_version = models.ForeignKey(A)
    B_name    = models.ForeignKey(A)
    last_reported_time= models.DecimalField(max_digits=4, decimal_places=0)
    unique_together(B_version,B_name)

obj = B.objects.filter(B_name__A_type="Vendor").
        values('B_name','B_version').annotate(Max('last_reported_time')).
        order_by('B_name','B.B_version') 
```

`last_reported`不是唯一的。

现在我有2个问题。

1.  当我使用`distinct`代替时，`annotate`我无法获得不同的值。所以我`annotate`按照一些人的建议使用。我仍然得到非不同的值。如何获得不同的值？

2.  如果我查看上述查询的原始 sql 查询，它将被翻译成`order_by(B.B_name and A.B_version)`. 我怎样才能得到`order_by(B.B_version)`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:24:11.377

正如我在之前对您的问题的答复中提到的，这不是一个好的模型设计。由于 A_Name 和 A_Version 在 A 类中是唯一的，因此您应该在 B 类中创建外键以引用 A 类的 ID。如果这样做，您的所有查询都会容易得多，因此您不必发布所有这些问题在这里。

就这样，最后一次。删除 B 类中的 Name 和 Version 外键：

```
class A(models.Model):
    A_version = models.DecimalField(max_digits=4, decimal_places=0)
    A_name = models.CharField(max_length=32, blank=True)
    A_type    = models.CharField(max_length=32, blank=True)

    class Meta:
        unique_together(A_version,A_name)

class B(models.Model):
    a = models.ForeignKey(A) #Reference the A.id
    last_reported_time= models.DecimalField(max_digits=4, decimal_places=0)

obj = A.objects.filter(A_type="Vendor").annotate(last_time=Max('B__last_reported_time')).
    order_by('A_name','A_version') 
```

**更新：**由于无法更改模型，请尝试以下操作：

```
class A(models.Model):
    A_version = models.DecimalField(max_digits=4, decimal_places=0)
    A_name = models.CharField(max_length=32, blank=True)
    A_type    = models.CharField(max_length=32, blank=True)

    unique_together(A_version,A_name)

class B(models.Model):
    B_version = models.ForeignKey(A, to_field='A_version') #Note the to_field
    B_name    = models.ForeignKey(A, to_field='A_name')   #Note the to_field     
    last_reported_time= models.DecimalField(max_digits=4, decimal_places=0)

    unique_together(B_version,B_name)

obj = A.objects.filter(A_type="Vendor").
    values('A_name','A_version').annotate(last_time=Max('B__last_reported_time')).
    order_by('A_name','A_version') 
```

# php - 未选择获取错误数据库

> ID：12967295
> 
> 赞同：0
> 
> 时间：2012-10-19T04:13:18.910
> 
> 标签：php, mysql, php4

代码：

```
<?php
session_start();
$_SESSION['msg'] = "";
$con = mysql_connect('localhost','me','omglol');
mysql_select_db('test',$con);
$q = mysql_query(sprintf("select * from UserTable where (nick=\"%s\") AND (pass=SHA1(\"%s\"))",$_POST['nick'],$_POST['pass']),$con) or die(mysql_error()); 
```

这对我来说是正确的。是的，我知道“测试”存在。并包含用户表。

首先，感谢摆脱将 php4 添加到我忘记的标签中:(

根据 Laser_wizard 的建议，我执行了以下操作：（完整代码）：

```
<?php
session_start();
$_SESSION['msg'] = "";
$con = mysql_connect('localhost','me','omglol');
if(!$con)
{
    die("The connection to mysql server is not being made.");
}
$db = 'test';
$selected = mysql_select_db($db,$con);
if(!$selected)
{
    die(sprintf("Cannot use database %s.",$db));
}
//$q = mysql_query(sprintf("select * from UserTable where (nick=\"%s\") AND (pass=SHA1(\"%s\"))",$_POST['nick'],$_POST['pass']),$con) or die(mysql_error());
$q = mysql_query("select * from UserTable",$con) or die("The query statement still isn't working");
$row = mysql_fetch_assoc($q);
$dest=0;
if(mysql_num_rows($q)==0)
{
    //$testn = mysql_query(sprintf("select * from UserTable where nick=(\"%s\")",$_POST['nick']),$con);
        $testn = mysql_query("select * from Category",$con) or die("The 2nd query statement still isn't working");
        if(mysql_num_rows($testn)==0)
        {
               $_SESSION['msg'] = "Nick ".$_POST['nick']." was not found. Check spelling or <a href=\\\"register.php\\\">register</a>";
        }
        else
        {
                $_SESSION['msg'] = "Password incorrect";
        }
        if(isset($_SESSION['attempts']))
        {
                $_SESSION['attempts'] = $_SESSION['attempts'] + 1;
        }
        else
        {
                $_SESSION['attempts'] = 1;
        }
    mysql_free_result($q);
    mysql_free_result($testn);
        mysql_close($con);
    $dest = 'Location:http://cs4.sunyocc.edu/~me/onestopshop/login.php';
}
else
{
        $_SESSION['nick'] = $_POST['nick'];
    $_SESSION['email'] = $row['email'];
    mysql_free_result($q);
    mysql_close($con);
    $dest = 'Location:http://cs4.sunyocc.edu/~me/onestopshop/index.php';
}
header($dest);
exit();
?> 
```

与上述相同的错误。所以设置了 $con 并且 $selected 读取为 true，所以我很困惑接下来要检查什么。我猜 mysql_select_db($db,$con); 也不是 $testn 仍然无法正常工作但仍然阅读正确吗？我很困惑下一步该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:19:35.580

输入一些 die 语句来测试连接并确保它正在建立。除此之外，我会说注释掉您的查询行，看看这是否会导致问题。

```
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Not connected : ' . mysql_error());
}

// make foo the current db
$db_selected = mysql_select_db('foo', $link);
if (!$db_selected) {
    die ('Can\'t use foo : ' . mysql_error());
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:24:47.893

如果您的 PHP >= 5.1.0 忘记这些说明并使用 PDO：

```
<?php
    $conn = new PDO('mysql:host=localhost;dbname=test', 'user', 'pass');
    foreach($conn->query('SELECT * from TEST') as $row) {
        print_r($row);
    }
?> 
```

# java - Android动画错误

> ID：12967297
> 
> 赞同：1
> 
> 时间：2012-10-19T04:13:27.180
> 
> 标签：java, android

因此，当我单击它时，它将执行第一个动画，该动画向右滑动并停留在那里，然后它将自动执行第二个动画并向后滑动

这就是它应该去的方式

你点击它，它会向右滑动。当您再次单击它时，它将向左滑回。

我的代码：

```
 public void sideBar()
   {

       ImageView sidebar = (ImageView)findViewById(R.id.sidebar);

       if(out == 0)
       {
       mSlideInRight = AnimationUtils.loadAnimation(this, R.anim.slide_in_right);
       mSlideInRight.setFillAfter(true);
       sidebar.startAnimation(mSlideInRight);
       out= 1;
       }

       if(out == 1)
       {
               mSlideInLeft = AnimationUtils.loadAnimation(this, R.anim.slide_in_left);
               sidebar.startAnimation(mSlideInLeft);
               out=0;
       }

   } 
```

这部分是当你点击它时它处理的地方

```
public void onClick(View v) {

        switch(v.getId())
        {

            case R.id.sidebar:
                sideBar();
            break;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:18:23.043

改变你的

```
if (out == 1) 
```

条件为

```
else if (out == 1) 
```

在当前形式下，代码将在完成第一个块后执行第二个块。毕竟，你只是明确地设置了`out = 1`.

# java - 在android中使用soap webservice创建登录表单

> ID：12967301
> 
> 赞同：1
> 
> 时间：2012-10-19T04:14:23.123
> 
> 标签：java, android, mysql, web-services, soap

嗨，我必须在调用soap webservice的android中开发一个登录表单。

这是我的网络服务代码：

```
public class XcartLogin {
public String authentication(String userName,String password){

String retrievedUserName = "";
String retrievedPassword = "";
String status = "";
try{

Class.forName("com.mysql.jdbc.Driver");
Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/xcart432-pro","root","");
PreparedStatement statement =  con.prepareStatement("SELECT * FROM xcart_customers WHERE login = '"+userName+"'");
ResultSet result = statement.executeQuery();

while(result.next()){
retrievedUserName = result.getString("login");
retrievedPassword = result.getString("password");
}

if(retrievedUserName.equals(userName)&&retrievedPassword.equals(password)&&!(retrievedUserName.equals("") && retrievedPassword.equals(""))){
status = "Success";

}

else {
status = "Login fail!!!";
}

}

 catch(Exception e){
 e.printStackTrace();
}
return status;

}

} 
```

它对我来说是成功的。如果我必须运行 android 应用程序并输入正确的登录详细信息，则表示其显示成功消息，输入错误信息表示显示登录失败消息。

但我希望需要 o/p 是，

如果登录成功意味着不应该显示成功消息。必须输入错误信息意味着应该显示登录失败消息。

我如何开发网络服务代码。请帮助我。

# .net - 部署/构建正常工作的 Orchard CMS 网站的问题

> ID：12967303
> 
> 赞同：2
> 
> 时间：2012-10-19T04:15:01.237
> 
> 标签：.net, asp.net-mvc, iis, orchardcms, webdeploy

我在如何将我的网站移动到我的主机@ [https://my.discountasp.net](https://my.discountasp.net)方面遇到了困难。我的主要问题是我以前的所有项目都是基于内部网的。我从来没有直接发布到网络上

在本地，我的开发机器是运行 SQL Server 2008 R2 的 Windows 8 Server

我上周开始使用最新版本的 Orchard CMS。我创建了一个工作网站，其内容从 IIS7 运行，`http://localhost/orchard/`所以我认为它可以从 IIS7 运行。Orchard 在我的 2008 R2 数据库中创建了用于存储内容的表，所有这些都是一种享受

现在我想将网站和数据库部署到网络主机 discountasp。我订阅了 discountasp.net 并拥有我需要的所有设置。我的问题是移动网站。

到目前为止，我尝试使用 Visual Studio 2010 加载网站。然后从解决方案资源管理器顶部右键单击并输入“http://retiremovec.eweb701.discountasp.net”。

VS 2010 尝试构建，我得到：

“错误 1 ​​在应用程序级别之外使用注册为 allowDefinition='MachineToApplication' 的部分是错误的。此错误可能是由于虚拟目录未在 IIS 中配置为应用程序。C:\inetpub\wwwroot\orchard\Modules \Orchard.Autoroute\Specs\bin\Hosting\Orchard.Web\Web.config 48
"

我已经在网上查找了这个错误，但一无所获。我想我缺少一些基本的东西。如果我可以构建这个网站，只需右键单击即可完成网站部署，然后将网站发布到目标位置“http://retiremovec.eweb701.discountasp.net”

也许我不应该在 Visual Studio 中加载网站，我应该使用其他东西。我只是习惯于在 VS2010 中完成所有工作。但是这次我把它全部留给了 Orchard，CMS 网站的结果是 gr8，但现在我被困住了

任何评论表示赞赏，问候，J

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T17:03:29.533

您要部署的是 Orchard.Web，而不是整个解决方案。如果您从解决方案资源管理器中右键单击 Orchard.Web，您将看到发布选项。从那里开始有很多选择，包括创建部署包的可能性（这是我的偏好，因为我发现它更灵活且不那么“神奇”）。但真正的关键是看 Orchard.Web 而不是解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T04:56:11.740

*永远*不要将 Orchard 应用程序作为网站打开。是麻烦的意思。

有两种方法可以将您的 Orchard 应用程序从开发机器部署到外部服务器：

1.  打开解决方案文件并使用 VS（2010 或 2012）中的 WebDeploy 将其部署到所需的服务器。
2.  如果由于某种原因上述方法对您不起作用，请使用提供的 ClickToBuild.cmd 脚本构建它，并将 /build/Stage 上的内容复制到您的网络服务器（通过 FTP 或其他方式）。[这里](http://docs.orchardproject.net/Documentation/Building-and-deploying-Orchard-from-a-source-code-drop)有详细描述。

# c++ - 插入到 Trie

> ID：12967309
> 
> 赞同：0
> 
> 时间：2012-10-19T04:15:54.807
> 
> 标签：c++, insert, trie

我正在尝试为我的 trie 结构实现插入函数，这是我的结构

```
struct Trie {
  bool isWord;
  char letter;
  Trie *letters[27];
  Trie() {
    isWord = false;
    for ( int i = 0; i < NumChars; i += 1 ) {
      letters[i] = NULL;
    }
  }
}; 
```

这就是我尝试的插入功能

```
void insertin( Trie &node, const std::string &word )
  {
    int i = 0;
    while (word[i] != '\0'){
      int c = word[i] - 'a';
      node.letters[c]->letter = word[i];
      node = node.letters[c];
      i++;
    }
    node.isWord = true;
  } 
```

**设置时“=”**运算符出现错误，我`node = node.letters[c];`不能使用**“=”**分配相同的类型吗？还是我必须超载它。还有一个候选错误，任何建议或调试帮助都会有所帮助！..还有我的完整程序[http://ideone.com/MqcBo](http://ideone.com/MqcBo)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:57:49.923

node 的类型是“Trie”，node.letters[c] 的类型是“Trie*”。尝试 node = *(node.letters[c]) - 但确保 node.letter[c] 不为 NULL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:19:43.557

我不认为您只想将节点设置为等于您要插入的项目。我不清楚节点到底是什么，它是一个列表、字典还是其他东西。如果它是一个字典（这是实现尝试的一种方法），那么显然您将想要更新键值对，而不仅仅是替换条目。如果它是一个列表，您可能希望附加该条目而不是替换它。

编辑：此外，您似乎从未在节点上创建新尝试，您只有在顶层有 27 次尝试的数组，当您深入一层时会发生什么？

# c++ - asio .async_* 不会运行，除非主线程调用 io_service.run

> ID：12967316
> 
> 赞同：0
> 
> 时间：2012-10-19T04:16:25.907
> 
> 标签：c++, boost-asio, stdthread

我最近一直在玩 boost asio 和一些新的 c++11 结构。这是导致意外行为的示例代码部分（至少对我而言）。

```
void Server::startAccept()
{
    connections_.push_back(std::make_shared<Connection>(io_service_));
    acceptor_.async_accept(connections_.back()->socket(), std::bind(&Server::accept_handler, this, connections_.back(), std::placeholders::_1));
}

void Server::accept_handler(std::shared_ptr<Connection> con, const boost::system::error_code& ec)
{
    startAccept();

    if (!ec) {
        con->start();
    }
} 
```

在调用 Server::startAccept 之前，我创建了一个 io_service::work 实例和一个名为 io_service_.run() 的 std::thread 池。在我调用 startAccept 之后，主线程只是等待命令行输入。

我希望我的线程池中的一个线程在连接启动时运行 Server::accept_handler。这不会发生。相反，我必须从主线程调用 io_service_.run() 。

现在我玩了一会儿，发现我可以通过这样做来实现所需的行为：

```
void Server::startAccept()
{
    connections_.push_back(std::make_shared<Connection>(io_service_));
    io_service_.post([this]() { acceptor_.async_accept(connections_.back()->socket(), std::bind(&Server::accept_handler, this, connections_.back(), std::placeholders::_1)); });
}

void Server::accept_handler(std::shared_ptr<Connection> con, const boost::system::error_code& ec)
{
    startAccept();

    if (!ec) {
        con->start();
    }
} 
```

.async_* 操作和 io_service.post 有什么区别？

**编辑：定义 BOOST_ASIO_ENABLE_HANDLER_TRACKING**

当我编译并运行我的程序，然后使用我包含的第一个代码块连接到服务器时，这是输出：

```
@asio|1350656555.431359|0*1|socket@00A2F710.async_accept 
```

当我运行包含的第二个代码块并连接到服务器时，我得到以下输出：

```
@asio|1350656734.789896|0*1|io_service@00ECEC78.post
@asio|1350656734.789896|>1|
@asio|1350656734.789896|1*2|socket@00D0FDE0.async_accept
@asio|1350656734.789896|<1|
@asio|1350656756.150051|>2|ec=system:0
@asio|1350656756.150051|2*3|io_service@00ECEC78.post
@asio|1350656756.150051|>3|
@asio|1350656756.150051|2*4|socket@00EE9090.async_send
@asio|1350656756.150051|3*5|socket@00D0FDE0.async_accept
@asio|1350656756.150051|2*6|socket@00EE9090.async_receive
@asio|1350656756.150051|<3|
@asio|1350656756.150051|>4|ec=system:0,bytes_transferred=54
@asio|1350656756.150051|<2|
@asio|1350656756.150051|<4|
@asio|1350656758.790803|>6|ec=system:10054,bytes_transferred=0
@asio|1350656758.790803|<6| 
```

**编辑 2：线程创建洞察力**

```
for (int i = 0; i < NUM_WORKERS; i++) {
    thread_pool.push_back(std::shared_ptr<std::thread>(new std::thread([this]() { io_service_.run(); })));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:30:01.777

该`io_service.run`函数是实际的事件循环，它的基本作用是`io_service.post`在循环中调用。

**编辑：**从[`io_service.post`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/io_service/post.html)文档中：

> 请求 io_service 调用给定的处理程序并立即返回。

和

> `io_service`保证处理程序只会在当前调用成员函数的线程中被`run()`调用。`run_one()``poll() or poll_one()`

你*应该*做的是实现你自己的事件循环，调用[`io_service.run_one`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/io_service/run_one.html)，或者调用[`io_service.run`](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio/reference/io_service/run.html)让Boost处理事件循环。*从哪个*线程运行事件循环并不重要，所有事件处理程序都将从您运行事件循环的线程调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:27:23.810

如果您没有忘记为池中的每个线程调用 io_service::run 并且您使用 io_service::work 来避免退出 io_service::run 循环，那么您在第一种情况下的代码是绝对正确的。

这是工作示例（我忽略了连接处理和程序的正确关闭）

```
class Connection
{
public:
    Connection(boost::asio::io_service & io_serivce) : socket_(io_serivce) {}
    boost::asio::ip::tcp::socket & socket() { return socket_; }
private:
    boost::asio::ip::tcp::socket socket_;
};

class Server
{
public:
    Server(boost::asio::io_service & io_serivce, const std::string & addr, const std::string & port) : io_service_(io_serivce), acceptor_(io_service_) {
        boost::asio::ip::tcp::resolver resolver(io_service_);
        boost::asio::ip::tcp::resolver::query query(addr, port);
        boost::asio::ip::tcp::endpoint endpoint = *resolver.resolve(query);
        acceptor_.open(endpoint.protocol());
        acceptor_.set_option(boost::asio::ip::tcp::acceptor::reuse_address(true));
        acceptor_.bind(endpoint);
        acceptor_.listen();
        startAccept();
    }

    void startAccept(){
        connections_.push_back(boost::make_shared<Connection>(  boost::ref(io_service_) ));    
        acceptor_.async_accept(connections_.back()->socket(), boost::bind(&Server::accept_handler, this, connections_.back(), _1) );
    }

    void Server::accept_handler(boost::shared_ptr<Connection> con, const boost::system::error_code& ec)
    {
        std::cout << "start connection" << std::endl;
        startAccept();
    }

private:
    boost::asio::io_service & io_service_;
    boost::asio::ip::tcp::acceptor acceptor_; 
    std::vector< boost::shared_ptr<Connection> > connections_;
};

int main(int argc, char * argv[])
{
    // thread pool
    boost::thread_group threads_;   
    boost::asio::io_service io_service_;
    boost::asio::io_service::work work_(io_service_);

    const size_t kThreadsCount = 3;
    for (std::size_t i = 0; i < kThreadsCount; ++i) {
        threads_.create_thread(boost::bind(&boost::asio::io_service::run, &io_service_));
    }  

    Server s(io_service_, "127.0.0.1", "8089");

    char ch;
    std::cin >> ch;
    return 0;
} 
```

# xcode - 按钮点击后一直变蓝

> ID：12967318
> 
> 赞同：0
> 
> 时间：2012-10-19T04:16:39.200
> 
> 标签：xcode, ios5, button, uibutton, settings

在我的应用程序中，我有一个文本字段，然后在其后面有一个按钮（占据整个屏幕），这样一旦点击按钮，文本字段的键盘就会消失。我的问题是，如何配置按钮属性以使按钮在被点击时不会闪烁蓝色？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:22:38.923

可能您正在使用超链接作为按钮，并且一旦访问超链接的颜色就会改变，因此您可以使用 css 更改它

```
a:link {color:#FF0000;}      /* unvisited link */
a:visited {color:#00FF00;}  /* visited link */
a:hover {color:#FF00FF;}  /* mouse over link */
a:active {color:#0000FF;}  /* selected link */ 
```

# javascript - Firefox Websocket 双连接

> ID：12967326
> 
> 赞同：1
> 
> 时间：2012-10-19T04:17:40.200
> 
> 标签：javascript, html, firefox, websocket

背景：写一个websocket。在 Chrome 中运行良好。单连接。在 Firefox 中工作正常，但它建立了两个连接，我不知道为什么。相同的 javascript，相同的网页，相同的套接字服务器。

客户端JS：

```
var ws;
doWebSocketSetup();
function doWebSocketSetup(){
    console.log('Connecting...');
    ws=new WebSocket('ws://mysocketserver.com:9300/demo');

    ws.onopen=function(){
        console.log('Connected!')
        socketSend('connect',sessionStorage.user);
        if(!sessionStorage.announce){
            socketSend('login',sessionStorage.user);
            sessionStorage.announce=true;
        }
        socketSend('view',window.location.href);
        setTimeout(function(){
            processQueue();
        },100);
    }
    ws.onmessage=function(e){
        if(e.data!='ok'){
            $.msg(e.data,{header:'Server Message',live:10000});
            console.log('Server: '+e.data);
        }
        processQueue();
    }
    ws.onclose=function(){
        console.log('Disconnected');
    }
}
var sendQueue=new Array();
function socketSend(action,data){
        var payload = new Object()
        payload.action = action
        payload.client = sessionStorage.user
        payload.data = data
        sendQueue.unshift(payload);
}
function processQueue(){
    if(sendQueue.length==0)
        return;
    var payload=sendQueue.pop()
    console.log('Sending: '+JSON.stringify(payload));
    ws.send(JSON.stringify(payload))
} 
```

现在 Firefox 上的服务器控制台输出：

```
2012-10-18 20:58:53 [info] [client 68.99.226.57:53079] Connected 94e568176299729fa8669c512fdb107d 
2012-10-18 20:58:53 [info] [client 68.99.226.57:53080] Connected 457eb971eabaeba6b6afd637755ce53c 
2012-10-18 20:58:53 [info] [client 68.99.226.57:53080] Performing handshake 
2012-10-18 20:58:53 [info] [client 68.99.226.57:53080] Handshake sent 
2012-10-18 20:58:54 [info] [client 68.99.226.57:53080] _actionConnect 
2012-10-18 20:58:54 [info] [client 68.99.226.57:53080] _actionView 
2012-10-18 20:58:58 [info] [client 68.99.226.57:53079] Disconnected - 94e5681762 99729fa8669c512fdb107d 
```

在 Chrome 上：

```
2012-10-18 21:09:17 [info] [client 68.99.226.57:53161] Connected 3906f16fa4037cbb08a8a5d1d6094cea
2012-10-18 21:09:17 [info] [client 68.99.226.57:53161] Performing handshake
2012-10-18 21:09:17 [info] [client 68.99.226.57:53161] Handshake sent
2012-10-18 21:09:17 [info] [client 68.99.226.57:53161] _actionConnect
2012-10-18 21:09:17 [info] [client 68.99.226.57:53161] _actionView 
```

您会在 Chrome 上看到 SINGLE 连接，并调用适当的握手和操作。在 Firefox 上，您同时有两个连接，一个握手并执行操作（这会在浏览器上执行预期的操作），但第二个连接在 5 秒后被踢出。这只是Firefox的事情吗？我没有在 Firebug 中显示两个连接，只是一个连接。如果它只是一个 Firefox 的东西，我可以忍受它，因为确实会发送和接收正确的数据，但如果是这种情况，我会对他们皱眉头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:43:14.393

这是[Firefox 15](https://bugzilla.mozilla.org/show_bug.cgi?id=789018)中的一个错误，它创建了一个它从不使用的推测连接（实际上不能，因为它是 WebSocket 连接而不是 HTTP 连接）。

它已在 Firefox 16 中修复。

# windows - 多线程 Linux 与 Windows 一对一 多对多 一对一

> ID：12967327
> 
> 赞同：-1
> 
> 时间：2012-10-19T04:17:45.240
> 
> 标签：windows, linux, multithreading, ubuntu, windows-7

不同的操作系统使用哪些多线程方法以及它们为何重要：

```
Multithreading Models

    Many-to-One - many user threads to one kernel thread
    One-to-One - each user thread is mapped to a kernel thread
    Many-to-Many - Many user threads to smaller or equal # of kernel threads 
```

这就是我对多线程模型的了解。

*   Solaris 使用多对一
*   Linux & Windows 系列（至少对于 XP，不确定 Win7）使用一对一
*   IRIX、HP-UX 和 Tru64 UNIX（Solaris v9 之前）使用多对多

为什么它们很重要？

1.  响应性 - 在一个线程中浏览网页，在另一个线程中加载图像
2.  资源共享 - 允许同一地址空间中的多个活动线程
3.  经济 - 创建进程的内存和资源成本很高，而线程共享进程的资源（Solaris 创建进程比线程慢 30 倍）
4.  可扩展性 - 在多处理器中，线程可以在不同的处理器上并行运行，单线程进程只能在一个处理器上运行，而不管有多少处理器存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:02:48.650

问题不是，什么操作系统使用什么模型。**如果**用户应用程序使用线程（或类似的东西），这些线程可以以不同的方式映射到内核进程。如果反过来，操作系统提供线程（并且大多数提供，其中包括您命名的操作系统），那么用户可见的线程可能与内核线程相同。但是，我总是可以使用选择不同映射的库/运行时系统（vm）/编译器。

在某些情况下会出现差异。例如，假设所有用户可见的线程都由作为单个进程/线程运行的运行时系统模拟。在这种情况下，类似的系统调用`lock`可能会阻塞这个内核进程，从而阻塞这个应用程序的**所有**用户线程。为了避免这种情况，运行时通常会拦截 cerain 调用并关心自己。

这是一般情况。详细一点，可能会稍微复杂一些。例如，如果您编写使用 GUI 的 WIndows 程序，您必须了解编程模型，尤其是与事件循环相关的内容。此外，除了进程和线程之外，Windows 还提供*作业*和*纤*程作为执行单元（或更准确地说：考虑用于调度和资源管理的实体）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-19T12:52:26.253

回答了自己的问题，编辑了原始内容：

这就是我对多线程模型的了解。

Solaris 使用多对一 Linux 和 Windows 系列（至少对于 XP，不确定 Win7）使用一对一 IRIX、HP-UX 和 Tru64 UNIX（Solaris v9 之前）使用多对多 为什么他们是重要的？

响应性 - 在一个线程中浏览网页，在另一个线程中加载图像资源共享 - 允许在同一地址空间中进行多个活动线程经济 - 用于创建进程的内存和资源是昂贵的，而线程共享一个进程的资源（Solaris 创建进程比创建进程慢 30 倍）线程）可扩展性 - 在多处理器中，线程可以在不同的处理器上并行运行，单线程进程只能在一个处理器上运行，而不管有多少处理器存在

# arrays - 字符串距离数组的良好指标

> ID：12967329
> 
> 赞同：0
> 
> 时间：2012-10-19T04:17:55.583
> 
> 标签：arrays, algorithm, text, language-agnostic, levenshtein-distance

我必须数组，S＆T，包含单词（小写，修剪，没有变音符号）。字数可以不同。（大部分数据是一种专有名词，比较短（<5））

我需要找到一个好的指标（及其实现，甚至可能是研究论文），它允许计算这些数组的相似度

到目前为止我的一些想法：

*   对两个数组中出现的所有单词进行评分
*   对两个数组中出现在同一位置的所有单词进行评分
*   评分最长的公共序列
*   以上 + 考虑到索引的相对位置（在开始时更重要）
*   使用单词而不是字符的某种类型的 levensthein（插入/删除计数）

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:33:50.553

对我来说，它看起来像是使用***词袋***模型 [http://en.wikipedia.org/wiki/Bag-of-words_model对文档进行建模](http://en.wikipedia.org/wiki/Bag-of-words_model)

根据您的应用程序，您可以使用不同的标准来比较两个***词袋***特征向量，就像您在应用程序中所说的那样。此外，还有基于静态学习不同词/句之间关系的模型，例如主题模型[http://en.wikipedia.org/wiki/Topic_model](http://en.wikipedia.org/wiki/Topic_model)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:32:04.053

如果数组相当短，那么您可以在给定一些单词相似度的情况下找到单词的最佳配对。然后在顶部进行一些评分，以确定字符串必须旋转/扭曲多远才能配对最佳配对。这可能是某种乘数，也可能是其他系统。

我们最近在自然语言处理中学习的单词相似度的一个度量是[Levenshtein Distance](http://en.wikipedia.org/wiki/Levenshtein_distance)。还有其他更复杂的变体，例如 Smith-Waterman 算法（链接在 wiki 页面上）。这些算法旨在测量正字法相似性，因此它们用于形态分析，以了解相似词是如何基于外观的。Smith-Waterman 算法表示，如果一个词包含在另一个词中，那么无论后缀/前缀有多长，它们都非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T04:42:48.013

如果字符串是西方名称，Soundex 可能是一个起点。

# wordpress - PayPal IPN 响应调用什么 Woocommerce 功能？

> ID：12967331
> 
> 赞同：6
> 
> 时间：2012-10-19T04:18:32.520
> 
> 标签：wordpress, paypal-ipn, woocommerce

当使用 Woocommerce 完成付款并且 PayPal 发送 IPN 时，我无法确定调用哪个函数。

正在接收 IPN，因为一旦我单击 PayPal 日志文件就会更新`Pay`，但我无法弄清楚正在写入该文件的函数是什么。

我需要弄清楚是否已经有内置功能可以在创建订单**时向管理员发送电子邮件，以及发生****在哪里**。

如果确实存在，我也需要修改它以向其他人发送电子邮件，如果不存在，则我需要自己创建它，但我需要知道将代码放在哪里。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T14:38:03.620

检查文件`/wp-content/plugins/woocommerce/classes/gateways/paypal/class-wc-paypal.php`，我们看到函数内部有一个动作钩子`check_ipn_response`：

```
if ($this->check_ipn_request_is_valid()) :

    header('HTTP/1.1 200 OK');

    do_action("valid-paypal-standard-ipn-request", $_POST); 
```

你可以像这样挂钩：

```
add_action( 'valid-paypal-standard-ipn-request', 'so_12967331_ipn_response', 10, 1 );

function so_12967331_ipn_response( $formdata )
{
    // do your stuff
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-09-10T16:21:27.613

基于@brasofilo 的回答，我必须为当前订单的每种产品做额外的工作。

*注意：我是（取消）序列化数据的新手，所以我不知道为什么我必须取消双引号才能开始`unserialize()`工作。它抛出了一个错误，否则。也许有更好的方法来处理这个问题。*

```
function so_12967331_ipn_response( $formdata ) {

    if ( !empty( $formdata['invoice'] ) && !empty( $formdata['custom'] ) ) {

        if( $formdata['payment_status'] == 'Completed' ) {

            if( is_serialized( $posted['custom'] ) ) {

                // backwards compatible
                // unserialize data
                $order_data = unserialize( str_replace('\"', '"', $posted['custom'] ) );
                $order_id = $order_data[0];

            } else {

                // custom data was changed to JSON at some point
                $order_data = (array)json_decode( $posted['custom'] );
                $order_id = $order_data['order_id'];

            }

            // get order
            $order = new WC_Order( $order_id );

            // got something to work with?
            if ( $order ) {

                // get user id
                $user_id = get_post_meta( $order_id, '_customer_user', true );

                // get user data
                $user = get_userdata( $user_id );

                // get order items
                $items = $order->get_items();

                // loop thru each item
                foreach( $items as $order_item_id => $item ) {

                    $product = new WC_Product( $item['product_id'] );

                    // do extra work...

                }   
            }   
        }
    }
} 
```

# iphone - 为什么我的 iPhone 升级到 iOS 6 后无法在其上进行测试？

> ID：12967332
> 
> 赞同：1
> 
> 时间：2012-10-19T04:18:53.463
> 
> 标签：iphone, xcode, ios-simulator, ios6, simulator

我在 Snow Leopard 上运行 Xcode 4.2。我已将我的 iPhone 4S 升级到 iOS 6，现在它说：

> 没有可配置的 iOS 设备与兼容的 iOS 版本...

每当我尝试在所述设备上执行测试时。

我是否因为升级了 iOS 6 就需要完全升级我的系统、Xcode 等？有什么办法可以在我的 Xcode 4.2 上安装 iOS 6 版本吗？我一直在四处寻找，但遗憾的是没有真正的运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:21:28.843

您必须将 iOS 版本与 SDK 版本匹配，而目标 iOS 版本可以不同。因此，您需要 iOS SDK 6，这可能需要您安装 Xcode 4.4 或 4.5，但您仍然可以创建针对 iOS 5 的项目。这样签名和证书将起作用。

# c# - 设置卸载和添加/删除程序卸载

> ID：12967333
> 
> 赞同：1
> 
> 时间：2012-10-19T04:19:07.570
> 
> 标签：c#, .net, installation, installshield, addremoveprograms

有两种方法可以卸载我的应用程序。

1.  通过使用相同的设置。
2.  *在*控制面板中**添加/删除程序**

 **我们的设置中有一个特殊的卸载程序，它会启动一些特殊的对话框来获取用户输入。以这种方式，根据用户输入进行卸载。但问题是，如果您使用“添加/删除程序”卸载它，则不会执行特殊的卸载过程。有没有办法通过“添加/删除程序”启动特定于应用程序的卸载？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T12:16:06.467

If you are using an MSI-based project, then the Uninstall button will run an uninstallation in passive mode. Thus any actions in your UI or dialog sequence will be skipped. To work around this, it's common to disable the uninstall button (see [ARPNOREMOVE](http://msdn.microsoft.com/en-us/library/windows/desktop/aa367591.aspx)) and require end users to go through the Modify button (which does show the UI) instead.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:17:37.390

您可以使用[WMI](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394582%28v=vs.85%29.aspx)来完成。您可以根据需要自定义卸载程序软件。为此，您必须使用[Win32_Product 类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394378%28v=vs.85%29.aspx)和[卸载方法](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368542%28v=vs.85%29.aspx)。以下是在本地机器上卸载程序的示例：

```
using System;
using System.Management;
using System.Windows.Forms;

namespace WMISample
{
    public class CallWMIMethod
    {
        public static void Main()
        {
            try
            {
                ManagementObject classInstance =
                    new ManagementObject("root\\CIMV2",
                    "Win32_Product.IdentifyingNumber='{EDDE41A3-A870-4D97-A1ED-67FF62AA0552}',Name='MyServiceSetup',Version='1.0.0'",
                    null);

                // No method in-parameters to define

                // Execute the method and obtain the return values.
                ManagementBaseObject outParams =
                    classInstance.InvokeMethod("Uninstall", null, null);

                // List outParams
                Console.WriteLine("Out parameters:");
                Console.WriteLine("ReturnValue: " + outParams["ReturnValue"]);
            }
            catch(ManagementException err)
            {
                MessageBox.Show("An error occurred while trying to execute the WMI method: " + err.Message);
            }
        }
    }
} 
```

*[您可以在错误代码](http://msdn.microsoft.com/en-us/library/windows/desktop/aa368542%28v=vs.85%29.aspx)*（*Windows 桌面应用程序*）处查看返回值。**

# objective-c - 只读属性总是“原子的”吗？

> ID：12967334
> 
> 赞同：6
> 
> 时间：2012-10-19T04:19:10.450
> 
> 标签：objective-c, xcode, thread-safety

有时我们有一个简单的 readOnly 属性，它的值可能会改变

```
@property (readonly) NSFetchedResultsController * FetchController;
@property (readonly) NSFetchRequest * FetchRequest;
@property (readonly) NSPredicate * KeywordPredicate; 
```

我想当值改变时，它是通过某种简单的指针操作在眨眼之间完成的。就像是

```
_FetchRequest = newFetchRequest; 
```

实际的变化过程可能会发生很大变化，但实际变化应该在这一行上。

问题是，这样简单的指针赋值总是原子的吗？如果这一行实际上由几行机器代码组成，并且有人要求这些机器代码之间的属性怎么办？

最后的问题是指针上的简单赋值运算符是否总是原子的。

如果是这样，什么时候它是原子的，什么不是？简单的赋值运算符对于复杂的对象当然不是原子的。

那么这些简单的单行赋值运算符在多大程度上是原子的呢？对于指针和原始类型，会一直如此吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T07:13:47.697

将只读操作视为原子性质是一种常见的误解。不能保证。[原子性保证线程安全](https://stackoverflow.com/questions/12347236/which-is-threadsafe-atomic-or-non-atomic)也是一个常见的误解，但这是一个不同的主题。

只读属性上的原子和非原子之间的区别在于`atomic`（这是默认值，但未声明）保证从只读检索方法返回的值是整数。

也就是说，如果它是一个对象，它将被保留并自动释放。如果它是结构，则将使用适当的锁来确保返回结构的整数值。

请注意，仅仅因为一个属性被公开声明为只读并不排除它被重新声明为内部使用的读写。因此，原子和非原子之间的差异可能非常显着。一个类可能将一个只读属性声明为非原子的*，同时还*记录了该类上的所有 API 必须仅从一个线程中使用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T04:39:01.240

我认为您误解了`atomic`（或更恰当地说，`nonatomic`）在这种情况下的含义。最简单的解释可以在[`objc-accessors.mm`](http://opensource.apple.com/source/objc4/objc4-532.2/runtime/Accessors.subproj/objc-accessors.mm)其本身中找到：

```
id objc_getProperty_non_gc(id self, SEL _cmd, ptrdiff_t offset, BOOL atomic) {
    // Retain release world
    id *slot = (id*) ((char*)self + offset);
    if (!atomic) return *slot;

    // Atomic retain release world
    spin_lock_t *slotlock = &PropertyLocks[GOODHASH(slot)];
    _spin_lock(slotlock);
    id value = objc_retain(*slot);
    _spin_unlock(slotlock);

    // for performance, we (safely) issue the autorelease OUTSIDE of the spinlock.
    return objc_autoreleaseReturnValue(value);
} 
```

可以看到，这里的原子性只指返回对象的有效性。它保留并自动释放以保证在您使用它时不会被释放。

如果`[[obj retain] autorelease]`不执行此操作，则另一个线程可以*设置*该属性，这将导致前一个属性（即您正在使用的属性）被释放并可能被解除分配。

# iphone - iOS - AFNetworking - 了解此代码片段 - 它在做什么？

> ID：12967338
> 
> 赞同：0
> 
> 时间：2012-10-19T04:19:43.133
> 
> 标签：iphone, ios, ios5, ios6, afnetworking

我试图理解我在互联网上找到的一些代码。我试图调整它，以便我可以在我自己的程序中使用它。在我的程序中，我将此作为单例的实例方法。我了解大部分这是在做什么，但没有得到“块”部分。块是干什么用的？在我的实现中，我应该传递什么作为参数来代替 NSSet Photos。我不明白这一点，因为我实际上希望从该位置的服务器“获取”照片。那我送什么？

```
 + (void)photosNearLocation:(CLLocation *)location
                 block:(void (^)(NSSet *photos, NSError *error))block
 {
    NSLog(@"photosNearLocation - Photo.m");
    NSMutableDictionary *mutableParameters = [NSMutableDictionary dictionary];
    [mutableParameters setObject:[NSNumber 
    numberWithDouble:location.coordinate.latitude] forKey:@"lat"];
    [mutableParameters setObject:[NSNumber 
    numberWithDouble:location.coordinate.longitude] forKey:@"lng"];

    [[GeoPhotoAPIClient sharedClient] getPath:@"/photos"
                               parameters:mutableParameters
                                  success:^(AFHTTPRequestOperation *operation, id JSON)
    {
      NSMutableSet *mutablePhotos = [NSMutableSet set];
      NSLog(@" Json value received is : %@ ",[JSON description]);
      for (NSDictionary *attributes in [JSON valueForKeyPath:@"photos"])
      {
        Photo *photo = [[Photo alloc]
                        initWithAttributes:attributes];
        [mutablePhotos addObject:photo];
      }

      if (block) {
        block([NSSet setWithSet:mutablePhotos], nil);
       }
     }failure:^(AFHTTPRequestOperation *operation, NSError *error)
     {
       if (block)
      {
        block(nil, error);
        NSLog(@"Error in Photo.m line 145 %@ ", [error description]);
       }
      }];
      } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:44:32.160

无需为照片集传递任何内容。它是块的参数。调用者的工作是传递一个块，该块将在方法完成一些异步工作时被调用。所以你会这样称呼它：

```
// let's setup something in the caller's context to display the result
// and to demonstrate how the block is a closure - it remembers the variables
// in it's scope, even after the calling function is popped from the stack.

UIImageView *myImageView = /* an image view in the current calling context */;

[mySingleton photosNearLocation:^(NSSet *photos, NSError *error) {
    // the photo's near location will complete some time later
    // it will cause this block to get invoked, presumably passing
    // a set of photos, or nil and an error
    // the great thing about the block is that it can refer to the caller context
    // as follows....

    if (photos && [photos count]) {
        myImageView.image = [photos anyObject];   // yay.  it worked
    } else {
        NSLog(@"there was an error: %@", error);
    }
}]; 
```

# opengl-es - 如何使 OpenGL 绘图与 UIKit 更新同步

> ID：12967340
> 
> 赞同：24
> 
> 时间：2012-10-19T04:20:03.573
> 
> 标签：opengl-es, uikit, core-animation

在我们的应用程序中，我们在 CAEAGLLayer 上方有 UIScrollView。UIScrollView 包含一些 UIViews（红色矩形）。在 CAEAGLLayer 中，我们绘制白色矩形。白色矩形的中心与红色矩形的中心相同。当 UIScrollView 滚动时，我们更新 CAEAGLLayer 中白色矩形的位置并渲染它们。

我们得到了预期的结果：白色矩形的中心总是与红色矩形的中心相同。

但是我们不能将 CAEAGLLayer 的更新与 UIScrollView 中视图的移动同步。我们有某种时间错误——红色矩形落后于白色矩形。

粗略地说，我们真的想让 CAEAGLLayer 和 UIScollView 一起滞后。

我们准备了示例代码。在设备上运行它并滚动，您会看到白色矩形（由 OpenGL 绘制）比红色矩形（常规 UIViews）移动得更快。OpenGL 正在 scrollViewDidScroll: 委托调用中更新。

[https://www.dropbox.com/s/kzybsyu10825ikw/ios-opengl-scrollview-test.zip](https://www.dropbox.com/s/kzybsyu10825ikw/ios-opengl-scrollview-test.zip)

即使在 iOS 模拟器中它的行为也是一样的，只需看一下视频：[http ://www.youtube.com/watch?v=1T9hsAVrEXw](http://www.youtube.com/watch?v=1T9hsAVrEXw)

红色 = UIKit，白色 = OpenGL

代码是：

```
- (void)scrollViewDidScroll:(UIScrollView *)aScrollView {
    // reuses red squares that are gone outside thw bounds
    [overlayView updateVisibleRect:CGRectMake(...)];
    // draws white squares using OpenGL under the red squares
    [openGlView updateVisibleRect:CGRectMake(...)];
} 
```

## 编辑：

同样的问题可以很容易地在一个非常简化的示例中得到证明。可以在以下位置找到工作的 xcodeproj：

[https://www.dropbox.com/s/vznzccibhlf8bon/simple_sample.zip](https://www.dropbox.com/s/vznzccibhlf8bon/simple_sample.zip)

示例项目基本上在 OpenGL 中绘制和动画一组白色方块，并为一组红色 UIViews 做同样的事情。在红色和白色方块之间很容易看到滞后。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-06-09T02:56:26.590

在 iOS 9`CAEAGLLayer`中具有`presentsWithTransaction`同步两者的属性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-13T20:54:36.837

事实上，您无法使用当前的 API 同步它们。MobileMaps.app 和 Apple Map Kit 使用 CAEAGLLayer 上的私有属性`asynchronous`来解决此问题。

这里是相关雷达： http://openradar.appspot.com/radar?id= [3118401](http://openradar.appspot.com/radar?id=3118401)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-12T12:58:21.973

在挖掘了一下之后，我想扩展我之前的答案：

您的 OpenGL 渲染会立即在该`scrollViewDidScroll:`方法中完成，而 UIKit 绘图稍后会在运行循环的正常 CATransaction 更新期间执行。

要将 UIKit 更新与 OpenGL 渲染同步，只需将两者包含在一个显式事务中并刷新它以强制 UIKit`backbaordd`立即提交更改：

```
- (void)scrollViewDidScroll:(UIScrollView *)aScrollView {
    [CATransaction begin];
    [overlayView updateVisibleRect:CGRectMake(...)];
    [openGlView updateVisibleRect:CGRectMake(...)];
    [CATransaction flush]; // trigger a UIKit and Core Animation graphics update
    [CATransaction commit];
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-24T16:29:21.270

在缺乏正确答案的情况下，我想分享我的想法：

有两种绘制方式：Core Animation (UIKit) 和 OpenGL。最后，所有的绘图都是由 OpenGL 完成的，但核心动画部分是在 backboardd（或 iOS 6 之前的 Springboard.app）中渲染的，它充当一种窗口服务器。

为了完成这项工作，您的应用程序的进程会序列化层层次结构并更改其属性，并将数据传递给 backboardd，然后由 backboardd 渲染和组合层并使​​结果可见。

在将 OpenGL 与 UIKit 混合时，CAEAGLLayer 的渲染（在您的应用程序中完成）必须与其余的核心动画层合成。我猜测 CAEAGLLayer 使用的渲染缓冲区以某种方式与 backboardd 共享，以便快速传输应用程序的渲染。这种机制不一定必须与来自 Core Animation 的更新同步。

要解决您的问题，有必要找到一种将 OpenGL 渲染与 Core Animation 层序列化同步并传输到 backboardd 的方法。很抱歉无法提出解决方案，但我希望这些想法和猜测能帮助您理解问题的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-27T09:28:38.930

我正在尝试解决完全相同的问题。我尝试了上述所有方法，但没有任何方法可以接受。

理想情况下，这可以通过访问 Core Animation 的最终合成 GL 上下文来解决。但是我们无法访问私有 API。

另一种方法是将 GL 结果传输到 CA。我通过读取帧缓冲区像素来分派到太慢的 CALayer 来尝试这个。应该传输大约超过 200MB/秒的数据。现在我正在尝试优化它。因为这是我可以尝试的最后一种方法。

## 更新

仍然很重，但读取帧缓冲区并将其设置为 CALayer.content 运行良好，并且在我的 iPhone 4S 上显示出可接受的性能。无论如何，超过 70% 的 CPU 负载仅用于此读取和设置操作。尤其是`glReadPixels`我，他们中的大多数人只是在等待从 GPU 内存读取数据的时间。

## 更新2

我放弃了最后一种方法。它的成本几乎是纯粹的像素传输，而且仍然太慢。我决定在 GL 中绘制每个动态对象。只有一些静态弹出视图将使用 CA 绘制。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-24T21:55:35.290

为了同步 UIKit 和 OpenGL 的绘制，你应该尝试渲染 Core Animation 期望你绘制的地方，例如：

```
- (void)displayLayer:(CALayer *)layer
{
    [self drawFrame];
}

- (void)updateVisibleRect:(CGRect)rect {
    _visibleRect = rect;
    [self.layer setNeedsDisplay];
} 
```

# openerp - openerp 页码

> ID：12967343
> 
> 赞同：1
> 
> 时间：2012-10-19T04:20:08.817
> 
> 标签：openerp

我尝试使用以下两种方式在我的文档中添加页码

我只想要默认的第 1 页、第 2 页等。

1)

```
<para>
<drawCentredString x="18.5cm" y="1.5cm"> Page: <pageNumber/></drawCentredString></para> 
```

2)

```
<para><drawCentredString x="18.5cm" y="1.5cm"> Page: <pageCount/></drawCentredString></para> 
```

对于选项 2，我更改了 trml2pdf.py 中的 pagecount 类，如下所示

```
class PageCount(platypus.Flowable):
    def draw(self):
        self.canv.beginForm("pageCount")
        self.canv.setFont("Helvetica", utils.unit_get(str(8)))
##        self.canv.drawString(0, 0, str(self.canv.getPageNumber()))
        self.canv.drawString(0, 0, str(self.canv._pageCount))
        self.canv.endForm()

class PageReset(platypus.Flowable):
    def draw(self):
        self.canv._pageNumber = 0 
```

--

没运气 ！！我只是得到页面：或或错误

提前致谢，乌莎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:00:59.783

您可以通过在 .rml 中写入“< pageNumber/>”来做到这一点，但您必须将其写入“模板/pageTemplate/pageGraphics”标签下。
例如：

```
<template pageSize="(595.0,842.0)" title="Test" author="Martin Simon" allowSplitting="20">
    <pageTemplate>
        <pageGraphics>
            <drawCentredString x="10.5cm" y="0.8cm">Page: <pageNumber/></drawCentredString>
        </pageGraphics>
    </pageTemplate> 
```

希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T10:27:59.927

对于带有 header=internal 的报告，您将拥有 1/2 样式页面自动计数。就像在 openerp 的报告中一样，它使用编号画布作为内部 Heard 报告。

# java - FileOutputStream：我错过了什么？

> ID：12967345
> 
> 赞同：1
> 
> 时间：2012-10-19T04:20:25.690
> 
> 标签：java, arrays, fileoutputstream

我有这个程序，它从二进制文件中读取 2 Kb 数据，向它添加一些标题，然后将其写入一个新文件。
代码是

```
try {
        FileInputStream fis = new FileInputStream(bin);
        FileOutputStream fos = new FileOutputStream(bin.getName().replace(".bin",    ".xyz"));
        DataOutputStream dos=new DataOutputStream(fos);  
        fos.write(big, 0, big.length);
        for (int n = 1; n <= pcount; n++) {          
            fis.read(file, mark, 2048);
            mark = mark + 2048;             
            prbar.setValue(n);
            prbar.setString("Converted packets:" + String.valueOf(n));
            metas = "2048";
            meta = metas.getBytes();
            pc = String.valueOf(file.length).getBytes();
            nval = String.valueOf(n).getBytes();
            System.arraycopy(pc, 0, bmeta, 0, pc.length);
            System.arraycopy(meta, 0, bmeta, 4, meta.length);
            System.arraycopy(nval, 0, bmeta, 8, nval.length);          
            fos.write(bmeta, 0, bmeta.length);
            fos.flush();
            fos.write(file, 0, 2048);
            fos.flush();
       }
  }catch (Exception ex) {
        erlabel.setText(ex.getMessage());
  } 
```

首先它应该写标题，然后是文件。但是输出文件中充满了不属于文件的数据。它正在写入一些垃圾数据。可能是什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T04:30:14.613

缺少一些声明还不太清楚，但看起来你的问题出在`fis.read()`方法上：第二个参数是字节数组中的偏移量，而不是文件中的偏移量（常见错误）。

您可能想使用相对读取。在写出缓冲区之前，您还需要检查返回值`.read()`以查看实际读取了多少字节。

常见的成语是：

```
InputStream is = ... 
OutputStream os = ...

byte[] buf = new byte[2048];
int len;
while((len = is.read(buf)) != -1)
  os.write(buf, 0, len);

is.close();
os.close(); 
```

### 编辑

这是写出元数据的一种非常奇怪的方式，我认为这就是（未使用的）`DataOutputStream`的用途？

您无需继续刷新输出流，只需在完成后将其关闭即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:15:45.493

除了@Dmitri 指出的内容之外，您编写元数据的方式存在严重问题。

1.  您每次都在循环中编写元数据，这是不对的。

2.  您实际上是通过 为它分配 4 个字节`"2048".getBytes()`，然后将超过 4 个字节复制到其中，然后写入 4 个字节。这也不对，事实上它应该真的向你抛出 ArrayIndexExceptions。

3.  看起来元数据应该包含三个二进制整数。但是，您将字符串数据放入其中。我怀疑您应该直接对这些字段使用 DataOutputStream.writeInt() ，而不是`String.valueOf()/getBytes()`胡说八道`System.arraycopy()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:20:19.637

我想建议使用`lib`社区支持的功能，例如**apache common-io**`IO`。有有用的`classes`和`method`;

```
org.apache.commons.io.DirectoryWalker;
org.apache.commons.io.FileUtils;
org.apache.commons.io.IOCase;

FileUtils.copyDirectory(from, to);
FileUtils.writeByteArrayToFile(file, data);
FileUtils.writeStringToFile(file, data);
FileUtils.deleteDirectory(dir);
FileUtils.forceDelete(dir); 
```

# jsf-2 - 如何验证 selectOneMenu 的值？

> ID：12967350
> 
> 赞同：5
> 
> 时间：2012-10-19T04:21:12.447
> 
> 标签：jsf-2

我正在验证我的表单，我可以获得文本框的值，但总是在 uiClass 变量（`Error: java.lang.NullPointerException`）中检索空值：有什么建议吗？

例外：

```
WARNING: /jsf/report/Edit.xhtml @39,99 listener="#{studentController.validate}": java.lang.NullPointerException
javax.el.ELException: /jsf/report/Edit.xhtml @39,99 listener="#{studentController.validate}": java.lang.NullPointerException
    at com.sun.faces.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:111)
    at com.sun.faces.facelets.tag.jsf.core.DeclarativeSystemEventListener.processEvent(EventHandler.java:131)
    at javax.faces.component.UIComponent$ComponentSystemEventListenerAdapter.processEvent(UIComponent.java:2464)
    at javax.faces.event.SystemEvent.processListener(SystemEvent.java:106)
    at com.sun.faces.application.ApplicationImpl.processListeners(ApplicationImpl.java:2168)
    at com.sun.faces.application.ApplicationImpl.invokeComponentListenersFor(ApplicationImpl.java:2116)
    at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:288)
    at com.sun.faces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:246)

Caused by: java.lang.NullPointerException
    at entities.StudentController.validate(StudentController.java:163)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)  

@ManagedBean()
@SessionScoped
public class StudentController implements Serializable {
    public void validate(ComponentSystemEvent event) {
        FacesContext fc = FacesContext.getCurrentInstance();
        UIComponent components = event.getComponent();

        UIInput uiName = (UIInput) components.findComponent("frmStudent:name");
        UIInput uiClass = (UIInput) components.findComponent("frmStudent:myclass");

        String name = uiName.getLocalValue().toString();
        String myclass = uiClass.getLocalValue().toString();

        if (name.equals("") || name == null || name.isEmpty()) {
            FacesMessage msgName = new FacesMessage("Please enter name !");
            fc.addMessage(components.getClientId(), msgName);
            fc.renderResponse();
        } else if (myclass.equals("") || myclass == null || myclass.isEmpty()) {
            FacesMessage msgClass = new FacesMessage("Please select a class !");
            fc.addMessage(components.getClientId(), msgClass);
            fc.renderResponse();
        }
    }
} 
```

我的 XHTML

```
<h:message for="textPanel" style="color:red;" />
<h:panelGrid id="textPanel" columns="4">
  <f:event listener="#{studentController.validate}" type="postValidate" />
    <h:inputText id="name" value="#{studentController.selected.name}" size="20" />
    <h:selectOneMenu id="myclass" value="#{studentController.selected.myclass}" style="width:180px;">
        <f:selectItem itemLabel="Select ..." itemValue="#{null}" noSelectionOption="true" />
        <f:selectItems value="#{studentController.classItems}"/>
    </h:selectOneMenu>
</h:panelGrid> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-21T10:02:05.327

为什么不使用必需的属性？

```
 <h:inputText id="name" required="true" requiredMessage="Please enter name !" value="#{studentController.selected.name}" size="20" />
    <h:selectOneMenu id="myclass" required="true" requiredMessage="Please select a class !" value="#{studentController.selected.myclass}" style="width:180px;">
        <f:selectItem itemLabel="Select ..." itemValue="#{null}" noSelectionOption="true" />
        <f:selectItems value="#{studentController.classItems}"/>
    </h:selectOneMenu> 
```

# android - 谷歌日历 API 示例

> ID：12967351
> 
> 赞同：1
> 
> 时间：2012-10-19T04:21:17.463
> 
> 标签：android

超级新手问题我下载了google api java客户端示例，我正在尝试使用日历示例。我在 clientcredentials.java 中插入了我的 api 密钥，但我仍然收到超过 403 禁止错误限制但我还没有使用过该应用程序有什么我错过了开发人员页面说它应该加载到我的手机上但我不能让它这样做！我即将准备好用半个简单的教程来折断我的笔记本电脑，我将不胜感激我还没有找到一个关于如何使用它的直接解释，我从今天早上 5:30 开始就一直在谷歌搜索！！！！！！ ！！！

# c++ - 未初始化的本地字符的行为？

> ID：12967352
> 
> 赞同：4
> 
> 时间：2012-10-19T04:21:20.123
> 
> 标签：c++, gcc, char, undefined

如果您说一个`int`未初始化的局部变量，那么它会得到一个未定义的值，但是如果您有一个局部`char`变量，那么它也不应该有一个未定义的值吗？当然 0 可能是那个未定义的值，但我想知道 char 是否有任何不同，因为我找到的所有相关信息都是关于`int`的，并且当 char 变量转换为 int 时，下面的程序只输出 0。我使用没有标志的 GCC 4.7。

```
int main()
{
char test1;
int test2;

std::cout<<test2; //garbage
std::cout<<std::endl;
std::cout<<(int)test1; //0
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T04:24:02.840

未初始化意味着真正未初始化。*仅仅因为您在特定时间在您的*机器上始终获得特定值，并不意味着在所有机器上总是如此。

您可以通过转储函数的汇编代码并检查它来验证没有任何东西正在初始化您的变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T05:41:02.823

> > 如果你让我们说一个未初始化的本地 int，那么它会得到一个未定义的值

不，这不是正确的思考方式。您的局部变量没有得到未定义的值，它没有任何值。随后查询此类未初始化的变量会调用*未定义的行为*。

您的程序不一定会打印“0”。它不一定会打印*任何数字*，甚至根本不会打印任何*东西*。当然，在典型的计算机上，使用典型的编译器，你的程序会打印一些数字，但是在 C++ 语言的范围内，我们无法预测你的程序会做什么或不做什么**。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T04:24:23.443

局部变量从它们当时占据的堆栈空间中的任何随机数据中获取其初始值。不能保证空格包含零。

# php - 提交表单时防止父页面刷新

> ID：12967356
> 
> 赞同：0
> 
> 时间：2012-10-19T04:21:32.683
> 
> 标签：php, html, forms

我有以下代码来发布数据：

```
<form action="SaveToExcel.php" method="post" target="_blank" onsubmit='$("#datatodisplay").val( $("<div>").append( getExcel() ).html() )'>
  <input  type="image" src="../../images/floppy_disk_icon.jpg" width="16" height="16" >
  <input type="hidden" id="datatodisplay" name="datatodisplay" />       
</form> 
```

提交表单时，刷新父页面？我可以让父页面不刷新吗？

SaveToExcel.php 代码如下所示：

```
<?php
header("Content-type: application/ms-excel");     
header("Content-Disposition: filename=export.xls");
// Fix for crappy IE bug in download.
header("Pragma: ");
header("Cache-Control: ");
?>
<html>
  <head></head>
  <body>
     <?=str_replace('\"','"',$_REQUEST['datatodisplay'])?>
  </body>
</html> 
```

顺便说一句，我正在使用 jQuery

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:34:55.057

我建议您在用户单击提交按钮时进行 ajax 调用。你可以试试[jquery-ajax](http://api.jquery.com/jQuery.ajax/)。

对于极端删除形式。编写单独的函数以在用户单击提交按钮时调用 ajax。我是这样做的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:29:45.487

是的，您可以这样做将您的表单加载到这样的 iframe 中`<iframe src="yourform.html"></iframe>`，然后在您提交表单时将其放在您的父页面中，总页面不会刷新

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-19T04:27:38.157

或者干脆

```
return false; 
```

在表单提交处理程序的末尾。

# php - 一次发送多封邮件，但其他收件人不应显示，即密件抄送中的其他收件人

> ID：12967359
> 
> 赞同：0
> 
> 时间：2012-10-19T04:21:48.717
> 
> 标签：php, email

我想一次向多个用户发送邮件，但一个用户不应该看到其他用户的地址，即在密件抄送中制作它们，但邮件应该只发送一次。我为此使用了 PHPMailer。

```
 $i = 1;
  $emailCount = count($newEmail);
  foreach($newEmail as $emailAddress)
  {
        if($emailCount != $i)
        {
            $phpmail->AddAddress($emailAddress);
        }
        $i++;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:31:05.100

正如 MrGingerbear 指出的那样，AddBCC 就是您需要做的所有事情。

每个人只会收到一条消息，他们将无法看到其他收件人。

这是我所拥有的：

```
$recipients = array(
   'recipient1@domain.com' => 'Alex Baker',
   'recipient2@domain.com' => 'Charles Dickens',
);
foreach($recipients as $email => $name)
{
    $mail->AddBCC($email, $name);
} 
```

编辑：澄清 AddAddress() 不是必需的，大部分时间只是使用，因为您通常在 To: 字段中包含一个地址。但是，在您的场景中，这样做是不利的，因为这样所有用户都会看到每个用户的地址。

编辑2：由于电子邮件的设计方式，不可能只发送一封邮件，但收件人：字段对于每个收件人来说看起来都不同，也看不到其他收件人的电子邮件地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:25:57.757

您正在寻找的代码是：

```
$phpmail->AddBCC($emailAddress); 
```

将它放在您的循环中，以添加您想要发送到的所有地址作为密件抄送。我相信您不需要使用 AddAddress 指定地址，而是可以添加许多密件抄送并以这种方式发送电子邮件。有关更多信息，请参阅此[其他线程](http://www.vbforums.com/showthread.php?678206-RESOLVED-I-use-phpmailer-and-php-mail%28%29-to-send-bcc-email)。

有关包含正确文件的信息，请参阅此[论坛主题](http://board.phpbuilder.com/showthread.php?10314199-Help-with-PHPMailer-and-BCC)。

# actionscript-3 - 如何使用 Flash Builder 调试命令行 mxmlc 生成的 swf

> ID：12967360
> 
> 赞同：1
> 
> 时间：2012-10-19T04:21:51.593
> 
> 标签：actionscript-3, apache-flex, flash-builder, flash, mxmlc

我使用命令行从 flex 项目制作 swf。

```
mxmlc -debug=true src\Main.mxml -output bin-debug\Main.swf 
```

我可以使用`fdb`生成的Main.swf来调试，但是如何使用Flash Builder来调试呢？

我不使用 Flash Builder 构建 swf 的原因是 Flash Builder 时常崩溃。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T06:50:33.720

您可以使用外部调试器进行调试。一个很好的是 Monster Debugger，它易于使用，并且有许多选项来调试您的 swf 文件。

# routing - RTNETLINK 回答：隧道路由时参数无效

> ID：12967362
> 
> 赞同：2
> 
> 时间：2012-10-19T04:22:36.427
> 
> 标签：routing, tun

我在我的服务器上设置了一个 TUN 路由，如下所示：

```
10.0.1.0/24 dev eth0  proto kernel  scope link  src 10.0.1.2 
192.168.1.0/24 dev tun0  scope link 
default via 10.0.1.1 dev eth0 
```

如果我使用“ip route get”检查来自 eth0 的路由，则没有问题，如下所示：

> ip rg 192.168.1.3 从 10.0.1.3 iif eth0

```
192.168.1.3 from 10.0.1.3 dev tun0  src 10.0.1.2 

    cache  mtu 1462 advmss 1422 hoplimit 64 iif eth0 
```

但如果我使用如下：

> ip rg 192.168.1.3 从 10.0.1.3 iif tun0

```
RTNETLINK answers: Invalid argument 
```

据说它仍然可以工作。我认为这里有一些网络配置问题。有什么想法吗？提前致谢。

# api - 使用 Amazon AWS EC2 API 的无效AMIID

> ID：12967366
> 
> 赞同：0
> 
> 时间：2012-10-19T04:22:51.760
> 
> 标签：api, amazon-ec2, amazon-web-services

我正在查询 AWS API 并尝试使用位于 us-west-1a 中的 AMI ID 启动实例。这失败并出现 InvalidAMIID 错误。使用相同的 API 密钥，我可以在 us-east-1b 中启动 AMI。有没有人有这方面的经验？我很肯定我做错了什么。不知道这是否是正确的地方问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:58:15.760

AMI 因地区而异——您不能在 us-east-* 在 us-west-* 中调用 AMI。如果这是自定义 AMI，您需要将其移至新区域，或者如果它是公共 AMI，则只需找到相应的 AMI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:35:58.047

我已经能够将其缩小到以下两件事之一：

*   AWS REST API 需要指定区域和可用区。不能只指定可用区。

    或者

*   上述问题实际上在于'aws'红宝石宝石

# android - .htaccess HTTP_USER_AGENT 不工作

> ID：12967371
> 
> 赞同：2
> 
> 时间：2012-10-19T04:23:32.967
> 
> 标签：android, ios, html, .htaccess, video

我的 .htaccess 文件有问题，通常它会检查用户引用者，如果来自我的网站，它允许访问流式 mp4 文件，但现在我想允许流式传输到 Android 和 iOS 设备，我正在使用 html5标签，但它不发送 http_referer 所以我想检查用户代理以允许 mp4 文件的流，这就是我所拥有的，但它只是不起作用。

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} "Android|iPod|iPhone|iPad" [NC,OR]
RewriteCond %{HTTP_REFERER} !^http://(direct\.|www\.)?mysite\.com/.*$ [NC]
RewriteRule .*\.(mp4)$ http://www.mysite.com [R,NC] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:37:16.470

您在这里使用否定，因此您必须丢失`[OR]`并包括`!`：

```
 RewriteCond %{HTTP_USER_AGENT} !(Android|iPod|iPhone|iPad) [NC] 
```

您的规则所做的是**在它不是正确的引用者并且不是移动用户代理时**重定向。你之前拥有的：

```
RewriteCond %{HTTP_REFERER} !^http://(direct\.|www\.)?mysite\.com/.*$ [NC]
RewriteRule .*\.(mp4)$ http://www.mysite.com [R,NC] 
```

是说：如果引用者**不是**来自`http://(direct\.|www\.)?mysite\.com/`，则将 .mp4 请求重定向到`http://www.mysite.com`. 这里的逻辑是，如果引用者正确，他们就可以很好地访问 mp4 文件。

要遵循您所说的引用者是否正确*或*用户代理是否移动的逻辑，请提供 mp4，您需要否定整个事情。`(A or B)-> do something`, to `!(A or B) -> don't do something`, 翻译为: `!A and !B -> don't do something`.

因此，您需要否定移动用户代理检查，而不是**OR**使用**AND**（这是重写条件的默认设置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:26:56.943

尝试

```
RewriteCond %{HTTP_USER_AGENT} (Android|iPod|iPhone|iPad) [NC,OR] 
```

# regex - 正则表达式要么是数字字符，要么是字母数字字符，但不仅是字母字符

> ID：12967373
> 
> 赞同：3
> 
> 时间：2012-10-19T04:23:56.627
> 
> 标签：regex

要验证必须同时包含数字和字母的字段，我可以使用：

```
/^([0-9]+[a-zA-Z]+|[a-zA-Z]+[0-9]+)[0-9a-zA-Z]*$/ 
```

但我想另外接受数字字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T04:26:45.057

你的意思是你至少想要一个号码？

您可以使用前瞻断言。

```
/^(?=.*\d)[a-z\d]*$/i 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:00:06.770

我从[http://www.javascripter.net/faq/regularexpressionsyntax.htm得到了答案](http://www.javascripter.net/faq/regularexpressionsyntax.htm)

好吧，我可以在 regx 中做一个“或”函数

```
/^([0-9]|([0-9]+[a-zA-Z]+|[a-zA-Z]+[0-9]+)[0-9a-zA-Z]*)$/; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-11-29T07:59:19.583

这对我有用。

```
^([a-zA-Z+]+[0-9+]+)|([0-9+]+[a-zA-Z+]+)$ 
```

# android - 使用列表视图时如何修复底部标签栏

> ID：12967386
> 
> 赞同：1
> 
> 时间：2012-10-19T04:24:55.770
> 
> 标签：android, android-layout, android-widget, android-listview, android-tabhost

我正在制作一个应用程序，在该应用程序中，我将数据从 JSON 提取到 ListView 中，但是每当我将更多记录提取到 listview 中时，我的底部标签栏不会在那时隐藏，但是如果我在 listview 中有少量记录，例如：-只有 3 或 4 个项目行，然后我可以看到我的记录，当我使用静态列表视图时，我没有遇到同样的问题，因为我同时获得了大量带有固定底部标签栏的记录，所以可能我知道可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:42:03.243

您可以按照以下步骤操作：

1.  使用相对布局。

2.  将底栏与底部对齐为：

    ```
    android:layout_alignParentBottom="true" 
    ```

3.  将底部栏上方的列表视图设置为：

    ```
    android:layout_above="@+id/bottomBarId" 
    ```

它仅适用于相对布局。

希望它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:44:53.343

看到这个， list 和 bottom_bar 的父布局应该是

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/listView1"
    android:layout_width="match_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/bottombar" >
</ListView>

<LinearLayout
    android:id="@+id/bottombar"
    android:layout_width="fill_parent"
    android:layout_height="70dip"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:gravity="center" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Bottom Tab bar"
        android:textAppearance="?android:attr/textAppearanceMedium" />
</LinearLayout>

</RelativeLayout> 
```

# trigger.io - Trigger.io sencha 无法在 iOS 上加载

> ID：12967387
> 
> 赞同：3
> 
> 时间：2012-10-19T04:25:16.397
> 
> 标签：trigger.io

使用 Sencha 2 加载 Trigger.io iOS 时，我卡在空白屏幕上。

它在 Android 上运行良好，但在 iOS 上，它只是显示一个空白的白色屏幕。

这是调试输出：

```
[INFO] 943E7E1BD31/Library/Application%20Support/Forge/assets-AA20D894-4614-43FB-BE67-D78F05175E9B/src/index.html
[DEBUG] Returning to javascript: {
[DEBUG]     event = \"internal.connectionStateChange\";
[DEBUG]     params =     {
[DEBUG]         connected = 1;
[DEBUG]         wifi = 1;
[DEBUG]     };
[DEBUG] }
[DEBUG] Native call: {
[DEBUG]     callid = \"C812FD5E-EFAE-4BCD-A3EE-CFB2574F70EA\";
[DEBUG]     method = \"internal.hideLaunchImage\";
[DEBUG]     params =     {
[DEBUG]     };
[DEBUG] }
[DEBUG] Returning to 
[DEBUG] script: {
[DEBUG]     callid = \"C812FD5E-EFAE-4BCD-A3EE-CFB2574F70EA\";
[DEBUG]     content = \"<null>\";
[DEBUG]     status = success;
[DEBUG] } 
```

隐藏启动图像后，它正在调用`content = \"<null>\";`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T04:53:43.870

事实证明 Sencha 2 有一个错误，它抛出如下错误：

```
Error: [ERROR][Ext.viewport.Ios#undefined] Timeout waiting for window.innerHeight to change 
```

我做了一些研究，这似乎是一个与 Safari 与 UI Web 视图相关的错误。

要解决此问题，请在下面添加`Ext.application({`

```
viewport: { autoMaximize: false }, 
```

干杯

# java - 使用Java确定闰年？

> ID：12967390
> 
> 赞同：0
> 
> 时间：2012-10-19T04:25:43.163
> 
> 标签：java, leap-year

这是我的要求。确定年份是否为闰年算法：

*   如果年份可以被4整除，则为闰年
    *   除非年份可以被100整除，否则就不是闰年
*   除非年份可以被400整除，否则就是闰年
*   否则不是闰年

我需要知道我做对了吗？

```
private static boolean isLeapYear(int userInput){
    boolean leapYear= false;

    if (userInput % 4 == 0 ){
        leapYear = true;

        if (userInput % 4 == 0 && userInput % 100 ==0) {
            leapYear = false;

            if(userInput % 400 == 0){
                leapYear = true;
            }
        }
    }
    else {
        leapYear = false;
    }

    return leapYear;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-25T20:48:06.057

我在 C++ 中使用了这个。

return ((userInput % 400) || ((userInput % 4) && !(userInput % 100)));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-24T15:08:03.983

最好将此条件用于有效的闰年
`(((year%4 == 0) && (year%100 !=0)) || (year%400==0))`

这是一个类似的[C 程序来检查闰年](http://codeforwin.blogspot.in/2015/05/c-program-to-check-leap-year.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-15T17:40:52.617

正确的！简化：

1.  从已经在第 1 次测试的第`year % 4`2 次`if`bc 中删除`if`
2.  删除已设置在顶部的`else`bc`leap = False`

Python：

```
def is_leap(year):
    leap = False

    if year % 4 == 0:
        leap = True

        if year % 100 == 0:
            leap = False

            if year % 400 == 0:
                leap = True

    return leap 
```

1 行：

```
def is_leap(year):
    return year % 4 == 0 and year % 100 != 0 or year % 400 == 0 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-29T19:55:34.833

我使用了这个简短的方法：

```
private static Boolean isLeapYear(int year) {
        return year % 4 == 0 ? (year % 100 == 0 ? ( year % 400 == 0 ? true : false) : true) : false ;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-05T07:25:47.583

```
year = int(input("Enter year to determine if it is a leap year"))

def leap_year(year):
    """This is a function to determine if a year
       is a leap year"""
    if year%4==0 and year%100!=0:
        print("This is a Leap year")
        if year%400==0:
            print ("This is a Leap year")
    else:
        print ("This is not a leap year")    

leap_year(year) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-01T15:19:01.853

从 1700 年到 1917 年，官方日历是儒略历。从那以后他们我们使用公历系统。从儒略历到公历系统的过渡发生在 1918 年，当时 1 月 31 日之后的第二天是 2 月 14 日。这意味着 1918 年的第 32 天，是 2 月 14 日。

在这两个日历系统中，二月是唯一一个天数可变的月份，闰年有 29 天，其他年份有 28 天。在儒略历中，闰年可以被 4 整除，而在公历中，闰年是以下之一：

能被 400 整除。

能被 4 整除，不能被 100 整除。

所以闰年的程序是：

```
def leap_notleap(year):

    yr = ''
    if year <= 1917:
        if year % 4 == 0:
            yr = 'leap'
        else:
            yr = 'not leap'
    elif year >= 1919:
        if (year % 400 == 0) or (year % 4 == 0 and year % 100 != 0):
            yr = 'leap'
        else:
            yr = 'not leap'
    else:
        yr = 'none actually, since feb had only 14 days'

    return yr 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-18T19:54:54.837

使用*python*和其他语言，您可以使用如果您减去 1 天来游行，您将拥有 2 月的最后一天的属性。如果是闰年，那一天是 29 日。

```
from datetime import datetime, timedelta

def is_leap_year(year: int):
    marzo = datetime(year, 3, 1)
    febrero = marzo - timedelta(1)
    if febrero.day == 29:
        return True
    else:
        return False 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-03-18T20:11:28.287

> 能被 4 整除的每一年都是闰年，但能被 100 整除的年份除外，但如果这些百年年份能被 400 整除，则它们就是闰年。例如，1700 年、1800 年和 1900 年是不是闰年，而是 1600 年和 2000 年。 [2]
> 
> — 美国海军天文台

*资料来源：[https ://en.wikipedia.org/wiki/Gregorian_calendar](https://en.wikipedia.org/wiki/Gregorian_calendar)*

因此，对于有资格成为闰年的年份，它应该是：

1.  可以被 400 整除 - 或 -
2.  能被 4 整除但不能被 100 整除

在您的代码中使用此事实，如下所示：

```
if((userInput % 400 == 0) || (userInput % 4 == 0 && userInput % 100 != 0)) {
     System.out.println(userInput + " is a leap year");
} 
```

对于生产代码，我建议您使用 OOTB *java.time* API：

```
if (java.time.Year.isLeap(userInput)) {
    System.out.println(userInput + " is a leap year");
} 
```

**[从Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解有关现代日期时间 API 的更多信息。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-10-19T04:32:33.803

`userInput % 4 == 0 && userInput % 100 ==0`相当于`userInput % 400 == 0`

然后`userInput % 4 == 0`肯定是闰年，所以不需要检查任何其他条件。

# html - 为什么我的导航栏在 chrome 中很好，但在 IE 中包装？

> ID：12967393
> 
> 赞同：1
> 
> 时间：2012-10-19T04:26:07.300
> 
> 标签：html, css

网站网址是：`http://www.haorenao.cn`。您可以看到带有绿色的导航栏在 Chrome 中运行良好，但在 IE 中它被浏览器包裹。

谁能帮我看看？这真的让我困惑了一段时间，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:26:58.837

使用`clear:both;`绿色 div 作为内联样式的导航栏应用样式。否则`overflow:hidden;`为 div`#topContentWrapper`

# java - Java中的继承和构造函数

> ID：12967395
> 
> 赞同：0
> 
> 时间：2012-10-19T04:26:36.790
> 
> 标签：java, inheritance, constructor, subclass

所以，我正在做一个家庭作业，我很难按照一些指示去做，我把作业粘贴在下面：

> 创建五个类的层次结构，外加一个作为变量包含在内的类：
> 
> 1.  Person 有四个 String 变量：姓名、地址、电话、电子邮件
> 2.  Student 是 Person 的子类，并且有一个额外的 int 变量状态，它的值分别为 1、2、3 或 4，代表大一、大二、大三、大四
> 3.  MyDate 具有年、月和日的三个 int 变量
> 4.  Employee 是 Person 的子类，有一个 String 变量 office，一个 int 变量表示薪水，一个 MyDate 变量表示 dateHired
> 5.  Staff 是 Employee 的子类，并且有一个额外的 String 变量作为 title
> 6.  Faculty 是 Employee 的一个子类，并且有一个额外的 String 变量用于 rank，它采用 Professor、Associate Professor、Assistant Professor、Instructor 和 Adjunct 的值。所有六个类的数据都应该是私有的。
> 
> 至于方法，如果您编写一个具有所有数据参数的构造函数并覆盖 toString() 方法，则可以跳过普通的 setter 和 getter。子类的构造函数应该使用超类的构造函数。子类的 toString() 方法应该使用其超类的 toString() 方法。

让我陷入循环的部分是可以编写一个构造函数，它将涵盖 setter 和 getter 的所有必要参数，而不是在每个子类中编写它们。这可能吗？怎么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T04:39:58.597

您需要在创建子类时使用超类的构造函数。所以应该是：

```
public class Staff extends Employee {    

    private String title;    

    public Staff(String name, String address, String phone, String email, int status, String title) {
        super(name, address, phone, email, status);
        this.title = title;
    }    
} 
```

使用`super(/*params of super class*/)`调用超类的构造函数并实例化继承的属性。请注意，您只能调用超类构造函数作为构造函数的第一条语句。如果您没有显式调用超类构造函数，Java 编译器会自动插入对 super()（超类的默认构造函数）的调用。

调用父类的 toString() 使用：

```
public String toString() {
    return super.toString() + " ,title : " this.title;    
} 
```

类似地编写所有类的构造函数和 toString() 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:31:27.283

> 至于方法，如果您编写一个具有所有数据参数的构造函数并覆盖 toString() 方法，则可以跳过普通的 setter 和 getter。

我认为这些说明意味着您编写的*每个类*都可以有一个构造函数，该构造函数接受其所有数据的参数。以`MyDate`构造函数为例：

```
public MyDate(int year, int month, int day) {
    ...
} 
```

并且同样覆盖`toString()`以报告所有这些信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T04:33:20.073

而不是写

```
 public class A {
   private int b;
   private int c;

   public void setB(int b) {this.b = b;}
   public int getB() {return b;}

   // same for c
} 
```

你允许编码

```
 public class A {
   private int b;
   private int c;

   public A(int b, int c) {
     this.b = b;
     this.c = c;
   }

   @Override
   public String toString() {
     return "[b = " + b + ", c = " + c + "]";
} 
```

（的实现`toString()`只是一个例子，它只需要打印所有字段的状态）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T04:33:24.347

这是你可以做的

```
Person(String name,String address,String phone,String email){
 //Person constructor
 this.name = name;
 this.address = address;
 this.phone = phone;
 this.email = email;
}

public String toString(){
//toString method
return "Name: "+name+" Address: "+address+" Phone: "+phone+" Email: "+email;
} 
```

# installshield - 为什么 InstallShield 不使用构建后事件后处理的程序集？

> ID：12967398
> 
> 赞同：1
> 
> 时间：2012-10-19T04:26:45.800
> 
> 标签：installshield, installshield-2012

我有一个 .net 项目，它有一个构建后事件来将签名应用于最终程序集。但是 InstallShield 没有得到签名的程序集。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-30T08:59:25.357

限量版正在删除数字签名。

如果您希望对 exe 进行签名，则需要付费版本并选择签名选项卡的“包含文件和模式”​​。

# php - 函数中的php mysql查询不起作用

> ID：12967403
> 
> 赞同：-1
> 
> 时间：2012-10-19T04:27:03.943
> 
> 标签：php, mysql, function

我有一个 mysql 查询，它返回多列中的值的总和。查询是正确的，当我将其包含在主页中时，一切正常。但是当我在另一个页面中创建一个函数时问题就开始了，包括那里的查询并返回总和并将其打印在主页上它不起作用。

以下是主页调用：

```
require('totals.php');
$res_easyhint_total=easyhint_totals($currentpid);

print $res_easyhint_total;
//The above is contained in a while loop and current pid gets updated each time. 
```

功能页面：

```
function easyhint_totals($currentpid){
require('connect.php');
$sql_easyhint_total = "SELECT sum(Coffee+Gift+Cools+Affection+Patience+Anger+EHignore) from whyangry.posts where Pid=$currentpid";
$res_easyhint_total=mysql_query($sql_easyhint_total,$con);
$res_easyhint_total=mysql_fetch_array($res_easyhint_total);
$res_easyhint_total=$res_easyhint_total[0];
return $res_easyhint_total;
} 
```

我不明白错误是什么，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:59:59.057

您之前是否包含过文件“connect.php”？

```
if(!@include_once('connect.php')) {
     // include connect.php
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:46:17.483

您是否在 connect.php 中定义了任何函数？如果没有尝试添加这个：

```
$res_easyhint_total=mysql_query($sql_easyhint_total,$con);

if (mysql_errno() != 0) {
    echo mysql_error();
}

$res_easyhint_total=mysql_fetch_array($res_easyhint_total); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T04:47:05.543

您是否检查过那里新页面本身的结果？我的意思是说，如果您尝试从新页面本身打印结果，就像您从主页尝试一样。然后还有一件事需要集中精力，包括两个文件的路径。尝试将任何其他变量从新页面传递到主页并检查新文件是否正确包含。

如果您能够从主页上的新页面访问其他变量并且它只是不从函数返回结果。尝试在主页上包含 connect.php 并检查它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T05:19:13.053

检查您的连接字符串是否返回正确的链接标识符，并检查日志是否有来自 mysql 的任何错误或警告，如警告：mysql_query()：[2002] 没有此类文件或目录（尝试通过 unix:///var 连接/运行/mysql/mysql.sock）。在这种情况下，请尝试设置正确的套接字文件位置。

# c# - 如何检测设备是否正在 WinRT 应用程序中使用

> ID：12967405
> 
> 赞同：1
> 
> 时间：2012-10-19T04:27:21.717
> 
> 标签：c#, windows-8, app-store, windows-runtime

我正在调查是否可以在 WinRT 应用程序中使用：当我的 WinRT 应用程序关闭时：

1.  当用户打开屏幕或解锁屏幕或点击屏幕时收到通知。

2.  当屏幕关闭或锁定时，我们可以将通知发送到屏幕上或播放声音。

从 Google 上的搜索结果来看，即使在原始应用程序关闭的情况下，似乎也只有后台任务或推送服务具有此功能。但是如果后台任务可以执行功能1和2，我不会。谢谢

# stringstream - 关于字符串流并清除它们

> ID：12967409
> 
> 赞同：1
> 
> 时间：2012-10-19T04:28:02.587
> 
> 标签：stringstream, word-count

我正在尝试编写一个程序来计算文件中有多少单词。

此代码正确计算字数，但为什么如果我删除`iss.clear();`它只会计算文件第一行中的字数？

```
stringstream iss;
while(getline(file, line))
{
    iss << line;
    while(getline(iss,word, ' '))
    {

        size++;
    }

    iss.clear();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T13:24:48.107

The statement `while(getline(iss,word, ' '))` only gets the first line of the stringstream. Try doing this:

```
int pos = 0;
stringstream iss;
while(getline(file, line))
{
     iss << line;
     while(getline(iss,word, ' '))
     {
          size++;
     }

     pos += line.length();
     iss.tellg(pos);
} 
```

The last two lines positions the read pointer at the end of the new line you added, so the next getline will actually read the next line instead of the first one over and over again.

# c# - c#多个表单之间的SerialPort访问

> ID：12967411
> 
> 赞同：0
> 
> 时间：2012-10-19T04:28:28.797
> 
> 标签：c#, serial-port, global-variables

我有两种形式。表格 1 和表格 2。SerialPort 变量在 Form1.cs 中声明

```
 public SerialPort COM = null;

    public SerialPort GetCOMM
    {
        get { return COM; }
    } 
```

我需要从 Form2 访问该变量。(Form1 创建 Form2)
尝试过这些方式访问串行端口

```
Form1 f1 = new Form1();
int result = myfunction(f1.GETCOMM);
int result = myfunction(f1.COM); 
```

它不工作。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T04:39:49.820

我会亲自在 Form2 上创建一个将 SerialPort 作为参数的方法，这样它就不必引用 Form1。我会做这样的事情。或者您可以创建一个自定义构造函数，例如为 Form2 注释的 jaminator，它接收 SerialPort 作为参数

**表格1**

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Form2 frm2 = new Form2();
        frm2.setSerialPort(serialPort1);
        frm2.Show();
    }
} 
```

**表格2**

```
public partial class Form2 : Form
{
    SerialPort myPort;
    public Form2()
    {
        InitializeComponent();
    }
    public void setSerialPort(SerialPort port)
    {
        myPort = port; 
    }
} 
```

* * *

使用自定义构造函数的第二个选项

**表格1**

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        Form2 frm2 = new Form2(serialPort1);
        frm2.Show();
    }
} 
```

**表格2**

```
public partial class Form2 : Form
{
    SerialPort myPort;
    public Form2( SerialPort port)
    {
        InitializeComponent();
        myPort = port; 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:03:49.010

如果两个表单都是同一个应用程序的一部分，您可以在 Program.cs 类中放置一个静态 SerialPort 对象。然后通过 Program.SerialPort 从任何地方调用它

# javascript - 获取/设置 iscroll4 栏位置

> ID：12967413
> 
> 赞同：2
> 
> 时间：2012-10-19T04:28:37.410
> 
> 标签：javascript, android, jquery, cordova, iscroll4

我正在使用 iscroll4 插件进行 android 2.3（带有 cordova.2.1.0）应用程序开发。默认情况下，滚动条总是出现在顶部。我怎样才能根据我给出的高度改变位置，比如中间或任何地方，这样可见内容也会改变。我正在使用这样的 iscroll4（在 index.html 中的 javascript 中）：

```
 if(myScroll)
 {               
     myScroll.destroy();
 }

 myScroll = new iScroll('home' , { vScroll: true}); 
```

这里'home'是应用滚动的div（包含'ul'和'li's）。同样，当我向下滚动时，如何在 javascript 中获取滚动高度（即我向下滚动了多少）。所以，基本上我在问两个问题，即。如何获取滚动高度以及如何使用 iscroll4 进行设置。提前致谢。

# android - 在android中的屏幕上插入动态图像作为背景

> ID：12967416
> 
> 赞同：3
> 
> 时间：2012-10-19T04:29:47.797
> 
> 标签：android, image, background

我的问题可能看起来很简单。我想在活动中插入这种[图像](http://www.picgifs.com/animal-graphics/cats/1972/animal-graphics-cats-370539/ "可选标题")作为背景。（普通图像可以通过可绘制资源中的 android:background 或 setBackground 插入）。但是这种图像插入是否可能？或任何其他替代方式来实现这一目标？请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:32:18.313

Android 并不真正以简单的方式支持动画 gif，因此它已经过时了。您可以有一个带有背景可绘制的布局，您可以使用`AsyncTask`或`Handler`循环图像。背景布局将包含您的所有 UI 元素（或具有您的 UI 元素的其他布局），`layout_width`并且`layout_height`设置为`"match_parent"`.

# vb.net - 从文本文件中读取信息并显示在列表框中

> ID：12967418
> 
> 赞同：0
> 
> 时间：2012-10-19T04:30:09.793
> 
> 标签：vb.net

我试图弄清楚如何让用户在一个表单中写入他们想要在列表框中的另一个表单上看到的信息。基本上，用户会写下他们想要的详细信息（标题、作者、股票、价格、小说或非小说），然后按记录详细信息，程序会在文本文件中搜索这些值，然后另一种形式会出现列表框，他们将在其中看到所有选定的书籍。

这是我到目前为止的代码，它基本上读取文本文件信息并将其存储到一个数组中：

```
 Dim Title As String
    Dim Author As String
    Dim Stock As Integer
    Dim Price As Double
    Dim Fiction As String
    Dim NonFiction As String

Private Sub btnRecord_Click(sender As System.Object, e As System.EventArgs) Handles btnRecord.Click

    ''Read the information into a string''
    Dim objReader As New StreamReader("C:\Users\Books.txt")
    Dim fileString As String = objReader.ReadToEnd()
    objReader.Close()
    objReader.Dispose()

    ''Concert string into array''
    Dim Array As Char() = fileString.ToCharArray()
    Array(0) = CChar("BookName")

    ''Declare the string to hold the value''
    Dim resultString As String = ","

    ''Increment each item in the string''
    Dim curChar As Char
    For i As Integer = 0 To (Array.Length - 1)
        curChar = Array(i)
        If (Char.IsLetterOrDigit(curChar)) Then
            Array(i) = Chr(Asc(curChar) + 1)
        End If
    Next

    ''Conver the array back to string''
    Dim newString As String = New String(Array)

    ''Hide the details form when book inventory runs''
    Me.Hide()

    ''display inventory form''
    frmInventory.Show()

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T09:04:31.297

为了澄清，用户输入

> Dim Title As String Dim Author as String Dim Stock as Integer Dim Price As Double Dim Fiction As String Dim NonFiction As String

然后你搜索数据做文件“C:\Users\Books.txt”？

因为，假设您是将所有书籍添加到文本文件中的人，并假设您将每本书放在自己的行中，并具有相同的属性，即

书名，作者，价格等下一本书，....等等

那么我不明白你为什么不做这样的事情......

```
 'Storing All Book Information Into One Object
   Public Structure BookDetails
       Dim Title As String
       Dim Author As String
       Dim Stock As Integer
       Dim Price As Double
       Dim Fiction As String
       Dim NonFiction As String
     End Structure
   sub ... 
    Dim theObjContents as new ArrayList
   Using objReader as new StreamReader("C:\Users\Books.txt")

    while objReader.endofstream = false
      theObjContents.add(objReader.readline)
    end while

   End Using        

    For each line in theObjContents
   'Check what you want
       if bookdetails.Title = line.split(whatever your delimiting character is").item(0)

    next
 end sub 
```

我不确定这是否能回答任何问题，如果我完全不满足您的要求，请告诉我。

# sonarqube - 声纳 - OutOfMemoryError：Java 堆空间

> ID：12967427
> 
> 赞同：25
> 
> 时间：2012-10-19T04:31:33.690
> 
> 标签：sonarqube, sonar-runner

我正在使用“Findbugs”作为配置文件在 Sonar 上部署一个大型 Java 项目，并收到以下错误：

```
Caused by: java.util.concurrent.ExecutionException: java.lang.OutOfMemoryError:
Java heap space 
```

我试图解决这个问题：

1.  将 %SONAR_RUNNER_OPTS% 替换为 -Xms256m -Xmx1024m 以增加 sonar-runner bat 文件中的堆大小。
2.  将“sonar.findbugs.effort”参数作为“Min”放入 Sonar 全局参数中。

但是以上两种方法都不适合我。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-12-09T22:05:03.927

我遇到了同样的问题并找到了一个非常不同的解决方案，也许是因为我很难接受以前的答案/评论。如果有 1000 万行代码（这比 F16 战斗机中的代码多），如果每行有 100 个字符（一个疯狂的大小），您可以将整个代码库加载到 1GB 的内存中。我将其设置为 8GB 内存，但仍然失败。为什么？

答：因为社区 Sonar C++ 扫描器似乎有一个错误，它会拾取扩展名中带有字母“c”的任何文件。这包括 .doc、.docx、.ipch 等。因此，它内存不足的原因是它试图读取一些它认为是 300mb 纯代码的文件，但实际上它应该被忽略。

解决方案：找到项目中所有文件使用的扩展名（[在此处查看更多信息](https://stackoverflow.com/questions/1842254/how-can-i-find-all-of-the-distinct-file-extensions-in-a-folder-hierarchy)）：

```
dir /s /b | perl -ne 'print $1 if m/\.([^^.\\\\]+)$/' | sort -u | grep c 
```

然后将这些其他扩展作为排除项添加到您的 sonar.properties 文件中：

```
sonar.exclusions=**/*.doc,**/*.docx,**/*.ipch 
```

然后将您的内存限制设置回常规数量。

```
%JAVA_EXEC% -Xmx1024m -XX:MaxPermSize=512m -XX:ReservedCodeCacheSize=128m %SONAR_RUNNER_OPTS% ... 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-26T07:40:21.590

这对我有用：

```
SONAR_RUNNER_OPTS="-Xmx3062m -XX:MaxPermSize=512m -XX:ReservedCodeCacheSize=128m" 
```

我直接在 sonar-runner(.bat) 文件中设置它

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-08-31T09:06:12.040

使用 Maven 运行声纳时，我遇到了同样的问题。就我而言，它有助于单独调用声纳：

`mvn clean install && mvn sonar:sonar`

代替

`mvn clean install sonar:sonar`

[http://docs.sonarqube.org/display/SONAR/Analyzing+with+Maven](http://docs.sonarqube.org/display/SONAR/Analyzing+with+Maven)

备注：因为我的解决方案连接到 maven，所以这不是问题的直接答案。但它可能会帮助其他绊倒它的用户。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T06:42:39.063

你可以做什么来创建你自己的质量配置文件，首先只使用一些 Findbugs 规则，然后逐渐添加更多，直到你达到他的 OutOfMemoryError。可能只有一条规则使所有这些都失败，因为您的代码违反了它 - 如果您停用此规则，它肯定会起作用。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-09-07T11:31:00.357

I know this thread is a bit old but this info might help someone.

For me the problem was not like suggested by the top-answer with the C++ plugin. Instead my problem was the Xml-Plugin ([https://docs.sonarqube.org/display/PLUG/SonarXML](https://docs.sonarqube.org/display/PLUG/SonarXML)) after I deactivated it the analysis worked again.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-10-20T10:29:46.200

您可以通过增加sonar.properties 文件中相应 Java 进程的**-Xmx**内存设置来增加分配给相应进程的最大内存来解决此问题

在下面`SonarQube/conf/sonar.properties`

取消注释下面的行并根据需要增加内存：

```
For Web: Xmx5123m -Xms1536m -XX:+HeapDumpOnOutOfMemoryError
For ElasticSearch: Xms512m -Xmx1536m -XX:+HeapDumpOnOutOfMemoryError
For Compute Engine: sonar.ce.javaOpts=-Xmx1536m -Xms128m -XX:+HeapDumpOnOutOfMemoryError 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-19T06:44:07.867

问题出在 FindBugs 方面。我想您正在分析一个可能有很多违规行为的大型项目。查看 Sonar 邮件列表中的两个线程，它们具有相同的问题。您可以自己尝试一些想法。

[http://sonar.15.n6.nabble.com/java-lang-OutOfMemoryError-Java-heap-space-td4898141.html](http://sonar.15.n6.nabble.com/java-lang-OutOfMemoryError-Java-heap-space-td4898141.html)

[http://sonar.15.n6.nabble.com/java-lang-OutOfMemoryError-Java-heap-space-td5001587.html](http://sonar.15.n6.nabble.com/java-lang-OutOfMemoryError-Java-heap-space-td5001587.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-07-09T20:31:24.287

我知道这很旧，但无论如何我只是发布我的答案。我意识到我使用的是 32 位 JDK（版本 8），在卸载它然后安装 64 位 JDK（版本 12）后，问题就消失了。

# android - BlueChat 可以作为服务运行吗？

> ID：12967431
> 
> 赞同：2
> 
> 时间：2012-10-19T04:32:04.837
> 
> 标签：android, service, bluetooth

Google 获得了名为 BlueChat 的示例应用程序，它类似于 WhatssAPP 应用程序，但使用蓝牙进行通信！

如您所见，如果我们关闭应用程序（结束应用程序），两个设备之间的连接将丢失！我的问题是，有没有办法将此应用程序作为服务运行？我的意思和 Whatssapp 一样

我们可以将两个设备之间的连接作为服务保持，然后每次设备收到它通过通知通知的新消息时

# jquery-ui - 从角度打开 jquery 对话框的最佳做法是什么？

> ID：12967434
> 
> 赞同：29
> 
> 时间：2012-10-19T04:32:32.597
> 
> 标签：jquery-ui, jquery-ui-dialog, angularjs

继承人的html：

```
<div ng-controller="MyCtrl">
    <a ng-click="open()">Open Dialog</a>
    <div id="modal-to-open" title="My Title" ui-jq="dialog" ui-options="{width: 350, autoOpen: false, modal: true}">
        Dialog Text
    </div>
</div> 
```

这是js：

```
function MyCtrl($scope) 
{
    $scope.open = function () {
        $('#modal-to-open').dialog('open');
    }
} 
```

这是最好的方法吗？似乎有更好的方法可以在不访问 DOM 的情况下打开它，但我不确定我将如何去做。上面的代码有效，我只是想知道这是否是我应该这样做的方式。欢迎任何意见。

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-10-19T12:58:28.443

“最佳实践”在这里是模糊的。如果它是可读的并且有效，那么你就在那里，IMO，它可能很好。

也就是说，“角度方式”是将 DOM 操作排除在控制器之外，并使用依赖注入来确保一切都是可测试的。显然，您上面说明的方式很难测试，并且在控制器中放置了一些 DOM 操作。

我想我要从控制器中获取 DOM 操作是使用指令：

一个简单的指令，用于将您的对话框打开调用绑定到对元素的单击：

```
app.directive('openDialog', function(){
    return {
        restrict: 'A',
        link: function(scope, elem, attr, ctrl) {
            var dialogId = '#' + attr.openDialog;
            elem.bind('click', function(e) {
                $(dialogId).dialog('open');
            });
        }
    };
}); 
```

在标记中，它将像这样使用：

```
<button open-dialog="modal-to-open">Open Dialog</button> 
```

现在，这显然是非常基本的。如果您愿意，您可以使用它来获得相当先进的功能，为对话框中的不同选项添加额外的属性。

你可以更进一步，添加一个为你打开对话框的服务，这样你就可以将它注入你的控制器甚至你的指令中，并以这种方式调用。例如：

```
app.factory('dialogService', [function() {
    return {
        open: function(elementId) {
            $(elementId).dialog('open');
        }
    };
}]); 
```

在这里它正在使用中。这似乎很愚蠢，因为它本质上是一样的。但这主要是因为这是一个非常简单的例子。但它至少利用了 DI 并且是可测试的。

```
app.controller('MyCtrl', function($scope, dialogService) {
    $scope.open = function () {
        dialogService.open('#modal-to-open');
    };
}); 
```

无论如何。我希望所有这些都可以帮助您决定要走的路。有一千种方法可以做到这一点。“正确”的方式是任何可行的方法，允许您做任何您需要做的事情（测试或其他任何事情），并且易于维护。

# java - 如何将 JtextField 值插入 Jtable？

> ID：12967436
> 
> 赞同：-1
> 
> 时间：2012-10-19T04:32:51.993
> 
> 标签：java, swing, jtable, jtextfield

```
 public LayoutWindow() {
    JLabel lblNewLabel = new JLabel("Receipt No:");

    txtReceiptNo = new JTextField();
    txtReceiptNo.setColumns(10);

    JLabel lblDate = new JLabel("Date:");

    txtDate = new JTextField();
    txtDate.setColumns(10);
    Date date = new Date();
    SimpleDateFormat dateFormate = new SimpleDateFormat("dd-MM-yyyy");
    String newDate = dateFormate.format(date);
    txtDate.setText(newDate);

    JLabel lblProductCode = new JLabel("Product Code");

    txtProductCode = new JTextField();
    txtProductCode.setColumns(10);
    String a = txtProductCode.getText();
    txtProductCode.getDocument().addDocumentListener(new DocumentListener() {
      public void changedUpdate(DocumentEvent e) {
        warn();
      }
      public void removeUpdate(DocumentEvent e) {
        warn();
      }
      public void insertUpdate(DocumentEvent e) {
        warn();
      }

      public void warn() {
         System.out.println("changed....");
         txtQuantity.setText("1");

      }
    });

    JLabel lblQuantity = new JLabel("Quantity");

    txtQuantity = new JTextField();
    txtQuantity.setColumns(10);

    JLabel lblPrice = new JLabel("Price");

    txtPrice = new JTextField();
    txtPrice.setColumns(10);

    JLabel lblNetAmount = new JLabel("Net Amount");

    txtNetAmount = new JTextField();
    txtNetAmount.setColumns(10);

    JLabel lblDiscount = new JLabel("Discount");

    txtDiscount = new JTextField();
    txtDiscount.setColumns(10);

    JLabel lblTotal = new JLabel("Total");

    txtTotal = new JTextField();
    txtTotal.setColumns(10);

    System.out.println(a);
    String[] columnNames = {"Product Code","Description","Price","Quantity","Total"};
    Object[][] data = {{a, "bb","cc", new Integer(5), new Boolean(false)},};

    final JTable table = new JTable(data, columnNames);

    table.setPreferredScrollableViewportSize(new Dimension(500, 70));
    table.setFillsViewportHeight(true);

    if (DEBUG) {
        table.addMouseListener(new MouseAdapter() {
            public void mouseClicked(MouseEvent e) {
                printDebugData(table);
            }
        });
    }

    //Create the scroll pane and add the table to it.
    JScrollPane scrollPane = new JScrollPane(table); 
```

我有一个类似上面的代码。我想将数据插入到来自 Jtextfield 的 Jtable 中。而且我还想清除 JtextField 数据`onFocus`。我怎样才能做到这一点？请尽快帮助我...谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T04:45:36.417

`JTable table = new JTable(data, columnNames)`构造一个`DefaultTableModel`

`DefaultTableModel`您可以在using[`DefaultTableModel#addRow(Object[])`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#addRow%28java.lang.Object%5b%5d%29)或中添加新行[`DefaultTableModel#addRow(Vector)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#addRow%28java.util.Vector%29)。

在您的示例下，这将需要类似`((DefaultTableModel)table.getModel).addRow(...)`

要设置已经存在的行的值，可以使用该`TableModel#setValueAt(row, col)`方法。

这将是一个简单的 as `table.getModel().setValueAt(row, col)`，其中 row 和 col 是`int`值。

您可能需要将行索引从视图转换为模型，[`JTable#convertRowIndexToModel(int)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#convertRowIndexToModel%28int%29)并将列索引转换为模型[`Table#convertColumnIndexToModel(int)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#convertColumnIndexToModel%28int%29)，以防行已排序或用户移动列

[How to use Tables](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)中涵盖了很多内容，非常值得您花时间

要清除获得焦点的文本字段，您需要一个[`FocusListener`](http://docs.oracle.com/javase/7/docs/api/java/awt/event/FocusListener.html)并将其附加到您要启用的每个字段。

就像是...

```
public class ClearOnFocusGained implements FocusListener {
    public void focusGained(FocusEvent e) {
        // This is an assumption...
        ((JTextComponent)e.getComponent()).setText(null);
    }
    public void focusLost(FocusEvent e) {}
} 
```

然后您只需创建一个侦听器实例并应用于您的每个字段

```
ClearOnFocusGained clearListener = new ClearOnFocusGained();
txtTotal.addFocusListener(clearListener); 
```

# jquery - jQuery 不能在这里使用代码

> ID：12967440
> 
> 赞同：-1
> 
> 时间：2012-10-19T04:33:32.773
> 
> 标签：jquery

**HTML：**

```
<a href="javascript:void(0);" title="Show and Hide" id="_showhide">
    <span id="textsh">hide</span>
    <div id="contentsShowHide" style="display:none;">
        Contents here
    <div> 
```

**JavaScript：**

```
function headerShowHide(){
$(document).ready(function(){
    $('#_showhide').click(function(){
        $('#contentsShowHide').toggle(function(){$("#textsh").text("show")},function(){$("#textsh").text("hide")});
      });
});} 
```

`<div id="contentsShowHide">`没有显示或隐藏，并且文本没有改变
`<span id="textsh">`。我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T04:40:40.070

采用

```
$(document).ready(function(){
    $('#_showhide').click(function(){
        $('#contentsShowHide').toggle(function(){
            $("#textsh").html("show")},function(){
                $("#textsh").html("hide");
            });
        });
    });
}); 
```

无需调用 headerShowHide()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:41:12.257

试试这个**[演示](http://jsfiddle.net/pintu31/fad3M/2/)**

```
$(document).ready(function(){
$('#_showhide').toggle(function(){
    $("#textsh").text("show");
            $("#contentsShowHide").hide();
}, function(){
                $("#textsh").text("hide"); 
                    $("#contentsShowHide").show();
});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T04:41:47.967

```
$('#_showhide').click(function(){   
    if ($('#contentsShowHide').is(":visible"))
    {
      $('#contentsShowHide').hide();
      $("#textsh").text("show");
    }
    else
    {
      $('#contentsShowHide').show();
      $("#textsh").text("hide");
    }
}); 
```

[工作演示](http://jsfiddle.net/pLeDA/)。简单的方法

# html - 禁用移动浏览器点击/触摸/点击反馈框

> ID：12967441
> 
> 赞同：21
> 
> 时间：2012-10-19T04:33:50.417
> 
> 标签：html, mobile

在 HTML 5 站点中，通过移动设备进行冲浪的用户单击链接。
浏览器绘制一个框（矩形）作为反馈（除了声音）。
浏览器可能意味着 Android 2.3 的普通浏览器或 Opera Mobile。

对此进行了一些研究，但实际上没有（明确的）解决方案。

**我想避免这个（蓝色）框**。至少对于基于 iPhone 和 Android 的设备而言。任何想法？

PS我也在使用jQuery

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-10-19T04:41:06.303

这是以下内容的副本：[我可以在 webview](https://stackoverflow.com/questions/3376721/can-i-remove-android-default-link-styling-in-webview)和[iPad Safari 中删除 Android 默认链接样式吗：如何在点击链接时禁用快速闪烁效果](https://stackoverflow.com/questions/3516173/ipad-safari-how-to-disable-the-quick-blinking-effect-when-a-link-has-been-hit)。

答案是：添加这个 CSS

```
* { -webkit-tap-highlight-color: rgba(0, 0, 0, 0); } 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-11-03T15:25:19.180

我对 bloopletech 提供的答案 +1。但是，如果你想让这个技巧在 android 原生浏览器（Android 浏览器）中工作，请使用下一个：

```
* { 
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
    -moz-tap-highlight-color: rgba(0, 0, 0, 0);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-01T14:48:00.693

您在链接上看到的蓝色轮廓是“轮廓”的结果。将其关闭设置：

```
outline: none; 
```

不知道为什么这还没有得到正确回答。

# c# - Fluent API = 数据注释？

> ID：12967442
> 
> 赞同：4
> 
> 时间：2012-10-19T04:33:59.350
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, data-annotations, fluentvalidation

只是一个快速的问题，Fluent API 在功能方面是否可以替代 Data Annotations？Fluent API 中没有包含哪些 Data Annotations 功能？

我想使用 Fluent API，因为关注点分离（在我的模型和持久性之间），约定优于配置（映射定义在一个地方`DbContext.OnModelCreating()`但不是在每个模型属性中），我想使用[VS 2010 层验证](http://blogs.msdn.com/b/jasonz/archive/2010/02/18/favorite-vs2010-features-layer-validation.aspx)来确保我的 POCO 类永远不会依赖于 EF，**但是如果我从源中完全删除数据注释，我会错过什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T22:04:51.867

我想知道这是因为我希望我的 POCO 类与 EF 完全隔离（我的存储库和 UoW 模式使 kt 可以迁移到 NHibernate）。

Fluent API > Data Annotations，即 Fluent API 具有比 Data Annotations**更多的功能**，对映射表和创建关系很有用。**然而**，Fluent API 并没有很好的标签和验证，`@Html.LabelFor`以及`@Html.EditorFor`使用`[Display(Name:=...)]`,`[DisplayFormat(DataFormatString=...)]`和`[Required(ErrorMessage=...)]`。这就是让我头疼的地方。

现在发现了这样的想法：

1.  在数据层使用 Fluent API，所以我的模型真的是 POCO 类（POCO 项目）和 dll 可以在 WCF 和其他将订阅此服务的项目中使用。

2.  使用 ViewModel 的数据注释。由于这仅在 UI 层内，并且 ViewModel 从未共享给除 MVC View 之外的其他项目，因此我不介意拥有 Data Annotation 属性。

3.  将 (1) 中创建的约束重做到 (2) 中，如`[Required]`和`[MaxLength]`。我发现有些人说值得重复和改变 DRY 原则，因为 ViewModel 和域模型应该分开并且彼此不相关，即使我认为它们`MaxLength`之间存在一些关联（只是一个小重复，对于 n 来说应该没问题-tier 架构 + 我可以使用静态类和 const 使双方的长度相同）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:07:40.750

[FluentValidation.NET](http://fluentvalidation.codeplex.com/)提供了数据注释的全部功能，甚至更多。因此，如果您使用 FV 而不是数据注释，那么您绝对不会错过任何东西。

# html - 使用 svg 进行图像标注

> ID：12967443
> 
> 赞同：2
> 
> 时间：2012-10-19T04:34:12.980
> 
> 标签：html, svg, raphael, jquery-svg

任何人都可以请给我一些澄清：

我必须对测量、标记和文本等图像进行一些注释。SVG可以做到这一点吗？
我们是否需要安装任何外部插件才能在 Web 浏览器中使用 SVG？
手机浏览器会支持吗？
SVG 与 HTML5 相比有哪些优势？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:25:55.410

**问题**：我必须对图像进行一些注释，例如测量、标记和文本。svg怎么可能？

**回答**： 这可以使用 SVG 的组合，当嵌入 HTML 时成为 DOM 的一部分，以及 JavaScript 来操作 SVG 元素，就像您使用任何 HTML 元素和 JavaScript 一样。

**问题**：我们是否需要安装任何外部插件才能在网络浏览器中运行 svg？

**答**：不，大多数现代浏览器都呈现 SVG。

**问题**：它会支持移动浏览器吗？

**答案**：[http ://en.wikipedia.org/wiki/Scalable_Vector_Graphics#History_of_SVG_mobile_support](http://en.wikipedia.org/wiki/Scalable_Vector_Graphics#History_of_SVG_mobile_support)

**问题**：svg 与 Html5 相比有什么不同？

**答**：SVG 是 DOM 的一部分，这意味着它可以通过 CSS 设置样式、用 JavaScript 操作、动画等。Html5 Canvas 是一个 JavaScript API，它允许我们以编程方式进行绘制。这意味着 SVG 非常适合快速流畅的图形，也可以使用商业或开源 SVG 编辑器创建。SVG 可以通过 JavaScript 进行动画处理或交互，并通过 CSS 设置样式。使用 HTML5 Canvas，您必须使用 JavaScript API 为您的画布赋予生命。HTML 5 Canvas 的难度曲线更高，但比 SVG（[Chrome 实验](http://www.chromeexperiments.com/webgl/)）更健壮。

# spring - @value 注解在 Spring 中是如何工作的？

> ID：12967451
> 
> 赞同：3
> 
> 时间：2012-10-19T04:35:15.087
> 
> 标签：spring, jakarta-ee

我以前从未使用过 Spring，并且遇到了一个看起来有点像这样的配置对象

```
public class Config {

@Value("${app.module.config1}")
private String config1;

@Value("${app.module.config2}")
private String config2

...

public String getConfig1() {
    return config1;
}

... 
```

谁能解释这里发生了什么？我假设这是某种类型的代码注入，但我找不到这些值的来源！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T04:43:18.187

它们允许您直接从变量中的属性文件（系统或声明的属性）注入值。使用`util:properties` [标签](http://static.springsource.org/spring/docs/2.0.x/reference/xsd-config.html)，您可以在您的`applicationContext.xml`

```
 <util:properties id="message" location="classpath:com/your/program/resources/message.properties" /> 
```

指向一个名为“message.properties”的属性文件，其中包含一些内容：

```
 application.hello.message = Hello World! 
```

`@Value`然后，在您的 java 源文件中，使用注释从该属性文件中注入一个直接值 ：

```
 @Value("#{message['application.hello.message']}")
 private String helloWorldMessage; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T04:40:10.860

> `@Value("${app.module.config1}")`

这是 spring 表达式语言的一部分，spring 框架将从中查找`app.module.config1`JVM 属性`System.getProperties()`并将该属性的值注入到`config1`该类的属性中。有关 Spring 3.0.x 中的更多详细信息，请参阅[此参考资料](http://static.springsource.org/spring/docs/3.0.x/reference/beans.html#beans-factory-xml-import)以及当前文档的[此参考资料。](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-nature)

# python - python -(HOMEWORK) 在我的网格递归函数上需要帮助

> ID：12967453
> 
> 赞同：4
> 
> 时间：2012-10-19T04:35:34.357
> 
> 标签：python, recursion, grid

好的，所以我正在编写一个通过网格运行的程序，并找到房间。对于每个白色的房间，它都会用一种颜色填充它。只要这个点旁边的白色空间也是白色的，它就会继续填充颜色，直到空间被围起来。然后它继续扫描，直到找到一个新的白色房间。这是网格的外观示例：http: [//imgur.com/uDzzq](http://imgur.com/uDzzq)。这是到目前为止的代码......

```
x = 0
y = 0

if cave[row][col] != AIR:
    return
if cave[row][col] == WATER:
    return

if cave[row][col] == AIR:
    cave[row][col] = WATER
    grid.fill_cell(row, col, color)

if row <= length: #RIGHT
    fill(cave, row+1, col, color)
    x+=1
if col <= length: #DOWN
    fill(cave, row, col+1, color)
    y+=1
if row >= 0: #LEFT
    fill(cave, row-1, col, color)
    x-=1
if col >= 0: #UP
    fill(cave, row, col-1, color)
    y-=1 
```

这是它被调用的地方

```
for row in range(length) :
    for col in range(length):
        if(cave[row][col]):
            if(cave[row][col]) == AIR:
                color = grid.get_cur_color()
                fill(cave, row, col, color)
                chambers += 1
                grid.get_next_color() 
```

我遇到的问题是这只适用于非常简单的洞穴。当我尝试运行没有与外部接壤的墙壁的东西时，我得到了错误。谁能发现我的问题在哪里？这是更复杂的洞穴的例子，它最终应该是什么样子：http: [//imgur.com/41ptc](http://imgur.com/41ptc)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:10:03.317

看起来您正在测试`x`并且`y`应该测试边界条件`row`，而`col`不是

在这里做什么`x`，`y`甚至应该做什么？

# rdf - 使用 Pellet API 加载本体时出现问题

> ID：12967454
> 
> 赞同：0
> 
> 时间：2012-10-19T04:35:48.627
> 
> 标签：rdf, jena, owl, pellet

我想用`Jena Pellet API`as来推断**owl 文件**`Reasoner`中的新数据。我已经下载了jar 文件**pellet.jar**并将它附加到我的Eclipse java 项目中。但是，我在运行我的项目时仍然收到此错误消息。

 ****有人可以知道我在这里错过了什么吗？

这是我的代码

```
public class Mainprogram {

    public static String FILENAME = "file:./sample.owl";

    public static void main( String[] args ) {
        new Mainprogram().run();
    }

    protected OntModel getSoctraceOntology(){

        OntModel model = ModelFactory.createOntologyModel(PelletReasonerFactory.THE_SPEC);

        model.read(FILENAME, null, "RDF/XML");          

        // validation report
        ValidityReport report = model.validate();

        printIterator(report.getReports(), "Validation Rresults");          

        return model;

    }       
} 
```

这是错误消息

```
Exception in thread "main" java.lang.NoClassDefFoundError: com/clarkparsia/pellet/rules/ContinuousRulesStrategy
at org.mindswap.pellet.jena.OWLReasoner.<init>(OWLReasoner.java:90)
at org.mindswap.pellet.jena.PelletInfGraph.<init>(PelletInfGraph.java:146)
at org.mindswap.pellet.jena.PelletReasoner.bind(PelletReasoner.java:78)
at com.hp.hpl.jena.ontology.impl.OntModelImpl.generateGraph(OntModelImpl.java:2744)
at com.hp.hpl.jena.ontology.impl.OntModelImpl.<init>(OntModelImpl.java:139)
at com.hp.hpl.jena.ontology.impl.OntModelImpl.<init>(OntModelImpl.java:128)
at com.hp.hpl.jena.rdf.model.ModelFactory.createOntologyModel(ModelFactory.java:410)
at soctrace.Mainprogram.getSoctraceOntology(Mainprogram.java:72)
at soctrace.Mainprogram.run(Mainprogram.java:39)
at soctrace.Mainprogram.main(Mainprogram.java:34)
Caused by: java.lang.ClassNotFoundException: com.clarkparsia.pellet.rules.ContinuousRulesStrategy
at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:294)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
... 10 more 
```

谢谢你的帮助。

**版**

我正在使用`pellet-1.3.zip`从 mindswap.org 下载的文件和从[java2s.com](http://www.mindswap.org/2003/pellet/download.shtml)下载[的](http://www.java2s.com/Code/Jar/p/Downloadpelletcorejar.htm)`pellet.core.jar`文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:08:17.453

你能提供更多细节吗？

您使用的 Pellet 版本是什么？您是否检查了作为颗粒源代码分发的一部分给出的示例？耶拿也有一些例子。

除此之外，ContinuousRulesStrategy 是 com.clarkparsia.pellet.rules 包的一部分。请检查是否连接了所有必需的罐子。****

# python - 比较字符串并确定它们是否与隐藏值相同

> ID：12967455
> 
> 赞同：0
> 
> 时间：2012-10-19T04:36:17.297
> 
> 标签：python, string

所以假设给你两个字符串，有隐藏的值，你想知道它们是否有可能是相同的，例如你有'jupiter'这个词，现在让'^'代表隐藏的值，因为例如： 'jupiter' 可以等于 = 'j^^^t^r ，但不是 'j^^^' 因为那只有 4 个字符，或者 '^a^^^^' 因为第二个字符在 'jupiter' 中是 int a . 我不知道如何启动程序，再次感谢大家！

另外，python的新手，谢谢大家！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T04:47:09.953

我会这样做：

1.  确保两个字符串的长度相同。如果他们不这样做，他们就不可能是同一个词。
2.  遍历一个字符串并保留一个计数器变量。您可以使用它`for index, letter in enumerate(word):`来简化这一点。
3.  与来自（您可以使用）`letter`中相同位置的字母进行比较。`word2``word2[index]`
4.  If `letter`is not a`^`并且单词中的两个字母不同`return False`，因为这两个单词不能相同。
5.  循环结束后，如果您还没有返回，`return True`.

这是一个神秘的单线，仅供参考：

```
len(w1) == len(w2) and all(a == b or '^' in a + b for a, b in zip(w1, w2)) 
```

或使用正则表达式：

```
re.match('^{}$'.format(w2.replace('^', '.')), w1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:46:50.437

```
def match(st,t):
 if len(st)!=len(t):
  return False
 for i,j in zip(t,st):
   if i!="^" and i!=j:
    return False
 return True

>>> st="jupiter"
>>> t="j^p^^e^"
>>> match(st,t)
True
>>> t="j^"
>>> match(st,t)
False
>>> t="j^pit^e"
>>>
>>> match(st,t)
False 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T04:47:13.543

```
>>> def compare(A,B):
...     if not len(A) == len(B): return False
...     return all(a == b or a == '^' or b == '^' for a,b in zip(A,B))
... 
>>> compare('j^^^t^r','jupiter')
True 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T04:48:45.273

这应该工作：

```
def match(a,b):
    if len(a)!=len(b):
        return "strings don't match"
    else:
        for x,y in zip(a,b):
            if not(any((x=="^",y=="^")) or x==y):
                return "strings don't match"
        return "matched"

print match("jupiter","j^^^t^r")    
print match("jupiter","^a^^^^^")
print match("abc","^b^")
print match("abc","b^^") 
```

**输出：**

```
matched
strings don't match
matched
strings don't match 
```

# glassfish - 在 GlassFish 中使用 Web 应用程序中的 JavaMail

> ID：12967456
> 
> 赞同：1
> 
> 时间：2012-10-19T04:36:20.580
> 
> 标签：glassfish, jakarta-mail, glassfish-3

我已经在我的 JSF 应用程序的支持 bean 中设置了一个 JavaMail 会话，结果证明发送电子邮件相当容易。但是，根据网络条件，它可能需要相当长的时间。**Transport.send()**方法将阻塞调用线程，直到发送电子邮件或协议以某种方式失败。

我的问题是：考虑到许多用户同时访问服务器的可能性，在 JSF 支持 bean 中可以这样做吗？

我可以创建一个应用程序范围的工作线程，该线程将使用 BlockingQueue 来处理后台的所有电子邮件。这是正确的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:22:14.280

一种可能是让 ejb 产生 jms-messages，一个 mdb 异步消费消息并调用 Transport.send()

看这个例子： http: [//faeddalberto.blogspot.com/2011/03/sending-email-with-ejb-3-mdb-message.html](http://faeddalberto.blogspot.com/2011/03/sending-email-with-ejb-3-mdb-message.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T06:31:31.357

是的，最好将任何使用网络的东西（因此可能会意外延迟）移动到单独的线程中。

# android - 设备旋转导致 NullPointerException

> ID：12967464
> 
> 赞同：0
> 
> 时间：2012-10-19T04:37:27.870
> 
> 标签：android, android-fragments, android-fragmentactivity

我开始开发基于 FragmentsBasic.zip 示例项目的应用程序：http: [//developer.android.com/training/basics/fragments/index.html](http://developer.android.com/training/basics/fragments/index.html)

在开始编写自己的代码之前，我导入了 ActionBarSherlock 并让一切按预期工作。

情况：我有一个主要的活动类（TaskListActivity）和3个片段类。在手机中运行应用程序时，TaskListActivity 首先加载 TaskListFragment，如果用户触摸操作栏中的“新任务”图标，它会将 TaskListFragment 替换为 NewTaskFragment。这个片段有一个布局，其中包含一个 EditText 和一个 Button View。当用户输入文本并按下“完成”按钮时，测试被添加到 ListView。

问题：只要不发生设备旋转，一切都会按预期工作。无论我在将项目添加到列表之前还是之后旋转设备，我都会收到以下错误，

```
10-18 23:19:40.838: E/TaskListActivity(2021): Fragment has a null value
10-18 23:19:40.848: E/AndroidRuntime(2021): FATAL EXCEPTION: main
10-18 23:19:40.848: E/AndroidRuntime(2021): java.lang.NullPointerException
10-18 23:19:40.848: E/AndroidRuntime(2021):     at com.sample.testapp.TasksListActivity.onNewTaskAdded(TasksListActivity.java:169)
10-18 23:19:40.848: E/AndroidRuntime(2021):     at com.sample.testapp.NewTaskFragment$2.onClick(NewTaskFragment.java:63)
10-18 23:19:40.848: E/AndroidRuntime(2021):     at android.view.View.performClick(View.java:2449)
10-18 23:19:40.848: E/AndroidRuntime(2021):     at android.view.View$PerformClick.run(View.java:9027) 
```

我的活动如下所示：

```
public class TasksListActivity extends SherlockFragmentActivity 
        implements TasksListFragment.OnTaskSelectedListener,    NewTaskFragment.OnNewTaskAddedListener {

    private ArrayList<Task> tasks;
    private String taskName;
    private TasksListFragment firstFragment;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.tasks_list);

            if (findViewById(R.id.fragment_container) != null) {

                if (savedInstanceState != null) {
                    return;
                }

            firstFragment = new TasksListFragment();

            // In case this activity was started with special instructions from an Intent,
            // pass the Intent's extras to the fragment as arguments
            firstFragment.setArguments(getIntent().getExtras());

            // Add the fragment to the 'fragment_container' FrameLayout
            getSupportFragmentManager().beginTransaction()
                    .add(R.id.fragment_container, firstFragment).commit();
        }
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {

        case R.id.menu_new:
            //Toast.makeText(this, "Tapped new task", Toast.LENGTH_SHORT).show();

            // try code from Fragment sample
            NewTaskFragment newTaskFragment = (NewTaskFragment)getSupportFragmentManager().findFragmentById(R.id.task_fragment);

            if(newTaskFragment != null){
                // if itemFragment is available we are in two-pane layout

                // Call method in NewItemFragment to update its content
                //itemFragment.
            }
            else{
                // if the frag is not available, we are in one-pane layout and must swap fragments

                // Create fragment and give it an argument for the selected article
                newTaskFragment = new NewTaskFragment();
                Bundle args = new Bundle();
                //args.putInt(NewItemFragment.ARG_POSITION, position);
                newTaskFragment.setArguments(args);
                FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();

                // Replace whatever is in the fragment_container view wiht this fragment,
                // and add the transaction to the back stack so the user can navigate back
                transaction.replace(R.id.fragment_container, newTaskFragment);
                transaction.addToBackStack(null);

                // Commit the transaction
                transaction.commit();

            }
            break;
        }
        return super.onOptionsItemSelected(item);
    }
}

    public void onNewTaskAdded(String newItem){
        this.taskName = newItem;
        if(firstFragment == null){
            Log.e("TaskListActivity", "Fragment has a null value");
        }

        firstFragment.onItemAdded(this.taskName);  // This is line 169

        FragmentTransaction transaction = getSupportFragmentManager().beginTransaction();
        transaction.replace(R.id.fragment_container, firstFragment);

        transaction.addToBackStack(null);

        // Commit the transaction
        transaction.commit();

    } 
```

NewItemFragment 具有以下内容（界面未显示）：

```
public class NewTaskFragment extends SherlockFragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){

    // Inflate the layout for this fragment
    View view = inflater.inflate(R.layout.new_task_fragment, container, false);

    int layout = R.layout.new_task_fragment;
    Log.v("NewTaskFragment", "The layout to use is (NewTask): " + layout);

    final EditText myEditText = (EditText)view.findViewById(R.id.newTask);
    final Button doneButton = (Button)view.findViewById(R.id.addNewTask);
    final InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);

    doneButton.setOnClickListener(new View.OnClickListener() {  
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            String newItem = myEditText.getText().toString();
            onNewTaskAddedListener.onNewTaskAdded(newItem);   // This is line 63
            myEditText.setText("");
            imm.hideSoftInputFromWindow(getView().getWindowToken(), 0);
        }
    });

    return view;

} 
```

我已经用 NullPointerException 标记的注释行 169（活动）和 63（片段）突出显示。我在 onNewTaskAdded 上添加了一些代码，并且能够确认在旋转后片段的值为空。有人可以帮我找出为什么对象在旋转后变为空（因此出现 NullPointerException）？让我知道是否需要其他详细信息。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:07:40.927

当你旋转你的设备时，它会强制调用 onCreate() 函数，并且 savedInstanceState != null 现在可能是真的。

如果你不想在它旋转时再次 onCreate()，你可以这样做：

首先，将此行添加到您的 androidmanifest.xml 中：

```
android:configChanges="orientation|keyboardHidden" 
```

然后修改你的activity.java：

```
@Override  
public void onConfigurationChanged(Configuration newConfig) {  
  // TODO Auto-generated method stub  
  super.onConfigurationChanged(newConfig);  
  if (this.getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE) {  

  } else if (this.getResources().getConfiguration().orientation == Configuration.ORIENTATION_PORTRAIT) {  

  }  
} 
```

# sql-server - 使用表值函数代码

> ID：12967467
> 
> 赞同：0
> 
> 时间：2012-10-19T04:37:52.153
> 
> 标签：sql-server, sql-server-2008, sql-server-2005, sql-server-2008-r2

```
<pre>
I have 3 tables and one table valued function: EmpHistory,EmpRank,Emp and fnEmpRank.
The sample data are given as follows:
EmpHistory
EmpHistID  EmpID  RankID  MonitorDate  RankName
1          aba     JPR     2008-10-06   Junior Prof
2          aba     JPR     2009-11-07   Junior Prof
3          aba     TERM    2012-2-08    Termoinated Prof
4          aba     ASST    2012-6-22     lab Assistant
5          aba     ASST    2012-7-2      Lab Assistant
6          aba     TSST    2012-8-4      Terminated Assistant

EmpRank
RankID    RankName
JPR       Junior Professor
SPR       Senior Professor
ASST      Junior Assistant
SASST     Senior Assistant
PL        Principal

Employee
EmpID    EmpStartDate
aba       2008-10-06
abc01     2007-09-23
sdh        2009-7-26
sbs        2012-2-8

The fnEmpRank function takes the emproleID and gives the employee history same as the empHistory Table. There is also empoyeerole table which has employeeroleid column.

Now my problem is: I want the second last professor rank of the employee i.e in this case I want Junior Professor row(i.e) 2nd row from emphistory table). Currntly my code is using emphistory table but now intead of that table I want to use fnEmpRank as it gives the same data. I am also giving the sample code.

select
a.EmpID,
a.StartDate,
J.RankID,
c.MonitorDate,
from dbo.vwEmployee A(nolock)
INNER join dbo.EmpHistory c(nolock) on c.Empid = a.EmpID
and c.EmpHistoryID = (select max(c1.EmpHistoryID)
            from dbo.EmpHistory c1(nolock)
            where c1.Empid = c.EmpID
            and c1.MonitorDate = 
                    ( 
```

我有 3 个表和一个表值函数：EmpHistory、EmpRank、Emp 和 fnEmpRank。样本数据如下：

创建表 EmpHistory( EmpHistID int, EmpID varchar, RankID varchar, Monitordate Date, Rankname varchar)

insert into EmpHistory select 1,'aba','JPR','2008-10-6','Junior Professor'

insert into EmpHistory select 2,'aba','JPR','2009-11-7','Junior Professor'

插入 EmpHistory 选择 3,'aba','TERM','2012-2-8','Terminated Prof'

插入 EmpHistory 选择 4,'aba','ASST','2012-6-22','Lab Assistant'

插入 EmpHistory 选择 5,'aba','ASST','2012-7-2','Lab Assistant'

插入 EmpHistory 选择 1,'aba','JPR','2012-8-4','Terminated Assistant'

创建表 EmpRank( RankID varchar, RankName varchar )

插入 EmpRank 选择“JPR”、“初级教授”

插入 EmpRank 选择“SPR”、“高级教授”

插入 EmpRank 选择“ASST”、“初级助理”

插入 EmpRank 选择“SASST”、“高级助理”

插入 EmpRank 选择 'PL','Principal'

创建表 Employee( EmpID varchar, EmpStartDate date )

插入员工选择'aba'，'2008-10-06'

插入员工选择'abc01'，'2007-9-23'

插入员工选择'sdh'，'2009-7-26'

插入员工选择'sbs'，'2012-2-8'

```
The fnEmpRank function takes the emproleID and gives the employee history same as the empHistory Table. There is also empoyeerole table which has employeeroleid column.

Now my problem is: I want the second last professor rank of the employee i.e in this case I want Junior Professor row(i.e) 2nd row from emphistory table). Currntly my code is using emphistory table but now intead of that table I want to use fnEmpRank as it gives the same data. I am also giving the sample code.

select
a.EmpID,
a.StartDate,
J.RankID,
c.MonitorDate,
from dbo.vwEmployee A(nolock)
INNER join dbo.EmpHistory c(nolock) on c.Empid = a.EmpID
and c.EmpHistoryID = (select max(c1.EmpHistoryID)
            from dbo.EmpHistory c1(nolock)
            where c1.Empid = c.EmpID
            and c1.MonitorDate = 
                    (
                    SELECT MAX(C2.MonitorDate)
                    FROM dbo.EmpHistory C2
                    WHERE C2.EmpID = C1.EmpID
                    )

                    )
join dbo.EmpRank d(nolock) on d.RankID = a.RankID
left join dbo.EmpHistory f(nolock) on f.EmpID = a.EmpID
    and f.EmpHistoryID = (select max(g.EmpHistoryID)
                from dbo.EmpHistory g(nolock)
                where g.EmpID = a.EmpID
                AND G.RankID not like 'T%'
                and g.EmpHistoryID &lt; c.EmpHistoryID)
left join dbo.EmpRank h(nolock) on h.RankID = f.RankID

LEFT JOIN dbo.EmpHistory J(NOLOCK) ON J.EmpID = A.EmpID 
    AND J.EmpHistoryID = (
        SELECT max(K.EmpHistoryID )
        FROM dbo.EmpHistory K(NOLOCK) 
        WHERE K.EmpID = J.EmpID
        AND K.AgentRankID NOT LIKE 'T%'
        AND K.MonitorDate = (
            SELECT max(M.MonitorDate )
            FROM dbo.EmpHistory M(NOLOCK)
            WHERE M.EmpID = J.EmpID 
            AND M.RankID NOT LIKE 'T%'
        )
    )

where
A.Prof=1
 c.RankID like 'T%'
AND c.RankID <>'TSST'
AND A.StartDate is not null

Here there is one more problem: Even if the Employee is terminated from professor to Assitant, A.Prof values is still 1 and basically Assistant dont have the start dates but when professor are transformed to Assitant, they still contain the start date. How can I handle this in the code. Basically this code assumes that that if emp has the start date then he is the professor. Can any one help me?

                    SELECT MAX(C2.MonitorDate)
                    FROM dbo.EmpHistory C2
                    WHERE C2.EmpID = C1.EmpID
                    )

                    )
join dbo.EmpRank d(nolock) on d.RankID = a.RankID
left join dbo.EmpHistory f(nolock) on f.EmpID = a.EmpID
    and f.EmpHistoryID = (select max(g.EmpHistoryID)
                from dbo.EmpHistory g(nolock)
                where g.EmpID = a.EmpID
                AND G.RankID not like 'T%'
                and g.EmpHistoryID < c.EmpHistoryID)
left join dbo.EmpRank h(nolock) on h.RankID = f.RankID

LEFT JOIN dbo.EmpHistory J(NOLOCK) ON J.EmpID = A.EmpID 
    AND J.EmpHistoryID = (
        SELECT max(K.EmpHistoryID )
        FROM dbo.EmpHistory K(NOLOCK) 
        WHERE K.EmpID = J.EmpID
        AND K.AgentRankID NOT LIKE 'T%'
        AND K.MonitorDate = (
            SELECT max(M.MonitorDate )
            FROM dbo.EmpHistory M(NOLOCK)
            WHERE M.EmpID = J.EmpID 
            AND M.RankID NOT LIKE 'T%'
        )
    )

where
A.Prof=1
 c.RankID like 'T%'
AND c.RankID <>'TSST'
AND A.StartDate is not null

Here there is one more problem: Even if the Employee is terminated from professor to Assitant, A.Prof values is still 1 and basically Assistant dont have the start dates but when professor are transformed to Assitant, they still contain the start date. How can I handle this in the code. Basically this code assumes that that if emp has the start date then he is the professor. Can any one help me?
</pre> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:01:37.693

```
 create fnemprank(@inputrankid int)
 returns @result table(
         EmpHistID int,
         EmpID nvarchar,
         RankID nvarchar,
         MonitorDate  date,
         RankName nvarchar)
 as
 begin
     insert into @result (EmpHistID,EmpID,RankID,MonitorDate,RankName)
     select top 1 * from emphistory eh where eh.rankid=@inputrankid 
     order by eh.monitordate desc
 return
 end 
```

# c++ - 如何将结构从 C++ 应用程序传递到 C++ Win32 DLL？

> ID：12967469
> 
> 赞同：2
> 
> 时间：2012-10-19T04:38:06.957
> 
> 标签：c++, c, dll, struct

如何将结构从 C++ 应用程序传递到 C++ Win32 DLL？

你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T04:49:08.020

您可以传递一个指针，因为 Windows 中的 DLL 与程序位于同一地址空间。

但是请注意，DLL 接口停在那里，并且您（通常）没有共享内存管理，并且您通常不能通过例如 an`std::vector`并期望 DLL 能够访问`push_back`新元素。原因是 DLL 通常有自己的内存管理器和堆，与调用者分离（毕竟 DLL 可以从任何语言调用，不一定是 C++）。

即使传递一个`std::map`并拥有 DLL 并且仅仅读取它可能会令人惊讶，因为标准库中的某些容器依赖于“哨兵”，并且这些容器也可以为 DLL 复制。

在上面我使用了“一般”这个术语，因为 DLL 可能有一些技巧可以与主进程共享内存管理。例如，自 VC6（但不是标准库！）以来，Microsoft MFC 被设计为在这些 DLL 障碍中正常工作。

您还必须确保使用完全相同的编译器和编译选项编译 DLL 和主程序，否则即使是普通结构也可能具有不同的内存布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:56:38.510

你是怎么`struct`定义的？它是一个 POD 吗？它是一个简单的 C`struct`吗？还是它的`struct`成员是 STL 类的实例？

如果`struct`是“纯 C” `struct`，那么您可以简单地将其传递给 DLL。

但是如果`struct`有 STL 类作为数据成员，那么您必须确保 .EXE 和 .DLL 都使用**到 CRT 的动态链接**，并且是使用**相同版本的 Visual C++ 编译器**和**相同风格的 CRT**构建的（例如，您如果你有一个 debug-build .EXE 和一个 release-build .DLL ，则不能在边界传递 STL 类，因为 STL 容器的实现会从调试版本变为发布版本；并且你不能在边界传递 STL 类如果你有一个用 VC10 构建的 .EXE 和一个用 VC9 构建的 .DLL）。

此外，您可能想阅读 CodeProject 上的这篇有趣的文章： **“ [HowTo: Export C++ classes from a DLL](http://www.codeproject.com/Articles/28969/HowTo-Export-C-classes-from-a-DLL) ”**。

# iis-7 - Octopus Deploy 不更新网站

> ID：12967472
> 
> 赞同：5
> 
> 时间：2012-10-19T04:38:38.260
> 
> 标签：iis-7, web-deployment, octopus-deploy

我正在使用章鱼部署将我的网站推送到环境中

代码到达服务器，但章鱼不会将 Web 应用程序更改为指向新目录。

例如

MVC4WebSite 是一个映射到 C:\Sites\dev\MVC4WebSite\1.0.0.0 的 Web 应用程序

我部署我的包

新代码出现在 C:\Sites\dev\MVC4WebSite\1.0.0.1

我希望 MVC4WebSite 将映射到 C:\Sites\dev\MVC4WebSite\1.0.0.1 但它仍然映射到 C:\Sites\dev\MVC4WebSite\1.0.0.0

我在日志中收到此消息。

'在本地计算机上找不到名为 'MVC4WebSite' 的 IIS 网站或虚拟目录。如果您希望 Octopus 为您更新此内容，您应该手动创建站点和/或虚拟目录。否则，您可以忽略此消息。

我肯定已经创建了该站点（作为 Web 应用程序）。

规格 Win Server 2008 r2 IIS7 Octopus 版本 1.0.30.1340

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T08:50:37.907

好的，看来我没有正确解释说明。

我将术语站点解释为部署为虚拟目录或 Web 应用程序的任何代码......正确的意思是实际站点，例如。“默认网站”

我需要定义一个自定义变量来覆盖 OctopusWebSiteName 预定义变量，其值为“Default Web Site/MVC4WebSite”。

真是浪费了一个下午:(

# android - 如何在 ExpandableView 中识别“onClick 视图”并获取“groupId”

> ID：12967474
> 
> 赞同：1
> 
> 时间：2012-10-19T04:38:45.537
> 
> 标签：android, onclick, expandablelistview, onclicklistener, expandablelistadapter

从下面的代码（在 ExpandableView 适配器中）单击图像 (iv) 后如何获取组 ID。如果用户单击组列表，我想像往常一样展开它，但是如果用户单击组列表中的图像，我想调用其他一些操作，并且需要 SampleGroup 的 id。

```
public View getGroupView(int groupPosition, boolean isExpanded, View converView, ViewGroup parent){

     SampleGroup group = (SampleGroup)getGroup(groupPosition);

     if(convertView == null){
          LayoutInflater layoutInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
          convertView = layoutInflater.inflate(R.layout.list_group, null);
     }

     ImageView iv = (ImageView)convertView.findViewById(R.id.some_iv):
     TextView tv = (TextView)convertView.findViewById(R.id.some_tv);

     iv.setImageDrawable(group.getImage());
     iv.setOnClickListener(onClickLintener);
     tv.setText(group.getText());
}

OnClickListener onClickLintener = new OnClickListener() {
    @Override
    public void onClick(View v) {
        //How to get group id here???
    }
};

public class SampleGroup{
     private int id;
     private String name;
     private Drawable image;

     public SampleGroup(int id, String name, Drawable image){
          this.id = id;
          this.name = name;
          this.image = image;
     }

     public int getId(){
          return id;
     }

     public void setId(int id){
          this.id = id;
     }

     public String getName(){
          return name;
     }

     public void setName(String name){
          this.name = name
     }

     public Drawable getImage(){
          return image;
     }

     public void setImage(Drawable image){
          this.image = image
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T04:53:53.877

试试这个：

```
public View getGroupView(int groupPosition, boolean isExpanded, View converView, ViewGroup parent){
  ......
  ImageView iv = (ImageView)convertView.findViewById(R.id.some_iv);
  iv.setTag(group.id);
} 
```

然后

```
OnClickListener onClickLintener = new OnClickListener() {
  @Override
  public void onClick(View v) {
      //How to get group id here???
      int groupId = (Integer) v.getTag();
  }
}; 
```

# wordpress - Video Sidebar Widgets 插件的通知和警告

> ID：12967475
> 
> 赞同：0
> 
> 时间：2012-10-19T04:38:53.637
> 
> 标签：wordpress, video, plugins

当我尝试删除帖子或更新内容时，我会收到通知和警告：

> 注意：未定义索引：第 296 行 /mysite/wp-content/plugins/video-sidebar-widgets/class-postmetavideowidget.php 中的 vsw_noncename
> 
> 警告：无法修改标头信息 - 标头已由 /mysite/wp-includes/pluggable.php 中的 /mysite/wp-content/plugins/video-sidebar-widgets/class-postmetavideowidget.php:296 发送881行

¿ 对此有任何提示吗？我试图通过删除文件中的空格来解决标题信息问题，如法典所说，但没有结果，所以，可能是另一回事。

我正在使用 wordpress 3.4.2，插件版本是 5.3（最新）和自定义主题（使用 Theme-Check 检查，没有发现问题）

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:22:16.060

该插件有一个错误 - 它没有检查以确保 $_POST 中存在 nonce 字段。调用的许多类型的操作`save_post`将没有此字段，因为它仅添加在帖子编辑器中（插件的第 154 行）。

您应该在验证之前检查以确保 nonce 字段存在。如果它不存在，就从函数中返回。

要更正它，请将第 296-297 行更改为：

```
if ( !isset($_POST['vsw_noncename']) || !wp_verify_nonce( $_POST['vsw_noncename'], plugin_basename( __FILE__ ) ) )
    return; 
```

# wpf - WPF，与 TemplatedParent 绑定时有趣的事情

> ID：12967478
> 
> 赞同：3
> 
> 时间：2012-10-19T04:39:06.173
> 
> 标签：wpf, binding, controltemplate

控制模板：

```
 <ControlTemplate x:Key="BasicShape2">
    <StackPanel Name="sp">
        <Border Name="bd" CornerRadius="3.5" BorderThickness="1" BorderBrush="{Binding RelativeSource={RelativeSource TemplatedParent},Path=DataContext.NodeType, Converter={StaticResource NodeTypeColorConverter}, Mode=OneWay}" Height="32" Padding="1">
            <TextBlock Name="tbName" Grid.Column="1" Text="" HorizontalAlignment="Center" VerticalAlignment="Bottom" FontSize="16" />
        </Border>
    </StackPanel>
</ControlTemplate> 
```

此模板将应用于的类：

```
 public class MyThumbEx : Thumb
{
    public static readonly DependencyProperty MemberInfoProperty = DependencyProperty.Register("MemberInfo", typeof(FamilyMemberInfo), typeof(MyThumbEx));
    public FamilyMemberInfo MemberInfo
    {
        get { return (FamilyMemberInfo)GetValue(MemberInfoProperty); }
        set { SetValue(MemberInfoProperty, value); }
    }

    public MyThumbEx(ControlTemplate template, FamilyMemberInfo info, Point position)
    {
        this.MemberInfo = info;
        this.DataContext = this.MemberInfo;
        this.Template = template;
    }

    public override void OnApplyTemplate()
    {
        base.OnApplyTemplate();
        this.ApplyTextContent();
    }

    public void ApplyTextContent()
    {
        TextBlock tbName = this.Template.FindName("tbName", this) as TextBlock;
        if (tbName != null)
        {
            tbName.Text = this.MemberInfo.Name;
        }
    }
} 
```

初始化并将其显示在画布上：

```
 public MainWindow()
    {
        InitializeComponent();
        //
        FamilyMemberInfo mi = new FamilyMemberInfo();
        mi.Name = "someone";
        mi.ID = "id1";
        MyThumbEx te = new MyThumbEx(Application.Current.Resources["BasicShape2"] as ControlTemplate, mi, new Point(0, 0));
        //
        this.cvMain.Children.Add(te);
    } 
```

这些代码工作正常，但请注意，在控件模板中，我必须设置 Path=DataContext.NodeType，而不仅仅是 Path=NodeType。我是 WPF 的新手，我发现通常情况下，当我在不使用此模板的情况下进行绑定时，我不需要指定谓词“DataContext”，对吧？为什么我们需要这里？

我发现的另一件事是，我可以注释掉 this.DataContext = this.MemberInfo，并将绑定路径更改为 Path=MemberInfo.NodeType，代码仍然可以正常工作。谁能为我解释一下？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:09:25.360

如果您不手动更改 DataContext，则每个子项都会自动拥有其父项的 DataContext。因此，如果您的 Window 将 ViewModel 作为 DataContext ，则其所有控件都可以通过`{Binding Path=Property}`.

但是在 ControlTemplate 的情况下，DataContext 只是从父级级联到子级的通常典型流程在这里不适用。因此，您必须首先设置 DataContext，通过`Property="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=DataContext.Property}"`或`DataContext="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=DataContext}" Property="{Binding Path=Property}"`。

第二点：ControlTemplate 可能会自动使用其包含元素的代码隐藏作为 DataContext，因此您可以在不设置 DataContext 的情况下使用代码隐藏属性，但我对此不是 100% 确定。

# actionscript-3 - 如何立即从本地数据加载 swf

> ID：12967479
> 
> 赞同：0
> 
> 时间：2012-10-19T04:39:14.133
> 
> 标签：actionscript-3, flash

我想将 swf 数据保存在本地，这样我就可以一次又一次地重新创建它。虽然大多数 Web 浏览器都有缓存机制，但一旦下载了资源，应用程序就可以从本地获取资源。但是浏览器仍然需要检查远程服务器文件的时间戳，以确保远程文件没有更新。这会导致进程延迟。

我想自己处理，所以我将下载的数据保存在应用程序中。问题是我没有找到一种方法来立即重新创建加载的 swf 的新实例。例如，如果我下载 jpeg 文件，我终于得到了一个位图数据，所以我保留了位图数据，如果我需要一个副本，我只需使用 clone() 。但 swf 不同，我不知道如何克隆 swf 实例。

我的方法是将 swf 作为二进制数组加载，并通过 Loader.loadBytes 加载，这是我的代码。

```
 public static function loadSWFByte(data:ByteArray,callback:Function,domain:ApplicationDomain):void{
        var loader:Loader = new Loader();
        var f:Function = function(e:Event):void{
            loader.contentLoaderInfo.removeEventListener(Event.COMPLETE,f);
            if(callback!=null){
                callback(loader.content,loader.contentLoaderInfo);
            }
        }
        loader.contentLoaderInfo.addEventListener(Event.COMPLETE,f);
        loader.loadBytes(data,new LoaderContext(false,domain));
    } 
```

如果我需要创建它，我总是使用回调，从而使编码变得复杂。有没有一种方法可以在不使用回调的情况下获取实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:51:41.377

加载 SWF 字节或从 URL 始终是异步的，但您可以加载一次并每次克隆：

```
// when loader load is complete
var cl:Class = loader.content["constructor"];
var clone:* = new cl(); 
```

# css - css堆叠div

> ID：12967480
> 
> 赞同：0
> 
> 时间：2012-10-19T04:39:22.863
> 
> 标签：css

我想堆叠 div 以使用和图像显示顶部和底部淡入淡出。

外部 div（“旋转器”）有一个背景图像，该图像在顶部和底部具有渐变，在中间是透明的。在中间，我想显示内容或图像，并在顶部放置外部 div 背景图像，因此您始终会看到顶部和底部的渐变以及后面的内容/图像。

谢谢你的帮助。现在背景图像总是被内部 div 内容/图像覆盖。

这是我的代码：

```
<div id="rotator">
<div class="content">this is my content</div>
</div>

#rotator 
{
    width:990px;
    height:300px;
    background: url('../Images/TIBC_Base/featured_area.png') repeat-x;
z-index:99;

}
#rotator .content
{
    width:990px;
    height:300px;
z-index:-1;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:07:01.180

我在下面的样式中添加了新`.image-frame`的 div来带来阴影。并检查更新的[代码](http://jsfiddle.net/TgQ5s/5/)。`#rotator``.content`

```
#rotator 
{
    width:990px;
    height:300px;
    position:relative;
}
.image-frame{
    position:absolute;
    left:0;
    top:0;
    width:100%;
    height:100%;
    background: url('http://i47.tinypic.com/2lctevc.png') repeat-x;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:45:31.073

当您使用 z-index 属性时，必须使用**position属性，尝试使用类似的东西**

**职位：相对**

```
<div id="rotator">
<div class="content">this is my content</div>
</div>

    #rotator 
    {
        width:990px;
        height:300px;
        background: url('../Images/TIBC_Base/featured_area.png') repeat-x;
    position:relative;
    z-index:99;

    }

    #rotator .content
    {
        width:990px;
        height:300px;
    position:relative;
    z-index:-1;
    } 
```

# jquery - 如何修复jquery悬停中的连续动画

> ID：12967481
> 
> 赞同：0
> 
> 时间：2012-10-19T04:39:31.767
> 
> 标签：jquery, hover

如果您尝试在绿色盒子上悬停和悬停，每秒 5 次或更多次，您会看到盒子像球一样弹跳。我想要发生的是，当绿色框恢复到其原始大小（50px）时，将再次启用悬停。这样每当我做得更快时`hover-in`，`hover-out`动画就不会像弹跳一样。
希望你明白我的意思。
这是我的[小提琴](http://jsfiddle.net/MyNameIsCode/qTyyA/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:02:31.223

如果您想使用现有代码并在完全放大/缩小（不使用`jQuery.stop()`）后禁用放大/缩小 X 时间段，您可以使用该`data()`方法在 DOM 元素上设置变量并使用`setTimeout()`清除它。在此示例中，缩小后两个操作都将被禁用 1 秒（1000 毫秒）。

```
$img.hover(
    function(){
       // do not zoom in if currently disabled
       if (!$(this).data('disabled')){
            $(this).animate({
               height: o.contentHeight,
               width: o.contentWidth,
               left: "-=" + leftDistance,
               top: "-=" + topDistance
            }, o.speed);  
        }             
    }, 
    function(){
       // do not zoom out if currently disabled
         if (!$(this).data('disabled')){
            // disable zoom in/out by setting 'disabled=true'
            $(this).data('disabled', true);
            // alias this to a variable
            var $this = $(this);
            // use setTimeout to clear the variable after 1000ms
            setTimeout(function(){ $this.data('disabled', false); }, 1000);
            $(this).animate({
               height: o.imageInitHeight,
               width: o.imageInitWidth,
               left: "+=" + leftDistance,
               top: "+=" + topDistance
            }, o.speed);
        }
    }            
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:46:18.913

这是因为动画被推送到队列中（并非所有动画同时播放）如果移动速度非常快，很多动画会排入队列，并按时间顺序播放。这是正常行为。

如果要修复此效果，则需要在每次开始另一个动画时清空动画队列。

使用此代码，您将获得您所期望的

```
$img.hover(
        function(){                
            $(this).stop(true).animate({
               height: o.contentHeight,
               width: o.contentWidth,
               left: "-=" + leftDistance,
               top: "-=" + topDistance
            }, o.speed);                
        }, 
        function(){
            $(this).stop(true).animate({
               height: o.imageInitHeight,
               width: o.imageInitWidth,
               left: "+=" + leftDistance,
               top: "+=" + topDistance
            }, o.speed);
        }            
    ); 
```

该`stop(true)`方法将重置未来动画的队列。

当然，这并不能解决整个问题，因为您现在的位置计算会出现剩余问题。

你应该回顾这部分，并尝试使用更简单的动画

这是一个工作示例：[工作示例](http://jsfiddle.net/qTyyA/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T04:55:35.363

要解决这样的问题，您可以利用 HoverIntent (Plugin)。

[http://cherne.net/brian/resources/jquery.hoverIntent.html](http://cherne.net/brian/resources/jquery.hoverIntent.html)

使用简单，灵活。

# javascript - 对于新支持的功能，是否有一个好的 javascript 后备库

> ID：12967484
> 
> 赞同：1
> 
> 时间：2012-10-19T04:40:09.123
> 
> 标签：javascript, ecmascript-5

我想知道是否有一个很好的后备 JavaScript 库可以为较新的 ECMA 规范中定义的函数创建不受支持的函数。我正在使用一个库，它使用了一堆仅在较新的浏览器中支持的函数，所以我想填充这些函数而不是重写库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:41:59.510

[es5-shim](https://github.com/kriskowal/es5-shim)尽可能地做到了这一点。

# ruby-on-rails - Rails：如何使用复选框填充表格中的数据

> ID：12967486
> 
> 赞同：0
> 
> 时间：2012-10-19T04:40:13.660
> 
> 标签：ruby-on-rails, checkbox

我是一名 Rails 初学者，并且已经在网上（包括 Ryan 的 Railcasts）搜索有关此主题的信息，但我尝试过的一切都没有成功。

我试图允许用户将他们喜欢的零食类型添加到表中。我现在有三张表：零食（主表）、冰淇淋口味和品牌。我建立的关系是：

```
class Treats < ActiveRecord::Base

has_many :icecream_flavors
has_many :brands

class Brands < ActiveRecord::Base

belongs_to :treats

class Icecream_flavors < ActiveRecord::Base

belongs_to :treats 
```

在 Treats 表中，我有 Icecream_flavor_id 和 Icecream_brand_id 的字段。
在 Icecream_flavors 表中，我有 flavor_name 和 brand_id 的字段。我在 Icecream_flavors 表中植入了信息（巧克力、香草等）以及品牌 ID。

我正在尝试做的是允许最终用户使用我的 Treats 新表单中的复选框来填充 Treats 表，这些复选框基于 Icreamflavors 表中的信息。我希望复选框将 icecream_flavor_id 和 brand_id 传递给 Treats 表。

我没有成功让复选框表单出现在“零食”表单中，更不用说将信息传递给表格了。

这是我一直使用的代码，用于从单独的 Brands 和 Icecream_flavors 表中提取信息的下拉和文本字段。我想用一个简单的复选框列表替换下拉和文本字段，该列表将仅从 Icecream_flavors 表中获取其数据以填充复选框数据，然后在提交时更新 Treats 表。

```
<h1>Treats</h1>

<%= render 'form' %>

<%= link_to 'Back', treats_path %>

<% form_for :treat, :url => treats_path do |f| %>

<div class="field">
<%= f.label :user_id %><br />
<%= f.number_field :user_id %>
</div>

<div><%= f.label :brand %><br />
<%= collection_select(:treats, :brand_id, Brand.all, :id, :name) %> 

<div class="field">
<%= f.label :icecream_flavor_id %><br />
<%= f.number_field :icecream_flavor_id %>
</div>

<div class="actions">
<%= f.submit %>
</div>

<% end %> 
```

任何指导将不胜感激。

# php - 解析结构化和非结构化文本的混合

> ID：12967497
> 
> 赞同：1
> 
> 时间：2012-10-19T04:41:17.203
> 
> 标签：php, regex, string

我需要解析格式如下的文本块：

```
Today the weather is excellent bla bla bla.
<temperature>35</temperature>. 
I'm in a great mood today. 
<item>Desk</item> 
```

我想解析这样的文本，并将其转换为类似于这样的数组：

```
$array[0]['text'] = 'Today the weather is excellent bla bla bla. ';
$array[0]['type'] = 'normalText';

$array[1]['text'] = '35';
$array[1]['type'] = 'temperature';

$array[2]['text'] = ". I'm in a great mood today.";
$array[2]['type'] = 'normalText';

$array[3]['text'] = 'Desk';
$array[3]['type'] = 'item'; 
```

本质上，我希望数组以与原始文本相同的顺序包含所有文本，但分为以下类型：普通文本（表示不在任何标签之间的内容）和其他类型，如温度、项目、由文本之间的标签决定。

有没有办法做到这一点（即使用正则表达式将文本分成普通文本和其他类型）或者我应该在幕后将文本转换为结构正确的文本，例如：

```
<normal>Today the weather is excellent bla bla bla.</normal>
<temperature>35</temperature>.
<normal> I'm in a great mood today.</normal><item>Desk</item> 
```

在它尝试解析文本之前？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:17:02.533

**编辑：**现在它完全按预期工作！

**解决方案：**

```
<?php

$code = <<<'CODE'
Today the weather is excellent bla bla bla.
<temperature>35</temperature>. 
I'm in a great mood today. 
<item>Desk</item>
CODE;

$result = array_filter(
    array_map(
        function ($element) {
            if (!empty($element)) {
                if (preg_match('/^\<([^\>]+)\>([^\<]+)\</', $element, $matches)) {
                    return array('text' => $matches[2],
                                 'type'    => $matches[1]);
                } else {
                    return array('text' => $element,
                                 'type'    => 'normal');
                }
            }
            return false;
        },
        preg_split('/(\<[^\>]+\>[^\<]+\<\/[^\>]+\>)/', $code, null, PREG_SPLIT_DELIM_CAPTURE)
    )
);

print_r($result); 
```

**输出：**

```
Array
(
    [0] => Array
        (
            [text] => Today the weather is excellent bla bla bla.

            [type] => normal
        )

    [1] => Array
        (
            [text] => 35
            [type] => temperature
        )

    [2] => Array
        (
            [text] => . 
I'm in a great mood today. 

            [type] => normal
        )

    [3] => Array
        (
            [text] => Desk
            [type] => item
        )

) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:36:13.857

尝试逐行阅读文本。你有2个案例。添加普通文本和添加具有特殊标签的文本。在将普通文本添加到变量时，查找带有正则表达式的标记。

```
preg_match("/\<(\w)\>/", $line_from_text, $matches) 
```

匹配标签，() 将单词保存在 $matches 中以与您的数组一起使用。现在只需将文本添加到变量中，直到遇到结束标记。希望这可以帮助。

# android - Android TTS 语音合成器

> ID：12967498
> 
> 赞同：2
> 
> 时间：2012-10-19T04:41:24.767
> 
> 标签：android, text-to-speech

我想知道是否有任何方法可以将输入保存到 android 扬声器。我的意思是保存扬声器正在播放的当前声音。我需要这个因为 android TTS 语音合成器不起作用。所以我无法保存音频,我可以玩。谢谢你，斯里坎特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T09:13:26.243

通过以下代码解决了问题（android TTS 开始工作）

```
public class TextToSpeechActivity extends Activity implements OnInitListener {
  private static TextToSpeech mTts;
  private int MY_DATA_CHECK_CODE    =   0;
  private Button mSpeakButton;
 //String name;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mSpeakButton  = (Button)findViewById(R.id.btnSpeak);        
        mSpeakButton.setEnabled(false);
        mSpeakButton.setOnClickListener(new OnClickListener() {  
           @Override
           public void onClick(View v) {
            sayHello();
           }
        });

        Intent checkTTSIntent = new Intent();
        checkTTSIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
        startActivityForResult(checkTTSIntent, MY_DATA_CHECK_CODE); 

    }

    public void onInit(int status){
  // TODO Auto-generated method stub
  if (status == TextToSpeech.SUCCESS) {
             // Set preferred language to US english.
            // Note that a language may not be available, and the result will indicate this.
            int result = mTts.setLanguage(Locale.US);
            // Try this someday for some interesting results.
            // int result mTts.setLanguage(Locale.FRANCE);
            if (result == TextToSpeech.LANG_MISSING_DATA ||
                result == TextToSpeech.LANG_NOT_SUPPORTED) {
               // Lanuage data is missing or the language is not supported.
                Log.e("TAG", "Language is not available.");
            }
            else 
            {
                // Check the documentation for other possible result codes.
                // For example, the language may be available for the locale,
                // but not for the specified country and variant.

                // The TTS engine has been successfully initialized.
            }
        } else {
            // Initialization failed.
            Log.e("TAG", "Could not initialize TextToSpeech.");
        }

 }

    private void sayHello() 
    {        
        String speakTextTxt                  = "Good morning,have a nice day";
        HashMap<String, String> myHashRender = new HashMap<String, String>();
        myHashRender.put(TextToSpeech.Engine.KEY_PARAM_UTTERANCE_ID, speakTextTxt);

        String exStoragePath                = Environment.getExternalStorageDirectory().getAbsolutePath();
        File appTmpPath                     = new File(exStoragePath);
        appTmpPath.mkdirs();
        String tempFilename                 = "tmpaudio.wav";
        String tempDestFile                 = appTmpPath.getAbsolutePath() + "/" + tempFilename;

        mTts.synthesizeToFile(speakTextTxt, myHashRender, tempDestFile);
    }

 @Override
 protected void onDestroy() {
  // TODO Auto-generated method stub
      super.onDestroy();
         if (mTts != null) {
             mTts.stop();
             mTts.shutdown();
          }

 }

 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
      if (requestCode == MY_DATA_CHECK_CODE) {
           if (resultCode == TextToSpeech.Engine.CHECK_VOICE_DATA_PASS) { //the user has the necessary data - create the TTS
               mTts  =  new TextToSpeech(this, this);
               mSpeakButton.setEnabled(true);

           }else {               //no data - install it now will no go to Google Play.
                Intent installTTSIntent = new Intent();
                installTTSIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installTTSIntent);
           }
      }
 }
} 
```

# javascript - 具有月视图和事件视图的日期选择器？

> ID：12967499
> 
> 赞同：0
> 
> 时间：2012-10-19T04:41:33.563
> 
> 标签：javascript, jquery, html, css, jquery-plugins

我想应用这种风格的日期选择器。

![带有月份和事件选择器的日历](../Images/56a723dd74a7da96a04a80053198aebc.png)

我几乎尝试了每个插件，但我找不到任何合适的解决方案来解决这个问题。

我想单击左侧的月份以在右侧的日期选择器中显示日期，并且当我选择一个事件时，它必须在日期选择器上显示该事件的日期和月份。

有人对如何制作这个或任何类似的插件有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:25:07.410

这显然可以使用作为 jquery 一部分的 ui 日历进行开发。它不作为现成的脚本存在，因此您必须进行一些编码。

日期选择器：http : [//jqueryui.com/datepicker/#inline](http://jqueryui.com/datepicker/#inline)

api 文档： [http ://api.jqueryui.com/datepicker/](http://api.jqueryui.com/datepicker/)

方法，获取和设置日期，应该与您相关，以及 changemonth 选项

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T06:05:54.777

日期选择器：http : [//jqueryui.com/datepicker/#inline](http://jqueryui.com/datepicker/#inline)

检查这个，但你必须根据你在css中的风格来改变它

# php - 仅当 strlen 为一定长度时子目录中的文件总数

> ID：12967506
> 
> 赞同：1
> 
> 时间：2012-10-19T04:42:03.527
> 
> 标签：php, dir, strlen

我很难找到这个问题的答案。

我需要实现的是扫描带有子目录的目录以返回总文件数，其中文件名的字符数为 48 个字符。

所以像：

扫描`c:\blah`文件，但仅在文件名为 48 个字符时返回结果，然后添加在 c:\blah 中找到的所有文件的总数，这将导致`c:\blah`（示例）3 个文件

不需要显示文件名，只需显示满足此条件的文件总数即可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T04:52:38.187

尝试这个：

```
<?php

$length = 48;
$directory = 'C:/';

$total = 0;

foreach (new DirectoryIterator($directory) as $fn)
{
    if ($fn->isDir() && strlen($fn->getFilename()) == $length)
    {
        foreach (new DirectoryIterator($fn->getPathname()) as $sfn)
        {
            if (!$sfn->isDot())
                $total++;
        }
    }
}

echo $total; 
```

# javascript - 基于映射数组的ajax提交

> ID：12967507
> 
> 赞同：0
> 
> 时间：2012-10-19T04:42:07.217
> 
> 标签：javascript, jquery, ajax

我有一个数组

```
array(0=>12,1=>16,3=>20,4=>25); 
```

我的页面上有两个按钮

```
<button id="next">Next</button>
<button id="prev">Previous</button> 
```

在页面加载时，ajax 调用将使用`data`12（数组的第一个元素），它为我获取结果..工作正常

我的问题是当我单击下一步按钮时，我需要将 16 传递给 ajax 调用..（因为 12 是最后提交的值）然后再次单击下一步，我需要将 20 传递给 ajax

如果我点击 prev 我需要通过 16 因为 20 是当前值

那么我怎么知道将哪个元素传递给ajax

这是我的ajax

```
 $.ajax({
            url : baseurl+'/ajax/warehousedetails',
            type:"post",
            data:{"crid":<<<here i want to change>>>>},         
            success:function(data){
                console.log(data);

            }
        }); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:54:53.323

您可以将当前元素的索引存储在变量中。

例如第一次

```
Var flag = 0 
```

所以当你第一次发送请求时使用值

```
array[flag] 
```

点击下一步

```
flag++
array[flag] 
```

点击上一个

```
flag--
array[flag] 
```

# java - 使用 log4j 将日志发送到 Java 中的 Web 服务

> ID：12967508
> 
> 赞同：2
> 
> 时间：2012-10-19T04:42:14.143
> 
> 标签：java, web-services, log4j, appender

我对 Web 服务世界还很陌生，但对`log4j`.

我需要实现一个功能，它将日志消息发送到 Web 服务，而不是使用**Web 服务 appender**发送到文件。

我通过在**谷歌**上搜索`WebServiceAppender`是一`log4j`类之一，但我无法验证这一点。

```
log4j.appender.CONSOLE=main.WSAppender 
log4j.appender.CONSOLE.endpoint=http://localhost:8080/Logging/services/logging?w‌​sdl 
log4j.appender.CONSOLE.layout=org.apache.log4j.PatternLayout 
log4j.appender.CONSOLE.layout.ConversionPattern=%p [%t] %c{2} (%M:%L) :: %m%n 
WSAppender.java extends AppenderSkeleton, can't resolve endpoint, hostname in append()    

if (endpoint == null) { 
    System.out.println("no endpoint set. Check configuration file"); 
    System.out.println("[" + hostname + "] " + this.layout.format(event)); 
    return; 
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T06:30:42.933

当你扩展类时，`AppenderSkeleton`我会假设你应该在`public void activateOptions()`你应该覆盖的方法中初始化你的 webservice 类。我已经编写了 DatabaseAppender 和 JmsAppender log4j 记录器，我总是发现我必须初始化 db 连接或 jms 连接，或者在你的情况下，`public void activateOptions()`方法中的 webservice 属性。

然后像往常一样在`append(LoggingEvent)`方法中调用 web 服务。

我是否建议实现一个 BlockingQueue 来存储所有 LoggingEvent 对象，这样如果您收到大量日志消息，它们就会排队并异步发送到 Web 服务。

**更新为包含模板 Log4j 类**

尝试使用以下模板。我在重要部分添加了评论。基本上，在 activateOptions 和 processEvent 方法中，您将初始化“连接”并发送事件对象。可以是 DB、JMS、WebService ...等。

```
package mypackage;

      import java.util.concurrent.BlockingQueue;
      import java.util.concurrent.LinkedBlockingQueue;
      import java.util.concurrent.TimeUnit;
      import org.apache.log4j.AppenderSkeleton;
      import org.apache.log4j.helpers.LogLog;
      import org.apache.log4j.spi.LoggingEvent;

      public class WebServiceAppender extends AppenderSkeleton {

            private static final BlockingQueue<LoggingEvent> loggingEventQueue = new LinkedBlockingQueue<LoggingEvent>();
            private static WebServiceAppender instance;
            private static Thread thread = null;

            //Your custom properties for your web service

            private String property1;
            private String property2;
            private String property3;

            static {
                thread = new Thread(new Runnable() {
                    public void run() {
                        processQueue();
                    }
                });

                thread.setDaemon(true);
                thread.start();
            }

            private static void processQueue() {
                while(true) {
                    try {
                        LoggingEvent event = loggingEventQueue.poll(1L, TimeUnit.SECONDS);
                        if (event != null) {
                            instance.processEvent(event);
                        }
                    }
                    catch(InterruptedException e) {
                        // No operations.
                    }
                }
            }

            private final void processEvent(LoggingEvent loggingEvent) {
                if(loggingEvent != null) {
                    //Send the loggingEvent object or you can
                    //get data out of it and package it in another
                    //java class and send that, to your web service.

                    //Web Service is invoked here
                }
            }

            public synchronized void close() {
                // The synchronized modifier avoids concurrent append and close operations

                    if(this.closed) {
                      return;
                }

                closeWS();
                thread.interrupt();

                LogLog.debug("Closing appender [" + name + "].");
                this.closed = true;
            }

            private void closeWS() {
                try {
                    //Close the webservice connection 
                    //or whatever here.
                }
                catch(Exception ex) {
                    LogLog.error("Error while closing WebServiceAppender [" + name + "].", ex);
                }
            }

            public boolean requiresLayout() {
                //Does not need a layout because
                //we are sending serialized events
                //to an external source
                return false;
            }

            @Override
            public void activateOptions() {
                instance = this;
                try {
                    LogLog.debug("Getting web service properties.");

                    if(property1 != null) {
                        //Do something with your property
                    }

                    if(property2 != null) {
                        //Do something with your property
                    }

                    if(property3 != null) {
                        //Do something with your property
                    }

                    //Initialize your web-service connection and objects here
                    LogLog.debug("Web Service created.");
                }
                catch(Exception ex) {
                    LogLog.error("Error while activating options for WebServiceAppender [" + name + "].", ex);
                }
            }

            /*
             * These methods are set from the log4j properties file like:
             * log4j.appender.WS=mypackage.WebServiceAppender
             * log4j.appender.WS.property1=bla
             * log4j.appender.WS.property2=ble
             * log4j.appender.WS.property3=blo
             */

            public final String getProperty1() {
                return property1;
            }

            public final String getProperty2() {
                return property2;
            }

            public final String getProperty3() {
                return property3;
            }

            public final void setProperty1(String property1) {
                this.property1 = property1;
            }

            public final void setProperty2(String property2) {
                this.property2 = property2;
            }

            public final void setProperty3(String property3) {
                this.property3 = property3;
            }

            @Override
            protected void append(LoggingEvent event) {
                loggingEventQueue.add(event);
            }

            @Override
            public void finalize() {
                close();
                super.finalize();
            }
      } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T05:02:48.403

我建议你看看这篇文章：[http ://www.ibm.com/developerworks/webservices/library/ws-log4j/index.html](http://www.ibm.com/developerworks/webservices/library/ws-log4j/index.html)

它具体描述了使用 WebServiceAppender。

啊，谷歌！

# javascript - 如何始终在所有应用程序之上设置 javascript 警报

> ID：12967509
> 
> 赞同：0
> 
> 时间：2012-10-19T04:42:27.030
> 
> 标签：javascript, jquery

希望我能在这里找到解决方案，我一直在尝试找到一种方法来让 javascript 警报始终处于顶部一两天但仍然找不到它，问题是我有一个 javascript 警报会每 5 秒弹出一次没有问题，唯一的问题是当 IE 最小化时，例如我正在使用我的 ms Outlook 阅读电子邮件，直到我再次打开资源管理器后才会显示弹出窗口，

有没有办法让来自网页的警报始终位于所有应用程序之上？？？

请指教。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:45:15.350

不，没有。但是，该窗口将在任务栏中闪烁以提醒您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:51:54.277

每 5 秒弹出一次警报是个坏主意，因为它对用户不友好。您应该寻找另一种让您的用户得到通知的方法。例如 Windows 托盘通知（如果可能的话）

# c# - jquery maskedinput的捆绑注册不起作用

> ID：12967511
> 
> 赞同：1
> 
> 时间：2012-10-19T04:42:54.157
> 
> 标签：c#, jquery, asp.net, visual-studio-2012, asp.net-4.5

**我究竟做错了什么？......**

我在捆绑脚本中注册[jquery.maskedinput-1.3.min.js](http://digitalbush.com/projects/masked-input-plugin/)的方式与我注册其他几个脚本的方式完全相同，但由于某种原因，这个脚本的捆绑简单不起作用......

### 我尝试了以下捆绑注册相同的结果：

```
bundles.Add(new ScriptBundle("~/bundles/jquery.maskedinput").Include(
    "~/Scripts/jquery.maskedinput-{version}.js"
    )); 
```

* * *

```
bundles.Add(new ScriptBundle("~/bundles/jquery.maskedinput").Include(
    "~/Scripts/jquery.maskedinput.js"
    )); 
```

* * *

```
bundles.Add(new ScriptBundle("~/bundles/jquery.maskedinput").Include(
    "~/Scripts/jquery.maskedinput.min.js"
    )); 
```

* * *

```
bundles.Add(new ScriptBundle("~/bundles/jquery.maskedinput").Include(
    "~/Scripts/jquery.maskedinput-{version}.min.js"
    )); 
```

* * *

```
bundles.Add(new ScriptBundle("~/bundles/jquery.maskedinput").Include(
    "~/Scripts/jquery.maskedinput-1.3.min.js"
    )); 
```

### 这是呈现的 HTML

```
<script src="/bundles/jquery.maskedinput?v=" type="text/javascript"></script> 
```

**但是我的包裹是空的**

### 这是我在我的注册`MasterPage`

```
<ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server" EnablePageMethods="true">
    <Scripts>
        <%--Framework Scripts--%>
        <asp:ScriptReference Name="jquery" />
        <asp:ScriptReference Name="jquery.ui.combined" />
        <asp:ScriptReference Name="WebForms.js"  Path="~/Scripts/WebForms/WebForms.js" />
        <asp:ScriptReference Name="WebUIValidation.js"  Path="~/Scripts/WebForms/WebUIValidation.js" />
        <asp:ScriptReference Name="MenuStandards.js"  Path="~/Scripts/WebForms/MenuStandards.js" />
        <asp:ScriptReference Name="GridView.js"  Path="~/Scripts/WebForms/GridView.js" />
        <asp:ScriptReference Name="DetailsView.js"  Path="~/Scripts/WebForms/DetailsView.js" />
        <asp:ScriptReference Name="TreeView.js"  Path="~/Scripts/WebForms/TreeView.js" />
        <asp:ScriptReference Name="WebParts.js"  Path="~/Scripts/WebForms/WebParts.js" />
        <asp:ScriptReference Name="Focus.js"  Path="~/Scripts/WebForms/Focus.js" />
        <asp:ScriptReference Name="WebFormsBundle" />
        <asp:ScriptReference Path="~/bundles/jquery.validation" />
        <asp:ScriptReference Path="~/bundles/jquery.maskedinput" />
        <%--Site Scripts--%>

    </Scripts>
</ajaxToolkit:ToolkitScriptManager> 
```

### 这是我在 Visual Studio 2012 中的脚本截图

![在此处输入图像描述](../Images/44ba0ebec21d0b09982cfc8ca6e75f2d.png)

这是怎么回事？？我只是不明白

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:15:15.423

1.0 RTM 版本中存在一个错误，即使在调试模式中明确包含它也会忽略 *.min.js。如果您更新到 1.1.0-alpha1 包，这应该是固定的。

或者，您可以使用此类似问题的答案来解决此[问题](https://stackoverflow.com/questions/13087527/minified-script-only-in-mvc4-bundleconfig)。

# javascript - 如何减少 phonegap 应用程序中外部页面加载的响应时间？

> ID：12967513
> 
> 赞同：3
> 
> 时间：2012-10-19T04:42:57.450
> 
> 标签：javascript, android, jquery, cordova, xmlhttprequest

我已经使用phonegap 为android 开发了一个应用程序。我正在使用 XMLHttpRequest 加载外部 HTML 页面。它工作正常，但加载外部页面需要时间。如何减少页面加载时间？我的代码如下：

```
function loadHtmlPage(url){ //url - holds the name of the HTML page
    var xmlhttp = new XMLHttpRequest();     
    xmlhttp.onreadystatechange=function(){
    if(xmlhttp.readyState === 4){           
        document.getElementById("externalpagecont").innerHTML = xmlhttp.responseText;   
    };
    xmlhttp.open("GET", url , true);
    xmlhttp.send(null); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T02:07:50.223

通过阅读评论，您使用的是离线移动应用程序，*`external`*页面实际上是与应用程序捆绑的本地页面。所以网络延迟不是你的问题。

如果不是这种情况，请尝试将页面包含在您的 www 文件夹中。

假设你已经这样做了，一个想法是让你的应用程序成为一个页面并进行相应的操作。

```
<!doctype html>
<html>
...
    <div id="page1">....</div>
    <div id="page2">....</div>
...
</html> 
```

然后在javascript中

```
function loadHtml(id) { /* hide / show / get content / your business needs here */} 
```

# javascript - 当字符串相等时，字符串相等返回 false

> ID：12967514
> 
> 赞同：1
> 
> 时间：2012-10-19T04:42:58.593
> 
> 标签：javascript, jquery

我有一个锚元素：

```
<a id="buyBtn" href="#" alt="Purchase" title="Buy now" data-enabled="true"> 
```

当它被点击时，我正在这样做：

```
enabled = $(this).data('enabled') == "true";
console.log(enabled); 
```

但是，控制台显示`false`. 我最初使用`===`的是错误的，所以我搬到了`==`.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T04:46:23.867

该问题的公认答案详细说明了原因：

[从jquery中的数据属性中检索布尔数据](https://stackoverflow.com/questions/9921076/retrieve-boolean-data-from-data-attribute-in-jquery)

jQuery 的`.data()`方法足够聪明，可以将“true”/“false”数据字符串转换为真正的布尔值。

严格比较运算符检查类型，但由于您将字符串与布尔值进行比较而失败。

```
"true" === true // false 
```

# database - SQL查询数据库

> ID：12967518
> 
> 赞同：2
> 
> 时间：2012-10-19T04:43:21.120
> 
> 标签：database, sql-server-2008, grails-2.0, grails-controller

我有以下查询 `"select abc from table where val = 1"`
我得到的结果是

```
 [{abc=5}] 
```

但是，我只需要结果中**的整数值 5****而不是 array[{abc=5}]**。
任何人都知道如何做到这一点？谢谢 *我的朋友告诉我，我需要使用子字符串从 [{abc=5}] 中取出 5，但我完全不知道如何处理它。任何帮助将不胜感激！

*已编辑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:47:06.897

试试这个：

假设整数值介于 = 和 } 符号之间

```
select substring(abc,charindex('=',abc)+1,len(abc)-charindex('}',abc)) 
```

# [SQL小提琴演示](http://www.sqlfiddle.com/#!3/eb6ab/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:29:22.253

对于列的计数

```
 select count(column) from table where val=1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:38:31.947

您需要使用聚合函数计数

`select count(1) from table where val = 1`

使用 count(1) 因为它与 count(*) 相比是优化的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T03:43:52.310

所以，你需要从

[{abc=5}]

你需要检索值'5'吗？我这样说对吗？

# vb.net - 使用 Player Framework 在 Windows 8 应用程序的后台播放音频

> ID：12967520
> 
> 赞同：1
> 
> 时间：2012-10-19T04:43:43.147
> 
> 标签：vb.net, windows-8

我正在使用 Microsoft Player Framework [http://playerframework.codeplex.com/](http://playerframework.codeplex.com/)在用 VB 编写的 Windows 8 应用程序中播放音频和视频文件。AudioCategory 属性已设置为 BackgroundCapableMedia，并且已注册音频后台任务。根据论坛[http://playerframework.codeplex.com/discussions/395898](http://playerframework.codeplex.com/discussions/395898)，这应该是所需要的。我希望有人对控件有经验，并且知道在应用程序未激活时阻止音频实际播放的缺失。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T07:39:48.700

如果其他人需要它... [http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj841209.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj841209.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T11:26:19.627

您是否已声明要在后台播放音频？转到您的`Package.appxmanifest`, ,`Declarions Tab`添加`Background Tasks`。`Available Contracts`检查`Audio Checkbox`并告诉它应该打开哪个 xaml 页面。

# dynamics-crm-2011 - CRM 2011 oData 不同

> ID：12967521
> 
> 赞同：2
> 
> 时间：2012-10-19T04:43:52.803
> 
> 标签：dynamics-crm-2011, odata

是否可以使用 REST 端点（oData 查询）进行查询并区分结果

或者在 CRM 2011 中是否有针对 distinct 的 oData 查询的任何语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:10:13.617

OData 协议不支持 distinct 运算符。检查[这些](https://stackoverflow.com/questions/3839073/select-distinct-values-with-odata) [答案](https://stackoverflow.com/questions/3867365/can-i-perform-a-distinct-with-a-wcf-data-service-odata-query)。解决方案可能是在客户端检索数据和过滤。

# java - 从父级继承的元素的 JAX-B 注释

> ID：12967523
> 
> 赞同：1
> 
> 时间：2012-10-19T04:44:20.510
> 
> 标签：java, jaxb

为 Java 类添加`JAX-B`Java 注释时 - 如果我有一个父**Class Entry**，有两个孩子**Book**和**JournalArticle**，

我会为所有三个类添加这些注释：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement 
```

IE：

```
@XmlSeeAlso({au.com.library.Book.class, au.com.library.JournalArticle.class})
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement
public abstract class Entry implements Serializable{

private static final long serialVersionUID = -1895155325179947581L;

@XmlElement(name="title")
protected String title;
@XmlElement(name="author")
protected String author;
@XmlElement(name="year")
protected int year; 
```

和

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement
public class Book extends Entry {

@XmlElement(name="edition")
private String edition;
@XmlElement(name="publisher")
private String publisher;
@XmlElement(name="placeOfPublication")
private String placeOfPub; 
```

和

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlRootElement
public class JournalArticle extends Entry {

@XmlElement(name="journalTitle")
private String journalTitle;
@XmlElement(name="volume")
private String volume;
@XmlElement(name="issue")
private String issue;
@XmlElement(name="pageNumbers")
private String pgNumbers; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:59:28.923

注释[`XmlAccessorType`](http://jaxb.java.net/jaxb20-pr/api/javax/xml/bind/annotation/XmlAccessorType.html)可以被继承，所以我相信在子类上再次声明它不是强制性的。

```
@Inherited
@Retention(value=RUNTIME)
@Target(value={PACKAGE,TYPE})
public @interface XmlAccessorType 
```

情况并非如此[`XmlRootElement`](http://jaxb.java.net/jaxb20-pr/api/javax/xml/bind/annotation/XmlRootElement.html)，因此您必须用它注释每个基类。

您可以在 javadoc 上找到有关[`@Inherited`](http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Inherited.html)注释的更多信息。

**更新您的评论：**

`@Retention(value=RUNTIME)`意味着该类即使在运行时也保留此注解，也就是说，程序可以使用 Java 反射 API 来检查该注解是否存在于类上。

`@Target(value={PACKAGE,TYPE})`表示此注解可用于注解类、接口或枚举（这是用于`value=TYPE`），也可用于整个包级别（这是用于`value=PACKAGE`）。你可以看到[这个线程](https://stackoverflow.com/questions/2099431/whats-the-point-of-package-annotations)解释这如何有用。

有关 Javadoc 的更多信息：

*   [`@Retention`](http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Retention.html)
*   [`RetentionPolicy`](http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/RetentionPolicy.html)
*   [`@Target`](http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/Target.html)
*   [`ElementType`](http://docs.oracle.com/javase/7/docs/api/java/lang/annotation/ElementType.html)

# ios - 在 IOS 6.0 中：底部工具栏中的 UIBarButton 在呈现和关闭模式视图控制器后消失

> ID：12967530
> 
> 赞同：5
> 
> 时间：2012-10-19T04:44:44.613
> 
> 标签：ios

这在 IOS 5 中运行良好，并且在升级到最新的 xcode 后无法运行。我们有一个带有底部工具栏的视图控制器，它有两个栏按钮项“保存”和“取消”。按下另一个按钮会启动模态视图控制器，当模态视图控制器被解除以返回原始视图控制器时，保存和取消按钮似乎已经消失。工具栏仍显示 。这太奇怪了，我们甚至不知道从哪里开始。任何指针/建议表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T18:26:24.067

听起来像是一个很大的错误，所以我认为您的代码中发生了一些事情。

尝试在 xcode 中创建一个空白项目，其中只有一个带有工具栏和按钮的视图来显示您的模态视图。

如果你没有看到任何问题，那么你必须在代码中做一些事情来导致它。

# memory-management - 如何增加debian中elasticsearch的打开文件数限制？

> ID：12967535
> 
> 赞同：0
> 
> 时间：2012-10-19T04:45:04.267
> 
> 标签：memory-management, elasticsearch

任何人都可以帮我解决如何增加 Debian 中弹性搜索的最大打开文件数吗？另外关于如何增加它的内存限制？以及如何检查是否应用了内存限制？我有一个文件“/etc/init.d/elasticsearch”，其设置如下：

```
`#! /bin/sh`
`### BEGIN INIT INFO`
`# Provides:          elasticsearch`
`# Required-Start:    $all`
`# Required-Stop:     $all`
`# Default-Start:     2 3 4 5`
`# Default-Stop:      0 1 6`
`# Short-Description: Starts elasticsearch`
`# Description:       Starts elasticsearch using start-stop-daemon`
`### END INIT INFO`

`ES_HOME=/usr/local/elasticsearch`
`ES_MIN_MEM=256m`
`ES_MAX_MEM=2g`
`DAEMON=$ES_HOME/bin/elasticsearch`
`NAME=elasticsearch`
`DESC=elasticsearch`
`PID_FILE=/var/run/$NAME.pid`
`LOG_DIR=/var/log/$NAME`
`DATA_DIR=/var/lib/$NAME`
`WORK_DIR=/tmp/$NAME`
`CONFIG_FILE=/etc/$NAME/elasticsearch.yml`
`DAEMON_OPTS="-p $PID_FILE -Des.config=$CONFIG_FILE -Des.path.home=$ES_HOME -Des.path.logs=$LOG_DIR -Des.path.data=$DATA_DIR -Des.path.work=$WORK_DIR"`

`test -x $DAEMON || exit 0
 set -e
 case "$1" in
  start)
    echo -n "Starting $DESC: "
    mkdir -p $LOG_DIR $DATA_DIR $WORK_DIR
    if start-stop-daemon --start --pidfile $PID_FILE --startas $DAEMON -- $DAEMON_OPTS
    then
        echo "started."
    else
        echo "failed."
    fi
    ;;
  stop)
    echo -n "Stopping $DESC: "
    if start-stop-daemon --stop --pidfile $PID_FILE
    then
        echo "stopped."
    else
        echo "failed."
    fi
    ;;
  restart|force-reload)
    ${0} stop
    sleep 0.5
    ${0} start
    ;;
  *)
    N=/etc/init.d/$NAME
    echo "Usage: $N {start|stop|restart|force-reload}" >&2
    exit 1
    ;;
esac

exit 0 
```

任何有关这些的帮助将不胜感激.. 提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:07:37.227

尝试使用 -Des.max-open-files=true 启动 elasticsearch 以在启动时打印可以在您的系统上打开多少文件或执行

```
cat /proc/sys/fs/file-max 
```

记下号码

```
sudo vi /etc/sysctl.conf 
```

添加带有最大文件数的行（以前的数字）：

```
fs.file-max = 100000 
```

注销并重新登录。它应该工作。

对于内存，只需编辑 ES_MIN_MEM 和 ES_MAX_MEM 并为两者设置相同的值（此框上大约占总 RAM 的 60%）

高温高压

# java - 如何避免 Selenium 中的“StaleElementReferenceException”？

> ID：12967541
> 
> 赞同：112
> 
> 时间：2012-10-19T04:45:30.730
> 
> 标签：java, selenium-webdriver

我正在使用 Java 实现很多 Selenium 测试。有时，我的测试由于`StaleElementReferenceException`. 您能否提出一些使测试更稳定的方法？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-10-19T04:54:39.687

如果页面上发生的 DOM 操作暂时导致元素不可访问，则可能会发生这种情况。为了允许这些情况，您可以尝试在循环中多次访问该元素，然后最终引发异常。

试试[这个来自 darrelgrainger.blogspot.com 的优秀解决方案](http://darrellgrainger.blogspot.com/2012/06/staleelementexception.html)：

```
public boolean retryingFindClick(By by) {
    boolean result = false;
    int attempts = 0;
    while(attempts < 2) {
        try {
            driver.findElement(by).click();
            result = true;
            break;
        } catch(StaleElementException e) {
        }
        attempts++;
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2014-08-24T09:34:24.400

我间歇性地遇到这个问题。我不知道，BackboneJS 正在页面上运行并替换我试图单击的元素。我的代码看起来像这样。

```
driver.findElement(By.id("checkoutLink")).click(); 
```

这当然在功能上与此相同。

```
WebElement checkoutLink = driver.findElement(By.id("checkoutLink"));
checkoutLink.click(); 
```

偶尔会发生的是 javascript 会在查找和单击它之间替换 checkoutLink 元素，即。

```
WebElement checkoutLink = driver.findElement(By.id("checkoutLink"));
// javascript replaces checkoutLink
checkoutLink.click(); 
```

Which rightfully led to a StaleElementReferenceException when trying to click the link. I couldn't find any reliable way to tell WebDriver to wait until the javascript had finished running, so here's how I eventually solved it.

```
new WebDriverWait(driver, timeout)
    .ignoring(StaleElementReferenceException.class)
    .until(new Predicate<WebDriver>() {
        @Override
        public boolean apply(@Nullable WebDriver driver) {
            driver.findElement(By.id("checkoutLink")).click();
            return true;
        }
    }); 
```

This code will continually try to click the link, ignoring StaleElementReferenceExceptions until either the click succeeds or the timeout is reached. I like this solution because it saves you having to write any retry logic, and uses only the built-in constructs of WebDriver.

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2017-01-06T09:20:18.620

Kenny's solution is good, however it can be written in a more elegant way

```
new WebDriverWait(driver, timeout)
        .ignoring(StaleElementReferenceException.class)
        .until((WebDriver d) -> {
            d.findElement(By.id("checkoutLink")).click();
            return true;
        }); 
```

Or also:

```
new WebDriverWait(driver, timeout).ignoring(StaleElementReferenceException.class).until(ExpectedConditions.elementToBeClickable(By.id("checkoutLink")));
driver.findElement(By.id("checkoutLink")).click(); 
```

But anyway, best solution is to rely on Selenide library, it handles this kind of things and more. (instead of element references it handles proxies so you never have to deal with stale elements, which can be quite difficult). [Selenide](https://selenide.org/)

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2012-10-19T20:29:54.083

通常这是由于 DOM 正在更新并且您尝试访问更新/新元素 - 但 DOM 已刷新，因此您拥有的引用无效..

通过首先在元素上使用显式等待以确保更新完成来解决此问题，然后再次获取对该元素的新引用。

这里有一些伪代码来说明（改编自我用于这个问题的一些 C# 代码**）**：

```
WebDriverWait wait = new WebDriverWait(browser, TimeSpan.FromSeconds(10));
IWebElement aRow = browser.FindElement(By.XPath(SOME XPATH HERE);
IWebElement editLink = aRow.FindElement(By.LinkText("Edit"));

//this Click causes an AJAX call
editLink.Click();

//must first wait for the call to complete
wait.Until(ExpectedConditions.ElementExists(By.XPath(SOME XPATH HERE));

//you've lost the reference to the row; you must grab it again.
aRow = browser.FindElement(By.XPath(SOME XPATH HERE);

//now proceed with asserts or other actions. 
```

希望这可以帮助！

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-10-27T14:33:14.773

The reason why the `StaleElementReferenceException` occurs has been laid out already: updates to the DOM between finding and doing something with the element.

For the click-Problem I've recently used a solution like this:

```
public void clickOn(By locator, WebDriver driver, int timeout)
{
    final WebDriverWait wait = new WebDriverWait(driver, timeout);
    wait.until(ExpectedConditions.refreshed(
        ExpectedConditions.elementToBeClickable(locator)));
    driver.findElement(locator).click();
} 
```

The crucial part is the "chaining" of Selenium's own `ExpectedConditions` via the `ExpectedConditions.refreshed()`. This actually waits and checks if the element in question has been refreshed during the specified timeout and additionally waits for the element to become clickable.

Have a look at the [documentation for the refreshed method](https://seleniumhq.github.io/selenium/docs/api/java/org/openqa/selenium/support/ui/ExpectedConditions.html#refreshed-org.openqa.selenium.support.ui.ExpectedCondition-).

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-10-01T08:47:11.880

In my project I introduced a notion of StableWebElement. It is a wrapper for WebElement which is able to detect if element is Stale and find a new reference to the original element. I have added a helper methods to locating elements which return StableWebElement instead of WebElement and the problem with StaleElementReference disappeared.

```
public static IStableWebElement FindStableElement(this ISearchContext context, By by)
{
    var element = context.FindElement(by);
    return new StableWebElement(context, element, by, SearchApproachType.First);
} 
```

The code in C# is available on my project's page but it could be easily ported to java [https://github.com/cezarypiatek/Tellurium/blob/master/Src/MvcPages/SeleniumUtils/StableWebElement.cs](https://github.com/cezarypiatek/Tellurium/blob/master/Src/MvcPages/SeleniumUtils/StableWebElement.cs)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-16T10:48:13.540

A solution in C# would be:

Helper class:

```
internal class DriverHelper
{

    private IWebDriver Driver { get; set; }
    private WebDriverWait Wait { get; set; }

    public DriverHelper(string driverUrl, int timeoutInSeconds)
    {
        Driver = new ChromeDriver();
        Driver.Url = driverUrl;
        Wait = new WebDriverWait(Driver, TimeSpan.FromSeconds(timeoutInSeconds));
    }

    internal bool ClickElement(string cssSelector)
    {
        //Find the element
        IWebElement element = Wait.Until(d=>ExpectedConditions.ElementIsVisible(By.CssSelector(cssSelector)))(Driver);
        return Wait.Until(c => ClickElement(element, cssSelector));
    }

    private bool ClickElement(IWebElement element, string cssSelector)
    {
        try
        {
            //Check if element is still included in the dom
            //If the element has changed a the OpenQA.Selenium.StaleElementReferenceException is thrown.
            bool isDisplayed = element.Displayed;

            element.Click();
            return true;
        }
        catch (StaleElementReferenceException)
        {
            //wait until the element is visible again
            element = Wait.Until(d => ExpectedConditions.ElementIsVisible(By.CssSelector(cssSelector)))(Driver);
            return ClickElement(element, cssSelector);
        }
        catch (Exception)
        {
            return false;
        }
    }
} 
```

Invocation:

```
 DriverHelper driverHelper = new DriverHelper("http://www.seleniumhq.org/docs/04_webdriver_advanced.jsp", 10);
        driverHelper.ClickElement("input[value='csharp']:first-child"); 
```

Similarly can be used for Java.

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-12-15T16:11:33.910

Kenny's solution is deprecated use this, i'm using actions class to double click but you can do anything.

```
new FluentWait<>(driver).withTimeout(30, TimeUnit.SECONDS).pollingEvery(5, TimeUnit.SECONDS)
                    .ignoring(StaleElementReferenceException.class)
                    .until(new Function() {

                    @Override
                    public Object apply(Object arg0) {
                        WebElement e = driver.findelement(By.xpath(locatorKey));
                        Actions action = new Actions(driver);
                        action.moveToElement(e).doubleClick().perform();
                        return true;
                    }
                }); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-22T13:01:50.077

I've found solution [here](http://qaru.site/questions/164824/selenium-webdriver-staleelementreferenceexception). In my case element becomes inaccessible in case of leaving current window, tab or page and coming back again.

.ignoring(StaleElement...), .refreshed(...) and elementToBeClicable(...) did not help and I was getting exception on `act.doubleClick(element).build().perform();` string.

**Using function in my main test class:**

```
openForm(someXpath); 
```

**My BaseTest function:**

```
int defaultTime = 15;

boolean openForm(String myXpath) throws Exception {
    int count = 0;
    boolean clicked = false;
    while (count < 4 || !clicked) {
        try {
            WebElement element = getWebElClickable(myXpath,defaultTime);
            act.doubleClick(element).build().perform();
            clicked = true;
            print("Element have been clicked!");
            break;
        } catch (StaleElementReferenceException sere) {
            sere.toString();
            print("Trying to recover from: "+sere.getMessage());
            count=count+1;
        }
    } 
```

**My BaseClass function:**

```
protected WebElement getWebElClickable(String xpath, int waitSeconds) {
        wait = new WebDriverWait(driver, waitSeconds);
        return wait.ignoring(StaleElementReferenceException.class).until(
                ExpectedConditions.refreshed(ExpectedConditions.elementToBeClickable(By.xpath(xpath))));
    } 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-12-12T22:07:52.830

### Clean `findByAndroidId` method that gracefully handles `StaleElementReference`.

This is heavily based off of [jspcal's answer](https://stackoverflow.com/a/12967602/293280) but I had to modify that answer to get it working cleanly with our setup and so I wanted to add it here in case it's helpful to others. If this answer helped you, please go upvote [jspcal's answer](https://stackoverflow.com/a/12967602/293280).

```
// This loops gracefully handles StateElementReference errors and retries up to 10 times. These can occur when an element, like a modal or notification, is no longer available.
export async function findByAndroidId( id, { assert = wd.asserters.isDisplayed, timeout = 10000, interval = 100 } = {} ) {
  MAX_ATTEMPTS = 10;
  let attempt = 0;

  while( attempt < MAX_ATTEMPTS ) {
    try {
      return await this.waitForElementById( `android:id/${ id }`, assert, timeout, interval );
    }
    catch ( error ) {
      if ( error.message.includes( "StaleElementReference" ) )
        attempt++;
      else
        throw error; // Re-throws the error so the test fails as normal if the assertion fails.
    }
  }
} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-02-19T10:48:10.973

This works for me using C#

```
public Boolean RetryingFindClick(IWebElement webElement)
    {
        Boolean result = false;
        int attempts = 0;
        while (attempts < 2)
        {
            try
            {
                webElement.Click();
                result = true;
                break;
            }
            catch (StaleElementReferenceException e)
            {
                Logging.Text(e.Message);
            }
            attempts++;
        }
        return result;
    } 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2019-01-03T01:27:28.600

The problem is by the time you pass the element from Javascript to Java back to Javascript it can have left the DOM.
Try doing the whole thing in Javascript:

```
driver.executeScript("document.querySelector('#my_id')?.click()") 
```

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2019-02-14T13:45:38.117

Try this

```
while (true) { // loops forever until break
    try { // checks code for exceptions
        WebElement ele=
        (WebElement)wait.until(ExpectedConditions.elementToBeClickable((By.xpath(Xpath))));  
        break; // if no exceptions breaks out of loop
    } 
    catch (org.openqa.selenium.StaleElementReferenceException e1) { 
        Thread.sleep(3000); // you can set your value here maybe 2 secs
        continue; // continues to loop if exception is found
    }
} 
```

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2019-10-07T10:18:13.023

There could be a potential problem that leads to the StaleElementReferenceException that no one mentioned so far (in regard to actions).

I explain it in Javascript, but it's the same in Java.

This won't work:

```
let actions = driver.actions({ bridge: true })
let a = await driver.findElement(By.css('#a'))
await actions.click(a).perform() // this leads to a DOM change, #b will be removed and added again to the DOM.
let b = await driver.findElement(By.css('#b'))
await actions.click(b).perform() 
```

But instantiating the actions again will solve it:

```
let actions = driver.actions({ bridge: true })
let a = await driver.findElement(By.css('#a'))
await actions.click(a).perform()  // this leads to a DOM change, #b will be removed and added again to the DOM.
actions = driver.actions({ bridge: true }) // new
let b = await driver.findElement(By.css('#b'))
await actions.click(b).perform() 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2020-07-29T14:10:30.027

Usually StaleElementReferenceException when element we try to access has appeared but other elements may affect the position of element we are intrested in hence when we try to click or getText or try to do some action on WebElement we get exception which usually says element not attached with DOM.

Solution I tried is as follows:

```
 protected void clickOnElement(By by) {
        try {
            waitForElementToBeClickableBy(by).click();
        } catch (StaleElementReferenceException e) {
            for (int attempts = 1; attempts < 100; attempts++) {
                try {
                    waitFor(500);
                    logger.info("Stale element found retrying:" + attempts);
                    waitForElementToBeClickableBy(by).click();
                    break;
                } catch (StaleElementReferenceException e1) {
                    logger.info("Stale element found retrying:" + attempts);
                }
            }
        }

protected WebElement waitForElementToBeClickableBy(By by) {
        WebDriverWait wait = new WebDriverWait(getDriver(), 10);
        return wait.until(ExpectedConditions.elementToBeClickable(by));
    } 
```

In above code I first try to wait and then click on element if exception occurs then I catch it and try to loop it as there is a possibility that still all elements may not be loaded and again exception can occur.

* * *

## 回答 #16

> 赞同：-4
> 
> 时间：2015-10-14T13:37:21.550

Maybe it was added more recently, but other answers fail to mention Selenium's implicit wait feature, which does all the above for you, and is built into Selenium.

`driver.manage().timeouts().implicitlyWait(10,TimeUnit.SECONDS);`

This will retry `findElement()` calls until the element has been found, or for 10 seconds.

Source - [http://www.seleniumhq.org/docs/04_webdriver_advanced.jsp](http://www.seleniumhq.org/docs/04_webdriver_advanced.jsp)

# haskell - ghc-mod 安装失败

> ID：12967549
> 
> 赞同：4
> 
> 时间：2012-10-19T04:46:27.177
> 
> 标签：haskell, ghc, cabal, cabal-install

我刚刚在虚拟机上完成了 Arch Linux 的全新安装并安装了 GHC (7.6.1)，cabal-install 的版本是 1.16.0-2

我正在尝试为 haskell 编码设置环境，包括 ghcmod-vim 插件，这当然需要 ghc-mod。

运行 cabal install ghc-mod 会出现几个错误

```
Gap.hs:81:19:
    Couldn't match expected type `PprStyle -> String' with `[Char]'
    Expected type: String
      Actual type: PprStyle -> String
    Probable cause: `renderWithStyle' is applied to too few arguments
    In the expression: renderWithStyle d stl
    In an equation for `renderMsg':
        renderMsg d stl = renderWithStyle d stl

Gap.hs:81:35:
    Couldn't match expected type `DynFlags' with actual type `SDoc'
    In the first argument of `renderWithStyle', namely `d'
    In the expression: renderWithStyle d stl
    In an equation for `renderMsg':
        renderMsg d stl = renderWithStyle d stl

Gap.hs:81:37:
    Couldn't match type `SDoc' with `SDoc'
    In the second argument of `renderWithStyle', namely `stl'
    In the expression: renderWithStyle d stl
    In an equation for `renderMsg':
        renderMsg d stl = renderWithStyle d stl

Gap.hs:114:28:
    Couldn't match type `Module' with `ModuleName'
    Expected type: ModSummary -> ModuleName
      Actual type: ModSummary -> Module
    In the second argument of `(.)', namely `ms_mod'
    In the first argument of `map', namely `(IIModule . ms_mod)'
    In the first argument of `(<$>)', namely `map (IIModule . ms_mod)' 
```

我真的不明白这些编译器错误是如何发生的，因为 ghc-mod 1.11.0 似乎已在 6 月份被放在 Hackage 上，而我对类似问题的搜索却一无所获。

关于如何解决这个问题的想法和解决方案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:26:38.400

您可能想看看[https://github.com/kazu-yamamoto/ghc-mod](https://github.com/kazu-yamamoto/ghc-mod)。最新的提交称为“GHC 7.6.1 兼容性”，所以这个版本可能会解决你的问题。

# javascript - 使用 PullToRefresh 插件

> ID：12967550
> 
> 赞同：1
> 
> 时间：2012-10-19T04:46:27.087
> 
> 标签：javascript, cordova, sencha-touch-2

ust开始使用Sencha Touch 2，需要集成[https://github.com/j-mcnally/Sencha2-PullToRefresh](https://github.com/j-mcnally/Sencha2-PullToRefresh)

我刚刚开始使用 Sencha，但无法在文档中找到插入和引用此类扩展的位置。这样做所需的文件结构和参考代码是什么？它只是去任何地方，我在 app.js 中引用它吗？

将 plugins 文件夹复制到我的项目中，并将 js 文件包含在 index.html 中

但显示错误 undefined is not a function failed to load the RefreshableList.js

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:46:36.217

您可以在Sencha Touch 2的**示例**文件夹中找到很好的示例。

在**YOUR_SENCHA_TOUCH_FOLDER/examples/touchtweets/app/view/TweetList.js**中有一个很好的[Pull To Refresh 插件示例](http://docs.sencha.com/touch/2-0/#!/api/Ext.plugin.PullRefresh)

 **Twitter.view.TweetList 扩展了一个列表，并在其配置中包含以下代码：

```
...
plugins: [
    'pullrefresh',
    {
        type: 'listpaging',
        autoPaging: true
    }
],
... 
```

您还需要像这样要求相关文件：

```
requires: [
    'Ext.plugin.PullRefresh',
], 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T00:06:10.897

Sencha Touch 2 提供了一个拉动刷新插件，也许你可以使用那个？Sencha 提供的关于 pull to refresh 插件的文档位于[http://docs.sencha.com/touch/2-0/#!/api/Ext.plugin.PullRefresh](http://docs.sencha.com/touch/2-0/#!/api/Ext.plugin.PullRefresh)**

# javascript - Knockout observable 属性没有更新

> ID：12967559
> 
> 赞同：1
> 
> 时间：2012-10-19T04:47:35.043
> 
> 标签：javascript, jquery, knockout.js

我在我的应用程序中使用了 knockout.js 插件。我有可观察的问题。我创建了一个[示例小提琴](http://jsbin.com/agaxuw/3/edit)。在这个小提琴中，我在每次添加新菜单时`Menus`动态创建并生成。`Menu sequence`用户可以删除任何现有的菜单，除了第一个。

当用户删除任何现有菜单时，就会出现问题。因为在删除时我正在更新删除函数中的序列号，但序列号没有更新。有人可以告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:09:12.650

解决方案：[小提琴](http://jsbin.com/agaxuw/5/edit)

**修改的：**

```
newMenuVM.Sequence = ko.observable(self.menus().length+1);

self.menus()[i].Sequence(i+1); 
```

**删除：**

```
self.courseOptions.push(newMenuVM); 
```

**原因：**

当我运行你的小提琴时，我看到一个错误“对象# 的属性'序列'不是函数”。

我搜索此属性并查看：

```
newMenuVM.Sequence = self.menus().length+1; 
```

所以，我添加**了 ko.observable**函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:13:52.143

您正在重新定义 Sequence 变量。最初它是一个 ko.observable。您将其设置为整数值。你应该这样设置值

```
newMenuVM.Sequence(self.menus().length+1); 
```

这将允许 observable 通知和更新屏幕上的值。

# algorithm - 表示数字段的数据结构

> ID：12967564
> 
> 赞同：1
> 
> 时间：2012-10-19T04:48:13.160
> 
> 标签：algorithm, search, optimization, data-structures

我有一组对象，每个对象都有几个 6 字节的地址（如 aaa.bbb.ccc.ddd.eee.fff）。以范围表示的每个对象的可能地址。我需要能够按地址和掩码搜索对象（例如 aaa.bbb.ccc.*.eee.fff）。最适合这项任务的数据结构是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:24:50.523

根据您的应用程序，您可以使用二叉搜索树或 trie。例如，在 trie 中，您搜索直到到达掩码。那么您需要使用掩码遍历该节点的所有子节点。并对它们执行其余的搜索。

# java - 如何使用 Java 中的 Swing 使我的代码在 GUI 中工作？

> ID：12967572
> 
> 赞同：2
> 
> 时间：2012-10-19T04:50:18.410
> 
> 标签：java, swing, date, integer, arguments

![我的 GUI 的一个想法](../Images/37f3ceb88c9f2c46423d869b8fdb55b1.png) 我正在制作一个可以做多种事情的工具，我现在正在使用最后一个功能：您输入一个日期，它会告诉您该日期是一周中的哪一天。

所以我在这里有两个问题：

1.  我不能使用参数，它不喜欢它们
2.  在最后一行，我不能使用 jTextArea2.setText(d0); 因为它也不喜欢……

我的代码在这里：

```
 public static void main(String[] args) { 
        int d = Integer.parseInt(args[0]);
        int m = Integer.parseInt(args[1]);
        int y = Integer.parseInt(args[2]);

        int y0 = y - (14 - m) / 12;
        int x = y0 + y0/4 - y0/100 + y0/400;
        int m0 = m + 12 * ((14 - m) / 12) - 2;
        int d0 = (d + x + (31*m0)/12) % 7;

        System.out.println("Sunday = 0\nMonday = 1\nTuesday = 2\nWednesday = 3\nThursday = 4\nFriday = 5\nSaturday = 6\nThis date is on a:");
        System.out.println(d0); 
```

基本上，这段代码最初是用于控制台的，现在我想将它实现到一个 Swing GUI 应用程序中。

我只有一周的时间学习 Java，所以如果问题很明显或容易解决，请原谅......但是有人能弄清楚如何解决它吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:50:09.680

您面临的问题是日期将以什么格式出现。

你只`JTextArea`为他们提供了一个输入值，所以他们可以输入任何东西......

因此，首先，您需要一种可以接受传入值的方法...

```
public String toDayOfWeek(String date) {
} 
```

从这里您需要将传入的值格式化为`Date`

```
String dayOfWeek = null;
try {
    Date date = DateFormat.getDateInstance().parse(date);
} catch (ParseException exp) {
    dayOfWeek = date + " is an invalid date format";
}
return dayOfWeek; 
```

（显然，以上属于`toDayOfWeek(String)`方法）

现在，就个人而言，我会将`Date`值传递给另一种方法，但那是因为我疯了......

```
public String toDayOfWeek(Date date) {
    // Now you could extract the various values from the Date object
    // but those methods are deprecated...
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);

    int day = cal.get(Calendar.DATE);
    int month = cal.get(Calendar.MONTH); // Months are 0 based
    int year = cal.get(Calendar.YEAR);

    // Your calculation here...

    return yourDayCalculation;
} 
```

但老实说，这样做会更简单，更容易......

```
public String toDayOfWeek(Date date) {
    // Now you could extract the various values from the Date object
    // but those methods are deprecated...
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);

    return DateFormatSymbols.getInstance().getWeekdays()[cal.get(Calendar.DAY_OF_WEEK)];
} 
```

所以你最终会得到两种方法......

```
public String toDayOfWeek(String date) {
    String dayOfWeek = null;
    try {
        Date date = DateFormat.getDateInstance().parse(date);
        dayOfWeek = toDayOfWeek(date);
    } catch (ParseException exp) {
        dayOfWeek = date + " is an invalid date format";
    }
    return dayOfWeek;
}

public String toDayOfWeek(Date date) {
    // Now you could extract the various values from the Date object
    // but those methods are deprecated...
    Calendar cal = Calendar.getInstance();
    cal.setTime(date);

    return DateFormatSymbols.getInstance().getWeekdays()[cal.get(Calendar.DAY_OF_WEEK)];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:57:25.357

首先检查 args 中是否实际上有 3 个元素

```
   if(args.length == 3)
       // 计算
     别的
       System.out.println("用法：java DateID <month> <day> <year>"):

```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T04:58:29.513

假设您的 GUI 没有被显示为示例......

对于您的第二个问题，JTextArea 继承自 JTextComponent，您将在其中找到[setText 方法](http://docs.oracle.com/javase/6/docs/api/javax/swing/text/JTextComponent.html#setText%28java.lang.String%29)。由于它接受字符串而不是整数，因此您可能希望执行以下操作：

```
String.valueOf(d0); 
```

我相信您也可以将 d0 连接到字符串文字（例如 println 中的文字），并且效果也一样。

编辑：请记住 setText 只会设置该字段的值。如果要获取文本，则需要使用[getText 方法](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/JTextComponent.html#getText%28%29)并将[结果字符串拆分为](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#split%28java.lang.String%29)您指定的任何分隔符。结果将存储在一个字符串数组中，然后您可以将其转换为整数并与 Calendar ala Abu 的响应一起使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T04:55:43.307

您可以使用[日历](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Calendar.html)。看看这段代码，你就会明白

```
Calendar cal = Calendar.getInstance();
cal.set(Calendar.YEAR,2012);
cal.set(Calendar.MONTH,0);//Note that months start at 0 i.e. January is 0
cal.set(Calendar.DAY,1);

System.out.println(cal.get(Calendar.DAY_OF_WEEK))); 
```

# linux - Linux 中的电源管理框架

> ID：12967573
> 
> 赞同：2
> 
> 时间：2012-10-19T04:50:22.937
> 
> 标签：linux, linux-device-driver, power-management

我观察到整个设备拓扑基于`Buses --> Device + Driver`. linux 提供的电源管理`(suspend + resume)`存在于总线中。设备驱动程序中也有类似的功能。

```
struct bus_type { ***

    int (*suspend)(struct device *dev, pm_message_t state);

    int (*resume)(struct device *dev);

    *** }

    struct device_driver { ***

    int (*suspend) (struct device *dev, pm_message_t state);

    int (*resume) (struct device *dev);

    *** } 
```

那么这是如何实现的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:34:41.683

我搜索了很多，最后在文档中得到了答案：

> 为了确保在设备挂起或恢复时需要与设备通信的网桥和类似链接可用，设备树以自下而上的顺序遍历以挂起设备。自上而下的顺序用于恢复这些设备。
> 
> 设备树的顺序由设备注册的顺序定义：一个孩子永远不能在其父设备之前注册、探测或恢复；并且不能在该父级之后删除或暂停。
> 
> 策略是设备树应该匹配硬件总线拓扑。

关于总线和设备挂起和恢复回调：

> 所有阶段都使用总线、类型或类回调（即在 dev->bus->pm、dev->type->pm 或 dev->class->pm 中定义的方法）。
> 这些回调是互斥的，所以如果设备类型提供了一个由其 pm 字段指向的 struct dev_pm_ops 对象（即同时定义了 dev->type 和 dev->type->pm），则包含在该对象中的回调（即 dev ->type->pm) 将被使用。否则，如果类提供了一个由其 pm 字段指向的 struct dev_pm_ops 对象（即定义了 dev->class 和 dev->class->pm），PM 核心将使用来自该对象的回调（即 dev->类->下午）。
> 最后，如果设备类型和类对象的 pm 字段都为 NULL（或者这些对象不存在），则将使用总线提供的回调（即来自 dev->bus->pm 的回调）（这允许设备类型在必要时覆盖总线类型或类提供的回调）。

# javascript - 如何从曲线中获取 x,y 位置？

> ID：12967574
> 
> 赞同：0
> 
> 时间：2012-10-19T04:50:29.860
> 
> 标签：javascript, jquery, animation

我想在下面实现这个动画：

![在此处输入图像描述](../Images/d05899c3d88698380a15a5090a3c4843.png)

我正在创建 js fiddle 来像这样工作，但是当我想设置 (x,y) 的位置时我有堆栈..

```
var interval;
function moveit(left,top) {
    $("#obj").css("left",left+'px');
    $("#obj").css("top",top+'px');
}
$("#change").click(function(){
    var left = $("#left").val(); //posisi x
    var top = $("#top").val();  //posisi y
    var velocity= 1;

    interval = setInterval(function() {
        left = parseFloat(left) + parseFloat(velocity);
        top = parseFloat(top) + parseFloat(velocity);
        console.log('position x = ' + left);
        console.log('position y = ' + top);

        if(top >= 400 ) {
        clearInterval(interval);
        }

        moveit(left,top);
    },10);
});

$("#clear").click(function(){
clearInterval(interval);
});
​ 
```

这是我的 js 小提琴[http://jsfiddle.net/viyancs/MxuRP/1/](http://jsfiddle.net/viyancs/MxuRP/1/)

**我的问题**

1.  如何通过生成代码获取该曲线的 x,y 坐标？
2.  也许你有另一个想法让这个更好？

感谢您

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T04:56:00.963

随时间改变速度的 y 分量。

[http://jsfiddle.net/MxuRP/2/](http://jsfiddle.net/MxuRP/2/)

```
var interval;
function moveit(left,top) {
    $("#obj").css("left",left+'px');
    $("#obj").css("top",top+'px');
}
$("#change").click(function(){
    var left = $("#left").val(); //posisi x
    var top = $("#top").val();  //posisi y
    var velocityX = 1;
    var velocityY = 0;
    var accelerationY = 0.1;

    interval = setInterval(function() {
        left = parseFloat(left) + parseFloat(velocityX);
        velocityY += accelerationY;
        top = parseFloat(top) + parseFloat(velocityY);
        console.log('position x = ' + left);
        console.log('position y = ' + top);

        if(top >= 400 ) {
        clearInterval(interval);
        }

        moveit(left,top);
    },10);
});

$("#clear").click(function(){
clearInterval(interval);
}); 
```

# c# - 异常抛出 位置 0 没有行

> ID：12967576
> 
> 赞同：1
> 
> 时间：2012-10-19T04:51:12.857
> 
> 标签：c#, .net, c#-4.0

我想检查用户是否有效。它给了我异常，当用户有效时，它可以正常工作，但是如果用户无效，则会出现一些问题。

> 例外是：位置 0 没有行

这是代码的一部分，

```
 public bool CheckUserExistAndReporter(string user)
{
    int reporterDnnId = -1;
    SMSFunctionController mysms = new SMSFunctionController();
    DataSet uds = mysms.GetUsersUnitByUserName(user);

    reporterDnnId = Convert.ToInt32(uds.Tables[0].Rows[0]["DnnUserID"]);
    if (reporterDnnId > 0)
    {
        bool isValidUser = true;
        return isValidUser;
    }
    //else
    //{
        //bool isValidUser =false;
        //return isValidUser;
   // }
    return false;
} 
```

然后我在这里打电话给那个人。

```
 if (!CheckUserExistAndReporter(user))
                {
                    ErrorLog(messageIn);
                    msgOut = "ugyldig Bruker";//Invalid User.

                } 
```

错误是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T04:58:42.963

阅读完所有答案后，我认为这个比其他答案更好，请在您的代码中添加以下 If。

```
if(uds != null && uds.Tables.Count > 0 && uds.Tables[0].Rows.Count>0) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-19T04:55:06.047

您的方法`mysms.GetUsersUnitByUserName(user)`返回一个空表。可能不满足选择标准，这就是您尝试访问它的原因。你得到了错误。如果您可以在访问数据行之前添加检查，那就更好了。就像是。

```
if(uds != null && uds.Tables.Count > 0 && uds.Tables[0].Rows.Count > 0) 
     reporterDnnId = Convert.ToInt32(uds.Tables[0].Rows[0]["DnnUserID"]); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-19T04:53:10.140

```
Convert.ToInt32(uds.Tables[0].Rows[0]["DnnUserID"]); 
```

您正在按索引访问一行。如果用户无效，则可能没有行，因此索引超出范围。

如果您只关心从数据库返回的记录，您可以执行以下操作：

```
bool isValid = uds.Tables[0].Rows.Count > 0; 
```

更强大的检查将是：

```
bool isValid = false;
if( uds.Tables[0].Rows.Count > 0 && (int)uds.Tables[0].Rows[0]["DnnUserID"] != default( int ) ){
    isValid = true;
} 
```

稍微整理了一下：

```
var rows = uds.Tables[0].Rows;
bool isValid = rows.Count > 0 && (int)rows[0]["DnnUserID"] != default( int ); 
```

或者，如果您需要转换（除非值不是 Int32，否则转换更便宜并且可以工作）：

```
var rows = uds.Tables[0].Rows;
bool isValid = rows.Count > 0 && Convert.ToInt32( rows[0]["DnnUserID"] ) != default( int ); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-19T04:54:47.450

在访问 row[0] 中的 userId 之前，您还应该计算行数。

```
public bool CheckUserExistAndReporter(string user)
{
    bool isValidUser = false;

    SMSFunctionController mysms = new SMSFunctionController();
    DataSet uds = mysms.GetUsersUnitByUserName(user);

    if (uds != null && uds.Tables.Count > 0 && uds.Tables[0].Rows.Count>0)
    { 
        // do further validation
        var reporterDnnId = Convert.ToInt32(uds.Tables[0].Rows[0]["DnnUserID"]);
        if (reporterDnnId > 0)
        {
           isValidUser = true;         
        }
    }
    return isValidUser;  
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-19T04:55:05.910

你可以这样做

```
if(uds.Tables[0].Rows.Count>0)
{
  reporterDnnId = Convert.ToInt32(uds.Tables[0].Rows[0]["DnnUserID"]);
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-19T04:55:22.433

我认为问题出在这条线上`reporterDnnId = Convert.ToInt32(uds.Tables[0].Rows[0]["DnnUserID"]);`。您必须`if (uds.Tables[0].Rows.Count > 0)`在继续处理代码之前进行检查。

```
if (uds.Tables[0].Rows.Count > 0)
{
    reporterDnnId = Convert.ToInt32(uds.Tables[0].Rows[0]["DnnUserID"]); 
    ... 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-10-19T04:57:01.303

首先找出天气数据集是否包含任何记录，然后继续

```
if (uds.Tables[0].Rows.Count > 0)
    {
    // retrieve id and return it
    }
    else
    {
    return something which indicates record not found
    } 
```

# asp.net-mvc - 如何将我的 abc.com 重定向到 www.abc.com？

> ID：12967577
> 
> 赞同：0
> 
> 时间：2012-10-19T04:51:19.947
> 
> 标签：asp.net-mvc, url, web-config

> **可能重复：**
> [asp.net mvc：如何将非 www 重定向到 www，反之亦然](https://stackoverflow.com/questions/3197319/asp-net-mvc-how-to-redirect-a-non-www-to-www-and-vice-versa)

我想将我的网站 url 从 abc.com 重定向到 www.abc.com，以便获得标准的 URL 格式。我怎样才能做到这一点？谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:59:25.803

您应该设置从 abc.com 到 www.abc.com 的“HTTP 301 重定向”

执行此操作的技术取决于您使用的 HTTP 服务器平台类型，并且在 Wikipedia 的 URL 重定向页面的以下部分中进行了简要描述：

[https://en.wikipedia.org/wiki/URL_redirection#HTTP_status_codes_3xx](https://en.wikipedia.org/wiki/URL_redirection#HTTP_status_codes_3xx)

# jquery - 在 ASP.NET 中启用 url 映射后使用 jQuery 调用 ajax

> ID：12967580
> 
> 赞同：1
> 
> 时间：2012-10-19T04:52:05.737
> 
> 标签：jquery, ajax

这是我的脚本：

```
$.ajax({
    type: 'POST',
    url: 'ws.aspx/RetC',
    ... 
```

在我的 ASP.NET 应用程序中，我通过添加以下内容启用了 url 映射：

```
<urlMappings>
  <add mappedUrl="~/mem/ws.aspx" url="~/w" />
...
</urlMappings> 
```

ajax 调用现在返回“未找到”错误。我为 url 尝试了不同的选项，例如 /w/RetC 或 w/Retc，但没有一个有效。有谁知道问题是什么？

# html - 如何利用 HTML 布局中的剩余高度

> ID：12967586
> 
> 赞同：2
> 
> 时间：2012-10-19T04:53:05.943
> 
> 标签：html, css, height

我的问题很简单，我`div`的布局中有三个 s：

```
<div id="header">90px height</div>
<div id="content">the rest of the height of the window</div>
<div id="footer">20px height</div> 
```

现在，我想要`#content` `div`填充窗口的其余部分。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:00:26.157

........***[现场演示](http://tinkerbin.com/5PN3zWmT)***............

嗨，现在你可以习惯`position` `absolute`和`fixed`

**像这样**

**CSS**

```
#header{
height:90px;
  background:red;
}

#content{
background:yellow;
  position:absolute;
  left:0;
  right:0;
  top:90px;
  bottom:20px;
}

#footer{
height:20px;
  background:green;
  position:fixed;
  left:0;
  right:0;
  bottom:0;
} 
```

**[现场演示](http://tinkerbin.com/5PN3zWmT)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:58:45.620

```
var height = $(window).height() - $("#header").height() - $("#footer").height();

$("#content").height(height + "px"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T04:55:35.080

添加jquery查找窗口高度

```
var h = $(window).height();
$("#content").css("height", h); 
```

如果你想要宽度

```
var w = $(window).width();
$("#content").css("width", w); 
```

# mysql - 使用未使用的主键

> ID：12967588
> 
> 赞同：1
> 
> 时间：2012-10-19T04:53:17.030
> 
> 标签：mysql, indexing, key

> **可能重复：**
> [如何重用 auto_increment 值？](https://stackoverflow.com/questions/9743121/how-to-reuse-auto-increment-values)

我有一个表，它有一个**auto-increment** `ID` -column 作为它的**primary key**，但是我遇到了一个“问题”，即每当`key`删除 a 时，都会产生一个间隙。这当然不是问题，但看起来不是很整洁。有没有一种简单的方法让 MySQL 使用第一个可用的未使用的`ID`数字，而不是 ' **next** ' 中的数字`sequence`？我希望我的问题是有道理的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:06:10.373

恕我直言，您想要完成的不是一个好主意。考虑到这一点；还有其他`Table`可能与`primary key`您刚刚删除的 s 相关联。

假设您在与**已删除** `primary key`关联的其他表上有现有值：当您插入一个`primary key`从间隙中获取的新条目时，您将拥有与其他表关联的*值。*你不会想要那个。当然，除非您在删除*主键时清理***所有**表，否则工作量很大。可能还不够。*`Delete Cascade`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:20:23.037

不使用自动增量。如果您真的想要，您可以更改您的 INSERT 以专门插入 id，并将其设置为类似 的内容`1+(select max(id) from your_table_name)`，尽管如果在使用时表中没有行，您可能需要稍微修改它以使其正常运行。如果您这样做，请确保它是一个插入查询的一部分，而不是一个选择后跟一个插入。

但是你为什么担心“整洁”呢？如果您想显示带有序号的内容，只需以其他方式执行此操作，并且不要显示 id。*

# iphone - 应用程序在启动时崩溃，只有更新而不是全新安装

> ID：12967589
> 
> 赞同：7
> 
> 时间：2012-10-19T04:53:40.340
> 
> 标签：iphone, ios, crash, ios6

我在 App Store 上的最新版本有一个奇怪的问题。一些用户报告升级应用程序后启动时应用程序崩溃，并且仅在 iOS6 上发生。但是，如果用户删除应用程序并重新安装，则不会发生崩溃。

我检查了手机上的崩溃日志并看到了这个错误。

```
OS Version:      iOS 6.0 (10A403)

Exception Type:  EXC_BAD_ACCESS (SIGBUS)
Exception Codes: EXC_ARM_DA_ALIGN at 0x2fe6f785
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   My App                          0x00074ace +[aClass sharedNormalImages] (aClass.m:34)
1   dyld                            0x2fe79628 ImageLoaderMachO::doInitialization(ImageLoader::LinkContext const&) + 16
2   dyld                            0x2fe76a3a ImageLoader::recursiveInitialization(ImageLoader::LinkContext const&, unsigned int, ImageLoader::InitializerTimingList&) + 382
3   dyld                            0x2fe76874 ImageLoader::runInitializers(ImageLoader::LinkContext const&, ImageLoader::InitializerTimingList&) + 36
4   dyld                            0x2fe6dd04 dyld::initializeMainExecutable() + 172
5   dyld                            0x2fe7085c dyld::_main(macho_header const*, unsigned long, int, char const**, char const**, char const**, unsigned long*) + 1804
6   dyld                            0x2fe6d32c dyldbootstrap::start(macho_header const*, int, char const**, long, macho_header const*, unsigned long*) + 604
7   dyld                            0x2fe6d064 _dyld_start + 60 
```

与最近的版本相比，sharedNormalImages 函数根本没有改变，它只是一个返回这样一个数组的函数。

```
static NSArray *normalImages = nil;
+ (NSArray *)sharedNormalImages
{
     if (normalImages == nil) {
             normalImages = @[@"xx.png", @"xy.png", @"yx.png", @"yy.png"];
     }

     return normalImages;
} 
```

我真的不知道会发生什么。我尝试用旧版本安装，然后用 Xcode 替换为新版本。问题也不会发生。所以我根本无法在我的环境中复制它。这太奇怪了。

**编辑**

不确定它是如何相关的，但我在设备控制台上看到了此错误消息。

```
Oct 19 12:36:16 iPhone My App[210] <Error>: objc[210]: Class  is implemented in both /var/mobile/Applications/A5EC61E7-7DBA-4FA5-A5FE-6D49EAFAD6EB/My App.app/My App and /var/mobile/Applications/A5EC61E7-7DBA-4FA5-A5FE-6D49EAFAD6EB/My App.app/My App. One of the two will be used. Which one is undefined.
Oct 19 12:36:16 iPhone kernel[0] <Debug>: launchd[210] Builtin profile: container (sandbox)
Oct 19 12:36:16 iPhone kernel[0] <Debug>: launchd[210] Container: /private/var/mobile/Applications/A5EC61E7-7DBA-4FA5-A5FE-6D49EAFAD6EB (sandbox)
Oct 19 12:36:16 iPhone ReportCrash[211] <Notice>: Formulating crash report for process My App[210]
Oct 19 12:36:16 iPhone com.apple.launchd[1] (UIKitApplication:com.acompany.myapp[0x813f][210]) <Warning>: (UIKitApplication:com.acompany.myapp[0x813f]) Job appears to have crashed: Bus error: 10
Oct 19 12:36:16 iPhone com.apple.launchd[1] (UIKitApplication:com.acompany.myapp[0x813f]) <Notice>: (UIKitApplication:com.acompany.myapp[0x813f]) Throttling respawn: Will start in 2147483647 seconds
Oct 19 12:36:16 iPhone backboardd[52] <Warning>: Application 'UIKitApplication:com.acompany.myapp[0x813f]' exited abnormally with signal 10: Bus error: 10
Oct 19 12:36:16 iPhone ReportCrash[211] <Error>: libMobileGestalt copySystemVersionDictionaryValue: Could not lookup ReleaseType from system version dictionary
Oct 19 12:36:16 iPhone ReportCrash[211] <Notice>: Saved crashreport to /var/mobile/Library/Logs/CrashReporter/My App_2012-10-19-123616_iPhone.plist using uid: 0 gid: 0, synthetic_euid: 501 egid: 0 
```

仅供参考，我将应用程序图标更新为在最新更新中“预呈现”，但我认为这不会导致崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:39:34.530

要复制该问题，请尝试以下步骤：

1.  使用 Ad-Hoc Provisioning 配置文件构建两个版本，
2.  使用 iTunes 安装旧版本。
3.  在设备上打开应用程序并浏览所有视图。
4.  使用 iTunes 更新新版本的应用程序并运行

# java - Javamail 未读消息返回最后一条消息而不是未读消息

> ID：12967591
> 
> 赞同：0
> 
> 时间：2012-10-19T04:53:47.547
> 
> 标签：java, jakarta-mail

这是我的代码，它应该收到未读消息。但是，它正在返回我收件箱中的最后一条消息。有什么建议么？

```
import javax.mail.*;
import javax.mail.internet.*;
import javax.mail.search.*;
import java.util.*;
import com.sun.mail.pop3.POP3SSLStore;

public class MailClient {
public static void main(String[] args) {
    try {
      Properties props = new Properties();
      props.setProperty("mail.pop3.connectionpooltimeout", "3000");
      props.setProperty("mail.pop3.connectiontimeout", "3000");
      props.setProperty("mail.pop3.timeout", "3000");

      Session session;

          URLName url = new URLName("pop3","pop.gmail.com",995,"","email@gmail.com","pwd");
    session = Session.getInstance(props, null);
    Store store = new POP3SSLStore(session,url);
    store.connect();

    Folder folder = store.getFolder("INBOX");
    folder.open(Folder.READ_ONLY);

    Flags seen = new Flags(Flags.Flag.SEEN);
    FlagTerm unseenFlagTerm = new FlagTerm(seen,false);
    Message message[] = folder.search(unseenFlagTerm); 

    for (int i=0, n = message.length;i<20;i++) {
        System.out.println("Message " + (i + 1));
                    System.out.println("From : " + message[i].getFrom()[0]);
                    System.out.println("Subject : " + message[i].getSubject());
                    System.out.println("Sent Date : " + message[i].getSentDate());
    }
    folder.close(false);
    store.close();
    }
    catch (MessagingException e) {
            System.out.println("Error: " + e);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T06:33:54.100

POP3 协议不支持任何标志，因此它无法告诉您消息是否已被阅读。有关详细信息，请参阅[com.sun.mail.pop3 包的 javadocs](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/pop3/package-summary.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:03:39.810

可否尝试如下使用并试一试；

```
int messageCount =  folder.getUnreadMessageCount();

if(messageCount>0){
 Message[] messages = folder.getMessages();
} 
```

# ruby-on-rails - 从另一个控制器的显示操作中发布评论

> ID：12967595
> 
> 赞同：0
> 
> 时间：2012-10-19T04:54:04.150
> 
> 标签：ruby-on-rails, ruby

我有一个典型的博客应用程序，用户可以在其中发布来自 Posts#show 模板的评论。

```
resources :posts do
  resources :comments
end

# posts_controller.rb
def show
  @post = Post.find(params[:id])
  @comment = @post.comments.build
end
# comments_controller.rb
def create
  @post = Post.find(params[:post_id])
  @comment = @post.comments.build(params[:comment])
  @comment.author = current_user
  if @comment.save
    redirect_to @post
  else
    render 'posts/show'
  end
end 
```

在视图中，我首先检查是否有评论，输出它们，然后我正在显示一个新的评论表单。

```
/ posts/show.html.slim
- if @post.comments.any?
  @post.comments.each do |comment|
    p = comment.author.name
...
= form_for [@post, @comment] 
```

如果评论验证失败，我会收到“nil 类没有方法名称”错误。我认为这是因为`@post.commets.any?`返回 true，因为评论是通过帖子关联构建的——即使评论未通过验证并且没有保存。

你如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:53:09.970

当评论验证失败时，comment.author 可能未设置，因此将为 nil。这解释了 nil.name 错误。

你可以尝试类似的东西

```
@post.comments.each do |comment|
   p = comment.author.try(:name) 
```

或者

```
@post.comments.each do |comment|
  unless comment.new_record?
    p = comment.author.try(:name)
  end
end 
```

或者

```
@post.comments.reject{|c| c.new_record?}.each do |comment|
  p = comment.author.try(:name)
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:44:53.583

改变

```
if @post.comments.any? 
```

到

```
if @post.comments.blank? 
```

并再次检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T05:34:40.537

在不知道您的模型`posts`和`comments`模型是什么样子的情况下，很难找出问题所在，但我将如何解决您的问题：

```
# app/models/post.rb
has_many :comments

# app/models/comment.rb
belongs_to :post

# app/controllers/posts_controller.rb
def show
  @post = Post.find params[:id]
end

# app/controllers/comments_controller.rb
def create
  # No need to instantiate the post and build the comment on it here since
  # we're going to set the post_id on the comment form.

  @comment = Comment.new params[:comment]
  if @comment.save
    # ...
  else
    # ...
  end
end

# app/views/posts/show.html.slim
- if @post.comments.any?
  @post.comments.each do |comment|
    # ...

- form_for Comment.new do |f|
  = f.text_field :author
  = f.text_field :body
  # ...
  = f.hidden_field :post_id, @post.id # This passes the comment's related post_id on to the controller.
  = f.submit 
```

我不知道 Slim 部分在语法上是否正确——我还没有使用模板引擎。

请注意，这不是生产安全代码！为了使示例简短并且（希望）切中要害，我省略了很多手续。

# javascript - 函数的含义是什么？

> ID：12967596
> 
> 赞同：0
> 
> 时间：2012-10-19T04:54:05.540
> 
> 标签：javascript

```
function hasClass( elem, cls ) {
var reClass = new RegExp(' ' + cls + ' ');
return reClass.test(' ' + elem.className + ' ');
} 
```

我是javascript的新学习者，我从一本书中看到了上述功能。但我不知道它是什么意思？希望有人可以向我解释。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:56:25.220

它只是测试给定元素是否包含给定类。这对于具有多个类的元素很有用（旧浏览器默认不支持）。

考虑一个像`<div id='test' class="button login"></div>`. 如果你将它传递给函数，你会得到如下：

```
function hasClass( elem, cls ) {

    // var reClass = new RegExp(' login ');
    var reClass = new RegExp(' ' + cls + ' ');

    // return reClass.test(' button login ');  (ie, true)
    return reClass.test(' ' + elem.className + ' ');
}
console.log(hasClass(document.getElementById('test'), 'login')); 
```

[演示在这里](http://jsfiddle.net/G7bdW/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T04:56:33.493

它检查元素的类属性是否包含指定的类（cls）

# c# - 在内存有限时测试应用程序行为

> ID：12967598
> 
> 赞同：1
> 
> 时间：2012-10-19T04:54:22.683
> 
> 标签：c#, winforms, memory-management

我正在开发一个 winform 应用程序。我想在系统内存不足时测试我的应用程序行为。

我的应用程序处理大量图像并显示在列表视图中。我已经实现了虚拟模式和其他技术来最小化内存。我可以在我的系统中正常运行我的应用程序，并且在通过“任务管理器”观察时没有发现任何与内存相关的问题。但是，我的客户在运行应用程序时报告了“内存不足”问题（他在 1gb 系统上进行了测试）。

所以我想知道是否有工具或技术可以用来在有限的内存中测试我的应用程序（比如，我希望我的应用程序的行为与它在具有 1gb 内存的系统中的行为相同）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:00:59.780

查看 Jon Hanna 在此线程中的答案：

[如何模拟 .net 应用程序的低内存？](https://stackoverflow.com/questions/8466361/how-to-simulate-low-memory-for-net-application)

需要注意的重要一点是，每个进程都有自己的虚拟内存空间，因此要模拟自己的虚拟内存不足，您应该分配一些未使用的填充内存（如 Jon 建议的那样）。

# php - 将数组字段传递给jquery ajax

> ID：12967600
> 
> 赞同：0
> 
> 时间：2012-10-19T04:54:31.153
> 
> 标签：php, jquery

我有一个通过 jquery ajax 提交的表单。在表单的早期，我有这个字段：

```
 <select name="inquirymodule[]" id="inquirymodule"> 
```

用户可以添加任意数量的内容，所有选择都进入inquirymodule[] 数组。

jQuery 看起来像这样：

```
 jQuery.ajax({
         type: 'POST',
         url: 'ajax.php',
         dataType: 'json',
         data: {
                inquirymodule: jQuery("select[name='inquirymodule[]']").serialize(),
         },
         error: function(XMLHttpRequest, textStatus, errorThrown) {
             alert('error');
         }
 }); 
```

这很好用。

尝试对日期做同样的事情，如下所示：

```
 <input class="formInput" type="text" id="startBreak0" name='startbreak[]' /> 
```

添加

```
 startbreak: jQuery("select[name='startbreak[]']").serialize() 
```

到ajax调用。它不起作用，我不明白为什么。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T04:56:49.500

`select`当元素是输入时，您仍然在选择器中

```
startbreak: jQuery("input[name='startbreak[]']").serialize() 
```

# javascript - 将两个单词拆分为变量

> ID：12967611
> 
> 赞同：2
> 
> 时间：2012-10-19T04:55:22.020
> 
> 标签：javascript, jquery, replace, split

我从数据库中随机解析了这个 date/2 单词：

```
JAN 2012
FEB 2013
MAR 2014 
```

等等

我想让变量**a**中的月份和变量**b**中的年份。日期在跨度中解析，如下所示：

```
<span class="rt_item">DEC 2012</span> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T07:07:09.207

试试这个代码：

```
 var str="DEC 2012";
    var mon=str.substr(0,3);
    var year=str.substr(4,7); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-19T04:57:38.377

您可以为此使用正则表达式：

```
var regex = /([A-Z]{3}) ([0-9]{4})/;
var matches = "JAN 2012".match(regex);
var a = matches[1];
var b = matches[2]; 
```

否则，使用`.split(" ")`：

```
var matches = "JAN 2012".split(" ");
var a = matches[0];
var b = matches[1]; 
```

**[这两种方法都在这个小提琴](http://jsfiddle.net/5YPud/)**中演示。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-19T05:00:07.933

```
var mySplitResult = "MAR 2014".split(" ");
var x = mySplitResult[0];
var y = mySplitResult[1]; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-19T05:02:06.700

您可以创建一个对象数组，其中包含从跨度派生的 a（月）和 b（年）属性：

```
var md = [],
    rtitems = $('.rt_item');
for (var i=0;i<rtitems.length;i+1){
  var item = rtitems[i].text().split(' ');
  md.push ({a: item[0], b: item[1]});
} 
```

对于一组跨度，例如：

```
<span class="rt_item">DEC 2012</span>
<span class="rt_item">JAN 2012</span>
<span class="rt_item">FEB 2013</span> 
```

`md[0].a`将是`'DEC'`，并且`md[0].b` `2012`

# javascript - 触发从 iframe 到父文档的自定义事件

> ID：12967616
> 
> 赞同：46
> 
> 时间：2012-10-19T04:55:36.737
> 
> 标签：javascript, jquery, iframe

我在 iframe 中触发自定义事件并从父文档中检测到它时遇到了一些麻烦。iframe 和父文档都具有相同的来源（相同的协议、相同的主机、相同的端口）。

有什么建议吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-04-03T04:18:33.057

我遇到了类似的问题并习惯于`window.postMessage`解决。

目前，API 仅支持传递字符串，但如果您修改解决方案，它会很强大。更多细节[在这里](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)

从源页面（被 iframe 使用）：
postMessage API 需要 2 个参数 - message ， target

前任：`window.parent.postMessage("HELLO_PARENT", 'http://parent.com');`

从父页面（包含 iframe。例如容器）：

1.  像往常一样添加事件监听器

    ```
     window.addEventListener('message', handleMessage, false); 
    ```

2.  使用 event.origin 检查定义您的函数（出于安全考虑）\

    ```
     function handleMessage(event) {  
         if (event.origin != "http://child.com") { return; }  
         switch(event.data) {   
              case "HELLO_PARENT":  
                 alert("Hello Child");  
                 break;  
         } 
     } 
    ```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-10-19T05:29:11.977

这有效：

```
parent.$('body').trigger('eventName'); 
```

在 iframe 内触发的事件将在父文档中检测到。

* * *

## 回答 #3

> 赞同：33
> 
> 时间：2016-12-28T12:04:30.053

支持同域和跨域 iframe 的一致答案是使用事件系统。

目标是将自定义事件从 iframe 发送到父级。

在 iframe 源文件中：

```
var myCustomData = { foo: 'bar' }
var event = new CustomEvent('myEvent', { detail: myCustomData })
window.parent.document.dispatchEvent(event) 
```

并将其添加到包含 iframe 的父文件中：

```
window.document.addEventListener('myEvent', handleEvent, false)
function handleEvent(e) {
  console.log(e.detail) // outputs: {foo: 'bar'}
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-25T17:06:16.933

我也找到了用 jquery 解决这个问题的方法：

在父文件中：

```
<body>
        <iframe src="something.html"></iframe>

</body>

<script>
 window.document.addEventListener('event', function(e){
            console.log("event:" + e.detail);
            $("iframe").contents().find(".class[title='" + e.detail + "']").css(someChanges);
</script> 
```

所以你**不需要****在你的 iFrames**添加任何其他EventListener 。

当然，也许你想看看我的 CustomEvent：

```
var test  = "1";
var event = new CustomEvent('event', { detail: test })
                window.document.dispatchEvent(event); 
```

我希望我能帮助别人...

# html - CSS % 宽度加起来不等于 100%，差异似乎与字体大小成比例

> ID：12967617
> 
> 赞同：1
> 
> 时间：2012-10-19T04:55:37.580
> 
> 标签：html, css

有谁知道为什么两个宽度为 48% 且总水平边距为 4% 的块在不换行的情况下不适合同一行？像这样简单的东西：

```
<div style="width: 500px; margin: 0; padding: 0;">
   <div style="width: 48%; margin: 0 0 0 2%; padding: 0; background-color: red; display: inline-block;">A</div>
   <div style="width: 48%; margin: 0 0 0 2%; padding: 0; background-color: red; display: inline-block;">B</div>
</div> 
```

[jsFiddle](http://jsfiddle.net/MikeHartman/cMHgE/)

它一直让我发疯，它发生在 Firefox、Chrome 和 IE8 上。Windows 和 Linux。

在我的标准缩放设置下，我可以使用“宽度：47.5%”将它们放在同一条线上。如果它是一致的，我可以忍受，但在我的最小缩放时它需要是 47.8%，在我的最大缩放时它需要是 46.5%。因此，在所有缩放中，我无法与页面上的其他元素保持一致的空白对齐。

我最初认为这只是一个舍入错误，但由于软糖因素似乎取决于字体大小，所以它必须更多。无论如何，我可能会找到一些方法让我的页面看起来不错，但我真的很想知道它为什么会这样做。它会让我今晚保持清醒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:05:24.333

它是构成额外空间的 div 之间的空白。由于这些 div 是内联块的，因此它们周围的空白被渲染

```
<div class="should_fit">A</div><div class="should_fit">B</div> 
```

[http://jsfiddle.net/cMHgE/4/](http://jsfiddle.net/cMHgE/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-22T21:54:29.623

将父元素设置为

```
white-space: nowrap 
```

# c# - 尝试在 TextBlock 中内联 HyperLinkBut ton

> ID：12967618
> 
> 赞同：4
> 
> 时间：2012-10-19T04:55:39.190
> 
> 标签：c#, windows-8, microsoft-metro, inlines

我正在将内联添加到 TextBlock。Run() 内联工作。当然，由于某种原因，Windows 8 中不推荐使用 Hyperlink()（使用 Windows.UI.Xaml.Documents），所以我尝试使用 C# 将 HyperlinkBut​​ton 封装在 InlineUIContainer 中。我知道这个概念是合理的，但我的代码失败了。

如果我注释掉“使用 Windows.UI.Xaml.Documents;”这一行 然后我让两个周围的内联显示在我的 ListView 中（它使用下面的方法。）如果未注释此行，则 Inlines.Add for 'link' 正在抛出。我究竟做错了什么？

> ```
>  public TextBlock enrichPostText(anFullPost post)
>     {
>         TextBlock text_block = new TextBlock();
>         text_block.Inlines.Clear(); 
> ```

```
 var holdText = new Run();
        holdText.Text = "Test start >> ";
        text_block.Inlines.Add(holdText);

        HyperlinkButton linkButton = new HyperlinkButton();
        linkButton.NavigateUri = new Uri("http://www.cones.net");
        linkButton.Content = "click me";
        linkButton.Name = "_blank";

        InlineUIContainer link = new InlineUIContainer();
        link.Child = linkButton;

        text_block.Inlines.Add(link);

        var holdText2 = new Run();
        holdText2.Text = " << end test.";
        text_block.Inlines.Add(holdText2);

        return (text_block);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T20:31:55.700

刚刚在 MSDN 上找到了这个，这可能会有所帮助。显然 TextBlock 内容模型不支持 InlineUIContainers 所以它会抛出异常。 [http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/96585db1-8ed4-4a12-8d63-b427dc0d543d/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/96585db1-8ed4-4a12-8d63-b427dc0d543d/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-09T05:22:22.183

我刚刚尝试将 my 更改`RichTextBlock`为 a `TextBlock`，`ArgumentException`当我尝试添加`InlineUIContainer`. 我知道的唯一解决方案是`RichTextBlock`改用；到目前为止，它一直在满足我的需求。

# scala - 为什么 apply() 不能在包对象上以简写形式使用？

> ID：12967623
> 
> 赞同：9
> 
> 时间：2012-10-19T04:56:10.360
> 
> 标签：scala

在普通物体上，我可以执行以下操作：

```
object A {
  def apply = "!"
}
A() // "!" 
```

但是在包对象上，这不起作用：

```
package object A {
  def apply = "?"
}
A.apply // "?"
A() // compile error
    // error: package A is not a value 
```

有一些基本的限制吗？或者它只是一个实现限制，我可以通过稍微调整编译器来解决？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-19T05:44:59.353

你可以在没有应用的情况下做到这一点的唯一方法是：

```
A.`package`() 
```

这是因为`A`不表示值或方法，并且语言规范声明`f()`要有效，`f`必须具有方法类型或带有`apply`方法的值类型。我不知道如何轻松地“调整”编译器来改变这一点，但我怀疑这是否值得。如果您确实想达到这样的长度，只需将您的方法添加到`Predef`.

# ios - UIActivityViewController 101 - 任何事情都会有帮助

> ID：12967631
> 
> 赞同：-1
> 
> 时间：2012-10-19T04:57:25.313
> 
> 标签：ios, email, twitter, ios6, uiactivityviewcontroller

> **可能重复：**
> [UIActivityViewController - 电子邮件和 Twitter 共享](https://stackoverflow.com/questions/12984403/uiactivityviewcontroller-email-and-twitter-sharing)

我开始熟悉新的 iOS 6 共享方式：*UIActivityViewController*（与您从本机 iOS 照片应用程序共享照片时相同），但我遇到了一些问题。首先，当我选择通过电子邮件分享时，我**找不到设置电子邮件主题的方法**。其次，当我在 twitter 上发帖时，我找不到如何发布 URL（除非明确地将其写在 NSString 中）。

之前，在 iOS 5 上，我将*MFMailComposeViewController*用于 Mail，*将 SLComposeViewController*用于 Twitter。它运作良好。如果无法使用*UIActivityViewController*选择主题，是否有办法将我自己的自定义按钮放在 ActivityViewController 上，这些按钮在触摸时会调用*MFMailComposeViewController*和*SLComposeViewController*？我这里只是推测。

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-20T01:49:45.270

I've **[answered](https://stackoverflow.com/questions/12984403/uiactivityviewcontroller-email-and-twitter-sharing/12984541#12984541)** this in another question you have posted.

```
NSString *text = @"My mail text";

NSURL *recipients = [NSURL URLWithString:@"mailto:me@example.com?subject=Hi"];

NSArray *activityItems = @[text, recipients];

UIActivityViewController *activityController = [[UIActivityViewController alloc]
                                            initWithActivityItems:activityItems 
                                            applicationActivities:nil];

[self presentViewController:activityController animated:YES completion:nil]; 
```

# ipad - 为什么我的弹出窗口在 iOS6 上使用 presentViewController:animated 出现倒置：

> ID：12967633
> 
> 赞同：1
> 
> 时间：2012-10-19T04:57:28.343
> 
> 标签：ipad, ios6

在 iPad 上基于 TabBar 的应用程序中，我需要显示模式、弹出视图，我通过调用 UIViewController.presentViewController:animated:completion:

在 iOS5 上这工作正常。但是在 iOS6 上——当设备倒置时——弹出视图会倒置。它从显示屏顶部向下动画，上下颠倒。

当我说设备倒置时，我的意思是 LandscapeLeft（左侧按钮）和 PortraitUpsideDown（顶部按钮）。在其他两个方向中，弹出窗口从底部向上动画，并且如您所期望的那样正面朝上。

我在我的应用程序中使用的所有 3 个弹出视图都会出现问题 - 其中 2 个是 UIViewController 的子类，第 3 个是 MFMailComposeViewController。

我使用这样的代码来显示视图：

```
MyModalViewController * tmpModal = [[MyModalViewController alloc] init];
tmpModal.modalPresentationStyle = UIModalPresentationFormSheet;
tmpModal.contentSizeForViewInPopover =  CGSizeMake(350,450);

[self.tabBarController presentViewController:tmpModal
                                    animated:TRUE
                                  completion:^
                                        {

                                        }]; 
```

我已将 iOS6 旋转委托方法添加到 2 个基于 UIViewController 的视图中，但它没有任何效果。

IE：

```
-(NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAll;
} 
```

那一点帮助都没有。

我怎么能成为唯一遇到此问题的人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T21:11:54.070

问题出在我的 UITabBarController 子类中。我不小心覆盖了“interfaceOrientation”的 getter 方法——我创建了一个具有该名称的 getter，但将其称为 (void) 方法（甚至没有查看返回值）。该方法旨在更新包含当前方向的应用程序范围的变量，我从名为 viewDidRotate 的方法调用它，该方法是 UIDeviceOrientationDidChangeNotification 通知的观察者。

我将方法更改为“saveInterfaceOrientation”（并使其无效），问题就消失了。

# ios4 - 在我的应用程序中访问当前设备时间

> ID：12967638
> 
> 赞同：1
> 
> 时间：2012-10-19T04:58:03.350
> 
> 标签：ios4, nsdateformatter, iphone-4, nstimezone

我想在我的应用程序中获取当前设备时间，并在我的设备时间更新时不断更新该时间。我遵循该代码

```
 NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

    [dateFormatter setDateFormat:@"dd/mm/yy hh:mm"];
    [dateFormatter setTimeStyle:NSDateFormatterShortStyle];
    NSString*  todayString = [dateFormatter stringFromDate:[NSDate date]]; 
```

我得到了当前的设备时间，但是当用户使用我的应用程序时它不会自动更新。我能做些什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-06T11:52:33.840

`todayString`必须随着设备时间的变化而变化。这意味着，您需要创建一个 60 秒的计时器，并且每 60 秒更新一次时间。

你需要这样做：

```
NSTimer *timer = [NSTimer timerWithTimeInterval:60.0 target:self selector:@selector(updateTimer:)
                                                   userInfo:nil repeats:YES];
[[NSRunLoop mainRunLoop] addTimer:timer forMode:NSDefaultRunLoopMode];

- (void) updateTimer:(id) object
{
  // Write required code here.
} 
```

# python - 在python中使用全局变量

> ID：12967645
> 
> 赞同：1
> 
> 时间：2012-10-19T04:59:06.530
> 
> 标签：python, c

我是 python 新手。我正在尝试将我的一个 c 程序转换为相应的 python 程序，但是我无法在 python 中使用全局变量。我在 c 和 python 中的代码是：

* * *

```
#include <stdio.h>
int globalcount;

void noofways(int firstnumchosen,int sum,int numofnum)
{
if(sum<0)
    return;

if(sum==0 && numofnum!=0)
    return;

if(sum==0 && numofnum==0){
    globalcount++;
    return;
}

if(numofnum<=0)
    return;

if(firstnumchosen>sum)
    return;

noofways(firstnumchosen+1,sum,numofnum);
noofways(firstnumchosen+1,sum-firstnumchosen,numofnum-1);
}

int main()
{
noofways(1,8,3);
printf("Required number: %d",globalcount);
return 0;
} 
```

* * *

```
def noofways(firstnumchosen, sum, numofnum):
    global count
    count=0
    if sum<0:
        return 
    if sum==0 and not(numofnum==0):
        return
    if sum==0 and numofnum==0:
       count+=1
       return
    if numofnum<=0:
       return
    if firstnumchosen>sum:
       return
    noofways(firstnumchosen+1,sum,numofnum)
    noofways(firstnumchosen+1,sum-firstnumchosen,numofnum-1)

res=noofways(1,8,3);
print count 
```

* * *

我想我知道如何在 python 中声明一个全局变量，但是我在弄清楚如何使用该变量进行递归时遇到了问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:02:34.280

每次递归调用都会将计数设置回 0

```
def noofways(firstnumchosen, sum, numofnum):
    global count
    # don't set count to 0 here
    if sum<0:
        return 
    if sum==0 and not(numofnum==0):
        return
    if sum==0 and numofnum==0:
       count+=1
       return
    if numofnum<=0:
       return
    if firstnumchosen>sum:
       return
    noofways(firstnumchosen+1,sum,numofnum)
    noofways(firstnumchosen+1,sum-firstnumchosen,numofnum-1)

# set count to 0 here
count = 0
res=noofways(1,8,3);
print count 
```

# python - 用 Python 编写“猜数字”游戏的正确方法

> ID：12967649
> 
> 赞同：-1
> 
> 时间：2012-10-19T04:59:27.190
> 
> 标签：python, python-3.x

我是 python 和一般编程的新手，我已经为 Python 中的猜数游戏编写了一些代码。它允许用户 6 次尝试猜测一个随机数。它有效，但是我不确定这是否是编写它的最佳方式或最有效的方式，如果我能得到一些建设性的反馈，我将不胜感激。

代码：

```
 #Guess my Number - Exercise 3
#Limited to 5 guesses

import random 

attempts = 1
secret_number = random.randint(1,100)
isCorrect = False
guess = int(input("Take a guess: "))

while secret_number != guess and attempts < 6:

    if guess < secret_number:
        print("Higher...")
    elif guess > secret_number:
        print("Lower...")
    guess = int(input("Take a guess: "))
    attempts += 1

if attempts == 6:
    print("\nSorry you reached the maximum number of tries")
    print("The secret number was ",secret_number) 

else:
    print("\nYou guessed it! The number was " ,secret_number)
    print("You guessed it in ", attempts,"attempts")

input("\n\n Press the enter key to exit") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:09:48.953

我会重构您的代码以使用`for`循环而不是`while`循环。使用`for`循环消除了手动实现计数器变量的需要：

```
import random

attempts = 5
secret_number = random.randint(1, 100)

for attempt in range(attempts):
    guess = int(input('Take a guess: '))

    if guess < secret_number:
        print('Higher...')
    elif guess > secret_number:
        print('Lower...')
    else:
        print()
        print('You guessed it! The number was ', secret_number)
        print('You guessed it in', attempts, 'attempts')

        break

if guess != secret_number:
    print()
    print('Sorry you reached the maximum number of tries')
    print('The secret number was', secret_number) 
```

# google-maps-api-3 - 在谷歌地图融合表中使用 ST_INTERSECT 导致错误请求

> ID：12967656
> 
> 赞同：0
> 
> 时间：2012-10-19T04:59:59.687
> 
> 标签：google-maps-api-3, google-fusion-tables

我正在尝试查看 lat/long 位置是否包含在谷歌地图的某些边界内。

我用融合表显示我的界限。

从融合表中直接选择会返回我的多边形数据：

```
https://www.googleapis.com/fusiontables/v1/query?sql=SELECT geometry FROM 1NosbtruuU4DH_tC2rtvTkFiMZfPNgL-HWUNx_Kk&key=mykey 
```

在我的查询中添加带有 ST_INTERSECT 的 WHERE 子句时，出现错误：

```
https://www.googleapis.com/fusiontables/v1/query?sql=SELECT geometry FROM 1NosbtruuU4DH_tC2rtvTkFiMZfPNgL-HWUNx_Kk&key=mykey WHERE ST_INTERSECTS(geometry,CIRCLE(LATLNG(-33.8977067,151.1944247),10)) 
```

错误是：

```
{
 "error": {
  "errors": [
   {
    "domain": "usageLimits",
    "reason": "keyInvalid",
    "message": "Bad Request"
   }
  ],
  "code": 400,
  "message": "Bad Request"
 }
} 
```

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:39:04.777

您的地理数据位于名为几何的列中，而不是纬度：

将 ST_INTERSECTS 中的纬度更改为几何： [https](https://www.googleapis.com/fusiontables/v1/query?sql=SELECT) ://www.googleapis.com/fusiontables/v1/query? sql=SELECT geometry FROM 1NosbtruuU4DH_tC2rtvTkFiMZfPNgL-HWUNx_Kk&key=mykey WHERE ST_INTERSECTS(geometry,CIRCLE(LATLNG(-33.8977067,151.1944247), 10))

[示例地图](http://www.geocodezip.com/v3_GoogleEx_FusionTables_generic_JSON_linktoC.html?lat=-33.891093&lng=151.194847&zoom=12&type=m&tablequery=SELECT%20geometry%20%20FROM&tableid=1NosbtruuU4DH_tC2rtvTkFiMZfPNgL-HWUNx_Kk&where=%20ST_INTERSECTS%28geometry,CIRCLE%28LATLNG%28-33.8977067,151.1944247%29,10%29%29)

您可能还应该[在 Google Maps API v3 小组中阅读 Warren Shen 对您的问题的回复](https://groups.google.com/group/fusion-tables-users-group/browse_frm/thread/f19ab93495f2d469#)。

# c++ - 使用递归检查树是否平衡

> ID：12967658
> 
> 赞同：0
> 
> 时间：2012-10-19T05:00:07.387
> 
> 标签：c++, tree

实施：

```
bool tree_isBalanced(tree_t tree);
    // EFFECTS: returns true if tree is balanced, false otherwise 
```

鉴于您可以假设已经为您实现了以下功能：

```
bool tree_isEmpty(tree_t tree);
   // EFFECTS: returns true if tree is empty, false otherwise

tree_t tree_make();
   // EFFECTS: creates an empty tree.

tree_t tree_make(int elt, tree_t left, tree_t right);
   // EFFECTS: creates a new tree, with elt as it's element, left as
   //          its left subtree, and right as its right subtree

int tree_elt(tree_t tree);
   // REQUIRES: tree is not empty
   // EFFECTS: returns the element at the top of tree.

tree_t tree_left(tree_t tree);
   // REQUIRES: tree is not empty
   // EFFECTS: returns the left subtree of tree

tree_t tree_right(tree_t tree);
   // REQUIRES: tree is not empty
   // EFFECTS: returns the right subtree of tree 
```

如果树中每个节点的右子树和左子树的高度相同，则树是平衡的。树的高度定义为从树根到树中最深节点的路径中存在的节点数。只有一个节点的树的高度为 1，而空树的高度为零。因此，空树被认为是完美平衡的。

当我们向下移动一棵树时，我该如何处理递归增长？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:08:14.177

这取决于您担心递归增长的哪个方面。如果您担心递归调用的总数，可能值得指出的是，这里的典型实现将是 O(N) 总调用，其中 N 是树节点的数量。由于高度的定义是每个节点，很难想象比 O(N) 做得更好。

如果您担心最大递归深度，并且可能会破坏您的调用堆栈：您可以做的一件事是根本不使用调用堆栈。也就是说，将递归实现为作用于标准堆栈对象之上的循环。在底层，这会将大部分内存使用转移到堆上（通过底层列表、双端队列等的动态重新分配）并防止调用堆栈泛滥。（请注意，内存使用和堆栈与堆的讨论实际上取决于 C++ 实现。但是，据我所知，它适用于所有主要的 PC 环境）。

# c - 4 位无符号溢出

> ID：12967661
> 
> 赞同：0
> 
> 时间：2012-10-19T05:00:38.090
> 
> 标签：c

是否保证这段代码打印在任何平台上的值总是从 0 到 15？

```
#include <stdio.h>

typedef struct UI4{
    unsigned value: 4;
} ui4;

int main(void)
{
    ui4 u;

    u.value = 0;
    while (1) {
        printf("%u\n", u.value++);
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:06:37.157

是的，无符号整数溢出保证按照标准“环绕”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T05:55:57.217

我认为理论上一些非常奇怪的架构可能会产生不同的结果（基于 BCD 的计算机）？但也许在那种情况下，它不是一个合规的实现。实际上，您应该得到 0 到 15 的 4 位。但我说不要故意溢出。

# android - 通过android猴子工具跳过时间更改的任何方式

> ID：12967666
> 
> 赞同：0
> 
> 时间：2012-10-19T05:01:19.913
> 
> 标签：android, android-monkey

我正在使用猴子工具对应用程序以及其他一些应用程序执行 UI 压力测试。但是猴子正在改变时间，这会影响日志时间戳。这在调试问题（系统/事件日志）时会引起烦人。 .

有没有办法在猴子锻炼应用程序时硬编码时间或不触摸时间..

-谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:08:52.910

以我的经验，Android 中的猴子是一个本质上完全随机的 UI 练习器。我不确定猴子工具，但是如果您想对UI 事件进行*编码*并专门制作测试脚本（根据我的经验，这是一个好主意），请查看[Robotium](http://code.google.com/p/robotium/)

它基本上让您可以用 Java 编写脚本来单击某些 UI 元素、打开某些菜单等。它非常有用，这样您就可以避免发生您不希望发生的事情。

它也非常容易实现。

# asp.net - 嵌套网格视图中的错误“在容器中找不到数据项”

> ID：12967672
> 
> 赞同：0
> 
> 时间：2012-10-19T05:02:07.907
> 
> 标签：asp.net, linq

在主gridview`"GridViewTtransmittals"`中，我有一个名为.的嵌套gridview `"GridViewTranstoCon"`。当“GridViewTranstoCon”有数据时，我没有问题，但是当没有任何数据返回错误时，`"A data item was not found in the container",`我喜欢它返回空值或让它不可见。代码如下：

```
protected void GridViewTtransmittals_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.DataItem == null)
        return;
    TransmittaltoConPresentationModel transmittaltoCon = (TransmittaltoConPresentationModel)e.Row.DataItem;
    GridView g2 = (GridView)e.Row.FindControl("GridViewTranstoCon");

    if (transmittaltoCon.TranstoCons != null)
    {
        g2.DataSource = transmittaltoCon.TranstoCons;
        g2.DataBind();
    }
} 
```

主gridview“GridViewTtransmittals”的数据源代码如下：

```
private void DisplayTransmittals()
{
    if (_Transmittals.Any())
    {
        var query = from transmittalno in _Transmittals

        select new TransmittaltoConPresentationModel { TransID = transmittalno.TransID,
                   Transmittal = transmittalno.TRANSMITTAL, TranstoCons = from doctranstocon in _DocTranstoCons 
                   where doctranstocon == null || transmittalno.TransID == doctranstocon.Transid
                   select doctranstocon != null ? doctranstocon.tblTranstoCon : null};

        GridViewTtransmittals.DataSource = query;
    }
    else
    {
        GridViewTtransmittals.DataSource = null;
    }
    GridViewTtransmittals.DataBind();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:15:57.277

尝试包括这个

```
protected void GridViewTtransmittals_RowDataBound(object sender, GridViewRowEventArgs e)
{
   if(e.Row.RowType == DataControlRowType.DataRow)
   {

   }
} 
```

# java - 如何在没有上下文路径的情况下运行我的 servelt (Jetty)

> ID：12967673
> 
> 赞同：1
> 
> 时间：2012-10-19T05:02:12.813
> 
> 标签：java, servlets

我的 Servlet 映射如下所示：

```
<servlet-mapping>
  <servlet-name>myservlet</servlet-name>
  <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

所以我的 Servlet 响应请求，例如`http://bla.com/myservlet/bla/bla/bla`

我怎样才能让它响应`http://bla.com/bla/bla/bla`并摆脱`myservlet`路径的一部分。

此外，我想将 hello world servlet 剥离为 Jetty 附带的默认欢迎文件。

谢谢。

笔记：

1.  我知道如何使用`mod_rewrite`/ **Apache**来做到这一点——我正在寻找不同的解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:26:51.550

如果您使用 Jetty 安装。有两种方法可以做到

1.  您可以将您的战争文件重命名为`root.war`，使其上下文根为`/`
2.  为你的 webapp 创建 context.xml

    ```
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <!-- Required minimal context configuration :                        -->
    <!--  + contextPath                                                  -->
    <!--  + war OR resourceBase                                          -->
    <!-- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -->
    <Set name="contextPath">/</Set>
    <Set name="war"><SystemProperty name="jetty.home" default="."/>/webapps/blawh.war</Set> 
    ```

    context.xml 位于`$JETTY_HOME/contexts`. 正如你所看到的，这个目录已经有 test.war 的 context.xml。通过查看 test.xml，您可以很好地了解您的 webapp 的 context.xml 应该是什么样子。
    完成自己的创建后，继续删除`contexts/test.xml`,`contexts/test.d`和`webapps/test.war`. （只是为了清理测试的东西）。这也回答了你的第二个问题。

如果您使用的是 maven，只需执行以下操作：

```
<插件>
        <插件>
            <groupId>org.mortbay.jetty</groupId>
            <artifactId>jetty-maven-plugin</artifactId>
            <配置>
              <webAppConfig>
                <上下文路径>/</上下文路径>
              </webAppConfig>
              <!-- 剪辑 -->

```

参考：[Jetty/Howto/Deploy Web Applications](http://wiki.eclipse.org/Jetty/Howto/Deploy_Web_Applications#Deploying_Contexts)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:23:35.243

您可以添加多个 url 模式以映射到同一个 servlet

```
<servlet-mapping>
  <servlet-name>myservlet</servlet-name>
  <url-pattern>/bla</url-pattern>
</servlet-mapping>

<servlet-mapping>
  <servlet-name>myservlet</servlet-name>
  <url-pattern>/bla/bla</url-pattern>
</servlet-mapping> 
```

# objective-c - 锁屏壁纸没有在后台播放音频 iphone

> ID：12967678
> 
> 赞同：0
> 
> 时间：2012-10-19T05:02:32.570
> 
> 标签：objective-c, ios, background, wallpaper, lockscreen

我正在开发应用程序，在该应用程序中，我必须更改锁屏壁纸，而无需通过应用程序以编程方式在后台播放音频。我已经在后台处理了音频，但有什么办法可以通过应用程序来完成。appstore 上有一个应用程序，这里是链接[https://itunes.apple.com/us/app/sticky-notes-hd-with-bump/id364874025?mt=8](https://itunes.apple.com/us/app/sticky-notes-hd-with-bump/id364874025?mt=8)我不知道这怎么可能。

谢谢。

# android - 如何创建像 GoWeather 天气应用程序一样的滑块？

> ID：12967680
> 
> 赞同：2
> 
> 时间：2012-10-19T05:02:33.773
> 
> 标签：android, slider

Go天气应用程序（[Go Weather On Google Play](https://play.google.com/store/apps/details?id=com.mediawoz.goweather&hl=en)）在下图中的“MON”、“TUE”、“WED”上方的底部附近有一个漂亮的小滑块。

![在此处输入图像描述](../Images/8c3987453a4a193cf3cd8cd95eab2655.png)

除了显示的 3 天之外，您还可以向上拖动滑块以显示更长的每日预报。您还可以向下拖动滑块以关闭滑块并隐藏每日图形温度 + 图标。

我认为这不是一个普通的滑块，因为它似乎支持 3 个位置

1.  90% 的屏幕（预测时可见）
2.  屏幕的 20%（如下）
3.  屏幕的 0%（除了滑块不可见）

有谁知道如何制作这种类型的用户界面？

非常感谢代码示例或网站链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:14:36.943

这只是布局和小部件的排列，这是我创建的示例 xml，您可以将差异小部件和布局设计成这样，

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:padding="@dimen/padding_medium"
    android:text="@string/hello_world"
    tools:context=".MainActivity" />

<SlidingDrawer android:id="@+id/SlidingDrawer" android:handle="@+id/slideHandleButton"
        android:content="@+id/contentLayout" android:layout_width="wrap_content"
        android:layout_height="120dp" android:orientation="vertical"

        android:layout_alignParentBottom="true"
        >

         <Button 
             android:layout_width="fill_parent"
             android:layout_height="10dp" 
             android:id="@+id/slideHandleButton"
             android:background="#00868B" />

         <LinearLayout
             android:id="@+id/contentLayout"
             android:layout_width="fill_parent"
             android:layout_height="150dp"
             android:background="#90000000"
             android:gravity="center|top"
              >

             <FrameLayout
                    android:layout_width="wrap_content"
                    android:layout_height="150dp"
                    android:layout_weight="1"
                 >

                 <LinearLayout 
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:gravity="center"
                        android:layout_gravity="center_vertical"
                     >
                 <ImageView

                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent"
                        android:src="@drawable/diego"

                     />
                 <Button

                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Diego"

                     />
                 </LinearLayout>
             </FrameLayout>
             <FrameLayout
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:layout_weight="1" 
                 >
                <LinearLayout 
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:gravity="center"
                        android:layout_gravity="center_vertical"
                     >
                 <ImageView

                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent"
                        android:src="@drawable/ellie"

                     />
                 <Button

                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="Ellie"

                     />
                 </LinearLayout>
             </FrameLayout>
            <FrameLayout
                 android:layout_width="wrap_content"
                 android:layout_height="wrap_content"
                 android:layout_weight="1" 
                 >
                 <LinearLayout 
                        android:layout_width="fill_parent"
                        android:layout_height="fill_parent"
                        android:gravity="center"
                        android:layout_gravity="center_vertical"
                     >
                 <ImageView

                        android:layout_width="wrap_content"
                        android:layout_height="fill_parent"
                        android:src="@drawable/scart"

                     />
                 <Button

                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:background="@drawable/sid"

                     />
                 </LinearLayout>
             </FrameLayout>

        </LinearLayout>

</SlidingDrawer> 
```

只需将其粘贴到您的程序中，您就会看到工作数据。暂时无需编写代码，您可以根据自己的需要处理相关事件。这里我使用了来自站点的图像，因此请下载一些图像或使用您现有的图像并替换此代码中使用的可绘制对象。希望你能得到这个。

# javascript - 在 IE 中将图像对齐按钮的中心

> ID：12967691
> 
> 赞同：0
> 
> 时间：2012-10-19T05:03:45.090
> 
> 标签：javascript, html, css

我有一个放在按钮内的图像，问题出在 Firefox 中，图像已正确对齐，但在 IE 中，图像移动到按钮的右上角。

我尝试了很多方法将其对齐到中心，但没有任何效果。我正在动态创建按钮和图像，并且我减少了图像的宽度和高度 - 这就是它在 IE 中不正确对齐的原因，但我不想更改图像和按钮的高度和宽度

这是我现在使用的代码：

```
var button = document.createElement("button");
button.setAttribute("type","button");
button.setAttribute("id","primaryDelTel"+nameCode+telephoneCount);
button.setAttribute("class","greybutton");
button.setAttribute("style","width:20px;height:20px;");
var delButton = document.createElement("img");
delButton.setAttribute("src","/theme/images/deleteButton.png");
delButton.setAttribute("height","10");
delButton.setAttribute("width","9");
button.appendChild(img); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:15:14.933

你可以试试这个：

```
var button = document.createElement("button");
button.setAttribute("type","button");
button.setAttribute("id","primaryDelTel" + nameCode + telephoneCount);
button.setAttribute("class","greybutton");
button.setAttribute("style","width:20px; height:20px; padding:0; position:relative;");
document.body.appendChild(button);

var delButton = document.createElement("img");
delButton.setAttribute("src","/theme/images/deleteButton.png");
delButton.setAttribute("height","10");
delButton.setAttribute("width","10");
delButton.setAttribute("style","position:absolute; top:3px; left:3px;");
button.appendChild(delButton); 
```

这是 JSFiddle [http://jsfiddle.net/tf8K3/1/上的示例](http://jsfiddle.net/tf8K3/1/)

# javascript - IE 在 sethtml 时丢失自定义标签

> ID：12967695
> 
> 赞同：0
> 
> 时间：2012-10-19T05:03:59.340
> 
> 标签：javascript, internet-explorer, ckeditor, custom-tag

**以下代码在 FF 和 IE 中运行**

```
TempNode= CKEDITOR.dom.element.createFromHtml("<span></span>");
TempNode.setHtml("<p>test</p>"); 
```

**但下面提到的代码在 IE 中丢失了用户定义的标签（FF 可以正常工作）**

```
TempNode= CKEDITOR.dom.element.createFromHtml("<span></span>");
TempNode.setHtml("<myTag>test</myTag>"); 
```

**** appendHtml()* *也有同样的问题**

**我的确切要求是：**

```
 Element.setHtml(AnotherElement.getHtml()); 
```

**AnotherElement.getHtml() 中的原始值为：**

```
<P><mytag id="test_39878" data-cke-expando="undefined">some. text</myTag></P> 
```

**在 Element.sethtml() 之后它包含的值是：**

```
<P>some. tex</MYTAG></P> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T07:35:29.743

如果你想在 IE 中使用你自己的标签，你必须先创建它们。这与我们在 HTML5 标签中遇到的情况相同。

所以在设置 HTML 之前`<myTag>`，创建它`CKEDITOR.document.createElement( 'mytag' )`只是为了让 IE 知道它的存在。

顺便提一句。请记住，元素必须在将要使用它们的同一文档中创建。因此，如果您想将它们插入到编辑器的内容中，请在编辑器的文档中创建它们（例如`CKEDITOR.instances.editor1.document`）。否则 IE 会抛出错误。

# java - 删除功能

> ID：12967696
> 
> 赞同：0
> 
> 时间：2012-10-19T05:04:09.287
> 
> 标签：java, jasper-reports

为什么被***`JasperManager.loadXmlDesign()`***划掉了？它仍然有效，但只是想知道交易是什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:07:53.083

这意味着该方法已弃用。改为使用`JRXmlLoader.load(InputStream)`。

请参阅[Jasper 文档](http://jasperreports.sourceforge.net/api/net/sf/jasperreports/engine/JasperManager.html)。通常，随着库的发展，开发人员将决定弃用某些方法和方法。但是，为了保持向后兼容性，他们可能会将这些方法留给几个版本。

建议您不要使用已弃用的方法，因为它们可能会在未来的版本中被删除，而且通常还有更好的替代方法。

# java - 如何从不同的平板电脑获取存储在内部存储器中的文件的确切路径？

> ID：12967698
> 
> 赞同：1
> 
> 时间：2012-10-19T05:04:11.633
> 
> 标签：java, android

我想获取存储在文档文件夹中的**文件名。**

```
Environment.getExternalStorageDirectory()+"/documents/"+Abc.doc; 
```

为了获取文件名，我使用`substring(11, path.length())`. 它仅适用于特定平板电脑，但不适用于某些平板电脑。如何在不硬编码路径的情况下获取**文件名？**

# html - Delphi：从网页中获取正确的资源

> ID：12967699
> 
> 赞同：2
> 
> 时间：2012-10-19T05:04:42.100
> 
> 标签：html, delphi, web-scraping, user-agent

我正在使用 Delphi，我正在尝试从网页获取源代码。

我的问题是，当我使用 Indy (idHttp) 或 Clever Components (clHttp) 而不是 IE 和/或 Google Chrome 时，我得到了不同的源代码。

有什么方法可以用 Delphi 检索网页源，与浏览器显示的方式完全相同？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-19T10:16:46.950

这可能是因为控件发送的**用户代理字符串**与 IE 或 Chrome 使用的字符串不同。所以换句话说，服务器发回的源与它为 IE 或 Chrome 发送的源不同。

例如，在 TIdDHTTP 中，设置：

```
Request.Accept=*/*
Request.CacheControl=no-cache
Request.Connection=Keep-Alive
Request.ContentType=application/x-www-form-urlencoded
Request.AcceptEncoding=gzip, deflate
Request.UserAgent=Mozilla/4.0 (compatible; MSIE 6.0; Win32)
Request.Host=(web site name) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T06:30:44.077

基本上，从组件请求页面与浏览器的操作相同。只有浏览器可能会做更多的请求和其他活动，例如。可能会改变 DOM 的 JavaScript。

尝试关闭 JavaScript 并再次比较。如果您熟悉 chrome 开发人员工具，请检查第一个 HTTP 获取的原始输入并进行比较。如果仍然不同，则修改您的请求以使其与 chrome 请求相同。

# javascript - 通过窗口对象引用全局变量时未定义

> ID：12967700
> 
> 赞同：6
> 
> 时间：2012-10-19T05:04:44.590
> 
> 标签：javascript, reference, window, undefined

我对通过*window*全局声明变量相当陌生，所以我有点惊讶以下代码段的行为因浏览器而异。

```
window.test = "Good";
document.write(window.test);
document.write('<br>');
document.write(window.test);
document.write('<br>');
document.write(test);​ 
```

**火狐、IE、Opera**

> 好的
> 
> 不明确的
> 
> 好的

**Chrome 和 Safari**

> 好的
> 
> 好的
> 
> 好的

我最初的信念是它应该像 Chrome 和 Safari 那样运行，但我意识到我可能对*window*对象没有正确的理解，所以有更多知识渊博的人可以解释一下吗？

我意识到我可以只`var test = "Good";`用于那个范围，但我对为什么浏览器处理它的方式不同感兴趣。

[http://jsfiddle.net/WHYFc/](http://jsfiddle.net/WHYFc/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:18:42.510

您的 JSFiddle 正在使用 window.load 创建脚本。

document.write 在加载 CLEARS/WIPES 文件后，所以你看到的对于那些浏览器来说是正常的，而 webkit 只是更宽松

这是您在 jsfiddle 中生成的代码：

```
window.addEvent('load', function() {
window.test = "Good";
document.write(window.test);
document.write('<br>');
document.write(window.test);
document.write('<br>');
document.write(test);
}); 
```

将您的小提琴更改为头部或身体，它将按预期工作

[演示](http://jsfiddle.net/mplungjan/GcwdE/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T23:34:25.860

如果您想在全局范围内存储某些内容，即使您正在打开新文档，您也可以（有点讽刺地）使用该`document`对象，它似乎是持久的。

```
document.test = "Good";

document.write(document.test); // > "Good"
document.write('<br>');
document.write(document.test); // > "Good"
document.close();

setTimeout(() => {
    document.write("Also " + document.test); // > "Also Good"
    document.close();
}, 2000); 
```

# c# - 从异步完成处理程序设置 TextBlock

> ID：12967701
> 
> 赞同：1
> 
> 时间：2012-10-19T05:04:54.033
> 
> 标签：c#, asynchronous, microsoft-metro

我想`MainPage`根据对 Web 服务的异步调用的响应在我的应用程序上设置文本。

我得到一个“应用程序调用了一个为不同线程编组的接口”。所以我知道我需要执行

```
MainPage.TB_Response.text = response; 
```

在主要/主线程上，但我不确定我将如何去做

编辑：这是我的响应处理程序

```
 private void ReadResponse(IAsyncResult asyncResult)
    {
        System.Diagnostics.Debug.WriteLine("ReadResponse");
        try
        {
            // The downloaded resource ends up in the variable named content. 
            var content = new MemoryStream();

            // State of request is asynchronous.
            //RequestState myRequestState = (RequestState)asyncResult.AsyncState;
            HttpWebRequest myHttpWebRequest2 = (HttpWebRequest)asyncResult.AsyncState;
            HttpWebResponse response = (HttpWebResponse)myHttpWebRequest2.EndGetResponse(asyncResult);

            //do whatever
            using (Stream responseStream = response.GetResponseStream())
            {
                responseStream.CopyTo(content);
                byte[] data = content.ToArray();
                if (data.Length > 0)
                {
                    string temp = System.Text.Encoding.UTF8.GetString(data, 0, data.Length);
                    MainPage.TB_Reponse.Text = temp;
                    System.Diagnostics.Debug.WriteLine(temp);
                }
            }

        }
        catch (WebException e)
        {

            System.Diagnostics.Debug.WriteLine(e.Message);
        }
    } 
```

Edit2：我的主页类

```
public sealed partial class MainPage : Page
{
    public static TextBlock TB_Reponse;
    public MainPage()
    {
        this.InitializeComponent();
        MainPage.TB_Reponse = this.TB_Response;
    }

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {

    }

    private void BTN_Login_Click(object sender, RoutedEventArgs e)
    {
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:17:52.373

所以我找到了这个解决方案来解决我的问题

[委托 'System.Action<object>' 不接受 0 个参数 - C# - 任务](https://stackoverflow.com/questions/7780812/delegate-system-actionobject-does-not-take-0-arguments-c-sharp-task)

我设置我的 ServerRequest 对象来存储当前的同步上下文

```
ui = TaskScheduler.FromCurrentSynchronizationContext(); 
```

然后在我的响应处理程序中运行以下命令：

```
Task.Factory.StartNew(() => 
                            {
                                MainPage.TB_Reponse.Text = temp; //This is run on the same thread as the UI
                            },System.Threading.CancellationToken.None , TaskCreationOptions.None, instance.ui); 
```

# java - 在 Android 中创建单例片段集合的正确方法是什么？

> ID：12967702
> 
> 赞同：2
> 
> 时间：2012-10-19T05:05:07.173
> 
> 标签：java, android, singleton, android-fragments

# 背景

我有一个 ViewPager，最多可以显示 4 个片段。在任何给定时间可用的数字都是动态的（可以是 1、2、3 或 4）。让这些片段自己管理是最有意义的。我的意思是他们是单身人士。我没有使用 new 关键字创建新片段，而是编写了一个“getInstance(String key)”方法，该方法尝试从映射中检索指定键的片段，或者如果它不存在于映射中，则创建一个新实例，将片段放置在具有给定键的映射中，使用包含该键的包设置片段参数，以便片段可以在 onCreate() 中检索它，然后返回该片段的新实例。

对于那些不关注的人，这是代码：

```
public class DishListFragment extends ListFragment {

    public static final String MENU = "menu";

    ...

    private static Map<String, DishListFragment> mInstances = new HashMap<String, DishListFragment>();        

    public static DishListFragment getInstance(String menuKey) {
        if (mInstances.containsKey(menuKey))
            return mInstances.get(menuKey);

        Bundle b = new Bundle();
        b.putString(MENU, menuKey);
        DishListFragment dlf = new DishListFragment();
        dlf.setArguments(b);
        mInstances.put(menuKey, dlf);
        return dlf;

    }
} 
```

*您可能已经注意到这不是线程安全的。*

* * *

# 演练

OnCreate，我的主要活动设置它的视图，然后生成一个 AsyncTask 负责从服务器获取数据，该服务器将填充我的 DishListFragments。同时，主要活动继续进行并设置 PagerAdapter。当 PagerAdapter 请求一个新的 DishListFragment 时，数字被动态转换为一个 key，值来自 DishListFragment.getInstance(key); 返回方法。最初，ListFragments 观察到的内容类具有虚拟数据，因此始终显示一页，因此始终有一页可供 ViewPager 显示。

当 AsyncTask 启动时，会显示一个进度对话框。完成后，它会关闭进度对话框并在我的活动中调用一个方法，然后在我的内容类中设置数据。然后调用一个方法 refresh()，它告诉所有存在的 DishListFragment 通知它们的适配器数据集已更改。该方法完成后，会通知 ViewPagerAdapter 其数据集已更改。

在我的主要活动中：

```
public void onRetrieveData(Result result) {
    switch(result.getCode()) {
    case Result.SUCCESS:
    Log.i(UITHREAD, "Menu successfully loaded!");
        /* On SUCCESS the MenuContent class should be given the data and 
         * the adapters notified. */
        mRequestedDate = mPendingDate;
        MenuContent.setMenuData(result.getValue());
        DishListFragment.refresh();
        mMenuPagerAdapter.notifyDataSetChanged();

    ...

    }
} 
```

以及 DishListFragment 类中的刷新方法：

```
public static void refresh() {
    for (String key : mInstances.keySet()) {
        mInstances.get(key).mListAdapter.notifyDataSetChanged();
        Log.d("glic", "DishListFragment: " + key + " refreshed");
    }
    Log.d("glic", "DishListFragments refreshed");
} 
```

* * *

# 问题

问题是，在冷启动时，除了第一页之外的所有内容都会更新。此外，从我的 Logcat 输出中，我收集到我的地图中只有一个 DishListFragment：

```
10-18 22:11:41.624: I/##############(16802): Menu successfully loaded!
10-18 22:11:41.744: D/glic(16802): DishListFragment: breakfast refreshed 
10-18 22:11:41.744: D/glic(16802): DishListFragments refreshed
10-18 22:11:41.744: D/GLIC(16802): lunch 
```

但是，我的视图寻呼机显示 4 个页面，其中第一个页面仍然包含虚拟数据。如果我旋转屏幕，第一页会更新并显示正确的信息。此外，如果我在虚拟列表中选择一个项目，则会显示一个详细信息片段，其中包含我选择的项目位置的真实（来自服务器）信息——即使我只选择了一个虚拟项目。

我的第一个想法是我可能有两个单例片段实例。一个包含一个包含初始虚拟数据片段的映射，另一个包含从服务器返回的真实数据。我想这是可能的，因为我的单例不是线程安全的。但是，我认为这不会引起任何问题。我的 DishListFragment 不包含它们显示的数据，它们只观察它，所以无论我可能有多少个*相同*的DishListFragment 实例（相同的页面），它们都应该观察相同的数据并且不应该显示不同的数据 - - 解析和添加来自服务器的新数据时清除虚拟数据。

但是，我的 mInstances 映射的两个实例可以解释为什么视图没有更新。也许只有一组 DishListFragments 中的适配器被通知其数据集已更改。不过，根据我的 Logcat，*早餐*，这是我的第一页，也是充满虚拟数据的页面，确实被通知其数据集已更改。有趣的是，其他人不是。

* * *

# 问题..

那么，至于我最初的问题：我是否正确地实现了片段的单例分组？如果是这样，还有哪些其他因素可能导致我遇到的奇怪行为。提前致谢（=

# wxpython - wxPython listctrl 快速更新闪烁

> ID：12967703
> 
> 赞同：4
> 
> 时间：2012-10-19T05:05:20.033
> 
> 标签：wxpython, flicker, listctrl

我将一些行放在列表控件中，然后相当快地更新它们 - 通常数据来自总线 - 整个列表闪烁很多。阻止它这样做真的很好。

我已经尽可能地减少了代码，同时仍然保持我在下面的示例中所做的事情的一般外观。

lisctrl 是在 wx.Notebook 中还是在普通的 wx.Panel 中似乎并不重要，所以我把笔记本放在那里。

我已经开始研究双缓冲，但想看看是否有其他东西可以先尝试。

在 Windows 7 上使用 wxPython 2.8.12.1 执行此操作。不过也发生在 XP 上。

```
import sys
import time
import logging
import wx
from random import randint

UPDATE_MS=10

class CanMsg(object):
    def __init__(self, ID, type, len, data=None):
        """Represents a CAN message"""
        self.ID=ID          # 11/29-bit message identifier
        self.MSGTYPE=type # Type of the message
        self.LEN=len          # Data Length Code of the message (0..8)
        if data:
            self.DATA=data
        else:
            self.DATA=[0,]*len

class EmulatorFrame(wx.Frame):
    def __init__(self, parent, id, title, pos=wx.DefaultPosition, size=wx.DefaultSize, 
                                style=wx.DEFAULT_FRAME_STYLE):
        wx.Frame.__init__(self, parent, id, title, pos, size, style)
        # create frame menu and status bar
        self.status = self.CreateStatusBar()
        # create tab panels
        panel = wx.Panel(self)
        nb = wx.Notebook(panel)
        self.messages_tab = MessagesTab(nb)
        # self.messages_tab = MessagesTab(panel)
        # add tab pages to notebook
        nb.AddPage(self.messages_tab, 'CAN data')
        self._nb = nb

        sizer = wx.BoxSizer()
        sizer.Add(nb, 1, wx.EXPAND)
        # sizer.Add(self.messages_tab, 1, wx.EXPAND)
        minSize=self.ClientToWindowSize(sizer.GetMinSize())     # get this as Info tab's min size is too small
        panel.SetSizerAndFit(sizer)
        self.SetInitialSize(minSize)

        self.InitialiseTimers()

    def InitialiseTimers(self):
        # tab updates and test comparison timer
        self.displayTimer=wx.Timer(self)
        self.Bind(wx.EVT_TIMER, self.OnRefresh, self.displayTimer)
        self.displayTimer.Start(UPDATE_MS)
        # self.Bind(wx.EVT_IDLE, self.OnRefresh)

    def OnRefresh(self, event):
        self.messages_tab.Update(can_send, can_recv)

class MessagesTab(wx.Panel):
    def __init__(self, parent):
        msg_size=450    # width of messge windows
        wx.Panel.__init__(self, parent, wx.ID_ANY)

        receivedLabel=wx.StaticText(self, wx.ID_ANY, 'Messages Received')
        receivedLabel.SetForegroundColour('blue')
        sentLabel=wx.StaticText(self, wx.ID_ANY, 'Messages Sent')
        sentLabel.SetForegroundColour('dark slate blue')
        SentMsgList = MessageList(self, size=wx.Size(msg_size,150))
        ReceivedMsgList = MessageList(self, size=wx.Size(msg_size,150))

        sizer=wx.BoxSizer(wx.VERTICAL)
        sizer.Add(sentLabel, 0, wx.EXPAND|wx.ALL, 2)
        sizer.Add(SentMsgList, 1, wx.EXPAND|wx.ALL, 2)
        sizer.Add(receivedLabel, 0, wx.EXPAND|wx.ALL, 2)
        sizer.Add(ReceivedMsgList, 1, wx.EXPAND|wx.ALL, 2)

        b = wx.Button(self, wx.ID_ANY, 'Clear messages', name='clear_stale')
        self.Bind(wx.EVT_BUTTON, self.OnClearMessages, b)
        sizer.Add(b, proportion=0, flag=wx.ALL, border=4)

        self.SetSizer(sizer)
        self.SentMsgList = SentMsgList
        self.ReceivedMsgList = ReceivedMsgList

    def Update(self, can_send, can_recv):
        self.SentMsgList.Populate(can_send)
        self.ReceivedMsgList.Populate(can_recv)

    def OnClearMessages(self, event):
        self.SentMsgList.DeleteAllItems()
        self.ReceivedMsgList.DeleteAllItems()

class MessageList(wx.ListCtrl):
    def __init__(self, parent, ID=wx.ID_ANY, pos=wx.DefaultPosition,
                        size=wx.DefaultSize, style=wx.LC_REPORT|wx.LC_HRULES|wx.LC_VRULES|wx.LC_SORT_ASCENDING):
        wx.ListCtrl.__init__(self, parent, ID, pos, size, style)
        self.InsertColumn(0, "COB-ID")
        self.InsertColumn(1, "Type")
        self.InsertColumn(2, "Len")
        self.InsertColumn(3, "Data")
        self.InsertColumn(4, "Cycle [ms]")
        self.SetColumnWidth(0, 60)
        self.SetColumnWidth(1, 40)
        self.SetColumnWidth(2, 40)
        self.SetColumnWidth(3, 200)
        self.SetColumnWidth(4, 75)

    # either add messages to the listctrl or update the existing ones if 
    def Populate(self, msg_store):
        item=-1
        while 1:
            item = self.GetNextItem(item, wx.LIST_NEXT_ALL, wx.LIST_STATE_DONTCARE)
            if item == -1: break
            if self.GetItemText(item) not in msg_store:
                self.DeleteItem(item)

        for msg_id in msg_store:
            item = self.FindItem(-1, msg_id)
            msg = msg_store.get(msg_id)
            interval = randint(10,1000)
            # insert new messages
            if item == -1:
                item = self.InsertStringItem(sys.maxint, msg_id)
                self.SetStringItem(item, 1, 'std')
            # fill in other columns
            self.SetStringItem(item, 2, '%1d'%msg.LEN)
            self.SetStringItem(item, 3, ' '.join(['%02x'%d for d in msg.DATA[:msg.LEN]]))
            self.SetStringItem(item, 4, '%d'%interval)
#====================================================================
#====================================================================
if __name__=='__main__':
    msg=(0x180, 0, 8, range(1,9))
    can_send={}
    can_recv={}
    # just make up some simple messages for listctrl to display
    # send msgs
    for a in range(1,7):
        this_msg=list(msg)
        this_msg[0] += a
        can_send[hex(this_msg[0])] = CanMsg(*msg)
    # receive msgs
    for a in range(1,10):
        this_msg=list(msg)
        this_msg[0] += 0x100+a
        can_recv[hex(this_msg[0])] = CanMsg(*msg)

    app=wx.App(0)   # 0 arg stops stdout/stderr text box pop-up, messages go to console
    frame = EmulatorFrame(None, wx.ID_ANY, 'Listctrl flicker test')
    frame.Show(True)
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T13:17:02.283

我会推荐使用 wxPython 的 Freeze and Thaw 方法。基本上你冻结小部件，更新它，然后你解冻它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-28T06:07:54.697

好的，我想我终于有一个可行的（如果部分）回答闪烁问题。

我发现很多人通过在面板上启用双缓冲取得了成功，主要是在图像闪烁方面。所以在 MessagesTab() 类中，在 wx.Panel init 之后，我插入了这一行；

```
self.SetDoubleBuffered(True) 
```

这使得列表控件更新平滑，但调整 GUI 大小或将鼠标悬停在 listctrl 列标题上会使内容闪烁很多或完全消失。作为 Windows 7，当鼠标在其上时，标题会根据操作系统主题突出显示。由于这似乎是原因，我的解决方法是将 wx.LC_NO_HEADER 标志添加到 MessageList() 样式参数。所以 listctrl 没有标题，但现在没有任何原因导致闪烁或消失的文本，我可以用一些静态文本替换它。调整大小也没有问题。

那么，列标题上生成的事件可能存在一些问题？

# cakephp - ACL - 在哪里配置自定义 userModel 进行授权？

> ID：12967707
> 
> 赞同：2
> 
> 时间：2012-10-19T05:05:38.937
> 
> 标签：cakephp, cakephp-2.0

我的 Auth 使用的是默认模型`Player`而不是默认`User`模型。我最近为我的应用程序配置了 ACL，并尝试`return false`在我的`isAuthorized($player)`函数中进行测试时，出现以下错误：

```
AclNode::node() - Couldn't find Aro node identified by
Array ( [Aro0.model] => User [Aro0.foreign_key] => 1 ) 
```

不`Aro0.model`应该是`Player`吗？我找不到要换的地方`Auth->authorize`。`Auth-authenticate`在我设法登录时工作正常，因为有一个`userModel`选项允许我为用户登录指定自定义模型。

这是我的 AppController

```
class AppController extends Controller
{
    public $components = array(
        'Session',
        'Acl',
        'RequestHandler',
        'Auth' => array(

            'authorize' => array(
                'controller',
                'Actions' => array('actionPath' => 'controllers'),
            ),

            'authenticate' => array(
                'Form' => array(
                    'userModel' => 'Player',
                    'fields' => array('username' => 'email', 'password' => 'password'),
                    )
                )
            ),
        );
    public $helpers = array('Html', 'Form', 'Session');

    function isAuthorized($player)
    {
        //var_dump($player); die;
        return false;
        return $this->Auth->loggedIn();
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:51:54.340

解决了。它是与`userModel`一起追加的`actionPath`。

```
$this->Auth->authorize = array(
    AuthComponent::ALL => array('actionPath' => 'controllers/', 'userModel' => 'Player'),
    'Actions',
    'Controller'
); 
```

# asp.net-mvc - 如何获取两个 facebook 用户 ID 之间的关系

> ID：12967711
> 
> 赞同：1
> 
> 时间：2012-10-19T05:06:02.900
> 
> 标签：asp.net-mvc, facebook, c#-4.0

我想扫描Facebook好友列表并查找Facebook用户和潜在朋友之间的潜在关系。登录后我会给出一个用户ID，然后系统应该找出他是否是我的朋友或朋友的朋友的朋友。循环朋友的朋友列表最多3个级别。如果存在分层格式的匹配数据。我的应用程序在 Asp.net mvc3 中。你能建议我一个解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:38:28.260

您需要**user_relationships**权限才能满足您的需求，请参阅此文档[https://developers.facebook.com/docs/reference/login/user-friend-permissions/](https://developers.facebook.com/docs/reference/login/user-friend-permissions/)

# codeigniter - 使用低质量的 Codeigniter 调整图像大小

> ID：12967716
> 
> 赞同：2
> 
> 时间：2012-10-19T05:06:55.677
> 
> 标签：codeigniter, resize-image

我正在使用 CodeIgniter 调整图像大小，但我调整大小的小图像质量很低。这是我的代码：

```
$config = array(
    'image_library' => 'gd2',
    'quality' => '100',
    'source_image' => $temp_full_path,
    'new_image' => $full_temp_path."img_mobile/",
    'maintain_ratio' => true,
    'create_thumb' => false,
    'width' => 50,
    'height' => 50
);              
$this->image_lib->initialize($config);              
$this->image_lib->resize(); 
```

如何制作像原始图像一样高质量的调整图像？

这是原始图像，图像调整大小从 php 代码生成，图像调整大小从 codeigniter 生成：[图像](http://i.stack.imgur.com/Bk8r9.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-23T15:05:29.277

你应该写`'quality' => '100%'`而不是只写`'100'`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T15:53:34.353

查看源代码，GD2 没有使用“质量”参数。

但是其他一些库确实使用它。

试试[ImageMagick](http://www.imagemagick.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-22T09:32:18.137

**默认：**

```
$config['image_library'] = 'gd2'; 
```

**选择：**

```
$config['image_library'] = 'gd';
$config['quality']       = 100; 
```

**最好的质量：**

```
$config['image_library'] = 'imagemagick'; 
$config['library_path']  = "/usr/bin"; 
$config['quality']       = 100; 
```

[![Codeigniter 图像质量](../Images/929d707131c18580e674a05cf9869646.png)](https://i.stack.imgur.com/w8mGf.png)

参考：[https ://forum.codeigniter.com/thread-17374.html](https://forum.codeigniter.com/thread-17374.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-19T05:38:06.470

这是一个小错误或一个陷阱。

做：

```
'quality' => '100%', 
```

代替

```
'quality' => '100', 
```

根据[docs](http://codeigniter.com/user_guide/libraries/image_lib.html)应该可以工作。

编辑：

好像还有一个错别字！

```
'maintain_ration' 
```

应该

```
'maintain_ratio' 
```

另外，如何`new_image`以 a 结尾`/`？你在那里做错了什么。

# ios - 在 UIScrollView 的分页上重用 3 个视图

> ID：12967718
> 
> 赞同：2
> 
> 时间：2012-10-19T05:07:05.097
> 
> 标签：ios, memory-management, uiscrollview, reusability

我做了以下代码，在分页期间可以重用三个视图`UIScrollView`以节省实时内存-->

```
 #pragma mark - UIScrollView Delegates
- (void)scrollViewDidScroll:(UIScrollView *)scrollView{

    CGFloat pageWidth = self.view.frame.size.width;
    CGPoint aContentOffSet = [[self scrollView] contentOffset] ;
    float currPos = aContentOffSet.x;
    int selectedPage = roundf(currPos/pageWidth);
    [[self pageControl] setCurrentPage:selectedPage];
    [self update:selectedPage];
}

#pragma mark - Custom methods
-(void)update:(int) selectedPage{

    BOOL view1FrameShallBeUnchanged = false;
    BOOL view2FrameShallBeUnchanged = false;
    BOOL view3FrameShallBeUnchanged = false;

    BOOL aFrame1Matched = false;
    BOOL aFrame2Matched = false;
    BOOL aFrame3Matched = false;

    CGRect aFrame1 = CGRectMake(selectedPage*self.view.frame.size.width, 0.0f, self.view.frame.size.width, self.scrollView.frame.size.height);
    CGRect aFrame2 = CGRectMake((selectedPage-1)*self.view.frame.size.width, 0.0f, self.view.frame.size.width, self.scrollView.frame.size.height);
    CGRect aFrame3 = CGRectMake((selectedPage+1)*self.view.frame.size.width, 0.0f, self.view.frame.size.width, self.scrollView.frame.size.height);

    ViewOnScrollView *aView1 = (ViewOnScrollView*)[[self scrollView] viewWithTag:1234];
    ViewOnScrollView *aView2 = (ViewOnScrollView*)[[self scrollView] viewWithTag:12345];
    ViewOnScrollView *aView3 = (ViewOnScrollView*)[[self scrollView] viewWithTag:123456];

    if(aView1 && aView2 && aView3){
    //Check for Frame 1
    if(aFrame1.origin.x == aView1.frame.origin.x){
        view1FrameShallBeUnchanged = true;
        aFrame1Matched = true;
    }
    else if(aFrame1.origin.x == aView2.frame.origin.x){
        view2FrameShallBeUnchanged = true;
        aFrame1Matched = true;
    }
    else if(aFrame1.origin.x ==aView3.frame.origin.x){
        view3FrameShallBeUnchanged = true;
        aFrame1Matched = true;
    }

    //Check for Frame 2
    if(aFrame2.origin.x == aView1.frame.origin.x){
        view1FrameShallBeUnchanged = true; 
        aFrame2Matched = true;
    }
    else if(aFrame2.origin.x == aView2.frame.origin.x){
        view2FrameShallBeUnchanged = true;
        aFrame2Matched = true;
    }
    else if(aFrame2.origin.x == aView3.frame.origin.x){
        view3FrameShallBeUnchanged = true;
        aFrame2Matched = true;
    }

    //Check for Frame 3
    if(aFrame3.origin.x == aView1.frame.origin.x){
        view1FrameShallBeUnchanged = true;
        aFrame3Matched = true;
    }
    else if(aFrame3.origin.x == aView2.frame.origin.x){
        view2FrameShallBeUnchanged = true;
        aFrame3Matched = true;
    }
    else if(aFrame3.origin.x == aView3.frame.origin.x){
        view3FrameShallBeUnchanged = true;
        aFrame3Matched = true;
    }

    if(!view1FrameShallBeUnchanged){
        if(!aFrame1Matched){
            [aView1 setFrame:aFrame1];
        }
        else if(!aFrame2Matched){
            [aView1 setFrame:aFrame2];
        }
        else{
            [aView1 setFrame:aFrame3];
        }
        [self hideOrShowTheTabs:aView1];
        [self hideShowView:aView1];
    }

    if(!view2FrameShallBeUnchanged){
        if(!aFrame1Matched){
            [aView2 setFrame:aFrame1];
        }
        else if(!aFrame2Matched){
            [aView2 setFrame:aFrame2];
        }
        else{
            [aView2 setFrame:aFrame3];
        }

        [self hideShowView:aView2];
    }

    if(!view3FrameShallBeUnchanged){
        if(!aFrame1Matched){
            [aView3 setFrame:aFrame1];
        }
        else if(!aFrame2Matched){
            [aView3 setFrame:aFrame2];
        }
        else{
            [aView3 setFrame:aFrame3];           
        }

        [self hideShowView:aView3];
    }
    }
}

-(void)hideShowView:(ViewOnScrollView*)theView{
    if(theView.frame.origin.x<0 || theView.frame.origin.x>[self.scrollView contentSize].width )
        theView.hidden = YES; 
    else{
        theView.hidden = NO;
    }
} 
```

欢迎评论/建议/更好的方法来做同样的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-24T04:31:11.413

看看这个类..也许它可以帮助..易于使用...就像 UITableview

[VSScroller](https://github.com/iVishal/VSScroller.git)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T17:58:40.997

没关系，但是您有太多代码（约 40 行）和太多不必要的处理。您只需要知道一帧何时匹配（假设是中心帧），并且您应该仅在页面即将更改时执行此操作，而不是在每个滚动事件时执行此操作。

这样，每当左侧或右侧页面成为当前页面时，您就会将相反页面移动到另一侧。

**您遇到的另一个错误是，当它的frame.origin.x**等于（== 或 >=）内容大小，而不仅仅是更大（>）时，您应该隐藏最后一个页面。

```
#pragma mark - UIScrollView Delegates
- (void)scrollViewDidScroll:(UIScrollView *)scrollView{

    int selectedPage = roundf(newsPagesView.contentOffset.x/_pageWidth);

    if (selectedPage != _currentPage) {

        _currentPage = selectedPage;        
        [self update:selectedPage];
    }

}

#pragma mark - Custom methods
-(void)update:(int) selectedPage{

    BOOL page1FrameMatched = false;
    BOOL page2FrameMatched = false;
    BOOL page3FrameMatched = false;

    BOOL frameCurrentMatched = false;

    CGRect frameCurrent = CGRectMake(selectedPage*_pageWidth, 0.0f, _pageWidth, _pageHeight);
    CGRect frameLeft = CGRectMake((selectedPage-1)*_pageWidth, 0.0f, _pageWidth, _pageHeight);
    CGRect frameRight = CGRectMake((selectedPage+1)*_pageWidth, 0.0f, _pageWidth, _pageHeight);

    NewsPage *page1 = (NewsPage*)[newsPagesView viewWithTag:100];
    NewsPage *page2 = (NewsPage*)[newsPagesView viewWithTag:101];
    NewsPage *page3 = (NewsPage*)[newsPagesView viewWithTag:102];

    if(page1 && page2 && page3){

        //Check for Current
        if(frameCurrent.origin.x == page1.frame.origin.x){
            page1FrameMatched = true;
            frameCurrentMatched = true;
        }
        else if(frameCurrent.origin.x == page2.frame.origin.x){
            page2FrameMatched = true;
            frameCurrentMatched = true;
        }
        else if(frameCurrent.origin.x ==page3.frame.origin.x){
            page3FrameMatched = true;
            frameCurrentMatched = true;
        }

        if(frameCurrentMatched){
            if(page1FrameMatched){
                [page1 setFrame:frameCurrent];
                [page2 setFrame:frameLeft];
                [page3 setFrame:frameRight];

            }
            else if(page2FrameMatched){
                [page1 setFrame:frameRight];
                [page2 setFrame:frameCurrent];
                [page3 setFrame:frameLeft];
            }
            else{
                [page1 setFrame:frameLeft];
                [page2 setFrame:frameRight];
                [page3 setFrame:frameCurrent];

            }

            [self hideShowView:page1];
            [self hideShowView:page2];
            [self hideShowView:page3];
        }

    }
}

/**
 * This method hides the view if it is outside the scrollview content bounds, i.e. the
 * view before page 0, or the view after last page.
 */
-(void)hideShowView:(NewsPage*)aPage{

    if(aPage.frame.origin.x<0 || aPage.frame.origin.x>=[newsPagesView contentSize].width )
        aPage.hidden = YES; 
    else{
        aPage.hidden = NO;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-15T03:21:27.597

查看我的示例，分支：新

[https://github.com/iSevenDays/RecyclingScrollView](https://github.com/iSevenDays/RecyclingScrollView)

# javascript - 如何在正则表达式中允许空格

> ID：12967725
> 
> 赞同：1
> 
> 时间：2012-10-19T05:08:41.460
> 
> 标签：javascript, regex

我有一个正则表达式，它只允许在文本框中输入整数和浮点数。正则表达式代码：-

```
("^[0-9]*(?:[.][0-9]*|)$"); 
```

但是当用户在输入值的开头和结尾输入空格时会出错。我希望用户在开头和结尾允许空格作为可选，所以我如下更改了正则表达式，但它不起作用。

注意：空格可以是空格或制表符。

测试用例：用户可能输入：

```
"10","10.23"," 10","10 "," 10.23","10.23 " 
```

允许使用任意数量的空格。

```
("^(?:\s)*[0-9]*(?:[.][0-9]*|)$") 
```

我是正则表达式的新手，所以任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:10:13.317

试试这个：

```
/^\s*[0-9]*(?:[.][0-9]*|)\s*$/; 
```

您不必将单个实体包装在一个组中即可重复它，并且我在末尾添加了第二个零个或多个空格，这是您使其工作所缺少的。

注意：您尚未发布用于创建 RegExp 对象的代码，但如果是`new RegExp(string)`，请记住转义反斜杠（通过将它们加倍）：

```
var r = new RegExp("^\\s*[0-9]*(?:[.][0-9]*|)\\s*$"); 
```

* * *

此外，正如@Blender 所建议的，这可以简化为：

```
/^\s*[0-9]*(?:\.[0-9]*)?\s*$/; 
```

或者，使用`\d`代替`[0-9]`：

```
/^\s*\d*(?:\.\d*)?\s*$/; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:22:00.070

您不一定需要正则表达式：`!isNaN(Number(textboxvalue.trim()))`就足够了。

否则，请尝试`/^\s{0,}\d+\.{0,1}\d+\s{0,}$/`. 测试：

```
var testvalues = ["10","10.23"," 10","10 "," 10.23","10.23 ","10.24.25"];
for (var i=0;i<testvalues.length;i+=1){
  console.log(/^\s{0,}\d+\.{0,1}\d+\s{0,}$/.test(testvalues[i]));
}
//=> 6 x true, 1 x false 
```

# java - 使用 NetBeans 测试 Java

> ID：12967726
> 
> 赞同：4
> 
> 时间：2012-10-19T05:08:47.090
> 
> 标签：java, unit-testing, netbeans

我有一个名为 JavaProject2 的项目，其中包含一个名为`some.myPackage`. 该包包含三个 .java 文件。现在我想添加一个使用 JUnit 进行测试的 .java 文件（即 Mytest.java）。我应该把那个文件放在哪里？我把它放在源文件上，但没有测试结果。如果我把它放在一个测试包上，那么我将无法使用我在其他文件中创建的公共类和函数。在源文件的开头它有`package some.myPackage;`. 每当我运行测试时，它总是给我一个错误。

错误 `Unknown caused an error (0.0 s)`

无论是否存在 Mytest.java 文件，它都会显示相同的错误。

谁能帮我解决这个错误？请不要对我投反对票，在过去的 4 个小时里，我一直在努力解决这个问题。

我可以保留一个且唯一的源包吗？还是我必须制作一个额外的测试包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:12:27.107

看看这个教程： http: [//netbeans.org/kb/docs/java/junit-intro.html](http://netbeans.org/kb/docs/java/junit-intro.html)

一般来说，您在 Netbeans 中的“源程序包”下有您的程序，在“测试包”下有您的单元测试。您应该为它们使用相同的包结构。例如，如果您在“Source Packages”下有“some.myPackage.MainProgram”，那么您应该在“Test Packages”下有“some.myPackage.MainProgramTest”。即使这些类被组织在您硬盘上的不同目录中，它们仍保留在同一个包中，并且从 Java 的角度来看，它们位于相同的位置 (/package)。这有帮助吗？

# c++ - 如何使用最新版本的 ffmpeg 创建立体声 mp3 文件？

> ID：12967730
> 
> 赞同：2
> 
> 时间：2012-10-19T05:09:16.657
> 
> 标签：c++, audio, ffmpeg, mp3

我正在将我的代码从旧版本的 ffmpeg (53) 更新到新版本 (54/55)。有效的代码现在已被弃用或删除，所以我在更新它时遇到了问题。

以前我可以使用以下示例格式创建立体声 MP3 文件：

SAMPLE_FMT_S16

这与我的源流完美匹配。现在已替换为

AV_SAMPLE_FMT_S16

这适用于单声道录音，但是当我尝试创建立体声 MP3 文件时，它会在 avcodec_open2 出现错误：

“不支持指定的 sample_fmt。”

通过反复试验，我发现使用

AV_SAMPLE_FMT_S16P

...被 avcodec_open2 接受，但是当我通过并创建 MP3 文件时，声音非常失真 - 听起来比平常低 2 个八度音阶，背景中有大量嗡嗡声 - 这是一个示例录音：

[http://hosting.ispyconnect.com/example.mp3](http://hosting.ispyconnect.com/example.mp3)

ffmpeg 的人告诉我，这是因为我现在需要在调用之前手动解交错我的字节流：

avcodec_fill_audio_frame

我怎么做？我尝试使用 swrescale 库但没有成功，我尝试手动将 L/R 数据输入到 avcodec_fill_audio_frame 但我得到的结果听起来与没有交错完全一样。

这是我的编码代码：

```
void add_audio_sample( AudioWriterPrivateData^ data, BYTE* soundBuffer, int soundBufferSize)
{
    libffmpeg::AVCodecContext* c = data->AudioStream->codec;
    memcpy(data->AudioBuffer + data->AudioBufferSizeCurrent,  soundBuffer, soundBufferSize);
    data->AudioBufferSizeCurrent += soundBufferSize;
    uint8_t* pSoundBuffer = (uint8_t *)data->AudioBuffer;
    DWORD nCurrentSize    = data->AudioBufferSizeCurrent;

    libffmpeg::AVFrame *frame;

    int got_packet;
    int ret;
    int size = libffmpeg::av_samples_get_buffer_size(NULL, c->channels,
                                              data->AudioInputSampleSize,
                                              c->sample_fmt, 1);

    while( nCurrentSize >= size)    {

        frame=libffmpeg::avcodec_alloc_frame();
        libffmpeg::avcodec_get_frame_defaults(frame);

        frame->nb_samples = data->AudioInputSampleSize;

        ret = libffmpeg::avcodec_fill_audio_frame(frame, c->channels, c->sample_fmt, pSoundBuffer, size, 1);
        if (ret<0)
        {
            throw gcnew System::IO::IOException("error filling audio");
        }
        //audio_pts = (double)audio_st->pts.val * audio_st->time_base.num / audio_st->time_base.den;

        libffmpeg::AVPacket pkt = { 0 };
        libffmpeg::av_init_packet(&pkt);

        ret = libffmpeg::avcodec_encode_audio2(c, &pkt, frame, &got_packet);

        if (ret<0)
                throw gcnew System::IO::IOException("error encoding audio");
        if (got_packet) {
            pkt.stream_index = data->AudioStream->index;

            if (pkt.pts != AV_NOPTS_VALUE)
                pkt.pts = libffmpeg::av_rescale_q(pkt.pts, c->time_base, c->time_base);
            if (pkt.duration > 0)
                pkt.duration = av_rescale_q(pkt.duration, c->time_base, c->time_base);

            pkt.flags |= AV_PKT_FLAG_KEY;

            if (libffmpeg::av_interleaved_write_frame(data->FormatContext, &pkt) != 0)
                    throw gcnew System::IO::IOException("unable to write audio frame.");

        }
        nCurrentSize -= size;  
        pSoundBuffer += size;   
    }
    memcpy(data->AudioBuffer, data->AudioBuffer + data->AudioBufferSizeCurrent - nCurrentSize, nCurrentSize);
    data->AudioBufferSizeCurrent = nCurrentSize; 

} 
```

很想听听任何想法 - 我一直在努力让它工作 3 天 :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T02:58:57.537

如果还没有完全编码帧（例如 got_packet 未设置为 true），您不想增加 pSoundBuffer，因为还没有写入内存。此外，您在每个循环期间分配一个帧：没有必要，您可以重复使用相同的 AVFrame。您的代码也会泄漏，因为您从未释放 AVFrame。

我编写了一个代码作为 MythTV 的一部分，将音频编码为 AC3。这也可以满足您的需求：去交错内容。 [https://github.com/MythTV/mythtv/blob/476b2a826d43fca5e658ebe787c3cb1ec2334f98/mythtv/libs/libmyth/audio/audiooutputdigitalencoder.cpp#L178](https://github.com/MythTV/mythtv/blob/476b2a826d43fca5e658ebe787c3cb1ec2334f98/mythtv/libs/libmyth/audio/audiooutputdigitalencoder.cpp#L178)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T10:10:05.133

我知道这个问题很老，但为了后代：我正在研究一些音频重采样代码，在我得到一个听起来与作者链接的 mp3 非常相似的音频后，我确定原因是音频采样率不匹配在重采样器期望的输入和实际数据之间。

# android - Android 的 AVD 模拟器的问题

> ID：12967731
> 
> 赞同：2
> 
> 时间：2012-10-19T05:09:22.303
> 
> 标签：android, eclipse, avd

我的 AVD 模拟器有问题。我尝试了以下所有方法，但仍然无法正常工作：

1.  为同一个 Eclipse 项目创建了几个新的 AVD
2.  杀死avd进程并关闭eclipse
3.  创建了一个新的 AVD、一个新的工作区和一个新的 eclipse 项目。

有时 avd 工作正常，但有时它根本不起作用。我被迫创建了几个 Eclipse 项目并在它们之间复制我的代码，而 AVD 总是给我带来问题。

目前我的模拟器根本不工作，当我运行一个新应用程序时，我在模拟器中看不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T22:23:23.057

这些问题可以通过关闭Eclipse并重新启动来简单地解决......因为Eclipse无法与Emulator建立连接，这些情况在某些情况下会发生。

另一件事可能是 Eclipse 的其他副本可能正在运行 UI 未显示为正在运行的“eclipse.exe *32”。在重新启动 PC 之前，通过任务管理器确保没有其他 Eclipse 实例正在运行！

# python - 使用 Pyramid、ningx、X-Accel-Redirect Header 提供 pdf 作为下载文件

> ID：12967734
> 
> 赞同：4
> 
> 时间：2012-10-19T05:09:30.710
> 
> 标签：python, nginx, pyramid

我希望用户能够点击这样的链接：

`<a href="/download?file=123">download</a>`

让 Pyramid 1.2.7 应用程序像这样处理视图

```
@view_config(route_name='download')
def download(request):
    file_id = request.GET['file']
    filename = get_filename(file_id)
    headers = request.response.headers
    headers['Content-Description'] = 'File Transfer'
    headers['Content-Type'] = 'application/force-download'
    headers['Accept-Ranges'] = 'bytes'
    headers['X-Accel-Redirect'] = ("/path/" + filename + ".pdf")
    return request.response 
```

我的 nginx 配置看起来像这样

```
location /path/ {
 internal;
 root /opt/tmp; 
} 
```

这一切都有效，但浏览器显示的不是显示 pdf 的下载，而是显示一堆 PDF 垃圾。

如何设置我的 Pyramid 视图以使浏览器执行正确的操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-19T05:26:36.850

如果您想指示 Web 浏览器应该下载资源而不是显示它，请尝试使用[RFC 6266 中描述](https://www.rfc-editor.org/rfc/rfc6266)`Content-Disposition`的标头。例如，以下响应头将告诉浏览器下载文件：

```
Content-Disposition: attachment 
```

您还可以通过此标头为下载的文件指定文件名（如果它与 URL 中的最后一个路径组件不同）：

```
Content-Disposition: attachment; filename=foo.pdf 
```

查看[Nginx 文档](http://wiki.nginx.org/XSendfile)`X-Accel-Redirect`，此响应标头应该与您正在使用的功能一起正常工作。

# ruby-on-rails - 重定向操作不起作用

> ID：12967735
> 
> 赞同：0
> 
> 时间：2012-10-19T05:09:35.220
> 
> 标签：ruby-on-rails, ruby-on-rails-3, model-view-controller, redirect

我猜这个很容易做到，但我不知道怎么做，所以我想我会问。

如果在五分钟内没有发生任何事情，我的应用程序中有一个延迟作业，它在我的 Order 模型中调用 roll_back 方法。该方法既破坏了它被调用的实例，又在这样做之前，对关联的模型做了一堆相关的事情。该方法效果很好。

问题是，一旦方法完成运行，大多数用户将在刚刚删除的订单的显示页面上，我希望在时间用完并且调用 roll_back 方法后将用户重定向到不同的页面.

所以我最初只是在回滚方法中尝试了这个，就在“self.destroy”行之后。

```
redirect_to "/orders/new", :notice => "Blah" 
```

不过没用。无论如何，互联网上的一些人告诉我重定向之类的操作应该在控制器中。

所以我转而将该行放在订单控制器的销毁方法中，就在@order.destroy 之后。我认为当 roll_back 方法调用 self.destroy 时，它会执行重定向——但这也不起作用，我猜是因为模型销毁没有通过控制器。

所以我不确定如何做到这一点。所有延迟作业/回滚的东西都在我的模型中，但我显然不应该/无法从模型中重定向用户。知道怎么做吗？

* * *

再次尝试这个，在我的方法中，以防它是一个路由错误（我知道orders_path存在）。

```
def destroy
    @order = Order.find(params[:id])
    @order.destroy
    redirect_to orders_path, notice: "blah"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T07:04:04.137

正如您已经发现的那样，您无法响应任何请求（换句话说，如果您要响应，您需要一个请求）。那么，当您显示的信息变得陈旧时，您会怎么做？StackOverflow 使用[WebSockets](http://www.html5rocks.com/en/tutorials/websockets/basics/?ModPagespeed=noscript)自动更新一些页面，包括这个页面。您可能想查看[实时更新如何工作？](https://stackoverflow.com/questions/10808924/how-do-real-time-updates-work)了解更多信息。另一种技术是使用 javascript 请求向您的应用发出请求，以验证订单是否仍然有效。如果结果表明订单不再有效，您可以轻松地重定向。无论如何，希望这会有所帮助 - 祝你好运！

# objective-c - sender.identifier isEqualToString

> ID：12967736
> 
> 赞同：0
> 
> 时间：2012-10-19T05:09:35.190
> 
> 标签：objective-c, xcode

我有两个模态控制器，每个控制器的顶部导航栏都有关闭按钮。我想在我的主视图控制器中拦截正确的关闭按钮。不幸的是，这段代码不起作用，为什么？

```
 - (IBAction)close:(UIStoryboardSegue *)sender {

      if ([sender.identifier isEqualToString: @"FirstModalClose"]) {
        NSLog(@"FirstModalClose");
     }

       if ([sender.identifier isEqualToString: @"SecondModalClose"]) {
        NSLog(@"SecondModalClose");
     }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:20:59.957

实际上，该类型`IBAction`表明此方法是由 GUI 元素触发的（如果有的话），而不是 segue。因此，发送者可能是一个`UIControl`非一个`UIStoryboardSegue`。

也许你想使用`UIViewController`'s 方法`- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender`。在那里，你得到了两个：sender**和**segue。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-21T20:20:32.813

我只需要在正确的字段中插入 FirstModalClose 和 SecondModalClose :( 我在 Storyboard Segue 中插入了 FirstModalClose 和 SecondModalClose，而不是在 Storyboard Unwind Segue 中。现在一切正常。

# android - 启用了 gpu 仿真的 android 模拟器出现了奇怪的屏幕

> ID：12967737
> 
> 赞同：6
> 
> 时间：2012-10-19T05:09:36.000
> 
> 标签：android, emulation, gpu

我正在使用模拟器开发android应用程序。但是当我在启用 gpu 仿真的情况下启动 android 模拟器时。我的屏幕很奇怪，状态栏位于 android 模拟器屏幕的底部。当我想输入一些东西时，IME 位于 android 模拟器的顶部，并且它的方向是反向的。点击字符不能工作，但如果点击安卓模拟器底部的区域，则可以工作。我该如何解决这个问题？

![1](../Images/a876c5154014c3e7677b8efe9da85a0f.png) ![2](../Images/9c7e39eca531c12b7acc85001cee3b1b.png) ![3](../Images/e493483b304f2b31986b99cccab37934.png)

[http://i48.tinypic.com/1zguio9.png](http://i48.tinypic.com/1zguio9.png)

[http://i46.tinypic.com/30t6ptw.png](http://i46.tinypic.com/30t6ptw.png)

[http://i50.tinypic.com/1tx4xy.png](http://i50.tinypic.com/1tx4xy.png)

我仍然没有输入超链接的权限。所以如果你想看图片，请将@@ 替换为 //。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T17:43:03.550

此问题已在 Android 项目中报告：

*   [http://code.google.com/p/android/issues/detail?id=39026](http://code.google.com/p/android/issues/detail?id=39026)
*   [http://code.google.com/p/android/issues/detail?id=35557](http://code.google.com/p/android/issues/detail?id=35557)

# javascript - 在关闭浏览器时，调用服务器端函数然后显示警报消息

> ID：12967744
> 
> 赞同：-1
> 
> 时间：2012-10-19T05:10:30.367
> 
> 标签：javascript, c#, asp.net, dom-events, .net-1.1

我的要求是当我关闭浏览器时，我必须从数据库中删除一条记录，如果在此删除过程中，如果有任何`Exception`引发则显示警报并且不要关闭浏览器。

我的代码是：

```
 <body  onbeforeunload="javascript:return unlockOperationonMain()"></body>
function unlockOperationonMain()
    {

                    top.welcomePage.__doPostBack('Close', 'ApplicationInstance')
                     return '';
    }

function unloadFunction()
    {

                    deleteCookie();
    } 
```

我正在使用.net 1.1。我面临的问题是，当`Exception`加注时，会有一个额外的对话框出现并询问

> “您是否真的要导航按确定继续并取消...”

我不希望出现此对话框，因为在此对话框中，如果我按 OK 浏览器将关闭，但我必须显示警报并且不要关闭页面以防出现`Exception`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:13:22.457

使用 JavaScript page-onunload 来执行服务器端/数据库操作**是不可靠的**。

**无法**覆盖浏览器行为来强制用户停留在页面上。如果可能的话，将会有很多非常沮丧的用户！您应该使用其他一些方法来删除数据库条目（会话及其失效可能吗？）

# php - 在 symfony 1.4 中从 URL 中跳过控制器名称

> ID：12967746
> 
> 赞同：1
> 
> 时间：2012-10-19T05:10:54.000
> 
> 标签：php, symfony1, symfony-1.4

我在 symfony 1.4 中有一个现有项目

对于静态页面，我们使用提供以下 URL 的模块 Page：

```
http://www.example.com/page/aboutus
http://www.example.com/page/faq
http://www.example.com/ (page/index method, points to method page/home) 
```

对于新的需求，我们需要以下格式的 URL：

```
http://www.example.com/aboutus
http://www.example.com/faq
http://www.example.com/  (index/home method of page module; working as page is default module) 
```

有 16 个这样的静态页面，都列在`page`模块下。到目前为止，我正计划创建 16 个新模块，并将每个静态页面放在`index`新模块的方法中，但我想这是一个糟糕的解决方案，希望 symfony 绝对不是为了以这种方式使用而设计的。

有没有办法从 URL 中跳过模块名称，至少对于默认模块？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:19:52.563

您可能想要使用 [http://corz.org/serv/tricks/htaccess2.php中解释的重写规则](http://corz.org/serv/tricks/htaccess2.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T14:19:28.500

使用 symfony 的路由功能！

在`routing.yml`：

```
aboutus_page:
  url:   /aboutus
  param: { module: page, action: aboutus }

faq_page:
  url:   /faq
  params: { module: page, action: faq }

home_page:
  url:   /
  params: { module: page, action: index }

# your other routes
# ... 
```

`actions.class.php`您的模块`page`将如下所示：

```
class pageActions extends sfActions
{
   public function executeAboutus (sfWebRequest $request)
   {
      // ...
   }

   public function executeFaq (sfWebRequest $request)
   {
      // ...
   } 
```

# sitecore - 如何从 Sitecore 中的当前项目呈现引用的项目？

> ID：12967747
> 
> 赞同：0
> 
> 时间：2012-10-19T05:10:55.390
> 
> 标签：sitecore, sitecore6

假设我有配置了演示详细信息的项目。在该项目中，我有 TreelistEx 字段保持对树结构中某处的 10 多个其他项目（不同模板）的引用（GUID），每个项目都有自己的演示详细信息（子布局）。

如何根据自己的设置在同一页面上显示所有参考项目（作为当前项目）？我希望看到一页和 10 多个内容，每个内容都有自己的布局演示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T08:45:06.087

我有一个类似的问题。下面是渲染子布局和 xsl 渲染的代码：

```
public IEnumerable<Control> GetRenderingControls(Item item)
        {
            // Loop through all renderings on the item
            foreach (RenderingReference rendering in item.Visualization.GetRenderings(Context.Device, false))
            {
                // Get the path to the Sublayout
                string path = rendering.RenderingItem.InnerItem["Path"];
                switch(rendering.RenderingItem.InnerItem.TemplateName.ToLower())
                {
                    case "xsl rendering":
                        // Create an instance of a XSL
                        XslFile xslFile = new XslFile();
                        xslFile.Path = path;
                        xslFile.DataSource = item.Paths.FullPath;
                        xslFile.Parameters = GetParameters(xslFile);
                        yield return xslFile;
                        break;
                    case "sublayout":
                        // Create an instance of a sublayout
                        Sublayout sublayout = new Sublayout();
                        sublayout.Path = path;
                        sublayout.DataSource = item.Paths.FullPath;
                        sublayout.Parameters = GetParameters(sublayout);
                        yield return sublayout.GetUserControl();
                        break;
                    default:
                        throw new Exception(string.Format("Unknown rendering template - {0}", rendering.RenderingItem.InnerItem.TemplateName));
                }
            }
        } 
```

获得控件后，您可以将它们添加到占位符中，它们将被呈现到页面上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T17:56:16.097

每个项目都有自己的布局表示意味着您将获得一个完整的 HTML 文件......每个项目都有自己的`<html>, <head>, and <form>`标签。不用说，这会产生问题。

话虽这么说...这正是 Server.Execute() 的用途。循环遍历您的 TreeList 项目，使用 LinkManager 获取项目的 URL，然后使用 Server.Execute() 获取呈现的输出。

# magento - 我的主题正在回退到我的包中的默认主题

> ID：12967748
> 
> 赞同：1
> 
> 时间：2012-10-19T05:11:00.543
> 
> 标签：magento, themes

我已经安装了一个 magento 网站并配置了一个商店。在配置设计中，我在网站级别、商店级别以及默认商店级别添加了我为其创建的包和主题

文件夹结构就像

包名/默认

包名/mytheme

我已将 catalog.xml 添加到 packagename/mytheme/layout 文件夹以删除我的一些右侧元素，例如比较产品。因为它不起作用，我也尝试使用 local.xml

但它回退到 packagename/default/layout/catalog.xml

谁能给我一些想法我做错了什么

谢谢我留下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T01:53:31.137

检查`System > Configuration > GENERAL > Design > Themes > Layout`，它应该是“默认”并检查`System > Configuration > GENERAL > Design > Package > Current Package Name`它应该是“包名”。

如果这些设置正确，请按照 Cags 的建议删除缓存，一切正常

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T12:17:42.490

我发现通常情况下，如果您在 xml 中更改了某些内容并且它不起作用，那是因为缓存。我清除缓存的首选选项是使用`rm -rf var/cache/mage--*`.

# php - 如何在 PHP 中过滤 while 循环

> ID：12967749
> 
> 赞同：-1
> 
> 时间：2012-10-19T05:11:02.377
> 
> 标签：php, mysql, drop-down-menu, while-loop

我坚持这个，

我想创建一个包含 10 行的表，每行都有 10 个产品的“相同下拉菜单”。但在每一行中选择了不同的产品。例如在第一行中的第一个产品在第二行中的第二个产品，依此类推。波纹管代码在每一行中显示下拉菜单，但每一行都选择了第一个产品。如何为下一行选择下一个产品？

```
 <table>
    <tr>
        <td>
            <select>
                <?php
                    $query = "SELECT * FROM table_name WHERE featured=1 LIMIT 10";
                    $result = mysqli_query($connection, $query);
                    while($row = mysqli_fetch_array($result)){
                        echo "<option>".$row["product_name"]."</option>"
                    }
                ?>
             </select>
        </td>
        <td>
            <select>
                <?php
                    $query = "SELECT * FROM table_name WHERE featured=1 LIMIT 10";
                    $result = mysqli_query($connection, $query);
                    while($row = mysqli_fetch_array($result)){
                        echo "<option>".$row["product_name"]."</option>"
                    }
                ?>
             </select>
        </td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:25:42.020

```
 <? 
    //Only Once call to DB
    $query = "SELECT * FROM tbl WHERE featured=1 LIMIT 10";
    $result = mysqli_query($connection, $query); 
    $pos = 0;
    $currentRow = 0;
    ?>

    <table>
        <tr>
            </td>
            <select>
                <?php

                while($row = mysqli_fetch_array($result)){

                if($pos==$currentRow)
                   echo "<option selected=\"selected\">".$row["product_name"]."                     </option>";
                else
                   echo "<option>".$row["product_name"]."</option>";
                $pos++;

                }

                mysqli_data_seek( $result, 0 );
                $pos = 0;
                $currentRow++;

                ?>
            </select>
            </td>
        </tr>
        <tr>
            </td>
            <select>
                <?php
               while($row = mysqli_fetch_array($result)){

                if($pos==$currentRow)
                   echo "<option selected=\"selected\">".$row["product_name"]."                     </option>";
                else
                   echo "<option>".$row["product_name"]."</option>";
                           $pos++;

                }

                mysqli_data_seek( $result, 0 );
                $pos = 0;
                $currentRow++;
                ?>

            </select>
            </td>
        </tr>
        </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:30:25.227

你的第二个while循环

```
$i=0;    
while($row = mysqli_fetch_array($result)){
$i++;
if($i==2)
    echo "<option selected=\"selected\">".$row["product_name"]."</option>";
else
 echo "<option>".$row["product_name"]."</option>";
    }
    ?> 
```

# javascript - 如何获取用户的位置？

> ID：12967753
> 
> 赞同：3
> 
> 时间：2012-10-19T05:11:35.470
> 
> 标签：javascript, api, geolocation, google-api

我能够在我的网站中获取用户的 IP 地址。现在我需要他的国家、城市、地区使用他的 IP 我得到.. 我正在尝试使用以下代码的谷歌地理定位 API，

```
 <div id="yourinfo"></div>
    <script type="text/javascript" src="http://www.google.com/jsapi?key=ABQIAAAAp04yNttlQq-7b4aZI_jL5hQYPm-xtd00hTQOC0OXpAMO40FHAxQMnH50uBbWoKVHwgpklyirDEregg"></script>
    <script type="text/javascript">
        if(google.loader.ClientLocation)
        {
            visitor_lat = google.loader.ClientLocation.latitude;
            visitor_lon = google.loader.ClientLocation.longitude;
            visitor_city = google.loader.ClientLocation.address.city;
            visitor_region = google.loader.ClientLocation.address.region;
            visitor_country = google.loader.ClientLocation.address.country;
            visitor_countrycode = google.loader.ClientLocation.address.country_code;
            document.getElementById('yourinfo').innerHTML = '<p>Lat/Lon: ' + visitor_lat + ' / ' + visitor_lon + '</p><p>Location: ' + visitor_city + ', ' + visitor_region + ', ' + visitor_country + ' (' + visitor_countrycode + ')</p>';
        }
        else
        {
            document.getElementById('yourinfo').innerHTML = '<p>Whoops!</p>';
        }
    </script> 
```

真的，这段代码对我不起作用。它正在执行 else 部分并显示 Whoops!。如何获取用户的地理位置。任何其他想法让我知道。

我已经尝试过以下代码，它运行良好，但在免费版本中需要 6 秒的延迟。后来我才知道谷歌免费提供这项服务。所以我试了一下。

```
http://services.ipaddresslabs.com/iplocation/locateip?key=SAK58RWP983694534K4Z&ip=".$ClientIP 
```

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-22T10:11:40.110

在客户端使用它：

[http://services.ipaddresslabs.com/iplocation/locateip?key=SAK58RWP983694534K4Z&ip=local-ip](http://services.ipaddresslabs.com/iplocation/locateip?key=SAK58RWP983694534K4Z&ip=local-ip)

它对我很好。

顺便说一句，上面的密钥被阻止了，你必须得到新的密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:28:08.880

如果您乐于使用 HTML5，您应该访问[有关地理定位的本教程](http://tutorials.jenkov.com/html5/geo-location.html)。

# java - CSV数据到二维数组java

> ID：12967756
> 
> 赞同：1
> 
> 时间：2012-10-19T05:11:56.030
> 
> 标签：java, file

我可能会以错误的方式解决这个问题，但我的问题是，我将如何为 fxRates 填充数组？

```
CAD,EUR,GBP,USD
1.0,0.624514066,0.588714763,0.810307
1.601244959,1.0,0.942676548,1.2975
1.698615463,1.060809248,1.0,1.3764
1.234100162,0.772200772,.726532984,1.0 
```

这是我在 CSV 文件中的信息，我正在考虑使用扫描仪类来读取它。就像是

```
private double[][] fxRates;
String delimiter = ","
Scanner sc = new Scanner(file);
    while (sc.hasNextLine()) {
        String line = sc.nextLine();
        fxRates = line.split(delimiter) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:22:17.217

您解决此问题的方法似乎还可以。但`line.split(",")`会返回一个一维字符串数组。您不能将其分配给`fxRates`. 而且您还应该知道行数或行数以便`fxRates`在开始时进行初始化。否则，您应该使用动态列表结构，例如`ArrayList`.

假设您的文件中有 50 行，您可以使用以下内容：

```
private String[][] fxRates = String[50][];
String delimiter = ",";
Scanner sc = new Scanner(file);     
int index=0;

while (sc.hasNextLine()) 
{
    String line = sc.nextLine();
    fxRates[index++] = line.split(delimiter)
} 
```

请注意，我已将其声明`fxRates`为 2D 字符串数组，如果您需要双精度值，您应该就地或稍后进行一些转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-31T01:37:13.317

```
import java.nio.charset.Charset;
import java.nio.file.Paths;
import java.nio.file.Files;
import java.io.IOException;

public class CSVReader{

    private String readFile(String path, Charset encoding) throws IOException
    {
        //Read in all bytes from a file at the specified path into a byte array
        //This method will fail if there is no file to read at the specified path
        byte[] encoded = Files.readAllBytes(Paths.get(path));
        //Convert the array of bytes into a string.
        return new String(encoded, encoding);
    }

    public String readFile(String path)
    {
        try {
            //Read the contents of the file at the specified path into one long String
            String content = readFile(path, Charset.defaultCharset());

            //Display the string.  Feel free to comment this line out.
            System.out.println("File contents:\n"+content+"\n\n");

            //Return the string to caller
            return content;

        }catch (IOException e){
            //This code will only execute if we could not open a file

            //Display the error message
            System.out.println("Cannot read file "+path);
            System.out.println("Make sure the file exists and the path is correct");

            //Exit the program
            System.exit(1);
        }`enter code here`
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T07:35:28.667

我不建议您以这种方式解析 CSV，因为`Scanner`这太低级和原始的解决方案。相比之下，DOM/SAX 解析器更适合解析 XML，而不是正则表达式解析或任何不考虑文档结构的东西。有一些 CSV 解析器具有良好的 API，并在读取器初始化期间建议配置选项。看看易于使用的[CsvReader](http://www.csvreader.com/java_csv/docs/com/csvreader/CsvReader.html)。这是使用它的代码示例：

```
package q12967756;

import java.io.IOException;
import java.io.StringReader;
import java.util.ArrayList;
import java.util.Collection;

import static java.lang.Double.parseDouble;
import static java.lang.System.out;

import com.csvreader.CsvReader;

public final class Main {

    private Main() {
    }

    private static final String MOCK =
            "CAD,EUR,GBP,USD\n" +
            "1.0,0.624514066,0.588714763,0.810307\n" +
            "1.601244959,1.0,0.942676548,1.2975\n" +
            "1.698615463,1.060809248,1.0,1.3764\n" +
            "1.234100162,0.772200772,.726532984,1.0\n";

    private static final char SEPARATOR = ',';

    public static void main(String[] args) throws IOException {
        // final FileReader contentReader = new FileReader("yourfile.csv");
        final StringReader contentReader = new StringReader(MOCK);
        final CsvReader csv = new CsvReader(contentReader, SEPARATOR);
        csv.readHeaders(); // to skip `CAD,EUR,GBP,USD`
        final Collection<double[]> temp = new ArrayList<double[]>();
        while ( csv.readRecord() ) {
            temp.add(parseRawValues(csv.getValues()));
        }
        final double[][] array2d = temp.toArray(new double[temp.size()][]);
        out.println(array2d[3][1]);
    }

    private static double[] parseRawValues(String[] rawValues) {
        final int length = rawValues.length;
        final double[] values = new double[length];
        for ( int i = 0; i < length; i++ ) {
            values[i] = parseDouble(rawValues[i]);
        }
        return values;
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T05:57:35.633

另一个例子;

```
 Double[][] fxRates = new Double[4][];
        String delimiter = ",";
        //file code goes here
        Scanner sc = new Scanner(file);
        // Read File Line By Line
        int auxI = 0;
        // Read File Line By Line
        for (int auxI =0; sc.hasNextLine(); auxI++) {
            String line = sc.nextLine();
            System.out.println(line);
            String[] fxRatesAsString = line.split(delimiter);
            Double[] fxRatesAsDouble = new Double[fxRatesAsString.length];
            for (int i = 0; i < fxRatesAsString.length; i++) {
                fxRatesAsDouble[i] = Double.parseDouble(fxRatesAsString[i]);
                }
            fxRates[auxI] = fxRatesAsDouble;
        }
        //to double check it
        for (int y =0; y<fxRates.length; y++){              
            for (int x =0; x<fxRates.length; x++){
                System.out.print(fxRates[y][x] +" ");
            }
            System.out.println("");
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T05:24:18.710

操作的结果`split`是一个`String`数组，而不是`double`. 所以缺少一步：将字符串转换为双精度：

```
private double[][] fxRates = new double[maxLines][4];
String delimiter = ","
int line = 0;
Scanner sc = new Scanner(file);
    while (sc.hasNextLine()) {
        String line = sc.nextLine();
        String[] fxRatesAsString = line.split(delimiter);
        for (int i = 0; i < fxRatesAsString.length; i++) {
            fxRates[line][i] = Double.parseDouble(fxRatesAsString[i]);
        } 
```

# c++ - c++ unorderd_map让我遇到段错误

> ID：12967758
> 
> 赞同：0
> 
> 时间：2012-10-19T05:12:08.127
> 
> 标签：c++

```
#include <unordered_map>
#include <iostream>
#include <string>
#include <vector>
#include <utility>
#include <algorithm>
using namespace std;

unordered_map <string, int> setupDictionary(vector<string> book)
{
    unordered_map<string, int> table;
    for (int i =0;i< book.size(); i++)
    {
        string word = book[i];
        if(word != "")
        {
            if (table.find(word)==table.end())
            {
                std::pair<std::string,int> myshopping (word,0);
                table.insert(myshopping);
            }else
            {
                int num = table[word];
                 std::pair<std::string,int> myshopping (word,num+1);
                table.insert(myshopping );
            }

        }
    }
    return table;
}

int main()
{
    vector<string> book;
    book[1] = "hello";
    book[2] = "world";
    book[3] = "hello";
    book[4] = "world2";
    unordered_map < string, int> dict= setupDictionary(book);
   // printf("%s,%d",dict["hello"]);
} 
```

编译和构建是好的。但是在我运行它之后，我得到了分段错误。需要帮助 真的不知道我的代码有什么问题。真的谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:15:40.700

你从来没有分配你的书向量有任何元素。当您尝试此行时：

```
book[1] = "hello"; 
```

当您没有分配内存时，您正在尝试存储一些东西。

尝试：

```
book.push_back("hello"); 
```

反而。

你也可以这样做：

```
vector<string> book(4);
book[1] = "hello";
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:18:05.597

您没有为`book`向量中的单词分配空间。试试这样：

```
vector<string> book(4);
book[0] = "hello";
book[1] = "world";
book[2] = "hello";
book[3] = "world2"; 
```

或者您可以使用`push_back()`它们将它们一一插入到后面。

另外，索引从 0 开始，所以如果你使用 1..4，你需要一个 5 个元素的向量而不是 4，而且你使用的内存比需要的多。

# jquery - 谷歌地图信息气泡内的滑块第一次不起作用？

> ID：12967764
> 
> 赞同：1
> 
> 时间：2012-10-19T05:13:36.607
> 
> 标签：jquery, jquery-ui, google-maps, google-maps-api-3, slider

我正在使用谷歌地图信息气泡，在信息气泡内我显示了一个滑块，该滑块只有在第二次单击标记后才能正常工作，当我第一次单击时滑块不起作用，即使我像这样在 domready

```
jQuery(document).ready(function () {    
   initialize();  
   google.maps.event.addListener(infoBubble, 'domready', function(){
    // initiate slider here
       jQuery('.map_slider').each(function(){ 
        var slid_id = (this.id);alert('in'+slid_id);
        jQuery("#"+slid_id).easySlider({nextId: ""+slid_id+"next",prevId: ""+slid_id+"prev",prevText:'<img src="images/prev.png" />',nextText:'<img src="images/next.png" />',tempstr:slid_id,continuous: true });
    });
   });   
}); 
```

只有在第二次单击后才会发出警报。请帮助我摆脱这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:49:21.350

infoWindow 可能不是在时间`jQuery(document).ready()`触发时创建的。请发布更完整的代码部分或现场演示的链接。否则，请尝试在函数 initialize() 之外将信息窗口创建为全局变量：

```
var infoBubble = new google.maps.InfoWindow();

    jQuery(document).ready(function () {    
       initialize(); 
       google.maps.event.addListener(infoBubble, 'domready', function(){
        // initiate slider here
           jQuery('.map_slider').each(function(){ 
            var slid_id = (this.id);alert('in'+slid_id);
            jQuery("#"+slid_id).easySlider({nextId: ""+slid_id+"next",prevId: ""+slid_id+"prev",prevText:'<img src="images/prev.png" />',nextText:'<img src="images/next.png" />',tempstr:slid_id,continuous: true });
        });
       });   
    }); 
```

# c++ - 形成对 void 的引用

> ID：12967767
> 
> 赞同：5
> 
> 时间：2012-10-19T05:13:59.940
> 
> 标签：c++, templates

我有一个应该允许`void`作为模板参数的模板类。这个类确实有一个传递参数引用的函数，所以我做了以下事情：

```
template <typename T>
struct trait
{
    typedef typename boost::conditional<
        boost::is_void<T>::value,
        void, T &
    >::type type;
};

template <typename T>
struct foo
{
    typename trait<T>::type ref()
    {
        // do something
    }
}; 
```

然而编译器声称我会`void`在`struct trait<void>`. 为什么会这样，我怎样才能实现我想要的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-19T05:20:22.017

好吧，`void`当你说`T&`. 这似乎最好处理专业化：

```
template <typename T> struct trait { typedef T& type; };
template <> struct trait<void> { typedef void type; }; 
```

# android - 如何在android中的google mapview上获取当前位置

> ID：12967768
> 
> 赞同：0
> 
> 时间：2012-10-19T05:14:27.433
> 
> 标签：android, google-maps, android-mapview

在这个我的代码中，我不明白我的代码哪里出错了。我没有在地图视图上用针点图像获得当前位置。如何获取纬度和纬度并通过地理点。然后传递值 OverlayItem ..

```
public class HelloGoogleMaps2 extends MapActivity implements LocationListener{

 private LocationManager locationManager;
 private String provider;
 int lat;
 int lng;
 MyLocationOverlay  myLocOverlay;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    MapView mapView = (MapView) findViewById(R.id.mapview);    
    mapView.setBuiltInZoomControls(true);

    // Get the location manager
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    // Define the criteria how to select the locatioin provider -> use
    // default
    Criteria criteria = new Criteria();
    provider = locationManager.getBestProvider(criteria, true);
    Location location = locationManager.getLastKnownLocation(provider);

    Log.d("provider  ","Provider  "+provider);
    Log.d("provider  ","Provider  "+provider);
    Log.d("provider  ","Provider  "+provider);
    Log.d("location","Location "+location);

    Log.d("location","Location "+location);        

    Log.d("location","Location "+location);
    // Initialize the location fields
    if (location != null) {
      System.out.println("Provider " + provider + " has been selected.");
      onLocationChanged(location);
    } else {
      //latituteField.setText("Location not available");
     // longitudeField.setText("Location not available");
    }

    List<Overlay> mapOverlays = mapView.getOverlays();

    myLocOverlay = new MyLocationOverlay(this, mapView);
    mapOverlays.add(myLocOverlay);
    myLocOverlay.enableMyLocation();
    GeoPoint point = new GeoPoint(lat, lng);
   //        mc.setCenter(point);
    //        mapView.invalidate();

    Drawable drawable = this.getResources().getDrawable(R.drawable.ic_launcher);
    HelloItemizedOverlay itemizedoverlay = new HelloItemizedOverlay(drawable);

      GeoPoint point = new GeoPoint(lat,lng);
OverlayItem overlayitem = new OverlayItem(point, "Hola, Mundo!", "I'm in Mexico City!");

itemizedoverlay.addOverlay(overlayitem);
mapOverlays.add(itemizedoverlay);
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

 protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(provider, 400, 1, this);
      }

      /* Remove the locationlistener updates when Activity is paused */
      //
      protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this);
      }

      //
      public void onLocationChanged(Location location) {
         lat = (int) (location.getLatitude()* 1E6);
         lng = (int) (location.getLongitude()* 1E6);
       // latituteField.setText(String.valueOf(lat));
       // longitudeField.setText(String.valueOf(lng));
      }

      //
      public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

      }

      //
      public void onProviderEnabled(String provider) {
        Toast.makeText(this, "Enabled new provider " + provider,
            Toast.LENGTH_SHORT).show();

      }

      //
      public void onProviderDisabled(String provider) {
        Toast.makeText(this, "Disabled provider " + provider,
            Toast.LENGTH_SHORT).show();
      } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:08:18.233

正确的代码就是这个，还要加上uses-permissio,Internet,ACCESS_COARSE_LOCATION,ACCESS_FINE_LOCATION和WRITE_EXTERNAL_STORAGE.user-library。

```
 public class GoogleMapActivity extends  MapActivity implements LocationListener {
  private final static String TAG = GoogleMapActivity.class.getSimpleName();
private MyItemizedOverlay itemizedOverlay;

double lat;
double lng;
private String provider;
private LocationManager locationManager;

private MapView mapview;

Drawable drawable;

boolean sat = true;
boolean dra = true;

private MapController controller;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    // fetch the map view from the layout
    mapview = (MapView) findViewById(R.id.mapview);

    // make available zoom controls
    mapview.setBuiltInZoomControls(false);

    // Use the location manager through GPS

    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    Criteria criteria = new Criteria();
    provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);

    if (location != null) {
        System.out.println("Provider " + provider + " has been selected.");
        lat = (double) (location.getLatitude());
        lng = (double) (location.getLongitude());

        Log.i(TAG, "Lattitude:" + lat);
        Log.i(TAG, "Longitude:" + lng);
        Toast.makeText(
                this,
                "Current location:\nLatitude: " + lat + "\n"
                        + "Longitude: " + lng, Toast.LENGTH_LONG).show();
        // create geo point
        GeoPoint point = new GeoPoint((int) (lat * 1E6), (int) (lng * 1E6));

        // get the MapController object
        controller = mapview.getController();

        // animate to the desired point
        controller.animateTo(point);

        // set the map zoom to 13
        // zoom 1 is top world view
        controller.setZoom(13);

        // invalidate the map in order to show changes
        mapview.invalidate();

        drawable = this.getResources().getDrawable(R.drawable.ic_launcher);
        OverlayItem overlayItem = new OverlayItem(point, "", "");
        itemizedOverlay = new MyItemizedOverlay(drawable, this);
        itemizedOverlay.addOverlay(overlayItem);
        mapview.getOverlays().add(itemizedOverlay);
        mapview.invalidate();
    } else {

        System.out.println("Location not avilable");
    }

    // when the current location is found – stop listening for updates
    // (preserves battery)
    locationManager.removeUpdates(this);

}

@Override
protected boolean isRouteDisplayed() {
    return false;

}

@Override
protected void onResume() {
    super.onResume();
    locationManager.requestLocationUpdates(provider, 400, 1, this);
}

/* Remove the locationlistener updates when Activity is paused */
@Override
protected void onPause() {
    super.onPause();
    locationManager.removeUpdates(this);
}

public void onProviderDisabled(String provider) {
    Toast.makeText(this, "Disabled provider " + provider,
            Toast.LENGTH_SHORT).show();
}

public void onProviderEnabled(String provider) {
    Toast.makeText(this, "Enabled new provider " + provider,
            Toast.LENGTH_SHORT).show();
}

public void onStatusChanged(String provider, int status, Bundle extras) {

}

public void onLocationChanged(Location location) {

}

public MapView getMapView() {
    return this.mapview;
}

    } 
```

` //这里是另一个项目覆盖

```
 public class MyItemizedOverlay  extends ItemizedOverlay<OverlayItem>
     {

   private ArrayList<OverlayItem> mOverlays = new ArrayList<OverlayItem>();

    public MyItemizedOverlay(Drawable defaultMarker, Context ctx){ 
        super(boundCenterBottom(defaultMarker));

    }

    public void addOverlay(OverlayItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    public void clear() {
        mOverlays.clear();
        populate();
    }

    @Override
    protected OverlayItem createItem(int i) {
        return mOverlays.get(i);
    }

    @Override
    public int size() {
        return mOverlays.size();
    }

    @Override
    protected boolean onTap(int index) {
        return true;
    } 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:16:50.587

我会推荐[MyLocationOverlay](https://developers.google.com/maps/documentation/android/reference/com/google/android/maps/MyLocationOverlay)。

*用于在地图上绘制用户当前位置（和准确性）的叠加层，和/或罗盘玫瑰插图。子类可以覆盖 dispatchTap() 来处理当前位置的点击。
您可能需要调用 enableMyLocation() 和/或 enableCompass()，可能来自 Activity 的 Activity.onResume() 方法，以启用此叠加层的功能。请记住在 Activity 的 Activity.onPause() 方法中调用相应的 disableMyLocation() 和/或 disableCompass() 以在后台关闭更新。
可选地，构造函数还可以使用 MapController 并使用它来保持“我的位置”点可见，方法是在地图离开屏幕时平移地图，并在位置或方向发生更改时使用 View 到 View.postInvalidate()。
Runnables 可以在 runOnFirstFix(java.lang.Runnable) 中提供，以便在我们修复后立即运行。（例如，这可以使地图居中并放大以显示位置。）*

[您可以在此处](http://web.archive.org/web/20090425180939/http://blogs.itemis.de/frey/2009/04/04/location-based-services-on-android-part-1/)找到有关 MyLocationOverlay 的好教程

# c# - 在 C# 中创建一个页面以在 SQL Server 中编辑数据

> ID：12967769
> 
> 赞同：1
> 
> 时间：2012-10-19T05:14:34.220
> 
> 标签：c#, sql-server, listview, gridview

我正在尝试在 C# 中创建一个页面以在 SQL Server 中编辑数据，并且数据类似于`title`, `date`，`description`这没什么大不了的

问题是它的每一行都有一个指向另一个具有图像 URL 的表的外键，因此每行都有 3 个或更多图像。

就像我之前说的，我想创建一个可以编辑所有这些的页面，我用 listview 做了它，但它真的很糟糕，所以我试图找到另一个想法，所以你能帮我吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:32:10.797

好吧，外键并不难处理。当用户编辑该 FK 时，在您允许将更改提交到单元格或保存之前，请对 Db 运行检查以查看他们的条目是否有效。如果是，允许编辑，如果不是，取消他们对该值的编辑。

如果另一个表是唯一需要担心 FK 的表，您可以在初始调用中仅返回 Id 并检查数据集以节省一些往返行程。

# c# - 如何在循环中只运行一次方法？

> ID：12967776
> 
> 赞同：0
> 
> 时间：2012-10-19T05:15:29.837
> 
> 标签：c#

我正在使用开关作为我的 XNA 游戏的状态管理器。该开关是主要更新方法的一部分，因此它每帧都运行。有时我需要设置一个计时器值，并且每个方法调用只能设置一次。有多种方法可以根据情况设置计时器，因此它不能使用当前和先前的状态编号来检查是否可以覆盖先前的时间。

```
case "state 34": {
SetTime(theTime); // should run only once
// other things
if (TheTimeisRight(time)) // runs every call
    {
        SetTime(theTime); // should run only once
        if (TheTimeisRight(time)) 
        { /*  some methods  */ }
    }
break; } 
```

我怎样才能做到这一点，或者有没有更好的方法来做到这一点而无需离开交换机？（更改 SetTime 方法是可以的，但我不想用额外的代码弄乱开关）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:26:56.047

另一种方法：在要调用的方法周围引入一个包装器：

```
 public sealed class RunOnceAction
    {
        private readonly Action F;
        private bool hasRun;

        public RunOnceAction(Action f)
        {
            F = f;
        }

        public void run()
        {
            if (hasRun) return;
            F();
            hasRun = true;
        }
    } 
```

`var setTimeOnce = new RunOnceAction(() => SetTime(theTime));`然后在 switch 语句之前创建，并在那里调用 as `setTimeOnce.run()`。根据需要调整参数/返回值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:21:16.607

将呼叫置于循环之外。
您可能需要一个单独的条件语句来确定它是否应该运行，但这比尝试使用标志和/或各种其他臭代码方法来控制调用的重复要好得多。

**编辑：**

这就是我将它放在交换机外部的*一个地方的意思：*

```
if (someCondition && someOtherCondition && yetAnotherCondition)  
    setTime(theTime); // just one call, in one place, gets executed once

switch(someValue) 
{
    case "state 34": {
        //SetTime(theTime); // no longer necessary
        // other things
        if (TheTimeisRight(time)) // runs every call
        {
            //SetTime(theTime); // no longer necessary
            if (TheTimeisRight(time)) 
            { /*  some methods  */ }
        }
        break;

    ...etc...
} 
```

一句忠告：对你的开关值使用枚举而不是字符串。

老实说，这几乎是任何人都可以在没有看到更完整的代码示例的情况下实际帮助您的程度（我认为您提供给我们的示例有些做作，并且与您所拥有的不太准确？）。解决此问题的最佳方法可能是解构 switch 语句并重新开始，因为维护状态机不是处理这种情况的最佳方法，或者您需要引入一些其他状态。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T05:22:55.423

如果您不想弄乱布尔变量 ala `hasSetTimeAlready`，您总是可以引入另一个调用该方法的状态，然后进入原始状态。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T15:49:42.907

我已经诉诸于使用`HashSet<int>`来检查当前`SetTime(time, num)`方法之前是否没有被调用过`if (!hashSet.Contains(num))`。

```
void SetTime(int time, int num)
{
    if (!hashSet.Contains(num))
        {
            theTime = time;
            hashSet.Add(num);
        }
} 
```

当然看起来不太酷，但可以工作并且不会过多地损坏方法调用（视觉上），因此保存了开关的可读性。

# php - 如何在没有表单的情况下将值从文本框传递到另一个页面

> ID：12967777
> 
> 赞同：0
> 
> 时间：2012-10-19T05:15:34.093
> 
> 标签：php, javascript, jquery, ajax

好的，我有这个代码，我想在用户单击提交但没有刷新页面且没有表单时将此价格从和价格发送到其他页面。在其他页面上，我将使用此输入进行 sql 查询和显示结果。

```
Price from:<input type="text" name="from" id="from" width="50px" />
Price to:<input type="text" name="to" id="to" width="50px" />
<input type="submit" id="submit" value="Search"/> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:20:12.100

使用`jquery`

```
$('#submit').click(){
  event.preventDefault();// prevent form from submitting
   $.ajax({
     type: 'POST',
     url: 'targetpage.php', //your page here
     data: {price_from:$('#from').val() , price_to: $('#to').val()},
     success: function(response){
     }
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T06:25:44.530

```
var _from = $('#from').val(); 
var _to   = $('#to').val();    
$.post('your_file.php',{from: _form, to: _to},function(data){
    //Do Something with returned data.
},'json'); 
```

`'json'`最后也可能`'html'`取决于您要返回的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T05:19:43.673

嗨，您可以使用 jQuery+Ajax 来实现这一点，试试这个

```
$('#submit').click(function(event) {

        var from = $('#from').val(); 
        var to   = $('#to').val();
        $.ajax({
                type: "POST",
                url: "page_name.php",
                data:"from="+from+"&to="+to,
                success: function (msg) {

                    //some action
                }
            });

    }); 
```

并且在您的 php( `page_name.php`) 文件中，您可以获得发布的值并可以进行必要的操作

```
$from = $_POST['from'];
$to   = $_POST['to']; 
```

# c# - 如何使用c#根据xml的内容从xml中删除整个节点

> ID：12967778
> 
> 赞同：0
> 
> 时间：2012-10-19T05:15:34.273
> 
> 标签：c#, xml, xml-parsing

我正在使用 LoadXml 加载以下 xml。`<site> .... </site>`我需要根据使用 C# 的条件删除整个节点。

跟随：

```
 XmlDocument xdoc= new XmlDocument(); 
  xdoc.LoadXml(xmlpath); 
  string xml = xdoc.InnerXml.ToString();

  if(xml.Contains("href"+"\""+ "www.google.com" +"\"")
  {
  string removenode = "";  // If href=www.google.com is present in xml then remove the  entire node. Here providing the entire <site> .. </site>
  xml.Replace(removenode,"");
  } 
```

它没有用 null 替换节点

XML 是：

```
 <websites>
 <site>
 <a xmlns="http://www.w3.org/1999/xhtml" href="www.google.com"> Google </a>
 </site>
 <site>
 <a xmlns="http://www.w3.org/1999/xhtml" href="www.hotmail.com"> Hotmail </a>
 </site>
 </websites> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:30:38.680

`href`这是一个示例，该示例删除了包含任何具有以下属性的元素的站点元素`www.google.com`

```
using System.Diagnostics;
using System.Linq;
using System.Xml.Linq;

namespace ConsoleApplication6
{
    class Program
    {
        static void Main(string[] args)
        {
            const string frag = @" <websites>
 <site>
 <a xmlns=""http://www.w3.org/1999/xhtml"" href=""www.google.com""> Google </a>
 </site>
 <site>
 <a xmlns=""http://www.w3.org/1999/xhtml"" href=""www.hotmail.com""> Hotmail </a>
 </site>
 </websites>";

            var doc = XDocument.Parse(frag);

            //Locate all the elements that contain the attribute you're looking for
            var invalidEntries = doc.Document.Descendants().Where(x =>
            {
                //Get the href attribute from the element
                var hrefAttribute = x.Attribute("href");
                //Check to see if the attribute existed, and, if it did, if it has the value you're looking for
                return hrefAttribute != null && hrefAttribute.Value.Contains("www.google.com");
            });

            //Find the site elements that are the parents of the elements that contain bad entries
            var toRemove = invalidEntries.Select(x => x.Ancestors("site").First()).ToList();

            //For each of the site elements that should be removed, remove them
            foreach(var entry in toRemove)
            {
                entry.Remove();
            }

            Debugger.Break();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:26:16.590

我认为您需要为此使用正确的 XML 和 XPath。尝试关注

```
XmlNodeList nl = xDoc.DocumentElement.SelectNodes("Site");

foreach(XmlNode n in nl)
{
    if(n.SelectSingleNode("a").Attributes("href").Value == "www.google.com")
    {
        n.ParentNode.RemoveChild(n);
    }

} 
```

希望有帮助。

米林德

# twitter - 有什么方法可以从 API 获取到 t.co 域的收缩 URL？

> ID：12967779
> 
> 赞同：-1
> 
> 时间：2012-10-19T05:15:35.997
> 
> 标签：twitter

有什么方法可以从 API 获取到 t.co 域的收缩 URL？对于 to.ly 域，我们使用`http://to.ly/api.php?json=1&longurl=`来自 Twitter API。从 API 获取 t.co 域的 URL 的方法是什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:20:29.260

t.co 不公开——它是 Twitter 自己的内部缩短服务。您可以使用的“黑客”是拥有一个私人 Twitter 帐户，您可以通过编程方式将您的 url 推文发送到该帐户，然后您可以从那里检索 t.co url。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:17:46.137

Twitter 不为其 t.co URL 缩短服务提供 API。无法以编程方式创建新的 t.co 短 URL。

# php - 定义由另一个 php 文件编辑的值

> ID：12967784
> 
> 赞同：1
> 
> 时间：2012-10-19T05:16:08.290
> 
> 标签：php, performance, oracle

我有 2 个问题

1.) 如何编写`update_defile($array_value){...}`函数？

定义文件.php

```
<?php
  define("FIST_NAME", "something1");
  define("LAST_NAME", "something2");
  define("ADDRESS", "something3");
?> 
```

“某事”不是可以改变每种方法的常数值`Call(update_defile($array_value)`

值集

```
$array_value = ("FIST_NAMe" => "duleep", "LAST_NAME" => "dissnayaka", "AGE" => "28" ); 
```

调用方法（update_defile（$array_value）{.....}）“define_file.php”文件后希望如下所示

```
<?php
  define("FIST_NAME", "duleep");
  define("LAST_NAME", "dissnayaka");
  define("ADDRESS", "something3");
  define("AGE", "28");
?> 
```

2）。

我的数据库是甲骨文。我已经在数据库中保存了配置值，但经常将这些配置值用于我的应用程序。所以我从数据库中获取值并保存在define_file.php中作为提高性能（降低数据库调用）但我不确定我可以提高性能保持PHP文件中的配置值请解释。欢迎使用我的应用程序和其他替代解决方案来提高性能的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:38:12.490

为什么你不能使用 session 来存储这些值，然后你可以从脚本中的任何地方访问和修改。

```
<?php
    session_start();
     $_SESSION["FIST_NAME"]= "something1";
    $_SESSION["LAST_NAME"]= "something2";
    $_SESSION["ADDRESS"]= "something3";

?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T06:56:51.490

```
 public function update($form_config_arr)
   {

      if( (is_readable($config_file_path)) && is_writable($config_file_path))
      {
         if(!$config_old_file_content = file_get_contents($config_file_path))
         {
            throw new Exception('Unable to open file!');
         }

         $i = 0;
         $config_old_arr = array();
         $config_new_arr = array();

         foreach ($form_config_arr as $constant => $value){
            $config_old_line = $this->getLine($constant);
            $config_old_arr[$i] = $config_old_line;

            if(($value == 'true') || ($value == 'false')){
               $config_new_arr[$i] = "define ( '$constant', $value );\n";
            }else{
               $config_new_arr[$i] = "define ( '$constant', '$value' );\n";
            }
            $i++;
         }

         $config_new_file_content = str_replace($config_old_arr, $config_new_arr, $config_old_file_content);
         $new_content_file_write = file_put_contents($config_file_path, $config_new_file_content);

         foreach ($config_new_arr as $constant => $value)
         {
            echo $value.'<br/>';
         }
         return true;
      }else{
         throw new Exception('Access denied for '.$config_file_path);
         return false;
      }

   }

   /**
    *
    * @param string $constant
    * @return string
    */
   private function getLine($constant)
   {
      $match_line = '';
      $config_file = fopen($config_file_path, "r");
      if($config_file)
      {
         //Output a line of the file until the end is reached
         $i = 0;
         while(!feof($config_file))
         {
            $i++;
            $config_old_line = fgets($config_file);
            $pos = strpos($config_old_line, $constant);
            if( $pos !== false )
            {
               $match_line= $config_old_line;
            }
         }
         fclose($config_file);
         return $match_line;
      }else{
         throw new Exception('Unable to open file!');
      }

   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T05:36:16.127

您要做的是编辑文件。只需创建另一个 php 脚本：updater.php 它应该轮询数据库，获取值并更新 define_file.php 中的值

在此处查找 php 文件处理函数：http: [//www.w3schools.com/php/php_file.asp](http://www.w3schools.com/php/php_file.asp)

# html - 一个带有两个表单输入的 Html 标签

> ID：12967785
> 
> 赞同：3
> 
> 时间：2012-10-19T05:16:14.170
> 
> 标签：html, forms, textbox, semantics, labels

如果我想将一个标签与两个表单输入相关联，例如两个输入“ExpirationMonth”和“ExpirationYear”的标签的“到期日期”，那么最好的语义方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:46:11.620

There isn’t a way to associate a label with more than one input field, because a label is, by [definition](http://www.w3.org/TR/html4/interact/forms.html#edef-LABEL), a label for a single field. The reasons for using a `label` element are based on such a simple correspondence, so there’s no point in using it for two fields simultaneously.

If you are required to have two input fields, on one hand, and to comply with WCAG 2.0 (which makes `label` markup mandatory for input boxes, [H44](http://www.w3.org/TR/2012/NOTE-WCAG20-TECHS-20120103/H44)) on the other, then you need to have separate labels for each of the boxes.

In practice, it is better to have a single field for month/year input, and then you won’t have this problem. (I’m sure most users will find it more natural to type “10/12” than to type “10”, click on a next input box – or hit TAB, but most users don’t – and then type “12”. And any attempt at auto-tabbing from one field to another will cause confusion.)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-09T02:11:06.777

有一个使用**title**和**aria-labelledby**属性的解决方案。

这是一个例子：

```
<span id="bday">Birthday</span>:
<select name="bday_month" title="Month of Birth" aria-labelledby="bday">
<option 1>January
  ...
<option 12>December
</select>
<select name="bday_day" title="Day of Birth" aria-labelledby="bday">
<option 1>1
  ...
<option 31>31
</select> 
```

这“通过”了[http://wave.webaim.org/](http://wave.webaim.org/)可访问性检查器。

# http - 如何获取 HTTPS 网页？

> ID：12967796
> 
> 赞同：1
> 
> 时间：2012-10-19T05:17:48.040
> 
> 标签：http, sockets, visual-c++, ssl, https

我编写了一个连接到 Web 服务器并发送请求的*Visual C++应用程序：*

```
/GET /file.htm
Host: www.server.com 
```

然后我得到了文件。

目前，服务器更改为 HTTP 安全，我得到这样的响应：

```
HTTP/1.1 302 Found
Location: https://www.server.com/file.htm 
```

有一种方法可以修改我的代码，添加一些 lib 或类似内容以获取*https*页面？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:20:22.587

使用[System.Net](http://msdn.microsoft.com/en-us/library/system.net.aspx)中的[WebRequest](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)

例子：

[http://support.microsoft.com/kb/815657](http://support.microsoft.com/kb/815657)

或者，如果您不使用托管 c++，请使用WinInet[中的](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383630%28v=vs.85%29.aspx)[HttpOpenRequest](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384233%28v=vs.85%29.aspx)：

[http://support.microsoft.com/kb/168151](http://support.microsoft.com/kb/168151)

# r - 有没有比字符串操作更好的选择来以编程方式构建公式？

> ID：12967797
> 
> 赞同：53
> 
> 时间：2012-10-19T05:17:56.230
> 
> 标签：r, linear-regression

其他人的函数似乎都采用公式对象，然后在内心深处的某个地方对它们施以黑魔法，我很嫉妒。

我正在编写一个适合多个模型的函数。这些模型的部分公式保持不变，而从一个模型到另一个模型的部分变化。笨拙的方法是让用户将公式部分输入为字符串，对其进行一些字符操作，然后使用`as.formula`.

但在我走这条路之前，我只是想确保我没有忽略一些更简洁的方法，它允许函数接受标准 R 格式的公式（例如，从其他使用公式的对象中提取）。

我想要类似的东西...

```
> LHS <- y~1; RHS <- ~a+b; c(LHS,RHS);
y ~ a + b
> RHS2 <- ~c;
> c(LHS, RHS, RHS2);
y ~ a + b + c 
```

或者...

```
> LHS + RHS;
y ~ a + b
> LHS + RHS + RHS2;
y ~ a + b + c 
```

...但不幸的是，两种语法都不起作用。有人知道是否有什么可以做的吗？谢谢。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-10-19T05:22:22.290

`reformulate`会做你想做的。

```
reformulate(termlabels = c('x','z'), response = 'y')
## y ~ x + z 
```

或者没有拦截

```
reformulate(termlabels = c('x','z'), response = 'y', intercept = FALSE)
## y ~ x + z - 1 
```

请注意，您不能构造具有多个公式的公式，`reponses`例如`x+y ~z+b`

```
reformulate(termlabels = c('x','y'), response = c('z','b'))
z ~ x + y 
```

从现有的`formula`（给定您的示例）中提取术语

```
attr(terms(RHS), 'term.labels')
## [1] "a" "b" 
```

得到的响应稍有不同，一种简单的方法（对于单变量响应）。

```
as.character(LHS)[2]
## [1] 'y'

combine_formula <- function(LHS, RHS){
  .terms <- lapply(RHS, terms)
  new_terms <- unique(unlist(lapply(.terms, attr, which = 'term.labels')))
  response <- as.character(LHS)[2]

  reformulate(new_terms, response)

}

combine_formula(LHS, list(RHS, RHS2))

## y ~ a + b + c
## <environment: 0x577fb908> 
```

我认为将响应指定为字符向量会更明智，例如

```
combine_formula2 <- function(response, RHS, intercept = TRUE){
  .terms <- lapply(RHS, terms)
  new_terms <- unique(unlist(lapply(.terms, attr, which = 'term.labels')))
  response <- as.character(LHS)[2]

  reformulate(new_terms, response, intercept)

}
combine_formula2('y', list(RHS, RHS2)) 
```

您还可以定义一个`+`运算符来处理公式（更新为公式对象设置新方法）

```
`+.formula` <- function(e1,e2){
  .terms <- lapply(c(e1,e2), terms)
  reformulate(unique(unlist(lapply(.terms, attr, which = 'term.labels'))))
}

RHS + RHS2
## ~a + b + c 
```

您也可以明智地使用`update.formula`using`.`

```
 update(~a+b, y ~ .)
 ##  y~a+b 
```

# r - 如何更改 Lattice 图形默认组颜色？

> ID：12967798
> 
> 赞同：0
> 
> 时间：2012-10-19T05:18:03.803
> 
> 标签：r, lattice

使用 时`groups`，Lattice 为每个组赋予不同的颜色。例子：

```
df <- data.frame(x=1:56, y=rnorm(56), class=1:14) # create some data
xyplot(y ~ x, groups=class, data=df, type="l", auto.key=list(space="right")) 
```

但是，默认情况下，Lattice 仅使用七种颜色，如运行上面的示例所示。如果您有超过 7 个组，Lattice 会按顺序再次循环显示颜色，导致来自不同组的数据具有相同的颜色。我从另一篇 Stackoverflow 文章中了解到，这些颜色存储在`trellis.par.get()$superpose.symbol$col`. 我想让组颜色列表更长（不必在绘图调用中明确指定颜色）。但是，我不知道如何更改此颜色列表。（这可能是由于对 Lattice 语法或语义的一些基本事实的无知。）这说明了问题：

```
> trellis.par.get()$superpose.symbol$col
[1] "#0080ff"   "#ff00ff"   "darkgreen" "#ff0000"   "orange"    "#00ff00"   "brown"    
> class(trellis.par.get()$superpose.symbol$col)
[1] "character"
> mycolors <- c(trellis.par.get()$superpose.symbol$col, "navyblue", "purple", "gold")
> trellis.par.get()$superpose.symbol$col[1:10] <- mycolors
Error in trellis.par.get()$superpose.symbol$col[1:10] <- mycolors : 
  invalid (NULL) left side of assignment 
```

我不明白该错误消息告诉我什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:25:58.160

您应该使用`trellis.par.set()`设置格子图形参数。所以：

```
trellis.par.set(superpose.symbol = list(col = mycolors)) 
```

请记住，这只会更改当前活动设备的设置，因此如果您创建新的图形设备，则必须重置颜色设置。

`?trellis.par.get`此外，这在“详细信息”部分的帮助页面中进行了说明。请在那里看看。

# php - 简单的 php/jquery 联系表单——添加主题

> ID：12967803
> 
> 赞同：0
> 
> 时间：2012-10-19T05:18:58.680
> 
> 标签：php, jquery, forms, email

我正在使用[本教程](http://www.dzyngiri.com/index.php/slick-contact-form-using-jquery-php/)创建一个简单的 PHP/jQuery 联系表单来获取用户信息并发送到指定的电子邮件地址。它完美无瑕，我想做的唯一改变是在发出的消息中指定一个主题（不是用户的一部分——我实际上只会有一个电子邮件地址字段——正是 PHP 设置为默认主题行的内容）

config.php 如下：

```
<?php
// To
define("WEBMASTER_EMAIL", 'address@test.com');
?> 
```

我想知道我是否可以简单地添加一行，将电子邮件的默认主题指定为“联系表单数据”，或者这是否涉及更多？

感谢您在这里的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:34:38.007

我认为你可以用同样的方式定义一个主题：

```
define("MY_SUBJECT", 'Some Subject'); 
```

然后简单地改变

```
mail(WEBMASTER_EMAIL, $subject, $message,
        "From: ".$name." \r\n"
        ."Reply-To: ".$email."\r\n"
        ."X-Mailer: PHP/" . phpversion()); 
```

到

```
mail(WEBMASTER_EMAIL, MY_SUBJECT, $message,
        "From: ".$name." \r\n"
        ."Reply-To: ".$email."\r\n"
        ."X-Mailer: PHP/" . phpversion()); 
```

在邮件中使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:35:57.140

您可以通过编辑此部分来做到这一点。

```
if(!$error)
{
$mail = mail(WEBMASTER_EMAIL, $subject, $message,
    "From: ".$name." \r\n"
    ."Reply-To: ".$email."\r\n"
    ."X-Mailer: PHP/" . phpversion());
if($mail)
{
echo 'OK';
}
} 
```

在这里，输入您的主题而不是 $subject..

```
if(!$error)
{
$mail = mail(WEBMASTER_EMAIL, "Contact Form Data", $message,
    "From: ".$name." \r\n"
    ."Reply-To: ".$email."\r\n"
    ."X-Mailer: PHP/" . phpversion());
if($mail)
{
echo 'OK';
}
} 
```

我想这就是你要找的..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T05:38:32.497

您可以使用

`define("EMAIL_SUBJECT", 'Contact Form Data')`

```
mail(WEBMASTER_EMAIL, EMAIL_SUBJECT, $message,
        "From: ".$name." \r\n"
        ."Reply-To: ".$email."\r\n"
        ."X-Mailer: PHP/" . phpversion()); 
```

# c - 在 C 中迭代地实现欧几里得算法

> ID：12967805
> 
> 赞同：1
> 
> 时间：2012-10-19T05:19:20.887
> 
> 标签：c, algorithm, iteration

我有两种使用迭代而不是递归的欧几里得算法的实现。一种是常见的：

```
void myXEuclid(int a, int b)
{
    int prevx = 1, x = 0;
    int prevy = 0, y = 1;
    int q, r;

    while (b)
    {
        q = a / b;
        r = a % b;

        int tmp = x;
        x = prevx - q * x;
        prevx = tmp;

        tmp = y;
        y = prevy - q * y;
        prevy = tmp;

        a = b;
        b = r;
    }
    printf("prevx = %d, prevy = %d\n", prevx, prevy);
} 
```

我真的不明白初始化来自哪里：

```
int prevx = 1, x = 0;
int prevy = 0, y = 1; 
```

无论如何，我仍然可以从上面的片段中得到正确的答案。但是在 RSA 算法中，当我做 A*B mod n = 1 时，我必须确保 B 是最小的非负数。所以这是欧几里得算法的下一个令人困惑的实现，也使用迭代：

```
int Euc(int A, int B)
{
    int a = A, b = B;
    int quotient, remainder, lastY;
    int x = 0, y = 1;

    int X = 1, Y = 1;

    while (a)
    {
        quotient = b / a;
        remainder = b % a;
        b = a;
        a = remainder;
        lastY = y;
        y *= quotient;

        if (X == Y)
        {
            if (x >= y)
            {
                y = x - y;
            } 
            else
            {
                y = y - x;
                Y = 0;
            }
        }
        else
        {
            y = x + y;
            X = 1 - X;
            Y = 1 - Y;
        }

        x = lastY;
    }

    if (X == 0)
    {
        x = B - x;
    }

    return x;
} 
```

我不知道大写变量 X 和 Y 的含义以及它们的初始化来自何处。但是上面的函数可以返回满足方程 A * x mod B = 1 的 x，它是最小的非负数。

我可以理解递归的。但不是迭代的。老实说，我已经好几天没睡好觉了。

我不是来自说英语的国家。因此，如果您能帮助我，请简单详细地解释一下。谢谢。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T12:24:17.633

这里稍微详细解释一下 GCD 算法和 C/C++ 中的不同实现

[http://512algorithms.blogspot.co.il/](http://512algorithms.blogspot.co.il/)

# ruby-on-rails - 使用 redirect_to 时传递参数

> ID：12967809
> 
> 赞同：2
> 
> 时间：2012-10-19T05:19:48.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的 Rails 控制器中，在一种方法中，我`redirect_to`对另一条路径（即另一种方法）进行了操作。我还想从第一种方法传递参数，以便第二种方法可以使用它们。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:22:17.727

你可以这样做

例如：

```
redirect_to new_user_url(@user) 
```

您可以在新用户页面中接收@user。

或者

```
redirect_to action_name_resource_path(resource_object, {:param_1 => 'value_1', :param_2 => 'value_2'}) 
```

或者

```
redirect_to new_users_path(request.parameters) 
```

# algorithm - 可以容纳 64 位大小整数的数字的完美幂（使用优先级队列）

> ID：12967810
> 
> 赞同：4
> 
> 时间：2012-10-19T05:19:48.710
> 
> 标签：algorithm, sorting, priority-queue

我们如何打印出所有可以表示为 64 位长整数的完美幂：4, 8, 9, 16, 25, 27, .... 完美幂是可以写成 ab 的整数 a并且b≥2。这不是作业问题，我在算法设计书的求职面试问题部分找到了它。提示，这一章是基于优先级队列的。

我的大多数想法本质上都是二次的，不断寻找能力，直到它们不再适合 64 位，但这不是面试官会寻找的。另外，我无法理解 PQ 在这里的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T06:38:47.970

使用一个小的优先级队列，每个电源一个条目，是列出数字的合理方法。请参阅以下 python 代码。

```
import Queue             # in Python 3 say:  queue
pmax, vmax = 10, 150
Q=Queue.PriorityQueue(pmax)
p = 2
for e in range(2,pmax):
    p *= 2
    Q.put((p,2,e))

print 1,1,2
while not Q.empty():
    (v, b, e) = Q.get()
    if v < vmax:
        print v, b, e
        b += 1
        Q.put((b**e, b, e)) 
```

使用上面代码中的 pmax、vmax，它会产生以下输出。对于建议的问题，将`pmax`and`vmax`替换为`64`and `2**64`。

```
1 1 2
4 2 2
8 2 3
9 3 2
16 2 4
16 4 2
25 5 2
27 3 3
32 2 5
36 6 2
49 7 2
64 2 6
64 4 3
64 8 2
81 3 4
81 9 2
100 10 2
121 11 2
125 5 3
128 2 7
144 12 2 
```

该方法的复杂度为 O(vmax^0.5 * log(pmax))。这是因为完美正方形的数量比完美立方体、四次方等的数量占主导地位，并且对于每个正方形，我们都进行 O(log(pmax)) 工作`get`并进行`put`排队操作。对于更高的功率，我们在计算时会做 O(log(pmax)) 工作`b**e`。

当 时`vmax,pmax =64, 2**64`，将有大约 2*(2^32 + 2^21 + 2^16 + 2^12 + ...) 队列操作，即大约 2^33 队列操作。

*添加注释：*此注释针对 cf16 的评论，“仅注释一条，我不认为“完美正方形的数量优于完美立方体的数量，四次方等。” 它们都是无限的。但是，是的，如果我们考虑有限集”。的确，在事物的整体数学方案中，基数是相同的。也就是说，如果`P(j)`是整数的所有`j`' 次幂的集合，则`P(j) == P(k)`所有整数的基数`j,k > 0`。任意两组幂的元素都可以相互一一对应。

然而，当*以升序*计算完美幂时，无论计算多少次，无论是否有限，传递平方的工作都超过了任何其他幂。对于任何给定的*x ，* *x*区域中的完美*k*^次幂的密度随着*k*的增加呈指数下降。随着*x的增加，* *x*区域中完美*k*^(次方)的密度与 ( *x* ^(1/k) )/ *x*成正比，因此随着*x*的增加，与平方相比，三次方、四次方等变得非常罕见。

 ***作为一个具体的例子，在 1e8 和 1e9 之间的完美幂中，(2; 3; 4; 5; 6) 次方的数量约为 (21622; 535; 77; 24; 10)。1e8 和 1e9 之间的平方数是任何高于平方数的实例的 30 倍以上。以下是两个数的完美平方数与更高完美幂数的比值：10¹⁰–10¹⁵，r≈301；10¹⁵–10²⁰，r≈2K；10²⁰–10²⁵，r≈15K；10²⁵–10³⁰，r≈100K。简而言之，随着*x*的增加，当完美的幂按升序传递时，正方形越来越占主导地位。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T07:05:01.827

优先级队列有助于，例如，如果您想避免输出中的重复，或者如果您想列出特别排序的值。

优先队列通常可以用排序代替，反之亦然。因此，您可以生成 a ^b的所有组合，然后对结果进行排序并删除相邻的重复项。在这个应用程序中，这种方法似乎有点轻微但可能不会像[姐妹答案之一](https://stackoverflow.com/a/12967979/1235565)所见证的那样显着降低内存效率。

如果您设法在执行过程中删除重复项，则优先级队列可能优于排序；或者如果您想避免存储和处理要在内存中生成的整个结果。[另一个姐妹的答案](https://stackoverflow.com/a/12968703/1235565)是后者的一个例子，但只要稍作修改，它就可以很容易地做到这两点。

在这里，一个数组占用了大约 16 GB 的 RAM，而一个少于 64 个项目的队列在最坏的情况下占用了几千字节。如此巨大的内存消耗差异也转化为 RAM 访问时间与缓存访问时间的差异，因此即使底层数据结构通过维护自身而产生一些开销并且与朴素算法相比需要更多指令，但内存精简算法最终可能会更快使用排序。

因为输入的大小是固定的，所以从技术上讲，您想到的方法本质上是二次方的，这在技术上是不可能的。有两个嵌套循环不会使算法成为二次的，直到你可以说每个这样的循环的上限与输入大小成正比，甚至通常不是这样）。真正重要的是最里面的逻辑实际执行了多少次。

在这种情况下，竞争是在可行常数和不可行常数之间进行的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T05:37:19.777

我可以看到优先级队列有意义的唯一方法是，您希望在数字可用时以严格递增的顺序打印数字，当然不要两次打印任何数字。因此，您从一个素数生成器开始（它使用 Eratosthenes 筛或一些更智能的技术来生成序列 2、3、5、7、11，...）。您首先将表示 2^2 = 4 的三元组放入队列中。然后你重复一个过程，从队列中删除最小的项目（具有最小求幂结果的三元组），打印它，将指数加一，然后将它放回队列（其优先级由新的结果确定）取幂）。您可以将此过程与根据需要生成新素数的过程交错（有时在输出 p^2 之前）。

由于我们可能拥有的最大指数基数是 2^32 (2^32)^2 = 2^64，因此队列中的元素数不应超过小于 2^32 的素数数，[显然是 203,280,221](http://www.math.niu.edu/~rusin/known-math/98/pi_x)，我猜这是一个易于处理的数字。***

# sql - 不使用 UNION 重写查询

> ID：12967812
> 
> 赞同：0
> 
> 时间：2012-10-19T05:19:54.610
> 
> 标签：sql

我正在从 4 个表中读取值

```
select '1' as htl_EventId,  
    'Reading Records' + cast(rank() OVER (ORDER BY ReadingRecord_Id) as varchar)  as htl_EventTitle, 
     dateadd(dd,01,Reading_Date) as htl_StartDate ,dateadd(dd,01,Reading_Date) as htl_EndDate,'White' as htl_Colour,'ForestGreen' as htl_TextColour,'This is your Reading  no ' + cast(rank() OVER (ORDER BY ReadingRecord_Id) as varchar) as htl_EventDescription,
     'http://google.co.in' as htl_UrlValue
     from Reading_Records where User_Id=@UserID and Reading_Date between 
     convert(date, @StartDate, 103) and convert(date, @EndDate, 103) 
     --order by Start_Date ASC
    --('#' + cast((select ABS(CHECKSUM(NEWID())) % 900000000 + 100000000) as nvarchar)) as htl_Colour,
    union 

    select '2' as htl_EventId,  
    'Incident Details' + cast(rank() OVER (ORDER BY Incident_Id ) as varchar)  as htl_EventTitle, 
     dateadd(dd,01,From_Date) as htl_StartDate ,dateadd(dd,01,coalesce(To_Date,from_Date)) as htl_EndDate,'maroon' as htl_Colour,'Black' as htl_TextColour, 'This is your Incident  no ' + cast(rank() OVER (ORDER BY Incident_Id ) as varchar) as htl_EventDescription,
     'http://gmail.co.in' as htl_UrlValue
     from User_Incidents where User_Id=@UserID and From_Date >= 
     convert(date, @StartDate, 103) and To_Date <= convert(date, @EndDate, 103) and status='True'
     --order by From_Date ASC

     union 

     select '3' as htl_EventId,  
    'HealthConditions' + cast(rank() OVER (ORDER BY Condition_Id ) as varchar)  as htl_EventTitle, 
     dateadd(dd,01,Start_MonthYear) as htl_StartDate ,dateadd(dd,01,Start_MonthYear) as htl_EndDate,'maroon' as  htl_Colour,'Red' as  htl_TextColour,'This is your HealthCondition  no ' + cast(rank() OVER (ORDER BY Condition_Id ) as varchar) as htl_EventDescription,
     'http://facebook.com' as htl_UrlValue
     from User_Health_Condition where User_Id=@UserID and Start_MonthYear between 
     convert(date, @StartDate, 103) and convert(date, @EndDate, 103) and status='True'
     order by 1 ASC 
```

请给点建议？先感谢您 。我需要为上述再添加一个查询

```
select '1' as htl_EventId, 
 dateadd(dd,01,Reading_Date) as htl_StartDate ,dateadd(dd,01,Reading_Date) as htl_EndDate,DR.Reading_Name as htl_ReadingName
 from Reading_Records RR LEFT OUTER JOIN DBO.[Defined_Readings] DR  ON RR.Reading_Id=DR.Reading_Id  where User_Id=@UserID 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:56:31.453

使用表变量[http://msdn.microsoft.com/en-us/library/ms188927.aspx](http://msdn.microsoft.com/en-us/library/ms188927.aspx)

```
DECLARE @temp TABLE 
(
    htl_EventId INT, 
    htl_EventTitle, 
    ...,
    ...
)

INSERT INTO @temp 
select '1' as htl_EventId,  
    'Reading Records' + cast(rank() OVER (ORDER BY ReadingRecord_Id) as varchar)  as htl_EventTitle, 
     dateadd(dd,01,Reading_Date) as htl_StartDate ,dateadd(dd,01,Reading_Date) as htl_EndDate,'White' as htl_Colour,'ForestGreen' as htl_TextColour,'This is your Reading  no ' + cast(rank() OVER (ORDER BY ReadingRecord_Id) as varchar) as htl_EventDescription,
     'http://google.co.in' as htl_UrlValue
     from Reading_Records where User_Id=@UserID and Reading_Date between 
     convert(date, @StartDate, 103) and convert(date, @EndDate, 103) 

INSERT INTO @temp
select '2' as htl_EventId,  
    'Incident Details' + cast(rank() OVER (ORDER BY Incident_Id ) as varchar)  as htl_EventTitle, 
     dateadd(dd,01,From_Date) as htl_StartDate ,dateadd(dd,01,coalesce(To_Date,from_Date)) as htl_EndDate,'maroon' as htl_Colour,'Black' as htl_TextColour, 'This is your Incident  no ' + cast(rank() OVER (ORDER BY Incident_Id ) as varchar) as htl_EventDescription,
     'http://gmail.co.in' as htl_UrlValue
     from User_Incidents where User_Id=@UserID and From_Date >= 
     convert(date, @StartDate, 103) and To_Date <= convert(date, @EndDate, 103) and status='True'

INSERT INTO @temp
select '3' as htl_EventId,  
    'HealthConditions' + cast(rank() OVER (ORDER BY Condition_Id ) as varchar)  as htl_EventTitle, 
     dateadd(dd,01,Start_MonthYear) as htl_StartDate ,dateadd(dd,01,Start_MonthYear) as htl_EndDate,'maroon' as  htl_Colour,'Red' as  htl_TextColour,'This is your HealthCondition  no ' + cast(rank() OVER (ORDER BY Condition_Id ) as varchar) as htl_EventDescription,
     'http://facebook.com' as htl_UrlValue
     from User_Health_Condition where User_Id=@UserID and Start_MonthYear between 
     convert(date, @StartDate, 103) and convert(date, @EndDate, 103) and status='True'

INSERT INTO @temp
select '1' as htl_EventId, 
 dateadd(dd,01,Reading_Date) as htl_StartDate ,dateadd(dd,01,Reading_Date) as htl_EndDate,DR.Reading_Name as htl_ReadingName
 from Reading_Records RR LEFT OUTER JOIN DBO.[Defined_Readings] DR  ON RR.Reading_Id=DR.Reading_Id  where User_Id=@UserID

SELECT * FROM @temp 
```

# android - Android：是否可以重新定位语音识别弹出窗口？

> ID：12967816
> 
> 赞同：6
> 
> 时间：2012-10-19T05:20:16.390
> 
> 标签：android, voice-recognition

我刚刚完成了我的语音识别应用程序，它运行良好。通过语音向用户提供问题和答案。

一件烦人的事情是，语音识别窗口会在电话屏幕顶部附近弹出，如果它稍微低一点就更​​好了，这样它就不会掩盖问题的文本。

是否可以以编程方式执行此操作？

===

附加信息：

谢谢，DroidBee。我正在使用以下代码来调用语音识别引擎：

```
private void startVoiceRecognitionActivity()
{
  Intent intent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
  intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
        RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
  intent.putExtra(RecognizerIntent.EXTRA_PROMPT, "Voice recognition Demo...");
  startActivityForResult(intent, REQUEST_CODE);
} 
```

我从教程中获得了这部分代码，而不是自己制作。我看不到任何指定窗口或弹出窗口的地方。

这是主要活动，我也使用过：import android.speech.RecognizerIntent;

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:50:51.113

通过看到这个问题，我了解到您对用于执行操作的窗口的定位有问题。但是您还没有指定您使用的是哪一个。**（对话框、弹出窗口等）**

如果您使用的是弹出窗口，则必须根据您必须设置窗口的位置来设置锚点。

如果您能解释所使用的窗口类型，可能会很容易。**:)**

快乐编码..!!

# java - 在java中向桌面应用程序发送推送通知

> ID：12967825
> 
> 赞同：1
> 
> 时间：2012-10-19T05:21:24.443
> 
> 标签：java, multithreading, jsp, servlets, httpclient

这是我的应用场景...

1.  用户请求登录并将凭据发送到 Web 服务器（从使用 httpClient API 的桌面应用程序）。

2.  Servlet(tomcat) 验证用户并发送有效或无效的用户信息。如果用户是注册用户，servlet 会在服务器上保存 IP 地址。

3.  现在我必须在没有收到另一个请求的情况下向用户发送一些文本（即服务器推送技术）。我怎样才能完成这个功能并使用什么技术？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:56:45.220

我会保持与服务器的连接，因为其他解决方案要求您实现在客户端中运行的服务器并且客户端具有公共 IP 地址。

在 chrome 中，您可以使用[背景页面](http://developer.chrome.com/extensions/background_pages.html)来保持连接，以便您可以关闭浏览器。使用来自后台页面的[桌面通知。](http://developer.chrome.com/extensions/notifications.html)其他浏览器使用其他技术。作为后备，您需要打开页面。

现在推。我最喜欢的是使用[网络套接字](http://www.websocket.org/)。但是还有其他几种技术可以做到这一点。[如果您需要更多信息， Comet](http://en.wikipedia.org/wiki/Comet_%28programming%29)是一个不错的起点。

如果仍然想使用在每个客户端上运行的服务器组件的其他解决方案。您将必须实现一个独立的客户端。这是你想要的吗？

# php - 从 PHP 空间问题下载 CSV

> ID：12967826
> 
> 赞同：0
> 
> 时间：2012-10-19T05:21:45.187
> 
> 标签：php, csv, download

每当有一个`space`名称为 CSV 文件时，`xyz abc.csv`我们都面临通过 PHP 代码下载的问题，而其他 CSV 文件中没有空间，可以正常工作并正常下载。

下面是我的下载代码：

```
$file_path = 'http://www.servername.com/subfolder/subfolder/';
$file = urlencode('Today new_18-10-2012_21-13-21.csv');

header('Content-Type: application/csv');
header('Content-Disposition: attachment; filename="'.$file.'"');
header('Pragma: no-cache');
readfile($file_path.$file); 
```

当文件被下载时，它总是`0 bytes`在原始文件`93kb`大小的时候

任何关于这个麻烦的建议。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T06:26:40.490

使用此代码。它可能对你有帮助。但我认为主要问题是间距。

```
$Filename = 'Today new_18-10-2012_21-13-21.csv'; 
$path = "http://www.servername.com/subfolder/subfolder/";
$file = $path.$filename;
header("Cache-Control: public");
header("Content-Description: File Transfer");
header("Content-Disposition: attachment; filename=$filename");
header("Content-Type: application/csv");
header("Content-Transfer-Encoding: binary");
readfile($file); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T07:22:40.580

试试这个......你必须使用`rawurlencode`而不是`urlencode`.

```
$file_path = 'http://www.servername.com/subfolder/subfolder/';

//just filename, no need to save file with url encoded name!
$file = 'Today new_18-10-2012_21-13-21.csv';

header('Content-Type: application/csv');
header('Content-Disposition: attachment; filename="' . $file . '"');
header('Pragma: no-cache');

//here comes url encoding
readfile($file_path . rawurlencode($file)); 
```

*它对我来说工作得很好......*

# sapb1 - 是否可以使用 SAPb1 Testcomposer 进行数据驱动测试？

> ID：12967833
> 
> 赞同：17
> 
> 时间：2012-10-19T05:22:20.330
> 
> 标签：sapb1

是否可以使用 SAPb1 Test Composer 自动化工具进行数据驱动测试，而不是每次都更改脚本以进行新的更新。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T20:43:42.940

不，这不受支持。

1）您可以使用自定义操作从Excel工作表中读取数据并在脚本中使用；

2) 脚本只不过是 XML 文件，因此您可以创建一个工具来重现该 XML 并更改必要的数据；

3) 获取 Test Composer 的源代码并将其更改为考虑到带有数据的 Excel 表。

# spring-security - Spring Security 注销确认

> ID：12967836
> 
> 赞同：0
> 
> 时间：2012-10-19T05:22:36.123
> 
> 标签：spring-security, jsp-tags, logout

使用 Spring Security 显示确认注销提示的最佳方式是什么？

我有一个 webapp，我可以成功调用注销等... Spring Sec 配置然后将用户重定向回登录页面，但我没有办法检测到这是一个注销来提示用户确认已成功登出。

有什么建议吗？

下面是我的 Spring 配置

```
<http auto-config="true" use-expressions="true">
    <http-basic />
    <remember-me user-service-ref="myDAO" />
    <form-login login-page="/" authentication-failure-url="/?login_error=1" default-target-url="/dashboard"
        always-use-default-target="true" />
    <logout invalidate-session="true" />
</http> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T18:34:14.690

您可以向 logout-success-url 添加参数，然后在登录页面上检查它们，如下所示：

```
<logout logout-success-url="/?logout=success"/> 
```

并在您的页面上：

```
<c:if test="${param['logout'] == 'success'}">
    <div id="info-box">
        <p>You have been successfully logged out.</p>
    </div>
</c:if> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:34:08.233

所以有很多方法可以解决这个问题。

一种明显的方法是拥有自己的注销过滤器和注销处理程序。

我希望Spring论坛上的这个帖子能解决你的问题

[http://forum.springsource.org/showthread.php?59277-Custom-Logout-Handler&p=236175#post236175](http://forum.springsource.org/showthread.php?59277-Custom-Logout-Handler&p=236175#post236175)

# android - 如何通过机器人自动化单击位于 ListView 中位置 2 的按钮？

> ID：12967839
> 
> 赞同：0
> 
> 时间：2012-10-19T05:22:39.120
> 
> 标签：android, robotium

我想自动化一个场景，比如单击一个按钮，该按钮位于 ListView 中的位置 2。PFB 代码它会自动单击 ListView 中索引 1 处的按钮

```
TextView a = (TextView)solo.getView(R.id.dialog);
solo.clickOnView(a); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:37:46.183

你有那个按钮的特定 id。为该按钮设置标签`setTag()`，然后设置点击事件:: like

```
 getView((int position, View convertView, ViewGroup parent) {
    View view = convertView;
    if (view == null) {
          LayoutInflater inflater = context.getLayoutInflater();
             // use inflater and do all those normal things..
    }
   view.setTag(position);
   myButton.setTag(view.getTag());          
   myButton.setOnClickListener(new View.OnClickListener() {
         public void onClick(View v) {
           Toast.makeText(getContext()," Slot Button clicked " +  v.getTag(),Toast.LENGTH_SHORT).show();
        }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:40:41.247

为什么不在 ListViews 项上使用**performClick()**方法，如下所示：

```
 ((Button)((View) listView.get(1)).findViewById(R.id.mybutton)).performClick(); 
```

如果你只想制作 itemClick，你应该使用**ListView**的**onItemCkick()**

# html - 对齐表格中文本和图像的位置

> ID：12967841
> 
> 赞同：0
> 
> 时间：2012-10-19T05:22:44.427
> 
> 标签：html, css

我有我的 html 标记这样的东西

```
 <table>
    <tr>
      <td>
        <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="images/img-1.jpg">
        <h3>Battle Field dsvadv dsadhjkba dsakjdbsa</h3>
        <span class="price"><del><span class="amount">$&nbsp;67.00</span></del> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
        <a href="#">Add to cart</a>
      </td>
      <td>
        <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="images/img-2.jpg">
        <h3>Battle Field </h3>
        <span class="price"><del><span class="amount">$&nbsp;67.00</span></del> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
        <a href="#">Add to cart</a>
      </td>
    </tr>
  </table> 
```

而css是这样的

```
<style type="text/css">
table tr td {
  vertical-align: top;
  border-collapse: collapse;
  width: 100px;
}
td img {
  padding: 10px;
  border: 1px solid #ccc;
}
td h3 {
  font-size: 12px;
  line-height: 22px;
  text-align: center;
  margin: 0;
}
td span {
  display: inline-block;
  font-size: 12px;
}
td a {
  clear: both;
  display: block;
  vertical-align: bottom;
  margin: 20px 0 0 0;
}
</style> 
```

在此之后我的布局是这样的

![现在的布局是这样的](../Images/4c19e0a03292a9d1bfb4c1a51989f6ea.png)

但我希望我的布局应该是这样的

![我想要这种类型的布局](../Images/b4005009ccf4477b7f77114c82a070a3.png)

请帮帮我。

**笔记**

在不同的产品中，文本长度内的标题`<h3>...</h3>`可能会有所不同。所以价格应该在标题下方，按钮应该在一条直线上，即在内容的底部，就像第二个参考图像一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:43:18.600

只需创建另一个`<tr>`并将按钮移动到`<tr>`.

```
<table>
<tr>
  <td>
    <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="y5g17.png">
    <h3>Battle Field dsvadv dsadhjkba dsakjdbsa</h3>
    <span class="price"><del><span class="amount">$&nbsp;67.00</span></del> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
  </td>
  <td>
    <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="y5g17.png">
    <h3>Battle Field </h3>
    <span class="price"><del><span class="amount">$&nbsp;67.00</span></del> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
  </td>
</tr>
<tr>
    <td><a href="#">Add to cart</a></td>
    <td><a href="#">Add to cart</a></td>
</tr>
</table> 
```

这是您现有代码最简单的方法。

另一种方法是使用`div's`而不是表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:39:57.133

一个简单的解决方案是将您的内容分成多行。所有图片都在第一行，标题在第二行，金额在下一行，依此类推。请参考以下代码：

```
<table>
<tr>
    <td>
        <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="images/img-1.jpg">
    </td>
    <td>
        <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="images/img-2.jpg">
    </td>
</tr>

<tr>
    <td>
        <h3>Battle Field dsvadv dsadhjkba dsakjdbsa</h3>
    </td>
    <td>
        <h3>Battle Field </h3>
    </td>
</tr>

<tr>
    <td>
        <span class="price"><del><span class="amount">$&nbsp;67.00</span></del> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
    </td>
    <td>
        <span class="price"><del><span class="amount">$&nbsp;67.00</span></del> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
    </td>
</tr>

<tr>
    <td>
        <a href="#">Add to cart</a>
    </td>
    <td>
        <a href="#">Add to cart</a>
    </td>
</tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T05:44:44.267

......***[现场演示](http://tinkerbin.com/ebB8dl04)***......

嗨，现在这**可能会抛出 css**，因为现在您可以创建**两个 div**并习惯于使用`position`它**并**定义**您**的`tr height 100%`

现在你可以像这样**写 css**

**CSS**

```
table tr{
height:100%;
}
table tr td {
  vertical-align: top;
  border-collapse: collapse;
  width: 100px;
  height:100%;
}
td img {
  padding: 10px;
  border: 1px solid #ccc;
}
td h3 {
  font-size: 12px;
  line-height: 22px;
  text-align: center;
  margin: 0;
}
td span {
  display: inline-block;
  font-size: 12px;
}
td a {
  clear: both;
  display: block;
  vertical-align: bottom;
  margin: 20px 0 0 0;
}

.order{
position:relative;
  border:solid 1px red;
  height:100%;
  margin-bottom:20px;
}
.add_to_cart{
background:yellow;
  position:absolute;
  left:0;
  right:0;
  bottom:0;
} 
```

**HTML**

```
<table>
    <tr>
      <td>
        <div class="order">
        <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="http://www.gravatar.com/avatar/f20d2122fec97d8544bdbb998f5da742?s=32&d=identicon&r=PG">
        <h3>Battle Field dsvadv dsadhjkba dsakjdbsa</h3>
        <span class="price"><del><span class="amount">$&nbsp;67.00</span></del> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
        <a href="#" class="add_to_cart">Add to cart</a>
          </div>
      </td>
      <td>
        <div class="order">
        <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="http://www.gravatar.com/avatar/f20d2122fec97d8544bdbb998f5da742?s=32&d=identicon&r=PG">
        <h3>Battle Field </h3>
        <span class="price"><del><span class="amount">$&nbsp;67.00</span></del> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
          <a href="#" class="add_to_cart">Add to cart</a></div>
      </td>
    </tr>

        <tr>
      <td>
        <div class="order">
        <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="http://www.gravatar.com/avatar/f20d2122fec97d8544bdbb998f5da742?s=32&d=identicon&r=PG">
        <h3>Battle Field dsvadv dsadhjkba dsakjdbsa</h3>
        <span class="price"><del><span class="amount">$&nbsp;67.00</span></del> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
        <a href="#" class="add_to_cart">Add to cart</a>
          </div>
      </td>
      <td>
        <div class="order">
        <img width="100" height="140" title="battlefield" alt="battlefield" class="attachment-shop_catalog wp-post-image" src="http://www.gravatar.com/avatar/f20d2122fec97d8544bdbb998f5da742?s=32&d=identicon&r=PG">
        <h3>Battle Field </h3>
        <span class="price"><del><span class="amount">$&nbsp;67.00</span></del> <ins><span class="amount">$&nbsp;23.00</span></ins></span>
          <a href="#" class="add_to_cart">Add to cart</a></div>
      </td>
    </tr>
  </table> 
```

**[现场演示](http://tinkerbin.com/ebB8dl04)**

# sql-server - 如何将 Nvarchar 列转换为 INT

> ID：12967843
> 
> 赞同：25
> 
> 时间：2012-10-19T05:22:52.383
> 
> 标签：sql-server, sqldatatypes, type-conversion

我的`nvarchar`一张桌子上有一个专栏。现在我需要将该列值转换为`INT`类型..

我试过使用

```
cast(A.my_NvarcharColumn as INT) 
```

和

```
convert (int, N'A.my_NvarcharColumn') 
```

当我运行我的查询时，我收到了类似的错误

> *将 nvarchar 值“23454542”转换为数据类型 int 时转换失败。*

嗨，我正在发布我的整个代码片段

```
SELECT A.objID, name, des,  right(Replace(Ltrim(Replace(substring(my_nvarcharcolumn,1,9), '0', ' ')), ' ', '0'),10) AS new_nvarcharcolumn 
INTO #tmp1
FROM [database].[dbo].[tblname] AS A
INNER JOIN (SELECT * FROM [database].[dbo].tblname1 WHERE sourceID = 32) AS AI ON source = A.objID
INNER JOIN [database].[dbo].tblname2 AS I ON I.ObjectID = A.Source

SELECT MAX(m_dAddDate) AS date_Asof, dnum INTO #tmp2 FROM 
(SELECT * FROM [database].[dbo].tblname WHERE senior <> '' AND class = 'SSS') AS A
GROUP BY dnum

SELECT DISTINCT A.* INTO #tmp3 FROM #tmp1 AS A
INNER JOIN #tmp2 AS SD ON SD.dnum =cast(A.new_nvarcharcolumn as INT)
INNER JOIN database.[dbo].tbl4 AS M ON M.dnum = cast(A.new_nvarcharcolumn as INT)  AND SD.date_Asof = M.adddate 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-19T05:27:05.873

`CONVERT`接受列名，而不是包含列名的字符串；您当前的表达式尝试将字符串转换`A.my_NvarcharColumn`为整数而不是列内容。

```
SELECT convert (int, N'A.my_NvarcharColumn') FROM A; 
```

应该改为

```
SELECT convert (int, A.my_NvarcharColumn) FROM A; 
```

简单的 SQLfiddle[在这里](http://sqlfiddle.com/#!6/24d46/2)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-19T05:27:39.723

您始终可以使用`ISNUMERIC`辅助函数仅转换真正的数字：

```
SELECT
     CAST(A.my_NvarcharColumn AS BIGINT)
FROM 
     A
WHERE
     ISNUMERIC(A.my_NvarcharColumn) = 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T05:30:45.660

您的 CAST() 看起来是正确的。

您的 CONVERT() 不正确。您将列作为字符串引用。你会想要类似的东西

```
CONVERT(INT, A.my_NvarcharColumn) 
```

** 不带引号的通知 **

这可能失败的唯一其他原因是字段值中有非数字字符或超出范围。

您可以尝试以下方法来验证它是否为数字，如果不是则返回 NULL：

```
SELECT
 CASE
  WHEN ISNUMERIC(A.my_NvarcharColumn) = 1 THEN CONVERT(INT, A.my_NvarcharColumn)
  ELSE NULL
 END AS my_NvarcharColumn 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-07T15:54:57.397

我知道它为时已晚，但我希望它会起作用新来者试试这个它的工作......：D

```
select 
  case 
      when isnumeric(my_NvarcharColumn) = 1 then 
              cast(my_NvarcharColumn AS int)
      else
              NULL
 end

AS 'my_NvarcharColumnmitter'
from A 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-14T23:38:18.710

如果你想从 char 转换为 int，为什么不考虑**unicode**数字呢？

```
SELECT UNICODE(';') -- 59 
```

这样，您可以将任何 char 转换为 int 而不会出现任何错误。干杯。

# windows-mobile - 如何解码大数据二维码图像？

> ID：12967848
> 
> 赞同：1
> 
> 时间：2012-10-19T05:23:01.480
> 
> 标签：windows-mobile, decode, qr-code

我在window 7移动应用程序中创建了一个扫描二维码图像的应用程序，但我的问题是类似内容类型的URL被成功解码，但是关于人或大文本的信息没有解码，它会导致渲染异常.

我的代码如下：

```
 private void ScanPreviewBuffer()
    {
        try
        {
            _photoCamera.GetPreviewBufferY(_luminance.PreviewBufferY);
            var binarizer = new HybridBinarizer(_luminance);
            var binBitmap = new BinaryBitmap(binarizer);
            var result = _reader.decode(binBitmap);
            Dispatcher.BeginInvoke(() => DisplayResult(result.Text));
        }
        catch(Exception ex)
        {
            ex.ToString();

        }
    }

    public class PhotoCameraLuminanceSource : LuminanceSource
    {
        public byte[] PreviewBufferY { get; private set; }

        public PhotoCameraLuminanceSource(int width, int height)
            : base(width, height)
        {
            PreviewBufferY = new byte[width * height];
        }

        public override sbyte[] Matrix
        {
            get { return (sbyte[])(Array)PreviewBufferY; }
        }

        public override sbyte[] getRow(int y, sbyte[] row)
        {
            if (row == null || row.Length < Width)
            {
                row = new sbyte[Width];
            }

            for (int i = 0; i < Height; i++)
                row[i] = (sbyte)PreviewBufferY[i * Width + y];

            return row;
        } 
```

此代码在解码具有大量数据的二维码图像时会导致渲染异常。它有什么问题？

# c++ - C++ 编译错误：架构 x86_64 的未定义符号

> ID：12967850
> 
> 赞同：3
> 
> 时间：2012-10-19T05:23:10.533
> 
> 标签：c++, xcode, build, 64-bit

我很难编译这个。我认为它与静态变量有关，但我不是 100% 确定我在做什么。这是我不断收到的错误消息：

> 架构 x86_64 的未定义符号：“Counter::nCounters”，引用自：main.o 中的 Counter::Counter(int, int)
> 
> 计数器::getNCounters() 在 main.o
> 
> Counter::Counter(int, int) 在 Counter.o
> 
> Counter::getNCounters() 在 Counter.o
> 
> ld：未找到架构 x86_64 的符号
> 
> clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

这是头文件：

```
#ifndef project1_Counter_h
#define project1_Counter_h

class Counter
{
private:
int counter;
int limit;
static int nCounters;

public:
Counter(int, int);
void increment();
void decrement();
int getValue();
static int getNCounters();
};

#endif 
```

这是 .cpp 文件：

```
#include "Counter.h"

Counter::Counter(int a, int b)
{
counter = a;
limit = b;
nCounters++;
}

void Counter::increment()
{
if (counter < limit)
    counter++;
}

void Counter::decrement()
{
if (counter > 0)
    counter--;
}

int Counter::getValue()
{
return counter;
}

int Counter::getNCounters()
{    
return nCounters;
} 
```

而 main.cpp 只是一个简单的 Hello World 程序。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T05:25:32.410

我相信你需要用一个值初始化 nCounters 。

尝试添加

```
int Counter::nCounters = 0; 
```

类之外的某个地方，或将其初始化为：

```
static int nCounters = 0; 
```

反而。

# arrays - 指向指针的指针数组 二维数组

> ID：12967851
> 
> 赞同：2
> 
> 时间：2012-10-19T05:23:17.467
> 
> 标签：arrays, pointers, multidimensional-array

我试图在一个函数调用中创建一个连续的内存块，该函数调用将内存的第一部分作为指向其他块的指针数组。尽管我想使用紧凑指针，但该函数使用索引表示法

```
Type **TwoD(size_t rows, size_t cols) 
{
    Type **p1, **prows, *pcol;

    p1 = (Type **)malloc(rows * sizeof(Type *) + rows * cols * sizeof(Type));

//  ??? something wrong here ??? I'd rather use this style if possible
//  
    //index notation works

    return prows;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:42:32.593

The value of prows returned is different.

prows is changed in this case:

```
//  for (; prows < (Type **)pcol; ++prows, pcol += cols)
//      *prows = pcol;
return prows; 
```

while the other case, no change of prows (which is still p1):

```
for (unsigned ii = 0; ii < rows; ++ii)
{
   prows[ii] = pcol;
   pcol += cols;
}
return prows; 
```

So, what you can do is at the end return p1 instead of prows.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:58:35.167

试试这个：

```
// ======i make change here=========================
// =====================V===========================
for (; prows < (Type **)&pcol; ++prows, pcol += cols)
    *prows = pcol;

return p1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T06:00:13.753

我认为二维数组有点复杂。我总是使用一维数组来表示二维数组，例如：

```
typedef int Type; // for simplicity, assume int

Type *TwoD(size_t rows, size_t cols) {
    Type *array = (Type*)malloc(rows * cols * sizeof(Type));
    Type *p = array;
    Type counter = 0;
    for (size_t row = 0; row < rows; row++) {
        for (size_t col = 0; col < cols; col++) {
            *p++ = counter++;
        }
    }
    return array;
}

/* The array will look like this, for rows=3, cols=4:
0  1  2  3
4  5  6  7
8  9 10 11
*/ 
```

在上面的例子中，我使用了一个计数器来初始化数组，但是你可以做不同的事情。

# android - ZoomtoSpan Android 的实现

> ID：12967852
> 
> 赞同：-1
> 
> 时间：2012-10-19T05:23:27.153
> 
> 标签：android, google-maps, zooming

有没有办法在不是谷歌地图的安卓自定义地图中实现 zoomToSpan 功能。?

假设我有一个扩展 SurfaceView 的 M 类（我正在将我的自定义地图加载到 SurfaceView 上），我的程序中没有功能来处理当有超过 10 个标记时相应地自动设置缩放级别。我想相应地设置我的缩放级别。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:35:49.600

在这里，我在一组点上找到了缩放和跨度的一个基本示例 [http://www.anddev.org/zoom_and_span_on_a_cluster_of_points-t464.html](http://www.anddev.org/zoom_and_span_on_a_cluster_of_points-t464.html)

如果你想处理缩放控制器，你应该使用一个定时器，它会每 5 秒检查一次你的缩放级别（它的工作原理像缩放控制监听器一样微笑）。

祝你好运 ！！

# android - 必须下载什么手势文件，应该怎么做？

> ID：12967858
> 
> 赞同：2
> 
> 时间：2012-10-19T05:24:35.110
> 
> 标签：android, gesture, android-gesture

应该下载什么手势文件并将其粘贴到 res 下的 Raw 文件夹中？如何从已下载的手势文件中识别用户绘制的手势。谁能告诉我这个？

如果我进行比较，我应该能够了解手势及其在已下载的手势文件中的描述。这将是识别手势库中手势（用户绘制）的最简单方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:47:09.523

在 android 模拟器中打开手势生成器应用程序然后 --> 单击添加手势 --> 在此处绘制您想要用于您的应用程序的手势。添加手势后，转到您的 Eclipse IDE --> 打开 ddms --> 打开文件资源管理器。

在文件资源管理器中有一个名为 mnt/sdcard/gestures 的文件夹，您可以找到您的手势文件。现在将该文件复制到您想要使用该手势操作的 Raw 文件夹中的项目中。

在那之后

```
 private GestureLibrary gestureLib;
private static final int LARGE_MOVE = 20;
private GestureDetector gestureDetector;

make your class implements OnGesturePerformedListener

//put following code inside your on create method

GestureOverlayView gestureOverlayView = new GestureOverlayView(this);
        View inflate = getLayoutInflater().inflate(your layout file, null);
        gestureOverlayView.addView(inflate);
        gestureOverlayView.setGestureColor(Color.TRANSPARENT);
        gestureOverlayView.setUncertainGestureColor(Color.TRANSPARENT);
        gestureOverlayView.setGestureStrokeLengthThreshold(LARGE_MOVE);
        gestureOverlayView.setGestureStrokeSquarenessTreshold(1);
        gestureOverlayView.addOnGesturePerformedListener(this);
        gestureOverlayView.setEventsInterceptionEnabled(true);

        try{
            gestureDetector = new GestureDetector(your class name.this, new SimpleOnGestureListener() {
                 @Override
                 public boolean onFling(MotionEvent e1, MotionEvent e2,float velocityX, float velocityY){

                     if (e1.getX() - e2.getX() > LARGE_MOVE) {

                        // do some thing here

                         return true;
                     } else if (e2.getX() - e1.getX() > LARGE_MOVE) {

                        // do some thing here 

                         return true;
                    }
                    return false;
                    } });
            }catch(NullPointerException e){
                e.printStackTrace();
            } 
```

希望这对你有用。快乐编码

# objective-c - 目标 C 浮动和除法

> ID：12967861
> 
> 赞同：0
> 
> 时间：2012-10-19T05:25:09.690
> 
> 标签：objective-c

嗨，我对使用浮点数进行除法有很大疑问，这里是测试代码::

```
- (void)chuza
{

    float option1 = 0;
    float option2 = 0;

    option1 = 100/50;
    option2 = 50/100;

    NSLog(@"option1 :: %f",option1);
    NSLog(@"option2 :: %f",option2);

} 
```

所以，我得到：

```
2012-10-19 16:21:45.405 Project[2023:14f03] option1 :: 2.000000
2012-10-19 16:21:45.405 Project[2023:14f03] option2 :: 0.000000 
```

所以我的问题是：为什么浮动会像什么时候一样

> 分母 > 分子

但不喜欢

> 分子>分母？？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-19T05:31:28.513

对我来说，这看起来很像[整数除法](http://en.wikipedia.org/wiki/Division_%28mathematics%29#Division_of_integers)，因为您要除以两个整数。将两个整数相除时（在大多数编程语言中，如果不是全部的话）会忽略除法的余数。

想想这条线是如何被评估的。首先计算整数除法，然后将整数结果转换为浮点数以存储在浮点变量中。

*请注意，整数根本不存储任何小数，因此即使 0.999 作为整数也是 0。四舍五入不是问题。*

*这也不是关于分母大于分子的问题。尝试除以 100/30，结果将是 3，而不是 3.33333.. 就像浮点除法一样。*

您可以通过将数字转换为浮点数或确保它们是浮点数来解决此问题。

## 铸件

```
option2 = ((float)50/(float)100); 
```

## 分割花车

```
option2 = 50.0f/100.0f; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T05:31:21.027

浮点数也不`100`是`50`，它们是整数。这意味着您正在进行整数除法并将结果分配给浮点变量。由于整数除法会截断（丢弃小数结果），因此`50/100`产生`0`. 100 可以被 50 整除，这就是你得到`2.000000`结果的原因。`75`用and试试你的程序`100`，你会发现除了部门的发展方向之外，还有更多的工作要做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-19T05:31:11.737

它将您的数字视为整数，执行除法，然后将结果放入浮点数中。

试试这个选项2 = 50.0f/100;

# java - 如何在撰写邮件功能中将表面视图与媒体记录器连接起来

> ID：12967875
> 
> 赞同：1
> 
> 时间：2012-10-19T05:26:29.160
> 
> 标签：java, android, xml

我在里面创建了一个撰写邮件功能，我设计了一个表面视图选项来使用移动相机录制视频，但它会强制关闭应用程序。但它适用于单独的应用程序。为什么我不能将两者集成到一个应用程序中？

这是我的代码

主要的.xml

```
 <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:weightSum="1">
    <TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/hello"
    />
    <RelativeLayout android:id="@+id/relativeLayout1" android:layout_weight="1.04"             android:layout_height="wrap_content" android:layout_width="match_parent">
    <TextView android:layout_width="wrap_content" android:textAppearance="?   android:attr/textAppearanceLarge" android:id="@+id/textTo" android:layout_height="wrap_content" android:text="To : "></TextView>
    <EditText android:layout_alignParentLeft="true" android:layout_width="fill_parent" android:layout_below="@+id/textTo" android:inputType="textEmailAddress" android:layout_height="wrap_content" android:id="@+id/editTextTo">
        <requestFocus></requestFocus>
      </EditText>
      <TextView android:layout_alignParentLeft="true"   android:layout_width="wrap_content" android:layout_below="@+id/editTextTo" android:textAppearance="?android:attr/textAppearanceLarge" android:id="@+id/textViewSubject" android:layout_height="wrap_content" android:text="Subject : "></TextView>
     <EditText android:layout_alignParentLeft="true" android:layout_width="fill_parent" android:layout_below="@+id/textViewSubject" android:layout_height="wrap_content" android:id="@+id/editTextSubject"></EditText>
     <TextView android:layout_alignParentLeft="true" android:layout_width="wrap_content" android:layout_below="@+id/editTextSubject" android:textAppearance="?android:attr/textAppearanceLarge" android:id="@+id/textViewMessage" android:layout_height="wrap_content" android:text="Message : "></TextView>
    <EditText android:layout_alignParentLeft="true" android:layout_width="160dp" android:layout_below="@+id/textViewMessage" android:inputType="textMultiLine" android:layout_height="225dp" android:id="@+id/editTextMessage" android:gravity="top" android:lines="5"></EditText>
        <SurfaceView android:layout_height="225dp" android:id="@+id/videoview" android:layout_toRightOf="@+id/editTextMessage" android:layout_width="160dp" android:layout_alignBottom="@+id/editTextMessage" android:layout_alignTop="@+id/editTextMessage" android:layout_alignParentRight="false">   </SurfaceView>
      <Button android:layout_width="75dp" android:text="Send" android:layout_height="50dp" android:id="@+id/buttonSend" android:layout_alignParentBottom="true" android:layout_alignLeft="@+id/videoview" android:layout_marginLeft="18dp"></Button>
     <Button android:layout_width="75dp" android:text="Rec" android:layout_height="50dp" android:id="@+id/mybutton" android:layout_alignParentBottom="true" android:layout_alignRight="@+id/textViewSubject"></Button> 
```

清单文件：

```
 <?xml version="1.0" encoding="utf-8"?>
    <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.SampleRecord"
     android:versionCode="1"
     android:versionName="1.0">
     <uses-sdk android:minSdkVersion="8" />
        <uses-permission android:name="android.permission.RECORD_AUDIO"/>
        <uses-permission android:name="android.permission.CAMERA"/>
        <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
      <uses-permission android:name="android.permission.INTERNET"></uses-permission>
       <application android:icon="@drawable/icon" android:label="@string/app_name">
           <activity android:name=".SampleRecordActivity"
              android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                 <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
         </activity>

   </application>
    </manifest> 
```

SampleRecordActivity.java

```
 public class SampleRecordActivity extends Activity implements SurfaceHolder.Callback
  {
    Button buttonSend,btnrec;
     EditText textTo;
   EditText textSubject;
   EditText textMessage;
   Button myButton;
  MediaRecorder mediaRecorder;
   SurfaceHolder surfaceHolder;
   boolean recording;
    /** Called when the activity is first created. */
     @Override
      public void onCreate(Bundle savedInstanceState) 
     {
        super.onCreate(savedInstanceState);
       setContentView(R.layout.main);
       recording = false;

       mediaRecorder = new MediaRecorder();
       initMediaRecorder();

        SurfaceView myVideoView = (SurfaceView)findViewById(R.id.videoview);
       surfaceHolder = myVideoView.getHolder();
       surfaceHolder.addCallback(this);
       surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
       myButton = (Button)findViewById(R.id.mybutton);
       myButton.setOnClickListener(myButtonOnClickListener);
       buttonSend = (Button) findViewById(R.id.buttonSend);
    textTo = (EditText) findViewById(R.id.editTextTo);
    textSubject = (EditText) findViewById(R.id.editTextSubject);
    textMessage = (EditText) findViewById(R.id.editTextMessage);

    buttonSend.setOnClickListener(new OnClickListener() 
    {

        @Override
        public void onClick(View v) 
        {

          String to = textTo.getText().toString();
          String subject = textSubject.getText().toString();
          String message = textMessage.getText().toString();

          Intent email = new Intent(Intent.ACTION_SEND);
          email.putExtra(Intent.EXTRA_EMAIL, new String[]{ to});
          email.putExtra(Intent.EXTRA_CC, new String[]{ to});
          email.putExtra(Intent.EXTRA_BCC, new String[]{to});
          email.putExtra(Intent.EXTRA_SUBJECT, subject);
          email.putExtra(Intent.EXTRA_TEXT, message);

          //need this to prompts email client only
          email.setType("message/rfc822");

          startActivity(Intent.createChooser(email, "Choose an Email client :"));

        }
    });
}
private Button.OnClickListener myButtonOnClickListener= new Button.OnClickListener()
{

   @Override
   public void onClick(View arg0) 
   {
       // TODO Auto-generated method stub
       if(recording)
       {
           mediaRecorder.stop();
           mediaRecorder.release();
           finish();
       }
       else
       {
           mediaRecorder.start();
           recording = true;
           myButton.setText("STOP");
       }
    }
};
@Override
public void surfaceChanged(SurfaceHolder arg0, int arg1, int arg2, int arg3) {
 // TODO Auto-generated method stub

}
@Override
public void surfaceCreated(SurfaceHolder arg0) {
 // TODO Auto-generated method stub
 prepareMediaRecorder();
}
@Override
public void surfaceDestroyed(SurfaceHolder arg0) {
 // TODO Auto-generated method stub

}

private void initMediaRecorder(){
 mediaRecorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
       mediaRecorder.setVideoSource(MediaRecorder.VideoSource.DEFAULT);
       CamcorderProfile camcorderProfile_HQ =       CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH);
       mediaRecorder.setProfile(camcorderProfile_HQ);
       mediaRecorder.setOutputFile("/sdcard/myvideo.mp4");
       mediaRecorder.setMaxDuration(60000); // Set max duration 60 sec.
       mediaRecorder.setMaxFileSize(5000000); // Set max file size 5M
}

private void prepareMediaRecorder(){
 mediaRecorder.setPreviewDisplay(surfaceHolder.getSurface());
 try {
  mediaRecorder.prepare();
 } catch (IllegalStateException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 } catch (IOException e) {
  // TODO Auto-generated catch block
  e.printStackTrace();
 }
}
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:23:32.067

尝试在 prepareMediaRecorder() 函数中添加以下行

```
mediaRecorder.setVideoSize(width, height) 
```

这可能会解决运行时异常。

# javascript - 如何为元素及其边框设置不同的光标

> ID：12967876
> 
> 赞同：12
> 
> 时间：2012-10-19T05:26:31.317
> 
> 标签：javascript, html, css

如何为元素及其边框设置不同的光标？伪元素 ? 有办法吗？注意：是的，它可以通过 JS 完成，我正在寻找一种使用纯 CSS 和单个元素的方法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-10-02T02:58:49.583

它有很多 HTML/CSS 代码，但类似的东西会帮助你：

```
.container {
  position: relative;
}
.crop {
  position: absolute;
  top: 10px;
  left: 100px;
  width: 100px;
  height: 100px;
  transition: all 0.25s;
  cursor: move;
}

.crop .crop-line {
  position: absolute;
  transition: all 0.25s;
}
.crop:hover .crop-line {
  border-color: rgba(123,53,132,1);
}
.crop .crop-top-line {
  top: 0;
  left: 0;
  right: 0;
  height: 5px; /* 5px for the mouse cursor update size */
  border-top: 1px solid rgba(204,31,48,1); /* 1px for the "border" size */
  cursor: n-resize;
}
.crop .crop-bottom-line {
  bottom: 0;
  left: 0;
  right: 0;
  height: 5px; /* 5px for the mouse cursor update size */
  border-bottom: 1px solid rgba(204,31,48,1); /* 1px for the "border" size */
  cursor: s-resize;
}
.crop .crop-left-line {
  top: 0;
  left: 0;
  bottom: 0;
  width: 5px; /* 5px for the mouse cursor update size */
  border-left: 1px solid rgba(204,31,48,1); /* 1px for the "border" size */
  cursor: w-resize;
}
.crop .crop-right-line {
  top: 0;
  right: 0;
  bottom: 0;
  width: 5px; /* 5px for the mouse cursor update size */
  border-right: 1px solid rgba(204,31,48,1); /* 1px for the "border" size */
  cursor: e-resize;
}
.crop .crop-corner {
  position: absolute;
  width: 6px;
  height: 6px;
  border-radius: 2px;
  border: 1px solid #808080;
  background: #FFF;
  opacity: 0;
  transition: all 0.25s;
}
.crop .crop-top-left-corner {
  top: -3px;
  left: -3px;
  cursor: nw-resize;
}
.crop .crop-top-right-corner {
  top: -3px;
  right: -3px;
  cursor: ne-resize;
}
.crop .crop-bottom-left-corner {
  bottom: -3px;
  left: -3px;
  cursor: sw-resize;
}
.crop .crop-bottom-right-corner {
  bottom: -3px;
  right: -3px;
  cursor: se-resize;
}
.crop:hover .crop-corner {
  opacity: 1;
}
```

```
 <div class="container">
  <div class="crop">
   <div class="crop-line crop-top-line"></div>
   <div class="crop-line crop-right-line"></div>
   <div class="crop-line crop-bottom-line"></div>
   <div class="crop-line crop-left-line"></div>

   <div class="crop-corner crop-top-left-corner"></div>
   <div class="crop-corner crop-top-right-corner"></div>
   <div class="crop-corner crop-bottom-right-corner"></div>
   <div class="crop-corner crop-bottom-left-corner"></div>
  </div>
 </div>
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-19T05:59:05.643

由于该`cursor`属性会影响元素整个区域（包括边框）中指针（在 CSS 中奇怪地称为“光标”）的形状，因此没有直接的方法可以做到这一点。

您可以使用 JavaScript 确定元素的内容区域，然后修改 DOM 以便为内容引入一个附加元素，然后您可以为内部元素和外部元素设置不同的“光标”。

但是，在标记中执行此类操作通常更简单，并且您根本不需要 JavaScript：

```
<div id=foo><div id=foo-content>...</div></div> 
```

现在您可以在两个元素上`#foo`设置和设置边框。`cursor`然后设置的“光标”`#foo`将仅应用于边框。

[jsfiddle](http://jsfiddle.net/kYUeM/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-19T05:54:24.573

`:before`并且`:after`似乎在 Firefox 中允许*cursor*属性，但在 Chrome 中不允许。

你可以在这里看到一个演示：http: [//jsfiddle.net/ZLZZG/](http://jsfiddle.net/ZLZZG/)，但实际上你会更好地包装元素并给包装器一个光标。

**更新：**在此编辑时（2015 年 4 月 6 日），它现在在 Chrome 中工作。

# actionscript-3 - 在 Flash CS5 中将多个形状和组转换为影片剪辑/符号

> ID：12967890
> 
> 赞同：2
> 
> 时间：2012-10-19T05:27:47.697
> 
> 标签：actionscript-3, flash-cs5, converter, jsfl

我已经在网上搜索了大约 2 个小时，现在正在寻找扩展 (MXP) 或 JSFL 脚本来帮助我将舞台上的 300 多个形状转换为符号。名称无关紧要，它们可以是 symbol_001、002 等。这似乎是一项常见的任务，我很惊讶没有人在 stackoverflow 上甚至在 actionscript.org 上问过。

我遇到了这个，但它不是我需要的......它一次只做一个符号......：[http ://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&loc= en_us&extid=1848523](http://www.adobe.com/cfusion/exchange/index.cfm?event=extensionDetail&loc=en_us&extid=1848523)

虽然这个是我想要的，但对于位图，而且只有库中的位图。 [http://benclinkinbeard.com/2006/07/flash-extension-convert-bitmaps-to-symbols/](http://benclinkinbeard.com/2006/07/flash-extension-convert-bitmaps-to-symbols/)

请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T08:47:59.520

首先是同一时间线和框架上的 300 多个形状？其次，这些形状是否分组？

```
var el = fl.getDocumentDOM().getTimeline().layers[0].frames[0].elements;
for(var i = 0; i<el.length; i++)
{
    fl.trace(i+" - " + el[i]);
} 
```

这将枚举第一帧第一层时间轴上的所有元素（包括形状）。

现在未分组的形状将被视为单个形状，矩形或椭圆形图元将被分开。

这是[Element 对象](http://help.adobe.com/en_US/flash/cs/extend/WS5b3ccc516d4fbf351e63e3d118a9024f3f-7f6c.html)和这个[Shape 对象文档的文档](http://help.adobe.com/en_US/flash/cs/extend/WS5b3ccc516d4fbf351e63e3d118a9024f3f-7f57.html)。

[以下是我使用修改过的 convertToGraphics 方法的](http://mit.edu/arch/www/arch_macathena/Library/Application%20Support/Macromedia/Flash%208/en/Configuration/Effects/Explode.jsfl)工作示例：

```
var el = fl.getDocumentDOM().getTimeline().layers[0].frames[0].elements;
for(var i = 0; i<el.length; i++)
{
    fl.trace(i+" - " + el[i]+", "+el[i].isGroup);
    convertToGraphics(el[i], "shape"+i);
}

//converts all current elements on the current timeline to movie clips with a effectSymbols move to Effect folder in the library and center registration point
function convertToGraphics(el, name)
{
    try
    {
        var symbolName = name;

        var cur_lib = fl.getDocumentDOM().library;
        fl.getDocumentDOM().selectNone();

        fl.getDocumentDOM().selection = [el];
        while(cur_lib.itemExists(symbolName+i))
            symbolName=symbolName+1;
        var newSym = fl.getDocumentDOM().convertToSymbol("movie clip", symbolName+i, "center");
    }
    catch (e)
    {
        fl.trace("Exception in : convertToGraphics" + e);
    }
} 
```

此致

ps 2 小时的搜索是不够的

# facebook-graph-api - IOS facebook SDK 会话？

> ID：12967895
> 
> 赞同：0
> 
> 时间：2012-10-19T05:28:26.787
> 
> 标签：facebook-graph-api, facebook-ios-sdk

在 facebook API 中有不同的会话状态： FBSessionStateCreated FBSessionStateCreatedTokenLoaded FBSessionStateOpen

1.  我的理解是SDK缓存了令牌。但是这里的 session 是什么意思呢？它只是一个对象还是 facebook 和应用程序之间的任何连接？

2.  令牌何时失效？或者，一旦对特定应用程序进行身份验证，它是否始终有效？

3.  FBSessionStateOpen 是什么意思？如果我们（或 SDK）已经拥有访问令牌，它不能使用它访问所有信息吗？

谁能解释引擎盖下发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T16:30:38.753

据我了解：

1.  会话只是一个主要由令牌组成的对象。

2.  令牌的有效期为 60 天，除非您调用注销方法或其他任何更改。

3.  FBState open 是当状态打开时，即只要会话有效并且您拥有有效的令牌。

# java - 将整数转换为罗马数字 - Java

> ID：12967896
> 
> 赞同：73
> 
> 时间：2012-10-19T05:28:29.237
> 
> 标签：java, methods, roman-numerals

这是我遇到麻烦的家庭作业。

我需要使用一种方法将整数转换为罗马数字。后来，我必须再用程序用罗马数字写出 1 到 3999，所以硬编码就没有了。我下面的代码非常简单；这是一个基本的 I/O 循环，可以在使用`getIntegerFromUser`我们在课堂上制作的包时退出。

有没有办法将值分配给字符串，然后在我调用该方法时将它们加在一起？

**更新：**我从教授那里得到了一些伪代码来帮助我，虽然我明白他想说什么，但我在`if`s. 我是否需要很多很多`if`语句才能使我的转换器正确处理罗马数字格式，或者是否有一种方法可以更有效地执行此操作？我更新了我的代码以反映我的占位符方法。

**更新（2012 年 10 月 28 日）：**我让它工作了。这是我最终使用的：

```
public static String IntegerToRomanNumeral(int input) {
    if (input < 1 || input > 3999)
        return "Invalid Roman Number Value";
    String s = "";
    while (input >= 1000) {
        s += "M";
        input -= 1000;        }
    while (input >= 900) {
        s += "CM";
        input -= 900;
    }
    while (input >= 500) {
        s += "D";
        input -= 500;
    }
    while (input >= 400) {
        s += "CD";
        input -= 400;
    }
    while (input >= 100) {
        s += "C";
        input -= 100;
    }
    while (input >= 90) {
        s += "XC";
        input -= 90;
    }
    while (input >= 50) {
        s += "L";
        input -= 50;
    }
    while (input >= 40) {
        s += "XL";
        input -= 40;
    }
    while (input >= 10) {
        s += "X";
        input -= 10;
    }
    while (input >= 9) {
        s += "IX";
        input -= 9;
    }
    while (input >= 5) {
        s += "V";
        input -= 5;
    }
    while (input >= 4) {
        s += "IV";
        input -= 4;
    }
    while (input >= 1) {
        s += "I";
        input -= 1;
    }    
    return s;
} 
```

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2013-11-03T23:35:43.477

使用 Java [TreeMap](http://docs.oracle.com/javase/7/docs/api/java/util/TreeMap.html)和递归的紧凑实现：

```
import java.util.TreeMap;

public class RomanNumber {

    private final static TreeMap<Integer, String> map = new TreeMap<Integer, String>();

    static {

        map.put(1000, "M");
        map.put(900, "CM");
        map.put(500, "D");
        map.put(400, "CD");
        map.put(100, "C");
        map.put(90, "XC");
        map.put(50, "L");
        map.put(40, "XL");
        map.put(10, "X");
        map.put(9, "IX");
        map.put(5, "V");
        map.put(4, "IV");
        map.put(1, "I");

    }

    public final static String toRoman(int number) {
        int l =  map.floorKey(number);
        if ( number == l ) {
            return map.get(number);
        }
        return map.get(l) + toRoman(number-l);
    }

} 
```

测试：

```
public void testRomanConversion() {

    for (int i = 1; i<= 100; i++) {
        System.out.println(i+"\t =\t "+RomanNumber.toRoman(i));
    }

} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2016-09-09T12:08:14.420

实际上还有另一种看待这个问题的方法，不是数字问题，而是一元问题，从罗马数字的基本字符“I”开始。所以我们只用I来表示数字，然后我们替换罗马字符的升值字符。

```
public String getRomanNumber(int number) {
    return join("", nCopies(number, "I"))
            .replace("IIIII", "V")
            .replace("IIII", "IV")
            .replace("VV", "X")
            .replace("VIV", "IX")
            .replace("XXXXX", "L")
            .replace("XXXX", "XL")
            .replace("LL", "C")
            .replace("LXL", "XC")
            .replace("CCCCC", "D")
            .replace("CCCC", "CD")
            .replace("DD", "M")
            .replace("DCD", "CM");
} 
```

我特别喜欢这种解决这个问题的方法，而不是使用大量的 if 和 while 循环，或者表查找。当您考虑问题而不是数字问题时，它实际上也是一个退出直观的解决方案。

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-06-29T04:41:09.103

使用这些库：

```
import java.util.LinkedHashMap;
import java.util.Map; 
```

编码：

```
 public static String RomanNumerals(int Int) {
    LinkedHashMap<String, Integer> roman_numerals = new LinkedHashMap<String, Integer>();
    roman_numerals.put("M", 1000);
    roman_numerals.put("CM", 900);
    roman_numerals.put("D", 500);
    roman_numerals.put("CD", 400);
    roman_numerals.put("C", 100);
    roman_numerals.put("XC", 90);
    roman_numerals.put("L", 50);
    roman_numerals.put("XL", 40);
    roman_numerals.put("X", 10);
    roman_numerals.put("IX", 9);
    roman_numerals.put("V", 5);
    roman_numerals.put("IV", 4);
    roman_numerals.put("I", 1);
    String res = "";
    for(Map.Entry<String, Integer> entry : roman_numerals.entrySet()){
      int matches = Int/entry.getValue();
      res += repeat(entry.getKey(), matches);
      Int = Int % entry.getValue();
    }
    return res;
  }
  public static String repeat(String s, int n) {
    if(s == null) {
        return null;
    }
    final StringBuilder sb = new StringBuilder();
    for(int i = 0; i < n; i++) {
        sb.append(s);
    }
    return sb.toString();
  } 
```

测试代码：

```
 for (int i = 1;i<256;i++) {
    System.out.println("i="+i+" -> "+RomanNumerals(i));
  } 
```

输出：

```
 i=1 -> I
  i=2 -> II
  i=3 -> III
  i=4 -> IV
  i=5 -> V
  i=6 -> VI
  i=7 -> VII
  i=8 -> VIII
  i=9 -> IX
  i=10 -> X
  i=11 -> XI
  i=12 -> XII
  i=13 -> XIII
  i=14 -> XIV
  i=15 -> XV
  i=16 -> XVI
  i=17 -> XVII
  i=18 -> XVIII
  i=19 -> XIX
  i=20 -> XX
  i=21 -> XXI
  i=22 -> XXII
  i=23 -> XXIII
  i=24 -> XXIV
  i=25 -> XXV
  i=26 -> XXVI
  i=27 -> XXVII
  i=28 -> XXVIII
  i=29 -> XXIX
  i=30 -> XXX
  i=31 -> XXXI
  i=32 -> XXXII
  i=33 -> XXXIII
  i=34 -> XXXIV
  i=35 -> XXXV
  i=36 -> XXXVI
  i=37 -> XXXVII
  i=38 -> XXXVIII
  i=39 -> XXXIX
  i=40 -> XL
  i=41 -> XLI
  i=42 -> XLII
  i=43 -> XLIII
  i=44 -> XLIV
  i=45 -> XLV
  i=46 -> XLVI
  i=47 -> XLVII
  i=48 -> XLVIII
  i=49 -> XLIX
  i=50 -> L
  i=51 -> LI
  i=52 -> LII
  i=53 -> LIII
  i=54 -> LIV
  i=55 -> LV
  i=56 -> LVI
  i=57 -> LVII
  i=58 -> LVIII
  i=59 -> LIX
  i=60 -> LX
  i=61 -> LXI
  i=62 -> LXII
  i=63 -> LXIII
  i=64 -> LXIV
  i=65 -> LXV
  i=66 -> LXVI
  i=67 -> LXVII
  i=68 -> LXVIII
  i=69 -> LXIX
  i=70 -> LXX
  i=71 -> LXXI
  i=72 -> LXXII
  i=73 -> LXXIII
  i=74 -> LXXIV
  i=75 -> LXXV
  i=76 -> LXXVI
  i=77 -> LXXVII
  i=78 -> LXXVIII
  i=79 -> LXXIX
  i=80 -> LXXX
  i=81 -> LXXXI
  i=82 -> LXXXII
  i=83 -> LXXXIII
  i=84 -> LXXXIV
  i=85 -> LXXXV
  i=86 -> LXXXVI
  i=87 -> LXXXVII
  i=88 -> LXXXVIII
  i=89 -> LXXXIX
  i=90 -> XC
  i=91 -> XCI
  i=92 -> XCII
  i=93 -> XCIII
  i=94 -> XCIV
  i=95 -> XCV
  i=96 -> XCVI
  i=97 -> XCVII
  i=98 -> XCVIII
  i=99 -> XCIX
  i=100 -> C
  i=101 -> CI
  i=102 -> CII
  i=103 -> CIII
  i=104 -> CIV
  i=105 -> CV
  i=106 -> CVI
  i=107 -> CVII
  i=108 -> CVIII
  i=109 -> CIX
  i=110 -> CX
  i=111 -> CXI
  i=112 -> CXII
  i=113 -> CXIII
  i=114 -> CXIV
  i=115 -> CXV
  i=116 -> CXVI
  i=117 -> CXVII
  i=118 -> CXVIII
  i=119 -> CXIX
  i=120 -> CXX
  i=121 -> CXXI
  i=122 -> CXXII
  i=123 -> CXXIII
  i=124 -> CXXIV
  i=125 -> CXXV
  i=126 -> CXXVI
  i=127 -> CXXVII
  i=128 -> CXXVIII
  i=129 -> CXXIX
  i=130 -> CXXX
  i=131 -> CXXXI
  i=132 -> CXXXII
  i=133 -> CXXXIII
  i=134 -> CXXXIV
  i=135 -> CXXXV
  i=136 -> CXXXVI
  i=137 -> CXXXVII
  i=138 -> CXXXVIII
  i=139 -> CXXXIX
  i=140 -> CXL
  i=141 -> CXLI
  i=142 -> CXLII
  i=143 -> CXLIII
  i=144 -> CXLIV
  i=145 -> CXLV
  i=146 -> CXLVI
  i=147 -> CXLVII
  i=148 -> CXLVIII
  i=149 -> CXLIX
  i=150 -> CL
  i=151 -> CLI
  i=152 -> CLII
  i=153 -> CLIII
  i=154 -> CLIV
  i=155 -> CLV
  i=156 -> CLVI
  i=157 -> CLVII
  i=158 -> CLVIII
  i=159 -> CLIX
  i=160 -> CLX
  i=161 -> CLXI
  i=162 -> CLXII
  i=163 -> CLXIII
  i=164 -> CLXIV
  i=165 -> CLXV
  i=166 -> CLXVI
  i=167 -> CLXVII
  i=168 -> CLXVIII
  i=169 -> CLXIX
  i=170 -> CLXX
  i=171 -> CLXXI
  i=172 -> CLXXII
  i=173 -> CLXXIII
  i=174 -> CLXXIV
  i=175 -> CLXXV
  i=176 -> CLXXVI
  i=177 -> CLXXVII
  i=178 -> CLXXVIII
  i=179 -> CLXXIX
  i=180 -> CLXXX
  i=181 -> CLXXXI
  i=182 -> CLXXXII
  i=183 -> CLXXXIII
  i=184 -> CLXXXIV
  i=185 -> CLXXXV
  i=186 -> CLXXXVI
  i=187 -> CLXXXVII
  i=188 -> CLXXXVIII
  i=189 -> CLXXXIX
  i=190 -> CXC
  i=191 -> CXCI
  i=192 -> CXCII
  i=193 -> CXCIII
  i=194 -> CXCIV
  i=195 -> CXCV
  i=196 -> CXCVI
  i=197 -> CXCVII
  i=198 -> CXCVIII
  i=199 -> CXCIX
  i=200 -> CC
  i=201 -> CCI
  i=202 -> CCII
  i=203 -> CCIII
  i=204 -> CCIV
  i=205 -> CCV
  i=206 -> CCVI
  i=207 -> CCVII
  i=208 -> CCVIII
  i=209 -> CCIX
  i=210 -> CCX
  i=211 -> CCXI
  i=212 -> CCXII
  i=213 -> CCXIII
  i=214 -> CCXIV
  i=215 -> CCXV
  i=216 -> CCXVI
  i=217 -> CCXVII
  i=218 -> CCXVIII
  i=219 -> CCXIX
  i=220 -> CCXX
  i=221 -> CCXXI
  i=222 -> CCXXII
  i=223 -> CCXXIII
  i=224 -> CCXXIV
  i=225 -> CCXXV
  i=226 -> CCXXVI
  i=227 -> CCXXVII
  i=228 -> CCXXVIII
  i=229 -> CCXXIX
  i=230 -> CCXXX
  i=231 -> CCXXXI
  i=232 -> CCXXXII
  i=233 -> CCXXXIII
  i=234 -> CCXXXIV
  i=235 -> CCXXXV
  i=236 -> CCXXXVI
  i=237 -> CCXXXVII
  i=238 -> CCXXXVIII
  i=239 -> CCXXXIX
  i=240 -> CCXL
  i=241 -> CCXLI
  i=242 -> CCXLII
  i=243 -> CCXLIII
  i=244 -> CCXLIV
  i=245 -> CCXLV
  i=246 -> CCXLVI
  i=247 -> CCXLVII
  i=248 -> CCXLVIII
  i=249 -> CCXLIX
  i=250 -> CCL
  i=251 -> CCLI
  i=252 -> CCLII
  i=253 -> CCLIII
  i=254 -> CCLIV
  i=255 -> CCLV 
```

* * *

## 回答 #4

> 赞同：26
> 
> 时间：2012-10-19T05:40:59.157

来自[Java Notes 6.0](http://math.hws.edu/javanotes/)网站：

```
 /**
       * An object of type RomanNumeral is an integer between 1 and 3999\.  It can
       * be constructed either from an integer or from a string that represents
       * a Roman numeral in this range.  The function toString() will return a
       * standardized Roman numeral representation of the number.  The function
       * toInt() will return the number as a value of type int.
       */
      public class RomanNumeral {

         private final int num;   // The number represented by this Roman numeral.

         /* The following arrays are used by the toString() function to construct
            the standard Roman numeral representation of the number.  For each i,
            the number numbers[i] is represented by the corresponding string, letters[i].
         */

         private static int[]    numbers = { 1000,  900,  500,  400,  100,   90,  
                                               50,   40,   10,    9,    5,    4,    1 };

         private static String[] letters = { "M",  "CM",  "D",  "CD", "C",  "XC",
                                             "L",  "XL",  "X",  "IX", "V",  "IV", "I" };

         /**
          * Constructor.  Creates the Roman number with the int value specified
          * by the parameter.  Throws a NumberFormatException if arabic is
          * not in the range 1 to 3999 inclusive.
          */
         public RomanNumeral(int arabic) {
            if (arabic < 1)
               throw new NumberFormatException("Value of RomanNumeral must be positive.");
            if (arabic > 3999)
               throw new NumberFormatException("Value of RomanNumeral must be 3999 or less.");
            num = arabic;
         }

         /*
          * Constructor.  Creates the Roman number with the given representation.
          * For example, RomanNumeral("xvii") is 17\.  If the parameter is not a
          * legal Roman numeral, a NumberFormatException is thrown.  Both upper and
          * lower case letters are allowed.
          */
         public RomanNumeral(String roman) {

            if (roman.length() == 0)
               throw new NumberFormatException("An empty string does not define a Roman numeral.");

            roman = roman.toUpperCase();  // Convert to upper case letters.

            int i = 0;       // A position in the string, roman;
            int arabic = 0;  // Arabic numeral equivalent of the part of the string that has
                             //    been converted so far.

            while (i < roman.length()) {

               char letter = roman.charAt(i);        // Letter at current position in string.
               int number = letterToNumber(letter);  // Numerical equivalent of letter.

               i++;  // Move on to next position in the string

               if (i == roman.length()) {
                     // There is no letter in the string following the one we have just processed.
                     // So just add the number corresponding to the single letter to arabic.
                  arabic += number;
               }
               else {
                     // Look at the next letter in the string.  If it has a larger Roman numeral
                     // equivalent than number, then the two letters are counted together as
                     // a Roman numeral with value (nextNumber - number).
                  int nextNumber = letterToNumber(roman.charAt(i));
                  if (nextNumber > number) {
                       // Combine the two letters to get one value, and move on to next position in string.
                     arabic += (nextNumber - number);
                     i++;
                  }
                  else {
                       // Don't combine the letters.  Just add the value of the one letter onto the number.
                     arabic += number;
                  }
               }

            }  // end while

            if (arabic > 3999)
               throw new NumberFormatException("Roman numeral must have value 3999 or less.");

            num = arabic;

         } // end constructor

         /**
          * Find the integer value of letter considered as a Roman numeral.  Throws
          * NumberFormatException if letter is not a legal Roman numeral.  The letter 
          * must be upper case.
          */
         private int letterToNumber(char letter) {
            switch (letter) {
               case 'I':  return 1;
               case 'V':  return 5;
               case 'X':  return 10;
               case 'L':  return 50;
               case 'C':  return 100;
               case 'D':  return 500;
               case 'M':  return 1000;
               default:   throw new NumberFormatException(
                            "Illegal character \"" + letter + "\" in Roman numeral");
            }
         }

         /**
          * Return the standard representation of this Roman numeral.
          */
         public String toString() {
            String roman = "";  // The roman numeral.
            int N = num;        // N represents the part of num that still has
                                //   to be converted to Roman numeral representation.
            for (int i = 0; i < numbers.length; i++) {
               while (N >= numbers[i]) {
                  roman += letters[i];
                  N -= numbers[i];
               }
            }
            return roman;
         }

         /**
          * Return the value of this Roman numeral as an int.
          */
         public int toInt() {
            return num;
         }

      } 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2015-05-12T13:02:00.433

我写了一个非常简单的解决方案。我们所要做的就是划分并找出特定字母（或字母组合出现）的次数，并将其附加到 StringBuilder 对象`sb`。我们还应该跟踪剩余的数字 ( `num`)。

```
public static String intToRoman(int num) {
    StringBuilder sb = new StringBuilder();
    int times = 0;
    String[] romans = new String[] { "I", "IV", "V", "IX", "X", "XL", "L",
            "XC", "C", "CD", "D", "CM", "M" };
    int[] ints = new int[] { 1, 4, 5, 9, 10, 40, 50, 90, 100, 400, 500,
            900, 1000 };
    for (int i = ints.length - 1; i >= 0; i--) {
        times = num / ints[i];
        num %= ints[i];
        while (times > 0) {
            sb.append(romans[i]);
            times--;
        }
    }
    return sb.toString();
} 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2016-09-10T18:54:06.833

我喜欢 André Kramer Orten 的回答，非常优雅，我特别喜欢它如何避免循环，我想到了另一种处理它的方法，也避免了循环。

它对输入使用整数除法和模数，从硬编码的字符串数组集中为每个单元类型选择正确的索引。

这里的好处是您可以指定精确的转换，具体取决于您是否需要加法或减法数字形式，即 IIII 与 IV。在这里，我对 5x-1 形式的所有数字（4、9、14、19、40、90 等）使用“减法形式”

通过使用进一步的加法或减法形式（即“IV”、“V”或“MMMM”、“MMMMM”）简单地扩展数千个数组来扩展它以允许更大的数字也是微不足道的

对于加分，我实际上确保数字参数在问题的给定范围内。

```
public class RomanNumeralGenerator {
    static final int MIN_VALUE = 1;
    static final int MAX_VALUE = 3999;
    static final String[] RN_M = {"", "M", "MM", "MMM"};
    static final String[] RN_C = {"", "C", "CC", "CCC", "CD", "D", "DC", "DCC", "DCCC", "CM"};
    static final String[] RN_X = {"", "X", "XX", "XXX", "XL", "L", "LX", "LXX", "LXXX", "XC"};
    static final String[] RN_I = {"", "I", "II", "III", "IV", "V", "VI", "VII", "VIII", "IX"};

    public String generate(int number) {
        if (number < MIN_VALUE || number > MAX_VALUE) {
            throw new IllegalArgumentException(
                    String.format(
                            "The number must be in the range [%d, %d]",
                            MIN_VALUE,
                            MAX_VALUE
                    )
            );
        }

        return new StringBuilder()
                .append(RN_M[number / 1000])
                .append(RN_C[number % 1000 / 100])
                .append(RN_X[number % 100 / 10])
                .append(RN_I[number % 10])
                .toString();
    }
} 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-12-26T19:46:23.167

我认为我的解决方案是更简洁的解决方案之一：

```
private static String convertToRoman(int mInt) {
    String[] rnChars = { "M",  "CM", "D", "C",  "XC", "L",  "X", "IX", "V", "I" };
    int[] rnVals = {  1000, 900, 500, 100, 90, 50, 10, 9, 5, 1 };
    String retVal = "";

    for (int i = 0; i < rnVals.length; i++) {
        int numberInPlace = mInt / rnVals[i];
        if (numberInPlace == 0) continue;
        retVal += numberInPlace == 4 && i > 0? rnChars[i] + rnChars[i - 1]:
            new String(new char[numberInPlace]).replace("\0",rnChars[i]);
        mInt = mInt % rnVals[i];
    }
    return retVal;
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2018-07-25T00:36:41.430

```
private static String toRoman(int n) {
    String[] romanNumerals = { "M",  "CM", "D", "CD", "C", "XC", "L",  "X", "IX", "V", "I" };
    int[] romanNumeralNums = {  1000, 900, 500,  400 , 100,  90,  50,   10,    9,   5,   1 };
    String finalRomanNum = "";

    for (int i = 0; i < romanNumeralNums.length; i ++) {
            int currentNum = n /romanNumeralNums[i];
            if (currentNum==0) {
                continue;
            }

            for (int j = 0; j < currentNum; j++) {
                finalRomanNum +=romanNumerals[i];
            }

            n = n%romanNumeralNums[i];
    }
    return finalRomanNum;
} 
```

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2013-06-19T18:00:23.327

```
String convert(int i){

    String ones = "";
    String tens = "";
    String hundreds = "";
    String thousands = "";
    String result ;

    boolean error = false;

    Vector v = new Vector();

    //assign passed integer to temporary value temp
    int temp=i;

    //flags an error if number is greater than 3999
    if (temp >=4000) {
       error = true;
    }

    /*loops while temp can no more be divided by 10.
        Lets say i = 3254, then temp is also 3254 at line 14.

                           3254 
          3254/10 = 25    /   \ 3254%10 = 4
                         /     \
    now temp = 25       325     4  - here 4 is added to the vector v's 0th index.
                        / \
    now temp = 32     32   5  - here 5 is added to the vector v's 1st index.
                     /  \
    now temp = 3    3    2  - here 2 is added to the vector v's 2nd index, and loop exits
                   / \        since temp/10 = 0
                  0   3  - here 3 is not added to the vector v's 3rd index as loop exits when
                            temp/10 = 0.

    */
    while (temp/10 != 0) {
        if (temp / 10 != 0 && temp <4000) {
            v.add(temp%10);
            temp = temp / 10;
        }else {     
            break;
        }
    }

    //therefore you have to add temp one last time to the vector
    v.add(temp);

    //as in the example now you have 4,5,2,3 respectively in v's 0,1,2,3 indices.

    for (int j = 0; j < v.size(); j++) {

        //you see that v's 0th index has number of ones. So make them roman ones here.
        if (j==0) {
            switch (v.get(0).toString()){
                case "0" : ones = ""; break;
                case "1" : ones = "I"; break;
                case "2" : ones = "II"; break;
                case "3" : ones = "III"; break;
                case "4" : ones = "IV"; break;
                case "5" : ones = "V"; break;
                case "6" : ones = "VI"; break;
                case "7" : ones = "VII"; break;
                case "8" : ones = "VIII"; break;
                case "9" : ones = "IX"; break;
            }

            //in the second iteration of the loop (when j==1) 
            //index 1 of v is checked. Now you understand that v's 1st index
            //has the tens
        } else if (j == 1) {
            switch (v.get(1).toString()){
                case "0" : tens = ""; break;
                case "1" : tens = "X"; break;
                case "2" : tens = "XX"; break;
                case "3" : tens = "XXX"; break;
                case "4" : tens = "XL"; break;
                case "5" : tens = "L"; break;
                case "6" : tens = "LX"; break;
                case "7" : tens = "LXX"; break;
                case "8" : tens = "LXXX"; break;
                case "9" : tens = "XC"; break;
            }
        } else if(j == 2){  //and hundreds
            switch (v.get(2).toString()){
                case "0" : hundreds = ""; break;
                case "1" : hundreds = "C"; break;
                case "2" : hundreds = "CC"; break;
                case "3" : hundreds = "CCC"; break;
                case "4" : hundreds = "CD"; break;
                case "5" : hundreds = "D"; break;
                case "6" : hundreds = "DC"; break;
                case "7" : hundreds = "DCC"; break;
                case "8" : hundreds = "DCCC"; break;
                case "9" : hundreds = "CM"; break;
            }
        }   else if(j == 3){ //and finally thousands.
            switch (v.get(3).toString()){           
                case "0" : thousands = ""; break;
                case "1" : thousands = "M"; break;
                case "2" : thousands = "MM"; break;
                case "3" : thousands = "MMM"; break;

            }
        } 
    }

    if (error) {
       result = "Error!";
    }else{
        result = thousands + hundreds + tens + ones;
    }

    return result;

} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-10-19T05:35:01.470

我很好奇这将如何结束。我会开始研究映射 1,2,3,5,6,7,8,9,10 到 I,II,III,IV,V,VI,VII,VII,IX,X ...然后你可能会研究罗马数字的规则：I、II、III 是由连接创建的 V、X、L、C、D 和 M 是 5、10、50、100、500 和 1000 的符号罗马人认为他们可以节省写数字的空间，而不是写例如 IIII for 4 use IV（意思是：5 减 1 ...）您可能想查看这些规则，例如[http://en.wikipedia.org/wiki/Roman_numerals](http://en.wikipedia.org/wiki/Roman_numerals)并捕获它们在代码中，例如在“RomanNumbers”类中如果你想作弊，你可能想点击链接[http://www.moxlotus.alternatifs.eu/programmation-converter.html](http://www.moxlotus.alternatifs.eu/programmation-converter.html)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-02-25T18:18:55.990

在做了一些研究和分析上面的答案之后，我得出了这个结论：

```
package roman;

public class RomanNumbers {

public static final int[] decimal = {1, 4, 5, 9, 10, 40, 50, 90, 100, 400, 500, 900, 1000};
public static final String[] letters = {"I", "IV", "V", "IX", "X", "XL", "L", "XC", "C", "CD", "D", "CM", "M"};

public static String stringToRoman(int num) {
    String roman = "";

    if (num < 1 || num > 3999) {
        System.out.println("Invalid roman number value!");
    }

    while (num > 0) {
        int maxFound = 0;
        for (int i=0; i < decimal.length; i++) {
            if (num >= decimal[i]) {
                maxFound = i;
            }
        }
        roman += letters[maxFound];
        num -= decimal[maxFound];
    }

    return roman;       
  }
} 
```

单元测试也通过了：

```
package roman;

import static org.junit.Assert.*;

import org.junit.Test;

public class RomanNumbersTest {

@Test
public void testReturn1() {
    String actual = RomanNumbers.stringToRoman(1);
    String expected = "I";
    assertEquals(expected, actual);
}

@Test
public void testReturn5() {
    String actual = RomanNumbers.stringToRoman(5);
    String expected = "V";
    assertEquals(expected, actual);
}

@Test
public void testReturn2() {
    String actual = RomanNumbers.stringToRoman(2);
    String expected = "II";
    assertEquals(expected, actual);
}

@Test
public void testReturn4() {
    String actual = RomanNumbers.stringToRoman(4);
    String expected = "IV";
    assertEquals(expected, actual);
}

@Test
public void testReturn399() {
    String actual = RomanNumbers.stringToRoman(399);
    String expected = "CCCXCIX";
    assertEquals(expected, actual);
}

@Test
public void testReturn3992() {
    String actual = RomanNumbers.stringToRoman(3992);
    String expected = "MMMCMXCII";
    assertEquals(expected, actual);
}
} 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2013-11-12T22:39:26.433

我的解决方案是函数 getRoman：

```
public  String getRoman(int number) {

    String riman[] = {"M","XM","CM","D","XD","CD","C","XC","L","XL","X","IX","V","IV","I"};
    int arab[] = {1000, 990, 900, 500, 490, 400, 100, 90, 50, 40, 10, 9, 5, 4, 1};
    StringBuilder result = new StringBuilder();
    int i = 0;
    while (number > 0 || arab.length == (i - 1)) {
        while ((number - arab[i]) >= 0) {
            number -= arab[i];
            result.append(riman[i]);
        }
        i++;
    }
    return result.toString();
} 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2015-03-10T19:38:48.023

我注意到从整数转换为罗马数字很容易，因为每个数字总是有 1、5 和 10（即**I**、**V**和**X**用于 1-10，**X**、**L**和**C**用于 10-100 等。 ) 这就是为什么我制作了一系列罗马数字来从中获取正确的字母。

在我的示例中，我每次遍历一个整数，每次使用模运算符获取最后一个数字。然后我从 switch 语句中的当前数字形成罗马数字，将其添加到 asRomanNumerals 字符串的开头。转换数字后，它会从数字中删除，用于在数组中查找字母的索引会增加两个（**IVX -> XLC**）。

```
public static void main(String[] args) {

    // number is the one to be translated into Roman Numerals
    int number = 2345;
    number = Math.min(3999, Math.max(1, number)); // wraps number between 1-3999
    String asRomanNumerals = "";

    // Array including numerals in ascending order
    String[] RN = {"I", "V", "X", "L", "C", "D", "M" };
    int i = 0; // Index used to keep track which digit we are translating
    while (number > 0) {
        switch(number % 10) {
        case 1: asRomanNumerals = RN[i] + asRomanNumerals; break;
        case 2: asRomanNumerals = RN[i] + RN[i] + asRomanNumerals; break;
        case 3: asRomanNumerals = RN[i] + RN[i] + RN[i] + asRomanNumerals; break;
        case 4: asRomanNumerals = RN[i] + RN[i + 1] + asRomanNumerals; break;
        case 5: asRomanNumerals = RN[i + 1] + asRomanNumerals; break;
        case 6: asRomanNumerals = RN[i + 1] + RN[i] + asRomanNumerals; break;
        case 7: asRomanNumerals = RN[i + 1] + RN[i] + RN[i] + asRomanNumerals; break;
        case 8: asRomanNumerals = RN[i + 1] + RN[i] + RN[i] + RN[i] +asRomanNumerals; break;
        case 9: asRomanNumerals = RN[i] + RN[i + 2] + asRomanNumerals; break;
        }
        number = (int) number / 10;
        i += 2;
    }
    System.out.println(asRomanNumerals);
} 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2015-02-14T06:09:32.597

我认为，如果您仔细研究罗马数字的理论，则不需要数字 4、9、40 等的映射，因为该理论告诉我们罗马数字是否为 IV = 5-1 = 4，因此当前缀小于在这种情况下，您必须从后续数字中减去前一个数字才能获得实际值，这就是我已将其合并到问题代码中的内容，如果需要，请查看并指出任何错误，我遵循了这个表来设计我的逻辑 - [http://literacy.kent.edu/Minigrants/Cinci/romachart.htm](http://literacy.kent.edu/Minigrants/Cinci/romanchart.htm)

```
import java.util.Set;
import java.io.File;
import java.util.HashMap;
import java.util.HashSet;
import java.io.FileReader;
import java.io.IOException;
import java.io.BufferedReader;

public class RomanStringToIntegerConversion {
    public static void main(String[] args) throws IOException{
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in)));
        String[] romanString = br.readLine().split("");

        HashMap<String, Integer> romanToIntegerMap = new HashMap<String, Integer>();
        romanToIntegerMap.put("I", 1);
        romanToIntegerMap.put("V", 5);
        romanToIntegerMap.put("X", 10);
        romanToIntegerMap.put("L", 50);
        romanToIntegerMap.put("C", 100);
        romanToIntegerMap.put("D", 500);
        romanToIntegerMap.put("M", 1000);

        int numLength = romanString.length;
        Set<Integer> lessIndices = new HashSet<Integer>();

        for(int i = 0; i < numLength; ++i){
            if(i+1 < numLength){
                if(romanToIntegerMap.get(romanString[i]) < romanToIntegerMap.get(romanString[i+1]))
                    lessIndices.add(i);
            }
        }

        int num = 0;
        for(int i = 0; i < numLength;){
            if(!lessIndices.contains(i)){
                num = num + romanToIntegerMap.get(romanString[i]);
                ++i;
            }
            else{
                num = num + romanToIntegerMap.get(romanString[i+1]) - romanToIntegerMap.get(romanString[i]);
                i+=2;
            }
        }
        System.out.println("The integer representation of the roman numeral is : " + num);
    }
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-05-12T13:15:57.673

```
enum Numeral {
        I(1), IV(4), V(5), IX(9), X(10), XL(40), L(50), XC(90), C(100), CD(400), D(500), CM(900), M(1000);
        int weight;

        Numeral(int weight) {
            this.weight = weight;
        }
    };

    public static String roman(long n) {

        if( n <= 0) {
            throw new IllegalArgumentException();
        }

        StringBuilder buf = new StringBuilder();

        final Numeral[] values = Numeral.values();
        for (int i = values.length - 1; i >= 0; i--) {
            while (n >= values[i].weight) {
                buf.append(values[i]);
                n -= values[i].weight;
            }
        }
        return buf.toString();
    }

    public static void test(long n) {
        System.out.println(n + " = " + roman(n));
    }

    public static void main(String[] args) {
        test(1999);
        test(25);
        test(944);
        test(0);
    } 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-05-22T22:29:56.403

这是我的作业的结果。它不能确保输入在正确的范围内，我可能应该使用`StringBuilder`（我查了一下！）并且不是一种单一的方法。但是，如果有人读到这里，我将不胜感激正面和负面的反馈！

```
import java.util.Scanner;
    /**
     *Main() allows user input and tests 1-3999
     *toRoman() breaks the number down into digits and passes them to romanLogic()
     *romanLogic() converts each digit into a the numerals that represent it.
     */
    public class RomanNumerals
    {
        public static void main(String args[]){
            Scanner in = new Scanner(System.in);
            System.out.print("give us an integer < 4000: ");        
            System.out.println("the roman numeral version is: " + toRoman(in.nextInt()));
            for (int i = 1; i<=3999; i++){
                System.out.println(i +" === "+ toRoman(i));
            }
        }
        public static String toRoman(int i){
            String output = "";
            int digits = i%10;
            int tens = (i%100)/10;
            int hundreds = (i%1000)/100;
            int thousands = (i%10000)/1000;
            return (romanLogic(thousands, "M","","")+
                    romanLogic(hundreds,"C","D","M")+
                    romanLogic(tens,"X","L","C")+
                    romanLogic(digits,"I","V","X"));
        }
        public static String romanLogic(int i, String ones, String fives, String tens){
            String result = "";
            if (i == 0){
                return result;
            } else {
                if ((i>=4)&&(i<=8)){                
                    result += fives;
                }
                if (i==9){
                    result += tens;
                }
                if(i%5 < 4){
                    while(i%5 > 0){
                        result += ones;
                        i--;
                    }
                }
                if(i%5 == 4){
                    result = ones + result;
                }
            }
            return result;
        }    
    } 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2017-12-14T10:05:40.853

我在三年前做过这个，可能对你有帮助：

```
public class ToRoman
{

    public static String toRoman(int number)
    {
        StringBuilder br = new StringBuilder("");
        while(number!=0)
        {
            while(number>=1000)
            {
                br.append("M");
                number-=1000;   
            }
            while(number>=900)
            {
                br.append("CM");
                number-=900;    
            }
            while(number>=500)
            {
                br.append("D");
                number-=500;    
            }
            while(number>=400)
            {
                br.append("CD");
                number-=400;    
            }
            while(number>=100)
            {
                br.append("C");
                number-=100;    
            }
            while(number>=90)
            {
                br.append("XC");
                number-=90; 
            }
            while(number>=50)
            {
                br.append("L");
                number-=50; 
            }
            while(number>=40)
            {
                br.append("XL");
                number-=40; 
            }
            while(number>=10)
            {
                br.append("X");
                number-=10; 
            }
            while(number>=9)
            {
                br.append("IX");
                number-=9;  
            }
            while(number>=5)
            {
                br.append("V");
                number-=5;  
            }
            while(number>=4)
            {
                br.append("IV");
                number-=4;  
            }
            while(number>=1)
            {
                br.append("I");
                number-=1;  
            }
        }
        return br.toString();
    }

    public static void main(String [] args)
    {
        System.out.println(toRoman(2000));
    }
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-01-24T03:50:33.163

我认为可以使用单个数组来完成，而不是采用 2 个单独的数组。我也推荐**array over Map**。如果我们知道位置，数组保证在任何情况下获取任何元素的复杂度为**O(1) 。**由于频繁的追加操作，
我使用了**StringBuilder**而不是**String 。**

```
class Solution {

    public String intToRoman(int num) {
        StringBuilder str = new StringBuilder();
        RomanDataStore arr[]=new RomanDataStore[13];
        arr[0]=new RomanDataStore(1000,"M");
        arr[1]=new RomanDataStore(900, "CM");
        arr[2]=new RomanDataStore(500, "D");
        arr[3]=new RomanDataStore(400, "CD");
        arr[4]=new RomanDataStore(100, "C");
        arr[5]=new RomanDataStore(90, "XC");
        arr[6]=new RomanDataStore(50, "L");
        arr[7]=new RomanDataStore(40, "XL");
        arr[8]=new RomanDataStore(10, "X");
        arr[9]=new RomanDataStore(9, "IX");
        arr[10]=new RomanDataStore(5, "V");
        arr[11]=new RomanDataStore(4, "IV");
        arr[12]=new RomanDataStore(1, "I");
        int itr=0;
        RomanDataStore temp=null;
        while(num!=0){
            temp=arr[itr];
            if(num>=temp.val){
                for(int i=0;i<num/temp.val;i++){
                 str.append(temp.s);   
                }
                num=num%temp.val;
            }
            itr++;

        }
        return str.toString();

    }

    private class RomanDataStore{
        private int val;
        private String s;
        RomanDataStore(int val, String s){
            this.val=val;
            this.s=s;
        }
    }
} 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2019-01-25T11:36:04.297

我自己喜欢使用**责任链**模式。我认为这对这种情况很有意义。

```
public abstract class NumberChainOfResponsibility {
    protected NumberChainOfResponsibility next;
    protected int decimalValue;
    protected String romanNumeralValue;

    public NumberChainOfResponsibility() {
    }

    public String convert(int decimal) {
        int remainder = decimal;
        StringBuilder numerals = new StringBuilder();
        while (remainder != 0) {
            if (remainder >= this.decimalValue) {
                numerals.append(this.romanNumeralValue);
                remainder -= this.decimalValue;
            } else {
                numerals.append(next.convert(remainder));
                remainder = 0;
            }
        }
        return numerals.toString();
    }
} 
```

然后我为每个罗马数字（1/5/10/50/100/500/1000 以及 4/9/40/90/400/900）创建一个扩展这个类。

*1000*

```
public class Cor1000 extends NumberChainOfResponsibility {
    public Cor1000() {
        super();
        this.decimalValue = 1000;
        this.romanNumeralValue = "M";
        this.next = new Cor900();
    }
} 
```

*1*

```
public class Cor1 extends NumberChainOfResponsibility {
    public Cor1() {
        super();
        this.decimalValue = 1;
        this.romanNumeralValue = "I";
        this.next = null;
    }
} 
```

用作转换器“接口”的类，公开转换特定数字的方法。

```
public class Converter {
    private static int MAX_VALUE = 5000;
    private static int MIN_VALUE = 0;
    private static String ERROR_TOO_BIG = "Value is too big!";
    private static String ERROR_TOO_SMALL = "Value is too small!";

    public String convertThisIntToRomanNumerals(int decimal) {
        Cor1000 startingCor = new Cor1000();
        if (decimal >= MAX_VALUE)
            return ERROR_TOO_BIG;
        if (decimal <= MIN_VALUE)
            return ERROR_TOO_SMALL;

        String numeralsWithoutConversion = startingCor.convert(decimal);
        return numeralsWithoutConversion;
    }
} 
```

和客户端代码（在我的例子中是一个 JUnit 测试）。

```
@Test
public void assertConversionWorks() {
    Assert.assertEquals("MMMMCMXCIX", converter.convertThisIntToRomanNumerals(4999));
    Assert.assertEquals("CMXCIX", converter.convertThisIntToRomanNumerals(999));
    Assert.assertEquals("CMLXXXIX", converter.convertThisIntToRomanNumerals(989));
    Assert.assertEquals("DCXXVI", converter.convertThisIntToRomanNumerals(626));
    Assert.assertEquals("DCXXIV", converter.convertThisIntToRomanNumerals(624));
    Assert.assertEquals("CDXCVIII", converter.convertThisIntToRomanNumerals(498));
    Assert.assertEquals("CXXIII", converter.convertThisIntToRomanNumerals(123));
    Assert.assertEquals("XCIX", converter.convertThisIntToRomanNumerals(99));
    Assert.assertEquals("LI", converter.convertThisIntToRomanNumerals(51));
    Assert.assertEquals("XLIX", converter.convertThisIntToRomanNumerals(49));
} 
```

[在我的Github 帐户](https://github.com/ChrisLeNeve/interview-practice/tree/master/numerals)上查看整个示例。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-07-27T14:37:38.050

基于 OP 自己的解决方案的替代解决方案，利用`enum`. 此外，还包括解析器和往返测试。

```
public class RomanNumber {
    public enum Digit {
        M(1000, 3),
        CM(900, 1),
        D(500, 1),
        CD(400, 1),
        C(100, 3),
        XC(90, 1),
        L(50, 1),
        XL(40, 1),
        X(10, 3),
        IX(9, 1),
        V(5, 1),
        IV(4, 1),
        I(1, 3);

        public final int value;
        public final String symbol = name();
        public final int maxArity;

        private Digit(int value, int maxArity) {
            this.value = value;
            this.maxArity = maxArity;
        }
    }

    private static final Digit[] DIGITS = Digit.values();

    public static String of(int number) {
        if (number < 1 || 3999 < number) {
            throw new IllegalArgumentException(String.format(
                    "Roman numbers are only defined for numbers between 1 and 3999 (%d was given)",
                    number
            ));
        }

        StringBuilder sb = new StringBuilder();
        for (Digit digit : DIGITS) {
            int value = digit.value;
            String symbol = digit.symbol;

            while (number >= value) {
                sb.append(symbol);
                number -= value;
            }
        }

        return sb.toString();
    }

    public static int parse(String roman) {
        if (roman.isEmpty()) {
            throw new NumberFormatException("The empty string does not comprise a valid Roman number");
        }

        int number = 0;
        int offset = 0;
        for (Digit digit : DIGITS) {
            int value = digit.value;
            int maxArity = digit.maxArity;
            String symbol = digit.symbol;

            for (int i = 0; i < maxArity && roman.startsWith(symbol, offset); i++) {
                number += value;
                offset += symbol.length();
            }
        }
        if (offset != roman.length()) {
            throw new NumberFormatException(String.format(
                    "The string '%s' does not comprise a valid Roman number",
                    roman
            ));
        }
        return number;
    }

    /** TESTS */
    public static void main(String[] args) {

        /* Demonstrating round-trip for all possible inputs. */

        for (int number = 1; number <= 3999; number++) {
            String roman = of(number);
            int parsed = parse(roman);
            if (parsed != number) {
                System.err.format(
                        "ERROR: number: %d, roman: %s, parsed: %d\n",
                        number,
                        roman,
                        parsed
                );
            }
        }

        /* Some illegal inputs. */

        int[] illegalNumbers = { -1, 0, 4000, 4001 };
        for (int illegalNumber : illegalNumbers) {
            try {
                of(illegalNumber);
                System.err.format(
                        "ERROR: Expected failure on number %d\n",
                        illegalNumber
                );
            } catch (IllegalArgumentException e) {
                // Failed as expected.
            }
        }

        String[] illegalRomans = { "MMMM", "CDCD", "IM", "T", "", "VV", "DM" };
        for (String illegalRoman : illegalRomans) {
            try {
                parse(illegalRoman);
                System.err.format(
                        "ERROR: Expected failure on roman %s\n",
                        illegalRoman
                );
            } catch (NumberFormatException e) {
                // Failed as expected.
            }
        }
    }
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-02-05T09:52:14.383

在看到这里的一些答案后，我不得不发布这个。我认为我的算法是最容易理解的，即使在相对较大的范围内，性能损失也不重要。我也遵守标准化的编码约定，而不是这里的一些用户。

*平均转换时间：0.05ms（基于转换所有数字1-3999并除以3999）*

```
public static String getRomanNumeral(int arabicNumber) {

    if (arabicNumber > 0 && arabicNumber < 4000) {

        final LinkedHashMap<Integer, String> numberLimits = 
            new LinkedHashMap<>();

        numberLimits.put(1, "I");
        numberLimits.put(4, "IV");
        numberLimits.put(5, "V");
        numberLimits.put(9, "IX");
        numberLimits.put(10, "X");
        numberLimits.put(40, "XL");
        numberLimits.put(50, "L");
        numberLimits.put(90, "XC");
        numberLimits.put(100, "C");
        numberLimits.put(400, "CD");
        numberLimits.put(500, "D");
        numberLimits.put(900, "CM");
        numberLimits.put(1000, "M");

        String romanNumeral = "";

        while (arabicNumber > 0) {
            int highestFound = 0;
            for (Map.Entry<Integer, String> current : numberLimits.entrySet()){
                if (current.getKey() <= arabicNumber) {
                    highestFound = current.getKey();
                }
            }
            romanNumeral += numberLimits.get(highestFound);
            arabicNumber -= highestFound;
        }

        return romanNumeral;

    } else {
        throw new UnsupportedOperationException(arabicNumber 
            + " is not a valid Roman numeral.");
    }
} 
```

首先，您必须考虑罗马数字仅在 <1-4000 的区间内），但这可以通过简单的 if 和抛出的异常来解决。然后，您可以尝试在给定整数中找到最大的集合罗马数字，如果找到，则将其从原始数字中减去并将其添加到结果中。重复新获得的数字，直到你达到零。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2020-02-26T10:20:37.053

我们可以避免循环，如果使用此解决方案：

```
public class RomanNumber {

    private final static Supplier<TreeMap<Integer, String>> romanNumerals = () -> {
        final TreeMap<Integer, String> map = new TreeMap<>();
        map.put(1000, "M");
        map.put(900, "CM");
        map.put(500, "D");
        map.put(400, "CD");
        map.put(100, "C");
        map.put(90, "XC");
        map.put(50, "L");
        map.put(40, "XL");
        map.put(10, "X");
        map.put(9, "IX");
        map.put(5, "V");
        map.put(4, "IV");
        map.put(1, "I");
        return map;
    };

    private static Function<TreeMap<Integer, String>, Function<Integer, String>> numeralConverter = map -> number -> Optional
            .ofNullable(map.floorKey(number))
            .filter(number::equals)
            .map(map::get)
            .or(() -> Optional
                    .ofNullable(map.floorKey(number))
                    .map(num -> map.get(num) + RomanNumber.numeralConverter.apply(map).apply(number - num))
            ).orElse("NaN");

    public static Function<Integer, String> toRoman = numeralConverter.apply(romanNumerals.get());
} 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-10-26T19:37:43.027

这可能会有所帮助：

```
using System;

using System.Text;

public class Test
{

public static string ToRoman(int number)
{
    StringBuilder br=new StringBuilder("");
    while(number!=0)
    {
        if(number>=1000)
        {
            br.Append("M");
            number-=1000;   
        }
        if(number>=900)
        {
            br.Append("CM");
            number-=900;    
        }
        if(number>=500)
        {
            br.Append("D");
            number-=500;    
        }
        if(number>=400)
        {
            br.Append("CD");
            number-=400;    
        }
        if(number>=100)
        {
            br.Append("C");
            number-=100;    
        }
        if(number>=90)
        {
            br.Append("XC");
            number-=90; 
        }
        if(number>=50)
        {
            br.Append("L");
            number-=50; 
        }
        if(number>=40)
        {
            br.Append("XL");
            number-=40; 
        }
        if(number>=10)
        {
            br.Append("X");
            number-=10; 
        }
        if(number>=9)
        {
            br.Append("IX");
            number-=9;  
        }
        if(number>=5)
        {
            br.Append("V");
            number-=5;  
        }
        if(number>=4)
        {
            br.Append("IV");
            number-=4;  
        }
        if(number>=1)
        {
            br.Append("I");
            number-=1;  
        }
    }
    return br.ToString();
}
public static void Main()
{
    Console.WriteLine(ToRoman(int.Parse(Console.ReadLine())));
}
} 
```

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2019-04-12T14:02:31.483

首先将数字分解为其十进制因子，如 995 = 900 + 90 + 5 然后递归转换每个因子

```
public class IntegerToRoman {
  private Map<Integer, String> romanChars = new HashMap<>();

  public IntegerToRoman() {
    romanChars.put(1, "I");
    romanChars.put(5, "V");
    romanChars.put(10, "X");
    romanChars.put(50, "L");
    romanChars.put(100, "C");
    romanChars.put(500, "D");
    romanChars.put(1000, "M");
    romanChars.put(5000, "V|");
 }

 public String intToRoman(int num) {
    if (num == 0) {
        return "";
    }
    int decimalFact = 0;
    StringBuilder result = new StringBuilder();
    for (int i = (int)Math.log10(num); i >= 0; i--) {
        int divisor = (int) Math.pow(10, i);
        decimalFact = num - num % divisor;
        result.append(convertDecimalFact(decimalFact));
        num = num % divisor;
    }
    return result.toString();
}

private String convertDecimalFact(int decimalFact){
  if(decimalFact == 0){return "";}
  int[] keyArray = romanChars.keySet().stream().mapToInt(key -> key) 
       .sorted().toArray(); 

  for(int i =0 ; i+1<keyArray.length ; i++){
      if( keyArray[i] <= decimalFact && decimalFact<= keyArray[i+1]  ){
         int bigger1stDgt = getLeftMostNum(keyArray[i+1]);
         int decimalFact1stDgt = getLeftMostNum(decimalFact);
         return decimalFact1stDgt >= bigger1stDgt-1 ? 
                intToRoman(keyArray[i+1]-decimalFact)+romanChars.get(keyArray[i+1]): 
                romanChars.get(keyArray[i])+intToRoman(decimalFact - keyArray[i]);
      }
  }      
  return "";
}

private int getLeftMostNum(int number) {
    int oneDgt = Integer.valueOf(Integer.valueOf(number).toString()
                 .substring(0, 0 +1));
    if(number<10){
        return oneDgt;
    }       
    int twoDgts = Integer.valueOf(Integer.valueOf(number).toString()
                  .substring(0, 0 +2));
    return twoDgts==10 ? twoDgts : oneDgt;
}

public static void main(String[] args) {

    IntegerToRoman solution = new IntegerToRoman();
    System.out.format(" Decimal 3 -> Roman %s \n ", solution.intToRoman(3));
    System.out.format("Decimal 4 -> Roman %s \n ", solution.intToRoman(4));
    System.out.format("Decimal 8 -> Roman %s \n ", solution.intToRoman(8));
    System.out.format("Decimal 58 -> Roman %s \n ", solution.intToRoman(58));
    System.out.format("Decimal 344 -> Roman %s \n ", solution.intToRoman(344));
    System.out.format("Decimal 995 -> Roman %s \n ", solution.intToRoman(995));
    System.out.format("Decimal 1994 -> Roman %s \n ", solution.intToRoman(1994));
} 
```

}

输出如下：

十进制 3 -> 罗马 III

十进制 4 -> 罗马四

十进制 8 -> 罗马八

十进制 58 -> 罗马 LVIII

十进制 344 -> 罗马 CCCCLIV

十进制 995 -> 罗马 CMXCV

十进制 1994 -> 罗马字 MCMXCIV

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-01-08T17:55:46.903

为了跟上技术的步伐，这里有一个使用流和自定义收集器的 Java 8 版本，无需循环或 if 语句：

```
import java.util.Arrays;
import java.util.Collections;
import java.util.Set;
import java.util.function.BiConsumer;
import java.util.function.BinaryOperator;
import java.util.function.Function;
import java.util.function.Supplier;
import java.util.stream.Collector;
import java.util.stream.IntStream;

public class RomanNumeral {

    public static void main(String arg[]) {
        IntStream.range(1, 4000).forEach(value -> System.out.println( Arrays.stream(Mark.values()).collect(new MarkCollector<Mark>(value)).toString()));
    }

    enum Mark {
        M(1000), CM(900), D(500), CD(400), C(100), XC(90), L(50), XL(40), X(10), IX(9), V(5), IV(4), I(1);

        private final int value;

        private Mark(int value) { this.value = value; }

        public int value() { return value; }
    }

    static class MarkCollector<T extends Mark> implements Collector<T, StringBuilder, StringBuilder> {

        private final int[] valueholder = new int[1];

        MarkCollector(int value) { valueholder[0] = value; }

        @Override
        public Supplier<StringBuilder> supplier() { return () -> StringBuilder::new; }

        @Override
        public BiConsumer<StringBuilder, T> accumulator() {
            return (builder, mark) -> {
                builder.append(String.join("", Collections.nCopies(valueholder[0] / mark.value(), mark.name())));
                valueholder[0] = valueholder[0] % mark.value();
            };
        }

        @Override
        public BinaryOperator<StringBuilder> combiner() { return null; }

        @Override
        public Function<StringBuilder, StringBuilder> finisher() { return Function.identity(); }

        @Override
        public Set<Characteristics> characteristics() { return Collections.singleton(Characteristics.IDENTITY_FINISH); }
    }
} 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-02-05T15:06:35.153

```
private String convertToRoman(int num) {
  String result = "";
  while(num > 0){
    if(num >= 1000){
        result += "M";
        num -= 1000;
    }else if(num >= 900){
        result += "CM";
        num -= 900;
    }
    else if(num >= 500){
        result += "D";
        num -= 500;
    }else if(num >= 400){
        result += "CD";
        num -= 400;
    }else if(num >= 100){
        result += "C";
        num -= 100;
    }else if(num >= 90){
        result += "XC";
        num -= 90;
    }else if(num >= 50){
        result += "L";
        num -= 50;
    }else if(num >= 40){
        result += "XL";
        num -= 40;
    }
    else if(num >= 10){
        result += "X";
        num -= 10;
    }else if(num >= 9){
        result += "IX";
        num -= 9;
    }
    else if(num >= 5){
        result += "V";
        num -= 5;
    }else if(num >= 4){
        result += "IV";
        num -= 4;
    }else if(num >= 1){
        result += "I";
        num -= 1;
    }

    else{
      break;
    }
  }

  return result;
} 
```

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2016-05-30T22:16:28.143

最简单的解决方案：

```
public class RomanNumerals {

    private static int [] arabic = {50, 40, 10, 9, 5, 4, 1};

    private static String [] roman = {"L", "XL", "X", "IX", "V", "IV", "I"};

    public static String convert(int arabicNumber) {

        StringBuilder romanNumerals = new StringBuilder();
        int remainder = arabicNumber;

        for (int i=0;i<arabic.length;i++) {

            while (remainder >= arabic[i]) {
                romanNumerals.append(roman[i]);
                remainder -= arabic[i];
            }
        }

        return romanNumerals.toString();
    }
} 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2020-02-05T21:02:57.757

尽管已经提出了很多解决方案。

我想下面的内容会简短明了：

```
public class IntegerToRoman {
    public static String intToRoman(int number) {
        String[] thousands = {"", "M", "MM", "MMM"};
        String[] hundreds = {"", "C", "CC", "CCC", "CD", "D", "DC", "DCC", "DCCC", "CM"};
        String[] tens = {"", "X", "XX", "XXX", "XL", "L", "LX", "LXX", "LXXX", "XC"};
        String[] units = {"", "I", "II", "III", "IV", "V", "VI", "VII", "VIII", "IX"};

        return thousands[number / 1000]
                + hundreds[(number % 1000) / 100]
                + tens[(number % 100) / 10]
                + units[number % 10];
    }

    public static void main(String[] args) {
        int[] numbers = {1, 2, 3, 5, 10, 14, 17, 20, 25, 38, 49, 63, 72, 81, 97, 98, 99, 100, 101, 248, 253, 799, 1325, 1900, 2000, 2456, 1715};

        final Instant startTimeIter = Instant.now();
        for (int number : numbers) {
            System.out.printf("%4d -> %8s\n", number, intToRoman(number));
        }
        final Instant endTimeIter = Instant.now();
        System.out.printf("Elapsed time: %d ms\n\n", Duration.between(startTimeIter, endTimeIter).toMillis());
    }
} 
```

***输出：***

```
 1 ->        I
   2 ->       II
   3 ->      III
   ...
2456 ->  MMCDLVI
1715 ->   MDCCXV
Elapsed time: 66 ms 
```

逻辑很简单：

*   我们只是从左到右遍历整数
*   并为每个数字取适当的数组值（千、百......）
*   这种方法可以转换直到`3000`数字

* * *

## 回答 #29

> 赞同：-3
> 
> 时间：2015-07-08T10:26:49.047

```
import java.util.Scanner;
import java.io.*; 
```

然后

```
try {

    Scanner input = new Scanner(new File("lettered.in"));

    int dataCollect = input.nextInt();

    int sum = 0;

    String lineInput = "";

    for (int i = 0; i <= dataCollect; i++) {

        while (input.hasNext()) {

            lineInput = input.next();
            char lineArray[] = lineInput.toCharArray();

            for (int j = 0; j < lineArray.length; j++) {

                switch(lineArray[j]) {
                case 'A': {
                    sum += 1;
                    continue;
                }
                case 'B': {
                    sum += 10;
                    continue;
                }
                case 'C': {
                    sum += 100;
                }
                case 'D': {
                    sum += 1000;
                    continue;
                }
                case 'E': {
                    sum += 10000;
                    continue;
                }
                case 'F': {
                    sum += 100000;
                    continue;
                }
                case: 'G': {
                    sum += 1000000;
                    continue;
                }
                case 'X': {
                    System.out.println(sum);
                    sum = 0;
                    continue;
                }
                default: {}
                }
            }
        }
    }
} catch (FileNotFoundException fileNotFound) {
    System.out.println("File has not been found.");
} 
```

# iphone - 在 UITableViewCell 中隐藏 UIImageView 的角落

> ID：12967898
> 
> 赞同：1
> 
> 时间：2012-10-19T05:28:58.030
> 
> 标签：iphone, objective-c, ios5

我有一个`UIImageView`里面`UITableViewCell`的`UITableViewStyleGrouped`。我将图像放置在圆角表格单元格中的 (0,0) 位置。当我运行应用程序时，我发现它`UIImageView`仍然显示它的左角。单元格内的 Imageview 没有被剪裁。任何人都可以在不设置`UIImageView`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:36:42.850

我认为这样做的方法是使用图层蒙版和角半径。方法如下：

```
UIBezierPath *maskPath = [UIBezierPath bezierPathWithRoundedRect:frame
                                                           byRoundingCorners:UIRectCornerAllCorners
                                                                 cornerRadii:CGSizeMake(5.0, 5.0)];
            // Create the shape layer and set its path
            CAShapeLayer *maskLayer = [CAShapeLayer layer];
            maskLayer.frame = frame;
            maskLayer.path = maskPath.CGPath;
            // Set the newly created shape layer as the mask for the image view's layer
            imageView.layer.mask = maskLayer;
imageView.layer.cornerRadius = 5.0; 
```

假设这`frame`是您的图像视图的框架。而且，别忘了`#import <QuartzCore/QuartzCore.h>`。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:39:32.470

您可以尝试将单元格的`clipsToBounds`属性设置为`YES`并查看是否可以为您提供所需的结果。

# mips - 延迟槽 MIPS 的顺序

> ID：12967899
> 
> 赞同：2
> 
> 时间：2012-10-19T05:29:01.283
> 
> 标签：mips, spim, pcspim

假设我们有一个加载指令，然后是另一个加载指令，那么执行顺序是什么？例子：

```
lui $t0, 0x1000    #(1)
lbu $t1, ($t0)     #(2)
addi $t0, $t0, 1   #(3) 
```

我用Spim对其进行了测试，结果是（1）->（2）->（3），我无法理解，因为加载指令应该考虑加载延迟槽。

# vim - 如何在vim中自动关闭括号？

> ID：12967901
> 
> 赞同：4
> 
> 时间：2012-10-19T05:29:09.093
> 
> 标签：vim

我开始使用 vim 进行大量编码，尤其是 C。虽然我在 vimrc 文件中添加了一些技巧，用于代码颜色格式、行号等，但我想知道是否有办法实现以下目标功能：

这 -

```
int main() { 
```

变成了这个——

```
int main() {

} 
```

有没有人有任何想法或建议？只要能避免我再次忘记另一个支架，我就会尝试任何方法！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:57:34.183

有很多插件可以“聪明地”做到这一点：[autoclose](http://www.vim.org/scripts/script.php?script_id=2009)，[closepairs](http://www.vim.org/scripts/script.php?script_id=2373)，[其他......</a>我使用](http://www.vim.org/scripts/script_search_results.php?keywords=pair&script_type=&order_by=creation_date&direction=descending&search=search)[delimitmate](http://www.vim.org/scripts/script.php?script_id=2754)。

但你也可以采用低技术的方式：

```
inoremap { {<cr>}<C-o>O 
```

# iis - 调用 Exchange Web 服务时出现 401 错误

> ID：12967907
> 
> 赞同：3
> 
> 时间：2012-10-19T05:29:43.860
> 
> 标签：iis, exchangewebservices, http-status-code-401

创建将连接到 Exchange Web 服务并检索当前用户的收件箱项目的网页。需要集成身份验证。我们不希望任何人登录。

将 IIS 配置为执行 Windows 身份验证并在 web.config 中设置以下参数。

这使它正常工作，但前提是该网站在其托管的服务器上被调用。如果我在另一个工作站上调用相同的 URL，我会得到 (401) Unauthorized。

如果页面在主机服务器上执行时针对交换正确验证了自己，为什么当从客户端工作站调用同一页面时，同样的事情不工作？在这两种情况下，Windows/域登录用户 ID 是相同的。下面是代码如何针对 Exchange 进行身份验证。

```
ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2007_SP1);
service.Url = new Uri("https://hostname/EWS/Exchange.asmx");
service.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials; 
```

有谁知道这里的罪魁祸首是什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T20:24:18.550

尝试使用：

```
service.Credentials = new WebCredentials("user", "passwordd", "domain"); 
```

它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T17:57:38.187

(401) 未经授权的错误是指由于用户名和密码错误，您无法登录。你应该这样尝试

```
 ExchangeService service = new ExchangeService(ExchangeVersion.Exchange2007_SP1);
        service.Credentials = new NetworkCredential(username, password);
        service.TraceEnabled = true;

        service.Url = new Uri("https://hostname/EWS/Exchange.asmx");
        ExportMIMEEmail(service, count); //call to export mails; 
```

上面的代码对我有用

# string - 在 Pascal 中执行字符串搜索

> ID：12967909
> 
> 赞同：1
> 
> 时间：2012-10-19T05:29:47.347
> 
> 标签：string, pascal

我刚刚开始使用 Dev-Pascal 玩 Pascal，我想知道如何搜索字符串。我尝试使用 String<> 和 AnsiCompareText 来搜索用户输入的字符串。[我怎样才能在这个库存程序](http://pastebin.com/LjDC8Svw)中使用一种方法来搜索用户输入的字符串？

例如，如果我输入“星际迷航：寻找史波克”的信息，然后搜索“星际迷航：寻找史波克”，它应该会返回这部电影，以及它的所有信息，就像你看过一样所有的信息。（如果这没有意义，请运行程序）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:56:57.427

遍历所有字符串并简单地比较字符串以查看是否匹配

像大多数语言一样，有几种比较方法

*   只需 = 运算符 -> 字符串应该完全匹配大小写敏感度和所有
*   pos(substr,mystring)>0 检查 substr 是否在 mystring 中的任何位置
*   ansicomparetext 比较不​​区分大小写。

请注意 dev-pascal 使用自 2005 年以来不受支持的旧版本的 Free pascal。我建议您升级到基于相同（Free Pascal）编译器的当前版本的最新[Lazarus](http://lazarus.freepascal.org "拉撒路")

# sql - 如果语句包含 UNION、INTERSECT 或 EXCEPT 运算符，则 ORDER BY 项必须出现在选择列表中

> ID：12967911
> 
> 赞同：0
> 
> 时间：2012-10-19T05:29:59.180
> 
> 标签：sql, sql-server, tsql, stored-procedures

以下是我的存储过程，但在执行时出现以下错误：

> 消息 104，级别 16，状态 1，过程 ACEsp_AuditInvoice，第 84 行如果语句包含 UNION、INTERSECT 或 EXCEPT 运算符，则 ORDER BY 项必须出现在选择列表中。

请查看我的存储过程，并告诉我如何避免上述错误。提前致谢

```
USE [FAC]
GO
/****** Object:  StoredProcedure [dbo].[ACEsp_AuditInvoice]    Script Date: 10/18/2012 09:26:49 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

-- =============================================
-- Author:      Ryan
-- Create date: 18 Oct 2012

-- version: 12.10
-- Description: Originated from ACEsp_InvVsListPrice, modified for invoice auditing 
-- parameter by date, month and year
-- Additional 10 columns for invoice auditing
-- =============================================

--[dbo].[ACEsp_AuditInvoice] '2012-09-17','2012-09-17','SEPTEMBER','2012'

ALTER PROCEDURE [dbo].[ACEsp_AuditInvoice] 
    -- Add the parameters for the stored procedure here
    @dtfrom datetime,
    @dtto datetime,
    @MNTH varchar(12),
    @YR INT
    --@prcMakro varchar(15)
WITH RECOMPILE

AS

create table #brand (
    [CODE] [char](15) COLLATE SQL_Latin1_General_CP1_CI_AS ,
    [IVBRAND] [char](255) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL 
)

create table #SubCat (
    [CODE] [char](15) COLLATE SQL_Latin1_General_CP1_CI_AS ,
    [IVSUBCAT] [char](255) COLLATE SQL_Latin1_General_CP1_CI_AS NOT NULL    
)

BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;
    DECLARE @SDFROM VARCHAR(20)
    DECLARE @SDTO VARCHAR(20)

    SET @SDFROM = CONVERT(VARCHAR(10), @DTFROM, 101) + ' 00:00:00'
    SET @DTFROM = CAST(@SDFROM AS DATETIME)

    SET @SDTO = CONVERT(VARCHAR(10), @DTTO, 101) + ' 23:59:59'
    SET @DTTO = CAST(@SDTO AS DATETIME)

    insert into #brand
    select USCATVAL, Image_URL
    from IV40600
    where USCATNUM = 2

    insert into #SubCat
    select USCATVAL, Image_URL
    from IV40600
    where USCATNUM = 4

    -- Insert statements for procedure here
    select 'posted' as Trx, d.quantity, d.qtytoinv, d.qtycance, (d.qtytoinv - d.qtyfulfi) 'qtyfulfivar', 
        (u.equomqty * d.qtyfulfi) 'qtybaseuom', 
        (d.XTNDPRCE - 
        (d.qtyfulfi*u.equomqty) *       
            isnull(p.psitmval, 
                ISNULL((SELECT psitmval from iv10402 
                        WHERE prcShid = 'BASE PRICE' 
                        AND itemnmbr = d.itemnmbr 
                        AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                    WHERE prcShid = 'BASE PRICE' 
                                                    AND itemnmbr = d.itemnmbr 
                                                    AND UOFM = D.UOFM))
                )) 'variance',

        CASE(d.qtyfulfi*u.equomqty) *       
            isnull(p.psitmval, 
                ISNULL((SELECT psitmval from iv10402 
                        WHERE prcShid = 'BASE PRICE' 
                        AND itemnmbr = d.itemnmbr 
                        AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                    WHERE prcShid = 'BASE PRICE' 
                                                    AND itemnmbr = d.itemnmbr 
                                                    AND UOFM = D.UOFM))
                )
            WHEN 0 THEN 0
            ELSE
            (d.XTNDPRCE /  
            ((d.qtyfulfi*u.equomqty) *      
            isnull(p.psitmval, 
                ISNULL((SELECT psitmval from iv10402 
                        WHERE prcShid = 'BASE PRICE' 
                        AND itemnmbr = d.itemnmbr 
                        AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                    WHERE prcShid = 'BASE PRICE' 
                                                    AND itemnmbr = d.itemnmbr 
                                                    AND UOFM = D.UOFM))
                )))-1
            end as 'percentvar',

        p.PRCSHID, h.docdate, h.bachnumb, h.ReqShipDate,
        d.lnitmseq, d.locncode,  d.UNITPRCE, 
        p.psitmval as [LIST PRICE], i.stndcost, d.qtybsuom, c.slprsnid, sp.slprsnfn, 
        sp.sprsnsln, c.salsterr, st.slterdsc, h.custnmbr, h.custname, 
        c.shrtname as 'CUSTOGROUP', c.custclas as 'CUSTOCLAS', c2.ZIP as 'CHANSEG',
        h.sopnumbe, d.itemnmbr, d.itemdesc, 
        case i.itemtype
            WHEN 1 THEN 'SALES INVENTORY'
            WHEN 2 THEN 'DISCONTINUED'
            WHEN 3 THEN 'KITS'
        end as 'ITEMTYPE',
        d.qtyfulfi, d.uofm, d.XTNDPRCE, u.equivuom 'BASEUOM', u.equomqty 'PACKING', 
        d.qtyfulfi*u.equomqty 'bqty',

        isnull( (SELECT TOP 1 LISTPRICE FROM tbl_disco_historical_baseuom HH  WHERE HH.ITEMNMBR = D.ITEMNMBR AND HH.BASEUOM = U2.BASEUOFM AND HH.LEFFECTDATE >= H.DOCDATE ORDER BY HH.LEFFECTDATE DESC),
            isnull(p.psitmval, 
                    ISNULL((SELECT psitmval from iv10402 
                            WHERE prcShid = 'BASE PRICE' 
                            AND itemnmbr = d.itemnmbr 
                            AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                        WHERE prcShid = 'BASE PRICE' 
                                                        AND itemnmbr = d.itemnmbr 
                                                        AND UOFM = D.UOFM))
                    )) as 'BASE PRICE – LIST PRICE PER BUOM',

        isnull(p.psitmval*d.qtyfulfi*u.equomqty,
                    ISNULL((SELECT psitmval from iv10402 
                         WHERE prcShid = 'BASE PRICE' 
                         AND itemnmbr = d.itemnmbr 
                         AND UOFM = U.EQUIVUOM ), (SELECT psitmval from iv10402 
                                                    WHERE prcShid = 'BASE PRICE' 
                                                    AND itemnmbr = d.itemnmbr 
                                                    AND UOFM = D.UOFM))
                * d.qtyfulfi*u.equomqty
               )
                AS 'EXTND PRICE by BASE PRICE-BUOM',    
        p1.psitmval as 'MAKRO PRICE – LIST PRICE', 
        p1.psitmval*d.qtyfulfi as 'EXTND PRICE BY MAKRO',
        d.qtyfulfi*u.equomqty AS 'QTYBASEUOM', 
        ISNULL(
        (SELECT TOP 1 LISTPRICE FROM tbl_disco_historical_baseuom HH  WHERE HH.ITEMNMBR = D.ITEMNMBR AND HH.BASEUOM = U2.BASEUOFM AND HH.LEFFECTDATE >= H.DOCDATE ORDER BY HH.LEFFECTDATE DESC),
        isnull(p.psitmval, 
                ISNULL((SELECT psitmval from iv10402 
                        WHERE prcShid = 'BASE PRICE' 
                        AND itemnmbr = d.itemnmbr 
                        AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                    WHERE prcShid = 'BASE PRICE' 
                                                    AND itemnmbr = d.itemnmbr 
                                                    AND UOFM = D.UOFM))
                ))
                as 'BaseUomListPrice',

            (d.qtyfulfi*u.equomqty) *       
            isnull(p.psitmval, 
                ISNULL((SELECT psitmval from iv10402 
                        WHERE prcShid = 'BASE PRICE' 
                        AND itemnmbr = d.itemnmbr 
                        AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                    WHERE prcShid = 'BASE PRICE' 
                                                    AND itemnmbr = d.itemnmbr 
                                                    AND UOFM = D.UOFM))
                )           
                as 'BaseUomTotalListPrice', 

        (d.qtyfulfi*u.equomqty) *       
            isnull(p.psitmval, 
                ISNULL((SELECT psitmval from iv10402 
                        WHERE prcShid = 'BASE PRICE' 
                        AND itemnmbr = d.itemnmbr 
                        AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                    WHERE prcShid = 'BASE PRICE' 
                                                    AND itemnmbr = d.itemnmbr 
                                                    AND UOFM = D.UOFM))
                ) - D.XTNDPRCE AS 'TOTAL DISCOUNT',
            a.IVBRAND as 'BRAND', b.IVSUBCAT as 'SubCat',
            dbo.ACEfunc_CUSTOTYPE2(c.CUSTCLAS,c.SALSTERR) AS 'CUSTTYPE', D.MRKDNAMT*d.qtyfulfi AS 'MARKDOWN',
            cast(i.uscatvls_6 as float) as 'ITEM REPORT SEQUENCE',
            rtrim(ltrim(cast(uscatvls_1 as varchar(4)))) + '-' + bh.image_url as 'BRAND HANDLER',
            I.ITMCLSCD 'ITEM CLASS', d.qtyfulfi*u.equomqty/uu.equomqty AS 'CASEQTY',
            ii.inet1 as 'ABC CAT',
            ISNULL(APL.PCPRICE,isnull(p.psitmval, 
                    ISNULL((SELECT psitmval from iv10402 
                            WHERE prcShid = 'BASE PRICE' 
                            AND itemnmbr = d.itemnmbr 
                            AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                        WHERE prcShid = 'BASE PRICE' 
                                                        AND itemnmbr = d.itemnmbr 
                                                        AND UOFM = D.UOFM))
                    )) as 'APL(SAG) Piece Price', h.docid as 'SOP TYPE ID'

    from sop30200 h
        inner join sop30300 d on (h.sopnumbe = d.sopnumbe)
        inner join IV00101 i on (d.itemnmbr = i.itemnmbr)
        inner join RM00101 c on (h.custnmbr = c.custnmbr)
        left join RM00102 c2 on (c.custnmbr = c2.custnmbr and c2.adrscode = 'MAIN')
        left join RM00301 sp on (sp.slprsnid = c.slprsnid)
        left join RM00303 st on (st.salsterr = c.salsterr)
        LEFT JOIN iv40202 u on (i.uomschdl = u.uomschdl and d.uofm = u.uofm and u.qtybsuom <> 0)
        LEFT JOIN iv40201 u2 on (i.uomschdl = u2.uomschdl)
        left join iv10402 p1 on (d.itemnmbr = p1.itemnmbr and p1.PRCSHID = 'PLMAKRO'
            and d.uofm = p1.uofm)
        left join iv10402 p on (d.itemnmbr = p.itemnmbr and p.PRCSHID = 'BASE PRICE'
            and U.EQUIVUOM = p.uofm)
        left join #brand a on (i.uscatvls_2 = a.code)
        left join #SubCat b on (i.uscatvls_4 = b.code)
        left join iv40600 bh on (i.uscatvls_1 = bh.uscatval AND bh.uscatnum = 1)
        left join iv40202 uu on (i.uomschdl = uu.uomschdl and i.selnguom = uu.uofm and uu.qtybsuom <> 0)
        LEFT join sy01200 as ii on (ii.master_id = d.itemnmbr and ii.master_type = 'ITM') 
        LEFT JOIN T0_APL APL ON (D.ITEMNMBR=APL.ITEMNMBR AND APL.MNTH = @MNTH AND APL.YR = @YR)

UNION ALL

    select 'unposted' as Trx, d.quantity, d.qtytoinv, d.qtycance, (d.qtytoinv - d.qtyfulfi) 'qtyfulfivar', 
        (u.equomqty * d.qtyfulfi) 'qtybaseuom', 
        (d.XTNDPRCE - 
        (d.qtyfulfi*u.equomqty) *       
            isnull(p.psitmval, 
                ISNULL((SELECT psitmval from iv10402 
                        WHERE prcShid = 'BASE PRICE' 
                        AND itemnmbr = d.itemnmbr 
                        AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                    WHERE prcShid = 'BASE PRICE' 
                                                    AND itemnmbr = d.itemnmbr 
                                                    AND UOFM = D.UOFM))
                )) 'variance',

        CASE(d.qtyfulfi*u.equomqty) *       
            isnull(p.psitmval, 
                ISNULL((SELECT psitmval from iv10402 
                        WHERE prcShid = 'BASE PRICE' 
                        AND itemnmbr = d.itemnmbr 
                        AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                    WHERE prcShid = 'BASE PRICE' 
                                                    AND itemnmbr = d.itemnmbr 
                                                    AND UOFM = D.UOFM))
                )
            WHEN 0 THEN 0
            ELSE
            (d.XTNDPRCE /  
            ((d.qtyfulfi*u.equomqty) *      
            isnull(p.psitmval, 
                ISNULL((SELECT psitmval from iv10402 
                        WHERE prcShid = 'BASE PRICE' 
                        AND itemnmbr = d.itemnmbr 
                        AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                    WHERE prcShid = 'BASE PRICE' 
                                                    AND itemnmbr = d.itemnmbr 
                                                    AND UOFM = D.UOFM))
                )))-1
            end as 'percentvar',

        p.PRCSHID, h.docdate, h.bachnumb, h.ReqShipDate,
        d.lnitmseq, d.locncode,  d.UNITPRCE, 
        p.psitmval as [LIST PRICE], i.stndcost, d.qtybsuom, c.slprsnid, sp.slprsnfn, 
        sp.sprsnsln, c.salsterr, st.slterdsc, h.custnmbr, h.custname, 
        c.shrtname as 'CUSTOGROUP', c.custclas as 'CUSTOCLAS', c2.ZIP as 'CHANSEG',
        h.sopnumbe, d.itemnmbr, d.itemdesc, 
        case i.itemtype
            WHEN 1 THEN 'SALES INVENTORY'
            WHEN 2 THEN 'DISCONTINUED'
            WHEN 3 THEN 'KITS'
        end as 'ITEMTYPE',
        d.qtyfulfi, d.uofm, d.XTNDPRCE, u.equivuom 'BASEUOM', u.equomqty 'PACKING', 
        d.qtyfulfi*u.equomqty 'bqty',

        isnull( (SELECT TOP 1 LISTPRICE FROM tbl_disco_historical_baseuom HH  WHERE HH.ITEMNMBR = D.ITEMNMBR AND HH.BASEUOM = U2.BASEUOFM AND HH.LEFFECTDATE >= H.DOCDATE ORDER BY HH.LEFFECTDATE DESC),
            isnull(p.psitmval, 
                    ISNULL((SELECT psitmval from iv10402 
                            WHERE prcShid = 'BASE PRICE' 
                            AND itemnmbr = d.itemnmbr 
                            AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                        WHERE prcShid = 'BASE PRICE' 
                                                        AND itemnmbr = d.itemnmbr 
                                                        AND UOFM = D.UOFM))
                    )) as 'BASE PRICE – LIST PRICE PER BUOM',

        isnull(p.psitmval*d.qtyfulfi*u.equomqty,
                    ISNULL((SELECT psitmval from iv10402 
                         WHERE prcShid = 'BASE PRICE' 
                         AND itemnmbr = d.itemnmbr 
                         AND UOFM = U.EQUIVUOM ), (SELECT psitmval from iv10402 
                                                    WHERE prcShid = 'BASE PRICE' 
                                                    AND itemnmbr = d.itemnmbr 
                                                    AND UOFM = D.UOFM))
                * d.qtyfulfi*u.equomqty
               )
                AS 'EXTND PRICE by BASE PRICE-BUOM',    
        p1.psitmval as 'MAKRO PRICE – LIST PRICE', 
        p1.psitmval*d.qtyfulfi as 'EXTND PRICE BY MAKRO',
        d.qtyfulfi*u.equomqty AS 'QTYBASEUOM', 
        ISNULL(
        (SELECT TOP 1 LISTPRICE FROM tbl_disco_historical_baseuom HH  WHERE HH.ITEMNMBR = D.ITEMNMBR AND HH.BASEUOM = U2.BASEUOFM AND HH.LEFFECTDATE >= H.DOCDATE ORDER BY HH.LEFFECTDATE DESC),
        isnull(p.psitmval, 
                ISNULL((SELECT psitmval from iv10402 
                        WHERE prcShid = 'BASE PRICE' 
                        AND itemnmbr = d.itemnmbr 
                        AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                    WHERE prcShid = 'BASE PRICE' 
                                                    AND itemnmbr = d.itemnmbr 
                                                    AND UOFM = D.UOFM))
                ))
                as 'BaseUomListPrice',

            (d.qtyfulfi*u.equomqty) *       
            isnull(p.psitmval, 
                ISNULL((SELECT psitmval from iv10402 
                        WHERE prcShid = 'BASE PRICE' 
                        AND itemnmbr = d.itemnmbr 
                        AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                    WHERE prcShid = 'BASE PRICE' 
                                                    AND itemnmbr = d.itemnmbr 
                                                    AND UOFM = D.UOFM))
                )           
                as 'BaseUomTotalListPrice', 

        (d.qtyfulfi*u.equomqty) *       
            isnull(p.psitmval, 
                ISNULL((SELECT psitmval from iv10402 
                        WHERE prcShid = 'BASE PRICE' 
                        AND itemnmbr = d.itemnmbr 
                        AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                    WHERE prcShid = 'BASE PRICE' 
                                                    AND itemnmbr = d.itemnmbr 
                                                    AND UOFM = D.UOFM))
                ) - D.XTNDPRCE AS 'TOTAL DISCOUNT',
            a.IVBRAND as 'BRAND', b.IVSUBCAT as 'SubCat',
            dbo.ACEfunc_CUSTOTYPE2(c.CUSTCLAS,c.SALSTERR) AS 'CUSTTYPE', D.MRKDNAMT*d.qtyfulfi AS 'MARKDOWN',
            cast(i.uscatvls_6 as float) as 'ITEM REPORT SEQUENCE',
            rtrim(ltrim(cast(uscatvls_1 as varchar(4)))) + '-' + bh.image_url as 'BRAND HANDLER',
            I.ITMCLSCD 'ITEM CLASS', d.qtyfulfi*u.equomqty/uu.equomqty AS 'CASEQTY',
            ii.inet1 as 'ABC CAT',
            ISNULL(APL.PCPRICE,isnull(p.psitmval, 
                    ISNULL((SELECT psitmval from iv10402 
                            WHERE prcShid = 'BASE PRICE' 
                            AND itemnmbr = d.itemnmbr 
                            AND UOFM = U.EQUIVUOM), (SELECT psitmval from iv10402 
                                                        WHERE prcShid = 'BASE PRICE' 
                                                        AND itemnmbr = d.itemnmbr 
                                                        AND UOFM = D.UOFM))
                    )) as 'APL(SAG) Piece Price', h.docid as 'SOP TYPE ID'

    from sop10100 h
        inner join sop10200 d on (h.sopnumbe = d.sopnumbe)
        inner join IV00101 i on (d.itemnmbr = i.itemnmbr)
        inner join RM00101 c on (h.custnmbr = c.custnmbr)
        left join RM00102 c2 on (c.custnmbr = c2.custnmbr and c2.adrscode = 'MAIN')
        left join RM00301 sp on (sp.slprsnid = c.slprsnid)
        left join RM00303 st on (st.salsterr = c.salsterr)
        LEFT JOIN iv40202 u on (i.uomschdl = u.uomschdl and d.uofm = u.uofm and u.qtybsuom <> 0)
        LEFT JOIN iv40201 u2 on (i.uomschdl = u2.uomschdl)
        left join iv10402 p1 on (d.itemnmbr = p1.itemnmbr and p1.PRCSHID = 'PLMAKRO'
            and d.uofm = p1.uofm)
        left join iv10402 p on (d.itemnmbr = p.itemnmbr and p.PRCSHID = 'BASE PRICE'
            and U.EQUIVUOM = p.uofm)
        left join #brand a on (i.uscatvls_2 = a.code)
        left join #SubCat b on (i.uscatvls_4 = b.code)
        left join iv40600 bh on (i.uscatvls_1 = bh.uscatval AND bh.uscatnum = 1)
        left join iv40202 uu on (i.uomschdl = uu.uomschdl and i.selnguom = uu.uofm and uu.qtybsuom <> 0)
        LEFT join sy01200 as ii on (ii.master_id = d.itemnmbr and ii.master_type = 'ITM') 
        LEFT JOIN T0_APL APL ON (D.ITEMNMBR=APL.ITEMNMBR AND APL.MNTH = @MNTH AND APL.YR = @YR)     

    where
        h.soptype = 3 and d.CMPNTSEQ = 0 and h.voidstts = 0 and h.pstgstus = 2
        and h.docdate >= @DTFROM and h.docdate <= @DTTO
    --order by percentvar, h.custname, d.sopnumbe, d.itemnmbr

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:36:15.667

如果您`ORDER BY`在查询中使用语句，则必须在查询的选择列表中提及。例如，我给了你链接。如果您仔细阅读它，您将了解`ORDER BY`在 SQL 中使用该子句。

[http://msdn.microsoft.com/en-us/library/ms188385.aspx](http://msdn.microsoft.com/en-us/library/ms188385.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:41:35.830

您正在选择 h.sopnumbe，但按 d.sopnumbe 排序

尝试更改顺序以使用 h.sopnumbe

# c# - 在 MVC 4 应用程序中正确处理 HttpAntiForgeryException 的方法

> ID：12967917
> 
> 赞同：38
> 
> 时间：2012-10-19T05:30:31.743
> 
> 标签：c#, asp.net-mvc, antiforgerytoken

这是场景：

我有一个登录页面，当用户签名时，它被重定向到主页应用程序页面。然后用户正在使用浏览器后退按钮，现在他在登录页面上。他尝试再次登录，但现在抛出异常：

> HttpAntiForgeryException (0x80004005)：提供的防伪令牌用于用户“”，但当前用户是“用户名”。

我知道这与缓存有关。我使用自定义 NoCache 过滤器禁用了登录操作的浏览器缓存，该过滤器设置了所有必需的标头 - 无缓存、无存储、必须重新验证等。但是

*   这不适用于所有浏览器
*   尤其是 Safari（大多数情况下是移动设备）完全忽略此类设置

我将尝试进行黑客攻击并强制 safari mobile 刷新，但这不是我所期望的。

我想知道我是否可以：

*   处理异常而不向用户显示任何问题存在（对用户完全透明）
*   **通过替换防伪令牌用户名来防止此问题，**这将允许用户再次登录而不会出现此异常，如果我与浏览器缓存相关的黑客将在下一版本的浏览器中停止工作。
*   我真的不想依赖浏览器的行为，因为每个人的行为都不同。

**更新 1**

澄清一下，我知道如何处理 MVC 中的错误。问题是这种处理错误根本没有解决我的问题。错误处理的基本思想是重定向到带有好消息的自定义错误页面。但我想防止这个错误发生，而不是以用户可见的方式处理它。通过句柄，我的意思是捕获用户名替换或其他合适的操作，然后继续登录。

**更新 2**

我添加了以下对我有用的解决方案。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-09-10T10:49:13.697

经过一段时间的调查，我想我找到了一些方法来为用户摆脱这个错误。它并不完美但至少不显示错误页面：

我创建了基于以下内容的过滤器`HandleErrorAttribute`：

```
 [SuppressMessage("Microsoft.Performance", "CA1813:AvoidUnsealedAttributes", 
        Justification = "This attribute is AllowMultiple = true and users might want to override behavior.")]
    [AttributeUsage(AttributeTargets.Class | AttributeTargets.Method, Inherited = true, AllowMultiple = false)]
    public class LoginAntiforgeryHandleErrorAttribute : FilterAttribute, IExceptionFilter
    {
        #region Implemented Interfaces

        #region IExceptionFilter

        /// <summary>
        /// </summary>
        /// <param name="filterContext">
        /// The filter context.
        /// </param>
        /// <exception cref="ArgumentNullException">
        /// </exception>
        public virtual void OnException(ExceptionContext filterContext)
        {
            if (filterContext == null)
            {
                throw new ArgumentNullException("filterContext");
            }

            if (filterContext.IsChildAction)
            {
                return;
            }

            // If custom errors are disabled, we need to let the normal ASP.NET exception handler
            // execute so that the user can see useful debugging information.
            if (filterContext.ExceptionHandled || !filterContext.HttpContext.IsCustomErrorEnabled)
            {
                return;
            }

            Exception exception = filterContext.Exception;

            // If this is not an HTTP 500 (for example, if somebody throws an HTTP 404 from an action method),
            // ignore it.
            if (new HttpException(null, exception).GetHttpCode() != 500)
            {
                return;
            }

            // check if antiforgery
            if (!(exception is HttpAntiForgeryException))
            {
                return;
            }

            filterContext.Result = new RedirectToRouteResult(
                new RouteValueDictionary
                {
                    { "action", "Index" }, 
                    { "controller", "Home" }
                });

            filterContext.ExceptionHandled = true;
        }

        #endregion

        #endregion
    } 
```

然后我将此过滤器应用于登录 POST 操作：

```
[HttpPost]
[AllowAnonymous]
[ValidateAntiForgeryToken]
[LoginAntiforgeryHandleError]
public ActionResult Login(Login model, string returnUrl)
{ 
```

该解决方案的主要思想是将防伪异常重定向到主索引操作。如果用户仍然不会未经身份验证，它将显示**登录**页面，如果用户已经通过身份验证，它将显示**索引**页面。

**更新 1** 此解决方案存在一个潜在问题。如果有人使用不同的凭据登录，那么在出错时应该添加额外的登录运行时 - 注销以前的用户并登录新用户。不处理这种情况。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-04-09T14:03:26.857

如果您只有一个或几个功能受到影响，那么创建过滤器可能在技术上有点矫枉过正。一个更简单但非通用的解决方案是简单地删除`[ValidateAntiForgeryToken]`特定方法的 并在检查用户是否登录后添加手动验证。

```
if (User.Identity.IsAuthenticated)
{
    return RedirectToAction("Index", "Home");
}
System.Web.Helpers.AntiForgery.Validate();
/* proceed with authentication here */ 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-22T15:16:15.430

您应该能够通过添加操作过滤器来处理您的错误来处理异常。

```
[HandleError(View="AntiForgeryExceptionView", ExceptionType = typeof(HttpAntiForgeryException))] 
```

为此，请确保在您的 web.config 中打开自定义错误。

```
<customErrors mode="On"/> 
```

您还可以查看此[博客](http://blogs.msdn.com/b/gduthie/archive/2011/03/17/get-to-know-action-filters-in-asp-net-mvc-3-using-handleerror.aspx)以获取有关处理错误的更多信息。

**编辑**由于您使用的是 MVC4 并且博客是关于 MVC3 的，您还可以查看[MSDN 库 - HandleErrorAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.handleerrorattribute%28v=vs.100%29.aspx)，但版本应该没有什么区别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-08-25T07:12:04.110

一个老问题 - 但我今天遇到了这个问题，我解决它的方法是重定向到注销操作，如下所示：

```
public ActionResult Login(string returnUrl) 
{
    if (WebSecurity.IsAuthenticated)
        return RedirectToAction("LogOff");

    ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-06T18:19:28.110

在您之前进行身份验证后，登录时会出现该消息。
重现步骤：
1.) 打开您的登录页面并验证您未通过身份验证。
2.）复制选项卡并在第二个选项卡上登录。
3.) 返回第一个选项卡并尝试登录（无需重新加载页面）。
4.) 你看到这个错误；如果您的登录操作装饰有以下 `[ValidateAntiForgeryToken]`属性：

> System.Web.Mvc.HttpAntiForgeryException：
> 提供的防伪令牌用于用户“”，
> 但当前用户是“YourUserNameOrEmailAddress”。

`[ValidateAntiForgeryToken]`此帮助器执行与属性相同的验证：

```
System.Web.Helpers.AntiForgery.Validate() 
```

从登录操作中删除`[ValidateAntiForgeryToken]`并改用此方法。

现在，当用户已经通过身份验证时，它将重定向到主页。
如果已通过身份验证，但以其他人身份登录，则注销当前用户并在以新用户身份进行身份验证之前继续验证防伪令牌。

```
if (User.Identity.IsAuthenticated)
{
    if (User.Identity.Name == UserName)//User is already Logged in.
        return RedirectToAction("Index", "Home");
    else//Else: User is Logging In as someone else, so Log Out the Current User.
        ResetUser();
}
System.Web.Helpers.AntiForgery.Validate();//Replaces [ValidateAntiForgeryToken].
//Add your Login Logic below here. 
```

然后，添加此功能以安全地重置用户，而无需再次重新加载页面：

```
private void ResetUser()
{
    //Add any additional custom Sign-Out/Log-Off Logic here.
    Session.Abandon();
    FormsAuthentication.SignOut();

    //Source: https://stackoverflow.com/questions/4050925/page-user-identity-isauthenticated-still-true-after-formsauthentication-signout
    //The User.Identity is Read-Only, but it reads from HttpContext.User, which we may Reset.  Otherwise it will still show as Authenticated until the next Page Load.
    HttpContext.User = new System.Security.Principal.GenericPrincipal(new System.Security.Principal.GenericIdentity(string.Empty), null);//Do not set Identity to null, because other parts of the code may assume it's blank.
} 
```

.net Core 想法：
我应该注意，如果您使用 .net Core 并且`[AutoValidateAntiforgeryToken]`在您的控制器上有属性 - 或者您已经向整个站点添加了一个全局过滤器`services.AddMvc(options => { options.Filters.Add(new AutoValidateAntiforgeryTokenAttribute()); });`- 那么您可以选择装饰您的登录操作避免自动验证异常的方法，并让您有机会在继续手动调用验证助手方法*之前*`[IgnoreAntiforgeryToken]`重定向或注销。 注意：我还没有使用 .net Core 来验证这一点，但是在这里添加我的发现以防万一。

# ruby-on-rails - 使用 pem 文件与 capistrano 一起部署

> ID：12967918
> 
> 赞同：27
> 
> 时间：2012-10-19T05:30:37.720
> 
> 标签：ruby-on-rails, ssh, amazon-ec2, capistrano

我们有一个 EC2 实例，我们的 capistrano 设置需要 ssh。要通过 ssh 正常连接，我使用 .pem 文件连接到服务器。使用 capistrano 部署时如何使用此 .pem 文件？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2014-09-21T11:41:26.043

对于 capistrano 3，语法有些不同

```
set :pty, true

set :ssh_options, {
  forward_agent: true,
  auth_methods: ["publickey"],
  keys: ["/path/to/key.pem"]
} 
```

* * *

## 回答 #2

> 赞同：37
> 
> 时间：2012-10-19T07:54:59.913

在`deploy.rb`设置这些配置值：

```
default_run_options[:pty] = true
ssh_options[:forward_agent] = true
ssh_options[:auth_methods] = ["publickey"]
ssh_options[:keys] = ["/path/to/key.pem"] 
```

对于 Capistrano 3 使用：

```
set :pty, true
set :ssh_options, {
  forward_agent: true,
  auth_methods: %w[publickey],
  keys: %w[/path/to/key.pem]
} 
```

# c# - C#使用输入值检查枚举成员

> ID：12967922
> 
> 赞同：0
> 
> 时间：2012-10-19T05:30:47.610
> 
> 标签：c#, events, delegates, enums

假设我有一个包含 10 个事件的`enum`调用，其值为 10001 - 10010 。我想使用输入值（例如 10007）来检查枚举中的成员是否具有相应的值。一旦找到具有相应输入值的事件，我就会获取该事件并通过连接一个委托向它注册一个方法（假设我拥有所有必要的代码）。我只需要知道枚举中的成员是否具有与输入值相同的值，然后为该事件注册一个新方法。如何仅使用输入值查找某个事件？我猜一个或任何其他循环不是我最好的选择。`eEventID``mEvent1 - mEvent10``int``for-loop`

**编辑：**这是我到目前为止...

```
public delegate void EventDel(int mEvtIdx);

public enum eVtEvtId
{
    Event1,
    Event2,
    Event3,
    Event4,
    Event5,
    Event6,
    Event7,
    Event8,
    Event9,
    Event10,

}

public void Subscribe(int mInVal)
{
    eVtEvtID mEventID;
    int mEventIndex = mInVal;

    if(Enum.IsDefined(typeof(mEventID), mEventIndex))
    {
        mEventID += EventDelegate([insert method here])
    }

    else
    {
        // will warn the user that the event does
        // not yet exist in the enum
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:33:47.127

使用枚举的[TryParse](http://msdn.microsoft.com/en-us/library/dd783499.aspx)方法。

基本上是这样的：

```
YourEnum enumVal;
if (Enum.TryParse(yourInputString, out enumVal)) {
   // use enumVal here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:48:50.270

这是一个示例，演示如何获取一个值（从控制台读取它）将其映射到与枚举成员对应的数值，定位相应的事件（在本例中为`Program`类）并将事件处理程序附加到它。

```
using System;

namespace ConsoleApplication6
{
    public enum Events
    {
        Event1 = 10001,
        Event2 = 10002,
        Event3 = 10003,
        Event4 = 10004,
        Event5 = 10005,
        Event6 = 10006,
        Event7 = 10007,
        Event8 = 10008,
        Event9 = 10009,
        Event10 = 10010
    }

    public class Program
    {
        public static event Action Event1;
        public static event Action Event2;
        public static event Action Event3;
        public static event Action Event4;
        public static event Action Event5;
        public static event Action Event6;
        public static event Action Event7;
        public static event Action Event8;
        public static event Action Event9;
        public static event Action Event10;

        private static void OnEvent1()
        {
            if(Event1 != null)
            {
                Event1();
            }
        }

        private static void OnEvent2()
        {
            if (Event2 != null)
            {
                Event2();
            }
        }

        private static void OnEvent3()
        {
            if (Event3 != null)
            {
                Event3();
            }
        }

        private static void OnEvent4()
        {
            if (Event4 != null)
            {
                Event4();
            }
        }

        private static void OnEvent5()
        {
            if (Event5 != null)
            {
                Event5();
            }
        }

        private static void OnEvent6()
        {
            if (Event6 != null)
            {
                Event6();
            }
        }

        private static void OnEvent7()
        {
            if (Event7 != null)
            {
                Event7();
            }
        }

        private static void OnEvent8()
        {
            if (Event8 != null)
            {
                Event8();
            }
        }

        private static void OnEvent9()
        {
            if (Event9 != null)
            {
                Event9();
            }
        }

        private static void OnEvent10()
        {
            if (Event10 != null)
            {
                Event10();
            }
        }

        static void Main(string[] args)
        {
            while(true)
            {
                var input = Console.ReadLine();

                if(input == "q")
                {
                    return;
                }

                int value;

                if(int.TryParse(input, out value))
                {
                    var eventValue = (Events) value;
                    var eventName = Enum.GetName(typeof (Events), eventValue);

                    var matchingEvent = typeof(Program).GetEvent(eventName);

                    if (matchingEvent != null)
                    {
                        var action = new Action(() => Console.WriteLine("Event " + eventName + " has been handled"));
                        matchingEvent.AddEventHandler(null, action);
                    }

                }

                OnEvent1();
                OnEvent2();
                OnEvent3();
                OnEvent4();
                OnEvent5();
                OnEvent6();
                OnEvent7();
                OnEvent8();
                OnEvent9();
                OnEvent10();
            }
        }
    }
} 
```

# javascript - 使用 javascript 设置选择框值

> ID：12967927
> 
> 赞同：0
> 
> 时间：2012-10-19T05:31:22.497
> 
> 标签：javascript, html

> **可能重复：**
> [JavaScript - 用数组填充下拉列表](https://stackoverflow.com/questions/9895082/javascript-populate-drop-down-list-with-array)

我有以下`select`盒子，

```
<select name="supplier" id="supplier"><option></option></select> 
```

我想使用设置这个`select`框的值`Javascript`。`Javascript`变量可以是 a或`String`an `Array`。这意味着如果它是一个，那么框中`String`将只有一个选项。`select`如果它是一个数组，则该`select`框应包含多个`options`. 有人请帮我找到解决方案。提前致谢....

我试过了

```
document.getElementById('supplier').value="Option 1"; 
```

但它不工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:35:35.863

如果您要进行大量 DOM 操作，我建议您使用[jQuery ：](http://jquery.com/)

```
$("#supplier").append('<option value=1>My option</option>'); 
```

没有 jQuery：

```
var select = document.getElementById("supplier");
select.options[select.options.length] = new Option('Text 1', 'Value1'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:35:52.490

试试这个：

[http://jsfiddle.net/f4yEt/](http://jsfiddle.net/f4yEt/)

```
function addOptions(input) {
    var sel = document.getElementById("supplier");
    if (typeof input === "string") {
        input = [input];
    }
    sel.options.length = 0;
    for (var i = 0; i < input.length; i++) {
        sel.options[sel.options.length] = new Option(input[i], input[i]);
        // This APPENDS options
    }
} 
```

该`input`参数可以是字符串或数组（从技术上讲，它只检查字符串，将其转换为数组以进行迭代），然后为数组中的每个项目动态附加一个选项。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T05:35:53.773

为此，您需要在 .

```
var select = document.getElementById('supplier');
var option = document.createElement('option');
select.add(option); 
```

这是一个更大的教程，它考虑了 IE/FF 的差异： [http ://www.mredkj.com/tutorials/tutorial005.html](http://www.mredkj.com/tutorials/tutorial005.html)

**但**

我会考虑为此使用jquery。Sujathan 的答案有 jquery。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T06:20:40.897

数组的jQuery方法

```
var array = ["item 1", "item 2", "item 3"];
$.each(array, function(i, value) {
  $('#supplier').append($(document.createElement('option')).attr('value', i + 1).text(value));
});​ 
```

[http://jsfiddle.net/NN8KS/](http://jsfiddle.net/NN8KS/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-19T05:53:41.583

```
//var varOpt = "test";
var varOpt = new Array('test1', 'test2', 'test3');
var sel = document.getElementById('supplier');

if( typeof varOpt === 'string' ){
   sel.add(new Option(varOpt , varOpt));
} else {
    for(key in varOpt) {
        sel.add(new Option(varOpt[key], varOpt[key]));
    }
} 
```

# php - 更新：API 调用返回带有 ASCII 和 HTML 字符混合的 XML，用于元素上的打开和关闭标记（并导致问题）

> ID：12967931
> 
> 赞同：0
> 
> 时间：2012-10-19T05:31:55.643
> 
> 标签：php, xml, api, soap, encoding

解决了！！见下文

我正在使用供应商软件的 API。我正在使用 curl 进行 SOAP 调用，而我返回到变量的 XML 看起来很奇怪。

`print_r($response)`这是成功调用 API 后来自服务器的响应 的输出。

请注意以 . 开头的开始和结束标记的编码 HTML 而不是 ASCII 字符`&lt;SearchLocations&gt;`。

另请注意，当我将下面的 XML 放入变量中时（使用`<`and`>`而不是`&lt;`and `&gt;`），我的脚本运行良好，我能够解析和单步执行 XML 并通过 PHP 显示它 - 但出于某种原因XML 我收到“**警告：未知：节点不再存在于**”错误消息，因为它无法正确找到子节点。它挂在 SearchLocations 上，它告诉我失踪`<`并`>`导致问题。

我的 API 调用和标头：

```
$host = "server.myvendor.com";
$path = "/thefilefrommyhost.asmx";

function send_request_via_curl($host,$path,$content)
{
    $posturl = "https://" . $host . $path;
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $posturl);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_HTTPHEADER, Array("Content-Type: text/xml;charset=utf-8"));
    curl_setopt($ch, CURLOPT_HEADER, false);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $content);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    // curl_setopt($ch, CURLOPT_HTTPHEADER, $headers); // Not sending
    $response = curl_exec($ch);
    return $response;
}

$content = '<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
<GetLivePostLocations xmlns="http://tempuri.org/">
<Login>SomeID</Login>
<UserName>MyUsername</UserName>
<Password>Superman</Password>
</GetLivePostLocations>
</soap:Body>
</soap:Envelope>';

$response = send_request_via_curl($host,$path,$content);

if ($response)
{ 
    // parse and display
} 
```

返回的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <soap:Body>
        <GetLivePostLocationsResponse xmlns="http://tempuri.org/">   
            <GetLivePostLocationsResult>&lt;SearchLocations&gt;
                &lt;Table&gt;
                &lt;LocationId&gt;1035001&lt;/LocationId&gt;
                &lt;LocationName&gt;Albuquerque, New Mexico, USA&lt;/LocationName&gt;
                &lt;/Table&gt;
                &lt;Table&gt;
                &lt;LocationId&gt;1016003&lt;/LocationId&gt;
                &lt;LocationName&gt;Atlanta, Georgia, USA&lt;/LocationName&gt;
                &lt;/Table&gt;

                &lt;/SearchLocations&gt;
            </GetLivePostLocationsResult>
        </GetLivePostLocationsResponse>
    </soap:Body>
</soap:Envelope> 
```

因此，HTML 和 ASCII 的混合似乎给我带来了问题，并且无法弄清楚为什么它会这样回来，甚至无法解决。

解决了！

好吧，一个workaroudn - 我能够使用 html_entity_decode($response);

在解析能够修复错误的 XML 之前，它现在可以工作了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T06:21:08.177

很难说你的问题到底是什么，因为你没有告诉我们哪一行代码抛出了错误消息。

然而，对此的一般策略是：

1.  将 SOAP 响应解析为 XML
2.  获取文本内容`<GetLivePostLocationsResult>`
3.  将该文本内容解析为新的 XML 文档
4.  从第二个 XML 文档中提取您需要的任何数据

# ios - 为什么我在 xCode 中看不到用于展开 segues 的绿色小退出图标？

> ID：12967933
> 
> 赞同：2
> 
> 时间：2012-10-19T05:32:02.790
> 
> 标签：ios

我正在关注 Apple 的[Your Second App](http://developer.apple.com/library/ios/documentation/iPhone/Conceptual/SecondiOSAppTutorial/SecondiOSAppTutorial.pdf)教程。在 pdf 版本的第 75 页上，它在步骤 #3 中说控制从“取消”按钮拖动到场景停靠栏中展开 segue 的目标代理对象。我在场景停靠栏中没有看到绿色的退出图标（用于放松转场）。（见下面的截图）。我知道 unwind segues 是 xcode 的一个新特性。我正在使用“版本 4.4.1 (4F1003)”。是否有可能我的版本不支持展开转场？或者，本教程让我在主视图控制器中实现某些方法，将其“宣传”为展开 segues 的目的地。如果我在教程的那部分做错了什么，也许绿色的 unwind segue 图标不会显示？

我可以采取哪些步骤来调试它？

![在此处输入图像描述](../Images/06f8075b1a278774927ddfb5597e98bb.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:35:00.677

您至少需要 Mac App Store 免费提供的 Xcode 4.5。最新版本的 Xcode 包括 iOS6 SDK，当然还有：unwind segues（iOS6 功能）。

# ios - iOS：关闭 UIImagePickerController 后如何返回特定选项卡或上一个选项卡？

> ID：12967936
> 
> 赞同：1
> 
> 时间：2012-10-19T05:33:04.350
> 
> 标签：ios, camera, uitabbarcontroller, overlay

我的应用程序在多个选项卡中运行，其中一个运行带有 Overlayview 的相机。我在相机上有一个关闭按钮，我需要一些关于如何在关闭相机后立即加载上一个选项卡或特定选项卡的帮助。有人可以指出我解决这个问题的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T05:47:10.693

在进入相机视图之前，您必须保存前一个选项卡的索引，如果相机视图被取消，调用`[self.tabBarController setSelectedIndex:prevTabIndex]`，假设这`prevTabIndex`是以前选择的选项卡的索引。祝你好运！

**编辑：** 在您的`AppDelegate.h`put 属性中`previousIndex`，如下所示：

```
#import <UIKit/UIKit.h>

@interface AppDelegate : UIResponder <UIApplicationDelegate, UITabBarControllerDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (nonatomic, assign) int previousTabIndex;
@property (strong, nonatomic) UITabBarController *tabBarController;

@end 
```

在您的`AppDelegate.m`文件中，执行以下操作：

```
 #import "AppDelegate.h"

#import "FirstViewController.h"

#import "SecondViewController.h"

@implementation AppDelegate
@synthesize previousTabIndex;
- (void)dealloc
{
    [_window release];
    [_tabBarController release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
    // Override point for customization after application launch.
    UIViewController *viewController1, *viewController2;
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        viewController1 = [[[FirstViewController alloc] initWithNibName:@"FirstViewController_iPhone" bundle:nil] autorelease];
        viewController2 = [[[SecondViewController alloc] initWithNibName:@"SecondViewController_iPhone" bundle:nil] autorelease];
    } else {
        viewController1 = [[[FirstViewController alloc] initWithNibName:@"FirstViewController_iPad" bundle:nil] autorelease];
        viewController2 = [[[SecondViewController alloc] initWithNibName:@"SecondViewController_iPad" bundle:nil] autorelease];
    }
    self.tabBarController = [[[UITabBarController alloc] init] autorelease];
    self.tabBarController.viewControllers = @[viewController1, viewController2];
    [self.tabBarController setSelectedIndex:0];
    self.tabBarController.delegate = self;
    self.window.rootViewController = self.tabBarController;
    [self.window makeKeyAndVisible];
    return YES;
}

- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
{
    self.previousTabIndex = self.tabBarController.selectedIndex;
    return YES;
}

@end 
```

在您的相机视图中，您应该有一些方法会在用户点击取消按钮时被调用，如下所示：

```
- (IBAction)cancel:(id)sender {
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [self.tabBarController setSelectedIndex:appDelegate.previousTabIndex];
} 
```

希望这会有所帮助。如果这对您没有帮助，我真的建议您阅读一些 Objective-C 和 iOS 编程的基础知识。祝你好运！

**编辑#2**

对于情节提要，在`Tab Bar Controller`场景中添加`Object`模板，将其类设置为您的`AppDelegate`. Set`UITabbarController`的`delegate`出口到`AppDelegate`对象。在你的`AppDelegate`，像我第一次编辑一样添加属性，实现

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
{
    self.previousTabIndex = self.tabBarController.selectedIndex;
    return YES;
} 
```

在您的相机视图中，当用户取消视图时

```
AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    [self.tabBarController setSelectedIndex:appDelegate.previousTabIndex]; 
```

就这样！祝你好运两次！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:48:24.953

使用**tabBarControlller**的**selectedIndex**属性返回或移动到特定选项卡。使用 imagePickerController 的 didFinishPickingMediaWithInfo 移动到特定选项卡

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    imgview.image = [info objectForKey:UIImagePickerControllerEditedImage];
    [[picker parentViewController] dismissModalViewControllerAnimated:YES];
    self.tabBarController.selectedIndex = yourPreviousIndex or any index
} 
```

**编辑**像这样保存您的previousIndex：

```
Add int previousIndex in AppDelegate.h

(void)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewController
{
   previousIndex = self.tabBarController.selectedIndex;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T13:21:28.290

这适用于 iOS 9.0

```
UIStoryboard *myStoryBoard =[UIStoryboard storyboardWithName:[self.storyboard valueForKey:@"name"] bundle:nil];

UITabBarController *tabBarController = [myStoryBoard instantiateViewControllerWithIdentifier:@"tabStoryboardID"];

tabBarController.selectedIndex = 1;

[self presentViewController:tabBarController animated:YES completion:nil]; 
```

# jquery - 在 Chrome 扩展弹出窗口中验证表单不起作用

> ID：12967939
> 
> 赞同：0
> 
> 时间：2012-10-19T05:33:45.700
> 
> 标签：jquery, google-chrome-extension

我正在制作的 Chrome 扩展程序有一个 popup.html，其形式如下：

```
<head>
  <script src="myscript.js"></script>
</head>
<form id="myform" action="http://www.example.com/myurl.jsp" method="get" target="_blank">
  #<input type="text" size="10" name="numid" value="" />
  <input type="Submit" value="Go" />
</form> 
```

myscript.js 在 manifest.json “background” 和 “content_scripts” 部分中列出：

```
"background": { "scripts": ["myscript.js"] }`
"js": ["jquery-1.8.2.min.js", "myscript.js"] 
```

和 myscript.js 包含：

```
$(document).ready(function(){
  $('#myform').submit(function() {
  alert("alert!");
}); 
```

当我单击 Go 按钮或按表单的 enter 键时，如何让它显示 alert()？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T08:21:08.617

如果您只打算在弹出窗口中使用它，则不需要指定`popup.js`in 。`background``content_script`

警报未显示，因为您无法显示弹出窗口中的警报。而是尝试：

*   `document.getElementsByTagName('body')[0].innerHTML = "Works!"`（这将用一条消息替换整个弹出窗口）
*   或使用`console.log("Works!")`（这将向开发人员工具控制台输出文本 - 请务必查看弹出式开发人员工具，而不是当前页面开发人员工具）

* * *

**编辑：**您`myscript.js`似乎无效，您丢失了`});`. 另外，请注意您可能会错过提交回调中的代码执行结果，因为页面会立即重新加载。

```
$(document).ready(function(){
  $('#myform').submit(function() {
     alert("alert!");
  });
}); 
```

# php - 如何从 PHP（代码点火器）的标头中检索端口信息？

> ID：12967941
> 
> 赞同：0
> 
> 时间：2012-10-19T05:33:51.520
> 
> 标签：php, codeigniter, header, port, amazon-elastic-beanstalk

我正在尝试从 PHP 中的标头请求中获取端口信息。代码点火器要具体吗？

我试着做：

```
 $headers = apache_request_headers(); 
```

端口信息不可用。

我们使用 Amazon 的 Elastic Beanstalk 作为服务器。我们被告知：EC2 负载均衡器发送了一个名为“X-Forwarded-Proto”的标头，它会根据我们是 http 还是 https 而波动。

如果我尝试这样做：

```
 $headers = apache_request_headers(); 
    $port = $headers["X-Forwarded-Port"]; 
    echo "X-Forwarded-Port : " . $port; 
```

这给了我一个错误 - 2012-10-19 00:48:05 --> 严重性：通知 --> 未定义索引：X-Forwarded-Port

对于如何从标题中获取端口信息的任何想法，我将不胜感激！

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T06:05:31.090

```
$_SERVER['REMOTE_PORT'] for remote port
$_SERVER['SERVER_PORT'] for server port 
```

# ruby-on-rails - 嵌套输入字段不会显示

> ID：12967942
> 
> 赞同：0
> 
> 时间：2012-10-19T05:33:54.660
> 
> 标签：ruby-on-rails, nested, form-for

我有一个嵌套的两个模型嵌套在一个部分表单中，但 field_for 部分不会显示。我一直在使用漂亮的脚手架。任何帮助深表感谢！

**形成部分**

```
 <%= form_for @lesson do |f| %>
  <%= f.error_messages %>
  <p>
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </p>

  <p>
    <% f.fields_for :glossaries do |build| %>
        <%= build.label :word_one, "Engelska" %> <br/>
        <%= build.text_field :word_one %>
        <%= build.label :word_two, "Svenska" %> <br/>
        <%= build.text_field :word_two %>
    <% end %>
  </p>
  <p><%= f.submit %></p>
<% end %> 
```

**控制器**

```
 def new
    @lesson = Lesson.new
    3.times { @lesson.glossaries.build }
  end 
```

**词汇模型**

```
 class Glossary < ActiveRecord::Base
  attr_accessible :lesson_id, :word_one, :word_two
  belongs_to :lessons

end 
```

**课程模型**

```
 class Lesson < ActiveRecord::Base
  attr_accessible :name, :word_one, :word_two
  has_many :glossaries, :dependent => :destroy
  accepts_nested_attributes_for :glossaries
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T05:38:19.910

这是直接从您的来源复制和粘贴的吗？如果是，那么第 3 行的词汇表模型中有一个错字：

`belongs_to :lesson`， 不是`belongs_to :lessons`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:59:52.373

试试这个，写在你的课程模型中

```
attr_accessible :glossaries_attributes 
```

# c++ - cppunit断言失败时如何显示十六进制值

> ID：12967948
> 
> 赞同：2
> 
> 时间：2012-10-19T05:34:58.077
> 
> 标签：c++, unit-testing, cppunit

我使用 CPPUNIT_ASSERT_EQUAL(a, b) 来检查值 a 和 b。a 和 b 是无符号字符类型。因此，当此断言失败时，它将显示预期值和实际值。因为类型是无符号字符，所以预期值和实际值将显示为字符。例如，35 将显示为#。但这不是我想要的。当然， CPPUNIT_ASSERT_EQUAL((int)a, (int)b) 可能是一个解决方案，但看起来很奇怪。此外，最好将值显示为十六进制格式。但我不知道如何达到这一点。如果有人给出答案，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:51:18.117

我认为实现这种效果的唯一方法是适应`a`和/或`b`使用合适的类型来进行所需的比较，但格式不同于`unsigned char`. 这可能看起来像这样：

```
template <typename T>
struct as_hex_t
{
    as_hex_t(T const& value): d_value(value) {}
    T const& d_value;
};
bool operator== (as_hex_t<T> const& v0, as_hex_t<T> const& v1) {
    return v0.d_value == v1.d_value;
}
std::ostream& operator<< (std::ostream& out, as_hex_t const& value) {
    return out << std::hex << unsigned(value.d_value) << std::dec;
}
template <typenane T>
as_hex_t<T> as_hex(T const& val) { return as_hex_t<T>(val); }

CPPUNIT_ASSERT_EQUAL(as_hex(a), as_hex(b)); 
```

显然，适应值的类型只需要在合适的地方定义一次，就可以进入合适的宏。我不知道 CPPUNIT 但我可以想象这样的东西存在于某处。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:40:59.193

添加`#include <cstdio>`和使用`printf`功能。（[printf 参考](http://www.cplusplus.com/reference/clibrary/cstdio/printf/)）。

使用`%x`或`%X`将数字显示为十六进制。上面链接中的示例向您展示了， `printf ("Some different radixes: %d %x %o %#x %#o \n", 100, 100, 100, 100, 100);`

给出输出，

`Some different radixes: 100 64 144 0x64 0144`

# jquery - 删除 div 周围的 div

> ID：12967952
> 
> 赞同：2
> 
> 时间：2012-10-19T05:35:02.600
> 
> 标签：jquery

**我的 HTML**

```
<div class="wrapper">
  <div class="wrapper2">
     <div class="real_content"></div>
  </div>
</div> 
```

**问题**

我有什么办法可以删除周围的 2 个 div，`<div class="real_content"></div>`这样它就不会出现在我的网站的 HTML 和前端？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T05:37:16.687

您可以尝试`.replaceWith()`（[文档](http://api.jquery.com/replaceWith/)）：

```
$('.wrapper').replaceWith( $('.real_content') ); 
```

如果您更喜欢更相对的方式，还有一个`.unwrap()`函数（[docs ）：](http://api.jquery.com/unwrap/)

```
$('.real_content').unwrap().unwrap(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:38:11.377

如果您将其替换为 jQuery，该代码仍将出现在 HTML 源代码中，以隐藏它，否则您需要在服务器端执行此操作。但是，要使用 jQuery 替换 DIV，您可以使用[jQuery.replaceWith()](http://api.jquery.com/replaceWith/) -

```
var content = $('.real_content');
$('.wrapper').replaceWith(content); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T05:40:30.383

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-19T05:40:32.463

try `unwrap()`

```
$('.real_content').parent().unwrap(); 
```

# networking - 如果以太网帧中的 CRC 位有错误怎么办？

> ID：12967953
> 
> 赞同：4
> 
> 时间：2012-10-19T05:35:11.850
> 
> 标签：networking, ethernet, crc

以太网帧由 32 个 CRC（循环冗余校验）位组成，用于检查错误。如果 CRC 位本身被更改但消息/有效负载是正确的，会不会有很大的问题？
有没有办法检测、避免和纠正这种情况？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T05:59:16.087

不管 crc 本身是好是坏，只要它不匹配/验证有效载荷（即使有效载荷仍然是好的），这个以太网帧都被认为有一个 crc 错误，应该在 layer2 丢弃。

据我所知，通常我们不会对以太网进行任何错误“纠正”。此外， crc 用于错误检测，而不是纠正。

然而，主要是上层协议（比如 TCP）负责可靠的传输并执行它应该做的重传。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-19T17:40:45.753

如果消息的crc与消息后的crc不匹配，那么你只知道消息和crc的组合中某处有错误。你不知道哪个或在哪里或有多少。如果有不匹配，你有一个传输错误，你需要折腾整个东西。它将被重新传输。

# windows-8 - 在 C++ Metro 应用程序的发布模式下显示消息

> ID：12967954
> 
> 赞同：2
> 
> 时间：2012-10-19T05:35:18.460
> 
> 标签：windows-8, windows-runtime, visual-studio-2012

我`OutputDebugString`用于在 C++ Metro 应用程序调试模式下在输出窗口中打印消息。它工作正常。

当我将其更改为释放模式时，该消息不再出现在以下窗口中

![在此处输入图像描述](../Images/b2fd998436aa06f719828352a25ea719.png)

有没有其他方法可以使用，以便我可以在 Metro 应用程序的发布模式下显示消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T15:56:26.160

当我在从“空白应用程序”项目模板构建的示例 C++ 商店应用程序中尝试它时，它工作正常。只需添加一个按钮并实现其 Click 事件处理程序：

```
void App1::MainPage::Button_Click_1(Platform::Object^ sender, Windows::UI::Xaml::RoutedEventArgs^ e)
{
    OutputDebugString(L"Test\n");
} 
```

并测试了 Debug 和 Release 版本。您的屏幕截图显示错误的选择，您想要“调试”。唯一可能出现的故障是您在没有附加调试器的情况下运行发布版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:46:17.310

您可以使用自己的调试打印机

平台::详细信息::控制台::WriteLine

在 c++/cx 中

# r - 具有多个输入和输出的 Makefile

> ID：12967955
> 
> 赞同：10
> 
> 时间：2012-10-19T05:35:19.790
> 
> 标签：r, makefile

我想使用生成文件来更新由 R 代码生成的图形文件。R 代码位于目录中的各种文件中，`../R`并且都以`.R`. 图形文件在目录中`../figs`，都以`.pdf`or结尾`.png`。如果 R 文件的日期晚于任何图形文件，我想使用命令处理 R 文件

```
R --no-save < file.R 
```

我查看了各种示例生成文件，但找不到任何我可以适应的东西。

我目前的努力（不工作）如下：

```
PLOTDIR= ../figs
RDIR= ../R
RFILES= $(RDIR)/*.R
PLOTS= *.pdf *.png
FIGURES= $(PLOTDIR)/$(PLOTS)
$(FIGURES): $(RFILES)
    R --no-save < $< 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T08:46:05.927

您可以尝试以下方法。

诀窍是您需要从输入（.R 文件）中推断出输出

```
# Makefile
# Beware of indentation when copying use TABS

PLOTDIR = ../figs
RDIR = ../R

# list R files
RFILES = $(wildcard $(RDIR)/*.R)

# compute output file names
PDF_FIGS = $(RFILES:.R=.pdf)
PNG_FIGS = $(RFILES:.R=.png)

# relocate files in output folder
OUT_FILES = $(subst $(RDIR), $(PLOTDIR), $(PDF_FIGS) $(PNG_FIGS))

# first target is the default: simply do 'make'
all: $(OUT_FILES)

clean:
    rm $(OUT_FILES)

.PHONY: all clean

# need to split PNG from PDF rules
$(PLOTDIR)/%.png: $(RDIR)/%.R
    R --no-save < $<

$(PLOTDIR)/%.pdf $(PLOTDIR)/%.png: $(RDIR)/%.R
    R --no-save < $< 
```

**编辑**以反映我的评论：每个 R 脚本使用 1 个依赖项输出文件

```
PLOTDIR= ../figs
RDIR= ../R

# list R files
RFILES := $(wildcard $(RDIR)/*.R)

# relocate files in output folder
OUT_FILES=$(subst $(RDIR), $(PLOTDIR), $(RFILES:.R=.out))
#$(warning $(OUT_FILES))

# first target is the default: simply do 'make'
all: $(OUT_FILES)

clean:
    rm $(OUT_FILES)

.PHONY: all clean

$(PLOTDIR)/%.out: $(RDIR)/%.R
    R --no-save < $< && touch $@ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:53:50.373

一个有趣的问题。这在逻辑上很简单，但与 Make 喜欢做的事情背道而驰。

这似乎有效。它依赖于模式规则的一个模糊特性：如果模式规则有多个目标，Make 推断它只需要运行一次即可更新其所有目标。

```
PLOTDIR = ../figs
RDIR = ../R
RFILES = $(wildcard $(RDIR)/*.R)
FIGURES = $(wildcard $(PLOTDIR)/*.pdf $(PLOTDIR)/*.png)

all: $(FIGURES)

$(PLOTDIR)/%.pdf $(PLOTDIR)/%.png: $(RFILES)
        @for x in $?; do R --no-save \< $$x; done 
```

# ios - iOS：主要功能

> ID：12967956
> 
> 赞同：5
> 
> 时间：2012-10-19T05:35:29.887
> 
> 标签：ios

有人可以解释一下iOS应用程序中的主要功能是什么吗？谁在调用这个函数并输入正确的参数？

```
#import "AppDelegate.h"
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T06:17:40.990

`main()`是任何 C、C++ 或 Objective-C 程序的主要入口点。它基本上是由操作系统调用来启动程序的。（这并不完全正确——它比那复杂一点，但它不是一个糟糕的心智模型。）事实上，`main`不只是启动程序——它*就是*程序。程序在执行到结束时结束`main`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T05:38:38.940

> 主要功能到底在做什么？

它只调用`UIApplicationMain()`本质上创建应用程序委托的函数（从指定为其第四个参数的类）并设置应用程序的主运行循环。

> 谁在调用这个函数并输入正确的参数？

IOS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-29T07:19:58.220

使用 iOS 运行时，它在 main() 被调用之前加载，因此必须有更高级别的控制器充当 REAL MAIN()

# c# - 更改 DataGridView 标题单元格的文本对齐方式和字体大小

> ID：12967957
> 
> 赞同：26
> 
> 时间：2012-10-19T05:35:33.703
> 
> 标签：c#, datagridview

我正在尝试更改 DataGridView 的文本对齐方式和字体大小。所有列都是在运行时以编程方式创建的。这是代码..

```
private void LoadData()
{
    dgvBreakDowns.ColumnCount = 5;
    dgvBreakDowns.Columns[0].Name = "Breakdown No";
    dgvBreakDowns.Columns[1].Name = "Breakdown Type";
    dgvBreakDowns.Columns[2].Name = "Machine Type";
    dgvBreakDowns.Columns[3].Name = "Date";
    dgvBreakDowns.Columns[4].Name = "Completed";

    dgvBreakDowns.Columns[4].Visible = false;

    foreach (DataGridViewHeaderCell header in dgvBreakDowns.Rows)
    {
        header.Style.Alignment = DataGridViewContentAlignment.MiddleCenter;
        header.Style.Font = new Font("Arial", 12F, FontStyle.Bold, GraphicsUnit.Pixel);
    }
} 
```

此`LoadData()`方法在 Form 的构造函数中调用。列已创建，但其标题的更改不适用。我认为这是因为我的循环中的一个缺陷我`foreach (DataGridViewHeaderCell header in dgvBreakDowns.Rows)?`不确定。我尝试将其更改为`dgvBreakDowns.Columns`，我得到一个 InvalidCastException。如何选择标题单元格以应用这些更改？

我还有一个小问题。当我运行程序时，它看起来像这样。

![在此处输入图像描述](../Images/2dd705b4949c57c96f125442aa546dbd.png)

请注意，默认选择第一个单元格，因此它显示为蓝色。当然它不会影响任何东西，但它看起来有点丑陋和不整洁。有可能阻止它像那样选择单元格吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-19T05:41:49.877

试试这个（注意我在这里使用列而不是行）：

```
foreach(DataGridViewColumn col in dgvBreakDowns.Columns)
{
    col.HeaderCell.Style.Alignment = DataGridViewContentAlignment.MiddleCenter;
    col.HeaderCell.Style.Font = new Font("Arial", 12F, FontStyle.Bold, GraphicsUnit.Pixel);
} 
```

至于取消选择单元格，请尝试[`dgvBreakDowns.ClearSelection()`](http://msdn.microsoft.com/en-us/library/bxdf3ekh.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-04-27T10:00:08.553

或者试试这个：

```
dgvBreakDowns.Columns[4].HeaderCell.Style.Alignment = DataGridViewContentAlignment.BottomCenter; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-05-28T05:58:18.297

您可以使用`ColumnHeadersDefaultCellStyle.Alignment`with`MiddleCenter`作为其值。检查下面的代码：

```
dataGridView1.ColumnHeadersDefaultCellStyle.Alignment = DataGridViewContentAlignment.MiddleCenter; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-01-30T15:17:28.750

仅供参考；为了使控件正确显示自定义样式，需要考虑一些事项。在这种情况下，关于列标题；但这些确实适用于进一步的定制：

*   设置：“dataGridView.EnableHeadersVisualStyles”为假。
*   在 DatagridView 可见后应用样式。
*   对齐标题列；“ *AutoSizeColumnMode* ”必须设置为填充。

确保在控件可见后应用所有自定义样式；您可以使用“ *DataGridView_VisibleChanged* ”事件。

**DataGridView 可见更改事件**

```
/// <summary> Occurrs whenever the Control gets visible. </summary>
/// <param name="sender"></param>
/// <param name="e"></param>
private void DataGridView_VisibleChanged(object sender, EventArgs e)
{
    if (dataGridView.Visible)
    {
        DataGridView_AutoSizeColumn();
        DataGridView_CentreHeaders();
        // Etc...
    }
} 
```

**标题列 AutoSizeMode**

```
private void DataGridView_AutoSize()
{
   var col = dataGridView.Columns;

   for (int i = 0; i < col.Count; i++)
   {
      if (i == 0) { col[i].AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill; }
      if (i == 1) { col[i].AutoSizeMode = DataGridViewAutoSizeColumnMode.Fill; }
      // Etc...
    }
} 
```

**中心标题列文本和设置字体**

```
/// <summary> Centre Columns Headers. </summary>
private void DataGridView_CentreHeaders()
{
    // Centre Column Cells Content
    dataGridView.DefaultCellStyle.Alignment = DataGridViewContentAlignment.MiddleLeft;

    // Centre (Column and Row) Headers    
    dataGridView.ColumnHeadersDefaultCellStyle.Alignment = DataGridViewContentAlignment.MiddleCenter;

    // Set Font
    dataGridView.ColumnHeadersDefaultCellStyle.Font = new Font("Arial", 11F, FontStyle.Regular, GraphicsUnit.Pixel);
} 
```

# javascript - 如何从 OpenLayers.Control.DrawFeature 获取积分返回

> ID：12967967
> 
> 赞同：4
> 
> 时间：2012-10-19T05:36:20.447
> 
> 标签：javascript, overlay, openlayers, openstreetmap

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" debug="true">
  <head>

<title>Mapping project</title>
<link rel="stylesheet" href="default/style.css" type="text/css">
<link rel="stylesheet" href="example/style.css" type="text/css">
<script src="js/jquery-1.8.2.js"></script>
<script src="OpenLayers/OpenLayers.js"></script>
<script type="text/javascript">

  var fromProjection = new OpenLayers.Projection("EPSG:4326");   // Transform from WGS 1984
  var toProjection   = new OpenLayers.Projection("EPSG:900913"); // to Spherical Mercator Projection
  var extent = new OpenLayers.Bounds(85.27004687475169, 27.65583205563965, 85.37218539403848,27.74656781293908).transform(fromProjection,toProjection);

  var position       = new OpenLayers.LonLat(85.322136566277, 27.698144266444).transform( fromProjection, toProjection);
  var zoom           = 13; 
  var map, vectors, drawControls, wkt;
  var c=0; 

    function init(){
       var newLayer = new OpenLayers.Layer.OSM();
       var opt = {restrictedExtent : extent};
        vectors = new OpenLayers.Layer.Vector("Overlayers");

        map = new OpenLayers.Map("map", opt);
        map.addLayer(newLayer, vectors);
        map.addControl(new OpenLayers.Control.LayerSwitcher());
        map.addControl(new OpenLayers.Control.MousePosition());

        // var options = {
        //     hover: true,
        //     onSelect: displayWKT
        // };

        //Defining type of draw controls
        drawControls = {
            point: new OpenLayers.Control.DrawFeature(vectors,
                        OpenLayers.Handler.Point),
            line: new OpenLayers.Control.DrawFeature(vectors,
                        OpenLayers.Handler.Path),
            polygon: new OpenLayers.Control.DrawFeature(vectors,
                        OpenLayers.Handler.Polygon)
        };

        //Controls are add to the map
        for(var key in drawControls) {
            map.addControl(drawControls[key]);
        }
        wkt = new OpenLayers.Format.WKT();

        //Center positiona and height of zoom of the map is set here
        map.setCenter(position, zoom);  

        /*************************This is event register for mouse*******************************/

        map.events.register("click", map, function(e) {

            if(c==1){
              var lonlat = map.getLonLatFromPixel(e.xy).transform(map.getProjectionObject(), fromProjection);
              var lon = lonlat.lon;
              var lat = lonlat.lat;

               $('.form-block').css('display','block');  
               $('#lngval').attr('value',lon);              
               $('#latval').attr('value',lat); 

              var position= new OpenLayers.LonLat(lon,lat).transform( fromProjection, toProjection);
              var markers = new OpenLayers.Layer.Markers( "Markers" );
              map.addLayer(markers);
              markers.addMarker(new OpenLayers.Marker(position));
            }else{
              alert("please select any one control");
            }

      });

      /******************Mouse click events ends here******************************************/

    }

     function toggleControl(element) {
        for(key in drawControls) {
            var control = drawControls[key];
            if(element.value == key) {
                control.activate();
                c=1;
            } else {
                control.deactivate();
            }
        }
    }

    // function displayWKT(feature) {
    //     var str = wkt.write(feature);
    //     // not a good idea in general, just for this demo
    //    // str = str.replace(/,/g, ', ');
    //    // document.getElementById('wkt').innerHTML = str;
    //    $('#wkt').attr('value',"abc");
    // }

    function parseWKT() {
        var element = document.getElementById('wkt');
        var features = wkt.read(element.value);
        var bounds;
        if(features) {
            if(features.constructor != Array) {
                features = [features];
            }
            for(var i=0; i<features.length; ++i) {
                if (!bounds) {
                    bounds = features[i].geometry.getBounds();
                } else {
                    bounds.extend(features[i].geometry.getBounds());
                }

            }
            vectors.addFeatures(features);
            var plural = (features.length > 1) ? 's' : '';
            element.value = 'Feature' + plural + ' added'
        } else {
            element.value = 'Bad WKT';
        }
    }

  </script>

</head>  

  <body onload="init()">
  <?php
    if(isset($_POST['submit']))
    {
      $con = dbConnect();
        $type = $_POST['type'];
        $lng = $_POST['lng'];
        $lat = $_POST['lat'];
        $des = $_POST['des'];

    $sql = "Insert into pointdetails values('null', '$type','$lng,$lat','$des')";
    mysql_query($sql) or die(mysql_error());

  dbClose($con);

}
function dbConnect()
{
      $con = mysql_connect("localhost","root","");
      if (!$con)
      {
        die('Could not connect: ' . mysql_error());
      }
      else
      {
        mysql_select_db("mapping", $con);
        return $con;
      }
}

function dbClose($con)
{
  mysql_close($con);
}

 ?>

  <?php 

        $con = dbConnect();
          $sql = "select * from place";
          $result = mysql_query($sql);

          while($row=mysql_fetch_array($result))
          {
           $options[$row['id']]=$row['name']; 
          }
      //var_dump($options);
    dbClose($con);

     ?>

     <input type="button" value="point" id="pointToggle" name="Draw point" onclick="toggleControl(this);"/>
     <input type="button" value="line" id="lineToggle" name="Draw line" onclick="toggleControl(this);"/>
     <input type="button" value="polygon" id="polygonToggle" name="Draw polygon" onclick="toggleControl(this);"/>
     <p>
   <div class="wrapper">
    <div id="map" class="smallmap"></div>

    <div class="form-block">
      <form action="index.php" method="post"><p>
      <label>Type: </label>

        <select name="type">
            <?php foreach($options as $key=>$value): ?>
            <option value="<?php echo $key; ?>"><?php echo $value; ?></option>
            <?php endforeach; ?>
            </select>
            </p>
            <p>
            <label>Long</label>
            <input type="text" value="" id="lngval" name="lng"></p>
        <p><label>Lat</label>
        <input type="text" value="" id="latval" name="lat"></p>
        <p><label>Describe</label>
        <textarea rows="4" cols="16" name="des"></textarea></p>
        <input type="submit" value="Submit" name="submit">
      </form>

    </div>
    <div>  <textarea rows="4" cols="16" name="wkt" id="wkt"></textarea>
      <p><input type="submit" value="feature" name="feature" onclick="parseWKT();"></p></div>
</div>
  </body>
</html> 
```

上面的程序是获取标记点、多边形等的坐标并将其以 WKT 格式保存在数据库中。我完全是这个东西的初学者。请我需要你的帮助。目前我被困在获取坐标。当我选择任何控件（例如多边形）时，我将能够在地图中绘制它，但我需要获取所有坐标..我不知道继续..请帮助我....

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-19T14:55:37.453

[您可以为每个DrawFeature 控件](http://dev.openlayers.org/docs/files/OpenLayers/Control/DrawFeature-js.html#OpenLayers.Control.DrawFeature.events)上的 'featureadded' 事件添加一个事件处理程序，然后使用[OpenLayers.Format.WKT](http://dev.openlayers.org/docs/files/OpenLayers/Format/WKT-js.html)写出该功能的几何图形，如下所示：

```
for(var key in drawControls) {
  map.addControl(drawControls[key]);

  // register a listener on each control
  drawControls[key].events.register('featureadded', drawControls[key], function(f) {

    // create a WKT reader/parser/writer          
    var wkt = new OpenLayers.Format.WKT();

     // write out the feature's geometry in WKT format
     var out = wkt.write(f.feature);
     console.log(out);
   });
} 
```

**示例输出：**
多边形（（17.71874986589 9.6328123658895,20.53124986589 -10.05468763411,37.93359361589 9.2812498658895,17.71874986589 9.63281235）

# javascript - 浏览器窗口较小时，菜单向上显示

> ID：12967969
> 
> 赞同：0
> 
> 时间：2012-10-19T05:36:35.253
> 
> 标签：javascript, drop-down-menu

我使用下面的 js 在我的网站上显示菜单，它工作正常，除了当浏览器窗口很小时下拉显示向上？我怎样才能使这个 JS 无论窗口大小如何，下拉菜单都会向下显示？

我试图在代码末尾设置 y=0，但没有运气。

```
var flexdropdownmenu = {
    arrowpath: '../Uploadedfiles/System/Scripts/flexdropdown/arrow.gif', //full URL or path to arrow image
    animspeed: 200, //reveal animation speed (in milliseconds)
    showhidedelay: [150, 150], //delay before menu appears and disappears when mouse rolls over it, in milliseconds

    //***** NO NEED TO EDIT BEYOND HERE
    startzindex: 1000,
    ismobile: navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i) != null, //boolean check for popular mobile browsers
    builtflexmenuids: [], //ids of flex menus already built (to prevent repeated building of same flex menu)

    positionul: function ($, $ul, e, $anchor) {
        var istoplevel = $ul.hasClass('jqflexmenu') //Bool indicating whether $ul is top level flex menu DIV
        var docrightedge = $(document).scrollLeft() + $(window).width() - 40 //40 is to account for shadows in FF
        var docbottomedge = $(document).scrollTop() + $(window).height() - 40
        if (istoplevel) { //if main flex menu DIV
            var offsets = $anchor.offset()
            var anchorsetting = $anchor.data('setting')
            var x = offsets.left + anchorsetting.useroffsets[0] + (anchorsetting.dir == "h" ? $anchor.outerWidth() : 0) //x pos of main flex menu UL
            var y = offsets.top + anchorsetting.useroffsets[1] + (anchorsetting.dir == "h" ? 0 : $anchor.outerHeight())
            x = (x + $ul.data('dimensions').w > docrightedge) ? x - (anchorsetting.useroffsets[0] * 2) - $ul.data('dimensions').w + $anchor.outerWidth() + (anchorsetting.dir == "h" ? -($anchor.outerWidth() * 2) : 0) : x //if not enough horizontal room to the ridge of the cursor
            y = (y + $ul.data('dimensions').h > docbottomedge) ? y - (anchorsetting.useroffsets[1] * 2) - $ul.data('dimensions').h - $anchor.outerHeight() + (anchorsetting.dir == "h" ? ($anchor.outerHeight() * 2) : 0) : y
            y = y - 5;
        }
        else { //if sub level flex menu UL
            var $parentli = $ul.data('$parentliref')
            var parentlioffset = $parentli.offset()
            var x = $ul.data('dimensions').parentliw //x pos of sub UL
            var y = 0
            x = (parentlioffset.left + x + $ul.data('dimensions').w > docrightedge) ? x - $ul.data('dimensions').parentliw - $ul.data('dimensions').w : x //if not enough horizontal room to the ridge parent LI
            y = (parentlioffset.top + $ul.data('dimensions').h > docbottomedge) ? y - $ul.data('dimensions').h + $ul.data('dimensions').parentlih : y
            //To show the submenu downwards irrespective of the browser resolution or size
            y = 0;
        }

        $ul.css({ left: x, top: y })
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-15T08:35:41.090

```
 if (istoplevel){ //if main flex menu DIV
        var offsets=$anchor.offset()
        var anchorsetting=$anchor.data('setting')
        var x=offsets.left+anchorsetting.useroffsets[0]+(anchorsetting.dir=="h"? $anchor.outerWidth() : 0) //x pos of main flex menu UL
        var y=offsets.top+anchorsetting.useroffsets[1]+(anchorsetting.dir=="h"? 0 : $anchor.outerHeight())
        x=(x+$ul.data('dimensions').w > docrightedge)? x-(anchorsetting.useroffsets[0]*2)-$ul.data('dimensions').w+$anchor.outerWidth()+(anchorsetting.dir=="h"? -($anchor.outerWidth()*2) : 0) : x //if not enough horizontal room to the ridge of the cursor
        //y=(y+$ul.data('dimensions').h > docbottomedge)? y-(anchorsetting.useroffsets[1]*2)-$ul.data('dimensions').h-$anchor.outerHeight()+(anchorsetting.dir=="h"? ($anchor.outerHeight()*2) : 0) : y
    }
    else{ //if sub level flex menu UL
        var $parentli=$ul.data('$parentliref')
        var parentlioffset=$parentli.offset()
        var x=$ul.data('dimensions').parentliw //x pos of sub UL
        var y=0
        x=(parentlioffset.left+x+$ul.data('dimensions').w > docrightedge)? x-$ul.data('dimensions').parentliw-$ul.data('dimensions').w : x //if not enough horizontal room to the ridge parent LI
        //y=(parentlioffset.top+$ul.data('dimensions').h > docbottomedge)? y-$ul.data('dimensions').h+$ul.data('dimensions').parentlih : y
    } 
```

# android - 如何使用kso ap2在android中从带有xml数据的字符串变量中获取值

> ID：12967970
> 
> 赞同：3
> 
> 时间：2012-10-19T05:36:34.893
> 
> 标签：android, xml-parsing, ksoap2

```
<string> 
    <Root>
        <Employee ID="1" PROJECTGROUP="Web" PROJECTKEY="1" PROJECT="ABC Project" DSCRIPTON="Logidtic Project" TOTALTASK="50" TOTALOPENTASK="50" TOTALCLOSETASK="0" HIGHPRIORITY="3"/>  
    </Root>
</string> 
```

这里有带`XML`数据的字符串变量。那么在解析的时候会怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:56:09.373

要解析 XML 形式的字符串，请使用以下代码：

```
String xml ="valid xml here";
InputStream is = new ByteArrayInputStream(xml.getBytes("UTF-8"));
/* Get a SAXParser from the SAXPArserFactory. */
SAXParserFactory spf = SAXParserFactory.newInstance();
SAXParser sp = spf.newSAXParser();
/* Get the XMLReader of the SAXParser we created. */
XMLReader xr = sp.getXMLReader();
/* Create a new ContentHandler and apply it to the XML-Reader*/
ExampleHandler myExampleHandler = new ExampleHandler();
xr.setContentHandler(myExampleHandler);
/* Parse the xml-data from our URL. */
xr.parse(new InputSource(is));
/* Parsing has finished. */ 
```

ExampleHandler.java:

```
class ExampleHandler extends DefaultHandler { 
StringBuffer buff = null;
boolean buffering = false; 
public static EmployeeVO empVO=null;

@Override
public void startElement(String namespaceURI, String localName, String qName, 
        Attributes atts) throws SAXException {
    if (localName.equals("Employee")) {
        empVO=new EmployeeVO();
        empVO.setEMPLOYEEID(atts.getValue("ID"));
        empVO.setPROJECTGROUP(atts.getValue("PROJECTGROUP"));
        empVO.setPROJECTKEY(atts.getValue("PROJECTKEY"));
        empVO.setPROJECT(atts.getValue("PROJECT"));
        empVO.setDSCRIPTON(atts.getValue("DSCRIPTON"));
        empVO.setTOTALTASK(atts.getValue("TOTALTASK"));
        empVO.setTOTALOPENTASK(atts.getValue("TOTALOPENTASK"));
        empVO.setTOTALCLOSETASK(atts.getValue("TOTALCLOSETASK"));
        empVO.setHIGHPRIORITY(atts.getValue("HIGHPRIORITY"));
    }   
} 

@Override
public void endElement(String namespaceURI, String localName, String qName) 
throws SAXException {

}

@Override
public void characters(char ch[], int start, int length) {
    if(buffering) {
        buff.append(ch, start, length);
    }
} 

} 
```

和 EmployeeVO.java

```
public class EmployeeVO {

String EMPLOYEEID;
String PROJECTGROUP;
String PROJECTKEY;
String PROJECT;
String DSCRIPTON;
String TOTALTASK;
String TOTALOPENTASK;
String TOTALCLOSETASK;
String HIGHPRIORITY;

public String getEMPLOYEEID() {
    return EMPLOYEEID;
}
public void setEMPLOYEEID(String eMPLOYEEID) {
    EMPLOYEEID = eMPLOYEEID;
}
public String getPROJECTGROUP() {
    return PROJECTGROUP;
}
public void setPROJECTGROUP(String pROJECTGROUP) {
    PROJECTGROUP = pROJECTGROUP;
}
public String getPROJECTKEY() {
    return PROJECTKEY;
}
public void setPROJECTKEY(String pROJECTKEY) {
    PROJECTKEY = pROJECTKEY;
}
public String getPROJECT() {
    return PROJECT;
}
public void setPROJECT(String pROJECT) {
    PROJECT = pROJECT;
}
public String getDSCRIPTON() {
    return DSCRIPTON;
}
public void setDSCRIPTON(String dSCRIPTON) {
    DSCRIPTON = dSCRIPTON;
}
public String getTOTALTASK() {
    return TOTALTASK;
}
public void setTOTALTASK(String tOTALTASK) {
    TOTALTASK = tOTALTASK;
}
public String getTOTALOPENTASK() {
    return TOTALOPENTASK;
}
public void setTOTALOPENTASK(String tOTALOPENTASK) {
    TOTALOPENTASK = tOTALOPENTASK;
}
public String getTOTALCLOSETASK() {
    return TOTALCLOSETASK;
}
public void setTOTALCLOSETASK(String tOTALCLOSETASK) {
    TOTALCLOSETASK = tOTALCLOSETASK;
}
public String getHIGHPRIORITY() {
    return HIGHPRIORITY;
}
public void setHIGHPRIORITY(String hIGHPRIORITY) {
    HIGHPRIORITY = hIGHPRIORITY;
}

    } 
```

# java - 如何修改/编辑 jar 中的文件数据？

> ID：12967975
> 
> 赞同：0
> 
> 时间：2012-10-19T05:37:06.933
> 
> 标签：java, file, jar, persistence

> **可能重复：**
> [Java 程序如何使用 .jar 中的文件进行读写？](https://stackoverflow.com/questions/5052311/how-can-a-java-program-use-files-inside-the-jar-for-read-and-write)

我正在开发一个 Java 项目，我想在其中写入一个 jar 中的文件。我知道怎么读。

```
 URL url = getClass().getClassLoader().getResource("libs/page.properties");
 InputStream fin = url.openStream();
 if (fin != null)
 {
    ObjectInputStream objStream = new ObjectInputStream(fin);
    Object pageC = objStream.readObject();
    pageCount = Integer.parseInt(pageC.toString());
 } 
```

现在如何在`page.properties`文件中写入新值？

# c - XC8 typedef 结构和数组

> ID：12967976
> 
> 赞同：1
> 
> 时间：2012-10-19T05:37:14.643
> 
> 标签：c, embedded

```
//------------------------------------------------------Experimental
typedef struct tagPCA21125_00H{ 
union  
    {                                           
    UCH8 DATA[0x0F];                                
    struct  {
                    PCA21125_00H_CTRL1_t    CTRL1;  //Byte 0
                    PCA21125_01H_CTRL2_t    CTRL2;
                    PCA21125_02H_tSec_t tSec;
                    PCA21125_03H_tMin_t tMin;   // t = time, a = alarm
                    PCA21125_04H_tHr_t  tHr;
                    PCA21125_05H_tDay_t tDay;
                    UCH8            tWeekday;
                    PCA21125_07H_tMonth_t   tMonth;
                    PCA21125_08H_tYear_t    tYear;
                    UCH8            aSec;       
                    UCH8            aMin;
                    UCH8            aHr;
                    UCH8            aWeekday;
                    PCA21125_0DH_CLKOUT_t   CLKOUT;
                    PCA21125_0EH_Timer_t    TimerCTRL;
                    UCH8            TimerData;
        };
    };
}PCA21125_t;
extern volatile PCA21125_t PCA21125;

//------------------------------------------------------Control 1
typedef struct tagPCA21125_00H{ 
union  
    {                                           
    UCH8 Byte;                      
    struct  {
                UCH8 :1;        //Bit0
                UCH8 :1;
                UCH8 h12_24:1;  // Must be 0 (alway)
                UCH8 POR_OVRD:1;                        
                UCH8 :1;                
                UCH8 STOP:1;    // Must be 0 (alway)
                UCH8 :1;                    
                UCH8 EXT_TEST:1;                        
        };
    };
}PCA21125_00H_CTRL1_t;
//extern volatile PCA21125_00H_CTRL1_t PCA21125_CTRL1; 
```

上面的代码我试图实现，但是 MPLABX XC8 编译器，但是不喜欢标签（PCA21125_00H_CTRL1_t CTRL1），所以我做错了什么？，如何解决这个问题？

提供的编译器错误

```
0_Main/../5_PCA21125/PIC18_PCA21125.h:29: warning: missing basic type; int assumed
0_Main/../5_PCA21125/PIC18_PCA21125.h:29: error: ";" expected
0_Main/../5_PCA21125/PIC18_PCA21125.h:29: warning: missing basic type; int assumed
0_Main/../5_PCA21125/PIC18_PCA21125.h:30: warning: missing basic type; int assumed
0_Main/../5_PCA21125/PIC18_PCA21125.h:30: error: ";" expected
0_Main/../5_PCA21125/PIC18_PCA21125.h:30: warning: missing basic type; int assumed 
```

等等等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:50:45.977

看起来 typedef for`PCA21125_t`指的是 type `PCA21125_00H_CTRL1_t`，该类型稍后在文件中定义，因此在成员声明中引用它的位置尚未定义`CTRL1`。如果你颠倒两个 typedef 的顺序，它可能会编译。

# wordpress - Wordpress 的心形“喜欢”按钮

> ID：12967977
> 
> 赞同：3
> 
> 时间：2012-10-19T05:37:15.767
> 
> 标签：wordpress

我遇到了这个网站（[http://demo.themezilla.com/memo/post-formats](http://demo.themezilla.com/memo/post-formats)），我试图弄清楚“心形”按钮是如何实现的。谁能帮助解释“喜欢”心脏是如何工作的？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-19T05:46:44.003

Themezilla.com 开发了一个名为 ZillaLikes 的插件，通过它他们可以实现这种**Heart Like**功能。

请检查此链接以查看[http://www.themezilla.com/plugins/zillalikes/](http://www.themezilla.com/plugins/zillalikes/)

插件可**免费下载**，因此您可以下载它并将其用于您的网站。

# mysql - 按两列分组/排序 - 在不丢失行的情况下获取数据 - MySQL

> ID：12967982
> 
> 赞同：0
> 
> 时间：2012-10-19T05:37:28.977
> 
> 标签：mysql, sql, group-by, mysqli

我有一个`number_color_style`结构如下所示的表。

![表结构](../Images/270759b04a4e839f40ad94a6b37b0492.png)

该表包含如下数据（8行）

![表数据](../Images/74c59086e49a0210b7cb4f5490dd016f.png)

我输出时想要的是所有记录分组`number_color_id`，`number_style_id`

我试过下面的查询

```
SELECT *
FROM `number_color_style`
GROUP BY `number_color_id` , `number_style_id` 
```

它给了我输出，但缺少一些行

![结果](../Images/4e5ed7369161d28234089d091f65a53e.png)

我想要的是**四组数据**而不会丢失一行（应该包含所有 8 行）。例如：

*   第一组在哪里`number_color_id = 1`，`number_style_id = 1`
*   第二组在哪里`number_color_id = 1`，`number_style_id = 2`
*   第三组在哪里`number_color_id = 2`，`number_style_id = 1`
*   第四组在哪里`number_color_id = 2`，`number_style_id = 2`

我该怎么做 ？

创建表查询

```
CREATE TABLE IF NOT EXISTS `number_color_style` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `img` varchar(100) NOT NULL,
  `number_color_id` int(11) NOT NULL,
  `number_style_id` int(11) NOT NULL,
  `number_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
); 
```

一些样本数据

```
INSERT INTO `jink`.`number_color_style` (`id`, `img`, `number_color_id`, `number_style_id`, `number_id`) VALUES (NULL, 'img1.png', '1', '1', '10'), (NULL, 'img2.png', '1', '1', '10'), (NULL, 'img3.png', '1', '2', '10'), (NULL, 'img4.png', '2', '1', '10'), (NULL, 'img5.png', '2', '1', '10'); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T05:41:06.390

如果要根据 number_color_id 和 number_style_id 显示所有 8 个集合，应该使用 order by 而不是 group by。

```
SELECT *
FROM `number_color_style`
ORDER BY `number_color_id` , `number_style_id` 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T05:41:54.533

使用'group by'时需要一个聚合函数，例如count(*)。可能是您将“分组依据”与“排序依据”混淆了。

一种可能的查询是：

```
select number_color_id, number_style_id, count (*)
from number_color_style
group by number_color_id, number_style_id 
```

但我认为你想要

```
select *
from number_color_style
order by number_color_id, number_style_id 
```

# css - 我的 css 布局变得超过 100% 高度，jsfiddle 中给出的示例

> ID：12967985
> 
> 赞同：0
> 
> 时间：2012-10-19T05:37:49.807
> 
> 标签：css

我弄乱了我的设计，它似乎不起作用。

[http://jsfiddle.net/eTG4K/33/](http://jsfiddle.net/eTG4K/33/)

```
<div id="wrapper">
    <div id="header"></div>
    <div id="fader"></div>
    <div id="body">
        <div id="viewer"></div>

    </div>
</div>
<div id="footer" > a</div> 
```

​</p>

```
body,html
{
 height: 100%;
background-color: #2c2c28;   
}
#header
{
 background-color:red;
    height:45px;
}
#footer
{
    height:45px;
    background-color:blue;

}
#wrapper
{
 height:100%; 
margin-bottom:-45px;   

}
#viewer
{
height:100%;
background-color:yellow;   overflow-y: hidden;  
}
#body
{
    background-color:pink;
 height:100%;   
    overflow-y: hidden;
}
#fader
{
 height:20px;   
}​ 
```

黄色的 id=body 比页面向下延伸。我希望它停在页脚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:51:40.413

我相信您正在寻找粘性页脚效果，您必须在包装器中有一个与页脚高度相同的元素才能向下推以将其保持在底部。您还必须在包装器的 css 中设置一些高度属性。

```
<div id="wrapper">
    <div id="header"></div>
    <div id="fader"></div>
    <div id="body">
        <div id="viewer"></div>

    </div>
    <div class="push"></div>
</div>
<div id="footer" > a</div> 
```

```
.push{
    height:45px;
}
#wrapper
{
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin-bottom:-45px;      
} 
```

[http://jsfiddle.net/eTG4K/41/](http://jsfiddle.net/eTG4K/41/)

编辑：

你的问题是你试图给出`#body`100% 的高度，因为它的所有祖先都有 100% 的高度，`#body`所以会有窗口的高度，但是`#wrapper`有其他占用空间的孩子，这会导致它溢出。您可以使用边距来解决此问题，但我会考虑重新设计。

```
#wrapper
{
   margin-bottom:-45px;
}
#body
{
   margin-top:-65px;   
}
#viewer
{
    margin-top:65px;   
}
/* add z-index to #fader and #header so they wont be covered by #body and #viewer */
#fader
{
    position:relative;
    z-index:999;
}​
#header
{
    position:relative;
    z-index:999;
} 
```

[http://jsfiddle.net/eTG4K/68/](http://jsfiddle.net/eTG4K/68/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T05:53:25.903

......***[现场演示](http://jsfiddle.net/rohitazad/eTG4K/44/)***......................

嗨，现在你可以`fixed position`像这样习惯了

```
#footer {
    background-color: blue;
    bottom: 0;
    height: 45px;
    left: 0;
    position: fixed;
    right: 0;
} 
```

***[现场演示](http://jsfiddle.net/rohitazad/eTG4K/44/)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T05:44:10.660

Put your footer inside your wrapper like so:

```
<body>    
    <div id="wrapper">
        <div id="header"></div>
        <div id="fader"></div>
        <div id="body">
            <div id="viewer"></div>         
        </div>
        <div id="footer" ></div>
    </div> 
</body>
</html>​ 
```

This prevents the body from extending past the footer, since the wrapper and the body are set to 100% height.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-19T05:46:49.273

[jsfiddle](http://jsfiddle.net/eTG4K/33/)

```
<div id="wrapper">
    <div id="header"></div>
    <div id="fader"></div>
    <div id="body">
        <div id="viewer"></div>

    </div>
    <div id="footer" > a</div>
</div> 
```

​</p>

# javascript - jCarouselLite 自动滚动不显示一个实体

> ID：12967987
> 
> 赞同：1
> 
> 时间：2012-10-19T05:38:02.567
> 
> 标签：javascript, ruby-on-rails-3

我正在使用 jCarouselLite 在显示页面中显示重要事件，但是当我仅添加单个事件时它不显示（而在显示页面上显示多个事件并且自动滚动正常工作）..

这是我的代码：-

```
 .scroll{:style=>"margin:5px 0 0 10px;"}
         -if @individual.important_events.present?
           %ul
             -@individual.important_events.each do |event|
               %li
                 = link_to event.title, important_events_path
                 %br
                 = event.date 
```

脚本是：-

```
:javascript     
  $(function() {
    $(".scroll").jCarouselLite({
      auto: 800,
      speed: 1000,
      vertical: true,
      circular: true
    });
  }); 
```

如何在我的显示页面中显示单个事件条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T10:00:23.233

这是否有效：

```
 .scroll{:style=>"margin:5px 0 0 10px;"}
      %ul
        -@individual.important_events.each do |event|
          %li
            = link_to event.title, important_events_path(event)
            %br
            = event.date 
```

# java - 指定的 WSDL 无效！请在代码生成器上显示的上一页中选择经过验证的 *.wsdl/*.xml 文件

> ID：12967995
> 
> 赞同：0
> 
> 时间：2012-10-19T05:38:39.760
> 
> 标签：java, eclipse, wsdl

我正在使用 Axis2 代码生成向导从 wsdl 生成 java 类。

我的示例 wsdl 如下

```
<definitions name="HelloService"
   targetNamespace="http://www.examples.com/wsdl/HelloService.wsdl"
   xmlns="http://schemas.xmlsoap.org/wsdl/"
   xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
   xmlns:tns="http://www.examples.com/wsdl/HelloService.wsdl"
   xmlns:xsd="http://www.w3.org/2001/XMLSchema">

   <message name="SayHelloRequest">
      <part name="firstName" type="xsd:string"/>
   </message>
   <message name="SayHelloResponse">
      <part name="greeting" type="xsd:string"/>
   </message>

   <portType name="Hello_PortType">
      <operation name="sayHello">
         <input message="tns:SayHelloRequest"/>
         <output message="tns:SayHelloResponse"/>
      </operation>
   </portType>

   <binding name="Hello_Binding" type="tns:Hello_PortType">
   <soap:binding style="rpc"
      transport="http://schemas.xmlsoap.org/soap/http"/>
   <operation name="sayHello">
      <soap:operation soapAction="sayHello"/>
      <input>
         <soap:body
            encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
            namespace="urn:examples:helloservice"
            use="encoded"/>
      </input>
      <output>
         <soap:body
            encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"
            namespace="urn:examples:helloservice"
            use="encoded"/>
      </output>
   </operation>
   </binding>

   <service name="Hello_Service">
      <documentation>WSDL File for HelloService</documentation>
      <port binding="tns:Hello_Binding" name="Hello_Port">
         <soap:address
            location="http://www.examples.com/SayHello/">
      </port>
   </service>
</definitions> 
```

当我尝试通过axis codegen生成java时，它显示了这个错误：

```
 Specified WSDL is invalid!, Please select a validated *.wsdl/*.xml file on previous page 
```

如何验证我的 wsdl 以及我的 wsdl 有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T05:49:19.383

您的 WSDL 的问题在于您没有关闭`soap:address`标签。代替

```
<soap:address location="http://www.examples.com/SayHello/"> 
```

和

```
<soap:address location="http://www.examples.com/SayHello" />

                                                          ^
                                                          |
                                                          |
                                                      close tag 
```

一般来说，在生成绑定之前不需要发布 WSDL（在服务器上安装应用程序）。

# python - 最多多少 同时事件看门狗（python）可以处理吗？

> ID：12967997
> 
> 赞同：2
> 
> 时间：2012-10-19T05:38:55.290
> 
> 标签：python, events, watchdog

下面是移动事件看门狗的简单示例。如果我们运行这个程序并在“监视器”文件夹（mv *.xml 监视器）中移动 50 个文件，那么我们只收到 1 个事件。如果我们增加队列大小和超时，那么接收到的事件数量会增加 4 到 5，但它的行为很奇怪。

```
 observer = Observer(timeout=0.001)
    observer.event_queue.maxsize=100 
```

任何人都可以解释如何接收所有事件。谢谢

```
import time
from watchdog.observers import Observer
from watchdog.events import FileSystemEventHandler

class Myhandler(FileSystemEventHandler):
    def on_moved(self, event):
        print "Received evet:", event.dest_path

if __name__ == "__main__":
    event_handler = Myhandler()
    observer = Observer()
    observer.schedule(event_handler, path='monitor', recursive=True)
    observer.start()
    try:
        while True:
            time.sleep(1)
    except KeyboardInterrupt:
        observer.stop()
    observer.join() 
```