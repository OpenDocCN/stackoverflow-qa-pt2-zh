# StackOverflow 问答 13821000-13821999

# php - 正则表达式问题：替换数组所有元素的第一个和最后一个 $ 字符

> ID：13821001
> 
> 赞同：0
> 
> 时间：2012-12-11T13:01:42.327
> 
> 标签：php, regex

我试图用这样的方式替换一个巨大的字符串中的几个单词`preg_replace()` ：

```
preg_replace($match[0], $variable_value_array, $form_body) 
```

这`$match[0]`是一个包含值的数组，格式如下：

```
$contacts-firstname$
$contacts-lastname$
$contacts-mobile$
$leads-leadstatus$
$leads-noofemployees$ 
```

并且`$variable_value_array`也是一个包含值的数组，例如：

```
Linda
William
(091) 115-9385
Value Not Present
Value Not Present 
```

而且`$form_body`真的很长`string`。

该函数正在替换 的值，但不是用它`$form_body`替换整个，而是仅替换为使其成为. 我应该怎么做才能同时替换**$** sigh 的？谢谢。`$contacts-firstname$`**`Linda`****`contacts-firstname`****`Linda`**`$Linda$`

 *** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:07:48.493

那是因为`$`被解释为正则表达式的分隔符。您应该改用简单的[`str_replace`](http://php.net/manual/en/function.str-replace.php)。签名完全相同：

```
str_replace($match[0], $variable_value_array, $form_body); 
```

如果你拼命想使用`preg_replace`你需要做两件事。首先，您需要将每个数组元素包装在显式分隔符中（`/`这是一种标准选择）。而且您还需要通过 运行每个数组元素[`preg_quote`](http://uk1.php.net/manual/en/function.preg-quote.php)，否则`$`将被视为字符串结尾的锚点：

```
$patterns = array();
foreach($match[0] as $value)
    $patterns[] = '/'.preg_quote($value, '/').'/'; 
```

然后使用`$patterns`代替`$match[0]`. 但是，如果您真的需要在更复杂的模式中使用文字搜索字符串数组，那么这只是一个很好的了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:07:01.300

尝试`str_replace`而不是`preg_replace`更快更适合您的用例**

# c# - C# 和 Javascript SHA256 散列的代码示例

> ID：13821003
> 
> 赞同：3
> 
> 时间：2012-12-11T13:01:44.617
> 
> 标签：c#, javascript, base64, sha

我有一个在服务器端运行的 C# 算法，它散列一个 base64 编码的字符串。

```
byte[] salt = Convert.FromBase64String(serverSalt); // Step 1
SHA256Managed sha256 = new SHA256Managed(); // Step 2
byte[] hash = sha256.ComputeHash(salt); // Step 3
Echo("String b64: " + Convert.ToBase64String(hash)); // Step 4 
```

然后根据散列的数据库列表检查散列。我很想用 javascript 实现同样的效果，使用 serverSalt，因为它是通过 websocket 从 C# 传输的。

我知道[C# 和 Javascript 之间的 SHA-256 哈希值不同，](https://stackoverflow.com/questions/10559203/sha-256-hashes-different-between-c-sharp-and-javascriptthat)因为 C# 和 Javascript 具有不同的字符串编码。但我知道我可以在字节数组中填充零以使 Javascript 表现得像 C#（上面的步骤 1 已解决）。

```
var newSalt  = getByteArrayFromCSharpString(salt); // Pad zeros where needed
function getByteArrayFromCSharpString(inString)
{
  var bytes = [];
  for (var i = 0; i < inString.length; ++i)
{
    bytes.push(inString.charCodeAt(i));
    bytes.push(0);
}
return bytes;
} 
```

谁能提供一些关于我可以使用哪些算法来重现步骤 2、3 和 4 的见解？

PS：周围已经有问题和答案，但没有一个代码片段。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T10:19:31.083

这是解决方案，我真的希望这可以帮助其他处于相同情况的人。

在 html 文件中，加载 crypto-js 库

```
<!-- library for doing password hashing, base64 eoncoding / decoding -->
<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/components/core-min.js"></script>
<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/components/enc-base64-min.js"></script>
<script src="http://crypto-js.googlecode.com/svn/tags/3.0.2/build/rollups/sha256.js"></script> 
```

在 javascript 中，执行以下操作

```
// This function takes a base64 string, hashes it with the SHA256 algorithm
// and returns a base64 string. 
function hashBase64StringAndReturnBase64String(str)
{
    // Take the base64 string and parse it into a javascript variable
    var words  = CryptoJS.enc.Base64.parse(str);
    // Create the hash using the CryptoJS implementation of the SHA256 algorithm
    var hash = CryptoJS.SHA256(words);
    var outString =  hash.toString(CryptoJS.enc.Base64)
    // Display what you just got and return it
    console.log("Output string is: " + outString);
    return outString;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:08:21.910

检查以下 URL [http://www.movable-type.co.uk/scripts/sha256.html上的 Java 脚本 SHA256 实现](http://www.movable-type.co.uk/scripts/sha256.html)

# grails - 如何将重定向作为发布请求发送。春季安全

> ID：13821020
> 
> 赞同：0
> 
> 时间：2012-12-11T13:02:41.813
> 
> 标签：grails, spring-security

我有自己的 **AuthenticationSuccessHandler**和覆盖方法***onAuthenticationSuccess***，我需要在身份验证之前使用请求中的参数重定向到某些页面（我希望你明白我的意思，对不起我的英语）

> getRedirectStrategy().sendRedirect(request, response, targetUrl);

我如何使用 POST 方法来做到这一点（默认情况下它是 GET 方法）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:32:11.643

[您可以使用HTTP1.1 307 Temporary Redirect](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes#307)状态码不使用任何`sendRedirect`方法。

但是 AFAIK 这不是一种常见的做法，也不是所有的网络浏览器都支持这一点。

也许服务器端[转发](http://tomcat.apache.org/tomcat-7.0-doc/servletapi/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)将适合您的情况。

更新：

如果你想使用 spring-security API 发送 POST-redirect，你可以实现你自己的[RedirectStrategy](https://github.com/SpringSource/spring-security/blob/master/web/src/main/java/org/springframework/security/web/RedirectStrategy.java#L8)。

[DefaultRedirectStrategy](https://github.com/SpringSource/spring-security/blob/master/web/src/main/java/org/springframework/security/web/DefaultRedirectStrategy.java#L31)使用`response.sendRedirect`这将导致`302`servlet 容器发送响应代码（我不确定每个容器，至少 tomcat 发送`302`）。

更新 2：

您可以`307`自己发回设置响应状态和“位置”标头：

```
resp.setStatus(SC_TEMPORARY_REDIRECT);
resp.setHeader("Location", absoluteRedirectUrl); 
```

接收此响应的用户代理必须使用与上一个请求中使用的相同方法来执行下一个请求。所以如果第一个请求被`POST`重定向请求也将是`POST`.

# java - TeamCity 中的 Maven：“无法找到 Javac 编译器...”

> ID：13821024
> 
> 赞同：0
> 
> 时间：2012-12-11T13:03:04.350
> 
> 标签：java, maven, teamcity

我正在尝试在 TeamCity 中构建一个 Maven 项目。当我运行构建时，我收到以下错误：[14:43:19][Compiler] 编译失败

```
Unable to locate the Javac Compiler in:  
  C:\BuildAgent\jre\..\lib\tools.jar 
Please ensure you are using JDK 1.4 or above and
not a JRE (the com.sun.tools.javac.Main class is required).
In most cases you can change the location of your Java
installation by setting the JAVA_HOME environment variable. 
```

这是 Maven 问题还是 TeamCity 问题？

我必须在构建代理机器上设置 JAVA_HOME 吗？如果将来我最终得到需要不同版本 JDK 的不同构建怎么办？

在此先感谢，乌里格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:41:20.160

假设您使用的是最新版本的 TeamCity，以下是有关[TeamCity 如何找到 JDK](http://confluence.jetbrains.net/display/TCD7/Maven#Maven-JavaParameters)的链接。

我通常`JAVA_HOME`设置环境变量。如果您最终需要不同版本的 JDK 的不同构建，您可以在构建步骤配置中轻松覆盖 JDK 的路径（“JDK 主路径”选项）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-16T17:16:21.647

好吧，这更像是 Maven 而不是 TeamCity。最近遇到了这个问题，解决这个问题的最佳方法是设置 JAVA_HOME 变量，该变量应指向错误消息突出显示的已安装 JDK。此外，您还可以确保将计算机上的 PATH 修改为包含 %JAVA_HOME%/bin。已设置发布环境变量 - 如果您在 Windows 上，请重新启动 TeamCity Build Agent 服务。

# c++ - 迭代二维网格子集的最佳方法

> ID：13821028
> 
> 赞同：2
> 
> 时间：2012-12-11T13:03:29.003
> 
> 标签：c++, algorithm, iterator, iteration

我有一个二维矩形网格，我需要将不同的函数应用于该网格中的节点子集。子集由矩形边界给出，例如行和列分隔符。由于我不想一遍又一遍地用 2 for 循环编写迭代代码，我正在考虑两种方法来解决这个问题：

首先创建一个自定义迭代器提供程序，该提供程序使用矩形限制进行初始化，然后在迭代时保留它们。虽然这是可行的，但要使这个迭代器与标准 stl 算法兼容似乎还需要做很多工作。

第二种方法是将函数指针传递给遍历 for 循环并在内部循环中执行的函数。这也是可行的，但可能会创建非常丑陋的语法，因为我必须传递成员函数。

通常哪种方式更可取？对于这样的用例，是否有任何干净的示例，以防止我重新发明轮子？

注意：该操作对性能非常关键，因为代码经常执行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T12:53:11.993

因为这里值得的是我最终实现的算法。代码不完整，但可能对其他人有用：

```
//forward declarations
template <typename T> class Grid;
template <typename T> class rectIterator;

//friend forward declarations
template<class T>
bool operator!=(rectIterator<T> const& left, rectIterator<T> const& right);

template<class T>
class rectIterator: public std::iterator<std::forward_iterator_tag, GridTile<T> >{

public:
  typedef GridTile<T> const& const_reference;
  typedef GridTile<T>& reference;
  typedef GridTile<T> const* const_pointer;
  typedef GridTile<T>* pointer;

private:
  Grid<T>* mpGrid;
  int mRow;
  int mCol;
  int mMinRow;
  int mMinCol;
  int mMaxRow;
  int mMaxCol;

public:
  rectIterator(Grid<T>& grid,Rectangle const& rect):
    mpGrid(&grid){
    mpGrid->getRowCol(mpGrid->getTileId(rect.bottomLeft()),mMinRow,mMinCol);
    mpGrid->getRowCol(mpGrid->getTileId(rect.topRight()),mMaxRow,mMaxCol);
    mRow = mMinRow;
    mCol = mMinCol;
  }

  rectIterator():
    mpGrid(0){
    mMinRow= -1;
    mMinCol=-1;
    mMaxRow =-1;
    mMaxCol =-1;
    mCol = 0;
    mRow = 0;
  }

  rectIterator<T>& operator++(){
    if(mCol<=mMaxCol){
      ++mCol;
    }else if(mRow<=mMaxRow){
      ++mRow;
      mCol = mMinCol;
    }else{
      mCol = mpGrid->getCols();
      mRow = mpGrid->getRows();
      mpGrid=0;
    }
    return *this;
  }

  reference operator*() const throw(std::out_of_range, std::runtime_error){
    return mpGrid->at(mRow,mCol);
  }

  pointer operator->() const throw(std::out_of_range, std::runtime_error){
    return &(mpGrid->at(mRow,mCol));
  }

  int row()const{
    return mRow;
  }

  int col()const{
    return mCol;
  }

  friend bool operator!=<>(rectIterator<T> const& left, rectIterator<T> const& right);

};

template<class T>
bool operator!=  (rectIterator<T> const& left, rectIterator<T> const& right){
  return (left.mpGrid != right.mpGrid);
  //DIRTY this is no full compare but fast and sufficient at the moment
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:29:28.260

从设计的角度来看，我会说迭代器方法更好，因为它在循环体上的复杂性较低（并且可能比迭代中的复杂性更高）。

但我希望函子方法有更好的性能。特别是如果您将使用 STL 样式（带有预期 operator() 的模板参数）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:07:05.710

为什么不直接将二维子集数组复制到临时数组，然后将指向数组开头的指针传递给不同的函数呢？

如果同一个子集多次传递给不同的函数，它应该会减少缓存未命中，从而减少子集迭代所花费的时间。

# mysql - 节点 mysql .on('packet', function(packet) 错误

> ID：13821034
> 
> 赞同：2
> 
> 时间：2012-12-11T13:03:45.337
> 
> 标签：mysql, node.js

我需要每隔 X 时间进行一次查询。我在运行节点版本`0.8.12`和最新的节点mysql时运行以下代码

```
 function testmysql()
{
    mysqlCon.connect();
    mysqlCon.query('SELECT 1 + 1 AS solution', function(err, rows, fields) {
    if (err) throw err;

    console.log('The solution is: ', rows[0].solution);
});

mysqlCon.end();
}

    var period = 2000;
    var interval  = setInterval(function(){

    testmysql();
}, period); 
```

我收到以下错误。

```
\nodetest\node_modules\mysql\lib\protocol\Protocol.js:95
    .on('packet', function(packet) {
     ^
TypeError: Cannot call method 'on' of undefined
    at Protocol._enqueue (\nodetest\node_modules\mysql\lib\protocol\Protocol.j
s:95:6)
    at Protocol.handshake (\nodetest\node_modules\mysql\lib\protocol\Protocol.
js:37:41)
    at Connection.connect (\nodetest\node_modules\mysql\lib\Connection.js:37:1
8)
    at testmysql (\nodetest\index.js:1112:10)
    at Timer.<anonymous> (\nodetest\index.js:1143:1)
    at Timer.exports.setInterval.timer.ontimeout (timers.js:234:14) 
```

虽然当 testmysql() 不在另一个函数中时，它运行正确。

我做错了什么？或者更确切地说我将如何执行这个循环查询？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T09:31:30.160

好的......我逐行解构项目......导致它的代码是 -

```
 var EventEmitter = require('events').EventEmitter
 , on = EventEmitter.prototype.on;
 EventEmitter.prototype.on = function () {
this._maxListeners = Infinity;
on.apply(this, arguments);
}; 
```

我使用这个片段是因为 node_redis 抛出一个错误或内存泄漏警告，因为每次有人加入时，我正在使用带有 socket.io 的 redisstore。我删除了代码，我不再收到内存泄漏错误，可能是因为我使用了最新的 node_redis 版本。

很抱歉给您带来麻烦，并感谢您的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:46:47.673

试试这个 - 这是更好的设计，它应该可以解决你的错误：

```
function testmysql(mysqlConnection)
{
    mysqlConnection.query('SELECT 1 + 1 AS solution', function(err, rows, fields) {
        if (err) throw err;

        console.log('The solution is: ', rows[0].solution);
    });
}

var period = 2000;
var interval  = setInterval(function(){
    var mysqlCon = mysql.createConnection({host:'localhost',user:'testadmin',password:'pass',database:'mydb'});        
    mysqlCon.connect();
    testmysql(mysqlCon);
    mysqlCon.end();
}, period); 
```

# objective-c - 如何使用 Rubymotion 上传照片？

> ID：13821036
> 
> 赞同：0
> 
> 时间：2012-12-11T13:03:52.197
> 
> 标签：objective-c, rubymotion

我正在使用 Rubymotion 构建一个 iOS 应用程序。我需要让用户用相机拍一张照片，然后使用 BubbleWrap Http 模块（或更好的模块）将其上传到 Rails 3 后端（使用 Paperclip）。

我怎样才能做到这一点？

*这是我的代码：*

```
controller = UIImagePickerController.alloc.init
controller.sourceType = UIImagePickerControllerSourceTypeCamera
controller.mediaTypes = [KUTTypeImage]
controller.allowsEditing = true
controller.delegate = self

self.navigationController.presentModalViewController(controller, animated:true) 
```

*这是我在拍摄后使用的：*

```
metadata = info.objectForKey(UIImagePickerControllerMediaMetadata)
the_image = info.objectForKey(UIImagePickerControllerOriginalImage)

image = view.viewWithTag 3
image.image = the_image

picker.dismissModalViewControllerAnimated(true) 
```

这是我的上传代码：

```
data = {access_token: TOKEN, id: task, image: image}

   BubbleWrap::HTTP.get("#{URL}#{project}/message", {payload: data}) do |response|
      if response.ok?
        json = BubbleWrap::JSON.parse(response.body)
        if json['total'] > 0
          infos = json['taskinfos'].map {|ej| self.from_json(ej["taskinfo"])} 
          block.call(true, infos)
        else
          block.call(false, nil)
        end
      else
        block.call(false, nil)
      end
    end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-07T01:09:45.760

上传图像应该通过 POST 请求完成，而不是像您所做的那样通过 GET 请求完成。大多数 Web 服务器对 GET 请求的大小都有限制，通常为 8k，请阅读此处了解更多信息[HTTP GET 请求的最大长度？](https://stackoverflow.com/questions/2659952/maximum-length-of-http-get-request)，所以它不适合图像。

玩转气泡运动并查看服务器上日志文件中的请求以查看结果。尝试使请求看起来像从 rails 本身发出的请求，即来自您上传到控制器的网页。

因此，您可以将请求更改为 POST 并让人们知道您收到了哪些错误消息。

# selenium-rc - 如何使用 AutoIT in (selenium RC) 处理 Firefox 中的文件下载弹出窗口

> ID：13821040
> 
> 赞同：0
> 
> 时间：2012-12-11T13:03:58.853
> 
> 标签：selenium-rc, autoit

我需要在我的 selenium RC 测试中从应用程序下载一个文件。当我单击链接/按钮保存文件时，首先我会弹出一个弹出窗口，要求我打开或保存文件，当我选择“保存”并单击“确定”时，我会再弹出一个询问我提供要保存文件的路径和文件名。我目瞪口呆，发现这可以通过 AutoIT 完成，但我在这样做时遇到了一些问题。

所以有人可以向我提供 Firefox 中 file_download 的 .exe 文件，我也可以在其中提及保存该文件的路径。如果你能提供我究竟是什么代码，我需要在我的测试用例中编写。

请让我知道如何处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:17:31.327

您也可以在不使用 autoit 的情况下实现这一目标。请按照以下步骤操作。

1.  创建新的 Firefox 配置文件。
2.  在使用该配置文件开始自动化之前手动更改该配置文件中的首选项。（更改如下设置） ![在此处输入图像描述](../Images/7a8b97f6d8e32dea957c36593f93519a.png)

3.  现在使用该配置文件启动自动化，以便将文件下载到默认位置。

**使用特定配置文件启动 selenium 服务器**

```
java -jar selenium-server.jar -firefoxProfileTemplate "C:\Users\UserName\AppData\Roaming\Mozilla\Firefox\Profiles\234saddsf.customProfile" 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-04-24T11:45:59.487

我找到了这个链接：http: [//qtp-help.blogspot.com/2009/07/selenium-handle-dialogs.html](http://qtp-help.blogspot.com/2009/07/selenium-handle-dialogs.html)

不幸的是，它适用于没有打开与保存单选按钮的旧式对话框。我正在寻找解决这部分问题的方法。

# html - GridLine 在 html 中不可见

> ID：13821045
> 
> 赞同：1
> 
> 时间：2012-12-11T13:04:18.353
> 
> 标签：html, css

我有一张表，我在其中应用了一些 CSS，即

```
table tr{
            border:1px solid black;
        } 
```

问题是，只要 tr 为空，就不会显示边框。我附上了一张快照。我需要知道我错在哪里。![在此处输入图像描述](../Images/6504a754e9f06284895417ebda84e481.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:09:16.763

添加`&nbsp;`任何未显示的值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:10:19.653

使用 CSS，您可以只使用

```
table { empty-cells: show; } 
```

在样式表中，建议将所有空单元格显示为普通单元格。

# javascript - 具有可变列布局的响应式网格

> ID：13821046
> 
> 赞同：2
> 
> 时间：2012-12-11T13:04:22.400
> 
> 标签：javascript, html, css, grid, responsive-design

有没有办法使用“传统”网格布局根据屏幕宽度调整列数？

我正在使用许多响应式流体网格系统之一 - 例如来自 zurb 基础的网格（使用 12 列）。

假设我在页面上创建了三列：

```
<div class="row">
    <div class="four columns"></div>
    <div class="four columns"></div>
    <div class="four columns"></div>
</div> 
```

假设在某个断点（屏幕宽度），我想在四列而不是三列中显示我的内容。

```
<div class="row">
    <div class="three columns"></div>
    <div class="three columns"></div>
    <div class="three columns"></div>
    <div class="three columns"></div>
</div> 
```

更大的屏幕可能会更多，而更小的屏幕可能只有两列。

问题是 - 使用这个网格（或其他具有类似标记的网格），我必须更改标记 - 据我所知，我无法使用 css 媒体查询调整列数。

有什么方法可以轻松更改列数？也许使用javascript？

我确信一定已经有一个可以通过这种方式自定义的网格系统，但我还没有找到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:23:30.003

您可能想看看[语义网格](http://semantic.gs/)。原因是所有内容都在 css 文件中定义，而不是标记。它确实使用 LESS，所以这对您来说可能是个问题。

此外，您可以按百分比制作网格，这将解决

> 有没有办法使用“传统”网格布局根据屏幕宽度调整列数？

即使这不是您要求解决的方法，我相信它会为您解决问题。

您还说要使用多少列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-20T23:30:31.820

试试 skeljs 太棒了。它会做你想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-10T16:20:59.060

查看 Foundation 中的块网格：http: [//foundation.zurb.com/docs/components/block_grid.html](http://foundation.zurb.com/docs/components/block_grid.html)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-02-17T12:53:27.673

[http://gridsetapp.com](http://gridsetapp.com)正是您正在寻找的（我知道这是两年前的事，但也许其他人需要相同的解决方案）。

# c++ - 打印 std::string 的字节表示

> ID：13821048
> 
> 赞同：0
> 
> 时间：2012-12-11T13:04:27.997
> 
> 标签：c++, std

我在打印 std::string 的字节表示时遇到奇怪的错误，而 std::wstring 工作正常。

```
std::string str = "mystring";
unsigned short* vtemp = (unsigned short*)str.c_str();
for(int i=0; i<str.length(); ++i)
{
    cout << (unsigned short)((unsigned char)vtemp[i]) << " ";
}
cout << endl;

Incorrect Output: 109 115 114 110 0 204 204 204

wstring wstr(str.length(), L' ');
std::copy(str.begin(), str.end(), wstr.begin());

vtemp = (unsigned short*)wstr.c_str();

for(int i=0; i<wstr.length(); ++i)
{
    cout << (unsigned short)((unsigned char)vtemp[i]) << " ";
}
cout << endl;

Correct Output: 109 121 115 116 114 105 110 103 
```

在第一种情况下，每个备用字符都被跳过。为什么这样？

该程序在项目设置中启用了 unicode 字符集的 Windows 上运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T13:10:26.913

这是因为这条线：

```
unsigned short* vtemp = (unsigned short*)str.c_str(); 
```

`unsigned short`是两个字节长。`char`是一个字节长。您正在设置一个`unsigned short`指向`char`数组的指针并通过指针索引（每两个字节）进行迭代。

编译器通常会告诉您这一点，但是您使用 C 风格的转换会阻止这种情况（因为 C 风格的转换会默默地失败）。

稍后编辑：您的代码还索引`unsigned short*`最多`str.length()`元素，但是（`short`大于`char`）您的数组仅包含`str.length() / 2` `unsigned short`可索引元素。

在某些机器上运行该代码可能会导致核心转储。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:09:35.147

问题是您使用的是`unsigned short`指针，因此每个指针都会按字节`++i`前进。`sizeof(unsigned short)`如果在您的平台上`sizeof(unsigned short)==2`，很可能，第一个版本会跳过所有其他字符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:15:48.380

wstring 以两个字节格式存储原始数据，而 string 以一个字节或简单的 char 格式存储原始数据。在您执行 (unsigned short *)str.c_str() 的那一刻，您注定要跳两次而不是一次。在访问 str 的原始数据时，您必须使用 char* （根据我的经验，即使 unsigned char* 也会导致问题）。所以正确的做法是

```
const char *vtemp = str.c_str(); 

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T13:19:33.020

char 是一个字节，我不明白你为什么将对 c_str() 的调用转换为 an `unsigned short*`，对于一个：返回值不是`unsigned`（可能适用于某些平台，取决于编译器如何实现它）和二，为什么不暂时存储它返回的内容并用强制转换打印出来（查看它代表的数字）？

它“跳过”的原因是因为正如我所说的 std::string 和 std::wstring 定义如下：

std::string 的定义： `typedef std::basic_string<char> std::string;`

std::wstring 的定义： `typedef std::basic_string<wchar_t> std::wstring;`

如您所见，它们不是用无符号说明符定义的。对于 std::string，c_str() 返回 a `const char*`，对于 std::wstring，c_str() 返回 a `const wchar_t*`。

因此，试试这个：

```
#include <iostream>
#include <string>
using namespace std;

int main()
{
    std::string str = "mystring";
    const char* vtemp = str.c_str();
    for(int i=0; i<str.length(); ++i)
    {
        cout << (int)vtemp[i] << " ";
    }
    cout << endl;

    wstring wstr(str.length(), L' ');
    std::copy(str.begin(), str.end(), wstr.begin());

    const wchar_t* wtemp = wstr.c_str();

    for(int i=0; i<wstr.length(); ++i)
    {
       cout << (int)wtemp[i] << " ";
    }
    cout << endl;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T13:10:27.240

```
unsigned short* vtemp = (unsigned short*)str.c_str(); 
```

用。。。来代替：

```
unsigned char* vtemp = (unsigned char*)str.c_str(); 
```

# ruby-on-rails - 在具有数据库 MongoDB 的 ruby on rails 中实现 capistrano

> ID：13821052
> 
> 赞同：0
> 
> 时间：2012-12-11T13:04:35.697
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid, capistrano

我想在我的 ruby​​ on rails 项目中实现 capistrano。我使用 MongoDB 作为数据库。我安装 capistrano gem。

```
capify .
[add] writing './Capfile'
[add] writing './config/deploy.rb'
[done] capified! 
```

它在 Config 中为我提供了 deploy.rb 文件。我应该在里面做什么。那么我必须把 mongoid.yml 放在哪里？工作代码对我有帮助，或者一些提示是可观的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:30:08.450

您首先应该清楚为什么`implement capistrano`要这样做:-)

[Capistrano](https://github.com/capistrano/capistrano)是一个简化部署的工具——它允许通过 ssh 在多台远程机器上执行命令。

对于带有 mongodb 的 Rails 应用程序的默认安装，您不需要在 capistrano`deploy.rb`文件中包含任何与 mongodb 相关的内容。

如果每次将代码部署到远程服务器时都需要完成一些与 mongodb 相关的任务，则可以在此文件中添加一些 mongodb 内容。

示例：这是一个[将本地 mongodb 与生产同步的 capistrano 配方示例](http://www.idolhands.com/ruby-on-rails/guides-tips-and-tutorials/a-capistrano-task-for-synchronizing-your-local-mongodb-with-production)

我建议您通过观看[有关 capistrano 任务的 railscast 剧集来熟悉 capistrano 的基础知识。](http://railscasts.com/episodes/133-capistrano-tasks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:09:37.727

将 mongoid.yml 放在 /config 中，然后输入`cap deploy`/。

# internet-explorer-8 - IE8的richfaces渲染

> ID：13821053
> 
> 赞同：1
> 
> 时间：2012-12-11T13:04:36.097
> 
> 标签：internet-explorer-8, richfaces, rendering

我在 RichFaces3.3.3 中开发了一个演示应用程序客户人口统计向导。在 GoogleChrome 和 Mozilla Firefox 上一切正常。但是在 IE8 中运行相同的问题。在 IE8 向导的第一页显示正常，但在尝试导航到下一页时单击下一步按钮后没有显示任何表单。

IE8 显示如下错误：

用户代理：Mozilla/4.0（兼容；MSIE 7.0；Windows NT 5.1；Trident/4.0；.NET CLR 2.0.50727）时间戳：2012 年 12 月 11 日星期二 11:08:28 UTC

消息：未知的运行时错误行：120 字符：1 代码：0 URI：http://localhost:8400/BBGUServer/a4j/g/3_3_3.Finalorg.ajax4jsf.javascript.AjaxScript.jsf

任何人都可以帮助我解决问题所在。

提前致谢..

以下代码在 IE8 RichFaces3.3.3 中给出错误

请参阅下面给出的代码。除此之外，我没有提供 .java bean 文件，因为我认为这些文件是必需的。

这里 start.xhtml 是加载 custStep1.xhtml 的主页。当我通过单击“下一步”按钮导航到下一页时，在表单中给出了一些值后，没有显示“custStep2”表单的任何内容。仅显示父表单下拉列表（如您所见，我 start.xhtml）。通常这个特殊问题发生在 IE8 中。在 Firefox/Chrome 中一切都运行良好............

--------------------------------------- start.xhtml 的开始

```
 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

    <script type='text/javascript'>
    //<![CDATA[
        function setSkinValue(skinName)
        {
            Seam.Component.getInstance('skinBean').setSkin(skinName, function()
            {
                Seam.Remoting.log('reloading window');
                window.location.reload(false);
            });
        }
    //]]>
    </script>
    <style type="text/css">
        .wizard { width:800px; }
        .wform td { vertical-align:right; }
        .wfcol1 { text-align: right; white-space:nowrap;}
        .s1row td { height:30px; }
        .rich-message { color:red;  }

        .navPanel {
            position:absolute;
            bottom:0;
            height:30px;
            margin:0;
            padding:2px;
        }
    </style>
    <head>  
      <link rel="stylesheet" href="css/style.css" type="text/css" />
    </head>
    <br/>
    <h:panelGrid width="800px" border="0">
        <a4j:keepAlive beanName="customerBean" />
        <rich:panel styleClass="wizard">
            <f:facet name="header">
            <h:outputText value="BBGUI Customer Demographics..." />
            </f:facet>
            <h:form id="mainForm" dir="#{customerBean.textDirection}">
                <rich:comboBox
                    id="language" 
                    selectFirstOnUpdate="false"
                    defaultLabel=""
                    value="#{customerBean.languageName}"
                    enableManualInput="false"
                    width="100"> 
                    <f:selectItem itemValue="English"/>
                    <f:selectItem itemValue="Arabic"/>
                    <a4j:support event="onselect" reRender="mainForm" action="#{customerBean.changeLanguage}"/>
                </rich:comboBox>
                <br/><br/>
                <rich:comboBox
                    id="theme" 
                    selectFirstOnUpdate="false"
                    defaultLabel="Emerald Town"
                    value="#{skinBean.skin}"
                    enableManualInput="false"
                    width="100"> 
                    <f:selectItem itemValue="emeraldTown"/>
                    <f:selectItem itemValue="blueSky"/>
                    <f:selectItem itemValue="wine"/>
                    <f:selectItem itemValue="japanCherry"/>
                    <f:selectItem itemValue="plain"/>
                    <f:selectItem itemValue="ruby"/>
                    <f:selectItem itemValue="classic"/>
                    <f:selectItem itemValue="laguna"/>
                    <f:selectItem itemValue="deepMarine"/>
                    <a4j:support event="onselect" reRender="mainForm" action="javascript:setSkinValue(this.value);"/>
                </rich:comboBox>
                <rich:comboBox
                    id="country1" 
                    selectFirstOnUpdate="false"
                    defaultLabel=""
                    value="#{accountBean.countryCD}"
                    enableManualInput="false"
                    width="200"> 
                    <f:selectItems value="#{accountBean.countryItems}" />
                </rich:comboBox>
                <br/><br/>
                <a4j:include viewId="#{customerBean.formName}" />
            </h:form>
        </rich:panel>

    </h:panelGrid>
    <br/>
</ui:composition> 
```

--------------------------------------- start.xhtml 结束

--------------------------------------- cust_step1.xhtml 结束

```
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

<head>
 <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7; IE=EmulateIE8" />
</head>

    <div style="position:relative;height:140px">
        <h:panelGrid id ="custFrm1" width="750px" columns="4" border="0" cellspacing="0" cellpadding="0">

            Customer No: 

            <h:inputText id="customerNo" value="#{customerBean.data.customerno}" size="30" styleClass="inputText"/>

            <h:outputText id="fnamelbl" value="#{customerBean.fnamelbl}:" size="30"/>

            <h:inputText id="firstName" value="#{customerBean.data.firstname}" size="30" styleClass="inputText"/>

            Last Name:

            <h:inputText id="lastName" value="#{customerBean.data.lastname}" size="30" styleClass="inputText"/>

            E-Mail:

            <h:inputText id="eMail" value="#{customerBean.data.emailaddress}" size="30" styleClass="inputText"/>

            Creation Date:

            <rich:calendar id="creationDate" value="#{customerBean.data.creationdate}" size="30"/>

            Country:

            <rich:comboBox
                id="country" 
                selectFirstOnUpdate="false"
                defaultLabel=""
                value="#{customerBean.countryCD}"
                enableManualInput="false"
                width="200" dir="#{customerBean.textDirection}"> 
                <f:selectItems value="#{customerBean.countryItems}" />
                <a4j:support event="onselect" reRender="state"/>
            </rich:comboBox>

            State:

            <rich:comboBox
                id="state" 
                selectFirstOnUpdate="false"
                defaultLabel=""
                value="#{customerBean.stateCD}"
                enableManualInput="false"
                width="200"> 
                <f:selectItems value="#{customerBean.stateItems}" />
                <a4j:support event="onselect" reRender="city"/>
            </rich:comboBox>

            City:

            <rich:comboBox
                id="city" 
                selectFirstOnUpdate="false"
                defaultLabel=""
                value="#{customerBean.cityCD}"
                enableManualInput="false"
                width="200"> 
                <f:selectItems value="#{customerBean.cityItems}" />
            </rich:comboBox>

        </h:panelGrid>
        <BR /><BR />
        <h:panelGroup> 
            <h:outputText value=" " />
            <h:outputText value="Enter Customer No:" />
            <h:inputText id="custNo" value="#{customerBean.custNumberToSearch}" required="true"/>
            <a4j:commandButton id="retrieveButton" value="#{customerBean.retrieveButtonName}" reRender="custFrm1" styleClass="submitButton" action="#{customerBean.actionSearch}"/>
            <a4j:commandButton id="newCustButton" value="#{customerBean.newCustButtonName}" reRender="custFrm1" styleClass="submitButton" action="#{customerBean.actionNewCust}"/>
            <a4j:commandButton id="nextButton" style="float:right" action="next" value="Next &gt;&gt;"/>
        </h:panelGroup>
    </div>

    <rich:hotKey key="alt+n"
    handler="#{rich:element('nextButton')}.click();
    event.stopPropagation();event.preventDefault();
    return false;"/>
    <rich:hotKey selector="#custNo" key="return"
    handler="#{rich:element('retrieveButton')}.click();
    event.stopPropagation();event.preventDefault();
    return false;"/>

</ui:composition> 
```

--------------------------------------- cust_step1.xhtml 结束

--------------- cust_step2.xhtml 的开始

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:rich="http://richfaces.org/rich">

<head>
 <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7; IE=EmulateIE8" />
</head>

    <div style="position:relative;height:140px">    
        <h:panelGroup>
            <rich:simpleTogglePanel switchType="client" label="Customer Properties">
                <rich:dataTable id="custPropertyData" width="723px" value="#{customerBean.data.customerPropertyList}" 
                                var="custPropData" 
                                columnClasses="10,10,10,10"
                                onRowMouseOver="this.style.backgroundColor='#B5F3FB'"
                                onRowMouseOut="this.style.backgroundColor='#{a4jSkin.rowBackgroundColor}'"
                                styleClass="table">

                    <rich:column width="220px">
                        <f:facet name="header">Property Id</f:facet>
                        <h:outputText id="propertyID" value="#{custPropData.propertyid}" />
                    </rich:column>

                    <rich:column width="220px">
                        <f:facet name="header">Property Name</f:facet>
                        <h:outputText id="propertyName" value="#{custPropData.property}" />
                    </rich:column>

                    <rich:column width="220px">
                        <f:facet name="header">Property Value</f:facet>
                        <h:inputText id="propertyValue" value="#{custPropData.propertyvalue}" />
                    </rich:column>
                </rich:dataTable>
            </rich:simpleTogglePanel>
        </h:panelGroup>
        <BR /><BR />
        <h:panelGroup> 
            <a4j:commandButton value="#{customerBean.saveButtonName}" 
                                styleClass="submitButton" 
                                action="#{customerBean.actionSave}"
                                oncomplete="if(#{customerBean.custSaveFlag == true}) 
                                            {#{rich:component('successPopup')}.show()}
                                            else 
                                            {#{rich:component('errorPopup')}.show()}"/>

            <a4j:commandButton 
                value="#{customerBean.storePropButtonName}" 
                styleClass="submitButton"
                oncomplete="#{rich:component('editPanel')}.show()">
                <f:setPropertyActionListener value="#{customerBean}" 
                            target="#{customerBean}"/>  
            </a4j:commandButton>
            <a4j:commandButton id="prevButton" value="&lt;&lt;Previous" style="float:right"  immediate="true" action="previous"/>
        </h:panelGroup>
    </div>

     <rich:modalPanel id="successPopup" modal="true" autosized="true" resizeable="false" width="300">
        <f:facet name="header">
            <h:outputText value="Unicorn" />
        </f:facet>
        <h:panelGrid columns="1" >               
            <h:outputText id="idText" value="#{customerBean.saveSuccessfullMsg}" />
            <h:commandButton action="#" onclick="#{rich:component('successPopup')}.hide(); return false;" value="Cancel"/>
        </h:panelGrid>
     </rich:modalPanel>

     <rich:modalPanel id="errorPopup" autosized="true" width="300">
        <f:facet name="header">
            <h:outputText value="Unicorn" />
        </f:facet>
        <h:panelGrid columns="1" >               
            <h:outputText id="idText1" value="#{customerBean.saveErrorMsg}" />
            <h:commandButton action="#" onclick="#{rich:component('errorPopup')}.hide(); return false;" value="Cancel"/>
        </h:panelGrid>
     </rich:modalPanel>

    <rich:hotKey key="alt+b"
    handler="#{rich:element('prevButton')}.click();
    event.stopPropagation();event.preventDefault();
    return false;"/>

    <rich:modalPanel id="editPanel" autosized="true" width="450">
        <f:facet name="header">
            <h:outputText value="Save Customer Property" />
        </f:facet>

        <f:facet name="controls">
            <h:panelGroup>
                <rich:componentControl for="editPanel" attachTo="hidelink" operation="hide" event="onclick" />
            </h:panelGroup>
        </f:facet>

<h:form id="form1">
<rich:messages style="color:red;"></rich:messages>
            <h:panelGrid columns="1">
                <a4j:outputPanel ajaxRendered="true">
                    <h:panelGrid columns="2">
                        <h:outputText value="Property Name" />
                        <rich:comboBox
                                id="propname" 
                                selectFirstOnUpdate="false"
                                defaultLabel=""
                                value="#{customerBean.propertyName}"
                                enableManualInput="false"
                                width="250"> 
                            <f:selectItems value="#{customerBean.propertyItems}" />
                        </rich:comboBox>
                        <h:outputText value="Property Value" />
                        <h:inputText id="propval" value="#{customerBean.propertyValue}"/>
                    </h:panelGrid>
                    <rich:message showSummary="true" showDetail="false" for="propname" />
                </a4j:outputPanel>
                <a4j:commandButton value="Store"
                    action="#{customerBean.actionPropertyStore}"
                    reRender="custPropertyData"
                    oncomplete="if (#{facesContext.maximumSeverity==null}) #{rich:component('editPanel')}.hide();"/>
            </h:panelGrid>
</h:form>
    </rich:modalPanel>
</html> 
```

--------------- cust_step2.xhtml 结束

--------------- faces-Config.xml 的开始

```
<?xml version="1.0" encoding="UTF-8"?>

<faces-config version="1.2" 
xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:xi="http://www.w3.org/2001/XInclude" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd">

    <application>
      <view-handler>com.sun.facelets.FaceletViewHandler</view-handler>
    </application>

    <lifecycle>
        <phase-listener>mypackage.ActionListener</phase-listener>
    </lifecycle>

    <managed-bean>
        <managed-bean-name>skinBean</managed-bean-name>
        <managed-bean-class>mypackage.SkinBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>        
    </managed-bean>

    <managed-bean>
        <managed-bean-name>customerBean</managed-bean-name>
        <managed-bean-class>mypackage.CustomerBean</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>        
    </managed-bean>

    <managed-bean>
        <managed-bean-name>accountBean</managed-bean-name>
        <managed-bean-class>mypackage.AccountBean</managed-bean-class>
        <managed-bean-scope>request</managed-bean-scope>        
    </managed-bean>

    <navigation-rule> 
        <from-view-id>/Customer/cust_step1.xhtml</from-view-id> 
        <navigation-case> 
            <from-outcome>next</from-outcome> 
            <to-view-id>/Customer/cust_step2.xhtml</to-view-id> 
        </navigation-case> 
    </navigation-rule>  
    <navigation-rule> 
        <from-view-id>/Customer/cust_step2.xhtml</from-view-id> 
        <navigation-case> 
            <from-outcome>previous</from-outcome> 
            <to-view-id>/Customer/cust_step1.xhtml</to-view-id> 
        </navigation-case> 
    </navigation-rule>   
</faces-config> 
```

--------------- faces-Config.xml 结束

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T06:29:34.783

你写了

```
<a4j:commandButton id="nextButton" style="float:right" action="next" value="Next &gt;&gt;"/> 
```

将上面替换为

```
<a4j:commandButton id="nextButton" style="float:right" action="#{customerBean.nextAction}" value="Next"/> 
```

# java - 如何指示 maven 在包含我创建的工件时自动添加依赖项 jar？

> ID：13821055
> 
> 赞同：3
> 
> 时间：2012-12-11T13:04:43.917
> 
> 标签：java, maven-2

好吧，我有使用 Maven 开发的可重用代码，结果工件是**JAR**。

现在要在另一个项目中使用它，我只是将这个依赖项添加到该项目的 POM.xml 中，但 maven 不会自动检测并包含 jar 的依赖项。

我该怎么做呢？

欣赏这方面的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:19:22.217

您应该尝试构建具有依赖关系的已开发（可重用）代码。我不太确定这是否会有所帮助（我在构建依赖项时也遇到了一些问题），但我认为值得一试。因此，您应该将其添加到 pom.xml（可重用项目的）：

```
 <build>
  ...
     <plugins>
  ...
        <plugin>
           <groupId>org.apache.maven.plugins</groupId>
           <artifactId>maven-jar-plugin</artifactId>
           <configuration>
              <archive>
                <manifest>
                    <addClasspath>true</addClasspath>
                    <mainClass>fully.qualified.MainClass</mainClass>
                </manifest>
              </archive>
           </configuration>
          </plugin>
          <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
              <descriptorRefs>
                <descriptorRef>jar-with-dependencies</descriptorRef>
              </descriptorRefs>
            </configuration>
         </plugin>
    </plugins>
   </build> 
```

有关详细信息，请查看[此问题](https://stackoverflow.com/questions/574594/how-can-i-create-an-executable-jar-with-dependencies-using-maven)和[maven-documenation](http://maven.apache.org/plugins/maven-assembly-plugin/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-02T12:29:38.887

我通过为我创建的 jar 手动添加 pom 文件解决了这个问题。

[文件结构]

> GroupId 文件夹
> 
> > ArtifactId 文件夹
> > 
> > > 版本文件夹
> > > 
> > > > ownjar.jar [我创建的工件]
> > > > ownjar.pom [我手动创建的文件]

然后在 .pom 文件中放入依赖项。

```
<project>
    <dependencies>
        <dependency>
            <groupId>commons-collections</groupId>
            <artifactId>commons-collections</artifactId>
            <version>3.2.1</version>
        </dependency>
    </dependencies>
</project> 
```

# logging - 记录弹性搜索请求

> ID：13821061
> 
> 赞同：21
> 
> 时间：2012-12-11T13:05:19.293
> 
> 标签：logging, elasticsearch

如何记录来自elasticsearch的请求？

我设置`elasticsearch/bin/service/elasticsearch.conf`：

```
wrapper.logfile=/var/log/elasticsearch/debug.log

# Log Level for log file output.  (See docs for log levels)
wrapper.logfile.loglevel=DEBUG 
```

但日志文件仅显示：

```
STATUS | wrapper  | 2012/12/11 13:00:00 | TERM trapped.  Shutting down.
STATUS | wrapper  | 2012/12/11 13:00:02 | <-- Wrapper Stopped
STATUS | wrapper  | 2012/12/11 13:00:05 | --> Wrapper Started as Daemon
STATUS | wrapper  | 2012/12/11 13:00:05 | Java Service Wrapper Community Edition 64-bit 3.5.6
STATUS | wrapper  | 2012/12/11 13:00:05 |   Copyright (C) 1999-2010 Tanuki Software, Ltd. All Rights Reserved.
STATUS | wrapper  | 2012/12/11 13:00:05 |     http://wrapper.tanukisoftware.com
STATUS | wrapper  | 2012/12/11 13:00:05 | 
WARN   | wrapper  | 2012/12/11 13:00:05 | The value of wrapper.java.command does not appear to be a java binary.
WARN   | wrapper  | 2012/12/11 13:00:05 | The use of scripts is not supported. Trying to continue, but some features may not work correctly..
STATUS | wrapper  | 2012/12/11 13:00:05 | Launching a JVM...
INFO   | jvm 1    | 2012/12/11 13:00:05 | WrapperManager: Initializing... 
```

没有关于我的请求的信息...

我用`elasticsearch 0.17.6`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T16:29:44.757

elasticsearch 0.17.6 中没有可用的请求日志记录工具。0.18.3及以上版本支持[慢搜索操作的日志记录](http://www.elasticsearch.org/guide/reference/index-modules/slowlog.html)，可以配置0ms的阈值来记录所有分片的所有搜索请求。在 0.19.12 版本中，此功能也扩展到[索引查询](https://github.com/elasticsearch/elasticsearch/issues/2457)。

如果您对记录所有 HTTP 请求感兴趣， elasticsearch [-jetty](https://github.com/sonian/elasticsearch-jetty)插件支持 elasticsearch 0.18.4 及更高版本的此功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-18T11:23:52.980

在 1.7.3 中

*配置/elasticsearch.yml*

```
index.search.slowlog.threshold.query.debug: 0s
index.search.slowlog.threshold.fetch.debug: 0s
index.indexing.slowlog.threshold.index.debug: 0s 
```

和

*配置/日志记录.yml*

```
 index.search.slowlog: DEBUG, index_search_slow_log_file
  index.indexing.slowlog: DEBUG, index_indexing_slow_log_file

additivity:
  index.search.slowlog: true
  index.indexing.slowlog: true 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-15T16:55:50.737

在 Elasticsearch 5.x 及更高版本中配置日志记录的首选方法是使用 API：

```
## Elasticsearch slow log
curl -X "PUT" "http://localhost:9200/test_resumes/_settings?preserve_existing=true" \
     -H 'Content-Type: application/json; charset=utf-8' \
     -d $'{
  "index": {
    "search.slowlog.threshold.query.trace": "0ms",
    "search.slowlog.threshold.fetch.trace": "0ms",
    "search.slowlog.level": "trace"
  }
}' 
```

# jquery - 每个表单使用多个验证器进行 JQuery 验证

> ID：13821067
> 
> 赞同：0
> 
> 时间：2012-12-11T13:05:36.540
> 
> 标签：jquery, jquery-validate, forms

我有一个表单，里面有一些 div 块。所有的 div 都有它们的字段和按钮。单击按钮时，我只需要验证那个 div（按钮的父级）并将一些字段异步提交到服务器。一切正常，但不是验证。我使用[JQuery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)。如我所见，我无法编写这样的代码：

```
<script type="text/javascript">
//.......
     // Validator for general information
        var userProfileGeneralValidator = $("#form1").validate({
            onkeyup: false,
            onclick: false,
            onfocusout: false,
            rules: {
                txtPrivateNumber: {
                    required: true
                }
            },
            messages: {
                txtPrivateNumber: {
                    required: "Required!"
                }
            },
            errorPlacement: function (error, element) {
                if (error.text() != "") {

                }
            },
            success: function (lbl) {

            }
        });

       // Validator for password information
        var userPasswordValidator = $("#form1").validate({
            onkeyup: false,
            onclick: false,
            onfocusout: false,
            rules: {
                txtOldPass: {
                    required: true,
                    minlength: 5
                }
            },
            messages: {
                txtOldPass: {
                    required: "Required!"
                }

            },
            errorPlacement: function (error, element) {
                if (error.text() != "") {
                }
            },
            success: function (lbl) {

            }
        });
</script> 
```

而不是调用`userPasswordValidator.form()`一个按钮单击和`userProfileGeneralValidator.form()`另一个按钮单击。是否有任何技巧可以实现我的目标：使用 jquery 分别验证几个表单部分？
**PS：**找到了一种解决方案：将几种形式放在主要形式中。每个 div 一个。但认为它很脏。
**使用我使用的解决方案进行更新：**最后我从这个问题中得到了答案，但做了以下更改：
我在 document.ready 的某个地方调用`validate()`整个表单的方法。作为验证选项，我为我需要验证的所有控件添加规则（它们嵌套在一些`divs`组中）。Messages/errorPositions/Success 我在文件中声明，我在其中单击该 div 中的按钮，其中嵌套了要验证的控件。并验证我使用的那个 div：

```
var validator = $("#topUserProfile").validate(userProfileGeneralValidator);
// Validate and save general information
if (!validator.form()) {

    return;
} 
```

`#topUserProfile`包含控件的 div 的名称在哪里；`userProfileGeneralValidator`是一个变量，它包含用于验证的附加选项（消息/位置/等）。谢谢大家，谁帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T17:27:06.257

我用于此要求的是将*多个元素*传递给 jquery validate 插件**valid()**方法，例如这个的一些变体

```
$('#testdiv :input').valid() 
```

如果您只是调用 $('#testdiv').valid() 这将不起作用，但使用 :input 选择器，调用将告诉您 jquery 包装集中的所有表单元素是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:59:25.650

我以前见过这种情况，但最快的方法是创建一个表单并使用一个 .validate 调用初始化整个事物。然后，如果您有验证的子案例，请使用带有 .valid() 方法的单个元素定位。在此处阅读更多信息：http: [//docs.jquery.com/Plugins/Validation/valid](http://docs.jquery.com/Plugins/Validation/valid)

假设#txtOldPass 在#form1 中，它的外观如下：

```
$("#form1").validate();
$("button").click(function(e) {
  e.preventDefault();
  alert("Valid: " + $("#txtOldPass").valid());
}); 
```

# javascript - Dojo 工具包、绑定和局部视图（使用内容窗格）

> ID：13821069
> 
> 赞同：2
> 
> 时间：2012-12-11T13:05:40.337
> 
> 标签：javascript, html, model-view-controller, binding, dojo

我遇到了 ContentPane 和绑定的问题。我有两种不同结构的解决方案。

我的第一个解决方案文件系统：

```
 - Home.html
 - MyModule.html  
 - MyView.html 
```

*Home.html*包含引用*MyModule.html*的 Dojo 对话框。

*MyModule.html*包含引用*MyView.html*的 ContentPane 。

*MyView.html*使用与 dojo/mvc/at 的绑定

使用这种结构，绑定可以在 Firefox、Chrome 上工作，但不能在 Internet Explorer 8 上工作。

我的第二个解决方案文件系统：

```
- Home.html 
```

*Home.html*包含在第一个解决方案的*MyView.html*中使用的代码。它使用与 dojo/mvc/at 的绑定。

使用这种结构，绑定可以在所有浏览器上工作。

为什么第一个案例不起作用？

您可以在此处获取示例： [http ://www.megafileupload.com/en/file/378226/DojoBinding-zip.html](http://www.megafileupload.com/en/file/378226/DojoBinding-zip.html)

# ruby-on-rails - Rails 中的规范没有启动

> ID：13821070
> 
> 赞同：0
> 
> 时间：2012-12-11T13:05:40.910
> 
> 标签：ruby-on-rails, rspec, guard

我有一些规格的 rspec，但经过一些迁移后，规格没有启动。我执行

```
bundle exec rake spec 
```

并且显示了具有正确 Ruby 版本和一些规范的命令：

```
/Users/jose/.rvm/rubies/ruby-1.9.3-p327/bin/ruby -S rspec ./spec/controllers/apps_controller_spec.rb ./spec/integration/users_spec.rb 
```

但在那之后，什么都没有显示。我也尝试过使用 Guard，但我得到了相同的结果。

我已经回滚到以前的迁移，但没有任何反应。

任何解决方案或解决方法？

PS这是我的gemfile-> [https://gist.github.com/4258413](https://gist.github.com/4258413)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:31:30.200

好的，问题解决了。

我在 spec_helper.rb 中包含了 lib 下的所有文件：

```
Dir[Rails.root.join("lib/**/*.rb")].each {|f| require f} 
```

问题是在那个目录中我也有一个守护进程，所以每次都会执行这样的事情。

```
$running = true
Signal.trap("TERM") do 
  $running = false
end

while($running) do
  # do things
  sleep 10
end 
```

对不起一个愚蠢的问题。

# javascript - 用于模拟按键的 Jquery 脚本不运行键盘快捷键

> ID：13821071
> 
> 赞同：2
> 
> 时间：2012-12-11T13:05:44.050
> 
> 标签：javascript, jquery, keyboard-shortcuts, keypress, simulate

我想提前感谢您为此花费的任何时间和精力。好的，所以我有一个脚本，它应该在页面加载后 3 秒后模拟按键事件。我希望这个按键可以运行键盘快捷键，但它所做的只是按下键。一旦按下，我怎样才能让它真正运行快捷方式？不确定这是否可能。再次感谢。

```
<script>
 setTimeout( function(){
// jQuery plugin. Called on a jQuery object, not directly.
jQuery.fn.simulateKeyPress = function(character) {
  // Internally calls jQuery.event.trigger
  // with arguments (Event, data, elem). That last arguments is very important!
  jQuery(this).trigger({ type: 'keypress', which: character.charCodeAt(0) });
};

jQuery(document).ready( function($) {
  // Bind event handler
  $( 'body' ).keypress( function(e) {
    alert( String.fromCharCode( e.which ) );
    console.log(e);
  });
  // Simulate the key press
  $( 'body' ).simulateKeyPress('z');
});
 }, 3000); //3 seconds

</script>

<script type="text/javascript">
// define a handler
function doc_keyUp(e) {

    // this would test for whichever key is 40 and the ctrl key at the same time
    if (e.ctrlKey && e.keyCode == 122) {
        // call your function to do the thing
        pauseSound();
    }
}
// register the handler 
document.addEventListener('keyup', doc_keyUp, false);
</script> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T13:19:27.163

如果您尝试触发某些浏览器或系统范围的键盘快捷键，那么这是一个死胡同——出于安全原因，它无法完成。如果可能的话，您将拥有遍布 Internet 的页面，这些页面（例如）甚至无需询问（通过使用 Javascript 触发 CTRL+B 快捷方式）即可将它们自己添加到您的书签中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:19:19.773

你不先添加你的处理程序....这样做

```
jQuery(document).ready(function($) {
    // Bind event handler
    $('body').keypress(function(e) {
        alert(String.fromCharCode(e.which));
    });
});
jQuery.fn.simulateKeyPress = function(character) {
    jQuery(this).trigger({
        type: 'keypress',
        which: character.charCodeAt(0)
    });
};

setTimeout(function() {
    $('body').simulateKeyPress('z');
}, 3000); //3 seconds 
```

测试示例：http: [//jsfiddle.net/x8a25/1/](http://jsfiddle.net/x8a25/1/)

# iphone - 如何在朋友的墙上发帖？

> ID：13821074
> 
> 赞同：-1
> 
> 时间：2012-12-11T13:05:55.110
> 
> 标签：iphone, objective-c, ios, facebook, ios6

我正在使用以下代码在设备用户的墙上发布。我也设法获得了朋友列表和他们的 ID。使用朋友的 id 如何根据朋友的 id 使用以下代码在选定的朋友的墙上发帖？

```
if([SLComposeViewController isAvailableForServiceType:SLServiceTypeFacebook]) {
    SLComposeViewController *controller = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook ];
    SLComposeViewControllerCompletionHandler myBlock = ^(SLComposeViewControllerResult result) {
        if (result == SLComposeViewControllerResultCancelled) {
            NSLog(@"Cancelled");

        } else {
            UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Posted!!!" 
            message:@"your status is posted to facebook successfully" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];                
            [alert show];
        }

        [controller dismissViewControllerAnimated:YES completion:Nil];
    };

    controller.completionHandler =myBlock;

    [controller setInitialText:@" hello there you got a text ..."];

    [self presentViewController:controller animated:YES completion:Nil];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:57:34.273

看看安东向您指出的问题。**然而**，据我了解，Facebook 将[在 2013 年 2 月取消使用 Graph API 向朋友墙发帖的功能](https://developers.facebook.com/roadmap/)。相反，您需要通过调用 Feed 对话框并在帖子中标记朋友来创建帖子。然后该帖子将出现在他们的墙上（假设他们批准）。当您决定如何进行此操作时，您需要牢记这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T10:35:04.227

您不能从 API 发布到朋友的墙，但可以发布到他们的[Stream](http://developers.facebook.com/docs/guides/canvas/#stream)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T06:35:47.657

自 2013 年 2 月 6 日起，发布到其他用户墙已弃用。

[https://developers.facebook.com/roadmap/completed-changes/](https://developers.facebook.com/roadmap/completed-changes/)

> **移除通过 Graph API 向朋友墙发帖的功能**
> 
> 我们将删除通过 Graph API 向用户朋友的墙发帖的功能。具体来说，针对 [user_id]/feed 的 [user_id] 与会话用户不同的帖子，或 target_id 用户与会话用户不同的 stream.publish 调用将失败。如果您想允许人们发布到他们朋友的时间线，请调用提要对话框。通过用户提及标签或动作标签包含朋友的故事将显示在朋友的时间线上（假设朋友批准标签）。有关详细信息，请参阅此博客文章。

# android - 无法创建 AVD Ok 已禁用

> ID：13821081
> 
> 赞同：11
> 
> 时间：2012-12-11T13:06:07.167
> 
> 标签：android, avd

我已经安装了 eclipse juno 4.2.1 Android SDK，我创建了一个 Android 应用程序，并且在创建新的 AVD 时，尽管我已经确定了它的所有规格，但**Ok**按钮总是被禁用

这是我输入的规格

![在此处输入图像描述](../Images/162cb6599d02675cfa9f6e18383a45dc.png)

我不知道为什么任何想法！谢谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-11T13:13:00.683

没有您安装的系统映像，

转到`window->Android SDK Manager`，并为该特定目标下载 avd 的系统映像

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-01T16:23:13.913

您可以检查“AVD 名称”中是否有空格。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T18:45:42.140

只需重新启动eclipse。尽管您下载它仍然需要重新启动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T06:38:49.247

查看屏幕截图上的 CPU/ABI 部分。很明显，没有为目标版本安装系统映像。

转到 SDK Manager 并为您的目标版本安装“ **ARM EABI v7a System Image ”。**

希望能帮助到你！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-12T14:48:35.207

按照上述解决方案下载系统映像后，系统映像无法重新激活确定按钮的禁用。我尝试为HTC One X优化RAM小于758M字节（小于硬件配置）的参数设置。重新激活“确定”按钮是可以的。

SDK Manager 的程序需要检查您机器中的可用 RAM 是否用于 SDK Manager 的模拟测试。我尝试在 ADV 虚拟设备中使用更少的 RAM 大小，然后系统可以立即启用“确定”按钮。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-29T17:04:17.937

我只需要从下拉菜单中选择一个皮肤来启用确定按钮。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-03-12T01:59:45.783

可能的替代解决方案

我在这个问题上敲了几个小时，直到我发现默认位置是 C:\username path\SDKs 或其他东西，我的系统上安装了 Android 到 D:\sdks\android_sdk_windows。因此，将 Eclipse Android 目录更改为 D:\sdks\android_sdk_windows 修复了它。

我还听说，如果您将 Android SDK 安装到没有空格的路径，它可能会有所帮助。

希望这可以帮助某人保留一些头发。

# c# - 如何使用 C# 运行远程计算机程序“以管理员身份运行”

> ID：13821083
> 
> 赞同：2
> 
> 时间：2012-12-11T13:06:07.373
> 
> 标签：c#, remote-server

我在远程机器上有一个批处理文件。通过右键单击文件并选择“以管理员身份运行”选项来运行此批处理文件。要以编程方式运行此批处理文件（位于远程计算机中），我使用 C# ManagementScope 类。但是我找不到使用 ManagementScope 类设置“以管理员身份运行”选项的任何选项。

我需要代码解决方案（任何示例代码都很好）来执行该批处理文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:14:14.133

您应该考虑使用[c# Process Class](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)。它比使用 WMI 快得多。

您可以像这样传递用户名和密码凭据，这是我之前创建的一个类：

```
class Logon : Process
{
    internal Logon(string filename, string username, string passwordtxt, string argument)
    {
        StartInfo.Domain = "Your-Domain";
        StartInfo.FileName = filename;
        StartInfo.UserName = username;
        StartInfo.Password = GetSecurePassword(passwordtxt);
        StartInfo.UseShellExecute = false;
        StartInfo.Arguments = argument;
        StartInfo.LoadUserProfile = true;
    }

    public System.Security.SecureString GetSecurePassword(string passwordtxt)
    {
        SecureString SS = new SecureString();
        foreach (char PSW in passwordtxt)
        {
            SS.AppendChar(PSW);
        }

        return SS;
    }
} 
```

在您的应用程序中，您只有以下内容：

```
public void verifyuser(string filename, string argument)
{
    try
    {
        var logon = new SecureLogon(
        filename, txtuser.Text, txtpassword.Text, argument);

        logon.Start();
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message,"Notification");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:33:03.037

您可以使用[psexec](http://technet.microsoft.com/en-gb/sysinternals/bb897553.aspx)来执行此操作。

```
Process.Start("psexec", "params"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:34:10.670

您是否尝试将其添加到“批处理”的开头？

```
runas /user:Administrator Example1Server.exe 
```

# python - 在表单中创建新的外键

> ID：13821085
> 
> 赞同：1
> 
> 时间：2012-12-11T13:06:21.567
> 
> 标签：python, django, django-forms, django-autocomplete-light

我正在使用 django autocomplete_light 并通过一对多关系连接了两个模型。模型 A 对模型 B 有一个 ForeignKey 字段 TAG。 一切正常，但我只能选择现有的 Tag，无法自动添加新的 Tag，即使可以在框中自由输入。

如何“拦截”验证并及时为标签创建合适的数据库条目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:15:11.573

您可以使用[添加另一个弹出窗口](http://django-autocomplete-light.readthedocs.org/en/latest/addanother.html)，例如在 django admin 中。

这是使用[此代码的](https://github.com/yourlabs/django-autocomplete-light/tree/master/test_project/non_admin_add_another)[实时示例](http://jpic.pythonanywhere.com/non_admin_add_another/widget/add/)。设计不是很好，但它证明了这一点。

# javascript - Mocha：如何测试一系列异步操作，必须按顺序测试

> ID：13821086
> 
> 赞同：0
> 
> 时间：2012-12-11T13:06:25.447
> 
> 标签：javascript, node.js, mocha.js

以下测试是执行此操作的最佳方法，还是我可以改进它（并删除 Step 依赖项）？

我特别担心每个“步骤”函数都将前一次执行的测试与下一次执行的调用混为一谈。（即剪切粘贴易碎）

（另请参阅：[如何按顺序执行异步 Mocha 测试（NodeJS）？](https://stackoverflow.com/questions/9736429/how-can-i-execute-async-mocha-tests-nodejs-in-order/12983519#12983519)）

```
 it('should run an update', function(done) {
    var db = new database.Database();
    var sess = new session.Session(db);
    Step(
      function createTable() {
        sess.exec('create table customers (id integer primary key auto_increment, name varchar, age integer)', this);
      },
      function insertCustomer1(err, message) {
        assert(!err, err);
        assert.equal("Table created.", message);
        sess.exec('insert into customers (name, age) values ("james", 41)', this);
      },
      function insertCustomer2(err, message) {
        assert(!err, err);
        assert.equal("1 row inserted.", message);
        sess.exec('insert into customers (name, age) values ("thomas", 19)', this);
      },
      function updateCustomer1(err, message) {
        assert(!err, err);
        assert.equal("1 row inserted.", message);
        sess.exec('update customers set age = 42 where name = "james"', this);
      },
      function end(err, message) {
        assert(!err, err);
        assert.equal("1 row updated.", message);
        done();
      }

    );
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T19:40:29.993

要解决合并问题，您可以编写如下代码：

```
Step(
  function createTable() {
    var next = this;
    sess.exec('create table customers (id integer primary key auto_increment, name varchar, age integer)', function (err, message) {
      assert(!err, err);
      assert.equal("Table created.", message);

      next();
    });
  },
  function insertCustomer1() {
    var next = this;
    sess.exec('insert into customers (name, age) values ("james", 41)', function (err, message) {
      assert(!err, err);
      assert.equal("1 row inserted.", message);

      next();
    });
  }, 
```

我相信您需要设置`var next = this`，因为 Step`this`用作异步步骤的回调，并且在对 sess.exec 的调用中不会正确绑定。如果那是一个交易破坏者（在我看来，样板文件越少越好），您可能会考虑使用[async#series](https://github.com/caolan/async#series)。

# c# - 无法从 .NET 登录到 Asterisk

> ID：13821088
> 
> 赞同：0
> 
> 时间：2012-12-11T13:06:39.057
> 
> 标签：c#, networking, sip, voip, asterisk

我正在尝试从[Asterisk.NET](http://sourceforge.net/projects/asterisk-dotnet/)运行示例。当我尝试从 Asterisk.NET.Test 运行以下代码时：

```
manager = new ManagerConnection(ASTERISK_HOST, ASTERISK_PORT, ASTERISK_LOGINNAME, ASTERISK_LOGINPWD);
manager.Login(); 
```

我总是收到以下消息：

```
AuthenticationFailedException: Authentication failed ... at ManagerConnection.cs:line 1263 
```

我应该使用哪个用户名和密码？我试过“admin”/“admin”，我用它来登录 FreePBX 网络管理和“admin”/“amp111”，但都不起作用。在 VirtualBox 中安装 AsteriskNow 后，我没有修改任何内容。在 FreePBX Web 管理页面中，每个服务器状态都是绿色（正常）。

问候， Tamas Ionut

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-31T07:36:45.753

在您尝试连接并运行命令的机器上启动 Telnet：

```
telnet 000.000.000.000 5038
ACTION:LOGIN
USERNAME:username
SECRET:password
EVENTS:ON 
```

其中000.000.000.000，用户名，密码是服务器地址，用户名和密码。

如果您收到消息“身份验证失败”，很可能是用户“用户名”不允许来自您机器地址的连接。允许用户建立连接的地址在服务器的配置文件中配置。

# java - 使用 jdo 存储多图

> ID：13821089
> 
> 赞同：0
> 
> 时间：2012-12-11T13:06:42.237
> 
> 标签：java, sql, jdo

如何`ArrayListMultiMap<String, String>`以最好的方式用 jdo 序列化一个。首选表结构看起来像

```
owner_id, key (String), Value(String), order 
```

如果将值序列化为 blob，则很容易。但是我们想采用这个，所以我们也可以进行查询。

* * *

`Map<String, List<String>>`也可以代替 ArrayListMultiMap。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:58:59.773

您可以将 MultiMap 序列化/反序列化到 JSON 字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:04:12.003

鉴于该表结构，我假设`PRIMARY KEY`为：

```
PK=owner_id, key 
```

然后将您的`Map<String, List<String>>`数据结构分成多行，如下所示：

```
owner key    value
100   key1   value11
100   key1   value12
100   key1   value13
100   key1   value14
100   key2   value21
100   key2   value22
100   key2   value23 
```

# ios - MKMapView 上的 Facebook 签到

> ID：13821090
> 
> 赞同：0
> 
> 时间：2012-12-11T13:06:48.993
> 
> 标签：ios, facebook-graph-api, mkmapview

我正在开发一个应用程序，在成功登录后我已经登录 Facebook会出现`UIViewController`一个。`MKMapView`我只想让所有签到并在`MKMapView`. 我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:34:08.197

您必须征得用户的许可才能在登录时访问签入。之后，您可以使用“https://graph.facebook.com/me/checkins?access_token=...”获取登录用户的所有签到。要访问朋友的签到，请使用“https://graph.facebook.com/[Friend's userID]/checkins?access_token=...”，这将返回登录用户可以访问的该朋友的所有签到.

查看 Graph API： [https ://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

关于如何使用 Facebook SDK 调用这些 API： [https ://developers.facebook.com/docs/reference/ios/3.1/](https://developers.facebook.com/docs/reference/ios/3.1/)

# jquery - 如何修复 Internet Explorer 中的多页表单显示和功能问题？

> ID：13821099
> 
> 赞同：0
> 
> 时间：2012-12-11T13:07:11.800
> 
> 标签：jquery, css, forms, internet-explorer

我正在处理这个表格：

[http://jsfiddle.net/pPWr3/14/](http://jsfiddle.net/pPWr3/14/)

在 chrome 和 firefox 中显示正常，但在 Internet Explorer 9 中显示和功能问题：

*   “返回”和“下一页”功能不起作用。
*   “返回”和“下一步”按钮出现在表单的第一页。
*   所有页面都显示在首页上。
*   javascript onblur 效果不起作用。

谁能建议我可以解决此问题或提供适用于 ie 的 jsfiddle 版本？

谢谢你。

使用的脚本是托管在 github 上的修改版本：

*   [https://github.com/xoxco/jQuery-multipage-form](https://github.com/xoxco/jQuery-multipage-form)

和：

*   [https://github.com/jzaefferer/jquery-validation](https://github.com/jzaefferer/jquery-validation)

相关的多页脚本是：

```
//jquery multipage behaviour
$('#multipage').multipage({transitionFunction:transition, 
'navigationFunction': function(pages){},
'inactiveDot': '<img src="http://dummyimage.com/10x10/cccccc/cccccc.png" style="margin-right: 5px">',
'activeDot': '<img src="http://dummyimage.com/10x10/c27daf/c27daf.png" style="margin-right: 5px">'
});

// progresses user to next page on clicking option one or two on the front page
$("#option1, #option2").click( function(){        

$('#multipage').nextpage();  

});
// handles previous/next page click
$('.multipage_back').click(function(){            
$('#multipage').prevpage();
});
$('.multipage_next').click(function(){
if(!validate())  return false;
$('#multipage').nextpage();                        
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:41:00.043

解决方案是脚本托管在 github gist 上，并且由于某种原因，该表单仅在将脚本放置在不同的托管上时才有效。

# sql - Entity Framework EF 代码首先使用 ExecuteStoreCommand 执行 sproc 非常慢

> ID：13821109
> 
> 赞同：4
> 
> 时间：2012-12-11T13:07:49.793
> 
> 标签：sql, entity-framework-4, ef-code-first, azure-sql-database

我在 Azure sql db 中有一个存储过程，当我从 SSMS 运行时，它在大约 300 毫秒内完成。sproc 接受一个 id 和一个日期范围，收集一些数据并将其保存到聚合表中。它不返回任何结果。

当它从 EF 代码第一个 ExecuteStoreCommand 对象（使用相同的参数）运行时，大约需要 60 秒才能完成。

我尝试使用 context.Database.ExecuteSqlCommand 和 context.Database.SqlQuery 以及相同的结果，非常慢！

有人可以解释一下，与直接执行存储过程相比，EF 执行如此缓慢吗？

有没有像样的工具可以告诉我 EF 在做什么（分析器？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T22:19:09.437

如果没有存储过程的代码，很难告诉您可能没有考虑哪种“最佳实践”，但是此页面“[代码项目：性能和实体框架](http://www.codeproject.com/Articles/38922/Performance-and-the-Entity-Framework)”提供了很多关于提高 EF 性能的有用信息。

这篇“[文章](http://msdn.microsoft.com/en-us/magazine/gg309181.aspx)”有很多关于使用 Visual Studio 2010 分析器工具分析 EF 的数据访问活动的好信息。

# javascript - 更改 TextArea 单词的颜色

> ID：13821110
> 
> 赞同：0
> 
> 时间：2012-12-11T13:07:55.783
> 
> 标签：javascript, qooxdoo

有没有办法改变 TextArea 中某些单词的颜色？例如，

“路上有三只负鼠。”

我想把“负鼠”染成红色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T07:08:02.773

qooxdoo 确实使用本机 TextArea，因此它取决于本机 TextAreas 功能。由于 TextAreas 不支持该功能，我们对此无能为力。

另请参阅以下问题的答案以获取更多信息：

[使用 Jquery 更改 Textarea 中某些单词的颜色？](https://stackoverflow.com/questions/2990157/change-the-color-of-certain-words-in-textarea-using-jquery)

[文本区域或文本输入中的多色文本突出显示](https://stackoverflow.com/questions/4845813/multicolor-text-highlighting-in-a-textarea-or-text-input)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T07:14:35.993

在 textarea 你不能。但是有“可编辑的div”的可能性。请参阅[http://codemirror.net/](http://codemirror.net/)（主要用于代码列表，但您也可以使用自定义解析器对其进行扩展）

# macos - Mediaelement.js 加载错误的格式 Ffox (MAC)

> ID：13821113
> 
> 赞同：2
> 
> 时间：2012-12-11T13:08:15.270
> 
> 标签：macos, html5-video, mediaelement.js

我正在使用 mediaelement.js 库来显示视频。问题是对于 MAC 上的 Firefox 3.6.13，该库加载视频的 .mp4 版本而不是 .ogv 版本（加载时显示正确）。我的视频源是标准顺序：“.mp4”， “.webm”、“.ogv”。是否可以让浏览器加载 .ogv 版本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:40:30.467

在 MAC 下，只要您安装了 QuickTime，视频的行为就会有所不同。MAC 将默认播放 QuickTime 支持的视频，而不是在这种情况下它支持的 HTML 5 格式`OGG`。我的建议是检测平台并使用 Modernizr 删除 .mp4 源。

```
if (Modernizr.video.ogg) {
    // Remove mp4 source
} 
```

[这是有关 Modernizr 的文档。](http://modernizr.com/docs/)

# java - Java中在文件中间写入的最佳方式

> ID：13821116
> 
> 赞同：2
> 
> 时间：2012-12-11T13:08:19.780
> 
> 标签：java, io, postscript

> **可能重复：**
> [在 Java 文件中间写入字节的最佳方法](https://stackoverflow.com/questions/181408/best-way-to-write-bytes-in-the-middle-of-a-file-in-java)

我正在编写一个修改 PostScript 文件以添加打印属性的程序，因此我需要在文件中间添加行。这些 PostScript 文件非常大，我想知道我使用的代码是否最有效。此代码读取源文件并写入一个临时文件，在需要的地方添加一行。

```
 Writer out = null;
    Scanner scanner = null;

    String newLine = System.getProperty("line.separator");

    scanner = new Scanner(new FileInputStream(fileToRead));
    out = new OutputStreamWriter(new FileOutputStream(fileToWrite));
    String line;
    while(scanner.hasNextLine()){
        line = scanner.nextLine();

        out.write(line);
        out.write(newLine);
        if(line.equals("%%BeginSetup")){
            out.write("<< /Duplex true /Tumble true >> setpagedevice");
            out.write(newLine);
        }
    }

    scanner.close();
    out.close(); 
```

任何帮助将不胜感激，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:24:54.673

在 SO 上找到的大多数旧答案都使用/链接旧的`java.io.*`

Oracle 有很好的示例如何使用“新”java 7`java.nio.*`包（通常具有更好的性能）来做到这一点

[http://docs.oracle.com/javase/tutorial/essential/io/rafs.html](http://docs.oracle.com/javase/tutorial/essential/io/rafs.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:13:43.867

请参阅`RandomAccessFile`此处及其示例：[Fileseek](http://www.roseindia.net/tutorial/java/core/files/fileseek.html) - 您可以查找文件中的特定位置并在那里写入。

# javascript - 如何用javascript替换我的url文件夹？

> ID：13821118
> 
> 赞同：1
> 
> 时间：2012-12-11T13:08:21.800
> 
> 标签：javascript, jquery, html

我在这里阅读了很多关于使用 jQuery 更改站点语言的答案，但对我没有任何帮助。

好吧，我有一个网站作为示例：**www.domain.com** 在里面我有语​​言文件夹。**/en/**英文页面，**/el/**希腊文页面。英语和希腊语的所有页面都相同。*index.html、gallery.html*等

我在右上角的标题页中有两个标志图标来更改语言。我想，当用户点击英国国旗时，去`/en/page.html`，当用户点击希腊国旗去时`/el/page.html`。

```
<script>
$(document).ready(function(){
   $('a').click(function() {
            document.location.href =document.location.href.replace('/el/' '/en/');
      });
    });
</script> 
```

这是我的html代码：

```
<head>
<a href="javascript:;"><img src="../images/flagen.gif"></a>
</head> 
```

在此示例中，我在希腊页面*rootwww/el/index.html*上 ，我想将 /el/ 替换为 /en/ 文件夹路径并转到 */en/index.html*

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:16:55.613

您的替换方法中缺少逗号。将其更改为：

```
<script>
$(document).ready(function(){
   $('a').click(function() {
            document.location.href = document.location.href.replace('/el/','/en/');
      });
    });
</script> 
```

这应该有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:16:47.170

您是否忘记了“替换”中的逗号，或者这对您来说是否正常？而且你不需要写两次“document.location.href ....”

我建议使用以下代码进行测试

```
$(document).ready(function(){
   $('a').click(function() {
            var str = document.getElementById('a').document.location.href;
            var newPath= str.replace("/el/","/en/");
            document.location.href =newPath;
      });
    }); 
```

# java - 分析 Java WebApps

> ID：13821119
> 
> 赞同：2
> 
> 时间：2012-12-11T13:08:31.433
> 
> 标签：java, web-applications, profiling

在尝试使用 JVisualVM 分析我们的 WebApp 时，我遇到的问题是很多有趣的东西都隐藏在我们的 ApplicationServer 的方法后面。

我希望有一个工具可以让我分析服务器内部的完整 web 应用程序，但不分析服务器本身或可能在同一服务器上运行的任何其他 web 应用程序。基本上我认为服务器本身应该能够提供类似的东西，但我从未听说过任何服务器中有这样的功能。有人知道这样的功能吗？

我想补充一点，我已经使用 JVisualVM 对我的 Web 应用程序进行了概要分析......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:15:02.607

您可以使用[VisualVm](http://visualvm.java.net/)并连接到您的应用程序服务器。在那里，您可以分析您的应用程序。您还可以通过 JMX 连接到远程应用程序服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T09:28:05.180

在不分析服务器的情况下分析 Web 应用程序实际上并不可行，因为分析器总是查看整个 JVM。

您可以定义入口点以自动启动和停止分析，但这并不是必需的：只需将您的方法调用记录过滤器设置为您的 Web 应用程序的包，您将只会看到您感兴趣的类中的方法调用，而无需容器周围的堆栈框架。

在[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)中，这是通过打开会话设置并定义一个包含性过滤器来完成的：

![在此处输入图像描述](../Images/9ae92bfa703416956ae2aad83e40cc80.png)

免责声明：我公司开发 JProfiler。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:12:59.200

您也可以将 VisualVM 连接到服务器的进程以对其进行分析。请参阅[使用远程应用程序](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/applications_remote.html)和[显式连接到 JMX 代理](http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/jmx_connections.html)以供参考。

# iphone - iPhone：隐藏地址栏，如果用户点击屏幕顶部或时钟/电池栏

> ID：13821121
> 
> 赞同：0
> 
> 时间：2012-12-11T13:08:45.683
> 
> 标签：iphone

我希望地址栏在 iPhone 上消失。到目前为止，我使用过：

```
window.scrollTo(0, 1); 
```

这会在页面首次加载时隐藏地址栏。

然后我有

```
document.body.addEventListener('touchmove', function(e){ e.preventDefault(); }); 
```

这可以防止用户向上滚动到地址栏（或其他任何地方），同时仍然允许点击按钮。

但是，当我点击页面顶部时，地址栏仍然出现。不知道这是因为我触摸了网页的顶部还是因为我触摸了带有时钟和电池的栏。

我猜用户自己需要在他的手机上设置这个选项，虽然如果我可以通过网页控制它会很好。有没有可能？

为什么？我想为一个难以控制自己动作的残疾儿童制作一个网络应用程序。我本质上想关闭与网络应用程序本身无关的任何触摸操作。否则他会不小心引发很多不必要的动作。不确定这是否可能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:17:59.293

恐怕你不能隐藏状态栏。例如，在 iOS 6 中，您可以在横向模式下进入全屏模式，它会隐藏状态栏，但屏幕右下方有一个新按钮可以退出全屏模式。

您的要求在 Safari 中无法实现。但是你可以用一个简单的`UIWebView`. 这样就不会有任何不必要的动作。

# jquery - jQuery UI 滚动条

> ID：13821126
> 
> 赞同：2
> 
> 时间：2012-12-11T13:09:14.553
> 
> 标签：jquery, css

我有一个 jQuery UI 对话框，它在最小化时转到左侧的容器。如何向该容器添加 jQuery UI 滚动条？

我试过这个，但它给了我默认的沉闷滚动条：

```
#dialog_window_minimized_container {
    position: relative;
    top: 0px;
    size: 10px;
    height:100%;
    display: inline-block;
    overflow: scroll;
} 
```

如何将其更改为 jQuery 自定义 UI？

最大化时，对话框应自动调整到窗口，使其不会覆盖对话框容器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T10:23:29.000

这是一个 jquery 自定义内容滚动器，可以帮助你。它在所有浏览器中都很好且易于使用，移动设备也可以查看[http://manos.malihu.gr/jquery-custom-content-scroller/](http://manos.malihu.gr/jquery-custom-content-scroller/)

# c# - 与字符串值列表进行比较的 Linq 查询

> ID：13821127
> 
> 赞同：4
> 
> 时间：2012-12-11T13:09:15.443
> 
> 标签：c#, linq

我需要使用 LINQ 从字符串列表中比较并获取匹配值。看看我的代码。

**代码**

```
Split = Id.Split(',');
List<string> uids = new List<string>(Split);
var model = (from xx in Db.ItemWeedLogs
                where xx.ItemNo == uids   
                // I need to pass a string list to extract the matching record.
                select xx).ToList(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T13:14:15.427

试试这个 ：

```
var model = (from xx in Db.ItemWeedLogs
                     where uids.Contains(xx.ItemNo)
                     select xx).ToList(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:14:38.873

尝试：

```
where uid.contains(xx.ItemNo) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T13:27:21.590

我认为这更快更清晰。

```
var model = Db.ItemWeedLogs
              .Join(Id.Split(','), di => di.ItemNo, si => si, (d, s) => new {d})
              .ToList(); 
```

# iphone - 在 iPhone 中使用批处理 JSON 过程在 Facebook 上上传图像时出现问题？

> ID：13821134
> 
> 赞同：1
> 
> 时间：2012-12-11T13:09:29.870
> 
> 标签：iphone, ios, facebook, facebook-graph-api

现在我尝试使用批处理方法发送多个方法，所以我使用以下代码尝试使用 FBGraph 在 Facebook 上发送两个图像，

```
NSString *req01 = @"{ \"method\": \"POST\", \"relative_url\": \"me/photos\", \"body\": \"message=MyMessageOnPhotoone\", \"attached_files\": \"myimagedata\"}";
NSString *req02 = @"{ \"method\": \"POST\", \"relative_url\": \"me/photos\", \"body\": \"message=MyMessageOnPhototwo\", \"attached_files\": \"myimagedata\"}";
NSString *allRequests = [NSString stringWithFormat:@"[ %@, %@ ]", req01, req02];
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObject:allRequests forKey:@"batch"];
[facebook requestWithGraphPath:@"me" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

批处理方法是，

```
curl 
–F  'access_token=…' \
-F  'batch=[{"method":"POST", \
          "relative_url":"me/photos", \
          "body":"message=My cat photo" \
          "attached_files":"file1" \
         },
         {"method":"POST", \
          "relative_url":"me/photos", \
          "body":"message=My dog photo" \
          "attached_files":"file2" \
         },
        ]’
     -F  'file1=@cat.gif' \
     -F 'file2=@dog.jpg' \
     https://graph.facebook.com 
```

我收到以下错误，

```
 (
    {
    my binary image encoded data
    code = 400;
    headers =         (
                    {
            name = "WWW-Authenticate";

           my binary image encoded data
        },
                    {
            name = "HTTP/1.1";
            value = "400 Bad Request";
        },
                    {
            name = "Cache-Control";
            value = "no-store";
        },
                    {
            name = "Content-Type";
            value = "text/javascript; charset=UTF-8";
        }
    );
},
    {

     myimage binary encoded data
    code = 400;
    headers =         (
                    {
            name = "WWW-Authenticate";
            myimageBinary encoded data
        },
                    {
            name = "HTTP/1.1";
            value = "400 Bad Request";
        },
                    {
            name = "Cache-Control";
            value = "no-store";
        },
                    {
            name = "Content-Type";
            value = "text/javascript; charset=UTF-8";
        }
    );
   }
  ) 
```

我无法纠正代码中的 URL 请求中的问题。

# iphone - iOS、CFSocket：如何获取 CFSocket 连接的远程端的 Bonjour 名称？

> ID：13821139
> 
> 赞同：0
> 
> 时间：2012-12-11T13:09:38.977
> 
> 标签：iphone, ios, sockets, networking, bonjour

我有一个 Bonjour 服务设置，用于基本浏览和发现本地节点。它工作得很好。

但是，我希望广播节点知道谁在连接。现在，CFSocket 连接是匿名的，我看不到确定远程节点服务名称的明显方法。

我想我可以通过在连接时发送标头元字符串来提供它，但我想知道是否可以使用 CFSocket 基础结构来获取这个基本字符串。

# backbone.js - 骨干 - 改变不安慰..有什么问题？

> ID：13821146
> 
> 赞同：0
> 
> 时间：2012-12-11T13:10:22.930
> 
> 标签：backbone.js, backbone-model

我正在安慰高度，当它发生变化时，我还将更改事件绑定到元素。我仍然没有在这里得到控制台输出......

我对骨干很陌生，有人纠正我的错误吗？

```
var Person = Backbone.Model.extend({
                initialize:function(){
                    var getHeight = prompt('provide your height');
                    this.set({height:getHeight}); //i am changing the height...
                    this.bind('change:height',function(){
                        console.log(this.get('height'));  //i am not getting any console here...  
                    })
                },
                defaults:{
                    name:'new Name',
                    height:'unknown'
                }

            });

            var person = new Person(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:21:35.230

如果要监听事件，设置绑定**后**的值：

```
var Person = Backbone.Model.extend({
    initialize:function(){
        // bind is deprecated
        this.on('change:height',function(){
            console.log(this.get('height'));
        });

        var getHeight = prompt('provide your height');
        this.set({height:getHeight});
    },
    defaults:{
        name:'new Name',
        height:'unknown'
    }
}); 
```

# javascript - 在每个循环jQuery中获取相对值

> ID：13821148
> 
> 赞同：0
> 
> 时间：2012-12-11T13:10:25.630
> 
> 标签：javascript, jquery, loops, foreach

我在 jQuery 的 .each() 循环中提取相对值时遇到问题。我有一系列表格行，它们旁边有一个文本输入和一个单选按钮。我想遍历每一行，如果选择了单选按钮，则保存文本输入的值。

然而，到目前为止，每当我运行我的循环时，它似乎认识到选择了一个单选值，然后它会自动保存第一个输入，不管哪一行。我认为通过运行每一行，代码只会在特定的 HTML 行中执行——我相信它会触及所有行。任何人都可以帮忙吗？

这是我的 jQuery：

```
$('#valueTable tbody tr').each( function() {
   //$(this).css('background', 'blue');

   if($('td input[name=DefaultVal]:checked').size() > 0){
       $('td input[name=DefaultVal]:checked').parent().css('background', 'red')
       selectedDefVal = $('td:first-child input[name=valueTextField]').val();
       //alert(selectedDefVal)
   }  else {
      alert('not checked')
   }
  }); 
```

这是我的 HTML：

```
<table border="0" id="valueTable">        
<tr>
     <td width="70%" style="white-space: nowrap;"><input size="80" type="text" name="valueTextField" placeholder="Enter Value" value="" ></td>        
     <td width="70%" class="default_container">Default
        <input type="radio" name="DefaultVal" checked="true" class="defaultValFind" />  
    </td>
</tr>
<tr>
     <td width="70%" style="white-space: nowrap;"><input size="80" type="text" name="valueTextField" placeholder="Enter Value" value="2" ></td>        
     <td width="70%" class="default_container">Default
       <input type="radio" name="DefaultVal" class="defaultValFind" /> 
     </td>
</tr>
 <tr>
     <td width="70%" style="white-space: nowrap;"><input size="80" type="text" name="valueTextField" placeholder="Enter Value" value="fffffff" ></td>        
     <td width="70%" class="default_container">Default
       <input type="radio" name="DefaultVal" class="defaultValFind" /> 
     </td>
 </tr>
 </table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:14:02.000

你需要使用类似 $(this) 的东西：

```
$('#valueTable tbody tr').each(function() {
   if($(this).find('td input[name=DefaultVal]:checked').length){
       $(this).find('td input[name=DefaultVal]:checked').parent().css('background', 'red');
       selectedDefVal = $(this).find('td:first-child input[name=valueTextField]').val();
   }  else {
      alert('not checked')
   }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:42:16.663

```
$('#valueTable tbody tr').each( function() {
   //$(this).css('background', 'blue');

   if($('td input[name=DefaultVal]:checked', this).size() > 0){
       $('td input[name=DefaultVal]:checked', this).parent().css('background', 'red')
       selectedDefVal = $('td:first-child input[name=valueTextField]', this).val();
       //alert(selectedDefVal)
   }  else {
      alert('not checked')
   }
  }); 
```

我认为在使用 $ 选择子元素时，您忘记指定父范围。如果省略，则默认为窗口。在这种 .each 情况下，这将指向每个循环中的 tr 元素。

# javascript - 您可以在 HTML 脚本标签上同时使用 async 和 defer 属性吗？

> ID：13821151
> 
> 赞同：93
> 
> 时间：2012-12-11T13:10:27.363
> 
> 标签：javascript, html, asynchronous

我想同时使用`defer`和加载以下 JavaScript 代码`async`：

`<script defer async src="/js/somescript.js"></script>`

由于`defer`Internet Explorer 5.5+ 支持，正如您在[CanIUse.com](http://caniuse.com/#search=defer)上看到的那样，如果异步不可用，我想优雅地回退到使用 defer。我认为异步在可用时使用更好，但直到 Internet Explorer 10 才支持它。

因此，我的问题是上面的代码是有效的 HTML 吗？如果没有，是否可以使用 JavaScript 在不可用时优雅地回退到`defer`在脚本上使用来创建这种情况`async`？

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2012-12-11T13:15:23.117

来自规范：[https ://www.w3.org/TR/2011/WD-html5-20110525/scripting-1.html#attr-script-async](https://www.w3.org/TR/2011/WD-html5-20110525/scripting-1.html#attr-script-async)

> 即使指定了 async 属性，也可以指定 defer 属性，以使仅支持 defer（而不是异步）的旧版 Web 浏览器回退到 defer 行为而不是默认的同步阻塞行为。

*（查看下面的参考链接，以直观的方式展示普通脚本与具有延迟和异步的脚本之间的差异）*

* * *

参考：

*   [异步与延迟属性](https://www.growingwiththeweb.com/2014/02/async-vs-defer-attributes.html)
*   [使用 defer 和 async 高效加载 JavaScript](https://flaviocopes.com/javascript-async-defer/)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2017-01-06T10:10:39.147

问题是，你希望它做什么？如果**async**和**defer都存在，我希望脚本被延迟并​​且仅在浏览器空闲时在 DOMContentLoaded 之后执行，但是如果我正在阅读规范，那么如果设置了****async**并且脚本被加载，则看起来**defer**被忽略异步的，所以一旦可用就会立即执行，这很可能在 DOMContentLoaded 之前执行，并且可能会阻塞其他资源。

 **> 使用这些属性可以选择三种可能的模式。如果存在 async 属性，则脚本将在可用时立即异步执行。如果 async 属性不存在但 defer 属性存在，则在页面完成解析后执行脚本。如果两个属性都不存在，则在用户代理继续解析页面之前立即获取并执行脚本。

[https://www.w3.org/TR/2011/WD-html5-20110525/scripting-1.html#attr-script-async](https://www.w3.org/TR/2011/WD-html5-20110525/scripting-1.html#attr-script-async)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2019-03-28T01:51:03.640

不幸的是在指定`defer`时被忽略，并且总是具有更高的优先级。`async``async`

我个人认为`defer`被忽视是非常糟糕的。让我们想象一下我们希望尽快初始化一些 JS 的情况，甚至在加载页面内容之前。但是我们希望这个脚本在其他需要它的脚本之前初始化。它应该排在`defer`队列的首位。但是，不幸的是，这不起作用：

```
<!-- we want "jQuery" ASAP and still in "defer" queue. But defer is ignored. -->
<script src="jquery.min.js" async defer></script>

<!-- this doesn't blocks the content and can wait the full page load, but requires "jQuery" -->
<script src="some_jquery_plugin.min.js" defer></script> 
```

在这个示例中，“some_jquery_plugin.min.js”可以在加载 jQuery 之前加载和执行，并且会失败。:(

所以有两种方法可以解决这个问题：要么只使用`defer`指令，要么将所有依赖的 javascript 文件合并到单个 JS 中。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-12-11T13:15:04.053

是的，它是有效的 HTML，它会像预期的那样工作。

任何符合 W3C 的浏览器都会识别*async*属性并正确处理脚本，而旧版*IE*版本将识别*defer*属性。

由于这两个属性都是*布尔值，**因此*您不必分配任何值。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2021-08-25T20:10:31.633

是的，您可以使用这两个属性，但您需要使用 defer 或 async，而不是两者。有关更多信息，请参阅比较并根据您的需要使用一个。

**defer 属性：**首先它会下载脚本文件，然后等待 html 解析。html解析结束后，将执行脚本。换句话说，它将保证所有脚本在 html 解析后执行。

当脚本用于 DOM 操作时，延迟属性很有用。意味着脚本将应用于文档 html。

**async 属性：**它将下载脚本文件并执行，无需等待 html 解析结束。换句话说，它不能保证所有的脚本都会在 html 解析之后执行。

当脚本不用于 DOM 操作时，异步属性很有用。有时您只需要脚本用于服务器端操作或处理缓存或 cookie，而不需要用于 DOM 操作。表示脚本与使用的 html 无关。

[![在此处输入图像描述](../Images/91678d9c3eb35eee4c682e1e0af6ee9c.png)](https://i.stack.imgur.com/qHAVc.png)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-03-13T04:54:06.467

实际上，这里的大多数评论都存在误解。人们似乎不知道 DEFER 也像 ASYNC 一样并行加载代码。但它会在 DOM 加载后等待执行（但在 DOMContentLoaded 执行之前），而 ASYNC 在加载后立即运行它，在 DOM 加载之前。由于 ASYNC 和 DEFER 都并行加载代码，因此无需同时使用两者（但可能是为了处理遗留问题）。**

# python - 在python中使用线程的超时功能不起作用

> ID：13821156
> 
> 赞同：10
> 
> 时间：2012-12-11T13:10:49.123
> 
> 标签：python, timeout

我在[这里](http://code.activestate.com/recipes/473878-timeout-function-using-threading/)找到了一个创建超时函数的代码，这似乎不起作用。完整的测试代码如下：

```
def timeout(func, args=(), kwargs={}, timeout_duration=1, default=None):
    import threading
    class InterruptableThread(threading.Thread):
        def __init__(self):
            threading.Thread.__init__(self)
            self.result = None

        def run(self):
            try:
                self.result = func(*args, **kwargs)
            except:
                self.result = default

    it = InterruptableThread()
    it.start()
    it.join(timeout_duration)
    if it.isAlive():
        return default
    else:
        return it.result

def foo():
    while True:
        pass

timeout(foo,timeout_duration=3) 
```

预期行为：代码在 3 秒内结束。问题出在哪里？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-11T14:53:14.600

一个线程不能优雅地杀死另一个线程，因此使用您当前的代码，`foo`永远不会终止。（`thread.daemon = True`当只剩下守护线程时，Python 程序将退出，但这不允许您在`foo`不终止主线程的情况下终止。）

[有些人](https://stackoverflow.com/q/366682/190597)试图使用信号来停止执行，但这在某些情况下可能是[不安全的。](https://stackoverflow.com/a/1114567/190597)

如果你可以修改`foo`，有很多可能的解决方案。例如，您可以检查是否`threading.Event`退出 while 循环。

但是如果你不能修改`foo`，你可以使用模块在子进程中运行它，`multiprocessing`因为与线程不同，子进程可以被终止。这是一个可能看起来如何的示例：

```
import time
import multiprocessing as mp

def foo(x = 1):
    cnt = 1
    while True:
        time.sleep(1)
        print(x, cnt)
        cnt += 1

def timeout(func, args = (), kwds = {}, timeout = 1, default = None):
    pool = mp.Pool(processes = 1)
    result = pool.apply_async(func, args = args, kwds = kwds)
    try:
        val = result.get(timeout = timeout)
    except mp.TimeoutError:
        pool.terminate()
        return default
    else:
        pool.close()
        pool.join()
        return val

if __name__ == '__main__':
    print(timeout(foo, kwds = {'x': 'Hi'}, timeout = 3, default = 'Bye'))
    print(timeout(foo, args = (2,), timeout = 2, default = 'Sayonara')) 
```

产量

```
('Hi', 1)
('Hi', 2)
('Hi', 3)
Bye
(2, 1)
(2, 2)
Sayonara 
```

请注意，这也有一些限制。

*   子进程接收父进程变量的*副本*。如果您在子流程中修改变量，它*不会*影响父流程。如果您的函数`func`需要修改变量，则需要使用[共享变量](http://docs.python.org/2/library/multiprocessing.html#sharing-state-between-processes)。

*   参数（通过`args`）和关键字（`kwds`）必须是可腌制的。

*   进程比线程更占用资源。通常，您只想在程序开始时创建一次多处理池。每次调用此`timeout`函数时都会创建一个。`Pool`这是必要的，因为我们需要`pool.terminate()`终止`foo`. 可能有更好的方法，但我还没有想到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:13:46.273

你需要`it`变成一个[守护线程](https://stackoverflow.com/questions/190010/daemon-threads-explanation)：

```
it = ...
it.daemon = True
it.start() 
```

否则，它将被创建为用户线程，并且在所有用户线程完成之前，该进程不会停止。

请注意，在您的实现中，线程将继续运行并消耗资源，即使您已超时等待它。CPython 的[Global Interpreter Lock](http://en.wikipedia.org/wiki/Global_Interpreter_Lock)可能会进一步加剧这个问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-07-06T09:14:55.470

使用的好处`multiprocessing`是进程不共享内存，并且子进程中发生的任何事情都仅限于该功能，不会导致其他进程终止。为子进程添加 3s 超时的最简单方法是：

```
import multiprocessing

def my_child():
    function here

process = multiprocessing.Process(target=my_child)
process.daemon = True
process.start()

process.join(3)
if process.is_alive():
    process.terminate() 
```

# c++ - 我包括 Ws2tcpip.h 但我的编译器说 inet_ntop 未声明

> ID：13821157
> 
> 赞同：0
> 
> 时间：2012-12-11T13:10:49.713
> 
> 标签：c++, networking, winsock

我试图从 Beej 的网络指南编译一些示例代码，但我的编译器给了我错误“C:\Dev-Cpp\mainweq.cpp `inet_ntop' undeclared (first use this function)”，即使我包含了 ws2tcpip.h。这是代码：

```
/*
** showip.c -- show IP addresses for a host given on the command line
*/

#include <stdio.h>
#include <string.h>
#include <winsock2.h>
#include <Ws2tcpip.h>
WSADATA wsaData;

#pragma comment(lib, "Ws2_32.lib")

int iResult;

int main(int argc, char *argv[])
{
int iResult;

// Initialize Winsock
iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
if (iResult != 0) {
printf("WSAStartup failed: %d\n", iResult);
return 1;
}

struct addrinfo hints, *res, *p;
int status;
char ipstr[INET6_ADDRSTRLEN];

if (argc != 2) {
    fprintf(stderr,"usage: showip hostname\n");
    return 1;
}

memset(&hints, 0, sizeof hints);
hints.ai_family = AF_UNSPEC; // AF_INET or AF_INET6 to force version
hints.ai_socktype = SOCK_STREAM;

if ((status = getaddrinfo(argv[1], NULL, &hints, &res)) != 0) {
    fprintf(stderr, "getaddrinfo: %s\n", gai_strerror(status));
    return 2;
}

printf("IP addresses for %s:\n\n", argv[1]);

for(p = res;p != NULL; p = p->ai_next) 
    {
    void *addr;
    char *ipver;

    // get the pointer to the address itself,
    // different fields in IPv4 and IPv6:
    if (p->ai_family == AF_INET) { // IPv4
        struct sockaddr_in *ipv4 = (struct sockaddr_in *)p->ai_addr;
        addr = &(ipv4->sin_addr);
        ipver = "IPv4";
    } 
    else 
    { // IPv6
        struct sockaddr_in6 *ipv6 = (struct sockaddr_in6 *)p->ai_addr;
        addr = &(ipv6->sin6_addr);
        ipver = "IPv6";
    }

    // convert the IP to a string and print it:
    inet_ntop(p->ai_family, addr, ipstr, sizeof ipstr);
    printf("  %s: %s\n", ipver, ipstr);
}

freeaddrinfo(res); // free the linked list

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:32:54.417

您正在寻找 inet_ntoa 或 WSAAddressToString 或 InetNtop？

更多[在这里](http://msdn.microsoft.com/en-us/library/windows/desktop/cc805843%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:31:45.343

`inet_ntop`在 Vista 之前在 Windows 上不可用。如果您可以编写可移植代码，请避免使用特定于平台的函数。

在这里，使用`getnameinfo`with`NI_NUMERICHOST`和 no service，这完全等同于`inet_ntop`（但没有那么多讨厌的转换）。

*可用性：*所有 unix 和 Win2K+ 都有`getnameinfo`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:34:48.927

Beej 没有说包括`ws2tcpip.h`. [他说](http://www.beej.us/guide/bgnet/output/html/multipage/inet_ntopman.html)包括`arpa/inet.h`。

但是`inet_ntop`是一个POSIX函数。更有可能的是，您正在寻找 Windows 等价物，例如`WSAAddressToString`.

# c - C 将 char* 作为地址传递

> ID：13821158
> 
> 赞同：2
> 
> 时间：2012-12-11T13:10:54.490
> 
> 标签：c, argument-passing, memory-address

我正在尝试传递一个 char* 并在另一个函数中更改它，但不知何故它不断给出段错误。

完整代码是：

```
#include <stdio.h>

void getString(char** str) {
    *str[0] = '$';
    char c;
    int i = 1;
    while ((c = getchar()) != '$') {
        if (c != '\n') {
            *str[i-1] = c;
            i++;
        }
    }
    *str[i] = '\0';
}

int main (int argc, char *argv[]) {

    char* str =  (char*)malloc(200 * sizeof(char));
    while (1) {
        getString(&str);
        printf("String: %s\n",str);
    }
    return 0;
} 
```

如果我从 str[0] = '$' 中获取 *，它会发出警告，将指针传递给整数。

不知道我在哪里搞砸了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T13:13:42.183

数组索引 [] 运算符的优先级低于取消引用运算符 *

所以你必须改变你的代码来做

```
 (*str)[0] = '$';
 (*str)[i-1] = c;
 (*str)[i] = '\0'; 
```

在您的情况下，您不需要传递指针的地址，只需传递指针：

```
getString(str); 
```

并以

```
str[0] = '$';  
str[i-1] = c;
str[i] = '\0'; 
```

由于您使用的是 malloc()，因此请务必添加`#include <stdlib.h>` 如果您没有强制转换 malloc 的返回值，这在 C 中是不需要的，您应该收到关于此的警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:12:15.727

您想更改现有缓冲区的内容，而不是创建然后返回一个新缓冲区，以便您可以直接传递`char*`给`getString`

```
#include <stdio.h>

void getString(char* str) {
    str[0] = '$';
    char c;
    int i = 1;
    while ((c = getchar()) != '$') {
        if (c != '\n') {
            str[i-1] = c;
            i++;
        }
    }
    str[i] = '\0';
}

int main (int argc, char *argv[]) {

    char* str =  malloc(200);
    while (1) {
        getString(str);
        printf("String: %s\n",str);
    }
    return 0;
} 
```

请注意，我还对您的内存分配进行了一些更改。 `sizeof(char)`保证为 1，因此可以省略，并且您不需要从`malloc`C中转换返回值。

# wordpress - 如果 post_meta 等于当天，则显示帖子

> ID：13821160
> 
> 赞同：1
> 
> 时间：2012-12-11T13:10:57.240
> 
> 标签：wordpress, loops, posts

我开始用 wordpress 编写足球直播网站。我想在我的主页上显示我今天的信息流（帖子）。我这样写**循环**；

```
 <?php 

                    $dateget = trim(get_post_meta($post->ID,"Poz_Poz_Date",true));
                    $dateparse = explode(".",$dateget);
                    $current_day = date('j');

                        if ($dateparse[0] == $current_day) {
                            query_posts('posts_per_page=-1&meta_key=Poz_Poz_Timer&orderby=meta_value&order=asc&day='.$dateparse[0]);
                        } else {

                            query_posts('posts_per_page=0&day='.$dateparse[0]);
                        }

                    if (have_posts()) : while (have_posts()) : the_post(); ?> 
```

**自定义帖子元是；**

*   对于事件时间：Poz_Poz_Timer（格式：hh:mm）

    对于 Evet 日期：Poz_Poz_Date（格式：dd.mm.yy）

我只想显示今天的帖子，使用此查询按事件日期 ASC 排序

此循环当前不起作用。我应该怎么办 ？

# sql-server - 在 Sql Server 中查找更改跟踪时间

> ID：13821161
> 
> 赞同：6
> 
> 时间：2012-12-11T13:10:58.377
> 
> 标签：sql-server

有什么方法可以在 SQL Server 中的 CT（更改跟踪）中找到更改或事务的时间？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-10-03T20:13:46.393

加入`sys.dm_tran_commit_table`时间。

```
select tc.commit_time, ....
from
    changetable(changes <table>, 0) c
    join sys.dm_tran_commit_table tc on c.sys_change_version = tc.commit_ts 
```

# php - 用PHP创建一定频率的.wav文件

> ID：13821164
> 
> 赞同：5
> 
> 时间：2012-12-11T13:11:04.077
> 
> 标签：php, audio

我是这个东西的菜鸟，所以放轻松...

我要做的就是使用 PHP 构造一个特定频率的简单音调。它应该输出一个 .wav 文件，该文件可以直接插入到 HTML 音频标签中。

我真的不知道从哪里开始，因为我什至不了解音频数据是如何存储的。任何人都可以建议资源或直接帮助我吗？

将不胜感激:)

PS有一个类似的问题，虽然我不认为这是我要找的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T05:56:18.580

尝试这个。（它使用 SoX，所以它不是一个纯 PHP 解决方案，但它运行良好。

你的 HTML

```
<embed height="50" width="100" src="/test.php?tone=1000"> 
```

你的 PHP

```
<?php
    $tempFile = tempnam(sys_get_temp_dir(), 'AUD') . '.wav';
    $pitch    = (int)$_GET['tone'];

    exec("sox -n $tempFile synth 5 sin $pitch");

    header('Cache-Control: max-age=604800');
    header('Content-type: audio/x-wav');
    header('Content-Transfer-Encoding: binary');
    header('Content-Length: '.filesize($tempFile));
    readfile($tempFile); 
```

# c# - 从许多不同数据库报告的最佳实践

> ID：13821165
> 
> 赞同：2
> 
> 时间：2012-12-11T13:11:04.233
> 
> 标签：c#, sql, vb.net

嗨，我有 14 个位置，我将开始为 14 个位置创建报告。我们确实使用我们的 POS 公司软件（客户、礼品卡和预付卡）复制了一些信息，但并非所有信息（例如销售和劳动力）都被复制。这意味着在运行我的报告时，我需要访问所有 14 个数据库以将它们转换为可读格式……有没有人对这样的事情有任何建议或最佳实践？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T13:15:58.113

如果您能够设置这样的东西，这听起来像是数据仓库的绝佳候选者：

*   建立一个不用于事务处理的大型中央数据库
*   优化此数据库的架构，纯粹用于报告
*   从 14 个源数据库中的每一个中提取定期提要（通宵提要是一种流行的选择）
*   一次性对所有 14 个数据库的数据生成报告

# python - 实验性 python tcp-proxy 不工作

> ID：13821172
> 
> 赞同：1
> 
> 时间：2012-12-11T13:11:33.667
> 
> 标签：python, sockets, tcp

我只是尝试实现一个类似于代理的python应用程序（用于端口22）代码如下：

```
import socket
import select
import code
inputSock = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
inputSock.bind( ('',9999) )
inputSock.listen(5)
socks = {} #a dictionary!

#Now, wait for an input!
while 1:
    #accept new conns
    (sread,swrite,sexec) = select.select([inputSock],[],[])
    for sock in sread:
        print("Got an input!")
        newsock,(remhost,remport) = sock.accept()
        sendsock = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
        try:
            print("Now connecting to the centOS...")
            sendsock.connect( ('202.131.30.12',80))
        except:
            print("ERROR: cannot connect to host 192.168.52.128:22")
        print("successfully connected to Cent. Creating new socks")
        socks[id(sendsock)] = newsock
        socks[id(newsock)] = sendsock
        print("socks created!")
    #recv from socks, etc.
    (sread,swrite,sexec) = select.select(socks.values(),[],[])
    for sock in sread:
        print("got input!")
        data = sock.recv(700)
        print(data)
        if(data == ""):
            #remove that sock.
            id1 = id(sock)
            id2 = id(socks[id1])
            socks.pop(id1)
            socks.pop(id2)
            print("removed empty conns")
        else:
            #code.interact(globals=globals())
            sendSock = socks[id(sock)]
            sendSock.send(data)
            print("data sent!") 
```

现在，当我运行脚本并将浏览器指向 127.0.0.1:9999 时，我的浏览器将无法获取网页（处于某种“永久加载网页”状态）。这就是我从 python 提示符得到的：http: [//imgur.com/CffOY](http://imgur.com/CffOY)

你能帮我找出哪里出错并修复这个实验性实现吗？（或者给我一些链接以获得一个想法？）谢谢 :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:48:05.003

您已经从浏览器读取了一些（可能是部分）HTTP 请求数据，并将其发送到另一个套接字上的服务器。然后外部循环将您带回`select`侦听套接字，该套接字阻塞等待新连接，因此您被卡住了。

将两个调用合并`select`为一个。只需为侦听套接字制作一个特殊情况。

# c - 我是C的初学者，有人可以帮我输出吗

> ID：13821174
> 
> 赞同：-6
> 
> 时间：2012-12-11T13:11:53.393
> 
> 标签：c

我需要在结构中提到的行数组中添加数字。例如我需要 row=[ 4 5 6] 和 age= 25 的输出，我该如何处理上述结构？请帮忙 ！

```
#include<stdio.h>

typedef struct person
{
    int row[1];
    int age;
} PERSON;

int main()
{
    PERSON p;
    PERSON *pptr=&p;

    pptr->row[1] = 4;
    pptr->age = 25;
    printf("%d\n",pptr->row[1]);
    printf("%d\n",pptr->age);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:17:45.663

你问为什么要排队

```
printf("%d\n",pptr->row[1]); 
```

返回`age`? 这是因为`int row[1];`声明了一个包含一个元素的数组，但`pptr->row[1]`尝试访问数组的第二个元素（数组索引从零开始）。换句话说，您正在写入超出分配数组末尾的内存。

这样做的影响是不确定的，但如果指向的内存`pptr->row[1]`实际上是`pptr->age`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:18:24.260

在 C 中，数组从 0 位置开始：

```
int row[1]; 
```

表示只有一个 int 的数组。

第一个位置是：

```
pptr->row[0] = 4; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:18:33.073

请记住，在 C 中，N 元素数组的索引从 0 到 N-1。例如：

```
int arr[5];

arr[0] = 1;
arr[1] = 2;
arr[2] = 3;
arr[3] = 4;
arr[4] = 5; 
```

由于您已将您的`row`成员声明`struct`为 1 元素数组¹，因此这些行

```
pptr->row[1] = 4; 
```

和

```
printf("%d\n", pptr->row[1]); 
```

正在访问数组边界之外的内存；这样做的行为是*未定义*的，所以几乎任何事情都可能发生。

* * *

^(1\. 不清楚这里的意图是什么。`row`除非您想在大多数情况下被视为指针，否则 1 元素数组有什么用？)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T13:29:17.930

`I need to add the numbers in the row array mentioned in the structure. for example I need the output of row=[ 4 5 6] and age= 25, how can i do with the above mentioned structure?? Please help !`

基于此更新：

将要存储的元素数量放入数组定义中：

```
int row[1]; // This stores 1 element of type int

// you want to store 3 elements: 4, 5, 6, so...

int row[3];  // This is what you're looking for 
```

记住一个数组：

```
int row[X]; 
```

从`row[0]`到`row[X-1]`。因此，在您的情况下`X=3`，这意味着您的数组的最小/最大值是：

```
min = row[0]
max = row[3-1] = row[2] 
```

这意味着您的代码应该执行以下操作：

```
pptr->row[0] = 4;
pptr->row[1] = 5;
pptr->row[2] = 6;
pptr->age = 25;
printf("%d\n",pptr->row[0]);
printf("%d\n",pptr->row[1]);
printf("%d\n",pptr->row[2]);
printf("%d\n",pptr->age); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T13:19:35.590

在您的所有代码中使用

```
pptr->row[0] 
```

代替

```
pptr->row[1] 
```

行数组的大小为 1，C 中数组的索引从 0 开始，而不是从 1

# asp.net - asp.net 文本框并输入密钥

> ID：13821182
> 
> 赞同：0
> 
> 时间：2012-12-11T13:12:15.163
> 
> 标签：asp.net, html, button, textbox, enter

我有几个`<div>`带有单独的 asp:textbox 和 asp:button 的 s。

我需要做的是确保`<div>`当用户按下回车键时正确地点击了正确的按钮。

不使用 asp:panel，默认按钮。

最快的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:21:25.277

也许通过在每个 div 上使用 javascript 设置默认按钮，如下所示：

```
$('div').keypress( function(e) {
   if(e.keyCode == '13') {
     $(this).find('.acceptEnter').click();
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:21:35.587

使用 ASP.NET**面板控制**并设置**DefaultButton**属性。

[Panel.DefaultButton 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.panel.defaultbutton%28v=vs.100%29.aspx)：使用 DefaultButton 属性指示当 Panel 控件具有焦点并且用户按下 ENTER 键时单击哪个按钮。DefaultButton 可以设置为 Button 控件或任何实现 IButtonControl 接口的控件（除了 LinkBut​​ton 控件）的标识符。

# javascript - ws:// 是什么？

> ID：13821183
> 
> 赞同：6
> 
> 时间：2012-12-11T13:12:16.957
> 
> 标签：javascript, ajax, protocols, stackexchange

我出于好奇检查了 stackoverflow 页面，并注意到了一个有趣的 url：`ws://sockets-se.or.stackexchange.com/`

![在此处输入图像描述](../Images/1db640751dea29c372ad37e53f98d814.png)

我想了解更多关于 ws 协议的信息，但我什至不知道如何开始搜索，因为搜索`ws`或`ws protocol`没有向我显示我期望的结果......

这个协议是什么？有人可以指点我一个方向吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T13:14:21.680

[ws:// 是WebSockets](http://en.wikipedia.org/wiki/WebSocket)的 URI 方案。它们通过单个 TCP 连接提供全双工通信。您经常看到它们用于将数据异步流式传输到浏览器……例如，聊天应用程序或基于浏览器的游戏。

因此，由于它用于流式传输数据，因此单击 Chrome 开发人员工具中的响应选项卡不会像您期望的那样向您显示连接的数据。例如，Chrome 会向您显示通过连接发送的“帧”及其给定的方向性等。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-11T13:27:28.587

`ws:`这是 WebSocket 连接的新 URL 模式。还有`wss:`用于安全 WebSocket 连接的方式`https:`与用于安全 HTTP 连接的方式相同。

# 按定义

WebSocket 规范定义了一个在 Web 浏览器和服务器之间建立“套接字”连接的 API。

# 简单来说

客户端和服务器之间存在持久连接，双方可以随时开始发送数据。那是通过单个 TCP 连接的全双工通信通道。

看看**[这里](http://dev.w3.org/html5/websockets/)** 的 API 和 **[这里](http://www.html5rocks.com/en/tutorials/websockets/basics/)**的 web sockets 基础知识和 **[这里](http://html5demos.com/web-socket)**的一个简单的现场演示。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-11T13:13:45.130

这是为了`websocket`协议

[http://en.wikipedia.org/wiki/WebSocket](http://en.wikipedia.org/wiki/WebSocket)

[https://www.rfc-editor.org/rfc/rfc6455](https://www.rfc-editor.org/rfc/rfc6455)

如果您使用搜索引擎并搜索，您可以找到的其他文档`Websockets`

# ruby-on-rails - 我应该如何使用 Rspec 和 Capybara 测试 Omniauth？

> ID：13821185
> 
> 赞同：4
> 
> 时间：2012-12-11T13:12:29.810
> 
> 标签：ruby-on-rails, rspec, capybara, omniauth

尝试使用 RSpec 和 Capybara 测试 OmniAuth，完全失败。

到目前为止，`spec_helper.rb`有：

```
# Enable omniauth testing mode
OmniAuth.config.test_mode = true
OmniAuth.config.mock_auth[:google] = OmniAuth::AuthHash.new({
                                                            :provider => 'google',
                                                            :uid => '1337',
                                                            :info => {
                                                                'name' => 'JonnieHallman',
                                                                'email' => 'jon@test.com'
                                                            }
                                                        }) 
```

而且我知道我需要将 Capybara 测试放在`spec/features`. 所以我有：

```
require 'spec_helper'
describe "Authentications" do
  context "without signing into app" do
    it "sign in button should lead to Google authentication page" do
      visit root_path
      click_link "Login"
      Authentication.last.uid.should == '1337'
    end
  end
end 
```

但我得到：

```
1) Authentications without signing into app sign in button should lead to Google authentication page
 Failure/Error: Authentication.last.uid.should == '1337'
 NameError:
   uninitialized constant Authentication
 # ./spec/features/omniauth_spec.rb:10:in `block (3 levels) in <top (required)>' 
```

彻底的，彻底的迷失了。浏览了 OmniAuth wiki，它真的没有帮助；通过 Stack Overflow 搜索了一个多小时，没有运气。帮助？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:33:31.347

在做了相当多的阅读之后，我终于设法解决了这个问题。测试现在如下所示：

```
require 'spec_helper'
describe "Authentications" do
  context "Clicking the login link" do
    it "Login button should log in" do
      visit root_path
      click_link "Login"
      page.should have_link "Logout"
    end
  end
end 
```

简单的！

# sql-server - Sql Server - 修复错误错误：18456，严重性：14，状态：11

> ID：13821188
> 
> 赞同：5
> 
> 时间：2012-12-11T13:12:54.133
> 
> 标签：sql-server

我正在尝试从运行它的服务器登录到 SQL Server 实例，同时以我自己的身份远程登录。

我不断收到标准登录失败错误，并且在错误日志中看到“错误：18456，严重性：14，状态：11。”

登录使用 Windows 身份验证 - 这是奇怪的一点。我可以使用相同的身份验证从我自己的机器上很好地登录，只是当我在安装数据库的机器上时不行。

有任何想法吗？

谢谢，戴夫

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-11T13:18:36.927

[UAC 是如何工作的？](http://windows.microsoft.com/en-us/windows-vista/User-Account-Control-Overview)

> 当管理员登录时，此版本的 Windows 会为用户创建两个单独的访问令牌：标准用户访问令牌和管理员访问令牌。标准用户访问令牌包含与管理员访问令牌相同的用户特定信息，但已删除管理 Windows 特权和 SID。标准用户访问令牌用于启动应用程序...

当您在本地登录时，您的管理员令牌将被删除。由于您授予对实例的访问权限`BUILTIN\Administrators`，因此您被锁定在实例之外。远程身份验证时，管理员令牌被保留并且您获得访问权限。如果您在启动应用程序时选择 RunAs\Administrator（SSMS？），您将获得访问权限。

解决方案是明确授予自己访问权限：

```
create login [domain\you] from windows;
exec sp_addsrvrolemember 'domain\you','sysadmin'; 
```

# android - 如何在android中制作一个按钮以弹出菜单？

> ID：13821194
> 
> 赞同：0
> 
> 时间：2012-12-11T13:13:07.373
> 
> 标签：android, button, menu

我想要一个菜单​​（由设备上的菜单按钮触发的菜单）通过单击普通按钮（当然是屏幕上的按钮）来工作......以一种“替换”菜单按钮的方式设备在屏幕上的一个。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:42:28.553

容易地

```
public void onClick(View v){
    openOptionsMenu(); 
} 
```

然后覆盖菜单按钮的行为（这不是真的推荐）你可以做这样的事情

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if ( keyCode == KeyEvent.KEYCODE_MENU ) {
        Log.d(TAG, "MENU pressed");
        return false;
    }
    return super.onKeyDown(keyCode, event);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:37:06.880

[这](http://www.londatiga.net/it/how-to-create-quickaction-dialog-in-android/)是一种方法。我在我的代码中使用了它，它真的很棒。

编辑：我想我误解了你的意图。如果您想在其他时间以编程方式启动标准菜单（就像按下菜单按钮一样），请调用`openOptionsMenu();`.

# java - 如何从部分 csv 文件中填充类

> ID：13821197
> 
> 赞同：0
> 
> 时间：2012-12-11T13:13:15.880
> 
> 标签：java, csv, import, opencsv, supercsv

我有 Java 课程：

```
class data {
  private String id;
  private String name;
  private String phone;
} 
```

我需要从 CSV 文件中填充数据。但并非 CSV 文件中的所有列都是强制性的，或者可能有不同的顺序。

CSV 示例 1：

> 身份证，电话，姓名
> 1,421904123456，彼得
> 2,420558811225，约翰
> ...

CSV 示例 2：

> id，姓名
> 3，Alex
> 8，Stefan

任何建议如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:21:29.393

使用[OpenCSV](http://opencsv.sourceforge.net/)读取文件。读取第一行时存储列的顺序。阅读以下行（`String[]`每行一个）时，使用第一行的信息从数组中获取元素。

这是来自 OpenCSV 文档的示例：

```
CSVReader reader = new CSVReader(new FileReader("yourfile.csv"));
String [] nextLine;
while ((nextLine = reader.readNext()) != null) {
    // nextLine[] is an array of values from the line
    System.out.println(nextLine[0] + nextLine[1] + "etc...");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:25:00.620

1.  阅读第一行以获取标题信息。
2.  根据标头信息填充一个 Method[] 数组，其中包含读取的字段设置器。
3.  对于随后的每一行，创建 Data 类的对象 obj 和行中的每个值，并在数组的所有元素上调用 invoke()，将新创建的对象和 rad 值作为参数传递。

也许您还可以查看[通过 JDBC 对 CSV 文件执行 SQL](https://stackoverflow.com/questions/1468998/execute-sql-on-csv-files-via-jdbc)以使用 jdbc 查询 CSV。

此外，您的课程应该是`Data`而不是`data`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T21:26:47.060

[Super CSV](http://supercsv.sourceforge.net)是另一个用于 Java 的开源 CSV API，开箱即用地支持此功能。请参阅[部分阅读](http://supercsv.sourceforge.net/examples_partial_reading.html)示例。

它使用标题（即第一行）来确定要映射到 bean 的字段 - 因此将能够很好地读取您的两个文件。

如果您在 bean 中使用其他类型（日期、整数等）而不仅仅是字符串，那么 Super CSV 可以使用它的[单元处理器](http://supercsv.sourceforge.net/cell_processors.html)API 为您完成所有必需的转换/转换。

例如，以下代码将读取您的两个文件，但仅填充 CSV 文件中存在的字段。

```
ICsvBeanReader beanReader = null;
try {
        beanReader = new CsvBeanReader(new FileReader(CSV_FILENAME), 
                CsvPreference.STANDARD_PREFERENCE);

        // header is used to map CSV column -> field in bean
        final String[] header = beanReader.getHeader(true); 

        Data data;
        while( (data = beanReader.read(Data.class, header)) != null ) {
                System.out.println(String.format("id=%s, name=%s, phone=%s",
                        data.getId(), data.getName(), data.getPhone()));
        }

}
finally {
        if( beanReader != null ) {
                beanReader.close();
        }
} 
```

# c# - BinaryFormatter 在 c# 中反序列化时找不到“Assembly”

> ID：13821198
> 
> 赞同：5
> 
> 时间：2012-12-11T13:13:21.730
> 
> 标签：c#, .net-4.0

我有一个序列化和反序列化调用的程序，当我尝试将我的 DLL 附加到另一个程序时，它说：`Unable to find assembly 'ASCOM.BHOProxy.Connector, Version=1.0.0.0, Culture=neutral, PublicKeyToken=74643865492aa2e6'.`

我可以理解这是否是参考问题或其他问题，但问题是引发异常的代码*位于* `ASCOM.BHOProxy.Connector`. 我曾想过使用某种第三方序列化器，但我不太确定要使用什么。程序集由应用程序加载的另一个 DLL 加载。

序列化的数据通过 TCP 连接传输到相同的连接器（通常是由另一个程序加载的相同文件），并在此处进行反序列化。当它试图反序列化它时会抛出异常，但它只在从外部程序调用它时才会这样做。在 Visual Studio 中调试时效果很好。

```
Their Program --(late binding)--> My Main DLL --(.NET Project Reference)--> My Connector DLL 
```

堆栈跟踪：

```
 at System.Runtime.Serialization.Formatters.Binary.BinaryAssemblyInfo.GetAssembly()
   at System.Runtime.Serialization.Formatters.Binary.ObjectReader.GetType(BinaryAssemblyInfo assemblyInfo, String name)
   at System.Runtime.Serialization.Formatters.Binary.ObjectMap..ctor(String objectName, String[] memberNames, BinaryTypeEnum[] binaryTypeEnumA, Object[] typeInformationA, Int32[] memberAssemIds, ObjectReader objectReader, Int32 objectId, BinaryAssemblyInfo assemblyInfo, SizedArray assemIdToAssemblyTable)
   at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.ReadObjectWithMapTyped(BinaryObjectWithMapTyped record)
   at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.ReadObjectWithMapTyped(BinaryHeaderEnum binaryHeaderEnum)
   at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.Run()
   at System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
   at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream)
   at Connector.PortComProxy.DecodeMessage(List`1 buff) in c:\Users\Arlen\Documents\Visual Studio 2012\Projects\DriverProxy\PortComClient\PortComProxy.cs:line 259 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-05T01:03:04.750

我不能说为什么有时找不到程序集。但是，我使用[AppDomain.AssemblyResolve](http://msdn.microsoft.com/en-us/library/system.appdomain.assemblyresolve.aspx)事件来加载无法通过 .NET 提供的正常程序集加载解析找到的程序集。在我的情况下，这是因为我必须从注册表项中找到程序集，使用我能够找到并加载程序集的事件来防止未找到程序集异常。

至少利用此事件可能允许您验证 BinaryFormatter 尝试解析的类型。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-06T00:23:46.387

非常感谢肯，做到了。这是我为其他可能需要它的人所做的。我不知道解析器是否是静态的是否有任何区别。

```
using System.Reflection;
...
public class MyClass{
    public MyClass()
    { 
        AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(MyResolveEventHandler);
    }
    private static Assembly MyResolveEventHandler(object sender, ResolveEventArgs args)
    {
        return typeof(MyClass).Assembly;
    }
} 
```

# php - 使用多个条件搜索数据库，但未选择日期时不显示任何结果

> ID：13821200
> 
> 赞同：0
> 
> 时间：2012-12-11T13:13:29.883
> 
> 标签：php

我有一个数据库搜索来根据所选条件显示结果，其中一个条件是日期范围，再加上 3 个其他条件。搜索效果很好，我只能按日期范围搜索以显示所有结果，或者我可以搜索日期范围并添加 1、2 或所有 3 个其他变量..但是，如果我离开日期范围，则不会显示任何结果。使用 mysql 数据库。

```
Search page::

$term1 = $_REQUEST['term1'];
$term2 = $_REQUEST['term2'];
$term3 = $_REQUEST['term3'];
$term4 = $_REQUEST['term4'];
$term5 = $_REQUEST['term5'];

$terms= '&term1='.$term1 . '&term2='.$term2 . '&term3='.$term3 . '&term4='.$term4 . '&term5='.$term5;

$limit=15;

$sql ="SELECT * FROM ircb WHERE cdate BETWEEN '$term2' AND '$term3' AND staff  LIKE '%$term1%'  AND item LIKE '%$term4%' AND service LIKE '%$term5%' ORDER BY id DESC LIMIT $start_from, 15";

$rs_result = mysql_query ($sql);
$num_rows = mysql_num_rows($rs_result);
$query = mysql_query("SELECT * FROM ircb WHERE cdate BETWEEN '$term2' AND '$term3' AND staff  LIKE '%$term1%'  AND item LIKE '%$term4%' AND service LIKE '%$term5%'"); 
$number=mysql_num_rows($query); 
```

第 2 学期和第 3 学期是从日期选择器输入的日期范围条款，并以正确的格式 000-00-00，我认为问题是 WHERE 语句谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:22:57.350

是的，这将是问题所在。理想情况下，如果日期未设置或为 0000-00-00，您将设置日期字符串的默认值以涵盖所有可能的日期。

例如：

```
if((!isset($_REQUEST['term2'])) OR ($_REQUEST['term2'] == '0000-00-00')) {
    $term2 = '1970-01-01';
}
if((!isset($_REQUEST['term3'])) OR ($_REQUEST['term3'] == '0000-00-00')) {
    $term3 = date("Y-m-d");
} 
```

因此，如果未设置日期条款，它将使用跨越指定日期范围（直到当前日期）的默认值。

# javascript - display:none 不适用于标签

> ID：13821201
> 
> 赞同：0
> 
> 时间：2012-12-11T13:13:34.333
> 
> 标签：javascript, html

我有 2 种用户文本输入方式 - 通过输入文本字段，或通过从下拉菜单中选择预定义文本。Javascript 控制哪一个是可见的。所以我有这 2 个输入法和它们对应的 2 个标签：

```
<h:form id="test">
<div>
  <h:outputLabel id="label_1" value="Your text:" style="display:block" />
  <h:inputText id="txt" value="#{myform.inputText}" style="display:block" />

  <h:outputLabel id="label_2" value="Choose text:" style="display:none" />
  <h:selectOneMenu id="drop" value="#{myform.inputText}" style="display:none">
    <f:selectItem itemValue="11" itemLabel="Preselected text 1" />
    <f:selectItem itemValue="22" itemLabel="Preselected text 2" />
  </h:selectOneMenu>
</div>
</h:form> 
```

javascript显示和隐藏元素：

```
if (...) {
  document.getElementById('label_1').style.display="none";
  document.getElementById('txt').style.display="none";
  document.getElementById('label_2').style.display="block";
  document.getElementById('drop').style.display="block";
}
else {
  document.getElementById('label_1').style.display="block";
  document.getElementById('txt').style.display="block";
  document.getElementById('label_2').style.display="none";
  document.getElementById('drop').style.display="none";
} 
```

所以，要么**label_1 + txt**要么**label_2 + drop** 问题是：当页面加载时，只有**label_1 + txt**应该是可见的。不幸的是，label_1、**label_2**和 txt 是可见的！

为什么 drop 的定义 style="display:none" 有效而 label_2 的相同定义无效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:25:19.897

**隐藏标签**

```
function Hide(id) {
    document.getElementById(id).style.visibility = "hidden";
}​

Hide('label_1'); 
```

**显示标签**

```
function Show(id) {
    document.getElementById(id).style.visibility = "visible";
}

Show('label_1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:51:33.440

解决方案是在正文中的脚本中添加一个 jQuery 块

```
$(document).ready(function() {
    $('[id$=label_2]').hide();
    $('[id$=drop]').hide();
}); 
```

# php - 从存储过程中获取结果

> ID：13821203
> 
> 赞同：0
> 
> 时间：2012-12-11T13:13:40.087
> 
> 标签：php, mysql, stored-procedures, mysqli

如何使用 mysqli 和存储过程获得 2 个结果？

db_class.php

```
 /*  some class code  */

        function  GetList1()
        {
            return $this->dbconn->query("CALL list1()");
        }

        function  GetList2()
        {
            return  $this->dbconn->query("CALL list2()");
        }

      /*  some class code  */ 
```

用户界面.php

```
 $res1 =  $db->GetList1();

  while ($row = $res1->fetch_array(3))
  {
     echo $row[0];   // already working
  }

  // $res1->free_result();     -- not helped

  $res2 =  $db->GetList2();
  while ($row = $res2->fetch_array(3))
  {
     echo $row[0];  // getting error " Fatal error: Call to a member function fetch_array() on a non-object in "
  } 
```

# c - 这个循环一个周期内执行了多少条指令？

> ID：13821211
> 
> 赞同：1
> 
> 时间：2012-12-11T13:14:01.023
> 
> 标签：c, assembly, mips

交流回路是

```
 while( *from)
  {
    *to++ = *from++;
  } 
```

我想我基本上想知道`*to++ = *from++;`翻译成哪些 MIPS 指令。我的结果是指令是 14：

```
$L2:
   lw    $2,12($fp)
   lb    $3,0($2)
   bne    $3,$0,$L4
   j    $L3
$L4:
   lw    $2,8($fp)
   addu    $3,$fp,12
   lw    $4,0($3)
   lbu    $5,0($4)
   sb    $5,0($2)
   addu    $4,$4,1
   sw    $4,0($3)
   addu    $2,$2,1
   sw    $2,8($fp)
   j    $L2 
```

我通过查看完整的 C 程序得出了这个结论：

```
/* strcpy.c */

#include <stdio.h>
#include <idt_entrypt.h>

/* C stringcopy */

static void str_cpy( char *to, const char *from)
{
  while( *from)
  {
    *to++ = *from++;
  }
  *to = '\0';
}

int main()
{
  static char* hello = "Hello World!";
  static char to[4711] = "blaha blaj blurk bletch";
  int Time;

  printf("Strangen hello ser ut sa har: %s\n", hello);
  flush_cache();          /* toem cache-minnet */
  timer_start();          /* nollstall tidmatning */

  str_cpy( to, hello);

  Time = timer_stop();            /* las av tiden */
  printf("Time to copy: %d\n",Time);
  printf("Och kopian sa har: %s\n", to);
} 
```

将其编译为 MIPS 程序集结果如下：

```
 .file   1 "strcpy.c"

 # -G value = 8, Cpu = 3000, ISA = 1
 # GNU C version cygnus-2.7.2-970404 (mips-mips-ecoff) compiled by GNU C version cygnus-2.7.2-970404.
 # options passed:  -msoft-float
 # options enabled:  -fpeephole -ffunction-cse -fkeep-static-consts
 # -fpcc-struct-return -fcommon -fverbose-asm -fgnu-linker -msoft-float
 # -meb -mcpu=3000

gcc2_compiled.:
__gnu_compiled_c:
    .text
    .align  2
    .ent    str_cpy
str_cpy:
    .frame  $fp,8,$31       # vars= 0, regs= 1/0, args= 0, extra= 0
    .mask   0x40000000,-8
    .fmask  0x00000000,0
    subu    $sp,$sp,8
    sw  $fp,0($sp)
    move    $fp,$sp
    sw  $4,8($fp)
    sw  $5,12($fp)
$L2:
    lw  $2,12($fp)
    lb  $3,0($2)
    bne $3,$0,$L4
    j   $L3
$L4:
    lw  $2,8($fp)
    addu    $3,$fp,12
    lw  $4,0($3)
    lbu $5,0($4)
    sb  $5,0($2)
    addu    $4,$4,1
    sw  $4,0($3)
    addu    $2,$2,1
    sw  $2,8($fp)
    j   $L2
$L3:
    lw  $2,8($fp)
    sb  $0,0($2)
$L1:
    move    $sp,$fp         # sp not trusted here
    lw  $fp,0($sp)
    addu    $sp,$sp,8
    j   $31
    .end    str_cpy
    .rdata
    .align  2
$LC0:
    .ascii  "Hello World!\000"
    .sdata
    .align  2
hello.4:
    .word   $LC0
    .data
    .align  2
to.5:
    .ascii  "blaha blaj blurk bletch\000"
    .space  4687
    .rdata
    .align  2
$LC1:
    .ascii  "Strangen hello ser ut sa har: %s\n\000"
    .align  2
$LC2:
    .ascii  "Time to copy: %d\n\000"
    .align  2
$LC3:
    .ascii  "Och kopian sa har: %s\n\000"
    .text
    .align  2
    .globl  main
    .ent    main
main:
    .frame  $fp,32,$31      # vars= 8, regs= 2/0, args= 16, extra= 0
    .mask   0xc0000000,-4
    .fmask  0x00000000,0
    subu    $sp,$sp,32
    sw  $31,28($sp)
    sw  $fp,24($sp)
    move    $fp,$sp
    jal __main
    la  $4,$LC1
    lw  $5,hello.4
    jal printf
    jal flush_cache
    jal timer_start
    la  $4,to.5
    lw  $5,hello.4
    jal str_cpy
    jal timer_stop
    sw  $2,16($fp)
    la  $4,$LC2
    lw  $5,16($fp)
    jal printf
    la  $4,$LC3
    la  $5,to.5
    jal printf
$L5:
    move    $sp,$fp         # sp not trusted here
    lw  $31,28($sp)
    lw  $fp,24($sp)
    addu    $sp,$sp,32
    j   $31
    .end    main 
```

于是我分析了上面，发现while循环一个周期执行的指令数是14条，我的推理对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:30:59.897

```
$L2:
 lw    $2,12($fp)  ;  12($fp) is 'from' - load it in to $2
 lb    $3,0($2)    ; read a byte
 bne    $3,$0,$L4  ; if it's non-zero, jump into the main loop
 j    $L3          ; otherwise exit (this is the while clause)
$L4:
 lw    $2,8($fp)   ; 8($fp) is 'to' - load it into $2
 addu    $3,$fp,12 ; Load the address of 'from' into $3
 lw    $4,0($3)    ; Load 'from' into $4
 lbu    $5,0($4)   ; Read the byte again (this is the = *from)
 sb    $5,0($2)    ; Store the byte (*to = )
 addu    $4,$4,1   ; increment from (from++)
 sw    $4,0($3)    ; store it back
 addu    $2,$2,1   ; increment to (to++)
 sw    $2,8($fp)   ; store it back
 j    $L2          ; do it all again 
```

所以循环中有 13 个操作，因为 j $L3 被跳过。

但是，正如markgz 所指出的，MIPS 有分支延迟槽，这可能需要编译器或汇编器添加nops 或switch 指令。您应该查看最终代码的反汇编以及中间汇编程序输出。

在这种情况下，可能在初始 bne 指令之后至少会有一个额外的 nop，但汇编器可能会重新排序最终跳转，而不是用 nop 填充。因此，如果您查看最终输出，可能总共有 14 条指令。

那里有很多冗余 - 一半的指令只是加载/存储回局部变量，而不仅仅是将内容保存在寄存器中。这是典型的调试/未优化构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:36:55.783

您在计数中包含了测试和条件跳转指令，这对我来说似乎不合适。

您的代码中已经有一个分支过多。尝试

```
 while ((*to++ = *from++)); 
```

我的编译器（x86 的 gcc）生成更好的代码，只有一个条件跳转。在编译成的那种架构（似乎有更好的寻址模式）上

```
 xorl    %eax, %eax
.L8:
    movzbl  (%rsi,%rax), %edx
    movb    %dl, (%rdi,%rax)
    addq    $1, %rax
    testb   %dl, %dl
    jne .L8
    ret 
```

所以这里内部只有三个指令加上一个初始化，因为增量只在循环内完成一次，而不是两次。通常你在问这样的问题时必须小心，`(*to++ = *from++)`它本身并没有真正的成本，而只是嵌入到周围的代码中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:21:48.570

看起来正确。

似乎有很多冗余的负载和存储 - 优化是否完全关闭？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T13:21:51.250

实际上，该while循环的执行只有13个操作（该操作`j $L3`仅在while结束时执行）。

# android - ANDROID 如何将数据（例如来自 GPS 的纬度和经度）传递到 SMS 进程并发送

> ID：13821212
> 
> 赞同：2
> 
> 时间：2012-12-11T13:14:05.363
> 
> 标签：android, gps, sms, latitude-longitude

我有一门关于获取纬度和经度的课程，另一门是接收短信并将其发送回请求它的人。它是一个自动回复，例如，用户A通过短信请求用户B的位置，而不知道用户A有这种请求。然后自动获取用户B当前的经纬度，并返回给用户A。如何​​实现呢？我对android开发很陌生。这是我的代码片段。谢谢

```
String rtMessage = "Location: ";
    GPSActivity gpsActivity = new GPSActivity();

    rtMessage = gpsActivity.text;

    if (rtMessage!=null){
        rtMessage = "I get the location!";
    }
    else{
        rtMessage = "NO LOCATION\n\n";  
    }

SmsManager smsManager = SmsManager.getDefault();
smsManager.sendTextMessage(address, null, rtMessage , null, null); 
```

# cocoa-touch - 使用 UIAppearance 自定义一个 UIBarButtonItem 子类，而不是主类

> ID：13821221
> 
> 赞同：3
> 
> 时间：2012-12-11T13:14:25.660
> 
> 标签：cocoa-touch, uibarbuttonitem, uiappearance

我正在使用 UIAppearance 自定义所有 UIBarButtonItem，其中包括：

```
[[UIBarButtonItem appearance] setTintColor:[UIColor purpleColor]]; 
```

除了糟糕的颜色选择外，它的效果很好。

现在，我想要一些具有特定样式的按钮。所以我创建了一个新类，我们称之为`YellowDoneBarButtonItem`.
我也想自定义它，所以我添加：

```
[[YellowDoneBarButtonItem appearance] setTintColor:[UIColor yellowColor]]; 
```

不幸的是，最后一次调用`... appearance] setTintColor:`获胜，所有按钮，无论是否为子类，都采用最后指定的颜色。

我不能使用`appearanceWhenContainedIn:`，因为有时，我可能在同一个导航栏中有两种不同的按钮样式。

**有没有办法`UIAppearance`比*all or nothing*更有选择性地使用？**

医生说：

> 在任何给定的视图层次结构中，最外层的外观代理获胜。特异性（链的深度）是决胜局。换句话说，appearanceWhenContainedIn: 中的包含语句被视为部分排序。给定一个具体的排序（实际的子视图层次结构），UIKit 在从窗口向下读取实际层次结构时选择部分排序，它是第一个唯一匹配的。

有什么技巧可以将这个事实转变为这里需要的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T10:07:14.320

实例化的实际按钮似乎是 UINavigationButton，它是 UIButton 的（私有）子类。这可以解释为什么 UIBarButtonItem 外观子类是一个包罗万象的。

就我自己而言，我一直在使用 UIButton 作为自定义视图来获得我需要的外观。这些可以很容易地依次使用 UIAppearance 覆盖。

# objective-c - 如何在回调函数（定义回调时的那个）中使用旧变量值而不是回调运行时的值？

> ID：13821225
> 
> 赞同：0
> 
> 时间：2012-12-11T13:14:37.250
> 
> 标签：objective-c, ios, callback

让我们看看这个例子：

```
int a = 1;
[someOperation onCompletion:^(...) {
     NSLog("%d", a);
}];

a = 2; 
```

假设`someOperation`需要 1 秒才能完成。所以控制台上会有“2”。

如何从定义回调时定义具有变量值的回调主体（以便在这种情况下回调执行将在控制台上打印“1”）？

在 JavaScript 中，它可以按如下方式完成：

```
setTimeout("someFunction("+variable+")", 1000); 
```

代替

```
setTimeout(function() { someFunction(variable); }, 1000); 
```

但是如何在 ObjC 中完成这件事呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:20:36.383

如果你试试

```
int a = 1;
int64_t delayInSeconds = 2.0;
dispatch_time_t popTime = dispatch_time(DISPATCH_TIME_NOW, delayInSeconds * NSEC_PER_SEC);
dispatch_after(popTime, dispatch_get_main_queue(), ^(void){
    NSLog(@"a=%d", a);
});
a = 2; 
```

你会很高兴地发现答案是

```
a=1 
```

因为块的标准行为是在创建它们时捕获它们引用的变量的值，然后在它们运行时使用这些存储的值。我敢肯定有一种更聪明的说法，但这就是它对我有用的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:27:57.980

你的假设是不正确的。块复制局部变量，除非它们使用 __block 关键字声明。所以，在你的情况下：

```
int a = 1;
[someOperation onCompletion:^(...) {
     NSLog(@"%i", a);
}];

a = 2; 
```

NSLog 语句将返回 1。如果您像这样更改它：

```
int __block a = 1;
[someOperation onCompletion:^(...) {
     NSLog(@"%i", a);
}];

a = 2; 
```

它会返回 2，因为在这种情况下 a 是通过引用访问的

# javascript - 如何在地铁上构建屏幕共享应用程序，如商店中的远程共享

> ID：13821228
> 
> 赞同：1
> 
> 时间：2012-12-11T13:14:42.853
> 
> 标签：javascript, visual-studio-2012, microsoft-metro, java-metro-framework

我正在为 k12 教室开发应用程序。我需要分享教师在用户（学生）PCS 中所做的事情。我想知道我是否可以使用网络摄像头分享...为什么我不能在 Metro 应用程序上分享任何视频？

我的应用基于 HTML5/JS

**我的问题是是否可以在设备之间共享屏幕或将屏幕广播给教室中的其他学生如果可能是哪些图书馆可以支持？**

我在 Windows 8 Metro RTC 应用程序中使用命名空间 Windows.Media.PlayTo 命名空间可以将音频、视频和图像流式传输到远程设备。[我在商店里](http://apps.microsoft.com/webpdp/en-us/app/remote-desktop/051f560e-5e9b-4dad-8b2e-fa5e0b05a480)找到了一些远程共享的应用程序，比如 TeamViewer远程共享。

先感谢您

# gdb - GDB在变量声明上设置断点时获取正确的停止点

> ID：13821229
> 
> 赞同：1
> 
> 时间：2012-12-11T13:14:46.110
> 
> 标签：gdb, breakpoints

给定以下代码片段：

```
1:    int main(int argc, char **argv) {
2:       int i;
3:    
4:       i = i + 1;
5:    
6:       ...
7:    
8:    } 
```

当您在第 2 行设置断点时：在上述代码中并在 GDB 中开始调试时，执行实际上在第 4 行停止：。这当然是正确的行为，但是是否可以在调试 **之前查询 GDB 以获取正确的停止点编号……在创建断点之后。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:53:03.820

```
(gdb) b 2
Breakpoint 1 at 0x400547: file main.cpp, line 2. 
```

这`info b`表明：

```
(gdb) info b $bpnum
Num     Type           Disp Enb Address            What
1       breakpoint     keep y   0x0000000000400547 in main(int, char**) at main.cpp:2 
```

您需要为“地址”列中的地址执行此操作：

```
(gdb) info line *0x0000000000400547
Line 4 of "main.cpp" starts at address 0x400547 <main(int, char**)+11> and ends at 0x400550 <main(int, char**)+20>. 
```

如您所见，“main.cpp 的第 4 行”上的真正断点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:19:17.350

可能你正在寻找

```
info b 
```

（是 的缩写`info breakpoints`）并在第一个“列”中给出数字。

如果您想在变量被修改时中断，请改用**观察点**。GDB 将始终在断点之后最近的可执行代码行处中断（如果按行设置）。变量声明不是可执行代码，因此将使用下一行（非空）上的赋值。

如果您正在寻找的是确切地知道它在哪一行停止，我认为 GDB 提示符上没有这样的东西。但是，您仍然可以使用观察点并使用`commands`.

* * *

从 skwllsp 写的评论来看，它的外观如下：

```
(gdb) info b
Num    Type       Disp  Enb Address            What
1      breakpoint keep  y   0x0000000000400547 in main(int, char**) at main.cpp:2 
```

这表示有一个断点 ( `1`)，它已启用，它也向您显示该行。处置 (Disp) 和启用 (Enb) 很有用，但请阅读手册以获得正确的描述。我也可以热烈推荐 Nostarch 的《调试艺术》一书。

# perl - Perl epoch 在 2 台不同的机器（UTC 和 CET）上返回不同的值

> ID：13821230
> 
> 赞同：2
> 
> 时间：2012-12-11T13:14:47.407
> 
> 标签：perl, time, timezone

我有 2 台 linux 机器需要运行 perl 脚本并访问数据库。出于任何原因，日期本身是正确的，但是从 Perl 返回的纪元有 1 小时的差异，导致在一台机器上具有 UTC 纪元时间戳，而在另一台机器上具有所需的 CET。

A 日期：

> 2012 年 12 月 11 日星期二 13:34:09 CET

B 日期：

> 2012 年 12 月 11 日星期二 13:33:20 CET

为了检查发生了什么，我构建了一个简约的示例。该脚本使用 Time::HiRes 并收集 localtime->epoch 来生成日期。我构建了一个简约的以下脚本来输出行为：

```
#/usr/bin/perl
#
use Time::HiRes qw(time);
use Time::Piece;
#
my $date = Time::Piece->strptime(localtime->epoch,"%s");
print "$date->datetime"."\n";
print $date->tzoffset."\n";
print $date->epoch."\n"; 
```

输出机器A：

> 2012 年 12 月 11 日星期二 12:35:43-> 日期时间 0 1355229343

输出机器 B：

> 2012 年 12 月 11 日星期二 13:34:25-> 日期时间 0 1355232865

因此，如您所见，时区左右肯定有问题。相差一个小时。但是我不知道在哪里看以及配置什么，因为日期本身会输出正确的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T16:24:34.353

这似乎是`Time::Piece->strptime(STRING, FORMAT)`. 这是有问题的代码：

```
sub strptime {
    my $time = shift;
    my $string = shift;
    my $format = @_ ? shift(@_) : "%a, %d %b %Y %H:%M:%S %Z";
    my @vals = _strptime($string, $format); 
```

让我们从这里开始。`_strptime`是操作系统的[原生`strptime`函数](http://pubs.opengroup.org/onlinepubs/7908799/xsh/strptime.html)。它似乎返回当地时间，尽管任何地方都没有记录。

```
#    warn(sprintf("got vals: %d-%d-%d %d:%d:%d\n", reverse(@vals)));
    return scalar $time->_mktime(\@vals, (ref($time) ? $time->[c_islocal] : 0)); 
```

好的，所以我们使用我们的`_mktime`方法将输出`_strptime`转换为`Time::Piece`对象。第二个参数是`_mktime`应该解释为本地时间还是 UTC。当调用 as 时`Time::Piece->strptime(STRING, FORMAT)`，`ref($time)`将为 false，因此`_mktime`将调用 with `$islocal=0`，即`_strptime`返回 UTC 时间。这是错误的，我们已经找到了错误。（我对 C 时间函数知之甚少，不知道应该如何完成。）

```
} 
```

所以你必须使用`localtime->strptime(STRING, FORMAT)`. `_mktime`除了由于另一个错误（我的发行版附带版本 1.15，这仍然被破坏，但它在 1.20 中修复），这仍然会在旧版本的模块上失败。

这甚至不是特定于`%s`. 任何`Time::Piece->strptime`电话都会发生这种情况：

```
$ perl -MTime::Piece -E'say $x=Time::Piece->strptime("11 Dec 2012 10:00","%d %b %Y %H:%M")->epoch;say scalar localtime $x'
1355220000
Tue Dec 11 04:00:00 2012
$ perl -MTime::Piece -E'say $x=localtime->strptime("11 Dec 2012 10:00","%d %b %Y %H:%M")->epoch;say scalar localtime $x'
1355220000
Tue Dec 11 04:00:00 2012
$ export PERL5LIB=Time-Piece-1.20/blib/lib:Time-Piece-1.20/blib/arch
$ perl -MTime::Piece -E'say $x=Time::Piece->strptime("11 Dec 2012 10:00","%d %b %Y %H:%M")->epoch;say scalar localtime $x'
1355220000
Tue Dec 11 04:00:00 2012
$ perl -MTime::Piece -E'say $x=localtime->strptime("11 Dec 2012 10:00","%d %b %Y %H:%M")->epoch;say scalar localtime $x'
1355241600
Tue Dec 11 10:00:00 2012 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-12-11T14:30:35.617

我建议你尝试使用`gmtime`而不是`localtime`.

* * *

没有帮助：

```
>perl -MTime::Piece -E"say Time::Piece->strptime(localtime->epoch,'%s')->epoch;"
1355239881

>perl -MTime::Piece -E"say Time::Piece->strptime(gmtime->epoch,'%s')->epoch;"
1355239881

>perl -E"say time"
1355239881 
```

# php - 全日历休息

> ID：13821231
> 
> 赞同：1
> 
> 时间：2012-12-11T13:14:53.007
> 
> 标签：php, fullcalendar, break

我将 fullcalendar 与 qtip 一起用于基于事件的站点 (php)，并且它运行良好。

我正在为想要做出的改变而苦苦挣扎。

在我的记录集中，我正在检索一个位置 - 这是来自 html 编辑器的自由文本。

这对于基本文本来说很好，我正在添加斜杠以在任何文本等中转义撇号。

但是，如果文本中有换行符，页面将不会渲染，并且在调试js时出现错误`unexpected token ILLEGAL`

我已经尝试了 strip_tags 功能，它似乎删除了有问题的
标签，但页面仍然不会呈现，只要我删除 br 标签，它就可以正常工作。

我正在从我的记录集中构建一个字符串并将其显示如下...

```
 <?php $eventlist = "";?>
    <?php do { ?>
    <?php $eventlist = $eventlist."{title:    '".addslashes($row_rsevents['EventName'])."', start: '". $row_rsevents['EventDate']."', starttime: '". $row_rsevents['StartTime']."', endtime: '". $row_rsevents['EndTime']."', dateF: '". $row_rsevents['EventDateF']."', className: '". $row_rsevents['CSSTag']."', host: '".addslashes($row_rsevents['HostDescription'])."', eventtype: '". $row_rsevents['EventTypeDescription']."', url: '"."event_detail.php?EventID=". $row_rsevents['EventID']."', description: '". addslashes(strip_tags($row_rsevents['Location']))."'},"; ?>
    <?php } while ($row_rsevents = mysql_fetch_assoc($rsevents)); ?>
    <?php $eventlist = rtrim($eventlist,',');//remove the trainling comma ?>

    ...events: [
    <?php echo $eventlist; ?>
    ], 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T05:17:04.057

很难说你最终的 json 编码数组是什么样子，但你不需要手动编码；只需构建您的事件数组（就像您在`fetch`循环中所做的那样），然后`echo json_encode($evarray)`它应该处理您在标题、描述等中放入的任何字符。

您还可以添加自定义属性 ev.line1、ev.line2 并响应`eventRender(ev, elt...)`替换事件标题，如下所示：`elt.find(".fc-event-title").html(ev.line1+"<br/>"+ev.line2);`如果您想要`br`那里。

# knockout.js - 扩展实体以创建需要导航属性的计算可观察对象

> ID：13821241
> 
> 赞同：1
> 
> 时间：2012-12-11T13:15:32.913
> 
> 标签：knockout.js, breeze

我正在尝试扩展一个实体以创建一个需要导航属性的计算 observable：

```
app.domain.indicador = function () {
    this.ValorMetaActual = ko.computed({
        read: function () {
            console.log(this.ValoresMeta); //navigation property: undefined
            return 0;
        },
        deferEvaluation: true
    }, this);
}; 
```

问题是当创建 observable 时，导航属性还不存在。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T01:28:02.923

这是一个错误，已在 v 0.76.3 中修复。如果这能解决您的问题，请告诉我们。...感谢您找到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T17:02:39.890

我假设问题是您的计算值显示在页面上的某处 - 并且显示为未定义。如果您将导航属性 ( ) 设为可观察的，则 Knockout 将更新最终分配时`this.ValoresMeta`的显示值。`ValorMetaActual``ValoresMeta`

```
app.domain.indicador = function () {
    this.ValoresMeta = ko.observable(0);
    this.ValorMetaActual = ko.computed({
        read: function () {
            console.log(this.ValoresMeta());
            return 0;
        },
        deferEvaluation: true
    }, this);
}; 
```

上面的代码指定`0`为 ValoresMeta 的默认值。您可能需要一些其他默认值，但您应该有一些默认值，以便您的计算不会以未定义的方式结束。

# php - 预填充字段

> ID：13821247
> 
> 赞同：-4
> 
> 时间：2012-12-11T13:15:39.673
> 
> 标签：php, html

我的网站上有一个contact.php 表单，可以从两个来源访问。我想要发生的是，当有人从页脚菜单访问表单时，他们会得到一个空白表单，所有字段都打开，供他们输入数据。当有人从我们的一个广告中访问联系表单时，主题行会预先填充项目 ID 和名称。有人可以指出我正确的方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T13:22:03.667

页脚菜单中的链接必须是 href="contact.php" ，而广告中的链接必须是 href="contact.php?subject=sub"。所以在contact.php中，使用`$_GET['subject']`获取主题值，如果它不为空，将其分配给主题字段值，使用

```
<input type="text" name="subjectfield" value="<?php if(isset($_GET['subject']){ echo $_GET['subject'];}?>"> 
```

# xcode4.5 - 带有 iOS 6.0.1 和 xcode 4.5.2 的 iPhone 5 的安装问题

> ID：13821249
> 
> 赞同：-1
> 
> 时间：2012-12-11T13:15:44.957
> 
> 标签：xcode4.5, iphone-5, ota

上周我们一直面临一个特殊情况，找不到任何解决方案。这是我们的配置信息：
开发工具
Xcode 4.5.2、iOS 6.0.1、部署目标 5.0、通用应用程序（iphone+iPad 应用程序）
我的伙伴有一个 iphone 5 和 iOS 6.0.1
我有一个 iphone 4s 和 iOS 6.0。 1

我们正在使用 OTA 安装过程，并且在 iPhone 4s 上一切正常。但是，我们在使用 iPhone 5 时遇到安装错误。
每次安装完成时，iphone 5 设备都会弹出警告，显示“无法安装应用程序”错误。
我们试图解决问题，但仍然没有任何运气。

如果有人可以帮助我们，我们提前感谢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T19:48:39.230

哦，这很可能不适用于 iphone 5。您可能必须连接它并通过 iTunes 恢复它。或者如果您选择不这样做，那么您的 iphone 5 注定要失败，直到有人提出解决方案：P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T05:29:50.560

经过多次迭代和不同的更改，我们不可能解决这个问题。但是，我们创建了新项目并复制/粘贴了每个文件，然后构建了应用程序。

**接下来发生了什么！！！幸运的是，应用程序安装在所有设备上没有任何问题**。但是，我希望我们知道它以前没有安装的确切原因。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T19:43:11.820

它连接到wifi了吗？试试看。那应该有帮助。或者放一个没有 sim lock 密码的 sim 卡，它有网络在线。或相反亦然。让我知道！:D

# c# - c#中如何将字符串拆分为单词

> ID：13821252
> 
> 赞同：2
> 
> 时间：2012-12-11T13:15:54.913
> 
> 标签：c#

如何将以下字符串拆分为单词

`string exp=price+10*discount-30`

进入

`string[] words={'price',discount' }`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:06:40.930

你可以用正则表达式匹配单词，然后得到结果。

例子：

```
 // This is the input string.
        string input = "price+10*discount-30";

        var matches = Regex.Matches(input, @"([a-z]+)", RegexOptions.IgnoreCase | RegexOptions.Multiline);
        foreach (var match in matches)
        {
            Console.WriteLine(match);
        }
        Console.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:25:47.947

希望这个例子有帮助：

```
string str = "price+10*discount-30";
char[] delimiters = new char[] { '+', '1', '0', '*', '-', '3'};
string[] parts = str.Split(delimiters, StringSplitOptions.RemoveEmptyEntries);
foreach (string s in parts)
    Console.WriteLine(s);

Console.ReadLine(); 
```

输出是：

```
price
discount 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:28:47.197

你想要的是一个词法分析器，它根据输入的类型对单词进行标记。这是一个为您执行此操作的小程序。

```
 int dummy;
        string data = "string price = 10 * discount + 12";
        string[] words = data.Split(' ');
        LinkedList<string> tokens = new LinkedList<string>();
        LinkedList<string> keywords = new LinkedList<string>();
        LinkedList<string> operators = new LinkedList<string>();
        keywords.AddLast("string");
        operators.AddLast("*");
        operators.AddLast("/");
        operators.AddLast("+");
        operators.AddLast("=");
        operators.AddLast("-");
        foreach (string s in words)
        {
            if (keywords.Contains(s)) continue;
            if (operators.Contains(s)) continue;
            if (int.TryParse(s, out dummy) == true) continue;
            tokens.AddLast(s.Trim());
        }
        string[] data_split = tokens.ToArray(); 
```

# c# - 在以排队方式执行 cpu 绑定作业时避免线程池饥饿的策略

> ID：13821254
> 
> 赞同：1
> 
> 时间：2012-12-11T13:15:58.763
> 
> 标签：c#, .net, asp.net-mvc, multithreading, thread-safety

我的目标是避免将线程池线程用于 CPU 密集型工作，从而避免 IIS 停止响应新请求的情况。

**你能看到下面的代码有什么问题吗？**这是一种安全/干净的方法吗？你能提供任何改进吗？

```
 private static ConcurrentQueue<Job> Jobs = new ConcurrentQueue<Job>();
    static int threadCount = 0;

    private void QueueJob(Job job)
    {

        lock(Jobs)
        {
            Jobs.Enqueue(job);
            if (threadCount == 0)
            {

                Interlocked.Increment(ref threadCount); 
                var t= new Thread(new ThreadStart(ConsumeQueue));              
                t.Start();

            }
        }

    }
    private void ConsumeQueue()
    {
        while (true)
        {
            lock (Jobs)
            { 
                if (!Jobs.Any())
                {
                    Interlocked.Decrement(ref threadCount);
                    return;
                }
            }

            Job j;

            var jobToDo = Jobs.TryDequeue(out j);

            if (jobToDo)
            {
                DoCPUBoundWork(j);
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:32:15.407

这是一个应该满足您需求的基本队列：

```
//sealed so we don't have to implement full IDisposable pattern
sealed class Q:IDisposable
{
    private CancellationTokenSource cts = new CancellationTokenSource();
    private BlockingCollection<Action> queue =
        new BlockingCollection<Action>(new ConcurrentQueue<Action>());

    public Q()
    {
        new Thread(() => RunQueue()).Start();
    }

    private void RunQueue()
    {
        while(!cts.IsCancellationRequested)
        {
            Action action;
            try
            {
                //lovely... blocks until something is available
                //so we don't need to deal with messy synchronization
                action = queue.Take(cts.Token); 
            }
            catch(OperationCanceledException)
            {
                break;
            }
            action();
        }
    }

    public void AddJob(Action action)
    {
        try
        {
            queue.Add(action,cts.Token);
        }
        catch(OperationCanceledException e)
        {
            throw new ObjectDisposedException("Q is disposed",e);
        }
    }

    public void Dispose()
    {
        if(!cts.IsCancellationRequested)
        {
            cts.Cancel();
        }
    }
} 
```

按如下方式使用：

```
Q actionQueue=new Q();
actionQueue.AddJob(() => Console.WriteLine("action1"));
actionQueue.AddJob(() => Console.WriteLine("action2"));
actionQueue.AddJob(() => Console.WriteLine("action3")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:04:24.103

您的线程有可能在入队作业之前终止

```
lock (Jobs)
{ 
     if (!ResizeJobs.Any())
     {
         Interlocked.Decrement(ref threadCount);
         return;
     }
} 
```

在此之后另一个作业将执行 Jobs.Enqueue(job);

我认为您不需要终止工作线程。它应该在睡眠状态下等待工作

# ruby-on-rails - rake 测试和错误：日志写入失败。"\xE2" 从 ASCII-8BIT 到 UTF-8

> ID：13821258
> 
> 赞同：14
> 
> 时间：2012-12-11T13:16:19.780
> 
> 标签：ruby-on-rails, logging, ruby-on-rails-3.2

当我运行时`rake test`，我每次都会收到错误行。

```
log writing failed. "\xE2" from ASCII-8BIT to UTF-8 
```

请对此进行指导。如何消除此错误。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-19T02:13:15.107

您可能在代码中的某个地方尝试输出编码错误或包含一些奇怪字符且编码不起作用的字符串。

正确的方法是找到导致问题的字符串并找出其编码错误的原因。[请参阅字符串 api ( http://ruby-doc.org/core-2.2.0/String.html](http://ruby-doc.org/core-2.2.0/String.html) )中的 encoding 和 force_encoding 。

如果您只想能够在日志中打印该行并避免错误，您可以使用该字符串执行以下过程。

```
str = 'here is some string with wrong encoding and funny characters e.g. "\xE2"'
# note if you do this in console, the str is encoded correctly

# Rails.logger.info(str) # this would result in the error line

# This will change the encoding and remove weird characters
str = str.encode('utf-8', :invalid => :replace, :undef => :replace, :replace => '_')

Rails.logger.info(str) # this now works 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-03T00:42:00.820

你在用postgresql吗？您的数据库可能正在使用 SQL_ASCII。您可以通过运行`psql template1 -c 'show server_encoding'`Delete the database cluster 并使用 重新初始化它来检查它是否存在`initdb -E utf8 /path/to/database`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-08T12:33:51.593

在我的情况下，一些奇怪的引号是罪魁祸首，所以我只是用这样的安全字符替换它们，

```
msg = error.message.gsub(/[“”]/, "\"").gsub(/[‘’]/,"\'") 
```

# http - http响应内容长度中应该包含换行符吗？

> ID：13821263
> 
> 赞同：8
> 
> 时间：2012-12-11T13:16:33.957
> 
> 标签：http, response, http-content-length

发送 HTTP 响应时，我应该用换行符（行分隔符）结束响应正文（内容本身）吗？

如果是这样，我是否应该在 Content-Length 中包含行分隔符的大小（如果发送 \r\n，我猜想将计数增加 2）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-06-06T00:02:38.237

> 发送 HTTP 响应时，我应该用换行符（行分隔符）结束响应正文（内容本身）吗？如果是这样，我是否应该在 Content-Length 中包含行分隔符的大小（如果发送 \r\n，我猜想将计数增加 2）？

**不**！

*在 HTTP 响应的消息正文*中发送的资源数据可能包含其自己的换行符（这在文本文件等中很常见），但就 HTTP 本身而言，这是任意数据。消息数据中的换行符不是 HTTP 响应本身的一部分。HTTP响应通过到达`Content-Length`（即资源数据的字节大小）终止，除非`Transfer-Encoding`使用（在这种情况下`Content-Length`被忽略，并且使用`chunked`编码，这是自终止的），或者连接在最后关闭的回应。这在[RFC 2616 第 4.4 节](https://www.rfc-editor.org/rfc/rfc2616#section-4.4)中有描述：

```
4.4 消息长度

   消息的传输长度是消息体的长度，如
   它出现在消息中；也就是说，在任何传输编码具有
   被应用。当消息中包含消息正文时，
   该主体的传输长度由以下之一确定
   （按优先顺序）：

   1.任何“不得”包含消息体的响应消息（例如
     作为 1xx、204 和 304 响应以及对 HEAD 的任何响应
     request) 总是以第一个空行结束
     头字段，无论实体头字段存在于
     消息。

   2.如果存在传输编码头字段（第 14.41 节）并且
     具有除“identity”以外的任何值，则传输长度为
     通过使用“分块”传输编码（第 3.6 节）定义，
     除非通过关闭连接来终止消息。

   3.如果存在 Content-Length 标头字段（第 14.13 节），则其
     OCTET 中的十进制值表示实体长度和
     传输长度。不得发送 Content-Length 标头字段
     如果这两个长度不同（即，如果传输编码
     头字段存在）。如果同时收到一条消息
     Transfer-Encoding 头域和一个 Content-Length 头域，
     后者必须被忽略。

   4.如果消息使用媒体类型“multipart/byteranges”，并且
     传输长度没有另外指定，那么这个自
     定界媒体类型定义传输长度。这种媒体类型
     除非发件人知道收件人可以解析，否则不得使用
     它; 请求中存在具有多个字节的 Range 标头-
     来自 1.1 客户端的范围说明符意味着客户端可以解析
     多部分/字节范围响应。

       范围标头可能由不支持的 1.0 代理转发
       了解多部分/字节范围；在这种情况下，服务器必须
       使用第 1,3 或 5 项中定义的方法分隔消息
       本节。

   5.由服务器关闭连接。（关闭连接
     不能用于指示请求正文的结束，因为
     不会让服务器发回响应。）

   为了与 HTTP/1.0 应用程序兼容，HTTP/1.1 请求
   包含消息体必须包含有效的 Content-Length 标头
   字段，除非已知服务器符合 HTTP/1.1。如果一个
   请求包含消息体并且没有给出 Content-Length，
   如果不能，服务器应该以 400（错误请求）响应
   确定消息的长度，或者使用 411（需要长度）如果
   它希望坚持接收有效的内容长度。

   所有接收实体的 HTTP/1.1 应用程序必须接受
   “分块”传输编码（第 3.6 节），因此允许这种机制
   用于无法确定消息长度时的消息
   提前。

   消息不能同时包含 Content-Length 头域和
   非身份传输编码。如果消息确实包含非
   身份传输编码，内容长度必须被忽略。

   当在消息正文中给出 Content-Length 时
   允许，其字段值必须与
   消息体。HTTP/1.1 用户代理必须通知用户
   接收并检测到无效长度。

```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T13:21:56.837

[我在RFC 2616](https://www.rfc-editor.org/rfc/rfc2616#section-6)中没有看到这样的内容：

```
响应 = 状态行；第 6.1 节
                *(( 通用标题；第 4.5 节
                 | 响应头；第 6.2 节
                 | 实体头）CRLF）；第 7.1 节
                CRLF
                [ 邮件正文 ] ; 第 7.2 节

```

响应中有两个换行符，都在标头的末尾，而不是在消息体的末尾。标头将描述消息体是如何终止的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:27:58.503

> 发送 HTTP 响应时，我应该用换行符（行分隔符）结束响应正文（内容本身）吗？

RFC 不要求您发送换行符。消息长度不是根据这种换行符的存在来计算的。请参阅描述如何计算消息长度的消息[长度部分。](https://www.rfc-editor.org/rfc/rfc2616#section-4.4)

# android - Robotium - 在构建过程中安装目标应用程序

> ID：13821264
> 
> 赞同：1
> 
> 时间：2012-12-11T13:16:36.613
> 
> 标签：android, maven, emulation, robotium, instrumentation

我正在尝试在演示应用程序上运行 Robotium 测试套件，但是在将测试应用程序推送到设备后，android maven 插件在 mvn install 失败，因为它找不到目标应用程序。

错误是

```
Test run failed to complete: Unable to find instrumentation target package: com.example.app 
```

事实上，演示应用程序并没有作为构建的一部分推送到模拟器上。如果我手动推送它，那么测试套件会成功运行。

父 pom.xml 包含两个模块（演示应用程序和依赖于演示应用程序的测试应用程序），并且 mvn 包成功构建它们，但它仅将测试应用程序推送到模拟器。

知道在测试应用程序之前我需要更改什么以将演示应用程序推送到模拟器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:43:20.963

我通过在 de test 模块中添加以下依赖项在我的项目中解决了这个问题：

```
 <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>appartifact</artifactId>
        <scope>compile</scope>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>appartifact</artifactId>
        <scope>provided</scope>
        <version>${project.version}</version>
        <type>apk</type>
    </dependency> 
```

# android - 标记显示在错误的位置 - 谷歌地图 -android

> ID：13821265
> 
> 赞同：0
> 
> 时间：2012-12-11T13:16:38.550
> 
> 标签：android, google-maps

我创建了显示地图的 android 应用程序。但不幸的是，所有标记显示的位置都略低于其实际位置。我验证了经度和纬度，它们是当前的。

我试过了

```
marker.setBounds(0, 0, 0 + marker.getIntrinsicWidth(), 0 + marker.getIntrinsicHeight()); 
```

这是我的标记加载代码

```
 while (itr.hasNext()) {

            Business business = itr.next();

            point = new GeoPoint((int)(business.getLatitude() * 1E6),
                    (int)(business.getLongitude() * 1E6));

            List<Overlay> mapOverlays = mMapView.getOverlays();
            LinearLayout markerLayout = (LinearLayout)getLayoutInflater().inflate(
                    R.layout.map_loc_bubble, null);
            CustomItem overlayItem = new CustomItem(point, business, markerLayout,
                    getApplicationContext());

            CustomOverlay itemizedOverlay = new CustomOverlay(overlayItem.getDefaultMarker(),this);
            itemizedOverlay.addOverlay(overlayItem);

            mapOverlays.add(itemizedOverlay);

            mMapView.invalidate();

    }

    if (centerPoint != null) {
        mMapView.getController().setCenter(centerPoint);
        mMapView.getController().animateTo(centerPoint);
    }
} 
```

但没有运气

这是我的覆盖类

```
 class CustomOverlay extends ItemizedOverlay<CustomItem> {

    public CustomOverlay(Drawable defaultMarker) {
        super(boundCenterBottom(defaultMarker));
    }

    public CustomOverlay(Drawable defaultMarker, Context context)
    {
        super(boundCenterBottom(defaultMarker));
        mContext = context;
    }

    @Override
    protected CustomItem createItem(int i) {
        return mOverlays.get(i);
    }

    @Override
    public int size() {
        return mOverlays.size();
    }

    public void addOverlay(CustomItem overlay) {
        mOverlays.add(overlay);
        populate();
    }

    public void addOverlay(CustomItem overlay, Drawable marker) {

        marker.setBounds(0, 0, 0 + marker.getIntrinsicWidth(), 0 + marker.getIntrinsicHeight()); 
        overlay.setMarker(marker);
            addOverlay(overlay);
    }

    @Override
    public void draw(android.graphics.Canvas canvas, MapView mapView, boolean shadow) {
        super.draw(canvas, mapView, false);
    }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:45:14.453

使用 Projection 将您的 Overlay 映射到 MapView：如下所示使用它

在您的叠加层中，将此代码添加到绘图方法：

```
Projection projection = mapView.getProjection();

//GeoPoint class is your latitude, longitude.
GeoPoint point = //TODO assign long, lat

//This is your point on the map
Point myPoint = new Point();

projection.toPixels (point, myPoint); 
```

然后你需要某种坐标系来锚定。您可以使用：

```
// Mark some points through which to draw your circle, or you can do something else
 //This just draws circles of radius 5
RectF myShape = new RectF (myPoint.x-5, myPoint.y-5, myPoint.x+5, myPoint.y+5);

canvas.drawOval (mShape, paint); 
```

# vb.net - ComboBox 上的更改麻烦

> ID：13821269
> 
> 赞同：1
> 
> 时间：2012-12-11T13:17:04.210
> 
> 标签：vb.net, winforms, combobox

我按照[http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectionchangecommitted.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selectionchangecommitted.aspx)上的说明进行操作，但遇到了一些麻烦。

首先，此框为空且已禁用。然后，当搜索完成时，它会用值填充这个组合框。假设值是`0=>"", 1=>"My first value", 2="My second value"`。然后我在这个盒子上有一个处理程序，每次我更改值时它都会触发，看起来像这样

```
Private Sub MyComboBox_SelectionChangeCommitted(ByVal sender As Object, ByVal e As EventArgs) Handles MyComboBox.SelectionChangeCommitted

    MsgBox(MyComboBox.SelectedText)

End Sub 
```

如果我现在选择数字 1，我会在消息框中得到“”。如果我然后选择数字 2，我会得到“我的第一个值”等等。它落后了一步。它在值更改之前触发。我怎么能告诉它等待这个值，然后触发 msgbox？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:36:35.947

MSDN 对此特别提出警告。SelectedText 是错误的属性，您应该只使用它来检索用户在组合框的文本框部分内选择的文本。您确实在更改索引后选择了所有文本，但直到此事件运行后才会发生这种情况。请改用 SelectedItem.ToString()。

# visual-studio - 当我将文件直接粘贴到解决方案的文件夹中时，Visual Studio 2008 tfs 会自动生成 .cs 文件

> ID：13821270
> 
> 赞同：0
> 
> 时间：2012-12-11T13:17:11.587
> 
> 标签：visual-studio, crystal-reports, c#

当我将文件直接粘贴到解决方案的文件夹中时，Visual Studio 2008 tfs 会自动生成 .cs 文件。

每次我将我的 .rpt 文件粘贴到 VS2008 TFS 中时，都会生成另一个 1.cs 文件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:36:19.700

右键单击 .RPT 然后属性然后将其粘贴到自定义工具字段：CrystalDecisions.VSDesigner.CodeGen.ReportCodeGenerator

# python - 在 Pyramid 和 SQLAlchemy 中使用 scoped_session.add() 更新数据库

> ID：13821271
> 
> 赞同：4
> 
> 时间：2012-12-11T13:17:16.500
> 
> 标签：python, sqlalchemy, pyramid

如何使用 add() 更新数据库中的一行？

这是我尝试过的代码：

```
@view_config(route_name='doc_user_edit', renderer='doc/edit.mako')
def doc_user_edit(request):
    """ Edit a documentation page. """
    message = ""
    try:
        page = DBSession.query(Page).filter_by(title=request.matchdict['pagename']).first()
    except DBAPIError:
        return Response('An error occured while trying to contact the database', content_type='text/plain', status_int=500)

    if page is None:
        return HTTPNotFound('No such page')

    if 'form.submitted' in request.params:
        page = Page(request.params['title'], request.params['content'], datetime.now())
        DBSession.add(page)
        DBSession.commit()
        message = _('Page edited')

    return {'p':page,
            'm':message,
            'save_url': request.route_url('doc_user_edit', pagename=page.title),
    } 
```

注意：DBSession 是一个 scoped_session。

如果该行是全新的（即不存在唯一键“title”），它会正确添加一个带有我传递给它的值的新行。

但是，如果该行是现有行，它只是做......什么都不做。我希望它用新值（即从表单中提取的值）更新行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T13:19:36.733

您根本不需要使用`add()`（只有新对象才需要）。只需修改现有`page`对象，然后提交。

```
if 'form.submitted' in request.params:
    page.title = request.params['title']
    page.content = request.params['content']
    page.no_idea_what = datetime.now()
    DBSession.commit() 
```

顺便说一句，除非有充分的理由使用本地时间，否则最好将时间戳存储在 UTC 中。

* * *

根据您网站的工作方式，您可能希望组合编辑和创建逻辑。它基本上看起来像这样：

```
def do_edit_whatever(obj):
    # Populate the fields here
    if obj.id is None:
        db.session.add(obj)
    db.session.commit() 
```

然后，您的视图函数将使用新函数`Page()`或数据库中已有的函数调用该函数。

# sitecore - Sitecore Intranet Portal 创建多个配置文件文件夹

> ID：13821273
> 
> 赞同：1
> 
> 时间：2012-12-11T13:17:37.363
> 
> 标签：sitecore, sitecore6, sitecore-intranet-portal

我正在使用 Sitecore Intranet 门户。

在我们的后端解决方案中，Sitecore 在 UserInfo 文件夹下创建了 2 个文件夹 G。

![Sitecore 用户配置文件结构](../Images/a1e7874b4ea7fcdff3035ebe9e1afd71.png)

我们还在 userprofile 项下存储了额外的文件夹，因此当 ProfileProvider 中的 MoveProfileToCorrectPlace 方法被调用时，userprofile 被移动并且所有子文件夹都丢失了。

这是正常的 Sitecore Intranet 门户行为吗？有人遇到过这个问题吗？

# c - 是否可以直接将常量值写入二进制文件？

> ID：13821275
> 
> 赞同：4
> 
> 时间：2012-12-11T13:17:44.493
> 
> 标签：c, binaryfiles, fwrite, stdio

我知道

```
fwrite(&variable,sizeof(datatype),<count>,<filepointer>); 
```

将数据写入二进制文件。但是如果我想将字符'c'直接写入二进制文件（不使用缓冲区变量）怎么办。放不下

```
 fwrite(&'c',sizeof(datatype),<count>,<filepointer>); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T13:19:18.420

使用 putc 或 fputc （两者具有相同的签名）：

```
int putc(int c, FILE *stream); 
```

如果您对 putc 与 fputc 感兴趣，请查看下面的评论，他们比我更了解 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:19:58.020

在`C`中，您无法获得常量的地址。所以不，你不能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:20:09.883

尝试

```
fwrite("c",sizeof(datatype),<count>,<filepointer>); 
```

例如

```
fwrite("c",1,1,fileptr); 
```

注意：我自己没有测试过。但我怀疑这应该可行。

埃里克评论后添加：

```
fwrite((char []){'c'}, 1, 1, fileptr); 
```

^^这种方法的优点是，就像 char 一样，您也可以插入整数或任何其他标准数据类型。

# macos - Cocoa - 添加菜单以支持版本？（就像在 TextEdit 中一样）

> ID：13821282
> 
> 赞同：0
> 
> 时间：2012-12-11T13:18:01.250
> 
> 标签：macos, cocoa, nsdocument, autosave

在 TextEdit 中，如果您单击文件名旁边的小下拉菜单，您会看到一个菜单，其中显示了几个条目，包括`Rename`、`Move to iCloud`、`Move To`、`Duplicate`，`Lock`最后是`Browse All Versions`.

![文本编辑](../Images/ecb1620746475e096974572f368fa380.png)

我想知道如何支持这个菜单？在我的应用程序上，我有披露指标，但没有得到我单击它的菜单。我需要通过代码添加此菜单吗？如果是这样，我假设我需要以某种方式将其链接到窗口，但我看不到这样做的合适位置。关于我所缺少的任何建议？

![SQL](../Images/4f4ca2ab498f21eed49e127337b9cd41.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:09:09.990

在基于文档的应用程序中使用 NSDocument 子类时，您可以“免费”获得此功能。只要您已经实现了此处列出的所有内容：

[http://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/DocBasedAppProgrammingGuideForOSX/StandardBehaviors/StandardBehaviors.html](http://developer.apple.com/library/mac/#documentation/DataManagement/Conceptual/DocBasedAppProgrammingGuideForOSX/StandardBehaviors/StandardBehaviors.html)

...版本控制应该“自动”工作，因为它直接受到实施自动保存的影响。

需要考虑的事项：

1.  您所针对的最低操作系统版本是多少？
2.  您是否正在自定义与 Window 的标题栏有关的任何内容？
3.  您的 NSDocument 子类是否实现了现代（非弃用）读/写方法，或者您是否在做一些“旧的或时髦的”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:41:17.683

弄清楚了。我压倒一切：

`- (void)menuNeedsUpdate:(NSMenu *)menu`

我不需要重写此方法，因此我将其删除。一旦我这样做了，我的菜单就开始工作了。

# reporting-services - 如何为表达式字段添加总计数列

> ID：13821283
> 
> 赞同：4
> 
> 时间：2012-12-11T13:18:00.850
> 
> 标签：reporting-services, ssrs-tablix, ssrs-grouping

如果我在 SSRS 中有一个表（tablix），并且其中一列是一个简单的表达式：

`=Fields!NumPorts.Value - Fields!PortsUsedLastQuarter.Value`

那么如何为此添加“总计数”列？我无法添加总列，它是灰色的，因为它是一个表达式而不是一个简单的字段。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T14:54:04.997

有几种不同的方法可以做到这一点。我认为最通用的方法是：

1.  右键单击要总计的分组。听起来在您的情况下，这将是详细信息组。（您可以在设计器窗口的“行组”窗格中找到组列表。

2.  选择“添加总计 -> 之前”（或之后）

    您现在应该有一行可以将总计添加到其中。SSRS 试图找出要插入的总数。如果这些是合适的，请留下它们，但在您的情况下，我们将需要编辑单元格的表达式。

3.  在您想要总计的单元格中，右键单击并选择表达式。（对于单元格中的占位符也可以遵循相同的过程。）

4.  在表达式窗口中，输入`=SUM(Fields!NumPorts.Value - Fields!PortsUsedLastQuarter.Value)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T15:13:44.783

为什么不尝试`=Sum(Fields!NumPorts.Value - Fields!PortsUsedLastQuarter.Value)`添加总计

如果它不起作用那么：

首先您可以尝试使用一些不显示为灰色的**字段值，然后将列的值更改回您的表达式**
`=Fields!NumPorts.Value - Fields!PortsUsedLastQuarter.Value`

并将“加总”单元格添加到表达式中：
`=Sum(Fields!NumPorts.Value - Fields!PortsUsedLastQuarter.Value)`

高温高压

# delphi - 如何从 TVirtualStringTree 中删除所有节点？

> ID：13821284
> 
> 赞同：3
> 
> 时间：2012-12-11T13:18:05.547
> 
> 标签：delphi, delphi-xe, virtualtreeview, tvirtualstringtree

如何在事件处理程序中删除所有节点，包括 VirtualStringTree 后代，关闭包含 VirtualStringTree 的表单？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T13:19:17.853

要从 a`TVirtualStringTree`或其后代中删除所有节点，请使用该`Clear`方法（但请注意，该`Clear`方法是虚拟的，可以被某些后代覆盖。但是，实现者应保持此方法的原始目的，即清除树。如果没有，那么在我看来，这只是一个错误的实现：

```
procedure TForm1.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  VirtualStringTree1.Clear;
end; 
```

# python - Windows 应用程序的自动安装程序？

> ID：13821290
> 
> 赞同：0
> 
> 时间：2012-12-11T13:18:40.813
> 
> 标签：python, windows

如何为任何应用程序编写自动安装程序？假设我有 firefox 安装程序，所以我想运行我的 .py 文件，它会自动在我的计算机上安装 firefox。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:06:50.590

使用 python 自动安装 Firefox 你可以这样做：

```
import urllib, os
urllib.urlretrieve("https://download.mozilla.org/?product=firefox-17.0.1&os=win&lang=en-US", "Firefox.exe")
os.system("Firefox.exe /S") 
```

你不必使用`os.system`，但你得到了一般的想法。有关静默安装 Firefox 的更多信息，请参见此处：[https ://wiki.mozilla.org/Installer:Command_Line_Arguments](https://wiki.mozilla.org/Installer:Command_Line_Arguments)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:11:57.440

尝试[pywinauto](http://pywinauto.googlecode.com/hg/pywinauto/docs/contents.html#contents-root)或通过[win32com自动化](http://docs.activestate.com/activepython/2.4/pywin32/html/com/win32com/HTML/docindex.html)[AutoIT](http://www.autoitscript.com/site/autoit/)的 COM 服务器

# ruby-on-rails - 控制器中表单的错误值

> ID：13821293
> 
> 赞同：1
> 
> 时间：2012-12-11T13:18:48.293
> 
> 标签：ruby-on-rails, forms, view, controller, null

这是一个愚蠢的问题，但即使经过一些研究，我也无法解决这个问题。在我的观点中，我有一个表格，可以让我从访问者那里获得价值。我试图在我的控制器中以表单形式提交该值。而且我不明白为什么，但似乎我用这段代码得到的唯一值是 0.. 我想我没有使用正确的合成器。这是我的视图代码：

```
.mybox
            %p Tentative de vote.
            = @useful_tool.nbofrate
            = @useful_tool.nbtotal
            = @useful_tool.newrate
            = form_for(@useful_tool) do |f|
              = f.select :newrate, [['1 étoile', 1],['2 étoiles', 2],['3 étoiles', 3],['4 étoiles', 4],['5 étoiles', 5]]
              = f.submit 
```

这是我的控制器的代码：

```
 def update
    @useful_tool = UsefulTool.find_by_slug!(params[:id])
    @useful_tool.nbofrate = @useful_tool.nbofrate + 1
    value = params[:newrate]
    @useful_tool.nbtotal += value.to_i
    @useful_tool.rating = @useful_tool.nbtotal / @useful_tool.nbofrate
    update! { url_for(action: "index") }
  end 
```

因为显然价值必须为零，我不明白为什么。任何帮助都会非常感激。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:26:56.810

尝试`to_s.to_d`与 nbtotal 和 value 一起使用。

或者您可以明确检查 nil

# jquery - .on('点击', .text?

> ID：13821302
> 
> 赞同：-1
> 
> 时间：2012-12-11T13:19:15.570
> 
> 标签：jquery, click

在这个论坛好人（Jai，再次感谢）的帮助下，我们提出了以下代码：

```
var $someparam = 'is';
$('span').text($someparam);
$(document).on('click', 'span', function() {
    $(".somediv").not(":contains('" + $someparam + "')").addClass("hidden");
}); 
```

这是操场：http: [//jsfiddle.net/DwAAQ/](http://jsfiddle.net/DwAAQ/)

代码的基本作用是获取一个变量 (="is")，用该变量中的文本替换 span 内容，并在单击此文本时隐藏不包含变量中文本的 div。对我来说，它有两个主要问题：我可以在页面中插入 span，可以编辑 css，并且代码最终会替换页面上的所有 span。

问题是：是否可以修改此代码，使其写入文本（=$someparam 变量，或上例中的“is”）并使其可单击以执行 jquery？即一切都将包含在这段代码中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:30:51.750

您必须附加跨度（例如附加到主体），然后它应该可以工作，因为那将是那里的“最后一个”。

例子：

```
var $someparam = 'is';
$('body').append('<span>spanner</span>');
$('span :last').text($someparam);
$(document).on('click', 'span :last', function() {
    $(".somediv").not(":contains('" + $someparam + "')").addClass("hidden");
}); 
```

编辑：请注意，这具有相同的净效果：

```
var $someparam = 'is';
$('body').append('<span>' + $someparam + '</span>');
$(document).on('click', 'span :last', function() {
    $(".somediv").not(":contains('" + $someparam + "')").addClass("hidden");
}); 
```

这是最有效的：使用 id

```
var $someparam = 'is';
$('body').append('<span id="myspan">' + $someparam + '</span>');
$('#myspan').on('click', function() {
    $(".somediv").not(":contains('" + $someparam + "')").addClass("hidden");
}); 
```

并且，使用参数作为 id 的一部分：

```
var $someparam = 'is';
$('body').append('<span id="myspan' + $someparam + '">' + $someparam + '</span>');
$('#myspan'+ $someparam ).on('click', function() {
    $(".somediv").not(":contains('" + $someparam + "')").addClass("hidden");
}); 
```

EDIT2：添加示例页面以及每个页面的工作示例。这有点做作，但显示了上述每一项以及通过按钮添加的一个动态跨度，该按钮可单击任意次数。（点击1-4，然后新建span看看效果）...

不，id 不能包含逗号，在允许的集合中只能包含“字母”（参见 html 规范）和数字，并且必须以非数字开头 [http://jsfiddle.net/Cecfu/1/](http://jsfiddle.net/Cecfu/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:29:41.067

如果我对您的理解正确，您希望将某个文本放置在某个跨度中（不是在所有跨度中），然后单击其中一个您想要隐藏所有不包含该 div 文本的 div.somediv 元素的跨度?

试试这个

```
$('span#myspan').text('is');
$('span#myotherspan').text('what');
$(document).on('click', 'span', function() {
    var theText = $(this).text();
    $('.somediv').not(':contains("' + theText + '")').addClass('hidden');
}); 
```

# php - 如果可能的话，如何多个内部连接同一个表但哪些不同的外键？

> ID：13821308
> 
> 赞同：1
> 
> 时间：2012-12-11T13:19:23.433
> 
> 标签：php, mysql, reference, foreign-keys

我有一个带有双外键引用的表，`gebruikersid`现在我有点一团糟。首先，“gebruiker”是荷兰语中的“用户”，以避免误解。

我现在使用的查询是：

```
$uploadeditems = "
                SELECT *
                FROM file f
                    INNER JOIN gebruikers g on f.empid = g.gebruikersid
                WHERE g.gebruikersid = ".$GET['employeeid']."
                "; 
```

但我实际上需要做的是这样的事情：

```
 $uploadeditems = "
                        SELECT *
                        FROM file f
                            INNER JOIN gebruikers on f.empid = gebruikers.gebruikersid as 'gebruikers.employee'
                            INNER JOIN gebruikers on f.gebruikersid = gebruikers.gebruikersid as 'gebruikers.uploader'
                        WHERE gebruikers.employee= ".$GET['employeeid']."
                        "; 
```

简短的代码，所以你明白我的意思：

表 FILE 有`gebruikersid`，谁是文件的上传者， ，谁是`empid`这个文件必须链接的那个。（gebruiker.gebruikersid 的两个 FK）。

例如，我的数据库中有：

```
fileid  filename    filesize    filepath           custid   empid   gebruikersid    filedescription

228     Test.         60    files/employees/113/    NULL     113    70 
```

所以我基本上正在尝试的是有两个参考：

当我通过内部加入时，`f.empid`我希望能够返回引用`username`的`f.empid & gebruiker.gebruikersid`，同时我希望能够返回引用`username`的`f.gebruikersid & gebruikers.gebruikersid`，所以我可以返回的是：

的文件列表`user X`：
`File A`，由 上传`user Y`。
`File B`, 上传者`user Z`.
等等...

现在我得到： :的
文件列表，由 . 上传。, 上传者. 即使数据库中的一切都很好。`user X`
`File A``user X`
`File B``user X`

*编辑*因为我之前有一张员工表（现在所有员工都是用户），所以我的代号搞砸了，抱歉可能有点困难。一旦我可以继续前进，就需要弄清楚这一切。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:26:03.097

如果您多次加入同一个表，则至少需要为其中一个实例使用别名。然后，您必须使用别名为您从表中选择的所有字段添加前缀。

例如：

```
SELECT f.*, employee.FIELD1 as e_FIELD1, uploader.FIELD1 as u_FIELD1 ...

FROM   file f

       INNER JOIN gebruikers as employee
       on f.empid = employee.gebruikersid

       INNER JOIN gebruikers as uploader
       on f.gebruikersid = uploader.gebruikersid

WHERE gebruikers.employee= ".$GET['employeeid']." 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:34:38.530

我同意上面的答案，但你应该在每个连接中用 g1 和 g2 替换 gebruikers。对我来说，最好用外连接代替内连接，因为如果你的表中的 empid 可以为空，那么这段脚本将不会返回任何内容。

# c# - 将 InkPresenter 剪切到绘图区域

> ID：13821310
> 
> 赞同：1
> 
> 时间：2012-12-11T13:19:27.493
> 
> 标签：c#, windows-phone-7

我正在尝试在 windows phone 7.1 中捕获签名。

我可以在屏幕上绘图，但我不能将绘图区域限制为 InkPresenter 控件，除非在 mousemove 事件中添加一些处理。

如何使用 XAML 限制绘图区域，或者这是不可能的？

**XAML 代码**

```
<InkPresenter  Name="inkTest" Background="White"  MinHeight="180" MinWidth="250" /> 
```

**代码背后**

```
private Stroke _currentStroke;

private void inkTest_MouseLeftButtonUp(object sender, MouseButtonEventArgs e)
{
    _currentStroke = null;
}

private void inkTest_MouseMove(object sender, MouseEventArgs e)
{
    if (_currentStroke == null) return;
        //HACK: want to set this in XAML
        var position = e.GetPosition(inkTest);
        if (position.X <= inkTest.ActualWidth &&
            position.Y <= inkTest.ActualHeight)

            _currentStroke.StylusPoints.Add(GetStylusPoint(position));
}

private void inkTest_MouseLeftButtonDown(object sender, MouseButtonEventArgs e)
{
    inkTest.CaptureMouse();
    _currentStroke = new Stroke();
    _currentStroke.StylusPoints.Add(GetStylusPoint(e.GetPosition(inkTest)));
    _currentStroke.DrawingAttributes.Color = Colors.Blue;
    inkTest.Strokes.Add(_currentStroke);
}

private StylusPoint GetStylusPoint(Point position)
{
    return new StylusPoint(position.X, position.Y);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:50:34.887

未经测试，但尝试剪辑：

```
<InkPresenter  Name="inkTest" Background="White"  MinHeight="180" MinWidth="250">
    <InkPresenter.Clip>
         <RectangleGeometry Rect="0,0,180,250"/>  
    </InkPresenter.Clip>
</InkPresenter> 
```

将 的边界更改为`RectangleGeometry`您想要的（`RectangleGeometry`如果您需要不同的形状，则更改元素本身）。

# regex - 用于识别具有以下模式的文件的正则表达式 az.4.0.0.119.tgz

> ID：13821314
> 
> 赞同：1
> 
> 时间：2012-12-11T13:19:32.937
> 
> 标签：regex, actionscript

我正在尝试找到一个正则表达式来识别模式为 az.4.0.0.119.tgz 的文件。我试过下面的正则表达式：

```
([a-z]+)[.][0-9]{0,3}[.][0-9]{0,3}[.][0-9]{0,3}[.]tgz 
```

但是，没有运气。谁能指出我正确的方向。

问候， Shreyas

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:22:35.547

您只是忘记了一个数字部分：

```
([a-z]+)[.][0-9]{0,3}[.][0-9]{0,3}[.][0-9]{0,3}[.][0-9]{0,3}[.]tgz 
```

或者

```
([a-z]+)[.]([0-9]{0,3}[.]){4}tgz 
```

根据您使用正则表达式的位置和方式，您可能希望将其括在`^...$`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:23:34.547

最好使用这样的简单正则表达式：

```
^([a-z]+)\.(?:[0-9]+\.)+tgz$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:24:05.970

你的模式有 4 个 chiffers 组，你的正则表达式只有 3 个。

# php - Login.php 代码在登录过程中未检索电子邮件

> ID：13821317
> 
> 赞同：1
> 
> 时间：2012-12-11T13:19:36.267
> 
> 标签：php, mysql, sql, login, phpmyadmin

我正在使用登录/注销/会员页面的在线视频示例，试图为我的网站实现它。我有一个来自 justhost 的实时服务器，我创建了一个数据库并将一些虚拟用户信息放入我的用户表中。我创建了一个 connect.php 文件，它就是这样做的，如果它会连接到我的数据库并且它可以工作，我会发出一条成功消息。当我尝试登录以显示会员页面的链接时，我不断收到一条错误消息，提示我输入的电子邮件未找到，但该电子邮件在数据库表中。我究竟做错了什么？这是 login.php 文件，很抱歉它的长度。

```
<?php
error_reporting (E_ALL ^ E_NOTICE);
session_start();
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Member System - Login</title>
</head>
<body>

    <?php

        $form = "<form action='./login.php' method='post'>
        <table>
        <tr>
            <td>Email:</td>
            <td><input type='text' name='user'/></td>
        </tr>
        <tr>
            <td>Password:</td>
            <td><input type='password' name='password'/></td>
        </tr>
        <tr>
            <td></td>
            <td><input type='submit' name='loginbtn' value='Login' /></td>
        </tr>
        </table>
        </form>";

    if($_POST['loginbtn']){
        $email = $_POST['user'];
        $password = $_POST['password'];

        if ($email){
            if ($password){
                require("connect.php");

                $password = md5(md5("sdf5jkl".$password."jfdkSDf4"));

                $query = mysql_query("SELECT * FROM users WHERE email='$email'");
                $numrows = mysql_num_rows($query);
                if($numrows == 1){
                    $row = mysql_fetch_assoc($query);
                    $dbid = $row['id'];
                    $dbpass = $row['password'];
                    $dbemail = $row['email'];
                    $dbactive = $row['active'];

                    if($password == $dbpass){
                        if($dbactive == 1){
                            //set session info
                            $_SESSION['id'] = $dbid;
                            $_SESSION['email'] = $dbemail;

                            echo "You have been logged in as <b>$dbemail</b>.  <a href='./member.php'>Click here</a> to go to the member page.";

                        }
                        else
                            echo "You must activate your account to login. $form";
                    }
                    else
                        echo "You did not enter the correct password. $form";
                }
                else
                    echo "The email you entered was not found. $form";

                mysql_close();
            }
            else
                echo "You must enter your password. $form";
        }
        else
            echo "You must enter your email. $form";
    }
    else
        echo $form;

    ?>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:48:23.730

About halfway down your code, you have these lines:

```
$query = mysql_query("SELECT * FROM users WHERE email='$email'");
$numrows = mysql_num_rows($query); 
```

Let's change it temporarily to this:

```
$sql = "SELECT * FROM users WHERE email='$email'";
echo '<pre>'. $sql .'</pre>';
$query = mysql_query($sql);
$numrows = mysql_num_rows($query);
echo '<pre>'. $numrows .'</pre>'; 
```

When you try to log in now, you'll probably see something like this at the top of your page:

```
SELECT * FROM users WHERE email='thenamethatijusttypedin'
2 
```

If the number is equal to 1, then your code *should* work as you wrote it. If the number is something else, then you can learn more by copying the SQL query above it, then running it in your database platform (i.e.: phpMyAdmin).

As others have mentioned previously, you should clean up your input. You can remove leading and trailing whitespace with the `trim($email);` command.

Once you feel a bit more confident with coding, you should look into a database query tool called [PDO](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/). Right now, your query is vulnerable to something called SQL Injection. If I were to put an apostrophe in the `user` field, then the query would break. Hackers can use this to break into your website. PDO protects against this and makes writing queries a bit easier.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:49:23.680

I don't see anything wrong with your code in terms of not managing to find the user. Here are a few things to try.

```
$email = $_POST['user'];
$password = $_POST['password']; 
```

Should be:

```
$email = mysql_real_escape_string(trim($_POST['user']));
$password = mysql_real_escape_string(trim($_POST['password'])); 
```

`trim()` will remove any extra spaces that could be messing up the query and `mysql_real_escape_string()` escapes special characters.

If you are getting the the data correctly by checking `print_r($_POST)` and the query looks fine by running `echo "SELECT * FROM users WHERE email='$email'";` or running `SELECT * FROM users WHERE email='your_email'` in phpmyadmin, then maybe you have duplicate emails in your user table? If you do, you shouldn't. Try removing the duplicate. You should also check the password at the same time you're checking the email. Here's an example:

`$query = mysql_query("SELECT * FROM users WHERE email = '$email' AND password = '$password'");`

# objective-c - 动态 UITable 单元格高度

> ID：13821318
> 
> 赞同：0
> 
> 时间：2012-12-11T13:19:40.550
> 
> 标签：objective-c, uitableview

我有一个`UITableView`自定义单元格。我需要在单元格中显示标题、地址、邮编、电话、电子邮件、网站和描述。所有这些信息都来自网络服务器。我能够显示来自网络服务器的内容。但是，如果任何内容为空，则该内容应该存在的间隙，如果描述太长，我将无法显示所有内容。如何根据服务器的内容更改单元格的高度？请帮忙。

例如：内容打印如下：标题地址邮编电话...

但是，如果 Address 为 nil，那么它看起来像：Title

邮编电话...

我有`tableview:heightForRowAtIndexPath`方法，但我无法根据单元格内容更新单元格高度。抱歉问题格式不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T22:59:32.707

单元格调整大小可能会变得相当复杂，因此我建议您简单地使用表格视图框架，例如“Sensible TableView”，其中所有单元格都会自动调整大小以适应内容。我相信他们现在也有免费版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:41:02.580

您的 tableView:heightForRowAtIndexPath: 调用将需要考虑丢失的数据以及单元格的所有其余部分将如何重新布局以缩小它留下的差距。因此，您的实际通话在这里将很重要。

不过，新的 facebook 应用程序在这里做了一个巧妙的技巧，以节省您每次调用它的时间。它会在后台计算所有单元格高度，就在下载之后，在将内容呈现给用户之前，将其与数据本身一起存储在数据存储中。这意味着实际的表格单元格渲染非常快速和流畅，因为您不需要在每次应用程序运行/单元格重用时重新布局/重新计算单元格高度和布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:22:46.990

您可以使用此委托方法设置每个单元格的高度

```
 - (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
        {
           NSString *text = [yourArray objectAtIndex:indexPath.row];// here just use your data array which you get from server

           CGSize mTempSize = [text sizeWithFont:[UIFont fontWithName:fontName size:fontSize] constrainedToSize:constrainedToSize lineBreakMode:UILineBreakModeWordWrap];
           return mTempSize.height ;
       } 
```

我希望这可以帮助你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T13:36:07.050

首先，您需要根据其文本长度设置标签的大小。有许多`sizeWithFont`方法可用于获取字符串的大小。请参阅[Apple 开发人员文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html)

如果您有单行标签，您可以使用其中最简单的标签`– sizeWithFont:`。但如果你有多行标签，你应该使用`– sizeWithFont:constrainedToSize:`. 此方法可让您指定标签的最大尺寸。

其次，您必须使用为您的单元格返回计算出的高度`tableView:heightForRowAtIndexPath:`

希望这对您有所帮助。

# jquery - 如何检查formcollection中的输入类型=“文本”是否为空白或通过jquery在最小行中填充

> ID：13821323
> 
> 赞同：-1
> 
> 时间：2012-12-11T13:20:10.863
> 
> 标签：jquery

我有表单集合和 5 个输入类型 =“文本”，具有不同的 ID 和 1 个提交按钮，例如

```
<form id="frmSubmitSupplier" method="post">
 <input type="text" id="txtCompanyName" name="companyname" />     
<input type="text" id="txtFirstName" name="firstname" />   
 <input type="text" id="txtLastName" name="lastname" />
<input type="text" id="txtAdd1" name="address1" />
 <input type="text" id="txtCity" name="city" />
<input id="btnSupplierSave" type="submit" value="Save"/>
</form> 
```

在 jquery 代码中，我想为所有空白文本框设置 if 条件，例如

```
$('#frmSubmitSupplier').live('submit', function (e) {
  i want to check here that if all textboxes are empty then any alert but in only single line.. how to check
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:25:07.220

除非您希望它不可读，否则您不能在一行中执行此操作。您必须遍历所有输入并检查它们的值。

CSS：

```
.error {
    border: 1px solid red;
} 
```

JS：

```
$('#frmSubmitSupplier').live('submit', function (e) {
    var error = false;
    $(this).find('input[type="text"]').each(function(i, v) {
        if($(v).val() == "") {
            $(v).addClass('error');
            error = true;
        }
    });
    if(error) {
        e.preventDefault();
        //or you can alert('There are unfilled fields!');
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:26:09.617

在提交时尝试以下操作

```
flag = true;

    $("input[type=text]").each(){
      if($(this).val() == ""){
        flag = false;
      }
    }

    if(flag == false){
    alert('Text box is emtpy');
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:26:49.990

你可以这样使用

```
$("input [type='text']").each(function(){
if ($(this.id).val() == '' || $(this.id).val()==null)
alert("Please fill the empty field");
}
); 
```

# ios - Restkit嵌套JSON mapRelationship不起作用

> ID：13821328
> 
> 赞同：1
> 
> 时间：2012-12-11T13:20:44.170
> 
> 标签：ios, restkit

**我发现了我的错误，所以请滚动到更新以查看我做错了什么以及我在使用 RestKit 时遇到的其他问题 :)**

我对以下 JSON 有疑问：

[ {“id”：1，“latTitle”：“Aale”，“latExamplesString”：“”，“previewImg”：1，“lastModified”：null，“localeCategory”：{“id”：1，“catID”： 1，“langCode”：“de”，“localeTitle”：“Aale”，“localeExampleString”：“Gefleckter Schlangenaal，Ringelschlangenaal”}，“elements”：null}]

如您所见，localeCategory 是一个嵌套的属性列表，因此我为映射它做了以下操作：

```
 //creating Mapping for localeCategory
    RKManagedObjectMapping *localeMapping = [RKManagedObjectMapping mappingForClass:[LocaleCategory class] inManagedObjectStore:objectStore];
    localeMapping.primaryKeyAttribute = @"lcatId";
    [localeMapping mapKeyPath:@"id" toAttribute:@"lcatId"];
    [localeMapping mapKeyPath:@"catId" toAttribute:@"catId"];
    [localeMapping mapKeyPath:@"langCode" toAttribute:@"langCode"];
    [localeMapping mapKeyPath:@"localeTitle" toAttribute:@"localeTitle"];
    [localeMapping mapKeyPath:@"localeExampleString" toAttribute:@"localeExampleString"];

    //creating Mapping for Category
    RKManagedObjectMapping *categoryMapping = [RKManagedObjectMapping mappingForClass:[Category class] inManagedObjectStore:objectStore];
    categoryMapping.primaryKeyAttribute = @"catId";
    [categoryMapping mapKeyPath:@"id" toAttribute:@"catId"];
    [categoryMapping mapKeyPath:@"latTitle" toAttribute:@"latTitle"];
    [categoryMapping mapKeyPath:@"latExamplesString" toAttribute:@"latExamplesString"];
    [categoryMapping mapKeyPath:@"previewImg" toAttribute:@"previewImg"];
    [categoryMapping mapKeyPath:@"lastModified" toAttribute:@"lastModified"];
    [categoryMapping mapKeyPath:@"elements" toAttribute:@"elements"];

    [categoryMapping mapKeyPath:@"localeCategory" toRelationship:@"localeCategory" withMapping:localeMapping];

    //[categoryMapping mapRelationship:@"localeCategory" withMapping:localeMapping];

    [self setObjectMapping:categoryMapping forResourcePathPattern:@"data/de/category"]; 
```

我的问题如下：

当我想将JSON文件中的数据列出到我的TableView中时，localeCategory的所有属性都是空的，例如我想设置一个单元格的标题：

```
Category *cat = [data objectAtIndex:absoluteRow];
    LocaleCategory *loccat = [cat localeCategory];
    NSLog(@"gotCategory, check localeCat: %@", loccat.localeTitle);
cell.catTitle.text = cat.localeCategory.localeTitle; 
```

我已经查看了 RestKit 的每个 SampleCode 以及堆栈溢出的相关主题，但我找不到我的错误！

预先感谢您的每一个帮助:)

干杯，麦克斯

更新：我在使用 FetchRequest 时也遇到了麻烦：

```
NSLog(@"fetchDataFromDataStore");
NSFetchRequest *request = [[[RKObjectManager sharedManager] mappingProvider] fetchRequestForResourcePath:self.resourcePath];
NSLog(@"request");
self.data = [Category objectsWithFetchRequest:request]; 
```

最终出现此错误：

> 'executeFetchRequest:error: 获取请求必须有一个实体。

我还想知道的是我不能使用这个：

```
Category *firstCategory = [Category objectWithPrimaryKeyValue:[NSNumber numberWithInt:1]]; 
```

它说不知道选择器的类方法...

我希望有人能帮助我找出我的错误，看起来我在使用 Reskit 和 CoreData 进行设置的一般过程中犯了一个错误！

我期待您的帮助，非常感谢！

**谢谢rdelmar！**我已经修复了它，但我认为这不是问题。我第一次使用没有 CoreData 的 RestKit，所以我在 LocaleCategory 类中使​​用了@synthesize 而不是 @dynamic :) 我所有其他类都已经切换到动态，所以是的，这是一个愚蠢的错误！:)

**无论如何，我仍然有 FetchRequest 的问题！如果有人有想法，我非常感谢！**

最大限度

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T13:25:22.573

好的，我现在可以使用 RestKit 了 :)

这是我的问题的解决方案：

> “executeFetchRequest：错误：获取请求必须有一个实体。”

```
 [self setObjectMapping:categoryMapping forResourcePathPattern:@"category" withFetchRequestBlock:^NSFetchRequest *(NSString *resourcePath) {
        NSFetchRequest *fetchRequest = [Category fetchRequest];
        fetchRequest.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"latTitle" ascending:YES]];
        return fetchRequest;
    }]; 
```

和电话：

```
 NSFetchRequest *request = [[[RKObjectManager sharedManager] mappingProvider] fetchRequestForResourcePath:@"category"];
self.data = [Category objectsWithFetchRequest:request]; 
```

当您知道如何时，这很容易:)

# php - html+ SQL 查询搜索 我正在尝试基于 <select multiple="multiple" name="chkUnr[]">进行搜索 我通过运行代码从 select 中获取值：for($i=0;$i<计数($_POST["chkUnr"]);$i++) { if($_POST["chkUnr"][$i] != "") { $search_country = $_POST["chkUnr"][$i]; } $查询=“”；$qu ID：13821331 赞同：2 时间：2012-12-11T13:21:00.633 标签：php, html, mysql, sql 回答 #1 赞同：2 时间：2012-12-11T14:28:20.560 这里的问题（以及另一个答案）是该in子句被引号包围，因此不会产生我们想要的结果。我们需要有效地将数组传递给查询。您的代码也容易受到 sql injection 的攻击。我强烈建议转向 PDO/prepared statements。我为这些国家增加了一点保护，但这绝不是万无一失的。 function prepareForSql($value, $key) { return addslashes($value); } array_walk($_POST["chkUnr"], "prepareForSql"); $search_country = "'" . implode("','", $_POST["chkUnr"]) . "'"; $query = ""; $query .= "SELECT users.* FROM users"; if (isset($_POST['singles_online']) ? $_POST['singles_online'] : 0 == 1) { $query .= " LEFT JOIN online ON online.user_id = users.id"; } $query .= " WHERE"; if (isset($_POST['vip']) ? $_POST['vip'] : 0 == 1) { $query .= " users.vip = 1 AND"; } if (isset($_POST['profile_image']) ? $_POST['profile_image'] : 0 == 2) { $query .= " users.profile_image = '2' AND"; } if (isset($_POST['singles_online']) ? $_POST['singles_online'] : 0 == 1) { $query .= " online.is_online = 1 AND"; } $query .= " (id NOT IN (SELECT user_id FROM users_blocked WHERE blocked_id = '$user_id')) AND"; $query .= " (users.user_age >= '$age_from' AND users.user_age <= '$age_to') AND"; $query .= " (users.gender = '$gender_search') AND"; $query .= " users.country IN ($search_country)"; $search_query = mysql_query($query); 回答 #2 赞同：1 时间：2012-12-11T13:35:52.310 尝试 $search_country = implode(',',array_unique($_POST["chkUnr"])); $query = ""; $query .= "SELECT users.* FROM users"; if (isset($_POST['singles_online']) ? $_POST['singles_online'] : 0 == 1) { $query .= " LEFT JOIN online ON online.user_id = users.id"; } $query .= " WHERE"; if (isset($_POST['vip']) ? $_POST['vip'] : 0 == 1) { $query .= " users.vip = 1 AND"; } if (isset($_POST['profile_image']) ? $_POST['profile_image'] : 0 == 2) { $query .= " users.profile_image = '2' AND"; } if (isset($_POST['singles_online']) ? $_POST['singles_online'] : 0 == 1) { $query .= " online.is_online = 1 AND"; } $query .= " (id NOT IN (SELECT user_id FROM users_blocked WHERE blocked_id = '$user_id')) AND"; $query .= " (users.user_age >= '$age_from' AND users.user_age <= '$age_to') AND"; $query .= " (users.gender = '$gender_search') AND"; $query .= " users.country IN ('$search_country')"; $search_query = mysql_query($query);</select>

# types - 为什么使用 Glib 数据类型更好（例如 `gint` 而不是 `int`）？

> ID：13821332
> 
> 赞同：16
> 
> 时间：2012-12-11T13:21:18.333
> 
> 标签：types, typedef, glib

> **可能重复：**
> [为什么 glib 重新定义类型？](https://stackoverflow.com/questions/1819561/why-does-glib-redefine-types)

在 GTK+ 2.0 教程中，我可以[在这里](http://developer.gnome.org/gtk-tutorial/stable/c325.html)阅读以下关于数据类型的声明：

> 您可能在前面的示例中注意到了一些需要解释的事情。您看到的 gint、gchar 等分别是 int 和 char 的 typedef，它们是 GLib 系统的一部分。**这样做是为了在进行计算时绕过对简单数据类型大小的讨厌的依赖。**

我不明白这个解释的最后一部分。为什么使用 Glib 数据类型更好？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T14:01:09.410

正如教程中提到的，这是为了确保可移植性。在新系统上构建使用 glib 的代码时，您只需使用 typedefs 修改头文件，而不是使用这些类型的代码。

C99 标准添加了固定宽度类型（int8_t、uint32_t 等），这将使 glib 类型过时，但 glib 早于 C99 标准，这可能是它拥有自己的类型集的原因。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T14:04:23.220

C 数据类型是高度平台和特定于实现的，例如 int 通常是通用寄存器的大小，char 具有与字节一样多的位，long 仅表示不小于 int（但至少 32 位）short int至少是 2 个字节，但实际上不需要小于 int

因此，使用一些正确命名的短变量有利于可移植性。

正如 GTK 2.0 教程所说：

> 一个很好的例子是“gint32”，对于任何给定的平台，无论是 64 位 alpha 还是 32 位 i386，它都将被 typedef 为 32 位整数。typedef 非常简单直观。它们都在 glib/glib.h 中定义（包含在 gtk.h 中）。

编辑：正如迈克尔所说，C99 标准通过提供新类型使它们过时

# php - PHP - 返回数组中的第一个图像而不是全部？

> ID：13821335
> 
> 赞同：2
> 
> 时间：2012-12-11T13:21:24.637
> 
> 标签：php, arrays

我正在使用以下代码循环遍历数组中的所有图像，效果很好，但我希望能够只返回数组中的第一个图像。谁能指出我正确的方向？

```
<?php   
    $books = get_post_meta( $post->ID, 'Images', true );
        foreach( $books as $book){
        $image_id = $book['single_image'];
        echo '<img src="';
        echo wp_get_attachment_url( $image_id );
        echo '" />';
        }
    ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:24:18.953

如果它是一个数值数组，只需从索引 0 中获取值。比如：

```
$books = get_post_meta($post->ID, 'Images', true);
$image_id = $books[0]['single_image']; 
```

# garbage-collection - 一个简单用例的 JVM GC 设置

> ID：13821337
> 
> 赞同：5
> 
> 时间：2012-12-11T13:21:28.450
> 
> 标签：garbage-collection, jvm

我正在努力为我的 JVM 设置正确的设置。

这是用例：Tomcat 正在处理请求 (300req/s)。但是它们非常快（键值查找），所以我没有任何性能问题。一切都会正常工作，直到我必须每 3 小时刷新一次它提供的数据。你可以想象我有一个很大的 HashMap 而我只是在做查找。在数据重新加载期间，创建一个临时 HashMap，然后我交换它。我需要加载相当多的数据（每次大约 800MB 的内存）。

我遇到的问题是，在这些负载期间，Tomcat 不时停止响应。最初的问题是升级失败和 FullGC，但我通过调整设置解决了这些问题。

您可能会注意到，当 CMS 收集器启动时，我已经降低了价值。我不再遇到任何促销失败或类似的事情。年轻代相当小，以使次要收集快速。我增加了 SurvivorRatio 因为所有的请求对象都年轻而死，不应该自动提升到老年代。（正在加载的数据）。

但在数据加载期间，我仍然在 Tomcat 中看到 503 错误。在 gc.log 中，我的次要集合在此过程中开始变慢。与毫秒相比，它们现在以秒为单位。我已经尝试减慢加载过程以让 GC 喘口气，但我似乎没有工作......当我达到老一代的容量时，这个问题尤其成问题。CMS 启动，释放内存，然后分配非常慢。我不再在 gc.log 中看到任何错误。我能做些什么不同的事情？我知道碎片化可能是个问题，但我没有遇到晋升失败的情况。该机器是一个8核服务器。减少 GCThread 的数量是否有意义？为数据加载线程设置较低的线程优先级有意义吗？

有没有办法在后台定期启动 CMS 收集器？正在交换的数据实际上可以立即被垃圾收集。

我愿意接受任何建议！

这是我的 JVM 设置。

```
-Xms14g
-Xmx14g
-XX:+UseConcMarkSweepGC
-XX:+UseParNewGC
-XX:+AlwaysPreTouch 
-XX:MaxNewSize=256m
-XX:NewSize=256m 
-XX:MaxPermSize=128m 
-XX:PermSize=128m 
-XX:SurvivorRatio=24 
-XX:+UseCMSInitiatingOccupancyOnly 
-XX:CMSInitiatingOccupancyFraction=88 
-XX:+UseCompressedStrings 
-XX:+DisableExplicitGC 
```

JDK 1.6.33 雄猫 6

**gc.log 片段：**

第 7 行数据加载开始

20号线它停了

[http://safebin.net/9124](http://safebin.net/9124)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T19:50:56.740

查看附加的日志并看到次要 GC 时间的巨大增加让我相信您的机器承受着来自 JVM 以外的其他进程的极重负载。

我的理由是，当您的次要 GC 发生时，所有应用程序线程都将停止。因此，您的应用程序所做的任何事情都不应影响次要 GC 时间，因为您的新世代的大小是恒定的。

但是，如果在此期间机器上的其他进程有大量负载，GC 线程将竞争执行时间，您可能会看到这种行为。

当您的数据加载运行时，您能否检查其他进程的 CPU 使用率？

编辑：在日志上多看一点，我想出了另一种可能的解释。

似乎目标幸存者空间已满（ParNew 下降到恰好 10048K 每个“慢”GC）。这意味着对象被直接提升为老一代，这可能会减慢速度。我会尝试增加新一代的大小并降低幸存者比率。甚至可以尝试在根本不设置新生成大小或幸存率的情况下运行，看看 JVM 是如何设法优化这一点的（尽管要注意 JVM 通常在优化这样的突发方面做得很差）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T21:30:54.757

您的负载持续大约 90 秒，并且每 1 秒左右被一次 GC 中断，但是您有一个 14G 的堆，其稳定状态占用（假设周围的日志行是稳定状态）只有大约 5G，这意味着您有很多内存在运行浪费。我认为前面的答案看起来是正确的（基于提供的数据），当它说你的幸存者空间太小时。如果它合理的只是在其余时间进行查找，那么一个完全合理的策略将类似于

*   任期阈值 = 0（或 1）
*   eden 大小 > 2x 工作集，所以可能是 1.5-2G（即允许当前的实时数据和工作副本完全驻留在 eden 中）
*   终身的=剩下的

这里的重点是在加载阶段尝试并完全避免年轻收集。然而，0 的终身阈值意味着以前的版本可能是终身的，你最终会看到一个可能很长的收集来清理它。另一种选择可能是反过来，拥有足够大的任期以容纳 2-3 个版本的数据，其余的 eden 以尽量减少年轻收集的频率并帮助尽快收集终身.

最有效的方法实际上取决于应用程序在其余时间还做了什么。

顺便说一句，对于大堆来说，cms 触发器似乎相当高，如果你只开始收集 88%，那么在强制执行 fullgc 之前是否有时间完成工作？我想如果你实际上大部分时间都在做 v little 分配，那可能会很安全。

# c - 如何在我的 makefile 中指定 -rpath

> ID：13821341
> 
> 赞同：3
> 
> 时间：2012-12-11T13:21:45.947
> 
> 标签：c, linux, gcc

我不想使用 LD_LIBRARY_PATH，而是想通过`-rpath`makefile 中的选项指定库搜索路径。我怎样才能做到这一点？假设搜索路径是当前目录。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:28:52.143

你有三个选择：

*   使用 LDFLAGS 指定选项`ld`

*   为编译和链接创建单独的规则，您可以`-rpath=/what/ever`直接`ld`在此处parr

*   用于传播到链接器`-Wl,ldoption`。在你的情况下：`gcc``ldoption`

    `gcc ... -Wl,rpath=/what/ever ...`

请注意，LD_LIBRARY_PATH 为**动态**链接器/加载器 ( `ldd`) 服务，而不是为创建可执行文件 ( `ld`) 的链接器服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:29:00.197

The `-rpath` flag needs to be passed to the linker. Prefix all flags with `-Wl` to have gcc pass them to ld, e.g.

```
LDFLAGS = -Wl,-rpath -Wl,. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:28:20.007

例子

```
LDFLAGS += --rpath-link /home/hp/Desktop/staging_dir/target-mips_uClibc-0.9.30.1/root-brcmref/lib/ld-uClibc.so.0 
```

生成文件示例：

```
all: test

%.o: %.c
    $(CC) $(CFLAGS) -c -o $@ $^

test: test1.o test2.o
    $(CC) $(LDFLAGS) -o $@ $^ 
```

# sql - 如何查询列中的多个条目

> ID：13821343
> 
> 赞同：0
> 
> 时间：2012-12-11T13:21:45.357
> 
> 标签：sql, sql-server-2008

我有一个客户数据库，我正在寻找运行查询以查找在一天中使用多次的任何条码并仅输出条码...例如，如果条码 #1 在特定日期被扫描 3 次它将在数据库中显示 3 笔交易，全部带有条形码 #1... 这是我现在按日期搜索的基本查询...

```
Select *
FROM            Customers
WHERE        (dtCreated BETWEEN CONVERT(DATETIME, '2012-12-10 00:00:00', 102) AND CONVERT(DATETIME, '2012-12-11 00:00:00', 102)) AND (sBarcode = '1') 
```

我不想搜索条形码 1，而是想知道在 2012 年 12 月 10 日多次扫描的任何条形码 (sBarcode)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:29:29.147

从 table_name 中选择条形码，count(barcode) as cnt 其中 date = desired_date group by barcode HAVING (COUNT(*) > 1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:34:19.563

```
Select Count(barcode) counter
FROM  Customers
WHERE  (dtCreated BETWEEN CONVERT(DATETIME, '2012-12-10 00:00:00', 102) AND CONVERT(DATETIME, '2012-12-11 00:00:00', 102)) AND (sBarcode = '1')
group by barcode
having (COUNT(barcode) >= 1) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:25:17.390

只需删除最后一个 AND 语句？

编辑：好的。您必须按条形码分组，每天汇总。就这样。就像是：

```
SELECT *
WHERE (dtCreated BETWEEN CONVERT(DATETIME, '2012-12-10 00:00:00', 102) AND CONVERT(DATETIME, '2012-12-11 00:00:00', 102))
GROUP BY dtID, dtCreated
HAVING COUNT(*) > 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T16:27:04.020

我会这样做：

```
select sbarcode
from customers
where cast(dtCreated as date) = '2012-12-10'
group by sbarcode
having count(*) > 1 
```

如果您想要计数，那么您将包括`, count(*)`在内`select`。

# mysql - Mysql - 选择匹配所有标签的 id

> ID：13821345
> 
> 赞同：13
> 
> 时间：2012-12-11T13:21:48.503
> 
> 标签：mysql, sql, select

我有一个交叉引用表：

```
ID | tag
1  | 4
1  | 5
1  | 6
2  | 4
2  | 5
2  | 8
3  | 2 
```

我需要选择与*所有*一组标签匹配的 ID。例如，如果给我标签，`'4','5'`我会得到 IDs `'1','2'`。如果给我标签`'4','2'`，我不会得到任何 ID，因为没有匹配*所有*标签的 ID。

此外，如果给我标签，`'4','9'`那么我也不应该得到任何结果 ID，因为搜索`'9'`会产生一个`NULL`值，因此没有 ID 匹配*所有*标签。

这两天我一直在拔头发。希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-11T13:23:02.760

查询的想法是您需要将记录数与您在`WHERE`子句中提供的值数相匹配。

```
SELECT ID
FROM tableName
WHERE tag IN (4, 8)
GROUP BY ID
HAVING COUNT(*) = 2 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/29653/2)

如果没有在每个 ID 的标签上指定唯一约束，则`DISTINCT`需要

```
SELECT ID
FROM tableName
WHERE tag IN (4, 8)
GROUP BY ID
HAVING COUNT(DISTINCT tag) = 2 
```

# php - php odbc 字段名超过 31 个字符

> ID：13821348
> 
> 赞同：1
> 
> 时间：2012-12-11T13:21:49.707
> 
> 标签：php, odbc

有没有办法让 php odbc 字段名超过 31 个字符？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:39:45.020

根据odbc_field_name 文档页面上的[此注释](http://php.net/manual/en/function.odbc-field-name.php#79354)，您可以更改源代码并重新编译 PHP 以绕过 31 个字符的限制。

# vim - 将当前行保存在变量中

> ID：13821350
> 
> 赞同：4
> 
> 时间：2012-12-11T13:21:51.473
> 
> 标签：vim

如何读取当前行（光标所在的位置）并将其保存到 VimScript 中的变量中？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T13:31:01.553

```
let lineText = getline('.') 
```

见`:h getline()`……</p>

如果您只想要号码：

```
let lineNumber = line('.') 
```

# android - 标签布局的动画？

> ID：13821359
> 
> 赞同：2
> 
> 时间：2012-12-11T13:22:15.853
> 
> 标签：android, animation, android-tabhost

我准备了一个应用程序，我的应用程序包含一个选项卡布局。选项卡布局包含 6 个选项卡。我想为每个选项卡分配动画。为此，我使用了这行代码，

```
 overridePendingTransition(R.anim.in, R.anim.out); 
```

我的标签布局代码是，

```
TabSpec tabSpec = tabHost.newTabSpec(""+count);

             View tabIndicator  = LayoutInflater.from(this).inflate(R.layout.custom_tabs, getTabWidget(), false);
             TextView title = (TextView) tabIndicator.findViewById(R.id.tv_Count);
             title.setText(""+count);

             tabSpec.setIndicator(tabIndicator);
             Intent intent = new Intent(this, Utils.formsOfAPlan.get(count));
             intent.putExtra("FORM_ID", count);
             tabSpec.setContent(intent);

             Utils.tabColors.put(count, Constants.NOT_SUBMITTED);

             tabHost.addTab(tabSpec); 
```

请指导我完成这个。

# linq - Linq C# 中加入 System.Data.DataTable 的动态 where 子句

> ID：13821361
> 
> 赞同：1
> 
> 时间：2012-12-11T13:22:24.987
> 
> 标签：linq

我想为可变数量的列创建一个动态 where 子句。这可以做到吗？

我想我已经查看了与该主题相关的所有帖子，但仍然找不到答案。

```
var results = from table1 in dt1.AsEnumerable()
              join table2 in dt2.AsEnumerable() on table1.Field<int>("ID") equals table2.Field<int>("ID")
              where table1["ColumnA"].ToString() != table2["ColumnA"].ToString() ||
                    table1["ColumnB"].ToString() != table2["ColumnB"].ToString() || 
                    table1["ColumnC"].ToString() != table2["ColumnC"].ToString()
              select table1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:46:48.953

在动态 where 子句的情况下，您可以使用任一`System.Linq.Dynamic`（ ScottGu[的博客文章](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)和[nuget ）：](https://www.nuget.org/packages/System.Linq.Dynamic)

```
var results = (from fruit in fruits 
    join car in cars on fruit.Id equals car.Id
    select new { fruit, car })
    .AsQueryable()
    .Where("fruit.ColA != car.ColA")
    .Where("fruit.ColB == car.ColB"); 
```

或者使用@joe-albahari 编写的[扩展`PredicateBuilder`](http://www.albahari.com/nutshell/predicatebuilder.aspx)动态构建表达式。例如：

```
var predicate = 
    PredicateBuilder
        .True<Tuple<Product, Product>>()
        .And(t => t.Item1.ColA != t.Item2.ColA)
        .And(t => t.Item1.ColB == t.Item2.ColB)
        .Compile();    

(from fruit in fruits 
    join car in cars on fruit.Id equals car.Id
    select Tuple.Create(fruit, car))
    .Where(predicate)
    .Dump(); 
```

ps：完整代码可在[gisthub 获得](https://gist.github.com/4259463)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:53:27.643

您可以在逻辑上添加 where 子句。这是一个扩展方法（它不是我的，我很久以前在 StackOverflow 上的某个地方看到它。我找到它时会参考它）

```
Func<T, bool> And(this Func<T, bool> a, Func<T, bool> b) 
{ 
    return (T x) => a(x) && b(x); 
} 
```

有了它，您可以遍历列并将它们添加到 where 子句：

```
Func<string, bool> whereClause = x => true;
foreach(string columnName in dt.Columns.Select(x => x.ColumnName)
{
    string first = dt.Columns[columnName].ToString();
    string second = dt2.Columns[columnName].ToString();

    whereClause = whereClause.And(x => first.Equals(second));
}

var result = (from foo in bar select fooBar).Where(whereClause); 
```

# java - how to get value from Set<>

> ID：13821365
> 
> 赞同：1
> 
> 时间：2012-12-11T13:22:40.203
> 
> 标签：java

```
 /**
     * @return Returns the parameters.
     */
    public Set<FeatureParameterDTO> getParameters() {
        return this.parameters;
    } 
```

how can i get value from `getParameters`? `toString` is not ok? What is correct way?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T13:43:40.833

You possibly have multiple values. So you'd have to iterate over them. You should be more precise with your questions. This one is quite vage. Just a quick example:

```
import java.util.Set;
import java.util.TreeSet;

public class SetTest {

Set<Integer> parameters = new TreeSet<Integer>();

  public static void main(String[] args) {
      SetTest st = new SetTest();
      Set<Integer> param = st.getParameters();
      param.add(1);
      param.add(2);
      param.add(3);

      for (Integer myVal : param) {
        System.out.println(myVal);
      }
   }

   public Set<Integer> getParameters() {
      return this.parameters;
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T13:24:00.270

You can iterate over the return value of `getParameters()`, like this:

```
for (FeatureParameterDTO fpt : getParameters()) {
  // do what you want with fpt
} 
```

# jquery - 使用 jquery 添加的文本未在 Chrome 中显示

> ID：13821367
> 
> 赞同：0
> 
> 时间：2012-12-11T13:22:45.730
> 
> 标签：jquery, html, css

**编辑**

1）以下问题仅在chrome中出现。（我编辑了标题）

2）我再次更新了小提琴以更好地说明问题并表明当在第二个跨度中使用静态文本时 - 它确实会显示（即使在 chrome 中。）

3）我需要限制动态文本的宽度（所以它不能有css显示：内联）

4) 标题和名称有不同的样式（这就是为什么我在标记中有 2 个跨度）

5）检查元素向我显示文本在那里....但由于某种奇怪的原因它没有显示。

==============

我想用 2 个文本元素制作一个居中的标题：

1) 标题（静态文本）和

2）内容（动态文本）

我在内容上加了一个省略号，以确保它不会溢出框。

我的问题是我通过 jquery 设置的动态内容没有显示出来！

这是一个[现场演示](http://jsfiddle.net/UjnvW/12/)

我错过了什么？

这是标记：

```
<header class="header">
    <span class="title">Hello</span>&nbsp;
    ‎“&lt;span id="Name" class="ellipsis name"></span>”
‎‎&lt;/header>​ 
```

CSS

```
.ellipsis {
overflow: hidden;
text-overflow: ellipsis;
white-space: nowrap;
}

.header
{
    text-transform: uppercase;
    color: #952262;
    font: bold 24px arial;
    text-align: center;
    height: 45px;
    line-height: 45px;
    background-color: orange;
}

.title
{
    font-weight: normal;
}
.name
{
    display: inline-block;
    max-width: 370px;
    vertical-align: top; /*for firefox*/
} 
```

jQuery：

```
$(document).ready(function(){
   $('#Name').text('Dan');
})​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:03:10.013

[http://jsfiddle.net/ekFpk/1/](http://jsfiddle.net/ekFpk/1/)

`overflow: hidden;`从 CSS for 中删除`.ellipsis`并将其添加到`document.ready`：

```
$(document).ready(function(){
   $('#Name').text('The could be a long piece of text so I need to use an ellipsis here to trim it incase it overflows the container');
   $('.ellipsis').css('overflow','hidden');
})​;​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:44:13.777

改变`display`with的值`inline`

```
.name
{
    display: inline;
    max-width: 370px;
    vertical-align: top; /*for firefox*/
} 
```

[例子](http://jsfiddle.net/adescalzo/UjnvW/7/)

**编辑**

这行得通，但我不知道为什么只有分配一个起始值，没有这个是行不通的。

HTML：

```
<header class="header">
    <span class="title">Hello</span>&nbsp;
    ‎“&lt;span id="Name" class="ellipsis name"></span>”
‎‎&lt;/header>

<br><br><br><br><br>

<button id="emptytext">empty text</button>&nbsp;&nbsp;
<button id="shorttext">short text</button>&nbsp;&nbsp;
<button id="largetext">large text</button> 
```

JS：

```
$(function() {

    $('#Name').text('-');

    $('#emptytext').on('click', function(event) {
        $('#Name').text('');
    });

    $('#shorttext').on('click', function(event) {
        $('#Name').text('Dan');
    });

    $('#largetext').on('click', function(event) {
        $('#Name').text('Recuerdo de constantinopla');
    });

});
​ 
```

CSS：

```
.ellipsis 
{
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.header
{
    text-transform: uppercase;
    color: #952262;
    font: bold 24px arial;
    text-align: center;
    height: 45px;
    line-height: 45px;
    background-color: orange;
}

.title
{
    font-weight: normal;
}

.name
{
    display: inline-block;
    max-width: 200px;
    vertical-align: top; /*for firefox*/
}
​ 
```

[示例](http://jsfiddle.net/adescalzo/UjnvW/15/) [省略号教程](http://mattsnider.com/css-string-truncation-with-ellipsis/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:25:14.193

~~将其更改为：~~

 ~~```
$(document).ready(function(){
   $('#Name').html('Dan');
})​ 
```~~  ~~但是使用`text`也可以。

如果您仅使用 jsFiddle 进行测试，则需要确保选择“jQuery”作为“无包装（头部）”的库，（其他选项也可以，因为您使用准备好的事件来调用该函数。）

检查更新的小提琴：

~~http://jsfiddle.net/BuddhiP/UjnvW/3/~~ 新小提琴：http: [//jsfiddle.net/BuddhiP/UjnvW/6/](http://jsfiddle.net/BuddhiP/UjnvW/6/)~~

# jira - JIRA：如何创建一个过滤器，显示多个项目中 xyz 或更高版本中修复的所有项目？

> ID：13821370
> 
> 赞同：2
> 
> 时间：2012-12-11T13:22:53.393
> 
> 标签：jira

在 JIRA 中，我们为同一个软件工具设置了多个项目 - 每个客户一个项目，因为我们必须经常调整软件以适应客户的特定要求。因此 JIRA 中的错误、问题和功能请求最终会出现在不同的 JIRA 项目中。当我们的软件工具的主要更新发布给所有客户时，我们面临的问题是创建包含所有 JIRA 问题的发布说明，这些问题跨越各种 JIRA 项目，例如在软件版本 2.3.0.0 或更高版本中已解决。

标准 JIRA 功能使得在一个 JIRA 项目中为特定版本创建发行说明变得非常容易，但我们需要的是针对不同版本号的各种项目的过滤器。由于 JIRA 中的版本字段是文本字段而不是数字，因此对版本号 > 2.3.0.0 的查询不起作用。

有人知道如何解决这个问题吗？

# ios - 捆绑版本字符串错误（再次）

> ID：13821373
> 
> 赞同：-1
> 
> 时间：2012-12-11T13:23:03.157
> 
> 标签：ios, xcode, cfbundleidentifier

我在上传 api 文件时遇到问题。我有一个客户，所以我只是开发人员，无法访问他们的 iTunes 连接。鉴于他们是客户，我不想在他们的 a@# 中感到痛苦。我试图上传并继续得到 CFBunderVersion 必须比以前的数字更高。

我查看了二进制详细信息，它们如下：

```
 Bundle Short String:  2
 Bundle Version:  80 
```

我们使用的是 2.1.81 版本。当我第一次尝试上传文件时，它给了我包需要是整数的错误。所以，我迷失在版本的土地上，简称为2，捆绑为80。

我正在尝试进行更新。我已经尝试了 3 和 81、2 和 81、2 和 1.81、2.0 和 81.0……并继续得到同样的错误。

关于如何解决这个问题、获取我的真实版本号并在 iTunes 连接中实际更新应用程序的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:58:11.827

2.1.81 的捆绑整数是 20181。它是您的版本号 + 您的 2 位主要修订号 + 您的 2 位次要修订号。

如果您愿意，您还可以在代码中以浮点数形式检索捆绑包：

```
[[[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"] floatValue] 
```

# php - 带有 OR 的 PHP Short If 语句

> ID：13821374
> 
> 赞同：1
> 
> 时间：2012-12-11T13:23:09.307
> 
> 标签：php, if-statement

我有以下 PHP 脚本

```
<?php 
    echo (($statusSet) == 'all') ? "class='selected'": "";
?> 
```

我想做的是在其中包含一个 OR 来说明 $statusSet 等于所有 OR NULL 的位置

当我尝试添加不起作用的正常类型的 OR 语句时，我完全迷失了写这个

```
<?php 
    echo ((($statusSet) == 'all')||(($statusSet) == 'all'))) ? "class='selected'": "";
?> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T13:25:21.447

您所做的只是在整个 if 语句中添加另一个要评估的表达式。

```
<?php echo (($statusSet == 'all' || $statusSet === null) ? "class='selected'": ""); ?> 
```

下面有人向我发布了一个几乎相同的片段，但使用**is_null()**代替。请注意，使用**is_null()**或**=== null**很好，但使用**== null**不是最佳实践 - 它不能确保类型相等，因此如果 $statusSet 设置为 (int)0，则执行**$statusSet == null**当它实际上不是空值时将返回 true。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:24:58.540

就这样？

```
echo $statusSet == 'all' || $statusSet === NULL ? "class='selected'": "";?> 
```

我不确定您是否将正确的行复制到问题中，但您的行不正常的原因是因为这两个条件完全相同，因此如果一个为真，那么另一个也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:25:07.293

```
<?php echo (($statusSet == 'all') || (is_null($statusSet)) ) ? "class='selected'": "";?> 
```

# opengl - 具有透明度的 UI 元素的碰撞检测

> ID：13821376
> 
> 赞同：0
> 
> 时间：2012-12-11T13:23:21.533
> 
> 标签：opengl, opengl-es, opengl-es-2.0, collision-detection

我有一个使用 OpenGL/OpenGL ES 渲染的 UI 框架。一些 UI 元素具有透明区域。现在我使用边界矩形进行碰撞，但在某些特定情况下，一个元素的透明部分与另一个元素重叠，它无法检测到正确的元素。

我不想保留所用纹理的副本（作为最后的解决方案，我可能只保留 alpha 通道）。

在这种情况下，您认为我应该如何处理碰撞检测？该解决方案应该是快速和内存友好的。

OpenGL/OpenGL ES 纹理内存读取速度是否足够快以使用它（很少，仅在事件上）来获取一个像素的 alpha 值？这个读数会破坏 OpenGL/OpenGL ES 管道吗？

编辑：

为了更清楚，我只需要 Object-Point 碰撞 - 它是一个 UI 库，但例如某些按钮可能没有矩形形式，并且它们的边界框可能重叠。在这种情况下，我需要正确检测按下的按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:01:00.417

如果 UI 元素没有改变，你可以为每个按钮声明一个 CGPathRef，然后使用 CGPathContainsPoint 来检测哪个按钮被按下。您可能必须遍历每个按钮，但核心图形完成的检查速度足够快，不会减慢应用程序的速度。

请注意，这是像素完美检测。如果不使用物理引擎，您将无法变得更快或更精确。

编辑 ：

在这种情况下使用[PIP](http://alienryderflex.com/polygon/)算法将起作用......正如你所注意到的......它有一个洞。您也可以对多个孔使用相同的想法。

![在此处输入图像描述](../Images/ab4cfbd1c6b868276a975c5221303dd2.png)

# microsoft-metro - 解析 OpenXML 文档 [Windows Store Apps/Metro Apps]

> ID：13821378
> 
> 赞同：0
> 
> 时间：2012-12-11T13:23:21.710
> 
> 标签：microsoft-metro, openxml, openxml-sdk, windows-store-apps

我不想在 Windows 应用商店应用程序上重新发明整个轮子，但是有什么现成的方法可以让我在 Windows 应用商店应用程序上快速解析 OpenXML 文档？

我一直在使用 OpenXML SDK（目前是 2.5），但不幸的是它与它绑定在一起`WindowsBase`，我无法在我的项目中引用它。

我读到某处提到我应该查看`Windows.IO.Packaging`，我知道 OpenXML 是所有文件的容器，但这对我来说已经是“重新发明整个轮子”了，我需要进入文件访问级别才能阅读和`WorkBookPart`WorkSheetPart`（......等等等等）。

谢谢！~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T09:34:05.580

显然，我借此机会学习了 OpenXML，并且能够自己解析 .XLSX 文件。这并不像我最初担心的那么困难。我们可以`ZipArchive`用来帮助导出对应的Sheet，再加上使用，`Linq to Xml`意味着编写一个定制`ExcelReader`类大约需要1个小时。

# fortran - 如何使用 Fortran API 将字符串数组写入 HDF5 数据集？

> ID：13821379
> 
> 赞同：1
> 
> 时间：2012-12-11T13:23:23.110
> 
> 标签：fortran, hdf5

字符串数组是使用 fortran 语言定义的：

```
character(len = 20), dimension(5) :: strings = (/"hello", "world", "Hello", "HDF5", "fortran"/) 
```

现在我想使用`h5ltmake_dataset_string_f()`HDF5 API 参考文档说明的接口将此数组保存到数据集中

> **Fortran90 接口：** h5ltmake_dataset_string_f
> 
> 子程序 h5ltmake_dataset_string_f(loc_id,dset_name,buf,errcode )
> 
> ```
>  implicit none 
> ```
> 
> 整数（HID_T），意图（IN）：：loc_id ***！文件或组标识符***
> 
> 字符（LEN=*），意图（IN）：：dset_name ***！数据集的名称***
> 
> 字符（LEN=*），意图（IN），维度（:) :: buf ！数据缓冲区
> 
> 整数 :: 错误码 ***！错误代码***
> 
> 结束子程序 h5ltmake_dataset_string_f

我的调用代码如下

```
h5ltmake_dataset_string_f(group_id, dset_name, strings, error) 
```

并且在子程序调用之前已经定义了 group_id、dset_name 和 error。

但是当我编译和构建这段代码时，发生编译错误说

> h5ltmake_dataset_string_f()：实际参数和虚拟参数已被违反！

那么如何将字符串写入一个数据集中呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T15:35:50.967

使用 API [**h5dwrite_f(...)**](https://support.hdfgroup.org/HDF5/doc/RM/RM_H5D.html#Dataset-Write)，而不是 h5ltmake_dataset_f() 来写入字符串数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-02T10:39:47.503

虽然这个问题是几年前提出的，但这里有一个解决方案，可以使用 HDFql（[http ://www.hdfql.com](http://www.hdfql.com)）。发布此内容以防其他人在执行此类操作时发现自己在 HDF5 低级细节上苦苦挣扎：

```
PROGRAM Example

    ! use HDFql module (make sure it can be found by the Fortran compiler)
    USE HDFql

    ! declare variables
    CHARACTER(LEN = 20), DIMENSION(5) :: strings = [CHARACTER(LEN = 20) :: "hello", "world", "Hello", "HDF5", "fortran"]
    CHARACTER :: variable_number
    INTEGER :: state

    ! create an HDF file named "example.h5" and use (i.e. open) it
    state = hdfql_execute("CREATE AND USE FILE example.h5")

    ! create a dataset named "my_dataset" of type char (size 20) of one dimension (size 5)
    state = hdfql_execute("CREATE DATASET my_dataset AS CHAR(5, 20)");

    ! register variable "strings" for subsequent use (by HDFql)
    state = hdfql_variable_transient_register(strings)
    WRITE(variable_number, "(I0)") state

    ! insert (i.e. write) content of variable "strings" into dataset "my_dataset"
    state = hdfql_execute("INSERT INTO my_dataset VALUES FROM MEMORY " // variable_number)

END PROGRAM 
```

# java - Lambdaj FinalClassArgumentCreators 的应用程序范围的配置。在哪里以及如何做？

> ID：13821380
> 
> 赞同：11
> 
> 时间：2012-12-11T13:23:25.200
> 
> 标签：java, spring, static, static-initialization, lambdaj

我们在配置 lambdaj 以使用 Joda Time 时遇到问题。由于`LocalDate`是最终类，Lambdaj 需要如下初始化：（[参见 bug 70](http://code.google.com/p/lambdaj/issues/detail?id=70)）

```
public class LocalDateArgumentCreator implements FinalClassArgumentCreator<LocalDate> {
    private final long MSECS_IN_DAY = 1000L * 60L * 60L * 24L;
    public LocalDate createArgumentPlaceHolder(int seed) {
        return new LocalDate((long)seed * MSECS_IN_DAY);
    }
}
ArgumentsFactory.registerFinalClassArgumentCreator(LocalDate.class, new LocalDateArgumentCreator()); 
```

由于我们需要将此配置应用到几乎所有地方，因此我们缺乏如何实现此配置的选项。我们的应用程序是一个基于 Spring 和 Wicket 的 Web 应用程序。

我提出了三种不同的选择：

### 1.核心maven模块中的静态初始化块

由于核心模块包含在所有其他模块中，因此所有模块都将包含该类。剩下的问题是，即使没有对目标类的引用，静态块是否*总是被初始化？*

例子

```
public final class LambdajInitializer {
    static {
        // initialize like above
    }
} 
```

### 2.一个初始化bean`applicationContext.xml`

缺点：永远不会为非 Spring 测试初始化

示例：在 applicationContext-core.xml 中（包含在每个模块中）

```
<bean class="...LambdajInitializer" />

public class LambdajInitializer {
    @PostConstruct
    public void init() {
        // Lambdaj initialization
    }
} 
```

### 3\. 对 Wicket 应用程序类中的初始化方法的调用

缺点：永远不会在 web 模块之外初始化

```
public class MyApplication extends WebApplication {
    @Override
    public void init() {
        ...
        // Lambdaj initialization
        ...
    }
} 
```

我的问题是：实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T07:34:25.587

1.  我会避免`static`初始化，因为你将来可能有（你的电话不太可能）不需要这种初始化的模块。我不喜欢`static`init。
2.  这是一种合理的方法，您可以将此初始化放在`@Before`非弹簧单元测试的一部分中
3.  与 2\. 一样，您可以在您的`@Before`部分中初始化代码。

选项 4\. 您可以创建一个仅用于测试的 Spring 配置类/文件，并将其传递给您的测试使用`@ContextConfiguration`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-27T06:57:57.043

我们得出以下结论：

1.  对于应用程序的运行时，我们`FinalClassArgumentCreator`在 Wicket Application 类的`init()`方法中初始化 Lambdaj。这样，几乎可以肯定它们在任何 Lambdaj 使用之前就被初始化了。
2.  为了测试 Wicket 组件和页面，我们创建了自己的`TestApplication`类，它使用与生产应用程序相同的初始化代码。
3.  对于独立的批处理作业，我们决定不使用 Lambdaj。如果我们稍后决定使用它，我们可能会将初始化提取到 Spring 将实例化的类。

# android - Horizo ntalScrollView 中的奇怪边距

> ID：13821384
> 
> 赞同：2
> 
> 时间：2012-12-11T13:23:36.677
> 
> 标签：android, horizontal-scrolling, horizontalscrollview

我需要一个水平滚动的视图列表，所以我将 LinearLayout 放在 Horizo​​ntalScrollView 中，并将元素添加到 LinearLayout。一切都很好，但是有奇怪的边距/填充（我不知道它是什么）

这是完全向左滚动的视图 - 第一项在父项上的一半

![在此处输入图像描述](../Images/ec1ef61423f32c6f3e15918f6c216555.png)

这是完全滚动到右侧的 - 右侧奇怪的填充

[http://korniltsev.ru/m/gyazo/4d093939766fe.png](http://korniltsev.ru/m/gyazo/4d093939766fe.png)

这是我的xml：

```
<HorizontalScrollView
            android:layout_width="match_parent"
            android:layout_height="match_parent">

        <LinearLayout
                android:id="@+id/container"
                android:layout_width="wrap_content"
                android:layout_height="match_parent"

                android:layout_gravity="center"/>
</HorizontalScrollView> 
```

物品：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
                android:layout_width="150dp"
                android:layout_height="match_parent"
        >

    <FrameLayout
            android:layout_width="140dp"
            android:layout_height="50dp"
            android:background="@drawable/bg_payment_system_item"
            android:layout_centerInParent="true"
            >
        <ImageView
                android:id="@+id/icon"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="center"
                />
    </FrameLayout>
    <Button
        android:layout_width="30dp"
        android:layout_height="30dp"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"/>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T11:03:37.973

好的，所以这种行为是一个 android 错误。[http://code.google.com/p/android/issues/detail?id=20088](http://code.google.com/p/android/issues/detail?id=20088)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-06T03:37:46.567

您可以尝试代码中的策略，判断 HScroller 的内容宽度并与设备/容器宽度进行比较：

1.  如果内容比容器宽：将内容的重力设置为“左”值

2.  如果内容比容器薄：将内容的重力设置为“中心”值

我认为这只是需求的 UX 设计问题，该策略对我来说很好。

# jquery - jQuery 加载事件完成时触发操作

> ID：13821392
> 
> 赞同：1
> 
> 时间：2012-12-11T13:24:04.783
> 
> 标签：jquery

我有一个使用 jQuery Load Event 动态加载选择框的网页

```
jQuery('#opt_test').load('getextra.php?query=ls&id=2').change(); 
```

另一个选择框取决于绑定到更改事件的该选择框的数据。

```
jQuery('#opt_test').change(function () {
    var test = jQuery('#opt_test').val();
    alert ('var');
    jQuery('#opt_host').load('getextra.php?query=ls&id=4&master=' + test );
}) 
```

我有两个问题，我似乎无法使用上面的加载事件引发 #opt_test 的更改事件。

如果我手动复制部分代码以绕过此问题，我发现显示 select 值的警报是在加载完成之前出现的，因此它显示旧值。

如何在加载完成后触发此事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:32:39.253

[`.load`](http://api.jquery.com/load/)允许您设置将在异步调用完成时调用的回调函数。否则，`.change`可以（并且可能确实）之前执行。改成：

```
jQuery("#opt_test").load('url', function () {
   $("#opt_test").change();
}); 
```

# android - 是否可以在 android 2.x 中制作一个看起来像 Android 4 中的 EditText 的 EditText？

> ID：13821395
> 
> 赞同：1
> 
> 时间：2012-12-11T13:24:19.717
> 
> 标签：android, styles, android-edittext

是否有可能`EditText`在 android 2.x 中制作一个看起来像`EditText`Android 4 的？我的意思是蓝色背光，下面有法兰边缘。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T14:51:17.347

如果您不想使用外部库，可以使用以下代码：

将以下代码添加到`res\values\styles.xml`

```
<style name="HoloEditText">
    <item name="android:background">@drawable/edit_text_holo_dark</item>
</style> 
```

之后，`YOURPATH\android-sdk\platforms\android-16\data\res\`只需将所有引用的可绘制对象复制到`edit_text_holo_dark.xml`项目中的相应目录即可。

然后只需将样式应用于您的 EditText：

```
 <EditText
   android:id="@+id/editText"
   style="@style/HoloEditText"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content"/> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T13:27:21.647

是的，有一个名为 holoeverywhere 的库，您将在 2.1+ 中获得所有 4.2 组件：

[https://github.com/ChristopheVersieux/HoloEverywhere](https://github.com/ChristopheVersieux/HoloEverywhere)

# android - 将 SurfaceView 传递给对象构造函数

> ID：13821398
> 
> 赞同：0
> 
> 时间：2012-12-11T13:24:24.920
> 
> 标签：android, static

类将自己传递给自己的对象是不好的做法吗？

例如：

```
public class MainView extends SurfaceView {
    Stack<GameObject> objs;

    public MainView() {
         new GameObject(this);
    }

    public void Add(GameObject obj) {
         objs.push(obj)
    }

    public void Remove(GameObject obj) {
         objs.pop(obj)
    }
}

public class GameObject {
    MainView parent;
    int state; 

    public GameObject(MainView parent) {
        this.parent = parent;
        parent.Add(this);
    }

    public void doStuff() {
        if(state == 1) {
              new GameObject(parent);
        } 
        else if(state == 2) {
              parent.Remove(this);
        } 
    }
} 
```

我努力删除静态方法/变量。现在我必须将视图传递给它自己的对象。这是一个不好的做法吗？对象应该有逻辑还是 SurfaceView 应该包含所有逻辑？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:36:33.637

你在开发游戏吗？如果是这样，我建议您阅读[this](http://www.badlogicgames.com/wordpress/?cat=22)和[this](http://www.edu4java.com/androidgame.html)。surfaceview 应该只负责将游戏对象渲染到屏幕上。然而，每个游戏对象都应该包含逻辑（其行为）和对要绘制的画布的引用，最终将绘制到表面视图。然而，游戏的整体逻辑应该在一个负责所有游戏对象的生成和管理的类中（例如命名世界）。

我希望这有帮助。

# javascript - 如何重构 If-else 代码段？

> ID：13821400
> 
> 赞同：1
> 
> 时间：2012-12-11T13:24:30.130
> 
> 标签：javascript, microsoft-metro

我正在使用 Html5-js-jquery 开发 win8（metro 风格）应用程序。我有这个代码段；

```
 GetBoutiqueDetail: function (boutiqueId, options) {
        if (IsUserLogin()) {
            //different job A
        } else {
            ShowLoginPanel(undefined);
        }
    },
    GetProductDetail: function (boutiqueId, productId, options) {
        if (IsUserLogin()) {
            //different job B
        } else {
            ShowLoginPanel(undefined);
        }
    },
    AddBasket: function (productId, productVariantId, quantity, options) {
        if (IsUserLogin()) {
            //different job C
        } else {
            ShowLoginPanel(undefined);
        }
    },.... 
```

.并且~20个函数应该检查用户是否登录。我应该调用类似于“ **Library.GetBoutiqueDetail();** ”的函数

所以我的问题很简单，我如何重构该代码以删除这些 if-else 部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:30:12.897

这个对象映射怎么样：

```
var objMap = {  
  "GetBoutiqueDetail":fnJobA,
  "GetProductDetail":fnJobB,
  "AddBasket":fnJobC}
  ....
}

if (loggedIn) {
  objMap[task]();
}
else {
  doLogin();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:34:31.763

尝试这样的事情：

```
checkLogin: function( action, actionArgs ) {

    if( IsLogin ) {

        return action.apply(this, actionArgs );
    }

    ShowLoginPanel();
},

GetBoutiqueDetail: function (boutiqueId, options) {

    //different job A
},
GetProductDetail: function (boutiqueId, productId, options) {

    //different job B
},
AddBasket: function (productId, productVariantId, quantity, options) {

    //different job C
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:34:07.040

在 Javascript 中，您可以从函数返回以结束它，所以 f.ex：

```
GetProductDetail: function (boutiqueId, productId, options) {
    if (!IsLogin) return ShowLoginPanel();
    // different job...
} 
```

不过，您仍然会有一些重复的代码。另一种选择是定义更高级别的功能。就像是：

```
var loginOrAction = function() {
    if (!IsLogin) return ShowLoginPanel();
    var args = [].slice.call(arguments);
    Library[args.shift()].apply(Library, args);
}

loginOrAction('GetBoutiqueDetail', boutiqueId, options); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T13:35:33.400

您始终可以将公共代码包装到更高范围的函数中，并从库函数中调用它 - 例如：

```
//Higher scope:
function CheckForLogin(executionFunction)
{
   if(IsLogin) {
      executionFunction();
   } else {
      ShowLoginPanel(undefined);
   }
};

GetBoutiqueDetail: function (boutiqueId, options) {
    CheckForLogin(//different job A)
} 
```

`different job 'N'`作为匿名函数传入`CheckForLogin`

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-12-11T13:30:37.383

使用三元运算符

```
(IsLogin) ? jobA() : ShowLoginPanel(undefined) 
```

# database - symfony2 学说表锁

> ID：13821402
> 
> 赞同：2
> 
> 时间：2012-12-11T13:24:35.903
> 
> 标签：database, symfony, doctrine, locking, serial-number

我不确定这是首选方法，但我想介绍我的解决方案，看看你们那里的 symfony2 向导是否对此有启发性的评论。

我在一个表中注册金融交易，每个用户都有自己的一系列序列号（即每个用户的交易表都会以1开头）。

我知道这必须由代码处理，然后如果假设两个人将登录到同一个用户帐户注册交易，或者用户同时触发多个交易写入，我就会冒着为用户输入重复条目的风险time 和 Doctrine 将在第一个写入触发之前在两个操作中执行 SELECT...

```
 $em->getConnection()->exec('LOCK TABLES transaction WRITE;'); //lock for write access

            $results = $em->createQuery("SELECT MAX(t.serial) FROM ekonomiKassabokBundle:Transaction t WHERE t.user = $userId")->getResult();
            $temp = $results[0];
            $max_serial = $temp[1];
            $new_serial = $max_serial + 1;

            $entity->setSerial($new_serial);

            $em->persist($entity);
            $em->flush();

        $em->getConnection()->exec('UNLOCK TABLES;'); 
```

上面的代码给了我...

```
SQLSTATE[HY000]: General error: 1100 Table 't0_' was not locked with LOCK TABLES 
```

或者这甚至可能是矫枉过正，我应该跳过表锁吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-29T16:25:11.500

我最终设法找到了解决方案，嗯……**一个**解决方案。

实际上，据我所知，这是非常愚蠢的：当您锁定表时，MySQL 期望您将使用的所有表直到解锁被锁定，这必须在一个 LOCK TABLES 语句中发生。

现在，无论出于何种原因，Doctrine 都会系统地使用表别名，而 MySQL 显然无法确定别名指的是锁定的表……所以你必须专门锁定所有将自己使用的别名！

尝试：

```
$em->getConnection()->exec('LOCK TABLES transaction as t0_ WRITE;'); 
```

如果您在此之后遇到另一个错误（如果您在表被锁定时执行多个查询，则会发生这种情况），只需继续为其他别名添加锁，例如：

```
$em->getConnection()->exec('LOCK TABLES transaction as t0_ WRITE, transaction as t0 WRITE, transaction as t1 WRITE;'); 
```

幸运的是，学说似乎总是使用相同的表别名，所以一旦你把它弄下来，它应该继续工作！

# c - 检查 2 个数组中的公共值并将不同的值放在第三个数组中

> ID：13821404
> 
> 赞同：0
> 
> 时间：2012-12-11T13:24:37.860
> 
> 标签：c, arrays

我有这个代码......对于一个函数，它从用户那里获取 7 个数字并将其放入数组 1 中......然后创建一个随机数并将它们放入数组 2 中......检查是否有共同值...（不仅在同一个地方，例如：不仅如果 ar1[1]==ar2[1] ...而且检查所有地方是否存在共同值）...。将不同的值放在第三个数组中...创建第三个数组并将不常见的值放入其中...这是我的代码：

```
 //includes
# include  <stdio.h>
# include  <conio.h>
# include  <stdlib.h>
# include  <time.h>

//define
#define N 7
//prototype
void randomArray(int maxVal,int ar2[]);

int main()
{
//variables/arrays
int ar1[N],ar2[N],ar3[N],i,z,t,temp,maxVal,counter;

printf("Please Enter %d numbers: ",N);
for(i=0;i<7;i++)
{
    scanf("%d",&ar1[i]);
}

while(1)
{
printf("Please enter a max value: ");
scanf("%d",&maxVal);

if(maxVal>0)
    break;
}
randomArray(maxVal,ar2);

getch();
return 0;
}

//randomArray
void randomArray(int maxVal,int ar2[])
{
    int i;
    for(i=0;i<N;i++)
    {
     /* get random value between minVal and maxVal */
        ar2[i] = (rand() % (maxVal+1 - 1)) + 1;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:37:01.030

这是简单的蛮力方法。它首先将数组 1 中的每个元素与数组 2 中的每个元素进行比较，如果它不在数组 2 中，则将其存储。然后它对数组 2 执行相同的操作。然后它打印数组 3。

注意：如果没有匹配项，您需要将数组 3 的大小更改为 N*2。此外，首先将数组 3 中的所有元素设置为 0 以标记为非结果。或者跟踪数组 3 的长度。

```
int ar3[N*2] = {0};
int index = 0;
//Check 1st array
printf("Array 1:\t");
for (int i = 0; i < N; i++) {
    bool in_array = false;
    for (int k = 0; k < N; k++) {
        if (ar1[i] == ar2[k]) {
            in_array = true;
                    break;
        }
    }
    if (!in_array) {
        ar3[index++] = ar1[i];
    }
    printf(" %d", ar1[i]);
}
//Check 2nd array
printf("\r\nArray 2:\t");
for (int i = 0; i < N; i++) {
    bool in_array = false;
    for (int k = 0; k < N; k++) {
        if (ar2[i] == ar1[k]) {
            in_array = true;
                    break;
        }
    }
    if (!in_array) {
        ar3[index++] = ar2[i];
    }
    printf(" %d", ar2[i]);
}

// Print result
printf("\r\nUnique:\t");
for (int i = 0, j = 0; i < N*2; i++) {
    if (0 == ar3[i]) {
        break;
    }
    printf(" %d", ar3[i]);
} 
```

如果这对您有用，请接受正确答案。

# hibernate - 使用 Hibernate 进行映射

> ID：13821411
> 
> 赞同：0
> 
> 时间：2012-12-11T13:25:01.440
> 
> 标签：hibernate

嗨，我有一个有 5 个字段的 Jsp。该 jsp 有一个添加新员工的按钮。员工 ID、员工姓名、员工电话号码、员工当前地址、员工永久地址

我创建了两个表 Employee 和 Address。Employee 表有列`empid, ename and empPhno`。地址表具有字段`empCuAdd`和`empPerAdd`. 我为员工和地址创建了两个类。我为 Employee 和 address`emp.hbm.xml`和 add.hbm.xml 创建了两个 xml，以将值存储到上面给定字段的表中。两个类的对象是empobj 和addobj。

现在我想知道如何将值从单个 jsp 页面存储到两个表中。在 JSP 中添加新员工的按钮，`addemployee()`在我给出 save(empobj) 时调用了一个函数。

该代码用于以下

来自 jsp 的值存储在表单 beans(EmployeeForm) 中。表单被转换为 EmployeeModel。**在这里我有一个疑问，我是否应该从具有与 EmployeeModel 和 AddressModel 相关的字段的单个 Jsp 中维护两个表单，即从 Employeejsp 获取值并存储到 EMployeeForm 和 AddressForm**。

现在传递 empmodel 只存储三个 jsp 值。我想知道

```
public addEmployee(Employee empmodel)
{
    save(empmodel);//this is the method to save the object to the employee tables using hiberbate file(employee.hbm.xml)
} 
```

但是 save(obj) 只存储员工 id、员工姓名和电话号码的值。我只是想知道如何使用单个 jsp 和单个 save 方法将值保存到两个表employee 和address 中，传递单个对象。

**简而言之，谁能解释一下，如何使用 Hibernate 将单个 JSP 页面中的值存储到两个表中。jsp 中的一些值存储到一个表中，而其他值存储到第二个表中。我正在使用 Struts。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:34:52.917

使用嵌入式和可嵌入存储在单个表中...将您的地址类定义为@EMBEDDABLE，并将您的类定义为@EMBEDDED...（注释不是大写字母）

# android - 如何在Android中单击按钮后面的视图？

> ID：13821422
> 
> 赞同：3
> 
> 时间：2012-12-11T13:25:33.023
> 
> 标签：android, events, touch

我想创建一个形状或按钮，但是当它被单击时，它会将事件发送到它后面的视图。我已经使用了 onInterceptTouchEvent，但事件仍然是由按钮而不是视图来获取的。这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout android:id="@+id/RelativeLayout01" 
   android:layout_width="fill_parent" 
   android:layout_height="fill_parent" 
   xmlns:android="http://schemas.android.com/apk/res/android"
   android:background="@drawable/background">

 <com.Example.MultitouchView
          android:id="@+id/touchView"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
          android:background="#FF0000" />

 <Button
    android:id="@+id/btnDo"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/bg1"
    android:text="Test"
    android:textSize="20sp"
    android:textColor="#110342" >
</Button>

</RelativeLayout> 
```

MultitouchView.class

```
public class MultitouchView extends View {

private boolean isMultiTouch = false;
private static final int        SWIPE_MIN_LENGHT        = 100;
private static final long       MULTITOUCH_DELAY        = 500;
private long    mTouchStart;

public MultitouchView(Context context) {
    super(context);
    // TODO Auto-generated constructor stub
}

public MultitouchView(Context context, AttributeSet attrs, int defStyle) {
          super(context, attrs, defStyle);

  }

  public MultitouchView(Context context, AttributeSet attrs) {
          super(context, attrs);

  }

  public boolean onInterceptTouchEvent(MotionEvent event){
    Toast toast = Toast.makeText(getContext(), "TEST", 1000);
    toast.show();

    return false;

  }

  @Override
  public boolean onTouchEvent(MotionEvent event) {
        super.onTouchEvent(event);
        int action = event.getAction() & MotionEvent.ACTION_MASK;
        switch (action) {
            case MotionEvent.ACTION_DOWN: {
                Log.d("MultitouchExample","Action Down");
                mTouchStart = System.currentTimeMillis();
                SoundManager.playSound(1,1);
                break;
            }
        }
        return true;
  }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:39:14.947

您应该扩展 Button 并在 Button.onTouchEvent() 中返回 false

```
new Button(dozActivity) {
@Override
public boolean onTouchEvent(MotionEvent event)
{
    return false;
}
}; 
```

或者通知按钮后面的 View 的 OnTouchListener：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:28:41.947

我已经解决了这个问题，在按钮中添加了这个：

机器人：可点击=“假”

谢谢你的帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:29:38.053

```
@Override 
    public boolean hasWindowFocus() {
            return isEnabled() && getVisibility() == VISIBLE ? true : false;
        } 
```

在您的 MultiTouchView 类中。我希望这有效

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T15:34:47.963

您可以在按钮的大小和位置上创建一个 Rectangle 变量，然后像这样使用它；

```
If(touch != null && rectangle.contains(touchPoint))
{
    // do action      
} 
```

如果您在更新按钮之前更新它，矩形将是您新的不可见按钮。

# intellij-idea - IDEA可以自动添加Android支持库吗？

> ID：13821424
> 
> 赞同：2
> 
> 时间：2012-12-11T13:25:35.987
> 
> 标签：intellij-idea, android-support-library

`Android support library`IDEA 12（如 Eclipse）是否可以按需或项目创建时自动添加（如在 Eclipse 中）？

到目前为止，我们必须转到`extras`Android SDK 中的目录并手动复制库。我想知道是不是变了？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:43:48.127

目前缺少此功能，请[提交功能请求](http://youtrack.jetbrains.net/issues/IDEA)。

# php - 将年或月转换为日，PHP

> ID：13821427
> 
> 赞同：3
> 
> 时间：2012-12-11T13:25:48.370
> 
> 标签：php

所以我用这种方法来得到两个日期之间的差异。

```
$diff = abs(strtotime($date2) - strtotime($date1));
$years = floor($diff / (365*60*60*24));
$months = floor(($diff - $years * 365*60*60*24) / (30*60*60*24));
$days = floor(($diff - $years * 365*60*60*24 - $months*30*60*60*24)/ (60*60*24)); 
```

现在，假设我想将年份和月份转换为天。我怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T13:29:27.883

使用[`DateTime`](http://www.php.net/manual/en/class.datetime.php)它是小菜一碟：

```
$date1 = new DateTime($date1);
$date2 = new DateTime($date2);

$diff = $date1->diff($date2, true);

echo $diff->format('%a') . ' days'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T11:04:07.537

```
$currentDate = date("d-m-Y");
$date1 = date_create("".$joining_date."");
$date2 = date_create("".$currentDate."");
$diff12 = date_diff($date2, $date1);
$hub_days = $diff12->days;
$months = $diff12->m;
$years = $diff12->y; 
```

# iphone - AFNetworking setImageWithURLRequest 下载进度

> ID：13821428
> 
> 赞同：2
> 
> 时间：2012-12-11T13:25:54.787
> 
> 标签：iphone, ios, ipad, afnetworking, progress

我正在使用此代码将图像设置为 UIImageView。

```
NSURLRequest *URLRequest = [[NSURLRequest alloc] initWithURL:[NSURL URLWithString:imageToLoad]];

    [imageView setImageWithURLRequest:URLRequest placeholderImage:nil success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
        [cell.image setImage:image];
        [cell.activityIndicator stopAnimating];

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error) {
        // Nothing
    }]; 
```

但是我想使用该方法跟踪下载进度，是否可以在 setImageWithURLRequest 方法中执行此操作？

通常我这样做是为了显示加载进度百分比：

```
[SVProgressHUD showWithStatus:@"Start download..."];
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:link]];
    AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];

    [operation setCompletionBlockWithSuccess:^(AFHTTPRequestOperation *operation, id responseObject) {
        // success
        [SVProgressHUD showSuccessWithStatus:@"Done."];

    } failure:^(AFHTTPRequestOperation *operation, NSError *error) {
        // failed
        [SVProgressHUD showErrorWithStatus:@"Failed."];
    }];

    [operation setDownloadProgressBlock:^(NSUInteger bytesRead, long long totalBytesRead, long long totalBytesExpectedToRead) {
        [SVProgressHUD showWithStatus:[NSString stringWithFormat:@"Downloading... %0.0f%%", totalBytesRead*100*1.0/(totalBytesRead+totalBytesExpectedToRead)]];
    }]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:23:51.497

开箱即用，没有 UIImageView+AFNetworking 类别没有此功能。但是，可以通过将此方法添加到类别中轻松添加：

```
-(void)setDownloadProgressBlock:(void (^)(NSUInteger bytesRead, long long totalBytesRead,   long long totalBytesExpectedToRead))block{
   [self.af_imageRequestOperation setDownloadProgressBlock:block];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-10T04:44:52.047

看看这个可可豆荚：[https](https://github.com/xmartlabs/XLRemoteImageView) ://github.com/xmartlabs/XLRemoteImageView 。它使用objective-c 内部实现你想要的。我希望它对你有帮助。

# jquery - 通过 AJAX GET 调用加载后未加载 jQuery 脚本

> ID：13821429
> 
> 赞同：3
> 
> 时间：2012-12-11T13:25:54.810
> 
> 标签：jquery, ajax, web

在我从 jQuery AJAX GET 加载文件后，我很难弄清楚如何加载 jQuery 脚本。

此代码绑定到 id 为 navhome 的 div：

```
$('#navhome').live('click',getHome); 
```

下面的代码是从服务器获取文件的内容。

```
function getHome() {    
$('#pagecontent').fadeOut('fast', function() {
    $.ajax({
    type: "GET",
    url: "../../pages/home.php",
    success: postToPage});
});} 
```

此代码将其放置在页面上：

```
function postToPage(data, status) { 
$('#pagecontent').html(data);} 
```

我想要发生的是在加载文件时运行一个滑块插件，但我很难理解我需要做什么才能让它运行。

我为我的 Minecraft 服务器创建的一个小型网站提供了上述支持，它可以在[http://www.chernobylserver.com](http://www.chernobylserver.com)获得 。当您单击“成员”页面时，它会使用上述内容加载新内容，但是当我单击“主页”时，它不会重新加载滑块脚本。

如果你能指出我正确的方向，我将永远感激你。这让我心烦了一段时间。这对我来说都是新的领域。

感谢您花时间阅读本文，我真的很感激。:-)

卡勒姆·克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T19:51:43.677

只需将您的 nivoslider init 转换为函数

```
 function startSlider() {
     jQuery('#slider').nivoSlider( [... options here ...] );
 } 
```

并将其添加到 postToPage();

```
 function postToPage(data, status) {  
     $('#ajaxcontent').html(data);
     $('#ajaxcontent').fadeIn('slow');
     $('#footerribbon').fadeIn('slow');
     startSlider();
   } 
```

另外，快速提示：不要使用 .live()。使用[$.on()](http://api.jquery.com/on/)

# iphone - IOS - 如何确定电话号码的运营商名称和 iPhone 拨出电话的最后通话费用

> ID：13821432
> 
> 赞同：-8
> 
> 时间：2012-12-11T13:26:00.473
> 
> 标签：iphone, ios

谁能告诉我如何找出拨出电话的最后通话费用和拨出电话号码的运营商名称？是否有用于获取 iPhone 中运营商名称和通话费用详细信息的 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:47:37.203

它甚至与机密性或安全性无关，尽管如果此信息可用，这将是一个严重的安全问题。

电话不了解与无线/蜂窝网络中的计费有关的任何内容。手机只是尝试在网络上注册，但如果帐户处于非活动状态或信誉不佳，网络通常会拒绝注册尝试。

计费几乎由运营商的核心网络处理（通常是电路交换网络中的 MSC、UMTS 分组交换网络中的 SGSN、CDMA/EVDO 分组交换网络中的 PDSN 或 LTE 分组交换网络中的 MME），所以无法获得有关剩余通话时间或与电话或数据传输相关的费用的任何信息。任何提供此信息的应用程序通常通过对其进行近似来实现。通常它只是在电话级别跟踪此信息，并且可能不是官方的。

运营商名称可能可用，具体取决于提供商和技术。在大多数技术中，网络的 MCC 和 MNC 将可用，您可以访问该运营商名称。此[链接](http://mobiledevelopertips.com/core-services/carrier-information-mobile-network-code-mnc-and-mobile-country-code-mcc.html)让您了解如何为 iOS4 执行此操作，但简短版本是：

```
#import <CoreTelephony/CTCarrier.h>
#import <CoreTelephony/CTTelephonyNetworkInfo.h>

// Setup the Network Info and create a CTCarrier object
CTTelephonyNetworkInfo *networkInfo = [[[CTTelephonyNetworkInfo alloc] init] autorelease];
CTCarrier *carrier = [networkInfo subscriberCellularProvider];

// Get carrier name
NSString *carrierName = [carrier carrierName];
if (carrierName != nil)
  NSLog(@"Carrier: %@", carrierName);

// Get mobile country code
NSString *mcc = [carrier mobileCountryCode];
if (mcc != nil)
  NSLog(@"Mobile Country Code (MCC): %@", mcc);

// Get mobile network code
NSString *mnc = [carrier mobileNetworkCode];
if (mnc != nil)
  NSLog(@"Mobile Network Code (MNC): %@", mnc); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:44:46.913

不，没有。不，不应该。不，不可能。那东西是保密的。

# php - 如何在php中指定时区以正确输出日期（'Y'）

> ID：13821435
> 
> 赞同：1
> 
> 时间：2012-12-11T13:26:10.600
> 
> 标签：php, timezone

我的php代码有小问题，请看下面

```
<?php
$thisyear = date('Y');
echo "<span>&copy; 2004-$thisyear All rights reserved. </span>";
?> 
```

我在 error_log 中遇到的错误具有以下性质

> PHP 警告：date() [function.date]：依赖系统的时区设置是不安全的。您 *需要*使用 date.timezone 设置或 date_default_timezone_set() 函数。如果您使用了这些方法中的任何一种，但仍然收到此警告，您很可能拼错了时区标识符。我们为 'CST/-6.0/no DST' 选择了 'America/Chicago'

我不知道如何在我的简单 php 脚本中指定其中任何一个。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T13:28:27.897

我相信警告是尽可能明确的。尝试使用这个：

```
<?php
date_default_timezone_set('America/Los_Angeles');
$thisyear = date('Y');
echo "<span>&copy; 2004-$thisyear All rights reserved. </span>";
?> 
```

您可以通过以下链接查看所有支持的时区列表：http: [//php.net/manual/en/timezones.php](http://php.net/manual/en/timezones.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:32:36.437

[文档真的很](http://php.net/manual/en/function.date.php)清楚。

你做

```
date_default_timezone_set('UTC'); 
```

（或者你想要的任何时区）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:29:12.580

您只需要像这样指定时区。

```
<?php
date_default_timezone_set('America/Chicago'); // Or any other timezone

$thisyear = date('Y');
echo "<span>&copy; 2004-$thisyear All rights reserved. </span>";
?> 
```

有关时区的完整列表，请参阅 - [List PHP TimeZones](http://php.net/manual/en/timezones.php)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T13:29:58.840

```
 <?php
    // set the default timezone to use. Available since PHP 5.1
    date_default_timezone_set('UTC');
   echo date('y');
    ?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T13:44:05.863

```
 date_default_timezone_set("Europe/Rome"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-11T13:46:07.263

如果您使用的是 PHP>=5.4.0，您有两种选择：

1.  在调用日期函数之前使用[date_default_timezone_set()](http://php.net/manual/es/function.date-default-timezone-set.php)

    > < ? php
    > 
    > date_default_timezone_set("美国/芝加哥");
    > 
    > $thisyear = date('Y');
    > 
    > echo "© 2004-$thisyear 版权所有。";
    > 
    > ?>

2.  [通过在 php.ini 文件中添加选项date.timezone](http://php.net/manual/es/datetime.configuration.php#ini.date.timezone)来使用设置在 php.ini 中指定默认时区，并简单地使用 date 函数：

    > [日期]
    > 
    > ; 定义日期函数使用的默认时区
    > 
    > date.timezone = 美国/芝加哥

选项 2 是默认值，除非您在调用 date 之前明确调用 date_default_timezone_set()，否则将使用它。

如果您的 PHP 版本 <5.4.0，您还可以使用环境变量 TZ 或操作系统。在 date_default_timezone_set() 文档中，您可以看到优先级：

> 按照优先顺序，此函数通过以下方式返回默认时区：
> 
> *   使用 date_default_timezone_set() 函数读取时区设置（如果有）
>     
>     
> *   仅限 PHP 5.4.0 之前：读取 TZ 环境变量（如果非空）
>     
>     
> *   读取 date.timezone ini 选项的值（如果设置）
>     
>     
> *   仅限 PHP 5.4.0 之前：查询主机操作系统（如果操作系统支持和允许）。这使用了一种必须猜测时区的算法。这绝不会在每种情况下都能正常工作。达到此阶段时会显示警告。不要依赖它来正确猜测，而是将 date.timezone 设置为正确的时区。

希望能帮助到你

# eclipse - Tabris，Eclipse RAP 如何触发 UIUpdate？

> ID：13821436
> 
> 赞同：0
> 
> 时间：2012-12-11T13:26:11.160
> 
> 标签：eclipse, eclipse-rap

如何使用 Tabris 触发 UIUpdate？JavaScript 吗？UI回调？你能举个小例子吗。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T13:09:13.773

是的，有一个 UICallback 机制（在 RAP 2.0 中称为 ServerPush）。在 RAP wiki 页面上有关于该主题的更多信息：[http ://wiki.eclipse.org/RAP/UI_Callback](http://wiki.eclipse.org/RAP/UI_Callback)

# asp.net - 如何让 asp.net 不会自动转义 URL 中的转义问号？

> ID：13821437
> 
> 赞同：2
> 
> 时间：2012-12-11T13:26:18.243
> 
> 标签：asp.net, asp.net-mvc, url

我正在使用 Asp.Net + MVC 4。
我正在使用 REST API，因此参数是在 url 的路径部分（例如 /accounts/account1）中指定的，而不是在查询字符串中（accounts?id=account1 ）。

我希望能够查询 ID 中有问号的帐户。方法是对帐户的 ID 进行 uri 编码，然后在 url 中使用它。但是，ASP.NET 会自动取消转义，我的 MVC 应用程序看不到对“/accounts/%3Faccount1”和“/accounts/?account1”的请求之间的区别。

有没有办法改变这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:59:10.940

你能把问号加倍编码吗？

# sql - 更新列

> ID：13821448
> 
> 赞同：1
> 
> 时间：2012-12-11T13:26:54.483
> 
> 标签：sql, sql-update

我想在 Peshwar 表中添加性别。我想添加性别为空的 Peshwar 表的所有字段，由该查询返回

```
select  
    Gender_lookup_Table.
    Gender
from 
    Gender_lookup_Table,Peshwar
where 
    Gender_lookup_Table.initial_name like substring 
        (Peshwar.Student_Name, 1,CHARINDEX(' ',Peshwar.Student_Name,0)) 
```

使用它来填充性别列：S 但我不起作用。

```
update Peshwar
set 
gender=
    (
        select  
            Gender_lookup_Table.Gender
        from 
            Gender_lookup_Table,Peshwar
        where 
            Gender_lookup_Table.initial_name like substring
                 (Peshwar.Student_Name, 1,CHARINDEX(' ',Peshwar.Student_Name,0))
)
where gender= NULL 
```

我需要一个for循环来填充所有列？？：秒

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:30:06.010

首先，在与值进行比较时，它不`NULL`应该是.`IS NULL``= NULL`

```
UPDATE  a
SET     a.gender = b.gender
FROM    peshwar a
        INNER JOIN gender_lookup_Table b
            ON b.initial_name LIKE SUBSTRING(a.Student_Name, 1, CHARINDEX(' ', a.Student_Name, 0)) 
```

*   [使用 JOIN 更新](http://blog.ookamikun.com/2008/03/mysql-update-with-join.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:30:39.230

```
update p
SET p.gender = g.gender
FROM peshwar p
INNER JOIN Gender_lookup_Table g 
        ON g.initial_name LIKE SUBSTRING(p.Student_Name, 
                                         1,  
                                         CHARINDEX(' ', p.Student_Name,0))
WHERE p.gender IS NULL 
```

# java - 从通过 servlet 动态上传的 jar 加载类

> ID：13821451
> 
> 赞同：1
> 
> 时间：2012-12-11T13:27:11.763
> 
> 标签：java, reflection, reflections

我正在通过 servlet 动态上传一个 jar 并将其保存在我的 WEB-INF/lib 目录中。我想用我的@annotation 注释所有类，

已经使用下面的反射代码没有任何运气.. jar 的清单是可读的，但类不是.. 类的列表是 0

```
List<ClassLoader> classLoadersList = new LinkedList<ClassLoader>();
classLoadersList.add(ClasspathHelper.contextClassLoader());
classLoadersList.add(ClasspathHelper.staticClassLoader());
ConfigurationBuilder builder = new ConfigurationBuilder().setScanners(new SubTypesScanner(false), new ResourcesScanner(),
new TypeAnnotationsScanner());
Set<URL> set = ClasspathHelper.forClassLoader(classLoadersList.toArray(new ClassLoader[0]));
        FilterBuilder filterBuilder = new FilterBuilder().include(FilterBuilder.prefix(exportPackage));
        Reflections reflections = new Reflections(builder.setUrls(set).filterInputsBy(filterBuilder));

        Set<Class<? extends Object>> classSet = reflections.getTypesAnnotatedWith(MyAnnotation.class); 
```

对配置的哪些更改将有助于从动态上传的 jar 中获取类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:41:10.410

由于您正在更新自己的`WEB-INF/lib`目录，因此您的上下文类加载器不一定会捕获它。顺便说一句，我认为这是一个不好的做法：行为取决于应用程序服务器，并且此目录可能不可写，如果您从战争中运行，甚至可能不存在......

所以，我将 jar 放到其他目录并使用我的自定义类加载器。这并不难。您可以使用常规 `UrlClassLoader`. 只需将其配置为从正确的路径读取类。完成此操作后，在创建`Reflections`. 看看它的 javadcoc。构造函数可以排除各种类型的参数，包括类加载器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T16:54:30.933

从您的侦听器类（或从任何 servletContext 可用的地方），尝试使用：

```
new Reflections(ClasspathHelper.forWebInfClasses(servletContext)) 
```

或者

```
new Reflections(ClasspathHelper.forWebInfLib(servletContext)) 
```

# linq - Where 子句中的动态 LINQ 错误

> ID：13821452
> 
> 赞同：0
> 
> 时间：2012-12-11T13:27:13.923
> 
> 标签：linq

我正在尝试`Dynamic LINQ`在[ScotGu 的博客中点赞](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)

```
var select = db.San_Imovel.Where("Imovel_Id = @0", 123).Select("new(Imovel_Id)"); 
```

但我得到了错误

> '.Where(string, System.Data.Objects.OBjectsParameter[])' 的最佳重载方法匹配有一些无效参数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:32:32.233

那个123是干什么用的？为了编译它，它可能需要看起来像以下之一：

```
var select = db.San_Imovel.Where("Imovel_Id = @0").Select("new(Imovel_Id)"); 
```

或者

```
var select = db.San_Imovel.Where("Imovel_Id = @0 AND SomethingElse = 123").Select("new(Imovel_Id)"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:35:25.550

您使用的是 .net 3.5 吗？

*请注意，只有 3.5+ 支持该语法。*

使用`String.Format`：

```
var select = db.San_Imovel.Where(String.Format("Imovel_Id = {0}", 123)).Select("new(Imovel_Id)"); 
```

# ios - 自定义 UIButton 类的子视图不会触发点击

> ID：13821453
> 
> 赞同：1
> 
> 时间：2012-12-11T13:27:13.573
> 
> 标签：ios, uibutton, subview, user-interaction

我正在编写一个自定义 UIButton 子类，以创建我自己的完全自定义按钮来完全控制。尽管如此，当我尝试将子视图添加到该 UIButton 的视图时，我还是遇到了问题。子视图阻止“触摸”事件，因此它不会冒泡到 UIButton 本身。

这是一个演示：我首先创建了带有框架的 CustomNavigationButton。它是洋红色的。我可以在屏幕上看到洋红色，所以它就在那里。其次，我向那个 CustomNavigationButton（绿色）添加了一个子视图，我可以看到绿色，所以它在那里，但是如果我单击绿色矩形（子视图），则不会在我的 CustomNavigationButton 上调用“UIControlEventTouchUpInside”。

在我的 AppDelete 中：

```
CustomNavigationButton* mapBtn = [[CustomNavigationButton alloc] initWithFrame:CGRectMake(0, 0, 100, 25)];
mapBtn.backgroundColor = [UIColor magentaColor];
[mapBtn addTarget:self action:@selector(goMapHandler:) forControlEvents:UIControlEventTouchUpInside];
    [self.view addSubview:mapBtn]; 
```

这是我的 CustomNavigationButton 类（它是 UIButton 的子类）

```
@implementation CustomNavigationButton
@synthesize bg;
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {

        // STORE INITIAL FRAME
        self.initialFrame = frame;

        bg = [[UIView alloc] initWithFrame:CGRectMake(0, 20, 40, 40)];
        bg.backgroundColor = [UIColor greenColor];
        [bg setUserInteractionEnabled:YES];
        [self addSubview:bg];       

    }
    return self;
}
@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T13:38:00.207

我想出了怎么做！如果“bg”是我添加到 UIButton 的子视图，那么你应该这样做：

```
bg.userInteractionEnabled = NO;
bg.exclusiveTouch = NO; 
```

但请记住，如果您的子视图扩展了 UIButton 的框架，则不会发生触摸！您可以通过为 UIButton 提供背景颜色来检查您的子视图是否超过了 UIButton。

# math - 三角形法线指向哪里，以便我可以正确映射？

> ID：13821454
> 
> 赞同：0
> 
> 时间：2012-12-11T13:27:14.733
> 
> 标签：math, opengl, texture-mapping

这是我到目前为止所拥有的。我有一个 3D 模型，并制作了一个三角形网格。也计算了法线并将其应用于模型。我想在三角形中应用不同的纹理。我也有我需要的所有纹理的方向向量。

对于映射，我这样做：
我只是计算每个三角形法线与每个纹理的纹理方向向量的点积，然后根据点积的计算开始比较，看看哪个纹理适合。

但我意识到这并不像我想象的那么简单。因为两个或多个不同的三角形在 3D 空间中可能处于几乎相同的方向，这意味着一个可能面向我，另一个可能面向相反的方向（可能平行但方向不同）。

我认为一个更好的问题是如何使用计算出的点积来区分三角形的面，以便我知道应该使用哪个图像/纹理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:47:27.313

如果三角形朝向相反的方向，法线也将朝向相反的方向，并且点积将具有相反的符号。因此，点积为您提供了足够的信息来区分相反的面。我想不出一个比点积能给出更好结果的简单测试。

# c - 仍然得到'curl/curl.h：没有这样的文件或目录'，尽管看起来一切正常

> ID：13821457
> 
> 赞同：2
> 
> 时间：2012-12-11T13:27:21.613
> 
> 标签：c, curl, mingw

我在 Windows 上`curl 7.28.0`从控制台安装到默认目录，例如`curl-7.28.1-devel-mingw32.zip`：`minGW`

```
./config && make && make install 
```

`curl.h, types.h ...`我看到的所有需要​​的标题（又名）`C:\MinGW\msys\1.0\local\include\curl`

`libcurl.pc`放在 `C:\MinGW\msys\1.0\local\lib\pkgconfig\`

`libcurl.a`,`libcurl.dll.a`并`libcurl.la`置于`C:\MinGW\msys\1.0\local\lib`.

我的`download_file.c`文件包括：

```
...
#include <curl/curl.h>
#include <curl/types.h>
#include <curl/easy.h>
... 
```

我尝试`C`通过以下命令编译代码`gcc`：

```
$ gcc -IC:/MinGW/msys/1.0/include/ 
      -IC:/MinGW/msys/1.0/local/include/curl
      -IC:/MinGW/msys/1.0/local/lib/pkgconfig
           -o download_file download_file.c -llibcurl -lcurl 
```

使用绝对路径得到相同的错误：

```
gcc -I/include/
    -I/local/include/curl
    -I/local/lib/pkgconfig
        -o download_file download_file.c -llibcurl -lcurl 
```

但我仍然得到一个错误：

```
download_file.c:21:23: fatal error: curl/curl.h: No such file or directory compilation terminated. 
```

第 21 行是`#include <curl/curl.h>`

我做错了什么？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:39:27.270

您`curl/`在源代码中有目录，*也*有在选项中。

似乎该选项应该指出更高级别的目录`curl/`，所以它应该是这样的：

```
-I/local/include/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:31:22.240

我认为问题很可能是您在命令行上以 Win32 路径格式提供包含路径。这与 msys（或最终 Cygwin）使用的不同。

试试这些：

```
$ gcc -I/include/ 
      -I/local/include/curl
      -I/local/lib/pkgconfig
      ... 
```

希望我得到了正确的绝对路径，但你可以检查你的 msys shell。

让我失望的是你使用`./config`，它不能在命令提示符下工作，但可以在 msys shell 中工作。所以你需要给出MinGW中所有程序都能理解的路径。

基本上，MinGW 中的大多数程序只有一个文件系统根的概念，就像在任何 unixoid 系统上一样，而 Win32 有多个（驱动器号）。由于 MinGW 程序是相应链接的，因此您需要提供他们理解的路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:46:37.420

非常感谢@0xC0000022L 和@unwind。在你的帮助下，我解决了我的问题。

**0xC0000022L**你是对的绝对路径

**放松**你是对`-I/local/include/`的`-I/local/include/curl`

我发现了其他问题：`-L/local/lib`而不是`-I/local/lib`.

所以这是一个工作命令：

```
gcc -I/include/
    -I/local/include
    -L/local/lib
         -o download_file download_file.c  -llibcurl -lcurl 
```

# facebook - Facebook：是否可以通过 Graph API 删除签入？

> ID：13821460
> 
> 赞同：1
> 
> 时间：2012-12-11T13:27:35.060
> 
> 标签：facebook, facebook-graph-api, checkin

当我向 Facebook 发布签到时，API 会返回所创建故事的 ID。

我怎样才能删除这个故事？

我试图删除使用

```
DELETE -> /me/ID 
```

或者

```
DELETE -> /ID 
```

没有成功。我收到了回复`GraphMethodException: Unsupported delete request.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:46:41.857

你是对的，它对我也不起作用：

```
{
  "error": {
    "message": "Unsupported delete request.", 
    "type": "GraphMethodException", 
    "code": 100
  }
} 
```

但是，正如 Lix 所引用的：

> **注意：不推荐**发布 Checkin 对象，而是支持创建附加位置的[帖子](https://developers.facebook.com/docs/reference/api/user/#posts)。

*来自[https://developers.facebook.com/docs/reference/api/checkin/](https://developers.facebook.com/docs/reference/api/checkin/)*

这意味着不`Checkin`应该再使用它。相反，您必须创建一个`Post`.

> 您可以通过向 PROFILE_ID/feed（而不是 PROFILE_ID/posts）发出 HTTP POST 请求来代表用户创建帖子

**创建带有位置的帖子：**

![让我们在纽约办理登机手续！](../Images/afd94cfae387b2bcc3d4cb3cad777b96.png)

结果：

```
{
  "id": "1022369832_4517701013579"
} 
```

**删除带有位置的帖子：**

```
DELETE -> http://graph.facebook.com/1022369832_4517701013579 
```

结果：`true`

我想你别无选择。

# r - 尝试基于 AIC 优化我的线性模型时出现错误消息

> ID：13821462
> 
> 赞同：0
> 
> 时间：2012-12-11T13:27:44.140
> 
> 标签：r

前几天我在处理我的 R 项目并尝试基于 AIC 优化我的线性模型（使用向后选择）时，我被这样的错误消息阻止：

```
Error in stepAIC(lm(x ~ y + z), direction = "back") : 
number of rows in use has changed: remove missing values? 
```

你知道这里可能有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T19:43:17.657

```
dat <- data.frame(healthscore,sex,age.centralized,education,
    migration,unemployed,
    logIncome,BMI,smoking,sport)
fit5 <- lm(healthscore~.,data=na.omit(dat))
summary(fit5)
stepAIC(fit5) 
```

# javascript - 煎茶触摸。Ext.getStore() 函数

> ID：13821464
> 
> 赞同：0
> 
> 时间：2012-12-11T13:27:45.607
> 
> 标签：javascript, sencha-touch-2

我正在尝试通过在 sencha touch 文档示例中生成的 Oreilly 应用程序示例来学习 sencha touch。*Ext.getStore*函数返回**undefined**。

代码：

```
Ext.application({
    //name space of application
    name: 'sample',

    title: '<img src="lib/resources/images/home.png"/>',

    webserviceUrl: 'http://xxx/yyy/zzz.svc/',

    requires: ['sample.util.Proxy'],

    view: [
        'Viewport',     
        'wares.lists.Popular',
        'wares.lists.List'
    ],

    model: [
        'WaresListItem'
    ],

    store: [
        'Wares'
    ],

    launch: function() {
        Ext.Viewport.setMasked({ xtype: 'loadmask' });

        sample.util.Proxy.process(function () {
            Ext.create('sample.views.Viewport');
            Ext.Viewport.setMasked(false);
        });     
    }
});

//------

Ext.define('sample.views.Viewport', {
    extend: 'Ext.tab.Panel',

    title:   'Hello world!',

    xtype: 'viewport',

    config: {
        fullscreen: true,

        tabBar: {
            docked: 'bottom',
        },

        items: [
            { xclass: 'sample.views.wares.lists.Popular' },
        ]
    }
});

//-----

Ext.define('sample.views.wares.lists.Popular', {
    extend: 'Ext.NavigationView',

    requires: ['sample.views.wares.lists.List'],

    xtype: 'Popular',

    config: {       
        iconCls: 'home',
        title: 'List',

        items: [
            {
                xtype: 'wares',                         
            }
        ]   
    }
});

//-----

Ext.define('sample.views.wares.lists.List', {
    extend: 'Ext.List',

    xtype: 'wares',

    config: {
        store: 'Wares', 
        itemTpl: {}
    },

    initialize: function () {
        this.config.title = sample.app.title;
    }
});    

//-----

Ext.define('sample.util.Proxy', {
    singleton: true,

    requires: ['Ext.Ajax'],

    process: function(callback) {
        var wareListStore = Ext.getStore('Wares'); //returns undefinded
        var wareModel;

        console.log("Store: ", wareListStore);

        Ext.Ajax.request({
            url: sample.app.webserviceUrl + 'getSomeItems',

            disableCaching: false,
            useDefaultXhrHeader: false,

            headers: {
                "Content-Type": "application/json"
            },

            method: 'POST',

            params: JSON.stringify({"Type":3}),

            success: function (response) {
                var result = JSON.parse(response.responseText);

                if(true === result.Header.Status) {             

                    Ext.Array.each(result.Body, function (ware) {
                        wareModel = Ext.create('sample.models.WaresListItem', ware);
                        // wareListStore.add(wareModel); //raises an error

                    });                 
                } else {
                    console.log("Error code: %i", result.Header.ErrorCode);     
                }               
            },

            failure: function (response) {
                console.log('Houston, we have a problem!');
                console.log(JSON.stringify(response));
            }
        });

        callback();     
    }   
});

//-----

Ext.define('sample.store.Wares', {
    extend: 'Ext.data.Store',

    config: {
        model: "sample.models.WaresListItem"
    }
}); 
```

我重写了一切，就像在一个例子中一样。我错过了什么？

更新：在控制台中，我看到存储对象脚本根本不包括在内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T15:21:30.030

必须为数组名称赋予这些名称`views`、`controllers`、`models`等`stores`。重命名数组修复了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:17:39.597

```
Ext.define('sample.store.Wares', {
    extend: 'Ext.data.Store',

    config: {
        model: "sample.models.WaresListItem",
        storeId: 'Wares'
    }
}); 
```

试试这个应该可以......希望它有帮助......

# c++ - 给出 if 条件的逻辑混乱

> ID：13821469
> 
> 赞同：-1
> 
> 时间：2012-12-11T13:27:58.433
> 
> 标签：c++, c, boolean-logic

我想给出一个条件，即如果所有值都是 0 或 1，则执行一些逻辑。

我有三个变量。

```
 0 0 0 -> evaluates to True
   1 1 1 -> evaluates to True 
```

所有其他组合评估为 False。我该如何为此编写逻辑？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T13:29:27.790

```
bool condition1, condition2, condition3;
...
if ((condition1 == condition2) && (condition2 == condition3)) 
```

或者

```
bool allThreeEqual = (condition1 == condition2) && (condition2 == condition3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:28:17.013

首先用简单的代码表达你的想法：

```
int a, b, c;

// ...

bool eval = false; // assume false, prove otherwise

if( (a==0) && (b==0) && (c==0) )
  eval = true;
else if( (a==1) && (b==1) && (c==1) )
  eval = true; 
```

有人会争辩说上面的内容并不优雅。我不同意。以上内容简单、直接，并且易于理解、维护和扩展。对我来说，这听起来像是优雅的定义。

一旦编写了这个简单的逻辑，您就可以评估是否需要对此代码进行性能基准测试。如果你这样做了，并且你确定这确实是一个真正的瓶颈，那么你可以对它进行模式前向优化，也许通过利用元素之间的传递关系。然而，几乎每次都足够快，并且根本不需要进行任何更改。

# objective-c - iOS解析不同json字符串的正确条件

> ID：13821470
> 
> 赞同：2
> 
> 时间：2012-12-11T13:28:02.313
> 
> 标签：objective-c, ios, json

我正在为用户身份验证系统解析 json。

如果登录成功，服务器将发送以下用户对象；

```
{

    "users": {
        "id": "1",
        "FB_first_name": null,
        "FB_last_name": null,
        "FB_gender": null,
        "FB_id": null,
        "FB_link": null,
        "FB_locale": null,
        "FB_name": null,
        "FB_username": null,
        "created_at": "2011-01-02 08:30:59 UTC",
        "updated_at": "2011-01-02 08:31:23 UTC",
        "email": "admin@8repz.com",
        "language_id": "1"
    }

} 
```

我使用以下代码解析；

```
 NSDictionary *userDic = (NSDictionary*)[(NSDictionary*)results objectForKey:@"users"];

    User *aUser = [[User alloc] initWithID:[userDic objectForKey:@"id"]
                              withUserName:[userDic objectForKey:@"FB_name"]
                             withUserEmail:[userDic objectForKey:@"email"]
                             withUserFName:[userDic objectForKey:@"FB_first_name"]]; 
```

但是在无效用户的情况下，服务器会发送以下响应；

```
[

    "Invalid Email or Password."

] 
```

我应该使用什么`if()`语句来解析和显示两种情况下的响应？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T14:29:30.583

```
//parse out the json data
NSError* error;
id json = [NSJSONSerialization JSONObjectWithData:responseData options:NSJSONReadingMutableContainers error:&error];
if ([json isKindOfClass:[NSArray class]){
    //You have to be sure that on error it returns array not a dictionary
    NSArray *arr = (NSArray*)json;
    NSString *errorMsg = [arr objectAtIndex:0];
}
else {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:39:39.593

```
//IF RESPONSE IS SIMPLY A STRING OBJECT FOR INVALID STRING, YOU HAVE BAD DATA
if(![results isEqualToString:@"Invalid Email or Password."]){
     if([results objectForKey:@"users"]){  //Check to ensure users object exists
          //You're good 
           NSDictionary *userDic = (NSDictionary*)[(NSDictionary*)results objectForKey:@"users"];

            User *aUser = [[User alloc] initWithID:[userDic objectForKey:@"id"]
                              withUserName:[userDic objectForKey:@"FB_name"]
                             withUserEmail:[userDic objectForKey:@"email"]
                             withUserFName:[userDic objectForKey:@"FB_first_name"]];
     }
}else{
     //Handle error
} 
```

# c++ - 非成员非友元函数的命名空间的良好约定是什么？

> ID：13821477
> 
> 赞同：2
> 
> 时间：2012-12-11T13:28:29.510
> 
> 标签：c++, namespaces

根据[Scott Myers](http://www.drdobbs.com/cpp/how-non-member-functions-improve-encapsu/184401197)关于在大多数情况下优先使用非成员朋友函数而不是成员函数的建议，它们是有意义的 - 设置命名空间以执行此操作的推荐约定是什么？

特别是，您如何避免将所有内容嵌套到名称空间中并最终导致可读性较差的代码。如：

```
namespace Vector
{  
   class Vector2 {...};
   bool IsUnitVector(const Vector2& vector);
} 
```

导致调用，例如：

```
Vector::Vector2 position;
if (Vector::IsUnitVector(position)) {...} 
```

例如以下是否可以接受：

```
class Vector2 {...};
namespace Vector2
{
   bool IsUnitVector(const Vector2& vector);
} 
```

允许更易读、更合乎逻辑地分组的调用：

```
Vector2 position;
if (Vector2::IsUnitVector(position) {...} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:50:02.713

您可以将它们分组在同一个命名空间中，并依赖于参数相关的查找：

```
Vector::Vector2 position;
if (IsUnitVector(position)) {...}   // Magically resolves to Vector::IsUnitVector 
```

定义与类同名的命名空间充其量是令人困惑的，并且可能导致歧义错误。

# java - 匹配包含逗号的字符串（例如 1,5）

> ID：13821479
> 
> 赞同：6
> 
> 时间：2012-12-11T13:28:33.313
> 
> 标签：java, regex

我想检查我从文本字段中获取的字符串是否有逗号，以便删除它并用点请求一个新值。

我尝试使用

```
 textTestAr.trim().matches("^[,]+$") 
```

但什么也没发生，而这

```
 ^[1-9,]+$ 
```

做的伎俩，但也匹配像1这样的数字。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T13:30:29.257

你不需要在这个问题上强制使用正则表达式。一个简单的`textTestAr.indexOf(',')`就可以了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T13:31:07.663

为什么不在这里使用[String#contains](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)而不是正则表达式。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-11T13:32:03.840

插入符号`^`匹配文本的开头。`[,]+`匹配任意数量的逗号。您需要的是忽略您要查找的项目之前和之后的所有内容：

```
^.*[,].*$ 
```

点匹配除换行符以外的任何字符。`*`是重复（0 - 任何数字）。匹配文本的`$`结尾。

请注意，此处不需要修剪字符串。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-11T13:32:15.697

做就是了 `if(textTestAr.contains(",")) System.out.println("It does!");`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-12-11T13:31:15.620

做就是了`textTestAr.contains(",")`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-11T13:30:46.637

第一个断言整个字符串仅由逗号组成。第二个断言字符串由数字（除了`0`）和逗号组成，但不需要其中的一个。你可以使用这个：

```
.*,.* 
```

`^...$`请注意，使用时不需要`matches`（因为它们是隐式的）。`indexOf`但无论如何，像 Marko's 或 yentup's 这样的简单解决方案会更好。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2022-01-10T19:18:09.263

我会直接用正则表达式回答这个问题，

```
/,/ 
```

将一个或一组字母、符号或数字放入其中`//`，它会尝试专门匹配它。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-11T13:31:44.220

不需要正则表达式：

```
textTestAr.trim().replace(',','.'); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-12-11T13:34:00.267

```
 public  boolean hasComma(String string) {
    if ( string.indexOf(",") > -1) {
        return true;
    }
    return false;
} 
```

# macos - 使用 AVAssetWriterInput 保存捕获的音频时出错

> ID：13821487
> 
> 赞同：1
> 
> 时间：2012-12-11T13:28:57.383
> 
> 标签：macos

我们正在为 10.7.5 及更高版本开发录音应用程序。我们`AVCaptureAudioDataOutput`用来捕捉音频和数据是使用`AVAssetWriterInput`.

属性设置`AVAssetWriterInput`如下：

**AVFormatIDKey : kAudioFormatMPEG4AAC**
**AVSampleRateKey : 此值取自使用以下代码的设备**

```
 AudioStreamBasicDescription streanDesc;
 UInt32 propSize = sizeof(AudioStreamBasicDescription);
 AudioDeviceGetProperty(mInputDevice, 0, YES, kAudioDevicePropertyStreamFormat, &propSize,&streanDesc); 
```

**AVNumberOfChannelsKey ：取自 AudioStreamBasicDescription。**
**AVEncoderBitRateKey ：这是硬编码为 96000。**

这适用于大多数音频设备，除了采样率为 32khz 的 USB 麦克风和采样率为 48khz 的 iSight 设备。当我们将这两个设备用作输入音频设备时，在写入音频数据时，我们收到以下错误 -

```
Error Domain=AVFoundationErrorDomain Code=-11821 "Cannot Decode" UserInfo=0x279470 {NSLocalizedFailureReason=The media data could not be decoded. It may be damaged., NSUnderlyingError=0x292370 "The operation couldn’t be completed. (OSStatus error 560226676.)", NSLocalizedDescription=Cannot Decode}". 
```

但是，如果我们将 USB 麦克风硬编码`AVSampleRateKey`到 44100，它可以正常工作，但不适用于 iSight 设备。

提供什么正确的价值`AVSampleRateKey`？谁能帮我解决这个问题。

# azure - 如何通过 Management API 获取 Azure 网站的 FTP URL？

> ID：13821493
> 
> 赞同：1
> 
> 时间：2012-12-11T13:29:15.963
> 
> 标签：azure, azure-web-app-service, azure-marketplace, azure-powershell

我正在尝试从管理 REST API 获取我的 Azure 网站的 FTP 上传地址。查看[Azure SDK Tools的源代码，除了将通过 IWebsitesServiceManagement 上的](http://github.com/windowsazure/azure-sdk-tools)[GetSite](https://github.com/WindowsAzure/azure-sdk-tools/blob/master/WindowsAzurePowershell/src/Management.WebSites/Services/IWebsitesServiceManagement.cs)操作发送的网站属性外，我没有看到任何可以帮助我的东西。有没有人遇到过这个问题，并想出如何解决这个问题？

编辑：澄清和链接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T04:15:10.810

在门户中，您可以下载包含此信息的发布设置文件。在您网站的“仪表板”页面上还有一个指向 ftp 地址的链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T14:43:58.987

它已经在那里[http://msdn.microsoft.com/en-us/library/windowsazure/dn166996.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dn166996.aspx)。Powershell 仍然不可用，但至少有 API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:31:02.003

没有关于该主题的官方文档（甚至没有“预览”文档）。当您开发管理 API 工具时，您应该在此处参考[它的在线文档](http://msdn.microsoft.com/en-gb/library/windowsazure/ee460799.aspx)。鉴于此服务（网站）处于预览状态，API 可能会在任何给定时刻发生变化，所以我不会花时间在甚至没有记录的东西上。这是浪费时间。

# java - 如何动态构建 JMenu？

> ID：13821504
> 
> 赞同：1
> 
> 时间：2012-12-11T13:29:51.820
> 
> 标签：java, swing, jmenu

我正在尝试`JMenu`在单击它时构建一个动态权限（我只得到一个空菜单），下面是我的代码。

```
 final JMenu JMWindows = new JMenu("Opened Windows");                
    JMWindows.addActionListener(new ActionListener() {          
        @Override
        public void actionPerformed(ActionEvent e) {
            for(JInternalFrame ji : desktop.getAllFrames())
            {
                JMWindows.add(ji.getTitle());
            }               
        }
    }); 
```

我已经意识到 the`actionperformed`永远不会被调用，`JMenu`它在 a`JMenuBar`中。可能是什么问题呢 ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T14:45:26.070

*   您添加`ActionListener`到此`JMenu`无法`JMenu`使用[`MenuListener`](http://docs.oracle.com/javase/7/docs/api/javax/swing/event/MenuListener.html)并通过设置它[`JMenu#addMenuListener(..)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JMenu.html#addMenuListener%28javax.swing.event.MenuListener%29)

*   此外，您需要在添加/删除组件后调用实例`revalidate()`，否则更改将不会被反映（我们也可以在容器实例上调用它，即或，但我们知道只有 1 个特定会更改，因此不需要 IMO）。`repaint()``JMenu``JMenuBar``JFrame``JMenu`

*   请注意您的变量命名方案`JMWindow`应该是`jmWindow`/`jMWindow`变量总是以没有大写字母开头，并且此后每个新单词的第一个字母都大写（除了常量和`enums`）。

这是一个使用示例`MenuListener`：

![在此处输入图像描述](../Images/5d320ab03c5537ae46235d4b0e1b608f.png)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.JDesktopPane;
import javax.swing.JFrame;
import javax.swing.JInternalFrame;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.SwingUtilities;
import javax.swing.event.MenuEvent;
import javax.swing.event.MenuListener;

public class Test {

    private JDesktopPane jdpDesktop;
    private static int openFrameCount = 0;
    final JFrame frame = new JFrame("JInternalFrame Usage Demo");

    public Test() {

        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        // A specialized layered pane to be used with JInternalFrames
        jdpDesktop = new JDesktopPane() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(500, 500);
            }
        };

        for (int i = 0; i < 3; i++) {
            createFrame(); // Create first window
        }

        frame.setContentPane(jdpDesktop);

        frame.setJMenuBar(createMenuBar());

        // Make dragging faster by setting drag mode to Outline
        jdpDesktop.putClientProperty("JDesktopPane.dragMode", "outline");

        frame.pack();
        frame.setVisible(true);
    }

    protected JMenuBar createMenuBar() {
        JMenuBar menuBar = new JMenuBar();
        JMenu menu = new JMenu("Frame");
        menu.setMnemonic(KeyEvent.VK_N);
        JMenuItem menuItem = new JMenuItem("New IFrame");
        menuItem.setMnemonic(KeyEvent.VK_N);
        menuItem.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent e) {
                createFrame();
            }
        });
        menu.add(menuItem);
        menuBar.add(menu);

        final JMenu jmWindows = new JMenu("Opened Windows");
        jmWindows.addMenuListener(new MenuListener() {
            @Override
            public void menuSelected(MenuEvent me) {
                jmWindows.removeAll();//remove previous opened window jmenuitems
                for (JInternalFrame ji : jdpDesktop.getAllFrames()) {
                    JMenuItem menuItem = new JMenuItem(ji.getTitle());
                    jmWindows.add(menuItem);
                }

                jmWindows.revalidate();
                jmWindows.repaint();
                jmWindows.doClick();

            }

            @Override
            public void menuDeselected(MenuEvent me) {
            }

            @Override
            public void menuCanceled(MenuEvent me) {
            }
        });
        menuBar.add(jmWindows);

        return menuBar;
    }

    protected void createFrame() {
        Test.MyInternalFrame frame = new Test.MyInternalFrame();
        frame.setVisible(true);
        // Every JInternalFrame must be added to content pane using JDesktopPane
        jdpDesktop.add(frame);
        try {
            frame.setSelected(true);
        } catch (java.beans.PropertyVetoException e) {
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new Test();
            }
        });
    }

    class MyInternalFrame extends JInternalFrame {

        static final int xPosition = 30, yPosition = 30;

        public MyInternalFrame() {
            super("IFrame #" + (++openFrameCount), true, // resizable
                    true, // closable
                    true, // maximizable
                    true);// iconifiable
            setSize(300, 300);
            // Set the window's location.
            setLocation(xPosition * openFrameCount, yPosition
                    * openFrameCount);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:33:20.400

添加或删除某些内容后，您需要重新绘制和/或验证您的框架。您可以为此使用方法`repaint()`和`validate()`JFrame

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:48:11.760

您错过了定义 JMenuItem。

```
 final JMenu JMWindows = new JMenu("Opened Windows");                
    JMWindows.addActionListener(new ActionListener() {          
        @Override
        public void actionPerformed(ActionEvent e) {
            for(JInternalFrame ji : desktop.getAllFrames())
            {
                JMenuItem menuItem = new JMenuItem(ji.getTitle());
                JMWindows.add(menuItem);
            }               
        }
    }); 
```

# jquery - 如何在点击时进行浏览器放大效果

> ID：13821513
> 
> 赞同：1
> 
> 时间：2012-12-11T13:30:27.137
> 
> 标签：jquery, html, browser, zooming

我想在用户单击按钮时添加浏览器缩放效果。这适用于老年人，因此他们可以放大文本以使其更易于阅读。我不想让实际文本变大，因为它会弄乱网页的布局。我怎样才能做到这一点？

我已经在几个实现类似的网站上看到了 AAA 按钮。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:35:39.637

直接浏览器控制本身不应该由脚本驱动，在某些情况下会很危险。浏览器以不同的方式实现缩放，据我所知，没有“本机 API”可以做到这一点。

您最接近的是更改图像和字体大小。我知道，这不是您希望的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:39:25.507

我想说，如果您需要，您可以创建 3 个不同的按钮来切换标签上的活动类，并且每个类都应该有一些字体大小定义。

```
<a data-size="small">small</a>
<a data-size="normal">normal</a>
<a data-size="large">large</a>

$("a").on("click", function(){
    $("html").removeClass().addClass($(this).data("size"));
});

html.small{font-size:12px;}
html.normal{font-size:20px;}
html.large{font-size:36px;} 
```

# jquery - Instagram - jQuery - 身份验证

> ID：13821515
> 
> 赞同：0
> 
> 时间：2012-12-11T13:30:28.287
> 
> 标签：jquery, api, instagram

twitter API 允许我通过搜索获取​​我的推文列表或其他任何人，而无需进行身份验证。Instagram 有可能吗？我想在不登录的情况下获取自己的照片。有人可以`$.ajax()`打电话来做这件事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:25:09.493

您必须在 Instagram 注册您的服务器或程序并获得`CLIENT-ID`. 然后，您可以使用该客户端 ID 调用 Instagram API，但如果您将访问令牌用作经过身份验证的用户，您将获得更多详细信息。

获取当前最流行照片的快速示例（替换`{CLIENT-ID}`为您自己的 ID）：

```
<script>
$.ajax({
  type: "GET",
  dataType: "jsonp",
  cache: false,
  url: "https://api.instagram.com/v1/media/popular?client_id={CLIENT-ID}",
  success: function(response) {
    for (var i=0; i<25; i++)  
    {
       $("#photos").append("<div class='instagram-pics'><a target='_blank' href='" + response.data[i].link +"'><img class='instagram-img' src='" + response.data[i].images.low_resolution.url +"' /></a></div>");  
    }
  }
});
</script>
<div id="photos"></div> 
```

# c# - 从 MVC 路由处理程序返回 404

> ID：13821517
> 
> 赞同：2
> 
> 时间：2012-12-11T13:30:32.420
> 
> 标签：c#, asp.net-mvc-3, routes, httphandler, blacklist

我有一个 IP 列表，这些 IP 不断爬取我们的实时站点，当它们使用不带参数的某些 URL 时抛出异常（因为 MVC 路由）。我想阻止这些 IP 地址并在可以获取它们后立即返回 404 not found 页面，但我不想在 IIS 中执行此操作，因为我想在我们的应用程序中记录遭遇。

我编写了一个包罗万象的路由处理程序，它使用自定义 MvcHandler 来检查列表并修改响应：

```
public class ApplicationRouteHandler : IRouteHandler
{
    public IHttpHandler GetHttpHandler(RequestContext requestContext)
    {
        BlacklistedIPAddressHandler handler = new BlacklistedIPAddressHandler(Cache.WebsiteCache.GetBlacklistedIPList(), requestContext);

        return handler;
    }
}

public class BlacklistedIPAddressHandler : MvcHandler
{
    List<IPBlacklistModel> blacklist;

    public BlacklistedIPAddressHandler(List<IPBlacklistModel> Blacklist, RequestContext requestContext) : base(requestContext)
    {
        blacklist = Blacklist;
    }

    protected override IAsyncResult BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, object state)
    {
        var ip = httpContext.Request.UserHostAddress;

        if (blacklist != null &&
            blacklist.Where(x => x.IP_ADDRESS.Contains(ip)).Count() > 0)
        {

            httpContext.Response.ClearHeaders();
            httpContext.Response.Clear();

            httpContext.Response.StatusCode = 404;
            httpContext.Response.SuppressContent = true;
            httpContext.Response.End();
        }

        return base.BeginProcessRequest(httpContext, callback, state);
    }
} 
```

然后实现如下：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.MapRoute(
            "Default",
            "{controller}/{action}/{id}",
            new { controller = "Home", action = "Index", id = UrlParameter.Optional },
            new { controller = @"[^\.]*" }
        ).RouteHandler = new Helpers.Routing.ApplicationRouteHandler();
    } 
```

执行此操作时，在发送 HTTP 标头后，我不断收到服务器无法附加标头错误。可能有人知道为什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:32:27.093

我想你应该`httpContext.Response.End();`从你的处理程序中删除语句 - 因为请求被传递以进行进一步处理，它现在不应该被终止。

`HttpResponse.End`[来自MSDN](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.end.aspx)的方法描述：

> 将所有当前缓冲的输出发送到客户端，停止页面的执行，并引发 EndRequest 事件。

# javascript - Javascript onbeforeunload - 在退出时显示图像

> ID：13821521
> 
> 赞同：0
> 
> 时间：2012-12-11T13:30:45.283
> 
> 标签：javascript, jquery

我正在使用以下代码，以便如果用户关闭浏览器按钮，它会显示一个确认框，无论是否留在页面上。

我想要做的是，如果有人关闭浏览器，它应该显示一个图像，带有“是”或“否”选项。单击“是”时应关闭浏览器，单击“否”时不应关闭浏览器。图像必须显示在同一窗口中，而不是任何弹出窗口中。是否有可能做到这一点，还是我对 JavaScript 期望过高？

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

<script type="text/javascript">
var exit=true;
    function confirmExit()
            {
            if(exit)
            {
            window.location.href = "?p=exit";
            }
            if(exit)
            return "Wait! Don't Leave Empty Handed!\n\nThank you for taking the time to check out our offer! Before you go we have a complimentary crash to help you succeed. Click the 'Cancel' or 'Stay On This Page' button if you're interested!";
            }
</script>
</head>
<body  onbeforeunload="return confirmExit()">
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:33:20.997

您无法更改`onbeforeunload()`默认行为，因为它是每个浏览器的原生行为。您只能返回自定义字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:36:09.013

这真的很烦人，我建议不要这样做。但是，如果您使用`window.open`. 不过，弹出窗口拦截器可能会阻止它。`onbeforeunload`在这种情况下，您可以从弹出的回调中返回一个字符串，但它是按浏览器处理的（即 Firefox 将打印自己的字符串，而不是您发回的字符串）。

我重申，除非客户正在做一些潜在的重要处理，否则我不会做任何事情来阻止某人关闭他们的浏览器或以其他方式离开。

# c++ - 在包含不同子类的向量中的某些对象上调用函数

> ID：13821523
> 
> 赞同：0
> 
> 时间：2012-12-11T13:30:49.790
> 
> 标签：c++, oop, inheritance, vector, subclass

我有这样的事情：

```
class A {
    void add (A* a) {
        //add a to a vector<A*>
    }
    virtual void draw() = 0;
}

class B : public A {
    void tick() {}
    void draw() {}
}

class C : public A {
    void draw() {}
} 
```

现在我想做的是有一个这样的循环：

```
for(int i=0; i<vector.size(); i++) {
    vector[i]->tick();
} 
```

问题是不是这个向量中的所有元素都有`tick()`方法，但我仍然希望它们在同一个向量中，因为我还希望能够循环遍历向量并调用`draw()`所有元素。有没有办法解决这个问题？我正在考虑使用另一个向量，但我不想这样做。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T13:41:51.037

如果你有一个`vector`小部件，但只有其中一些小部件有 dingbat，它们真的都是小部件吗？

在你的情况下，你有`vector`一些不一样的东西。这是你的问题。当然，你可以想出一些复杂而复杂的机制，将战舰放入铅笔杯中。或者你可以做我认为是正确的事情之一：

1.  确保你放入铅笔杯的所有东西都是铅笔
2.  创建其他地方放置战舰。

正如您已经提到的，上面的 2 号是创建一个单独的向量。数字 1 可能就像`virtual tick()`在基类上提供一个具有空（平凡）实现的方法一样简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:39:16.037

[我认为您可以在这种情况下](http://sourcemaking.com/design_patterns/visitor/cpp/2)使用访问者模式。但这不是最好的解决方案。你刹车里氏替换原则。重新考虑你的层次结构。

# vbscript - 日-时-分格式的日期差异

> ID：13821530
> 
> 赞同：0
> 
> 时间：2012-12-11T13:31:11.563
> 
> 标签：vbscript

我们可以使用 VBScript 以 Day-Hour-Minutes 格式获取两个日期值的差异吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T13:35:14.083

这是一个 HH::MM:SS 示例，将其更改为 DD::HH::MM 应该很容易

[ASP FAQ - 日期时间例程操作](http://classicasp.aspfaq.com/date-time-routines-manipulation/how-do-i-convert-a-timespan-in-seconds-to-hh-mm-ss.html)

```
<% 
    Function TimeSpan(dt1, dt2) 
        If (isDate(dt1) And IsDate(dt2)) = false Then 
            TimeSpan = "00:00:00" 
            Exit Function 
        End If 

        seconds = Abs(DateDiff("S", dt1, dt2)) 
        minutes = seconds \ 60 
        hours = minutes \ 60 
        minutes = minutes mod 60 
        seconds = seconds mod 60 

        if len(hours) = 1 then hours = "0" & hours 

        TimeSpan = hours & ":" & _ 
            RIGHT("00" & minutes, 2) & ":" & _ 
            RIGHT("00" & seconds, 2) 
    End Function 

    d1 = "2002-03-27 9:20:25 AM" 
    d2 = "2002-03-27 9:20:45 AM" 

    Response.Write TimeSpan(d1, d2) 
%> 
```

类似的东西：（我不确定，我不知道 vbscript）

```
<% 
    Function TimeSpan(dt1, dt2) 
        If (isDate(dt1) And IsDate(dt2)) = false Then 
            TimeSpan = "00:00:00" 
            Exit Function 
        End If 

        seconds = Abs(DateDiff("S", dt1, dt2)) 
        minutes = seconds \ 60 
        hours = minutes \ 60 
        days  = hours \ 24
        minutes = minutes mod 60 
        seconds = seconds mod 60 
        hours   = hours   mod 24 

        if len(hours) = 1 then hours = "0" & hours 

        TimeSpan = days& ":" & _ 
            RIGHT("00" & hours , 2) & ":" & _ 
            RIGHT("00" & minutes, 2) 
    End Function 

    d1 = "2002-03-27 9:20:25 AM" 
    d2 = "2002-03-27 9:20:45 AM" 

    Response.Write TimeSpan(d1, d2) 
%> 
```

# ios - 使用 Magical Record 获取记录时如何获取“最新记录”

> ID：13821534
> 
> 赞同：0
> 
> 时间：2012-12-11T13:31:28.320
> 
> 标签：ios, core-data, magicalrecord

获取记录时如何获取最新记录？

例如：

*   第一次迭代我用对象名称 Country 保存“Singapore”，
*   第二次迭代我用对象名称 Country,second 保存“USA”

现在当我拿它的时候

```
SomeDatabase *Country = [SomeDatabase MR_findFirst];

NSLog(@"Country Name---->%@",Country.Name); 
```

我得到“新加坡”，

我想将最后一条记录插入 coredata，它应该是“美国”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T17:10:42.847

最直接的方法是向您的实体添加“createdDate”或类似的日期字段。然后你可以简单地使用查询：

```
[MyEntity MR_findFirstOrderedByAttribute:@"createdDate" ascending:NO]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-01-13T16:12:13.120

**SWIFT 3** 如果您想添加额外的查询参数：

```
let predicate = NSPredicate(format: "(attribute1 = %@ && attribute2 = %@ && date <= %@)", argument1, argument2, yourdate as NSDate)
let fetch = YourCCEntity.mr_requestAllSorted(by: "date", ascending: false, with: predicate)
let latestObject = YourCCEntity.mr_executeFetchRequestAndReturnFirstObject(fetch) 
```

这`as NSDate`是必要的，因为 Xcode 错误（一些 Swift 类不使用 NSPredicate 参数）

# android - SearchView 过滤 ListView

> ID：13821536
> 
> 赞同：5
> 
> 时间：2012-12-11T13:31:40.410
> 
> 标签：android, android-listview, searchview

我已经实现了过滤我的列表视图项目的搜索视图。当我输入任何文本时，它会过滤列表，但是当我退出搜索视图时，它不会返回原始列表项。

```
public class PlacesListAdapter extends ArrayAdapter<Place> implements
        Filterable {
    public Context context;
    private List<Place> places, orig, itemDetailsrrayList;
    private PlaceFilter filter;

    public PlacesListAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    public PlacesListAdapter(Context context, int resource, List<Place> places) {
        super(context, resource, places);
        this.context = context;
        this.places = places;

        itemDetailsrrayList = places;
        orig = itemDetailsrrayList;

        filter = new PlaceFilter();
        // imageLoader = new ImageLoader(context.getApplicationContext());

    }

    public int getCount() {
        return itemDetailsrrayList.size();
    }

    public Place getItem(int position) {
        return itemDetailsrrayList.get(position);
    }

    public long getItemId(int position) {
        return position;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {

        ViewHolder holder;
        // View view = convertView;
        // Place p = places.get(position);

        if (convertView == null) {
            LayoutInflater viewInflater;
            viewInflater = LayoutInflater.from(getContext());
            convertView = viewInflater.inflate(R.layout.item_place, null);

            holder = new ViewHolder();
            holder.placeTitle = (TextView) convertView
                    .findViewById(R.id.place_title);
            holder.placeDistance = (TextView) convertView
                    .findViewById(R.id.place_distance);
            holder.placeCategoryIcon = (ImageView) convertView
                    .findViewById(R.id.place_category_icon);

            convertView.setTag(holder);

        } else {
            holder = (ViewHolder) convertView.getTag();
        }

        holder.placeTitle.setText(itemDetailsrrayList.get(position)
                .getPlaceTitle());
        holder.placeDistance.setText("200");
        holder.placeCategoryIcon.setImageResource(R.drawable.icon_category);

        return convertView;
    }

    static class ViewHolder {
        TextView placeId;
        TextView placeTitle;
        TextView placeDistance;
        ImageView placeCategoryIcon;
    }

    @Override
    public Filter getFilter() {
        // TODO Auto-generated method stub
        return filter;
    }

    private class PlaceFilter extends Filter {

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
            FilterResults oReturn = new FilterResults();
            ArrayList<Place> results = new ArrayList<Place>();
            if (orig == null)
                orig = itemDetailsrrayList;
            if (constraint != null) {
                if (orig != null && orig.size() > 0) {
                    for (Place g : orig) {
                        if (g.getPlaceTitle().toLowerCase()
                                .contains(constraint.toString().toLowerCase()))
                            results.add(g);
                    }
                }
                oReturn.values = results;
            }
            return oReturn;
        }

        @SuppressWarnings("unchecked")
        @Override
        protected void publishResults(CharSequence constraint,
                FilterResults results) {
            itemDetailsrrayList = (ArrayList<Place>) results.values;
            notifyDataSetChanged();
        }

    }
} 
```

**MainActivity.java**

```
public class MainActivity extends SherlockFragmentActivity implements
        SearchView.OnQueryTextListener {
    protected static CharSequence[] _categories = { "Amusement Park",
            "Bird Sanctuary", "Wild Life", "River", "Hill Station", "Temple",
            "Rafting", "Fishing", "Hiking", "Museums" };

    protected static boolean[] _selections = new boolean[_categories.length];

    private final String[] places = new String[] { "Mysore", "Bangalore",
            "Mangalore", "Wayanad", "Bandipur National Park", "Chickmaglur",
            "Bandipura", "Coorg", "Kodaikanal", "Hampi", "Ghati Subramanya",
            "Mekedatu", "Muththathhi", "Shivasamudram", "Talakadu",
            "Savana Durga" };

    public SearchView mSearchView;
    private TextView mStatusView;

    private Menu mainMenu = null;

    PlacesListAdapter adapter;
    ListView listView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        getWindow().requestFeature(Window.FEATURE_ACTION_BAR);
        setContentView(R.layout.activity_main);

        Log.i("Nomad", "onCreate");

        List<Place> thePlaces = new ArrayList<Place>();
        for (int i = 0; i < places.length; i++) {
            Place pl = new Place("NO_ID", places[i], "NO_DISTANCE",
                    "NO_CATEGORYICON");
            thePlaces.add(pl);
        }

        listView = (ListView) findViewById(R.id.place_list);
        adapter = new PlacesListAdapter(MainActivity.this, R.layout.item_place,
                thePlaces);

        listView.setAdapter(adapter);
        listView.setTextFilterEnabled(true);

        mSearchView = (SearchView) findViewById(R.id.action_search);

        listView.setOnItemClickListener(new OnItemClickListener() {
            @Override
            public void onItemClick(AdapterView<?> a, View view, int position,
                    long id) {

                Toast.makeText(MainActivity.this, "Test", Toast.LENGTH_SHORT);
                startActivity(new Intent(MainActivity.this, PlaceActivity.class));
            }
        });

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        Log.i("Nomad", "onCreateOptionsMenu");
        super.onCreateOptionsMenu(menu);
        MenuInflater inflater = getSupportMenuInflater();
        inflater.inflate(R.menu.activity_main, menu);

        mainMenu = menu;

        MenuItem searchItem = menu.findItem(R.id.action_search);

        // Search View
        mSearchView = (SearchView) searchItem.getActionView();
        setupSearchView(searchItem);

        mSearchView.setOnSearchClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                // hide action item
                if (mainMenu != null) {
                    mainMenu.findItem(R.id.action_category).setVisible(false);
                    mainMenu.findItem(R.id.action_sort).setVisible(false);
                }

            }
        });
        mSearchView.setOnCloseListener(new SearchView.OnCloseListener() {
            @Override
            public boolean onClose() {
                // re-show the action button
                if (mainMenu != null) {
                    mainMenu.findItem(R.id.action_category).setVisible(true);
                    mainMenu.findItem(R.id.action_sort).setVisible(true);
                }
                return false;

            }
        });

        Log.i("Nomad", "after setupSearchView()");
        return true;
    }

    public boolean onOptionsItemSelected(MenuItem item) {

        switch (item.getItemId()) {

        case R.id.action_search:
            Toast.makeText(this, "Searh", Toast.LENGTH_LONG).show();
            Log.i("Nomad", "Click Search");
            break;

        case R.id.action_category:
            showDialog();
            break;
        case R.id.action_sort_alpha_az:
            Toast.makeText(this, "Alpha AZ", Toast.LENGTH_LONG).show();
            break;
        case R.id.action_sort_alpha_za:
            Toast.makeText(this, "Alpha ZA", Toast.LENGTH_LONG).show();
            break;
        case R.id.action_sort_dist_nf:
            Toast.makeText(this, "Dist NF", Toast.LENGTH_LONG).show();
            break;
        case R.id.action_sort_dist_fn:
            Toast.makeText(this, "Dist FN", Toast.LENGTH_LONG).show();
            break;
        default:
            // return super.onOptionsItemSelected(item);
            break;
        }
        return true;
    }

    private void setupSearchView(MenuItem searchItem) {
        mSearchView.setIconifiedByDefault(true);
        mSearchView.setOnQueryTextListener(this);
        mSearchView.setSubmitButtonEnabled(false);

        searchItem.setShowAsActionFlags(MenuItem.SHOW_AS_ACTION_ALWAYS);
        // | MenuItem.SHOW_AS_ACTION_COLLAPSE_ACTION_VIEW
    }

    public boolean onQueryTextChange(String newText) {
        Log.i("Nomad", "onQueryTextChange");

        if (TextUtils.isEmpty(newText)) {
            Log.i("Nomad", "onQueryTextChange Empty String");
            listView.clearTextFilter();
        } else {
            Log.i("Nomad", "onQueryTextChange " + newText.toString());
            adapter.getFilter().filter(newText.toString());
        }
        return true;
    }

    public boolean onQueryTextSubmit(String query) {
        Log.i("Nomad", "onQueryTextSubmit");
        return false;
    }

    public boolean onClose() {
        Log.i("Nomad", "onClose");
        return false;
    }

    protected boolean isAlwaysExpanded() {
        return false;
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:39:49.237

由于以下几行，您的两个`ArrayList`带有适配器的对象指向同一个对象：

```
itemDetailsrrayList = places;
orig = itemDetailsrrayList; 
```

该`orig`列表应保持完整，以便您可以在需要时返回原始数据：

```
orig = new ArrayList<String>(itemDetailsrrayList); 
```

如果这不能解决问题，您可能需要显示一些与搜索视图相关的代码。

# mocha.js - 如何将 mocha jstestdriver 添加到 webstorm

> ID：13821538
> 
> 赞同：2
> 
> 时间：2012-12-11T13:31:42.547
> 
> 标签：mocha.js, webstorm, js-test-driver

我想使用 WebStorm IDE 的内置 JsTestDriver 功能和代码覆盖支持。但是，我使用摩卡而不是茉莉。

如何配置 webstorm 以识别 mocha，或使用 mocha 插件？

我确实找到了这段代码来在网上创建一个 mocha jstestdriver 适配器，但不知道如何以及在哪里将它添加到 webstorm ......

```
/**
 * Mocha JsTestDriver Adapter.
 * @author jan@prachar.eu (Jan Prachar)
 */
(function(){

    /**
     * Our mocha setup
     */
    var setup = mocha.setup;
    var mochaOptions = {};

    mocha.setup = function (opts) {
        if ('string' === typeof opts) {
            mochaOptions.ui = opts;
        } else {
            mochaOptions = opts;
        }

        setup.call(mocha, mochaOptions);
    };

    var getReporter = function (onTestDone, onComplete) {
        var Base = mocha.reporters.Base;
        var Reporter = function (runner) {
            var self = this;

            Base.call(this, runner);
            this.onTestDone = onTestDone;
            this.onComplete = onComplete;

            this.reset = function () {
                jstestdriver.console.log_ = [];
            };

            this.reset();

            runner.on('start', function () {
            });

            runner.on('suite', function (suite) {
            });

            runner.on('suite end', function (suite) {
            });

            runner.on('test', function (test) {
                self.reset();
            });

            runner.on('pending', function () {
            });

            runner.on('pass', function (test) {
                self.onTestDone(new jstestdriver.TestResult(
                    test.parent.fullTitle(),
                    test.title,
                    'passed',
                    '',
                    '',
                    test.duration
                ));
            });

            runner.on('fail', function (test, err) {
                var message = {
                    message: err.message,
                    name: '',
                    stack: err.stack
                };
                self.onTestDone(new jstestdriver.TestResult(
                    test.parent.fullTitle(),
                    test.title,
                    'failed',
                    jstestdriver.angular.toJson([message]),
                    '',
                    test.duration
                ));
            });

            runner.on('end', function () {
                self.onComplete();
            });
        };

        // Inherit from Base.prototype
        Reporter.prototype.__proto__ = Base.prototype;

        return Reporter;
    };

    var MOCHA_TYPE = 'mocha test case';
    TestCase('Mocha Adapter Tests', null, MOCHA_TYPE);

    jstestdriver.pluginRegistrar.register({

        name: 'mocha',

        getTestRunsConfigurationFor: function (testCaseInfos, expressions, testRunsConfiguration) {
            for (var i = 0; i < testCaseInfos.length; i++) {
                if (testCaseInfos[i].getType() === MOCHA_TYPE) {
                    testRunsConfiguration.push(new jstestdriver.TestRunConfiguration(testCaseInfos[i], []));
                }
            }
        },

        runTestConfiguration: function (config, onTestDone, onComplete) {
            if (config.getTestCaseInfo().getType() !== MOCHA_TYPE) return false;

            mochaOptions.reporter = getReporter(onTestDone, onComplete);
            mocha.setup(mochaOptions);
            mocha.run();
            return true;
        },

        onTestsFinish: function () {

        }

    });

})(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T09:49:45.053

*   这`Mocha Adapter`真的有效吗？
*   你能从命令中测试它吗？

我想它的配置方式类似于`jasmineAdapter.js`下面的配置方式。

```
server: http://<localhost>:4224

load: 
  - tools/Jasmine/jasmine.js
  - tools/Jasmine/jasmineAdapter.js
  - lib/require.js
  - src/*.js

test:   
  - specs/*.js 
```

# php - Mysql or flat file or php get request JSON

> ID：13821542
> 
> 赞同：0
> 
> 时间：2012-12-11T13:32:27.953
> 
> 标签：php, json, model-view-controller, scalability

关于 Web 应用程序的最佳实践/扩展的问题。

访问所有用户都依赖且无法修改的应用程序设置的最佳方式是什么。数据需要以 JSON 格式提供，应用程序是用 PHP / JS 编写的。

在我心中有3种方式：

1.  将 json 作为 php get 请求提供服务，该请求将调用 final 方法

    ```
    final function get_requestJSON() 
    {
        return json_encode(array(.... ));
    } 
    ```

2.  服务是作为其中写入 JSON 的平面文件并使用 file_get_contents

3.  将其以文本格式存储在 MySQL 中，并使用模型直接访问它。

其中哪一个会被认为是最快的？

有什么想法吗？

*   j

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:37:02.947

在这种情况下不要担心速度（除非您知道错误的解决方案会慢得令人无法接受），而是考虑您的要求。尤其如此，因为如果您通过客户端发出服务器调用，无论如何都会有延迟，这可能会使此操作的时间相形见绌。

此外，这些场景并不相互排斥。您可以将内容存储在数据库中，并使用 JSON 作为来回发送内容的协议（例如）。

我建议您考虑一下现在和将来您可以看到使用此信息所做的所有事情，并让这些指导您做出决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:37:49.070

综合考虑，带有方法的 php 库对我来说是最好的解决方案。谢谢你的信息。

# javascript - win-listview 高度如何设置？-WinJS

> ID：13821550
> 
> 赞同：5
> 
> 时间：2012-12-11T13:32:52.460
> 
> 标签：javascript, css, windows-8, winjs, internet-explorer-10

这把我逼疯了。我不知道如何使列表视图的高度自动。

即让列表视图的高度扩展以占据它需要的所有空间，并让外部容器提供溢出-y 滚动功能。

不幸的是，我似乎找不到任何关于此的文档。

帮助会很棒。谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-11T15:53:42.573

ListView 控件默认为 400px 高。这是 ui-light.css 文件的第 1421 行。您可以通过在页面上添加规则来覆盖它，例如：

.win-listview { 高度：100%; /*（或者你可以用'600px'之类的东西绝对指定）*/}

在开发中心的[这个页面](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/br211837.aspx)上，它说......

> **设置 ListView 控件的高度**
> 
> ListView 不会动态调整其高度以适应您的内容。对于要呈现的 ListView，您必须为其高度指定一个绝对值。JavaScript 样式表的 Windows 库将 ListView 控件的高度设置为 400 像素。

从设计的角度来看，您可能不应该在 ListView 上进行垂直滚动。它们被设计成水平布局（就像一般的应用程序一样）。结合水平和垂直滚动可能会带来尴尬的用户体验。我写了一些关于这个的[文章](http://codefoster.com/search.aspx?q=panning)。

# mercurial - hglib-python 提交测试用例

> ID：13821558
> 
> 赞同：0
> 
> 时间：2012-12-11T13:33:44.567
> 
> 标签：mercurial

我正在`hglib-erlang`为转换`hglib-python`为 erlang 语言模块而写作。在 的文件中`"test-push.py"`，有一个测试用例如下。

我认为第二个`commit('second')`没有什么可提交的并给出错误信息。只有一个日志项`('first')`。这样对吗？

```
class test_push(common.basetest):
    def test_basic(self):
        self.append('a', 'a')
        self.client.commit('first', addremove=True)

        self.client.clone(dest='other')
        other = hglib.open('other')

        # broken in hg, doesn't return 1 if nothing to push
        #self.assertFalse(self.client.push('other'))

        self.append('a', 'a')
        self.client.commit('second')

        self.assertTrue(self.client.push('other'))
        self.assertEquals(self.client.log(), other.log()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T15:10:49.113

通过粗略阅读此测试代码，似乎`self.append('a', 'a')`对虚拟副本进行了更改，因此可以`self.client.commit('second')`正常工作。

# playorm - Amazon AWS Elastic Map Reduce 的 @NoSqlId 中的 Playorm ScannerForClass 异常

> ID：13821560
> 
> 赞同：1
> 
> 时间：2012-12-11T13:33:51.903
> 
> 标签：playorm

我在 localhost 或 AWS EC2 实例中的 jar 就像一个魅力，但只是在 Elastic MapReduce 上它失败并出现“从未见过”异常：

`Caused by: java.lang.IllegalArgumentException: class=class com.alvazan.orm.impl.meta.data.MetaClassSingle has two fields that have @NoSqlId annotation. One of them may be in a superclass`

我试图从***@NoSqlId中删除******(usegenerator = true)***，但没有奏效。

 ****例外：**

```
2012-12-11 12:00:14,454 INFO com.alvazan.orm.logging.NoSqlRawLogger (main): [rawlogger] starting NoSQL Service Provider and connecting
2012-12-11 12:00:14,637 INFO com.netflix.astyanax.connectionpool.impl.ConnectionPoolMBeanManager (main): Registering mbean: com.netflix.MonitoredResources:type=ASTYANAX,name=MyConnectionPool,ServiceType=connectionpool
2012-12-11 12:00:15,261 INFO com.alvazan.orm.layer9z.spi.db.cassandra.ColumnFamilyHelper (main): On keyspace=dmpExisting column families=[stringindice, dbocolumnmeta, dbodatabasemeta, dbotablemeta]
NOTE: WE WILL CREATE new column families automatically as you save entites that have no column family
2012-12-11 12:00:15,262 INFO com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl (main): Begin scanning for jars with nosql.Persistence.class
2012-12-11 12:00:15,289 INFO com.impetus.annovention.ClasspathDiscoverer (main): adding folder to scan=file:/mnt/var/lib/hadoop/tmp/hadoop-unjar5809470263616901335/
2012-12-11 12:00:15,289 INFO com.impetus.annovention.ClasspathDiscoverer (main): adding jar file for scanning=jar:file:/home/hadoop/project_w.jar!/
2012-12-11 12:00:16,212 INFO com.alvazan.orm.impl.meta.scan.ScannerForClass (main): scanning class=class com.s1mbi0se.dmp.da.bean.UserURL
2012-12-11 12:00:16,260 INFO com.alvazan.orm.api.z8spi.meta.DboTableMeta (main): [proxies loaded in this one]classloaders that proxies class exists in=classloader list={java.net.URLClassLoader@158f9d3,sun.misc.Launcher$AppClassLoader@1cde100,sun.misc.Launcher$ExtClassLoader@16f0472,}
2012-12-11 12:00:16,260 INFO com.alvazan.orm.api.z8spi.meta.DboTableMeta (main): [context classloader]classloaders that proxies class exists in=classloader list={java.net.URLClassLoader@158f9d3,sun.misc.Launcher$AppClassLoader@1cde100,sun.misc.Launcher$ExtClassLoader@16f0472,}
2012-12-11 12:00:16,260 INFO com.alvazan.orm.api.z8spi.meta.DboTableMeta (main): [system classloader]classloaders that proxies class exists in=classloader list={sun.misc.Launcher$AppClassLoader@1cde100,sun.misc.Launcher$ExtClassLoader@16f0472,}
2012-12-11 12:00:16,260 INFO com.alvazan.orm.api.z8spi.meta.DboTableMeta (main): [play jar in this classloader]classloaders that proxies class exists in=classloader list={java.net.URLClassLoader@158f9d3,sun.misc.Launcher$AppClassLoader@1cde100,sun.misc.Launcher$ExtClassLoader@16f0472,}
2012-12-11 12:00:16,260 INFO com.alvazan.orm.api.z8spi.meta.DboTableMeta (main): [javassist jar in this classloader]classloaders that proxies class exists in=classloader list={java.net.URLClassLoader@158f9d3,sun.misc.Launcher$AppClassLoader@1cde100,sun.misc.Launcher$ExtClassLoader@16f0472,}
2012-12-11 12:00:16,453 INFO com.alvazan.orm.impl.meta.scan.ScannerForClass (main): scanning class=class com.s1mbi0se.dmp.da.bean.Request
2012-12-11 12:00:16,473 INFO com.alvazan.orm.impl.meta.scan.ScannerForClass (main): scanning class=class com.s1mbi0se.dmp.da.bean.User
2012-12-11 12:00:17,167 INFO com.alvazan.orm.impl.meta.scan.ScannerForClass (main): scanning class=class com.alvazan.orm.api.z8spi.meta.DboColumnMeta
2012-12-11 12:00:17,246 INFO com.alvazan.orm.impl.meta.scan.ScannerForClass (main): scanning class=class com.alvazan.orm.api.z8spi.meta.DboDatabaseMeta
2012-12-11 12:00:17,248 INFO com.alvazan.orm.impl.meta.scan.ScannerForClass (main): scanning class=class com.alvazan.orm.api.z8spi.meta.DboTableMeta
2012-12-11 12:00:17,313 INFO com.alvazan.orm.impl.meta.scan.ScannerForClass (main): scanning class=class com.alvazan.play.logging.LogEvent
2012-12-11 12:00:17,318 INFO com.alvazan.orm.impl.meta.scan.ScannerForClass (main): scanning class=class com.alvazan.play.logging.ServersThatLog
2012-12-11 12:00:28,399 INFO com.alvazan.orm.impl.meta.scan.ScannerForClass (main): scanning class=class com.s1mbi0se.dmp.da.bean.UserURL

java.lang.RuntimeException: Failure scanning class(see chained exception)=class com.s1mbi0se.dmp.da.bean.UserURL
at com.alvazan.orm.layer0.base.MyClassAnnotationDiscoveryListener.scanClass(MyClassAnnotationDiscoveryListener.java:44)
at com.alvazan.orm.layer0.base.MyClassAnnotationDiscoveryListener.discovered(MyClassAnnotationDiscoveryListener.java:34)
at com.impetus.annovention.Discoverer.discoverAndIntimateForClassAnnotations(Discoverer.java:197)
at com.impetus.annovention.Discoverer.discover(Discoverer.java:155)
at com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl.rescan(BaseEntityManagerFactoryImpl.java:80)
at com.alvazan.orm.layer0.base.BaseEntityManagerFactoryImpl.setup(BaseEntityManagerFactoryImpl.java:131)
at com.alvazan.orm.impl.bindings.BootstrapImpl.createInstanceImpl(BootstrapImpl.java:64)
at com.alvazan.orm.impl.bindings.BootstrapImpl.createInstance(BootstrapImpl.java:35)
at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:57)
at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:52)
at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:45)
at com.alvazan.orm.api.base.Bootstrap.create(Bootstrap.java:24)
at com.s1mbi0se.dmp.da.dao.PlayOrmConfiguration.init(PlayOrmConfiguration.java:39)
at com.s1mbi0se.dmp.da.service.DataAccessService.<init>(DataAccessService.java:28)
at com.s1mbi0se.dmp.da.service.DataAccessService.getInstance(DataAccessService.java:22)
at com.s1mbi0se.dmp.processor.main.DmpProcessorRunner.main(DmpProcessorRunner.java:80)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.hadoop.util.RunJar.main(RunJar.java:187)
Caused by: java.lang.RuntimeException: Failure scanning field=private java.lang.String com.s1mbi0se.dmp.da.bean.UserURL.id for class=UserURL
at com.alvazan.orm.impl.meta.scan.ScannerForClass.inspectField(ScannerForClass.java:196)
at com.alvazan.orm.impl.meta.scan.ScannerForClass.scanFields(ScannerForClass.java:189)
at com.alvazan.orm.impl.meta.scan.ScannerForClass.scanSingle(ScannerForClass.java:112)
at com.alvazan.orm.impl.meta.scan.ScannerForClass.addClass(ScannerForClass.java:69)
at com.alvazan.orm.layer0.base.MyClassAnnotationDiscoveryListener.scanClass(MyClassAnnotationDiscoveryListener.java:42)
... 32 more
Caused by: java.lang.IllegalArgumentException: class=class com.alvazan.orm.impl.meta.data.MetaClassSingle has two fields that have @NoSqlId annotation.  One of them may be in a superclass
at com.alvazan.orm.impl.meta.scan.ScannerForClass.processIdFieldWorks(ScannerForClass.java:233)
at com.alvazan.orm.impl.meta.scan.ScannerForClass.inspectFieldImpl(ScannerForClass.java:207)
at com.alvazan.orm.impl.meta.scan.ScannerForClass.inspectField(ScannerForClass.java:194)
... 36 more 
```

**我的用户类：**

```
@NoSqlEntity
public class User {
    @NoSqlId
    @NoSqlIndexed
    @Field
    private String id;

    @NoSqlIndexed
    @Field
    private String nome;

    @NoSqlManyToMany
    @Field
    private List<UserURL> urls = new ArrayList<UserURL>();

    @NoSqlManyToMany
    @Field
    private List<Request> requests = new ArrayList<Request>();

    // getters and setters
} 
```

**我的 UserURL 类：**

```
@NoSqlEntity
public class UserURL {
    @NoSqlId(usegenerator = true)
    @Field
    private String id;

    @Field
    private String url'

    @NoSqlManyToOne
    @NoSqlIndexed
    private User user;

    // getters and setters
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:59:03.050

我们最近自己也看到了这个问题并进行了临时修复。从 master 分支获取最新的并尝试并让我知道。新代码看起来像这样，所以它应该告诉我们这两个字段（或者不扫描该字段两次）。

```
 if(metaClass.getIdField() != null) {
        Field existingField = metaClass.getIdField().getField();
        if(field.equals(existingField))
            return true; // we already processed it
        else
            throw new IllegalArgumentException("class="+metaClass.getClass()+" has two fields that have @NoSqlId annotation.  One of them may be in a superclass.  The two fields are="+field+" and="+existingField);
    } 
```

注意：我们也在寻找更好的修复，因为有时这是由对类文件的双重扫描引起的，所以我们可能会在本周末之前发布另一个修复......我们目前正在通过电子邮件讨论它.

此外，此问题是由两次扫描类引起的......您的任何代码是否在 NoSqlEntityManagerFactory 中调用 rescan 方法？（我认为不是）。最新的应该现在可以解决您的问题，下周也可以回来查看。

院长**

# java - Java Spring 安全密码编码器

> ID：13821561
> 
> 赞同：0
> 
> 时间：2012-12-11T13:33:58.897
> 
> 标签：java, spring-security

我在 Spring Security 的 Md4PasswordEncoder 中注意到以下代码：

```
/**
 * Takes a previously encoded password and compares it with a raw password after mixing in the salt and
 * encoding that value.
 *
 * @param encPass previously encoded password
 * @param rawPass plain text password
 * @param salt salt to mix into password
 * @return true or false
 */
public boolean isPasswordValid(String encPass, String rawPass, Object salt) {
    String pass1 = "" + encPass;
    String pass2 = encodePassword(rawPass, salt);
    return PasswordEncoderUtils.equals(pass1,pass2);
} 
```

我目前正在开发自定义 PasswordEncoder。谁能解释一下为什么spring开发人员通过向传入的对象添加一个空字符串来处理null？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T16:03:27.707

我不认为这样做是出于特定原因。我认为这更多是因为开发人员不关心在以后的版本中对其进行更改。

在 3.0.3 版本之前，代码是这样的（[源代码](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework.security/spring-security-core/3.0.3.RELEASE/org/springframework/security/authentication/encoding/Md4PasswordEncoder.java#Md4PasswordEncoder.isPasswordValid%28java.lang.String,java.lang.String,java.lang.Object%29)）：

```
78    public boolean isPasswordValid(String encPass, String rawPass, Object salt) {
79        String pass1 = "" + encPass;
80        String pass2 = encodePassword(rawPass, salt);
81        return pass1.equals(pass2);
82    } 
```

在这个版本中，如果`encPass`是 null 并且如果第 79 行的语句`String pass1 = encPass;`不是原来的，第 81 行会抛出一个`NPE`.

但是，在更高版本（您正在查看的版本）中，使用了[PasswordEncoderUtils](http://grepcode.com/file/repo1.maven.org/maven2/org.springframework.security/spring-security-core/3.1.1.RELEASE/org/springframework/security/authentication/encoding/PasswordEncoderUtils.java?av=f)中的 equals ，它已经处理了`encPass`可能为空的情况。

因此，我认为`"" +`在当前版本中是多余的，并且没有特殊原因留在那里。（也许是因为它没有破坏任何东西，也不是造成重大性能损失的原因）

# arduino - 让我的 arduino 在特定时间完成任务

> ID：13821563
> 
> 赞同：1
> 
> 时间：2012-12-11T13:34:03.073
> 
> 标签：arduino

我是arduino的新手。我需要的是让他在特定的时间做一些事情，然后去睡觉，这样它就不会过度工作。

具体任务是：我想让他启动一个机制来喂我的金鱼，所以在假期里arduino应该工作10天或更长时间（这是睡眠模式的原因）。

在研究这个问题时，我想出了时间中断，但我认为这不是最好的解决方案，因为我希望他在特定的时间做一些事情，而不是打断他的任务。

感谢您的任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T18:29:03.690

我读过标准 Arduino 板并没有节省那么多电力，因为电源调节器和 USB 端口（如果有）消耗大量电力。但鉴于您使用外部时钟来触发设备唤醒，您可以使用一个简单的 arduino 库[Enerlib](http://playground.arduino.cc/Code/Enerlib)。

Engblaze 有[一篇关于如何自己做的好文章](http://www.engblaze.com/hush-little-microprocessor-avr-and-arduino-sleep-mode-)，但如果您是 arduino 新手，您可能不想跳入 AVR 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:01:09.293

使用millis() 方法。它会在 50 天后重置，但我认为你不会旅行这么长时间......

```
unsigned long hours4nextFeeding = 8;
unsigned long lastTime = millis();
void loop() {
    if(millis() > (lastTime + (hours4nextFeeding*3600*1000))) {
        feedTheFish();
        lastTime = millis();
    }
    delay(60000);
} 
```

您也可以使用光传感器（超级便宜）并在太阳升起时每天喂鱼一次

我刚刚编写的代码未经测试，但你应该明白了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-11T23:57:13.727

您可以尝试一些简单的事情，例如每 30 秒启动一个持续时间为 20 秒的事件：

```
#include <Wire.h>
#include "RTClib.h"

RTC_DS1307 rtc;

void setup () {
  Serial.begin(57600);
#ifdef AVR
  Wire.begin();
#else
  Wire1.begin(); // Shield I2C pins connect to alt I2C bus on Arduino Due
#endif
  rtc.begin();

  if (! rtc.isrunning()) {
    Serial.println("RTC is NOT running!");
  }
}
 boolean pumpOn = false;
void loop () {
    DateTime now = rtc.now();

    if(now.second()%30==0){ pumpOn=true;}
    if(now.second()%50==0){ pumpOn=false;}
    if(pumpOn)
      Serial.println("on");
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T23:55:36.163

我喜欢@Josh 使用时钟重置设备的解决方案，但如果你的鱼没有在毫秒内喂食它们会死，[这是另一个想法。](http://wyolum.com/syncing-arduino-with-gps-time/)

# php - 无法在主页以外的其他页面中显示图像（wordpress/html/css）

> ID：13821564
> 
> 赞同：1
> 
> 时间：2012-12-11T13:34:06.223
> 
> 标签：php, html, image, wordpress, visibility

嗨，我有一个为客户做的小网站，我使用了一个 html/css 站点，并使用空白主题将其转移到 wordpress。到目前为止一切顺利，如果您愿意，请查看 energyshop.se，在起始页中显示前两个图像，但其余选项卡不显示 - 为什么？我在 header.php 中添加图像，所以它应该在所有选项卡上找到它们......？

**//header.php**

```
<body <?php body_class(); ?>>

<div id="container"> 
```

[](http://www.enerfergeggyshop.se/)

```
 <div id="header" onclick="location.href='http://www.energyshop.se/';" style="cursor: pointer;">
        <h1><a href="<?php echo get_option('home'); ?>/"><?php bloginfo('name'); ?></a></h1>
        <div class="description"><?php bloginfo('description'); ?></div>
    </div>
<div id="main_menu">
<?php wp_nav_menu(); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:39:32.340

这是因为您使用的是相对路径。创建 WordPress 主题并希望从主题加载资源时，应使用绝对路径。有两个模板标签可以让您轻松完成此操作：`get_bloginfo()`和`bloginfo()`. 第一个返回值，第二个回显值（您通过传递给函数的第一个参数请求）。

因此，为了显示图像，您应该具有：

```
<img src="<?php bloginfo('stylesheet_directory'); ?>/images/icon_en_global.png" alt="English.png"> 
```

这将始终导致（对于您的站点）：

```
<img src="http://energyshop.se/wp-content/themes/blank/images/icon_en_global.png" alt="English.png"> 
```

所以只需将所有替换`wp-content/themes/blank`为`<?php bloginfo('stylesheet_directory'); ?>`.

# html - HTML5 支持的元素集是什么？

> ID：13821566
> 
> 赞同：1
> 
> 时间：2012-12-11T13:34:01.010
> 
> 标签：html

据我所知，HTML5 引入了一些新元素（如`<video>`），同时带走了一些元素（如`<plaintext>`）。

经过简单的谷歌搜索，我没有找到一组权威的 HTML5 支持的元素。例如，我认为`<math>`HTML5 支持，但我找不到包含它的 HTML5 元素列表。

我需要一个权威的参考来显示 HTML5 支持的元素的具体数量（我认为这是确定性的，对吗？）。

顺便说一句，我认为 HTML5 支持自定义元素，例如`<myElement> something </myElement>`，对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T03:46:17.517

好吧，您可以为您的应用程序创建任何您喜欢的标签！

但这是我找到的最官方的列表[HTML5 New Elements](http://www.w3schools.com/html/html5_new_elements.asp)

我希望它有帮助:)

更新

这是一个有趣的链接，您可能会觉得有用！[HTML5 语义](http://diveintohtml5.info/semantics.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-12-27T21:10:46.200

在 HTML5 规范的元素（等待页面加载！）的[（非规范）部分中](https://html.spec.whatwg.org/#elements-3)列出的所有有效 HTML5 元素（没有[自主自定义元素](https://html.spec.whatwg.org/#autonomous-custom-element)）的列表是：

> a abbr 地址区域文章放在一边音频 b 基础 bdi bdo blockquote 正文 br 按钮画布标题引用代码 col colgroup 数据数据列表 dd del 详细信息 dfn 对话框 div dl dt em embed fieldset figcaption 图页脚形式 h1 h2 h3 h4 h5 h6 头标题 hgroup hr html i iframe img 输入 ins kbd 标签 图例 li 链接 主地图 标记 数学菜单 元仪表 nav noscript 对象 ol optgroup 选项 输出 p 参数 图片 预进度 q rp rt ruby​​ s samp 脚本部分 选择槽 小源 跨度 强风格 子摘要 sup svg 表 tbody td模板 textarea tfoot th thead 时间标题 tr track u ul var video wbr

我正在计算 114 个没有 svg 和 mathml 标准中的元素的元素，除了`<svg>`它`<math>`本身。

# ruby-on-rails-3 - 活跃的管理员和金钱

> ID：13821569
> 
> 赞同：4
> 
> 时间：2012-12-11T13:34:18.330
> 
> 标签：ruby-on-rails-3, activeadmin, currency

我正在使用[有钱的活跃管理员 - https://github.com/RubyMoney/money](https://github.com/RubyMoney/money) gem。我有一些由金钱宝石处理的属性。

金钱宝石以美分存储价值。当我使用活动管理员创建条目时，会在 DB 中创建正确的值（5000 代表 50.00）。

但是，当我编辑条目时，该值乘以 100，这意味着 AA 显示 5000 用于原始输入 50.00。如果我编辑具有货币属性的任何内容，它将乘以 100。在创建时，该值通过货币逻辑，但在编辑时，活跃的管理员以某种方式跳过显示美分而不是最终货币值的部分。有没有办法通过活跃的管理员使用金钱宝石？

例子 ：

```
form :html => { :enctype => "multipart/form-data"} do |f|
  f.inputs "Products" do
    ......
    f.has_many :pricings do |p|
      p.input :price
      p.input :_destroy, :as => :boolean,:label=>"Effacer"
    end
  f.actions :publish
end 
```

模型 ：

```
# encoding: utf-8 
class Pricing < ActiveRecord::Base
belongs_to :priceable, :polymorphic => true
attr_accessible :price
composed_of :price,
    :class_name => "Money",
    :mapping => [%w(price cents), %w(currency currency_as_string)],
    :constructor => Proc.new { |cents, currency| Money.new(cents || 0, currency || Money.default_currency) },
    :converter => Proc.new { |value| value.respond_to?(:to_money) ? value.to_money : raise(ArgumentError, "Can't convert #{value.class} to Money") }
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T16:59:39.463

[Rails 回调](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html)对于创建此类问题的解决方案非常方便。

我只会使用 after_update 回调。

例子：

```
 # encoding: utf-8 
    class Pricing < ActiveRecord::Base
    after_update :fix_price
    belongs_to :priceable, :polymorphic => true
    attr_accessible :price
    composed_of :price,
        :class_name => "Money",
        :mapping => [%w(price cents), %w(currency currency_as_string)],
        :constructor => Proc.new { |cents, currency| Money.new(cents || 0, currency || Money.default_currency) },
        :converter => Proc.new { |value| value.respond_to?(:to_money) ? value.to_money : raise(ArgumentError, "Can't convert #{value.class} to Money") }

    def fix_price
     self.price = (self.price/100)
    end
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T17:45:17.350

我的问题来自我对 Money 的使用：

```
composed_of :price,
    :class_name => "Money",
    :mapping => [%w(price_cents cents), %w(currency currency_as_string)],
    :constructor => Proc.new { |price_cents, currency| Money.new(price_cents || 0, currency || Money.default_currency) },
    :converter => Proc.new { |value| value.respond_to?(:to_money) ? value.to_money : raise(ArgumentError, "Can't convert #{value.class} to Money") } 
```

我将我在 DB 中的价格重命名为 price_cents，并将其放在货币声明中需要它的类中。我在应该使用价格的地方使用了美分，即使这样，在数据库中使用相同名称的货币对象和字段似乎也不起作用。最后，问题与 Active Admin 无关。

# django - 有没有办法让 django 管理模型列表链接到结果的最后一页？

> ID：13821571
> 
> 赞同：0
> 
> 时间：2012-12-11T13:34:22.167
> 
> 标签：django, admin

我们有这些中等大小且不断增长的表格，最有趣的东西总是最新的。目前我们按创建时间排序，所以有趣的东西在最后。这需要在导航时单击 2 次，一次选择模型，另一次选择最后一页。

我当然可以改变顺序，让最新的东西在前面，但是随着新的东西被推到前面，页面的内容会不断变化，这使得历史的探索变得更加困难。

所以我想知道是否有办法让它直接进入最后一页？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:41:28.567

这是一个非常特殊的请求，但如果 URL 中没有`page`参数（即您在首页上），您可以重定向管理视图。

```
from django.shortcuts import redirect
from django.core.urlresolvers import reverse
class MyAdmin(admin.ModelAdmin):
    ...
    def changelist_view(self, request, extra_context=None):
        if not request.GET.get("p", False):
            return redirect("%s?p=%s" % (
                reverse("admin:my_app__model__changeview"), 
                self.paginator.page_range[-1])
        super(MyAdmin, self).changelist_view(request, extra_context=extra_context) 
```

另一种方法是`p`在将控制权传递给父方法之前将 URL 参数注入请求中`changelist_view`（但这需要复制请求）。**编辑**：[Wouter 的解决方案](https://stackoverflow.com/a/13821697/396300)实际上很简单

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:41:43.833

您可以更改`change_list`模板（`pagination`块）以显示`{{page.last}}`

[https://github.com/django/django/blob/master/django/contrib/admin/templates/admin/change_list.html](https://github.com/django/django/blob/master/django/contrib/admin/templates/admin/change_list.html)

# xml - 我们可以有多个带有 match="/" 的 xsl:templates 吗？

> ID：13821572
> 
> 赞同：3
> 
> 时间：2012-12-11T13:34:27.347
> 
> 标签：xml, xslt

我们可以有多个带有 match="/" 和不同名称的 xsl:templates。基本上我想迭代一个 xml 直到某些级别，然后如果满足某些条件，则从“/”再次开始迭代。因此，我正在考虑根据选项 1 和选项 2 分别类似于和的某些条件来制作`<xsl:call-template name="option-1">`or 。`<xsl:call-template name="option-1">``<xsl:template match="/" name="option-1">``<xsl:template match="/" name="option-2">`

如果有更好的方法，我是开放的。我想要的只是再次从根节点开始迭代。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T14:45:46.803

您正在寻找的概念是模板*模式*。你可以定义

```
<xsl:template match="/" mode="option1"> 
```

同样`option2`，您的初始起始模板没有模式

```
<xsl:template match="/">
  <xsl:choose>
    <xsl:when test="some-condition">
      <xsl:apply-templates select="/" mode="option1" />
    </xsl:when>
    <xsl:otherwise test="some-condition">
      <xsl:apply-templates select="/" mode="option2" />
    </xsl:otherwise>
  </xsl:choose>
</xsl:template> 
```

[XSLT 1.0 规范](http://www.w3.org/TR/xslt#modes), [XSLT 2.0 规范](http://www.w3.org/TR/xslt20/#modes)

# python - 从文件读入列表并让每个元素通过程序

> ID：13821577
> 
> 赞同：0
> 
> 时间：2012-12-11T13:34:37.593
> 
> 标签：python, list, text-files

对不起，如果标题令人困惑。我想要做的是读取一个文本文件（keywords.txt），然后拆分成一个列表。所以基本上可以说文件包含“iphone，钥匙，钱包，笔，文件夹”，我希望列表是[iphone，钥匙，钱包，笔，文件夹]。

有没有办法为每个元素设置一个变量。假设变量是查询。无论如何都要查询每个元素，以便它可以通过程序并为每个元素工作。下面是我的代码，它显然不起作用，但如果可能的话，这就是我想要发生的事情。

我想为每个元素都这样做的原因是因为最终脚本将为每个元素编写一个新的文本文件，并根据元素是什么命名它，我知道如何做到这一点的唯一方法是拥有一个变量。

```
data = [line.strip() for line in open('keywords.txt', 'r')]

try:
    query = sys.argv[1]
except IndexError:
    query = item in data 
```

这是我将要执行的其余代码。它将采用创建的列表中的内容并创建一个新的文本文件和一个 csv 文件。

```
newFile = open("%s.txt" %query, 'w').write(txt.encode('utf8'))

with open("%s.txt" %query, 'rb') as input_file:
    reader = csv.reader(input_file, delimiter='\n', quoting = csv.QUOTE_NONE)

    with open("%s.csv" %query, 'wb') as output_file:
        writer = csv.writer(output_file)

        for row in reader:
            writer.writerow(row) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:38:51.953

将`query`从命令行获取的值转换为列表，然后遍历查询列表：

```
try:
    query = [sys.argv[1]]
except IndexError:
    query = data

for q in query:
    # do something with q 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:39:54.700

```
def process_keywords_in_file(file_name):  
    with open(file_name) as f:
        for line in f:
            process(line.strip())

def process(keyword):
    #your code 
```

如果你想用关键字的名字写一个新文件：

```
with open('%s.txt' % keyword, 'w') as fw:
    fw.write('content') 
```

# java - CRLF转换成java字符串

> ID：13821578
> 
> 赞同：30
> 
> 时间：2012-12-11T13:34:40.250
> 
> 标签：java, string

我在 Java 中编写了一个字符串，在该字符串的末尾插入了一个 LF（换行符），如下所示：

```
String str = "......\n"; 
```

现在我需要由[回车](https://en.wikipedia.org/wiki/Carriage_return)和换[行](http://www.fileformat.info/info/unicode/char/000a/index.htm)、CRLF组成的[换行符。](https://en.wikipedia.org/wiki/Newline)在十六进制中，而不是. 有没有办法将它插入到我的字符串中？`0D 0A``0A`

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-12-11T13:35:55.677

使用`\r\n`：

```
String str = "......\r\n"; 
```

从[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.6)：

```
\n    /* \u000a: linefeed LF */
\r    /* \u000d: carriage return CR */ 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2016-03-22T18:37:55.867

也许最简单的方法是使用常量字符串。我从我自己的 ASCII 类中获取了这个，它将所有 33 个不可打印代码定义为它们的 ASCII 名称，例如

```
public final static char CR  = (char) 0x0D;
public final static char LF  = (char) 0x0A; 

public final static String CRLF  = "" + CR + LF;     // "" forces conversion to string

String twoLines = "Line1" + CRLF + "Line2";   // 12 characters 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-11T13:53:29.407

尝试将系统属性重置为“\r\n”：

```
System.setProperty("line.separator","\r\n"); 
```

问候

# c# - String.ToString 有什么合理的用途吗？

> ID：13821581
> 
> 赞同：4
> 
> 时间：2012-12-11T13:34:49.440
> 
> 标签：c#, string, object, clone, tostring

我刚看到这个

```
string response = GetResponse();
return response.ToString(); 
```

使用该方法是否有任何合理的解释`ToString()`？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T13:37:40.277

不，没有。它可用的唯一原因是，因为它来自 Object。（并且 String 继承自 Object）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T13:38:33.233

这没有任何作用，来自 ILSpy：

```
public override string ToString()
{
    return this;
} 
```

但也许他想强制 a `NullReferenceException`，尽管那[**不是最佳做法**](http://blogs.msdn.com/b/brada/archive/2004/07/11/180315.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:47:34.053

没有区别。没有必要再次将字符串转换为字符串。我认为正确的代码必须如下：

```
WebResponse response = GetResponse();
return response.ToString(); 
```

GetResponse() 返回 WebResponse 对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-11T15:27:12.280

从技术上讲，标记的答案是正确的，但我想在这里的答案中引入多态性的概念。有理由使用 string.ToString，它只是间接的。

考虑以下场景：

```
string s = "my groovy string";
object o = s; //This or something like this could happen for many reasons but this is an example so don't analyze this simplicity. 
Console.Write( o.ToString() ); //We are technically calling string.ToString() leading to the code in Tim's answer where we return this. 
```

`ToString`除了在上定义的事实之外`Object`，这就是`string.ToString`返回自身的原因，并且**这是合理的（尽管是迂回的）用于**回到核心问题。

# java - 为什么 diamond 不能推断匿名内部类的类型？

> ID：13821586
> 
> 赞同：22
> 
> 时间：2012-12-11T13:35:07.533
> 
> 标签：java, java-7, type-inference

在 Java 7 及更高版本中，菱形可用于正常推断类型，如下所示：

```
List<String> list = new ArrayList<>(); 
```

但是，它不能用于像这样的匿名内部类：

```
List<String> st = new List<>() { //Doesn't compile

    //Implementation here

} 
```

为什么是这样？从逻辑上讲，在这种情况下，我绝对可以将类型推断为`String`. 这个决定是否有逻辑上的原因，即类型实际上不能在匿名内部类上推断出来，还是因为其他原因而被省略？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T14:30:45.750

在[JSR-334](http://cr.openjdk.java.net/~darcy/ProjectCoin/ProjectCoin-Documentation-v0.83.html)中：

> 不支持将 diamond 与匿名内部类一起使用，因为这样做通常需要对类文件签名属性进行扩展以表示不可表示的类型，这是事实上的 JVM 更改。

我的猜测是，众所周知，匿名类会导致生成自己的类文件。

我想这些文件中不存在泛型类型，而是由有效（静态）类型代替（因此由显式类型声明，如`<String>`在声明对象时）。

事实上，对应于内部类的文件永远不会在它的多个不同实例之间共享，那么为什么还要在其中使用泛型呢？！:)。

编译器强制扩展（通过为泛型添加特殊属性）到这些类文件将更难以实现（并且肯定是无用的）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-11T15:24:06.827

谷歌收益，从stackoverflow跳过帖子后， http: [//mail.openjdk.java.net/pipermail/coin-dev/2011-June/003283.html](http://mail.openjdk.java.net/pipermail/coin-dev/2011-June/003283.html)

我猜是这样的，通常匿名类是明显类型的具体子类

```
 interface Foo<N extends Number>
    {
        void foo(N n);
    }

    Foo<Integer> foo = new Foo<Integer>(){ ... } 
```

由实施

```
 class AnonFoo_1 implements Foo<Integer>{ ... }

    Foo<Integer> foo = new AnonFoo_1(); 
```

假设我们允许对匿名类进行菱形推断，可能会有复杂的情况，例如

```
 Foo<? extends Runnable> foo = new Foo<>(){ ... } 
```

推理规则产生`N=Number&Runnable`；按照上一个实现技巧，我们需要

```
 class AnonFoo_2 implements Foo<Number&Runnable>{ ... } 
```

目前不允许这样做；类型 arg 到超类型`Foo`必须是“普通”类型。

* * *

但是，理由不是很充分。我们可以发明其他实现技巧来使其工作

```
 class AnonFoo<N extends Number&Runnable> implements Foo<N>
    {
        @Override public void foo(N n)
        {
            n.intValue();
            n.run();
        }
    }

    Foo<? extends Runnable> foo = new AnonFoo<>(); 
```

编译器应该能够做同样的事情。

无论如何，至少编译器应该允许大多数不涉及“不可标记类型”的用例，就像`Foo<Integer> foo = new Foo<>(){...}`遗憾的是，这些常见/简单的情况也被不必要地禁止了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:47:59.543

简而言之，`<>`它对推断类型几乎没有作用，它会关闭没有它你会得到的警告。

编辑：正如@Natix 指出的那样，它会进行一些检查。

```
List<Integer> ints = new ArrayList<>();
List<String> copy = new ArrayList<>(ints); 
```

产生编译错误

```
Error:Error:line (42)error: incompatible types
required: List<String>
found:    ArrayList<Integer> 
```

如您所见，`<>`它采用参数的类型，而不是从类型推断类型`copy`

# c# - WinForm 尝试从 CellValueChanged 事件提交 DataGridView 更改

> ID：13821592
> 
> 赞同：2
> 
> 时间：2012-12-11T13:35:28.427
> 
> 标签：c#, winforms, events, datagridview, commit

我有 2 个用 C# 4.0 编写的表单。FormA 有一个 DataGridView，它通过一个 DataAdapter 和一个 BindingSource 连接到一个 MS SQL 数据库。网格有一个复选框。当用户勾选复选框时 FormB 被调用。FormB 有一个“是”/“否”按钮。如果来自 FormB 的 DialogResult 为“是”，则应使用复选框的新值更新数据库 - 无需用户按下 FormA 上的任何其他项目。

这是一些伪代码：

甲型：

```
private void dataGridView1_CurrentCellDirtyStateChanged(object sender, EventArgs e)
    {
        if (dataGridView1.IsCurrentCellDirty)
        {
            dataGridView1.CommitEdit(DataGridViewDataErrorContexts.Commit);
        }
    }

private void dataGridView1_CellValueChanged(object sender, DataGridViewCellEventArgs e)
    {
        DialogResult dialogRes = new FormB().ShowDialog();
        if (dialogRes == DialogResult.Yes)
        {
             dataGridView1.CommitEdit(DataGridViewDataErrorContexts.Commit);
             dataGridView1.EndEdit();
             table.EndInit();
             dataAdapter.Update(table);
        }
    } 
```

结果不会保存到数据库中。如果我在按钮事件上放置相同的“保存/更新”功能，它就可以正常工作。所以一定是因为 CellValueChanged 事件需要完成（并且可能需要触发其他事件）才能成功提交更改！？

请帮忙，我要疯了...

编辑：使用 CellEndEdit 具有相同的效果 - 这是没有的。我已经设置了 SqlCommandBuilder，并且在上述情况之外的所有其他情况下，数据库正在正确更新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:46:56.540

您需要在 sql command Builder 上查看 MSDN 中的这个示例。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommandbuilder.aspx)

为了让您的适配器使用 Update() 方法，它需要设置命令来执行任务。当您填充数据时，命令生成器用于从给定的 Select 命令生成这些命令：-

```
public static DataSet SelectSqlRows(string connectionString,
    string queryString, string tableName)
{
    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        SqlDataAdapter adapter = new SqlDataAdapter();
        adapter.SelectCommand = new SqlCommand(queryString, connection);
        SqlCommandBuilder builder = new SqlCommandBuilder(adapter);

        connection.Open();

        DataSet dataSet = new DataSet();
        adapter.Fill(dataSet, tableName);

        //code to modify data in DataSet here

        builder.GetUpdateCommand();

        //Without the SqlCommandBuilder this line would fail
        adapter.Update(dataSet, tableName);

        return dataSet;
    }
} 
```

# php - 使用 PHP 将多个相同的命名字段插入 MySQL 数据库

> ID：13821593
> 
> 赞同：1
> 
> 时间：2012-12-11T13:35:29.967
> 
> 标签：php, mysql

我有多个名称看起来像 name_$i 的字段，我正试图找出一种**“提交时”**的方法，将它们全部发送到数据库。问题是表单是循环的，插入必须能够适应表单中的字段数。有没有办法做到这一点？？？

```
<?php

$fldcnt = $_POST['fldcnt'];
$i = $_POST['i'];

for ($i = 0; $i < $fldcnt; $i++){
$NAME = $_POST['name_$i'];
$AGE = $_POST['age_$i'];
$ADDRESS = $_POST['address_$i'];
$TELEPHONE = $_POST['telephone_$i'];
$EMAIL = $_POST['email_$i'];

$q_register_new_users = "insert into registration set
        NAME = '$NAME',
        AGE = '$AGE',
        ADDRESS = '$ADDRESS',
        TELEPHONE = '$TELEPHONE',
        EMAIL = '$EMAIL'";

    mysql_query($q_new_products,$connection) or die(mysql_error());

};
?>" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:45:57.763

## HTML 和 PHP

您可以通过简单地调用 field 将输入字段输入到数组中`name[]`。像这样：

```
<input name="name[]" /> 
```

然后，您可以使用 PHP 循环遍历字段，如下所示：

```
foreach($_POST['name'] as $key=>$value){
    // Insert the value of the form field into a string or query
    // i.e. build the query
    $query .= $value;
}

// Then execute the query for each set of fields 
```

上面的逻辑实际上是不正确的，但它应该让你明白我的意思。

## MySQL

您的 SQL 语法不正确，插入 MySQL 数据库的正确语法是：

```
INSERT INTO `table` (`field_1`, `field_2`)
VALUES ('value_1', 'value_2') 
```

**请注意**

`mysql_`由于即将弃用，因此非常不鼓励使用这些功能。相反，大多数 PHP 程序员现在都在使用 PDO / SQLite 类。虽然这些看起来很复杂，但它们实际上非常简单，并提供了一种更安全的 SQL 语句执行方式。

1.  [PDO](http://php.net/manual/en/book.pdo.php)
2.  [SQLite](http://php.net/manual/en/ref.pdo-sqlite.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:38:05.460

语句的语法`INSERT`应该是这样的，

```
 INSERT INTO registration (NAME , AGE , ADDRESS, TELEPHONE, EMAIL)
 VALUES ('$NAME', '$AGE', '$ADDRESS','$TELEPHONE', '$EMAIL') 
```

但是上面的查询很容易受到攻击`SQL INJECTION`，请阅读下面的文章以了解如何保护它，

*   [如何防止 PHP 中的 SQL 注入？](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:46:37.797

如果要保持代码结构，则需要使用**双引号**而不是撇号

```
$NAME = $_POST["name_$i"]; 
```

或者**把变量拿出来**

```
$NAME = $_POST['name_'.$i]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T19:36:16.160

使用数组是最好的方法。但是，如果您仍然想使用柜台，那么您可以使用

```
for($i = 0;isset($_POST["name_{$i}"]);$i++)
{
 // name found
} 
```

请注意，如果 name_xx 字段来自复选框，则此代码可能不是最佳的，用户选择了项目并在其间跳过了一些。

PS。我发表了评论，但它更适合作为答案。

# hibernate - 如何在eclipse中创建hbm.xml文件

> ID：13821595
> 
> 赞同：1
> 
> 时间：2012-12-11T13:35:31.310
> 
> 标签：hibernate

如何在 Eclipse 中为普通 Java Bean 类创建 hbm.xm 文件 例如：我有一个表 SampleUser 表，对于该表我需要 pojo 类和 hbm 文件，我们可以手动创建以上两个文件吗？或者有什么方法可以在不使用任何休眠工具的情况下创建这些（Pojo 和 hbm.xml 文件）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:33:29.380

只要语法正确，您就可以手动创建它们。您可以查看 Hibernate[文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/)，特别是[映射章节](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/mapping.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-25T14:55:10.263

如果您从 Marketplace 安装 RedHat CodeReady Studio，则会有一个自动创建 hbm.xml 的向导

# java - 支架在前面

> ID：13821603
> 
> 赞同：1
> 
> 时间：2012-12-11T13:35:57.347
> 
> 标签：java

下面是示例代码：

```
for(int i = 0; i < clientListFromFile.size(); i++)
    {
        DisplayClient dc = null; // DisplayClient is another class
        dc = (DisplayClient)clientListFromFile.get(i); // clientListFromFile is the a list.
    } 
```

我可以知道在前面放置的方法是 `Displayclient`什么`clientListFromFile`吗？

```
int prevID = (int)clientList.get(clientListCount-1); 
```

这是另一个例子。为什么放`(int) infront clientList.get(clientListCount-1)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:37:47.560

这是一个强制转换——你告诉 Java 变量的类型*可能*比它在编译时知道的更具体。这带来了一定程度的危险，因为您必须在运行时检查它肯定是那种类型，否则会抛出异常。

在引入泛型之前，这曾经被广泛使用，尤其是在集合中。但是，泛型在编译时提供了更大程度的类型定义，因此不再需要许多类型转换。如果您在从列表中检索项目时发现需要强制转换，那么您可能没有正确（或根本没有）声明泛型类型，并且应该考虑解决这个问题。

以下代码使用旧语法，没有泛型。注意最后一行没有编译，因为编译器不知道列表的类型，所以类型总是对象。因此，我们需要一个演员来让它工作。

```
List list = new ArrayList();
list.add("hello");
String s = list.get(0); //Doesn't compile
String s = (String)list.get(0); //Does compile 
```

现在不鼓励这种方法，实际上只是出于向后兼容性的原因才允许使用（在引入泛型之前，这是唯一的做事方式。）我们必须记住列表的类型，放入其中的内容并相应地进行转换 -如果不是字符串的东西进入列表，没有什么可以阻止它。以下示例使用泛型，因此取消了强制转换：

```
List<String> list = new ArrayList<String>();
list.add("hello");
String s = list.get(0); 
```

使用这种方法，我们放入列表和从列表中取出的所有内容都保证是一个字符串 - 其他任何内容，代码都不会编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:39:12.343

这是一个强制转换，如果您在声明中使用*泛型*，则不是必需的`List`，例如

```
List<? extends Client> 
```

现在您的循环将如下所示：

```
for (int i = 0; i < clientListFromFile.size(); i++) {
   Client dc = = clientListFromFile.get(i); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T13:38:24.450

这叫做演员表。[您可以在此处](http://www.javabeginner.com/learn-java/java-object-typecasting)找到有关它的更多信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T13:38:39.627

这是一个明确的演员表。我想该列表更通用，因此代码明确地转换为该特定类型。

在某些情况下可以进行隐式转换（例如向上转换），但向下转换通常需要显式转换。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-11T13:39:26.863

可能这两个列表都没有使用特定的类型，它们要么是 rawtypes`List clientListFromFile = new ArrayList();`要么正在使用`List<Object>`.

如果是这种情况，当您从列表中检索对象时，`list.get(...)`您需要转换为列表中的对象。

所以基本上它在那里描述的铸造

# google-maps-api-3 - 在 fusiontable 层上查询

> ID：13821604
> 
> 赞同：0
> 
> 时间：2012-12-11T13:35:57.490
> 
> 标签：google-maps-api-3

我有一个使用 html 表单对 fusiontable 层进行查询的函数。但是，查询返回图层的所有特征，而不是它应该做的查询。有人可以帮我弄这个吗？

这是功能：

```
google.maps.event.addDomListener(document.getElementById('CS'),
    'click', CS_query);

layer_imm = new google.maps.FusionTablesLayer('1_SY_lmkaQ3_3_pPDzho1-X9fc8WtdJGfo2w1VVg');

function CS_query() {
    CSsearch = document.getElementById('CS_Input').value;
    layer_imm.setOptions({
        query: {
            select: 'geometry',
            from: '1_SY_lmkaQ3_3_pPDzho1-X9fc8WtdJGfo2w1VVg',
            where: "CODE_CS LIKE '%" + CSsearch + "%'"
        },
        map:map
    }); 

}

<input type="text" id="CS_Input">
<input type="button" id="CS" value="Submit" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:31:23.603

创建没有任何选项的图层：

```
layer_imm = new google.maps.FusionTablesLayer(); 
```

# indexing - Elasticsearch：自动索引删除/到期

> ID：13821614
> 
> 赞同：3
> 
> 时间：2012-12-11T13:36:33.760
> 
> 标签：indexing, elasticsearch, logstash

我想将我的 elasticsearch 0.19.11 配置为每 60 秒删除一次索引。我的 elasticsearch 配置有以下 3 行：

```
node.name: "Saurajeet"
index.ttl.disable_purge: false
index.ttl.interval: 60s
indices.ttl.interval: 60s 
```

它不工作我有 2 个默认文档索引。并且预计它会在 60 年代之后

```
$ curl -XGET http://localhost:9200/twitter/_settings?pretty=true
{
  "twitter" : {
    "settings" : {
      "index.version.created" : "191199",
      "index.number_of_replicas" : "1",
      "index.number_of_shards" : "5"
    }
} 
```

此外，如果我尝试执行以下操作，它没有任何效果

```
$ curl -XPUT http://localhost:9200/twitter/_settings -d '
> { "twitter": {
>     "settings" : {
>       "index.ttl.interval": "60s"
>    }
>  }
> }
> '
{"ok":true}~/bin/elasticsearc
$ curl -XGET http://localhost:9200/twitter/_settings?pretty=true
{
  "twitter" : {
    "settings" : {
      "index.version.created" : "191199",
      "index.number_of_replicas" : "1",
      "index.number_of_shards" : "5"
    }
  }
} 
```

我有 2 个文档的索引，1 小时后它仍然显示

```
$ curl -XPUT 'http://localhost:9200/twitter/tweet/1' -d '
{ 
    "user": "kimchy", 
    "postDate": "2009-11-15T13:12:00", 
    "message": "Trying out Elastic Search, so far so good?" 
}'
$ curl -XPUT 'http://localhost:9200/twitter/tweet/2' -d '
{ 
    "user": "kimchy", 
    "postDate": "2009-11-15T13:12:00", 
    "message": "Trying out Elastic Search, so far so good?" 
}' 
```

**我做错什么了**

PS我想用logstash部署这个配置。因此，可以建议任何其他替代方案。出于扩展原因，我不希望此自动清除成为脚本。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-26T22:31:13.603

我相信 indices.ttl.interval 设置只是为了调整清理过程的时间。

您需要为索引/类型设置 _ttl 字段才能使其过期。它看起来像这样：

```
{
    "tweet" : {
        "_ttl" : { "enabled" : true, "default" : "60s" }
    }
} 
```

[http://www.elasticsearch.org/guide/reference/mapping/ttl-field/](http://www.elasticsearch.org/guide/reference/mapping/ttl-field/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T09:27:03.037

终于想通了自己。将 elasticsearch 版本升级到 1.2.0。您可以从[Mapping API](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/mapping.html)中输入 TTL 。->[放置映射](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/indices-put-mapping.html)-> [TTL](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/mapping-ttl-field.html)。

在索引的类型级别上启用 TTL

```
$ curl -XPOST http://localhost:9200/abc/a/_mapping -d '
{
    "a": {
      "_ttl": {
        "enabled": true,
        "default": "10000ms"
      }
    }
}'

$ curl -XPOST http://localhost:9200/abc/a/a1 -d '{"test": "true"}'
$ $ curl -XGET http://localhost:9200/abc/a/a1?pretty
{
  "_index" : "abc",
  "_type" : "a",
  "_id" : "a1",
  "_version" : 1,
  "found" : true,
  "_source":{"test": "true"}
}
$ # After 10s
$ curl -XGET http://localhost:9200/abc/a/a1?pretty
{
  "_index" : "abc",
  "_type" : "a",
  "_id" : "a1",
  "found" : false
} 
```

笔记：

*   映射适用于创建映射后创建的文档。
*   还为类型 a 创建了映射。因此，如果您发布到类型 b 并期望它在 TTL 上过期，那将不会发生。

如果您需要使索引过期，您还可以在创建索引期间创建索引级别映射，以从您的应用程序逻辑中预[创建索引。](http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/indices-create-index.html)

# c# - 如何在打开文档的同时以编程方式打开任何应用程序（如 word、pdf 阅读器）的打印对话框

> ID：13821616
> 
> 赞同：0
> 
> 时间：2012-12-11T13:36:42.367
> 
> 标签：c#, javascript, jquery, asp.net, client-side

我使用 C#、asp.net 作为工具。

我正在使用以下代码在客户端传输和打开文件，并希望在客户端打开文档的同时打开任何应用程序（如 word、pdf 阅读器）的内置打印对话框。

```
 if (lfileFormat.ToUpper() == "Excel")
                {
                    Response.ContentType = "application/vnd.ms-excel";
                }
                else if (lfileFormat.ToUpper() == "PDF")
                {
                    Response.ContentType = "application/pdf";
                }
                else if (lfileFormat.ToUpper() == "HTML")
                {
                    Response.ContentType = "text/HTML";
                }

                Response.AddHeader("Content-Disposition", string.Format("attachment; filename = {0}", fi.Name));
                Response.AddHeader("Content-Length", fi.Length.ToString());
                Response.TransmitFile(fi.FullName);
                Response.End(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:38:14.527

你可以用一些组件来做到这一点，比如[Aspose](http://www.aspose.com)

示例：[这里](http://www.aspose.com/docs/display/wordsnet/How+to++Print+a+Document+with+Settings+and+Print+Preview+Dialog)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:44:03.947

您可以执行以下操作

```
String FileName = filename;
String FilePath = filepath;
System.Web.HttpResponse response = System.Web.HttpContext.Current.Response;
response.ClearContent();
response.Clear();
response.ContentType = "text/plain";
response.AddHeader("Content-Disposition", "attachment; filename=" + FileName + ";");
response.TransmitFile(FilePath + FileName);
response.Flush();
response.End(); 
```

例如，如果您想下载 .pdf 文件，下载后您可以通过后面的代码打开然后文件 .. 但您必须为此编写单独的代码..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:44:19.937

你不能从 ASP.NET 或任何 web 平台做到这一点，浏览器是沙盒的，想象一下如果你在用户 PC 上大声执行命令会造成混乱！

您必须创建最终用户必须安装的自己的客户端应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T13:50:18.580

没有直接的方法可以做到这一点。您正在生成文件服务器端，并将其发送到客户端。您无法控制客户端计算机上发生的事情（正如 HollyStyles 提到的，想象一下混乱）。

最好的办法是在 Excel/Word 文件中包含一个宏，以便在打开文件时显示打印对话框。避免弄乱 VBE（Visual Basic 可扩展性，它允许动态操作 Office 文档的代码模块）的最简单方法是创建一个包含该功能的模板，并使用该模板生成您的文档。

例如，在 Excel 工作簿打开事件处理程序中，您可以拥有：

```
Private Sub Workbook_Open()

    Application.Dialogs(xlDialogPrint).Show

End Sub 
```

但这还有其他含义（确保您的文档已签名，或者用户允许执行宏，...）。更不用说每次用户打开文件时都会显示“打印”对话框，这可能......令人恼火。

此外，这不会解决非办公文件的问题。您可以[在 JS 中使用 Window.Print](https://stackoverflow.com/questions/10296783/html-print-embed-file)来处理这些情况。

但总而言之，这将是一团糟:)

# javascript - 如何使用 onclick 功能

> ID：13821617
> 
> 赞同：0
> 
> 时间：2012-12-11T13:36:43.353
> 
> 标签：javascript, html

我正在使用 javascript 和 html。我正在调用一个函数“getdata（）”，我能够动态获取数据但是当我点击来自的数据时

*   另一个函数需要调用，但在这个我得到空值。我不知道这个功能哪里出错了。但是如果我使用带有 onchange 事件处理程序的标签，当我们从选择下拉列表中更改数据时，我可以看到 onchange 正在调用另一个函数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:54:01.497

不需要`<a>`标签和`value`属性`<li>` 的格式`<options>`应该是`<option>`

为了使这项工作我的建议是

```
 onclick='getlist("+group[i].name)+"') 
```

现在你面临的错误是因为`getlist`函数没有发送 li 的值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:54:08.737

考虑使用`data`普通 HTML 标签的属性，例如`li`，f.ex：

```
html += "<li data-value='"+(group[i].name)+"' "+
        "onclick='getlist(this.getAttribute(\'data-value\'));'>"+
        "<a href='#'>"+ group[i].name+"</a>"+
        "</li>; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:40:21.673

使用 onclick='getlist(this.value); 在锚标签中插入 li 标签

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T13:48:44.927

最大的问题是存在 z-index 问题。a 标签正在被单击，首先执行。您是否偶然使用html5？如果我是你，我可能会做的事情是这样的。

```
<a href="#" data-value="x" onclick="getlist(this.getAttribute('data-value'))"></a> 
```

另外，您使用内联 JS 有什么特别的原因吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T14:42:30.307

`li`中的一个`ul`没有`value`属性。我认为这是一个很好的方法（没有内联事件）

```
function getdata(){
    var html = "<ul id='getlist'>";
    for(var i=0;i<group.length;i++){
        if(group[i] !== null)
          html = html+"<li><a href='#'>"+ group[i].name+"</a></li>";
     }
     return html+"</ul>";
}
document.getElementById('getlist').onclick=getlist;
// Function getlist
function getlist(e)
{
    e=e || window.event;
    var el=e.target || e.srcElement;
    alert(el.innerHTML); // or what ever you want
    return false;
} 
```

[**示例在这里**](http://jsbin.com/aqekat/7/edit)。

# svn - 将 SVN 存储库作为子目录移动到另一个 SVN 存储库

> ID：13821618
> 
> 赞同：3
> 
> 时间：2012-12-11T13:36:52.163
> 
> 标签：svn, repository

我在 linux 机器上有 3 个 svn repos

```
Main Project
  -trunk
  -branches
  -tags

Project A
  -trunk
  -branches
  -tags

Project B
  -trunk
  -branches
  -tags 
```

我想要的是一个目录结构如下....

```
Main Project
  -trunk
  -branches
  -tags
  -Sub-Projects
    -Project A
      -trunk
      -branches
      -tags
    -Project B
      -trunk
      -branches
      -tags 
```

谁能帮我看看哪个是最好的方法...

项目也如`/conf /db /hooks /locks format readme.txt`

**更新：**我使用创建了子目录`svn mkdir`。现在它们正确显示为`Main Project/Sub-Projects/Project`A。现在我如何将项目 A 存储库中的内容移动到新位置并保持历史记录。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T01:00:59.153

[Subversion externals](http://svnbook.red-bean.com/en/1.7/svn.advanced.externals.html)是最好的答案（有一些限制和预防措施，是的），无需物理转移存储库

IE

*   您保存所有三个独立的存储库
*   在回购中，`Main Project`您将创建`Sub-Projects`目录
*   在 Sub-Projects root 中，您将为项目 A 和项目 B 的根创建两个外部定义，并拥有三个物理仓库但一个统一的逻辑树

[Assembla 上的外部 Playground-repo](https://www.assembla.com/code/subversion-troubleshoot-b/subversion/nodes)，开放阅读和公开：查看当前状态，检查简短历史

# css - 将 swiffy-Stage 对齐到页面的右侧

> ID：13821626
> 
> 赞同：0
> 
> 时间：2012-12-11T13:37:25.850
> 
> 标签：css, html, google-swiffy

我有一个用 Google swiffy 转换为 html5 的 flash 场景。一切都很好，但我无法让场景（或舞台）与页面右侧对齐。

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Swiffy output</title>
<script src="https://www.gstatic.com/swiffy/v4.9/runtime.js"></script>
<script>
swiffyobject = {"tags":[{"bounds":.........HERE IS THE SWIFFY-CODE..........
</script>
<style>html, body {width: 100%; height: 100%}</style>
</head>
<body style="margin: 0; overflow: hidden">
<div id="swiffycontainer" style="width: 800px; height: 310px">
</div>
<script>
var stage = new swiffy.Stage(document.getElementById('swiffycontainer'),
swiffyobject);
stage.start();
</script>
</body>
</html> 
```

你能帮我吗？我认为这对 HTML 专家来说很容易——但我无法解决这个小问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:43:28.780

我假设脚本是你想要对齐的......如果不是生病，以它为例

有了`float:right;`你可以让它向右浮动

```
<div style="float:right;">
    <script>
    var stage = new swiffy.Stage(document.getElementById('swiffycontainer'),
    swiffyobject);
    stage.start();
    </script>
</div> 
```

另一种选择是`text-align:right;`

```
<div style="text-align:right; width:100%;">
    <script>
    var stage = new swiffy.Stage(document.getElementById('swiffycontainer'),
    swiffyobject);
    stage.start();
    </script>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T16:24:17.587

如果您发现此页面是因为您正在寻找如何将 swiffy 动画居中；

```
#swiffycontainer { margin:0 auto; } 
```

对我很有用。

# jquery - 保存客户端控制 (HTML) 服务器端

> ID：13821629
> 
> 赞同：1
> 
> 时间：2012-12-11T13:37:40.857
> 
> 标签：jquery, .net, html, client-server

我们有从旧的 dos 数据库生成的 HTML 模板，在 .net 中显示这些模板很好，我需要做的是在更改输入字段后捕获所述模板并将文件保存回服务器端。

我已经使用了一些 jQuery，但是当我将模板加载到页面上的 asp:literal 控件中时，它只会保存发送的内容。我需要能够将包括 HTML 在内的整个部分发布回服务器。我无法定义每个输入字段。

这背后的原因是页面可以是通用的，并且可以加载和保存模板作为输入字段的任何内容。

任何聪明的想法或更好的方法都会有所帮助

我已经了解基础知识

```
$(document).ready(function () {

    $("#save").click(function () {
        alert("HTML: " + $("#MyHTML").html());
    });
}); 
```

当我点击保存按钮时，它只会显示交付的 HTML。我想收集 HTML，包括客户端修改的输入字段。像普通的 POST 但模板没有智能将数据发送回服务器..

另一点是，如果我通过在 firebug 中更改 value="blah blah" 来更改页面并单击保存按钮，我会得到更改，但屏幕随后会将字段更改回原始数据.....我我在这里错过了什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:50:04.503

所以我假设这些是您目前正在遵循的步骤

```
1\. Reading db for templates content
2\. generating equivalent html for these templates and adding it to the dom(a html page)
3\. Adding some data to the generated input controls
4\. Get Entire HTML again and Save to Database 
```

我假设您现在可以成功完成前 3 个步骤，如果您想捕获整个内容，只需执行以下操作：

首先，在某个容器中填充您的模板，例如任何或

现在只需这样做：

```
<script>
$(document).ready(function(){
  var templateModifiedData= $('#containerId').html();
   makeAjaxRequest(templateModifiedData); //send to server method to save in db
});
</script> 
```

就如此容易。重要的是，您如何填充模板。

这应该给你一个想法。

# android - Facebook 使用 API 而不从 Android 上的 FacebookActivity 扩展 Activity

> ID：13821634
> 
> 赞同：0
> 
> 时间：2012-12-11T13:37:57.410
> 
> 标签：android, facebook-graph-api

我有一个 Activity 已经从我自己的自定义 Activtiy 类扩展。

如何在不扩展 FacebookActivtiy 的情况下使用 Facebook API。

我调用 LoginActivity 并获取 access_token，但在那之后我必须做什么？

知道的请给个链接？

我尝试使用旧方案，即使用 app_id 创建类 Facebook 的新实例，但 SDK 告诉 Facebook 类已弃用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:47:05.983

首先，您应该获得最新版本的 API（如果您还没有的话），即您可以在[此处](http://developers.facebook.com/docs/getting-started/facebook-sdk-for-android/3.0/)找到的 v3.0 。

有关如何在不扩展 Facebook 的情况下实现身份验证逻辑的详细说明，请`LoginActivity`参见[此处。](http://developers.facebook.com/docs/howtos/androidsdk/3.0/login-with-facebook/#advanced1)

希望能帮助到你！

# sql - 选择单独显示连接词的查询，不使用函数

> ID：13821639
> 
> 赞同：1
> 
> 时间：2012-12-11T13:38:05.337
> 
> 标签：sql, sql-server, tsql

我需要一个选择查询，它根据大写字母的位置向数据添加一个空格，即使用此查询的“HelpMe”将显示为“Help Me”。请注意，我不能使用存储的函数来执行此操作，它必须在查询本身中完成。数据是可变长度的，查询必须在 SQL 中。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:29:15.030

您需要为此使用用户定义的函数，直到 MS 为我们提供对正则表达式的支持。解决方案类似于：

```
SELECT col1, dbo.RegExReplace(col1, '([A-Z])',' \1') FROM Table 
```

Aldo 这将产生可以使用 TRIM 删除的前导空间。

替换正则表达式函数：

[http://connect.microsoft.com/SQLServer/feedback/details/378520](http://connect.microsoft.com/SQLServer/feedback/details/378520)

关于 dbo.RegexReplace，您可以在以下位置阅读：

[TSQL 用空字符串替换所有非 az/AZ 字符](https://stackoverflow.com/questions/2374594/tsql-replace-all-non-a-z-a-z-characters-with-an-empty-string)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:36:18.240

假设如果您使用的是`Oracle`RDBMS，则使用以下内容，

`REGEX_REPLACE`

```
SELECT REGEXP_REPLACE('ILikeToWatchCSIMiami',
           '([A-Z.])', ' \1')
           AS RX_REPLACE
      FROM dual
; 
```

设法得到这个输出：* [SQLFIDDLE](http://sqlfiddle.com/#!4/dc5de/1)

但正如你所见，它对诸如`CSI`虽然这样的词的处理并不好。

# ruby-on-rails - Rails：跳过两个belongs_to关联

> ID：13821642
> 
> 赞同：0
> 
> 时间：2012-12-11T13:38:11.543
> 
> 标签：ruby-on-rails

假设我有三个模型...

```
Product
 belongs_to :ProductCategory
 belongs_to :Manufacturer

ProductCategory
 has_many :products

Manufacturer
 has_many :products 
```

我想通过调用 product_category.manufacturers 向 ProductCategory 的实例询问该 ProductCategory 中产品的制造商集。

我目前已经在 Products 模型中实现了它，如下所示：

```
def manufacturers
  Manufacturer.find(self.products.pluck(:manufacturer_id).uniq.to_a
end 
```

有没有更好的“铁路方式”？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:41:23.450

是的，这是一个很好解决的问题，也是在 Rails 中使用关联的基本部分。你想要[`has_many :through`](http://guides.rubyonrails.org/association_basics.html#the-has_many-through-association)：

```
class ProductCategory
  has_many :products
  has_many :manufacturers, :through => :products
end 
```

# android - 填充 ListView 时的 SQLite db 关闭问题

> ID：13821649
> 
> 赞同：0
> 
> 时间：2012-12-11T13:38:12.217
> 
> 标签：android, sqlite, listview

将预先存在的数据库复制到新创建的数据库后，我收到错误消息，该数据库用于填充带有标题的列表视图。这一切都很好，但是一旦我滚动列表视图，我就会收到关于数据库未关闭的错误。

我不知道在哪里放置 close 声明。我已经在我的活动超类的 onDestroy() 方法中使用，并在每次使用游标填充用于列表视图的数组时打开和关闭数据库。

我在这里查看了其他问题，但我似乎无法找到这个特定问题的答案。

非常感谢

继承人logcat：

```
12-11 12:55:58.072: E/Database(17830): close() was never explicitly called on database  '/data/data/com.sil.android.bofseg2012/databases/bofsegdb1' 
12-11 12:55:58.072: E/Database(17830): android.database.sqlite.DatabaseObjectNotClosedException: Application did not close the cursor or database object that was opened here
12-11 12:55:58.072: E/Database(17830):  at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1810)
12-11 12:55:58.072: E/Database(17830):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:817)
12-11 12:55:58.072: E/Database(17830):  at com.sil.android.bofseg2012.DBHelper.openDatabase(DBHelper.java:108)
12-11 12:55:58.072: E/Database(17830):  at com.sil.android.bofseg2012.DBHelper.getDatabase(DBHelper.java:121)
12-11 12:55:58.072: E/Database(17830):  at com.sil.android.bofseg2012.GamesList.<init>(GamesList.java:55)
12-11 12:55:58.072: E/Database(17830):  at com.sil.android.bofseg2012.ContentsActivity.populateLists(ContentsActivity.java:49)
12-11 12:55:58.072: E/Database(17830):  at com.sil.android.bofseg2012.ContentsActivity.onResume(ContentsActivity.java:102)
12-11 12:55:58.072: E/Database(17830):  at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
12-11 12:55:58.072: E/Database(17830):  at android.app.Activity.performResume(Activity.java:3823) 
```

这是我的 dbOpenHelper 类：

```
import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.ContentValues;
import android.content.Context;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DBHelper extends SQLiteOpenHelper
{
    private static final String DB_PATH = "/data/data/com.sil.android.bofseg2012/databases/";
    private static final String DB_NAME = "bofsegdb1";
    private static final int VERSION = 1;
    private static final String TABLE_NAME = "bofseg_full_1";
    protected static final String SEARCHABLE_TABLE = "searchable_table";
    private static final String KEY_ID = "_id";
    private static final String GAME_NAME = "game_name";
    private static final String PLAYERS = "players";
    private static final String VENUE = "venue";
    private static final String DURATION = "duration";
    private static final String EQUIPMENT = "equipment";
    private static final String SECTION = "section";
    private static final String FAVES = "fave";
    private SQLiteDatabase myDB;
    private final Context dbContext;

    public DBHelper(Context context)
    {
        super(context, DB_NAME, null, VERSION);
        this.dbContext=context; 
    }

    // check the imported database exists
    private boolean checkDatabase()
    {
        File dbFile = new File(DB_PATH + DB_NAME);
        boolean dbExists = dbFile.exists();
        return dbExists;
    }

    private void createAndCopyDataBase() throws IOException
    {
        if(!this.checkDatabase())
        {
            try
            {
                this.getWritableDatabase();

            } catch (Exception e1)
            {
                System.out.println("Error creating system db");
                e1.printStackTrace();
            }

            try
            {
                this.copyDatabase();
                //System.out.println("db copied");
            }catch(IOException e)
            {
                throw new Error("Error copying database");
            }
            finally
            {
                try
                {
                    this.close();
                } catch (Exception e)
                {               
                    e.printStackTrace();
                }
            }
            System.out.println("DB created and copied  and closed successfully");
        }
    }

    private void copyDatabase() throws IOException
    {
            InputStream myInput = dbContext.getAssets().open(DB_NAME);
            String outFileName = DB_PATH + DB_NAME;
            OutputStream myOutput = new FileOutputStream(outFileName);
            byte[] buffer = new byte[1024];
            int length;
            while((length = myInput.read(buffer))>0)
            {
                myOutput.write(buffer,0,length);
            }
            myOutput.flush();
            myOutput.close();
            myInput.close();        

            this.createVirtualTable();
            this.getDatabase().execSQL("INSERT INTO " + SEARCHABLE_TABLE  + " SELECT * FROM " + TABLE_NAME);
            this.close();

    }

    public void openDatabase() throws SQLException
    {
        String sysDBPath = DB_PATH + DB_NAME;
            // this is line 108 that is throwing the error:
        this.myDB = SQLiteDatabase.openDatabase(sysDBPath, null, SQLiteDatabase.OPEN_READWRITE);
        System.out.println("DBH openDatabase myDB is open = " + this.myDB.isOpen());
    }

    public SQLiteDatabase getDatabase()
    { 
        try
        {
            this.createAndCopyDataBase();
        } catch (IOException e)
        {
            e.printStackTrace();
        }
        this.openDatabase();

        return this.myDB;
    }

    private void createVirtualTable()
    {
        try
        {
            this.getDatabase().execSQL("CREATE VIRTUAL TABLE ["+SEARCHABLE_TABLE+"] USING fts3 (" +
                    "[" +KEY_ID+"] TEXT," +
                    "[" +GAME_NAME+"] TEXT," +
                    "[" +PEOPLE+"] TEXT," +
                    "[" +VENUE+"] TEXT," +
                    "[" +DURATION +"] TEXT," +
                    "[" +EQUIPMENT +"] TEXT," +
                    "[" +SECTION +"] TEXT," +
                    "[" +FAVES+"] TEXT," +");"
                    );
            System.out.println("virtual table created");
        }
        catch (Exception e)
        {
            e.printStackTrace();
            this.deleteSearchableDBStructure(this.getDatabase());
        }

    }

    private void deleteSearchableDBStructure(SQLiteDatabase database)
    {
        try
        {
            database.execSQL("DROP TABLE IF EXISTS ["+SEARCHABLE_TABLE+"];");
        } catch (SQLException e)
        {           
            e.printStackTrace();
        }
    }

    public synchronized void close()
    {
                try
                {
                    this.myDB.close();
                    super.close();
                    System.out.println("myDb is open = " + this.myDB.isOpen());
                } catch (Exception e)
                {
                    System.out.println("Error in DBHelper close()");
                    e.printStackTrace();
                }
    }

    //Update the faves column of the db at row pageNumber
    public boolean addFavourite(int pageNumber)
    {
        boolean addedOk = false;
        ContentValues args = new ContentValues();

        try
        {
            args.put(FAVES, "y");
            this.openDatabase();
            this.myDB.update(TABLE_NAME, args, KEY_ID + " = " + pageNumber , null);
            addedOk = true;
        } catch (SQLException e)
        {       
            e.printStackTrace();
        }
        finally{
            try
            {
                this.close();
            }
            catch (Exception e) {
                e.printStackTrace();
            }

        }
        return addedOk;
    }

    @Override
    public void onCreate(SQLiteDatabase db)
    {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:02:35.840

我认为您在更新后将其保持打开状态。也许通过添加`this.myDB.close();`after`addedOk = true;`可能会有所帮助

# android - ANDROID 使用非标准 SIP 端口

> ID：13821650
> 
> 赞同：2
> 
> 时间：2012-12-11T13:38:34.390
> 
> 标签：android, sip, voip

我正在尝试使用 Android SIP 示例应用程序。我的问题是我尝试用我的服务器端口 443 更改默认端口（5060）我有这些错误：

```
java.lang.IllegalArgumentException: incorrect port arugment: 443 
```

我用于更改端口：

```
SipProfile.Builder builder = new SipProfile.Builder(username, server);
builder.setPort(443); 
```

请问有人可以帮我吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:36:48.097

试试这个代码

```
SipProfile.Builder builder = new SipProfile.Builder(username, uri.getHost())
builder.setPort(uri.getPort());
builder.build(); 
```

# node.js - Node.js 和 Express 中的表单流

> ID：13821656
> 
> 赞同：1
> 
> 时间：2012-12-11T13:38:57.403
> 
> 标签：node.js, express

我们实验室做了很多网络实验，都有类似的流程：

1.  用户填写表格并提交。表单已验证，如果正常，则记录发布的值并将用户发送到#2；否则要求用户再次填写。
2.  用户回答测验。如果答案正确，则转到#3；否则再次填写。
3.  用户进入实际实验，这是一个web-app——聊天室、flash游戏等。游戏结束后，进入#4。
4.  用户填写另一个表单并提交。

过去我用 JSP 做这件事，但现在我们转向 NodeJS 和 Express，我想知道是否有一种通用的方法来处理这个和类似的控制流。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T20:06:43.473

这个问题非常笼统，所以总的来说答案是肯定的——你可以用 node 和 express 来做所有这些。只需使用 express 注册您的路线（例如使用 app.get(URI, func)）并从节点提供您的动态和静态内容。网上有大量关于使用 express 的资料。

# matlab - 为散点图中值最多的区域选择限制

> ID：13821657
> 
> 赞同：0
> 
> 时间：2012-12-11T13:38:48.613
> 
> 标签：matlab, axes, scatter

假设我有散点图：

```
dat = [1+(5-1).*rand(1000,1);89;92];
dat2 = dat+0.2;
scatter(dat,dat2); 
```

从图中可以看出，有两个点比其余值大得多。是否有一种方法可以获取大多数值所在区域的轴限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:47:41.017

这取决于您对“多数”的定义，但对于这样的任务，您通常应该使用统计工具，例如`mean`和`std`。

让我们假设大多数点与平均值相差一个标准差。根据这个逻辑，你需要在 x 轴和 y 轴上找到所有落在该范围内的点：

```
xmaj = dat(abs(dat - mean(dat)) < std(dat));
ymaj = dat2(abs(dat2 - mean(dat2)) < std(dat2)); 
```

现在`xmaj`并`ymaj`包含“大多数”点的坐标。要获得包含大多数点的区域的轴限制，只需执行以下操作：

```
xlims = [min(xmaj), max(xmaj)]
ylims = [min(ymaj), max(ymaj)] 
```

对于您的示例，您应该是这样的：

```
xlims =

    1.0053    4.9969

ylims =

    1.2053    5.1969 
```

# magento - magento 如何将 EAV 数据转换为 Flat 数据？

> ID：13821666
> 
> 赞同：1
> 
> 时间：2012-12-11T13:39:12.683
> 
> 标签：magento

谁能给我解释一下？

*哪些类和方法与更新平面目录表中的 EAV 属性值相关？哪些因素允许将属性添加到平面目录表中？*

是的，我做了功课，在网上搜索并检查了 Magento 源代码，但无法得到任何令人满意的答案。

谢谢！

# image - 在 scikit-learn - csv 文件中生成图像特征数据集

> ID：13821671
> 
> 赞同：0
> 
> 时间：2012-12-11T13:40:02.577
> 
> 标签：image, dataset, machine-learning, scikit-learn, feature-extraction

我从单个图像中提取 2 个边缘特征（Hog 特征和 sobel 算子）。

如何在 Scikit-learn python 中创建图像特征数据集，如 iris_dataset ？在库中有代表数据集的 csv 文件。仅包含数字的 csv 文件。这些数字是如何产生的？特征提取？

不幸的是，我在这里只看到了一个 java 教程[http://www.coccidia.icb.usp.br/coccimorph/tutorials/Tutorial-2-Creating-](http://www.coccidia.icb.usp.br/coccimorph/tutorials/Tutorial-2-Creating-) ...，在 5 点谈论生成训练矩阵（平均和共同方差矩阵）？Scikit 中有什么函数可以生成这些训练数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:49:48.640

您无需将数据包装为 CSV 文件即可将其加载为数据集。scikit-learn 模型有一个`fit`期望的方法：

*   作为第一个参数，它是一个常规的 numpy 数组（或 scipy.sparse 矩阵），其形状`(n_samples, n_features)`（最常见的是`dtype=numpy.float64`）来编码训练集中每个样本的特征向量，

*   对于有监督的分类模型，第二个参数带有形状`(n_samples,)`和`dtype=numpy.int32`编码，用于对训练集的每个样本编码为整数值的类标签分配。

如果您不了解基本的 numpy 数据结构以及什么`shape`和`dtype`含义，我强烈建议您查看[SciPy Lecture Notes](http://scipy-lectures.github.com/)等教程。

**编辑**：如果您真的需要从 numpy 数组读取/写入数字 CSV，您可以使用`numpy.loadtxt`/`numpy.savetxt`

# javascript - 如何以编程方式启动 svg 过滤器动画

> ID：13821674
> 
> 赞同：0
> 
> 时间：2012-12-11T13:40:07.850
> 
> 标签：javascript, html, animation, svg, svg-filters

我在我的 html 页面的 svg 片段的 defs 部分构建了一个小发光过滤器。该过滤器内部有一个动画，使该过滤器慢慢淡出。

现在我将该过滤器分配给一些 svg 元素，比如说一个矩形。到目前为止一切顺利，效果很好。

问题，动画立即开始，但我想控制它何时开始，就像我在 javascript 中调用特定函数时一样。

现在我想，我将动画的开始设置为“不确定”，然后在动画上调用 beginElement()。但是我如何访问过滤器中的动画 dom 元素，该元素通过 url("#myFilterID") 分配给我的 svg 矩形？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:58:48.150

给它一个 id 属性，然后调用 document.getElementById 来检索它可能是最简单的。

# ios - 显示 ModalViewController 并进入后台状态后应用程序崩溃

> ID：13821675
> 
> 赞同：0
> 
> 时间：2012-12-11T13:40:05.390
> 
> 标签：ios, crash, modalviewcontroller

我的 iOS 应用程序不断崩溃。我找到了让它持续崩溃的方法。我多次重复该操作，每次都得到相同的崩溃日志。

如果我执行以下操作会发生崩溃：启动应用程序，稍微使用它（可选），转到主屏幕，打开模式 ViewController，关闭它，继续使用应用程序（可选），关闭应用程序（按主页按钮，而不是杀死应用程序），稍等一下（可选），重新打开应用程序。当应用程序重新打开时，它会在 1 秒后崩溃。请注意，当您离开时您在应用程序中的位置不会导致/防止崩溃。无论您在应用程序的哪个位置，它都会以相同的方式崩溃。如果我使用该应用程序并且不打开模态VC，我可以在后台发送它并重新打开它没有问题。

这是我每次得到的一些崩溃日志（我把我认为不相关的东西拿出来，我可以提供完整的日志）：

```
Exception Type:  EXC_CRASH (SIGABRT) 
Exception Codes: 0x00000000, 0x00000000 
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread 
Thread 0 Crashed: 
0   libsystem_kernel.dylib          0x317d332c __pthread_kill + 8 
1   libsystem_c.dylib               0x33ed0208 pthread_kill + 48 
2   libsystem_c.dylib               0x33ec9298 abort + 88 
3   libc++abi.dylib                 0x36d56f64 abort_message + 40 
4   libc++abi.dylib                 0x36d54346 _ZL17default_terminatev + 18 
5   libobjc.A.dylib                 0x35321350 _objc_terminate + 140 
6   libc++abi.dylib                 0x36d543be _ZL19safe_handler_callerPFvvE + 70 
7   libc++abi.dylib                 0x36d5444a std::terminate() + 14 
8   libc++abi.dylib                 0x36d5581e __cxa_rethrow + 82 
9   libobjc.A.dylib                 0x353212a2 objc_exception_rethrow + 6 
10  CoreFoundation                  0x37572506 CFRunLoopRunSpecific + 398 
11  CoreFoundation                  0x37572366 CFRunLoopRunInMode + 98 
12  GraphicsServices                0x33d31432 GSEventRunModal + 130 
13  UIKit                           0x3131ecce UIApplicationMain + 1074 
14  ***my app name**                0x0006f140 0x6b000 + 16704 
15  ***my app name**                0x0006d5f0 0x6b000 + 9712 
```

很难提供一些代码，我什至不知道我能提供什么..

我很想得到一些帮助，我不知道为什么会这样..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:54:17.753

对我来说，当你在后台时，感觉就像在进行一些清理工作。如果不是 iOS 6，那么检查你正在做什么来处理 viewDidUnload，在任何版本中，检查你在 viewWillDisappear/viewDidDisappear 和 viewWillAppear/viewDidAppear 中正在做什么。

# c# - LDAP - 从 IIS 获取用户的组名失败

> ID：13821676
> 
> 赞同：0
> 
> 时间：2012-12-11T13:40:11.030
> 
> 标签：c#, asp.net, iis, ldap

我按照[教程](http://msdn.microsoft.com/en-us/library/ff649227.aspx)在 ASP.NET/C# 4.0 Web 应用程序上实现 LDAP 身份验证。虽然事情似乎确实有效，但当我将网站放在 IIS7 下时，它无法获取组名。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Text;
using System.Collections;
using System.DirectoryServices;
using System.DirectoryServices.ActiveDirectory;

namespace KEWeb
{
    public class LdapAuthentication
    {
        private string _path;
        private string _filterAttribute;
        private string _username;
        private string _password;
        private string _domain;
        private string _domainAndUsername;
        private DirectoryEntry _entry;
        private DirectorySearcher _search;
        private SearchResult _result;

        public LdapAuthentication(string path, string domain, string username, string password)
        {
            _path = path;
            _domain = domain;
            _username = username;
            _password = password;
            _domainAndUsername = _domain + @"\" + _username;
            _entry = new DirectoryEntry(_path, _domainAndUsername, _password);

        }

        public bool IsAuthenticated()
        {
            try
            {
                Object obj = _entry.NativeObject;
                _search = new DirectorySearcher(_entry);
                _search.Filter = "(SAMAccountName=" + _username + ")";
                _search.PropertiesToLoad.Add("cn");
                _result = _search.FindOne();
                if (null == _result) { return false; }
                _path = _result.Path;
                _filterAttribute = (String)_result.Properties["cn"][0];
            }
            catch (Exception ex) { throw new Exception("Error authenticating user: " + ex.Message); }
            return true;
        }

        public string GetGroups()
        {
            string r = "";
            try
            {
                Object obj = _entry.NativeObject;
                _search = new DirectorySearcher(_entry);
                _search.Filter = "(SAMAccountName=" + _username + ")";
                _search.PropertiesToLoad.Add("cn");
                _result = _search.FindOne();
                if (null != _result)
                {
                    _path = _result.Path;
                    _filterAttribute = (String)_result.Properties["cn"][0];
                    _search = new DirectorySearcher(_path);
                    _search.Filter = "(cn=" + _filterAttribute + ")";
                    _search.PropertiesToLoad.Add("memberOf");
                    StringBuilder groupNames = new StringBuilder();
                    _result = _search.FindOne();
                    int propertyCount = _result.Properties["memberOf"].Count;
                    String dn;
                    int equalsIndex, commaIndex;
                    for (int propertyCounter = 0; propertyCounter < propertyCount; propertyCounter++)
                    {
                        dn = (String)_result.Properties["memberOf"][propertyCounter];
                        equalsIndex = dn.IndexOf("=", 1);
                        commaIndex = dn.IndexOf(",", 1);
                        if (-1 == equalsIndex) { return null; }
                        groupNames.Append(dn.Substring((equalsIndex + 1), (commaIndex - equalsIndex) - 1));
                        groupNames.Append("|");
                    }
                    r = groupNames.ToString();
                }
            }
            catch (Exception ex) { throw new Exception("Error obtaining group names: " + ex.Message); }

            return r;
        }
    }
} 
```

在 Visual Studio 2010 的调试中运行它时，它工作正常。但是在 IIS7 上，它给出了一个错误`An operations error occured.`Not sure how to debug this while under IIS，尽管我确信这是可能的。如果我完全忽略`GetGroups()`并注释掉该代码，它会起作用，但我当然需要这些组名。

PS - 是的，上面的代码与原始代码完全不同，我对其进行了调整以重用一些多余的东西。然而，在我改变它之前，我确实遇到了这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:38:38.253

您正在使用错误的项目搜索组 - 您需要使用：

```
_search = new DirectorySearcher(_path); 
```

在`GetGroups()`通话中。该`_path`变量由`IsAuthenticated()`调用设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:22:54.213

如果附加到 w3wp 进程，则可以在 iis 下调试应用程序。使用 CTRL+Alt+P 热键附加到它，或转到调试菜单并选择附加到进程...并选中“显示所有会话中的进程”复选框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-27T17:00:51.640

这可能为时已晚，但我遇到了完全相同的问题。

对我来说，IIS 站点启用了 ASP.Net 模拟和匿名，并且模拟用户配置为使用经过身份验证的用户。由于还启用了匿名，这将始终失败，因为匿名用户无权访问 AD。

将 ASP.Net 模拟更改为使用有效的 AD 帐户，瞧！

约翰

PS。我也和你在同一个教程中工作。:)

# javascript - 使用 javascript 或 jQuery 按类选择元素

> ID：13821677
> 
> 赞同：0
> 
> 时间：2012-12-11T13:40:11.530
> 
> 标签：javascript, jquery

我有以下 html 片段；

```
<input name='first' class="foo" />
<input name='second' class="foo bar" />
<input name='third' class="foo" /> 
```

我想设置特定元素的值，但我无法选择正确的元素。这是我试过的：

```
jQuery('.bar').val('selected'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T13:47:45.737

似乎工作正常，请确保您已准备好在 dom 上运行。

```
$(function() {
    $('.bar').val('selected');
}); 
```

# cmake - CMake：收集库

> ID：13821679
> 
> 赞同：0
> 
> 时间：2012-12-11T13:40:48.113
> 
> 标签：cmake

我正在使用 CMake 构建一个简单的 C++ 项目，以下命名为**P**。P的结构很简单：

*   P/src/
*   P/src/package1
*   P/src/packege2
*   P/src/...
*   P/src/主应用

我想在名为**P_LIBS**的变量中收集 package1, package2, ... 中的库。

在第一次尝试中，我尝试在最初设置在 src/CMakeLists.txt 文件中的名为**P_LIBS的变量中收集 package1、package2、...中可用的库。**但是，在子文件夹的 CMakeLists.txt 中对**P_LIBS**所做的更新不会传播到父文件夹。

我宁愿不在主 CMakeLists.txt 文件中编写库列表。我宁愿在目录树中移动时修改这样的变量。

在互联网上搜索后，我找不到任何有效的建议。如果我查看各种 Find 文件，我只会在它们的主 CMakeLists.txt 文件中看到很长的库列表。

有没有办法做我上面解释的（我希望）？

* * *

感谢 sakra 的链接，我能够将名称“传播”到父文件夹。但是，我添加到**P_LIBS**变量的名称后来被解释为“库”名称，而不是对 CMake 目标的引用。换句话说，如果

```
P_LIBS = {a, b} 
```

'a' 和 'b' 被解释为库名称，即 CMake 生成：

```
gcc [...] -l a -o exe 
```

代替

```
gcc [...] /path/to/a.o -o exe 
```

（.o 或其他扩展名）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:39:35.280

您可能正在将目标列表构建为字符串，请尝试将它们设为列表。例如：

```
# in package1/CMakeLists.txt
set(P_LIBS ${P_LIBS} a b PARENT_SCOPE) 
```

# c# - 将 c# windows 面板转换为 c HWND

> ID：13821680
> 
> 赞同：3
> 
> 时间：2012-12-11T13:40:39.703
> 
> 标签：c#, hwnd

我有一个接受 HWND 的 dll，（dll 中的代码）；

```
void VideoCapture::SetVideoWindow(HWND VidWind)
{
    VideoWindow = VidWind;
} 
```

我通过在引用中添加 dll 在示例 c#.net 应用程序中调用上述 dll，在 c#.net 中我有一个带有面板的表单，是否可以将该面板传递给 dll？我在c#中给出了如下代码

```
VidCapWrapper.ManagedVideoCapture cc = new VidCapWrapper.ManagedVideoCapture();

cc.SetVideoWindow( panel1); 
```

我收到如下错误：'错误 2'VidCapWrapper.ManagedVideoCapture.SetVideoWindow(HWND__ *)' 的最佳重载方法匹配有一些无效参数 D:\DirectShow_Capture_GUI\DirectShow_Capture_GUI\Form1.cs 44 13 DirectShow_Capture_GUI 错误 3 参数 1：无法转换从 'System.Windows.Forms.Panel' 到 'HWND__* ' D:\DirectShow_Capture_GUI\DirectShow_Capture_GUI\Form1.cs 44 32 DirectShow_Capture_GUI`

谁能告诉我如何将面板传递给 dll，（任何例子都会很好）？（抱歉，我对 .net 很陌生，但正在尝试创建一个示例应用程序来显示可用设备，如集成网络摄像头......然后在 c#.net 表单面板上显示预览）

**编辑**：感谢@Blachshma 和@Hans Passant，现在我可以将c# windows 窗体的面板传递给我的c++ dll。

我将 dll 中的函数更改为

```
void VideoCapture::SetVideoWindow(IntPtr windowHandle)
{
    VideoWindow = (HWND)windowHandle.ToPointer();
} 
```

在 c# 中，我将其称为 cc.SetVideoWindow(panel1.Handle);

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T14:47:49.057

您必须小心*不要*将 HWND 等基本非托管类型暴露给 C# 代码。C# 编译器不允许您传递这种类型的值。这里正确的互操作类型是 IntPtr，它可以存储句柄值。所以让你的 C++/CLI 方法看起来像这样：

```
void VideoCapture::SetVideoWindow(IntPtr windowHandle)
{
    VideoWindow = (HWND)windowHandle.ToPointer();
} 
```

您现在可以简单地将 panel1.Handle 传递给该方法，该方法也是 IntPtr 类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T13:53:23.017

该面板有一个`Handle`您可以使用的属性：

```
Panel p = new Panel();
IntPtr handle = p.Handle; 
```

`SetVideoWindow`如果您将签名设置为允许，这应该足够`IntPtr`了

```
void VideoCapture::SetVideoWindow(IntPtr VidWind) 
```

如果您必须使用 HWND，则需要使用**[不安全](http://msdn.microsoft.com/en-us/library/chfa2zb8%28v=vs.71%29.aspx)**的上下文，并像这样进行转换：

```
HWND hwnd=(HWND)this.Handle.ToPointer(); 
```

这是包含更多信息的[链接](http://www.pcreview.co.uk/forums/system-windows-forms-control-handle-hwnd-t3829987.html)

# sql - 如何创建用于查询的硬编码日期参数？

> ID：13821681
> 
> 赞同：6
> 
> 时间：2012-12-11T13:40:25.033
> 
> 标签：sql, sql-server, date, ssms

示例（不是这样工作的）：

```
SELECT * FROM User 
WHERE LastActivity > Date(1980,1,1) 
```

其中 Date 应使用参数年、月、日作为整数。为了避免语言环境的问题，我明确不想使用像“yyyy/mm/dd”或类似的字符串。

如果这很重要，我正在 MSSQL 数据库上使用 Microsoft SQL Server Management Studio。

注意：我确信这是微不足道的，但我既没有使用谷歌也没有找到解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-11T13:44:57.747

> 为了避免语言环境的问题，我明确不想使用像“yyyy/mm/dd”或类似的字符串。

为避免这种情况，最好的方法是将日期传递为与语言无关的`YYYYMMDD`. 这样它将与语言无关：

```
SELECT * FROM User 
WHERE LastActivity > '19800101'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:48:45.597

使用`ISO date format`哪个`yyyymmdd`

```
SELECT * FROM User 
WHERE LastActivity > CONVERT(DATE, (CONVERT(VARCHAR(4), @Year) + 
                                    RIGHT('0' + CONVERT(VARCHAR(2), @Month),2) + 
                                    RIGHT('0' + CONVERT(VARCHAR(2), @Date),2) )) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:05:14.330

我一直发现大多数数据库都会接受 'dd-mmm-yyyy' 作为日期参数，而且我几乎在任何地方都使用它。有些人没有（例如 MS/Access），但 SQL/Server 有。这种格式被广泛接受，但显然您可能需要使其特定于语言。

```
SELECT * FROM User WHERE LastActivity > '11-Dec-2012'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-10T13:10:33.160

我认为“转换”功能可以满足您的需求。要制作 1980 年 3 月 20 日，请执行以下操作：

```
Convert(date, '1980-03-20') 
```

您的确切查询将是：

```
SELECT * FROM User 
WHERE LastActivity > Convert(date, '1980-01-01') 
```

如果您使用的是 SQL Server 2012 及更高版本，则可以使用更简单的 DATEFROMPARTS 函数：

```
SELECT * FROM User 
WHERE LastActivity > DATEFROMPARTS(1980,01,01) 
```

# javascript - 使用 jquery 插入后的按钮操作不起作用

> ID：13821683
> 
> 赞同：2
> 
> 时间：2012-12-11T13:41:01.923
> 
> 标签：javascript, jquery, html

我有一个按钮“添加”我点击它然后保存按钮将附加到我的 div。这是有效的，但我无法触发“保存”按钮的功能。如果我将“保存”按钮直接粘贴到代码中，它就可以工作。我找不到我的错误...

```
<a class="save" href="#"><img src="images/save.png" alt="save_working" /></a>
<a class="add_row" href="#"><img src="images/icon_add_light.png" alt="add" /></a><br>
<div id="hinzu"></div>

$(".save").click(function() {
    alert("saveworking");
});

$(".add_row").click(function() {
    $("#hinzu").append('  <a class="save" href="#"><img src="images/save.png" alt="savenotworking" /></a>');
}); 
```

这是一个小提琴：http: [//jsfiddle.net/MgcDU/321/](http://jsfiddle.net/MgcDU/321/)

为什么这不能与 js append 方法一起使用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T13:42:21.517

它是动态的，因此在绑定事件时它不存在。为此，您需要将事件委托给在附加事件处理程序时实际存在的元素：

```
$("#hinzu").on('click', '.save', function() {
    alert("saveworking");
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:43:32.177

像这样使用它：

```
$("#hinzu").on('click', ".save", function() {
    alert("saveworking");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T13:43:55.290

这是因为当您尝试执行 $(".save") 时，它不存在。

您必须使用 on() 来监视是否有任何新的 .save 在您的厄运中并分配事件处理程序。

```
$("#hinzu").on('click', '.save', function()
{
    alert("This Does work");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T13:44:26.533

它不起作用，因为`$(".save").click()`调用将 onclick 处理程序绑定到所有具有`save`在调用点已经存在的类的元素。

要将事件处理程序也绑定到绑定时不存在的元素，您必须使用`$(document).on('click', '.save', function() { [...] })`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T14:02:35.227

如果要保存代码，请使用：

```
<script type="text/javascript">
    $(function() {
        $('.save').click(function() {
            alert('saveworking');
        });
    });

    $(function() {
        $('.add_row').click(function() {
            alert('add_row');
        });
    });
</script> 
```

另一种方法是：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('.save').click(function () {
            alert('saveworking');
        });

        $('.add_row').click(function () {
            alert('add_row');
        });
    });
</script> 
```

# c++ - 在 Qt 和 C++ 中从另一个应用程序启动一个应用程序会出现问题

> ID：13821687
> 
> 赞同：0
> 
> 时间：2012-12-11T13:40:50.083
> 
> 标签：c++, qt, process

我用 QtCreator 和 C++ 编写了一个 qt 快速桌面应用程序。

我想从我的应用程序启动另一个应用程序。我搜索并找到了这些选项：Qprocess，具有以下功能：start、startDetached 和 execute。

我要启动的应用程序是单个应用程序，其他人建议我使用函数 startDetached。

我选择了 startDetached 函数的这个选项：

```
bool startDetached ( const QString & program, const QStringList & arguments, const QString & workingDirectory, qint64 * pid = 0 ) 
```

这是我的代码：

```
QProcess *process=new QProcess(this);
bool res;
    QStringList argsList;
    argsList.append("-start");
    process->startDetached(emulauncherInstallationDirectory + "\\Emulauncher.exe",argsList,emulauncherInstallationDirectory);
    res = process->waitForFinished();
    delete process;
    process=NULL;
    return res; 
```

但是当我运行我的应用程序时，它有时运行良好，而在其他时候则根本不起作用。

我调试了很多次，看到这个功能

> 进程->waitForFinished();

返回 false 或 true，没有明显的原因：在所有时间 .exe 文件都在它的位置，如果我从命令行运行它，或者通过双击文件，它运行良好，但是从我的应用程序 - 它有时运行良好，有时真的不行。

任何人都知道它的任何原因或这个奇怪问题的任何解决方案吗？

任何答案将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T13:46:38.123

从文档中：

> bool QProcess::waitForFinished (int msecs = 30000)
> 
> 如果进程完成，则返回 true；否则返回 false（如果操作超时，如果发生错误，或者如果此 QProcess 已经完成）。

因此`process->waitForFinished();`，如果您的过程在 30 秒内完成，则返回 true，否则返回 false。

`process->waitForFinished(-1);`如果您根本不想超时，请使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T13:47:52.283

会不会是超时问题？默认情况下，`waitForFinished()`等待 30 秒：

> bool QProcess::waitForFinished (int msecs = 30000)
> 
> 阻塞直到进程完成并发出finished() 信号，或者直到msecs 毫秒过去。
> 
> 如果进程完成，则返回 true；否则返回 false（如果操作超时，如果发生错误，或者如果此 QProcess 已经完成）。
> 
> 此函数可以在没有事件循环的情况下运行。它在编写非 GUI 应用程序和在非 GUI 线程中执行 I/O 操作时很有用。
> 
> 警告：从主 (GUI) 线程调用此函数可能会导致您的用户界面冻结。
> 
> 如果 msecs 为 -1，则此函数不会超时。

`waitForFinished(-1)`如果你想永远等待，你应该使用。

# c++ - Qt Creator 2.6.1 + Qt 5 + C++11 + MSVC2010 编译器

> ID：13821689
> 
> 赞同：4
> 
> 时间：2012-12-11T13:41:21.310
> 
> 标签：c++, visual-studio-2010, visual-c++, c++11, qt5

我正在尝试使用 Qt 在 Windows 上构建 C++ 应用程序。

我的设置是：

1.  已安装 Vs2008,2010,2012
2.  安装 Qt 5 RC1

现在，当我#include 并尝试使用 std::unique_ptr 它告诉我它没有定义，所以我查看了 VS2010 标头并看到需要定义 _HAS_CPP0X，所以我将它添加到 .pro 作为 DEFINES += _HAS_CPP0X

这仍然没有效果，所以我 ctrl+clicked #include 内存只是为了找到它使用的内存头：

C:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\include

里面真的没有任何 std::unique_ptr ！

当然它应该看：

C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC\include ？

我想我会通过完整路径包含内存，但这仍然失败，包含的内存头本身与 C++11 相关的错误，例如移动和右值引用。

所以我想知道的是：

1.  Windows 上的 Qt 可以使用 Vs2010 支持的 C++11 功能吗？
2.  如果是，那怎么办？
3.  如果不是，那么我非常失望，因为在 Linux 上开发跨平台 Qt 5 应用程序意味着它不是跨平台的，因为它不可能为任何其他平台构建它！

编辑：

这样解决方案就很清楚了：下载 Qt5 的源代码并使用 MinGW 构建它，您将一切就绪（包括已接受答案中的 C++11 pro 选项）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T14:18:16.140

你可以简单地说：

```
CONFIG += c++11 
```

在您的 .pro 文件中。但强烈建议将您的编译器升级到最新版本`g++`或。`clang`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T15:47:17.353

我正在运行 QT Creator 2.6.0，因此假设选项菜单没有更改，如果您转到*Tools > Options > Build & Run*然后查找*Compilers*选项卡，您应该会看到自动检测到的编译器列表，希望包括*Microsoft Visual C++ 编译器 10.0*。如果没有，可以手动添加。

至于 C++11 支持，如果您使用 cmake 并将项目导入 QT Creator，您可以将其添加到您的 cmake 文件中： set(CMAKE_CXX_FLAGS "-std=c++0x")

如果您使用的是 qmake，那么按照[手动](http://doc.qt.digia.com/4.3/qmake-variable-reference.html#qmake-cxxflags)设置 QMAKE_CXXFLAGS += -std=c++0x

**编辑：** 也就是说 Visual Studio 2010 (Visual C++ 10.0) 默认开启 c++11 支持，尽管应该注意它只是一个子集，这里是一个相关的[问题](https://stackoverflow.com/questions/5121529/how-to-enable-c0x-features-in-visual-studio-initializer-lists-support)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-11T17:08:09.497

不

> Windows 上的 Qt 可以使用 Vs2010 支持的 C++11 功能吗？

为此，您必须获得 Visual 2012。

> 如果不是，那么我非常失望，因为在 Linux 上开发跨平台 Qt 5 应用程序意味着它不是跨平台的，因为它不可能为任何其他平台构建它！

在 mac 上，使用 XCode 4 编译器 CLang 2，在任何平台上都可以使用基于 GCC 4.7 的编译器

# php - 组合框（选择框）中的多个值到 PHP 中的变量

> ID：13821698
> 
> 赞同：1
> 
> 时间：2012-12-11T13:41:41.527
> 
> 标签：php

我正在我的考试脚本中尝试一些东西。所以我想问一个关于我的问题的问题。

我在考试表格中有组合框。像这样 ：

```
<option value="<?PHP echo $answer_list['answer_value']; ?>"><?PHP echo $answer_list['answer_detail']; ?></option> 
```

我必须在这上面加上另一个价值。我想会是这样的：

```
<option value="<?PHP echo $answer_list['answer_value']; ?>,<?PHP echo $answer_list['answer_id']; ?>"><?PHP echo $answer_list['answer_detail']; ?></option> 
```

我必须将这些值保存到数据库中，但是当我将这些值分解到一个表中的不同列时，我真的不知道如何将这些值保存到数据库中。

* * *

我尝试了一些具有爆炸功能的东西，但我做得不好。

因此，当我从表单中发布这些值时，我尝试了此功能，但无法将它们保存到数据库中。

```
$answers = $_POST['answers'];
$answer_explode = explode(",",$answers);
$answer_id = $answer_explode[0]; 
$answer_value = $answer_explode[1]; 
```

这仅获得数组中的第一个和第二个值。但我必须像这样制作 2 个变量：

```
before comma 
$answer_id = values before comma
$answer_value = values after comma 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:44:40.373

`<option>`使用数组语法在 HTML 中命名`<option name="answers[]">`，您可以在 PHP POST 中将它们作为数组访问。

# arduino - Android 应用程序通过 USB 读取数据

> ID：13821700
> 
> 赞同：0
> 
> 时间：2012-12-11T13:41:32.347
> 
> 标签：arduino

我正在设计一个温度传感器，我可以读取通过 USB 发送到 Android 应用程序的数据。

我正在使用 Arduino Uno 和温度传感器，并且我可以通过 PC 上的串行终端读取温度，因此我可以使用此设置，但我希望 Android 应用程序接收来自 Arduino 的读数。我使用了 Sparkfun USB Host shield，但 4.0.1 的 Android 找不到 USB 设备。

我用错板了吗？也许我应该使用 Arduino ADK 让它工作？

有人用这个设置成功吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:45:34.437

[Android USB Host + Arduino：如何在不植根 Android 平板电脑或手机的情况下进行通信](http://android.serverbox.ch/?p=549)

# c# - C# 说 A 不是 B 的实例，但 A 实现了接口 B

> ID：13821701
> 
> 赞同：0
> 
> 时间：2012-12-11T13:41:37.850
> 
> 标签：c#, plugins, dll, interface, polymorphism

问题 - 我正在尝试插件开发，除了尝试将对象 A 转换为对象 B 之外，一切进展顺利，即使 A 实现了 B。

界面：

```
namespace DynamicApplications
{
    public interface IPlugIn
    {
        string Name { get; set; }
        IPlugInHost myHost { set; }
        void Show();
    }

    public interface IPlugInHost
    {
        bool Register(IPlugIn plug);
    }
} 
```

实现的类`IPlugIn`

```
namespace plugInOne
{
    class PlugIn : IPlugIn
    {
        IPlugInHost _myHost;

        public string Name
        {
            get
            {
                return "Plug-In One";
            }
            set
            {
            }
        }

        public IPlugInHost myHost
        {
            set
            {
                _myHost = value;
            }
        }

        public void Show()
        {
        }
    }
} 
```

现在实例化的代码：

```
 String path = Application.StartupPath;
        string[] assemblyNames = Directory.GetFiles(path, "*.dll");
        plugs = new IPlugIn[assemblyNames.Length];

        for(int i = 0; i < assemblyNames.Length; i++)
        {
            string Name = assemblyNames[i];
            Name = Name.Substring(Name.LastIndexOf("\\") + 1, Name.Length - Name.LastIndexOf("\\") - 1);
            Name = Name.Remove(Name.LastIndexOf(".dll"));
            assemblyNames[i] = Name;
        }

        for (int i = 0; i < assemblyNames.Length; i++)
        {
            Assembly DLL = Assembly.Load(assemblyNames[i]);

            if(DLL != null)
            {
                try
                {
                    Object p = Activator.CreateInstance(DLL.GetType(assemblyNames[i] + ".PlugIn"));

                    if (p is DynamicApplications.IPlugIn)
                    {
                        MessageBox.Show("YES!!!!");
                    }
                    else
                    {
                        MessageBox.Show("no>?>?>>><<?????");
                    }

                    plugs[i] = (IPlugIn)p;
                }
                catch(Exception ex)
                {
                    MessageBox.Show(ex.Message);
                }
            }
        } 
```

请注意，调试器显示`p`实际上已实例化且可访问

应用程序总是命中`MessageBox.Show("no>?>?>>><<?????");`

请帮忙

艾登

**编辑**

P 的类型：

![P 的类型：](../Images/2d68c51a61aabe1e9a5482239663fc27.png) 还

![在此处输入图像描述](../Images/01b8de584c2bbbfe26494a48f839552a.png)

YET pluginOne.PlugIn 实现了 IPlugIn

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:06:03.940

您引用的 a`DynamicApplications.IPlugIn`与将包含在程序集中的接口不同。

您需要`IPlugin`从程序集中获取实例，而不是使用本地实例。如果您执行以下操作，则您的检查代码很好：

```
public interface IA { }
public class A :IA { }

object a = Activator.CreateInstance<A>();
if (a is IA)
    Console.WriteLine("Yes"); 
```

但是，您`A`从其他地方获取（在上述上下文中），并且仍在尝试引用您的本地版本`IA`- 因此您需要从程序集中获取接口，而不是尝试在本地引用它。也许你可以做这样的事情：

```
if (objA.GetType().GetInterfaces().Any(x => x.Name == "IA"))
  Console.WriteLine("Yes"); 
```

# c++ - 在非常相似的方法之间共享代码

> ID：13821703
> 
> 赞同：3
> 
> 时间：2012-12-11T13:42:02.733
> 
> 标签：c++

我的工作是完全重写一个用于 GIS 矢量数据处理的旧库。主类封装了一组建筑轮廓，并提供了不同的方法来检查数据的一致性。这些检查函数有一个可选参数，允许执行某些过程。

例如：

```
std::vector<Point> checkIntersections(int process_mode = 0); 
```

此方法测试某些建筑物轮廓是否相交，并返回相交点。但是如果您传递一个非空参数，该方法将修改轮廓以删除交集。

我认为这很糟糕（在调用站点，不熟悉代码库的读者会假设名为 checkSomething 的方法只执行检查而不修改数据），我想改变它。我还想避免代码重复，因为检查和处理方法大多相似。

所以我在想这样的事情：

```
// a private worker
std::vector<Point> workerIntersections(int process_mode = 0)
{
    // it's the equivalent of the current checkIntersections, it may perform
    // a process depending on process_mode
}

// public interfaces for check and process
std::vector<Point> checkIntersections()  /* const */
{
    workerIntersections(0);
}

std::vector<Point> processIntersections(int process_mode /*I have different process modes*/)
{
    workerIntersections(process_mode);
} 
```

但这迫使我打破 const 的正确性，因为 workerIntersections 是一种非常量方法。

如何分离检查和处理，避免代码重复并保持 const 正确性？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T14:43:08.503

就像您已经指出的那样，您的建议将中断`const-correctness`。这是因为您的建议本质上包括用新的`interface`而不是`redesign`内部的代码来包装现有代码。这种方法有严重的局限性，因为它直接受到底层块的影响。

Instead I would suggest you to redesign the existing code and just break the `checkIntersections` in 2 public methods that you need. The `checkIntersections` will include the checking part and `processIntersections` will include the call to `checkIntersections` and the processing code based on the result of `checkIntersections`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:10:44.490

In this particular case, breaking const-correctness shouldn't matter. You (as the author of `workerIntersections()` **know** that it will only perform non-const operations if invoked from `processIntersections()`, a non-const function. Therefore, it's safe to implement `checkIntersections()` like this:

```
std::vector<Point> checkIntersections() const
{
    const_cast<TypeOfThis*>(this)->workerIntersections(0);
} 
```

Of course, you must make sure that `workerIntersections()` really only does const operations when invoked with `0`.

`const_cast` exists in the language for a reason, mainly interoperability with legacy code which ignores const correctness. That's exactly what you're doing, so as long as you do it safely, you're fine using `const_cast`.

# python - Python open+append 没有按预期工作

> ID：13821708
> 
> 赞同：3
> 
> 时间：2012-12-11T13:41:52.657
> 
> 标签：python, subprocess

根据文档，如果我使用 open("file","a") 并写入文件，新数据将被附加，但在下面的示例中，第二个命令只是覆盖文件。我不太明白为什么。

```
import subprocess

startupinfo = subprocess.STARTUPINFO()
subprocess.STARTF_USESHOWWINDOW = 1
startupinfo.dwFlags = subprocess.STARTF_USESHOWWINDOW

with open(r"c:\folder\test.txt","a") as log:
    Process = subprocess.Popen(['dir'],
                               stdout = log, stderr = log,
                               startupinfo = startupinfo,
                               shell=True)

with open(r"c:\folder\test.txt","a") as log:
    Process = subprocess.Popen(['dir'],
                               stdout = log, stderr = log,
                               startupinfo = startupinfo,
                               shell=True) 
```

我已经尝试过模式“a+b”，但我得到了相同的最终结果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T14:19:15.667

文件内的`subprocess`位置不增加。在第二个语句中`log.tell()`返回。您可以将 的位置增加到文件的末尾。第一个似乎很好。以下对我有用：`0``with``log``wait()``Process`

```
import subprocess
from os import linesep, stat 

with open(r"test.txt","a") as log:
    Process = subprocess.Popen(['dir'],
                               stdout = log, stderr = log,
                               shell=True)
    Process.wait()

with open(r"test.txt","a") as log:
# this prints 0
    print log.tell()
# get the length of the file log
    pos = stat(r"test.txt").st_size
    print pos
# go to the end of log
    log.seek(pos)
    Process = subprocess.Popen(['dir'],
                               stdout = log, stderr = log,
                               shell=True) 
```

# x++ - 如何遍历其 AOT 名称中包含特定字符的表并删除数据？

> ID：13821709
> 
> 赞同：1
> 
> 时间：2012-12-11T13:42:03.467
> 
> 标签：x++, axapta

我想遍历几个名称（aotName）以“HbcCka”开头的表，最后我想从表中删除所有数据。

现在我需要一个逻辑来清空表格。我怎样才能做到这一点？

更新：

```
static void tstDeleteForecastingData(Args _args)
{
    Dictionary  dictionary = new Dictionary();
    int         i;
    SysDictTable    dictTable;
    ;
    for (i=1 ; i<=dictionary.tableCnt() ; i++)
    {
        if (strScan(tableid2name(dictionary.tableCnt2Id(i)), "HbcCka", 1, strLen(dictionary.tableName(i))))
        {
            info(strfmt('%1;%2', dictionary.tableCnt2Id(i), tableid2name( dictionary.tableCnt2Id(i) )));
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:45:30.993

截断**所有**公司的表？

使用 System Administration\Periodic\Databases\SQL Administration，标记表，然后选择 Table actions\Truncate。

或者使用服务器主方法创建一个类：

```
ClassDeclaration tstDeleteForecastingData
{
}
static server void main(Args _args)
{
    Dictionary  dictionary = new Dictionary();
    int         i;
    for (i=1 ; i<=dictionary.tableCnt() ; i++)
    {
        if (strScan(tableid2name(dictionary.tableCnt2Id(i)), "HbcCka", 1, 99)))
        {
            info(strfmt('%1;%2', dictionary.tableCnt2Id(i), tableid2name( dictionary.tableCnt2Id(i) )));
            new SqlDataDictionaryPermission(methodstr(SqlDataDictionary, tableTruncate)).assert();
            new SqlDataDictionary().tableTruncate(dictionary.tableCnt2Id(i), false);
            CodeAccessPermission::revertAssert();
        }
    }

} 
```

如果**仅**在当前公司：

```
Common table = new DictTable(<tableId>).makeRecord();
table.skipDeleteMethod(true);
table.skipDeleteAction(true);
delete_from table; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T23:14:39.373

为了加快速度，您可以使用存储过程 sp_msforeachtable 循环数据库中的表（检查表名），然后编写删除语句来删除 dataAreaId 是您想要的记录。

像这样的东西可以用来删除 CEU 公司中以 HbcCka 开头的表：

```
exec sp_msforeachtable '
        if "?" like "HbcCka%"
        delete from ? where DataAreaId = "CEU"
        ' 
```

# c# - 在 C# 中打印 Windows 窗体

> ID：13821715
> 
> 赞同：1
> 
> 时间：2012-12-11T13:42:04.083
> 
> 标签：c#, forms, visual-studio-2008

我正在尝试使用以下代码打印表单：

```
private void btnPrint_Click(object sender, EventArgs e)
    {
        Graphics g1 = this.CreateGraphics();
        Image MyImage = new Bitmap(this.ClientRectangle.Width, this.ClientRectangle.Height, g1);
        Graphics g2 = Graphics.FromImage(MyImage);
        IntPtr dc1 = g1.GetHdc();
        IntPtr dc2 = g2.GetHdc();
        BitBlt(dc2, 0, 0, this.ClientRectangle.Width, this.ClientRectangle.Height, dc1, 0, 0, 13369376);
        g1.ReleaseHdc(dc1);
        g2.ReleaseHdc(dc2);
        MyImage.Save(@"c:\PrintPage.jpg", ImageFormat.Jpeg);
        FileStream fileStream = new FileStream(@"c:\PrintPage.jpg", FileMode.Open, FileAccess.Read);
        StartPrint(fileStream, "Image");
        fileStream.Close();
        if (System.IO.File.Exists(@"c:\PrintPage.jpg"))
        {
            System.IO.File.Delete(@"c:\PrintPage.jpg");
        }
    } 
```

但这给了我一个错误：MyImage.Save。

错误：

> ExternalException 未处理：GDI+ 中发生一般错误。

有人可以给我解决这个问题，并解释为什么我会收到这个错误吗？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:44:27.893

```
 private void btn_print_Click(object sender, EventArgs e)
    {
        CaptureScreen();
        printDocument1.Print();
        printDocument1.PrintPage += new PrintPageEventHandler(printDocument1_PrintPage);
    }

    Bitmap memoryImage;

    private void CaptureScreen()
    {
        Graphics myGraphics = this.CreateGraphics();
        Size s = this.Size;
        memoryImage = new Bitmap(s.Width, s.Height, myGraphics);
        Graphics memoryGraphics = Graphics.FromImage(memoryImage);
        memoryGraphics.CopyFromScreen(this.Location.X, this.Location.Y, 0, 0, s);
    }

    private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
    {

    }

    private void printDocument1_PrintPage_1(object sender, PrintPageEventArgs e)
    {
        e.Graphics.DrawImage(memoryImage, 0, 0);
    } 
```

通过将 print_document 从工具箱拖到表单中来添加它。执行此代码，它将正常工作。

[http://csharpprobsandsoln.blogspot.in/2013/04/print-windows-form-in-c.html](http://csharpprobsandsoln.blogspot.in/2013/04/print-windows-form-in-c.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-30T17:59:31.200

添加：

```
using System.Drawing.Printing; 
```

并在您的代码中添加：

```
PrintDocument printDocument1 = new PrintDocument(); 
```

更多信息[在这里](https://www.c-sharpcorner.com/UploadFile/srajlaxmi/printing-windows-form-in-C-Sharp-net/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-01-19T21:09:50.687

我有同样的任务，我创建了一个类（如可打印表单）。您所要做的就是从该类继承您的 Form 并调用 PrintForm(); 方法。这是课程：

```
public class CustomForm : Form
{
    protected Bitmap _prnImage;
    protected PrintPreviewDialog _prnpreviewdlg = new PrintPreviewDialog();
    protected PrintDocument _printdoc = new PrintDocument();

    public CustomForm()
    {
        _printdoc.PrintPage += new PrintPageEventHandler(printdoc_PrintPage);
    }

    protected void PrintForm()
    {
        Form form = this;
        _prnImage = new Bitmap(form.Width, form.Height);
        form.DrawToBitmap(_prnImage, new Rectangle(0, 0, form.Width, form.Height));
        _printdoc.DefaultPageSettings.Landscape = true;
        _printdoc.DefaultPageSettings.Margins = new Margins(10, 10, 10, 10);
        _prnpreviewdlg.Document = _printdoc;
        _prnpreviewdlg.ShowDialog();
    }
    protected void printdoc_PrintPage(object sender, PrintPageEventArgs e)
    {
        Rectangle pagearea = e.PageBounds;
        e.Graphics.DrawImage(_prnImage, e.MarginBounds);
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        if (_prnImage != null)
        {
            e.Graphics.DrawImage(_prnImage, 0, 0);
            base.OnPaint(e);
        }
    }
} 
```

我知道界面是一种更加学术和正确的方法，但在我的特殊情况下，该解决方案令我满意。

# php - facebook api空白响应，也不例外

> ID：13821716
> 
> 赞同：0
> 
> 时间：2012-12-11T13:42:32.360
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

```
 $facebook = new Facebook(array(
                'appId'  =>Yii::app()->params['FBappId'],
                'secret' =>Yii::app()->params['secret'] ,
                ));

                // Get User ID
                $user = $facebook->getUser();
              if ($user) {
              try {
                // Proceed knowing you have a logged in user who's authenticated.
                echo $accessToken=$facebook->getAccessToken();
                echo '<br/>';
                $user_profile = $facebook->api('/me');
                print_r($user_profile); echo "normal sdk"; exit;
              } catch (FacebookApiException $e) {
                  echo $e; exit;
                $user = null;
              }
            }
            echo "normal sdk end";exit; 
```

我尝试使用 php sdk 3.3.2 和用户通过 facebook 登录，它会打印令牌和用户信息，直到令牌过期。大约一小时后，我通过令牌调试器会话过期并给出异常一次然后空白响应。但在另一个选项卡中正在访问 facebook。我的问题是

1.token过期后，是否有inbuild方法可以再次获取有效token？

2.为什么是空白回复？每次它应该抛出异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:23:10.560

您可以使用[Facebook 的调试工具](https://developers.facebook.com/tools/debug)来检查您的访问令牌的有效性。

普通访问令牌在 2 小时后过期，扩展令牌有效期为 2 个月。

如果您想要扩展令牌，请执行以下操作：[How to extend access token validation since offline_access deprecation](https://stackoverflow.com/questions/8982025/how-to-extend-access-token-validity-since-offline-access-deprecation/9035036#9035036)

好吧，如果您对 $facebook->api('/me'); 感到空白 这仅仅意味着用户尚未授权该应用程序。试试这样的 -

```
$user_id = $facebook->getUser();
echo $uid;

if($user_id){
  try {
    $user_profile = $facebook->api('/me');

  } catch (FacebookApiException $e) {
    error_log($e);
    $user_id = null;
  }
}else{
    $login_url = $facebook->getLoginUrl();
    echo("<br>login url=".$login_url);
}; 
```

# c# - 在 .NET 中读取 Excel 和 Word 文件的最简单方法

> ID：13821719
> 
> 赞同：0
> 
> 时间：2012-12-11T13:42:47.860
> 
> 标签：c#, excel, ms-word, office-interop

这真的是为了自学。但是，是否有一种更简单的方法可以在不使用 COM/INTEROP DLL 的情况下从 Excel 表中读取？微软还有什么其他方式可以更容易地从一个单元格的单元格中读取值（以及逐字逐句`Word`）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:45:14.283

我知道这个问题询问是否有 Excel 和 Word 互操作 API 的替代品 - 但当我阅读它时，之所以问这个问题是因为 OP 想要一种更简单的方法来，例如，从 Excel 工作表中读取单元格或读取单词一个Word文档。

我只是想为 Word 添加，阅读文档中的每个单词可以用很少的几行来完成：

```
foreach (var word in myDocument.Words)
{
    Console.WriteLine(word);
} 
```

...我不相信这可以做得更简单，所以我想知道它是否真的是 OP 想要的替代 API，或者可能是几个 Word 互操作示例？（至少在使用 Word 互操作 API 的情况下）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:20:04.937

对于 Word 和 Excel，一个很好的第 3 方库是 Aspose [http://www.aspose.com/.net/total-component.aspx](http://www.aspose.com/.net/total-component.aspx) Aspose 提供了一个非常易于使用的 API，其中包含大量选项来操作 word 和 excel 文档。文档也很好。也就是说，许可费可能令人望而却步。

如果你想要 Word 的开源替代品，DocX [http://docx.codeplex.com/](http://docx.codeplex.com/) DocX 在 OpenXML 上提供了一个不错的 API。

我们在一个非官方的分支中对 DocX 进行了一些重要的扩展，您可能会发现它们很有用：[https ://github.com/organizations/Word-DocX](https://github.com/organizations/Word-DocX)

扩展列表包括对单级和多级列表的支持、对阅读字体格式、节/分节符等的支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T16:15:58.587

例如，如果您想使用 ODBC 并读取 WorkSheet，请遵循这个简单的示例，这只是从 Excel 读取的许多不同方法之一

```
 OleDbCommand myCommand = new OleDbCommand("Select * from [Sheet1$];");
    OleDbConnection myConnection = new OleDbConnection(connectionString);
    myConnection.Open();
    myCommand.Connection = myConnection;
    OleDbDataReader myReader = myCommand.ExecuteReader();

    while (myReader.Read())
    {
    // it can read upto 5 columns means A to E. In your case if the requirement is different then change the loop limits a/c to it.
      //Change the Response.Write blow to Console.WriteLine() if you are wanting to test this in a Console application vs a web app.
      for (int i = 0; i < 5; i++)
      {
        Response.Write(myReaderIdea.ToString() + " ");
      }
      Response.Write("<br>");
    }
    myConnection.Close();

    //make sure to Dispose of the Reader object as well 
   ((IDisposable)myReaderIdea).Dispose(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T13:54:14.260

如果您对新格式（xlmx，docx）感兴趣，我认为您可以使用[OpenXML](http://www.microsoft.com/en-us/download/details.aspx?id=5124)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T14:42:41.650

有一个用于 ODBC 数据源的 excel 驱动程序。可通过控制面板访问。如果您在那里进行配置，或者使用带有 excel 驱动程序的连接字符串，您可以通过 ADO API 访问它。

# opencv - 为什么使用 haar 分类器进行对象检测会导致如此多的延迟？

> ID：13821720
> 
> 赞同：0
> 
> 时间：2012-12-11T13:42:50.737
> 
> 标签：opencv, opencvdotnet

我有大约 500 个正样本和 900 个负样本用于 haar 分类。

突然间，对象标记实用程序开始需要大约 20 秒来检测对象。早些时候，它过去只需要 100-200 毫秒即可检测到。如果我使用早期构造的 casacde xml，它们会给出完美的结果。只有新的会导致视频和网络摄像头出现很多延迟。

我应该怎么办 ？？？？请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:46:36.640

可以通过在运行对象标记实用程序时增加比例值来减少延迟，即 `objectDetect --cascade="cascade.xml" --scale=3.3 %1`

如果增加 scale 的值，检测时间会减少....

# php - 识别日期格式

> ID：13821729
> 
> 赞同：-2
> 
> 时间：2012-12-11T13:43:07.403
> 
> 标签：php, date, datetime, datetime-format

这是什么日期格式？

```
2012-06-08dT00:00:00Z 
```

以及如何将 php 中的时间戳转换为这种日期格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:33:48.150

```
$dt = new DateTime('2012-06-08T00:00:00Z'); //with no 'd'
$timestamp = $dt->format('U'); 
```

如果你必须有'd'，那么：

```
$dt = DateTime::createFromFormat('Y-m-d??H:i:s?', '2012-06-08dT00:00:00Z');
$timestamp = $dt->format('U'); 
```

ETA：时间戳->您的格式

```
$dt = new DateTime('@1339124400');  //the @ indicates the following number is a timestamp
$isoformat= $dt->format('Y-m-d\TH:i:sZ'); //leave out the 'd' and escape the 'T' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:33:12.647

你可以从这里开始：

```
$date = "2012-06-08dT01:02:03Z";

// parse the date correctly
$parsed_date = date_parse_from_format('Y-m-d  H:i:s ', $date);
print_r($parsed_date);

// Make time from parsed date
$old_date = mktime($parsed_date['hour'], $parsed_date['minute'], $parsed_date['second'], $parsed_date['month'], $parsed_date['day'], $parsed_date['year']);

$now_date = time();

// a silly way to print that parsed date into the original way as before
echo date("Y-m-d", $old_date) . 'dT' . date("H:i:s", $old_date) . 'Z';
echo "\n";

// a silly way to print current date/time in that format
echo date("Y-m-d", $now_date) . 'dT' . date("H:i:s", $now_date) . 'Z'; 
```

# facebook - 在登录甚至加载 SDK 之前获取 Facebook 语言环境

> ID：13821731
> 
> 赞同：0
> 
> 时间：2012-12-11T13:43:27.080
> 
> 标签：facebook, facebook-javascript-sdk, locale, facebook-canvas

我正在创建一个多语言 Facebook Canvas 游戏。我希望它使用用户的 Facebook 语言环境作为自己的语言环境。

我可以轻松获取已登录并已验证我的应用程序的用户的语言环境。然而：

*   在新用户验证我的应用程序之前，我需要语言环境，因为我想在给出此选项之前显示一些文本。
*   事实上，我什至在加载 Javascript SDK 之前就需要它。这是因为在加载时必须提供语言环境（**例如**[https://connect.facebook.net/en_US/all.js](https://connect.facebook.net/)）

 **我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:47:05.953

> 事实上，我什至在加载 Javascript SDK 之前就需要它。

解析signed_request，当它被加载到画布中时传递给你的应用程序，服务器端：[https ://developers.facebook.com/docs/reference/login/signed-request/](https://developers.facebook.com/docs/reference/login/signed-request/)**

# .net - 从 VisualStudio2010 显示水晶报告时出错

> ID：13821733
> 
> 赞同：0
> 
> 时间：2012-12-11T13:43:46.723
> 
> 标签：.net, visual-studio-2010, postgresql, c#-4.0, crystal-reports-2010

亲爱的同事们，

我在显示由 VisualStudio2010 生成的报告时遇到问题。我已经准备好所有报告，它们工作正常，但是当我尝试从另一台计算机生成报告时，我收到错误：**“字符串在此处除外”** 我非常失望，因为一些 copupters 正确显示报告但不是全部，我不知道为什么： （。无论如何，我已经检查了导致此错误的公式。它看起来像：

```
"if ({parametry_extra.prx_konta_wirtualne}) <> true then {faktura_vat.nkn_nazwa_banku}&" nr "&{faktura_vat.nkn_nr_konta} else {faktura_vat.nkn_nazwa_banku}&" nr "&{faktura_vat.konto1}&" "&{faktura_vat.konto2}" 
```

上面的公式是正确的，但为什么它在不同的计算机上不起作用？我想有些计算机试图将布尔值作为字符串（“真”/“假”）、布尔值（真/假）或整数（1/0）？

你知道如何解决这个问题吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T08:56:16.410

我找到了解决方案。问题出在数据源上。在面板“DataTypeOptions”的“高级选项”中，我禁用了值**“Bools as Char”**，现在它可以正常工作了。

# email - 打开 Outlook 与

> ID：13821738
> 
> 赞同：0
> 
> 时间：2012-12-11T13:44:02.357
> 
> 标签：email, jsf, hyperlink, outlook

对应的 JSF 代码是什么

```
<a href="mailto:me@domain.com?subject=Sample subject&body=test&cc=cc@domain.com">Send mail</a> 
```

哪个会向用户打开 Outlook 邮箱并预填邮件模板？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T14:35:45.503

假设您使用的是 JSF 1.2 或更新版本，您可以在 JSF 页面中使用完全相同的 HTML 代码。

```
<a href="mailto:me@domain.com?subject=Sample subject&body=test&cc=cc@domain.com">Send mail</a> 
```

如果您打算根据 JSF 表单中的值预填充它，那么您需要将重定向发送到该 URL。

```
public void submit() throws IOException {
    // ...

    ExternalContext externalContext = FacesContext.getCurrentInstance().getExternalContext();
    externalContext.redirect(String.format(
        "mailto:me@domain.com?subject=%s&body=%s&cc=cc@domain.com",
            URLEncoder.encode(subject, "UTF-8"),
            URLEncoder.encode(body, "UTF-8")));
} 
```

请注意，这并不一定要在 Outlook 中准备邮件。它只是在客户端自己的默认邮件客户端中准备邮件，这可能不是 Outlook 本身。例如，它可能是 Thunderbird 甚至是 Gmail。另请注意，您*无法*控制该部分。

# jquery - 如何为 jQuery UI 自动完成编写 JSP 文件？

> ID：13821741
> 
> 赞同：0
> 
> 时间：2012-12-11T13:44:02.387
> 
> 标签：jquery, jquery-ui, jquery-ui-autocomplete

我无法将 jquery ui 自动完成与 ajax 请求一起使用。在 jquery ui 页面的例子中，我们有这个：

```
$( "#birds" ).autocomplete({
        source: "search.php",
        minLength: 2,
        select: function( event, ui ) {
            log( ui.item ?
                "Selected: " + ui.item.value + " aka " + ui.item.id :
                "Nothing selected, input was " + this.value );
        }
    }); 
```

所以我正在尝试制作一个 search.jsp，但我不知道如何使用 JSON 或如何将其返回到客户端。假设我做了一个简单的循环来在数组中写入一些值：

```
String[] arr;
arr = new String[10];

for(int i=0; i<arr.length; arr++){
  arr[i]=i*2+"";
} 
```

如何使用 JSON 将此值传递给客户端？在进行此循环之前，我是否需要获得“任期”？我真的迷路了。谢谢。

# javascript - jQuery Javascript 菜单导航添加删除类

> ID：13821747
> 
> 赞同：0
> 
> 时间：2012-12-11T13:45:01.027
> 
> 标签：javascript, jquery, menu, navigation

当一个站点`www.example.com`加载并加载时`index.html`，导航不会预先选择要显示的主页。我有一个填充菜单的功能和另一个获取当前页面以添加循环的类的功能，我知道我无法找到该站点何时是将类更改为当前`www.example.com`的页面。`index.html`

我尝试了不同的 if 语句并尝试在`li`ie中放置一个默认类，`<li><a href='index.html' class='current'>Home</a></li>`但它会显示这个页面和我访问的任何其他页面。

```
/*Navigation menu*/
function navMenu(){
document.writeln("<ul id='menu' class='menu'>");
document.writeln("<li><a href='index.html'>Home</a></li>"); 
document.writeln("<li><a href='myself.html'>About</a></li>");
document.writeln("<li><a href='portfolio.html'>Work</a></li>");
document.writeln("<li><a href='news.html'>News</a></li>");
document.writeln("<li><a href='contact.html'>Contact</a></li></ul>");   
}

function setActive() {
/*current page function*/
 $('#menu a').each(function(index) {
    if(this.href.trim() == window.location)
        $(this).addClass("current");
});} 
```

这很好用，但是就像我提到的那样，我不明白如何集成添加或查找在开始时是否有默认类，当 URL 为时，`www.example.com`我会将当前类添加到`index.html`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:50:44.243

如果您`index.html`在调用时加载，`/,`只需将主页的 href 更改为`/`而不是`index.html`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T13:54:01.810

通过 a 标签上的 href 外观，您将要检查`pathname`

```
function setActive() {
/*current page function*/
 $('#menu a').each(function(index) {
    if(this.href.trim() == window.location.pathname)
        $(this).addClass("current");
});} 
```

# jsf-2 - 从 bean 触发/激活 RowEditor 以启用 primefaces 内嵌编辑 p:dataTable

> ID：13821750
> 
> 赞同：9
> 
> 时间：2012-12-11T13:45:09.920
> 
> 标签：jsf-2, primefaces

我有一个启用`p:dataTable`了[InCell 编辑](http://www.primefaces.org/showcase/ui/datatableEditing.jsf)的 primefaces，并且想要为新添加的行触发/激活 RowEditor。

**XHTML 的摘录**

```
<p:commandButton id="btnAddEntry" value="Add new row" actionListener="#{myBean.addNewCar}" ... update="carTable growl" process="@this carTable ..."/>

<p:dataTable id="carTable" var="car" value="#{myBean.cars}" ... editable="true">  
        <p:column ...>  
            <p:cellEditor>
                ...
            </p:cellEditor>  
        </p:column>
    ...
        <p:column ...>  
                <p:rowEditor />  
        </p:column>
    ...         
</p:dataTable> 
```

这是我到目前为止的**bean 方法**：

```
public void addNewCar() {

    Car newCar = new Car();
    cars.add(newCar);

    FacesContext facesContext = FacesContext.getCurrentInstance();
    UIComponent uiTable = ComponentUtils.findComponent(facesContext.getViewRoot(), "carTable");
    DataTable table = (DataTable) uiTable;

    final AjaxBehavior behavior = new AjaxBehavior();    
    RowEditEvent rowEditEvent = new RowEditEvent(uiTable, behavior, table.getRowData());
    rowEditEvent.setPhaseId(PhaseId.UPDATE_MODEL_VALUES);
    table.broadcast(rowEditEvent);
} 
```

我不知道

1.  如果这是正确的方法
2.  `RowEditEvent(UIComponent component, Behavior behavior, Object object)`如果是，将哪个对象作为第三个参数传递给构造函数

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-11T14:59:36.327

如果 facelet 中只有一个数据表，请尝试使用此

```
oncomplete="jQuery('.ui-datatable-data tr').last().find('span.ui-icon-pencil').each(function(){jQuery(this).click()}); 
```

将此添加到命令按钮。这应该有效。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-16T10:53:16.453

我在 create 方法中使用了 RequestContext 类的 execute(..) 方法。这允许我首先计算行的索引以进入编辑模式并将其动态包含在 javascript 中：

```
RequestContext.getCurrentInstance().execute("jQuery('span.ui-icon-pencil').eq(" + rowToEditIndex + ").each(function(){jQuery(this).click()});"); 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-15T09:08:05.623

您可以在 dataTable 中添加一个唯一的 styleClass，并在 commandButton 中添加一个 javascript 函数：

所以添加到表中：

```
styleClass="myTable" 
```

到按钮：

```
oncomplete="$('.myTable tbody.ui-datatable-data tr:last-child td span.ui-row-editor span.ui-icon-pencil').click()" 
```

您的代码将如下所示：

```
<p:commandButton id="btnAddEntry" value="Add new row" actionListener="#{myBean.addNewCar}" ... update="carTable growl" process="@this carTable ..." oncomplete="$('.myTable tbody.ui-datatable-data tr:last-child td span.ui-row-editor span.ui-icon-pencil').click()"/>

<p:dataTable styleClass="myTable" id="carTable" var="car" value="#{myBean.cars}" ... editable="true">  
        <p:column ...>  
            <p:cellEditor>
                ...
            </p:cellEditor>  
        </p:column>
    ...
        <p:column ...>  
                <p:rowEditor />  
        </p:column>
    ...         
</p:dataTable> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-20T19:31:48.967

该解决方案旨在解决以下原始答案的一些缺点：

```
oncomplete="jQuery('.ui-datatable-data tr').last().find('span.ui-icon-pencil').each(function(){jQuery(this).click()});" 
```

上面的语句检索所有“tr”元素，它们是“.ui-datatable-data”类元素的后代（在任何级别）。潜在的问题是：

1.  正如@Gnappuraz 所说，如果文档中有多个 p:datatable，则此语句将选择最后一个表。
2.  此外，我遇到了一个问题，即使使用一个数据表，带有 ap:selectOneRadio 组件的列也会呈现一个 html 表（包含“tr”元素）。在这种情况下，选择器选择 p:selectOneRadio 的表的最后一个“tr”，而不是 p:datatable。
3.  [没问题，但是由于 jQuery 的隐式迭代](http://api.jquery.com/each/ "隐式迭代")，可以缩短语句以排除 each() 。

我最终得到的是：

```
oncomplete="jQuery('#tableForm\\:table .ui-datatable-data > tr').last().find('span.ui-icon-pencil').click();" 
```

这个选择器说 - 获取最后一个“tr”元素，它是类“.ui-datatable-data”的元素的**直接**子元素，它也是表单“tableForm”中id为“table”的元素的后代。换句话说，您现在可以拥有多个 p:datatables，并且任何包含呈现 html 表的任何组件。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-05T03:32:43.583

试试这个 ：

```
jQuery('#FormID\\:DataTableID\\:#{datatable.size()}\\:rowEditorID').find('span.ui-icon-pencil').each(function(){jQuery(this).click()}); 
```

运行良好，无论同一页面中有多少数据表。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-03-05T11:53:01.433

如果您有多个 DataTable，每个都有一个 ID，请尝试使用以下解决方案之一：

```
Oncomplete="jQuery('#FrmID:TabViewI:mydataTableID'.replace(/:/g,'\\:')).find('span.ui-icon-pencil').each(function(){jQuery(this).click()});" 
```

或者：

```
oncomplete="jQuery('#FrmID\\:TabViewID\\:mydataTableID').find('span.ui-icon-pencil').each(function(){jQuery(this).click()});" 
```

这应该可以完美地工作。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-08T10:15:52.427

在完整的过程中执行一个 JQuery 脚本：

```
oncomplete="editNewRow()" 
```

```
 <script type="text/javascript">
            $(document).on("keydown", ".ui-cell-editor-input input", function(event) {
                if (event.keyCode == 13) {
                    $(this).closest("tr").find(".td-edition .ui-row-editor .ui-row-editor-check .ui-icon-check").click();
                    return false;
                }
            });

            function editNewRow() {
                $("#pim\\:invoiceRuleCretariaTable tbody:first tr:first .td-edition .ui-row-editor .ui-icon-pencil").click();
            }
        </script>
```

第一个函数通过按“Enter”键提交添加操作

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-08T10:23:05.723

在完整的过程中执行一个 JQuery 脚本：

```
oncomplete="editNewRow()" 
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script type="text/javascript">
            $(document).on("keydown", ".ui-cell-editor-input input", function(event) {
                if (event.keyCode == 13) {
                    $(this).closest("tr").find(".td-edition .ui-row-editor .ui-row-editor-check .ui-icon-check").click();
                    return false;
                }
            });

            function editNewRow() {
                $("#panel\\:carTable tbody:first tr:last .td-edition .ui-row-editor .ui-icon-pencil").click();
            }
        </script>
```

第一个函数通过按“Enter”键提交添加操作

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2017-05-25T20:42:28.600

要解决这个问题最好使用 styleClass，因为要解决这个问题，必须使用 javascript，您需要检查浏览器中的 html 标签，因为它们似乎会随着 primefaces 的版本而变化。对于 vesion 6.1，我把它放在我的 bean 上：

```
RequestContext requestContext = RequestContext.getCurrentInstance();
requestContext.execute("$('.styleEventosPlanPrestacion tbody.ui-datatable-data tr:first-child td div.ui-row-editor a.ui-row-editor-pencil').click()"); 
```

在我的 .xhtml 中我放了这个：

```
<p:dataTable ... styleClass="styleEventosPlanPrestacion"> 
```

# javascript - 将查询字符串添加到 asp.net 中的脚本标记链接以中断缓存

> ID：13821751
> 
> 赞同：0
> 
> 时间：2012-12-11T13:45:13.613
> 
> 标签：javascript, asp.net

希望有人可以帮助我。我管理着一个 ASP.Net 网站，并且经常更新脚本文件和 css 文件。我将当前时间添加到单个字符串中作为查询字符串参数（例如：profileImage.jpg?123021），这使浏览器无需从缓存中获取文件即可查找文件。

如何对服务器端的所有脚本标签和 css 链接执行相同的操作，以便加载最新版本的文件。

任何帮助表示赞赏。

阿米拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:40:55.647

如果您的 asp.net 网站使用母版页，那么在母版页文件中进行这些更改应该很容易。查看扩展名为 .master 的文件。如果您不确定如何进行特定编辑，请`<head>`在新问题中发布母版页标记中的区域。

MSDN 母版页： http: [//msdn.microsoft.com/en-us/library/wtxbf3hh (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/wtxbf3hh(v=vs.100).aspx)

如果您的站点不使用母版页，那么您需要创建一些影响`<head>`页面部分的服务器端逻辑。以下是有关从服务器端注入脚本和样式的相关 QA 的一些链接。

[ASP.NET：如何（以编程方式）将包含指向 .js 的链接的 <script> 标记附加到 <head>？](https://stackoverflow.com/questions/6753197/asp-net-how-to-programmatically-attach-a-script-tag-containing-a-link-to?rq=1)

[如何在 </body> 标记 ASP.NET 之前添加脚本代码](https://stackoverflow.com/questions/1726962/how-to-add-script-codes-before-the-body-tag-asp-net?rq=1)

# jquery - 使用 Jquery 如何让 div 元素在页面加载时垂直和水平居中？

> ID：13821762
> 
> 赞同：3
> 
> 时间：2012-12-11T13:45:17.127
> 
> 标签：jquery, positioning

这是[小提琴](http://jsfiddle.net/zQ97A/3/)。

**HTML：**

```
<div id="greeter" class="welcomer">
    <h1>This should be centered</h1>
</div> 
```

**jQuery：**

```
$(document).ready(function(){

$(window).resize(function(){

    $('.welcomer').css({
        position:'absolute',
        left: ($(window).width() - $('.welcomer').outerWidth())/2,
        top: ($(window).height() - $('.welcomer').outerHeight())/2
    });

});

// To initially run the function:
$(window).resize();

});​ 
```

​</p>

它的工作方式似乎存在错误。有时它会居中，有时它只会垂直或水平居中。我是 javascript 和 jquery 的新手，我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:02:11.017

好的，看这里：http: [//jsfiddle.net/zQ97A/13/](http://jsfiddle.net/zQ97A/13/)

基本上你需要在你的容器上有宽度，你还需要以下代码：

```
"top": ((($(window).height() - $('.welcomer').outerHeight()) / 2) + $(window).scrollTop() + "px"),
"left": ((($(window).width() - $('.welcomer').outerWidth()) / 2) + $(window).scrollLeft() + "px") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:28:36.747

根据我的口味，最好在 css 中定义一个类，然后使用 jquery 将该类设置为 div 到您的 dom 中。

```
#custom.css
.center {
  position: absolute;
  left: 50%;
  top: 50%;
  margin-top: -(your_div_height/2)px;
  margin-left: -(your_div_weight/2)px;
}

#custom.js
$(#greeter).addClass("center") 
```

我觉得这更快，因为**css文件在****js**文件之前加载

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T14:38:29.967

如果您为*.welcomer* DIV 定义宽度，您的代码将完美运行！

# hadoop - 如何通过流加速探索 HDFS 中的数据？

> ID：13821770
> 
> 赞同：0
> 
> 时间：2012-12-11T13:46:39.833
> 
> 标签：hadoop, streaming, hdfs

我有一些要从 hdfs 中提取的字段。

目前我正在做`hadoop fs -text /path/to/20120903/*-* 2>/dev/null | awk -F '\t' '{ print $16 }' | sort | uniq > users-0903`.

我怎样才能加快速度（需要为 0904、0905 做这件事……这需要一些时间）？

我有一些 Hadoop 流式尝试，但它似乎不喜欢我给它的大多数脚本，所以我放弃了。您将如何使用流式传输来尝试此任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T20:03:38.297

使用 Hadoop Streaming 的一种快速方法是：

`hadoop jar hadoop-streaming.jar -input /path/to/2012093 -output /path/to/output-0903 -mapper "awk -F '\t' '{print \$16}'" -reducer 'uniq'`

或者写得更好：

```
hadoop jar hadoop-streaming.jar \
  -input /path/to/2012093 \
  -output /path/to/output-0903 \
  -mapper "awk -F '\t' '{print \$16}'"\
  -reducer 'uniq' 
```

映射器将在选项卡之间发出第 16 个单词作为没有值的键。然后它将在 shuffle/sort 期间进行排序，并且调用`uniq`将获取每个键/值对，这些键/值对只是键的重复。这些将减少到一份`uniq`。

# wordpress - WordPress自定义帖子类型分页问题

> ID：13821772
> 
> 赞同：2
> 
> 时间：2012-12-11T13:47:14.787
> 
> 标签：wordpress, pagination

我和我的朋友都完全不知道这里发生了什么。任务是从一个帖子到下一个帖子有标准的分页链接。我们可以看到从 page/2/、page/3/ 等开始的页面，但内容没有改变。

这是我们在自定义模板中得到的内容。

```
 <?php
 /**
 * The Template for displaying all single posts.
 *
 * Template Name: Portfolio
 *
 * @package WordPress
 * @subpackage Boilerplate
 * @since Boilerplate 1.0
 */

 get_header();

 // Enable Pagination
 $paged = (get_query_var('paged')) ? get_query_var('paged') : 1;

 $args = array(
 'post_type' => array(
 'portfolio'
 ),
 'orderby' => 'date',
 'posts_per_page' => 1,
 'paged'=>$paged
 );

 $the_query = new WP_Query( $args );

 while ( $the_query->have_posts() ) : $the_query->the_post(); 

 ?>

 <article id="item<?php the_ID(); ?>" <?php post_class('post portfolio'); ?>>
   <h2><?php the_title(); ?></h2>
   <div>
     <?php the_content(); ?>
   </div>
 </article>

 <?php endwhile; ?>
     <?php next_posts_link('« Older Entries') ?>
     <?php previous_posts_link('Newer Entries »') ?>
 <?php wp_reset_postdata(); ?>

 <?php get_footer(); ?> 
```

在functions.php的底部有一些自定义的帖子类型脚本......

```
// Custom Post Type

function foggin_Portfolio() {
$labels = array(
    'name'               => _x( 'Portfolio', 'post type general name' ),
    'singular_name'      => _x( 'Portfolio', 'post type singular name' ),
    'add_new'            => _x( 'Add New', 'book' ),
    'add_new_item'       => __( 'Add New Item' ),
    'edit_item'          => __( 'Edit item' ),
    'new_item'           => __( 'New Item' ),
    'all_items'          => __( 'All Items' ),
    'view_item'          => __( 'View Item' ),
    'search_items'       => __( 'Search items' ),
    'not_found'          => __( 'No item' ),
    'not_found_in_trash' => __( 'No items found in the Trash' ),
    'parent_item_colon'  => '',
    'menu_name'          => 'Portfolio'
);
$args = array(
    'labels'        => $labels,
    'description'   => 'Holds portfolio items and portfolio specific data',
    'public'        => true,
    'menu_position' => 5,
    'rewrite'       => array('slug'=>'','with_front'=>false),
    'supports'      => array( 'title', 'editor', 'thumbnail', 'excerpt', 'custom-fields', 'taxonomies'),
    'taxonomies'    => array('post_tag'),
    'has_archive'   => true,
);
register_post_type( 'portfolio', $args );
}

add_action( 'init', 'foggin_Portfolio' );

function portfolio_messages( $messages ) {
    global $post, $post_ID;
    $messages['portfolio'] = array(
        0 => '',
        1 => sprintf( __('Portfolio item updated. <a href="%s">View item</a>'), esc_url( get_permalink($post_ID) ) ),
        2 => __('Custom field updated.'),
        3 => __('Custom field deleted.'),
        4 => __('Product updated.'),
        5 => isset($_GET['revision']) ? sprintf( __('Portfolio item restored to revision from %s'), wp_post_revision_title( (int) $_GET['revision'], false ) ) : false,
        6 => sprintf( __('Portfolio item published. <a href="%s">View item</a>'), esc_url( get_permalink($post_ID) ) ),
        7 => __('Portfolio item saved.'),
        8 => sprintf( __('Portfolio item submitted. <a target="_blank" href="%s">Preview item</a>'), esc_url( add_query_arg( 'preview', 'true', get_permalink($post_ID) ) ) ),
        9 => sprintf( __('Portfolio item scheduled for: <strong>%1$s</strong>. <a target="_blank" href="%2$s">Preview item</a>'), date_i18n( __( 'M j, Y @ G:i' ), strtotime( $post->post_date ) ), esc_url( get_permalink($post_ID) ) ),
        10 => sprintf( __('Portfolio item draft updated. <a target="_blank" href="%s">Preview item</a>'), esc_url( add_query_arg( 'preview', 'true', get_permalink($post_ID) ) ) ),
        );
        return $messages;
    }

    add_filter( 'post_updated_messages', 'portfolio_messages' );

    function portfolio_taxonomies() {
        $labels = array(
        'name'              => _x( 'Categories', 'taxonomy general name' ),
        'singular_name'     => _x( 'Category', 'taxonomy singular name' ),
        'search_items'      => __( 'Search Categories' ),
        'all_items'         => __( 'All Categories' ),
        'parent_item'       => __( 'Parent Category' ),
        'parent_item_colon' => __( 'Parent Category:' ),
        'edit_item'         => __( 'Edit Category' ),
        'update_item'       => __( 'Update Category' ),
        'add_new_item'      => __( 'Add New Category' ),
        'new_item_name'     => __( 'New Category' ),
        'menu_name'         => __( 'Categories' ),
    );
    $args = array(
        'labels' => $labels,
        'hierarchical' => true,
    );
    register_taxonomy( 'portfolio_category', 'portfolio', $args );
}
add_action( 'init', 'portfolio_taxonomies', 0 );

?> 
```

想法，想法，建议会非常有帮助我认为公平地说我们都对此感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T23:37:10.587

这可能听起来很傻，但是将您的永久链接重置为默认值，然后恢复为您想要的格式。将帖子类型添加到functions.php后需要重写.htaccess文件

您将**rewrite**选项设置为*false*的操作也可能导致问题。如果 WP 不清楚重写 yourdomain.com/page/2/ 那么重写为 true 使其成为 yourdomain.com/portfolio/page/2/

其他一切似乎都符合您的查询。

# linq - 带有 Lambda 表达式的 LINQ

> ID：13821774
> 
> 赞同：0
> 
> 时间：2012-12-11T13:47:26.563
> 
> 标签：linq, lambda

如何`LINQ`使用以下查询转换`LAMBDA Expressions`？

```
 var select = from si in db.San_Imovel
                 join sic in db.San_Imovel_caracteristica
                 on si.Imovel_Id equals Convert.ToInt64(sic.Imovel_Id)
                 join sf in db.San_Filial
                 on si.Credenciada_Id equals sf.Credenciada_Id
                 where si.Credenciada_Id == credenciada_Id
                 && (si.GrupoImovel_Id.ToString().Contains("1") || si.GrupoImovel_Id.ToString().Contains("2"))
                 && (si.Status_Id.ToString().Contains("1") || si.Status_Id.ToString().Contains("12"))
                 && si.NomeArquivo != null
                 && (si.Imovel_Id.ToString().Contains(""))
                 select new
                 {
                     si.Celula_Id,
                     si.Credenciada_Id,
                     si.Imovel_Id,
                     si.NomeArquivo,
                     si.TipoDsc1,
                     si.BairroDsc1,
                     si.AreaRealPrivativa,
                     sic.VagasGaragem,
                     si.ValorImovel,
                     si.ValorCondominio,
                     si.ValorIPTU,
                     si.Lat2,
                     si.Lon2,
                     sf.ApelidoCredenciada,
                     sf.ddd,
                     sf.TelefoneVenda,
                     sf.TelefoneLocacao,
                     sf.Email,
                     si.Bairro1,
                     si.NomeCidade,
                     si.Transacao_ID
                 }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:01:07.533

```
var query = 
   db.San_Imovel
     .Join(db.San_Imovel_caracteristica,
           si => Imovel_Id,
           sic => Convert.ToInt64(sic.Imovel_Id),
           (si, sic) => new { si, sic })
     .Join(db.San_Filial,
           x => x.si.Credenciada_Id,
           sf => sf.Credenciada_Id,
           (x, sf) => new { x.si, x.sic, sf })
     .Where(x => x.si.Credenciada_Id == credenciada_Id &&
                 (x.si.GrupoImovel_Id.ToString().Contains("1") || 
                  x.si.GrupoImovel_Id.ToString().Contains("2")) &&
                 (x.si.Status_Id.ToString().Contains("1") || 
                  x.si.Status_Id.ToString().Contains("12")) &&
                  x.si.NomeArquivo != null &&
                 (x.si.Imovel_Id.ToString().Contains(""))
     .Select(x => new {
                     x.si.Celula_Id,
                     x.si.Credenciada_Id,
                     x.si.Imovel_Id,
                     x.si.NomeArquivo,
                     x.si.TipoDsc1,
                     x.si.BairroDsc1,
                     x.si.AreaRealPrivativa,
                     x.sic.VagasGaragem,
                     x.si.ValorImovel,
                     x.si.ValorCondominio,
                     x.si.ValorIPTU,
                     x.si.Lat2,
                     x.si.Lon2,
                     x.sf.ApelidoCredenciada,
                     x.sf.ddd,
                     x.sf.TelefoneVenda,
                     x.sf.TelefoneLocacao,
                     x.sf.Email,
                     x.si.Bairro1,
                     x.si.NomeCidade,
                     x.si.Transacao_ID
                 }); 
```

*顺便说一句*，您不需要将整个查询转换为方法语法。您只能转换过滤`where`部分。

# mysql - MySQL - 计算每个 IP 的唯一视图，每天最多 1 次

> ID：13821775
> 
> 赞同：1
> 
> 时间：2012-12-11T13:47:26.207
> 
> 标签：mysql

我试图获得每个 IP 的唯一视图，每天最多计算 1 次，使用 MySQL 查询返回。

**该表如下所示：**

```
product_id          time          ip
INT                 TIMESTAMP     VARCHAR 
```

查询应随时返回唯一视图，但应过滤产品 ID，以便每个产品都有自己的唯一视图字段计数。表中的 IP 地址每天最多计算一次。我会给你一些细节，在下面的查询中应该和不应该计算什么：

```
product_id          DATE(time)          ip            should_be_counted
11                  2012-12-14          1.1.1.1       YES
11                  2012-12-14          1.1.1.2       YES
11                  2012-12-14          1.1.1.1       NO
11                  2012-12-13          1.1.1.1       YES
11                  2012-12-13          1.1.1.1       NO

Should be returned:
product_id          unique_views
11                  3 
```

**这就是我要的：**

```
product_id          unique_views
11                  103
8                   53
2                   3
1                   1 
```

这意味着查询应该使用 ORDER BY unique_views DESC。

感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T13:56:19.237

```
SELECT Product_ID, SUM(unique_view) unique_views
FROM
(
  SELECT Product_ID, COUNT(DISTINCT IP)  unique_view
  FROM   tableName
  GROUP BY Product_ID, DATE(time)
) x
GROUP BY Product_ID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/fe72b/9)

# java - ExpandableListView.getPackedPositionGroup 总是返回 0

> ID：13821776
> 
> 赞同：0
> 
> 时间：2012-12-11T13:47:09.240
> 
> 标签：java, android, expandablelistview

我有一个带有上下文菜单的 ExpandableListView。不管我有多少组项目，它总是返回 0。

我的代码：

```
@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);

    ExpandableListView.ExpandableListContextMenuInfo info = (ExpandableListView.ExpandableListContextMenuInfo) menuInfo;

    int group = ExpandableListView.getPackedPositionGroup((int) info.packedPosition);
    int type = ExpandableListView.getPackedPositionType((int) info.packedPosition);
    int child = ExpandableListView.getPackedPositionChild((int) info.packedPosition);

    Log.d("Value ConTEXT: " + String.valueOf(group), String.valueOf(child) + " GROUP COUNT " + getExpandableListAdapter().getGroupCount());
    menu.setHeaderTitle(((Person) dAdapter.getGroup(group)).getName());
    // menu.add(0, 0, 0, "Geschiedenis verwijderen");
    menu.add(1, 1, 1, "Verwijderen uit lijst");
} 
```

还有我的自定义基本列表适配器：

```
public class DrinkActionAdapter extends BaseExpandableListAdapter {

    Activity context;
    ArrayList<Person> personsGroup;
    ArrayList<Person> personsChild;

    public DrinkActionAdapter(Activity context, ArrayList<Person> personsGroup,
            ArrayList<Person> personsChild) {
        this.context = context;
        this.personsGroup = personsGroup;
        this.personsChild = personsChild;
    }

    public void addPerson(Person p) {
        personsGroup.add(p);
        personsChild.add(p);
        for (Person pp : personsGroup) {
            Log.d(pp.getName(), pp.getName());
        }
    }

    public Object getChild(int groupPosition, int childPosition) {
        Log.d("GetChild" + String.valueOf(groupPosition), String.valueOf(childPosition));
        return personsGroup.get(childPosition);
    }

    public long getChildId(int groupPosition, int childPosition) {
        Log.d("GetChildID" + String.valueOf(groupPosition), String.valueOf(childPosition));
        return childPosition;
    }

    public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View convertView, ViewGroup parent) {

        Person p = personsChild.get(groupPosition);
        View v = convertView;
        Log.d(p.getName(), p.getName() + "CHILD");
        if (v == null) {

            LayoutInflater mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = mInflater.inflate(R.layout.drink_action_child, null);
        }
        if (personsChild.size() != 0) {
            TextView lbFavoriteDrink = (TextView) v.findViewById(R.id.drink_action_child_lb_favorite_drink);
            if (p.getFavoriteDrink() != null) {
                lbFavoriteDrink.setText(p.getFavoriteDrink().getName());
            } else {
                lbFavoriteDrink.setText("Nog niks gedronken.");
            }
            TextView lbCost = (TextView) v.findViewById(R.id.drink_action_child_lb_cost);
            lbCost.setText(String.valueOf(p.getTotalMoneySpent()));

            TextView lbAmount = (TextView) v.findViewById(R.id.drink_action_child_lb_amount);
            lbAmount.setText(String.valueOf(p.getTotalAmountOfDrinks()));

            TextView lbKcal = (TextView) v.findViewById(R.id.drink_action_child_lb_kcal);
            lbKcal.setText(String.valueOf(p.getTotalKcal()));

            TextView lbPunishment = (TextView) v.findViewById(R.id.drink_action_child_lb_boete);
            lbPunishment.setText(p.getPunishment());

            TextView lbWeightPutOn = (TextView) v.findViewById(R.id.drink_action_child_lb_weight);
            lbWeightPutOn.setText(String.valueOf(p.getWeightPutOn()));

            TextView lbLiters = (TextView) v.findViewById(R.id.drink_action_child_lb_liter);
            lbLiters.setText(String.valueOf(p.getAmountOfLiters()));

            TextView lbTimeSinceLastDrink = (TextView) v.findViewById(R.id.drink_action_child_lb_time_since_last_drink);
            lbTimeSinceLastDrink.setText(String.valueOf(p.getTimeSinceLast()[2]) + ":" + String.valueOf(p.getTimeSinceLast()[1]) + ":" + String.valueOf(p.getTimeSinceLast()[0]));

        } else {
            // WHAT TO DO IF NO PROFILES
        }

        return v;
    }

    public int getChildrenCount(int groupPosition) {
        Log.d("GetChildrenCount" + String.valueOf(groupPosition), String.valueOf(groupPosition));
        return 1;
        // return persons.size();
    }

    public Object getGroup(int groupPosition) {
        Log.d(String.valueOf(groupPosition), String.valueOf(groupPosition) + personsGroup.get(groupPosition).getName());
        return personsGroup.get(groupPosition);
    }

    public int getGroupCount() {

        return personsGroup.size();
    }

    public long getGroupId(int groupPosition) {
        Log.d(String.valueOf(groupPosition) + "GetGroupId", String.valueOf(groupPosition));
        return groupPosition;
    }

    public View getGroupView(int groupPosition, boolean isExpanded, View convertView, ViewGroup parent) {
        Person p = personsGroup.get(groupPosition);
        View v = convertView;
        Log.d(groupPosition + " " + p.getName(), p.getName() + "GROUP");
        if (v == null) {

            LayoutInflater mInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = mInflater.inflate(R.layout.drink_action_item, null);

        }
        if (personsGroup.size() != 0) {

            TextView lbName = (TextView) v.findViewById(R.id.drink_action_lb_name);
            TextView lbAlcohol = (TextView) v.findViewById(R.id.drink_action_info_current_alcohol);

            ImageView btnDrink = (ImageView) v.findViewById(R.id.drink_action_item_btn_drink);
            btnDrink.setTag(p);

            lbName.setText(p.getName());
            lbAlcohol.setText(String.valueOf(p.getCurrentAlcoholLevel()));

        } else {
            // WHAT TO DO IF NO PROFILES
        }

        return v;
    }

    public boolean hasStableIds() {
        // TODO Auto-generated method stub
        return true;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        // TODO Auto-generated method stub
        return true;
    }

} 
```

每当我长按一个项目时，它总是选择第一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T16:12:02.697

`return v;`尝试使用此代码之前在 getChildView() 方法中注册到 contextMenu`((Activity) context).registerForContextMenu(v);`

# c# - 是否可以使用 Powershell 将 ReducedRecipient.RecipientTypeDetails 属性检索为整数值？

> ID：13821777
> 
> 赞同：0
> 
> 时间：2012-12-11T13:47:07.493
> 
> 标签：c#, powershell

我正在使用 Powershell 调用返回 ReducedRecipient 对象的 Get-Recipient。power shell 命令使用 C# 代码运行，返回的对象在 C# 中处理。

但是，我只想使用 Powershell 将此对象的 RecipientTypeDetails 属性作为整数值检索（稍后在 C# 代码中处理）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T14:57:09.817

如果我跟着你...

```
$recipient.RecipientTypeDetails.Value__ 
```

# java - 通过java代码从类生成jar - 不是eclipse中的命令行

> ID：13821784
> 
> 赞同：0
> 
> 时间：2012-12-11T13:47:50.747
> 
> 标签：java, eclipse, jar

如何转换命令行：

```
jar -cf myfile.jar *.class 
```

Eclipse 中的Java 代码？

我有字符串中的所有类路径。我需要在运行时生成 jar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T13:54:47.940

首先，您可以创建命令行并使用`Runtime.getRuntime().exec(cmd)`或者使用`ProcessBuilder`.

其次，jar 只是一个 zip 文件。您可以使用`ZipOutputStream`或创建它`JarOutputStream`

# orientation - 横向和纵向的替代资源

> ID：13821789
> 
> 赞同：1
> 
> 时间：2012-12-11T13:47:54.537
> 
> 标签：orientation, drawable, landscape, portrait

我有两个活动，这些活动的布局有不同的背景图像纵向和横向。我制作了名为 drawable-land-hdpi 和 drawabe-port-hdpi 的不同文件夹，并将图像放入其中。但是当我启动应用程序时，它会根据设备的方向加载正确的图像，但是之后当我改变方向时，当我将方向更改为纵向时，它不会从纵向加载图像，当我改变方向时也不会从横向加载图像将方向更改为横向。

e上有人知道原因吗？请帮忙 。任何形式的帮助和建议将不胜感激。谢谢， 穆纳扎

# objective-c - CLLocationManager 将先前（旧）位置存储在缓存中多长时间？

> ID：13821791
> 
> 赞同：0
> 
> 时间：2012-12-11T13:48:18.357
> 
> 标签：objective-c, ios, core-location

大多数时候，开发人员都在询问如何过滤旧的缓存位置，但是我对相反的事情感兴趣 - 如何保留和获取旧位置:) 这是我的情况：我的应用程序中有天气屏幕，我正在下载天气预报对于当前位置。应用程序一启动，我就会以 1 公里的精度开始标准位置更新，并将接收到的位置保存在我的定位器类私人成员中。如果应用没有收到任何位置更新，那么它需要显示任何已知的先前位置——比如从 [CLLocationManager 位置] 中抓取一个。

问题出在 iPad2 上。我的应用程序在没有设备重启的情况下运行了大约一周，但 [CLLocationManager location] 非常频繁地返回 nil。例如，我昨天在 iPad 上打开了 google maps 应用程序并收到消息“无法确定位置”，因此 [CLLocationManager location] 在我的应用程序中返回 nil。然后我在谷歌地图应用程序中按下位置箭头图标，然后谷歌地图应用程序显示我当前的位置。此外，[CLLocationManager location] 在我的应用程序中返回了某个位置。但是，今天仍然存在同样的问题 - [CLLocationManager location] 再次返回 nil，所以我猜 CLLocationManager 会在一段时间后丢弃位置缓存，如果您不使用设备移动，那么您将不会获得任何已知的先前位置。任何想法如何解决这个问题并强制 CLLocationManager 检索任何位置（如果它为零）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:11:12.367

[文档](https://developer.apple.com/library/ios/documentation/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/instp/CLLocationManager/location)

> 最近检索到的用户位置。（只读）
> 
> *@property(readonly, nonatomic) CLLocation *location*
> 
> **讨论**
> 
> 如果从未检索到任何位置数据，则此属性的值为 nil。
> 
> 在 iOS 4.0 及更高版本中，此属性可能在启动时包含更新的位置对象。具体来说，如果正在运行重要的位置更新并且您的应用程序已终止，则此属性会在您的应用程序重新启动时使用最新的位置数据进行更新（并且您创建一个新的位置管理器对象）。此位置数据可能比您的应用程序处理的最后一个位置事件更新。
> 
> 检查存储在此属性中的位置的时间戳总是一个好主意。如果接收器当前正在收集位置数据，但最小距离过滤器很大，则返回的位置可能相对较旧。如果是，您可以停止接收器并重新启动它以强制更新。

它将尽可能长时间地存储在*缓存中，没有超时。*如果使用位置服务的东西未能获得任何位置，它可能会将其设置为 nil。

# three.js - 在 three.js 中设置 3D 动画

> ID：13821794
> 
> 赞同：0
> 
> 时间：2012-12-11T13:47:50.013
> 
> 标签：three.js

我正在研究这个例子[http://mrdoob.github.com/three.js/examples/webgl_morphtargets_md2_control.html](http://mrdoob.github.com/three.js/examples/webgl_morphtargets_md2_control.html)在这个网站上找到：[http://mrdoob.github.com/three.js/](http://mrdoob.github.com/three.js/)其中文件包含在指示three.js 模型必须以3d 方式移动的规则？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:48:58.070

使用 chrome 开发人员工具，您可以转到 Chrome > 查看 > 开发人员工具 > 开发人员工具。在 Sources 选项卡中，有示例中使用的所有文件。您正在查看文件“MD2CharacterComplex.js”中，您将在其中找到此示例的所有动画。干杯。

# iphone - 我在 iphone 中的代码有什么错误

> ID：13821796
> 
> 赞同：-2
> 
> 时间：2012-12-11T13:48:14.023
> 
> 标签：iphone

我是 i Phone 编程的新手。在这段代码中，我将图像存储在数组中，这些图像是我在捆绑中添加的，我可以在缩略图中显示该图像。同样，我在文档目录中创建了私人文件夹，我添加了 2 张图像之后，我检索数组中的图像，但我无法在缩略图中显示私有文档目录图像，但我可以显示捆绑图像。在下面的代码 2 localImages 中是否有一个 localImages 我有存储捆绑图像和另一个 localImages我已经存储了私有文档目录文件夹图像。现在正在显示捆绑图像，但我评论说捆绑 localImages。并且我在相同的 localImages 中使用私有文档目录图像，它无法显示一些预期。

```
paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask, YES);
documentsDirectory = [paths objectAtIndex:0];
savedImagePath = [documentsDirectory stringByAppendingPathComponent:@"Tauky"];
     NSLog(@"%@",savedImagePath);
NSError *error = nil;
if (![[NSFileManager defaultManager] fileExistsAtPath:savedImagePath])
[[NSFileManager defaultManager] createDirectoryAtPath:savedImagePath withIntermediateDirectories:NO attributes:nil error:&error];
dirContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:savedImagePath error:&error];
localImages = [[NSArray alloc] init];

    predicate = [NSPredicate predicateWithFormat:@"self ENDSWITH '.jpeg'"];
    imagesOnly = [dirContents filteredArrayUsingPredicate:predicate];
    localImages = [NSArray arrayWithArray:imagesOnly];
    NSLog(@"%@",localImages);

self.title = @"FGallery";
self.navigationController.navigationBar.barStyle = UIBarStyleBlackTranslucent;

localCaptions = [[NSArray alloc] initWithObjects:@"images53", @"image57",nil];
//localImages =[[NSArray alloc] initWithObjects: @"lava.jpeg",@"hawaii.jpeg",nil];
    NSLog(@"%@",localImagess); 
```

期望在代码下方

```
- (void)reloadGallery
{
    _currentIndex = _startingIndex;
    _isThumbViewShowing = NO;

    // remove the old
    [self destroyViews];

    // build the new
    if ([_photoSource numberOfPhotosForPhotoGallery:self] > 0) {
        // create the image views for each photo
        [self buildViews];

        // create the thumbnail views
        [self buildThumbsViewPhotos];

        // start loading thumbs
        [self preloadThumbnailImages];

        // start on first image
        [self gotoImageByIndex:_currentIndex animated:NO];

        // layout
        [self layoutViews];
    }
} 
```

在控制台中它的显示是这样的

```
self=(FGalleryViewController *)0x6877050
    _cmd=(SEL)0x103cf reloadgallery 
```

我没有得到我尝试了很多方法。请帮助我谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:51:54.790

您命名您的方法`reloadGallery`，但您似乎将其称为`reloadgallery`（注意小写的“g”！）。将呼叫更改为`reloadGallery`，应该没问题。

# jquery - 调试适用于 Chrome 但不适用于 FF 或 IE 的 JS

> ID：13821797
> 
> 赞同：1
> 
> 时间：2012-12-11T13:48:30.510
> 
> 标签：jquery

以下代码在 Chrome 中运行良好，但在 FF 和 IE 中没有任何作用。我该如何调试呢？我在本地开发的方式意味着我不能让我的代码公开访问。

```
$(document).ready(function () {
       // alert('dfd');
        $('#mobileMenuLink a').click(function () {
            event.preventDefault();
            // alert('dfd');
            $('#menu').toggleClass('mobileMenuOpen');
        });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T13:53:10.593

是什么`event`？也许你只是错过了一个参数声明：

```
$('#mobileMenuLink a').click(function (event) {
    event.preventDefault();
    $('#menu').toggleClass('mobileMenuOpen');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:23:29.383

要在 FireFox 上进行调试，请下载 FireBug。它将使您能够观察控制台并检查是否引发了任何错误。你也可以用它来调试你的 JS 代码。

IE也可以这样说，使用F12，可以使用内置的开发者工具。

# linux - QEMU 在 Eclipse 中运行正常，但在调试时失败

> ID：13821800
> 
> 赞同：4
> 
> 时间：2012-12-11T13:48:49.263
> 
> 标签：linux, eclipse, qemu

我正在研究 QEMU 的源代码。

我用 Eclipse 打开它并配置了环境。然后我可以为 ARM 平台构建它并通过引导 Linux 来运行它。

调试时，**运行某些功能后失败**。错误信息是：

```
qemu: 无法打开磁盘映像 rdinit=/bin/sh": 没有这样的文件或目录
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T05:40:10.190

看起来`"`项目配置文件中某处缺少（双引号字符），或者可能是多余的。

一个典型的 QEMU 调用是`qemu-system-arm -kernel path/to/zImage -initrd path/to/test_rootfs -append "root=/dev/ram rdinit=/test"`

如果您在之后跳过第一个双引号`-append`- qemu 会认为这`rdinit=/test`是一个磁盘映像，并尝试将其作为文件打开

一种可能的解决方案是 grep 您的 eclipse 项目目录中的`"rdinit"`关键字并检查所有 grep 结果中是否存在丢失/冗余引号

```
cd /your/project/dir
grep -rw rdinit . 
```

# javascript - 为什么要更改所有实例的对象属性？

> ID：13821804
> 
> 赞同：-1
> 
> 时间：2012-12-11T13:49:34.363
> 
> 标签：javascript

我想将精灵的位置封装在另一个对象中。这样我就可以通过and访问而不是使用`tile.x`and 。`tile.y``tile.position.x``tile.position.y`

然而，一旦我`tile.position`在 init-method中设置了 tile-object 的*所有*实例的值，所有实例都会更改为相同的值。这是为什么？

当我设置`tile.x`一切按预期工作时，这意味着每个对象都获得了正确的值。

这就是我创建多个实例的方式：

在 for 循环中，我正在创建所述对象的多个实例：

```
for (var y = 0; y < 10; ++y) {
  for (var x = 0; x < 10; ++x) {
    var tile = Object.create(tileProperty);
    tile.init(x, y);
    ...
  }
} 
```

这是克隆的对象：

```
var tileProperty = {
    // this works
    x: null, 
    y: null,
    // this will get changed for ALL instances
    position: { 
        x: null,
        y: null
    },
    init: function(x, y) {
        this.name = x.toString() + y.toString();
        this.x = x;
        this.y = y;
        this.position.x = x;
        this.position.y = y;
        this.canvas = document.createElement('canvas');
        var that = this;
        $(this.canvas).bind('click', function() {
            console.log(that.position, that.x, that.y);
        });

        document.body.appendChild(this.canvas);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:00:27.400

您`position`在所有对象中都引用了同一个对象。

您应该做的是使用[标准原型解决方案](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Details_of_the_Object_Model)：

```
function tileProperty() {
    this.position = { 
        x: null,
        y: null
    };
}
tileProperty.prototype.init = function(x, y) {
    this.name = x.toString() + y.toString();
    this.x = x;
    this.y = y;
    this.position.x = x;
    this.position.y = y;
    this.canvas = document.createElement('canvas');
    var that = this;
    $(this.canvas).bind('click', function() {
        console.log(that.position, that.x, that.y);
    });

    document.body.appendChild(this.canvas);
} 
```

然后使用构建您的实例

```
var tp = new tileProperty(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:59:16.413

用这个：

```
var tileProperty = {
    position: { // we will inherit from this
        x: null,
        y: null,
        init: function(x, y) {
            this.x = x;
            this.y = y;
        }
    },
    init: function(x, y) {
        this.name = x.toString() + y.toString();
        // create an own Position object for each instance
        this.position = Object.create(this.position);
        // and initialize it
        this.position.init(x, y); // you might inline this invocation of course
        …
    },
    …
} 
```

# state - Drools 是映射业务规则/逻辑的最有效方式吗？

> ID：13821807
> 
> 赞同：9
> 
> 时间：2012-12-11T13:49:28.250
> 
> 标签：state, drools, rules, jbpm

在我们的项目中，我们必须实现有关将某些对象映射到某些操作的业务逻辑。在某个动作最终得到解决之前，我们将验证特定类型的对象的一系列条件。换句话说，对于 7 种类型的对象，我们可以有一系列动作（来自近 45 个动作）。

我们正在考虑使用 Drools 来写下上述规则。就效率而言，是否有人对使用 Drools 有一些积极/消极的经验？还有可以使用的 jBPM 框架（如果我没记错的话，那里使用了 Drools）——有人熟悉那个框架吗？也许您对如何解决问题有其他想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T14:48:40.807

关于效率，你应该对 Drools 没有任何问题。对我来说，这听起来像是一组非常小的事实和规则。它所基于的 Rete 引擎几乎可以肯定地比你自己编写的任何一堆 if-then-else 语句更快地做出决策。我注意到的一个特别的好处是响应时间是非常可预测的。

显然所有的事实模型和规则都不同，但举个例子，我目前正在构建的应用程序在工作内存中随时都有数百个事实，以及超过 1000 条规则。它能够在大约 20 毫秒内对传入请求做出决定。

对于您所描述的内容，完整的 jBPM 框架听起来没有必要。但是，它擅长它的工作。例如，如果您要设计工作流，则有一个流程建模 GUI，如果技术团队在编写 DSL 和构建决策表方面投入了一些前期工作，Guvnor 可以用于非技术规则作者。

为了完整起见，主要竞争对手可能是 FICO Blaze Adviser 或 IBM ILog JRules。一般来说，当涉及到基准测试时，它们往往略领先于 Drools，但它们很昂贵。诚然，如果您决定为 JBoss/RedHat 服务合同付费，那并没有太大的不同，但如果您乐于在 Drools 上获得社区支持，那么它是免费的！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-11T15:09:16.767

我对 Drools 的唯一担心是没有非 IT 业务人员可以真正使用的像样的 GUI。许多产品声称它们确实提供了这样的用户界面，但事实证明并非如此。因此，您必须接受这样一个事实，即您的开发团队最终将基于决策表或其他格式创建和测试所有这些规则。

除此之外，Drools 是政府、银行和大公司使用的出色 BRE。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T17:50:36.013

Drools 非常高效和快速。但与任何技术和框架一样，它需要投资才能集成到您的项目中，这不是灵丹妙药。你需要考虑：

*   你会有多少规则？如果规则少于 20 条，我不会推荐任何规则引擎。它可能无法证明您为仅为 7 个对象和 45 个操作添加规则引擎而付出的努力是合理的……
*   您需要 DSL（领域特定语言）功能吗？IE。非技术人员会写规则吗？恕我直言，与例如相比，这在 Drools 中不是很有用。甲骨文 OPA。但是，我还没有看到一个非技术人员安全地修补规则系统。除了改变决策表中的值。
*   您的规则多久更改一次？如果您需要一个集中式系统来管理、版本、打包、测试您的规则，那么 Drools Guvnor 是一款非常强大的产品。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-11T12:17:20.657

jBPM 不是一个规则引擎，它是一个工作流引擎。Drools 是一个规则引擎。所以 Drools 就是你要找的。

Drools 和 jBPM 是配套项目：如果您需要带有规则的工作流，它们可以很好地集成。

Drools 很好，与其他 BPMN 引擎相比，JBPM 有点复杂。我建议选择 Activiti，因为它更容易集成任何东西，比如 Spring、LDAP 等；使用 Activiti 更容易。你也可以将 Drools 与 Activiti 集成。所以选择 Activiti 作为工作流引擎和 Drools 作为规则引擎。

# android - 从其他应用程序检索内容的文件名

> ID：13821809
> 
> 赞同：2
> 
> 时间：2012-12-11T13:49:49.717
> 
> 标签：android, android-intent

[我已经注册了我的应用程序，以便在这篇文章](https://stackoverflow.com/questions/13568108/receiving-content-from-other-apps)之后从其他应用程序接收文件（任何类型，而不仅仅是图像）。

我已经实现了已回答的解决方案，但我找不到检索数据流的“文件名”的方法。作为来自 Uri 的示例，例如：

> 内容：//下载/all_downloads/5

我可以取出流，但我对生成它的原始文件的名称一无所知。

有没有办法找回它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T11:57:15.300

在大多数情况下，这将解决您的问题：

```
Uri intentData = intent.getData();
    if (intentData != null) {
        String filePath;
        if("content".equals(intent.getScheme()))
        {
            filePath = getFilePathFromContentUri(intentData);
        }
        else
        {
            filePath = intentData.getPath();
        }
}

private String getFilePathFromContentUri(Uri selectedUri) {
    String filePath;
    String[] filePathColumn = {MediaColumns.DATA};

    Cursor cursor = getContentResolver().query(selectedUri, filePathColumn, null, null, null);
    cursor.moveToFirst();

    int columnIndex = cursor.getColumnIndex(filePathColumn[0]);
    filePath = cursor.getString(columnIndex);
    cursor.close();
    return filePath;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T14:37:31.947

> 有没有办法找回它？

一般来说，不，因为可能没有名称，部分原因是可能没有文件。您可能能够获得`InputStream`内容，但这并不意味着`InputStream`.

对于某些特定的提供者（例如，`MediaStore`）可能存在一些特定的黑客攻击来尝试确定与某些数据相关联的文件名`Uri`，尽管这样的黑客攻击可能不可靠。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-20T05:58:41.277

> onCreate()

```
 Intent intent1 = getIntent();
        String action = intent1.getAction();
        String type = intent1.getType();

        if (Intent.ACTION_SEND.equals(action) && type != null) {
            this.handleSend(intent1);
        }

 void handleSend(Intent intent) {
        try {
            Uri imageUri = (Uri) intent.getParcelableExtra(Intent.EXTRA_STREAM);
            imageShare.setImageURI(imageUri);
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

# f# - F# 帮助类型推断的方法？

> ID：13821811
> 
> 赞同：9
> 
> 时间：2012-12-11T13:50:18.543
> 
> 标签：f#, type-inference

在Don Syme、Adam Granicz 和 Antonio Cisternino 撰写的[Expert F# 2.0中，第 4 页。](http://www.apress.com/9781430224310)44

> 类型推断：使用 |> 运算符可以让类型信息从输入对象流向操作这些对象的函数。F# 使用从类型推断中收集的信息来解决某些语言结构，例如属性访问和方法重载。这依赖于在整个程序文本中从左到右传播的信息。特别是，在解决属性访问和重载时，不会考虑位置右侧的类型信息。

很明显，使用 |> 可以帮助类型推断。

与往常一样，声明类型也很有帮助。

是否有任何其他方法/策略可用于帮助 F# 类型推断？

编辑

正如 RamonSnir 正确指出的那样，应该让类型推断做尽可能多的工作。因此，仅仅因为你可以添加类型声明并不是一个人应该做的。不要把这个问题或答案当作应该做的事情。我问这个问题是为了帮助更好地理解类型推断的细微差别，以及在类型推断需要帮助的情况下有什么帮助。因此，如果类型推断可以在没有帮助的情况下解析所有类型，那么不要给它任何帮助，但是当它这样做时，知道一些帮助它的方法会很好。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-11T14:44:07.800

几点：

1）更喜欢模块功能而不是属性和方法。

```
List.map (fun x -> x.Length) ["hello"; "world"] // fails
List.map String.length ["hello"; "world"] // works

let mapFirst xss = Array.map (fun xs -> xs.[0]) xss // fails
let mapFirst xss = Array.map (fun xs -> Array.get xs 0) xss // works 
```

2）更喜欢没有重载的方法。例如，[QuickLinq Helpers](http://blogs.msdn.com/b/dsyme/archive/2012/12/07/quicklinq-helpers.aspx)定义非重载成员以避免 LINQ 扩展方法中的一堆类型注释。

3) 利用任何可用信息给类型检查器一些提示。

```
let makeStreamReader x = new System.IO.StreamReader(x) // fails
let makeStreamReader x = new System.IO.StreamReader(path=x) // works 
```

最后一个例子取自一篇关于[F# 类型推断](http://fsharpforfunandprofit.com/posts/type-inference/)的优秀文章。

*总而言之，您通常不需要帮助 F# 类型检查器。*如果存在类型错误，上面链接的摘要提供了一个很好的修复指南：

> 总而言之，如果编译器抱怨缺少类型或信息不足，您可以做的事情是：
> 
> *   在使用之前定义事物（这包括确保以正确的顺序编译文件）
> *   将具有“已知类型”的事物放在比具有“未知类型”的事物之前。特别是，您可能能够重新排序管道和类似的链式函数，以便类型化对象排在第一位。
> *   Annotate as needed. One common trick is to add annotations until everything works, and then take them away one by one until you have the minimum needed. Do try to avoid annotating if possible. Not only is it not aesthetically pleasing, but it makes the code more brittle. It is a lot easier to change types if there are no explicit dependencies on them.

# javascript - 我的 .html() 语法有什么问题？

> ID：13821812
> 
> 赞同：0
> 
> 时间：2012-12-11T13:50:43.317
> 
> 标签：javascript, jquery, html, escaping

当我输入以下代码时：

> $('.whatever').html("LOL");

有用。但是在我正在构建的网站中，我需要添加的不仅仅是一个字符串。

这是我想补充的：

```
<div class="pic"><img class="left" src="img/happy-man.jpg"/ ></div>
<div class="pic"><img class="happy" src="img/happy-woman.jpg"/ ></div>
<div class="pic"><img class="right" src="img/happy-celeb.jpg"/ ></div> 
```

但是当我将上面的 HTML 代码放入 html() 函数时，什么也没有发生。我想知道我在语法方面犯了什么明显的错误。欣赏它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:00:30.940

尝试使用单引号`$('.whatever').html('LOL');`

[http://jsfiddle.net/83DSu/1/](http://jsfiddle.net/83DSu/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:52:35.723

```
$('.whatever').html('<div class="pic"><img class="left" src="img/happy-man.jpg"/ ></div><div class="pic"><img class="happy" src="img/happy-woman.jpg"/ ></div><div class="pic"><img class="right" src="img/happy-celeb.jpg"/ ></div>') 
```

以下代码将允许您替换 div 的 html 内容

或者你只是做一个字符串

```
text= '<div class="pic"><img class="left" src="img/happy-man.jpg"/ ></div>'+'<div class="pic"><img class="happy" src="img/happy-woman.jpg"/ ></div>'
$('.whatever').html(text) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T14:29:04.320

如果您正确逃脱，它可以完美运行

具有三个不同选项的[演示](http://jsfiddle.net/EQtAW/2/)

```
var html1 ="<div class=\"pic\"><img class=\"left\" src=\"img/happy-man.jpg\"/ >" + 
           "</div><div class=\"pic\"><img class=\"happy\" src=\"img/happy-woman.jpg\"/ ></div>" +
           "<div class=\"pic\"><img class=\"right\" src=\"img/happy-celeb.jpg\"/ ></div>";

$('#whatever').html(html1);

var html2 = "<div class='pic'><img class='left' src='img/happy-man.jpg'/ ></div>" + 
            "<div class='pic'><img class='happy' src='img/happy-woman.jpg'/ ></div>" + 
            "<div class='pic'><img class='right' src='img/happy-celeb.jpg'/ ></div>";

$('#whatever2').html(html2);

var html3 = '<div class="pic"><img class="left" src="img/happy-man.jpg"/ ></div>' +
            '<div class="pic"><img class="happy" src="img/happy-woman.jpg"/ ></div>' +
            '<div class="pic"><img class="right" src="img/happy-celeb.jpg"/ ></div>';

$('#whatever3').html(html3); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T14:37:07.927

单引号和双引号可能有问题

```
$('.whatever').html(
   '<div class="pic"><img class="left" src="img/happy-man.jpg"/ ></div>'+
   '<div class="pic"><img class="happy" src="img/happy-woman.jpg"/ ></div>'+
   '<div class="pic"><img class="right" src="img/happy-celeb.jpg"/ ></div>'
); 
```

[http://jsfiddle.net/83DSu/](http://jsfiddle.net/83DSu/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T14:47:57.617

另一种方法是：

```
var imgList = [
        ["img/happy-man.jpg","left"]
        ,["img/happy-woman.jpg","happy"]
        ,["img/happy-celeb.jpg","right"]
    ], cur=0,
    whatever = $('#whatever');
    whatever.html("");

$.each(imgList,function(){
    console.log(imgList[cur][1]);
    whatever
        .append( $("<div />")
                .addClass("pic")
                .html( $("<img />")
                      .addClass(imgList[cur][1])
                      .attr("src",imgList[cur][0])
                    )
              );
        cur++;
});​ 
```

它看起来更复杂，但它可以让您更快地控制 HTML 并将所有链接放在一个位置。

[http://jsfiddle.net/daCrosby/Fwwd3/](http://jsfiddle.net/daCrosby/Fwwd3/)

# node.js - 部分缓冲区写入

> ID：13821814
> 
> 赞同：0
> 
> 时间：2012-12-11T13:51:43.700
> 
> 标签：node.js, io

我正在详细查看节点[缓冲区](http://nodejs.org/api/buffer.html#buffer_buffer)文档，但我无法理解`buffer.write()`.

具体来说，当使用大于缓冲区容量的字符串执行写入尝试时，我不明白行为是什么。以下段落似乎自相矛盾：

> 如果缓冲区没有足够的空间来容纳整个字符串，它将写入部分字符串。长度默认为 buffer.length - 偏移量。该方法不会写入部分字符。

第一句话声称它会写它可以写的东西，而最后一句话说这是一个全有或全无的操作。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:15:52.533

在某些编码（如 UTF-8）中，*单个字符*可以由*多个字节*表示。

当文档说“该方法不会写入部分字符”时，我认为他们的意思是，如果一个字符需要 3 个字节但缓冲区上只剩下 2 个字节，则根本不会写入该字符（而不是只写入前 2 个字节）

[http://en.wikipedia.org/wiki/UTF-8](http://en.wikipedia.org/wiki/UTF-8)

# c# - 如何使用带有 lambda 参数的 typeof(object).GetMethod()

> ID：13821815
> 
> 赞同：1
> 
> 时间：2012-12-11T13:51:22.747
> 
> 标签：c#, lambda

如何使用 Type.GetMethod() 来获取带有 lambda 参数的方法？我正在尝试使用以下方法获取类似 Func 的参数的 Queryable.Any 方法：

```
typeof(Queryable).GetMethod("Any", new Type[]{typeof(Func<ObjType, bool>)}) 
```

但它一直返回null。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-11T14:07:39.357

有四点不对：

*   没有“lambda 参数”之类的东西。Lambda 表达式通常用于为方法提供*参数*，但它们被转换为委托或表达式树
*   你错过了`Queryable.Any`-的第一个参数`IQueryable<T>`
*   您正在使用`Func<ObjType, bool>`which 是委托类型，而不是`Expression<Func<ObjType, bool>>`表达式树类型
*   不幸的是，你不能以这种方式获得泛型方法。

你要：

```
var generic = typeof(Queryable).GetMethods()
                               .Where(m => m.Name == "Any")
                               .Where(m => m.GetParameters().Length == 2)
                               .Single();
var constructed = generic.MakeGenericMethod(typeof(ObjType)); 
```

那应该为您提供相关的`Any`方法。目前尚不清楚您将如何处理它。

# java - Ivy 使用 Maven 快照“修订已解决”

> ID：13821825
> 
> 赞同：1
> 
> 时间：2012-12-11T13:53:34.553
> 
> 标签：java, maven, ivy

Ivy + Maven 快照 + rev="latest.revision" 有问题。Ivy 正在正确解析元数据以发现工件的最新版本，但它似乎拒绝下载它。我坚持使用该工件的早期版本。下面的文字是否给任何人任何想法它为什么这样做？

```
[ivy:resolve]   listing revisions from maven-metadata: http://my-maven/content/repositories/snapshots/ca/spacek/api-project/maven-metadata.xml
[ivy:resolve]   my-snapshots: found md file for ca.spacek#api-project;latest.integration
[ivy:resolve]           => http://my-maven/content/repositories/snapshots/ca/spacek/api-project/0.0.3-SNAPSHOT/api-project-0.0.3-20121211.132856-8.pom (0.0.3-SNAPSHOT)
[ivy:resolve]   my-snapshots: revision already resolved: ca.spacek#api-project;0.0.3-SNAPSHOT 
```

我看着[这个](https://stackoverflow.com/questions/2399099/resolving-snapshot-dependencies-with-timestamps-from-ivy)并尝试设置`pattern`相同，但它似乎没有帮助。我希望避免这样的解决[方法](https://stackoverflow.com/questions/3500478/classifiers-not-working-in-maven-snapshot-repo-for-ivy)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T00:07:59.133

下载快照对我有用。我在下面提供了一个工作示例。可以提供更多细节吗？

我过去看到过 Maven 快照的问题，但那是因为存储库元数据文件没有按预期更新，导致下载了错误的工件。

另一个可能的问题是缓存无效。也许您可以尝试清除它（请参阅下面示例中的“全部清除”目标）。

# 例子

```
[ivy:resolve] :: Apache Ivy 2.3.0-rc1 - 20120416000235 :: http://ant.apache.org/ivy/ ::
[ivy:resolve] :: loading settings :: file = /?????/ivysettings.xml
[ivy:resolve] :: resolving dependencies :: myOrg#Demo;????
[ivy:resolve]   confs: [default]
[ivy:resolve]   found commons-lang#commons-lang;2.7-SNAPSHOT in apache-snapshots
[ivy:resolve] downloading https://repository.apache.org/content/groups/snapshots/commons-lang/commons-lang/2.7-SNAPSHOT/commons-lang-2.7-20120610.132226-5.jar ... 
```

## 构建.xml

```
<project name="demo" default="resolve" xmlns:ivy="antlib:org.apache.ivy.ant">

    <property name="build.dir" location="build"/>

    <target name="resolve" description="Use ivy to resolve classpaths">
        <ivy:resolve/>
    </target>

    <target name="clean" description="Cleanup build files">
        <delete dir="${build.dir}"/>
    </target>

    <target name="clean-all" depends="clean" description="Additionally purge ivy cache">
        <ivy:cleancache/>
    </target>

</project> 
```

## 常春藤.xml

```
<ivy-module version="2.0">
    <info organisation="myOrg" module="Demo"/>
    <dependencies>
        <dependency org="commons-lang" name="commons-lang" rev="2.7-SNAPSHOT"/>
    </dependencies>
</ivy-module> 
```

## 常春藤设置.xml

```
<ivysettings>
    <settings defaultResolver="repos" />
    <resolvers>
        <chain name="repos">
            <ibiblio name="central" m2compatible="true"/>   
            <ibiblio name="apache-snapshots" m2compatible="true" root="https://repository.apache.org/content/groups/snapshots"/>   
        </chain>
    </resolvers>
</ivysettings> 
```

# asp.net-mvc - 没有 FtpWebRequest.GetResponse 与 IIS 7.5 和防火墙，但与 Visual Studio 2010 Webserver 和 IIS Express 8

> ID：13821832
> 
> 赞同：1
> 
> 时间：2012-12-11T13:54:00.617
> 
> 标签：asp.net-mvc, iis-7.5, firewall, iis-express, ftpwebrequest

MVC4 应用程序在 HomeController 的操作中从 FTP 服务器下载文件。使用 Visual Studio 2010 网络服务器和本地网络服务器 IIS Express 8 它可以工作。但是当我使用带有 ApplicationPoolIdenty 的本地网络服务器 IIS 7.5 时，下载不起作用：我没有收到命令“response = reqFTP.GetResponse()”的响应，并且出现以下异常：“操作有时间到”）。

当我关闭 Windows 防火墙时，它可以工作。我需要做什么？

```
Function FtpStart() As ActionResult
        Dim downloadFiles As String()
        Dim result As New StringBuilder()
        Dim response As WebResponse = Nothing
        Dim reader As StreamReader = Nothing
        Try
            Dim reqFTP As FtpWebRequest
            reqFTP = DirectCast(FtpWebRequest.Create(New Uri("ftp://adress")),FtpWebRequest)
            reqFTP.UseBinary = True
            reqFTP.Credentials = New NetworkCredential("user", "pw")
            reqFTP.EnableSsl = False
            reqFTP.Method = WebRequestMethods.Ftp.ListDirectory
            reqFTP.Proxy = Nothing
            reqFTP.KeepAlive = False
            reqFTP.UsePassive = False
            Debug.WriteLine("Get Response: ")
            response = reqFTP.GetResponse()
            Debug.WriteLine("Response received")
            reader = New StreamReader(response.GetResponseStream())
            Dim line As String = reader.ReadLine()
            While line IsNot Nothing
                result.Append(line)
                result.Append(vbLf)
                line = reader.ReadLine()
                Debug.WriteLine("File: " & line)
            End While
            result.Remove(result.ToString().LastIndexOf(ControlChars.Lf), 1)
            Return RedirectToAction("Index")
        Catch ex As Exception
            Debug.WriteLine(ex.ToString())
            Return RedirectToAction("Index")
        End Try
    End Function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-16T01:10:49.133

今天早些时候我自己在我的网络服务器上遇到了这个问题。您必须在防火墙上为端口 20 和 21 的 TCP 入站规则设置规则。它应该显示本地端口 = 所有端口，远程端口 = 20-21。还要确保在高级选项卡上，域、私有和公共的所有三个复选标记都被选中。我的防火墙已经为端口 21 设置了 FTP 防火墙规则，但不是 20，只要我为端口 20 设置了规则，它就起作用了。

希望这可以帮助

# css - HTML类和OO类的相似之处

> ID：13821833
> 
> 赞同：0
> 
> 时间：2012-12-11T13:54:28.097
> 
> 标签：css, html

我知道标题有点误导，但我来自面向对象的背景，最近我开始转向 Web 开发。我只掌握了 HTML 的基本知识，并且一直在学习和弄乱 CSS，但是其中有些部分有点令人困惑，我正在尝试用我能理解的术语来理解它。

我的 CSS：

```
.Person .span4 p
{
     margin-left: 10px;
     margin-right:10px;
     margin-top:10px;
} 
```

据我所知，这意味着容器内的任何 p 标签，例如“span4”类，而另一个容器内的类“Person”将按照上面列出的规范进行格式化。换句话说，person.span4.p.format(String[] formatArgs)，其中 formatArgs 是左边距、右边距和顶部。

问题：这是看待它的适当方式吗？

我知道这可能是将苹果与橙子进行比较，但我想在运行之前获得一些意见，得出一些可能非常错误的结论，以及对这些工作原理的实际解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T14:28:27.050

您的问题`.Person .span4 p`是正确的，这将为一个`p`元素的后代设置样式，该元素是具有`span4`类的元素的后代，该类是具有类的元素的后代`Person`。

但是，我不会尝试将 HTML 中的类解释为与 OO 类有任何相似之处。它们是完全不同的概念，我认为这最终会使事情变得混乱。

可以使用类属性 ( `class="span4"`) 将类分配给 HTML 元素，然后可以在 CSS 或 JavaScript 中使用这些属性为这些元素应用额外的样式或行为。考虑给一个元素一个类，就像用一个特定的关键字标记它，这样以后就可以很容易地定位它。元素也可以通过用空格分隔来分配多个类，例如。`class="span4 box"`.

此外，`.Person .span4 p`它实际上不是一个“类”，它是一个选择器。`.span4`语法称为类选择器，是`p`元素选择器，在两个选择器之间使用空格创建后代选择器。此外`#myId`还有一个 ID 选择器，还有[很多其他类型的选择器](http://reference.sitepoint.com/css/selectorref)。

我推荐[本指南](http://www.htmldog.com/guides/cssbeginner/selectors/)作为快速掌握正确术语的好方法。

# mysql - mysql中的复杂连接查询

> ID：13821836
> 
> 赞同：0
> 
> 时间：2012-12-11T13:54:42.643
> 
> 标签：mysql, join

大家好

我真的需要你的帮助。我必须获得所有用户的列表（不同的）： - 在比赛中进行实时签到（ checkins.ctype = 'live' ） - 他们最喜欢的球队（参见 fanusers_teams ） - 以 3 个或更多的进球差获胜。

最喜欢的球队，可能是 info_matches.team_id1 或 info_matches.team_id2 或两者兼而有之。

这是相关表格的一个小设计：

![设计](../Images/acaec2a5f6d8d409a95e0daf91294562.png)

我尝试过的方法有效率为 80%（所以它不会 :( ），因为它返回了一些正确的用户（他们最喜欢的团队有 3 个以上的目标差异），但也返回了没有最喜欢的团队的用户我认为他们被退回是因为他们已经为一场比赛进行了现场签到，其中一支球队或另一支球队以 3+ 的进球差异获胜。

这是我的查询：

```
选择不同的
    f.id
从
    粉丝f
左连接
    签入 c ON f.id = c.fanuser_id
左连接
    info_matches m ON m.id = c.match_id
在哪里
    c.ctype = 'live' 和
(
        m.team_id1 IN(
                选择不同的
                    m1.team_id1
                从
                    info_matches m1
                正确加入
                                        fanusers_teams ft ON m1.team_id1 = ft.team_id
                正确加入
                                        fanusers f ON f.id = ft.fanuser_id
                在哪里
                    m1.pointsteam1 - m1.pointsteam2 >= 3
                  )
        或者

        m.team_id2 IN(
                选择不同的
                    m2.team_id2
                    从
                    info_matches m2
                正确加入
                                        fanusers_teams ft ON m2.team_id2 = ft.team_id
                正确加入
                                        fanusers f ON f.id = ft.fanuser_id
                在哪里
                    m2.pointsteam2 - m2.pointsteam1 >= 3
                  )
)

```

如果有人成功解决了这个查询，我也会感谢我做错了什么。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:36:44.457

像这样的东西应该工作：

```
SELECT  DISTINCT f.id 

FROM    fanusers f 

        JOIN checkins c 
        ON f.id = c.fanuser_id 

        JOIN fanusers_teams ft
        ON f.id = ft.fanuser_id

        JOIN info_matches m 
        ON m.id = c.match_id 
        AND 
        (
            (ft.team_id = m.team_id1 AND pointsteam1 - pointsteam2 >= 3) 
        OR 
            (ft.team_id = m.team_id2 AND pointsteam2 - pointsteam1 >= 3)
        )

WHERE   c.ctype = 'live' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T16:05:35.463

我还找到了一种解决查询的方法，但不如 Tom 做的那么好。

我的方式 ：

```
选择不同的
                            f.id AS user_id
                        从
                            粉丝f
                        左连接
                            签入 c ON f.id = c.fanuser_id
                        左连接
                            info_matches m ON m.id = c.match_id
                        在哪里
                            c.ctype = '直播'
                            和
                            m.matchisfinished = 1
                            和
                            c.fanuser_id 不在（SELECT DISTINCT
                                                                            f1.id
                                                                        从
                                                                            粉丝f1
                                                                        左连接
                                                                            fanusers_stickers fs
                                                                        开 f1.id = fs.fanuser_id
                                                                        在哪里
                                                                            fs.sticker_id = 35
                                                                    )
                            和
                            (
                                ( m.team_id1 IN ( SELECT DISTINCT
                                                                                ft.team_id
                                                                            从
                                                                                fanusers_teams 英尺
                                                                            内部联接
                                                                                签到 c1
                                                                            上
                                                                                ft.fanuser_id = c1.fanuser_id
                                                                            在哪里
                                                                                f.id = c1.fanuser_id
                                                                    )
                                        和
                                        m.pointsteam1-m.pointsteam2>=3
                                    )

                                    或者

                                    (
                                         m.team_id2 IN（选择不同的
                                                                                    ft.team_id
                                                                                从
                                                                                    fanusers_teams 英尺
                                                                                内部联接
                                                                                    签到 c1
                                                                                上
                                                                                    ft.fanuser_id = c1.fanuser_id
                                                                                在哪里
                                                                                    f.id = c1.fanuser_id
                                                                        )
                                            和
                                            m.pointsteam2-m.pointsteam1>=3
                                    )
                            )

```

所以目前，即使我很高兴自己解决了查询，我也会使用汤姆的查询:)。

# python - Sqlalchemy - 如何获取对象，并过滤子类中的哪些行

> ID：13821837
> 
> 赞同：2
> 
> 时间：2012-12-11T13:55:08.127
> 
> 标签：python, sqlalchemy

我是 Sqlalchemy 的新手，需要一些帮助。

我有一个模型，具有一对多的关系：

```
class Metnadev(DeclarativeBase):
    __tablename__ = 'metnadev'

    #personal info
    id = Column(Integer, autoincrement=True, primary_key=True)
    first_name = Column(Unicode(255))
    last_name = Column(Unicode(255))
    birth_day = Column(Date)
    activitys = relationship("Activity", backref="metnadev")

class Activity(DeclarativeBase):
    __tablename__ = 'activity'

    id = Column(Integer, autoincrement=True, primary_key=True)
    metnadev_id = Column(Integer, ForeignKey('metnadev.id'))

    location = Column(Unicode(255))
    visible = Column(Boolean,default=True) 
```

当我做

```
metnadev = DBSession.query(Metnadev).filter_by(id=kw['id']).one() 
```

我得到了对象，和孩子一起，很棒。我想获取对象，但只从子类中获取行，其中**可见 == True**

搜索了一下，不知道怎么弄，谢谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T16:49:04.227

有几种方法可以做到这一点。

对于一次性，您可以只运行第二个查询：

```
from sqlalchemy import and_

activities = Activity.query.filter(and_(Activity.metnadev_id == kw['id'], Activity.visible==True)).all() 
```

您可以更改关系，以便只返回可见项目：

```
activities = relationship("Activity",
               primaryjoin="and_(Activity.metnadev_id==Metnadev.id, "
               "Activity.visible==True)") 
```

如果您需要更多控制权，您可以加入表格，但听起来关系配置对您有用。如果不是这样，请告诉我。

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T16:50:34.907

文档的这一部分有你的答案：[http ://docs.sqlalchemy.org/en/rel_0_6/orm/relationships.html#building-query-enabled-properties](http://docs.sqlalchemy.org/en/rel_0_6/orm/relationships.html#building-query-enabled-properties)

```
class Metnadev(DeclarativeBase):
    #...
    @property
    def activities(self):
        return object_session(self).query(Activity).filter_by(visible=True).with_parent(self).all() 
```

# objective-c - 剪切文本并放入另一个 UITextView

> ID：13821840
> 
> 赞同：1
> 
> 时间：2012-12-11T13:56:28.737
> 
> 标签：objective-c, ios, xcode, ipad, uitextview

我需要帮助

我有这个：

```
NSString *txt1 = @"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elit in est volutpat laoreet. Sed in turpis id odio molestie commodo et et felis. Praesent at magna mauris, at rutrum lacus. Fusce eu dictum erat. Etiam tellus quam, aliquam a imperdiet non, tempor nec est. Proin quis est lectus. Sed facilisis mauris scelerisque erat auctor ut tempor tellus consectetur. In sed erat non massa tincidunt consectetur. Proin vitae sollicitudin dolor. Morbi euismod hendrerit lorem vitae facilisis. Curabitur suscipit odio in felis eleifend non porttitor dui auctor. Aenean sed libero mauris, vel sagittis neque. Mauris lobortis posuere sapien eget tempus. Sed scelerisque viverra scelerisque. Proin pharetra, tortor in adipiscing egestas, ante massa ultrices tellus, vitae molestie enim ante id diam. Aenean auctor mi a massa aliquet et facilisis nisi dignissim. Proin mauris turpis, fringilla et viverra ut, porta ac massa. Nulla adipiscing tincidunt metus, eget faucibus enim luctus interdum. Suspendisse tortor nibh, elementum ut dictum ac, ultricies quis nulla. Donec dictum, felis ac fermentum facilisis, augue dui mattis orci, ac feugiat mauris ante sit amet ligula. Nullam in dolor velit, non consectetur nisl. Nunc nec risus ante. Maecenas sapien dolor, faucibus a condimentum nec, luctus ut nulla. Donec feugiat ullamcorper risus. Quisque consequat pharetra velit, nec venenatis nibh pretium vitae. Mauris tempor tincidunt sagittis.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elit in est volutpat laoreet. Sed in turpis id odio molestie commodo et et felis. Praesent at magna mauris, at rutrum lacus. Fusce eu dictum erat. Etiam tellus quam, aliquam a imperdiet non, tempor nec est. Proin quis est lectus. Sed facilisis mauris scelerisque erat auctor ut tempor tellus consectetur. In sed erat non massa tincidunt consectetur. Proin vitae sollicitudin dolor. Morbi euismod hendrerit lorem vitae facilisis. Curabitur suscipit odio in felis eleifend non porttitor dui auctor. Aenean sed libero mauris, vel sagittis neque. Mauris lobortis posuere sapien eget tempus. Sed scelerisque viverra scelerisque. Proin pharetra, tortor in adipiscing egestas, ante massa ultrices tellus, vitae molestie enim ante id diam. Aenean auctor mi a massa aliquet et facilisis nisi dignissim. Proin mauris turpis, fringilla et viverra ut, porta ac massa. Nulla adipiscing tincidunt metus, eget faucibus enim luctus interdum. Suspendisse tortor nibh, elementum ut dictum ac, ultricies quis nulla. Donec dictum, felis ac fermentum facilisis, augue dui mattis orci, ac feugiat mauris ante sit amet ligula. Nullam in dolor velit, non consectetur nisl. Nunc nec risus ante. Maecenas sapien dolor, faucibus a condimentum nec, luctus ut nulla. Donec feugiat ullamcorper risus. Quisque consequat pharetra velit, nec venenatis nibh pretium vitae. Mauris tempor tincidunt sagittis.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elit in est volutpat laoreet. Sed in turpis id odio molestie commodo et et felis. Praesent at magna mauris, at rutrum lacus. Fusce eu dictum erat. Etiam tellus quam, aliquam a imperdiet non, tempor nec est. Proin quis est lectus. Sed facilisis mauris scelerisque erat auctor ut tempor tellus consectetur. In sed erat non massa tincidunt consectetur. Proin vitae sollicitudin dolor. Morbi euismod hendrerit lorem vitae facilisis. Curabitur suscipit odio in felis eleifend non porttitor dui auctor. Aenean sed libero mauris, vel sagittis neque. Mauris lobortis posuere sapien eget tempus. Sed scelerisque viverra scelerisque. Proin pharetra, tortor in adipiscing egestas, ante massa ultrices tellus, vitae molestie enim ante id diam. Aenean auctor mi a massa aliquet et facilisis nisi dignissim. Proin mauris turpis, fringilla et viverra ut, porta ac massa. Nulla adipiscing tincidunt metus, eget faucibus enim luctus interdum. Suspendisse tortor nibh, elementum ut dictum ac, ultricies quis nulla. Donec dictum, felis ac fermentum facilisis, augue dui mattis orci, ac feugiat mauris ante sit amet ligula. Nullam in dolor velit, non consectetur nisl. Nunc nec risus ante. Maecenas sapien dolor, faucibus a condimentum nec, luctus ut nulla. Donec feugiat ullamcorper risus. Quisque consequat pharetra velit, nec venenatis nibh pretium vitae. Mauris tempor tincidunt sagittis.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elit in est volutpat laoreet. Sed in turpis id odio molestie commodo et et felis. Praesent at magna mauris, at rutrum lacus. Fusce eu dictum erat. Etiam tellus quam, aliquam a imperdiet non, tempor nec est. Proin quis est lectus. Sed facilisis mauris scelerisque erat auctor ut tempor tellus consectetur. In sed erat non massa tincidunt consectetur. Proin vitae sollicitudin dolor. Morbi euismod hendrerit lorem vitae facilisis. Curabitur suscipit odio in felis eleifend non porttitor dui auctor. Aenean sed libero mauris, vel sagittis neque. Mauris lobortis posuere sapien eget tempus. Sed scelerisque viverra scelerisque. Proin pharetra, tortor in adipiscing egestas, ante massa ultrices tellus, vitae molestie enim ante id diam. Aenean auctor mi a massa aliquet et facilisis nisi dignissim. Proin mauris turpis, fringilla et viverra ut, porta ac massa. Nulla adipiscing tincidunt metus, eget faucibus enim luctus interdum. Suspendisse tortor nibh, elementum ut dictum ac, ultricies quis nulla. Donec dictum, felis ac fermentum facilisis, augue dui mattis orci, ac feugiat mauris ante sit amet ligula. Nullam in dolor velit, non consectetur nisl. Nunc nec risus ante. Maecenas sapien dolor, faucibus a condimentum nec, luctus ut nulla. Donec feugiat ullamcorper risus. Quisque consequat pharetra velit, nec venenatis nibh pretium vitae. Mauris tempor tincidunt sagittis.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elit in est volutpat laoreet. Sed in turpis id odio molestie commodo et et felis. Praesent at magna mauris, at rutrum lacus. Fusce eu dictum erat. Etiam tellus quam, aliquam a imperdiet non, tempor nec est. Proin quis est lectus. Sed facilisis mauris scelerisque erat auctor ut tempor tellus consectetur. In sed erat non massa tincidunt consectetur. Proin vitae sollicitudin dolor. Morbi euismod hendrerit lorem vitae facilisis. Curabitur suscipit odio in felis eleifend non porttitor dui auctor. Aenean sed libero mauris, vel sagittis neque. Mauris lobortis posuere sapien eget tempus. Sed scelerisque viverra scelerisque. Proin pharetra, tortor in adipiscing egestas, ante massa ultrices tellus, vitae molestie enim ante id diam. Aenean auctor mi a massa aliquet et facilisis nisi dignissim. Proin mauris turpis, fringilla et viverra ut, porta ac massa. Nulla adipiscing tincidunt metus, eget faucibus enim luctus interdum. Suspendisse tortor nibh, elementum ut dictum ac, ultricies quis nulla. Donec dictum, felis ac fermentum facilisis, augue dui mattis orci, ac feugiat mauris ante sit amet ligula. Nullam in dolor velit, non consectetur nisl. Nunc nec risus ante. Maecenas sapien dolor, faucibus a condimentum nec, luctus ut nulla. Donec feugiat ullamcorper risus. Quisque consequat pharetra velit, nec venenatis nibh pretium vitae. Mauris tempor tincidunt sagittis.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elit in est volutpat laoreet. Sed in turpis id odio molestie commodo et et felis. Praesent at magna mauris, at rutrum lacus. Fusce eu dictum erat. Etiam tellus quam, aliquam a imperdiet non, tempor nec est. Proin quis est lectus. Sed facilisis mauris scelerisque erat auctor ut tempor tellus consectetur. In sed erat non massa tincidunt consectetur. Proin vitae sollicitudin dolor. Morbi euismod hendrerit lorem vitae facilisis. Curabitur suscipit odio in felis eleifend non porttitor dui auctor. Aenean sed libero mauris, vel sagittis neque. Mauris lobortis posuere sapien eget tempus. Sed scelerisque viverra scelerisque. Proin pharetra, tortor in adipiscing egestas, ante massa ultrices tellus, vitae molestie enim ante id diam. Aenean auctor mi a massa aliquet et facilisis nisi dignissim. Proin mauris turpis, fringilla et viverra ut, porta ac massa. Nulla adipiscing tincidunt metus, eget faucibus enim luctus interdum. Suspendisse tortor nibh, elementum ut dictum ac, ultricies quis nulla. Donec dictum, felis ac fermentum facilisis, augue dui mattis orci, ac feugiat mauris ante sit amet ligula. Nullam in dolor velit, non consectetur nisl. Nunc nec risus ante. Maecenas sapien dolor, faucibus a condimentum nec, luctus ut nulla. Donec feugiat ullamcorper risus. Quisque consequat pharetra velit, nec venenatis nibh pretium vitae. Mauris tempor tincidunt sagittis.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elit in est volutpat laoreet. Sed in turpis id odio molestie commodo et et felis. Praesent at magna mauris, at rutrum lacus. Fusce eu dictum erat. Etiam tellus quam, aliquam a imperdiet non, tempor nec est. Proin quis est lectus. Sed facilisis mauris scelerisque erat auctor ut tempor tellus consectetur. In sed erat non massa tincidunt consectetur. Proin vitae sollicitudin dolor. Morbi euismod hendrerit lorem vitae facilisis. Curabitur suscipit odio in felis eleifend non porttitor dui auctor. Aenean sed libero mauris, vel sagittis neque. Mauris lobortis posuere sapien eget tempus. Sed scelerisque viverra scelerisque. Proin pharetra, tortor in adipiscing egestas, ante massa ultrices tellus, vitae molestie enim ante id diam. Aenean auctor mi a massa aliquet et facilisis nisi dignissim. Proin mauris turpis, fringilla et viverra ut, porta ac massa. Nulla adipiscing tincidunt metus, eget faucibus enim luctus interdum. Suspendisse tortor nibh, elementum ut dictum ac, ultricies quis nulla. Donec dictum, felis ac fermentum facilisis, augue dui mattis orci, ac feugiat mauris ante sit amet ligula. Nullam in dolor velit, non consectetur nisl. Nunc nec risus ante. Maecenas sapien dolor, faucibus a condimentum nec, luctus ut nulla. Donec feugiat ullamcorper risus. Quisque consequat pharetra velit, nec venenatis nibh pretium vitae. Mauris tempor tincidunt sagittis.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elit in est volutpat laoreet. Sed in turpis id odio molestie commodo et et felis. Praesent at magna mauris, at rutrum lacus. Fusce eu dictum erat. Etiam tellus quam, aliquam a imperdiet non, tempor nec est. Proin quis est lectus. Sed facilisis mauris scelerisque erat auctor ut tempor tellus consectetur. In sed erat non massa tincidunt consectetur. Proin vitae sollicitudin dolor. Morbi euismod hendrerit lorem vitae facilisis. Curabitur suscipit odio in felis eleifend non porttitor dui auctor. Aenean sed libero mauris, vel sagittis neque. Mauris lobortis posuere sapien eget tempus. Sed scelerisque viverra scelerisque. Proin pharetra, tortor in adipiscing egestas, ante massa ultrices tellus, vitae molestie enim ante id diam. Aenean auctor mi a massa aliquet et facilisis nisi dignissim. Proin mauris turpis, fringilla et viverra ut, porta ac massa. Nulla adipiscing tincidunt metus, eget faucibus enim luctus interdum. Suspendisse tortor nibh, elementum ut dictum ac, ultricies quis nulla. Donec dictum, felis ac fermentum facilisis, augue dui mattis orci, ac feugiat mauris ante sit amet ligula. Nullam in dolor velit, non consectetur nisl. Nunc nec risus ante. Maecenas sapien dolor, faucibus a condimentum nec, luctus ut nulla. Donec feugiat ullamcorper risus. Quisque consequat pharetra velit, nec venenatis nibh pretium vitae. Mauris tempor tincidunt sagittis.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elit in est volutpat laoreet. Sed in turpis id odio molestie commodo et et felis. Praesent at magna mauris, at rutrum lacus. Fusce eu dictum erat. Etiam tellus quam, aliquam a imperdiet non, tempor nec est. Proin quis est lectus. Sed facilisis mauris scelerisque erat auctor ut tempor tellus consectetur. In sed erat non massa tincidunt consectetur. Proin vitae sollicitudin dolor. Morbi euismod hendrerit lorem vitae facilisis. Curabitur suscipit odio in felis eleifend non porttitor dui auctor. Aenean sed libero mauris, vel sagittis neque. Mauris lobortis posuere sapien eget tempus. Sed scelerisque viverra scelerisque. Proin pharetra, tortor in adipiscing egestas, ante massa ultrices tellus, vitae molestie enim ante id diam. Aenean auctor mi a massa aliquet et facilisis nisi dignissim. Proin mauris turpis, fringilla et viverra ut, porta ac massa. Nulla adipiscing tincidunt metus, eget faucibus enim luctus interdum. Suspendisse tortor nibh, elementum ut dictum ac, ultricies quis nulla. Donec dictum, felis ac fermentum facilisis, augue dui mattis orci, ac feugiat mauris ante sit amet ligula. Nullam in dolor velit, non consectetur nisl. Nunc nec risus ante. Maecenas sapien dolor, faucibus a condimentum nec, luctus ut nulla. Donec feugiat ullamcorper risus. Quisque consequat pharetra velit, nec venenatis nibh pretium vitae. Mauris tempor tincidunt sagittis.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elit in est volutpat laoreet. Sed in turpis id odio molestie commodo et et felis. Praesent at magna mauris, at rutrum lacus. Fusce eu dictum erat. Etiam tellus quam, aliquam a imperdiet non, tempor nec est. Proin quis est lectus. Sed facilisis mauris scelerisque erat auctor ut tempor tellus consectetur. In sed erat non massa tincidunt consectetur. Proin vitae sollicitudin dolor. Morbi euismod hendrerit lorem vitae facilisis. Curabitur suscipit odio in felis eleifend non porttitor dui auctor. Aenean sed libero mauris, vel sagittis neque. Mauris lobortis posuere sapien eget tempus. Sed scelerisque viverra scelerisque. Proin pharetra, tortor in adipiscing egestas, ante massa ultrices tellus, vitae molestie enim ante id diam. Aenean auctor mi a massa aliquet et facilisis nisi dignissim. Proin mauris turpis, fringilla et viverra ut, porta ac massa. Nulla adipiscing tincidunt metus, eget faucibus enim luctus interdum. Suspendisse tortor nibh, elementum ut dictum ac, ultricies quis nulla. Donec dictum, felis ac fermentum facilisis, augue dui mattis orci, ac feugiat mauris ante sit amet ligula. Nullam in dolor velit, non consectetur nisl. Nunc nec risus ante. Maecenas sapien dolor, faucibus a condimentum nec, luctus ut nulla. Donec feugiat ullamcorper risus. Quisque consequat pharetra velit, nec venenatis nibh pretium vitae. Mauris tempor tincidunt sagittis.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elit in est volutpat laoreet. Sed in turpis id odio molestie commodo et et felis. Praesent at magna mauris, at rutrum lacus. Fusce eu dictum erat. Etiam tellus quam, aliquam a imperdiet non, tempor nec est. Proin quis est lectus. Sed facilisis mauris scelerisque erat auctor ut tempor tellus consectetur. In sed erat non massa tincidunt consectetur. Proin vitae sollicitudin dolor. Morbi euismod hendrerit lorem vitae facilisis. Curabitur suscipit odio in felis eleifend non porttitor dui auctor. Aenean sed libero mauris, vel sagittis neque. Mauris lobortis posuere sapien eget tempus. Sed scelerisque viverra scelerisque. Proin pharetra, tortor in adipiscing egestas, ante massa ultrices tellus, vitae molestie enim ante id diam. Aenean auctor mi a massa aliquet et facilisis nisi dignissim. Proin mauris turpis, fringilla et viverra ut, porta ac massa. Nulla adipiscing tincidunt metus, eget faucibus enim luctus interdum. Suspendisse tortor nibh, elementum ut dictum ac, ultricies quis nulla. Donec dictum, felis ac fermentum facilisis, augue dui mattis orci, ac feugiat mauris ante sit amet ligula. Nullam in dolor velit, non consectetur nisl. Nunc nec risus ante. Maecenas sapien dolor, faucibus a condimentum nec, luctus ut nulla. Donec feugiat ullamcorper risus. Quisque consequat pharetra velit, nec venenatis nibh pretium vitae. Mauris tempor tincidunt sagittis.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elit in est volutpat laoreet. Sed in turpis id odio molestie commodo et et felis. Praesent at magna mauris, at rutrum lacus. Fusce eu dictum erat. Etiam tellus quam, aliquam a imperdiet non, tempor nec est. Proin quis est lectus. Sed facilisis mauris scelerisque erat auctor ut tempor tellus consectetur. In sed erat non massa tincidunt consectetur. Proin vitae sollicitudin dolor. Morbi euismod hendrerit lorem vitae facilisis. Curabitur suscipit odio in felis eleifend non porttitor dui auctor. Aenean sed libero mauris, vel sagittis neque. Mauris lobortis posuere sapien eget tempus. Sed scelerisque viverra scelerisque. Proin pharetra, tortor in adipiscing egestas, ante massa ultrices tellus, vitae molestie enim ante id diam. Aenean auctor mi a massa aliquet et facilisis nisi dignissim. Proin mauris turpis, fringilla et viverra ut, porta ac massa. Nulla adipiscing tincidunt metus, eget faucibus enim luctus interdum. Suspendisse tortor nibh, elementum ut dictum ac, ultricies quis nulla. Donec dictum, felis ac fermentum facilisis, augue dui mattis orci, ac feugiat mauris ante sit amet ligula. Nullam in dolor velit, non consectetur nisl. Nunc nec risus ante. Maecenas sapien dolor, faucibus a condimentum nec, luctus ut nulla. Donec feugiat ullamcorper risus. Quisque consequat pharetra velit, nec venenatis nibh pretium vitae. Mauris tempor tincidunt sagittis.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elit in est volutpat laoreet. Sed in turpis id odio molestie commodo et et felis. Praesent at magna mauris, at rutrum lacus. Fusce eu dictum erat. Etiam tellus quam, aliquam a imperdiet non, tempor nec est. Proin quis est lectus. Sed facilisis mauris scelerisque erat auctor ut tempor tellus consectetur. In sed erat non massa tincidunt consectetur. Proin vitae sollicitudin dolor. Morbi euismod hendrerit lorem vitae facilisis. Curabitur suscipit odio in felis eleifend non porttitor dui auctor. Aenean sed libero mauris, vel sagittis neque. Mauris lobortis posuere sapien eget tempus. Sed scelerisque viverra scelerisque. Proin pharetra, tortor in adipiscing egestas, ante massa ultrices tellus, vitae molestie enim ante id diam. Aenean auctor mi a massa aliquet et facilisis nisi dignissim. Proin mauris turpis, fringilla et viverra ut, porta ac massa. Nulla adipiscing tincidunt metus, eget faucibus enim luctus interdum. Suspendisse tortor nibh, elementum ut dictum ac, ultricies quis nulla. Donec dictum, felis ac fermentum facilisis, augue dui mattis orci, ac feugiat mauris ante sit amet ligula. Nullam in dolor velit, non consectetur nisl. Nunc nec risus ante. Maecenas sapien dolor, faucibus a condimentum nec, luctus ut nulla. Donec feugiat ullamcorper risus. Quisque consequat pharetra velit, nec venenatis nibh pretium vitae. Mauris tempor tincidunt sagittis.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elit in est volutpat laoreet. Sed in turpis id odio molestie commodo et et felis. Praesent at magna mauris, at rutrum lacus. Fusce eu dictum erat. Etiam tellus quam, aliquam a imperdiet non, tempor nec est. Proin quis est lectus. Sed facilisis mauris scelerisque erat auctor ut tempor tellus consectetur. In sed erat non massa tincidunt consectetur. Proin vitae sollicitudin dolor. Morbi euismod hendrerit lorem vitae facilisis. Curabitur suscipit odio in felis eleifend non porttitor dui auctor. Aenean sed libero mauris, vel sagittis neque. Mauris lobortis posuere sapien eget tempus. Sed scelerisque viverra scelerisque. Proin pharetra, tortor in adipiscing egestas, ante massa ultrices tellus, vitae molestie enim ante id diam. Aenean auctor mi a massa aliquet et facilisis nisi dignissim. Proin mauris turpis, fringilla et viverra ut, porta ac massa. Nulla adipiscing tincidunt metus, eget faucibus enim luctus interdum. Suspendisse tortor nibh, elementum ut dictum ac, ultricies quis nulla. Donec dictum, felis ac fermentum facilisis, augue dui mattis orci, ac feugiat mauris ante sit amet ligula. Nullam in dolor velit, non consectetur nisl. Nunc nec risus ante. Maecenas sapien dolor, faucibus a condimentum nec, luctus ut nulla. Donec feugiat ullamcorper risus. Quisque consequat pharetra velit, nec venenatis nibh pretium vitae. Mauris tempor tincidunt sagittis.Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse ac elit in est volutpat laoreet. Sed in turpis id odio molestie commodo et et felis. Praesent at magna mauris, at rutrum lacus. Fusce eu dictum erat. Etiam tellus quam, aliquam a imperdiet non, tempor nec est. Proin quis est lectus. Sed facilisis mauris scelerisque erat auctor ut tempor tellus consectetur. In sed erat non massa tincidunt consectetur. Proin vitae sollicitudin dolor. Morbi euismod hendrerit lorem vitae facilisis. Curabitur suscipit odio in felis eleifend non porttitor dui auctor. Aenean sed libero mauris, vel sagittis neque. Mauris lobortis posuere sapien eget tempus. Sed scelerisque viverra scelerisque. Proin pharetra, tortor in adipiscing egestas, ante massa ultrices tellus, vitae molestie enim ante id diam. Aenean auctor mi a massa aliquet et facilisis nisi dignissim. Proin mauris turpis, fringilla et viverra ut, porta ac massa. Nulla adipiscing tincidunt metus, eget faucibus enim luctus interdum. Suspendisse tortor nibh, elementum ut dictum ac, ultricies quis nulla. Donec dictum, felis ac fermentum facilisis, augue dui mattis orci, ac feugiat mauris ante sit amet ligula. Nullam in dolor velit, non consectetur nisl. Nunc nec risus ante. Maecenas sapien dolor, faucibus a condimentum nec, luctus ut nulla. Donec feugiat ullamcorper risus. Quisque consequat pharetra velit, nec venenatis nibh pretium vitae. Mauris tempor tincidunt sagittis.";

NSString *txt2 = @"Quisque nec dui mauris, eget vestibulum arcu. Duis sed lacus lectus. Proin fermentum sapien eer conubia nostra, per inceptos himenaeos Quisque nec dui mauris, eget vestibulum arcu. Duis sed lacus lectus. Proin fermentum sapien eer conubia nostra, per inceptos himenaeos Quisque nec dui mauris, eget vestibulum arcu. Duis sed lacus lectus.";

NSString *txt3 = @"Suspendisse id arcu malesuada sem varius bibendum eu sit amet diam. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Curabitur quis tortor tristique nibh hendrerit luctus. Nullam nec augue quis libero malesuada blandit. Suspendisse et tellus dolor, eleifend condimentum augue. Aenean interdum, lorem a tincidunt laoreet, nisi neque dictum mi, ac laoreet lacus sem iaculis lorem. Cras ullamcorper mauris et quam euismod ac semper libero volutpat. Etiam massa risus, lobortis facilisis hendrerit eu, blandit sit amet nisi. Quisque sit amet nunc vel nunc aliquet dignissim in eget est. Aliquam erat volutpat. Donec varius suscipit dolor nec placerat. Ut eu dui vel nisl pretium sagittis nec quis risus. Suspendisse ut arcu enim, sit amet posuere libero. In dui magna, viverra id dictum eget, ornare et erat. Phasellus sit amet mi a magna iaculis scelerisque id eget turpis. Nam vitae mauris nunc. Curabitur erat ligula, consequat sit amet blandit ut, luctus in dui. Pellentesque non dignissim neque. Mauris mollis, lorem a aliquam faucibus, mi libero dignissim nisi, non luctus tortor mi vel magna. Vestibulum pellentesque, quam id consectetur iaculis, ipsum nibh aliquam nisi, eget tempor metus ipsum at neque. Vivamus elit urna, vestibulum varius pulvinar sit amet, vehicula quis ligula. Sed semper urna a erat pretium ut semper sem euismod.";

NSArray *textos = [[NSArray alloc] initWithObjects:txt1,txt2,txt3,nil];

scrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0,0,768,1024)];

scrollView.pagingEnabled = YES;

[scrollView setIndicatorStyle:UIScrollViewIndicatorStyleWhite];

int numberOfViews = 3;
for (int i = 0; i < numberOfViews; i++) {
    CGFloat xOrigin = i * 768;
    UITextView *textView = [[UITextView alloc] initWithFrame:CGRectMake(xOrigin,0,768,1024)];
    [textView setText:[textos objectAtIndex:i]];

    CGRect frameText = textView.frame;
    frameText.size.height = textView.contentSize.height;
    textView.frame = frameText;

    [scrollView addSubview:textView];
    [textView release];
}

scrollView.contentSize = CGSizeMake(numberOfViews * 768, 1024);

[self.view addSubview:scrollView]; 
```

并显示一个带有页面的 UIScrollView，但第一个文本最大，然后是 1024 像素的高度。如何使用 txt2 剪切文本并将剩余部分放在另一个页面中？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:18:12.720

我不知道是否有任何内置功能可以做到这一点，但你可以试试这个东西

```
UIFont *font = [UIFont systemFontOfSize:14.0];
NSArray *arrTxt1 = [txt1 componentsSeparatedByString:@" "];

NSMutableString *restOFStr = [[NSMutableString alloc] init];
NSMutableString *initialStr = [[NSMutableString alloc] init];
BOOL gotStr = NO;
for (NSString *tStr in arrTxt1) {
    if (gotStr) {
        [initialStr appendString:tStr];
        CGSize size = [initialStr sizeWithFont:font constrainedToSize:CGSizeMake(768, MAXFLOAT) lineBreakMode:NSLineBreakByWordWrapping];
        if(size.height > 1024){
            // Displayed in first page
            [initialStr deleteCharactersInRange:NSMakeRange(initialStr.length-tStr.length, tStr.length)];
            //Add tStr to restOfStr
            [restOFStr appendString:tStr];
            gotStr = YES;
        }
        else {
            [initialStr appendString:@" "];
        }
    }
    else {
        //Collect the rest of string
        [restOFStr appendString:tStr];
    }
} 
```

**编辑**

我在这里使用的逻辑是获取适合 768x1024 UITextView 的字符串。
为此，我将您的字符串划分为由空格分隔的组件，即如果您的字符串是`"Hello how are you?"` ，那么数组将具有

```
arrTxt1[0]---->Hello
arrTxt1[1]---->how
arrTxt1[2]---->are
arrTxt1[3]---->you? 
```

然后我正在计算大小并检查高度是否小于 1024，然后我附加字符串，在它超过 1024 的地方我停止附加。最后，您拥有`initialStr`适合 768x1024 和`restOFStr`剩余字符串的内容。

# c# - 使用 LINQ 的 NullReferenceException

> ID：13821846
> 
> 赞同：0
> 
> 时间：2012-12-11T14:00:14.247
> 
> 标签：c#, linq, if-statement

我无法让我的 linq 线路正常工作。

```
var result = databaseObjects.Where(dbo => dbo.GetType() == typeof(Model.DatabaseTable) ? (dbo as Model.DatabaseTable).FullName.Equals(name) : dbo.Name.Equals(name)); 
```

我试图使用这个[问题](https://stackoverflow.com/questions/443044/if-else-in-linq)的答案中的方法来使其工作。我想我知道出了什么问题，DatabaseObject 是一个抽象类，我想避免在 DatabaseTable 以外的所有东西上使用 FullName 属性，但据我所见，它确实会检查它。

编辑：错误是：

```
System.NullReferenceException was unhandled
{"Object reference not set to an instance of an object."} 
```

问题是我忘记分配 DatabaseObject.Name，DatabaseTableObject.FullName 已分配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:35:06.667

看起来好像或者`FullName`在`Name`您`null`的一个 dbo 对象上。要验证将您的代码更改为：

```
var result = databaseObjects.Where(dbo => dbo.GetType() == typeof(Model.DatabaseTable) ? (dbo as Model.DatabaseTable).FullName == name : dbo.Name == name); 
```

它不应该抛出异常。

# c - 如何使用 C 从 ImageMagick Wand 中提取 PPM 图像属性？

> ID：13821851
> 
> 赞同：1
> 
> 时间：2012-12-11T14:01:21.047
> 
> 标签：c, image, imagemagick

为了将几乎任何类型的图像转换为 PPM，我使用了 ImageMagick 的 wand API。如何从魔杖中提取宽度、高度、modval 和原始 RGB 数据的 PPM 属性？这是一些骨架代码。

非常感谢您阅读这个问题。

```
 /* Read an image. */
  MagickWandGenesis();
  magick_wand = NewMagickWand();
  status = MagickReadImage(magick_wand, argv[1]);
  if (status == MagickFalse)
    ThrowWandException(magick_wand);

  /* TODO convert to P6 PPM */

  /* TODO get PPM properties */
  ppm->width = ...
  ppm->height = ...
  ppm->modval = 3 * ppm->width;
  ppm->data = malloc(ppm->width * ppm->height * 3);
  /* TODO fill ppm->data */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:29:42.173

[来自 ImageMagick 论坛](http://www.imagemagick.org/discourse-server/viewtopic.php?f=6&t=18262#p69822)

```
width = MagickGetImageWidth(magick_wand);
height = MagickGetImageHeight(magick_wand);
ppm->width = width;
ppm->height = height;
ppm->modval = 3 * width;
ppm->data = malloc (3 * width * height);
status = MagickExportImagePixels(magick_wand, 0, 0, width, height, "RGB",
            CharPixel, ppm->data); 
```

# java - 在 Linux 上调用 JNI 代码时出现奇怪的崩溃；我是否正确编译了我的共享库？

> ID：13821854
> 
> 赞同：3
> 
> 时间：2012-12-11T14:00:30.223
> 
> 标签：java, c, linux, gcc, java-native-interface

**这似乎只在使用 Java 1.7 时发生，无论是与 Oracle 还是 OpenJDK JRE 一起使用。使用 Java 1.6（Oracle 和 OpenJDK）时，一切正常。**

前段时间，我尝试在 Linux 下编译一个 JNI 共享库（用于 Java 电影播放器​​的 LibVLC 的包装器）。但是，当调用某些本机函数时，JVM 会在零星和任意时刻崩溃，错误日志引用`_IO_file_underflow`libc.so 中的函数作为有问题的框架。

最终我发现我只是在编译时遗漏了一些 GCC 标志，这些问题可能是由某些优化引起的，或者是 JVM 没有预料到的。在遵循[本指南](http://weblogs.java.net/blog/kellyohair/archive/2006/01/compilation_of.html)和对[这个问题](https://stackoverflow.com/questions/3950635/how-to-compile-dynamic-library-for-a-jni-application-on-linux)的回答之后，我在编译命令中添加了一些标志，例如 `-fno-strict-aliasing`和，一切正常。`-pthread`

至少，这在 OpenSuSe 12.1 和 OpenJDK 1.6 下有效。不幸的是，在升级到 OpenSuse 12.2 和 OpenJDK 1.7 之后，应用程序再次开始崩溃，并出现以下熟悉的错误消息：

```
#
[thread -1984603328 also had an error]# A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0xb770ff38, pid=19354, tid=2309835584
#
# JRE version: 7.0_09-b30
# Java VM: OpenJDK Client VM (23.2-b09 mixed mode linux-x86 )
# Problematic frame:
# C  [libc.so.6+0x127f38]  _IO_file_underflow+0x68
#
# Failed to write core dump. Core dumps have been disabled. To enable core dumping, try "ulimit -c unlimited" before starting Java again
#
# An error report file with more information is saved as:
# /usr/fids/build_vlcplayer/hs_err_pid19354.log

#
# If you would like to submit a bug report, please include
# instructions on how to reproduce the bug and visit:
#   http://icedtea.classpath.org/bugzilla
# 
```

我正在使用以下命令进行编译（许多标志可能是多余的）：

```
gcc -I/usr/lib/jvm/java-1.7.0-openjdk-1.7.0/include/ -I/usr/lib/jvm/java-1.7.0-openjdk-1.7.0/include/linux/ -fno-strict-aliasing -fno-omit-frame-pointer -fPIC -pthread -static-libgcc -D_REENTRANT -Di586 -DARCH='"I586"' -DLINUX -D_LARGEFILE64_SOURCE -D_GNU_SOURCE -D_LITTLE_ENDIAN  -Wall -Wno-unused-parameter -DDEBUG_MODE -shared -lvlc -lc -lX11 movieplayer.c -Wl,-soname,movieplayer.so -o movieplayer.so 
```

我在 GCC 3.3 版和 4.7 版都试过了。

由于相同的代码在 Windows（使用 Oracle JDK 1.6 或 1.7）或 OpenSuSe 12.1（使用 OpenJDK 1.6）下运行良好，我认为 movieplayer.c 的实际源代码不相关；尽管如此，这是发生崩溃的部分：

```
/** The LibVLC instance.*/
static libvlc_instance_t * vlcInstance = NULL;

/** The media object representing the video. */
static libvlc_media_t * media = NULL;

/** The media player. */
static libvlc_media_player_t * mediaPlayer = NULL;

...

const char * fname = str + 1;

DEBUGMSG("Opening file: '%s'\n", fname);

// Create a VLC media object for this file.
media = libvlc_media_new_path (vlcInstance, fname);

if(media)
{
    // Parse the media. This allows fetching duration and track info.
    DEBUGMSG("Parsing media.");
    libvlc_media_parse(media);  // <-- Crash occurs at this point.

    // Create the media player.
    DEBUGMSG("Creating a media player.");
    mediaPlayer = libvlc_media_player_new_from_media(media);

    ...
}

... 
```

当我修改此代码时，在调用其他 LibVLC 函数或在一种情况下调用 POSIX 函数时，会在不同的时刻发生相同的崩溃`sleep`。

基本上我的问题是：我是否认为这些崩溃是因为我没有正确编译应用程序而导致的？如果是这样，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T16:03:14.613

这是关于同一问题的讨论： [https](https://github.com/caprica/vlcj/issues/62) ://github.com/caprica/vlcj/issues/62有一个解决方法：在 VLC 中禁用 LUA。不知何故，Ubuntu的包装打破了它。也有参考进一步讨论它的页面。另请参阅[https://bugs.launchpad.net/ubuntu/+source/lua5.1/+bug/1136432](https://bugs.launchpad.net/ubuntu/+source/lua5.1/+bug/1136432)。

# vba - 需要使用vb脚本生成excel吗？

> ID：13821857
> 
> 赞同：0
> 
> 时间：2012-12-11T14:02:34.993
> 
> 标签：vba, vbscript, qtp

我正在尝试使用我在 vb 脚本中开发的驱动程序脚本运行测试用例。（下面是启动 QTP 的部分代码），并且启动的 qtp 脚本会生成 XLS 报告。现在的问题是，当我使用 vb 驱动程序脚本调用测试套件时，它会创建包含结果行和空白行的文件（最多 65635）。这个问题导致结果文件（.XLS）以 MB 为单位，其中不应包含空白行并且必须以 KB 为单位。我还直接使用 QTP 检查了正在运行的测试用例，但我没有遇到任何问题，并且大小以 KB 为单位。

```
 Dim qtApp, Test_Path
            Dim BasePath
            Dim qtTest
            BasePath = "some path"
            Set qtApp = CreateObject("QuickTest.Application")
            qtApp.Launch
            qtApp.Visible = True
            Test_Path = BasePath & "\" & scriptname
            qtApp.Open Test_Path, True              
            Set qtTest = qtApp.Test
            qtTest.Run
                 qtTest.Close
            qtApp.Quit
            Set qtTest = Nothing
            Set qtApp = Nothing 
```

请有人告诉我为什么使用外部 VB 运行的相同脚本会产生如此巨大的结果文件？

提前致谢，

普里扬克·沙阿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T08:40:30.837

在运行时实现临时表创建并生成 excel 表。还要确保在声明的每个 excel 对象上都没有设置任何内容。

`Set objExcel = Nothing`

# php - 数组值之间的差异

> ID：13821861
> 
> 赞同：1
> 
> 时间：2012-12-11T14:06:07.947
> 
> 标签：php, arrays, multidimensional-array

更新

使用此代码，我可以检索差异，但我只能看到查询的第一个运动员。为什么？while 不应该循环 x 次，其中 x 是结果数？

```
function difference() {

global $db;

$result = $db->query("
        SELECT *
        FROM maxithlon
        WHERE owner = '". $_SESSION[teamid] ."'
        AND season = '". $this->season ."'
        AND week = '". $this->currentWeek ."'
        ORDER BY RAND();
");

while ($row = $result->fetch_assoc()) {

$result2 = $db->query("
        SELECT *
        FROM maxithlon
        WHERE owner = '". $_SESSION[teamid] ."'
        AND season = '". $this->season ."'
        AND week = '". $this->currentWeek ."-1'
        AND athleteId = '". $row[athleteId] ."'
");

while ($row2 = $result2->fetch_assoc()) {

    $difference[$row2[athleteId]][form] = $row[form] - $row2[form];
    $difference[$row2[athleteId]][maxid] = $row[maxid] - $row2[maxid];
    $difference[experience] = $row[experience] - $row2[experience];
    $difference[mood] = $row[mood] - $row2[mood];
    $difference[strenght] = $row[strenght] - $row2[strenght];
    $difference[stamina] = $row[stamina] - $row2[stamina];
    $difference[speed] = $row[speed] - $row2[speed];    
    $difference[agility] = $row[agility] - $row2[agility];  
    $difference[jump] = $row[jump] - $row2[jump];
    $difference[throws] = $row[throws] - $row2[throws];
    $difference[specialty1] = $row[specialty1] - $row2[specialty1];
    $difference[specialty2] = $row[specialty2] - $row2[specialty2];
    $difference[height] = $row[height] - $row2[height];
    $difference[weight] = $row[weight] - $row2[weight];
    $difference[fans] = $row[fans] - $row2[fans];
    $difference[wage] = $row[wage] - $row2[wage];

return($difference);
    }
    }

} 
```

我一直在寻找一个可以满足我需求的答案，但我找不到它。

我有一个数据库，其中包含运动员数据的“maxithlon”表。这两个函数被定义为检索运动员的数据并将它们放入一个数组中。第一个检索上周的数据，第二个检索当前一周的数据。

我需要比较两个数组以获得两周的值之间的差异。你看到一个可能的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:17:14.407

您可以做的是创建一个包含所有要查找值之间差异的键的数组。

```
$criteria = array('stamina', 'speed', 'agility', /*...*/);
$differences = array();
foreach($criteria as $key)
{
    $differences[$key] = $current[$key] - $last[$key];
} 
```

假设 $current 和 $last 是包含有关给定运动员当前和前一周结果的数据的数组（因此您在评论中发布的数组的第二级）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:36:43.170

您可以使用`array_diff()`. 这是[手册](http://php.net/manual/en/function.array-diff.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T14:45:42.933

如果满足您的需要，只需遍历数组并执行比较操作，因为没有直接功能

# java - 从 ConcurrentHashMap 轮询

> ID：13821865
> 
> 赞同：1
> 
> 时间：2012-12-11T14:04:37.550
> 
> 标签：java, concurrency

我有一个像`Map<Key, Set<Value>>`. 我正在尝试实现以下场景：

1.  几个生产者更新此映射，将新值添加到已经存在的键或新键（在这种情况下会创建新的映射条目）。
2.  消费者定期从映射中*轮询*一些有限数量的条目并将它们传递给处理器。

这是我的看法：

```
private static final MAX_UPDATES_PER_PASS = 100;

private final ConcurrentHashMap<Key, Set<Value>> updates = new ConcurrentHashMap<Key, Set<Value>>();

@Override
public void updatesReceived(Key key, Set<Value> values) {
    Set<Value> valuesSet = updates.get(key);
    if (valuesSet == null){
        valuesSet = Collections.newSetFromMap(new ConcurrentHashMap<Value, Boolean>());
        Set<Value> previousValues = updates.putIfAbsent(key, valuesSet);
        if (previousValues != null){
            valuesSet = previousValues;
        }
    }
    valuesSet.addAll(values);
}

private class UpdatesProcessor implements Runnable {

    @Override
    public void run() {
        int updatesProcessed = 0;
        Map<Key, Set<Value>> valuesToProcess = new HashMap<Key, Set<Value>>();
        Iterator<Map.Entry<Key, Set<Value>>> iterator = updates.entrySet().iterator();
        while(iterator.hasNext() && updatesProcessed < MAX_UPDATES_PER_PASS) {
            Map.Entry<Key, Set<Value>> next = iterator.next();
            iterator.remove(); // <-- here 
            Key key = next.getKey();
            Set<Value> values = valuesToProcess.get(key);
            if (values == null){
                values = new HashSet<Value>();
                valuesToProcess.put(key, values);
            }
            values.addAll(next.getValue());
            updatesProcessed++;
        }
        if (!valuesToProcess.isEmpty()){
            process(valuesToProcess);
        }
    }
} 
```

该方法`updatesRecevied()`由来自任意线程的值的生产者调用。计划通过`UpdatesProcessor`定期执行`ScheduledExecutorService`，因此它也可以从任意线程调用。

每个值都应该只处理**一次**。不多不少。我不在乎一个值迟早会被处理，但最终它应该。

我希望它又快又猛，所以我不想把`synchronize`所有事情都搞砸。

这个带有迭代器的笨拙代码`UpdatesProcessor`服务于一个单一的目标，如果有类似`ConcurrentHashMap.poll()`. 但是没有。

所以，对于问题。首先，这是否保证有效？在我调用`iterator.remove()`该条目后，该条目将从地图中删除，并且每个附加值都会进入新条目的集合，对吗？

其次，我是不是把事情复杂化了？是否有一种通用的方法来处理这种场景（数据结构）？

# python - Queryset 对象没有属性“名称”

> ID：13821866
> 
> 赞同：1
> 
> 时间：2012-12-11T14:06:03.473
> 
> 标签：python, django

我正在处理我的第一个 django 项目，但在将数据库中的“类别”作为列表显示到网页上时遇到问题。我收到错误“对象没有属性'名称'。到目前为止我的代码是：

模型：

```
class Category(models.model):
    name = models.Charfield(max_length=128)

def __unicode__(self):
    return self.Name + ": " +str(self.id) 
```

意见：

```
from django.shortcuts import render_to_response, redirect
from forms.models import Form, Group, Flow, Gate, Field, Event, Category
from django.core.context_processors import csrf
from django.views.decorators.csrf import csrf_exempt
from django.http import HttpResponse

def homepage (request):

    CatName = Category.objects.order_by('id')

    output = {
        'category_name': CatName.Name,
    }

    return render_to_response('forms/formsummary.html', output) 
```

HTML：

```
<div>{{ category_name }}</div> 
```

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:37:43.150

在 Django 中，当您使用 ORM 查询对象时，有两种可能性（不包括每种情况均不返回任何内容）：

*   查询只返回一个对象：如果是这样，您使用管理器的 get() 方法进行查询。
*   查询返回一个集合：如果是这样，您使用 all()、filter() 或任何类似的方法进行查询。

在这种情况下，您的查询返回了*Category*对象的集合，您可以对此做一些事情，您可以使用列表推导生成仅包含名称的列表：

```
cnames = [c.name for c in Category.objects.all()] 
```

或者您可以使用 for 循环迭代列表并对每个对象执行您需要执行的任何操作。

Django 已经通过*id*字段对您的数据进行了排序，因此，我想在这种情况下无需指定排序。

稍后，当您的视图返回时，您可以将列表传递给您的模板并对其进行迭代以提取您需要的内容。

在您看来：

```
def get_categories(request):
    categories = Category.objects.all()
    context = {'categories': categories}
    return render_to_response('template.html', RequestContext(request, context)) 
```

然后，在您的模板中：

```
{% for c in categories %}
    <p>{{c.name}}</p>
{% endfor %} 
```

这里有一些有用的文档

*   [Django 模板](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs)
*   [Django 查询集](https://docs.djangoproject.com/en/dev/ref/models/querysets/)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:45:38.300

好像区分大小写，

```
def__unicode__(self):
  return self.Name + ": " +str(self.id)
              ^
              name 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T14:29:57.260

`CatName`是`Category`实例的集合。该`CatName`对象没有`name`属性，因为它不是`Category`对象。它包含`Category`对象。

您可以遍历您的集合并显示每个类别名称：

```
for category in CatName:
  print category.name 
```

即使您还没有完全掌握它，至少阅读[QuerySet文档也是一件好事。](https://docs.djangoproject.com/en/dev/ref/models/querysets/#queryset-api)

如果您只想要最新的类别，您可以执行以下操作：

```
def homepage (request):

    most_recent_category = Category.objects.order_by('-id')[0]

    output = {
        'category_name': most_recent_category.name
    }

    return render_to_response('forms/formsummary.html', output) 
```

# c++ - 二叉树删除

> ID：13821868
> 
> 赞同：0
> 
> 时间：2012-12-11T14:06:12.430
> 
> 标签：c++, binary-tree

我正在尝试完成删除功能

这是伪代码，注意结尾。

我不知道伪代码是否错误。

以下是我的解释：

```
Node* minNode = Minimum(toDelete->right);

            int tmp = 0;
            tmp = minNode->val;
            // delete(&tmp);
            free(minNode);
            minNode=NULL;
            toDelete->val=tmp; 
```

除了一旦删除它，它就会在打印时开始填充一万亿个零。

我在做什么有意义吗？我所拥有的其余代码是正确的，或者无论如何我都这么认为。它只会在这种情况下搞砸。

这也是最小功能

```
Node* BST::Minimum(Node *curr) {

    // if (curr->left != NULL) {
    //      return(Minimum(curr->left));
    //  }
    //  return curr;
    Node* node = curr;
    while (node->left != NULL) {
        node = node->left;
    }
    return node;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T02:47:45.570

您首先要搜索树，然后查看要删除的节点是否存在。

如果它在那里，你想检查三个套管：

1：当您要删除没有子节点的节点时。：在这种情况下，您只需删除所述节点，因为它没有任何子节点。

2：当您要删除具有左或右子节点的节点时：在这种情况下，您将左子节点或右子节点设置为要删除的节点的父节点

3：当你想删除一个有两个孩子的节点时：在这种情况下，你必须找到你要删除的节点的后继节点，然后将后继节点与删除节点交换。

```
public Boolean delete(int key)
{
    Node current = root;
    Node parent = root;

     //search for node here
    while(current->key != key)
    {
       parent = current; //save the parent the nodes as you loop through it
       if(key < current->key)
           current = current->left
       else
            current = current->right

        //if you do not find the key return false
        if(current==null)
           return false;
    }
    //case 1 start here:
    //check if the said node has no child. in this case we are looking at current
    if(current->left ==null && current->right == null)
     {
          //check if the node you want to delete is the root
          if(current == root)
            root = current
          else
             {
                 if(parent.key > current->key)
                     parent-left = null;
                 else
                     parent->right = null;
             }
     }//case 2 here:
      //check to see if the node has either left or right child
           else if(statement for checking left here)
           {
           //check for the case where your delete a root

           //set the the parent of the current->left to be current->parent
           }
          else if(statement for checking right here)
          {

           //check for the case where your delete a root

           //set the the parent of the current->right to be current->parent
          }
     else
        {
             //create a node successor and give it the successor you found
             Node successor = findSuccessor(Node NodeToDel);

             //check for root being the node you want to delete

             if(root == successor)
                root =  successor;
             else
                {
                    //navigate left, set parent->left = successor

                    //navigate right, set parent->right = successor

                    //with the nature of the findSuccessor() algorithm i have,
                    //i will have to code one more line:

                    // give succeccor->left = current->left; 
                }

        }

     } 
```

我希望这会有所帮助。

# javascript - 将选项添加到选择并选择它

> ID：13821870
> 
> 赞同：7
> 
> 时间：2012-12-11T14:08:47.637
> 
> 标签：javascript, jquery, dom-manipulation

我有[这个代码](http://jsfiddle.net/paska/tEUxg/)

```
var opt = $("select option:first");
opt.remove();

$("button").on("click", function() {
    $("select").prepend(opt).val(1);
}); 
```

这在某些浏览器中运行良好。但是，当然，IE 不是其中之一。在 IE 中，组合以两个选项结束，但文本为空白（没有选定的选项）。我认为这是因为该选项仍未加载到 DOM 中。我假设因为我可以使用[此代码](http://jsfiddle.net/paska/tEUxg/1/)轻松解决此问题：

```
var opt = $("select option:first");
opt.remove();

$("button").on("click", function() {
    $("select").prepend(opt);
    setTimeout(function() {
        $("select").val(1);
    }, 1);
}); 
```

但是，我更喜欢更好的东西。有任何想法吗？

*注意：我不是在寻找选择器的性能或类似的东西。发布的代码只是一个简化的示例，而不是我的真实脚本。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:31:59.997

这似乎适用于所有浏览器，但我不知道为什么您的原始代码在 IE 中失败。

```
var opt = $("select option:first");
opt.detach();

$("button").on("click", function() {
    $("select").prepend(opt).prop("selectedIndex", 0);
}); 
```

[http://jsfiddle.net/tEUxg/5/](http://jsfiddle.net/tEUxg/5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T14:50:43.680

IE 使用队列系统进行 DOM 操作。使用`dequeue()`： [演示](http://jsfiddle.net/N2UF4/)

```
var opt = $("select option:first");
opt.remove();

$("button").on("click", function() {
    $("select").prepend(opt).dequeue().val(1)
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T15:10:16.987

这很愚蠢，但是基于您考虑使用的原始解决方案的另一个解决方案是：

[http://jsfiddle.net/N2UF4/1/](http://jsfiddle.net/N2UF4/1/)

```
var opt = $("select option:first");
opt.remove();

$("button").on("click", function() {
    $("select").prepend(opt).delay(1).val(1);
}); 
```

仍然不确定为什么这是必要的（或`dequeue`来自其他答案），但它似乎也“解决”了问题。

# java - 读取 src 中的相对静态文件

> ID：13821872
> 
> 赞同：2
> 
> 时间：2012-12-11T14:09:48.123
> 
> 标签：java

我在**src**的包中有 .tpl 文件，其中包含一些静态内容。例如，我正在尝试从该文件（ ）`src/A/B/C/test.tpl`的同级类中读取它。`src/A/B/C/Test`

我怎么都找不到！FileReader 抛出 FileNotFoundException。

**解决方案：** Class.getResource() 有效。问题是关于默认情况下不会编译的 tpl 扩展。IDE 具有添加扩展以进行编译的设置。我使用 .html 而不是更新编译器设置。

```
Test.class.getResource("/A/B/C/test.html").getPath().replace("%20", " ") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:30:38.097

您应该使用[ClassLoader.html#getResourceAsStream](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html#getResourceAsStream%28java.lang.String%29)

```
getClassloader().getResourceAsStream(resourcePath); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:34:41.897

如何将文件移动到 src/main/resources 然后尝试类似 -

```
ApplicationContext context = new ClassPathXmlApplicationContext("classpath:/test.tpl");

    try {

        context.getClassLoader().getResourceAsStream("test.tpl");

       ...
        } 
   catch (IOException ex) {
        ex.printStackTrace();
    } 
```

# android - 使用动画（卡拉OK）更改文本视图的颜色

> ID：13821874
> 
> 赞同：1
> 
> 时间：2012-12-11T14:08:43.223
> 
> 标签：android, android-layout, android-intent

我需要在我的应用程序中模拟卡拉 OK。

我还希望用户更改为每个单词着色的持续时间（使卡拉 OK 更慢\更快）。

我已阅读此解决方案： [How to make Dynamic change of TextVIew and UI in general?](https://stackoverflow.com/questions/8388341/solved-how-to-make-dynamic-change-of-textview-and-ui-in-general)

这个解决方案可以被 API 4.0 中提供的动画替代吗？怎么做到呢 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T15:12:38.620

我从来没有做过，所以我真的没有任何代码给你。

但我认为您可以使用 3 个`ofInt`ValueAnimator 对象从 0-255 来表示 rgb 值。

然后在每个步骤中，您可以将 rgb 值`Color.rgb(r,g,b);`传递给并将结果传递给`TextView.setTextColor(int color);`

# knockout.js - 淘汰赛下拉绑定和返回值

> ID：13821876
> 
> 赞同：0
> 
> 时间：2012-12-11T14:12:05.283
> 
> 标签：knockout.js, knockout-mapping-plugin, knockout-2.0

我在淘汰赛中绑定选择列表

html:

```
<select data-bind="options: $parent.Languages, optionsValue:function(item) { return item.Value; }, optionsText: function(item) {return item.Text; }, value: LanguageID, valueUpdate: 'change'" /> 
```

提交时 ==> var data = ko.mapping.toJS(viewModel1);

控制器：

```
Languages = new SelectList(this.Languages(), "ID", "LanguageName", SelectedLanguageID); 
```

它返回 LanguageID = "Selected: true, ID: 1, LanguageName: "English" 中的完整对象，但我希望它只返回 ID，如 LanguageID = 1

我已经使用订阅方法并分配

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-11T14:43:47.707

一些东西：

*   确保您正确打开/关闭您的`select`喜欢： `<select></select>`

*   您可以通过将所需的属性名称作为字符串 ( )来简化您的`optionsText`规范`optionsValue``<select data-bind="options: Languages, optionsValue: 'Value', optionsText: 'Text', value: LanguageID" ></select>`

*   您不需要`valueUpdate`在选择上使用

否则，它似乎工作正常。

这是一个示例：http: [//jsfiddle.net/rniemeyer/dgmV6/](http://jsfiddle.net/rniemeyer/dgmV6/)

# python - 在python中使用命名/未命名和可变参数的函数调用

> ID：13821877
> 
> 赞同：6
> 
> 时间：2012-12-11T14:18:48.787
> 
> 标签：python

我有以下代码：

```
def foo(func, *args, named_arg = None):
    return func(*args) 
```

返回一个`SyntaxError`：

```
 File "tester3.py", line 3
    def foo(func, *args, named_arg = None):
                                 ^ 
```

这是为什么？是否有可能以这种方式定义一个函数，它接受一个参数（`func`），然后是`args`命名参数之前的变量参数列表？如果没有，我的可能性是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-11T14:28:07.937

catch-all`*args`参数*必须*在任何显式参数之后：

```
def foo(func, named_arg=None, *args): 
```

如果您还将 catch-all`**kw`关键字参数添加到定义中，则*必须*在`*args`参数之后：

```
def foo(func, named_arg=None, *args, **kw): 
```

混合显式关键字参数和包罗万象的`*args`参数确实会导致意外行为；您不能同时使用任意位置参数*并*显式命名您列出的关键字参数。

`func`首先使用任何额外的位置`named_arg`，也可以作为位置参数：

```
>>> def foo(func, named_arg = None, *args):
...     print func, named_arg, args
... 
>>> foo(1, 2)
1 2 ()
>>> foo(1, named_arg=2)
1 2 ()
>>> foo(1, 3, named_arg=2)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: foo() got multiple values for keyword argument 'named_arg'
>>> foo(1, 2, 3)
1 2 (3,) 
```

这是因为任何第二个位置参数都`foo()`将*始终*用于`named_arg`.

在 Python 3 中，`*args`参数*可以*放在关键字参数之前，但这具有*新*的含义。通常，可以在调用签名中将关键字参数指定为位置参数（例如，调用您的函数，就像`foo(somefunc, 'argument')`分配`'argument'`给一样`named_arg`）。通过在位置参数和命名参数之间放置`*args`或放置一个平原`*`，您可以将命名参数排除在位置参数之外；调用`foo(somefunc, 'argument')`会引发异常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T14:32:47.747

不，Python 2 不允许这种语法。

您的选择是：

1) 将命名的 arg 移动到出现在之前`*args`：

```
def foo(func, named_arg = None, *args):
   ... 
```

2）使用`**kwargs`：

```
def foo(func, *args, **kwagrs):
   # extract named_arg from kwargs
   ... 
```

3) 升级到 Python 3。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T14:29:21.503

将参数的顺序更改为：

```
def foo(func, named_arg = None, *args):
    return func(*args) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-11T14:30:24.507

根据文档，不：

教程[第 4.7.2 节](http://docs.python.org/2/tutorial/controlflow.html#keyword-arguments)说：

> 在函数调用中，关键字参数必须跟在位置参数之后。

...和[​​4.7.3 说](http://docs.python.org/2/tutorial/controlflow.html#arbitrary-argument-lists)关于“任意参数列表”：

> 在可变数量的参数之前，可能会出现零个或多个正常参数。

...因此，如果您要使用所有三种参数类型，它们需要在序列中

1.  位置参数
2.  命名参数
3.  变量/任意参数

# c# - 匹配和替换字符串中的文本，同时保留非替换文本

> ID：13821879
> 
> 赞同：1
> 
> 时间：2012-12-11T14:18:59.037
> 
> 标签：c#, regex

我知道如何使用 Regex.Split() 和 Regex.Replace(); 但不是如何在替换时保留某些数据。

如果我在 String[] 中有以下几行文本（在每个 ; 之后拆分）

"

```
using system;
using system.blab;
using system.blab.blabity; 
```

"

例如，我将如何循环并将所有 'using' 替换为 '' 但匹配整行 'using (.+;)'。并得到以下结果（但不仅仅是 Regex.replace("using", "");)"

```
<using> system;
<using> system.blab;
<using> system.blab.blabity; 
```

"

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:29:55.350

如果 str 是您当前的字符串，则

```
 string str = @"using system;
            using system.blab;
            using system.blab.blabity;";
            str = str.Replace("using ", "<using> "); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T14:30:30.763

在正则表达式中使用括号指示引擎将该值存储为一个组。然后当您调用 Replace 时，您可以使用 $n 引用组，其中 n 是组的编号。我没有测试过这个，但是像这样：

```
Regex.Replace(input, @"^using( .+;)$", "$1"); 
```

[在这里阅读更多信息](http://www.regular-expressions.info/brackets.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T14:32:58.497

这应该让你非常接近。您应该为您尝试匹配的每个逻辑项使用一个命名组。在这种情况下，您尝试匹配不是字符串“using”的所有内容。然后，您可以使用符号 ${yourGroupName} 来引用替换字符串中的匹配项。我编写了一个名为[RegexPixie](http://www.regexpixie.com)的工具，它会在您输入内容时显示您的内容的实时匹配，以便您查看哪些有效，哪些无效。

```
//the named group has the name "everythingElse"
var regex = new Regex(@"using(?<everythingElse>[^\r\n]+)");
var content = new string [] { /* ... */ };

for(int i = 0; i < content[i]; i++)
{
     content[i] = regex.Replace(content[i], "${everythingElse}");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T16:47:20.510

这结合了两个答案。它环绕单词[边界](http://www.regular-expressions.info/wordboundaries.html) 以执行*整个单词*搜索，然后在反向引用中捕获正则表达式`\b``using`*`$1`*

 *```
string str = @"using system;
using system.blab;
using system.blab.blabity;";

str = Regex.Replace(str, @"\b(using)\b", "<$1>"); 
```*

# java - 同步：ImageDownloader 线程

> ID：13821881
> 
> 赞同：1
> 
> 时间：2012-12-11T14:21:49.727
> 
> 标签：java, android, synchronization

我需要（从互联网或我的缓存）下载**很多**图像。因此，我决定创建一个下载器线程，它将图像排入队列并在下载图像时通知调用者。该线程下载队列中的任何图像，并等待下载更多图像。在`add`方法中，我唤醒线程重新开始下载：

```
public class ImageDownloader implements Runnable {

private boolean continueFetching;
private List<Image> images;

private static ImageDownloader instance = new ImageDownloader();

private ImageDownloader() {
    continueFetching = true;
    images = new ArrayList<Image>();

    new Thread(this).start();
}

public static ImageDownloader getInstance() {
    return instance;
}

@Override
public void run() {
    synchronized (this) {
        while (continueFetching) {
            fetchAvailableImages();
            try {
                this.wait();
            } catch (InterruptedException e) {
            }
        }
    }
}

private void fetchAvailableImages() {
    while (images.size() != 0) {
        Image image = images.get(0);

                    Bitmap bitmap = downloadImage(image);
                    image.onImageDownloadCompleteListener.onImageDownloadComplete(bitmap);

        images.remove(0);
    }
}

public void stop() {
    synchronized (this) {
        continueFetching = false;
        notify();
    }
}

public void add(Image image) {
    images.add(image);
            notify;
}

public interface OnImageDownloadCompleteListener {

    public void onImageDownloadComplete(Bitmap bitmap);
}
} 
```

当我同步`add`方法时，UI线程挂起，因为它需要等待当前图像完成下载。所以我删除了同步块，但现在我得到了`java.lang.IllegalMonitorStateException: object not locked by thread before notify()`.

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:57:39.103

更好的解决方案是使用这个为您处理图像下载的好库:)

用户易于使用且开源： [https ://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

为什么要发明两次轮子？:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:53:29.720

我使用这个源[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList) 效果很好，异步加载图像；）

希望对你有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T15:12:24.200

1.  通知修改为 notifyAll..
2.  当点击 UI/action 时，创建一个新线程......但是，性能很慢，因为一旦动作创建一个新线程......

# python - PIL 切断字母的顶部

> ID：13821882
> 
> 赞同：5
> 
> 时间：2012-12-11T14:22:15.017
> 
> 标签：pil, python, fonts, python-imaging-library, text-rendering

我花了很多时间使用 Python 制作我的第一个 Web 应用程序，并且我正在使用[pil](/questions/tagged/pil "显示标记为“pil”的问题")生成图像。在阅读了很多之后，我设法实现了正确的文本对齐、换行、生成具有许多扩展名的文件等。

但是，PIL 生成的所有文本都在顶部被截断。这是一个示例。

![PIL 生成的图像示例，顶部的文本被截断](../Images/0e7c3d3fce9186422490bd244aa3b3a0.png)

它应该`ŻÓĆjygpq`以多种字体显示（字体名称在左侧）。

我在这里找到了几篇文章：[使用 PIL 进行字体剪辑](https://stackoverflow.com/questions/1933766/fonts-clipping-with-pil)，但我想避免使用另一个模块（aggdraw）；因为我已经在 PIL 中找到了很多东西，所以我想坚持下去。

我尝试了许多不同大小的字体，但文本仍然被截断。我什至尝试使用 PIL 字体，但它仍然不起作用。[还将 OTF 转换为 BDF 和 PIL]。

这是在 Ubuntu 上。接下来我应该尝试什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T01:00:45.513

我希望在这一点上是错误的，但唯一正确的修复依赖于修补 _imagingft.c 呈现文本的方式。PIL 依赖于 FreeType 来完成这项任务，但 PIL 似乎错误地计算了定位。此外，高度`getsize`被高估了（尽管这不会造成问题）。目前，我在[http://pastebin.com/jP2iLkDN](http://pastebin.com/jP2iLkDN)上放了一个补丁来处理这些问题（似乎有更好的方法来修补渲染代码）。

以下是我分别在没有补丁和有补丁的情况下得到的一些输出示例：

![在此处输入图像描述](../Images/72edd229805a91f6ec8b2c17badfbf0f.png)     ![在此处输入图像描述](../Images/81db19a6d29c0a836810028e45873dac.png)

使用链接讨论中存在的代码的结果。在 OSX 上：

![在此处输入图像描述](../Images/955b3a44626ba14573a327615e2e1393.png)     ![在此处输入图像描述](../Images/d9ff64eff57da6355acc3ef2547aa344.png)

在 Ubuntu 上：

![在此处输入图像描述](../Images/4bb6e060998b9feb81c0c5a90fc86a8f.png)     ![在此处输入图像描述](../Images/0d8aab5026ab6bbfd1808e2ab2bb3a19.png)

这是生成顶级数字的代码：

```
# -*- encoding: utf8 -*-
import sys
import Image, ImageDraw, ImageFont

im = Image.new("RGBA", (1000, 1000), 'white')
draw = ImageDraw.Draw(im)

start_y = 7
text = u'\u00d1\u00d3yŻ\u00d4Ćgp\u010c\u0137'
for i in xrange(28, 46, 2):
    font = ImageFont.truetype('Junicode-Bold.ttf', i)
    width, height = font.getsize(text)
    draw.rectangle((0, start_y, width, height + start_y), outline='blue')
    draw.text((0, start_y), text, font=font, fill='black')
    start_y += height + 7

im.crop((0, 0, width + 1, start_y + 2)).save(sys.argv[1]) 
```

底部的数字是根据链接主题中关于 PIL 截断部分文本的代码生成的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T14:35:58.467

不是最好的解决方案，但我看到人们通过在文本中添加前导尾随空格来解决这个问题。

# asp.net - 您如何防止 AntiXssEncoder 发送“回车”“换行”的数字字符引用？

> ID：13821912
> 
> 赞同：2
> 
> 时间：2012-12-11T14:30:16.940
> 
> 标签：asp.net, internet-explorer-10, xss, antixsslibrary

使用 AntiXssEncoder 的 ASP .Net 标记

```
<asp:Textbox TextMode="Multiline" runat=server>
First Line
Second Line
</asp:TextBox> 
```

呈现为：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
</head>
<body>
 <textarea rows="5" >First Line&#13;&#10;Second Line</textarea> 
</body>
</html> 
```

作为扩展为回车的数字字符引用，这不是有效的 HTML5。使用数字字符引用而不是实际字符编写代码的原因是因为页面是用 ASP .NET 编写的，AntiXss 是基于此页面的默认 HttpEncoder：http: [//haacked.com/archive/2010 /04/06/using-antixss-as-the-default-encoder-for-asp-net.aspx](http://haacked.com/archive/2010/04/06/using-antixss-as-the-default-encoder-for-asp-net.aspx)。

删除 AntiXss 编码器可以解决问题，但是有没有办法保留 AntiXss 编码器并防止它发送“回车”和“换行”的数字字符引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-08T17:46:53.193

在当前版本的项目 (v4.2.1) 中无法避免这种情况。codeplex 项目存在一个悬而未决的问题。

问题：编码为数字字符引用的回车 - [http://wpl.codeplex.com/workitem/19074](http://wpl.codeplex.com/workitem/19074)

# php - 2 个日期范围相交的查询结果

> ID：13821914
> 
> 赞同：0
> 
> 时间：2012-12-11T14:30:35.053
> 
> 标签：php, date, range

所以我会试着解释一下：

我有日期选择器，您可以在其中选择 2 个日期（开始和结束）。

例如：01-01-2012 到 11-12-2012

现在我将使用这些日期在表格中搜索工作：

开始日期工作：2012 年 10 月 10 日结束日期工作：2012 年 12 月 20 日

结果我想得到那份工作，因为这份工作在这两个日期之间运行。

我尝试使用 BETWEEN ，但这似乎对我不起作用。有人可以帮我查询吗？当然，我将日期格式转换为 yyyy-mm-dd。

关键是我想展示这份工作，即使只有 1 天在 datepicker 日期的范围内。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:53:42.627

您正在寻找 2 个日期范围的交集。因此，给定日期范围 d1 和 d2，您知道 d2.start 必须在 d1.end 之前发生。您还知道 d2.end 必须在 d1.start 之后发生。如果两个条件都为真，那么你就有重叠。在 SQL 中：

```
SELECT d.* 
FROM thedates d
WHERE d.jobstart < $myenddate
  AND d.jobend > $mystartdate 
```

为清楚起见，ETA 图：

![在此处输入图像描述](../Images/27dd4b7ba37b6578131b0f2d8b384ad9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:41:34.947

只需将语句用作

```
SELECT * FROM dummydb.tblorders t where t.date_purchased >= '2012-03-24 00:00:00' and t.date_purchased <= '2012-03-24 23:59:59'; 
```

# php - 如果数组未满则不打印

> ID：13821917
> 
> 赞同：1
> 
> 时间：2012-12-11T14:30:38.750
> 
> 标签：php, arrays

我有一个数组

```
array('apples', 'oranges', 'grapes', 'watermelons', 'bananas'); 
```

如果里面只有苹果和橘子，我不想打印这个数组。我怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T14:36:11.773

您可以在[此处查看此示例](https://stackoverflow.com/questions/7542694/in-array-multiple-values)：

```
$haystack = array(...);

$target = array('foo', 'bar');

if(count(array_intersect($haystack, $target)) == count($target)){
    // all of $target is in $haystack
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T14:39:39.240

把苹果和橘子拿出来，看看有没有剩下的。

```
$arr = array('apples', 'oranges', 'grapes', 'watermelons', 'bananas');
$arrDiff = array_diff($arr, array('apples', 'oranges')); //take out the apples and oranges

if(!empty($arrDiff)) //there's something other than apples and oranges in the array
    print_r($arr); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T14:33:14.643

```
if (in_array('apples', $array) && in_array('oranges', $array) && count($array) == 2)
{
    // Don't print array
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T14:35:54.677

如果您事先知道要进入数组的元素数量，那么您可以执行以下操作：

```
<?php
$expectedCount = 5; //in this example, we are looking for five elements in our array
if(count($array) == $expectedCount)
{
    var_dump($array);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-11T14:36:33.327

首先指定数组必须具有的最小元素数量，例如在本例中为 5，然后使用函数 count()，其参考可在[http://php.net/manual/en/function.count.php中找到](http://php.net/manual/en/function.count.php)

```
if(count(array) >= 5) 
```

{

```
 //perform action 
```

}

# jquery-selectors - 使用 .not() jquery 选择器的意外事件

> ID：13821919
> 
> 赞同：0
> 
> 时间：2012-12-11T14:30:01.240
> 
> 标签：jquery-selectors, jquery

当用户单击箭头 (.userArrow) 时显示隐藏菜单，当用户单击容器外部 (.menuTrigger) 时将其隐藏

```
<div class="box">

              <div class="menuTrigger fRight">
                  <span class="userArrow ">filtrar ▾&lt;/span>
                  <ul class="userOptionsUl dropdownMenu" style="display: none;">
                        <li><input type="text"></li>
                   </ul>
               </div>

</div> 
```

Javascript

```
$(function() {

    /* el dropdown del dock*/
    $('.menuTrigger .userArrow').click(function(e) {
        e.preventDefault();
        $(this).parent().find('.dropdownMenu').show();
        e.stopPropagation();
    });
    $('body').not('.menuTrigger').click(function() { /* cambiar por la otra clase que tiene*/
        $('.dropdownMenu').hide();
        console.log('yo lo he escondido');
    });

}); 
```

[http://jsfiddle.net/5VQXg/](http://jsfiddle.net/5VQXg/)

我的问题是，当用户单击以显示隐藏菜单然后单击以输入输入时。菜单被隐藏。

所有点击都在 .menuTrigger （或孩子）内的东西

问题是，为什么 `$('body').not('.menuTrigger').click()`当所有点击都在这个容器的孩子中时？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T15:11:26.633

您的代码正在做的是过滤掉任何`menuTrigger`不存在的带有类的 body 元素。

您实际需要做的是检查被单击的元素 ( `e.target`) 是否在 menuTrigger 内，如果是，则不要运行代码：

```
$('body').click(function(e) { /* cambiar por la otra clase que tiene*/
    // If the clicked element is not inside menuTrigger div hide the menu
    if (!$(e.target).closest('.menuTrigger').length) {
        $('.dropdownMenu').hide();
        console.log('yo lo he escondido');
    }
}); 
```

[http://jsfiddle.net/5VQXg/3/](http://jsfiddle.net/5VQXg/3/)

# .net - 通过约定扩展 Ninject 绑定

> ID：13821923
> 
> 赞同：1
> 
> 时间：2012-12-11T14:29:39.423
> 
> 标签：.net, ninject

我通过模块在我的应用程序中手动设置了 Ninject (v3) 绑定：

```
public class FooBarModule : NinjectModule
{
    public override void Load()
    {
        Kernel.Bind<IFooBar>().To<FooBarOne>().InSingletonScope();
        Kernel.Bind<IFooBar>().To<FooBarTwo>().InSingletonScope();
    }
} 
```

现在，我系统中的一些类实现了接口`IBoostrapable`：

```
public class FooBarOne : IFooBar, IBootstrapable 
{ ... } 
```

我想为实现这个接口的类自动扩展 Ninject 绑定。

所以，最后我希望能够做到：

```
var fooBars = Kernel.GetAll<IFooBar>();
var bootstrapbables = Kernel.GetAll<IBootstrapable>();
fooBars.Count().Should().Be(2); // Instance of FooBarOne and FooBarTwo
bootstrapbables.Count().Should().Be(1); // instance of FooBarOne 
```

重要的是，我实际上扩展了现有的绑定（所以保留了单例范围。

这可以通过扩展点以某种方式完成吗？

问候，

多米尼克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:48:51.850

您可以使用约定。例如

```
kernel.Bind(x => x
    .FromThisAssembly()
    .SelectAllClasses()
    .InheritedFrom<IFooBar>()
    .BindAllInterfaces()
    .Configure(c => c.InSingletonScope()); 
```

# php - 比较两行中的列以及另一列的不同变化值

> ID：13821924
> 
> 赞同：2
> 
> 时间：2012-12-11T14:31:22.400
> 
> 标签：php, mysql, sql

我有一个带有自动增量键的表`id`，`item_no`可以是一行或两行（所以它们总是有连续`id`的 s），它们共享相同`ref`但有不同`right/left`（但从技术上讲`item_no`，可以在整个表中重复多次，但这不是问题），`description`有时在连续的行上是相同的，但有时是不同的：

```
id | item_no | description | right\left | ref
1  | 1       | a1          | right      | aaa
2  | 1       | a1          | left       | aaa
3  | 2       | b1          | right      | bbb
4  | 3       | c1          | right      | ccc
5  | 3       | c2          | left       | ccc
6  | 4       | d1          | right      | ddd
7  | 4       | d1          | left       | ddd 
```

我的问题是，如果它的“匹配”行不同，我需要`item_no`在其值上附加一个 -r 或 -l 。`description`

所以我正在寻找的结果是：

```
id | item_no | description | right\left | ref
1  | 1       | a1          | right      | aaa
2  | 1       | a1          | left       | aaa
3  | 2       | b1          | right      | bbb
4  | 3-r     | c1          | right      | ccc
5  | 3-l     | c2          | left       | ccc
6  | 4       | d1          | right      | ddd
7  | 4       | d1          | left       | ddd 
```

我将表导出到 csv 但没有使用太多 php，只是使用 mysql 语句然后循环输出结果，这可能在 mysql 语句中还是我必须依赖 php 循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:44:06.903

我会用这个：

```
update
  items inner join
  (select item_no from items
   group by item_no
   having count(distinct description)>1) dup
  on items.item_no=dup.item_no
set
  items.item_no=concat(items.item_no, '-', substr(rightleft, 1,1)) 
```

如果行总是连续的，你也可以使用这个：

```
update
  items i1 inner join items i2
  on (i1.id=i2.id+1 or i1.id=i2.id-1) 
     and (i1.item_no=i2.item_no)
     and (i1.description<>i2.description)
set i1.item_no=concat(i1.item_no, '-', substr(i1.rightleft, 1,1)) 
```

**编辑：**如果行总是连续的，你只需要一个选择而不是更新，你可以使用这个：

```
select
  i1.id,
  case when i1.description=i2.description or i2.id is null then i1.item_no else
            concat(i1.item_no, '-', substr(i1.rightleft, 1,1)) end,
  i1.description, i1.rightleft, i1.ref
from
  items i1 left join items i2
  on (i1.id=i2.id+1 or i1.id=i2.id-1) and (i1.item_no=i2.item_no)
order by i1.id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:48:14.077

尝试这个：

```
SELECT 
  id, 
  CASE RightLeft
    WHEN  'right' THEN CONCAT(item_no, '-r' )
    WHEN  'left'  THEN CONCAT(item_no, '-l' )
  END AS item_no,
  DESCRIPTION,
  Rightleft,
  ref
FROM Items
WHERE item_no IN
(
  SELECT i1.item_no
  FROM items i1
  GROUP BY i1.item_no
  HAVING(COUNT(DISTINCT description)) > 1); 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/eeb6c/13)

这会给你：

```
| ID | ITEM_NO | DESCRIPTION | RIGHTLEFT | REF |
------------------------------------------------
|  4 |     3-r |          c1 |     right | ccc |
|  5 |     3-l |          c2 |      left | ccc | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T14:42:57.890

如果您使用 mysql，我将依赖 PHP 循环，如果您使用 Oracle 或 SQL 服务器，那么您可以编写存储过程。

您的脚本应如下所示：

```
$dbh = new PDO('mysql:host='.DATABASE_HOST.';dbname='.DATABASE_NAME, DATABASE_USER, DATABASE_PASSWORD);
$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

$data = $dbh->query("SELECT * FROM ExampleTable");
$dbh->beginTransaction();

foreach($data as $row)
{
    $append = $row["right\left"] == "left" ? $row["item_no"]."-l" : $row["item_no"]."-r";
    $stmnt = $dbh->prepare("UPDATE ExampleTable SET item_no = :item WHERE id = :id");
    $stmnt->execute(array(":item" => $append,":id" => $row["id"]));
}

// Do some exception handling if something goes wrong you can allways do a rollback
// With PDO $dbh->rollBack();
$dbh->commit();
$dbh = null; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-11T14:46:05.480

像这样的东西

```
UPDATE [dbo].[maTable] SET [item_no] = [item_no]+'r' WHERE not distinct [description] from [dbo].[maTable] 
```

应该在 [description] 不相同的注册行中添加一个“r”（为 SQL Server 编码）

# eclipse - Eclipse TCP/IP 监视器大小

> ID：13821925
> 
> 赞同：2
> 
> 时间：2012-12-11T14:31:34.163
> 
> 标签：eclipse, http, soap, ide, traffic-measurement

我正在尝试使用 Eclispe TCP/IP Monitor 分析我的 SOAP 消息。但是，当我看到一个请求时，例如写着：

```
Request: localhost:8888
Size: 1075 (1472) bytes 
```

监视器的类型是 HTTP。

**问题：** 这两个尺寸值是多少？为什么括号里有一个？

# java - 我可以使用套接字在 ObjectOutputStream 和 ObjectIntputStream 之间的 Serializable 对象中发送一个数组吗

> ID：13821933
> 
> 赞同：1
> 
> 时间：2012-12-11T14:32:31.913
> 
> 标签：java

我们有这个对象，需要通过套接字发送：

```
static class Msg implements Serializable {
 int num;
 String name;
 boolean [] sign; 
 //modify 'Message' to 'Msg'....
 public Msg( int num, String name,boolean[] sign) {
   super();
   this.num=num;
   this.name=name;
   this.sign=sign; 
    Myarraycopy(this.sign,sign);
  }
 public boolean[] getsign() {
  return sign
 }
 // Some methods
} 
```

但是在代码的其他部分。

```
 Socket _socket; 
```

一边

```
 ObjectOutputStream out = new ObjectOutputStream(_socket.getOutputStream());
  Msg senMsg = new Msg(3,"Fine", new boolean[]{true,true,true})
      out.writeObject(senMsg); 
```

...................在另一边

```
 ObjectInputStream in = new ObjectInputStream(_socket.getInputStream());
        Msg recMsg = (Msg) in.readObject();
   boolean[] s = recMsg.getsign();
  System.out.println(s[0]+", "+ s[1]", "+s[2]); 
```

为什么输出是：假，假，假。

如何从 ObjectInputStream 中检索数组的值；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-11T14:48:22.860

我怀疑您的代码看起来不像示例中的那样

此示例按预期工作（并编译）

```
static class Msg implements Serializable {
    final int num;
    final String name;
    final boolean[] sign;

    Msg(int num, String name, boolean[] sign) {
        this.num = num;
        this.name = name;
        this.sign = sign;
    }

    @Override
    public String toString() {
        return "Msg{" +
                "num=" + num +
                ", name='" + name + '\'' +
                ", sign=" + Arrays.toString(sign) +
                '}';
    }

    // Some methods
}
public static void main(String... args) throws IOException, ClassNotFoundException {
    ByteArrayOutputStream boas = new ByteArrayOutputStream();
    ObjectOutputStream oos = new ObjectOutputStream(boas);
    oos.writeObject(new Msg(3, "Fine", new boolean[] { true, true, true }));
    oos.close();

    ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(boas.toByteArray()));
    Msg msg = (Msg) ois.readObject();
    System.out.println(msg);
} 
```

印刷

```
Msg{num=3, name='Fine', sign=[true, true, true]} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T21:45:01.543

无论 'Myarraycopy()' 做什么，您都可以删除它，因为您使用两个相同的值调用它。因此它不可能做任何有用的事情。将数组复制到自身并没有用，而且显然这样做是错误的。

# spring - 如何在自定义错误页面上获取请求的 URL

> ID：13821936
> 
> 赞同：7
> 
> 时间：2012-12-11T14:33:15.093
> 
> 标签：spring

我的应用程序遇到了下一个问题。我必须制作自己的 404 页面，我想在那里写“找不到页面 {requestedPage}”，但我不知道如何获得这个值。

我用 RequestMapping 创建了控制器

```
@RequestMapping("404")
public String handle404(Locale locale, Model model ,HttpServletResponse response, HttpServletRequest request){
    ...
} 
```

并在 web.xml 中将此页面设置为 404 错误页面

```
<error-page>
    <error-code>404</error-code>
    <location>/404</location>
</error-page> 
```

我在春季论坛 [http://forum.springsource.org/showthread.php?87670-Knowing-the-requested-URL-during-a-404](http://forum.springsource.org/showthread.php?87670-Knowing-the-requested-URL-during-a-404)上发现了同样的问题， 但没有答案

我查找了所有 HttpSerletRequest 方法和字段，但没有找到任何可以提供帮助的东西。

有谁知道如何做到这一点？

# jquery - addClass() 然后 removeClass() 点击 (jquery)

> ID：13821941
> 
> 赞同：1
> 
> 时间：2012-12-11T14:33:28.340
> 
> 标签：jquery, click, addclass, removeclass

.我正在尝试制作一些画廊。想要使用 addClass 来显示图像，然后单击同一个地方以删除这个我在谷歌上搜索帮助的新类，但是在尝试让它正常工作一个小时后，我正在向你寻求帮助。我在这里找到了反向选项的解决方案（首先删除并添加）

代码：

```
<html>
 <script type="text/javascript" src="http://www.s-ola.me/js/jquery.js"></script>
 <script type="text/javascript" src="http://www.s-ola.me/js/jquery.nailthumb.1.1.min.js"></script>
<style>

#window {
width:              570px;
height:             455px;
position:           relative;
background-color:   grey;
padding:            20px;
margin:             0 auto;
top:                50%;
margin-top:         -225px;
}

.image {
display:    inline-block;
margin:     5px;
}

 #wrapper {
width:              568px;
height:             455px;
position:           absolute;
}

.close {
display:    none;
}
.big_image{
width:      100%;
display:    block;
}
</style>
<body>

<div id="window">
<div id="wrapper">
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
    <img class="image" src="http://www.livethelesson.com/wp-content/uploads/2012/01/snow.jpg" />
</div>
</div>

<script>

$(document).ready(function(){
$('.image').nailthumb({containerClass:'image',height:100, width:100, fitDirection:'center', proportions:0.5, maxShrink:0.5});
})

$(document).ready(function(){

$('img').click(function(){
    $('.image').toggleClass('close');
    $('#wrapper').append('<img src="'+this.src+'" class="big_image" />');
})

})
$(document).ready(function(){
$('.big_image').click(function(){
    if($('.big_image')) {$('.big_image').remove(); $('.image').toggleClass('close'); }
})

})

</script>
</body>
</html> 
```

请让我知道我在哪里弄错了。

再次感谢。阿列克谢 alexela.biz

* * *

更新

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:40:11.543

试试这个：

```
$('#wrapper').toggleClass('close'); 
```

这将在它不存在时添加一个关闭类，并在它存在时删除该类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-11T17:48:18.007

终于成功了这是我的解决方案：

```
$(document).ready(function(){
$('img.image, img.big_image').live('click', function(){
    if (!$('.big_image').length) {
        $('.image').addClass('close');
        $('#wrapper').append('<img class="big_image" src="'+this.src+'" />');
    }
    else
    {
        $('.image').removeClass('close');
        $('.big_image').remove();
    }
})
}) 
```

希望它会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-11T14:37:53.543

```
 if($('#wrapper').hasClass('close')) {$('#wrapper').removeClass('class')} 
```

你可能的意思是：

```
 if($('#wrapper').hasClass('close')) {$('#wrapper').removeClass('close')} 
```

# jquery - html 选择选项 .append 仅在 IE9 中附加第一个字母

> ID：13821944
> 
> 赞同：0
> 
> 时间：2012-12-11T14:35:09.287
> 
> 标签：jquery, internet-explorer-9

当我尝试运行以下

```
$('.VarList').append($('<option/>').text('test').attr('value', 'test')); 
```

附加到 .text 的所有内容都是“t”，但 .value 附加了“test”

有没有人遇到过这个问题？

如果我在此行前面放置一个 js 警报，那么 .text 会正确附加。

# javascript - 去掉 url href 中的字符

> ID：13821946
> 
> 赞同：1
> 
> 时间：2012-12-11T14:35:15.277
> 
> 标签：javascript, jquery, href

我有一个这样的链接：

```
http://nl.wikipedia.org/wiki/Alexandra_Stan&sa=U&ei=UULHUIIdzPnhBOKMgPgJ&ved=0CCIQFjAA&usg=AFQjCNGyCikDkoZMnnuqGo6vjMQ6b5lZkw 
```

我想摆脱以 '&' 开头的所有内容，所以这会给我一个干净的网址：

```
http://nl.wikipedia.org/wiki/Alexandra_Stan 
```

我知道如何像这样替换href：

```
$('a').each(function() {
      $(this).attr("href", function(index, old) {
            return old.replace("something", "something else");
      });
}); 
```

但我不知道如何摆脱从某个角色开始的一切。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-11T14:39:42.297

您可以使用`substr()`and`indexOf()`来获取 URL 的特定部分，从 URL 字符串的开头直到遇到第一个 & 符号。

```
 var href = $(this).attr('href'); 
  var url = href.substr(0, href.indexOf('&')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T14:39:17.693

改为使用[`String.prototype.split`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)。它将一个字符串一个字符一个字符地分割成一个数组。最重要的部分是，如果缺少该字符（在您的情况下，'&'），它将把整个字符串放在第一个数组索引中。

```
// String.prototype.indexOf:
var href = 'http://www.noAmpersandHere.com/',
    url  = href.substr(0, href.indexOf('&'));  // ''

// String.prototype.split:    
var href = 'http://www.noAmpersandHere.com/',
    url  = href.split('&');  // ['http://www.noAmpersandHere.com/']
    url  = url[0];  // 'http://www.noAmpersandHere.com/' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T14:41:40.153

**第一：考虑参数列表以`?`而不是以`&`**

您正在处理的锚元素已经解析并正确划分了整个 url。您只需要访问正确的锚属性：

[https://developer.mozilla.org/en-US/docs/DOM/HTMLAnchorElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLAnchorElement)

# php - 使用 PHP 分离读/写

> ID：13821947
> 
> 赞同：1
> 
> 时间：2012-12-11T14:35:14.217
> 
> 标签：php, mysql

我们已经决定，我们将从单个数据库迁移到主从架构中的复制数据库，并将所有读取都发送到从站并写入主站。

我们走这条路的原因是对我们产品的补充，这意味着我们正在大量增加数据库连接，这会导致我们的报告套件出现性能问题。

我们正在使用 MySQL(5.1.55)，应用程序是用 PHP 开发的。

对此有几个一般性查询：

*   你将如何告诉应用程序从哪个数据库读取？你会在 PHP 中做吗？或者只是 mysqldnd_ms 或 mysql 代理之类的东西？

*   ajax 请求从哪里读取？我们有一个允许用户标记记录的页面。然后将其保存在数据库中，用户可以看到哪些记录已被标记。

感谢您的任何建议。

# android - Proguard 不会混淆 gui 组件

> ID：13821949
> 
> 赞同：3
> 
> 时间：2012-12-11T14:35:18.507
> 
> 标签：android, android-activity, actionbarsherlock, proguard

我想使用 ProGuard 来混淆我的 Android 应用程序。这工作正常。但是我的扩展活动、视图和sherlockactivity的gui类并没有被混淆。这是proguard.cfg

```
-injars      bin/classes
-injars      libs
-outjars     bin/classes-processed.jar
-libraryjars C:/Users/android-sdks/platforms/android-17/android.jar

-dontpreverify
-dontoptimize
-repackageclasses ''
-allowaccessmodification
-optimizationpasses 5
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-keepattributes *Annotation*

-dontwarn    sun.misc.Unsafe
-dontwarn    com.actionbarsherlock.**
-dontwarn    com.google.common.**

-keep class android.support.v4.app.** { *; } 
-keep interface android.support.v4.app.** { *; } 
-keep class com.actionbarsherlock.** { *; } 
-keep interface com.actionbarsherlock.** { *; } 

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.view.View
-keep public class * extends android.view.ViewGroup
-keep public class * extends android.support.v4.app.Fragment

-keepclassmembers class * extends android.app.Activity { 
public void *(android.view.View);
}
-keepclassmembers class android.support.v4.app.Fragment { 
*** getActivity(); 
public *** onCreate(); 
public *** onCreateOptionsMenu(...); 
}
-keepclassmembers class * extends com.actionbarsherlock.ActionBarSherlock {
public <init>(...); 
}

-keepclasseswithmembers class * {
   public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
  public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keep public class * extends android.view.View {
   public <init>(android.content.Context);
   public <init>(android.content.Context, android.util.AttributeSet);
   public <init>(android.content.Context, android.util.AttributeSet, int);
   public void set*(...);
}

-keepclassmembers class * implements android.os.Parcelable {
    static android.os.Parcelable$Creator CREATOR;
}

-keepclassmembers class **.R$* {
    public static <fields>;
}

-keepclassmembers class com.brainyoo.brainyoo2android.ui.html.BYJavaScriptInterface {
   public *;
} 
```

首先，我认为活动不能因为反射调用而被混淆

```
myactivity.class 
```

我试图添加：

```
- keep public class mypackege.myactivity.class 
```

但这并不能解决问题。任何想法如何混淆 gui 元素？

谢谢克里斯汀

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T14:42:09.957

> 但是我的扩展 acitvit、view 和 sherlockactivtiy 的 gui 类并没有被混淆。

那是因为您的 ProGuard 配置文件说不要混淆它们。此外，这很重要，就像它们*被*混淆一样，您的应用程序将无法运行，因为：

*   Android 将找不到您重命名的活动
*   Android 不会找到您的活动生命周期方法
*   Android 将找不到您的小部件（用于在解释布局资源时与反射一起使用）
*   等等

> 我试图补充：`-keep public class mypackege.myactivity.class`但这并不能解决问题。

那是因为您告诉 ProGuard*不要*混淆该类。

> 任何想法如何混淆 gui 元素？

如果您希望在完成后拥有一个可以工作的应用程序，您不需要。

# php - preg_replace 和 '|' （或）不在我的正则表达式中工作

> ID：13821954
> 
> 赞同：1
> 
> 时间：2012-12-11T14:34:14.130
> 
> 标签：php, regex, preg-replace

我有一个这样构建的字符串：

```
[propertyname]=[value] 
```

the`propertyname`和 the`value`都可以用单引号或双引号封装。

所以我可以收到一个看起来像这样的字符串：

```
"height"='max' 
```

或者：

```
'height'='max' 
```

只要`propertyname`和`value`都用相同类型的引号封装。

我需要做的是删除引号。但只在`propertyname`and周围`value`！因为以下也很可能是一个有效的字符串：

```
"blaat"="Some 'random' blaat" 
```

最终结果应该是：

```
blaat=Some 'random' blaat 
```

我有以下有效的正则表达式。但它仅在我检查双引号或单引号时才有效。当我尝试将它们与`|`运营商结合起来时，它就不再起作用了。

```
<?php
$string = '"height"=\'something "else" in here\'';

//echo preg_replace ( '#"(.*?)"#', '$1', $string );
//echo preg_replace ( '#\'(.*?)\'#', '$1', $string );
echo preg_replace ( '#("(.*?)"|\'(.*?)\')#', '$1', $string );
?> 
```

所以我可以简单地打两个`preg_replace`电话，但考虑到正则表达式应该能够在一个电话中处理这个问题，这是一个令人讨厌的工作......

知道问题是什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T14:40:27.893

您的正则表达式应该正确匹配，但是您有一个问题：在您的“组合正则表达式”中，`$1`指的是整个匹配项（因为第一组括号包含整个匹配项），因此您将匹配项替换为自身，包括引号。

```
("(.*?)"|\'(.*?)\')
^ ^        ^
|-+--- $1  |---- $3
  |--- $2 
```

现在，您可以简单地删除外括号：

```
"(.*?)"|\'(.*?)\'
 ^        ^
 |--- $1  |---- $2 
```

但是你有一个不同的问题：你要么需要用`$1`or替换匹配`$2`，这取决于正则表达式的哪一半匹配。既然你不能提前知道，那并不容易。您可以*尝试*替换为`$1$2`，但我不知道 PHP 是否允许对未参加比赛的组进行反向引用。

更好地发挥它的安全性并使用可以同时处理这两种情况的正则表达式，包括引用字符串中的转义引号：

```
$result = preg_replace(
    '/(        # Match and capture (group 1):
     ["\']     # an opening quote character
    )          # (End of group 1).
    (          # Now match and capture (group 2):
     (?:       #  Either...
      \\\\.    #   an escaped character
     |         #  or...
      (?!\1)   #   (as long as it is not the closing quote)
      .        #   any other character.
     )*        #  Repeat as needed.
    )          # (End of group 2)
    \1         # Now match the closing quote./x', 
    '\2', $subject); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T15:02:08.480

要么使用一个类`["']`来捕获两个引号，要么使用非捕获组`(?:)`来避免由于括起来的括号而产生额外的捕获组：

```
'#"(.*?)"#'
// or
'#(?:"(.*?)"|\'(.*?)\')#' 
```

# python - 推荐一个 Django 项目在 Linux 上运行的地方

> ID：13821959
> 
> 赞同：27
> 
> 时间：2012-12-11T14:34:44.050
> 
> 标签：python, django, django-settings

我正在将我的第一个 Django 项目上传到 Linux 服务器，我应该将我的项目放在文件系统中吗？

使用 PHP 或 ASP 项目，一切都进入`/var/www`，是否可以这样做并将我的 Django 项目添加到`/var/www`文件夹中？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-11T14:44:43.760

在[Django 教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/#creating-a-project)中，它指出：

> 这段代码应该放在哪里？
> 如果您的背景是 PHP，您可能习惯于将代码放在 Web 服务器的文档根目录下（在 /var/www 之类的地方）。使用 Django，您不会那样做。将任何这些 Python 代码放在 Web 服务器的文档根目录中并不是一个好主意，因为它有可能使人们能够通过 Web 查看您的代码。这对安全不利。
> 
> 将您的代码放在文档根目录之外的某个目录中，例如**/home/mycode**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-11-23T22:57:00.000

# 文件层次系统

@Andy Hayden 确实说明了不放置代码的位置。[文件层次系统 (FHS)](https://refspecs.linuxfoundation.org/FHS_3.0/fhs-3.0.pdf)涉及以下结构；`PATH`映射到`PACKAGE`或`PROVIDER`（建议提供多个包的各方应使用`PROVIDER/PACKAGE`）：

```
/etc/opt/PATH  # FHS location for /opt configuration files
/opt/PATH      # FHS location for PROVIDER or PACKAGE name
/var/opt/PATH  # FHS location for /opt variable storage 
```

FHS 期望`/opt/PATH`包含成功执行软件包所需的所有材料，因此设置以下符号链接似乎是谨慎的

*   `/etc/opt/PATH`到`/opt/PATH/etc`
*   `/var/opt/PATH`到`/opt/PATH/var`

这提供了一个很好的基础，但 Django 项目有上述结构不能完全满足的无关要求。

## 静态文件

静态文件在运行`python manage.py collectstatic`到`STATIC_ROOT`应该指向 web 服务器根以进行静态交付时部署，通常是`/var/www/PATH`.

`/var/www/PATH`可以象征性地链接 到，`/opt/PATH/static` 但这通常是一个坏主意；考虑一下您的服务器配置错误并且用户访问`www.domain.tld/../`并复制您的工作的情况。

## 设置

如果您使用创建项目，`django-admin create-project WEBSITE`您通常会`setup.py`在该文件夹下有一个文件`WEBSITE`。

```
PROJECT/
    WEBSITE/
         setup.py
         ... 
```

如果您将此设置模块转换为一个包，或者您使用了一些包装器，`django-admin`例如`django-cms-create`等。

```
PROJECT/
    WEBSITE/
         settings/
             __init__.py  # from .settings import *
             settings.py
         ... 
```

您可能会符号链接`/etc/opt/PATH`到`/opt/PATH/WEBSITE/settings`而不是`/opt/PATH/etc`如上所述。不过，我想不出这样做的实际原因……YMMV。

## 媒体

媒体，通常由网站用户提供，被放入 `MEDIA_ROOT`. 在这种情况下映射`/var/opt/PATH`到似乎是谨慎的。`/opt/PATH/media`

## 虚拟环境

`/opt/PATH/env`似乎是最合乎逻辑的位置。`/var/env/PATH`也似乎是明智的，但可能更适合作为 . 的符号链接`/opt/PATH/env`。

由于虚拟环境既不是应用程序也不是库位置`/opt/bin`，`/opt/libs`因此不会这样做。`/env/`或`/pyvenv/`不符合 FHS。

## 威士忌酒

如果您`mod_wsgi`与 Apache 一起使用，则类似的调用[`python manage.py runmodwsgi --server-root /etc/opt/PATH --setup-only`](https://youtu.be/H6Q3l11fjU0?t=624)可能更可取，因为它将 Apache 控制命令放置到符合 FHS 的位置，但在这种情况下调用它们更麻烦。

## 家

据我了解`/home`，当 PHP 开发人员在同一台服务器上托管多个站点时，他们通常会使用它们。如果您使用的是 Django，您可能正在从专用机器上为您的网站提供服务，并且这种结构在这种情况下失去了一些优势...... YMMV。

# c++ - if 条件需要逻辑帮助

> ID：13821962
> 
> 赞同：0
> 
> 时间：2012-12-11T14:34:25.797
> 
> 标签：c++

我有 3 个变量保存值 Day Of Week（周枚举）、Hour（0 到 23）和 Minute（0 到 23），这 3 个变量只能保存一个公共值 N/A，其他值不同。如果所有都是 N/A 或一些有效值，那么我必须执行特定的逻辑 A。如果有人是 NA 并且其他人是有效的，那么我必须执行一些其他的逻辑 B

我尝试了很多使用`if`语句，但无法提出正确的解决方案。有人可以给我一个提示吗？

所有值都是整数

```
bool weeklyCount = (dayofweek == weeklyHour) && (weeklyHour == weeklyMinute); 
```

这对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:40:57.147

在伪代码中：

```
if (dow == NA && hour == NA && minute == NA ||
    dow != NA && hour != NA && minute != NA) {
   // logic A
} else {
   // logic B
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:50:59.400

```
struct yourtime
{
    enum Day
    {
        INVALID = -1,
        SUNDAY,
        MONDAY,
        TUESDAY,
        WEDNESDAY,
        THURSDAY,
        FRIDAY,
        SATURDAY
    };
    Day day;
    int hour;
    int minute;
    yourtime() : day(INVALID), hour(INVALID), minute(INVALID) { }
    bool isValid()
    {
        return (day != INVALID) && (hour != INVALID) && (minute != INVALID);
    }
};

int main()
{
    yourtime test;
    std::cout << test.isValid() << std::endl;
} 
```

利用枚举与整数大小相同的事实。

# https - htmlunit 2.11 不适用于 https

> ID：13821964
> 
> 赞同：1
> 
> 时间：2012-12-11T14:36:12.560
> 
> 标签：https, htmlunit

我们正在使用 HtmlUnit 2.11 版本，即最新版本

如果我们将带有 https 协议的 url 传递给 webClient.getPage 它会抛出以下异常并且无法工作

```
@Test
public void TC001_VerifyHomePageLaunch() throws Exception {
    final WebClient webClient = new WebClient(BrowserVersion.FIREFOX_10);
    final HtmlPage page = webClient.getPage("https://localhost/abc/test.jsp");

    webClient.closeAllWindows();
} 
```

javax.net.ssl.SSLPeerUnverifiedException：对等体未通过身份验证

请帮助我们解决如何消除此错误并继续进行实际测试的步骤。我们没有安装证书，因为这是一台测试机器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T13:31:10.903

使用您的 WebClient 尝试以下设置：

```
webClient.setUseInsecureSSL(true) 
```

文档指出：

> 如果设置为 true，客户端将接受到任何主机的连接，无论它们是否具有有效证书。当您尝试连接到具有过期或损坏证书的服务器时，这尤其有用。

[链接到源](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/WebClientOptions.html#setUseInsecureSSL%28boolean%29)。

# silverlight - 使用 GPO 在浏览器外分发 Silverlight，从虚拟 SSO 桌面启动？

> ID：13821965
> 
> 赞同：7
> 
> 时间：2012-12-11T14:36:12.390
> 
> 标签：silverlight, single-sign-on, out-of-browser, gpo

我们有一个 Silverlight 5 应用程序，有浏览器内版本和浏览器外版本。浏览器外版本用于提供提升的权限，需要访问本地资源。

现在我们正面临在典型的医院环境中安装浏览器外应用程序。在这里，我们首先通过 GPO 或其他机制进行集中部署。第二件事是提供指向单点登录平台的可编写脚本的链接，这些平台通常用用户可用的服务启动板替换普通桌面。也可能会阻止直接访问物理 c 驱动器。

众所周知，OOB SL 应用程序的普通桌面链接是 sllauncher.exe 的唯一参数。

在这种情况下，您如何开始支持您的应用程序的部署和安装？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:21:48.980

您可以将 XAP 安装为 Out-Of-Browser 应用程序，使用脚本调用`sllauncher`如下：

```
"C:\Program Files (x86)\Microsoft Silverlight\sllauncher.exe" 
/install:"C:\temp\MyApp.xap" 
/origin:http://www.mysite.com/ClientBin/MyApp.xap  
/shortcut:desktop+startmenu  /overwrite 
```

XAP 需要在本地可用才能正常工作。（我还没有从网络共享中尝试过。）

# alias - TYPO3 “别名”字段在哪里？

> ID：13821967
> 
> 赞同：1
> 
> 时间：2012-12-11T14:36:22.530
> 
> 标签：alias, typo3

根据 TYPO3 手册：

> 别名字段在哪里？
> 
> TYPO3 页面属性中的别名字段 Alias 字段可以在页面属性中找到。在这里，它位于所谓的“第二个选项调色板”上，默认情况下是不可见的。要显示此调色板，您需要选中页面属性表单底部的“显示辅助选项（调色板）”复选框。
> 
> 在最近的 TYPO3 版本（例如 4.5.2）中，别名字段位于页面属性的“行为”选项卡中，称为“URL 别名”。

这是我如何看待它们的页面属性的屏幕截图：

![别名](../Images/1efad8de569706fbee26016c80a7ffae.png)

但是我们正在使用的版本中的“别名”字段在哪里？（TYPO3 版本 4.5.19）。

即使我将页面的类型设置为“高级”而不是“标准”。我有更多选项卡，但没有“行为”选项卡。在用户组的访问列表中，所有内容都被检查并且用户具有完全的管理员权限。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:31:30.990

您在屏幕截图上的属性表单缺少许多常见字段和选项卡，显然您以普通管理员身份登录而无法访问它。（参见典型形式 (4.6.x) 进行压缩）

![全视图](../Images/5d471c91ecdd20a97ed2146eba68ea7c.png)

以完全管理员身份登录并检查这些字段是否可用。

如果不是这意味着，它们在 PageTS/UserTS 中被禁用

如果它们可供完整管理员使用，并且您需要/想要为普通编辑器启用它们，您需要编辑编辑`access lists`器组并选择适当的`Allowed excludefields`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T14:12:05.470

还可能值得注意的是，“实时”和“草稿”工作区之间存在差异。它可能不会显示在草稿工作区中，但会显示在实时工作区中。最近才注意到这一点。

# git - GitLab PHP 网站部署

> ID：13821969
> 
> 赞同：5
> 
> 时间：2012-12-11T14:35:13.660
> 
> 标签：git, deployment, hook, gitlab

我已经设置了[GitLab](http://gitlabhq.com)并使用它来托管我的 Git 存储库。现在我要做的是设置一个`post-receive`钩子，以便我可以在一个名为的文件夹中进行开发，`site_dev`然后推送我的更改，以便它们自动拉入`site`文件夹中。

整个早上我一直在尝试让这个钩子工作，但是我没有运气在 Ubuntu Server 上运行 GitLab 执行任何命令，我知道该`resque`服务正在运行并且我的工作人员处于活动状态。

目前我有：

```
#!/bin/bash
LIVE="/var/www/teamnet"
# read oldrev newrev refname
# if [ $refname = "refs/heads/master" ]; then
  echo "===== DEPLOYING TO LIVE SITE ====="
  cd $LIVE || exit
  unset GIT_DIR
  git pull
  echo "===== DONE ====="
# fi 
```

试图拉动我的更改。

我不确定我是否在这里做错了什么......所有文件夹都位于`/var/www/`同一服务器上的同一位置。是的，我已经`chmod +x`上钩了。

是的，我已经`git init --bare`为*live*文件夹运行并将源设置为 Git 存储库。但是我有点困惑这个钩子应该放在哪里，live/dev 文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T14:57:57.280

使用[GitLab使用的](http://gitlabhq.com/)[Gitolite](https://github.com/sitaramc/gitolite)，您必须将您的接收后挂钩声明[为 VREF](http://sitaramc.github.com/gitolite/vref.html)（我[在此处详细说明](https://stackoverflow.com/a/10888358/6309)）。

这假设您`.gitolite.rc`包含一个`LOCAL_CODE`变量（请参阅[此脚本](https://github.com/VonC/compileEverything/blob/master/gitolite/install_or_update_gitolite.sh#L38-L44)），以便将您的 VREF 存储在您选择的目录中。

然后，您可以将该 VREF（它只是一个挂钩可执行文件）关联到存储库中的一个或多个存储`gitolite.conf`库`gitolite-admin`。（手动，因为通过 GitLab 没有接口）

# java - 将数组列表保存到缓存文件并检索它

> ID：13821972
> 
> 赞同：0
> 
> 时间：2012-12-11T14:35:13.130
> 
> 标签：java, android

我想创建两种方法。一个应该将数组列表存储到缓存中，另一个应该从缓存中检索数组列表。我尝试过的代码如下：

```
public class ByteConverter<T> {

public byte[] write_to_byte_array(ArrayList<T> list,File file){

    // write to byte array
    FileOutputStream fos = null;
    try {
        fos = new FileOutputStream(file);
    } catch (FileNotFoundException e1) {
        Log.d("file not found", "file not found", e1);
    }

    ByteArrayOutputStream baos = new ByteArrayOutputStream();
    DataOutputStream out = new DataOutputStream(baos);
    for (T element : list) {
        try {
            out.writeUTF((String) element);
        } catch (IOException e) {
            Log.d("Error converting List to byte array", "Error converting List to byte array", e);
        }
    }

    byte[] bytes = baos.toByteArray();

    int len1 = 0;
    while (len1 < bytes.length) {
        try {
            fos.write(bytes, 0, len1);
            len1++;
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
    try {
        fos.close();
    } catch (IOException e) {
        e.printStackTrace();
    }

    return bytes;

}

public String read_to_byte_array(byte[] bytes) throws IOException{

    // read from byte array
    String element = null;
    ByteArrayInputStream bais = new ByteArrayInputStream(bytes);
    DataInputStream in = new DataInputStream(bais);
    while (in.available() > 0) {
        element = in.readUTF();
    }

    return element; 
}

  } 
```

但是，上述方法不会将任何内容写入文件。我不知道为什么。谁能帮我？此外，我在这一行采取了 ClassCastException：

```
 out.writeUTF((String) element); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:49:47.377

首先，这`ClassCastExcetion`是您没有得到任何输出*的原因。*在您的代码写入文件之前引发异常...

其次，`ClassCastException`发生这种情况是因为元素不是`String`. 理论上，您可以调用`element.toString()`以获得字符串表示，但该表示可能不适合您的目的。

那么正确的做法是什么？

好吧，这取决于`list`.

*   如果他们实现`Serializable`（或`Externalizable`），那么您应该能够使用 Java 序列化。阅读Java 教程的[这一部分以获取更多详细信息。](http://docs.oracle.com/javase/tutorial/essential/io/objectstreams.html)

*   另一种选择可能是使用 JAXP 或 GS​​ON 之类的东西，它们可以分别将 POJO 序列化为 XML 和 JSON。

*   最后的回退是手动编码序列化方法（和相应的序列化方法）。

* * *

最后，我应该指出您的代码中的其他一些错误：

1）这段代码是错误的：

```
int len1 = 0;
while (len1 < bytes.length) {
   fos.write(bytes, 0, len1);
   len1++;
} 
```

这将写：

```
bytes[0]
bytes[0], bytes[1]
bytes[0], bytes[1], bytes[2]

   and so on. 
```

正确的写法`bytes`是：

```
fos.write(bytes); 
```

或者

```
fos.write(bytes, 0 bytes.length); 
```

2）您的异常处理逻辑不正确。在 3 或 4 个地方，您捕捉到异常、打印或记录某些内容……*然后继续，就好像没有出现任何问题一样*。您可能应该做的是让异常传播，并在更高级别处理它们。

3) 如果`write_to_byte_array`方法出现问题，很可能会泄漏文件描述符。最佳实践是在一个`finally`块中关闭资源，或者使用新的 Java 7 try-with-resource 语法。

4)`read_to_byte_array`和`write_to_byte_array`方法的名称违反了公认的 Java 风格准则。它们应该是`readToByteArray`（或者更好的是`readFromByteArray`）和`writeToByteArray`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-11T14:46:56.100

Rergarding `ClassCastException`，如果*元素*类型`T`不是 a`String`您将得到该异常，因为该对象不能被强制转换为`String`. 也许您正在寻找*element*`toString`的方法。

 *也看看`FileUtils`Apache Commons 的类和方法[`writeLines`](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html#writeLines%28java.io.File,%20java.lang.String,%20java.util.Collection%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T14:59:03.283

1.  使用 Serializable Object ，因为 ArrayList 实现了 Serializable ，所以必须实现 Serializable 。

2.  您自己可以自定义数据类型，例如：

    长度|值|长度|值....

    4字节|字节|4字节|字节....*

# java - Resumable.js 不发送二进制块

> ID：13821976
> 
> 赞同：1
> 
> 时间：2012-12-11T14:36:56.570
> 
> 标签：java, playframework-2.0

我正在使用 Resumable.js 上传文件，但问题是我收到所有块信息而不是二进制块这是上传期间发送的参数列表

```
data[resumableRelativePath]=Video.mov,  
data[resumableChunkNumber]=13,  
data[resumableChunkSize]=2097152,  
data[resumableIdentifier]=27349639-Video.mov,  
data[resumableTotalSize]=27349639,  
data[resumableFilename]=Video.mov 
```

# c# - 使用win32 api c#比较两个图像

> ID：13821980
> 
> 赞同：1
> 
> 时间：2012-12-11T14:37:21.767
> 
> 标签：c#, image-comparison

我有两张图片，我想比较两张图片并想有所不同。我搜索谷歌并找到了一个链接，我从中复制粘贴代码以使用 win32 api 进行图像比较。所以这是网址 [http://blog.bobcravens.com/2009/04/create-a-remote-desktop-viewer-using-c-and-wcf/](http://blog.bobcravens.com/2009/04/create-a-remote-desktop-viewer-using-c-and-wcf/)

我在这里粘贴代码。

```
 private void button1_Click(object sender, EventArgs e)
        {
        Bitmap _prevBitmap = new Bitmap(@"d:\prev.jpg");
        Bitmap _newBitmap = new Bitmap(@"d:\current.jpg");

        Rectangle bounds = GetBoundingBoxForChanges(_prevBitmap, _newBitmap);
        if (bounds == Rectangle.Empty)
        {
        }

        Bitmap diff = new Bitmap(bounds.Width, bounds.Height);
        Graphics g = Graphics.FromImage(diff);
        g.DrawImage(_newBitmap, 0, 0, bounds, GraphicsUnit.Pixel);
        g.Dispose();

        // Set the current bitmap as the previous to prepare
        //    for the next screen capture.
        //
        diff.Save(@"d:\diff.bmp");

        //return diff;
    }

    private Rectangle GetBoundingBoxForChanges(Bitmap _prevBitmap, Bitmap _newBitmap)
    {
        // The search algorithm starts by looking
        //    for the top and left bounds. The search
        //    starts in the upper-left corner and scans
        //    left to right and then top to bottom. It uses
        //    an adaptive approach on the pixels it
        //    searches. Another pass is looks for the
        //    lower and right bounds. The search starts
        //    in the lower-right corner and scans right
        //    to left and then bottom to top. Again, an
        //    adaptive approach on the search area is used.
        //

        // Note: The GetPixel member of the Bitmap class
        //    is too slow for this purpose. This is a good
        //    case of using unsafe code to access pointers
        //    to increase the speed.
        //

        // Validate the images are the same shape and type.
        //
        if (_prevBitmap.Width != _newBitmap.Width ||
            _prevBitmap.Height != _newBitmap.Height ||
            _prevBitmap.PixelFormat != _newBitmap.PixelFormat)
        {
            // Not the same shape...can't do the search.
            //
            return Rectangle.Empty;
        }

        // Init the search parameters.
        //
        int width = _newBitmap.Width;
        int height = _newBitmap.Height;
        int left = width;
        int right = 0;
        int top = height;
        int bottom = 0;

        BitmapData bmNewData = null;
        BitmapData bmPrevData = null;
        try
        {
            // Lock the bits into memory.
            //
            bmNewData = _newBitmap.LockBits(
                new Rectangle(0, 0, _newBitmap.Width, _newBitmap.Height),
                ImageLockMode.ReadOnly, _newBitmap.PixelFormat);
            bmPrevData = _prevBitmap.LockBits(
                new Rectangle(0, 0, _prevBitmap.Width, _prevBitmap.Height),
                ImageLockMode.ReadOnly, _prevBitmap.PixelFormat);

            // The images are ARGB (4 bytes)
            //
            int numBytesPerPixel = 4;

            // Get the number of integers (4 bytes) in each row
            //    of the image.
            //
            int strideNew = bmNewData.Stride / numBytesPerPixel;
            int stridePrev = bmPrevData.Stride / numBytesPerPixel;

            // Get a pointer to the first pixel.
            //
            // Note: Another speed up implemented is that I don't
            //    need the ARGB elements. I am only trying to detect
            //    change. So this algorithm reads the 4 bytes as an
            //    integer and compares the two numbers.
            //
            System.IntPtr scanNew0 = bmNewData.Scan0;
            System.IntPtr scanPrev0 = bmPrevData.Scan0;

            // Enter the unsafe code.
            //
            unsafe
            {
                // Cast the safe pointers into unsafe pointers.
                //
                int* pNew = (int*)(void*)scanNew0;
                int* pPrev = (int*)(void*)scanPrev0;

                // First Pass - Find the left and top bounds
                //    of the minimum bounding rectangle. Adapt the
                //    number of pixels scanned from left to right so
                //    we only scan up to the current bound. We also
                //    initialize the bottom & right. This helps optimize
                //    the second pass.
                //
                // For all rows of pixels (top to bottom)
                //
                for (int y = 0; y < _newBitmap.Height; ++y)
                {
                    // For pixels up to the current bound (left to right)
                    //
                    for (int x = 0; x < left; ++x)
                    {
                        // Use pointer arithmetic to index the
                        //    next pixel in this row.
                        //
                        if ((pNew + x)[0] != (pPrev + x)[0])
                        {
                            // Found a change.
                            //
                            if (x < left)
                            {
                                left = x;
                            }
                            if (x > right)
                            {
                                right = x;
                            }
                            if (y < top)
                            {
                                top = y;
                            }
                            if (y > bottom)
                            {
                                bottom = y;
                            }
                        }
                    }

                    // Move the pointers to the next row.
                    //
                    pNew += strideNew;
                    pPrev += stridePrev;
                }

                // If we did not find any changed pixels
                //    then no need to do a second pass.
                //
                if (left != width)
                {
                    // Second Pass - The first pass found at
                    //    least one different pixel and has set
                    //    the left & top bounds. In addition, the
                    //    right & bottom bounds have been initialized.
                    //    Adapt the number of pixels scanned from right
                    //    to left so we only scan up to the current bound.
                    //    In addition, there is no need to scan past
                    //    the top bound.
                    //

                    // Set the pointers to the first element of the
                    //    bottom row.
                    //
                    pNew = (int*)(void*)scanNew0;
                    pPrev = (int*)(void*)scanPrev0;
                    pNew += (_newBitmap.Height - 1) * strideNew;
                    pPrev += (_prevBitmap.Height - 1) * stridePrev;

                    // For each row (bottom to top)
                    //
                    for (int y = _newBitmap.Height - 1; y > top; y--)
                    {
                        // For each column (right to left)
                        //
                        for (int x = _newBitmap.Width - 1; x > right; x--)
                        {
                            // Use pointer arithmetic to index the
                            //    next pixel in this row.
                            //
                            if ((pNew + x)[0] != (pPrev + x)[0])
                            {
                                // Found a change.
                                //
                                if (x > right)
                                {
                                    right = x;
                                }
                                if (y > bottom)
                                {
                                    bottom = y;
                                }
                            }
                        }

                        // Move up one row.
                        //
                        pNew -= strideNew;
                        pPrev -= stridePrev;
                    }
                }
            }
        }
        catch (Exception ex)
        {
            int xxx = 0;
        }
        finally
        {
            // Unlock the bits of the image.
            //
            if (bmNewData != null)
            {
                _newBitmap.UnlockBits(bmNewData);
            }
            if (bmPrevData != null)
            {
                _prevBitmap.UnlockBits(bmPrevData);
            }
        }

        // Validate we found a bounding box. If not
        //    return an empty rectangle.
        //
        int diffImgWidth = right - left + 1;
        int diffImgHeight = bottom - top + 1;
        if (diffImgHeight < 0 || diffImgWidth < 0)
        {
            // Nothing changed
            return Rectangle.Empty;
        }

        // Return the bounding box.
        //
        return new Rectangle(left, top, diffImgWidth, diffImgHeight);
    } 
```

当 GetBoundingBoxForChanges() 调用时，我收到错误消息，错误消息是**尝试读取或写入受保护的内存。这通常表明其他内存已损坏。**

如果 ((pNew + x)[0] != (pPrev + x)[0]) 在此代码处发生错误

所以我无法找出原因。如何解决此错误。请指导。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T19:14:12.357

您可以使用托管图像处理库（例如[AForge.NET](http://www.aforgenet.com/framework/) ）来代替 Win32 API 。在[文档](http://www.aforgenet.com/framework/docs/)中查找`AForge.Imaging.Filters.Difference`类。它适用于`Bitmap`对象，因此您必须对程序进行最少的更改。

```
Bitmap overlayImage;
Bitmap sourceImage;

//ToDo: Load the two images.        

// Create filter.
Difference filter = new Difference(overlayImage);
// Apply the filter and return a new bitmap that is the difference between the source and overlay images.
Bitmap resultImage = filter.Apply(sourceImage);

// If you don't want a new image the you can apply the filter directly to the source image.
filter.ApplyInPlace(sourceImage); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-11T16:32:57.057

```
 bmNewData = _newBitmap.LockBits(...., _newBitmap.PixelFormat); 
```

这个算法隐含地假设一个像素有 4 个字节并且可以用`int*`. 但是，它未能提供该保证。在LockBits `_newBitmap.PixelFormat`() 中要求是**不够**的，它只是要求与原始图像使用的格式相同。例如，如果图像是 24bpp，你会遇到严重的崩溃，这很常见。

改为明确要求 32bppArgb。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-11T14:55:08.837

这是我在 C# 中用于计算图像差异的机制。请注意，它需要使用[unsafe](http://msdn.microsoft.com/en-us/library/chfa2zb8%28v=vs.71%29.aspx)指令进行编译。希望能帮助到你：

```
using System;
using System.Collections.Generic;
using System.Text;

using System.Drawing;
using System.Drawing.Imaging;
using log4net;

namespace ImageDiff
{
    public class ImageDifferences
    {
        private static ILog mLog = LogManager.GetLogger("ImageDifferences");

        public static unsafe Bitmap PixelDiff(Image a, Image b)
        {
            if (!a.Size.Equals(b.Size)) return null;
            if (!(a is Bitmap) || !(b is Bitmap)) return null;

            return PixelDiff(a as Bitmap, b as Bitmap);
        }

        public static unsafe Bitmap PixelDiff(Bitmap a, Bitmap b)
        {
            Bitmap output = new Bitmap(
                Math.Max(a.Width, b.Width),
                Math.Max(a.Height, b.Height),
                PixelFormat.Format32bppArgb);

            Rectangle recta = new Rectangle(Point.Empty, a.Size);
            Rectangle rectb = new Rectangle(Point.Empty, b.Size);
            Rectangle rectOutput = new Rectangle(Point.Empty, output.Size);

            BitmapData aData = a.LockBits(recta, ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);
            BitmapData bData = b.LockBits(rectb, ImageLockMode.ReadOnly, PixelFormat.Format32bppArgb);
            BitmapData outputData = output.LockBits(rectOutput, ImageLockMode.ReadWrite, PixelFormat.Format32bppArgb);

            try
            {
                byte* aPtr = (byte*)aData.Scan0;
                byte* bPtr = (byte*)bData.Scan0;
                byte* outputPtr = (byte*)outputData.Scan0;
                int len = aData.Stride * aData.Height;

                for (int i = 0; i < len; i++)
                {
                    // For alpha use the average of both images (otherwise pixels with the same alpha won't be visible)
                    if ((i + 1) % 4 == 0)
                        *outputPtr = (byte)((*aPtr + *bPtr) / 2);
                    else
                        *outputPtr = (byte)~(*aPtr ^ *bPtr);

                    outputPtr++;
                    aPtr++;
                    bPtr++;
                }

                return output;
            }
            catch (Exception ex)
            {
                mLog.Error("Error calculating image differences: " + ex.Message);
                return null;
            }
            finally
            {
                a.UnlockBits(aData);
                b.UnlockBits(bData);
                output.UnlockBits(outputData);
            }
        }
    }
} 
```

# ios - NSXMLParser parserDidStartDocument 冻结应用程序

> ID：13821981
> 
> 赞同：0
> 
> 时间：2012-12-11T14:35:37.857
> 
> 标签：ios, xml, parsing, refresh, freeze

我尝试在通话后添加一些操作

```
- (void)parserDidStartDocument:(NSXMLParser *)parser {
//NSLog(@"found file and started parsing");
alertView = [[UIAlertView alloc] initWithTitle:@"Caricamento..."
                                       message:@"\n"
                                      delegate:self
                             cancelButtonTitle:nil
                             otherButtonTitles:nil];

UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
spinner.center = CGPointMake(139.5, 75.5); // .5 so it doesn't blur
[alertView addSubview:spinner];
[spinner startAnimating];
[alertView show]; 
```

}

但它会冻结应用程序一段时间，然后在完成 XML 解析后，加载 AlertView，ecc。与 UIRefreshControl 相同。我向下滑动 tableView，解析时应用程序冻结，我看不到微调器旋转。

任何想法？

编辑：在这里我第一次调用解析器：

```
- (void)viewDidAppear:(BOOL)animated {
[super viewDidAppear:animated];

NSString * path = @"thexmlpath.xml";
if(!caricato)
    [NSThread detachNewThreadSelector:@selector(parseXMLFileAtURL:) toTarget:self withObject:path];
    //[self parseXMLFileAtURL:path];

caricato = YES;} 
```

当我使用 RefreshControl 时，我在这里调用：

```
- (void)refreshControlRequest{

NSLog(@"refreshing...");

NSString * path = @"thexmlpath.xml";
[self performSelector:@selector(parseXMLFileAtURL:) withObject:path];} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:45:13.240

希望对你有帮助

```
- (void)parserDidStartDocument:(NSXMLParser *)parser {
//NSLog(@"found file and started parsing");
dispatch_queue_t queue = dispatch_get_main_queue();
dispatch_async(queue, ^{
    alertView = [[UIAlertView alloc] initWithTitle:@"Caricamento..."
                                           message:@"\n"
                                          delegate:self
                                 cancelButtonTitle:nil
                                 otherButtonTitles:nil];

    UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    spinner.center = CGPointMake(139.5, 75.5); // .5 so it doesn't blur
    [alertView addSubview:spinner];
    [spinner startAnimating];
    [alertView show];
});
dispatch_release(queue);

} 
```

# spring - 如何在 Spring MVC-Spring Security 应用程序中处理 GWT RPC 调用的会话过期异常

> ID：13821984
> 
> 赞同：3
> 
> 时间：2012-12-11T14:37:30.657
> 
> 标签：spring, spring-mvc, spring-security, gwt-rpc

我有 Spring MVC 应用程序，其中安全性由 Spring Security 处理。

UI 是使用 GWT 构建的，它使用 RPC 方法从服务器获取数据。

我需要在 UI 上处理会话过期的情况：例如 RPC AsyncCallback 可以获得 SessionExpiredException 类型的异常并弹出窗口，其中包含“您的会话已过期，请单击刷新链接”之类的消息。

有人处理过这样的问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T18:00:52.177

我想为了处理传入的 GWT 调用，您使用一些 Spring MVC 控制器或一些 servlet。它可以有以下逻辑

```
try{
    // decode payload from  GWT call
    com.google.gwt.user.server.rpc.RPC.decodeRequest(...)
    // get spring bean responsible for actual business logic
    Object bean = applicationContext.getBean(beanName);
    // execute business logic and encode response
    return RPC.invokeAndEncodeResponse(bean, ….)
} catch (com.google.gwt.user.server.rpc.UnexpectedException ex) {
    // send unexpected exception to client
    return RPC.encodeResponseForFailure(..., new MyCustomUnexpectedException(), …) ;
} 
```

本案解决方案

```
HttpServletRequest request = getRequest() ; 
if (request.getRequestedSessionId() != null && !request.isRequestedSessionIdValid()) {
    return RPC.encodeResponseForFailure(..., new MyCustomSessionExpiredException(), …) ;
} else {
    // first code snippet goes here
} 
```

然后在客户端代码中捕获自定义会话过期异常。如果您不直接使用 RPC，请提供有关 GWT 和 Spring 之间的桥接实现的更多详细信息。

您还需要强制 GWT 编译器将 MyCustomSessionExpiredException 类型包含到序列化白名单中（以防止 GWT 安全策略停止向客户端传播异常的情况）。解决方案：在每个同步接口的每个方法签名中包含 MyCustomSessionExpiredException 类型：

```
@RemoteServiceRelativePath("productRpcService.rpc")
public interface ProductRpcService extends RemoteService {
    List<Product> getAllProducts() throws ApplicationException;
    void removeProduct(Product product) throws ApplicationException;
}

MyCustomSessionExpiredException extends ApplicationException 
```

然后在客户端代码中显示弹出窗口：

```
public class ApplicationUncaughtExceptionHandler implements GWT.UncaughtExceptionHandler {
    @Override        
    public void onUncaughtException(Throwable caught) {
        if (caught instanceof MyCustomSessionExpiredException) {
            Window.alert("Session expired");
        }
    }
}

// Inside of EntryPoint.onModuleLoad method
GWT.setUncaughtExceptionHandler(new ApplicationUncaughtExceptionHandler()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T19:15:48.840

我研究了一下并在此处上传了解决方案[http://code.google.com/p/gspring/source/browse/#svn%2Ftrunk%2Fsample%2Fsession-expired%253Fstate%253Dclose](http://code.google.com/p/gspring/source/browse/#svn%2Ftrunk%2Fsample%2Fsession-expired%253Fstate%253Dclosed)。

签出后用于`mvn jetty:run-war`查看演示并转到`rpc-security-sample/index.htm`

**有两种方法可以解决它**。

*第一个*是传递 GWT 的委托代理，它在方法调用期间`RemoteServlet`抛出。`SessionExpiredException`这需要`Exception`在每个 RPC 服务方法中声明。示例：[http ://code.google.com/p/gspring/source/browse/#svn%2Ftrunk%2Fsample%2Fsession-expired%253Fstate%253Dclosed](http://code.google.com/p/gspring/source/browse/#svn%2Ftrunk%2Fsample%2Fsession-expired%253Fstate%253Dclosed)

脚步：

1.  开发先拦截的新过滤器

2.  `SessionExpiredException`为简单起见，在每个可以继承的 RPC 方法服务中声明`RuntimeException`（实现者无需遵循此）

3.  开发父通用`AsyncCallback`处理程序

4.  使用[http://code.google.com/p/gspring/](http://code.google.com/p/gspring/)解决方案来处理所有传入的 RCP 请求。

*第二种*更简单：返回 401 HTTP 错误并在 UI 端处理（GWT 原生一般异常包含 HTTP 状态编号）。示例：[http ://code.google.com/p/gspring/source/browse/#svn%2Ftrunk%2Fsample%2Fsession-expired-401](http://code.google.com/p/gspring/source/browse/#svn%2Ftrunk%2Fsample%2Fsession-expired-401)

第二种方法最简单，不需要在服务方法合同中声明异常。但是，遵循第一种方法可以为您提供一些灵活性：它可以包含一些附加信息，例如上次登录时间 (for `SessionExpiredException`) 等。第二种方法还可以引入新的异常，这些异常是从`SecurityException`类似黑名单的用户继承的（例如，如果用户在他的会话）或者例如，如果用户像机器人一样经常执行相同的操作（可能会要求它传递验证码）等。

# jquery - .insertBefore Jquery 不工作？

> ID：13821987
> 
> 赞同：2
> 
> 时间：2012-12-11T14:37:43.357
> 
> 标签：jquery

我已经整理了一段简单的 Jquery，在单击锚标记（高级搜索）时，它会在其下方切换更多内容并移动搜索按钮，一切都按预期工作，除了当我切换回元素原始布局时，搜索按钮没有后退..有点难为为什么

我把它放在一个 jsfiddle [http://jsfiddle.net/richlewis14/fn9E8/1](http://jsfiddle.net/richlewis14/fn9E8/1)

这是我的 Jquery

```
$(document).ready(function() {
    $('#hiddenSearch').hide();
    $('#aSearch').click(function(e) {
        e.preventDefault();
        $('#hiddenSearch').slideToggle();
        if ($('#hiddenSearch').is(':visible')) {
            $('#searchButton').insertAfter('#last')
        } else {
            $('#searchButton').insertBefore('#aSearch')
        }
    });
}); 
```

我错过了什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-11T14:42:15.293

将该代码放入`slideToggle`' 回调中以确保“高级搜索”面板已完全显示/隐藏：

```
$(document).ready(function() {
    $('#hiddenSearch').hide();
    $('#aSearch').click(function(e) {
        e.preventDefault();
        $('#hiddenSearch').slideToggle(function() {
            if ($('#hiddenSearch').is(':visible')) {
                $('#searchButton').insertAfter('#last')
            } else {
                $('#searchButton').insertBefore('#aSearch')
            }
        });

    }); //a#search click function
}); // document function​ 
```

# wordpress - Wordpress 文件名与帖子名称相同 - 保留空格和破折号

> ID：13821989
> 
> 赞同：0
> 
> 时间：2012-12-11T14:37:49.643
> 
> 标签：wordpress

我已将其设置为使 filnename 使用以下代码与帖子标题匹配。

截至目前，所有空格和破折号都被删除了。

示例 - “帖子标题 2012-2013”​​变为“PostTitle20122013.mp3”

我想在文件名中保留空格和破折号。

文件都是.mp3。当您从 iTunes 购买音乐时，空格和破折号是“好的”并且是首选。

任何人都可以帮助我提供代码以允许这样做吗？

这是我当前放置在循环中的代码...

`<?php $customField = get_post_custom_values("audio"); if (isset($customField[0])) { echo '<h3><a href="'.$customField[0].'" class="button">'.get_the_title().'</a></h3>'; } ?>`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:34:03.933

我不知道为什么要去掉破折号，但是您可以尝试这样做以保留空格

```
<?php
$post_title = urlencode(get_the_title());
$customField = get_post_custom_values("audio");
if (isset($customField[0])) {
 echo '<h3><a href="'.$customField[0].'" class="button">'.$post_title.'</a></h3>';
}
?> 
```

# javascript - Firefox 中的 D3.js 转换错误？

> ID：13821994
> 
> 赞同：1
> 
> 时间：2012-12-11T14:36:37.937
> 
> 标签：javascript, svg, d3.js

看看[http://jsfiddle.net/EyrRD/](http://jsfiddle.net/EyrRD/)。我使用 D3.js 库通过更改宽度来为 SVG 矩形设置动画：

```
rect.transition().duration(2000).delay(500).ease("cubic-out").attr("width", 500);​ 
```

在其他浏览器中一切正常，但在 Firefox 中，当矩形宽度达到 300px 时动画突然停止。实际上，目标宽度是多少（> = 300）并不重要，它总是停在 300 像素处。这真的是一个错误吗？如果是这样，如何克服这一点？顺便问一下，D3.js 是这种 SVG 动画的最佳工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T14:55:58.590

您需要设置`width`SVG 的：

```
var svg = d3.select("body").append("svg").attr("width", 1000); 
```

在 Firefox 和其他浏览器中，您需要为 svg:svg 元素设置宽度和高度。这是一个 Firefox 错误，这是我的相关[SO 答案](https://stackoverflow.com/questions/13527125/d3-js-need-help-debugging-differences-in-chrome-safari-and-firefox/13532842#13532842)。

# java - 类打包时如何使用vim编译Java

> ID：13821997
> 
> 赞同：3
> 
> 时间：2012-12-11T14:38:04.200
> 
> 标签：java, macos, vim

假设Java类被打包，文件目录如下：

```
~/proj/bin/com/example/package/foo.class
~/proj/bin/com/example/package/foo1.class
~/proj/src/com/example/package/foo.java
~/proj/src/com/example/package/foo1.java 
```

类 foo 需要使用类 foo1。在终端中，这是我如何编译

```
cd ~/proj/bin
javac -d ./ ../src/com/example/package/foo.java 
```

（我已经设置了`$CLASSPATH = "~/proj/bin"`。似乎这种方式只有在我们 cd 到时才有效`~/proj/bin`。）

现在使用 vim（我在 Mac 上使用带有 spf13-vim 分布的 vim 插件的 MacVim）。当 .java 文件被 vim 保存时，它会自动使用 javac 编译。但是，vim 将当前文件夹视为`~/proj/bin/com/example/package/`，而不是`~/proj/bin`。因此，每当它使用来自 foo1 的类时，它都会在 foo.java 中显示错误。

java类打包时如何在保存时自动编译java？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T15:05:01.177

不要忘记 Vim 是一个通用的*文本编辑器*。尽管您选择的发行版提供的插件提供了快速编译单个文件的功能，但一旦您升级到更大的项目，请为工作选择合适的工具（例如，正确处理依赖项）。

因为这是 Java，所以有很多可用的工具：像*Ant*或*Maven*这样的标准构建工具提供了项目编译所需的所有功能，并且可以在 Vim 中通过`:make`. *或者，如果您的项目变得更大，切换到功能齐全的 IDE（如Eclipse*、*NetBeans*或*IntelliJ IDEA*）以从卓越的代码导航和调试功能中获益可能是有意义的。（您仍然可以在它们下面使用 Ant 或 Maven，并在 Vim 中同时编辑文件。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T02:09:12.403

我只是偶然找到了解决方案。由于我在 Mac OS X 中使用带有图形界面的 MacVim，所以我`~/proj/src/com/example/package/`在 finder 中打开文件夹，然后`foo.java`双击打开文件。我们在 vim 的问候`~/proj/src/com/example/package/`。

要使“保存时编译”工作，只需`:cd ~/proj/bin`在 vim 中使用命令来通知 vim 做所有事情，就好像我们在`~/proj/bin`. 现在它只是工作！

顺便说一句，我安装了 spf13-vimrc。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T15:10:05.410

像这里的其他人一样，我建议使用真正的构建工具而不是 vim hacks。一个不错的 Maven 替代品是[sbt](http://www.scala-sbt.org/release/docs/Getting-Started/Hello.html)（示例使用 Scala，但它同样适用于 Java），它需要较少的设置 - 不需要 POM 文件或类似文件，除非您真的想从 Maven 存储库中提取依赖项。

一切设置好后，您可以启动 sbt，键入`~ compile`，当检测到文件更改时，它将重新构建您的项目。（同样，您可以`~ test`在文件更改时重新构建和运行所有测试。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T14:55:48.853

我最近遇到了类似的问题，所以这就是我所做的：

我没有让 Vim 在保存时自动编译 Java，而是编写了一个完全执行我想要的编译的脚本，然后我在我的 vimrc 中映射了一个按键，以便在我想要的时候运行那个编译脚本。

因此，例如这里是脚本的一部分（我在 Windows 7 机器上，但它不应该太难适应）

```
set projectcp=..\classes;..\classes\lib\jackcess-1.2.7.jar;..\classes\lib\commons-logging.jar;..\classes\lib\commons-lang-2.0.jar;..\classes\lib\mail.jar
set compiledir=..\classes

echo Compiling authentication\LDAP_Authenticator.java ...
javac -d %compiledir% authentication\LDAP_Authenticator.java

echo Compiling data\ProgramData.java ...
javac -d %compiledir% data\ProgramData.java

echo Compiling data\Serializer.java ...
javac -cp %projectcp% -d %compiledir% data\Serializer.java

echo Compiling data\EmailEntry.java ...
javac -cp %projectcp% -d %compiledir% data\EmailEntry.java 
```

在我的 vimrc 中，我有这一行，它会自动保存当前文件，然后每次按 rr 时运行我的编译脚本

```
nnoremap <leader>rr :w<cr>:!compile-and-run.bat<cr> 
```

虽然你的会是：

```
nnoremap <leader>rr :w<cr>:!PATH/TO/SCRIPT.sh<cr> 
```

或者也许在你必须做的Mac上

```
nnoremap <leader>rr :w<cr>:!bash PATH/TO/SCRIPT.sh<cr> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-05T06:01:00.807

我正在使用 Arch Linux、java17-openjdk，当然还有 Vim。在同一个文件夹中，我有 foo.java 和 Bar.java

```
// Bar.java
public class Bar {
    String webSite = "Stack Overflow";
}

// foo.java
public class foo {
    public static void main(String[] args) {
        Bar myWebSite = new Bar();
        System.out.println(myWebSite.webSite);
    }
} 
```

在 bash 中，当我运行 java foo.java 时，出现错误：“找不到符号”。正确的方法是编译两个java文件：javac foo.java bar.java，它会生成两个文件.class：foo.class & bar.class。我们只是运行主类所在的新文件，在这种情况下，java foo（没有 .class），bash 将显示：堆栈溢出