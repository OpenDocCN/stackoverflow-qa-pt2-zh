# StackOverflow 问答 16113000-16113999

# asp.net - “无法加载指定的元数据资源”ASP.NET

> ID：16113001
> 
> 赞同：1
> 
> 时间：2013-04-19T20:29:23.410
> 
> 标签：asp.net, sql-server, entity-framework, visual-studio-2012, webforms

我收到错误“ `Unable to load the specified metadata resource`”。我是 asp.net 的新手，正在学习本教程：
[http ://www.asp.net/web-forms/tutorials/tailspin-spyworks/tailspin-spyworks-part-2](http://www.asp.net/web-forms/tutorials/tailspin-spyworks/tailspin-spyworks-part-2)

与教程不同，我使用的是 Visual Studio 2012 和 ms server 2012，我在启动网站时选择了新网站而不是 Web 应用程序。

我创建了一个实体数据源控件，然后使用提供的数据库创建了一个 ADO.NET 实体数据条目。然后当我尝试使用控件时，我得到了错误。

我读到它可能是连接字符串，所以这是我的。我花了几个小时试图修复它，有人可以帮忙吗？

这是我的连接字符串：

```
<add name="Entities" connectionString=" metadata=res://*/Data_Access.EDM_Commerce.csdl| res://*/Data_Access.EDM_Commerce.ssdl| res://*/Data_Access.EDM_Commerce.msl; provider=System.Data.SqlClient;provider connection string='data source=OWEN;initial catalog=Commerce.mdf;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework';" providerName="System.Data.EntityClient" /> 
```

我尝试将连接字符串更改为此：

```
<add name="Entities" connectionString="
         metadata=res://*/;
         provider=System.Data.SqlClient;provider connection string='data source=OWEN;initial catalog=Commerce.mdf;integrated security=True;MultipleActiveResultSets=True;App=EntityFramework';" providerName="System.Data.EntityClient" /> 
```

当我这样做时，我没有收到错误，但 DefaultContainerName 没有选项。

谢谢。

# java - Java Web 小程序无法在 Java 1.7.0_21 中启动

> ID：16113002
> 
> 赞同：-1
> 
> 时间：2013-04-19T20:29:34.800
> 
> 标签：java, applet

我们已经部署了 Java 小程序，到目前为止运行良好。实际上，它们在 32 位机器上继续运行良好，但在 64 位机器上它们昨天停止了。

错误的最后一行是...

匹配：运行 JVM 参数不匹配：有：<-Dsun.java2d.noddraw=true -Dsun.java2d.noddraw=true> !satisfy want:<>

这是 .jnlp 文件

```
<?xml version="1.0" encoding="utf-8"?>
<jnlp href="app.jnlp">
<!--<jnlp codebase="http://www.url.edu/directory" href="app.jnlp">-->
<information>
<title>App via Web Start</title>
<vendor>School</vendor>
<homepage href="http://www.url.edu"/>
<description>Application</description>
<description kind="short">Application</description>
<offline-allowed/>
</information>

<security>
  <all-permissions/>
</security>

<resources>
<j2se version="1.5+"/>
<property name="sun.java2d.noddraw" value="true"/>
<!-- your jar files -->
<jar href="v0.41/CC.jar" main="true"/>
<!-- Core jars -->
<extension name="pCSDT-Core" href="../Core/v0.41/Core.jnlp" />
<!-- OpenGL extensions -->
<extension name="java3d-latest" href="../media/java3d/webstart/release/java3d-latest.jnlp"/>
<extension name="jogl" href="../media/jogl/builds/archive/jsr-231-1.x-webstart-current/jogl.jnlp"/>
<extension name="gluegen-rt" href="../media/gluegen/webstart/gluegen-rt.jnlp" />
</resources>

  <applet-desc name="pCSDT Applet" main-class="CC.CCGui" width="1200" height="800">
  </applet-desc>

</jnlp> 
```

显然，问题出在上面的属性标签上。我试过删除它，然后我得到一个空错误。我已经阅读了`.jnlp`文件需要签名的位置（通过将`.jnlp`文件的副本放在 中`.jar`），但没有修复它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:33:22.983

1.  首先：**测试其他小程序是否在浏览器上运行**。
    [从 Java 站点 (Oracle) 检查安装](http://www.java.com/fr/download/installed.jsp)

2.  **测试失败**，小程序的内容不来。这意味着没有任何小程序可以在此浏览器上运行：您需要为浏览器安装正确的 jvm。对于 firefox 或 chrome，您需要 32 位 jvm。如果你有 IE64，那么你需要安装 jvm 64。你可以安装 32 和 64 没有问题。这就是我在我的机器上所做的： [下载java 64位版本](http://www.java.com/fr/download/faq/java_win64bit.xml)
    **没有办法避免这一步！**

3.  测试没问题，那么问题出在你的小程序上。我不知道原因，您必须搜索，查看评论中可能的重复项。

ps.：如果第2步解决了问题，请标记我的答案。但是，如果您在案例 3 中失败，请不要在此问题上添加评论。进行研究、打开聊天或提出新问题，stackoverflow 不应具有交互性。

# css - 与 IE8+、Chrome、Firefox 具有更一致的外观和感觉

> ID：16113004
> 
> 赞同：0
> 
> 时间：2013-04-19T20:29:48.137
> 
> 标签：css

我在获取某些 CSS3 属性时遇到问题，例如按钮上的圆角显示在我的 IE 8 浏览器中。圆角在 IE9+、Firefox 和 Chrome 中看起来很好。我在我的 MVC 4 Web 应用程序中使用了一些引导类。有什么方法可以使旧版本的 IE（例如 IE 8）具有更一致的样式？我听说过 CSS3 Pie，但想看看是否有其他可用的替代方案。任何人都可以提供任何建议吗？这是我的应用程序中包含文件的列表：

```
<head>

    <meta charset="utf-8" />
    <title>@ViewBag.Title</title>
    <link href="~/favicon.ico" rel="shortcut icon" type="image/x-icon" />
    <meta name="viewport" content="width=device-width" />
    <meta name="description" />
    <meta name="author" content="" />

    @*----------------------------JQUERY------------------------------------*@
    <script src="~/Scripts/jquery-1.9.1.js"></script>
    <script src="~/Scripts/jquery-migrate-1.1.1.js"></script>
    <script src="~/Scripts/jquery-ui-1.10.1.js"></script>
    <script src="~/Scripts/jquery-ui-1.10.2.custom.js"></script>
    <script src="~/Scripts/jquery.json-2.4.js"></script>
    <script src="~/Scripts/jquery.timepicker.js"></script>

    <link href="~/Content/themes/base/jquery.ui.all.css" rel="stylesheet" />
    <link href="~/Content/jquery.timepicker.css" rel="stylesheet" />

    @*----------------------------Modernizr------------------------------------*@
    <script src="~/Scripts/modernizr-2.5.3.js"></script>

    @*----------------------------Bootstrap------------------------------------*@
    <script src="~/Scripts/bootstrap.js"></script>
    <link href="~/Content/bootstrap.css" rel="stylesheet"/>
    <link href="~/Content/bootstrap-responsive.css" rel="stylesheet"/>

    @*-----------------------Bootstrap Form Helpser----------------------------*@
    <link href="~/Content/bootstrap-formhelpers-countries.flags.css" rel="stylesheet" />
    <link href="~/Content/bootstrap-formhelpers.css" rel="stylesheet" />

    <script src="~/Scripts/bootstrap-formhelpers-countries.en_US.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-countries.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-datepicker.en_US.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-datepicker.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-fonts.codes.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-fonts.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-fontsizes.codes.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-fontsizes.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-googlefonts.codes.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-googlefonts.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-languages.codes.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-languages.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-selectbox.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-states.en_US.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-states.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-timepicker.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-timezones.codes.js"></script>
    <script src="~/Scripts/bootstrap-formhelpers-timezones.js"></script>

    @*----------------------------Font Awesome----------------------------------*@
    <link href="~/Content/font-awesome.css" rel="stylesheet" />

    @*----------------------------Moment----------------------------------*@
    <script src="~/Scripts/moment.js"></script>

    @*----------------------------Site Specific----------------------------------*@
    <link href="~/Content/UrgentCareWaitWeb.css" rel="stylesheet" />
    <script src="~/Scripts/UrgentCareWeb.js"></script>

</head> 
```

# android - 相对布局字段放置不当

> ID：16113010
> 
> 赞同：3
> 
> 时间：2013-04-19T20:30:17.997
> 
> 标签：android, android-layout, android-relativelayout

只有 textView1 出现在屏幕上，按钮和编辑文本框没有出现。请检查我的代码。我是android开发的新手。我认为edittext和button的位置不正确。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/textView1" />

    <EditText
        android:id="@+id/edit_message"
        android:layout_width="match_parent"
        android:layout_height="10dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="10dp"
        android:ems="10"
        android:hint="@string/edit_message"/>

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/edit_message"
        android:layout_marginTop="49dp"
        android:layout_toRightOf="@+id/edit_message"
        android:onClick="sendMessage"
        android:text="@string/button_send" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:42:03.150

`RelativeLayout`没有`orientation`属性...删除它。`marginTop`另外，我认为如果将属性放在`below`other上，您想删除它们`Views`。您可能想`padding`改用。我不确定你是否可以在相同的右侧和下方，`view`但这可能会起作用。这就是我目前所看到的

**笔记**

`fill_parent`被贬低了。现在可以使用，但您最好习惯`match_parent`使用

我让你的代码与我给出的建议一起工作。见下文。注意`height`10dp 你可能看不到它，因为它不是很大

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="textView1" />

<EditText
    android:id="@+id/edit_message"
    android:layout_width="match_parent"
    android:layout_height="10dp"
    android:layout_alignParentLeft="true"
    android:layout_below="@+id/textView1"
    android:ems="10"
    android:hint="edit_message"/>

<Button
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/edit_message"
    android:onClick="sendMessage"
    android:text="button_send" />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:43:37.323

正确的代码。只需删除

```
android:layout_alignParentLeft="true"
 android:layout_marginTop="10dp" 
```

从 Edittext 并使用填充而不是 marginTop

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
      android:layout_marginLeft="0dp"
    android:layout_marginRight="0dp"
    android:layout_marginTop="0dp"
    android:background="#000000"
    android:gravity="center_horizontal"
    android:orientation="vertical">

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/textView1"
        android:textColor="#C8C8C8"
        android:textAppearance="?android:attr/textAppearanceMedium" />

        <EditText
            android:id="@+id/edit_message"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_below="@+string/textView1"
            android:hint="@string/edit_message"
           />

        <Button
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@+id/edit_message"
            android:layout_below="@+id/edit_message"
            android:layout_marginRight="20dp"
            android:layout_marginTop="10dp"
            android:onClick="sendMessage"
            android:text="@string/button_send" 
            android:textColor="#FFFFFF"
            />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:36:25.153

一切似乎都很好，除了你为什么不尝试在某个地方锚定你的`TextView`地方，左上角的父母说：

```
android:layout_alignParentTop="true"
android:layout_alignPatentLeft="true" 
```

此外，您可能想对此进行更多研究，但我觉得非常非常不鼓励使用 xml onClick 而是在 java 代码中注册 onClickListener。

# c++ - 如何在arm可执行文件中获取printf函数的地址

> ID：16113011
> 
> 赞同：0
> 
> 时间：2013-04-19T20:30:21.510
> 
> 标签：c++, assembly, arm, elf, relocation

我有责任为 ARM elf 可重定位文件制作加载器。我设法以某种方式解析了精灵，并设法进行了一些简单的重定位，但是我必须执行以下操作并且遇到了麻烦。我需要从我试图加载的这个 ELF 文件中调用 printf 函数，它必须与试图加载它的程序中的 printf 函数相同。（那是我的主机程序，用 ARM arch 的 c++ 编写）。我怎样才能得到这个 printf 地址，然后我怎样才能在 elf 文件中重新定位符号。（我用谷歌搜索发现这种类型的重定位使用 24 位 PC 相对寻址）谁能帮我提取 printf 的地址？提前谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:22:47.347

由于无法了解您的进度在哪里，最好的建议是指出一些源代码。[在仿生](https://android.googlesource.com/platform/bionic/+/master/linker/)git下检查 Android 的[链接器。](https://android.googlesource.com/platform/bionic/+/master/linker/linker.cpp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:29:45.363

如果您能理解 C++，请使用源 Luke。

*   [arm-reloc-property.cc](http://sourceware.org/cgi-bin/cvsweb.cgi/src/gold/arm-reloc-property.cc?cvsroot=src)
*   [arm-reloc-property.h](http://sourceware.org/cgi-bin/cvsweb.cgi/src/gold/arm-reloc-property.h?cvsroot=src)
*   [arm-reloc.def](http://sourceware.org/cgi-bin/cvsweb.cgi/src/gold/arm-reloc.def?cvsroot=src)
*   [elf32-arm.c](http://sourceware.org/cgi-bin/cvsweb.cgi/src/bfd/elf32-arm.c?cvsroot=src)

请参阅：*David Solomon*的[汇编程序和装载程序](http://www.davidsalomon.name/assem.advertis/asl.pdf)。[一些智慧的珍珠，一些古老的琐事]

 *据我了解，`printf`它在同一个文件中，您需要在运行时修补地址。在这种情况下，重定位是*24 位 PC 相对*重定位。答案是在这种情况下你什么都不做。由于可执行文件和实现都在同一个二进制文件中，因此 无论加载地址是什么， *24 位 PC 相关文件都已经重新定位。*

如果您要重新定位*共享库*，则过程会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-28T09:53:43.490

我找到了解决方案。当我得到 (unsigned int)printf 时，我得到了函数的实际 32 位地址。补丁代码必须添加到 ELF 文件中文本部分的末尾。现在在需要 24 位偏移的地方，将偏移插入到补丁代码中。现在这个补丁代码很难制作。

编辑：

像这样的东西：

bl printf 应该像 bl offset_to_patch_code 一样被解析

补丁代码应该在 .text 部分的底部。计算偏移量管道时要小心，使 pc 点 2 指令提前。补丁代码应该只服务器读入 printf 的 pc 地址。您不需要保存链接寄存器。*

# list - 在 Haskell 中从 [[Char]] 转换为自己的数据类型

> ID：16113013
> 
> 赞同：0
> 
> 时间：2013-04-19T20:30:26.327
> 
> 标签：list, haskell, type-conversion

```
scanl (\exp y -> scanl (\x -> if (isLetter x) then update exp (Literal x) "" else 
                    if x=='+' then update exp Epsilon "+" else
                    if x=='*' then update exp Epsilon "*" else
                    update exp Epsilon "|") y) Epsilon q 
```

我的数据类型是：

```
data Reg = Epsilon | Literal Char | Or Reg Reg |  Then Reg Reg |  Star Reg  deriving Eq 
```

和

```
update:: Reg -> Reg -> [Char] -> Reg 
update a b "" = (a `Then` b)
update a b "|"= (a `Or` b) 
update a b "*" = (Star a) 
update a b "+" = (plus a)
update a b "?" = (opt a) 
```

我正在尝试使用上面的函数将这样的 ["a|","bc"] 转换为 (Then a (Or bc)) ，但我不能使用 ParSec 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:31:56.787

请不要“手动”执行此操作，最终会一团糟。而是学习如何使用解析器。[ParSec](http://legacy.cs.uu.nl/daan/parsec.html)适用于较小的示例，并且您可以获得更具可读性和灵活性的代码。

# jquery - 如何在 Kendo Multi Select 上设置数据值？

> ID：16113029
> 
> 赞同：9
> 
> 时间：2013-04-19T20:31:30.550
> 
> 标签：jquery, telerik, kendo-ui

我正在使用剑道多选。我想将选定的值加载到多选中。如何在 Java Script 中设置数据值？我有以下脚本：

```
$('#selectedFilters').kendoMultiSelect({
                    dataSource: data,
                    dataTextField: 'name',
                    dataValueField: 'value',
                    filter: 'contains',
                    placeholder: "Add Filter",
                    delay: 0,
                    minLength: 2,
                    highlightFirst: true,
                    ignoreCase: true,
                    change: function (event) {
                        applyFilters();
                    },
                }); 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-19T21:01:26.447

您可以使用[`value()`](http://docs.kendoui.com/api/web/multiselect#methods-value)设置值的方法。

例如，给出以下 HTML：

```
<a href="#" id="button" class="k-button">Select</a>
<input id='selectedFilters'> 
```

和 JavaScript：

```
var data = [
    { name : "name1", value : "value1" },
    { name : "name2", value : "value2" },
    { name : "name3", value : "value3" },
    { name : "name4", value : "value4" },
    { name : "name5", value : "value5" },
    { name : "name6", value : "value6" }
];
var multiselect = $('#selectedFilters').kendoMultiSelect({
    dataSource    : data,
    dataTextField : 'name',
    dataValueField: 'value',
    filter        : 'contains',
    placeholder   : "Add Filter",
    delay         : 0,
    minLength     : 2,
    highlightFirst: true,
    ignoreCase    : true,
    change        : function (event) {
        console.log("change");
    }
}).data("kendoMultiSelect");

$("#button").on("click", function () {
    console.log("multiselect", multiselect);
    multiselect.value(["value1", "value2", "value6"]);
}); 
```

如果单击`button`多值得到`input`：`name1`和。`name2``name6`

**编辑**如果要添加到当前选定的值，请执行以下操作：

```
$("#button").on("click", function () {
    var selected = multiselect.value();
    var res = $.merge($.merge([], selected), ["value1", "value2", "value6"]);
    multiselect.value(res);
}); 
```

**注意**：由于某种原因，您不能重用`selected`数组来设置新值，因此您应该创建一个新值。

检查它在[这里运行](http://jsfiddle.net/OnaBai/LQx2z/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T14:20:29.113

有一种更简单的方法可以做到这一点。所有 kendo 控件都有丰富的客户端 API。所以这里是 MultiSelect 的 API 文档页面 - [http ://docs.kendoui.c​​om/api/web/multiselect](http://docs.kendoui.com/api/web/multiselect)

现在来解决您的问题-这是我的解决方案：

标记：

```
<select id="required" multiple="multiple" data-placeholder="Select attendees...">
            <option>Steven White</option>
            <option>Nancy King</option>
            <option>Anne King</option>
            <option>Nancy Davolio</option>
            <option>Robert Davolio</option>
            <option>Michael Leverling</option>
            <option>Andrew Callahan</option>
            <option>Michael Suyama</option>
            <option>Anne King</option>
            <option>Laura Peacock</option>
            <option>Robert Fuller</option>
            <option>Janet White</option>
            <option>Nancy Leverling</option>
            <option>Robert Buchanan</option>
            <option>Margaret Buchanan</option>
            <option>Andrew Fuller</option>
            <option>Anne Davolio</option>
            <option>Andrew Suyama</option>
            <option>Nige Buchanan</option>
            <option>Laura Fuller</option>
        </select> 
```

JavaScript：

```
// create MultiSelect from select HTML element
var required = $("#required").kendoMultiSelect().data("kendoMultiSelect"); 
```

现在为了设置选择框的选定值，您只需要使用 value() 方法。这是代码：要设置单个值：

```
required.value("Laura Fuller") 
```

要设置多个值：

```
required.value(["Laura Fuller","Laura Peacock"]); 
```

现在要清除您刚刚将空字符串设置为值的值

```
required.value(""); 
```

现在，如果您想将任何内容附加到已选择的列表中，您可以执行@OnaBai 显示他的代码段的操作。

这就是小部件的全部内容:)

希望这很有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T17:10:40.270

好吧，即使在我得到答案之后，我也很挣扎。My Kendo Grid 有 6,000 多个项目可供选择。它大部分时间都在工作。只是当我更新选择时才引起我的问​​题。

以下代码解决了我的问题：

```
// Remove previous selected Filters. (This was undocumented method. I got from Kendo)
multiSelect.dataSource.filter({});

// Set the new filters
multiSelect.value(newlySelectedFilters); 
```

# xcode - Xcode 4.6.2 应用程序在每秒运行一次时崩溃

> ID：16113036
> 
> 赞同：32
> 
> 时间：2013-04-19T20:32:15.680
> 
> 标签：xcode, xcode4.6

Xcode 4.6.2 似乎有很多错误。

当我第二次运行我的*任何*项目时，我会在第一秒内遇到 SIGABRT 崩溃。我完全删除了 Xcode 并重新安装，（是的，我尝试关闭并再次打开）。我还删除了命令行工具和模拟器，但这也无济于事。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-06-05T11:40:56.367

好的，我找到了解决方案。请打开菜单 Product -> Scheme -> Edit Scheme，选择左侧的 Run YouAppName.app，选项卡 Info。然后在调试器字段中选择 GDB 而不是 LLDB。

**UPD：在新的 Xcode 4.6.3 中，此错误已得到修复。因此，只需更新您的 Xcode。**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-06T11:50:41.163

找到了另一种无需将调试器移至 GDB 即可解决此问题的方法。我通常只是在应用程序运行时通过按来重新运行应用`⌘-R`程序。取而代之的是，从 Xcode 中终止应用程序`⌘-.`，等待 5 秒然后点击`⌘-R`运行它。通过说“我爱 Xcode”来计算 5 秒似乎也有帮助。

**编辑：**此问题已[在 4.6.3 中修复](https://itunes.apple.com/app/xcode/id497799835?mt=12)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-06-06T13:33:39.723

我想这与 iTunes 的最新更新（11.0.4）有关，因为我在安装更新后遇到了同样的问题。

我们可能不得不等到 Apple 解决了这个问题，然后继续使用上述似乎也适用于我的解决方案。

# objective-c - 如何暂时隐藏主菜单（NSMenu）？

> ID：16113041
> 
> 赞同：0
> 
> 时间：2013-04-19T20:32:30.547
> 
> 标签：objective-c, cocoa, nsmenu

我正在尝试实现一项功能来密码保护我的可可应用程序。因此，在我的 AppDelegate 中，如果在窗口上正确输入了密码，我将通过调用 NSApp runModelforWindow 方法调出主应用程序窗口。

它工作正常，除了在我允许用户更改密码的首选项中。所以这意味着为了防止用户黑客攻击，我必须隐藏主菜单，直到密码输入正确。

我不想通过使用 removeItemAtIndex 删除某些菜单项或以编程方式设置目标操作以调用该方法来调出首选项窗口。相反，我想暂时隐藏 [NSApp mainMenu]。我搜索了它，似乎找不到任何方法，比如 setHidden:YES 来隐藏它。

我试过 [[NSApp mainMenu] cancelTracking] 但它没有做这项工作

有什么简单的方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:45:10.500

您可以使用[`-setPresentationOptions:`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSApplication_Class/Reference/Reference.html#//apple_ref/occ/instm/NSApplication/setPresentationOptions%3a)NSApp 上的方法来隐藏和显示标准 OS UI 的许多部分，包括菜单栏和 Dock。请注意，您必须*同时*隐藏菜单栏和 Dock：

```
/* Hide */
[NSApp setPresentationOptions:[NSApp presentationOptions] |
                               NSApplicationPresentationHideMenuBar |
                               NSApplicationPresentationHideDock];

/* Show */
[NSApp setPresentationOptions:[NSApp presentationOptions] ^
                               NSApplicationPresentationHideMenuBar ^ 
                               NSApplicationPresentationHideDock]; 
```

不过，这是一种非常具有破坏性的 UI 体验。考虑在密码对话框出现在屏幕上时禁用您不希望用户访问的任何菜单项或 UI 元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:50:57.857

不幸的是，没有简单的方法来隐藏主菜单 - 它总是显示或隐藏（取决于 info.plist 标志）。以及 Dock 图标。请参阅 LSUIElement 了解这一点。最初隐藏时显示此菜单有一个技巧，但没有在运行时隐藏/显示它的好方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-16T17:28:36.243

如果您认真对待使用密码保护（使用）您的应用程序，隐藏菜单栏不会有太大帮助，正如您已经得出的结论。

为了防止匿名用户执行需要身份验证的操作，您实际上需要在代码中创建逻辑来保护这些操作并检查用户是否确实正确地进行了身份验证，每次他们尝试做某事（选择一个菜单项或按下一个按钮）。

话虽如此，您可以通过禁用相关菜单项来防止匿名用户打开首选项窗口。就我个人而言，我更喜欢实际禁用首选项窗口中的相关控件，以便用户可以探索不同的选项，但也了解他们需要进行身份验证。您可以遵循 Apple 用于 macOS 系统偏好设置窗口的模型，这将锁定许多（但不是全部）偏好设置窗格，具体取决于特定窗格以及用户是否进行了身份验证。

一个好的起点可能是 Apple 开发者网站上的相关文档。例如：[https ://developer.apple.com/documentation/securityfoundation](https://developer.apple.com/documentation/securityfoundation)

如果您仍然只想隐藏菜单栏，您可以随时执行以下操作：

```
[NSMenu setMenuBarVisible:(BOOL)onOff]; 
```

但我相信最好使用@jatoben 的答案中的解决方案，`NSApplication`因为`presentationOptions`这可以让您真正禁用功能性。只是隐藏菜单栏`[NSMenu setMenuBarVisible:(BOOL)onOff]`并不会禁用 menuItems 的快捷方式，因此您仍然可以使用`⌘,`.

在旁注中，我相信如果您只是使用显示密码对话框，您会省去所有这些麻烦

```
NSModalSession session = [NSApp beginModalSessionForWindow:passwordDialog];
[NSApp runModalSession:session]; 
```

这会以模态方式显示应用程序的对话框，这意味着所有其他窗口以及几乎所有菜单项都会自动禁用……</p>

# php - 当页面加载ajax时没有响应

> ID：16113042
> 
> 赞同：0
> 
> 时间：2013-04-19T20:32:31.603
> 
> 标签：php, jquery, ajax

我有进度条，它只有在页面没有加载时才起作用，如果页面加载例如将数据插入数据库进度条没有，只有在完成插入数据时才起作用，我的代码有什么问题？

```
<script> 
$(document).ready(function() {  
// 

    setInterval(function()  
        { 
    $.get("currentProgress.php", {  

    }, 
        function(data)    
            { 

    $('#progress_bar').width(data +"%");
    $('#progress_completed').html(parseInt(data) +"%"); 

            } 
        )},1000);  

}); 

</script> 
```

在 php 循环中：`$_SESSION['value'] +=1;`

在 currentProgress.php 中：`<?php session_start(); echo $_SESSION['value']; ?>`

# sql - SQL Server 备份命令通过 Perl/DBI 失败，但通过 DOS> SqlCmd 工作。为什么？

> ID：16113045
> 
> 赞同：0
> 
> 时间：2013-04-19T20:32:39.040
> 
> 标签：sql, database, perl, backup, dbi

我有一个简单的 Perl/DBI 程序来备份 SQL Server 数据库。该程序运行干净，没有产生错误，据说创建了数据库备份，但备份文件不存在！

当我通过 DBI 执行以下命令时，

```
backup database dz to disk='C:\SqlBackups\dz.perl' with init 
```

不创建备份文件。Perl 和 SQL 报告“为数据库 'y' 处理了 x 页，
但是当我执行 DOS> dir 时没有出现备份文件

当我通过 SqlCmd 执行类似的命令时，

```
backup database dz to disk='C:\SqlBackups\dz.sqlcmd' with init 
```

创建一个备份文件。

我正在运行 ActiveState Perl 版本这是为 Microsoft Windows 7 Professional Build 6.1（Build 7601；Service Pack 1）上的 MSWin32-x64-multi-thread 构建的 perl 5，版本 16，subversion 1 (v5.16.1)

这是程序

```
#!perl -w
#Test making database backups via Perl DBI 

#preparations
    use strict;  #require variable declaration 
    use DBI;      #database interface
    my $dbHandle = DBI->connect("dbi:ODBC:Driver={SQL Server};Server=DavidZokaites")  or die;
    $dbHandle->{TraceLevel} = "15|ALL";    #get maximum debugging information 

#loop over all databases that need a dump 
    foreach my $dbName (  qw < dz master model msdb my_test > ) 
    {
        #DBI method that runs but creates no dumps  
        my $query = "backup database $dbName to disk='C:\\SqlBackups\\$dbName.perl' with init";
        print $query, "\n"; 
        warn "\n$dbName\n";
        $dbHandle->do ($query)  or die; 

        #SQLCMD that works 
        $query = "backup database $dbName to disk='C:\\SqlBackups\\$dbName.sqlcmd' with init";
        print $query, "\n"; 
        my $sysCmd = "SqlCmd -S DavidZokaites -Q \"$query\" >> TestDbi.sqlcmd.out";
        system ($sysCmd) == 0
            or die "Unable to execute $sysCmd \n"; 
    } 
```

这里有一点 DBI stderr tracking

```
 DBI::db=HASH(0x297ba10) trace level set to 0x7f0fff00/15 (DBI @ 0x0/0) in DBI 1.622-ithread (pid 7712)

master
    !! info: '' CLEARED by call to do method
    -> do for DBD::ODBC::db (DBI::db=HASH(0x297bae8)~0x297ba10 'backup database master to disk='C:\SqlBackups\master.perl' with init') thr#1d97e8
    >> STORE         DISPATCH (DBI::db=HASH(0x297ba10) rc1/2 @3 g2 ima41c pid#7712) at C:/Perl64/site/lib/DBD/ODBC.pm line 424 via  at C:\David\DoBackup\TestDbi.pl line 20
1    -> STORE for DBD::ODBC::db (DBI::db=HASH(0x297ba10)~INNER 'Statement' 'backup database master to disk='C:\SqlBackups\master.perl' with init') thr#1d97e8
    !!DBD::ODBC unsupported attribute passed (Statement)
    STORE DBI::db=HASH(0x297ba10) 'Statement' => 'backup database master to disk='C:\SqlBackups\master.perl' with init'
1    <- STORE= ( 1 ) [1 items] at C:/Perl64/site/lib/DBD/ODBC.pm line 424 via  at C:\David\DoBackup\TestDbi.pl line 20
    SQLExecDirect backup database master to disk='C:\SqlBackups\master.perl' with init
    Processing non utf8 sql in unicode mode
    SQLExecDirect = 1
    !!dbd_error2(err_rc=1, what=Execute immediate success with info, handles=(26bd70,2699f00,29cd080)
    !SQLError(26bd70,2699f00,29cd080) = (01000, 4035, [Microsoft][ODBC SQL Server Driver][SQL Server]Processed 1376 pages for database 'master', file 'master' on file 1.)
    !! info: '' '[Microsoft][ODBC SQL Server Driver][SQL Server]Processed 1376 pages for database 'master', file 'master' on file 1\. (SQL-01000)' (err#0)
    <- do= ( -1 ) [1 items] at C:\David\DoBackup\TestDbi.pl line 20 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T10:18:06.437

您需要阅读[为什么我在 MS SQL Server 中的备份/恢复/some_other_procedure 不完整？](http://search.cpan.org/~mjevans/DBD-ODBC-1.43/FAQ#Why_does_my_backup/restore/some_other_procedure_in_MS_SQL_Server_not_complete?). 当您使用“do”方法未完成时，任何可以输出打印消息的命令/过程。使用准备/执行和 odbc_more_results。

# eclipse - Eclipse：我可以停靠“开放资源”对话框吗？

> ID：16113051
> 
> 赞同：1
> 
> 时间：2013-04-19T20:33:20.200
> 
> 标签：eclipse

我正在使用 Eclipse 3.7.2（随附并集成到 WebLogic 11g 中）

是否可以停靠“打开资源”对话框（ ctrl + shift + r ）？

我正在从另一个 IDE 迁移过来。我习惯/正在寻找类似“开放资源”对话框停靠在左侧的东西，我可以在其中输入文件名来获取它............而不必转到菜单或打开一个对话框。

Eclipse中有这样的东西吗？

如果没有，是否有一个插件可以做类似的事情？

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:31:24.173

那是不可能的。通常，如果您可以通过键盘快捷键*从任何地方*调用该功能，那么使用占用屏幕空间并且必须首先聚焦视图才能运行相同命令的替代实现没有任何好处。

其他替代方法是“导航”主菜单或工具栏，您可以在其中放置该功能的按钮（使用“自定义透视图”菜单）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-21T19:36:30.357

这并不是我在原始帖子中所要求的，但是包资源管理器或项目资源管理器中的“ctrl + f”使教科书出现在这些窗口中以输入文件名。

像我以前的工作流程一样，比 ctrl+shift+r 调用整个对话框然后键入要方便得多。

它在 Linux 上可用，而不是 Windows

**来自错误（报告）408375：**

> 搜索字段仅在支持此功能的操作系统上可用，例如某些 Linux 变体。Windows 不支持此功能。
> 
> 有关 Eclipse 本身的通用解决方案，请参阅错误 69200。

# c# - Iterating through object types in a list of parent type

> ID：16113059
> 
> 赞同：0
> 
> 时间：2013-04-19T20:33:31.643
> 
> 标签：c#, list, foreach

I am trying to iterate through a list of objects and only change the ones that match a particular type. My current code looks like this. (Platform is an extension of Entity, and entities is a list of type Entity)

```
foreach (Platform p in entities.OfType<Platform>) { p.doStuff() } 
```

I am getting the error "foreach cannot opperate on a 'method group'" Thanks for anyone's help. :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:36:09.413

Alright then :

```
foreach (Platform p in entities.OfType<Platform>())
 //Will loop through all object of Platform type in entites.OfType<Platform>() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:39:00.137

You can use LINQ and the "is" and "as" keywords.

```
foreach (object o in entities.Where(x => x is Platform))
{
    Platform p = o as Platform;
    p.doStuff();
} 
```

# c++ - 如何将 DeviceIOControl 移植到 ioctl？

> ID：16113062
> 
> 赞同：-1
> 
> 时间：2013-04-19T20:33:42.340
> 
> 标签：c++, c, linux, windows, porting

在我的理解中，DeviceIOControl 和 ioctl 是相同的功能。它们都向硬件发送控制代码并返回响应。为了重用代码，我正在尝试创建一个以跨平台方式工作的函数。因此，我决定使用 DeviceIOControl api，因为它是固定且特定的。问题是：我如何将 ioctl 映射到那个？

我目前有：

```
int DeviceIoControl_issueCommand(DeviceHandle handle, int command, void *input, ssize_t sizeof_input, void *output, ssize_t sizeof_output, uint32_t *bytes_written){
#if SYSTEMINFORMATION_ISWINDOWS
    int result = DeviceIoControl(handle,command,input,sizeof_input,output,sizeof_output,bytes_written,0);
    if (result == 0){
        result = -1; //-1 is the new error return
    }
    return result;
#else
    int result = ioctl(handle, command, input); //this doesnt work!
    return result;
#endif
}
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:40:55.320

**如果没有大量**的内部翻译，您的要求是不可能的`DeviceIoControl_issueCommand`。函数调用完全不同，需要不同的参数和数据。您可以通过声明 IOControl 类并为要支持的每种类型的 IO 功能添加成员函数来解决此问题。

```
class IOControl
{
public:
    void DoIoControlX();
    void DoIoControlY(int param1, int param2);
}; 
```

然后为您需要支持的每个平台提供一个实现。一种用于 Windows`DeviceIOControl`调用，一种用于支持`ioctl`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T18:25:48.887

我实际上发现有一个 IOCTL 可以将原始数据传入和传出驱动程序（至少对于硬盘驱动器）：HDIO_DRIVE_TASKFILE（[http://www.mjmwired.net/kernel/Documentation/ioctl/hdio.txt](http://www.mjmwired.net/kernel/Documentation/ioctl/hdio.txt)）

# c - 如何告诉 C 程序创建 n 个数组，通过 scanf 读取 n？

> ID：16113064
> 
> 赞同：1
> 
> 时间：2013-04-19T20:33:45.307
> 
> 标签：c, arrays, function, sum

我想创建一个小程序，对向量进行加、减、乘和叉积。

因此，我想让用户输入 - 向量的数量 - 所述向量的维度 - 他到底想对向量做什么（上述功能之一）

由于我对编程很陌生，也许我还没有找到正确的来源，在这种情况下，我将不胜感激在正确方向上的提示（尤其是要准确搜索的内容，因为我不是母语人士）

我的问题：

我不知道如何对 sum 函数进行编程，以便它始终对 n 个向量求和（n 是用户输入的向量数量）

我对其余功能有一个粗略的了解，所以也许我不会再用这个程序打扰你了，但这个总和问题对我来说确实是个问题。

我确定答案就在附近，但我似乎无法找到它。

提前非常感谢:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:38:53.123

您使用的是直接 C 还是 C++？

由于您想要动态内存分配，我真的推荐 C++，因为您可以将`std::vector`其用于您的数组，这非常简单。C 方法远没有那么简单。

[http://www.codeguru.com/cpp/cpp/cpp_mfc/stl/article.php/c4027/C-Tutorial-A-Beginners-Guide-to-stdvector-Part-1.htm](http://www.codeguru.com/cpp/cpp/cpp_mfc/stl/article.php/c4027/C-Tutorial-A-Beginners-Guide-to-stdvector-Part-1.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:40:49.410

这个问题解释了如何 malloc 二维数组[使用 malloc 分配具有不同行长的多维数组](https://stackoverflow.com/questions/1970698/c-malloc-for-two-dimensional-array)基本上你首先分配一个 n int 指针数组然后你循环遍历该数组并执行`array[i] = (int*)malloc(sizeof(int) * lenght))`

把它变成更多一步一步的方法；

1) 分配一个 int 指针数组 -`int** array = malloc(sizeof(int*) * n);` 您使用 ** 因为您的第一个指针指向数组的开头并且数组的类型为 int*，这些 int 指针中的每一个都将指向另一个数组。

2) 遍历数组 -`for (i = 0; i < n; i++)` 在 C 中没有简单的方法来 malloc 二维数组。您必须逐个构建每一行。

3）在循环内分配水平数组 -`array[i] = (int*)malloc(sizeof(int) * length)`

我链接到的问题包括一些检查以确保分配成功。我不知道这有多么必要，但它不会受到伤害。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:21:37.910

简单向量

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef int Type;

typedef struct vector {
    size_t size;
    size_t capacity;
    Type *array;
} Vector;

Vector *vec_make(){
    Vector *v;
    v = (Vector*)malloc(sizeof(Vector));
    v->size = 0;
    v->capacity=16;
    v->array=(Type*)realloc(NULL, sizeof(Type)*(v->capacity += 16));
    return v;
}

void vec_pushback(Vector *v, Type value){
    v->array[v->size] = value;
    if(++v->size == v->capacity)
        v->array=(Type*)realloc(v->array, sizeof(Type)*(v->capacity += 16));
}

size_t vec_size(Vector *v){
    return v->size;
}

Type *vec_getArray(Vector *v){
    return v->array;
}

void vec_free(Vector *v){
    free(v->array);
    free(v);
}

int main(){
    int n=5;//user input
    Vector *a, *b, *c;
    int i, sum=0, size;
    int *ap, *bp, *cp;
    a = vec_make(); b = vec_make(); c = vec_make();
    for (i=0; i<n; ++i) {
        vec_pushback(a, i+1);//1,2,3,4,5
    }
    vec_pushback(b, 2);
    vec_pushback(b, 4);
    vec_pushback(b, 5);
    vec_pushback(b, 6);
    vec_pushback(b, 10);
    ap=vec_getArray(a);bp=vec_getArray(b);cp=vec_getArray(c);
    for(i=0;i<a->size;++i){
        sum+=ap[i];
    }
    printf("sum(va)=%d\n", sum);
    size=vec_size(b);
    for(i=0;i<size;++i)
        vec_pushback(c, ap[i]+bp[i]);
    printf("va + vb = vc(");
    for(i=0;i<size;++i){
        printf("%d", cp[i]);
        if(i<size-1)
            printf(",");
        else
            printf(")\n");
    }
    vec_free(a);vec_free(b);vec_free(c);
    return 0;
} 
```

# mysql - MySQL 的 INFORMATION_SCHEMA CHARACTER_SETS 表中 maxlen 的含义

> ID：16113066
> 
> 赞同：1
> 
> 时间：2013-04-19T20:34:10.880
> 
> 标签：mysql, character-encoding, collation

来自mysql官网：

[http://dev.mysql.com/doc/refman/5.0/en/character-sets-table.html](http://dev.mysql.com/doc/refman/5.0/en/character-sets-table.html)

您将看到此表定义。

这里有人能说出'maxlen'是什么意思吗？字符编码的最大字节长度？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:37:48.480

基于所有`maxlen`值都在 1 和 4 之间的事实，并且`ascii`字符集具有`maxlen=1`，我会说它是字符集中字符的最大长度*（以字节*为单位）。

更多证明：`UTF8`has`maxlen=3`和`UTF16`has `maxlen=4`。

请记住，这`maxlen`就是 - 最大值。有些`UTF16`字符会少于 4 个字节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:43:31.923

从[文档](http://dev.mysql.com/doc/refman/5.1/en/show-character-set.html)中：

> Maxlen 列显示存储一个字符所需的最大字节数。

# java - 使用 JAX-RS 服务获取应用程序路径

> ID：16113067
> 
> 赞同：2
> 
> 时间：2013-04-19T20:34:12.643
> 
> 标签：java, servlets, jax-rs

我有一个 JAX-RS 服务，我想知道应用程序上下文路径是什么。之前，我使用 a`HttpServletRequest`来获取应用程序 url，使用这些方法：

```
public static String getApplicationBaseUrl(HttpServletRequest request) {
        return String.format("%s://%s:%s%s",
                request.getScheme(),
                request.getServerName(),
                request.getServerPort(),
                request.getContextPath());
} 
```

我在 JAX-RS 中看到了 @Context，但它只返回从 JAX 资源开始的路径。我可以做些什么来检索应用程序路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:49:39.687

我找到了答案。我在课堂上使用@Context `javax.ws.rs.core.UriInfo`，但是，我也可以注入`HttpServletRequest`。所以，现在我可以使用我编写的 getApplicationBaseUrl 方法了。

# java - 计算网络的连接数

> ID：16113068
> 
> 赞同：1
> 
> 时间：2013-04-19T20:34:32.310
> 
> 标签：java, recursion

问题是计算全连接网状拓扑网络的连接数。连接总数可以用公式 (nx (n-1)) / 2 计算。我们将递归实现公共类 ConnectionCount 方法，其他一切都交给我们。问题是我无法编译它。我试图弄清楚如何稍后调用该方法以便程序编译，但我很困惑。请帮忙，这是我目前所拥有的：

```
public class ConnectionCount {
private int n;

public int ConnectionCalc(int n){

if(n > 0){
    return(n-1) + ConnectionCalc(n-1);
    return ConnectionCalc(n);
}
else{
    return 0;
}
}   

public static int connectionCount(int n)
{
    return 0;
}

public static void main(String [] args)
{
    for (int i = 0; i < 20; i++)
    {
        System.out.println("connectionCount(" + i + ") returns " + connectionCount(i));

    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T00:25:38.113

只需删除该代码中的第二个返回即可。这是无法访问的，因为编译器无疑会告诉您。

# javascript - 如何将对象与 DOM 元素相关联

> ID：16113070
> 
> 赞同：14
> 
> 时间：2013-04-19T20:34:37.723
> 
> 标签：javascript, jquery

我的 JS 设置中有一个主对象，即：

```
var myGarage = {
    cars: [
        {
            make: "Ford",
            model: "Escape",
            color: "Green",
            inuse: false
        },
        {
            make: "Dodge",
            model: "Viper"
            color: "Red",
            inuse: true
        },
        {
            make: "Toyota",
            model: "Camry"
            color: "Blue",
            inuse: false
        }
    ]
} 
```

现在我把我的汽车循环起来，把它们放在一张桌子上。在表格中，我还有一个按钮，可以让我将汽车切换为“使用中”和“未使用”。

如何将每一行的 DOM 元素与其对应的汽车相关联，以便在切换“inuse”标志时，我可以更新主对象？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-19T20:44:47.130

您实际上可以将对象直接附加到节点：

```
var n = document.getElementById('green-ford-escape');
n.carObject = myGarage.cars[0];
n.onclick = function() {
  doSomethingWith(this.carObject);
} 
```

为了消除歧义，在某些情况下，更清楚的是编写上述事件处理程序来引用`n`而不是`this`：

```
n.onclick = function() {
  doSomethingWith(n.carObject);
} 
```

您也可以直接从附加事件中引用对象：

```
var n = document.getElementById('green-ford-escape');
n.onclick = function() {
    doSomethingWith(myGarage.cars[0]);
} 
```

在后一种情况下，*不必*`myGarage`是全局的。您可以这样做并期望它正常工作：

 *```
(function(){

    var myGarage = { /* ... etc ... */ };

    var n = document.getElementById('green-ford-escape');
    n.onclick = function() {
        doSomethingWith(myGarage.cars[0]);
    }

})(); 
```

节点的事件函数将正确地“保持”局部变量，有效地创建一个私有变量。

您可以在 Chrome/FF/IE 控制台中对此进行测试：

```
var o = {a: 1};
var n = document.createElement('div');
n.innerHTML = "click me";
n.data = o;
n.onclick = function() { n.data.a++; console.log(n.data, o); }
document.body.appendChild(n); 
```

您应该会看到控制台在每次单击时记录两个相同的对象，每个对象都有递增的`a`值。

**请注意**，设置`n.data`为基元不会创建引用。它将复制该值。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-19T20:49:05.947

我建议考虑`addEventListener`, 以及使您的对象符合`eventListener`接口的构造函数。

这样，您可以在对象、元素及其处理程序之间建立良好的关联。

为此，请创建一个特定于您的数据的构造函数。

```
function Car(props) {
    this.make = props.make;
    this.model = props.model;
   // and so on...

    this.element = document.createElement("div"); // or whatever

    document.body.appendChild(this.element);      // or whatever

    this.element.addEventListener("click", this, false);
} 
```

然后实现接口：

```
Car.prototype.handleEvent = function(e) {
    switch (e.type) {
        case "click": this.click(e);
        // add other event types if needed
    }
} 
```

然后`.click()`在原型上实现您的处理程序。

```
Car.prototype.click = function(e) {
    // do something with this.element...
    this.element.style.color = "#F00";

    // ...and the other properties
    this.inuse = !this.inuse
} 
```

因此，您可以循环遍历数组，并`Car`为每个项目创建一个新对象，它将创建新元素并添加侦听器。

```
myGarage.cars.forEach(function(obj) {
    new Car(obj)
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T21:03:23.393

您可以使用 HTML5 data-* 属性找出它是哪一行。你一定在做这样的事情

```
var table = $('<table>'); // Let's create a new table even if we have an empty table in our DOM. Simple reason: we will achieve single DOM operation (Faster)

for (var i=0; i<myGarbage.cars.length; i++) {
    // Create a new row and append to table
    var tr = $('<tr>').appendTo(table);

    var carObject = myGarbage.cars[i];
    // Traverse the JSON object for each car
    for (var key in carObject) {
        // Create other cells. I am doing the last one
        var td = $('<td>').appendTo(tr);
        var button = $('<button>').attr('data-carId', i).addClass('toggle-inuse').appendTo(td);
    }
}
// If en ampty table awaits me in DOM
$('#tableId').html(table.html()); 
```

现在我们将在按钮上添加事件监听器：-

```
$('.toggle-inuse').click(function() {
    var i = $(this).data('carId');
    myGarbage.cars[i].inuse = !myGarbage.cars[i].inuse; //Wow done
} 
```

试试这个！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T20:42:24.077

您需要在信息中包含某种 ID 或不同的行，否则您将不得不依赖数组索引来执行此操作。无论哪种方式，您都希望使用[数据属性](http://ejohn.org/blog/html-5-data-attributes/)来存储数据。

所以当你循环时：

```
for (var i = 0, l = array.length; i < l; i++) {
  var div = '<tr data-car="' + JSON.stringify(array[i]) + '" data-index="' + i + '"><td></td></tr>'
} 
```

在您的点击事件中：

```
$('button').click(function() {
    var carIndex = $(this).closest('tr').attr('data-index');
    var carData = $(this).closest('tr').attr('data-car');
    if (carData) carData = JSON.parse(carData);

    myGarage.cars[carIndex].inUse = true;
}) 
```

如果您将数据绑定到 DOM，您甚至可能不需要更新实际的 JS 数据。可以遍历表中的每一行并重新创建您从中创建表的数据对象。*

# javascript - 带有滚动条的 Javascript 下拉按钮

> ID：16113072
> 
> 赞同：0
> 
> 时间：2013-04-19T20:35:03.730
> 
> 标签：javascript, dropdownbox

我是 Javascript 的新手（和一般的编码）。我一直在尝试学习一些关于 Javascript 的 w3schools。我一直在尝试构建一个具有悬停效果的按钮，该按钮会在单击时下拉文本，并在再次单击时将其拉回。我试图将它放在我的一个页面上，这样我就可以为 SEO 提供一些文本，而不会让页面陷入困境。到目前为止，我已经想出了如何切换文本，但没有任何实际按钮或拖放效果的运气。任何帮助或建议将不胜感激。

```
<script language="javascript"> 
function toggle() {
    var ele = document.getElementById("toggleText");
    var text = document.getElementById("displayText");
    if(ele.style.display == "block") {
            ele.style.display = "none";
        text.innerHTML = "Show Text";
    }
    else {
        ele.style.display = "block";
        text.innerHTML = "HIDE TEXT";
    }
} 
</script> 
```

显示文本

文字在这里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:12:35.840

动画效果有两个主要选项 - CSS 过渡效果或用 JavaScript 编码的东西。

**CSS 过渡：**

您可以在 CSS 中添加过渡，这样如果元素的数值属性发生变化（例如高度、不透明度），浏览器就会对其进行动画处理，例如，如果您将高度从 0px 更改为 10px 并将过渡时间设置为 1 秒， 0.1 秒后将变为 1px，0.2 秒后将变为 2px，等等。您可以在此处阅读实现 CSS 过渡的详细信息：http: [//www.w3schools.com/css3/css3_transitions.asp](http://www.w3schools.com/css3/css3_transitions.asp)

**JavaScript**

您可以编写自己的自定义函数，但如果您在生活中制作不止一个动画，那么学习使用自定义 JavaScript 库（如 jQuery）可能更省时。您上面编写的整个函数可以重写为`$('#ele').slideToggle();`

* * *

与您的具体问题无关，您上面的方法对 SEO 无关紧要，因为 Google 不会看到您使用 JavaScript 添加的文本 - 据我了解，Google 可能也不太喜欢隐藏的文本。

# xml - 如何防止 SOAP XML 请求和响应进入我的 Apache 错误日志文件？

> ID：16113077
> 
> 赞同：0
> 
> 时间：2013-04-19T20:35:31.650
> 
> 标签：xml, apache, soap

新手问题：如何阻止我的 apache 错误日志文件被 SOAP XML 请求和响应填满？据我所知，这些不是错误，一切正常……唯一的指示是时间戳后的“[错误]”。它们包含图像数据，因此它们可能非常大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:43:07.670

检查[这个答案](https://stackoverflow.com/questions/3062156/reuse-and-add-to-500-error-to-get-better-stats-from-soap)，尤其是[mod_log_config 文档](http://httpd.apache.org/docs/2.2/mod/mod_log_config.html)的链接。

基本上，您应该能够自定义写入日志的信息类型。请注意，如果您使用任何需要特定格式的日志分析软件或脚本，您可能需要重新配置这些工具以了解您的新自定义格式。

更新：除了 mod_log_config 文档之外，这可能是最相关的。这些指令位于您的 apache 配置文件中，您可以在其中指定错误日志的位置和格式。在您的情况下，您需要条件检查环境中的标头或其他内容，以确定它是否是您要忽略的 SOAP 请求。

> 第三个参数是可选的，它控制是否根据服务器环境中是否存在特定变量来记录特定请求。如果为请求设置了指定的环境变量（或未设置，在 'env=!name' 子句的情况下），则将记录该请求。
> 
> 可以使用 mod_setenvif 和/或 mod_rewrite 模块在每个请求的基础上设置环境变量。例如，如果您想将服务器上所有 GIF 图像的请求记录在单独的日志文件中，而不是主日志中，您可以使用：
> 
> SetEnvIf Request_URI .gif$ gif-image CustomLog gif-requests.log common env=gif-image CustomLog nongif-requests.log common env=!gif-image
> 
> 或者，要重现旧的 RefererIgnore 指令的行为，您可以使用以下命令：
> 
> SetEnvIf Referer example.com localreferer CustomLog referer.log referer env=!localreferer

# knockout.js - 如何为单选按钮组显示一个验证图标

> ID：16113079
> 
> 赞同：1
> 
> 时间：2013-04-19T20:35:43.573
> 
> 标签：knockout.js, knockout-validation

我正在使用 knockoutjs 和敲除验证插件。

我想在“问题 1”标题之后显示无线电组的一个验证图标。我怎样才能做到这一点？

```
<label>Question 1:</label>
<div>
    <!-- ko foreach: answers -->
    <div>
        <input type="radio" data-bind="attr: { value: id, id: id, name: 'answers' }, checked: $parent.selectedValue" />
        <label data-bind="text: text, attr: { for: id }"></label>
    </div>
    <!-- /ko -->
</div> 
```

有一个[jsfiddle示例](http://jsfiddle.net/nSDC4/4/)

还有第二个问题——为什么在这个例子中总是显示验证图标？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:49:03.667

您可以使用 validationMessage 绑定处理程序将验证消息放在另一个元素上：

这显示了**验证消息**：

```
<label>Question 1:
    <span data-bind="validationMessage: selectedValue"></span> 
```

此示例显示了一个**自定义消息模板**：

```
<label>Question 1:
        <input style="display:none" 
            data-bind="value:selectedValue, 
                       validationOptions: {messageTemplate: 'icon'}" />
</label> 
```

或者更简单地说，如果你想使用**默认的 messageTemplate**：

```
<label>Question 1:
        <input style="display:none" data-bind="value:selectedValue" />
</label> 
```

至于第二个问题，messageTemplate 处理字段是否有效。这使您可以在字段有效时显示验证消息（例如绿色标记），并在字段无效时显示验证错误。

您可以将`if`绑定处理程序与`field`变量一起使用来控制消息何时可见。

```
<script type="text/html" id="icon">
    <span data-bind="if: field.isModified() && !field.isValid()">X<span>
</script> 
```

# regex - htaccess 正则表达式 将蜘蛛机器人保持在外面

> ID：16113081
> 
> 赞同：0
> 
> 时间：2013-04-19T20:35:52.340
> 
> 标签：regex, .htaccess, mod-rewrite

我无法让这部分 htaccess 工作：

* * *

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_USER_AGENT} ^(360Spider|acoon|ahrefs|aihit|altushost|amazon|archive|airjordanin|applecreek|baidu|bezeqint|bilbo|bork|botje|butterfly|buy) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(catchbot|career|cloud-ips|coach|contabo|corbina) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(dataprovider|digext|discobot|dotbot|ec2|edisterBot|energis|ephorus|exabot|exigen|ezooms|fastlink|genieo|huaweiSymantecSpider) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(iguana|ileadz|ipxserver|jaunty|jadynave|jikespider|keywordspy|kimsufi|kobala|komodiabot|koula|longchamp) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(magpie|majestic12|malas|Media|michael|MJ12bot|modx|mohitseo|MOR306|mulberryoculos) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(nashirnet|ncsa|netwiz|obot|openindex|osso|panscient|pathcom|PeoplePal|piki|presto|purity) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(santrex|scoutjet|shabnet|sistrix|siteexplorer|softlayer|sogou|sosospider|Spinn3r|splims|statsbot|survey) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(tangoo|targetdevelopmentdirect|thunderstone|trabajoo|track|trellian|trendictionbot|turnitinBot|TweetmemeBot|ukraine) [NC,OR]
RewriteCond %{HTTP_USER_AGENT} ^(vagabondo|vanekeris|vectranet|webcijfers|wise|yabrowser|yandex|yodao|zh-CN) [NC]

# ISSUE 403 / SERVE ERRORDOCUMENT
RewriteRule . - [F,L] 
```

* * *

开始时也没有 ^ ，最后没有 $ 但机器人仍然来，关于我在 php 中的统计信息 也尝试了Referer，Host和FORWARDED而不是HTTP_USER_AGENT，以及remote_address的数字。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:37:32.710

到目前为止，这条规则看起来不错，尽管我会改变两件事。

*   从规则中排除`robots.txt`，因为其中许多都遵守[机器人排除标准](http://en.wikipedia.org/wiki/Robots_exclusion_standard)。添加

    ```
    RewriteCond %{REQUEST_URI} !^/robots.txt$ 
    ```

    然后`robots.txt`用一组有意义的规则填充。如果要排除所有机器人

    ```
    User-agent: *
    Disallow: / 
    ```

*   更改`.`为`^`，因为主页尚未包含在此规则中

    ```
    RewriteRule ^ - [F] 
    ```

# jquery - jQuery 中 $(this) 的父级的子级

> ID：16113083
> 
> 赞同：0
> 
> 时间：2013-04-19T20:36:02.970
> 
> 标签：jquery, selector

我有以下html：

```
<div class="container">
    <img class="imgtab" src="http://cloudsmaker.com/hipsterwall/img/salto-al-norte.jpg">
    <p class="textab">Paragraph Text</p>
</div> 
```

使用以下 javascript：

```
$(document).ready(function () {
    //Initial Conditions
    $(".container > img").width("200px");
    $(".container > img").height("116px");
    $(".container > p").hide();

    //ON CLICK
    $(".container > img").toggle(function () { //fired the first time
        $(this).animate({
            width: "400px",
            height: "232px"
        });
        //$(**selectorneeded**).show();//This is where i need to show the text
    }, function () { // fired the second time 
        $(this).animate({
            width: "200px",
            height: "116px"
        });
        //$(**selectorneeded**).hide();//This is where i need to hide the text again
    });

}); 
```

这个想法是用户单击图像，图像从 200x116 像素扩展到 400x232 像素，然后在放大的图像下方出现一个文本块。然后，当再次单击图像时，文本消失并且图像恢复到较小的状态。

我需要能够引用 div 中的文本才能隐藏和显示它。

我将在同一页面上使用多个这些图像，因此我需要能够使用`this`选择器来引用已单击图像下的文本，而不是其他图像下的文本。

当我点击图像时，虽然`this`选择器变成了图像而不是 div，所以我不能参考

那也是div的孩子。我可以使用什么选择器来解决这个问题？

如果有帮助，这是一个 jsfiddle：http: [//jsfiddle.net/edddotcom/um5ct/](http://jsfiddle.net/edddotcom/um5ct/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:48:31.010

```
$(this).next(".textab").hide(); 
```

有评论建议`.siblings()`，但由于您知道文本就在图像下方，因此`.next()`似乎更合适。

# java - Android 更改 XML 布局 更改数据字段

> ID：16113089
> 
> 赞同：2
> 
> 时间：2013-04-19T20:36:11.347
> 
> 标签：java, android, xml

这是一个令人头疼的问题......（至少对我而言）我有一个联系人列表，其中显示了我的 Db 中的联系人列表。当用户点击其中一个联系人时，就会出现一个编辑活动。这一切都按照目前的布局完美运行，但我需要让编辑活动在名字之前显示姓氏条目。考虑到所有字段都应该具有一对一的关系，我继续在编辑活动中将姓氏的 editText(XML) 移动到名字的上方，认为这应该由 EditText 的 id 引用。这样做之后，程序现在在姓氏字段中显示名字，反之亦然。我试过在模拟器上擦除用户数据，没有区别。我已经意识到这可能是其中之一 UH-DUH！输入问题，但如果有人能指出对我来说显而易见的问题，将不胜感激。显示的所有代码都处于 now-working 状态：

我已经删除了一些与我的问题无关的块。感谢任何为我看这个的人！肯

XML:

```
 <EditText
        android:id="@+id/contact_edit_first_name"
        android:inputType="textPersonName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:hint="@string/contact_edit_first_name"
        android:imeOptions="actionNext"
        android:background="@color/warn" >
    </EditText>
     <EditText
        android:id="@+id/contact_edit_last_name"
        android:inputType="textPersonName"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:gravity="top"
        android:hint="@string/contact_edit_last_name"
        android:imeOptions="actionNext"
        android:background="@color/warn" >
    </EditText> 
```

这是显示 listView 行的联系人活动，并调用 createContact 发送添加、编辑或删除行的意图。

```
 public class ContactsActivity extends ListActivity implements
    LoaderManager.LoaderCallbacks<Cursor> {

  private SimpleCursorAdapter adapter; 

/** Called when the activity is first created. */
          @Override
  public void onCreate //DO THE ON CREATE STUFF -removed

    fillData();
    registerForContextMenu(getListView());

    Button add_contact = (Button) findViewById(R.id.add_contact_button);

    add_contact.setOnClickListener(new View.OnClickListener() {
        public void onClick(View view) {
            createContact();
        }
      });
   }

  // Create the options menu to INSERT from the XML file
  // removed - not relevant
  // return true for the menu to be displayed
  }

  // When the insert menu item is selected, call CreateContact
  //Removed
      createContact();
      return true;
    }
    return super.onOptionsItemSelected(item);
  }

  private void createContact() {
        Intent i = new Intent(this, ContactEditActivity.class);
        startActivity(i);
      }

   //The onListItemClick sends a URI which flags the contactEditActivity
   //that this is an edit rather than a new insert.

  @Override
  protected void onResume() {
   super.onResume();
   //Starts a new or restarts an existing Loader in this manager
   getLoaderManager().restartLoader(0, null, this);
  }

   //The fillData method binds the simpleCursorAadapter to the listView.
  private void fillData() {

    //The desired columns to be bound:
    String[] from = new String[] { ContactsDB.COLUMN_LAST_NAME, ContactsDB.COLUMN_FIRST_NAME };

    //The XML views that the data will be bound to:
    int[] to = new int[] {R.id.label2, R.id.label};
    // The creation of a loader using the initLoader method call.

    getLoaderManager().initLoader(0, null, this);
    adapter = new SimpleCursorAdapter(this, R.layout.contact_row, null, from,
        to, 0);
    setListAdapter(adapter);
  }
  // Sort the names by last name, then by first name
  String orderBy = ContactsDB.COLUMN_LAST_NAME + " COLLATE NOCASE ASC"
  + "," + ContactsDB.COLUMN_FIRST_NAME + " COLLATE NOCASE ASC" ;

  // Creates a new loader after the initLoader () call
  @Override
  public Loader<Cursor> onCreateLoader(int id, Bundle args) {
//ETC
  }

  @Override
  public void onLoadFinished(Loader<Cursor> loader, Cursor data) {
    adapter.swapCursor(data); //Call requires Min API 11
  }

  @Override
  public void onLoaderReset(Loader<Cursor> loader) {
    // swap the cursor adapter

} 
```

最后，这是联系人编辑代码，这可能是我悲痛的根源……也许不是。可能是保存状态没有映射到ID？

```
 @Override
  protected void onCreate(Bundle bundle) {
    super.onCreate(bundle); 
    setContentView(R.layout.activity_contact_edit);

    Log.i(TAG, "INSIDE ONCREATE");

    mCategory = (Spinner) findViewById(R.id.category);
    mLastName = (EditText) findViewById(R.id.contact_edit_last_name);
    mFirstName = (EditText) findViewById(R.id.contact_edit_first_name);
    mHomePhone = (EditText) findViewById(R.id.contact_edit_home_phone);
    mCellPhone = (EditText) findViewById(R.id.contact_edit_cell_phone);
//****************ECT. ETC.

   //DECLARE THE BUTTONS AND SET THE DELETE ENABLED FALSE - REMOVED - NOT PERTINANT
    Bundle extras = getIntent().getExtras();

    // Check if the URI is from a new instance or a saved record
    }

    // Set the save button to check the required fields, save the contact and finish
    saveButton.setOnClickListener(new View.OnClickListener() {
      public void onClick(View view) {
        if (TextUtils.isEmpty(mLastName.getText().toString()) ||
                TextUtils.isEmpty(mFirstName.getText().toString())) {
          makeToast();
        } else {
          setResult(RESULT_OK);
          finish();
        }
      }
    });

    // Set the delete button to delete the contact and finish - REMOVED - NOT PERTINANT

  private void fillData(Uri uri) {

    // QUERY PARAMETER projection - A list of which columns to return.
    // Passing null will return all columns, which is inefficient (but used now!)
    // null, null and null are: selection, selection args, and sort order for specific items

    Cursor cursor = getContentResolver().query(uri, null, null, null, null); 

    if (cursor != null) {
      cursor.moveToFirst();
      String category = cursor.getString(cursor
          .getColumnIndexOrThrow(ContactsDB.COLUMN_CATEGORY));
      for (int i = 0; i < mCategory.getCount(); i++) {
          String s = (String) mCategory.getItemAtPosition(i);
          Log.i("CATEGORY", s); ////////////////////////////////////////////
        if (s.equalsIgnoreCase(category)) {
          mCategory.setSelection(i);
        }
      };

      mLastName.setText(cursor.getString(cursor
          .getColumnIndexOrThrow(ContactsDB.COLUMN_LAST_NAME)));
      mFirstName.setText(cursor.getString(cursor
              .getColumnIndexOrThrow(ContactsDB.COLUMN_FIRST_NAME)));
      mHomePhone.setText(cursor.getString(cursor
              .getColumnIndexOrThrow(ContactsDB.COLUMN_PHONE_NUMBER)));
      mCellPhone.setText(cursor.getString(cursor
              .getColumnIndexOrThrow(ContactsDB.COLUMN_CELL_NUMBER)));
      mWorkPhone.setText(cursor.getString(cursor
              .getColumnIndexOrThrow(ContactsDB.COLUMN_WORK_NUMBER)));
      mFax.setText(cursor.getString(cursor
//****************ECT. ETC.  
      //close the cursor
    }
  }

  protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    saveState();
    outState.putParcelable(whateverContentProvider.CONTENT_ITEM_TYPE, contactUri);
  }

  @Override
  protected void onPause() {
    super.onPause();
    saveState();
  }
  private void saveState() {
    String category = (String) mCategory.getSelectedItem();
    String someLAST = mLastName.getText().toString().valueOf(findViewById(R.id.contact_edit_last_name));
    String lastName = mLastName.getText().toString();
    String firstName = mFirstName.getText().toString();
    String someFIRST = mFirstName.getText().toString().valueOf(findViewById(R.id.contact_edit_first_name));
    String homePhone = mHomePhone.getText().toString();
    String somePhone = mHomePhone.getText().toString().valueOf(findViewById(R.id.contact_edit_home_phone));
    String cellPhone = mCellPhone.getText().toString();
    String workPhone = mWorkPhone.getText().toString();
//****************ECT. ETC.
    //Some logging I used to show that the first name field still came up first
    //after changing the order of the editTexts.
    Log.i("LAST NAME", lastName);
    Log.i("SOME LAST", someLAST);
    Log.i("FIRST NAME", firstName);
    Log.i("SOME FIRST", someFIRST);
    Log.i("Home Phone", homePhone);
    Log.i("SOME PHONE", somePhone);

    // Save if first name and last name are entered
    // The program will save only last name when a user presses back button with text in last name

    if (lastName.length() == 0 || firstName.length() == 0) {
      return;
    }
    // ContentValues class is used to store a set of values that the contentResolver can process.
    ContentValues values = new ContentValues();
    values.put(ContactsDB.COLUMN_CATEGORY, category);
    values.put(ContactsDB.COLUMN_LAST_NAME, lastName);//ANNIE
    values.put(ContactsDB.COLUMN_FIRST_NAME, firstName);
    values.put(ContactsDB.COLUMN_PHONE_NUMBER, homePhone); 
//****************ECT. ETC.

    if (contactUri == null) {
      // Create a new contact
      contactUri = getContentResolver().insert(whateverContentProvider.CONTENT_URI, values);
    } else {
      // Update an existing contact
      getContentResolver().update(contactUri, values, null, null);
    }
  }
//MAKE A TOAST DOWN HERE - REMOVED - NOT PERTINANT
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:48:13.273

您是否尝试过清理项目（重新生成 de R）。另外，请尝试重新启动您的 IDE。

这可能看起来很愚蠢，但实际上可以解决问题......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T20:58:52.877

尝试清理您的项目。Eclipse 中有时会发生奇怪的事情。

# css - html5文档中div之间的空间

> ID：16113091
> 
> 赞同：0
> 
> 时间：2013-04-19T20:36:22.577
> 
> 标签：css

我的问题很简单。如何删除 div 标签之间的空格？

这是我的 html 文档：

```
<div class="nav">
    <div>option 1</div>
    <div>option 2</div>
    <div>option 3</div>
    <div>option 4</div>
</div> 
```

和CSS

```
div.nav {
    border:1px solid;
}

div.nav > div {
    display:inline-block;
    background-color: #CCC;
    padding: 10px;
    margin:0
} 
```

这是小提琴，您可以在其中看到此 [http://jsfiddle.net/dmsf/7Szjw/3/](http://jsfiddle.net/dmsf/7Szjw/3/)

文档时间是 html5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:39:46.430

尝试这个

```
<div class="nav">
    <div>option 1</div><div>option 2</div><div>option 3</div><div>option 4</div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:41:00.763

您必须添加 float: left; 到 div.nav > div 像这样：

```
div.nav {
    border:1px solid;
}

div.nav > div {
    display:inline-block;
    background-color: #CCC;
    padding: 10px;
    margin:0;
    float: left;
} 
```

# php - 正则表达式不正确匹配？

> ID：16113092
> 
> 赞同：0
> 
> 时间：2013-04-19T20:36:23.653
> 
> 标签：php, html, regex, preg-match

我正在尝试搜索与模式中给出的正则表达式匹配的主题，但它无法正常工作。我想匹配一个数字/10，然后是一个邮政编码

例如，如果字符串是“hello 3/10 HU2”，我希望 preg_match 函数匹配 3 和邮政编码，并且它需要按照这个顺序

奇怪的是，当我以相反的顺序尝试 preg_match 时，HU2 3/10 它可以工作，但是当我更改它周围的代码时，它无法识别值 3。

任何帮助，将不胜感激

下面的代码适用于订单 HU2 3/10 但我需要它以相反的顺序

```
<?php

    preg_match('/([A-Za-z]{1,2}[0-9][A-Za-z0-9]?) ([0-9]{1,2})/', "HU2 3/10", $matches);    

    echo $matches[1];
    echo "<br>";
    echo $matches[2];

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:40:21.520

如果你改变它，你必须`/10`在模式中包含 。请注意，您可以更改分隔符，这样您就不必转义正斜杠：

```
preg_match('~([0-9]{1,2})/10 ([A-Za-z]{1,2}[0-9][A-Za-z0-9]?)~', "3/10 HU2", $matches); 
```

`[0-9]`可以替换为`\d`。此外，如果`10`是一个可变数字，这也很容易考虑：

```
preg_match('~(\d{1,2})/\d+ ([A-Za-z]{1,2}\d[A-Za-z0-9]?)~', "3/10 HU2", $matches); 
```

作为最后的优化，`i`修饰符的使用，让我们省略一半的字母（它使模式不区分大小写）：

```
preg_match('~(\d{1,2})/\d+ ([A-Z]{1,2}\d[A-Z0-9]?)~i', "3/10 HU2", $matches); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:43:27.707

你不匹配/ 10，是吗？

```
(\d{1,2})/10 ([A-Za-z]{1,2}\d\w?) 
```

火柴

你好 3/10 HU2

第 1 组：3
第 2 组：HU2

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:54:03.083

这是我用各种字符串尝试过的正则表达式，似乎可以工作：

```
Regex: ([^ ]+) *(\d*\/10) *([A-Za-z0-9]+) *(.*)

Test strings:
1) hello 3/10 HU2
2) test this regex 3/10 HU2 param1 param2
3) testid 33323/10 HU2332GG param1 param2 
```

我不太确定所有要求，但这可以作为您的正则表达式的基础。您还可以在此处使用在线正则表达式工具快速验证您的正则表达式： [http ://www.regexplanet.com/advanced/java/index.html](http://www.regexplanet.com/advanced/java/index.html)

# mysql - 如何优化一周中某天的数据聚合，一个月前的一天中的某个时间

> ID：16113095
> 
> 赞同：1
> 
> 时间：2013-04-19T20:36:27.337
> 
> 标签：mysql, graph, charts, aggregate

情况如下：

我有一个 SAAS 应用程序，它是一个简单的 RSS Feed 阅读器。我想大多数人都知道这是什么——用户订阅 RSS 提要，然后从中读取项目。没什么新鲜的。一个提要可以有多个订阅者。

我已经为用户实现了一些统计数据，但我认为我没有选择正确的方法，因为随着用户和提要数量的增长，事情变得越来越慢。

这就是我现在正在做的事情：

1.  每小时获取每个提要的文章总数：

    ```
    SELECT COUNT(*) FROM articles WHERE feed_id=? 
    ```

2.  获取先前的值来计算增量（这有点慢）：

    ```
    SELECT value FROM feeds_stats WHERE feed_id=? AND name='total_articles' ORDER BY date DESC LIMIT 1 
    ```

3.  插入新值和增量：

    ```
    INSERT INTO feeds_stats (date,feed_id,name,value,delta) VALUES ('".date("Y-m-d H:i:s",$global_timestamp)."','".$feed_id','total_articles','".$value."','".($value-$old_value)."') 
    ```

4.  为每个用户获取他的提要，并为每个提要获取他已阅读的文章数量：

    ```
    SELECT COUNT(*) FROM users_articles ua JOIN articles a ON a.id=ua.article_id WHERE a.feed_id='%s' AND ua.user_id='%s' AND ua.read=1 
    ```

users_articles 是一个表，其中包含每个用户每篇文章的阅读状态

5.  然后再次获取增量：

    ```
    SELECT value FROM users_feeds_stats WHERE user_id='?' AND feed_id='?' AND name='total_reads' ORDER BY date DESC LIMIT 1 
    ```

6.  并插入新值 + delta：

    ```
    INSERT INTO users_feeds_stats (date,user_id,feed_id,name,value,delta) VALUES ('".date("Y-m-d H:i:s",$global_timestamp)."','".$user_id."','".$feed_id."','total_reads','".$value."','".($value-$old_value)."') 
    ```

**处理完用户的所有提要后，将进入聚合部分**：

这有点棘手，我认为这里应该有很大的优化空间。这是 PHP 中的实际聚合函数：

```
<?php

function aggregate_user_stats($user_id=false,$feed_id=false){
    global $global_timestamp;
    // defined dimensions
    $feed_types[0] = array("days_back" => 31, "group_by" => "DATE_FORMAT(date, '%Y-%m-%d')");
    $feed_types[1] = array("days_back" => 31, "group_by" => "WEEKDAY(date)+1");
    $feed_types[2] = array("days_back" => 31, "group_by" => "HOUR(date)");

    if($user_id){
        $where = " WHERE id=".$user_id;
    }

    $feed_where = "";
    $getusers = mysql_query("SELECT id FROM users".$where)or die(__LINE__." ".mysql_error());
    while($user = mysql_fetch_assoc($getusers)){
        if($feed_id){
            $feed_where = " AND feed_id=".$feed_id;
        }

        $user_feeds = array();
        $getfeeds = mysql_query("SELECT feed_id FROM subscriptions WHERE user_id='".$user["id"]."' AND active=1".$feed_where)or die(__LINE__." ".mysql_error());
        while($row = mysql_fetch_assoc($getfeeds)){
            foreach($feed_types as $tab => $type){
                $getdata = mysql_query("
                SELECT ".$type["group_by"]." AS date, name, SUM(delta) AS delta FROM feeds_stats WHERE feed_id = '".$row["feed_id"]."' AND name='total_articles' AND date > DATE_SUB(NOW(), INTERVAL ".$type["days_back"]." DAY) GROUP BY name, ".$type["group_by"]." 
                UNION 
                SELECT ".$type["group_by"]." AS date, name, SUM(delta) AS delta FROM users_feeds_stats WHERE user_id = '".$user["id"]."' AND feed_id = '".$row["feed_id"]."' AND name='total_reads' AND date > DATE_SUB(NOW(), INTERVAL ".$type["days_back"]." DAY) GROUP BY name, ".$type["group_by"]."
                ")or die(__LINE__." ".mysql_error());
                $data = array();
                while($row = mysql_fetch_assoc($getdata)){
                    $data[$row["date"]][$row["name"]] = $row["delta"];
                }
                if(count($data)){
                    db_start_trx();
                    mysql_query("DELETE FROM stats_feeds_over_time WHERE feed_id='".$row["feed_id"]."' AND user_id='".$user["id"]."' AND tab='".$tab."'")or die(__LINE__." ".mysql_error());
                    foreach($data as $time => $keys){
                        mysql_query("REPLACE INTO stats_feeds_over_time (feed_id,user_id,tab,date,total_articles,total_reads,total_favs) VALUES ('".$row["feed_id"]."','".$user["id"]."','".$tab."','".$time."','".$keys["total_articles"]."','".$keys["total_reads"]."','".$keys["total_favs"]."')")or die(__LINE__." ".mysql_error());
                    }
                    db_commit_trx();
                }
            }
        }
    }
} 
```

一些注意事项：

编辑：以下是所涉及表的 DDL：

```
CREATE TABLE `articles` (
  `id` INTEGER(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `feed_id` INTEGER(11) UNSIGNED NOT NULL,
  `date` INTEGER(10) UNSIGNED NOT NULL,
  `date_updated` INTEGER(11) UNSIGNED NOT NULL,
  `title` VARCHAR(1000) COLLATE utf8_general_ci NOT NULL DEFAULT '',
  `url` VARCHAR(2000) COLLATE utf8_general_ci NOT NULL DEFAULT '',
  `author` VARCHAR(200) COLLATE utf8_general_ci NOT NULL DEFAULT '',
  `hash` CHAR(32) COLLATE utf8_general_ci NOT NULL DEFAULT '',
  PRIMARY KEY (`id`),
  UNIQUE KEY `feed_id_hash` (`feed_id`, `hash`),
  KEY `date` (`date`),
  KEY `url` (`url`(255))
)ENGINE=InnoDB
AUTO_INCREMENT=0
CHARACTER SET 'utf8' COLLATE 'utf8_general_ci'
COMMENT='';

CREATE TABLE `users_articles` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `user_id` INTEGER(11) UNSIGNED NOT NULL,
  `article_id` INTEGER(11) UNSIGNED NOT NULL,
  `subscription_id` INTEGER(11) UNSIGNED NOT NULL,
  `read` TINYINT(4) UNSIGNED NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`),
  UNIQUE KEY `user_id` (`user_id`, `article_id`),
  KEY `article_id` (`article_id`),
  KEY `subscription_id` (`subscription_id`)
)ENGINE=InnoDB
CHECKSUM=1 AUTO_INCREMENT=0
CHARACTER SET 'utf8' COLLATE 'utf8_general_ci'
COMMENT='';

CREATE TABLE `feeds_stats` (
  `id` INTEGER(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `feed_id` INTEGER(11) UNSIGNED NOT NULL,
  `date` DATETIME NOT NULL,
  `name` VARCHAR(50) COLLATE utf8_general_ci NOT NULL DEFAULT '',
  `value` INTEGER(11) NOT NULL,
  `delta` INTEGER(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `name` (`name`),
  KEY `feed_id` (`feed_id`),
  KEY `date` (`date`)
)ENGINE=InnoDB
AUTO_INCREMENT=0
CHARACTER SET 'utf8' COLLATE 'utf8_general_ci'
COMMENT='';

CREATE TABLE `users_feeds_stats` (
  `id` INTEGER(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `user_id` INTEGER(11) UNSIGNED NOT NULL DEFAULT '0',
  `feed_id` INTEGER(11) UNSIGNED NOT NULL,
  `date` DATETIME NOT NULL,
  `name` VARCHAR(50) COLLATE utf8_general_ci NOT NULL DEFAULT '',
  `value` INTEGER(11) NOT NULL,
  `delta` INTEGER(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `name` (`name`),
  KEY `feed_id` (`feed_id`),
  KEY `user_id` (`user_id`),
  KEY `date` (`date`)
)ENGINE=InnoDB
AUTO_INCREMENT=0
CHARACTER SET 'utf8' COLLATE 'utf8_general_ci'
COMMENT='';

CREATE TABLE `stats_feeds_over_time` (
  `feed_id` INTEGER(11) UNSIGNED NOT NULL,
  `user_id` INTEGER(11) NOT NULL,
  `tab` INTEGER(11) NOT NULL,
  `date` VARCHAR(30) COLLATE utf8_general_ci NOT NULL DEFAULT '',
  `total_articles` DOUBLE(9,2) UNSIGNED NOT NULL,
  `total_reads` DOUBLE(9,2) UNSIGNED NOT NULL,
  `total_favs` DOUBLE(9,2) UNSIGNED NOT NULL,
  PRIMARY KEY (`feed_id`, `user_id`, `tab`, `date`)
)ENGINE=InnoDB
AUTO_INCREMENT=0 
CHARACTER SET 'utf8' COLLATE 'utf8_general_ci'
COMMENT=''; 
```

在聚合函数的末尾，表 stats_feeds_over_time 中有一个 REPLACE。该表仅包含将显示在图表上的记录，因此实际的绘图过程不涉及繁重的查询。

最后，这是由此产生的图表：

![在此处输入图像描述](https://i.stack.imgur.com/U31IH.png)

![在此处输入图像描述](https://i.stack.imgur.com/55sH9.png)

![在此处输入图像描述](https://i.stack.imgur.com/X7Lqr.png)

如果有人指出我在哪里以及如何优化这个解决方案的正确方向，我会很高兴，即使这意味着放弃 MySQL 进行统计。

[我在RRDTool](http://oss.oetiker.ch/rrdtool/)方面有很长的经验，但这里的情况有所不同，因为“一天中的时间”、“一周中的一天”聚合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:27:34.607

我不知道您希望优化的查询相对于您可能在同一组表上运行的其他查询有多重要。我假设您首先希望优化这些查询。

看到所有查询都是`feed_id`作为`WHERE`谓词进行的，我会尝试`articles`在该列上对表进行分区：

```
CREATE TABLE `articles` (
  `id` INTEGER(11) UNSIGNED NOT NULL AUTO_INCREMENT,
  `feed_id` INTEGER(11) UNSIGNED NOT NULL,
  -- etc.
)ENGINE=InnoDB
AUTO_INCREMENT=0
CHARACTER SET 'utf8' COLLATE 'utf8_general_ci'
COMMENT=''
PARTITION BY KEY(feed_id)
PARTITIONS 10; 
```

分区数（`10`上）可以根据您的需要进行调整，但必须大于 1 才能产生影响。您可能希望使用更大的数字来使您的选择查询更快。但是，任何不依赖的查询`feed_id`都会被此设备减慢。

相同的过程可以应用于其他表，其中列经常在查询中用作判别式。

但是，由于对所有提要执行前两个查询，您可以将它们重写如下：

```
SELECT feed_id, COUNT(feed_id) 
FROM articles
GROUP BY feed_id

SELECT feed_id, value
FROM feeds_stats
WHERE name='total_articles' 
GROUP BY feed_id
ORDER BY date DESC 
```

这两个都将检索所有提要的结果，这使您不必为每个提要运行查询。使用这些查询会使分区适得其反，因此您必须在两者之间进行选择。

分区的好处：任何区分一个特定值`feed_id`（或用于分区的任何其他列）的任何查询都将得到显着提升。不好的一点是常规查询会变慢。

第二种解决方案的好处是它不会对其他查询产生任何影响。

# java - 使用 REST 调用 Google 自定义搜索 API

> ID：16113096
> 
> 赞同：0
> 
> 时间：2013-04-19T20:36:28.797
> 
> 标签：java, json, google-api

我需要使用 Google 自定义搜索来从 Google 获取单词的计数。我创建了一个 Google 自定义搜索引擎，并按照本指南中描述的步骤进行操作：

[https://developers.google.com/custom-search/v1/using_rest](https://developers.google.com/custom-search/v1/using_rest)

如何从响应数据中获取计数？其次，如何使用 java 将此响应转换为 JSONObject？

Google API 也是免费的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:56:53.397

从您提供的链接（[https://developers.google.com/custom-search/v1/using_rest](https://developers.google.com/custom-search/v1/using_rest)）

> 重要提示：JSON/Atom 自定义搜索 API 需要使用 API 密钥，您可以从 Google API 控制台获取该密钥。**该 API 每天免费提供 100 个搜索查询**。如果您需要更多，您可以在控制台中注册计费。

如果自定义搜索引擎可以以 JSON 格式提供服务，您可以设置*Accept 的请求标头：application/json*

# java - 使用带有附加 java 字符串的一元表示

> ID：16113097
> 
> 赞同：0
> 
> 时间：2013-04-19T20:36:31.043
> 
> 标签：java, addition, unary-function

我需要编写一个代码，该代码接受一个字符串输入并将其或类似的东西转换为一个有效的一元方程，并加法以验证它是否有效。我很困惑，谁能指出我理解这个的方向？一个例子是： `111+1111=11111+1+1`是有效的陈述`3+4=5+1+1`。我的另一个问题是如何使用堆栈进行一元操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:48:01.660

如果您仅限于这种语言，那么您可以使用多种方法编写一个简单的解析器。您可以先拆分您的字符串

```
String[] parts = eqn.split("="); 
```

然后拆分每个部分：

```
String[] left = parts[0].split("\\+");
String[] right = parts[1].split("\\+"); 
```

现在您可以简单地计算字符串的长度：

```
int leftside = 0;
for (String l : left) {
    leftside += l.length;
} 
```

以此类推，看看它们是否相等。

还有很多其他方法可以解决这个问题。

基本上你必须写一个**解析器**。您可能想要使用逐字符扫描器，或者使用正则表达式或通用工具，例如 ANTLR。这取决于你的最终目标以及它是否可能改变。例如，您是否可能有 1、+、= 以外的字符？

我猜这是家庭作业。而且我猜您应该逐个字符地阅读并 push() 堆栈上的每个字符。然后你必须在遇到某些条件时弹出（）堆栈。我不会为你做这个......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:17:48.203

另一种可能的解决方案。

```
String input = "111+1111=11111+1+1";
    String[] parts = input.split("=");

    Pattern pattern = Pattern.compile("1");
    Matcher  matcherLeft = pattern.matcher(parts[0]);
    Matcher matcherRight = pattern.matcher(parts[1]);
    int leftTotal = 0;
    while (matcherLeft.find())
        leftTotal++;

    int rightTotal = 0;
    while (matcherRight.find())
        rightTotal++;

    if(leftTotal == rightTotal)
        System.out.println("Valid");
    else
        System.out.println("Invalid"); 
```

首先将字符串拆分到方程式的左侧和右侧。然后简单地计算每个部分中 1 的数量并进行比较。肯定有更好的方法可以做到这一点，但是通过这个例子很容易看出发生了什么。

# hadoop - 如何在不耗尽内存的情况下运行大型 Mahout 模糊 kmeans 聚类？

> ID：16113102
> 
> 赞同：1
> 
> 时间：2013-04-19T20:36:44.843
> 
> 标签：hadoop, cluster-analysis, mahout, k-means

我在 Amazon 的 EMR (AMI 2.3.1) 上运行 Mahout 0.7 模糊 k 均值集群，但内存不足。

*   我的总体问题是：我怎样才能最容易地让它工作？

这是一个调用：

```
./bin/mahout fkmeans \
  --input s3://.../foo/vectors.seq \
  --output s3://.../foo/fuzzyk2 \
  --numClusters 128 \
  --clusters s3://.../foo/initial_clusters/ \
  --maxIter 20 \
  --m 2 \
  --method mapreduce \
  --distanceMeasure org.apache.mahout.common.distance.TanimotoDistanceMeasure 
```

更详细的问题：

*   我如何知道我正在使用多少内存？我在 c1.xlarge 实例上。如果我相信[AWS docs](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/HadoopMemoryIntensive.html)，那将设置 mapred.child.java.opts=-Xmx512m。

*   我如何知道我需要多少内存？我可以尝试不同的尺寸，但它让我不知道我可以处理的问题的大小。

*   如何更改我的内存使用量？使用不同类别的机器启动不同的工作流程？尝试设置 mapred.child.java.opts？

*   我的数据集似乎没有那么大。是吗？

vector.seq 是稀疏向量的集合，包含 50225 个向量（50225 个事物与 124420 个其他事物相关），共有 120 万个关系。

[这篇文章](http://www.searchworkings.org/forum/-/message_boards/view_message/509348)说 set --method mapreduce，我就是这样，这是默认设置。

[这篇文章](http://mail-archives.apache.org/mod_mbox/mahout-user/201209.mbox/%3C506307EB.3090004@windwardsolutions.com%3E)说所有集群都保存在每个映射器和减速器的内存中。那将是 4*124420=498K 的东西，这似乎还不错。

这是堆栈：

```
13/04/19 18:12:53 INFO mapred.JobClient: Job complete: job_201304161435_7034
13/04/19 18:12:53 INFO mapred.JobClient: Counters: 7
13/04/19 18:12:53 INFO mapred.JobClient:   Job Counters 
13/04/19 18:12:53 INFO mapred.JobClient:     SLOTS_MILLIS_MAPS=28482
13/04/19 18:12:53 INFO mapred.JobClient:     Total time spent by all reduces waiting after reserving slots (ms)=0
13/04/19 18:12:53 INFO mapred.JobClient:     Total time spent by all maps waiting after reserving slots (ms)=0
13/04/19 18:12:53 INFO mapred.JobClient:     Rack-local map tasks=4
13/04/19 18:12:53 INFO mapred.JobClient:     Launched map tasks=4
13/04/19 18:12:53 INFO mapred.JobClient:     SLOTS_MILLIS_REDUCES=0
13/04/19 18:12:53 INFO mapred.JobClient:     Failed map tasks=1
Exception in thread "main" java.lang.InterruptedException: Cluster Iteration 1 failed processing s3://.../foo/fuzzyk2/clusters-1
        at org.apache.mahout.clustering.iterator.ClusterIterator.iterateMR(ClusterIterator.java:186)
        at org.apache.mahout.clustering.fuzzykmeans.FuzzyKMeansDriver.buildClusters(FuzzyKMeansDriver.java:288)
        at org.apache.mahout.clustering.fuzzykmeans.FuzzyKMeansDriver.run(FuzzyKMeansDriver.java:221)
        at org.apache.mahout.clustering.fuzzykmeans.FuzzyKMeansDriver.run(FuzzyKMeansDriver.java:110)
        at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
        at org.apache.mahout.clustering.fuzzykmeans.FuzzyKMeansDriver.main(FuzzyKMeansDriver.java:52)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)
        at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
        at org.apache.mahout.driver.MahoutDriver.main(MahoutDriver.java:195)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:187) 
```

这是映射器日志的一部分：

```
2013-04-19 18:10:38,734 INFO org.apache.hadoop.fs.s3native.NativeS3FileSystem (main): Received IOException while reading '.../foo/vectors.seq', attempting to reopen.
java.net.SocketTimeoutException: Read timed out
        at java.net.SocketInputStream.socketRead0(Native Method)
        at java.net.SocketInputStream.read(SocketInputStream.java:129)
        at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
        at com.sun.net.ssl.internal.ssl.InputRecord.readV3Record(InputRecord.java:405)
        at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:360)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:798)
        at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:755)
        at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
        at org.apache.http.impl.io.AbstractSessionInputBuffer.read(AbstractSessionInputBuffer.java:187)
        at org.apache.http.impl.io.ContentLengthInputStream.read(ContentLengthInputStream.java:164)
        at org.apache.http.conn.EofSensorInputStream.read(EofSensorInputStream.java:138)
        at java.io.FilterInputStream.read(FilterInputStream.java:116)
        at org.apache.hadoop.fs.s3native.NativeS3FileSystem$NativeS3FsInputStream.read(NativeS3FileSystem.java:291)
        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
        at java.io.BufferedInputStream.read1(BufferedInputStream.java:258)
        at java.io.BufferedInputStream.read(BufferedInputStream.java:317)
        at java.io.DataInputStream.readFully(DataInputStream.java:178)
        at org.apache.hadoop.io.DataOutputBuffer$Buffer.write(DataOutputBuffer.java:63)
        at org.apache.hadoop.io.DataOutputBuffer.write(DataOutputBuffer.java:101)
        at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:2060)
        at org.apache.hadoop.io.SequenceFile$Reader.next(SequenceFile.java:2194)
        at org.apache.hadoop.mapreduce.lib.input.SequenceFileRecordReader.nextKeyValue(SequenceFileRecordReader.java:68)
        at org.apache.hadoop.mapred.MapTask$NewTrackingRecordReader.nextKeyValue(MapTask.java:540)
        at org.apache.hadoop.mapreduce.MapContext.nextKeyValue(MapContext.java:67)
        at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:143)
        at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:771)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:375)
        at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1132)
        at org.apache.hadoop.mapred.Child.main(Child.java:249)
2013-04-19 18:10:38,737 INFO org.apache.hadoop.fs.s3native.NativeS3FileSystem (main): Stream for key '.../foo/vectors.seq' seeking to position '62584'
2013-04-19 18:10:42,619 INFO org.apache.hadoop.mapred.TaskLogsTruncater (main): Initializing logs' truncater with mapRetainSize=-1 and reduceRetainSize=-1
2013-04-19 18:10:42,730 INFO org.apache.hadoop.io.nativeio.NativeIO (main): Initialized cache for UID to User mapping with a cache timeout of 14400 seconds.
2013-04-19 18:10:42,730 INFO org.apache.hadoop.io.nativeio.NativeIO (main): Got UserName hadoop for UID 106 from the native implementation
2013-04-19 18:10:42,733 FATAL org.apache.hadoop.mapred.Child (main): Error running child : java.lang.OutOfMemoryError: Java heap space
        at org.apache.mahout.math.map.OpenIntDoubleHashMap.rehash(OpenIntDoubleHashMap.java:434)
        at org.apache.mahout.math.map.OpenIntDoubleHashMap.put(OpenIntDoubleHashMap.java:387)
        at org.apache.mahout.math.RandomAccessSparseVector.setQuick(RandomAccessSparseVector.java:139)
        at org.apache.mahout.math.AbstractVector.assign(AbstractVector.java:560)
        at org.apache.mahout.clustering.AbstractCluster.observe(AbstractCluster.java:253)
        at org.apache.mahout.clustering.AbstractCluster.observe(AbstractCluster.java:241)
        at org.apache.mahout.clustering.AbstractCluster.observe(AbstractCluster.java:37)
        at org.apache.mahout.clustering.classify.ClusterClassifier.train(ClusterClassifier.java:158)
        at org.apache.mahout.clustering.iterator.CIMapper.map(CIMapper.java:55)
        at org.apache.mahout.clustering.iterator.CIMapper.map(CIMapper.java:18)
        at org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:144)
        at org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:771)
        at org.apache.hadoop.mapred.MapTask.run(MapTask.java:375)
        at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:396)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1132)
        at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:57:26.730

是的，您的内存不足。据我所知，“内存密集型工作负载”引导操作早已被弃用，因此可能什么都不做。请参阅该页面上的注释。

默认情况下，每个映射器A`c1.xlarge`应使用[384MB 。](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/HadoopMemoryDefault_AMI2.3.html)当您减去所有 JVM 开销、拆分和合并的空间等时，您可能已经没有太多剩余了。

您在引导操作中设置 Hadoop 参数。如果使用控制台并设置类似的内容，请选择“配置 Hadoop”操作`--site-key-value mapred.map.child.java.opts=-Xmx1g`

*（如果您以编程方式执行此操作，并且遇到任何问题，请离线联系我；我可以提供来自[Myrrix](http://myrrix.com/)的片段，因为它会大量调整 EMR 集群以提高其推荐/集群作业的速度。）*

您可以设置`mapred.map.java.child.opts`为将映射器与减速器分开控制。您还可以减少每台机器的映射器数量以腾出更多空间，或者选择高内存实例。考虑到价格与 I/O 的比率，我通常发现`ml.xlarge`EMR 是最佳选择，因为大多数工作最终都受 I/O 限制。

# sencha-touch-2 - 预览 Sencha Architect 2 的黑屏

> ID：16113105
> 
> 赞同：1
> 
> 时间：2013-04-19T20:36:53.233
> 
> 标签：sencha-touch-2, sencha-architect, sencha-touch-2.1

我创建了一个项目，在第一次预览时它显示空白屏幕，一个简单的项目，没有代码，只有以下步骤：

我只添加了两个表单面板，将它们命名，在 mainPanel 上创建了两个按钮，然后他们在 MainNav（NavigationView）上创建了 NavigationView 和链接的 mainPanel。

[这是我关于存放文件下载的项目](http://depositfiles.org/files/efe5hgxlg)

# java - 在 PhoneGap 上运行带有 Web 应用程序的本机应用程序

> ID：16113108
> 
> 赞同：0
> 
> 时间：2013-04-19T20:37:14.657
> 
> 标签：java, android, cordova, phonegap-plugins

我的问题是：是否可以使用在 phonegap 上开发的 Web 应用程序运行本机应用程序？，我需要这样做，我正在阅读是否有必要创建一个插件来连接其他本机应用程序，但我开始编程了phonegap 我仍然不太了解，需要创建它。但我需要一些非常明确的。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:09:59.993

是的，您可以创建一个 PhoneGap 本地插件，使您能够在本地代码中创建自定义功能，并通过 PhoneGap 的 native-to-JavaScript 桥将其公开给您的 PhoneGap 应用程序。有关插件的更多信息以及如何实现它们的示例，请查看本教程：

[http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-android.html](http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-android.html)

# aptana3 - Aptana Studio 3.4 HTML 预览显示错误

> ID：16113110
> 
> 赞同：1
> 
> 时间：2013-04-19T20:37:17.220
> 
> 标签：aptana3

我刚刚从 Aptana Studio 3.3 更新为 build：3.4.0.201304151603。我在 Windows 7 x64 系统上。

更新后，HTML 预览窗口的行为不再正确。HTML 内容呈现在预览窗口的右半部分，左半部分为空白，URL 栏控件除外。正在预览的文件的 URL 不会显示在 URL 字段中。

![3.4 更新后的 Windows HTML 预览](https://i.stack.imgur.com/NAYU2.png)

想知道是否是我的其他插件之一导致了问题，我尝试了全新安装，除了与 Aptana Studio 一起安装的插件之外，没有其他插件。行为是相同的。

想知道这是否是 Windows 问题，我尝试在 Ubuntu 12.10 虚拟机上安装 Studio 3.4，但行为是相同的。

![3.4 更新后的 Ubuntu HTML 预览](https://i.stack.imgur.com/cqH3F.png)

有什么建议么？

# aptana - 如何停止 aptana Outline 视图自动折叠？

> ID：16113114
> 
> 赞同：1
> 
> 时间：2013-04-19T20:37:31.863
> 
> 标签：aptana

我正在使用 aptana 处理一个 Web 文档，其中包含一些组织成函数的 javascript。我希望能够轻松地跳转功能，因此我为文档资源管理器/大纲视图面板选择了 aptana。它工作正常，但是当我输入文档时它会自行折叠，这让我很生气。

我怎样才能阻止它这样做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:45:45.150

在右上角的小箭头下方是“与编辑器链接”的选项。关闭它，大纲视图应该在您离开时保持不变，而不是尝试匹配您在编辑器中所做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T12:39:07.447

我尝试按照 Sarah 的建议进行操作，但在编辑 .js 文件时无法让大纲视图不折叠。

我查看了文档并在大纲选项卡中尝试了不同的设置，但没有成功。Expand All 确实展开了所有函数、对象和变量，但是当我编辑其中一个对象或函数时，该对象或函数会在大纲视图中折叠。问题是即使我移到文档的另一部分，它也永远不会自行扩展。

我认为在编辑文档的一部分后，大纲视图应该更新以反映更改而不折叠。如果它确实崩溃了，那么它应该在保存后展开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-09T23:51:10.880

它要么自行折叠和展开（与编辑器的链接为“打开”），要么仅在您更改文档中的任何内容时自行折叠（与编辑器的链接为“关闭”）。我不认为这种行为是我们大多数用户所期望的。我希望他们尽快改变它。这是这个原本很棒的软件所具有的缺陷之一。

# java - 如何将自定义权限填充器与 Spring Security 和 ActiveDirectoryLdapAuthenticationProvider 一起使用？

> ID：16113115
> 
> 赞同：11
> 
> 时间：2013-04-19T20:37:37.510
> 
> 标签：java, spring, active-directory, spring-security, ldap

我已通过 LDAP 成功连接到 Active Directory 以进行身份​​验证，并在我的 ldap.xml 中使用以下内容调用了我的自定义权限填充器：

```
 <bean id="ldapAuthenticationProvider"
        class="org.springframework.security.ldap.authentication.LdapAuthenticationProvider">
    <constructor-arg ref="ldapBindAuthenticator"/>
    <constructor-arg ref="ldapAuthoritiesPopulator"/>
</bean>

<bean id="ldapBindAuthenticator"
        class="org.springframework.security.ldap.authentication.BindAuthenticator">
    <constructor-arg ref="ldapServer"/>
    <property name="userSearch" ref="ldapSearch"/>
</bean>

<bean id="ldapSearch"
        class="org.springframework.security.ldap.search.FilterBasedLdapUserSearch">
    <constructor-arg value="CN=Users"/>
    <constructor-arg value="(sAMAccountName={0})"/>
    <constructor-arg ref="ldapServer"/>
</bean>

<bean id="ldapAuthoritiesPopulator"
        class="my.project.package.ActiveDirectoryLdapAuthoritiesPopulator"/>

<bean id="ldapServer"
        class="org.springframework.security.ldap.DefaultSpringSecurityContextSource">
    <constructor-arg value="ldap://192.168.0.2/dc=test,dc=server"/>

    <property name="userDn" value="ldap@test.server"/>
    <property name="password" value="ldap"/>
    <property name="baseEnvironmentProperties">
        <map>
            <entry key="java.naming.referral">
                <value>follow</value>
            </entry>
        </map>
    </property>
</bean> 
```

这很好用，我可以根据用户的组成员身份确定用户的授权，但我宁愿通过内置的 Active Directory LDAP 身份验证提供程序来执行此操作：

```
<bean id="ldapAuthenticationProvider"
        class="org.springframework.security.ldap.authentication.ad.ActiveDirectoryLdapAuthenticationProvider">

        <constructor-arg value="test.server"/>
        <constructor-arg value="ldap://192.168.0.2:389"/>
        <property name="convertSubErrorCodesToExceptions" value="true"/>
</bean> 
```

上面的问题是我的自定义权限填充器（显然）没有被调用，所以虽然我可以验证我的用户（适用于上述），但我没有组（我需要确定授权）。

我觉得这是一个简单的问题，但对于我的生活，我无法在这里或其他任何地方找到答案。我是否必须扩展 ActiveDirectoryLdapAuthenticationProvider 类，并从那里调用我的权限填充器？

（感谢这个网站多年来给我的所有帮助；这个网站的有效性可以通过我最近才费心创建一个帐户这一事实来衡量，这是我的第一个问题。提前感谢你的帮助。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T18:15:59.673

Spring 的 ActiveDirectoryLdapAuthenticationProvider 类是`final`，所以我唯一真正的选择（如果有任何接受者，我会招待更好的）是分叉类。我复制并粘贴了它的内容，稍微重构，并删除了`final`名称。然后，我创建了派生类的一个单独的子类，覆盖了该`loadUserAuthorities()`方法，并添加了我自己的代码来构建权限掩码。

`ldap.xml`然后我可以按如下方式编辑我的文件：

```
 <bean id="ldapAuthenticationProvider"
            class="my.project.package.OverrideActiveDirectoryLdapAuthenticationProvider">   
        <constructor-arg value="test.server"/>
        <constructor-arg value="ldap://192.168.0.2:389"/>
        <property name="convertSubErrorCodesToExceptions" value="true"/>
</bean> 
```

对于像我这样的任何其他 n00bs，子类如下所示：

```
public class OverrideActiveDirectoryLdapAuthenticationProvider extends TestActiveDirectoryLdapAuthenticationProvider {

//my assignments

public OverrideActiveDirectoryLdapAuthenticationProvider(String domain,
        String url) {
    super(domain, url);
}

@Override
protected Collection<? extends GrantedAuthority> loadUserAuthorities(DirContextOperations userData, String username, String password) {
//original code with my own additions
//in my case, I injected code into the for(group : groups) loop
} 
```

像魅力一样工作。

非常感谢 zagyi 的帮助。

# html - 模式窗口未在 ie 中弹出，并且 Nivo Image Slider 图像在上传后无法正常工作

> ID：16113120
> 
> 赞同：0
> 
> 时间：2013-04-19T20:38:21.340
> 
> 标签：html, modal-dialog, nivo-slider

第一个问题：我已经设置了一个页面来使用模态窗口来弹出关于水上乐园景点的简要描述和一个包含每个景点的几张照片的 nivo 图像滑块。我不知道为什么窗口不会在 ie 中弹出。模态窗口适用于我测试过的所有其他浏览器？？？

**在即这个特定页面上我的按钮都不能被点击？**

第二个问题：当我在本地测试我的 nivo 滑块时，一切正常。但是，一旦我上传了所有内容，滑块就不起作用了。我已确保我所有的脚本、css、图像和页面都已上传。我难住了。

我绝不是这方面的专业人士，因此非常感谢您提供任何帮助。

该页面的链接是[http://splashwaywaterpark.com/attraction](http://splashwaywaterpark.com/attraction)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:45:05.200

在所有文件之前调用 jQuery，因此 jqueryModal.js 文件将出现在 jquery 之后。这解决了IE中的错误

```
SCRIPT5009: '$' is undefined 
jqueryModal.js, line 2 character 1 
```

所以像这样重新排序

```
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="Scripts/jqueryModal.js"></script> 
```

在 popbox.css

添加 -ms-filter 用于 IE 的不透明度。下面我在您的 CSS 中仅展示了一个示例。在需要的地方添加。[资源](http://css-tricks.com/snippets/css/cross-browser-opacity/)

```
.modalDialog {
    position: fixed;
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    z-index: 99999;
    opacity: 0;
    /* IE 8 */
    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
    /* IE 5-7 */
     filter: alpha(opacity=0);
    -webkit-transition: opacity 400ms ease-in;
    -moz-transition: opacity 400ms ease-in;
    transition: opacity 400ms ease-in;
    pointer-events: none;
    background-color: rgba(0,0,0,0.8);
    color: #000066;
} 
```

# matlab - Octave 和 Matlab“wat”矩阵/向量不一致

> ID：16113121
> 
> 赞同：6
> 
> 时间：2013-04-19T20:38:23.590
> 
> 标签：matlab, matrix, vector, octave

我注意到 Matlab 和 octave 中的各种情况，其中函数同时接受矩阵和向量，但对向量的处理与对矩阵的处理不同。

这可能会令人沮丧，因为当您输入具有可变行数/列数的矩阵时，它可能会被解释为向量并在高度/宽度为 1 时执行您不期望的事情，从而导致调试困难和奇怪的条件边缘情况.

我会列出一些我发现的，但我很好奇其他人遇到了什么

（注意：我只是在寻找代码接受矩阵作为有效输入的情况。当将非向量矩阵作为参数给出时引发异常的任何事情都不计算在内）

1）“diag”可用于表示矩阵的对角线或将向量转换为对角矩阵

由于前者通常仅用于方阵，这在 matlab 中并没有那么令人震惊，但在 Octave 中，当 Octave 将一个以非零元素开头的向量解释为“对角矩阵”并且其他所有元素都为零时，它可能会特别痛苦，即

```
t=eye(3);
size(diag(t(:,3))) == [3,3]
size(diag(t(:,2))) == [3,3]
size(diag(t(:,1))) == [1,1] 
```

2) 使用逻辑索引到行向量返回行向量

用逻辑索引到其他任何东西都会返回一个列向量

```
a = 1:3;
b = true(1,3);
size(a(b)) == [1, 3]
a = [a; a];
b = [b; b];
size(a(b)) == [6, 1] 
```

3) 使用索引向量 i 对向量 v 进行索引会返回与 v 类型相同（行/列）的向量。但如果 v 或 i 是矩阵，则返回值的大小与 i 相同。

```
a = 1:3;
b = a';
size(a(b)) == [1, 3]
b = [b,b];
size(a(b)) == [3, 2] 
```

4) max、min、sum 等单独对矩阵 M 的列进行运算，除非 M 为 1xn，在这种情况下，它们将 M 作为单个行向量进行运算

```
a = 1:3
size(max(a)) == [1, 1]
a = [a;a]
size(max(a)) == [1, 3] 
```

max 特别糟糕，因为它甚至不能将维度作为参数（与 sum 不同）

在编写 octave/matlab 代码时，我还应该注意哪些其他此类情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:14:09.140

每种语言都有自己的概念。这种语言的一个重点是经常将矩阵视为一个向量数组，每列一个条目。事情将开始变得有意义。如果您不希望这种行为，`matrix(:)`请将其用作那些将传递单个向量而不是矩阵的函数的参数。例如：

```
octave> a = magic (5);
octave> max (a)
ans =

   23   24   25   21   22

octave> max (a(:))
ans =  25 
```

1) 至少 Octave 3.6.4 并非如此。我不是 100% 确定，但可能与[这个](https://savannah.gnu.org/bugs/?37411)已经修复的错误有关。

2）如果您使用布尔值进行索引，它将被视为掩码并被视为掩码。如果您使用非布尔值进行索引，则将其视为值的索引。这对我来说很有意义。

3) 这不是真的。返回的索引始终具有相同的大小，无论它是矩阵还是向量。唯一的例外是，如果索引是向量，则输出将是单行。这个想法是使用单个向量/矩阵进行索引会返回相同大小的内容：

```
octave> a = 4:7
a =

   4   5   6   7

octave> a([1 1])
ans =

   4   4

octave> a([1 3])
ans =

   4   6

octave> a([1 3; 3 1])
ans =

   4   6
   6   4 
```

4)`max`至少在 Octave 中确实将维度作为参数。来自 3.6.4 帮助文本`max`：

> 对于向量参数，返回最大值。对于矩阵参数，返回每列的最大值，作为行向量，或者如果定义了维度 DIM，则在这种情况下 Y 应设置为空矩阵（否则将被忽略）。

其余的都适用，就像我在介绍中所说的那样。如果您提供一个矩阵，它会将每一列视为一个数据集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-10T09:48:25.830

1) 正如其他用户所指出的，在 Octave >= 3.6.4 时情况并非如此。

在情况 2) 规则适用于向量，总是返回相同形状的向量，对于其他任何返回列向量，请考虑：

```
>> a = reshape (1:3, 1,1,3)

a(:,:,1) =

     1.0000e+000

a(:,:,2) =

     2.0000e+000

a(:,:,3) =

     3.0000e+000

>> b = true(1,3)

b =

  1×3 logical array

   1   1   1

>> a(b)

ans(:,:,1) =

     1.0000e+000

ans(:,:,2) =

     2.0000e+000

ans(:,:,3) =

     3.0000e+000

>> a = [a;a]

a(:,:,1) =

     1.0000e+000
     1.0000e+000

a(:,:,2) =

     2.0000e+000
     2.0000e+000

a(:,:,3) =

     3.0000e+000
     3.0000e+000

>> b = [b;b]

b =

  2×3 logical array

   1   1   1
   1   1   1

>> a(b)

ans =

     1.0000e+000
     1.0000e+000
     2.0000e+000
     2.0000e+000
     3.0000e+000
     3.0000e+000 
```

您可以看到这是有道理的，因为向量具有明确的“方向”，但其他形状的矩阵在您删除元素时却没有。编辑：实际上我刚刚检查过，Octave 似乎并不完全以这种方式工作，但可能应该。

3）这与2）一致。本质上，如果您提供索引列表，则会保留索引向量的方向。如果您提供具有矩阵形状的索引，则新信息是使用索引矩阵形状。这更灵活，因为如果您愿意，您可以随时`a(b(:))`保留形状。`a`您可能会说它不一致，但请记住使用逻辑索引可能会减少要返回的元素数量，因此不能以这种方式重新调整它们。

4）正如评论中所指出的，您可以指定要操作的最大/最小维度：`min(rand(3),[],1)`或`max(rand(3),[],2)`，但在这种情况下，这些函数存在“遗留”问题，这些函数的数据可以追溯到它们最初创建时的数据，现在非常困难改变而不惹恼人们。

# c - for循环括号内的两个分号

> ID：16113125
> 
> 赞同：35
> 
> 时间：2013-04-19T20:38:47.750
> 
> 标签：c, parsing, for-loop, syntax, arduino

我正在定制我在互联网上找到的代码（它是[Adafruit Tweet Receipt](https://github.com/adafruit/Adafruit-Tweet-Receipt/blob/ffc41ad59bc62f8ffcfc6e29f23f2732cc4b76a5/Gutenbird.ino#L349)）。我无法理解代码的许多部分，但对我来说最令人困惑的是括号内有两个分号的 for 循环

```
boolean jsonParse(int depth, byte endChar) {
  int c, i;
  boolean readName = true;

  for(;;) {  //<---------
    while(isspace(c = timedRead())); // Scan past whitespace
    if(c < 0) return false; // Timeout
    if(c == endChar) return true; // EOD

    if(c == '{') { // Object follows
      if(!jsonParse(depth + 1, '}')) return false;
      if(!depth) return true; // End of file
      if(depth == resultsDepth) { // End of object in results list 
```

**for(;;)**是什么意思？（这是一个 Arduino 程序，所以我猜它是用 C 语言编写的）。

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2013-04-19T20:39:29.610

```
for(;;) {
} 
```

功能上的意思

```
 while (true) {
 } 
```

它可能会根据循环体内的某些条件打破循环/从循环返回。

`for(;;)`永远循环的原因是因为`for`它包含三个部分，*每个部分都是可选的*。第一部分初始化循环；第二个决定是否继续循环，第三个在每次迭代结束时做一些事情。它是完整的形式，您通常会看到如下内容：

```
for(i = 0; i < 10; i++) 
```

如果第一个（初始化）或最后一个（迭代结束）部分丢失，则不会对其进行任何操作。如果缺少中间（测试）部分，那么它就好像`true`在它的位置上一样。So与 '`for(;;)`相同`for(;true;)`，其中（如上所示）与`while (true)`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T20:42:09.090

循环有 3 个组件，用`for`分号分隔。第一个组件在循环开始之前运行，通常用于初始化变量。第二个是条件。在每次迭代开始时检查条件，如果它的计算结果为真，则循环中的代码运行。第三个组件在循环结束时执行，在另一个迭代（从条件检查开始）开始之前，通常用于递增变量。

在您的情况下`for(;;)`，这意味着它将永远循环，因为条件不存在。当代码`return`s 或`break`s 时循环结束。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T20:42:25.640

`for`循环的每个子句都是可选的。所以当它们被排除时，它仍然循环。`for`循环编译成`while`循环。

最终结果变成检查初始化任何变量，因为它是空的，所以在没有发生任何事情后结束，检查第二个子句中的布尔条件，它不存在所以循环开始，一旦循环到达结束括号，在再次检查布尔条件之前检查是否有任何代码要运行。

在代码中它看起来像：

```
while(true){

} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-02-16T15:55:43.443

这是维基百科[所说](https://en.wikipedia.org/wiki/For_loop#Use_as_infinite_loops)的

> **用作无限循环**
> 这种 C 风格的 for 循环通常是无限循环的来源，因为迭代的基本步骤完全由程序员控制。实际上，当打算使用无限循环时，可以使用这种类型的 for 循环（带有空表达式），例如：
> 
> `for (;;)`
> `//loop body`
> 
> 在某些 C/C++ 编译器中使用这种样式代替无限`while(1)`循环以避免类型转换警告。一些程序员更喜欢更简洁`for(;;)`的形式，而不是语义上等效但更冗长的`while (true)`形式。

# python - Mongo DB 游标 ID 在服务器上无效

> ID：16113126
> 
> 赞同：0
> 
> 时间：2013-04-19T20:38:51.890
> 
> 标签：python, mongodb, cursor

我正在查询一个包含大约 400 万个文档的集合。

在使用 python 脚本循环它们时，在大约 5000 个文档之后总是会出错

```
Traceback (most recent call last):
  File "geturl.py", line 16, in <module>
    for dict in  collection.find():
  File "/usr/local/lib/python2.7/dist-packages/pymongo/cursor.py", line 814, in next
    if len(self.__data) or self._refresh():
  File "/usr/local/lib/python2.7/dist-packages/pymongo/cursor.py", line 776, in _refresh
    limit, self.__id))
  File "/usr/local/lib/python2.7/dist-packages/pymongo/cursor.py", line 720, in __send_message
    self.__uuid_subtype)
  File "/usr/local/lib/python2.7/dist-packages/pymongo/helpers.py", line 93, in _unpack_response
    cursor_id)
pymongo.errors.OperationFailure: cursor id '3664670275997321547' not valid at server 
```

我可以在配置中做些什么吗？更改 Batchsize 矿石？

# php - 检索 100 万行时 nginx HTTP 错误 500

> ID：16113138
> 
> 赞同：0
> 
> 时间：2013-04-19T20:39:56.143
> 
> 标签：php, postgresql, nginx, laravel, laravel-4

使用 nginx 1.7 和 PHP（Laravel 框架）从 PostgreSQL 数据库中检索 1+ 百万行会导致错误 500 在 10 秒内显示。

`HTTP Error 500 (Internal Server Error): An unexpected condition was encountered while the server was attempting to fulfill the request.`

我已经将一些超时设置为更长并重新加载了 nginx，但它不起作用。哪些设置可以防止这种超时？

**启用站点**

```
location ~ \.php$ {
    fastcgi_pass unix:/var/run/php5-fpm.sock;
    fastcgi_index index.php;
    include fastcgi_params;
    fastcgi_read_timeout 6000;
    fastcgi_send_timeout 6000;
    client_body_timeout 6000;
    send_timeout 6000;
    proxy_read_timeout 6000;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:53:19.120

为了解释我有点神秘的评论，并提供一个可能的答案：

这**看起来不像 timeout**，这应该会使`nginx`issue`504 Gateway Timeout`出错。HTTP Error 500 表示实际上存在*错误*，即：

*   PHP（Laravel）内存不足
*   PostgreSQL 连接被中止
*   FastCGI进程放弃了ghost

所以你有三个地方可以检查：fastcgi 日志，Laravel/PHP 错误日志，可能还有 PostgreSQL（不太可能，因为 PostgreSQL 不应该有处理数百万行的问题 - 但可能存在内存问题）。

直接加载页面，而不通过 from `nginx`，无论如何，如果您不想或不能检查日志，应该会给出更多信息错误。

我的钱将用于 PHP 层中的内存错误，或者失败，用于 FastCGI 中的资源（内存和/或 CPU）耗尽问题。

如果是这样，您可能可以通过允许 PHP 进程占用更高的内存来快速解决问题`php.ini`；或者更好的是，重新设计流程，使其不接收太多数据（您肯定不会显示一百万行；也许您正在 PHP 中进行一些可以在 PostgreSQL 级别更好地完成的处理？）。

# java - 测量用户屏幕触摸的时间

> ID：16113139
> 
> 赞同：-1
> 
> 时间：2013-04-19T20:39:57.383
> 
> 标签：java, android, timer

我正在为 android 开发一个应用程序，在该应用程序中，我使用屏幕触摸从用户那里获取振动模式并将其保存在数组中。例如

```
long[] pattern = {100, 200,150}; 
```

首先振动 100 毫秒，然后接下来的 200 毫秒不振动，然后振动接下来的 150 毫秒。我想根据用户输入创建这个值。

我正在使用`Timer`类，我将节省用户在两次触摸之间花费的时间。但是作为java新手，我无法弄清楚如何实现上述逻辑，在上述数组中转换用户触摸模式。

也欢迎任何其他更有效的逻辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:54:03.393

我将首先继承您的视图并覆盖触摸事件方法，这将允许您进行大量控制：

```
@Override
    public boolean dispatchTouchEvent(MotionEvent ev) 
    {
        return super.dispatchTouchEvent(ev);
    };

    @Override
    public boolean onTouchEvent(MotionEvent ev) 
    {
        return super.onTouchEvent(ev);
    }
    @Override
    public boolean onInterceptTouchEvent(MotionEvent ev) 
    {
        return false;
    } 
```

之后，您将必须有一个记录每个触摸事件时间的局部变量，然后计算增量时间。这个[帖子](https://stackoverflow.com/a/11512801/2033526)也可能有用。他们将 OnTouchListener 附加到视图。

# asp.net - RadButton 不会导致回发

> ID：16113140
> 
> 赞同：-1
> 
> 时间：2013-04-19T20:40:08.907
> 
> 标签：asp.net

我在用户控件上有一个 RadButton。当我在调试器中运行该站点并单击该按钮时，它甚至不会导致回发，因为 Page_Init 事件不会触发。我什至设置了 AutoPostBack="true" 和 CausesValidation="false" 来绕过那些可能的解释。

这是我的 Radbutton 代码：

```
<telerik:RadButton ID="ReturnButton" runat="server" Text="Return To Test" OnClick="ReturnButton_Click" 
 CausesValidation="false" Skin="Telerik" CssClass="rbClearButton" Width="175px" AutoPostBack="true" >  

<Icon PrimaryIconCssClass="rbPrevious" PrimaryIconLeft="4" PrimaryIconTop="4"/> 
 </telerik:RadButton> 
```

当我查看源代码时，这是生成的 HTML：

```
<a id="TestModuleDetails_ReturnButton" class="RadButton RadButton_Telerik rbSkinnedButton rbClearButton" href="javascript:void(0)" style="display:inline-block;width:175px;"><!-- 2011.3.1305.35 --><span class="rbPrimaryIcon rbPrevious" style="top:4px;left:4px;"></span><input class="rbDecorated rbPrimary" type="submit" name="TestModuleDetails$ReturnButton_input" id="TestModuleDetails_ReturnButton_input" value="Return To Test" style="width:100%;padding-left:0;padding-right:0;padding-left:4px;" /><input id="TestModuleDetails_ReturnButton_ClientState" name="TestModuleDetails_ReturnButton_ClientState" type="hidden" /></a> 
```

我不明白为什么它不会导致回发，有人知道我错过了什么吗？我已经在 Telerik 论坛上发布了这个，Telerik 的人希望我向他们发送一个重现错误的可运行代码示例。我真的希望我能避免那种头痛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:45:12.920

还在一个全新的空白页面中测试控件。如果它在那里工作，请尝试从头开始重新创建当前页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:29:46.850

我认为有两个问题：

*   我认为你应该在应答器 A 中有类似 : href="javascript:void(0)" 的东西。因为这些东西意味着你希望链接什么也不做......
*   如果有任何错误，请在 javascript 控制台中进行第二次检查

# python - Python：比较 numpy 中的列

> ID：16113142
> 
> 赞同：-1
> 
> 时间：2013-04-19T20:40:15.803
> 
> 标签：python, arrays, function, numpy, iteration

我正在编写一个程序，它通过 add_to_file 函数创建一个文件，然后另一个程序将该文件作为输入。

该文件有 4 列：名称、开始位置、描述、结束位置

该程序应该做的是将文件读入一个numpy数组并通过本质上创建一个数组来创建合理的“运动序列”，该数组将在运动中至少有一个结束位置与至​​少一个相同接下来的运动的起始位置

```
def make_sequence(size,array):
    count = 0
    sequence = [array[0]]
    result = [array[0,0]]
    for row in array[1:size]:
        if row[1] == sequence[count][3]:
            sequence.append(row)
            result.append(row[0])
            count += 1
        else:
            pass
    return result 
```

这是在做什么，它是从文件中获取数组并创建一个新数组（结果），这样新数组只是动作的名称，但只有彼此相邻的动作才会流动，因为它们的起始位置是准确的与前一动作的结束位置相同！这是我的问题：

有些动作可以在多种位置开始和结束，而我所写的每个动作只能取 1 个开始和 1 个结束位置。

**问题：**我怎样才能做到这一点，如果位置值的字符串是逗号分隔值，即（a，b，c，d），它将能够遍历它们并从头到尾比较它们，以便函数会返回所有流动的运动吗？

编辑：

这是我希望我的代码能够执行的操作的示例

输入：

```
row_1 = ["Name1", "1,3,4,5", "Description", "2"]
row_2 = ["Name2", "5,3", "Description", "4"]
row_3 = ["Name3", "2", "Description", "1"]
row_4 = ["Name4", "1", "Description", "7,3"]
row_5 = ["Name5", "3", "Description", "5,9,4"]
row_6 = ["Name6", "2", "Description", "7"]
row_7 = ["Name7", "7", "Description", "2"]
row_8 = ["Name8", "1", "Description", "4"]
row_9 = ["Name9", "4", "Description", "2"]
data = np.array((column_index,row_1,row_2,row_3,row_4,row_5,row_6,row_7,row_8,row_9))
print make_sequence(7,array) 
```

输出：

```
[Name1,Name3,Name4,Name5] 
```

你得到这个输出是因为它自动从 row_1 开始，它的名称为：“Name1”，然后它读取下一行，如果该行的起始位置与附加到上一行的结束位置相同正确的序列，它的名称将被附加到结果数组中。

它只对前 7 行执行此操作，因为输入的大小为 7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:04:06.843

好吧，这里有两个问题。一是关于数据处理：如何从原始数据文件中提取所需的信息。您想要的是名称（第 0 列）、起始位置（第 1 列的第一个元素）和结束位置（第 3 列的最后一个元素）。这可能看起来像：

```
import numpy as np

dat = np.array([["Name1", "1,3,4,5", "Description", "2"],
    ["Name2", "5,3", "Description", "4"],
    ["Name3", "2", "Description", "1"],
    ["Name4", "1", "Description", "7,3"],
    ["Name5", "3", "Description", "5,9,4"],
    ["Name6", "2", "Description", "7"],
    ["Name7", "7", "Description", "2"],
    ["Name8", "1", "Description", "4"],
    ["Name9", "4", "Description", "2"]])

#since you only want the 7 initial columns
dat = dat[0:7,:]

#extract second and fourth columns
c1 = dat[:,1]
c2 = dat[:,3]
names = dat[:,0]

#get the start position via string manipulation
startpos = []
for item in c1:
    startpos.append(item.split(',')[0])

startpos = np.array(startpos).astype(np.int32)

#get the end position via string manipulation
endpos = []
for item in c2:
    endpos.append(item.split(',')[-1])

endpos = np.array(endpos).astype(np.int32)
print startpos
print endpos 
```

凉爽的。现在你只需要关注 startpos 和 endpos，如下所示：

```
def followpath(a1,a2):
    needle = 1
    path = []
    for ii,item,newneedle in zip(np.arange(a1.size)+1,a1,a2):
        if item == needle:
            path.append(ii)
            needle = newneedle
    return np.array(path) - 1

thepath = followpath(startpos,endpos)
print names[thepath] 
```

这给了我：

```
['Name1' 'Name3' 'Name4' 'Name5'] 
```

# ruby - 带有 TK 安装的 RVM Ruby (OSX)

> ID：16113143
> 
> 赞同：3
> 
> 时间：2013-04-19T20:40:16.953
> 
> 标签：ruby, macos, rvm, tk

我正在尝试安装具有 TK 支持的 Ruby。

使用 RVM，我这样做了：

```
rvm install 1.9.2 -C --enable-shared --enable-pthread 
```

安装似乎工作正常，我可以看到一个名为

```
.rvm/src/ruby-1.9.2-p320/ext/tk/tcltklib.c 
```

我认为这是我需要的图书馆？

然后我尝试运行

```
require 'tk' 
```

在 irb 中，但收到错误消息

```
LoadError: no such file to load -- tk 
```

有任何想法吗？

## 更新：已修复！

如果有人对在 OSX 上支持 TK 的 Ruby 升级到 2.0.0 的完整步骤列表感兴趣，这就是我所做的：

为 Ruby 安装 RVM -

```
\curl -#L https://get.rvm.io | bash -s stable --autolibs=3 --ruby 
```

从 ActiveTcl 安装 TK - [http://www.activestate.com/activetcl](http://www.activestate.com/activetcl)

跑

```
rvm reinstall 2.0.0 --enable-shared --enable-pthread --with-tk --with-tcl 
```

启动 irb 并检查 TK 安装是否成功

```
require 'tk' 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T23:20:29.173

RVM 默认禁用 tk/tcl（OS X 上的问题），你需要告诉 ruby​​（通过 rvm）你想要 tk/tcl：

```
rvm install 1.9.2 --enable-shared --enable-pthread --with-tk --with-tcl 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T22:18:39.133

[首先，从这里](http://www.activestate.com/activetcl/downloads)安装 ActiveState 的 ActiveTCL 。然后，使用以下命令重新安装 Ruby：

```
rvm reinstall 1.9.2 --enable-pthread 
```

# java - ActionPerformed 和 ActionListener

> ID：16113148
> 
> 赞同：0
> 
> 时间：2013-04-19T20:40:38.367
> 
> 标签：java, swing, awt, jtextfield, parseint

我的程序问用户：你完成了多少门课程？因此，用户必须在 JTextField 组件上输入已完成的课程数量。然后，我的程序将 JTextField 中输入的字符串转换为整数。当我运行我的程序时，我得到一个 numberformatException。我尝试调试，我注意到我的程序在用户可以编写任何内容之前将字符串转换为整数。该程序不会等待用户输入任何内容。我怎样才能让我的程序在继续执行代码之前等待用户输入一个数字？

```
public class content extends JPanel implements ActionListener
{

     String number = "";
     JTextField NumtextField = new JTextField(5);

     @Override
     public void actionPerformed(ActionEvent e)
     {
         number = NumtextField.getNumtextField().getText();
     }

     int size = Integer.parseInt(number);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:43:38.580

移动`int size = Integer.parseInt(number);`到 actionPerformed 内部：

```
 public void actionPerformed(ActionEvent e){
 number = NumtextField.getNumtextField().getText();
 int size = Integer.parseInt(number);
 } 
```

当程序启动时，它试图解析`""`，这不是一个有效的数字字符串，因此为什么你会得到一个异常。另外，也许您应该将它放在 try{}catch{} 块中，这样如果您实时遇到异常，您可以处理它：

```
try {
 int size = Integer.parseInt(number);
}
catch (NumberFormatException e) {
System.out.println("Thats not a valid number");
} 
```

# mako - 如何从 %def 获取返回值？

> ID：16113154
> 
> 赞同：2
> 
> 时间：2013-04-19T20:41:17.540
> 
> 标签：mako

如何从 %def 获取返回值？

makoT1.py：

```
import mako
from mako.template import Template
from mako.lookup import TemplateLookup
print "Hi world.",
mytemplate = Template(filename='makoT1.mako')
print mytemplate.render(), 
```

makoT1.mako

```
<%
index = 0
%>
<%def name="a_def(counter)"> Pre: ${counter} <% counter += 1 %> Post: ${counter} <% return counter %> </%def>
index: ${index}
${a_def(index)}
index: ${index} 
```

dalem@QnD:~$ python makoT1.py

```
Hi world. 

index: 0
 Pre: 0  Post: 1 1
index: 0 
```

请注意，上面的第二个“索引”仍然是 0？这就是我要解决的问题。我希望它增加。

makoT1.mako 可能是这样的：

```
<%
index = 0
%>
<%def name="a_def(counter)">
Pre: ${counter} 
<% counter += 1 %> 
Post: ${counter} 
<% return counter %> 
</%def>
index: ${index}
<% index = ${a_def(index)} %>
index: ${index} 
```

但这给了我这个错误：

```
dalem@QnD:~$ python makoT1.py
Hi world.
Traceback (most recent call last):
  File "makoT1.py", line 5, in <module>
    mytemplate = Template(filename='makoT1.mako')
  File "/usr/local/lib/python2.7/dist-packages/mako/template.py", line 291, in __init__
    module = self._compile_from_file(path, filename)
  File "/usr/local/lib/python2.7/dist-packages/mako/template.py", line 368, in _compile_from_file
    filename)
  File "/usr/local/lib/python2.7/dist-packages/mako/template.py", line 615, in _compile_text
    generate_magic_comment=template.disable_unicode)
  File "/usr/local/lib/python2.7/dist-packages/mako/template.py", line 597, in _compile
    node = lexer.parse()
  File "/usr/local/lib/python2.7/dist-packages/mako/lexer.py", line 241, in parse
    if self.match_python_block():
  File "/usr/local/lib/python2.7/dist-packages/mako/lexer.py", line 376, in match_python_block
    match.group(1)=='!', lineno=line, pos=pos)
  File "/usr/local/lib/python2.7/dist-packages/mako/lexer.py", line 131, in append_node
    node = nodecls(*args, **kwargs)
  File "/usr/local/lib/python2.7/dist-packages/mako/parsetree.py", line 139, in __init__
    self.code = ast.PythonCode(text, **self.exception_kwargs)
  File "/usr/local/lib/python2.7/dist-packages/mako/ast.py", line 37, in __init__
    expr = pyparser.parse(code.lstrip(), "exec", **exception_kwargs)
  File "/usr/local/lib/python2.7/dist-packages/mako/pyparser.py", line 60, in parse
    ), **exception_kwargs)
mako.exceptions.SyntaxException: (SyntaxError) invalid syntax (<unknown>, line 1) (u'index = ${a_def(index)} \n') in file 'makoT1.mako' at line: 11 char: 1 
```

当第 11 行正常工作时，第 11 行会得到 SyntaxError 对我来说似乎很奇怪：

```
<% index = 0 %> 
```

${a_def(index)} 不应该从 a_def(counter) 返回整数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:41:22.153

利用

```
<% index = a_def(index) %> 
```

不要使用

```
<% index = ${a_def(index)} %> 
```

或者

```
<% index = ${capture(a_def(index))} %> 
```

# c# - 禁用在 ListBox 中选择空行

> ID：16113156
> 
> 赞同：0
> 
> 时间：2013-04-19T20:41:30.037
> 
> 标签：c#, listbox, selecteditem

我有一个包含多个项目的列表框，在每个项目之间有一个空行，例如

```
item1

item2

item3 
```

（原因是，有几十个项目，IMO 看起来要好得多）。

我想让它让用户不能选择任何空行，我试过了

```
if (listBox1.SelectedItem.ToString() == "")
            listBox1.SelectedItems.Clear(); 
```

在 mouse_Down 事件中，但我得到了这种难看的闪烁效果，当用户选择实际项目并使用箭头键滚动时，上述内容不起作用。

**编辑** 有没有办法调整列表框项目之间的垂直间距？这就是我需要做的（然后我可以删除空格）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T08:50:41.853

您可以使用 ListBox.ItemHeight 属性来定义所有项目的行高。因此，您必须将 DrawMode 设置为 OwnerDrawFixed 或 OwnerDrawVariable 并处理 DrawItem 事件。

```
private void listBox1_DrawItem(object sender, DrawItemEventArgs e)
        {
            if (listBox1.Items.Count > 0)
            {
                if ((e.State & DrawItemState.Selected) == DrawItemState.Selected)
                    e.Graphics.FillRectangle(SystemBrushes.Highlight, e.Bounds);
                else
                    e.Graphics.FillRectangle(SystemBrushes.Window, e.Bounds);

                string text = listBox1.Items[e.Index].ToString();

                e.Graphics.DrawString(text, e.Font, Brushes.Black, e.Bounds.Left, e.Bounds.Top);                
            }
        } 
```

# python - python：单词和词形字典

> ID：16113161
> 
> 赞同：1
> 
> 时间：2013-04-19T20:41:46.747
> 
> 标签：python, dictionary

我有以下问题：我创建了一个字典（德语），其中包含单词及其相应的引理。示例：“Lagerbestände”、“Lager-bestand”；“沃恩豪斯”、“沃恩豪斯”；“火车站”、“火车站”

我现在有一个文本，我想检查所有单词的词条。它可能会出现一个不在字典中的单词，例如“Restbestände”。但是“bestände”的引理，我们已经知道了。所以我想取单词的第一部分，这在 dicti 中是未知的，并将其添加到词形化的第二部分并打印出来（或返回它）。示例：“Restbestände”->“Rest-bestand”。（“bestand”取自“Lagerbestände”的引理）

我编写了以下代码：

```
for limit in range(1, len(Word)): 
    for k, v in dicti.iteritems():
        if re.search('[\w]*'+Word[limit:], k, re.IGNORECASE) != None:
            if '-' in v:
                tmp = v.find('-')
                end = v[tmp:]
                end = re.sub(ur'[-]',"", end)
                Word = Word[:limit] + '-' + end ` 
```

但是我遇到了两个问题：

1.  在单词的末尾，每次“ ”打印出来。我怎样才能避免这种情况？
2.  这个词的第二部分有时是不正确的——一定有一个逻辑错误。

然而; 你会怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:53:43.153

> 在单词的末尾，每次“ ”打印出来。我怎样才能避免这种情况？

*必须*在`UNICODE`脚本中的任何地方使用。[无处不在，无处不在，无处不在。](http://www.joelonsoftware.com/articles/Unicode.html)

此外，python RegEx 函数接受[`re.UNICODE`](http://docs.python.org/2/library/re.html#re.UNICODE)您应该始终设置的标志。德语字母不在 ASCII 集合中，因此 RegEx 有时会混淆，例如在匹配时`r'\w'`

# templates - Ember：将模板渲染为视图属性

> ID：16113174
> 
> 赞同：0
> 
> 时间：2013-04-19T20:43:02.500
> 
> 标签：templates, ember.js

我有一个观点，我想在 hbs 中这样声明：

```
{{view App.ComponentView title="Text Field" optionsTemplate="textFieldOptions" }}
{{view App.ComponentView title="Static Label" optionsTemplate="statifFieldOptions"}} 
```

然后在视图定义中我想做以下事情：

```
App.ComponentView = Ember.View.extend({
    templateName="blah",
    attributeBindings:["data-type", "draggable", "title", "rel", "data-trigger", "data-content"],
    optionsTemplate:null,
    "data-content": function() {
        var renderedOptionsTemplate = Em.xxx(this.get("optionsTemplate"));  
        return renderedOptionsTemplate;
    }.property(),
//snip
}); 
```

我正在寻找的是我应该在那里代替 Em.xxx 调用的地方。这可能吗？它可以使用部分或模板或其他...

# jsf - JPA更新一对一关联对象导致重复条目异常

> ID：16113179
> 
> 赞同：3
> 
> 时间：2013-04-19T20:43:24.850
> 
> 标签：jsf, jpa

我使用 JSF 2.0、Tomcat 7.x 和 EclipseLink 作为 JPA-Provider。我想用 onetoone 关联更新实体实例，更准确地说是 Booking 有一个名为 booker 的用户属性。不幸的是，如果我调用我的 updateBooking() Api 方法，EclipseLink 想要创建一个新的预订者，而不是仅仅使用已经存在的用户。添加了 Eclipse 控制台堆栈跟踪和相关代码片段 - 提前感谢您的一些提示！

堆栈跟踪：

```
Caused by: Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.3.1.v20111018-r10243): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'EMAIL'
Error Code: 1062
Call: INSERT INTO user (EMAIL, NAME, PASSWORD) VALUES (?, ?, ?)
bind => [3 parameters bound]
Query: WriteObjectQuery(LogString User - id: 1; name: 1; email: 1;)
at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:324)
at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:840)
...
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry '1' for key 'EMAIL'
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source) 
```

开发控制器.java

```
public String testUpdateBooking(){
    String str = "/development.xhtml?faces-redirect=true";
    try {
        Integer bookingId = 22;
        Integer bookerId = 1;
        BookerApi api = new BookerApi();
        Booking booking = api.readBooking(bookingId);
        User booker = api.readUser(bookerId);
        booking.setBooker(booker);
        api.updateBooking(booking);
        message = "DevelopmentController.testUpdateBooking() " + booking;
    } catch (RuntimeException exc){
        message = "EXCEPTION DevelopmentController.testUpdateBooking();"; 
        exc.printStackTrace();
    }
    return str;
} 
```

BookerApi.java

```
public void updateBooking(Booking booking){
    emf = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
    EntityManager em = emf.createEntityManager();
    em.getTransaction().begin();
    Booking persBooking = em.find(Booking.class, booking.getId());
    persBooking.setCourtNo(booking.getCourtNo());
    persBooking.setStart(booking.getStart());
    persBooking.setEnd(booking.getEnd());
    persBooking.setBooker(booking.getBooker());
    em.getTransaction().commit(); // haendelt update implizit, kracht
    em.clear();
    emf.close();
} 
```

实体 Booker 属性：

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
Integer id; 
@Temporal(TemporalType.DATE)
@Column(nullable = false)
Date start;
@Temporal(TemporalType.DATE)
@Column(nullable = false)
Date end;   
@Column(nullable = false)
Integer courtNo;
@OneToOne(fetch = FetchType.EAGER) // Mueller S. 105, 109
@JoinColumn(name = "user")
User booker; 
```

实体用户属性：

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private Integer id; 
@Column(unique = true, nullable = false)
private String name;
@Column(nullable = false)
private String password; // TODO verschluesseln 
@Column(unique = true, nullable = false)
private String email; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:16:54.537

许多事情：
1：修复
您不需要在jpa中编写任何CRUD方法，EntityManager提供所有必需的

```
public void updateBooking(Booking booking){
emf = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
EntityManager em = emf.createEntityManager();
em.getTransaction().begin();
em.merge(booking);
em.getTransaction().commit();
em.close();
emf.close(); 
```

但

您不应该以这种方式处理事务，事务应该在服务层而不是数据访问层中打开。事实上，如果你有一个使用 @transactional 注释的容器（意味着使用 Spring 或 Java EE 服务器），它应该由容器管理。如果您绝对想手动管理它，则必须正确处理最终异常并正确回滚以防遇到异常。EntityManager 和底层事务通常具有相同的范围/生命周期。

此外，所有应用程序都应该只有一个 EntityManagerFactory。

否则你不需要在这里指定获取类型，oneToOne 关联总是急切地获取。

# sql - JPA、SQlite 没有这样的表：SEQUENCE

> ID：16113182
> 
> 赞同：3
> 
> 时间：2013-04-19T20:43:27.707
> 
> 标签：sql, sqlite, jpa

我对 JPA 和 SQlite 有疑问。

我从表中创建了一个实体。我生成的实体看起来像：

```
 @Entity
    @Table(name="sqliteTestTable")
    public class Test implements Serializable {
        private static final long serialVersionUID = 1L;

        @Id  
        @GeneratedValue(strategy=GenerationType.IDENTITY)
        @Column(name="id")
        private int id;

        @Column(name="name")
        private String name;

        public Test() {
        }
        ------
    } 
```

当我尝试保留一些测试对象时，我收到以下错误：（我已经在 mysql 上执行了相同的代码而没有问题）

```
Exception in thread "main" Local Exception Stack: 
Exception [EclipseLink-4002] (Eclipse Persistence Services - 2.4.1.v20121003-ad44345): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLException: no such table: SEQUENCE
Error Code: 0
Call: UPDATE SEQUENCE SET SEQ_COUNT = SEQ_COUNT + ? WHERE SEQ_NAME = ?
    bind => [50, SEQ_GEN_TABLE]
Query: DataModifyQuery(name="SEQ_GEN_TABLE" sql="UPDATE SEQUENCE SET SEQ_COUNT = SEQ_COUNT + ? WHERE SEQ_NAME = ?")
    at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:333) 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-22T13:23:42.967

如果数据库平台不支持 IDENTITY，则 IDENTITY 将默认为 TABLE。

对于 TABLE，您需要创建一个序列表。如果您有 ElipseLink 创建表，它将自动为您创建，否则您需要自己创建。

如果 SQlite 具有 IDENTITY 支持，那么您可以创建自己的 DatabasePlatform 子类来添加身份支持。

一般来说，我永远不会推荐使用 IDENTITY，它不支持预分配并且会导致性能不佳。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-30T18:35:24.657

sqlite 将表 sqlite_sequence 用于 AUTOINCREMENT 字段

代替：

```
@GeneratedValue(strategy=GenerationType.IDENTITY) 
```

和

```
@GeneratedValue(generator="sqlite")
@TableGenerator(name="sqlite", table="sqlite_sequence",
    pkColumnName="name", valueColumnName="seq",
    pkColumnValue="sqliteTestTable") 
```

如果您使用多个表，则生成器必须是唯一的名称。使用新表，没有 sqlite_sequence 记录，因此您必须自己创建。

```
insert into sqlite_sequence (name,seq) values ("sqliteTestTable",1); 
```

# python - RedisQueue 与 Flask 应用程序一起运行

> ID：16113186
> 
> 赞同：2
> 
> 时间：2013-04-19T20:43:43.733
> 
> 标签：python, redis, flask

我正在尝试使用 RedisQueue 作为从我的应用程序运行异步作业处理的简单方法。

但是，当工作人员尝试在烧瓶应用程序中运行作业时，它会抱怨在应用程序上下文之外运行，即`working outside of application context`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:41:45.797

```
def your_task():
    with app.test_request_context():
        #your code 
```

# javascript - 使用 jquery/javascript 将 XML 转换为 HTML

> ID：16113188
> 
> 赞同：6
> 
> 时间：2013-04-19T20:43:53.990
> 
> 标签：javascript, jquery, html, xml

我有一些`XML`需要以`div`文本形式显示。
我们可以将其转换`XML`为如下格式。

```
<root>
<field>
  <label>Have you invested before</label>
  <value>No</value>
</field>
<field>
  <label>Are you looking to invest in the next 6 months</label>
  <value>Maybe</value>
</field>
<field>
  <label>What investments are you interested in</label>
  <value>Carbon Credits, Green Investments</value>
</field>
<field>
  <label>How much are you looking to invest</label>
  <value>£50,000 -  £100,000</value>
</field>
</root> 
```

输出应如下所示：

您之前是否投资过：否
您是否打算在未来 6 个月内投资：也许
您对什么投资感兴趣：碳信用、绿色投资
您打算投资多少：50,000 - 100,000 英镑

这可能使用 Jquery/javascript.??

它应该像下面的 HTML 一样呈现。

```
<div class="how-to">
<div class="how-text">
    <h3>Your Requirements</h3>
        <ul class="requirements">         
<li><label class="field-l">Have you invested before:</label> <span>No</span></li>         
<li><label class="field-l">Are you looking to Invest in the next 6 months:
</label>      <span>Maybe</span></li>         
<li><label class="field-l">What Investments are you interested in:</label> 
<span>Carbon  Credits,Green Investments</span></li>
 <li><label class="field-l">How much are you looking to invest:</label>
  <span>£50,000 -  £100,000</span></li>
      <li class="link-pad"><a href="index.html" class="requirements">
     Change  your requirements</a></li>
    </ul>
<div class="clear"></div>
 </div>
  </div> 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-19T20:45:26.227

## 第 1 步：验证您的 xml

您的 xml 无效。您可以检查它是否有效，例如，在[在线验证器](http://www.xmlvalidation.com/)中。它们有很多，我链接的这个只是一个例子。

对于这个答案，我想我们有一些 xml 如下

```
<root>
  <field>
      <label>Have you invested before</label>
      <value>No</value>
  </field>
  <field>
      <label>Are you looking to invest in the next 6 months</label>
      <value>Maybe</value>
  </field>
  <field>
      <label>What investments are you interested in</label>
      <value>Carbon Credits, Green Investments</value>
  </field>
  <field>
      <label>How much are you looking to invest</label>
      <value>£50,000 -  £100,000</value>
  </field>
</root> 
```

## Step2：获取xml，可能是通过ajax

我想这很明显，但无论如何我都会包括在这里。

```
$.get('/url_of_the_xml_resource')
  .done(function(data){
    // this function is executed if the request was sucessfull
  })
  .fail(function(){
    // this function is executed if the request fails
  })
; 
```

## 第三步：解析xml

您可以使用 jQuery 的[$.parseXML 对其](http://api.jquery.com/jQuery.parseXML/)进行解析并将原始数据转换为 XML 文档

```
$.get('/url_of_the_xml_resource')
  .done(function(data){
    // parse the xml
    data = $.parseXML(data);
    //
    // do anything you want with the parsed data
  })
  .fail(function(){
    alert('something went wrong!');
  })
; 
```

## 第 4 步：处理数据

现在我们有一个 xml 文档可以使用。下面的 snipnet 假设我们`<dl>`的 HTML 布局中有一个定义列表、标签，并且应该在解析数据后执行，就像上一步一样。

```
// first we query the HTML document to get the list element
// and store it for later use
var list = $('dl');
// data is a xml document now, so we query it...
$(data)
  // and search for all <field> elements
  .find('field')
  // now we can play with each <field>
  .each(function(index, element){
    // as example we query & store the field
    var field = $(element)
    // get the values we want
    var label = field.find('label').text()
    var value = field.find('value').text()
    // and append some html in the <dl> element we stored previously
    list
      .append('<dt>'+label+': </dt>')
      .append('<dd>'+value+'</dd>')
    ;
  })
; 
```

## 结论

[jQuery](http://jquery.com/)是您想要使用的。它的可链接性质使得横穿 DOM 就像切黄油一样。我希望这个答案对你有用。

## 作为附加参考，请参阅[jsfiddle 上的完整示例](http://jsfiddle.net/ecQQn/)

# php - 替换php字符串的某些部分

> ID：16113189
> 
> 赞同：2
> 
> 时间：2013-04-19T20:43:56.693
> 
> 标签：php

我有一些文字*（在这种特定情况下`$expression`）*，有时它很长。我想以相同的方式输出文本，除了输出`numbers %`粗体。有时它的拼写像`3%`，有时有一个空格像`123 %`。

```
<?php
$expression = 'here we got a number 23 % and so on';
$tokens = "([0-9]+)[:space:]([\%])";
$pattern = '/[0-9][0-9] %/';

$keyword = array($pattern);
$replacement = array("<b>$keyword</b>");
echo preg_replace($keyword, $replacement, $expression);
?> 
```

这就是我所拥有的，但我不确定我做错了什么。它在行上输出一个错误`$replacement = array("<b>$keyword</b>");`，然后输出实际的字符串，除了它用`number%`替换`<b>Array</b>`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:46:16.283

您面临一个（不需要的）数组到字符串的转换。在开发中始终使警告/通知可见，PHP 会告诉您这种情况发生（以及发生在何处）。

还要再看一下[*`preg_replace`*手册页](http://php.net/preg_replace)，它显示了替换的正确语法。特别关注替换参数中关于*反向引用的部分。*

```
$replacement = array("<b>\\0</b>"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T20:48:59.003

尝试这个

```
$expression = 'here we got a number 23 % and so on';
var_dump(preg_replace('/(\d+\s*\%)/', "<b>$1</b>", $expression)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:20:36.827

您的模式和替换错误，您需要模式中的一个组才能在替换中有一个“变量”占位符。查看[preg_replace 手册](http://www.php.net/manual/en/function.preg-replace.php)了解更多详情。

我用一个解决方案创建了这个[要点](https://gist.github.com/danielcsgomes/5423255)，上面的代码：

```
<?php

$expression = 'here we got a number 23 % and so on';
$pattern = '/(\d+ %)/';
$replacement = '<b>$1</b>';
echo preg_replace($pattern, $replacement, $expression); 
```

# mysql - 如何永久修复mysql错误：使用alter table语句截断列的数据？

> ID：16113190
> 
> 赞同：2
> 
> 时间：2013-04-19T20:44:00.473
> 
> 标签：mysql, django

我有一个领域

```
logo=models.ImageField(upload_to="restaurant_detail/restaurant_detail", help_text = "upload your restaurant logo") 
```

这会返回一个错误，`Data truncated for column 'logo' at row 1`

所以我继续用这个声明来修复它

```
alter table my_table modify logo varchar(500) 
```

（我增加字符。）

这可行，但每次我重置数据库时，我都必须再次执行此操作**，**当我尝试执行上面的 alter 语句并插入数据时，它仍然失败并出现`Data truncated for column 'logo' at row 1`错误。

如何永久解决此问题而不必一直更改表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T22:09:23.610

将您的字段定义更改为：

```
logo = models.ImageField(max_length=500, upload_to="restaurant_detail/restaurant_detail", help_text="upload your restaurant logo") 
```

我添加了 max_length kwarg，它告诉 Django 该字段可以存储多少个字符，并将导致适当地创建数据库字段。

# java - 使用 ANT，如何在 scriptdef 中创建模式集？

> ID：16113192
> 
> 赞同：0
> 
> 时间：2013-04-19T20:44:12.237
> 
> 标签：java, ant, build

我正在尝试在 scripdef 中创建一个模式集，例如：

```
 <scriptdef name="extract-files" language="javascript">
       unjar = self.project.createTask("unjar");    
       unjar.setDest(new File(project.getProperty("tmp.folder")));
       patternset = new PatternSet();
       patternset.setRefid("patternid");
       unjar.addPatternset(patternset);
       unjar.execute();
     </scriptdef> 
```

我没有放完整的代码，但是该脚本在 patternset = new PatternSet(); 中失败了 在这种脚本中创建模式集的方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:45:35.683

您可以尝试以下给出的[here](http://jayflowers.com/WordPress/?p=213 "这里")

```
importClass(Packages.org.apache.tools.ant.types.PatternSet);
var patternSet = new PatternSet(); 
```

# linux - 仅在找到文件时创建 ZIP - 使用 shell 脚本

> ID：16113195
> 
> 赞同：1
> 
> 时间：2013-04-19T20:44:24.940
> 
> 标签：linux, shell, unix, zip, find

我想根据 find 命令的结果创建一个 ZIP。但是当 zip 命令没有任何要压缩的内容时会引发错误。

```
find ${DIRECTORY_TO_SEARCH} -type f -mtime -7 | xargs zip "${ZIP_FILE}" 
```

zip 命令抛出的错误代码：***zip error: Missing or empty zip file***

如何确保仅在文件数大于 0 时才创建 ZIP？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:33:29.327

如果你有 GNU `xargs`，你可以使用`-r`开关：

> ```
> --no-run-if-empty
> -r    If the standard input does not contain any nonblanks, do not run the command.
>       Normally, the command is run once even if there is no input.
>       This option is a GNU extension. 
> ```

例子：

```
$ echo "" | xargs echo "foo"
foo
$

$ echo "" | xargs -r echo "foo"
$ 
```

# c# - C#反射，如何在类中获取属性实例以设置值

> ID：16113201
> 
> 赞同：0
> 
> 时间：2013-04-19T20:45:06.663
> 
> 标签：c#, reflection, propertyinfo

我想在类的方法中将类的属性重置为默认值。我的类被实例化一次（实际上是一个 MVVM 框架中的 ViewModel），我不想破坏和重新创建整个 ViewModel，只是清除许多属性。下面的代码是我所拥有的。我唯一缺少的是如何获取 SetValue 方法的第一个参数 - 我知道它是我正在设置的属性的一个实例，但我似乎无法弄清楚如何访问它。我收到错误：“对象与目标类型不匹配”。

```
public class myViewModel
{

  ...
  ...

  public void ClearFields()
  {
    Type type = typeof(myViewModel);
    PropertyInfo[] pi = type.GetProperties();
    foreach (var pinfo in pi)
    {
      object[] attributes = pinfo.GetCustomAttributes(typeof(DefaultValueAttribute), false);
      if (attributes.Length > 0)
      {
        DefaultValueAttribute def = attributes[0] as DefaultValueAttribute;
        pinfo.SetValue(?, def.Value, null);
      }
    }

  }

  ...
  ...

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:12:40.553

您应该传递 的实例`myViewModel`，在您的情况下用于`this`引用当前实例：

```
public class myViewModel
{

  ...
  ...

  public void ClearFields()
  {
    Type type = typeof(myViewModel);
    PropertyInfo[] pi = type.GetProperties();
    foreach (var pinfo in pi)
    {
      object[] attributes = pinfo.GetCustomAttributes(typeof(DefaultValueAttribute), false);
      if (attributes.Length > 0)
      {
        DefaultValueAttribute def = attributes[0] as DefaultValueAttribute;
        pinfo.SetValue(this, def.Value, null);
      }
    }

  }

  ...
  ...

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:54:33.750

您应该将`this`其作为第一个参数。请参阅[MSDN](http://msdn.microsoft.com/en-us/library/xb5dd1f1.aspx)以供参考：

> 对象类型：System.Object
> 
> 将设置其属性值的对象。

# c# - 需要帮助完成或重写此算法以导航通用集合

> ID：16113205
> 
> 赞同：1
> 
> 时间：2013-04-19T20:45:19.180
> 
> 标签：c#, algorithm, linq

我正在尝试根据用户是否单击“前进”按钮或“后退”按钮来提供一种算法来设置当前对象的代码。

```
public Step CurrentStep
{
    get { return _currentStep; }
    set
    {
        if (_currentStep != value)
        {
            _currentStep = value;
            OnPropertyChanged("CurrentStep");
        }
    }
}

private int CurrentStepIndex { get; set; }

private void NextStep()
{
    CurrentStepIndex++;
    GotoStep();
}

private void PreviousStep()
{
    CurrentStepIndex--;
    GotoStep();
}

private void GotoStep()
{
    var query = from step in CurrentPhase.Steps
                where ????
                select step;

    CurrentStep = query.First();
} 
```

`CurrentPhase.Steps`是一个`ObservableCollection<Step> Steps {get; set;}`。在这个类的构造函数中，我有一种方法可以为属性“ `CurrentStep`”设置一个默认值，所以总会有一个可以跳出的。

鉴于这个集合，我希望使用`CurrentStep`存储在`CurrentStepIndex`其中的对象的索引来查找该项目在集合中的位置，然后通过递减或递增来更改该索引。然后，使用某种 linq 查询，在新索引处找到“下一步”。

不幸的是，我很难制定我的 LINQ 查询。更重要的是，我不确定这个算法是否会起作用。

我需要什么来完成我的 LINQ 查询才能使该算法起作用？

或者，有没有更好的方法来实现我想要的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:54:19.373

使用以下但确保控制溢出

```
 if(CurrentStepIndex>=0 && CurrentStepIndex<CurrentPhase.Steps.Count)
  {
   CurrentStep= CurrentPhase.Steps[CurrentStepIndex)
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:00:36.367

这里没有必要使用 LINQ。[ObservableCollection<T>](http://msdn.microsoft.com/en-us/library/ms668604.aspx)继承自具有[Items属性的](http://msdn.microsoft.com/en-us/library/ms132434.aspx)[Collection<T>](http://msdn.microsoft.com/en-us/library/ms132434.aspx)（C# 中的索引器）。这意味着您可以使用以下代码而不是 LINQ：

```
private void GotoStep()
{
    CurrentStep = CurrentPhase.Steps[CurrentStepIndex];
} 
```

# asp.net - 如何访问asp.net RepeaterItem 中元素的属性？

> ID：16113210
> 
> 赞同：4
> 
> 时间：2013-04-19T20:45:39.810
> 
> 标签：asp.net, repeater

我正在尝试更改位于 Asp.net 内的跨度的 CSS 类`RepeaterItem`。该`span`元素内部还有其他标签（单选按钮）。

标记类似于：

```
<asp:Repeater>
    <ItemTemplate>
        <span class="spanClass" runat="server">
            <label>
                <asp:RadioButton id="rbID">
                </asp:RadioButton>
            </label>
        </span>
    </ItemTemplate>
</asp:Repeater> 
```

我可以使用以下命令编辑单选按钮：

```
rb = (RadioButton)(repeaterItem.FindControl("rbID");
rb.Checked = true;
//this works 
```

但是，当使用类似的代码来获取 时`span`，它会失败，`InnerHtml exception`因为`span`不是文字控件：

```
span = (GenericHtmlControl)(repeaterItem.FindControl("spanID");
span.Attributes.Add("class", "ClassToAdd");
//this fails 
```

我所做的阅读表明情况就是这样，因为`span`它不是文字控件，因为它里面有其他服务器控件（单选按钮）。

有没有办法访问有`<span>`问题的属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T20:47:18.237

像这样改变你`span`：

```
<span id="spanID" runat="server"> 
```

然后在你后面的代码中：

```
protected void myRep_ItemDataBound(object sender, RepeaterItemEventArgs e)
{
    if (e.Item.ItemType == ListItemType.Item)
    {
        HtmlGenericControl x = (HtmlGenericControl)e.Item.FindControl("spanID");
        x.Attributes["class"] = "myClass";
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T18:48:43.397

您可以将一个名为“ClassToAdd”的字段添加到您绑定到转发器的集合中。然后简单地使用 Eval 来显示它。（例如，如果要将转发器绑定到 DataTable，则可以添加一个名为 ClassToAdd 的新列，并在后面的代码中适当地设置值。）

```
<asp:Repeater>
    <ItemTemplate> 
        <span class="<%#Eval("ClassToAdd")%>"> 
        </span>
    </ItemTemplate>
</asp:Repeater> 
```

# clojure - Clojure：要求 png-extract 不适用于 [] 的？

> ID：16113211
> 
> 赞同：0
> 
> 时间：2013-04-19T20:45:40.543
> 
> 标签：clojure, require

为什么会这样：

```
(ns image-test.core 
    (:gen-class) 
    (:require (png-extract) 
              [clojure.string :as string])) 
```

但这失败了：

```
(ns image-test.core 
     (:gen-class) 
     (:require [png-extract :as png] 
               [clojure.string :as string])) 
```

我认为 [] 在要求中总是可以的。请熏陶。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:25:49.310

`(:require (png-extract))`是一个无操作，无所作为“成功”。在此处使用括号意味着您正在开始一个前缀列表，例如`(:require (clojure set string))`require`clojure.set`和`clojure.string`; 因为您没有在 之后放置任何命名空间`png-extract`，所以它根本不需要任何东西。使用`[]`s 是正确的，但它失败了，因为`png-extract`命名空间有问题：它可能不存在，或者以某种方式损坏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:01:08.653

以下是使用这两种形式的示例：

```
image-test.core> (ns image-test.core
                  (:gen-class)
                  (require [clojure.string :as foo ] 
                           [clojure.string :as string]))
nil
image-test.core> (ns image-test.core
                  (:gen-class)
                  (require (clojure.string)
                           [clojure.string :as string])) 
```

也许与 png-extract 依赖项有关？

# php - PHP文件上传脚本未写入临时目录

> ID：16113214
> 
> 赞同：0
> 
> 时间：2013-04-19T20:45:47.730
> 
> 标签：php

好的，所以我的图像上传脚本/应用程序有问题。我一次又一次地尝试调试，但仍然无法找出问题所在。代码似乎很好，但由于某种原因，文件看起来没有保存在临时目录中，因此它可以移动到我服务器上的上传目录。我已经确定我要上传到的目录（上传），包括临时目录，设置了读/写/执行权限，并且上传在 php.ini 文件夹中设置为打开。我有一种感觉，文件永远不会保存到临时文件夹中，但我不确定如何检查是否是这种情况，因为我知道在脚本完成执行后文件被删除。我希望你们能帮助我，因为我不知道该怎么做。那里'

另外，这是我的问题所在。

```
if (is_uploaded_file($filetempname)) {
          $final = "../public_html/uploads/" . $filename;              
          $result = move_uploaded_file($filetempname, $final);
          if($result)
          {
            echo 'success';
            echo "<br>Stored in: " . "public_html/uploads/" . $filename;
          }
          else
          {
            echo 'Image was not uploaded.';
          } 
```

$result= move_uploaded_file($filetempname, $final) 不断返回 false ，没有发生错误的迹象。我知道如果文件类型不正确，它将返回 false 并且不会复制任何内容，并且如果由于某种原因无法移动文件，它将返回 false 并且会发出警告消息说。但是，我根本没有收到任何消息。我所知道的是它返回 false 并且它没有做它应该做的事情。

```
<?php
error_reporting(E_ALL);
print_r($_FILES);
$filetype = $_FILES["file"]["type"];
$filename = $_FILES["file"]["name"];
$filetempname = $_FILES["file"]["tmp_name"];
$filesize = $_FILES["file"]["size"];
$error = $_FILES["file"]["error"];

$allowedExts = array("gif", "jpeg", "jpg", "png");
$extension = end(explode(".", $filename));
if ((($filetype == "image/gif")
|| ($filetype == "image/jpeg")
|| ($filetype == "image/jpg")
|| ($filetype == "image/pjepg")
|| ($filetype == "image/x-png")
|| ($filetype == "image/png"))
&& ($filesize < 1000000)
&& in_array($extension, $allowedExts)) {
    if ( $error > 0) {
        echo "Error: " . $error . "<br>";
    }
    else {
        echo "Upload: " . $filename . "<br>";
        echo "Type: " . $filetype . "<br>";
        echo "Size: " . ($filesize / 1024) . " KB<br>";
        echo "Stored in: " . $filetempname . "<br>";

        if (file_exists("../public_html/uploads/" . $filename)) {
            echo $filename . " already exists. ";
        }        
        else {
            if (is_uploaded_file($filetempname)) {
              $final = "../public_html/uploads/" . $filename;              
              $result = move_uploaded_file($filetempname, $final);
              if($result)
              {
                echo 'success';
                echo "<br>Stored in: " . "public_html/uploads/" . $filename;
              }
              else
              {
                echo 'Image was not uploaded.';
              }
            }
        }
    }
}
else {
    echo "Invalid file";
}
?> 
```

这是表单的代码。

```
<form enctype="multipart/form-data" method="post" action="scripts/snap.php">
        <!--<p>
            <input id="plat" class="plat" name="plat" type="hidden" value="" />
            <input id="plon" class="plon" name="plon" type="hidden" value=""  />
        </p>-->
        <div class="row">
            <label for="file">Select an image to Upload</label><br />
            <input type="file" name="file" id="file" /><!--onchange="fileSelected();"--> 
        </div>
        <div id="filename"></div>
        <div id="fileSize"></div>    
        <div id="fileType"></div>
        <div class="row">
            <input type="submit" name="submit" value="Submit" />
            <!--<input type="button" onclick="uploadFile()" value="Upload" />-->
        </div>
        <div id="progressNumber"></div>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:52:29.467

忘记所有文件类型检查和其他任何事情。编写一个**单独的脚本**，它只有一个职责：将上传的文件移动到您想要永久存储它的位置。专注于那一**小部分**并让它发挥作用。

一旦文件移动代码工作，将其包装在一个函数中，然后，仅当该部分工作时，将文件移动代码集成到您拥有的其余部分中。

这里的总体教训是，当您遇到问题时，最好以足够模块化的方式编写代码，这样可以快速轻松地判断出问题的确切位置。

另外，考虑使用一个框架或库来为你处理这个文件上传工作，因为你在这里重新发明了轮子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:52:04.693

首先，检查您是否正确提交。您是否在表单中包含了 enctype？

```
<form method='POST' enctype='multipart/form-data' action='upload.php'> 
```

接下来，您的代码`print_r($_FILES);`是返回任何值还是为空？

如果是，请尝试检查您知道的上传文件夹中的任何现有文件并使用`is_file()`，因为您可能指定了不正确的路径。

编辑：表格没有问题

# c#-4.0 - 数据表列c#中的最大值

> ID：16113216
> 
> 赞同：0
> 
> 时间：2013-04-19T20:45:57.703
> 
> 标签：c#-4.0, datatable

我有一组正在读入数据表的文本文件。我希望能够阅读第一列（Id）并找出最高的数字。每个文件依次从 0 到至少 21。我尝试了以下链接中的建议：[如何选择数据表中列的最小值和最大值？](https://stackoverflow.com/questions/2442525/how-to-select-min-and-max-values-of-a-column-in-a-datatable)

可悲的是，我无法工作。一种可行的建议显示在倒数第二行，但它返回值 8 或 9。关于如何正确获得我正在寻找的结果的任何建议？

```
 string filePath = System.IO.Path.GetFullPath(curriculum);
        DataTable curriculmDataTable = new DataTable();

        curriculmDataTable.Columns.Add("Id");
        curriculmDataTable.Columns.Add("Course");
        curriculmDataTable.Columns.Add("Credit");

        // Read in a file line-by-line, and store it
        var txtFileLine = File.ReadAllLines(filePath).ToList();

        //Reads line splits data to colums at tab (ASCII value 9)
        txtFileLine.ForEach(line => curriculmDataTable.Rows.Add(line.Split((char)9)));

        //Suggestions from link
        int max = Convert.ToInt32(curriculmDataTable.Select("Id=max(Id)")[0][0]);   
        label1.Text = ""+ max; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:56:35.163

问题是您已经创建了字符串列，但您想根据它们的数值获取最大值。最好的方法是首先存储正确的类型。然后你可以使用`DataTable.Compute`或`Linq-To-DataSet`：

创建一个`int`列：

```
 curriculmDataTable.Columns.Add("Id", typeof(int)); 
```

转换`strings`为`int`并将它们添加到表中：

```
foreach(string line in File.ReadLines(filePath))
{
    DataRow row = curriculmDataTable.Rows.Add();
    string[] fields = line.Split(new[]{(char)9});
    int id;
    if(fields.Length == 3 && int.TryParse(fields[0], out id)
    {
        row.SetField("Id", id);
        row.SetField("Course", fields[1]);
        row.SetField("Credit", fields[2]);
    }
} 
```

现在您可以使用 Linq：

```
int maxID = curriculmDataTable.AsEnumerable().Max(r => r.Field<int>("Id")); 
```

[`DataTable.Compute`](http://msdn.microsoft.com/en-us/library/system.data.datatable.compute.aspx)（也适用于早期的 .NET 版本）：

```
int maxID = (int)curriculmDataTable.Compute("Max(Id)", "") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-11T06:20:09.307

我们可以使用这种语法从数据表中的列中获取最大值

var maxValue = dataTblDetails.Compute("max(ColumnName)", string.Empty);

# javascript - 调整/最大化窗口时背景/内容下半部分消失

> ID：16113217
> 
> 赞同：1
> 
> 时间：2013-04-19T20:45:58.047
> 
> 标签：javascript, jquery, html, css, jquery-plugins

因此，我的网站[http://develop-web.com/](http://developed-web.com/)开始融合得很好，但是当我将窗口退出最大化模式时，我遇到了这个问题，所有不在屏幕上的东西都必须消失。

在 Google Chrome、Firefox 和 IE 10 中也会出现此问题。

我不习惯这种网站结构，所以我不想在尝试解决这个问题时把事情搞得更糟。可能是什么问题？

谢谢参观 ：）

**编辑：**

转到最大化窗口中的页面，当您将其从最大化（不是最小化，只是使其变小）中取出时，som 内容将消失： http: [//gyazo.com/a5744085b32b1cf05acc4e1efa653da9](http://gyazo.com/a5744085b32b1cf05acc4e1efa653da9)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:54:29.973

当窗口调整大小时，javascript 会在某处为您的#wrapper 添加固定高度，请尝试找出为什么会发生这种情况。

----我认为这个错误导致了你的问题

未捕获的类型错误：无法在线读取未定义的属性“左侧”`jquery.scrollTo.js:11`

如果我切换选项卡，它不仅会在您调整窗口大小时发生在我身上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:56:07.843

您绝对应该熟悉浏览器中的调试工具。我的偏好是 Chrome 中的开发人员工具（`CMD+alt+i`在 Mac 上，`F12`在 Windows 上）。Google 提供了一个很棒的指南，[可以](https://developers.google.com/chrome-developer-tools/docs/videos)帮助您入门。

如果您查看控制台选项卡，您会发现`resizePanel`当您调整主页上的窗口大小时，您的 JavaScript 会在方法中引发错误。

如果您查看元素面板并调整窗口大小，您会看到某些东西正在将遮罩元素的高度设置为窗口大小。

要修复这两个错误，请尝试按如下方式更新您的代码：

```
$(document).ready(function() {

    $('a.panel').click(function () {

        $('a.panel').removeClass('selected');
        $(this).addClass('selected');

        current = $(this);

        $('#wrapper').scrollTo($(this).attr('href'), 800);      

        return false;
    });

    $(window).resize(function () {
        resizePanel();
    });

});

function resizePanel() {

    width = $(window).width();
    height = $(window).height();

    mask_width = width * $('.item').length;

    $('#debug').html(width  + ' ' + height + ' ' + mask_width);

        // These lines are erroneously setting the height of the mask to the
        // height of the window so when the user scrolls down, an area of
        // unmasked content is visible. 
        //$('#wrapper, .item').css({width: width, height: height});
        //$('#mask').css({width: mask_width, height: height});

        // Try updating as follow as kpsuperplane has suggested
        $('#wrapper, .item').css({width: width});
        $('#mask').css({width: mask_width});

        // This was throwing an error because no anchor elements have
        // the selected class when the page is first hit
        if ($('a.selected').length) {    
            $('#wrapper').scrollTo($('a.selected').attr('href'), 0);
        }   
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T20:56:25.647

改变

```
$('#wrapper, .item').css({width: width, height: height});
$('#mask').css({width: mask_width, height: height}); 
```

至

```
$('#wrapper, .item').css({width: width});
$('#mask').css({width: mask_width}); 
```

在你的`resizePanel()`js 函数中（如果你查看源代码，它可以在头部的脚本标签中找到）

# scala - 什么时候 Futures 比 Scala 中的 Actors 更合适（反之亦然）？

> ID：16113218
> 
> 赞同：9
> 
> 时间：2013-04-19T20:46:03.837
> 
> 标签：scala, concurrency, actor, future

假设我需要运行一些并发任务。

我可以将每个任务包装在 a 中`Future`并等待它们完成。或者，我可以为每个任务创建一个`Actor`。每个都`Actor`将执行其任务（例如，在接收到“开始”消息时）并将结果发回。

我想知道*何时*应该使用前者（with `Future`s）和后者（with `Actor`s）方法，以及*为什么*认为该`Future`方法更适合上述情况。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T21:09:20.300

因为它在语法上更简单。

```
val tasks: Seq[() => T] = ???
val futures = tasks map {
  t => future { t() }
}
val results: Future[Seq[T]] = Future.sequence(futures) 
```

`results`未来您可以等待使用，`Await.result`或者您可以进一步映射它/在理解中使用它或在其上安装回调。

将其与实例化所有参与者、向它们发送消息、编码它们的`receive`块、接收它们的响应并关闭它们相比——这通常需要更多的样板文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-20T12:41:22.997

作为一般规则，使用适合您的应用程序的最简单的并发模型，而不是最强大的。从最简单到最复杂的顺序是顺序编程->并行集合->futures->无状态actors->有状态actors->具有软件事务内存的线程->具有显式锁定的线程->具有无锁算法的线程。选择此列表中解决您问题的第一个。你走的越远，复杂性和风险就越大，所以你最好用简单性来换取概念上的力量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-31T17:02:12.490

我倾向于认为当你有交互线程时演员很有用。在您的情况下，似乎所有工作都是独立的；我会使用期货。

# ruby-on-rails - RailsTutorial Chp 3（第 3.2.2 节）

> ID：16113221
> 
> 赞同：1
> 
> 时间：2013-04-19T20:46:15.493
> 
> 标签：ruby-on-rails, railstutorial.org

这是第 3.2.2 节添加页面的问题：

他们故意省略了创建 About 页面（在第 3.1.2 节中），以便教我如何使用 TDD 来指导我完成开发过程。我通过将代码添加到规范测试、路由和 StaticPages 控制器（清单 3.13、3.14 和 3.15 以及中间的所有步骤）来取得进展。

然而，当我走到代码清单 3.16 之前的那一步时，我不得不歪着头。正文如下：“为了解决这个问题，我们添加了 about 视图。这包括在 app/views/static_pages 目录中创建一个名为 about.html.erb 的新文件，其内容如清单 3.16 所示。”

我的问题是如何“添加关于视图并在 app/views/static_pages 目录中创建一个名为 about.html.erb 的新文件”？我在我的 StaticPages 控制器中添加了 about 操作，但由于 test $ bundle exec rspec 没有做任何事情......这表明我缺少“模板”或视图。然而，下一步“涉及创建一个名为 about.html.erb 的新文件”，但没有具体说明。

我记得上一次创建静态页面文件是在第 3.1.2 节，使用 $ rails generate controller StaticPages home help --no-test-framework 它创建了 home.html.erb 和 help.html.erb。所以我运行了 $ rails generate controller StaticPages about --no-test-framework。它询问我是否要覆盖文件 app/controllers/static_pages_controller.rb 我说不；然而，它确实创建了我的 about.html.erb 文件。

我得到了我需要的结果，但感觉不对。感谢您花时间帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:32:51.483

他们的意思是只使用您选择的文本编辑器创建文件。

```
#Here is how with nano
nano app/views/static_pages/about.html
Type in some text
CTRL-O to Save

#Here is how with vi

vi app/views/static_pages/about.html
i for insert mode
Type in some text
ESC :wq  to Save

#If you just want to create an empty file
touch app/views/static_pages/about.html 
```

# css - 一层与多个背景层的过渡

> ID：16113225
> 
> 赞同：0
> 
> 时间：2013-04-19T20:46:31.933
> 
> 标签：css, input, background, transition, layer

我有一个具有多个（两个）背景的表单输入字段，如下所示：

```
background: url(framework/images/search.png) no-repeat 6px 7px, 
/*this is a magnifying glass icon - this is important later */
                rgba(200,200,200,0.1); 
```

然后我有一个过渡：

```
transition:background 0.2s linear, box-shadow 0.5s linear; 
```

并在输入字段的焦点上：

```
input:focus, {
background:rgba(0,0,0,0.1);
box-shadow:0px 1px 0px rgba(0,0,0,0.1) inset;
} 
```

基本上它所做的（或应该做的）是当输入字段处于活动状态时，背景会随着过渡而变为稍暗的颜色。盒子阴影也产生了内部边框的内部效果。当背景是一个元素（只有背景颜色）时就是这种情况。现在，当我在较高层添加图标时，背景不会改变，但 box-shadow 有效。我认为浏览器对如何更改位图图像的颜色感到困惑。

我的问题是：有没有办法只转换一层背景（以某种方式解决它），以便位图图像保持不变并且颜色会改变？

谢谢你。

编辑：Jsfiddle -> [http://jsfiddle.net/8DRTt/](http://jsfiddle.net/8DRTt/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:37:18.443

[http://jsfiddle.net/8DRTt/1/](http://jsfiddle.net/8DRTt/1/)

```
input:focus, #two:focus {...} 
```

问题是选择器。

选择`#two`器比 input:focus 选择器强，因此覆盖了背景属性。

当您添加`#two:focus`到较暗背景的选择器时，它不能再被覆盖。

# javascript - 如何修复导致 IE 8 故障的自定义 Kendo UI 主题 CSS？

> ID：16113226
> 
> 赞同：3
> 
> 时间：2013-04-19T20:46:39.877
> 
> 标签：javascript, html, css, internet-explorer-8, kendo-ui

尝试：带有自定义主题的[Kendo UI Mendu 演示](http://demos.kendoui.com/web/menu/index.html)（[Kendo UI Custom Themes](http://demos.kendoui.com/themebuilder/web.html)或修改过的主题 CSS）

我已经自定义了 Bootstrap 主题，当鼠标悬停在菜单项上时，仅在使用自定义主题 CSS 时遇到了 IE 8 中的故障。

自定义 Bootstrap 主题示例： http: [//jsbin.com/ovufef/1/edit](http://jsbin.com/ovufef/1/edit)（IE 8 中的故障）

原始 Bootstrap 主题示例： http: [//jsbin.com/urinev/1/edit](http://jsbin.com/urinev/1/edit)（按预期工作）

剑道用户界面菜单：

```
<ul id="menu">
    <li>
        Stores
        <ul>
            <li>
                <div style="padding: 50px;">
                    <h2>Around the Globe</h2>
                </div>
            </li>
        </ul>
    </li>
</ul>
<script>
$(document).ready(function() {
    $("#menu").kendoMenu();
});
</script> 
```

查看 jsBins 中的 CSS，因为它们是剑道主题，所以它们太长，无法在此处包含。

基本上，故障是当您将鼠标悬停在一个项目上时，它不会立即将子项目放下，您必须将鼠标移动到子项目将显示的位置，然后左右摆动直到它奇怪而神奇地出现。

我不确定是什么导致了我的自定义主题中的 IE8 故障。样式如此相似，我无法弄清楚是什么原因造成的。我在 CSS 上做了一个文件差异，在我看来（在看了几次差异之后）只是背景颜色、渐变、边框颜色等变化。

如果有人可以帮助我修复自定义 CSS，将不胜感激。

* * *

*笔记：*

*   *Bootstrap 只是主题名称，与 Twitter Bootstrap 无关......只是看起来很相似。*
*   *我非常**讨厌**IE，这不是我的选择（而且大多数情况下，Kendo 在 IE 中运行良好）*
*   *使用 jsBin 是因为 IE8 在 jsFiddle 中不起作用*
*   ***更新：在新窗口中查看 jSBin，不会产生故障，**但会在使用自定义主题的 Web 应用程序中重现。需要更多研究，将很快更新或回答*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:24:15.623

该 jsBin iframe 中发生了一些事情 - 如果您在新窗口中打开 bin - 它可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T17:04:41.420

@Bundyo 是正确的，jsBin 新窗口中不会发生此问题。但是，它仍在我正在开发的网站上复制。我最终发现这是我的 IE 渐变语法最有可能导致问题。

变成：

```
filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#80ffffff, endColorstr=#00ffffff, GradientType=0);
-ms-filter: progid:DXImageTransform.Microsoft.gradient(startColorstr=#80ffffff, endColorstr=#00ffffff, GradientType=0); 
```

最初我`startColorstr='#80ffffff', endColorstr='#00ffffff'`使用单引号，这可能是一个问题。

固定 jsBin 供参考：http: [//jsbin.com/ovufef/12/edit](http://jsbin.com/ovufef/12/edit)

# c# - DateTime.Parse 总是在特定的文化中抛出异常

> ID：16113227
> 
> 赞同：8
> 
> 时间：2013-04-19T20:46:43.017
> 
> 标签：c#, .net

我有一些我必须解析的旧日志文件 - 显然日期时间保存为：18/12/2012 11:09:39 pm - 我所有解析这些文件的尝试都失败了。我对此完全迷失了 - 任何帮助或指导都会很棒！

```
 CultureInfo cultureInfo = new CultureInfo( "es-MX" , true );
        string date = "18/12/2012 11:09:39 p.m.";

        DateTime dt = new DateTime( 2012 , 12 , 18 , 11 , 9 , 39 ).AddHours( 12 );

        this.richTextBox1.Text += date + Environment.NewLine;
        this.richTextBox1.Text += dt.ToString( cultureInfo ) + Environment.NewLine;
        this.richTextBox1.Text += dt.ToString() + Environment.NewLine;

        foreach ( var item in richTextBox1.Lines )
        {
            try
            {
               DateTime d=  DateTime.Parse( item );
               this.richTextBox1.Text += d.ToString() + Environment.NewLine ;

            }
            catch ( Exception ee)
            {
                this.richTextBox1.Text += ee.Message + Environment.NewLine ;

            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:40:46.267

Some dates are correct in the log file(s) some have the odd formatting that end in p. m. or p.m.. All methods above seem to fail - and yes I tried them all :( This was my hack/fix for the problem:

```
 CultureInfo cultureInfo = new CultureInfo( "es-MX" , true );
     Date = DateTime.Parse( date.Replace( "p. m." , "PM" ).Replace( "p.m." , "PM" ).Replace( "." , "" ).ToUpper() , cultureInfo ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T20:57:09.240

尝试使用 DateTime.TryParseExact()。这是我在 LINQPad 中运行的示例。

```
void Main()
{
    System.Globalization.CultureInfo cultureInfo = new System.Globalization.CultureInfo( "es-MX" , true );
    string date = "18/12/2012 11:09:39 p.m.";

    DateTime dt = new DateTime( 2012 , 12 , 18 , 11 , 9 , 39 ).AddHours( 12 );

    DateTime d;
    string[] styles = {"dd/MM/yyyy hh:mm:ss tt"}; // This doesn't have to be an array - could be string
    DateTime.TryParseExact(date, styles, cultureInfo, System.Globalization.DateTimeStyles.None, out d);

    d.Dump();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:37:13.647

尝试使用您的cultureInfo 变量作为Parse 的第二个参数。这将使用文化作为格式提供者。

```
DateTime d =  DateTime.Parse( item, cultureInfo ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T21:45:02.343

问题是您没有指定在调用 Parse() 时要使用的文化。您的调用使用当前线程的 CurrentCulture 属性：

```
DateTime d=  DateTime.Parse( item ); 
```

你需要的魔法咒语是这样的：

```
DateTime instance = DateTime.Parse( text , CultureInfo.GetCultureInfo("es-MX") ) ; 
```

您的另一种选择是更改当前线程的文化：

```
CultureInfo mexico = CultureInfo.GetCultureInfo( "es-MX" );
Thread.CurrentThread.CurrentCulture = mexico; 
```

在你打电话之前`DateTime.Parse()`。在启动时执行此操作，您应该一切顺利（只要在墨西哥西班牙语中工作对您的目的有益。请注意，更改当前文化不会改变事物的显示方式：这是线程的 CurrentUICulture 属性的责任。

# javascript - 如果类和对象之间没有区别，为什么这段代码不起作用？

> ID：16113230
> 
> 赞同：3
> 
> 时间：2013-04-19T20:46:53.003
> 
> 标签：javascript, function, prototype

我总是被教导在 Javascript 中对象和类之间没有区别。然后有人可以解释为什么这段代码会产生错误：

```
var firstObj = function() {};

firstObj.prototype.sayHi = function() {
document.write("Hi!");
};

firstObj.sayHi(); 
```

而这个有效：

```
var firstObj = function() {};

firstObj.prototype.sayHi = function() {
document.write("Hi!");
};

new firstObj().sayHi(); 
```

有什么不同？为什么第一个不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:48:50.187

这里的关键问题是你的`firstObj`变量是一个`Function`对象，而不是一个`firstObj`对象。这是一个微妙的区别，但对象的类型决定了它继承的原型。

原型就像一个模板，应用于新创建的特定类型的对象。您必须创建一个`firstObj`对象（通常使用`new`它调用构造函数并分配原型）才能将该模板应用于它。在第一个示例中，您的`firstObj`变量是一个`Function`对象，而不是一个`firstObj`对象，因此它的原型`Function`不是其他任何东西..

在您的第二个示例中，您实际上创建了一个`firstObj`对象，因此它继承了该类型对象的原型。

如果您希望在第一个示例中应用该方法，以便它适用于您已经创建的函数对象，只需将该方法直接放在您已经存在的函数对象上，而不是原型上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:52:23.303

对象和类之间*的语言*没有区别¹。但是，一种对象与另一种对象之间存在很大差异。在第一种情况下：

```
firstObj.sayHi(); 
```

您正在尝试访问 的`sayHi`属性`firstObj`，这是一个`Function`没有此类属性的对象。（但是，您可以这样做`firstObj.prototype.sayHi()`。）

在第二种情况下：

```
new firstObj().sayHi(); 
```

您首先`new`在对象上调用运算符，该运算符`firstObj`计算为一个新对象。该新对象具有`firstObj`其属性和与 的属性`constructor`相等的原型。然后，您正在访问该返回对象的属性，该属性成功，因为它位于该对象的原型链中。`prototype``firstObj``sayHi``sayHi`

¹从技术上讲，JavaScript 没有类²（传统意义上的），只有通常称为“类”的构造函数。

²然而，`class`是一个[未来的保留字](http://www.ecma-international.org/ecma-262/5.1/#sec-7.6.1.2)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:50:06.363

一个函数只是一个函数，直到`new`被发出。此时，a`Function Object`基于函数的原型创建。这就是为什么您不会`sayHi`在第一个版本中看到该方法。

此外，`firstObj`它是一个函数，而不是一个对象，因此您需要调用它才能真正发生任何事情。`firstObj`不会实际调用该函数，您必须使用`firstObj()`.

此外，还有一些方法可以在不明确要求`new`关键字的情况下使用原型。这是在许多流行的框架（例如 jQuery）中完成的。它是通过检查是否`new`被使用来完成的，如果没有，那么它`new`会当场为你准备好：

***[`jsFiddle Demo`](http://jsfiddle.net/Gx3T6/)***

```
var firstObj = function() {
 if( !(this instanceof firstObj) ){
  return new firstObj();   
 }
};

firstObj.prototype.sayHi = function() {
 alert("hi");
};

firstObj().sayHi(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T20:50:32.317

当你写这个：

```
var firstObj = function() {}; 
```

您只定义了一个构造函数，因此您需要为使用此构造函数创建的新对象使用关键字`new`。

# concurrency - 我可以在 Erlang 中找到外部出口吗？

> ID：16113231
> 
> 赞同：1
> 
> 时间：2013-04-19T20:46:56.767
> 
> 标签：concurrency, erlang, try-catch, exit

我有两个流程链接；假设它们是`A`and `B`，并`A`设置为陷阱出口。`B`如果有人调用它，我希望能够恢复一段进程数据`exit/2`，例如`exit(B, diediedie)`。

在`B`'s 模块中，我们称之为它`bmod.erl`，我有一些代码如下所示：

```
-module(bmod).
-export([b_start/2]).

b_start(A, X) ->
    spawn(fun() -> b_main(A, X) end).

b_main(A, X) ->
      try
        A ! {self(), doing_stuff},
        do_stuff()
      catch
        exit:_ -> exit({terminated, X})
      end,
      b_main(A, X).

do_stuff() -> io:format("doing stuff.~n",[]). 
```

在`A`'s 模块中，我们称之为它`amod.erl`，我有一些看起来像这样的代码：

```
-module(amod).
-export([a_start/0]).

a_start() ->
  process_flag(trap_exit, true),
  link(bmod:b_start(self(), some_stuff_to_do)),
  a_main().

a_main() ->
  receive
    {Pid, doing_stuff} ->
      io:format("Process ~p did stuff.~n",[Pid]),
      exit(Pid, diediedie),
      a_main();
    {'EXIT', Pid, {terminated, X}} ->
      io:format("Process ~p was terminated, had ~p.~n", [Pid,X]),
      fine;
    {'EXIT', Pid, _Reason} ->
      io:format("Process ~p was terminated, can't find what it had.~n", [Pid]),
      woops
  end. 
```

（我意识到我应该`spawn_link`正常做，但在我的原始程序中，在 spawn 和链接之间有代码，所以我以这种方式建模了这个示例代码。）

现在，当我运行代码时，我得到了这个。

```
2> c(amod).
{ok,amod}
3> c(bmod).
{ok,bmod}
4> amod:a_start().
doing stuff.
Process <0.44.0> did stuff.
doing stuff.
Process <0.44.0> did stuff.
Process <0.44.0> was terminated, can't find what it had.
woops
5> 
```

我如何才能`b_main()`捕捉到这个外部出口，以便它可以报告它的状态`X`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:07:05.673

为了`b_main()`捕获外部出口，它必须通过调用来捕获出口`process_flag(trap_exit, true)`。这将向进程发送一条消息，在该进程中它可以以 state 退出`X`。代码如下

```
b_start(A, X) ->
    spawn(fun() -> process_flag(trap_exit, true), b_main(A, X) end).

b_main(A, X) ->
    try
        A ! {self(), doing_stuff},
        do_stuff()
    catch
        exit:_ -> 
            io:format("exit inside do_stuff() . ~n"),
            exit({terminated, X})
    end,

    receive
        {'EXIT',Pid, Reason} ->
            io:format("Process received exit ~p ~p.~n",[Pid, Reason]),
            exit({terminated, X})
    after 0 ->
            ok
    end,
    b_main(A, X). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T22:01:10.767

简短的回答：你也应该这样做`trap_exit`，`b_main/2`并接收`{'EXIT', ...}`消息。@vinod 在我尝试之前对其进行了概述。相反，我将尝试解释一些关于正在发生的事情。

如果进程正在捕获出口并且它会死亡，例如当有人调用`exit(Pid, die)`或某个链接的进程以 结束自身时`exit(die)`，那么它将`{'EXIT', ...}`在其邮箱中获取消息，**而不是**出于相同的原因默默地死亡。是运行时系统向每个链接的进程发出退出信号，并且可以捕获它而不是死亡。

这条规则的唯一例外是当`exit(Pid, kill)`调用发出时，那么无论进程是否捕获退出，它都会因原因而死`kill`。

因此，为了避免外部退出信号导致的静默死亡，进程必须捕获退出。同样，如果该过程想知道为什么与他有关联的人刚刚死亡并采取一些措施来恢复，那么该过程必须设置出口。*每个*被捕获的退出信号都在进程邮箱中显示为一条消息。

`try ... catch exit:_ -> ...`因此，您的声明在捕获出口的问题上没有任何影响。

通常`trap_exit`被认为是不好的做法。有一个简单的例子说明了原因：

```
18> self().
<0.42.0>
19> Pid = spawn_link(fun () -> process_flag(trap_exit, true), 
  Loop = fun (F) -> receive Any -> io:format("Any: ~p~n", [Any]) end, F(F) end, 
    Loop(Loop) end).
<0.58.0>
20> exit(Pid, grenade).                                         
Any: {'EXIT',<0.42.0>,grenade}
true
21> exit(Pid, grenade).
Any: {'EXIT',<0.42.0>,grenade}
true
... 
```

您可能会看到某些进程已链接，正在捕获退出并*拒绝*正常退出。这是出乎意料的，并且显然具有潜在的危险。由于链接是可传递的，因此它可能会破坏向一组链接进程发出的退出链。

[本书章节](http://learnyousomeerlang.com/errors-and-processes#its-a-trap)中对许多微妙的专业进行了精彩的阐述。

# python - python中的计算时间非常长

> ID：16113234
> 
> 赞同：4
> 
> 时间：2013-04-19T20:47:04.933
> 
> 标签：python, optimization

我正在运行我的代码，其中包括查找平均值。在大约 600 万行的 CSV (ssm_resnik.txt) 中，第一行是一个引用，第二行是另一个，第三个值是两个引用之间的“距离”。这种距离是由对这个问题不重要的生物学标准任意定义的。大多数参考将与...大多数参考相对，因此具有超过 600 万行的巨大 CSV。在另一个 CSV（all_spot_uniprot.txt）中，我有大约 3600 个点（第一列），每个点都有一个或多个参考（第三列）。这些值与巨大的 CSV 相同。我需要将第二个文件的点 ref 的每个 3600 与同一文件中的所有其他 3600-1 ref 进行比较。所有可能的组合（如果存在）都在第一个巨大的 CSV 文件 (ssm_resnik.txt) 中。

我的代码有什么问题？嗯...每次迭代 10 秒，3600 *3600 *10 = 129.600.000 秒 = 1500 天（几乎 5 年）。这发生在我的核心 i3 中，但在 mac 中很好。下面是我的代码和每个文件的一部分。请给我建议。有什么代码设计缺陷？有什么方法可以减少计算时间？提前致谢...

```
import csv

spot_to_uniprot=open('all_spot_uniprot.txt', 'rbU')
STU=csv.reader(spot_to_uniprot, delimiter='\t')

uniprot_vs_uniprot=open('ssm_resnik.txt', 'rbU')
allVSall= csv.reader(uniprot_vs_uniprot, delimiter='\t')

recorder=open('tabela_final.csv', 'wb')
fout=csv.writer(recorder, delimiter='\t', quotechar='"')

dict_STU={} #dicionário 'spot to uniprot'
dict_corresp={} #for each pair of uniprot ref as key and as value
#a list of lists with the first list as one spot and the second list is the spot+1
dict_corresp_media={}##average of one spot to other
total_correspondencias_x_y=[]
_lista_spot=[]
lista_spot=[]
lista_temp=[]
lista_CSV=[]

for a in STU:
    _lista_spot.append(int(a[0]))
    if a[0] not in dict_STU.keys():
        dict_STU[a[0]]=[]
        dict_STU[a[0]].append(a[2])
    else:        
        dict_STU[a[0]].append(a[2])
n_spot=max(_lista_spot)

spot_to_uniprot.close()

##for aa in _lista_spot:
##    lista_spot.append(int(aa))
##lista_spot.sort()

for i in allVSall:
    lista_CSV.append(i)
tuple_CSV=tuple(lista_CSV)

uniprot_vs_uniprot.close()

for h in range(1, n_spot):
    for _h in range(h+1, n_spot+1):
        #print h, 'h da lista_spot'
        del total_correspondencias_x_y[:]
        total_correspondencias_x_y.append(dict_STU[str(h)])
        #print h, 'h'
        #print _h, '_h'
        #print __h, '__h'
        total_correspondencias_x_y.append(dict_STU[str(_h)])
        print total_correspondencias_x_y, 'total_corresp_x_y'

        for c1 in total_correspondencias_x_y[0]:
            if c1=='No Data':
                pass
            else:
                for c2 in total_correspondencias_x_y[1]:
                    if c2=='No Data':
                        pass
                    else:
                        #print c1, c2, 'c1 e c2'
                        for c3 in lista_CSV:
                            if c1 in c3[0]:
                                if c2 in c3[1]:
                                    lista_temp.append(c3[2])
                                    print lista_temp, 'lista_temp'

        elements=len(lista_temp)
        if len(lista_temp)==0:
            dict_corresp_media[str(h)+'_'+str(_h)]=0
        else:
            temp_d=0
            for d in lista_temp:
                temp_d +=float(d)
            media_spots=temp_d/elements
            dict_corresp_media[str(h)+'_'+str(_h)]=media_spots

        print dict_corresp_media[str(h)+'_'+str(_h)]
        lista_temp=[]

recorder.close() 
```

这是我文件的一部分：

`all_spot_uniprot.txt`

```
1   spr0001 Q8DRQ4
1   SP0001  O08397
1   SPN01072    B5E568
2   spr0002 P59651
2   SP0002  O06672
2   SPN01074    B5E569
3   spr0005 Q8DRQ2
3   SP0005  Q97TD1
3   SPN01078    B5E572
4   spr0006 Q8DRQ1
4   SP0006  Q97TD0
4   SPN01079    B5E573
5   spr0009 Q8DRQ0
5   SP0009  Q97TC7
6   spr0010 Q8DRP9
6   SP0011  Q97TC5
6   SPN01085    B5E578
7   spr0012 P59652
7   SP0013  O69076
7   SPN01087    B5E580
8   spr0017 Q8DRP6
8   SP0017  No Data
8   SPN01090    B5E5G4
9   spr0020 Q8CZD0
9   SP0018  Q97TC2
9   SPN01093    B5E5G7
10  spr0021 P65888
10  SP0019  P65887
..  ......  ......  ......
..  ......  ......  ......
3617    spr2016 Q8DMY7
3617    spr0324 Q8DR62
3617    SP2211  No Data
3617    SP1311  No Data
3617    SP1441  No Data
3617    SPN11022    No Data
3617    SPN01038    No Data
3617    SPN08246    No Data
3618    spr2018 Q8DMY5
3618    SP0812  No Data
3618    SP2213  No Data
3618    SPN04196    B5E3J0
3618    SPN01040    B5E3V9
3619    spr2040 Q8DMW6
3619    SP2234  Q97N38
3619    SPN01065    B5E462
3620    spr2043 P60243 
```

`ssm_resnik.txt`

```
Q8DRQ4  O08397  1.0
Q8DRQ4  B5E568  1.0
Q8DRQ4  P59651  0.12077157944440875
Q8DRQ4  O06672  0.12077157944440875
Q8DRQ4  B5E569  0.12077157944440875
Q8DRQ4  Q8DRQ1  0.12077157944440875
Q8DRQ4  Q97TD0  0.12077157944440875
Q8DRQ4  B5E573  0.12077157944440875
Q8DRQ4  Q8DRP9  0.07139907404780385
Q8DRQ4  Q97TC5  0.07139907404780385
Q8DRQ4  B5E578  0.07139907404780385
Q8DRQ4  P59652  0.04789965413510797
Q8DRQ4  O69076  0.04789965413510797
Q8DRQ4  B5E580  0.04698170092888175
Q8DRQ4  Q8DRP6  0.12077157944440875
Q8DRQ4  P65888  0.05619465373456477
Q8DRQ4  P65887  0.05619465373456477
Q8DRQ4  B5E5G8  0.05619465373456477
Q8DRQ4  Q8DRP3  0.0115283466875553
Q8DRQ4  Q97TC0  0.0115283466875553
Q8DRQ4  B5E5G9  0.0115283466875553
Q8DRQ4  Q8DRP2  0.05619465373456477
Q8DRQ4  Q97TB9  0.05619465373456477
Q8DRQ4  B5E5H1  0.05619465373456477
Q8DRQ4  Q8DRP0  0.12077157944440875
Q8DRQ4  B5E5H3  0.12077157944440875
Q8DRQ4  Q8DNI4  0.12077157944440875
Q8DRQ4  Q8CWP0  0.12077157944440875
Q8DRQ4  Q97CV3  0.12077157944440875
Q8DRQ4  Q97P52  0.12077157944440875
O08397  Q97PH8  0.12077157944440875
O08397  P59200  0.10979991157849654
O08397  P59199  0.10979991157849654
O08397  B5E5I1  0.12077157944440875
O08397  Q8DRN5  0.047725405544042546
O08397  Q97TA8  0.047725405544042546
O08397  B5E5I4  0.047725405544042546
O08397  Q8DRN4  0.1555714706579846
O08397  Q97TA7  0.1555714706579846
O08397  B5E5I5  0.1555714706579846
O08397  Q97TA6  0.02938784938305615
O08397  Q8DRN2  0.02938784938305615
O08397  Q9F7T4  0.02938784938305615
O08397  P59653  0.04191624792292713
O08397  Q03727  0.04191624792292713
O08397  B5E5J1  0.045754049904644475
O08397  P59654  0.01167129073292015
O08397  P36498  0.01167129073292015
O08397  B5E5J2  0.0
O08397  Q8DRM7  0.05619465373456477
O08397  Q07296  0.05619465373456477
O08397  B5E5J3  0.05619465373456477
O08397  Q97TA3  0.05619465373456477
O08397  B5E5J5  0.05619465373456477
O08397  Q97T99  0.05619465373456477
O08397  Q8DRL9  0.05619465373456477
O08397  Q97T96  0.05619465373456477
O08397  B5E5K1  0.05619465373456477
O08397  Q97T95  0.05619465373456477
O08397  Q8DRL7  0.05619465373456477 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T21:14:52.833

600 万行可以保存在内存或 SQLite 数据库中。把它放在那里并利用提供的查找优化：

```
with open('ssm_resnik.txt', 'rbU') as uniprot_vs_uniprot:
    reader = csv.reader(uniprot_vs_uniprot, delimiter='\t')
    allVSall = { tuple(r[:2]): float(r[2]) for r in reader } 
```

现在`allVSall`是一个提供 O(1) 查找的映射；这使您不必为生成的每个组合循环遍历整个 600 万行。那是节省了*很多*循环。

`collections.defaultdict`阅读`all_spot_uniprot`列表时使用 a更容易：

```
from collections import defaultdict

dict_STU = defaultdict(list)
with open('all_spot_uniprot.txt', 'rbU') as spot_to_uniprot:
    reader = csv.reader(spot_to_uniprot, delimiter='\t')
    for row in reader:
        dict_STU[int(row[0])].append(row[2]) 
```

无需在`max`此处查找值，只需列出键并将它们传递给`itertools.permutations`and`itertools.product`函数以生成组合。

以下代码以更紧凑的形式复制了您的代码，列表更少，字典查找 O(1)，因此循环更少：

```
from itertools import permutations, product, ifilter

no_no_data = lambda v: v != 'No Data'
dict_corresp_media = {}

for a, b in permutations(dict_STU.iterkeys(), r=2):
    # retrieve the a and b lists of possible keys, for which we need to loop over their products
    # we filter each for the `No Data` keys
    aval, bval = ifilter(no_no_data, dict_STU[a]), ifilter(no_no_data, dict_STU[b])

    matches = [allVSall[c1, c2] for c1, c2 in product(aval, bval) if (c1, c2) in allVSall]
    dict_corresp_media['{}_{}'.format(a, b)] = sum(matches) / len(matches) if matches else 0 
```

对于您的输入样本，它会在几分之一秒内吐出：

```
>>> pprint.pprint(dict_corresp_media)
{'10_1': 0,
 '10_2': 0,
 '10_3': 0,
 '10_4': 0,
 '10_5': 0,
 '10_6': 0,
 '10_7': 0,
 '10_8': 0,
 '10_9': 0,
 '1_10': 0.05619465373456477,
 '1_2': 0.12077157944440875,
 '1_3': 0,
 '1_4': 0.12077157944440875,
 '1_5': 0,
 '1_6': 0.07139907404780385,
 '1_7': 0.04759366973303256,
 '1_8': 0.12077157944440875,
 '1_9': 0,
 '2_1': 0,
 '2_10': 0,
 '2_3': 0,
 '2_4': 0,
 '2_5': 0,
 '2_6': 0,
 '2_7': 0,
 '2_8': 0,
 '2_9': 0,
 '3_1': 0,
 '3_10': 0,
 '3_2': 0,
 '3_4': 0,
 '3_5': 0,
 '3_6': 0,
 '3_7': 0,
 '3_8': 0,
 '3_9': 0,
 '4_1': 0,
 '4_10': 0,
 '4_2': 0,
 '4_3': 0,
 '4_5': 0,
 '4_6': 0,
 '4_7': 0,
 '4_8': 0,
 '4_9': 0,
 '5_1': 0,
 '5_10': 0,
 '5_2': 0,
 '5_3': 0,
 '5_4': 0,
 '5_6': 0,
 '5_7': 0,
 '5_8': 0,
 '5_9': 0,
 '6_1': 0,
 '6_10': 0,
 '6_2': 0,
 '6_3': 0,
 '6_4': 0,
 '6_5': 0,
 '6_7': 0,
 '6_8': 0,
 '6_9': 0,
 '7_1': 0,
 '7_10': 0,
 '7_2': 0,
 '7_3': 0,
 '7_4': 0,
 '7_5': 0,
 '7_6': 0,
 '7_8': 0,
 '7_9': 0,
 '8_1': 0,
 '8_10': 0,
 '8_2': 0,
 '8_3': 0,
 '8_4': 0,
 '8_5': 0,
 '8_6': 0,
 '8_7': 0,
 '8_9': 0,
 '9_1': 0,
 '9_10': 0,
 '9_2': 0,
 '9_3': 0,
 '9_4': 0,
 '9_5': 0,
 '9_6': 0,
 '9_7': 0,
 '9_8': 0} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T20:55:10.060

当脚本需要很长时间时，我会：

```
python -m cProfile myscript.py 
```

我在一段时间后停止脚本。并且输出总结了在*任何*功能和模块中花费的时间。数字越大，问题就出在哪里。

在那里寻找其他分析方法：[如何分析 python 脚本？](https://stackoverflow.com/questions/582336/how-can-you-profile-a-python-script)

此外，就像评论建议的那样，您也可以考虑使用专用数据库。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-19T21:06:55.980

*您的程序的*复杂性似乎远高于*问题的*复杂性。使用 cProfile 或 PyPy 之类的东西（或者甚至在 C 中重新实现，就此而言）将帮助您加快程序的某些部分，但不会解决基本问题 - 嵌套`for`循环。

看看你是否可以用更扁平的方式重写算法。请记住，这是 Python 和`flat is better than nested`.

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T21:14:32.363

如果您的代码具有较差的渐近复杂性，那么优化将无济于事。想想你是否可以简化你的问题。例如，您*真的*需要检查所有 N*N 对吗？也许你可以提前丢弃一些对？

# f# - 具有常量参数的管道列表

> ID：16113235
> 
> 赞同：0
> 
> 时间：2013-04-19T20:47:09.997
> 
> 标签：f#, pipeline

我正在尝试创建一个由主要参数组成的管道，该参数是一个带有常量的列表。

作为一个简单的例子

```
type ClockType = | In | Out
let ClockMap index offset = 
    match index with
    | index when index + offset % 2 = 0 -> In
    | _ -> Out
 let MapIt offset = [0 .. 23] |> List.map offset 
```

当我取出`offset`. 我试过做 a`tuple`但它不喜欢`int list`. 解决此问题的最佳方法是什么？

我只是在学习 F#，所以请耐心等待。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:26:26.420

这就是你所追求的吗？

```
type ClockType = In | Out
let clockMap offset index = if (index + offset) % 2 = 0 then In else Out
let mapIt offset = [0 .. 23] |> List.map (clockMap offset) 
```

输出将是：

```
mapIt 3 |> printfn "%A"
// [Out; In; Out; In; Out; In; Out; In; Out; In; Out; In; Out; In; Out; In; Out;
//  In; Out; In; Out; In; Out; In] 
```

如果是这样，则存在多个问题：

*   `clockMap`的参数是向后的
*   `%`优先级高于`+`
*   `clockMap`从未被调用（并且`offset`需要部分应用于`clockMap`）

从`match`to的更改`if`纯粹是为了可读性，并且习惯上，非文字`let`绑定值以小写字符开头（类型名称和类属性/方法以大写开头）。

# parameters - 打开文件时指定监视器。（。蝙蝠）

> ID：16113237
> 
> 赞同：5
> 
> 时间：2013-04-19T20:47:16.513
> 
> 标签：parameters, batch-file, launching-application, multiple-monitors

下面的 .bat 文件只是打开了两个覆盖它们的文本文件，但我想知道是否可以定义特定的显示源，或者是否有人可以协助提供正确的参数。

```
@echo off

START /max /wait NOTEPAD.EXE C:\test\screen1.txt

START /max /wait NOTEPAD.EXE C:\test\screen2.txt 
```

我想要得到什么：

```
@echo off

START /max /wait NOTEPAD.EXE C:\test\screen1.txt "monitor1"  
START /max /wait NOTEPAD.EXE C:\test\screen2.txt "monitor2" 
```

所以我试图收到的结果是 screen1.txt 在 monitor1 上打开，而 screen2.txt 在 monitor2 上打开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T01:02:51.697

除非您正在启动的应用程序有一个命令行开关，否则没有简单的方法可以指定在哪个监视器上显示窗口。据我所知，既不`start`也不`notepad`支持这样的开关。我找到的最接近的解决方案是在窗口已经打开后移动它。

### 编辑：从 PowerShell 调用的 user32.dll SetWindowPos()

这是一个混合批处理 + PowerShell 脚本，用于启动程序并将其移动到特定监视器。使用 .bat 扩展名保存它。

```
<# : batch portion
@echo off & setlocal disabledelayedexpansion

set args=%*
call set args=%%args:%1 %2=%%
set "exe=%~2"
set "monitor=%~1"
set "scriptname=%~nx0"
powershell -noprofile "iex (${%~f0} | out-string)"
exit /b %ERRORLEVEL%

: end batch / begin powershell #>

function usage() {
    write-host -nonewline "Usage: "
    write-host -f white "$env:scriptname monitor# filename [arguments]`n"
    write-host -nonewline "* "
    write-host -f white -nonewline "monitor# "
    write-host "is a 1-indexed integer.  Monitor 1 = 1, monitor 2 = 2, etc."
    write-host -nonewline "* "
    write-host -f white -nonewline "filename "
    write-host "is an executable or a document or media file.`n"
    write-host -nonewline "$env:scriptname mimics "
    write-host -f white -nonewline "start"
    write-host ", searching for filename both in %PATH% and"
    write-host "in Windows' app paths (web browsers, media players, etc).`n"
    write-host "Examples:"
    write-host "To display YouTube in Firefox on your second monitor, do"
    write-host -f white "     $env:scriptname 2 firefox `"www.youtube.com`"`n"
    write-host "To play an mp3 file using the default player on monitor 1:"
    write-host -f white "     $env:scriptname 1 mp3file.mp3"
    exit 1
}

add-type user32_dll @'
    [DllImport("user32.dll")]
    public static extern void SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter,
        int x, int y, int cx, int cy, uint uFlags);
'@ -namespace System

add-type -as System.Windows.Forms
if ($env:monitor -gt [windows.forms.systeminformation]::MonitorCount) {
    [int]$monitor = [windows.forms.systeminformation]::MonitorCount
} else {
    [int]$monitor = $env:monitor
}
try {
    if ($env:args) {
        $p = start $env:exe $env:args -passthru
    } else {
        $p = start $env:exe -passthru
    }
}
catch { usage }

$shell = new-object -COM Wscript.Shell
while (-not $shell.AppActivate($p.Id) -and ++$i -lt 100) { sleep -m 50 }

try {
    $x = [Windows.Forms.Screen]::AllScreens[--$monitor].Bounds.X
    $hwnd = (Get-Process -id $p.Id)[0].MainWindowHandle
    [user32_dll]::SetWindowPos($hwnd, [intptr]::Zero, $x, 0, 0, 0, 0x41);
}
finally { exit 0 } 
```

* * *

### 原始答案：编译和链接 c# 可执行文件

移动窗口也不是一件容易的事。有关其他一些选项，请参阅[此帖子](https://stackoverflow.com/q/1872470/1683264)。但这里有一个批处理脚本，它将即时编写和链接 C# 应用程序以处理窗口移动。

```
@echo off
setlocal

:: // generate c.cs
call :heredoc movewind >"%temp%\c.cs" && goto compile_and_link
// syntax: movewind.exe [pid | "window title"] x y
using System;
using System.Diagnostics;
using System.Runtime.InteropServices;

class movewind {
    [DllImport("user32.dll", SetLastError = true)]
    private static extern bool SetWindowPos(IntPtr hWnd, IntPtr hWndInsertAfter, int x, int y, int cx, int cy, uint uFlags);

    [DllImport("user32.dll", SetLastError = true)]
    static extern IntPtr FindWindow(string lpClassName, string lpWindowName);

    static void Main(string[] args) {
        int pid;
        string title;
        bool res = Int32.TryParse(args[0], out pid);
        if (res) {title = Process.GetProcessById(pid).MainWindowTitle;} else {title = args[0];}
        IntPtr handle = FindWindow(null, title);
        try {
            SetWindowPos(handle, IntPtr.Zero, Convert.ToInt32(args[1]), Convert.ToInt32(args[2]), 0, 0, 0x41);
        }
        catch (Exception e) {
            Console.WriteLine("Exception caught while attempting to move window with handle " + handle);
            Console.WriteLine(e);
        }
    }
}
:compile_and_link

set "movewind=%temp%\movewind.exe"

for /f "delims=" %%I in ('dir /b /s "%windir%\microsoft.net\*csc.exe"') do (
    if not exist "%movewind%" "%%I" /nologo /out:"%movewind%" "%temp%\c.cs" 2>NUL
)
del "%temp%\c.cs"
if not exist "%movewind%" (
    echo Error: Please install .NET 2.0 or newer.
    goto :EOF
)

:: // get left monitor width
for /f "tokens=2 delims==" %%I in ('wmic desktopmonitor get screenwidth /format:list') do set "x=%%I"

:: // make sure test environment is in place
if not exist "c:\test" mkdir "c:\test"
if not exist "c:\test\screen1.txt" >"c:\test\screen1.txt" echo This should be on the left.
if not exist "c:\test\screen2.txt" >"c:\test\screen2.txt" echo This should be on the right.

:: // syntax: movewind.exe [pid | "window title"] x y
start /max notepad.exe "c:\test\screen1.txt"
call :movewind "screen1.txt - Notepad" 0 0
start /max notepad.exe "c:\test\screen2.txt"
call :movewind "screen2.txt - Notepad" %x% 0

del "%movewind%"

:: // end main runtime
goto :EOF

:: // SCRIPT FUNCTIONS

:movewind <title> <x> <y>
tasklist /v | find /i "%~1" && (
    "%movewind%" "%~1" %~2 %~3
    goto :EOF
) || (
    ping -n 1 -w 500 169.254.1.1 >NUL
    goto movewind
)

:heredoc <uniqueIDX>
:: // https://stackoverflow.com/a/15032476/1683264
setlocal enabledelayedexpansion
set go=
for /f "delims=" %%A in ('findstr /n "^" "%~f0"') do (
    set "line=%%A" && set "line=!line:*:=!"
    if defined go (if #!line:~1!==#!go::=! (goto :EOF) else echo(!line!)
    if "!line:~0,13!"=="call :heredoc" (
        for /f "tokens=3 delims=>^ " %%i in ("!line!") do (
            if #%%i==#%1 (
                for /f "tokens=2 delims=&" %%I in ("!line!") do (
                    for /f "tokens=2" %%x in ("%%I") do set "go=%%x"
                )
            )
        )
    )
)
goto :EOF 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-02-25T09:21:46.790

[cmdow](https://github.com/ritchielawrence/cmdow#examples)将为您执行此操作。

我使用它，但请注意 AV 将其标记为病毒。作者在上面的 github 页面链接上给出了为什么会出现这种情况的解释。

**用法**

获取所有窗口的列表并在列表中找到您的窗口。

```
cmdow 
```

移动窗口。

您需要以十六进制指定窗口句柄或使用窗口标题。

```
cmdow "window title" /mov 500 500 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2016-01-27T17:51:14.107

（Win 7）要指定打开 CMD 窗口的位置，只需运行批处理或 CMD，然后将 CMD 窗口放置在您想要的位置，包括如果您有多个监视器，则包括在哪个监视器上，然后右键单击其标题栏，选择属性，然后单击确定。下次使用相同的批次或图标打开 CMD 窗口时，它将位于新位置。

# git - Git允许我在不提交更改的情况下切换分支

> ID：16113240
> 
> 赞同：27
> 
> 时间：2013-04-19T20:47:32.583
> 
> 标签：git

我只是在学习 Git，正在学习一个教程。我在分支 seo_title 中，我对文件mission.html 进行了未提交的更改。我确实`git checkout master`希望收到有关更改未暂存以进行提交，未添加更改等的警告，但是它继续前进并使用以下消息切换了分支：

```
M       mission.html
Switched to branch 'master' 
```

然后当我这样做时，`git diff mission.html`它告诉我工作目录仍然包含我在签出另一个分支时所做的更改。我错过了什么？对于它的价值，我在 Windows 上使用 Git Bash。

编辑：对mission.html 的更改也没有添加到暂存索引中。

编辑 2：我认为投票最多的答案是正确的，但经过进一步调查，它与我看到的行为不符。这是对我正在做的事情的更完整的描述：

```
top_directory(master) > git branch new_branch_1
top_directory(master) > git branch new_branch_2
top_directory(master) > git checkout new_branch_1 
```

（打开notepad++修改resources.html，保存）

```
top_directory(master) > git status
# On branch new_branch_1
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed
#   (use "git checkout -- <file>..." to discard changes in wo
#
#       modified:   resources.html
#
no changes added to commit (use "git add" and/or "git commit
top_directory(new_branch_1) > git checkout new_branch_2 
```

这是我希望 git 反对并告诉我存储或提交的地方，因为 new_branch_1 和 new_branch_2 有不同版本的 resources.html，但它只是切换到新分支而没有警告，它带来了未提交的更改：

```
M       resources.html
Switched to branch 'new_branch_2'
top_directory(new_branch_2) > git status
# On branch new_branch_2
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   resources.html
#
no changes added to commit (use "git add" and/or "git commit -a") 
```

是否有一种模式或设置可以使它以这种方式运行而不是警告？还是我仍然误解了这个场景？

编辑3：我现在明白了。评价最高的答案是正确的，请参阅我对该答案的最后评论。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-04-19T21:09:05.620

您上次尝试使用本地更改切换分支时看到的不同行为现在是由于不同的文件更改造成的。

因此，假设我们有一个名为“readme”的分支，您在其中提交了对文件的一些更改，比如说 README.md。

现在，您已切换回 master。您对其他文件（不是 README.md）做了一些工作。现在您有了本地更改。如果您尝试在不提交更改的情况下切换回“自述文件”分支，它会让您这样做。为什么？因为切换到“自述文件”分支不会覆盖您的任何本地更改。

但是，如果您对主分支上的 README.md 文件进行了修改，那么当您尝试执行

```
git checkout readme 
```

你会遇到

```
error: Your local changes to the following files would be overwritten by checkout: README.md
Please, commit your changes or stash them before you can switch branches. 
```

因为您对 README.md 进行了需要合并的更改。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-19T23:02:13.700

This is the normal behavior. If you don't want the modified files on your newly checked out branch, then stash them. Like this.

```
# on branch dev
$ git stash
$ git checkout master

# do stuff on master

# back to dev
$ git checkout dev
$ git stash pop 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T21:11:02.130

只要您将工作树更改为的提交**不会**破坏您本地未提交的更改，Git 将允许您签出其他分支（或标签或 SHA1 哈希）。

在您的情况下， branch`master`的工作树将具有与`missing.html`您正在切换的当前分支的尖端中当前存在的版本相同的版本。在此处更改分支时， Git 不需要触摸工作副本（`missing.html`至少），因此可以让您保留本地修改。

如果您确实尝试在工作树`checkout`中有不同版本的提交`missing.html`（与当前分支中提交的版本不同），git 将显示类似于以下的错误消息：

```
$ git checkout some-other-branch
error: Your local changes to the following files would be overwritten by checkout:
        missing.html
Please, commit your changes or stash them before you can switch branches.
Aborting 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-18T18:36:17.350

这很明显，如果您更改要检出的分支中未更改的文件，因为检出的语法是将所有索引和工作目录带到您的新分支，您将让它们出现在您的新分支中. 虽然如果存在 r 冲突，则可能需要合并这些文件，这意味着在合并后一次，如果您签回旧分支，那么它已经是合并版本而不是您以前的版本，您将丢失它。因此，为了确保您保留旧更改，它不会让您这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T21:09:02.937

[Git - 愚蠢的内容跟踪器](https://github.com/git/git/blob/master/README)。它仅使用工作树快照进行操作。主要要求 - 您应该能够重建工作树。它当然会更新。但是如果修改后的文件在两个分支中都相同 - 为什么不允许切换？如果你做错了，你可以切换回重建以前的状态，没什么大不了的。但是如果文件在分支中不同，则需要合并内容，这就是它坚持提交更改的原因，否则将无法返回。

# javascript - 通过javascript向元素发送鼠标事件

> ID：16113244
> 
> 赞同：4
> 
> 时间：2013-04-19T20:48:03.267
> 
> 标签：javascript, html, css

所以我在另一个元素后面有一个元素，但它仍然可见（它只被元素本身部分覆盖，但完全被上面元素的 margin 属性覆盖）。我想在鼠标悬停时触发鼠标事件，但由于前面的元素，它没有传递给它。我知道如何计算我是否超过它以及如何指向它，但我不知道如何发送事件`onmouseover`or`hover`或`onmouseout`.

如果有帮助，我会使用`document.getElementById("<calculated id>")`. 我知道这是可行的，因为它的 ID 是基于它在网格中的位置，所以我只需要计算鼠标的位置并将其与网格相关联。

此外，应该发生的事件（但不是因为前面的事情）是`:hover`通过 CSS 触发简单过渡动画的事件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:53:17.977

```
document.getElementById('elementInFront').addEventListener('mouseenter', function(){
    document.getElementById('elementBehind').DoYourStuff();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:53:23.120

这行得通吗？我不确定我是否理解你的意图。

```
var item = document.getElementById("CalculatedId");
item.addEventListener("mouseover", func, false);

function func()
{  
   console.log("Hovered");
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T20:54:10.713

您可以使用 css 属性

```
pointer-events: none; 
```

在顶部元素上。这将允许所有鼠标事件“穿透”到后面的元素。不幸的是，这在 IE 中不起作用，唯一简单的替代方法是使前端元素的背景透明

# jquery - Jquery悬停错误？

> ID：16113258
> 
> 赞同：0
> 
> 时间：2013-04-19T20:48:50.460
> 
> 标签：jquery, hover

我使用 jquery hover 来显示项目详细信息，然后用户将鼠标悬停在此页面上的项目上 - dev.oyehabla.com 问题是，然后鼠标离开项目细节必须隐藏但有时它们仍然存在......是 jquery 错误还是我'我做错了什么？我使用这段代码：

```
jQuery('#big_container .item-image').hover(function(){
   var $opt = $(this);
   $item_id = $opt.attr("id");
   $post_id = $item_id.split('-');
   jQuery('#'+$item_id + ' .media_block .post-detail').show();
   console.log($item_id + 'mouseover')
},function(){
   var $opt = $(this);
   $item_id = $opt.attr("id");
   $post_id = $item_id.split('-');
   jQuery('#'+$item_id + ' .media_block .post-detail').hide();
   console.log($item_id + 'mouseout')    
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:59:21.103

您可能应该为此使用 CSS 而不是 jQuery，特别是如果您只是显示/隐藏 div。先试试这个：

```
$('#big_container .item-image').hover(function(){
   var $opt = $(this);
   $opt.find('.post-detail').show();
},function(){
   var $opt = $(this);
   $opt.find('.post-detail').hide();
}); 
```

这可能会解决您的问题。使用 CSS 的更好版本：

```
#big_container .item-image .post-detail {
  display: none;
}

#big_container .item-image:hover .post-detail {
  display: block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:03:59.543

您不需要整个功能..只需使用这部分

```
jQuery('#big_container .item-image').hover(function(){
   var $opt = $(this);
   $item_id = $opt.attr("id");
   $post_id = $item_id.split('-');
   jQuery('#'+$item_id + ' .media_block .post-detail').stop().show();
   console.log($item_id + 'mouseover')
}); 
```

# silverlight-5.0 - 创建适用于 Lightswitch 浏览器的应用程序时，如何导出到 excel？

> ID：16113259
> 
> 赞同：1
> 
> 时间：2013-04-19T20:48:54.973
> 
> 标签：silverlight-5.0, visual-studio-lightswitch, lightswitch-2012

创建适用于 Lightswitch 浏览器的应用程序时，如何导出到 excel？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:34:05.763

您可以使用一些库从浏览器应用程序中导出。例如，试试[Aspose](http://www.aspose.com)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T17:34:31.927

LightSwitch 有一个免费的扩展，称为[Office 集成包](https://officeintegration.codeplex.com/)，它允许导出到 Excel。

Beth Massi 解释了如何使用它：

*   [LightSwitch 的新的和改进的 Office 集成包扩展](http://blogs.msdn.com/b/bethmassi/archive/2012/07/18/new-and-improved-office-integration-pack-extension-for-lightswitch.aspx)
*   [使用适用于 LightSwitch 的 Office 集成包扩展的乐趣](http://blogs.msdn.com/b/bethmassi/archive/2011/09/22/fun-with-the-office-integration-pack-extension-for-lightswitch.aspx)

# ruby - 将字符串数组加入到 1 个或多个字符串中，每个字符串在一定的字符限制内（+ 前置和附加文本）

> ID：16113261
> 
> 赞同：1
> 
> 时间：2013-04-19T20:49:02.083
> 
> 标签：ruby, regex, string

假设我有一组 Twitter 帐户名称：

```
string = %w[example1 example2 example3 example4 example5 example6 example7 example8 example9 example10 example11 example12 example13 example14 example15 example16 example17 example18 example19 example20] 
```

还有一个前置和附加变量：

```
prepend = 'Check out these cool people: '
append = ' #FollowFriday' 
```

如何将其转换为尽可能少的字符串数组，每个字符串的最大长度为 140 个字符，从前置文本开始，以附加文本结尾，在 Twitter 帐户名称之间都以 @-sign 和用空格隔开。像这样：

```
tweets = ['Check out these cool people: @example1 @example2 @example3 @example4 @example5 @example6 @example7 @example8 @example9 #FollowFriday', 'Check out these cool people: @example10 @example11 @example12 @example13 @example14 @example15 @example16 @example17 #FollowFriday', 'Check out these cool people: @example18 @example19 @example20 #FollowFriday'] 
```

（帐户的顺序并不重要，因此理论上您可以尝试找到最佳顺序以充分利用可用空间，但这不是必需的。）

有什么建议么？我想我应该使用该`scan`方法，但还没有找到正确的方法。

使用一堆循环很容易，但我猜在使用正确的 Ruby 方法时这不是必需的。到目前为止，这是我想出的：

```
# Create one long string of @usernames separated by a space
tmp = twitter_accounts.map!{|a| a.insert(0, '@')}.join(' ')
# alternative: tmp = '@' + twitter_accounts.join(' @')

# Number of characters left for mentioning the Twitter accounts
length = 140 - (prepend + append).length

# This method would split a string into multiple strings
# each with a maximum length of 'length' and it will only split on empty spaces (' ')
# ideally strip that space as well (although .map(&:strip) could be use too) 
tweets = tmp.some_method(' ', length)

# Prepend and append
tweets.map!{|t| prepend + t + append} 
```

PS如果有人对更好的标题有建议，请告诉我。我很难总结我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:41:04.053

String`rindex`方法有一个[可选参数](http://ruby-doc.org/core-2.0/String.html#method-i-rindex)，您可以在其中指定从何处开始在字符串中向后搜索：

```
arr = %w[example1 example2 example3 example4 example5 example6 example7 example8 example9 example10 example11 example12 example13 example14 example15 example16 example17 example18 example19 example20]
str = arr.map{|name|"@#{name}"}.join(' ')
prepend =  'Check out these cool people: '
append = ' #FollowFriday'
max_chars = 140 - prepend.size - append.size
until str.size <= max_chars do
  p str.slice!(0, str.rindex(" ", max_chars))
  str.lstrip! #get rid of the leading space
end
p str unless str.empty? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:56:40.117

我会利用[`reduce`](http://ruby-doc.org/core-2.0/Enumerable.html#method-i-reduce)这个：

```
string = %w[example1 example2 example3 example4 example5 example6 example7 example8 example9 example10 example11 example12 example13 example14 example15 example16 example17 example18 example19 example20]
prepend = 'Check out these cool people:'
append = '#FollowFriday'

# Extra -1 is for the space before `append`
max_content_length = 140 - prepend.length - append.length - 1

content_strings = string.reduce([""]) { |result, target|
  result.push("") if result[-1].length + target.length + 2 > max_content_length
  result[-1] += " @#{target}"

  result
}

tweets = content_strings.map { |s| "#{prepend}#{s} #{append}" } 
```

这将产生：

```
"Check out these cool people: @example1 @example2 @example3 @example4 @example5 @example6 @example7 @example8 @example9 #FollowFriday"
"Check out these cool people: @example10 @example11 @example12 @example13 @example14 @example15 @example16 @example17 #FollowFriday"
"Check out these cool people: @example18 @example19 @example20 #FollowFriday" 
```

# c++ - 不初始化类的引用变量没有错误

> ID：16113264
> 
> 赞同：1
> 
> 时间：2013-04-19T20:49:09.397
> 
> 标签：c++, oop, constructor

我是一个新手，对对象创建和构造函数之间的关系有一个基本的疑问。

**程序- 1**

```
 #include<iostream>
 using namespace std;
 class xxx{
     private: int x;
     public: xxx(){cout<<"constructer is called"<<endl;}
 };
 int main(int argc, char *argv[])
 {
     xxx x1;        //Constructor is called
     return 0;
 } 
```

**输出构造函数被调用**

**程序- 2**

```
 #include<iostream>
 using namespace std;
 class xxx{
     private: int x;
     public: xxx(){cout<<"constructer is called"<<endl;}
 };
 int main(int argc, char *argv[])
 {
     xxx x1();        //Constructor xxx() is not called.
     return 0;
 } 
```

**输出-空白** 任何信息都非常有帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:50:25.983

这个：

```
xxx x1(); 
```

是一个函数声明（函数调用`x1`不带参数并返回一个`xxx`），而不是一个变量声明，因此没有创建实例`xxx`（因此没有构造函数调用）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T20:50:50.593

```
 xxx x1; 
```

创建类的对象`xxx`，因此调用类的默认构造函数`xxx`。

```
xxx x1(); 
```

声明一个返回类对象的函数，`xxx`函数名称为`x1`，不带参数。它不是 class 的实例化`xxx`，因此没有调用构造函数。

# java - ArrayAdapter 中未定义构造函数

> ID：16113266
> 
> 赞同：1
> 
> 时间：2013-04-19T20:49:16.203
> 
> 标签：java, android, mobile

我正在尝试在 Android 应用程序中填充 ListView 控件。我查看了许多代码示例，似乎都建议这样做。但是，当我尝试实现此功能时，出现以下错误：

构造函数 ArrayAdapter(MainActivity.ReadJsonTask, int, ArrayList) 未定义

```
 protected void onPostExecute(String result){
        try{
            ListView lv = (ListView)findViewById(R.id.lstItems);
            JSONObject jsonObj = new JSONObject(result);

            ArrayList<String> items = new ArrayList<String>();
            Iterator<String> looper = jsonObj.keys();
            while(looper.hasNext()){
                String key = looper.next();
                items.add(jsonObj.get(key).toString());
            }               
            adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, items);
            lv.setAdapter(adapter);

        }catch(Exception ex){
            Log.d("ReadAdscendJsonTask", ex.getLocalizedMessage());
        }
    } 
```

这里有什么问题？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:54:50.217

看来这段代码来自内部类。在这种情况下，`this`指的是这个内部类而不是`MainActivity`. `Context`将参数更改为`MainActivity.this`for`ArrayAdapter`应该可以修复错误。

# java - 如果未设置默认值，Gradle 会在哪里生成 JavaDocs？

> ID：16113271
> 
> 赞同：2
> 
> 时间：2013-04-19T20:49:39.617
> 
> 标签：java, intellij-idea, javadoc, gradle

我正在运行 Gradle Javadoc 任务（通过 java 插件），但找不到输出。

在 gradle 文档中，它声明默认目标目录是`${project.docsDir}/javadoc`，但是我找不到`${project.docsDir}`设置的位置。`${project.docsDir}`未设置时的输出位置是什么？

***更新：**我使用`idea`插件构建了项目，该插件构建了一个`build`目录被排除/隐藏的项目；它还排除/隐藏`.gradle`目录。这也解释了遵守的课程消失在哪里。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:54:07.133

`build/docs/javadoc`是输出目录。

# schema - 如何根据 oracle 中另一个表的更新来更新表？

> ID：16113275
> 
> 赞同：1
> 
> 时间：2013-04-19T20:50:05.207
> 
> 标签：schema

我在模式 S1 中有一个表 T1。来自模式 S2 的表 T2。T1 和 T2 都有主键 P1 和 Q1。

我想用从 T2 为 P1 更新的 Q1 更新 T1。我尝试编写对我没有帮助的触发器，因为没有特权，因为 S1 是应用程序架构，而 S2 是产品架构。

请让我知道实施相同的最佳解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:01:34.333

我不是 Oracle 的专家，但我认为 SQL Server 具有相同的语法：

```
UPDATE S1..T1
SET Field = TAB2.Field
FROM S1..T1 AS TAB1 INNER JOIN S2..T2 AS TAB2 ON TAB1.P1 = TAB2.Q1 
```

# c++ - 将 std::wstring 转换为 WCHAR*

> ID：16113282
> 
> 赞同：20
> 
> 时间：2013-04-19T20:50:14.937
> 
> 标签：c++, string

我不知道如何将 a 转换 `std::wstring`为 a`WCHAR*`

```
std::wstring wstrProcToSearch;
WCHAR * wpProcToSearch = NULL;

std::wcin >> wstrProcToSearch;  // input std::wstring
// now i need to convert the wstring to a WCHAR* 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-19T21:20:19.193

如果你想从 to 转换`std::wstring`（`const WCHAR*`即返回的指针提供对字符串内容**的只读访问**），那么调用`std::wstring::c_str()`方法就可以了：

```
std::wstring wstrProcToSearch;
std::wcin >> wstrProcToSearch;  // input std::wstring

// Convert to const WCHAR* (read-only access)
const WCHAR * wpszProcToSearch = wstrProcToSearch.c_str(); 
```

相反，如果你想**修改** `std::wstring`'s 的内容，情况就不同了。您可以使用`&wstr[0]`(where `wstr`is an non-empty instance of `std::wstring`) 来访问`std::wstring`(从其第一个字符的地址开始，并注意字符连续存储在内存中) 的内容，但必须注意不要超出字符串的 pre -分配的内存。

一般来说，如果你有一个`std::wstring`长度`L`，你可以访问从索引`0` 到的字符`(L-1)`。

*在*C++17 之前，[覆盖终止符`'\0'`](https://stackoverflow.com/questions/12740403/legal-to-overwrite-stdstrings-null-terminator)（位于 index 处`L`）是*未定义的行为*（实际上，在 Visual C++ 上是可以的，至少在 VC9/VS2008 和 VC10/VS2010 中是这样）。

从 C++17 开始，`'\0'`用另一个 NUL 覆盖终止的 NUL ( ) 已变为[有效](https://stackoverflow.com/a/41310431/1629821)并且不再是未定义的行为。

如果字符串的大小不合适（即它不足以满足您的需要），那么您可以调用`std::wstring::resize()`为新字符腾出空间（即调整 internal`std::wstring`的缓冲区大小），然后用于`&wstr[0]`读写`std::wstring`的内容。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-04-19T20:59:39.513

如果字符串已经是适当的长度并且不需要更改，则可以通过获取指向第一个字符的指针来获取非常量指针：

```
WCHAR * wpProcToSearch = &wstrProcToSearch[0]; 
```

这保证可以在 C++11 中工作，并且没有已知的 C++03 实现。

如果您只需要一个 const 指针，您应该使用`c_str`：

```
const WCHAR * wpProcToSearch = wstrProcToSearch.c_str(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-19T20:53:11.943

我认为你可以使用

`wpProcToSearch = wstrProcToSearch.c_str()`

就像您使用普通的 std::string 一样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-15T15:00:04.363

我推荐这种方法：

```
wstring str = L"Hallo  x     y   111 2222  3333 rrr 4444   ";
wchar_t* psStr = &str[0]; 
```

这很简单，但您根本无法更改字符串的长度。所以移动“\0”可能无效......

# common-lisp - Cons Lisp 中的 Funcall

> ID：16113283
> 
> 赞同：1
> 
> 时间：2013-04-19T20:50:20.963
> 
> 标签：common-lisp

我刚开始玩 Lisp，我正在尝试在 cons 中使用 funcall。

这就是我想要做的：

```
(cons  '(1 2 3) '(1 (funcall #'rest '(a b)) )) 
```

结果应该是：

```
((1 2 3) 1 (b)) 
```

我知道这有效：

```
(cons  '(1 2 3) (funcall #'rest '(a b))) 
```

我已经试过了，但没有用

```
(cons  '(1 2 3) `,'(1 (funcall #'rest '(a b)) ))
(cons '(1 2 3) '(1 (apply 'rest '(a b))))
(cons '(1 2 3) '(1 `,(apply 'rest '(a b)))) 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T16:12:03.813

```
(cons '(1 2 3) `(1 ,(funcall #'rest '(a b)))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T21:04:04.060

引用列表时，列表内的所有内容都被引用，因此没有函数调用。你可以像这样实现你想要的：

```
[1]> (cons  '(1 2 3) (list 1 (funcall #'rest '(a b)) ))
((1 2 3) 1 (B))
[2]> 
```

# ios - 存储 iPhone 数据的最佳方式（自定义 NSObject）

> ID：16113287
> 
> 赞同：0
> 
> 时间：2013-04-19T20:50:41.970
> 
> 标签：ios, objective-c, core-data, nsuserdefaults

我有一个`NSMutableArray`存储名为“地址”的对象。一个地址是一个`NSObject`具有 4-5 个属性 ( `NSStrings`) 的地址。`NSMutableArray`应包含最多 15 个地址对象。

在 iPhone 上存储该数组的最佳方式是什么？`Core data`? `NSUserDefaults`? 我是否应该将每个地址对象单独存储，而不是将所有对象存储在一个中`NSMutableArray`？在那种情况下，我该怎么办`iPhone`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T02:00:32.310

正如@rog 所说，您可以使用它`NSUserDefaults` 来保存数据

& 你应该让你的对象遵循协议`NSCoding`

例如，如果您反对的是“YouObject”

```
@interface YouObject: NSObject {

}

@property (nonatomic, copy) NSString *uid;
@property (nonatomic, copy) NSString *name;

@end

//implement this 2 method 

- (id)initWithCoder:(NSCoder *)decoder {
  if (self = [super init]) {
    self.title = [decoder decodeObjectForKey:@"uid"];
    self.author = [decoder decodeObjectForKey:@"name"];
  }
  return self;
}

- (void)encodeWithCoder:(NSCoder *)encoder {
  [encoder encodeObject:title forKey:@"uid"];
  [encoder encodeObject:author forKey:@"name"];
} 
```

然后使用归档或取消归档`NSUserDefaults`

```
//archive
YouObject *object = [YouObject ....]
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:object ];
[[NSUserDefaults standardUserDefaults] setObject:data forKey:@"address"];

//unarchive
NSData *data = [[NSUserDefaults standardUserDefaults] objectForKey:@"address"];
YouObject *object = (YouObject *)[NSKeyedUnarchiver unarchiveObjectWithData:data]; 
```

或者如果你有一个 YouObject Array，你可以用同样的方式保存 NSArray；

```
//archive
NSArray *addresses;
NSData *data = [NSKeyedArchiver archivedDataWithRootObject:address ];
[[NSUserDefaults standardUserDefaults] setObject:data forKey:@"address"];

//unarchive
NSData *addressData = [[NSUserDefaults standardUserDefaults] objectForKey:@"address"];
NSArray *addresses = (NSArray*)[NSKeyedUnarchiver unarchiveObjectWithData:address]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:09:25.720

对于你所描述的，我认为`NSUserDefaults`就足够了。请参阅这篇文章： [如何在 NSUserDefaults 中存储自定义对象](https://stackoverflow.com/questions/2315948/how-to-store-custom-objects-in-nsuserdefaults?rq=1)。`NSUserDefaults`您可以在此处了解有关限制的更多信息： [NSUserDefaults 的限制是什么](https://stackoverflow.com/questions/6173625/what-are-the-limitations-of-nsuserdefaults)。

但是，如果您要保存/加载大量数据，则应考虑使用 Core Data。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T01:47:32.023

最简单的方法是使用 nsmutablearray 读写方法。所有数据必须是 plist 数据类型 nsarray nsdictionary nsstring nsnumber nsdate。类似 rog 建议的 nsuserdefault 也不错。只要数据量仍然很小。

# c++ - 全局范围枚举和命名空间冲突

> ID：16113290
> 
> 赞同：1
> 
> 时间：2013-04-19T20:50:56.757
> 
> 标签：c++, com, enums, atl, midl

我有一个 ATL COM 服务，在 .IDL 文件中，我声明了一个枚举，如下所示：

在 Gourmet.idl

```
typedef enum Food
{
    Chocolate = 0,
    Doughnut,
    HotDog
} Food; 
```

头文件会自动生成，创建 Gourmet_i.h。

在同一个 ATL COM 项目的另一个 .CPP 文件（我们称之为 Decadence.cpp）中，我 #include Gourmet_i.h。我在这个 .CPP 中实现了一个类，它位于命名空间“Chocolate”下。

例如在 Decadence.cpp 中：

```
#include "Gourmet_i.h"

namespace Chocolate {

// Constructor
void Decadence::Decadence() {}

// ... and so on

} // namespace Chocolate 
```

编译后，我收到有关 Gourmet_i.h 的以下错误：

```
error C2365: 'Chocolate': redefinition; previous definition was 'namespace' 
```

我看到这是因为 IDL 的枚举是在全局命名空间中定义的，但是是否可以包含这个定义——所以它不会污染全局命名空间——而且我不会有这个冲突？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:08:13.493

除了重命名命名空间或枚举成员之外，唯一的解决方案是将生成的头文件的内容包装在命名空间中。这并非没有陷阱，并且取决于 MIDL 文件的内容，它最终可能会引起一些麻烦。我能看到的最简洁的方法是创建一个声明命名空间的代理头文件，然后包含 MIDL 生成的头文件。

`Gourmet.h`

```
namespace MIDLStuff
{
    #include "Gourmet_i.h"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:48:23.477

如果您使用的是 C++11，则可以通过包括以下内容来使用 Scoped Enumeration `class`：

```
typedef enum class Food
{
    Chocolate = 0,
    Doughnut,
    HotDog
} Food; 
```

现在您需要`Food::Chocolate`在使用该值时编写。

# javascript - CKEDITOR.inline 首次加载

> ID：16113292
> 
> 赞同：1
> 
> 时间：2013-04-19T20:50:58.157
> 
> 标签：javascript, html, dom, ckeditor, contenteditable

CKEDITOR 在第一次加载时给了我一些困难，我使用：

```
CKEDITOR.inline 
```

1.  在第一次加载时，加载大约需要 2 秒，如果用户编辑 div 的内容，则在这两秒内，当 CKEDITOR 最终加载时，它会将其恢复到编辑之前：\ 有没有办法修复它或者可能是只读的CKEDITOR 加载之前的文本？现在我使用 opacity0 直到 ckeditor 准备好，但它是一个便宜的 hack 并且看起来不太好。

2.  在第一次加载时，工具栏从屏幕的最左侧开始，在其他加载时，当它完全显示在正在编辑的 div 上方时，不会发生这种情况。

我无法弄清楚他们是如何在 ckeditor 内联演示中完美地做到这一点的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T07:23:58.863

这个问题有点太模糊，无法真正掌握任何一个潜在的问题。我会将此作为评论发布，但它太长了，所以我会继续添加作为答案。预加载编辑器是什么意思？您想阻止用户编辑内容还是想在加载 HTML 正文内容之前加载编辑器？两者基本上与“在 ckeditor 准备好之前使用 opacity0 但它是一种廉价的黑客并且看起来不太好。”相同，有什么区别？

我在评论中不是在谈论服务器性能，而是在谈论客户端性能。有很多很多的事情你可以尝试

*   构建一个更漂亮的假预加载器；例如，在 CKE 准备好之前，用覆盖覆盖站点
*   将 DOM 创建推迟到 CKEDITOR.instanceready 或任何对您可用的事件。我的意思是你可以创建一个漂亮的加载动画并使用 JS 获取实际的可编辑内容，这看起来也像一个预加载器
*   仅在 document.ready 或其他稍后的事件中启用可编辑的内容，这可能会有所帮助
*   监控网络，查看 CKE 请求加载多长时间以及您是否可以接受
*   检查您没有使用 CKE 的源版本
*   检查缓存是否按预期工作
*   通过删除您不需要的任何和所有插件来最小化负载

所有这些都只是针对第 1 个问题。至于“在第一次加载时，工具栏从屏幕的最左侧开始，而在其他加载时，当它完全显示在正在编辑的 div 上方时，不会发生这种情况。” ，我们能否获得样本或如何重现此问题或发生这种情况的 URL，甚至是屏幕截图？基于此，很难复制。

# android - gles2 使用 AnalogController 移动精灵

> ID：16113297
> 
> 赞同：1
> 
> 时间：2013-04-19T20:51:35.107
> 
> 标签：android, andengine

您好，我是 andengine 的新手，我一直在使用 andengine 食谱，并且已经了解了有关创建模拟控制器的部分。我已经编写了一些代码来移动和旋转精灵，但是每当我运行它时，都会出现运行时错误。

```
mController = new AnalogOnScreenControl(controllerX, controllerY,
mCamera, controllerBaseregion, controllerknobregion, 0.1f,
mEngine.getVertexBufferObjectManager(),
new IAnalogOnScreenControlListener() {
    @Override
    public void onControlChange(
    // TODO Auto-generated method stub
    // pvalues is the direction of dragging
    BaseOnScreenControl pBaseOnScreenControl,
    float pValueX, float pValueY) {
        mainSprite.setPosition(mainSprite.getX() + (pValueX + 2),
        mainSprite.getY() + (pValueY + 2 ));
        mainSprite.setRotation(pValueX);
        Log.d("mainSprite", String.valueOf(mainSprite.getRotation()));
    } 
```

# c# - 从单个通用覆盖样式类实例化多个类

> ID：16113299
> 
> 赞同：1
> 
> 时间：2013-04-19T20:51:47.537
> 
> 标签：c#, class, interface, instantiation

我正在寻找一种能够实例化具有相同方法的多个类的方法。

想做一些我可以将类的名称作为字符串传递的事情。到目前为止，这是我在编译时所拥有的，因为我没有正确实例化类，所以它不会运行。

我正在做这样的事情，但我知道我错过了一些东西。如果有人可以提供帮助，我将不胜感激。

```
public class useMyClass{
   public runMyClass(string st1, list<string> mysts, string myClass){
       classProcessor cp = new myClass1(); // this works
       classProcessor cp = new myClass2(); // this works

       // Here I just want to be able to do using the string variable myClass (myClass1 or myClass2 ) could be the string value
       //classProcessor cp = new Class(myClass);

       // This does not work always null
       classProcessor cp = (classProcessor)System.Reflection.Assembly.GetExecutingAssembly().CreateInstance(myClass);
       cp.myMethod(st1,mysts);
   }
} 
```

文件 1：classProcessor.cs

```
public interface classProccessor{
    public void myMethod(string st1, list<string> mysts);
} 
```

文件 2：myClass1.cs

```
public class myclass1 : classProccessor{ 
    public void myMethod(string st1, list<string> mysts){
      //do something;
    }
} 
```

文件 3：myClass2.cs

```
public class myclass2 : classProccessor{ 
    void myMethod(string st1, list<string> mysts){
        // do something different;
    }
} 
```

如何通过接口使用类的字符串名称创建类的新实例？我知道我一定错过了一些简单的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:54:54.727

接口不会自动发生。
您需要在每个类中显式实现接口：

```
public clas MyClass1 : IClassProcessor 
```

# sql - 每当查询时格式化字段

> ID：16113300
> 
> 赞同：0
> 
> 时间：2013-04-19T20:51:58.890
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, time

我有一个 Rails 应用程序作为 iPhone 应用程序的后端。每当创建一条记录（我们称之为它`message`）时，我都会将来自 iPhone 应用程序的字符串格式化为 Ruby DateTime，该字符串将保存为数据库中的一个字段。字符串本身是从 iPhone 端的 NSDate 转换而来的。我的问题是我想将 DateTime 转换回一个字符串，该字符串可以在发送消息查询时轻松格式化回 NSDate。有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:03:48.777

视图想法不一定是坏的，但我可能会建议在您的模型上放置一个`date_string`属性，如下所示：`Message`

```
class Message
  def date_string
    date.to_s # or however you want to format it
  end
end 
```

然后，当您呈现 JSON 时，包含`date_string`. 我不知道你用什么来渲染你的 JSON，但我在[RABL](https://github.com/ccocchi/rabl-rails)方面有过非常棒的体验。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:57:18.520

解决方案是视图。在数据库中创建一个视图来访问表：

```
create view vw_table as
    select <columns that you want>
           <code to convert datetime here> as NSDate
    from t; 
```

然后，您可以在应用程序中使用视图而不是表。

# angularjs - 如何传递然后访问指令模板内的对象（指令使用隔离范围）？

> ID：16113304
> 
> 赞同：1
> 
> 时间：2013-04-19T20:52:22.820
> 
> 标签：angularjs, angularjs-directive, angularjs-scope

我有一个 navBarItems 的集合，目前正在像这样展示它们：

```
 <a data-role="button" data-iconpos="notext" ng-show="navBarItems['search'].show" ng-click="navBarItems['search'].click()" data-icon="{{navBarItems['search'].icon}}">{{navBarItems['search'].title}}</a> 
```

我正在重复这段代码，只是改变了“类型”，所以我想用模板创建一个指令并像这样调用它：

```
<navBarItem type="search"></navBarItem> 
```

我已经尝试将属性传递给一个独立的范围，但是一旦在指令中就无法访问 navBarItems。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T14:03:31.130

正如上面评论中提到的，由于正在使用/创建隔离范围，因此隔离范围所需的任何其他数据都需要通过同一元素上的附加属性传递给指令。在这种情况下`navBarItems`需要指定：

```
<navBarItem type="search" items="navBarItems"></navBarItem> 
```

由于`navBarItems`is 是一个对象（不是字符串），因此`=`应该在隔离范围定义中使用语法：

```
scope: { items:'=',  ... }, 
```

# jquery - 为什么 CAMLQueryOptions 代码在操作中不起作用：SPservices 中的“GetListItems”用于显示所有没有文件夹的项目？

> ID：16113308
> 
> 赞同：0
> 
> 时间：2013-04-19T20:52:34.340
> 
> 标签：jquery, sharepoint-2010, spservices

这是我的代码，适用于文件夹，但我想获取所有没有文件夹的项目。

获取列表项的代码。

```
var qo = '<QueryOptions><ViewAttributes Scope="Recursive"/></QueryOptions>';    

$().SPServices({
operation: "GetListItems",
async: false,
listName: list,
CAMLViewFields: f,
CAMLLimit: l,
CAMLQuery: q,    
CAMLQueryOptions: qo,

completefunc: function (xData, Status) {

 $(xData.responseXML).find("[nodeName='z:row']").each(function(i) {
        var liHtml = "<tr><td>" + $(this).attr("ows_Title") + "</td> <td>" + $(this).attr("ows_LinkFilenameNoMenu") + "</td> <td>" + $(this).attr("ows_Created") + "</td>  </tr>";
        var title = $(this).attr("ows_LinkTitle")

      $("#tasksUL").append(liHtml);

  });
   }
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T15:54:39.537

溶液清澈如水晶。

因此更改代码：

```
$(xData.responseXML).find("[nodeName='z:row']").each(function(i) { 
```

为了这：

```
$(xData.responseXML).SPFilterNode("z:row").each(function() { 
```

# php - Mysqli 没有正确显示错误

> ID：16113310
> 
> 赞同：0
> 
> 时间：2013-04-19T20:52:51.440
> 
> 标签：php, mysqli

我正在尝试正确学习mysqli，我得到了大部分功能。剩下要做的一件事是在我的所有层中进行适当的错误报告。我不明白为什么下面的代码片段检测到错误但不会得到错误号或错误代码。

```
function get_PID_TID_by_PK($con,$ourId)
{
    $returned['errno'] ="";
    $returned['error'] ="";
    //mistake is over here!!!
    if(!$stmt = $con->prepare("ELECT gene_name,jgi_protein_id,jgi_transcript_id FROM jgi_transid_protid_match where our_protein_id = ?"))
    {
        $returned['errno'] = $con->errno;
        $returned['error'] = $con->error;
        return $returned;
    }

    if(!$stmt->bind_param('s',$ourId))
    {
        $returned['errno'] = $stmt->errno;
        $returned['error'] = $stmt->error;

        return $returned;
    }

    if(!$stmt->execute())
    {
        $returned['errno'] = $stmt->errno;
        $returned['error'] = $stmt->error;

        return $returned;
    }

    $stmt->bind_result($gene_name,$jgi_protein_id,$jgi_transcript_id);
    $stmt->fetch();

    $fetchedArray['gene_name'] = $gene_name;
    $fetchedArray['jgi_protein_id'] = $jgi_protein_id;
    $fetchedArray['jgi_transcript_id'] = $jgi_transcript_id;

    //Have to use this hack since query returns an object and not an array and I don't want to make everything object oriented if you don't know what I am talking about just ignore this comment
    $returned['assoc'] = $fetchedArray;

    return $returned;
} 
```

错误很明显，在第 6 行我写了 ELECT 而不是 SELECT 程序正在进入该块但 errno 和错误为空。我在做什么错。如果我不故意破坏它，这段代码可以正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:58:39.580

您确定 IF 语句是正确的吗？

```
if(!$stmt = $con->prepare("ELECT gene_name,jgi_protein_id,jgi_transcript_id FROM jgi_transid_protid_match where our_protein_id = ?"))
{
    $returned['errno'] = $con->errno;
    $returned['error'] = $con->error;
    return $returned;
} 
```

应该

```
if(($stmt = $con->prepare("ELECT gene_name,jgi_protein_id,jgi_transcript_id FROM jgi_transid_protid_match where our_protein_id = ?")) === FALSE)
{
    $returned['errno'] = $con->errno;
    $returned['error'] = $con->error;
    return $returned;
} 
```

或拆分作业

```
$stmt = $con->prepare("ELECT gene_name,jgi_protein_id,jgi_transcript_id FROM jgi_transid_protid_match where our_protein_id = ?");
if($stmt === FALSE)
{
    $returned['errno'] = $con->errno;
    $returned['error'] = $con->error;
    return $returned;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:03:59.460

> 我正在尝试正确学习 mysqli

这是你犯的唯一错误。

使用[PDO](https://stackoverflow.com/tags/pdo/info)，您的代码将是......**三**行长。它会正确报告所有错误

```
function get_PID_TID_by_PK($con,$ourId)
{
    $stmt = $con->prepare("ELECT gene_name,jgi_protein_id,jgi_transcript_id FROM jgi_transid_protid_match where our_protein_id = ?");
    $stmt->execute(array($ourId));
    return $stmt->fetch();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:31:55.400

最后我决定使用[http://www.php.net/manual/en/function.set-error-handler.php](http://www.php.net/manual/en/function.set-error-handler.php)。我将重新设计我的代码，让 php 错误处理程序处理所有错误，我将为正在发生的数据库错误制作一个自定义错误。

# javascript - 我可以确定单击链接是否成功打开了新窗口/选项卡？

> ID：16113311
> 
> 赞同：0
> 
> 时间：2013-04-19T20:52:55.303
> 
> 标签：javascript, jquery, html, internet-explorer-8, href

我在一个`<input>`元素中有一个`<a>`元素，这意味着 IE8 在单击时会忽略该`<a>`元素的 href 属性。它适用于所有其他浏览器。 *有没有办法确定是否打开了新的选项卡/窗口？* 如果它不起作用，我可以给用户一个正常/丑陋的链接来点击。

代码示例：

```
<a target="_blank" href="http://somelink.com"><input type="button" class="standard_button_styling" /></a> 
```

我试过的：

1.  删除`<input>`标签并设置标签样式`<a>`：我很难让它看起来像我的其他按钮（可能是由于本机浏览器样式），我不希望它看起来更糟糕，因为每个人都只修复了 IE8 的问题。
2.  使用 JavaScript window.open() 触发链接：这不会在 IE 中发送referer_url，我的示例中的 somelink.com 依赖它。所以我需要让用户点击一个正常的链接。
3.  浏览器检测：我可以只寻找 IE8 并为 IE8 提供不同的响应，但是浏览器检测而不是特征检测被认为是不好的做法，如果可能的话我想避免它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:15:40.120

您可以尝试使用`<button>`代替，`<input>`但我不确定这是否能解决问题。
或者只是使用`<form>`.

```
<form method="get" target="_blank" action="yourlink">
    <input type="submit" value="Click" />
</form> 
```

# java - SWT 按钮下拉控件

> ID：16113313
> 
> 赞同：9
> 
> 时间：2013-04-19T20:52:57.067
> 
> 标签：java, button, drop-down-menu, swt, controls

是否有一个**标准的 SWT 控件**，它类似于一个**按钮**，该按钮**显示一个箭头**并在按下时**打开一个下拉菜单，并且****不是仅工具栏控件**？

它会是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/jbN5f.png)

它类似于组合框控件，除了“按钮”区域的行为与实际按钮更相似 - 它的文本不会根据您的选择而改变，单击时会显示为按下，并且项目将用于操作或导航目的，而不是用于选择。它也类似于可用于工具栏的控件，但我需要在常规组合上使用它。

只需使用常规按钮和弹出菜单控件，这几乎是可行的 - 但是，我不相信我可以以这种方式在按钮上的文本旁边显示箭头。无论如何，由于这种控制似乎相当普遍，我认为会有一种标准方法将这两个东西合二为一。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-23T18:29:12.637

我认为，这是你应该做的得到下拉菜单行为

1.  `Menu`用风格创作`SWT.DROP_DOWN`
2.  创建`MenuItems`时间`Menu`

如果你想要一个按钮

1.  创建一个带有样式的按钮`SWT.ARROW | SWT.DOWN`
2.  添加`SelectionListener`
3.  在`SelectionListener`中，创建具有样式`SWT.POP_UP`的菜单并将菜单放置在按钮位置。

//代码

```
public static void main(String[] args) {
        Display display = new Display();
        final Shell shell = new Shell(display);
        shell.setSize(300, 200);
        shell.setText("Button Example");
        shell.setLayout(new RowLayout());

        /**
         * 
         * Approach1
         * 
         */
        final Composite btnCntrl = new Composite(shell, SWT.BORDER);
        btnCntrl.setBackground(display.getSystemColor(SWT.COLOR_WHITE));
        btnCntrl.setBackgroundMode(SWT.INHERIT_FORCE);
        GridLayoutFactory.fillDefaults().numColumns(2).equalWidth(false).spacing(0, 1).applyTo(btnCntrl);
        CLabel lbl = new CLabel(btnCntrl, SWT.NONE);
        lbl.setText("Animals");
        Button btn = new Button(btnCntrl, SWT.FLAT|SWT.ARROW|SWT.DOWN);
        btn.setLayoutData(new GridData(GridData.FILL_VERTICAL));

        btn.addSelectionListener(new SelectionAdapter() {
            @Override
            public void widgetSelected(SelectionEvent e) {
                super.widgetSelected(e);
                Menu menu = new Menu(shell, SWT.POP_UP);

                MenuItem item1 = new MenuItem(menu, SWT.PUSH);
                item1.setText("Hare");
                MenuItem item2 = new MenuItem(menu, SWT.PUSH);
                item2.setText("Fox");
                MenuItem item3 = new MenuItem(menu, SWT.PUSH);
                item3.setText("Pony");

                Point loc = btnCntrl.getLocation();
                Rectangle rect = btnCntrl.getBounds();

                Point mLoc = new Point(loc.x-1, loc.y+rect.height);

                menu.setLocation(shell.getDisplay().map(btnCntrl.getParent(), null, mLoc));

                menu.setVisible(true);
            }
        });

        /***
         * 
         * 
         * Approach 2
         * 
         */

        final Composite btnCntrl2 = new Composite(shell, SWT.BORDER);
        btnCntrl2.setBackground(display.getSystemColor(SWT.COLOR_WHITE));
        btnCntrl2.setBackgroundMode(SWT.INHERIT_FORCE);
        GridLayoutFactory.fillDefaults().numColumns(2).equalWidth(false).spacing(0, 1).applyTo(btnCntrl2);
        CLabel lbl2 = new CLabel(btnCntrl2, SWT.NONE);
        lbl2.setText("Animals");
        Button btn2 = new Button(btnCntrl2, SWT.FLAT|SWT.ARROW|SWT.DOWN);
        btn2.setLayoutData(new GridData(GridData.FILL_VERTICAL));

        btn2.addSelectionListener(new SelectionAdapter() {
            @Override
            public void widgetSelected(SelectionEvent e) {
                super.widgetSelected(e);
                Shell menu = (Shell) btnCntrl2.getData("subshell");
                if(menu != null && !menu.isDisposed()){
                    menu.dispose();
                }
                menu = new Shell(shell, SWT.NONE);
                menu.setLayout(new FillLayout());
                Table table = new Table(menu, SWT.FULL_SELECTION);
                table.addListener(SWT.MeasureItem, new Listener() {

                    @Override
                    public void handleEvent(Event event) {
                        event.height = 20; //TODO: determine later
                    }
                });

                table.addListener(SWT.PaintItem, new Listener() {

                    @Override
                    public void handleEvent(Event event) {
                        Rectangle bounds = event.getBounds();
                        event.gc.setBackground(event.display.getSystemColor(SWT.COLOR_BLUE));
                        event.gc.drawLine(bounds.x, bounds.y+bounds.height-1, bounds.x+bounds.width, bounds.y+bounds.height-1);
                    }
                });
                TableItem tableItem= new TableItem(table, SWT.NONE);
                tableItem.setText(0, "Hare");

                TableItem tableItem2= new TableItem(table, SWT.NONE);
                tableItem2.setText(0, "Pony" );

                TableItem tableItem3= new TableItem(table, SWT.NONE);
                tableItem3.setText(0, "Dog");

                Point loc = btnCntrl2.getLocation();
                Rectangle rect = btnCntrl2.getBounds();

                Point mLoc = new Point(loc.x, loc.y+rect.height);

                menu.setLocation(shell.getDisplay().map(btnCntrl2.getParent(), null, mLoc));
                menu.pack();
                menu.setVisible(true);

                btnCntrl2.setData("subshell", menu);

            }
        });

        display.addFilter(SWT.MouseDown, new Listener() {

            @Override
            public void handleEvent(Event event) {
                Shell shell = (Shell) btnCntrl2.getData("subshell");
                if(shell != null && !shell.getBounds().contains(event.display.map((Control)event.widget, null, new Point(event.x, event.y)))){
                    shell.dispose();
                    btnCntrl2.setData("subshell", null);
                }
            }
        });

        shell.open();
        while (!shell.isDisposed()) {
          if (!display.readAndDispatch())
            display.sleep();
        }
        display.dispose();
      } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T12:50:47.553

该[片段](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/tree/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet67.java)显示了如何在 SWT 工具栏中使用所描述的小部件。您可以使用该`item.setText()`方法设置按钮文本。

# html - 文本未在 li 中水平对齐

> ID：16113315
> 
> 赞同：0
> 
> 时间：2013-04-19T20:52:58.143
> 
> 标签：html, css

嗨，我正在使用下面的代码，我的文本没有在 Li 中水平对齐。HTML 代码：

```
 <body>
<div id="image_header">
<img src="header.jpg" width="500" height="54" />
</div>
<div id="header">
<div id="left_panel">
<h2 id="heading" align="cente">Welcome to the <br />
Help Center</h2>

 <div id="image_src" align="center">
 <img src="Doc_image.jpg" align="middle" />
 </div>
</div>
<div id="right_panel">
<p><strong>
xxx</strong>
</p>
</div>
</div>
<div id="footer">
<div id="left_footer">
<div id="img_left">
<img src="separator_bar.jpg"/>
</div>
<div>Help Topics &nbsp;&nbsp;&nbsp;</div>
<br />
<div id="left_list">
<ul >
<li>General Information</li>
<li>Getting Started</li>
<li>Functions</li>
<li>Additional Features</li>
</ul>
<br />
</div>
</div>
<div id="right_footer">
<div id="img_right">
<img src="separator_bar.jpg" />
</div>
<div>Manuals &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;</div>
<br />
<div id="right_list">
<ul>
<li>Guide</li>
<li>&nbsp;&nbsp;&nbsp;User Guide</li>
</ul>
<br />
</div>
</div>
</div> 
```

CSS：

```
 div {
    background-color:#ebeff5;
}

#image_header{
    background-color:#FFF
}

#header,#footer {
    width:500px;
    position:relative;
    overflow:hidden;

    }

#left_panel,#left_footer{
    width:250px;
    float:left;
    text-align:center

    }

#right_panel,#right_footer{
    width:250px;
    float:right;
    text-align:center

}

#left_panel h2{
    color:#002e5c;
    font:Arial, Helvetica, sans-serif
}

#right_panel p {
    letter-spacing:-1px;
    padding:0px 10px;
    font:Arial, Helvetica, sans-serif;
    color:#002e5c
}

#left_list ul,#right_list ul{
    list-style-position:inside;
    list-style-type:none;
    padding:0px;
    margin:0px;

}

#left_list ul li,#right_list ul li{

    background-image:url(web%20bullet.jpg);
    background-repeat:no-repeat;
    background-position:55px 5px; 
    padding-left:15px;

} 
```

请建议附上图片！![项目清单](https://i.stack.imgur.com/NDAAr.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:17:34.967

修复：

```
background-position:0px 5px; 
padding-left:20px; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-07T05:00:05.163

干得好

[在 JS 小提琴中](http://jsfiddle.net/g9SRp/)

```
 <body>
<div id="image_header">
<img src="header.jpg" width="500" height="54" />
</div>
<div id="header">
<div id="left_panel">
<h2 id="heading" align="cente">Welcome to the <br />
Help Center</h2>

 <div id="image_src" align="center">
 <img src="Doc_image.jpg" align="middle" />
 </div>
</div>
<div id="right_panel">
<p><strong>
xxx</strong>
</p>
</div>
</div>
<div id="footer">
<div id="left_footer">
<div id="img_left">
<img src="separator_bar.jpg"/>
</div>
<div>Help Topics &nbsp;&nbsp;&nbsp;</div>
<br />
<div id="left_list">
<ul >
<li>General Information</li>
<li>Getting Started</li>
<li>Functions</li>
<li>Additional Features</li>
</ul>
<br />
</div>
</div>
<div id="right_footer">
<div id="img_right">
<img src="separator_bar.jpg" />
</div>
<div>Manuals &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &nbsp; &nbsp;&nbsp;&nbsp;&nbsp;</div>
<br />
<div id="right_list">
<ul>
<li>Guide</li>
<li>User Guide</li>
</ul>
<br />
</div>
</div>
</div>
</body> 
```

CSS

```
 div {
    background-color:#ebeff5;
}

#image_header{
    background-color:#FFF
}

#header,#footer {
    width:500px;
    position:relative;
    overflow:hidden;

    }

#left_panel,#left_footer{
    width:250px;
    float:left;
    text-align:center

    }

#right_panel,#right_footer{
    width:250px;
    float:right;
    text-align:center

}

#left_panel h2{
    color:#002e5c;
    font:Arial, Helvetica, sans-serif
}

#right_panel p {
    letter-spacing:-1px;
    padding:0px 10px;
    font:Arial, Helvetica, sans-serif;
    color:#002e5c
}

#left_list ul,#right_list ul{
    list-style-position:inside;
    list-style-type:none;
    padding:0px;
    margin:0px;

}

#left_list ul li,#right_list ul li{

    background-image:url(http://katewhittington.com/wp-content/uploads/2012/04/bulletpoint.gif);
    background-repeat:no-repeat;
    background-position:0px 5px; 
    padding-left:15px;
    text-align:left;

}

#left_list{margin-left:78px;}
#right_list{margin-left:68px;} 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:58:59.623

从您上传的图片看来，您正在寻找这个：

[JSFIDDLE 演示](http://jsfiddle.net/XE89x/7/)

```
<div id="left_list">
    <ul>
        <li>General Information</li>
        <ul>
            <li>Getting Started</li>
            <ul>
                <li>VIWeb Functions</li>
            </ul>
        </ul>
        <li>Additional Features</li>
    </ul>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T21:11:32.553

我添加`text-align:left`到`ul`和`li`

```
#left_list ul,#right_list ul{

    list-style-type:none;
    padding:0px;
    margin:0px;
    text-align: left;

}

#left_list ul li,#right_list ul li{
    background-image:url(web%20bullet.jpg);
    background-repeat:no-repeat;
    background-position:55px 5px; 
    padding-left:15px;
    text-align: left;
} 
```

# c# - 在 asp.net 中将表格导出到 word doc 时图像损坏

> ID：16113321
> 
> 赞同：2
> 
> 时间：2013-04-19T20:53:29.247
> 
> 标签：c#, asp.net

我正在尝试将面板内的数据导出到 asp.net 4.0 中的 word doc

我能够实现将整个内容导出为 word 的结果，但是我在 .aspx 页面中使用的框的图像损坏了。

我的 .aspx 页面：

```
 <asp:Panel ID="tblReport" runat="server">
<div class="boxed1a">
                <img class="images4" src="images/AoAFund.png" width="640" height="45" />
                <table class="tb3">
                <tr>
                <td>Leasehold & Functional Programs</td>
                <td><asp:TextBox ID="txtLFP" runat="server"></asp:TextBox></td>
                </tr>
                <tr>
                <td>N/A</td>
                <td><asp:TextBox ID="txtNA" runat="server"></asp:TextBox></td>
                </tr>
                <tr>
                <td>Acquis Maint & Renov</td>
                <td><asp:TextBox ID="txtAMR" runat="server"></asp:TextBox></td>
                </tr>
                </table>
            </div>
</asp:Panel> 
```

以及我将此面板导出为 word 的代码隐藏：

```
protected void btnWord_Click(object sender, EventArgs e)
{
    Response.ClearContent();
    Response.Charset = "";
    Response.AppendHeader("content-disposition", "attachment;  filename=report.doc");
    Response.ContentType = "application/msword";

    StringWriter sw = new StringWriter();
    HtmlTextWriter htw = new HtmlTextWriter(sw);
    tblReport.RenderControl(htw);
    Response.Write(sw.ToString());
    Response.End();
} 
```

这是单词 doc 屏幕截图： ![在此处输入图像描述](https://i.stack.imgur.com/ebuGQ.png)

任何线索如何删除损坏的图像或修复它？我用谷歌搜索了很多，但不清楚任何好的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:56:29.013

几天前我完全遇到了同样的问题，而不是：

```
src="images/AoAFund.png" 
```

尝试提及完整的网址，例如：

```
 src="http://server_host/images/AoAFund.png" 
```

我希望这有帮助。

# asp.net-mvc - 新浏览器实例 Asp.net MVC 中的 Facebook 身份验证

> ID：16113326
> 
> 赞同：2
> 
> 时间：2013-04-19T20:54:06.913
> 
> 标签：asp.net-mvc, facebook-graph-api

我有一个 Asp.Net MVC 4 应用程序，我有一个功能，该应用程序可以发布到用户的墙上。它工作正常，但目前的网址

> [https://www.facebook.com/dialog/oauth?client_id=XXXXX&redirect_uri=http://localhost:xxxxxx/&scope=publish_stream](https://www.facebook.com/dialog/oauth?client_id=XXXXX&redirect_uri=http://localhost:xxxxxx/&scope=publish_stream)

重定向到 facebook 页面，进行身份验证，发布消息并重定向回我的应用程序。

是否可以在新的浏览器实例中打开 facebook 身份验证页面，并在发布消息后以某种方式关闭浏览器实例？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T15:04:38.220

不确定这是否涵盖了您想要实现的目标，但通过使用[Facebook Feed Dialog](https://developers.facebook.com/docs/reference/dialogs/feed/)，您可以将[`display`](http://developers.facebook.com/docs/reference/dialogs/#display)参数设置为适当的值（例如弹出窗口）并让用户将故事发布到时间线。

# c# - 无法使用 C# 或 VB 检索 Web 服务响应

> ID：16113329
> 
> 赞同：3
> 
> 时间：2013-04-19T20:54:18.683
> 
> 标签：c#, vb.net, visual-studio-2010, web-services, soap

我必须创建一个将一些数据发送到（SOAP）WebService 并显示其响应的应用程序。看起来很简单，但问题是在消费了 WS 之后，变量仍然是空的。我尝试了 C# 和 VB 都没有运气。

这是代码：

```
using System;
using System.Collections.Generic;
using System.Text;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {

            CardifWS.RequestContactWsService webService = new CardifWS.RequestContactWsService();

            string usuario = "user987";
            string name = "teste2003 1552";
            string cpf = "123456789";
            string email = "email@gmail.com";
            string zipCode = "04536010";
            string city = "sao paulo";
            string neighborhood = "itaim";
            string state = "sp";
            string address = "itaim";
            string addressNumber = "98";
            string addressComp = "2";
            int dddPhone = 11;
            string phone = "12345678";
            int dddCellPhone = 11;
            string cellPhone = "1187654321";
            int fipeCode = 123456;
            string chassi = "123456789";  
            string renavam = "987654321";
            string placa = "abc3456";
            string marca = "ford";
            string modelo = "ka";
            int colorCode = 456;
            int anoFabricacao = 2010;
            int anoModelo = 2011;
            int indice = 1;
            string[] parametros = "7".Split(' ');
            string bestTimeCall = "T";

            CardifWS.RequestContactResponse respuesta = webService.requestContact(usuario, name, cpf, email, zipCode, city,
                                                                                neighborhood, state, address, addressNumber,
                                                                                addressComp, dddPhone, phone, dddCellPhone,
                                                                                cellPhone, fipeCode, chassi, renavam, placa,
                                                                                marca, modelo, colorCode, anoFabricacao,
                                                                                anoModelo, indice, parametros, bestTimeCall);

            Console.WriteLine("Response: {0}", respuesta.ToString());
            Console.WriteLine("errorCode: {0}", respuesta.errorCode.ToString());
            Console.WriteLine("errorDesc: {0}", respuesta.errorDesc);
            Console.WriteLine("id: {0}", respuesta.id.ToString());
            Console.ReadLine();
        }
    }
} 
```

这是 WS URL

[http://directsales2.uat.cardif.com.br:8080/autofacil-ws/services/RequestContactWs?wsdl](http://directsales2.uat.cardif.com.br:8080/autofacil-ws/services/RequestContactWs?wsdl)

使用 WireShark，我确信 WS 正在向我发送响应，但出于某种原因，.NET 似乎无法读取它。

我正在使用 Visual Studio 2010

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:12:26.687

我检查了服务，显然响应的命名空间与服务命名空间不同。

*   响应：命名空间=“http://response.autofacil.cardif.com.br
*   服务：命名空间=“http://webservice.autofacil.cardif.com.br

我使用 svcutil.exe 为 web 服务生成代理类

```
SvcUtil.exe /o:c:\temp\foo.cs http://directsales2.uat.cardif.com.br:8080/autofacil-ws/services/RequestContactWs?wsdl 
```

将类导入您的项目，并将服务添加到 app.config

```
<system.serviceModel>
  <bindings>
    <basicHttpBinding>
      <binding name="RequestContactWsSoapBinding" />
    </basicHttpBinding>
  </bindings>
  <client>
    <endpoint address="http://directsales2.uat.cardif.com.br:8080/autofacil-ws/services/RequestContactWs"
        binding="basicHttpBinding" bindingConfiguration="RequestContactWsSoapBinding"
        contract="Cardif.Autofacil.WebService.RequestContactWs" name="RequestContactWs" />
  </client>
</system.serviceModel> 
```

之后，您可以在导入的类中更改 RequestContactResponse 的命名空间

```
[System.SerializableAttribute()]
[System.Diagnostics.DebuggerStepThroughAttribute()]
[System.ComponentModel.DesignerCategoryAttribute("code")]
[System.Xml.Serialization.XmlTypeAttribute(Namespace ="http://webservice.autofacil.cardif.com.br")]
public partial class RequestContactResponse 
```

# durandal - Durandaljs shell 未正确渲染

> ID：16113331
> 
> 赞同：0
> 
> 时间：2013-04-19T20:54:20.293
> 
> 标签：durandal

我有以下`shell.js`

```
define(function (require) {
    var router = require('durandal/plugins/router');

    return {
        router: router,
        activate: function () {
            return router.activate('movies/show');
        }
    };
}); 
```

和以下`shell.html`

```
<div>
    <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <ul class="nav" data-bind="foreach: router.visibleRoutes">
                <li data-bind="css: { active: isActive }">
                    <a data-bind="attr: { href: hash }, html: name"></a>
                </li>
            </ul>
        </div>
    </div>

    <div class="container-fluid page-host">
        <!--ko compose: { 
            model: router.activeItem, //wiring the router 
            afterCompose: router.afterCompose, //wiring the router 
            transition:'entrance', //use the 'entrance' transition when switching views 
            cacheViews:true //telling composition to keep views in the dom, and reuse them (only a good idea with singleton view models) 
            }--><!--/ko-->
    </div>
</div> 
```

但是当我运行我的应用程序时，第一个 div`shell.html`永远`class="navbar navbar-fixed-top"`不会呈现。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:38:11.760

结果证明这是一个愚蠢的错误。我大量使用 ReSharper。所以我创建了一个`shell.html`然后点击`F6`将它移动到`view`文件夹。Resharper 没有移动，而是复制了文件，从而留下了旧文件。这一切都是在我编辑错误的文件时发生的。现在我有一个`shell.html`，一切正常。

# c# - C#如何在构造函数中增加变量-Windows服务

> ID：16113332
> 
> 赞同：-3
> 
> 时间：2013-04-19T20:54:23.543
> 
> 标签：c#, c#-4.0, windows-services, webclient

我有一个 Windows 服务，我想在调用构造函数时更改 URL。我通过将变量连接到构造函数中来形成 URL，并且变量正在递增（如下面的代码所示）。

但是，URL 没有改变，我仍然从 URL 下载相同的 XML 文件。

我试过这个：

```
private string Url;
    private string Name = @"D:\test\userko.xml";
    private System.Timers.Timer timer;

    private Downloader xd;
    private static int i;

    public Service1()
    {
        InitializeComponent();
        while (i < 5000)
        {
            Url = "http://tis-toolbox.appspot.com/api/user/id/" + i + ".xml";
            i++;
            if (i == 4999)
                i = 0;
            break;
        }

        xd = new Downloader(Url, Name);
        timer = new System.Timers.Timer();
        timer.Enabled = true;
        timer.Interval = 1000;
        timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
    }

    protected override void OnStart(string[] args)
    {
        EventLog.WriteEntry("PCTrss reader Service Started.");
        tryDownload();
    }

    protected override void OnStop()
    {
        EventLog.WriteEntry("PCTrss reader Service was shutdown.");
    }

    private void timer_Elapsed(object sender, EventArgs e)
    {
        tryDownload();
    }

    private void tryDownload()
    {
        try
        {
            timer.Stop();
            xd.DownloadXML();
            EventLog.WriteEntry("PCTrss reader downloaded news at " + xd.LastUpdate + ". XML is in " + Name);
        }
        catch (Exception ex)
        {
            EventLog.WriteEntry("PCTrss reader Service cannot download feeds " + ex.ToString());
        }
        finally
        {
            timer.Start();
        }
    }
} 
```

这是下载器类。它从 URL 读取并保存 XML 文件。

```
class Downloader
{
    public DateTime LastUpdate;
    public string Url { get; set; }
    public string Name { get; set; }

    public Downloader(string url, string name) 
    {
        this.Url = url;
        this.Name = name;
    }

    public void DownloadXML()
    {
        if (!Directory.Exists(@"D:\test"))
            Directory.CreateDirectory(@"D:\test");

        LastUpdate = DateTime.Now;

        WebClient client = new WebClient();
        client.Encoding = Encoding.UTF8;
        using( Stream stream = client.OpenRead(Url) )
        using( StreamReader sr = new StreamReader(stream) )
        using( FileStream fs = new FileStream(Name, FileMode.Create, FileAccess.Write))
        using( StreamWriter sw = new StreamWriter(fs) )
        {
            string s = sr.ReadToEnd();
            sw.BaseStream.Seek(0, SeekOrigin.End);
            sw.Write(s);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:08:45.970

有几个问题：

首先，正如 berXpert 所指出的，while 循环中的正确子句应该是`i < 5000`. 其次，如果要下载5000次，整个代码应该在while循环中

```
while (i < 5000)    
{
    Url = "http://tis-toolbox.appspot.com/api/user/id/" + i + ".xml";
    i++;
    xd = new Downloader(Url, Name);
    timer = new System.Timers.Timer();
    timer.Enabled = true;
    timer.Interval = 1000;
    timer.Elapsed += new System.Timers.ElapsedEventHandler(timer_Elapsed);
} 
```

此外，您不需要`break`in`while`循环，它不会执行超过 5000 次（假设`i`从 0 开始）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:01:51.517

请务必将 while 子句更改为

```
i < 5000 
```

并`i`作为共享静态属性

```
private static int; 
```

# django - 在 widget=BootstrapDateInput() 中解析语言参数？

> ID：16113333
> 
> 赞同：1
> 
> 时间：2013-04-19T20:54:24.177
> 
> 标签：django, twitter-bootstrap, datepicker

如何将语言参数传递给[BootstrapDateInput](https://github.com/dyve/django-bootstrap-toolkit)

关于什么？

```
widget=BootstrapDateInput(language="pt-BR") 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:51:28.863

小部件用于`translation.get_language()`获取当前语言。

如果要强制使用语言环境，可以手动设置，例如：

```
from django.utils import translation
translation.activate('pt-BR')
widget=BootstrapDateInput() 
```

如果您只使用一种语言，请在 settings.py 中进行设置：

```
LANGUAGE_CODE = 'pt-br' 
```

在 2.11.5 之前的 django-bootstrap-toolkit 版本中，小部件存在问题，导致小部件始终使用相同的特定语言 JS 文件，而不是使用适合当前语言的文件。这意味着`settings.LANGUAGE_CODE`小部件很可能只支持设置的语言，否则默认为英语。

该问题已在版本 2.11.5 中得到修复。

# imagemagick - RMagick 作物！“bignum 太大而无法转换为‘long’”错误

> ID：16113334
> 
> 赞同：3
> 
> 时间：2013-04-19T20:54:28.653
> 
> 标签：imagemagick, rmagick

我在极少数情况下从 RMagick 2.13.1 收到错误消息，并且该错误消息对我来说没有意义。任何人都可以提供任何见解吗？

```
pagination = Magick::ImageList.new
pagination.from_blob(RestClient.get(url))
pagination.each do |f| 
  f.crop!(Magick::SouthWestGravity, 0, 20, 368, 358) 
end 
```

`crop!``RangeError: bignum too big to convert into 'long'`在调用之前`crop!`我可以检查并获得“PNG 550x366 `f`550x366+0+0 DirectClass 16-bit 625kb”。

该代码通常有效，我无法弄清楚是什么导致它在此图像上中断。

# javascript - 在 Javascript 中创建用于电子邮件的 HTML 表？

> ID：16113336
> 
> 赞同：5
> 
> 时间：2013-04-19T20:54:31.327
> 
> 标签：javascript, html, html-table, html-email, mailto

我读了一个[帖子](https://stackoverflow.com/questions/247245/is-it-possible-to-add-an-html-link-in-the-body-of-a-mailto-link)，指出无法将 HTML 传递给电子邮件正文。

我想知道这是否仍然是真的？

我当前的 JavaScript 是：

```
 TableF = '<table style="font-size: 1.0em; border-collapse: collapse;">';
        TableF += '<tr>';
        TableF += '<td>IP Addresses</td>';
        TableF += '<td>Hop Number</td>';
        TableF += '<td>Average MS</td>';
        TableF += '</tr>';
        TableF += '<tr>';
        for(var i = 0; i < iparray.length; i++){
        TableF +=  '<td>'+ iparray[i]+'</td><td>' + hopnum[i]+'</td><td>' + msarray[i]+'</td>';
        }
        TableF += '</tr></table>';
} 
```

可以说，当使用链接时，它不会转换为表格`mailto`，它只是将 HTML 写入纯文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T21:11:57.540

您不能使用`mailto`链接指定要传递给邮件应用程序的 HTML 内容，因为它是电子邮件预填充的“最小公分母”。

信息将被传递到客户的邮件程序（无论是 Outlook、gmail、thunderbird 等），这完全不受您的控制。

即使有可能，它也需要在**客户**端（邮件程序）而不是您的`mailto`链接上实现。

# class - 在matlab中自动分配类类型

> ID：16113348
> 
> 赞同：1
> 
> 时间：2013-04-19T20:55:08.607
> 
> 标签：class, matlab

我想获取变量的类类型并将其用作 Matlab 中的函数。

例如，say `x`is of class `uint8`。我可以通过 获取此信息`classtype=class(x)`。

我想要的是自动在不同的变量上使用它，例如：

```
y=classstype(y) 
```

例如，其中`y`的类型`logical`。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T21:02:39.190

听起来您正试图将值`y`转换为不同的类。为此，您可以尝试使用 Matlab 的`cast()`函数。

在您的特定情况下，您可以尝试：

```
y = cast(y, class(x)) 
```

这应该获得变量的类`x`并将变量`y`转换为该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:03:19.627

该函数`class()`返回带有类名的字符串。`eval()`您可以使用将字符串作为输入处理的函数进一步使用它。

# java - 大十进制while循环

> ID：16113350
> 
> 赞同：2
> 
> 时间：2013-04-19T20:55:15.570
> 
> 标签：java, while-loop, bigdecimal

我有一个使用整数的while循环，但我将它转换为大十进制，因为该值很高，我不确定如何使我的while循环使用大十进制而不是整数我的代码如下.

```
public String getsize()
{
  BigDecimal size = new  BigDecimal(mySize);
  int count = 0;
  String dataType = "";
while (size > 1000 )
  {   
   size = size.divide(size, 1000);
   count++;
  } 
  switch (count)
  {
    case 0:
    dataType = "Bytes";
    break;
    case 1:
    dataType = "KB";
    break;
    case 2:
    dataType = "MB";
    break;
    case 3:
    dataType = "GB";
    break;
    case 4:
    dataType = "KB";
    break;    
  }   
    return size + dataType ;
} 
```

错误出现在 while (size > 1000 ) 行，因为这是 size 为整数时的方法。有人可以告诉我使用 Big Decimal 作为大小的方法吗？我在想出它时遇到了一些麻烦
编辑：给出的解决方案，现在在我的分区行中弹出了一个不相关的问题我得到：“线程“主”java.lang.IllegalArgumentException：无效舍入模式中的异常”任何想法解决这个问题？我认为最好在这里发帖，然后提出一个全新的问题，但如果那是正确的，那就不好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:58:33.863

比较`BigDecimals`，使用[`compareTo`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#compareTo%28java.math.BigDecimal%29)方法；`BigDecimal`是`Comparable`。如果大于 ，该`compareTo`方法将返回一个大于 0 的整数。`size``thousand`

```
BigDecimal thousand = new BigDecimal(1000);
while (size.compareTo(thousand) > 0 ) 
```

顺便说一句，您似乎没有`BigDecimal`正确进行除法：

```
size = size.divide(size, 1000); 
```

这将解释`1000`为[舍入模式](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#divide%28java.math.BigDecimal,%20int%29)，并会导致`IllegalArgumentException`. 我认为你只需要划分它：

```
size = size.divide(thousand);  // see above for BigDecimal "thousand" declaration 
```

此外，案例 4 不正确；除以 1000 4 次（万亿）后，它应该是 TB 的“TB”：

```
case 4:
dataType = "TB";
break; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T20:59:42.860

您还必须将您比较的值包装在 a 中`BigDecimal`，并将它们与`compareTo`方法进行比较：

```
BigDecimal limit = new BigDecimal("1000");
while (size.compareTo(limit) > 0 ) {
    ...
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T21:03:04.070

你需要做：

```
BigDecimal compareVal = new BigDecimal(1000);
while(size.compareTo(compareVal) > 0) {
    ...
} 
```

[http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#compareTo(java.math.BigDecimal)](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#compareTo(java.math.BigDecimal))

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T20:58:23.687

```
compareTo(BigDecimal another) 
```

[http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#compareTo(java.math.BigDecimal)](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html#compareTo(java.math.BigDecimal))

```
BigDecimal k = new BigDecimal("1000");
while(size.compareTo(k)>0).... 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T20:59:07.423

用这个：

```
while (size.compareTo(new BigDecimal(1000)) > 0) {
    // ...
} 
```

更好的是，将`1000`值定义为局部变量：

```
final BigDecimal _1000 = new BigDecimal(1000);
while (size.compareTo(_1000) > 0) {
    // ...
} 
```

# javascript - 正则表达式仅匹配不正确匹配的数字

> ID：16113356
> 
> 赞同：0
> 
> 时间：2013-04-19T20:56:01.007
> 
> 标签：javascript, regex, numbers, match

我正在尝试在 JavaScript 中使用正则表达式来匹配数字或包含小数的数字。正则表达式看起来像`[0-9]+ | [0-9]* \. [0-9]+`.

但是，由于某种原因，这`'1A'.match(/^[0-9]+|[0-9]*\.[0-9]+$/)`会错误地找到匹配项。我不确定表达式的哪一部分与`A`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:58:26.097

问题是你的交替。这就是它所说的：

```
 ^[0-9]+           # match an integer at the start
|                   # OR
  [0-9]*\.[0-9]+$   # match a decimal number at the end 
```

所以第一个替代匹配。

您需要对交替进行分组：

```
/^(?:[0-9]+|[0-9]*\.[0-9]+)$/ 
```

这`?:`是一个优化和一个好习惯。它抑制在给定情况下不需要的捕获。

但是，您也可以在没有交替的情况下逃脱：

```
/^[0-9]*\.?[0-9]+$/ 
```

甚至更短：

```
/^\d*\.?\d+$/ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T20:59:33.553

`'1A'.match(/^[0-9]+|[0-9]*\.[0-9]+$/)`找到匹配项，因为它是以下各项的并集：

`^[0-9]+`

和

`[0-9]*\.[0-9]+$`

第一个匹配的地方。

为避免这种情况，请将它们分组：`^([0-9]+|[0-9]*\.[0-9]+)$`

试试这个：

`'1A'.match(/^([0-9]+|[0-9]*\.[0-9]+)$/) === null`

* * *

## 或者：

```
function matchExacly(str, regex) {
    var tmp = str.match(regex);
    return tmp ? tmp[0] === str : false;
}

matchExacly('1A', /[0-9]+|[0-9]*\.[0-9]+/) === false

matchExacly('1', /[0-9]+|[0-9]*\.[0-9]+/) === true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T21:12:24.337

也许我在错误的地方，但是如果您仅使用正则表达式来验证数值，为什么不使用更快的替代方法，如下所示：

```
var isNumber = ( +n === parseFloat(n) ); 
```

# mysql - 需要帮助优化 mysql 查询以使其按索引快速排序

> ID：16113361
> 
> 赞同：0
> 
> 时间：2013-04-19T20:56:16.897
> 
> 标签：mysql, sql-order-by, query-optimization

有人帮我想出了这个查询，但它仍然太慢；订单正在减慢它的速度，我不认为它使用我的索引我希望有人可以为我修复它：D 是的，我阅读了[手册](http://dev.mysql.com/doc/refman/5.6/en/order-by-optimization.html)页，但我无法理解。

**询问：**

```
 EXPLAIN SELECT u.id, u.url, u.title, u.numsaves
 FROM urls u
 JOIN tags t ON t.url_id = u.id
 AND t.tag = 'osx'
 ORDER BY u.numsaves DESC
 LIMIT 20 

 Showing rows 20 - 19 ( 20 total, Query took 1.5395 sec) [numsaves: 6130 - 2107]

 id     select_type     table   type    possible_keys   key     key_len     ref     rows    Extra
 1  SIMPLE  t   ref     tag_id  tag_id  767     const   49432   Using where; Using index; Using temporary; Using filesort
 1  SIMPLE  u   eq_ref  PRIMARY,id_numsaves_IX  PRIMARY     4   jcooper_whatrethebest_urls.t.url_id     1 
```

**数据库：**

```
 CREATE TABLE `urls` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `url` text NOT NULL,
 `domain` text,
 `title` text NOT NULL,
 `description` text,
 `numsaves` int(11) NOT NULL,
 `firstsaved` varchar(256) DEFAULT NULL,
 `md5` varchar(255) NOT NULL DEFAULT '',
 PRIMARY KEY (`id`),
 UNIQUE KEY `md5` (`md5`),
 KEY `id_numsaves_IX` (`id`,`numsaves`)
 ) ENGINE=InnoDB AUTO_INCREMENT=2958560 DEFAULT CHARSET=utf8

 CREATE TABLE `tags` (
 `url_id` int(11) DEFAULT NULL,
 `hash` varchar(255) NOT NULL,
 `tag` varchar(255) NOT NULL,
 UNIQUE KEY `tag_id` (`tag`,`url_id`)
 ) ENGINE=InnoDB DEFAULT CHARSET=utf8 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:29:10.600

我认为您查询的主要问题是您选择的索引。

1)`tags`有一个化合物`UNIQUE KEY`on `tag`and`url_id`但没有`PRIMARY KEY`。

如果不出意外，您应该将其设为主要 - 这可能对性能有所帮助。`VARCHAR(255)`此外，如果您的标签确实需要，您可能需要仔细查看。它使索引相当大。

2）添加一个单独的索引，`numsaves`因为您是按此排序的。复合索引在这里`id`并`numsaves`没有帮助。

3)`EXPLAIN`表示您在`tags`该匹配中有 49432 行`"osx"`。这是相当多余的。您可能希望将标签表分成两份，一份包含文本，另一份包含 N:M 链接到`urls`.

# c# - Windows 窗体线程正在失去它们的文化

> ID：16113366
> 
> 赞同：3
> 
> 时间：2013-04-19T20:56:29.617
> 
> 标签：c#, multithreading, winforms

我们有一个 .net 3.5 多线程 Windows 窗体应用程序。正在启动 4-5 个后台工作人员/异步调用来检索数据。大约 10 次中的 1 次，其中一个线程会引发以下错误。有时错误是空异常，而是相同的调用堆栈。我们已将问题追溯到以某种方式丢失其 CultureInfo 的线程。还有其他人遇到过这个吗？

```
System.Threading.SynchronizationLockException: Object synchronization method was called from an unsynchronized block of code.
   at System.Globalization.CultureTableRecord.GetCultureTableRecord(String name, Boolean useUserOverride)
   at System.Globalization.CultureTableRecord.GetCultureTableRecord(Int32 cultureId, Boolean useUserOverride)
   at System.Globalization.CultureInfo..ctor(Int32 culture, Boolean useUserOverride)
   at System.Globalization.CultureInfo.GetCultureByLCIDOrName(Int32 preferLCID, String fallbackToString)
   at System.Globalization.CultureInfo.InitUserDefaultUICulture()
   at System.Globalization.CultureInfo.get_UserDefaultUICulture()
   at System.Threading.Thread.get_CurrentUICulture()
   at System.Resources.ResourceManager.GetString(String name, CultureInfo culture)
   at System.Environment.ResourceHelper.GetResourceStringCode(Object userDataIn)
   at System.Environment.GetResourceFromDefault(String key)
   at System.Diagnostics.StackTrace.ToString(TraceFormat traceFormat)
   at System.Environment.GetStackTrace(Exception e, Boolean needFileInfo)
   at System.IO.StreamWriter.Init(Stream stream, Encoding encoding, Int32 bufferSize)
   at System.IO.StreamWriter..ctor(Stream stream, Encoding encoding, Int32 bufferSize)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.GetWriterForMessage(SoapClientMessage message, Int32 bufferSize)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Serialize(SoapClientMessage message)
   at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:01:15.717

[`CultureInfo.DefaultThreadCurrentCulture`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.defaultthreadcurrentculture%28v=VS.110%29.aspx)尝试使用和/或为整个域使用默认文化[`CultureInfo.DefaultThreadCurrentUICulture`](http://msdn.microsoft.com/en-us/library/system.globalization.cultureinfo.defaultthreadcurrentuiculture%28v=VS.110%29.aspx)，看看是否有帮助。总而言之，您将能够确保它是否与线程的文化有关

**UPD ：在****值类型**`lock`上使用同步方法（如，`Monitor`等）时可能会引发特定异常，对同步方法的调用**将框值，每次都创建一个新值**。我怀疑它可能是框架中的此类严重错误。

 ****你能检查你的同步代码吗？

**UPD2**：好的，让我们尝试***调试***。

*   [首先，在抛出的每个异常上](http://msdn.microsoft.com/en-us/library/d14azbfh%28v=vs.100%29.aspx)打开break

*   接下来，启用[.NET Framework 调试](http://blogs.msdn.com/b/sburke/archive/2008/01/16/configuring-visual-studio-to-debug-net-framework-source-code.aspx)，这将帮助您 **定位错误**

之后，很有可能为您的问题找到解决方法/解决方案

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:27:30.813

从调用堆栈来看，这似乎是一个框架错误（某种）。StreamWriter 构造函数似乎正在通过一系列复杂的调用执行非线程安全操作（访问 GetCultureTableRecord）。我的建议是序列化您对 StreamWriter 构造函数的调用：

```
// Put this somewhere convenient
public static Object swConstructorLock = new Object(); 
```

然后，当您创建 StreamWriters 时：

```
// Lock this constructor because it does something that isnt thread-safe as per http://stackoverflow.com/questions/16113366/windows-forms-threads-are-losing-their-culture
StreamWriter myStreamWriter;
lock (swConstructorLock) {
    myStreamWriter = new StreamWriter(theStreamToWrite);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-21T18:25:25.437

我发现每个 Web 请求都会调用 CultureInfo.ClearCachedData ：/ 删除它可以解决问题。似乎 Culture 仍然需要某种锁，因为线程 A 调用 ClearCachedData 并且线程 B 请求数据并且它抛出了一个空异常。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-30T02:21:35.863

我在 .NET 3.5 应用程序中也遇到了这个异常（一次，出乎意料）：

```
System.Threading.SynchronizationLockException: Object synchronization method was called from an unsynchronized block of code.
   at System.Globalization.CultureTableRecord.GetCultureTableRecord(String name, Boolean useUserOverride)
   at System.Globalization.CultureTableRecord.GetCultureTableRecord(Int32 cultureId, Boolean useUserOverride)
   at System.Globalization.CultureInfo..ctor(Int32 culture, Boolean useUserOverride)
   at System.Globalization.CultureInfo.GetCultureByLCIDOrName(Int32 preferLCID, String fallbackToString)
   at System.Globalization.CultureInfo.InitUserDefaultCulture()
   at System.Globalization.CultureInfo.get_UserDefaultCulture()
   at System.Threading.Thread.get_CurrentCulture()
   at System.Globalization.DateTimeFormatInfo.get_CurrentInfo()
   at System.DateTime.ToString(String format) 
```

这发生在锁定部分，但锁定不是值类型。****

# javascript - 是否可以在没有警报的情况下关闭窗口？

> ID：16113369
> 
> 赞同：-3
> 
> 时间：2013-04-19T20:56:41.037
> 
> 标签：javascript, jquery

当我们在新窗口中打开一个表单时，我们想单击一个按钮来关闭没有警告框的窗口。

可能吗？

任何帮助表示赞赏。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:26:15.187

如果您在谈论`window.open()`功能，那么请尝试使用`window.close()`

# excel - 在最后一张工作表之后将值复制到新工作表，如果为空则删除列 b

> ID：16113370
> 
> 赞同：1
> 
> 时间：2013-04-19T20:56:45.783
> 
> 标签：excel, vba

我只想复制运行宏的任何工作簿的最后一张工作表的值（不是公式）（我不知道工作表的名称或工作表的数量），如果 B 列为空，则删除它并命名新工作表“游戏”。这就是我所拥有的，但它不起作用=（。有人可以帮我吗？

```
Sub ArrumarTabela()
    ActiveSheet.Copy
    Cells.Copy

    Application.CutCopyMode = False
    ActiveSheet.Name = "Games"
    Range("A1").PasteSpecial Paste:=xlPasteValues
    Application.ScreenUpdating = False

    ActiveSheet.Name = "Games"

    Dim cl As Range
    For Each cl In Range("$B$2:$B" & Range("$B$65536").End(xlUp).Row)
        If cl = "" Then cl.EntireColumn.Delete
    Next cl

    Range("C1").Select
    Selection.EntireColumn.Insert , CopyOrigin:=xlFormatFromLeftOrAbove

    Application.ScreenUpdating = True
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-28T10:14:18.713

此修改会满足您的需要吗？

```
Sub ArrumarTabela()
    ActiveSheet.Copy 'this will create a new workbook and a new sheet with current

    With ActiveSheet
        .Name = "Games" 'change new sheets name

        .Cells.Copy 'copy all cells
        .Range("A1").PasteSpecial Paste:=xlPasteValues 'paste only values
        .ScreenUpdating = False

        lastrow = .Cells(.Rows.Count, "B").End(xlUp).Row 'last row?

        Set cl = .Range("B2:B" & lastrow).Find("", lookat:=xlWhole) 'find a blank cell in a range

        If Not cl Is Nothing Then cl.EntireColumn.Delete 'delete column if blank exists

        .Range("C1").EntireColumn.Insert 'insert new column belfore column C

        .ScreenUpdating = True
    End With
End Sub 
```

# postgresql - PgSQL 将一年中的某一天恢复为日期

> ID：16113372
> 
> 赞同：2
> 
> 时间：2013-04-19T20:56:49.227
> 
> 标签：postgresql, date

我正在尝试确定如何将一年中的某一天转回 PgSQL 中的日期。当我这样做时

```
select date '2013-01-01' + interval '53 days' 
```

我得到一个时间戳：

```
"2013-02-23 00:00:00" 
```

那么当我执行以下任何操作时怎么会

```
select extract(date from (date '2013-01-01' + interval '53 days'))

select extract(date from (select date '2013-01-01' + interval '53 days')) 
```

我收到“错误：无法识别时间戳单位“日期””？除了为什么，我怎么能做我想要的，即只获取原始操作结果的日期部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T21:30:18.830

利用

```
select (date '2013-01-01' + interval '53 days')::date 
```

或者

```
select cast(date '2013-01-01' + interval '53 days' as date) 
```

[PostgreSQL 的标准 SQL 函数“extract()”](http://www.postgresql.org/docs/9.2/static/functions-datetime.html#FUNCTIONS-DATETIME-EXTRACT) *将对*时间戳进行操作，但是 a)“date”不是 extract() 的有效参数，并且 b)它返回子字段，而不是子字段的集合。从概念上讲，日期由三个子字段的集合组成：年、月和日。

```
select extract(year from current_timestamp),
       extract(month from current_timestamp),
       extract(day from current_timestamp),
       -- Concatenate and cast to type "date".
       (extract(year from current_timestamp) || '-' || 
       extract(month from current_timestamp) || '-' ||
       extract(day from current_timestamp))::date 
```

# webos - enyo mixin：这是正确的用法吗？

> ID：16113377
> 
> 赞同：0
> 
> 时间：2013-04-19T20:57:01.697
> 
> 标签：webos, enyo

我有以下代码，如下所示：

```
var shared = {
    create: function(){
        //do stuff on create
    }
}

enyo.kind(enyo.mixin({
    name: "CustomInput",
    //properties unique to input.
    kind: enyo.Input
},shared));

enyo.kind(enyo.mixin({
    name: "CustomTextArea",
    //properties unique to input.
    kind: enyo.TextArea
},shared));

enyo.kind(enyo.mixin({
    name: "CustomSelect",
    //properties unique to input.
    kind: enyo.Select
},shared)); 
```

我的同行告诉我，这是一种不正确的做事方式，并且可能会破坏某些东西，或者太混乱，因为他们从未见过以这种方式使用 mixin。

我的问题是，以这种方式这样做有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T01:08:13.453

如果您使用 mixins 扩展种类，这里有一种更新的方法：

```
enyo.createMixin({
    name: 'MyMixin',
    mymethod: function() {
        // do stuff
    }
});

enyo.Control.extend({
     mixins: ['MyMixin']
}); 
```

这将在实例化之前将其混合。如果您希望在运行时添加属性，请使用 mixin() 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T16:04:26.067

如果有效，那就没有错！但是，我不确定 enyo.mixin 的深度，所以有时您可能无法获得您期望的一切。

# sql - T-SQL :Parent-Child Hierarchy - 基于@Variable

> ID：16113382
> 
> 赞同：1
> 
> 时间：2013-04-19T20:57:23.167
> 
> 标签：sql, sql-server, sql-server-2008, tsql, common-table-expression

```
DECLARE @Categories TABLE (
        CategoryID INT, 
        CategoryName VARCHAR(20),
        ParentID INT )

        INSERT INTO @Categories(CategoryID, CategoryName, ParentID)
            SELECT 1, 'Company', NULL UNION ALL
            SELECT 2, 'Dept A', 1 UNION ALL
            SELECT 3, 'Dept B', 1 UNION ALL
            SELECT 4, 'DA_Sub_1', 2 UNION ALL
            SELECT 5, 'DA_Sub_2', 2 UNION ALL
            SELECT 6, 'DA_Sub_3', 2 UNION ALL
            SELECT 7, 'DA_Sub_4', 2 UNION ALL
            SELECT 8, 'DA1_I', 4 UNION ALL
            SELECT 9, 'DA1_II', 4
        DECLARE @ID int = 4
        DECLARE @Matched int = (SELECT CASE WHEN ParentID = 0 THEN CategoryID ELSE ParentID END FROM @Categories WHERE CategoryID = @ID)

        ;WITH cte AS (
            SELECT CategoryID, CategoryName, ParentID
            FROM @Categories WHERE ParentID IS NULL
            UNION ALL
            SELECT c.CategoryID, c.CategoryName, c.ParentID
            FROM @Categories c
            INNER JOIN cte p ON p.CategoryID = c.ParentID

    ) 
```

输出

```
CID CName           PID
1   Company         NULL
2   Dept A          1
3   Dept B          1
4   DA_Sub_1        2
5   DA_Sub_2        2
6   DA_Sub_3        2
7   DA_Sub_4        2
8   DA1_I           4
9   DA1_II          4 
```

我想这样做，我可以传递一个变量，它会

```
1) list Self + Parents
2) list Self + Siblings
3) list Self + Children
4) list Parents
5) list Siblings
6) list children
7) list Parents + Self + Siblings.
8) list self + siblings + children
9) list Parents + Self + Siblings + Children (if any). 
```

我怎样才能实现这些目标？（这是我自己的知识，因为我正在尝试学习层次结构在 t-sql 中的工作方式）。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T00:42:05.343

为了得到孩子：

```
SELECT * FROM @Categories WHERE ParentId = @Id 
```

要获取条目本身：

```
SELECT * FROM @Categories WHERE CategoryId = @Id 
```

要获取父级：

```
SELECT parent.*
  FROM @Categories parent
  JOIN @Categories self
    ON self.ParentId = parent.CategoryId
 WHERE self.CategoryId = @Id 
```

要获得兄弟姐妹：

```
SELECT siblings.*
  FROM @Categories parent
  JOIN @Categories self
    ON self.ParentId = parent.CategoryId
  JOIN @Categories siblings
    ON siblings.ParentId = parent.CategoryId
 WHERE self.CategoryId = @Id 
```

获得组合结果的最简单方法是`UNION ALL`像这样使用：

```
SELECT * FROM @Categories WHERE ParentId = @Id

UNION ALL

SELECT * FROM @Categories WHERE CategoryId = @Id

UNION ALL

SELECT parent.*
  FROM @Categories parent
  JOIN @Categories self
    ON self.ParentId = parent.CategoryId
 WHERE self.CategoryId = @Id

UNION ALL

SELECT siblings.*
  FROM @Categories parent
  JOIN @Categories self
    ON self.ParentId = parent.CategoryId
  JOIN @Categories siblings
    ON siblings.ParentId = parent.CategoryId
 WHERE self.CategoryId = @Id 
```

您还可以添加一个 HIERARCHYID 列： http: [//msdn.microsoft.com/en-us/library/bb677290.aspx](http://msdn.microsoft.com/en-us/library/bb677290.aspx) 这将使查询的资源密集度降低一些，但需要在表中添加一个列。

# jquery - 书签模式窗口，如果页面打开，下次它会打开

> ID：16113385
> 
> 赞同：0
> 
> 时间：2013-04-19T20:57:29.930
> 
> 标签：jquery, html, twitter-bootstrap, modal-dialog

使用引导程序。

我在页面上有很多链接。单击这些链接中的任何一个，都会弹出一个模式窗口。

问题：

我希望能够为模态窗口添加书签，因此下次我使用书签时会出现特定的模态窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:33:54.320

也许您可以在您的网址中使用主题标签，例如 www.website.com/foo#modal1 并制作一个脚本，根据该主题标签显示模式。

**Javascript：**

```
$(document).on("ready", function(){

    if(window.location.hash == '#modal1')
    {
        $("#modal1").modal('show');
    }
    $(".open-modal").click(function(){
        $("#modal1").modal('show');
        window.location.hash = 'modal1';
    });

    $(".close-modal").click(function(){
        $("#modal1").modal('hide');
        window.location.hash = '';
    });

}); 
```

**html:**

```
<div id="modal1" class="modal hide fade">
Modal
<button class="close-modal">Close modal</button>
</div>

<button class="open-modal">Open modal</button> 
```

# c# - 一种星搜索算法

> ID：16113386
> 
> 赞同：3
> 
> 时间：2013-04-19T20:57:45.830
> 
> 标签：c#, algorithm, search, puzzle, a-star

在这里，我有一个关于 A 星搜索算法的查询。我正在构建所谓的 8 块拼图。这是一个有 9 个位置的游戏（1 个是空的），您必须以正确的顺序排列瓷砖以满足目标位置。

我只需要验证我是否正确编写了算法，这样我就可以在我的代码中寻找问题的其他地方。

我个人认为该算法是正确的，因为它能够解决我创建的第一个预设难题，该难题只需要一次移动即可到达目标位置。但是，它无法解决需要更多动作的谜题。

我试图让它以 3 种不同的方式工作，并且都带来了同样的问题。

**尝试1：**

```
while (openList.Count() > 0)
        {
            PuzzleNode currentNode;
            var orderedOpenList = openList.OrderBy(PuzzleNode => PuzzleNode.getPathCost());

            currentNode = orderedOpenList.First();
            if (compare(currentNode.getPuzzle(), goalArray) == true)
            {
                //openList.RemoveAt(0); //POLL
                break;
                // otherwise push currentNode onto closedList & remove from openList
            }
            else
            {
                openList.Remove(currentNode);
                closedList.Add(currentNode);
            }

            //generate all the neighbor nodes
            generateSuccessors(currentNode, tempList);

            for (int i = 0; i < tempList.Count(); i++)
            {
                PuzzleNode tempNode = tempList[i];

                //skip the node if it's in the closed list
                if (closedList.Contains(tempNode))
                {
                    continue;
                }//end if

                //We need to ensure that the G we have seen here is the shortest one
                int gScore = currentNode.getG() + 1;

                if (!openList.Contains(tempNode) || gScore < tempNode.getG())
                {
                    tempNode.setParentNode(currentNode);
                    tempNode.setH(tempNode.calcH(currentHueristic, tempNode.getPuzzle(), goalArray));
                    tempNode.setG(gScore);
                    tempNode.updatePathCost();

                    if (!openList.Contains(tempNode))
                    {
                        openList.Add(tempNode);
                    }//end if

                }//end if
            }//end for

        }//end while 
```

**尝试2：**

```
while (openList.Count() > 0)
        {
            PuzzleNode currentNode = GetBestNodeFromOpenList(openList);

            openList.Remove(currentNode);
            closedList.Add(currentNode);

            generateSuccessors(currentNode, tempList);

            foreach (PuzzleNode successorNode in tempList)
            {
                if (compare(successorNode.getPuzzle(), goalArray) == true)
                {
                    //goto thebreak;
                    return successorNode;
                }
                successorNode.setG(currentNode.getG() + 1);
                successorNode.setH(successorNode.calcH(currentHueristic, successorNode.getPuzzle(), goalArray));
                successorNode.updatePathCost();

                if (OpenListHasBetterNode(successorNode, openList))
                    continue;

                openList.Add(successorNode);
            }
        }//end while

private static PuzzleNode GetBestNodeFromOpenList(IEnumerable<PuzzleNode> openList)
    {
        return openList.OrderBy(n => n.getPathCost()).First();
    }

private static bool OpenListHasBetterNode(PuzzleNode successor, IEnumerable<PuzzleNode> list)
    {
        return list.FirstOrDefault(n => n.getG().Equals(successor.getG())
                && n.getPathCost() < successor.getPathCost()) != null;
    } 
```

尝试 2 是我在互联网上找到的算法的更改：[解决 8 难题](http://www.remondo.net/solving-8-puzzle-problem-a-star-algorithm-csharp/)

但是我尽我所能遵循维基百科上的伪代码：

```
function A*(start,goal)
     closedset := the empty set    // The set of nodes already evaluated.
     openset := {start}    // The set of tentative nodes to be evaluated, initially containing the start node
     came_from := the empty map    // The map of navigated nodes.

     g_score[start] := 0    // Cost from start along best known path.
     // Estimated total cost from start to goal through y.
     f_score[start] := g_score[start] + heuristic_cost_estimate(start, goal)

     while openset is not empty
         current := the node in openset having the lowest f_score[] value
         if current = goal
             return reconstruct_path(came_from, goal)

         remove current from openset
         add current to closedset
         for each neighbor in neighbor_nodes(current)
             tentative_g_score := g_score[current] + dist_between(current,neighbor)
             if neighbor in closedset
                 if tentative_g_score >= g_score[neighbor]
                     continue

             if neighbor not in openset or tentative_g_score < g_score[neighbor] 
                 came_from[neighbor] := current
                 g_score[neighbor] := tentative_g_score
                 f_score[neighbor] := g_score[neighbor] + heuristic_cost_estimate(neighbor, goal)
                 if neighbor not in openset
                     add neighbor to openset 
```

我问你是否能找到一个问题，因为我很困惑为什么它只适用于其中一个谜题。这些难题的唯一区别是解决目标状态所需的移动量**。**

我已经调试了几个小时，但我看不到它，我也看不到我的代码中的其他地方可能有问题。所以我想我只是在问，这对你来说是否正确？

**有任何**问题一定要问，我会尽可能提供更多信息！先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T08:43:17.583

**注意：**我正在使用您可以在[此处](https://stackoverflow.com/a/1937713/2128327)找到的 CustomPriorityQueue 类（由**itowlson编写）**

所以在这里我基本上使用 PriorityQueue 它将通过它们的启发式值排列问题状态

这是一个简单的 C# 中的 A* 模板，它说明了 A* 搜索的工作原理：

```
void enqueueAll(CustomPriorityQueue<PuzzleNode> a, ArrayList<PuzzleNode> b)
{
    foreach(PuzzleNode c in b) a.enqueue(c, h(c));
}

// A* heuritic: h = f + g ; h <= h*
int h(PuzzleNode n);

// returns TRUE if n is a solution
bool isSolution(PuzzleNode n);

// expand n into list of neighbors
ArrayList<PuzzleNode> expand(PuzzleNode n);

PuzzleNode Astar(PuzzleNode startPoint)
{
    CustomPriorityQueue list = new CustomPriorityQueue<PuzzleNode>();
    PuzzleNode current = null;

    list.enqueue(startPoint, h(startPoint));

    while (list.size() > 0)
    {
        current = list.dequeue();

        if (isSolution(current))
        {
            return current;
        }

        enqueueAll(list, expand(current));
    }
} 
```

希望这可以帮助

# ios - UIButton 中的长名称缩短

> ID：16113388
> 
> 赞同：0
> 
> 时间：2013-04-19T20:58:01.757
> 
> 标签：ios, objective-c, nsstring, uibutton, uitextfield

我有`UIButton`一个标题比按钮本身的宽度长。在 a 中，`UITextField`我看到字符串的第一部分（这是我要显示的部分），然后是三个点，在`UIButton`我看到第一部分，然后朝向中心三个点，然后是第三部分。有没有办法在不实际切断字符串的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T21:33:48.560

如果按钮大小不能改变但 titleLabel 大小可以，您可以在界面生成器或代码中更改按钮的字体，或者允许标签调整其字体：

```
button.titleLabel.adjustsFontSizeToFitWidth = YES; 
```

如果按钮大小可以改变，您可以调整它而不是字体大小：

```
CGRect frame;
frame.origin = self.button.frame.origin;
frame.size = [self.button.titleLabel.text sizeWithFont:self.button.titleLabel.font];
self.button.frame = frame; 
```

或者，如果您希望在字符串末尾而不是中间换行，类似于 UITextField 的显示方式，只需`lineBreakMode`将`NSLineBreakByTruncatingTail`

# xml - 如何使用 XQuery 和 plist XML 文件查找值

> ID：16113391
> 
> 赞同：0
> 
> 时间：2013-04-19T20:58:09.263
> 
> 标签：xml, xsd, plist, xquery, basex

以下示例 Plist 文件用于我下面的问题。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
    <key>firstDictionary</key>
    <dict>
        <key>string</key>
        <string>someText</string>
        <key>anArray</key>
        <array>
            <string>first</string>
            <string>second</string>
        </array>
    </dict>
    <key>secondDictionary</key>
    <dict>
        <key>subDictionary</key>
        <dict>
            <key>aBoolValue</key>
            <false/>
        </dict>
    </dict>
</dict>
</plist> 
```

所以我的问题是，由于这是一个 Plist（使用 XCode），所有键都有元素名称`<key>`，值可以是 , 等...键值对总是并排的（直接兄弟）。 .

有没有办法使用 XQuery 为键生成值？比如说 retuenValueForKey(secondDictionary) 来产生以下内容？

```
<dict>
    <key>subDictionary</key>
    <dict>
        <key>aBoolValue</key>
        <false/>
    </dict>
</dict> 
```

到目前为止，我的主要参考资料是[来自 W3Schools 的这个链接](http://www.w3schools.com/xpath/xpath_functions.asp)，但我无法让它正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:09:23.053

您可以在纯 XPath 中执行此操作，但如果您想将其包装在一个也可以正常工作的函数中：

```
declare function local:returnValueForKey(
  $key as xs:string,
  $plist as element(plist)
) as element(dict)?
{
   $plist//key[. = $key]/following-sibling::*[1]/self::dict
};

local:returnValueForKey('secondDictionary', <plist>...</plist>)
=>
<dict>
  <key>subDictionary</key>
  <dict>
    <key>aBoolValue</key>
    <false/>
  </dict>
</dict> 
```

# java - 使用列表中的字段搜索包含列表的 JPA 实体

> ID：16113412
> 
> 赞同：1
> 
> 时间：2013-04-19T20:59:19.507
> 
> 标签：java, hibernate, jakarta-ee, jpa, jpql

假设我们有一个名为 的实体`Foo`。这个 Foo 实体包含一个`Bar`实体列表。Bar 实体有一个`name`.

我们保留了许多 Foo 记录。

现在，我向用户展示了一个用于搜索 Foo 记录的 JSP 页面。我给他们的一个输入字段是酒吧名称。什么是膨胀`List<Foo>`与用户请求的 Bar 名称相匹配的好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:02:30.650

我相信 JPQL 会毫无问题地为您处理这个问题。

```
select f from Foo f join f.bar b where b.name = :name 
```

# jquery - 使用 jquery 为 MVC (Html.TextBoxFor) 设置焦点

> ID：16113414
> 
> 赞同：1
> 
> 时间：2013-04-19T20:59:27.660
> 
> 标签：jquery, asp.net-mvc-3

我正在开发一个 MVC 项目，并试图将重点放在这个上：

```
<td><%=Html.TextBoxFor(de => Model.EmailAddress1)%></td> 
```

我的 jquery 在页面顶部附近的同一视图中：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("[id$=MainContent_EmailAddress1").focus();
        $("#EmailAddress1").focus();
    });
</script> 
```

我已经尝试了一些组合来将焦点设置到这个框，但我尝试过的都没有。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:10:22.970

您可以采取几个步骤来解决您的问题。首先，加载您的 html 并查看，正在呈现的 id 是否与您提供的匹配。其次，我宁愿建议您使用更严格的方式来捕获元素或控制输出。

您可以添加一个额外的功能类来获取元素

```
Html.TextBoxFor(x => x.EmailAddress1, new { @class = "fHandleClass" }); 
```

和脚本

```
<script type="text/javascript">
//<![CDATA[
  $(function(){
      $(".fHandleClass").focus();
  });
//]]>
</script> 
```

或者你可以直接控制id

```
Html.TextBoxFor(x => x.EmailAddress1, new { id = "MyExactId" }); 
```

和脚本

```
<script type="text/javascript">
//<![CDATA[
  $(function(){
      $("#MyExactId").focus();
  });
//]]>
</script> 
```

最后，我建议您切换到剃刀视图引擎。更好的是，Web表单视图引擎被设计为设计者可以理解的，它对手写不是很友好。Razor 专为手写而设计。

# mysql - MySQL - 来自定义的值

> ID：16113415
> 
> 赞同：2
> 
> 时间：2013-04-19T20:59:29.777
> 
> 标签：mysql, sql

我正在尝试向表中插入随机值。但我不想让新值完全随机（例如：随机数或字符），我想从前面定义的一组值中获取一个随机值。例如：定义值：xyz、abc、edf 随机值：abc

我编程语言很容易，但在 SQL 中我不知道如何存储这个定义的值以及如何获取随机值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:01:27.583

将您的随机值放入表格中。

然后，您可以通过执行以下操作一次插入一个：

```
insert into tables(val)
    select val
    from randomtable
    order by rand()
    limit 1 
```

从您的`order by rand() limit 1`列表中选择一个随机值。

# ios - 我的 CALayer 变换在动画后保持，但透视消失了

> ID：16113417
> 
> 赞同：6
> 
> 时间：2013-04-19T20:59:35.050
> 
> 标签：ios, xcode, calayer, catransform3d

我有以下代码在 Y 轴上将 CALayer 旋转 -45 度：

```
#define D2R(x) (x * (M_PI/180.0))

- (void) swipe:(UISwipeGestureRecognizer *)recognizer
{        
    CATransform3D transform = CATransform3DMakeRotation(D2R(-45), 0, 1.0, 0);
    transform.m34 = -1.0 / 850;

    CABasicAnimation *transformAnimation = [CABasicAnimation animationWithKeyPath: @"transform"];
    transformAnimation.fillMode = kCAFillModeForwards;
    transformAnimation.removedOnCompletion = NO;
    transformAnimation.toValue = [NSValue valueWithCATransform3D:transform];
    transformAnimation.duration = 0.5;

    [self.layer addAnimation:transformAnimation forKey:@"transform"];
} 
```

动画有效，但没有透视结束 - 如果我理解正确，请忽略我的 m34 设置。

半途：

![在此处输入图像描述](https://i.stack.imgur.com/K8oMH.png)

在最后：

![在此处输入图像描述](https://i.stack.imgur.com/2IEDj.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T00:17:04.987

动画仅在动画期间影响视图的外观。动画结束后它不会应用于视图。你需要自己做这件事。我猜想在添加动画后这样的事情会起作用：

```
self.layer.transform = transform; 
```

您可以立即执行此操作，因为动画将隐藏它直到动画完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T09:43:43.463

尝试这个 ：

```
- (void) swipe:(UISwipeGestureRecognizer *)recognizer
{        

    CATransform3D transform = CATransform3DIdentity;
    transform.m34 = -10 / 850.0;
    transform = CATransform3DRotate(transform, D2R(-45), 0, 1.0, 0);

    CABasicAnimation *transformAnimation = [CABasicAnimation animationWithKeyPath: @"transform"];
    transformAnimation.fillMode = kCAFillModeForwards;
    transformAnimation.removedOnCompletion = NO;
    transformAnimation.toValue = [NSValue valueWithCATransform3D:transform];
    transformAnimation.duration = 0.5;

    [self.layer addAnimation:transformAnimation forKey:@"transform"];
} 
```

最终效果是这样的：

![在此处输入图像描述](https://i.stack.imgur.com/6cFuq.jpg)

# html - 使用 HTML::TokeParser 时出现“unblessed reference”问题

> ID：16113424
> 
> 赞同：0
> 
> 时间：2013-04-19T20:59:52.873
> 
> 标签：html, perl

我一直在戳这个并且无法解决这个“unblessed reference”错误。这是我的简化代码：

```
#!/usr/local/bin/perl

use strict;
use warnings;
use HTML::TokeParser;

my $p = HTML::TokeParser->new( $ARGV[0] );
while (my $t = $p->get_tag('img')) {
    my $src = $t->get_attr('src');
    print "$src\n";
} 
```

这是我尝试时的错误消息：

```
Can't call method "get_attr" on unblessed reference at M:\list_images_in_html.pl line 9. 
```

我收集到不知何故，它没有将 $t 识别为带有 get_attr 方法的令牌对象，但我不明白为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T21:07:23.263

根据手册（[MetaCPAN 的 HTML::TokeParse](https://metacpan.org/module/HTML%3a%3aTokeParser)）， get_tag() 返回一个数组引用，而不是一个对象。

您不能在沼泽标准数组 ref 上调用 get_attr()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:52:27.407

`get_attr`是`HTML::TokeParser::Simple`（的包装器`HTML::TokeParser`）中的一种便捷方法，但不存在于`HTML::TokeParser`.

将代码中的两行替换为：

```
use HTML::TokeParser::Simple;
my $p = HTML::TokeParser::Simple->new( $ARGV[0] ); 
```

并且您的脚本将起作用。

# ios - iOS 应用程序在下载非常大的文件时耗尽内存

> ID：16113426
> 
> 赞同：2
> 
> 时间：2013-04-19T21:00:27.727
> 
> 标签：ios, objective-c, memory, memory-management, memory-leaks

我知道我的问题的变体已经在这里以一种或另一种形式被问过很多次 - 我已经广泛搜索这些帖子好几天了，我认为我的问题是独一无二的。请允许我描述一下：

我在 iPad 4 上有一个 iOS 应用程序，可以将一个大（260MB 到 650MB）文件下载到磁盘。下载期间的内存使用量与下载的数据量成正比。在大约 500MB 时，应用程序会收到内存不足警告，大约 650MB 时会因内存不足而被终止。

我反复使用 Instruments 来尝试追踪分配的来源——我已经多次运行分配、VM 分配、泄漏、内存监视器和活动监视器。随着内存的增加，我也拍了很多照片。Instruments 从未显示来自我的应用程序的大量分配！记忆保持平坦。泄漏也没有报告任何内容。

相反，我一直依赖于向内核询问内存使用情况的一组函数，我在此处的另一个线程上找到了这些函数：

```
 vm_size_t usedMemory(void) {
    struct task_basic_info info;
    mach_msg_type_number_t size = sizeof(info);
    kern_return_t kerr = task_info(mach_task_self(), TASK_BASIC_INFO, (task_info_t)&info, &size);
    return (kerr == KERN_SUCCESS) ? info.resident_size : 0; // size in bytes
}

vm_size_t freeMemory(void) {
    mach_port_t host_port = mach_host_self();
    mach_msg_type_number_t host_size = sizeof(vm_statistics_data_t) / sizeof(integer_t);
    vm_size_t pagesize;
    vm_statistics_data_t vm_stat;

    host_page_size(host_port, &pagesize);
    (void) host_statistics(host_port, HOST_VM_INFO, (host_info_t)&vm_stat, &host_size);
    return vm_stat.free_count * pagesize;
}

void logMemUsage(void) {
    // compute memory usage and log if different by >= 100k
    static long prevMemUsage = 0;
    long curMemUsage = usedMemory();
    long memUsageDiff = curMemUsage - prevMemUsage;

    // if (memUsageDiff > 100000 || memUsageDiff < -100000) {
    prevMemUsage = curMemUsage;
    //NSLog(@"Memory used %7.1f (%+5.0f), free %7.1f kb", curMemUsage/1000.0f, memUsageDiff///1000.0f, freeMemory()/1000.0f);
    printf("Memory used %7.1f (%+5.0f), free %7.1f kb\n", curMemUsage/1000.0f, memUsageDiff/1000.0f, freeMemory()/1000.0f);

    //}
} 
```

使用它让我终于看到下载循环中*有些东西*正在消耗内存。我正在使用 RequestQueue 以及以下方法进行下载：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    if (_filePath && _filePath.length)
    {
        if (_fileHandle == nil)
        {
            [[NSFileManager defaultManager] createFileAtPath:_filePath contents:nil attributes:nil];
            self.fileHandle = [NSFileHandle fileHandleForUpdatingAtPath:_filePath];
            _bytesWritten = _rangeStart;
        }

        [_fileHandle writeData:data];
        _bytesWritten += [data length];
        NSInteger totalBytes = MAX(0, _responseReceived.expectedContentLength) + _rangeStart;

        if (_downloadProgressHandler)
        {
            _downloadProgressHandler(_userData, _userData2, (float)_bytesWritten / (float)totalBytes, _bytesWritten, totalBytes);
        }
    }
} 
```

即使我注释掉`[_fileHandle writeData:data]`调用，我仍然观察到内存增加！我仔细检查了我正在关闭文件句柄并在完成后将其设置为 nil，但在下载期间内存增长正在发生。

注意：本项目使用 ARC。

在这一点上，我没有东西可以尝试。根本不将数据写入文件仍然会导致内存增长。禁用`UIStatusBar`显示下载进度的没有帮助。我在 Instruments 中看不到任何东西。我打算尝试使用`NSOutputStream`写入文件，但我怀疑这是否会有所帮助，因为根本不写入数据仍然会导致内存增长。

当收到低内存警告时，我尝试使用`NSURLCache`并清除缓存。我尝试将 nil 分配给`didReceiveData`方法中的数据，但这并没有改变任何东西。我还尝试将尽可能多的强指针更改为弱指针，但这只会导致在释放实例上调用选择器。

在这一点上，任何建议都非常受欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T21:11:35.177

您在 Instruments 中没有看到它的事实表明您的 Release 和 Debug 配置之间存在显着差异。您是否在 Instruments 下收到内存警告？

编辑您的方案，选择“配置文件”选项并选择构建配置“调试”。看看这是否与您使用“运行”时看到的相符。如果是这样，那么您可以从那里使用 Instruments 来追踪它。

这是一个长镜头，但要验证的一件事是您没有意外打开 NSZombies。如果你这样做了，你会看到这种行为。转到您的方案并检查“运行”选项。查看“诊断”窗格并确保未选择任何内容。

# java - 更新手风琴中的标签标题

> ID：16113428
> 
> 赞同：0
> 
> 时间：2013-04-19T21:00:41.213
> 
> 标签：java, jsf-2, primefaces, glassfish-3

我有一个像这样的 PrimeFaces 3.5 手风琴面板：

```
<p:accordionPanel cache="false">
    <p:ajax event="tabChange" listener="#{pPRBean.onChangeTab}" />
    <p:tab title="Item">
        <h:outputText value="#{pPRBean.counter}"/>
    </p:tab>
    <p:tab title="Item">
        <h:outputText value="#{pPRBean.counter}"/>
    </p:tab>
    <p:tab title="Item">
        <h:outputText value="#{pPRBean.counter}"/>
    </p:tab>
    <p:tab title="Item">
        <h:outputText value="#{pPRBean.counter}"/>
    </p:tab>
</p:accordionPanel> 
```

还有一个像这样的backing bean：

```
package com.gecolsa.test.view;

import javax.ejb.Stateless;
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import org.primefaces.component.tabview.Tab;
import org.primefaces.event.TabChangeEvent;

@Stateless
@ManagedBean
@RequestScoped
public class PPRBean {

    private int counter = 0;
    private String firstName;

    public String getFirstName(){
        return firstName;
    }

    public void setFirstName(String firstName){
        this.firstName = firstName;
    }

    public int getCounter() {
        return counter;
    }

    public void setCounter(int counter) {
        this.counter = counter;
    }

    public void onChangeTab(TabChangeEvent event){
        Tab activeTab = event.getTab();
        if(!activeTab.getTitle().endsWith("[Pressed]")){
            activeTab.setTitle(activeTab.getTitle() + " [Pressed]");            
        }
        System.out.println(activeTab.getTitle());
        counter = counter + 1;
    }
} 
```

我的问题是：如何使用计数器的新值更改标题？尽管选项卡返回一个新值，但它只显示“项目”......（我想在运行时更新选项卡的标题，无论用户点击它，它都带有附加信息，如小时和点击的用户）。我正在使用 glassfish 3.1.2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T00:47:11.517

您可以通过从侦听器更新手风琴面板来更新选项卡，如下所示：

```
public void onChangeTab(TabChangeEvent event){
    Tab activeTab = event.getTab();
    if(!activeTab.getTitle().endsWith("[Pressed]")){
        activeTab.setTitle(activeTab.getTitle() + " [Pressed]");            
    }
    System.out.println(activeTab.getTitle());
    counter = counter + 1;
    RequestContext.getCurrentInstance().update("panel");
} 
```

其中面板是 id`<p:accordionPanel id="panel">`

由于选项卡没有渲染器，您必须更新整个面板而不仅仅是选项卡。

# c# - MEF 未发现从 byte[] 加载的程序集中的导出

> ID：16113429
> 
> 赞同：3
> 
> 时间：2013-04-19T21:00:43.457
> 
> 标签：c#, mef

我正在尝试使用 MEF 来帮助接受从数据库加载的插件的应用程序。当我尝试创建一个新的`AssemblyCatalog`并传入我动态创建的程序集时，MEF 似乎无法发现任何`Exports`.

```
Assembly a = Assembly.Load(new AssemblyMover().GetAssemblyBytes("Plugin1"));
AssemblyCatalog c = new AssemblyCatalog(a); 
```

`AssemblyCatalog`不包含任何部分（但它应该）。

如果我将可导出类移动到当前程序集中，则运行以下命令：

```
AssemblyCatalog c = new AssemblyCatalog(Assembly.GetExecutingAssembly()); 
```

MEF 发现这部分很好（我会假设）。

该接口在共享程序集中定义：

```
public interface IPlugin
{
    string Name { get; }
} 
```

该程序集`Plugin1`有一个类：

```
[Export(typeof(IPlugin))]
public class TestPlugin1 : IPlugin
{
    public string Name
    {
        get { return "Plugin1"; }
    }
} 
```

我认为 MEF 使用反射来发现零件，因此我验证了程序集已正确加载并包含一个 class `TestPlugin1`。

```
foreach (Type t in a.GetTypes())
        {
            MessageBox.Show(t.Name);
        } 
```

有什么想法吗？

# javascript - 如何阻止用户使用 javascript 链接

> ID：16113431
> 
> 赞同：1
> 
> 时间：2013-04-19T21:00:57.467
> 
> 标签：javascript, apache, code-injection

我有一个网站，当按下按钮时，它会对服务器端脚本进行 AJAX 调用。唯一的问题是用户可以在他们的地址栏中输入以下内容：
`javascript:callAjaxRoutine();` 如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:31:31.097

评论中的人说得对，你永远无法 100% 让某人脱离你的代码，但你可以做一些事情来避免那些不太严重的人：

1.  将您的函数封装在一个对象中，使其不在全局命名空间中，
2.  混淆你的代码

### 没有 1

就是这样做的一个例子：（这里我打算用jQuery，但这不是必须的，只是缩短了代码）

代替：

```
<script>
    var callAjaxRoutine = function () {
        // Do ajax
        ajax();
    }

    $('#button').on('click', callAjaxRoutine);

</script> 
```

您将函数从全局命名空间中取出并将其放入对象中：

```
<script>

    // This sets up an object containing a self-executing function
    (function () {

        var callAjaxRoutine = function () {
            // Do ajax
            ajax();
        }

        $('#button').on('click', function () {
            callAjaxRoutine.apply(this);
        });

    }());

</script> 
```

第二批代码将与第一批代码相同，在触发事件时仍会调用代码，但`callAjaxRoutine`在控制台中键入会显示`undefined`，因为该函数的关闭只存在声明和分配`callAjaxRoutine`为事件处理程序`#button.click()`

`javascript:callAjaxRoutine();`不会做任何事情，因为没有可访问的`callAjaxRoutine`定义了。

### 2号

将您的代码通过像[http://jscompress.com](http://jscompress.com)这样的缩小/混淆器- 上面的第二段代码变为：

```
(function(){var e=function(){ajax()};$("#button").on("click",function(){e.apply(this)})})(); 
```

函数越大，越难阅读和理解。如果你有像萤火虫这样的工具，你可以把它拆开，但这样做真的很痛苦，所以你会劝阻大多数人。

# c++ - 调试多线程应用程序时的步骤行

> ID：16113432
> 
> 赞同：1
> 
> 时间：2013-04-19T21:01:04.113
> 
> 标签：c++, multithreading, debugging

基于[在 Visual Studio 中调试多线程程序时的“Step over”问题](https://stackoverflow.com/questions/336628/step-over-when-debugging-multithreaded-programs-in-visual-studio)问题，考虑以下场景：

运行一些代码的线程 A 启动线程 B 并继续运行，直到线程 A 需要线程 B 的结果。为了理智起见，让我们假设以下方案：

```
Thread A
    line 1 // <---- Starts Thread B
    line 2
    line 3 // <---- Breakpoint
    line 4
    line 5 // <---- Wait for Thread B

Thread B
    line 1
    line 2 // <------ When the code breaks, stoped here
    line 3
    line 4 
```

单击“跳过”按钮会发生什么？

我能想到三件事：

1.  A 转到第 4 行。B 停留在第 2 行，直到按下“继续”按钮。
2.  A 去 4 号线 B 去 3 号线
3.  A 去 4 号线。虽然 A 不会停在 4 号线，但 B 会无限期地继续前进。一旦A再次停止，B就停止。这意味着 B 可以在第 4 行，也可以在 A 从第 3 行到第 4 行时退出。

如果让我猜，我会选择选项 3。

在该行之后，有一种方法可以像我的选项 2 一样逐行调试线程？我问的*是是否有任何 C++ 调试器能够停止所有线程并逐行逐行逐个执行*？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T13:18:36.760

Windbg 的 step 命令`p`允许您指定在所有其他线程保持冻结时继续执行哪些线程。请参阅[http://msdn.microsoft.com/en-us/library/windows/hardware/ff553496(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/ff553496%28v=vs.85%29.aspx)

具体看`[~ Thread]`命令开头的可选项。

# java - 纹理映射是相反的！Java3D

> ID：16113435
> 
> 赞同：1
> 
> 时间：2013-04-19T21:01:15.777
> 
> 标签：java, 3d, java-3d, texture-mapping

我可以使用一些额外的眼睛来帮助我了解为什么我的纹理贴图在我的对象上是反转的。它向后打印——就像在镜子里看到它一样。我曾怀疑也许反转索引会有所帮助，但这只是改变了它的映射位置而没有反转反转。

```
 public class MobiusBanner extends Applet {

        public static void main(String[] args) {
            new MainFrame(new MobiusBanner(), 800, 600);
        }

        @Override
        public void init() {
            GraphicsConfiguration gc = SimpleUniverse.getPreferredConfiguration();
            Canvas3D canvas = new Canvas3D(gc);
            this.setLayout(new BorderLayout());
            this.add(canvas, BorderLayout.CENTER);
            SimpleUniverse su = new SimpleUniverse(canvas);
            su.getViewingPlatform().setNominalViewingTransform();
            BranchGroup bg = createSceneGraph();
            bg.compile();
            su.addBranchGraph(bg);
        }

        private BranchGroup createSceneGraph() {
            BranchGroup root = new BranchGroup();
            Shape3D shape = new Shape3D();
            shape.setGeometry(mobius().getIndexedGeometryArray());

            //Scaling transform
            Transform3D tr = new Transform3D();
            tr.setScale(0.5);

            //Spin transform group
            TransformGroup spin = new TransformGroup();
            spin.setCapability(TransformGroup.ALLOW_TRANSFORM_WRITE);
            spin.setCapability(TransformGroup.ALLOW_TRANSFORM_READ);
            root.addChild(spin);

            //Set appearance
            Appearance ap = createTextureAppearance();
            ap.setPolygonAttributes(new PolygonAttributes(PolygonAttributes.POLYGON_FILL,
            PolygonAttributes.CULL_BACK, 0));

            //Set materials
            Material mat = new Material();
            mat.setLightingEnable(true);
            mat.setShininess(30);
            ap.setMaterial(mat);

            //Overarching Transform group
            TransformGroup tg = new TransformGroup(tr);
            tg.addChild(shape);
            spin.addChild(tg);
            shape.setAppearance(ap);

            //Set rotation
            MouseRotate rotator = new MouseRotate(spin);
            BoundingSphere bounds = new BoundingSphere();
            rotator.setSchedulingBounds(bounds);
            spin.addChild(rotator);

            //Set translation
            MouseTranslate translator = new MouseTranslate(spin);
            translator.setSchedulingBounds(bounds);
            spin.addChild(translator);

            //Set zoom
            MouseZoom zoom = new MouseZoom(spin);
            zoom.setSchedulingBounds(bounds);
            spin.addChild(zoom);

            //Set background
            Background background = new Background(1.0f, 1.0f, 1.0f);
            background.setApplicationBounds(bounds);
            root.addChild(background);

            f//Set lighting
            AmbientLight light = new AmbientLight(true, new Color3f(Color.BLACK));
            light.setInfluencingBounds(bounds);
            root.addChild(light);

            PointLight ptlight = new PointLight(new Color3f(Color.white),
                    new Point3f(0.5f, 0.5f, 1f),
                    new Point3f(1f, 0.2f, 0f));
            ptlight.setInfluencingBounds(bounds);
            root.addChild(ptlight);

            return root;
        }//Close branchgroup method

        //Create the Mobius shape
        private GeometryInfo mobius() {
            int m = 100; //number of row points
            int n = 100; //number of col points
            int p = 4 * ((m - 1) * (n - 1)); //faces * points per face

            IndexedQuadArray iqa = new IndexedQuadArray(m * n,         
    GeometryArray.COORDINATES | GeometryArray.TEXTURE_COORDINATE_2, p);
            Point3d[] vertices = new Point3d[m * n];

    int index = 0;

            //Create vertices
            for (int i = 0; i < m; i++) {
                for (int j = 0; j < n; j++) {
                    double u = i * (4 * (Math.PI)) / (m - 1);
                    double v = -0.3 + (j * (0.6 / (n - 1)));
                    double x = (1 + v * Math.cos(u / 2)) * Math.cos(u);
                    double y = (1 + v * Math.cos(u / 2)) * Math.sin(u);
                    double z = v * Math.sin(u / 2);
                    vertices[index] = new Point3d(x, y, z);
                    index++;
                }//close nested for loop
            }//close for loop

            index = 0;
            //set texture coordinates
            TexCoord2f[] tex = new TexCoord2f[m * n];
            for (int i = 0; i < m; i++) {
                for (int j = 0; j < n; j++) {
                    tex[index] = new TexCoord2f();
                    tex[index] = new TexCoord2f(i * 1f / m, j * 1f / n);
                    index++;
                }
            }

            iqa.setCoordinates(0, vertices);
            iqa.setTextureCoordinates(0, 0, tex);
            index = 0;

            //set index for coordinates
            int[] texIndices = new int[p];
            for (int i = 0; i < m - 1; i++) {
                for (int j = 0; j < n - 1; j++) {
                    iqa.setCoordinateIndex(index, i * m + j);
                    texIndices[index] = i * m + j;
                    index++;
                    iqa.setCoordinateIndex(index, i * m + j + 1);
                    texIndices[index] = i * m + j + 1;
                    index++;
                    iqa.setCoordinateIndex(index, (i + 1) * m + j + 1);
                    texIndices[index] = (i + 1) * m + j + 1;
                    index++;
                    iqa.setCoordinateIndex(index, (i + 1) * m + j);
                    texIndices[index] = (i + 1) * m + j;
                    index++;
                }//close nested for loop
            }//close for loop

            iqa.setTextureCoordinateIndices(0, 0, texIndices);

            //create geometry info and generate normals for shape
            GeometryInfo gi = new GeometryInfo(iqa);
            NormalGenerator ng = new NormalGenerator();
            ng.generateNormals(gi);
            return gi;
        }

        Appearance createTextureAppearance() {
            Appearance ap = new Appearance();
            BufferedImage bi = new BufferedImage(1024, 128, 
            BufferedImage.TYPE_INT_ARGB);
            Graphics2D g2 = (Graphics2D) bi.getGraphics();
            g2.setColor(Color.white);
            g2.fillRect(0, 0, 1024, 128);
            g2.setFont(new Font("Serif", Font.BOLD, 36));
            g2.setColor(new Color(200, 0, 0));
            g2.drawString("Mobius Strip", 0, 100);
            ImageComponent2D image = new ImageComponent2D(ImageComponent2D.FORMAT_RGBA, bi);
            Texture2D texture = new Texture2D(Texture.BASE_LEVEL, Texture.RGBA,         
            image.getWidth(), image.getHeight());
            texture.setImage(0, image);
            texture.setMagFilter(Texture.BASE_LEVEL_LINEAR);
            ap.setTexture(texture);

            //Combine Texture and Lighting
            TextureAttributes textatt = new TextureAttributes();
            textatt.setTextureMode(TextureAttributes.COMBINE);
            ap.setTextureAttributes(textatt);
            ap.setMaterial(new Material());
            return ap;

                }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:14:16.597

您只想反转纹理坐标之一，而不是两者。尝试改变

```
tex[index] = new TexCoord2f(i * 1f / m, j * 1f / n); 
```

到

```
tex[index] = new TexCoord2f((m-1-i) * 1f / m, j * 1f / n); 
```

或者

```
tex[index] = new TexCoord2f(i * 1f / m, (n-1-j) * 1f / n); 
```

# elasticsearch - 阵列中具有多个位置的 ElasticSearch 地理距离过滤器 - 可能吗？

> ID：16113439
> 
> 赞同：24
> 
> 时间：2013-04-19T21:01:31.340
> 
> 标签：elasticsearch

假设我们在 ElasticSearch 索引中有一堆文档。每个文档*在数组中*有多个位置，如下所示：

```
{
  "name": "foobar",
  "locations": [
    {
      "lat": 40.708519,
      "lon": -74.003212
    },
    {
      "lat": 39.752609,
      "lon": -104.998100
    },
    {
      "lat": 51.506321,
      "lon": -0.127140
    }
  ]
} 
```

根据[ElasticSearch 参考指南](http://www.elasticsearch.org/guide/reference/query-dsl/geo-distance-filter/)

> `geo_distance`过滤器可以处理每个文档的多个位置/点。一旦单个位置/点与过滤器匹配，该文档将包含在过滤器中。

那么，是否可以创建一个地理距离过滤器来检查数组中的所有位置？

不幸的是，这似乎不起作用：

```
{
  "filter": {
    "geo_distance": {
      "distance": "100 km",
      "locations": "40, -105"
    }
  }
} 
```

throws " `QueryParsingException[[myIndex] failed to find geo_point field [locations]`" 因为`locations`不是一个单一`geo_point`的，而是一个 s 的数组`geo_point`。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-04-20T00:17:09.233

您是否为文档指定了[geo_point 映射？](http://www.elasticsearch.org/guide/reference/mapping/geo-point-type/)

```
curl -XDELETE 'http://localhost:9200/twitter/'
curl -XPUT 'http://localhost:9200/twitter/'

curl -XPUT 'http://localhost:9200/twitter/tweet/_mapping' -d '
{
    "tweet" : {
        "properties" : {
            "locations" : {"type" : "geo_point"}
        }
    }
}'

curl -XPUT 'http://localhost:9200/twitter/tweet/1' -d '
{ 
    "user": "kimchy", 
    "postDate": "2009-11-15T13:12:00", 
    "message": "Trying out Elastic Search, so far so good?",
    "locations" : [{
        "lat" : 50.00,
        "lon" : 10.00
    },
    {
        "lat" : 40.00,
        "lon" : 9.00
    }]
}'

curl -XPUT 'http://localhost:9200/twitter/tweet/2' -d '
{ 
    "user": "kimchy", 
    "postDate": "2009-11-15T13:12:00", 
    "message": "Trying out Elastic Search, so far so good?",
    "locations" : [{
        "lat" : 30.00,
        "lon" : 8.00
    },
    {
        "lat" : 20.00,
        "lon" : 7.00
    }]
}'

curl -XGET 'http://localhost:9200/twitter/tweet/_search' -d '{
    "query": {
        "filtered" : {
            "query" : {
                "match_all" : {}
            },
            "filter" : {
                "geo_distance" : {
                    "distance" : "20km",
                    "tweet.locations" : {
                        "lat" : 40.00,
                        "lon" : 9.00
                    }
                }
            }
        }
    }
}' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-02-17T07:47:44.113

对于 Elasticsearch 5.1 版，对于相同的上述索引，查询将如下所示，

```
curl -XGET 'http://localhost:9200/twitter/tweet/_search' -d '
{
    "query": {
        "bool": {
            "must": {
                "match_all": {}
            },
            "filter": {
                "geo_distance": {
                    "distance": "200km",
                    "locations": {
                        "lat": 40.00,
                        "lon": 9.00
                    }
                }
            }
        }
    }
}' 
```

# javascript - 使用 JavaScript 更改屏幕大小

> ID：16113442
> 
> 赞同：0
> 
> 时间：2013-04-19T21:01:36.100
> 
> 标签：javascript, css, media-queries, zurb-foundation

使用[zurb Foundation](http://foundation.zurb.com/)的移动优先体验，我开发了一个响应式设计。现在，当网站在移动设备或平板电脑中打开时，我的客户需要在页脚中有一个明确的链接“查看桌面版本”。

似乎有两种选择：

*   *删除基础*并创建新的 CSS 文件（也许从基础核心 CSS 中提取选定的规则用于网格）；一种用于台式机，一种用于移动设备。然后根据 cookie 值或 URL 查询加载 CSS 文件。（长法）

*   使用 JavaScript 修改屏幕尺寸（最大宽度、最小宽度 ..），因此媒体查询会获取错误信息并加载正确的结果？（想像力）

第二种可能吗？还有另一种（简单的）方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:15:22.257

是的，您可以修改元标记。我为一个项目做了一段时间，我在 github 上有一段脚本/插件：[https](https://github.com/Trolleymusic/minWidth) ://github.com/Trolleymusic/minWidth - 我刚刚更新了它，为你提供了一些演示。

**您必须包含 Modernizr 否则它将不起作用**

您只需像这样运行它：

```
minWidth(x); 
```

其中 x 是您想要的最小宽度。

在您的手机上查看两个演示文件之间的区别：

[http://waynedurack.com/minWidth/demos/with.html](http://waynedurack.com/minWidth/demos/with.html)

对比

[http://waynedurack.com/minWidth/demos/without.html](http://waynedurack.com/minWidth/demos/without.html)

# facebook - 尝试使用 fbgraph api 登录时出现 fb 安全警告

> ID：16113448
> 
> 赞同：2
> 
> 时间：2013-04-19T21:02:02.017
> 
> 标签：facebook, facebook-graph-api, fb-graph

在尝试使用图形 API 使用 fb 登录时，会出现一个显示消息的网页。

安全警告：请将上面的 URL 视为您的密码，不要与任何人共享。在 ios fb 图形 api 中。

此错误并非总是发生，而是一半时间发生。

如何跳过这条 fb 消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-08T11:30:26.940

更改网址：

self.redirectUri = @" [http://www.facebook.com/connect/login_success.html](http://www.facebook.com/connect/login_success.html) ";

FBGraph.m 到

self.redirectUri = @" [https://m.facebook.com/connect/login_success.html](https://m.facebook.com/connect/login_success.html) ";
并检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T09:46:06.600

我找到了一种解决方案。我希望它对你有用。

只需将此 UIWebViewDelegate 方法粘贴到您的 FbGraph.m 文件中......

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType{

    if([request.URL.relativeString hasPrefix:@"https://www.facebook.com/connect/login_success.html" ])
        self.webView.hidden=TRUE;
    return YES;
} 
```

# c# - 验证 - （表单）取消按钮不起作用

> ID：16113449
> 
> 赞同：2
> 
> 时间：2013-04-19T21:02:06.060
> 
> 标签：c#, validation

`CancelButton_Clicked`由于我的事件，我在将表单留在事件中时遇到问题`Validating`。

我有一个文本框，它有自己的验证方法，`e.Cancel = true`如果输入字符串为空或为空，则返回，否则返回`e.Cancel = false`。

现在，我有这个`CancelButton`只是一个常规按钮，我想为此关闭当前表单，有点像这样：

```
CancelButton_Clicked(Object sender, EventArgs e)
{
this.Close();
} 
```

但是，如果我这样做，并且如果文本框为空，则它不会通过验证，并且我无法关闭表单。验证图标一直闪烁。我尝试设置`CausesValidation`为`false`，我也尝试了这个：

```
private void btnCancel_Click(object sender, EventArgs e)
{
    // Stop the validation of any controls so the form can close.
    AutoValidate = AutoValidate.Disable;
    Close();
} 
```

但这些都没有帮助。希望你能。干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:23:50.987

我假设，您已经`btnCancel.CausesValidation=false;`通过代码或设计器进行了设置。

的设置`CausesValidation=false`，`button`将允许您调用`Click` `event``button`

现在你可以做很多事情。

1.  只需在ie中取消注册您的`textbox` `validating`事件`btn_Cancel`

    ```
    private void btnCancel_Click(object sender, EventArgs e)
    {
        textBox1.Validating -= new CancelEventHandler(textBox1_Validating);
        this.Close();
    } 
    ```

2.  只需使用布尔标志。在您的 btnCancel 事件中将其设置为 true 并在验证事件中使用它

    ```
    bool IsCancelBtnClicked=false;
    private void btnCancel_Click(object sender, EventArgs e)
    {
        IsCancelBtnClicked=true;
        this.Close();
    }
    private void textBox1_Validating(object sender, CancelEventArgs e)
    {
        e.Cancel=!IsCancelBtnClicked;
    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:10:52.150

添加一个私有布尔成员，在 CancelButtonClicked 中将其设置为 true，然后在验证中使用它

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T21:07:51.530

你错过了这条线吗`this.Close()`

# jsf - Composite component javax.faces.FacesException: Cannot find component "inputID" in view

> ID：16113451
> 
> 赞同：0
> 
> 时间：2013-04-19T21:02:22.133
> 
> 标签：jsf, jsf-2, primefaces, composite-component, mojarra

I have a composite component which works pretty well when used once in a page but doesn't work if I use it more than once. Let's say the component is called my:field:

```
 <composite:implementation>
            <h:form id="myForm" prependId="false">
                    <p:message for="inputID" display="text"/>
                    <p:inputText binding="#{myBean.valueBind}"  id="inputID" value="#{myBean.value}" required="true" />
                    <p:commandButton process="@form" update="@form" action="#myBean.action} value="Do something" ajax="true"/>
            </h:form>
    </composite:implementation> 
```

And I use it like this:

```
 <my:field id="field1"/> 
```

That works fine, but if I add this below it:

```
 <my:field id="field2"/> 
```

I get the following exception `javax.faces.FacesException: Cannot find component "inputID" in view.`

I don't understand what I am doing wrong? I've tried prepending the form id, the component id (field1) by using `cc.attr.id`. I just don't know what I need to do.

I am using mojarra 2.1.13, and primefaces 3.5\. Any help would be very appreciated.

Thank you.

EDIT: I added the `binding=....` attribute to my `p:inputText` as that is what is causing the issue but I had omitted it in my initial post.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T15:14:33.150

原来是`binding`属性。删除它可以使事情正常进行，我只需要一种使该字段无效的不同方法。

# java - 如何在 Neo4j 的广度优先搜索中计算每个深度的节点数

> ID：16113452
> 
> 赞同：-1
> 
> 时间：2013-04-19T21:02:24.080
> 
> 标签：java, neo4j

我正在尝试设计一个传销应用程序。它的运作方式就像 A 人赞助 3 人，B、C、D 和 B、C 和 D 各赞助 3 人，依此类推。

为了计算支出，客户希望根据 3 人中的最后一个人（例如 D）遍历图表，总支出是基于 D 下的人数乘以特定金额。现在对我来说挑战是一个约束，对于每个级别，您只需要计算 n-1 人，其中 n 最大为 3，因为这是传销策略。

到目前为止，我正在为项目使用嵌入式 Neo4j，我知道我可以根据关系进行遍历，也许进行一次 bread_first 搜索并获取当前深度，但是如何计算遍历中每个级别的人数减 1？看来，我可能必须实现一个自定义方法，但我需要帮助才能指出正确的方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:35:22.913

好吧，只要您知道自己所处的深度，就可以将深度用作集合（例如数组）的索引。每次访问给定深度的节点时，增加集合中该索引处的值。

完成遍历后，您可以将您喜欢的任何规则和约束应用于数据数组。

# r - Math.factor(j) error when using data.table created from .xlsx import in R

> ID：16113456
> 
> 赞同：0
> 
> 时间：2013-04-19T21:02:39.900
> 
> 标签：r, data.table, xlsx

I am using information from a base data.table to pull data from other data.tables as in the following example:

```
test <- function() {
    library(data.table)

    test.dt <-     data.table(id=c("abc","xyz","ijk"),type=c("1","1","0"),line.position=1:3)
    counts.dt <- data.table(
            abc=c(10,NA,NA,NA),xyz=c(20,30,NA,NA),ijk=c(10,10,10,10),X2abc=NA,X3abc=1:4)

    print(test.dt)
    print(counts.dt)
    test.dt[,count:=sum(!is.na(counts.dt[[id]])),by=id]
    test.dt[,count.value:=counts.dt[line.position,id,with=FALSE],by=id]
    print(test.dt)
} 
```

This works fine, and returns the expected result: a column that pulls uses (line.position,id) from a row in test.dt to grab values of counts(line.position,id).

However, I cannot repeat this with a more complex example that pulls data from a worksheet. I get the error: Error in Math.factor(j) : abs not meaningful for factors. This error is thrown right before the last print statement.

```
test2 <- function(
    file.directory="C:/Users/csnyder/Desktop/BootMethod/",
    file.name="test.xlsx",  
    resample.number=3
    )

{
    require("PBSmapping")
    require("xlsx")
    library(data.table)

    #Load input sheets
    file.path<-sprintf("%s%s",file.directory,file.name)
    excel.data<-read.xlsx(file.path,sheetIndex=1,header=TRUE,stringsAsFactors=TRUE)
    data.DT<-data.table(excel.data)
    excel.data<-read.xlsx(file.path,sheetIndex=2,header=TRUE,stringsAsFactors=TRUE)
    base.DT<-data.table(excel.data)
    excel.data<-read.xlsx(file.path,sheetIndex=3,header=TRUE,stringsAsFactors=TRUE)
    related.DT<-data.table(excel.data)
    excel.data<-NULL

    #add max rows to each ID type. with=TRUE, colnames used as variables.
    #get.text<-function(x){return(as.character(x))}
    base.DT<-base.DT[,Max.Sample:= sum(!is.na(data.DT[[ID]]),na.rm=TRUE),by=ID]

    base.length<-nrow(base.DT)
    base.DT[,Sub.Number:=1:base.length]
    base.DT[,Resample:=1]
    resample.base.DT<-base.DT

    #Add line numbers to data tables.
    data.DT[,Line:=1:nrow(data.DT)]
    related.DT[,Line:=1:nrow(related.DT)]

    #resample number added to base DT, then will make a for loop by resample numbers             and loop it.
    for(counter in 1:resample.number){
        base.DT<-rbindlist(list(base.DT,resample.base.DT[,Resample:=counter]))
    }
    #remove loop initiator
    base.DT<-base.DT[-(1:base.length)]
    #number rows
    base.DT[,Row.Number:=Resample*base.length+Sub.Number-base.length]

    #pick line to sample
    pick.row<-function(x){return(runif(1,1,x))}
    base.DT[,"Line":=runif(1,1,Max.Sample),with=FALSE]
    base.DT[,"Line":=round(runif(1,1,Max.Sample),digits=0),by=Row.Number]

    #Pull cell from data.DT (and related.DT) that has position corresponding to the         matching Row.Number and ID in base.DT
    base.DT[,From.Data:=data.DT[Line,ID,with=FALSE],by=ID]
    print(base.DT)
} 
```

Now, the sheets from my excel workbook import what looks like (to me at least) the following:

Sheet1:

```
data.DT<-data.table(item1=c("AAAA","2XXX",780,684,614,39),item2=c("AAAA","XXX",10,314,NA,NA)) 
```

Sheet2:

```
base.DT<-data.table(ID=c("item1","item2"),Level=c("X2XXX","XXX"),Type=c("AAAA","AAAA"),P=c(1000,1000    ),Cat=c("AAAA","AAAA"),Day=c(NA,1)) 
```

Sheet3:

```
related.DT<-data.table(item1=c("AAAA","2XXX",1,1,1,NA),item2=c("AAAA","XXX",1,1,NA,NA)) 
```

At my current location, I can't upload a workbook. Replacing the excel imports with the direct calls above seems to fix the problem. At risk of not having a reproducible question, I have to ask: Has anyone run into this problem or have an idea of how to resolve it? Or perhaps I'm going about this in a convoluted way--work-arounds are equally welcomed! If an excel workbook is needed to fully understand my question, let me know and I'll try my best to upload one.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T21:30:15.733

这是一个人得到这个错误的时候：

```
abs(as.factor(5))
# Error in Math.factor(as.factor(5)) : abs not meaningful for factors 
```

你有因素是因为`stringsAsFactors = TRUE`在你`read`的 's 中，并且因为你认为是所有数字的一列中的一个或多个元素实际上不是数字，而是一个字符串。通过运行检查哪些列是因子

```
sapply(dt, class) 
```

并从那里拿走。

* * *

从 Arun 编辑：您应该注意，在将`5`from`factor`转换为数字时，您应该首先使用将其转换为字符`as.character`，然后使用`as.numeric`or将其转换为数字或整数`as.integer`：

```
x <- factor(5)

# correct conversion
as.numeric(as.character(x))
# [1] 5

# incorrect conversion if you want the number coerced to numeric type
as.numeric(x) # gets the levels of factor numeric instead
# [1] 1 
```

# drupal - Drupal 7 multi-site install

> ID：16113457
> 
> 赞同：0
> 
> 时间：2013-04-19T21:02:49.667
> 
> 标签：drupal, drupal-7, virtualhost

I have two domains and one sub-domain on a single virtual host (web hosting company). I have ssh access and can create symbolic links. My question is:

Would it be just a matter of me creating a symbolic link and copying files to a virtual host path and (if so) which files would need to be copied to the directory to make this work?

For example: 3 domains

*   example.com
*   example2.com
*   demo.example.com

Drupal is currently installed on `example.com`. In the `/sites` directory there would be 4 directories:

*   all
*   example.com
*   example2.com
*   demo.example.com

`Example2.com` and demo.example.com are symbolic links to their ACTUAL paths on the system. Copying files to these directories such as `settings.php` and `install.php`, etc.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T17:02:10.317

典型的 drupal 安装旨在使用相同的代码库托管多个域，因此在您的托管服务提供商中，您可以将所有三个域指向同一个目录，该目录将是 drupal 安装的根目录，而不是 drupal 的站点目录。

如果您的 drupal 文件在 example.com 中，那么您可以创建一个符号链接，将 exmaple2.com 文件夹指向 example.com 的域目录。然后在您的 example.com 目录中，转到 sites 文件夹并创建一个 example2.com 文件夹，其中包含一个 settings.php 文件的副本，该文件将指向用于 example2 的数据库。example2 网站的文件应存储在 example.com/sites/example2.com/files 中。当您访问 example2.com/install.php 时，它应该有助于将新的 drupal 站点安装到 example.com/sites/example2.com/settings.php 所示的单独数据库中。

# android - TIMEZONE_CHANGED intent being received every few seconds

> ID：16113459
> 
> 赞同：10
> 
> 时间：2013-04-19T21:02:54.100
> 
> 标签：android, android-intent, timezone, broadcastreceiver, alarmmanager

I use a BroadcastReceiver with TIMEZONE_CHANGED action to reset alarms using AlarmManager just to make sure that the alarm runs exactly at the set time, not a few hours earlier or later, depending on the time zone change.

However in the latest log sent by the user, I saw information about intent with TIMEZONE_CHANGED action being received every few seconds with the user complaining about app being glitchy.

Here's my BroadcastReceiver's onReceive code

```
@Override
public void onReceive(Context context, Intent intent) {
    Utils.log("OnTimeChange");
    String action = intent.getAction();

    if (action.equals(Intent.ACTION_TIME_CHANGED)) {
        Utils.log("TimeChange");
    } else if (action.equals(Intent.ACTION_TIMEZONE_CHANGED)) {
        Utils.log("TimeZoneChanged");
    }
    BroadcastsManager.updateBroadcastsFromAlarms(context,
            AlarmsDbAdapter.getInstance(context));
} 
```

The manifest's intent filter:

```
<intent-filter>
    <action android:name="android.intent.action.TIMEZONE_CHANGED" />
    <action android:name="android.intent.action.TIME_SET" />
</intent-filter> 
```

And part of the log (it goes like that for over an hour - full lenght of the log)

```
1\. 19/4 7:41:54 - posting alarm 3 for 8:15 (in 0h)
2\. 19/4 7:44:29 - OnTimeChange
3\. 19/4 7:44:29 - TimeZoneChanged
4\. 19/4 7:44:29 - posting alarm 3 for 8:15 (in 0h)
5\. 19/4 7:44:54 - OnTimeChange
6\. 19/4 7:44:54 - TimeChange
7\. 19/4 7:44:54 - posting alarm 3 for 8:15 (in 0h) 
```

It's a Samsung Galaxy S III (Android v 4.1.2). The strange thing is, that doesn't happen on my S III. Could it be that the user has set "automatic timezone change by provider" option enabled on his/her device and information like that is sent every few seconds?

Has anyone expierienced it? I guess I will just add an option to check if timezone has actually changed before updating broadcasts, but it is still getting the receiver called every few seconds...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-13T09:53:47.267

我仍然不知道为什么时区更改和时间设置如此频繁地被调用，但我能够找到一个解决方案，让我找出何时真正需要做出反应。

另外，我现在只听时区更改。

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);

String oldTimezone = prefs.getString(PREF_TIMEZONE, null);
String newTimezone = TimeZone.getDefault().getID();

long now = System.currentTimeMillis();

if (oldTimezone == null || TimeZone.getTimeZone(oldTimezone).getOffset(now) != TimeZone.getTimeZone(newTimezone).getOffset(now)) {
     prefs.edit().putString(PREF_TIMEZONE, newTimezone).commit();
     Logger.log("TimeZone time change");
    //update alarms
} 
```

我添加了区域的时间检查，因为我经常发现，尽管区域发生了变化，但它们在时间上并没有任何不同。此外，一些用户声称，当检测到区域的大量变化时，他们甚至没有去任何地方——只是定期上班和回来。

检查有限数量的不需要的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-03T06:15:37.463

避免听：

```
<action android:name="android.intent.action.TIME_SET" />
<action android:name="android.intent.action.TIMEZONE_CHANGED" /> 
```

当时间尚未设置或时区未更改时，它们似乎也会定期被调用。我怀疑它与手机设置中使用“*使用网络提供的时区和时间”的用户相关联。*

如果您确实**需要**收听这些广播，您应该检查时间是否真的发生了显着变化，或者它是否只是网络提供的时间的毫秒修正

# python - 有没有办法控制 explorer.exe？

> ID：16113465
> 
> 赞同：1
> 
> 时间：2013-04-19T21:03:24.223
> 
> 标签：python, explorer

我正在创建一个桌面助手，我想知道是否有一种方法可以“查看”explorer.exe 的功能并对此做出响应。例如，如果您可以监控用户何时打开特定文件夹。我更喜欢python中的一种方式，因为它是我项目的主要语言，但如果有另一种语言的方式，那么我可能能够合并它。

# perl - perlbrew 因“找不到 Devel/PatchPerl.pm”而失败

> ID：16113467
> 
> 赞同：4
> 
> 时间：2013-04-19T21:03:30.713
> 
> 标签：perl, perlbrew

`perlbrew`失败`Can't locate Devel/PatchPerl.pm`。

更准确地说，失败的是`patchperl`由`perlbrew`.

实际上*可以*`Devel/PatchPerl.pm`通过环境变量中的路径访问，`PERL5LIB`但在运行之前`perlbrew`无条件地*删除*`perlpatch`此变量：

```
delete $ENV{$_} for qw(PERL5LIB PERL5OPT); 
```

我在文档中找不到任何`perlbrew`证明这种做法的理由。

有人可以解释为什么`perlbrew`会这样吗？

编辑：

下面是`bash`重现该问题的脚本。我像这样运行它（有一些合适的`<PATH_TO_SCRIPT>`）：

```
% env -i HOME=$HOME SHELL=/bin/bash /bin/bash --noprofile --norc
bash-3.2$ /bin/bash --norc --noprofile <PATH_TO_SCRIPT> 
```

该脚本在我的机器上的运行时间约为 4 分钟。输出的最后几行，包括显示错误的行如下：

```
(cd /tmp/perlbrew_root/build/perl-5.16.3 && rm -f config.sh Policy.sh && patchperl && sh Configure -de '-Dprefix=/tmp/perlbrew_root/perls/perl-5.16.3' '-A'eval:scriptdir=/tmp/perlbrew_root/perls/perl-5.16.3/bin'' && make  && make test_harness && make install) 2>&1 | tee /tmp/perlbrew_root/build.perl-5.16.3.log
Can't locate Devel/PatchPerl.pm in @INC (@INC contains: /Library/Perl/5.12/darwin-thread-multi-2level /Library/Perl/5.12 /Network/Library/Perl/5.12/darwin-thread-multi-2level /Network/Library/Perl/5.12 /Library/Perl/Updates/5.12.3 /System/Library/Perl/5.12/darwin-thread-multi-2level /System/Library/Perl/5.12 /System/Library/Perl/Extras/5.12/darwin-thread-multi-2level /System/Library/Perl/Extras/5.12 .) at /tmp/testperl/bin/patchperl line 12.
BEGIN failed--compilation aborted at /tmp/testperl/bin/patchperl line 12.
perl-5.16.3 is successfully installed. 
```

`perl-5.16.3 is successfully installed.`上面输出的最后一行`perl-5.16.3`（

注意`@INC`错误中的。`patchperl`鉴于. _ `Devel/PatchPerl.pm`_ `/tmp/testperl/lib/perl5`_`@INC`

```
PERLDIR=/tmp/testperl
/bin/rm -rf "$PERLDIR"

/bin/rm -rf /tmp/build
/bin/mkdir -p /tmp/build
cd /tmp/build

/usr/bin/curl -s http://www.cpan.org/authors/id/A/AP/APEIRON/local-lib-1.008009.tar.gz | tar xzf -

pushd local-lib-1.008009
  /usr/bin/perl Makefile.PL "--bootstrap=$PERLDIR"
  /usr/bin/make install
popd

eval "$( /usr/bin/perl -I$PERLDIR/lib/perl5 -Mlocal::lib=$PERLDIR )"

/usr/bin/cpan App::cpanminus

export PERLBREW_ROOT=/tmp/perlbrew_root
export PERLBREW_HOME=/tmp/perlbrew_home
/bin/rm -rf "$PERLBREW_ROOT" "$PERLBREW_HOME"

$PERLDIR/bin/cpanm App::perlbrew
$PERLDIR/bin/perlbrew init
source "$PERLBREW_ROOT/etc/bashrc"

$PERLDIR/bin/perlbrew install -v perl-5.16.3 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:13:55.843

升级 perlbrew（或来自[http://perlbrew.pl/](http://perlbrew.pl/)`perlbrew self-upgrade`的 shell bootstrap 咒语）。

最近的版本`$PERLBREW_ROOT/bin`通过`perlbrew install-patchperl`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-08T22:16:51.810

在安装`local::lib`. 通过 CPAN 安装 perlbrew 时（不是唯一的方法，我以前使用`curl -kL http://install.perlbrew.pl | bash`过，`local::lib`禁用了），`Devel::PatchPerl`模块已正确安装到`~/perl5/lib/perl5`，但正如我们都发现的那样，`perlbrew`不会在那里查看。运行**`perlbrew install-patchperl`**会将独立版本的 patchperl（内置`App::FatPacker`）安装到`~/perl5/perlbrew/bin`.

这允许我拥有一个本地“系统”perl，其中包含由 提供的定制库和工具`local::lib`，用于普通和实验性工作。但是对于特殊项目或应用程序，我可以切换到使用`perlbrew`'ed perl，以获得更加可控的环境。真正的系统 perl 几乎从未被修改过。

**警告**- 当 local::lib 在你的默认情况下启用时`.bashrc`，一个简单的`perlbrew use perl-5.18.2`不会删除 - 特定的`local:lib`环境变量（PERL_MM_OPT 和 PERL_MM_OPT - 你必须自己做。一个（有点麻烦，但简单）的技巧是：

```
perlbrew lib create perl-5.18.2@none  # do this once after brewing a perl
perlbrew use perl-5.18.2@none
perlbrew use perl-5.18.2 
```

这也意味着，要关闭 perlbrew，您可以这样做：

```
perlbrew off
eval $(perl -Mlocal::lib | grep -v PERL_LOCAL_LIB_ROOT) 
```

你又回到了默认的 local::lib 设置。虽然最好关闭并重新打开一个新外壳，以避免`$PATH`无限扩展您的广告。

这是迄今为止我找到的获得独立的自定义 perl 环境的最简单方法，包括具有默认 (local::lib) 自定义的系统 perl。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-21T08:37:27.130

> 有人可以解释为什么`perlbrew`会这样吗？

Devel::PatchPerl 位于`patchperl`. 肯定会清除这些变量，这样您就不会意外找到错误的模块（如果没有清除这些`perlbrew`模块，它会为您提供）。`perlbrew`

如果您安装的`perlbrew`if`patchperl`找不到假定`patchperl`本身存在的代码，则会出现问题！从头开始重新安装它。

# php - 获取 [code][/code] 之间的内容并应用更改

> ID：16113475
> 
> 赞同：1
> 
> 时间：2013-04-19T21:04:19.187
> 
> 标签：php, regex, preg-replace

我想制作代码框，我可以在其中应用更改。如果我有这个：`$var= "word";`在这些`[code]`HERE里面`[/code]`，我会`$var`变成红色和`"word"`绿色。

我曾经`preg_replace`选择这些之间的内容`[code]` `[/code]`。

```
$codebox = preg_replace("/\[code\](.*?)\[\/code\]/","$1",$string); 
```

问题是 preg_replace 我可以进行外部更改（对整个代码）。我想对这些`[code]` `[/code]`. 比如：背景颜色、所有文本颜色、所有文本字体、所有文本字体粗细等等……这意味着我需要将其取出应用更改然后放回原处。

我希望能够在not on 上使用`str_replace`和`preg_replace`功能。`$1``$string`

例如`"word"`变成绿色。我会用

```
preg_replace("/(\".*?\")/","<span style='color: #090;'>$1</span>",$string) 
```

我不能`preg_replace`在里面使用`preg_replace`，可以吗？我不知道我是否在这里使用了错误的功能，或者有办法做到这一点。

你可能会发现我的模式错了，纠正我我昨天刚学的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:18:27.600

`preg_match`当您首先使用而不是提取代码时，定位标签内的代码会更简单一些`preg_replace`：

```
$codebox = preg_match("/\[code\](.*)\[\/code\]/",$string,$matches);
$innercode = $matches[0];

// Then...

$innercode = preg_replace( ...

// Later on...

echo "[code]".$innercode."[/code]"; 
```

您的替换返回字符串，因此它们可以很好地嵌套。

另外，如果您不熟悉正则表达式，我建议您查看文本到正则表达式转换器。它帮助我更好地掌握了它们：

[http://txt2re.com/index-php.php3?s=](http://txt2re.com/index-php.php3?s=) $bacon%20=%20%22good%22;&-21&2&6&-23&7&1&-22

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T21:29:52.157

使用[preg_replace_callback](http://php.net/manual/en/function.preg-replace-callback.php)：

```
$string = '[code]$var = "word";[/code]';
$codebox = preg_replace_callback("/\[code\](.*?)\[\/code\]/",function($m){
    // The following replacements are just a demo
    $m[1] = preg_replace('/"([^"]+)"/', '"<span style="color:#0D0;">$1</span>"', $m[1]); // green value
    $m[1] = preg_replace('/(\$\w+)/', '<span style="color:#F00;">$1</span>', $m[1]); // Red var name
    $m[1] = str_replace(' = ', '<span style="color:#00F;"> = </span>', $m[1]); // blue = sign
    return $m[1];
},$string);
echo $codebox; 
```

[在线演示](http://codepad.viper-7.com/VsuSeK)。

# php - PHP FFmpeg conversion issues for mp4 files

> ID：16113476
> 
> 赞同：1
> 
> 时间：2013-04-19T21:04:36.310
> 
> 标签：php, ffmpeg

I want to get the images out of a `mp4` file by using `ffmpeg-php`.

I have

```
 $str_command= '/usr/bin/ffmpeg -i /test/ts.mp4 -r 1 -ss 00:00:10 -t 00:00:01 -s 300x300 -f image2 /test/images/';
 shell_exec($str_command); 
```

However, I got an error message saying

```
 Buffering several frames is not supported. Please consume all available frames before adding a new one. 
```

I have spent hours on web but couldn't find the answer for this. Can anyone help me about this? Thanks so much!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T22:24:11.213

你检查过 PHP 的 ffmpeg 库吗？我以前使用过它，它抽象出所有复杂的命令行调用，就像你试图运行的那样。您可以使用 $movie->getFrame($n) 获取帧对象，并使用 $frame->toGDImage() 将其输出为图像。

例如，

```
$movie = new ffmpeg('/path/to/movie.mp4');
$frame10 = $movie->getFrame(10);
$image = $frame10->toGDImage();

// Now display the image
header('Content-Type: image/jpeg');
imagejpeg($image);

// Or save it to a file
$saved = imagejpeg($image, '/path/to/new/file.jpg'); 
```

查看[http://ffmpeg-php.sourceforge.net/doc/api/上的文档](http://ffmpeg-php.sourceforge.net/doc/api/)

# java - Spring MongoTemplate updateMulti with Limit？

> ID：16113479
> 
> 赞同：1
> 
> 时间：2013-04-19T21:05:07.990
> 
> 标签：java, mongodb, limit, spring-data

我正在使用 Spring Data 的 MongoTemplate 通过单个查询更新多个文档。我需要能够限制每次通话更新的文档数量。由于我不清楚的原因，限制不起作用：

```
Query query = new Query(
    Criteria.where( "foo" ).is( bar )
    .and( "status" ).is( 1 ) );
query.limit( 10 );

Update update = new Update();
update.set( "status", 2 );

WriteResult result = mongoTemplate.updateMulti( query, update, "bazCollection" );

logger.info( result.getN() + " documents updated" ); 
```

result.getN() 总是返回满足条件的文档总数并且忽略限制，并且所有满足条件的文档都被修改。

这有什么不工作的原因吗？

有没有更好的方法来完成同样的事情？

# c - 唤醒进程后出现分段错误

> ID：16113481
> 
> 赞同：0
> 
> 时间：2013-04-19T21:05:13.700
> 
> 标签：c, linux, signals, fork

嘿，我正在编写一个简单的 shell，它会在获取 SIGSTSP 时暂停进程并继续获取更多命令。它将暂停的进程保存在作业列表中。当我尝试唤醒挂起的进程时，我得到一个分段错误，只有在（前）挂起的进程处理了 SIGCONT 信号之后。

这是我的信号处理器

```
void signalhandle(int sig) {
int i,pid,id;
sigset_t mask_set;
sigset_t old_set;
signal(SIGTSTP,signalhandle);
sigfillset(&mask_set);
sigprocmask(SIG_SETMASK,&mask_set,&old_set);

//handle sigtstp
**if (sig == SIGTSTP)**{
    GPid=getpid();
    pid=fork();
    if (pid==-1){
        perror("(ctrl-z)(signal error)(fork)");
    }
    else if (pid==0){
        Susp_Bg_Pid=GPid;
        i=0;
        while (GetPid(JobsList,i)!=-1){
             i=i+1;
        }
        id=GetId(&JobsList,GPid);
        if (id==-1){
            InsertElem(&JobsList, L_Fg_Cmd, i, GPid, 1);
            }
        else{
            DelPID(&JobsList,GPid);
            InsertElem(&JobsList, L_Fg_Cmd, id, GPid, 1);
        }
        GPid=getpid();                           
    }
    else{
       susp = 1;
       pause();
    }
}

**if (sig == SIGCONT){**
    printf("process now running again\n");
    }
} 
```

}

这就是我尝试唤醒进程的方法

```
else if (!strcmp(cmd, "bg")) 
{
        int pid , new_pid=0;
        int id=0;

        if (num_arg > 1) {
                illegal_cmd = 1;
        }
        else{
            if (num_arg==1)   {
                    id = atoi(args[1]);
                    new_pid= GetPid(*pJobsList,id);
                    if (new_pid!=-1){
                        pElem=*pJobsList;
                        if (pElem->VarValue!=NULL){
                            while (pElem!=NULL){
                                if (pElem->pID==new_pid){
                                    printf("%s \n", pElem->VarValue);
                                }
                                pElem=pElem->pNext;
                            }
                        }
                        **kill(new_pid,SIGCONT);**                        
                        printf("now finished\n");
                    }
                    else{
                        printf("smash error\n");
                    }
             }
            else{

            }

        }
} 
```

我的控制台输出是

粉碎 > 睡眠 30

^Zsmash > bg 0

睡觉 30

现在完成了

粉碎 > 进程现在再次运行

分段故障

按 [Enter] 关闭终端...

```
int InsertElem(LIST_ELEMENT** pList, char* value, int ID, int pID, int susp){
LIST_ELEMENT *List;
LIST_ELEMENT *temp;
List = *pList;
if (value == NULL) 
    return -1; 
    if (List == NULL)
{  
    List = (LIST_ELEMENT*)malloc(sizeof(LIST_ELEMENT));
    if (List == NULL) 
        exit (-1); 

    List->VarValue=(char*)malloc(sizeof(char)*(strlen(value)+1));
    if (List->VarValue == NULL) 
        exit (-1); 

    strcpy(List->VarValue, value);
    List->VarName = NULL; // VarName doesn't mean anything for job
    List->ID = ID;
    List->pID = pID;
    List->suspended = susp;
    List->pNext = NULL;
    *pList = List;
    return 0;
    } 
else 
{    
    if (List->ID == ID) 
        return InsertElem(&List->pNext, value, ID+1, pID, susp);
    else
    {
        temp = (LIST_ELEMENT*)malloc(sizeof(LIST_ELEMENT)); 
        if (temp == NULL)  
            exit (-1); 
        temp->VarValue =(char*) malloc(sizeof(char)*(strlen(List->VarValue)+1));
        if (temp->VarValue == NULL) 
            exit (-1); 
        strcpy(temp->VarValue, List->VarValue);
        temp->VarName = NULL;
        temp->pID = List->pID;
        temp->ID = List->ID;
        temp->suspended = List->suspended;
        temp->pNext = List->pNext;

        free(List->VarValue);
        List->VarValue=(char*)malloc(sizeof(char)*(strlen(value)+1));
        if (List->VarValue == NULL) 
            exit (-1); 
        strcpy(List->VarValue, value);
        List->ID = ID;
        List->pID = pID;
        List->suspended = susp;
        List->pNext = temp;
        return 0;
    }
} 
```

# python - Google's python class

> ID：16113482
> 
> 赞同：-2
> 
> 时间：2013-04-19T21:05:14.493
> 
> 标签：python, class

I was wondering if you could give me a hand with some questions on the google python class, they are based around lists.

```
 # A. match_ends
# Given a list of strings, return the count of the number of
# strings where the string length is 2 or more and the first
# and last chars of the string are the same.
# Note: python does not have a ++ operator, but += works.
def match_ends(words):
    print words

# B. front_x
# Given a list of strings, return a list with the strings
# in sorted order, except group all the strings that begin with 'x' first.
# e.g. ['mix', 'xyz', 'apple', 'xanadu', 'aardvark'] yields
# ['xanadu', 'xyz', 'aardvark', 'apple', 'mix']
# Hint: this can be done by making 2 lists and sorting each of them
# before combining them.
def front_x(words):
  return 
```

these are the questions, I've had several attempets and never really got anywhere, I was wondering if someone could do it so I could see the answer and work backwards.

Thanks! George

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:31:25.217

```
def match_ends(words):
    count = 0
    for item in words:
        if len(item) >= 2 and item[0] == item[-1]:
            count += 1
    return count

def front_x(words):
    x_list = []
    other_list = []
    for item in words:
        if item[0].lower() == "x":
            x_list.append(item)
        else:
            other_list.append(item)
    x_list.sort()
    other_list.sort()
    return x_list + other_list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:24:31.427

你不会从被告知答案中学到很多东西，但也许这可以帮助你自己到达那里：

```
def match_ends(words):
    count = 0
    for word in words:
        # (do something)
    return count

def front_x(words):
    with_x = []
    without_x = []
    for i in words:
        # (do something)
    # (sort the lists)
    return with_x + without_x 
```

# c - Compiling ASM with C and having result "NaN" or "-NaN". Square Root Function

> ID：16113483
> 
> 赞同：0
> 
> 时间：2013-04-19T21:05:15.173
> 
> 标签：c, assembly, square-root

I had errors with compiling earlier but after working on them, got no errors/warnings. Altho the result given is NaN.

Here is code:

C:

```
iclude <stdio.h>

extern float wynik1 (int a, int b, int c);
extern float wynik2 (int a, int b, int c);

int a = 2;
int b = 2;
int c = 2;

int main ()
{

float licz1 = 0;
float licz2 = 0;

licz1 = wynik1(a, b, c);
licz2 = wynik2(a, b, c);

printf("Roots : %f oraz %f \n", licz1, licz2);

return 0;
} 
```

ASM1:

```
SYSEXIT = 1
SYSREAD = 3
SYSWRITE = 4
STDOUT = 1
EXIT_SUCCESS = 0
STDIN = 0

.align 32
.data

a: .int 2
b: .int 2
c: .int 2
buf: .float 0
x1: .float 0

cztery: .float 4
dwa: .float 2

.text
.global wynik1

wynik1:

xor %eax, %eax
xor %ebx, %ebx
xor %ecx, %ecx

pushl %ebp
movl %esp, %ebp
movl 8(%ebp), %ecx
movl 12(%ebp), %ebx
movl 16(%ebp), %eax
pushl %eax
pushl %ebx
pushl %ecx

movl %eax, a
movl %ebx, b
movl %ecx, c

finit 
fld a
fld c

deltaa1:
fmulp
fld cztery
fmulp
fld b
fld b
fmulp
fsubp

pierwiastek1:
fsqrt
fld b
fchs
fsubp
fstp buf
fld a
fld dwa
fmulp
fld buf
fdivp
fstp x1

movl x1, %eax

movl %ebp, %esp
popl %ebp
ret 
```

ASM2:

```
SYSEXIT = 1
SYSREAD = 3
SYSWRITE = 4
STDOUT = 1
EXIT_SUCCESS = 0
STDIN = 0

.align 32
.data

a: .int 2
b: .int 2
c: .int 2
buf: .float 0
x2: .float 0
cztery: .float 4
dwa: .float 2

.text
.global wynik2

wynik2:

xor %eax, %eax
xor %ebx, %ebx
xor %ecx, %ecx

pushl %ebp
movl %esp, %ebp
movl 8(%ebp), %ecx
movl 12(%ebp), %ebx
movl 16(%ebp), %eax
pushl %eax
pushl %ebx
pushl %ecx

movl %eax, a
movl %ebx, b
movl %ecx, c

finit 
fld a
fld c

deltaa2:
fmulp
fld cztery
fmulp
fld b
fld b
fmulp
fsubp

pierwiastek2:
fsqrt
fld b
fchs
faddp
fstp buf
fld a
fld dwa
fmulp
fld buf
fdivp
fstp x2

movl %ebp, %esp
popl %ebp
ret 
```

So yeah. The return in C code is "- nan and - -nan". I have no idea hod to overcome this after some hours of checking registers and changing code.

Code in C = intput and output.

ASM1 is couting root 1 and ASM2 is counting root 2\.

Any ideas?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T06:09:58.083

您正在做`fld a`，而您应该做`fild a`的是将整数加载到浮点堆栈（将其转换为浮点数）；因为这些变量是整数，而不是浮点数。

例如，作为浮点数加载的整数 2 是一个大小约为 2^-140 的非正规。这乘以另一个小数为零。

然后最后一个`fdivp`将 0.0 除以 0.0，即定义为 NaN。

# php - PHP isset() 用法

> ID：16113486
> 
> 赞同：-1
> 
> 时间：2013-04-19T21:05:24.343
> 
> 标签：php, html

好的，让我简单总结一下。我有两个用 html 制作的文本框。我希望将在那里输入的任何内容存储到两个变量中，但我希望页面做两件事，一是我想设置提交按钮（使用 isset），以便它在开始时不会显示错误。我将如何做到这一点，假设我的两个变量是 $textbox1 和 $textbox2。我得到的错误是第 26 行上的未定义变量，这是我的 HTML textbox2 所在的位置。我还想指出，我的文本框的值也是变量。如果您不明白我的意思，请滚动到代码底部以查看我在说什么。

```
<?php

if (isset($_POST['submit'])) {
    $textbox1 = $_Post['txtbox1'] && $textbox2=$_POST['txtbox2']; 
    if ($textbox1=="John" && $textbox2="Doe") {
        Print ("Welcome back friend");
    } else {
        print ("You're not a member of this site");
    }
} else {
    $textbox1="" && $textbox2="";
}
print($textbox1 && $textbox2);

?>

<input type="text" value="<?php print($textbox2); ?>" name=txtbox2> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T21:12:08.397

`&&`是一个逻辑运算符。您不能使用它在一行中设置多个变量。所以

```
$textbox1 = $_Post['txtbox1'] && $textbox2=$_POST['txtbox2']; 
```

应该读

```
$textbox1 = $_POST['txtbox1'];
$textbox2 = $_POST['txtbox2']; 
```

此外，您在第二个条件中使用赋值 ( `=`) 而不是相等检查 ( `==`)。

```
if ($textbox1=="John" && $textbox2="Doe") { 
```

应该读

```
if ($textbox1 == 'John' && $textbox2 == 'Doe') { 
```

同样，在你`else`和`print()`之后，你试图在你不应该使用的时候使用逻辑运算符。在 else 中，将其分成两行，如上所示，在您的`print()`语句中，您应该使用连接，而不是`&&`.

我不完全理解您在这里要完成的工作，但这些是我在您的代码中看到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:13:23.843

你有一个未定义的变量问题，因为`$textbox2`并不总是定义......当你提交它并`$_Post["txtbox1"]`在转换为 bool 时评估为 false，因为它永远不会设置为变量在 PHP 中区分大小写（`$_POST`而不是`$_Post`）然后 $textbox2 赢了'不被定义。

您的行被解析如下：

```
$textbox1 = (($_Post['txtbox1']) && ($textbox2=$_POST['txtbox2'])); 
```

`&&`只要每个值的计算结果为 ，操作员就会进行检查`true`。但`$_Post['txtbox1']`评估为假，因此它永远不会执行该`$textbox2=$_POST['txtbox2']`部分，`$textbox2`未分配。

最正确的应该是：

```
$textbox1 = $_POST['txtbox1'];
$textbox2 = $_POST['txtbox2']; 
```

并在 if 子句中使用：`!empty($_POST['txtbox1']) && !empty($_POST['txtbox2'])`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:13:56.533

```
$textbox1=$_Post['txtbox1'];
$textbox2=$_POST['txtbox2']; 
```

不要这样写

```
$textbox1=$_Post['txtbox1'] 
&& $textbox2=$_POST['txtbox2']; 
```

也在`else`

```
$textbox1=""; $textbox2=""; 
```

在`if`你写道`=`，这意味着平等。你应该写`==`这意味着检查它是否等于这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T23:33:02.030

您指定的 && 在分配时不起作用。您只能在逻辑条件下使用它。尝试这个 ：

```
$textbox1 = $_Post['txtbox1'];
 $textbox2=$_POST['txtbox2']; 
```

此外，不要在条件中使用“=”，而是尝试使用“===”这是比较两个字符串时最合适的操作数。

# android - 订购广播到服务

> ID：16113487
> 
> 赞同：2
> 
> 时间：2013-04-19T21:05:25.787
> 
> 标签：android, service, broadcastreceiver, broadcast, intentfilter

我有一个用例，其中 a`Service`在后台做一些工作，需要将事件通知给 two`Activities`和 one `Service`。我正在使用有序广播，因为：

1）如果`ActivityA`是在前台，它处理传入的事件，然后中止广播。这样一来，`ActivityB`并`Service`没有得到通知。

2）如果广播没有中止，`ActivityB`是下一个就行。如果处于活动状态，它还会取消广播。

3) 否则，`Service`处理该事件。

为此，`BroadcastReceiver`每个组件都有不同的优先级。`Service's BroadcastReceiver`是一个内部静态类，并且在`<receiver>`AndroidManifest.xml 中使用正确的`<intent-filter>`.

[问题是，正如这里](http://commonsware.com/blog/2013/04/17/do-not-have-accidental-api.html)所指出的，我不希望任何人通过在清单上留下自定义操作来窃听我的广播，但除了使用有序广播之外，我不知道任何其他实现排序的方法。

还有其他选择吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:23:38.387

您可以尝试使用[Android 接口定义语言](http://developer.android.com/guide/components/aidl.html)进行通信。

# node.js - 为什么页面没有在 AngularJS+Express 中重定向

> ID：16113494
> 
> 赞同：1
> 
> 时间：2013-04-19T21:06:30.150
> 
> 标签：node.js, mongodb, angularjs, express, angular-routing

我正在制作一个由 Brian Ford 制作的带有 angular express 种子的演示站点（非常感谢），但是在编辑帖子后它不​​会重定向到列表 url。编辑操作做得很好，只是在点击提交按钮后没有重定向到列表页面。在 chrome 中，它显示处于永不结束的状态...我的代码如下：

**角度控制器**

```
function EditPostCtrl($scope, $http, $location, $routeParams) {
    $scope.form = {};
    $http.get('/api/posts/details/' + $routeParams.id).
        success(function(data) {
           $scope.form = data.post;
        });

    $scope.editPost = function () {
        $http.post('/api/posts/edit/' + $routeParams.id, $scope.form).
            success(function(data) {
                $location.path('/posts');
            });
    };
}; 
```

**快递应用**

```
app.post('/api/posts/edit/:id',api.adminLoginCheck,api.editPost); 
```

**api.js**

```
exports.editPost = function (req, res,next) {
    console.log("editPost");

    var id = req.params.id;
    req.body.slug = req.body.title.split(' ').join('-').toLowerCase();
    delete req.body._id;
    myMongoDb.update({slug:id},'posts',req.body, function(error,results){
        if(error){
            console.log(error);
            res.json(false);
        }else{
            res.json(true);
        }

    });
}; 
```

我做错了什么？提前致谢

# python - Python Module identifies as dict

> ID：16113500
> 
> 赞同：1
> 
> 时间：2013-04-19T21:07:08.617
> 
> 标签：python

Lets say I have a lot of key-pair data. I would like to have this data in a package so that it can be imported. Is there a way to make modules work like dicts, for performance and extendibility reasons?

Example:

```
common/pairs/
 ├── BUILDINGS.py
 └── __init__.py

import BUILDINGS

BUILDINGS["foo"] == "bar" 
```

Note: The desired result can be archived by putting declaring `BUILDINGS` in `__init__.py` but they will all be compiled every time, its not drag and undroppable, and it seems ugly.

Is there a way to achieve this well? Is there a way to achieve it at all?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:17:02.157

不是我推荐它，但你可以分配`dict`into `sys.modules`。Python 并不关心实际存在的模块对象。

```
# BUILDINGS.py
from sys import modules
if __name__ != "__main__":
    modules[__name__] = {'a': 1, 'b': 2, ...} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:13:11.280

模块已经是 dicts，其属性存储在`BUILDINGS.__dict__`. 只需创建一个实用程序函数即可直接写入它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T21:13:59.080

如果我理解正确，我认为您想要的是`pickle`包裹

IE，

```
In [16]: import pickle

In [17]: mydict = {'this':1, 'is':2, 'my':3, 'dict':4}

In [18]: mydict
Out[18]: {'dict': 4, 'is': 2, 'my': 3, 'this': 1}

In [20]: outfile = open('/tmp/mydict.pickle', 'w')

In [21]: pickle.dump(mydict, outfile)

In [22]: outfile.close()

In [23]: infile = open('/tmp/mydict.pickle', 'r')

In [24]: mydict_loaded = pickle.load(infile)

In [25]: mydict_loaded
Out[25]: {'dict': 4, 'is': 2, 'my': 3, 'this': 1} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T21:16:36.997

如果您想存储稍后要引用的键值数据，您应该尝试[搁置](http://docs.python.org/2/tutorial/modules.html)模块

来自上述链接页面的示例

```
import shelve

d = shelve.open(filename) # open -- file may get suffix added by low-level
                          # library

d[key] = data   # store data at key (overwrites old data if
                # using an existing key)
data = d[key]   # retrieve a COPY of data at key (raise KeyError if no
                # such key)
del d[key]      # delete data stored at key (raises KeyError
                # if no such key)
flag = d.has_key(key)   # true if the key exists
klist = d.keys() # a list of all existing keys (slow!)

# as d was opened WITHOUT writeback=True, beware:
d['xx'] = range(4)  # this works as expected, but...
d['xx'].append(5)   # *this doesn't!* -- d['xx'] is STILL range(4)!

# having opened d without writeback=True, you need to code carefully:
temp = d['xx']      # extracts the copy
temp.append(5)      # mutates the copy
d['xx'] = temp      # stores the copy right back, to persist it

# or, d=shelve.open(filename,writeback=True) would let you just code
# d['xx'].append(5) and have it work as expected, BUT it would also
# consume more memory and make the d.close() operation slower. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T21:46:17.970

如果您*真的*想要一个可以用作 的模块，则`dict`必须使其实现映射协议。

特别是，您需要确保`type(BUILDINGS).__getitem__(BUILDINGS, key)`已定义（例如`getattr(BUILDINGS, key)`. 以及`__setitem__`,`__delitem__`以及您想要实现的任何其他内容。（您可以通过 获得大部分想要的内容`collections.abc.MutableMapping`，或者`collections.MutableMapping`如果您使用的是 2.x 。请参阅[文档](http://docs.python.org/3/library/collections.abc.html#collections-abstract-base-classes)，了解您必须实施什么才能免费获得其他所有内容。）

问题是（至少在 CPython 中，这可能是您关心的）`module`是一个无法修改属性的内置类型。所以，你需要`BUILDINGS`成为一个不同类型的实例，然后你可以添加`__getitem__`它。例如：

```
class DictModuleType(types.ModuleType, collections.abc.MutableMapping):
    def __getitem__(self, key):
        return getattr(self, key)
    def __setitem__(self, key, value):
        return setattr(self, key, value)
    # ... etc.

import BUILDINGS as _BUILDINGS
BUILDINGS = DictModuleType('BUILDINGS')
for name, member in inspect.getmembers(_BUILDINGS):
    if not name.startswith('_'):
        setattr(BUILDINGS, name, member) 
```

现在你有了一个`BUILDINGS`和真正的模块一样的行为，除了它还提供类似字典的访问，而不仅仅是类似命名空间的访问。

你可以用各种不同的方式把它包起来。

最简单的方法是有效地利用该代码（但使用`__import__`or`imp`这样你就不会污染`globals`并且`sys.modules`使用中间值）并将它放在一个函数中，而不是`import BUILDINGS`你写`helper_mod.dict_import(BUILDINGS)`.

最强大的方法是创建并安装一个[导入钩子](http://www.python.org/dev/peps/pep-0302/)，它只返回一个`DictModuleType`而不是`ModuleType`（您可能需要实现`__new__`和/或`__init__`使其工作），例如，所有名称全部大写的模块（只需检查 if`fullname.split('.')[-1].isupper()`和，如果没有，请不要包装它）。然后，您可以编写一个名为`BUILDINGS.py`, 和`import BUILDINGS`,的模块，`BUILDINGS`其行为类似于`dict`.

# assembly - 将汇编语言 8086 中的 2 个值相乘？

> ID：16113503
> 
> 赞同：0
> 
> 时间：2013-04-19T21:07:14.073
> 
> 标签：assembly, x86, masm, irvine32

我将从控制台窗口输入的两个值相乘。我正在使用**32 位寄存器 eax, ebx**，但它没有将值相乘。该程序正在运行，但它没有成倍增加。任何人都可以检测到问题吗？这段代码有什么问题？我在汇编语言中使用 KIP.R.IRVINE 链接库。

这是代码：

```
 INCLUDE Irvine32.inc

  .data

   inputValue1st BYTE "Input the 1st integer = ",0
   inputValue2nd BYTE "Input the 2nd integer = ",0
   outputSumMsg BYTE "The sum of the two integers is = ",0

   num1 DD ?
   num2 DD ?
   sum  DD ?

  .code

  main PROC

   ; here we are calling our Procedures

  call InputValues
  call multiplyValue
  call outputValue
  call Crlf

  exit
  main ENDP

InputValues PROC

;----------- For 1st Value--------
; input message

call Crlf
mov edx,OFFSET inputValue1st
call WriteString

call ReadInt    ; read integer
mov num1, eax   ; store the value

 ;-----------For 2nd Value----------

 ; output the prompt message
 mov edx,OFFSET inputValue2nd
 call WriteString

  call ReadInt  ; read integer
  mov num2, ebx     ; store the value

  ret
  InputValues ENDP

   ;---------multiply----------------

   multiplyValue PROC
   ; compute the sum

    mov eax, num1   ; moves num1 to eax
    mov ebx, num2   ; moves num2 to ebx

    mul ebx  ; num1 * num2 = 6 * 2
    mov sum, eax  ; the val is stored in ebx

    ret
    multiplyValue ENDP

    ;--------For Sum Output Result----------

    outputValue PROC

    ; output result
    mov edx, OFFSET outputSumMsg
    call WriteString

    mov eax, sum
    call WriteInt ; prints the value in eax
    ret
    outputValue ENDP

    End main 
```

还有一个问题：我需要在其中使用进位标志吗？如果是这样，那么它的代码会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T00:06:47.100

```
;mov eax, num1   ; moves num1 to eax
;mov ebx, num2  ; moves num2 to ebx 
```

如果您要将值实际加载到寄存器中而不是评论这是您应该做的，可能会有所帮助，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T12:46:17.230

输入第二个值时出现错误 ReadInt 总是将值放入 eax 但您说：

```
call ReadInt  ; read integer
mov num2, ebx     ; store the value 
```

肯定是

```
call ReadInt  ; read integer
mov num2, eax     ; store the value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-17T07:57:11.453

迟到总比不到好 ：）

```
TITLE MultiplyTwoNumbers (multiply.asm)

INCLUDE Irvine32.inc

.data

inputValue1st BYTE "Input the 1st integer = ",0
inputValue2nd BYTE "Input the 2nd integer = ",0
outputSumMsg BYTE "The sum of the two integers is = ",0

num1 DD ?
num2 DD ?
sum  DD ?

.code

main PROC

; here we are calling our Procedures

call InputValues
call multiplyValue
call outputValue
call Crlf

exit
main ENDP

InputValues PROC

;----------- For 1st Value--------
; input message

mov edx,OFFSET inputValue1st
call WriteString

call ReadInt    ; read integer
mov num1, eax   ; store the value

 ;-----------For 2nd Value----------

 ; output the prompt message
 mov edx,OFFSET inputValue2nd
 call WriteString

  call ReadInt  ; read integer
  mov num2, eax     ; store the value

  mov eax,0

  ret
  InputValues ENDP

   ;---------multiply----------------

   multiplyValue PROC
   ; compute the sum

    mov eax, num1   ; moves num1 to eax
    imul eax, num2   ; multiplies content in eax with num2 
    mov sum, eax  ; the val is stored in eax

    ret
    multiplyValue ENDP

    ;--------For Sum Output Result----------

    outputValue PROC

    ; output result
    mov edx, OFFSET outputSumMsg
    call WriteString

    mov eax, sum
    call WriteInt ; prints the value in eax
    ret
    outputValue ENDP

    End main 
```

# windows - trying to get absolute file path's from relative path's from CLI

> ID：16113506
> 
> 赞同：0
> 
> 时间：2013-04-19T21:07:19.340
> 
> 标签：windows, batch-file

```
cd "C:\path\to\directory\" >nul & echo %CD% 
```

Say I run that in `C:\dir`. I'd expect it to output `C:\path\to\directory` since that's what it does if I run each command individually and in succession. But it doesn't do that. When the two commands are sorta concatenated together it outputs the current path - eg. `C:\dir`.

Any ideas why? Alternatively, any ideas as to how I can get the full path from a relative path via the CLI?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:20:37.720

如果您将两个命令连接起来，它们的作用就像一个代码块，并且所有 %variables% 都不能更改它们的值。您必须使用延迟扩展：

```
@ECHO OFF & setlocal enabledelayedexpansion
cd "C:\path\to\directory\" >nul & echo !CD! 
```

输出将是：

```
C:\path\to\directory 
```

# variables - Why does Automator show 1 result on "Set Value Of Variable" but 2 results in "Get Value Of Variable"?

> ID：16113509
> 
> 赞同：0
> 
> 时间：2013-04-19T21:07:33.310
> 
> 标签：variables, automator

See screenshot. Why is this happening? I want 1 result, not 2.

![screenshot from Automator](https://i.stack.imgur.com/Lcc0l.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:11:43.817

您已经在“设置变量值”的末尾获得了变量的值。你为什么要再次得到它？

尝试将“查看结果”项代替“获取变量的值”。我想你会发现你已经拥有了你需要的东西。

# canvas - Why are images being drawn in the wrong place?

> ID：16113510
> 
> 赞同：0
> 
> 时间：2013-04-19T21:07:37.170
> 
> 标签：canvas, dart

The following code attempts to draw an image from a button selected in a toolbar into a canvas at the mouse position. Based on the printed coordinates the position is correctly calculated, however the images get placed in the wrong place. The code:

```
import 'dart:html';

class Test {
  ImageElement toolbar_selected_element = null;
  CanvasElement canvas;
  num mouseX = null, mouseY = null;

  void main() {
    canvas = query("#canvas");
    canvas.onClick.listen(canvas_OnClick);

    for (var toolbutton in queryAll('.toolbutton')) {
      toolbutton.onClick.listen((e) => toolbar_selected_element = query("#${e.target.id}"));
    }
  }

  void canvas_OnClick(MouseEvent event) {
    num x,y;
    var clientBoundingRect = canvas.getBoundingClientRect();
    mouseX = event.clientX - clientBoundingRect.left;
    mouseY = event.clientY - clientBoundingRect.top;
    window.requestAnimationFrame(draw);
  }

  void draw(num _) {
    CanvasRenderingContext2D context = canvas.context2d;
    context.clearRect(0, 0, canvas.width, canvas.height);
    if(toolbar_selected_element!= null   && mouseX != null && mouseY != null) {
      print("$mouseX $mouseY");
      context.drawImage(toolbar_selected_element, mouseX, mouseY);
    }
  }
}

void main() {
  new Test().main();
} 
```

The corresponding html file can be found at: [https://github.com/joaompinto/SVGDropper/blob/master/web/svgdropper.html](https://github.com/joaompinto/SVGDropper/blob/master/web/svgdropper.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:44:25.150

问题是您正在设置 CSS 样式`width`以及`height`画布实际宽度和高度以外的其他内容。有关更多详细信息，请参阅[此答案](https://stackoverflow.com/a/4939066/1427098)。

如果您真的希望画布尺寸的规范来源位于 CSS 文件中，您可以执行以下操作：

```
void main() {
  canvas = query("#canvas");
  canvas.width = int.parse(canvas.getComputedStyle().width.split('px')[0]);
  canvas.height = int.parse(canvas.getComputedStyle().height.split('px')[0]); 
```

我希望有一种更优雅的方式来去除“px”，但这是我首先想到的。

# javascript - 比较大于 1000 的数字时出现奇怪的 JavaScript 行为

> ID：16113521
> 
> 赞同：1
> 
> 时间：2013-04-19T21:08:58.610
> 
> 标签：javascript, boolean-logic

我写了一个 javascript 函数，它应该检查一个金额是否大于 0 并且小于某个金额。例如，如果应付的总金额为 800.00 美元，并且用户尝试支付 1100 美元，我希望函数首先检查支付的金额 ($1100) 是否大于 0（真）并且支付的金额是否也更少超过应付总额（假）。我很确定我的逻辑没问题，但是这个函数没有正常工作：

```
function validate_payment_amount() {
    var payment_amt = get_amount_paying(); // 1100.00
    var amt_due = get_amount_due(); // 800.00

    console.log('Is ' + payment_amt + ' greater than 0?: ' + (payment_amt > 0));
    console.log('&&');
    console.log('Is ' + payment_amt + ' less than or equal to ' + amt_due + '?: ' + (payment_amt <= amt_due));

    return payment_amt > 0 && payment_amt <= amt_due;
} 
```

`payment_amount`如果**小于 1000** ，该函数会正确评估，这是控制台输出：

```
Is 999.00 greater than 0?: true
&&   
Is 999.00 less than or equal to 892.50?: false 
```

所以上面的工作正常。但是，当我给它一个**大于 1000**的数字时，控制台会显示：

```
Is 1001.00 greater than 0?: true
&&
Is 1001.00 less than or equal to 892.50?: true 
```

任何人都可以对此有所了解吗？

**编辑：** `get_amount_paying()`和`get_amount_due()`：

```
function get_amount_due() {
    return parseFloat($("#still_due").data('amount')).toFixed(2);
}

function get_amount_paying() {
    return parseFloat($("#make_payment").val()).toFixed(2);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T21:12:36.010

您是否在比较字符串而不是数字？这将解释你的结果。

试试这个：

```
var payment_amt = parseFloat(get_amount_paying());
var amt_due = parseFloat(get_amount_due()); 
```

（请参阅[parseFloat 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseFloat)。）

**编辑：** `toFixed()`返回一个字符串 - 请参阅[toFixed 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T21:18:37.300

您的输出放弃了它们是字符串的事实 - 打印实际数字类型永远不会有多余的 0。打印数字时看到`892.50`是不可能的。

`.toFixed()`返回一个字符串，而不是一个数字顺便说一句。

它适用于`> 0`，因为在比较时`string > number`，字符串会在比较之前自动解析为数字。

它不起作用，`payment_amt <= amt_due`因为它们都是字符串，因此完成了字符串比较，并且没有解析它们的数值。

尝试

```
function get_amount_due() {
    return parseFloat($("#still_due").data('amount'))
}

function get_amount_paying() {
    return parseFloat($("#make_payment").val())
} 
```

不同之处在于删除`toFixed`，这在此处是无用的。

# c# - 将 Windows 套接字转换为 .NET

> ID：16113524
> 
> 赞同：2
> 
> 时间：2013-04-19T21:09:09.263
> 
> 标签：c#, sockets

我有一个非常简单的套接字连接，它似乎可以在 WinSock 2.0 下工作，但在 .NET 下根本不行。我唯一知道的是一个有效，另一个根本无效，但我不知道如何调试它。

Windows 套接字版本：

```
INT_PTR CALLBACK ConnectDialogProc (HWND hwndDlg, UINT uMsg, WPARAM wParam, LPARAM lParam)
{
    SOCKET ConnectMe;
    int Status, cRemoteAddr;
    LRESULT ItemData;
    SOCKADDR_IN SockAddr, RemoteAddr;
    CERDISPINFO Info;
    BOOL fReuseAddr = TRUE;

    switch (uMsg) {
    case WM_INITDIALOG :
        memset (&SockAddr, 0, sizeof(SockAddr));
        SockAddr.sin_family = AF_INET;
        SockAddr.sin_port = htons(987);
        SockAddr.sin_addr.S_un.S_addr = htonl(INADDR_ANY);
        ConnectMe = socket (AF_INET, SOCK_DGRAM, 0);
        setsockopt (ConnectMe, SOL_SOCKET, SO_REUSEADDR, (char *)&fReuseAddr, sizeof(fReuseAddr));
        bind (ConnectMe, (SOCKADDR *)&SockAddr, sizeof(SockAddr));
        WSAAsyncSelect (ConnectMe, hwndDlg, WM_CONNECT_ME, FD_READ);
        SetWindowLong (hwndDlg, GWL_USERDATA, (LONG)ConnectMe);
        return TRUE;
    case WM_CONNECT_ME :
        ConnectMe = (SOCKET)wParam;
        cRemoteAddr = sizeof(RemoteAddr);
        Status = recvfrom (ConnectMe, (char*)&Info, sizeof(Info), 0, (SOCKADDR*)&RemoteAddr, &cRemoteAddr);
        if (Status != SOCKET_ERROR)
                {
            // Convert ip addr to host order
            ItemData = ntohl(RemoteAddr.sin_addr.S_un.S_addr);
        }
        return TRUE;
    }
    return FALSE;
} 
```

这是大致等效的 .NET 版本：

```
public Form1()
{
    InitializeComponent();

    Socket socket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Unspecified);

    SocketAsyncEventArgs socketEventArg = new SocketAsyncEventArgs();
    socketEventArg.Completed += new EventHandler<SocketAsyncEventArgs>(socketEventArg_Completed);

    socketEventArg.RemoteEndPoint = new IPEndPoint(IPAddress.Any, 987);
    socket.SetSocketOption(SocketOptionLevel.Socket, SocketOptionName.ReuseAddress, true);
    socket.Bind(new IPEndPoint(IPAddress.Any, 987));
    socket.ConnectAsync(socketEventArg);
}

void socketEventArg_Completed(Object sender, SocketAsyncEventArgs e)
{
    Boolean b = true;
} 
```

.NET 版本永远不会遇到“Boolean b = true”断点，而 C++ WinSocks 每次都会在一秒钟左右报告有一个设备。我什至尝试将 .NET 版本的端口中的字节顺序反转为 56067，但它也不起作用。我错过了什么？看起来 .NET 不接受 0.0.0.0 的远程端点...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:59:49.587

这解决了这个问题：

```
Form1()
{
    UdpClient client = new UdpClient(987);
    client.BeginReceive(UDPClient_Callback, client);
}

void UDPClient_Callback(IAsyncResult result)
{

} 
```

感谢各位看官！

# php - 重定向后需要将发布数据传递到新页面（使用 iFrames）

> ID：16113528
> 
> 赞同：0
> 
> 时间：2013-04-19T21:09:20.263
> 
> 标签：php, ajax, redirect

我现在有点棘手，因为我的客户坚持保留 iframe 功能，现在想要一个页面，在提交信息后，在提交之前查看和查看所述信息，如果不正确，返回并重新提交更改.

基本上，在您感到困惑之前，我只想使用 iframe 外部的按钮来使用表单的操作和发布方法....

我在 iframe 外部使用 Codiqa 的按钮来定位内部框架的 js 函数，所以当我调用此审查函数时，它会重定向到页面，但是，新页面不会显示我似乎通过 Ajax 传递给它的信息。有人可以告诉我为什么它不起作用吗？HTML 和所有内容都无关紧要，因为我只是将输入 ID 传递给 ajax 数据（eID 收集并遍历 html 输入 ID），这完全需要我可能缺少的特殊 JS 函数。当按下 Codiqa 按钮时，它正在调用 JS 中的“reviewdata()”函数：

JS

```
//UPLOAD DATA
//Global variables
var extractform = {
    'cable_no' : "",
    'section_no' : "",
    'extract_ft' : "",
    'cable_status' : "",
    'conduit_status' : "",
    'extract_date' : "",
    'extraction_team' : ""
}

function reviewdata() { 

//Read all of the data from the page
for (eID in extractform) {
    extractform[eID] = document.getElementById(eID).value;
}
        review_extractform();
}
function review_extractform() {
$.ajax({
    type: 'POST',
    url: './php/review.php',
    data: extractform,
    async: false,
    dataType: 'text',
    success: function() {
    },
    complete: function() {
        window.location.assign("./extraction/php/review.php?");
    }
});
}; 
```

**然后 AJAX 传递到这个页面，这是重定向页面**

PHP

```
//Assign passed parameters
$cable_no = $_POST['cable_no'];
$section_no = $_POST['section_no'];
$extract_ft = $_POST['extract_ft'];
$cable_status = $_POST['cable_status'];
$conduit_status = $_POST['conduit_status'];
$extract_date = $_POST['extract_date'];
$extraction_team = $_POST['extraction_team'];
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<title>Sample Title</title>
</head>

<body>
<table align="center" width="100%">
    <tr>
        <th>Cable Type</th>
        <th>Section Number</th>
        <th>Extracted Footage</th>
        <th>Cable Status</th>
        <th>Conduit Status</th>
        <th>Extract Date</th>
        <th>Extraction Team</th>
    </tr>
    <tr style="text-align:center;">
        <td><?php echo $cable_no; ?></td>
        <td><?php echo $section_no; ?></td>
        <td><?php echo $extract_ft; ?></td>
        <td><?php echo $cable_status; ?></td>
        <td><?php echo $conduit_status; ?></td>
        <td><?php echo $extract_date; ?></td>
        <td><?php echo $extraction_team; ?></td>
    </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:39:47.690

我不确定 AJAX 方面，也不确定您要做什么。

在第二个代码部分，您正在创建新的 php 变量`$cable_no = $_POST['cable_no'];`，如果帖子来自表单操作的前一页，则该变量应该用于分配值。

我总是用相同的名称和 id 命名表单的每个字段（我忘记了它使用哪个字段），即：

```
Name: <input type="text" name="name" id="name"> 
```

如果您甚至需要为不同的页面保存值并刷新，您可能希望使用 cookie 或会话（cookie），cookie 将信息存储在用户机器上，会话 cookie 使用令牌并将数据存储在服务器上。（我认为会话 cookie 的默认时间也为 90 分钟）。

此外，您可能想发布您的实际表单页面。它可能有助于解决问题。我没有 JSON 位或将 jquery(ajax) 与 php 结合起来的必要知识。

补充说明：您还应该使用 HTML5 doctype 开始转换到 HTML5 `<!DOCTYPE html>`（这更容易记住）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T06:00:15.053

我确信这将是使用 ajax 的更快解决方案。只需将您的 $_POST 更改为 $_GET

```
function review_extractform() {
    var url = "./extraction/php/review.php?";
    //var queryString = extractform.join();
    var queryString = $('iframe_id').serialize();
    document.getElementId('iframe_id').src = url  + queryString;
} 
```

编辑：添加 .serialize()

# android - Android，正确使用 HTMLCleaner

> ID：16113530
> 
> 赞同：1
> 
> 时间：2013-04-19T21:09:24.547
> 
> 标签：android, html-parsing, htmlcleaner

我知道我们基本上应该尝试在这里做我们自己的事情，这不是提出请求的地方，但我真的很讨厌不得不从 Html 阅读东西，我真的不明白它的方式。

所以，我将奖励 150 分（不是说我很便宜，我只是不能做更多:(）如果我能得到一些好的帮助，或者至少用一些示例代码指出正确的方向.

**我想完成什么？**

*   我正在尝试从以下[美国国家航空航天局页面](http://www.nasa.gov/mission_pages/station/main/index.html)获取最新消息。
*   我打算在 ListView 上显示这条新闻，当然，ListView 一开始显示的内容很少，只有通过上面的页面可以获得的数据，这里有一个快速[模型](https://dl.dropboxusercontent.com/u/19146514/article_view.png)。

就是这样，当用户单击一个链接时，他们将被带到显示完整[文章](https://www.dropbox.com/s/ofgumdsihpfi5vo/article_view.png)的另一个片段，我会在以后弄清楚如何得到它，一旦我能完成这个。

因此，我尝试使用带有以下位的 HtmlCleaner：

```
private class CleanUrlTask extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {
        try {
            //try cleaning the nasa page. 
            mNode = mCleaner.clean(mUrl);
        } catch (Exception e) {
            Constants.logMessage("Error cleaning file" + e.toString());
        }
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {         
        try {
            //For now I am just writing to an xml file to sort of read through
            //God is HTML code ugly. 
            new PrettyXmlSerializer(mProps).writeToFile(
                    mNode, FILE_NAME, "utf-8"
                );
        } catch (Exception e) {
            Constants.logMessage("Error writing to file: " + e.toString());
        }
    }       
} 
```

但从那里开始，我几乎迷路了。这是[XML输出](https://dl.dropboxusercontent.com/u/19146514/Spot%20The%20Station/Design%20Shots/mystuff.xml)顺便说一句。[然而，我确实注意到每篇文章内容的某些标签层次结构](https://dl.dropboxusercontent.com/u/19146514/article_list_class_names.png)上存在某种重复，它似乎是这样的：**左用于图像和文章链接**，**右用于文章标题和预览内容**

![类名层次结构](https://i.stack.imgur.com/iAgSN.png)

因此，如果有人愿意帮助我弄清楚如何以某种方式获取内容，我将不胜感激。

顺便说一句，这个项目是为了教育目的，作为 2013 年 NASA 国际空间应用挑战赛的一部分，更多信息[在这里](http://spaceappschallenge.org/)。

作为奖励问题，相同的链接包含当前、未来和过去探险的信息，包括当前成员，对于探险的每个成员，都有一个指向他们的简历页面的链接。

这些标签似乎不是重复的，但名称似乎是预设的和不变的，你有“tab1”、“tab2”和“tab3”，等等。

我想从中获得的是：

*   远征号和日期。
*   探险队成员
*   链接到每个成员的生物。

再次感谢您的支持，如果有的话，我真的很感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T00:43:05.490

所以显然我需要做的就是弄清楚如何使用[XPATH](http://www.w3schools.com/XPath/default.asp)从 XML 输出中获取数据。

所以基本上，XPATH 的想法是您可以使用 XML 获取任何节点，在我的例子中，如上图所示，我想要获取非常具体的信息。

这是文章链接的 XPATH：

```
public static final String XPATH_ARTICLE_LINKS = 
"//div[@class='landing-slide']/div[@class='landing-slide-inner']/div[@class='fpss-img_holder_div_landing']/div[@id='fpss-img-div_466']/a/@href"; 
```

Where`//div[@class='landing-slide']`意味着我正在寻找类名是**landing-slide的任何****div ，***而不管*它们在文档中的位置（'//' 声明）。从那里开始，我只是进一步进入项目的层次结构，最终获得属性的值（属性通过**'@'**字符指向）。 ***`href`***

 *****现在我们有了 XPATH，我们只需要将这个值传递给 HTML 清理器。我正在通过 a 执行此`AsyncTask`操作，请记住，这不是最终代码，但它肯定会得到我想要的信息。

首先，使用的 XPATH：

```
private class News {
    static final String XPATH_ARTICLE_LINKS = 
            "//div[@class='landing-slide']/div[@class='landing-slide-inner']/div[@class='fpss-img_holder_div_landing']/div[@id='fpss-img-div_466']/a/@href";
    static final String XPATH_ARTICLE_IMAGES = 
            "//div[@class='landing-slide']/div[@class='landing-slide-inner']/div[@class='fpss-img_holder_div_landing']/div[@id='fpss-img-div_466']/a/img/@src";
    static final String XPATH_ARTICLE_HEADERS = 
            "//div[@class='landing-slide']/div[@class='landing-slide-inner']/div[@class='landing-fpss-introtext']/div[@class='landing-slidetext']/h1/a";
    static final String XPATH_ARTICLE_DESCRIPTIONS = 
            "//div[@class='landing-slide']/div[@class='landing-slide-inner']/div[@class='landing-fpss-introtext']/div[@class='landing-slidetext']/p";                       
} 
```

现在对于 AsyncTask：

```
private class CleanUrlTask extends AsyncTask<Void, Void, Void> {

    @Override
    protected Void doInBackground(Void... params) {
        try {
            //try cleaning the nasa page. (Root Node) 
            mNode = mCleaner.clean(mUrl);

            //Get all of the article links
            Object[] mArticles = mNode.evaluateXPath(News.XPATH_ARTICLE_LINKS);
            //Get all of the image links
            Object[] mImages = mNode.evaluateXPath(News.XPATH_ARTICLE_IMAGES);
            //Get all of the Article Titles
            Object[] mTitles = mNode.evaluateXPath(News.XPATH_ARTICLE_HEADERS);
            //Get all of the Article Descriptions
            Object[] mDescriptions = mNode.evaluateXPath(News.XPATH_ARTICLE_DESCRIPTIONS);

            Constants.logMessage("Found : " + mArticles.length + " articles");
            //Value containers
            String link, image, title, description;

            for (int i = 0; i < mArticles.length; i++) {
                //The Nasa Page returns link that are often not fully qualified URL, so I need to append the prefix if needed. 
                link = mArticles[i].toString().startsWith(FULL_HTML_PREFIX)? mArticles[i].toString() : NASA_PREFIX + mArticles[i].toString();
                image = mImages[i].toString().startsWith(FULL_HTML_PREFIX)? mImages[i].toString() : NASA_PREFIX + mImages[i].toString();
                //On the previous two items we were getting the attribute value
                //Here, we actually need the text inside the actual element, and so we want to cast the object to a TagNode
                //The TagNode allows to extract the Text for the supplied element. 
                title = ((TagNode)mTitles[i]).getText().toString();
                description = ((TagNode)mDescriptions[i]).getText().toString();
                //Only log the values for now. 
                Constants.logMessage("Link to article is " + link);
                Constants.logMessage("Image from article is " + image);
                Constants.logMessage("Title of article is " + title);
                Constants.logMessage("Description of article is " + description);

            }
        } catch (Exception e) {
            Constants.logMessage("Error cleaning file" + e.toString());
        }
        return null;
    } 
```

万一有人像我一样迷路了，我希望这可以为您指明道路。*****

# hadoop - 在 Windows 7 和 hortonworks 沙箱上安装/配置 RevolutionAnalytics/RHadoop

> ID：16113533
> 
> 赞同：1
> 
> 时间：2013-04-19T21:09:49.563
> 
> 标签：hadoop, rhadoop

我已经为 Hadoop 安装了 VMware Player 和 Hortonworks Sandbox。现在我需要帮助来配置/运行 RHadoop。我需要使用 R 和 Hadoop。请帮助。在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T01:59:09.690

您需要的一切都在 RHadoop wiki[中](https://github.com/RevolutionAnalytics/RHadoop/wiki/Downloads)

为了更深入地了解这种集成，我建议您在[此处查看](http://www.revolutionanalytics.com/news-events/free-webinars/2011/r-and-hadoop/)**Revolution Analytics**网站上的**RHadoop**网络研讨会

 **有关如何安装它的快速指南，请先在[此处查看](http://blog.cloudera.com/blog/2013/02/how-to-resample-from-a-large-data-set-in-parallel-with-r-on-hadoop/)**Cloudera** 的精彩博客文章，然后按照[此处的指南进行操作](https://github.com/cloudera/poisson_sampling/blob/master/INSTALL.md)

本指南侧重于 CentOS 上的 Cloudera Hadoop 发行版，但您可以轻松地将其调整为与**Hortorworks Sandbox**一起使用。**

# wordpress - WordPress 小部件链接中的自定义数据属性

> ID：16113535
> 
> 赞同：1
> 
> 时间：2013-04-19T21:09:59.497
> 
> 标签：wordpress, jquery-mobile

我正在使用 WordPress 和 jQuery Mobile 构建一个移动网站。

我想创建一个在用户点击按钮时出现的自定义小部件区域。

我希望小部件区域中包含的链接看起来像 JQM 按钮。为此，我应该将属性 data-role="button" 添加到小部件中的 'a' 元素。

有没有办法从functions.php向这些'a'元素添加自定义属性？

默认情况下，这是小部件中链接的代码：

```
<h3 class="widget-title">Categories</h3>
  <ul>
    <li class="cat-item cat-item-646">
      <a title="Some title" href="http://example.com/category/">Category</a>
    </li>
    ... 
```

我需要在“a”元素中添加一个数据角色属性：

```
<a title="Some title" href="http://example.com/category/" data-role="button">Category</a> 
```

我想知道WP API是否提供了一个过滤器来从functions.php中做到这一点，或者是否可以通过某种方式使用PHP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T05:55:22.370

最后我找到了我的问题的答案：如何从functions.php向WP菜单项添加自定义数据属性。

可以操作 WordPress 菜单（而不仅仅是菜单）的标记。WP提供了Walker类，可以在functions.php中扩展。

我这里不复写代码，但是对 WP 菜单构建感兴趣的可以从这里获取：

[http://www.kriesi.at/archives/improve-your-wordpress-navigation-menu-output](http://www.kriesi.at/archives/improve-your-wordpress-navigation-menu-output)

来自 WP stackexchange 的其他有用资源如下：

[https://wordpress.stackexchange.com/questions/14037/menu-items-description-custom-walker-for-wp-nav-menu/](https://wordpress.stackexchange.com/questions/14037/menu-items-description-custom-walker-for-wp-nav-menu/)

[https://wordpress.stackexchange.com/questions/19245/any-docs-for-wp-nav-menus-items-wrap-argument/](https://wordpress.stackexchange.com/questions/19245/any-docs-for-wp-nav-menus-items-wrap-argument/)

[https://wordpress.stackexchange.com/questions/64515/fall-back-for-main-menu/](https://wordpress.stackexchange.com/questions/64515/fall-back-for-main-menu/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T16:06:23.353

要过滤链接并添加`data-role=button`到它们，请使用以下代码。

```
$('li.cat-item').find('a').each(function () {
 $(this).attr('data-role', 'button');
}); 
```

哪里`.cat-item`是一类列表项。

# fpdf - 为 fpdf 文件添加复选标记

> ID：16113537
> 
> 赞同：1
> 
> 时间：2013-04-19T21:10:04.400
> 
> 标签：fpdf

我正在从数据库中检索数据并使用 fpdf 显示它。我有一个值为 0 或 1 的数据。如果是一个，我想显示一个复选标记。有没有办法输出复选标记？

我将不胜感激任何建议。

这是我尝试过但没有奏效的方法。它实际上将图像存储在文件夹中，而不是显示它：

```
 $im = imagecreate( 200, 80 );

 $pdf->Cell(20,7, imagejpeg($im,"checkmark.jpg")); 
```

# c - 如何正确确定我的客户端是否仍使用 C 套接字连接到服务器？

> ID：16113539
> 
> 赞同：0
> 
> 时间：2013-04-19T21:10:07.283
> 
> 标签：c, sockets, tcp, network-programming

我有一个客户端通过 C Berkeley 套接字连接到服务器。我（尝试）通过使用 MSG_DONTWAIT 和 MSG_PEEK 在套接字上调用 recv() 定期检查连接是否仍然有效。但是，我发现在某些情况下连接断开（例如，在连接的接口关闭之后）和根本没有数据可读取时，此调用都会返回 EAGAIN。因此，我无法使用此方法区分连接是否仍然有效。

这是我的功能：

```
/* return 1 if still connected, 0 otherwise */ 
int still_connected()
{
    int nbytes_recvd = 0;
    char buf[2];
    int err;

    nbytes_recvd = recv(fd,buf,sizeof(buf),MSG_PEEK|MSG_DONTWAIT);
    err = errno;

    if ( nbytes_recvd == 0 )
    {
        return 0;
    }
    else if ( nbytes_recvd < 0 )
    {
       if ( (err == ENOTSOCK) ||
            (err == ENOTCONN) ||
            (err == EINVAL) ||
            (err == ECONNREFUSED) ||
            (err == EBADF) ||
            (err == EOPNOTSUPP) )
       {
          return -1;
       }
    }

    /* nbytes_recvd > 0 or EAGAIN or EWOULDBLOCK */
    /* but I get EAGAIN even if the connection is down because I shut down the    interface */ 
    return 1;
} 
```

如何准确检查连接是否仍然有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:10:38.283

从 TCP 连接的两个端点之一的角度来看，已经消失的对等点与仍然存在但根本不发送任何数据的对等点之间没有区别。您无法使用`recv()`或使用任何其他方法来区分这些情况。

检测对等点是否已关闭、已重置、已消失或无法访问的唯一方法是发送一些数据并查看会发生什么。有两种选择：

*   启用 TCP 保持连接 ( `SO_KEEPALIVE`)。这将导致 TCP 不时发送一个 keepalive 数据包，并期望`ACK`来自对等方的数据包。如果对等方失败`ACK`，那么您可以得知连接已断开。
*   按照您选择的时间表发送一些实际的应用程序数据（或应用程序级别的保活消息）。类似地，如果对端未能响应此数据（或发送后收到套接字错误），则可以得知连接已断开。

# ios - iOS中10位电话号码的正则表达式

> ID：16113541
> 
> 赞同：0
> 
> 时间：2013-04-19T21:10:10.737
> 
> 标签：ios, objective-c, regex, nsregularexpression

我正在尝试编写一个正则表达式来匹配一个没有任何其他字符的 10 位数字。例如。2345678901

第一个数字应该在 2-9 之间，其余 9 个数字可以是任何数字

我尝试过编写不同的正则表达式，但没有一个奏效。

NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];

```
//^([0-9]+)?(([0-9]{9})?)?$     (([2-9]{1})?)?(([0-9]{8,9})?)?
NSString *expression = [NSString stringWithFormat:@"^(([2-9]{1})?)?(([0-9]{8,9})?)?$"];

NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:expression
                                                                       options:NSRegularExpressionCaseInsensitive
                                                                         error:nil];
NSUInteger numberOfMatches = [regex numberOfMatchesInString:newString
                                                    options:0
                                                      range:NSMakeRange(0, [newString length])];
if (numberOfMatches == 0) {
    return NO;
}

return YES; 
```

`

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:12:12.370

一个非常简单的正则表达式来匹配您需要的内容是

```
^[2-9][0-9]{9}$ 
```

它匹配 2..9 范围内的第一个数字，以及 0..9 范围内的其他九个数字，总共十个数字。

请注意，此表达式适用于验证整个字符串，而不是部分字符串。您不能使用它`textField:shouldChangeCharactersInRange:replacementString:`来验证可用的数字。

无论如何在输入时验证输入的格式并不是一个好主意，因为用户可以通过在键入之前将光标移动到正确的位置来选择以任何顺序输入电话的数字。相反，您应该将 to 的属性设置为`keyboardType`，并让用户输入任意数量的数字。在他们告诉你他们完成之前不要限制他们的输入：他们可能想从记事本粘贴数据，然后擦除分隔符，或者在删除前面的部分之前在末尾输入一些额外的数字的输入。`UITextField``UIKeyboardTypeDecimalPad`

相反，您应该在方法中使用上述表达式`textFieldShouldEndEditing:`。当正则表达式匹配时，返回`YES`；否则，返回`NO`，并给用户一些视觉反馈，表明该数字需要更改。阅读文档中该`textFieldShouldEndEditing:`方法的讨论部分。`UITextFieldDelegate`

# android - Eclipse 中的“窗口 > Android SDK 和 AVD 管理器”未显示

> ID：16113542
> 
> 赞同：0
> 
> 时间：2013-04-19T21:10:21.537
> 
> 标签：android, eclipse, sdk, ubuntu-12.04, avd

我正在使用 Ubuntu 10.04 LTS，我正在尝试安装开发所需的位。我已将 SDK 下载并解压缩到我的主目录，并安装了 Eclipse。我在首选项中设置了 SDK 路径，安装了 ADT 插件。

由于某种原因，菜单选项不显示。

它不会让我发布图像。所以[这里](https://android.stackexchange.com/questions/43961/window-android-sdk-and-avd-manager-in-eclipse-not-showing?noredirect=1#comment59348_43961)有一个 android 爱好者页面的链接（他们告诉我在这里发帖）有截图

# objective-c - 删除 leftBarButtonItem 背景

> ID：16113546
> 
> 赞同：2
> 
> 时间：2013-04-19T21:10:33.410
> 
> 标签：objective-c

如何删除 leftBarButtonItem 蓝色背景？我试过`style:UIBarButtonItemStylePlain`但没有结果。

代码：

```
self.navigationItem.leftBarButtonItem = [[UIBarButtonItem alloc] initWithImage:[UIImage imageNamed:@"icon_home"] style:UIBarButtonItemStylePlain target:self.navigationController action:@selector(openMenu) ]; 
```

![在此处输入图像描述](https://i.stack.imgur.com/7F1yp.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-22T05:03:59.400

```
 UIButton *tempButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [tempButton setFrame:CGRectMake(2, 1, 34, 34)]; // your Home Button Image width and height.
    [tempButton addTarget:self action:@selector(btnBackClicked:) forControlEvents:UIControlEventTouchUpInside];
    [tempButton setImage:[UIImage imageNamed:@"icon_home.png"] forState:UIControlStateNormal];
    [tempButton setImage:[UIImage imageNamed:@"icon_home_h.png"] forState:UIControlStateHighlighted];
    [self.navigationItem setLeftBarButtonItem:[[UIBarButtonItem alloc] initWithCustomView:tempButton]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:05:22.730

在您的情况下`UINavigationController`，在管理它的 navigationBar 和它时，它会做一些额外的样式`UIBarButtonItems`。因此，将样式设置为 plain 与使用`UIToolbar`.

您需要的是自定义视图，例如...

```
UIImage *image = [UIImage imageNamed:@"icon_home"];
UIImageView *imageView = [[UIImageView alloc] initWithImage:image];
UIBarButtonItem *barButtonItem = [[UIBarButtonItem alloc] initWithCustomView:imageView];
barButtonItem.target = self;
barButtonItem.action = @selector(openMenu);
self.navigationItem.leftBarButtonItem = barButtonItem; 
```

此外，您可能希望`target`设置为`self`not `self.navigationController`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-23T02:59:59.340

如果您只关心 iOS 5+，还有另一种不涉及自定义视图的方法。随着 UIAppearance 添加，您可以使用

```
UIImage * emptyImage() {
    UIGraphicsBeginImageContext(CGSizeMake(1, 1));
    UIImage * emptyImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return emptyImage;
}

UIBarButtonItem * item = [[UIBarButtonItem alloc] initWith...];
[item setBackgroundImage:emptyImage() forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
self.navigationItem.leftBarButtonItem = item; 
```

如果这是一个应用程序范围的风格，那就做

```
[[UIBarButtonItem appearance] setBackgroundImage:emptyImage() forState:UIControlStateNormal barMetrics:UIBarMetricsDefault]; 
```

一旦在您的 AppDelegate 中，您甚至不需要对单个实例大惊小怪。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T17:07:10.717

```
UIButton *btn= [UIButton buttonWithType:UIButtonTypeCustom];
[btn setFrame:CGRectMake(0,0,30, 40)];    
[btn setImage:[UIImage imageNamed:@"icon_home.png"] forState:UIControlStateNormal];
[self.navigationItem setLeftBarButtonItem:[[UIBarButtonItem alloc] initWithCustomView:btn]]; 
```

这将工作请尝试....

# mysql - Wrong result using sum at MySQL

> ID：16113547
> 
> 赞同：0
> 
> 时间：2013-04-19T21:10:33.497
> 
> 标签：mysql, sum

I have a view with a lot of data. I can got this results using subqueries (data that is ok and optimized):

```
+------------+
| attendance |
+------------+
|        319 |
|        102 |
|        598 |
|        113 |
|          6 |
|        279 |
|        366 |
|        146 |
|        669 |
|        205 |
|        123 |
+------------+ 
```

The next time some user update data, it shows this:

```
+------------+
| attendance |
+------------+
|        319 |
|        102 |
|        598 |
|        113 |
|          7 |
|        279 |
|        253 |
|        146 |
|        669 |
|        561 |
|        123 |
+------------+ 
```

Which is ok, 'cause the user that update the information was the one that before has 6 as attendance.

But the problem comes when I use that data as a temptable and then I make:

```
 SELECT SUM(attendance) AS total FROM ( /* Subquery returning the above table */) 
```

cause it returns (in the first place with one user having 6 as attendance):

```
+-------+
| total |
+-------+
|  3169 |
+-------+ 
```

And with 7:

```
+-------+
| total |
+-------+
|  3128 |
+-------+ 
```

When it should be 3170!!!

Ideas?

**EDIT 1:** Pasting the full query.

```
SELECT SUM(att_member) AS total
FROM
    (SELECT attendance AS att_member
     FROM
         (SELECT id_branch_channel, id_member, attendance, TIMESTAMP, id_event
          FROM view_event_attendance
          WHERE id_event = 782
          ORDER BY TIMESTAMP DESC) AS temptable
     GROUP BY 
              id_member) AS total_attendance_temp 
```

**EDIT 2**: Pasting the query help I got from here

[Select only last value using group by at mysql](https://stackoverflow.com/questions/15421616/select-only-last-value-using-group-by-at-mysql)

Here is the schema of the view.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:30:18.667

让我们剖析查询，好吗？

我假设 view_event_attendance 对参加活动的每个与会者（成员）都有一个记录。id_event 是该事件的 FK， id_member 是与会者的 FK。您的内部选择为您提供了参加活动 #782 的所有成员的有序列表

```
SELECT id_branch_channel, id_member, attendance, TIMESTAMP, id_event
FROM view_event_attendance
WHERE id_event = 782
ORDER BY TIMESTAMP DESC 
```

到目前为止，太棒了。现在将此查询包装在另一个查询中：

```
SELECT attendance AS att_member
FROM (subquery)
GROUP BY id_member 
```

在大多数 SQL dialetcs 中，这只是一个语法错误。MySQL 允许这样做，但结果可能不是您想要的。您将获得参加所述活动的每个 id_member 的*出席*列。您实际上可能期望的是出席人数的总和，但我在您的问题中没有这么说。在任何情况下，每个选定的字段都应该在您的`GROUP BY`子句中或使用聚合函数，例如

```
SELECT SUM(attendance) AS att_member
FROM (subquery)
GROUP BY id_member 
```

或者

```
SELECT attendance AS att_member
FROM (subquery)
GROUP BY id_member, attendance 
```

话虽如此，我认为没有必要首先使用子查询。假设您想获得上述 SUM，您可以将其重新表述为单个 SQL 查询：

```
SELECT SUM(attendance) AS att_member
FROM view_event_attendance
WHERE id_event = 782
GROUP BY id_member 
```

如果你想要总数，你可以简单地省略`GROUP BY`子句，留下这个：

```
SELECT SUM(attendance) AS att_member
FROM view_event_attendance
WHERE id_event = 782 
```

如果这不能按预期工作，请更详细地描述您实际存储在 view_event_attendance 中的内容，以及您希望第二个查询计算的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:40:09.117

正如@EdGibbs 注意到的那样，子查询返回了错误的结果（我没有注意到）。因此，我再次阅读了我的代码以及[我参考的另一个问题的答案，](https://stackoverflow.com/questions/15421616/select-only-last-value-using-group-by-at-mysql)并且现在通过执行以下操作可以正常工作：

```
SELECT SUM(att_member) AS total
FROM
    (SELECT attendance AS att_member
     FROM
         (SELECT 
            id_branch_channel, 
            id_member, 
            substring(max(concat(from_unixtime(timestamp),attendance)) from 20) as attendance, 
            timestamp, 
            id_event
          FROM view_event_attendance
          WHERE id_event = 782
          GROUP BY id_event, id_member
          ORDER BY timestamp DESC) AS temptable
     ) AS total_attendance_temp 
```

我做的唯一改变是：

*   使用：substring(max(concat(from_unixtime(timestamp),attendance)) from 20) 作为出勤，而不是仅仅出勤。
*   在第一个子查询中移动组。

所以问题不在于 MySQL 的 SUM 函数，而在于我的查询。

感谢大家花时间帮助我解决这个问题。你的建议帮助我得到答案。

# c++ - C++ const static member array initialization

> ID：16113551
> 
> 赞同：1
> 
> 时间：2013-04-19T21:11:00.530
> 
> 标签：c++, arrays, static, constants

I have class Foo with a member variable bar which is a very big array of dynamic_bitset. I would like to make variable bar static for the sake of memory, I would also like it to be const. The value of bar is stored in a predefined file. Where should I put the code for reading the file and initializing bar?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:05:54.963

MadScienceDreams 的解决方案可能会起作用，但您可以更简单地做到这一点：

# 在标题中

```
class A
{
     static const vector<dynamic_bitset> s;
public:
     // ...
}; 
```

# 在实现文件中

```
vector<dynamic_bitset> LoadBitsets()
{
    //...
    return something;
}

const vector<dynamic_bitset> A::s(LoadBitsets()); 
```

应该自动使用移动构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:41:50.327

我只想从这开始可能是个坏主意，但这就是你在 C++ 中做静态东西的方式：

```
//A.h
class A
{
private:
    static inline const char* Ptr();
    class static_A
    {
    private:
        char* m_ptr;
        char* AllocateAndReadFile();//SUPER UNSAFE AND BAD CODE (Make sure it is SUPER hidden from end users, put warning comments all over the place
    public:
        static_A();
        ~static_A();
        friend const char* A::Ptr(void);
    };
    static static_A a_init;

public:
    A();
};
//i'd probably put this indirection function here, in definition so its inlined
inline const char* A::Ptr()
{
    return a_init.m_ptr;
}

//A.cpp
A::static_A A::a_init = A::static_A();

A::static_A::static_A() : m_ptr(AllocateAndReadFile())
{
}
A::static_A::~static_A()
{
    delete [] m_ptr;
}
char* A::static_A::AllocateAndReadFile()
{
    char* foo = new char[1000000];
    memset(foo,0,sizeof(char)*1000000);
    //put your read function here...note that because read must be static, 
    //the file location must be hard coded, so I don't like this solution at all
    FILE* fid = fopen("C:/stuff.txt","r");
    size_t readchars = fread(foo,sizeof(char),1000000,fid);
    return foo;
}

A::A()
{
    char buff[100];
    memcpy(buff,Ptr(),99);
    printf(buff);
} 
```

您还可以使 a_init 成为一个不透明的指针，并将 A::static_A 的整个定义放在`A.cpp`... 在这种情况下可能会更好。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-19T21:50:32.410

是不可能的。

`const`关键字是在编译时设置的值，但是你想从文件中读取是运行时操作，所以不可能。

定义`bar`为 static bot 而不是 const，注意不要更改它。

# javascript - model.save 设置 url 并在成功时进行回调

> ID：16113553
> 
> 赞同：0
> 
> 时间：2013-04-19T21:11:16.020
> 
> 标签：javascript, backbone.js, model, callback

我正在尝试使这种方法起作用：

```
that.model.save(null,  // I'm calling that.model because this is nested in another method
{
   url: 'some url',

    success: function(model, response) {
        // update stuff
    }, 
    error: function(model, response) {
        // throw error. 
    }
}); 
```

但由于某种原因，它没有调用成功方法或错误方法。评论在哪里我正在调用方法...我不想深入了解我正在调用的所有方法的细节。save 方法也有效，它只是不调用这些方法的食者。

另外，如果我尝试调用我已经做过的方法，例如：

```
success: that.somemethod() 
```

javascript 抛出：未捕获的类型错误：非法调用

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T05:19:14.810

该方法看起来不错，因为它使用与 Backbone 描述的相同的参数：

```
model.save([attributes], [options]) 
```

最可能的情况是您的成功/错误处理程序被原型链上的某个地方覆盖，而不是调用您的处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-21T06:58:03.477

首先，您必须绑定实例方法，然后将其分配给成功

```
that.model.save(null,  // I'm calling that.model because this is nested in another method
{
    url: 'some url',

    success: _.bind(that.mySuccessMethod, that), 
    error:   _.bind(that.myErrorMethod, that)
}); 
```

# c# - 为什么 PowerShell ISE 会挂在这个 C# 程序上？

> ID：16113555
> 
> 赞同：5
> 
> 时间：2013-04-19T21:11:27.507
> 
> 标签：c#, powershell, freeze, powershell-ise

如果我将此 c# 代码编译为 EXE 文件并在 Windows 命令外壳中运行，它运行良好：输出提示，在同一行等待某些用户输入，然后输入，回显该输入。在 PowerShell v3 shell 中运行它也运行良好。但是，如果我在 PowerShell ISE V3 中运行相同的 EXE 文件，它永远不会发出输出，`Write`并且会挂在`ReadLine`. `Write`（顺便说一句，如果后面跟着一个. ，它将发出输出`WriteLine`。）

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            System.Console.Write("invisible prompt: ");
            var s = System.Console.ReadLine();
            System.Console.WriteLine("echo " + s);
        }
    }
} 
```

这是一个 ISE 错误还是有一些属性需要调整以使其工作......？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T23:26:50.200

ISE 不支持`console`该类。

> *   不支持 [Console] 类，尝试 [console]::BackgroundColor = 'white'。
>     *   通常，脚本应该使用主机 API（write-host，而不是 [Console] 类，以便它们在控制台、ISE、Remoting 和其他 shell 中工作。

参考：http: [//blogs.msdn.com/b/powershell/archive/2009/04/17/differences-between-the-ise-and-powershell-console.aspx](http://blogs.msdn.com/b/powershell/archive/2009/04/17/differences-between-the-ise-and-powershell-console.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-19T17:14:04.970

作为一种解决方法，在 powershell ise 中，而不是调用`.\ConsoleApplication1.exe`call`start .\ConsoleApplication1.exe` 这将在新的命令提示符中启动应用程序，该命令提示符将接受来自标准输入的输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T05:31:39.983

Powershell read-host 将从控制台读取。您可以从 C# 中执行读取主机。从 C# 执行 PS 命令记录在 MSDN 有关 Powershell 托管的部分中。下面演示了使用 Powershell 脚本调用的方法 - 应该很容易转换为 C#。请注意，$host 必须传递到 C# 程序中。因此，您必须在 ISE 中将 C# 程序作为程序集加载并调用 Main()，例如：[myclass]::Main($host)（而不是将 EXE 作为独立程序调用）

```
[powershell]::create().AddScript('param($ho) $ho.ui.readline()').AddArgument($host).Invoke() 
```

# javascript - How can I toggle a class inside a button on click?

> ID：16113556
> 
> 赞同：1
> 
> 时间：2013-04-19T21:11:27.903
> 
> 标签：javascript, jquery, twitter-bootstrap, toggle

What's the proper way to toggle a couple classes on click in jQuery?

1) HTML before click:

```
<button class="btn"><i class="icon-sign-blank"></i> Click me!</button> 
```

2) HTML after click:

```
<button class="btn btn-success"><i class="icon-check"></i> Clicked!</button> 
```

3) HTML after another click: (same as beginning)

```
<button class="btn"><i class="icon-sign-blank"></i> Click me!</button> 
```

Current jQuery:

```
$('btn').on('click',function(e) {
    $('btn > i').removeClass('icon-sign-blank').addClass('icon-check');
    $('btn').addClass('btn-success');
}); 
```

But this works once, but not back again. What's the proper way to handle both directions?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T21:13:43.513

您可以 - 应该 - 使用 toggleClass 来管理它！

```
$('btn').on('click',function(e) {
    $('btn > i').toggleClass('icon-sign-blank icon-check');
    $(this).toggleClass('btn-success');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:13:05.637

jQuery 的[toggleClass](http://api.jquery.com/toggleClass/)函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:13:34.717

...并且不使用`toggleClass`（如果您不想使用 jQuery，也可以不使用 jQuery 来完成）

```
var btnEl = $('btn');
btnEl.on('click', function() {
    if (btnEl.hasClass('icon-sign-blank')) btnEl.removeClass('icon-sign-blank');
    else btnEl.addClass('icon-sign-blank');
}); 
```

# assembly - 8086 TASM: Illegal Indexing Mode

> ID：16113561
> 
> 赞同：4
> 
> 时间：2013-04-19T21:12:02.930
> 
> 标签：assembly, x86, x86-16, tasm

I am writing an 8086 assembly program that needs to compile through TASM v3.1\. I am running into an error I can not seem to fix.

My data segment has the following set up for the purposes of keyboard input:

```
paraO Label Byte
  maxO DB 5
  actO DB ?
  dataO DB 5 dup('$') 
```

What I am trying to do is get the first character entered, so the first byte of dataO:

```
lea dx, dataO
mov bl, [dx] 
```

However, when I attempt to compile, I get this error:

```
**Error** h5.asm(152) Illegal indexing mode 
```

Line 152 is "mov bl, [dx]"

Any help would be greatly appreciated. If it matters, I am running TASM through DOSBox (My laptop is running 64-bit Win7) Google hasn't come up with any helpful answers. I can post the entirety of my code if necessary.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T21:33:24.760

很确定原因是您不能将 DX 寄存器用作指针。

尝试使用 [si]、[di] 或 [bx]：

```
 lea bx, data0
 mov al, [bx] 
```

# html - Get a div to with background to stretch to the bottom of the parent div

> ID：16113568
> 
> 赞同：2
> 
> 时间：2013-04-19T21:12:30.253
> 
> 标签：html, css

I have two divs inside another div--one with a background color, the other with just white.

I keep trying to figure out out to be able to get both of them to stretch to the bottom of the outer div, depending on whichever on is longest, without leaving a white space on the left div or cutting off the background or content on one of them. I always end up cutting off the left div.

In the project both divs are dynamic and can be anywhere from empty to really long. I would like to show a solid color to the bottom of the page on the left side when the menu is longer than the content on the right. Likewise, when the content is shorter then the menu, I don't want have anything cut off.

I have created a jsfiddle example of my problem that I'm having: [http://jsfiddle.net/nKATZ/](http://jsfiddle.net/nKATZ/)

It looks right if the menu is shorter then the body: [http://jsfiddle.net/nKATZ/1/](http://jsfiddle.net/nKATZ/1/)

Here is the code:

**html**

```
<div class="mainBox">
<div class="leftBox">
    <a href="#">here</a><br />
    <a>here</a><br />
    <a>here</a><br /><a>here</a><br />
    <a>here</a><br />
    <a>here</a><br />
    <a>here</a><br />
    <a>here</a><br />
    <a>here</a><br />
    <a>here</a><br />
</div>
<div class="rightBox">
    body textbody text<br />
    body textbody text<br />
    body textbody text<br />
    body textbody text<br />
    body textbody text<br />
    body textbody text<br />
    body textbody text<br />
    body textbody text<br />
    body textbody text<br />
    body textbody text<br />
    body textbody text<br />
    body textbody text<br />
    body textbody text<br />
    body textbody text<br />
    body textbody text<br />
</div>
<div class="clear" ></div>
</div> 
```

**css**

```
body {
    background: #15384C;
    font-family: 'Dosis', sans-serif;
}
.mainBox {
    margin-right: auto;
    margin-left: auto;
    width: 960px; 
    background: white;
    position: relative;
    padding: 0px;
    overflow: vissable;
}
.leftBox {
    float: left;
    width: 200px;
    background-color: #CF4A41;
}
.rightBox {
    width:720px; 
    float: right;
}
.clear {
    clear:both;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:18:16.257

尝试这个：

```
body {
    background: #15384C;
    font-family: 'Dosis', sans-serif;
}
.mainBox {
    margin-right: auto;
    margin-left: auto;
    width: 960px; 
    background: white;
    position: relative;
    padding: 0px;
    overflow: hidden;

}
.leftBox {
    float: left;
    width: 200px;
    background-color: #CF4A41;
    margin-bottom: -2000px;
    padding-bottom: 2000px; 
}
.rightBox {
    width:720px; 
    float: right;
}
.clear {
    clear:both;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:24:13.347

我认为这两行将解决您的问题。

```
.leftBox {
    float: left;
    width: 200px;
    background-color: #CF4A41;
    height: 100%; /* add this line */
    position: absolute;  /* and this line */
} 
```

[演示](http://jsfiddle.net/nKATZ/2/)

# highcharts - Highstock (Highchart) 1.3.1 behaves erroneously when legend is aligned to right

> ID：16113569
> 
> 赞同：0
> 
> 时间：2013-04-19T21:12:30.710
> 
> 标签：highcharts, highstock

In highstock 1.3.1, when the legend is aligned to right, the area used to draw chart overlaps with area used by range selector. As a result the mouse click and drag event intended to move range selector triggers zoom event of chart area. But if the legend is aligned to default location, chart behaves correctly. Demo : [http://jsfiddle.net/msjaiswal/eexBp/3/](http://jsfiddle.net/msjaiswal/eexBp/3/)

Code for the above fiddle :

**HTML:**

```
<script src="http://code.highcharts.com/stock/highstock.js"></script>
<script src="http://code.highcharts.com/stock/modules/exporting.js"></script>
Try using the range selectorin the two charts below.<br>
<b>Erroneous behavior:</b>
<div id="container" style="height: 500px; min-width: 500px"></div>
<b>Correct behavior:</b>
<div id="container2" style="height: 500px; min-width: 500px"></div> 
```

**Javascript :**

```
$(function() {
$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=usdeur.json&callback=?', function(data) {

    // Create the chart
    $('#container').highcharts('StockChart', {
        chart: {
            type: 'line',
            zoomType : 'x'
        },

        rangeSelector: {
            selected: 1
        },

        title: {
            text: 'USD to EUR exchange rate'
        },
        legend: {
            enabled: true,
            layout: 'vertical',
            align: 'right',
            //      verticalAlign: 'top',
            x: -10,
            y: -200,
            borderWidth: 0
        },

        yAxis: {
            title: {
                text: 'Exchange rate'
            }
        },

        series: [{
            name: 'USD to EUR',
            data: data,
            id: 'dataseries',
            tooltip: {
                valueDecimals: 4
            }
        }, {
            type: 'flags',
            name: 'Flags on series',
            data: [{
                x: Date.UTC(2011, 1, 14),
                title: 'On series'
            }, {
                x: Date.UTC(2011, 3, 28),
                title: 'On series'
            }],
            onSeries: 'dataseries',
            shape: 'squarepin'
        }, {
            type: 'flags',
            name: 'Flags on axis',
            data: [{
                x: Date.UTC(2011, 2, 1),
                title: 'On axis'
            }, {
                x: Date.UTC(2011, 3, 1),
                title: 'On axis'
            }],
            shape: 'squarepin'
        }]
    });
});

$.getJSON('http://www.highcharts.com/samples/data/jsonp.php?filename=usdeur.json&callback=?', function(data) {

    // Create the chart
    $('#container2').highcharts('StockChart', {
        chart: {
            type: 'line',
            zoomType : 'x'
        },

        rangeSelector: {
            selected: 1
        },

        title: {
            text: 'USD to EUR exchange rate'
        },
        legend: {
            enabled: true,
            layout: 'vertical',
            //align: 'right',
            //x: -10,
            //y: -200,
            borderWidth: 0
        },

        yAxis: {
            title: {
                text: 'Exchange rate'
            }
        },

        series: [{
            name: 'USD to EUR',
            data: data,
            id: 'dataseries',
            tooltip: {
                valueDecimals: 4
            }
        }, {
            type: 'flags',
            name: 'Flags on series',
            data: [{
                x: Date.UTC(2011, 1, 14),
                title: 'On series'
            }, {
                x: Date.UTC(2011, 3, 28),
                title: 'On series'
            }],
            onSeries: 'dataseries',
            shape: 'squarepin'
        }, {
            type: 'flags',
            name: 'Flags on axis',
            data: [{
                x: Date.UTC(2011, 2, 1),
                title: 'On axis'
            }, {
                x: Date.UTC(2011, 3, 1),
                title: 'On axis'
            }],
            shape: 'squarepin'
        }]
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T10:19:42.947

我想你想设置`verticalAlign:middle`，见：http: [//jsfiddle.net/eexBp/4/](http://jsfiddle.net/eexBp/4/)

# php - How to add new column to MYSQL table?

> ID：16113570
> 
> 赞同：113
> 
> 时间：2013-04-19T21:12:31.257
> 
> 标签：php, mysql, add, alter

I am trying to add a new column to my MYSQL table using PHP. I am unsure how to alter my table so that the new column is created. In my assessment table I have:

```
assessmentid | q1 | q2 | q3 | q4 | q5 
```

Say I have a page with a textbox and I type `q6` in to the textbox and press a button then the table is updated to:

```
assessmentid | q1 | q2 | q3 | q4 | q5 | q6 
```

My code:

```
<?php 
  mysql_query("ALTER TABLE `assessment` ADD newq INT(1) NOT NULL AFTER `q10`");
?>
  <form method="post" action="">
    <input type="text" name="newq" size="20">
    <input type="submit" name="submit" value="Submit"> 
```

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2013-04-19T21:28:21.687

你的桌子：

```
q1 | q2 | q3 | q4 | q5 
```

你也可以

```
ALTER TABLE yourtable ADD q6 VARCHAR( 255 ) after q5 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-19T21:24:51.150

```
 $table  = 'your table name';
 $column = 'q6'
 $add = mysql_query("ALTER TABLE $table ADD $column VARCHAR( 255 ) NOT NULL"); 
```

你可以改变`VARCHAR( 255 ) NOT NULL`成任何`datatype`你想要的。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-05-06T06:44:33.813

*   您可以在表格末尾添加一个新列

    `ALTER TABLE assessment ADD q6 VARCHAR( 255 )`

*   将列添加到表的开头

    `ALTER TABLE assessment ADD q6 VARCHAR( 255 ) FIRST`

*   在指定列旁边添加列

    `ALTER TABLE assessment ADD q6 VARCHAR( 255 ) after q5`

还有更多选项[在这里](https://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-19T21:25:19.333

就像是：

```
$db = mysqli_connect("localhost", "user", "password", "database");
$name = $db->mysqli_real_escape_string($name);
$query = 'ALTER TABLE assesment ADD ' . $name . ' TINYINT NOT NULL DEFAULT \'0\'';
if($db->query($query)) {
    echo "It worked";
} 
```

没有测试过，但应该可以。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-19T21:26:29.103

根据您的评论，您似乎只在以下情况下添加新列：`mysql_query("SELECT * FROM assessment");`返回 false。这可能不是你想要的。尝试删除“！” 在第一个“if”语句中的 $sql 前面。所以你的代码看起来像：

```
$sql=mysql_query("SELECT * FROM assessment");
if ($sql) {
 mysql_query("ALTER TABLE assessment ADD q6 INT(1) NOT NULL AFTER q5");
 echo 'Q6 created'; 
}else... 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-01-13T16:16:35.313

您应该考虑规范化数据库以避免在运行时创建列。

制作3张桌子：

1.  评估
2.  问题
3.  评估问题（列评估ID，问题ID）

将问题和评估放在各自的表格中，并使用外键通过assessment_question 将它们链接在一起。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-06-26T08:52:23.540

对于 WordPress：

```
global $wpdb;

$your_table  = $wpdb->prefix. 'My_Table_Name';
$your_column =                'My_Column_Name'; 

if (!in_array($your_column, $wpdb->get_col( "DESC " . $your_table, 0 ) )){  $result= $wpdb->query(
    "ALTER     TABLE $your_table     ADD $your_column     VARCHAR(100)     CHARACTER SET utf8     NOT NULL     "  //you can add positioning phraze: "AFTER My_another_column"
);} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-11T17:36:59.607

```
ALTER TABLE `stor` ADD `buy_price` INT(20) NOT NULL ; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2022-01-19T19:25:53.650

PHP 代码中 ALTER TABLE 的问题出在这一行：

mysql_query("ALTER TABLE 评估添加 newq INT(1) NOT NULL AFTER q10");

它应该在 q5 之后，因为您的表样本中没有 q10。因此，它变为 ALTER TABLE 评估 ADD newq INT(1) NOT NULL AFTER q5;

在我自己的 [Skyvia] 表中尝试了相同的逻辑，它应该如下所示。我在 Title 表中的 To 列之后添加了 description 列。

[Skyvia] - [https://skyvia.com/query/online-mysql-query-builder的链接](https://skyvia.com/query/online-mysql-query-builder)

[图像更改表添加列][![在此处输入图像描述](https://i.stack.imgur.com/8p4We.png)](https://i.stack.imgur.com/8p4We.png)

# objective-c - 在Objective-C中动态地将方法添加到对象？

> ID：16113579
> 
> 赞同：0
> 
> 时间：2013-04-19T21:12:57.743
> 
> 标签：objective-c, dynamic, reflection

我想在 Objective-C 中做这个 JavaScript：

```
var obj = {};
obj.myFunc = function() { ... }; 
```

这可能吗？还是只能将方法添加到 Objective-C 中的*类*而不是对象？即我找到`class_addMethod`了，但我想要一种方法在同一类的不同实例上具有相同选择器的*不同实现。*

这是可能的还是我是 SOL？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T21:23:22.057

在 Objective-C 中，方法（甚至是实例方法）只定义在类上，而不是单个对象上。

您可以在运行时使用该类创建一个新类`objc_allocateClassPair`并向该类添加方法。您可以在运行时使用`object_setClass`. 如果您决定对此进行研究，您将需要对“isa-swizzling”进行一些研究。如果你想在你也将与 KVO 一起使用的对象上使用它，这尤其成问题。

如果您可以简单地将 API 更改为使用块，那将会简单得多。例子：

```
@interface MyObject : NSObject

- (void)myMethodWithString:(NSString *)string;

typedef void (^MyMethodBlock)(NSString *string);

@property (nonatomic, copy) MyMethodBlock myMethodBlock;

@end

@implementation MyObject

@synthesize myMethodBlock = _myMethodBlock;

- (void)myMethodWithString:(NSString *)string {
    MyMethodBlock block = self.myMethodBlock;
    if (block) {
        block(string);
    }
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:27:21.720

不是直接可以的。在 JavaScript 中，对象继承自其他对象，而在 Objective-C 中，继承是通过类实现的。

我不明白你为什么需要这个，可能你有一个设计问题，你向我们展示了一个 XY 问题。但是，这是我可以想象的一个非常丑陋的解决方案，仅用于教育乐趣。仅适用于仅采用一个参数的方法。

```
id dispatch_helper(id obj, SEL sel, id arg)
{
    id (^blk)(id, SEL, id) = objc_getAssociatedObject(obj, sel);
    return blk(obj, sel, arg);
}

void object_addMethod(id obj, SEL sel, IMP imp)
{
    class_addMethod(object_getClass(obj), sel, dispatch_helper, "@@:@");
    objc_setAssociatedObject(obj, sel, ^(id o, SEL s, id a) {
        return IMP(o, s, a);
    }, OBJC_ASSOCIATION_COPY_NONATOMIC);
} 
```

# c++ - 将字符串相互比较和附加的问题c ++

> ID：16113580
> 
> 赞同：0
> 
> 时间：2013-04-19T21:13:03.310
> 
> 标签：c++, string, append

我正在编写一些代码，它应该做的是将路径返回到没有文件名本身的文件。这里是

```
#include <iostream>
#include <string>
#include <Windows.h>
using namespace std;

int main() {
    char binaryPath[MAX_PATH]; //I think my problems stem from the fact that 
                               //isnt truly a string

    GetModuleFileName(NULL, binaryPath, MAX_PATH); //Get filename
    string i = (string) binaryPath;
    string fileDir = "";
    int tempSlashes = 0;
    for (int x = 0; x < strlen(binaryPath); x++) {
        if (i[x] == '\\') { //In eclipse CDT this gives warning 1 (below)
            tempSlashes++; 
        }
    }
    for (int y = 0; y < tempSlashes; y++) {
        fileDir.append(binaryPath[y]); //Line gives warning 2
    }
    cout << fileDir;
    return 0;
} 
```

无论如何，小警告注释

```
Error 1:
Multiple markers at this line
- comparison with string literal results in unspecified behaviour [-
 Waddress]
- ISO C++ forbids comparison between pointer and integer [-
 fpermissive]

Error 2:
Multiple markers at this line
- Invalid arguments ' Candidates are: std::basic_string<char,std::char_traits<char>,std::allocator<char>> & append(const 
 std::basic_string<char,std::char_traits<char>,std::allocator<char>> &) std::basic_string<char,std::char_traits<char>,std::allocator<char>> & append(const 
 std::basic_string<char,std::char_traits<char>,std::allocator<char>> &, unsigned int, unsigned int) std::basic_string<char,std::char_traits<char>,std::allocator<char>> & append(const 
 char *, unsigned int) std::basic_string<char,std::char_traits<char>,std::allocator<char>> & append(const char *) std::basic_string<char,std::char_traits<char>,std::allocator<char>> & 
 append(unsigned int, char) std::basic_string<char,std::char_traits<char>,std::allocator<char>> & append(#10000, #10000) '
- invalid conversion from 'char' to 'const char*' [-fpermissive] 
```

程序本身拒绝编译，并运行较早的 .exe

我不确定我在这里做错了什么，帮助（以及解释）会非常好。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:57:27.963

我建议向后迭代并寻找'\'。就像是：

```
int len = strlen(binaryPath);
char outPath[MAX_PATH];
strcpy(outPath, binaryPath);
for (int x = len - 1; x >= 0; --x) {
    outPath[x] = 0;
    if (binaryPath[x] == '\\') {
        break;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:20:33.240

首先，在现代 Win32 C++ 代码中，您可能希望使用**Unicode**而不是 ANSI/MBCS（所以，`wchar_t`而不是`char`，而`std::wstring`不是`std::string`）。

对于您的特定问题，您可能希望使用现有的 Win32 API：[**PathRemoveFileSpec()**](http://msdn.microsoft.com/en-us/library/windows/desktop/bb773748%28v=vs.85%29.aspx)。

这是一个示例可编译代码：

```
#define UNICODE
#define _UNICODE
#include <iostream>
#include <string>
#include <Windows.h>
#include <Shlwapi.h>
using namespace std;

#pragma comment(lib, "Shlwapi.lib")

int main()
{
    wchar_t binaryPath[MAX_PATH];
    GetModuleFileName(nullptr, binaryPath, MAX_PATH);
    PathRemoveFileSpec(binaryPath);

    // You can assign to a std::wstring as well...
    wstring fileDir = binaryPath;

    wcout << fileDir << endl;
} 
```

这是一个示例测试：

> ```
> C:\Temp\CppTests>cl /EHsc /W4 /nologo /MTd test.cpp
> test.cpp
> 
> C:\Temp\CppTests>test.exe
> C:\Temp\CppTests 
> ```

* * *

作为替代方案，一旦您在原始 C 缓冲区中读取了文件名的完整路径：

```
wchar_t binaryPathBuffer[MAX_PATH];
GetModuleFileName(nullptr, binaryPathBuffer, MAX_PATH); 
```

您可以将它复制到 a`std::wstring`中，然后使用它的**`rfind()`**方法找到最后一个的位置，然后使用以下方法`'\'`提取正确的子字符串：**`substr`**`std::wstring`

```
wstring binaryPath = binaryPathBuffer;
size_t last = binaryPath.rfind(L'\\');
wstring fileDir = binaryPath.substr(0, last); 
```

# perl - Perl 的 NYTProf 分析器

> ID：16113586
> 
> 赞同：9
> 
> 时间：2013-04-19T21:13:28.747
> 
> 标签：perl, devel-nytprof

这个问题是关于`Devel::NYTProf`分析器的。

我从分析器收到的输出是一条简单的行，例如：

```
use strict; 
```

**输出：**

```
statements: 3 
Time on Line: 22µs
Calls: 2
Time in Sub: 12µs 
```

**所以我的问题是：**

1.  这3个语句如何？
2.  sub .. 中的时间代表什么？
3.  这是否代表将此模块转换为 optree 所花费的时间，还是其他什么？
4.  这是编译阶段时间还是运行阶段时间？

先感谢您

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T21:33:54.173

```
use Foo; 
```

相当于执行

```
require Foo;
Foo->import; 
```

在编译时。所以也许被调用的 sub 是`strict::import`.

**更新**：分析程序

```
require strict;
strict->import; 
```

显示将语句`Devel::NYTProf`计为一个子调用和另一个子调用。`require``import`

# java - How to test the backing array used in Java Sting?

> ID：16113588
> 
> 赞同：2
> 
> 时间：2013-04-19T21:13:32.450
> 
> 标签：java, android, string, arrays, java-memory-model

While i was developing my Android application, my attention was caught by the [backing array](http://developer.android.com/reference/java/lang/String.html#backing_array).

> Multiple strings can share the same char[] because strings are immutable. The substring(int) method always returns a string that shares the **backing array** of its source string. Generally this is an optimization: fewer character arrays need to be allocated, and less copying is necessary. But this can also lead to unwanted heap retention. Taking a short substring of long string means that the long shared char[] won't be garbage until both strings are garbage. This typically happens when parsing small substrings out of a large input. To avoid this where necessary, call new String(longString.subString(...)). The string copy constructor always ensures that the **backing array** is no larger than necessary.

Then i have read many resources on the web. I know that [Strings no longer shares the same backing array since jdk7u6](http://mail.openjdk.java.net/pipermail/core-libs-dev/2012-May/010257.html), pointed by [Mark Rotteveel](https://stackoverflow.com/questions/13934494/is-directly-accessing-the-backing-array-of-a-string-justified-in-some-cases).

Then i started trying to play with, and to test the existence of the shared backing array in my code:

```
String str = "1234567890";
System.out.println("str.substring(1): "    + (str == str.substring(1)));
System.out.println("str.substring(0, 9): " + (str == str.substring(0, 9))); 
```

First i assume == is a swallow equal comparison (*isn't it?*) that compares their memory locations (like what in C).

If they **do** share the same backing array, and == is just comparing their memory locations, both statements **should** return true (*or* at least the last one returns true).

However, they are both false.

Well, i *think* my laptop is having Java 7 update 21\. (shown in Win7 -> Control Panel -> Java Control Panel -> About) (and also in Eclipse -> Window -> Preference -> Java -> Compiler -> Compiler compliance level: {1.3 , 1.4 , 1.5 , 1.6 , 1.7} )

And i know 1.7 means Java 7\. And i know Java 7 is too high that the shared backing array may already have taken away. That is why i have asked Eclipse to compile my project with 1.5 and 1.6.

```
Java project -> Properties -> Java Complier -> Compiler compliance level = 1.5 
```

However, as i said, i am still getting false in those println()s.

Let me summarise my questions:

Q1) How to use Java codes to verify there is a use of underlying backing array? (other than making the OutOfMemoryError by millions of substring()s)

Q1) a. Is == sallow equal comparison?

Q1) b. Am i really using Java 5/6 to compile, if i set Compiler compliance level = 1.5/1.6?

Thanks for any input :-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:41:33.717

即使 String 对象共享相同的支持字符数组，它们也会比较不同，因为 String 对象本身是不同的对象。

您可以使用反射获得支持数组。在我的系统上，后备阵列的名称是，`value`但不能保证它在您的系统上是相同的。

```
import java.lang.reflect.*;

public class Main
{
    static Field stringBackingField = null;

    public static void main(String[] args) throws Exception
    {
        String strA = "1234567890";
        String strB = "1234567890";
        char[] charA = getBackingArray(strA);
        char[] charB = getBackingArray(strB);
        char[] subA1 = getBackingArray(strA.substring(1));
        char[] subA2 = getBackingArray(strA.substring(0, 9));
        System.out.println("charA address: " + System.identityHashCode(charA));
        System.out.println("charB address: " + System.identityHashCode(charB));
        System.out.println("subA1 address: " + System.identityHashCode(subA1));
        System.out.println("subA2 address: " + System.identityHashCode(subA2));
        System.out.println("charA == charB: " + (charA == charB));
        System.out.println("charA == subA1: " + (charA == subA1));
        System.out.println("charA == subA2: " + (charA == subA2));
    }

    public static char[] getBackingArray(String s) throws Exception
    {
        if (stringBackingField == null)
        {
            stringBackingField = String.class.getDeclaredField("value");
            stringBackingField.setAccessible(true);
        }
        return (char[]) stringBackingField.get(s);
    }
} 
```

Java 6 上的输出：

```
$ /usr/lib/jvm/java-6-openjdk-amd64/bin/java -version
java version "1.6.0_27"
OpenJDK Runtime Environment (IcedTea6 1.12.3) (6b27-1.12.3-0ubuntu1~12.04.1)
OpenJDK 64-Bit Server VM (build 20.0-b12, mixed mode)
$ /usr/lib/jvm/java-6-openjdk-amd64/bin/java Main 
charA address: 1383884648
charB address: 1383884648
subA1 address: 1383884648
subA2 address: 1383884648
charA == charB: true
charA == subA1: true
charA == subA2: true 
```

Java 7 上的输出：

```
$ /usr/lib/jvm/java-7-openjdk-amd64/bin/java -version
java version "1.7.0_15"
OpenJDK Runtime Environment (IcedTea7 2.3.7) (7u15-2.3.7-0ubuntu1~12.04.1)
OpenJDK 64-Bit Server VM (build 23.7-b01, mixed mode)
$ /usr/lib/jvm/java-7-openjdk-amd64/bin/java Main
charA address: 1264720121
charB address: 1264720121
subA1 address: 357935641
subA2 address: 722623040
charA == charB: true
charA == subA1: false
charA == subA2: false 
```

* * *

**编辑：**

要查找支持数组成员的名称，请使用打印所有成员

```
java.util.Arrays.toString(String.class.getDeclaredFields()); 
```

并寻找一个 type `char[]`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:36:03.447

substring() 返回一个新的 String 对象。即使这个返回的新字符串将引用相同的后备数组，字符串本身也是与调用 substring() 方法的字符串不同的对象。因此，当您使用运算符 == 时，它将返回 false。

```
class MyClass {
    public Object myObject;

    public static void main(String args[]) {
        Object sharedObject = new Object();

        MyClass sampleA = new MyClass();
        sampleA.myObject = sharedObject;

        MyClass sampleB = new MyClass();
        sampleB.myObject = sharedObject;

        //Same object shared by different objects. Returns true.
        System.out.println(sampleA.sharedObject == sampleB.sharedObject);

        //They are different objects, as it is your str and str.substring(1).
        //So this will return false.
        System.out.println(sampleA == sampleB);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:40:55.447

1）我不明白你为什么需要找出这个。由于字符串是不可变的，因此一旦您对其进行操作，就会创建一个新字符串（因此不会影响具有相同“支持数组”的任何内容）。正如 Louis 所说，您并不打算仔细研究代码中字符串的底层工作。没有太多意义。

2) == 比较两个对象的指针。

3）这些语句是错误的是正确的，因为当您执行 substring 方法时，它正在创建一个新字符串，因此将有一个指向原始字符串的不同指针。

# sql - 仅当我们至少有一个注册时才提取字段

> ID：16113591
> 
> 赞同：0
> 
> 时间：2013-04-19T21:13:46.387
> 
> 标签：sql, oracle

我有两张桌子：

```
author(id_author, date_conf, id_visitor, id_article)
visitor(id_visitor, email, registration_date, registration_fees, ...) 
```

我想在至少一位作者完成注册时提取文章（id_article）（注册费不为空或NULL（逻辑上））

例如，当我这样做时`NATURAL INNER JOIN`

```
(id_author, registration_fees, id_article, ...)
(0, 123.1, 1)
(1, NULL, 1)
(2, NULL, 2) 
```

它应该只提取`id_article`，因为它有 123.1。id_article 2 的作者没有付费注册。

请问我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:16:21.250

我认为这确实想要你想要的：

```
select id_article
from author a join
     visitor v
     on a.id_visitor = v.id_visitor
where registration_fees is not null
group by id_article 
```

# drupal - 视图中字段的条件显示

> ID：16113593
> 
> 赞同：0
> 
> 时间：2013-04-19T21:13:55.330
> 
> 标签：drupal, drupal-views, drupal-taxonomy

我有一个基于分类词汇的自定义（即查看）菜单，其中每个术语都有一个图像字段。

到目前为止，每个术语都与其图片一起正确显示，但我想知道是否可以仅显示相对于当前活动术语的图像字段，同时保持整个词汇表的标签+链接。结果将是在菜单顶部有一个说明性图片，根据哪个项目是点击器而改变。

有没有办法直接在 View 配置中做类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T05:21:25.093

通过使用上下文过滤器，您可以显示在 URL 中作为参数 / 传递的术语的信息。

# django - Serving protected files with Django and Nginx X-accel-redirect

> ID：16113602
> 
> 赞同：1
> 
> 时间：2013-04-19T21:14:48.837
> 
> 标签：django, nginx, x-accel-redirect

I'm trying to get Nginx and Django to play together to serve downloadable protected files. I just cannot get it to work. Here's my Nginx config:

```
location ~ ^.*/protected-test/ {
alias /<path-to-my-protected-files-on-server>/;
internal;
} 
```

the relevant urls.py for viewing the file(s):

```
url(r'^static_files/downloads/protected-test/(?P<filename>.+)$', 'download_or_view',
{'download_dir': '%s%s' % (settings.MEDIA_ROOT, 'downloads/protected-test/'),
'content_disposition_type': 'inline',
'protected': 'True'},
name='protected_files') 
```

my view:

```
def download_or_view(request, content_disposition_type, download_dir, filename=None, protected=False):

'''Allow a file to be downloaded or viewed,based on the request type and
     content disposition value.'''

if request.method == 'POST':
    full_path = '%s%s' % (download_dir, request.POST['filename'])
    short_filename = str(request.POST['filename'])
else:
    full_path = '%s%s' % (download_dir, filename)
    short_filename = str(filename)

serverfile = open(full_path, 'rb')
contenttype, encoding = mimetypes.guess_type(short_filename)
response = HttpResponse(serverfile, mimetype=contenttype)

if protected:
    url = _convert_file_to_url(full_path)
    response['X-Accel-Redirect'] = url.encode('utf-8')

response['Content-Disposition'] = '%s; filename="%s"' % (content_disposition_type, smart_str(short_filename))
response['Content-Length'] = os.stat(full_path).st_size

return response 
```

I have 2 values in my settings file:

```
NGINX_ROOT = (os.path.join(MEDIA_ROOT, 'downloads/protected-test'))
NGINX_URL = '/protected-test' 
```

_convert_file_to_url() takes the full file path and, using the two settings values above, turns it into a url that (I thought) Nginx would allow:

```
<domain-name>/protected-test/<filename> 
```

So, if I try to access:

```
<domain-name>/static_files/downloads/protected-test/<filename> 
```

In my browser window, it doesn't allow it (404). Good.

BUT - if I try to access that url from a form download, which I want to allow, I get a redirect in the browser to:

```
<domain-name>/protected-test/<filename> 
```

and it's a 404 as well.

I've tried so many different configurations my brain now hurts. :-)

Should I not be reading the file with open(), and let Nginx serve it? If I remove that line, it returns a file with the dreaded zero bytes. Why do I still get a 404 on the redirected url??

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:17:31.837

> 我不应该用 open() 读取文件吗？

这是正确的。您的脚本不应该打开文件。你只需告诉 Nginx 文件存在的位置，让它打开文件并提供服务。

我相信您只想在设置适当的标头后返回一个空响应

```
return HttpResponse('', mimetype=contenttype) 
```

在 PHP 中，我通过执行以下操作设置 Nginx 加速重定向：

```
//Set content type and caching headers
//...
header("X-Accel-Redirect: ".$filenameToProxy);
exit(0); 
```

即设置标题后立即退出。

对于持续的 404 问题，您可能在 Nginx conf 中遇到了错误，但您需要发布其余的内容才能确定。您的外部 URL 似乎类似于：

```
static_files/downloads/protected-test/(?P<filename>.+)$ 
```

这将匹配：

```
location ~ ^.*/protected-test/ {
    alias /<path-to-my-protected-files-on-server>/;
    internal;
} 
```

给404。

没有必要（这很令人困惑）`protected-test`在外部 URL 和内部 URL 中使用相同的词。我建议不要这样做，即外部 URL 如下：

```
/static_files/downloads/(?P<filename>.+)$ 
```

然后让内部位置块为：

```
location ~ ^/protected-test {
    alias /<path-to-my-protected-files-on-server>;
    internal;
} 
```

然后当您设置 x-accel-redirect 标头时，在两者之间交换：

```
external_path = "/static_files/downloads";
nginx_path = "/protected-test";
filenameToProxy = str_replace(external_path, nginx_path, full_path);
header("X-Accel-Redirect: ".$filenameToProxy); 
```

而不是`protected-test`在请求的两边都有这个词。

# android - 更新时清除数据

> ID：16113604
> 
> 赞同：3
> 
> 时间：2013-04-19T21:14:53.873
> 
> 标签：android, sqlite

我在 Android 上维护了一个长期存在的应用程序，我决定改变它背后的数据模型，将几个 SQLite 数据库合并到一个新的数据库中。

问题是，如果我只是创建新数据库并停止使用旧数据库，那么每个应用程序用户的本地存储中仍然会有旧的 SQLite 文件。

有没有办法在新版本的应用程序上强制“清除数据”？（我正在寻找“正确”的方法，我知道我可以检查新数据库是否存在并采取行动，但我认为可能有更好的方法）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:19:25.347

每当需要升级数据库时（例如，当用户下载新版本的应用程序时），数据库版本号的更改会调用 onUpgrade() 方法，您可以覆盖 SQLiteOpenHelper 类提供的该方法：

```
@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    Log.w("TaskDBAdapter", "Upgrading from version "+oldVersion
            +" to "+newVersion
            +", which will destroy all old data");
    for (String string : table_names)
            db.execSQL("drop table if exists "+ string);
    onCreate(db);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-05T09:49:13.793

`BroadcastReceiver`是的，您可以为操作定义一个`MY_PACKAGE_REPLACED`。在此接收方的`onReceive`方法中，您可以删除数据库。(API12+)

```
<receiver
    android:name=".OnUpgradeReceiver"
    android:enabled="true" >
    <intent-filter>
        <action android:name="android.intent.action.MY_PACKAGE_REPLACED" />
    </intent-filter>
</receiver> 
```

和广播接收器

```
public class OnUpgradeReceiver extends BroadcastReceiver {
    public OnUpgradeReceiver() {
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        context.deleteDatabase("YOUR_DATABASE_NAME");
    }
} 
```

注意这只会在更新的情况下触发（增加 Gradle 文件中的版本代码）

# core-data - Adding individual float values per UITableViewCell to get grand totals?

> ID：16113606
> 
> 赞同：0
> 
> 时间：2013-04-19T21:15:04.183
> 
> 标签：core-data, uitableview

I am having a major problem even getting started with finding an answer to this question? I have a UITableView that is being populated by user generated content and being persisted to CoreData. All is good. However I can't even find a way in the Apple docs to do the following:

How do I add each dollar value in a cell to get a grand total displayed somewhere to the user? In this case it can be thrown in a UILabel in the footer of each section I don't care. What I can't figure out is how to get to each individual cell get the dollar amount entered there and add it to the next dollar amount in the next cell in the section and so on.

Any ideas on how to add totals from cells to get a grand total?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:23:03.557

这个问题最优雅的解决方案是使用关键路径。

您无需前往单元格并获取数据。你去你的数据模型并从那里计算它。请记住，MVC 要求您始终将模型和视图分开。

假设您有一个 NSManagedObject 的子类，其 NSNumber 属性“数量”通过核心数据获取。然后，您可以轻松地进行如下简单的计算：

```
float sum = [[fetchedObjects valueForKeyPath:@"@sum.amount"] floatValue]; 
```

[这在集合运算符](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/KeyValueCoding/Articles/CollectionOperators.html#//apple_ref/doc/uid/20002176-BAJEAIEE)下的键值编码编程指南中进行了描述。

# ruby-on-rails - Rails 中的嵌套表单模型不保存使用 jQuery 添加的项目

> ID：16113607
> 
> 赞同：0
> 
> 时间：2013-04-19T21:15:08.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在关注 Ryan Bate 的 RailsCast ( [#197](http://railscasts.com/episodes/197-nested-model-form-part-2) ) 嵌套模型表单。

如果我提交的表单在控制器中添加了 3 个字段：

```
3.times { @prof.experiences.build } 
```

...他们正确保存。但是，如果该字段是通过 jQuery 添加的，则不会保存。

以前有没有其他人遇到过这种问题？

编辑：不使用 jQuery 生成的 HTML：

```
<div class="fields">
<table>
<tbody><tr>
<td>Position Title:</td>
<td><input id="applicant_profile_experiences_attributes_0_title" name="applicant_profile[experiences_attributes][0][title]" size="30" type="text"></td>
</tr>
<tr>
<td>Employer:</td>
<td><input id="applicant_profile_experiences_attributes_0_employer" name="applicant_profile[experiences_attributes][0][employer]" size="30" type="text"></td>
</tr>
<tr>
<td>Responsibilities</td>
<td><textarea cols="40" id="applicant_profile_experiences_attributes_0_description" name="applicant_profile[experiences_attributes][0][description]" rows="4"></textarea></td>
</tr>
<tr>
<td>Start Date:</td>
<td><select id="experience_from_date_1i" name="experience[from_date(1i)]">
<option value="1970">1970</option>
<option value="1971">1971</option>
</select>
</td>
</tr>

</tbody></table>
<p><input id="applicant_profile_experiences_attributes_0__destroy" name="applicant_profile[experiences_attributes][0][_destroy]" type="hidden" value="false"><a href="#" onclick="remove_fields(this); return false;">Remove</a></p>
</div> 
```

使用 jQuery 添加的代码：

```
<div class="fields">
<table>
    <tbody><tr>
        <td>Position Title:</td>
        <td><input id="applicant_profile_experiences_attributes_1366407307283_title" name="applicant_profile[experiences_attributes][1366407307283][title]" size="30" type="text"></td>
    </tr>
    <tr>
        <td>Employer:</td>
        <td><input id="applicant_profile_experiences_attributes_1366407307283_employer" name="applicant_profile[experiences_attributes][1366407307283][employer]" size="30" type="text"></td>
    </tr>
    <tr>
        <td>Responsibilities</td>
        <td><textarea cols="40" id="applicant_profile_experiences_attributes_1366407307283_description" name="applicant_profile[experiences_attributes][1366407307283][description]" rows="4"></textarea></td>
    </tr>
    <tr>
        <td>Start Date:</td>
        <td><select id="experience_from_date_1i" name="experience[from_date(1i)]">
<option value="1970">1970</option>
<option value="1971">1971</option>
<!-- removed big date list -->
</select>
</td>
    </tr>

</tbody></table>
<p><input id="applicant_profile_experiences_attributes_1366407307283__destroy" name="applicant_profile[experiences_attributes][1366407307283][_destroy]" type="hidden" value="false"><a href="#" onclick="remove_fields(this); return false;">Remove</a></p>
</div> 
```

# java - A boolean value defined in XML. How to reference in Java?

> ID：16113608
> 
> 赞同：36
> 
> 时间：2013-04-19T21:15:09.680
> 
> 标签：java, android, boolean

I'm trying to write some code that will reference a bool.xml file and will reference the current value inside the bool.

```
<bool name="enableQAurl">true</bool> 
```

With this I want to be able to reference this in code, so that if it's set to True it does something and if false does something else. Just a simple If and else statement.

Any code references or feedback is greatly appreciated.

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-19T21:18:43.977

```
 Resources res = getResources();
 boolean enableQAurl = res.getBoolean(R.bool.enableQAurl); 
```

*来源*：http:
[//developer.android.com/guide/topics/resources/more-resources.html](http://developer.android.com/guide/topics/resources/more-resources.html)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-11-03T06:56:43.543

*kaderud 的*上述答案将完美运行。如果您不在活动中，则必须使用您的上下文。

如果您在片段或适配器中，那么您必须遵循以下内容。

```
boolean enableQAurl = context.getResources().getBoolean(R.bool.enableQAurl); 
```

# java - Play Framework await() makes the application act wierd

> ID：16113609
> 
> 赞同：1
> 
> 时间：2013-04-19T21:15:17.120
> 
> 标签：java, asynchronous, playframework-1.x

I am having some strange trouble with the method await(Future future) of the Controller.

Whenever I add an await line anywhere in my code, some GenericModels which have nothing to do with where I placed await, start loading incorrectly and I can not access to any of their attributes.

The wierdest thing is that if I change something in another completely different java file anywhere in the project, play will try to recompile I guess and in that moment it starts working perfectly, until I clean tmp again.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T14:06:19.617

当您在控制器中使用 await 时，它会增强字节码以将单个方法分成两个线程。这很酷，但绝对是 Play1 的“黑魔法”之一。但是，这是 Play 经常表现得很奇怪并且需要重新启动（或者如您所见，需要更改一些代码）的地方 - 另一个可能表现得很奇怪的地方是当您更改 Model 类时。

[http://www.playframework.com/documentation/1.2.5/asynchronous#SuspendingHTTPrequests](http://www.playframework.com/documentation/1.2.5/asynchronous#SuspendingHTTPrequests)

> 为了更容易处理异步代码，我们引入了延续。延续允许您的代码透明地暂停和恢复。因此，您以非常必要的方式编写代码，例如：
> 
> public static void computeSomething() { Promise delayResult = veryLongComputation(...); 字符串结果 = 等待（延迟结果）；渲染（结果）；}
> 
> 实际上，在这里，您的代码将分 2 步执行，分 2 个不同的线程执行。但正如您所见，它对您的应用程序代码非常透明。
> 
> 使用 await(...) 和延续，您可以编写一个循环：

```
 public static void loopWithoutBlocking() {
     for(int i=0; i<=10; i++) { 
          Logger.info(i);
          await("1s");
     }
     renderText("Loop finished"); } 
```

> 并且仅使用 1 个线程（这是开发模式下的默认设置）来处理请求，Play 能够同时为多个请求同时运行这些循环。

* * *

要回复您的评论：

```
 public static void generatePDF(Long reportId) {
    Promise<InputStream> pdf = new ReportAsPDFJob(report).now();
    InputStream pdfStream = await(pdf);
    renderBinary(pdfStream); 
```

而 ReportAsPDFJob 只是一个覆盖 doJobWithResult 的 play Job 类 - 所以它返回对象。有关工作的更多信息，请参阅[http://www.playframework.com/documentation/1.2.5/jobs](http://www.playframework.com/documentation/1.2.5/jobs)。

调用`job.now()`返回一个未来/承诺，您可以像这样使用它：`await(job.now())`

# c# - using Json in Portable Class Library

> ID：16113610
> 
> 赞同：6
> 
> 时间：2013-04-19T21:15:23.853
> 
> 标签：c#, portable-class-library

I'm attempting to load some data in a portable class library. The data is in JSON format. I need parse and work with this information. Unfortunately, it doesn't appear that System.Json is available. At the same time, I tried to include the Json.Net NuGet package without any luck.

How does one work with JSON data in a portable class library?

Thank you

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T21:24:34.253

JSON.NET在 PCL***中***[可用，请查看以下发行说明：](http://james.newtonking.com/archive/2012/10/07/json-net-4-5-release-10-portable-class-library-on-nuget.aspx)

*Json.NET 此版本的主要新功能是可通过 NuGet 获得的可移植类库程序集。支持可移植类库的 NuGet 2.1 使这成为可能。[在此处](http://docs.nuget.org/docs/release-notes/nuget-2.1)阅读有关 NuGet 2.1的更多信息。*

*   更新`NuGet`
*   [得到](http://json.codeplex.com/releases/view/95877) `JSON.NET`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-19T21:26:31.657

Json.net pcl 可用——如果你找不到官方的 nuget 版本，那么在 mvvmcross json 插件包或 mvvmcross 二进制 git repo 中会有一个稍微旧的版本。

# c# - Access UserProfile from a controller MVC 4

> ID：16113615
> 
> 赞同：5
> 
> 时间：2013-04-19T21:16:06.060
> 
> 标签：c#, entity-framework, asp.net-mvc-4

New to all this: I have a model for Character that has a UserProfile property, so that a character can be assiciated with a UserProfile entry. This would make UserProfile a foreign key for a Character.

Character Model:

```
public class Character
{
    public int ID { get; set; }
    public virtual UserProfile user { get; set; }
    public string name { get; set; }
...
} 
```

(I made the UserProfile property virtual because of another post, not sure if this should stay)

When creating a new character I want to set the user property of that character to the object of the current web-user making the request. For example here is the process a user would take to make a character: Login/Create User account with site Click 'Create Character'

```
[HttpPost]
public ActionResult Create(Character character)
{
    if (ModelState.IsValid)
    {
        character.user = ???
        db.Characters.Add(character);
        db.SaveChanges();
        ...
} 
```

**Problem is I do not know how to access the UserProfile table from my controller.** Typically to access a table I create an object of my dbContext but the UserProfile table is using the default MVC 4 context while all the other objects of my app are using a different dbContext.

I'm guessing there are a few solutions for me, none of which I can figure out how to do:

1.  Should I set up my application so all tables use 1 dbContext? If so, how?
2.  Is there some way to create an object of the default dbContext that UserProfile is already using?

Sorry in advance if any of my terminology is off or if I left out vital information. I'll provide more as needed. Thanks

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-05-05T18:55:47.060

当您登录时，您的用户信息（如 UserId 或 UserName）将存储在

> WebSecurity.CurrentUserId
> 
> WebSecurity.CurrentUserName

```
[HttpPost]
public ActionResult Create(Character character)
{
    if (ModelState.IsValid)
    {
        character.user = db.UserProfiles.Find(u => u.UserID = WebSecurity.CurrentUserId); 

        db.Characters.Add(character);
        db.SaveChanges();
    ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T21:36:16.830

我通常将当前用户 ID 保存在会话变量中，然后在需要时从数据库中检索该用户。所以代码可能看起来像：

```
[HttpPost]
public ActionResult Create(Character character)
{
    if (ModelState.IsValid)
    {
        character.user = db.UserProfiles.Find(u => u.UserID = (int) Session["UserID"]); 

        db.Characters.Add(character);
        db.SaveChanges();
    ...
} 
```

# javascript - jQuery 函数可防止单击时添加/删除类

> ID：16113620
> 
> 赞同：3
> 
> 时间：2013-04-19T21:16:45.737
> 
> 标签：javascript, jquery, html, css

我试图让一个 div 在单击时获得一个新类（使其扩展），并在单击该 div 内的取消链接时将其返回到旧类（使其关闭）。

```
<div class="new-discussion small">
    <a class="cancel">Cancel</a>
</div>

<script>
    $('.new-discussion.small').click(function() {
        $(this).addClass("expand").removeClass("small");
    });
    $('a.cancel').click(function() {
        $('.new-discussion.expand').addClass("small").removeClass("expand");
    });
</script> 
```

现在，添加扩展类完美无缺，但单击取消链接后关闭面板仅在我删除此代码时才有效：

```
$('.new-discussion.small').click(function() {
    $(this).addClass("expand").removeClass("small");
}); 
```

所以我想这一定是阻止了第二个功能的工作，但我真的不知道为什么。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T21:25:53.777

试试这个

```
$('a.cancel').click(function() {
    $('.new-discussion.expand').addClass("small").removeClass("expand");
    return false;
}); 
```

原因可能是您的点击事件正在传播到也在监听点击事件的父级。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T21:28:42.130

由于您的`a`元素位于`.new-discussion`元素内部，因此当您单击 时`a`，它还会`click`在父元素上触发事件，因为该事件正在冒泡。

要修复它，您可以通过调用来停止事件的传播`e.stopPropagation();`。这将阻止执行任何**父**处理程序。

```
$('a.cancel').click(function(e) {
    e.stopPropagation();
    $('.new-discussion.expand').addClass("small").removeClass("expand");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:26:31.070

由于链接位于 内部`<div>`，因此它同时使用了两种单击方法。在继续之前检查容器是否已经打开可能会有所帮助：

```
<script>
    $('.new-discussion.small').click(function() {
        if ($(this).hasClass("small")) {
            $(this).addClass("expand").removeClass("small");
        }
    });
    $('a.cancel').click(function() {
        $(this).parent('.expand').addClass("small").removeClass("expand");
    });
</script> 
```

# html - 同时显示多张图片

> ID：16113621
> 
> 赞同：0
> 
> 时间：2013-04-19T21:16:46.980
> 
> 标签：html, image

我做一个应用程序，我想显示两个图像。一个在另一个之下。

我已经尝试了很多关于数据角色内容的事情，但我不知道我做错了什么。

任何想法？

我的html5代码：

```
<div data-role="page" id="p3">
<div data-role="content" id="Orienthorizontal" style="padding:0px;">
        <img src="imagens/Horizontal/6.jpg"/>
         <a href="#positionWindow" id="videoicon" data-rel="popup" data-inline="true" data-transition="slidefade" data-position-to="window"><img src="icon/video-icon.png"/></a>
    </div>
<div data-role="content" id="Orienthorizontal" style="padding:0px;">
        <img src="imagens/Horizontal/6.2.jpg"/>
    </div>
</div> 
```

CSS：

```
#Orienthorizontal{position:absolute} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:19:53.997

要么定义你的 CSS 使得 div 必须显示在不同的行上，或者你可以简单地`<br/>`在它们之间插入一个标签来强制换行。

# ruby-on-rails - 如何使诸如“script/mailman_server”之类的脚本适用于 Rails 应用程序中的多个用户

> ID：16113625
> 
> 赞同：1
> 
> 时间：2013-04-19T21:16:59.917
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mailman, mailman-gem

我有一个 Rails 应用程序，它使用 mailman gem（[链接](https://github.com/titanous/mailman)）来收集入站 pop3 邮件并处理它们。这一切都很好，但现在我希望有多个用户注册并从他们的 pop3 配置中接收邮件。Mailman 在“script/mailman_server”中运行，我不熟悉如何使脚本（运行自己的进程）为多个用户工作。任何人都可以就该主题启发我或链接到涉及该主题的资源吗？

**这是我现在的代码**

```
# script/mailman_server

#!/usr/bin/env ruby
require "rubygems"
require "bundler/setup"
require "mailman"

Mailman.config.pop3 = {
  :username => 'some_name@some_email.com',
  :password => 'some_password',
  :server   => 'pop.gmail.com',
  :port     => 995,
  :ssl      => true
}

Mailman::Application.run do
  default do
    Email.receive_mail(message)
  end
end

# app/models/email.rb

class Email
  include Mongoid::Document
  include Mongoid::Timestamps

  field :from, type: String
  field :subject, type: String
  field :body, type: String

  belongs_to :customer, :inverse_of => :emails

  def self.receive_mail(message)
    email = Email.create!(subject: message.subject, body: message.body.decoded, from: message.from.first)
  end
end 
```

# java - 在 OpenGL 中绘制的图像大小错误，并带有黑框

> ID：16113637
> 
> 赞同：2
> 
> 时间：2013-04-19T21:18:32.113
> 
> 标签：java, opengl, render, lwjgl

我目前正在尝试处理我的 Java 项目，其中包括 LWJGL。到目前为止，我的“游戏”已经到了我现在在屏幕上绘制图像的地步。

我遇到的问题是绘制的图像是用黑框绘制的，而且它的大小不正确。这是它的外观图像。 ![](https://i.stack.imgur.com/ijbTY.png)

这是实际的红色正方形图像的样子：

![](https://i.stack.imgur.com/CFieI.png)

这是我用于使用 OpenGL 进行渲染的代码，我无法弄清楚我做错了什么。

```
public class Renderer {

//Integers used for player cordinates, Taken from player class by using Static variables
int playerX;
int playerY;

SpriteSheetLoader spriteLoader;
Texture player;

public Renderer(){

}

public void initRenderer(){
    //Initialize OpenGL
    GL11.glMatrixMode(GL11.GL_PROJECTION);
    GL11.glLoadIdentity(); // Resets any previous projection matrices
    GL11.glOrtho(0, 800, 600, 0, 1, -1);
    GL11.glMatrixMode(GL11.GL_MODELVIEW);

            try {
    player = TextureLoader.getTexture("PNG",ResourceLoader.getResourceAsStream("res/PaddleTemp.png"));
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public void update(){
    GL11.glClear( GL11.GL_COLOR_BUFFER_BIT | GL11.GL_DEPTH_BUFFER_BIT );
    playerX = Player.playerX; //Gets player x and y from the player class using static variables
    playerY = Player.playerY;

    player.bind();

    GL11.glBegin(GL11.GL_QUADS);
        GL11.glTexCoord2f(0, 0);  //top left
        GL11.glVertex2f(playerX, playerY);

        GL11.glTexCoord2f(1,0);    //Top right
        GL11.glVertex2f(playerX + 50, playerY);

        GL11.glTexCoord2f(1, 1); //Bottom right
        GL11.glVertex2f(playerX + 50, playerY + 150);

        GL11.glTexCoord2f(0, 1); //bottom left
        GL11.glVertex2f(playerX, playerY + 150);
    GL11.glEnd();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T00:19:35.133

抱歉，我不确定是什么问题。不幸的是，我之后似乎无法重现它。但是我认为它应该通过以下方法之一解决：

*   不支持的图像尺寸

OpenGL relies heavily on so images, whose resolution's width and height are powers of 2 (when width/height=n*2). If the images files aren't up to that specification, LWJGL might act oddly. Also, don't worry about the image files being squished. That's dependent on the vertex input, not on the texture input.

*   Unsupported Image Extension

Try saving your image files as non-interlaced PNG files. Slick_Util, or whatever you use for loading the image files, might not fully support the images you're giving to it.

*   Correction Hints

As a last resort, you could add the following lines of code to your initialization code:

```
glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST);
glHint(GL_LINE_SMOOTH_HINT, GL_NICEST); 
```

Hopefully one of these tips helps you.

Source: [LWJGL not rendering textures correctly?](https://stackoverflow.com/questions/8618802/lwjgl-not-rendering-textures-correctly)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T17:37:06.887

I have a really easy fix for you. Your main problem is that you are using an unsupported image size, but OpenGL is good when it just expands the actual size of the sprite to be correct. It also records the exact float value for the width and height of the image so that you can in fact use images that are any size you want. Just replace your current rendering code with this:

```
GL11.glBegin(GL11.GL_QUADS);
    GL11.glTexCoord2f(0, 0);  //top left
    GL11.glVertex2f(playerX, playerY);

    GL11.glTexCoord2f(player.getWidth(),0);    //Top right
    GL11.glVertex2f(playerX + 50, playerY);

    GL11.glTexCoord2f(player.getWidth(), player.getHeight()); //Bottom right
    GL11.glVertex2f(playerX + 50, playerY + 150);

    GL11.glTexCoord2f(0, player.getHeight()); //bottom left
    GL11.glVertex2f(playerX, playerY + 150);
GL11.glEnd(); 
```

Also, you can disregard the other answer as this one should be your solution.

# javascript - jQuery mobile: links have improper format on first load?

> ID：16113639
> 
> 赞同：1
> 
> 时间：2013-04-19T21:18:39.647
> 
> 标签：javascript, jquery-mobile, backbone.js

I'm learning JQM and `Backbone.js` and I have a few problems. Im making a recipe app following the TODO list example trying to blend them both.

Anyway I can't refresh any page besides the first one, I'm getting undefined variables. I believe it has to do with the DOM and many views I have. Secondly Upon entering the recipe to search for to query the API, it displays the results first as plain links!

If I got forward a page or back a page and return to the results page it display the links as they should be the JQM style. This is because I couldn't figure how or what to append to in the JS, so I did it in the HTML.

I know this is a long shot but can anyone give me guidance as to what the hell I'm doing wrong, general advice, anything?

```
 var Todo = Backbone.Model.extend({
    defaults: function() {
      return {
    id: 0,
    title: 'defaultname',
    imgUrl: 'defaultimageurl',
        order: searchTemp.nextOrder(),
        rating: 0,
        timeToMake: '',
        salty: 0,
        sour: 0,
        sweet: 0,
        bitter: 0,  
        isPerm: false,
    taggedForList: false
      };
    },      
    initialize: function(){
      if( !this.get('ingrs') ){ 
        this.set({ingrs: new Array()});
      }
    },
    saveModel: function() {
    this.set({isPerm: true});
    this.save();
    }
});

var TodoList = Backbone.Collection.extend({
  model: Todo,
  localStorage: new Backbone.LocalStorage("searchTemp"),
  initialize: function() {
  },
  nextOrder: function() {
    if (!this.length) return 1;
    return this.last().get('order') + 1;
  },
  comparator: 'order',
  taggedForList: function() {
      return this.where({taggedForList: true});
  },
  remaining: function() {
      return this.without.apply(this, this.taggedForList);
  },

  findRecipes: function(theQuery) {
    console.log("findRecipes called");
    searchTemp.each(function (model) {
    if (!model.isPerm) {
        model.destroy();
    }
    });
    $.ajax({
      url: 'http://api.yummly.com/v1/api/recipes?_app_id=d8087d51&_app_key=005af5a16f1a8abf63660c2c784ab65f&maxResult=5&q='+theQuery,
      dataType: 'jsonp',
      success: function(apiStuff){
    var result = new Array();     
    result = apiStuff;          //saves the API's response as a new array
        result = result.matches;    //trims extra information from the json object, now only has information on the various recipes

    $.each(result, function(i, item) {
      var anotherRecipe= new Todo();    // makes a new model for each result

      anotherRecipe.set({
        id: result[i].id,            //then sets the attributes
        title: result[i].recipeName,    
        ingrs: result[i].ingredients,
        imgUrl: result[i].smallImageUrls,
            rating: result[i].rating,
            timeToMake: result[i].totalTimeInSeconds,
          });
          //not all recipes support flavor ratings, so error catching must be used to avoid setting null values
          try { anotherRecipe.set({ salty : result[i].flavors.salty }); } catch(e) {anotherRecipe.set({salty : "?"});}  //maybe replace the error condition to setting the flavor to '?'
          try { anotherRecipe.set({ sour: result[i].flavors.sour }); } catch(e) {anotherRecipe.set({sour : "?"});}
          try { anotherRecipe.set({ sweet: result[i].flavors.sweet }); } catch(e) {anotherRecipe.set({sweet : "?"});}
          try { anotherRecipe.set({ bitter: result[i].flavors.bitter }); } catch(e) {anotherRecipe.set({bitter : "?"});}

      searchTemp.add(anotherRecipe);    //adds the model to the temporary     
    });
      }  //eventually, should add something that checks for an empty search result, appending some warning if that happens
    });
    // console.log("search done");
  }  
});

var ShopItem = Backbone.Model.extend({
    defaults: function() {
        return {
            ingr : 'ingredient',
            done : false
        }
    },
    toggle: function() {
      this.save({taggedForList: !this.get("taggedForList")}); 
    }
});

var ShopList = Backbone.Collection.extend({
    localStorage: new Backbone.LocalStorage("grocery-list"),
    generate: function() {
    console.log("SHOP LIST!  ASSSSSEMMMMBLLLLLLE!");
    searchTemp.fetch();
    var ingrList = searchTemp.pluck('ingrs');  //this returns an array of arrays
    console.log(ingrList);
    ingrList = _.union(ingrList);   //this needs to get a series of arrays ( _.union(array1, array 2); )
    console.log(ingrList);
    },

    getList: function() {
        var list = new Array();
        list = this.toJSON();
        return list;
    }
});

var Todos = new TodoList;   //I am afraid to move this, 95% sure its obsolete, though
/*
var savedRecipesView = Backbone.View.extend({
    tagName:  "li",
    initialize: function() {
        this.render();
        this.listenTo(this.model, 'change', this.render);
        this.listenTo(this.model, 'destroy', this.remove);
    },
    render: function() {
        var template = _.template( $("#list_item").html(), {} );
        this.$el.html( template );

        //this.$el.html(this.template(this.model.toJSON()));
        //this.$el.toggleClass('done', this.model.get('done'));
        //this.input = this.$('.edit');
        //return this;

    },
    events: {
        "click input[type=button]": "sendToGroceries"
    },
    sendToGroceries: function() {
        var temp = new Array();
        temp = this.toJSON();
        $.each(temp, function(i, item) {
            var shopItem = new ShopItem();    
            shopItem.set({ name: temp[i].title });
            shoppingList.add(shopItem); //use pluck [ingrs]
            shopItem.save();
        });    
    }
});
*/
window.HomeView = Backbone.View.extend({
    template:_.template($('#home').html()),

    render:function (eventName) {
        $(this.el).html(this.template());
        return this;
    }
});

window.newSearchView = Backbone.View.extend({
    template:_.template($('#newSearch').html()),
    //this VAGUELY works, but causes visual chaos the first run through,
    //still relies on the appending for that
    initialize: function() {
        console.log(searchTemp);
        //searchTemp.bind('searchDone', this.render, this);
        searchTemp.bind('add', this.render, this);
    },
    render:function (eventName) {

        var temp = new Array();  // I think this line isnt doing anyting
        results = searchTemp.toJSON();
        // console.log(results);
        var variables = {
            recipes: results
        };
        $(this.el).html(this.template());
        return this;
    },
    events: {
      "keypress #recipe-search":  "searchOnEnter",
      //add a listener to newSearch to change what's displaye don this list
    },
    searchOnEnter: function(e) {   //the search bar's functionality
      if (e.keyCode != 13) return;
      var searchin = $("input[id='recipe-search']").val();

      console.log("searched for - "+ searchin);
      //this function is in todoList, does an API call and
      //adds a new model for each result (there will almost always be 5 results)
      searchTemp.findRecipes(searchin);

    }
});

window.newListView = Backbone.View.extend({
    template : _.template($('#newList').html()),
    initialize: function() {
    },
    render:function (eventName) {
        recipe = this.model.toJSON(); ///INCOMPLETE, modify newlist to accept straight from JSON
    var variables = {
            recipe_name : this.model.get("title"),
            img_url : this.model.get("imgUrl"),
            timetomake: this.model.get("timeToMake"),
            ingrs : this.model.get("ingrs"),
            rating : this.model.get("rating"),
            salty : this.model.get("salty"),
            sour : this.model.get("sour"),
            sweet : this.model.get("sweet"),
            bitter : this.model.get("bitter")
        };
        $(this.el).html(this.template(variables));
        return this;
    },
    events: {
      "click #save-this":  "saveModel"
    },
    saveModel: function() {
    console.log("saveModel() called");
    //console.log(permStorage.taggedForList());
        //shift the model over to permStorage
        //searchTemp.remove(this.model);
        //console.log(this.model);
        this.model.saveModel();
    //console.log(this.model)
        //now save permStorage to local storage
        searchTemp.each(function (model) {
        if(model.isPerm) {
        model.save();
        }
    });
    }
});

window.savedRecipesView = Backbone.View.extend({
    template:_.template($('#savedRecipes').html()),
    initialize: function() {
    console.log("about to fetch from local storage...");
    searchTemp.fetch();
    console.log("...fetched!");
    },
    render:function (data) {    
        results = searchTemp.toJSON();
    //results = results.models;
    //console.log(results);
        var variables = {
            results: results
        };
    _.each(data, function(task) {
            console.log("meow");
            this.addOne(task);
        }, this);
    $(this.el).html(this.template(variables));
        return this;
    },
    addOne: function(task) {
        var view = new listItemView({ model:task });
        $(this.el).append( view.render().el );
    }
});

window.listItemView = Backbone.View.extend({
    tagName: 'li',
    template:_.template($('#list-item').html()),
    initialize: function() {
        _.bindAll(this, 'render');
        this.model.bind('change', this.render);
        this.model.view = this;
    },
    events: {
        "click input[type=button]" : "onClick"
    },
    render: function() {
        $(this.el).html(this.template(this.model.toJSON()));
        this.setContent();
        return this;
    },
    onClick: function(){
        searchTemp.add(this.model);
        console.log("model added to searchTemp, current state of searchTemp:");
        console.log(searchTemp);
    }
});

window.oldListView = Backbone.View.extend({
    template:_.template($('#oldList').html()), 
    render: function (eventName) {
        $(this.el).html(this.template());
        return this;
    }
});    

window.deleteOldView =  Backbone.View.extend({
    template:_.template($('#deleteOld').html()), 
    render: function (eventName) {
        $(this.el).html(this.template());
        return this;
    }
});

window.shoppingListView = Backbone.View.extend({
    template:_.template($('#shoppingList').html()),
    initialize: function() {
    shopList.generate();
    },

    render: function (eventName) {
    var variables = {

    };
    $(this.el).html(this.template(variables));
    return this;
    }

});

var AppRouter = Backbone.Router.extend({
    routes:{
        "":"home",
        "newSearch":"newSearch",
        "newList/:id":"newList",
        "savedRecipes":"savedRecipes",
        "oldList":"oldList",
    "deleteOld":"deleteOld",
    "shoppingList":"shoppingList"
    },
    initialize:function () {
        // Handle back button throughout the application
        $('.back').live('click', function(event) {
            window.history.back();
            return false;
        });
        this.firstPage = true;
    },
    home:function () {
        this.changePage(new HomeView());
    },
    newSearch:function () {
        this.changePage(new newSearchView());
    },
    newList:function (theID) {
        var tempModel = searchTemp.get(theID);
        this.changePage(new newListView({
            model: tempModel,
            id: theID
        }));
        //console.log(permStorage.taggedForList());
    },
    savedRecipes:function () {  
        this.changePage(new savedRecipesView());      
    },
    oldList:function () {
        this.changePage(new oldListView());
    },
    deleteOld:function () {
        this.changePage(new deleteOldView());
    },
    shoppingList:function () {
    this.changePage(new shoppingListView());
    },
    changePage:function (page) {
        $(page.el).attr('data-role', 'page');
        page.render();
        $('body').append($(page.el));
        var transition = $.mobile.defaultPageTransition;
        // We don't want to slide the first page
        if (this.firstPage) {
            transition = 'none';
            this.firstPage = false;
        }
        $.mobile.changePage($(page.el), {changeHash:false, transition: transition});
    }

});

$(document).ready(function () {
    console.log('document ready');
    app = new AppRouter();
    Backbone.history.start();
    searchTemp = new TodoList(); //this stores searched recipes, rename to myRecipes
    shopList = new ShopList();
});

<!DOCTYPE html>
<html class="ui-mobile-rendering">
<head>
    <title>RECILIST</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/jquery.mobile-1.0.1.min.css"/>

    <!-- The Templates -->
    <script type="text/template" id="home">  
         <div data-role="header"  >
            <h1 style="color:black">Recilist Home</h1>
                </div>
                 <img src="store.jpg" id="vege">

        <div data-role="content" style="color:red">
            <!-- <h3>recilist home page</h3>
                 <p>Welcome to Recilist!</p>
                <p>This is the Home page. </p>
                -->
            <h1>Save Recipes & <br/>
            Create Shopping <br/>
             Lists Anywhere</h1>
            <p class="blurb">Create and manage your grocery shopping list, FIND and <br/>SAVE your favorite recipes from across the web,<br/> get great SAVINGS and share with your entire family - for FREEEE!!!!</p>

            <ul data-role="listview" id="choices" data-inset="true">
                <li><a style="color:red" href="#newSearch">Search for new Recipes</a></li>
                <li><a style="color:red" href="#savedRecipes">View saved Recipes</a></li>
            </ul>

        </div>

        <div data-role="footer" class="ui-bar" id ="footer">
            <h5 style="color:black"> powered by <img src="http://static.yummly.com/api-logo.png"> </h5>
        </div>
    </script>

    <script type="text/template" id="newSearch">  
        <div data-role="header">
            <h1 style="color:black">Search for a new Recipe</h1> 
        </div>

        <div data-role="content">
            <input name= "recipe-search" id="recipe-search" data-icon="search" type="text" placeholder="What do you want to cook?">
            <ul id="search-list" data-role="listview" data-inset="true">
              <% for(var i in results) { %>
                <li> <img src="<%= results[i].imgUrl %>"> <a href="#newList/<%= results[i].id%>"><%= results[i].title %> </a> </li>
              <% } %> 
            </ul>
        </div>
        <img src="list.png" id="list">
        <div data-role="footer" class="ui-bar">
            <a href="#" data-icon="back" class="back ui-btn-left">Back</a>
            <a href="#" data-icon="home">Home</a>
        </div>
    </script>

    <script type="text/template" id="newList">
        <div data-role="header">
            <h1 style="color:black"> <%=recipe_name%> </h1>
        </div>

        <div>
        <div data-role="content">
          <img src= <%=img_url%> >
          <h4>Recipe Rating: <%= rating %> </h4>
          <h4>Total time to Prepare: <%= timetomake %> </h4>
          <h4>Flavor Ratings</h4>
          <div class="ui-block-a"> <div class="ui-bar ui-bar-e"> <h4>saltiness</h4> <%= salty %> </div> </div>
          <div class="ui-block-b"> <div class="ui-bar ui-bar-e"> <h4>sourness</h4> <%= sour %> </div> </div>
          <div class="ui-block-c"> <div class="ui-bar ui-bar-e"> <h4>sweetness</h4> <%= sweet %> </div> </div>
          <div class="ui-block-d"> <div class="ui-bar ui-bar-e"> <h4>bitterness</h4> <%= bitter %> </div> </div>            
        </div>

        <div data-role="collapsible" data-collapsed="true">
          <h3>Ingredients</h3>
            <ul id="ingr-list" data-role="listview" data-inset="true">
              <% for(var i in ingrs) { %>
                <li><%= ingrs[i] %></li>
              <% } %>
            </ul>
        </div>

        <div data-role="content">
          <input type="button" id="save-this" data-icon="check" value="save to My Recipies">
          <div>
           <img src="store3.jpg" id="aisle">
        </div>

        <div data-role="footer" class="ui-bar">
            <a href="#" data-icon="back" class="back ui-btn-left">Back</a>
            <a href="#" data-icon="home">Home</a>
        </div>
    </script>

    <script type="text/template" id="savedRecipes">
        <div data-role="header">
            <h1>My Recipes</h1>
        </div>

        <div data-role="content">
            <p>list of saved recipes, retrieved from local storage</p>
            <p>Saved Recipes:</p>
            <ul id="search-list" data-role="listview" data-inset="true">
              <% for(var i in results) { %>
                <li> <img src="<%= results[i].imgUrl %>"> <a href="#newList/<%= results[i].id%>"><%= results[i].title %> </a> </li>
              <% } %> 
            </ul>
           <a href="#deleteOld" data-role="button">manage saved recipes</a>
           <a href="#shoppingList" data-role="button">generate shopping list</a>
        </div>

        <div data-role="footer" class="ui-bar">
            <a href="#" data-icon="back" class="back ui-btn-left">Back</a>
            <a href="#" data-icon="home">Home</a>
        </div>
    </script>

    <script type="text/template" id="deleteOld">
        <div data-role="header">
            <h1>Delete Recipes</h1>
        </div>

        <div data-role="content">
            <p>select which recipes you wish to delete from local storage</p>
            <p>recipes:</p>
            <p>(currently lacks functionality to populate this list)</p>
            <ul data-role="listview" data-inset="true" id="recipe-list">

            </ul>
            <input type="button" data-icon="delete" value="delete selected" />
        </div>

        <div data-role="footer" class="ui-bar">
            <a href="#" data-icon="back" class="back ui-btn-left">Back</a>
            <a href="#" data-icon="home">Home</a>
        </div>
    </script>

    <script type="text/template" id="oldList">
      <div data-role="header">
          <h1>---NAME OF THE RECIPE----</h1> 
      </div>

      <div data-role="content">
          <p>This is a list of all the ingredients in this recipe</p>
          <p>Ingredients:</p>
          <ul data-role="listview" data-inset="true">
              <li>ingredient 1</li>
              <li>ingredient 2</li>
              <li>ingredient 3</li>
              <li>ingredient 4</li>
          </ul>
          <p> (button to view the recipe) </p>
      </div>

      <div data-role="footer" class="ui-bar">
          <a href="#" data-icon="back" class="back ui-btn-left">Back</a>
          <a href="#" data-icon="home">Home</a>
      </div>
    </script>

    <script type="text/template" id="shoppingList">
      <div data-role="header">
          <h1>shopping list</h1> 
      </div>

      <div data-role="content">
        <ul id="search-list" data-role="listview" data-inset="true">
          <% for(var i in results) { %>
            <li> <input type="checkbox" name=i id=i class="custom" /></li>  <!-- these checkboxes are HIDEOUSLY DEFORMED-->
            <label for=i> <%= results[i].title %> </label>
          <% } %> 
        </ul>
      </div>

      <div data-role="footer" class="ui-bar">
          <a href="#" data-icon="back" class="back ui-btn-left">Back</a>
          <a href="#" data-icon="home">Home</a>
      </div>      
    </script>

    <script type="text/template" id="list-item">
      <li>cheese</li>
    </script>
  <!--      <li> <img src= <%=img_url%> > <a href="#newList/"+ <%=model_id%> +"' class='ui-link-inherit'>" + <%=model_title%> + "</a> </li> -->

    <!-- The Scripts -->
    <script src="lib/jquery-1.7.1.min.js"></script>
    <script src="js/jqm-config.js"></script>
    <script src="lib/jquery.mobile-1.0.1.min.js"></script>
    <script src="js/underscore.js"></script>
    <script src="lib/backbone-min.js"></script>    
    <script src="js/backbone.localStorage.js"</script>
    <script src="js/json2.js"></script>
    <script src="js/main.js"></script>
</head>

<body></body>

</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:58:29.220

要增强动态创建的列表视图，您需要使用以下内容刷新标记。

```
$('[data-role=listview]').listview('refresh'); 
```

# jquery - 无法在 Chrome 扩展中使用 jQuery ($.Storage.get)

> ID：16113643
> 
> 赞同：2
> 
> 时间：2013-04-19T21:19:11.240
> 
> 标签：jquery, google-chrome-extension, google-chrome-storage

当我在 Chrome 控制台中输入时，它会从某个网站`$.Storage.get('ui_s')`返回值。 但是当我尝试在我的 Chrome 扩展程序中使用它时，它会返回带有以下文本的错误： 我做错了什么？我在扩展中使用的所有其他 jQuery 函数都可以正常工作。*我找不到答案，因为所有搜索引擎都忽略了“$”。**在我的搜索请求中。*`"th_classic"`
`TypeError: Cannot call method 'get' of undefined`

# sitecore - Sitecore：在页面编辑器中以编程方式退出编辑模式

> ID：16113644
> 
> 赞同：2
> 
> 时间：2013-04-19T21:19:11.370
> 
> 标签：sitecore, sitecore6, page-editor

在 Sitecore 的页面编辑器模式下单击编辑按钮时，我将 DIV 的样式设置为

```
 top: 0; 
```

使其出现在页面编辑器按钮（保存、保存和关闭、插入等）的顶部。此 div 阻止内容编辑器使用普通的页面编辑器按钮，并强制它们使用我添加到 DIV 的自定义保存、保存和关闭以及关闭按钮。

有没有办法在他们单击我的自定义关闭或保存并关闭按钮时以编程方式退出编辑模式？我不想将它们从页面编辑器中注销（只需将它们退出编辑模式）。我只有 1 页我正在执行此操作，因此我宁愿不更改 Sitecore 中的配置来实现此目的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:28:05.680

查看这篇文章：[在 Sitecore 中，如何更改或设置 PageMode](https://stackoverflow.com/questions/13712832/in-sitecore-how-to-change-or-set-pagemode)

看起来你可以这样做：

```
Context.Site.SetDisplayMode(Sitecore.Sites.DisplayMode.Normal, Sitecore.Sites.DisplayModeDuration.ResetAfterRequest); 
```

或者，您可以将`sc_mode=normal`或添加`sc_mode=preview`到 URL 的查询字符串。

# android - 按下时如何更改图像大小

> ID：16113645
> 
> 赞同：6
> 
> 时间：2013-04-19T21:19:12.470
> 
> 标签：android, image, imageview

我目前正在开发一个 android 应用程序，我想实现一个我没有找到答案的效果，即使经过一些搜索。

我想获得的效果是在图像上。通常，当您按下图像时，您会在图像上应用某种色调以显示一些反馈，但我想更进一步，我不想应用色调，而是在图像上应用某种 os 比例图片。

例如，我有以下图像[Normal Image](https://docs.google.com/file/d/0BzC0L6HZl56TSmE5NXU2anFMbjQ/edit?usp=sharing)，如果我按下图像（并且按住它的同时），我希望图像缩小一点，就像这个[Pressed Image](https://docs.google.com/file/d/0BzC0L6HZl56TVHBHLW5RSWFDZFE/edit?usp=sharing)

注意-黑色部分不是图像的一部分，而是背景的一部分。图像只会是蓝色方块。

感谢您的任何帮助！:)

PS-我无法在此处发布图像，因为我没有足够的声誉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:29:25.397

您需要设置显示图像的 ImageView 的 onTouchListener，以便它替换显示的图像。这是在您按下或取消按下视图（在本例中为图像）时运行的侦听器。

示例代码：

```
ImageView iv = (ImageView)findViewById(R.id.my_image_view);
iv.setOnTouchListener(new ImageView.OnTouchListener() {

    @Override
    public boolean onTouch(View v, MotionEvent e) {
        if (e.getAction()==MotionEvent.ACTION_DOWN)
            // Write code here that sets the imageview to display the pressed image
        else if (e.getAction()==MotionEvent.ACTION_UP)
            // Write code here that sets the imageview to display the unpressed image
    }
}); 
```

onTouchListener 参考：http: [//developer.android.com/reference/android/view/View.OnTouchListener.html](http://developer.android.com/reference/android/view/View.OnTouchListener.html)

参考 ImageView（用于替换显示的图像）：http: [//developer.android.com/reference/android/widget/ImageView.html](http://developer.android.com/reference/android/widget/ImageView.html)

# angularjs - ngRepeat 和指令执行顺序

> ID：16113647
> 
> 赞同：5
> 
> 时间：2013-04-19T21:19:20.423
> 
> 标签：angularjs, angularjs-directive, angularjs-ng-repeat

当 Angular 指令包含 ngRepeat 元素时，ngRepeat 执行似乎发生在包含指令的链接执行之后。

是否有一种机制（$watch、$observe 等）可用于在 ngRepeat 执行后连接响应？

以下是行为示例： [http ://plnkr.co/edit/yBiSvveeSissU7Rik6Kp?p=preview](http://plnkr.co/edit/yBiSvveeSissU7Rik6Kp?p=preview)

我想在指令中输入可用的状态下运行。

我的主要目标是从包含指令中更改 ngRepeat 的元素。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T22:10:09.200

确定 ng-repeat 何时完成的典型方法是编写一个指令来检查是否`$last`为真。然后，您可以在`$timeout`回调或`$evalAsync`.

有关更多详细信息和示例，请参阅[ng-repeat 完成时调用函数](https://stackoverflow.com/questions/15207788/calling-a-function-when-ng-repeat-has-finished)

# python - 基本 Python 脚本 If 语句

> ID：16113648
> 
> 赞同：1
> 
> 时间：2013-04-19T21:19:23.053
> 
> 标签：python, if-statement

我正在搞乱这个基本的 Magic 8 Ball 程序，我试图让它只允许是或否的问题我认为它只会除了第一个单词“will”或“do”的问题只允许那些话？

这是脚本：

```
import random
import time
print "Welcome to Magic Eight Ball !"
while True:
    def Magic8(a):
        foo = ['Yes', 'No', 'Maybe', 'Doubtful', 'Try Again']
        from random import choice
        print choice(foo)

    a = raw_input("Question: ")
    if a == "exit":
        exit()
    #If Stament here
    print "Determining Your Future..."
    time.sleep(2)
    Magic8(a) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T21:21:18.823

```
if a.split(None, 1)[0].lower() in {'will', 'do'}:
    print "Determining Your Future..."
    time.sleep(2)
    magic8(a) # function names are usually not capitalized 
```

[`str.split()`](http://docs.python.org/2/library/stdtypes.html#str.split)在空格上分割句子，[`str.lower`](http://docs.python.org/2/library/stdtypes.html#str.lower)应该处理大写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T21:22:52.810

您可以使用`str.startswith`并传递一组接受的单词。

```
if a.lower().startswith(("will ", "do ")):
   # Do your magic. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T21:51:33.193

也许如果你有小词，你可以使用 elif 或 or

```
if a=="exit":
    exit()
elif a=="optionOne":
     doSomething
else:
    print "word not alowed" 
```

或者你可以这样做

```
if a=="exit" or a=="notAllowedWord":
    exit() 
```

# php - Using PHP's preg_match_all to extract a URL

> ID：16113652
> 
> 赞同：1
> 
> 时间：2013-04-19T21:19:35.880
> 
> 标签：php, regex, url

I have been struggling for a while now to make the following work. Basically, I'd like to be able to extract a URL from an expression contained in an HTML template, as follows:

```
{rssfeed:url(http://www.example.com/feeds/posts/default)} 
```

The idea is that, when this is found, the URL is extracted, and an RSS feed parser is used to get the RSS and insert it here. It all works, for example, if I hardcode the URL in my PHP code, but I just need to get this regex figured out so the template is actually flexible enough to be useful in many situations.

I've tried at least ten different regex expressions, mostly found here on SO, but none are working. The regex doesn't even need to validate the URL; I just want to find it and extract it, and the delimiters for the URL don't need to be parens, either.

Thank you!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T21:24:14.117

这对你有用吗？

```
'@((https?://)?([-\w]+\.[-\w\.]+)+\w(:\d+)?(/([-\w/_\.]*(\?\S+)?)?)*)@' 
```

我用它来匹配文本中的 URL。

**例子：**

```
$subject = "{rssfeed:url(http://www.example.com/feeds/posts/default)}";
$pattern ='@((https?://)?([-\w]+\.[-\w\.]+)+\w(:\d+)?(/([-\w/_\.]*(\?\S+)?)?)*)@';    
preg_match_all($pattern, $subject, $matches);

print($matches[1][0]); 
```

**输出：**

```
http://www.example.com/feeds/posts/default 
```

**笔记：**

还有一篇关于 Daring Fireball 的好文章，名为[“An Improvement Liberal, Accurate Regex Pattern for Matching URLs](http://daringfireball.net/2010/07/improved_regex_for_matching_urls) ”，您可能会感兴趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T21:30:29.993

`/\{rssfeed\:url\(([^)]*)\)\}/`

```
preg_match_all('/\{rssfeed\:url\(([^)]*)\)\}/', '{rssfeed:url(http://www.example.com/feeds/posts/default)}', $matches, PREG_PATTERN_ORDER);
print_r($matches[1]); 
```

您应该能够获得`$matches[1]`..中可用内容的所有 url

注意：这只会获取`{rssfeed:url()}`格式的 url，而不是内容中的所有 url。

你可以在这里试试这个：[http ://www.spaweditor.com/scripts/regex/index.php](http://www.spaweditor.com/scripts/regex/index.php)

# java - 无法在 wav 文件中找到 2 个声音帧之间的差异

> ID：16113653
> 
> 赞同：0
> 
> 时间：2013-04-19T21:19:37.440
> 
> 标签：java, audio, wav, audio-streaming, javasound

我想比较两个声音帧的相似程度，以便区分它们。

我这样做是因为，通常当我们播放视频并出现广告时，通常会出现声音下降或声音增加。

所以我想比较 wav 文件中的声音帧以找出差异。

以下代码查找每个视频帧的声波幅度

1 个视频帧对应 2000 个声音帧。

代码---->

```
for (offset=waveFileHeaderOffset; ((offset < raf.length()) && (videoFrames < VideoFile.MAX_POSSIBLE_FRAMES)); offset+=2*AUDIO_PER_FRAME) 
{
          audioAmplitude = 0.0;    
          for (offset2=0; offset2 < 2*AUDIO_PER_FRAME; offset2+=2 )
           {
                double temp = 0.0;
                raf.seek(offset+offset2);
                raf.read(bytes);
                temp = (double) Math.abs((double)( ( ( bytes[1]  << 8 ) | ( bytes[0] & 0xff ) ) / 32768.0 ));
                audioAmplitude += temp;

            }
            audioAmplitude /= AUDIO_PER_FRAME;//we are taking average of all frames corresponding to video frame

            ArrayList<Double> tempFrameData = new ArrayList<Double>();
            (VideoFile.frameHashMap.get(videoFrames).clone());
            tempFrameData.add(audioAmplitude);

            VideoFile.frameHashMap.put(videoFrames, tempFrameData);

            videoFrames++;

     } 
```

问题在于，由于幅度除以 32768 以对其进行归一化。我无法确定区分它们的阈值。

所有幅度都非常接近。我想我在计算幅度时犯了一些错误。

任何人都可以评论我如何使用这些幅度比较两个帧以在视频之间出现广告时发现显着差异。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:29:29.620

[http://en.wikipedia.org/wiki/Loudness_war](http://en.wikipedia.org/wiki/Loudness_war)
这篇文章主要是关于音乐的，但它也适用于商业广告。最有趣的部分是动态范围缩小。

研究发现，人类听觉更喜欢“响亮​​”的信号而不是“微弱”的信号。
当你想卖东西时，它会派上用场。

# c# - How do I check for binary vs. text in an HttpWebRequest in c#?

> ID：16113657
> 
> 赞同：2
> 
> 时间：2013-04-19T21:19:50.863
> 
> 标签：c#, httpwebrequest, httpwebresponse, getresponsestream

Is there a way to determine if the response from an `HttpWebRequest` in C# contains binary data vs. text? Or is there another class or function I should be using to do this?

Here's some sample code. I'd like to know before reading the `StreamReader` if the content is not text.

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create("http://www.someurl.com");
request.Method = WebRequestMethods.Http.Get;
using (WebResponse response = request.GetResponse())
{
    // check somewhere in here if the response is binary data and ignore it 
    using (StreamReader reader = new StreamReader(response.GetResponseStream()))
    {
        string responseDetails = reader.ReadToEnd().Trim();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T00:07:12.367

*通常*，网站会在 Content-Type 标头中告诉您它们返回的数据类型。您可以通过`ContentType`从响应中获取属性来确定这一点。

但众所周知，网站会撒谎。或者什么都不说。两个我都见过。如果没有 Content-Type 标头或者您不想信任它，那么您可以知道那里有哪些类型的数据的唯一方法就是阅读它。

但是，如果您不信任该站点，为什么要从中读取数据？

# java - 使用 java 的客户端/服务器程序不起作用

> ID：16113659
> 
> 赞同：1
> 
> 时间：2013-04-19T21:20:08.337
> 
> 标签：java, client-server

我正在尝试用 java 创建一个客户端/服务器程序。

当客户端连接到服务器时，服务器将向他显示一条消息以输入第一个值当用户写入第一个值时服务器向他发送一条消息以写入 sencd 值当用户写入第二个值时服务器将向他显示操作列表 ans 等到客户端写入操作编号，然后服务器将向他发送此操作的结果。

当我编写程序代码并运行服务器然后运行客户端时，它不会做任何事情，服务器被阻止做任何事情，客户端也是如此。

这是我尝试过的代码：

**对于客户：**

```
import java.net.*;
import java.util.Scanner;
import java.io.*;

public class Client {

    final static String ADRSS = "localhost";
    final static int PORT = 1234;
     static Socket s = null;

    public static void main(String[] args) {

        try{

                Scanner cn = new Scanner(System.in);
                s = new Socket(ADRSS, PORT);
                PrintWriter out = new PrintWriter(s.getOutputStream());
                BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
                in.readLine();
            out.println(cn.nextLine());
            out.flush();
            in.readLine();
            out.println(cn.nextLine());
            out.flush();
            in.readLine();
            out.println(cn.nextLine());
            out.flush();

            System.out.println("Res = " + in.readLine());
            out.flush();

        }
        catch(IOException e){e.printStackTrace();

        }

    }

} 
```

**对于服务器：**

```
 import java.net.*;
import java.io.*;

public class Server {

    final static int PORT = 1234;
    private static ServerSocket server;

    public static void main(String[] args) {
        Socket s = null;
        try {
        server = new ServerSocket(PORT);
        s = server.accept();
        PrintWriter out = new PrintWriter(s.getOutputStream());
        BufferedReader in = new BufferedReader(new InputStreamReader(s.getInputStream()));
        out.println("Donner le premier nombre : ");
        out.flush();
        double n1 = Double.parseDouble(in.readLine());
        out.println("Donner le deuxiéme nombre : ");
        out.flush();
        double n2 = Double.parseDouble(in.readLine());

        out.println("Donner l'op : ");
        out.flush();

        String choix = in.readLine();
        String res = null;

        switch(choix){

            case "1" :
                res = String.valueOf(n1 + n2);
                break;
            case "2" : 
                res = String.valueOf(n1 - n2);
                break;
            case "3" :
                res = String.valueOf(n1 * n2);
                break;
            case "4" :
                res = (n2 == 0) ? "Impossible d'éfectuer l'op" : String.valueOf(n1 / n2);
                break;
            default :
                res = "erreur";
            }

        out.println(res);
        out.flush();

        }catch(IOException e) {
            e.printStackTrace();
        }finally{
            try{
                s.close();
            }catch(IOException e){e.printStackTrace();}
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:42:29.410

`PrintWriter`使用常规后不会刷新输出`print`（请参阅[PrintWriter 的文档](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html)）。你必须手动冲洗它。但是，真正的原因是您的客户等待换行符，这永远不会发生。更改为`out.println`在服务器端应该可以运行，也包括冲洗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:44:34.037

首先，在服务器中的每次打印之后，添加

```
out.flush(); 
```

其次，您要求 nextLine() 但不打印 \n ，要么将 \n 添加到每个字符串的末尾，要么使用 out.println

# c++ - QThread 内存泄漏

> ID：16113661
> 
> 赞同：3
> 
> 时间：2013-04-19T21:20:19.573
> 
> 标签：c++, qt, qt5

主.cpp：

```
#include <QCoreApplication>
#include <QtCore>
#include "myobject.h"

QThread* cThread;
MyObject* cObject;

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    cThread = new QThread();
    cObject = new MyObject();
    cObject->moveToThread(cThread);

    QObject::connect(cThread, SIGNAL(started()),
                     cObject, SLOT(doWork()));

    QObject::connect(cThread, SIGNAL(finished()),
                     cThread, SLOT(deleteLater()));

    QObject::connect(cThread, SIGNAL(finished()),
                     cObject, SLOT(deleteLater()));

    cThread->start();

    return a.exec();
} 
```

我的对象.cpp：

```
#include "myobject.h"

MyObject::MyObject(QObject *parent) :
    QObject(parent)
{
}

void MyObject::doWork()
{
    qDebug() << "Hi";
    QThread::currentThread()->quit();
    return;
} 
```

我的对象.h：

```
#ifndef MYOBJECT_H
#define MYOBJECT_H

#include <QtCore>

class MyObject : public QObject
{
    Q_OBJECT
public:
    explicit MyObject(QObject *parent = 0);

signals:

public slots:
    void doWork();

};

#endif // MYOBJECT_H 
```

显然，根据：[https://stackoverflow.com/a/16062717](https://stackoverflow.com/a/16062717)，存在内存泄漏，但我该如何解决呢？我想我必须返回事件循环然后调用退出？但问题是我无权访问事件循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T00:53:42.547

没有内存泄漏。[如果您坚持它的对象模型](http://qt-project.org/doc/qt-4.8/object.html)、[对象树和所有权](http://qt-project.org/doc/qt-4.8/objecttrees.html)， Qt 确实会正确清理。我也喜欢遵循[文档中的示例](http://qt-project.org/doc/qt-4.8/qthread.html#details)。

这是您引用的示例，并在`deleteLater()`.

主文件

```
#include <QCoreApplication>
#include <QtCore>
#include <QThread>

class MyThread : public QThread
{
    Q_OBJECT
public slots:
    void deleteLater()
    {
        qDebug() << Q_FUNC_INFO;
        QThread::deleteLater();
    }
};

class MyObject : public QObject
{
    Q_OBJECT
public:
    explicit MyObject(QObject *parent = 0){}

signals:

public slots:
    void deleteLater()
    {
        qDebug() << Q_FUNC_INFO;
        QObject::deleteLater();
    }

    void doWork()
    {
        qDebug() << "Hi";
        QThread::currentThread()->quit(); // It is supposed to stop here, but it doesn't.
        return;
        for (int i = 0; i < 1000000; i++) {
            qDebug() << i;
        }
    }

};

QThread* cThread;
MyObject* cObject;

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);
    cThread = new MyThread();
    cObject = new MyObject();
    cObject->moveToThread(cThread);

    QObject::connect(cThread, SIGNAL(started()),
                     cObject, SLOT(doWork()));

    QObject::connect(cThread, SIGNAL(finished()),
                     cThread, SLOT(deleteLater()));

    QObject::connect(cThread, SIGNAL(finished()),
                     cObject, SLOT(deleteLater()));

    cThread->start();

    return a.exec();
} 
```

输出：

```
Hi
void __thiscall MyObject::deleteLater(void)
void __thiscall MyThread::deleteLater(void) 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T10:14:07.090

我是链接上的海报。实际上默认连接没有内存泄漏。通过子类化 deleteLater 和像@phyatt 这样的析构函数，你得到了：

```
Hi 
void MyObject::deleteLater() 
virtual MyObject::~MyObject()  Being deleted 
void MyThread::deleteLater() 
virtual MyThread::~MyThread()  Being deleted 
```

但是，如果您`Qt::QueueConnection`在连接中使用例如，您将获得：

```
Hi 
void MyThread::deleteLater() 
virtual MyThread::~MyThread()  Being deleted 
```

并且对象`cObject`被泄露。

线程何时***有效***退出是未记录的。所以我不能争论这种行为是否总是一样的。一种可能性是让线程启动器负责进行清理工作。例如：

```
 void cleanup(){
  cThread->exit();
  cThread->wait();
  delete cThread;
  delete cObject;
 } 
```

总结一下，您不必使用此代码修复任何内容。

# visual-studio-2012 - 多个js函数文件的单个intellisense文件？

> ID：16113663
> 
> 赞同：0
> 
> 时间：2013-04-19T21:20:33.407
> 
> 标签：visual-studio-2012, intellisense, javascript-intellisense

我有functions1.js、functions2.js和functions3.js。每个都有一个函数，分别是funcA、funcB和funcC。我创建了一个名为“functions.intellisense.js”的文件并将其添加到 _reference.js。然后，我在 test.js 文件中添加了对 _reference.js 的引用。

为什么智能感知不起作用？

**函数.intellisense.js**

```
intellisense.annotate(funcA, function () {
    /// <signature>
    /// <summary>Function A</summary>
    /// </signature>
});

intellisense.annotate(funcC, function () {
    /// <signature>
    /// <summary>Function A</summary>
    /// <param name="message">message</param>
    /// </signature>
}); 
```

**_reference.js**

```
/// <reference path="functions.intellisense.js" /> 
```

**函数1.js**

```
function funcA() {
    alert("this is function A");
} 
```

**函数3.js**

```
function funcC(message) {
    alert("this is function C " + mesage);
} 
```

**测试.js**

```
/// <reference path="Scripts/_reference.js" />
func  //<--- expecting this to show intellisense 
```

甚至有可能做到这一点吗？我想这样做有几个原因，首先只是*结合*文档。其次，我希望能够预先记录功能。也许在想法前加上“TODO”，就像我没有编写 Test.Add() 函数一样，我仍然可以将它放在 intellisense 文件中，它会弹出“TODO：添加测试”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-08T06:20:14.923

我已经评论过您必须如何设置引用 - 如果您希望它们出现在 IntelliSense 中，则必须在将它们传递给 intellisense.annotate 之前声明函数。函数声明驱动 IntelliSense 完成列表，注释调用更新已声明函数的文档。

> 我希望能够预先记录功能。也许在想法前加上“TODO”，就像我没有编写 Test.Add() 函数一样，我仍然可以将它放在 intellisense 文件中，它会弹出“TODO：添加测试”。

您可以通过为 IntelliSense 编写自己的帮助程序来做到这一点，例如：

```
function stubFunction(functionName, annotation) {
    if (!window[functionName]) {
        window[functionName] = function () { };
    }
    intellisense.annotate(window[functionName], annotation);
} 
```

调用`stubFunction`将创建存根函数声明并在一次调用中对其进行注释：

```
stubFunction("funcA", function () {
    /// <signature>
    /// <summary>Function A does something important</summary>
    /// </signature>
}); 
```

现在，如果您`func`在编辑器中键入，您将看到 funcA 与您的文档注释一起出现在完成列表中。

该`stubFunction`实用程序可以放在 functions.intellisense.js 中，然后在该文件中用于预先记录您的所有函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-06T14:52:26.533

如果我修改 functions.intellisense.js 以包含对包含实际函数的脚本文件的引用，它似乎可以按预期工作。

```
/// <reference path="functions1.js" />
/// <reference path="functions3.js" />
intellisense.annotate(funcA, function () {
    /// <signature>
    /// <summary>Function A does something important</summary>
    /// </signature>
});

intellisense.annotate(funcC, function () {
    /// <signature>
    /// <summary>Function C does something equally important</summary>
    /// <param name="message">message</param>
    /// </signature>
}); 
```

我希望避免这种情况，因为正如我所说，这些函数可能是尚未编写的函数的存根，但这仍然有效。我会等待接受这个答案，看看乔丹是否有更多建议。

# c# - How would you test it? How many tests?

> ID：16113664
> 
> 赞同：1
> 
> 时间：2013-04-19T21:20:35.163
> 
> 标签：c#, unit-testing

I have this class (it's more pseudocode)

```
 public class Roles
{
    private ProcessData processData;

    Roles(ProcessData pd)
    {
        processData = pd;
    }

    public string[] GetLoginsThatCanCallAction(string actionName)
    {
        return GetPeopleThatCanCallActionFromDb(actionName)
            .Union(processData.ProcessOwner)
            .Union(GetFromDb(Role.Administrators);
            // there may be many more Union(xyz) calls here
            .ToArray();
    }

    // I can refactor those methods to be mockable
    private GetPeopleThatCanCallActionFromDb(...)
    private GetFromDb(...)
} 
```

Now my question is. Would you write one test for each Union call in GetLoginsThaatCanRunAction method? Or is is just enough that I write one test and assert that method returns logins returned from all methods called inside GetLoginsThatCanCallAction.

I can see reasons to do it both ways. But maybe someone will convince me to on or the other solution.

Edit: I think I wasn't clear with my question: I wanted to ask if you would write this test

```
 var pd = new ProcessData()
pd.ProcessOwner = "Owner";
var r = new Roles(processData)
SetupSoThatCallsForPeopleThatCanCallActionWillReturn("Joe");
SetupSoThatCallForAdministratorsWillReturn("Administrator");

var logins = r.GetLoginsThatCanCallAction("some action");

Assert.That(logins, Contains("Owner");
Assert.That(logins, Contains("Joe");
Assert.That(logins, Contains("Administrator"); 
```

or would you split it into 3 separate tests with one Assert in each one?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:38:25.653

有趣的话题，您的问题是您在开发了一些代码后尝试编写测试用例。我会为每个工会电话进行 1 次测试。原因是你想测试你从所有方法返回的值还是你想测试在不同的假设下每个方法都会返回一个登录名？

对我来说，更重要的是知道每种方法都会根据不同的用例返回登录信息，而不是通用测试返回我通过/失败。

我希望这是有道理的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T21:40:22.570

我会写一个测试来`GetLoginsThatCanCallAction`模拟外部对象。从您的示例来看，这可能意味着嘲笑`Union`电话。原因是，当我编写这段代码时，我并不关心`Union`. （我有一些我什至还没有写的案例）。

如果联合调用行为可以改变（即它引发异常），我将对其中的每一个进行测试。但是，我会让我的测试套件为我生成这些测试用例，而不是尝试手动编写它们。

您担心`GetLoginsThatCanCallAction`行为正确。您还希望控制`Union`调用返回的内容。

话虽如此，您还希望有一个自动化测试来执行整个过程，`GetLoginsThatCanCallAction`以便您在单元测试中验证您正在模拟的类之间的连接。除非不可能自己手动执行该过程。

另一个注意事项，如果课程很难测试。那是一种代码味道，表明您的设计没有达到应有的模块化程度。

如果您需要这样做来测试函数，我也会避免模拟类的内部方法。这表明您的班级隐藏着另一个班级。你的班级正在做不止一件事[，S in SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T21:38:24.490

您应该只使用被测单元的公共 API。你的单位有单一的公共方法`GetLoginsThatCanCallAction`。这个方法是调用其他方法，还是作为一个大方法实现都没有关系。这是一个实现细节。真正重要的是此方法是否与依赖项正确通信并返回预期结果：

```
// Arrange
Mock<IProcessData> processData = new Mock<IProcessData>();
processData.Setup(d => d.ProcessOwner).Returns(new[] { "Bob" });
var expected = new []{ "Bob", "Joe" };
// Act
var actual = roles.GetLoginsThatCanCallAction("Drink");
// Assert
processData.VerifyGet(d => d.ProcessOwner); // verify communication
CollectionAssert.AreEquivalent(expected, actual); // verify result 
```

# actionscript-3 - 在 AS3 中，如何在电影开始时运行代码？

> ID：16113667
> 
> 赞同：0
> 
> 时间：2013-04-19T21:20:48.917
> 
> 标签：actionscript-3, class, static, initialization, initializer

我正在为我的游戏制作关卡编辑器，并希望能够访问我的游戏中包含的所有类的列表。我的 Main 类中有一个静态函数：

```
public static function register(c:Class, category:String):void {
    if (classRegister[category] == null) {
        classRegister[category] = new Array();
    }           
    classRegister[category].push(c);        
} 
```

然后，在我要注册的每个类中，我放置了一个静态初始化程序：

```
{           
    Main.register(prototype.constructor, "motion");     
} 
```

但是，静态初始化器仅在第一次使用该类时才被调用。有没有办法让一个类在游戏开始时强制自己被使用？我知道我可以在主文件中显式列出所有已注册的类，但这是次优的，因为每当添加需要注册的新类时都必须编辑主文件。

谢谢，

瓦尔加

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T00:03:01.210

列出 ApplicationDomain 中的所有类定义，并根据命名约定或类型（接口？）过滤它们。

为此，您可以使用`ApplicationDomain.getQualifiedDefinitionNames()`( [docs](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/ApplicationDomain.html#getQualifiedDefinitionNames%28%29) )，但前提是您的目标是 FlashPlayer 11.3+。

作为旁注，您必须在某处引用此类，作为类字段，以便编译器知道它必须在 SWF 中包含此类。您还可以将要引用的类放在 SWC 库中并`-compiler.include-libraries`用作编译器设置（在这种情况下，我想知道您的静态初始化程序是否被调用？）。

# hibernate - 加入前订购第二张桌子

> ID：16113669
> 
> 赞同：0
> 
> 时间：2013-04-19T21:20:57.417
> 
> 标签：hibernate, join, criteria

我有`TopicEntity`其中包含许多`PostEntity`. 每一个都`PostEntity`属于一个`TopicEntity`。我需要按最后一个帖子创建日期对主题进行排序，这是`creationDate`主题中最新帖子的属性。

我认为需要发生的事情：

1.  获取主题
2.  加入属于主题的帖子
3.  按创建日期对帖子进行排序
4.  获取每个主题的最新帖子并使用其日期对主题进行排序

这是我目前拥有的：

```
this.session.createCriteria(TopicEntity.class, "topic")
    .createAlias("topic.posts", "post", CriteriaSpecification.LEFT_JOIN)
    .addOrder(Order.asc("post.creationDate")).list(); 
```

这不会以任何方式对主题进行排序。我相信这是因为它没有执行列表中的第 3 点和第 4 点。

无论如何，你能提示我达到预期结果的正确方法吗？我更喜欢 Criteria，但如果需要 HQL，那很好。

# jquery - 如何从 SPListItem（当前项目）获取完整 URL？

> ID：16113671
> 
> 赞同：2
> 
> 时间：2013-04-19T21:21:09.170
> 
> 标签：jquery, sharepoint-2010, spservices

这是我的代码，但我不知道哪个是 url 的字段。我可以用不同的方式获取网址吗？

```
var f = "<ViewFields>"+
                '<FieldRef Name="Title"/>'+
                '<FieldRef Name="LinkFilenameNoMenu"/>'+
                '<FieldRef Name="Created"/>'+
            "</ViewFields>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:44:20.967

这很容易，但很难找到。

```
var f = "<ViewFields>"+
                '<FieldRef Name="ID"/>'+
                '<FieldRef Name="Title"/>'+
                '<FieldRef Name="LinkFilenameNoMenu"/>'+
                '<FieldRef Name="Created"/>'+
                '<FieldRef Name="EncodedAbsUrl"/>'+
            "</ViewFields>";
$().SPServices({
operation: "GetListItems",
async: false,
listName: list,
CAMLViewFields: f,
CAMLLimit: l,
CAMLQuery: q, 

completefunc: function (xData, Status) {

  $(xData.responseXML).SPFilterNode("z:row").each(function() {

      var url = $(this).attr("ows_EncodedAbsUrl")

    });
  }
}); 
```

它适用于 C# 代码，您可以使用 ows_EncodedAbsUrl 元数据值：

```
using (SPSite site = new SPSite(webUrl))
{
   using (SPWeb web = site.OpenWeb())
   {
       SPList list = web.Lists["Shared Documents"];
       SPListItem item = list.Items[0];
       string itemUrl = item["ows_EncodedAbsUrl"].ToString();
   }
} 
```

# coldfusion - 实现 onCFCRequest() 时，公共函数可以远程访问

> ID：16113675
> 
> 赞同：7
> 
> 时间：2013-04-19T21:21:35.303
> 
> 标签：coldfusion, coldfusion-9

**一些背景：**

我正在使用`onCFCRequest()`与常规 CFM 页面请求分开处理远程 CFC 调用。这使我可以捕获错误并为所有远程请求干净地设置 MIME 类型。

**问题：**

我不小心将我的一些远程 CFC 功能设置为`public`访问而不是访问，`remote`并意识到它们在远程调用时仍在工作。

正如您在下面看到的，我的实现在`onCFCRequest()`我的整个应用程序中创建了一个巨大的安全漏洞，其中**一个 HTTP 请求可用于调用`public`任何 HTTP 可访问 CFC 上的任何方法。**

**复制代码：**

在 Application.cfc 中：

```
 public any function onCFCRequest(string cfc, string method, struct args){
        cfc = createObject('component', cfc);
        return evaluate('cfc.#method#(argumentCollection=args)');
    } 
```

在远程调用的 CFC 中：

```
 public any function publicFunction(){
        return 'Public function called remotely!';
    } 
```

**问题：**

我知道我可以在调用该方法以验证它是否允许远程访问之前检查组件的元数据，但是还有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T22:34:47.983

`onCfcRequest()`并没有真正创建安全漏洞，*您*通过盲目运行该方法来创建安全漏洞，而无需先检查是否适合这样做，恐怕;-)

（注意：我已经犯了完全相同的事情，所以我没有去@你;-)

所以 - 是的 - 您*确实*需要在运行该方法之前检查元数据。当您使用此处理程序时，该检查是 CF 传回给您以代替管理的事情之一，并且已明确实现（请参阅[3039293](https://bugbase.adobe.com/index.cfm?event=bug&id=3039293)）。

[我已经在我的博客](http://adamcameroncoldfusion.blogspot.co.uk/2013/04/its-easy-to-create-security-hole-in.html)上写了对问题和解决方案的描述。正如在下面的评论中所观察到的，我在其中使用了一些代码 -`invoke()`仅适用于 CF10+，但一般技术保持不变。

# html - Bootstrap Thumbnail Class Not Recognized

> ID：16113677
> 
> 赞同：1
> 
> 时间：2013-04-19T21:21:39.717
> 
> 标签：html, twitter-bootstrap, thumbnails

Whenever I try to invoke thumbnails per the twitter documentation, I just get black dots on the screen:

```
<ul class="thumbnails">
  <li class="span4">
    <a href="large.jpeg" class="thumbnail">
      <img data-src="http://placehold.it/330x230" alt="Large">
    </a>
  </li> 
```

Am I doing something wrong here? I can only get something to show up using media-grid...which is strange since that's the old functionality, right?

EDIT: I still get black dots to the left of my thumbnails using media-grid, too. How do I turn those off, and why isn't the html I wrote working?

full code:

```
<html>
 <head>
         <meta charset="utf-8">
         <title>Walls</title>
         <link rel="stylesheet" href="http://flip.hr/css/bootstrap.min.css">
         <link rel="stylesheet" href="custo.css">

          <script src="js/jquery.js" type="text/javascript" charset="utf-8"></script> <!--prettyphotty-->
          <link rel="stylesheet" href="css/prettyPhoto.css" type="text/css" media="screen" charset="utf-8" />
          <script src="js/jquery.prettyPhoto.js" type="text/javascript" charset="utf-8"></script>

 </head>
 <body>

 <br>

 <div class="container-fluid">
 <br>

 <ul class="media-grid">
  <li class="span4">
    <a href="super.jpg" rel="prettyPhoto">
      <img class="thumbnail" src="http://placehold.it/330x230" alt="">
    </a>
  </li>
  <li class="span4">
    <a href="super.jpg">
      <img class="thumbnail" src="http://placehold.it/330x230" alt="">
    </a>
  </li>
</ul>

<ul class="thumbnails">
  <li class="span4">
    <a href="large.jpeg" class="thumbnail">
      <img data-src="http://placehold.it/330x230" alt="Large">
    </a>
  </li>

  <li class="span4">
    <a href="#" class="thumbnail">
      <img data-src="holder.js/300x200" alt="">
    </a>
  </li>

  <li class="span4">
    <a href="#" class="thumbnail">
      <img data-src="holder.js/300x200" alt="">
    </a>
  </li>

</ul>

 </div><!-- .container -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <script type="text/javascript" charset="utf-8"> <!--initialize prettyPhoto-->
     $(document).ready(function(){
     $("a[rel^='prettyPhoto']").prettyPhoto();
      });
    </script>

 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-04-02T19:04:30.143

bootstrap 4 使用 img-fluid 来调整大小和 img-thumbnail 来换行

```
<ul class="thumbnails">
  <li class="span4">
    <a href="large.jpeg" class="img-fluid img-thumbnail">
      <img data-src="http://placehold.it/330x230" alt="Large">
    </a>
  </li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:34:22.107

您为 Bootstrap 引用的样式表`http://flip.hr/css/bootstrap.min.css`没有`thumbnail`定义的类。

一旦您引用了当前版本的 Bootstrap，正确的结构将如下所示（直接取自：http: [//twitter.github.io/bootstrap/components.html#thumbnails](http://twitter.github.io/bootstrap/components.html#thumbnails)）：

```
<ul class="thumbnails">
  <li class="span4">
    <a href="#" class="thumbnail">
      <img data-src="holder.js/300x200" alt="">
    </a>
  </li>
  ...
</ul> 
```

此外，从第 2 版开始......没有`media-grid`类（取自[http://twitter.github.io/bootstrap/upgrading.html](http://twitter.github.io/bootstrap/upgrading.html)）：

> 以前的 .media-grid，现在只是 .thumbnails，我们已经彻底扩展了这个组件以供更多用途，同时保持开箱即用的整体简单性。

# c++ - 错误 C2079: 'stackNameSpace::StackNode ::value' 使用未定义的类

> ID：16113679
> 
> 赞同：0
> 
> 时间：2013-04-19T21:21:51.183
> 
> 标签：c++

Stack.h 的接口

```
#include "stdafx.h"

//use linkedlist to implement the stack 
//which is different from using the array to implement the stack

#ifndef STACK_H
#define STACK_H

using namespace std;

namespace stackNameSpace {

template<class T>
struct StackNode {
    T value;
    T min_value; //current local min value 
    StackNode* next;
};

typedef StackNode<class T>* StackNodePtr;

template<class T>
class Stack {
private:
      StackNodePtr top;

public:

Stack();

Stack(const Stack& a_stack);

~Stack();

bool empty() const;

T pop();

void push(T the_value);

T getMin();

};

} //end of namespace

#endif 
```

stack.h的实现

```
#include "stdafx.h"

//use linkedlist to implement the stack 
//which is different from using the array to implement the stack

#ifndef STACK_CPP
#define STACK_CPP
#include <iostream>
#include <cstdlib>
#include "Stack.h"

using namespace std;

namespace stackNameSpace {

template<class T>
Stack<T>::Stack() : top(NULL)  //here should be Stack<T> instead of Stack
{}

template<class T>
Stack<T>::Stack(const Stack& a_stack) {
    if (a_stack.top == NULL) {
        return NULL;
    }
    else {
        StackNodePtr currentOld = a_stack.top;
        //construct the top of the new stack
        StackNodePtr currentNew = new StackNode<class T>;//the struct 
        currentNew->value = currentOld->value;
        currentNew->min_value = currentOld->min_value;
        top = currentNew;

        //contruct the rest node in the stack
        currentOld = currentOld->next;
        while (currentOld != NULL) {
            currentNew->next = new StackNode<class T>;
            currentNew = currentNew->next;
            currentNew->value = currentOld->value;
            currentNew->min_value = currentOld->min_value;

            currentOld = currentOld->next;
        }
        currentOld->next = NULL;

    }
}

template<class T>
Stack<T>::~Stack() {
    T data;
    while (!empty()) {
        data = pop();
    }
}

template<class T>
bool Stack<T>::empty() const {
    return (top == NULL);
}

template<class T>
T Stack<T>::pop() {

    if (empty()) {
        cout << "Error: popping an empty stack.\n";
        exit(1);
    }

    T result = top->value;

    StackNodePtr temp = new StackNode<class T>;
    temp = top;
    top = top->next;

    delete temp;

    return result;

}

template<class T>
void push(T the_value) {

    StackNodePtr temp = new StackNode<class T>;
    temp->value = the_value;

    temp->min_value = min(the_value, getMin());//This is Much better

    //temp->min_value = top->min_value; //This is NOT secure, since top may be NULL

    temp->next = top; //update the top node
    top = temp;

}

template<class T>
T getMin() {
    if (top == NULL) 
        return INT_MAX;
    else {
        return top->min_value;
    }
}

} //end of namespace 

#endif 
```

使用 Stack 类的函数

```
#include "stdafx.h"

#include <iostream>
#include "Stack.h" //this is not the <stack>, which is STL

//using namespace std; //NOTE: this must be wrong! because can not use multiple namespace at the same time
using namespace stackNameSpace;
using std::cout;
using std::endl;

int main() {

    Stack<int> sWithMin;

    sWithMin.push(5);
    cout<< sWithMin.getMin() << endl;
    sWithMin.push(4);
    cout<< sWithMin.getMin() << endl;
    sWithMin.push(5);
    cout<< sWithMin.getMin() << endl;
    sWithMin.push(3);
    cout<< sWithMin.getMin() << endl;
    sWithMin.push(6);
    cout<< sWithMin.getMin() << endl;

    return 0;

} 
```

当我编译项目时，我在 main() 中收到一个错误“错误 C2079: 'stackNameSpace::StackNode::value' 使用未定义的类 'stackNameSpace::T'”

我无法弄清楚它出现错误的原因。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:13:41.153

> ```
> namespace stackNameSpace {
> 
> template<class T>
> struct StackNode {
>     T value;
>     T min_value; //current local min value 
>     StackNode* next;
> }; 
> ```

`StackNode`依赖于类型参数的模板也是如此`T`。

> ```
> typedef StackNode<class T>* StackNodePtr; 
> ```

这不是模板定义的一部分，它`class T`引用了一个名为 T 的类。

（实际上`class T`总是引用一个名为 T 的类，除了在构造`template <class T>`中，它可以被替换为`template <typename T>`。对于带有类型参数的模板定义，`T`该类型必须使用 plain 引用`T`，而不是`class T`。）

由于您尚未声明一个已命名的类`T`，因此该`StackNodePtr`定义在周围的命名空间范围内隐式声明了一个不完整的类类型（即，不完整的类类型是`::stackNameSpace::T`）。

> ```
> template<class T>
> class Stack {
> private:
>       StackNodePtr top; 
> ```

现在这里`StackNodePtr`不依赖于模板参数`T`。相反，它是一个指向固定类型的指针，`StackNode<::stackNameSpace::T>`并且是与模板参数无关`top->value`的不完整类型。`class T``Stack`

如果您在这样的堆栈中使用`Stack<int>`并实例化任何使用`top->value`，您将看到您显示的错误。

顺便说一句：另一个不相关的问题是模板的定义（包括类模板的成员函数）必须在模板实例化的地方可见。通常这意味着您不应将模板成员定义放入`cpp`单独编译的文件中。相反，它们应该位于使用模板的任何地方都包含的头文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T22:17:19.790

虽然 JoergB 正确地指出了您发布的代码的问题，但我想对他在答案的最后部分解释的内容有所了解。

在 Visual Studio 中使用模板时，我会确保类的标头和实现位于单个编译单元下。尝试将 Stack.cpp 重命名为 Stack.inl 并将其包含在 Stack.h 的末尾

```
void push(T the_value);

T getMin();

};

} //end of namespace

#include "Stack.inl"

#endif 
```

请务必从构建中排除 Stack.inl。在解决方案资源管理器中右键单击它 > 属性 > 从构建中排除 > 是。

# sharepoint - 无法卸载 Sharepoint 应用程序 - 无效状态

> ID：16113681
> 
> 赞同：5
> 
> 时间：2013-04-19T21:22:02.880
> 
> 标签：sharepoint, powershell, visual-studio-2012, sharepoint-2013

我们的**Sharepoint 2013 应用程序**安装失败并且卡在一个奇怪的状态。我按照[推荐的方法](http://technet.microsoft.com/en-us/library/fp161233.aspx)在托管的 Sharepoint 服务器上使用 powershell 命令删除应用程序，但它无法正确执行。

### Visual Studio 部署/撤回报告：

> 跳过卸载步骤，因为 SharePoint 的应用程序处于无效状态并且无法卸载。

### PowerShell 命令

```
$instances = Get-SPAppInstance -Web http://mysite/sites/collection
$instance = $instances | where {$_.Title -eq 'Application.Title'}
Uninstall-SPAppInstance -Identity $instance 
```

### 执行此 PS 命令会抛出...

```
 The System Account cannot perform this action. 
```

**Sharepoint UI**中没有删除应用程序的选项，重试安装也会失败。我已经尝试过其他用户帐户来执行这个 powershell 命令（*除了系统帐户*），但没有骰子。如果没有其他解决方案，我将不得不删除开发人员网站集。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-14T17:03:15.747

在部署 SharePoint 托管应用程序时，我之前在我的 Office 365 SharePoint Online 上遇到过这个问题。然后我提交 Microsoft 服务请求并与 MS 技术支持团队合作解决此问题。这个问题似乎是 SharePoint 后端数据库本身的错误（我不确定是否认为它是 SharePoint 缺陷）。

您是否检查了应用详细信息安装错误报告？如果您收到消息：

> “服务器上的内容数据库暂时不可用。”

[需要帮助：错误“为 SharePoint 安装应用程序”：此应用程序的实例已存在于指定位置。](http://social.msdn.microsoft.com/Forums/sharepoint/en-US/467b6498-bb5e-4a5c-8d18-2a41d75bb746/need-help-error-install-app-for-sharepoint-an-instance-of-this-app-already-exists-at-the?forum=appsforsharepoint)，我完全不明白答案，但是 Jeremy Thake 的一条评论似乎已在此线程上被删除，他说：

> “……所以我实际上只是重新启动了整个环境，当 Windows 重新启动并访问 SharePoint 站点时……应用程序消失了 ;-)”

因此，在您承诺删除您的网站集之前，这是我的建议：

1.  尝试将您部署到另一个开发人员网站集并检查此问题是否仍然存在。
2.  尝试增加您的应用程序版本或更改应用程序名称/标题/id 并部署到同一网站集，并检查此问题是否仍然与您的新应用程序实例相同。
3.  对于 SharePoint Server，如果可以，请尝试重新启动 IIS/Window Server。还要安装任何最新的 SharePoint 更新/CU。
4.  对于 Office365 - SharePoint 并且您有许可证帐户，您应该提交服务请求，如果没有，您应该等待几天并尝试通过 UI 再次删除此应用程序实例。

希望您可以删除您的应用程序并准确了解根本原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-01T21:00:13.607

我在本地 SharePoint 中遇到过这个问题。

但是为了解决这个问题，我给了另一个帐户（或者你可以使用你拥有的 1 个）shell 管理员权限。

**请注意，此帐户不能在 SharePoint 上标记为系统帐户！！**

然后使用这个不同的 shell 管理员帐户执行相同的脚本。这总是对我有用（我也遇到了一些奇怪的安装行为，需要删除该应用程序）。

# jquery - 将属性传递给 Jeditable 中的输入类型

> ID：16113682
> 
> 赞同：0
> 
> 时间：2013-04-19T21:22:11.423
> 
> 标签：jquery, jeditable

我正在使用 Jeditable 来编辑和发布对页面不同元素的更改。例如，我希望能够指定编辑类型应该是`text`还是`textarea`通过查看我正在编辑的属性`data-type_edit="textarea`。

但是，通过我似乎无法将任何值或属性传递给您指定类型的 jeditable 函数的第二部分。为什么`type : $(this).attr('data-edit_type')`在此代码中不起作用：

```
$('.editable.edit-section').editable(function(value, settings) {
    var dbId = $(this).attr("data-db_id");
    var dbTable = $(this).attr("data-db_table");
    var dbCol = $(this).attr("data-db_col");
    submitEdit(value, dbId, dbTable, dbCol);
    // Needed so that value is correctedly displayed with jeditable on page
    return(value);
 }, {
    type : $(this).attr('data-edit_type'),
    submit : "OK",
    cancel : "Cancel",
    tooltip : "Click to edit...",
    onblur : "ignore"
}); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:27:12.130

尝试做。

```
$(this).data('edit_type'); 
```

我相信这是通过 jQuery 访问数据属性的正确方法

# c# - 为什么我不能在 DataGrid 值上使用格式说明符？

> ID：16113683
> 
> 赞同：-1
> 
> 时间：2013-04-19T21:22:25.303
> 
> 标签：c#, winforms, datagridview, tostring

```
string Foo = selectedrow.Cells["Foo"].Value.ToString("D5"); 
```

给我的错误

```
No overload for method 'ToString' takes 1 arguments 
```

所以我不得不使用

```
string Foo = selectedrow.Cells["Foo"].Value.ToString().PadLeft(5,'0'); 
```

谁能解释为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:42:04.610

[`DataGridViewCell.Value`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewcell.value.aspx)是类型`System.Object`。该[`Object.ToString()`](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)方法不接受任何参数。因此，您不能提供格式说明符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T13:58:12.610

如果您事先知道 DataType，则需要先转换 Value，然后才能使用您正在寻找的 ToString 方法：

```
string dateTime = ((DateTime)(selectedrow.Cells["Today"].Value)).ToString("dd/MM/yyyy");
string number = ((decimal)(selectedrow.Cells["Price"].Value)).ToString("N2"); 
```

# html - 使背景图像页面特定

> ID：16113686
> 
> 赞同：0
> 
> 时间：2013-04-19T21:22:40.840
> 
> 标签：html, css, background-image, squarespace

我目前正在为我的网站使用 Squarespace 平台，并且我正在尝试更改主页的背景图片，在搜索了一些论坛并查看了我[网站](http://www.MoxieGaming.com)的源代码后，我被告知该 id`#collection-51648018e4b0d7daf0a7cece`只能更改主页，但是当代码

```
#collection-51648018e4b0d7daf0a7cece {
  background-image: url('image-location.png');
} 
```

添加没有任何反应，但通过使用此代码

```
#navigator {
  background-image: url('image-location.png');
} 
```

它确实发生了变化，但它适用于我的所有页面。有人知道解决方法吗？我什至已经向 Squarespace 提交了一张票，但他们根本没有帮助。另外，请注意我无法更改网站的实际代码，因为它是 Squarespace。我只能添加自定义 CSS 或将代码注入`<head>`标签

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:27:59.177

使`#navigator`选择器特定于主页：

```
#collection-51648018e4b0d7daf0a7cece #navigator {
  background-image: url('image-location.png');
} 
```

**编辑：**根据您的代码，您可能想要这个：

```
#collection-51648018e4b0d7daf0a7cece #navigator {
  background: #fff url('image-location.png') scroll no-repeat top right;
} 
```

# ios - Failing to open active session after updating Facebook SDK to 3.5

> ID：16113688
> 
> 赞同：10
> 
> 时间：2013-04-19T21:22:49.277
> 
> 标签：ios, facebook

After updating the Facebook sdk to 3.5, when trying to perform openActiveSessionWithReadPermissions the operation fails. Here is the snippet for opening the session and handling the callback:

```
[FBSession openActiveSessionWithReadPermissions:@[@"email", @"user_hometown", @"user_location", @"user_birthday"]
                                   allowLoginUI:YES
                              completionHandler:
 ^(FBSession *session,
   FBSessionState state, NSError *error) {
     switch (state) {
         case FBSessionStateCreatedTokenLoaded:
         case FBSessionStateOpenTokenExtended:
         case FBSessionStateOpen:
         {
             completion(TRUE);
             break;
         }
         case FBSessionStateClosed:
         case FBSessionStateClosedLoginFailed:
             completion(FALSE);
             [FBSession.activeSession closeAndClearTokenInformation];
             break;
         default:
             break;
     }
 }]; 
```

I end up in the FBSessionStateClosedLoginFailed case and I get a FBSKLog as follows:

```
FBSDKLog: Cannot use the Facebook app or Safari to authorize, fb123456789012345 is not registered as a URL Scheme 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-04-25T11:05:09.283

我有同样的问题（Facebook SDK 3.5.1）

我的 Facebook URL 方案位于 Info.plist URL 方案中的第 1 项。通过将其移至项目 0 解决了问题。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-07-04T19:37:53.483

我有同样的问题。上面的代码解决了这个问题。你必须用文本编辑器编辑你的 .plist 文件。但是在 Xcode 中你不会看到任何变化。而不是 URL 类型 - CFBundleURLTypes 而不是 URL Schemes 应该是 CFBundleURLSchemes。

```
<key>CFBundleURLTypes</key>
<array>
    <dict>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>fb48524**********</string>
        </array>
    </dict>
</array> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-04-19T21:22:49.277

似乎我的 URL 方案与我的 FacebookAppId 不匹配。无论出于何种原因，这在以前似乎不是问题，但现在很重要。确保您的 Facebook URL Scheme 是带有 fb 前缀的 FacebookAppID（在您的 .plist 文件中）。例如：

FacebookAppId：**123456789012345**

URL 类型 -> 项目 0 -> URL 方案 -> 项目 0：**fb123456789012345**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-14T12:45:25.593

```
adding URL Scheme in plist file is solved my problem

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<array>
    <dict>
        <key>CFBundleURLSchemes</key>
        <array>
            <string>fb8947128947(fb<App ID>)</string>
        </array>
    </dict>
</array>
</plist> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-12T08:00:22.380

我遇到了同样的错误，但通过下面的 info.plist 层次结构解决了：

```
`
 <key>URL Types</key>
 <array>  
   <dict>
     <key>URL Schemes</key>    
     <array>      
      <string>fb***</string>    
     </array>    
   </dict> 
 </array>
` 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-26T12:58:00.547

萝拉的回答对我有用。如果您有多种 URL 类型 - 例如 Facebook 和一个用于您的应用程序 - 为您自己处理的那个提供一个与您的应用程序包标识符相等的包标识符，然后遍历您的 URL 类型以找到它会很有帮助。

在我的应用程序委托开始时，我只是运行：

```
NSArray *urlSchemes = [[NSBundle mainBundle] objectForInfoDictionaryKey:@"CFBundleURLTypes"];
for (NSDictionary *scheme in urlSchemes) {
    if ([[scheme objectForKey:@"CFBundleURLName"] isEqualToString:[[NSBundle mainBundle] bundleIdentifier]]) {
        self.urlScheme = [[scheme objectForKey:@"CFBundleURLSchemes"] objectAtIndex:0];
        break;
    }
} 
```

然后（因为我们有多个具有不同 FB 应用程序 ID 的环境）

```
-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation {
    if ([url.scheme hasPrefix:@"fb"]) {
        //Facebook callback
        return [FBSession.activeSession handleOpenURL:url];
    // else handle your own URL here 
```

# android - How to insert a particular record only once per day in sqlite

> ID：16113690
> 
> 赞同：0
> 
> 时间：2013-04-19T21:22:52.763
> 
> 标签：android, sqlite

I have a table named as `Attendance`, Here is the structure given below.

```
id     fname     lname    roll_no   date         time 
________________________________________________________
1      Qadir    Hussain   08cs18    19/04/2013   8:45am
2      Qadir    Hussain   08cs18    19/04/2013   8:50am
_______________________________________________________ 
```

i want to insert the record having `roll_no = 08cs18` only one time per day. not more than once per day.

I can restrict this via `if/else`. but is it possible to restrict this via sqlite query?

**Edit**

Acctually i m making an app of studnets attendance, I m using the QR_code to scan encoded roll_no. once a student scan its card for the first time it should insert the record (i.e id = 1) if user again scan it on the same day it should not insert. means a particular student should have a attendance record only one time per day.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:35:01.887

对于这两个数据库，对`roll_no`和进行唯一键约束`date`。

```
CREATE UNIQUE INDEX daily_roll_no ON Attendance (roll_no,date) 
```

然后对于 mysql 使用该`IGNORE`子句进行插入。对于 sqlite，使用`OR IGNORE`.

```
 INSERT IGNORE INTO Attendance ....

 INSERT OR IGNORE INTO Attendance .... 
```

mysql:

*   [忽略子句](http://dev.mysql.com/doc/refman/5.0/en/insert.html)
*   [创建索引](http://dev.mysql.com/doc/refman/5.0/en/create-index.html)

sqlite：

*   [忽略子句](http://www.sqlite.org/lang_conflict.html)
*   [创建索引](http://www.sqlite.org/lang_createindex.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:45:26.950

您可以在单个 SQL 中执行此操作：

```
INSERT OR REPLACE INTO <tablename> 
      (<identifier>, <time inserted>, column1, column2, ...) 
SELECT <identifier>, <time inserted>, 
       COALESCE(column1,'new value 1'), 
       COALESCE(column2,'new value 2'), ...
  FROM <tablename>
 WHERE <identifier> = ...
   AND <time inserted> > <now minus one day> 
```

基本思想是：使用`INSERT OR REPLACE`您可以根据一个或多个条件更新现有行或插入新行。在这种情况下，如果该行不超过一天，我将使用*相同的值更新该行。*

如果该行不存在或超过 1 天，您可以使用 分配新值`COALESCE`。

我知道这只是一种大纲，但可能会有所帮助....干杯！

# c++ - Cocos2dx：如何停止 CCFollow 移动 ParallaxNode 并使背景变黑

> ID：16113695
> 
> 赞同：0
> 
> 时间：2013-04-19T21:23:26.127
> 
> 标签：c++, windows, cocos2d-iphone, cocos2d-x

我正在尝试使用 CCFollow 跟随我的 heroSprite，但是发生了两种不稳定的行为。

我让相机跟随我的精灵如下：

> startSprite = CCSprite::createWithSpriteFrameName("santa_001.png"); startSprite->setPosition(ccp (size.width / 5 , size.height / 2 )); this->addChild(startSprite,1); **this->runAction(CCFollow::create(heroSprite, CCRectMake(0, 0, size.width, size.height * 2)));**

现在，会发生什么：

**a) 当 heroSprite 向上跳跃时，由不同精灵组成并以不同速度移动的背景视差节点也在“向上”方向移动。我想让这些精灵保持在原来的位置，而不是随着 heroSprite 向上移动。我怎么做 ？**

> voidNode = CCParallaxNodeExtras::node();
> 
> voidNode->addChild(pSpriteGrass, 2, ccp(3.0f,0), ccp(0, size.height/10 - 50) );
> voidNode->addChild(pSpriteGrass02, 3, ccp(3.0f,0), ccp(size.width - 10, size.height/10 - 50)); voidNode->addChild(pSprite, 1, ccp(1.0f,0), ccp(0, size.height/10 - 50) ); voidNode->addChild(pSprite02, 0, ccp(1.0f,0), ccp(size.width - 10, size.height/10 - 50) );
> 
> voidNode->addChild(pSpriteSky02, 0, ccp(0.6f,0), ccp(0, size.height /2 + 75) ); voidNode->addChild(pSpriteSky, 1, ccp(0.6f,0), ccp(size.width, size.height /2 + 75) );
> 
> voidNode->addChild(pSpriteStars, 2, ccp(2.0f,0), ccp(0, size.height - 110) ); voidNode->addChild(pSpriteStars02, 3, ccp(2.0f,0), ccp(size.width - 10, size.height - 110) );
> 
> voidNode->addChild(pSpriteClouds, 4, ccp(1.2f,0), ccp(0, size.height - 110) ); voidNode->addChild(pSpriteClouds02, 5, ccp(1.2f,0), ccp(size.width - 10, size.height - 110) );
> 
> CCActionInterval* go = CCMoveBy::create(25, ccp(-1000,0) ); CCSequence* seq = CCSequence::create(go, NULL); voidNode->runAction((CCRepeatForever::create(seq)));
> 
> ```
> this->addChild( voidNode, 0 ); 
> ```

**b) 当 hero 向上移动时，初始化为白色的屏幕会在 heroSprite 跳跃时变黑一段时间。当它下来时，屏幕又变白了。如何使屏幕的上部也变白？**

> CC_BREAK_IF(!CCLayerColor::initWithColor( **ccc4(255,255,255,255)** ));

任何建议或指示都会有所帮助。谢谢

* * *

**B 部分更新：**

**通过“Smugbit Studios”的建议，我改变了**

> **initWithColor:ccc4(255,255,255,255);**

**至**

> **initWithColor(ccc4(255, 255, 255, 255), size.width, size.height * 2);**

**它解决了我的问题。我仍在寻求解决答案部分 a 。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:37:25.990

对于 a，将 CCFollow 的边界设置为您想要的最大高度 - 在这种情况下，我相信它只是 size.height，所以：

```
this->runAction(CCFollow::create(heroSprite, CCRectMake(0, 0, size.width, size.height))); 
```

对于 b，我怀疑“this”的主要初始化是 CCLayer，而不是 CCLayerColor。只需将您的子类更改为 CCLayerColor，并将新的 init 更改为：

```
initWithColor:ccc4(255,255,255,255) 
```

编辑：更正答案 B - 您还需要定义图层大小。如果未定义，则将其设置为屏幕尺寸，但看起来您正试图超出屏幕的高度。在这种情况下，请使用：

```
initWithColor(ccc4(255, 255, 255, 255), width, height) 
```

其中 height 是您将显示的最大高度 - 可能是 (size.height*2)。

# angularjs - Adding location to Google Map on page load with Angular UI

> ID：16113696
> 
> 赞同：2
> 
> 时间：2013-04-19T21:23:33.517
> 
> 标签：angularjs, angular-ui

Thanks to @AJoslin I now have a working google map using only AngularUI and AngularJS.

Unfortunately there are two things I can't figure out how to do which may have to do with Google Map API and my lack of understanding of.

When the map initially loads, I already have a location so I wish to load it with a marker already on it. How do I do that?

I also wish to set the `ng-click="myMap.panTo(marker.getPosition())` not to a new marker but to the initial location, which is the only marker I would have since I'm removing the add marker functionality out, once I can figure this one out.

Here is the working jsfiddle

[http://jsfiddle.net/jorgecas99/xMw6U/](http://jsfiddle.net/jorgecas99/xMw6U/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T18:49:01.397

我认为这应该可以通过设置 tilesloaded 事件来实现，但没有这样管理，所以我最终使用了一个简单的“技巧”，看着 myMap 出现。

```
 $scope.$watch('myMap', function(){
    $scope.setHome();
  });

  $scope.setHome = function() {
    $scope.homeMarker = new google.maps.Marker({
    map: $scope.myMap,
    position: $scope.mapOptions.center
  });
  } 
```

# asp.net-mvc - 不起作用。MVC

> ID：16113705
> 
> 赞同：0
> 
> 时间：2013-04-19T21:24:15.427
> 
> 标签：asp.net-mvc, razor, bulletedlist

我有一个视图，我试图将文本显示为项目符号`(<ul> <li>)`，但它似乎不起作用。我尝试 `<ul><li>`不将它们封闭在`<div>`仍然没有运气。是什么阻止它在文本前面显示项目符号。

```
@model UDP.Models.MCVM 

@{
    ViewBag.Title = "MCReport";
    Layout = "~/Views/Shared/_reportsLayout.cshtml";
}

   <div class="span-24 last" >

         @* code for filling a grid goes here*@

  </div>

              <div class="prepend-1 span-22">
                  <strong> Notes : </strong>  
                 <ul type="circle" >

                     <li> All listings are sorted according to the user defined sort, and may not display in the order used to determine the median values.</li>
                     <li> Time ranges are based on a 360-day year commonly called the 'banking year'.</li>
                     <li> Listings are 'disqualified' from the median value calculations when their Selling, Expiration, or Inactive Date is more than 360 days from the current date.</li>
                     <li> The Sales Price/List Price calculations will be calculated using the original list price.</li>
                 </ul>
               </div>

<script type="text/javascript">
    function loadAndInit() {

        $(".dvloading").hide();
        if ($.browser.mozilla) {
            if (location.pathname == "/udp/Reports") {            // This is for local env.
                $("#prntCss").attr("href", "../../../Content/SitePrint_FF.css");
            }
            else {                                                  // This is for DEV/QA/STAGE/PROD env. 
                $("#prntCss").attr("href", "../../Content/SitePrint_FF.css");
            }
        }

    }
</script> 
```

# ruby-on-rails - 如何使用 curl 使用回形针上传文件？

> ID：16113706
> 
> 赞同：2
> 
> 时间：2013-04-19T21:24:29.270
> 
> 标签：ruby-on-rails, api, curl

我想用 curl 上传一个文件和一些信息（例如 package_type）

在我的`submission`模型中：

```
has_attached_file :package 
```

我尝试了什么：

```
curl -d "submission[package_type]=type1&submission[package]=@/home/ubuntu/Downloads/test.zip" http://localhost:3000/restapi.json 
```

如果我省略了文件对象，它可以工作（一个条目将被插入到数据库中）

但是我像上面一样指定文件，它给了我一个错误：

```
找不到“@/home/ubuntu/Downloads/test.zip”的处理程序
```

**更新**：

我刚刚发现我应该使用`-F`curl中的选项，但是在那种情况下无法记录文件信息，是否无论如何要包含文件对象和文件信息？也许像`curl -d -F`什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-04T17:33:17.227

我遇到了类似的问题，最终将内容类型设置为 multipart/form-data，而不是在发布到我的 REST API 时处理 base64 编码问题。这是一个包含身份验证标头的示例：

```
curl -v -H 'Content-Type: multipart/form-data' -H "X-User-Email: <email>" -H "X-User-Token: <token>" -X POST -i -F submission[package_type]=type1 -F submission[image_attributes][image]=@f117.jpg http://localhost:3000/api/v1/submissions 
```

# android - 根据手机上的时区获取日期之前的天数

> ID：16113712
> 
> 赞同：0
> 
> 时间：2013-04-19T21:25:12.387
> 
> 标签：android, datetime

我一直试图弄清楚这一点，但无法解决这个问题。我正在开发一个 android 应用程序，我想显示一个特定的日期，我想要基于我在手机上设置的时区的天数。

我的应用程序中有 Joda Time，我拥有的信息例如：

**2013-05-05 9.00PM**时间在 PST (GMT-8) 时区，我不知道如何做到这一点，我在谷歌和 SO 上都进行了搜索，但无法得到明确的答案。

**编辑**

我设法用在 SO 上找到的代码解决了我的问题

```
String dateString = airDate + " " + airTime.toUpperCase();

                SimpleDateFormat sourceFormat = new SimpleDateFormat("yyyy-MM-dd K:mma");
                sourceFormat.setTimeZone(TimeZone.getTimeZone("GMT-8"));

                Date parsed;

                parsed = sourceFormat.parse(dateString);
                TimeZone tz = TimeZone.getDefault();
                SimpleDateFormat destFormat = new SimpleDateFormat("yyyy-MM-dd");
                destFormat.setTimeZone(tz);

                result = destFormat.format(parsed); 
```

但是我发现我第一次得到的时间不正确，我现在得到格式为**GMT-5 +DST**的时区。如果将时间设置为 20:00 并在我的 TimeZone.getTimeZone 中使用 GMT-5，我不知道如何处理 +DST，返回的时间是 22:00，这是“错误的”，因为我住在瑞典。我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T04:14:29.857

如果您可以接受一个看起来像“2 天内”的字符串，那么您应该可以使用[`DateUtils.getRelativeTimeSpanString()`](https://developer.android.com/reference/android/text/format/DateUtils.html#getRelativeTimeSpanString%28long,%20long,%20long,%20int%29).

# vb.net - 从“Windows 资源管理器 - 打开方式”获取文件

> ID：16113713
> 
> 赞同：0
> 
> 时间：2013-04-19T21:25:13.730
> 
> 标签：vb.net, visual-studio-2010, parameters, arguments

我不太确定从哪里开始。在 Windows 资源管理器中右键单击通用文件（例如，用于 Word 文档的 *.doc）可以选择“打开方式...”。我想知道程序如何知道“通过”了哪个文件（这是正确的词吗？）。它是通过参数完成的吗？如何在我自己的应用程序中实现这一点？

我尝试在运行时手动将文件路径添加到我的一个应用程序的参数中，但路径包含空格（表示新参数）。Windows如何解决这个问题/我需要做什么来解决这个问题？

问候，罗比

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:00:48.793

这是一些打开文件的VB代码：

```
 Case Keys.F4
            Process.Start("H:\OIS\PROCEDUR\OIS8ProcedureManual.doc") 
```

在这种情况下，Windows 在文件类型中查找 .doc 并使用 .doc 条目运行 Word 并将文件名传递给它。

Process.Start 有一个包含参数的第二个参数，因此您可以在第一个参数中提供 .exe 的路径，在第二个参数中提供参数。实际上 Process.start 有 5 个签名。最强大的使用 ProcessStartInfo 类为您提供最多的控制。

如果上述方法没有帮助，请发布您为第二组问题编写的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T14:34:18.060

要从命令行检索使用的参数：

```
Private Sub Form1_Load(sender As Object, e As System.EventArgs) Handles Me.Load
    Dim sMsg As String = ""
    For Each sArg As String In My.Application.CommandLineArgs
        sMsg &= sArg & ": "
    Next
    MsgBox(sMsg)
End Sub 
```

将代码放在 WinForm _Load、Console Main 等中。

如果上面运行的是： Hello World 作为命令行 Hello: World: 将显示。

# javascript - 拖放不起作用，不允许拖放到 div

> ID：16113718
> 
> 赞同：0
> 
> 时间：2013-04-19T21:25:42.557
> 
> 标签：javascript, html, drag-and-drop

我正在尝试使用拖放创建应用程序。当我试图将元素放在名为“serviciosARealizar”的 div 上时，它不允许。请帮忙

HTML

```
 <div id='aceite' draggable="true" ondragstart="arrastrar(event)"><img src='img/aceite.jpg' /></div>
   <div id='luces' draggable="true" ondragstart="arrastrar(event)"><img src='img/lamp.png' /></div>
   <div id='serviciosARealizar' ondrop='soltar(event)' ondragover='permiteSoltar(event)'></div> 
```

JAVASCRIPT

```
 <script>

    function permiteSoltar(ev){
        ev.preventDefault();
    }

    function soltar(ev){
        ev.preventDefault();
        var data=ev.dataTransfer.getData("Text");
        ev.target.appendChild(document.getElementById(data));
    }
    function arrastrar(ev){
        ev.dataTransfer.setData("Text",ev.target.id);
    }

  </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-01-12T13:49:02.103

您可能正在寻找这个；

```
function dragStart(ev) {
    draggSrcID = ev.target.id;
    dragSrcEl = ev.target;
    ev.dataTransfer.effectAllowed = 'move';
    ev.dataTransfer.setData('text/html', ev.target.outerHTML);
}

function allowDrop(ev) {
    ev.preventDefault();
}

function drop(ev) {
    ev.target.appendChild(document.getElementById(draggSrcID));
    ev.preventDefault();
} 
```

即使函数名称不同，它仍然可以正常工作。只需确保在您添加的图像（这仅适用于图像）上`draggable="true" onstartdrag="drop(ev)"`。还要确保图像有 id，任何 id。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T13:34:03.703

您的问题是您的图像没有 id 只有您的 div。当您拖动时，您不会拖动 div，而是拖动图像。从 div 中获取 id 并将它们放入 imgs 中，它可以完美运行。我通过使用以下标签进行了尝试。（我也假设你的 CSS 文件在 servicosARealizar div 上有一个维度，否则你需要指定一个大小）

```
<div draggable="true" ondragstart="arrastrar(event)"><img id='aceite' src='img/aceite.jpg' /></div>
   <div  draggable="true" ondragstart="arrastrar(event)"><img id='luces' src='img/lamp.png' /></div>
   <div id='serviciosARealizar' ondrop='soltar(event)' style="width:500px;height:500px;background-color:red" ondragover='permiteSoltar(event)'></div> 
```

# android - 如何将 ViewPager 的标题粘贴到顶部。PagerTitleStrip Android

> ID：16113732
> 
> 赞同：0
> 
> 时间：2013-04-19T21:26:54.727
> 
> 标签：android, android-viewpager

我对 ViewPager 有一些奇怪的问题。

我需要将 PagerTitleStrip 添加到我的 ViewPager 并将其放在顶部。我尝试放置 layout_gravity = "top"，它在 "bottom" 上为其保留空间并在 "top" 上显示标题字符串！

当我将重力置于“底部”时，它会正确显示。

这是屏幕

顶部 - [http://clip2net.com/s/4WDDUJ](http://clip2net.com/s/4WDDUJ)

底部 - [http://clip2net.com/s/4WDD8k](http://clip2net.com/s/4WDD8k)

ViewPager - 绿色 PagerTitleStrip - 蓝色寻呼机内容 match_parrent - 红色

请帮助我理解它为什么会发生。如何坚持顶部，底部没有绿地？

谢谢你。

这是寻呼机的xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<android.support.v4.view.ViewPager
    android:id="@+id/pagerTelefoonInfo"
    android:layout_width="wrap_content"
    android:background="#1AF00F"
    android:layout_height="wrap_content" >

    <android.support.v4.view.PagerTitleStrip
        android:id="@+id/pagerTitleStrip"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="#3AFFEF"
        android:layout_gravity="top" >
    </android.support.v4.view.PagerTitleStrip>
</android.support.v4.view.ViewPager>
</LinearLayout> 
```

这里是活动：

```
public class APager extends Activity {

ViewPager pager;
PagerAdapter pagerAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.my_pager);

    pager = (ViewPager) findViewById(R.id.pager);
    pagerAdapter = new MyPagerAdapter();
    pager.setAdapter(pagerAdapter);

}

private class MyPagerAdapter extends PagerAdapter {

    public int getCount() {
        return 1;
    }

    public Object instantiateItem(View collection, int position) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View view = null;
        switch (position) {
        case 0:
            view = inflater.inflate(R.layout.fragment1, null);
            ((ViewPager) collection).addView(view, 0);
            break;
        case 1:
            view = inflater.inflate(R.layout.fragment2, null);
            ((ViewPager) collection).addView(view, 0);
            break;
        }

        return view;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return "Title " + position;
    }

    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);
    }

    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);
    }

    public Parcelable saveState() {
        return null;
    }
    // public int getItemPosition(Object object) { return POSITION_NONE; }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:30:53.243

看看我设置的 viewPager 布局，它可以在顶部的条带上正常工作：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="match_parent"
          android:layout_height="match_parent">

<android.support.v4.view.ViewPager
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="0px"
    android:layout_weight="1">

    <android.support.v4.view.PagerTitleStrip
        android:id="@+id/pager_title_strip"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="top"
        android:background="#33b5e5"
        android:textColor="#fff"
        android:paddingTop="4dp"
        android:paddingBottom="4dp"/>
</android.support.v4.view.ViewPager> 
```

# c# - 事件创建不起作用

> ID：16113742
> 
> 赞同：-3
> 
> 时间：2013-04-19T21:27:53.983
> 
> 标签：c#, .net

我有用于日志“Log401”的源“Source401”。我需要将此源用于“Log402”日志并删除日志“Log401”。（如果我们可以将“Log401”重命名为“Log402”也可以。但这一切都需要以编程方式完成）

使用下面的代码，我得到以下异常。实现它的最佳方法是什么？

> 源 Source401 已存在于本地计算机上。

注意：当我删除旧日志时，它工作正常。但是事件没有被创建。

**更新**

来自[MSDN](http://msdn.microsoft.com/en-us/library/x7y6sy21.aspx)

> 操作系统将事件日志存储为文件。当您使用 EventLogInstaller 或 CreateEventSource 创建新的事件日志时，相关文件存储在指定计算机上的 %SystemRoot%\System32\Config 目录中。文件名是通过在 Log 属性的前 8 个字符后附加“.evt”文件扩展名来设置的。
> 
> 源在本地计算机上必须是唯一的；新的源名称不能与现有的源名称或现有的事件日志名称匹配。每个源一次只能写入一个事件日志；但是，您的应用程序可以使用多个源来写入多个事件日志。

**代码**

```
 string source = "Source401";
  string logName = "Log402";
  string oldLogName = "Log401";
  string eventName = "Sample Event";
  string machineName = ".";

            if (!EventLog.Exists(logName, machineName))
            {
                ////Delete old log
                //if (EventLog.Exists(oldLogName, machineName))
                //{
                //    EventLog.Delete(oldLogName, machineName);
                //}

                //Create Source for the Log
                EventLog.CreateEventSource(source, logName, machineName);

                //Create Event
                EventLog eventLog = new EventLog(logName, machineName, source);
                eventLog.WriteEntry(eventName);
                try
                {
                    eventLog.WriteEntry(eventName, EventLogEntryType.Warning, 234, (short)3);
                }
                catch (Exception exception)
                {
                    int x = 0;
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:04:43.040

例外是*准确地*告诉您问题所在。名为“Source401”的事件源已存在。您要删除旧的事件日志“Log401”，但不会删除事件源。

正如[文档](http://msdn.microsoft.com/en-us/library/x7y6sy21.aspx)所说：

> 操作系统将事件日志存储为文件。当您使用 EventLogInstaller 或 CreateEventSource 创建新的事件日志时，相关文件存储在指定计算机上的 %SystemRoot%\System32\Config 目录中。文件名是通过在 Log 属性的前 8 个字符后附加“.evt”文件扩展名来设置的。
> 
> 源在本地计算机上必须是唯一的；新的源名称不能与现有的源名称或现有的事件日志名称匹配。每个源一次只能写入一个事件日志；

另外，这个小金块：

> 如果源已映射到日志并且您将其重新映射到新日志，则必须重新启动计算机才能使更改生效。

此外，您可能还想从文档中考虑这一点：

> 在安装应用程序期间创建新的事件源。这允许操作系统有时间刷新其已注册事件源及其配置的列表。如果操作系统没有刷新其事件源列表，而您尝试使用新源写入事件，则写入操作将失败

最后，`CreateEventSource`您调用的方法被标记为已过时，并且自 .NET 2.0 以来一直存在。将方法标记为过时通常是有充分理由的。您应该调用[CreateEventSource(EventSourceCreationData)](http://msdn.microsoft.com/en-us/library/5zbwd3s3.aspx)。

我认为您需要重新考虑使用事件日志的方式。您的应用程序不应该以这种方式创建和删除日志。这不是它们的用途。

# java - 是否有支持通过 websocket 流式传输二进制文件的 Java/JVM 服务器？

> ID：16113745
> 
> 赞同：2
> 
> 时间：2013-04-19T21:28:02.023
> 
> 标签：java, binary, websocket

是否存在支持通过 websocket 双向传输二进制流的开源 Java 服务器/库/框架？我查看了其中的几个，但找不到他们提到二进制支持。

这解释了我想做什么：`http://binaryjs.com/`但我想要一个 Java/JVM 服务器而不是 node.js。

所以，我想以尽可能少的开销在客户端和服务器之间来回发送原始字节。

如果有，直接链接到有关使用二进制文件的文档将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:49:52.210

Tomcat 7 通过[org.apache.catalina.websocket.WebSocketServlet](http://tomcat.apache.org/tomcat-7.0-doc/api/index.html?org/apache/catalina/websocket/WebSocketServlet.html)内置了对 Web 套接字的支持。

这里有一个使用该类的子类编写二进制数据的示例：http: [//svn.apache.org/viewvc/tomcat/tc7.0.x/trunk/webapps/examples/WEB-INF/classes/websocket/ echo/EchoStream.java?view=markup](http://svn.apache.org/viewvc/tomcat/tc7.0.x/trunk/webapps/examples/WEB-INF/classes/websocket/echo/EchoStream.java?view=markup)

操作方法的高级根在这里：http: [//tomcat.apache.org/tomcat-7.0-doc/web-socket-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/web-socket-howto.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:47:15.223

啊，我想我找到了答案： [https ://github.com/Atmosphere/atmosphere/wiki/Understanding-WebSocketHandler](https://github.com/Atmosphere/atmosphere/wiki/Understanding-WebSocketHandler)

可能还有其他服务器也处理它。我只需要找到至少一个，看起来就可以了。

# javascript - 如何使lessc或recess的节点版本与FireLESS的开发输出一起编译

> ID：16113748
> 
> 赞同：1
> 
> 时间：2013-04-19T21:28:13.340
> 
> 标签：javascript, node.js, less, development-environment

以下是可用于less的浏览器/live版本的代码。但是我怎样才能为命令行版本做到这一点？

```
<script type="text/javascript">
     less.env = "development";
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-05T13:40:10.330

那是不可能的。lessc 编译器将 Less 代码编译成静态 CSS 代码。

[按照http://lesscss.org/usage/#using-less-in-the-browser](http://lesscss.org/usage/#using-less-in-the-browser)的说明在浏览器中运行 Less 时，Less 代码将使用 less.js 编译器进行编译。less.js 在您的浏览器中运行客户端，并可以将消息发送到控制台（可以由 FireLess 读取）。

# android - 光传感器收集不准确的数据

> ID：16113754
> 
> 赞同：1
> 
> 时间：2013-04-19T21:28:41.040
> 
> 标签：android, android-sensors

我正在从光传感器收集数据一段时间：

```
mSensorManager.registerListener(this, lightSensor, SensorManager.SENSOR_DELAY_FASTEST); 
```

问题是收集的值并不总是准确和频繁的。“不准确”是指如果我在某个时间启动传感器，第一次读数有时会是我开始收集数据之前很久以前的读数。

此外，由于延迟被声明为`SensorManager.SENSOR_DELAY_FASTEST`，我得到了很多值，有时我在一秒钟内得到 100 条记录，有时我什至在三秒钟内没有得到一个读数。

有人可以解释这个问题可能是什么，如果有任何解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-24T00:03:55.703

我相信这是因为这些光传感器仅在光线发生变化时才发送数据。因此，如果光线水平没有变化，您将不会获得任何读数，但如果您在它面前挥动手或慢慢打开调光器开关，您将获得 100 多个读数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-14T14:42:49.103

这可能是传感器属性。我相信它包含一个内部缓冲区 FIFO，它解释了为什么您将第一次读取作为您已经完成的旧读取。此内部缓冲区的功能是保存有限数量的扫描或读数，等待用户将其拉出。如果可以，请在每次读取之前尝试重置传感器的 FIFO。

# iphone - Facebook SDK FBLoginView 获取 EXC_BAD_ACCESS

> ID：16113756
> 
> 赞同：4
> 
> 时间：2013-04-19T21:28:52.093
> 
> 标签：iphone, ios, objective-c, facebook, facebook-login

我正在关注与 Facebook SDK 3.5 捆绑的 HelloFacebookSample 项目。我实际上已将所有内容复制并粘贴到我自己的应用程序中，甚至是来自 AppDelegate 的内容，但由于某种原因，单击登录按钮会冻结我的应用程序。只是为了记录，当连接到 iOS 6 中的集成框架时，一切都正确验证，无论如何都是通过 FB SDK 完成的。只有当我尝试使用网络登录时，即点击 FBLoginView 网站打开，获得身份验证，返回应用程序。这是samepl项目中的代码，我将它与我的进行比较：

```
FBLoginView *loginview = [[FBLoginView alloc] init];

loginview.frame = CGRectOffset(loginview.frame, 5, 5);
loginview.delegate = self;

[self.view addSubview:loginview];

[loginview sizeToFit]; 
```

我的有点不同：

```
loginview = [[FBLoginView alloc] init];
loginview.delegate = self;

[self.facebookCell addSubview:loginview];

[loginview sizeToFit]; 
```

至于委托方法，我已经一字不差地实现了它们。为什么应用程序崩溃？当我的应用程序和示例应用程序之间的所有代码几乎相同时，没有正当的崩溃理由。即使启用了 Zombie Objects，调试器也无济于事。实际的错误是：`Thread 1: EXC_BAD_ACCESS (code=2, address=somethingoranother)`有人知道为什么会这样吗？

问候，
迈克

**更新：**似乎发生崩溃是因为某些事情在循环中无限重复。FB SDK 似乎将超过 100,000 个进程放在主线程上！如何？！

**更新 2：**我开始认为错误就在这里，即使我直接从示例 AppDelegate 复制了它。

```
- (BOOL)application:(UIApplication *)application
        openURL:(NSURL *)url
sourceApplication:(NSString *)sourceApplication
     annotation:(id)annotation {
// attempt to extract a token from the url
return [FBAppCall handleOpenURL:url
              sourceApplication:sourceApplication
                fallbackHandler:^(FBAppCall *call) {
                    NSLog(@"In fallback handler");
                }];
} 
```

这有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T13:42:54.170

我有什么似乎是确切的问题，但我的应用程序沙盒模式已经被禁用。这个应用程序之前一直运行良好，但我刚刚升级了 SDK，现在发生了这种情况。

如果我在 iOs 中配置了 facebook 帐户，它可以正常工作，但如果没有，它会崩溃。值得一提的是，如果我删除了 url 方案，那么该应用程序就无法访问网络浏览器或 facebook 应用程序，它将使用一个网络视图来登录，这也可以

编辑：据我所知，我的问题在于无法访问我在 facebook 中的应用程序设置。facebook SDK 执行 [FBUtility fetchAppSettings:callback:] 调用，更具体地说，它执行

```
https://graph.facebook.com/267496536695242?fields=supports_attribution,supports_implicit_sdk_logging,suppress_native_ios_gdp,name, 
```

在我的应用程序失败的情况下：

```
{
   "error": {
      "message": "Unsupported get request.",
      "type": "GraphMethodException",
      "code": 100
   }
} 
```

相比之下，任何示例应用程序，例如这个，SessionLoginSample

```
https://graph.facebook.com/380615018626574?fields=supports_attribution,supports_implicit_sdk_logging,suppress_native_ios_gdp,name 
```

正确返回：

```
{
   "supports_attribution": true,
   "supports_implicit_sdk_logging": true,
   "suppress_native_ios_gdp": 0,
   "name": "SessionLoginSample",
   "id": "380615018626574"
} 
```

因为 SDK 期望某些东西，所以它会不断发出相同的请求并陷入循环，直到模拟器崩溃。

为了确认这一点，我在回调中手动插入了预期的参数，修改了 facebook sdk，现在一切正常。

值得一提的是，我从已弃用的 2.0 升级了 SDK，设置页面中有一些参数已过时（未设置客户端令牌，授权为原生/桌面而不是 Web，应用中没有应用密钥) 但我已经把它们设置好了..

编辑 2：这是我修改过的 Facebook SDK（在 FBUtility.m 中）的方法。我只添加了“坏东西” if 子句。

```
+ (void)fetchAppSettings:(NSString *)appID
            callback:(void (^)(FBFetchedAppSettings *, NSError *))callback {

if (!g_fetchedAppSettingsError && !g_fetchedAppSettings) {

    NSString *pingPath = [NSString stringWithFormat:@"%@?fields=supports_attribution,supports_implicit_sdk_logging,suppress_native_ios_gdp,name", appID, nil];
    FBRequest *pingRequest = [[[FBRequest alloc] initWithSession:nil graphPath:pingPath] autorelease];
    if ([pingRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {

        // Bad stuff
        if (error) {
            error = nil;
            result = [NSDictionary dictionaryWithObjectsAndKeys:@"true", @"supports_attribution",
                                                                @"true", @"supports_implicit_sdk_logging",
                                                                @"0", @"suppress_native_ios_gdp",
                                                                @"Your_App_Display_Name", @"name",  nil];
        }

        if (error) {
            g_fetchedAppSettingsError = error;
            [g_fetchedAppSettingsError retain];
        } else {

            g_fetchedAppSettings = [[[FBFetchedAppSettings alloc] init] retain];

            if ([result respondsToSelector:@selector(objectForKey:)]) {

                g_fetchedAppSettings.serverAppName = [result objectForKey:@"name"];
                g_fetchedAppSettings.supportsAttribution = [[result objectForKey:@"supports_attribution"] boolValue];
                g_fetchedAppSettings.supportsImplicitSdkLogging = [[result objectForKey:@"supports_implicit_sdk_logging"] boolValue];
                g_fetchedAppSettings.suppressNativeGdp = [[result objectForKey:@"suppress_native_ios_gdp"] boolValue];
            }
        }
        [FBUtility callTheFetchAppSettingsCallback:callback];
    }
         ]
        );
} else {
    [FBUtility callTheFetchAppSettingsCallback:callback];
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T09:35:31.960

有人在另一个线程上找到了答案。在 Facebook 开发者中心，该应用程序被设置为沙盒模式，这就是导致此错误的原因。看来这毕竟不是代码的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T21:49:34.740

Facebook 已修复导致许多开发人员出现此问题的服务器错误。但是，服务器修复只会降低无限循环问题发生的可能性。它仍然存在。我创建了一个新错误来跟踪无限循环问题。

[https://developers.facebook.com/bugs/446010282155033](https://developers.facebook.com/bugs/446010282155033)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-31T13:28:19.510

这是内存访问错误，因为 loginView 在 __block 空间中。

只需在此区域中移动您的控制器（ loginView 委托），它应该可以工作。

```
FBLoginView *loginview = [[FBLoginView alloc] init];
static id staticDelegateInstance = self;

loginview.frame = CGRectOffset(loginview.frame, 5, 5);
loginview.delegate = staticDelegateInstance;

[self.view addSubview:loginview];

[loginview sizeToFit]; 
```

# c# - .ASPXAUTH Cookie 在 Request.Cookies 中未找到

> ID：16113757
> 
> 赞同：3
> 
> 时间：2013-04-19T21:28:52.220
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4, forms-authentication

我正在创建一个托管在启用了表单身份验证的网站下的 Web 应用程序。我在身份验证数据库“Admins”中有一个角色。这是我的控制器代码：

```
[RequireHttps]
[Authorize(Roles = "Admins")]
public ActionResult Index()
{
  return this.View();
} 
```

当我进入索引页面时，如果我没有通过身份验证，它会将我重定向到我输入凭据的登录页面。然后登录页面重定向回新应用程序的索引页面，但控制器无法识别用户已通过身份验证。

我已经`Authorize`关闭了该属性，并在 Chrome 开发人员控制台中查看了请求，并确认确实正在发送 cookie。但是，如果我保留该`Authorize`属性并转到索引页面，我的控制器中请求的 cookie 集合是空的。headers 集合包含一个标题为“Cookie”的标头，标头的值包含 .ASPXAUTH cookie。

登录页面使用以下代码调用登录：

```
FormsAuthentication.SetAuthCookie(userName, remember, "/"); 
```

这种行为在所有主流浏览器中都可以重现。

我可以做些什么来填充请求的 Cookies 集合？
我需要做什么才能使应用程序意识到用户确实经过身份验证？

**编辑：**
我仍然没有工作，但我很确定这与被过滤的 ASPXAUTH cookie 有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T21:41:09.783

我确信这个问题有多种原因。就我而言，问题在于我用来编写 cookie 的 MVC 版本与解密它的版本不同。我将我的站点更改为全部运行 MVC 4，并且一个站点创建的 cookie 可以由另一个站点使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T16:59:52.277

.ASPXAUTH cookie 是否生成了安全 cookie，即 SSL？如果是这样，并且您的 Index.aspx 仅通过 HTTP 而不是 HTTPS，您将看不到集合中的 cookie。

# php - Filter MySQL records between two tables by Join depending on a specific column value

> ID：16113759
> 
> 赞同：0
> 
> 时间：2013-04-19T21:28:56.097
> 
> 标签：php, mysql, sql, join

Recently I've been working on a PHP/MySQL script which reads information from a database with user info and file info stored in two separate tables.

Below are the schema's for the tables.

Table1

```
UID | Username | PermissionLevel
1   | First    | 1
2   | Next     | 3
3   | More     | 2 
```

Table2

```
FID | Filename | FileLevel | UploadUsername
1   | file.txt | 2         | First
2   | hand.mp4 | 1         | First
3   | 1245.dds | 1         | Next
4   | beta.sql | 3         | More 
```

For the purpose of this message I have omitted the passwords column and the file title/description column, since they play no part in the result I am trying to achieve.

So far I have come up with this SQL code

```
SELECT DISTINCT table2.*, 
table1.*
FROM table2 JOIN table2 ON table2.FileLevel <= table1.PermissionLevel
WHERE table2.UploadUsername = table1.Username 
ORDER BY FID DESC LIMIT 7 
```

This generates the appropriate listing I want, but does not filter the level of content shown.

Any user with a PermissionLevel of 1 should only see Files with a FileLevel of 1\. Users with PermissionLevel of "2" can see files of FileLevel of both 2 AND 1, and so on.

But at the current stage it seems to just want to display ALL results regardless of File/Permission Level.

I've been stuck at this issue for a couple of days now and just can't seem to get my head around this. It's likely to be something simple I may have overlooked, but I hope that a fresh pair of eyes may help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:07:00.490

我不确定我是否完全理解这个问题，但这是我能做到的。您有一个返回所有上传文件的查询。您现在想要过滤该列表，因此它有时会显示较少的结果，具体取决于用户的权限级别。请注意，此用户是网站上的活跃用户，不一定是上传文件的同一用户，因此此条件不适`table1`用于您的查询表。

一个常见的解决方案是使用一个会话变量来存储您当前用户的 id 以及可能的其他信息。

```
$_SESSION['user'] = 'somebody';
$_SESSION['permissionLevel'] = 3; 
```

如果您没有`permissionLevel`本地变量，则必须在`table1`表上加入*两次*，一次是查找*上传者，一次是查找**当前用户*的权限级别。您的原始查询中也有错字。以下将为您提供两个用户

```
SELECT *
FROM table2
JOIN table1 uploader WHERE table2.UploadUsername=table1.Username
JOIN table1 currentuser WHERE table2.PersmissionLevel<=table1.PermissionsLevel AND users.Username='$_SESSION[user]'
ORDER BY FID DESC 
```

# c - How to Create C DLL using Visual Studio 2012

> ID：16113763
> 
> 赞同：8
> 
> 时间：2013-04-19T21:29:09.607
> 
> 标签：c, visual-studio, dll

I've been doing all of my development using C# in Visual Studio, first 2010 and now 2012\. I need to create a DLL using C language for the project I'm working on. Only when I do File | New Project, I can't find an option for creating a DLL using C.

How do you do this?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T21:33:27.887

它位于文件/新建/项目/模板/Visual C++/Win32/Win32 项目下。按照向导进行操作，您将在第二页看到“DLL”。

（这适用于 Visual Studio 2012 - 某些措辞在其他版本中可能有所不同。）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-01-13T14:44:36.310

这是完整的教程：[演练：创建和使用动态链接库（C++）](https://msdn.microsoft.com/en-us/library/ms235636.aspx)

# php - Regular Expression capturing records PHP 2

> ID：16113768
> 
> 赞同：0
> 
> 时间：2013-04-19T21:29:25.060
> 
> 标签：php, regex, string

I'm trying to get the result below, but I can not, could someone give me an idea?

My Cod.:

```
$string ='ZAMM Et a est hac pid pid sit amet, lacus nisi                   ZPPP scelerisque sagittis montes, porttitor ut arcu                 ZAMM tincidunt cursus eu amet nunc ZAMM c ac nunc, et pid pellentesque amet,                   ZSSS m urna scelerisque in vut';

if(preg_match_all("/ZAMM.*/", $string, $matches)) {
    foreach($matches[0] as $match){
      echo $match;
      echo "<br />";
    }
} 
```

Expected result:

```
1: ZAMM Et a est hac pid pid sit amet, lacus nisi                   ZPPP scelerisque sagittis montes, porttitor ut arcu                 ZAMM tincidunt cursus eu amet nunc ZAMM c ac nunc, et pid pellentesque amet,                   ZSSS m urna scelerisque in vut

2: ZAMM tincidunt cursus eu amet nunc ZAMM c ac nunc, et pid pellentesque amet,                   ZSSS m urna scelerisque in vut

3: ZAMM c ac nunc, et pid pellentesque amet,                   ZSSS m urna scelerisque in vut 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:38:19.903

```
/ZAMM(.(?!ZAMM))*/ 
```

取所有未跟随*ZAMM*的字符。这称为*负前瞻*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:44:17.637

你需要对这种事情使用前瞻。您需要的模式如下所示：

```
/ZAMM.*?(?=(ZAMM|$))/ 
```

这就是正则表达式开始变得复杂的地方。这个想法是您正在匹配一个字符串，但还要在字符串中向前查找以找到匹配的终点。您可以在此处找到有关此和其他高级正则表达式语法的更多信息：[http ://www.regular-expressions.info/refadv.html](http://www.regular-expressions.info/refadv.html)

您还需要`.*`通过添加问号将现有模式变为“非贪婪”模式，否则它将在第一次匹配时继续到字符串的末尾（就像它已经在做的那样）。

希望有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:31:43.547

`.*`是“贪婪的”，所以第一个匹配将消耗整个字符串的其余部分。相反，尝试`.*?`使其不贪婪。

# jquery - jquery - How to best update a text file on change

> ID：16113770
> 
> 赞同：1
> 
> 时间：2013-04-19T21:29:27.300
> 
> 标签：jquery

I have a jquery script on a page that's coming together, thanks to code and people here, and i'm stuck at a point where I need to call a part of a larger function. I'm not sure how to break into multiple functions i think. Everything runs correctly when i create dynamic input fields and it totals up some amount fields into a totals box, but if i don't create new input boxes then it don't get that part i need to total up these inputs. Here is a sample of what i have so far with a comment in the code where i need help:

[http://jsfiddle.net/A3dnr/](http://jsfiddle.net/A3dnr/2/)

```
// ** Need help to call just this part when text is entered/changed in any of the 'amount' fields **
   var total = 0;
    $('input[name^="Amount"]').each(function () {
        total += parseInt(this.value, 10) || 0;
        if (this.value.length === 0) this.value = 0;
    });
    $('#Totals').val(total); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:43:05.430

计算总数的代码块位于*添加新行*按钮的单击处理程序中，因此只有在按下此按钮时才会调用它。您需要将其移到点击处理程序之外。[检查这个小提琴](http://jsfiddle.net/A3dnr/4/)。我已将其转换为如下函数

```
 function updateTheTotal(){
           var total = 0;
           $('input.Amount').each(function () {
              total += parseInt(this.value, 10) || 0;
              if (this.value.length === 0) this.value = 0;
           });
           $('#Totals').val(total);
        } 
```

它会在所有金额字段 的*keyup上被调用*

```
$('.Amount').on('keyup', updateTheTotal); 
```

**注意：**您的代码是通过缓存选择器进行优化的候选者

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:42:47.533

您需要添加一个事件。首先在每个金额输入上添加一个“金额”类。然后添加如下内容：

```
$('table').on('change', '.amount', function() {
  var amount = 0;
  $('.amount').each(function() {
    amount =+ this.value;
  })
  $('#Totals').val(amount);
}) 
```

此外，还将 type="number" 添加到您的金额输入中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:43:53.677

创建一个函数来执行总计，并在现有的单击事件和绑定到字段更改的新更改事件中调用它。

```
function updateTotal()
{
    var total = 0;
    $('input[name^="Amount"]').change(function () {
        total += parseInt(this.value, 10) || 0;
        if (this.value.length === 0) this.value = 0;
    });
    $('#Totals').val(total);        
}

$('body').on('change','input[name^="Amount"]',function () {
    updateTotal();
}); 
```

# c# - Strange issue with IsolatedStorage in WP7 device

> ID：16113774
> 
> 赞同：0
> 
> 时间：2013-04-19T21:29:38.223
> 
> 标签：c#, windows-phone-7, xml-serialization, isolatedstorage, onedrive

I have a strange problem in my Windows Phone 7 application. I need to **read/write** some xml file in my app and I'm using `IsolatedStorage` to collect data. My app sends/gets data from `SkyDrive` this is why I use it.

Ok, here is function which generate exception:

```
private void CreateFileIntoIsolatedStorage(List<Record> list)
    {
        isf = IsolatedStorageFile.GetUserStoreForApplication();
        if(list.Count == 0)
            list = new List<Record>() { new Record { Date = DateTime.Today, Value = 0 }};

        if (isf.FileExists(fileName))
        {
            isf.DeleteFile(fileName);
        }

        XmlWriterSettings xmlWriterSettings = new XmlWriterSettings();
        xmlWriterSettings.Indent = true;

        using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
        {
            using (IsolatedStorageFileStream stream = myIsolatedStorage.OpenFile(fileName, FileMode.Create))
            {
                XmlSerializer serializer = new XmlSerializer(typeof(List<Record>));
                using (XmlWriter xmlWriter = XmlWriter.Create(stream, xmlWriterSettings))
                {
                    serializer.Serialize(xmlWriter, list);
                }
            }
        }
    } 
```

**Problem:**

My problem starts when I this function runs for the second time. Then `isf.DeleteFile(fileName);` throws [IsolatedStorageException](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstorageexception%28v=vs.95%29.aspx). And creating `stream` crashed application.

It's strange cause it happens every time I run it on my device, and rarely when I use the debugger.

So my **question** is how can I solve it or are there better ways to do this?

Any help would be appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:56:08.807

可能是因为在您的方法开始时，您有：

```
isf = IsolatedStorageFile.GetUserStoreForApplication(); 
```

你永远不会处理它。然后，稍后，您再次在`using`. 但是那个已经被处理了。然后下次你打电话时`CreateFileIntoIsolatedStorage`，你会再次得到它，再次没有处理。

也许这就是你想要的：

```
using (var isf = IsolatedStorageFile.GetUserStoreForApplication())
{
    if(list.Count == 0)
        list = new List<Record>() { new Record { Date = DateTime.Today, Value = 0 }};

    if (isf.FileExists(fileName))
    {
        isf.DeleteFile(fileName);
    }
} 
```

尽管那个类范围的`isf`变量很麻烦。如果您想让商店保持活跃，那么只需调用一次并保持打开状态。否则，放弃类范围的变量。

或者，可能是由于这个原因，来自[IsolatedStorageFile.DeleteFile](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragefile.deletefile%28v=vs.95%29.aspx)的文档？

> 文件删除可能会出现间歇性故障，因为文件可以同时被病毒扫描程序和文件索引器等操作系统功能使用。对于最近创建的文件尤其如此。Macintosh 用户应该注意这个问题，因为它经常被索引。由于这些原因，将代码添加到处理 IsolatedStorageException 的代码块以重试删除文件或记录失败非常重要。

我会建议类似：

```
int retryCount = 0;
while (retryCount < MaxRetryCount && isf.FileExists(fileName))
{
    try
    {
        isf.DeleteFile(fileName);
    }
    catch (IsolatedStorageException)
    {
        ++retryCount;
        // maybe notify user and delay briefly
        // or forget about the retry and log an error. Let user try it again.
    }
} 
```

# c++ - 优化 boost::python::object 实例

> ID：16113776
> 
> 赞同：5
> 
> 时间：2013-04-19T21:29:44.597
> 
> 标签：c++, python, numpy, boost-python, python-c-extension

我最近开始使用[Boost 的 Python](http://www.boost.org/doc/libs/1_53_0/libs/python/doc/index.html)库来包装一个相当大的 C++ 库的一部分。

很偶然，我发现 Boost Python 创建的每个 Python 对象至少比 Python 列表的大小要大。

## 简单类型

使用[C-Python API 文档中的](http://docs.python.org/2/c-api/index.html)[`noddy_NoddyType`示例](http://docs.python.org/2/extending/newtypes.html#the-basics)，我可以很容易地公开一个新的对象类型实例，.`noddy_NoddyObject`

使用原始 C-Python API，这就像自定义 Python 对象一样小而简单：-

```
>>> import noddy, sys

>>> print sys.getsizeof( noddy.Noddy )   # PyTypeObject size?
872
>>> print sys.getsizeof( noddy.Noddy() ) # PyObject size
16 
```

并与基础对象进行比较：-

```
>>> print sys.getsizeof( object )
872
>>> print sys.getsizeof( object() )
16 
```

不出所料，但是当我`noddy_NoddyObject`使用 Boost Python 公开时呢？

```
>>> print sys.getsizeof( noddy.Noddy )
904
>>> print sys.getsizeof( noddy.Noddy() )
80 
```

说什么？！！这并不理想......对象实例比它们需要的大 5 倍！

（这在非 64 位机器上会有所不同。）

在 Boost Python wiki 上，有[一些关于](http://wiki.python.org/moin/boost.python/InternalDataStructures)额外膨胀的解释：-

> **内存消耗**
> 
> 一般来说，一个带有对应 Python 对象的包装 C++ 对象的大小为：
> 
> *   一个新型类（派生自 Python 中的“对象”）实例加上
> *   **允许实例中的可变长度数据所需的额外大小**，加上
> *   C++ 对象的大小，加上
> *   ~~vtable 指针的大小~~，加上指向 C++ 对象的实例持有者的指针，加上
> *   确保实例持有者正确对齐所需的零个或多个字节的填充。
> 
> 你可以在`boost/python/object/instance.hpp`. `instance<value_holder<T> >`对于某些 C++ 类，大多数 Python 对象由 , 表示`T`。

但显然没有迹象表明如何减少实例大小，也没有说明如何使用自定义`PyTypeObject`.

## 序列类型

因此，在 中，您可以在其基类的声明中[`instance.hpp`](http://www.boost.org/doc/libs/1_53_0/boost/python/object/instance.hpp)看到 all`boost::python::instance`的使用。这可以解释 Boost Python-compiled的`PyObject_VAR_HEAD`大小与 Python 的大小更相似，或者：-`noddy_NoddyObject``list``numpy.array`

```
>>> print sys.getsizeof( list )
872
>>> print sys.getsizeof( list() )
72
>>> print sys.getsizeof( numpy.array )
72
>>> print sys.getsizeof( numpy.array() )
80 
```

（哦，这很有趣..如果我没记错的话，`numpy.array`是最小`PyObject`实例的大小，比 a 小得多`PyTypeObject`。我想知道那里的含义是什么..）

## 内存管理

除了对象大小之外，让我关注的问题是堆事务之一。我有一个 C++ 基类，它几乎完全由与内存管理相关的功能组成：它有`new`和`delete`运算符；大量与引用计数相关的方法，并被大约一百个其他 C++ 类继承。

曾经阅读过[定义新类型的 C-Python API 文档](http://docs.python.org/2/extending/newtypes.html#the-basics)，我认为这里适合使用新类型。通过定义一个新`PyTypeObject`结构，并将其成员（`tp_alloc`等）指向 C++ 类的运算符和成员函数，我想我可以让 Python 解释器直接调用 C++ 成员函数。派生类类型将不会在典型`boost::python::object`实例和（已托管的）C++ 类之间复制任何功能。

使用`bp::class_<>`模板，我认为 C++ 代码和 Python 代码都将分别管理类实例的内存，这似乎可能非常低效。

## 做一个新的`PyTypeObject`

通过使用新的`PyTypeObject`，我认为我所有的担忧都会得到解决。简单对象的内存占用可能要小得多（如果我能`noddy_NoddyObject`减少到 24 个字节，我会非常高兴），而且管理内存的方式似乎会有更大的灵活性。

那么，有没有其他人觉得需要定义一个新的`PyTypeObject`，不同于 Boost Python 实例的默认值？怎么办？

通过使用更大的基本类型，Boost 似乎正在失去效率和灵活性。减肥总是比增重更痛苦。

# android - How to force a content provider to reset when manually deleting database

> ID：16113783
> 
> 赞同：7
> 
> 时间：2013-04-19T21:30:06.463
> 
> 标签：android, android-contentprovider

In my app I have a ContentProvider attached to a table in a database with a CursorLoader that fills a ListView in one of my Activities. This table is filled empty by default and gets filled with user input data. I want to allow the user to completely delete all of their stored data and I'm deleting the entire database when this option is selected. The database is then recreated in it's default state when the user starts using the app again, just as it would the first time they used the app.

My issue is when I delete the database, the ContentProvider doesn't detect that the database was deleted and when I go back to my listview activity, the list is still there. I'm also making the app completely reload the ListView Activity instead of just resuming from memory and the list is still there even though the database is empty. The only way I can get the ContentProvider to reload is to kill the app in the system settings and then open it again.

Is there a way to forcefully restart the ContentProvider or to tell it that the data has been updated from outside of the ContentProvider class itself?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-13T13:15:11.467

您也可以简单地使用内容提供者的删除方法而不定义选择：

```
context.getContentResolver().delete(YourProvider.CONTENT_URI, null, null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T06:17:03.623

我在这里找到了我的问题的解决方案：[https ://stackoverflow.com/a/8235584/1943155](https://stackoverflow.com/a/8235584/1943155)

就像在另一篇文章中一样，我在 ContentProvider 类的 onCreate 中获取了我的 dbHelper，并且在每种方法中获取了一个新的 dbHelper 解决了我的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:34:32.147

您想使用 cursorAdapter 填充列表视图，并在 contentProvider 中的内容发生更改时通知光标。

在 contentProvider 实现的 delete 方法中，调用[contentResolver.notify](http://developer.android.com/reference/android/content/ContentResolver.html#notifyChange%28android.net.Uri,%20android.database.ContentObserver%29) 。这将通知通过调用 contentResolver 填充的游标数据发生了变化。

# graph - 如何通过添加具有最小总权重的边来找到从源到目的地的路径

> ID：16113784
> 
> 赞同：0
> 
> 时间：2013-04-19T21:30:10.350
> 
> 标签：graph, connectivity

我在 3-D 空间中有大约 100 个原子。每个原子是一个节点。当两个节点接近于 0.32 nm 且权重等于距离时，在两个节点之间添加边。我想找到从源节点到目标节点的路径。由于 100 个原子没有完全连接，有时我找不到路径。

我想要做的是添加一个或多个边缘以使源和目标连接。同时，我还想最小化新添加边的总权重。同样，权重是根据两个节点的距离计算的。

这是一种最小切割的反向问题。有什么算法可以帮助做到这一点吗？

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:34:47.513

似乎一种方法是使用图搜索算法来查找最短路径，例如 Dijkstra 的算法，并且可能从两端（源和目标）工作。

唯一的区别是您无法知道是否确实存在任何边，因此您正在创建图形。所以如果你从A开始，图的节点是A、B、C、D、E。那么你需要检查AB、AC、AD和AE是否存在。如果只存在 AB，则检查 BC、BD 和 BE。

这将是 O(|V|^2)，但实际上取决于探索了多少边。

如果您只对添加长度超过 0.32 nm 的边缘感兴趣，则同样的想法也适用。只是路径长度计算发生了变化。任何小于 0.32 nm 的边缘都是零长度，或者只是短得多（因为它们变得不那么重要了）。如果最后一点不起作用，那么它会变得有点棘手。

# java - IntelliJ not using external Jar's if not added via Maven when running JSF application?

> ID：16113789
> 
> 赞同：1
> 
> 时间：2013-04-19T21:30:19.417
> 
> 标签：java, maven, tomcat, intellij-idea, dependencies

I have a very simple line of code that is called from an .xhtml file ( in a JSF 2.0 project ) which looks like:

```
try {
    Class.forName("com.mysql.jdbc.Driver");
}catch(Exception e) {
    e.printStackTrace();
} 
```

So in my C:\ folder I have the file: **mysql-connector-java-5.1.24-bin**. I have added this jar as an extenral jar in IntelliJ Idea 12\.

When I start my application like this, I get the "Class not found exception." However, when I add this dependency to my pom.xml file:

```
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>5.1.6</version>
</dependency> 
```

I get no exception and class is loaded fine.

Here is a screenshot: ![enter image description here](https://i.stack.imgur.com/jaRCM.png)

The jar file I underlined with green is the Jar added externally from **File -> Project Structure -> Libraries **

The one I underlined with red is the jar file that is downloaded by maven.

My question is: Why do I get the Class not found exception, although I have added the Jar externally?

In case I require a Jar file that I will not be able to download via maven, what am I supposed to do?

**One extra information:** I created a sample Java project with one class only, and I added this external Jar file with the method I explained above. No maven, no tomcat, nothing. Just a simple main method. I ran this same code, and it worked fine. So it has to have something to do with IntelliJ and one or more of:

*   Maven
*   Tomcat ( Deploying a War file )
*   Maven and Tomcat?

**Edit: When I add the external Jar only** and try importing a class from com.mysql.jdbc... IntelliJ IDEA does not come up with any warnings / errors. It finds the class, however after the deployment, it seems like the Class can not be found anymore.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T21:41:53.567

webapp 在tomcat 上部署并运行。Tomcat 不关心 IntelliJ 源项目中的 jar。对 tomcat 重要的是部署的 webapp 的 WEB-INF/lib 目录下的一组 jar 文件。只有那些 jars 在 webapp 的类路径中。

我不太清楚 IntelliJ 如何构建和部署 webapps，尤其是当 Maven 出现在图片中时。但我猜它只部署 Maven 项目的编译和运行时范围内的 jar。对于外部 jar，可能可以配置 IntelliJ 项目，以便将其包含在构建和部署的存档中。

但无论如何，如果你使用 Maven，你必须能够在不使用 IntelliJ 的情况下构建你的战争。这就是构建工具的全部意义所在：它用于在没有 IDE 的情况下构建项目。所以Maven必须知道所有必要的jar。因此，如果 Maven 中心不提供该 jar，则应将其添加到您自己的本地 Maven 存储库（至少）或您公司的私有存储库中。

# python - 随机短语创建器

> ID：16113792
> 
> 赞同：2
> 
> 时间：2013-04-19T21:30:32.533
> 
> 标签：python, python-3.3

我想创建一个程序，该程序将通过创建 10 个从 1 到 20 的随机整数来生成随机短语，并且根据每个变量整数，将生成某个单词或短语。有没有比以下更简单的方法：

```
#This is a random phrase generator
import random
Rand1 = random.randint (1, 20)
Rand2 = random.randint (1, 20)
Rand3 = random.randint (1, 20)
Rand4 = random.randint (1, 20)
Rand5 = random.randint (1, 20)
Rand6 = random.randint (1, 20)
Rand7 = random.randint (1, 20)
Rand8 = random.randint (1, 20)
Rand9 = random.randint (1, 20)
Rand10 = random.randint (1, 20)
    if Rand1 ==1:
        print ('Squirrel') 
```

等等... PS 使用 Python 3

感谢您提供有用的建议。我是 python 新手，有可以帮助我创建更好代码的人非常有帮助。如果有人在乎，我将它用于与您交谈的程序，并为您提供听笑话和玩几个游戏的机会。祝你今天过得愉快。

PPS 我最终选择了：

```
import random
words = 'squirrel orca ceiling crayon boot grocery jump' .split()
def getRandomWord(wordList):
    # This function returns a random string from the passed list of strings.
    wordIndex = random.randint(0, len(wordList) - 1)
    return wordList[wordIndex]
potato = getRandomWord(words)
print (potato) # plus of course all the other words... this is just the base. 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T21:35:16.050

当然。使用 Python 列表和/或字典。如果您从一组中选择：

```
words = ['Some', 'words', 'any', 'number', 'of', 'them']
choices = [random.choice(words) for _ in range(10)]
print(' '.join(choices)) 
```

如果没有，您可以使用嵌套列表：

```
words = [['Sam', 'Joe'], ['likes', 'hates'], ['apples', 'drugs', 'jogging']]
choices = [random.choice(group) for group in words]
print(' '.join(choices)) 
```

这可以扩展到任意数量的组和每个组中的单词。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T21:34:39.880

有多种更简单的方法。首先想到的是有一个短语列表，然后使用 random.choice 代替（这样你也不必担心添加新单词和调整。

例子：

```
import random

part1 = ("Cat","Dog","Squirrel")
part2 = ("jumps", "walks", "crawls")
part3 = ("under","over")

print (random.choice(part1) + " " +  random.choice(part2)) 
```

（编辑为使用 ('s around print for Python 3)

您还可以使用列表列表来构建整个字符串...

```
words = (part1, part2, part3)
print (" ".join([random.choice(word) for word in words])) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:32:33.780

```
import random
Rand1 = random.randint (1, 4)
random1words = ['','Squirrel','Falcon','Pig']

print (random1words[Rand1]) 
```

几乎肯定会更好

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-29T18:14:47.087

在这里，这最初取自我的书代码（一种密码形式）实现（书密码）取自这里：[arnold/book cipher with python](https://stackoverflow.com/questions/42926663/arnold-book-cipher-with-python/64517550#64517550)

但是我在代码中更改了几处以使其符合您的描述。

```
BOOK="shakespeare.txt" # Your book/document .txt file containing words (maybe, articles from wikipedia, whatever,)
#the content from this file (in this case, shakespeare.txt); will be taken and used in the random-word/phrase progress.

def GetBookContent(BOOK):
    ReadBook = open(BOOK, "r")# Open <BOOK>(shakespeare.txt in this case) in reading mode, into ReadBook
    txtContent_splitted = ReadBook.read();# assign the contents(splitted!) from <BOOK> into -> txtContent_splitted
    ReadBook.close()#Closing the book
    Words=txtContent_splitted

    return( txtContent_splitted.split() )

boktxt = GetBookContent(BOOK)
K
#Randomness happens here. We import random, assigns a range 
#(in a form of a list!) 
#from 0 to 10 into the variable K.
#and we shuffle K, (hence, we get the random word-indexes)

import random; K=list(range(0,10)); random.shuffle(K);

x=0;klist=K
for keys in klist: print(boktxt[int(klist[x])]);x=x+1

#Test Run:
#generating 10 random words.
#          Before
#          speak.
#          me
#          hear
#          any
#          what 
#          proceed
#          further,
#          First
#          we 
```

# ios - 限制圆内的运动

> ID：16113796
> 
> 赞同：1
> 
> 时间：2013-04-19T21:30:58.863
> 
> 标签：ios, algorithm, uiview, geometry, touches

在这方面寻找一些方向。假设你有一个半径为 r 的环。在环内有一个半径为 c 的圆，其中 c < r。我希望用户能够抓住内圈并移动/投掷它，但圈子应该被限制在环内。对以下有什么建议吗？

1.  处理触摸事件
2.  将视图限制为一个圆圈所涉及的数学？

我在 iOS 中工作，但这个概念很笼统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:37:09.057

不确定“处理触摸事件”是什么意思，但这是数学：

```
hypot(circle.center.y - ring.center.y, circle.center.x - ring.center.x) < (r - c) 
```

# sorting - 在 Stata 代码中订购 varlist

> ID：16113800
> 
> 赞同：1
> 
> 时间：2013-04-19T21:31:30.243
> 
> 标签：sorting, stata, data-management

我将以下内容视为编程练习，而不是基于统计的做事方式。

基本上，我想`N`用一个预测变量运行逻辑回归，然后为每个变量存储变量名称及其`chi-squared`值。完成所有预测后，我想显示按卡方从最高到最低排序的每个预测变量。

到目前为止，我有以下内容：

```
local depvar    binvar1
local indepvars predvar1 predvar2 predvar3

* expand and check collinearity *
_rmdcoll `depvar' `indepvars', expand
local indepvars "`r(varlist)'"

* first order individual variables by best chi-squared *
local vars
local chis
foreach v in `indepvars' {
    di "RUN: logistic `depvar' `v'"
    quietly logistic `depvar' `v'

    * check if variable is not omitted (constant and iv) *
    if `e(rank)' < 2 {
        di "OMITTED (rank < 2): `v'"
        continue
    }

    * check if chi-squared is > 0 *
    if `e(chi2)' <= 0 {
        di "OMITTED (chi2 <= 0): `v'"
        continue
    }

    * store *
    local vars "`vars' `v'"
    local chis "`chis' `e(chi2)'"
    di "ADDED: `v' (chi2: `e(chi2)')"
}

* ... now sort each variable (from varlist vars) by chi2 (from varlist chis) ... * 
```

如何通过最后一行返回的卡方对每个变量进行排序，然后显示变量列表，其卡方从最高卡方到最低卡方排序？

需要明确的是，如果以下 varlists 是由上述结果产生的：

```
local vars predvar1 predvar2 predvar3
local chis 2 3 1 
```

然后我想得到类似以下的东西：

```
local ordered predvar2 3 predvar1 2 predvar3 1 
```

或者，或者，

```
local varso predvar2 predvar1 predvar3
local chiso 3 2 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T00:01:57.923

这是一种方法。

```
local depvar    binvar1
local indepvars predvar1 predvar2 predvar3

* expand and check collinearity *
_rmdcoll `depvar' `indepvars', expand
local indepvars "`r(varlist)'"

* first order individual variables by best chi-squared *

gen chisq = . 
gen vars = "" 
local i = 1 

foreach v in `indepvars' {
     di "RUN: logistic `depvar' `v'"
     quietly logistic `depvar' `v'

     * check if variable is not omitted (constant and iv) *
     if `e(rank)' < 2 {
          di "OMITTED (rank < 2): `v'"
     }

     * check if chi-squared is > 0 *
     else if `e(chi2)' <= 0 {
          di "OMITTED (chi2 <= 0): `v'"
     }

     * store *
     else {  
          quietly replace vars  = "`v'" in `i' 
          quietly replace chisq = -e(chi2) in `i' 
          local ++i   
          di "ADDED: `v' (chi2: `e(chi2)')"
     }
}

sort chisq
replace chisq = -chisq 
l vars chisq if chisq < ., noobs 
```

# c++ - C++ 括号匹配应用程序

> ID：16113808
> 
> 赞同：3
> 
> 时间：2013-04-19T21:32:02.907
> 
> 标签：c++, data-structures, stl, stack

我必须编写一个接受字符串并返回布尔值的函数。传入的字符串是一系列或不同的括号打开或关闭 ex.({[]}) 并返回“parens”是否平衡。这必须通过将项目添加到堆栈来实现。我收到以下错误：

> parenMatching_demo.cpp:18:12: 错误: 'c == '(' 中的 'operator==' 不匹配

伪代码是：

```
matcher(expression) 
    for each character in expression 
        if  the character is an opener
            push on stack
        else if the character is a closr
            if stack is empty return false
            if the (opener at) the top of the stack does not match the closer
                return false
            pop the stack

     if the stack is not empty return false
     return true 
```

这就是我所拥有的。

```
template <typename T>   
bool parenMatching(string c) {
    stack<string> s;
    for (int i = 0; i < s.size(); i++) {
        if (c == '(' || c == '[' || c == '{' || c == '<')
            s.push(c);
        else if (c == ')' || c == ']' || c == '}' || c == '>') {
            if (s.empty()) return false;
            if (s.top() != '(' || s.top() != '[' || s.top() != '{' || s.top() != '<')
                return false;
            s.pop();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T21:33:40.207

一个问题是堆栈的类型，应该是

```
stack<char> s; 
```

然后`for`循环，条件应该是

```
i < c.size() 
```

下一个问题是

```
if (c == '(' || c == '[' || c == '{' || c == '<') 
```

不比较字符串`c`at的字符`i`，因此您需要

```
const char c2 = c[i];
if (c2 == '(' || c2 == '[' || c2 == '{' || c2 == '<') 
```

如果您需要帮助来解决其余问题，请告诉我/我们 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T21:40:15.693

您在检查括号的代码中将字符串与字符进行比较。当你迭代你的字符串时，你错过了一个你正在查看的当前字符的行——你可能想要这样的东西：

```
char current = c.at(i); 
```

此外，正如 Daniel Frey 在他的回答中所说，您需要修复您的堆栈类型。

编辑 - 他已经更改了他以包含此信息，因此该答案应该包含您需要的一切。

# c# - 如何使这个 Func 与 Linq to SQL 一起工作？

> ID：16113810
> 
> 赞同：1
> 
> 时间：2013-04-19T21:32:29.247
> 
> 标签：c#, linq-to-sql, func

我有一个抽象的、通用的存储库类，它封装了很多逻辑，它能够做到这一点，因为它知道如何隔离唯一的*数据行*，这要归功于它的*KeyCompare*属性，该属性被注入到存储库的构造函数中：

```
Func<T, T, bool> KeyCompare { get; } 
```

此属性的作用是告诉基类使用哪些字段来获取唯一记录 - 有时它只是“Id”，并且可以像这样分配 KeyCompare（传递给构造函数）：

```
(item1, item2) => item1.Id == item2.Id 
```

但是，它也让我可以灵活地使用 Linq to SQL 类，这些类的键跨多个列，如下所示：

```
(item1, item2) => item1.Field1 == item2.Field1 && item1.Field2 == item2.Field2 
```

这在单元测试中效果很好，但这只是**因为我正在使用一个使用 Linq to Object 的模拟仓库进行测试**。

生产代码使用 Linq to SQL，因为我被告知我的`KeyCompare`属性不会按预期运行（因为`Func`不会被转换为 SQL），所以我应该使用 an`Expression`来代替。所以我开始四处搜索（显然`Func`不会被翻译成 SQL），看到了很多例子，但没有像我正在做的事情（这是什么迹象吗？）。

我使用的方式`Func`如下：

```
public T Item(T item)
{
    return (_items.SingleOrDefault(e => KeyCompare(e, item));
} 
```

我被告知要实现这样的方法（`KeyCompare`作为一个`Expression`）：

```
public T Item(T item)
{
    return (_items.SingleOrDefault(KeyCompare);
} 
```

但这不会编译（.SingleOrDefault 想要 a `Func`，而不是 a `Expression`），如果它编译了，它就不会使用我需要给它的*item*值来做我想做的事情。

我`Func`用 Ninject 将它注入到 repo 的构造函数中；这是我绑定`KeyCompare`构造函数参数的方式：

```
.WithConstructorArgument("keyCompare", (Func<MockEntity, MockEntity, bool>)((item1, item2) => item1.Id == item2.Id)); 
```

所以我被困住了。**如何使用 Linq to SQL 进行这项工作**？

另一种方法是，如果我在基类中删除此`KeyCompare`属性，则每次我需要实现一个具体的存储库时都编写冗余代码，我想避免这种情况。有了这个`KeyCompare`属性，我只需要编写特定于每个存储库类型的代码来实现一个新的，我喜欢这样。

这篇文章有我正在谈论的抽象存储库类的完整 [原始 - 它已经改变] 代码：[Ninject 可以使用匿名委托（func）作为 ConstructorArgument 吗？](https://stackoverflow.com/questions/16096229/can-ninject-use-an-anonymous-delegate-func-as-a-constructorargument/16096309#16096309)

**编辑**

[LINQ-to-SQL : Convert Func<T, T, bool> to an Expression<Func<T, T, bool>>](https://stackoverflow.com/questions/9321329/linq-to-sql-convert-funct-t-bool-to-an-expressionfunct-t-bool)有一个有趣的答案和一个精确的标题（我真的想知道我怎么会错过那个我的研究）。它实际上以一个出色、详细的答案回答了这个问题，我稍后会尝试。

> 现在的用法有点奇怪，因为这是一个 curried lambda。而不是传递 (x,y) => ... 你将传递 x => y => ...。

我确信该解决方案有效（它非常聪明），**但它没有解释*为什么*传递 (x,y) 需要后空翻和三轴来执行。**两个输入有什么关系？如果 Linq to Objects 可以做到这一点，那么究竟是什么阻止了 Linq to SQL 做同样的事情呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:48:23.540

我通过了所有测试——包括 LinqToObject“模拟”存储库和 LinqToSql“生产”存储库（后者是自动集成测试）。就是这样：

从这篇文章的答案：[LINQ-to-SQL : Convert Func<T, T, bool> to an Expression<Func<T, T, bool>>](https://stackoverflow.com/questions/9321329/linq-to-sql-convert-funct-t-bool-to-an-expressionfunct-t-bool)，获取代码以创建`PartialApplier`静态类，其作用是重写动态表达（根据我的掌握）。

然后我制作了两者`ListRepository`并`DataRepository`从`RepositoryBase`which implements派生`IRepository<T>`。这是回购类：

```
public abstract class RepositoryBase<T> : IRepository<T>
    where T : class
{
    public abstract IQueryable<T> Select();
    public abstract void Save(T item);
    public abstract void Delete(T item);
    public abstract void Delete(IEnumerable<T> items);

    public virtual Expression<Func<T, T, bool>> KeyCompare { get; private set; }
    public virtual int Count { get { return Select().Count(); } }

    protected RepositoryBase(Expression<Func<T, T, bool>> keyCompare)
    {
        KeyCompare = keyCompare;
    }

    public virtual T Item(T item)
    {
        var applied = PartialApplier.PartialApply(KeyCompare, item);
        var result = (Select().SingleOrDefault(applied));

        return result;
    }

    /// <summary>
    /// A method that updates the non-key fields of an existing entity with those of specified <see cref="item"/>.
    /// Called by the <see cref="Save"/> method.
    /// </summary>
    /// <param name="existing">The existing record to update.</param>
    /// <param name="item">A <see cref="T"/> object containing the values to update <see cref="existing"/> object with.</param>
    /// <returns></returns>
    protected abstract void UpdateExisting(T existing, T item);

    /// <summary>
    /// A method that saves all specified items.
    /// </summary>
    /// <param name="items">The entities to be saved.</param>
    public virtual void Save(IEnumerable<T> items)
    {
        foreach (var item in items)
        {
            Save(item);
        }
    }
} 
```

没有问题，`ListRepository`但需要一些返工才能正确派生`RepositoryBase`：

```
/// <summary>
/// A non-persistent repository implementation for mocking the repository layer.
/// </summary>
/// <typeparam name="T"></typeparam>
public class ListRepository<T> : RepositoryBase<T>
    where T : class
{
    private readonly List<T> _items = new List<T>();

    public ListRepository(IEnumerable<T> items, Expression<Func<T, T, bool>> keyCompare)
        : base(keyCompare)
    {
        _items.AddRange(items);
    }

    public override IQueryable<T> Select()
    { 
        return _items.AsQueryable(); 
    }

    public override void Save(T item)
    {
        var existing = Item(item);
        if (existing != null)
        {
            _items.Remove(item);
        }

        _items.Add(item);
    }

    public override void Save(IEnumerable<T> items)
    {
        foreach (var item in items)
        {
            Save(item);
        }
    }

    public override void Delete(T item)
    {
        _items.Remove(item);
    }

    public override void Delete(IEnumerable<T> items)
    {
        foreach (var item in items)
        {
            Delete(Item(item));
        }
    }

    /// <summary>
    /// Not implemented.
    /// </summary>
    /// <param name="existing"></param>
    /// <param name="item"></param>
    protected override void UpdateExisting(T existing, T item)
    {
        throw new NotImplementedException(); // list repo just wipes existing data
    }
} 
```

然后`DataRepository`可能看起来像这样：

```
public abstract class DataRepository<T> : RepositoryBase<T>
    where T : class
{
    private DataContext _context;

    public DataRepository(DataContext context, Expression<Func<T, T, bool>> keyCompare)
        : base(keyCompare)
    {
        _context = context;
    }

    public override IQueryable<T> Select()
    {
        return _context.GetTable<T>().AsQueryable();
    }

    /// <summary>
    /// A method that updates an existing item or creates a new one, as needed.
    /// </summary>
    /// <param name="item">The entity containing the values to be saved.</param>
    public override void Save(T item)
    {
        var existing = Item(item);
        if (existing != null)
        {
            UpdateExisting(existing, item);
        }
        else
        {
            _context.GetTable<T>().InsertOnSubmit(item);
        }

        _context.SubmitChanges();
    }

    /// <summary>
    /// A method that deletes specified item.
    /// </summary>
    /// <param name="item"></param>
    public override void Delete(T item)
    {
        var existing = Item(item);
        if (existing != null)
        {
            _context.GetTable<T>().DeleteOnSubmit(existing);
        }

        _context.SubmitChanges();
    }

    public override void Delete(IEnumerable<T> items)
    {
        foreach (var item in items)
        {
            Delete(item);
        }
    }

    protected override void UpdateExisting(T existing, T item)
    {
        throw new NotImplementedException(); // must override in derived classes - not obvious I know
    }
} 
```

因此，给定一个只有一个简单对象（`DataRepositoryIntegrationTest`在本例中称为）的 DataContext，我们可以创建一个实现来测试它：

```
public class TestRepository : DataRepository<DataRepositoryIntegrationTest>
{
    public TestRepository(DataContext context)
        : base(context,  (item1, item2) => item1.Id == item2.Id)
    { }

    protected override void UpdateExisting(DataRepositoryIntegrationTest existing, DataRepositoryIntegrationTest item)
    {
        existing.Value = item.Value;
        existing.DateUpdated = DateTime.Now;
    }
} 
```

然后可以编写测试：

```
[TestClass]
public class DataRepositoryTests
{
    private IRepository<DataRepositoryIntegrationTest> _repo;
    private static DataContext _context;

    [ClassCleanup]
    public static void CleanUp()
    {
        _context.Dispose();
    }

    public DataRepositoryTests()
    {
        _context = new DataContext(Settings.Default.IntegrationTestConnectionString);
    }

    [TestInitialize]
    public void InitRepository()
    {
        _context.ExecuteCommand("truncate table dbo.IntegrationTest");
        _context.ExecuteCommand("insert into dbo.IntegrationTest ([Value], [DateInserted]) values ('Test1', getdate())");
        _context.ExecuteCommand("insert into dbo.IntegrationTest ([Value], [DateInserted]) values ('Test2', getdate())");
        _context.ExecuteCommand("insert into dbo.IntegrationTest ([Value], [DateInserted]) values ('Test3', getdate())");
        _repo = new TestRepository(_context);
    }

    private DataRepositoryIntegrationTest CreateItem(string value)
    {
        return new DataRepositoryIntegrationTest { Value = value, DateInserted = DateTime.Now };
    }

    [TestMethod]
    public void ShouldInsertItem()
    {
        // arrange
        var item = CreateItem("Test.ShouldInsert1");
        var expectedCount = _repo.Count + 1;

        // act
        _repo.Save(item);
        var actualCount = _repo.Count;

        // assert
        Assert.AreEqual(expectedCount, actualCount);
    }

    [TestMethod]
    public void ShouldInsertItems()
    {
        // arrange
        var count = _repo.Count;
        var items = new DataRepositoryIntegrationTest[] { 
            CreateItem("Test.ShouldInsert1"),
            CreateItem("Test.ShouldInsert2")};
        var expected = count + items.Length;

        // act
        _repo.Save(items);
        var actual = _repo.Count;

        // assert
        Assert.AreEqual(expected, actual);
    }

    [TestMethod]
    public void ShouldUpdateItem()
    {
        if (_repo.Count == 0) throw new AssertInconclusiveException("ShouldUpdateItem requires an existing item.");

        // arrange
        var item = _repo.Item(new DataRepositoryIntegrationTest { Id = 1 });
        var expected = "updated";
        item.Value = expected;

        // act
        _repo.Save(item);
        var result = _repo.Item(new DataRepositoryIntegrationTest { Id = item.Id });
        var actual = result.Value;

        // assert
        Assert.AreEqual(expected, actual);
    }

    [TestMethod]
    public void ShouldDeleteItem()
    {
        if (_repo.Count == 0) throw new AssertInconclusiveException("ShouldUpdateItem requires an existing item.");

        // arrange
        var item = _repo.Item(new DataRepositoryIntegrationTest { Id = 1 });
        var expected = _repo.Count - 1;

        // act
        _repo.Delete(item);
        var actual = _repo.Count;

        // assert
        Assert.AreEqual(expected, actual);
    }

    [TestMethod]
    public void ShouldDeleteItems()
    {
        if (_repo.Count < 2) throw new AssertInconclusiveException("ShouldUpdateItem requires 2 existing items.");

        // arrange
        var items = new DataRepositoryIntegrationTest[] {
            new DataRepositoryIntegrationTest { Id = 1 },
            new DataRepositoryIntegrationTest { Id = 2 }};
        var expected = _repo.Count - items.Count();

        // act
        _repo.Delete(items);
        var actual = _repo.Count;

        // assert
        Assert.AreEqual(expected, actual);
    }
} 
```

**他们都通过了！**

# css - 阻止单个表格单元格确定表格宽度

> ID：16113815
> 
> 赞同：3
> 
> 时间：2013-04-19T21:32:50.320
> 
> 标签：css

```
A    B
A    B
A    X
A    B 
```

我有一个包含块内的表格，其宽度设置为 400 像素。当浏览器宽度小于 421px 时，包含块宽度切换到 95%。“A”和“B”类型的单元格包含简单的文本。有一个单元格包含一个已`white-space:nowrap`应用的链接。

我需要表格自行确定其尺寸（所以没有`table-layout:fixed-width`），但在确定第二列的宽度时不考虑单元格“X”。可以隐藏不适合的单元格“X”的内容。

我尝试过使用`width:100%`各种`overflow hidden`不同的元素，但无济于事。

html

```
<table>
    <tr>
        <th style="vertical-align:bottom;">
            <figure>
                <div class="minical-mo">month</div>
                <div class="minical-da">date</div>
            </figure>
        </th>
        <td style="vertical-align:bottom;"><h2>summary</h2></td>
    </tr>
    <tr>
        <th class="space">Calendar</th>
        <td class="space"></td>
    </tr>
    <tr>
        <th class="space">Date</th>
        <td class="space">date</td>
    </tr>
    <tr>
        <th>Start Time</th>
        <td>time</td>
    </tr>
    <tr>
        <th>End Time</th>
        <td>time</td>
    </tr>
    <tr>
        <th>Location</th>
        <td>location</td>
    </tr>
    <tr>
        <th class="space">Attachment</th>
        <td class="space link"><a href="link">link</a></td>
    </tr>
    <tr>
        <th class="space">Description</th>
        <td class="space">long desc</td>
    </tr>
</table> 
```

scss

```
table{  
    width:100%;
    margin:1em 0;
    th{
        color:$c_modal;
        text-align:right;
        font-size:.85em;
        padding: 3px;
        vertical-align:top;
        &.space{
            padding-top:1em;
        }
        figure{
            float:right;
            margin:0;
            .minical-mo{
                width:60px;
                height:15px;
                font-size:11px;
                line-height:15px;
                text-align:center;
                color:white;
                background-color:$c_main;
            }
            .minical-da{
                width:60px;
                height:45px;
                font-size:35px;
                line-height:45px;
                text-align:center;
                color:black;
                background-color:white;
                border-radius:0 0 5px 5px;
                -webkit-box-shadow: 0 5px 12px -5px $c_dk;
                -moz-box-shadow: 0 5px 12px -5px $c_dk;
                box-shadow: 0 5px 12px -5px $c_dk;
            }
        }   
    }
    td{
        color:black;
        font-size:.85em;
        padding:3px;
        vertical-align:top;
        &.space{
            padding-top:1em;
        }
        p{
            margin-bottom:1em;
            line-height:1.2;
        }
        &.link{
            overflow:hidden;
            a{
                                    width:100%;
                overflow:hidden;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:38:30.563

确保将以下内容应用于`.link`元素。

```
white-space:nowrap;
overflow:hidden;
text-overflow:ellipsis;
max-width:100px; /* adjust as needed */ 
```

如果链接太长，这将切断链接，并`...`在最后填写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T17:33:24.193

知道了

```
td.link{
    overflow:hidden;
}
td.link a{
    display:block;
    overflow:visible;
    max-width:10px;
    white-space:nowrap;             
} 
```

在锚上放置一个最大宽度，以防止它确定其列的列大小，然后允许其溢出可见。然后在表格单元格上隐藏溢出。

这个解决方案唯一的坏处是它`text-overflow:ellipsis`不起作用，因为我们隐藏了块溢出而不是文本溢出。在这种情况下，我很乐意做出牺牲。

如果有人能想办法解决`text-overflow`这个问题，请告诉我。

感谢大家的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:41:43.337

我通过限制文本字符串的实际大小然后将全文放在工具提示中来处理类似的问题。博客文章在[这里。](http://blog.digitaltools.com/post/2010/07/06/Displaying-a-Long-Description-Column-in-a-GridView.aspx)

![在此处输入图像描述](https://i.stack.imgur.com/sLsFd.png)

# objective-c - Cocos2d '对齐网格' 逻辑

> ID：16113823
> 
> 赞同：0
> 
> 时间：2013-04-19T21:33:34.883
> 
> 标签：objective-c, cocos2d-iphone

我正在 Cocos2d 中构建游戏，但我很难实现我想要的。想象一个 8 x 10 的正方形网格。您可以触摸一个正方形并水平/垂直拖动该正方形的行/列，但不能同时拖动。释放行/列后，方块将根据它们最接近的行/列位置“捕捉”回网格中的位置。

一切都以编程方式工作，没有重叠或错位的方块或无效的位置。但是，我似乎无法让这种“对齐网格”以我想要的方式制作动画。

我正在使用 MVC 设计模式将任何视图与任何游戏逻辑分开。视图只是简单地传递了一个“squaresToUpdate”数组，查看每个正方形，找到相应的精灵，并根据正方形的位置更新精灵的位置。

尝试按照以下方式执行某些操作时会出现问题：

```
-update():
for each square in squaresToUpdate:
  if square is not being dragged at the moment:
    setup a 'CCMoveTo' to bring the sprite in line with square 
```

我不能让方块在被拖动时自由移动，但在不被拖动时CCMoveTo。要么我每次更新都创建一个新动作，要么方块就吓坏了。

我不知道是不是我的逻辑被打破了，如果 CCMoveTo 没有做我想要的，或者这个问题实际上是否比我最初想象的要困难得多。有人可以帮我解决这个逻辑吗？

好的旧铅笔和纸给了我这个，但我不确定它是 100%：

```
- (void)update:(ccTime)dt {
    NSMutableArray *toDraw = [self.rootView whatAmIDrawing];
    for (GameObject *o in toDraw) {
        CCSprite *sprite = (CCSprite*)[self.batch getChildByTag:o.tag];
        if (o.moving == NO) {
            if (o.snapping == NO) {
                o.snapping = YES;
                CCMoveTo *move = [CCMoveTo actionWithDuration:self.rootView.model.activeGame.snapSpeed position:o.position];
                [sprite runAction:move];
            }
        } else {
            o.snapping = NO;
            sprite.position = o.position;
            sprite.rotation = o.rotation;
        }
    }
    [super update:dt];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:27:47.420

我会覆盖 cocos2d touch 方法：

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event
- (void)ccTouchMoved:(UITouch *)touch withEvent:(UIEvent *)event
- (void)ccTouchEnded:(UITouch *)touch withEvent:(UIEvent *)event 
```

ccTouchBegan 会将触摸点与每个游戏对象进行比较并设置一个“已触摸”标志：

ccTouchMoved 会将任何“触摸”对象的位置设置为新的触摸位置，并设置“移动”标志。

ccTouchEnded 将清除所有“已触摸”标志，将 CCMoveTo 运行到具有“移动”标志的任何对象的新位置，然后清除所有“移动”标志。

然后 update() 方法只需将每个精灵的位置更改为对象的位置。

# string - 如何复制一大块 Unicode 文本？

> ID：16113828
> 
> 赞同：0
> 
> 时间：2013-04-19T21:33:51.957
> 
> 标签：string, unicode, textbox, rendering, livecode

我有一个“数据”字段，其中包含正确显示的 Unicode 文本。我想复制其中的一部分并将其放入另一个名为“someData”的字段中。

我在一个按钮中尝试了以下脚本

```
on mouseUp
  put word 2 of line 1 of the unicodeText of field "data" into t
  set the unicodeText of field "someData" to t
end mouseUp 
```

非 Unicode 文本在“someData”字段中显示良好，但 Unicode 文本则不能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T03:32:05.730

您可能会使用 UTF8 编码然后解析然后重新编码

```
on mouseUp
    put word 2 of line 1 of uniDecode(the unicodeText of field "data","UTF8") into t
    set the unicodeText of field "someData" to uniEncode(t,"UTF8")
end mouseUp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T21:48:19.160

```
on mouseUp
   put unicode the unicodeText of word 2 of field "data" into field "someData"
end mouseUp 
```

应该管用。

马立克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T03:13:41.997

我不是 unicode 方面的专家，但可能有线索表明 LC 将大多数 unicode 内容视为属性。因此，可以设置一个字段的 uniCodeText：

```
set the unicodeText of fld 1 to "U+400" 
```

但是不能在变量中设置该属性或任何属性。考虑以下两个处理程序。假设存在两个字段，“fld 1”和“fld 2”。

```
on mouseUp
   set the useUnicode to "true"
   set the unicodeText of fld 1 to "U+400" -- an example
   set the unicodeText of fld "f2" to the uniCodeText of fld 1
end mouseUp

on mouseUp
   set the useUnicode to "true"
   set the unicodeText of fld 1 to "U+400"
   put fld 1 into temp
   set the unicodeText of fld "f2" to temp
end mouseUp 
```

第一个有效，第二个无效。在您的示例中，您尝试将显示的 uniCode 放入变量中。我不认为你可以“放”那种东西。你必须设置一个属性。

话虽如此，请查看“put uniCode”命令。这可能会绕过财产问题。如果有，请回信。

克雷格纽曼

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T09:00:33.923

这是您可以测试的另一种单线：

```
set the unicodeText of field 2 to the unicodeText of word 2 of field 1 
```

# haskell - Haskell 类型的特定数据构造函数

> ID：16113833
> 
> 赞同：3
> 
> 时间：2013-04-19T21:34:10.953
> 
> 标签：haskell, types, constructor

假设我有以下 Haskell 代码：

```
data Option
    = Help
    | Opt1 Int Double String
    -- more options would be here in a real case

handleOption :: Option -> IO ()
handleOption option = case option of
    Help -> handleHelp
    Opt1 n f s -> handleOpt1 n f s

handleHelp :: IO ()
handleHelp = print "help"

handleOpt1 :: Int -> Double -> String -> IO ()
handleOpt1 n f s = print (n, f, s) 
```

在上面的代码中，提前解构对象在我看来是一种浪费，因为我可以将数据整齐地捆绑在一起。现在我必须单独传递 Opt1 的每个部分，或者创建一个单独的数据类型来将它们拖走。是否可以传入整个`Opt1`to`handleOpt1`而不允许`Option`传入一般实例，例如`handleOpt1 Help`编译错误？

下面的示例伪代码：

* * *

```
data Option
    = Help
    | Opt1 Int Double String

handleOption :: Option -> IO ()
handleOption option = case option of
    Help -> handleHelp
    opt1 @ Opt1{} -> handleOpt1 opt1

handleHelp :: IO ()
handleHelp = print "help"

handleOpt1 :: Option:Opt1 -> IO ()
handleOpt1 (Opt1 n f s) = print (n, f, s) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T22:25:29.933

您可以为此使用[GADT](http://www.haskell.org/ghc/docs/7.6.1/html/users_guide/data-type-extensions.html#gadt)。

```
{-# LANGUAGE GADTs #-}

data Option a where
    Help :: Option ()
    Opt1 :: Int -> Double -> String -> Option (Int, Double, String)

handleOption :: Option a -> IO ()
handleOption option = case option of
    Help          -> handleHelp
    opt1 @ Opt1{} -> handleOpt1 opt1

handleHelp :: IO ()
handleHelp = print "help"

handleOpt1 :: Option (Int, Double, String) -> IO ()
handleOpt1 (Opt1 n f s) = print (n, f, s) 
```

使用 GADT，您可以向编译器提供更多类型信息。对于`handleOpt1`，因为它只接受`Option (Int, Double, String)`，所以编译器知道`Option ()`(ie `Help`) 永远不会被传入。

也就是说，使用 GADT 会使其他一些事情变得更加困难。例如，自动派生（例如`deriving (Eq, Show)`）通常不适用于它们。您应该仔细考虑在您的案例中使用它们的利弊。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T01:04:30.623

`handleHelp`在这个特定的例子中，通过抛弃并使`handleOpt1`它们成为函数的独立方程来解决“问题”似乎更自然`handleOption`：

```
handleOption :: Option -> IO ()

handleOption Help = print "help"

handleOption (Opt1 n f s) = print (n, f, s) 
```

这让你两全其美。您可以为每种情况编写一个单独的方程式（因此，即使每种情况都很大，您也可以防止它们融合成一个巨大的方程式），您不必编写任何样板“调度”函数，也不必命名`Opt1`外壳的各个部分，直到您真正需要使用它们为止。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T22:21:53.257

GHC 很有可能内联`handleHelp`and `handleOpt1`，从而避免调用开销 -[查看生成的 Core](https://stackoverflow.com/questions/6121146/reading-ghc-core)（编译器的中间表示）以确定确定。

如果由于某种原因，这些函数没有被内联，你可以用[pragma](http://www.haskell.org/ghc/docs/7.0.3/html/users_guide/pragmas.html#inline-pragma)[标记它们`INLINE`](http://www.haskell.org/ghc/docs/7.0.3/html/users_guide/pragmas.html#inline-pragma)：

```
handleHelp :: IO ()
handleHelp = print "help"
{-# INLINE handleHelp #-}

handleOpt1 :: Option -> IO ()
handleOpt1 (Opt1 n f s) = print (n, f, s)
{-# INLINE handleOpt1 #-} 
```

您还可以依靠内联来避免解构以下参数`handleOption`：

```
handleOpt1 :: Option -> IO ()
handleOpt1 (Opt1 n f s) = print (n, f, s)
handleOpt1 _ = undefined 
```

这`undefined`只是为了消除有关非详尽模式匹配的警告。或者，您可以删除此行并`-fno-warn-incomplete-patterns`为此模块启用。

查看生成的 Core 我们可以看到 的`undefined`分支`handleOpt1`被淘汰了：

```
handleOpt2
  :: Option
     -> State# RealWorld
     -> (# State# RealWorld, () #)
handleOpt2 =
  \ (ds_dl7 :: Option)
    (eta_Xh :: State# RealWorld) ->
    case ds_dl7 of _ {
      Help -> ...  
      Opt1 n_aaq f_aar s_aas -> ...

main1
  :: State# RealWorld
     -> (# State# RealWorld, () #)
main1 =
  \ (eta_Xk :: State# RealWorld) ->
    handleOpt2 (Opt1 2 3.0 "") eta_Xk 
```

不过，我更喜欢原始版本，因为它排除了`handleOpt1`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-19T12:47:18.187

我喜欢 Ben 的回答，但或者，您可以引入更多类型。

数据 Opt1Params = Opt1Params Int Double String

数据选项 = 帮助 | 选项 1 选项 1 参数

handleOption Help = handleHelp handleOption (Opt1 params) = handleOpt1 params

handleOpt1 (Opt1Params nfs) = ...

# rspec - 是否有针对属性确切长度的 rspec 测试？

> ID：16113834
> 
> 赞同：18
> 
> 时间：2013-04-19T21:34:11.163
> 
> 标签：rspec, tdd, bdd

我正在尝试测试邮政编码属性的长度以确保其长度为 5 个字符。现在我正在测试以确保它不是空白的，然后太短了 4 个字符，太长了 6 个字符。

有没有办法测试它正好是 5 个字符？到目前为止，我在网上或 rspec 书中都没有找到任何东西。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-10-24T09:21:38.363

`have`RSpec 的最新主要版本中不再有匹配器。

从 RSpec 3.1 开始，正确的测试方法是：

`expect("Some string".length).to be(11)`

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-21T21:00:07.327

RSpec 允许这样做：

```
expect("this string").to have(5).characters 
```

你实际上可以写任何东西而不是“字符”，它只是语法糖。正在发生的一切是 RSpec 正在调用`#length`该主题。

**但是**，从您的问题来看，您实际上想要测试*验证*，在这种情况下，我会遵循@rossta 的建议。

更新：

从 RSpec 3 开始，这不再是 rspec-expectations 的一部分，而是作为单独的 gem 提供：[https ://github.com/rspec/rspec-collection_matchers](https://github.com/rspec/rspec-collection_matchers)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2020-05-15T18:20:59.520

使用`have_attributes`内置匹配器：

```
expect("90210").to have_attributes(size: 5) # passes
expect([1, 2, 3]).to have_attributes(size: 3) # passes 
```

您还[可以与其他匹配器组合它](https://relishapp.com/rspec/rspec-expectations/v/3-9/docs/composing-matchers)（此处为`be`）：

```
expect("abc").to have_attributes(size: (be > 2)) # passes
expect("abc").to have_attributes(size: (be > 2) & (be <= 4)) # passes 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-20T09:44:49.020

如果您在 ActiveRecord 模型上测试验证，我建议您尝试`shoulda-matchers`. 它提供了一堆对 Rails 有用的 RSpec 扩展。您可以为您的邮政编码属性编写一个简单的一行规范：

```
describe Address do
  it { should ensure_length_of(:zip_code).is_equal_to(5).with_message(/invalid/) }
end 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-08-01T14:54:31.467

集合匹配器（所有针对字符串、哈希和数组断言的匹配器）已被抽象为一个单独的 gem，[rspec-collection_matchers](https://github.com/rspec/rspec-collection_matchers)。

为了使用这些匹配器，请将其添加到您的`Gemfile`：

```
gem 'rspec-collection_matchers' 
```

或者`.gemspec`，如果您正在研究宝石：

```
spec.add_development_dependency 'rspec-collection_matchers' 
```

然后，将此添加到您的`spec_helper.rb`：

```
require 'rspec/collection_matchers' 
```

然后你就可以在你的规范中使用集合匹配器：

```
require spec_helper
describe 'array' do
    subject { [1,2,3] }
    it { is_expected.to have(3).items }
    it { is_expected.to_not have(2).items }
    it { is_expected.to_not have(4).items }

    it { is_expected.to have_exactly(3).items }
    it { is_expected.to_not have_exactly(2).items }
    it { is_expected.to_not have_exactly(4).items }

    it { is_expected.to have_at_least(2).items }
    it { is_expected.to have_at_most(4).items }

    # deliberate failures
    it { is_expected.to_not have(3).items }
    it { is_expected.to have(2).items }
    it { is_expected.to have(4).items }

    it { is_expected.to_not have_exactly(3).items }
    it { is_expected.to have_exactly(2).items }
    it { is_expected.to have_exactly(4).items }

    it { is_expected.to have_at_least(4).items }
    it { is_expected.to have_at_most(2).items }
end 
```

请注意，您可以使用`items`和`characters`互换，它们只是语法糖，`have`匹配器及其变体可用于数组、哈希和您的字符串。

# linux - SPI 数据传输 - 为什么 MOSI 在数据传输前进入零半周期？

> ID：16113835
> 
> 赞同：1
> 
> 时间：2013-04-19T21:34:17.913
> 
> 标签：linux, signals, hardware, data-transfer, spi

我有一个 SPI 设备的 SPI 信号输出。我想知道为什么数据输出（ ）在实际数据写入总线之前`MOSI`进入半个周期？`0`它是 SPI 设备的必备条件吗？如果不归零，数据传输会不会有问题？

我在linux上使用spidev32766.1（ubuntu 12.04 - kernel 3.7.1），处理器是imx233

先感谢您！！

![在此处输入图像描述](https://i.stack.imgur.com/LXtjF.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T09:04:06.033

从设备不关心数据线上发生的情况，除了其有效时钟边沿两侧的非常短的周期（通常<1ns）（此窗口由接口的建立和保持时间规范定义）。

我不知道为什么你的系统会发出那种“摆动”！

# java - java中的未检查和运行时异常

> ID：16113839
> 
> 赞同：3
> 
> 时间：2013-04-19T21:34:27.577
> 
> 标签：java, exception

在Java中，我们有检查异常和未检查异常。此外，我们还有运行时异常。我的问题是 - 所有运行时异常都是未经检查的异常和所有未经检查的异常都是运行时异常吗？意思是这两个词可以互换使用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T21:35:58.157

所有运行时异常（例如 NullPointerException）都是未经检查的异常。

由于错误（例如 StackOverflowError）也是未经检查的异常，因此并非所有未经检查的异常都是运行时异常。

[Java 语言规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-11.html)定义了一个未经检查的异常：“未经检查的异常类是运行时异常类和错误类。”

# python - 混合定义如何在枚举中工作？

> ID：16113840
> 
> 赞同：2
> 
> 时间：2013-04-19T21:34:30.250
> 
> 标签：python, c, ctypes

我正在尝试将 C 程序（通过动态库）与 Python 和 ctypes 模块一起使用。头文件中定义的几个常量对我来说很重要，但我不确定如何`enum`使用它们来设置它们的值。

显而易见的，我想我理解如下： `enum{THING1, THING2, THING3};`

`THING1=0, THING2=1, THING3=3`

但是，这个呢？ `enum{THING1=-1, THING2, THING3};`

结果是： `THING1=-1, THING2=1, THING3=2`？

这个如何？ `enum{THING1=1, THING2, THING3, THING4=-1}`?

我没有简单的方法来测试它，所以希望有人能解释`enum`在这种情况下的工作方式。我看过的 C 书籍似乎涵盖了第一种情况或明确定义每个值的情况，但没有涵盖这种混合情况。

提前谢谢了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T21:38:13.793

`enum`除非另有说明，否则第一个常数的值为 0。

除非明确指定，否则任何其他`enum`常量的值都比前一个常量的值大一。

所以

```
enum{THING1=-1, THING2, THING3}; 
```

集`THING2 = 0, THING3 = 1`，和

```
enum{THING1=1, THING2, THING3, THING4=-1} 
```

集`THING2 = 2, THING3 = 3`（并`THING4 = -1`明确给出）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T21:39:07.997

它们只是从以前的值增加。在你的例子中，

```
enum{THING1=-1, THING2, THING3}; 
```

相当于

```
enum{THING1=-1, THING2=0, THING3=1}; 
```

和这个

```
enum{THING1=1, THING2, THING3, THING4=-1}? 
```

相当于

```
enum{THING1=1, THING2=2, THING3=3, THING4=-1} 
```

# algorithm - BFS - WordChain/Wordladder

> ID：16113842
> 
> 赞同：1
> 
> 时间：2013-04-19T21:34:34.063
> 
> 标签：algorithm, search, graph, nodes, breadth-first-search

我需要一些帮助来解决一个问题。我想找到某个单词和某个给定 endword 之间的最长最短路径。所有单词的长度都是 4。我有一个图表，其中每个节点代表一个单词，并且每个在 1 个位置不同的单词都是连接的。

我有一个包含所有单词的列表。我有一个合适的函数可以找到最长的最短路径，但它从单词列表中的每个单词开始，然后从单词列表中的每个单词开始执行 BFS。

给定一些 endword，我如何找到到给定 endword 的最短路径最长的单词？

最长最短路径是指从所有单词到 endword 的最短路径以及其中最长的路径。

**我怎样才能只用一个 BFS 做到这一点？**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:53:01.263

在进行广度优先搜索时，您可以使用与源节点的距离（最短路径的长度）标记图中的每个节点。由于词梯是可逆的，因此您可以尝试从结束词运行广度优先搜索，并标记每个词与结束词的距离。当你这样做时，你可以跟踪你发现的离起始词尽可能远的词。完成后，您可以将该单词输出为距离起始单词尽可能远的单词。

希望这可以帮助！

# ios - 为什么使用 CGContextSetFillColorWithColor 后我的图像倒置

> ID：16113845
> 
> 赞同：2
> 
> 时间：2013-04-19T21:34:45.120
> 
> 标签：ios, objective-c, core-graphics, mkannotation

我正在尝试对 MKAnnotation 应用颜色填充。我发现了一些几乎可以工作的代码，但由于某种原因，填充的图像在应用填充后是颠倒的。

这是我在地图引脚上运行的当前代码。

```
CGRect rect = CGRectMake(0, 0, self.image.size.width, self.image.size.height);
    UIGraphicsBeginImageContext(self.image.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextClipToMask(context, rect, self.image.CGImage);
    CGContextSetFillColorWithColor(context, [[UIColor grayColor] CGColor]);
    CGContextFillRect(context, rect);
    CGContextRotateCTM(context, 90);
    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    UIImage *flippedImage = [UIImage imageWithCGImage:img.CGImage
                                                scale:1.0 orientation:self.image.imageOrientation];

    self.image = flippedImage; 
```

这是此代码运行后引脚的外观。

[http://d.pr/i/UaPU](http://d.pr/i/UaPU)

我在想，如果我将当前的图像方向应用到翻转图像上，那会奏效，但那不起作用。我还尝试`self.image = img;`完全设置和删除 flippedImage var，但结果仍然相同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T23:05:43.370

CGContext coordinate system is flipped vertically in regard to UIView coordinate system. Just flip it like this: CGContextTranslateCTM(ctx, 0, imageHeight);, CGContextScaleCTM(ctx, 1, -1);

# ios - iOS应用程序每隔一次启动就会崩溃，找不到错误

> ID：16113848
> 
> 赞同：81
> 
> 时间：2013-04-19T21:35:11.827
> 
> 标签：ios, xcode, crash, ios-simulator, sigabrt

我第一次启动该应用程序时，一切似乎都运行良好。我会按下停止按钮，做一些工作，当我再次启动它时，它似乎在加载任何东西之前就崩溃了。按停止，再次点击运行，它工作正常。直到我重复这个过程。

这是 xcode 使用“Thread 1:signal SIGABRT”突出显示错误的地方。显然这里没有什么用处。

```
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([PokerAppDelegate class]));
    }
} 
```

除了 (lldb) 之外，调试控制台什么也没有显示（所以我想它正在停止，此时没有崩溃）所以，当我执行 a 时，`BT`这就是我得到的：

```
(lldb) bt
* thread #1: tid = 0x1c03, 0x9a258a6a libsystem_kernel.dylib`__pthread_kill + 10, stop reason = signal SIGABRT
    frame #0: 0x9a258a6a libsystem_kernel.dylib`__pthread_kill + 10
    frame #1: 0x99ea1b2f libsystem_c.dylib`pthread_kill + 101
    frame #2: 0x04a7057b libsystem_sim_c.dylib`abort + 140
    frame #3: 0x01dc0b4e GraphicsServices`GSRegisterPurpleNamedPort + 348
    frame #4: 0x01dc069f GraphicsServices`_GSEventInitialize + 123
    frame #5: 0x01dc0c1f GraphicsServices`GSEventInitialize + 36
    frame #6: 0x000163f9 UIKit`UIApplicationMain + 600
    frame #7: 0x00001d0d Guitar Chord Poker HD`main(argc=1, argv=0xbffff32c) + 141 at main.m:16
    frame #8: 0x00001c35 Guitar Chord Poker HD`start + 53
(lldb) 
```

这是我到目前为止所做的：

*   执行了“清洁”
*   我已经重置了模拟器并重置了我的电脑
*   我已经注释掉了视图控制器中的所有代码，仍然崩溃
*   我已经注释掉了应用程序委托中的所有代码，仍然崩溃
*   但是....我已经在 Xcode 之外的设备上运行了该应用程序，它似乎工作得非常好。
*   （编辑）我已经删除/重新安装了 xcode，以及来自各种缓存文件夹的所有内容（模拟器、文档）（这会阻止 xcode 在新下载后自动重新安装旧的）。尽管如此，仍然找不到命令行工具的保存位置。仍然崩溃。

尽管如此，应用程序仍然每秒/其他启动时崩溃。

问题是在最近的 Xcode 更新之前我没有任何问题。会不会是 Xcode 的错误？

（编辑）我也在运行最新的 OSX 开发者版本。会不会有干扰？

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2013-06-05T21:25:50.213

似乎是[OS X 10.8.4 和 LLDB 的组合](http://www.tuaw.com/2013/06/05/devjuice-10-8-4-and-the-ios-simulator/)。正如 kenster 所说，切换到 GDB 可以解决问题。

**编辑：**
这是由调试服务器中的竞争条件引起的（我听说）。

如果您想继续使用 LLDB，这里有一个修复方法：当应用程序已经在模拟器中运行时，不要单击运行，而是在 Xcode 中将其终止 (⌘-.)，说“我爱 Xcode”5 次，然后再次运行 (⌘- R)。它不会崩溃，我测试过。

* * *

**在[Xcode 4.6.3中](https://itunes.apple.com/app/xcode/id497799835?mt=12)**修复。****

 *** * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-06-05T13:30:18.287

我也有这个问题。看看这个帖子。[Xcode 4.6.2 应用程序在每秒运行一次时崩溃](https://stackoverflow.com/questions/16113036/xcode-4-6-2-crash-when-run-of-a-second-time)

基本上将您的调试器从 LLDB 更改为 GDB。我不敢相信这是因为 LLDB 有问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-09-30T12:00:31.503

切换到 GDB 或重新启动设备/主机并不能解决我的环境中的问题。

但是，将相关 XCode 方案中的 Run 目标修改为不再自动启动，而是改为**“等待*HelloWorld* .app 启动”**。

唯一的缺点是这意味着在设备上手动启动应用程序。然后调试器将被连接。**

# mysql - 用 min max 分组，但我可以这样做吗？

> ID：16113849
> 
> 赞同：-1
> 
> 时间：2013-04-19T21:35:12.170
> 
> 标签：mysql

我创建了一个很好的查询（感谢 stackoverflow 上的所有提示）。表结构和数据：

```
CREATE TABLE IF NOT EXISTS `transactions` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `actid` int(11) NOT NULL,
  `memberid` int(11) NOT NULL,
  `description` varchar(30) NOT NULL,
  `amount` decimal(10,2) NOT NULL,
  `date` datetime NOT NULL,
  `type` varchar(3) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=38 ; 
```

数据：

```
INSERT INTO `transactions` (`id`, `actid`, `memberid`, `description`,
 `amount`, `date`, `type`) VALUES
(1, 601, 1, '', '4.00', '2008-10-31 00:00:00', 'REG'),
(2, 603, 1, '', '5.00', '2010-10-26 00:00:00', 'REG'),
(3, 604, 1, '', '8.00', '2011-10-21 00:00:00', 'REG'),
(4, 1040, 1, '3/5', '2.00', '2009-02-18 00:00:00', 'REG'),
(5, 1042, 1, '8/19', '2.00', '2010-08-19 00:00:00', 'REG'),
(6, 1243, 1, '', '3.00', '2008-01-23 00:00:00', 'REG'),
(7, 1301, 1, '', '1.00', '2000-10-11 00:00:00', 'REG'),
(8, 1306, 1, '', '1.00', '1996-05-17 00:00:00', 'REG'),
(9, 1379, 1, '', '2.00', '2007-11-01 00:00:00', 'REG'),
(10, 1380, 1, '', '2.00', '2008-12-09 00:00:00', 'REG'),
(11, 1381, 1, '', '2.00', '2009-10-20 00:00:00', 'REG'),
(12, 1382, 1, '', '2.00', '2010-10-21 00:00:00', 'REG'),
(13, 1383, 1, '', '2.00', '2011-10-20 00:00:00', 'REG'),
(14, 1384, 1, 'tkt #56', '2.00', '2012-10-12 00:00:00', 'REG'),
(15, 1396, 1, '', '2.00', '2006-10-12 00:00:00', 'REG'),
(16, 1491, 1, '', '20.00', '2007-01-03 00:00:00', 'REG'),
(17, 1494, 1, '', '40.00', '2006-01-09 00:00:00', 'REG'),
(18, 1498, 1, 'GUEST', '32.00', '2004-01-29 00:00:00', 'REG'),
(19, 601, 1, 'cash', '4.00', '2007-11-01 00:00:00', 'CHK'),
(20, 603, 1, 'cash', '5.00', '2009-10-26 00:00:00', 'CHK'),
(21, 604, 1, 'cash', '8.00', '2010-10-21 00:00:00', 'CHK'),
(22, 1040, 1, '2/19', '2.00', '2009-02-18 00:00:00', 'CHK'),
(23, 1040, 1, 'cash 3/5', '2.00', '2009-03-05 00:00:00', 'CHK'),
(24, 1042, 1, 'cash', '2.00', '2010-08-19 00:00:00', 'CHK'),
(25, 1243, 1, 'cash', '3.00', '2008-01-23 00:00:00', 'CHK'),
(26, 1301, 1, 'cash', '1.00', '2000-10-11 00:00:00', 'CHK'),
(27, 1306, 1, 'CASH', '1.00', '1996-05-17 00:00:00', 'CHK'),
(28, 1379, 1, 'cash', '2.00', '2007-11-01 00:00:00', 'CHK'),
(29, 1380, 1, 'cash', '2.00', '2008-12-09 00:00:00', 'CHK'),
(30, 1381, 1, 'cash', '2.00', '2009-10-20 00:00:00', 'CHK'),
(31, 1382, 1, 'cash', '2.00', '2010-10-21 00:00:00', 'CHK'),
(32, 1383, 1, 'cash', '2.00', '2011-10-20 00:00:00', 'CHK'),
(33, 1384, 1, 'cash tkt# 56', '2.00', '2012-10-12 00:00:00', 'CHK'),
(34, 1396, 1, '325', '2.00', '2006-10-12 00:00:00', 'CHK'),
(35, 1491, 1, '', '20.00', '2007-01-03 00:00:00', 'CHK'),
(36, 1494, 1, '252', '40.00', '2006-01-09 00:00:00', 'CHK'),
(37, 1498, 1, '9223-143', '32.00', '2004-01-29 00:00:00', 'CHK'); 
```

询问：

```
SELECT actid, SUM( IF( TYPE =  'REG', amount, 0 ) ) AS  `charge`, 
SUM( IF( TYPE =  'CHK', amount, 0 ) ) AS  `payment`, 
min(date) as firstdate, max(date) as lastdate
FROM transactions
WHERE memberid =1
GROUP BY actid
ORDER BY firstdate 
```

结果：

```
actid   charge  payment firstdate           lastdate
1306    1.00    1.00    1996-05-17 00:00:00 1996-05-17 00:00:00
1301    1.00    1.00    2000-10-11 00:00:00 2000-10-11 00:00:00
1498    32.00   32.00   2004-01-29 00:00:00 2004-01-29 00:00:00
1494    40.00   40.00   2006-01-09 00:00:00 2006-01-09 00:00:00
1396    2.00    2.00    2006-10-12 00:00:00 2006-10-12 00:00:00
1491    20.00   20.00   2007-01-03 00:00:00 2007-01-03 00:00:00
601     4.00    4.00    2007-11-01 00:00:00 2008-10-31 00:00:00
1379    2.00    2.00    2007-11-01 00:00:00 2007-11-01 00:00:00
1243    3.00    3.00    2008-01-23 00:00:00 2008-01-23 00:00:00
1380    2.00    2.00    2008-12-09 00:00:00 2008-12-09 00:00:00
1040    2.00    4.00    2009-02-18 00:00:00 2009-03-05 00:00:00
1381    2.00    2.00    2009-10-20 00:00:00 2009-10-20 00:00:00
603     5.00    5.00    2009-10-26 00:00:00 2010-10-26 00:00:00
1042    2.00    2.00    2010-08-19 00:00:00 2010-08-19 00:00:00
1382    2.00    2.00    2010-10-21 00:00:00 2010-10-21 00:00:00
604     8.00    8.00    2010-10-21 00:00:00 2011-10-21 00:00:00
1383    2.00    2.00    2011-10-20 00:00:00 2011-10-20 00:00:00
1384    2.00    2.00    2012-10-12 00:00:00 2012-10-12 00:00:00 
```

这很好用，但是我想在查询中添加 REG 类型事务的描述，但我似乎无法让它工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:38:50.603

我认为你需要添加你的`description`into `select`，然后添加`description`到 group by 子句

```
SELECT actid, description, SUM( IF( TYPE = 'REG', amount, 0 ) ) AS charge, SUM( IF( TYPE = 'CHK', amount, 0 ) ) AS payment, min(date) as firstdate, max(date) as lastdate 
FROM transactions 
WHERE memberid =1 
GROUP BY actid, description 
ORDER BY firstdate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:39:32.107

```
 SELECT actid, 
          SUM( IF( TYPE = 'REG', amount, 0 ) ) AS charge, 
          SUM( IF( TYPE = 'CHK', amount, 0 ) ) AS payment, 
          min(date) as firstdate, 
          max(date) as lastdate,
          description 
   FROM transactions 
   WHERE memberid =1 
   GROUP BY actid,description ORDER BY firstdate 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:50:20.610

我不知道为什么你不能在查询中添加描述但是它可以毫无困难地完成。

```
 SELECT actid ,  SUM( IF( TYPE =  'REG', amount, 0 ) ) AS  `charge`, 
 SUM( IF( TYPE =  'CHK', amount, 0 ) ) AS  `payment`, 
 min(date) as firstdate, max(date) as lastdate , `description`
 FROM transactions
 WHERE memberid =1
 GROUP BY actid
 ORDER BY firstdate 
```

[**演示**](http://sqlfiddle.com/#!2/da7d2/9)

# c# - 如果 Int32 只是 int 的别名，那么 Int32 类如何使用 int？

> ID：16113850
> 
> 赞同：56
> 
> 时间：2013-04-19T21:35:13.217
> 
> 标签：c#, compiler-construction, internals

一直在浏览[.NET Framework Reference Source](https://referencesource.microsoft.com/#mscorlib/system/int32.cs,225942ed7b7a3252)的 .NET 源代码，只是为了好玩。并发现了一些我不明白的东西。

有一个*Int32.cs*`Int32`文件，其中包含用于类型的 C# 代码。不知何故，这对我来说似乎很奇怪。C# 编译器如何为`Int32`类型编译代码？

```
public struct Int32: IComparable, IFormattable, IConvertible {
    internal int m_value;

    // ... 
} 
```

但这在 C# 中不是非法的吗？如果`int`只是 的*别名* `Int32`，则它应该无法编译并出现[错误 CS0523](http://msdn.microsoft.com/library/7b625z82.aspx)：

> “struct1”类型的结构成员“struct2 field”导致结构布局中的循环。

编译器中有什么魔力，还是我完全偏离了轨道？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-22T19:31:12.380

> 这在 C# 中不是非法的吗？如果“int”只是“Int32”的别名，它应该无法编译并出现错误 CS0523。编译器中有什么魔法吗？

是的; 该错误在编译器中被故意抑制。如果所讨论的类型是内置类型，则完全跳过循环检查器。

通常这种事情是非法的：

```
struct S { S s; int i; } 
```

在这种情况下，S 的大小是未定义的，因为无论 S 的大小是多少，它都必须等于自身加上 ​​int 的大小。没有这样的尺寸。

```
struct S { S s; } 
```

在这种情况下，我们没有任何信息可以用来推断 S 的大小。

```
struct Int32 { Int32 i; } 
```

但在这种情况下，编译器提前知道这`System.Int32`是四个字节，因为它是一种非常特殊的类型。

顺便说一句，C# 编译器（以及就此而言，CLR）如何确定一组结构类型何时为循环的细节非常有趣。我会尝试在某个时候写一篇关于此的博客文章。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-04-19T21:56:25.057

`int`是 的别名`Int32`，但`Int32`您正在查看的结构只是元数据，它不是真实对象。该`int m_value`声明可能只是为了给结构适当的大小，因为它实际上从未在其他任何地方引用（这就是允许它存在的原因）。

所以，换句话说，编译器可以避免这个问题。[MSDN 论坛中](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/6d183671-2f42-4803-ac08-334d19708bc1/)有关于该主题的讨论。

从讨论中，以下是所选答案的引用，有助于尝试确定声明是如何可能的：

> 虽然该类型确实包含一个整数 m_value 字段 - 该字段从未被引用。在每个支持方法（CompareTo、ToString 等）中，都使用“this”代替。m_value 字段的存在可能只是为了强制结构具有适当的大小。
> 
> 我怀疑当编译器看到“int”时，它会将其转换为“对 mscorlib.dll 中 System.Int32 的引用，稍后解决”，并且由于它正在构建 mscorlib.dll，因此它最终会得到一个循环引用（但不会导致问题，因为 m_value 从未使用过）。如果这个假设是正确的，那么这个技巧只适用于特殊的编译器类型。

进一步阅读，可以确定该结构只是元数据，而不是真实对象，因此它不受相同的递归定义约束的约束。

# python - Celery 在我的 Heroku 上不起作用

> ID：16113851
> 
> 赞同：5
> 
> 时间：2013-04-19T21:35:15.183
> 
> 标签：python, heroku, celery, amqp

我到底做错了什么？

我最近发现了一个很棒的 django 模板，叫做[django-skel](https://github.com/rdegges/django-skel)。我用它开始了一个项目，因为它使得在 django 中使用 heroku 变得非常容易。一切都很顺利，直到我试图让芹菜工作。无论我尝试什么，我都无法让我的任务运行。所以我开始了一个新的简单的应用程序，只是想看看我是否可以让它在没有任何其他疯狂阻止事情的情况下运行。

这是我[的准系统应用程序。](https://github.com/cswenor/herokutest)我在heroku上启动并运行了这个。Django 管理员正在工作，我已经同步并迁移了我的数据库。我正在为我的 RabbitMQ 使用 CloudAMQP Little Lemur。我看到请求在 RabbitMQ 接口中排队，没有任何反应。我如何将任务排队是在 shell 中手动运行的：

```
from herokutest.apps.otgcelery.tasks import add
result = add.delay(2,2) 
```

我确保我已经运行了所有 3 台测功机，但仍然一无所获。

我也让它在本地工作。

我确信有很多问题，我愿意提出。请问一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T11:04:13.813

谢谢大家的帮助。有几件事我最终做错了。首先是我错误地导入了任务。我所要做的就是：

```
from apps.otgcelery.tasks import add
result = add.delay(2,2) 
```

Celery 对导入任务的方式非常挑剔。第二个问题是 CloudAMQP 免费插件不能与 django-skel 一起使用。它们将您的连接数限制为三个，并且每个线程如何启动它以非常快的速度使用这些连接，而您的任务刚刚开始无法连接。所以我用几种不同的方式解决了这个问题。我尝试了另一个 BigWigs RabbitMQ，效果很好。但是，由于它们仍处于 Beta 阶段，我决定尝试 Redis。这也很有效，而且我的任务正在尽可能快地启动。

再次感谢大家的帮助。

# xslt - 组合相似的行 XML

> ID：16113854
> 
> 赞同：-1
> 
> 时间：2013-04-19T21:35:20.873
> 
> 标签：xslt, sum, rows

我有一个具有重复唯一 ID 的 XML 记录，但想将所有相似的 ID 合并到 1 条记录中，连接参考字段并总结金额字段。

XML 如下所示：

```
<root>
<row>
    <F01>123456</F01>
    <F02>ABC Company</F02>
    <F03>0</F03>
    <F04>47582736</F04>
    <F05>151.12</F05>
</row>
<row>
    <F01>123456</F01>
    <F02>ABC Company</F02>
    <F03>0</F03>
    <F04>47643792</F04>
    <F05>191.09</F05>
</row>
<row>
    <F01>123456</F01>
    <F02>ABC Company</F02>
    <F03>0</F03>
    <F04>47643793</F04>
    <F05>95.32</F05>
</row>
<row>
    <F01>223344</F01>
    <F02>DK Corp</F02>
    <F03>0</F03>
    <F04>36819319</F04>
    <F05>138.87</F05>
</row>
<row>
    <F01>223344</F01>
    <F02>DK Corp</F02>
    <F03>0</F03>
    <F04>36827362</F04>
    <F05>9.98</F05>
</row>
<row>
    <F01>223344</F01>
    <F02>DK Corp</F02>
    <F03>0</F03>
    <F04>36834497</F04>
    <F05>79.87</F05>
</row>
<row>
    <F01>113964</F01>
    <F02>Direct Company</F02>
    <F03>0</F03>
    <F04>1771929</F04>
    <F05>400.07</F05>
</row>
<row>
    <F01>113964</F01>
    <F02>Direct Company</F02>
    <F03>0</F03>
    <F04>1766940</F04>
    <F05>111.52</F05>
</row>
<row>
    <F01>113964</F01>
    <F02>Direct Company</F02>
    <F03>0</F03>
    <F04>1810269</F04>
    <F05>112.48</F05>
</row>
<row>
    <F01>113964</F01>
    <F02>Direct Company</F02>
    <F03>0</F03>
    <F04>1618234</F04>
    <F05>60.76</F05>
</row>
<row>
    <F01>113964</F01>
    <F02>Direct Company</F02>
    <F03>0</F03>
    <F04>1771923</F04>
    <F05>2829.19</F05>
</row> 
```

我想让它看起来像这样：

```
<root>
<row>
    <F01>123456</F01>
    <F02>ABC Company</F02>
    <F03>437.53</F03>
    <F04>47582736, 47643792, 47643793</F04>
    <F05>151.12</F05>
</row>
<row>
    <F01>223344</F01>
    <F02>DK Corp</F02>
    <F03>228.72</F03>
    <F04>36819319, 36827362, 36834497</F04>
    <F05>138.87</F05>
</row>
<row>
    <F01>113964</F01>
    <F02>Direct Company</F02>
    <F03>3514.02</F03>
    <F04>1771929, 1766940, 1810269, 1618234, 1771923</F04>
    <F05>400.07</F05>
</row> 
```

我想我可能知道如何连接 F04，但不知道如何总结 F05 并将该值放入 F03。F01 是唯一的 ID，应该确定要保存的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T23:16:08.130

**当这个 XSLT：**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
  <xsl:output omit-xml-declaration="no" indent="yes"/>
  <xsl:strip-space elements="*"/>

  <xsl:key name="kRowByF02" match="row" use="F02"/>

  <xsl:template match="node()|@*">
    <xsl:copy>
      <xsl:apply-templates select="node()|@*"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="/*">
    <root>
      <xsl:apply-templates
        select="row[generate-id() = generate-id(key('kRowByF02', F02)[1])]"/>
    </root>
  </xsl:template>

  <xsl:template match="F03">
     <F03>
       <xsl:value-of
         select="sum(key('kRowByF02', preceding-sibling::F02)/F05)" />
     </F03>
  </xsl:template>

  <xsl:template match="F04">
    <F04>
      <xsl:apply-templates
        select="key('kRowByF02', preceding-sibling::F02)/F04/text()"/>
    </F04>
  </xsl:template>

  <xsl:template match="F04/text()">
    <xsl:if test="not(position() = 1)">, </xsl:if>
    <xsl:value-of select="."/>
  </xsl:template>
</xsl:stylesheet> 
```

**...应用于提供的 XML：**

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
  <row>
    <F01>123456</F01>
    <F02>ABC Company</F02>
    <F03>0</F03>
    <F04>47582736</F04>
    <F05>151.12</F05>
  </row>
  <row>
    <F01>123456</F01>
    <F02>ABC Company</F02>
    <F03>0</F03>
    <F04>47643792</F04>
    <F05>191.09</F05>
  </row>
  <row>
    <F01>123456</F01>
    <F02>ABC Company</F02>
    <F03>0</F03>
    <F04>47643793</F04>
    <F05>95.32</F05>
  </row>
  <row>
    <F01>223344</F01>
    <F02>DK Corp</F02>
    <F03>0</F03>
    <F04>36819319</F04>
    <F05>138.87</F05>
  </row>
  <row>
    <F01>223344</F01>
    <F02>DK Corp</F02>
    <F03>0</F03>
    <F04>36827362</F04>
    <F05>9.98</F05>
  </row>
  <row>
    <F01>223344</F01>
    <F02>DK Corp</F02>
    <F03>0</F03>
    <F04>36834497</F04>
    <F05>79.87</F05>
  </row>
  <row>
    <F01>113964</F01>
    <F02>Direct Company</F02>
    <F03>0</F03>
    <F04>1771929</F04>
    <F05>400.07</F05>
  </row>
  <row>
    <F01>113964</F01>
    <F02>Direct Company</F02>
    <F03>0</F03>
    <F04>1766940</F04>
    <F05>111.52</F05>
  </row>
  <row>
    <F01>113964</F01>
    <F02>Direct Company</F02>
    <F03>0</F03>
    <F04>1810269</F04>
    <F05>112.48</F05>
  </row>
  <row>
    <F01>113964</F01>
    <F02>Direct Company</F02>
    <F03>0</F03>
    <F04>1618234</F04>
    <F05>60.76</F05>
  </row>
  <row>
    <F01>113964</F01>
    <F02>Direct Company</F02>
    <F03>0</F03>
    <F04>1771923</F04>
    <F05>2829.19</F05>
  </row>
</root> 
```

**...产生了想要的结果：**

```
<root>
  <row>
    <F01>123456</F01>
    <F02>ABC Company</F02>
    <F03>437.53</F03>
    <F04>47582736, 47643792, 47643793</F04>
    <F05>151.12</F05>
  </row>
  <row>
    <F01>223344</F01>
    <F02>DK Corp</F02>
    <F03>228.72</F03>
    <F04>36819319, 36827362, 36834497</F04>
    <F05>138.87</F05>
  </row>
  <row>
    <F01>113964</F01>
    <F02>Direct Company</F02>
    <F03>3514.02</F03>
    <F04>1771929, 1766940, 1810269, 1618234, 1771923</F04>
    <F05>400.07</F05>
  </row>
</root> 
```

这是一个经典的分组问题，在 XSLT 1.0 的情况下，使用[Muenchian Grouping](http://www.jenitennison.com/xslt/grouping/muenchian.html)。

# vba - 在 MS Word 中更新 MACROBUTTON 中显示的文本

> ID：16113855
> 
> 赞同：1
> 
> 时间：2013-04-19T21:35:23.160
> 
> 标签：vba, automation, ms-word

我在 VBA 中使用宏按钮来拥有一个字段，其值是通过访问其他系统来计算的，同时，我希望能够双击该字段以指定一些用于从该其他系统检索数据的设置.

整个宏工作正常，但我不知道如何更改宏按钮上的标签。

通常宏按钮看起来像这样 { MACROBUTTON macro_name label {some_arg}{some_arg2} }

我尝试访问 selection.fields(1).code.text 甚至做正则表达式来用其他东西替换“标签”，但这不起作用，即要么我丢失了参数，要么我搞砸了标签。

关于这个问题的任何建议，或者我可以用来实现这一目标的其他类型字段的建议？我不介意使用 DOCVARIABLE 但这些不能响应点击和携带参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T05:14:09.887

你应该能够做这样的事情：

```
Sub Testit1()
    Dim strText As String
    Dim strLabel As String
    Dim strNewLabel As String

    strLabel = "Chew"
    strNewLabel = "Devour"

    ' Replace the field code values in the first field to change the label
    strText = ActiveDocument.Fields(1).Code.Text
    ActiveDocument.Fields(1).Code.Text = Replace(strText, strLabel, strNewLabel)
End Sub 
```

这基本上会在要更改的宏按钮字段的字段代码内进行搜索和替换。 `ActiveDocument.Fields(1).Code.Text`是我认为你正在寻找的部分。

# regex - 正则表达式匹配标记与参数

> ID：16113858
> 
> 赞同：0
> 
> 时间：2013-04-19T21:36:01.607
> 
> 标签：regex, arguments, token, braces

令牌可以是这样的`{num}`或`{num:2}`（2 是 arg）

我想实现这样的匹配：

```
// no args
[0] = num

// args (anything after the colon and before the closing brace as one match is fine)
[0] = num
[1] = 2 
```

我设法匹配大括号中的任何东西，但我的正则表达式太菜鸟，无法得到比这更复杂的东西！谢谢。

仅供参考，我正在使用 javascript 并`\{(.*?)\}`匹配其中的所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:38:42.010

你可以这样做：

```
\{(.*?)(?::(.*?))?\} 
```

和一个测试：

```
> '{foo:bar}'.match(/\{(.*?)(?::(.*?))?\}/)
["{foo:bar}", "foo", "bar"]
> '{foo}'.match(/\{(.*?)(?::(.*?))?\}/)
["{foo}", "foo", undefined] 
```

*   `(.*?)`非贪婪地匹配第一组。
*   `(?:...)`是非捕获组。它就像一个普通的捕获组，但它不会被捕获。
*   `:(.*?)`捕获冒号后面的东西。
*   `?`使最后一个组（包含冒号和第二个捕获组）可选。

# javascript - xhr() 调用共享点 Web 部件

> ID：16113860
> 
> 赞同：0
> 
> 时间：2013-04-19T21:36:15.737
> 
> 标签：javascript, sharepoint

我正在尝试使用 WinJS.xhr() 在 SharePoint 中获取 Web 部件的输出。

我正在使用 Fiddler 剖析请求，我可以看到请求有 4 个操作，第三个返回大部分 HTML/标记，然后第四个返回从 SharePoint 基础数据源检索的数据，然后在某个地方将它合并在一起。但是，当我查看页面的源代码时，我看不到标记中第四次调用的数据——这意味着 xhr() 调用不会包含我需要的数据。

有没有人有获得 Web 部件控件的完整输出的经验？目标是从 Web 部件获取数据并将其显示在 Windows RT 应用程序中。

# kdb - 如何检查 kdb 脚本中的命令行参数？

> ID：16113863
> 
> 赞同：2
> 
> 时间：2013-04-19T21:36:52.427
> 
> 标签：kdb

我想检查 Q 脚本中命令参数的数量，如果 .zx 与预期的参数数量不匹配，则返回错误消息。到目前为止，我想出了这条线：

```
if[count .z.x < 4; '`BadUsage]
"Arguments OK" 
```

我从来没有通过 if 语句，它总是返回 `BadUsage，无论我使用多少参数。

如何检查正确数量的参数、打印错误消息并退出脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:41:31.870

这是因为语句是从右到左评估的。所以 .zx < 4 首先被评估，然后是该结果的计数。

```
q)count .z.x < 4
0
q)4 > count .z.x
1b 
```

# c - 使用 cygwin 在 Windows 上编译 libjpeg？

> ID：16113867
> 
> 赞同：2
> 
> 时间：2013-04-19T21:37:00.160
> 
> 标签：c, windows, cygwin, libjpeg

在 Windows 机器上编译 libjpeg 的最佳方法是什么？我应该使用 Microsoft Visual Studio 还是可以使用 Cygwin 之类的其他东西？

注意：当我使用 Cygwin 并复制`makefile.vc`到`Makefile`，`jconfig.vc`到`jconfig.h`并运行此示例代码时：[http ://www.cim.mcgill.ca/~junaed/code/libjpeg_sample.tar.gz](http://www.cim.mcgill.ca/~junaed/code/libjpeg_sample.tar.gz)

那么编译器会产生以下错误：

```
$ gcc main.c
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0x5a): undefined reference to `jpeg_std_error'
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0x7e): undefined reference to `jpeg_CreateDecompress'
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0x93): undefined reference to `jpeg_stdio_src'
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0xa9): undefined reference to `jpeg_read_header'
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0xb7): undefined reference to `jpeg_start_decompress'
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0x11b): undefined reference to `jpeg_read_scanlines'
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0x178): undefined reference to `jpeg_finish_decompress'
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0x186): undefined reference to `jpeg_destroy_decompress'
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0x1f6): undefined reference to `jpeg_std_error'
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0x21a): undefined reference to `jpeg_CreateCompress'
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0x22f): undefined reference to `jpeg_stdio_dest'
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0x269): undefined reference to `jpeg_set_defaults'
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0x27f): undefined reference to `jpeg_start_compress'
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0x2c7): undefined reference to `jpeg_write_scanlines'
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0x2e5): undefined reference to `jpeg_finish_compress'
C:\cygwin\tmp\ccwChyeY.o:main.c:(.text+0x2f3): undefined reference to `jpeg_destroy_compress'
collect2.exe: error: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T04:50:53.507

好吧，如果你只是想要`.dll`它已经编译好了。

[`https://cygwin.com/cgi-bin2/package-grep.cgi?grep=libjpeg&arch=x86_64`](https://cygwin.com/cgi-bin2/package-grep.cgi?grep=libjpeg&arch=x86_64)

# vba - 使用 VBA 将在线图片插入 Excel

> ID：16113876
> 
> 赞同：6
> 
> 时间：2013-04-19T21:37:29.520
> 
> 标签：vba, excel, spreadsheet

我目前正在做一个项目，需要通过 URL 用图片填充单元格。所有 URL 都在一列中，我想将图像加载到相邻列中。我不是 VBA 专家，但我发现了一些有效的代码，但由于某种原因，我收到一个错误（通常是 5 张图片），上面写着：

运行时错误“1004”：无法获取图片类的插入属性

同样，我使用的是一个 URL 位于一列的系统，即：

xxxx.com/xxxx1.jpg

xxxx.com/xxxx2.jpg

xxxx.com/xxxx3.jpg

xxxx.com/xxxx4.jpg

通过一些搜索，我发现它可以链接到我的 Excel 版本（使用 2010），尽管我不完全确定。

这是我正在使用的当前代码：

```
Sub URLPictureInsert()
Dim cell, shp As Shape, target As Range
    Set Rng = ActiveSheet.Range("a5:a50") ' range with URLs
    For Each cell In Rng
       filenam = cell
       ActiveSheet.Pictures.Insert(filenam).Select

  Set shp = Selection.ShapeRange.Item(1)
   With shp
      .LockAspectRatio = msoTrue
      .Width = 100
      .Height = 100
      .Cut
   End With
   Cells(cell.Row, cell.Column + 1).PasteSpecial
Next

End Sub 
```

任何帮助将非常感激！

原始代码来源：[http ://www.mrexcel.com/forum/excel-questions/659968-insert-image-into-cell-url-macro.html](http://www.mrexcel.com/forum/excel-questions/659968-insert-image-into-cell-url-macro.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-20T03:00:21.237

这是我大约一个月前发布的几乎相同的解决方案：

[Excel VBA从列中的图像名称插入图像](https://stackoverflow.com/questions/15588995/excel-vba-insert-images-from-image-name-in-column/15589423#15589423)

```
Sub InsertPic()
Dim pic As String 'file path of pic
Dim myPicture As Picture 'embedded pic
Dim rng As Range 'range over which we will iterate
Dim cl As Range 'iterator

Set rng = Range("B1:B7")  '<~~ Modify this range as needed. Assumes image link URL in column A.
For Each cl In rng
pic = cl.Offset(0, -1)

    Set myPicture = ActiveSheet.Pictures.Insert(pic)
    '
    'you can play with this to manipulate the size & position of the picture.
    ' currently this shrinks the picture to fit inside the cell.
    With myPicture
        .ShapeRange.LockAspectRatio = msoFalse
        .Width = cl.Width
        .Height = cl.Height
        .Top = Rows(cl.Row).Top
        .Left = Columns(cl.Column).Left
    End With
    '

 Next

 End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-08T22:05:07.903

我知道这个帖子已经有 5 年历史了，但我只想说它真的对我的项目有帮助。我正在使用 VBA 从订单数据库中引入数据。当我从这些结果中单击订单时，它会显示有关订单的更多详细信息，包括图像 URL。我遇到的问题是上面的代码旨在添加图像来代替 URL。我想用新查询中的图像替换上一个查询中的图像。经过一些调整后，我让它工作了，但它只是在旧图像之上放置了一个新图像。随着时间的推移，我的 Excel 文件可能会变得非常大，所以这是我的解决方案。我现在唯一的问题是它删除了我放在工作表上的公司徽标。可能有一种方法可以更有选择性，

```
Sub InsertPic()

Dim productImageUrl As String
Dim productImage As Picture     'Declare image picture object
Dim productImageUrlRng As Range 'Declare range object to contain image URL
Dim productImageRng As Range    'Location image will be placed
'Delete any existing pictures:

Set productImageRng = ActiveSheet.Range("J1:J15") 'Where I want to put the image
Set productImageUrlRng = Range("BA2")  'Cell containing image URL
productImageUrl = productImageUrlRng

productImageRng.Select
'productImageRng.Delete --Does not delete pictures in range
ActiveSheet.Pictures.Delete     'Delete existing images
Set productImage = ActiveSheet.Pictures.Insert(productImageUrl)

With productImage
    .ShapeRange.LockAspectRatio = msoTrue
    '.Width = productImageRng.Width
    .Height = productImageRng.Height
    ' .Top = Rows(cl.Row).Top
    ' .Left = Columns(cl.Column).Left
End With
End Sub 
```

# mysql - 在 mysql 触发器中..如何使用插入和更新查询

> ID：16113889
> 
> 赞同：0
> 
> 时间：2013-04-19T21:38:29.200
> 
> 标签：mysql, sql, triggers, insert-update

我有一个 product_price_log 表。我在 product_price 表中更新了新价格。

我正在使用触发器：

```
drop trigger if exists product_update; 

delimiter $$
CREATE TRIGGER product_update
BEFORE update ON w3xab_virtuemart_product_prices
FOR EACH ROW
BEGIN
DECLARE virtuemart_product_id int;
DECLARE old_product_price decimal(15,5) default 0;
DECLARE new_product_price decimal(15,5) default 0;
DECLARE price_update_date DATE;

IF (new.product_price <> old.product_price)
THEN 

INSERT into product_price_log
(virtuemart_product_id,old_product_price, new_product_price,  price_update_date)
VALUES (new.virtuemart_product_id, old.product_price, new.product_price, CURDATE())
ON DUPLICATE KEY UPDATE 
old_product_price = VALUES(old.product_price),
new_product_price = VALUES(new.product_price),
price_update_date = CURDATE();

END IF;
    END$$
    delimiter ; 
```

现在没有错误..但是当我尝试更新价格时更新不起作用...只有插入工作

我设置了**measuremart_product_id**是主要的关键我不知道发生了什么我完全卡在这一点上......不明白为什么不更新..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:16:38.433

我认为您不能这样做，`VALUES(CURDATE())`因为它实际上不是列名。试一试`price_update_date=CURDATE()`

# angularjs - 使用来自另一个模块的子控制器

> ID：16113890
> 
> 赞同：16
> 
> 时间：2013-04-19T21:38:29.467
> 
> 标签：angularjs, angularjs-controller

我已经定义了一个模块，并使用 ng-app 指令将其作为我的应用程序的主模块。我使用 angular.module('myApp').controller() 在主应用程序中添加了两个控制器。其中一个控制器具有页面范围，而另一个控制器是子控制器。

我现在要做的是包含一个属于另一个模块（不是主 myApp 模块）的控制器，但我无法弄清楚。我不想全局命名空间控制器。

有人知道怎么做吗？

这是我到目前为止所拥有的：

```
<!doctype html>
<html lang="en" data-ng-app='myApp' data-ng-controller='myApp.mainController'>
<head>
  <meta charset="utf-8">
  <title>Untitled</title>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>
    $(function() {
      var app, module;

      //create two modules, one of which will be used for the app base
      app = angular.module('myApp', []);
      module = angular.module('otherModule', []);

      //create main controller for main app
      app.controller('myApp.mainController', function($scope) {
        $scope.content = 'App main controller content';
      });

      //create child controller for main app
      app.controller('myApp.subController', function($scope) {
        $scope.content = 'App sub controller content';
      });

      //create a controller for the other module
      module.controller('othermodule.controller', function($scope) {
        $scope.content = 'Other module controller content';
      });
    });

  </script>
</head>
<body>

  <!-- output content from main controller from main module: myApp -->
  {{content}}

  <!-- specify use of main module's child controller and output its content -->
  <div data-ng-controller='myApp.subController'>
    {{content}}
  </div>

  <!-- NOT WORKING - ideally should output content from the other module's controller -->
  <div data-ng-controller='othermodule.controller'>
    {{content}}
  </div>

  <!-- load angular library -->
  <script src="lib/angular/angular.js"></script>
</body>
</html> 
```

此代码输出以下内容，其中包含一个 JavaScript 错误，本质上是说未找到 othermodule.controller 控制器。

> App主控制器内容
> 
> 应用子控制器内容
> 
> {{内容}}

确切的错误：

```
> Error: Argument 'othermodule.controller' is not a function, got
> undefined
> assertArg@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:1005
> assertArgFn@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:1016
> @http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:4740
> applyDirectivesToNode/nodeLinkFn/<@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:4322
> forEach@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:140
> nodeLinkFn@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:4307
> compositeLinkFn@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:3953
> compositeLinkFn@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:3956
> nodeLinkFn@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:4338
> compositeLinkFn@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:3953
> publicLinkFn@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:3858
> bootstrap/</<@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:964
> Scope.prototype.$eval@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:7993
> Scope.prototype.$apply@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:8073
> bootstrap/<@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:962
> invoke@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:2843
> bootstrap@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:961
> angularInit@http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:936
> @http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js:14729
> b.Callbacks/c@http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js:3
> b.Callbacks/p.fireWith@http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js:3
> .ready@http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js:3
> H@http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js:3
> 
> http://localhost/sandbox/angular/apptemplate/lib/angular/angular.js
> Line 5687 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-19T21:49:10.177

您目前所做的是“声明”两个模块`app`和`module`.

当角度引导时，您已经要求它使用`app`. 因此，现在您的应用程序启动，`app`但`app`没有引用您的其他模块（即`module`！）。

因此，您将不得不使用`app`并指定依赖项来`module`引导您的应用程序，或者使用全新的模块引导您的应用程序并指定对`app`and的依赖项`module`。

这是您定义依赖项的方式

```
angular.module('app',['module']); 
```

如果您想创建一个全新的模块并将两者都指定为依赖项

```
angular.module('myApp',['app','module']) 
```

**注意：** 如果您创建一个全新的模块，您将不得不使用这个新模块引导您的 Angular 应用程序。

```
<html ng-app="myApp"... 
```

# java - 十进制格式类问题

> ID：16113893
> 
> 赞同：0
> 
> 时间：2013-04-19T21:38:39.903
> 
> 标签：java, string, parsing, decimalformat

我有一个字符串，我试图将其格式化为十进制格式，以便每 3 个数字使用十进制格式类，但我遇到了麻烦。这是我的代码

```
 public String getNum()

 {
     //turn the string myNum into a formatted number so there's a , after every 3 digits
      DecimalFormat formNum = new DecimalFormat(myNum "000,000");
     //set formNum to a string don't know what method to use for this step
      return formNum ;
  } 
```

myNum 来自文本文档，在本例中是数字 6486，但在其他使用相同代码的情况下，它一直到 301122。使用这种方法，我想将这些数字转换为诸如 6,486 或 301,112 我的构造函数语句 my IDE 在其中告诉我“）”是预期的，我也不确定如何在格式化数字后将十进制格式更改回字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:42:27.220

您在 myNum 之后错过了一个逗号。另外，应该是

```
DecimalFormat formNum = new DecimalFormat("000,000");
return formNum.format(myNum); 
```

# google-glass - 与文字分享照片

> ID：16113896
> 
> 赞同：4
> 
> 时间：2013-04-19T21:38:58.637
> 
> 标签：google-glass, google-mirror-api

“向其中添加猫”示例说明了如何与我的服务共享照片。

但是有没有办法在单个项目中共享带有文本的照片（使用录音机）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:57:02.293

是的！您可以使用 REPLY[内置菜单项](https://developers.google.com/glass/timeline#built-in-menu-items)来执行此操作。

[但是，该流程与Add a Cat to That](https://developers.google.com/glass/stories#add_a_cat_to_that)流程略有不同。它是这样工作的：

1.  订阅`timeline`集合的更新。
2.  插入一个时间线项目，其中包含指定的 REPLY 内置操作，如此[处所示](https://developers.google.com/glass/timeline#built-in-menu-items)。或者，您可以重命名菜单项并自定义图标。

    ```
    {
      "text": "Hello world",
      "menuItems": [
        {
          "action": "REPLY"
        }
      ]
    } 
    ```

3.  时间线卡片的菜单中将有一个回复选项。当用户选择它时，会提示他们说话。

4.  然后创建一个新的时间线卡，其中包含文本转录并附有录音。您的 Glassware 可以使用此卡。
5.  然后，您的 Glassware 会[收到](https://developers.google.com/glass/subscriptions#reply)有关此物品插入的通知。通知看起来像这样：

    ```
    {
      "collection": "timeline",
      "itemId": "3hidvm0xez6r8_dacdb3103b8b604_h8rpllg",
      "operation": "INSERT",
      "userToken": "harold_penguin",
      "verifyToken": "random_hash_to_verify_referer",
      "userActions": [
        {
          "type": "REPLY"
        }
      ]
    } 
    ```

6.  获取指示的时间线项目以访问转录文本（在`text`属性中）和[附加](https://developers.google.com/glass/v1/reference/timeline/attachments/get)的录音

# c - Linux 上的 IOCTL_STORAGE_QUERY_PROPERTY 等价物是什么？

> ID：16113897
> 
> 赞同：0
> 
> 时间：2013-04-19T21:39:01.533
> 
> 标签：c, linux, windows, driver

我正在尝试在不需要 root 访问权限的情况下获取 linux 上的硬盘序列号。这可以通过[此源](http://www.winsim.com/diskid32/diskid32.cpp)在 Windows 上实现。本质上，它执行`DeviceIoControl`with `IOCTL_STORAGE_QUERY_PROPERTY`。ioctl 版本是多少？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:26:43.407

您可以询问 udev，而无需 root 权限。试试这个命令并注意 ID_SERIAL 行：

```
/sbin/udevadm info --query=property --name /dev/sda 
```

以编程方式，您将使用 libudev。

# bash - 如何接受多个输入到同一个脚本

> ID：16113898
> 
> 赞同：0
> 
> 时间：2013-04-19T21:39:02.020
> 
> 标签：bash, unix

如何接受多行输入到同一个脚本中。或者换句话说，使用以下脚本处理多个文件：

```
#!/bin/bash
echo 'Enter file names (wild cards OK)'
read input_source
if test -f "$input_source"
then 
sort $var | uniq -c | head -10
fi 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:42:43.097

使用 while 循环：

```
while read input_source 
do
# Do something with $input_source
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:44:43.697

添加一个for循环：

```
#!/bin/bash
echo 'Enter file names (wild cards OK)'
read files
for input_source in $files ; do
    if test -f "$input_source" ; then 
        sort $var | uniq -c | head -10  # You probably should include $input_source somewhere
    fi
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T21:46:36.270

只需 cat 所有与输入模式匹配的文件-：

```
#!/bin/bash
echo 'Enter file names (wild cards OK)'
read input_source
cat $input_source | sort | uniq -c | head -10 
```

# google-maps - 如何点击带有水豚的谷歌地图来创建标记

> ID：16113904
> 
> 赞同：1
> 
> 时间：2013-04-19T21:39:39.923
> 
> 标签：google-maps, capybara

我在页面上有一个谷歌地图。用户可以单击此地图，它会在该点放置一个标记。如何在 Capybara 中模拟这个？只要它在地图上的某个地方，他们点击的位置并不重要。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:12:46.243

如果您使用 Selenium 驱动程序，我认为您可以使用[ActionBuilder 。](https://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/ActionBuilder.html#click-instance_method)它会是这样的：

```
within_frame(locator_of_frame_with_map) do
  map = find(locator_of_map).native
  page.driver.browser.action.move_to(map, x, y).click.perform
end 
```

上面的代码是草稿。显然，如果没有演示，我无法提供工作代码。

Capybara 本身没有用于单击特定坐标的跨驱动 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-06T00:50:13.680

在 Capybara 中使用 webkit 驱动程序，我使用了这个：

```
javascript_to_trigger_click = <<-JS
$('#map > div > div:nth-child(1) > div:nth-child(4) > div:nth-child(1)').click();
JS
page.evaluate_script(javascript_to_trigger_click) 
```

`#map`我的元素在哪里包含谷歌地图。

旁注，但我在这方面浪费了很多时间，请务必启用任何 url capybara 线程将其测试服务器运行到您的应用程序的谷歌控制台中。`config.debug = true`（您可以通过设置capybara来查看 url ）

# objective-c - NSScrollView 滚动条绘制在所有视图之上

> ID：16113910
> 
> 赞同：2
> 
> 时间：2013-04-19T21:40:17.553
> 
> 标签：objective-c, macos, cocoa

我有两个重叠的观点。

*   一个 NSTableView（歌曲列表），我称之为**表格视图**
*   一个支持 NSView 的层（用于底部的播放控件），我将其称为**播放控件视图**

我之前使用图层支持的视图来渲染表格视图，这导致滚动条在播放控件视图后面渲染，太棒了！但是当我用 150 多行数据加载表格视图时，应用程序在滚动时速度变慢了。

我更改`setWantsLayer:`为`NO`，现在表格视图更加快速，太棒了！但现在滚动条似乎呈现在播放控件视图的顶部。

**好的：**

![在此处输入图像描述](https://i.stack.imgur.com/YSHj2.jpg)

**坏的：**

![在此处输入图像描述](https://i.stack.imgur.com/5P4L5.jpg)

有什么想法吗？（如果你看不出来，我是核心动画菜鸟）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T11:57:04.720

调整整个大小`scrollVIew`可能是一个解决方案，但您不妨设置`scrollIndicatorInsets`：

```
yourTableView.scrollIndicatorInsets   = NSEdgeInsetsMake(0, 0, bottomValue, 0); 
```

这里的bottomValue 大概是50 -150，这取决于你的视图的高度，你可能需要测试一下，但这可以解决问题。

编辑：我刚刚看到您正在研究`OSX`，我的解决方案正在运行`iOS`，我希望`NSEdgeInsetsMake`Max OSX 上的工作类似于`UIEdgeInsetsMake`在`iOS`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T11:13:57.680

为什么不调整整个滚动视图的大小并将播放控件视图放在列表下方？从您的截图看来，播放控件视图是滚动视图的子视图。这是必要的吗？

# django - Django 模型设计：单个模型字段的可编辑帮助文本。是否存在引用模型特定字段的外部字段？

> ID：16113912
> 
> 赞同：1
> 
> 时间：2013-04-19T21:40:35.023
> 
> 标签：django, django-models, model

我的应用程序中有几个具有多个字段的模型。我想为用户设置一种方法，以便能够为模型中的每个字段修改帮助文本系统。您能给我一些关于如何设计模型以及使用哪些字段类型的指导吗？我对在 CharFields 中存储模型和字段名称感觉不对，但如果这是唯一的方法，我可能会坚持下去。

有没有使用 Django 的更优雅的解决方案？

举一个简单而愚蠢的例子，使用一个名为 jobs 的应用程序，一个名为 fun 的应用程序，并创建一个名为 helptext 的新应用程序：

```
jobs.models.py:

class Person(models.Model):
    first_name = models.CharField(max_length=32)
    .
    .
    interests = models.TextField()
    def __unicode__(self):
        return self.name

class Job(models.Model):
    name = models.CharField(max_length=128)
    person = models.ForeignKey(Person)
    address = models.TextField()
    duties = models.TextField()
    def __unicode__(self):
        return self.name

fun.models.py:

class RollerCoaster(models.Model):
    name = models.CharField(max_length=128)
    scare_factor = models.PositiveInteger()
    def __unicode__(self):
        return self.name

class BigDipper(RollerCoaster):
    max_elevation = models.PositiveInteger()
    best_comment_ever_made = models.CharField(max_length=255)
    def __unicode__(self):
        return super.name 
```

现在，假设我想在`Person.interests`、`Job.duties`、`RollerCoaster.scare_factor`、 和上有可编辑的帮助文本`BigDipper.best_comment_ever_made`。我会有类似的东西：

```
helptext.models.py:

from django.contrib.contenttypes.models import ContentType

class HelpText(models.Model):
    the_model = models.ForeignKey(ContentType)
    the_field = models.CharField(max_length=255)
    helptext = models.CharField(max_length=128)
    def __unicode__(self):
        return self.helptext 
```

那么，除了在渲染模板以查看 helptext 是否与屏幕上的每个字段相关联时必须比较制作`HelpText.the_model`和CharFields之外，还有什么更好的方法呢？`HelpText.the_field`

提前致谢！

***编辑：***

我知道这些字段的 help_text 参数，但我希望它可以通过 GUI 轻松编辑，并且它可能包含很多关于样式等的帮助。它可能是 HTML，文本可能超过 50-60 行大概有 100 个不同的模型字段。由于这些原因，我不想将其存储在字段定义中。

我将 HelpText 模型更改为对 ContentType 的引用和对 CharField 的字段。这似乎是一个很好的解决方案？我不确定这是最优雅的方式。请指教。

***编辑 2013-04-19 16:53 PST：***

目前，我尝试了这个并且它有效，但不确定这是否很棒：

```
from django.db import models
from django.contrib.contenttypes.models import ContentType

# Field choices for the drop down.
FIELDS = ()

# For each ContentType verify the model_class() is not None and if not, add a tuple
# to FIELDS with the model name and field name displayed, but storing only the field
# name.
for ct in ContentType.objects.all():
    m = ct.model_class()
    if m is not None:
        for f in ct.model_class()._meta.get_all_field_names():
            FIELDS += ((f, str(ct.model) + '.' + str(f)),)

# HelpText model, associated with multiple models and fields.
class HelpText(models.Model):
    the_model = models.ForeignKey(ContentType)
    the_field = models.CharField(max_length=255, choices=FIELDS)
    helptext = models.TextField(null=True, blank=True)

    def __unicode__(self):
        return self.helptext 
```

感觉不是最好的，但请告知这是否是一个解决方案，以后会咬我，让我充满遗憾......：*（

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T19:45:27.250

该解决方案有效，并且我已经实现了它，但您必须注意有时 ContentTypes 与您的模型不同步。您可以使用以下方法手动更新内容类型：

```
python manage.py shell
>>> from django.contrib.contenttypes.management import update_all_contenttypes
>>> update_all_contenttypes(interactive=True) 
```

这允许您添加新的并删除旧的（如果存在）。

字段不是外键的好处是我可以在其中放入任何帮助文本。所以，假设我有一个字段“名字”。我可以将帮助文本连接到 Person 模型和“first_name”字段。我也可以编造一些东西，比如“一些真正令人困惑的东西”。帮助文本现在与 Person 模型和“Something really chaos”字段相关联。所以，我可以把它放在表单的顶部，而不是用硬外键关联到一个字段。它可以是任意的，并且会在任何地方跟随那个“字段”。问题在于您可能会更改帮助文本字段关联的名称，从而无意中将原始帮助文本发送到永不着陆。

为了简化这一点，我创建了一个 TemplateTag，我将模型的名称和我想要关联的“字段”的名称传递给它。然后，无论何时呈现模板，该帮助文本都在那里，任何人都可以对其进行编辑以获取有关其用户界面表单的帮助。

不确定这是最好的解决方案，但我真的看不到任何其他方法，也没有得到回应。

干杯！

# c# - 将问题“System.String”转换为“System.Web.UI.HtmlControls.HtmlInputFile”

> ID：16113913
> 
> 赞同：0
> 
> 时间：2013-04-19T21:40:41.317
> 
> 标签：c#, asp.net

我有一个列表框，其中包含目录中特定文件的路径，代码读取和解析数据并用它做其他事情。我得到的错误是`Unable to cast object of type 'System.String' to type 'System.Web.UI.HtmlControls.HtmlInputFile'`，我不知道如何克服这个问题。

我有一个`INPUT`类型的 html 控件，`file`其唯一功能是获取目录路径，因为目录并不总是相同。然后我将`PostedFile.Filename`看起来像这样`C:\temp\2013\03-2013\Calib 100 for 29 Mar 13\211jd13100.txt`的 字符串拆分`'\'`为一个字符串数组。我通过添加数组元素减去最后一个索引来重新设置字符串中的路径，并将其用作 'Directory.GetFiles(string) 的参数以获取目录中的所有文件。同样，我不知道获取目录信息的另一种方法。无论如何，我将发布代码，它会更容易理解。

```
static public ArrayList hif = new ArrayList();
static string[] filePaths;

 protected void btnAddFile_Click(object sender, System.EventArgs e)
 {                
    if (Page.IsPostBack == true)
    {            
        StringBuilder sb = new StringBuilder();

        string[] dirLocation = fileUpload.PostedFile.FileName.Split('\\');            
        for (int i = 0; i < dirLocation.Length - 1; i++)
        {
            sb.Append(dirLocation[i].ToString() + "\\");
        }

        // The assenbled directory path is being used to get the files.
        filePaths = Directory.GetFiles(sb.ToString());

        for (int i = 0; i < filePaths.Length; i++)
        {
            hif.Add(filePaths[i]);
            lbxSelectedFiles.Items.Add(filePaths[i]);
        }
    }
} 
```

`filePath`上面的方法使用文件路径和名称加载列表框和数组。下面的方法负责解析，但在此之前我需要获取文件并且错误发生在父母之间的 foreach 语句（）。

```
 foreach (System.Web.UI.HtmlControls.HtmlInputFile HIF in hif)
    {
        try
        {
            File = HIF.PostedFile;
            StreamReader data = new StreamReader(HIF.PostedFile.InputStream);
            PathFilename = File.FileName.ToString();

            DirectoryInfo directory = new DirectoryInfo(PathFilename);
            Directory = directory.Parent.ToString();
            .
            .
            .
         }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:49:10.133

看起来“hif”是字符串的 ArrayList，因为您正在向其中添加文件路径。
因为它包含字符串，所以从其中拉出以在循环变量中使用的对象也将是字符串。
这一行：

```
 foreach (System.Web.UI.HtmlControls.HtmlInputFile HIF in hif) 
```

应该改为

```
 foreach (string HIF in hif) 
```

然后，您将获得文件路径名，然后可以使用该路径打开文件并获取要使用的实际 File 对象。

基本上，您指定的演员表不起作用，因为 hif 中没有那种类型的对象。

# javascript - JavaScript 变量列表和编辑器

> ID：16113914
> 
> 赞同：1
> 
> 时间：2013-04-19T21:40:48.477
> 
> 标签：javascript, firefox, variables, firefox-addon, mozilla

我正在寻找 Firefox 的扩展，它将列出页面上的所有 JavaScript 变量及其值，并允许您编辑它们以使它们的值不同。如果有办法做到这一点，无论是否有附加组件，请告诉我。

谢谢你的协助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T21:46:14.710

你可以试试firebug，它是一个非常好的工具，你可以调试javascript并输出范围内的所有变量。

[https://addons.mozilla.org/en-us/firefox/addon/firebug/](https://addons.mozilla.org/en-us/firefox/addon/firebug/)

[https://getfirebug.com/downloads](https://getfirebug.com/downloads)

![在此处输入图像描述](https://i.stack.imgur.com/wT4w3.png)

# passwords - 将散列的用户密码导入 Meteor 应用程序

> ID：16113917
> 
> 赞同：1
> 
> 时间：2013-04-19T21:41:01.813
> 
> 标签：passwords, meteor

我有一个现有站点，该站点的用户密码使用 sha1 散列算法进行散列。我需要将这些用户（和密码）移植到新的 Meteor 站点。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T16:33:29.843

我最近遇到了一个类似的问题，只是迁移了帐户并让用户重置了密码。然后，您可以使用内置的标准帐户方法来处理登录+重置功能。

登录方法调用：

```
Meteor.loginWithPassword(email, password, function(err){
  if (err){
    if(err.reason === "User has no password set"){
      Session.set('loginErrorMessage', 'you have been migrated... reset your password...');
      //your template does something with this to push user to reset their password
    }
  }else{
     //normal login     
  }
}); 
```

只有在您有自定义登录表单时才能真正做到这一点，如果需要，您可能只需轻轻自定义 accounts-ui 包

到目前为止，这种方法对我的应用程序来说效果很好，用户只需遵循密码重置程序就可以了

# sql - 为什么我的主表列不会在我的触发器中增加？

> ID：16113918
> 
> 赞同：0
> 
> 时间：2013-04-19T21:41:08.010
> 
> 标签：sql, sql-server, triggers

我需要创建一个触发器来跟踪电影从 Blockbuster 这样的公司租借的次数。我需要一个单独的触发器来进行插入、删除和更新。

跟踪此租用次数的列称为 num_rentals，其数据类型为 int。此列是包含 *movie_id (pk*)、movie_title、release_year、movie_description 和 num_rentals的**Movies表的一部分。****customer_rentals**表有 item_rental_id(pk)、*movie_id(fk*)、customer_id。

我在这里搜索并找到了一个类似的线程，并尝试使用提供的答案，但无济于事。我执行了以下字符串，没有任何错误，但是当我将数据插入到 Movie 或 Customer_rentals 表中时，我发现 num_rentals 列没有变化。我究竟做错了什么？

```
CREATE TRIGGER dbo.tr_num_rented_insert ON dbo.customer_rentals
    FOR INSERT
AS
    BEGIN
        UPDATE  m
        SET     num_rentals = num_rentals + 1
        FROM    dbo.movies AS m
                INNER JOIN inserted AS i ON m.movie_id = i.movie_id ;
        END 
```

我稍后将 num_rentals 字段添加到表中，并且我还需要知道如何将当前在 Movies 表中的所有记录的字段值初始化为零。

我想尽可能多地理解这一点，因此非常感谢您的帮助。我读到可能有更有效的方法来管理此类数据，但这是我的导师想要的方式。先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T00:13:44.750

我怀疑你的问题是 null num_rental 列。因此，您将 null 添加到 1，结果为 null。

就个人而言，我会将 num_rentals 列设置为不可为空，默认为零，但假设您不能这样做，请使用 isnull()。

像这样

```
alter TRIGGER dbo.tr_num_rented_insert ON dbo.customer_rentals
    FOR INSERT
AS
    BEGIN
        UPDATE  m
        SET     num_rentals = isnull(num_rentals,0) + 1
        FROM    dbo.movies AS m
                INNER JOIN inserted AS i ON m.movie_id = i.movie_id ;
    END 
```

但是，即使这样可行，也有问题；如果您向 customer_rentals 添加多行，它只会增加一。就个人而言，我会更改触发器以解决此问题。

像这样

```
alter TRIGGER dbo.tr_num_rented_insert ON dbo.customer_rentals
    FOR INSERT
AS
    BEGIN
        UPDATE  m
        SET     num_rentals = isnull(num_rentals,0) + (select COUNT(*) from inserted where movie_id = m.movie_id)
        FROM    dbo.movies AS m
        where   movie_id in (select movie_id from inserted)
    END 
```

就重复信息而言，Aaron 是对的，这是不必要的冗余，根据我的经验，这类事情经常不同步。使用这样一个简单的数据库，num_rentals 列是多余的（为了大方），但是您的电影数据库是一个人为的示例来教您一个概念。基本上，有时您会希望计算值易于访问或过滤。以 SO rep 为例，我假设他们不会在每次显示它时重新计算它。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T23:05:39.900

Aaron's frequently upvoted comment suggests that you are doing something unwise. However, since you are doing what your instructor is specifying, I suggest that you look at a couple of things.

First, will your update query work for the initial rental? If the initial value is 0 it will. If the initial value is null it won't.

Second, you might be referencing the wrong table. The trigger is on customer_rentals but your trigger refers to inserted. That strikes me as odd.

Just so you know, I was one of those who upvoted Aaron's comment.

# database - 连接多个表，包括 2 个连接表

> ID：16113920
> 
> 赞同：0
> 
> 时间：2013-04-19T21:41:26.600
> 
> 标签：database, doctrine-orm

我尝试在一个查询中加入多个表。

我的实体关系：

人

```
Entities\Person:
  type: entity
  table: person
  manyToOne:
    address:
      targetEntity: Address
      joinColumn:
        name: idaddress
        referencedColumnName: idaddress
  manyToMany:
    tags:
      targetEntity: Tag
      joinTable:
        name: persons_tags
        joinColumns:
          person_idperson:
            referencedColumnName: idperson
        inverseJoinColumns:
          tag_idtag:
            referencedColumnName: idtag 
```

标签

```
Entities\Tag:
  type: entity
  table: tag
  manyToMany:
    sms:
      targetEntity: Sms
      mappedBy: tag 
```

短信

```
 manyToMany:
    tag:
      targetEntity: Tag
      joinTable:
        name: sms_tags
        joinColumns:
          sms_idsms:
            referencedColumnName: idsms
        inverseJoinColumns:
          tag_idtag:
            referencedColumnName: idtag 
```

这是一个有效的工作 SQL 语句：

```
SELECT DISTINCT person.lastname, person.firstname, address.mobileprivate, address.mobilebusiness FROM
    `address`,
    `person`,
    `persons_tags`,
    `sms_tags`
WHERE
    person.idaddress = address.idaddress
    AND person.idperson = persons_tags.person_idperson
    AND persons_tags.tag_idtag = sms_tags.tag_idtag
    AND sms_tags.sms_idsms = (myINPUT) 
```

现在我尝试在 DQL 中加入所需的实体以获得相同的结果：

```
SELECT DISTINCT s, t, p, a 
FROM Entities\Sms s 
JOIN s.sms_idsms t 
JOIN t.person_idperson p 
JOIN p.idaddress a 
WHERE s.idsms = (myINPUT) 
```

但我只得到一个错误：

```
PHP Fatal error:  Uncaught exception 'Doctrine\\ORM\\Query\\QueryException' with message '
SELECT DISTINCT s, t, p, a 
FROM Entities\\Sms s 
JOIN s.sms_idsms t 
JOIN t.person_idperson p 
JOIN p.idaddress a 
WHERE s.idsms = 2' in 
/var/www/ci_doc_rem/Codeigniter_Doctrine/source/application/libraries/Doctrine/ORM/Query/QueryException.php:39
Stack trace:
#0 /var/www/ci_doc_rem/Codeigniter_Doctrine/source/application/libraries/Doctrine/ORM/Query/Parser.php(429): Doctrine\\ORM\\Query\\QueryException::dqlError('SELECT DISTINCT...')
#1 /var/www/ci_doc_rem/Codeigniter_Doctrine/source/application/libraries/Doctrine/ORM/Query/Parser.php(925): Doctrine\\ORM\\Query\\Parser->semanticalError('Class Entities\\...')
#2 /var/www/ci_doc_rem/Codeigniter_Doctrine/source/application/libraries/Doctrine/ORM/Query/Parser.php(1561): Doctrine\\ORM\\Query\\Parser->JoinAssociationPathExpression()
#3 /var/www/ci_doc_rem/Codeigniter_Doctrine/source/application/libraries/Doctrine/ORM/Query/Parser.php(1506): Doctrine\\ORM\\Query\\Parser->JoinAssociationDeclaration()
#4 /var/www/ci_ in /var/www/ci_doc_rem/Codeigniter_Doctrine/source/application/libraries/Doctrine/ORM/Query/QueryException.php on line 49 
```

如何编写像工作 SQL 查询一样的 DQL 查询？

我尽量避免使用原生 SQL 查询

这是查询生成器的尝试：

```
 $qb->select(array('s', 't', 'p', 'a'))
       ->from('Entities\Sms', 's')
       ->leftJoin('s.tag', 't')
       ->leftJoin('t.person', 'p')
       ->leftJoin('p.address', 'a')
       ->where('s.idsms = 1'); 
```

和错误信息

```
PHP Fatal error:  Uncaught exception 'Doctrine\\ORM\\Query\\QueryException' with message 'SELECT s, t, p, a FROM Entities\\Sms s LEFT JOIN s.tag t LEFT JOIN t.person p LEFT JOIN p.address a WHERE s.idsms = 1' in /var/www/ci_doc_rem/Codeigniter_Doctrine/source/application/libraries/Doctrine/ORM/Query/QueryException.php:39\nStack trace:\n#0 /var/www/ci_doc_rem/Codeigniter_Doctrine/source/application/libraries/Doctrine/ORM/Query/Parser.php(429): Doctrine\\ORM\\Query\\QueryException::dqlError('SELECT s, t, p,...')\n#1 /var/www/ci_doc_rem/Codeigniter_Doctrine/source/application/libraries/Doctrine/ORM/Query/Parser.php(925): Doctrine\\ORM\\Query\\Parser->semanticalError('Class Entities\\...')\n#2 /var/www/ci_doc_rem/Codeigniter_Doctrine/source/application/libraries/Doctrine/ORM/Query/Parser.php(1561): Doctrine\\ORM\\Query\\Parser->JoinAssociationPathExpression()\n#3 /var/www/ci_doc_rem/Codeigniter_Doctrine/source/application/libraries/Doctrine/ORM/Query/Parser.php(1506): Doctrine\\ORM\\Query\\Parser->JoinAssociationDeclaration()\n#4 /var/www/ci_doc_rem/Cod in /var/www/ci_doc_rem/Codeigniter_Doctrine/source/application/libraries/Doctrine/ORM/Query/QueryException.php on line 49 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T14:31:03.547

解决方案很容易找到。

我已将每个表/实体的 idname 命名约定替换为“id”，并仔细研究了 Picking Owning 和 Inverse Side。

[http://docs.doctrine-project.org/en/latest/reference/association-mapping.html#picking-owning-and-inverse-side](http://docs.doctrine-project.org/en/latest/reference/association-mapping.html#picking-owning-and-inverse-side)

这使我能够编写正确的关系。

对我来说，一个大问题是解码调试堆栈跟踪以找到我的错误。

感谢任何花时间解决我的问题的人！

# ios - 为什么 NSNotification 块中的这个 NSArray（显然）永远不会在 ARC 环境中发布？

> ID：16113932
> 
> 赞同：1
> 
> 时间：2013-04-19T21:42:05.817
> 
> 标签：ios, objective-c, nsarray, automatic-ref-counting

我有一个订阅其他地方广播的通知的视图控制器。这是一个大型对象图的一部分，当孩子被释放时，需要进行一些清理。但是在其中一个孩子（ARC环境）中从未调用过dealloc，这（如果我理解的话）意味着某处仍然保留了某些东西，因此即使VC被解雇，ARC也永远不会dealloc。我已经将有问题的代码追溯到以下两行。第一个版本导致 VC 和孩子永远不会被完全释放。在第二个版本中，一切正常，当这个 VC 被解散时，一切都得到了释放。

我的问题是为什么？使用 ARC，我无法理解为什么这个额外的 NSArray 不能正确发布。

希望这是足够的代码。有需要可以多发。

这是导致 VC（和孩子等）永远不会被完全释放的版本：

```
// Subscribe to notifications that the number of trackables has changed
[[NSNotificationCenter defaultCenter] addObserverForName:kUpdatedNumberofTrackables object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *note) {
    if ([note.object isKindOfClass:[NSArray class]]) {
        NSArray *activeTrackableNames = note.object; // <-- offending line
        [self trackableUpdate:activeTrackableNames]; // <-- offending line
    } else {
        NSLog(@"Observer error. Object is not NSArray");
    }
}]; 
```

但是当我按照以下方式执行此操作时，当视图被卸载时，一切都会正确释放，因此在子 VC 上调用了 dealloc：

```
// Subscribe to notifications that the number of trackables has changed
[[NSNotificationCenter defaultCenter] addObserverForName:kUpdatedNumberofTrackables object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *note) {
    if ([note.object isKindOfClass:[NSArray class]]) {
        [self trackableUpdate:note.object]; // <-- seems to work
    } else {
        NSLog(@"Observer error. Object is not NSArray");
    }
}]; 
```

此 VC 中可能（？）发挥作用的其他一些相关方法：

```
- (void)viewDidDisappear:(BOOL)animated {
    [super viewDidDisappear:animated];
    self.trackablesVisible_private = nil;
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

#pragma mark - Target Handling
-(void)trackableUpdate:(NSArray *)trackablesArray {
    NSLog(@"Trackable Changed");
    if (([trackablesArray count] > 0) && [self.delegate respondsToSelector:@selector(foundValidTargets:)]) {
        [delegate foundValidTargets:trackablesArray];
    }
    self.trackablesVisible_private = trackablesArray;
} 
```

我不明白这里发生了什么。有人可以启发我吗？

谢谢！

**编辑：**

因此，正如回复中所述，部分问题是由于未能`self`在块中使用弱项而导致的保留周期，但显然这里还有另一个问题，因为我正在使用通知中心。解决方案在这里描述：[Dealloc Not Running When Dismissing Modal View from Block](https://stackoverflow.com/a/8248598/675943 "从块中关闭模态视图时 Dealloc 未运行")

我的最终工作代码如下：

在`@interface`

```
__weak id observer; 
```

在`loadView`

```
__weak ThisViewController *blockSelf = self; // Avoids retain cycle
observer = [[NSNotificationCenter defaultCenter] addObserverForName:kUpdatedNumberofTrackables object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *note) {
    if ([note.object isKindOfClass:[NSArray class]]) {
        ThisViewController *strongSelf = blockSelf; // Avoids retain cycle
        NSArray *activeTrackableNames = note.object;
        [strongSelf trackableUpdate:activeTrackableNames];
    } else {
        NSLog(@"Observer error. Object is not NSArray");
    }
}]; 
```

而在`viewWillDisappear`

```
[[NSNotificationCenter defaultCenter] removeObserver:observer]; 
```

我还不完全明白为什么你必须保存返回的观察者对象，而不是仅仅删除`self`，但这有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:11:12.813

你的块中有一个保留周期......这就是你想要的

```
__weak MyViewControllerName *bSelf = self;
// Subscribe to notifications that the number of trackables has changed
[[NSNotificationCenter defaultCenter] addObserverForName:kUpdatedNumberofTrackables object:nil queue:[NSOperationQueue mainQueue] usingBlock:^(NSNotification *note) {
    if ([note.object isKindOfClass:[NSArray class]]) {
        **NSArray *activeTrackableNames = note.object;
        [bSelf trackableUpdate:activeTrackableNames];**
    } else {
        NSLog(@"Observer error. Object is not NSArray");
    }
}]; 
```

有关块和保留周期的更多信息，请查看[http://zearfoss.wordpress.com/2012/05/11/a-quick-gotcha-about-blocks/](http://zearfoss.wordpress.com/2012/05/11/a-quick-gotcha-about-blocks/)

# html - 如何在其容器中垂直和水平居中此输入字段

> ID：16113936
> 
> 赞同：1
> 
> 时间：2013-04-19T21:42:39.437
> 
> 标签：html, css

我正在尝试将此输入字段水平和垂直居中于其容器内（绿色框）

有没有办法在没有 CSS3 flexbox 技术的情况下做到这一点？

我尝试过的一切，包括正常的居中技术、边距和自动，以及定位都不起作用。

好吧，定位的问题在于它确实有效，但必须有更好的方法将其向下移动。

有任何想法吗？

这是页面：[https ://dl.dropboxusercontent.com/u/270523/help/new.html](https://dl.dropboxusercontent.com/u/270523/help/new.html)

我正在尝试使用 id #searchInput 将输入居中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:48:08.123

添加`position: relative`到部分容器，然后使用绝对定位以使用输入高度一半的负边距垂直居中对齐输入字段：

```
#input {
    position: relative;
}

#searchInput {
    position: absolute;
    top: 50%;
    margin-top: -0.809rem;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:50:17.103

你可以这样做：

```
<div style="display:table;">
    <div style="display:table-cell;vertical-align:middle;text-align:center;">centered box</div>
</div> 
```

JSFiddle：http: [//jsfiddle.net/V8GUn/](http://jsfiddle.net/V8GUn/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T22:01:09.707

尝试将此添加到您的代码中

```
#searchInput { margin-top: 5px; } 
```

# r - 在 sciplot 条形图中更改 x 轴标签与轴的距离

> ID：16113941
> 
> 赞同：0
> 
> 时间：2013-04-19T21:42:53.983
> 
> 标签：r, graphics

我正在使用来自 sciplot 的 bargraph.CI 构建一个绘图。x 轴表示一个分类变量，因此该变量的值是 x 轴上不同位置的名称。不幸的是，这些名称很长，所以在默认设置下，其中一些会消失。我通过在需要的地方注入“\n”将它们分成多行来解决这个问题。这基本上是可行的，但是因为现在名称是多行的，所以它们看起来太靠近 x 轴了。我需要把它们移到更远的地方。如何？

我知道我可以用 mgp 做到这一点，但这也会影响 y 轴。

我知道我可以在调用 barplot.CI 时设置axisnames=FALSE，然后使用axis 创建一个单独的x 轴。（事实上​​，我已经这样做了，但只是为了让 x 轴比默认情况下延伸得更远 - 请参阅下面的代码。）然后我可以给 x 轴自己的 mgp 参数，该参数不会影响y 轴。但据我所知，axis() 对于序数或连续变量设置得很好，似乎不适用于分类变量。经过一番摆弄，我无法将名字放在正确的位置（即在他们的对应栏下方）

最后，我尝试使用 Hmisc 中的 mgp.axis.labels 仅设置 x 轴 mgp，这正是我想要的，但据我所知，它对任何东西都没有影响。

想法？这是我的代码。

```
ylim    = c(0.5,0.8)
yticks  = seq(ylim[1],ylim[2],0.1)
ylab    = paste(100*yticks,"%",sep="")

bargraph.CI( 
    response    = D$accuracy,
    ylab        = "% Accuracy on Test",
    ylim        = ylim,
    x.factor    = D$training,
    xlab        = "Training Condition",
    axes        = FALSE
    )
axis(
    side        = 1,
    pos         = ylim[1],
    at          = c(0,7),
    tick        = TRUE,
    labels      = FALSE
    )
axis(
    side        = 2,
    tick        = TRUE,
    at          = yticks,
    labels      = ylab,
    las         = 1
    ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T23:57:54.497

`axis`适用于类别，但您应该设置正确的刻度值并使用`pos`参数进行偏移转换。这里我使用`xvals`的返回值`bargraph.CI`来设置`àxis`刻度线。

这是一个可重现的示例：

![在此处输入图像描述](https://i.stack.imgur.com/etCtX.png)

```
library(sciplot)
# I am using some sciplot data 
dat <- ToothGrowth
### I create along labels
labels <- c('aaaaaaaaaa\naaaaaaaaaaa\nhhhhhhhhhhhhhhh',
          'bbbbbbbbbb\nbbbbbbbbbbb\nhhhhhhhhhhhhhh',
          'cccccccccc\nccccccccccc\ngdgdgdgdgd')
## I change factor labels
dat$dose <- factor(dat$dose,labels=labels)
ll <- bargraph.CI(x.factor = dose, response = len, data = dat,axisnames=FALSE) 
## set at to xvals
axis(side=1,at=ll$xvals,labels=labels,pos=-2,tick=FALSE) 
```

# sql-server-2008-r2 - 在与数据库建立新连接后，需要立即执行特定的 TSQL 命令。一切都在 EF5.0 下（模型优先）

> ID：16113942
> 
> 赞同：1
> 
> 时间：2013-04-19T21:43:03.960
> 
> 标签：sql-server-2008-r2, entity-framework-5, sql-server-2012

使用 Entity Framework 5.0 和 MS SQL Server 2012。实现一些单元级加密功能。这需要一组特定的操作来成功加密/解密数据：

1.  打开加密密钥（例如执行 OPEN SYMMETRIC KEY TSQL 命令）
2.  执行以下 SELECT DECRYPTBYKEY(key_guid, encryptedDate) AS Something FROM SomeTable

问题是：在 Entity Framework 5.0 下，如何在与数据库建立新连接后立即运行 OPEN KEY 命令？打开密钥后，它将保持打开状态，直到此数据库会话处于活动状态。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:59:32.340

也许您可以订阅连接的`StateChange`事件：

```
this.Database.Connection.StateChange += this.Connection_StateChange;
// "this" is the DbContext.

private void Connection_StateChange(object sender, StateChangeEventArgs e)
{
    if(e.CurrentState == ConnectionState.Open)
    {
        // your commands here using sender as SqlConnection.
    }
} 
```

# java - 对文件中的多个数组进行排序。整理各州人口

> ID：16113947
> 
> 赞同：0
> 
> 时间：2013-04-19T21:43:21.973
> 
> 标签：java, arrays, census

**这是我的第一篇文章，所以不知道我是否做对了。但是我必须阅读一个文件，然后按人口从小到大的顺序排列列表。我得到的只是阿拉巴马州，而且只出现过一次。我认为我的问题来自“for”语句，但我不确定。它也可能来自“return”语句。文件是这样设置的

阿拉巴马州,4779736
阿拉斯加州,7102313**

```
import java.io.File;
import java.io.IOException;
import java.io.PrintWriter;     
import java.util.Scanner;

public class Inorder {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        // TODO Auto-generated method stub
         PrintWriter prw = new PrintWriter("outfile.txt");
                        File f = new File("census2010.txt");
                        if(!f.exists()) {
                            System.out.println( "f does not exist ");
                        }
                        Scanner infile = new Scanner(f);
                        infile.useDelimiter ("[\t|,|\n|\r]+");
                        final int MAX = 50;
                        int [] myarray = new int [MAX];
                        String[] statearray = new String[MAX];
                        int fillsize;

                        fillsize = fillarray (myarray, statearray, infile);

                        printarray (myarray, fillsize, prw);
                        sortarray(myarray, statearray, fillsize);

                    }

                    public static int fillarray (int[] num, String[] states, Scanner infile){

                        for( int count = 0; count < 50; count++){
                              int retcnt = 0;
                                int pop;
                                String state;
                                state = infile.next();
                                pop = infile.nextInt();
                            System.out.println(state + " " + pop + " ");
                            states[retcnt] = state;
                            num[retcnt] = pop;
                            retcnt++;

                        return (retcnt); }

                    }

                    public static void printarray (int[] num, int fillsize, PrintWriter prw){
                        for (int counts = 0; counts < fillsize ; counts++){
                            System.out.println("For the position ["+counts+"] the value is " + num[counts]);
                            prw.println("For the position ["+counts+"] the value is " + num[counts]);
                        }
                        return;
                    }

                    public static void  sortarray(int[] poparray, String[] statearray, int fillsize){

                        for( int fill = 0; fill < fillsize -1; fill = fill+1){
                            for ( int compare = fill+1; compare < fillsize; compare++){
                                if( poparray[compare] < poparray[fill]){

                                    int poptemp = poparray[fill];  
                                    poparray[fill] = poparray[compare]; 
                                    poparray[compare]  = poptemp;
                                // do I need something here?    
                                    String statetemp = statearray[fill];  
                                    statearray[fill] = statearray[compare]; 
                                    statearray[compare]  = statetemp;
                                }
                            }
                        }
                    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T21:52:16.257

看起来您只需要将您的 return 语句移到 for 循环之外。

```
public static int fillarray (int[] num, String[] states, Scanner infile){
    for( int count = 0; count < 50; count++){
        // ...
    } // Finish *all* iterations of the loop, *then* return
    return (retcnt); 
 } 
```

通过`return`在你的循环中，你只执行第一次迭代并且方法返回（阻止所有其他 49 次迭代）。你在你的`printarray`方法中正确地做到了这一点。

### 编辑：

正如您所提到的，将 return 语句移到循环之外使其`retcnt`不再可访问。这是因为您在循环`retcnt` *内声明；*如果您`retcnt`在循环之前声明，您将没有问题。

```
int retcnt = 0;
for (//...) {
    //...
}
// The variable retcnt is now accessible for the entire method scope, 
// instead of just the loop block
return retcnt; 
```

# java - JTable 更改列字体

> ID：16113950
> 
> 赞同：6
> 
> 时间：2013-04-19T21:43:50.097
> 
> 标签：java, swing, unicode, jtable, font-size

我正在制作一张表格，我想在其中制作具有更高字体大小的第一列。

例如，在第 0 列中，我希望字体大小为 30，在第 1-3 列中，我希望字体大小为 13。

这是我的代码

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.io.*;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.*;

public class kanji_list extends JFrame {

    kanji_list(){

        JTable table = new JTable();
        JScrollPane scroll = new JScrollPane();
        Image icon = Toolkit.getDefaultToolkit().getImage("JLPT.jpg");
        ImageIcon ima = new ImageIcon("JLPT.jpg");

        DefaultTableModel model = new DefaultTableModel(get_data(), get_header());

        table = new JTable(model){
            public boolean isCellEditable(int rowIndex, int vColIndex){
                return false;
            }
        };
        JTableHeader th = table.getTableHeader();  
        TableColumnModel tcm = th.getColumnModel();
        TableColumn column = null;
        table.setFont(new Font("Microsoft JhengHei", Font.BOLD, 13));
        for (int i = 0; i < 4; i++) {
            column = table.getColumnModel().getColumn(i);
            DefaultTableCellRenderer tcr = new DefaultTableCellRenderer();
            tcr.setHorizontalAlignment(SwingConstants.CENTER);
            column.setCellRenderer(tcr);
            if (i==0) {
                column.setPreferredWidth(50);
            }
            else{
                if(i==1){
                    column.setPreferredWidth(175);
                }
                else{
                    if(i==2){
                        column.setPreferredWidth(200);
                    }
                    else{
                        column.setPreferredWidth(875);
                    }
                }
            }
        }       
        table.setRowHeight(table.getRowHeight()+30);
        table.setModel(model);
        scroll.add(table);
        this.add(scroll);
        this.setTitle("Katakana");
        this.setSize(1350, 700);
        this.setIconImage(icon);
        this.setVisible(true);
        this.setLocationRelativeTo(null);

        scroll.setViewportView(table);
    }
    Object [][]get_data(){
        Object data[][] = new Object[][]{
            {"\u4e00", "Uno, 1", "ICHI, ITSU", "hito-, hitotsu"}, 
            {"\u4e8c", "Dos, 2", "NI, JI", "futa, futatsu, futatabi"}, 
            {"\u4e09", "Tres, 3", "SAN, JOU", "mi, mitsu, mittsu"},
            {"\u99c5", "Estación", "EKI", ""}
        };
        return data;
    }
    String []get_header(){
        String header [] = new String[]{"KANJI", "SIGNIFICADO", "LECTURA ON", "LECTURA KUN"};
        return header;
    }
} 
```

这是一个日语学习系统，在我的 13 号字体中，第一列上的 unicode 上的汉字根本不可见，但是如果我将所有表格都设置为更大的尺寸，那么所有其他列都会变大并且看起来不美好的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-20T09:50:04.400

在核心 JTable 中，您基本上需要一个自定义渲染器，它将字体设置为与表格字体不同的东西，即 DefaultTableCellRenderer 的子类中的 fi。请注意，实例化后在 DefaultTableCellRenderer 上设置一次字体将不起作用，因为它在每次调用 getTableCellRendererComponent 时都会重置。

```
JTable table = new JTable(new AncientSwingTeam());
// the default renderer uses the table's font,
// so set it as appropriate
table.setFont(fontToUseForAllColumnsExceptFirst);
// a custom renderer which uses a special font
DefaultTableCellRenderer r = new DefaultTableCellRenderer() {
    Font font = fontToUseForFirstColumn;

    @Override
    public Component getTableCellRendererComponent(JTable table,
            Object value, boolean isSelected, boolean hasFocus,
            int row, int column) {
        super.getTableCellRendererComponent(table, value, isSelected, hasFocus,
                row, column);
        setFont(font);
        return this;
    }

};
// doesn't work because the default renderer's font is reset
// to the table's font always
// r.setFont(font);
// set the custom renderer for first column
table.getColumnModel().getColumn(0).setCellRenderer(r); 
```

另一种方法是在 SwingX 项目中支持的渲染器装饰方法（偏向我无法抗拒:-) 那么上面将是一个两行（假设表是 JXTable 类型）：

```
Highlighter hl = new FontHighlighter(font);
table.getColumnExt(0).setHighlighter(hl); 
```

# ruby-on-rails - ActiveRecord 包括不做我期望的事情

> ID：16113953
> 
> 赞同：1
> 
> 时间：2013-04-19T21:43:58.860
> 
> 标签：ruby-on-rails, activerecord

```
class Program
  attr_accessible :open, ...
  has_many :rounds
  has_many :open_rounds, :class_name => 'Round', :conditions => ['open = ?', true]
end

class Round
  belongs_to :program
  attr_accessible :open, :status, :begin ...
end

[64] pry(main)> a = Program.includes(:rounds)
  Program Load (0.2ms)  SELECT "programs".* FROM "programs"
  Round Load (0.2ms)  SELECT "rounds".* FROM "rounds" WHERE "rounds"."program_id" IN (4, 6)
+----+-------------+-------------+------------+-------+--------+-------------+------------+-------------+
| id | name        | moderato... | descrip... | open  | locked | suppress... | created_at | updated_at  |
+----+-------------+-------------+------------+-------+--------+-------------+------------+-------------+
| 4  | Advanced... |             | Summer ... | false | true   | false       | 2013-04... | 2013-04-... |
| 6  | Introduc... |             | Summer ... | false | true   | false       | 2013-04... | 2013-04-... |
+----+-------------+-------------+------------+-------+--------+-------------+------------+-------------+
2 rows in set
[65] pry(main)> 
```

SQL 看起来像我期望的那样，但我期望在查询结果中看到 Round 的其他列。

示例二是相同的，但更令人困惑。请注意，程序 4 没有公开回合：

```
[67] pry(main)> Program.find(6).rounds
  Program Load (0.1ms)  SELECT "programs".* FROM "programs" WHERE "programs"."id" = ? LIMIT 1  [["id", 6]]
  Round Load (0.2ms)  SELECT "rounds".* FROM "rounds" WHERE "rounds"."program_id" = 6
+----+------------+--------+-------+-----+--------+-------+-----------+----------------+----------------+
| id | program_id | number | start | fin | status | open  | open_date | created_at     | updated_at     |
+----+------------+--------+-------+-----+--------+-------+-----------+----------------+----------------+
| 10 | 6          | 0      | 0     | 10  |        | false |           | 2013-04-13 ... | 2013-04-13 ... |
| 11 | 6          | 1      | 11    | 21  |        | false |           | 2013-04-13 ... | 2013-04-13 ... |
| 12 | 6          | 2      | 22    | 32  |        | false |           | 2013-04-13 ... | 2013-04-13 ... |
| 13 | 6          | 3      | 33    | 43  |        | false |           | 2013-04-13 ... | 2013-04-13 ... |
+----+------------+--------+-------+-----+--------+-------+-----------+----------------+----------------+
4 rows in set 
```

然而，当我这样做时：

```
[68] pry(main)> a = Program.includes(:open_rounds)
  Program Load (0.2ms)  SELECT "programs".* FROM "programs"
  Round Load (0.2ms)  SELECT "rounds".* FROM "rounds" WHERE "rounds"."program_id" IN (4, 6) AND (open = 'f')
+----+-------------+-------------+------------+-------+--------+-------------+------------+-------------+
| id | name        | moderato... | descrip... | open  | locked | suppress... | created_at | updated_at  |
+----+-------------+-------------+------------+-------+--------+-------------+------------+-------------+
| 4  | Advanced... |             | Summer ... | false | true   | false       | 2013-04... | 2013-04-... |
| 6  | Introduc... |             | Summer ... | false | true   | false       | 2013-04... | 2013-04-... |
+----+-------------+-------------+------------+-------+--------+-------------+------------+-------------+ 
```

我不仅没有看到 Round 属性，而且看到了我没想到的 Program 6。除了“AND (open ='f') 之外，SQL 看起来还可以。因为请注意，在 Program 和 Round 中都有一个名为 open 的列。

对不起所有的转储，但我想清楚地列出证据。想法？

# iphone - Kobold2d 和 Cocos Builder：设置启动场景

> ID：16113955
> 
> 赞同：0
> 
> 时间：2013-04-19T21:44:02.963
> 
> 标签：iphone, ios, cocos2d-iphone, kobold2d

在 Kobold2d 中，Cocos2d 中 appDelegate 中的某些函数位于 config.lua 文件中。这让我想到了将 Cocos Builder 初始化为 cocos2d 中的第一个场景的问题原因，您替换了这一行（在应用程序委托中）

```
[director runWithScene: [IntroLayer scene]]; 
```

和

```
[director runWithScene: [CCBReader sceneWithNodeGraphFromFile:@"MainMenuScene.ccbi"]]; 
```

但这一切都隐藏在 Kobold2d 中 -`FirstSceneClassName = "HelloWorldLayer"`在 config.lua 文件中被替换。

任何人都知道解决这个问题的无错误方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T00:33:46.600

你仍然可以使用runWithScene，只需将它放在AppDelegate的`initializationComplete`方法中即可。这将优先于加载 config.lua 中指定的场景。

# python - python鼻子测试：指定测试应该在Selenium Grid中运行的节点

> ID：16113964
> 
> 赞同：0
> 
> 时间：2013-04-19T21:44:58.993
> 
> 标签：python, selenium, webdriver, nose

我正在尝试更新我的**Selenium Grid Hub**功能测试以通过**鼻子测试**框架运行。

目前，没有鼻子测试，如果我想启动一个进程并让它针对特定节点运行，我会在 SelRunner.py 文件中添加这种类型的代码

```
p1 = subprocess.Popen('python Tst_Ayusa_Nmo.py 5564 WINDOWS chrome') 
```

然后这会将 5564 WINDOWS chrome 的系统参数传递到我的测试文件中，它会知道它应该执行哪个 Grid 节点。

```
#execute test on this node: 5564 WINDOWS chrome
def setUp(self):
        if len(sys.argv) > 1:
            args = sys.argv
            port = args[1]
            platform = args[2]
            browser = args[3] 
```

现在我在这里查看了关于鼻子的各种帖子，但我不太确定如何在下面完成同样的事情：

```
if __name__ == '__main__':

    argv = ['--with-xunit', 'Tst_Ayusa_Nmo.py 5564']
    nose.main(argv=argv)
======================================================================
ERROR: Failure: AttributeError ('module' object has no attribute 'py 5564')
----------------------------------------------------------------------
Traceback (most recent call last):
  File "C:\Python27\lib\site-packages\nose\loader.py", line 402, in loadTestsFromName
    module = resolve_name(addr.module)
  File "C:\Python27\lib\site-packages\nose\util.py", line 321, in resolve_name
    obj = getattr(obj, part)
AttributeError: 'module' object has no attribute 'py 5564'

----------------------------------------------------------------------
Ran 1 test in 0.001s

FAILED (errors=1) 
```

一如既往的感谢！
PS除了命令行之外，我对传递节点配置的其他方法持开放态度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T02:07:48.643

我使用 TestConfig 插件。所以我启动了如下鼻子测试：

```
nose.run(argv=['nosetests','-v','-s','--with-xunit','--tc-file','./configFile'], 
             plugins=[TestConfig(),Capture(),Xunit()]) 
```

我做的内部测试

```
from testconfig import config
import sys
class testModule_1:
    def test_M1_1(self):
        print 'Module 1 Test 1 Config: ' + config['rc_configuration']['command'] 
```

我的配置文件示例：

```
[TEST_CONFIG]
xunitFile = firefoxTests.xml

[rc_configuration]
command = GoogleChrome 
```

'

# post - MVC 模型未发布

> ID：16113965
> 
> 赞同：0
> 
> 时间：2013-04-19T21:45:01.010
> 
> 标签：post, razor, asp.net-mvc-4, model, null

当我单击登录按钮时，我从未将模型发布到服务器。但是，如果我接受 FormCollection，我会看到这些值。我怎样才能让它自动绑定到我的模型而不是搜索表单集合？

根据我的阅读，有一些常见问题：
1 - 您的视图未指定您使用的模型（@model myApp.Models.name）
2 - 您的模型不使用属性
3 - 任何必填字段缺失

**控制器**

```
[HttpGet]
public ActionResult Password()
{
    return View(new AuthViewModel());
}

[HttpPost]
public ActionResult Password(AuthViewModel password)
{
    if (password == null || string.IsNullOrEmpty(password.Password))
    {
        ViewBag.Error = Constants.ErrorMessages.UserPassword_PassBlank;
        return View(new AuthViewModel());
    }

    //success
    return Redirect("/");
} 
```

**模型**

```
public class AuthViewModel
{
    public string Password { get; set; }
} 
```

**看法**

```
@model MvcApplication1.Models.AuthViewModel
@{
    ViewBag.Title = "Password";
}

<h2>Password</h2>
@using (Html.BeginForm())
{
    <div>@Html.TextBoxFor(m => m.Password,new{placeholder="Password",type="password",autofocus=""})</div>
    <div><button id="btnLogin" type="submit">Login</button></div>
    <div class="error">@ViewBag.Error</div>
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:52:12.650

使用以下

```
 @using (Html.BeginForm())
{
    <div>@Html.PasswordFor(model => model.Password)</div>
    <div><input id="btnLogin" type="submit" value="Login"/></div>
    <div class="error">@ViewBag.Error</div>
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T22:15:37.590

不知道为什么丹的答案不尝试就不起作用，看起来应该。我查看了一些登录表单的代码，类似于你的。这是我的：

```
public class SignInModel
{
    [Required]
    [Display(Name = "Enter your email address")]
    public string Email { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Enter your password")]
    public string Password { get; set; }

    [Display(Name = "Remember me?")]
    public bool RememberMe { get; set; }
} 
```

我看到的主要区别是我的密码有 [DataType(DataType.Password)] 属性。不知道这是否有那么大的不同。

我注意到的另一件事是不同的是，在我的表单中，我指定表单方法是 POST。我也使用了`EditorFor()`助手而不是文本框或密码：

```
@using (Html.BeginForm("SignIn", "Account", "POST"))
{
    <div class="form-field">
        @Html.LabelFor(x => x.Email)
        @Html.EditorFor(m => m.Email)
    </div>
    <div class="form-field">
        @Html.LabelFor(x => x.Password)
        @Html.EditorFor(m => m.Password)
    </div>
    <div class="form-remember">
        @Html.CheckBoxFor(m => m.RememberMe)
        @Html.LabelFor(x => x.RememberMe)
    </div>
    <button type="submit">
        Sign In</button>
} 
```

# php - 为什么从我刚刚编写的 php://memory 包装器读取失败？

> ID：16113969
> 
> 赞同：6
> 
> 时间：2013-04-19T21:45:03.767
> 
> 标签：php

我试图从`php://memory`包装器中读取，`fread()`但`fread()`总是返回 false。我的代码被简化：

```
$file_handle = fopen('php://memory', 'w+'); // Have tried php:temp also.
fwrite($file_handle, 'contents');
$file = fread($file_handle, filesize($file_handle)); // Have also tried 99999 for filesize. 
```

`$file`之后总是假的`fread()`。

这是怎么回事？

提前致谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-19T21:53:06.853

您需要在写入后 rewind($file_handle) 才能读取刚刚写入的内容，因为写入会将文件指针移动到文件末尾

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-06T13:27:12.097

打电话`rewind($file_handle)`之前`fread()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T21:53:40.577

在这里找到答案： [https ://stackoverflow.com/a/2987330/2271704](https://stackoverflow.com/a/2987330/2271704)

我需要在打电话`rewind($file_handle)`之前先打电话`fread()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T21:57:07.280

你应该得到这个：

> 警告：filesize() 期望参数 1 是字符串，给定资源

这些是[第一个问题](http://php.net/filesize)：

> `int filesize ( string $filename )`——  获取给定文件的大小。

...第二个：您尚未启用错误报告。

第三个问题是您的指针位于文件末尾。尝试这样的事情：

```
error_reporting(E_ALL);
ini_set('display_errors', true);
// ...

rewind($file_handle);
$file = ''; //
while (!feof($file_handle)) {
    $file .= fread($file_handle, 8192);
} 
```

# c# - 如何以编程方式选择要在 Outlook 2010 中查看的文件夹？

> ID：16113984
> 
> 赞同：2
> 
> 时间：2013-04-19T21:47:09.690
> 
> 标签：c#, outlook, vsto, outlook-2010

我正在通过 Search.Save 方法以编程方式创建搜索文件夹。保存搜索后（它在 Search Folders 目录中创建一个新文件夹），我想将注意力集中在这个新创建的文件夹上，以便视图更改为该文件夹。

这是我到目前为止的代码....

```
searchFolders = inboxFolder.Store.GetSearchFolders();
foreach (Outlook.Folder folder in searchFolders)
{
    if (folder.Name == "Expiring Retention Policy Mail")
    {
        folder.ShowItemCount = Microsoft.Office.Interop.Outlook.OlShowItemCount.olShowTotalItemCount;
        //folder.SetCustomIcon(new Bitmap(32, 32));
        folder.Display();
    }
} 
```

当我执行 folder.Display() 时，它会打开一个全新的检查器窗口......我不希望发生这种情况，我只是想选择它（比如通过设置焦点？）并在同一个检查器窗口中查看它它存在于。有人知道该怎么做吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T22:09:44.857

这应该对你有用......

访问您的`Application`对象（或从主加载项类）。接着

```
this.Application.ActiveExplorer().CurrentFolder = folder; 
```

即你可以`CurrentFolder`使用`ActiveExplorer`

> 当然，**始终确保正确地释放您的 COM 对象**（需要释放的对象）——而且你永远不应该像我在这里所做的那样（为了简单起见）——即像这样链接属性。将每个（属性）保存到变量中，并 `Marshal.ReleaseComObject`在退出时通过释放。

# c++ - 如何在 C++ 中读取最大 X 秒？

> ID：16113989
> 
> 赞同：4
> 
> 时间：2013-04-19T21:47:34.613
> 
> 标签：c++, timeout, file-descriptor

我希望我的程序等待在 FIFO 中读取某些内容，但如果`read`（我使用`std::fstream`）持续超过 5 秒，我希望它退出。

有可能还是我必须`alarm`绝对使用？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:35:40.660

我不相信有一种干净的方法可以实现这一点，即仅可移植的 C++ 解决方案。您最好的选择是在基于 *nix 的系统和Windows上使用`poll`or 。`select``WaitForSingleObject``WaitForMultipleObjects`

您可以通过创建`streambuffer`将调用转发到真实`streambuffer`对象的代理类来透明地执行此操作。这将允许您`wait`在实际读取之前调用适当的函数。它可能看起来像这样......

```
class MyStreamBuffer : public std::basic_streambuf<char>
{
public:
    MyStreamBuffer(std::fstream& streamBuffer, int timeoutValue)
        : timeoutValue_(timeoutvalue),
          streamBuffer_(streamBuffer)
    {
    }

protected:
    virtual std::streamsize xsgetn( char_type* s, std::streamsize count )
    {
        if(!wait(timeoutValue_))
        {
            return 0;
        }

        return streamBuffer_.xsgetn(s, count);
     }

private:
     bool wait() const
     {
         // Not entirely complete but you get the idea
         return (WAIT_OBJECT_0 == WaitForSingleObject(...));
     }

    const int       timeoutValue_;
    std::fstream&   streamBuffer_;
}; 
```

您需要在每次通话时执行此操作。它可能会有点乏味，但会提供一个透明的解决方案来提供超时，即使在客户端代码中可能没有明确支持它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T23:02:21.343

对于我解决问题的方式感兴趣的人，这是我从流中读取的函数。我最终无法使用`std::fstream`，因此我将其替换为`C`系统调用。

```
std::string
NamedPipe::readForSeconds(int seconds)
{
    fd_set              readfs;
    struct timeval      t = { seconds, 0 };

    FD_ZERO(&readfs);
    FD_SET(this->_stream, &readfs);

    if (select(this->_stream + 1, &readfs, NULL, NULL, &t) < 0)
        throw std::runtime_error("Invalid select");
    if (FD_ISSET(this->_stream, &readfs))
        return this->read();
    throw NamedPipe::timeoutException();
} 
```

# php - 从变量中将查询值设置为空

> ID：16113991
> 
> 赞同：0
> 
> 时间：2013-04-19T21:47:36.283
> 
> 标签：php, mysql, sql

我正在尝试使用 PDO 将空值插入数据库，但似乎有问题

**代码**

```
public function addBookCategory($id, $isbn, $category, $parent){
    $id = $this->dbh->quote($id);
    $isbn = $this->dbh->quote($isbn);
    $category = $this->dbh->quote($category);
    $parent = $this->dbh->quote($parent);

    return $this->query(
        "INSERT INTO book_categories 
        VALUES($id, $isbn, $category, $parent) 
        ON DUPLICATE KEY UPDATE id = $id"
    );
} 
```

在某些情况下，父列可以为空，但以下均未将父列设置为空，而是将值设置为空字符串“”或空字符串“NULL”。

```
$database->addBookCategory("kujhg", "asdasd", "asdasd", NULL);
$database->addBookCategory("kujhg", "asdasd", "asdasd", "");
$database->addBookCategory("kujhg", "asdasd", "asdasd", "NULL"); 
```

可以做些什么来克服这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:51:39.003

你应该写列名

```
 "INSERT INTO book_categories (id, isbn , category,parent)
    VALUES($id, $isbn, $category, $parent) 
    ON DUPLICATE KEY UPDATE id = $id" 
```

然后用这个

```
 $database->addBookCategory("kujhg", "asdasd", "asdasd", NULL); 
```

# android - 错误 1 libavcodec.so 文件格式无法识别 Android GL 动态壁纸

> ID：16113993
> 
> 赞同：9
> 
> 时间：2013-04-19T21:47:37.077
> 
> 标签：android, opengl-es, android-ndk, live-wallpaper

我正在尝试为android制作一个动态壁纸，播放位于android-asset设备上的.mp4视频（在我使用的示例中，它实际上在运行时将文件复制到sdcard/没关系）

我找到了这个[例子](https://github.com/frankandrobot/GLWallpaperVideoDemo) 并使用这篇[文章](https://stackoverflow.com/questions/14256412/how-to-play-video-as-live-wallpaper-android)，我能够使用 NDK 设置我的 Eclipse 并构建项目。使用 NDK 插件在 Eclipse 中构建时，我在问题窗口中收到此错误：

```
 Description Resource    Path    Location    Type
make: *** [libs/armeabi/libavcodec.so] Error 1  GLWallpaperVideoDemo-master         C/C++ Problem
make: *** Deleting file `libs/armeabi/libavcodec.so'    GLWallpaperVideoDemo-master         C/C++ Problem 
```

如果我尝试`ndk-build`从命令提示符运行，我会得到同样的错误。

我从上面的链接下载了项目，然后导入到 eclipse 中。我将 lib GLWallpaperService 添加到构建路径中，并确保我的 NDK 已设置。知道 lib 文件夹更改为 libs 我还尝试将 GLWallpaperService 移动到 libs 文件夹，但没有帮助。

该项目在没有 NDK 的情况下在 Eclipse 中构建得很好，但在尝试运行壁纸时显然会出错，因为没有构建本机库。

如何解决此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-17T13:10:43.550

The package you get by `git clone https://github.com/frankandrobot/GLWallpaperVideoDemo.git` is Linux oriented. The file `jni\ffmpeg-android\build\ffmpeg\armeabi\lib\libavcodec.so` and many others are simply symbolic links to actual files.

To make this all work easily on Windows, I suggest to go to the `jni\ffmpeg-android\build\ffmpeg\armeabi\lib` folder, and run

```
del *.so
copy libavcodec.so.52.99.1 libavcodec.so
copy libavcore.so.0.16.0 libavcore.so
copy libavdevice.so.52.2.2 libavdevice.so
copy libavfilter.so.1.69.0 libavfilter.so
copy libavformat.so.52.88.0 libavformat.so
copy libavutil.so.50.34.0 libavutil.so
copy libswscale.so.0.12.0 libswscale.so 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-16T08:35:32.613

问题可能是由于so文件损坏。尝试再次构建 ffmpeg 库或找到另一个版本。因为当我尝试编译项目时，我在eclipse中遇到了不同的错误：

> C:/Android/android-ndk-r8c/toolchains/arm-linux-androideabi-4.6/prebuilt/windows/bin/arm-linux-androideabi-strip:./libs/armeabi/libavcodec.so：**文件格式无法识别**

当我搜索此错误时，似乎该错误是由于文件损坏：[NDK prebuilt shared library file format not Recognized](https://stackoverflow.com/questions/15680502/ndk-prebuilt-shared-library-file-format-not-recognized)

或者库不是Android可以使用的格式： [Error in linking C++ static library with android ndk(Error: file format not Recognized)](https://stackoverflow.com/questions/8311874/error-in-linking-c-static-library-with-android-ndkerror-file-format-not-reco/8312255#8312255)